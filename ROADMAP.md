# PROJECT ANVILOS_ALPHA: TACTICAL ROADMAP

> **PRIME DIRECTIVE:** Phase 1 (Mainframe) and Phase 4 (Monitor) are **P1**. All subsequent phases MUST be implemented via **MicroJSON Punch Cards** generated by the Mainframe. Manual intervention is FORBIDDEN after Phase 4.

## PHASE 1: THE MAINFRAME (ORCHESTRATION) [P1]
**Objective:** Implement the Architect/Processor daemon logic for high-level system control using the "Phase 2" Simulation Protocols.
- [x] Initialize `cortex.db` with the `card_stack` schema (id, seq, op, pld, ret, stat, timestamp).
- [x] Implement `microjson` (Proprietary/Alias) protocol.
- [x] Implement `architect_daemon` (The Writer) to generate MicroJSON recipes.
- [x] Implement `processor_daemon` (The Reader) to execute and stamp card results.
- [x] **Integration:** Ensure Daemons communicate via `cortex.db` exclusively.

## PHASE 4: THE MONITOR (OBSERVABILITY) [P1]
**Objective:** Visualize system state via a rich TUI as defined in the "Phase 2" Visualization Dump.
- [x] Implement `MainframeMonitor` using the `rich` library.
- [x] Create Real-time Dashboard Layout (Header, Stack View, Telemetry, Footer).
- [x] Connect Monitor to `cortex.db` for live polling of `card_stack`.
- [x] Ensure non-blocking refresh rate (4Hz).

## PHASE 1.5: THE SUPPLY CHAIN (GOVERNANCE)
**Objective:** Establish Sovereign Build Hierarchy and Audit.
- [x] **Objective 0 (ASCII_OSS):** Create standardized `ascii_oss` build directory structure.
- [x] **Objective 1 (THE SPY):** Implement Audit Daemon (`runtime/agents/spy.py`) to log all `cortex.db` transactions and file changes.
- [x] **Objective 2 (THE WITCH):** Implement Ratification Logic (`runtime/agents/witch.py`) for critical system changes.

## Phase 2: "The Injection" (Current)
**Objective**: Deploy the "100% Anvil Kernel" - a sovereign, bootable Linux system.
**Status**: IN PROGRESS

### Directives
- [ ] **Sovereign Kernel**: Build a custom, minimal Linux Kernel (`vmlinux`) from source (Kernel.org).
- [ ] **No Firecracker**: Abandon AWS Firecracker. Implement minimal VMM (`anvil-vmm.c`) or simple ISO boot.
- [ ] **The Payload (Userland)**:
    - [ ] Musl-based Rootfs.
    - [ ] Basic Tools: `bash`, `vim`, `ssh` (Dropbear/OpenSSH).
    - [ ] Networking: DHCP, Loopback.
- [ ] **Delivery Mechanism**: Bootable ISO image (`anvil_os.iso`).

### Success Criteria
- System boots to a login prompt from ISO.
- `ssh` access is functional.
- `vim` works for editing.
- No reliance on host `cargo` or external `rust-vmm` crates.

## PHASE 3: THE TESSERACT (SOVEREIGN CRYPTOGRAPHY)
**Objective:** Establish 4D Hyper-Dimensional Identity & Entropy.
- [ ] **Objective 0 (WARP CORE):** Implement SIGFPE-based Entropy Emitter.
- [ ] **Objective 1 (DILITHIUM):** Implement FIPS 204 Lattice Crystal Planes (Prime, Secundus, Tertius).
- [ ] **Objective 2 (THE ENGINE):** Build 3x3 Tesseract Grid with 4D Time-Rotation.
- [ ] **Objective 3 (QUANTUM MINE):** Implement Entropy/OpCode correlation & prediction logic.

## PHASE 5: THE CRYSTAL PALACE (USERLAND)
**Objective:** Deploy isolated "Crystal" apps and Tesseract 2FA.
- [ ] **Objective 0 (THE LATTICE):** Define Window Manager interfaces & "The Gatekeeper" (Ingress).
- [ ] **Objective 1 (CRYSTAL RUNTIME):** Implement isolation & "Protocol Teleportation" (Shared Memory IPC).
- [ ] **Objective 2 (ANVIL-GREETER):** Build custom 2FA logon & "The Bifrost" (Egress) integration.
- [ ] **Objective 3 (2FA):** Implement Argon2id + Dilithium Challenge-Response auth.
- [ ] **Objective 4 (THE NORSE BRIDGE):** Integrate "The Warden" (Output Watcher) & "The Collar" (Input Filter).
- [ ] **Objective 5 (THE REAPER):** Implement automated garbage collection for dead Crystals and Shared Memory.

## PHASE 6: THE FOUNDATION (THE STAGE3)
**Objective:** Secure a verified, hardened base system.
- Boot Minimal Live Environment.
- Establish Network Connectivity.
- Wipe & Partition Disk (XFS/EXT4 with xattrs).
- Acquire & Verify Hardened Stage3 (selinux-openrc).
- Extract with Security Attributes (`--xattrs-include='*.*'`).

## PHASE 7: THE PROFILE (THE BLUEPRINT)
**Objective:** Define the system identity as Hardened SELinux.
- Sync Portage (webrsync).
- Select Hardened SELinux Profile.
- Lock build graph to `libselinux` & PIE/SSP.

## PHASE 8: YOUR KERNEL (THE HEART OF ANVIL)
**Objective:** Compile a hostile-to-exploits Anvil Kernel.
- Acquire Source (`gentoo-sources`).
- Configure Security Primitives (`SELINUX`, `AUDIT`).
- Configure Hardening (`PAGE_POISONING`, `SLAB_FREELIST_HARDENED`).
- Compile & Deploy.

## PHASE 9: THE USERSPACE (THE MUSCLES)
**Objective:** Install minimal, secure core utilities.
- Install System Logger (`sysklogd`).
- Install Scheduler (`cronie`).
- Setup Minimal Network Stack (`dhcpcd`).
- Install SELinux Policy Engine (`policycoreutils`, `base-policy`).

## PHASE 10: THE LABELING (THE RITUAL)
**Objective:** Apply mandatory access controls to the filesystem.
- Configure `config` (Permissive/MCS).
- Relabel Filesystem (`rlpkg -a -r`).

## PHASE 11: THE BOOTLOADER
**Objective:** Secure the entry point.
- Install GRUB.
- Inject Kernel Hardening Parameters (`lsm=lockdown`, `security=selinux`).
- Deploy Bootloader.

## PHASE 12: THE FINAL HANDOVER
**Objective:** Verify and lock down.
- Reboot.
- Verify SELinux Status (`sestatus`).
- Enforce SELinux (`enforcing`).

## PHASE 13: THE FINAL FORM (ISO GENERATION)
**Objective:** Forge the bootable Hybrid ISO artifact.
- [ ] **Objective 0 (BUILD PIPELINE):** Script `xorriso` generation of Hybrid ISO.
- [ ] **Objective 1 (THE HAMMER):** Create `anvil-install` script (Dev vs. Hypervisor modes).
- [ ] **Objective 2 (LIVE ENVIRONMENT):** Ensure ISO boots into Live "Try Before Die" mode.
- [ ] **Objective 3 (VALIDATION):** Verify installation on Bare Metal (USB) and VM.
