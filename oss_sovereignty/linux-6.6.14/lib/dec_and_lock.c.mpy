{
  "module_name": "dec_and_lock.c",
  "hash_id": "11c9084b1bf354a7ec8f8c5987b34fbd0082b844d6f7a75f37060c75d4daeaaf",
  "original_prompt": "Ingested from linux-6.6.14/lib/dec_and_lock.c",
  "human_readable_source": "\n#include <linux/export.h>\n#include <linux/spinlock.h>\n#include <linux/atomic.h>\n\n \nint _atomic_dec_and_lock(atomic_t *atomic, spinlock_t *lock)\n{\n\t \n\tif (atomic_add_unless(atomic, -1, 1))\n\t\treturn 0;\n\n\t \n\tspin_lock(lock);\n\tif (atomic_dec_and_test(atomic))\n\t\treturn 1;\n\tspin_unlock(lock);\n\treturn 0;\n}\n\nEXPORT_SYMBOL(_atomic_dec_and_lock);\n\nint _atomic_dec_and_lock_irqsave(atomic_t *atomic, spinlock_t *lock,\n\t\t\t\t unsigned long *flags)\n{\n\t \n\tif (atomic_add_unless(atomic, -1, 1))\n\t\treturn 0;\n\n\t \n\tspin_lock_irqsave(lock, *flags);\n\tif (atomic_dec_and_test(atomic))\n\t\treturn 1;\n\tspin_unlock_irqrestore(lock, *flags);\n\treturn 0;\n}\nEXPORT_SYMBOL(_atomic_dec_and_lock_irqsave);\n\nint _atomic_dec_and_raw_lock(atomic_t *atomic, raw_spinlock_t *lock)\n{\n\t \n\tif (atomic_add_unless(atomic, -1, 1))\n\t\treturn 0;\n\n\t \n\traw_spin_lock(lock);\n\tif (atomic_dec_and_test(atomic))\n\t\treturn 1;\n\traw_spin_unlock(lock);\n\treturn 0;\n}\nEXPORT_SYMBOL(_atomic_dec_and_raw_lock);\n\nint _atomic_dec_and_raw_lock_irqsave(atomic_t *atomic, raw_spinlock_t *lock,\n\t\t\t\t     unsigned long *flags)\n{\n\t \n\tif (atomic_add_unless(atomic, -1, 1))\n\t\treturn 0;\n\n\t \n\traw_spin_lock_irqsave(lock, *flags);\n\tif (atomic_dec_and_test(atomic))\n\t\treturn 1;\n\traw_spin_unlock_irqrestore(lock, *flags);\n\treturn 0;\n}\nEXPORT_SYMBOL(_atomic_dec_and_raw_lock_irqsave);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}