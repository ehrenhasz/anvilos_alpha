{
  "module_name": "dhry_1.c",
  "hash_id": "2a53c55cc1e7c6ca2a0318a725d5beefe994c8265b995435a5db862247f9fd98",
  "original_prompt": "Ingested from linux-6.6.14/lib/dhry_1.c",
  "human_readable_source": "\n \n\n#include \"dhry.h\"\n\n#include <linux/ktime.h>\n#include <linux/slab.h>\n#include <linux/string.h>\n\n \n\nint Int_Glob;\nchar Ch_1_Glob;\n\nstatic Rec_Pointer Ptr_Glob, Next_Ptr_Glob;\nstatic Boolean Bool_Glob;\nstatic char Ch_2_Glob;\nstatic int Arr_1_Glob[50];\nstatic int Arr_2_Glob[50][50];\n\nstatic void Proc_3(Rec_Pointer *Ptr_Ref_Par)\n \n \n \n{\n\tif (Ptr_Glob) {\n\t\t \n\t\t*Ptr_Ref_Par = Ptr_Glob->Ptr_Comp;\n\t}\n\tProc_7(10, Int_Glob, &Ptr_Glob->variant.var_1.Int_Comp);\n}  \n\n\nstatic void Proc_1(Rec_Pointer Ptr_Val_Par)\n \n \n{\n\tRec_Pointer Next_Record = Ptr_Val_Par->Ptr_Comp;\n\t\t\t\t\t\t \n\t \n\t \n\n\t*Ptr_Val_Par->Ptr_Comp = *Ptr_Glob;\n\tPtr_Val_Par->variant.var_1.Int_Comp = 5;\n\tNext_Record->variant.var_1.Int_Comp =\n\t\tPtr_Val_Par->variant.var_1.Int_Comp;\n\tNext_Record->Ptr_Comp = Ptr_Val_Par->Ptr_Comp;\n\tProc_3(&Next_Record->Ptr_Comp);\n\t \n\tif (Next_Record->Discr == Ident_1) {\n\t\t \n\t\tNext_Record->variant.var_1.Int_Comp = 6;\n\t\tProc_6(Ptr_Val_Par->variant.var_1.Enum_Comp,\n\t\t       &Next_Record->variant.var_1.Enum_Comp);\n\t\tNext_Record->Ptr_Comp = Ptr_Glob->Ptr_Comp;\n\t\tProc_7(Next_Record->variant.var_1.Int_Comp, 10,\n\t\t       &Next_Record->variant.var_1.Int_Comp);\n\t} else {\n\t\t \n\t\t*Ptr_Val_Par = *Ptr_Val_Par->Ptr_Comp;\n\t}\n}  \n\n\nstatic void Proc_2(One_Fifty *Int_Par_Ref)\n \n \n \n{\n\tOne_Fifty  Int_Loc;\n\tEnumeration   Enum_Loc;\n\n\tInt_Loc = *Int_Par_Ref + 10;\n\tdo {\n\t\t \n\t\tif (Ch_1_Glob == 'A') {\n\t\t\t \n\t\t\tInt_Loc -= 1;\n\t\t\t*Int_Par_Ref = Int_Loc - Int_Glob;\n\t\t\tEnum_Loc = Ident_1;\n\t\t}  \n\t} while (Enum_Loc != Ident_1);  \n}  \n\n\nstatic void Proc_4(void)\n \n \n{\n\tBoolean Bool_Loc;\n\n\tBool_Loc = Ch_1_Glob == 'A';\n\tBool_Glob = Bool_Loc | Bool_Glob;\n\tCh_2_Glob = 'B';\n}  \n\n\nstatic void Proc_5(void)\n \n \n{\n\tCh_1_Glob = 'A';\n\tBool_Glob = false;\n}  \n\n\nint dhry(int n)\n \n\n   \n   \n{\n\tOne_Fifty Int_1_Loc;\n\tOne_Fifty Int_2_Loc;\n\tOne_Fifty Int_3_Loc;\n\tchar Ch_Index;\n\tEnumeration Enum_Loc;\n\tStr_30 Str_1_Loc;\n\tStr_30 Str_2_Loc;\n\tint Run_Index;\n\tint Number_Of_Runs;\n\tktime_t Begin_Time, End_Time;\n\tu32 User_Time;\n\n\t \n\n\tNext_Ptr_Glob = (Rec_Pointer)kzalloc(sizeof(Rec_Type), GFP_ATOMIC);\n\tif (!Next_Ptr_Glob)\n\t\treturn -ENOMEM;\n\n\tPtr_Glob = (Rec_Pointer)kzalloc(sizeof(Rec_Type), GFP_ATOMIC);\n\tif (!Ptr_Glob) {\n\t\tkfree(Next_Ptr_Glob);\n\t\treturn -ENOMEM;\n\t}\n\n\tPtr_Glob->Ptr_Comp = Next_Ptr_Glob;\n\tPtr_Glob->Discr = Ident_1;\n\tPtr_Glob->variant.var_1.Enum_Comp = Ident_3;\n\tPtr_Glob->variant.var_1.Int_Comp = 40;\n\tstrcpy(Ptr_Glob->variant.var_1.Str_Comp,\n\t       \"DHRYSTONE PROGRAM, SOME STRING\");\n\tstrcpy(Str_1_Loc, \"DHRYSTONE PROGRAM, 1'ST STRING\");\n\n\tArr_2_Glob[8][7] = 10;\n\t \n\t \n\t \n\t \n\n\tpr_debug(\"Dhrystone Benchmark, Version 2.1 (Language: C)\\n\");\n\n\tNumber_Of_Runs = n;\n\n\tpr_debug(\"Execution starts, %d runs through Dhrystone\\n\",\n\t\t Number_Of_Runs);\n\n\t \n\t \n\t \n\n\tBegin_Time = ktime_get();\n\n\tfor (Run_Index = 1; Run_Index <= Number_Of_Runs; ++Run_Index) {\n\t\tProc_5();\n\t\tProc_4();\n\t\t \n\t\tInt_1_Loc = 2;\n\t\tInt_2_Loc = 3;\n\t\tstrcpy(Str_2_Loc, \"DHRYSTONE PROGRAM, 2'ND STRING\");\n\t\tEnum_Loc = Ident_2;\n\t\tBool_Glob = !Func_2(Str_1_Loc, Str_2_Loc);\n\t\t \n\t\twhile (Int_1_Loc < Int_2_Loc) {\n\t\t\t \n\t\t\tInt_3_Loc = 5 * Int_1_Loc - Int_2_Loc;\n\t\t\t \n\t\t\tProc_7(Int_1_Loc, Int_2_Loc, &Int_3_Loc);\n\t\t\t \n\t\t\tInt_1_Loc += 1;\n\t\t}  \n\t\t \n\t\tProc_8(Arr_1_Glob, Arr_2_Glob, Int_1_Loc, Int_3_Loc);\n\t\t \n\t\tProc_1(Ptr_Glob);\n\t\tfor (Ch_Index = 'A'; Ch_Index <= Ch_2_Glob; ++Ch_Index) {\n\t\t\t \n\t\t\tif (Enum_Loc == Func_1(Ch_Index, 'C')) {\n\t\t\t\t \n\t\t\t\tProc_6(Ident_1, &Enum_Loc);\n\t\t\t\tstrcpy(Str_2_Loc, \"DHRYSTONE PROGRAM, 3'RD STRING\");\n\t\t\t\tInt_2_Loc = Run_Index;\n\t\t\t\tInt_Glob = Run_Index;\n\t\t\t}\n\t\t}\n\t\t \n\t\tInt_2_Loc = Int_2_Loc * Int_1_Loc;\n\t\tInt_1_Loc = Int_2_Loc / Int_3_Loc;\n\t\tInt_2_Loc = 7 * (Int_2_Loc - Int_3_Loc) - Int_1_Loc;\n\t\t \n\t\tProc_2(&Int_1_Loc);\n\t\t \n\n\t}  \n\n\t \n\t \n\t \n\n\tEnd_Time = ktime_get();\n\n#define dhry_assert_int_eq(val, expected)\t\t\t\t\\\n\tif (val != expected)\t\t\t\t\t\t\\\n\t\tpr_err(\"%s: %d (FAIL, expected %d)\\n\", #val, val,\t\\\n\t\t       expected);\t\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tpr_debug(\"%s: %d (OK)\\n\", #val, val)\n\n#define dhry_assert_char_eq(val, expected)\t\t\t\t\\\n\tif (val != expected)\t\t\t\t\t\t\\\n\t\tpr_err(\"%s: %c (FAIL, expected %c)\\n\", #val, val,\t\\\n\t\t       expected);\t\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tpr_debug(\"%s: %c (OK)\\n\", #val, val)\n\n#define dhry_assert_string_eq(val, expected)\t\t\t\t\\\n\tif (strcmp(val, expected))\t\t\t\t\t\\\n\t\tpr_err(\"%s: %s (FAIL, expected %s)\\n\", #val, val,\t\\\n\t\t       expected);\t\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tpr_debug(\"%s: %s (OK)\\n\", #val, val)\n\n\tpr_debug(\"Execution ends\\n\");\n\tpr_debug(\"Final values of the variables used in the benchmark:\\n\");\n\tdhry_assert_int_eq(Int_Glob, 5);\n\tdhry_assert_int_eq(Bool_Glob, 1);\n\tdhry_assert_char_eq(Ch_1_Glob, 'A');\n\tdhry_assert_char_eq(Ch_2_Glob, 'B');\n\tdhry_assert_int_eq(Arr_1_Glob[8], 7);\n\tdhry_assert_int_eq(Arr_2_Glob[8][7], Number_Of_Runs + 10);\n\tpr_debug(\"Ptr_Comp: %px\\n\", Ptr_Glob->Ptr_Comp);\n\tdhry_assert_int_eq(Ptr_Glob->Discr, 0);\n\tdhry_assert_int_eq(Ptr_Glob->variant.var_1.Enum_Comp, 2);\n\tdhry_assert_int_eq(Ptr_Glob->variant.var_1.Int_Comp, 17);\n\tdhry_assert_string_eq(Ptr_Glob->variant.var_1.Str_Comp,\n\t\t\t      \"DHRYSTONE PROGRAM, SOME STRING\");\n\tif (Next_Ptr_Glob->Ptr_Comp != Ptr_Glob->Ptr_Comp)\n\t\tpr_err(\"Next_Ptr_Glob->Ptr_Comp: %px (expected %px)\\n\",\n\t\t       Next_Ptr_Glob->Ptr_Comp, Ptr_Glob->Ptr_Comp);\n\telse\n\t\tpr_debug(\"Next_Ptr_Glob->Ptr_Comp: %px\\n\",\n\t\t\t Next_Ptr_Glob->Ptr_Comp);\n\tdhry_assert_int_eq(Next_Ptr_Glob->Discr, 0);\n\tdhry_assert_int_eq(Next_Ptr_Glob->variant.var_1.Enum_Comp, 1);\n\tdhry_assert_int_eq(Next_Ptr_Glob->variant.var_1.Int_Comp, 18);\n\tdhry_assert_string_eq(Next_Ptr_Glob->variant.var_1.Str_Comp,\n\t\t\t      \"DHRYSTONE PROGRAM, SOME STRING\");\n\tdhry_assert_int_eq(Int_1_Loc, 5);\n\tdhry_assert_int_eq(Int_2_Loc, 13);\n\tdhry_assert_int_eq(Int_3_Loc, 7);\n\tdhry_assert_int_eq(Enum_Loc, 1);\n\tdhry_assert_string_eq(Str_1_Loc, \"DHRYSTONE PROGRAM, 1'ST STRING\");\n\tdhry_assert_string_eq(Str_2_Loc, \"DHRYSTONE PROGRAM, 2'ND STRING\");\n\n\tUser_Time = ktime_to_ms(ktime_sub(End_Time, Begin_Time));\n\n\tkfree(Ptr_Glob);\n\tkfree(Next_Ptr_Glob);\n\n\t \n\tif (User_Time < 2 * MSEC_PER_SEC)\n\t\treturn -EAGAIN;\n\n\treturn div_u64(mul_u32_u32(MSEC_PER_SEC, Number_Of_Runs), User_Time);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}