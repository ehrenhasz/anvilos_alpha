{
  "module_name": "rational-test.c",
  "hash_id": "1bd14455e63aeec92e5395303881b84947ead5decb2a52afe7d688a2250904f9",
  "original_prompt": "Ingested from linux-6.6.14/lib/math/rational-test.c",
  "human_readable_source": "\n\n#include <kunit/test.h>\n\n#include <linux/rational.h>\n\nstruct rational_test_param {\n\tunsigned long num, den;\n\tunsigned long max_num, max_den;\n\tunsigned long exp_num, exp_den;\n\n\tconst char *name;\n};\n\nstatic const struct rational_test_param test_parameters[] = {\n\t{ 1230,\t10,\t100, 20,\t100, 1,    \"Exceeds bounds, semi-convergent term > 1/2 last term\" },\n\t{ 34567,100, \t120, 20,\t120, 1,    \"Exceeds bounds, semi-convergent term < 1/2 last term\" },\n\t{ 1, 30,\t100, 10,\t0, 1,\t   \"Closest to zero\" },\n\t{ 1, 19,\t100, 10,\t1, 10,     \"Closest to smallest non-zero\" },\n\t{ 27,32,\t16, 16,\t\t11, 13,    \"Use convergent\" },\n\t{ 1155, 7735,\t255, 255,\t33, 221,   \"Exact answer\" },\n\t{ 87, 32,\t70, 32,\t\t68, 25,    \"Semiconvergent, numerator limit\" },\n\t{ 14533, 4626,\t15000, 2400,\t7433, 2366, \"Semiconvergent, denominator limit\" },\n};\n\nstatic void get_desc(const struct rational_test_param *param, char *desc)\n{\n\tstrscpy(desc, param->name, KUNIT_PARAM_DESC_SIZE);\n}\n\n \nKUNIT_ARRAY_PARAM(rational, test_parameters, get_desc);\n\nstatic void rational_test(struct kunit *test)\n{\n\tconst struct rational_test_param *param = (const struct rational_test_param *)test->param_value;\n\tunsigned long n = 0, d = 0;\n\n\trational_best_approximation(param->num, param->den, param->max_num, param->max_den, &n, &d);\n\tKUNIT_EXPECT_EQ(test, n, param->exp_num);\n\tKUNIT_EXPECT_EQ(test, d, param->exp_den);\n}\n\nstatic struct kunit_case rational_test_cases[] = {\n\tKUNIT_CASE_PARAM(rational_test, rational_gen_params),\n\t{}\n};\n\nstatic struct kunit_suite rational_test_suite = {\n\t.name = \"rational\",\n\t.test_cases = rational_test_cases,\n};\n\nkunit_test_suites(&rational_test_suite);\n\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}