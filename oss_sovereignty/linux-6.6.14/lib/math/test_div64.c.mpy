{
  "module_name": "test_div64.c",
  "hash_id": "5d1f59e44a445230dc6c47205bc80969c84f7eaf0600181f1a0a0c9fd44862a6",
  "original_prompt": "Ingested from linux-6.6.14/lib/math/test_div64.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n#include <linux/init.h>\n#include <linux/ktime.h>\n#include <linux/module.h>\n#include <linux/printk.h>\n#include <linux/time64.h>\n#include <linux/types.h>\n\n#include <asm/div64.h>\n\n#define TEST_DIV64_N_ITER 1024\n\nstatic const u64 test_div64_dividends[] = {\n\t0x00000000ab275080,\n\t0x0000000fe73c1959,\n\t0x000000e54c0a74b1,\n\t0x00000d4398ff1ef9,\n\t0x0000a18c2ee1c097,\n\t0x00079fb80b072e4a,\n\t0x0072db27380dd689,\n\t0x0842f488162e2284,\n\t0xf66745411d8ab063,\n};\n#define SIZE_DIV64_DIVIDENDS ARRAY_SIZE(test_div64_dividends)\n\n#define TEST_DIV64_DIVISOR_0 0x00000009\n#define TEST_DIV64_DIVISOR_1 0x0000007c\n#define TEST_DIV64_DIVISOR_2 0x00000204\n#define TEST_DIV64_DIVISOR_3 0x0000cb5b\n#define TEST_DIV64_DIVISOR_4 0x00010000\n#define TEST_DIV64_DIVISOR_5 0x0008a880\n#define TEST_DIV64_DIVISOR_6 0x003fd3ae\n#define TEST_DIV64_DIVISOR_7 0x0b658fac\n#define TEST_DIV64_DIVISOR_8 0xdc08b349\n\nstatic const u32 test_div64_divisors[] = {\n\tTEST_DIV64_DIVISOR_0,\n\tTEST_DIV64_DIVISOR_1,\n\tTEST_DIV64_DIVISOR_2,\n\tTEST_DIV64_DIVISOR_3,\n\tTEST_DIV64_DIVISOR_4,\n\tTEST_DIV64_DIVISOR_5,\n\tTEST_DIV64_DIVISOR_6,\n\tTEST_DIV64_DIVISOR_7,\n\tTEST_DIV64_DIVISOR_8,\n};\n#define SIZE_DIV64_DIVISORS ARRAY_SIZE(test_div64_divisors)\n\nstatic const struct {\n\tu64 quotient;\n\tu32 remainder;\n} test_div64_results[SIZE_DIV64_DIVISORS][SIZE_DIV64_DIVIDENDS] = {\n\t{\n\t\t{ 0x0000000013045e47, 0x00000001 },\n\t\t{ 0x000000000161596c, 0x00000030 },\n\t\t{ 0x000000000054e9d4, 0x00000130 },\n\t\t{ 0x000000000000d776, 0x0000278e },\n\t\t{ 0x000000000000ab27, 0x00005080 },\n\t\t{ 0x00000000000013c4, 0x0004ce80 },\n\t\t{ 0x00000000000002ae, 0x001e143c },\n\t\t{ 0x000000000000000f, 0x0033e56c },\n\t\t{ 0x0000000000000000, 0xab275080 },\n\t}, {\n\t\t{ 0x00000001c45c02d1, 0x00000000 },\n\t\t{ 0x0000000020d5213c, 0x00000049 },\n\t\t{ 0x0000000007e3d65f, 0x000001dd },\n\t\t{ 0x0000000000140531, 0x000065ee },\n\t\t{ 0x00000000000fe73c, 0x00001959 },\n\t\t{ 0x000000000001d637, 0x0004e5d9 },\n\t\t{ 0x0000000000003fc9, 0x000713bb },\n\t\t{ 0x0000000000000165, 0x029abe7d },\n\t\t{ 0x0000000000000012, 0x6e9f7e37 },\n\t}, {\n\t\t{ 0x000000197a3a0cf7, 0x00000002 },\n\t\t{ 0x00000001d9632e5c, 0x00000021 },\n\t\t{ 0x0000000071c28039, 0x000001cd },\n\t\t{ 0x000000000120a844, 0x0000b885 },\n\t\t{ 0x0000000000e54c0a, 0x000074b1 },\n\t\t{ 0x00000000001a7bb3, 0x00072331 },\n\t\t{ 0x00000000000397ad, 0x0002c61b },\n\t\t{ 0x000000000000141e, 0x06ea2e89 },\n\t\t{ 0x000000000000010a, 0xab002ad7 },\n\t}, {\n\t\t{ 0x0000017949e37538, 0x00000001 },\n\t\t{ 0x0000001b62441f37, 0x00000055 },\n\t\t{ 0x0000000694a3391d, 0x00000085 },\n\t\t{ 0x0000000010b2a5d2, 0x0000a753 },\n\t\t{ 0x000000000d4398ff, 0x00001ef9 },\n\t\t{ 0x0000000001882ec6, 0x0005cbf9 },\n\t\t{ 0x000000000035333b, 0x0017abdf },\n\t\t{ 0x00000000000129f1, 0x0ab4520d },\n\t\t{ 0x0000000000000f6e, 0x8ac0ce9b },\n\t}, {\n\t\t{ 0x000011f321a74e49, 0x00000006 },\n\t\t{ 0x0000014d8481d211, 0x0000005b },\n\t\t{ 0x0000005025cbd92d, 0x000001e3 },\n\t\t{ 0x00000000cb5e71e3, 0x000043e6 },\n\t\t{ 0x00000000a18c2ee1, 0x0000c097 },\n\t\t{ 0x0000000012a88828, 0x00036c97 },\n\t\t{ 0x000000000287f16f, 0x002c2a25 },\n\t\t{ 0x00000000000e2cc7, 0x02d581e3 },\n\t\t{ 0x000000000000bbf4, 0x1ba08c03 },\n\t}, {\n\t\t{ 0x0000d8db8f72935d, 0x00000005 },\n\t\t{ 0x00000fbd5aed7a2e, 0x00000002 },\n\t\t{ 0x000003c84b6ea64a, 0x00000122 },\n\t\t{ 0x0000000998fa8829, 0x000044b7 },\n\t\t{ 0x000000079fb80b07, 0x00002e4a },\n\t\t{ 0x00000000e16b20fa, 0x0002a14a },\n\t\t{ 0x000000001e940d22, 0x00353b2e },\n\t\t{ 0x0000000000ab40ac, 0x06fba6ba },\n\t\t{ 0x000000000008debd, 0x72d98365 },\n\t}, {\n\t\t{ 0x000cc3045b8fc281, 0x00000000 },\n\t\t{ 0x0000ed1f48b5c9fc, 0x00000079 },\n\t\t{ 0x000038fb9c63406a, 0x000000e1 },\n\t\t{ 0x000000909705b825, 0x00000a62 },\n\t\t{ 0x00000072db27380d, 0x0000d689 },\n\t\t{ 0x0000000d43fce827, 0x00082b09 },\n\t\t{ 0x00000001ccaba11a, 0x0037e8dd },\n\t\t{ 0x000000000a13f729, 0x0566dffd },\n\t\t{ 0x000000000085a14b, 0x23d36726 },\n\t}, {\n\t\t{ 0x00eafeb9c993592b, 0x00000001 },\n\t\t{ 0x00110e5befa9a991, 0x00000048 },\n\t\t{ 0x00041947b4a1d36a, 0x000000dc },\n\t\t{ 0x00000a6679327311, 0x0000c079 },\n\t\t{ 0x00000842f488162e, 0x00002284 },\n\t\t{ 0x000000f4459740fc, 0x00084484 },\n\t\t{ 0x0000002122c47bf9, 0x002ca446 },\n\t\t{ 0x00000000b9936290, 0x004979c4 },\n\t\t{ 0x00000000099ca89d, 0x9db446bf },\n\t}, {\n\t\t{ 0x1b60cece589da1d2, 0x00000001 },\n\t\t{ 0x01fcb42be1453f5b, 0x0000004f },\n\t\t{ 0x007a3f2457df0749, 0x0000013f },\n\t\t{ 0x0001363130e3ec7b, 0x000017aa },\n\t\t{ 0x0000f66745411d8a, 0x0000b063 },\n\t\t{ 0x00001c757dfab350, 0x00048863 },\n\t\t{ 0x000003dc4979c652, 0x00224ea7 },\n\t\t{ 0x000000159edc3144, 0x06409ab3 },\n\t\t{ 0x000000011eadfee3, 0xa99c48a8 },\n\t},\n};\n\nstatic inline bool test_div64_verify(u64 quotient, u32 remainder, int i, int j)\n{\n\treturn (quotient == test_div64_results[i][j].quotient &&\n\t\tremainder == test_div64_results[i][j].remainder);\n}\n\n \n#define test_div64_one(dividend, divisor, i, j) ({\t\t\t\\\n\tbool result = true;\t\t\t\t\t\t\\\n\tu64 quotient;\t\t\t\t\t\t\t\\\n\tu32 remainder;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tquotient = dividend;\t\t\t\t\t\t\\\n\tremainder = do_div(quotient, divisor);\t\t\t\t\\\n\tif (!test_div64_verify(quotient, remainder, i, j)) {\t\t\\\n\t\tpr_err(\"ERROR: %016llx / %08x => %016llx,%08x\\n\",\t\\\n\t\t       dividend, divisor, quotient, remainder);\t\t\\\n\t\tpr_err(\"ERROR: expected value              => %016llx,%08x\\n\",\\\n\t\t       test_div64_results[i][j].quotient,\t\t\\\n\t\t       test_div64_results[i][j].remainder);\t\t\\\n\t\tresult = false;\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tresult;\t\t\t\t\t\t\t\t\\\n})\n\n \nstatic bool __init test_div64(void)\n{\n\tu64 dividend;\n\tint i, j;\n\n\tfor (i = 0; i < SIZE_DIV64_DIVIDENDS; i++) {\n\t\tdividend = test_div64_dividends[i];\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_0, i, 0))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_1, i, 1))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_2, i, 2))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_3, i, 3))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_4, i, 4))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_5, i, 5))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_6, i, 6))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_7, i, 7))\n\t\t\treturn false;\n\t\tif (!test_div64_one(dividend, TEST_DIV64_DIVISOR_8, i, 8))\n\t\t\treturn false;\n\t\tfor (j = 0; j < SIZE_DIV64_DIVISORS; j++) {\n\t\t\tif (!test_div64_one(dividend, test_div64_divisors[j],\n\t\t\t\t\t    i, j))\n\t\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nstatic int __init test_div64_init(void)\n{\n\tstruct timespec64 ts, ts0, ts1;\n\tint i;\n\n\tpr_info(\"Starting 64bit/32bit division and modulo test\\n\");\n\tktime_get_ts64(&ts0);\n\n\tfor (i = 0; i < TEST_DIV64_N_ITER; i++)\n\t\tif (!test_div64())\n\t\t\tbreak;\n\n\tktime_get_ts64(&ts1);\n\tts = timespec64_sub(ts1, ts0);\n\tpr_info(\"Completed 64bit/32bit division and modulo test, \"\n\t\t\"%llu.%09lus elapsed\\n\", ts.tv_sec, ts.tv_nsec);\n\n\treturn 0;\n}\n\nstatic void __exit test_div64_exit(void)\n{\n}\n\nmodule_init(test_div64_init);\nmodule_exit(test_div64_exit);\n\nMODULE_AUTHOR(\"Maciej W. Rozycki <macro@orcam.me.uk>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_DESCRIPTION(\"64bit/32bit division and modulo test module\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}