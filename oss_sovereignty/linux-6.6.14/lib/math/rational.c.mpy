{
  "module_name": "rational.c",
  "hash_id": "590b6122d33b00fb1aa143d546d2444e15c74faf858fc21ecbaa5dfa81692a82",
  "original_prompt": "Ingested from linux-6.6.14/lib/math/rational.c",
  "human_readable_source": "\n \n\n#include <linux/rational.h>\n#include <linux/compiler.h>\n#include <linux/export.h>\n#include <linux/minmax.h>\n#include <linux/limits.h>\n#include <linux/module.h>\n\n \n\nvoid rational_best_approximation(\n\tunsigned long given_numerator, unsigned long given_denominator,\n\tunsigned long max_numerator, unsigned long max_denominator,\n\tunsigned long *best_numerator, unsigned long *best_denominator)\n{\n\t \n\tunsigned long n, d, n0, d0, n1, d1, n2, d2;\n\tn = given_numerator;\n\td = given_denominator;\n\tn0 = d1 = 0;\n\tn1 = d0 = 1;\n\n\tfor (;;) {\n\t\tunsigned long dp, a;\n\n\t\tif (d == 0)\n\t\t\tbreak;\n\t\t \n\t\tdp = d;\n\t\ta = n / d;\n\t\td = n % d;\n\t\tn = dp;\n\n\t\t \n\t\tn2 = n0 + a * n1;\n\t\td2 = d0 + a * d1;\n\n\t\t \n\t\tif ((n2 > max_numerator) || (d2 > max_denominator)) {\n\t\t\tunsigned long t = ULONG_MAX;\n\n\t\t\tif (d1)\n\t\t\t\tt = (max_denominator - d0) / d1;\n\t\t\tif (n1)\n\t\t\t\tt = min(t, (max_numerator - n0) / n1);\n\n\t\t\t \n\t\t\tif (!d1 || 2u * t > a || (2u * t == a && d0 * dp > d1 * d)) {\n\t\t\t\tn1 = n0 + t * n1;\n\t\t\t\td1 = d0 + t * d1;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tn0 = n1;\n\t\tn1 = n2;\n\t\td0 = d1;\n\t\td1 = d2;\n\t}\n\t*best_numerator = n1;\n\t*best_denominator = d1;\n}\n\nEXPORT_SYMBOL(rational_best_approximation);\n\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}