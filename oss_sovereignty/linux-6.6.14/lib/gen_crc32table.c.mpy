{
  "module_name": "gen_crc32table.c",
  "hash_id": "1eb0c6741aeecc5b7aa3debbe086ff723b089cbac82fedb5300e05e3fa2cad67",
  "original_prompt": "Ingested from linux-6.6.14/lib/gen_crc32table.c",
  "human_readable_source": "\n#include <stdio.h>\n#include \"../include/linux/crc32poly.h\"\n#include \"../include/generated/autoconf.h\"\n#include \"crc32defs.h\"\n#include <inttypes.h>\n\n#define ENTRIES_PER_LINE 4\n\n#if CRC_LE_BITS > 8\n# define LE_TABLE_ROWS (CRC_LE_BITS/8)\n# define LE_TABLE_SIZE 256\n#else\n# define LE_TABLE_ROWS 1\n# define LE_TABLE_SIZE (1 << CRC_LE_BITS)\n#endif\n\n#if CRC_BE_BITS > 8\n# define BE_TABLE_ROWS (CRC_BE_BITS/8)\n# define BE_TABLE_SIZE 256\n#else\n# define BE_TABLE_ROWS 1\n# define BE_TABLE_SIZE (1 << CRC_BE_BITS)\n#endif\n\nstatic uint32_t crc32table_le[LE_TABLE_ROWS][256];\nstatic uint32_t crc32table_be[BE_TABLE_ROWS][256];\nstatic uint32_t crc32ctable_le[LE_TABLE_ROWS][256];\n\n \nstatic void crc32init_le_generic(const uint32_t polynomial,\n\t\t\t\t uint32_t (*tab)[256])\n{\n\tunsigned i, j;\n\tuint32_t crc = 1;\n\n\ttab[0][0] = 0;\n\n\tfor (i = LE_TABLE_SIZE >> 1; i; i >>= 1) {\n\t\tcrc = (crc >> 1) ^ ((crc & 1) ? polynomial : 0);\n\t\tfor (j = 0; j < LE_TABLE_SIZE; j += 2 * i)\n\t\t\ttab[0][i + j] = crc ^ tab[0][j];\n\t}\n\tfor (i = 0; i < LE_TABLE_SIZE; i++) {\n\t\tcrc = tab[0][i];\n\t\tfor (j = 1; j < LE_TABLE_ROWS; j++) {\n\t\t\tcrc = tab[0][crc & 0xff] ^ (crc >> 8);\n\t\t\ttab[j][i] = crc;\n\t\t}\n\t}\n}\n\nstatic void crc32init_le(void)\n{\n\tcrc32init_le_generic(CRC32_POLY_LE, crc32table_le);\n}\n\nstatic void crc32cinit_le(void)\n{\n\tcrc32init_le_generic(CRC32C_POLY_LE, crc32ctable_le);\n}\n\n \nstatic void crc32init_be(void)\n{\n\tunsigned i, j;\n\tuint32_t crc = 0x80000000;\n\n\tcrc32table_be[0][0] = 0;\n\n\tfor (i = 1; i < BE_TABLE_SIZE; i <<= 1) {\n\t\tcrc = (crc << 1) ^ ((crc & 0x80000000) ? CRC32_POLY_BE : 0);\n\t\tfor (j = 0; j < i; j++)\n\t\t\tcrc32table_be[0][i + j] = crc ^ crc32table_be[0][j];\n\t}\n\tfor (i = 0; i < BE_TABLE_SIZE; i++) {\n\t\tcrc = crc32table_be[0][i];\n\t\tfor (j = 1; j < BE_TABLE_ROWS; j++) {\n\t\t\tcrc = crc32table_be[0][(crc >> 24) & 0xff] ^ (crc << 8);\n\t\t\tcrc32table_be[j][i] = crc;\n\t\t}\n\t}\n}\n\nstatic void output_table(uint32_t (*table)[256], int rows, int len, char *trans)\n{\n\tint i, j;\n\n\tfor (j = 0 ; j < rows; j++) {\n\t\tprintf(\"{\");\n\t\tfor (i = 0; i < len - 1; i++) {\n\t\t\tif (i % ENTRIES_PER_LINE == 0)\n\t\t\t\tprintf(\"\\n\");\n\t\t\tprintf(\"%s(0x%8.8xL), \", trans, table[j][i]);\n\t\t}\n\t\tprintf(\"%s(0x%8.8xL)},\\n\", trans, table[j][len - 1]);\n\t}\n}\n\nint main(int argc, char** argv)\n{\n\tprintf(\"/* this file is generated - do not edit */\\n\\n\");\n\n\tif (CRC_LE_BITS > 1) {\n\t\tcrc32init_le();\n\t\tprintf(\"static const u32 ____cacheline_aligned \"\n\t\t       \"crc32table_le[%d][%d] = {\",\n\t\t       LE_TABLE_ROWS, LE_TABLE_SIZE);\n\t\toutput_table(crc32table_le, LE_TABLE_ROWS,\n\t\t\t     LE_TABLE_SIZE, \"tole\");\n\t\tprintf(\"};\\n\");\n\t}\n\n\tif (CRC_BE_BITS > 1) {\n\t\tcrc32init_be();\n\t\tprintf(\"static const u32 ____cacheline_aligned \"\n\t\t       \"crc32table_be[%d][%d] = {\",\n\t\t       BE_TABLE_ROWS, BE_TABLE_SIZE);\n\t\toutput_table(crc32table_be, LE_TABLE_ROWS,\n\t\t\t     BE_TABLE_SIZE, \"tobe\");\n\t\tprintf(\"};\\n\");\n\t}\n\tif (CRC_LE_BITS > 1) {\n\t\tcrc32cinit_le();\n\t\tprintf(\"static const u32 ____cacheline_aligned \"\n\t\t       \"crc32ctable_le[%d][%d] = {\",\n\t\t       LE_TABLE_ROWS, LE_TABLE_SIZE);\n\t\toutput_table(crc32ctable_le, LE_TABLE_ROWS,\n\t\t\t     LE_TABLE_SIZE, \"tole\");\n\t\tprintf(\"};\\n\");\n\t}\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}