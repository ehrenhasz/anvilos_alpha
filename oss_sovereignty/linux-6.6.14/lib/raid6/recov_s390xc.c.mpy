{
  "module_name": "recov_s390xc.c",
  "hash_id": "04bfbdbed0a2c77cbb4d506ce16f397ed4ab72bf545a466a996e34af3085750a",
  "original_prompt": "Ingested from linux-6.6.14/lib/raid6/recov_s390xc.c",
  "human_readable_source": "\n \n\n#include <linux/export.h>\n#include <linux/raid/pq.h>\n\nstatic inline void xor_block(u8 *p1, u8 *p2)\n{\n\ttypedef struct { u8 _[256]; } addrtype;\n\n\tasm volatile(\n\t\t\"\txc\t0(256,%[p1]),0(%[p2])\\n\"\n\t\t: \"+m\" (*(addrtype *) p1) : \"m\" (*(addrtype *) p2),\n\t\t  [p1] \"a\" (p1), [p2] \"a\" (p2) : \"cc\");\n}\n\n \nstatic void raid6_2data_recov_s390xc(int disks, size_t bytes, int faila,\n\t\tint failb, void **ptrs)\n{\n\tu8 *p, *q, *dp, *dq;\n\tconst u8 *pbmul;\t \n\tconst u8 *qmul;\t\t \n\tint i;\n\n\tp = (u8 *)ptrs[disks-2];\n\tq = (u8 *)ptrs[disks-1];\n\n\t \n\tdp = (u8 *)ptrs[faila];\n\tptrs[faila] = (void *)raid6_empty_zero_page;\n\tptrs[disks-2] = dp;\n\tdq = (u8 *)ptrs[failb];\n\tptrs[failb] = (void *)raid6_empty_zero_page;\n\tptrs[disks-1] = dq;\n\n\traid6_call.gen_syndrome(disks, bytes, ptrs);\n\n\t \n\tptrs[faila]   = dp;\n\tptrs[failb]   = dq;\n\tptrs[disks-2] = p;\n\tptrs[disks-1] = q;\n\n\t \n\tpbmul = raid6_gfmul[raid6_gfexi[failb-faila]];\n\tqmul  = raid6_gfmul[raid6_gfinv[raid6_gfexp[faila]^raid6_gfexp[failb]]];\n\n\t \n\twhile (bytes) {\n\t\txor_block(dp, p);\n\t\txor_block(dq, q);\n\t\tfor (i = 0; i < 256; i++)\n\t\t\tdq[i] = pbmul[dp[i]] ^ qmul[dq[i]];\n\t\txor_block(dp, dq);\n\t\tp += 256;\n\t\tq += 256;\n\t\tdp += 256;\n\t\tdq += 256;\n\t\tbytes -= 256;\n\t}\n}\n\n \nstatic void raid6_datap_recov_s390xc(int disks, size_t bytes, int faila,\n\t\tvoid **ptrs)\n{\n\tu8 *p, *q, *dq;\n\tconst u8 *qmul;\t\t \n\tint i;\n\n\tp = (u8 *)ptrs[disks-2];\n\tq = (u8 *)ptrs[disks-1];\n\n\t \n\tdq = (u8 *)ptrs[faila];\n\tptrs[faila] = (void *)raid6_empty_zero_page;\n\tptrs[disks-1] = dq;\n\n\traid6_call.gen_syndrome(disks, bytes, ptrs);\n\n\t \n\tptrs[faila]   = dq;\n\tptrs[disks-1] = q;\n\n\t \n\tqmul  = raid6_gfmul[raid6_gfinv[raid6_gfexp[faila]]];\n\n\t \n\twhile (bytes) {\n\t\txor_block(dq, q);\n\t\tfor (i = 0; i < 256; i++)\n\t\t\tdq[i] = qmul[dq[i]];\n\t\txor_block(p, dq);\n\t\tp += 256;\n\t\tq += 256;\n\t\tdq += 256;\n\t\tbytes -= 256;\n\t}\n}\n\n\nconst struct raid6_recov_calls raid6_recov_s390xc = {\n\t.data2 = raid6_2data_recov_s390xc,\n\t.datap = raid6_datap_recov_s390xc,\n\t.valid = NULL,\n\t.name = \"s390xc\",\n\t.priority = 1,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}