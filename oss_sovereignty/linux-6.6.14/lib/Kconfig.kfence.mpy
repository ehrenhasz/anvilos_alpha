{
  "module_name": "Kconfig.kfence",
  "hash_id": "9a8526d2759761c6ca4ee8714383ece4135de69dbc152afaa016763ab1c1d267",
  "original_prompt": "Ingested from linux-6.6.14/lib/Kconfig.kfence",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\n\nconfig HAVE_ARCH_KFENCE\n\tbool\n\nmenuconfig KFENCE\n\tbool \"KFENCE: low-overhead sampling-based memory safety error detector\"\n\tdepends on HAVE_ARCH_KFENCE && (SLAB || SLUB)\n\tselect STACKTRACE\n\tselect IRQ_WORK\n\thelp\n\t  KFENCE is a low-overhead sampling-based detector of heap out-of-bounds\n\t  access, use-after-free, and invalid-free errors. KFENCE is designed\n\t  to have negligible cost to permit enabling it in production\n\t  environments.\n\n\t  See <file:Documentation/dev-tools/kfence.rst> for more details.\n\n\t  Note that, KFENCE is not a substitute for explicit testing with tools\n\t  such as KASAN. KFENCE can detect a subset of bugs that KASAN can\n\t  detect, albeit at very different performance profiles. If you can\n\t  afford to use KASAN, continue using KASAN, for example in test\n\t  environments. If your kernel targets production use, and cannot\n\t  enable KASAN due to its cost, consider using KFENCE.\n\nif KFENCE\n\nconfig KFENCE_SAMPLE_INTERVAL\n\tint \"Default sample interval in milliseconds\"\n\tdefault 100\n\thelp\n\t  The KFENCE sample interval determines the frequency with which heap\n\t  allocations will be guarded by KFENCE. May be overridden via boot\n\t  parameter \"kfence.sample_interval\".\n\n\t  Set this to 0 to disable KFENCE by default, in which case only\n\t  setting \"kfence.sample_interval\" to a non-zero value enables KFENCE.\n\nconfig KFENCE_NUM_OBJECTS\n\tint \"Number of guarded objects available\"\n\trange 1 65535\n\tdefault 255\n\thelp\n\t  The number of guarded objects available. For each KFENCE object, 2\n\t  pages are required; with one containing the object and two adjacent\n\t  ones used as guard pages.\n\nconfig KFENCE_DEFERRABLE\n\tbool \"Use a deferrable timer to trigger allocations\"\n\thelp\n\t  Use a deferrable timer to trigger allocations. This avoids forcing\n\t  CPU wake-ups if the system is idle, at the risk of a less predictable\n\t  sample interval.\n\n\t  Warning: The KUnit test suite fails with this option enabled - due to\n\t  the unpredictability of the sample interval!\n\n\t  Say N if you are unsure.\n\nconfig KFENCE_STATIC_KEYS\n\tbool \"Use static keys to set up allocations\" if EXPERT\n\tdepends on JUMP_LABEL\n\thelp\n\t  Use static keys (static branches) to set up KFENCE allocations. This\n\t  option is only recommended when using very large sample intervals, or\n\t  performance has carefully been evaluated with this option.\n\n\t  Using static keys comes with trade-offs that need to be carefully\n\t  evaluated given target workloads and system architectures. Notably,\n\t  enabling and disabling static keys invoke IPI broadcasts, the latency\n\t  and impact of which is much harder to predict than a dynamic branch.\n\n\t  Say N if you are unsure.\n\nconfig KFENCE_STRESS_TEST_FAULTS\n\tint \"Stress testing of fault handling and error reporting\" if EXPERT\n\tdefault 0\n\thelp\n\t  The inverse probability with which to randomly protect KFENCE object\n\t  pages, resulting in spurious use-after-frees. The main purpose of\n\t  this option is to stress test KFENCE with concurrent error reports\n\t  and allocations/frees. A value of 0 disables stress testing logic.\n\n\t  Only for KFENCE testing; set to 0 if you are not a KFENCE developer.\n\nconfig KFENCE_KUNIT_TEST\n\ttristate \"KFENCE integration test suite\" if !KUNIT_ALL_TESTS\n\tdefault KUNIT_ALL_TESTS\n\tdepends on TRACEPOINTS && KUNIT\n\thelp\n\t  Test suite for KFENCE, testing various error detection scenarios with\n\t  various allocation types, and checking that reports are correctly\n\t  output to console.\n\n\t  Say Y here if you want the test to be built into the kernel and run\n\t  during boot; say M if you want the test to build as a module; say N\n\t  if you are unsure.\n\nendif # KFENCE\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}