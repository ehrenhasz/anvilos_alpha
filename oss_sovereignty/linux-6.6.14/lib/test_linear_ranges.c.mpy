{
  "module_name": "test_linear_ranges.c",
  "hash_id": "09c63dc67ac9ae10e46ab0c4ba8bf72dec25f88160eab7bbaaffecfb70f0e5fa",
  "original_prompt": "Ingested from linux-6.6.14/lib/test_linear_ranges.c",
  "human_readable_source": "\n \n#include <kunit/test.h>\n\n#include <linux/linear_range.h>\n\n \n\n \n\n#define RANGE1_MIN 10\n#define RANGE1_MIN_SEL 2\n#define RANGE1_STEP 10\n\n \nstatic const unsigned int range1_sels[] = { RANGE1_MIN_SEL, RANGE1_MIN_SEL + 1,\n\t\t\t\t\t    RANGE1_MIN_SEL + 2,\n\t\t\t\t\t    RANGE1_MIN_SEL + 3,\n\t\t\t\t\t    RANGE1_MIN_SEL + 4 };\n \nstatic const unsigned int range1_vals[] = { RANGE1_MIN, RANGE1_MIN +\n\t\t\t\t\t    RANGE1_STEP,\n\t\t\t\t\t    RANGE1_MIN + RANGE1_STEP * 2,\n\t\t\t\t\t    RANGE1_MIN + RANGE1_STEP * 3,\n\t\t\t\t\t    RANGE1_MIN + RANGE1_STEP * 4 };\n\n#define RANGE2_MIN 100\n#define RANGE2_MIN_SEL 7\n#define RANGE2_STEP 50\n\n \nstatic const unsigned int range2_sels[] = { RANGE2_MIN_SEL, RANGE2_MIN_SEL + 1,\n\t\t\t\t\t    RANGE2_MIN_SEL + 2,\n\t\t\t\t\t    RANGE2_MIN_SEL + 3 };\n \nstatic const unsigned int range2_vals[] = { RANGE2_MIN, RANGE2_MIN +\n\t\t\t\t\t    RANGE2_STEP,\n\t\t\t\t\t    RANGE2_MIN + RANGE2_STEP * 2,\n\t\t\t\t\t    RANGE2_MIN + RANGE2_STEP * 3 };\n\n#define RANGE1_NUM_VALS (ARRAY_SIZE(range1_vals))\n#define RANGE2_NUM_VALS (ARRAY_SIZE(range2_vals))\n#define RANGE_NUM_VALS (RANGE1_NUM_VALS + RANGE2_NUM_VALS)\n\n#define RANGE1_MAX_SEL (RANGE1_MIN_SEL + RANGE1_NUM_VALS - 1)\n#define RANGE1_MAX_VAL (range1_vals[RANGE1_NUM_VALS - 1])\n\n#define RANGE2_MAX_SEL (RANGE2_MIN_SEL + RANGE2_NUM_VALS - 1)\n#define RANGE2_MAX_VAL (range2_vals[RANGE2_NUM_VALS - 1])\n\n#define SMALLEST_SEL RANGE1_MIN_SEL\n#define SMALLEST_VAL RANGE1_MIN\n\nstatic struct linear_range testr[] = {\n\tLINEAR_RANGE(RANGE1_MIN, RANGE1_MIN_SEL, RANGE1_MAX_SEL, RANGE1_STEP),\n\tLINEAR_RANGE(RANGE2_MIN, RANGE2_MIN_SEL, RANGE2_MAX_SEL, RANGE2_STEP),\n};\n\nstatic void range_test_get_value(struct kunit *test)\n{\n\tint ret, i;\n\tunsigned int sel, val;\n\n\tfor (i = 0; i < RANGE1_NUM_VALS; i++) {\n\t\tsel = range1_sels[i];\n\t\tret = linear_range_get_value_array(&testr[0], 2, sel, &val);\n\t\tKUNIT_EXPECT_EQ(test, 0, ret);\n\t\tKUNIT_EXPECT_EQ(test, val, range1_vals[i]);\n\t}\n\tfor (i = 0; i < RANGE2_NUM_VALS; i++) {\n\t\tsel = range2_sels[i];\n\t\tret = linear_range_get_value_array(&testr[0], 2, sel, &val);\n\t\tKUNIT_EXPECT_EQ(test, 0, ret);\n\t\tKUNIT_EXPECT_EQ(test, val, range2_vals[i]);\n\t}\n\tret = linear_range_get_value_array(&testr[0], 2, sel + 1, &val);\n\tKUNIT_EXPECT_NE(test, 0, ret);\n}\n\nstatic void range_test_get_selector_high(struct kunit *test)\n{\n\tint ret, i;\n\tunsigned int sel;\n\tbool found;\n\n\tfor (i = 0; i < RANGE1_NUM_VALS; i++) {\n\t\tret = linear_range_get_selector_high(&testr[0], range1_vals[i],\n\t\t\t\t\t\t     &sel, &found);\n\t\tKUNIT_EXPECT_EQ(test, 0, ret);\n\t\tKUNIT_EXPECT_EQ(test, sel, range1_sels[i]);\n\t\tKUNIT_EXPECT_TRUE(test, found);\n\t}\n\n\tret = linear_range_get_selector_high(&testr[0], RANGE1_MAX_VAL + 1,\n\t\t\t\t\t     &sel, &found);\n\tKUNIT_EXPECT_LE(test, ret, 0);\n\n\tret = linear_range_get_selector_high(&testr[0], RANGE1_MIN - 1,\n\t\t\t\t\t     &sel, &found);\n\tKUNIT_EXPECT_EQ(test, 0, ret);\n\tKUNIT_EXPECT_FALSE(test, found);\n\tKUNIT_EXPECT_EQ(test, sel, range1_sels[0]);\n}\n\nstatic void range_test_get_value_amount(struct kunit *test)\n{\n\tint ret;\n\n\tret = linear_range_values_in_range_array(&testr[0], 2);\n\tKUNIT_EXPECT_EQ(test, (int)RANGE_NUM_VALS, ret);\n}\n\nstatic void range_test_get_selector_low(struct kunit *test)\n{\n\tint i, ret;\n\tunsigned int sel;\n\tbool found;\n\n\tfor (i = 0; i < RANGE1_NUM_VALS; i++) {\n\t\tret = linear_range_get_selector_low_array(&testr[0], 2,\n\t\t\t\t\t\t\t  range1_vals[i], &sel,\n\t\t\t\t\t\t\t  &found);\n\t\tKUNIT_EXPECT_EQ(test, 0, ret);\n\t\tKUNIT_EXPECT_EQ(test, sel, range1_sels[i]);\n\t\tKUNIT_EXPECT_TRUE(test, found);\n\t}\n\tfor (i = 0; i < RANGE2_NUM_VALS; i++) {\n\t\tret = linear_range_get_selector_low_array(&testr[0], 2,\n\t\t\t\t\t\t\t  range2_vals[i], &sel,\n\t\t\t\t\t\t\t  &found);\n\t\tKUNIT_EXPECT_EQ(test, 0, ret);\n\t\tKUNIT_EXPECT_EQ(test, sel, range2_sels[i]);\n\t\tKUNIT_EXPECT_TRUE(test, found);\n\t}\n\n\t \n\tret = linear_range_get_selector_low_array(&testr[0], 2,\n\t\t\t\t\trange2_vals[RANGE2_NUM_VALS - 1] + 1,\n\t\t\t\t\t&sel, &found);\n\n\tKUNIT_EXPECT_EQ(test, 0, ret);\n\tKUNIT_EXPECT_EQ(test, sel, range2_sels[RANGE2_NUM_VALS - 1]);\n\tKUNIT_EXPECT_FALSE(test, found);\n}\n\nstatic struct kunit_case range_test_cases[] = {\n\tKUNIT_CASE(range_test_get_value_amount),\n\tKUNIT_CASE(range_test_get_selector_high),\n\tKUNIT_CASE(range_test_get_selector_low),\n\tKUNIT_CASE(range_test_get_value),\n\t{},\n};\n\nstatic struct kunit_suite range_test_module = {\n\t.name = \"linear-ranges-test\",\n\t.test_cases = range_test_cases,\n};\n\nkunit_test_suites(&range_test_module);\n\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}