{
  "module_name": "netdev-notifier-error-inject.c",
  "hash_id": "ef2891dd4e7d045748bc0c8881794679a1ee1f1632ff39bade6e5d476a0d7449",
  "original_prompt": "Ingested from linux-6.6.14/lib/netdev-notifier-error-inject.c",
  "human_readable_source": "\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/netdevice.h>\n\n#include \"notifier-error-inject.h\"\n\nstatic int priority;\nmodule_param(priority, int, 0);\nMODULE_PARM_DESC(priority, \"specify netdevice notifier priority\");\n\nstatic struct notifier_err_inject netdev_notifier_err_inject = {\n\t.actions = {\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_REGISTER) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_CHANGEMTU) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_CHANGENAME) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_PRE_UP) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_PRE_TYPE_CHANGE) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_POST_INIT) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_PRECHANGEMTU) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_PRECHANGEUPPER) },\n\t\t{ NOTIFIER_ERR_INJECT_ACTION(NETDEV_CHANGEUPPER) },\n\t\t{}\n\t}\n};\n\nstatic struct dentry *dir;\n\nstatic int netdev_err_inject_init(void)\n{\n\tint err;\n\n\tdir = notifier_err_inject_init(\"netdev\", notifier_err_inject_dir,\n\t\t\t\t       &netdev_notifier_err_inject, priority);\n\tif (IS_ERR(dir))\n\t\treturn PTR_ERR(dir);\n\n\terr = register_netdevice_notifier(&netdev_notifier_err_inject.nb);\n\tif (err)\n\t\tdebugfs_remove_recursive(dir);\n\n\treturn err;\n}\n\nstatic void netdev_err_inject_exit(void)\n{\n\tunregister_netdevice_notifier(&netdev_notifier_err_inject.nb);\n\tdebugfs_remove_recursive(dir);\n}\n\nmodule_init(netdev_err_inject_init);\nmodule_exit(netdev_err_inject_exit);\n\nMODULE_DESCRIPTION(\"Netdevice notifier error injection module\");\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Nikolay Aleksandrov <razor@blackwall.org>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}