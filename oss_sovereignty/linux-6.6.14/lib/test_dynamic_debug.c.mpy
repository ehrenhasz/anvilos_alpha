{
  "module_name": "test_dynamic_debug.c",
  "hash_id": "45cbbd08d6104f4e190f1fe92daec836e11adb0f20ae9a071f14b48ab2c2fd68",
  "original_prompt": "Ingested from linux-6.6.14/lib/test_dynamic_debug.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt) \"test_dd: \" fmt\n\n#include <linux/module.h>\n\n \n\nstatic void do_prints(void);  \nstatic int param_set_do_prints(const char *instr, const struct kernel_param *kp)\n{\n\tdo_prints();\n\treturn 0;\n}\nstatic int param_get_do_prints(char *buffer, const struct kernel_param *kp)\n{\n\tdo_prints();\n\treturn scnprintf(buffer, PAGE_SIZE, \"did do_prints\\n\");\n}\nstatic const struct kernel_param_ops param_ops_do_prints = {\n\t.set = param_set_do_prints,\n\t.get = param_get_do_prints,\n};\nmodule_param_cb(do_prints, &param_ops_do_prints, NULL, 0600);\n\n \n#define DD_SYS_WRAP(_model, _flags)\t\t\t\t\t\\\n\tstatic unsigned long bits_##_model;\t\t\t\t\\\n\tstatic struct ddebug_class_param _flags##_model = {\t\t\\\n\t\t.bits = &bits_##_model,\t\t\t\t\t\\\n\t\t.flags = #_flags,\t\t\t\t\t\\\n\t\t.map = &map_##_model,\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tmodule_param_cb(_flags##_##_model, &param_ops_dyndbg_classes, &_flags##_model, 0600)\n\n \nenum cat_disjoint_bits {\n\tD2_CORE = 0,\n\tD2_DRIVER,\n\tD2_KMS,\n\tD2_PRIME,\n\tD2_ATOMIC,\n\tD2_VBL,\n\tD2_STATE,\n\tD2_LEASE,\n\tD2_DP,\n\tD2_DRMRES };\nDECLARE_DYNDBG_CLASSMAP(map_disjoint_bits, DD_CLASS_TYPE_DISJOINT_BITS, 0,\n\t\t\t\"D2_CORE\",\n\t\t\t\"D2_DRIVER\",\n\t\t\t\"D2_KMS\",\n\t\t\t\"D2_PRIME\",\n\t\t\t\"D2_ATOMIC\",\n\t\t\t\"D2_VBL\",\n\t\t\t\"D2_STATE\",\n\t\t\t\"D2_LEASE\",\n\t\t\t\"D2_DP\",\n\t\t\t\"D2_DRMRES\");\nDD_SYS_WRAP(disjoint_bits, p);\nDD_SYS_WRAP(disjoint_bits, T);\n\n \nenum cat_disjoint_names { LOW = 11, MID, HI };\nDECLARE_DYNDBG_CLASSMAP(map_disjoint_names, DD_CLASS_TYPE_DISJOINT_NAMES, 10,\n\t\t\t\"LOW\", \"MID\", \"HI\");\nDD_SYS_WRAP(disjoint_names, p);\nDD_SYS_WRAP(disjoint_names, T);\n\n \nenum cat_level_num { V0 = 14, V1, V2, V3, V4, V5, V6, V7 };\nDECLARE_DYNDBG_CLASSMAP(map_level_num, DD_CLASS_TYPE_LEVEL_NUM, 14,\n\t\t       \"V0\", \"V1\", \"V2\", \"V3\", \"V4\", \"V5\", \"V6\", \"V7\");\nDD_SYS_WRAP(level_num, p);\nDD_SYS_WRAP(level_num, T);\n\n \nenum cat_level_names { L0 = 22, L1, L2, L3, L4, L5, L6, L7 };\nDECLARE_DYNDBG_CLASSMAP(map_level_names, DD_CLASS_TYPE_LEVEL_NAMES, 22,\n\t\t\t\"L0\", \"L1\", \"L2\", \"L3\", \"L4\", \"L5\", \"L6\", \"L7\");\nDD_SYS_WRAP(level_names, p);\nDD_SYS_WRAP(level_names, T);\n\n \n#define prdbg(SYM) __pr_debug_cls(SYM, #SYM \" msg\\n\")\n\nstatic void do_cats(void)\n{\n\tpr_debug(\"doing categories\\n\");\n\n\tprdbg(LOW);\n\tprdbg(MID);\n\tprdbg(HI);\n\n\tprdbg(D2_CORE);\n\tprdbg(D2_DRIVER);\n\tprdbg(D2_KMS);\n\tprdbg(D2_PRIME);\n\tprdbg(D2_ATOMIC);\n\tprdbg(D2_VBL);\n\tprdbg(D2_STATE);\n\tprdbg(D2_LEASE);\n\tprdbg(D2_DP);\n\tprdbg(D2_DRMRES);\n}\n\nstatic void do_levels(void)\n{\n\tpr_debug(\"doing levels\\n\");\n\n\tprdbg(V1);\n\tprdbg(V2);\n\tprdbg(V3);\n\tprdbg(V4);\n\tprdbg(V5);\n\tprdbg(V6);\n\tprdbg(V7);\n\n\tprdbg(L1);\n\tprdbg(L2);\n\tprdbg(L3);\n\tprdbg(L4);\n\tprdbg(L5);\n\tprdbg(L6);\n\tprdbg(L7);\n}\n\nstatic void do_prints(void)\n{\n\tdo_cats();\n\tdo_levels();\n}\n\nstatic int __init test_dynamic_debug_init(void)\n{\n\tpr_debug(\"init start\\n\");\n\tdo_prints();\n\tpr_debug(\"init done\\n\");\n\treturn 0;\n}\n\nstatic void __exit test_dynamic_debug_exit(void)\n{\n\tpr_debug(\"exited\\n\");\n}\n\nmodule_init(test_dynamic_debug_init);\nmodule_exit(test_dynamic_debug_exit);\n\nMODULE_AUTHOR(\"Jim Cromie <jim.cromie@gmail.com>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}