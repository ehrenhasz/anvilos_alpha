{
  "module_name": "phy-cadence-torrent.c",
  "hash_id": "126eab887b4e645f5ea4844d26326984236e6ddd5be87c003816c13da47d2c24",
  "original_prompt": "Ingested from linux-6.6.14/drivers/phy/cadence/phy-cadence-torrent.c",
  "human_readable_source": "\n \n\n#include <dt-bindings/phy/phy.h>\n#include <dt-bindings/phy/phy-cadence.h>\n#include <linux/clk.h>\n#include <linux/clk-provider.h>\n#include <linux/delay.h>\n#include <linux/err.h>\n#include <linux/io.h>\n#include <linux/iopoll.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/phy/phy.h>\n#include <linux/platform_device.h>\n#include <linux/reset.h>\n#include <linux/regmap.h>\n\n#define REF_CLK_19_2MHZ\t\t19200000\n#define REF_CLK_25MHZ\t\t25000000\n#define REF_CLK_100MHZ\t\t100000000\n#define REF_CLK_156_25MHZ\t156250000\n\n#define MAX_NUM_LANES\t\t4\n#define DEFAULT_MAX_BIT_RATE\t8100  \n\n#define POLL_TIMEOUT_US\t\t5000\n#define PLL_LOCK_TIMEOUT\t100000\n\n#define DP_PLL0\t\t\tBIT(0)\n#define DP_PLL1\t\t\tBIT(1)\n\n#define TORRENT_COMMON_CDB_OFFSET\t0x0\n\n#define TORRENT_TX_LANE_CDB_OFFSET(ln, block_offset, reg_offset)\t\\\n\t\t\t\t((0x4000 << (block_offset)) +\t\t\\\n\t\t\t\t(((ln) << 9) << (reg_offset)))\n\n#define TORRENT_RX_LANE_CDB_OFFSET(ln, block_offset, reg_offset)\t\\\n\t\t\t\t((0x8000 << (block_offset)) +\t\t\\\n\t\t\t\t(((ln) << 9) << (reg_offset)))\n\n#define TORRENT_PHY_PCS_COMMON_OFFSET(block_offset)\t\\\n\t\t\t\t(0xC000 << (block_offset))\n\n#define TORRENT_PHY_PCS_LANE_CDB_OFFSET(ln, block_offset, reg_offset)\t\\\n\t\t\t\t((0xD000 << (block_offset)) +\t\t\\\n\t\t\t\t(((ln) << 8) << (reg_offset)))\n\n#define TORRENT_PHY_PMA_COMMON_OFFSET(block_offset)\t\\\n\t\t\t\t(0xE000 << (block_offset))\n\n#define TORRENT_DPTX_PHY_OFFSET\t\t0x0\n\n \n#define PHY_AUX_CTRL\t\t\t0x04\n#define PHY_RESET\t\t\t0x20\n#define PMA_TX_ELEC_IDLE_SHIFT\t\t4\n#define PHY_PMA_XCVR_PLLCLK_EN\t\t0x24\n#define PHY_PMA_XCVR_PLLCLK_EN_ACK\t0x28\n#define PHY_PMA_XCVR_POWER_STATE_REQ\t0x2c\n#define PHY_POWER_STATE_LN(ln)\t\t((ln) * 8)\n#define PMA_XCVR_POWER_STATE_REQ_LN_MASK\t0x3FU\n#define PHY_PMA_XCVR_POWER_STATE_ACK\t0x30\n#define PHY_PMA_CMN_READY\t\t0x34\n\n \n#define CMN_SSM_BANDGAP_TMR\t\t0x0021U\n#define CMN_SSM_BIAS_TMR\t\t0x0022U\n#define CMN_PLLSM0_PLLPRE_TMR\t\t0x002AU\n#define CMN_PLLSM0_PLLLOCK_TMR\t\t0x002CU\n#define CMN_PLLSM1_PLLPRE_TMR\t\t0x0032U\n#define CMN_PLLSM1_PLLLOCK_TMR\t\t0x0034U\n#define CMN_CDIAG_CDB_PWRI_OVRD\t\t0x0041U\n#define CMN_CDIAG_XCVRC_PWRI_OVRD\t0x0047U\n#define CMN_CDIAG_REFCLK_OVRD\t\t0x004CU\n#define CMN_CDIAG_REFCLK_DRV0_CTRL\t0x0050U\n#define CMN_BGCAL_INIT_TMR\t\t0x0064U\n#define CMN_BGCAL_ITER_TMR\t\t0x0065U\n#define CMN_IBCAL_INIT_TMR\t\t0x0074U\n#define CMN_PLL0_VCOCAL_TCTRL\t\t0x0082U\n#define CMN_PLL0_VCOCAL_INIT_TMR\t0x0084U\n#define CMN_PLL0_VCOCAL_ITER_TMR\t0x0085U\n#define CMN_PLL0_VCOCAL_REFTIM_START\t0x0086U\n#define CMN_PLL0_VCOCAL_PLLCNT_START\t0x0088U\n#define CMN_PLL0_INTDIV_M0\t\t0x0090U\n#define CMN_PLL0_FRACDIVL_M0\t\t0x0091U\n#define CMN_PLL0_FRACDIVH_M0\t\t0x0092U\n#define CMN_PLL0_HIGH_THR_M0\t\t0x0093U\n#define CMN_PLL0_DSM_DIAG_M0\t\t0x0094U\n#define CMN_PLL0_DSM_FBH_OVRD_M0\t0x0095U\n#define CMN_PLL0_DSM_FBL_OVRD_M0\t0x0096U\n#define CMN_PLL0_SS_CTRL1_M0\t\t0x0098U\n#define CMN_PLL0_SS_CTRL2_M0            0x0099U\n#define CMN_PLL0_SS_CTRL3_M0            0x009AU\n#define CMN_PLL0_SS_CTRL4_M0            0x009BU\n#define CMN_PLL0_LOCK_REFCNT_START      0x009CU\n#define CMN_PLL0_LOCK_PLLCNT_START\t0x009EU\n#define CMN_PLL0_LOCK_PLLCNT_THR        0x009FU\n#define CMN_PLL0_INTDIV_M1\t\t0x00A0U\n#define CMN_PLL0_FRACDIVH_M1\t\t0x00A2U\n#define CMN_PLL0_HIGH_THR_M1\t\t0x00A3U\n#define CMN_PLL0_DSM_DIAG_M1\t\t0x00A4U\n#define CMN_PLL0_SS_CTRL1_M1\t\t0x00A8U\n#define CMN_PLL0_SS_CTRL2_M1\t\t0x00A9U\n#define CMN_PLL0_SS_CTRL3_M1\t\t0x00AAU\n#define CMN_PLL0_SS_CTRL4_M1\t\t0x00ABU\n#define CMN_PLL1_VCOCAL_TCTRL\t\t0x00C2U\n#define CMN_PLL1_VCOCAL_INIT_TMR\t0x00C4U\n#define CMN_PLL1_VCOCAL_ITER_TMR\t0x00C5U\n#define CMN_PLL1_VCOCAL_REFTIM_START\t0x00C6U\n#define CMN_PLL1_VCOCAL_PLLCNT_START\t0x00C8U\n#define CMN_PLL1_INTDIV_M0\t\t0x00D0U\n#define CMN_PLL1_FRACDIVL_M0\t\t0x00D1U\n#define CMN_PLL1_FRACDIVH_M0\t\t0x00D2U\n#define CMN_PLL1_HIGH_THR_M0\t\t0x00D3U\n#define CMN_PLL1_DSM_DIAG_M0\t\t0x00D4U\n#define CMN_PLL1_DSM_FBH_OVRD_M0\t0x00D5U\n#define CMN_PLL1_DSM_FBL_OVRD_M0\t0x00D6U\n#define CMN_PLL1_SS_CTRL1_M0\t\t0x00D8U\n#define CMN_PLL1_SS_CTRL2_M0            0x00D9U\n#define CMN_PLL1_SS_CTRL3_M0            0x00DAU\n#define CMN_PLL1_SS_CTRL4_M0            0x00DBU\n#define CMN_PLL1_LOCK_REFCNT_START      0x00DCU\n#define CMN_PLL1_LOCK_PLLCNT_START\t0x00DEU\n#define CMN_PLL1_LOCK_PLLCNT_THR        0x00DFU\n#define CMN_TXPUCAL_TUNE\t\t0x0103U\n#define CMN_TXPUCAL_INIT_TMR\t\t0x0104U\n#define CMN_TXPUCAL_ITER_TMR\t\t0x0105U\n#define CMN_TXPDCAL_TUNE\t\t0x010BU\n#define CMN_TXPDCAL_INIT_TMR\t\t0x010CU\n#define CMN_TXPDCAL_ITER_TMR\t\t0x010DU\n#define CMN_RXCAL_INIT_TMR\t\t0x0114U\n#define CMN_RXCAL_ITER_TMR\t\t0x0115U\n#define CMN_SD_CAL_INIT_TMR\t\t0x0124U\n#define CMN_SD_CAL_ITER_TMR\t\t0x0125U\n#define CMN_SD_CAL_REFTIM_START\t\t0x0126U\n#define CMN_SD_CAL_PLLCNT_START\t\t0x0128U\n#define CMN_PDIAG_PLL0_CTRL_M0\t\t0x01A0U\n#define CMN_PDIAG_PLL0_CLK_SEL_M0\t0x01A1U\n#define CMN_PDIAG_PLL0_CP_PADJ_M0\t0x01A4U\n#define CMN_PDIAG_PLL0_CP_IADJ_M0\t0x01A5U\n#define CMN_PDIAG_PLL0_FILT_PADJ_M0\t0x01A6U\n#define CMN_PDIAG_PLL0_CTRL_M1\t\t0x01B0U\n#define CMN_PDIAG_PLL0_CLK_SEL_M1\t0x01B1U\n#define CMN_PDIAG_PLL0_CP_PADJ_M1\t0x01B4U\n#define CMN_PDIAG_PLL0_CP_IADJ_M1\t0x01B5U\n#define CMN_PDIAG_PLL0_FILT_PADJ_M1\t0x01B6U\n#define CMN_PDIAG_PLL1_CTRL_M0\t\t0x01C0U\n#define CMN_PDIAG_PLL1_CLK_SEL_M0\t0x01C1U\n#define CMN_PDIAG_PLL1_CP_PADJ_M0\t0x01C4U\n#define CMN_PDIAG_PLL1_CP_IADJ_M0\t0x01C5U\n#define CMN_PDIAG_PLL1_FILT_PADJ_M0\t0x01C6U\n#define CMN_DIAG_BIAS_OVRD1\t\t0x01E1U\n\n \n#define TX_TXCC_CTRL\t\t\t0x0040U\n#define TX_TXCC_CPOST_MULT_00\t\t0x004CU\n#define TX_TXCC_CPOST_MULT_01\t\t0x004DU\n#define TX_TXCC_MGNFS_MULT_000\t\t0x0050U\n#define TX_TXCC_MGNFS_MULT_100\t\t0x0054U\n#define DRV_DIAG_TX_DRV\t\t\t0x00C6U\n#define XCVR_DIAG_PLLDRC_CTRL\t\t0x00E5U\n#define XCVR_DIAG_HSCLK_SEL\t\t0x00E6U\n#define XCVR_DIAG_HSCLK_DIV\t\t0x00E7U\n#define XCVR_DIAG_RXCLK_CTRL\t\t0x00E9U\n#define XCVR_DIAG_BIDI_CTRL\t\t0x00EAU\n#define XCVR_DIAG_PSC_OVRD\t\t0x00EBU\n#define TX_PSC_A0\t\t\t0x0100U\n#define TX_PSC_A1\t\t\t0x0101U\n#define TX_PSC_A2\t\t\t0x0102U\n#define TX_PSC_A3\t\t\t0x0103U\n#define TX_RCVDET_ST_TMR\t\t0x0123U\n#define TX_DIAG_ACYA\t\t\t0x01E7U\n#define TX_DIAG_ACYA_HBDC_MASK\t\t0x0001U\n\n \n#define RX_PSC_A0\t\t\t0x0000U\n#define RX_PSC_A1\t\t\t0x0001U\n#define RX_PSC_A2\t\t\t0x0002U\n#define RX_PSC_A3\t\t\t0x0003U\n#define RX_PSC_CAL\t\t\t0x0006U\n#define RX_SDCAL0_INIT_TMR\t\t0x0044U\n#define RX_SDCAL0_ITER_TMR\t\t0x0045U\n#define RX_SDCAL1_INIT_TMR\t\t0x004CU\n#define RX_SDCAL1_ITER_TMR\t\t0x004DU\n#define RX_CDRLF_CNFG\t\t\t0x0080U\n#define RX_CDRLF_CNFG3\t\t\t0x0082U\n#define RX_SIGDET_HL_FILT_TMR\t\t0x0090U\n#define RX_REE_GCSM1_CTRL\t\t0x0108U\n#define RX_REE_GCSM1_EQENM_PH1\t\t0x0109U\n#define RX_REE_GCSM1_EQENM_PH2\t\t0x010AU\n#define RX_REE_GCSM2_CTRL\t\t0x0110U\n#define RX_REE_PERGCSM_CTRL\t\t0x0118U\n#define RX_REE_ATTEN_THR\t\t0x0149U\n#define RX_REE_TAP1_CLIP\t\t0x0171U\n#define RX_REE_TAP2TON_CLIP\t\t0x0172U\n#define RX_REE_SMGM_CTRL1\t\t0x0177U\n#define RX_REE_SMGM_CTRL2\t\t0x0178U\n#define RX_DIAG_DFE_CTRL\t\t0x01E0U\n#define RX_DIAG_DFE_AMP_TUNE_2\t\t0x01E2U\n#define RX_DIAG_DFE_AMP_TUNE_3\t\t0x01E3U\n#define RX_DIAG_NQST_CTRL\t\t0x01E5U\n#define RX_DIAG_SIGDET_TUNE\t\t0x01E8U\n#define RX_DIAG_PI_RATE\t\t\t0x01F4U\n#define RX_DIAG_PI_CAP\t\t\t0x01F5U\n#define RX_DIAG_ACYA\t\t\t0x01FFU\n\n \n#define PHY_PIPE_CMN_CTRL1\t\t0x0000U\n#define PHY_PLL_CFG\t\t\t0x000EU\n#define PHY_PIPE_USB3_GEN2_PRE_CFG0\t0x0020U\n#define PHY_PIPE_USB3_GEN2_POST_CFG0\t0x0022U\n#define PHY_PIPE_USB3_GEN2_POST_CFG1\t0x0023U\n\n \n#define PHY_PCS_ISO_LINK_CTRL\t\t0x000BU\n\n \n#define PHY_PMA_CMN_CTRL1\t\t0x0000U\n#define PHY_PMA_CMN_CTRL2\t\t0x0001U\n#define PHY_PMA_PLL_RAW_CTRL\t\t0x0003U\n\n#define CDNS_TORRENT_OUTPUT_CLOCKS\t3\n\nstatic const char * const clk_names[] = {\n\t[CDNS_TORRENT_REFCLK_DRIVER] = \"refclk-driver\",\n\t[CDNS_TORRENT_DERIVED_REFCLK] = \"refclk-der\",\n\t[CDNS_TORRENT_RECEIVED_REFCLK] = \"refclk-rec\",\n};\n\nstatic const struct reg_field phy_pll_cfg =\n\t\t\t\tREG_FIELD(PHY_PLL_CFG, 0, 1);\n\nstatic const struct reg_field phy_pma_cmn_ctrl_1 =\n\t\t\t\tREG_FIELD(PHY_PMA_CMN_CTRL1, 0, 0);\n\nstatic const struct reg_field phy_pma_cmn_ctrl_2 =\n\t\t\t\tREG_FIELD(PHY_PMA_CMN_CTRL2, 0, 7);\n\nstatic const struct reg_field phy_pma_pll_raw_ctrl =\n\t\t\t\tREG_FIELD(PHY_PMA_PLL_RAW_CTRL, 0, 1);\n\nstatic const struct reg_field phy_reset_ctrl =\n\t\t\t\tREG_FIELD(PHY_RESET, 8, 8);\n\nstatic const struct reg_field phy_pcs_iso_link_ctrl_1 =\n\t\t\t\tREG_FIELD(PHY_PCS_ISO_LINK_CTRL, 1, 1);\n\nstatic const struct reg_field phy_pipe_cmn_ctrl1_0 = REG_FIELD(PHY_PIPE_CMN_CTRL1, 0, 0);\n\nstatic const struct reg_field cmn_cdiag_refclk_ovrd_4 =\n\t\t\t\tREG_FIELD(CMN_CDIAG_REFCLK_OVRD, 4, 4);\n\n#define REFCLK_OUT_NUM_CMN_CONFIG\t4\n\nenum cdns_torrent_refclk_out_cmn {\n\tCMN_CDIAG_REFCLK_DRV0_CTRL_1,\n\tCMN_CDIAG_REFCLK_DRV0_CTRL_4,\n\tCMN_CDIAG_REFCLK_DRV0_CTRL_5,\n\tCMN_CDIAG_REFCLK_DRV0_CTRL_6,\n};\n\nstatic const struct reg_field refclk_out_cmn_cfg[] = {\n\t[CMN_CDIAG_REFCLK_DRV0_CTRL_1]\t= REG_FIELD(CMN_CDIAG_REFCLK_DRV0_CTRL, 1, 1),\n\t[CMN_CDIAG_REFCLK_DRV0_CTRL_4]\t= REG_FIELD(CMN_CDIAG_REFCLK_DRV0_CTRL, 4, 4),\n\t[CMN_CDIAG_REFCLK_DRV0_CTRL_5]  = REG_FIELD(CMN_CDIAG_REFCLK_DRV0_CTRL, 5, 5),\n\t[CMN_CDIAG_REFCLK_DRV0_CTRL_6]\t= REG_FIELD(CMN_CDIAG_REFCLK_DRV0_CTRL, 6, 6),\n};\n\nstatic const int refclk_driver_parent_index[] = {\n\tCDNS_TORRENT_DERIVED_REFCLK,\n\tCDNS_TORRENT_RECEIVED_REFCLK\n};\n\nstatic u32 cdns_torrent_refclk_driver_mux_table[] = { 1, 0 };\n\nenum cdns_torrent_phy_type {\n\tTYPE_NONE,\n\tTYPE_DP,\n\tTYPE_PCIE,\n\tTYPE_SGMII,\n\tTYPE_QSGMII,\n\tTYPE_USB,\n\tTYPE_USXGMII,\n};\n\nenum cdns_torrent_ref_clk {\n\tCLK_19_2_MHZ,\n\tCLK_25_MHZ,\n\tCLK_100_MHZ,\n\tCLK_156_25_MHZ,\n\tCLK_ANY,\n};\n\nenum cdns_torrent_ssc_mode {\n\tNO_SSC,\n\tEXTERNAL_SSC,\n\tINTERNAL_SSC,\n\tANY_SSC,\n};\n\n \n#define REFCLK0_SHIFT\t12\n#define REFCLK0_MASK\tGENMASK(14, 12)\n#define REFCLK1_SHIFT\t9\n#define REFCLK1_MASK\tGENMASK(11, 9)\n#define LINK0_SHIFT\t6\n#define LINK0_MASK\tGENMASK(8, 6)\n#define LINK1_SHIFT\t3\n#define LINK1_MASK\tGENMASK(5, 3)\n#define SSC_SHIFT\t0\n#define SSC_MASK\tGENMASK(2, 0)\n\n#define CDNS_TORRENT_KEY(refclk0, refclk1, link0, link1, ssc) \\\n\t\t\t((((refclk0) << REFCLK0_SHIFT) & REFCLK0_MASK) | \\\n\t\t\t(((refclk1) << REFCLK1_SHIFT) & REFCLK1_MASK) | \\\n\t\t\t(((link0) << LINK0_SHIFT) & LINK0_MASK) | \\\n\t\t\t(((link1) << LINK1_SHIFT) & LINK1_MASK) | \\\n\t\t\t(((ssc) << SSC_SHIFT) & SSC_MASK))\n\n#define CDNS_TORRENT_KEY_ANYCLK(link0, link1) \\\n\t\t\tCDNS_TORRENT_KEY(CLK_ANY, CLK_ANY, \\\n\t\t\t\t\t (link0), (link1), ANY_SSC)\n\nstruct cdns_torrent_inst {\n\tstruct phy *phy;\n\tu32 mlane;\n\tenum cdns_torrent_phy_type phy_type;\n\tu32 num_lanes;\n\tstruct reset_control *lnk_rst;\n\tenum cdns_torrent_ssc_mode ssc_mode;\n};\n\nstruct cdns_torrent_phy {\n\tvoid __iomem *base;\t \n\tvoid __iomem *sd_base;  \n\tu32 max_bit_rate;  \n\tu32 dp_pll;\n\tstruct reset_control *phy_rst;\n\tstruct reset_control *apb_rst;\n\tstruct device *dev;\n\tstruct clk *clk;\n\tenum cdns_torrent_ref_clk ref_clk_rate;\n\tstruct cdns_torrent_inst phys[MAX_NUM_LANES];\n\tint nsubnodes;\n\tconst struct cdns_torrent_data *init_data;\n\tstruct regmap *regmap_common_cdb;\n\tstruct regmap *regmap_phy_pcs_common_cdb;\n\tstruct regmap *regmap_phy_pma_common_cdb;\n\tstruct regmap *regmap_tx_lane_cdb[MAX_NUM_LANES];\n\tstruct regmap *regmap_rx_lane_cdb[MAX_NUM_LANES];\n\tstruct regmap *regmap_phy_pcs_lane_cdb[MAX_NUM_LANES];\n\tstruct regmap *regmap_dptx_phy_reg;\n\tstruct regmap_field *phy_pll_cfg;\n\tstruct regmap_field *phy_pipe_cmn_ctrl1_0;\n\tstruct regmap_field *cmn_cdiag_refclk_ovrd_4;\n\tstruct regmap_field *phy_pma_cmn_ctrl_1;\n\tstruct regmap_field *phy_pma_cmn_ctrl_2;\n\tstruct regmap_field *phy_pma_pll_raw_ctrl;\n\tstruct regmap_field *phy_reset_ctrl;\n\tstruct regmap_field *phy_pcs_iso_link_ctrl_1[MAX_NUM_LANES];\n\tstruct clk_hw_onecell_data *clk_hw_data;\n};\n\nenum phy_powerstate {\n\tPOWERSTATE_A0 = 0,\n\t \n\tPOWERSTATE_A2 = 2,\n\tPOWERSTATE_A3 = 3,\n};\n\nstruct cdns_torrent_refclk_driver {\n\tstruct clk_hw\t\thw;\n\tstruct regmap_field\t*cmn_fields[REFCLK_OUT_NUM_CMN_CONFIG];\n\tstruct clk_init_data\tclk_data;\n};\n\n#define to_cdns_torrent_refclk_driver(_hw)\t\\\n\t\t\tcontainer_of(_hw, struct cdns_torrent_refclk_driver, hw)\n\nstruct cdns_torrent_derived_refclk {\n\tstruct clk_hw\t\thw;\n\tstruct regmap_field\t*phy_pipe_cmn_ctrl1_0;\n\tstruct regmap_field\t*cmn_cdiag_refclk_ovrd_4;\n\tstruct clk_init_data\tclk_data;\n};\n\n#define to_cdns_torrent_derived_refclk(_hw)\t\\\n\t\t\tcontainer_of(_hw, struct cdns_torrent_derived_refclk, hw)\n\nstruct cdns_torrent_received_refclk {\n\tstruct clk_hw\t\thw;\n\tstruct regmap_field\t*phy_pipe_cmn_ctrl1_0;\n\tstruct regmap_field\t*cmn_cdiag_refclk_ovrd_4;\n\tstruct clk_init_data\tclk_data;\n};\n\n#define to_cdns_torrent_received_refclk(_hw)\t\\\n\t\t\tcontainer_of(_hw, struct cdns_torrent_received_refclk, hw)\n\nstruct cdns_reg_pairs {\n\tu32 val;\n\tu32 off;\n};\n\nstruct cdns_torrent_vals {\n\tstruct cdns_reg_pairs *reg_pairs;\n\tu32 num_regs;\n};\n\nstruct cdns_torrent_vals_entry {\n\tu32 key;\n\tstruct cdns_torrent_vals *vals;\n};\n\nstruct cdns_torrent_vals_table {\n\tstruct cdns_torrent_vals_entry *entries;\n\tu32 num_entries;\n};\n\nstruct cdns_torrent_data {\n\tu8 block_offset_shift;\n\tu8 reg_offset_shift;\n\tstruct cdns_torrent_vals_table link_cmn_vals_tbl;\n\tstruct cdns_torrent_vals_table xcvr_diag_vals_tbl;\n\tstruct cdns_torrent_vals_table pcs_cmn_vals_tbl;\n\tstruct cdns_torrent_vals_table phy_pma_cmn_vals_tbl;\n\tstruct cdns_torrent_vals_table cmn_vals_tbl;\n\tstruct cdns_torrent_vals_table tx_ln_vals_tbl;\n\tstruct cdns_torrent_vals_table rx_ln_vals_tbl;\n};\n\nstruct cdns_regmap_cdb_context {\n\tstruct device *dev;\n\tvoid __iomem *base;\n\tu8 reg_offset_shift;\n};\n\nstatic struct cdns_torrent_vals *cdns_torrent_get_tbl_vals(const struct cdns_torrent_vals_table *tbl,\n\t\t\t\t\t\t\t   enum cdns_torrent_ref_clk refclk0,\n\t\t\t\t\t\t\t   enum cdns_torrent_ref_clk refclk1,\n\t\t\t\t\t\t\t   enum cdns_torrent_phy_type link0,\n\t\t\t\t\t\t\t   enum cdns_torrent_phy_type link1,\n\t\t\t\t\t\t\t   enum cdns_torrent_ssc_mode ssc)\n{\n\tint i;\n\tu32 key = CDNS_TORRENT_KEY(refclk0, refclk1, link0, link1, ssc);\n\n\tfor (i = 0; i < tbl->num_entries; i++) {\n\t\tif (tbl->entries[i].key == key)\n\t\t\treturn tbl->entries[i].vals;\n\t}\n\n\treturn NULL;\n}\n\nstatic int cdns_regmap_write(void *context, unsigned int reg, unsigned int val)\n{\n\tstruct cdns_regmap_cdb_context *ctx = context;\n\tu32 offset = reg << ctx->reg_offset_shift;\n\n\twritew(val, ctx->base + offset);\n\n\treturn 0;\n}\n\nstatic int cdns_regmap_read(void *context, unsigned int reg, unsigned int *val)\n{\n\tstruct cdns_regmap_cdb_context *ctx = context;\n\tu32 offset = reg << ctx->reg_offset_shift;\n\n\t*val = readw(ctx->base + offset);\n\treturn 0;\n}\n\nstatic int cdns_regmap_dptx_write(void *context, unsigned int reg,\n\t\t\t\t  unsigned int val)\n{\n\tstruct cdns_regmap_cdb_context *ctx = context;\n\tu32 offset = reg;\n\n\twritel(val, ctx->base + offset);\n\n\treturn 0;\n}\n\nstatic int cdns_regmap_dptx_read(void *context, unsigned int reg,\n\t\t\t\t unsigned int *val)\n{\n\tstruct cdns_regmap_cdb_context *ctx = context;\n\tu32 offset = reg;\n\n\t*val = readl(ctx->base + offset);\n\treturn 0;\n}\n\n#define TORRENT_TX_LANE_CDB_REGMAP_CONF(n) \\\n{ \\\n\t.name = \"torrent_tx_lane\" n \"_cdb\", \\\n\t.reg_stride = 1, \\\n\t.fast_io = true, \\\n\t.reg_write = cdns_regmap_write, \\\n\t.reg_read = cdns_regmap_read, \\\n}\n\n#define TORRENT_RX_LANE_CDB_REGMAP_CONF(n) \\\n{ \\\n\t.name = \"torrent_rx_lane\" n \"_cdb\", \\\n\t.reg_stride = 1, \\\n\t.fast_io = true, \\\n\t.reg_write = cdns_regmap_write, \\\n\t.reg_read = cdns_regmap_read, \\\n}\n\nstatic const struct regmap_config cdns_torrent_tx_lane_cdb_config[] = {\n\tTORRENT_TX_LANE_CDB_REGMAP_CONF(\"0\"),\n\tTORRENT_TX_LANE_CDB_REGMAP_CONF(\"1\"),\n\tTORRENT_TX_LANE_CDB_REGMAP_CONF(\"2\"),\n\tTORRENT_TX_LANE_CDB_REGMAP_CONF(\"3\"),\n};\n\nstatic const struct regmap_config cdns_torrent_rx_lane_cdb_config[] = {\n\tTORRENT_RX_LANE_CDB_REGMAP_CONF(\"0\"),\n\tTORRENT_RX_LANE_CDB_REGMAP_CONF(\"1\"),\n\tTORRENT_RX_LANE_CDB_REGMAP_CONF(\"2\"),\n\tTORRENT_RX_LANE_CDB_REGMAP_CONF(\"3\"),\n};\n\nstatic const struct regmap_config cdns_torrent_common_cdb_config = {\n\t.name = \"torrent_common_cdb\",\n\t.reg_stride = 1,\n\t.fast_io = true,\n\t.reg_write = cdns_regmap_write,\n\t.reg_read = cdns_regmap_read,\n};\n\n#define TORRENT_PHY_PCS_LANE_CDB_REGMAP_CONF(n) \\\n{ \\\n\t.name = \"torrent_phy_pcs_lane\" n \"_cdb\", \\\n\t.reg_stride = 1, \\\n\t.fast_io = true, \\\n\t.reg_write = cdns_regmap_write, \\\n\t.reg_read = cdns_regmap_read, \\\n}\n\nstatic const struct regmap_config cdns_torrent_phy_pcs_lane_cdb_config[] = {\n\tTORRENT_PHY_PCS_LANE_CDB_REGMAP_CONF(\"0\"),\n\tTORRENT_PHY_PCS_LANE_CDB_REGMAP_CONF(\"1\"),\n\tTORRENT_PHY_PCS_LANE_CDB_REGMAP_CONF(\"2\"),\n\tTORRENT_PHY_PCS_LANE_CDB_REGMAP_CONF(\"3\"),\n};\n\nstatic const struct regmap_config cdns_torrent_phy_pcs_cmn_cdb_config = {\n\t.name = \"torrent_phy_pcs_cmn_cdb\",\n\t.reg_stride = 1,\n\t.fast_io = true,\n\t.reg_write = cdns_regmap_write,\n\t.reg_read = cdns_regmap_read,\n};\n\nstatic const struct regmap_config cdns_torrent_phy_pma_cmn_cdb_config = {\n\t.name = \"torrent_phy_pma_cmn_cdb\",\n\t.reg_stride = 1,\n\t.fast_io = true,\n\t.reg_write = cdns_regmap_write,\n\t.reg_read = cdns_regmap_read,\n};\n\nstatic const struct regmap_config cdns_torrent_dptx_phy_config = {\n\t.name = \"torrent_dptx_phy\",\n\t.reg_stride = 1,\n\t.fast_io = true,\n\t.reg_write = cdns_regmap_dptx_write,\n\t.reg_read = cdns_regmap_dptx_read,\n};\n\n \n\nstatic void cdns_torrent_phy_write(struct regmap *regmap, u32 offset, u32 val)\n{\n\tregmap_write(regmap, offset, val);\n}\n\nstatic u32 cdns_torrent_phy_read(struct regmap *regmap, u32 offset)\n{\n\tunsigned int val;\n\n\tregmap_read(regmap, offset, &val);\n\treturn val;\n}\n\n \n\nstatic void cdns_torrent_dp_write(struct regmap *regmap, u32 offset, u32 val)\n{\n\tregmap_write(regmap, offset, val);\n}\n\nstatic u32 cdns_torrent_dp_read(struct regmap *regmap, u32 offset)\n{\n\tu32 val;\n\n\tregmap_read(regmap, offset, &val);\n\treturn val;\n}\n\n \nstruct coefficients {\n\t \n\tu16 diag_tx_drv;\n\t \n\tu16 mgnfs_mult;\n\t \n\tu16 cpost_mult;\n};\n\n \nstatic const struct coefficients vltg_coeff[4][4] = {\n\t \n\t{\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x002A,\n\t\t .cpost_mult = 0x0000},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x001F,\n\t\t .cpost_mult = 0x0014},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0012,\n\t\t .cpost_mult = 0x0020},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0000,\n\t\t .cpost_mult = 0x002A}\n\t},\n\n\t \n\t{\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x001F,\n\t\t .cpost_mult = 0x0000},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0013,\n\t\t .cpost_mult = 0x0012},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0000,\n\t\t .cpost_mult = 0x001F},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF}\n\t},\n\n\t \n\t{\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0013,\n\t\t .cpost_mult = 0x0000},\n\t\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0000,\n\t\t .cpost_mult = 0x0013},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF}\n\t},\n\n\t \n\t{\t{.diag_tx_drv = 0x0003, .mgnfs_mult = 0x0000,\n\t\t .cpost_mult = 0x0000},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF},\n\t\t{.diag_tx_drv = 0xFFFF, .mgnfs_mult = 0xFFFF,\n\t\t .cpost_mult = 0xFFFF}\n\t}\n};\n\nstatic const char *cdns_torrent_get_phy_type(enum cdns_torrent_phy_type phy_type)\n{\n\tswitch (phy_type) {\n\tcase TYPE_DP:\n\t\treturn \"DisplayPort\";\n\tcase TYPE_PCIE:\n\t\treturn \"PCIe\";\n\tcase TYPE_SGMII:\n\t\treturn \"SGMII\";\n\tcase TYPE_QSGMII:\n\t\treturn \"QSGMII\";\n\tcase TYPE_USB:\n\t\treturn \"USB\";\n\tcase TYPE_USXGMII:\n\t\treturn \"USXGMII\";\n\tdefault:\n\t\treturn \"None\";\n\t}\n}\n\n \nstatic\nvoid cdns_torrent_dp_enable_ssc_19_2mhz(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\tu32 ctrl2_val, u32 ctrl3_val)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_common_cdb;\n\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, 0x0001);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, ctrl2_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, ctrl3_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL4_M0, 0x0003);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, 0x0001);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, ctrl2_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, ctrl3_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL4_M0, 0x0003);\n}\n\nstatic\nvoid cdns_torrent_dp_pma_cmn_vco_cfg_19_2mhz(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t     u32 rate, bool ssc)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_common_cdb;\n\n\t \n\tswitch (rate) {\n\t \n\tcase 2700:\n\tcase 5400:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0119);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x4000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x00BC);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0012);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0119);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x4000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x00BC);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0012);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_19_2mhz(cdns_phy, 0x033A, 0x006A);\n\t\tbreak;\n\t \n\tcase 1620:\n\tcase 2430:\n\tcase 3240:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x01FA);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x4000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x0152);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x01FA);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x4000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x0152);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_19_2mhz(cdns_phy, 0x05DD, 0x0069);\n\t\tbreak;\n\t \n\tcase 2160:\n\tcase 4320:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x01C2);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x012C);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x01C2);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x012C);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_19_2mhz(cdns_phy, 0x0536, 0x0069);\n\t\tbreak;\n\t \n\tcase 8100:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x01A5);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0xE000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x011A);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x01A5);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0xE000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x011A);\n\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_19_2mhz(cdns_phy, 0x04D7, 0x006A);\n\t\tbreak;\n\t}\n\n\tif (ssc) {\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_VCOCAL_PLLCNT_START, 0x025E);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_PLLCNT_THR, 0x0005);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_VCOCAL_PLLCNT_START, 0x025E);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_PLLCNT_THR, 0x0005);\n\t} else {\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_VCOCAL_PLLCNT_START, 0x0260);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_VCOCAL_PLLCNT_START, 0x0260);\n\t\t \n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL2_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL3_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL4_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_PLLCNT_THR, 0x0003);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL2_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL3_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL4_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_PLLCNT_THR, 0x0003);\n\t}\n\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_REFCNT_START, 0x0099);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_PLLCNT_START, 0x0099);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_REFCNT_START, 0x0099);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_PLLCNT_START, 0x0099);\n}\n\n \nstatic void cdns_torrent_dp_enable_ssc_25mhz(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t     u32 ctrl2_val)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_common_cdb;\n\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, 0x0001);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, ctrl2_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, 0x007F);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL4_M0, 0x0003);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, 0x0001);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, ctrl2_val);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, 0x007F);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL4_M0, 0x0003);\n}\n\nstatic\nvoid cdns_torrent_dp_pma_cmn_vco_cfg_25mhz(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t   u32 rate, bool ssc)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_common_cdb;\n\n\t \n\tswitch (rate) {\n\t \n\tcase 2700:\n\tcase 5400:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x01B0);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x0120);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x01B0);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x0120);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_25mhz(cdns_phy, 0x0423);\n\t\tbreak;\n\t \n\tcase 1620:\n\tcase 2430:\n\tcase 3240:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0184);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0xCCCD);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x0104);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0184);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0xCCCD);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x0104);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_25mhz(cdns_phy, 0x03B9);\n\t\tbreak;\n\t \n\tcase 2160:\n\tcase 4320:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0159);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x999A);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x00E7);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0159);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x999A);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x00E7);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_25mhz(cdns_phy, 0x034F);\n\t\tbreak;\n\t \n\tcase 8100:\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0144);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x00D8);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0144);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x00D8);\n\t\tif (ssc)\n\t\t\tcdns_torrent_dp_enable_ssc_25mhz(cdns_phy, 0x031A);\n\t\tbreak;\n\t}\n\n\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\n\tif (ssc) {\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL0_VCOCAL_PLLCNT_START, 0x0315);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL0_LOCK_PLLCNT_THR, 0x0005);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL1_VCOCAL_PLLCNT_START, 0x0315);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL1_LOCK_PLLCNT_THR, 0x0005);\n\t} else {\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL0_VCOCAL_PLLCNT_START, 0x0317);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL1_VCOCAL_PLLCNT_START, 0x0317);\n\t\t \n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL1_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL2_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL3_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_SS_CTRL4_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL0_LOCK_PLLCNT_THR, 0x0003);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL1_M0, 0x0002);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL2_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL3_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_SS_CTRL4_M0, 0x0000);\n\t\tcdns_torrent_phy_write(regmap,\n\t\t\t\t       CMN_PLL1_LOCK_PLLCNT_THR, 0x0003);\n\t}\n\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_REFCNT_START, 0x00C7);\n\tcdns_torrent_phy_write(regmap, CMN_PLL0_LOCK_PLLCNT_START, 0x00C7);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_REFCNT_START, 0x00C7);\n\tcdns_torrent_phy_write(regmap, CMN_PLL1_LOCK_PLLCNT_START, 0x00C7);\n}\n\nstatic\nvoid cdns_torrent_dp_pma_cmn_vco_cfg_100mhz(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t    u32 rate, bool ssc)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_common_cdb;\n\n\t \n\tswitch (rate) {\n\t \n\tcase 2700:\n\tcase 5400:\n\t\tif (cdns_phy->dp_pll & DP_PLL0)\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_DSM_FBH_OVRD_M0, 0x0022);\n\n\t\tif (cdns_phy->dp_pll & DP_PLL1) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_PADJ_M0, 0x0028);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_DSM_FBH_OVRD_M0, 0x0022);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_DSM_FBL_OVRD_M0, 0x000C);\n\t\t}\n\t\tbreak;\n\t \n\tcase 1620:\n\tcase 2430:\n\tcase 3240:\n\t\tif (cdns_phy->dp_pll & DP_PLL0) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0061);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x3333);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x0042);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\t}\n\t\tif (cdns_phy->dp_pll & DP_PLL1) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0061);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x3333);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x0042);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\t}\n\t\tbreak;\n\t \n\tcase 2160:\n\tcase 4320:\n\t\tif (cdns_phy->dp_pll & DP_PLL0) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0056);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVL_M0, 0x6666);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x003A);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\t}\n\t\tif (cdns_phy->dp_pll & DP_PLL1) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0056);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVL_M0, 0x6666);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x003A);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\t}\n\t\tbreak;\n\t \n\tcase 8100:\n\t\tif (cdns_phy->dp_pll & DP_PLL0) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_INTDIV_M0, 0x0051);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL0_HIGH_THR_M0, 0x0036);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL0_CTRL_M0, 0x0002);\n\t\t}\n\t\tif (cdns_phy->dp_pll & DP_PLL1) {\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_DSM_DIAG_M0, 0x0004);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_PADJ_M0, 0x0509);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CP_IADJ_M0, 0x0F00);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_FILT_PADJ_M0, 0x0F08);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_INTDIV_M0, 0x0051);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_FRACDIVH_M0, 0x0002);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PLL1_HIGH_THR_M0, 0x0036);\n\t\t\tcdns_torrent_phy_write(regmap, CMN_PDIAG_PLL1_CTRL_M0, 0x0002);\n\t\t}\n\t\tbreak;\n\t}\n}\n\n \nstatic int cdns_torrent_dp_get_pll(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t   enum cdns_torrent_phy_type phy_t2)\n{\n\tswitch (phy_t2) {\n\tcase TYPE_PCIE:\n\tcase TYPE_USB:\n\t\tcdns_phy->dp_pll = DP_PLL1;\n\t\tbreak;\n\tcase TYPE_SGMII:\n\tcase TYPE_QSGMII:\n\t\tcdns_phy->dp_pll = DP_PLL0;\n\t\tbreak;\n\tcase TYPE_NONE:\n\t\tcdns_phy->dp_pll = DP_PLL0 | DP_PLL1;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(cdns_phy->dev, \"Unsupported PHY configuration\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\treturn 0;\n}\n\n \nstatic int cdns_torrent_dp_set_pll_en(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t      struct cdns_torrent_inst *inst,\n\t\t\t\t      struct phy_configure_opts_dp *dp,\n\t\t\t\t      bool enable)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\tu32 rd_val, pll_ack_val;\n\tint ret;\n\n\t \n\tu32 pll_bits;\n\t \n\tu32 pll_val;\n\n\t \n\tpll_val = cdns_torrent_dp_read(regmap, PHY_PMA_XCVR_PLLCLK_EN);\n\n\tif (enable) {\n\t\tpll_bits = ((1 << dp->lanes) - 1);\n\t\tpll_val |= pll_bits;\n\t\tpll_ack_val = pll_bits;\n\t} else {\n\t\tpll_bits = ((1 << inst->num_lanes) - 1);\n\t\tpll_val &= (~pll_bits);\n\t\tpll_ack_val = 0;\n\t}\n\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_PLLCLK_EN, pll_val);\n\n\t \n\tret = regmap_read_poll_timeout(regmap,\n\t\t\t\t       PHY_PMA_XCVR_PLLCLK_EN_ACK,\n\t\t\t\t       rd_val,\n\t\t\t\t       (rd_val & pll_bits) == pll_ack_val,\n\t\t\t\t       0, POLL_TIMEOUT_US);\n\tndelay(100);\n\treturn ret;\n}\n\nstatic int cdns_torrent_dp_set_power_state(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t   struct cdns_torrent_inst *inst,\n\t\t\t\t\t   u32 num_lanes,\n\t\t\t\t\t   enum phy_powerstate powerstate)\n{\n\t \n\tu32 value_part, i;\n\tu32 value = 0;\n\tu32 mask = 0;\n\tu32 read_val;\n\tint ret;\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\n\tswitch (powerstate) {\n\tcase (POWERSTATE_A0):\n\t\tvalue_part = 0x01U;\n\t\tbreak;\n\tcase (POWERSTATE_A2):\n\t\tvalue_part = 0x04U;\n\t\tbreak;\n\tdefault:\n\t\t \n\t\tvalue_part = 0x08U;\n\t\tbreak;\n\t}\n\n\t \n\n\tfor (i = 0; i < num_lanes; i++) {\n\t\tvalue |= (value_part << PHY_POWER_STATE_LN(i));\n\t\tmask |= (PMA_XCVR_POWER_STATE_REQ_LN_MASK << PHY_POWER_STATE_LN(i));\n\t}\n\n\t \n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_POWER_STATE_REQ, value);\n\t \n\tret = regmap_read_poll_timeout(regmap, PHY_PMA_XCVR_POWER_STATE_ACK,\n\t\t\t\t       read_val, (read_val & mask) == value, 0,\n\t\t\t\t       POLL_TIMEOUT_US);\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_POWER_STATE_REQ, 0x00000000);\n\tndelay(100);\n\n\treturn ret;\n}\n\nstatic int cdns_torrent_dp_run(struct cdns_torrent_phy *cdns_phy,\n\t\t\t       struct cdns_torrent_inst *inst, u32 num_lanes)\n{\n\tunsigned int read_val;\n\tint ret;\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\n\t \n\tret = regmap_read_poll_timeout(regmap, PHY_PMA_XCVR_PLLCLK_EN_ACK,\n\t\t\t\t       read_val, read_val & 1,\n\t\t\t\t       0, POLL_TIMEOUT_US);\n\tif (ret == -ETIMEDOUT) {\n\t\tdev_err(cdns_phy->dev,\n\t\t\t\"timeout waiting for link PLL clock enable ack\\n\");\n\t\treturn ret;\n\t}\n\n\tndelay(100);\n\n\tret = cdns_torrent_dp_set_power_state(cdns_phy, inst, num_lanes,\n\t\t\t\t\t      POWERSTATE_A2);\n\tif (ret)\n\t\treturn ret;\n\n\tret = cdns_torrent_dp_set_power_state(cdns_phy, inst, num_lanes,\n\t\t\t\t\t      POWERSTATE_A0);\n\n\treturn ret;\n}\n\nstatic int cdns_torrent_dp_wait_pma_cmn_ready(struct cdns_torrent_phy *cdns_phy)\n{\n\tunsigned int reg;\n\tint ret;\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\n\tret = regmap_read_poll_timeout(regmap, PHY_PMA_CMN_READY, reg,\n\t\t\t\t       reg & 1, 0, POLL_TIMEOUT_US);\n\tif (ret == -ETIMEDOUT) {\n\t\tdev_err(cdns_phy->dev,\n\t\t\t\"timeout waiting for PMA common ready\\n\");\n\t\treturn -ETIMEDOUT;\n\t}\n\n\treturn 0;\n}\n\nstatic void cdns_torrent_dp_pma_cmn_rate(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t struct cdns_torrent_inst *inst,\n\t\t\t\t\t u32 rate, u32 num_lanes)\n{\n\tunsigned int clk_sel_val = 0;\n\tunsigned int hsclk_div_val = 0;\n\tunsigned int i;\n\n\tswitch (rate) {\n\tcase 1620:\n\t\tclk_sel_val = 0x0f01;\n\t\thsclk_div_val = 2;\n\t\tbreak;\n\tcase 2160:\n\tcase 2430:\n\tcase 2700:\n\t\tclk_sel_val = 0x0701;\n\t\thsclk_div_val = 1;\n\t\tbreak;\n\tcase 3240:\n\t\tclk_sel_val = 0x0b00;\n\t\thsclk_div_val = 2;\n\t\tbreak;\n\tcase 4320:\n\tcase 5400:\n\t\tclk_sel_val = 0x0301;\n\t\thsclk_div_val = 0;\n\t\tbreak;\n\tcase 8100:\n\t\tclk_sel_val = 0x0200;\n\t\thsclk_div_val = 0;\n\t\tbreak;\n\t}\n\n\tif (cdns_phy->dp_pll & DP_PLL0)\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_common_cdb,\n\t\t\t\t       CMN_PDIAG_PLL0_CLK_SEL_M0, clk_sel_val);\n\n\tif (cdns_phy->dp_pll & DP_PLL1)\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_common_cdb,\n\t\t\t\t       CMN_PDIAG_PLL1_CLK_SEL_M0, clk_sel_val);\n\n\t \n\tfor (i = 0; i < num_lanes; i++)\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + i],\n\t\t\t\t       XCVR_DIAG_HSCLK_DIV, hsclk_div_val);\n}\n\n \nstatic int cdns_torrent_dp_configure_rate(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t  struct cdns_torrent_inst *inst,\n\t\t\t\t\t  struct phy_configure_opts_dp *dp)\n{\n\tu32 read_val, field_val;\n\tint ret;\n\n\t \n\tret = regmap_field_read(cdns_phy->phy_pma_pll_raw_ctrl, &field_val);\n\tif (ret)\n\t\treturn ret;\n\tfield_val &= ~(cdns_phy->dp_pll);\n\tregmap_field_write(cdns_phy->phy_pma_pll_raw_ctrl, field_val);\n\n\t \n\tif (cdns_phy->dp_pll & DP_PLL0) {\n\t\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pma_cmn_ctrl_2,\n\t\t\t\t\t\t     read_val,\n\t\t\t\t\t\t     ((read_val >> 2) & 0x01) != 0,\n\t\t\t\t\t\t     0, POLL_TIMEOUT_US);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif ((cdns_phy->dp_pll & DP_PLL1) && cdns_phy->nsubnodes != 1) {\n\t\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pma_cmn_ctrl_2,\n\t\t\t\t\t\t     read_val,\n\t\t\t\t\t\t     ((read_val >> 3) & 0x01) != 0,\n\t\t\t\t\t\t     0, POLL_TIMEOUT_US);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\tndelay(200);\n\n\t \n\tif (cdns_phy->ref_clk_rate == CLK_19_2_MHZ)\n\t\t \n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_19_2mhz(cdns_phy, dp->link_rate, dp->ssc);\n\telse if (cdns_phy->ref_clk_rate == CLK_25_MHZ)\n\t\t \n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_25mhz(cdns_phy, dp->link_rate, dp->ssc);\n\telse if (cdns_phy->ref_clk_rate == CLK_100_MHZ)\n\t\t \n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_100mhz(cdns_phy, dp->link_rate, dp->ssc);\n\n\tcdns_torrent_dp_pma_cmn_rate(cdns_phy, inst, dp->link_rate, dp->lanes);\n\n\t \n\tret = regmap_field_read(cdns_phy->phy_pma_pll_raw_ctrl, &field_val);\n\tif (ret)\n\t\treturn ret;\n\tfield_val |= cdns_phy->dp_pll;\n\tregmap_field_write(cdns_phy->phy_pma_pll_raw_ctrl, field_val);\n\n\t \n\tif (cdns_phy->dp_pll & DP_PLL0) {\n\t\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pma_cmn_ctrl_2,\n\t\t\t\t\t\t     read_val,\n\t\t\t\t\t\t     (read_val & 0x01) != 0,\n\t\t\t\t\t\t     0, POLL_TIMEOUT_US);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif ((cdns_phy->dp_pll & DP_PLL1) && cdns_phy->nsubnodes != 1)\n\t\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pma_cmn_ctrl_2,\n\t\t\t\t\t\t     read_val,\n\t\t\t\t\t\t     ((read_val >> 1) & 0x01) != 0,\n\t\t\t\t\t\t     0, POLL_TIMEOUT_US);\n\n\treturn ret;\n}\n\n \nstatic int cdns_torrent_dp_verify_config(struct cdns_torrent_inst *inst,\n\t\t\t\t\t struct phy_configure_opts_dp *dp)\n{\n\tu8 i;\n\n\t \n\tif (dp->set_rate) {\n\t\tswitch (dp->link_rate) {\n\t\tcase 1620:\n\t\tcase 2160:\n\t\tcase 2430:\n\t\tcase 2700:\n\t\tcase 3240:\n\t\tcase 4320:\n\t\tcase 5400:\n\t\tcase 8100:\n\t\t\t \n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn -EINVAL;\n\t\t}\n\t}\n\n\t \n\tswitch (dp->lanes) {\n\tcase 1:\n\tcase 2:\n\tcase 4:\n\t\t \n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\t \n\tif (dp->lanes > inst->num_lanes)\n\t\treturn -EINVAL;\n\n\t \n\tif (dp->set_voltages) {\n\t\t \n\t\tfor (i = 0; i < dp->lanes; i++) {\n\t\t\tif (dp->voltage[i] > 3 || dp->pre[i] > 3)\n\t\t\t\treturn -EINVAL;\n\n\t\t\t \n\t\t\tif (dp->voltage[i] + dp->pre[i] > 3)\n\t\t\t\treturn -EINVAL;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n \nstatic void cdns_torrent_dp_set_a0_pll(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t       struct cdns_torrent_inst *inst,\n\t\t\t\t       u32 num_lanes)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\tu32 pwr_state = cdns_torrent_dp_read(regmap,\n\t\t\t\t\t     PHY_PMA_XCVR_POWER_STATE_REQ);\n\tu32 pll_clk_en = cdns_torrent_dp_read(regmap,\n\t\t\t\t\t      PHY_PMA_XCVR_PLLCLK_EN);\n\tu32 i;\n\n\tfor (i = 0; i < num_lanes; i++) {\n\t\tpwr_state &= ~(PMA_XCVR_POWER_STATE_REQ_LN_MASK\n\t\t\t     << PHY_POWER_STATE_LN(inst->mlane + i));\n\n\t\tpll_clk_en &= ~(0x01U << (inst->mlane + i));\n\t}\n\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_POWER_STATE_REQ, pwr_state);\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_PLLCLK_EN, pll_clk_en);\n}\n\n \nstatic int cdns_torrent_dp_set_lanes(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t     struct cdns_torrent_inst *inst,\n\t\t\t\t     struct phy_configure_opts_dp *dp)\n{\n\tu32 value, i;\n\tint ret;\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\tu8 lane_mask = (1 << dp->lanes) - 1;\n\tu8 pma_tx_elec_idle_mask = 0;\n\tu32 clane = inst->mlane;\n\n\tlane_mask <<= clane;\n\n\tvalue = cdns_torrent_dp_read(regmap, PHY_RESET);\n\t \n\tpma_tx_elec_idle_mask = ((1 << inst->num_lanes) - 1) << clane;\n\n\tpma_tx_elec_idle_mask <<= PMA_TX_ELEC_IDLE_SHIFT;\n\n\tvalue &= ~pma_tx_elec_idle_mask;\n\n\t \n\tvalue |= ((~lane_mask) << PMA_TX_ELEC_IDLE_SHIFT) &\n\t\t pma_tx_elec_idle_mask;\n\n\tcdns_torrent_dp_write(regmap, PHY_RESET, value);\n\n\t \n\tcdns_torrent_dp_write(regmap, PHY_RESET,\n\t\t\t      value & (~(1 << clane)));\n\n\t \n\tfor (i = 0; i < inst->num_lanes; i++)\n\t\tvalue &= (~(1 << (clane + i)));\n\n\tfor (i = 1; i < inst->num_lanes; i++)\n\t\tvalue |= ((1 << (clane + i)) & lane_mask);\n\n\tcdns_torrent_dp_write(regmap, PHY_RESET, value);\n\n\tcdns_torrent_dp_set_a0_pll(cdns_phy, inst, dp->lanes);\n\n\t \n\tfor (i = 0; i < inst->num_lanes; i++)\n\t\tvalue &= (~(1 << (clane + i)));\n\n\tfor (i = 0; i < inst->num_lanes; i++)\n\t\tvalue |= ((1 << (clane + i)) & lane_mask);\n\n\tcdns_torrent_dp_write(regmap, PHY_RESET, value);\n\n\t \n\tret = cdns_torrent_dp_wait_pma_cmn_ready(cdns_phy);\n\tif (ret)\n\t\treturn ret;\n\n\tndelay(100);\n\n\t \n\tvalue = cdns_torrent_dp_read(regmap, PHY_PMA_XCVR_PLLCLK_EN);\n\tvalue |= (1 << clane);\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_PLLCLK_EN, value);\n\n\tret = cdns_torrent_dp_run(cdns_phy, inst, dp->lanes);\n\n\treturn ret;\n}\n\n \nstatic int cdns_torrent_dp_set_rate(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t    struct cdns_torrent_inst *inst,\n\t\t\t\t    struct phy_configure_opts_dp *dp)\n{\n\tint ret;\n\n\tret = cdns_torrent_dp_set_power_state(cdns_phy, inst, dp->lanes,\n\t\t\t\t\t      POWERSTATE_A3);\n\tif (ret)\n\t\treturn ret;\n\tret = cdns_torrent_dp_set_pll_en(cdns_phy, inst, dp, false);\n\tif (ret)\n\t\treturn ret;\n\tndelay(200);\n\n\tret = cdns_torrent_dp_configure_rate(cdns_phy, inst, dp);\n\tif (ret)\n\t\treturn ret;\n\tndelay(200);\n\n\tret = cdns_torrent_dp_set_pll_en(cdns_phy, inst, dp, true);\n\tif (ret)\n\t\treturn ret;\n\tret = cdns_torrent_dp_set_power_state(cdns_phy, inst, dp->lanes,\n\t\t\t\t\t      POWERSTATE_A2);\n\tif (ret)\n\t\treturn ret;\n\tret = cdns_torrent_dp_set_power_state(cdns_phy, inst, dp->lanes,\n\t\t\t\t\t      POWERSTATE_A0);\n\tif (ret)\n\t\treturn ret;\n\tndelay(900);\n\n\treturn ret;\n}\n\n \nstatic void cdns_torrent_dp_set_voltages(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t struct cdns_torrent_inst *inst,\n\t\t\t\t\t struct phy_configure_opts_dp *dp)\n{\n\tu8 lane;\n\tu16 val;\n\n\tfor (lane = 0; lane < dp->lanes; lane++) {\n\t\tval = cdns_torrent_phy_read(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t\t    TX_DIAG_ACYA);\n\t\t \n\t\tval |= TX_DIAG_ACYA_HBDC_MASK;\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       TX_DIAG_ACYA, val);\n\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       TX_TXCC_CTRL, 0x08A4);\n\t\tval = vltg_coeff[dp->voltage[lane]][dp->pre[lane]].diag_tx_drv;\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       DRV_DIAG_TX_DRV, val);\n\t\tval = vltg_coeff[dp->voltage[lane]][dp->pre[lane]].mgnfs_mult;\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       TX_TXCC_MGNFS_MULT_000,\n\t\t\t\t       val);\n\t\tval = vltg_coeff[dp->voltage[lane]][dp->pre[lane]].cpost_mult;\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       TX_TXCC_CPOST_MULT_00,\n\t\t\t\t       val);\n\n\t\tval = cdns_torrent_phy_read(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t\t    TX_DIAG_ACYA);\n\t\t \n\t\tval &= ~TX_DIAG_ACYA_HBDC_MASK;\n\t\tcdns_torrent_phy_write(cdns_phy->regmap_tx_lane_cdb[inst->mlane + lane],\n\t\t\t\t       TX_DIAG_ACYA, val);\n\t}\n};\n\nstatic int cdns_torrent_dp_configure(struct phy *phy,\n\t\t\t\t     union phy_configure_opts *opts)\n{\n\tstruct cdns_torrent_inst *inst = phy_get_drvdata(phy);\n\tstruct cdns_torrent_phy *cdns_phy = dev_get_drvdata(phy->dev.parent);\n\tint ret;\n\n\tret = cdns_torrent_dp_verify_config(inst, &opts->dp);\n\tif (ret) {\n\t\tdev_err(&phy->dev, \"invalid params for phy configure\\n\");\n\t\treturn ret;\n\t}\n\n\tif (opts->dp.set_lanes) {\n\t\tret = cdns_torrent_dp_set_lanes(cdns_phy, inst, &opts->dp);\n\t\tif (ret) {\n\t\t\tdev_err(&phy->dev, \"cdns_torrent_dp_set_lanes failed\\n\");\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\tif (opts->dp.set_rate) {\n\t\tret = cdns_torrent_dp_set_rate(cdns_phy, inst, &opts->dp);\n\t\tif (ret) {\n\t\t\tdev_err(&phy->dev, \"cdns_torrent_dp_set_rate failed\\n\");\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\tif (opts->dp.set_voltages)\n\t\tcdns_torrent_dp_set_voltages(cdns_phy, inst, &opts->dp);\n\n\treturn ret;\n}\n\nstatic int cdns_torrent_phy_on(struct phy *phy)\n{\n\tstruct cdns_torrent_inst *inst = phy_get_drvdata(phy);\n\tstruct cdns_torrent_phy *cdns_phy = dev_get_drvdata(phy->dev.parent);\n\tu32 read_val;\n\tint ret;\n\n\tif (cdns_phy->nsubnodes == 1) {\n\t\t \n\t\treset_control_deassert(inst->lnk_rst);\n\n\t\t \n\t\tret = reset_control_deassert(cdns_phy->phy_rst);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\t \n\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pma_cmn_ctrl_1,\n\t\t\t\t\t     read_val, read_val, 1000,\n\t\t\t\t\t     PLL_LOCK_TIMEOUT);\n\tif (ret) {\n\t\tdev_err(cdns_phy->dev, \"Timeout waiting for CMN ready\\n\");\n\t\treturn ret;\n\t}\n\n\tif (inst->phy_type == TYPE_PCIE || inst->phy_type == TYPE_USB) {\n\t\tret = regmap_field_read_poll_timeout(cdns_phy->phy_pcs_iso_link_ctrl_1[inst->mlane],\n\t\t\t\t\t\t     read_val, !read_val, 1000,\n\t\t\t\t\t\t     PLL_LOCK_TIMEOUT);\n\t\tif (ret == -ETIMEDOUT) {\n\t\t\tdev_err(cdns_phy->dev, \"Timeout waiting for PHY status ready\\n\");\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_phy_off(struct phy *phy)\n{\n\tstruct cdns_torrent_inst *inst = phy_get_drvdata(phy);\n\tstruct cdns_torrent_phy *cdns_phy = dev_get_drvdata(phy->dev.parent);\n\tint ret;\n\n\tif (cdns_phy->nsubnodes != 1)\n\t\treturn 0;\n\n\tret = reset_control_assert(cdns_phy->phy_rst);\n\tif (ret)\n\t\treturn ret;\n\n\treturn reset_control_assert(inst->lnk_rst);\n}\n\nstatic void cdns_torrent_dp_common_init(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\tstruct cdns_torrent_inst *inst)\n{\n\tstruct regmap *regmap = cdns_phy->regmap_dptx_phy_reg;\n\tunsigned char lane_bits;\n\tu32 val;\n\n\tcdns_torrent_dp_write(regmap, PHY_AUX_CTRL, 0x0003);  \n\n\t \n\tcdns_torrent_dp_set_a0_pll(cdns_phy, inst, inst->num_lanes);\n\n\t \n\tlane_bits = (1 << inst->num_lanes) - 1;\n\n\tval = cdns_torrent_dp_read(regmap, PHY_RESET);\n\tval |= (0xF & lane_bits);\n\tval &= ~(lane_bits << 4);\n\tcdns_torrent_dp_write(regmap, PHY_RESET, val);\n\n\t \n\tval = cdns_torrent_dp_read(regmap, PHY_PMA_XCVR_PLLCLK_EN);\n\tval |= 1;\n\tcdns_torrent_dp_write(regmap, PHY_PMA_XCVR_PLLCLK_EN, val);\n\n\t \n\tif (cdns_phy->ref_clk_rate == CLK_19_2_MHZ)\n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_19_2mhz(cdns_phy,\n\t\t\t\t\t\t\tcdns_phy->max_bit_rate,\n\t\t\t\t\t\t\tfalse);\n\telse if (cdns_phy->ref_clk_rate == CLK_25_MHZ)\n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_25mhz(cdns_phy,\n\t\t\t\t\t\t      cdns_phy->max_bit_rate,\n\t\t\t\t\t\t      false);\n\telse if (cdns_phy->ref_clk_rate == CLK_100_MHZ)\n\t\tcdns_torrent_dp_pma_cmn_vco_cfg_100mhz(cdns_phy,\n\t\t\t\t\t\t       cdns_phy->max_bit_rate,\n\t\t\t\t\t\t       false);\n\n\tcdns_torrent_dp_pma_cmn_rate(cdns_phy, inst, cdns_phy->max_bit_rate,\n\t\t\t\t     inst->num_lanes);\n\n\t \n\tregmap_field_write(cdns_phy->phy_reset_ctrl, 0x1);\n}\n\nstatic int cdns_torrent_dp_start(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t struct cdns_torrent_inst *inst,\n\t\t\t\t struct phy *phy)\n{\n\tint ret;\n\n\tret = cdns_torrent_phy_on(phy);\n\tif (ret)\n\t\treturn ret;\n\n\tret = cdns_torrent_dp_wait_pma_cmn_ready(cdns_phy);\n\tif (ret)\n\t\treturn ret;\n\n\tret = cdns_torrent_dp_run(cdns_phy, inst, inst->num_lanes);\n\n\treturn ret;\n}\n\nstatic int cdns_torrent_dp_init(struct phy *phy)\n{\n\tstruct cdns_torrent_inst *inst = phy_get_drvdata(phy);\n\tstruct cdns_torrent_phy *cdns_phy = dev_get_drvdata(phy->dev.parent);\n\tint ret;\n\n\tswitch (cdns_phy->ref_clk_rate) {\n\tcase CLK_19_2_MHZ:\n\tcase CLK_25_MHZ:\n\tcase CLK_100_MHZ:\n\t\t \n\t\tbreak;\n\tdefault:\n\t\tdev_err(cdns_phy->dev, \"Unsupported Ref Clock Rate\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tret = cdns_torrent_dp_get_pll(cdns_phy, TYPE_NONE);\n\tif (ret)\n\t\treturn ret;\n\n\tcdns_torrent_dp_common_init(cdns_phy, inst);\n\n\treturn cdns_torrent_dp_start(cdns_phy, inst, phy);\n}\n\nstatic int cdns_torrent_dp_multilink_init(struct cdns_torrent_phy *cdns_phy,\n\t\t\t\t\t  struct cdns_torrent_inst *inst,\n\t\t\t\t\t  struct phy *phy)\n{\n\tif (cdns_phy->ref_clk_rate != CLK_100_MHZ) {\n\t\tdev_err(cdns_phy->dev, \"Unsupported Ref Clock Rate\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tcdns_torrent_dp_common_init(cdns_phy, inst);\n\n\treturn cdns_torrent_dp_start(cdns_phy, inst, phy);\n}\n\nstatic int cdns_torrent_derived_refclk_enable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_derived_refclk *derived_refclk = to_cdns_torrent_derived_refclk(hw);\n\n\tregmap_field_write(derived_refclk->cmn_cdiag_refclk_ovrd_4, 1);\n\tregmap_field_write(derived_refclk->phy_pipe_cmn_ctrl1_0, 1);\n\n\treturn 0;\n}\n\nstatic void cdns_torrent_derived_refclk_disable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_derived_refclk *derived_refclk = to_cdns_torrent_derived_refclk(hw);\n\n\tregmap_field_write(derived_refclk->phy_pipe_cmn_ctrl1_0, 0);\n\tregmap_field_write(derived_refclk->cmn_cdiag_refclk_ovrd_4, 0);\n}\n\nstatic int cdns_torrent_derived_refclk_is_enabled(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_derived_refclk *derived_refclk = to_cdns_torrent_derived_refclk(hw);\n\tint val;\n\n\tregmap_field_read(derived_refclk->cmn_cdiag_refclk_ovrd_4, &val);\n\n\treturn !!val;\n}\n\nstatic const struct clk_ops cdns_torrent_derived_refclk_ops = {\n\t.enable = cdns_torrent_derived_refclk_enable,\n\t.disable = cdns_torrent_derived_refclk_disable,\n\t.is_enabled = cdns_torrent_derived_refclk_is_enabled,\n};\n\nstatic int cdns_torrent_derived_refclk_register(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct cdns_torrent_derived_refclk *derived_refclk;\n\tstruct device *dev = cdns_phy->dev;\n\tstruct clk_init_data *init;\n\tconst char *parent_name;\n\tchar clk_name[100];\n\tstruct clk_hw *hw;\n\tstruct clk *clk;\n\tint ret;\n\n\tderived_refclk = devm_kzalloc(dev, sizeof(*derived_refclk), GFP_KERNEL);\n\tif (!derived_refclk)\n\t\treturn -ENOMEM;\n\n\tsnprintf(clk_name, sizeof(clk_name), \"%s_%s\", dev_name(dev),\n\t\t clk_names[CDNS_TORRENT_DERIVED_REFCLK]);\n\n\tclk = devm_clk_get_optional(dev, \"phy_en_refclk\");\n\tif (IS_ERR(clk)) {\n\t\tdev_err(dev, \"No parent clock for derived_refclk\\n\");\n\t\treturn PTR_ERR(clk);\n\t}\n\n\tinit = &derived_refclk->clk_data;\n\n\tif (clk) {\n\t\tparent_name = __clk_get_name(clk);\n\t\tinit->parent_names = &parent_name;\n\t\tinit->num_parents = 1;\n\t}\n\tinit->ops = &cdns_torrent_derived_refclk_ops;\n\tinit->flags = 0;\n\tinit->name = clk_name;\n\n\tderived_refclk->phy_pipe_cmn_ctrl1_0 = cdns_phy->phy_pipe_cmn_ctrl1_0;\n\tderived_refclk->cmn_cdiag_refclk_ovrd_4 = cdns_phy->cmn_cdiag_refclk_ovrd_4;\n\n\tderived_refclk->hw.init = init;\n\n\thw = &derived_refclk->hw;\n\tret = devm_clk_hw_register(dev, hw);\n\tif (ret)\n\t\treturn ret;\n\n\tcdns_phy->clk_hw_data->hws[CDNS_TORRENT_DERIVED_REFCLK] = hw;\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_received_refclk_enable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_received_refclk *received_refclk = to_cdns_torrent_received_refclk(hw);\n\n\tregmap_field_write(received_refclk->phy_pipe_cmn_ctrl1_0, 1);\n\n\treturn 0;\n}\n\nstatic void cdns_torrent_received_refclk_disable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_received_refclk *received_refclk = to_cdns_torrent_received_refclk(hw);\n\n\tregmap_field_write(received_refclk->phy_pipe_cmn_ctrl1_0, 0);\n}\n\nstatic int cdns_torrent_received_refclk_is_enabled(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_received_refclk *received_refclk = to_cdns_torrent_received_refclk(hw);\n\tint val, cmn_val;\n\n\tregmap_field_read(received_refclk->phy_pipe_cmn_ctrl1_0, &val);\n\tregmap_field_read(received_refclk->cmn_cdiag_refclk_ovrd_4, &cmn_val);\n\n\treturn val && !cmn_val;\n}\n\nstatic const struct clk_ops cdns_torrent_received_refclk_ops = {\n\t.enable = cdns_torrent_received_refclk_enable,\n\t.disable = cdns_torrent_received_refclk_disable,\n\t.is_enabled = cdns_torrent_received_refclk_is_enabled,\n};\n\nstatic int cdns_torrent_received_refclk_register(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct cdns_torrent_received_refclk *received_refclk;\n\tstruct device *dev = cdns_phy->dev;\n\tstruct clk_init_data *init;\n\tconst char *parent_name;\n\tchar clk_name[100];\n\tstruct clk_hw *hw;\n\tstruct clk *clk;\n\tint ret;\n\n\treceived_refclk = devm_kzalloc(dev, sizeof(*received_refclk), GFP_KERNEL);\n\tif (!received_refclk)\n\t\treturn -ENOMEM;\n\n\tsnprintf(clk_name, sizeof(clk_name), \"%s_%s\", dev_name(dev),\n\t\t clk_names[CDNS_TORRENT_RECEIVED_REFCLK]);\n\n\tclk = devm_clk_get_optional(dev, \"phy_en_refclk\");\n\tif (IS_ERR(clk)) {\n\t\tdev_err(dev, \"No parent clock for received_refclk\\n\");\n\t\treturn PTR_ERR(clk);\n\t}\n\n\tinit = &received_refclk->clk_data;\n\n\tif (clk) {\n\t\tparent_name = __clk_get_name(clk);\n\t\tinit->parent_names = &parent_name;\n\t\tinit->num_parents = 1;\n\t}\n\tinit->ops = &cdns_torrent_received_refclk_ops;\n\tinit->flags = 0;\n\tinit->name = clk_name;\n\n\treceived_refclk->phy_pipe_cmn_ctrl1_0 = cdns_phy->phy_pipe_cmn_ctrl1_0;\n\treceived_refclk->cmn_cdiag_refclk_ovrd_4 = cdns_phy->cmn_cdiag_refclk_ovrd_4;\n\n\treceived_refclk->hw.init = init;\n\n\thw = &received_refclk->hw;\n\tret = devm_clk_hw_register(dev, hw);\n\tif (ret)\n\t\treturn ret;\n\n\tcdns_phy->clk_hw_data->hws[CDNS_TORRENT_RECEIVED_REFCLK] = hw;\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_refclk_driver_enable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver = to_cdns_torrent_refclk_driver(hw);\n\n\tregmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_6], 0);\n\tregmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_5], 1);\n\tregmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_1], 0);\n\n\treturn 0;\n}\n\nstatic void cdns_torrent_refclk_driver_disable(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver = to_cdns_torrent_refclk_driver(hw);\n\n\tregmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_1], 1);\n}\n\nstatic int cdns_torrent_refclk_driver_is_enabled(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver = to_cdns_torrent_refclk_driver(hw);\n\tint val;\n\n\tregmap_field_read(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_1], &val);\n\n\treturn !val;\n}\n\nstatic u8 cdns_torrent_refclk_driver_get_parent(struct clk_hw *hw)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver = to_cdns_torrent_refclk_driver(hw);\n\tunsigned int val;\n\n\tregmap_field_read(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_4], &val);\n\treturn clk_mux_val_to_index(hw, cdns_torrent_refclk_driver_mux_table, 0, val);\n}\n\nstatic int cdns_torrent_refclk_driver_set_parent(struct clk_hw *hw, u8 index)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver = to_cdns_torrent_refclk_driver(hw);\n\tunsigned int val;\n\n\tval = cdns_torrent_refclk_driver_mux_table[index];\n\treturn regmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_4], val);\n}\n\nstatic const struct clk_ops cdns_torrent_refclk_driver_ops = {\n\t.enable = cdns_torrent_refclk_driver_enable,\n\t.disable = cdns_torrent_refclk_driver_disable,\n\t.is_enabled = cdns_torrent_refclk_driver_is_enabled,\n\t.determine_rate = __clk_mux_determine_rate,\n\t.set_parent = cdns_torrent_refclk_driver_set_parent,\n\t.get_parent = cdns_torrent_refclk_driver_get_parent,\n};\n\nstatic int cdns_torrent_refclk_driver_register(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct cdns_torrent_refclk_driver *refclk_driver;\n\tstruct device *dev = cdns_phy->dev;\n\tstruct regmap_field *field;\n\tstruct clk_init_data *init;\n\tconst char **parent_names;\n\tunsigned int num_parents;\n\tstruct regmap *regmap;\n\tchar clk_name[100];\n\tstruct clk_hw *hw;\n\tint i, ret;\n\n\trefclk_driver = devm_kzalloc(dev, sizeof(*refclk_driver), GFP_KERNEL);\n\tif (!refclk_driver)\n\t\treturn -ENOMEM;\n\n\tnum_parents = ARRAY_SIZE(refclk_driver_parent_index);\n\tparent_names = devm_kzalloc(dev, (sizeof(char *) * num_parents), GFP_KERNEL);\n\tif (!parent_names)\n\t\treturn -ENOMEM;\n\n\tfor (i = 0; i < num_parents; i++) {\n\t\thw = cdns_phy->clk_hw_data->hws[refclk_driver_parent_index[i]];\n\t\tif (IS_ERR_OR_NULL(hw)) {\n\t\t\tdev_err(dev, \"No parent clock for refclk driver clock\\n\");\n\t\t\treturn IS_ERR(hw) ? PTR_ERR(hw) : -ENOENT;\n\t\t}\n\t\tparent_names[i] = clk_hw_get_name(hw);\n\t}\n\n\tsnprintf(clk_name, sizeof(clk_name), \"%s_%s\", dev_name(dev),\n\t\t clk_names[CDNS_TORRENT_REFCLK_DRIVER]);\n\n\tinit = &refclk_driver->clk_data;\n\n\tinit->ops = &cdns_torrent_refclk_driver_ops;\n\tinit->flags = CLK_SET_RATE_NO_REPARENT;\n\tinit->parent_names = parent_names;\n\tinit->num_parents = num_parents;\n\tinit->name = clk_name;\n\n\tregmap = cdns_phy->regmap_common_cdb;\n\n\tfor (i = 0; i < REFCLK_OUT_NUM_CMN_CONFIG; i++) {\n\t\tfield = devm_regmap_field_alloc(dev, regmap, refclk_out_cmn_cfg[i]);\n\t\tif (IS_ERR(field)) {\n\t\t\tdev_err(dev, \"Refclk driver CMN reg field init failed\\n\");\n\t\t\treturn PTR_ERR(field);\n\t\t}\n\t\trefclk_driver->cmn_fields[i] = field;\n\t}\n\n\t \n\tregmap_field_write(refclk_driver->cmn_fields[CMN_CDIAG_REFCLK_DRV0_CTRL_4], 1);\n\n\trefclk_driver->hw.init = init;\n\n\thw = &refclk_driver->hw;\n\tret = devm_clk_hw_register(dev, hw);\n\tif (ret)\n\t\treturn ret;\n\n\tcdns_phy->clk_hw_data->hws[CDNS_TORRENT_REFCLK_DRIVER] = hw;\n\n\treturn 0;\n}\n\nstatic struct regmap *cdns_regmap_init(struct device *dev, void __iomem *base,\n\t\t\t\t       u32 block_offset,\n\t\t\t\t       u8 reg_offset_shift,\n\t\t\t\t       const struct regmap_config *config)\n{\n\tstruct cdns_regmap_cdb_context *ctx;\n\n\tctx = devm_kzalloc(dev, sizeof(*ctx), GFP_KERNEL);\n\tif (!ctx)\n\t\treturn ERR_PTR(-ENOMEM);\n\n\tctx->dev = dev;\n\tctx->base = base + block_offset;\n\tctx->reg_offset_shift = reg_offset_shift;\n\n\treturn devm_regmap_init(dev, NULL, ctx, config);\n}\n\nstatic int cdns_torrent_dp_regfield_init(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\tstruct regmap_field *field;\n\tstruct regmap *regmap;\n\n\tregmap = cdns_phy->regmap_dptx_phy_reg;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_reset_ctrl);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"PHY_RESET reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_reset_ctrl = field;\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_regfield_init(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\tstruct regmap_field *field;\n\tstruct regmap *regmap;\n\tint i;\n\n\tregmap = cdns_phy->regmap_phy_pcs_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_pll_cfg);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"PHY_PLL_CFG reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_pll_cfg = field;\n\n\tregmap = cdns_phy->regmap_phy_pcs_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_pipe_cmn_ctrl1_0);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"phy_pipe_cmn_ctrl1_0 reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_pipe_cmn_ctrl1_0 = field;\n\n\tregmap = cdns_phy->regmap_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, cmn_cdiag_refclk_ovrd_4);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"cmn_cdiag_refclk_ovrd_4 reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->cmn_cdiag_refclk_ovrd_4 = field;\n\n\tregmap = cdns_phy->regmap_phy_pma_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_pma_cmn_ctrl_1);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"PHY_PMA_CMN_CTRL1 reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_pma_cmn_ctrl_1 = field;\n\n\tregmap = cdns_phy->regmap_phy_pma_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_pma_cmn_ctrl_2);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"PHY_PMA_CMN_CTRL2 reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_pma_cmn_ctrl_2 = field;\n\n\tregmap = cdns_phy->regmap_phy_pma_common_cdb;\n\tfield = devm_regmap_field_alloc(dev, regmap, phy_pma_pll_raw_ctrl);\n\tif (IS_ERR(field)) {\n\t\tdev_err(dev, \"PHY_PMA_PLL_RAW_CTRL reg field init failed\\n\");\n\t\treturn PTR_ERR(field);\n\t}\n\tcdns_phy->phy_pma_pll_raw_ctrl = field;\n\n\tfor (i = 0; i < MAX_NUM_LANES; i++) {\n\t\tregmap = cdns_phy->regmap_phy_pcs_lane_cdb[i];\n\t\tfield = devm_regmap_field_alloc(dev, regmap, phy_pcs_iso_link_ctrl_1);\n\t\tif (IS_ERR(field)) {\n\t\t\tdev_err(dev, \"PHY_PCS_ISO_LINK_CTRL reg field init for ln %d failed\\n\", i);\n\t\t\treturn PTR_ERR(field);\n\t\t}\n\t\tcdns_phy->phy_pcs_iso_link_ctrl_1[i] = field;\n\t}\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_dp_regmap_init(struct cdns_torrent_phy *cdns_phy)\n{\n\tvoid __iomem *base = cdns_phy->base;\n\tstruct device *dev = cdns_phy->dev;\n\tstruct regmap *regmap;\n\tu8 reg_offset_shift;\n\tu32 block_offset;\n\n\treg_offset_shift = cdns_phy->init_data->reg_offset_shift;\n\n\tblock_offset = TORRENT_DPTX_PHY_OFFSET;\n\tregmap = cdns_regmap_init(dev, base, block_offset,\n\t\t\t\t  reg_offset_shift,\n\t\t\t\t  &cdns_torrent_dptx_phy_config);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(dev, \"Failed to init DPTX PHY regmap\\n\");\n\t\treturn PTR_ERR(regmap);\n\t}\n\tcdns_phy->regmap_dptx_phy_reg = regmap;\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_regmap_init(struct cdns_torrent_phy *cdns_phy)\n{\n\tvoid __iomem *sd_base = cdns_phy->sd_base;\n\tu8 block_offset_shift, reg_offset_shift;\n\tstruct device *dev = cdns_phy->dev;\n\tstruct regmap *regmap;\n\tu32 block_offset;\n\tint i;\n\n\tblock_offset_shift = cdns_phy->init_data->block_offset_shift;\n\treg_offset_shift = cdns_phy->init_data->reg_offset_shift;\n\n\tfor (i = 0; i < MAX_NUM_LANES; i++) {\n\t\tblock_offset = TORRENT_TX_LANE_CDB_OFFSET(i, block_offset_shift,\n\t\t\t\t\t\t\t  reg_offset_shift);\n\t\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t\t  reg_offset_shift,\n\t\t\t\t\t  &cdns_torrent_tx_lane_cdb_config[i]);\n\t\tif (IS_ERR(regmap)) {\n\t\t\tdev_err(dev, \"Failed to init tx lane CDB regmap\\n\");\n\t\t\treturn PTR_ERR(regmap);\n\t\t}\n\t\tcdns_phy->regmap_tx_lane_cdb[i] = regmap;\n\n\t\tblock_offset = TORRENT_RX_LANE_CDB_OFFSET(i, block_offset_shift,\n\t\t\t\t\t\t\t  reg_offset_shift);\n\t\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t\t  reg_offset_shift,\n\t\t\t\t\t  &cdns_torrent_rx_lane_cdb_config[i]);\n\t\tif (IS_ERR(regmap)) {\n\t\t\tdev_err(dev, \"Failed to init rx lane CDB regmap\\n\");\n\t\t\treturn PTR_ERR(regmap);\n\t\t}\n\t\tcdns_phy->regmap_rx_lane_cdb[i] = regmap;\n\n\t\tblock_offset = TORRENT_PHY_PCS_LANE_CDB_OFFSET(i, block_offset_shift,\n\t\t\t\t\t\t\t       reg_offset_shift);\n\t\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t\t  reg_offset_shift,\n\t\t\t\t\t  &cdns_torrent_phy_pcs_lane_cdb_config[i]);\n\t\tif (IS_ERR(regmap)) {\n\t\t\tdev_err(dev, \"Failed to init PHY PCS lane CDB regmap\\n\");\n\t\t\treturn PTR_ERR(regmap);\n\t\t}\n\t\tcdns_phy->regmap_phy_pcs_lane_cdb[i] = regmap;\n\t}\n\n\tblock_offset = TORRENT_COMMON_CDB_OFFSET;\n\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t  reg_offset_shift,\n\t\t\t\t  &cdns_torrent_common_cdb_config);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(dev, \"Failed to init common CDB regmap\\n\");\n\t\treturn PTR_ERR(regmap);\n\t}\n\tcdns_phy->regmap_common_cdb = regmap;\n\n\tblock_offset = TORRENT_PHY_PCS_COMMON_OFFSET(block_offset_shift);\n\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t  reg_offset_shift,\n\t\t\t\t  &cdns_torrent_phy_pcs_cmn_cdb_config);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(dev, \"Failed to init PHY PCS common CDB regmap\\n\");\n\t\treturn PTR_ERR(regmap);\n\t}\n\tcdns_phy->regmap_phy_pcs_common_cdb = regmap;\n\n\tblock_offset = TORRENT_PHY_PMA_COMMON_OFFSET(block_offset_shift);\n\tregmap = cdns_regmap_init(dev, sd_base, block_offset,\n\t\t\t\t  reg_offset_shift,\n\t\t\t\t  &cdns_torrent_phy_pma_cmn_cdb_config);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(dev, \"Failed to init PHY PMA common CDB regmap\\n\");\n\t\treturn PTR_ERR(regmap);\n\t}\n\tcdns_phy->regmap_phy_pma_common_cdb = regmap;\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_phy_init(struct phy *phy)\n{\n\tstruct cdns_torrent_phy *cdns_phy = dev_get_drvdata(phy->dev.parent);\n\tconst struct cdns_torrent_data *init_data = cdns_phy->init_data;\n\tstruct cdns_torrent_vals *cmn_vals, *tx_ln_vals, *rx_ln_vals;\n\tenum cdns_torrent_ref_clk ref_clk = cdns_phy->ref_clk_rate;\n\tstruct cdns_torrent_vals *link_cmn_vals, *xcvr_diag_vals;\n\tstruct cdns_torrent_inst *inst = phy_get_drvdata(phy);\n\tenum cdns_torrent_phy_type phy_type = inst->phy_type;\n\tenum cdns_torrent_ssc_mode ssc = inst->ssc_mode;\n\tstruct cdns_torrent_vals *phy_pma_cmn_vals;\n\tstruct cdns_torrent_vals *pcs_cmn_vals;\n\tstruct cdns_reg_pairs *reg_pairs;\n\tstruct regmap *regmap;\n\tu32 num_regs;\n\tint i, j;\n\n\tif (cdns_phy->nsubnodes > 1) {\n\t\tif (phy_type == TYPE_DP)\n\t\t\treturn cdns_torrent_dp_multilink_init(cdns_phy, inst, phy);\n\t\treturn 0;\n\t}\n\n\t \n\tif (phy_type == TYPE_SGMII || phy_type == TYPE_QSGMII || phy_type == TYPE_USXGMII)\n\t\tssc = NO_SSC;\n\n\t \n\tlink_cmn_vals = cdns_torrent_get_tbl_vals(&init_data->link_cmn_vals_tbl,\n\t\t\t\t\t\t  CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t  phy_type, TYPE_NONE,\n\t\t\t\t\t\t  ANY_SSC);\n\tif (link_cmn_vals) {\n\t\treg_pairs = link_cmn_vals->reg_pairs;\n\t\tnum_regs = link_cmn_vals->num_regs;\n\t\tregmap = cdns_phy->regmap_common_cdb;\n\n\t\t \n\t\tregmap_field_write(cdns_phy->phy_pll_cfg, reg_pairs[0].val);\n\n\t\tfor (i = 1; i < num_regs; i++)\n\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t     reg_pairs[i].val);\n\t}\n\n\txcvr_diag_vals = cdns_torrent_get_tbl_vals(&init_data->xcvr_diag_vals_tbl,\n\t\t\t\t\t\t   CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t   phy_type, TYPE_NONE,\n\t\t\t\t\t\t   ANY_SSC);\n\tif (xcvr_diag_vals) {\n\t\treg_pairs = xcvr_diag_vals->reg_pairs;\n\t\tnum_regs = xcvr_diag_vals->num_regs;\n\t\tfor (i = 0; i < inst->num_lanes; i++) {\n\t\t\tregmap = cdns_phy->regmap_tx_lane_cdb[i + inst->mlane];\n\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t     reg_pairs[j].val);\n\t\t}\n\t}\n\n\t \n\tpcs_cmn_vals = cdns_torrent_get_tbl_vals(&init_data->pcs_cmn_vals_tbl,\n\t\t\t\t\t\t CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t phy_type, TYPE_NONE,\n\t\t\t\t\t\t ANY_SSC);\n\tif (pcs_cmn_vals) {\n\t\treg_pairs = pcs_cmn_vals->reg_pairs;\n\t\tnum_regs = pcs_cmn_vals->num_regs;\n\t\tregmap = cdns_phy->regmap_phy_pcs_common_cdb;\n\t\tfor (i = 0; i < num_regs; i++)\n\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t     reg_pairs[i].val);\n\t}\n\n\t \n\tphy_pma_cmn_vals = cdns_torrent_get_tbl_vals(&init_data->phy_pma_cmn_vals_tbl,\n\t\t\t\t\t\t     CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t     phy_type, TYPE_NONE,\n\t\t\t\t\t\t     ANY_SSC);\n\tif (phy_pma_cmn_vals) {\n\t\treg_pairs = phy_pma_cmn_vals->reg_pairs;\n\t\tnum_regs = phy_pma_cmn_vals->num_regs;\n\t\tregmap = cdns_phy->regmap_phy_pma_common_cdb;\n\t\tfor (i = 0; i < num_regs; i++)\n\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t     reg_pairs[i].val);\n\t}\n\n\t \n\tcmn_vals = cdns_torrent_get_tbl_vals(&init_data->cmn_vals_tbl,\n\t\t\t\t\t     ref_clk, ref_clk,\n\t\t\t\t\t     phy_type, TYPE_NONE,\n\t\t\t\t\t     ssc);\n\tif (cmn_vals) {\n\t\treg_pairs = cmn_vals->reg_pairs;\n\t\tnum_regs = cmn_vals->num_regs;\n\t\tregmap = cdns_phy->regmap_common_cdb;\n\t\tfor (i = 0; i < num_regs; i++)\n\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t     reg_pairs[i].val);\n\t}\n\n\t \n\ttx_ln_vals = cdns_torrent_get_tbl_vals(&init_data->tx_ln_vals_tbl,\n\t\t\t\t\t       ref_clk, ref_clk,\n\t\t\t\t\t       phy_type, TYPE_NONE,\n\t\t\t\t\t       ssc);\n\tif (tx_ln_vals) {\n\t\treg_pairs = tx_ln_vals->reg_pairs;\n\t\tnum_regs = tx_ln_vals->num_regs;\n\t\tfor (i = 0; i < inst->num_lanes; i++) {\n\t\t\tregmap = cdns_phy->regmap_tx_lane_cdb[i + inst->mlane];\n\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t     reg_pairs[j].val);\n\t\t}\n\t}\n\n\t \n\trx_ln_vals = cdns_torrent_get_tbl_vals(&init_data->rx_ln_vals_tbl,\n\t\t\t\t\t       ref_clk, ref_clk,\n\t\t\t\t\t       phy_type, TYPE_NONE,\n\t\t\t\t\t       ssc);\n\tif (rx_ln_vals) {\n\t\treg_pairs = rx_ln_vals->reg_pairs;\n\t\tnum_regs = rx_ln_vals->num_regs;\n\t\tfor (i = 0; i < inst->num_lanes; i++) {\n\t\t\tregmap = cdns_phy->regmap_rx_lane_cdb[i + inst->mlane];\n\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t     reg_pairs[j].val);\n\t\t}\n\t}\n\n\tif (phy_type == TYPE_DP)\n\t\treturn cdns_torrent_dp_init(phy);\n\n\treturn 0;\n}\n\nstatic const struct phy_ops cdns_torrent_phy_ops = {\n\t.init\t\t= cdns_torrent_phy_init,\n\t.configure\t= cdns_torrent_dp_configure,\n\t.power_on\t= cdns_torrent_phy_on,\n\t.power_off\t= cdns_torrent_phy_off,\n\t.owner\t\t= THIS_MODULE,\n};\n\nstatic int cdns_torrent_noop_phy_on(struct phy *phy)\n{\n\t \n\tusleep_range(5000, 10000);\n\n\treturn 0;\n}\n\nstatic const struct phy_ops noop_ops = {\n\t.power_on\t= cdns_torrent_noop_phy_on,\n\t.owner\t\t= THIS_MODULE,\n};\n\nstatic\nint cdns_torrent_phy_configure_multilink(struct cdns_torrent_phy *cdns_phy)\n{\n\tconst struct cdns_torrent_data *init_data = cdns_phy->init_data;\n\tstruct cdns_torrent_vals *cmn_vals, *tx_ln_vals, *rx_ln_vals;\n\tenum cdns_torrent_ref_clk ref_clk = cdns_phy->ref_clk_rate;\n\tstruct cdns_torrent_vals *link_cmn_vals, *xcvr_diag_vals;\n\tenum cdns_torrent_phy_type phy_t1, phy_t2;\n\tstruct cdns_torrent_vals *pcs_cmn_vals;\n\tint i, j, node, mlane, num_lanes, ret;\n\tstruct cdns_reg_pairs *reg_pairs;\n\tenum cdns_torrent_ssc_mode ssc;\n\tstruct regmap *regmap;\n\tu32 num_regs;\n\n\t \n\tif (cdns_phy->nsubnodes != 2)\n\t\treturn -EINVAL;\n\n\tphy_t1 = cdns_phy->phys[0].phy_type;\n\tphy_t2 = cdns_phy->phys[1].phy_type;\n\n\t \n\tfor (node = 0; node < cdns_phy->nsubnodes; node++) {\n\t\tif (node == 1) {\n\t\t\t \n\t\t\tswap(phy_t1, phy_t2);\n\t\t}\n\n\t\tmlane = cdns_phy->phys[node].mlane;\n\t\tssc = cdns_phy->phys[node].ssc_mode;\n\t\tnum_lanes = cdns_phy->phys[node].num_lanes;\n\n\t\t \n\t\tlink_cmn_vals = cdns_torrent_get_tbl_vals(&init_data->link_cmn_vals_tbl,\n\t\t\t\t\t\t\t  CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t\t  phy_t1, phy_t2, ANY_SSC);\n\t\tif (link_cmn_vals) {\n\t\t\treg_pairs = link_cmn_vals->reg_pairs;\n\t\t\tnum_regs = link_cmn_vals->num_regs;\n\t\t\tregmap = cdns_phy->regmap_common_cdb;\n\n\t\t\t \n\t\t\tregmap_field_write(cdns_phy->phy_pll_cfg,\n\t\t\t\t\t   reg_pairs[0].val);\n\n\t\t\tfor (i = 1; i < num_regs; i++)\n\t\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t\t     reg_pairs[i].val);\n\t\t}\n\n\t\txcvr_diag_vals = cdns_torrent_get_tbl_vals(&init_data->xcvr_diag_vals_tbl,\n\t\t\t\t\t\t\t   CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t\t   phy_t1, phy_t2, ANY_SSC);\n\t\tif (xcvr_diag_vals) {\n\t\t\treg_pairs = xcvr_diag_vals->reg_pairs;\n\t\t\tnum_regs = xcvr_diag_vals->num_regs;\n\t\t\tfor (i = 0; i < num_lanes; i++) {\n\t\t\t\tregmap = cdns_phy->regmap_tx_lane_cdb[i + mlane];\n\t\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t\t     reg_pairs[j].val);\n\t\t\t}\n\t\t}\n\n\t\t \n\t\tpcs_cmn_vals = cdns_torrent_get_tbl_vals(&init_data->pcs_cmn_vals_tbl,\n\t\t\t\t\t\t\t CLK_ANY, CLK_ANY,\n\t\t\t\t\t\t\t phy_t1, phy_t2, ANY_SSC);\n\t\tif (pcs_cmn_vals) {\n\t\t\treg_pairs = pcs_cmn_vals->reg_pairs;\n\t\t\tnum_regs = pcs_cmn_vals->num_regs;\n\t\t\tregmap = cdns_phy->regmap_phy_pcs_common_cdb;\n\t\t\tfor (i = 0; i < num_regs; i++)\n\t\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t\t     reg_pairs[i].val);\n\t\t}\n\n\t\t \n\t\tcmn_vals = cdns_torrent_get_tbl_vals(&init_data->cmn_vals_tbl,\n\t\t\t\t\t\t     ref_clk, ref_clk,\n\t\t\t\t\t\t     phy_t1, phy_t2, ssc);\n\t\tif (cmn_vals) {\n\t\t\treg_pairs = cmn_vals->reg_pairs;\n\t\t\tnum_regs = cmn_vals->num_regs;\n\t\t\tregmap = cdns_phy->regmap_common_cdb;\n\t\t\tfor (i = 0; i < num_regs; i++)\n\t\t\t\tregmap_write(regmap, reg_pairs[i].off,\n\t\t\t\t\t     reg_pairs[i].val);\n\t\t}\n\n\t\t \n\t\ttx_ln_vals = cdns_torrent_get_tbl_vals(&init_data->tx_ln_vals_tbl,\n\t\t\t\t\t\t       ref_clk, ref_clk,\n\t\t\t\t\t\t       phy_t1, phy_t2, ssc);\n\t\tif (tx_ln_vals) {\n\t\t\treg_pairs = tx_ln_vals->reg_pairs;\n\t\t\tnum_regs = tx_ln_vals->num_regs;\n\t\t\tfor (i = 0; i < num_lanes; i++) {\n\t\t\t\tregmap = cdns_phy->regmap_tx_lane_cdb[i + mlane];\n\t\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t\t     reg_pairs[j].val);\n\t\t\t}\n\t\t}\n\n\t\t \n\t\trx_ln_vals = cdns_torrent_get_tbl_vals(&init_data->rx_ln_vals_tbl,\n\t\t\t\t\t\t       ref_clk, ref_clk,\n\t\t\t\t\t\t       phy_t1, phy_t2, ssc);\n\t\tif (rx_ln_vals) {\n\t\t\treg_pairs = rx_ln_vals->reg_pairs;\n\t\t\tnum_regs = rx_ln_vals->num_regs;\n\t\t\tfor (i = 0; i < num_lanes; i++) {\n\t\t\t\tregmap = cdns_phy->regmap_rx_lane_cdb[i + mlane];\n\t\t\t\tfor (j = 0; j < num_regs; j++)\n\t\t\t\t\tregmap_write(regmap, reg_pairs[j].off,\n\t\t\t\t\t\t     reg_pairs[j].val);\n\t\t\t}\n\t\t}\n\n\t\tif (phy_t1 == TYPE_DP) {\n\t\t\tret = cdns_torrent_dp_get_pll(cdns_phy, phy_t2);\n\t\t\tif (ret)\n\t\t\t\treturn ret;\n\t\t}\n\n\t\treset_control_deassert(cdns_phy->phys[node].lnk_rst);\n\t}\n\n\t \n\tret = reset_control_deassert(cdns_phy->phy_rst);\n\tif (ret)\n\t\treturn ret;\n\n\treturn 0;\n}\n\nstatic void cdns_torrent_clk_cleanup(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\n\tof_clk_del_provider(dev->of_node);\n}\n\nstatic int cdns_torrent_clk_register(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\tstruct device_node *node = dev->of_node;\n\tstruct clk_hw_onecell_data *data;\n\tint ret;\n\n\tdata = devm_kzalloc(dev, struct_size(data, hws, CDNS_TORRENT_OUTPUT_CLOCKS), GFP_KERNEL);\n\tif (!data)\n\t\treturn -ENOMEM;\n\n\tdata->num = CDNS_TORRENT_OUTPUT_CLOCKS;\n\tcdns_phy->clk_hw_data = data;\n\n\tret = cdns_torrent_derived_refclk_register(cdns_phy);\n\tif (ret) {\n\t\tdev_err(dev, \"failed to register derived refclk\\n\");\n\t\treturn ret;\n\t}\n\n\tret = cdns_torrent_received_refclk_register(cdns_phy);\n\tif (ret) {\n\t\tdev_err(dev, \"failed to register received refclk\\n\");\n\t\treturn ret;\n\t}\n\n\tret = cdns_torrent_refclk_driver_register(cdns_phy);\n\tif (ret) {\n\t\tdev_err(dev, \"failed to register refclk driver\\n\");\n\t\treturn ret;\n\t}\n\n\tret = of_clk_add_hw_provider(node, of_clk_hw_onecell_get, data);\n\tif (ret) {\n\t\tdev_err(dev, \"Failed to add clock provider: %s\\n\", node->name);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_reset(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\n\tcdns_phy->phy_rst = devm_reset_control_get_exclusive_by_index(dev, 0);\n\tif (IS_ERR(cdns_phy->phy_rst)) {\n\t\tdev_err(dev, \"%s: failed to get reset\\n\",\n\t\t\tdev->of_node->full_name);\n\t\treturn PTR_ERR(cdns_phy->phy_rst);\n\t}\n\n\tcdns_phy->apb_rst = devm_reset_control_get_optional_exclusive(dev, \"torrent_apb\");\n\tif (IS_ERR(cdns_phy->apb_rst)) {\n\t\tdev_err(dev, \"%s: failed to get apb reset\\n\",\n\t\t\tdev->of_node->full_name);\n\t\treturn PTR_ERR(cdns_phy->apb_rst);\n\t}\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_clk(struct cdns_torrent_phy *cdns_phy)\n{\n\tstruct device *dev = cdns_phy->dev;\n\tunsigned long ref_clk_rate;\n\tint ret;\n\n\tcdns_phy->clk = devm_clk_get(dev, \"refclk\");\n\tif (IS_ERR(cdns_phy->clk)) {\n\t\tdev_err(dev, \"phy ref clock not found\\n\");\n\t\treturn PTR_ERR(cdns_phy->clk);\n\t}\n\n\tret = clk_prepare_enable(cdns_phy->clk);\n\tif (ret) {\n\t\tdev_err(cdns_phy->dev, \"Failed to prepare ref clock\\n\");\n\t\treturn ret;\n\t}\n\n\tref_clk_rate = clk_get_rate(cdns_phy->clk);\n\tif (!ref_clk_rate) {\n\t\tdev_err(cdns_phy->dev, \"Failed to get ref clock rate\\n\");\n\t\tclk_disable_unprepare(cdns_phy->clk);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (ref_clk_rate) {\n\tcase REF_CLK_19_2MHZ:\n\t\tcdns_phy->ref_clk_rate = CLK_19_2_MHZ;\n\t\tbreak;\n\tcase REF_CLK_25MHZ:\n\t\tcdns_phy->ref_clk_rate = CLK_25_MHZ;\n\t\tbreak;\n\tcase REF_CLK_100MHZ:\n\t\tcdns_phy->ref_clk_rate = CLK_100_MHZ;\n\t\tbreak;\n\tcase REF_CLK_156_25MHZ:\n\t\tcdns_phy->ref_clk_rate = CLK_156_25_MHZ;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(cdns_phy->dev, \"Invalid Ref Clock Rate\\n\");\n\t\tclk_disable_unprepare(cdns_phy->clk);\n\t\treturn -EINVAL;\n\t}\n\n\treturn 0;\n}\n\nstatic int cdns_torrent_phy_probe(struct platform_device *pdev)\n{\n\tstruct cdns_torrent_phy *cdns_phy;\n\tstruct device *dev = &pdev->dev;\n\tstruct phy_provider *phy_provider;\n\tconst struct cdns_torrent_data *data;\n\tstruct device_node *child;\n\tint ret, subnodes, node = 0, i;\n\tu32 total_num_lanes = 0;\n\tint already_configured;\n\tu8 init_dp_regmap = 0;\n\tu32 phy_type;\n\n\t \n\tdata = of_device_get_match_data(dev);\n\tif (!data)\n\t\treturn -EINVAL;\n\n\tcdns_phy = devm_kzalloc(dev, sizeof(*cdns_phy), GFP_KERNEL);\n\tif (!cdns_phy)\n\t\treturn -ENOMEM;\n\n\tdev_set_drvdata(dev, cdns_phy);\n\tcdns_phy->dev = dev;\n\tcdns_phy->init_data = data;\n\n\tcdns_phy->sd_base = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(cdns_phy->sd_base))\n\t\treturn PTR_ERR(cdns_phy->sd_base);\n\n\tsubnodes = of_get_available_child_count(dev->of_node);\n\tif (subnodes == 0) {\n\t\tdev_err(dev, \"No available link subnodes found\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tret = cdns_torrent_regmap_init(cdns_phy);\n\tif (ret)\n\t\treturn ret;\n\n\tret = cdns_torrent_regfield_init(cdns_phy);\n\tif (ret)\n\t\treturn ret;\n\n\tret = cdns_torrent_clk_register(cdns_phy);\n\tif (ret)\n\t\treturn ret;\n\n\tregmap_field_read(cdns_phy->phy_pma_cmn_ctrl_1, &already_configured);\n\n\tif (!already_configured) {\n\t\tret = cdns_torrent_reset(cdns_phy);\n\t\tif (ret)\n\t\t\tgoto clk_cleanup;\n\n\t\tret = cdns_torrent_clk(cdns_phy);\n\t\tif (ret)\n\t\t\tgoto clk_cleanup;\n\n\t\t \n\t\treset_control_deassert(cdns_phy->apb_rst);\n\t}\n\n\tfor_each_available_child_of_node(dev->of_node, child) {\n\t\tstruct phy *gphy;\n\n\t\t \n\t\tif (!(of_node_name_eq(child, \"phy\")))\n\t\t\tcontinue;\n\n\t\tcdns_phy->phys[node].lnk_rst =\n\t\t\t\tof_reset_control_array_get_exclusive(child);\n\t\tif (IS_ERR(cdns_phy->phys[node].lnk_rst)) {\n\t\t\tdev_err(dev, \"%s: failed to get reset\\n\",\n\t\t\t\tchild->full_name);\n\t\t\tret = PTR_ERR(cdns_phy->phys[node].lnk_rst);\n\t\t\tgoto put_lnk_rst;\n\t\t}\n\n\t\tif (of_property_read_u32(child, \"reg\",\n\t\t\t\t\t &cdns_phy->phys[node].mlane)) {\n\t\t\tdev_err(dev, \"%s: No \\\"reg\\\"-property.\\n\",\n\t\t\t\tchild->full_name);\n\t\t\tret = -EINVAL;\n\t\t\tgoto put_child;\n\t\t}\n\n\t\tif (of_property_read_u32(child, \"cdns,phy-type\", &phy_type)) {\n\t\t\tdev_err(dev, \"%s: No \\\"cdns,phy-type\\\"-property.\\n\",\n\t\t\t\tchild->full_name);\n\t\t\tret = -EINVAL;\n\t\t\tgoto put_child;\n\t\t}\n\n\t\tswitch (phy_type) {\n\t\tcase PHY_TYPE_PCIE:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_PCIE;\n\t\t\tbreak;\n\t\tcase PHY_TYPE_DP:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_DP;\n\t\t\tbreak;\n\t\tcase PHY_TYPE_SGMII:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_SGMII;\n\t\t\tbreak;\n\t\tcase PHY_TYPE_QSGMII:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_QSGMII;\n\t\t\tbreak;\n\t\tcase PHY_TYPE_USB3:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_USB;\n\t\t\tbreak;\n\t\tcase PHY_TYPE_USXGMII:\n\t\t\tcdns_phy->phys[node].phy_type = TYPE_USXGMII;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(dev, \"Unsupported protocol\\n\");\n\t\t\tret = -EINVAL;\n\t\t\tgoto put_child;\n\t\t}\n\n\t\tif (of_property_read_u32(child, \"cdns,num-lanes\",\n\t\t\t\t\t &cdns_phy->phys[node].num_lanes)) {\n\t\t\tdev_err(dev, \"%s: No \\\"cdns,num-lanes\\\"-property.\\n\",\n\t\t\t\tchild->full_name);\n\t\t\tret = -EINVAL;\n\t\t\tgoto put_child;\n\t\t}\n\n\t\ttotal_num_lanes += cdns_phy->phys[node].num_lanes;\n\n\t\t \n\t\tcdns_phy->phys[node].ssc_mode = NO_SSC;\n\t\tof_property_read_u32(child, \"cdns,ssc-mode\",\n\t\t\t\t     &cdns_phy->phys[node].ssc_mode);\n\n\t\tif (!already_configured)\n\t\t\tgphy = devm_phy_create(dev, child, &cdns_torrent_phy_ops);\n\t\telse\n\t\t\tgphy = devm_phy_create(dev, child, &noop_ops);\n\t\tif (IS_ERR(gphy)) {\n\t\t\tret = PTR_ERR(gphy);\n\t\t\tgoto put_child;\n\t\t}\n\n\t\tif (cdns_phy->phys[node].phy_type == TYPE_DP) {\n\t\t\tswitch (cdns_phy->phys[node].num_lanes) {\n\t\t\tcase 1:\n\t\t\tcase 2:\n\t\t\tcase 4:\n\t\t\t \n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdev_err(dev, \"unsupported number of lanes: %d\\n\",\n\t\t\t\t\tcdns_phy->phys[node].num_lanes);\n\t\t\t\tret = -EINVAL;\n\t\t\t\tgoto put_child;\n\t\t\t}\n\n\t\t\tcdns_phy->max_bit_rate = DEFAULT_MAX_BIT_RATE;\n\t\t\tof_property_read_u32(child, \"cdns,max-bit-rate\",\n\t\t\t\t\t     &cdns_phy->max_bit_rate);\n\n\t\t\tswitch (cdns_phy->max_bit_rate) {\n\t\t\tcase 1620:\n\t\t\tcase 2160:\n\t\t\tcase 2430:\n\t\t\tcase 2700:\n\t\t\tcase 3240:\n\t\t\tcase 4320:\n\t\t\tcase 5400:\n\t\t\tcase 8100:\n\t\t\t \n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdev_err(dev, \"unsupported max bit rate: %dMbps\\n\",\n\t\t\t\t\tcdns_phy->max_bit_rate);\n\t\t\t\tret = -EINVAL;\n\t\t\t\tgoto put_child;\n\t\t\t}\n\n\t\t\t \n\t\t\tcdns_phy->base = devm_platform_ioremap_resource(pdev, 1);\n\t\t\tif (IS_ERR(cdns_phy->base)) {\n\t\t\t\tret = PTR_ERR(cdns_phy->base);\n\t\t\t\tgoto put_child;\n\t\t\t}\n\n\t\t\tif (!init_dp_regmap) {\n\t\t\t\tret = cdns_torrent_dp_regmap_init(cdns_phy);\n\t\t\t\tif (ret)\n\t\t\t\t\tgoto put_child;\n\n\t\t\t\tret = cdns_torrent_dp_regfield_init(cdns_phy);\n\t\t\t\tif (ret)\n\t\t\t\t\tgoto put_child;\n\n\t\t\t\tinit_dp_regmap++;\n\t\t\t}\n\n\t\t\tdev_dbg(dev, \"DP max bit rate %d.%03d Gbps\\n\",\n\t\t\t\tcdns_phy->max_bit_rate / 1000,\n\t\t\t\tcdns_phy->max_bit_rate % 1000);\n\n\t\t\tgphy->attrs.bus_width = cdns_phy->phys[node].num_lanes;\n\t\t\tgphy->attrs.max_link_rate = cdns_phy->max_bit_rate;\n\t\t\tgphy->attrs.mode = PHY_MODE_DP;\n\t\t}\n\n\t\tcdns_phy->phys[node].phy = gphy;\n\t\tphy_set_drvdata(gphy, &cdns_phy->phys[node]);\n\n\t\tnode++;\n\t}\n\tcdns_phy->nsubnodes = node;\n\n\tif (total_num_lanes > MAX_NUM_LANES) {\n\t\tdev_err(dev, \"Invalid lane configuration\\n\");\n\t\tret = -EINVAL;\n\t\tgoto put_lnk_rst;\n\t}\n\n\tif (cdns_phy->nsubnodes > 1 && !already_configured) {\n\t\tret = cdns_torrent_phy_configure_multilink(cdns_phy);\n\t\tif (ret)\n\t\t\tgoto put_lnk_rst;\n\t}\n\n\tphy_provider = devm_of_phy_provider_register(dev, of_phy_simple_xlate);\n\tif (IS_ERR(phy_provider)) {\n\t\tret = PTR_ERR(phy_provider);\n\t\tgoto put_lnk_rst;\n\t}\n\n\tif (cdns_phy->nsubnodes > 1)\n\t\tdev_dbg(dev, \"Multi-link: %s (%d lanes) & %s (%d lanes)\",\n\t\t\tcdns_torrent_get_phy_type(cdns_phy->phys[0].phy_type),\n\t\t\tcdns_phy->phys[0].num_lanes,\n\t\t\tcdns_torrent_get_phy_type(cdns_phy->phys[1].phy_type),\n\t\t\tcdns_phy->phys[1].num_lanes);\n\telse\n\t\tdev_dbg(dev, \"Single link: %s (%d lanes)\",\n\t\t\tcdns_torrent_get_phy_type(cdns_phy->phys[0].phy_type),\n\t\t\tcdns_phy->phys[0].num_lanes);\n\n\treturn 0;\n\nput_child:\n\tnode++;\nput_lnk_rst:\n\tfor (i = 0; i < node; i++)\n\t\treset_control_put(cdns_phy->phys[i].lnk_rst);\n\tof_node_put(child);\n\treset_control_assert(cdns_phy->apb_rst);\n\tclk_disable_unprepare(cdns_phy->clk);\nclk_cleanup:\n\tcdns_torrent_clk_cleanup(cdns_phy);\n\treturn ret;\n}\n\nstatic void cdns_torrent_phy_remove(struct platform_device *pdev)\n{\n\tstruct cdns_torrent_phy *cdns_phy = platform_get_drvdata(pdev);\n\tint i;\n\n\treset_control_assert(cdns_phy->phy_rst);\n\treset_control_assert(cdns_phy->apb_rst);\n\tfor (i = 0; i < cdns_phy->nsubnodes; i++) {\n\t\treset_control_assert(cdns_phy->phys[i].lnk_rst);\n\t\treset_control_put(cdns_phy->phys[i].lnk_rst);\n\t}\n\n\tclk_disable_unprepare(cdns_phy->clk);\n\tcdns_torrent_clk_cleanup(cdns_phy);\n}\n\n \nstatic struct cdns_reg_pairs usb_dp_link_cmn_regs[] = {\n\t{0x0002, PHY_PLL_CFG},\n\t{0x8600, CMN_PDIAG_PLL0_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs usb_dp_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0041, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_reg_pairs dp_usb_xcvr_diag_ln_regs[] = {\n\t{0x0001, XCVR_DIAG_HSCLK_SEL},\n\t{0x0009, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals usb_dp_link_cmn_vals = {\n\t.reg_pairs = usb_dp_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(usb_dp_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals usb_dp_xcvr_diag_ln_vals = {\n\t.reg_pairs = usb_dp_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(usb_dp_xcvr_diag_ln_regs),\n};\n\nstatic struct cdns_torrent_vals dp_usb_xcvr_diag_ln_vals = {\n\t.reg_pairs = dp_usb_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(dp_usb_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs ti_usxgmii_phy_pma_cmn_regs[] = {\n\t{0x0040, PHY_PMA_CMN_CTRL1},\n};\n\nstatic struct cdns_torrent_vals ti_usxgmii_phy_pma_cmn_vals = {\n\t.reg_pairs = ti_usxgmii_phy_pma_cmn_regs,\n\t.num_regs = ARRAY_SIZE(ti_usxgmii_phy_pma_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_usxgmii_link_cmn_regs[] = {\n\t{0x0000, PHY_PLL_CFG},\n\t{0x0400, CMN_PDIAG_PLL0_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs sl_usxgmii_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0001, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_usxgmii_link_cmn_vals = {\n\t.reg_pairs = sl_usxgmii_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_usxgmii_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_usxgmii_xcvr_diag_ln_vals = {\n\t.reg_pairs = sl_usxgmii_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_usxgmii_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_usxgmii_156_25_no_ssc_cmn_regs[] = {\n\t{0x0014, CMN_SSM_BIAS_TMR},\n\t{0x0028, CMN_PLLSM0_PLLPRE_TMR},\n\t{0x00A4, CMN_PLLSM0_PLLLOCK_TMR},\n\t{0x0028, CMN_PLLSM1_PLLPRE_TMR},\n\t{0x00A4, CMN_PLLSM1_PLLLOCK_TMR},\n\t{0x0062, CMN_BGCAL_INIT_TMR},\n\t{0x0062, CMN_BGCAL_ITER_TMR},\n\t{0x0014, CMN_IBCAL_INIT_TMR},\n\t{0x0018, CMN_TXPUCAL_INIT_TMR},\n\t{0x0005, CMN_TXPUCAL_ITER_TMR},\n\t{0x0018, CMN_TXPDCAL_INIT_TMR},\n\t{0x0005, CMN_TXPDCAL_ITER_TMR},\n\t{0x024A, CMN_RXCAL_INIT_TMR},\n\t{0x0005, CMN_RXCAL_ITER_TMR},\n\t{0x000B, CMN_SD_CAL_REFTIM_START},\n\t{0x0132, CMN_SD_CAL_PLLCNT_START},\n\t{0x0028, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0014, CMN_PLL0_DSM_FBH_OVRD_M0},\n\t{0x0014, CMN_PLL1_DSM_FBH_OVRD_M0},\n\t{0x0005, CMN_PLL0_DSM_FBL_OVRD_M0},\n\t{0x0005, CMN_PLL1_DSM_FBL_OVRD_M0},\n\t{0x061B, CMN_PLL0_VCOCAL_INIT_TMR},\n\t{0x061B, CMN_PLL1_VCOCAL_INIT_TMR},\n\t{0x0019, CMN_PLL0_VCOCAL_ITER_TMR},\n\t{0x0019, CMN_PLL1_VCOCAL_ITER_TMR},\n\t{0x1354, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x1354, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x1354, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x1354, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL},\n\t{0x0138, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x0138, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x0138, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x0138, CMN_PLL1_LOCK_PLLCNT_START}\n};\n\nstatic struct cdns_reg_pairs usxgmii_156_25_no_ssc_tx_ln_regs[] = {\n\t{0x07A2, TX_RCVDET_ST_TMR},\n\t{0x00F3, TX_PSC_A0},\n\t{0x04A2, TX_PSC_A2},\n\t{0x04A2, TX_PSC_A3},\n\t{0x0000, TX_TXCC_CPOST_MULT_00},\n\t{0x0000, XCVR_DIAG_PSC_OVRD}\n};\n\nstatic struct cdns_reg_pairs usxgmii_156_25_no_ssc_rx_ln_regs[] = {\n\t{0x0014, RX_SDCAL0_INIT_TMR},\n\t{0x0062, RX_SDCAL0_ITER_TMR},\n\t{0x0014, RX_SDCAL1_INIT_TMR},\n\t{0x0062, RX_SDCAL1_ITER_TMR},\n\t{0x091D, RX_PSC_A0},\n\t{0x0900, RX_PSC_A2},\n\t{0x0100, RX_PSC_A3},\n\t{0x0030, RX_REE_SMGM_CTRL1},\n\t{0x03C7, RX_REE_GCSM1_EQENM_PH1},\n\t{0x01C7, RX_REE_GCSM1_EQENM_PH2},\n\t{0x0000, RX_DIAG_DFE_CTRL},\n\t{0x0019, RX_REE_TAP1_CLIP},\n\t{0x0019, RX_REE_TAP2TON_CLIP},\n\t{0x00B9, RX_DIAG_NQST_CTRL},\n\t{0x0C21, RX_DIAG_DFE_AMP_TUNE_2},\n\t{0x0002, RX_DIAG_DFE_AMP_TUNE_3},\n\t{0x0033, RX_DIAG_PI_RATE},\n\t{0x0001, RX_DIAG_ACYA},\n\t{0x018C, RX_CDRLF_CNFG}\n};\n\nstatic struct cdns_torrent_vals sl_usxgmii_156_25_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_usxgmii_156_25_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_usxgmii_156_25_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals usxgmii_156_25_no_ssc_tx_ln_vals = {\n\t.reg_pairs = usxgmii_156_25_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(usxgmii_156_25_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals usxgmii_156_25_no_ssc_rx_ln_vals = {\n\t.reg_pairs = usxgmii_156_25_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(usxgmii_156_25_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs pcie_dp_link_cmn_regs[] = {\n\t{0x0003, PHY_PLL_CFG},\n\t{0x0601, CMN_PDIAG_PLL0_CLK_SEL_M0},\n\t{0x0400, CMN_PDIAG_PLL0_CLK_SEL_M1}\n};\n\nstatic struct cdns_reg_pairs pcie_dp_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0012, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_reg_pairs dp_pcie_xcvr_diag_ln_regs[] = {\n\t{0x0001, XCVR_DIAG_HSCLK_SEL},\n\t{0x0009, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals pcie_dp_link_cmn_vals = {\n\t.reg_pairs = pcie_dp_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(pcie_dp_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals pcie_dp_xcvr_diag_ln_vals = {\n\t.reg_pairs = pcie_dp_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(pcie_dp_xcvr_diag_ln_regs),\n};\n\nstatic struct cdns_torrent_vals dp_pcie_xcvr_diag_ln_vals = {\n\t.reg_pairs = dp_pcie_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(dp_pcie_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs dp_100_no_ssc_cmn_regs[] = {\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_reg_pairs dp_100_no_ssc_tx_ln_regs[] = {\n\t{0x00FB, TX_PSC_A0},\n\t{0x04AA, TX_PSC_A2},\n\t{0x04AA, TX_PSC_A3},\n\t{0x000F, XCVR_DIAG_BIDI_CTRL}\n};\n\nstatic struct cdns_reg_pairs dp_100_no_ssc_rx_ln_regs[] = {\n\t{0x0000, RX_PSC_A0},\n\t{0x0000, RX_PSC_A2},\n\t{0x0000, RX_PSC_A3},\n\t{0x0000, RX_PSC_CAL},\n\t{0x0000, RX_REE_GCSM1_CTRL},\n\t{0x0000, RX_REE_GCSM2_CTRL},\n\t{0x0000, RX_REE_PERGCSM_CTRL}\n};\n\nstatic struct cdns_torrent_vals dp_100_no_ssc_cmn_vals = {\n\t.reg_pairs = dp_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(dp_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals dp_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = dp_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(dp_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals dp_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = dp_100_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(dp_100_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_dp_link_cmn_regs[] = {\n\t{0x0000, PHY_PLL_CFG},\n};\n\nstatic struct cdns_reg_pairs sl_dp_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_dp_link_cmn_vals = {\n\t.reg_pairs = sl_dp_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_xcvr_diag_ln_vals = {\n\t.reg_pairs = sl_dp_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_dp_19_2_no_ssc_cmn_regs[] = {\n\t{0x0014, CMN_SSM_BIAS_TMR},\n\t{0x0027, CMN_PLLSM0_PLLPRE_TMR},\n\t{0x00A1, CMN_PLLSM0_PLLLOCK_TMR},\n\t{0x0027, CMN_PLLSM1_PLLPRE_TMR},\n\t{0x00A1, CMN_PLLSM1_PLLLOCK_TMR},\n\t{0x0060, CMN_BGCAL_INIT_TMR},\n\t{0x0060, CMN_BGCAL_ITER_TMR},\n\t{0x0014, CMN_IBCAL_INIT_TMR},\n\t{0x0018, CMN_TXPUCAL_INIT_TMR},\n\t{0x0005, CMN_TXPUCAL_ITER_TMR},\n\t{0x0018, CMN_TXPDCAL_INIT_TMR},\n\t{0x0005, CMN_TXPDCAL_ITER_TMR},\n\t{0x0240, CMN_RXCAL_INIT_TMR},\n\t{0x0005, CMN_RXCAL_ITER_TMR},\n\t{0x0002, CMN_SD_CAL_INIT_TMR},\n\t{0x0002, CMN_SD_CAL_ITER_TMR},\n\t{0x000B, CMN_SD_CAL_REFTIM_START},\n\t{0x0137, CMN_SD_CAL_PLLCNT_START},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x00C0, CMN_PLL0_VCOCAL_INIT_TMR},\n\t{0x0004, CMN_PLL0_VCOCAL_ITER_TMR},\n\t{0x00C0, CMN_PLL1_VCOCAL_INIT_TMR},\n\t{0x0004, CMN_PLL1_VCOCAL_ITER_TMR},\n\t{0x0260, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0260, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_19_2_no_ssc_tx_ln_regs[] = {\n\t{0x0780, TX_RCVDET_ST_TMR},\n\t{0x00FB, TX_PSC_A0},\n\t{0x04AA, TX_PSC_A2},\n\t{0x04AA, TX_PSC_A3},\n\t{0x000F, XCVR_DIAG_BIDI_CTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_19_2_no_ssc_rx_ln_regs[] = {\n\t{0x0000, RX_PSC_A0},\n\t{0x0000, RX_PSC_A2},\n\t{0x0000, RX_PSC_A3},\n\t{0x0000, RX_PSC_CAL},\n\t{0x0000, RX_REE_GCSM1_CTRL},\n\t{0x0000, RX_REE_GCSM2_CTRL},\n\t{0x0000, RX_REE_PERGCSM_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_dp_19_2_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_dp_19_2_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_19_2_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_19_2_no_ssc_tx_ln_vals = {\n\t.reg_pairs = sl_dp_19_2_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_19_2_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_19_2_no_ssc_rx_ln_vals = {\n\t.reg_pairs = sl_dp_19_2_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_19_2_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_dp_25_no_ssc_cmn_regs[] = {\n\t{0x0019, CMN_SSM_BIAS_TMR},\n\t{0x0032, CMN_PLLSM0_PLLPRE_TMR},\n\t{0x00D1, CMN_PLLSM0_PLLLOCK_TMR},\n\t{0x0032, CMN_PLLSM1_PLLPRE_TMR},\n\t{0x00D1, CMN_PLLSM1_PLLLOCK_TMR},\n\t{0x007D, CMN_BGCAL_INIT_TMR},\n\t{0x007D, CMN_BGCAL_ITER_TMR},\n\t{0x0019, CMN_IBCAL_INIT_TMR},\n\t{0x001E, CMN_TXPUCAL_INIT_TMR},\n\t{0x0006, CMN_TXPUCAL_ITER_TMR},\n\t{0x001E, CMN_TXPDCAL_INIT_TMR},\n\t{0x0006, CMN_TXPDCAL_ITER_TMR},\n\t{0x02EE, CMN_RXCAL_INIT_TMR},\n\t{0x0006, CMN_RXCAL_ITER_TMR},\n\t{0x0002, CMN_SD_CAL_INIT_TMR},\n\t{0x0002, CMN_SD_CAL_ITER_TMR},\n\t{0x000E, CMN_SD_CAL_REFTIM_START},\n\t{0x012B, CMN_SD_CAL_PLLCNT_START},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x00FA, CMN_PLL0_VCOCAL_INIT_TMR},\n\t{0x0004, CMN_PLL0_VCOCAL_ITER_TMR},\n\t{0x00FA, CMN_PLL1_VCOCAL_INIT_TMR},\n\t{0x0004, CMN_PLL1_VCOCAL_ITER_TMR},\n\t{0x0317, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0317, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_25_no_ssc_tx_ln_regs[] = {\n\t{0x09C4, TX_RCVDET_ST_TMR},\n\t{0x00FB, TX_PSC_A0},\n\t{0x04AA, TX_PSC_A2},\n\t{0x04AA, TX_PSC_A3},\n\t{0x000F, XCVR_DIAG_BIDI_CTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_25_no_ssc_rx_ln_regs[] = {\n\t{0x0000, RX_PSC_A0},\n\t{0x0000, RX_PSC_A2},\n\t{0x0000, RX_PSC_A3},\n\t{0x0000, RX_PSC_CAL},\n\t{0x0000, RX_REE_GCSM1_CTRL},\n\t{0x0000, RX_REE_GCSM2_CTRL},\n\t{0x0000, RX_REE_PERGCSM_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_dp_25_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_dp_25_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_25_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_25_no_ssc_tx_ln_vals = {\n\t.reg_pairs = sl_dp_25_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_25_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_25_no_ssc_rx_ln_vals = {\n\t.reg_pairs = sl_dp_25_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_25_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_dp_100_no_ssc_cmn_regs[] = {\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_100_no_ssc_tx_ln_regs[] = {\n\t{0x00FB, TX_PSC_A0},\n\t{0x04AA, TX_PSC_A2},\n\t{0x04AA, TX_PSC_A3},\n\t{0x000F, XCVR_DIAG_BIDI_CTRL}\n};\n\nstatic struct cdns_reg_pairs sl_dp_100_no_ssc_rx_ln_regs[] = {\n\t{0x0000, RX_PSC_A0},\n\t{0x0000, RX_PSC_A2},\n\t{0x0000, RX_PSC_A3},\n\t{0x0000, RX_PSC_CAL},\n\t{0x0000, RX_REE_GCSM1_CTRL},\n\t{0x0000, RX_REE_GCSM2_CTRL},\n\t{0x0000, RX_REE_PERGCSM_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_dp_100_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_dp_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = sl_dp_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sl_dp_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = sl_dp_100_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_dp_100_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs usb_sgmii_link_cmn_regs[] = {\n\t{0x0002, PHY_PLL_CFG},\n\t{0x8600, CMN_PDIAG_PLL0_CLK_SEL_M0},\n\t{0x0601, CMN_PDIAG_PLL1_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs usb_sgmii_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0041, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_reg_pairs sgmii_usb_xcvr_diag_ln_regs[] = {\n\t{0x0011, XCVR_DIAG_HSCLK_SEL},\n\t{0x0003, XCVR_DIAG_HSCLK_DIV},\n\t{0x009B, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals usb_sgmii_link_cmn_vals = {\n\t.reg_pairs = usb_sgmii_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(usb_sgmii_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals usb_sgmii_xcvr_diag_ln_vals = {\n\t.reg_pairs = usb_sgmii_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(usb_sgmii_xcvr_diag_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sgmii_usb_xcvr_diag_ln_vals = {\n\t.reg_pairs = sgmii_usb_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_usb_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs pcie_usb_link_cmn_regs[] = {\n\t{0x0003, PHY_PLL_CFG},\n\t{0x0601, CMN_PDIAG_PLL0_CLK_SEL_M0},\n\t{0x0400, CMN_PDIAG_PLL0_CLK_SEL_M1},\n\t{0x8600, CMN_PDIAG_PLL1_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs pcie_usb_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0012, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_reg_pairs usb_pcie_xcvr_diag_ln_regs[] = {\n\t{0x0011, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x00C9, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals pcie_usb_link_cmn_vals = {\n\t.reg_pairs = pcie_usb_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(pcie_usb_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals pcie_usb_xcvr_diag_ln_vals = {\n\t.reg_pairs = pcie_usb_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(pcie_usb_xcvr_diag_ln_regs),\n};\n\nstatic struct cdns_torrent_vals usb_pcie_xcvr_diag_ln_vals = {\n\t.reg_pairs = usb_pcie_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(usb_pcie_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs usb_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M1},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M1},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M1},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M1},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0050, CMN_PLL0_INTDIV_M1},\n\t{0x0064, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M1},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0036, CMN_PLL0_HIGH_THR_M1},\n\t{0x0044, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M1},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M1},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M1},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x0058, CMN_PLL0_SS_CTRL3_M1},\n\t{0x006E, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x0012, CMN_PLL0_SS_CTRL4_M1},\n\t{0x000E, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR},\n\t{0x8200, CMN_CDIAG_CDB_PWRI_OVRD},\n\t{0x8200, CMN_CDIAG_XCVRC_PWRI_OVRD},\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_torrent_vals usb_100_int_ssc_cmn_vals = {\n\t.reg_pairs = usb_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(usb_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_usb_link_cmn_regs[] = {\n\t{0x0000, PHY_PLL_CFG},\n\t{0x8600, CMN_PDIAG_PLL0_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs sl_usb_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0041, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_usb_link_cmn_vals = {\n\t.reg_pairs = sl_usb_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_usb_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_usb_xcvr_diag_ln_vals = {\n\t.reg_pairs = sl_usb_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_usb_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs usb_phy_pcs_cmn_regs[] = {\n\t{0x0A0A, PHY_PIPE_USB3_GEN2_PRE_CFG0},\n\t{0x1000, PHY_PIPE_USB3_GEN2_POST_CFG0},\n\t{0x0010, PHY_PIPE_USB3_GEN2_POST_CFG1}\n};\n\nstatic struct cdns_torrent_vals usb_phy_pcs_cmn_vals = {\n\t.reg_pairs = usb_phy_pcs_cmn_regs,\n\t.num_regs = ARRAY_SIZE(usb_phy_pcs_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_usb_100_no_ssc_cmn_regs[] = {\n\t{0x0028, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x001E, CMN_PLL1_DSM_FBH_OVRD_M0},\n\t{0x000C, CMN_PLL1_DSM_FBL_OVRD_M0},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL},\n\t{0x8200, CMN_CDIAG_CDB_PWRI_OVRD},\n\t{0x8200, CMN_CDIAG_XCVRC_PWRI_OVRD}\n};\n\nstatic struct cdns_torrent_vals sl_usb_100_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_usb_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_usb_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_reg_pairs usb_100_no_ssc_cmn_regs[] = {\n\t{0x8200, CMN_CDIAG_CDB_PWRI_OVRD},\n\t{0x8200, CMN_CDIAG_XCVRC_PWRI_OVRD},\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_reg_pairs usb_100_no_ssc_tx_ln_regs[] = {\n\t{0x02FF, TX_PSC_A0},\n\t{0x06AF, TX_PSC_A1},\n\t{0x06AE, TX_PSC_A2},\n\t{0x06AE, TX_PSC_A3},\n\t{0x2A82, TX_TXCC_CTRL},\n\t{0x0014, TX_TXCC_CPOST_MULT_01},\n\t{0x0003, XCVR_DIAG_PSC_OVRD}\n};\n\nstatic struct cdns_reg_pairs usb_100_no_ssc_rx_ln_regs[] = {\n\t{0x0D1D, RX_PSC_A0},\n\t{0x0D1D, RX_PSC_A1},\n\t{0x0D00, RX_PSC_A2},\n\t{0x0500, RX_PSC_A3},\n\t{0x0013, RX_SIGDET_HL_FILT_TMR},\n\t{0x0000, RX_REE_GCSM1_CTRL},\n\t{0x0C02, RX_REE_ATTEN_THR},\n\t{0x0330, RX_REE_SMGM_CTRL1},\n\t{0x0300, RX_REE_SMGM_CTRL2},\n\t{0x0019, RX_REE_TAP1_CLIP},\n\t{0x0019, RX_REE_TAP2TON_CLIP},\n\t{0x1004, RX_DIAG_SIGDET_TUNE},\n\t{0x00F9, RX_DIAG_NQST_CTRL},\n\t{0x0C01, RX_DIAG_DFE_AMP_TUNE_2},\n\t{0x0002, RX_DIAG_DFE_AMP_TUNE_3},\n\t{0x0000, RX_DIAG_PI_CAP},\n\t{0x0031, RX_DIAG_PI_RATE},\n\t{0x0001, RX_DIAG_ACYA},\n\t{0x018C, RX_CDRLF_CNFG},\n\t{0x0003, RX_CDRLF_CNFG3}\n};\n\nstatic struct cdns_torrent_vals usb_100_no_ssc_cmn_vals = {\n\t.reg_pairs = usb_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(usb_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals usb_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = usb_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(usb_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals usb_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = usb_100_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(usb_100_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_usb_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0064, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0044, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x006E, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x000E, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR},\n\t{0x8200, CMN_CDIAG_CDB_PWRI_OVRD},\n\t{0x8200, CMN_CDIAG_XCVRC_PWRI_OVRD}\n};\n\nstatic struct cdns_torrent_vals sl_usb_100_int_ssc_cmn_vals = {\n\t.reg_pairs = sl_usb_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_usb_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs pcie_sgmii_link_cmn_regs[] = {\n\t{0x0003, PHY_PLL_CFG},\n\t{0x0601, CMN_PDIAG_PLL0_CLK_SEL_M0},\n\t{0x0400, CMN_PDIAG_PLL0_CLK_SEL_M1},\n\t{0x0601, CMN_PDIAG_PLL1_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs pcie_sgmii_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0001, XCVR_DIAG_HSCLK_DIV},\n\t{0x0012, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_reg_pairs sgmii_pcie_xcvr_diag_ln_regs[] = {\n\t{0x0011, XCVR_DIAG_HSCLK_SEL},\n\t{0x0003, XCVR_DIAG_HSCLK_DIV},\n\t{0x009B, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals pcie_sgmii_link_cmn_vals = {\n\t.reg_pairs = pcie_sgmii_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(pcie_sgmii_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals pcie_sgmii_xcvr_diag_ln_vals = {\n\t.reg_pairs = pcie_sgmii_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(pcie_sgmii_xcvr_diag_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sgmii_pcie_xcvr_diag_ln_vals = {\n\t.reg_pairs = sgmii_pcie_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_pcie_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_sgmii_100_no_ssc_cmn_regs[] = {\n\t{0x0028, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x001E, CMN_PLL1_DSM_FBH_OVRD_M0},\n\t{0x000C, CMN_PLL1_DSM_FBL_OVRD_M0},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL}\n};\n\nstatic struct cdns_torrent_vals sl_sgmii_100_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_sgmii_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_sgmii_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_reg_pairs sgmii_100_no_ssc_cmn_regs[] = {\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_reg_pairs sgmii_100_no_ssc_tx_ln_regs[] = {\n\t{0x00F3, TX_PSC_A0},\n\t{0x04A2, TX_PSC_A2},\n\t{0x04A2, TX_PSC_A3},\n\t{0x0000, TX_TXCC_CPOST_MULT_00},\n\t{0x00B3, DRV_DIAG_TX_DRV}\n};\n\nstatic struct cdns_reg_pairs ti_sgmii_100_no_ssc_tx_ln_regs[] = {\n\t{0x00F3, TX_PSC_A0},\n\t{0x04A2, TX_PSC_A2},\n\t{0x04A2, TX_PSC_A3},\n\t{0x0000, TX_TXCC_CPOST_MULT_00},\n\t{0x00B3, DRV_DIAG_TX_DRV},\n\t{0x4000, XCVR_DIAG_RXCLK_CTRL},\n};\n\nstatic struct cdns_reg_pairs sgmii_100_no_ssc_rx_ln_regs[] = {\n\t{0x091D, RX_PSC_A0},\n\t{0x0900, RX_PSC_A2},\n\t{0x0100, RX_PSC_A3},\n\t{0x03C7, RX_REE_GCSM1_EQENM_PH1},\n\t{0x01C7, RX_REE_GCSM1_EQENM_PH2},\n\t{0x0000, RX_DIAG_DFE_CTRL},\n\t{0x0019, RX_REE_TAP1_CLIP},\n\t{0x0019, RX_REE_TAP2TON_CLIP},\n\t{0x0098, RX_DIAG_NQST_CTRL},\n\t{0x0C01, RX_DIAG_DFE_AMP_TUNE_2},\n\t{0x0000, RX_DIAG_DFE_AMP_TUNE_3},\n\t{0x0000, RX_DIAG_PI_CAP},\n\t{0x0010, RX_DIAG_PI_RATE},\n\t{0x0001, RX_DIAG_ACYA},\n\t{0x018C, RX_CDRLF_CNFG},\n};\n\nstatic struct cdns_torrent_vals sgmii_100_no_ssc_cmn_vals = {\n\t.reg_pairs = sgmii_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sgmii_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = sgmii_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals ti_sgmii_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = ti_sgmii_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(ti_sgmii_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals sgmii_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = sgmii_100_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_100_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs sgmii_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M1},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M1},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M1},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M1},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0050, CMN_PLL0_INTDIV_M1},\n\t{0x0064, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M1},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0036, CMN_PLL0_HIGH_THR_M1},\n\t{0x0044, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M1},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M1},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M1},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x0058, CMN_PLL0_SS_CTRL3_M1},\n\t{0x006E, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x0012, CMN_PLL0_SS_CTRL4_M1},\n\t{0x000E, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR},\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_torrent_vals sgmii_100_int_ssc_cmn_vals = {\n\t.reg_pairs = sgmii_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sgmii_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_qsgmii_100_no_ssc_cmn_regs[] = {\n\t{0x0028, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x001E, CMN_PLL1_DSM_FBH_OVRD_M0},\n\t{0x000C, CMN_PLL1_DSM_FBL_OVRD_M0},\n\t{0x0003, CMN_PLL0_VCOCAL_TCTRL},\n\t{0x0003, CMN_PLL1_VCOCAL_TCTRL}\n};\n\nstatic struct cdns_torrent_vals sl_qsgmii_100_no_ssc_cmn_vals = {\n\t.reg_pairs = sl_qsgmii_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_qsgmii_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_reg_pairs qsgmii_100_no_ssc_cmn_regs[] = {\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_reg_pairs qsgmii_100_no_ssc_tx_ln_regs[] = {\n\t{0x00F3, TX_PSC_A0},\n\t{0x04A2, TX_PSC_A2},\n\t{0x04A2, TX_PSC_A3},\n\t{0x0000, TX_TXCC_CPOST_MULT_00},\n\t{0x0011, TX_TXCC_MGNFS_MULT_100},\n\t{0x0003, DRV_DIAG_TX_DRV}\n};\n\nstatic struct cdns_reg_pairs ti_qsgmii_100_no_ssc_tx_ln_regs[] = {\n\t{0x00F3, TX_PSC_A0},\n\t{0x04A2, TX_PSC_A2},\n\t{0x04A2, TX_PSC_A3},\n\t{0x0000, TX_TXCC_CPOST_MULT_00},\n\t{0x0011, TX_TXCC_MGNFS_MULT_100},\n\t{0x0003, DRV_DIAG_TX_DRV},\n\t{0x4000, XCVR_DIAG_RXCLK_CTRL},\n};\n\nstatic struct cdns_reg_pairs qsgmii_100_no_ssc_rx_ln_regs[] = {\n\t{0x091D, RX_PSC_A0},\n\t{0x0900, RX_PSC_A2},\n\t{0x0100, RX_PSC_A3},\n\t{0x03C7, RX_REE_GCSM1_EQENM_PH1},\n\t{0x01C7, RX_REE_GCSM1_EQENM_PH2},\n\t{0x0000, RX_DIAG_DFE_CTRL},\n\t{0x0019, RX_REE_TAP1_CLIP},\n\t{0x0019, RX_REE_TAP2TON_CLIP},\n\t{0x0098, RX_DIAG_NQST_CTRL},\n\t{0x0C01, RX_DIAG_DFE_AMP_TUNE_2},\n\t{0x0000, RX_DIAG_DFE_AMP_TUNE_3},\n\t{0x0000, RX_DIAG_PI_CAP},\n\t{0x0010, RX_DIAG_PI_RATE},\n\t{0x0001, RX_DIAG_ACYA},\n\t{0x018C, RX_CDRLF_CNFG},\n};\n\nstatic struct cdns_torrent_vals qsgmii_100_no_ssc_cmn_vals = {\n\t.reg_pairs = qsgmii_100_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(qsgmii_100_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals qsgmii_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = qsgmii_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(qsgmii_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals ti_qsgmii_100_no_ssc_tx_ln_vals = {\n\t.reg_pairs = ti_qsgmii_100_no_ssc_tx_ln_regs,\n\t.num_regs = ARRAY_SIZE(ti_qsgmii_100_no_ssc_tx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals qsgmii_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = qsgmii_100_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(qsgmii_100_no_ssc_rx_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs qsgmii_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M1},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M1},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M1},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M1},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0050, CMN_PLL0_INTDIV_M1},\n\t{0x0064, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M1},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0036, CMN_PLL0_HIGH_THR_M1},\n\t{0x0044, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M1},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M1},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M1},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x0058, CMN_PLL0_SS_CTRL3_M1},\n\t{0x006E, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x0012, CMN_PLL0_SS_CTRL4_M1},\n\t{0x000E, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR},\n\t{0x007F, CMN_TXPUCAL_TUNE},\n\t{0x007F, CMN_TXPDCAL_TUNE}\n};\n\nstatic struct cdns_torrent_vals qsgmii_100_int_ssc_cmn_vals = {\n\t.reg_pairs = qsgmii_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(qsgmii_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_sgmii_link_cmn_regs[] = {\n\t{0x0000, PHY_PLL_CFG},\n\t{0x0601, CMN_PDIAG_PLL0_CLK_SEL_M0}\n};\n\nstatic struct cdns_reg_pairs sl_sgmii_xcvr_diag_ln_regs[] = {\n\t{0x0000, XCVR_DIAG_HSCLK_SEL},\n\t{0x0003, XCVR_DIAG_HSCLK_DIV},\n\t{0x0013, XCVR_DIAG_PLLDRC_CTRL}\n};\n\nstatic struct cdns_torrent_vals sl_sgmii_link_cmn_vals = {\n\t.reg_pairs = sl_sgmii_link_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_sgmii_link_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals sl_sgmii_xcvr_diag_ln_vals = {\n\t.reg_pairs = sl_sgmii_xcvr_diag_ln_regs,\n\t.num_regs = ARRAY_SIZE(sl_sgmii_xcvr_diag_ln_regs),\n};\n\n \nstatic struct cdns_reg_pairs pcie_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M1},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M1},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M1},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M1},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0050, CMN_PLL0_INTDIV_M1},\n\t{0x0064, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M1},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0036, CMN_PLL0_HIGH_THR_M1},\n\t{0x0044, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M1},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M1},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M1},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x0058, CMN_PLL0_SS_CTRL3_M1},\n\t{0x006E, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x0012, CMN_PLL0_SS_CTRL4_M1},\n\t{0x000E, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR}\n};\n\nstatic struct cdns_torrent_vals pcie_100_int_ssc_cmn_vals = {\n\t.reg_pairs = pcie_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(pcie_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs sl_pcie_100_int_ssc_cmn_regs[] = {\n\t{0x0004, CMN_PLL0_DSM_DIAG_M0},\n\t{0x0004, CMN_PLL0_DSM_DIAG_M1},\n\t{0x0004, CMN_PLL1_DSM_DIAG_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M0},\n\t{0x0509, CMN_PDIAG_PLL0_CP_PADJ_M1},\n\t{0x0509, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M0},\n\t{0x0F00, CMN_PDIAG_PLL0_CP_IADJ_M1},\n\t{0x0F00, CMN_PDIAG_PLL1_CP_IADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M0},\n\t{0x0F08, CMN_PDIAG_PLL0_FILT_PADJ_M1},\n\t{0x0F08, CMN_PDIAG_PLL1_FILT_PADJ_M0},\n\t{0x0064, CMN_PLL0_INTDIV_M0},\n\t{0x0050, CMN_PLL0_INTDIV_M1},\n\t{0x0050, CMN_PLL1_INTDIV_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M0},\n\t{0x0002, CMN_PLL0_FRACDIVH_M1},\n\t{0x0002, CMN_PLL1_FRACDIVH_M0},\n\t{0x0044, CMN_PLL0_HIGH_THR_M0},\n\t{0x0036, CMN_PLL0_HIGH_THR_M1},\n\t{0x0036, CMN_PLL1_HIGH_THR_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M0},\n\t{0x0002, CMN_PDIAG_PLL0_CTRL_M1},\n\t{0x0002, CMN_PDIAG_PLL1_CTRL_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M0},\n\t{0x0001, CMN_PLL0_SS_CTRL1_M1},\n\t{0x0001, CMN_PLL1_SS_CTRL1_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M0},\n\t{0x011B, CMN_PLL0_SS_CTRL2_M1},\n\t{0x011B, CMN_PLL1_SS_CTRL2_M0},\n\t{0x006E, CMN_PLL0_SS_CTRL3_M0},\n\t{0x0058, CMN_PLL0_SS_CTRL3_M1},\n\t{0x0058, CMN_PLL1_SS_CTRL3_M0},\n\t{0x000E, CMN_PLL0_SS_CTRL4_M0},\n\t{0x0012, CMN_PLL0_SS_CTRL4_M1},\n\t{0x0012, CMN_PLL1_SS_CTRL4_M0},\n\t{0x0C5E, CMN_PLL0_VCOCAL_REFTIM_START},\n\t{0x0C5E, CMN_PLL1_VCOCAL_REFTIM_START},\n\t{0x0C56, CMN_PLL0_VCOCAL_PLLCNT_START},\n\t{0x0C56, CMN_PLL1_VCOCAL_PLLCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_REFCNT_START},\n\t{0x00C7, CMN_PLL0_LOCK_PLLCNT_START},\n\t{0x00C7, CMN_PLL1_LOCK_PLLCNT_START},\n\t{0x0005, CMN_PLL0_LOCK_PLLCNT_THR},\n\t{0x0005, CMN_PLL1_LOCK_PLLCNT_THR}\n};\n\nstatic struct cdns_torrent_vals sl_pcie_100_int_ssc_cmn_vals = {\n\t.reg_pairs = sl_pcie_100_int_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(sl_pcie_100_int_ssc_cmn_regs),\n};\n\n \nstatic struct cdns_reg_pairs pcie_100_ext_no_ssc_cmn_regs[] = {\n\t{0x0028, CMN_PDIAG_PLL1_CP_PADJ_M0},\n\t{0x001E, CMN_PLL1_DSM_FBH_OVRD_M0},\n\t{0x000C, CMN_PLL1_DSM_FBL_OVRD_M0}\n};\n\nstatic struct cdns_reg_pairs pcie_100_ext_no_ssc_rx_ln_regs[] = {\n\t{0x0019, RX_REE_TAP1_CLIP},\n\t{0x0019, RX_REE_TAP2TON_CLIP},\n\t{0x0001, RX_DIAG_ACYA}\n};\n\nstatic struct cdns_torrent_vals pcie_100_no_ssc_cmn_vals = {\n\t.reg_pairs = pcie_100_ext_no_ssc_cmn_regs,\n\t.num_regs = ARRAY_SIZE(pcie_100_ext_no_ssc_cmn_regs),\n};\n\nstatic struct cdns_torrent_vals pcie_100_no_ssc_rx_ln_vals = {\n\t.reg_pairs = pcie_100_ext_no_ssc_rx_ln_regs,\n\t.num_regs = ARRAY_SIZE(pcie_100_ext_no_ssc_rx_ln_regs),\n};\n\nstatic struct cdns_torrent_vals_entry link_cmn_vals_entries[] = {\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_NONE), &sl_dp_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_PCIE), &pcie_dp_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_USB), &usb_dp_link_cmn_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_NONE), NULL},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_SGMII), &pcie_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_QSGMII), &pcie_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_USB), &pcie_usb_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_DP), &pcie_dp_link_cmn_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_NONE), &sl_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_PCIE), &pcie_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_USB), &usb_sgmii_link_cmn_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_NONE), &sl_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_PCIE), &pcie_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_USB), &usb_sgmii_link_cmn_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_NONE), &sl_usb_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_PCIE), &pcie_usb_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_SGMII), &usb_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_QSGMII), &usb_sgmii_link_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_DP), &usb_dp_link_cmn_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USXGMII, TYPE_NONE), &sl_usxgmii_link_cmn_vals},\n};\n\nstatic struct cdns_torrent_vals_entry xcvr_diag_vals_entries[] = {\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_NONE), &sl_dp_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_PCIE), &dp_pcie_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_DP, TYPE_USB), &dp_usb_xcvr_diag_ln_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_NONE), NULL},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_SGMII), &pcie_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_QSGMII), &pcie_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_USB), &pcie_usb_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_PCIE, TYPE_DP), &pcie_dp_xcvr_diag_ln_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_NONE), &sl_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_PCIE), &sgmii_pcie_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_SGMII, TYPE_USB), &sgmii_usb_xcvr_diag_ln_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_NONE), &sl_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_PCIE), &sgmii_pcie_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_QSGMII, TYPE_USB), &sgmii_usb_xcvr_diag_ln_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_NONE), &sl_usb_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_PCIE), &usb_pcie_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_SGMII), &usb_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_QSGMII), &usb_sgmii_xcvr_diag_ln_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_DP), &usb_dp_xcvr_diag_ln_vals},\n\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USXGMII, TYPE_NONE), &sl_usxgmii_xcvr_diag_ln_vals},\n};\n\nstatic struct cdns_torrent_vals_entry pcs_cmn_vals_entries[] = {\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_NONE), &usb_phy_pcs_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_PCIE), &usb_phy_pcs_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_SGMII), &usb_phy_pcs_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_QSGMII), &usb_phy_pcs_cmn_vals},\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USB, TYPE_DP), &usb_phy_pcs_cmn_vals},\n};\n\nstatic struct cdns_torrent_vals_entry cmn_vals_entries[] = {\n\t{CDNS_TORRENT_KEY(CLK_19_2_MHZ, CLK_19_2_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_19_2_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_25_MHZ, CLK_25_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_25_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_PCIE, NO_SSC), &dp_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_USB, NO_SSC), &sl_dp_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, INTERNAL_SSC), &sl_pcie_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, NO_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, EXTERNAL_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, INTERNAL_SSC), &pcie_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, NO_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, EXTERNAL_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, INTERNAL_SSC), &pcie_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, NO_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, EXTERNAL_SSC), &pcie_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, INTERNAL_SSC), &pcie_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_DP, NO_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_NONE, NO_SSC), &sl_sgmii_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, NO_SSC), &sgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, EXTERNAL_SSC), &sgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, INTERNAL_SSC), &sgmii_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, NO_SSC), &sgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, EXTERNAL_SSC), &sgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, INTERNAL_SSC), &sgmii_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_NONE, NO_SSC), &sl_qsgmii_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, NO_SSC), &qsgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, EXTERNAL_SSC), &qsgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, INTERNAL_SSC), &qsgmii_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, NO_SSC), &qsgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, EXTERNAL_SSC), &qsgmii_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, INTERNAL_SSC), &qsgmii_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, NO_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, EXTERNAL_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, INTERNAL_SSC), &sl_usb_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, NO_SSC), &usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, EXTERNAL_SSC), &usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, INTERNAL_SSC), &usb_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, NO_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, EXTERNAL_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, INTERNAL_SSC), &sl_usb_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, NO_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, EXTERNAL_SSC), &sl_usb_100_no_ssc_cmn_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, INTERNAL_SSC), &sl_usb_100_int_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_DP, NO_SSC), &usb_100_no_ssc_cmn_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_156_25_MHZ, CLK_156_25_MHZ, TYPE_USXGMII, TYPE_NONE, NO_SSC), &sl_usxgmii_156_25_no_ssc_cmn_vals},\n};\n\nstatic struct cdns_torrent_vals_entry cdns_tx_ln_vals_entries[] = {\n\t{CDNS_TORRENT_KEY(CLK_19_2_MHZ, CLK_19_2_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_19_2_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_25_MHZ, CLK_25_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_25_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_PCIE, NO_SSC), &dp_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_USB, NO_SSC), &dp_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_DP, NO_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_NONE, NO_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, NO_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, EXTERNAL_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, INTERNAL_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, NO_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, EXTERNAL_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, INTERNAL_SSC), &sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_NONE, NO_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, NO_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, EXTERNAL_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, INTERNAL_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, NO_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, EXTERNAL_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, INTERNAL_SSC), &qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_DP, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_156_25_MHZ, CLK_156_25_MHZ, TYPE_USXGMII, TYPE_NONE, NO_SSC), &usxgmii_156_25_no_ssc_tx_ln_vals},\n};\n\nstatic struct cdns_torrent_vals_entry cdns_rx_ln_vals_entries[] = {\n\t{CDNS_TORRENT_KEY(CLK_19_2_MHZ, CLK_19_2_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_19_2_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_25_MHZ, CLK_25_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_25_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_PCIE, NO_SSC), &dp_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_USB, NO_SSC), &dp_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, NO_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, EXTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, INTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, NO_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, EXTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, INTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, NO_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, EXTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, INTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, NO_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, EXTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, INTERNAL_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_DP, NO_SSC), &pcie_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_NONE, NO_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, NO_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, EXTERNAL_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, INTERNAL_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, NO_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, EXTERNAL_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, INTERNAL_SSC), &sgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_NONE, NO_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, NO_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, EXTERNAL_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, INTERNAL_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, NO_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, EXTERNAL_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, INTERNAL_SSC), &qsgmii_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, NO_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, EXTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, INTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, NO_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, EXTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, INTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, NO_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, EXTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, INTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, NO_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, EXTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, INTERNAL_SSC), &usb_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_DP, NO_SSC), &usb_100_no_ssc_rx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_156_25_MHZ, CLK_156_25_MHZ, TYPE_USXGMII, TYPE_NONE, NO_SSC), &usxgmii_156_25_no_ssc_rx_ln_vals},\n};\n\nstatic const struct cdns_torrent_data cdns_map_torrent = {\n\t.block_offset_shift = 0x2,\n\t.reg_offset_shift = 0x2,\n\t.link_cmn_vals_tbl = {\n\t\t.entries = link_cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(link_cmn_vals_entries),\n\t},\n\t.xcvr_diag_vals_tbl = {\n\t\t.entries = xcvr_diag_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(xcvr_diag_vals_entries),\n\t},\n\t.pcs_cmn_vals_tbl = {\n\t\t.entries = pcs_cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(pcs_cmn_vals_entries),\n\t},\n\t.cmn_vals_tbl = {\n\t\t.entries = cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(cmn_vals_entries),\n\t},\n\t.tx_ln_vals_tbl = {\n\t\t.entries = cdns_tx_ln_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(cdns_tx_ln_vals_entries),\n\t},\n\t.rx_ln_vals_tbl = {\n\t\t.entries = cdns_rx_ln_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(cdns_rx_ln_vals_entries),\n\t},\n};\n\nstatic struct cdns_torrent_vals_entry j721e_phy_pma_cmn_vals_entries[] = {\n\t{CDNS_TORRENT_KEY_ANYCLK(TYPE_USXGMII, TYPE_NONE), &ti_usxgmii_phy_pma_cmn_vals},\n};\n\nstatic struct cdns_torrent_vals_entry ti_tx_ln_vals_entries[] = {\n\t{CDNS_TORRENT_KEY(CLK_19_2_MHZ, CLK_19_2_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_19_2_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_25_MHZ, CLK_25_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_25_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_NONE, NO_SSC), &sl_dp_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_PCIE, NO_SSC), &dp_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_DP, TYPE_USB, NO_SSC), &dp_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_NONE, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_SGMII, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_QSGMII, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, NO_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, EXTERNAL_SSC), NULL},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_USB, INTERNAL_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_PCIE, TYPE_DP, NO_SSC), NULL},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_NONE, NO_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, NO_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, EXTERNAL_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_PCIE, INTERNAL_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, NO_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, EXTERNAL_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_SGMII, TYPE_USB, INTERNAL_SSC), &ti_sgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_NONE, NO_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, NO_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, EXTERNAL_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_PCIE, INTERNAL_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, NO_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, EXTERNAL_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_QSGMII, TYPE_USB, INTERNAL_SSC), &ti_qsgmii_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_NONE, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_PCIE, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_SGMII, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, EXTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_QSGMII, INTERNAL_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_100_MHZ, CLK_100_MHZ, TYPE_USB, TYPE_DP, NO_SSC), &usb_100_no_ssc_tx_ln_vals},\n\n\t{CDNS_TORRENT_KEY(CLK_156_25_MHZ, CLK_156_25_MHZ, TYPE_USXGMII, TYPE_NONE, NO_SSC), &usxgmii_156_25_no_ssc_tx_ln_vals},\n};\n\nstatic const struct cdns_torrent_data ti_j721e_map_torrent = {\n\t.block_offset_shift = 0x0,\n\t.reg_offset_shift = 0x1,\n\t.link_cmn_vals_tbl = {\n\t\t.entries = link_cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(link_cmn_vals_entries),\n\t},\n\t.xcvr_diag_vals_tbl = {\n\t\t.entries = xcvr_diag_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(xcvr_diag_vals_entries),\n\t},\n\t.pcs_cmn_vals_tbl = {\n\t\t.entries = pcs_cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(pcs_cmn_vals_entries),\n\t},\n\t.phy_pma_cmn_vals_tbl = {\n\t\t.entries = j721e_phy_pma_cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(j721e_phy_pma_cmn_vals_entries),\n\t},\n\t.cmn_vals_tbl = {\n\t\t.entries = cmn_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(cmn_vals_entries),\n\t},\n\t.tx_ln_vals_tbl = {\n\t\t.entries = ti_tx_ln_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(ti_tx_ln_vals_entries),\n\t},\n\t.rx_ln_vals_tbl = {\n\t\t.entries = cdns_rx_ln_vals_entries,\n\t\t.num_entries = ARRAY_SIZE(cdns_rx_ln_vals_entries),\n\t},\n};\n\nstatic const struct of_device_id cdns_torrent_phy_of_match[] = {\n\t{\n\t\t.compatible = \"cdns,torrent-phy\",\n\t\t.data = &cdns_map_torrent,\n\t},\n\t{\n\t\t.compatible = \"ti,j721e-serdes-10g\",\n\t\t.data = &ti_j721e_map_torrent,\n\t},\n\t{}\n};\nMODULE_DEVICE_TABLE(of, cdns_torrent_phy_of_match);\n\nstatic struct platform_driver cdns_torrent_phy_driver = {\n\t.probe\t= cdns_torrent_phy_probe,\n\t.remove_new = cdns_torrent_phy_remove,\n\t.driver = {\n\t\t.name\t= \"cdns-torrent-phy\",\n\t\t.of_match_table\t= cdns_torrent_phy_of_match,\n\t}\n};\nmodule_platform_driver(cdns_torrent_phy_driver);\n\nMODULE_AUTHOR(\"Cadence Design Systems, Inc.\");\nMODULE_DESCRIPTION(\"Cadence Torrent PHY driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}