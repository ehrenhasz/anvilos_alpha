{
  "module_name": "phy-brcm-usb-init.h",
  "hash_id": "1c18aa72a9ee64fb33edccc7baaf85ddc80b806ec8baa36dfbd2afd1bcb84cb1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/phy/broadcom/phy-brcm-usb-init.h",
  "human_readable_source": " \n \n\n#ifndef _USB_BRCM_COMMON_INIT_H\n#define _USB_BRCM_COMMON_INIT_H\n\n#include <linux/regmap.h>\n\n#define USB_CTLR_MODE_HOST 0\n#define USB_CTLR_MODE_DEVICE 1\n#define USB_CTLR_MODE_DRD 2\n#define USB_CTLR_MODE_TYPEC_PD 3\n\nenum brcmusb_reg_sel {\n\tBRCM_REGS_CTRL = 0,\n\tBRCM_REGS_XHCI_EC,\n\tBRCM_REGS_XHCI_GBL,\n\tBRCM_REGS_USB_PHY,\n\tBRCM_REGS_USB_MDIO,\n\tBRCM_REGS_BDC_EC,\n\tBRCM_REGS_MAX\n};\n\n#define USB_CTRL_REG(base, reg)\t((void __iomem *)base + USB_CTRL_##reg)\n#define USB_XHCI_EC_REG(base, reg) ((void __iomem *)base + USB_XHCI_EC_##reg)\n#define USB_CTRL_MASK(reg, field) \\\n\tUSB_CTRL_##reg##_##field##_MASK\n#define USB_CTRL_SET(base, reg, field)\t\\\n\tbrcm_usb_ctrl_set(USB_CTRL_REG(base, reg),\t\\\n\t\t\t  USB_CTRL_##reg##_##field##_MASK)\n#define USB_CTRL_UNSET(base, reg, field)\t\\\n\tbrcm_usb_ctrl_unset(USB_CTRL_REG(base, reg),\t\t\\\n\t\t\t    USB_CTRL_##reg##_##field##_MASK)\n\n#define USB_XHCI_GBL_REG(base, reg) ((void __iomem *)base + USB_XHCI_GBL_##reg)\n#define USB_XHCI_GBL_SET(base, reg, field) \\\n\tbrcm_usb_ctrl_set(USB_XHCI_GBL_REG(base, reg), \\\n\t\t\t  USB_XHCI_GBL_##reg##_##field##_MASK)\n#define USB_XHCI_GBL_UNSET(base, reg, field) \\\n\tbrcm_usb_ctrl_unset(USB_XHCI_GBL_REG(base, reg), \\\n\t\t\t    USB_XHCI_GBL_##reg##_##field##_MASK)\n\nstruct  brcm_usb_init_params;\n\nstruct brcm_usb_init_ops {\n\tvoid (*init_ipp)(struct brcm_usb_init_params *params);\n\tvoid (*init_common)(struct brcm_usb_init_params *params);\n\tvoid (*init_eohci)(struct brcm_usb_init_params *params);\n\tvoid (*init_xhci)(struct brcm_usb_init_params *params);\n\tvoid (*uninit_common)(struct brcm_usb_init_params *params);\n\tvoid (*uninit_eohci)(struct brcm_usb_init_params *params);\n\tvoid (*uninit_xhci)(struct brcm_usb_init_params *params);\n\tint  (*get_dual_select)(struct brcm_usb_init_params *params);\n\tvoid (*set_dual_select)(struct brcm_usb_init_params *params);\n};\n\nstruct  brcm_usb_init_params {\n\tvoid __iomem *regs[BRCM_REGS_MAX];\n\tint ioc;\n\tint ipp;\n\tint supported_port_modes;\n\tint port_mode;\n\tu32 family_id;\n\tu32 product_id;\n\tint selected_family;\n\tconst char *family_name;\n\tconst u32 *usb_reg_bits_map;\n\tconst struct brcm_usb_init_ops *ops;\n\tstruct regmap *syscon_piarbctl;\n\tbool wake_enabled;\n};\n\nvoid brcm_usb_dvr_init_4908(struct brcm_usb_init_params *params);\nvoid brcm_usb_dvr_init_7445(struct brcm_usb_init_params *params);\nvoid brcm_usb_dvr_init_7216(struct brcm_usb_init_params *params);\nvoid brcm_usb_dvr_init_7211b0(struct brcm_usb_init_params *params);\n\nstatic inline u32 brcm_usb_readl(void __iomem *addr)\n{\n\t \n\tif (IS_ENABLED(CONFIG_MIPS) && IS_ENABLED(CONFIG_CPU_BIG_ENDIAN))\n\t\treturn __raw_readl(addr);\n\telse\n\t\treturn readl_relaxed(addr);\n}\n\nstatic inline void brcm_usb_writel(u32 val, void __iomem *addr)\n{\n\t \n\tif (IS_ENABLED(CONFIG_MIPS) && IS_ENABLED(CONFIG_CPU_BIG_ENDIAN))\n\t\t__raw_writel(val, addr);\n\telse\n\t\twritel_relaxed(val, addr);\n}\n\nstatic inline void brcm_usb_ctrl_unset(void __iomem *reg, u32 mask)\n{\n\tbrcm_usb_writel(brcm_usb_readl(reg) & ~(mask), reg);\n};\n\nstatic inline void brcm_usb_ctrl_set(void __iomem *reg, u32 mask)\n{\n\tbrcm_usb_writel(brcm_usb_readl(reg) | (mask), reg);\n};\n\nstatic inline void brcm_usb_init_ipp(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->init_ipp)\n\t\tini->ops->init_ipp(ini);\n}\n\nstatic inline void brcm_usb_init_common(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->init_common)\n\t\tini->ops->init_common(ini);\n}\n\nstatic inline void brcm_usb_init_eohci(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->init_eohci)\n\t\tini->ops->init_eohci(ini);\n}\n\nstatic inline void brcm_usb_init_xhci(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->init_xhci)\n\t\tini->ops->init_xhci(ini);\n}\n\nstatic inline void brcm_usb_uninit_common(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->uninit_common)\n\t\tini->ops->uninit_common(ini);\n}\n\nstatic inline void brcm_usb_uninit_eohci(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->uninit_eohci)\n\t\tini->ops->uninit_eohci(ini);\n}\n\nstatic inline void brcm_usb_uninit_xhci(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->uninit_xhci)\n\t\tini->ops->uninit_xhci(ini);\n}\n\nstatic inline int brcm_usb_get_dual_select(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->get_dual_select)\n\t\treturn ini->ops->get_dual_select(ini);\n\treturn 0;\n}\n\nstatic inline void brcm_usb_set_dual_select(struct brcm_usb_init_params *ini)\n{\n\tif (ini->ops->set_dual_select)\n\t\tini->ops->set_dual_select(ini);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}