{
  "module_name": "phy-samsung-ufs.h",
  "hash_id": "c44a7a7d367264756d514f6ee0c005b823f30e2cfa69952eedb6f3877e155522",
  "original_prompt": "Ingested from linux-6.6.14/drivers/phy/samsung/phy-samsung-ufs.h",
  "human_readable_source": " \n \n#ifndef _PHY_SAMSUNG_UFS_\n#define _PHY_SAMSUNG_UFS_\n\n#include <linux/phy/phy.h>\n#include <linux/regmap.h>\n\n#define PHY_COMN_BLK\t1\n#define PHY_TRSV_BLK\t2\n#define END_UFS_PHY_CFG { 0 }\n#define PHY_TRSV_CH_OFFSET\t0x30\n#define PHY_APB_ADDR(off)\t((off) << 2)\n\n#define PHY_COMN_REG_CFG(o, v, d) {\t\\\n\t.off_0 = PHY_APB_ADDR((o)),\t\\\n\t.off_1 = 0,\t\t\\\n\t.val = (v),\t\t\\\n\t.desc = (d),\t\t\\\n\t.id = PHY_COMN_BLK,\t\\\n}\n\n#define PHY_TRSV_REG_CFG_OFFSET(o, v, d, c) {\t\\\n\t.off_0 = PHY_APB_ADDR((o)),\t\\\n\t.off_1 = PHY_APB_ADDR((o) + (c)),\t\\\n\t.val = (v),\t\t\\\n\t.desc = (d),\t\t\\\n\t.id = PHY_TRSV_BLK,\t\\\n}\n\n#define PHY_TRSV_REG_CFG(o, v, d)\t\\\n\tPHY_TRSV_REG_CFG_OFFSET(o, v, d, PHY_TRSV_CH_OFFSET)\n\n \n#define PHY_PLL_LOCK_STATUS\t0x1e\n\n#define PHY_PLL_LOCK_BIT\tBIT(5)\n#define PHY_CDR_LOCK_BIT\tBIT(4)\n\n \nenum {\n\t \n\tPWR_DESC_ANY\t= 0,\n\t \n\tPWR_DESC_PWM\t= 1,\n\tPWR_DESC_HS\t= 2,\n\t \n\tPWR_DESC_SER_A\t= 1,\n\tPWR_DESC_SER_B\t= 2,\n\t \n\tPWR_DESC_G1\t= 1,\n\tPWR_DESC_G2\t= 2,\n\tPWR_DESC_G3\t= 3,\n\t \n\tMD_MASK\t\t= 0x3,\n\tSR_MASK\t\t= 0x3,\n\tGR_MASK\t\t= 0x7,\n};\n\n#define PWR_MODE_HS_G1_ANY\tPWR_MODE_HS(PWR_DESC_G1, PWR_DESC_ANY)\n#define PWR_MODE_HS_G1_SER_A\tPWR_MODE_HS(PWR_DESC_G1, PWR_DESC_SER_A)\n#define PWR_MODE_HS_G1_SER_B\tPWR_MODE_HS(PWR_DESC_G1, PWR_DESC_SER_B)\n#define PWR_MODE_HS_G2_ANY\tPWR_MODE_HS(PWR_DESC_G2, PWR_DESC_ANY)\n#define PWR_MODE_HS_G2_SER_A\tPWR_MODE_HS(PWR_DESC_G2, PWR_DESC_SER_A)\n#define PWR_MODE_HS_G2_SER_B\tPWR_MODE_HS(PWR_DESC_G2, PWR_DESC_SER_B)\n#define PWR_MODE_HS_G3_ANY\tPWR_MODE_HS(PWR_DESC_G3, PWR_DESC_ANY)\n#define PWR_MODE_HS_G3_SER_A\tPWR_MODE_HS(PWR_DESC_G3, PWR_DESC_SER_A)\n#define PWR_MODE_HS_G3_SER_B\tPWR_MODE_HS(PWR_DESC_G3, PWR_DESC_SER_B)\n#define PWR_MODE(g, s, m)\t((((g) & GR_MASK) << 4) |\\\n\t\t\t\t (((s) & SR_MASK) << 2) | ((m) & MD_MASK))\n#define PWR_MODE_PWM_ANY\tPWR_MODE(PWR_DESC_ANY,\\\n\t\t\t\t\t PWR_DESC_ANY, PWR_DESC_PWM)\n#define PWR_MODE_HS(g, s)\t((((g) & GR_MASK) << 4) |\\\n\t\t\t\t (((s) & SR_MASK) << 2) | PWR_DESC_HS)\n#define PWR_MODE_HS_ANY\t\tPWR_MODE(PWR_DESC_ANY,\\\n\t\t\t\t\t PWR_DESC_ANY, PWR_DESC_HS)\n#define PWR_MODE_ANY\t\tPWR_MODE(PWR_DESC_ANY,\\\n\t\t\t\t\t PWR_DESC_ANY, PWR_DESC_ANY)\n \nenum {\n\tCFG_PRE_INIT,\n\tCFG_POST_INIT,\n\tCFG_PRE_PWR_HS,\n\tCFG_POST_PWR_HS,\n\tCFG_TAG_MAX,\n};\n\nstruct samsung_ufs_phy_cfg {\n\tu32 off_0;\n\tu32 off_1;\n\tu32 val;\n\tu8 desc;\n\tu8 id;\n};\n\nstruct samsung_ufs_phy_pmu_isol {\n\tu32 offset;\n\tu32 mask;\n\tu32 en;\n};\n\nstruct samsung_ufs_phy_drvdata {\n\tconst struct samsung_ufs_phy_cfg **cfgs;\n\tstruct samsung_ufs_phy_pmu_isol isol;\n\tconst char * const *clk_list;\n\tint num_clks;\n\tu32 cdr_lock_status_offset;\n};\n\nstruct samsung_ufs_phy {\n\tstruct device *dev;\n\tvoid __iomem *reg_pma;\n\tstruct regmap *reg_pmu;\n\tstruct clk_bulk_data *clks;\n\tconst struct samsung_ufs_phy_drvdata *drvdata;\n\tconst struct samsung_ufs_phy_cfg * const *cfgs;\n\tstruct samsung_ufs_phy_pmu_isol isol;\n\tu8 lane_cnt;\n\tint ufs_phy_state;\n\tenum phy_mode mode;\n};\n\nstatic inline struct samsung_ufs_phy *get_samsung_ufs_phy(struct phy *phy)\n{\n\treturn (struct samsung_ufs_phy *)phy_get_drvdata(phy);\n}\n\nstatic inline void samsung_ufs_phy_ctrl_isol(\n\t\tstruct samsung_ufs_phy *phy, u32 isol)\n{\n\tregmap_update_bits(phy->reg_pmu, phy->isol.offset,\n\t\t\t   phy->isol.mask, isol ? 0 : phy->isol.en);\n}\n\nextern const struct samsung_ufs_phy_drvdata exynos7_ufs_phy;\nextern const struct samsung_ufs_phy_drvdata exynosautov9_ufs_phy;\nextern const struct samsung_ufs_phy_drvdata fsd_ufs_phy;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}