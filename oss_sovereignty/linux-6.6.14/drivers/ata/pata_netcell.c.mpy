{
  "module_name": "pata_netcell.c",
  "hash_id": "3dc55bd226f08e687da57572a3b92779be974f5d52ba792da006b02806b1acc1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/ata/pata_netcell.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pci.h>\n#include <linux/blkdev.h>\n#include <linux/delay.h>\n#include <linux/device.h>\n#include <scsi/scsi_host.h>\n#include <linux/libata.h>\n#include <linux/ata.h>\n\n#define DRV_NAME\t\"pata_netcell\"\n#define DRV_VERSION\t\"0.1.7\"\n\n \n\nstatic unsigned int netcell_read_id(struct ata_device *adev,\n\t\t\t\t    struct ata_taskfile *tf, __le16 *id)\n{\n\tunsigned int err_mask = ata_do_dev_read_id(adev, tf, id);\n\n\t \n\tif (err_mask == 0)\n\t\tid[ATA_ID_CSF_DEFAULT] |= cpu_to_le16(0x4000);\n\treturn err_mask;\n}\n\nstatic const struct scsi_host_template netcell_sht = {\n\tATA_BMDMA_SHT(DRV_NAME),\n};\n\nstatic struct ata_port_operations netcell_ops = {\n\t.inherits\t= &ata_bmdma_port_ops,\n\t.cable_detect\t= ata_cable_80wire,\n\t.read_id\t= netcell_read_id,\n};\n\n\n \n\nstatic int netcell_init_one (struct pci_dev *pdev, const struct pci_device_id *ent)\n{\n\tstatic const struct ata_port_info info = {\n\t\t.flags\t\t= ATA_FLAG_SLAVE_POSS,\n\t\t \n\t\t.pio_mask\t= ATA_PIO4,\n\t\t.mwdma_mask\t= ATA_MWDMA2,\n\t\t.udma_mask \t= ATA_UDMA5,  \n\t\t.port_ops\t= &netcell_ops,\n\t};\n\tconst struct ata_port_info *port_info[] = { &info, NULL };\n\tint rc;\n\n\tata_print_version_once(&pdev->dev, DRV_VERSION);\n\n\trc = pcim_enable_device(pdev);\n\tif (rc)\n\t\treturn rc;\n\n\t \n\tata_pci_bmdma_clear_simplex(pdev);\n\n\t \n\treturn ata_pci_bmdma_init_one(pdev, port_info, &netcell_sht, NULL, 0);\n}\n\nstatic const struct pci_device_id netcell_pci_tbl[] = {\n\t{ PCI_VDEVICE(NETCELL, PCI_DEVICE_ID_REVOLUTION), },\n\n\t{ }\t \n};\n\nstatic struct pci_driver netcell_pci_driver = {\n\t.name\t\t\t= DRV_NAME,\n\t.id_table\t\t= netcell_pci_tbl,\n\t.probe\t\t\t= netcell_init_one,\n\t.remove\t\t\t= ata_pci_remove_one,\n#ifdef CONFIG_PM_SLEEP\n\t.suspend\t\t= ata_pci_device_suspend,\n\t.resume\t\t\t= ata_pci_device_resume,\n#endif\n};\n\nmodule_pci_driver(netcell_pci_driver);\n\nMODULE_AUTHOR(\"Alan Cox\");\nMODULE_DESCRIPTION(\"SCSI low-level driver for Netcell PATA RAID\");\nMODULE_LICENSE(\"GPL\");\nMODULE_DEVICE_TABLE(pci, netcell_pci_tbl);\nMODULE_VERSION(DRV_VERSION);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}