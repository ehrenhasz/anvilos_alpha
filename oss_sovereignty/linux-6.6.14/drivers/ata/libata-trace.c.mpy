{
  "module_name": "libata-trace.c",
  "hash_id": "0f7677dd503a3caf9ec57d20863955efd2cf7fdded9c0af9da3968a30a3abde0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/ata/libata-trace.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/trace_seq.h>\n#include <trace/events/libata.h>\n\nconst char *\nlibata_trace_parse_status(struct trace_seq *p, unsigned char status)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"{ \");\n\tif (status & ATA_BUSY)\n\t\ttrace_seq_printf(p, \"BUSY \");\n\tif (status & ATA_DRDY)\n\t\ttrace_seq_printf(p, \"DRDY \");\n\tif (status & ATA_DF)\n\t\ttrace_seq_printf(p, \"DF \");\n\tif (status & ATA_DSC)\n\t\ttrace_seq_printf(p, \"DSC \");\n\tif (status & ATA_DRQ)\n\t\ttrace_seq_printf(p, \"DRQ \");\n\tif (status & ATA_CORR)\n\t\ttrace_seq_printf(p, \"CORR \");\n\tif (status & ATA_SENSE)\n\t\ttrace_seq_printf(p, \"SENSE \");\n\tif (status & ATA_ERR)\n\t\ttrace_seq_printf(p, \"ERR \");\n\ttrace_seq_putc(p, '}');\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_host_stat(struct trace_seq *p, unsigned char host_stat)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"{ \");\n\tif (host_stat & ATA_DMA_INTR)\n\t\ttrace_seq_printf(p, \"INTR \");\n\tif (host_stat & ATA_DMA_ERR)\n\t\ttrace_seq_printf(p, \"ERR \");\n\tif (host_stat & ATA_DMA_ACTIVE)\n\t\ttrace_seq_printf(p, \"ACTIVE \");\n\ttrace_seq_putc(p, '}');\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_eh_action(struct trace_seq *p, unsigned int eh_action)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"%x\", eh_action);\n\tif (eh_action) {\n\t\ttrace_seq_printf(p, \"{ \");\n\t\tif (eh_action & ATA_EH_REVALIDATE)\n\t\t\ttrace_seq_printf(p, \"REVALIDATE \");\n\t\tif (eh_action & (ATA_EH_SOFTRESET | ATA_EH_HARDRESET))\n\t\t\ttrace_seq_printf(p, \"RESET \");\n\t\telse if (eh_action & ATA_EH_SOFTRESET)\n\t\t\ttrace_seq_printf(p, \"SOFTRESET \");\n\t\telse if (eh_action & ATA_EH_HARDRESET)\n\t\t\ttrace_seq_printf(p, \"HARDRESET \");\n\t\tif (eh_action & ATA_EH_ENABLE_LINK)\n\t\t\ttrace_seq_printf(p, \"ENABLE_LINK \");\n\t\tif (eh_action & ATA_EH_PARK)\n\t\t\ttrace_seq_printf(p, \"PARK \");\n\t\ttrace_seq_putc(p, '}');\n\t}\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_eh_err_mask(struct trace_seq *p, unsigned int eh_err_mask)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"%x\", eh_err_mask);\n\tif (eh_err_mask) {\n\t\ttrace_seq_printf(p, \"{ \");\n\t\tif (eh_err_mask & AC_ERR_DEV)\n\t\t\ttrace_seq_printf(p, \"DEV \");\n\t\tif (eh_err_mask & AC_ERR_HSM)\n\t\t\ttrace_seq_printf(p, \"HSM \");\n\t\tif (eh_err_mask & AC_ERR_TIMEOUT)\n\t\t\ttrace_seq_printf(p, \"TIMEOUT \");\n\t\tif (eh_err_mask & AC_ERR_MEDIA)\n\t\t\ttrace_seq_printf(p, \"MEDIA \");\n\t\tif (eh_err_mask & AC_ERR_ATA_BUS)\n\t\t\ttrace_seq_printf(p, \"ATA_BUS \");\n\t\tif (eh_err_mask & AC_ERR_HOST_BUS)\n\t\t\ttrace_seq_printf(p, \"HOST_BUS \");\n\t\tif (eh_err_mask & AC_ERR_SYSTEM)\n\t\t\ttrace_seq_printf(p, \"SYSTEM \");\n\t\tif (eh_err_mask & AC_ERR_INVALID)\n\t\t\ttrace_seq_printf(p, \"INVALID \");\n\t\tif (eh_err_mask & AC_ERR_OTHER)\n\t\t\ttrace_seq_printf(p, \"OTHER \");\n\t\tif (eh_err_mask & AC_ERR_NODEV_HINT)\n\t\t\ttrace_seq_printf(p, \"NODEV_HINT \");\n\t\tif (eh_err_mask & AC_ERR_NCQ)\n\t\t\ttrace_seq_printf(p, \"NCQ \");\n\t\ttrace_seq_putc(p, '}');\n\t}\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_qc_flags(struct trace_seq *p, unsigned int qc_flags)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"%x\", qc_flags);\n\tif (qc_flags) {\n\t\ttrace_seq_printf(p, \"{ \");\n\t\tif (qc_flags & ATA_QCFLAG_ACTIVE)\n\t\t\ttrace_seq_printf(p, \"ACTIVE \");\n\t\tif (qc_flags & ATA_QCFLAG_DMAMAP)\n\t\t\ttrace_seq_printf(p, \"DMAMAP \");\n\t\tif (qc_flags & ATA_QCFLAG_IO)\n\t\t\ttrace_seq_printf(p, \"IO \");\n\t\tif (qc_flags & ATA_QCFLAG_RESULT_TF)\n\t\t\ttrace_seq_printf(p, \"RESULT_TF \");\n\t\tif (qc_flags & ATA_QCFLAG_CLEAR_EXCL)\n\t\t\ttrace_seq_printf(p, \"CLEAR_EXCL \");\n\t\tif (qc_flags & ATA_QCFLAG_QUIET)\n\t\t\ttrace_seq_printf(p, \"QUIET \");\n\t\tif (qc_flags & ATA_QCFLAG_RETRY)\n\t\t\ttrace_seq_printf(p, \"RETRY \");\n\t\tif (qc_flags & ATA_QCFLAG_EH)\n\t\t\ttrace_seq_printf(p, \"FAILED \");\n\t\tif (qc_flags & ATA_QCFLAG_SENSE_VALID)\n\t\t\ttrace_seq_printf(p, \"SENSE_VALID \");\n\t\tif (qc_flags & ATA_QCFLAG_EH_SCHEDULED)\n\t\t\ttrace_seq_printf(p, \"EH_SCHEDULED \");\n\t\ttrace_seq_putc(p, '}');\n\t}\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_tf_flags(struct trace_seq *p, unsigned int tf_flags)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"%x\", tf_flags);\n\tif (tf_flags) {\n\t\ttrace_seq_printf(p, \"{ \");\n\t\tif (tf_flags & ATA_TFLAG_LBA48)\n\t\t\ttrace_seq_printf(p, \"LBA48 \");\n\t\tif (tf_flags & ATA_TFLAG_ISADDR)\n\t\t\ttrace_seq_printf(p, \"ISADDR \");\n\t\tif (tf_flags & ATA_TFLAG_DEVICE)\n\t\t\ttrace_seq_printf(p, \"DEV \");\n\t\tif (tf_flags & ATA_TFLAG_WRITE)\n\t\t\ttrace_seq_printf(p, \"WRITE \");\n\t\tif (tf_flags & ATA_TFLAG_LBA)\n\t\t\ttrace_seq_printf(p, \"LBA \");\n\t\tif (tf_flags & ATA_TFLAG_FUA)\n\t\t\ttrace_seq_printf(p, \"FUA \");\n\t\tif (tf_flags & ATA_TFLAG_POLLING)\n\t\t\ttrace_seq_printf(p, \"POLL \");\n\t\ttrace_seq_putc(p, '}');\n\t}\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *\nlibata_trace_parse_subcmd(struct trace_seq *p, unsigned char cmd,\n\t\t\t  unsigned char feature, unsigned char hob_nsect)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\tswitch (cmd) {\n\tcase ATA_CMD_FPDMA_RECV:\n\t\tswitch (hob_nsect & 0x5f) {\n\t\tcase ATA_SUBCMD_FPDMA_RECV_RD_LOG_DMA_EXT:\n\t\t\ttrace_seq_printf(p, \" READ_LOG_DMA_EXT\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_FPDMA_RECV_ZAC_MGMT_IN:\n\t\t\ttrace_seq_printf(p, \" ZAC_MGMT_IN\");\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase ATA_CMD_FPDMA_SEND:\n\t\tswitch (hob_nsect & 0x5f) {\n\t\tcase ATA_SUBCMD_FPDMA_SEND_WR_LOG_DMA_EXT:\n\t\t\ttrace_seq_printf(p, \" WRITE_LOG_DMA_EXT\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_FPDMA_SEND_DSM:\n\t\t\ttrace_seq_printf(p, \" DATASET_MANAGEMENT\");\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase ATA_CMD_NCQ_NON_DATA:\n\t\tswitch (feature) {\n\t\tcase ATA_SUBCMD_NCQ_NON_DATA_ABORT_QUEUE:\n\t\t\ttrace_seq_printf(p, \" ABORT_QUEUE\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_NCQ_NON_DATA_SET_FEATURES:\n\t\t\ttrace_seq_printf(p, \" SET_FEATURES\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_NCQ_NON_DATA_ZERO_EXT:\n\t\t\ttrace_seq_printf(p, \" ZERO_EXT\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_NCQ_NON_DATA_ZAC_MGMT_OUT:\n\t\t\ttrace_seq_printf(p, \" ZAC_MGMT_OUT\");\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase ATA_CMD_ZAC_MGMT_IN:\n\t\tswitch (feature) {\n\t\tcase ATA_SUBCMD_ZAC_MGMT_IN_REPORT_ZONES:\n\t\t\ttrace_seq_printf(p, \" REPORT_ZONES\");\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase ATA_CMD_ZAC_MGMT_OUT:\n\t\tswitch (feature) {\n\t\tcase ATA_SUBCMD_ZAC_MGMT_OUT_CLOSE_ZONE:\n\t\t\ttrace_seq_printf(p, \" CLOSE_ZONE\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_ZAC_MGMT_OUT_FINISH_ZONE:\n\t\t\ttrace_seq_printf(p, \" FINISH_ZONE\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_ZAC_MGMT_OUT_OPEN_ZONE:\n\t\t\ttrace_seq_printf(p, \" OPEN_ZONE\");\n\t\t\tbreak;\n\t\tcase ATA_SUBCMD_ZAC_MGMT_OUT_RESET_WRITE_POINTER:\n\t\t\ttrace_seq_printf(p, \" RESET_WRITE_POINTER\");\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\t}\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}