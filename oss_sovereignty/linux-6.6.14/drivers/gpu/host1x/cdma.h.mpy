{
  "module_name": "cdma.h",
  "hash_id": "1b2c59c8dd31cae19fa5690c4aa611fa120a57c46d7a66c096539b46cfa380f9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/host1x/cdma.h",
  "human_readable_source": " \n \n\n#ifndef __HOST1X_CDMA_H\n#define __HOST1X_CDMA_H\n\n#include <linux/sched.h>\n#include <linux/completion.h>\n#include <linux/list.h>\n#include <linux/workqueue.h>\n\nstruct host1x_syncpt;\nstruct host1x_userctx_timeout;\nstruct host1x_job;\n\n \n\nstruct push_buffer {\n\tvoid *mapped;\t\t\t \n\tdma_addr_t dma;\t\t\t \n\tdma_addr_t phys;\t\t \n\tu32 fence;\t\t\t \n\tu32 pos;\t\t\t \n\tu32 size;\n\tu32 alloc_size;\n};\n\nstruct buffer_timeout {\n\tstruct delayed_work wq;\t\t \n\tbool initialized;\t\t \n\tstruct host1x_syncpt *syncpt;\t \n\tu32 syncpt_val;\t\t\t \n\tktime_t start_ktime;\t\t \n\t \n\tstruct host1x_client *client;\n};\n\nenum cdma_event {\n\tCDMA_EVENT_NONE,\t\t \n\tCDMA_EVENT_SYNC_QUEUE_EMPTY,\t \n\tCDMA_EVENT_PUSH_BUFFER_SPACE\t \n};\n\nstruct host1x_cdma {\n\tstruct mutex lock;\t\t \n\tstruct completion complete;\t \n\tenum cdma_event event;\t\t \n\tunsigned int slots_used;\t \n\tunsigned int slots_free;\t \n\tunsigned int first_get;\t\t \n\tunsigned int last_pos;\t\t \n\tstruct push_buffer push_buffer;\t \n\tstruct list_head sync_queue;\t \n\tstruct buffer_timeout timeout;\t \n\tbool running;\n\tbool torndown;\n\tstruct work_struct update_work;\n};\n\n#define cdma_to_channel(cdma) container_of(cdma, struct host1x_channel, cdma)\n#define cdma_to_host1x(cdma) dev_get_drvdata(cdma_to_channel(cdma)->dev->parent)\n#define pb_to_cdma(pb) container_of(pb, struct host1x_cdma, push_buffer)\n\nint host1x_cdma_init(struct host1x_cdma *cdma);\nint host1x_cdma_deinit(struct host1x_cdma *cdma);\nint host1x_cdma_begin(struct host1x_cdma *cdma, struct host1x_job *job);\nvoid host1x_cdma_push(struct host1x_cdma *cdma, u32 op1, u32 op2);\nvoid host1x_cdma_push_wide(struct host1x_cdma *cdma, u32 op1, u32 op2,\n\t\t\t   u32 op3, u32 op4);\nvoid host1x_cdma_end(struct host1x_cdma *cdma, struct host1x_job *job);\nvoid host1x_cdma_update(struct host1x_cdma *cdma);\nvoid host1x_cdma_peek(struct host1x_cdma *cdma, u32 dmaget, int slot,\n\t\t      u32 *out);\nunsigned int host1x_cdma_wait_locked(struct host1x_cdma *cdma,\n\t\t\t\t     enum cdma_event event);\nvoid host1x_cdma_update_sync_queue(struct host1x_cdma *cdma,\n\t\t\t\t   struct device *dev);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}