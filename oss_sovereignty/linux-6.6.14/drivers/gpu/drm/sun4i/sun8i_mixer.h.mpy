{
  "module_name": "sun8i_mixer.h",
  "hash_id": "7191090627688d6618f47a51243f803c54afc9bd05ec911ff7431d738b01cf33",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/sun4i/sun8i_mixer.h",
  "human_readable_source": " \n \n\n#ifndef _SUN8I_MIXER_H_\n#define _SUN8I_MIXER_H_\n\n#include <linux/clk.h>\n#include <linux/regmap.h>\n#include <linux/reset.h>\n\n#include \"sunxi_engine.h\"\n\n#define SUN8I_MIXER_SIZE(w, h)\t\t\t(((h) - 1) << 16 | ((w) - 1))\n#define SUN8I_MIXER_COORD(x, y)\t\t\t((y) << 16 | (x))\n\n#define SUN8I_MIXER_GLOBAL_CTL\t\t\t0x0\n#define SUN8I_MIXER_GLOBAL_STATUS\t\t0x4\n#define SUN8I_MIXER_GLOBAL_DBUFF\t\t0x8\n#define SUN8I_MIXER_GLOBAL_SIZE\t\t\t0xc\n\n#define SUN8I_MIXER_GLOBAL_CTL_RT_EN\t\tBIT(0)\n\n#define SUN8I_MIXER_GLOBAL_DBUFF_ENABLE\t\tBIT(0)\n\n#define DE2_MIXER_UNIT_SIZE\t\t\t0x6000\n#define DE3_MIXER_UNIT_SIZE\t\t\t0x3000\n\n#define DE2_BLD_BASE\t\t\t\t0x1000\n#define DE2_CH_BASE\t\t\t\t0x2000\n#define DE2_CH_SIZE\t\t\t\t0x1000\n\n#define DE3_BLD_BASE\t\t\t\t0x0800\n#define DE3_CH_BASE\t\t\t\t0x1000\n#define DE3_CH_SIZE\t\t\t\t0x0800\n\n#define SUN8I_MIXER_BLEND_PIPE_CTL(base)\t((base) + 0)\n#define SUN8I_MIXER_BLEND_ATTR_FCOLOR(base, x)\t((base) + 0x4 + 0x10 * (x))\n#define SUN8I_MIXER_BLEND_ATTR_INSIZE(base, x)\t((base) + 0x8 + 0x10 * (x))\n#define SUN8I_MIXER_BLEND_ATTR_COORD(base, x)\t((base) + 0xc + 0x10 * (x))\n#define SUN8I_MIXER_BLEND_ROUTE(base)\t\t((base) + 0x80)\n#define SUN8I_MIXER_BLEND_PREMULTIPLY(base)\t((base) + 0x84)\n#define SUN8I_MIXER_BLEND_BKCOLOR(base)\t\t((base) + 0x88)\n#define SUN8I_MIXER_BLEND_OUTSIZE(base)\t\t((base) + 0x8c)\n#define SUN8I_MIXER_BLEND_MODE(base, x)\t\t((base) + 0x90 + 0x04 * (x))\n#define SUN8I_MIXER_BLEND_CK_CTL(base)\t\t((base) + 0xb0)\n#define SUN8I_MIXER_BLEND_CK_CFG(base)\t\t((base) + 0xb4)\n#define SUN8I_MIXER_BLEND_CK_MAX(base, x)\t((base) + 0xc0 + 0x04 * (x))\n#define SUN8I_MIXER_BLEND_CK_MIN(base, x)\t((base) + 0xe0 + 0x04 * (x))\n#define SUN8I_MIXER_BLEND_OUTCTL(base)\t\t((base) + 0xfc)\n#define SUN50I_MIXER_BLEND_CSC_CTL(base)\t((base) + 0x100)\n#define SUN50I_MIXER_BLEND_CSC_COEFF(base, layer, x) \\\n\t((base) + 0x110 + (layer) * 0x30 +  (x) * 4)\n\n#define SUN8I_MIXER_BLEND_PIPE_CTL_EN_MSK\tGENMASK(12, 8)\n#define SUN8I_MIXER_BLEND_PIPE_CTL_EN(pipe)\tBIT(8 + pipe)\n#define SUN8I_MIXER_BLEND_PIPE_CTL_FC_EN(pipe)\tBIT(pipe)\n\n \n#define SUN8I_MIXER_BLEND_COLOR_BLACK\t\t0xff000000\n \n#define SUN8I_MIXER_BLEND_MODE_DEF\t\t0x03010301\n\n#define SUN8I_MIXER_BLEND_ROUTE_PIPE_MSK(n)\t(0xf << ((n) << 2))\n#define SUN8I_MIXER_BLEND_ROUTE_PIPE_SHIFT(n)\t((n) << 2)\n\n#define SUN8I_MIXER_BLEND_OUTCTL_INTERLACED\tBIT(1)\n\n#define SUN50I_MIXER_BLEND_CSC_CTL_EN(ch)\tBIT(ch)\n#define SUN50I_MIXER_BLEND_CSC_CONST_VAL(d, c)\t(((d) << 16) | ((c) & 0xffff))\n\n#define SUN8I_MIXER_FBFMT_ARGB8888\t0\n#define SUN8I_MIXER_FBFMT_ABGR8888\t1\n#define SUN8I_MIXER_FBFMT_RGBA8888\t2\n#define SUN8I_MIXER_FBFMT_BGRA8888\t3\n#define SUN8I_MIXER_FBFMT_XRGB8888\t4\n#define SUN8I_MIXER_FBFMT_XBGR8888\t5\n#define SUN8I_MIXER_FBFMT_RGBX8888\t6\n#define SUN8I_MIXER_FBFMT_BGRX8888\t7\n#define SUN8I_MIXER_FBFMT_RGB888\t8\n#define SUN8I_MIXER_FBFMT_BGR888\t9\n#define SUN8I_MIXER_FBFMT_RGB565\t10\n#define SUN8I_MIXER_FBFMT_BGR565\t11\n#define SUN8I_MIXER_FBFMT_ARGB4444\t12\n#define SUN8I_MIXER_FBFMT_ABGR4444\t13\n#define SUN8I_MIXER_FBFMT_RGBA4444\t14\n#define SUN8I_MIXER_FBFMT_BGRA4444\t15\n#define SUN8I_MIXER_FBFMT_ARGB1555\t16\n#define SUN8I_MIXER_FBFMT_ABGR1555\t17\n#define SUN8I_MIXER_FBFMT_RGBA5551\t18\n#define SUN8I_MIXER_FBFMT_BGRA5551\t19\n#define SUN8I_MIXER_FBFMT_ARGB2101010\t20\n#define SUN8I_MIXER_FBFMT_ABGR2101010\t21\n#define SUN8I_MIXER_FBFMT_RGBA1010102\t22\n#define SUN8I_MIXER_FBFMT_BGRA1010102\t23\n\n#define SUN8I_MIXER_FBFMT_YUYV\t\t0\n#define SUN8I_MIXER_FBFMT_UYVY\t\t1\n#define SUN8I_MIXER_FBFMT_YVYU\t\t2\n#define SUN8I_MIXER_FBFMT_VYUY\t\t3\n#define SUN8I_MIXER_FBFMT_NV16\t\t4\n#define SUN8I_MIXER_FBFMT_NV61\t\t5\n#define SUN8I_MIXER_FBFMT_YUV422\t6\n \n#define SUN8I_MIXER_FBFMT_NV12\t\t8\n#define SUN8I_MIXER_FBFMT_NV21\t\t9\n#define SUN8I_MIXER_FBFMT_YUV420\t10\n \n \n \n#define SUN8I_MIXER_FBFMT_YUV411\t14\n \n#define SUN8I_MIXER_FBFMT_P010_YUV\t16\n \n#define SUN8I_MIXER_FBFMT_P210_YUV\t18\n \n \n \n\n \n#define SUN8I_MIXER_FCE_EN\t\t\t0xa0000\n#define SUN8I_MIXER_BWS_EN\t\t\t0xa2000\n#define SUN8I_MIXER_LTI_EN\t\t\t0xa4000\n#define SUN8I_MIXER_PEAK_EN\t\t\t0xa6000\n#define SUN8I_MIXER_ASE_EN\t\t\t0xa8000\n#define SUN8I_MIXER_FCC_EN\t\t\t0xaa000\n#define SUN8I_MIXER_DCSC_EN\t\t\t0xb0000\n\n#define SUN50I_MIXER_FCE_EN\t\t\t0x70000\n#define SUN50I_MIXER_PEAK_EN\t\t\t0x70800\n#define SUN50I_MIXER_LCTI_EN\t\t\t0x71000\n#define SUN50I_MIXER_BLS_EN\t\t\t0x71800\n#define SUN50I_MIXER_FCC_EN\t\t\t0x72000\n#define SUN50I_MIXER_DNS_EN\t\t\t0x80000\n#define SUN50I_MIXER_DRC_EN\t\t\t0xa0000\n#define SUN50I_MIXER_FMT_EN\t\t\t0xa8000\n#define SUN50I_MIXER_CDC0_EN\t\t\t0xd0000\n#define SUN50I_MIXER_CDC1_EN\t\t\t0xd8000\n\nenum {\n\t \n\tCCSC_MIXER0_LAYOUT,\n\t \n\tCCSC_MIXER1_LAYOUT,\n\t \n\tCCSC_D1_MIXER0_LAYOUT,\n};\n\n \nstruct sun8i_mixer_cfg {\n\tint\t\tvi_num;\n\tint\t\tui_num;\n\tint\t\tscaler_mask;\n\tint\t\tccsc;\n\tunsigned long\tmod_rate;\n\tunsigned int\tis_de3 : 1;\n\tunsigned int\tscanline_yuv;\n};\n\nstruct sun8i_mixer {\n\tstruct sunxi_engine\t\tengine;\n\n\tconst struct sun8i_mixer_cfg\t*cfg;\n\n\tstruct reset_control\t\t*reset;\n\n\tstruct clk\t\t\t*bus_clk;\n\tstruct clk\t\t\t*mod_clk;\n};\n\nstatic inline struct sun8i_mixer *\nengine_to_sun8i_mixer(struct sunxi_engine *engine)\n{\n\treturn container_of(engine, struct sun8i_mixer, engine);\n}\n\nstatic inline u32\nsun8i_blender_base(struct sun8i_mixer *mixer)\n{\n\treturn mixer->cfg->is_de3 ? DE3_BLD_BASE : DE2_BLD_BASE;\n}\n\nstatic inline u32\nsun8i_channel_base(struct sun8i_mixer *mixer, int channel)\n{\n\tif (mixer->cfg->is_de3)\n\t\treturn DE3_CH_BASE + channel * DE3_CH_SIZE;\n\telse\n\t\treturn DE2_CH_BASE + channel * DE2_CH_SIZE;\n}\n\nint sun8i_mixer_drm_format_to_hw(u32 format, u32 *hw_format);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}