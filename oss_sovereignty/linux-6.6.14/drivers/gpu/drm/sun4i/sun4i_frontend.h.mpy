{
  "module_name": "sun4i_frontend.h",
  "hash_id": "dcee2616c536eb759e7a79b53e8a36218e362f327c457d8e82a92cdcd73b5ff6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/sun4i/sun4i_frontend.h",
  "human_readable_source": "\n \n\n#ifndef _SUN4I_FRONTEND_H_\n#define _SUN4I_FRONTEND_H_\n\n#include <linux/list.h>\n#include <linux/mod_devicetable.h>\n\n#define SUN4I_FRONTEND_EN_REG\t\t\t0x000\n#define SUN4I_FRONTEND_EN_EN\t\t\t\tBIT(0)\n\n#define SUN4I_FRONTEND_FRM_CTRL_REG\t\t0x004\n#define SUN4I_FRONTEND_FRM_CTRL_COEF_ACCESS_CTRL\tBIT(23)\n#define SUN4I_FRONTEND_FRM_CTRL_FRM_START\t\tBIT(16)\n#define SUN4I_FRONTEND_FRM_CTRL_COEF_RDY\t\tBIT(1)\n#define SUN4I_FRONTEND_FRM_CTRL_REG_RDY\t\t\tBIT(0)\n\n#define SUN4I_FRONTEND_BYPASS_REG\t\t0x008\n#define SUN4I_FRONTEND_BYPASS_CSC_EN\t\t\tBIT(1)\n\n#define SUN4I_FRONTEND_BUF_ADDR0_REG\t\t0x020\n#define SUN4I_FRONTEND_BUF_ADDR1_REG\t\t0x024\n#define SUN4I_FRONTEND_BUF_ADDR2_REG\t\t0x028\n\n#define SUN4I_FRONTEND_TB_OFF0_REG\t\t0x030\n#define SUN4I_FRONTEND_TB_OFF1_REG\t\t0x034\n#define SUN4I_FRONTEND_TB_OFF2_REG\t\t0x038\n#define SUN4I_FRONTEND_TB_OFF_X1(x1)\t\t\t((x1) << 16)\n#define SUN4I_FRONTEND_TB_OFF_Y0(y0)\t\t\t((y0) << 8)\n#define SUN4I_FRONTEND_TB_OFF_X0(x0)\t\t\t(x0)\n\n#define SUN4I_FRONTEND_LINESTRD0_REG\t\t0x040\n#define SUN4I_FRONTEND_LINESTRD1_REG\t\t0x044\n#define SUN4I_FRONTEND_LINESTRD2_REG\t\t0x048\n\n \n#define SUN4I_FRONTEND_LINESTRD_TILED(stride)\t\t(((stride) - 31) * 32)\n\n#define SUN4I_FRONTEND_INPUT_FMT_REG\t\t0x04c\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_MOD_PLANAR\t(0 << 8)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_MOD_PACKED\t(1 << 8)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_MOD_SEMIPLANAR\t(2 << 8)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_MOD_MB32_PLANAR\t(4 << 8)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_MOD_MB32_SEMIPLANAR (6 << 8)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_FMT_YUV444\t(0 << 4)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_FMT_YUV422\t(1 << 4)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_FMT_YUV420\t(2 << 4)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_FMT_YUV411\t(3 << 4)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_FMT_RGB\t\t(5 << 4)\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_UYVY\t\t0\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_YUYV\t\t1\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_VYUY\t\t2\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_YVYU\t\t3\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_UV\t\t0\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_VU\t\t1\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_BGRX\t\t0\n#define SUN4I_FRONTEND_INPUT_FMT_DATA_PS_XRGB\t\t1\n\n#define SUN4I_FRONTEND_OUTPUT_FMT_REG\t\t0x05c\n#define SUN4I_FRONTEND_OUTPUT_FMT_DATA_FMT_BGRX8888\t1\n#define SUN4I_FRONTEND_OUTPUT_FMT_DATA_FMT_XRGB8888\t2\n\n#define SUN4I_FRONTEND_CSC_COEF_REG(c)\t\t(0x070 + (0x4 * (c)))\n\n#define SUN4I_FRONTEND_CH0_INSIZE_REG\t\t0x100\n#define SUN4I_FRONTEND_INSIZE(h, w)\t\t\t((((h) - 1) << 16) | (((w) - 1)))\n\n#define SUN4I_FRONTEND_CH0_OUTSIZE_REG\t\t0x104\n#define SUN4I_FRONTEND_OUTSIZE(h, w)\t\t\t((((h) - 1) << 16) | (((w) - 1)))\n\n#define SUN4I_FRONTEND_CH0_HORZFACT_REG\t\t0x108\n#define SUN4I_FRONTEND_HORZFACT(i, f)\t\t\t(((i) << 16) | (f))\n\n#define SUN4I_FRONTEND_CH0_VERTFACT_REG\t\t0x10c\n#define SUN4I_FRONTEND_VERTFACT(i, f)\t\t\t(((i) << 16) | (f))\n\n#define SUN4I_FRONTEND_CH0_HORZPHASE_REG\t0x110\n#define SUN4I_FRONTEND_CH0_VERTPHASE0_REG\t0x114\n#define SUN4I_FRONTEND_CH0_VERTPHASE1_REG\t0x118\n\n#define SUN4I_FRONTEND_CH1_INSIZE_REG\t\t0x200\n#define SUN4I_FRONTEND_CH1_OUTSIZE_REG\t\t0x204\n#define SUN4I_FRONTEND_CH1_HORZFACT_REG\t\t0x208\n#define SUN4I_FRONTEND_CH1_VERTFACT_REG\t\t0x20c\n\n#define SUN4I_FRONTEND_CH1_HORZPHASE_REG\t0x210\n#define SUN4I_FRONTEND_CH1_VERTPHASE0_REG\t0x214\n#define SUN4I_FRONTEND_CH1_VERTPHASE1_REG\t0x218\n\n#define SUN4I_FRONTEND_CH0_HORZCOEF0_REG(i)\t(0x400 + i * 4)\n#define SUN4I_FRONTEND_CH0_HORZCOEF1_REG(i)\t(0x480 + i * 4)\n#define SUN4I_FRONTEND_CH0_VERTCOEF_REG(i)\t(0x500 + i * 4)\n#define SUN4I_FRONTEND_CH1_HORZCOEF0_REG(i)\t(0x600 + i * 4)\n#define SUN4I_FRONTEND_CH1_HORZCOEF1_REG(i)\t(0x680 + i * 4)\n#define SUN4I_FRONTEND_CH1_VERTCOEF_REG(i)\t(0x700 + i * 4)\n\nstruct clk;\nstruct device_node;\nstruct drm_plane;\nstruct regmap;\nstruct reset_control;\n\nstruct sun4i_frontend_data {\n\tbool\thas_coef_access_ctrl;\n\tbool\thas_coef_rdy;\n\tu32\tch_phase[2];\n};\n\nstruct sun4i_frontend {\n\tstruct list_head\tlist;\n\tstruct device\t\t*dev;\n\tstruct device_node\t*node;\n\n\tstruct clk\t\t*bus_clk;\n\tstruct clk\t\t*mod_clk;\n\tstruct clk\t\t*ram_clk;\n\tstruct regmap\t\t*regs;\n\tstruct reset_control\t*reset;\n\n\tconst struct sun4i_frontend_data\t*data;\n};\n\nextern const struct of_device_id sun4i_frontend_of_table[];\nextern const u32 sunxi_bt601_yuv2rgb_coef[12];\n\nint sun4i_frontend_init(struct sun4i_frontend *frontend);\nvoid sun4i_frontend_exit(struct sun4i_frontend *frontend);\nint sun4i_frontend_enable(struct sun4i_frontend *frontend);\n\nvoid sun4i_frontend_update_buffer(struct sun4i_frontend *frontend,\n\t\t\t\t  struct drm_plane *plane);\nvoid sun4i_frontend_update_coord(struct sun4i_frontend *frontend,\n\t\t\t\t struct drm_plane *plane);\nint sun4i_frontend_update_formats(struct sun4i_frontend *frontend,\n\t\t\t\t  struct drm_plane *plane, uint32_t out_fmt);\nbool sun4i_frontend_format_is_supported(uint32_t fmt, uint64_t modifier);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}