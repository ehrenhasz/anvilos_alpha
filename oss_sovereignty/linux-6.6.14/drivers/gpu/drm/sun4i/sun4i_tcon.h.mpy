{
  "module_name": "sun4i_tcon.h",
  "hash_id": "90b58aeb2f37f30d33ca6972b5378e476bf631a1dd503b993fdfdbba4f8e0835",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/sun4i/sun4i_tcon.h",
  "human_readable_source": " \n \n\n#ifndef __SUN4I_TCON_H__\n#define __SUN4I_TCON_H__\n\n#include <drm/drm_crtc.h>\n\n#include <linux/kernel.h>\n#include <linux/list.h>\n#include <linux/mod_devicetable.h>\n#include <linux/reset.h>\n\n#define SUN4I_TCON_GCTL_REG\t\t\t0x0\n#define SUN4I_TCON_GCTL_TCON_ENABLE\t\t\tBIT(31)\n#define SUN4I_TCON_GCTL_IOMAP_MASK\t\t\tBIT(0)\n#define SUN4I_TCON_GCTL_IOMAP_TCON1\t\t\t(1 << 0)\n#define SUN4I_TCON_GCTL_IOMAP_TCON0\t\t\t(0 << 0)\n\n#define SUN4I_TCON_GINT0_REG\t\t\t0x4\n#define SUN4I_TCON_GINT0_VBLANK_ENABLE(pipe)\t\tBIT(31 - (pipe))\n#define SUN4I_TCON_GINT0_TCON0_TRI_FINISH_ENABLE\tBIT(27)\n#define SUN4I_TCON_GINT0_TCON0_TRI_COUNTER_ENABLE\tBIT(26)\n#define SUN4I_TCON_GINT0_VBLANK_INT(pipe)\t\tBIT(15 - (pipe))\n#define SUN4I_TCON_GINT0_TCON0_TRI_FINISH_INT\t\tBIT(11)\n#define SUN4I_TCON_GINT0_TCON0_TRI_COUNTER_INT\t\tBIT(10)\n\n#define SUN4I_TCON_GINT1_REG\t\t\t0x8\n\n#define SUN4I_TCON_FRM_CTL_REG\t\t\t0x10\n#define SUN4I_TCON0_FRM_CTL_EN\t\t\t\tBIT(31)\n#define SUN4I_TCON0_FRM_CTL_MODE_R\t\t\tBIT(6)\n#define SUN4I_TCON0_FRM_CTL_MODE_G\t\t\tBIT(5)\n#define SUN4I_TCON0_FRM_CTL_MODE_B\t\t\tBIT(4)\n\n#define SUN4I_TCON0_FRM_SEED_PR_REG\t\t0x14\n#define SUN4I_TCON0_FRM_SEED_PG_REG\t\t0x18\n#define SUN4I_TCON0_FRM_SEED_PB_REG\t\t0x1c\n#define SUN4I_TCON0_FRM_SEED_LR_REG\t\t0x20\n#define SUN4I_TCON0_FRM_SEED_LG_REG\t\t0x24\n#define SUN4I_TCON0_FRM_SEED_LB_REG\t\t0x28\n#define SUN4I_TCON0_FRM_TBL0_REG\t\t0x2c\n#define SUN4I_TCON0_FRM_TBL1_REG\t\t0x30\n#define SUN4I_TCON0_FRM_TBL2_REG\t\t0x34\n#define SUN4I_TCON0_FRM_TBL3_REG\t\t0x38\n\n#define SUN4I_TCON0_CTL_REG\t\t\t0x40\n#define SUN4I_TCON0_CTL_TCON_ENABLE\t\t\tBIT(31)\n#define SUN4I_TCON0_CTL_IF_MASK\t\t\t\tGENMASK(25, 24)\n#define SUN4I_TCON0_CTL_IF_8080\t\t\t\t(1 << 24)\n#define SUN4I_TCON0_CTL_CLK_DELAY_MASK\t\t\tGENMASK(8, 4)\n#define SUN4I_TCON0_CTL_CLK_DELAY(delay)\t\t((delay << 4) & SUN4I_TCON0_CTL_CLK_DELAY_MASK)\n#define SUN4I_TCON0_CTL_SRC_SEL_MASK\t\t\tGENMASK(2, 0)\n\n#define SUN4I_TCON0_DCLK_REG\t\t\t0x44\n#define SUN4I_TCON0_DCLK_GATE_BIT\t\t\t(31)\n#define SUN4I_TCON0_DCLK_DIV_SHIFT\t\t\t(0)\n#define SUN4I_TCON0_DCLK_DIV_WIDTH\t\t\t(7)\n\n#define SUN4I_TCON0_BASIC0_REG\t\t\t0x48\n#define SUN4I_TCON0_BASIC0_X(width)\t\t\t((((width) - 1) & 0xfff) << 16)\n#define SUN4I_TCON0_BASIC0_Y(height)\t\t\t(((height) - 1) & 0xfff)\n\n#define SUN4I_TCON0_BASIC1_REG\t\t\t0x4c\n#define SUN4I_TCON0_BASIC1_H_TOTAL(total)\t\t((((total) - 1) & 0x1fff) << 16)\n#define SUN4I_TCON0_BASIC1_H_BACKPORCH(bp)\t\t(((bp) - 1) & 0xfff)\n\n#define SUN4I_TCON0_BASIC2_REG\t\t\t0x50\n#define SUN4I_TCON0_BASIC2_V_TOTAL(total)\t\t(((total) & 0x1fff) << 16)\n#define SUN4I_TCON0_BASIC2_V_BACKPORCH(bp)\t\t(((bp) - 1) & 0xfff)\n\n#define SUN4I_TCON0_BASIC3_REG\t\t\t0x54\n#define SUN4I_TCON0_BASIC3_H_SYNC(width)\t\t((((width) - 1) & 0x7ff) << 16)\n#define SUN4I_TCON0_BASIC3_V_SYNC(height)\t\t(((height) - 1) & 0x7ff)\n\n#define SUN4I_TCON0_HV_IF_REG\t\t\t0x58\n\n#define SUN4I_TCON0_CPU_IF_REG\t\t\t0x60\n#define SUN4I_TCON0_CPU_IF_MODE_MASK\t\t\tGENMASK(31, 28)\n#define SUN4I_TCON0_CPU_IF_MODE_DSI\t\t\t(1 << 28)\n#define SUN4I_TCON0_CPU_IF_TRI_FIFO_FLUSH\t\tBIT(16)\n#define SUN4I_TCON0_CPU_IF_TRI_FIFO_EN\t\t\tBIT(2)\n#define SUN4I_TCON0_CPU_IF_TRI_EN\t\t\tBIT(0)\n\n#define SUN4I_TCON0_CPU_WR_REG\t\t\t0x64\n#define SUN4I_TCON0_CPU_RD0_REG\t\t\t0x68\n#define SUN4I_TCON0_CPU_RDA_REG\t\t\t0x6c\n#define SUN4I_TCON0_TTL0_REG\t\t\t0x70\n#define SUN4I_TCON0_TTL1_REG\t\t\t0x74\n#define SUN4I_TCON0_TTL2_REG\t\t\t0x78\n#define SUN4I_TCON0_TTL3_REG\t\t\t0x7c\n#define SUN4I_TCON0_TTL4_REG\t\t\t0x80\n\n#define SUN4I_TCON0_LVDS_IF_REG\t\t\t0x84\n#define SUN4I_TCON0_LVDS_IF_EN\t\t\t\tBIT(31)\n#define SUN4I_TCON0_LVDS_IF_BITWIDTH_MASK\t\tBIT(26)\n#define SUN4I_TCON0_LVDS_IF_BITWIDTH_18BITS\t\t(1 << 26)\n#define SUN4I_TCON0_LVDS_IF_BITWIDTH_24BITS\t\t(0 << 26)\n#define SUN4I_TCON0_LVDS_IF_CLK_SEL_MASK\t\tBIT(20)\n#define SUN4I_TCON0_LVDS_IF_CLK_SEL_TCON0\t\t(1 << 20)\n#define SUN4I_TCON0_LVDS_IF_CLK_POL_MASK\t\tBIT(4)\n#define SUN4I_TCON0_LVDS_IF_CLK_POL_NORMAL\t\t(1 << 4)\n#define SUN4I_TCON0_LVDS_IF_CLK_POL_INV\t\t\t(0 << 4)\n#define SUN4I_TCON0_LVDS_IF_DATA_POL_MASK\t\tGENMASK(3, 0)\n#define SUN4I_TCON0_LVDS_IF_DATA_POL_NORMAL\t\t(0xf)\n#define SUN4I_TCON0_LVDS_IF_DATA_POL_INV\t\t(0)\n\n#define SUN4I_TCON0_IO_POL_REG\t\t\t0x88\n#define SUN4I_TCON0_IO_POL_DCLK_PHASE(phase)\t\t((phase & 3) << 28)\n#define SUN4I_TCON0_IO_POL_DE_NEGATIVE\t\t\tBIT(27)\n#define SUN4I_TCON0_IO_POL_DCLK_DRIVE_NEGEDGE\t\tBIT(26)\n#define SUN4I_TCON0_IO_POL_HSYNC_POSITIVE\t\tBIT(25)\n#define SUN4I_TCON0_IO_POL_VSYNC_POSITIVE\t\tBIT(24)\n\n#define SUN4I_TCON0_IO_TRI_REG\t\t\t0x8c\n#define SUN4I_TCON0_IO_TRI_HSYNC_DISABLE\t\tBIT(25)\n#define SUN4I_TCON0_IO_TRI_VSYNC_DISABLE\t\tBIT(24)\n#define SUN4I_TCON0_IO_TRI_DATA_PINS_DISABLE(pins)\tGENMASK(pins, 0)\n\n#define SUN4I_TCON1_CTL_REG\t\t\t0x90\n#define SUN4I_TCON1_CTL_TCON_ENABLE\t\t\tBIT(31)\n#define SUN4I_TCON1_CTL_INTERLACE_ENABLE\t\tBIT(20)\n#define SUN4I_TCON1_CTL_CLK_DELAY_MASK\t\t\tGENMASK(8, 4)\n#define SUN4I_TCON1_CTL_CLK_DELAY(delay)\t\t((delay << 4) & SUN4I_TCON1_CTL_CLK_DELAY_MASK)\n#define SUN4I_TCON1_CTL_SRC_SEL_MASK\t\t\tGENMASK(1, 0)\n\n#define SUN4I_TCON1_BASIC0_REG\t\t\t0x94\n#define SUN4I_TCON1_BASIC0_X(width)\t\t\t((((width) - 1) & 0xfff) << 16)\n#define SUN4I_TCON1_BASIC0_Y(height)\t\t\t(((height) - 1) & 0xfff)\n\n#define SUN4I_TCON1_BASIC1_REG\t\t\t0x98\n#define SUN4I_TCON1_BASIC1_X(width)\t\t\t((((width) - 1) & 0xfff) << 16)\n#define SUN4I_TCON1_BASIC1_Y(height)\t\t\t(((height) - 1) & 0xfff)\n\n#define SUN4I_TCON1_BASIC2_REG\t\t\t0x9c\n#define SUN4I_TCON1_BASIC2_X(width)\t\t\t((((width) - 1) & 0xfff) << 16)\n#define SUN4I_TCON1_BASIC2_Y(height)\t\t\t(((height) - 1) & 0xfff)\n\n#define SUN4I_TCON1_BASIC3_REG\t\t\t0xa0\n#define SUN4I_TCON1_BASIC3_H_TOTAL(total)\t\t((((total) - 1) & 0x1fff) << 16)\n#define SUN4I_TCON1_BASIC3_H_BACKPORCH(bp)\t\t(((bp) - 1) & 0xfff)\n\n#define SUN4I_TCON1_BASIC4_REG\t\t\t0xa4\n#define SUN4I_TCON1_BASIC4_V_TOTAL(total)\t\t(((total) & 0x1fff) << 16)\n#define SUN4I_TCON1_BASIC4_V_BACKPORCH(bp)\t\t(((bp) - 1) & 0xfff)\n\n#define SUN4I_TCON1_BASIC5_REG\t\t\t0xa8\n#define SUN4I_TCON1_BASIC5_H_SYNC(width)\t\t((((width) - 1) & 0x3ff) << 16)\n#define SUN4I_TCON1_BASIC5_V_SYNC(height)\t\t(((height) - 1) & 0x3ff)\n\n#define SUN4I_TCON1_IO_POL_REG\t\t\t0xf0\n \n#define SUN4I_TCON1_IO_POL_UNKNOWN\t\t\tBIT(26)\n#define SUN4I_TCON1_IO_POL_HSYNC_POSITIVE\t\tBIT(25)\n#define SUN4I_TCON1_IO_POL_VSYNC_POSITIVE\t\tBIT(24)\n\n#define SUN4I_TCON1_IO_TRI_REG\t\t\t0xf4\n\n#define SUN4I_TCON_ECC_FIFO_REG\t\t\t0xf8\n#define SUN4I_TCON_ECC_FIFO_EN\t\t\t\tBIT(3)\n\n#define SUN4I_TCON_CEU_CTL_REG\t\t\t0x100\n#define SUN4I_TCON_CEU_MUL_RR_REG\t\t0x110\n#define SUN4I_TCON_CEU_MUL_RG_REG\t\t0x114\n#define SUN4I_TCON_CEU_MUL_RB_REG\t\t0x118\n#define SUN4I_TCON_CEU_ADD_RC_REG\t\t0x11c\n#define SUN4I_TCON_CEU_MUL_GR_REG\t\t0x120\n#define SUN4I_TCON_CEU_MUL_GG_REG\t\t0x124\n#define SUN4I_TCON_CEU_MUL_GB_REG\t\t0x128\n#define SUN4I_TCON_CEU_ADD_GC_REG\t\t0x12c\n#define SUN4I_TCON_CEU_MUL_BR_REG\t\t0x130\n#define SUN4I_TCON_CEU_MUL_BG_REG\t\t0x134\n#define SUN4I_TCON_CEU_MUL_BB_REG\t\t0x138\n#define SUN4I_TCON_CEU_ADD_BC_REG\t\t0x13c\n#define SUN4I_TCON_CEU_RANGE_R_REG\t\t0x140\n#define SUN4I_TCON_CEU_RANGE_G_REG\t\t0x144\n#define SUN4I_TCON_CEU_RANGE_B_REG\t\t0x148\n\n#define SUN4I_TCON0_CPU_TRI0_REG\t\t0x160\n#define SUN4I_TCON0_CPU_TRI0_BLOCK_SPACE(space)\t\t((((space) - 1) & 0xfff) << 16)\n#define SUN4I_TCON0_CPU_TRI0_BLOCK_SIZE(size)\t\t(((size) - 1) & 0xfff)\n\n#define SUN4I_TCON0_CPU_TRI1_REG\t\t0x164\n#define SUN4I_TCON0_CPU_TRI1_BLOCK_NUM(num)\t\t(((num) - 1) & 0xffff)\n\n#define SUN4I_TCON0_CPU_TRI2_REG\t\t0x168\n#define SUN4I_TCON0_CPU_TRI2_START_DELAY(delay)\t\t(((delay) & 0xffff) << 16)\n#define SUN4I_TCON0_CPU_TRI2_TRANS_START_SET(set)\t((set) & 0xfff)\n\n#define SUN4I_TCON_SAFE_PERIOD_REG\t\t0x1f0\n#define SUN4I_TCON_SAFE_PERIOD_NUM(num)\t\t\t(((num) & 0xfff) << 16)\n#define SUN4I_TCON_SAFE_PERIOD_MODE(mode)\t\t((mode) & 0x3)\n\n#define SUN4I_TCON_MUX_CTRL_REG\t\t\t0x200\n\n#define SUN4I_TCON0_LVDS_ANA0_REG\t\t0x220\n#define SUN4I_TCON0_LVDS_ANA0_DCHS\t\t\tBIT(16)\n#define SUN4I_TCON0_LVDS_ANA0_PD\t\t\t(BIT(20) | BIT(21))\n#define SUN4I_TCON0_LVDS_ANA0_EN_MB\t\t\tBIT(22)\n#define SUN4I_TCON0_LVDS_ANA0_REG_C\t\t\t(BIT(24) | BIT(25))\n#define SUN4I_TCON0_LVDS_ANA0_REG_V\t\t\t(BIT(26) | BIT(27))\n#define SUN4I_TCON0_LVDS_ANA0_CK_EN\t\t\t(BIT(29) | BIT(28))\n\n#define SUN6I_TCON0_LVDS_ANA0_EN_MB\t\t\tBIT(31)\n#define SUN6I_TCON0_LVDS_ANA0_EN_LDO\t\t\tBIT(30)\n#define SUN6I_TCON0_LVDS_ANA0_EN_DRVC\t\t\tBIT(24)\n#define SUN6I_TCON0_LVDS_ANA0_EN_DRVD(x)\t\t(((x) & 0xf) << 20)\n#define SUN6I_TCON0_LVDS_ANA0_C(x)\t\t\t(((x) & 3) << 17)\n#define SUN6I_TCON0_LVDS_ANA0_V(x)\t\t\t(((x) & 3) << 8)\n#define SUN6I_TCON0_LVDS_ANA0_PD(x)\t\t\t(((x) & 3) << 4)\n\n#define SUN4I_TCON0_LVDS_ANA1_REG\t\t0x224\n#define SUN4I_TCON0_LVDS_ANA1_INIT\t\t\t(0x1f << 26 | 0x1f << 10)\n#define SUN4I_TCON0_LVDS_ANA1_UPDATE\t\t\t(0x1f << 16 | 0x1f << 00)\n\n#define SUN4I_TCON1_FILL_CTL_REG\t\t0x300\n#define SUN4I_TCON1_FILL_BEG0_REG\t\t0x304\n#define SUN4I_TCON1_FILL_END0_REG\t\t0x308\n#define SUN4I_TCON1_FILL_DATA0_REG\t\t0x30c\n#define SUN4I_TCON1_FILL_BEG1_REG\t\t0x310\n#define SUN4I_TCON1_FILL_END1_REG\t\t0x314\n#define SUN4I_TCON1_FILL_DATA1_REG\t\t0x318\n#define SUN4I_TCON1_FILL_BEG2_REG\t\t0x31c\n#define SUN4I_TCON1_FILL_END2_REG\t\t0x320\n#define SUN4I_TCON1_FILL_DATA2_REG\t\t0x324\n#define SUN4I_TCON1_GAMMA_TABLE_REG\t\t0x400\n\n#define SUN4I_TCON_MAX_CHANNELS\t\t2\n\nstruct sun4i_tcon;\n\nstruct sun4i_tcon_quirks {\n\tbool\thas_channel_0;\t \n\tbool\thas_channel_1;\t \n\tbool\thas_lvds_alt;\t \n\tbool\tneeds_de_be_mux;  \n\tbool    needs_edp_reset;  \n\tbool\tsupports_lvds;    \n\tbool\tpolarity_in_ch0;  \n\tu8\tdclk_min_div;\t \n\n\t \n\tint\t(*set_mux)(struct sun4i_tcon *, const struct drm_encoder *);\n\t \n\tvoid\t(*setup_lvds_phy)(struct sun4i_tcon *tcon,\n\t\t\t\t  const struct drm_encoder *encoder);\n};\n\nstruct sun4i_tcon {\n\tstruct device\t\t\t*dev;\n\tstruct drm_device\t\t*drm;\n\tstruct regmap\t\t\t*regs;\n\n\t \n\tstruct clk\t\t\t*clk;\n\n\t \n\tstruct clk\t\t\t*sclk0;\n\tstruct clk\t\t\t*sclk1;\n\n\t \n\tstruct clk\t\t\t*lvds_pll;\n\n\t \n\tstruct clk\t\t\t*dclk;\n\tu8\t\t\t\tdclk_max_div;\n\tu8\t\t\t\tdclk_min_div;\n\n\t \n\tstruct reset_control\t\t*lcd_rst;\n\tstruct reset_control\t\t*lvds_rst;\n\n\t \n\tconst struct sun4i_tcon_quirks\t*quirks;\n\n\t \n\tstruct sun4i_crtc\t\t*crtc;\n\n\tint\t\t\t\tid;\n\n\t \n\tstruct list_head\t\tlist;\n};\n\nstruct drm_bridge *sun4i_tcon_find_bridge(struct device_node *node);\nstruct drm_panel *sun4i_tcon_find_panel(struct device_node *node);\n\nvoid sun4i_tcon_enable_vblank(struct sun4i_tcon *tcon, bool enable);\nvoid sun4i_tcon_mode_set(struct sun4i_tcon *tcon,\n\t\t\t const struct drm_encoder *encoder,\n\t\t\t const struct drm_display_mode *mode);\nvoid sun4i_tcon_set_status(struct sun4i_tcon *crtc,\n\t\t\t   const struct drm_encoder *encoder, bool enable);\n\nextern const struct of_device_id sun4i_tcon_of_table[];\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}