{
  "module_name": "sun8i_dw_hdmi.h",
  "hash_id": "55b9b6e2a32bbfea8bdecd228039143450a6deab5be3108e9ec350bfd16304a4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/sun4i/sun8i_dw_hdmi.h",
  "human_readable_source": " \n \n\n#ifndef _SUN8I_DW_HDMI_H_\n#define _SUN8I_DW_HDMI_H_\n\n#include <drm/bridge/dw_hdmi.h>\n#include <drm/drm_encoder.h>\n#include <linux/clk.h>\n#include <linux/regmap.h>\n#include <linux/regulator/consumer.h>\n#include <linux/reset.h>\n\n#define SUN8I_HDMI_PHY_DBG_CTRL_REG\t0x0000\n#define SUN8I_HDMI_PHY_DBG_CTRL_PX_LOCK\t\tBIT(0)\n#define SUN8I_HDMI_PHY_DBG_CTRL_POL_MASK\tGENMASK(15, 8)\n#define SUN8I_HDMI_PHY_DBG_CTRL_POL_NHSYNC\tBIT(8)\n#define SUN8I_HDMI_PHY_DBG_CTRL_POL_NVSYNC\tBIT(9)\n#define SUN8I_HDMI_PHY_DBG_CTRL_ADDR_MASK\tGENMASK(23, 16)\n#define SUN8I_HDMI_PHY_DBG_CTRL_ADDR(addr)\t(addr << 16)\n\n#define SUN8I_HDMI_PHY_REXT_CTRL_REG\t0x0004\n#define SUN8I_HDMI_PHY_REXT_CTRL_REXT_EN\tBIT(31)\n\n#define SUN8I_HDMI_PHY_READ_EN_REG\t0x0010\n#define SUN8I_HDMI_PHY_READ_EN_MAGIC\t\t0x54524545\n\n#define SUN8I_HDMI_PHY_UNSCRAMBLE_REG\t0x0014\n#define SUN8I_HDMI_PHY_UNSCRAMBLE_MAGIC\t\t0x42494E47\n\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG\t0x0020\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_SWI\t\tBIT(31)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_PWEND\tBIT(30)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_PWENC\tBIT(29)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_CALSW\tBIT(28)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_SVRCAL(x)\t((x) << 26)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_SVBH(x)\t((x) << 24)\n#define SUN8I_HDMI_PHY_ANA_CFG1_AMP_OPT\t\tBIT(23)\n#define SUN8I_HDMI_PHY_ANA_CFG1_EMP_OPT\t\tBIT(22)\n#define SUN8I_HDMI_PHY_ANA_CFG1_AMPCK_OPT\tBIT(21)\n#define SUN8I_HDMI_PHY_ANA_CFG1_EMPCK_OPT\tBIT(20)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENRCAL\t\tBIT(19)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENCALOG\t\tBIT(18)\n#define SUN8I_HDMI_PHY_ANA_CFG1_REG_SCKTMDS\tBIT(17)\n#define SUN8I_HDMI_PHY_ANA_CFG1_TMDSCLK_EN\tBIT(16)\n#define SUN8I_HDMI_PHY_ANA_CFG1_TXEN_MASK\tGENMASK(15, 12)\n#define SUN8I_HDMI_PHY_ANA_CFG1_TXEN_ALL\t(0xf << 12)\n#define SUN8I_HDMI_PHY_ANA_CFG1_BIASEN_TMDSCLK\tBIT(11)\n#define SUN8I_HDMI_PHY_ANA_CFG1_BIASEN_TMDS2\tBIT(10)\n#define SUN8I_HDMI_PHY_ANA_CFG1_BIASEN_TMDS1\tBIT(9)\n#define SUN8I_HDMI_PHY_ANA_CFG1_BIASEN_TMDS0\tBIT(8)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENP2S_TMDSCLK\tBIT(7)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENP2S_TMDS2\tBIT(6)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENP2S_TMDS1\tBIT(5)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENP2S_TMDS0\tBIT(4)\n#define SUN8I_HDMI_PHY_ANA_CFG1_CKEN\t\tBIT(3)\n#define SUN8I_HDMI_PHY_ANA_CFG1_LDOEN\t\tBIT(2)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENVBS\t\tBIT(1)\n#define SUN8I_HDMI_PHY_ANA_CFG1_ENBI\t\tBIT(0)\n\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG\t0x0024\n#define SUN8I_HDMI_PHY_ANA_CFG2_M_EN\t\tBIT(31)\n#define SUN8I_HDMI_PHY_ANA_CFG2_PLLDBEN\t\tBIT(30)\n#define SUN8I_HDMI_PHY_ANA_CFG2_SEN\t\tBIT(29)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_HPDPD\tBIT(28)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_HPDEN\tBIT(27)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_PLRCK\tBIT(26)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_PLR(x)\t((x) << 23)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_DENCK\tBIT(22)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_DEN\t\tBIT(21)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_CD(x)\t((x) << 19)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_CKSS(x)\t((x) << 17)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_BIGSWCK\tBIT(16)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_BIGSW\tBIT(15)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_CSMPS(x)\t((x) << 13)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_SLV(x)\t((x) << 10)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_BOOSTCK(x)\t((x) << 8)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_BOOST(x)\t((x) << 6)\n#define SUN8I_HDMI_PHY_ANA_CFG2_REG_RESDI(x)\t((x) << 0)\n\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG\t0x0028\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_SLOWCK(x)\t((x) << 30)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_SLOW(x)\t((x) << 28)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_WIRE(x)\t((x) << 18)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_AMPCK(x)\t((x) << 14)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_EMPCK(x)\t((x) << 11)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_AMP(x)\t((x) << 7)\n#define SUN8I_HDMI_PHY_ANA_CFG3_REG_EMP(x)\t((x) << 4)\n#define SUN8I_HDMI_PHY_ANA_CFG3_SDAPD\t\tBIT(3)\n#define SUN8I_HDMI_PHY_ANA_CFG3_SDAEN\t\tBIT(2)\n#define SUN8I_HDMI_PHY_ANA_CFG3_SCLPD\t\tBIT(1)\n#define SUN8I_HDMI_PHY_ANA_CFG3_SCLEN\t\tBIT(0)\n\n#define SUN8I_HDMI_PHY_PLL_CFG1_REG\t0x002c\n#define SUN8I_HDMI_PHY_PLL_CFG1_REG_OD1\t\tBIT(31)\n#define SUN8I_HDMI_PHY_PLL_CFG1_REG_OD\t\tBIT(30)\n#define SUN8I_HDMI_PHY_PLL_CFG1_LDO2_EN\t\tBIT(29)\n#define SUN8I_HDMI_PHY_PLL_CFG1_LDO1_EN\t\tBIT(28)\n#define SUN8I_HDMI_PHY_PLL_CFG1_HV_IS_33\tBIT(27)\n#define SUN8I_HDMI_PHY_PLL_CFG1_CKIN_SEL_MSK\tBIT(26)\n#define SUN8I_HDMI_PHY_PLL_CFG1_CKIN_SEL_SHIFT\t26\n#define SUN8I_HDMI_PHY_PLL_CFG1_PLLEN\t\tBIT(25)\n#define SUN8I_HDMI_PHY_PLL_CFG1_LDO_VSET(x)\t((x) << 22)\n#define SUN8I_HDMI_PHY_PLL_CFG1_UNKNOWN(x)\t((x) << 20)\n#define SUN8I_HDMI_PHY_PLL_CFG1_PLLDBEN\t\tBIT(19)\n#define SUN8I_HDMI_PHY_PLL_CFG1_CS\t\tBIT(18)\n#define SUN8I_HDMI_PHY_PLL_CFG1_CP_S(x)\t\t((x) << 13)\n#define SUN8I_HDMI_PHY_PLL_CFG1_CNT_INT(x)\t((x) << 7)\n#define SUN8I_HDMI_PHY_PLL_CFG1_BWS\t\tBIT(6)\n#define SUN8I_HDMI_PHY_PLL_CFG1_B_IN_MSK\tGENMASK(5, 0)\n#define SUN8I_HDMI_PHY_PLL_CFG1_B_IN_SHIFT\t0\n\n#define SUN8I_HDMI_PHY_PLL_CFG2_REG\t0x0030\n#define SUN8I_HDMI_PHY_PLL_CFG2_SV_H\t\tBIT(31)\n#define SUN8I_HDMI_PHY_PLL_CFG2_PDCLKSEL(x)\t((x) << 29)\n#define SUN8I_HDMI_PHY_PLL_CFG2_CLKSTEP(x)\t((x) << 27)\n#define SUN8I_HDMI_PHY_PLL_CFG2_PSET(x)\t\t((x) << 24)\n#define SUN8I_HDMI_PHY_PLL_CFG2_PCLK_SEL\tBIT(23)\n#define SUN8I_HDMI_PHY_PLL_CFG2_AUTOSYNC_DIS\tBIT(22)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VREG2_OUT_EN\tBIT(21)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VREG1_OUT_EN\tBIT(20)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VCOGAIN_EN\tBIT(19)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VCOGAIN(x)\t((x) << 16)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VCO_S(x)\t((x) << 12)\n#define SUN8I_HDMI_PHY_PLL_CFG2_VCO_RST_IN\tBIT(11)\n#define SUN8I_HDMI_PHY_PLL_CFG2_SINT_FRAC\tBIT(10)\n#define SUN8I_HDMI_PHY_PLL_CFG2_SDIV2\t\tBIT(9)\n#define SUN8I_HDMI_PHY_PLL_CFG2_S(x)\t\t((x) << 6)\n#define SUN8I_HDMI_PHY_PLL_CFG2_S6P25_7P5\tBIT(5)\n#define SUN8I_HDMI_PHY_PLL_CFG2_S5_7\t\tBIT(4)\n#define SUN8I_HDMI_PHY_PLL_CFG2_PREDIV_MSK\tGENMASK(3, 0)\n#define SUN8I_HDMI_PHY_PLL_CFG2_PREDIV_SHIFT\t0\n#define SUN8I_HDMI_PHY_PLL_CFG2_PREDIV(x)\t(((x) - 1) << 0)\n\n#define SUN8I_HDMI_PHY_PLL_CFG3_REG\t0x0034\n#define SUN8I_HDMI_PHY_PLL_CFG3_SOUT_DIV2\tBIT(0)\n\n#define SUN8I_HDMI_PHY_ANA_STS_REG\t0x0038\n#define SUN8I_HDMI_PHY_ANA_STS_B_OUT_SHIFT\t11\n#define SUN8I_HDMI_PHY_ANA_STS_B_OUT_MSK\tGENMASK(16, 11)\n#define SUN8I_HDMI_PHY_ANA_STS_RCALEND2D\tBIT(7)\n#define SUN8I_HDMI_PHY_ANA_STS_RCAL_MASK\tGENMASK(5, 0)\n\n#define SUN8I_HDMI_PHY_CEC_REG\t\t0x003c\n\nstruct sun8i_hdmi_phy;\n\nstruct sun8i_hdmi_phy_variant {\n\tbool has_phy_clk;\n\tbool has_second_pll;\n\tconst struct dw_hdmi_curr_ctrl *cur_ctr;\n\tconst struct dw_hdmi_mpll_config *mpll_cfg;\n\tconst struct dw_hdmi_phy_config *phy_cfg;\n\tconst struct dw_hdmi_phy_ops *phy_ops;\n\tvoid (*phy_init)(struct sun8i_hdmi_phy *phy);\n};\n\nstruct sun8i_hdmi_phy {\n\tstruct clk\t\t\t*clk_bus;\n\tstruct clk\t\t\t*clk_mod;\n\tstruct clk\t\t\t*clk_phy;\n\tstruct clk\t\t\t*clk_pll0;\n\tstruct clk\t\t\t*clk_pll1;\n\tstruct device\t\t\t*dev;\n\tunsigned int\t\t\trcal;\n\tstruct regmap\t\t\t*regs;\n\tstruct reset_control\t\t*rst_phy;\n\tconst struct sun8i_hdmi_phy_variant *variant;\n};\n\nstruct sun8i_dw_hdmi_quirks {\n\tenum drm_mode_status (*mode_valid)(struct dw_hdmi *hdmi, void *data,\n\t\t\t\t\t   const struct drm_display_info *info,\n\t\t\t\t\t   const struct drm_display_mode *mode);\n\tunsigned int use_drm_infoframe : 1;\n};\n\nstruct sun8i_dw_hdmi {\n\tstruct clk\t\t\t*clk_tmds;\n\tstruct device\t\t\t*dev;\n\tstruct dw_hdmi\t\t\t*hdmi;\n\tstruct drm_encoder\t\tencoder;\n\tstruct sun8i_hdmi_phy\t\t*phy;\n\tstruct dw_hdmi_plat_data\tplat_data;\n\tstruct regulator\t\t*regulator;\n\tconst struct sun8i_dw_hdmi_quirks *quirks;\n\tstruct reset_control\t\t*rst_ctrl;\n};\n\nextern struct platform_driver sun8i_hdmi_phy_driver;\n\nstatic inline struct sun8i_dw_hdmi *\nencoder_to_sun8i_dw_hdmi(struct drm_encoder *encoder)\n{\n\treturn container_of(encoder, struct sun8i_dw_hdmi, encoder);\n}\n\nint sun8i_hdmi_phy_get(struct sun8i_dw_hdmi *hdmi, struct device_node *node);\n\nint sun8i_hdmi_phy_init(struct sun8i_hdmi_phy *phy);\nvoid sun8i_hdmi_phy_deinit(struct sun8i_hdmi_phy *phy);\nvoid sun8i_hdmi_phy_set_ops(struct sun8i_hdmi_phy *phy,\n\t\t\t    struct dw_hdmi_plat_data *plat_data);\n\nint sun8i_phy_clk_create(struct sun8i_hdmi_phy *phy, struct device *dev,\n\t\t\t bool second_parent);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}