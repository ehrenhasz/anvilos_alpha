{
  "module_name": "adv7511.h",
  "hash_id": "699983a2f560fa7216b1afef0b07095dec508be0a375dbd3071912936ff98aa8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/bridge/adv7511/adv7511.h",
  "human_readable_source": " \n \n\n#ifndef __DRM_I2C_ADV7511_H__\n#define __DRM_I2C_ADV7511_H__\n\n#include <linux/hdmi.h>\n#include <linux/i2c.h>\n#include <linux/regmap.h>\n#include <linux/regulator/consumer.h>\n\n#include <drm/drm_bridge.h>\n#include <drm/drm_connector.h>\n#include <drm/drm_mipi_dsi.h>\n#include <drm/drm_modes.h>\n\n#define ADV7511_REG_CHIP_REVISION\t\t0x00\n#define ADV7511_REG_N0\t\t\t\t0x01\n#define ADV7511_REG_N1\t\t\t\t0x02\n#define ADV7511_REG_N2\t\t\t\t0x03\n#define ADV7511_REG_SPDIF_FREQ\t\t\t0x04\n#define ADV7511_REG_CTS_AUTOMATIC1\t\t0x05\n#define ADV7511_REG_CTS_AUTOMATIC2\t\t0x06\n#define ADV7511_REG_CTS_MANUAL0\t\t\t0x07\n#define ADV7511_REG_CTS_MANUAL1\t\t\t0x08\n#define ADV7511_REG_CTS_MANUAL2\t\t\t0x09\n#define ADV7511_REG_AUDIO_SOURCE\t\t0x0a\n#define ADV7511_REG_AUDIO_CONFIG\t\t0x0b\n#define ADV7511_REG_I2S_CONFIG\t\t\t0x0c\n#define ADV7511_REG_I2S_WIDTH\t\t\t0x0d\n#define ADV7511_REG_AUDIO_SUB_SRC0\t\t0x0e\n#define ADV7511_REG_AUDIO_SUB_SRC1\t\t0x0f\n#define ADV7511_REG_AUDIO_SUB_SRC2\t\t0x10\n#define ADV7511_REG_AUDIO_SUB_SRC3\t\t0x11\n#define ADV7511_REG_AUDIO_CFG1\t\t\t0x12\n#define ADV7511_REG_AUDIO_CFG2\t\t\t0x13\n#define ADV7511_REG_AUDIO_CFG3\t\t\t0x14\n#define ADV7511_REG_I2C_FREQ_ID_CFG\t\t0x15\n#define ADV7511_REG_VIDEO_INPUT_CFG1\t\t0x16\n#define ADV7511_REG_CSC_UPPER(x)\t\t(0x18 + (x) * 2)\n#define ADV7511_REG_CSC_LOWER(x)\t\t(0x19 + (x) * 2)\n#define ADV7511_REG_SYNC_DECODER(x)\t\t(0x30 + (x))\n#define ADV7511_REG_DE_GENERATOR\t\t(0x35 + (x))\n#define ADV7511_REG_PIXEL_REPETITION\t\t0x3b\n#define ADV7511_REG_VIC_MANUAL\t\t\t0x3c\n#define ADV7511_REG_VIC_SEND\t\t\t0x3d\n#define ADV7511_REG_VIC_DETECTED\t\t0x3e\n#define ADV7511_REG_AUX_VIC_DETECTED\t\t0x3f\n#define ADV7511_REG_PACKET_ENABLE0\t\t0x40\n#define ADV7511_REG_POWER\t\t\t0x41\n#define ADV7511_REG_STATUS\t\t\t0x42\n#define ADV7511_REG_EDID_I2C_ADDR\t\t0x43\n#define ADV7511_REG_PACKET_ENABLE1\t\t0x44\n#define ADV7511_REG_PACKET_I2C_ADDR\t\t0x45\n#define ADV7511_REG_DSD_ENABLE\t\t\t0x46\n#define ADV7511_REG_VIDEO_INPUT_CFG2\t\t0x48\n#define ADV7511_REG_INFOFRAME_UPDATE\t\t0x4a\n#define ADV7511_REG_GC(x)\t\t\t(0x4b + (x))  \n#define ADV7511_REG_AVI_INFOFRAME_VERSION\t0x52\n#define ADV7511_REG_AVI_INFOFRAME_LENGTH\t0x53\n#define ADV7511_REG_AVI_INFOFRAME_CHECKSUM\t0x54\n#define ADV7511_REG_AVI_INFOFRAME(x)\t\t(0x55 + (x))  \n#define ADV7511_REG_AUDIO_INFOFRAME_VERSION\t0x70\n#define ADV7511_REG_AUDIO_INFOFRAME_LENGTH\t0x71\n#define ADV7511_REG_AUDIO_INFOFRAME_CHECKSUM\t0x72\n#define ADV7511_REG_AUDIO_INFOFRAME(x)\t\t(0x73 + (x))  \n#define ADV7511_REG_INT_ENABLE(x)\t\t(0x94 + (x))\n#define ADV7511_REG_INT(x)\t\t\t(0x96 + (x))\n#define ADV7511_REG_INPUT_CLK_DIV\t\t0x9d\n#define ADV7511_REG_PLL_STATUS\t\t\t0x9e\n#define ADV7511_REG_HDMI_POWER\t\t\t0xa1\n#define ADV7511_REG_HDCP_HDMI_CFG\t\t0xaf\n#define ADV7511_REG_AN(x)\t\t\t(0xb0 + (x))  \n#define ADV7511_REG_HDCP_STATUS\t\t\t0xb8\n#define ADV7511_REG_BCAPS\t\t\t0xbe\n#define ADV7511_REG_BKSV(x)\t\t\t(0xc0 + (x))  \n#define ADV7511_REG_EDID_SEGMENT\t\t0xc4\n#define ADV7511_REG_DDC_STATUS\t\t\t0xc8\n#define ADV7511_REG_EDID_READ_CTRL\t\t0xc9\n#define ADV7511_REG_BSTATUS(x)\t\t\t(0xca + (x))  \n#define ADV7511_REG_TIMING_GEN_SEQ\t\t0xd0\n#define ADV7511_REG_POWER2\t\t\t0xd6\n#define ADV7511_REG_HSYNC_PLACEMENT_MSB\t\t0xfa\n\n#define ADV7511_REG_SYNC_ADJUSTMENT(x)\t\t(0xd7 + (x))  \n#define ADV7511_REG_TMDS_CLOCK_INV\t\t0xde\n#define ADV7511_REG_ARC_CTRL\t\t\t0xdf\n#define ADV7511_REG_CEC_I2C_ADDR\t\t0xe1\n#define ADV7511_REG_CEC_CTRL\t\t\t0xe2\n#define ADV7511_REG_CHIP_ID_HIGH\t\t0xf5\n#define ADV7511_REG_CHIP_ID_LOW\t\t\t0xf6\n\n \n#define ADV7511_CEC_I2C_ADDR_DEFAULT\t\t0x3c\n#define ADV7511_EDID_I2C_ADDR_DEFAULT\t\t0x3f\n#define ADV7511_PACKET_I2C_ADDR_DEFAULT\t\t0x38\n\n#define ADV7511_CSC_ENABLE\t\t\tBIT(7)\n#define ADV7511_CSC_UPDATE_MODE\t\t\tBIT(5)\n\n#define ADV7511_INT0_HPD\t\t\tBIT(7)\n#define ADV7511_INT0_VSYNC\t\t\tBIT(5)\n#define ADV7511_INT0_AUDIO_FIFO_FULL\t\tBIT(4)\n#define ADV7511_INT0_EDID_READY\t\t\tBIT(2)\n#define ADV7511_INT0_HDCP_AUTHENTICATED\t\tBIT(1)\n\n#define ADV7511_INT1_DDC_ERROR\t\t\tBIT(7)\n#define ADV7511_INT1_BKSV\t\t\tBIT(6)\n#define ADV7511_INT1_CEC_TX_READY\t\tBIT(5)\n#define ADV7511_INT1_CEC_TX_ARBIT_LOST\t\tBIT(4)\n#define ADV7511_INT1_CEC_TX_RETRY_TIMEOUT\tBIT(3)\n#define ADV7511_INT1_CEC_RX_READY3\t\tBIT(2)\n#define ADV7511_INT1_CEC_RX_READY2\t\tBIT(1)\n#define ADV7511_INT1_CEC_RX_READY1\t\tBIT(0)\n\n#define ADV7511_ARC_CTRL_POWER_DOWN\t\tBIT(0)\n\n#define ADV7511_CEC_CTRL_POWER_DOWN\t\tBIT(0)\n\n#define ADV7511_POWER_POWER_DOWN\t\tBIT(6)\n\n#define ADV7511_HDMI_CFG_MODE_MASK\t\t0x2\n#define ADV7511_HDMI_CFG_MODE_DVI\t\t0x0\n#define ADV7511_HDMI_CFG_MODE_HDMI\t\t0x2\n\n#define ADV7511_AUDIO_SELECT_I2C\t\t0x0\n#define ADV7511_AUDIO_SELECT_SPDIF\t\t0x1\n#define ADV7511_AUDIO_SELECT_DSD\t\t0x2\n#define ADV7511_AUDIO_SELECT_HBR\t\t0x3\n#define ADV7511_AUDIO_SELECT_DST\t\t0x4\n\n#define ADV7511_I2S_SAMPLE_LEN_16\t\t0x2\n#define ADV7511_I2S_SAMPLE_LEN_20\t\t0x3\n#define ADV7511_I2S_SAMPLE_LEN_18\t\t0x4\n#define ADV7511_I2S_SAMPLE_LEN_22\t\t0x5\n#define ADV7511_I2S_SAMPLE_LEN_19\t\t0x8\n#define ADV7511_I2S_SAMPLE_LEN_23\t\t0x9\n#define ADV7511_I2S_SAMPLE_LEN_24\t\t0xb\n#define ADV7511_I2S_SAMPLE_LEN_17\t\t0xc\n#define ADV7511_I2S_SAMPLE_LEN_21\t\t0xd\n\n#define ADV7511_SAMPLE_FREQ_44100\t\t0x0\n#define ADV7511_SAMPLE_FREQ_48000\t\t0x2\n#define ADV7511_SAMPLE_FREQ_32000\t\t0x3\n#define ADV7511_SAMPLE_FREQ_88200\t\t0x8\n#define ADV7511_SAMPLE_FREQ_96000\t\t0xa\n#define ADV7511_SAMPLE_FREQ_176400\t\t0xc\n#define ADV7511_SAMPLE_FREQ_192000\t\t0xe\n\n#define ADV7511_STATUS_POWER_DOWN_POLARITY\tBIT(7)\n#define ADV7511_STATUS_HPD\t\t\tBIT(6)\n#define ADV7511_STATUS_MONITOR_SENSE\t\tBIT(5)\n#define ADV7511_STATUS_I2S_32BIT_MODE\t\tBIT(3)\n\n#define ADV7511_PACKET_ENABLE_N_CTS\t\tBIT(8+6)\n#define ADV7511_PACKET_ENABLE_AUDIO_SAMPLE\tBIT(8+5)\n#define ADV7511_PACKET_ENABLE_AVI_INFOFRAME\tBIT(8+4)\n#define ADV7511_PACKET_ENABLE_AUDIO_INFOFRAME\tBIT(8+3)\n#define ADV7511_PACKET_ENABLE_GC\t\tBIT(7)\n#define ADV7511_PACKET_ENABLE_SPD\t\tBIT(6)\n#define ADV7511_PACKET_ENABLE_MPEG\t\tBIT(5)\n#define ADV7511_PACKET_ENABLE_ACP\t\tBIT(4)\n#define ADV7511_PACKET_ENABLE_ISRC\t\tBIT(3)\n#define ADV7511_PACKET_ENABLE_GM\t\tBIT(2)\n#define ADV7511_PACKET_ENABLE_SPARE2\t\tBIT(1)\n#define ADV7511_PACKET_ENABLE_SPARE1\t\tBIT(0)\n\n#define ADV7535_REG_POWER2_HPD_OVERRIDE\t\tBIT(6)\n#define ADV7511_REG_POWER2_HPD_SRC_MASK\t\t0xc0\n#define ADV7511_REG_POWER2_HPD_SRC_BOTH\t\t0x00\n#define ADV7511_REG_POWER2_HPD_SRC_HPD\t\t0x40\n#define ADV7511_REG_POWER2_HPD_SRC_CEC\t\t0x80\n#define ADV7511_REG_POWER2_HPD_SRC_NONE\t\t0xc0\n#define ADV7511_REG_POWER2_TDMS_ENABLE\t\tBIT(4)\n#define ADV7511_REG_POWER2_GATE_INPUT_CLK\tBIT(0)\n\n#define ADV7511_LOW_REFRESH_RATE_NONE\t\t0x0\n#define ADV7511_LOW_REFRESH_RATE_24HZ\t\t0x1\n#define ADV7511_LOW_REFRESH_RATE_25HZ\t\t0x2\n#define ADV7511_LOW_REFRESH_RATE_30HZ\t\t0x3\n\n#define ADV7511_AUDIO_CFG3_LEN_MASK\t\t0x0f\n#define ADV7511_I2C_FREQ_ID_CFG_RATE_MASK\t0xf0\n\n#define ADV7511_AUDIO_SOURCE_I2S\t\t0\n#define ADV7511_AUDIO_SOURCE_SPDIF\t\t1\n\n#define ADV7511_I2S_FORMAT_I2S\t\t\t0\n#define ADV7511_I2S_FORMAT_RIGHT_J\t\t1\n#define ADV7511_I2S_FORMAT_LEFT_J\t\t2\n#define ADV7511_I2S_IEC958_DIRECT\t\t3\n\n#define ADV7511_PACKET(p, x)\t    ((p) * 0x20 + (x))\n#define ADV7511_PACKET_SDP(x)\t    ADV7511_PACKET(0, x)\n#define ADV7511_PACKET_MPEG(x)\t    ADV7511_PACKET(1, x)\n#define ADV7511_PACKET_ACP(x)\t    ADV7511_PACKET(2, x)\n#define ADV7511_PACKET_ISRC1(x)\t    ADV7511_PACKET(3, x)\n#define ADV7511_PACKET_ISRC2(x)\t    ADV7511_PACKET(4, x)\n#define ADV7511_PACKET_GM(x)\t    ADV7511_PACKET(5, x)\n#define ADV7511_PACKET_SPARE(x)\t    ADV7511_PACKET(6, x)\n\n#define ADV7511_REG_CEC_TX_FRAME_HDR\t0x00\n#define ADV7511_REG_CEC_TX_FRAME_DATA0\t0x01\n#define ADV7511_REG_CEC_TX_FRAME_LEN\t0x10\n#define ADV7511_REG_CEC_TX_ENABLE\t0x11\n#define ADV7511_REG_CEC_TX_RETRY\t0x12\n#define ADV7511_REG_CEC_TX_LOW_DRV_CNT\t0x14\n#define ADV7511_REG_CEC_RX1_FRAME_HDR\t0x15\n#define ADV7511_REG_CEC_RX1_FRAME_DATA0\t0x16\n#define ADV7511_REG_CEC_RX1_FRAME_LEN\t0x25\n#define ADV7511_REG_CEC_RX_STATUS\t0x26\n#define ADV7511_REG_CEC_RX2_FRAME_HDR\t0x27\n#define ADV7511_REG_CEC_RX2_FRAME_DATA0\t0x28\n#define ADV7511_REG_CEC_RX2_FRAME_LEN\t0x37\n#define ADV7511_REG_CEC_RX3_FRAME_HDR\t0x38\n#define ADV7511_REG_CEC_RX3_FRAME_DATA0\t0x39\n#define ADV7511_REG_CEC_RX3_FRAME_LEN\t0x48\n#define ADV7511_REG_CEC_RX_BUFFERS\t0x4a\n#define ADV7511_REG_CEC_LOG_ADDR_MASK\t0x4b\n#define ADV7511_REG_CEC_LOG_ADDR_0_1\t0x4c\n#define ADV7511_REG_CEC_LOG_ADDR_2\t0x4d\n#define ADV7511_REG_CEC_CLK_DIV\t\t0x4e\n#define ADV7511_REG_CEC_SOFT_RESET\t0x50\n\n#define ADV7533_REG_CEC_OFFSET\t\t0x70\n\nenum adv7511_input_clock {\n\tADV7511_INPUT_CLOCK_1X,\n\tADV7511_INPUT_CLOCK_2X,\n\tADV7511_INPUT_CLOCK_DDR,\n};\n\nenum adv7511_input_justification {\n\tADV7511_INPUT_JUSTIFICATION_EVENLY = 0,\n\tADV7511_INPUT_JUSTIFICATION_RIGHT = 1,\n\tADV7511_INPUT_JUSTIFICATION_LEFT = 2,\n};\n\nenum adv7511_input_sync_pulse {\n\tADV7511_INPUT_SYNC_PULSE_DE = 0,\n\tADV7511_INPUT_SYNC_PULSE_HSYNC = 1,\n\tADV7511_INPUT_SYNC_PULSE_VSYNC = 2,\n\tADV7511_INPUT_SYNC_PULSE_NONE = 3,\n};\n\n \nenum adv7511_sync_polarity {\n\tADV7511_SYNC_POLARITY_PASSTHROUGH,\n\tADV7511_SYNC_POLARITY_LOW,\n\tADV7511_SYNC_POLARITY_HIGH,\n};\n\n \nstruct adv7511_link_config {\n\tunsigned int input_color_depth;\n\tenum hdmi_colorspace input_colorspace;\n\tenum adv7511_input_clock input_clock;\n\tunsigned int input_style;\n\tenum adv7511_input_justification input_justification;\n\n\tint clock_delay;\n\n\tbool embedded_sync;\n\tenum adv7511_input_sync_pulse sync_pulse;\n\tenum adv7511_sync_polarity vsync_polarity;\n\tenum adv7511_sync_polarity hsync_polarity;\n};\n\n \nenum adv7511_csc_scaling {\n\tADV7511_CSC_SCALING_1 = 0,\n\tADV7511_CSC_SCALING_2 = 1,\n\tADV7511_CSC_SCALING_4 = 2,\n};\n\n \nstruct adv7511_video_config {\n\tbool csc_enable;\n\tenum adv7511_csc_scaling csc_scaling_factor;\n\tconst uint16_t *csc_coefficents;\n\n\tbool hdmi_mode;\n\tstruct hdmi_avi_infoframe avi_infoframe;\n};\n\nenum adv7511_type {\n\tADV7511,\n\tADV7533,\n\tADV7535,\n};\n\n#define ADV7511_MAX_ADDRS 3\n\nstruct adv7511 {\n\tstruct i2c_client *i2c_main;\n\tstruct i2c_client *i2c_edid;\n\tstruct i2c_client *i2c_packet;\n\tstruct i2c_client *i2c_cec;\n\n\tstruct regmap *regmap;\n\tstruct regmap *regmap_cec;\n\tunsigned int reg_cec_offset;\n\tenum drm_connector_status status;\n\tbool powered;\n\n\tstruct drm_display_mode curr_mode;\n\n\tunsigned int f_tmds;\n\tunsigned int f_audio;\n\tunsigned int audio_source;\n\n\tunsigned int current_edid_segment;\n\tuint8_t edid_buf[256];\n\tbool edid_read;\n\n\twait_queue_head_t wq;\n\tstruct work_struct hpd_work;\n\n\tstruct drm_bridge bridge;\n\tstruct drm_connector connector;\n\n\tbool embedded_sync;\n\tenum adv7511_sync_polarity vsync_polarity;\n\tenum adv7511_sync_polarity hsync_polarity;\n\tbool rgb;\n\n\tstruct gpio_desc *gpio_pd;\n\n\tstruct regulator_bulk_data *supplies;\n\tunsigned int num_supplies;\n\n\t \n\tstruct device_node *host_node;\n\tstruct mipi_dsi_device *dsi;\n\tu8 num_dsi_lanes;\n\tbool use_timing_gen;\n\n\tenum adv7511_type type;\n\tstruct platform_device *audio_pdev;\n\n\tstruct cec_adapter *cec_adap;\n\tu8   cec_addr[ADV7511_MAX_ADDRS];\n\tu8   cec_valid_addrs;\n\tbool cec_enabled_adap;\n\tstruct clk *cec_clk;\n\tu32 cec_clk_freq;\n};\n\n#ifdef CONFIG_DRM_I2C_ADV7511_CEC\nint adv7511_cec_init(struct device *dev, struct adv7511 *adv7511);\nvoid adv7511_cec_irq_process(struct adv7511 *adv7511, unsigned int irq1);\n#else\nstatic inline int adv7511_cec_init(struct device *dev, struct adv7511 *adv7511)\n{\n\tregmap_write(adv7511->regmap, ADV7511_REG_CEC_CTRL,\n\t\t     ADV7511_CEC_CTRL_POWER_DOWN);\n\treturn 0;\n}\n#endif\n\nvoid adv7533_dsi_power_on(struct adv7511 *adv);\nvoid adv7533_dsi_power_off(struct adv7511 *adv);\nenum drm_mode_status adv7533_mode_valid(struct adv7511 *adv,\n\t\t\t\t\tconst struct drm_display_mode *mode);\nint adv7533_patch_registers(struct adv7511 *adv);\nint adv7533_patch_cec_registers(struct adv7511 *adv);\nint adv7533_attach_dsi(struct adv7511 *adv);\nint adv7533_parse_dt(struct device_node *np, struct adv7511 *adv);\n\n#ifdef CONFIG_DRM_I2C_ADV7511_AUDIO\nint adv7511_audio_init(struct device *dev, struct adv7511 *adv7511);\nvoid adv7511_audio_exit(struct adv7511 *adv7511);\n#else  \nstatic inline int adv7511_audio_init(struct device *dev, struct adv7511 *adv7511)\n{\n\treturn 0;\n}\nstatic inline void adv7511_audio_exit(struct adv7511 *adv7511)\n{\n}\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}