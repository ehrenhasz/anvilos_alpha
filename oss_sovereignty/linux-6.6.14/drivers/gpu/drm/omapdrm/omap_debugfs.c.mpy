{
  "module_name": "omap_debugfs.c",
  "hash_id": "f6f959fa24949b1752ff36858959360f95fbe8352a0d589b71ecf9d23a77d300",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/omapdrm/omap_debugfs.c",
  "human_readable_source": "\n \n\n#include <linux/seq_file.h>\n\n#include <drm/drm_crtc.h>\n#include <drm/drm_debugfs.h>\n#include <drm/drm_file.h>\n#include <drm/drm_fb_helper.h>\n#include <drm/drm_framebuffer.h>\n\n#include \"omap_drv.h\"\n#include \"omap_dmm_tiler.h\"\n\n#ifdef CONFIG_DEBUG_FS\n\nstatic int gem_show(struct seq_file *m, void *arg)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *) m->private;\n\tstruct drm_device *dev = node->minor->dev;\n\tstruct omap_drm_private *priv = dev->dev_private;\n\n\tseq_printf(m, \"All Objects:\\n\");\n\tmutex_lock(&priv->list_lock);\n\tomap_gem_describe_objects(&priv->obj_list, m);\n\tmutex_unlock(&priv->list_lock);\n\n\treturn 0;\n}\n\nstatic int mm_show(struct seq_file *m, void *arg)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *) m->private;\n\tstruct drm_device *dev = node->minor->dev;\n\tstruct drm_printer p = drm_seq_file_printer(m);\n\n\tdrm_mm_print(&dev->vma_offset_manager->vm_addr_space_mm, &p);\n\n\treturn 0;\n}\n\n#ifdef CONFIG_DRM_FBDEV_EMULATION\nstatic int fb_show(struct seq_file *m, void *arg)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *) m->private;\n\tstruct drm_device *dev = node->minor->dev;\n\tstruct drm_fb_helper *helper = dev->fb_helper;\n\tstruct drm_framebuffer *fb;\n\n\tseq_printf(m, \"fbcon \");\n\tomap_framebuffer_describe(helper->fb, m);\n\n\tmutex_lock(&dev->mode_config.fb_lock);\n\tlist_for_each_entry(fb, &dev->mode_config.fb_list, head) {\n\t\tif (fb == helper->fb)\n\t\t\tcontinue;\n\n\t\tseq_printf(m, \"user \");\n\t\tomap_framebuffer_describe(fb, m);\n\t}\n\tmutex_unlock(&dev->mode_config.fb_lock);\n\n\treturn 0;\n}\n#endif\n\n \nstatic struct drm_info_list omap_debugfs_list[] = {\n\t{\"gem\", gem_show, 0},\n\t{\"mm\", mm_show, 0},\n#ifdef CONFIG_DRM_FBDEV_EMULATION\n\t{\"fb\", fb_show, 0},\n#endif\n};\n\n \nstatic struct drm_info_list omap_dmm_debugfs_list[] = {\n\t{\"tiler_map\", tiler_map_show, 0},\n};\n\nvoid omap_debugfs_init(struct drm_minor *minor)\n{\n\tdrm_debugfs_create_files(omap_debugfs_list,\n\t\t\t\t ARRAY_SIZE(omap_debugfs_list),\n\t\t\t\t minor->debugfs_root, minor);\n\n\tif (dmm_is_available())\n\t\tdrm_debugfs_create_files(omap_dmm_debugfs_list,\n\t\t\t\t\t ARRAY_SIZE(omap_dmm_debugfs_list),\n\t\t\t\t\t minor->debugfs_root, minor);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}