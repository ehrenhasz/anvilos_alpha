{
  "module_name": "omap_dmm_priv.h",
  "hash_id": "023d6c3561cf9039dff61c5c9d5614af7d48ac16be9ba6adf05db0d26e9359ce",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/omapdrm/omap_dmm_priv.h",
  "human_readable_source": " \n \n\n#ifndef OMAP_DMM_PRIV_H\n#define OMAP_DMM_PRIV_H\n\n#define DMM_REVISION          0x000\n#define DMM_HWINFO            0x004\n#define DMM_LISA_HWINFO       0x008\n#define DMM_DMM_SYSCONFIG     0x010\n#define DMM_LISA_LOCK         0x01C\n#define DMM_LISA_MAP__0       0x040\n#define DMM_LISA_MAP__1       0x044\n#define DMM_TILER_HWINFO      0x208\n#define DMM_TILER_OR__0       0x220\n#define DMM_TILER_OR__1       0x224\n#define DMM_PAT_HWINFO        0x408\n#define DMM_PAT_GEOMETRY      0x40C\n#define DMM_PAT_CONFIG        0x410\n#define DMM_PAT_VIEW__0       0x420\n#define DMM_PAT_VIEW__1       0x424\n#define DMM_PAT_VIEW_MAP__0   0x440\n#define DMM_PAT_VIEW_MAP_BASE 0x460\n#define DMM_PAT_IRQ_EOI       0x478\n#define DMM_PAT_IRQSTATUS_RAW 0x480\n#define DMM_PAT_IRQSTATUS     0x490\n#define DMM_PAT_IRQENABLE_SET 0x4A0\n#define DMM_PAT_IRQENABLE_CLR 0x4B0\n#define DMM_PAT_STATUS__0     0x4C0\n#define DMM_PAT_STATUS__1     0x4C4\n#define DMM_PAT_STATUS__2     0x4C8\n#define DMM_PAT_STATUS__3     0x4CC\n#define DMM_PAT_DESCR__0      0x500\n#define DMM_PAT_DESCR__1      0x510\n#define DMM_PAT_DESCR__2      0x520\n#define DMM_PAT_DESCR__3      0x530\n#define DMM_PEG_HWINFO        0x608\n#define DMM_PEG_PRIO          0x620\n#define DMM_PEG_PRIO_PAT      0x640\n\n#define DMM_IRQSTAT_DST\t\t\t(1<<0)\n#define DMM_IRQSTAT_LST\t\t\t(1<<1)\n#define DMM_IRQSTAT_ERR_INV_DSC\t\t(1<<2)\n#define DMM_IRQSTAT_ERR_INV_DATA\t(1<<3)\n#define DMM_IRQSTAT_ERR_UPD_AREA\t(1<<4)\n#define DMM_IRQSTAT_ERR_UPD_CTRL\t(1<<5)\n#define DMM_IRQSTAT_ERR_UPD_DATA\t(1<<6)\n#define DMM_IRQSTAT_ERR_LUT_MISS\t(1<<7)\n\n#define DMM_IRQSTAT_ERR_MASK\t(DMM_IRQSTAT_ERR_INV_DSC | \\\n\t\t\t\tDMM_IRQSTAT_ERR_INV_DATA | \\\n\t\t\t\tDMM_IRQSTAT_ERR_UPD_AREA | \\\n\t\t\t\tDMM_IRQSTAT_ERR_UPD_CTRL | \\\n\t\t\t\tDMM_IRQSTAT_ERR_UPD_DATA | \\\n\t\t\t\tDMM_IRQSTAT_ERR_LUT_MISS)\n\n#define DMM_PATSTATUS_READY\t\t(1<<0)\n#define DMM_PATSTATUS_VALID\t\t(1<<1)\n#define DMM_PATSTATUS_RUN\t\t(1<<2)\n#define DMM_PATSTATUS_DONE\t\t(1<<3)\n#define DMM_PATSTATUS_LINKED\t\t(1<<4)\n#define DMM_PATSTATUS_BYPASSED\t\t(1<<7)\n#define DMM_PATSTATUS_ERR_INV_DESCR\t(1<<10)\n#define DMM_PATSTATUS_ERR_INV_DATA\t(1<<11)\n#define DMM_PATSTATUS_ERR_UPD_AREA\t(1<<12)\n#define DMM_PATSTATUS_ERR_UPD_CTRL\t(1<<13)\n#define DMM_PATSTATUS_ERR_UPD_DATA\t(1<<14)\n#define DMM_PATSTATUS_ERR_ACCESS\t(1<<15)\n\n \n#define DMM_PATSTATUS_ERR\t(DMM_PATSTATUS_ERR_INV_DESCR | \\\n\t\t\t\tDMM_PATSTATUS_ERR_INV_DATA | \\\n\t\t\t\tDMM_PATSTATUS_ERR_UPD_AREA | \\\n\t\t\t\tDMM_PATSTATUS_ERR_UPD_CTRL | \\\n\t\t\t\tDMM_PATSTATUS_ERR_UPD_DATA)\n\n\n\nenum {\n\tPAT_STATUS,\n\tPAT_DESCR\n};\n\nstruct pat_ctrl {\n\tu32 start:4;\n\tu32 dir:4;\n\tu32 lut_id:8;\n\tu32 sync:12;\n\tu32 ini:4;\n};\n\nstruct pat {\n\tu32 next_pa;\n\tstruct pat_area area;\n\tstruct pat_ctrl ctrl;\n\tu32 data_pa;\n};\n\n#define DMM_FIXED_RETRY_COUNT 1000\n\n \n#define DESCR_SIZE 128\n#define REFILL_BUFFER_SIZE ((4 * 128 * 256) + (3 * DESCR_SIZE))\n\n \n#define OMAP5_LUT_OFFSET       128\n\nstruct dmm;\n\nstruct dmm_txn {\n\tvoid *engine_handle;\n\tstruct tcm *tcm;\n\n\tu8 *current_va;\n\tdma_addr_t current_pa;\n\n\tstruct pat *last_pat;\n};\n\nstruct refill_engine {\n\tint id;\n\tstruct dmm *dmm;\n\tstruct tcm *tcm;\n\n\tu8 *refill_va;\n\tdma_addr_t refill_pa;\n\n\t \n\tstruct dmm_txn txn;\n\n\tbool async;\n\n\tstruct completion compl;\n\n\tstruct list_head idle_node;\n};\n\nstruct dmm_platform_data {\n\tu32 cpu_cache_flags;\n};\n\nstruct dmm {\n\tstruct device *dev;\n\tdma_addr_t phys_base;\n\tvoid __iomem *base;\n\tint irq;\n\n\tstruct page *dummy_page;\n\tdma_addr_t dummy_pa;\n\n\tvoid *refill_va;\n\tdma_addr_t refill_pa;\n\n\t \n\twait_queue_head_t engine_queue;\n\tstruct list_head idle_head;\n\tstruct refill_engine *engines;\n\tint num_engines;\n\tatomic_t engine_counter;\n\n\t \n\tint container_width;\n\tint container_height;\n\tint lut_width;\n\tint lut_height;\n\tint num_lut;\n\n\t \n\tstruct tcm **tcm;\n\n\t \n\tstruct list_head alloc_head;\n\n\tconst struct dmm_platform_data *plat_data;\n\n\tbool dmm_workaround;\n\tspinlock_t wa_lock;\n\tu32 *wa_dma_data;\n\tdma_addr_t wa_dma_handle;\n\tstruct dma_chan *wa_dma_chan;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}