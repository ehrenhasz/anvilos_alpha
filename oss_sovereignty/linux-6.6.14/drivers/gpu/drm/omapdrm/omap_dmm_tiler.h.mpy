{
  "module_name": "omap_dmm_tiler.h",
  "hash_id": "94a109de00faf98f4561dcacb607fbf64c9292ae7737886645c86ef0db098b45",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/omapdrm/omap_dmm_tiler.h",
  "human_readable_source": " \n \n#ifndef OMAP_DMM_TILER_H\n#define OMAP_DMM_TILER_H\n\n#include \"omap_drv.h\"\n#include \"tcm.h\"\n\nenum tiler_fmt {\n\tTILFMT_8BIT = 0,\n\tTILFMT_16BIT,\n\tTILFMT_32BIT,\n\tTILFMT_PAGE,\n\tTILFMT_NFORMATS\n};\n\nstruct pat_area {\n\tu32 x0:8;\n\tu32 y0:8;\n\tu32 x1:8;\n\tu32 y1:8;\n};\n\nstruct tiler_block {\n\tstruct list_head alloc_node;\t \n\tstruct tcm_area area;\t\t \n\tenum tiler_fmt fmt;\t\t \n};\n\n \n#define SLOT_WIDTH_BITS         6\n#define SLOT_HEIGHT_BITS        6\n\n \n#define CONT_WIDTH_BITS         14\n#define CONT_HEIGHT_BITS        13\n\n \n#define TILER_PAGE              (1 << (SLOT_WIDTH_BITS + SLOT_HEIGHT_BITS))\n#define TILER_WIDTH             (1 << (CONT_WIDTH_BITS - SLOT_WIDTH_BITS))\n#define TILER_HEIGHT            (1 << (CONT_HEIGHT_BITS - SLOT_HEIGHT_BITS))\n\n \n#define MASK_XY_FLIP\t\t(1 << 31)\n#define MASK_Y_INVERT\t\t(1 << 30)\n#define MASK_X_INVERT\t\t(1 << 29)\n#define SHIFT_ACC_MODE\t\t27\n#define MASK_ACC_MODE\t\t3\n\n#define MASK(bits) ((1 << (bits)) - 1)\n\n#define TILVIEW_8BIT    0x60000000u\n#define TILVIEW_16BIT   (TILVIEW_8BIT  + VIEW_SIZE)\n#define TILVIEW_32BIT   (TILVIEW_16BIT + VIEW_SIZE)\n#define TILVIEW_PAGE    (TILVIEW_32BIT + VIEW_SIZE)\n#define TILVIEW_END     (TILVIEW_PAGE  + VIEW_SIZE)\n\n \n#define TIL_ADDR(x, orient, a)\\\n\t((u32) (x) | (orient) | ((a) << SHIFT_ACC_MODE))\n\n#ifdef CONFIG_DEBUG_FS\nint tiler_map_show(struct seq_file *s, void *arg);\n#endif\n\n \nint tiler_pin(struct tiler_block *block, struct page **pages,\n\t\tu32 npages, u32 roll, bool wait);\nint tiler_unpin(struct tiler_block *block);\n\n \nstruct tiler_block *tiler_reserve_2d(enum tiler_fmt fmt, u16 w, u16 h,\n\t\t\t\tu16 align);\nstruct tiler_block *tiler_reserve_1d(size_t size);\nint tiler_release(struct tiler_block *block);\n\n \ndma_addr_t tiler_ssptr(struct tiler_block *block);\ndma_addr_t tiler_tsptr(struct tiler_block *block, u32 orient,\n\t\tu32 x, u32 y);\nu32 tiler_stride(enum tiler_fmt fmt, u32 orient);\nsize_t tiler_size(enum tiler_fmt fmt, u16 w, u16 h);\nsize_t tiler_vsize(enum tiler_fmt fmt, u16 w, u16 h);\nvoid tiler_align(enum tiler_fmt fmt, u16 *w, u16 *h);\nu32 tiler_get_cpu_cache_flags(void);\nbool dmm_is_available(void);\n\nextern struct platform_driver omap_dmm_driver;\n\n \nstatic inline enum tiler_fmt gem2fmt(u32 flags)\n{\n\tswitch (flags & OMAP_BO_TILED_MASK) {\n\tcase OMAP_BO_TILED_8:\n\t\treturn TILFMT_8BIT;\n\tcase OMAP_BO_TILED_16:\n\t\treturn TILFMT_16BIT;\n\tcase OMAP_BO_TILED_32:\n\t\treturn TILFMT_32BIT;\n\tdefault:\n\t\treturn TILFMT_PAGE;\n\t}\n}\n\nstatic inline bool validfmt(enum tiler_fmt fmt)\n{\n\tswitch (fmt) {\n\tcase TILFMT_8BIT:\n\tcase TILFMT_16BIT:\n\tcase TILFMT_32BIT:\n\tcase TILFMT_PAGE:\n\t\treturn true;\n\tdefault:\n\t\treturn false;\n\t}\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}