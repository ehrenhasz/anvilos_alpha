{
  "module_name": "virtgpu_debugfs.c",
  "hash_id": "50d04fb5351299e270408472b7a45d970dd928ac13400500aab1361f4038aa4f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/virtio/virtgpu_debugfs.c",
  "human_readable_source": " \n\n#include <linux/string_helpers.h>\n\n#include <drm/drm_debugfs.h>\n#include <drm/drm_file.h>\n\n#include \"virtgpu_drv.h\"\n\nstatic void virtio_gpu_add_bool(struct seq_file *m, const char *name,\n\t\t\t\tbool value)\n{\n\tseq_printf(m, \"%-16s : %s\\n\", name, str_yes_no(value));\n}\n\nstatic void virtio_gpu_add_int(struct seq_file *m, const char *name, int value)\n{\n\tseq_printf(m, \"%-16s : %d\\n\", name, value);\n}\n\nstatic int virtio_gpu_features(struct seq_file *m, void *data)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *)m->private;\n\tstruct virtio_gpu_device *vgdev = node->minor->dev->dev_private;\n\n\tvirtio_gpu_add_bool(m, \"virgl\", vgdev->has_virgl_3d);\n\tvirtio_gpu_add_bool(m, \"edid\", vgdev->has_edid);\n\tvirtio_gpu_add_bool(m, \"indirect\", vgdev->has_indirect);\n\n\tvirtio_gpu_add_bool(m, \"resource uuid\",\n\t\t\t    vgdev->has_resource_assign_uuid);\n\n\tvirtio_gpu_add_bool(m, \"blob resources\", vgdev->has_resource_blob);\n\tvirtio_gpu_add_bool(m, \"context init\", vgdev->has_context_init);\n\tvirtio_gpu_add_int(m, \"cap sets\", vgdev->num_capsets);\n\tvirtio_gpu_add_int(m, \"scanouts\", vgdev->num_scanouts);\n\tif (vgdev->host_visible_region.len) {\n\t\tseq_printf(m, \"%-16s : 0x%lx +0x%lx\\n\", \"host visible region\",\n\t\t\t   (unsigned long)vgdev->host_visible_region.addr,\n\t\t\t   (unsigned long)vgdev->host_visible_region.len);\n\t}\n\treturn 0;\n}\n\nstatic int\nvirtio_gpu_debugfs_irq_info(struct seq_file *m, void *data)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *) m->private;\n\tstruct virtio_gpu_device *vgdev = node->minor->dev->dev_private;\n\n\tseq_printf(m, \"fence %llu %lld\\n\",\n\t\t   (u64)atomic64_read(&vgdev->fence_drv.last_fence_id),\n\t\t   vgdev->fence_drv.current_fence_id);\n\treturn 0;\n}\n\nstatic int\nvirtio_gpu_debugfs_host_visible_mm(struct seq_file *m, void *data)\n{\n\tstruct drm_info_node *node = (struct drm_info_node *)m->private;\n\tstruct virtio_gpu_device *vgdev = node->minor->dev->dev_private;\n\tstruct drm_printer p;\n\n\tif (!vgdev->has_host_visible) {\n\t\tseq_puts(m, \"Host allocations not visible to guest\\n\");\n\t\treturn 0;\n\t}\n\n\tp = drm_seq_file_printer(m);\n\tdrm_mm_print(&vgdev->host_visible_mm, &p);\n\treturn 0;\n}\n\nstatic struct drm_info_list virtio_gpu_debugfs_list[] = {\n\t{ \"virtio-gpu-features\", virtio_gpu_features },\n\t{ \"virtio-gpu-irq-fence\", virtio_gpu_debugfs_irq_info, 0, NULL },\n\t{ \"virtio-gpu-host-visible-mm\", virtio_gpu_debugfs_host_visible_mm },\n};\n\n#define VIRTIO_GPU_DEBUGFS_ENTRIES ARRAY_SIZE(virtio_gpu_debugfs_list)\n\nvoid\nvirtio_gpu_debugfs_init(struct drm_minor *minor)\n{\n\tdrm_debugfs_create_files(virtio_gpu_debugfs_list,\n\t\t\t\t VIRTIO_GPU_DEBUGFS_ENTRIES,\n\t\t\t\t minor->debugfs_root, minor);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}