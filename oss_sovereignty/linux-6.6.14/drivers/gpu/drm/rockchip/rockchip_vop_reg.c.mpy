{
  "module_name": "rockchip_vop_reg.c",
  "hash_id": "15b10e10e2b4a895859501da271cae8e997bfdd37a2d0926129f23330b584f77",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/rockchip/rockchip_vop_reg.c",
  "human_readable_source": "\n \n\n#include <linux/component.h>\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n\n#include <drm/drm_fourcc.h>\n#include <drm/drm_plane.h>\n#include <drm/drm_print.h>\n\n#include \"rockchip_drm_vop.h\"\n#include \"rockchip_vop_reg.h\"\n#include \"rockchip_drm_drv.h\"\n\n#define _VOP_REG(off, _mask, _shift, _write_mask, _relaxed) \\\n\t\t{ \\\n\t\t .offset = off, \\\n\t\t .mask = _mask, \\\n\t\t .shift = _shift, \\\n\t\t .write_mask = _write_mask, \\\n\t\t .relaxed = _relaxed, \\\n\t\t}\n\n#define VOP_REG(off, _mask, _shift) \\\n\t\t_VOP_REG(off, _mask, _shift, false, true)\n\n#define VOP_REG_SYNC(off, _mask, _shift) \\\n\t\t_VOP_REG(off, _mask, _shift, false, false)\n\n#define VOP_REG_MASK_SYNC(off, _mask, _shift) \\\n\t\t_VOP_REG(off, _mask, _shift, true, false)\n\nstatic const uint32_t formats_win_full[] = {\n\tDRM_FORMAT_XRGB8888,\n\tDRM_FORMAT_ARGB8888,\n\tDRM_FORMAT_XBGR8888,\n\tDRM_FORMAT_ABGR8888,\n\tDRM_FORMAT_RGB888,\n\tDRM_FORMAT_BGR888,\n\tDRM_FORMAT_RGB565,\n\tDRM_FORMAT_BGR565,\n\tDRM_FORMAT_NV12,\n\tDRM_FORMAT_NV21,\n\tDRM_FORMAT_NV16,\n\tDRM_FORMAT_NV61,\n\tDRM_FORMAT_NV24,\n\tDRM_FORMAT_NV42,\n};\n\nstatic const uint64_t format_modifiers_win_full[] = {\n\tDRM_FORMAT_MOD_LINEAR,\n\tDRM_FORMAT_MOD_INVALID,\n};\n\nstatic const uint64_t format_modifiers_win_full_afbc[] = {\n\tROCKCHIP_AFBC_MOD,\n\tDRM_FORMAT_MOD_LINEAR,\n\tDRM_FORMAT_MOD_INVALID,\n};\n\nstatic const uint32_t formats_win_lite[] = {\n\tDRM_FORMAT_XRGB8888,\n\tDRM_FORMAT_ARGB8888,\n\tDRM_FORMAT_XBGR8888,\n\tDRM_FORMAT_ABGR8888,\n\tDRM_FORMAT_RGB888,\n\tDRM_FORMAT_BGR888,\n\tDRM_FORMAT_RGB565,\n\tDRM_FORMAT_BGR565,\n};\n\nstatic const uint64_t format_modifiers_win_lite[] = {\n\tDRM_FORMAT_MOD_LINEAR,\n\tDRM_FORMAT_MOD_INVALID,\n};\n\nstatic const struct vop_scl_regs rk3036_win0_scl = {\n\t.scale_yrgb_x = VOP_REG(RK3036_WIN0_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(RK3036_WIN0_SCL_FACTOR_YRGB, 0xffff, 16),\n\t.scale_cbcr_x = VOP_REG(RK3036_WIN0_SCL_FACTOR_CBR, 0xffff, 0x0),\n\t.scale_cbcr_y = VOP_REG(RK3036_WIN0_SCL_FACTOR_CBR, 0xffff, 16),\n};\n\nstatic const struct vop_scl_regs rk3036_win1_scl = {\n\t.scale_yrgb_x = VOP_REG(RK3036_WIN1_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(RK3036_WIN1_SCL_FACTOR_YRGB, 0xffff, 16),\n};\n\nstatic const struct vop_win_phy rk3036_win0_data = {\n\t.scl = &rk3036_win0_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3036_SYS_CTRL, 0x1, 0),\n\t.format = VOP_REG(RK3036_SYS_CTRL, 0x7, 3),\n\t.rb_swap = VOP_REG(RK3036_SYS_CTRL, 0x1, 15),\n\t.act_info = VOP_REG(RK3036_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3036_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3036_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3036_WIN0_YRGB_MST, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3036_WIN0_CBR_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3036_WIN0_VIR, 0xffff, 0),\n\t.uv_vir = VOP_REG(RK3036_WIN0_VIR, 0x1fff, 16),\n\t.alpha_mode = VOP_REG(RK3036_DSP_CTRL0, 0x1, 18),\n\t.alpha_en = VOP_REG(RK3036_ALPHA_CTRL, 0x1, 0),\n\t.alpha_pre_mul = VOP_REG(RK3036_DSP_CTRL0, 0x1, 29),\n};\n\nstatic const struct vop_win_phy rk3036_win1_data = {\n\t.scl = &rk3036_win1_scl,\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(RK3036_SYS_CTRL, 0x1, 1),\n\t.format = VOP_REG(RK3036_SYS_CTRL, 0x7, 6),\n\t.rb_swap = VOP_REG(RK3036_SYS_CTRL, 0x1, 19),\n\t.act_info = VOP_REG(RK3036_WIN1_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3036_WIN1_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3036_WIN1_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3036_WIN1_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3036_WIN1_VIR, 0xffff, 0),\n\t.alpha_mode = VOP_REG(RK3036_DSP_CTRL0, 0x1, 19),\n\t.alpha_en = VOP_REG(RK3036_ALPHA_CTRL, 0x1, 1),\n\t.alpha_pre_mul = VOP_REG(RK3036_DSP_CTRL0, 0x1, 29),\n};\n\nstatic const struct vop_win_data rk3036_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3036_win0_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &rk3036_win1_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const int rk3036_vop_intrs[] = {\n\tDSP_HOLD_VALID_INTR,\n\tFS_INTR,\n\tLINE_FLAG_INTR,\n\tBUS_ERROR_INTR,\n};\n\nstatic const struct vop_intr rk3036_intr = {\n\t.intrs = rk3036_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3036_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3036_INT_STATUS, 0xfff, 12),\n\t.status = VOP_REG_SYNC(RK3036_INT_STATUS, 0xf, 0),\n\t.enable = VOP_REG_SYNC(RK3036_INT_STATUS, 0xf, 4),\n\t.clear = VOP_REG_SYNC(RK3036_INT_STATUS, 0xf, 8),\n};\n\nstatic const struct vop_modeset rk3036_modeset = {\n\t.htotal_pw = VOP_REG(RK3036_DSP_HTOTAL_HS_END, 0x1fff1fff, 0),\n\t.hact_st_end = VOP_REG(RK3036_DSP_HACT_ST_END, 0x1fff1fff, 0),\n\t.vtotal_pw = VOP_REG(RK3036_DSP_VTOTAL_VS_END, 0x1fff1fff, 0),\n\t.vact_st_end = VOP_REG(RK3036_DSP_VACT_ST_END, 0x1fff1fff, 0),\n};\n\nstatic const struct vop_output rk3036_output = {\n\t.pin_pol = VOP_REG(RK3036_DSP_CTRL0, 0xf, 4),\n};\n\nstatic const struct vop_common rk3036_common = {\n\t.standby = VOP_REG_SYNC(RK3036_SYS_CTRL, 0x1, 30),\n\t.out_mode = VOP_REG(RK3036_DSP_CTRL0, 0xf, 0),\n\t.dsp_blank = VOP_REG(RK3036_DSP_CTRL1, 0x1, 24),\n\t.dither_down_sel = VOP_REG(RK3036_DSP_CTRL0, 0x1, 27),\n\t.dither_down_en = VOP_REG(RK3036_DSP_CTRL0, 0x1, 11),\n\t.dither_down_mode = VOP_REG(RK3036_DSP_CTRL0, 0x1, 10),\n\t.cfg_done = VOP_REG_SYNC(RK3036_REG_CFG_DONE, 0x1, 0),\n};\n\nstatic const struct vop_data rk3036_vop = {\n\t.intr = &rk3036_intr,\n\t.common = &rk3036_common,\n\t.modeset = &rk3036_modeset,\n\t.output = &rk3036_output,\n\t.win = rk3036_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3036_vop_win_data),\n\t.max_output = { 1920, 1080 },\n};\n\nstatic const struct vop_win_phy rk3126_win1_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(RK3036_SYS_CTRL, 0x1, 1),\n\t.format = VOP_REG(RK3036_SYS_CTRL, 0x7, 6),\n\t.rb_swap = VOP_REG(RK3036_SYS_CTRL, 0x1, 19),\n\t.dsp_info = VOP_REG(RK3126_WIN1_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3126_WIN1_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3126_WIN1_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3036_WIN1_VIR, 0xffff, 0),\n\t.alpha_mode = VOP_REG(RK3036_DSP_CTRL0, 0x1, 19),\n\t.alpha_en = VOP_REG(RK3036_ALPHA_CTRL, 0x1, 1),\n\t.alpha_pre_mul = VOP_REG(RK3036_DSP_CTRL0, 0x1, 29),\n};\n\nstatic const struct vop_win_data rk3126_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3036_win0_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &rk3126_win1_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_data rk3126_vop = {\n\t.intr = &rk3036_intr,\n\t.common = &rk3036_common,\n\t.modeset = &rk3036_modeset,\n\t.output = &rk3036_output,\n\t.win = rk3126_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3126_vop_win_data),\n\t.max_output = { 1920, 1080 },\n};\n\nstatic const int px30_vop_intrs[] = {\n\tFS_INTR,\n\t0, 0,\n\tLINE_FLAG_INTR,\n\t0,\n\tBUS_ERROR_INTR,\n\t0, 0,\n\tDSP_HOLD_VALID_INTR,\n};\n\nstatic const struct vop_intr px30_intr = {\n\t.intrs = px30_vop_intrs,\n\t.nintrs = ARRAY_SIZE(px30_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(PX30_LINE_FLAG, 0xfff, 0),\n\t.status = VOP_REG_MASK_SYNC(PX30_INTR_STATUS, 0xffff, 0),\n\t.enable = VOP_REG_MASK_SYNC(PX30_INTR_EN, 0xffff, 0),\n\t.clear = VOP_REG_MASK_SYNC(PX30_INTR_CLEAR, 0xffff, 0),\n};\n\nstatic const struct vop_common px30_common = {\n\t.standby = VOP_REG_SYNC(PX30_SYS_CTRL2, 0x1, 1),\n\t.out_mode = VOP_REG(PX30_DSP_CTRL2, 0xf, 16),\n\t.dsp_blank = VOP_REG(PX30_DSP_CTRL2, 0x1, 14),\n\t.dither_down_en = VOP_REG(PX30_DSP_CTRL2, 0x1, 8),\n\t.dither_down_sel = VOP_REG(PX30_DSP_CTRL2, 0x1, 7),\n\t.dither_down_mode = VOP_REG(PX30_DSP_CTRL2, 0x1, 6),\n\t.cfg_done = VOP_REG_SYNC(PX30_REG_CFG_DONE, 0x1, 0),\n};\n\nstatic const struct vop_modeset px30_modeset = {\n\t.htotal_pw = VOP_REG(PX30_DSP_HTOTAL_HS_END, 0x0fff0fff, 0),\n\t.hact_st_end = VOP_REG(PX30_DSP_HACT_ST_END, 0x0fff0fff, 0),\n\t.vtotal_pw = VOP_REG(PX30_DSP_VTOTAL_VS_END, 0x0fff0fff, 0),\n\t.vact_st_end = VOP_REG(PX30_DSP_VACT_ST_END, 0x0fff0fff, 0),\n};\n\nstatic const struct vop_output px30_output = {\n\t.rgb_dclk_pol = VOP_REG(PX30_DSP_CTRL0, 0x1, 1),\n\t.rgb_pin_pol = VOP_REG(PX30_DSP_CTRL0, 0x7, 2),\n\t.rgb_en = VOP_REG(PX30_DSP_CTRL0, 0x1, 0),\n\t.mipi_dclk_pol = VOP_REG(PX30_DSP_CTRL0, 0x1, 25),\n\t.mipi_pin_pol = VOP_REG(PX30_DSP_CTRL0, 0x7, 26),\n\t.mipi_en = VOP_REG(PX30_DSP_CTRL0, 0x1, 24),\n};\n\nstatic const struct vop_scl_regs px30_win_scl = {\n\t.scale_yrgb_x = VOP_REG(PX30_WIN0_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(PX30_WIN0_SCL_FACTOR_YRGB, 0xffff, 16),\n\t.scale_cbcr_x = VOP_REG(PX30_WIN0_SCL_FACTOR_CBR, 0xffff, 0x0),\n\t.scale_cbcr_y = VOP_REG(PX30_WIN0_SCL_FACTOR_CBR, 0xffff, 16),\n};\n\nstatic const struct vop_win_phy px30_win0_data = {\n\t.scl = &px30_win_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(PX30_WIN0_CTRL0, 0x1, 0),\n\t.format = VOP_REG(PX30_WIN0_CTRL0, 0x7, 1),\n\t.rb_swap = VOP_REG(PX30_WIN0_CTRL0, 0x1, 12),\n\t.uv_swap = VOP_REG(PX30_WIN0_CTRL0, 0x1, 15),\n\t.act_info = VOP_REG(PX30_WIN0_ACT_INFO, 0xffffffff, 0),\n\t.dsp_info = VOP_REG(PX30_WIN0_DSP_INFO, 0xffffffff, 0),\n\t.dsp_st = VOP_REG(PX30_WIN0_DSP_ST, 0xffffffff, 0),\n\t.yrgb_mst = VOP_REG(PX30_WIN0_YRGB_MST0, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(PX30_WIN0_CBR_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(PX30_WIN0_VIR, 0x1fff, 0),\n\t.uv_vir = VOP_REG(PX30_WIN0_VIR, 0x1fff, 16),\n\t.alpha_pre_mul = VOP_REG(PX30_WIN0_ALPHA_CTRL, 0x1, 2),\n\t.alpha_mode = VOP_REG(PX30_WIN0_ALPHA_CTRL, 0x1, 1),\n\t.alpha_en = VOP_REG(PX30_WIN0_ALPHA_CTRL, 0x1, 0),\n};\n\nstatic const struct vop_win_phy px30_win1_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(PX30_WIN1_CTRL0, 0x1, 0),\n\t.format = VOP_REG(PX30_WIN1_CTRL0, 0x7, 4),\n\t.rb_swap = VOP_REG(PX30_WIN1_CTRL0, 0x1, 12),\n\t.uv_swap = VOP_REG(PX30_WIN1_CTRL0, 0x1, 15),\n\t.dsp_info = VOP_REG(PX30_WIN1_DSP_INFO, 0xffffffff, 0),\n\t.dsp_st = VOP_REG(PX30_WIN1_DSP_ST, 0xffffffff, 0),\n\t.yrgb_mst = VOP_REG(PX30_WIN1_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(PX30_WIN1_VIR, 0x1fff, 0),\n\t.alpha_pre_mul = VOP_REG(PX30_WIN1_ALPHA_CTRL, 0x1, 2),\n\t.alpha_mode = VOP_REG(PX30_WIN1_ALPHA_CTRL, 0x1, 1),\n\t.alpha_en = VOP_REG(PX30_WIN1_ALPHA_CTRL, 0x1, 0),\n};\n\nstatic const struct vop_win_phy px30_win2_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.gate = VOP_REG(PX30_WIN2_CTRL0, 0x1, 4),\n\t.enable = VOP_REG(PX30_WIN2_CTRL0, 0x1, 0),\n\t.format = VOP_REG(PX30_WIN2_CTRL0, 0x3, 5),\n\t.rb_swap = VOP_REG(PX30_WIN2_CTRL0, 0x1, 20),\n\t.dsp_info = VOP_REG(PX30_WIN2_DSP_INFO0, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(PX30_WIN2_DSP_ST0, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(PX30_WIN2_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(PX30_WIN2_VIR0_1, 0x1fff, 0),\n\t.alpha_pre_mul = VOP_REG(PX30_WIN2_ALPHA_CTRL, 0x1, 2),\n\t.alpha_mode = VOP_REG(PX30_WIN2_ALPHA_CTRL, 0x1, 1),\n\t.alpha_en = VOP_REG(PX30_WIN2_ALPHA_CTRL, 0x1, 0),\n};\n\nstatic const struct vop_win_data px30_vop_big_win_data[] = {\n\t{ .base = 0x00, .phy = &px30_win0_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &px30_win1_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x00, .phy = &px30_win2_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_data px30_vop_big = {\n\t.version = VOP_VERSION(2, 6),\n\t.intr = &px30_intr,\n\t.feature = VOP_FEATURE_INTERNAL_RGB,\n\t.common = &px30_common,\n\t.modeset = &px30_modeset,\n\t.output = &px30_output,\n\t.win = px30_vop_big_win_data,\n\t.win_size = ARRAY_SIZE(px30_vop_big_win_data),\n\t.max_output = { 1920, 1080 },\n};\n\nstatic const struct vop_win_data px30_vop_lit_win_data[] = {\n\t{ .base = 0x00, .phy = &px30_win1_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n};\n\nstatic const struct vop_data px30_vop_lit = {\n\t.version = VOP_VERSION(2, 5),\n\t.intr = &px30_intr,\n\t.feature = VOP_FEATURE_INTERNAL_RGB,\n\t.common = &px30_common,\n\t.modeset = &px30_modeset,\n\t.output = &px30_output,\n\t.win = px30_vop_lit_win_data,\n\t.win_size = ARRAY_SIZE(px30_vop_lit_win_data),\n\t.max_output = { 1920, 1080 },\n};\n\nstatic const struct vop_scl_regs rk3066_win_scl = {\n\t.scale_yrgb_x = VOP_REG(RK3066_WIN0_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(RK3066_WIN0_SCL_FACTOR_YRGB, 0xffff, 16),\n\t.scale_cbcr_x = VOP_REG(RK3066_WIN0_SCL_FACTOR_CBR, 0xffff, 0x0),\n\t.scale_cbcr_y = VOP_REG(RK3066_WIN0_SCL_FACTOR_CBR, 0xffff, 16),\n};\n\nstatic const struct vop_win_phy rk3066_win0_data = {\n\t.scl = &rk3066_win_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3066_SYS_CTRL1, 0x1, 0),\n\t.format = VOP_REG(RK3066_SYS_CTRL1, 0x7, 4),\n\t.rb_swap = VOP_REG(RK3066_SYS_CTRL1, 0x1, 19),\n\t.uv_swap = VOP_REG(RK3066_SYS_CTRL1, 0x1, 22),\n\t.act_info = VOP_REG(RK3066_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3066_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3066_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3066_WIN0_YRGB_MST0, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3066_WIN0_CBR_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3066_WIN0_VIR, 0xffff, 0),\n\t.uv_vir = VOP_REG(RK3066_WIN0_VIR, 0x1fff, 16),\n\t.alpha_mode = VOP_REG(RK3066_DSP_CTRL0, 0x1, 21),\n\t.alpha_en = VOP_REG(RK3066_BLEND_CTRL, 0x1, 0),\n};\n\nstatic const struct vop_win_phy rk3066_win1_data = {\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3066_SYS_CTRL1, 0x1, 1),\n\t.format = VOP_REG(RK3066_SYS_CTRL1, 0x7, 7),\n\t.rb_swap = VOP_REG(RK3066_SYS_CTRL1, 0x1, 23),\n\t.uv_swap = VOP_REG(RK3066_SYS_CTRL1, 0x1, 26),\n\t.act_info = VOP_REG(RK3066_WIN1_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3066_WIN1_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3066_WIN1_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3066_WIN1_YRGB_MST, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3066_WIN1_CBR_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3066_WIN1_VIR, 0xffff, 0),\n\t.uv_vir = VOP_REG(RK3066_WIN1_VIR, 0x1fff, 16),\n\t.alpha_mode = VOP_REG(RK3066_DSP_CTRL0, 0x1, 22),\n\t.alpha_en = VOP_REG(RK3066_BLEND_CTRL, 0x1, 1),\n};\n\nstatic const struct vop_win_phy rk3066_win2_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(RK3066_SYS_CTRL1, 0x1, 2),\n\t.format = VOP_REG(RK3066_SYS_CTRL1, 0x7, 10),\n\t.rb_swap = VOP_REG(RK3066_SYS_CTRL1, 0x1, 27),\n\t.dsp_info = VOP_REG(RK3066_WIN2_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3066_WIN2_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3066_WIN2_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3066_WIN2_VIR, 0xffff, 0),\n\t.alpha_mode = VOP_REG(RK3066_DSP_CTRL0, 0x1, 23),\n\t.alpha_en = VOP_REG(RK3066_BLEND_CTRL, 0x1, 2),\n};\n\nstatic const struct vop_modeset rk3066_modeset = {\n\t.htotal_pw = VOP_REG(RK3066_DSP_HTOTAL_HS_END, 0x1fff1fff, 0),\n\t.hact_st_end = VOP_REG(RK3066_DSP_HACT_ST_END, 0x1fff1fff, 0),\n\t.vtotal_pw = VOP_REG(RK3066_DSP_VTOTAL_VS_END, 0x1fff1fff, 0),\n\t.vact_st_end = VOP_REG(RK3066_DSP_VACT_ST_END, 0x1fff1fff, 0),\n};\n\nstatic const struct vop_output rk3066_output = {\n\t.pin_pol = VOP_REG(RK3066_DSP_CTRL0, 0x7, 4),\n};\n\nstatic const struct vop_common rk3066_common = {\n\t.standby = VOP_REG(RK3066_SYS_CTRL0, 0x1, 1),\n\t.out_mode = VOP_REG(RK3066_DSP_CTRL0, 0xf, 0),\n\t.cfg_done = VOP_REG(RK3066_REG_CFG_DONE, 0x1, 0),\n\t.dither_down_en = VOP_REG(RK3066_DSP_CTRL0, 0x1, 11),\n\t.dither_down_mode = VOP_REG(RK3066_DSP_CTRL0, 0x1, 10),\n\t.dsp_blank = VOP_REG(RK3066_DSP_CTRL1, 0x1, 24),\n\t.dither_up = VOP_REG(RK3066_DSP_CTRL0, 0x1, 9),\n\t.dsp_lut_en = VOP_REG(RK3066_SYS_CTRL1, 0x1, 31),\n\t.data_blank = VOP_REG(RK3066_DSP_CTRL1, 0x1, 25),\n};\n\nstatic const struct vop_win_data rk3066_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3066_win0_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &rk3066_win1_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x00, .phy = &rk3066_win2_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const int rk3066_vop_intrs[] = {\n\t \n\tDSP_HOLD_VALID_INTR,\n\tFS_INTR,\n\tLINE_FLAG_INTR,\n\tBUS_ERROR_INTR,\n};\n\nstatic const struct vop_intr rk3066_intr = {\n\t.intrs = rk3066_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3066_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3066_INT_STATUS, 0xfff, 12),\n\t.status = VOP_REG(RK3066_INT_STATUS, 0xf, 0),\n\t.enable = VOP_REG(RK3066_INT_STATUS, 0xf, 4),\n\t.clear = VOP_REG(RK3066_INT_STATUS, 0xf, 8),\n};\n\nstatic const struct vop_data rk3066_vop = {\n\t.version = VOP_VERSION(2, 1),\n\t.intr = &rk3066_intr,\n\t.common = &rk3066_common,\n\t.modeset = &rk3066_modeset,\n\t.output = &rk3066_output,\n\t.win = rk3066_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3066_vop_win_data),\n\t.max_output = { 1920, 1080 },\n};\n\nstatic const struct vop_scl_regs rk3188_win_scl = {\n\t.scale_yrgb_x = VOP_REG(RK3188_WIN0_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(RK3188_WIN0_SCL_FACTOR_YRGB, 0xffff, 16),\n\t.scale_cbcr_x = VOP_REG(RK3188_WIN0_SCL_FACTOR_CBR, 0xffff, 0x0),\n\t.scale_cbcr_y = VOP_REG(RK3188_WIN0_SCL_FACTOR_CBR, 0xffff, 16),\n};\n\nstatic const struct vop_win_phy rk3188_win0_data = {\n\t.scl = &rk3188_win_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3188_SYS_CTRL, 0x1, 0),\n\t.format = VOP_REG(RK3188_SYS_CTRL, 0x7, 3),\n\t.rb_swap = VOP_REG(RK3188_SYS_CTRL, 0x1, 15),\n\t.uv_swap = VOP_REG(RK3188_SYS_CTRL, 0x1, 18),\n\t.act_info = VOP_REG(RK3188_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3188_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3188_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3188_WIN0_YRGB_MST0, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3188_WIN0_CBR_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3188_WIN_VIR, 0x1fff, 0),\n\t.alpha_mode = VOP_REG(RK3188_DSP_CTRL0, 0x1, 18),\n\t.alpha_en = VOP_REG(RK3188_ALPHA_CTRL, 0x1, 0),\n\t.alpha_pre_mul = VOP_REG(RK3188_DSP_CTRL0, 0x1, 29),\n};\n\nstatic const struct vop_win_phy rk3188_win1_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(RK3188_SYS_CTRL, 0x1, 1),\n\t.format = VOP_REG(RK3188_SYS_CTRL, 0x7, 6),\n\t.rb_swap = VOP_REG(RK3188_SYS_CTRL, 0x1, 19),\n\t \n\t.dsp_info = VOP_REG(RK3188_WIN1_DSP_INFO, 0x07ff07ff, 0),\n\t.dsp_st = VOP_REG(RK3188_WIN1_DSP_ST, 0x0fff0fff, 0),\n\t.yrgb_mst = VOP_REG(RK3188_WIN1_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3188_WIN_VIR, 0x1fff, 16),\n\t.alpha_mode = VOP_REG(RK3188_DSP_CTRL0, 0x1, 19),\n\t.alpha_en = VOP_REG(RK3188_ALPHA_CTRL, 0x1, 1),\n\t.alpha_pre_mul = VOP_REG(RK3188_DSP_CTRL0, 0x1, 29),\n};\n\nstatic const struct vop_modeset rk3188_modeset = {\n\t.htotal_pw = VOP_REG(RK3188_DSP_HTOTAL_HS_END, 0x0fff0fff, 0),\n\t.hact_st_end = VOP_REG(RK3188_DSP_HACT_ST_END, 0x0fff0fff, 0),\n\t.vtotal_pw = VOP_REG(RK3188_DSP_VTOTAL_VS_END, 0x0fff0fff, 0),\n\t.vact_st_end = VOP_REG(RK3188_DSP_VACT_ST_END, 0x0fff0fff, 0),\n};\n\nstatic const struct vop_output rk3188_output = {\n\t.pin_pol = VOP_REG(RK3188_DSP_CTRL0, 0xf, 4),\n};\n\nstatic const struct vop_common rk3188_common = {\n\t.gate_en = VOP_REG(RK3188_SYS_CTRL, 0x1, 31),\n\t.standby = VOP_REG(RK3188_SYS_CTRL, 0x1, 30),\n\t.out_mode = VOP_REG(RK3188_DSP_CTRL0, 0xf, 0),\n\t.cfg_done = VOP_REG(RK3188_REG_CFG_DONE, 0x1, 0),\n\t.dither_down_sel = VOP_REG(RK3188_DSP_CTRL0, 0x1, 27),\n\t.dither_down_en = VOP_REG(RK3188_DSP_CTRL0, 0x1, 11),\n\t.dither_down_mode = VOP_REG(RK3188_DSP_CTRL0, 0x1, 10),\n\t.dsp_blank = VOP_REG(RK3188_DSP_CTRL1, 0x1, 24),\n\t.dither_up = VOP_REG(RK3188_DSP_CTRL0, 0x1, 9),\n\t.dsp_lut_en = VOP_REG(RK3188_SYS_CTRL, 0x1, 28),\n\t.data_blank = VOP_REG(RK3188_DSP_CTRL1, 0x1, 25),\n};\n\nstatic const struct vop_win_data rk3188_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3188_win0_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &rk3188_win1_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const int rk3188_vop_intrs[] = {\n\t \n\tDSP_HOLD_VALID_INTR,\n\tFS_INTR,\n\tLINE_FLAG_INTR,\n\tBUS_ERROR_INTR,\n};\n\nstatic const struct vop_intr rk3188_vop_intr = {\n\t.intrs = rk3188_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3188_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3188_INT_STATUS, 0xfff, 12),\n\t.status = VOP_REG(RK3188_INT_STATUS, 0xf, 0),\n\t.enable = VOP_REG(RK3188_INT_STATUS, 0xf, 4),\n\t.clear = VOP_REG(RK3188_INT_STATUS, 0xf, 8),\n};\n\nstatic const struct vop_data rk3188_vop = {\n\t.intr = &rk3188_vop_intr,\n\t.common = &rk3188_common,\n\t.modeset = &rk3188_modeset,\n\t.output = &rk3188_output,\n\t.win = rk3188_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3188_vop_win_data),\n\t.feature = VOP_FEATURE_INTERNAL_RGB,\n\t.max_output = { 2048, 1536 },\n};\n\nstatic const struct vop_scl_extension rk3288_win_full_scl_ext = {\n\t.cbcr_vsd_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 31),\n\t.cbcr_vsu_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 30),\n\t.cbcr_hsd_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 28),\n\t.cbcr_ver_scl_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 26),\n\t.cbcr_hor_scl_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 24),\n\t.yrgb_vsd_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 23),\n\t.yrgb_vsu_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 22),\n\t.yrgb_hsd_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 20),\n\t.yrgb_ver_scl_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 18),\n\t.yrgb_hor_scl_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 16),\n\t.line_load_mode = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 15),\n\t.cbcr_axi_gather_num = VOP_REG(RK3288_WIN0_CTRL1, 0x7, 12),\n\t.yrgb_axi_gather_num = VOP_REG(RK3288_WIN0_CTRL1, 0xf, 8),\n\t.vsd_cbcr_gt2 = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 7),\n\t.vsd_cbcr_gt4 = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 6),\n\t.vsd_yrgb_gt2 = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 5),\n\t.vsd_yrgb_gt4 = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 4),\n\t.bic_coe_sel = VOP_REG(RK3288_WIN0_CTRL1, 0x3, 2),\n\t.cbcr_axi_gather_en = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 1),\n\t.yrgb_axi_gather_en = VOP_REG(RK3288_WIN0_CTRL1, 0x1, 0),\n\t.lb_mode = VOP_REG(RK3288_WIN0_CTRL0, 0x7, 5),\n};\n\nstatic const struct vop_scl_regs rk3288_win_full_scl = {\n\t.ext = &rk3288_win_full_scl_ext,\n\t.scale_yrgb_x = VOP_REG(RK3288_WIN0_SCL_FACTOR_YRGB, 0xffff, 0x0),\n\t.scale_yrgb_y = VOP_REG(RK3288_WIN0_SCL_FACTOR_YRGB, 0xffff, 16),\n\t.scale_cbcr_x = VOP_REG(RK3288_WIN0_SCL_FACTOR_CBR, 0xffff, 0x0),\n\t.scale_cbcr_y = VOP_REG(RK3288_WIN0_SCL_FACTOR_CBR, 0xffff, 16),\n};\n\nstatic const struct vop_win_phy rk3288_win01_data = {\n\t.scl = &rk3288_win_full_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 0),\n\t.format = VOP_REG(RK3288_WIN0_CTRL0, 0x7, 1),\n\t.rb_swap = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 12),\n\t.uv_swap = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 15),\n\t.act_info = VOP_REG(RK3288_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3288_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3288_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3288_WIN0_YRGB_MST, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3288_WIN0_CBR_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3288_WIN0_VIR, 0x3fff, 0),\n\t.uv_vir = VOP_REG(RK3288_WIN0_VIR, 0x3fff, 16),\n\t.src_alpha_ctl = VOP_REG(RK3288_WIN0_SRC_ALPHA_CTRL, 0xff, 0),\n\t.dst_alpha_ctl = VOP_REG(RK3288_WIN0_DST_ALPHA_CTRL, 0xff, 0),\n\t.channel = VOP_REG(RK3288_WIN0_CTRL2, 0xff, 0),\n};\n\nstatic const struct vop_win_phy rk3288_win23_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.enable = VOP_REG(RK3288_WIN2_CTRL0, 0x1, 4),\n\t.gate = VOP_REG(RK3288_WIN2_CTRL0, 0x1, 0),\n\t.format = VOP_REG(RK3288_WIN2_CTRL0, 0x7, 1),\n\t.rb_swap = VOP_REG(RK3288_WIN2_CTRL0, 0x1, 12),\n\t.dsp_info = VOP_REG(RK3288_WIN2_DSP_INFO0, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3288_WIN2_DSP_ST0, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3288_WIN2_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3288_WIN2_VIR0_1, 0x1fff, 0),\n\t.src_alpha_ctl = VOP_REG(RK3288_WIN2_SRC_ALPHA_CTRL, 0xff, 0),\n\t.dst_alpha_ctl = VOP_REG(RK3288_WIN2_DST_ALPHA_CTRL, 0xff, 0),\n};\n\nstatic const struct vop_modeset rk3288_modeset = {\n\t.htotal_pw = VOP_REG(RK3288_DSP_HTOTAL_HS_END, 0x1fff1fff, 0),\n\t.hact_st_end = VOP_REG(RK3288_DSP_HACT_ST_END, 0x1fff1fff, 0),\n\t.vtotal_pw = VOP_REG(RK3288_DSP_VTOTAL_VS_END, 0x1fff1fff, 0),\n\t.vact_st_end = VOP_REG(RK3288_DSP_VACT_ST_END, 0x1fff1fff, 0),\n\t.hpost_st_end = VOP_REG(RK3288_POST_DSP_HACT_INFO, 0x1fff1fff, 0),\n\t.vpost_st_end = VOP_REG(RK3288_POST_DSP_VACT_INFO, 0x1fff1fff, 0),\n};\n\nstatic const struct vop_output rk3288_output = {\n\t.pin_pol = VOP_REG(RK3288_DSP_CTRL0, 0xf, 4),\n\t.rgb_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 12),\n\t.hdmi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 13),\n\t.edp_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 14),\n\t.mipi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 15),\n};\n\nstatic const struct vop_common rk3288_common = {\n\t.standby = VOP_REG_SYNC(RK3288_SYS_CTRL, 0x1, 22),\n\t.gate_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 23),\n\t.mmu_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 20),\n\t.dither_down_sel = VOP_REG(RK3288_DSP_CTRL1, 0x1, 4),\n\t.dither_down_mode = VOP_REG(RK3288_DSP_CTRL1, 0x1, 3),\n\t.dither_down_en = VOP_REG(RK3288_DSP_CTRL1, 0x1, 2),\n\t.pre_dither_down = VOP_REG(RK3288_DSP_CTRL1, 0x1, 1),\n\t.dither_up = VOP_REG(RK3288_DSP_CTRL1, 0x1, 6),\n\t.dsp_lut_en = VOP_REG(RK3288_DSP_CTRL1, 0x1, 0),\n\t.data_blank = VOP_REG(RK3288_DSP_CTRL0, 0x1, 19),\n\t.dsp_blank = VOP_REG(RK3288_DSP_CTRL0, 0x3, 18),\n\t.out_mode = VOP_REG(RK3288_DSP_CTRL0, 0xf, 0),\n\t.cfg_done = VOP_REG_SYNC(RK3288_REG_CFG_DONE, 0x1, 0),\n};\n\n \nstatic const struct vop_win_data rk3288_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3288_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x40, .phy = &rk3288_win01_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x00, .phy = &rk3288_win23_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x50, .phy = &rk3288_win23_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const int rk3288_vop_intrs[] = {\n\tDSP_HOLD_VALID_INTR,\n\tFS_INTR,\n\tLINE_FLAG_INTR,\n\tBUS_ERROR_INTR,\n};\n\nstatic const struct vop_intr rk3288_vop_intr = {\n\t.intrs = rk3288_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3288_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3288_INTR_CTRL0, 0x1fff, 12),\n\t.status = VOP_REG(RK3288_INTR_CTRL0, 0xf, 0),\n\t.enable = VOP_REG(RK3288_INTR_CTRL0, 0xf, 4),\n\t.clear = VOP_REG(RK3288_INTR_CTRL0, 0xf, 8),\n};\n\nstatic const struct vop_data rk3288_vop = {\n\t.version = VOP_VERSION(3, 1),\n\t.feature = VOP_FEATURE_OUTPUT_RGB10,\n\t.intr = &rk3288_vop_intr,\n\t.common = &rk3288_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3288_output,\n\t.win = rk3288_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3288_vop_win_data),\n\t.lut_size = 1024,\n\t \n\t.max_output = { 3840, 2160 },\n};\n\nstatic const int rk3368_vop_intrs[] = {\n\tFS_INTR,\n\t0, 0,\n\tLINE_FLAG_INTR,\n\t0,\n\tBUS_ERROR_INTR,\n\t0, 0, 0, 0, 0, 0, 0,\n\tDSP_HOLD_VALID_INTR,\n};\n\nstatic const struct vop_intr rk3368_vop_intr = {\n\t.intrs = rk3368_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3368_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3368_LINE_FLAG, 0xffff, 0),\n\t.line_flag_num[1] = VOP_REG(RK3368_LINE_FLAG, 0xffff, 16),\n\t.status = VOP_REG_MASK_SYNC(RK3368_INTR_STATUS, 0x3fff, 0),\n\t.enable = VOP_REG_MASK_SYNC(RK3368_INTR_EN, 0x3fff, 0),\n\t.clear = VOP_REG_MASK_SYNC(RK3368_INTR_CLEAR, 0x3fff, 0),\n};\n\nstatic const struct vop_win_phy rk3368_win01_data = {\n\t.scl = &rk3288_win_full_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full,\n\t.enable = VOP_REG(RK3368_WIN0_CTRL0, 0x1, 0),\n\t.format = VOP_REG(RK3368_WIN0_CTRL0, 0x7, 1),\n\t.rb_swap = VOP_REG(RK3368_WIN0_CTRL0, 0x1, 12),\n\t.uv_swap = VOP_REG(RK3368_WIN0_CTRL0, 0x1, 15),\n\t.x_mir_en = VOP_REG(RK3368_WIN0_CTRL0, 0x1, 21),\n\t.y_mir_en = VOP_REG(RK3368_WIN0_CTRL0, 0x1, 22),\n\t.act_info = VOP_REG(RK3368_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3368_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3368_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3368_WIN0_YRGB_MST, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3368_WIN0_CBR_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3368_WIN0_VIR, 0x3fff, 0),\n\t.uv_vir = VOP_REG(RK3368_WIN0_VIR, 0x3fff, 16),\n\t.src_alpha_ctl = VOP_REG(RK3368_WIN0_SRC_ALPHA_CTRL, 0xff, 0),\n\t.dst_alpha_ctl = VOP_REG(RK3368_WIN0_DST_ALPHA_CTRL, 0xff, 0),\n\t.channel = VOP_REG(RK3368_WIN0_CTRL2, 0xff, 0),\n};\n\nstatic const struct vop_win_phy rk3368_win23_data = {\n\t.data_formats = formats_win_lite,\n\t.nformats = ARRAY_SIZE(formats_win_lite),\n\t.format_modifiers = format_modifiers_win_lite,\n\t.gate = VOP_REG(RK3368_WIN2_CTRL0, 0x1, 0),\n\t.enable = VOP_REG(RK3368_WIN2_CTRL0, 0x1, 4),\n\t.format = VOP_REG(RK3368_WIN2_CTRL0, 0x3, 5),\n\t.rb_swap = VOP_REG(RK3368_WIN2_CTRL0, 0x1, 20),\n\t.y_mir_en = VOP_REG(RK3368_WIN2_CTRL1, 0x1, 15),\n\t.dsp_info = VOP_REG(RK3368_WIN2_DSP_INFO0, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3368_WIN2_DSP_ST0, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3368_WIN2_MST0, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3368_WIN2_VIR0_1, 0x1fff, 0),\n\t.src_alpha_ctl = VOP_REG(RK3368_WIN2_SRC_ALPHA_CTRL, 0xff, 0),\n\t.dst_alpha_ctl = VOP_REG(RK3368_WIN2_DST_ALPHA_CTRL, 0xff, 0),\n};\n\nstatic const struct vop_win_data rk3368_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x40, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x00, .phy = &rk3368_win23_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x50, .phy = &rk3368_win23_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_output rk3368_output = {\n\t.rgb_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 19),\n\t.hdmi_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 23),\n\t.edp_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 27),\n\t.mipi_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 31),\n\t.rgb_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 16),\n\t.hdmi_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 20),\n\t.edp_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 24),\n\t.mipi_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 28),\n\t.rgb_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 12),\n\t.hdmi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 13),\n\t.edp_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 14),\n\t.mipi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 15),\n};\n\nstatic const struct vop_misc rk3368_misc = {\n\t.global_regdone_en = VOP_REG(RK3368_SYS_CTRL, 0x1, 11),\n};\n\nstatic const struct vop_data rk3368_vop = {\n\t.version = VOP_VERSION(3, 2),\n\t.intr = &rk3368_vop_intr,\n\t.common = &rk3288_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3368_output,\n\t.misc = &rk3368_misc,\n\t.win = rk3368_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3368_vop_win_data),\n\t.max_output = { 4096, 2160 },\n};\n\nstatic const struct vop_intr rk3366_vop_intr = {\n\t.intrs = rk3368_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3368_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3366_LINE_FLAG, 0xffff, 0),\n\t.line_flag_num[1] = VOP_REG(RK3366_LINE_FLAG, 0xffff, 16),\n\t.status = VOP_REG_MASK_SYNC(RK3366_INTR_STATUS0, 0xffff, 0),\n\t.enable = VOP_REG_MASK_SYNC(RK3366_INTR_EN0, 0xffff, 0),\n\t.clear = VOP_REG_MASK_SYNC(RK3366_INTR_CLEAR0, 0xffff, 0),\n};\n\nstatic const struct vop_data rk3366_vop = {\n\t.version = VOP_VERSION(3, 4),\n\t.intr = &rk3366_vop_intr,\n\t.common = &rk3288_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3368_output,\n\t.misc = &rk3368_misc,\n\t.win = rk3368_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3368_vop_win_data),\n\t.max_output = { 4096, 2160 },\n};\n\nstatic const struct vop_output rk3399_output = {\n\t.dp_dclk_pol = VOP_REG(RK3399_DSP_CTRL1, 0x1, 19),\n\t.rgb_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 19),\n\t.hdmi_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 23),\n\t.edp_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 27),\n\t.mipi_dclk_pol = VOP_REG(RK3368_DSP_CTRL1, 0x1, 31),\n\t.dp_pin_pol = VOP_REG(RK3399_DSP_CTRL1, 0x7, 16),\n\t.rgb_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 16),\n\t.hdmi_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 20),\n\t.edp_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 24),\n\t.mipi_pin_pol = VOP_REG(RK3368_DSP_CTRL1, 0x7, 28),\n\t.dp_en = VOP_REG(RK3399_SYS_CTRL, 0x1, 11),\n\t.rgb_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 12),\n\t.hdmi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 13),\n\t.edp_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 14),\n\t.mipi_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 15),\n\t.mipi_dual_channel_en = VOP_REG(RK3288_SYS_CTRL, 0x1, 3),\n};\n\nstatic const struct vop_common rk3399_common = {\n\t.standby = VOP_REG_SYNC(RK3399_SYS_CTRL, 0x1, 22),\n\t.gate_en = VOP_REG(RK3399_SYS_CTRL, 0x1, 23),\n\t.mmu_en = VOP_REG(RK3399_SYS_CTRL, 0x1, 20),\n\t.dither_down_sel = VOP_REG(RK3399_DSP_CTRL1, 0x1, 4),\n\t.dither_down_mode = VOP_REG(RK3399_DSP_CTRL1, 0x1, 3),\n\t.dither_down_en = VOP_REG(RK3399_DSP_CTRL1, 0x1, 2),\n\t.pre_dither_down = VOP_REG(RK3399_DSP_CTRL1, 0x1, 1),\n\t.dither_up = VOP_REG(RK3399_DSP_CTRL1, 0x1, 6),\n\t.dsp_lut_en = VOP_REG(RK3399_DSP_CTRL1, 0x1, 0),\n\t.update_gamma_lut = VOP_REG(RK3399_DSP_CTRL1, 0x1, 7),\n\t.lut_buffer_index = VOP_REG(RK3399_DBG_POST_REG1, 0x1, 1),\n\t.data_blank = VOP_REG(RK3399_DSP_CTRL0, 0x1, 19),\n\t.dsp_blank = VOP_REG(RK3399_DSP_CTRL0, 0x3, 18),\n\t.out_mode = VOP_REG(RK3399_DSP_CTRL0, 0xf, 0),\n\t.cfg_done = VOP_REG_SYNC(RK3399_REG_CFG_DONE, 0x1, 0),\n};\n\nstatic const struct vop_yuv2yuv_phy rk3399_yuv2yuv_win01_data = {\n\t.y2r_coefficients = {\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 0, 0xffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 0, 0xffff, 16),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 4, 0xffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 4, 0xffff, 16),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 8, 0xffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 8, 0xffff, 16),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 12, 0xffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 12, 0xffff, 16),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 16, 0xffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 20, 0xffffffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 24, 0xffffffff, 0),\n\t\tVOP_REG(RK3399_WIN0_YUV2YUV_Y2R + 28, 0xffffffff, 0),\n\t},\n};\n\nstatic const struct vop_yuv2yuv_phy rk3399_yuv2yuv_win23_data = { };\n\nstatic const struct vop_win_yuv2yuv_data rk3399_vop_big_win_yuv2yuv_data[] = {\n\t{ .base = 0x00, .phy = &rk3399_yuv2yuv_win01_data,\n\t  .y2r_en = VOP_REG(RK3399_YUV2YUV_WIN, 0x1, 1) },\n\t{ .base = 0x60, .phy = &rk3399_yuv2yuv_win01_data,\n\t  .y2r_en = VOP_REG(RK3399_YUV2YUV_WIN, 0x1, 9) },\n\t{ .base = 0xC0, .phy = &rk3399_yuv2yuv_win23_data },\n\t{ .base = 0x120, .phy = &rk3399_yuv2yuv_win23_data },\n\n};\n\nstatic const struct vop_win_phy rk3399_win01_data = {\n\t.scl = &rk3288_win_full_scl,\n\t.data_formats = formats_win_full,\n\t.nformats = ARRAY_SIZE(formats_win_full),\n\t.format_modifiers = format_modifiers_win_full_afbc,\n\t.enable = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 0),\n\t.format = VOP_REG(RK3288_WIN0_CTRL0, 0x7, 1),\n\t.rb_swap = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 12),\n\t.uv_swap = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 15),\n\t.x_mir_en = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 21),\n\t.y_mir_en = VOP_REG(RK3288_WIN0_CTRL0, 0x1, 22),\n\t.act_info = VOP_REG(RK3288_WIN0_ACT_INFO, 0x1fff1fff, 0),\n\t.dsp_info = VOP_REG(RK3288_WIN0_DSP_INFO, 0x0fff0fff, 0),\n\t.dsp_st = VOP_REG(RK3288_WIN0_DSP_ST, 0x1fff1fff, 0),\n\t.yrgb_mst = VOP_REG(RK3288_WIN0_YRGB_MST, 0xffffffff, 0),\n\t.uv_mst = VOP_REG(RK3288_WIN0_CBR_MST, 0xffffffff, 0),\n\t.yrgb_vir = VOP_REG(RK3288_WIN0_VIR, 0x3fff, 0),\n\t.uv_vir = VOP_REG(RK3288_WIN0_VIR, 0x3fff, 16),\n\t.src_alpha_ctl = VOP_REG(RK3288_WIN0_SRC_ALPHA_CTRL, 0xff, 0),\n\t.dst_alpha_ctl = VOP_REG(RK3288_WIN0_DST_ALPHA_CTRL, 0xff, 0),\n\t.channel = VOP_REG(RK3288_WIN0_CTRL2, 0xff, 0),\n};\n\n \nstatic const struct vop_win_data rk3399_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3399_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x40, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x00, .phy = &rk3368_win23_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x50, .phy = &rk3368_win23_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_afbc rk3399_vop_afbc = {\n\t.rstn = VOP_REG(RK3399_AFBCD0_CTRL, 0x1, 3),\n\t.enable = VOP_REG(RK3399_AFBCD0_CTRL, 0x1, 0),\n\t.win_sel = VOP_REG(RK3399_AFBCD0_CTRL, 0x3, 1),\n\t.format = VOP_REG(RK3399_AFBCD0_CTRL, 0x1f, 16),\n\t.hreg_block_split = VOP_REG(RK3399_AFBCD0_CTRL, 0x1, 21),\n\t.hdr_ptr = VOP_REG(RK3399_AFBCD0_HDR_PTR, 0xffffffff, 0),\n\t.pic_size = VOP_REG(RK3399_AFBCD0_PIC_SIZE, 0xffffffff, 0),\n};\n\nstatic const struct vop_data rk3399_vop_big = {\n\t.version = VOP_VERSION(3, 5),\n\t.feature = VOP_FEATURE_OUTPUT_RGB10,\n\t.intr = &rk3366_vop_intr,\n\t.common = &rk3399_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3399_output,\n\t.afbc = &rk3399_vop_afbc,\n\t.misc = &rk3368_misc,\n\t.win = rk3399_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3399_vop_win_data),\n\t.win_yuv2yuv = rk3399_vop_big_win_yuv2yuv_data,\n\t.lut_size = 1024,\n\t.max_output = { 4096, 2160 },\n};\n\nstatic const struct vop_win_data rk3399_vop_lit_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x00, .phy = &rk3368_win23_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR},\n};\n\nstatic const struct vop_win_yuv2yuv_data rk3399_vop_lit_win_yuv2yuv_data[] = {\n\t{ .base = 0x00, .phy = &rk3399_yuv2yuv_win01_data,\n\t  .y2r_en = VOP_REG(RK3399_YUV2YUV_WIN, 0x1, 1)},\n\t{ .base = 0x60, .phy = &rk3399_yuv2yuv_win23_data },\n};\n\nstatic const struct vop_data rk3399_vop_lit = {\n\t.version = VOP_VERSION(3, 6),\n\t.intr = &rk3366_vop_intr,\n\t.common = &rk3399_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3399_output,\n\t.misc = &rk3368_misc,\n\t.win = rk3399_vop_lit_win_data,\n\t.win_size = ARRAY_SIZE(rk3399_vop_lit_win_data),\n\t.win_yuv2yuv = rk3399_vop_lit_win_yuv2yuv_data,\n\t.lut_size = 256,\n\t.max_output = { 2560, 1600 },\n};\n\nstatic const struct vop_win_data rk3228_vop_win_data[] = {\n\t{ .base = 0x00, .phy = &rk3288_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x40, .phy = &rk3288_win01_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_data rk3228_vop = {\n\t.version = VOP_VERSION(3, 7),\n\t.feature = VOP_FEATURE_OUTPUT_RGB10,\n\t.intr = &rk3366_vop_intr,\n\t.common = &rk3288_common,\n\t.modeset = &rk3288_modeset,\n\t.output = &rk3399_output,\n\t.misc = &rk3368_misc,\n\t.win = rk3228_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3228_vop_win_data),\n\t.max_output = { 4096, 2160 },\n};\n\nstatic const struct vop_modeset rk3328_modeset = {\n\t.htotal_pw = VOP_REG(RK3328_DSP_HTOTAL_HS_END, 0x1fff1fff, 0),\n\t.hact_st_end = VOP_REG(RK3328_DSP_HACT_ST_END, 0x1fff1fff, 0),\n\t.vtotal_pw = VOP_REG(RK3328_DSP_VTOTAL_VS_END, 0x1fff1fff, 0),\n\t.vact_st_end = VOP_REG(RK3328_DSP_VACT_ST_END, 0x1fff1fff, 0),\n\t.hpost_st_end = VOP_REG(RK3328_POST_DSP_HACT_INFO, 0x1fff1fff, 0),\n\t.vpost_st_end = VOP_REG(RK3328_POST_DSP_VACT_INFO, 0x1fff1fff, 0),\n};\n\nstatic const struct vop_output rk3328_output = {\n\t.rgb_dclk_pol = VOP_REG(RK3328_DSP_CTRL1, 0x1, 19),\n\t.hdmi_dclk_pol = VOP_REG(RK3328_DSP_CTRL1, 0x1, 23),\n\t.edp_dclk_pol = VOP_REG(RK3328_DSP_CTRL1, 0x1, 27),\n\t.mipi_dclk_pol = VOP_REG(RK3328_DSP_CTRL1, 0x1, 31),\n\t.rgb_en = VOP_REG(RK3328_SYS_CTRL, 0x1, 12),\n\t.hdmi_en = VOP_REG(RK3328_SYS_CTRL, 0x1, 13),\n\t.edp_en = VOP_REG(RK3328_SYS_CTRL, 0x1, 14),\n\t.mipi_en = VOP_REG(RK3328_SYS_CTRL, 0x1, 15),\n\t.rgb_pin_pol = VOP_REG(RK3328_DSP_CTRL1, 0x7, 16),\n\t.hdmi_pin_pol = VOP_REG(RK3328_DSP_CTRL1, 0x7, 20),\n\t.edp_pin_pol = VOP_REG(RK3328_DSP_CTRL1, 0x7, 24),\n\t.mipi_pin_pol = VOP_REG(RK3328_DSP_CTRL1, 0x7, 28),\n};\n\nstatic const struct vop_misc rk3328_misc = {\n\t.global_regdone_en = VOP_REG(RK3328_SYS_CTRL, 0x1, 11),\n};\n\nstatic const struct vop_common rk3328_common = {\n\t.standby = VOP_REG_SYNC(RK3328_SYS_CTRL, 0x1, 22),\n\t.dither_down_sel = VOP_REG(RK3328_DSP_CTRL1, 0x1, 4),\n\t.dither_down_mode = VOP_REG(RK3328_DSP_CTRL1, 0x1, 3),\n\t.dither_down_en = VOP_REG(RK3328_DSP_CTRL1, 0x1, 2),\n\t.pre_dither_down = VOP_REG(RK3328_DSP_CTRL1, 0x1, 1),\n\t.dither_up = VOP_REG(RK3328_DSP_CTRL1, 0x1, 6),\n\t.dsp_blank = VOP_REG(RK3328_DSP_CTRL0, 0x3, 18),\n\t.out_mode = VOP_REG(RK3328_DSP_CTRL0, 0xf, 0),\n\t.cfg_done = VOP_REG_SYNC(RK3328_REG_CFG_DONE, 0x1, 0),\n};\n\nstatic const struct vop_intr rk3328_vop_intr = {\n\t.intrs = rk3368_vop_intrs,\n\t.nintrs = ARRAY_SIZE(rk3368_vop_intrs),\n\t.line_flag_num[0] = VOP_REG(RK3328_LINE_FLAG, 0xffff, 0),\n\t.line_flag_num[1] = VOP_REG(RK3328_LINE_FLAG, 0xffff, 16),\n\t.status = VOP_REG_MASK_SYNC(RK3328_INTR_STATUS0, 0xffff, 0),\n\t.enable = VOP_REG_MASK_SYNC(RK3328_INTR_EN0, 0xffff, 0),\n\t.clear = VOP_REG_MASK_SYNC(RK3328_INTR_CLEAR0, 0xffff, 0),\n};\n\nstatic const struct vop_win_data rk3328_vop_win_data[] = {\n\t{ .base = 0xd0, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_PRIMARY },\n\t{ .base = 0x1d0, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_OVERLAY },\n\t{ .base = 0x2d0, .phy = &rk3368_win01_data,\n\t  .type = DRM_PLANE_TYPE_CURSOR },\n};\n\nstatic const struct vop_data rk3328_vop = {\n\t.version = VOP_VERSION(3, 8),\n\t.feature = VOP_FEATURE_OUTPUT_RGB10,\n\t.intr = &rk3328_vop_intr,\n\t.common = &rk3328_common,\n\t.modeset = &rk3328_modeset,\n\t.output = &rk3328_output,\n\t.misc = &rk3328_misc,\n\t.win = rk3328_vop_win_data,\n\t.win_size = ARRAY_SIZE(rk3328_vop_win_data),\n\t.max_output = { 4096, 2160 },\n};\n\nstatic const struct of_device_id vop_driver_dt_match[] = {\n\t{ .compatible = \"rockchip,rk3036-vop\",\n\t  .data = &rk3036_vop },\n\t{ .compatible = \"rockchip,rk3126-vop\",\n\t  .data = &rk3126_vop },\n\t{ .compatible = \"rockchip,px30-vop-big\",\n\t  .data = &px30_vop_big },\n\t{ .compatible = \"rockchip,px30-vop-lit\",\n\t  .data = &px30_vop_lit },\n\t{ .compatible = \"rockchip,rk3066-vop\",\n\t  .data = &rk3066_vop },\n\t{ .compatible = \"rockchip,rk3188-vop\",\n\t  .data = &rk3188_vop },\n\t{ .compatible = \"rockchip,rk3288-vop\",\n\t  .data = &rk3288_vop },\n\t{ .compatible = \"rockchip,rk3368-vop\",\n\t  .data = &rk3368_vop },\n\t{ .compatible = \"rockchip,rk3366-vop\",\n\t  .data = &rk3366_vop },\n\t{ .compatible = \"rockchip,rk3399-vop-big\",\n\t  .data = &rk3399_vop_big },\n\t{ .compatible = \"rockchip,rk3399-vop-lit\",\n\t  .data = &rk3399_vop_lit },\n\t{ .compatible = \"rockchip,rk3228-vop\",\n\t  .data = &rk3228_vop },\n\t{ .compatible = \"rockchip,rk3328-vop\",\n\t  .data = &rk3328_vop },\n\t{},\n};\nMODULE_DEVICE_TABLE(of, vop_driver_dt_match);\n\nstatic int vop_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\n\tif (!dev->of_node) {\n\t\tDRM_DEV_ERROR(dev, \"can't find vop devices\\n\");\n\t\treturn -ENODEV;\n\t}\n\n\treturn component_add(dev, &vop_component_ops);\n}\n\nstatic void vop_remove(struct platform_device *pdev)\n{\n\tcomponent_del(&pdev->dev, &vop_component_ops);\n}\n\nstruct platform_driver vop_platform_driver = {\n\t.probe = vop_probe,\n\t.remove_new = vop_remove,\n\t.driver = {\n\t\t.name = \"rockchip-vop\",\n\t\t.of_match_table = vop_driver_dt_match,\n\t},\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}