{
  "module_name": "kmb_drv.h",
  "hash_id": "885054288d24e6d8ff6eb43dd812415302441c6a14db114ca233f6b924595d74",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/kmb/kmb_drv.h",
  "human_readable_source": " \n\n#ifndef __KMB_DRV_H__\n#define __KMB_DRV_H__\n\n#include <drm/drm_device.h>\n\n#include \"kmb_plane.h\"\n#include \"kmb_regs.h\"\n\n#define KMB_MAX_WIDTH\t\t\t1920  \n#define KMB_MAX_HEIGHT\t\t\t1080  \n#define KMB_MIN_WIDTH                   1920  \n#define KMB_MIN_HEIGHT                  1080  \n\n#define DRIVER_DATE\t\t\t\"20210223\"\n#define DRIVER_MAJOR\t\t\t1\n#define DRIVER_MINOR\t\t\t1\n\n \n#define KMB_CRTC_MIN_VFP\t\t4\n#define KMB_CRTC_MAX_WIDTH\t\t1920  \n#define KMB_CRTC_MAX_HEIGHT\t\t1080  \n#define KMB_CRTC_MIN_WIDTH\t\t1920\n#define KMB_CRTC_MIN_HEIGHT\t\t1080\n#define KMB_FB_MAX_WIDTH\t\t1920\n#define KMB_FB_MAX_HEIGHT\t\t1080\n#define KMB_FB_MIN_WIDTH\t\t1\n#define KMB_FB_MIN_HEIGHT\t\t1\n#define KMB_MIN_VREFRESH\t\t59     \n#define KMB_MAX_VREFRESH\t\t60     \n#define KMB_LCD_DEFAULT_CLK\t\t200000000\n#define KMB_SYS_CLK_MHZ\t\t\t500\n\n#define ICAM_MMIO\t\t0x3b100000\n#define ICAM_LCD_OFFSET\t\t0x1080\n#define ICAM_MMIO_SIZE\t\t0x2000\n\nstruct kmb_dsi;\n\nstruct kmb_clock {\n\tstruct clk *clk_lcd;\n\tstruct clk *clk_pll0;\n};\n\nstruct kmb_drm_private {\n\tstruct drm_device\t\tdrm;\n\tstruct kmb_dsi\t\t\t*kmb_dsi;\n\tvoid __iomem\t\t\t*lcd_mmio;\n\tstruct kmb_clock\t\tkmb_clk;\n\tstruct drm_crtc\t\t\tcrtc;\n\tstruct kmb_plane\t\t*plane;\n\tstruct drm_atomic_state\t\t*state;\n\tspinlock_t\t\t\tirq_lock;\n\tint\t\t\t\tirq_lcd;\n\tint\t\t\t\tsys_clk_mhz;\n\tstruct disp_cfg\t\t\tinit_disp_cfg[KMB_MAX_PLANES];\n\tstruct layer_status\t\tplane_status[KMB_MAX_PLANES];\n\tint\t\t\t\tkmb_under_flow;\n\tint\t\t\t\tkmb_flush_done;\n\tint\t\t\t\tlayer_no;\n};\n\nstatic inline struct kmb_drm_private *to_kmb(const struct drm_device *dev)\n{\n\treturn container_of(dev, struct kmb_drm_private, drm);\n}\n\nstatic inline struct kmb_drm_private *crtc_to_kmb_priv(const struct drm_crtc *x)\n{\n\treturn container_of(x, struct kmb_drm_private, crtc);\n}\n\nstatic inline void kmb_write_lcd(struct kmb_drm_private *dev_p,\n\t\t\t\t unsigned int reg, u32 value)\n{\n\twritel(value, (dev_p->lcd_mmio + reg));\n}\n\nstatic inline u32 kmb_read_lcd(struct kmb_drm_private *dev_p, unsigned int reg)\n{\n\treturn readl(dev_p->lcd_mmio + reg);\n}\n\nstatic inline void kmb_set_bitmask_lcd(struct kmb_drm_private *dev_p,\n\t\t\t\t       unsigned int reg, u32 mask)\n{\n\tu32 reg_val = kmb_read_lcd(dev_p, reg);\n\n\tkmb_write_lcd(dev_p, reg, (reg_val | mask));\n}\n\nstatic inline void kmb_clr_bitmask_lcd(struct kmb_drm_private *dev_p,\n\t\t\t\t       unsigned int reg, u32 mask)\n{\n\tu32 reg_val = kmb_read_lcd(dev_p, reg);\n\n\tkmb_write_lcd(dev_p, reg, (reg_val & (~mask)));\n}\n\nint kmb_setup_crtc(struct drm_device *dev);\nvoid kmb_set_scanout(struct kmb_drm_private *lcd);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}