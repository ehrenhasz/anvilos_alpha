{
  "module_name": "ni_dpm.h",
  "hash_id": "263b6a48669154ab6775f4fa24c59b47ffe71c5d39601804ac42260890fe08fe",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/ni_dpm.h",
  "human_readable_source": " \n#ifndef __NI_DPM_H__\n#define __NI_DPM_H__\n\n#include \"cypress_dpm.h\"\n#include \"btc_dpm.h\"\n#include \"nislands_smc.h\"\n\nstruct ni_clock_registers {\n\tu32 cg_spll_func_cntl;\n\tu32 cg_spll_func_cntl_2;\n\tu32 cg_spll_func_cntl_3;\n\tu32 cg_spll_func_cntl_4;\n\tu32 cg_spll_spread_spectrum;\n\tu32 cg_spll_spread_spectrum_2;\n\tu32 mclk_pwrmgt_cntl;\n\tu32 dll_cntl;\n\tu32 mpll_ad_func_cntl;\n\tu32 mpll_ad_func_cntl_2;\n\tu32 mpll_dq_func_cntl;\n\tu32 mpll_dq_func_cntl_2;\n\tu32 mpll_ss1;\n\tu32 mpll_ss2;\n};\n\nstruct ni_mc_reg_entry {\n\tu32 mclk_max;\n\tu32 mc_data[SMC_NISLANDS_MC_REGISTER_ARRAY_SIZE];\n};\n\nstruct ni_mc_reg_table {\n\tu8 last;\n\tu8 num_entries;\n\tu16 valid_flag;\n\tstruct ni_mc_reg_entry mc_reg_table_entry[MAX_AC_TIMING_ENTRIES];\n\tSMC_NIslands_MCRegisterAddress mc_reg_address[SMC_NISLANDS_MC_REGISTER_ARRAY_SIZE];\n};\n\n#define NISLANDS_MCREGISTERTABLE_FIRST_DRIVERSTATE_SLOT 2\n\nenum ni_dc_cac_level\n{\n\tNISLANDS_DCCAC_LEVEL_0 = 0,\n\tNISLANDS_DCCAC_LEVEL_1,\n\tNISLANDS_DCCAC_LEVEL_2,\n\tNISLANDS_DCCAC_LEVEL_3,\n\tNISLANDS_DCCAC_LEVEL_4,\n\tNISLANDS_DCCAC_LEVEL_5,\n\tNISLANDS_DCCAC_LEVEL_6,\n\tNISLANDS_DCCAC_LEVEL_7,\n\tNISLANDS_DCCAC_MAX_LEVELS\n};\n\nstruct ni_leakage_coeffients\n{\n\tu32 at;\n\tu32 bt;\n\tu32 av;\n\tu32 bv;\n\ts32 t_slope;\n\ts32 t_intercept;\n\tu32 t_ref;\n};\n\nstruct ni_cac_data\n{\n\tstruct ni_leakage_coeffients leakage_coefficients;\n\tu32 i_leakage;\n\ts32 leakage_minimum_temperature;\n\tu32 pwr_const;\n\tu32 dc_cac_value;\n\tu32 bif_cac_value;\n\tu32 lkge_pwr;\n\tu8 mc_wr_weight;\n\tu8 mc_rd_weight;\n\tu8 allow_ovrflw;\n\tu8 num_win_tdp;\n\tu8 l2num_win_tdp;\n\tu8 lts_truncate_n;\n};\n\nstruct ni_cac_weights\n{\n\tu32 weight_tcp_sig0;\n\tu32 weight_tcp_sig1;\n\tu32 weight_ta_sig;\n\tu32 weight_tcc_en0;\n\tu32 weight_tcc_en1;\n\tu32 weight_tcc_en2;\n\tu32 weight_cb_en0;\n\tu32 weight_cb_en1;\n\tu32 weight_cb_en2;\n\tu32 weight_cb_en3;\n\tu32 weight_db_sig0;\n\tu32 weight_db_sig1;\n\tu32 weight_db_sig2;\n\tu32 weight_db_sig3;\n\tu32 weight_sxm_sig0;\n\tu32 weight_sxm_sig1;\n\tu32 weight_sxm_sig2;\n\tu32 weight_sxs_sig0;\n\tu32 weight_sxs_sig1;\n\tu32 weight_xbr_0;\n\tu32 weight_xbr_1;\n\tu32 weight_xbr_2;\n\tu32 weight_spi_sig0;\n\tu32 weight_spi_sig1;\n\tu32 weight_spi_sig2;\n\tu32 weight_spi_sig3;\n\tu32 weight_spi_sig4;\n\tu32 weight_spi_sig5;\n\tu32 weight_lds_sig0;\n\tu32 weight_lds_sig1;\n\tu32 weight_sc;\n\tu32 weight_bif;\n\tu32 weight_cp;\n\tu32 weight_pa_sig0;\n\tu32 weight_pa_sig1;\n\tu32 weight_vgt_sig0;\n\tu32 weight_vgt_sig1;\n\tu32 weight_vgt_sig2;\n\tu32 weight_dc_sig0;\n\tu32 weight_dc_sig1;\n\tu32 weight_dc_sig2;\n\tu32 weight_dc_sig3;\n\tu32 weight_uvd_sig0;\n\tu32 weight_uvd_sig1;\n\tu32 weight_spare0;\n\tu32 weight_spare1;\n\tu32 weight_sq_vsp;\n\tu32 weight_sq_vsp0;\n\tu32 weight_sq_gpr;\n\tu32 ovr_mode_spare_0;\n\tu32 ovr_val_spare_0;\n\tu32 ovr_mode_spare_1;\n\tu32 ovr_val_spare_1;\n\tu32 vsp;\n\tu32 vsp0;\n\tu32 gpr;\n\tu8 mc_read_weight;\n\tu8 mc_write_weight;\n\tu32 tid_cnt;\n\tu32 tid_unit;\n\tu32 l2_lta_window_size;\n\tu32 lts_truncate;\n\tu32 dc_cac[NISLANDS_DCCAC_MAX_LEVELS];\n\tu32 pcie_cac[SMC_NISLANDS_BIF_LUT_NUM_OF_ENTRIES];\n\tbool enable_power_containment_by_default;\n};\n\nstruct ni_ps {\n\tu16 performance_level_count;\n\tbool dc_compatible;\n\tstruct rv7xx_pl performance_levels[NISLANDS_MAX_SMC_PERFORMANCE_LEVELS_PER_SWSTATE];\n};\n\nstruct ni_power_info {\n\t \n\tstruct evergreen_power_info eg;\n\tstruct ni_clock_registers clock_registers;\n\tstruct ni_mc_reg_table mc_reg_table;\n\tu32 mclk_rtt_mode_threshold;\n\t \n\tbool use_power_boost_limit;\n\tbool support_cac_long_term_average;\n\tbool cac_enabled;\n\tbool cac_configuration_required;\n\tbool driver_calculate_cac_leakage;\n\tbool pc_enabled;\n\tbool enable_power_containment;\n\tbool enable_cac;\n\tbool enable_sq_ramping;\n\t \n\tu16 arb_table_start;\n\tu16 fan_table_start;\n\tu16 cac_table_start;\n\tu16 spll_table_start;\n\t \n\tstruct ni_cac_data cac_data;\n\tu32 dc_cac_table[NISLANDS_DCCAC_MAX_LEVELS];\n\tconst struct ni_cac_weights *cac_weights;\n\tu8 lta_window_size;\n\tu8 lts_truncate;\n\tstruct ni_ps current_ps;\n\tstruct ni_ps requested_ps;\n\t \n\tSMC_NIslands_MCRegisters smc_mc_reg_table;\n\tNISLANDS_SMC_STATETABLE smc_statetable;\n};\n\n#define NISLANDS_INITIAL_STATE_ARB_INDEX    0\n#define NISLANDS_ACPI_STATE_ARB_INDEX       1\n#define NISLANDS_ULV_STATE_ARB_INDEX        2\n#define NISLANDS_DRIVER_STATE_ARB_INDEX     3\n\n#define NISLANDS_DPM2_MAX_PULSE_SKIP        256\n\n#define NISLANDS_DPM2_NEAR_TDP_DEC          10\n#define NISLANDS_DPM2_ABOVE_SAFE_INC        5\n#define NISLANDS_DPM2_BELOW_SAFE_INC        20\n\n#define NISLANDS_DPM2_TDP_SAFE_LIMIT_PERCENT            80\n\n#define NISLANDS_DPM2_MAXPS_PERCENT_H                   90\n#define NISLANDS_DPM2_MAXPS_PERCENT_M                   0\n\n#define NISLANDS_DPM2_SQ_RAMP_MAX_POWER                 0x3FFF\n#define NISLANDS_DPM2_SQ_RAMP_MIN_POWER                 0x12\n#define NISLANDS_DPM2_SQ_RAMP_MAX_POWER_DELTA           0x15\n#define NISLANDS_DPM2_SQ_RAMP_STI_SIZE                  0x1E\n#define NISLANDS_DPM2_SQ_RAMP_LTI_RATIO                 0xF\n\nint ni_copy_and_switch_arb_sets(struct radeon_device *rdev,\n\t\t\t\tu32 arb_freq_src, u32 arb_freq_dest);\nvoid ni_update_current_ps(struct radeon_device *rdev,\n\t\t\t  struct radeon_ps *rps);\nvoid ni_update_requested_ps(struct radeon_device *rdev,\n\t\t\t    struct radeon_ps *rps);\n\nvoid ni_set_uvd_clock_before_set_eng_clock(struct radeon_device *rdev,\n\t\t\t\t\t   struct radeon_ps *new_ps,\n\t\t\t\t\t   struct radeon_ps *old_ps);\nvoid ni_set_uvd_clock_after_set_eng_clock(struct radeon_device *rdev,\n\t\t\t\t\t  struct radeon_ps *new_ps,\n\t\t\t\t\t  struct radeon_ps *old_ps);\n\nbool ni_dpm_vblank_too_short(struct radeon_device *rdev);\n\nstruct ni_power_info *ni_get_pi(struct radeon_device *rdev);\nstruct ni_ps *ni_get_ps(struct radeon_ps *rps);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}