{
  "module_name": "nislands_smc.h",
  "hash_id": "437370bba205accc34e6d26d55d7591d1febe3e28a2136f8de77d77e5e6db8ce",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/nislands_smc.h",
  "human_readable_source": " \n#ifndef __NISLANDS_SMC_H__\n#define __NISLANDS_SMC_H__\n\n#pragma pack(push, 1)\n\n#define NISLANDS_MAX_SMC_PERFORMANCE_LEVELS_PER_SWSTATE 16\n\nstruct PP_NIslands_Dpm2PerfLevel\n{\n    uint8_t     MaxPS;\n    uint8_t     TgtAct;\n    uint8_t     MaxPS_StepInc;\n    uint8_t     MaxPS_StepDec;\n    uint8_t     PSST;\n    uint8_t     NearTDPDec;\n    uint8_t     AboveSafeInc;\n    uint8_t     BelowSafeInc;\n    uint8_t     PSDeltaLimit;\n    uint8_t     PSDeltaWin;\n    uint8_t     Reserved[6];\n};\n\ntypedef struct PP_NIslands_Dpm2PerfLevel PP_NIslands_Dpm2PerfLevel;\n\nstruct PP_NIslands_DPM2Parameters\n{\n    uint32_t    TDPLimit;\n    uint32_t    NearTDPLimit;\n    uint32_t    SafePowerLimit;\n    uint32_t    PowerBoostLimit;\n};\ntypedef struct PP_NIslands_DPM2Parameters PP_NIslands_DPM2Parameters;\n\nstruct NISLANDS_SMC_SCLK_VALUE\n{\n    uint32_t        vCG_SPLL_FUNC_CNTL;\n    uint32_t        vCG_SPLL_FUNC_CNTL_2;\n    uint32_t        vCG_SPLL_FUNC_CNTL_3;\n    uint32_t        vCG_SPLL_FUNC_CNTL_4;\n    uint32_t        vCG_SPLL_SPREAD_SPECTRUM;\n    uint32_t        vCG_SPLL_SPREAD_SPECTRUM_2;\n    uint32_t        sclk_value;\n};\n\ntypedef struct NISLANDS_SMC_SCLK_VALUE NISLANDS_SMC_SCLK_VALUE;\n\nstruct NISLANDS_SMC_MCLK_VALUE\n{\n    uint32_t        vMPLL_FUNC_CNTL;\n    uint32_t        vMPLL_FUNC_CNTL_1;\n    uint32_t        vMPLL_FUNC_CNTL_2;\n    uint32_t        vMPLL_AD_FUNC_CNTL;\n    uint32_t        vMPLL_AD_FUNC_CNTL_2;\n    uint32_t        vMPLL_DQ_FUNC_CNTL;\n    uint32_t        vMPLL_DQ_FUNC_CNTL_2;\n    uint32_t        vMCLK_PWRMGT_CNTL;\n    uint32_t        vDLL_CNTL;\n    uint32_t        vMPLL_SS;\n    uint32_t        vMPLL_SS2;\n    uint32_t        mclk_value;\n};\n\ntypedef struct NISLANDS_SMC_MCLK_VALUE NISLANDS_SMC_MCLK_VALUE;\n\nstruct NISLANDS_SMC_VOLTAGE_VALUE\n{\n    uint16_t             value;\n    uint8_t              index;\n    uint8_t              padding;\n};\n\ntypedef struct NISLANDS_SMC_VOLTAGE_VALUE NISLANDS_SMC_VOLTAGE_VALUE;\n\nstruct NISLANDS_SMC_HW_PERFORMANCE_LEVEL\n{\n    uint8_t                     arbValue;\n    uint8_t                     ACIndex;\n    uint8_t                     displayWatermark;\n    uint8_t                     gen2PCIE;\n    uint8_t                     reserved1;\n    uint8_t                     reserved2;\n    uint8_t                     strobeMode;\n    uint8_t                     mcFlags;\n    uint32_t                    aT;\n    uint32_t                    bSP;\n    NISLANDS_SMC_SCLK_VALUE     sclk;\n    NISLANDS_SMC_MCLK_VALUE     mclk;\n    NISLANDS_SMC_VOLTAGE_VALUE  vddc;\n    NISLANDS_SMC_VOLTAGE_VALUE  mvdd;\n    NISLANDS_SMC_VOLTAGE_VALUE  vddci;\n    NISLANDS_SMC_VOLTAGE_VALUE  std_vddc;\n    uint32_t                    powergate_en;\n    uint8_t                     hUp;\n    uint8_t                     hDown;\n    uint8_t                     stateFlags;\n    uint8_t                     arbRefreshState;\n    uint32_t                    SQPowerThrottle;\n    uint32_t                    SQPowerThrottle_2;\n    uint32_t                    reserved[2];\n    PP_NIslands_Dpm2PerfLevel   dpm2;\n};\n\n#define NISLANDS_SMC_STROBE_RATIO    0x0F\n#define NISLANDS_SMC_STROBE_ENABLE   0x10\n\n#define NISLANDS_SMC_MC_EDC_RD_FLAG  0x01\n#define NISLANDS_SMC_MC_EDC_WR_FLAG  0x02\n#define NISLANDS_SMC_MC_RTT_ENABLE   0x04\n#define NISLANDS_SMC_MC_STUTTER_EN   0x08\n\ntypedef struct NISLANDS_SMC_HW_PERFORMANCE_LEVEL NISLANDS_SMC_HW_PERFORMANCE_LEVEL;\n\nstruct NISLANDS_SMC_SWSTATE\n{\n\tuint8_t                             flags;\n\tuint8_t                             levelCount;\n\tuint8_t                             padding2;\n\tuint8_t                             padding3;\n\tNISLANDS_SMC_HW_PERFORMANCE_LEVEL   levels[];\n};\n\ntypedef struct NISLANDS_SMC_SWSTATE NISLANDS_SMC_SWSTATE;\n\nstruct NISLANDS_SMC_SWSTATE_SINGLE {\n\tuint8_t                             flags;\n\tuint8_t                             levelCount;\n\tuint8_t                             padding2;\n\tuint8_t                             padding3;\n\tNISLANDS_SMC_HW_PERFORMANCE_LEVEL   level;\n};\n\n#define NISLANDS_SMC_VOLTAGEMASK_VDDC  0\n#define NISLANDS_SMC_VOLTAGEMASK_MVDD  1\n#define NISLANDS_SMC_VOLTAGEMASK_VDDCI 2\n#define NISLANDS_SMC_VOLTAGEMASK_MAX   4\n\nstruct NISLANDS_SMC_VOLTAGEMASKTABLE\n{\n    uint8_t  highMask[NISLANDS_SMC_VOLTAGEMASK_MAX];\n    uint32_t lowMask[NISLANDS_SMC_VOLTAGEMASK_MAX];\n};\n\ntypedef struct NISLANDS_SMC_VOLTAGEMASKTABLE NISLANDS_SMC_VOLTAGEMASKTABLE;\n\n#define NISLANDS_MAX_NO_VREG_STEPS 32\n\nstruct NISLANDS_SMC_STATETABLE\n{\n\tuint8_t                             thermalProtectType;\n\tuint8_t                             systemFlags;\n\tuint8_t                             maxVDDCIndexInPPTable;\n\tuint8_t                             extraFlags;\n\tuint8_t                             highSMIO[NISLANDS_MAX_NO_VREG_STEPS];\n\tuint32_t                            lowSMIO[NISLANDS_MAX_NO_VREG_STEPS];\n\tNISLANDS_SMC_VOLTAGEMASKTABLE       voltageMaskTable;\n\tPP_NIslands_DPM2Parameters          dpm2Params;\n\tstruct NISLANDS_SMC_SWSTATE_SINGLE  initialState;\n\tstruct NISLANDS_SMC_SWSTATE_SINGLE  ACPIState;\n\tstruct NISLANDS_SMC_SWSTATE_SINGLE  ULVState;\n\tNISLANDS_SMC_SWSTATE                driverState;\n\tNISLANDS_SMC_HW_PERFORMANCE_LEVEL   dpmLevels[NISLANDS_MAX_SMC_PERFORMANCE_LEVELS_PER_SWSTATE];\n};\n\ntypedef struct NISLANDS_SMC_STATETABLE NISLANDS_SMC_STATETABLE;\n\n#define NI_SMC_SOFT_REGISTERS_START        0x108\n\n#define NI_SMC_SOFT_REGISTER_mclk_chg_timeout        0x0\n#define NI_SMC_SOFT_REGISTER_delay_bbias             0xC\n#define NI_SMC_SOFT_REGISTER_delay_vreg              0x10\n#define NI_SMC_SOFT_REGISTER_delay_acpi              0x2C\n#define NI_SMC_SOFT_REGISTER_seq_index               0x64\n#define NI_SMC_SOFT_REGISTER_mvdd_chg_time           0x68\n#define NI_SMC_SOFT_REGISTER_mclk_switch_lim         0x78\n#define NI_SMC_SOFT_REGISTER_watermark_threshold     0x80\n#define NI_SMC_SOFT_REGISTER_mc_block_delay          0x84\n#define NI_SMC_SOFT_REGISTER_uvd_enabled             0x98\n\n#define SMC_NISLANDS_MC_TPP_CAC_NUM_OF_ENTRIES 16\n#define SMC_NISLANDS_LKGE_LUT_NUM_OF_TEMP_ENTRIES 16\n#define SMC_NISLANDS_LKGE_LUT_NUM_OF_VOLT_ENTRIES 16\n#define SMC_NISLANDS_BIF_LUT_NUM_OF_ENTRIES 4\n\nstruct SMC_NISLANDS_MC_TPP_CAC_TABLE\n{\n    uint32_t    tpp[SMC_NISLANDS_MC_TPP_CAC_NUM_OF_ENTRIES];\n    uint32_t    cacValue[SMC_NISLANDS_MC_TPP_CAC_NUM_OF_ENTRIES];\n};\n\ntypedef struct SMC_NISLANDS_MC_TPP_CAC_TABLE SMC_NISLANDS_MC_TPP_CAC_TABLE;\n\n\nstruct PP_NIslands_CACTABLES\n{\n    uint32_t                cac_bif_lut[SMC_NISLANDS_BIF_LUT_NUM_OF_ENTRIES];\n    uint32_t                cac_lkge_lut[SMC_NISLANDS_LKGE_LUT_NUM_OF_TEMP_ENTRIES][SMC_NISLANDS_LKGE_LUT_NUM_OF_VOLT_ENTRIES];\n\n    uint32_t                pwr_const;\n\n    uint32_t                dc_cacValue;\n    uint32_t                bif_cacValue;\n    uint32_t                lkge_pwr;\n\n    uint8_t                 cac_width;\n    uint8_t                 window_size_p2;\n\n    uint8_t                 num_drop_lsb;\n    uint8_t                 padding_0;\n\n    uint32_t                last_power;\n\n    uint8_t                 AllowOvrflw;\n    uint8_t                 MCWrWeight;\n    uint8_t                 MCRdWeight;\n    uint8_t                 padding_1[9];\n\n    uint8_t                 enableWinAvg;\n    uint8_t                 numWin_TDP;\n    uint8_t                 l2numWin_TDP;\n    uint8_t                 WinIndex;\n\n    uint32_t                dynPwr_TDP[4];\n    uint32_t                lkgePwr_TDP[4];\n    uint32_t                power_TDP[4];\n    uint32_t                avg_dynPwr_TDP;\n    uint32_t                avg_lkgePwr_TDP;\n    uint32_t                avg_power_TDP;\n    uint32_t                lts_power_TDP;\n    uint8_t                 lts_truncate_n;\n    uint8_t                 padding_2[7];\n};\n\ntypedef struct PP_NIslands_CACTABLES PP_NIslands_CACTABLES;\n\n#define SMC_NISLANDS_MC_REGISTER_ARRAY_SIZE 32\n#define SMC_NISLANDS_MC_REGISTER_ARRAY_SET_COUNT 20\n\nstruct SMC_NIslands_MCRegisterAddress\n{\n    uint16_t s0;\n    uint16_t s1;\n};\n\ntypedef struct SMC_NIslands_MCRegisterAddress SMC_NIslands_MCRegisterAddress;\n\n\nstruct SMC_NIslands_MCRegisterSet\n{\n    uint32_t value[SMC_NISLANDS_MC_REGISTER_ARRAY_SIZE];\n};\n\ntypedef struct SMC_NIslands_MCRegisterSet SMC_NIslands_MCRegisterSet;\n\nstruct SMC_NIslands_MCRegisters\n{\n    uint8_t                             last;\n    uint8_t                             reserved[3];\n    SMC_NIslands_MCRegisterAddress      address[SMC_NISLANDS_MC_REGISTER_ARRAY_SIZE];\n    SMC_NIslands_MCRegisterSet          data[SMC_NISLANDS_MC_REGISTER_ARRAY_SET_COUNT];\n};\n\ntypedef struct SMC_NIslands_MCRegisters SMC_NIslands_MCRegisters;\n\nstruct SMC_NIslands_MCArbDramTimingRegisterSet\n{\n    uint32_t mc_arb_dram_timing;\n    uint32_t mc_arb_dram_timing2;\n    uint8_t  mc_arb_rfsh_rate;\n    uint8_t  padding[3];\n};\n\ntypedef struct SMC_NIslands_MCArbDramTimingRegisterSet SMC_NIslands_MCArbDramTimingRegisterSet;\n\nstruct SMC_NIslands_MCArbDramTimingRegisters\n{\n    uint8_t                                     arb_current;\n    uint8_t                                     reserved[3];\n    SMC_NIslands_MCArbDramTimingRegisterSet     data[20];\n};\n\ntypedef struct SMC_NIslands_MCArbDramTimingRegisters SMC_NIslands_MCArbDramTimingRegisters;\n\nstruct SMC_NISLANDS_SPLL_DIV_TABLE\n{\n    uint32_t    freq[256];\n    uint32_t    ss[256];\n};\n\n#define SMC_NISLANDS_SPLL_DIV_TABLE_FBDIV_MASK  0x01ffffff\n#define SMC_NISLANDS_SPLL_DIV_TABLE_FBDIV_SHIFT 0\n#define SMC_NISLANDS_SPLL_DIV_TABLE_PDIV_MASK   0xfe000000\n#define SMC_NISLANDS_SPLL_DIV_TABLE_PDIV_SHIFT  25\n#define SMC_NISLANDS_SPLL_DIV_TABLE_CLKV_MASK   0x000fffff\n#define SMC_NISLANDS_SPLL_DIV_TABLE_CLKV_SHIFT  0\n#define SMC_NISLANDS_SPLL_DIV_TABLE_CLKS_MASK   0xfff00000\n#define SMC_NISLANDS_SPLL_DIV_TABLE_CLKS_SHIFT  20\n\ntypedef struct SMC_NISLANDS_SPLL_DIV_TABLE SMC_NISLANDS_SPLL_DIV_TABLE;\n\n#define NISLANDS_SMC_FIRMWARE_HEADER_LOCATION 0x100\n\n#define NISLANDS_SMC_FIRMWARE_HEADER_version                   0x0\n#define NISLANDS_SMC_FIRMWARE_HEADER_flags                     0x4\n#define NISLANDS_SMC_FIRMWARE_HEADER_softRegisters             0x8\n#define NISLANDS_SMC_FIRMWARE_HEADER_stateTable                0xC\n#define NISLANDS_SMC_FIRMWARE_HEADER_fanTable                  0x10\n#define NISLANDS_SMC_FIRMWARE_HEADER_cacTable                  0x14\n#define NISLANDS_SMC_FIRMWARE_HEADER_mcRegisterTable           0x20\n#define NISLANDS_SMC_FIRMWARE_HEADER_mcArbDramAutoRefreshTable 0x2C\n#define NISLANDS_SMC_FIRMWARE_HEADER_spllTable                 0x30\n\n#pragma pack(pop)\n\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}