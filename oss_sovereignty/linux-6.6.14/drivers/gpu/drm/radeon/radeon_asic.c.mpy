{
  "module_name": "radeon_asic.c",
  "hash_id": "27684f33c9d5a04632879b8580b2e2d109578268f9d273dee3c4e9c133e80d45",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/radeon_asic.c",
  "human_readable_source": " \n\n#include <linux/console.h>\n#include <linux/pci.h>\n#include <linux/vgaarb.h>\n\n#include <drm/radeon_drm.h>\n\n#include \"atom.h\"\n#include \"radeon.h\"\n#include \"radeon_asic.h\"\n#include \"radeon_reg.h\"\n\n \n \nstatic uint32_t radeon_invalid_rreg(struct radeon_device *rdev, uint32_t reg)\n{\n\tDRM_ERROR(\"Invalid callback to read register 0x%04X\\n\", reg);\n\tBUG_ON(1);\n\treturn 0;\n}\n\n \nstatic void radeon_invalid_wreg(struct radeon_device *rdev, uint32_t reg, uint32_t v)\n{\n\tDRM_ERROR(\"Invalid callback to write register 0x%04X with 0x%08X\\n\",\n\t\t  reg, v);\n\tBUG_ON(1);\n}\n\n \nstatic void radeon_register_accessor_init(struct radeon_device *rdev)\n{\n\trdev->mc_rreg = &radeon_invalid_rreg;\n\trdev->mc_wreg = &radeon_invalid_wreg;\n\trdev->pll_rreg = &radeon_invalid_rreg;\n\trdev->pll_wreg = &radeon_invalid_wreg;\n\trdev->pciep_rreg = &radeon_invalid_rreg;\n\trdev->pciep_wreg = &radeon_invalid_wreg;\n\n\t \n\tif (rdev->family < CHIP_RV515) {\n\t\trdev->pcie_reg_mask = 0xff;\n\t} else {\n\t\trdev->pcie_reg_mask = 0x7ff;\n\t}\n\t \n\tif (rdev->family <= CHIP_R580) {\n\t\trdev->pll_rreg = &r100_pll_rreg;\n\t\trdev->pll_wreg = &r100_pll_wreg;\n\t}\n\tif (rdev->family >= CHIP_R420) {\n\t\trdev->mc_rreg = &r420_mc_rreg;\n\t\trdev->mc_wreg = &r420_mc_wreg;\n\t}\n\tif (rdev->family >= CHIP_RV515) {\n\t\trdev->mc_rreg = &rv515_mc_rreg;\n\t\trdev->mc_wreg = &rv515_mc_wreg;\n\t}\n\tif (rdev->family == CHIP_RS400 || rdev->family == CHIP_RS480) {\n\t\trdev->mc_rreg = &rs400_mc_rreg;\n\t\trdev->mc_wreg = &rs400_mc_wreg;\n\t}\n\tif (rdev->family == CHIP_RS690 || rdev->family == CHIP_RS740) {\n\t\trdev->mc_rreg = &rs690_mc_rreg;\n\t\trdev->mc_wreg = &rs690_mc_wreg;\n\t}\n\tif (rdev->family == CHIP_RS600) {\n\t\trdev->mc_rreg = &rs600_mc_rreg;\n\t\trdev->mc_wreg = &rs600_mc_wreg;\n\t}\n\tif (rdev->family == CHIP_RS780 || rdev->family == CHIP_RS880) {\n\t\trdev->mc_rreg = &rs780_mc_rreg;\n\t\trdev->mc_wreg = &rs780_mc_wreg;\n\t}\n\n\tif (rdev->family >= CHIP_BONAIRE) {\n\t\trdev->pciep_rreg = &cik_pciep_rreg;\n\t\trdev->pciep_wreg = &cik_pciep_wreg;\n\t} else if (rdev->family >= CHIP_R600) {\n\t\trdev->pciep_rreg = &r600_pciep_rreg;\n\t\trdev->pciep_wreg = &r600_pciep_wreg;\n\t}\n}\n\nstatic int radeon_invalid_get_allowed_info_register(struct radeon_device *rdev,\n\t\t\t\t\t\t    u32 reg, u32 *val)\n{\n\treturn -EINVAL;\n}\n\n \n \nvoid radeon_agp_disable(struct radeon_device *rdev)\n{\n\trdev->flags &= ~RADEON_IS_AGP;\n\tif (rdev->family >= CHIP_R600) {\n\t\tDRM_INFO(\"Forcing AGP to PCIE mode\\n\");\n\t\trdev->flags |= RADEON_IS_PCIE;\n\t} else if (rdev->family >= CHIP_RV515 ||\n\t\t\trdev->family == CHIP_RV380 ||\n\t\t\trdev->family == CHIP_RV410 ||\n\t\t\trdev->family == CHIP_R423) {\n\t\tDRM_INFO(\"Forcing AGP to PCIE mode\\n\");\n\t\trdev->flags |= RADEON_IS_PCIE;\n\t\trdev->asic->gart.tlb_flush = &rv370_pcie_gart_tlb_flush;\n\t\trdev->asic->gart.get_page_entry = &rv370_pcie_gart_get_page_entry;\n\t\trdev->asic->gart.set_page = &rv370_pcie_gart_set_page;\n\t} else {\n\t\tDRM_INFO(\"Forcing AGP to PCI mode\\n\");\n\t\trdev->flags |= RADEON_IS_PCI;\n\t\trdev->asic->gart.tlb_flush = &r100_pci_gart_tlb_flush;\n\t\trdev->asic->gart.get_page_entry = &r100_pci_gart_get_page_entry;\n\t\trdev->asic->gart.set_page = &r100_pci_gart_set_page;\n\t}\n\trdev->mc.gtt_size = radeon_gart_size * 1024 * 1024;\n}\n\n \n\nstatic const struct radeon_asic_ring r100_gfx_ring = {\n\t.ib_execute = &r100_ring_ib_execute,\n\t.emit_fence = &r100_fence_ring_emit,\n\t.emit_semaphore = &r100_semaphore_ring_emit,\n\t.cs_parse = &r100_cs_parse,\n\t.ring_start = &r100_ring_start,\n\t.ring_test = &r100_ring_test,\n\t.ib_test = &r100_ib_test,\n\t.is_lockup = &r100_gpu_is_lockup,\n\t.get_rptr = &r100_gfx_get_rptr,\n\t.get_wptr = &r100_gfx_get_wptr,\n\t.set_wptr = &r100_gfx_set_wptr,\n};\n\nstatic struct radeon_asic r100_asic = {\n\t.init = &r100_init,\n\t.fini = &r100_fini,\n\t.suspend = &r100_suspend,\n\t.resume = &r100_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r100_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r100_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r100_pci_gart_tlb_flush,\n\t\t.get_page_entry = &r100_pci_gart_get_page_entry,\n\t\t.set_page = &r100_pci_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r100_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &radeon_legacy_set_backlight_level,\n\t\t.get_backlight_level = &radeon_legacy_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = NULL,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r100_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_legacy_get_engine_clock,\n\t\t.set_engine_clock = &radeon_legacy_set_engine_clock,\n\t\t.get_memory_clock = &radeon_legacy_get_memory_clock,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = &radeon_legacy_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic r200_asic = {\n\t.init = &r100_init,\n\t.fini = &r100_fini,\n\t.suspend = &r100_suspend,\n\t.resume = &r100_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r100_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r100_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r100_pci_gart_tlb_flush,\n\t\t.get_page_entry = &r100_pci_gart_get_page_entry,\n\t\t.set_page = &r100_pci_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r100_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &radeon_legacy_set_backlight_level,\n\t\t.get_backlight_level = &radeon_legacy_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r100_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_legacy_get_engine_clock,\n\t\t.set_engine_clock = &radeon_legacy_set_engine_clock,\n\t\t.get_memory_clock = &radeon_legacy_get_memory_clock,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = &radeon_legacy_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring r300_gfx_ring = {\n\t.ib_execute = &r100_ring_ib_execute,\n\t.emit_fence = &r300_fence_ring_emit,\n\t.emit_semaphore = &r100_semaphore_ring_emit,\n\t.cs_parse = &r300_cs_parse,\n\t.ring_start = &r300_ring_start,\n\t.ring_test = &r100_ring_test,\n\t.ib_test = &r100_ib_test,\n\t.is_lockup = &r100_gpu_is_lockup,\n\t.get_rptr = &r100_gfx_get_rptr,\n\t.get_wptr = &r100_gfx_get_wptr,\n\t.set_wptr = &r100_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring rv515_gfx_ring = {\n\t.ib_execute = &r100_ring_ib_execute,\n\t.emit_fence = &r300_fence_ring_emit,\n\t.emit_semaphore = &r100_semaphore_ring_emit,\n\t.cs_parse = &r300_cs_parse,\n\t.ring_start = &rv515_ring_start,\n\t.ring_test = &r100_ring_test,\n\t.ib_test = &r100_ib_test,\n\t.is_lockup = &r100_gpu_is_lockup,\n\t.get_rptr = &r100_gfx_get_rptr,\n\t.get_wptr = &r100_gfx_get_wptr,\n\t.set_wptr = &r100_gfx_set_wptr,\n};\n\nstatic struct radeon_asic r300_asic = {\n\t.init = &r300_init,\n\t.fini = &r300_fini,\n\t.suspend = &r300_suspend,\n\t.resume = &r300_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r300_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r300_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r100_pci_gart_tlb_flush,\n\t\t.get_page_entry = &r100_pci_gart_get_page_entry,\n\t\t.set_page = &r100_pci_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &radeon_legacy_set_backlight_level,\n\t\t.get_backlight_level = &radeon_legacy_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r100_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_legacy_get_engine_clock,\n\t\t.set_engine_clock = &radeon_legacy_set_engine_clock,\n\t\t.get_memory_clock = &radeon_legacy_get_memory_clock,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = &rv370_get_pcie_lanes,\n\t\t.set_pcie_lanes = &rv370_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_legacy_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic r300_asic_pcie = {\n\t.init = &r300_init,\n\t.fini = &r300_fini,\n\t.suspend = &r300_suspend,\n\t.resume = &r300_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r300_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r300_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rv370_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rv370_pcie_gart_get_page_entry,\n\t\t.set_page = &rv370_pcie_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &radeon_legacy_set_backlight_level,\n\t\t.get_backlight_level = &radeon_legacy_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r100_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_legacy_get_engine_clock,\n\t\t.set_engine_clock = &radeon_legacy_set_engine_clock,\n\t\t.get_memory_clock = &radeon_legacy_get_memory_clock,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = &rv370_get_pcie_lanes,\n\t\t.set_pcie_lanes = &rv370_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_legacy_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic r420_asic = {\n\t.init = &r420_init,\n\t.fini = &r420_fini,\n\t.suspend = &r420_suspend,\n\t.resume = &r420_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r300_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r300_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rv370_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rv370_pcie_gart_get_page_entry,\n\t\t.set_page = &rv370_pcie_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r420_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &rv370_get_pcie_lanes,\n\t\t.set_pcie_lanes = &rv370_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic rs400_asic = {\n\t.init = &rs400_init,\n\t.fini = &rs400_fini,\n\t.suspend = &rs400_suspend,\n\t.resume = &rs400_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &r300_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &rs400_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rs400_gart_tlb_flush,\n\t\t.get_page_entry = &rs400_gart_get_page_entry,\n\t\t.set_page = &rs400_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &r100_irq_set,\n\t\t.process = &r100_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &r100_bandwidth_update,\n\t\t.get_vblank_counter = &r100_get_vblank_counter,\n\t\t.wait_for_vblank = &r100_wait_for_vblank,\n\t\t.set_backlight_level = &radeon_legacy_set_backlight_level,\n\t\t.get_backlight_level = &radeon_legacy_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r100_hpd_init,\n\t\t.fini = &r100_hpd_fini,\n\t\t.sense = &r100_hpd_sense,\n\t\t.set_polarity = &r100_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r100_pm_misc,\n\t\t.prepare = &r100_pm_prepare,\n\t\t.finish = &r100_pm_finish,\n\t\t.init_profile = &r100_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_legacy_get_engine_clock,\n\t\t.set_engine_clock = &radeon_legacy_set_engine_clock,\n\t\t.get_memory_clock = &radeon_legacy_get_memory_clock,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = &radeon_legacy_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &r100_page_flip,\n\t\t.page_flip_pending = &r100_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic rs600_asic = {\n\t.init = &rs600_init,\n\t.fini = &rs600_fini,\n\t.suspend = &rs600_suspend,\n\t.resume = &rs600_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &rs600_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &rs600_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rs600_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &rs600_irq_set,\n\t\t.process = &rs600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rs600_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &rs600_hpd_init,\n\t\t.fini = &rs600_hpd_fini,\n\t\t.sense = &rs600_hpd_sense,\n\t\t.set_polarity = &rs600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &rs600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r420_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic rs690_asic = {\n\t.init = &rs690_init,\n\t.fini = &rs690_fini,\n\t.suspend = &rs690_suspend,\n\t.resume = &rs690_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &rs600_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &rs690_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rs400_gart_tlb_flush,\n\t\t.get_page_entry = &rs400_gart_get_page_entry,\n\t\t.set_page = &rs400_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r300_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &rs600_irq_set,\n\t\t.process = &rs600_irq_process,\n\t},\n\t.display = {\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.bandwidth_update = &rs690_bandwidth_update,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r200_copy_dma,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &rs600_hpd_init,\n\t\t.fini = &rs600_hpd_fini,\n\t\t.sense = &rs600_hpd_sense,\n\t\t.set_polarity = &rs600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &rs600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r420_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic rv515_asic = {\n\t.init = &rv515_init,\n\t.fini = &rv515_fini,\n\t.suspend = &rv515_suspend,\n\t.resume = &rv515_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &rs600_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &rv515_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rv370_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rv370_pcie_gart_get_page_entry,\n\t\t.set_page = &rv370_pcie_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &rv515_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &rs600_irq_set,\n\t\t.process = &rs600_irq_process,\n\t},\n\t.display = {\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.bandwidth_update = &rv515_bandwidth_update,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &rs600_hpd_init,\n\t\t.fini = &rs600_hpd_fini,\n\t\t.sense = &rs600_hpd_sense,\n\t\t.set_polarity = &rs600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &rs600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r420_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &rv370_get_pcie_lanes,\n\t\t.set_pcie_lanes = &rv370_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic r520_asic = {\n\t.init = &r520_init,\n\t.fini = &rv515_fini,\n\t.suspend = &rv515_suspend,\n\t.resume = &r520_resume,\n\t.vga_set_state = &r100_vga_set_state,\n\t.asic_reset = &rs600_asic_reset,\n\t.mmio_hdp_flush = NULL,\n\t.gui_idle = &r100_gui_idle,\n\t.mc_wait_for_idle = &r520_mc_wait_for_idle,\n\t.get_allowed_info_register = radeon_invalid_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &rv370_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rv370_pcie_gart_get_page_entry,\n\t\t.set_page = &rv370_pcie_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &rv515_gfx_ring\n\t},\n\t.irq = {\n\t\t.set = &rs600_irq_set,\n\t\t.process = &rs600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rv515_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r100_copy_blit,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r200_copy_dma,\n\t\t.dma_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.copy = &r100_copy_blit,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r100_set_surface_reg,\n\t\t.clear_reg = r100_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &rs600_hpd_init,\n\t\t.fini = &rs600_hpd_fini,\n\t\t.sense = &rs600_hpd_sense,\n\t\t.set_polarity = &rs600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &rs600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r420_pm_init_profile,\n\t\t.get_dynpm_state = &r100_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &rv370_get_pcie_lanes,\n\t\t.set_pcie_lanes = &rv370_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring r600_gfx_ring = {\n\t.ib_execute = &r600_ring_ib_execute,\n\t.emit_fence = &r600_fence_ring_emit,\n\t.emit_semaphore = &r600_semaphore_ring_emit,\n\t.cs_parse = &r600_cs_parse,\n\t.ring_test = &r600_ring_test,\n\t.ib_test = &r600_ib_test,\n\t.is_lockup = &r600_gfx_is_lockup,\n\t.get_rptr = &r600_gfx_get_rptr,\n\t.get_wptr = &r600_gfx_get_wptr,\n\t.set_wptr = &r600_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring r600_dma_ring = {\n\t.ib_execute = &r600_dma_ring_ib_execute,\n\t.emit_fence = &r600_dma_fence_ring_emit,\n\t.emit_semaphore = &r600_dma_semaphore_ring_emit,\n\t.cs_parse = &r600_dma_cs_parse,\n\t.ring_test = &r600_dma_ring_test,\n\t.ib_test = &r600_dma_ib_test,\n\t.is_lockup = &r600_dma_is_lockup,\n\t.get_rptr = &r600_dma_get_rptr,\n\t.get_wptr = &r600_dma_get_wptr,\n\t.set_wptr = &r600_dma_set_wptr,\n};\n\nstatic struct radeon_asic r600_asic = {\n\t.init = &r600_init,\n\t.fini = &r600_fini,\n\t.suspend = &r600_suspend,\n\t.resume = &r600_resume,\n\t.vga_set_state = &r600_vga_set_state,\n\t.asic_reset = &r600_asic_reset,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &r600_mc_wait_for_idle,\n\t.get_xclk = &r600_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = r600_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r600_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r600_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &r600_dma_ring,\n\t},\n\t.irq = {\n\t\t.set = &r600_irq_set,\n\t\t.process = &r600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rv515_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r600_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &r600_copy_cpdma,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r600_hpd_init,\n\t\t.fini = &r600_hpd_fini,\n\t\t.sense = &r600_hpd_sense,\n\t\t.set_polarity = &r600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r600_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.get_temperature = &rv6xx_get_temp,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring rv6xx_uvd_ring = {\n\t.ib_execute = &uvd_v1_0_ib_execute,\n\t.emit_fence = &uvd_v1_0_fence_emit,\n\t.emit_semaphore = &uvd_v1_0_semaphore_emit,\n\t.cs_parse = &radeon_uvd_cs_parse,\n\t.ring_test = &uvd_v1_0_ring_test,\n\t.ib_test = &uvd_v1_0_ib_test,\n\t.is_lockup = &radeon_ring_test_lockup,\n\t.get_rptr = &uvd_v1_0_get_rptr,\n\t.get_wptr = &uvd_v1_0_get_wptr,\n\t.set_wptr = &uvd_v1_0_set_wptr,\n};\n\nstatic struct radeon_asic rv6xx_asic = {\n\t.init = &r600_init,\n\t.fini = &r600_fini,\n\t.suspend = &r600_suspend,\n\t.resume = &r600_resume,\n\t.vga_set_state = &r600_vga_set_state,\n\t.asic_reset = &r600_asic_reset,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &r600_mc_wait_for_idle,\n\t.get_xclk = &r600_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = r600_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r600_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r600_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &r600_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv6xx_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &r600_irq_set,\n\t\t.process = &r600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rv515_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r600_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &r600_copy_cpdma,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r600_hpd_init,\n\t\t.fini = &r600_hpd_fini,\n\t\t.sense = &r600_hpd_sense,\n\t\t.set_polarity = &r600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r600_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.get_temperature = &rv6xx_get_temp,\n\t\t.set_uvd_clocks = &r600_set_uvd_clocks,\n\t},\n\t.dpm = {\n\t\t.init = &rv6xx_dpm_init,\n\t\t.setup_asic = &rv6xx_setup_asic,\n\t\t.enable = &rv6xx_dpm_enable,\n\t\t.late_enable = &r600_dpm_late_enable,\n\t\t.disable = &rv6xx_dpm_disable,\n\t\t.pre_set_power_state = &r600_dpm_pre_set_power_state,\n\t\t.set_power_state = &rv6xx_dpm_set_power_state,\n\t\t.post_set_power_state = &r600_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &rv6xx_dpm_display_configuration_changed,\n\t\t.fini = &rv6xx_dpm_fini,\n\t\t.get_sclk = &rv6xx_dpm_get_sclk,\n\t\t.get_mclk = &rv6xx_dpm_get_mclk,\n\t\t.print_power_state = &rv6xx_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &rv6xx_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &rv6xx_dpm_force_performance_level,\n\t\t.get_current_sclk = &rv6xx_dpm_get_current_sclk,\n\t\t.get_current_mclk = &rv6xx_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic rs780_asic = {\n\t.init = &r600_init,\n\t.fini = &r600_fini,\n\t.suspend = &r600_suspend,\n\t.resume = &r600_resume,\n\t.vga_set_state = &r600_vga_set_state,\n\t.asic_reset = &r600_asic_reset,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &r600_mc_wait_for_idle,\n\t.get_xclk = &r600_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = r600_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r600_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r600_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &r600_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv6xx_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &r600_irq_set,\n\t\t.process = &r600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rs690_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &r600_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &r600_copy_cpdma,\n\t\t.copy_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r600_hpd_init,\n\t\t.fini = &r600_hpd_fini,\n\t\t.sense = &r600_hpd_sense,\n\t\t.set_polarity = &r600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &r600_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &rs780_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = NULL,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = NULL,\n\t\t.get_temperature = &rv6xx_get_temp,\n\t\t.set_uvd_clocks = &r600_set_uvd_clocks,\n\t},\n\t.dpm = {\n\t\t.init = &rs780_dpm_init,\n\t\t.setup_asic = &rs780_dpm_setup_asic,\n\t\t.enable = &rs780_dpm_enable,\n\t\t.late_enable = &r600_dpm_late_enable,\n\t\t.disable = &rs780_dpm_disable,\n\t\t.pre_set_power_state = &r600_dpm_pre_set_power_state,\n\t\t.set_power_state = &rs780_dpm_set_power_state,\n\t\t.post_set_power_state = &r600_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &rs780_dpm_display_configuration_changed,\n\t\t.fini = &rs780_dpm_fini,\n\t\t.get_sclk = &rs780_dpm_get_sclk,\n\t\t.get_mclk = &rs780_dpm_get_mclk,\n\t\t.print_power_state = &rs780_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &rs780_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &rs780_dpm_force_performance_level,\n\t\t.get_current_sclk = &rs780_dpm_get_current_sclk,\n\t\t.get_current_mclk = &rs780_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rs600_page_flip,\n\t\t.page_flip_pending = &rs600_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring rv770_uvd_ring = {\n\t.ib_execute = &uvd_v1_0_ib_execute,\n\t.emit_fence = &uvd_v2_2_fence_emit,\n\t.emit_semaphore = &uvd_v2_2_semaphore_emit,\n\t.cs_parse = &radeon_uvd_cs_parse,\n\t.ring_test = &uvd_v1_0_ring_test,\n\t.ib_test = &uvd_v1_0_ib_test,\n\t.is_lockup = &radeon_ring_test_lockup,\n\t.get_rptr = &uvd_v1_0_get_rptr,\n\t.get_wptr = &uvd_v1_0_get_wptr,\n\t.set_wptr = &uvd_v1_0_set_wptr,\n};\n\nstatic struct radeon_asic rv770_asic = {\n\t.init = &rv770_init,\n\t.fini = &rv770_fini,\n\t.suspend = &rv770_suspend,\n\t.resume = &rv770_resume,\n\t.asic_reset = &r600_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &r600_mc_wait_for_idle,\n\t.get_xclk = &rv770_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = r600_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &r600_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &r600_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &r600_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv770_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &r600_irq_set,\n\t\t.process = &r600_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &rv515_bandwidth_update,\n\t\t.get_vblank_counter = &rs600_get_vblank_counter,\n\t\t.wait_for_vblank = &avivo_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &rv770_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &rv770_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &r600_hpd_init,\n\t\t.fini = &r600_hpd_fini,\n\t\t.sense = &r600_hpd_sense,\n\t\t.set_polarity = &r600_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &rv770_pm_misc,\n\t\t.prepare = &rs600_pm_prepare,\n\t\t.finish = &rs600_pm_finish,\n\t\t.init_profile = &r600_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = &radeon_atom_set_clock_gating,\n\t\t.set_uvd_clocks = &rv770_set_uvd_clocks,\n\t\t.get_temperature = &rv770_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &rv770_dpm_init,\n\t\t.setup_asic = &rv770_dpm_setup_asic,\n\t\t.enable = &rv770_dpm_enable,\n\t\t.late_enable = &rv770_dpm_late_enable,\n\t\t.disable = &rv770_dpm_disable,\n\t\t.pre_set_power_state = &r600_dpm_pre_set_power_state,\n\t\t.set_power_state = &rv770_dpm_set_power_state,\n\t\t.post_set_power_state = &r600_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &rv770_dpm_display_configuration_changed,\n\t\t.fini = &rv770_dpm_fini,\n\t\t.get_sclk = &rv770_dpm_get_sclk,\n\t\t.get_mclk = &rv770_dpm_get_mclk,\n\t\t.print_power_state = &rv770_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &rv770_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &rv770_dpm_force_performance_level,\n\t\t.vblank_too_short = &rv770_dpm_vblank_too_short,\n\t\t.get_current_sclk = &rv770_dpm_get_current_sclk,\n\t\t.get_current_mclk = &rv770_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &rv770_page_flip,\n\t\t.page_flip_pending = &rv770_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring evergreen_gfx_ring = {\n\t.ib_execute = &evergreen_ring_ib_execute,\n\t.emit_fence = &r600_fence_ring_emit,\n\t.emit_semaphore = &r600_semaphore_ring_emit,\n\t.cs_parse = &evergreen_cs_parse,\n\t.ring_test = &r600_ring_test,\n\t.ib_test = &r600_ib_test,\n\t.is_lockup = &evergreen_gfx_is_lockup,\n\t.get_rptr = &r600_gfx_get_rptr,\n\t.get_wptr = &r600_gfx_get_wptr,\n\t.set_wptr = &r600_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring evergreen_dma_ring = {\n\t.ib_execute = &evergreen_dma_ring_ib_execute,\n\t.emit_fence = &evergreen_dma_fence_ring_emit,\n\t.emit_semaphore = &r600_dma_semaphore_ring_emit,\n\t.cs_parse = &evergreen_dma_cs_parse,\n\t.ring_test = &r600_dma_ring_test,\n\t.ib_test = &r600_dma_ib_test,\n\t.is_lockup = &evergreen_dma_is_lockup,\n\t.get_rptr = &r600_dma_get_rptr,\n\t.get_wptr = &r600_dma_get_wptr,\n\t.set_wptr = &r600_dma_set_wptr,\n};\n\nstatic struct radeon_asic evergreen_asic = {\n\t.init = &evergreen_init,\n\t.fini = &evergreen_fini,\n\t.suspend = &evergreen_suspend,\n\t.resume = &evergreen_resume,\n\t.asic_reset = &evergreen_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &rv770_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = evergreen_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &evergreen_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &evergreen_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &evergreen_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv770_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &evergreen_irq_set,\n\t\t.process = &evergreen_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &evergreen_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &evergreen_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &evergreen_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &r600_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &evergreen_set_uvd_clocks,\n\t\t.get_temperature = &evergreen_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &cypress_dpm_init,\n\t\t.setup_asic = &cypress_dpm_setup_asic,\n\t\t.enable = &cypress_dpm_enable,\n\t\t.late_enable = &rv770_dpm_late_enable,\n\t\t.disable = &cypress_dpm_disable,\n\t\t.pre_set_power_state = &r600_dpm_pre_set_power_state,\n\t\t.set_power_state = &cypress_dpm_set_power_state,\n\t\t.post_set_power_state = &r600_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &cypress_dpm_display_configuration_changed,\n\t\t.fini = &cypress_dpm_fini,\n\t\t.get_sclk = &rv770_dpm_get_sclk,\n\t\t.get_mclk = &rv770_dpm_get_mclk,\n\t\t.print_power_state = &rv770_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &rv770_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &rv770_dpm_force_performance_level,\n\t\t.vblank_too_short = &cypress_dpm_vblank_too_short,\n\t\t.get_current_sclk = &rv770_dpm_get_current_sclk,\n\t\t.get_current_mclk = &rv770_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic sumo_asic = {\n\t.init = &evergreen_init,\n\t.fini = &evergreen_fini,\n\t.suspend = &evergreen_suspend,\n\t.resume = &evergreen_resume,\n\t.asic_reset = &evergreen_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &r600_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = evergreen_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &evergreen_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &evergreen_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &evergreen_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv770_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &evergreen_irq_set,\n\t\t.process = &evergreen_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &evergreen_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &evergreen_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &evergreen_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &sumo_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = NULL,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &sumo_set_uvd_clocks,\n\t\t.get_temperature = &sumo_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &sumo_dpm_init,\n\t\t.setup_asic = &sumo_dpm_setup_asic,\n\t\t.enable = &sumo_dpm_enable,\n\t\t.late_enable = &sumo_dpm_late_enable,\n\t\t.disable = &sumo_dpm_disable,\n\t\t.pre_set_power_state = &sumo_dpm_pre_set_power_state,\n\t\t.set_power_state = &sumo_dpm_set_power_state,\n\t\t.post_set_power_state = &sumo_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &sumo_dpm_display_configuration_changed,\n\t\t.fini = &sumo_dpm_fini,\n\t\t.get_sclk = &sumo_dpm_get_sclk,\n\t\t.get_mclk = &sumo_dpm_get_mclk,\n\t\t.print_power_state = &sumo_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &sumo_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &sumo_dpm_force_performance_level,\n\t\t.get_current_sclk = &sumo_dpm_get_current_sclk,\n\t\t.get_current_mclk = &sumo_dpm_get_current_mclk,\n\t\t.get_current_vddc = &sumo_dpm_get_current_vddc,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic btc_asic = {\n\t.init = &evergreen_init,\n\t.fini = &evergreen_fini,\n\t.suspend = &evergreen_suspend,\n\t.resume = &evergreen_resume,\n\t.asic_reset = &evergreen_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &rv770_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = evergreen_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &evergreen_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &evergreen_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &evergreen_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &rv770_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &evergreen_irq_set,\n\t\t.process = &evergreen_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &evergreen_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &evergreen_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &evergreen_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &btc_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &evergreen_set_uvd_clocks,\n\t\t.get_temperature = &evergreen_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &btc_dpm_init,\n\t\t.setup_asic = &btc_dpm_setup_asic,\n\t\t.enable = &btc_dpm_enable,\n\t\t.late_enable = &rv770_dpm_late_enable,\n\t\t.disable = &btc_dpm_disable,\n\t\t.pre_set_power_state = &btc_dpm_pre_set_power_state,\n\t\t.set_power_state = &btc_dpm_set_power_state,\n\t\t.post_set_power_state = &btc_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &cypress_dpm_display_configuration_changed,\n\t\t.fini = &btc_dpm_fini,\n\t\t.get_sclk = &btc_dpm_get_sclk,\n\t\t.get_mclk = &btc_dpm_get_mclk,\n\t\t.print_power_state = &rv770_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &btc_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &rv770_dpm_force_performance_level,\n\t\t.vblank_too_short = &btc_dpm_vblank_too_short,\n\t\t.get_current_sclk = &btc_dpm_get_current_sclk,\n\t\t.get_current_mclk = &btc_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring cayman_gfx_ring = {\n\t.ib_execute = &cayman_ring_ib_execute,\n\t.ib_parse = &evergreen_ib_parse,\n\t.emit_fence = &cayman_fence_ring_emit,\n\t.emit_semaphore = &r600_semaphore_ring_emit,\n\t.cs_parse = &evergreen_cs_parse,\n\t.ring_test = &r600_ring_test,\n\t.ib_test = &r600_ib_test,\n\t.is_lockup = &cayman_gfx_is_lockup,\n\t.vm_flush = &cayman_vm_flush,\n\t.get_rptr = &cayman_gfx_get_rptr,\n\t.get_wptr = &cayman_gfx_get_wptr,\n\t.set_wptr = &cayman_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring cayman_dma_ring = {\n\t.ib_execute = &cayman_dma_ring_ib_execute,\n\t.ib_parse = &evergreen_dma_ib_parse,\n\t.emit_fence = &evergreen_dma_fence_ring_emit,\n\t.emit_semaphore = &r600_dma_semaphore_ring_emit,\n\t.cs_parse = &evergreen_dma_cs_parse,\n\t.ring_test = &r600_dma_ring_test,\n\t.ib_test = &r600_dma_ib_test,\n\t.is_lockup = &cayman_dma_is_lockup,\n\t.vm_flush = &cayman_dma_vm_flush,\n\t.get_rptr = &cayman_dma_get_rptr,\n\t.get_wptr = &cayman_dma_get_wptr,\n\t.set_wptr = &cayman_dma_set_wptr\n};\n\nstatic const struct radeon_asic_ring cayman_uvd_ring = {\n\t.ib_execute = &uvd_v1_0_ib_execute,\n\t.emit_fence = &uvd_v2_2_fence_emit,\n\t.emit_semaphore = &uvd_v3_1_semaphore_emit,\n\t.cs_parse = &radeon_uvd_cs_parse,\n\t.ring_test = &uvd_v1_0_ring_test,\n\t.ib_test = &uvd_v1_0_ib_test,\n\t.is_lockup = &radeon_ring_test_lockup,\n\t.get_rptr = &uvd_v1_0_get_rptr,\n\t.get_wptr = &uvd_v1_0_get_wptr,\n\t.set_wptr = &uvd_v1_0_set_wptr,\n};\n\nstatic struct radeon_asic cayman_asic = {\n\t.init = &cayman_init,\n\t.fini = &cayman_fini,\n\t.suspend = &cayman_suspend,\n\t.resume = &cayman_resume,\n\t.asic_reset = &cayman_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &rv770_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = cayman_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &cayman_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.vm = {\n\t\t.init = &cayman_vm_init,\n\t\t.fini = &cayman_vm_fini,\n\t\t.copy_pages = &cayman_dma_vm_copy_pages,\n\t\t.write_pages = &cayman_dma_vm_write_pages,\n\t\t.set_pages = &cayman_dma_vm_set_pages,\n\t\t.pad_ib = &cayman_dma_vm_pad_ib,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &cayman_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP1_INDEX] = &cayman_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP2_INDEX] = &cayman_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &cayman_dma_ring,\n\t\t[CAYMAN_RING_TYPE_DMA1_INDEX] = &cayman_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &cayman_uvd_ring,\n\t},\n\t.irq = {\n\t\t.set = &evergreen_irq_set,\n\t\t.process = &evergreen_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &evergreen_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &evergreen_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &evergreen_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &btc_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &evergreen_set_uvd_clocks,\n\t\t.get_temperature = &evergreen_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &ni_dpm_init,\n\t\t.setup_asic = &ni_dpm_setup_asic,\n\t\t.enable = &ni_dpm_enable,\n\t\t.late_enable = &rv770_dpm_late_enable,\n\t\t.disable = &ni_dpm_disable,\n\t\t.pre_set_power_state = &ni_dpm_pre_set_power_state,\n\t\t.set_power_state = &ni_dpm_set_power_state,\n\t\t.post_set_power_state = &ni_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &cypress_dpm_display_configuration_changed,\n\t\t.fini = &ni_dpm_fini,\n\t\t.get_sclk = &ni_dpm_get_sclk,\n\t\t.get_mclk = &ni_dpm_get_mclk,\n\t\t.print_power_state = &ni_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &ni_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &ni_dpm_force_performance_level,\n\t\t.vblank_too_short = &ni_dpm_vblank_too_short,\n\t\t.get_current_sclk = &ni_dpm_get_current_sclk,\n\t\t.get_current_mclk = &ni_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring trinity_vce_ring = {\n\t.ib_execute = &radeon_vce_ib_execute,\n\t.emit_fence = &radeon_vce_fence_emit,\n\t.emit_semaphore = &radeon_vce_semaphore_emit,\n\t.cs_parse = &radeon_vce_cs_parse,\n\t.ring_test = &radeon_vce_ring_test,\n\t.ib_test = &radeon_vce_ib_test,\n\t.is_lockup = &radeon_ring_test_lockup,\n\t.get_rptr = &vce_v1_0_get_rptr,\n\t.get_wptr = &vce_v1_0_get_wptr,\n\t.set_wptr = &vce_v1_0_set_wptr,\n};\n\nstatic struct radeon_asic trinity_asic = {\n\t.init = &cayman_init,\n\t.fini = &cayman_fini,\n\t.suspend = &cayman_suspend,\n\t.resume = &cayman_resume,\n\t.asic_reset = &cayman_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &r600_get_xclk,\n\t.get_gpu_clock_counter = &r600_get_gpu_clock_counter,\n\t.get_allowed_info_register = cayman_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &cayman_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.vm = {\n\t\t.init = &cayman_vm_init,\n\t\t.fini = &cayman_vm_fini,\n\t\t.copy_pages = &cayman_dma_vm_copy_pages,\n\t\t.write_pages = &cayman_dma_vm_write_pages,\n\t\t.set_pages = &cayman_dma_vm_set_pages,\n\t\t.pad_ib = &cayman_dma_vm_pad_ib,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &cayman_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP1_INDEX] = &cayman_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP2_INDEX] = &cayman_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &cayman_dma_ring,\n\t\t[CAYMAN_RING_TYPE_DMA1_INDEX] = &cayman_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &cayman_uvd_ring,\n\t\t[TN_RING_TYPE_VCE1_INDEX] = &trinity_vce_ring,\n\t\t[TN_RING_TYPE_VCE2_INDEX] = &trinity_vce_ring,\n\t},\n\t.irq = {\n\t\t.set = &evergreen_irq_set,\n\t\t.process = &evergreen_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &dce6_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &evergreen_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &evergreen_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &sumo_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = NULL,\n\t\t.set_memory_clock = NULL,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &sumo_set_uvd_clocks,\n\t\t.set_vce_clocks = &tn_set_vce_clocks,\n\t\t.get_temperature = &tn_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &trinity_dpm_init,\n\t\t.setup_asic = &trinity_dpm_setup_asic,\n\t\t.enable = &trinity_dpm_enable,\n\t\t.late_enable = &trinity_dpm_late_enable,\n\t\t.disable = &trinity_dpm_disable,\n\t\t.pre_set_power_state = &trinity_dpm_pre_set_power_state,\n\t\t.set_power_state = &trinity_dpm_set_power_state,\n\t\t.post_set_power_state = &trinity_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &trinity_dpm_display_configuration_changed,\n\t\t.fini = &trinity_dpm_fini,\n\t\t.get_sclk = &trinity_dpm_get_sclk,\n\t\t.get_mclk = &trinity_dpm_get_mclk,\n\t\t.print_power_state = &trinity_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &trinity_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &trinity_dpm_force_performance_level,\n\t\t.enable_bapm = &trinity_dpm_enable_bapm,\n\t\t.get_current_sclk = &trinity_dpm_get_current_sclk,\n\t\t.get_current_mclk = &trinity_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring si_gfx_ring = {\n\t.ib_execute = &si_ring_ib_execute,\n\t.ib_parse = &si_ib_parse,\n\t.emit_fence = &si_fence_ring_emit,\n\t.emit_semaphore = &r600_semaphore_ring_emit,\n\t.cs_parse = NULL,\n\t.ring_test = &r600_ring_test,\n\t.ib_test = &r600_ib_test,\n\t.is_lockup = &si_gfx_is_lockup,\n\t.vm_flush = &si_vm_flush,\n\t.get_rptr = &cayman_gfx_get_rptr,\n\t.get_wptr = &cayman_gfx_get_wptr,\n\t.set_wptr = &cayman_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring si_dma_ring = {\n\t.ib_execute = &cayman_dma_ring_ib_execute,\n\t.ib_parse = &evergreen_dma_ib_parse,\n\t.emit_fence = &evergreen_dma_fence_ring_emit,\n\t.emit_semaphore = &r600_dma_semaphore_ring_emit,\n\t.cs_parse = NULL,\n\t.ring_test = &r600_dma_ring_test,\n\t.ib_test = &r600_dma_ib_test,\n\t.is_lockup = &si_dma_is_lockup,\n\t.vm_flush = &si_dma_vm_flush,\n\t.get_rptr = &cayman_dma_get_rptr,\n\t.get_wptr = &cayman_dma_get_wptr,\n\t.set_wptr = &cayman_dma_set_wptr,\n};\n\nstatic struct radeon_asic si_asic = {\n\t.init = &si_init,\n\t.fini = &si_fini,\n\t.suspend = &si_suspend,\n\t.resume = &si_resume,\n\t.asic_reset = &si_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &si_get_xclk,\n\t.get_gpu_clock_counter = &si_get_gpu_clock_counter,\n\t.get_allowed_info_register = si_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &si_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.vm = {\n\t\t.init = &si_vm_init,\n\t\t.fini = &si_vm_fini,\n\t\t.copy_pages = &si_dma_vm_copy_pages,\n\t\t.write_pages = &si_dma_vm_write_pages,\n\t\t.set_pages = &si_dma_vm_set_pages,\n\t\t.pad_ib = &cayman_dma_vm_pad_ib,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &si_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP1_INDEX] = &si_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP2_INDEX] = &si_gfx_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &si_dma_ring,\n\t\t[CAYMAN_RING_TYPE_DMA1_INDEX] = &si_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &cayman_uvd_ring,\n\t\t[TN_RING_TYPE_VCE1_INDEX] = &trinity_vce_ring,\n\t\t[TN_RING_TYPE_VCE2_INDEX] = &trinity_vce_ring,\n\t},\n\t.irq = {\n\t\t.set = &si_irq_set,\n\t\t.process = &si_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &dce6_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &r600_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &si_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &si_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &sumo_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = &r600_get_pcie_lanes,\n\t\t.set_pcie_lanes = &r600_set_pcie_lanes,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &si_set_uvd_clocks,\n\t\t.set_vce_clocks = &si_set_vce_clocks,\n\t\t.get_temperature = &si_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &si_dpm_init,\n\t\t.setup_asic = &si_dpm_setup_asic,\n\t\t.enable = &si_dpm_enable,\n\t\t.late_enable = &si_dpm_late_enable,\n\t\t.disable = &si_dpm_disable,\n\t\t.pre_set_power_state = &si_dpm_pre_set_power_state,\n\t\t.set_power_state = &si_dpm_set_power_state,\n\t\t.post_set_power_state = &si_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &si_dpm_display_configuration_changed,\n\t\t.fini = &si_dpm_fini,\n\t\t.get_sclk = &ni_dpm_get_sclk,\n\t\t.get_mclk = &ni_dpm_get_mclk,\n\t\t.print_power_state = &ni_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &si_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &si_dpm_force_performance_level,\n\t\t.vblank_too_short = &ni_dpm_vblank_too_short,\n\t\t.fan_ctrl_set_mode = &si_fan_ctrl_set_mode,\n\t\t.fan_ctrl_get_mode = &si_fan_ctrl_get_mode,\n\t\t.get_fan_speed_percent = &si_fan_ctrl_get_fan_speed_percent,\n\t\t.set_fan_speed_percent = &si_fan_ctrl_set_fan_speed_percent,\n\t\t.get_current_sclk = &si_dpm_get_current_sclk,\n\t\t.get_current_mclk = &si_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic const struct radeon_asic_ring ci_gfx_ring = {\n\t.ib_execute = &cik_ring_ib_execute,\n\t.ib_parse = &cik_ib_parse,\n\t.emit_fence = &cik_fence_gfx_ring_emit,\n\t.emit_semaphore = &cik_semaphore_ring_emit,\n\t.cs_parse = NULL,\n\t.ring_test = &cik_ring_test,\n\t.ib_test = &cik_ib_test,\n\t.is_lockup = &cik_gfx_is_lockup,\n\t.vm_flush = &cik_vm_flush,\n\t.get_rptr = &cik_gfx_get_rptr,\n\t.get_wptr = &cik_gfx_get_wptr,\n\t.set_wptr = &cik_gfx_set_wptr,\n};\n\nstatic const struct radeon_asic_ring ci_cp_ring = {\n\t.ib_execute = &cik_ring_ib_execute,\n\t.ib_parse = &cik_ib_parse,\n\t.emit_fence = &cik_fence_compute_ring_emit,\n\t.emit_semaphore = &cik_semaphore_ring_emit,\n\t.cs_parse = NULL,\n\t.ring_test = &cik_ring_test,\n\t.ib_test = &cik_ib_test,\n\t.is_lockup = &cik_gfx_is_lockup,\n\t.vm_flush = &cik_vm_flush,\n\t.get_rptr = &cik_compute_get_rptr,\n\t.get_wptr = &cik_compute_get_wptr,\n\t.set_wptr = &cik_compute_set_wptr,\n};\n\nstatic const struct radeon_asic_ring ci_dma_ring = {\n\t.ib_execute = &cik_sdma_ring_ib_execute,\n\t.ib_parse = &cik_ib_parse,\n\t.emit_fence = &cik_sdma_fence_ring_emit,\n\t.emit_semaphore = &cik_sdma_semaphore_ring_emit,\n\t.cs_parse = NULL,\n\t.ring_test = &cik_sdma_ring_test,\n\t.ib_test = &cik_sdma_ib_test,\n\t.is_lockup = &cik_sdma_is_lockup,\n\t.vm_flush = &cik_dma_vm_flush,\n\t.get_rptr = &cik_sdma_get_rptr,\n\t.get_wptr = &cik_sdma_get_wptr,\n\t.set_wptr = &cik_sdma_set_wptr,\n};\n\nstatic const struct radeon_asic_ring ci_vce_ring = {\n\t.ib_execute = &radeon_vce_ib_execute,\n\t.emit_fence = &radeon_vce_fence_emit,\n\t.emit_semaphore = &radeon_vce_semaphore_emit,\n\t.cs_parse = &radeon_vce_cs_parse,\n\t.ring_test = &radeon_vce_ring_test,\n\t.ib_test = &radeon_vce_ib_test,\n\t.is_lockup = &radeon_ring_test_lockup,\n\t.get_rptr = &vce_v1_0_get_rptr,\n\t.get_wptr = &vce_v1_0_get_wptr,\n\t.set_wptr = &vce_v1_0_set_wptr,\n};\n\nstatic struct radeon_asic ci_asic = {\n\t.init = &cik_init,\n\t.fini = &cik_fini,\n\t.suspend = &cik_suspend,\n\t.resume = &cik_resume,\n\t.asic_reset = &cik_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = &r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &cik_get_xclk,\n\t.get_gpu_clock_counter = &cik_get_gpu_clock_counter,\n\t.get_allowed_info_register = cik_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &cik_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.vm = {\n\t\t.init = &cik_vm_init,\n\t\t.fini = &cik_vm_fini,\n\t\t.copy_pages = &cik_sdma_vm_copy_pages,\n\t\t.write_pages = &cik_sdma_vm_write_pages,\n\t\t.set_pages = &cik_sdma_vm_set_pages,\n\t\t.pad_ib = &cik_sdma_vm_pad_ib,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &ci_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP1_INDEX] = &ci_cp_ring,\n\t\t[CAYMAN_RING_TYPE_CP2_INDEX] = &ci_cp_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &ci_dma_ring,\n\t\t[CAYMAN_RING_TYPE_DMA1_INDEX] = &ci_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &cayman_uvd_ring,\n\t\t[TN_RING_TYPE_VCE1_INDEX] = &ci_vce_ring,\n\t\t[TN_RING_TYPE_VCE2_INDEX] = &ci_vce_ring,\n\t},\n\t.irq = {\n\t\t.set = &cik_irq_set,\n\t\t.process = &cik_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &dce8_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &cik_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &cik_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &cik_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &sumo_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &cik_set_uvd_clocks,\n\t\t.set_vce_clocks = &cik_set_vce_clocks,\n\t\t.get_temperature = &ci_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &ci_dpm_init,\n\t\t.setup_asic = &ci_dpm_setup_asic,\n\t\t.enable = &ci_dpm_enable,\n\t\t.late_enable = &ci_dpm_late_enable,\n\t\t.disable = &ci_dpm_disable,\n\t\t.pre_set_power_state = &ci_dpm_pre_set_power_state,\n\t\t.set_power_state = &ci_dpm_set_power_state,\n\t\t.post_set_power_state = &ci_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &ci_dpm_display_configuration_changed,\n\t\t.fini = &ci_dpm_fini,\n\t\t.get_sclk = &ci_dpm_get_sclk,\n\t\t.get_mclk = &ci_dpm_get_mclk,\n\t\t.print_power_state = &ci_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &ci_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &ci_dpm_force_performance_level,\n\t\t.vblank_too_short = &ci_dpm_vblank_too_short,\n\t\t.powergate_uvd = &ci_dpm_powergate_uvd,\n\t\t.fan_ctrl_set_mode = &ci_fan_ctrl_set_mode,\n\t\t.fan_ctrl_get_mode = &ci_fan_ctrl_get_mode,\n\t\t.get_fan_speed_percent = &ci_fan_ctrl_get_fan_speed_percent,\n\t\t.set_fan_speed_percent = &ci_fan_ctrl_set_fan_speed_percent,\n\t\t.get_current_sclk = &ci_dpm_get_current_sclk,\n\t\t.get_current_mclk = &ci_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\nstatic struct radeon_asic kv_asic = {\n\t.init = &cik_init,\n\t.fini = &cik_fini,\n\t.suspend = &cik_suspend,\n\t.resume = &cik_resume,\n\t.asic_reset = &cik_asic_reset,\n\t.vga_set_state = &r600_vga_set_state,\n\t.mmio_hdp_flush = &r600_mmio_hdp_flush,\n\t.gui_idle = &r600_gui_idle,\n\t.mc_wait_for_idle = &evergreen_mc_wait_for_idle,\n\t.get_xclk = &cik_get_xclk,\n\t.get_gpu_clock_counter = &cik_get_gpu_clock_counter,\n\t.get_allowed_info_register = cik_get_allowed_info_register,\n\t.gart = {\n\t\t.tlb_flush = &cik_pcie_gart_tlb_flush,\n\t\t.get_page_entry = &rs600_gart_get_page_entry,\n\t\t.set_page = &rs600_gart_set_page,\n\t},\n\t.vm = {\n\t\t.init = &cik_vm_init,\n\t\t.fini = &cik_vm_fini,\n\t\t.copy_pages = &cik_sdma_vm_copy_pages,\n\t\t.write_pages = &cik_sdma_vm_write_pages,\n\t\t.set_pages = &cik_sdma_vm_set_pages,\n\t\t.pad_ib = &cik_sdma_vm_pad_ib,\n\t},\n\t.ring = {\n\t\t[RADEON_RING_TYPE_GFX_INDEX] = &ci_gfx_ring,\n\t\t[CAYMAN_RING_TYPE_CP1_INDEX] = &ci_cp_ring,\n\t\t[CAYMAN_RING_TYPE_CP2_INDEX] = &ci_cp_ring,\n\t\t[R600_RING_TYPE_DMA_INDEX] = &ci_dma_ring,\n\t\t[CAYMAN_RING_TYPE_DMA1_INDEX] = &ci_dma_ring,\n\t\t[R600_RING_TYPE_UVD_INDEX] = &cayman_uvd_ring,\n\t\t[TN_RING_TYPE_VCE1_INDEX] = &ci_vce_ring,\n\t\t[TN_RING_TYPE_VCE2_INDEX] = &ci_vce_ring,\n\t},\n\t.irq = {\n\t\t.set = &cik_irq_set,\n\t\t.process = &cik_irq_process,\n\t},\n\t.display = {\n\t\t.bandwidth_update = &dce8_bandwidth_update,\n\t\t.get_vblank_counter = &evergreen_get_vblank_counter,\n\t\t.wait_for_vblank = &dce4_wait_for_vblank,\n\t\t.set_backlight_level = &atombios_set_backlight_level,\n\t\t.get_backlight_level = &atombios_get_backlight_level,\n\t},\n\t.copy = {\n\t\t.blit = &cik_copy_cpdma,\n\t\t.blit_ring_index = RADEON_RING_TYPE_GFX_INDEX,\n\t\t.dma = &cik_copy_dma,\n\t\t.dma_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t\t.copy = &cik_copy_dma,\n\t\t.copy_ring_index = R600_RING_TYPE_DMA_INDEX,\n\t},\n\t.surface = {\n\t\t.set_reg = r600_set_surface_reg,\n\t\t.clear_reg = r600_clear_surface_reg,\n\t},\n\t.hpd = {\n\t\t.init = &evergreen_hpd_init,\n\t\t.fini = &evergreen_hpd_fini,\n\t\t.sense = &evergreen_hpd_sense,\n\t\t.set_polarity = &evergreen_hpd_set_polarity,\n\t},\n\t.pm = {\n\t\t.misc = &evergreen_pm_misc,\n\t\t.prepare = &evergreen_pm_prepare,\n\t\t.finish = &evergreen_pm_finish,\n\t\t.init_profile = &sumo_pm_init_profile,\n\t\t.get_dynpm_state = &r600_pm_get_dynpm_state,\n\t\t.get_engine_clock = &radeon_atom_get_engine_clock,\n\t\t.set_engine_clock = &radeon_atom_set_engine_clock,\n\t\t.get_memory_clock = &radeon_atom_get_memory_clock,\n\t\t.set_memory_clock = &radeon_atom_set_memory_clock,\n\t\t.get_pcie_lanes = NULL,\n\t\t.set_pcie_lanes = NULL,\n\t\t.set_clock_gating = NULL,\n\t\t.set_uvd_clocks = &cik_set_uvd_clocks,\n\t\t.set_vce_clocks = &cik_set_vce_clocks,\n\t\t.get_temperature = &kv_get_temp,\n\t},\n\t.dpm = {\n\t\t.init = &kv_dpm_init,\n\t\t.setup_asic = &kv_dpm_setup_asic,\n\t\t.enable = &kv_dpm_enable,\n\t\t.late_enable = &kv_dpm_late_enable,\n\t\t.disable = &kv_dpm_disable,\n\t\t.pre_set_power_state = &kv_dpm_pre_set_power_state,\n\t\t.set_power_state = &kv_dpm_set_power_state,\n\t\t.post_set_power_state = &kv_dpm_post_set_power_state,\n\t\t.display_configuration_changed = &kv_dpm_display_configuration_changed,\n\t\t.fini = &kv_dpm_fini,\n\t\t.get_sclk = &kv_dpm_get_sclk,\n\t\t.get_mclk = &kv_dpm_get_mclk,\n\t\t.print_power_state = &kv_dpm_print_power_state,\n\t\t.debugfs_print_current_performance_level = &kv_dpm_debugfs_print_current_performance_level,\n\t\t.force_performance_level = &kv_dpm_force_performance_level,\n\t\t.powergate_uvd = &kv_dpm_powergate_uvd,\n\t\t.enable_bapm = &kv_dpm_enable_bapm,\n\t\t.get_current_sclk = &kv_dpm_get_current_sclk,\n\t\t.get_current_mclk = &kv_dpm_get_current_mclk,\n\t},\n\t.pflip = {\n\t\t.page_flip = &evergreen_page_flip,\n\t\t.page_flip_pending = &evergreen_page_flip_pending,\n\t},\n};\n\n \nint radeon_asic_init(struct radeon_device *rdev)\n{\n\tradeon_register_accessor_init(rdev);\n\n\t \n\tif (rdev->flags & RADEON_SINGLE_CRTC)\n\t\trdev->num_crtc = 1;\n\telse\n\t\trdev->num_crtc = 2;\n\n\trdev->has_uvd = false;\n\trdev->has_vce = false;\n\n\tswitch (rdev->family) {\n\tcase CHIP_R100:\n\tcase CHIP_RV100:\n\tcase CHIP_RS100:\n\tcase CHIP_RV200:\n\tcase CHIP_RS200:\n\t\trdev->asic = &r100_asic;\n\t\tbreak;\n\tcase CHIP_R200:\n\tcase CHIP_RV250:\n\tcase CHIP_RS300:\n\tcase CHIP_RV280:\n\t\trdev->asic = &r200_asic;\n\t\tbreak;\n\tcase CHIP_R300:\n\tcase CHIP_R350:\n\tcase CHIP_RV350:\n\tcase CHIP_RV380:\n\t\tif (rdev->flags & RADEON_IS_PCIE)\n\t\t\trdev->asic = &r300_asic_pcie;\n\t\telse\n\t\t\trdev->asic = &r300_asic;\n\t\tbreak;\n\tcase CHIP_R420:\n\tcase CHIP_R423:\n\tcase CHIP_RV410:\n\t\trdev->asic = &r420_asic;\n\t\t \n\t\tif (rdev->bios == NULL) {\n\t\t\trdev->asic->pm.get_engine_clock = &radeon_legacy_get_engine_clock;\n\t\t\trdev->asic->pm.set_engine_clock = &radeon_legacy_set_engine_clock;\n\t\t\trdev->asic->pm.get_memory_clock = &radeon_legacy_get_memory_clock;\n\t\t\trdev->asic->pm.set_memory_clock = NULL;\n\t\t\trdev->asic->display.set_backlight_level = &radeon_legacy_set_backlight_level;\n\t\t}\n\t\tbreak;\n\tcase CHIP_RS400:\n\tcase CHIP_RS480:\n\t\trdev->asic = &rs400_asic;\n\t\tbreak;\n\tcase CHIP_RS600:\n\t\trdev->asic = &rs600_asic;\n\t\tbreak;\n\tcase CHIP_RS690:\n\tcase CHIP_RS740:\n\t\trdev->asic = &rs690_asic;\n\t\tbreak;\n\tcase CHIP_RV515:\n\t\trdev->asic = &rv515_asic;\n\t\tbreak;\n\tcase CHIP_R520:\n\tcase CHIP_RV530:\n\tcase CHIP_RV560:\n\tcase CHIP_RV570:\n\tcase CHIP_R580:\n\t\trdev->asic = &r520_asic;\n\t\tbreak;\n\tcase CHIP_R600:\n\t\trdev->asic = &r600_asic;\n\t\tbreak;\n\tcase CHIP_RV610:\n\tcase CHIP_RV630:\n\tcase CHIP_RV620:\n\tcase CHIP_RV635:\n\tcase CHIP_RV670:\n\t\trdev->asic = &rv6xx_asic;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_RS780:\n\tcase CHIP_RS880:\n\t\trdev->asic = &rs780_asic;\n\t\t \n\t\tif ((rdev->pdev->device == 0x9616)||\n\t\t    (rdev->pdev->device == 0x9611)||\n\t\t    (rdev->pdev->device == 0x9613)||\n\t\t    (rdev->pdev->device == 0x9711)||\n\t\t    (rdev->pdev->device == 0x9713))\n\t\t\trdev->has_uvd = false;\n\t\telse\n\t\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_RV770:\n\tcase CHIP_RV730:\n\tcase CHIP_RV710:\n\tcase CHIP_RV740:\n\t\trdev->asic = &rv770_asic;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_CEDAR:\n\tcase CHIP_REDWOOD:\n\tcase CHIP_JUNIPER:\n\tcase CHIP_CYPRESS:\n\tcase CHIP_HEMLOCK:\n\t\t \n\t\tif (rdev->family == CHIP_CEDAR)\n\t\t\trdev->num_crtc = 4;\n\t\telse\n\t\t\trdev->num_crtc = 6;\n\t\trdev->asic = &evergreen_asic;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_PALM:\n\tcase CHIP_SUMO:\n\tcase CHIP_SUMO2:\n\t\trdev->asic = &sumo_asic;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_BARTS:\n\tcase CHIP_TURKS:\n\tcase CHIP_CAICOS:\n\t\t \n\t\tif (rdev->family == CHIP_CAICOS)\n\t\t\trdev->num_crtc = 4;\n\t\telse\n\t\t\trdev->num_crtc = 6;\n\t\trdev->asic = &btc_asic;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_CAYMAN:\n\t\trdev->asic = &cayman_asic;\n\t\t \n\t\trdev->num_crtc = 6;\n\t\trdev->has_uvd = true;\n\t\tbreak;\n\tcase CHIP_ARUBA:\n\t\trdev->asic = &trinity_asic;\n\t\t \n\t\trdev->num_crtc = 4;\n\t\trdev->has_uvd = true;\n\t\trdev->has_vce = true;\n\t\trdev->cg_flags =\n\t\t\tRADEON_CG_SUPPORT_VCE_MGCG;\n\t\tbreak;\n\tcase CHIP_TAHITI:\n\tcase CHIP_PITCAIRN:\n\tcase CHIP_VERDE:\n\tcase CHIP_OLAND:\n\tcase CHIP_HAINAN:\n\t\trdev->asic = &si_asic;\n\t\t \n\t\tif (rdev->family == CHIP_HAINAN)\n\t\t\trdev->num_crtc = 0;\n\t\telse if (rdev->family == CHIP_OLAND)\n\t\t\trdev->num_crtc = 2;\n\t\telse\n\t\t\trdev->num_crtc = 6;\n\t\tif (rdev->family == CHIP_HAINAN) {\n\t\t\trdev->has_uvd = false;\n\t\t\trdev->has_vce = false;\n\t\t} else if (rdev->family == CHIP_OLAND) {\n\t\t\trdev->has_uvd = true;\n\t\t\trdev->has_vce = false;\n\t\t} else {\n\t\t\trdev->has_uvd = true;\n\t\t\trdev->has_vce = true;\n\t\t}\n\t\tswitch (rdev->family) {\n\t\tcase CHIP_TAHITI:\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\tbreak;\n\t\tcase CHIP_PITCAIRN:\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_RLC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\tbreak;\n\t\tcase CHIP_VERDE:\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_RLC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0 |\n\t\t\t\t \n\t\t\t\tRADEON_PG_SUPPORT_SDMA;\n\t\t\tbreak;\n\t\tcase CHIP_OLAND:\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_RLC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\tbreak;\n\t\tcase CHIP_HAINAN:\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_RLC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\trdev->cg_flags = 0;\n\t\t\trdev->pg_flags = 0;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase CHIP_BONAIRE:\n\tcase CHIP_HAWAII:\n\t\trdev->asic = &ci_asic;\n\t\trdev->num_crtc = 6;\n\t\trdev->has_uvd = true;\n\t\trdev->has_vce = true;\n\t\tif (rdev->family == CHIP_BONAIRE) {\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_LS |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t} else {\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_LS |\n\t\t\t\tRADEON_CG_SUPPORT_MC_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_LS |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t}\n\t\tbreak;\n\tcase CHIP_KAVERI:\n\tcase CHIP_KABINI:\n\tcase CHIP_MULLINS:\n\t\trdev->asic = &kv_asic;\n\t\t \n\t\tif (rdev->family == CHIP_KAVERI) {\n\t\t\trdev->num_crtc = 4;\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_LS |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\t\t \n\t\t} else {\n\t\t\trdev->num_crtc = 2;\n\t\t\trdev->cg_flags =\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_MGLS |\n\t\t\t\t \n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGLS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CGTS_LS |\n\t\t\t\tRADEON_CG_SUPPORT_GFX_CP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_SDMA_LS |\n\t\t\t\tRADEON_CG_SUPPORT_BIF_LS |\n\t\t\t\tRADEON_CG_SUPPORT_VCE_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_UVD_MGCG |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_LS |\n\t\t\t\tRADEON_CG_SUPPORT_HDP_MGCG;\n\t\t\trdev->pg_flags = 0;\n\t\t\t\t \n\t\t}\n\t\trdev->has_uvd = true;\n\t\trdev->has_vce = true;\n\t\tbreak;\n\tdefault:\n\t\t \n\t\treturn -EINVAL;\n\t}\n\n\tif (rdev->flags & RADEON_IS_IGP) {\n\t\trdev->asic->pm.get_memory_clock = NULL;\n\t\trdev->asic->pm.set_memory_clock = NULL;\n\t}\n\n\tif (!radeon_uvd)\n\t\trdev->has_uvd = false;\n\tif (!radeon_vce)\n\t\trdev->has_vce = false;\n\n\treturn 0;\n}\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}