{
  "module_name": "rv770_smc.h",
  "hash_id": "6982911982ae2270b90108ffd3ae71dbcc042b8e75998f89376b7e6a481299ac",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/rv770_smc.h",
  "human_readable_source": " \n#ifndef __RV770_SMC_H__\n#define __RV770_SMC_H__\n\n#include \"ppsmc.h\"\n\n#pragma pack(push, 1)\n\n#define RV770_SMC_TABLE_ADDRESS 0xB000\n\n#define RV770_SMC_PERFORMANCE_LEVELS_PER_SWSTATE    3\n\nstruct RV770_SMC_SCLK_VALUE\n{\n    uint32_t        vCG_SPLL_FUNC_CNTL;\n    uint32_t        vCG_SPLL_FUNC_CNTL_2;\n    uint32_t        vCG_SPLL_FUNC_CNTL_3;\n    uint32_t        vCG_SPLL_SPREAD_SPECTRUM;\n    uint32_t        vCG_SPLL_SPREAD_SPECTRUM_2;\n    uint32_t        sclk_value;\n};\n\ntypedef struct RV770_SMC_SCLK_VALUE RV770_SMC_SCLK_VALUE;\n\nstruct RV770_SMC_MCLK_VALUE\n{\n    uint32_t        vMPLL_AD_FUNC_CNTL;\n    uint32_t        vMPLL_AD_FUNC_CNTL_2;\n    uint32_t        vMPLL_DQ_FUNC_CNTL;\n    uint32_t        vMPLL_DQ_FUNC_CNTL_2;\n    uint32_t        vMCLK_PWRMGT_CNTL;\n    uint32_t        vDLL_CNTL;\n    uint32_t        vMPLL_SS;\n    uint32_t        vMPLL_SS2;\n    uint32_t        mclk_value;\n};\n\ntypedef struct RV770_SMC_MCLK_VALUE RV770_SMC_MCLK_VALUE;\n\n\nstruct RV730_SMC_MCLK_VALUE\n{\n    uint32_t        vMCLK_PWRMGT_CNTL;\n    uint32_t        vDLL_CNTL;\n    uint32_t        vMPLL_FUNC_CNTL;\n    uint32_t        vMPLL_FUNC_CNTL2;\n    uint32_t        vMPLL_FUNC_CNTL3;\n    uint32_t        vMPLL_SS;\n    uint32_t        vMPLL_SS2;\n    uint32_t        mclk_value;\n};\n\ntypedef struct RV730_SMC_MCLK_VALUE RV730_SMC_MCLK_VALUE;\n\nstruct RV770_SMC_VOLTAGE_VALUE\n{\n    uint16_t             value;\n    uint8_t              index;\n    uint8_t              padding;\n};\n\ntypedef struct RV770_SMC_VOLTAGE_VALUE RV770_SMC_VOLTAGE_VALUE;\n\nunion RV7XX_SMC_MCLK_VALUE\n{\n    RV770_SMC_MCLK_VALUE    mclk770;\n    RV730_SMC_MCLK_VALUE    mclk730;\n};\n\ntypedef union RV7XX_SMC_MCLK_VALUE RV7XX_SMC_MCLK_VALUE, *LPRV7XX_SMC_MCLK_VALUE;\n\nstruct RV770_SMC_HW_PERFORMANCE_LEVEL\n{\n    uint8_t                 arbValue;\n    union{\n        uint8_t             seqValue;\n        uint8_t             ACIndex;\n    };\n    uint8_t                 displayWatermark;\n    uint8_t                 gen2PCIE;\n    uint8_t                 gen2XSP;\n    uint8_t                 backbias;\n    uint8_t                 strobeMode;\n    uint8_t                 mcFlags;\n    uint32_t                aT;\n    uint32_t                bSP;\n    RV770_SMC_SCLK_VALUE    sclk;\n    RV7XX_SMC_MCLK_VALUE    mclk;\n    RV770_SMC_VOLTAGE_VALUE vddc;\n    RV770_SMC_VOLTAGE_VALUE mvdd;\n    RV770_SMC_VOLTAGE_VALUE vddci;\n    uint8_t                 reserved1;\n    uint8_t                 reserved2;\n    uint8_t                 stateFlags;\n    uint8_t                 padding;\n};\n\n#define SMC_STROBE_RATIO    0x0F\n#define SMC_STROBE_ENABLE   0x10\n\n#define SMC_MC_EDC_RD_FLAG  0x01\n#define SMC_MC_EDC_WR_FLAG  0x02\n#define SMC_MC_RTT_ENABLE   0x04\n#define SMC_MC_STUTTER_EN   0x08\n\ntypedef struct RV770_SMC_HW_PERFORMANCE_LEVEL RV770_SMC_HW_PERFORMANCE_LEVEL;\n\nstruct RV770_SMC_SWSTATE\n{\n    uint8_t           flags;\n    uint8_t           padding1;\n    uint8_t           padding2;\n    uint8_t           padding3;\n    RV770_SMC_HW_PERFORMANCE_LEVEL levels[RV770_SMC_PERFORMANCE_LEVELS_PER_SWSTATE];\n};\n\ntypedef struct RV770_SMC_SWSTATE RV770_SMC_SWSTATE;\n\n#define RV770_SMC_VOLTAGEMASK_VDDC 0\n#define RV770_SMC_VOLTAGEMASK_MVDD 1\n#define RV770_SMC_VOLTAGEMASK_VDDCI 2\n#define RV770_SMC_VOLTAGEMASK_MAX  4\n\nstruct RV770_SMC_VOLTAGEMASKTABLE\n{\n    uint8_t  highMask[RV770_SMC_VOLTAGEMASK_MAX];\n    uint32_t lowMask[RV770_SMC_VOLTAGEMASK_MAX];\n};\n\ntypedef struct RV770_SMC_VOLTAGEMASKTABLE RV770_SMC_VOLTAGEMASKTABLE;\n\n#define MAX_NO_VREG_STEPS 32\n\nstruct RV770_SMC_STATETABLE\n{\n    uint8_t             thermalProtectType;\n    uint8_t             systemFlags;\n    uint8_t             maxVDDCIndexInPPTable;\n    uint8_t             extraFlags;\n    uint8_t             highSMIO[MAX_NO_VREG_STEPS];\n    uint32_t            lowSMIO[MAX_NO_VREG_STEPS];\n    RV770_SMC_VOLTAGEMASKTABLE voltageMaskTable;\n    RV770_SMC_SWSTATE   initialState;\n    RV770_SMC_SWSTATE   ACPIState;\n    RV770_SMC_SWSTATE   driverState;\n    RV770_SMC_SWSTATE   ULVState;\n};\n\ntypedef struct RV770_SMC_STATETABLE RV770_SMC_STATETABLE;\n\n#define PPSMC_STATEFLAG_AUTO_PULSE_SKIP 0x01\n\n#pragma pack(pop)\n\n#define RV770_SMC_SOFT_REGISTERS_START        0x104\n\n#define RV770_SMC_SOFT_REGISTER_mclk_chg_timeout        0x0\n#define RV770_SMC_SOFT_REGISTER_baby_step_timer         0x8\n#define RV770_SMC_SOFT_REGISTER_delay_bbias             0xC\n#define RV770_SMC_SOFT_REGISTER_delay_vreg              0x10\n#define RV770_SMC_SOFT_REGISTER_delay_acpi              0x2C\n#define RV770_SMC_SOFT_REGISTER_seq_index               0x64\n#define RV770_SMC_SOFT_REGISTER_mvdd_chg_time           0x68\n#define RV770_SMC_SOFT_REGISTER_mclk_switch_lim         0x78\n#define RV770_SMC_SOFT_REGISTER_mc_block_delay          0x90\n#define RV770_SMC_SOFT_REGISTER_uvd_enabled             0x9C\n#define RV770_SMC_SOFT_REGISTER_is_asic_lombok          0xA0\n\nint rv770_copy_bytes_to_smc(struct radeon_device *rdev,\n\t\t\t    u16 smc_start_address, const u8 *src,\n\t\t\t    u16 byte_count, u16 limit);\nvoid rv770_start_smc(struct radeon_device *rdev);\nvoid rv770_reset_smc(struct radeon_device *rdev);\nvoid rv770_stop_smc_clock(struct radeon_device *rdev);\nvoid rv770_start_smc_clock(struct radeon_device *rdev);\nbool rv770_is_smc_running(struct radeon_device *rdev);\nPPSMC_Result rv770_send_msg_to_smc(struct radeon_device *rdev, PPSMC_Msg msg);\nPPSMC_Result rv770_wait_for_smc_inactive(struct radeon_device *rdev);\nint rv770_read_smc_sram_dword(struct radeon_device *rdev,\n\t\t\t      u16 smc_address, u32 *value, u16 limit);\nint rv770_write_smc_sram_dword(struct radeon_device *rdev,\n\t\t\t       u16 smc_address, u32 value, u16 limit);\nint rv770_load_smc_ucode(struct radeon_device *rdev,\n\t\t\t u16 limit);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}