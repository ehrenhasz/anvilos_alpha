{
  "module_name": "si_dpm.h",
  "hash_id": "5d6e0fd77854d1aee9fafce599c1cdaed1730a9716bf2d0f83107fc66bba75c4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/si_dpm.h",
  "human_readable_source": " \n#ifndef __SI_DPM_H__\n#define __SI_DPM_H__\n\n#include \"ni_dpm.h\"\n#include \"sislands_smc.h\"\n\nenum si_cac_config_reg_type\n{\n\tSISLANDS_CACCONFIG_MMR = 0,\n\tSISLANDS_CACCONFIG_CGIND,\n\tSISLANDS_CACCONFIG_MAX\n};\n\nstruct si_cac_config_reg\n{\n\tu32 offset;\n\tu32 mask;\n\tu32 shift;\n\tu32 value;\n\tenum si_cac_config_reg_type type;\n};\n\nstruct si_powertune_data\n{\n\tu32 cac_window;\n\tu32 l2_lta_window_size_default;\n\tu8 lts_truncate_default;\n\tu8 shift_n_default;\n\tu8 operating_temp;\n\tstruct ni_leakage_coeffients leakage_coefficients;\n\tu32 fixed_kt;\n\tu32 lkge_lut_v0_percent;\n\tu8 dc_cac[NISLANDS_DCCAC_MAX_LEVELS];\n\tbool enable_powertune_by_default;\n};\n\nstruct si_dyn_powertune_data\n{\n\tu32 cac_leakage;\n\ts32 leakage_minimum_temperature;\n\tu32 wintime;\n\tu32 l2_lta_window_size;\n\tu8 lts_truncate;\n\tu8 shift_n;\n\tu8 dc_pwr_value;\n\tbool disable_uvd_powertune;\n};\n\nstruct si_dte_data\n{\n\tu32 tau[SMC_SISLANDS_DTE_MAX_FILTER_STAGES];\n\tu32 r[SMC_SISLANDS_DTE_MAX_FILTER_STAGES];\n\tu32 k;\n\tu32 t0;\n\tu32 max_t;\n\tu8 window_size;\n\tu8 temp_select;\n\tu8 dte_mode;\n\tu8 tdep_count;\n\tu8 t_limits[SMC_SISLANDS_DTE_MAX_TEMPERATURE_DEPENDENT_ARRAY_SIZE];\n\tu32 tdep_tau[SMC_SISLANDS_DTE_MAX_TEMPERATURE_DEPENDENT_ARRAY_SIZE];\n\tu32 tdep_r[SMC_SISLANDS_DTE_MAX_TEMPERATURE_DEPENDENT_ARRAY_SIZE];\n\tu32 t_threshold;\n\tbool enable_dte_by_default;\n};\n\nstruct si_clock_registers {\n\tu32 cg_spll_func_cntl;\n\tu32 cg_spll_func_cntl_2;\n\tu32 cg_spll_func_cntl_3;\n\tu32 cg_spll_func_cntl_4;\n\tu32 cg_spll_spread_spectrum;\n\tu32 cg_spll_spread_spectrum_2;\n\tu32 dll_cntl;\n\tu32 mclk_pwrmgt_cntl;\n\tu32 mpll_ad_func_cntl;\n\tu32 mpll_dq_func_cntl;\n\tu32 mpll_func_cntl;\n\tu32 mpll_func_cntl_1;\n\tu32 mpll_func_cntl_2;\n\tu32 mpll_ss1;\n\tu32 mpll_ss2;\n};\n\nstruct si_mc_reg_entry {\n\tu32 mclk_max;\n\tu32 mc_data[SMC_SISLANDS_MC_REGISTER_ARRAY_SIZE];\n};\n\nstruct si_mc_reg_table {\n\tu8 last;\n\tu8 num_entries;\n\tu16 valid_flag;\n\tstruct si_mc_reg_entry mc_reg_table_entry[MAX_AC_TIMING_ENTRIES];\n\tSMC_NIslands_MCRegisterAddress mc_reg_address[SMC_SISLANDS_MC_REGISTER_ARRAY_SIZE];\n};\n\n#define SISLANDS_MCREGISTERTABLE_INITIAL_SLOT               0\n#define SISLANDS_MCREGISTERTABLE_ACPI_SLOT                  1\n#define SISLANDS_MCREGISTERTABLE_ULV_SLOT                   2\n#define SISLANDS_MCREGISTERTABLE_FIRST_DRIVERSTATE_SLOT     3\n\nstruct si_leakage_voltage_entry\n{\n\tu16 voltage;\n\tu16 leakage_index;\n};\n\n#define SISLANDS_LEAKAGE_INDEX0     0xff01\n#define SISLANDS_MAX_LEAKAGE_COUNT  4\n\nstruct si_leakage_voltage\n{\n\tu16 count;\n\tstruct si_leakage_voltage_entry entries[SISLANDS_MAX_LEAKAGE_COUNT];\n};\n\n#define SISLANDS_MAX_HARDWARE_POWERLEVELS 5\n\nstruct si_ulv_param {\n\tbool supported;\n\tu32 cg_ulv_control;\n\tu32 cg_ulv_parameter;\n\tu32 volt_change_delay;\n\tstruct rv7xx_pl pl;\n\tbool one_pcie_lane_in_ulv;\n};\n\nstruct si_power_info {\n\t \n\tstruct ni_power_info ni;\n\tstruct si_clock_registers clock_registers;\n\tstruct si_mc_reg_table mc_reg_table;\n\tstruct atom_voltage_table mvdd_voltage_table;\n\tstruct atom_voltage_table vddc_phase_shed_table;\n\tstruct si_leakage_voltage leakage_voltage;\n\tu16 mvdd_bootup_value;\n\tstruct si_ulv_param ulv;\n\tu32 max_cu;\n\t \n\tenum radeon_pcie_gen force_pcie_gen;\n\tenum radeon_pcie_gen boot_pcie_gen;\n\tenum radeon_pcie_gen acpi_pcie_gen;\n\tu32 sys_pcie_mask;\n\t \n\tbool enable_dte;\n\tbool enable_ppm;\n\tbool vddc_phase_shed_control;\n\tbool pspp_notify_required;\n\tbool sclk_deep_sleep_above_low;\n\tbool voltage_control_svi2;\n\tbool vddci_control_svi2;\n\t \n\tu32 sram_end;\n\tu32 state_table_start;\n\tu32 soft_regs_start;\n\tu32 mc_reg_table_start;\n\tu32 arb_table_start;\n\tu32 cac_table_start;\n\tu32 dte_table_start;\n\tu32 spll_table_start;\n\tu32 papm_cfg_table_start;\n\tu32 fan_table_start;\n\t \n\tconst struct si_cac_config_reg *cac_weights;\n\tconst struct si_cac_config_reg *lcac_config;\n\tconst struct si_cac_config_reg *cac_override;\n\tconst struct si_powertune_data *powertune_data;\n\tstruct si_dyn_powertune_data dyn_powertune_data;\n\t \n\tstruct si_dte_data dte_data;\n\t \n\tSMC_SIslands_MCRegisters smc_mc_reg_table;\n\tSISLANDS_SMC_STATETABLE smc_statetable;\n\tPP_SIslands_PAPMParameters papm_parm;\n\t \n\tu8 svd_gpio_id;\n\tu8 svc_gpio_id;\n\t \n\tbool fan_ctrl_is_in_default_mode;\n\tu32 t_min;\n\tu32 fan_ctrl_default_mode;\n\tbool fan_is_controlled_by_smc;\n};\n\n#define SISLANDS_INITIAL_STATE_ARB_INDEX    0\n#define SISLANDS_ACPI_STATE_ARB_INDEX       1\n#define SISLANDS_ULV_STATE_ARB_INDEX        2\n#define SISLANDS_DRIVER_STATE_ARB_INDEX     3\n\n#define SISLANDS_DPM2_MAX_PULSE_SKIP        256\n\n#define SISLANDS_DPM2_NEAR_TDP_DEC          10\n#define SISLANDS_DPM2_ABOVE_SAFE_INC        5\n#define SISLANDS_DPM2_BELOW_SAFE_INC        20\n\n#define SISLANDS_DPM2_TDP_SAFE_LIMIT_PERCENT            80\n\n#define SISLANDS_DPM2_MAXPS_PERCENT_H                   99\n#define SISLANDS_DPM2_MAXPS_PERCENT_M                   99\n\n#define SISLANDS_DPM2_SQ_RAMP_MAX_POWER                 0x3FFF\n#define SISLANDS_DPM2_SQ_RAMP_MIN_POWER                 0x12\n#define SISLANDS_DPM2_SQ_RAMP_MAX_POWER_DELTA           0x15\n#define SISLANDS_DPM2_SQ_RAMP_STI_SIZE                  0x1E\n#define SISLANDS_DPM2_SQ_RAMP_LTI_RATIO                 0xF\n\n#define SISLANDS_DPM2_PWREFFICIENCYRATIO_MARGIN         10\n\n#define SISLANDS_VRC_DFLT                               0xC000B3\n#define SISLANDS_ULVVOLTAGECHANGEDELAY_DFLT             1687\n#define SISLANDS_CGULVPARAMETER_DFLT                    0x00040035\n#define SISLANDS_CGULVCONTROL_DFLT                      0x1f007550\n\nu8 si_get_ddr3_mclk_frequency_ratio(u32 memory_clock);\nu8 si_get_mclk_frequency_ratio(u32 memory_clock, bool strobe_mode);\nvoid si_trim_voltage_table_to_fit_state_table(struct radeon_device *rdev,\n\t\t\t\t\t      u32 max_voltage_steps,\n\t\t\t\t\t      struct atom_voltage_table *voltage_table);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}