{
  "module_name": "radeon_ucode.c",
  "hash_id": "1b4b5f98adba58b5a70680b2d850bc6202cace4af3c9538c6546c17e5d48fb29",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/radeon_ucode.c",
  "human_readable_source": " \n\n#include <linux/firmware.h>\n#include <linux/slab.h>\n#include <linux/module.h>\n\n#include \"radeon.h\"\n#include \"radeon_ucode.h\"\n\nstatic void radeon_ucode_print_common_hdr(const struct common_firmware_header *hdr)\n{\n\tDRM_DEBUG(\"size_bytes: %u\\n\", le32_to_cpu(hdr->size_bytes));\n\tDRM_DEBUG(\"header_size_bytes: %u\\n\", le32_to_cpu(hdr->header_size_bytes));\n\tDRM_DEBUG(\"header_version_major: %u\\n\", le16_to_cpu(hdr->header_version_major));\n\tDRM_DEBUG(\"header_version_minor: %u\\n\", le16_to_cpu(hdr->header_version_minor));\n\tDRM_DEBUG(\"ip_version_major: %u\\n\", le16_to_cpu(hdr->ip_version_major));\n\tDRM_DEBUG(\"ip_version_minor: %u\\n\", le16_to_cpu(hdr->ip_version_minor));\n\tDRM_DEBUG(\"ucode_version: 0x%08x\\n\", le32_to_cpu(hdr->ucode_version));\n\tDRM_DEBUG(\"ucode_size_bytes: %u\\n\", le32_to_cpu(hdr->ucode_size_bytes));\n\tDRM_DEBUG(\"ucode_array_offset_bytes: %u\\n\",\n\t\t  le32_to_cpu(hdr->ucode_array_offset_bytes));\n\tDRM_DEBUG(\"crc32: 0x%08x\\n\", le32_to_cpu(hdr->crc32));\n}\n\nvoid radeon_ucode_print_mc_hdr(const struct common_firmware_header *hdr)\n{\n\tuint16_t version_major = le16_to_cpu(hdr->header_version_major);\n\tuint16_t version_minor = le16_to_cpu(hdr->header_version_minor);\n\n\tDRM_DEBUG(\"MC\\n\");\n\tradeon_ucode_print_common_hdr(hdr);\n\n\tif (version_major == 1) {\n\t\tconst struct mc_firmware_header_v1_0 *mc_hdr =\n\t\t\tcontainer_of(hdr, struct mc_firmware_header_v1_0, header);\n\n\t\tDRM_DEBUG(\"io_debug_size_bytes: %u\\n\",\n\t\t\t  le32_to_cpu(mc_hdr->io_debug_size_bytes));\n\t\tDRM_DEBUG(\"io_debug_array_offset_bytes: %u\\n\",\n\t\t\t  le32_to_cpu(mc_hdr->io_debug_array_offset_bytes));\n\t} else {\n\t\tDRM_ERROR(\"Unknown MC ucode version: %u.%u\\n\", version_major, version_minor);\n\t}\n}\n\nvoid radeon_ucode_print_smc_hdr(const struct common_firmware_header *hdr)\n{\n\tuint16_t version_major = le16_to_cpu(hdr->header_version_major);\n\tuint16_t version_minor = le16_to_cpu(hdr->header_version_minor);\n\n\tDRM_DEBUG(\"SMC\\n\");\n\tradeon_ucode_print_common_hdr(hdr);\n\n\tif (version_major == 1) {\n\t\tconst struct smc_firmware_header_v1_0 *smc_hdr =\n\t\t\tcontainer_of(hdr, struct smc_firmware_header_v1_0, header);\n\n\t\tDRM_DEBUG(\"ucode_start_addr: %u\\n\", le32_to_cpu(smc_hdr->ucode_start_addr));\n\t} else {\n\t\tDRM_ERROR(\"Unknown SMC ucode version: %u.%u\\n\", version_major, version_minor);\n\t}\n}\n\nvoid radeon_ucode_print_gfx_hdr(const struct common_firmware_header *hdr)\n{\n\tuint16_t version_major = le16_to_cpu(hdr->header_version_major);\n\tuint16_t version_minor = le16_to_cpu(hdr->header_version_minor);\n\n\tDRM_DEBUG(\"GFX\\n\");\n\tradeon_ucode_print_common_hdr(hdr);\n\n\tif (version_major == 1) {\n\t\tconst struct gfx_firmware_header_v1_0 *gfx_hdr =\n\t\t\tcontainer_of(hdr, struct gfx_firmware_header_v1_0, header);\n\n\t\tDRM_DEBUG(\"ucode_feature_version: %u\\n\",\n\t\t\t  le32_to_cpu(gfx_hdr->ucode_feature_version));\n\t\tDRM_DEBUG(\"jt_offset: %u\\n\", le32_to_cpu(gfx_hdr->jt_offset));\n\t\tDRM_DEBUG(\"jt_size: %u\\n\", le32_to_cpu(gfx_hdr->jt_size));\n\t} else {\n\t\tDRM_ERROR(\"Unknown GFX ucode version: %u.%u\\n\", version_major, version_minor);\n\t}\n}\n\nvoid radeon_ucode_print_rlc_hdr(const struct common_firmware_header *hdr)\n{\n\tuint16_t version_major = le16_to_cpu(hdr->header_version_major);\n\tuint16_t version_minor = le16_to_cpu(hdr->header_version_minor);\n\n\tDRM_DEBUG(\"RLC\\n\");\n\tradeon_ucode_print_common_hdr(hdr);\n\n\tif (version_major == 1) {\n\t\tconst struct rlc_firmware_header_v1_0 *rlc_hdr =\n\t\t\tcontainer_of(hdr, struct rlc_firmware_header_v1_0, header);\n\n\t\tDRM_DEBUG(\"ucode_feature_version: %u\\n\",\n\t\t\t  le32_to_cpu(rlc_hdr->ucode_feature_version));\n\t\tDRM_DEBUG(\"save_and_restore_offset: %u\\n\",\n\t\t\t  le32_to_cpu(rlc_hdr->save_and_restore_offset));\n\t\tDRM_DEBUG(\"clear_state_descriptor_offset: %u\\n\",\n\t\t\t  le32_to_cpu(rlc_hdr->clear_state_descriptor_offset));\n\t\tDRM_DEBUG(\"avail_scratch_ram_locations: %u\\n\",\n\t\t\t  le32_to_cpu(rlc_hdr->avail_scratch_ram_locations));\n\t\tDRM_DEBUG(\"master_pkt_description_offset: %u\\n\",\n\t\t\t  le32_to_cpu(rlc_hdr->master_pkt_description_offset));\n\t} else {\n\t\tDRM_ERROR(\"Unknown RLC ucode version: %u.%u\\n\", version_major, version_minor);\n\t}\n}\n\nvoid radeon_ucode_print_sdma_hdr(const struct common_firmware_header *hdr)\n{\n\tuint16_t version_major = le16_to_cpu(hdr->header_version_major);\n\tuint16_t version_minor = le16_to_cpu(hdr->header_version_minor);\n\n\tDRM_DEBUG(\"SDMA\\n\");\n\tradeon_ucode_print_common_hdr(hdr);\n\n\tif (version_major == 1) {\n\t\tconst struct sdma_firmware_header_v1_0 *sdma_hdr =\n\t\t\tcontainer_of(hdr, struct sdma_firmware_header_v1_0, header);\n\n\t\tDRM_DEBUG(\"ucode_feature_version: %u\\n\",\n\t\t\t  le32_to_cpu(sdma_hdr->ucode_feature_version));\n\t\tDRM_DEBUG(\"ucode_change_version: %u\\n\",\n\t\t\t  le32_to_cpu(sdma_hdr->ucode_change_version));\n\t\tDRM_DEBUG(\"jt_offset: %u\\n\", le32_to_cpu(sdma_hdr->jt_offset));\n\t\tDRM_DEBUG(\"jt_size: %u\\n\", le32_to_cpu(sdma_hdr->jt_size));\n\t} else {\n\t\tDRM_ERROR(\"Unknown SDMA ucode version: %u.%u\\n\",\n\t\t\t  version_major, version_minor);\n\t}\n}\n\nint radeon_ucode_validate(const struct firmware *fw)\n{\n\tconst struct common_firmware_header *hdr =\n\t\t(const struct common_firmware_header *)fw->data;\n\n\tif (fw->size == le32_to_cpu(hdr->size_bytes))\n\t\treturn 0;\n\n\treturn -EINVAL;\n}\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}