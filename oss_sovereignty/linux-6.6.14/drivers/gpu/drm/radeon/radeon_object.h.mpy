{
  "module_name": "radeon_object.h",
  "hash_id": "6d3bc8e7b3f589a66a4cbfa4f2a91b09867a96acdba92bd982719fe52ad98c49",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/radeon_object.h",
  "human_readable_source": " \n#ifndef __RADEON_OBJECT_H__\n#define __RADEON_OBJECT_H__\n\n#include <drm/radeon_drm.h>\n#include \"radeon.h\"\n\n \nstatic inline unsigned radeon_mem_type_to_domain(u32 mem_type)\n{\n\tswitch (mem_type) {\n\tcase TTM_PL_VRAM:\n\t\treturn RADEON_GEM_DOMAIN_VRAM;\n\tcase TTM_PL_TT:\n\t\treturn RADEON_GEM_DOMAIN_GTT;\n\tcase TTM_PL_SYSTEM:\n\t\treturn RADEON_GEM_DOMAIN_CPU;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn 0;\n}\n\n \nstatic inline int radeon_bo_reserve(struct radeon_bo *bo, bool no_intr)\n{\n\tint r;\n\n\tr = ttm_bo_reserve(&bo->tbo, !no_intr, false, NULL);\n\tif (unlikely(r != 0)) {\n\t\tif (r != -ERESTARTSYS)\n\t\t\tdev_err(bo->rdev->dev, \"%p reserve failed\\n\", bo);\n\t\treturn r;\n\t}\n\treturn 0;\n}\n\nstatic inline void radeon_bo_unreserve(struct radeon_bo *bo)\n{\n\tttm_bo_unreserve(&bo->tbo);\n}\n\n \nstatic inline u64 radeon_bo_gpu_offset(struct radeon_bo *bo)\n{\n\tstruct radeon_device *rdev;\n\tu64 start = 0;\n\n\trdev = radeon_get_rdev(bo->tbo.bdev);\n\n\tswitch (bo->tbo.resource->mem_type) {\n\tcase TTM_PL_TT:\n\t\tstart = rdev->mc.gtt_start;\n\t\tbreak;\n\tcase TTM_PL_VRAM:\n\t\tstart = rdev->mc.vram_start;\n\t\tbreak;\n\t}\n\n\treturn (bo->tbo.resource->start << PAGE_SHIFT) + start;\n}\n\nstatic inline unsigned long radeon_bo_size(struct radeon_bo *bo)\n{\n\treturn bo->tbo.base.size;\n}\n\nstatic inline unsigned radeon_bo_ngpu_pages(struct radeon_bo *bo)\n{\n\treturn bo->tbo.base.size / RADEON_GPU_PAGE_SIZE;\n}\n\nstatic inline unsigned radeon_bo_gpu_page_alignment(struct radeon_bo *bo)\n{\n\treturn (bo->tbo.page_alignment << PAGE_SHIFT) / RADEON_GPU_PAGE_SIZE;\n}\n\n \nstatic inline u64 radeon_bo_mmap_offset(struct radeon_bo *bo)\n{\n\treturn drm_vma_node_offset_addr(&bo->tbo.base.vma_node);\n}\n\nextern int radeon_bo_create(struct radeon_device *rdev,\n\t\t\t    unsigned long size, int byte_align,\n\t\t\t    bool kernel, u32 domain, u32 flags,\n\t\t\t    struct sg_table *sg,\n\t\t\t    struct dma_resv *resv,\n\t\t\t    struct radeon_bo **bo_ptr);\nextern int radeon_bo_kmap(struct radeon_bo *bo, void **ptr);\nextern void radeon_bo_kunmap(struct radeon_bo *bo);\nextern struct radeon_bo *radeon_bo_ref(struct radeon_bo *bo);\nextern void radeon_bo_unref(struct radeon_bo **bo);\nextern int radeon_bo_pin(struct radeon_bo *bo, u32 domain, u64 *gpu_addr);\nextern int radeon_bo_pin_restricted(struct radeon_bo *bo, u32 domain,\n\t\t\t\t    u64 max_offset, u64 *gpu_addr);\nextern void radeon_bo_unpin(struct radeon_bo *bo);\nextern int radeon_bo_evict_vram(struct radeon_device *rdev);\nextern void radeon_bo_force_delete(struct radeon_device *rdev);\nextern int radeon_bo_init(struct radeon_device *rdev);\nextern void radeon_bo_fini(struct radeon_device *rdev);\nextern int radeon_bo_list_validate(struct radeon_device *rdev,\n\t\t\t\t   struct ww_acquire_ctx *ticket,\n\t\t\t\t   struct list_head *head, int ring);\nextern int radeon_bo_set_tiling_flags(struct radeon_bo *bo,\n\t\t\t\tu32 tiling_flags, u32 pitch);\nextern void radeon_bo_get_tiling_flags(struct radeon_bo *bo,\n\t\t\t\tu32 *tiling_flags, u32 *pitch);\nextern int radeon_bo_check_tiling(struct radeon_bo *bo, bool has_moved,\n\t\t\t\tbool force_drop);\nextern void radeon_bo_move_notify(struct ttm_buffer_object *bo);\nextern vm_fault_t radeon_bo_fault_reserve_notify(struct ttm_buffer_object *bo);\nextern int radeon_bo_get_surface_reg(struct radeon_bo *bo);\nextern void radeon_bo_fence(struct radeon_bo *bo, struct radeon_fence *fence,\n\t\t\t    bool shared);\n\n \nstatic inline struct radeon_sa_manager *\nto_radeon_sa_manager(struct drm_suballoc_manager *manager)\n{\n\treturn container_of(manager, struct radeon_sa_manager, base);\n}\n\nstatic inline uint64_t radeon_sa_bo_gpu_addr(struct drm_suballoc *sa_bo)\n{\n\treturn to_radeon_sa_manager(sa_bo->manager)->gpu_addr +\n\t\tdrm_suballoc_soffset(sa_bo);\n}\n\nstatic inline void *radeon_sa_bo_cpu_addr(struct drm_suballoc *sa_bo)\n{\n\treturn to_radeon_sa_manager(sa_bo->manager)->cpu_ptr +\n\t\tdrm_suballoc_soffset(sa_bo);\n}\n\nextern int radeon_sa_bo_manager_init(struct radeon_device *rdev,\n\t\t\t\t     struct radeon_sa_manager *sa_manager,\n\t\t\t\t     unsigned size, u32 align, u32 domain,\n\t\t\t\t     u32 flags);\nextern void radeon_sa_bo_manager_fini(struct radeon_device *rdev,\n\t\t\t\t      struct radeon_sa_manager *sa_manager);\nextern int radeon_sa_bo_manager_start(struct radeon_device *rdev,\n\t\t\t\t      struct radeon_sa_manager *sa_manager);\nextern int radeon_sa_bo_manager_suspend(struct radeon_device *rdev,\n\t\t\t\t\tstruct radeon_sa_manager *sa_manager);\nextern int radeon_sa_bo_new(struct radeon_sa_manager *sa_manager,\n\t\t\t    struct drm_suballoc **sa_bo,\n\t\t\t    unsigned int size, unsigned int align);\nextern void radeon_sa_bo_free(struct drm_suballoc **sa_bo,\n\t\t\t      struct radeon_fence *fence);\n#if defined(CONFIG_DEBUG_FS)\nextern void radeon_sa_bo_dump_debug_info(struct radeon_sa_manager *sa_manager,\n\t\t\t\t\t struct seq_file *m);\n#endif\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}