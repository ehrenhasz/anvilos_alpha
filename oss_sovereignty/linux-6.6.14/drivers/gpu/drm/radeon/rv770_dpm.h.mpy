{
  "module_name": "rv770_dpm.h",
  "hash_id": "09962f10a7757fd28d7a83abf6a86b9ef80daa2a86fedcc808279fee024eb6b9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/radeon/rv770_dpm.h",
  "human_readable_source": " \n#ifndef __RV770_DPM_H__\n#define __RV770_DPM_H__\n\n#include \"radeon.h\"\n#include \"rv770_smc.h\"\n\nstruct rv770_clock_registers {\n\tu32 cg_spll_func_cntl;\n\tu32 cg_spll_func_cntl_2;\n\tu32 cg_spll_func_cntl_3;\n\tu32 cg_spll_spread_spectrum;\n\tu32 cg_spll_spread_spectrum_2;\n\tu32 mpll_ad_func_cntl;\n\tu32 mpll_ad_func_cntl_2;\n\tu32 mpll_dq_func_cntl;\n\tu32 mpll_dq_func_cntl_2;\n\tu32 mclk_pwrmgt_cntl;\n\tu32 dll_cntl;\n\tu32 mpll_ss1;\n\tu32 mpll_ss2;\n};\n\nstruct rv730_clock_registers {\n\tu32 cg_spll_func_cntl;\n\tu32 cg_spll_func_cntl_2;\n\tu32 cg_spll_func_cntl_3;\n\tu32 cg_spll_spread_spectrum;\n\tu32 cg_spll_spread_spectrum_2;\n\tu32 mclk_pwrmgt_cntl;\n\tu32 dll_cntl;\n\tu32 mpll_func_cntl;\n\tu32 mpll_func_cntl2;\n\tu32 mpll_func_cntl3;\n\tu32 mpll_ss;\n\tu32 mpll_ss2;\n};\n\nunion r7xx_clock_registers {\n\tstruct rv770_clock_registers rv770;\n\tstruct rv730_clock_registers rv730;\n};\n\nstruct vddc_table_entry {\n\tu16 vddc;\n\tu8 vddc_index;\n\tu8 high_smio;\n\tu32 low_smio;\n};\n\n#define MAX_NO_OF_MVDD_VALUES 2\n#define MAX_NO_VREG_STEPS 32\n\nstruct rv7xx_power_info {\n\t \n\tbool mem_gddr5;\n\tbool pcie_gen2;\n\tbool dynamic_pcie_gen2;\n\tbool acpi_pcie_gen2;\n\tbool boot_in_gen2;\n\tbool voltage_control;  \n\tbool mvdd_control;\n\tbool sclk_ss;\n\tbool mclk_ss;\n\tbool dynamic_ss;\n\tbool gfx_clock_gating;\n\tbool mg_clock_gating;\n\tbool mgcgtssm;\n\tbool power_gating;\n\tbool thermal_protection;\n\tbool display_gap;\n\tbool dcodt;\n\tbool ulps;\n\t \n\tunion r7xx_clock_registers clk_regs;\n\tu32 s0_vid_lower_smio_cntl;\n\t \n\tu32 vddc_mask_low;\n\tu32 mvdd_mask_low;\n\tu32 mvdd_split_frequency;\n\tu32 mvdd_low_smio[MAX_NO_OF_MVDD_VALUES];\n\tu16 max_vddc;\n\tu16 max_vddc_in_table;\n\tu16 min_vddc_in_table;\n\tstruct vddc_table_entry vddc_table[MAX_NO_VREG_STEPS];\n\tu8 valid_vddc_entries;\n\t \n\tu32 mclk_odt_threshold;\n\tu8 odt_value_0[2];\n\tu8 odt_value_1[2];\n\t \n\tu32 boot_sclk;\n\tu16 acpi_vddc;\n\tu32 ref_div;\n\tu32 active_auto_throttle_sources;\n\tu32 mclk_stutter_mode_threshold;\n\tu32 mclk_strobe_mode_threshold;\n\tu32 mclk_edc_enable_threshold;\n\tu32 bsp;\n\tu32 bsu;\n\tu32 pbsp;\n\tu32 pbsu;\n\tu32 dsp;\n\tu32 psp;\n\tu32 asi;\n\tu32 pasi;\n\tu32 vrc;\n\tu32 restricted_levels;\n\tu32 rlp;\n\tu32 rmp;\n\tu32 lhp;\n\tu32 lmp;\n\t \n\tu16 state_table_start;\n\tu16 soft_regs_start;\n\tu16 sram_end;\n\t \n\tRV770_SMC_STATETABLE smc_statetable;\n};\n\nstruct rv7xx_pl {\n\tu32 sclk;\n\tu32 mclk;\n\tu16 vddc;\n\tu16 vddci;  \n\tu32 flags;\n\tenum radeon_pcie_gen pcie_gen;  \n};\n\nstruct rv7xx_ps {\n\tstruct rv7xx_pl high;\n\tstruct rv7xx_pl medium;\n\tstruct rv7xx_pl low;\n\tbool dc_compatible;\n};\n\n#define RV770_RLP_DFLT                                10\n#define RV770_RMP_DFLT                                25\n#define RV770_LHP_DFLT                                25\n#define RV770_LMP_DFLT                                10\n#define RV770_VRC_DFLT                                0x003f\n#define RV770_ASI_DFLT                                1000\n#define RV770_HASI_DFLT                               200000\n#define RV770_MGCGTTLOCAL0_DFLT                       0x00100000\n#define RV7XX_MGCGTTLOCAL0_DFLT                       0\n#define RV770_MGCGTTLOCAL1_DFLT                       0xFFFF0000\n#define RV770_MGCGCGTSSMCTRL_DFLT                     0x55940000\n\n#define MVDD_LOW_INDEX  0\n#define MVDD_HIGH_INDEX 1\n\n#define MVDD_LOW_VALUE  0\n#define MVDD_HIGH_VALUE 0xffff\n\n#define RV770_DEFAULT_VCLK_FREQ  53300  \n#define RV770_DEFAULT_DCLK_FREQ  40000  \n\n \nint rv730_populate_sclk_value(struct radeon_device *rdev,\n\t\t\t      u32 engine_clock,\n\t\t\t      RV770_SMC_SCLK_VALUE *sclk);\nint rv730_populate_mclk_value(struct radeon_device *rdev,\n\t\t\t      u32 engine_clock, u32 memory_clock,\n\t\t\t      LPRV7XX_SMC_MCLK_VALUE mclk);\nvoid rv730_read_clock_registers(struct radeon_device *rdev);\nint rv730_populate_smc_acpi_state(struct radeon_device *rdev,\n\t\t\t\t  RV770_SMC_STATETABLE *table);\nint rv730_populate_smc_initial_state(struct radeon_device *rdev,\n\t\t\t\t     struct radeon_ps *radeon_initial_state,\n\t\t\t\t     RV770_SMC_STATETABLE *table);\nvoid rv730_program_memory_timing_parameters(struct radeon_device *rdev,\n\t\t\t\t\t    struct radeon_ps *radeon_state);\nvoid rv730_power_gating_enable(struct radeon_device *rdev,\n\t\t\t       bool enable);\nvoid rv730_start_dpm(struct radeon_device *rdev);\nvoid rv730_stop_dpm(struct radeon_device *rdev);\nvoid rv730_program_dcodt(struct radeon_device *rdev, bool use_dcodt);\nvoid rv730_get_odt_values(struct radeon_device *rdev);\n\n \nint rv740_populate_sclk_value(struct radeon_device *rdev, u32 engine_clock,\n\t\t\t      RV770_SMC_SCLK_VALUE *sclk);\nint rv740_populate_mclk_value(struct radeon_device *rdev,\n\t\t\t      u32 engine_clock, u32 memory_clock,\n\t\t\t      RV7XX_SMC_MCLK_VALUE *mclk);\nvoid rv740_read_clock_registers(struct radeon_device *rdev);\nint rv740_populate_smc_acpi_state(struct radeon_device *rdev,\n\t\t\t\t  RV770_SMC_STATETABLE *table);\nvoid rv740_enable_mclk_spread_spectrum(struct radeon_device *rdev,\n\t\t\t\t       bool enable);\nu8 rv740_get_mclk_frequency_ratio(u32 memory_clock);\nu32 rv740_get_dll_speed(bool is_gddr5, u32 memory_clock);\nu32 rv740_get_decoded_reference_divider(u32 encoded_ref);\n\n \nu32 rv770_map_clkf_to_ibias(struct radeon_device *rdev, u32 clkf);\nint rv770_populate_vddc_value(struct radeon_device *rdev, u16 vddc,\n\t\t\t      RV770_SMC_VOLTAGE_VALUE *voltage);\nint rv770_populate_mvdd_value(struct radeon_device *rdev, u32 mclk,\n\t\t\t      RV770_SMC_VOLTAGE_VALUE *voltage);\nu8 rv770_get_seq_value(struct radeon_device *rdev,\n\t\t       struct rv7xx_pl *pl);\nint rv770_populate_initial_mvdd_value(struct radeon_device *rdev,\n\t\t\t\t      RV770_SMC_VOLTAGE_VALUE *voltage);\nu32 rv770_calculate_memory_refresh_rate(struct radeon_device *rdev,\n\t\t\t\t\tu32 engine_clock);\nvoid rv770_program_response_times(struct radeon_device *rdev);\nint rv770_populate_smc_sp(struct radeon_device *rdev,\n\t\t\t  struct radeon_ps *radeon_state,\n\t\t\t  RV770_SMC_SWSTATE *smc_state);\nint rv770_populate_smc_t(struct radeon_device *rdev,\n\t\t\t struct radeon_ps *radeon_state,\n\t\t\t RV770_SMC_SWSTATE *smc_state);\nvoid rv770_read_voltage_smio_registers(struct radeon_device *rdev);\nvoid rv770_get_memory_type(struct radeon_device *rdev);\nvoid r7xx_start_smc(struct radeon_device *rdev);\nu8 rv770_get_memory_module_index(struct radeon_device *rdev);\nvoid rv770_get_max_vddc(struct radeon_device *rdev);\nvoid rv770_get_pcie_gen2_status(struct radeon_device *rdev);\nvoid rv770_enable_acpi_pm(struct radeon_device *rdev);\nvoid rv770_restore_cgcg(struct radeon_device *rdev);\nbool rv770_dpm_enabled(struct radeon_device *rdev);\nvoid rv770_enable_voltage_control(struct radeon_device *rdev,\n\t\t\t\t  bool enable);\nvoid rv770_enable_backbias(struct radeon_device *rdev,\n\t\t\t   bool enable);\nvoid rv770_enable_thermal_protection(struct radeon_device *rdev,\n\t\t\t\t     bool enable);\nvoid rv770_enable_auto_throttle_source(struct radeon_device *rdev,\n\t\t\t\t       enum radeon_dpm_auto_throttle_src source,\n\t\t\t\t       bool enable);\nvoid rv770_setup_bsp(struct radeon_device *rdev);\nvoid rv770_program_git(struct radeon_device *rdev);\nvoid rv770_program_tp(struct radeon_device *rdev);\nvoid rv770_program_tpp(struct radeon_device *rdev);\nvoid rv770_program_sstp(struct radeon_device *rdev);\nvoid rv770_program_engine_speed_parameters(struct radeon_device *rdev);\nvoid rv770_program_vc(struct radeon_device *rdev);\nvoid rv770_clear_vc(struct radeon_device *rdev);\nint rv770_upload_firmware(struct radeon_device *rdev);\nvoid rv770_stop_dpm(struct radeon_device *rdev);\nvoid r7xx_stop_smc(struct radeon_device *rdev);\nvoid rv770_reset_smio_status(struct radeon_device *rdev);\nint rv770_restrict_performance_levels_before_switch(struct radeon_device *rdev);\nint rv770_dpm_force_performance_level(struct radeon_device *rdev,\n\t\t\t\t      enum radeon_dpm_forced_level level);\nint rv770_halt_smc(struct radeon_device *rdev);\nint rv770_resume_smc(struct radeon_device *rdev);\nint rv770_set_sw_state(struct radeon_device *rdev);\nint rv770_set_boot_state(struct radeon_device *rdev);\nint rv7xx_parse_power_table(struct radeon_device *rdev);\nvoid rv770_set_uvd_clock_before_set_eng_clock(struct radeon_device *rdev,\n\t\t\t\t\t      struct radeon_ps *new_ps,\n\t\t\t\t\t      struct radeon_ps *old_ps);\nvoid rv770_set_uvd_clock_after_set_eng_clock(struct radeon_device *rdev,\n\t\t\t\t\t     struct radeon_ps *new_ps,\n\t\t\t\t\t     struct radeon_ps *old_ps);\nvoid rv770_get_engine_memory_ss(struct radeon_device *rdev);\n\n \nint rv770_write_smc_soft_register(struct radeon_device *rdev,\n\t\t\t\t  u16 reg_offset, u32 value);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}