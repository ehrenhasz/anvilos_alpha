{
  "module_name": "drm_gem_ttm_helper.c",
  "hash_id": "56730d74d86bb95ff843b89c219494311ac8c3fbe69649e26392f490b42e2665",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/drm_gem_ttm_helper.c",
  "human_readable_source": "\n\n#include <linux/module.h>\n\n#include <drm/drm_gem_ttm_helper.h>\n#include <drm/ttm/ttm_placement.h>\n#include <drm/ttm/ttm_tt.h>\n\n \n\n \nvoid drm_gem_ttm_print_info(struct drm_printer *p, unsigned int indent,\n\t\t\t    const struct drm_gem_object *gem)\n{\n\tstatic const char * const plname[] = {\n\t\t[ TTM_PL_SYSTEM ] = \"system\",\n\t\t[ TTM_PL_TT     ] = \"tt\",\n\t\t[ TTM_PL_VRAM   ] = \"vram\",\n\t\t[ TTM_PL_PRIV   ] = \"priv\",\n\n\t\t[ 16 ]            = \"cached\",\n\t\t[ 17 ]            = \"uncached\",\n\t\t[ 18 ]            = \"wc\",\n\t\t[ 19 ]            = \"contig\",\n\n\t\t[ 21 ]            = \"pinned\",  \n\t\t[ 22 ]            = \"topdown\",\n\t};\n\tconst struct ttm_buffer_object *bo = drm_gem_ttm_of_gem(gem);\n\n\tdrm_printf_indent(p, indent, \"placement=\");\n\tdrm_print_bits(p, bo->resource->placement, plname, ARRAY_SIZE(plname));\n\tdrm_printf(p, \"\\n\");\n\n\tif (bo->resource->bus.is_iomem)\n\t\tdrm_printf_indent(p, indent, \"bus.offset=%lx\\n\",\n\t\t\t\t  (unsigned long)bo->resource->bus.offset);\n}\nEXPORT_SYMBOL(drm_gem_ttm_print_info);\n\n \nint drm_gem_ttm_vmap(struct drm_gem_object *gem,\n\t\t     struct iosys_map *map)\n{\n\tstruct ttm_buffer_object *bo = drm_gem_ttm_of_gem(gem);\n\n\treturn ttm_bo_vmap(bo, map);\n}\nEXPORT_SYMBOL(drm_gem_ttm_vmap);\n\n \nvoid drm_gem_ttm_vunmap(struct drm_gem_object *gem,\n\t\t\tstruct iosys_map *map)\n{\n\tstruct ttm_buffer_object *bo = drm_gem_ttm_of_gem(gem);\n\n\tttm_bo_vunmap(bo, map);\n}\nEXPORT_SYMBOL(drm_gem_ttm_vunmap);\n\n \nint drm_gem_ttm_mmap(struct drm_gem_object *gem,\n\t\t     struct vm_area_struct *vma)\n{\n\tstruct ttm_buffer_object *bo = drm_gem_ttm_of_gem(gem);\n\tint ret;\n\n\tret = ttm_bo_mmap_obj(vma, bo);\n\tif (ret < 0)\n\t\treturn ret;\n\n\t \n\tdrm_gem_object_put(gem);\n\n\treturn 0;\n}\nEXPORT_SYMBOL(drm_gem_ttm_mmap);\n\n \nint drm_gem_ttm_dumb_map_offset(struct drm_file *file, struct drm_device *dev,\n\t\t\t\tuint32_t handle, uint64_t *offset)\n{\n\tstruct drm_gem_object *gem;\n\n\tgem = drm_gem_object_lookup(file, handle);\n\tif (!gem)\n\t\treturn -ENOENT;\n\n\t*offset = drm_vma_node_offset_addr(&gem->vma_node);\n\n\tdrm_gem_object_put(gem);\n\n\treturn 0;\n}\nEXPORT_SYMBOL(drm_gem_ttm_dumb_map_offset);\n\nMODULE_DESCRIPTION(\"DRM gem ttm helpers\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}