{
  "module_name": "psb_intel_drv.h",
  "hash_id": "3b705b7cfb866487ce1f56c0c9a736d9d36d0ae73a8d4e16066a6bb9aa91f06a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/gma500/psb_intel_drv.h",
  "human_readable_source": " \n \n\n#ifndef __INTEL_DRV_H__\n#define __INTEL_DRV_H__\n\n#include <linux/i2c.h>\n#include <linux/i2c-algo-bit.h>\n#include <drm/drm_crtc.h>\n#include <drm/drm_encoder.h>\n#include <drm/drm_probe_helper.h>\n#include <drm/drm_vblank.h>\n#include \"gma_display.h\"\n\n \n\n \n#define INTELFB_CONN_LIMIT 4\n\n \n#define INTEL_HDMIB_CLONE_BIT 1\n#define INTEL_HDMIC_CLONE_BIT 2\n#define INTEL_HDMID_CLONE_BIT 3\n#define INTEL_HDMIE_CLONE_BIT 4\n#define INTEL_HDMIF_CLONE_BIT 5\n#define INTEL_SDVO_NON_TV_CLONE_BIT 6\n#define INTEL_SDVO_TV_CLONE_BIT 7\n#define INTEL_SDVO_LVDS_CLONE_BIT 8\n#define INTEL_ANALOG_CLONE_BIT 9\n#define INTEL_TV_CLONE_BIT 10\n#define INTEL_DP_B_CLONE_BIT 11\n#define INTEL_DP_C_CLONE_BIT 12\n#define INTEL_DP_D_CLONE_BIT 13\n#define INTEL_LVDS_CLONE_BIT 14\n#define INTEL_DVO_TMDS_CLONE_BIT 15\n#define INTEL_DVO_LVDS_CLONE_BIT 16\n#define INTEL_EDP_CLONE_BIT 17\n\n \n#define INTEL_OUTPUT_UNUSED 0\n#define INTEL_OUTPUT_ANALOG 1\n#define INTEL_OUTPUT_DVO 2\n#define INTEL_OUTPUT_SDVO 3\n#define INTEL_OUTPUT_LVDS 4\n#define INTEL_OUTPUT_TVOUT 5\n#define INTEL_OUTPUT_HDMI 6\n#define INTEL_OUTPUT_MIPI 7\n#define INTEL_OUTPUT_MIPI2 8\n#define INTEL_OUTPUT_DISPLAYPORT 9\n#define INTEL_OUTPUT_EDP 10\n\n \nstruct psb_intel_mode_device {\n\n\t \n\t size_t(*bo_offset) (struct drm_device *dev, void *bo);\n\n\t \n\tint backlight_duty_cycle;\t \n\tbool panel_wants_dither;\n\tstruct drm_display_mode *panel_fixed_mode;\n\tstruct drm_display_mode *panel_fixed_mode2;\n\tstruct drm_display_mode *vbt_mode;\t \n\n\tuint32_t saveBLC_PWM_CTL;\n};\n\nstruct gma_i2c_chan {\n\tstruct i2c_adapter base;\n\tstruct i2c_algo_bit_data algo;\n\tu8 slave_addr;\n\n\t \n\tstruct drm_device *drm_dev;\n\tu32 reg;  \n};\n\nstruct gma_encoder {\n\tstruct drm_encoder base;\n\tint type;\n\tbool needs_tv_clock;\n\tvoid (*hot_plug)(struct gma_encoder *);\n\tint crtc_mask;\n\tint clone_mask;\n\tu32 ddi_select;\t \n#define DDI0_SELECT\t0x01\n#define DDI1_SELECT\t0x02\n#define DP_MASK\t\t0x8000\n#define DDI_MASK\t0x03\n\tvoid *dev_priv;  \n\n\t \n\tstruct gma_i2c_chan *i2c_bus;\n};\n\nstruct gma_connector {\n\tstruct drm_connector base;\n\tstruct gma_encoder *encoder;\n\n\tvoid (*save)(struct drm_connector *connector);\n\tvoid (*restore)(struct drm_connector *connector);\n};\n\nstruct psb_intel_crtc_state {\n\tuint32_t saveDSPCNTR;\n\tuint32_t savePIPECONF;\n\tuint32_t savePIPESRC;\n\tuint32_t saveDPLL;\n\tuint32_t saveFP0;\n\tuint32_t saveFP1;\n\tuint32_t saveHTOTAL;\n\tuint32_t saveHBLANK;\n\tuint32_t saveHSYNC;\n\tuint32_t saveVTOTAL;\n\tuint32_t saveVBLANK;\n\tuint32_t saveVSYNC;\n\tuint32_t saveDSPSTRIDE;\n\tuint32_t saveDSPSIZE;\n\tuint32_t saveDSPPOS;\n\tuint32_t saveDSPBASE;\n\tuint32_t savePalette[256];\n};\n\nstruct gma_crtc {\n\tstruct drm_crtc base;\n\tint pipe;\n\tint plane;\n\tuint32_t cursor_addr;\n\tstruct psb_gem_object *cursor_pobj;\n\tu8 lut_adj[256];\n\tstruct psb_intel_framebuffer *fbdev_fb;\n\t \n\tstruct drm_mode_set mode_set;\n\n\t \n\tstruct drm_gem_object *cursor_obj;\n\n\tstruct drm_display_mode saved_mode;\n\tstruct drm_display_mode saved_adjusted_mode;\n\n\tstruct psb_intel_mode_device *mode_dev;\n\n\t \n\tu32 mode_flags;\n\n\tbool active;\n\n\t \n\tstruct psb_intel_crtc_state *crtc_state;\n\n\tconst struct gma_clock_funcs *clock_funcs;\n\n\tstruct drm_pending_vblank_event *page_flip_event;\n};\n\n#define to_gma_crtc(x)\t\\\n\t\tcontainer_of(x, struct gma_crtc, base)\n#define to_gma_connector(x) \\\n\t\tcontainer_of(x, struct gma_connector, base)\n#define to_gma_encoder(x)\t\\\n\t\tcontainer_of(x, struct gma_encoder, base)\n#define to_psb_intel_framebuffer(x)\t\\\n\t\tcontainer_of(x, struct psb_intel_framebuffer, base)\n#define to_gma_i2c_chan(x)\t\\\n\t\tcontainer_of(x, struct gma_i2c_chan, base)\n\nstruct gma_i2c_chan *gma_i2c_create(struct drm_device *dev, const u32 reg,\n\t\t\t\t    const char *name);\nvoid gma_i2c_destroy(struct gma_i2c_chan *chan);\nint psb_intel_ddc_get_modes(struct drm_connector *connector,\n\t\t\t    struct i2c_adapter *adapter);\nextern bool psb_intel_ddc_probe(struct i2c_adapter *adapter);\n\nextern void psb_intel_crtc_init(struct drm_device *dev, int pipe,\n\t\t\t    struct psb_intel_mode_device *mode_dev);\nextern void psb_intel_crt_init(struct drm_device *dev);\nextern bool psb_intel_sdvo_init(struct drm_device *dev, int output_device);\nextern void psb_intel_dvo_init(struct drm_device *dev);\nextern void psb_intel_tv_init(struct drm_device *dev);\nextern void psb_intel_lvds_init(struct drm_device *dev,\n\t\t\t    struct psb_intel_mode_device *mode_dev);\nextern void psb_intel_lvds_set_brightness(struct drm_device *dev, int level);\nextern void oaktrail_lvds_init(struct drm_device *dev,\n\t\t\t   struct psb_intel_mode_device *mode_dev);\nextern void oaktrail_wait_for_INTR_PKT_SENT(struct drm_device *dev);\nstruct gma_i2c_chan *oaktrail_lvds_i2c_init(struct drm_device *dev);\nextern void mid_dsi_init(struct drm_device *dev,\n\t\t    struct psb_intel_mode_device *mode_dev, int dsi_num);\n\nextern struct drm_encoder *gma_best_encoder(struct drm_connector *connector);\nextern void gma_connector_attach_encoder(struct gma_connector *connector,\n\t\t\t\t\t struct gma_encoder *encoder);\n\nstatic inline struct gma_encoder *gma_attached_encoder(\n\t\t\t\t\t\tstruct drm_connector *connector)\n{\n\treturn to_gma_connector(connector)->encoder;\n}\n\nextern struct drm_display_mode *psb_intel_crtc_mode_get(struct drm_device *dev,\n\t\t\t\t\t\t    struct drm_crtc *crtc);\nextern struct drm_crtc *psb_intel_get_crtc_from_pipe(struct drm_device *dev,\n\t\t\t\t\t\t int pipe);\nextern struct drm_connector *psb_intel_sdvo_find(struct drm_device *dev,\n\t\t\t\t\t     int sdvoB);\nextern int intelfb_probe(struct drm_device *dev);\nextern int intelfb_remove(struct drm_device *dev,\n\t\t\t  struct drm_framebuffer *fb);\nextern bool psb_intel_lvds_mode_fixup(struct drm_encoder *encoder,\n\t\t\t\t      const struct drm_display_mode *mode,\n\t\t\t\t      struct drm_display_mode *adjusted_mode);\nextern enum drm_mode_status psb_intel_lvds_mode_valid(struct drm_connector *connector,\n\t\t\t\t     struct drm_display_mode *mode);\nextern int psb_intel_lvds_set_property(struct drm_connector *connector,\n\t\t\t\t\tstruct drm_property *property,\n\t\t\t\t\tuint64_t value);\nextern void psb_intel_lvds_destroy(struct drm_connector *connector);\n\n \nextern void gma_intel_i2c_reset(struct drm_device *dev);\nextern int gma_intel_setup_gmbus(struct drm_device *dev);\nextern void gma_intel_gmbus_set_speed(struct i2c_adapter *adapter, int speed);\nextern void gma_intel_gmbus_force_bit(struct i2c_adapter *adapter, bool force_bit);\nextern void gma_intel_teardown_gmbus(struct drm_device *dev);\n\n \nextern void cdv_intel_dp_init(struct drm_device *dev, struct psb_intel_mode_device *mode_dev, int output_reg);\nextern void cdv_intel_dp_set_m_n(struct drm_crtc *crtc,\n\t\t\t\t\tstruct drm_display_mode *mode,\n\t\t\t\t\tstruct drm_display_mode *adjusted_mode);\n\nextern void psb_intel_attach_force_audio_property(struct drm_connector *connector);\nextern void psb_intel_attach_broadcast_rgb_property(struct drm_connector *connector);\n\nextern int cdv_sb_read(struct drm_device *dev, u32 reg, u32 *val);\nextern int cdv_sb_write(struct drm_device *dev, u32 reg, u32 val);\nextern void cdv_sb_reset(struct drm_device *dev);\n\nextern void cdv_intel_attach_force_audio_property(struct drm_connector *connector);\nextern void cdv_intel_attach_broadcast_rgb_property(struct drm_connector *connector);\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}