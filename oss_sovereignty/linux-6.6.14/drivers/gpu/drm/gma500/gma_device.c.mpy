{
  "module_name": "gma_device.c",
  "hash_id": "dc4f4573cf8107c59190fe07cbe666c882deba74f22494ef189d467e6132bb41",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/gma500/gma_device.c",
  "human_readable_source": "\n \n\n#include \"psb_drv.h\"\n#include \"gma_device.h\"\n\nvoid gma_get_core_freq(struct drm_device *dev)\n{\n\tuint32_t clock;\n\tstruct pci_dev *pdev = to_pci_dev(dev->dev);\n\tstruct pci_dev *pci_root =\n\t\tpci_get_domain_bus_and_slot(pci_domain_nr(pdev->bus),\n\t\t\t\t\t    0, 0);\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\n\t \n\t \n\n\tpci_write_config_dword(pci_root, 0xD0, 0xD0050300);\n\tpci_read_config_dword(pci_root, 0xD4, &clock);\n\tpci_dev_put(pci_root);\n\n\tswitch (clock & 0x07) {\n\tcase 0:\n\t\tdev_priv->core_freq = 100;\n\t\tbreak;\n\tcase 1:\n\t\tdev_priv->core_freq = 133;\n\t\tbreak;\n\tcase 2:\n\t\tdev_priv->core_freq = 150;\n\t\tbreak;\n\tcase 3:\n\t\tdev_priv->core_freq = 178;\n\t\tbreak;\n\tcase 4:\n\t\tdev_priv->core_freq = 200;\n\t\tbreak;\n\tcase 5:\n\tcase 6:\n\tcase 7:\n\t\tdev_priv->core_freq = 266;\n\t\tbreak;\n\tdefault:\n\t\tdev_priv->core_freq = 0;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}