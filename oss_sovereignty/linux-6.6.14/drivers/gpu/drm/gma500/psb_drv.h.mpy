{
  "module_name": "psb_drv.h",
  "hash_id": "9161450dda6ca68bf8a7265b32caa687360ebd06615cdac877822578c481ea4d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/gma500/psb_drv.h",
  "human_readable_source": " \n \n\n#ifndef _PSB_DRV_H_\n#define _PSB_DRV_H_\n\n#include <linux/kref.h>\n#include <linux/mm_types.h>\n\n#include <drm/drm_device.h>\n\n#include \"gtt.h\"\n#include \"intel_bios.h\"\n#include \"mmu.h\"\n#include \"oaktrail.h\"\n#include \"opregion.h\"\n#include \"power.h\"\n#include \"psb_intel_drv.h\"\n#include \"psb_reg.h\"\n\n#define DRIVER_AUTHOR \"Alan Cox <alan@linux.intel.com> and others\"\n\n#define DRIVER_NAME \"gma500\"\n#define DRIVER_DESC \"DRM driver for the Intel GMA500, GMA600, GMA3600, GMA3650\"\n#define DRIVER_DATE \"20140314\"\n\n#define DRIVER_MAJOR 1\n#define DRIVER_MINOR 0\n#define DRIVER_PATCHLEVEL 0\n\n \n#define DRM_MODE_SCALE_NO_SCALE   \t2\n\n#define IS_PSB(drm) ((to_pci_dev((drm)->dev)->device & 0xfffe) == 0x8108)\n#define IS_MRST(drm) ((to_pci_dev((drm)->dev)->device & 0xfff0) == 0x4100)\n#define IS_CDV(drm) ((to_pci_dev((drm)->dev)->device & 0xfff0) == 0x0be0)\n\n \n#define PSB_VDC_OFFSET\t\t 0x00000000\n#define PSB_VDC_SIZE\t\t 0x000080000\n#define MRST_MMIO_SIZE\t\t 0x0000C0000\n#define PSB_SGX_SIZE\t\t 0x8000\n#define PSB_SGX_OFFSET\t\t 0x00040000\n#define MRST_SGX_OFFSET\t\t 0x00080000\n\n \n#define PSB_MMIO_RESOURCE\t 0\n#define PSB_AUX_RESOURCE\t 0\n#define PSB_GATT_RESOURCE\t 2\n#define PSB_GTT_RESOURCE\t 3\n\n \n#define PSB_GMCH_CTRL\t\t 0x52\n#define PSB_BSM\t\t\t 0x5C\n#define _PSB_GMCH_ENABLED\t 0x4\n#define PSB_PGETBL_CTL\t\t 0x2020\n#define _PSB_PGETBL_ENABLED\t 0x00000001\n#define PSB_SGX_2D_SLAVE_PORT\t 0x4000\n#define PSB_LPC_GBA\t\t 0x44\n\n \n#define PSB_TT_PRIV0_LIMIT\t (256*1024*1024)\n#define PSB_TT_PRIV0_PLIMIT\t (PSB_TT_PRIV0_LIMIT >> PAGE_SHIFT)\n\n \n\n \n#define PSB_MMU_CACHED_MEMORY\t  0x0001\t \n#define PSB_MMU_RO_MEMORY\t  0x0002\t \n#define PSB_MMU_WO_MEMORY\t  0x0004\t \n\n \n#define PSB_PDE_MASK\t\t  0x003FFFFF\n#define PSB_PDE_SHIFT\t\t  22\n#define PSB_PTE_SHIFT\t\t  12\n\n \n#define PSB_PTE_VALID\t\t  0x0001\t \n#define PSB_PTE_WO\t\t  0x0002\t \n#define PSB_PTE_RO\t\t  0x0004\t \n#define PSB_PTE_CACHED\t\t  0x0008\t \n\n \n#define PSB_MSVDX_CLOCKGATING\t  0x2064\n#define PSB_TOPAZ_CLOCKGATING\t  0x2068\n#define PSB_HWSTAM\t\t  0x2098\n#define PSB_INSTPM\t\t  0x20C0\n#define PSB_INT_IDENTITY_R        0x20A4\n#define _PSB_IRQ_ASLE\t\t  (1<<0)\n#define _MDFLD_PIPEC_EVENT_FLAG   (1<<2)\n#define _MDFLD_PIPEC_VBLANK_FLAG  (1<<3)\n#define _PSB_DPST_PIPEB_FLAG      (1<<4)\n#define _MDFLD_PIPEB_EVENT_FLAG   (1<<4)\n#define _PSB_VSYNC_PIPEB_FLAG\t  (1<<5)\n#define _PSB_DPST_PIPEA_FLAG      (1<<6)\n#define _PSB_PIPEA_EVENT_FLAG     (1<<6)\n#define _PSB_VSYNC_PIPEA_FLAG\t  (1<<7)\n#define _PSB_IRQ_DISP_HOTSYNC\t  (1<<17)\n#define _PSB_IRQ_SGX_FLAG\t  (1<<18)\n#define _PSB_IRQ_MSVDX_FLAG\t  (1<<19)\n#define _LNC_IRQ_TOPAZ_FLAG\t  (1<<20)\n\n#define _PSB_PIPE_EVENT_FLAG\t(_PSB_VSYNC_PIPEA_FLAG | \\\n\t\t\t\t _PSB_VSYNC_PIPEB_FLAG)\n\n#define PSB_INT_IDENTITY_R\t  0x20A4\n#define PSB_INT_MASK_R\t\t  0x20A8\n#define PSB_INT_ENABLE_R\t  0x20A0\n\n#define _PSB_MMU_ER_MASK      0x0001FF00\n#define _PSB_MMU_ER_HOST      (1 << 16)\n#define GPIOA\t\t\t0x5010\n#define GPIOB\t\t\t0x5014\n#define GPIOC\t\t\t0x5018\n#define GPIOD\t\t\t0x501c\n#define GPIOE\t\t\t0x5020\n#define GPIOF\t\t\t0x5024\n#define GPIOG\t\t\t0x5028\n#define GPIOH\t\t\t0x502c\n#define GPIO_CLOCK_DIR_MASK\t\t(1 << 0)\n#define GPIO_CLOCK_DIR_IN\t\t(0 << 1)\n#define GPIO_CLOCK_DIR_OUT\t\t(1 << 1)\n#define GPIO_CLOCK_VAL_MASK\t\t(1 << 2)\n#define GPIO_CLOCK_VAL_OUT\t\t(1 << 3)\n#define GPIO_CLOCK_VAL_IN\t\t(1 << 4)\n#define GPIO_CLOCK_PULLUP_DISABLE\t(1 << 5)\n#define GPIO_DATA_DIR_MASK\t\t(1 << 8)\n#define GPIO_DATA_DIR_IN\t\t(0 << 9)\n#define GPIO_DATA_DIR_OUT\t\t(1 << 9)\n#define GPIO_DATA_VAL_MASK\t\t(1 << 10)\n#define GPIO_DATA_VAL_OUT\t\t(1 << 11)\n#define GPIO_DATA_VAL_IN\t\t(1 << 12)\n#define GPIO_DATA_PULLUP_DISABLE\t(1 << 13)\n\n#define VCLK_DIVISOR_VGA0   0x6000\n#define VCLK_DIVISOR_VGA1   0x6004\n#define VCLK_POST_DIV\t    0x6010\n\n#define PSB_COMM_2D (PSB_ENGINE_2D << 4)\n#define PSB_COMM_3D (PSB_ENGINE_3D << 4)\n#define PSB_COMM_TA (PSB_ENGINE_TA << 4)\n#define PSB_COMM_HP (PSB_ENGINE_HP << 4)\n#define PSB_COMM_USER_IRQ (1024 >> 2)\n#define PSB_COMM_USER_IRQ_LOST (PSB_COMM_USER_IRQ + 1)\n#define PSB_COMM_FW (2048 >> 2)\n\n#define PSB_UIRQ_VISTEST\t       1\n#define PSB_UIRQ_OOM_REPLY\t       2\n#define PSB_UIRQ_FIRE_TA_REPLY\t       3\n#define PSB_UIRQ_FIRE_RASTER_REPLY     4\n\n#define PSB_2D_SIZE (256*1024*1024)\n#define PSB_MAX_RELOC_PAGES 1024\n\n#define PSB_LOW_REG_OFFS 0x0204\n#define PSB_HIGH_REG_OFFS 0x0600\n\n#define PSB_NUM_VBLANKS 2\n\n\n#define PSB_2D_SIZE (256*1024*1024)\n#define PSB_MAX_RELOC_PAGES 1024\n\n#define PSB_LOW_REG_OFFS 0x0204\n#define PSB_HIGH_REG_OFFS 0x0600\n\n#define PSB_NUM_VBLANKS 2\n#define PSB_WATCHDOG_DELAY (HZ * 2)\n#define PSB_LID_DELAY (HZ / 10)\n\n#define PSB_MAX_BRIGHTNESS\t\t100\n\n#define PSB_PWR_STATE_ON\t\t1\n#define PSB_PWR_STATE_OFF\t\t2\n\n#define PSB_PMPOLICY_NOPM\t\t0\n#define PSB_PMPOLICY_CLOCKGATING\t1\n#define PSB_PMPOLICY_POWERDOWN\t\t2\n\n#define PSB_PMSTATE_POWERUP\t\t0\n#define PSB_PMSTATE_CLOCKGATED\t\t1\n#define PSB_PMSTATE_POWERDOWN\t\t2\n#define PSB_PCIx_MSI_ADDR_LOC\t\t0x94\n#define PSB_PCIx_MSI_DATA_LOC\t\t0x98\n\n \n#define KSEL_CRYSTAL_19 1\n#define KSEL_BYPASS_19 5\n#define KSEL_BYPASS_25 6\n#define KSEL_BYPASS_83_100 7\n\nstruct opregion_header;\nstruct opregion_acpi;\nstruct opregion_swsci;\nstruct opregion_asle;\n\nstruct psb_intel_opregion {\n\tstruct opregion_header *header;\n\tstruct opregion_acpi *acpi;\n\tstruct opregion_swsci *swsci;\n\tstruct opregion_asle *asle;\n\tvoid *vbt;\n\tu32 __iomem *lid_state;\n\tstruct work_struct asle_work;\n};\n\nstruct sdvo_device_mapping {\n\tu8 initialized;\n\tu8 dvo_port;\n\tu8 slave_addr;\n\tu8 dvo_wiring;\n\tu8 i2c_pin;\n\tu8 i2c_speed;\n\tu8 ddc_pin;\n};\n\nstruct intel_gmbus {\n\tstruct i2c_adapter adapter;\n\tstruct i2c_adapter *force_bit;\n\tu32 reg0;\n};\n\n \nstruct psb_offset {\n\tu32\tfp0;\n\tu32\tfp1;\n\tu32\tcntr;\n\tu32\tconf;\n\tu32\tsrc;\n\tu32\tdpll;\n\tu32\tdpll_md;\n\tu32\thtotal;\n\tu32\thblank;\n\tu32\thsync;\n\tu32\tvtotal;\n\tu32\tvblank;\n\tu32\tvsync;\n\tu32\tstride;\n\tu32\tsize;\n\tu32\tpos;\n\tu32\tsurf;\n\tu32\taddr;\n\tu32\tbase;\n\tu32\tstatus;\n\tu32\tlinoff;\n\tu32\ttileoff;\n\tu32\tpalette;\n};\n\n \n\n \nstruct psb_pipe {\n\tu32\tfp0;\n\tu32\tfp1;\n\tu32\tcntr;\n\tu32\tconf;\n\tu32\tsrc;\n\tu32\tdpll;\n\tu32\tdpll_md;\n\tu32\thtotal;\n\tu32\thblank;\n\tu32\thsync;\n\tu32\tvtotal;\n\tu32\tvblank;\n\tu32\tvsync;\n\tu32\tstride;\n\tu32\tsize;\n\tu32\tpos;\n\tu32\tbase;\n\tu32\tsurf;\n\tu32\taddr;\n\tu32\tstatus;\n\tu32\tlinoff;\n\tu32\ttileoff;\n\tu32\tpalette[256];\n};\n\nstruct psb_state {\n\tuint32_t saveVCLK_DIVISOR_VGA0;\n\tuint32_t saveVCLK_DIVISOR_VGA1;\n\tuint32_t saveVCLK_POST_DIV;\n\tuint32_t saveVGACNTRL;\n\tuint32_t saveADPA;\n\tuint32_t saveLVDS;\n\tuint32_t saveDVOA;\n\tuint32_t saveDVOB;\n\tuint32_t saveDVOC;\n\tuint32_t savePP_ON;\n\tuint32_t savePP_OFF;\n\tuint32_t savePP_CONTROL;\n\tuint32_t savePP_CYCLE;\n\tuint32_t savePFIT_CONTROL;\n\tuint32_t saveCLOCKGATING;\n\tuint32_t saveDSPARB;\n\tuint32_t savePFIT_AUTO_RATIOS;\n\tuint32_t savePFIT_PGM_RATIOS;\n\tuint32_t savePP_ON_DELAYS;\n\tuint32_t savePP_OFF_DELAYS;\n\tuint32_t savePP_DIVISOR;\n\tuint32_t saveBCLRPAT_A;\n\tuint32_t saveBCLRPAT_B;\n\tuint32_t savePERF_MODE;\n\tuint32_t saveDSPFW1;\n\tuint32_t saveDSPFW2;\n\tuint32_t saveDSPFW3;\n\tuint32_t saveDSPFW4;\n\tuint32_t saveDSPFW5;\n\tuint32_t saveDSPFW6;\n\tuint32_t saveCHICKENBIT;\n\tuint32_t saveDSPACURSOR_CTRL;\n\tuint32_t saveDSPBCURSOR_CTRL;\n\tuint32_t saveDSPACURSOR_BASE;\n\tuint32_t saveDSPBCURSOR_BASE;\n\tuint32_t saveDSPACURSOR_POS;\n\tuint32_t saveDSPBCURSOR_POS;\n\tuint32_t saveOV_OVADD;\n\tuint32_t saveOV_OGAMC0;\n\tuint32_t saveOV_OGAMC1;\n\tuint32_t saveOV_OGAMC2;\n\tuint32_t saveOV_OGAMC3;\n\tuint32_t saveOV_OGAMC4;\n\tuint32_t saveOV_OGAMC5;\n\tuint32_t saveOVC_OVADD;\n\tuint32_t saveOVC_OGAMC0;\n\tuint32_t saveOVC_OGAMC1;\n\tuint32_t saveOVC_OGAMC2;\n\tuint32_t saveOVC_OGAMC3;\n\tuint32_t saveOVC_OGAMC4;\n\tuint32_t saveOVC_OGAMC5;\n\n\t \n\tuint32_t saveHISTOGRAM_INT_CONTROL_REG;\n\tuint32_t saveHISTOGRAM_LOGIC_CONTROL_REG;\n\tuint32_t savePWM_CONTROL_LOGIC;\n};\n\nstruct cdv_state {\n\tuint32_t saveDSPCLK_GATE_D;\n\tuint32_t saveRAMCLK_GATE_D;\n\tuint32_t saveDSPARB;\n\tuint32_t saveDSPFW[6];\n\tuint32_t saveADPA;\n\tuint32_t savePP_CONTROL;\n\tuint32_t savePFIT_PGM_RATIOS;\n\tuint32_t saveLVDS;\n\tuint32_t savePFIT_CONTROL;\n\tuint32_t savePP_ON_DELAYS;\n\tuint32_t savePP_OFF_DELAYS;\n\tuint32_t savePP_CYCLE;\n\tuint32_t saveVGACNTRL;\n\tuint32_t saveIER;\n\tuint32_t saveIMR;\n\tu8\t saveLBB;\n};\n\nstruct psb_save_area {\n\tstruct psb_pipe pipe[3];\n\tuint32_t saveBSM;\n\tuint32_t saveVBT;\n\tunion {\n\t        struct psb_state psb;\n\t\tstruct cdv_state cdv;\n\t};\n\tuint32_t saveBLC_PWM_CTL2;\n\tuint32_t saveBLC_PWM_CTL;\n};\n\nstruct psb_ops;\n\n#define PSB_NUM_PIPE\t\t3\n\nstruct intel_scu_ipc_dev;\n\nstruct drm_psb_private {\n\tstruct drm_device dev;\n\n\tstruct pci_dev *aux_pdev;  \n\tstruct pci_dev *lpc_pdev;  \n\tconst struct psb_ops *ops;\n\tconst struct psb_offset *regmap;\n\n\tstruct child_device_config *child_dev;\n\tint child_dev_num;\n\n\tstruct psb_gtt gtt;\n\n\t \n\tstruct psb_gtt_mm *gtt_mm;\n\tstruct page *scratch_page;\n\tu32 __iomem *gtt_map;\n\tuint32_t stolen_base;\n\tu8 __iomem *vram_addr;\n\tunsigned long vram_stolen_size;\n\tu16 gmch_ctrl;\t\t \n\tu32 pge_ctl;\n\n\tstruct mutex gtt_mutex;\n\tstruct resource *gtt_mem;\t \n\n\tstruct mutex mmap_mutex;\n\n\tstruct psb_mmu_driver *mmu;\n\tstruct psb_mmu_pd *pf_pd;\n\n\t \n\tuint8_t __iomem *sgx_reg;\n\tuint8_t __iomem *vdc_reg;\n\tuint8_t __iomem *aux_reg;  \n\tuint16_t lpc_gpio_base;\n\tuint32_t gatt_free_offset;\n\n\t \n\tuint32_t vdc_irq_mask;\n\tuint32_t pipestat[PSB_NUM_PIPE];\n\n\tspinlock_t irqmask_lock;\n\tbool irq_enabled;\n\n\t \n\tbool pm_initialized;\n\n\t \n\tstruct psb_intel_mode_device mode_dev;\n\tbool modeset;\t \n\n\tstruct drm_crtc *plane_to_crtc_mapping[PSB_NUM_PIPE];\n\tstruct drm_crtc *pipe_to_crtc_mapping[PSB_NUM_PIPE];\n\tuint32_t num_pipe;\n\n\t \n\tuint32_t ospm_base;\n\n\t \n\tu32 fuse_reg_value;\n\tu32 video_device_fuse;\n\n\t \n\tuint8_t platform_rev_id;\n\n\t \n\tstruct intel_gmbus *gmbus;\n\tuint8_t __iomem *gmbus_reg;\n\n\t \n\tint crt_ddc_pin;\n\t \n\tstruct sdvo_device_mapping sdvo_mappings[2];\n\tu32 hotplug_supported_mask;\n\tstruct drm_property *broadcast_rgb_property;\n\tstruct drm_property *force_audio_property;\n\n\t \n\tint backlight_duty_cycle;\t \n\tbool panel_wants_dither;\n\tstruct drm_display_mode *panel_fixed_mode;\n\tstruct drm_display_mode *lfp_lvds_vbt_mode;\n\tstruct drm_display_mode *sdvo_lvds_vbt_mode;\n\n\tstruct bdb_lvds_backlight *lvds_bl;  \n\tstruct gma_i2c_chan *lvds_i2c_bus;  \n\n\t \n\tunsigned int int_tv_support:1;\n\tunsigned int lvds_dither:1;\n\tunsigned int lvds_vbt:1;\n\tunsigned int int_crt_support:1;\n\tunsigned int lvds_use_ssc:1;\n\tint lvds_ssc_freq;\n\tbool is_lvds_on;\n\tbool is_mipi_on;\n\tbool lvds_enabled_in_vbt;\n\tu32 mipi_ctrl_display;\n\n\tunsigned int core_freq;\n\tuint32_t iLVDS_enable;\n\n\t \n\tbool use_msi;\n\tbool has_gct;\n\tstruct oaktrail_gct_data gct_data;\n\n\t \n\tstruct oaktrail_hdmi_dev *hdmi_priv;\n\n\t \n\tstruct psb_save_area regs;\n\n\t \n\tstruct work_struct hotplug_work;\n\n\t \n\tspinlock_t lid_lock;\n\tstruct timer_list lid_timer;\n\tstruct psb_intel_opregion opregion;\n\tu32 lid_last_state;\n\n\t \n\tuint32_t apm_reg;\n\tuint16_t apm_base;\n\n\t \n\tstruct intel_scu_ipc_dev *scu;\n\tstruct backlight_device *backlight_device;\n\tstruct drm_property *backlight_property;\n\tbool backlight_enabled;\n\tint backlight_level;\n\tuint32_t blc_adj1;\n\tuint32_t blc_adj2;\n\n\tbool dsr_enable;\n\tu32 dsr_fb_update;\n\tbool dpi_panel_on[3];\n\tvoid *dsi_configs[2];\n\tu32 bpp;\n\tu32 bpp2;\n\n\tu32 pipeconf[3];\n\tu32 dspcntr[3];\n\n\tbool dplla_96mhz;\t \n\n\tstruct {\n\t\tint rate;\n\t\tint lanes;\n\t\tint preemphasis;\n\t\tint vswing;\n\n\t\tbool initialized;\n\t\tbool support;\n\t\tint bpp;\n\t\tstruct edp_power_seq pps;\n\t} edp;\n\tuint8_t panel_type;\n};\n\nstatic inline struct drm_psb_private *to_drm_psb_private(struct drm_device *dev)\n{\n\treturn container_of(dev, struct drm_psb_private, dev);\n}\n\n \nstruct psb_ops {\n\tconst char *name;\n\tint pipes;\t\t \n\tint crtcs;\t\t \n\tint sgx_offset;\t\t \n\tint hdmi_mask;\t\t \n\tint lvds_mask;\t\t \n\tint sdvo_mask;\t\t \n\tint cursor_needs_phys;   \n\n\t \n\tstruct drm_crtc_helper_funcs const *crtc_helper;\n\tconst struct gma_clock_funcs *clock_funcs;\n\n\t \n\tint (*chip_setup)(struct drm_device *dev);\n\tvoid (*chip_teardown)(struct drm_device *dev);\n\t \n\tvoid (*errata)(struct drm_device *dev);\n\n\t \n\tint (*output_init)(struct drm_device *dev);\n\tint (*hotplug)(struct drm_device *dev);\n\tvoid (*hotplug_enable)(struct drm_device *dev, bool on);\n\t \n\tvoid (*init_pm)(struct drm_device *dev);\n\tint (*save_regs)(struct drm_device *dev);\n\tint (*restore_regs)(struct drm_device *dev);\n\tvoid (*save_crtc)(struct drm_crtc *crtc);\n\tvoid (*restore_crtc)(struct drm_crtc *crtc);\n\tint (*power_up)(struct drm_device *dev);\n\tint (*power_down)(struct drm_device *dev);\n\tvoid (*update_wm)(struct drm_device *dev, struct drm_crtc *crtc);\n\tvoid (*disable_sr)(struct drm_device *dev);\n\n\tvoid (*lvds_bl_power)(struct drm_device *dev, bool on);\n\n\t \n\tint (*backlight_init)(struct drm_device *dev);\n\tvoid (*backlight_set)(struct drm_device *dev, int level);\n\tint (*backlight_get)(struct drm_device *dev);\n\tconst char *backlight_name;\n\n\tint i2c_bus;\t\t \n};\n\n \nextern void psb_lid_timer_init(struct drm_psb_private *dev_priv);\nextern void psb_lid_timer_takedown(struct drm_psb_private *dev_priv);\n\n \nextern void psb_modeset_init(struct drm_device *dev);\nextern void psb_modeset_cleanup(struct drm_device *dev);\n\n \nstruct drm_framebuffer *psb_framebuffer_create(struct drm_device *dev,\n\t\t\t\t\t       const struct drm_mode_fb_cmd2 *mode_cmd,\n\t\t\t\t\t       struct drm_gem_object *obj);\n\n \n#if defined(CONFIG_DRM_FBDEV_EMULATION)\nvoid psb_fbdev_setup(struct drm_psb_private *dev_priv);\n#else\nstatic inline void psb_fbdev_setup(struct drm_psb_private *dev_priv)\n{ }\n#endif\n\n \nint gma_backlight_init(struct drm_device *dev);\nvoid gma_backlight_exit(struct drm_device *dev);\nvoid gma_backlight_disable(struct drm_device *dev);\nvoid gma_backlight_enable(struct drm_device *dev);\nvoid gma_backlight_set(struct drm_device *dev, int v);\n\n \nextern const struct drm_crtc_helper_funcs oaktrail_helper_funcs;\n\n \nextern void oaktrail_lvds_init(struct drm_device *dev,\n\t\t    struct psb_intel_mode_device *mode_dev);\n\n \nextern const struct drm_crtc_helper_funcs psb_intel_helper_funcs;\n\n \nextern const struct drm_connector_helper_funcs\n\t\t\t\t\tpsb_intel_lvds_connector_helper_funcs;\nextern const struct drm_connector_funcs psb_intel_lvds_connector_funcs;\n\n \nextern int psb_gem_dumb_create(struct drm_file *file, struct drm_device *dev,\n\t\t\tstruct drm_mode_create_dumb *args);\n\n \nextern const struct psb_ops psb_chip_ops;\n\n \nextern const struct psb_ops oaktrail_chip_ops;\n\n \nextern const struct psb_ops cdv_chip_ops;\n\n \nstatic inline uint32_t REGISTER_READ(struct drm_device *dev, uint32_t reg)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\treturn ioread32(dev_priv->vdc_reg + reg);\n}\n\nstatic inline uint32_t REGISTER_READ_AUX(struct drm_device *dev, uint32_t reg)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\treturn ioread32(dev_priv->aux_reg + reg);\n}\n\n#define REG_READ(reg)\t       REGISTER_READ(dev, (reg))\n#define REG_READ_AUX(reg)      REGISTER_READ_AUX(dev, (reg))\n\n \nstatic inline uint32_t REGISTER_READ_WITH_AUX(struct drm_device *dev,\n\t\t\t\t\t      uint32_t reg, int aux)\n{\n\tuint32_t val;\n\n\tif (aux)\n\t\tval = REG_READ_AUX(reg);\n\telse\n\t\tval = REG_READ(reg);\n\n\treturn val;\n}\n\n#define REG_READ_WITH_AUX(reg, aux) REGISTER_READ_WITH_AUX(dev, (reg), (aux))\n\nstatic inline void REGISTER_WRITE(struct drm_device *dev, uint32_t reg,\n\t\t\t\t  uint32_t val)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\tiowrite32((val), dev_priv->vdc_reg + (reg));\n}\n\nstatic inline void REGISTER_WRITE_AUX(struct drm_device *dev, uint32_t reg,\n\t\t\t\t      uint32_t val)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\tiowrite32((val), dev_priv->aux_reg + (reg));\n}\n\n#define REG_WRITE(reg, val)\tREGISTER_WRITE(dev, (reg), (val))\n#define REG_WRITE_AUX(reg, val)\tREGISTER_WRITE_AUX(dev, (reg), (val))\n\nstatic inline void REGISTER_WRITE_WITH_AUX(struct drm_device *dev, uint32_t reg,\n\t\t\t\t      uint32_t val, int aux)\n{\n\tif (aux)\n\t\tREG_WRITE_AUX(reg, val);\n\telse\n\t\tREG_WRITE(reg, val);\n}\n\n#define REG_WRITE_WITH_AUX(reg, val, aux) REGISTER_WRITE_WITH_AUX(dev, (reg), (val), (aux))\n\nstatic inline void REGISTER_WRITE16(struct drm_device *dev,\n\t\t\t\t\tuint32_t reg, uint32_t val)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\tiowrite16((val), dev_priv->vdc_reg + (reg));\n}\n\n#define REG_WRITE16(reg, val)\t  REGISTER_WRITE16(dev, (reg), (val))\n\nstatic inline void REGISTER_WRITE8(struct drm_device *dev,\n\t\t\t\t       uint32_t reg, uint32_t val)\n{\n\tstruct drm_psb_private *dev_priv = to_drm_psb_private(dev);\n\tiowrite8((val), dev_priv->vdc_reg + (reg));\n}\n\n#define REG_WRITE8(reg, val)\t\tREGISTER_WRITE8(dev, (reg), (val))\n\n#define PSB_WVDC32(_val, _offs)\t\tiowrite32(_val, dev_priv->vdc_reg + (_offs))\n#define PSB_RVDC32(_offs)\t\tioread32(dev_priv->vdc_reg + (_offs))\n\n#define PSB_RSGX32(_offs)\t\tioread32(dev_priv->sgx_reg + (_offs))\n#define PSB_WSGX32(_val, _offs)\t\tiowrite32(_val, dev_priv->sgx_reg + (_offs))\n\n#define PSB_WMSVDX32(_val, _offs)\tiowrite32(_val, dev_priv->msvdx_reg + (_offs))\n#define PSB_RMSVDX32(_offs)\t\tioread32(dev_priv->msvdx_reg + (_offs))\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}