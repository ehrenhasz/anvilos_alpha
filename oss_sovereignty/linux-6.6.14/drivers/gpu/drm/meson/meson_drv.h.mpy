{
  "module_name": "meson_drv.h",
  "hash_id": "d113927d5e2cc11a0136fee4ab0f7d6c5b866496fb690b440d365e92e7e478d6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/meson/meson_drv.h",
  "human_readable_source": " \n \n\n#ifndef __MESON_DRV_H\n#define __MESON_DRV_H\n\n#include <linux/device.h>\n#include <linux/of.h>\n#include <linux/regmap.h>\n\nstruct drm_crtc;\nstruct drm_device;\nstruct drm_plane;\nstruct meson_drm;\nstruct meson_afbcd_ops;\n\nenum vpu_compatible {\n\tVPU_COMPATIBLE_GXBB = 0,\n\tVPU_COMPATIBLE_GXL  = 1,\n\tVPU_COMPATIBLE_GXM  = 2,\n\tVPU_COMPATIBLE_G12A = 3,\n};\n\nenum {\n\tMESON_ENC_CVBS = 0,\n\tMESON_ENC_HDMI,\n\tMESON_ENC_DSI,\n\tMESON_ENC_LAST,\n};\n\nstruct meson_drm_match_data {\n\tenum vpu_compatible compat;\n\tstruct meson_afbcd_ops *afbcd_ops;\n};\n\nstruct meson_drm_soc_limits {\n\tunsigned int max_hdmi_phy_freq;\n};\n\nstruct meson_drm {\n\tstruct device *dev;\n\tenum vpu_compatible compat;\n\tvoid __iomem *io_base;\n\tstruct regmap *hhi;\n\tint vsync_irq;\n\n\tstruct meson_canvas *canvas;\n\tu8 canvas_id_osd1;\n\tu8 canvas_id_vd1_0;\n\tu8 canvas_id_vd1_1;\n\tu8 canvas_id_vd1_2;\n\n\tstruct drm_device *drm;\n\tstruct drm_crtc *crtc;\n\tstruct drm_plane *primary_plane;\n\tstruct drm_plane *overlay_plane;\n\tvoid *encoders[MESON_ENC_LAST];\n\n\tconst struct meson_drm_soc_limits *limits;\n\n\t \n\tstruct {\n\t\tbool osd1_enabled;\n\t\tbool osd1_interlace;\n\t\tbool osd1_commit;\n\t\tbool osd1_afbcd;\n\t\tuint32_t osd1_ctrl_stat;\n\t\tuint32_t osd1_ctrl_stat2;\n\t\tuint32_t osd1_blk0_cfg[5];\n\t\tuint32_t osd1_blk1_cfg4;\n\t\tuint32_t osd1_blk2_cfg4;\n\t\tuint32_t osd1_addr;\n\t\tuint32_t osd1_stride;\n\t\tuint32_t osd1_height;\n\t\tuint32_t osd1_width;\n\t\tuint32_t osd_sc_ctrl0;\n\t\tuint32_t osd_sc_i_wh_m1;\n\t\tuint32_t osd_sc_o_h_start_end;\n\t\tuint32_t osd_sc_o_v_start_end;\n\t\tuint32_t osd_sc_v_ini_phase;\n\t\tuint32_t osd_sc_v_phase_step;\n\t\tuint32_t osd_sc_h_ini_phase;\n\t\tuint32_t osd_sc_h_phase_step;\n\t\tuint32_t osd_sc_h_ctrl0;\n\t\tuint32_t osd_sc_v_ctrl0;\n\t\tuint32_t osd_blend_din0_scope_h;\n\t\tuint32_t osd_blend_din0_scope_v;\n\t\tuint32_t osb_blend0_size;\n\t\tuint32_t osb_blend1_size;\n\n\t\tbool vd1_enabled;\n\t\tbool vd1_commit;\n\t\tbool vd1_afbc;\n\t\tunsigned int vd1_planes;\n\t\tuint32_t vd1_if0_gen_reg;\n\t\tuint32_t vd1_if0_luma_x0;\n\t\tuint32_t vd1_if0_luma_y0;\n\t\tuint32_t vd1_if0_chroma_x0;\n\t\tuint32_t vd1_if0_chroma_y0;\n\t\tuint32_t vd1_if0_repeat_loop;\n\t\tuint32_t vd1_if0_luma0_rpt_pat;\n\t\tuint32_t vd1_if0_chroma0_rpt_pat;\n\t\tuint32_t vd1_range_map_y;\n\t\tuint32_t vd1_range_map_cb;\n\t\tuint32_t vd1_range_map_cr;\n\t\tuint32_t viu_vd1_fmt_w;\n\t\tuint32_t vd1_if0_canvas0;\n\t\tuint32_t vd1_if0_gen_reg2;\n\t\tuint32_t viu_vd1_fmt_ctrl;\n\t\tuint32_t vd1_addr0;\n\t\tuint32_t vd1_addr1;\n\t\tuint32_t vd1_addr2;\n\t\tuint32_t vd1_stride0;\n\t\tuint32_t vd1_stride1;\n\t\tuint32_t vd1_stride2;\n\t\tuint32_t vd1_height0;\n\t\tuint32_t vd1_height1;\n\t\tuint32_t vd1_height2;\n\t\tuint32_t vd1_afbc_mode;\n\t\tuint32_t vd1_afbc_en;\n\t\tuint32_t vd1_afbc_head_addr;\n\t\tuint32_t vd1_afbc_body_addr;\n\t\tuint32_t vd1_afbc_conv_ctrl;\n\t\tuint32_t vd1_afbc_dec_def_color;\n\t\tuint32_t vd1_afbc_vd_cfmt_ctrl;\n\t\tuint32_t vd1_afbc_vd_cfmt_w;\n\t\tuint32_t vd1_afbc_vd_cfmt_h;\n\t\tuint32_t vd1_afbc_mif_hor_scope;\n\t\tuint32_t vd1_afbc_mif_ver_scope;\n\t\tuint32_t vd1_afbc_size_out;\n\t\tuint32_t vd1_afbc_pixel_hor_scope;\n\t\tuint32_t vd1_afbc_pixel_ver_scope;\n\t\tuint32_t vd1_afbc_size_in;\n\t\tuint32_t vpp_pic_in_height;\n\t\tuint32_t vpp_postblend_vd1_h_start_end;\n\t\tuint32_t vpp_postblend_vd1_v_start_end;\n\t\tuint32_t vpp_hsc_region12_startp;\n\t\tuint32_t vpp_hsc_region34_startp;\n\t\tuint32_t vpp_hsc_region4_endp;\n\t\tuint32_t vpp_hsc_start_phase_step;\n\t\tuint32_t vpp_hsc_region1_phase_slope;\n\t\tuint32_t vpp_hsc_region3_phase_slope;\n\t\tuint32_t vpp_line_in_length;\n\t\tuint32_t vpp_preblend_h_size;\n\t\tuint32_t vpp_vsc_region12_startp;\n\t\tuint32_t vpp_vsc_region34_startp;\n\t\tuint32_t vpp_vsc_region4_endp;\n\t\tuint32_t vpp_vsc_start_phase_step;\n\t\tuint32_t vpp_vsc_ini_phase;\n\t\tuint32_t vpp_vsc_phase_ctrl;\n\t\tuint32_t vpp_hsc_phase_ctrl;\n\t\tuint32_t vpp_blend_vd2_h_start_end;\n\t\tuint32_t vpp_blend_vd2_v_start_end;\n\t} viu;\n\n\tstruct {\n\t\tunsigned int current_mode;\n\t\tbool hdmi_repeat;\n\t\tbool venc_repeat;\n\t\tbool hdmi_use_enci;\n\t} venc;\n\n\tstruct {\n\t\tdma_addr_t addr_dma;\n\t\tuint32_t *addr;\n\t\tunsigned int offset;\n\t} rdma;\n\n\tstruct {\n\t\tstruct meson_afbcd_ops *ops;\n\t\tu64 modifier;\n\t\tu32 format;\n\t} afbcd;\n};\n\nstatic inline int meson_vpu_is_compatible(struct meson_drm *priv,\n\t\t\t\t\t  enum vpu_compatible family)\n{\n\treturn priv->compat == family;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}