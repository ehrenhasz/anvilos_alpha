{
  "module_name": "drm_internal.h",
  "hash_id": "851f77da4fabf66dcdd547b6cb6d97454bc0b55aa8cb5720912d0ad8075df5e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/drm_internal.h",
  "human_readable_source": " \n\n#include <linux/kthread.h>\n\n#include <drm/drm_ioctl.h>\n#include <drm/drm_vblank.h>\n\n#define DRM_IF_MAJOR 1\n#define DRM_IF_MINOR 4\n\n#define DRM_IF_VERSION(maj, min) (maj << 16 | min)\n\nstruct dentry;\nstruct dma_buf;\nstruct iosys_map;\nstruct drm_connector;\nstruct drm_crtc;\nstruct drm_framebuffer;\nstruct drm_gem_object;\nstruct drm_master;\nstruct drm_minor;\nstruct drm_prime_file_private;\nstruct drm_printer;\nstruct drm_vblank_crtc;\n\n \nextern struct mutex drm_global_mutex;\nbool drm_dev_needs_global_mutex(struct drm_device *dev);\nstruct drm_file *drm_file_alloc(struct drm_minor *minor);\nvoid drm_file_free(struct drm_file *file);\nvoid drm_lastclose(struct drm_device *dev);\n\n#ifdef CONFIG_PCI\n\n \nint drm_pci_set_busid(struct drm_device *dev, struct drm_master *master);\n\n#else\n\nstatic inline int drm_pci_set_busid(struct drm_device *dev,\n\t\t\t\t    struct drm_master *master)\n{\n\treturn -EINVAL;\n}\n\n#endif\n\n \nint drm_prime_handle_to_fd_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t struct drm_file *file_priv);\nint drm_prime_fd_to_handle_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t struct drm_file *file_priv);\n\nvoid drm_prime_init_file_private(struct drm_prime_file_private *prime_fpriv);\nvoid drm_prime_destroy_file_private(struct drm_prime_file_private *prime_fpriv);\nvoid drm_prime_remove_buf_handle(struct drm_prime_file_private *prime_fpriv,\n\t\t\t\t uint32_t handle);\n\n \nstruct drm_minor *drm_minor_acquire(unsigned int minor_id);\nvoid drm_minor_release(struct drm_minor *minor);\n\n \nvoid drm_managed_release(struct drm_device *dev);\nvoid drmm_add_final_kfree(struct drm_device *dev, void *container);\n\n \nstatic inline bool drm_vblank_passed(u64 seq, u64 ref)\n{\n\treturn (seq - ref) <= (1 << 23);\n}\n\nvoid drm_vblank_disable_and_save(struct drm_device *dev, unsigned int pipe);\nint drm_vblank_get(struct drm_device *dev, unsigned int pipe);\nvoid drm_vblank_put(struct drm_device *dev, unsigned int pipe);\nu64 drm_vblank_count(struct drm_device *dev, unsigned int pipe);\n\n \nstatic inline void drm_vblank_flush_worker(struct drm_vblank_crtc *vblank)\n{\n\tkthread_flush_worker(vblank->worker);\n}\n\nstatic inline void drm_vblank_destroy_worker(struct drm_vblank_crtc *vblank)\n{\n\tif (vblank->worker)\n\t\tkthread_destroy_worker(vblank->worker);\n}\n\nint drm_vblank_worker_init(struct drm_vblank_crtc *vblank);\nvoid drm_vblank_cancel_pending_works(struct drm_vblank_crtc *vblank);\nvoid drm_handle_vblank_works(struct drm_vblank_crtc *vblank);\n\n \nint drm_wait_vblank_ioctl(struct drm_device *dev, void *data,\n\t\t\t  struct drm_file *filp);\nint drm_legacy_modeset_ctl_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t struct drm_file *file_priv);\n\n \n\n \n#if IS_ENABLED(CONFIG_DRM_LEGACY)\nint drm_legacy_irq_control(struct drm_device *dev, void *data,\n\t\t\t   struct drm_file *file_priv);\n#endif\n\nint drm_crtc_get_sequence_ioctl(struct drm_device *dev, void *data,\n\t\t\t\tstruct drm_file *filp);\n\nint drm_crtc_queue_sequence_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t  struct drm_file *filp);\n\n \nint drm_getmagic(struct drm_device *dev, void *data,\n\t\t struct drm_file *file_priv);\nint drm_authmagic(struct drm_device *dev, void *data,\n\t\t  struct drm_file *file_priv);\nint drm_setmaster_ioctl(struct drm_device *dev, void *data,\n\t\t\tstruct drm_file *file_priv);\nint drm_dropmaster_ioctl(struct drm_device *dev, void *data,\n\t\t\t struct drm_file *file_priv);\nint drm_master_open(struct drm_file *file_priv);\nvoid drm_master_release(struct drm_file *file_priv);\nbool drm_master_internal_acquire(struct drm_device *dev);\nvoid drm_master_internal_release(struct drm_device *dev);\n\n \nextern struct class *drm_class;\n\nint drm_sysfs_init(void);\nvoid drm_sysfs_destroy(void);\nstruct device *drm_sysfs_minor_alloc(struct drm_minor *minor);\nint drm_sysfs_connector_add(struct drm_connector *connector);\nvoid drm_sysfs_connector_remove(struct drm_connector *connector);\n\nvoid drm_sysfs_lease_event(struct drm_device *dev);\n\n \nint drm_gem_init(struct drm_device *dev);\nint drm_gem_handle_create_tail(struct drm_file *file_priv,\n\t\t\t       struct drm_gem_object *obj,\n\t\t\t       u32 *handlep);\nint drm_gem_close_ioctl(struct drm_device *dev, void *data,\n\t\t\tstruct drm_file *file_priv);\nint drm_gem_flink_ioctl(struct drm_device *dev, void *data,\n\t\t\tstruct drm_file *file_priv);\nint drm_gem_open_ioctl(struct drm_device *dev, void *data,\n\t\t       struct drm_file *file_priv);\nvoid drm_gem_open(struct drm_device *dev, struct drm_file *file_private);\nvoid drm_gem_release(struct drm_device *dev, struct drm_file *file_private);\nvoid drm_gem_print_info(struct drm_printer *p, unsigned int indent,\n\t\t\tconst struct drm_gem_object *obj);\n\nint drm_gem_pin(struct drm_gem_object *obj);\nvoid drm_gem_unpin(struct drm_gem_object *obj);\nint drm_gem_vmap(struct drm_gem_object *obj, struct iosys_map *map);\nvoid drm_gem_vunmap(struct drm_gem_object *obj, struct iosys_map *map);\n\n \n#if defined(CONFIG_DEBUG_FS)\nint drm_debugfs_init(struct drm_minor *minor, int minor_id,\n\t\t     struct dentry *root);\nvoid drm_debugfs_cleanup(struct drm_minor *minor);\nvoid drm_debugfs_late_register(struct drm_device *dev);\nvoid drm_debugfs_connector_add(struct drm_connector *connector);\nvoid drm_debugfs_connector_remove(struct drm_connector *connector);\nvoid drm_debugfs_crtc_add(struct drm_crtc *crtc);\nvoid drm_debugfs_crtc_remove(struct drm_crtc *crtc);\nvoid drm_debugfs_crtc_crc_add(struct drm_crtc *crtc);\n#else\nstatic inline int drm_debugfs_init(struct drm_minor *minor, int minor_id,\n\t\t\t\t   struct dentry *root)\n{\n\treturn 0;\n}\n\nstatic inline void drm_debugfs_cleanup(struct drm_minor *minor)\n{\n}\n\nstatic inline void drm_debugfs_late_register(struct drm_device *dev)\n{\n}\n\nstatic inline void drm_debugfs_connector_add(struct drm_connector *connector)\n{\n}\nstatic inline void drm_debugfs_connector_remove(struct drm_connector *connector)\n{\n}\n\nstatic inline void drm_debugfs_crtc_add(struct drm_crtc *crtc)\n{\n}\nstatic inline void drm_debugfs_crtc_remove(struct drm_crtc *crtc)\n{\n}\n\nstatic inline void drm_debugfs_crtc_crc_add(struct drm_crtc *crtc)\n{\n}\n\n#endif\n\ndrm_ioctl_t drm_version;\ndrm_ioctl_t drm_getunique;\ndrm_ioctl_t drm_getclient;\n\n \nvoid drm_syncobj_open(struct drm_file *file_private);\nvoid drm_syncobj_release(struct drm_file *file_private);\nint drm_syncobj_create_ioctl(struct drm_device *dev, void *data,\n\t\t\t     struct drm_file *file_private);\nint drm_syncobj_destroy_ioctl(struct drm_device *dev, void *data,\n\t\t\t      struct drm_file *file_private);\nint drm_syncobj_handle_to_fd_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t   struct drm_file *file_private);\nint drm_syncobj_fd_to_handle_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t   struct drm_file *file_private);\nint drm_syncobj_transfer_ioctl(struct drm_device *dev, void *data,\n\t\t\t       struct drm_file *file_private);\nint drm_syncobj_wait_ioctl(struct drm_device *dev, void *data,\n\t\t\t   struct drm_file *file_private);\nint drm_syncobj_timeline_wait_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t    struct drm_file *file_private);\nint drm_syncobj_eventfd_ioctl(struct drm_device *dev, void *data,\n\t\t\t      struct drm_file *file_private);\nint drm_syncobj_reset_ioctl(struct drm_device *dev, void *data,\n\t\t\t    struct drm_file *file_private);\nint drm_syncobj_signal_ioctl(struct drm_device *dev, void *data,\n\t\t\t     struct drm_file *file_private);\nint drm_syncobj_timeline_signal_ioctl(struct drm_device *dev, void *data,\n\t\t\t\t      struct drm_file *file_private);\nint drm_syncobj_query_ioctl(struct drm_device *dev, void *data,\n\t\t\t    struct drm_file *file_private);\n\n \nvoid drm_framebuffer_print_info(struct drm_printer *p, unsigned int indent,\n\t\t\t\tconst struct drm_framebuffer *fb);\nvoid drm_framebuffer_debugfs_init(struct drm_minor *minor);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}