{
  "module_name": "armada_crtc.h",
  "hash_id": "253ef242c78b28f70009cd598557394c278f7610941a6fa1f19068d6a8d4a709",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/armada/armada_crtc.h",
  "human_readable_source": " \n \n#ifndef ARMADA_CRTC_H\n#define ARMADA_CRTC_H\n\n#include <drm/drm_crtc.h>\n\nstruct armada_gem_object;\n\nstruct armada_regs {\n\tuint32_t offset;\n\tuint32_t mask;\n\tuint32_t val;\n};\n\n#define armada_reg_queue_mod(_r, _i, _v, _m, _o)\t\\\n\tdo {\t\t\t\t\t\\\n\t\tstruct armada_regs *__reg = _r;\t\\\n\t\t__reg[_i].offset = _o;\t\t\\\n\t\t__reg[_i].mask = ~(_m);\t\t\\\n\t\t__reg[_i].val = _v;\t\t\\\n\t\t_i++;\t\t\t\t\\\n\t} while (0)\n\n#define armada_reg_queue_set(_r, _i, _v, _o)\t\\\n\tarmada_reg_queue_mod(_r, _i, _v, ~0, _o)\n\n#define armada_reg_queue_end(_r, _i)\t\t\\\n\tarmada_reg_queue_mod(_r, _i, 0, 0, ~0)\n\nstruct armada_crtc;\nstruct armada_variant;\n\nstruct armada_crtc {\n\tstruct drm_crtc\t\tcrtc;\n\tconst struct armada_variant *variant;\n\tvoid\t\t\t*variant_data;\n\tunsigned\t\tnum;\n\tvoid __iomem\t\t*base;\n\tstruct clk\t\t*clk;\n\tstruct {\n\t\tuint32_t\tspu_v_h_total;\n\t\tuint32_t\tspu_v_porch;\n\t\tuint32_t\tspu_adv_reg;\n\t} v[2];\n\tbool\t\t\tinterlaced;\n\tbool\t\t\tcursor_update;\n\n\tstruct armada_gem_object\t*cursor_obj;\n\tint\t\t\tcursor_x;\n\tint\t\t\tcursor_y;\n\tuint32_t\t\tcursor_hw_pos;\n\tuint32_t\t\tcursor_hw_sz;\n\tuint32_t\t\tcursor_w;\n\tuint32_t\t\tcursor_h;\n\n\tuint32_t\t\tcfg_dumb_ctrl;\n\tuint32_t\t\tspu_iopad_ctrl;\n\n\tspinlock_t\t\tirq_lock;\n\tuint32_t\t\tirq_ena;\n\n\tbool\t\t\tupdate_pending;\n\tstruct drm_pending_vblank_event *event;\n\tstruct armada_regs\tatomic_regs[32];\n\tstruct armada_regs\t*regs;\n\tunsigned int\t\tregs_idx;\n};\n#define drm_to_armada_crtc(c) container_of(c, struct armada_crtc, crtc)\n\nvoid armada_drm_crtc_update_regs(struct armada_crtc *, struct armada_regs *);\n\nstruct armada_clocking_params {\n\tunsigned long permillage_min;\n\tunsigned long permillage_max;\n\tu32 settable;\n\tu32 div_max;\n};\n\nstruct armada_clk_result {\n\tunsigned long desired_clk_hz;\n\tstruct clk *clk;\n\tu32 div;\n};\n\nint armada_crtc_select_clock(struct armada_crtc *dcrtc,\n\t\t\t     struct armada_clk_result *res,\n\t\t\t     const struct armada_clocking_params *params,\n\t\t\t     struct clk *clks[], size_t num_clks,\n\t\t\t     unsigned long desired_khz);\n\nextern struct platform_driver armada_lcd_platform_driver;\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}