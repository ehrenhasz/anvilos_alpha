{
  "module_name": "vmwgfx_msg_arm64.h",
  "hash_id": "06ab5bd17ed5143ac0d257f619c50719256614a5bcb2784bd1511d4085d4875a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/vmwgfx/vmwgfx_msg_arm64.h",
  "human_readable_source": "\n \n#ifndef _VMWGFX_MSG_ARM64_H\n#define _VMWGFX_MSG_ARM64_H\n\n#if defined(__aarch64__)\n\n#define VMWARE_HYPERVISOR_PORT    0x5658\n#define VMWARE_HYPERVISOR_PORT_HB 0x5659\n\n#define VMWARE_HYPERVISOR_HB  BIT(0)\n#define VMWARE_HYPERVISOR_OUT BIT(1)\n\n#define X86_IO_MAGIC 0x86\n\n#define X86_IO_W7_SIZE_SHIFT 0\n#define X86_IO_W7_SIZE_MASK (0x3 << X86_IO_W7_SIZE_SHIFT)\n#define X86_IO_W7_DIR       (1 << 2)\n#define X86_IO_W7_WITH\t    (1 << 3)\n#define X86_IO_W7_STR\t    (1 << 4)\n#define X86_IO_W7_DF\t    (1 << 5)\n#define X86_IO_W7_IMM_SHIFT  5\n#define X86_IO_W7_IMM_MASK  (0xff << X86_IO_W7_IMM_SHIFT)\n\nstatic inline void vmw_port(unsigned long cmd, unsigned long in_ebx,\n\t\t\t    unsigned long in_si, unsigned long in_di,\n\t\t\t    unsigned long flags, unsigned long magic,\n\t\t\t    unsigned long *eax, unsigned long *ebx,\n\t\t\t    unsigned long *ecx, unsigned long *edx,\n\t\t\t    unsigned long *si, unsigned long *di)\n{\n\tregister u64 x0 asm(\"x0\") = magic;\n\tregister u64 x1 asm(\"x1\") = in_ebx;\n\tregister u64 x2 asm(\"x2\") = cmd;\n\tregister u64 x3 asm(\"x3\") = flags | VMWARE_HYPERVISOR_PORT;\n\tregister u64 x4 asm(\"x4\") = in_si;\n\tregister u64 x5 asm(\"x5\") = in_di;\n\n\tregister u64 x7 asm(\"x7\") = ((u64)X86_IO_MAGIC << 32) |\n\t\t\t\t    X86_IO_W7_WITH |\n\t\t\t\t    X86_IO_W7_DIR |\n\t\t\t\t    (2 << X86_IO_W7_SIZE_SHIFT);\n\n\tasm volatile(\"mrs xzr, mdccsr_el0 \\n\\t\"\n\t\t     : \"+r\"(x0), \"+r\"(x1), \"+r\"(x2),\n\t\t       \"+r\"(x3), \"+r\"(x4), \"+r\"(x5)\n\t\t     : \"r\"(x7)\n\t\t     :);\n\t*eax = x0;\n\t*ebx = x1;\n\t*ecx = x2;\n\t*edx = x3;\n\t*si = x4;\n\t*di = x5;\n}\n\nstatic inline void vmw_port_hb(unsigned long cmd, unsigned long in_ecx,\n\t\t\t       unsigned long in_si, unsigned long in_di,\n\t\t\t       unsigned long flags, unsigned long magic,\n\t\t\t       unsigned long bp, u32 w7dir,\n\t\t\t       unsigned long *eax, unsigned long *ebx,\n\t\t\t       unsigned long *ecx, unsigned long *edx,\n\t\t\t       unsigned long *si, unsigned long *di)\n{\n\tregister u64 x0 asm(\"x0\") = magic;\n\tregister u64 x1 asm(\"x1\") = cmd;\n\tregister u64 x2 asm(\"x2\") = in_ecx;\n\tregister u64 x3 asm(\"x3\") = flags | VMWARE_HYPERVISOR_PORT_HB;\n\tregister u64 x4 asm(\"x4\") = in_si;\n\tregister u64 x5 asm(\"x5\") = in_di;\n\tregister u64 x6 asm(\"x6\") = bp;\n\tregister u64 x7 asm(\"x7\") = ((u64)X86_IO_MAGIC << 32) |\n\t\t\t\t    X86_IO_W7_STR |\n\t\t\t\t    X86_IO_W7_WITH |\n\t\t\t\t    w7dir;\n\n\tasm volatile(\"mrs xzr, mdccsr_el0 \\n\\t\"\n\t\t     : \"+r\"(x0), \"+r\"(x1), \"+r\"(x2),\n\t\t       \"+r\"(x3), \"+r\"(x4), \"+r\"(x5)\n\t\t     : \"r\"(x6), \"r\"(x7)\n\t\t     :);\n\t*eax = x0;\n\t*ebx = x1;\n\t*ecx = x2;\n\t*edx = x3;\n\t*si  = x4;\n\t*di  = x5;\n}\n\n#define VMW_PORT(cmd, in_ebx, in_si, in_di, flags, magic, eax, ebx, ecx, edx,  \\\n\t\t si, di)                                                       \\\n\tvmw_port(cmd, in_ebx, in_si, in_di, flags, magic, &eax, &ebx, &ecx,    \\\n\t\t &edx, &si, &di)\n\n#define VMW_PORT_HB_OUT(cmd, in_ecx, in_si, in_di, flags, magic, bp, eax, ebx, \\\n\t\t        ecx, edx, si, di)                                      \\\n\tvmw_port_hb(cmd, in_ecx, in_si, in_di, flags, magic, bp,               \\\n                    0, &eax, &ebx, &ecx, &edx, &si, &di)\n\n#define VMW_PORT_HB_IN(cmd, in_ecx, in_si, in_di, flags, magic, bp, eax, ebx,  \\\n\t\t       ecx, edx, si, di)                                       \\\n\tvmw_port_hb(cmd, in_ecx, in_si, in_di, flags, magic, bp,               \\\n\t\t    X86_IO_W7_DIR, &eax, &ebx, &ecx, &edx, &si, &di)\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}