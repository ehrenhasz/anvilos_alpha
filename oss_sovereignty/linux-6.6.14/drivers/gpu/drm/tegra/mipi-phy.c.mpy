{
  "module_name": "mipi-phy.c",
  "hash_id": "cc4baec21570c6106c66e90151cc6b9230d29a998ece775c93a4e4311c2ba499",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/tegra/mipi-phy.c",
  "human_readable_source": "\n \n\n#include <linux/errno.h>\n#include <linux/kernel.h>\n\n#include \"mipi-phy.h\"\n\n \nint mipi_dphy_timing_get_default(struct mipi_dphy_timing *timing,\n\t\t\t\t unsigned long period)\n{\n\ttiming->clkmiss = 0;\n\ttiming->clkpost = 70 + 52 * period;\n\ttiming->clkpre = 8;\n\ttiming->clkprepare = 65;\n\ttiming->clksettle = 95;\n\ttiming->clktermen = 0;\n\ttiming->clktrail = 80;\n\ttiming->clkzero = 260;\n\ttiming->dtermen = 0;\n\ttiming->eot = 0;\n\ttiming->hsexit = 120;\n\ttiming->hsprepare = 65 + 5 * period;\n\ttiming->hszero = 145 + 5 * period;\n\ttiming->hssettle = 85 + 6 * period;\n\ttiming->hsskip = 40;\n\n\t \n\ttiming->hstrail = max(4 * 8 * period, 60 + 4 * 4 * period);\n\n\ttiming->init = 100000;\n\ttiming->lpx = 60;\n\ttiming->taget = 5 * timing->lpx;\n\ttiming->tago = 4 * timing->lpx;\n\ttiming->tasure = 2 * timing->lpx;\n\ttiming->wakeup = 1000000;\n\n\treturn 0;\n}\n\n \nint mipi_dphy_timing_validate(struct mipi_dphy_timing *timing,\n\t\t\t      unsigned long period)\n{\n\tif (timing->clkmiss > 60)\n\t\treturn -EINVAL;\n\n\tif (timing->clkpost < (60 + 52 * period))\n\t\treturn -EINVAL;\n\n\tif (timing->clkpre < 8)\n\t\treturn -EINVAL;\n\n\tif (timing->clkprepare < 38 || timing->clkprepare > 95)\n\t\treturn -EINVAL;\n\n\tif (timing->clksettle < 95 || timing->clksettle > 300)\n\t\treturn -EINVAL;\n\n\tif (timing->clktermen > 38)\n\t\treturn -EINVAL;\n\n\tif (timing->clktrail < 60)\n\t\treturn -EINVAL;\n\n\tif (timing->clkprepare + timing->clkzero < 300)\n\t\treturn -EINVAL;\n\n\tif (timing->dtermen > 35 + 4 * period)\n\t\treturn -EINVAL;\n\n\tif (timing->eot > 105 + 12 * period)\n\t\treturn -EINVAL;\n\n\tif (timing->hsexit < 100)\n\t\treturn -EINVAL;\n\n\tif (timing->hsprepare < 40 + 4 * period ||\n\t    timing->hsprepare > 85 + 6 * period)\n\t\treturn -EINVAL;\n\n\tif (timing->hsprepare + timing->hszero < 145 + 10 * period)\n\t\treturn -EINVAL;\n\n\tif ((timing->hssettle < 85 + 6 * period) ||\n\t    (timing->hssettle > 145 + 10 * period))\n\t\treturn -EINVAL;\n\n\tif (timing->hsskip < 40 || timing->hsskip > 55 + 4 * period)\n\t\treturn -EINVAL;\n\n\tif (timing->hstrail < max(8 * period, 60 + 4 * period))\n\t\treturn -EINVAL;\n\n\tif (timing->init < 100000)\n\t\treturn -EINVAL;\n\n\tif (timing->lpx < 50)\n\t\treturn -EINVAL;\n\n\tif (timing->taget != 5 * timing->lpx)\n\t\treturn -EINVAL;\n\n\tif (timing->tago != 4 * timing->lpx)\n\t\treturn -EINVAL;\n\n\tif (timing->tasure < timing->lpx || timing->tasure > 2 * timing->lpx)\n\t\treturn -EINVAL;\n\n\tif (timing->wakeup < 1000000)\n\t\treturn -EINVAL;\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}