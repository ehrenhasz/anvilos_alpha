{
  "module_name": "shmob_drm_regs.h",
  "hash_id": "e1e4533d2aea884e8a55af468a3925fc9d61a180be17f92feb45f05416ffc81e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/renesas/shmobile/shmob_drm_regs.h",
  "human_readable_source": " \n \n\n#ifndef __SHMOB_DRM_REGS_H__\n#define __SHMOB_DRM_REGS_H__\n\n#include <linux/io.h>\n#include <linux/jiffies.h>\n\n#include \"shmob_drm_drv.h\"\n\n \n#define LDDCKPAT1R\t\t0x400\n#define LDDCKPAT2R\t\t0x404\n#define LDDCKR\t\t\t0x410\n#define LDDCKR_ICKSEL_BUS\t(0 << 16)\n#define LDDCKR_ICKSEL_MIPI\t(1 << 16)\n#define LDDCKR_ICKSEL_HDMI\t(2 << 16)\n#define LDDCKR_ICKSEL_EXT\t(3 << 16)\n#define LDDCKR_ICKSEL_MASK\t(7 << 16)\n#define LDDCKR_MOSEL\t\t(1 << 6)\n#define LDDCKSTPR\t\t0x414\n#define LDDCKSTPR_DCKSTS\t(1 << 16)\n#define LDDCKSTPR_DCKSTP\t(1 << 0)\n#define LDMT1R\t\t\t0x418\n#define LDMT1R_VPOL\t\t(1 << 28)\n#define LDMT1R_HPOL\t\t(1 << 27)\n#define LDMT1R_DWPOL\t\t(1 << 26)\n#define LDMT1R_DIPOL\t\t(1 << 25)\n#define LDMT1R_DAPOL\t\t(1 << 24)\n#define LDMT1R_HSCNT\t\t(1 << 17)\n#define LDMT1R_DWCNT\t\t(1 << 16)\n#define LDMT1R_IFM\t\t(1 << 12)\n#define LDMT1R_MIFTYP_RGB8\t(0x0 << 0)\n#define LDMT1R_MIFTYP_RGB9\t(0x4 << 0)\n#define LDMT1R_MIFTYP_RGB12A\t(0x5 << 0)\n#define LDMT1R_MIFTYP_RGB12B\t(0x6 << 0)\n#define LDMT1R_MIFTYP_RGB16\t(0x7 << 0)\n#define LDMT1R_MIFTYP_RGB18\t(0xa << 0)\n#define LDMT1R_MIFTYP_RGB24\t(0xb << 0)\n#define LDMT1R_MIFTYP_YCBCR\t(0xf << 0)\n#define LDMT1R_MIFTYP_SYS8A\t(0x0 << 0)\n#define LDMT1R_MIFTYP_SYS8B\t(0x1 << 0)\n#define LDMT1R_MIFTYP_SYS8C\t(0x2 << 0)\n#define LDMT1R_MIFTYP_SYS8D\t(0x3 << 0)\n#define LDMT1R_MIFTYP_SYS9\t(0x4 << 0)\n#define LDMT1R_MIFTYP_SYS12\t(0x5 << 0)\n#define LDMT1R_MIFTYP_SYS16A\t(0x7 << 0)\n#define LDMT1R_MIFTYP_SYS16B\t(0x8 << 0)\n#define LDMT1R_MIFTYP_SYS16C\t(0x9 << 0)\n#define LDMT1R_MIFTYP_SYS18\t(0xa << 0)\n#define LDMT1R_MIFTYP_SYS24\t(0xb << 0)\n#define LDMT1R_MIFTYP_MASK\t(0xf << 0)\n#define LDMT2R\t\t\t0x41c\n#define LDMT2R_CSUP_MASK\t(7 << 26)\n#define LDMT2R_CSUP_SHIFT\t26\n#define LDMT2R_RSV\t\t(1 << 25)\n#define LDMT2R_VSEL\t\t(1 << 24)\n#define LDMT2R_WCSC_MASK\t(0xff << 16)\n#define LDMT2R_WCSC_SHIFT\t16\n#define LDMT2R_WCEC_MASK\t(0xff << 8)\n#define LDMT2R_WCEC_SHIFT\t8\n#define LDMT2R_WCLW_MASK\t(0xff << 0)\n#define LDMT2R_WCLW_SHIFT\t0\n#define LDMT3R\t\t\t0x420\n#define LDMT3R_RDLC_MASK\t(0x3f << 24)\n#define LDMT3R_RDLC_SHIFT\t24\n#define LDMT3R_RCSC_MASK\t(0xff << 16)\n#define LDMT3R_RCSC_SHIFT\t16\n#define LDMT3R_RCEC_MASK\t(0xff << 8)\n#define LDMT3R_RCEC_SHIFT\t8\n#define LDMT3R_RCLW_MASK\t(0xff << 0)\n#define LDMT3R_RCLW_SHIFT\t0\n#define LDDFR\t\t\t0x424\n#define LDDFR_CF1\t\t(1 << 18)\n#define LDDFR_CF0\t\t(1 << 17)\n#define LDDFR_CC\t\t(1 << 16)\n#define LDDFR_YF_420\t\t(0 << 8)\n#define LDDFR_YF_422\t\t(1 << 8)\n#define LDDFR_YF_444\t\t(2 << 8)\n#define LDDFR_YF_MASK\t\t(3 << 8)\n#define LDDFR_PKF_ARGB32\t(0x00 << 0)\n#define LDDFR_PKF_RGB16\t\t(0x03 << 0)\n#define LDDFR_PKF_RGB24\t\t(0x0b << 0)\n#define LDDFR_PKF_MASK\t\t(0x1f << 0)\n#define LDSM1R\t\t\t0x428\n#define LDSM1R_OS\t\t(1 << 0)\n#define LDSM2R\t\t\t0x42c\n#define LDSM2R_OSTRG\t\t(1 << 0)\n#define LDSA1R\t\t\t0x430\n#define LDSA2R\t\t\t0x434\n#define LDMLSR\t\t\t0x438\n#define LDWBFR\t\t\t0x43c\n#define LDWBCNTR\t\t0x440\n#define LDWBAR\t\t\t0x444\n#define LDHCNR\t\t\t0x448\n#define LDHSYNR\t\t\t0x44c\n#define LDVLNR\t\t\t0x450\n#define LDVSYNR\t\t\t0x454\n#define LDHPDR\t\t\t0x458\n#define LDVPDR\t\t\t0x45c\n#define LDPMR\t\t\t0x460\n#define LDPMR_LPS\t\t(3 << 0)\n#define LDINTR\t\t\t0x468\n#define LDINTR_FE\t\t(1 << 10)\n#define LDINTR_VSE\t\t(1 << 9)\n#define LDINTR_VEE\t\t(1 << 8)\n#define LDINTR_FS\t\t(1 << 2)\n#define LDINTR_VSS\t\t(1 << 1)\n#define LDINTR_VES\t\t(1 << 0)\n#define LDINTR_STATUS_MASK\t(0xff << 0)\n#define LDSR\t\t\t0x46c\n#define LDSR_MSS\t\t(1 << 10)\n#define LDSR_MRS\t\t(1 << 8)\n#define LDSR_AS\t\t\t(1 << 1)\n#define LDCNT1R\t\t\t0x470\n#define LDCNT1R_DE\t\t(1 << 0)\n#define LDCNT2R\t\t\t0x474\n#define LDCNT2R_BR\t\t(1 << 8)\n#define LDCNT2R_MD\t\t(1 << 3)\n#define LDCNT2R_SE\t\t(1 << 2)\n#define LDCNT2R_ME\t\t(1 << 1)\n#define LDCNT2R_DO\t\t(1 << 0)\n#define LDRCNTR\t\t\t0x478\n#define LDRCNTR_SRS\t\t(1 << 17)\n#define LDRCNTR_SRC\t\t(1 << 16)\n#define LDRCNTR_MRS\t\t(1 << 1)\n#define LDRCNTR_MRC\t\t(1 << 0)\n#define LDDDSR\t\t\t0x47c\n#define LDDDSR_LS\t\t(1 << 2)\n#define LDDDSR_WS\t\t(1 << 1)\n#define LDDDSR_BS\t\t(1 << 0)\n#define LDHAJR\t\t\t0x4a0\n\n#define LDDWD0R\t\t\t0x800\n#define LDDWDxR_WDACT\t\t(1 << 28)\n#define LDDWDxR_RSW\t\t(1 << 24)\n#define LDDRDR\t\t\t0x840\n#define LDDRDR_RSR\t\t(1 << 24)\n#define LDDRDR_DRD_MASK\t\t(0x3ffff << 0)\n#define LDDWAR\t\t\t0x900\n#define LDDWAR_WA\t\t(1 << 0)\n#define LDDRAR\t\t\t0x904\n#define LDDRAR_RA\t\t(1 << 0)\n\n#define LDBCR\t\t\t0xb00\n#define LDBCR_UPC(n)\t\t(1 << ((n) + 16))\n#define LDBCR_UPF(n)\t\t(1 << ((n) + 8))\n#define LDBCR_UPD(n)\t\t(1 << ((n) + 0))\n#define LDBnBSIFR(n)\t\t(0xb20 + (n) * 0x20 + 0x00)\n#define LDBBSIFR_EN\t\t(1 << 31)\n#define LDBBSIFR_VS\t\t(1 << 29)\n#define LDBBSIFR_BRSEL\t\t(1 << 28)\n#define LDBBSIFR_MX\t\t(1 << 27)\n#define LDBBSIFR_MY\t\t(1 << 26)\n#define LDBBSIFR_CV3\t\t(3 << 24)\n#define LDBBSIFR_CV2\t\t(2 << 24)\n#define LDBBSIFR_CV1\t\t(1 << 24)\n#define LDBBSIFR_CV0\t\t(0 << 24)\n#define LDBBSIFR_CV_MASK\t(3 << 24)\n#define LDBBSIFR_LAY_MASK\t(0xff << 16)\n#define LDBBSIFR_LAY_SHIFT\t16\n#define LDBBSIFR_ROP3_MASK\t(0xff << 16)\n#define LDBBSIFR_ROP3_SHIFT\t16\n#define LDBBSIFR_AL_PL8\t\t(3 << 14)\n#define LDBBSIFR_AL_PL1\t\t(2 << 14)\n#define LDBBSIFR_AL_PK\t\t(1 << 14)\n#define LDBBSIFR_AL_1\t\t(0 << 14)\n#define LDBBSIFR_AL_MASK\t(3 << 14)\n#define LDBBSIFR_SWPL\t\t(1 << 10)\n#define LDBBSIFR_SWPW\t\t(1 << 9)\n#define LDBBSIFR_SWPB\t\t(1 << 8)\n#define LDBBSIFR_RY\t\t(1 << 7)\n#define LDBBSIFR_CHRR_420\t(2 << 0)\n#define LDBBSIFR_CHRR_422\t(1 << 0)\n#define LDBBSIFR_CHRR_444\t(0 << 0)\n#define LDBBSIFR_RPKF_ARGB32\t(0x00 << 0)\n#define LDBBSIFR_RPKF_RGB16\t(0x03 << 0)\n#define LDBBSIFR_RPKF_RGB24\t(0x0b << 0)\n#define LDBBSIFR_RPKF_MASK\t(0x1f << 0)\n#define LDBnBSSZR(n)\t\t(0xb20 + (n) * 0x20 + 0x04)\n#define LDBBSSZR_BVSS_MASK\t(0xfff << 16)\n#define LDBBSSZR_BVSS_SHIFT\t16\n#define LDBBSSZR_BHSS_MASK\t(0xfff << 0)\n#define LDBBSSZR_BHSS_SHIFT\t0\n#define LDBnBLOCR(n)\t\t(0xb20 + (n) * 0x20 + 0x08)\n#define LDBBLOCR_CVLC_MASK\t(0xfff << 16)\n#define LDBBLOCR_CVLC_SHIFT\t16\n#define LDBBLOCR_CHLC_MASK\t(0xfff << 0)\n#define LDBBLOCR_CHLC_SHIFT\t0\n#define LDBnBSMWR(n)\t\t(0xb20 + (n) * 0x20 + 0x0c)\n#define LDBBSMWR_BSMWA_MASK\t(0xffff << 16)\n#define LDBBSMWR_BSMWA_SHIFT\t16\n#define LDBBSMWR_BSMW_MASK\t(0xffff << 0)\n#define LDBBSMWR_BSMW_SHIFT\t0\n#define LDBnBSAYR(n)\t\t(0xb20 + (n) * 0x20 + 0x10)\n#define LDBBSAYR_FG1A_MASK\t(0xff << 24)\n#define LDBBSAYR_FG1A_SHIFT\t24\n#define LDBBSAYR_FG1R_MASK\t(0xff << 16)\n#define LDBBSAYR_FG1R_SHIFT\t16\n#define LDBBSAYR_FG1G_MASK\t(0xff << 8)\n#define LDBBSAYR_FG1G_SHIFT\t8\n#define LDBBSAYR_FG1B_MASK\t(0xff << 0)\n#define LDBBSAYR_FG1B_SHIFT\t0\n#define LDBnBSACR(n)\t\t(0xb20 + (n) * 0x20 + 0x14)\n#define LDBBSACR_FG2A_MASK\t(0xff << 24)\n#define LDBBSACR_FG2A_SHIFT\t24\n#define LDBBSACR_FG2R_MASK\t(0xff << 16)\n#define LDBBSACR_FG2R_SHIFT\t16\n#define LDBBSACR_FG2G_MASK\t(0xff << 8)\n#define LDBBSACR_FG2G_SHIFT\t8\n#define LDBBSACR_FG2B_MASK\t(0xff << 0)\n#define LDBBSACR_FG2B_SHIFT\t0\n#define LDBnBSAAR(n)\t\t(0xb20 + (n) * 0x20 + 0x18)\n#define LDBBSAAR_AP_MASK\t(0xff << 24)\n#define LDBBSAAR_AP_SHIFT\t24\n#define LDBBSAAR_R_MASK\t\t(0xff << 16)\n#define LDBBSAAR_R_SHIFT\t16\n#define LDBBSAAR_GY_MASK\t(0xff << 8)\n#define LDBBSAAR_GY_SHIFT\t8\n#define LDBBSAAR_B_MASK\t\t(0xff << 0)\n#define LDBBSAAR_B_SHIFT\t0\n#define LDBnBPPCR(n)\t\t(0xb20 + (n) * 0x20 + 0x1c)\n#define LDBBPPCR_AP_MASK\t(0xff << 24)\n#define LDBBPPCR_AP_SHIFT\t24\n#define LDBBPPCR_R_MASK\t\t(0xff << 16)\n#define LDBBPPCR_R_SHIFT\t16\n#define LDBBPPCR_GY_MASK\t(0xff << 8)\n#define LDBBPPCR_GY_SHIFT\t8\n#define LDBBPPCR_B_MASK\t\t(0xff << 0)\n#define LDBBPPCR_B_SHIFT\t0\n#define LDBnBBGCL(n)\t\t(0xb10 + (n) * 0x04)\n#define LDBBBGCL_BGA_MASK\t(0xff << 24)\n#define LDBBBGCL_BGA_SHIFT\t24\n#define LDBBBGCL_BGR_MASK\t(0xff << 16)\n#define LDBBBGCL_BGR_SHIFT\t16\n#define LDBBBGCL_BGG_MASK\t(0xff << 8)\n#define LDBBBGCL_BGG_SHIFT\t8\n#define LDBBBGCL_BGB_MASK\t(0xff << 0)\n#define LDBBBGCL_BGB_SHIFT\t0\n\n#define LCDC_SIDE_B_OFFSET\t0x1000\n#define LCDC_MIRROR_OFFSET\t0x2000\n\nstatic inline bool lcdc_is_banked(u32 reg)\n{\n\tswitch (reg) {\n\tcase LDMT1R:\n\tcase LDMT2R:\n\tcase LDMT3R:\n\tcase LDDFR:\n\tcase LDSM1R:\n\tcase LDSA1R:\n\tcase LDSA2R:\n\tcase LDMLSR:\n\tcase LDWBFR:\n\tcase LDWBCNTR:\n\tcase LDWBAR:\n\tcase LDHCNR:\n\tcase LDHSYNR:\n\tcase LDVLNR:\n\tcase LDVSYNR:\n\tcase LDHPDR:\n\tcase LDVPDR:\n\tcase LDHAJR:\n\t\treturn true;\n\tdefault:\n\t\treturn reg >= LDBnBBGCL(0) && reg <= LDBnBPPCR(3);\n\t}\n}\n\nstatic inline void lcdc_write_mirror(struct shmob_drm_device *sdev, u32 reg,\n\t\t\t\t     u32 data)\n{\n\tiowrite32(data, sdev->mmio + reg + LCDC_MIRROR_OFFSET);\n}\n\nstatic inline void lcdc_write(struct shmob_drm_device *sdev, u32 reg, u32 data)\n{\n\tiowrite32(data, sdev->mmio + reg);\n\tif (lcdc_is_banked(reg))\n\t\tiowrite32(data, sdev->mmio + reg + LCDC_SIDE_B_OFFSET);\n}\n\nstatic inline u32 lcdc_read(struct shmob_drm_device *sdev, u32 reg)\n{\n\treturn ioread32(sdev->mmio + reg);\n}\n\nstatic inline int lcdc_wait_bit(struct shmob_drm_device *sdev, u32 reg,\n\t\t\t\tu32 mask, u32 until)\n{\n\tunsigned long timeout = jiffies + msecs_to_jiffies(5);\n\n\twhile ((lcdc_read(sdev, reg) & mask) != until) {\n\t\tif (time_after(jiffies, timeout))\n\t\t\treturn -ETIMEDOUT;\n\t\tcpu_relax();\n\t}\n\n\treturn 0;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}