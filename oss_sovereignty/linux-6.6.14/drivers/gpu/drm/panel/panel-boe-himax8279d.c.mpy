{
  "module_name": "panel-boe-himax8279d.c",
  "hash_id": "4a444e6c99454c0ab367528ff3b2cb4bc60e67b5605e4f7474490f32843b40ed",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/panel/panel-boe-himax8279d.c",
  "human_readable_source": "\n \n\n#include <linux/delay.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n\n#include <linux/gpio/consumer.h>\n#include <linux/regulator/consumer.h>\n\n#include <drm/drm_device.h>\n#include <drm/drm_mipi_dsi.h>\n#include <drm/drm_modes.h>\n#include <drm/drm_panel.h>\n\n#include <video/mipi_display.h>\n\nstruct panel_cmd {\n\tchar cmd;\n\tchar data;\n};\n\nstruct panel_desc {\n\tconst struct drm_display_mode *display_mode;\n\tunsigned int bpc;\n\tunsigned int width_mm;\n\tunsigned int height_mm;\n\n\tunsigned long mode_flags;\n\tenum mipi_dsi_pixel_format format;\n\tunsigned int lanes;\n\tconst struct panel_cmd *on_cmds;\n\tunsigned int on_cmds_num;\n};\n\nstruct panel_info {\n\tstruct drm_panel base;\n\tstruct mipi_dsi_device *link;\n\tconst struct panel_desc *desc;\n\n\tstruct gpio_desc *enable_gpio;\n\tstruct gpio_desc *pp33_gpio;\n\tstruct gpio_desc *pp18_gpio;\n\n\tbool prepared;\n\tbool enabled;\n};\n\nstatic inline struct panel_info *to_panel_info(struct drm_panel *panel)\n{\n\treturn container_of(panel, struct panel_info, base);\n}\n\nstatic void disable_gpios(struct panel_info *pinfo)\n{\n\tgpiod_set_value(pinfo->enable_gpio, 0);\n\tgpiod_set_value(pinfo->pp33_gpio, 0);\n\tgpiod_set_value(pinfo->pp18_gpio, 0);\n}\n\nstatic int send_mipi_cmds(struct drm_panel *panel, const struct panel_cmd *cmds)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tunsigned int i = 0;\n\tint err;\n\n\tfor (i = 0; i < pinfo->desc->on_cmds_num; i++) {\n\t\terr = mipi_dsi_dcs_write_buffer(pinfo->link, &cmds[i],\n\t\t\t\t\t\tsizeof(struct panel_cmd));\n\n\t\tif (err < 0)\n\t\t\treturn err;\n\t}\n\n\treturn 0;\n}\n\nstatic int boe_panel_disable(struct drm_panel *panel)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tint err;\n\n\tif (!pinfo->enabled)\n\t\treturn 0;\n\n\terr = mipi_dsi_dcs_set_display_off(pinfo->link);\n\tif (err < 0) {\n\t\tdev_err(panel->dev, \"failed to set display off: %d\\n\", err);\n\t\treturn err;\n\t}\n\n\tpinfo->enabled = false;\n\n\treturn 0;\n}\n\nstatic int boe_panel_unprepare(struct drm_panel *panel)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tint err;\n\n\tif (!pinfo->prepared)\n\t\treturn 0;\n\n\terr = mipi_dsi_dcs_set_display_off(pinfo->link);\n\tif (err < 0)\n\t\tdev_err(panel->dev, \"failed to set display off: %d\\n\", err);\n\n\terr = mipi_dsi_dcs_enter_sleep_mode(pinfo->link);\n\tif (err < 0)\n\t\tdev_err(panel->dev, \"failed to enter sleep mode: %d\\n\", err);\n\n\t \n\tusleep_range(1000, 2000);\n\n\tdisable_gpios(pinfo);\n\n\tpinfo->prepared = false;\n\n\treturn 0;\n}\n\nstatic int boe_panel_prepare(struct drm_panel *panel)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tint err;\n\n\tif (pinfo->prepared)\n\t\treturn 0;\n\n\tgpiod_set_value(pinfo->pp18_gpio, 1);\n\t \n\tusleep_range(5000, 6000);\n\tgpiod_set_value(pinfo->pp33_gpio, 1);\n\n\t \n\t \n\tusleep_range(14000, 15000);\n\tgpiod_set_value(pinfo->enable_gpio, 1);\n\n\t \n\tusleep_range(1000, 2000);\n\tgpiod_set_value(pinfo->enable_gpio, 0);\n\n\t \n\tusleep_range(1000, 2000);\n\tgpiod_set_value(pinfo->enable_gpio, 1);\n\n\t \n\tusleep_range(5000, 6000);\n\n\t \n\terr = send_mipi_cmds(panel, pinfo->desc->on_cmds);\n\tif (err < 0) {\n\t\tdev_err(panel->dev, \"failed to send DCS Init Code: %d\\n\", err);\n\t\tgoto poweroff;\n\t}\n\n\terr = mipi_dsi_dcs_exit_sleep_mode(pinfo->link);\n\tif (err < 0) {\n\t\tdev_err(panel->dev, \"failed to exit sleep mode: %d\\n\", err);\n\t\tgoto poweroff;\n\t}\n\n\t \n\tusleep_range(120000, 121000);\n\n\terr = mipi_dsi_dcs_set_display_on(pinfo->link);\n\tif (err < 0) {\n\t\tdev_err(panel->dev, \"failed to set display on: %d\\n\", err);\n\t\tgoto poweroff;\n\t}\n\n\t \n\tusleep_range(20000, 21000);\n\n\tpinfo->prepared = true;\n\n\treturn 0;\n\npoweroff:\n\tdisable_gpios(pinfo);\n\treturn err;\n}\n\nstatic int boe_panel_enable(struct drm_panel *panel)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tint ret;\n\n\tif (pinfo->enabled)\n\t\treturn 0;\n\n\tusleep_range(120000, 121000);\n\n\tret = mipi_dsi_dcs_set_display_on(pinfo->link);\n\tif (ret < 0) {\n\t\tdev_err(panel->dev, \"failed to set display on: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tpinfo->enabled = true;\n\n\treturn 0;\n}\n\nstatic int boe_panel_get_modes(struct drm_panel *panel,\n\t\t\t       struct drm_connector *connector)\n{\n\tstruct panel_info *pinfo = to_panel_info(panel);\n\tconst struct drm_display_mode *m = pinfo->desc->display_mode;\n\tstruct drm_display_mode *mode;\n\n\tmode = drm_mode_duplicate(connector->dev, m);\n\tif (!mode) {\n\t\tdev_err(pinfo->base.dev, \"failed to add mode %ux%u@%u\\n\",\n\t\t\tm->hdisplay, m->vdisplay, drm_mode_vrefresh(m));\n\t\treturn -ENOMEM;\n\t}\n\n\tdrm_mode_set_name(mode);\n\n\tdrm_mode_probed_add(connector, mode);\n\n\tconnector->display_info.width_mm = pinfo->desc->width_mm;\n\tconnector->display_info.height_mm = pinfo->desc->height_mm;\n\tconnector->display_info.bpc = pinfo->desc->bpc;\n\n\treturn 1;\n}\n\nstatic const struct drm_panel_funcs panel_funcs = {\n\t.disable = boe_panel_disable,\n\t.unprepare = boe_panel_unprepare,\n\t.prepare = boe_panel_prepare,\n\t.enable = boe_panel_enable,\n\t.get_modes = boe_panel_get_modes,\n};\n\nstatic const struct drm_display_mode default_display_mode = {\n\t.clock = 159420,\n\t.hdisplay = 1200,\n\t.hsync_start = 1200 + 80,\n\t.hsync_end = 1200 + 80 + 60,\n\t.htotal = 1200 + 80 + 60 + 24,\n\t.vdisplay = 1920,\n\t.vsync_start = 1920 + 10,\n\t.vsync_end = 1920 + 10 + 14,\n\t.vtotal = 1920 + 10 + 14 + 4,\n};\n\n \nstatic const struct panel_cmd boe_himax8279d8p_on_cmds[] = {\n\t{ 0xB0, 0x05 },\n\t{ 0xB1, 0xE5 },\n\t{ 0xB3, 0x52 },\n\t{ 0xC0, 0x00 },\n\t{ 0xC2, 0x57 },\n\t{ 0xD9, 0x85 },\n\t{ 0xB0, 0x01 },\n\t{ 0xC8, 0x00 },\n\t{ 0xC9, 0x00 },\n\t{ 0xCC, 0x26 },\n\t{ 0xCD, 0x26 },\n\t{ 0xDC, 0x00 },\n\t{ 0xDD, 0x00 },\n\t{ 0xE0, 0x26 },\n\t{ 0xE1, 0x26 },\n\t{ 0xB0, 0x03 },\n\t{ 0xC3, 0x2A },\n\t{ 0xE7, 0x2A },\n\t{ 0xC5, 0x2A },\n\t{ 0xDE, 0x2A },\n\t{ 0xBC, 0x02 },\n\t{ 0xCB, 0x02 },\n\t{ 0xB0, 0x00 },\n\t{ 0xB6, 0x03 },\n\t{ 0xBA, 0x8B },\n\t{ 0xBF, 0x15 },\n\t{ 0xC0, 0x18 },\n\t{ 0xC2, 0x14 },\n\t{ 0xC3, 0x02 },\n\t{ 0xC4, 0x14 },\n\t{ 0xC5, 0x02 },\n\t{ 0xCC, 0x0A },\n\t{ 0xB0, 0x06 },\n\t{ 0xC0, 0xA5 },\n\t{ 0xD5, 0x20 },\n\t{ 0xC0, 0x00 },\n\t{ 0xB0, 0x02 },\n\t{ 0xC0, 0x00 },\n\t{ 0xC1, 0x02 },\n\t{ 0xC2, 0x06 },\n\t{ 0xC3, 0x16 },\n\t{ 0xC4, 0x0E },\n\t{ 0xC5, 0x18 },\n\t{ 0xC6, 0x26 },\n\t{ 0xC7, 0x32 },\n\t{ 0xC8, 0x3F },\n\t{ 0xC9, 0x3F },\n\t{ 0xCA, 0x3F },\n\t{ 0xCB, 0x3F },\n\t{ 0xCC, 0x3D },\n\t{ 0xCD, 0x2F },\n\t{ 0xCE, 0x2F },\n\t{ 0xCF, 0x2F },\n\t{ 0xD0, 0x07 },\n\t{ 0xD2, 0x00 },\n\t{ 0xD3, 0x02 },\n\t{ 0xD4, 0x06 },\n\t{ 0xD5, 0x12 },\n\t{ 0xD6, 0x0A },\n\t{ 0xD7, 0x14 },\n\t{ 0xD8, 0x22 },\n\t{ 0xD9, 0x2E },\n\t{ 0xDA, 0x3D },\n\t{ 0xDB, 0x3F },\n\t{ 0xDC, 0x3F },\n\t{ 0xDD, 0x3F },\n\t{ 0xDE, 0x3D },\n\t{ 0xDF, 0x2F },\n\t{ 0xE0, 0x2F },\n\t{ 0xE1, 0x2F },\n\t{ 0xE2, 0x07 },\n\t{ 0xB0, 0x07 },\n\t{ 0xB1, 0x18 },\n\t{ 0xB2, 0x19 },\n\t{ 0xB3, 0x2E },\n\t{ 0xB4, 0x52 },\n\t{ 0xB5, 0x72 },\n\t{ 0xB6, 0x8C },\n\t{ 0xB7, 0xBD },\n\t{ 0xB8, 0xEB },\n\t{ 0xB9, 0x47 },\n\t{ 0xBA, 0x96 },\n\t{ 0xBB, 0x1E },\n\t{ 0xBC, 0x90 },\n\t{ 0xBD, 0x93 },\n\t{ 0xBE, 0xFA },\n\t{ 0xBF, 0x56 },\n\t{ 0xC0, 0x8C },\n\t{ 0xC1, 0xB7 },\n\t{ 0xC2, 0xCC },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x08 },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x15 },\n\t{ 0xB3, 0x2D },\n\t{ 0xB4, 0x51 },\n\t{ 0xB5, 0x72 },\n\t{ 0xB6, 0x8D },\n\t{ 0xB7, 0xBE },\n\t{ 0xB8, 0xED },\n\t{ 0xB9, 0x4A },\n\t{ 0xBA, 0x9A },\n\t{ 0xBB, 0x23 },\n\t{ 0xBC, 0x95 },\n\t{ 0xBD, 0x98 },\n\t{ 0xBE, 0xFF },\n\t{ 0xBF, 0x59 },\n\t{ 0xC0, 0x8E },\n\t{ 0xC1, 0xB9 },\n\t{ 0xC2, 0xCD },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x09 },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x2C },\n\t{ 0xB3, 0x36 },\n\t{ 0xB4, 0x53 },\n\t{ 0xB5, 0x73 },\n\t{ 0xB6, 0x8E },\n\t{ 0xB7, 0xC0 },\n\t{ 0xB8, 0xEF },\n\t{ 0xB9, 0x4C },\n\t{ 0xBA, 0x9D },\n\t{ 0xBB, 0x25 },\n\t{ 0xBC, 0x96 },\n\t{ 0xBD, 0x9A },\n\t{ 0xBE, 0x01 },\n\t{ 0xBF, 0x59 },\n\t{ 0xC0, 0x8E },\n\t{ 0xC1, 0xB9 },\n\t{ 0xC2, 0xCD },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xBF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0A },\n\t{ 0xB1, 0x18 },\n\t{ 0xB2, 0x19 },\n\t{ 0xB3, 0x2E },\n\t{ 0xB4, 0x52 },\n\t{ 0xB5, 0x72 },\n\t{ 0xB6, 0x8C },\n\t{ 0xB7, 0xBD },\n\t{ 0xB8, 0xEB },\n\t{ 0xB9, 0x47 },\n\t{ 0xBA, 0x96 },\n\t{ 0xBB, 0x1E },\n\t{ 0xBC, 0x90 },\n\t{ 0xBD, 0x93 },\n\t{ 0xBE, 0xFA },\n\t{ 0xBF, 0x56 },\n\t{ 0xC0, 0x8C },\n\t{ 0xC1, 0xB7 },\n\t{ 0xC2, 0xCC },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0B },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x15 },\n\t{ 0xB3, 0x2D },\n\t{ 0xB4, 0x51 },\n\t{ 0xB5, 0x72 },\n\t{ 0xB6, 0x8D },\n\t{ 0xB7, 0xBE },\n\t{ 0xB8, 0xED },\n\t{ 0xB9, 0x4A },\n\t{ 0xBA, 0x9A },\n\t{ 0xBB, 0x23 },\n\t{ 0xBC, 0x95 },\n\t{ 0xBD, 0x98 },\n\t{ 0xBE, 0xFF },\n\t{ 0xBF, 0x59 },\n\t{ 0xC0, 0x8E },\n\t{ 0xC1, 0xB9 },\n\t{ 0xC2, 0xCD },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0C },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x2C },\n\t{ 0xB3, 0x36 },\n\t{ 0xB4, 0x53 },\n\t{ 0xB5, 0x73 },\n\t{ 0xB6, 0x8E },\n\t{ 0xB7, 0xC0 },\n\t{ 0xB8, 0xEF },\n\t{ 0xB9, 0x4C },\n\t{ 0xBA, 0x9D },\n\t{ 0xBB, 0x25 },\n\t{ 0xBC, 0x96 },\n\t{ 0xBD, 0x9A },\n\t{ 0xBE, 0x01 },\n\t{ 0xBF, 0x59 },\n\t{ 0xC0, 0x8E },\n\t{ 0xC1, 0xB9 },\n\t{ 0xC2, 0xCD },\n\t{ 0xC3, 0xDF },\n\t{ 0xC4, 0xE8 },\n\t{ 0xC5, 0xF0 },\n\t{ 0xC6, 0xF8 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x5A },\n\t{ 0xCC, 0xBF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x04 },\n\t{ 0xB5, 0x02 },\n\t{ 0xB6, 0x01 },\n};\n\nstatic const struct panel_desc boe_himax8279d8p_panel_desc = {\n\t.display_mode = &default_display_mode,\n\t.bpc = 8,\n\t.width_mm = 107,\n\t.height_mm = 172,\n\t.mode_flags = MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_SYNC_PULSE |\n\t\t\tMIPI_DSI_CLOCK_NON_CONTINUOUS | MIPI_DSI_MODE_LPM,\n\t.format = MIPI_DSI_FMT_RGB888,\n\t.lanes = 4,\n\t.on_cmds = boe_himax8279d8p_on_cmds,\n\t.on_cmds_num = 260,\n};\n\n \nstatic const struct panel_cmd boe_himax8279d10p_on_cmds[] = {\n\t{ 0xB0, 0x05 },\n\t{ 0xB1, 0xE5 },\n\t{ 0xB3, 0x52 },\n\t{ 0xB0, 0x00 },\n\t{ 0xB6, 0x03 },\n\t{ 0xBA, 0x8B },\n\t{ 0xBF, 0x1A },\n\t{ 0xC0, 0x0F },\n\t{ 0xC2, 0x0C },\n\t{ 0xC3, 0x02 },\n\t{ 0xC4, 0x0C },\n\t{ 0xC5, 0x02 },\n\t{ 0xB0, 0x01 },\n\t{ 0xE0, 0x26 },\n\t{ 0xE1, 0x26 },\n\t{ 0xDC, 0x00 },\n\t{ 0xDD, 0x00 },\n\t{ 0xCC, 0x26 },\n\t{ 0xCD, 0x26 },\n\t{ 0xC8, 0x00 },\n\t{ 0xC9, 0x00 },\n\t{ 0xD2, 0x03 },\n\t{ 0xD3, 0x03 },\n\t{ 0xE6, 0x04 },\n\t{ 0xE7, 0x04 },\n\t{ 0xC4, 0x09 },\n\t{ 0xC5, 0x09 },\n\t{ 0xD8, 0x0A },\n\t{ 0xD9, 0x0A },\n\t{ 0xC2, 0x0B },\n\t{ 0xC3, 0x0B },\n\t{ 0xD6, 0x0C },\n\t{ 0xD7, 0x0C },\n\t{ 0xC0, 0x05 },\n\t{ 0xC1, 0x05 },\n\t{ 0xD4, 0x06 },\n\t{ 0xD5, 0x06 },\n\t{ 0xCA, 0x07 },\n\t{ 0xCB, 0x07 },\n\t{ 0xDE, 0x08 },\n\t{ 0xDF, 0x08 },\n\t{ 0xB0, 0x02 },\n\t{ 0xC0, 0x00 },\n\t{ 0xC1, 0x0D },\n\t{ 0xC2, 0x17 },\n\t{ 0xC3, 0x26 },\n\t{ 0xC4, 0x31 },\n\t{ 0xC5, 0x1C },\n\t{ 0xC6, 0x2C },\n\t{ 0xC7, 0x33 },\n\t{ 0xC8, 0x31 },\n\t{ 0xC9, 0x37 },\n\t{ 0xCA, 0x37 },\n\t{ 0xCB, 0x37 },\n\t{ 0xCC, 0x39 },\n\t{ 0xCD, 0x2E },\n\t{ 0xCE, 0x2F },\n\t{ 0xCF, 0x2F },\n\t{ 0xD0, 0x07 },\n\t{ 0xD2, 0x00 },\n\t{ 0xD3, 0x0D },\n\t{ 0xD4, 0x17 },\n\t{ 0xD5, 0x26 },\n\t{ 0xD6, 0x31 },\n\t{ 0xD7, 0x3F },\n\t{ 0xD8, 0x3F },\n\t{ 0xD9, 0x3F },\n\t{ 0xDA, 0x3F },\n\t{ 0xDB, 0x37 },\n\t{ 0xDC, 0x37 },\n\t{ 0xDD, 0x37 },\n\t{ 0xDE, 0x39 },\n\t{ 0xDF, 0x2E },\n\t{ 0xE0, 0x2F },\n\t{ 0xE1, 0x2F },\n\t{ 0xE2, 0x07 },\n\t{ 0xB0, 0x03 },\n\t{ 0xC8, 0x0B },\n\t{ 0xC9, 0x07 },\n\t{ 0xC3, 0x00 },\n\t{ 0xE7, 0x00 },\n\t{ 0xC5, 0x2A },\n\t{ 0xDE, 0x2A },\n\t{ 0xCA, 0x43 },\n\t{ 0xC9, 0x07 },\n\t{ 0xE4, 0xC0 },\n\t{ 0xE5, 0x0D },\n\t{ 0xCB, 0x01 },\n\t{ 0xBC, 0x01 },\n\t{ 0xB0, 0x06 },\n\t{ 0xB8, 0xA5 },\n\t{ 0xC0, 0xA5 },\n\t{ 0xC7, 0x0F },\n\t{ 0xD5, 0x32 },\n\t{ 0xB8, 0x00 },\n\t{ 0xC0, 0x00 },\n\t{ 0xBC, 0x00 },\n\t{ 0xB0, 0x07 },\n\t{ 0xB1, 0x00 },\n\t{ 0xB2, 0x05 },\n\t{ 0xB3, 0x10 },\n\t{ 0xB4, 0x22 },\n\t{ 0xB5, 0x36 },\n\t{ 0xB6, 0x4A },\n\t{ 0xB7, 0x6C },\n\t{ 0xB8, 0x9A },\n\t{ 0xB9, 0xD7 },\n\t{ 0xBA, 0x17 },\n\t{ 0xBB, 0x92 },\n\t{ 0xBC, 0x15 },\n\t{ 0xBD, 0x18 },\n\t{ 0xBE, 0x8C },\n\t{ 0xBF, 0x00 },\n\t{ 0xC0, 0x3A },\n\t{ 0xC1, 0x72 },\n\t{ 0xC2, 0x8C },\n\t{ 0xC3, 0xA5 },\n\t{ 0xC4, 0xB1 },\n\t{ 0xC5, 0xBE },\n\t{ 0xC6, 0xCA },\n\t{ 0xC7, 0xD1 },\n\t{ 0xC8, 0xD4 },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x08 },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x05 },\n\t{ 0xB3, 0x11 },\n\t{ 0xB4, 0x24 },\n\t{ 0xB5, 0x39 },\n\t{ 0xB6, 0x4E },\n\t{ 0xB7, 0x72 },\n\t{ 0xB8, 0xA3 },\n\t{ 0xB9, 0xE1 },\n\t{ 0xBA, 0x25 },\n\t{ 0xBB, 0xA8 },\n\t{ 0xBC, 0x2E },\n\t{ 0xBD, 0x32 },\n\t{ 0xBE, 0xAD },\n\t{ 0xBF, 0x28 },\n\t{ 0xC0, 0x63 },\n\t{ 0xC1, 0x9B },\n\t{ 0xC2, 0xB5 },\n\t{ 0xC3, 0xCF },\n\t{ 0xC4, 0xDB },\n\t{ 0xC5, 0xE8 },\n\t{ 0xC6, 0xF5 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x09 },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x04 },\n\t{ 0xB3, 0x0F },\n\t{ 0xB4, 0x22 },\n\t{ 0xB5, 0x37 },\n\t{ 0xB6, 0x4D },\n\t{ 0xB7, 0x71 },\n\t{ 0xB8, 0xA2 },\n\t{ 0xB9, 0xE1 },\n\t{ 0xBA, 0x26 },\n\t{ 0xBB, 0xA9 },\n\t{ 0xBC, 0x2F },\n\t{ 0xBD, 0x33 },\n\t{ 0xBE, 0xAC },\n\t{ 0xBF, 0x24 },\n\t{ 0xC0, 0x5D },\n\t{ 0xC1, 0x94 },\n\t{ 0xC2, 0xAC },\n\t{ 0xC3, 0xC5 },\n\t{ 0xC4, 0xD1 },\n\t{ 0xC5, 0xDC },\n\t{ 0xC6, 0xE8 },\n\t{ 0xC7, 0xED },\n\t{ 0xC8, 0xF0 },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0A },\n\t{ 0xB1, 0x00 },\n\t{ 0xB2, 0x05 },\n\t{ 0xB3, 0x10 },\n\t{ 0xB4, 0x22 },\n\t{ 0xB5, 0x36 },\n\t{ 0xB6, 0x4A },\n\t{ 0xB7, 0x6C },\n\t{ 0xB8, 0x9A },\n\t{ 0xB9, 0xD7 },\n\t{ 0xBA, 0x17 },\n\t{ 0xBB, 0x92 },\n\t{ 0xBC, 0x15 },\n\t{ 0xBD, 0x18 },\n\t{ 0xBE, 0x8C },\n\t{ 0xBF, 0x00 },\n\t{ 0xC0, 0x3A },\n\t{ 0xC1, 0x72 },\n\t{ 0xC2, 0x8C },\n\t{ 0xC3, 0xA5 },\n\t{ 0xC4, 0xB1 },\n\t{ 0xC5, 0xBE },\n\t{ 0xC6, 0xCA },\n\t{ 0xC7, 0xD1 },\n\t{ 0xC8, 0xD4 },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0B },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x05 },\n\t{ 0xB3, 0x11 },\n\t{ 0xB4, 0x24 },\n\t{ 0xB5, 0x39 },\n\t{ 0xB6, 0x4E },\n\t{ 0xB7, 0x72 },\n\t{ 0xB8, 0xA3 },\n\t{ 0xB9, 0xE1 },\n\t{ 0xBA, 0x25 },\n\t{ 0xBB, 0xA8 },\n\t{ 0xBC, 0x2E },\n\t{ 0xBD, 0x32 },\n\t{ 0xBE, 0xAD },\n\t{ 0xBF, 0x28 },\n\t{ 0xC0, 0x63 },\n\t{ 0xC1, 0x9B },\n\t{ 0xC2, 0xB5 },\n\t{ 0xC3, 0xCF },\n\t{ 0xC4, 0xDB },\n\t{ 0xC5, 0xE8 },\n\t{ 0xC6, 0xF5 },\n\t{ 0xC7, 0xFA },\n\t{ 0xC8, 0xFC },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n\t{ 0xB0, 0x0C },\n\t{ 0xB1, 0x04 },\n\t{ 0xB2, 0x04 },\n\t{ 0xB3, 0x0F },\n\t{ 0xB4, 0x22 },\n\t{ 0xB5, 0x37 },\n\t{ 0xB6, 0x4D },\n\t{ 0xB7, 0x71 },\n\t{ 0xB8, 0xA2 },\n\t{ 0xB9, 0xE1 },\n\t{ 0xBA, 0x26 },\n\t{ 0xBB, 0xA9 },\n\t{ 0xBC, 0x2F },\n\t{ 0xBD, 0x33 },\n\t{ 0xBE, 0xAC },\n\t{ 0xBF, 0x24 },\n\t{ 0xC0, 0x5D },\n\t{ 0xC1, 0x94 },\n\t{ 0xC2, 0xAC },\n\t{ 0xC3, 0xC5 },\n\t{ 0xC4, 0xD1 },\n\t{ 0xC5, 0xDC },\n\t{ 0xC6, 0xE8 },\n\t{ 0xC7, 0xED },\n\t{ 0xC8, 0xF0 },\n\t{ 0xC9, 0x00 },\n\t{ 0xCA, 0x00 },\n\t{ 0xCB, 0x16 },\n\t{ 0xCC, 0xAF },\n\t{ 0xCD, 0xFF },\n\t{ 0xCE, 0xFF },\n};\n\nstatic const struct panel_desc boe_himax8279d10p_panel_desc = {\n\t.display_mode = &default_display_mode,\n\t.bpc = 8,\n\t.width_mm = 135,\n\t.height_mm = 216,\n\t.mode_flags = MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_SYNC_PULSE |\n\t\t\tMIPI_DSI_CLOCK_NON_CONTINUOUS | MIPI_DSI_MODE_LPM,\n\t.format = MIPI_DSI_FMT_RGB888,\n\t.lanes = 4,\n\t.on_cmds = boe_himax8279d10p_on_cmds,\n\t.on_cmds_num = 283,\n};\n\nstatic const struct of_device_id panel_of_match[] = {\n\t{\n\t\t.compatible = \"boe,himax8279d8p\",\n\t\t.data = &boe_himax8279d8p_panel_desc,\n\t},\n\t{\n\t\t.compatible = \"boe,himax8279d10p\",\n\t\t.data = &boe_himax8279d10p_panel_desc,\n\t},\n\t{\n\t\t \n\t}\n};\nMODULE_DEVICE_TABLE(of, panel_of_match);\n\nstatic int panel_add(struct panel_info *pinfo)\n{\n\tstruct device *dev = &pinfo->link->dev;\n\tint ret;\n\n\tpinfo->pp18_gpio = devm_gpiod_get(dev, \"pp18\", GPIOD_OUT_HIGH);\n\tif (IS_ERR(pinfo->pp18_gpio)) {\n\t\tret = PTR_ERR(pinfo->pp18_gpio);\n\t\tif (ret != -EPROBE_DEFER)\n\t\t\tdev_err(dev, \"failed to get pp18 gpio: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tpinfo->pp33_gpio = devm_gpiod_get(dev, \"pp33\", GPIOD_OUT_HIGH);\n\tif (IS_ERR(pinfo->pp33_gpio)) {\n\t\tret = PTR_ERR(pinfo->pp33_gpio);\n\t\tif (ret != -EPROBE_DEFER)\n\t\t\tdev_err(dev, \"failed to get pp33 gpio: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tpinfo->enable_gpio = devm_gpiod_get(dev, \"enable\", GPIOD_OUT_HIGH);\n\tif (IS_ERR(pinfo->enable_gpio)) {\n\t\tret = PTR_ERR(pinfo->enable_gpio);\n\t\tif (ret != -EPROBE_DEFER)\n\t\t\tdev_err(dev, \"failed to get enable gpio: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tdrm_panel_init(&pinfo->base, dev, &panel_funcs,\n\t\t       DRM_MODE_CONNECTOR_DSI);\n\n\tret = drm_panel_of_backlight(&pinfo->base);\n\tif (ret)\n\t\treturn ret;\n\n\tdrm_panel_add(&pinfo->base);\n\n\treturn 0;\n}\n\nstatic int panel_probe(struct mipi_dsi_device *dsi)\n{\n\tstruct panel_info *pinfo;\n\tconst struct panel_desc *desc;\n\tint err;\n\n\tpinfo = devm_kzalloc(&dsi->dev, sizeof(*pinfo), GFP_KERNEL);\n\tif (!pinfo)\n\t\treturn -ENOMEM;\n\n\tdesc = of_device_get_match_data(&dsi->dev);\n\tdsi->mode_flags = desc->mode_flags;\n\tdsi->format = desc->format;\n\tdsi->lanes = desc->lanes;\n\tpinfo->desc = desc;\n\n\tpinfo->link = dsi;\n\tmipi_dsi_set_drvdata(dsi, pinfo);\n\n\terr = panel_add(pinfo);\n\tif (err < 0)\n\t\treturn err;\n\n\terr = mipi_dsi_attach(dsi);\n\tif (err < 0)\n\t\tdrm_panel_remove(&pinfo->base);\n\n\treturn err;\n}\n\nstatic void panel_remove(struct mipi_dsi_device *dsi)\n{\n\tstruct panel_info *pinfo = mipi_dsi_get_drvdata(dsi);\n\tint err;\n\n\terr = boe_panel_disable(&pinfo->base);\n\tif (err < 0)\n\t\tdev_err(&dsi->dev, \"failed to disable panel: %d\\n\", err);\n\n\terr = boe_panel_unprepare(&pinfo->base);\n\tif (err < 0)\n\t\tdev_err(&dsi->dev, \"failed to unprepare panel: %d\\n\", err);\n\n\terr = mipi_dsi_detach(dsi);\n\tif (err < 0)\n\t\tdev_err(&dsi->dev, \"failed to detach from DSI host: %d\\n\", err);\n\n\tdrm_panel_remove(&pinfo->base);\n}\n\nstatic void panel_shutdown(struct mipi_dsi_device *dsi)\n{\n\tstruct panel_info *pinfo = mipi_dsi_get_drvdata(dsi);\n\n\tboe_panel_disable(&pinfo->base);\n\tboe_panel_unprepare(&pinfo->base);\n}\n\nstatic struct mipi_dsi_driver panel_driver = {\n\t.driver = {\n\t\t.name = \"panel-boe-himax8279d\",\n\t\t.of_match_table = panel_of_match,\n\t},\n\t.probe = panel_probe,\n\t.remove = panel_remove,\n\t.shutdown = panel_shutdown,\n};\nmodule_mipi_dsi_driver(panel_driver);\n\nMODULE_AUTHOR(\"Jerry Han <jerry.han.hq@gmail.com>\");\nMODULE_DESCRIPTION(\"Boe Himax8279d driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}