{
  "module_name": "panel-samsung-s6e63m0-spi.c",
  "hash_id": "4dc33d026e6516144ea6d2a123e8c8df4f08d88323a369e45be28be1a4a6d834",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/panel/panel-samsung-s6e63m0-spi.c",
  "human_readable_source": "\n\n#include <linux/device.h>\n#include <linux/module.h>\n#include <linux/spi/spi.h>\n#include <linux/delay.h>\n\n#include <drm/drm_mipi_dbi.h>\n#include <drm/drm_print.h>\n\n#include \"panel-samsung-s6e63m0.h\"\n\nstatic const u8 s6e63m0_dbi_read_commands[] = {\n\tMCS_READ_ID1,\n\tMCS_READ_ID2,\n\tMCS_READ_ID3,\n\t0,  \n};\n\nstatic int s6e63m0_spi_dcs_read(struct device *dev, void *trsp,\n\t\t\t\tconst u8 cmd, u8 *data)\n{\n\tstruct mipi_dbi *dbi = trsp;\n\tint ret;\n\n\tret = mipi_dbi_command_read(dbi, cmd, data);\n\tif (ret)\n\t\tdev_err(dev, \"error on DBI read command %02x\\n\", cmd);\n\n\treturn ret;\n}\n\nstatic int s6e63m0_spi_dcs_write(struct device *dev, void *trsp,\n\t\t\t\t const u8 *data, size_t len)\n{\n\tstruct mipi_dbi *dbi = trsp;\n\tint ret;\n\n\tret = mipi_dbi_command_stackbuf(dbi, data[0], (data + 1), (len - 1));\n\tusleep_range(300, 310);\n\n\treturn ret;\n}\n\nstatic int s6e63m0_spi_probe(struct spi_device *spi)\n{\n\tstruct device *dev = &spi->dev;\n\tstruct mipi_dbi *dbi;\n\tint ret;\n\n\tdbi = devm_kzalloc(dev, sizeof(*dbi), GFP_KERNEL);\n\tif (!dbi)\n\t\treturn -ENOMEM;\n\n\tret = mipi_dbi_spi_init(spi, dbi, NULL);\n\tif (ret)\n\t\treturn dev_err_probe(dev, ret, \"MIPI DBI init failed\\n\");\n\t \n\tdbi->read_commands = s6e63m0_dbi_read_commands;\n\n\treturn s6e63m0_probe(dev, dbi, s6e63m0_spi_dcs_read,\n\t\t\t     s6e63m0_spi_dcs_write, false);\n}\n\nstatic void s6e63m0_spi_remove(struct spi_device *spi)\n{\n\ts6e63m0_remove(&spi->dev);\n}\n\nstatic const struct of_device_id s6e63m0_spi_of_match[] = {\n\t{ .compatible = \"samsung,s6e63m0\" },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, s6e63m0_spi_of_match);\n\nstatic struct spi_driver s6e63m0_spi_driver = {\n\t.probe\t\t\t= s6e63m0_spi_probe,\n\t.remove\t\t\t= s6e63m0_spi_remove,\n\t.driver\t\t\t= {\n\t\t.name\t\t= \"panel-samsung-s6e63m0\",\n\t\t.of_match_table = s6e63m0_spi_of_match,\n\t},\n};\nmodule_spi_driver(s6e63m0_spi_driver);\n\nMODULE_AUTHOR(\"Pawe\u0142 Chmiel <pawel.mikolaj.chmiel@gmail.com>\");\nMODULE_DESCRIPTION(\"s6e63m0 LCD SPI Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}