{
  "module_name": "drm_dsc_helper.c",
  "hash_id": "3d37ca5e0d5a35a47a5f9dd91e475a18f18faf1b698dbd5038f0a823e46fda55",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/display/drm_dsc_helper.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/errno.h>\n#include <linux/byteorder/generic.h>\n\n#include <drm/display/drm_dp_helper.h>\n#include <drm/display/drm_dsc_helper.h>\n#include <drm/drm_print.h>\n\n \n\n \nvoid drm_dsc_dp_pps_header_init(struct dp_sdp_header *pps_header)\n{\n\tmemset(pps_header, 0, sizeof(*pps_header));\n\n\tpps_header->HB1 = DP_SDP_PPS;\n\tpps_header->HB2 = DP_SDP_PPS_HEADER_PAYLOAD_BYTES_MINUS_1;\n}\nEXPORT_SYMBOL(drm_dsc_dp_pps_header_init);\n\n \nint drm_dsc_dp_rc_buffer_size(u8 rc_buffer_block_size, u8 rc_buffer_size)\n{\n\tint size = 1024 * (rc_buffer_size + 1);\n\n\tswitch (rc_buffer_block_size) {\n\tcase DP_DSC_RC_BUF_BLK_SIZE_1:\n\t\treturn 1 * size;\n\tcase DP_DSC_RC_BUF_BLK_SIZE_4:\n\t\treturn 4 * size;\n\tcase DP_DSC_RC_BUF_BLK_SIZE_16:\n\t\treturn 16 * size;\n\tcase DP_DSC_RC_BUF_BLK_SIZE_64:\n\t\treturn 64 * size;\n\tdefault:\n\t\treturn 0;\n\t}\n}\nEXPORT_SYMBOL(drm_dsc_dp_rc_buffer_size);\n\n \nvoid drm_dsc_pps_payload_pack(struct drm_dsc_picture_parameter_set *pps_payload,\n\t\t\t\tconst struct drm_dsc_config *dsc_cfg)\n{\n\tint i;\n\n\t \n\tBUILD_BUG_ON(sizeof(*pps_payload) !=\n\t\t     DP_SDP_PPS_HEADER_PAYLOAD_BYTES_MINUS_1 + 1);\n\n\tmemset(pps_payload, 0, sizeof(*pps_payload));\n\n\t \n\tpps_payload->dsc_version =\n\t\tdsc_cfg->dsc_version_minor |\n\t\tdsc_cfg->dsc_version_major << DSC_PPS_VERSION_MAJOR_SHIFT;\n\n\t \n\n\t \n\tpps_payload->pps_3 =\n\t\tdsc_cfg->line_buf_depth |\n\t\tdsc_cfg->bits_per_component << DSC_PPS_BPC_SHIFT;\n\n\t \n\tpps_payload->pps_4 =\n\t\t((dsc_cfg->bits_per_pixel & DSC_PPS_BPP_HIGH_MASK) >>\n\t\t DSC_PPS_MSB_SHIFT) |\n\t\tdsc_cfg->vbr_enable << DSC_PPS_VBR_EN_SHIFT |\n\t\tdsc_cfg->simple_422 << DSC_PPS_SIMPLE422_SHIFT |\n\t\tdsc_cfg->convert_rgb << DSC_PPS_CONVERT_RGB_SHIFT |\n\t\tdsc_cfg->block_pred_enable << DSC_PPS_BLOCK_PRED_EN_SHIFT;\n\n\t \n\tpps_payload->bits_per_pixel_low =\n\t\t(dsc_cfg->bits_per_pixel & DSC_PPS_LSB_MASK);\n\n\t \n\n\t \n\tpps_payload->pic_height = cpu_to_be16(dsc_cfg->pic_height);\n\n\t \n\tpps_payload->pic_width = cpu_to_be16(dsc_cfg->pic_width);\n\n\t \n\tpps_payload->slice_height = cpu_to_be16(dsc_cfg->slice_height);\n\n\t \n\tpps_payload->slice_width = cpu_to_be16(dsc_cfg->slice_width);\n\n\t \n\tpps_payload->chunk_size = cpu_to_be16(dsc_cfg->slice_chunk_size);\n\n\t \n\tpps_payload->initial_xmit_delay_high =\n\t\t((dsc_cfg->initial_xmit_delay &\n\t\t  DSC_PPS_INIT_XMIT_DELAY_HIGH_MASK) >>\n\t\t DSC_PPS_MSB_SHIFT);\n\n\t \n\tpps_payload->initial_xmit_delay_low =\n\t\t(dsc_cfg->initial_xmit_delay & DSC_PPS_LSB_MASK);\n\n\t \n\tpps_payload->initial_dec_delay =\n\t\tcpu_to_be16(dsc_cfg->initial_dec_delay);\n\n\t \n\n\t \n\tpps_payload->initial_scale_value =\n\t\tdsc_cfg->initial_scale_value;\n\n\t \n\tpps_payload->scale_increment_interval =\n\t\tcpu_to_be16(dsc_cfg->scale_increment_interval);\n\n\t \n\tpps_payload->scale_decrement_interval_high =\n\t\t((dsc_cfg->scale_decrement_interval &\n\t\t  DSC_PPS_SCALE_DEC_INT_HIGH_MASK) >>\n\t\t DSC_PPS_MSB_SHIFT);\n\n\t \n\tpps_payload->scale_decrement_interval_low =\n\t\t(dsc_cfg->scale_decrement_interval & DSC_PPS_LSB_MASK);\n\n\t \n\n\t \n\tpps_payload->first_line_bpg_offset =\n\t\tdsc_cfg->first_line_bpg_offset;\n\n\t \n\tpps_payload->nfl_bpg_offset =\n\t\tcpu_to_be16(dsc_cfg->nfl_bpg_offset);\n\n\t \n\tpps_payload->slice_bpg_offset =\n\t\tcpu_to_be16(dsc_cfg->slice_bpg_offset);\n\n\t \n\tpps_payload->initial_offset =\n\t\tcpu_to_be16(dsc_cfg->initial_offset);\n\n\t \n\tpps_payload->final_offset = cpu_to_be16(dsc_cfg->final_offset);\n\n\t \n\tpps_payload->flatness_min_qp = dsc_cfg->flatness_min_qp;\n\n\t \n\tpps_payload->flatness_max_qp = dsc_cfg->flatness_max_qp;\n\n\t \n\tpps_payload->rc_model_size = cpu_to_be16(dsc_cfg->rc_model_size);\n\n\t \n\tpps_payload->rc_edge_factor = DSC_RC_EDGE_FACTOR_CONST;\n\n\t \n\tpps_payload->rc_quant_incr_limit0 =\n\t\tdsc_cfg->rc_quant_incr_limit0;\n\n\t \n\tpps_payload->rc_quant_incr_limit1 =\n\t\tdsc_cfg->rc_quant_incr_limit1;\n\n\t \n\tpps_payload->rc_tgt_offset = DSC_RC_TGT_OFFSET_LO_CONST |\n\t\tDSC_RC_TGT_OFFSET_HI_CONST << DSC_PPS_RC_TGT_OFFSET_HI_SHIFT;\n\n\t \n\tfor (i = 0; i < DSC_NUM_BUF_RANGES - 1; i++)\n\t\tpps_payload->rc_buf_thresh[i] =\n\t\t\tdsc_cfg->rc_buf_thresh[i];\n\n\t \n\t \n\tfor (i = 0; i < DSC_NUM_BUF_RANGES; i++) {\n\t\tpps_payload->rc_range_parameters[i] =\n\t\t\tcpu_to_be16((dsc_cfg->rc_range_params[i].range_min_qp <<\n\t\t\t\t     DSC_PPS_RC_RANGE_MINQP_SHIFT) |\n\t\t\t\t    (dsc_cfg->rc_range_params[i].range_max_qp <<\n\t\t\t\t     DSC_PPS_RC_RANGE_MAXQP_SHIFT) |\n\t\t\t\t    (dsc_cfg->rc_range_params[i].range_bpg_offset));\n\t}\n\n\t \n\tpps_payload->native_422_420 = dsc_cfg->native_422 |\n\t\tdsc_cfg->native_420 << DSC_PPS_NATIVE_420_SHIFT;\n\n\t \n\tpps_payload->second_line_bpg_offset =\n\t\tdsc_cfg->second_line_bpg_offset;\n\n\t \n\tpps_payload->nsl_bpg_offset =\n\t\tcpu_to_be16(dsc_cfg->nsl_bpg_offset);\n\n\t \n\tpps_payload->second_line_offset_adj =\n\t\tcpu_to_be16(dsc_cfg->second_line_offset_adj);\n\n\t \n}\nEXPORT_SYMBOL(drm_dsc_pps_payload_pack);\n\n \nvoid drm_dsc_set_const_params(struct drm_dsc_config *vdsc_cfg)\n{\n\tif (!vdsc_cfg->rc_model_size)\n\t\tvdsc_cfg->rc_model_size = DSC_RC_MODEL_SIZE_CONST;\n\tvdsc_cfg->rc_edge_factor = DSC_RC_EDGE_FACTOR_CONST;\n\tvdsc_cfg->rc_tgt_offset_high = DSC_RC_TGT_OFFSET_HI_CONST;\n\tvdsc_cfg->rc_tgt_offset_low = DSC_RC_TGT_OFFSET_LO_CONST;\n\n\tif (vdsc_cfg->bits_per_component <= 10)\n\t\tvdsc_cfg->mux_word_size = DSC_MUX_WORD_SIZE_8_10_BPC;\n\telse\n\t\tvdsc_cfg->mux_word_size = DSC_MUX_WORD_SIZE_12_BPC;\n}\nEXPORT_SYMBOL(drm_dsc_set_const_params);\n\n \nstatic const u16 drm_dsc_rc_buf_thresh[] = {\n\t896, 1792, 2688, 3584, 4480, 5376, 6272, 6720, 7168, 7616,\n\t7744, 7872, 8000, 8064\n};\n\n \nvoid drm_dsc_set_rc_buf_thresh(struct drm_dsc_config *vdsc_cfg)\n{\n\tint i;\n\n\tBUILD_BUG_ON(ARRAY_SIZE(drm_dsc_rc_buf_thresh) !=\n\t\t     DSC_NUM_BUF_RANGES - 1);\n\tBUILD_BUG_ON(ARRAY_SIZE(drm_dsc_rc_buf_thresh) !=\n\t\t     ARRAY_SIZE(vdsc_cfg->rc_buf_thresh));\n\n\tfor (i = 0; i < ARRAY_SIZE(drm_dsc_rc_buf_thresh); i++)\n\t\tvdsc_cfg->rc_buf_thresh[i] = drm_dsc_rc_buf_thresh[i] >> 6;\n\n\t \n\tif (vdsc_cfg->bits_per_pixel == 6 << 4) {\n\t\tvdsc_cfg->rc_buf_thresh[12] = 7936 >> 6;\n\t\tvdsc_cfg->rc_buf_thresh[13] = 8000 >> 6;\n\t}\n}\nEXPORT_SYMBOL(drm_dsc_set_rc_buf_thresh);\n\nstruct rc_parameters {\n\tu16 initial_xmit_delay;\n\tu8 first_line_bpg_offset;\n\tu16 initial_offset;\n\tu8 flatness_min_qp;\n\tu8 flatness_max_qp;\n\tu8 rc_quant_incr_limit0;\n\tu8 rc_quant_incr_limit1;\n\tstruct drm_dsc_rc_range_parameters rc_range_params[DSC_NUM_BUF_RANGES];\n};\n\nstruct rc_parameters_data {\n\tu8 bpp;\n\tu8 bpc;\n\tstruct rc_parameters params;\n};\n\n#define DSC_BPP(bpp)\t((bpp) << 4)\n\n \nstatic const struct rc_parameters_data rc_parameters_pre_scr[] = {\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 8,\n\t\t{ 683, 15, 6144, 3, 13, 11, 11, {\n\t\t\t{ 0, 2, 0 }, { 1, 4, -2 }, { 3, 6, -2 }, { 4, 6, -4 },\n\t\t\t{ 5, 7, -6 }, { 5, 7, -6 }, { 6, 7, -6 }, { 6, 8, -8 },\n\t\t\t{ 7, 9, -8 }, { 8, 10, -10 }, { 9, 11, -10 }, { 10, 12, -12 },\n\t\t\t{ 10, 13, -12 }, { 12, 14, -12 }, { 15, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 8,\n\t\t{ 512, 12, 6144, 3, 12, 11, 11, {\n\t\t\t{ 0, 4, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 10, -10 }, { 5, 11, -10 }, { 5, 12, -12 },\n\t\t\t{ 5, 13, -12 }, { 7, 13, -12 }, { 13, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 10,\n\t\t{ 512, 12, 6144, 7, 16, 15, 15, {\n\t\t\t \n\t\t\t{ 0, 4, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 5, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 14, -10 }, { 9, 15, -10 }, { 9, 16, -12 },\n\t\t\t{ 9, 17, -12 }, { 11, 17, -12 }, { 17, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 12,\n\t\t{ 512, 12, 6144, 11, 20, 19, 19, {\n\t\t\t{ 0, 12, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 9, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 18, -10 }, { 13, 19, -10 },\n\t\t\t{ 13, 20, -12 }, { 13, 21, -12 }, { 15, 21, -12 },\n\t\t\t{ 21, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 8,\n\t\t{ 410, 12, 5632, 3, 12, 11, 11, {\n\t\t\t{ 0, 3, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 2, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 9, -10 }, { 5, 10, -10 }, { 5, 11, -10 },\n\t\t\t{ 5, 12, -12 }, { 7, 13, -12 }, { 13, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 10,\n\t\t{ 410, 12, 5632, 7, 16, 15, 15, {\n\t\t\t{ 0, 7, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 6, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 13, -10 }, { 9, 14, -10 }, { 9, 15, -10 },\n\t\t\t{ 9, 16, -12 }, { 11, 17, -12 }, { 17, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 12,\n\t\t{ 410, 12, 5632, 11, 20, 19, 19, {\n\t\t\t{ 0, 11, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 10, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 17, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 19, -10 }, { 13, 20, -12 }, { 15, 21, -12 },\n\t\t\t{ 21, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 8,\n\t\t{ 341, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 2, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 10, -10 }, { 5, 11, -10 },\n\t\t\t{ 5, 12, -12 }, { 5, 13, -12 }, { 7, 13, -12 }, { 13, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 10,\n\t\t{ 341, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 2 }, { 2, 5, 0 }, { 3, 7, 0 }, { 4, 8, -2 },\n\t\t\t{ 6, 9, -4 }, { 7, 10, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 14, -10 }, { 9, 15, -10 }, { 9, 16, -12 },\n\t\t\t{ 9, 17, -12 }, { 11, 17, -12 }, { 17, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 12,\n\t\t{ 341, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 6, 2 }, { 4, 9, 0 }, { 7, 11, 0 }, { 8, 12, -2 },\n\t\t\t{ 10, 13, -4 }, { 11, 14, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 18, -10 }, { 13, 19, -10 },\n\t\t\t{ 13, 20, -12 }, { 13, 21, -12 }, { 15, 21, -12 },\n\t\t\t{ 21, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 8,\n\t\t{ 273, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 0, 10 }, { 0, 1, 8 }, { 0, 1, 6 }, { 0, 2, 4 },\n\t\t\t{ 1, 2, 2 }, { 1, 3, 0 }, { 1, 4, -2 }, { 2, 4, -4 },\n\t\t\t{ 3, 4, -6 }, { 3, 5, -8 }, { 4, 6, -10 }, { 5, 7, -10 },\n\t\t\t{ 5, 8, -12 }, { 7, 13, -12 }, { 13, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 10,\n\t\t{ 273, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 10 }, { 2, 5, 8 }, { 3, 5, 6 }, { 4, 6, 4 },\n\t\t\t{ 5, 6, 2 }, { 5, 7, 0 }, { 5, 8, -2 }, { 6, 8, -4 },\n\t\t\t{ 7, 8, -6 }, { 7, 9, -8 }, { 8, 10, -10 }, { 9, 11, -10 },\n\t\t\t{ 9, 12, -12 }, { 11, 17, -12 }, { 17, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 12,\n\t\t{ 273, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 4, 10 }, { 2, 7, 8 }, { 4, 9, 6 }, { 6, 11, 4 },\n\t\t\t{ 9, 11, 2 }, { 9, 11, 0 }, { 9, 12, -2 }, { 10, 12, -4 },\n\t\t\t{ 11, 12, -6 }, { 11, 13, -8 }, { 12, 14, -10 },\n\t\t\t{ 13, 15, -10 }, { 13, 16, -12 }, { 15, 21, -12 },\n\t\t\t{ 21, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{   }\n};\n\n \nstatic const struct rc_parameters_data rc_parameters_1_2_444[] = {\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 8,\n\t\t{ 768, 15, 6144, 3, 13, 11, 11, {\n\t\t\t{ 0, 4, 0 }, { 1, 6, -2 }, { 3, 8, -2 }, { 4, 8, -4 },\n\t\t\t{ 5, 9, -6 }, { 5, 9, -6 }, { 6, 9, -6 }, { 6, 10, -8 },\n\t\t\t{ 7, 11, -8 }, { 8, 12, -10 }, { 9, 12, -10 }, { 10, 12, -12 },\n\t\t\t{ 10, 12, -12 }, { 11, 12, -12 }, { 13, 14, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 10,\n\t\t{ 768, 15, 6144, 7, 17, 15, 15, {\n\t\t\t{ 0, 8, 0 }, { 3, 10, -2 }, { 7, 12, -2 }, { 8, 12, -4 },\n\t\t\t{ 9, 13, -6 }, { 9, 13, -6 }, { 10, 13, -6 }, { 10, 14, -8 },\n\t\t\t{ 11, 15, -8 }, { 12, 16, -10 }, { 13, 16, -10 },\n\t\t\t{ 14, 16, -12 }, { 14, 16, -12 }, { 15, 16, -12 },\n\t\t\t{ 17, 18, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 12,\n\t\t{ 768, 15, 6144, 11, 21, 19, 19, {\n\t\t\t{ 0, 12, 0 }, { 5, 14, -2 }, { 11, 16, -2 }, { 12, 16, -4 },\n\t\t\t{ 13, 17, -6 }, { 13, 17, -6 }, { 14, 17, -6 }, { 14, 18, -8 },\n\t\t\t{ 15, 19, -8 }, { 16, 20, -10 }, { 17, 20, -10 },\n\t\t\t{ 18, 20, -12 }, { 18, 20, -12 }, { 19, 20, -12 },\n\t\t\t{ 21, 22, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 14,\n\t\t{ 768, 15, 6144, 15, 25, 23, 23, {\n\t\t\t{ 0, 16, 0 }, { 7, 18, -2 }, { 15, 20, -2 }, { 16, 20, -4 },\n\t\t\t{ 17, 21, -6 }, { 17, 21, -6 }, { 18, 21, -6 }, { 18, 22, -8 },\n\t\t\t{ 19, 23, -8 }, { 20, 24, -10 }, { 21, 24, -10 },\n\t\t\t{ 22, 24, -12 }, { 22, 24, -12 }, { 23, 24, -12 },\n\t\t\t{ 25, 26, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 16,\n\t\t{ 768, 15, 6144, 19, 29, 27, 27, {\n\t\t\t{ 0, 20, 0 }, { 9, 22, -2 }, { 19, 24, -2 }, { 20, 24, -4 },\n\t\t\t{ 21, 25, -6 }, { 21, 25, -6 }, { 22, 25, -6 }, { 22, 26, -8 },\n\t\t\t{ 23, 27, -8 }, { 24, 28, -10 }, { 25, 28, -10 },\n\t\t\t{ 26, 28, -12 }, { 26, 28, -12 }, { 27, 28, -12 },\n\t\t\t{ 29, 30, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 8,\n\t\t{ 512, 12, 6144, 3, 12, 11, 11, {\n\t\t\t{ 0, 4, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 10, -10 }, { 5, 10, -10 }, { 5, 11, -12 },\n\t\t\t{ 5, 11, -12 }, { 9, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 10,\n\t\t{ 512, 12, 6144, 7, 16, 15, 15, {\n\t\t\t{ 0, 8, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 5, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 14, -10 }, { 9, 14, -10 }, { 9, 15, -12 },\n\t\t\t{ 9, 15, -12 }, { 13, 16, -12 }, { 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 12,\n\t\t{ 512, 12, 6144, 11, 20, 19, 19, {\n\t\t\t{ 0, 12, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 9, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 18, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 19, -12 }, { 13, 19, -12 }, { 17, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 14,\n\t\t{ 512, 12, 6144, 15, 24, 23, 23, {\n\t\t\t{ 0, 12, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 12, 17, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 22, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 23, -12 }, { 17, 23, -12 }, { 21, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 16,\n\t\t{ 512, 12, 6144, 19, 28, 27, 27, {\n\t\t\t{ 0, 12, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 15, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 26, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 27, -12 }, { 21, 27, -12 }, { 25, 28, -12 },\n\t\t\t{ 28, 29, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 8,\n\t\t{ 410, 15, 5632, 3, 12, 11, 11, {\n\t\t\t{ 0, 3, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 2, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 9, -10 }, { 5, 10, -10 }, { 5, 10, -10 },\n\t\t\t{ 5, 11, -12 }, { 7, 11, -12 }, { 11, 12, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 10,\n\t\t{ 410, 15, 5632, 7, 16, 15, 15, {\n\t\t\t{ 0, 7, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 6, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 13, -10 }, { 9, 14, -10 }, { 9, 14, -10 },\n\t\t\t{ 9, 15, -12 }, { 11, 15, -12 }, { 15, 16, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 12,\n\t\t{ 410, 15, 5632, 11, 20, 19, 19, {\n\t\t\t{ 0, 11, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 10, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 17, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 18, -10 }, { 13, 19, -12 }, { 15, 19, -12 },\n\t\t\t{ 19, 20, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 14,\n\t\t{ 410, 15, 5632, 15, 24, 23, 23, {\n\t\t\t{ 0, 11, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 13, 18, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 21, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 22, -10 }, { 17, 23, -12 }, { 19, 23, -12 },\n\t\t\t{ 23, 24, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 16,\n\t\t{ 410, 15, 5632, 19, 28, 27, 27, {\n\t\t\t{ 0, 11, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 16, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 25, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 26, -10 }, { 21, 27, -12 }, { 23, 27, -12 },\n\t\t\t{ 27, 28, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 8,\n\t\t{ 341, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 2, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 8, -8 }, { 3, 9, -10 }, { 5, 9, -10 }, { 5, 9, -12 },\n\t\t\t{ 5, 9, -12 }, { 7, 10, -12 }, { 10, 11, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 10,\n\t\t{ 341, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 2 }, { 2, 5, 0 }, { 3, 7, 0 }, { 4, 8, -2 },\n\t\t\t{ 6, 9, -4 }, { 7, 10, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 12, -8 }, { 7, 13, -10 }, { 9, 13, -10 }, { 9, 13, -12 },\n\t\t\t{ 9, 13, -12 }, { 11, 14, -12 }, { 14, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 12,\n\t\t{ 341, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 6, 2 }, { 4, 9, 0 }, { 7, 11, 0 }, { 8, 12, -2 },\n\t\t\t{ 10, 13, -4 }, { 11, 14, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 16, -8 }, { 11, 17, -10 }, { 13, 17, -10 },\n\t\t\t{ 13, 17, -12 }, { 13, 17, -12 }, { 15, 18, -12 },\n\t\t\t{ 18, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 14,\n\t\t{ 341, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 6, 2 }, { 7, 10, 0 }, { 9, 13, 0 }, { 11, 16, -2 },\n\t\t\t{ 14, 17, -4 }, { 15, 18, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 20, -8 }, { 15, 21, -10 }, { 17, 21, -10 },\n\t\t\t{ 17, 21, -12 }, { 17, 21, -12 }, { 19, 22, -12 },\n\t\t\t{ 22, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(12), .bpc = 16,\n\t\t{ 341, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 6, 2 }, { 6, 11, 0 }, { 11, 15, 0 }, { 14, 18, -2 },\n\t\t\t{ 18, 21, -4 }, { 19, 22, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 24, -8 }, { 19, 25, -10 }, { 21, 25, -10 },\n\t\t\t{ 21, 25, -12 }, { 21, 25, -12 }, { 23, 26, -12 },\n\t\t\t{ 26, 27, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 8,\n\t\t{ 273, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 0, 10 }, { 0, 1, 8 }, { 0, 1, 6 }, { 0, 2, 4 },\n\t\t\t{ 1, 2, 2 }, { 1, 3, 0 }, { 1, 3, -2 }, { 2, 4, -4 },\n\t\t\t{ 2, 5, -6 }, { 3, 5, -8 }, { 4, 6, -10 }, { 4, 7, -10 },\n\t\t\t{ 5, 7, -12 }, { 7, 8, -12 }, { 8, 9, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 10,\n\t\t{ 273, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 10 }, { 2, 5, 8 }, { 3, 5, 6 }, { 4, 6, 4 },\n\t\t\t{ 5, 6, 2 }, { 5, 7, 0 }, { 5, 7, -2 }, { 6, 8, -4 },\n\t\t\t{ 6, 9, -6 }, { 7, 9, -8 }, { 8, 10, -10 }, { 8, 11, -10 },\n\t\t\t{ 9, 11, -12 }, { 11, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 12,\n\t\t{ 273, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 4, 10 }, { 2, 7, 8 }, { 4, 9, 6 }, { 6, 11, 4 },\n\t\t\t{ 9, 11, 2 }, { 9, 11, 0 }, { 9, 12, -2 }, { 10, 12, -4 },\n\t\t\t{ 11, 13, -6 }, { 11, 13, -8 }, { 12, 14, -10 },\n\t\t\t{ 13, 15, -10 }, { 13, 15, -12 }, { 15, 16, -12 },\n\t\t\t{ 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 14,\n\t\t{ 273, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 4, 10 }, { 3, 8, 8 }, { 6, 11, 6 }, { 9, 14, 4 },\n\t\t\t{ 13, 15, 2 }, { 13, 15, 0 }, { 13, 16, -2 }, { 14, 16, -4 },\n\t\t\t{ 15, 17, -6 }, { 15, 17, -8 }, { 16, 18, -10 },\n\t\t\t{ 17, 19, -10 }, { 17, 19, -12 }, { 19, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(15), .bpc = 16,\n\t\t{ 273, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 4, 10 }, { 4, 9, 8 }, { 8, 13, 6 }, { 12, 17, 4 },\n\t\t\t{ 17, 19, 2 }, { 17, 20, 0 }, { 17, 20, -2 }, { 18, 20, -4 },\n\t\t\t{ 19, 21, -6 }, { 19, 21, -8 }, { 20, 22, -10 },\n\t\t\t{ 21, 23, -10 }, { 21, 23, -12 }, { 23, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{   }\n};\n\n \nstatic const struct rc_parameters_data rc_parameters_1_2_422[] = {\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 8,\n\t\t{ 512, 15, 6144, 3, 12, 11, 11, {\n\t\t\t{ 0, 4, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 10, -10 }, { 5, 10, -10 }, { 5, 11, -12 },\n\t\t\t{ 5, 11, -12 }, { 9, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 10,\n\t\t{ 512, 15, 6144, 7, 16, 15, 15, {\n\t\t\t{ 0, 8, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 5, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 14, -10 }, { 9, 14, -10 }, { 9, 15, -12 },\n\t\t\t{ 9, 15, -12 }, { 13, 16, -12 }, { 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 12,\n\t\t{ 512, 15, 6144, 11, 20, 19, 19, {\n\t\t\t{ 0, 12, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 9, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 18, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 19, -12 }, { 13, 19, -12 }, { 17, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 14,\n\t\t{ 512, 15, 6144, 15, 24, 23, 23, {\n\t\t\t{ 0, 12, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 12, 17, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 22, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 23, -12 }, { 17, 23, -12 }, { 21, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 16,\n\t\t{ 512, 15, 6144, 19, 28, 27, 27, {\n\t\t\t{ 0, 12, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 15, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 26, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 27, -12 }, { 21, 27, -12 }, { 25, 28, -12 },\n\t\t\t{ 28, 29, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(7), .bpc = 8,\n\t\t{ 410, 15, 5632, 3, 12, 11, 11, {\n\t\t\t{ 0, 3, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 2, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 9, -10 }, { 5, 10, -10 }, { 5, 10, -10 },\n\t\t\t{ 5, 11, -12 }, { 7, 11, -12 }, { 11, 12, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(7), .bpc = 10,\n\t\t{ 410, 15, 5632, 7, 16, 15, 15, {\n\t\t\t{ 0, 7, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 6, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 13, -10 }, { 9, 14, -10 }, { 9, 14, -10 },\n\t\t\t{ 9, 15, -12 }, { 11, 15, -12 }, { 15, 16, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(7), .bpc = 12,\n\t\t{ 410, 15, 5632, 11, 20, 19, 19, {\n\t\t\t{ 0, 11, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 10, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 17, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 18, -10 }, { 13, 19, -12 }, { 15, 19, -12 },\n\t\t\t{ 19, 20, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(7), .bpc = 14,\n\t\t{ 410, 15, 5632, 15, 24, 23, 23, {\n\t\t\t{ 0, 11, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 13, 18, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 21, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 22, -10 }, { 17, 23, -12 }, { 19, 23, -12 },\n\t\t\t{ 23, 24, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(7), .bpc = 16,\n\t\t{ 410, 15, 5632, 19, 28, 27, 27, {\n\t\t\t{ 0, 11, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 16, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 25, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 26, -10 }, { 21, 27, -12 }, { 23, 27, -12 },\n\t\t\t{ 27, 28, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 8,\n\t\t{ 341, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 2, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 8, -8 }, { 3, 9, -10 }, { 5, 9, -10 }, { 5, 9, -12 },\n\t\t\t{ 5, 9, -12 }, { 7, 10, -12 }, { 10, 11, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 10,\n\t\t{ 341, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 2 }, { 2, 5, 0 }, { 3, 7, 0 }, { 4, 8, -2 },\n\t\t\t{ 6, 9, -4 }, { 7, 10, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 12, -8 }, { 7, 13, -10 }, { 9, 13, -10 }, { 9, 13, -12 },\n\t\t\t{ 9, 13, -12 }, { 11, 14, -12 }, { 14, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 12,\n\t\t{ 341, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 6, 2 }, { 4, 9, 0 }, { 7, 11, 0 }, { 8, 12, -2 },\n\t\t\t{ 10, 13, -4 }, { 11, 14, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 16, -8 }, { 11, 17, -10 }, { 13, 17, -10 },\n\t\t\t{ 13, 17, -12 }, { 13, 17, -12 }, { 15, 18, -12 },\n\t\t\t{ 18, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 14,\n\t\t{ 341, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 6, 2 }, { 7, 10, 0 }, { 9, 13, 0 }, { 11, 16, -2 },\n\t\t\t{ 14, 17, -4 }, { 15, 18, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 20, -8 }, { 15, 21, -10 }, { 17, 21, -10 },\n\t\t\t{ 17, 21, -12 }, { 17, 21, -12 }, { 19, 22, -12 },\n\t\t\t{ 22, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 16,\n\t\t{ 341, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 6, 2 }, { 6, 11, 0 }, { 11, 15, 0 }, { 14, 18, -2 },\n\t\t\t{ 18, 21, -4 }, { 19, 22, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 24, -8 }, { 19, 25, -10 }, { 21, 25, -10 },\n\t\t\t{ 21, 25, -12 }, { 21, 25, -12 }, { 23, 26, -12 },\n\t\t\t{ 26, 27, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 8,\n\t\t{ 273, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 0, 10 }, { 0, 1, 8 }, { 0, 1, 6 }, { 0, 2, 4 },\n\t\t\t{ 1, 2, 2 }, { 1, 3, 0 }, { 1, 3, -2 }, { 2, 4, -4 },\n\t\t\t{ 2, 5, -6 }, { 3, 5, -8 }, { 4, 6, -10 }, { 4, 7, -10 },\n\t\t\t{ 5, 7, -12 }, { 7, 8, -12 }, { 8, 9, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 10,\n\t\t{ 273, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 10 }, { 2, 5, 8 }, { 3, 5, 6 }, { 4, 6, 4 },\n\t\t\t{ 5, 6, 2 }, { 5, 7, 0 }, { 5, 7, -2 }, { 6, 8, -4 },\n\t\t\t{ 6, 9, -6 }, { 7, 9, -8 }, { 8, 10, -10 }, { 8, 11, -10 },\n\t\t\t{ 9, 11, -12 }, { 11, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 12,\n\t\t{ 273, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 4, 10 }, { 2, 7, 8 }, { 4, 9, 6 }, { 6, 11, 4 },\n\t\t\t{ 9, 11, 2 }, { 9, 11, 0 }, { 9, 12, -2 }, { 10, 12, -4 },\n\t\t\t{ 11, 13, -6 }, { 11, 13, -8 }, { 12, 14, -10 },\n\t\t\t{ 13, 15, -10 }, { 13, 15, -12 }, { 15, 16, -12 },\n\t\t\t{ 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 14,\n\t\t{ 273, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 4, 10 }, { 3, 8, 8 }, { 6, 11, 6 }, { 9, 14, 4 },\n\t\t\t{ 13, 15, 2 }, { 13, 15, 0 }, { 13, 16, -2 }, { 14, 16, -4 },\n\t\t\t{ 15, 17, -6 }, { 15, 17, -8 }, { 16, 18, -10 },\n\t\t\t{ 17, 19, -10 }, { 17, 19, -12 }, { 19, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(10), .bpc = 16,\n\t\t{ 273, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 4, 10 }, { 4, 9, 8 }, { 8, 13, 6 }, { 12, 17, 4 },\n\t\t\t{ 17, 19, 2 }, { 17, 20, 0 }, { 17, 20, -2 }, { 18, 20, -4 },\n\t\t\t{ 19, 21, -6 }, { 19, 21, -8 }, { 20, 22, -10 },\n\t\t\t{ 21, 23, -10 }, { 21, 23, -12 }, { 23, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{   }\n};\n\n \nstatic const struct rc_parameters_data rc_parameters_1_2_420[] = {\n\t{\n\t\t.bpp = DSC_BPP(4), .bpc = 8,\n\t\t{ 512, 12, 6144, 3, 12, 11, 11, {\n\t\t\t{ 0, 4, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 10, -10 }, { 5, 10, -10 }, { 5, 11, -12 },\n\t\t\t{ 5, 11, -12 }, { 9, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(4), .bpc = 10,\n\t\t{ 512, 12, 6144, 7, 16, 15, 15, {\n\t\t\t{ 0, 8, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 5, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 14, -10 }, { 9, 14, -10 }, { 9, 15, -12 },\n\t\t\t{ 9, 15, -12 }, { 13, 16, -12 }, { 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(4), .bpc = 12,\n\t\t{ 512, 12, 6144, 11, 20, 19, 19, {\n\t\t\t{ 0, 12, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 9, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 18, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 19, -12 }, { 13, 19, -12 }, { 17, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(4), .bpc = 14,\n\t\t{ 512, 12, 6144, 15, 24, 23, 23, {\n\t\t\t{ 0, 12, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 12, 17, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 22, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 23, -12 }, { 17, 23, -12 }, { 21, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(4), .bpc = 16,\n\t\t{ 512, 12, 6144, 19, 28, 27, 27, {\n\t\t\t{ 0, 12, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 15, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 26, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 27, -12 }, { 21, 27, -12 }, { 25, 28, -12 },\n\t\t\t{ 28, 29, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(5), .bpc = 8,\n\t\t{ 410, 15, 5632, 3, 12, 11, 11, {\n\t\t\t{ 0, 3, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 2, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 9, -8 }, { 3, 9, -10 }, { 5, 10, -10 }, { 5, 10, -10 },\n\t\t\t{ 5, 11, -12 }, { 7, 11, -12 }, { 11, 12, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(5), .bpc = 10,\n\t\t{ 410, 15, 5632, 7, 16, 15, 15, {\n\t\t\t{ 0, 7, 2 }, { 4, 8, 0 }, { 5, 9, 0 }, { 6, 10, -2 },\n\t\t\t{ 7, 11, -4 }, { 7, 11, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 13, -8 }, { 7, 13, -10 }, { 9, 14, -10 }, { 9, 14, -10 },\n\t\t\t{ 9, 15, -12 }, { 11, 15, -12 }, { 15, 16, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(5), .bpc = 12,\n\t\t{ 410, 15, 5632, 11, 20, 19, 19, {\n\t\t\t{ 0, 11, 2 }, { 4, 12, 0 }, { 9, 13, 0 }, { 10, 14, -2 },\n\t\t\t{ 11, 15, -4 }, { 11, 15, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 17, -8 }, { 11, 17, -10 }, { 13, 18, -10 },\n\t\t\t{ 13, 18, -10 }, { 13, 19, -12 }, { 15, 19, -12 },\n\t\t\t{ 19, 20, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(5), .bpc = 14,\n\t\t{ 410, 15, 5632, 15, 24, 23, 23, {\n\t\t\t{ 0, 11, 2 }, { 5, 13, 0 }, { 11, 15, 0 }, { 13, 18, -2 },\n\t\t\t{ 15, 19, -4 }, { 15, 19, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 21, -8 }, { 15, 21, -10 }, { 17, 22, -10 },\n\t\t\t{ 17, 22, -10 }, { 17, 23, -12 }, { 19, 23, -12 },\n\t\t\t{ 23, 24, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(5), .bpc = 16,\n\t\t{ 410, 15, 5632, 19, 28, 27, 27, {\n\t\t\t{ 0, 11, 2 }, { 6, 14, 0 }, { 13, 17, 0 }, { 16, 20, -2 },\n\t\t\t{ 19, 23, -4 }, { 19, 23, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 25, -8 }, { 19, 25, -10 }, { 21, 26, -10 },\n\t\t\t{ 21, 26, -10 }, { 21, 27, -12 }, { 23, 27, -12 },\n\t\t\t{ 27, 28, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 8,\n\t\t{ 341, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 2, 2 }, { 0, 4, 0 }, { 1, 5, 0 }, { 1, 6, -2 },\n\t\t\t{ 3, 7, -4 }, { 3, 7, -6 }, { 3, 7, -8 }, { 3, 8, -8 },\n\t\t\t{ 3, 8, -8 }, { 3, 9, -10 }, { 5, 9, -10 }, { 5, 9, -12 },\n\t\t\t{ 5, 9, -12 }, { 7, 10, -12 }, { 10, 12, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 10,\n\t\t{ 341, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 2 }, { 2, 5, 0 }, { 3, 7, 0 }, { 4, 8, -2 },\n\t\t\t{ 6, 9, -4 }, { 7, 10, -6 }, { 7, 11, -8 }, { 7, 12, -8 },\n\t\t\t{ 7, 12, -8 }, { 7, 13, -10 }, { 9, 13, -10 }, { 9, 13, -12 },\n\t\t\t{ 9, 13, -12 }, { 11, 14, -12 }, { 14, 15, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 12,\n\t\t{ 341, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 6, 2 }, { 4, 9, 0 }, { 7, 11, 0 }, { 8, 12, -2 },\n\t\t\t{ 10, 13, -4 }, { 11, 14, -6 }, { 11, 15, -8 }, { 11, 16, -8 },\n\t\t\t{ 11, 16, -8 }, { 11, 17, -10 }, { 13, 17, -10 },\n\t\t\t{ 13, 17, -12 }, { 13, 17, -12 }, { 15, 18, -12 },\n\t\t\t{ 18, 19, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 14,\n\t\t{ 341, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 6, 2 }, { 7, 10, 0 }, { 9, 13, 0 }, { 11, 16, -2 },\n\t\t\t{ 14, 17, -4 }, { 15, 18, -6 }, { 15, 19, -8 }, { 15, 20, -8 },\n\t\t\t{ 15, 20, -8 }, { 15, 21, -10 }, { 17, 21, -10 },\n\t\t\t{ 17, 21, -12 }, { 17, 21, -12 }, { 19, 22, -12 },\n\t\t\t{ 22, 23, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(6), .bpc = 16,\n\t\t{ 341, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 6, 2 }, { 6, 11, 0 }, { 11, 15, 0 }, { 14, 18, -2 },\n\t\t\t{ 18, 21, -4 }, { 19, 22, -6 }, { 19, 23, -8 }, { 19, 24, -8 },\n\t\t\t{ 19, 24, -8 }, { 19, 25, -10 }, { 21, 25, -10 },\n\t\t\t{ 21, 25, -12 }, { 21, 25, -12 }, { 23, 26, -12 },\n\t\t\t{ 26, 27, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 8,\n\t\t{ 256, 15, 2048, 3, 12, 11, 11, {\n\t\t\t{ 0, 0, 10 }, { 0, 1, 8 }, { 0, 1, 6 }, { 0, 2, 4 },\n\t\t\t{ 1, 2, 2 }, { 1, 3, 0 }, { 1, 3, -2 }, { 2, 4, -4 },\n\t\t\t{ 2, 5, -6 }, { 3, 5, -8 }, { 4, 6, -10 }, { 4, 7, -10 },\n\t\t\t{ 5, 7, -12 }, { 7, 8, -12 }, { 8, 9, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 10,\n\t\t{ 256, 15, 2048, 7, 16, 15, 15, {\n\t\t\t{ 0, 2, 10 }, { 2, 5, 8 }, { 3, 5, 6 }, { 4, 6, 4 },\n\t\t\t{ 5, 6, 2 }, { 5, 7, 0 }, { 5, 7, -2 }, { 6, 8, -4 },\n\t\t\t{ 6, 9, -6 }, { 7, 9, -8 }, { 8, 10, -10 }, { 8, 11, -10 },\n\t\t\t{ 9, 11, -12 }, { 11, 12, -12 }, { 12, 13, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 12,\n\t\t{ 256, 15, 2048, 11, 20, 19, 19, {\n\t\t\t{ 0, 4, 10 }, { 2, 7, 8 }, { 4, 9, 6 }, { 6, 11, 4 },\n\t\t\t{ 9, 11, 2 }, { 9, 11, 0 }, { 9, 12, -2 }, { 10, 12, -4 },\n\t\t\t{ 11, 13, -6 }, { 11, 13, -8 }, { 12, 14, -10 },\n\t\t\t{ 13, 15, -10 }, { 13, 15, -12 }, { 15, 16, -12 },\n\t\t\t{ 16, 17, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 14,\n\t\t{ 256, 15, 2048, 15, 24, 23, 23, {\n\t\t\t{ 0, 4, 10 }, { 3, 8, 8 }, { 6, 11, 6 }, { 9, 14, 4 },\n\t\t\t{ 13, 15, 2 }, { 13, 15, 0 }, { 13, 16, -2 }, { 14, 16, -4 },\n\t\t\t{ 15, 17, -6 }, { 15, 17, -8 }, { 16, 18, -10 },\n\t\t\t{ 17, 19, -10 }, { 17, 19, -12 }, { 19, 20, -12 },\n\t\t\t{ 20, 21, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t.bpp = DSC_BPP(8), .bpc = 16,\n\t\t{ 256, 15, 2048, 19, 28, 27, 27, {\n\t\t\t{ 0, 4, 10 }, { 4, 9, 8 }, { 8, 13, 6 }, { 12, 17, 4 },\n\t\t\t{ 17, 19, 2 }, { 17, 20, 0 }, { 17, 20, -2 }, { 18, 20, -4 },\n\t\t\t{ 19, 21, -6 }, { 19, 21, -8 }, { 20, 22, -10 },\n\t\t\t{ 21, 23, -10 }, { 21, 23, -12 }, { 23, 24, -12 },\n\t\t\t{ 24, 25, -12 }\n\t\t\t}\n\t\t}\n\t},\n\t{   }\n};\n\nstatic const struct rc_parameters *get_rc_params(const struct rc_parameters_data *rc_parameters,\n\t\t\t\t\t\t u16 dsc_bpp,\n\t\t\t\t\t\t u8 bits_per_component)\n{\n\tint i;\n\n\tfor (i = 0; rc_parameters[i].bpp; i++)\n\t\tif (rc_parameters[i].bpp == dsc_bpp &&\n\t\t    rc_parameters[i].bpc == bits_per_component)\n\t\t\treturn &rc_parameters[i].params;\n\n\treturn NULL;\n}\n\n \nint drm_dsc_setup_rc_params(struct drm_dsc_config *vdsc_cfg, enum drm_dsc_params_type type)\n{\n\tconst struct rc_parameters_data *data;\n\tconst struct rc_parameters *rc_params;\n\tint i;\n\n\tif (WARN_ON_ONCE(!vdsc_cfg->bits_per_pixel ||\n\t\t\t !vdsc_cfg->bits_per_component))\n\t\treturn -EINVAL;\n\n\tswitch (type) {\n\tcase DRM_DSC_1_2_444:\n\t\tdata = rc_parameters_1_2_444;\n\t\tbreak;\n\tcase DRM_DSC_1_1_PRE_SCR:\n\t\tdata = rc_parameters_pre_scr;\n\t\tbreak;\n\tcase DRM_DSC_1_2_422:\n\t\tdata = rc_parameters_1_2_422;\n\t\tbreak;\n\tcase DRM_DSC_1_2_420:\n\t\tdata = rc_parameters_1_2_420;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\trc_params = get_rc_params(data,\n\t\t\t\t  vdsc_cfg->bits_per_pixel,\n\t\t\t\t  vdsc_cfg->bits_per_component);\n\tif (!rc_params)\n\t\treturn -EINVAL;\n\n\tvdsc_cfg->first_line_bpg_offset = rc_params->first_line_bpg_offset;\n\tvdsc_cfg->initial_xmit_delay = rc_params->initial_xmit_delay;\n\tvdsc_cfg->initial_offset = rc_params->initial_offset;\n\tvdsc_cfg->flatness_min_qp = rc_params->flatness_min_qp;\n\tvdsc_cfg->flatness_max_qp = rc_params->flatness_max_qp;\n\tvdsc_cfg->rc_quant_incr_limit0 = rc_params->rc_quant_incr_limit0;\n\tvdsc_cfg->rc_quant_incr_limit1 = rc_params->rc_quant_incr_limit1;\n\n\tfor (i = 0; i < DSC_NUM_BUF_RANGES; i++) {\n\t\tvdsc_cfg->rc_range_params[i].range_min_qp =\n\t\t\trc_params->rc_range_params[i].range_min_qp;\n\t\tvdsc_cfg->rc_range_params[i].range_max_qp =\n\t\t\trc_params->rc_range_params[i].range_max_qp;\n\t\t \n\t\tvdsc_cfg->rc_range_params[i].range_bpg_offset =\n\t\t\trc_params->rc_range_params[i].range_bpg_offset &\n\t\t\tDSC_RANGE_BPG_OFFSET_MASK;\n\t}\n\n\treturn 0;\n}\nEXPORT_SYMBOL(drm_dsc_setup_rc_params);\n\n \nint drm_dsc_compute_rc_parameters(struct drm_dsc_config *vdsc_cfg)\n{\n\tunsigned long groups_per_line = 0;\n\tunsigned long groups_total = 0;\n\tunsigned long num_extra_mux_bits = 0;\n\tunsigned long slice_bits = 0;\n\tunsigned long hrd_delay = 0;\n\tunsigned long final_scale = 0;\n\tunsigned long rbs_min = 0;\n\n\tif (vdsc_cfg->native_420 || vdsc_cfg->native_422) {\n\t\t \n\t\tgroups_per_line = DIV_ROUND_UP(vdsc_cfg->slice_width / 2,\n\t\t\t\t\t       DSC_RC_PIXELS_PER_GROUP);\n\n\t\t \n\t\tvdsc_cfg->slice_chunk_size = DIV_ROUND_UP(vdsc_cfg->slice_width / 2 *\n\t\t\t\t\t\t\t  vdsc_cfg->bits_per_pixel,\n\t\t\t\t\t\t\t  (8 * 16));\n\t} else {\n\t\t \n\t\tgroups_per_line = DIV_ROUND_UP(vdsc_cfg->slice_width,\n\t\t\t\t\t       DSC_RC_PIXELS_PER_GROUP);\n\n\t\t \n\t\tvdsc_cfg->slice_chunk_size = DIV_ROUND_UP(vdsc_cfg->slice_width *\n\t\t\t\t\t\t\t  vdsc_cfg->bits_per_pixel,\n\t\t\t\t\t\t\t  (8 * 16));\n\t}\n\n\tif (vdsc_cfg->convert_rgb)\n\t\tnum_extra_mux_bits = 3 * (vdsc_cfg->mux_word_size +\n\t\t\t\t\t  (4 * vdsc_cfg->bits_per_component + 4)\n\t\t\t\t\t  - 2);\n\telse if (vdsc_cfg->native_422)\n\t\tnum_extra_mux_bits = 4 * vdsc_cfg->mux_word_size +\n\t\t\t(4 * vdsc_cfg->bits_per_component + 4) +\n\t\t\t3 * (4 * vdsc_cfg->bits_per_component) - 2;\n\telse\n\t\tnum_extra_mux_bits = 3 * vdsc_cfg->mux_word_size +\n\t\t\t(4 * vdsc_cfg->bits_per_component + 4) +\n\t\t\t2 * (4 * vdsc_cfg->bits_per_component) - 2;\n\t \n\tslice_bits = 8 * vdsc_cfg->slice_chunk_size * vdsc_cfg->slice_height;\n\n\twhile ((num_extra_mux_bits > 0) &&\n\t       ((slice_bits - num_extra_mux_bits) % vdsc_cfg->mux_word_size))\n\t\tnum_extra_mux_bits--;\n\n\tif (groups_per_line < vdsc_cfg->initial_scale_value - 8)\n\t\tvdsc_cfg->initial_scale_value = groups_per_line + 8;\n\n\t \n\tif (vdsc_cfg->initial_scale_value > 8)\n\t\tvdsc_cfg->scale_decrement_interval = groups_per_line /\n\t\t\t(vdsc_cfg->initial_scale_value - 8);\n\telse\n\t\tvdsc_cfg->scale_decrement_interval = DSC_SCALE_DECREMENT_INTERVAL_MAX;\n\n\tvdsc_cfg->final_offset = vdsc_cfg->rc_model_size -\n\t\t(vdsc_cfg->initial_xmit_delay *\n\t\t vdsc_cfg->bits_per_pixel + 8) / 16 + num_extra_mux_bits;\n\n\tif (vdsc_cfg->final_offset >= vdsc_cfg->rc_model_size) {\n\t\tDRM_DEBUG_KMS(\"FinalOfs < RcModelSze for this InitialXmitDelay\\n\");\n\t\treturn -ERANGE;\n\t}\n\n\tfinal_scale = (vdsc_cfg->rc_model_size * 8) /\n\t\t(vdsc_cfg->rc_model_size - vdsc_cfg->final_offset);\n\tif (vdsc_cfg->slice_height > 1)\n\t\t \n\t\tvdsc_cfg->nfl_bpg_offset = DIV_ROUND_UP((vdsc_cfg->first_line_bpg_offset << 11),\n\t\t\t\t\t\t\t(vdsc_cfg->slice_height - 1));\n\telse\n\t\tvdsc_cfg->nfl_bpg_offset = 0;\n\n\t \n\tgroups_total = groups_per_line * vdsc_cfg->slice_height;\n\n\t \n\tvdsc_cfg->slice_bpg_offset = DIV_ROUND_UP(((vdsc_cfg->rc_model_size -\n\t\t\t\t\t\t    vdsc_cfg->initial_offset +\n\t\t\t\t\t\t    num_extra_mux_bits) << 11),\n\t\t\t\t\t\t  groups_total);\n\n\tif (final_scale > 9) {\n\t\t \n\t\tvdsc_cfg->scale_increment_interval =\n\t\t\t\t(vdsc_cfg->final_offset * (1 << 11)) /\n\t\t\t\t((vdsc_cfg->nfl_bpg_offset +\n\t\t\t\tvdsc_cfg->slice_bpg_offset) *\n\t\t\t\t(final_scale - 9));\n\t} else {\n\t\t \n\t\tvdsc_cfg->scale_increment_interval = 0;\n\t}\n\n\t \n\trbs_min = vdsc_cfg->rc_model_size - vdsc_cfg->initial_offset +\n\t\tDIV_ROUND_UP(vdsc_cfg->initial_xmit_delay *\n\t\t\t     vdsc_cfg->bits_per_pixel, 16) +\n\t\tgroups_per_line * vdsc_cfg->first_line_bpg_offset;\n\n\thrd_delay = DIV_ROUND_UP((rbs_min * 16), vdsc_cfg->bits_per_pixel);\n\tvdsc_cfg->rc_bits = (hrd_delay * vdsc_cfg->bits_per_pixel) / 16;\n\tvdsc_cfg->initial_dec_delay = hrd_delay - vdsc_cfg->initial_xmit_delay;\n\n\treturn 0;\n}\nEXPORT_SYMBOL(drm_dsc_compute_rc_parameters);\n\n \nu32 drm_dsc_get_bpp_int(const struct drm_dsc_config *vdsc_cfg)\n{\n\tWARN_ON_ONCE(vdsc_cfg->bits_per_pixel & 0xf);\n\treturn vdsc_cfg->bits_per_pixel >> 4;\n}\nEXPORT_SYMBOL(drm_dsc_get_bpp_int);\n\n \nu8 drm_dsc_initial_scale_value(const struct drm_dsc_config *dsc)\n{\n\treturn 8 * dsc->rc_model_size / (dsc->rc_model_size - dsc->initial_offset);\n}\nEXPORT_SYMBOL(drm_dsc_initial_scale_value);\n\n \nu32 drm_dsc_flatness_det_thresh(const struct drm_dsc_config *dsc)\n{\n\treturn 2 << (dsc->bits_per_component - 8);\n}\nEXPORT_SYMBOL(drm_dsc_flatness_det_thresh);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}