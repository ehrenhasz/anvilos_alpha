{
  "module_name": "ingenic-dw-hdmi.c",
  "hash_id": "68cfee68d63b7845c7971ebb9dcebafbd55b96bc088ee3951a333e93f2518468",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/ingenic/ingenic-dw-hdmi.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/of_platform.h>\n#include <linux/platform_device.h>\n\n#include <drm/bridge/dw_hdmi.h>\n#include <drm/drm_of.h>\n#include <drm/drm_print.h>\n\nstatic const struct dw_hdmi_mpll_config ingenic_mpll_cfg[] = {\n\t{ 45250000,  { { 0x01e0, 0x0000 }, { 0x21e1, 0x0000 }, { 0x41e2, 0x0000 } } },\n\t{ 92500000,  { { 0x0140, 0x0005 }, { 0x2141, 0x0005 }, { 0x4142, 0x0005 } } },\n\t{ 148500000, { { 0x00a0, 0x000a }, { 0x20a1, 0x000a }, { 0x40a2, 0x000a } } },\n\t{ 216000000, { { 0x00a0, 0x000a }, { 0x2001, 0x000f }, { 0x4002, 0x000f } } },\n\t{ ~0UL,      { { 0x0000, 0x0000 }, { 0x0000, 0x0000 }, { 0x0000, 0x0000 } } }\n};\n\nstatic const struct dw_hdmi_curr_ctrl ingenic_cur_ctr[] = {\n\t \n\t{ 54000000,  { 0x091c, 0x091c, 0x06dc } },\n\t{ 58400000,  { 0x091c, 0x06dc, 0x06dc } },\n\t{ 72000000,  { 0x06dc, 0x06dc, 0x091c } },\n\t{ 74250000,  { 0x06dc, 0x0b5c, 0x091c } },\n\t{ 118800000, { 0x091c, 0x091c, 0x06dc } },\n\t{ 216000000, { 0x06dc, 0x0b5c, 0x091c } },\n\t{ ~0UL,      { 0x0000, 0x0000, 0x0000 } },\n};\n\n \nstatic const struct dw_hdmi_phy_config ingenic_phy_config[] = {\n\t \n\t{ 216000000, 0x800d, 0x0005, 0x01ad},\n\t{ ~0UL,      0x0000, 0x0000, 0x0000}\n};\n\nstatic enum drm_mode_status\ningenic_dw_hdmi_mode_valid(struct dw_hdmi *hdmi, void *data,\n\t\t\t   const struct drm_display_info *info,\n\t\t\t   const struct drm_display_mode *mode)\n{\n\tif (mode->clock < 13500)\n\t\treturn MODE_CLOCK_LOW;\n\t \n\tif (mode->clock > 216000)\n\t\treturn MODE_CLOCK_HIGH;\n\n\treturn MODE_OK;\n}\n\nstatic struct dw_hdmi_plat_data ingenic_dw_hdmi_plat_data = {\n\t.mpll_cfg   = ingenic_mpll_cfg,\n\t.cur_ctr    = ingenic_cur_ctr,\n\t.phy_config = ingenic_phy_config,\n\t.mode_valid = ingenic_dw_hdmi_mode_valid,\n\t.output_port\t= 1,\n};\n\nstatic const struct of_device_id ingenic_dw_hdmi_dt_ids[] = {\n\t{ .compatible = \"ingenic,jz4780-dw-hdmi\" },\n\t{   },\n};\nMODULE_DEVICE_TABLE(of, ingenic_dw_hdmi_dt_ids);\n\nstatic void ingenic_dw_hdmi_cleanup(void *data)\n{\n\tstruct dw_hdmi *hdmi = (struct dw_hdmi *)data;\n\n\tdw_hdmi_remove(hdmi);\n}\n\nstatic int ingenic_dw_hdmi_probe(struct platform_device *pdev)\n{\n\tstruct dw_hdmi *hdmi;\n\n\thdmi = dw_hdmi_probe(pdev, &ingenic_dw_hdmi_plat_data);\n\tif (IS_ERR(hdmi))\n\t\treturn PTR_ERR(hdmi);\n\n\treturn devm_add_action_or_reset(&pdev->dev, ingenic_dw_hdmi_cleanup, hdmi);\n}\n\nstatic struct platform_driver ingenic_dw_hdmi_driver = {\n\t.probe  = ingenic_dw_hdmi_probe,\n\t.driver = {\n\t\t.name = \"dw-hdmi-ingenic\",\n\t\t.of_match_table = ingenic_dw_hdmi_dt_ids,\n\t},\n};\nmodule_platform_driver(ingenic_dw_hdmi_driver);\n\nMODULE_DESCRIPTION(\"JZ4780 Specific DW-HDMI Driver Extension\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_ALIAS(\"platform:dw-hdmi-ingenic\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}