{
  "module_name": "amdgpu_ring_mux.h",
  "hash_id": "cde365ae713a5670cb78f7a7b48fba0bf17f6ff78f8d713af9331469b8b15273",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_ring_mux.h",
  "human_readable_source": " \n\n#ifndef __AMDGPU_RING_MUX__\n#define __AMDGPU_RING_MUX__\n\n#include <linux/timer.h>\n#include <linux/spinlock.h>\n#include \"amdgpu_ring.h\"\n\nstruct amdgpu_ring;\n\n \nstruct amdgpu_mux_entry {\n\tstruct amdgpu_ring      *ring;\n\tu64                     start_ptr_in_hw_ring;\n\tu64                     end_ptr_in_hw_ring;\n\tu64                     sw_cptr;\n\tu64                     sw_rptr;\n\tu64                     sw_wptr;\n\tstruct list_head        list;\n};\n\nenum amdgpu_ring_mux_offset_type {\n\tAMDGPU_MUX_OFFSET_TYPE_CONTROL,\n\tAMDGPU_MUX_OFFSET_TYPE_DE,\n\tAMDGPU_MUX_OFFSET_TYPE_CE,\n};\n\nenum ib_complete_status {\n\t \n\tIB_COMPLETION_STATUS_DEFAULT = 0,\n\t \n\tIB_COMPLETION_STATUS_PREEMPTED = 1,\n\t \n\tIB_COMPLETION_STATUS_COMPLETED = 2,\n};\n\nstruct amdgpu_ring_mux {\n\tstruct amdgpu_ring      *real_ring;\n\n\tstruct amdgpu_mux_entry *ring_entry;\n\tunsigned int            num_ring_entries;\n\tunsigned int            ring_entry_size;\n\t \n\tspinlock_t              lock;\n\tbool                    s_resubmit;\n\tuint32_t                seqno_to_resubmit;\n\tu64                     wptr_resubmit;\n\tstruct timer_list       resubmit_timer;\n\n\tbool                    pending_trailing_fence_signaled;\n};\n\n \nstruct amdgpu_mux_chunk {\n\tstruct list_head        entry;\n\tuint32_t                sync_seq;\n\tu64                     start;\n\tu64                     end;\n\tu64                     cntl_offset;\n\tu64                     de_offset;\n\tu64                     ce_offset;\n};\n\nint amdgpu_ring_mux_init(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring,\n\t\t\t unsigned int entry_size);\nvoid amdgpu_ring_mux_fini(struct amdgpu_ring_mux *mux);\nint amdgpu_ring_mux_add_sw_ring(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring);\nvoid amdgpu_ring_mux_set_wptr(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring, u64 wptr);\nu64 amdgpu_ring_mux_get_wptr(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring);\nu64 amdgpu_ring_mux_get_rptr(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring);\nvoid amdgpu_ring_mux_start_ib(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring);\nvoid amdgpu_ring_mux_end_ib(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring);\nvoid amdgpu_ring_mux_ib_mark_offset(struct amdgpu_ring_mux *mux, struct amdgpu_ring *ring,\n\t\t\t\t    u64 offset, enum amdgpu_ring_mux_offset_type type);\nbool amdgpu_mcbp_handle_trailing_fence_irq(struct amdgpu_ring_mux *mux);\n\nu64 amdgpu_sw_ring_get_rptr_gfx(struct amdgpu_ring *ring);\nu64 amdgpu_sw_ring_get_wptr_gfx(struct amdgpu_ring *ring);\nvoid amdgpu_sw_ring_set_wptr_gfx(struct amdgpu_ring *ring);\nvoid amdgpu_sw_ring_insert_nop(struct amdgpu_ring *ring, uint32_t count);\nvoid amdgpu_sw_ring_ib_begin(struct amdgpu_ring *ring);\nvoid amdgpu_sw_ring_ib_end(struct amdgpu_ring *ring);\nvoid amdgpu_sw_ring_ib_mark_offset(struct amdgpu_ring *ring, enum amdgpu_ring_mux_offset_type type);\nconst char *amdgpu_sw_ring_name(int idx);\nunsigned int amdgpu_sw_ring_priority(int idx);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}