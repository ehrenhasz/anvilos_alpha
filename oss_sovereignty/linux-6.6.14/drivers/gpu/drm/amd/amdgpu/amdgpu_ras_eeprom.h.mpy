{
  "module_name": "amdgpu_ras_eeprom.h",
  "hash_id": "dbb20f4e4ba4909d76642bde5f72f4b2ea249123bb28f4eed1ef41b4fc7d2851",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.h",
  "human_readable_source": " \n\n#ifndef _AMDGPU_RAS_EEPROM_H\n#define _AMDGPU_RAS_EEPROM_H\n\n#include <linux/i2c.h>\n\n#define RAS_TABLE_VER_V1           0x00010000\n#define RAS_TABLE_VER_V2_1         0x00021000\n\nstruct amdgpu_device;\n\nenum amdgpu_ras_gpu_health_status {\n\tGPU_HEALTH_USABLE = 0,\n\tGPU_RETIRED__ECC_REACH_THRESHOLD = 2,\n};\n\nenum amdgpu_ras_eeprom_err_type {\n\tAMDGPU_RAS_EEPROM_ERR_NA,\n\tAMDGPU_RAS_EEPROM_ERR_RECOVERABLE,\n\tAMDGPU_RAS_EEPROM_ERR_NON_RECOVERABLE,\n\tAMDGPU_RAS_EEPROM_ERR_COUNT,\n};\n\nstruct amdgpu_ras_eeprom_table_header {\n\tuint32_t header;\n\tuint32_t version;\n\tuint32_t first_rec_offset;\n\tuint32_t tbl_size;\n\tuint32_t checksum;\n} __packed;\n\nstruct amdgpu_ras_eeprom_table_ras_info {\n\tu8  rma_status;\n\tu8  health_percent;\n\tu16 ecc_page_threshold;\n\tu32 padding[64 - 1];\n} __packed;\n\nstruct amdgpu_ras_eeprom_control {\n\tstruct amdgpu_ras_eeprom_table_header tbl_hdr;\n\n\tstruct amdgpu_ras_eeprom_table_ras_info tbl_rai;\n\n\t \n\tu32 i2c_address;\n\n\t \n\tu32 ras_header_offset;\n\tu32 ras_info_offset;\n\tu32 ras_record_offset;\n\n\t \n\tu32 ras_num_recs;\n\n\t \n\tu32 ras_fri;\n\n\t \n\tu32 ras_max_record_count;\n\n\t \n\tstruct mutex ras_tbl_mutex;\n\n\t \n\tu32 bad_channel_bitmap;\n};\n\n \nstruct eeprom_table_record {\n\n\tunion {\n\t\tuint64_t address;\n\t\tuint64_t offset;\n\t};\n\n\tuint64_t retired_page;\n\tuint64_t ts;\n\n\tenum amdgpu_ras_eeprom_err_type err_type;\n\n\tunion {\n\t\tunsigned char bank;\n\t\tunsigned char cu;\n\t};\n\n\tunsigned char mem_channel;\n\tunsigned char mcumc_id;\n} __packed;\n\nint amdgpu_ras_eeprom_init(struct amdgpu_ras_eeprom_control *control,\n\t\t\t   bool *exceed_err_limit);\n\nint amdgpu_ras_eeprom_reset_table(struct amdgpu_ras_eeprom_control *control);\n\nbool amdgpu_ras_eeprom_check_err_threshold(struct amdgpu_device *adev);\n\nint amdgpu_ras_eeprom_read(struct amdgpu_ras_eeprom_control *control,\n\t\t\t   struct eeprom_table_record *records, const u32 num);\n\nint amdgpu_ras_eeprom_append(struct amdgpu_ras_eeprom_control *control,\n\t\t\t     struct eeprom_table_record *records, const u32 num);\n\nuint32_t amdgpu_ras_eeprom_max_record_count(struct amdgpu_ras_eeprom_control *control);\n\nvoid amdgpu_ras_debugfs_set_ret_size(struct amdgpu_ras_eeprom_control *control);\n\nextern const struct file_operations amdgpu_ras_debugfs_eeprom_size_ops;\nextern const struct file_operations amdgpu_ras_debugfs_eeprom_table_ops;\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}