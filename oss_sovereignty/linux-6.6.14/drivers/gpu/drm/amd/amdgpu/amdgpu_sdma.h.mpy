{
  "module_name": "amdgpu_sdma.h",
  "hash_id": "2584b1b850131a8b064b3879e87890dfc61cd5718e2e14583c680dd752384dec",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.h",
  "human_readable_source": " \n\n#ifndef __AMDGPU_SDMA_H__\n#define __AMDGPU_SDMA_H__\n#include \"amdgpu_ras.h\"\n\n \n#define AMDGPU_MAX_SDMA_INSTANCES\t\t16\n\nenum amdgpu_sdma_irq {\n\tAMDGPU_SDMA_IRQ_INSTANCE0  = 0,\n\tAMDGPU_SDMA_IRQ_INSTANCE1,\n\tAMDGPU_SDMA_IRQ_INSTANCE2,\n\tAMDGPU_SDMA_IRQ_INSTANCE3,\n\tAMDGPU_SDMA_IRQ_INSTANCE4,\n\tAMDGPU_SDMA_IRQ_INSTANCE5,\n\tAMDGPU_SDMA_IRQ_INSTANCE6,\n\tAMDGPU_SDMA_IRQ_INSTANCE7,\n\tAMDGPU_SDMA_IRQ_INSTANCE8,\n\tAMDGPU_SDMA_IRQ_INSTANCE9,\n\tAMDGPU_SDMA_IRQ_INSTANCE10,\n\tAMDGPU_SDMA_IRQ_INSTANCE11,\n\tAMDGPU_SDMA_IRQ_INSTANCE12,\n\tAMDGPU_SDMA_IRQ_INSTANCE13,\n\tAMDGPU_SDMA_IRQ_INSTANCE14,\n\tAMDGPU_SDMA_IRQ_INSTANCE15,\n\tAMDGPU_SDMA_IRQ_LAST\n};\n\n#define NUM_SDMA(x) hweight32(x)\n\nstruct amdgpu_sdma_instance {\n\t \n\tconst struct firmware\t*fw;\n\tuint32_t\t\tfw_version;\n\tuint32_t\t\tfeature_version;\n\n\tstruct amdgpu_ring\tring;\n\tstruct amdgpu_ring\tpage;\n\tbool\t\t\tburst_nop;\n\tuint32_t\t\taid_id;\n};\n\nenum amdgpu_sdma_ras_memory_id {\n\tAMDGPU_SDMA_MBANK_DATA_BUF0 = 1,\n\tAMDGPU_SDMA_MBANK_DATA_BUF1 = 2,\n\tAMDGPU_SDMA_MBANK_DATA_BUF2 = 3,\n\tAMDGPU_SDMA_MBANK_DATA_BUF3 = 4,\n\tAMDGPU_SDMA_MBANK_DATA_BUF4 = 5,\n\tAMDGPU_SDMA_MBANK_DATA_BUF5 = 6,\n\tAMDGPU_SDMA_MBANK_DATA_BUF6 = 7,\n\tAMDGPU_SDMA_MBANK_DATA_BUF7 = 8,\n\tAMDGPU_SDMA_MBANK_DATA_BUF8 = 9,\n\tAMDGPU_SDMA_MBANK_DATA_BUF9 = 10,\n\tAMDGPU_SDMA_MBANK_DATA_BUF10 = 11,\n\tAMDGPU_SDMA_MBANK_DATA_BUF11 = 12,\n\tAMDGPU_SDMA_MBANK_DATA_BUF12 = 13,\n\tAMDGPU_SDMA_MBANK_DATA_BUF13 = 14,\n\tAMDGPU_SDMA_MBANK_DATA_BUF14 = 15,\n\tAMDGPU_SDMA_MBANK_DATA_BUF15 = 16,\n\tAMDGPU_SDMA_UCODE_BUF = 17,\n\tAMDGPU_SDMA_RB_CMD_BUF = 18,\n\tAMDGPU_SDMA_IB_CMD_BUF = 19,\n\tAMDGPU_SDMA_UTCL1_RD_FIFO = 20,\n\tAMDGPU_SDMA_UTCL1_RDBST_FIFO = 21,\n\tAMDGPU_SDMA_UTCL1_WR_FIFO = 22,\n\tAMDGPU_SDMA_DATA_LUT_FIFO = 23,\n\tAMDGPU_SDMA_SPLIT_DAT_BUF = 24,\n\tAMDGPU_SDMA_MEMORY_BLOCK_LAST,\n};\n\nstruct amdgpu_sdma_ras {\n\tstruct amdgpu_ras_block_object ras_block;\n};\n\nstruct amdgpu_sdma {\n\tstruct amdgpu_sdma_instance instance[AMDGPU_MAX_SDMA_INSTANCES];\n\tstruct amdgpu_irq_src\ttrap_irq;\n\tstruct amdgpu_irq_src\tillegal_inst_irq;\n\tstruct amdgpu_irq_src\tecc_irq;\n\tstruct amdgpu_irq_src\tvm_hole_irq;\n\tstruct amdgpu_irq_src\tdoorbell_invalid_irq;\n\tstruct amdgpu_irq_src\tpool_timeout_irq;\n\tstruct amdgpu_irq_src\tsrbm_write_irq;\n\n\tint\t\t\tnum_instances;\n\tuint32_t \t\tsdma_mask;\n\tint\t\t\tnum_inst_per_aid;\n\tuint32_t                    srbm_soft_reset;\n\tbool\t\t\thas_page_queue;\n\tstruct ras_common_if\t*ras_if;\n\tstruct amdgpu_sdma_ras\t*ras;\n};\n\n \nstruct amdgpu_buffer_funcs {\n\t \n\tuint32_t\tcopy_max_bytes;\n\n\t \n\tunsigned\tcopy_num_dw;\n\n\t \n\tvoid (*emit_copy_buffer)(struct amdgpu_ib *ib,\n\t\t\t\t  \n\t\t\t\t uint64_t src_offset,\n\t\t\t\t  \n\t\t\t\t uint64_t dst_offset,\n\t\t\t\t  \n\t\t\t\t uint32_t byte_count,\n\t\t\t\t bool tmz);\n\n\t \n\tuint32_t\tfill_max_bytes;\n\n\t \n\tunsigned\tfill_num_dw;\n\n\t \n\tvoid (*emit_fill_buffer)(struct amdgpu_ib *ib,\n\t\t\t\t  \n\t\t\t\t uint32_t src_data,\n\t\t\t\t  \n\t\t\t\t uint64_t dst_offset,\n\t\t\t\t  \n\t\t\t\t uint32_t byte_count);\n};\n\n#define amdgpu_emit_copy_buffer(adev, ib, s, d, b, t) (adev)->mman.buffer_funcs->emit_copy_buffer((ib),  (s), (d), (b), (t))\n#define amdgpu_emit_fill_buffer(adev, ib, s, d, b) (adev)->mman.buffer_funcs->emit_fill_buffer((ib), (s), (d), (b))\n\nstruct amdgpu_sdma_instance *\namdgpu_sdma_get_instance_from_ring(struct amdgpu_ring *ring);\nint amdgpu_sdma_get_index_from_ring(struct amdgpu_ring *ring, uint32_t *index);\nuint64_t amdgpu_sdma_get_csa_mc_addr(struct amdgpu_ring *ring, unsigned vmid);\nint amdgpu_sdma_ras_late_init(struct amdgpu_device *adev,\n\t\t\t      struct ras_common_if *ras_block);\nint amdgpu_sdma_process_ras_data_cb(struct amdgpu_device *adev,\n\t\tvoid *err_data,\n\t\tstruct amdgpu_iv_entry *entry);\nint amdgpu_sdma_process_ecc_irq(struct amdgpu_device *adev,\n\t\t\t\t      struct amdgpu_irq_src *source,\n\t\t\t\t      struct amdgpu_iv_entry *entry);\nint amdgpu_sdma_init_microcode(struct amdgpu_device *adev, u32 instance,\n\t\t\t       bool duplicate);\nvoid amdgpu_sdma_destroy_inst_ctx(struct amdgpu_device *adev,\n        bool duplicate);\nvoid amdgpu_sdma_unset_buffer_funcs_helper(struct amdgpu_device *adev);\nint amdgpu_sdma_ras_sw_init(struct amdgpu_device *adev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}