{
  "module_name": "amdgpu_job.h",
  "hash_id": "705e22655f72a98a539ffd17d95887041609274e8663f8b9744df803b2b5e6f1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_job.h",
  "human_readable_source": " \n#ifndef __AMDGPU_JOB_H__\n#define __AMDGPU_JOB_H__\n\n#include <drm/gpu_scheduler.h>\n#include \"amdgpu_sync.h\"\n#include \"amdgpu_ring.h\"\n\n \n#define AMDGPU_PREAMBLE_IB_PRESENT          (1 << 0)\n \n#define AMDGPU_PREAMBLE_IB_PRESENT_FIRST    (1 << 1)\n \n#define AMDGPU_HAVE_CTX_SWITCH              (1 << 2)\n \n#define AMDGPU_IB_PREEMPTED                 (1 << 3)\n\n#define to_amdgpu_job(sched_job)\t\t\\\n\t\tcontainer_of((sched_job), struct amdgpu_job, base)\n\n#define AMDGPU_JOB_GET_VMID(job) ((job) ? (job)->vmid : 0)\n\nstruct amdgpu_fence;\nenum amdgpu_ib_pool_type;\n\nstruct amdgpu_job {\n\tstruct drm_sched_job    base;\n\tstruct amdgpu_vm\t*vm;\n\tstruct amdgpu_sync\texplicit_sync;\n\tstruct dma_fence\thw_fence;\n\tstruct dma_fence\t*gang_submit;\n\tuint32_t\t\tpreamble_status;\n\tuint32_t                preemption_status;\n\tbool                    vm_needs_flush;\n\tbool\t\t\tgds_switch_needed;\n\tbool\t\t\tspm_update_needed;\n\tuint64_t\t\tvm_pd_addr;\n\tunsigned\t\tvmid;\n\tunsigned\t\tpasid;\n\tuint32_t\t\tgds_base, gds_size;\n\tuint32_t\t\tgws_base, gws_size;\n\tuint32_t\t\toa_base, oa_size;\n\tuint64_t\t\tgeneration;\n\n\t \n\tuint64_t\t\tuf_addr;\n\tuint64_t\t\tuf_sequence;\n\n\t \n\tuint64_t\t\tshadow_va;\n\tuint64_t\t\tcsa_va;\n\tuint64_t\t\tgds_va;\n\tbool\t\t\tinit_shadow;\n\n\t \n\tuint32_t\t\tjob_run_counter;\n\n\tuint32_t\t\tnum_ibs;\n\tstruct amdgpu_ib\tibs[];\n};\n\nstatic inline struct amdgpu_ring *amdgpu_job_ring(struct amdgpu_job *job)\n{\n\treturn to_amdgpu_ring(job->base.entity->rq->sched);\n}\n\nint amdgpu_job_alloc(struct amdgpu_device *adev, struct amdgpu_vm *vm,\n\t\t     struct drm_sched_entity *entity, void *owner,\n\t\t     unsigned int num_ibs, struct amdgpu_job **job);\nint amdgpu_job_alloc_with_ib(struct amdgpu_device *adev,\n\t\t\t     struct drm_sched_entity *entity, void *owner,\n\t\t\t     size_t size, enum amdgpu_ib_pool_type pool_type,\n\t\t\t     struct amdgpu_job **job);\nvoid amdgpu_job_set_resources(struct amdgpu_job *job, struct amdgpu_bo *gds,\n\t\t\t      struct amdgpu_bo *gws, struct amdgpu_bo *oa);\nvoid amdgpu_job_free_resources(struct amdgpu_job *job);\nvoid amdgpu_job_set_gang_leader(struct amdgpu_job *job,\n\t\t\t\tstruct amdgpu_job *leader);\nvoid amdgpu_job_free(struct amdgpu_job *job);\nstruct dma_fence *amdgpu_job_submit(struct amdgpu_job *job);\nint amdgpu_job_submit_direct(struct amdgpu_job *job, struct amdgpu_ring *ring,\n\t\t\t     struct dma_fence **fence);\n\nvoid amdgpu_job_stop_all_jobs_on_sched(struct drm_gpu_scheduler *sched);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}