{
  "module_name": "amdgv_sriovmsg.h",
  "hash_id": "148807a740fbc9ab38f88e3c604973fb1d8560e9073ebb4a09c2c3455f4bbb98",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgv_sriovmsg.h",
  "human_readable_source": " \n\n#ifndef AMDGV_SRIOV_MSG__H_\n#define AMDGV_SRIOV_MSG__H_\n\n \n#define AMD_SRIOV_MSG_VBIOS_OFFSET\t     0\n#define AMD_SRIOV_MSG_VBIOS_SIZE_KB\t     64\n#define AMD_SRIOV_MSG_DATAEXCHANGE_OFFSET_KB AMD_SRIOV_MSG_VBIOS_SIZE_KB\n#define AMD_SRIOV_MSG_DATAEXCHANGE_SIZE_KB   4\n\n \n#define AMD_SRIOV_MSG_SIZE_KB                   1\n#define AMD_SRIOV_MSG_PF2VF_OFFSET_KB           AMD_SRIOV_MSG_DATAEXCHANGE_OFFSET_KB\n#define AMD_SRIOV_MSG_VF2PF_OFFSET_KB           (AMD_SRIOV_MSG_PF2VF_OFFSET_KB + AMD_SRIOV_MSG_SIZE_KB)\n#define AMD_SRIOV_MSG_BAD_PAGE_OFFSET_KB        (AMD_SRIOV_MSG_VF2PF_OFFSET_KB + AMD_SRIOV_MSG_SIZE_KB)\n\n \n#define AMD_SRIOV_MSG_FW_VRAM_PF2VF_VER 2\n#define AMD_SRIOV_MSG_FW_VRAM_VF2PF_VER 3\n\n#define AMD_SRIOV_MSG_RESERVE_UCODE 24\n\n#define AMD_SRIOV_MSG_RESERVE_VCN_INST 4\n\nenum amd_sriov_ucode_engine_id {\n\tAMD_SRIOV_UCODE_ID_VCE = 0,\n\tAMD_SRIOV_UCODE_ID_UVD,\n\tAMD_SRIOV_UCODE_ID_MC,\n\tAMD_SRIOV_UCODE_ID_ME,\n\tAMD_SRIOV_UCODE_ID_PFP,\n\tAMD_SRIOV_UCODE_ID_CE,\n\tAMD_SRIOV_UCODE_ID_RLC,\n\tAMD_SRIOV_UCODE_ID_RLC_SRLC,\n\tAMD_SRIOV_UCODE_ID_RLC_SRLG,\n\tAMD_SRIOV_UCODE_ID_RLC_SRLS,\n\tAMD_SRIOV_UCODE_ID_MEC,\n\tAMD_SRIOV_UCODE_ID_MEC2,\n\tAMD_SRIOV_UCODE_ID_SOS,\n\tAMD_SRIOV_UCODE_ID_ASD,\n\tAMD_SRIOV_UCODE_ID_TA_RAS,\n\tAMD_SRIOV_UCODE_ID_TA_XGMI,\n\tAMD_SRIOV_UCODE_ID_SMC,\n\tAMD_SRIOV_UCODE_ID_SDMA,\n\tAMD_SRIOV_UCODE_ID_SDMA2,\n\tAMD_SRIOV_UCODE_ID_VCN,\n\tAMD_SRIOV_UCODE_ID_DMCU,\n\tAMD_SRIOV_UCODE_ID__MAX\n};\n\n#pragma pack(push, 1) \n\nunion amd_sriov_msg_feature_flags {\n\tstruct {\n\t\tuint32_t error_log_collect : 1;\n\t\tuint32_t host_load_ucodes  : 1;\n\t\tuint32_t host_flr_vramlost : 1;\n\t\tuint32_t mm_bw_management  : 1;\n\t\tuint32_t pp_one_vf_mode\t   : 1;\n\t\tuint32_t reg_indirect_acc  : 1;\n\t\tuint32_t av1_support       : 1;\n\t\tuint32_t reserved\t   : 25;\n\t} flags;\n\tuint32_t all;\n};\n\nunion amd_sriov_reg_access_flags {\n\tstruct {\n\t\tuint32_t vf_reg_access_ih \t : 1;\n\t\tuint32_t vf_reg_access_mmhub : 1;\n\t\tuint32_t vf_reg_access_gc \t : 1;\n\t\tuint32_t reserved\t         : 29;\n\t} flags;\n\tuint32_t all;\n};\n\nunion amd_sriov_msg_os_info {\n\tstruct {\n\t\tuint32_t windows  : 1;\n\t\tuint32_t reserved : 31;\n\t} info;\n\tuint32_t all;\n};\n\nstruct amd_sriov_msg_uuid_info {\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t did\t: 16;\n\t\t\tuint32_t fcn\t: 8;\n\t\t\tuint32_t asic_7 : 8;\n\t\t};\n\t\tuint32_t time_low;\n\t};\n\n\tstruct {\n\t\tuint32_t time_mid  : 16;\n\t\tuint32_t time_high : 12;\n\t\tuint32_t version   : 4;\n\t};\n\n\tstruct {\n\t\tstruct {\n\t\t\tuint8_t clk_seq_hi : 6;\n\t\t\tuint8_t variant    : 2;\n\t\t};\n\t\tunion {\n\t\t\tuint8_t clk_seq_low;\n\t\t\tuint8_t asic_6;\n\t\t};\n\t\tuint16_t asic_4;\n\t};\n\n\tuint32_t asic_0;\n};\n\nstruct amd_sriov_msg_pf2vf_info_header {\n\t \n\tuint32_t size;\n\t \n\tuint32_t version;\n\t \n\tuint32_t reserved[2];\n};\n\n#define AMD_SRIOV_MSG_PF2VF_INFO_FILLED_SIZE (48)\nstruct amd_sriov_msg_pf2vf_info {\n\t \n\tstruct amd_sriov_msg_pf2vf_info_header header;\n\t \n\tuint32_t checksum;\n\t \n\tunion amd_sriov_msg_feature_flags feature_flags;\n\t \n\tuint32_t hevc_enc_max_mb_per_second;\n\t \n\tuint32_t hevc_enc_max_mb_per_frame;\n\t \n\tuint32_t avc_enc_max_mb_per_second;\n\t \n\tuint32_t avc_enc_max_mb_per_frame;\n\t \n\tuint64_t mecfw_offset;\n\t \n\tuint32_t mecfw_size;\n\t \n\tuint64_t uvdfw_offset;\n\t \n\tuint32_t uvdfw_size;\n\t \n\tuint64_t vcefw_offset;\n\t \n\tuint32_t vcefw_size;\n\t \n\tuint32_t bp_block_offset_low;\n\tuint32_t bp_block_offset_high;\n\t \n\tuint32_t bp_block_size;\n\t \n\tuint32_t vf2pf_update_interval_ms;\n\t \n\tuint64_t uuid;\n\tuint32_t fcn_idx;\n\t \n\tunion amd_sriov_reg_access_flags reg_access_flags;\n\t \n\tstruct {\n\t\tuint32_t decode_max_dimension_pixels;\n\t\tuint32_t decode_max_frame_pixels;\n\t\tuint32_t encode_max_dimension_pixels;\n\t\tuint32_t encode_max_frame_pixels;\n\t} mm_bw_management[AMD_SRIOV_MSG_RESERVE_VCN_INST];\n\t \n\tstruct amd_sriov_msg_uuid_info uuid_info;\n\t \n\tuint32_t pcie_atomic_ops_support_flags;\n\t \n\tuint32_t reserved[256 - AMD_SRIOV_MSG_PF2VF_INFO_FILLED_SIZE];\n};\n\nstruct amd_sriov_msg_vf2pf_info_header {\n\t \n\tuint32_t size;\n\t \n\tuint32_t version;\n\t \n\tuint32_t reserved[2];\n};\n\n#define AMD_SRIOV_MSG_VF2PF_INFO_FILLED_SIZE (70)\nstruct amd_sriov_msg_vf2pf_info {\n\t \n\tstruct amd_sriov_msg_vf2pf_info_header header;\n\tuint32_t checksum;\n\t \n\tuint8_t driver_version[64];\n\t \n\tuint32_t driver_cert;\n\t \n\tunion amd_sriov_msg_os_info os_info;\n\t \n\tuint32_t fb_usage;\n\t \n\tuint32_t gfx_usage;\n\t \n\tuint32_t gfx_health;\n\t \n\tuint32_t compute_usage;\n\t \n\tuint32_t compute_health;\n\t \n\tuint32_t avc_enc_usage;\n\t \n\tuint32_t avc_enc_health;\n\t \n\tuint32_t hevc_enc_usage;\n\t \n\tuint32_t hevc_enc_health;\n\t \n\tuint32_t encode_usage;\n\tuint32_t decode_usage;\n\t \n\tuint32_t pf2vf_version_required;\n\t \n\tuint32_t fb_vis_usage;\n\tuint32_t fb_vis_size;\n\tuint32_t fb_size;\n\t \n\tstruct {\n\t\tuint8_t id;\n\t\tuint32_t version;\n\t} ucode_info[AMD_SRIOV_MSG_RESERVE_UCODE];\n\tuint64_t dummy_page_addr;\n\n\t \n\tuint32_t reserved[256 - AMD_SRIOV_MSG_VF2PF_INFO_FILLED_SIZE];\n};\n\n \nenum amd_sriov_mailbox_request_message {\n\tMB_REQ_MSG_REQ_GPU_INIT_ACCESS = 1,\n\tMB_REQ_MSG_REL_GPU_INIT_ACCESS,\n\tMB_REQ_MSG_REQ_GPU_FINI_ACCESS,\n\tMB_REQ_MSG_REL_GPU_FINI_ACCESS,\n\tMB_REQ_MSG_REQ_GPU_RESET_ACCESS,\n\tMB_REQ_MSG_REQ_GPU_INIT_DATA,\n\n\tMB_REQ_MSG_LOG_VF_ERROR = 200,\n};\n\n \nenum amd_sriov_mailbox_response_message {\n\tMB_RES_MSG_CLR_MSG_BUF = 0,\n\tMB_RES_MSG_READY_TO_ACCESS_GPU = 1,\n\tMB_RES_MSG_FLR_NOTIFICATION,\n\tMB_RES_MSG_FLR_NOTIFICATION_COMPLETION,\n\tMB_RES_MSG_SUCCESS,\n\tMB_RES_MSG_FAIL,\n\tMB_RES_MSG_QUERY_ALIVE,\n\tMB_RES_MSG_GPU_INIT_DATA_READY,\n\n\tMB_RES_MSG_TEXT_MESSAGE = 255\n};\n\n \nenum amd_sriov_gpu_init_data_version {\n\tGPU_INIT_DATA_READY_V1 = 1,\n};\n\n#pragma pack(pop) \n\n \nunsigned int amd_sriov_msg_checksum(void *obj, unsigned long obj_size, unsigned int key,\n\t\t\t\t    unsigned int checksum);\n\n \n#ifdef __linux__\n#define stringification(s)  _stringification(s)\n#define _stringification(s) #s\n\n_Static_assert(\n\tsizeof(struct amd_sriov_msg_vf2pf_info) == AMD_SRIOV_MSG_SIZE_KB << 10,\n\t\"amd_sriov_msg_vf2pf_info must be \" stringification(AMD_SRIOV_MSG_SIZE_KB) \" KB\");\n\n_Static_assert(\n\tsizeof(struct amd_sriov_msg_pf2vf_info) == AMD_SRIOV_MSG_SIZE_KB << 10,\n\t\"amd_sriov_msg_pf2vf_info must be \" stringification(AMD_SRIOV_MSG_SIZE_KB) \" KB\");\n\n_Static_assert(AMD_SRIOV_MSG_RESERVE_UCODE % 4 == 0,\n\t       \"AMD_SRIOV_MSG_RESERVE_UCODE must be multiple of 4\");\n\n_Static_assert(AMD_SRIOV_MSG_RESERVE_UCODE > AMD_SRIOV_UCODE_ID__MAX,\n\t       \"AMD_SRIOV_MSG_RESERVE_UCODE must be bigger than AMD_SRIOV_UCODE_ID__MAX\");\n\n#undef _stringification\n#undef stringification\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}