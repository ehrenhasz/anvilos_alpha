{
  "module_name": "amdgpu_umc.h",
  "hash_id": "d94602e2564d70d1372e4bb254ca62a5edc8cf5fe70b50acbe3d2262e46b33bf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_umc.h",
  "human_readable_source": " \n#ifndef __AMDGPU_UMC_H__\n#define __AMDGPU_UMC_H__\n#include \"amdgpu_ras.h\"\n\n \n#define ADDR_OF_4KB_BLOCK(addr)\t\t\t(((addr) & ~0xffULL) << 4)\n \n#define ADDR_OF_8KB_BLOCK(addr)\t\t\t(((addr) & ~0xffULL) << 5)\n \n#define ADDR_OF_256B_BLOCK(channel_index)\t((channel_index) << 8)\n \n#define OFFSET_IN_256B_BLOCK(addr)\t\t((addr) & 0xffULL)\n\n#define LOOP_UMC_INST(umc_inst) for ((umc_inst) = 0; (umc_inst) < adev->umc.umc_inst_num; (umc_inst)++)\n#define LOOP_UMC_CH_INST(ch_inst) for ((ch_inst) = 0; (ch_inst) < adev->umc.channel_inst_num; (ch_inst)++)\n#define LOOP_UMC_INST_AND_CH(umc_inst, ch_inst) LOOP_UMC_INST((umc_inst)) LOOP_UMC_CH_INST((ch_inst))\n\n#define LOOP_UMC_NODE_INST(node_inst) \\\n\t\tfor_each_set_bit((node_inst), &(adev->umc.active_mask), adev->umc.node_inst_num)\n\n#define LOOP_UMC_EACH_NODE_INST_AND_CH(node_inst, umc_inst, ch_inst) \\\n\t\tLOOP_UMC_NODE_INST((node_inst)) LOOP_UMC_INST_AND_CH((umc_inst), (ch_inst))\n\n\ntypedef int (*umc_func)(struct amdgpu_device *adev, uint32_t node_inst,\n\t\t\tuint32_t umc_inst, uint32_t ch_inst, void *data);\n\nstruct amdgpu_umc_ras {\n\tstruct amdgpu_ras_block_object ras_block;\n\tvoid (*err_cnt_init)(struct amdgpu_device *adev);\n\tbool (*query_ras_poison_mode)(struct amdgpu_device *adev);\n\tvoid (*ecc_info_query_ras_error_count)(struct amdgpu_device *adev,\n\t\t\t\t      void *ras_error_status);\n\tvoid (*ecc_info_query_ras_error_address)(struct amdgpu_device *adev,\n\t\t\t\t\tvoid *ras_error_status);\n\t \n\tvoid (*set_eeprom_table_version)(struct amdgpu_ras_eeprom_table_header *hdr);\n};\n\nstruct amdgpu_umc_funcs {\n\tvoid (*init_registers)(struct amdgpu_device *adev);\n};\n\nstruct amdgpu_umc {\n\t \n\tuint32_t max_ras_err_cnt_per_query;\n\t \n\tuint32_t channel_inst_num;\n\t \n\tuint32_t umc_inst_num;\n\n\t \n\tuint32_t node_inst_num;\n\n\t \n\tuint32_t channel_offs;\n\t \n\tuint32_t retire_unit;\n\t \n\tconst uint32_t *channel_idx_tbl;\n\tstruct ras_common_if *ras_if;\n\n\tconst struct amdgpu_umc_funcs *funcs;\n\tstruct amdgpu_umc_ras *ras;\n\n\t \n\tunsigned long active_mask;\n};\n\nint amdgpu_umc_ras_sw_init(struct amdgpu_device *adev);\nint amdgpu_umc_ras_late_init(struct amdgpu_device *adev, struct ras_common_if *ras_block);\nint amdgpu_umc_poison_handler(struct amdgpu_device *adev, bool reset);\nint amdgpu_umc_process_ecc_irq(struct amdgpu_device *adev,\n\t\tstruct amdgpu_irq_src *source,\n\t\tstruct amdgpu_iv_entry *entry);\nvoid amdgpu_umc_fill_error_record(struct ras_err_data *err_data,\n\t\tuint64_t err_addr,\n\t\tuint64_t retired_page,\n\t\tuint32_t channel_index,\n\t\tuint32_t umc_inst);\n\nint amdgpu_umc_process_ras_data_cb(struct amdgpu_device *adev,\n\t\tvoid *ras_error_status,\n\t\tstruct amdgpu_iv_entry *entry);\nint amdgpu_umc_page_retirement_mca(struct amdgpu_device *adev,\n\t\t\tuint64_t err_addr, uint32_t ch_inst, uint32_t umc_inst);\n\nint amdgpu_umc_loop_channels(struct amdgpu_device *adev,\n\t\t\tumc_func func, void *data);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}