{
  "module_name": "gfx_v9_4_2.c",
  "hash_id": "41813f64ccd30388a3677fc0f42fcb38205fa8e760257116c93525133337a3a1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c",
  "human_readable_source": " \n#include \"amdgpu.h\"\n#include \"soc15.h\"\n#include \"soc15d.h\"\n\n#include \"gc/gc_9_4_2_offset.h\"\n#include \"gc/gc_9_4_2_sh_mask.h\"\n#include \"gfx_v9_0.h\"\n\n#include \"gfx_v9_4_2.h\"\n#include \"amdgpu_ras.h\"\n#include \"amdgpu_gfx.h\"\n\n#define SE_ID_MAX 8\n#define CU_ID_MAX 16\n#define SIMD_ID_MAX 4\n#define WAVE_ID_MAX 10\n\nenum gfx_v9_4_2_utc_type {\n\tVML2_MEM,\n\tVML2_WALKER_MEM,\n\tUTCL2_MEM,\n\tATC_L2_CACHE_2M,\n\tATC_L2_CACHE_32K,\n\tATC_L2_CACHE_4K\n};\n\nstruct gfx_v9_4_2_utc_block {\n\tenum gfx_v9_4_2_utc_type type;\n\tuint32_t num_banks;\n\tuint32_t num_ways;\n\tuint32_t num_mem_blocks;\n\tstruct soc15_reg idx_reg;\n\tstruct soc15_reg data_reg;\n\tuint32_t sec_count_mask;\n\tuint32_t sec_count_shift;\n\tuint32_t ded_count_mask;\n\tuint32_t ded_count_shift;\n\tuint32_t clear;\n};\n\nstatic const struct soc15_reg_golden golden_settings_gc_9_4_2_alde_die_0[] = {\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_0, 0x3fffffff, 0x141dc920),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_1, 0x3fffffff, 0x3b458b93),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_2, 0x3fffffff, 0x1a4f5583),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_3, 0x3fffffff, 0x317717f6),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_4, 0x3fffffff, 0x107cc1e6),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_5, 0x3ff, 0x351),\n};\n\nstatic const struct soc15_reg_golden golden_settings_gc_9_4_2_alde_die_1[] = {\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_0, 0x3fffffff, 0x2591aa38),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_1, 0x3fffffff, 0xac9e88b),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_2, 0x3fffffff, 0x2bc3369b),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_3, 0x3fffffff, 0xfb74ee),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_4, 0x3fffffff, 0x21f0a2fe),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_CHAN_STEER_5, 0x3ff, 0x49),\n};\n\nstatic const struct soc15_reg_golden golden_settings_gc_9_4_2_alde[] = {\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regGB_ADDR_CONFIG, 0xffff77ff, 0x2a114042),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTA_CNTL_AUX, 0xfffffeef, 0x10b0000),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCP_UTCL1_CNTL1, 0xffffffff, 0x30800400),\n\tSOC15_REG_GOLDEN_VALUE(GC, 0, regTCI_CNTL_3, 0xff, 0x20),\n};\n\n \nstatic const u32 vgpr_init_compute_shader_aldebaran[] = {\n\t0xb8840904, 0xb8851a04, 0xb8861344, 0xb8831804, 0x9208ff06, 0x00000280,\n\t0x9209a805, 0x920a8a04, 0x81080908, 0x81080a08, 0x81080308, 0x8e078208,\n\t0x81078407, 0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8a0000, 0xd3d94000,\n\t0x18000080, 0xd3d94001, 0x18000080, 0xd3d94002, 0x18000080, 0xd3d94003,\n\t0x18000080, 0xd3d94004, 0x18000080, 0xd3d94005, 0x18000080, 0xd3d94006,\n\t0x18000080, 0xd3d94007, 0x18000080, 0xd3d94008, 0x18000080, 0xd3d94009,\n\t0x18000080, 0xd3d9400a, 0x18000080, 0xd3d9400b, 0x18000080, 0xd3d9400c,\n\t0x18000080, 0xd3d9400d, 0x18000080, 0xd3d9400e, 0x18000080, 0xd3d9400f,\n\t0x18000080, 0xd3d94010, 0x18000080, 0xd3d94011, 0x18000080, 0xd3d94012,\n\t0x18000080, 0xd3d94013, 0x18000080, 0xd3d94014, 0x18000080, 0xd3d94015,\n\t0x18000080, 0xd3d94016, 0x18000080, 0xd3d94017, 0x18000080, 0xd3d94018,\n\t0x18000080, 0xd3d94019, 0x18000080, 0xd3d9401a, 0x18000080, 0xd3d9401b,\n\t0x18000080, 0xd3d9401c, 0x18000080, 0xd3d9401d, 0x18000080, 0xd3d9401e,\n\t0x18000080, 0xd3d9401f, 0x18000080, 0xd3d94020, 0x18000080, 0xd3d94021,\n\t0x18000080, 0xd3d94022, 0x18000080, 0xd3d94023, 0x18000080, 0xd3d94024,\n\t0x18000080, 0xd3d94025, 0x18000080, 0xd3d94026, 0x18000080, 0xd3d94027,\n\t0x18000080, 0xd3d94028, 0x18000080, 0xd3d94029, 0x18000080, 0xd3d9402a,\n\t0x18000080, 0xd3d9402b, 0x18000080, 0xd3d9402c, 0x18000080, 0xd3d9402d,\n\t0x18000080, 0xd3d9402e, 0x18000080, 0xd3d9402f, 0x18000080, 0xd3d94030,\n\t0x18000080, 0xd3d94031, 0x18000080, 0xd3d94032, 0x18000080, 0xd3d94033,\n\t0x18000080, 0xd3d94034, 0x18000080, 0xd3d94035, 0x18000080, 0xd3d94036,\n\t0x18000080, 0xd3d94037, 0x18000080, 0xd3d94038, 0x18000080, 0xd3d94039,\n\t0x18000080, 0xd3d9403a, 0x18000080, 0xd3d9403b, 0x18000080, 0xd3d9403c,\n\t0x18000080, 0xd3d9403d, 0x18000080, 0xd3d9403e, 0x18000080, 0xd3d9403f,\n\t0x18000080, 0xd3d94040, 0x18000080, 0xd3d94041, 0x18000080, 0xd3d94042,\n\t0x18000080, 0xd3d94043, 0x18000080, 0xd3d94044, 0x18000080, 0xd3d94045,\n\t0x18000080, 0xd3d94046, 0x18000080, 0xd3d94047, 0x18000080, 0xd3d94048,\n\t0x18000080, 0xd3d94049, 0x18000080, 0xd3d9404a, 0x18000080, 0xd3d9404b,\n\t0x18000080, 0xd3d9404c, 0x18000080, 0xd3d9404d, 0x18000080, 0xd3d9404e,\n\t0x18000080, 0xd3d9404f, 0x18000080, 0xd3d94050, 0x18000080, 0xd3d94051,\n\t0x18000080, 0xd3d94052, 0x18000080, 0xd3d94053, 0x18000080, 0xd3d94054,\n\t0x18000080, 0xd3d94055, 0x18000080, 0xd3d94056, 0x18000080, 0xd3d94057,\n\t0x18000080, 0xd3d94058, 0x18000080, 0xd3d94059, 0x18000080, 0xd3d9405a,\n\t0x18000080, 0xd3d9405b, 0x18000080, 0xd3d9405c, 0x18000080, 0xd3d9405d,\n\t0x18000080, 0xd3d9405e, 0x18000080, 0xd3d9405f, 0x18000080, 0xd3d94060,\n\t0x18000080, 0xd3d94061, 0x18000080, 0xd3d94062, 0x18000080, 0xd3d94063,\n\t0x18000080, 0xd3d94064, 0x18000080, 0xd3d94065, 0x18000080, 0xd3d94066,\n\t0x18000080, 0xd3d94067, 0x18000080, 0xd3d94068, 0x18000080, 0xd3d94069,\n\t0x18000080, 0xd3d9406a, 0x18000080, 0xd3d9406b, 0x18000080, 0xd3d9406c,\n\t0x18000080, 0xd3d9406d, 0x18000080, 0xd3d9406e, 0x18000080, 0xd3d9406f,\n\t0x18000080, 0xd3d94070, 0x18000080, 0xd3d94071, 0x18000080, 0xd3d94072,\n\t0x18000080, 0xd3d94073, 0x18000080, 0xd3d94074, 0x18000080, 0xd3d94075,\n\t0x18000080, 0xd3d94076, 0x18000080, 0xd3d94077, 0x18000080, 0xd3d94078,\n\t0x18000080, 0xd3d94079, 0x18000080, 0xd3d9407a, 0x18000080, 0xd3d9407b,\n\t0x18000080, 0xd3d9407c, 0x18000080, 0xd3d9407d, 0x18000080, 0xd3d9407e,\n\t0x18000080, 0xd3d9407f, 0x18000080, 0xd3d94080, 0x18000080, 0xd3d94081,\n\t0x18000080, 0xd3d94082, 0x18000080, 0xd3d94083, 0x18000080, 0xd3d94084,\n\t0x18000080, 0xd3d94085, 0x18000080, 0xd3d94086, 0x18000080, 0xd3d94087,\n\t0x18000080, 0xd3d94088, 0x18000080, 0xd3d94089, 0x18000080, 0xd3d9408a,\n\t0x18000080, 0xd3d9408b, 0x18000080, 0xd3d9408c, 0x18000080, 0xd3d9408d,\n\t0x18000080, 0xd3d9408e, 0x18000080, 0xd3d9408f, 0x18000080, 0xd3d94090,\n\t0x18000080, 0xd3d94091, 0x18000080, 0xd3d94092, 0x18000080, 0xd3d94093,\n\t0x18000080, 0xd3d94094, 0x18000080, 0xd3d94095, 0x18000080, 0xd3d94096,\n\t0x18000080, 0xd3d94097, 0x18000080, 0xd3d94098, 0x18000080, 0xd3d94099,\n\t0x18000080, 0xd3d9409a, 0x18000080, 0xd3d9409b, 0x18000080, 0xd3d9409c,\n\t0x18000080, 0xd3d9409d, 0x18000080, 0xd3d9409e, 0x18000080, 0xd3d9409f,\n\t0x18000080, 0xd3d940a0, 0x18000080, 0xd3d940a1, 0x18000080, 0xd3d940a2,\n\t0x18000080, 0xd3d940a3, 0x18000080, 0xd3d940a4, 0x18000080, 0xd3d940a5,\n\t0x18000080, 0xd3d940a6, 0x18000080, 0xd3d940a7, 0x18000080, 0xd3d940a8,\n\t0x18000080, 0xd3d940a9, 0x18000080, 0xd3d940aa, 0x18000080, 0xd3d940ab,\n\t0x18000080, 0xd3d940ac, 0x18000080, 0xd3d940ad, 0x18000080, 0xd3d940ae,\n\t0x18000080, 0xd3d940af, 0x18000080, 0xd3d940b0, 0x18000080, 0xd3d940b1,\n\t0x18000080, 0xd3d940b2, 0x18000080, 0xd3d940b3, 0x18000080, 0xd3d940b4,\n\t0x18000080, 0xd3d940b5, 0x18000080, 0xd3d940b6, 0x18000080, 0xd3d940b7,\n\t0x18000080, 0xd3d940b8, 0x18000080, 0xd3d940b9, 0x18000080, 0xd3d940ba,\n\t0x18000080, 0xd3d940bb, 0x18000080, 0xd3d940bc, 0x18000080, 0xd3d940bd,\n\t0x18000080, 0xd3d940be, 0x18000080, 0xd3d940bf, 0x18000080, 0xd3d940c0,\n\t0x18000080, 0xd3d940c1, 0x18000080, 0xd3d940c2, 0x18000080, 0xd3d940c3,\n\t0x18000080, 0xd3d940c4, 0x18000080, 0xd3d940c5, 0x18000080, 0xd3d940c6,\n\t0x18000080, 0xd3d940c7, 0x18000080, 0xd3d940c8, 0x18000080, 0xd3d940c9,\n\t0x18000080, 0xd3d940ca, 0x18000080, 0xd3d940cb, 0x18000080, 0xd3d940cc,\n\t0x18000080, 0xd3d940cd, 0x18000080, 0xd3d940ce, 0x18000080, 0xd3d940cf,\n\t0x18000080, 0xd3d940d0, 0x18000080, 0xd3d940d1, 0x18000080, 0xd3d940d2,\n\t0x18000080, 0xd3d940d3, 0x18000080, 0xd3d940d4, 0x18000080, 0xd3d940d5,\n\t0x18000080, 0xd3d940d6, 0x18000080, 0xd3d940d7, 0x18000080, 0xd3d940d8,\n\t0x18000080, 0xd3d940d9, 0x18000080, 0xd3d940da, 0x18000080, 0xd3d940db,\n\t0x18000080, 0xd3d940dc, 0x18000080, 0xd3d940dd, 0x18000080, 0xd3d940de,\n\t0x18000080, 0xd3d940df, 0x18000080, 0xd3d940e0, 0x18000080, 0xd3d940e1,\n\t0x18000080, 0xd3d940e2, 0x18000080, 0xd3d940e3, 0x18000080, 0xd3d940e4,\n\t0x18000080, 0xd3d940e5, 0x18000080, 0xd3d940e6, 0x18000080, 0xd3d940e7,\n\t0x18000080, 0xd3d940e8, 0x18000080, 0xd3d940e9, 0x18000080, 0xd3d940ea,\n\t0x18000080, 0xd3d940eb, 0x18000080, 0xd3d940ec, 0x18000080, 0xd3d940ed,\n\t0x18000080, 0xd3d940ee, 0x18000080, 0xd3d940ef, 0x18000080, 0xd3d940f0,\n\t0x18000080, 0xd3d940f1, 0x18000080, 0xd3d940f2, 0x18000080, 0xd3d940f3,\n\t0x18000080, 0xd3d940f4, 0x18000080, 0xd3d940f5, 0x18000080, 0xd3d940f6,\n\t0x18000080, 0xd3d940f7, 0x18000080, 0xd3d940f8, 0x18000080, 0xd3d940f9,\n\t0x18000080, 0xd3d940fa, 0x18000080, 0xd3d940fb, 0x18000080, 0xd3d940fc,\n\t0x18000080, 0xd3d940fd, 0x18000080, 0xd3d940fe, 0x18000080, 0xd3d940ff,\n\t0x18000080, 0xb07c0000, 0xbe8a00ff, 0x000000f8, 0xbf11080a, 0x7e000280,\n\t0x7e020280, 0x7e040280, 0x7e060280, 0x7e080280, 0x7e0a0280, 0x7e0c0280,\n\t0x7e0e0280, 0x808a880a, 0xbe80320a, 0xbf84fff5, 0xbf9c0000, 0xd28c0001,\n\t0x0001007f, 0xd28d0001, 0x0002027e, 0x10020288, 0xbe8b0004, 0xb78b4000,\n\t0xd1196a01, 0x00001701, 0xbe8a0087, 0xbefc00c1, 0xd89c4000, 0x00020201,\n\t0xd89cc080, 0x00040401, 0x320202ff, 0x00000800, 0x808a810a, 0xbf84fff8,\n\t0xbf810000,\n};\n\nconst struct soc15_reg_entry vgpr_init_regs_aldebaran[] = {\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_RESOURCE_LIMITS), 0x0000000 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_X), 0x40 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Y), 4 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Z), 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC1), 0xbf },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC2), 0x400006 },   \n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC3), 0x3F },  \n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE0), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE1), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE2), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE3), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE4), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE5), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE6), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE7), 0xffffffff },\n};\n\n \nstatic const u32 sgpr112_init_compute_shader_aldebaran[] = {\n\t0xb8840904, 0xb8851a04, 0xb8861344, 0xb8831804, 0x9208ff06, 0x00000280,\n\t0x9209a805, 0x920a8a04, 0x81080908, 0x81080a08, 0x81080308, 0x8e078208,\n\t0x81078407, 0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8e003f, 0xc0030200,\n\t0x00000000, 0xbf8c0000, 0xbf06ff08, 0xdeadbeaf, 0xbf84fff9, 0x81028102,\n\t0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8a0000, 0xbefc0080, 0xbeea0080,\n\t0xbeeb0080, 0xbf00f280, 0xbee60080, 0xbee70080, 0xbee80080, 0xbee90080,\n\t0xbefe0080, 0xbeff0080, 0xbe880080, 0xbe890080, 0xbe8a0080, 0xbe8b0080,\n\t0xbe8c0080, 0xbe8d0080, 0xbe8e0080, 0xbe8f0080, 0xbe900080, 0xbe910080,\n\t0xbe920080, 0xbe930080, 0xbe940080, 0xbe950080, 0xbe960080, 0xbe970080,\n\t0xbe980080, 0xbe990080, 0xbe9a0080, 0xbe9b0080, 0xbe9c0080, 0xbe9d0080,\n\t0xbe9e0080, 0xbe9f0080, 0xbea00080, 0xbea10080, 0xbea20080, 0xbea30080,\n\t0xbea40080, 0xbea50080, 0xbea60080, 0xbea70080, 0xbea80080, 0xbea90080,\n\t0xbeaa0080, 0xbeab0080, 0xbeac0080, 0xbead0080, 0xbeae0080, 0xbeaf0080,\n\t0xbeb00080, 0xbeb10080, 0xbeb20080, 0xbeb30080, 0xbeb40080, 0xbeb50080,\n\t0xbeb60080, 0xbeb70080, 0xbeb80080, 0xbeb90080, 0xbeba0080, 0xbebb0080,\n\t0xbebc0080, 0xbebd0080, 0xbebe0080, 0xbebf0080, 0xbec00080, 0xbec10080,\n\t0xbec20080, 0xbec30080, 0xbec40080, 0xbec50080, 0xbec60080, 0xbec70080,\n\t0xbec80080, 0xbec90080, 0xbeca0080, 0xbecb0080, 0xbecc0080, 0xbecd0080,\n\t0xbece0080, 0xbecf0080, 0xbed00080, 0xbed10080, 0xbed20080, 0xbed30080,\n\t0xbed40080, 0xbed50080, 0xbed60080, 0xbed70080, 0xbed80080, 0xbed90080,\n\t0xbeda0080, 0xbedb0080, 0xbedc0080, 0xbedd0080, 0xbede0080, 0xbedf0080,\n\t0xbee00080, 0xbee10080, 0xbee20080, 0xbee30080, 0xbee40080, 0xbee50080,\n\t0xbf810000\n};\n\nconst struct soc15_reg_entry sgpr112_init_regs_aldebaran[] = {\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_RESOURCE_LIMITS), 0x0000000 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_X), 0x40 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Y), 8 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Z), 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC1), 0x340 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC2), 0x6 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC3), 0x0 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE0), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE1), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE2), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE3), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE4), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE5), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE6), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE7), 0xffffffff },\n};\n\nstatic const u32 sgpr96_init_compute_shader_aldebaran[] = {\n\t0xb8840904, 0xb8851a04, 0xb8861344, 0xb8831804, 0x9208ff06, 0x00000280,\n\t0x9209a805, 0x920a8a04, 0x81080908, 0x81080a08, 0x81080308, 0x8e078208,\n\t0x81078407, 0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8e003f, 0xc0030200,\n\t0x00000000, 0xbf8c0000, 0xbf06ff08, 0xdeadbeaf, 0xbf84fff9, 0x81028102,\n\t0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8a0000, 0xbefc0080, 0xbeea0080,\n\t0xbeeb0080, 0xbf00f280, 0xbee60080, 0xbee70080, 0xbee80080, 0xbee90080,\n\t0xbefe0080, 0xbeff0080, 0xbe880080, 0xbe890080, 0xbe8a0080, 0xbe8b0080,\n\t0xbe8c0080, 0xbe8d0080, 0xbe8e0080, 0xbe8f0080, 0xbe900080, 0xbe910080,\n\t0xbe920080, 0xbe930080, 0xbe940080, 0xbe950080, 0xbe960080, 0xbe970080,\n\t0xbe980080, 0xbe990080, 0xbe9a0080, 0xbe9b0080, 0xbe9c0080, 0xbe9d0080,\n\t0xbe9e0080, 0xbe9f0080, 0xbea00080, 0xbea10080, 0xbea20080, 0xbea30080,\n\t0xbea40080, 0xbea50080, 0xbea60080, 0xbea70080, 0xbea80080, 0xbea90080,\n\t0xbeaa0080, 0xbeab0080, 0xbeac0080, 0xbead0080, 0xbeae0080, 0xbeaf0080,\n\t0xbeb00080, 0xbeb10080, 0xbeb20080, 0xbeb30080, 0xbeb40080, 0xbeb50080,\n\t0xbeb60080, 0xbeb70080, 0xbeb80080, 0xbeb90080, 0xbeba0080, 0xbebb0080,\n\t0xbebc0080, 0xbebd0080, 0xbebe0080, 0xbebf0080, 0xbec00080, 0xbec10080,\n\t0xbec20080, 0xbec30080, 0xbec40080, 0xbec50080, 0xbec60080, 0xbec70080,\n\t0xbec80080, 0xbec90080, 0xbeca0080, 0xbecb0080, 0xbecc0080, 0xbecd0080,\n\t0xbece0080, 0xbecf0080, 0xbed00080, 0xbed10080, 0xbed20080, 0xbed30080,\n\t0xbed40080, 0xbed50080, 0xbed60080, 0xbed70080, 0xbed80080, 0xbed90080,\n\t0xbf810000,\n};\n\nconst struct soc15_reg_entry sgpr96_init_regs_aldebaran[] = {\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_RESOURCE_LIMITS), 0x0000000 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_X), 0x40 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Y), 0xc },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Z), 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC1), 0x2c0 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC2), 0x6 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC3), 0x0 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE0), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE1), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE2), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE3), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE4), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE5), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE6), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE7), 0xffffffff },\n};\n\n \nstatic const u32 sgpr64_init_compute_shader_aldebaran[] = {\n\t0xb8840904, 0xb8851a04, 0xb8861344, 0xb8831804, 0x9208ff06, 0x00000280,\n\t0x9209a805, 0x920a8a04, 0x81080908, 0x81080a08, 0x81080308, 0x8e078208,\n\t0x81078407, 0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8e003f, 0xc0030200,\n\t0x00000000, 0xbf8c0000, 0xbf06ff08, 0xdeadbeaf, 0xbf84fff9, 0x81028102,\n\t0xc0410080, 0x00000007, 0xbf8c0000, 0xbf8a0000, 0xbefc0080, 0xbeea0080,\n\t0xbeeb0080, 0xbf00f280, 0xbee60080, 0xbee70080, 0xbee80080, 0xbee90080,\n\t0xbefe0080, 0xbeff0080, 0xbe880080, 0xbe890080, 0xbe8a0080, 0xbe8b0080,\n\t0xbe8c0080, 0xbe8d0080, 0xbe8e0080, 0xbe8f0080, 0xbe900080, 0xbe910080,\n\t0xbe920080, 0xbe930080, 0xbe940080, 0xbe950080, 0xbe960080, 0xbe970080,\n\t0xbe980080, 0xbe990080, 0xbe9a0080, 0xbe9b0080, 0xbe9c0080, 0xbe9d0080,\n\t0xbe9e0080, 0xbe9f0080, 0xbea00080, 0xbea10080, 0xbea20080, 0xbea30080,\n\t0xbea40080, 0xbea50080, 0xbea60080, 0xbea70080, 0xbea80080, 0xbea90080,\n\t0xbeaa0080, 0xbeab0080, 0xbeac0080, 0xbead0080, 0xbeae0080, 0xbeaf0080,\n\t0xbeb00080, 0xbeb10080, 0xbeb20080, 0xbeb30080, 0xbeb40080, 0xbeb50080,\n\t0xbeb60080, 0xbeb70080, 0xbeb80080, 0xbeb90080, 0xbf810000,\n};\n\nconst struct soc15_reg_entry sgpr64_init_regs_aldebaran[] = {\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_RESOURCE_LIMITS), 0x0000000 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_X), 0x40 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Y), 0x10 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_NUM_THREAD_Z), 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC1), 0x1c0 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC2), 0x6 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_PGM_RSRC3), 0x0 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE0), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE1), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE2), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE3), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE4), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE5), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE6), 0xffffffff },\n\t{ SOC15_REG_ENTRY(GC, 0, regCOMPUTE_STATIC_THREAD_MGMT_SE7), 0xffffffff },\n};\n\nstatic int gfx_v9_4_2_run_shader(struct amdgpu_device *adev,\n\t\t\t\t struct amdgpu_ring *ring,\n\t\t\t\t struct amdgpu_ib *ib,\n\t\t\t\t const u32 *shader_ptr, u32 shader_size,\n\t\t\t\t const struct soc15_reg_entry *init_regs, u32 regs_size,\n\t\t\t\t u32 compute_dim_x, u64 wb_gpu_addr, u32 pattern,\n\t\t\t\t struct dma_fence **fence_ptr)\n{\n\tint r, i;\n\tuint32_t total_size, shader_offset;\n\tu64 gpu_addr;\n\n\ttotal_size = (regs_size * 3 + 4 + 5 + 5) * 4;\n\ttotal_size = ALIGN(total_size, 256);\n\tshader_offset = total_size;\n\ttotal_size += ALIGN(shader_size, 256);\n\n\t \n\tmemset(ib, 0, sizeof(*ib));\n\tr = amdgpu_ib_get(adev, NULL, total_size,\n\t\t\t\t\tAMDGPU_IB_POOL_DIRECT, ib);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to get ib (%d).\\n\", r);\n\t\treturn r;\n\t}\n\n\t \n\tfor (i = 0; i < shader_size/sizeof(u32); i++)\n\t\tib->ptr[i + (shader_offset / 4)] = shader_ptr[i];\n\n\t \n\tib->length_dw = 0;\n\n\t \n\tfor (i = 0; i < regs_size; i++) {\n\t\tib->ptr[ib->length_dw++] = PACKET3(PACKET3_SET_SH_REG, 1);\n\t\tib->ptr[ib->length_dw++] = SOC15_REG_ENTRY_OFFSET(init_regs[i])\n\t\t\t\t\t\t\t\t- PACKET3_SET_SH_REG_START;\n\t\tib->ptr[ib->length_dw++] = init_regs[i].reg_value;\n\t}\n\n\t \n\tgpu_addr = (ib->gpu_addr + (u64)shader_offset) >> 8;\n\tib->ptr[ib->length_dw++] = PACKET3(PACKET3_SET_SH_REG, 2);\n\tib->ptr[ib->length_dw++] = SOC15_REG_OFFSET(GC, 0, regCOMPUTE_PGM_LO)\n\t\t\t\t\t\t\t- PACKET3_SET_SH_REG_START;\n\tib->ptr[ib->length_dw++] = lower_32_bits(gpu_addr);\n\tib->ptr[ib->length_dw++] = upper_32_bits(gpu_addr);\n\n\t \n\tib->ptr[ib->length_dw++] = PACKET3(PACKET3_SET_SH_REG, 3);\n\tib->ptr[ib->length_dw++] = SOC15_REG_OFFSET(GC, 0, regCOMPUTE_USER_DATA_0)\n\t\t\t\t\t\t\t- PACKET3_SET_SH_REG_START;\n\tib->ptr[ib->length_dw++] = lower_32_bits(wb_gpu_addr);\n\tib->ptr[ib->length_dw++] = upper_32_bits(wb_gpu_addr);\n\tib->ptr[ib->length_dw++] = pattern;\n\n\t \n\tib->ptr[ib->length_dw++] = PACKET3(PACKET3_DISPATCH_DIRECT, 3);\n\tib->ptr[ib->length_dw++] = compute_dim_x;  \n\tib->ptr[ib->length_dw++] = 1;  \n\tib->ptr[ib->length_dw++] = 1;  \n\tib->ptr[ib->length_dw++] =\n\t\tREG_SET_FIELD(0, COMPUTE_DISPATCH_INITIATOR, COMPUTE_SHADER_EN, 1);\n\n\t \n\tr = amdgpu_ib_schedule(ring, 1, ib, NULL, fence_ptr);\n\tif (r) {\n\t\tdev_err(adev->dev, \"ib submit failed (%d).\\n\", r);\n\t\tamdgpu_ib_free(adev, ib, NULL);\n\t}\n\treturn r;\n}\n\nstatic void gfx_v9_4_2_log_wave_assignment(struct amdgpu_device *adev, uint32_t *wb_ptr)\n{\n\tuint32_t se, cu, simd, wave;\n\tuint32_t offset = 0;\n\tchar *str;\n\tint size;\n\n\tstr = kmalloc(256, GFP_KERNEL);\n\tif (!str)\n\t\treturn;\n\n\tdev_dbg(adev->dev, \"wave assignment:\\n\");\n\n\tfor (se = 0; se < adev->gfx.config.max_shader_engines; se++) {\n\t\tfor (cu = 0; cu < CU_ID_MAX; cu++) {\n\t\t\tmemset(str, 0, 256);\n\t\t\tsize = sprintf(str, \"SE[%02d]CU[%02d]: \", se, cu);\n\t\t\tfor (simd = 0; simd < SIMD_ID_MAX; simd++) {\n\t\t\t\tsize += sprintf(str + size, \"[\");\n\t\t\t\tfor (wave = 0; wave < WAVE_ID_MAX; wave++) {\n\t\t\t\t\tsize += sprintf(str + size, \"%x\", wb_ptr[offset]);\n\t\t\t\t\toffset++;\n\t\t\t\t}\n\t\t\t\tsize += sprintf(str + size, \"]  \");\n\t\t\t}\n\t\t\tdev_dbg(adev->dev, \"%s\\n\", str);\n\t\t}\n\t}\n\n\tkfree(str);\n}\n\nstatic int gfx_v9_4_2_wait_for_waves_assigned(struct amdgpu_device *adev,\n\t\t\t\t\t      uint32_t *wb_ptr, uint32_t mask,\n\t\t\t\t\t      uint32_t pattern, uint32_t num_wave, bool wait)\n{\n\tuint32_t se, cu, simd, wave;\n\tuint32_t loop = 0;\n\tuint32_t wave_cnt;\n\tuint32_t offset;\n\n\tdo {\n\t\twave_cnt = 0;\n\t\toffset = 0;\n\n\t\tfor (se = 0; se < adev->gfx.config.max_shader_engines; se++)\n\t\t\tfor (cu = 0; cu < CU_ID_MAX; cu++)\n\t\t\t\tfor (simd = 0; simd < SIMD_ID_MAX; simd++)\n\t\t\t\t\tfor (wave = 0; wave < WAVE_ID_MAX; wave++) {\n\t\t\t\t\t\tif (((1 << wave) & mask) &&\n\t\t\t\t\t\t    (wb_ptr[offset] == pattern))\n\t\t\t\t\t\t\twave_cnt++;\n\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\n\t\tif (wave_cnt == num_wave)\n\t\t\treturn 0;\n\n\t\tmdelay(1);\n\t} while (++loop < 2000 && wait);\n\n\tdev_err(adev->dev, \"actual wave num: %d, expected wave num: %d\\n\",\n\t\twave_cnt, num_wave);\n\n\tgfx_v9_4_2_log_wave_assignment(adev, wb_ptr);\n\n\treturn -EBADSLT;\n}\n\nstatic int gfx_v9_4_2_do_sgprs_init(struct amdgpu_device *adev)\n{\n\tint r;\n\tint wb_size = adev->gfx.config.max_shader_engines *\n\t\t\t CU_ID_MAX * SIMD_ID_MAX * WAVE_ID_MAX;\n\tstruct amdgpu_ib wb_ib;\n\tstruct amdgpu_ib disp_ibs[3];\n\tstruct dma_fence *fences[3];\n\tu32 pattern[3] = { 0x1, 0x5, 0xa };\n\n\t \n\tif (!adev->gfx.compute_ring[0].sched.ready ||\n\t\t !adev->gfx.compute_ring[1].sched.ready)\n\t\treturn 0;\n\n\t \n\tmemset(&wb_ib, 0, sizeof(wb_ib));\n\tr = amdgpu_ib_get(adev, NULL, (1 + wb_size) * sizeof(uint32_t),\n\t\t\t  AMDGPU_IB_POOL_DIRECT, &wb_ib);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to get ib (%d) for wb\\n\", r);\n\t\treturn r;\n\t}\n\tmemset(wb_ib.ptr, 0, (1 + wb_size) * sizeof(uint32_t));\n\n\tr = gfx_v9_4_2_run_shader(adev,\n\t\t\t&adev->gfx.compute_ring[0],\n\t\t\t&disp_ibs[0],\n\t\t\tsgpr112_init_compute_shader_aldebaran,\n\t\t\tsizeof(sgpr112_init_compute_shader_aldebaran),\n\t\t\tsgpr112_init_regs_aldebaran,\n\t\t\tARRAY_SIZE(sgpr112_init_regs_aldebaran),\n\t\t\tadev->gfx.cu_info.number,\n\t\t\twb_ib.gpu_addr, pattern[0], &fences[0]);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to clear first 224 sgprs\\n\");\n\t\tgoto pro_end;\n\t}\n\n\tr = gfx_v9_4_2_wait_for_waves_assigned(adev,\n\t\t\t&wb_ib.ptr[1], 0b11,\n\t\t\tpattern[0],\n\t\t\tadev->gfx.cu_info.number * SIMD_ID_MAX * 2,\n\t\t\ttrue);\n\tif (r) {\n\t\tdev_err(adev->dev, \"wave coverage failed when clear first 224 sgprs\\n\");\n\t\twb_ib.ptr[0] = 0xdeadbeaf;  \n\t\tgoto disp0_failed;\n\t}\n\n\tr = gfx_v9_4_2_run_shader(adev,\n\t\t\t&adev->gfx.compute_ring[1],\n\t\t\t&disp_ibs[1],\n\t\t\tsgpr96_init_compute_shader_aldebaran,\n\t\t\tsizeof(sgpr96_init_compute_shader_aldebaran),\n\t\t\tsgpr96_init_regs_aldebaran,\n\t\t\tARRAY_SIZE(sgpr96_init_regs_aldebaran),\n\t\t\tadev->gfx.cu_info.number * 2,\n\t\t\twb_ib.gpu_addr, pattern[1], &fences[1]);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to clear next 576 sgprs\\n\");\n\t\tgoto disp0_failed;\n\t}\n\n\tr = gfx_v9_4_2_wait_for_waves_assigned(adev,\n\t\t\t&wb_ib.ptr[1], 0b11111100,\n\t\t\tpattern[1], adev->gfx.cu_info.number * SIMD_ID_MAX * 6,\n\t\t\ttrue);\n\tif (r) {\n\t\tdev_err(adev->dev, \"wave coverage failed when clear first 576 sgprs\\n\");\n\t\twb_ib.ptr[0] = 0xdeadbeaf;  \n\t\tgoto disp1_failed;\n\t}\n\n\twb_ib.ptr[0] = 0xdeadbeaf;  \n\n\t \n\tr = dma_fence_wait(fences[0], false);\n\tif (r) {\n\t\tdev_err(adev->dev, \"timeout to clear first 224 sgprs\\n\");\n\t\tgoto disp1_failed;\n\t}\n\n\tr = dma_fence_wait(fences[1], false);\n\tif (r) {\n\t\tdev_err(adev->dev, \"timeout to clear first 576 sgprs\\n\");\n\t\tgoto disp1_failed;\n\t}\n\n\tmemset(wb_ib.ptr, 0, (1 + wb_size) * sizeof(uint32_t));\n\tr = gfx_v9_4_2_run_shader(adev,\n\t\t\t&adev->gfx.compute_ring[0],\n\t\t\t&disp_ibs[2],\n\t\t\tsgpr64_init_compute_shader_aldebaran,\n\t\t\tsizeof(sgpr64_init_compute_shader_aldebaran),\n\t\t\tsgpr64_init_regs_aldebaran,\n\t\t\tARRAY_SIZE(sgpr64_init_regs_aldebaran),\n\t\t\tadev->gfx.cu_info.number,\n\t\t\twb_ib.gpu_addr, pattern[2], &fences[2]);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to clear first 256 sgprs\\n\");\n\t\tgoto disp1_failed;\n\t}\n\n\tr = gfx_v9_4_2_wait_for_waves_assigned(adev,\n\t\t\t&wb_ib.ptr[1], 0b1111,\n\t\t\tpattern[2],\n\t\t\tadev->gfx.cu_info.number * SIMD_ID_MAX * 4,\n\t\t\ttrue);\n\tif (r) {\n\t\tdev_err(adev->dev, \"wave coverage failed when clear first 256 sgprs\\n\");\n\t\twb_ib.ptr[0] = 0xdeadbeaf;  \n\t\tgoto disp2_failed;\n\t}\n\n\twb_ib.ptr[0] = 0xdeadbeaf;  \n\n\tr = dma_fence_wait(fences[2], false);\n\tif (r) {\n\t\tdev_err(adev->dev, \"timeout to clear first 256 sgprs\\n\");\n\t\tgoto disp2_failed;\n\t}\n\ndisp2_failed:\n\tamdgpu_ib_free(adev, &disp_ibs[2], NULL);\n\tdma_fence_put(fences[2]);\ndisp1_failed:\n\tamdgpu_ib_free(adev, &disp_ibs[1], NULL);\n\tdma_fence_put(fences[1]);\ndisp0_failed:\n\tamdgpu_ib_free(adev, &disp_ibs[0], NULL);\n\tdma_fence_put(fences[0]);\npro_end:\n\tamdgpu_ib_free(adev, &wb_ib, NULL);\n\n\tif (r)\n\t\tdev_info(adev->dev, \"Init SGPRS Failed\\n\");\n\telse\n\t\tdev_info(adev->dev, \"Init SGPRS Successfully\\n\");\n\n\treturn r;\n}\n\nstatic int gfx_v9_4_2_do_vgprs_init(struct amdgpu_device *adev)\n{\n\tint r;\n\t \n\tint wb_size = adev->gfx.config.max_shader_engines *\n\t\t\t CU_ID_MAX * SIMD_ID_MAX * WAVE_ID_MAX;\n\tstruct amdgpu_ib wb_ib;\n\tstruct amdgpu_ib disp_ib;\n\tstruct dma_fence *fence;\n\tu32 pattern = 0xa;\n\n\t \n\tif (!adev->gfx.compute_ring[0].sched.ready)\n\t\treturn 0;\n\n\t \n\tmemset(&wb_ib, 0, sizeof(wb_ib));\n\tr = amdgpu_ib_get(adev, NULL, (1 + wb_size) * sizeof(uint32_t),\n\t\t\t  AMDGPU_IB_POOL_DIRECT, &wb_ib);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to get ib (%d) for wb.\\n\", r);\n\t\treturn r;\n\t}\n\tmemset(wb_ib.ptr, 0, (1 + wb_size) * sizeof(uint32_t));\n\n\tr = gfx_v9_4_2_run_shader(adev,\n\t\t\t&adev->gfx.compute_ring[0],\n\t\t\t&disp_ib,\n\t\t\tvgpr_init_compute_shader_aldebaran,\n\t\t\tsizeof(vgpr_init_compute_shader_aldebaran),\n\t\t\tvgpr_init_regs_aldebaran,\n\t\t\tARRAY_SIZE(vgpr_init_regs_aldebaran),\n\t\t\tadev->gfx.cu_info.number,\n\t\t\twb_ib.gpu_addr, pattern, &fence);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to clear vgprs\\n\");\n\t\tgoto pro_end;\n\t}\n\n\t \n\tr = dma_fence_wait(fence, false);\n\tif (r) {\n\t\tdev_err(adev->dev, \"timeout to clear vgprs\\n\");\n\t\tgoto disp_failed;\n\t}\n\n\tr = gfx_v9_4_2_wait_for_waves_assigned(adev,\n\t\t\t&wb_ib.ptr[1], 0b1,\n\t\t\tpattern,\n\t\t\tadev->gfx.cu_info.number * SIMD_ID_MAX,\n\t\t\tfalse);\n\tif (r) {\n\t\tdev_err(adev->dev, \"failed to cover all simds when clearing vgprs\\n\");\n\t\tgoto disp_failed;\n\t}\n\ndisp_failed:\n\tamdgpu_ib_free(adev, &disp_ib, NULL);\n\tdma_fence_put(fence);\npro_end:\n\tamdgpu_ib_free(adev, &wb_ib, NULL);\n\n\tif (r)\n\t\tdev_info(adev->dev, \"Init VGPRS Failed\\n\");\n\telse\n\t\tdev_info(adev->dev, \"Init VGPRS Successfully\\n\");\n\n\treturn r;\n}\n\nint gfx_v9_4_2_do_edc_gpr_workarounds(struct amdgpu_device *adev)\n{\n\t \n\tif (!amdgpu_ras_is_supported(adev, AMDGPU_RAS_BLOCK__GFX))\n\t\treturn 0;\n\n\t \n\tif (amdgpu_in_reset(adev))\n\t\treturn 0;\n\n\tgfx_v9_4_2_do_sgprs_init(adev);\n\n\tgfx_v9_4_2_do_vgprs_init(adev);\n\n\treturn 0;\n}\n\nstatic void gfx_v9_4_2_query_sq_timeout_status(struct amdgpu_device *adev);\nstatic void gfx_v9_4_2_reset_sq_timeout_status(struct amdgpu_device *adev);\n\nvoid gfx_v9_4_2_init_golden_registers(struct amdgpu_device *adev,\n\t\t\t\t      uint32_t die_id)\n{\n\tsoc15_program_register_sequence(adev,\n\t\t\t\t\tgolden_settings_gc_9_4_2_alde,\n\t\t\t\t\tARRAY_SIZE(golden_settings_gc_9_4_2_alde));\n\n\t \n\tswitch (die_id) {\n\tcase 0:\n\t\tsoc15_program_register_sequence(adev,\n\t\t\t\tgolden_settings_gc_9_4_2_alde_die_0,\n\t\t\t\tARRAY_SIZE(golden_settings_gc_9_4_2_alde_die_0));\n\t\tbreak;\n\tcase 1:\n\t\tsoc15_program_register_sequence(adev,\n\t\t\t\tgolden_settings_gc_9_4_2_alde_die_1,\n\t\t\t\tARRAY_SIZE(golden_settings_gc_9_4_2_alde_die_1));\n\t\tbreak;\n\tdefault:\n\t\tdev_warn(adev->dev,\n\t\t\t \"invalid die id %d, ignore channel fabricid remap settings\\n\",\n\t\t\t die_id);\n\t\tbreak;\n\t}\n\n\treturn;\n}\n\nvoid gfx_v9_4_2_debug_trap_config_init(struct amdgpu_device *adev,\n\t\t\t\tuint32_t first_vmid,\n\t\t\t\tuint32_t last_vmid)\n{\n\tuint32_t data;\n\tint i;\n\n\tmutex_lock(&adev->srbm_mutex);\n\n\tfor (i = first_vmid; i < last_vmid; i++) {\n\t\tdata = 0;\n\t\tsoc15_grbm_select(adev, 0, 0, 0, i, 0);\n\t\tdata = REG_SET_FIELD(data, SPI_GDBG_PER_VMID_CNTL, TRAP_EN, 1);\n\t\tdata = REG_SET_FIELD(data, SPI_GDBG_PER_VMID_CNTL, EXCP_EN, 0);\n\t\tdata = REG_SET_FIELD(data, SPI_GDBG_PER_VMID_CNTL, EXCP_REPLACE,\n\t\t\t\t\t0);\n\t\tWREG32(SOC15_REG_OFFSET(GC, 0, regSPI_GDBG_PER_VMID_CNTL), data);\n\t}\n\n\tsoc15_grbm_select(adev, 0, 0, 0, 0, 0);\n\tmutex_unlock(&adev->srbm_mutex);\n\n\tWREG32(SOC15_REG_OFFSET(GC, 0, regSPI_GDBG_TRAP_DATA0), 0);\n\tWREG32(SOC15_REG_OFFSET(GC, 0, regSPI_GDBG_TRAP_DATA1), 0);\n}\n\nvoid gfx_v9_4_2_set_power_brake_sequence(struct amdgpu_device *adev)\n{\n\tu32 tmp;\n\n\tgfx_v9_0_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff, 0);\n\n\ttmp = 0;\n\ttmp = REG_SET_FIELD(tmp, GC_THROTTLE_CTRL, PATTERN_MODE, 1);\n\tWREG32_SOC15(GC, 0, regGC_THROTTLE_CTRL, tmp);\n\n\ttmp = 0;\n\ttmp = REG_SET_FIELD(tmp, GC_THROTTLE_CTRL1, PWRBRK_STALL_EN, 1);\n\tWREG32_SOC15(GC, 0, regGC_THROTTLE_CTRL1, tmp);\n\n\tWREG32_SOC15(GC, 0, regGC_CAC_IND_INDEX, ixPWRBRK_STALL_PATTERN_CTRL);\n\ttmp = 0;\n\ttmp = REG_SET_FIELD(tmp, PWRBRK_STALL_PATTERN_CTRL, PWRBRK_END_STEP, 0x12);\n\tWREG32_SOC15(GC, 0, regGC_CAC_IND_DATA, tmp);\n}\n\nstatic const struct soc15_reg_entry gfx_v9_4_2_edc_counter_regs[] = {\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regCPF_EDC_ROQ_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCPF_EDC_TAG_CNT), 0, 1, 1 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regCPC_EDC_SCRATCH_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regCPC_EDC_UCODE_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regDC_EDC_STATE_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regDC_EDC_CSINVOC_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regDC_EDC_RESTORE_CNT), 0, 1, 1 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regGDS_EDC_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGDS_EDC_GRBM_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PHY_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PIPE_CNT), 0, 1, 1 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT), 0, 1, 1 },\n\t{ SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2), 0, 1, 1 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regSPI_EDC_CNT), 0, 8, 1 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT), 0, 8, 7 },\n\t{ SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2), 0, 8, 7 },\n\t{ SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3), 0, 8, 7 },\n\t{ SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3), 0, 8, 7 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT), 0, 8, 14 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW), 0, 8, 14 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTCI_EDC_CNT), 0, 1, 69 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT), 0, 1, 16 },\n\t{ SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2), 0, 1, 16 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTCA_EDC_CNT), 0, 1, 2 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT), 0, 1, 2 },\n\t{ SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT2), 0, 1, 2 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTD_EDC_CNT), 0, 8, 14 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT), 0, 8, 14 },\n\t \n\t{ SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT), 0, 1, 16 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2), 0, 1, 16 },\n\t{ SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 1, 16 },\n};\n\nstatic void gfx_v9_4_2_select_se_sh(struct amdgpu_device *adev, u32 se_num,\n\t\t\t\t  u32 sh_num, u32 instance)\n{\n\tu32 data;\n\n\tif (instance == 0xffffffff)\n\t\tdata = REG_SET_FIELD(0, GRBM_GFX_INDEX,\n\t\t\t\t     INSTANCE_BROADCAST_WRITES, 1);\n\telse\n\t\tdata = REG_SET_FIELD(0, GRBM_GFX_INDEX, INSTANCE_INDEX,\n\t\t\t\t     instance);\n\n\tif (se_num == 0xffffffff)\n\t\tdata = REG_SET_FIELD(data, GRBM_GFX_INDEX, SE_BROADCAST_WRITES,\n\t\t\t\t     1);\n\telse\n\t\tdata = REG_SET_FIELD(data, GRBM_GFX_INDEX, SE_INDEX, se_num);\n\n\tif (sh_num == 0xffffffff)\n\t\tdata = REG_SET_FIELD(data, GRBM_GFX_INDEX, SH_BROADCAST_WRITES,\n\t\t\t\t     1);\n\telse\n\t\tdata = REG_SET_FIELD(data, GRBM_GFX_INDEX, SH_INDEX, sh_num);\n\n\tWREG32_SOC15_RLC_SHADOW_EX(reg, GC, 0, regGRBM_GFX_INDEX, data);\n}\n\nstatic const struct soc15_ras_field_entry gfx_v9_4_2_ras_fields[] = {\n\t \n\t{ \"CPF_ROQ_ME2\", SOC15_REG_ENTRY(GC, 0, regCPF_EDC_ROQ_CNT),\n\t  SOC15_REG_FIELD(CPF_EDC_ROQ_CNT, SEC_COUNT_ME2),\n\t  SOC15_REG_FIELD(CPF_EDC_ROQ_CNT, DED_COUNT_ME2) },\n\t{ \"CPF_ROQ_ME1\", SOC15_REG_ENTRY(GC, 0, regCPF_EDC_ROQ_CNT),\n\t  SOC15_REG_FIELD(CPF_EDC_ROQ_CNT, SEC_COUNT_ME1),\n\t  SOC15_REG_FIELD(CPF_EDC_ROQ_CNT, DED_COUNT_ME1) },\n\t{ \"CPF_TCIU_TAG\", SOC15_REG_ENTRY(GC, 0, regCPF_EDC_TAG_CNT),\n\t  SOC15_REG_FIELD(CPF_EDC_TAG_CNT, SEC_COUNT),\n\t  SOC15_REG_FIELD(CPF_EDC_TAG_CNT, DED_COUNT) },\n\n\t \n\t{ \"CPC_SCRATCH\", SOC15_REG_ENTRY(GC, 0, regCPC_EDC_SCRATCH_CNT),\n\t  SOC15_REG_FIELD(CPC_EDC_SCRATCH_CNT, SEC_COUNT),\n\t  SOC15_REG_FIELD(CPC_EDC_SCRATCH_CNT, DED_COUNT) },\n\t{ \"CPC_UCODE\", SOC15_REG_ENTRY(GC, 0, regCPC_EDC_UCODE_CNT),\n\t  SOC15_REG_FIELD(CPC_EDC_UCODE_CNT, SEC_COUNT),\n\t  SOC15_REG_FIELD(CPC_EDC_UCODE_CNT, DED_COUNT) },\n\t{ \"CPC_DC_STATE_RAM_ME1\", SOC15_REG_ENTRY(GC, 0, regDC_EDC_STATE_CNT),\n\t  SOC15_REG_FIELD(DC_EDC_STATE_CNT, SEC_COUNT_ME1),\n\t  SOC15_REG_FIELD(DC_EDC_STATE_CNT, DED_COUNT_ME1) },\n\t{ \"CPC_DC_CSINVOC_RAM_ME1\",\n\t  SOC15_REG_ENTRY(GC, 0, regDC_EDC_CSINVOC_CNT),\n\t  SOC15_REG_FIELD(DC_EDC_CSINVOC_CNT, SEC_COUNT_ME1),\n\t  SOC15_REG_FIELD(DC_EDC_CSINVOC_CNT, DED_COUNT_ME1) },\n\t{ \"CPC_DC_RESTORE_RAM_ME1\",\n\t  SOC15_REG_ENTRY(GC, 0, regDC_EDC_RESTORE_CNT),\n\t  SOC15_REG_FIELD(DC_EDC_RESTORE_CNT, SEC_COUNT_ME1),\n\t  SOC15_REG_FIELD(DC_EDC_RESTORE_CNT, DED_COUNT_ME1) },\n\t{ \"CPC_DC_CSINVOC_RAM1_ME1\",\n\t  SOC15_REG_ENTRY(GC, 0, regDC_EDC_CSINVOC_CNT),\n\t  SOC15_REG_FIELD(DC_EDC_CSINVOC_CNT, SEC_COUNT1_ME1),\n\t  SOC15_REG_FIELD(DC_EDC_CSINVOC_CNT, DED_COUNT1_ME1) },\n\t{ \"CPC_DC_RESTORE_RAM1_ME1\",\n\t  SOC15_REG_ENTRY(GC, 0, regDC_EDC_RESTORE_CNT),\n\t  SOC15_REG_FIELD(DC_EDC_RESTORE_CNT, SEC_COUNT1_ME1),\n\t  SOC15_REG_FIELD(DC_EDC_RESTORE_CNT, DED_COUNT1_ME1) },\n\n\t \n\t{ \"GDS_GRBM\", SOC15_REG_ENTRY(GC, 0, regGDS_EDC_GRBM_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_GRBM_CNT, SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_GRBM_CNT, DED) },\n\t{ \"GDS_MEM\", SOC15_REG_ENTRY(GC, 0, regGDS_EDC_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_CNT, GDS_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_CNT, GDS_MEM_DED) },\n\t{ \"GDS_PHY_CMD_RAM_MEM\", SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PHY_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, PHY_CMD_RAM_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, PHY_CMD_RAM_MEM_DED) },\n\t{ \"GDS_PHY_DATA_RAM_MEM\", SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PHY_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, PHY_DATA_RAM_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, PHY_DATA_RAM_MEM_DED) },\n\t{ \"GDS_ME0_CS_PIPE_MEM\", SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PHY_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, ME0_CS_PIPE_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PHY_CNT, ME0_CS_PIPE_MEM_DED) },\n\t{ \"GDS_ME1_PIPE0_PIPE_MEM\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PIPE_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE0_PIPE_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE0_PIPE_MEM_DED) },\n\t{ \"GDS_ME1_PIPE1_PIPE_MEM\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PIPE_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE1_PIPE_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE1_PIPE_MEM_DED) },\n\t{ \"GDS_ME1_PIPE2_PIPE_MEM\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PIPE_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE2_PIPE_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE2_PIPE_MEM_DED) },\n\t{ \"GDS_ME1_PIPE3_PIPE_MEM\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_PIPE_CNT),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE3_PIPE_MEM_SEC),\n\t  SOC15_REG_FIELD(GDS_EDC_OA_PIPE_CNT, ME1_PIPE3_PIPE_MEM_DED) },\n\t{ \"GDS_ME0_GFXHP3D_PIX_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME0_GFXHP3D_PIX_DED) },\n\t{ \"GDS_ME0_GFXHP3D_VTX_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME0_GFXHP3D_VTX_DED) },\n\t{ \"GDS_ME0_CS_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME0_CS_DED) },\n\t{ \"GDS_ME0_GFXHP3D_GS_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME0_GFXHP3D_GS_DED) },\n\t{ \"GDS_ME1_PIPE0_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME1_PIPE0_DED) },\n\t{ \"GDS_ME1_PIPE1_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME1_PIPE1_DED) },\n\t{ \"GDS_ME1_PIPE2_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME1_PIPE2_DED) },\n\t{ \"GDS_ME1_PIPE3_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME1_PIPE3_DED) },\n\t{ \"GDS_ME2_PIPE0_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME2_PIPE0_DED) },\n\t{ \"GDS_ME2_PIPE1_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME2_PIPE1_DED) },\n\t{ \"GDS_ME2_PIPE2_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME2_PIPE2_DED) },\n\t{ \"GDS_ME2_PIPE3_DED\",\n\t  SOC15_REG_ENTRY(GC, 0, regGDS_EDC_OA_DED), 0, 0,\n\t  SOC15_REG_FIELD(GDS_EDC_OA_DED, ME2_PIPE3_DED) },\n\n\t \n\t{ \"RLCG_INSTR_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCG_INSTR_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCG_INSTR_RAM_DED_COUNT) },\n\t{ \"RLCG_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCG_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCG_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLCV_INSTR_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCV_INSTR_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCV_INSTR_RAM_DED_COUNT) },\n\t{ \"RLCV_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCV_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLCV_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_TCTAG_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_TCTAG_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_TCTAG_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SPM_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SPM_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SRM_DATA_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SRM_DATA_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SRM_DATA_RAM_DED_COUNT) },\n\t{ \"RLC_SRM_ADDR_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SRM_ADDR_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT, RLC_SRM_ADDR_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE0_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE0_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE0_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE1_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE1_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE1_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE2_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE2_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE2_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE3_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE3_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE3_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE4_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE4_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE4_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE5_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE5_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE5_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE6_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE6_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE6_SCRATCH_RAM_DED_COUNT) },\n\t{ \"RLC_SPM_SE7_SCRATCH_RAM\", SOC15_REG_ENTRY(GC, 0, regRLC_EDC_CNT2),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE7_SCRATCH_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(RLC_EDC_CNT2, RLC_SPM_SE7_SCRATCH_RAM_DED_COUNT) },\n\n\t \n\t{ \"SPI_SR_MEM\", SOC15_REG_ENTRY(GC, 0, regSPI_EDC_CNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_SR_MEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_SR_MEM_DED_COUNT) },\n\t{ \"SPI_GDS_EXPREQ\", SOC15_REG_ENTRY(GC, 0, regSPI_EDC_CNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_GDS_EXPREQ_SEC_COUNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_GDS_EXPREQ_DED_COUNT) },\n\t{ \"SPI_WB_GRANT_30\", SOC15_REG_ENTRY(GC, 0, regSPI_EDC_CNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_WB_GRANT_30_SEC_COUNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_WB_GRANT_30_DED_COUNT) },\n\t{ \"SPI_LIFE_CNT\", SOC15_REG_ENTRY(GC, 0, regSPI_EDC_CNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_LIFE_CNT_SEC_COUNT),\n\t  SOC15_REG_FIELD(SPI_EDC_CNT, SPI_LIFE_CNT_DED_COUNT) },\n\n\t \n\t{ \"SQC_DATA_CU0_WRITE_DATA_BUF\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU0_WRITE_DATA_BUF_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU0_WRITE_DATA_BUF_DED_COUNT) },\n\t{ \"SQC_DATA_CU0_UTCL1_LFIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU0_UTCL1_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU0_UTCL1_LFIFO_DED_COUNT) },\n\t{ \"SQC_DATA_CU1_WRITE_DATA_BUF\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU1_WRITE_DATA_BUF_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU1_WRITE_DATA_BUF_DED_COUNT) },\n\t{ \"SQC_DATA_CU1_UTCL1_LFIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU1_UTCL1_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU1_UTCL1_LFIFO_DED_COUNT) },\n\t{ \"SQC_DATA_CU2_WRITE_DATA_BUF\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU2_WRITE_DATA_BUF_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU2_WRITE_DATA_BUF_DED_COUNT) },\n\t{ \"SQC_DATA_CU2_UTCL1_LFIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU2_UTCL1_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU2_UTCL1_LFIFO_DED_COUNT) },\n\t{ \"SQC_DATA_CU3_WRITE_DATA_BUF\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU3_WRITE_DATA_BUF_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU3_WRITE_DATA_BUF_DED_COUNT) },\n\t{ \"SQC_DATA_CU3_UTCL1_LFIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU3_UTCL1_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT, DATA_CU3_UTCL1_LFIFO_DED_COUNT) },\n\n\t \n\t{ \"SQC_INST_BANKA_TAG_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_BANKA_TAG_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_BANKA_TAG_RAM_DED_COUNT) },\n\t{ \"SQC_INST_BANKA_BANK_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_BANKA_BANK_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_BANKA_BANK_RAM_DED_COUNT) },\n\t{ \"SQC_DATA_BANKA_TAG_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_TAG_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_TAG_RAM_DED_COUNT) },\n\t{ \"SQC_DATA_BANKA_BANK_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_BANK_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_BANK_RAM_DED_COUNT) },\n\t{ \"SQC_INST_UTCL1_LFIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_UTCL1_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, INST_UTCL1_LFIFO_DED_COUNT) },\n\t{ \"SQC_DATA_BANKA_DIRTY_BIT_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT2),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_DIRTY_BIT_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT2, DATA_BANKA_DIRTY_BIT_RAM_DED_COUNT) },\n\n\t \n\t{ \"SQC_INST_BANKB_TAG_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, INST_BANKB_TAG_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, INST_BANKB_TAG_RAM_DED_COUNT) },\n\t{ \"SQC_INST_BANKB_BANK_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, INST_BANKB_BANK_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, INST_BANKB_BANK_RAM_DED_COUNT) },\n\t{ \"SQC_DATA_BANKB_TAG_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_TAG_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_TAG_RAM_DED_COUNT) },\n\t{ \"SQC_DATA_BANKB_BANK_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_BANK_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_BANK_RAM_DED_COUNT) },\n\t{ \"SQC_DATA_BANKB_DIRTY_BIT_RAM\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_DIRTY_BIT_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_CNT3, DATA_BANKB_DIRTY_BIT_RAM_DED_COUNT) },\n\n\t \n\t{ \"SQC_INST_BANKA_UTCL1_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKA_UTCL1_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKA_UTCL1_MISS_FIFO_DED_COUNT) },\n\t{ \"SQC_INST_BANKA_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKA_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKA_MISS_FIFO_DED_COUNT) },\n\t{ \"SQC_DATA_BANKA_HIT_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKA_HIT_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKA_HIT_FIFO_DED_COUNT) },\n\t{ \"SQC_DATA_BANKA_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKA_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKA_MISS_FIFO_DED_COUNT) },\n\t{ \"SQC_INST_BANKB_UTCL1_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKB_UTCL1_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKB_UTCL1_MISS_FIFO_DED_COUNT) },\n\t{ \"SQC_INST_BANKB_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKB_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, INST_BANKB_MISS_FIFO_DED_COUNT) },\n\t{ \"SQC_DATA_BANKB_HIT_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKB_HIT_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKB_HIT_FIFO_DED_COUNT) },\n\t{ \"SQC_DATA_BANKB_MISS_FIFO\", SOC15_REG_ENTRY(GC, 0, regSQC_EDC_PARITY_CNT3),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKB_MISS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQC_EDC_PARITY_CNT3, DATA_BANKB_MISS_FIFO_DED_COUNT) },\n\n\t \n\t{ \"SQ_LDS_D\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, LDS_D_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, LDS_D_DED_COUNT) },\n\t{ \"SQ_LDS_I\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, LDS_I_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, LDS_I_DED_COUNT) },\n\t{ \"SQ_SGPR\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, SGPR_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, SGPR_DED_COUNT) },\n\t{ \"SQ_VGPR0\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR0_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR0_DED_COUNT) },\n\t{ \"SQ_VGPR1\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR1_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR1_DED_COUNT) },\n\t{ \"SQ_VGPR2\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR2_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR2_DED_COUNT) },\n\t{ \"SQ_VGPR3\", SOC15_REG_ENTRY(GC, 0, regSQ_EDC_CNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR3_SEC_COUNT),\n\t  SOC15_REG_FIELD(SQ_EDC_CNT, VGPR3_DED_COUNT) },\n\n\t \n\t{ \"TCP_CACHE_RAM\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, CACHE_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, CACHE_RAM_DED_COUNT) },\n\t{ \"TCP_LFIFO_RAM\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, LFIFO_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, LFIFO_RAM_DED_COUNT) },\n\t{ \"TCP_CMD_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, CMD_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, CMD_FIFO_DED_COUNT) },\n\t{ \"TCP_VM_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, VM_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, VM_FIFO_DED_COUNT) },\n\t{ \"TCP_DB_RAM\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, DB_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, DB_RAM_DED_COUNT) },\n\t{ \"TCP_UTCL1_LFIFO0\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, UTCL1_LFIFO0_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, UTCL1_LFIFO0_DED_COUNT) },\n\t{ \"TCP_UTCL1_LFIFO1\", SOC15_REG_ENTRY(GC, 0, regTCP_EDC_CNT_NEW),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, UTCL1_LFIFO1_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCP_EDC_CNT_NEW, UTCL1_LFIFO1_DED_COUNT) },\n\n\t \n\t{ \"TCI_WRITE_RAM\", SOC15_REG_ENTRY(GC, 0, regTCI_EDC_CNT),\n\t  SOC15_REG_FIELD(TCI_EDC_CNT, WRITE_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCI_EDC_CNT, WRITE_RAM_DED_COUNT) },\n\n\t \n\t{ \"TCC_CACHE_DATA\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, CACHE_DATA_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, CACHE_DATA_DED_COUNT) },\n\t{ \"TCC_CACHE_DIRTY\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, CACHE_DIRTY_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, CACHE_DIRTY_DED_COUNT) },\n\t{ \"TCC_HIGH_RATE_TAG\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, HIGH_RATE_TAG_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, HIGH_RATE_TAG_DED_COUNT) },\n\t{ \"TCC_LOW_RATE_TAG\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LOW_RATE_TAG_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LOW_RATE_TAG_DED_COUNT) },\n\t{ \"TCC_SRC_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, SRC_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, SRC_FIFO_DED_COUNT) },\n\t{ \"TCC_LATENCY_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LATENCY_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LATENCY_FIFO_DED_COUNT) },\n\t{ \"TCC_LATENCY_FIFO_NEXT_RAM\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LATENCY_FIFO_NEXT_RAM_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT, LATENCY_FIFO_NEXT_RAM_DED_COUNT) },\n\t{ \"TCC_CACHE_TAG_PROBE_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, CACHE_TAG_PROBE_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, CACHE_TAG_PROBE_FIFO_DED_COUNT) },\n\t{ \"TCC_UC_ATOMIC_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, UC_ATOMIC_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, UC_ATOMIC_FIFO_DED_COUNT) },\n\t{ \"TCC_WRITE_CACHE_READ\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, WRITE_CACHE_READ_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, WRITE_CACHE_READ_DED_COUNT) },\n\t{ \"TCC_RETURN_CONTROL\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, RETURN_CONTROL_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, RETURN_CONTROL_DED_COUNT) },\n\t{ \"TCC_IN_USE_TRANSFER\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, IN_USE_TRANSFER_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, IN_USE_TRANSFER_DED_COUNT) },\n\t{ \"TCC_IN_USE_DEC\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, IN_USE_DEC_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, IN_USE_DEC_DED_COUNT) },\n\t{ \"TCC_WRITE_RETURN\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, WRITE_RETURN_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, WRITE_RETURN_DED_COUNT) },\n\t{ \"TCC_RETURN_DATA\", SOC15_REG_ENTRY(GC, 0, regTCC_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, RETURN_DATA_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCC_EDC_CNT2, RETURN_DATA_DED_COUNT) },\n\n\t \n\t{ \"TCA_HOLE_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCA_EDC_CNT),\n\t  SOC15_REG_FIELD(TCA_EDC_CNT, HOLE_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCA_EDC_CNT, HOLE_FIFO_DED_COUNT) },\n\t{ \"TCA_REQ_FIFO\", SOC15_REG_ENTRY(GC, 0, regTCA_EDC_CNT),\n\t  SOC15_REG_FIELD(TCA_EDC_CNT, REQ_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCA_EDC_CNT, REQ_FIFO_DED_COUNT) },\n\n\t \n\t{ \"TCX_GROUP0\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP0_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP0_DED_COUNT) },\n\t{ \"TCX_GROUP1\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP1_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP1_DED_COUNT) },\n\t{ \"TCX_GROUP2\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP2_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP2_DED_COUNT) },\n\t{ \"TCX_GROUP3\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP3_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP3_DED_COUNT) },\n\t{ \"TCX_GROUP4\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP4_SEC_COUNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP4_DED_COUNT) },\n\t{ \"TCX_GROUP5\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP5_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP6\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP6_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP7\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP7_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP8\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP8_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP9\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP9_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP10\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT, GROUP10_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP11\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT2, GROUP11_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP12\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT2, GROUP12_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP13\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT2, GROUP13_SED_COUNT), 0, 0 },\n\t{ \"TCX_GROUP14\", SOC15_REG_ENTRY(GC, 0, regTCX_EDC_CNT2),\n\t  SOC15_REG_FIELD(TCX_EDC_CNT2, GROUP14_SED_COUNT), 0, 0 },\n\n\t \n\t{ \"TD_SS_FIFO_LO\", SOC15_REG_ENTRY(GC, 0, regTD_EDC_CNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, SS_FIFO_LO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, SS_FIFO_LO_DED_COUNT) },\n\t{ \"TD_SS_FIFO_HI\", SOC15_REG_ENTRY(GC, 0, regTD_EDC_CNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, SS_FIFO_HI_SEC_COUNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, SS_FIFO_HI_DED_COUNT) },\n\t{ \"TD_CS_FIFO\", SOC15_REG_ENTRY(GC, 0, regTD_EDC_CNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, CS_FIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TD_EDC_CNT, CS_FIFO_DED_COUNT) },\n\n\t \n\t{ \"TA_FS_DFIFO\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_DFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_DFIFO_DED_COUNT) },\n\t{ \"TA_FS_AFIFO_LO\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_AFIFO_LO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_AFIFO_LO_DED_COUNT) },\n\t{ \"TA_FL_LFIFO\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FL_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FL_LFIFO_DED_COUNT) },\n\t{ \"TA_FX_LFIFO\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FX_LFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FX_LFIFO_DED_COUNT) },\n\t{ \"TA_FS_CFIFO\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_CFIFO_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_CFIFO_DED_COUNT) },\n\t{ \"TA_FS_AFIFO_HI\", SOC15_REG_ENTRY(GC, 0, regTA_EDC_CNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_AFIFO_HI_SEC_COUNT),\n\t  SOC15_REG_FIELD(TA_EDC_CNT, TA_FS_AFIFO_HI_DED_COUNT) },\n\n\t \n\t{ \"EA_DRAMRD_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMRD_CMDMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMRD_CMDMEM_DED_COUNT) },\n\t{ \"EA_DRAMWR_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMWR_CMDMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMWR_CMDMEM_DED_COUNT) },\n\t{ \"EA_DRAMWR_DATAMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMWR_DATAMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMWR_DATAMEM_DED_COUNT) },\n\t{ \"EA_RRET_TAGMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, RRET_TAGMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, RRET_TAGMEM_DED_COUNT) },\n\t{ \"EA_WRET_TAGMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, WRET_TAGMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, WRET_TAGMEM_DED_COUNT) },\n\t{ \"EA_IOWR_DATAMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, IOWR_DATAMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, IOWR_DATAMEM_DED_COUNT) },\n\t{ \"EA_DRAMRD_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMRD_PAGEMEM_SED_COUNT), 0, 0 },\n\t{ \"EA_DRAMWR_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, DRAMWR_PAGEMEM_SED_COUNT), 0, 0 },\n\t{ \"EA_IORD_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, IORD_CMDMEM_SED_COUNT), 0, 0 },\n\t{ \"EA_IOWR_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT, IOWR_CMDMEM_SED_COUNT), 0, 0 },\n\n\t \n\t{ \"EA_GMIRD_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIRD_CMDMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIRD_CMDMEM_DED_COUNT) },\n\t{ \"EA_GMIWR_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIWR_CMDMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIWR_CMDMEM_DED_COUNT) },\n\t{ \"EA_GMIWR_DATAMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIWR_DATAMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIWR_DATAMEM_DED_COUNT) },\n\t{ \"EA_GMIRD_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIRD_PAGEMEM_SED_COUNT), 0, 0 },\n\t{ \"EA_GMIWR_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, GMIWR_PAGEMEM_SED_COUNT), 0, 0 },\n\t{ \"EA_MAM_D0MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D0MEM_SED_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D0MEM_DED_COUNT) },\n\t{ \"EA_MAM_D1MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D1MEM_SED_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D1MEM_DED_COUNT) },\n\t{ \"EA_MAM_D2MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D2MEM_SED_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D2MEM_DED_COUNT) },\n\t{ \"EA_MAM_D3MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT2),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D3MEM_SED_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT2, MAM_D3MEM_DED_COUNT) },\n\n\t \n\t{ \"EA_DRAMRD_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, DRAMRD_PAGEMEM_DED_COUNT) },\n\t{ \"EA_DRAMWR_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, DRAMWR_PAGEMEM_DED_COUNT) },\n\t{ \"EA_IORD_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, IORD_CMDMEM_DED_COUNT) },\n\t{ \"EA_IOWR_CMDMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, IOWR_CMDMEM_DED_COUNT) },\n\t{ \"EA_GMIRD_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, GMIRD_PAGEMEM_DED_COUNT) },\n\t{ \"EA_GMIWR_PAGEMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3), 0, 0,\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, GMIWR_PAGEMEM_DED_COUNT) },\n\t{ \"EA_MAM_A0MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A0MEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A0MEM_DED_COUNT) },\n\t{ \"EA_MAM_A1MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A1MEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A1MEM_DED_COUNT) },\n\t{ \"EA_MAM_A2MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A2MEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A2MEM_DED_COUNT) },\n\t{ \"EA_MAM_A3MEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A3MEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_A3MEM_DED_COUNT) },\n\t{ \"EA_MAM_AFMEM\", SOC15_REG_ENTRY(GC, 0, regGCEA_EDC_CNT3),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_AFMEM_SEC_COUNT),\n\t  SOC15_REG_FIELD(GCEA_EDC_CNT3, MAM_AFMEM_DED_COUNT) },\n};\n\nstatic const char * const vml2_walker_mems[] = {\n\t\"UTC_VML2_CACHE_PDE0_MEM0\",\n\t\"UTC_VML2_CACHE_PDE0_MEM1\",\n\t\"UTC_VML2_CACHE_PDE1_MEM0\",\n\t\"UTC_VML2_CACHE_PDE1_MEM1\",\n\t\"UTC_VML2_CACHE_PDE2_MEM0\",\n\t\"UTC_VML2_CACHE_PDE2_MEM1\",\n\t\"UTC_VML2_RDIF_ARADDRS\",\n\t\"UTC_VML2_RDIF_LOG_FIFO\",\n\t\"UTC_VML2_QUEUE_REQ\",\n\t\"UTC_VML2_QUEUE_RET\",\n};\n\nstatic struct gfx_v9_4_2_utc_block gfx_v9_4_2_utc_blocks[] = {\n\t{ VML2_MEM, 8, 2, 2,\n\t  { SOC15_REG_ENTRY(GC, 0, regVML2_MEM_ECC_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regVML2_MEM_ECC_CNTL) },\n\t  SOC15_REG_FIELD(VML2_MEM_ECC_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(VML2_MEM_ECC_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, VML2_MEM_ECC_CNTL, WRITE_COUNTERS, 1) },\n\t{ VML2_WALKER_MEM, ARRAY_SIZE(vml2_walker_mems), 1, 1,\n\t  { SOC15_REG_ENTRY(GC, 0, regVML2_WALKER_MEM_ECC_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regVML2_WALKER_MEM_ECC_CNTL) },\n\t  SOC15_REG_FIELD(VML2_WALKER_MEM_ECC_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(VML2_WALKER_MEM_ECC_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, VML2_WALKER_MEM_ECC_CNTL, WRITE_COUNTERS, 1) },\n\t{ UTCL2_MEM, 18, 1, 2,\n\t  { SOC15_REG_ENTRY(GC, 0, regUTCL2_MEM_ECC_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regUTCL2_MEM_ECC_CNTL) },\n\t  SOC15_REG_FIELD(UTCL2_MEM_ECC_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(UTCL2_MEM_ECC_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, UTCL2_MEM_ECC_CNTL, WRITE_COUNTERS, 1) },\n\t{ ATC_L2_CACHE_2M, 8, 2, 1,\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_2M_DSM_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_2M_DSM_CNTL) },\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_2M_DSM_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_2M_DSM_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, ATC_L2_CACHE_2M_DSM_CNTL, WRITE_COUNTERS, 1) },\n\t{ ATC_L2_CACHE_32K, 8, 2, 2,\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_32K_DSM_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_32K_DSM_CNTL) },\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_32K_DSM_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_32K_DSM_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, ATC_L2_CACHE_32K_DSM_CNTL, WRITE_COUNTERS, 1) },\n\t{ ATC_L2_CACHE_4K, 8, 2, 8,\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_4K_DSM_INDEX) },\n\t  { SOC15_REG_ENTRY(GC, 0, regATC_L2_CACHE_4K_DSM_CNTL) },\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_4K_DSM_CNTL, SEC_COUNT),\n\t  SOC15_REG_FIELD(ATC_L2_CACHE_4K_DSM_CNTL, DED_COUNT),\n\t  REG_SET_FIELD(0, ATC_L2_CACHE_4K_DSM_CNTL, WRITE_COUNTERS, 1) },\n};\n\nstatic const struct soc15_reg_entry gfx_v9_4_2_ea_err_status_regs = {\n\tSOC15_REG_ENTRY(GC, 0, regGCEA_ERR_STATUS), 0, 1, 16\n};\n\nstatic int gfx_v9_4_2_get_reg_error_count(struct amdgpu_device *adev,\n\t\t\t\t\t  const struct soc15_reg_entry *reg,\n\t\t\t\t\t  uint32_t se_id, uint32_t inst_id,\n\t\t\t\t\t  uint32_t value, uint32_t *sec_count,\n\t\t\t\t\t  uint32_t *ded_count)\n{\n\tuint32_t i;\n\tuint32_t sec_cnt, ded_cnt;\n\n\tfor (i = 0; i < ARRAY_SIZE(gfx_v9_4_2_ras_fields); i++) {\n\t\tif (gfx_v9_4_2_ras_fields[i].reg_offset != reg->reg_offset ||\n\t\t    gfx_v9_4_2_ras_fields[i].seg != reg->seg ||\n\t\t    gfx_v9_4_2_ras_fields[i].inst != reg->inst)\n\t\t\tcontinue;\n\n\t\tsec_cnt = SOC15_RAS_REG_FIELD_VAL(\n\t\t\tvalue, gfx_v9_4_2_ras_fields[i], sec);\n\t\tif (sec_cnt) {\n\t\t\tdev_info(adev->dev,\n\t\t\t\t \"GFX SubBlock %s, Instance[%d][%d], SEC %d\\n\",\n\t\t\t\t gfx_v9_4_2_ras_fields[i].name, se_id, inst_id,\n\t\t\t\t sec_cnt);\n\t\t\t*sec_count += sec_cnt;\n\t\t}\n\n\t\tded_cnt = SOC15_RAS_REG_FIELD_VAL(\n\t\t\tvalue, gfx_v9_4_2_ras_fields[i], ded);\n\t\tif (ded_cnt) {\n\t\t\tdev_info(adev->dev,\n\t\t\t\t \"GFX SubBlock %s, Instance[%d][%d], DED %d\\n\",\n\t\t\t\t gfx_v9_4_2_ras_fields[i].name, se_id, inst_id,\n\t\t\t\t ded_cnt);\n\t\t\t*ded_count += ded_cnt;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int gfx_v9_4_2_query_sram_edc_count(struct amdgpu_device *adev,\n\t\t\t\tuint32_t *sec_count, uint32_t *ded_count)\n{\n\tuint32_t i, j, k, data;\n\tuint32_t sec_cnt = 0, ded_cnt = 0;\n\n\tif (sec_count && ded_count) {\n\t\t*sec_count = 0;\n\t\t*ded_count = 0;\n\t}\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\n\tfor (i = 0; i < ARRAY_SIZE(gfx_v9_4_2_edc_counter_regs); i++) {\n\t\tfor (j = 0; j < gfx_v9_4_2_edc_counter_regs[i].se_num; j++) {\n\t\t\tfor (k = 0; k < gfx_v9_4_2_edc_counter_regs[i].instance;\n\t\t\t     k++) {\n\t\t\t\tgfx_v9_4_2_select_se_sh(adev, j, 0, k);\n\n\t\t\t\t \n\t\t\t\tif (!sec_count || !ded_count) {\n\t\t\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(\n\t\t\t\t\t\tgfx_v9_4_2_edc_counter_regs[i]), 0);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tdata = RREG32(SOC15_REG_ENTRY_OFFSET(\n\t\t\t\t\tgfx_v9_4_2_edc_counter_regs[i]));\n\n\t\t\t\tif (!data)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tgfx_v9_4_2_get_reg_error_count(adev,\n\t\t\t\t\t&gfx_v9_4_2_edc_counter_regs[i],\n\t\t\t\t\tj, k, data, &sec_cnt, &ded_cnt);\n\n\t\t\t\t \n\t\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(\n\t\t\t\t\tgfx_v9_4_2_edc_counter_regs[i]), 0);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (sec_count && ded_count) {\n\t\t*sec_count += sec_cnt;\n\t\t*ded_count += ded_cnt;\n\t}\n\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n\n\treturn 0;\n}\n\nstatic void gfx_v9_4_2_log_utc_edc_count(struct amdgpu_device *adev,\n\t\t\t\t\t struct gfx_v9_4_2_utc_block *blk,\n\t\t\t\t\t uint32_t instance, uint32_t sec_cnt,\n\t\t\t\t\t uint32_t ded_cnt)\n{\n\tuint32_t bank, way, mem;\n\tstatic const char *vml2_way_str[] = { \"BIGK\", \"4K\" };\n\tstatic const char *utcl2_rounter_str[] = { \"VMC\", \"APT\" };\n\n\tmem = instance % blk->num_mem_blocks;\n\tway = (instance / blk->num_mem_blocks) % blk->num_ways;\n\tbank = instance / (blk->num_mem_blocks * blk->num_ways);\n\n\tswitch (blk->type) {\n\tcase VML2_MEM:\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"GFX SubBlock UTC_VML2_BANK_CACHE_%d_%s_MEM%d, SED %d, DED %d\\n\",\n\t\t\tbank, vml2_way_str[way], mem, sec_cnt, ded_cnt);\n\t\tbreak;\n\tcase VML2_WALKER_MEM:\n\t\tdev_info(adev->dev, \"GFX SubBlock %s, SED %d, DED %d\\n\",\n\t\t\t vml2_walker_mems[bank], sec_cnt, ded_cnt);\n\t\tbreak;\n\tcase UTCL2_MEM:\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"GFX SubBlock UTCL2_ROUTER_IFIF%d_GROUP0_%s, SED %d, DED %d\\n\",\n\t\t\tbank, utcl2_rounter_str[mem], sec_cnt, ded_cnt);\n\t\tbreak;\n\tcase ATC_L2_CACHE_2M:\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"GFX SubBlock UTC_ATCL2_CACHE_2M_BANK%d_WAY%d_MEM, SED %d, DED %d\\n\",\n\t\t\tbank, way, sec_cnt, ded_cnt);\n\t\tbreak;\n\tcase ATC_L2_CACHE_32K:\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"GFX SubBlock UTC_ATCL2_CACHE_32K_BANK%d_WAY%d_MEM%d, SED %d, DED %d\\n\",\n\t\t\tbank, way, mem, sec_cnt, ded_cnt);\n\t\tbreak;\n\tcase ATC_L2_CACHE_4K:\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"GFX SubBlock UTC_ATCL2_CACHE_4K_BANK%d_WAY%d_MEM%d, SED %d, DED %d\\n\",\n\t\t\tbank, way, mem, sec_cnt, ded_cnt);\n\t\tbreak;\n\t}\n}\n\nstatic int gfx_v9_4_2_query_utc_edc_count(struct amdgpu_device *adev,\n\t\t\t\t\t  uint32_t *sec_count,\n\t\t\t\t\t  uint32_t *ded_count)\n{\n\tuint32_t i, j, data;\n\tuint32_t sec_cnt, ded_cnt;\n\tuint32_t num_instances;\n\tstruct gfx_v9_4_2_utc_block *blk;\n\n\tif (sec_count && ded_count) {\n\t\t*sec_count = 0;\n\t\t*ded_count = 0;\n\t}\n\n\tfor (i = 0; i < ARRAY_SIZE(gfx_v9_4_2_utc_blocks); i++) {\n\t\tblk = &gfx_v9_4_2_utc_blocks[i];\n\t\tnum_instances =\n\t\t\tblk->num_banks * blk->num_ways * blk->num_mem_blocks;\n\t\tfor (j = 0; j < num_instances; j++) {\n\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(blk->idx_reg), j);\n\n\t\t\t \n\t\t\tif (!sec_count || !ded_count) {\n\t\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(blk->data_reg),\n\t\t\t\t       blk->clear);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdata = RREG32(SOC15_REG_ENTRY_OFFSET(blk->data_reg));\n\t\t\tif (!data)\n\t\t\t\tcontinue;\n\n\t\t\tsec_cnt = SOC15_RAS_REG_FIELD_VAL(data, *blk, sec);\n\t\t\t*sec_count += sec_cnt;\n\t\t\tded_cnt = SOC15_RAS_REG_FIELD_VAL(data, *blk, ded);\n\t\t\t*ded_count += ded_cnt;\n\n\t\t\t \n\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(blk->data_reg),\n\t\t\t       blk->clear);\n\n\t\t\t \n\t\t\tif (sec_cnt || ded_cnt)\n\t\t\t\tgfx_v9_4_2_log_utc_edc_count(adev, blk, j, sec_cnt,\n\t\t\t\t\t\t\t     ded_cnt);\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic void gfx_v9_4_2_query_ras_error_count(struct amdgpu_device *adev,\n\t\t\t\t\t    void *ras_error_status)\n{\n\tstruct ras_err_data *err_data = (struct ras_err_data *)ras_error_status;\n\tuint32_t sec_count = 0, ded_count = 0;\n\n\tif (!amdgpu_ras_is_supported(adev, AMDGPU_RAS_BLOCK__GFX))\n\t\treturn;\n\n\terr_data->ue_count = 0;\n\terr_data->ce_count = 0;\n\n\tgfx_v9_4_2_query_sram_edc_count(adev, &sec_count, &ded_count);\n\terr_data->ce_count += sec_count;\n\terr_data->ue_count += ded_count;\n\n\tgfx_v9_4_2_query_utc_edc_count(adev, &sec_count, &ded_count);\n\terr_data->ce_count += sec_count;\n\terr_data->ue_count += ded_count;\n\n}\n\nstatic void gfx_v9_4_2_reset_utc_err_status(struct amdgpu_device *adev)\n{\n\tWREG32_SOC15(GC, 0, regUTCL2_MEM_ECC_STATUS, 0x3);\n\tWREG32_SOC15(GC, 0, regVML2_MEM_ECC_STATUS, 0x3);\n\tWREG32_SOC15(GC, 0, regVML2_WALKER_MEM_ECC_STATUS, 0x3);\n}\n\nstatic void gfx_v9_4_2_reset_ea_err_status(struct amdgpu_device *adev)\n{\n\tuint32_t i, j;\n\tuint32_t value;\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\tfor (i = 0; i < gfx_v9_4_2_ea_err_status_regs.se_num; i++) {\n\t\tfor (j = 0; j < gfx_v9_4_2_ea_err_status_regs.instance;\n\t\t     j++) {\n\t\t\tgfx_v9_4_2_select_se_sh(adev, i, 0, j);\n\t\t\tvalue = RREG32(SOC15_REG_ENTRY_OFFSET(\n\t\t\t\tgfx_v9_4_2_ea_err_status_regs));\n\t\t\tvalue = REG_SET_FIELD(value, GCEA_ERR_STATUS, CLEAR_ERROR_STATUS, 0x1);\n\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(gfx_v9_4_2_ea_err_status_regs), value);\n\t\t}\n\t}\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n}\n\nstatic void gfx_v9_4_2_reset_ras_error_count(struct amdgpu_device *adev)\n{\n\tif (!amdgpu_ras_is_supported(adev, AMDGPU_RAS_BLOCK__GFX))\n\t\treturn;\n\n\tgfx_v9_4_2_query_sram_edc_count(adev, NULL, NULL);\n\tgfx_v9_4_2_query_utc_edc_count(adev, NULL, NULL);\n}\n\nstatic void gfx_v9_4_2_query_ea_err_status(struct amdgpu_device *adev)\n{\n\tuint32_t i, j;\n\tuint32_t reg_value;\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\n\tfor (i = 0; i < gfx_v9_4_2_ea_err_status_regs.se_num; i++) {\n\t\tfor (j = 0; j < gfx_v9_4_2_ea_err_status_regs.instance;\n\t\t     j++) {\n\t\t\tgfx_v9_4_2_select_se_sh(adev, i, 0, j);\n\t\t\treg_value = RREG32(SOC15_REG_ENTRY_OFFSET(\n\t\t\t\tgfx_v9_4_2_ea_err_status_regs));\n\n\t\t\tif (REG_GET_FIELD(reg_value, GCEA_ERR_STATUS, SDP_RDRSP_STATUS) ||\n\t\t\t    REG_GET_FIELD(reg_value, GCEA_ERR_STATUS, SDP_WRRSP_STATUS) ||\n\t\t\t    REG_GET_FIELD(reg_value, GCEA_ERR_STATUS, SDP_RDRSP_DATAPARITY_ERROR)) {\n\t\t\t\tdev_warn(adev->dev, \"GCEA err detected at instance: %d, status: 0x%x!\\n\",\n\t\t\t\t\t\tj, reg_value);\n\t\t\t}\n\t\t\t \n\t\t\treg_value = REG_SET_FIELD(reg_value, GCEA_ERR_STATUS,\n\t\t\t\t\t\t  CLEAR_ERROR_STATUS, 0x1);\n\t\t\tWREG32(SOC15_REG_ENTRY_OFFSET(gfx_v9_4_2_ea_err_status_regs), reg_value);\n\t\t}\n\t}\n\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n}\n\nstatic void gfx_v9_4_2_query_utc_err_status(struct amdgpu_device *adev)\n{\n\tuint32_t data;\n\n\tdata = RREG32_SOC15(GC, 0, regUTCL2_MEM_ECC_STATUS);\n\tif (data) {\n\t\tdev_warn(adev->dev, \"GFX UTCL2 Mem Ecc Status: 0x%x!\\n\", data);\n\t\tWREG32_SOC15(GC, 0, regUTCL2_MEM_ECC_STATUS, 0x3);\n\t}\n\n\tdata = RREG32_SOC15(GC, 0, regVML2_MEM_ECC_STATUS);\n\tif (data) {\n\t\tdev_warn(adev->dev, \"GFX VML2 Mem Ecc Status: 0x%x!\\n\", data);\n\t\tWREG32_SOC15(GC, 0, regVML2_MEM_ECC_STATUS, 0x3);\n\t}\n\n\tdata = RREG32_SOC15(GC, 0, regVML2_WALKER_MEM_ECC_STATUS);\n\tif (data) {\n\t\tdev_warn(adev->dev, \"GFX VML2 Walker Mem Ecc Status: 0x%x!\\n\", data);\n\t\tWREG32_SOC15(GC, 0, regVML2_WALKER_MEM_ECC_STATUS, 0x3);\n\t}\n}\n\nstatic void gfx_v9_4_2_query_ras_error_status(struct amdgpu_device *adev)\n{\n\tif (!amdgpu_ras_is_supported(adev, AMDGPU_RAS_BLOCK__GFX))\n\t\treturn;\n\n\tgfx_v9_4_2_query_ea_err_status(adev);\n\tgfx_v9_4_2_query_utc_err_status(adev);\n\tgfx_v9_4_2_query_sq_timeout_status(adev);\n}\n\nstatic void gfx_v9_4_2_reset_ras_error_status(struct amdgpu_device *adev)\n{\n\tif (!amdgpu_ras_is_supported(adev, AMDGPU_RAS_BLOCK__GFX))\n\t\treturn;\n\n\tgfx_v9_4_2_reset_utc_err_status(adev);\n\tgfx_v9_4_2_reset_ea_err_status(adev);\n\tgfx_v9_4_2_reset_sq_timeout_status(adev);\n}\n\nstatic void gfx_v9_4_2_enable_watchdog_timer(struct amdgpu_device *adev)\n{\n\tuint32_t i;\n\tuint32_t data;\n\n\tdata = REG_SET_FIELD(0, SQ_TIMEOUT_CONFIG, TIMEOUT_FATAL_DISABLE,\n\t\t\t     amdgpu_watchdog_timer.timeout_fatal_disable ? 1 :\n\t\t\t\t\t\t\t\t\t   0);\n\n\tif (amdgpu_watchdog_timer.timeout_fatal_disable &&\n\t    (amdgpu_watchdog_timer.period < 1 ||\n\t     amdgpu_watchdog_timer.period > 0x23)) {\n\t\tdev_warn(adev->dev, \"Watchdog period range is 1 to 0x23\\n\");\n\t\tamdgpu_watchdog_timer.period = 0x23;\n\t}\n\tdata = REG_SET_FIELD(data, SQ_TIMEOUT_CONFIG, PERIOD_SEL,\n\t\t\t     amdgpu_watchdog_timer.period);\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\tfor (i = 0; i < adev->gfx.config.max_shader_engines; i++) {\n\t\tgfx_v9_4_2_select_se_sh(adev, i, 0xffffffff, 0xffffffff);\n\t\tWREG32_SOC15(GC, 0, regSQ_TIMEOUT_CONFIG, data);\n\t}\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n}\n\nstatic uint32_t wave_read_ind(struct amdgpu_device *adev, uint32_t simd, uint32_t wave, uint32_t address)\n{\n\tWREG32_SOC15_RLC_EX(reg, GC, 0, regSQ_IND_INDEX,\n\t\t(wave << SQ_IND_INDEX__WAVE_ID__SHIFT) |\n\t\t(simd << SQ_IND_INDEX__SIMD_ID__SHIFT) |\n\t\t(address << SQ_IND_INDEX__INDEX__SHIFT) |\n\t\t(SQ_IND_INDEX__FORCE_READ_MASK));\n\treturn RREG32_SOC15(GC, 0, regSQ_IND_DATA);\n}\n\nstatic void gfx_v9_4_2_log_cu_timeout_status(struct amdgpu_device *adev,\n\t\t\t\t\tuint32_t status)\n{\n\tstruct amdgpu_cu_info *cu_info = &adev->gfx.cu_info;\n\tuint32_t i, simd, wave;\n\tuint32_t wave_status;\n\tuint32_t wave_pc_lo, wave_pc_hi;\n\tuint32_t wave_exec_lo, wave_exec_hi;\n\tuint32_t wave_inst_dw0, wave_inst_dw1;\n\tuint32_t wave_ib_sts;\n\n\tfor (i = 0; i < 32; i++) {\n\t\tif (!((i << 1) & status))\n\t\t\tcontinue;\n\n\t\tsimd = i / cu_info->max_waves_per_simd;\n\t\twave = i % cu_info->max_waves_per_simd;\n\n\t\twave_status = wave_read_ind(adev, simd, wave, ixSQ_WAVE_STATUS);\n\t\twave_pc_lo = wave_read_ind(adev, simd, wave, ixSQ_WAVE_PC_LO);\n\t\twave_pc_hi = wave_read_ind(adev, simd, wave, ixSQ_WAVE_PC_HI);\n\t\twave_exec_lo =\n\t\t\twave_read_ind(adev, simd, wave, ixSQ_WAVE_EXEC_LO);\n\t\twave_exec_hi =\n\t\t\twave_read_ind(adev, simd, wave, ixSQ_WAVE_EXEC_HI);\n\t\twave_inst_dw0 =\n\t\t\twave_read_ind(adev, simd, wave, ixSQ_WAVE_INST_DW0);\n\t\twave_inst_dw1 =\n\t\t\twave_read_ind(adev, simd, wave, ixSQ_WAVE_INST_DW1);\n\t\twave_ib_sts = wave_read_ind(adev, simd, wave, ixSQ_WAVE_IB_STS);\n\n\t\tdev_info(\n\t\t\tadev->dev,\n\t\t\t\"\\t SIMD %d, Wave %d: status 0x%x, pc 0x%llx, exec 0x%llx, inst 0x%llx, ib_sts 0x%x\\n\",\n\t\t\tsimd, wave, wave_status,\n\t\t\t((uint64_t)wave_pc_hi << 32 | wave_pc_lo),\n\t\t\t((uint64_t)wave_exec_hi << 32 | wave_exec_lo),\n\t\t\t((uint64_t)wave_inst_dw1 << 32 | wave_inst_dw0),\n\t\t\twave_ib_sts);\n\t}\n}\n\nstatic void gfx_v9_4_2_query_sq_timeout_status(struct amdgpu_device *adev)\n{\n\tuint32_t se_idx, sh_idx, cu_idx;\n\tuint32_t status;\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\tfor (se_idx = 0; se_idx < adev->gfx.config.max_shader_engines;\n\t     se_idx++) {\n\t\tfor (sh_idx = 0; sh_idx < adev->gfx.config.max_sh_per_se;\n\t\t     sh_idx++) {\n\t\t\tfor (cu_idx = 0;\n\t\t\t     cu_idx < adev->gfx.config.max_cu_per_sh;\n\t\t\t     cu_idx++) {\n\t\t\t\tgfx_v9_4_2_select_se_sh(adev, se_idx, sh_idx,\n\t\t\t\t\t\t\tcu_idx);\n\t\t\t\tstatus = RREG32_SOC15(GC, 0,\n\t\t\t\t\t\t      regSQ_TIMEOUT_STATUS);\n\t\t\t\tif (status != 0) {\n\t\t\t\t\tdev_info(\n\t\t\t\t\t\tadev->dev,\n\t\t\t\t\t\t\"GFX Watchdog Timeout: SE %d, SH %d, CU %d\\n\",\n\t\t\t\t\t\tse_idx, sh_idx, cu_idx);\n\t\t\t\t\tgfx_v9_4_2_log_cu_timeout_status(\n\t\t\t\t\t\tadev, status);\n\t\t\t\t}\n\t\t\t\t \n\t\t\t\tWREG32_SOC15(GC, 0, regSQ_TIMEOUT_STATUS, 0);\n\t\t\t}\n\t\t}\n\t}\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n}\n\nstatic void gfx_v9_4_2_reset_sq_timeout_status(struct amdgpu_device *adev)\n{\n\tuint32_t se_idx, sh_idx, cu_idx;\n\n\tmutex_lock(&adev->grbm_idx_mutex);\n\tfor (se_idx = 0; se_idx < adev->gfx.config.max_shader_engines;\n\t     se_idx++) {\n\t\tfor (sh_idx = 0; sh_idx < adev->gfx.config.max_sh_per_se;\n\t\t     sh_idx++) {\n\t\t\tfor (cu_idx = 0;\n\t\t\t     cu_idx < adev->gfx.config.max_cu_per_sh;\n\t\t\t     cu_idx++) {\n\t\t\t\tgfx_v9_4_2_select_se_sh(adev, se_idx, sh_idx,\n\t\t\t\t\t\t\tcu_idx);\n\t\t\t\tWREG32_SOC15(GC, 0, regSQ_TIMEOUT_STATUS, 0);\n\t\t\t}\n\t\t}\n\t}\n\tgfx_v9_4_2_select_se_sh(adev, 0xffffffff, 0xffffffff, 0xffffffff);\n\tmutex_unlock(&adev->grbm_idx_mutex);\n}\n\nstatic bool gfx_v9_4_2_query_uctl2_poison_status(struct amdgpu_device *adev)\n{\n\tu32 status = 0;\n\tstruct amdgpu_vmhub *hub;\n\n\thub = &adev->vmhub[AMDGPU_GFXHUB(0)];\n\tstatus = RREG32(hub->vm_l2_pro_fault_status);\n\t \n\tWREG32_P(hub->vm_l2_pro_fault_cntl, 1, ~1);\n\n\treturn REG_GET_FIELD(status, VM_L2_PROTECTION_FAULT_STATUS, FED);\n}\n\nstruct amdgpu_ras_block_hw_ops  gfx_v9_4_2_ras_ops = {\n\t\t.query_ras_error_count = &gfx_v9_4_2_query_ras_error_count,\n\t\t.reset_ras_error_count = &gfx_v9_4_2_reset_ras_error_count,\n\t\t.query_ras_error_status = &gfx_v9_4_2_query_ras_error_status,\n\t\t.reset_ras_error_status = &gfx_v9_4_2_reset_ras_error_status,\n};\n\nstruct amdgpu_gfx_ras gfx_v9_4_2_ras = {\n\t.ras_block = {\n\t\t.hw_ops = &gfx_v9_4_2_ras_ops,\n\t},\n\t.enable_watchdog_timer = &gfx_v9_4_2_enable_watchdog_timer,\n\t.query_utcl2_poison_status = gfx_v9_4_2_query_uctl2_poison_status,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}