{
  "module_name": "amdgpu_mes_ctx.h",
  "hash_id": "97606239b84f8842110f18a08909fd4c67532d8f83e153ad56650fe6c03474cc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_mes_ctx.h",
  "human_readable_source": " \n\n#ifndef __AMDGPU_MES_CTX_H__\n#define __AMDGPU_MES_CTX_H__\n\n#include \"v10_structs.h\"\n\nenum {\n\tAMDGPU_MES_CTX_RPTR_OFFS = 0,\n\tAMDGPU_MES_CTX_WPTR_OFFS,\n\tAMDGPU_MES_CTX_FENCE_OFFS,\n\tAMDGPU_MES_CTX_COND_EXE_OFFS,\n\tAMDGPU_MES_CTX_TRAIL_FENCE_OFFS,\n\tAMDGPU_MES_CTX_MAX_OFFS,\n};\n\nenum {\n\tAMDGPU_MES_CTX_RING_OFFS = AMDGPU_MES_CTX_MAX_OFFS,\n\tAMDGPU_MES_CTX_IB_OFFS,\n\tAMDGPU_MES_CTX_PADDING_OFFS,\n};\n\n#define AMDGPU_MES_CTX_MAX_GFX_RINGS            1\n#define AMDGPU_MES_CTX_MAX_COMPUTE_RINGS        4\n#define AMDGPU_MES_CTX_MAX_SDMA_RINGS           2\n#define AMDGPU_MES_CTX_MAX_RINGS\t\t\t\t\t\\\n\t(AMDGPU_MES_CTX_MAX_GFX_RINGS +\t\t\t\t\t\\\n\t AMDGPU_MES_CTX_MAX_COMPUTE_RINGS +\t\t\t\t\\\n\t AMDGPU_MES_CTX_MAX_SDMA_RINGS)\n\n#define AMDGPU_CSA_SDMA_SIZE    64\n#define GFX10_MEC_HPD_SIZE\t2048\n\nstruct amdgpu_wb_slot {\n\tuint32_t data[8];\n};\n\nstruct amdgpu_mes_ctx_meta_data {\n\tstruct {\n\t\tuint8_t ring[PAGE_SIZE * 4];\n\n\t\t \n\t\tstruct v10_gfx_meta_data gfx_meta_data;\n\n\t\tuint8_t gds_backup[64 * 1024];\n\n\t\tstruct amdgpu_wb_slot slots[AMDGPU_MES_CTX_MAX_OFFS];\n\n\t\t \n\t\tuint32_t ib[256] __aligned(256);\n\n\t\tuint32_t padding[64];\n\n\t} __aligned(PAGE_SIZE) gfx[AMDGPU_MES_CTX_MAX_GFX_RINGS];\n\n\tstruct {\n\t\tuint8_t ring[PAGE_SIZE * 4];\n\n\t\tuint8_t mec_hpd[GFX10_MEC_HPD_SIZE];\n\n\t\tstruct amdgpu_wb_slot slots[AMDGPU_MES_CTX_MAX_OFFS];\n\n\t\t \n\t\tuint32_t ib[256] __aligned(256);\n\n\t\tuint32_t padding[64];\n\n\t} __aligned(PAGE_SIZE) compute[AMDGPU_MES_CTX_MAX_COMPUTE_RINGS];\n\n\tstruct {\n\t\tuint8_t ring[PAGE_SIZE * 4];\n\n\t\t \n\t\tuint8_t sdma_meta_data[AMDGPU_CSA_SDMA_SIZE];\n\n\t\tstruct amdgpu_wb_slot slots[AMDGPU_MES_CTX_MAX_OFFS];\n\n\t\t \n\t\tuint32_t ib[256] __aligned(256);\n\n\t\tuint32_t padding[64];\n\n\t} __aligned(PAGE_SIZE) sdma[AMDGPU_MES_CTX_MAX_SDMA_RINGS];\n};\n\nstruct amdgpu_mes_ctx_data {\n\tstruct amdgpu_bo\t*meta_data_obj;\n\tuint64_t                meta_data_gpu_addr;\n\tuint64_t                meta_data_mc_addr;\n\tstruct amdgpu_bo_va\t*meta_data_va;\n\tvoid                    *meta_data_ptr;\n\tuint32_t                gang_ids[AMDGPU_HW_IP_DMA+1];\n};\n\n#define AMDGPU_FENCE_MES_QUEUE_FLAG     0x1000000u\n#define AMDGPU_FENCE_MES_QUEUE_ID_MASK  (AMDGPU_FENCE_MES_QUEUE_FLAG - 1)\n\n#define AMDGPU_FENCE_MES_QUEUE_FLAG     0x1000000u\n#define AMDGPU_FENCE_MES_QUEUE_ID_MASK  (AMDGPU_FENCE_MES_QUEUE_FLAG - 1)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}