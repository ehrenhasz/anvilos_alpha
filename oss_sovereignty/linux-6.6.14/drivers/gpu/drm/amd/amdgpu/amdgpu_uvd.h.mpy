{
  "module_name": "amdgpu_uvd.h",
  "hash_id": "7d6753352adace71861d997808744837d9bb38b750970b1b932be5504dbdec85",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.h",
  "human_readable_source": " \n\n#ifndef __AMDGPU_UVD_H__\n#define __AMDGPU_UVD_H__\n\n#define AMDGPU_DEFAULT_UVD_HANDLES\t10\n#define AMDGPU_MAX_UVD_HANDLES\t\t40\n#define AMDGPU_UVD_STACK_SIZE\t\t(200*1024)\n#define AMDGPU_UVD_HEAP_SIZE\t\t(256*1024)\n#define AMDGPU_UVD_SESSION_SIZE\t\t(50*1024)\n#define AMDGPU_UVD_FIRMWARE_OFFSET\t256\n\n#define AMDGPU_MAX_UVD_INSTANCES\t\t\t2\n\n#define AMDGPU_UVD_FIRMWARE_SIZE(adev)    \\\n\t(AMDGPU_GPU_PAGE_ALIGN(le32_to_cpu(((const struct common_firmware_header *)(adev)->uvd.fw->data)->ucode_size_bytes) + \\\n\t\t\t       8) - AMDGPU_UVD_FIRMWARE_OFFSET)\n\nstruct amdgpu_uvd_inst {\n\tstruct amdgpu_bo\t*vcpu_bo;\n\tvoid\t\t\t*cpu_addr;\n\tuint64_t\t\tgpu_addr;\n\tvoid\t\t\t*saved_bo;\n\tstruct amdgpu_ring\tring;\n\tstruct amdgpu_ring\tring_enc[AMDGPU_MAX_UVD_ENC_RINGS];\n\tstruct amdgpu_irq_src\tirq;\n\tuint32_t                srbm_soft_reset;\n};\n\n#define AMDGPU_UVD_HARVEST_UVD0 (1 << 0)\n#define AMDGPU_UVD_HARVEST_UVD1 (1 << 1)\n\nstruct amdgpu_uvd {\n\tconst struct firmware\t*fw;\t \n\tunsigned\t\tfw_version;\n\tunsigned\t\tmax_handles;\n\tunsigned\t\tnum_enc_rings;\n\tuint8_t\t\t\tnum_uvd_inst;\n\tbool\t\t\taddress_64_bit;\n\tbool\t\t\tuse_ctx_buf;\n\tstruct amdgpu_uvd_inst\tinst[AMDGPU_MAX_UVD_INSTANCES];\n\tstruct drm_file\t\t*filp[AMDGPU_MAX_UVD_HANDLES];\n\tatomic_t\t\thandles[AMDGPU_MAX_UVD_HANDLES];\n\tstruct drm_sched_entity entity;\n\tstruct delayed_work\tidle_work;\n\tunsigned\t\tharvest_config;\n\t \n\tunsigned\t\tdecode_image_width;\n\tuint32_t                keyselect;\n\tstruct amdgpu_bo\t*ib_bo;\n};\n\nint amdgpu_uvd_sw_init(struct amdgpu_device *adev);\nint amdgpu_uvd_sw_fini(struct amdgpu_device *adev);\nint amdgpu_uvd_entity_init(struct amdgpu_device *adev);\nint amdgpu_uvd_suspend(struct amdgpu_device *adev);\nint amdgpu_uvd_resume(struct amdgpu_device *adev);\nint amdgpu_uvd_get_create_msg(struct amdgpu_ring *ring, uint32_t handle,\n\t\t\t      struct dma_fence **fence);\nint amdgpu_uvd_get_destroy_msg(struct amdgpu_ring *ring, uint32_t handle,\n\t\t\t       bool direct, struct dma_fence **fence);\nvoid amdgpu_uvd_free_handles(struct amdgpu_device *adev,\n\t\t\t     struct drm_file *filp);\nint amdgpu_uvd_ring_parse_cs(struct amdgpu_cs_parser *parser,\n\t\t\t     struct amdgpu_job *job,\n\t\t\t     struct amdgpu_ib *ib);\nvoid amdgpu_uvd_ring_begin_use(struct amdgpu_ring *ring);\nvoid amdgpu_uvd_ring_end_use(struct amdgpu_ring *ring);\nint amdgpu_uvd_ring_test_ib(struct amdgpu_ring *ring, long timeout);\nuint32_t amdgpu_uvd_used_handles(struct amdgpu_device *adev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}