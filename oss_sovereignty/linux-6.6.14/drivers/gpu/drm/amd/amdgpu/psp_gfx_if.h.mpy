{
  "module_name": "psp_gfx_if.h",
  "hash_id": "5d54eda7e6ed6d984623861ecc993734ad5fbb56cb8251c61b3a1277aec2ee78",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/psp_gfx_if.h",
  "human_readable_source": " \n\n#ifndef _PSP_TEE_GFX_IF_H_\n#define _PSP_TEE_GFX_IF_H_\n\n#define PSP_GFX_CMD_BUF_VERSION     0x00000001\n\n#define GFX_CMD_STATUS_MASK         0x0000FFFF\n#define GFX_CMD_ID_MASK             0x000F0000\n#define GFX_CMD_RESERVED_MASK       0x7FF00000\n#define GFX_CMD_RESPONSE_MASK       0x80000000\n\n \n#define C2PMSG_CMD_GFX_USB_PD_FW_VER 0x2000000\n\n \nenum psp_gfx_crtl_cmd_id\n{\n    GFX_CTRL_CMD_ID_INIT_RBI_RING   = 0x00010000,    \n    GFX_CTRL_CMD_ID_INIT_GPCOM_RING = 0x00020000,    \n    GFX_CTRL_CMD_ID_DESTROY_RINGS   = 0x00030000,    \n    GFX_CTRL_CMD_ID_CAN_INIT_RINGS  = 0x00040000,    \n    GFX_CTRL_CMD_ID_ENABLE_INT      = 0x00050000,    \n    GFX_CTRL_CMD_ID_DISABLE_INT     = 0x00060000,    \n    GFX_CTRL_CMD_ID_MODE1_RST       = 0x00070000,    \n    GFX_CTRL_CMD_ID_GBR_IH_SET      = 0x00080000,    \n    GFX_CTRL_CMD_ID_CONSUME_CMD     = 0x00090000,    \n    GFX_CTRL_CMD_ID_DESTROY_GPCOM_RING = 0x000C0000,  \n\n    GFX_CTRL_CMD_ID_MAX             = 0x000F0000,    \n};\n\n\n \n\n\n \nstruct psp_gfx_ctrl\n{\n    volatile uint32_t   cmd_resp;          \n    volatile uint32_t   rbi_wptr;          \n    volatile uint32_t   rbi_rptr;          \n    volatile uint32_t   gpcom_wptr;        \n    volatile uint32_t   gpcom_rptr;        \n    volatile uint32_t   ring_addr_lo;      \n    volatile uint32_t   ring_addr_hi;      \n    volatile uint32_t   ring_buf_size;     \n\n};\n\n\n \n#define GFX_FLAG_RESPONSE               0x80000000\n\n \nenum psp_gfx_cmd_id\n{\n    GFX_CMD_ID_LOAD_TA            = 0x00000001,    \n    GFX_CMD_ID_UNLOAD_TA          = 0x00000002,    \n    GFX_CMD_ID_INVOKE_CMD         = 0x00000003,    \n    GFX_CMD_ID_LOAD_ASD           = 0x00000004,    \n    GFX_CMD_ID_SETUP_TMR          = 0x00000005,    \n    GFX_CMD_ID_LOAD_IP_FW         = 0x00000006,    \n    GFX_CMD_ID_DESTROY_TMR        = 0x00000007,    \n    GFX_CMD_ID_SAVE_RESTORE       = 0x00000008,    \n    GFX_CMD_ID_SETUP_VMR          = 0x00000009,    \n    GFX_CMD_ID_DESTROY_VMR        = 0x0000000A,    \n    GFX_CMD_ID_PROG_REG           = 0x0000000B,    \n    GFX_CMD_ID_GET_FW_ATTESTATION = 0x0000000F,    \n     \n    GFX_CMD_ID_LOAD_TOC           = 0x00000020,    \n    GFX_CMD_ID_AUTOLOAD_RLC       = 0x00000021,    \n    GFX_CMD_ID_BOOT_CFG           = 0x00000022,    \n    GFX_CMD_ID_SRIOV_SPATIAL_PART = 0x00000027,    \n};\n\n \nenum psp_gfx_boot_config_cmd\n{\n    BOOTCFG_CMD_SET         = 1,  \n    BOOTCFG_CMD_GET         = 2,  \n    BOOTCFG_CMD_INVALIDATE  = 3   \n};\n\n \nenum psp_gfx_boot_config\n{\n    BOOT_CONFIG_GECC = 0x1,\n};\n\n \nstruct psp_gfx_cmd_load_ta\n{\n    uint32_t        app_phy_addr_lo;         \n    uint32_t        app_phy_addr_hi;         \n    uint32_t        app_len;                 \n    uint32_t        cmd_buf_phy_addr_lo;     \n    uint32_t        cmd_buf_phy_addr_hi;     \n    uint32_t        cmd_buf_len;             \n\n     \n};\n\n\n \nstruct psp_gfx_cmd_unload_ta\n{\n    uint32_t        session_id;           \n\n};\n\n\n \nstruct psp_gfx_buf_desc\n{\n    uint32_t        buf_phy_addr_lo;        \n    uint32_t        buf_phy_addr_hi;        \n    uint32_t        buf_size;               \n\n};\n\n \n#define GFX_BUF_MAX_DESC        64\n\nstruct psp_gfx_buf_list\n{\n    uint32_t                num_desc;                     \n    uint32_t                total_size;                   \n    struct psp_gfx_buf_desc buf_desc[GFX_BUF_MAX_DESC];   \n\n     \n};\n\n \nstruct psp_gfx_cmd_invoke_cmd\n{\n    uint32_t                session_id;            \n    uint32_t                ta_cmd_id;             \n    struct psp_gfx_buf_list buf;                   \n\n};\n\n\n \nstruct psp_gfx_cmd_setup_tmr\n{\n    uint32_t        buf_phy_addr_lo;        \n    uint32_t        buf_phy_addr_hi;        \n    uint32_t        buf_size;               \n    union {\n\tstruct {\n\t\tuint32_t\tsriov_enabled:1;  \n\t\tuint32_t\tvirt_phy_addr:1;  \n\t\tuint32_t\treserved:30;\n\t} bitfield;\n\tuint32_t        tmr_flags;\n    };\n    uint32_t        system_phy_addr_lo;         \n    uint32_t        system_phy_addr_hi;         \n\n};\n\n \nenum psp_gfx_fw_type {\n\tGFX_FW_TYPE_NONE        = 0,     \n\tGFX_FW_TYPE_CP_ME       = 1,     \n\tGFX_FW_TYPE_CP_PFP      = 2,     \n\tGFX_FW_TYPE_CP_CE       = 3,     \n\tGFX_FW_TYPE_CP_MEC      = 4,     \n\tGFX_FW_TYPE_CP_MEC_ME1  = 5,     \n\tGFX_FW_TYPE_CP_MEC_ME2  = 6,     \n\tGFX_FW_TYPE_RLC_V       = 7,     \n\tGFX_FW_TYPE_RLC_G       = 8,     \n\tGFX_FW_TYPE_SDMA0       = 9,     \n\tGFX_FW_TYPE_SDMA1       = 10,    \n\tGFX_FW_TYPE_DMCU_ERAM   = 11,    \n\tGFX_FW_TYPE_DMCU_ISR    = 12,    \n\tGFX_FW_TYPE_VCN         = 13,    \n\tGFX_FW_TYPE_UVD         = 14,    \n\tGFX_FW_TYPE_VCE         = 15,    \n\tGFX_FW_TYPE_ISP         = 16,    \n\tGFX_FW_TYPE_ACP         = 17,    \n\tGFX_FW_TYPE_SMU         = 18,    \n\tGFX_FW_TYPE_MMSCH       = 19,    \n\tGFX_FW_TYPE_RLC_RESTORE_LIST_GPM_MEM        = 20,    \n\tGFX_FW_TYPE_RLC_RESTORE_LIST_SRM_MEM        = 21,    \n\tGFX_FW_TYPE_RLC_RESTORE_LIST_SRM_CNTL       = 22,    \n\tGFX_FW_TYPE_UVD1        = 23,    \n\tGFX_FW_TYPE_TOC         = 24,    \n\tGFX_FW_TYPE_RLC_P                           = 25,    \n\tGFX_FW_TYPE_RLC_IRAM                        = 26,    \n\tGFX_FW_TYPE_GLOBAL_TAP_DELAYS               = 27,    \n\tGFX_FW_TYPE_SE0_TAP_DELAYS                  = 28,    \n\tGFX_FW_TYPE_SE1_TAP_DELAYS                  = 29,    \n\tGFX_FW_TYPE_GLOBAL_SE0_SE1_SKEW_DELAYS      = 30,    \n\tGFX_FW_TYPE_SDMA0_JT                        = 31,    \n\tGFX_FW_TYPE_SDMA1_JT                        = 32,    \n\tGFX_FW_TYPE_CP_MES                          = 33,    \n\tGFX_FW_TYPE_MES_STACK                       = 34,    \n\tGFX_FW_TYPE_RLC_SRM_DRAM_SR                 = 35,    \n\tGFX_FW_TYPE_RLCG_SCRATCH_SR                 = 36,    \n\tGFX_FW_TYPE_RLCP_SCRATCH_SR                 = 37,    \n\tGFX_FW_TYPE_RLCV_SCRATCH_SR                 = 38,    \n\tGFX_FW_TYPE_RLX6_DRAM_SR                    = 39,    \n\tGFX_FW_TYPE_SDMA0_PG_CONTEXT                = 40,    \n\tGFX_FW_TYPE_SDMA1_PG_CONTEXT                = 41,    \n\tGFX_FW_TYPE_GLOBAL_MUX_SELECT_RAM           = 42,    \n\tGFX_FW_TYPE_SE0_MUX_SELECT_RAM              = 43,    \n\tGFX_FW_TYPE_SE1_MUX_SELECT_RAM              = 44,    \n\tGFX_FW_TYPE_ACCUM_CTRL_RAM                  = 45,    \n\tGFX_FW_TYPE_RLCP_CAM                        = 46,    \n\tGFX_FW_TYPE_RLC_SPP_CAM_EXT                 = 47,    \n\tGFX_FW_TYPE_RLC_DRAM_BOOT                   = 48,    \n\tGFX_FW_TYPE_VCN0_RAM                        = 49,    \n\tGFX_FW_TYPE_VCN1_RAM                        = 50,    \n\tGFX_FW_TYPE_DMUB                            = 51,    \n\tGFX_FW_TYPE_SDMA2                           = 52,    \n\tGFX_FW_TYPE_SDMA3                           = 53,    \n\tGFX_FW_TYPE_SDMA4                           = 54,    \n\tGFX_FW_TYPE_SDMA5                           = 55,    \n\tGFX_FW_TYPE_SDMA6                           = 56,    \n\tGFX_FW_TYPE_SDMA7                           = 57,    \n\tGFX_FW_TYPE_VCN1                            = 58,    \n\tGFX_FW_TYPE_CAP                             = 62,    \n\tGFX_FW_TYPE_SE2_TAP_DELAYS                  = 65,    \n\tGFX_FW_TYPE_SE3_TAP_DELAYS                  = 66,    \n\tGFX_FW_TYPE_REG_LIST                        = 67,    \n\tGFX_FW_TYPE_IMU_I                           = 68,    \n\tGFX_FW_TYPE_IMU_D                           = 69,    \n\tGFX_FW_TYPE_LSDMA                           = 70,    \n\tGFX_FW_TYPE_SDMA_UCODE_TH0                  = 71,    \n\tGFX_FW_TYPE_SDMA_UCODE_TH1                  = 72,    \n\tGFX_FW_TYPE_PPTABLE                         = 73,    \n\tGFX_FW_TYPE_DISCRETE_USB4                   = 74,    \n\tGFX_FW_TYPE_TA                              = 75,    \n\tGFX_FW_TYPE_RS64_MES                        = 76,    \n\tGFX_FW_TYPE_RS64_MES_STACK                  = 77,    \n\tGFX_FW_TYPE_RS64_KIQ                        = 78,    \n\tGFX_FW_TYPE_RS64_KIQ_STACK                  = 79,    \n\tGFX_FW_TYPE_ISP_DATA                        = 80,    \n\tGFX_FW_TYPE_CP_MES_KIQ                      = 81,    \n\tGFX_FW_TYPE_MES_KIQ_STACK                   = 82,    \n\tGFX_FW_TYPE_UMSCH_DATA                      = 83,    \n\tGFX_FW_TYPE_UMSCH_UCODE                     = 84,    \n\tGFX_FW_TYPE_UMSCH_CMD_BUFFER                = 85,    \n\tGFX_FW_TYPE_USB_DP_COMBO_PHY                = 86,    \n\tGFX_FW_TYPE_RS64_PFP                        = 87,    \n\tGFX_FW_TYPE_RS64_ME                         = 88,    \n\tGFX_FW_TYPE_RS64_MEC                        = 89,    \n\tGFX_FW_TYPE_RS64_PFP_P0_STACK               = 90,    \n\tGFX_FW_TYPE_RS64_PFP_P1_STACK               = 91,    \n\tGFX_FW_TYPE_RS64_ME_P0_STACK                = 92,    \n\tGFX_FW_TYPE_RS64_ME_P1_STACK                = 93,    \n\tGFX_FW_TYPE_RS64_MEC_P0_STACK               = 94,    \n\tGFX_FW_TYPE_RS64_MEC_P1_STACK               = 95,    \n\tGFX_FW_TYPE_RS64_MEC_P2_STACK               = 96,    \n\tGFX_FW_TYPE_RS64_MEC_P3_STACK               = 97,    \n\tGFX_FW_TYPE_MAX\n};\n\n \nstruct psp_gfx_cmd_load_ip_fw\n{\n    uint32_t                fw_phy_addr_lo;     \n    uint32_t                fw_phy_addr_hi;     \n    uint32_t                fw_size;            \n    enum psp_gfx_fw_type    fw_type;            \n\n};\n\n \nstruct psp_gfx_cmd_save_restore_ip_fw\n{\n    uint32_t                save_fw;               \n    uint32_t                save_restore_addr_lo;  \n    uint32_t                save_restore_addr_hi;  \n    uint32_t                buf_size;              \n    enum psp_gfx_fw_type    fw_type;               \n};\n\n \nstruct psp_gfx_cmd_reg_prog {\n\tuint32_t\treg_value;\n\tuint32_t\treg_id;\n};\n\n \nstruct psp_gfx_cmd_load_toc\n{\n    uint32_t        toc_phy_addr_lo;         \n    uint32_t        toc_phy_addr_hi;         \n    uint32_t        toc_size;                \n};\n\n \nstruct psp_gfx_cmd_boot_cfg\n{\n    uint32_t                        timestamp;             \n    enum psp_gfx_boot_config_cmd    sub_cmd;               \n    uint32_t                        boot_config;           \n    uint32_t                        boot_config_valid;     \n};\n\nstruct psp_gfx_cmd_sriov_spatial_part {\n\tuint32_t mode;\n\tuint32_t override_ips;\n\tuint32_t override_xcds_avail;\n\tuint32_t override_this_aid;\n};\n\n \nunion psp_gfx_commands\n{\n    struct psp_gfx_cmd_load_ta          cmd_load_ta;\n    struct psp_gfx_cmd_unload_ta        cmd_unload_ta;\n    struct psp_gfx_cmd_invoke_cmd       cmd_invoke_cmd;\n    struct psp_gfx_cmd_setup_tmr        cmd_setup_tmr;\n    struct psp_gfx_cmd_load_ip_fw       cmd_load_ip_fw;\n    struct psp_gfx_cmd_save_restore_ip_fw cmd_save_restore_ip_fw;\n    struct psp_gfx_cmd_reg_prog       cmd_setup_reg_prog;\n    struct psp_gfx_cmd_setup_tmr        cmd_setup_vmr;\n    struct psp_gfx_cmd_load_toc         cmd_load_toc;\n    struct psp_gfx_cmd_boot_cfg         boot_cfg;\n    struct psp_gfx_cmd_sriov_spatial_part cmd_spatial_part;\n};\n\nstruct psp_gfx_uresp_reserved\n{\n    uint32_t reserved[8];\n};\n\n \nstruct psp_gfx_uresp_fwar_db_info\n{\n    uint32_t fwar_db_addr_lo;\n    uint32_t fwar_db_addr_hi;\n};\n\n \nstruct psp_gfx_uresp_bootcfg {\n\tuint32_t boot_cfg;\t \n};\n\n \nunion psp_gfx_uresp {\n\tstruct psp_gfx_uresp_reserved\t\treserved;\n\tstruct psp_gfx_uresp_bootcfg\t\tboot_cfg;\n\tstruct psp_gfx_uresp_fwar_db_info\tfwar_db_info;\n};\n\n \nstruct psp_gfx_resp\n{\n    uint32_t\tstatus;\t\t \n    uint32_t\tsession_id;\t \n    uint32_t\tfw_addr_lo;\t \n    uint32_t\tfw_addr_hi;\t \n    uint32_t\ttmr_size;\t \n\n    uint32_t\treserved[11];\n\n    union psp_gfx_uresp uresp;       \n\n     \n};\n\n \nstruct psp_gfx_cmd_resp\n{\n    uint32_t        buf_size;            \n    uint32_t        buf_version;         \n    uint32_t        cmd_id;              \n\n     \n    uint32_t        resp_buf_addr_lo;    \n    uint32_t        resp_buf_addr_hi;    \n    uint32_t        resp_offset;         \n    uint32_t        resp_buf_size;       \n\n    union psp_gfx_commands  cmd;         \n\n    uint8_t         reserved_1[864 - sizeof(union psp_gfx_commands) - 28];\n\n     \n    struct psp_gfx_resp     resp;        \n\n    uint8_t         reserved_2[1024 - 864 - sizeof(struct psp_gfx_resp)];\n\n     \n};\n\n\n#define FRAME_TYPE_DESTROY          1    \n\n \nstruct psp_gfx_rb_frame\n{\n    uint32_t    cmd_buf_addr_lo;     \n    uint32_t    cmd_buf_addr_hi;     \n    uint32_t    cmd_buf_size;        \n    uint32_t    fence_addr_lo;       \n    uint32_t    fence_addr_hi;       \n    uint32_t    fence_value;         \n    uint32_t    sid_lo;              \n    uint32_t    sid_hi;              \n    uint8_t     vmid;                \n    uint8_t     frame_type;          \n    uint8_t     reserved1[2];        \n    uint32_t    reserved2[7];        \n                 \n};\n\n#define PSP_ERR_UNKNOWN_COMMAND 0x00000100\n\nenum tee_error_code {\n    TEE_SUCCESS                         = 0x00000000,\n    TEE_ERROR_NOT_SUPPORTED             = 0xFFFF000A,\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}