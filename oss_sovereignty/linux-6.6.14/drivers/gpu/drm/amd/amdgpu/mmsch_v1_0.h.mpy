{
  "module_name": "mmsch_v1_0.h",
  "hash_id": "2fe0d4c4173de2fc08c827fbc39603091f1d35ddff9c9690223612c485fc4cb1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/mmsch_v1_0.h",
  "human_readable_source": " \n\n#ifndef __MMSCH_V1_0_H__\n#define __MMSCH_V1_0_H__\n\n#define MMSCH_VERSION\t0x1\n\nenum mmsch_v1_0_command_type {\n\tMMSCH_COMMAND__DIRECT_REG_WRITE = 0,\n\tMMSCH_COMMAND__DIRECT_REG_POLLING = 2,\n\tMMSCH_COMMAND__DIRECT_REG_READ_MODIFY_WRITE = 3,\n\tMMSCH_COMMAND__INDIRECT_REG_WRITE = 8,\n\tMMSCH_COMMAND__END = 0xf\n};\n\nstruct mmsch_v1_0_init_header {\n\tuint32_t version;\n\tuint32_t header_size;\n\tuint32_t vce_init_status;\n\tuint32_t uvd_init_status;\n\tuint32_t vce_table_offset;\n\tuint32_t vce_table_size;\n\tuint32_t uvd_table_offset;\n\tuint32_t uvd_table_size;\n};\n\nstruct mmsch_vf_eng_init_header {\n\tuint32_t init_status;\n\tuint32_t table_offset;\n\tuint32_t table_size;\n};\n\nstruct mmsch_v1_1_init_header {\n\tuint32_t version;\n\tuint32_t total_size;\n\tstruct mmsch_vf_eng_init_header eng[2];\n};\n\nstruct mmsch_v1_0_cmd_direct_reg_header {\n\tuint32_t reg_offset   : 28;\n\tuint32_t command_type : 4;\n};\n\nstruct mmsch_v1_0_cmd_indirect_reg_header {\n\tuint32_t reg_offset    : 20;\n\tuint32_t reg_idx_space : 8;\n\tuint32_t command_type  : 4;\n};\n\nstruct mmsch_v1_0_cmd_direct_write {\n\tstruct mmsch_v1_0_cmd_direct_reg_header cmd_header;\n\tuint32_t reg_value;\n};\n\nstruct mmsch_v1_0_cmd_direct_read_modify_write {\n\tstruct mmsch_v1_0_cmd_direct_reg_header cmd_header;\n\tuint32_t write_data;\n\tuint32_t mask_value;\n};\n\nstruct mmsch_v1_0_cmd_direct_polling {\n\tstruct mmsch_v1_0_cmd_direct_reg_header cmd_header;\n\tuint32_t mask_value;\n\tuint32_t wait_value;\n};\n\nstruct mmsch_v1_0_cmd_end {\n\tstruct mmsch_v1_0_cmd_direct_reg_header cmd_header;\n};\n\nstruct mmsch_v1_0_cmd_indirect_write {\n\tstruct mmsch_v1_0_cmd_indirect_reg_header cmd_header;\n\tuint32_t reg_value;\n};\n\nstatic inline void mmsch_v1_0_insert_direct_wt(struct mmsch_v1_0_cmd_direct_write *direct_wt,\n\t\t\t\t\t       uint32_t *init_table,\n\t\t\t\t\t       uint32_t reg_offset,\n\t\t\t\t\t       uint32_t value)\n{\n\tdirect_wt->cmd_header.reg_offset = reg_offset;\n\tdirect_wt->reg_value = value;\n\tmemcpy((void *)init_table, direct_wt, sizeof(struct mmsch_v1_0_cmd_direct_write));\n}\n\nstatic inline void mmsch_v1_0_insert_direct_rd_mod_wt(struct mmsch_v1_0_cmd_direct_read_modify_write *direct_rd_mod_wt,\n\t\t\t\t\t\t      uint32_t *init_table,\n\t\t\t\t\t\t      uint32_t reg_offset,\n\t\t\t\t\t\t      uint32_t mask, uint32_t data)\n{\n\tdirect_rd_mod_wt->cmd_header.reg_offset = reg_offset;\n\tdirect_rd_mod_wt->mask_value = mask;\n\tdirect_rd_mod_wt->write_data = data;\n\tmemcpy((void *)init_table, direct_rd_mod_wt,\n\t       sizeof(struct mmsch_v1_0_cmd_direct_read_modify_write));\n}\n\nstatic inline void mmsch_v1_0_insert_direct_poll(struct mmsch_v1_0_cmd_direct_polling *direct_poll,\n\t\t\t\t\t\t uint32_t *init_table,\n\t\t\t\t\t\t uint32_t reg_offset,\n\t\t\t\t\t\t uint32_t mask, uint32_t wait)\n{\n\tdirect_poll->cmd_header.reg_offset = reg_offset;\n\tdirect_poll->mask_value = mask;\n\tdirect_poll->wait_value = wait;\n\tmemcpy((void *)init_table, direct_poll, sizeof(struct mmsch_v1_0_cmd_direct_polling));\n}\n\n#define MMSCH_V1_0_INSERT_DIRECT_RD_MOD_WT(reg, mask, data) { \\\n\tmmsch_v1_0_insert_direct_rd_mod_wt(&direct_rd_mod_wt, \\\n\t\t\t\t\t   init_table, (reg), \\\n\t\t\t\t\t   (mask), (data)); \\\n\tinit_table += sizeof(struct mmsch_v1_0_cmd_direct_read_modify_write)/4; \\\n\ttable_size += sizeof(struct mmsch_v1_0_cmd_direct_read_modify_write)/4; \\\n}\n\n#define MMSCH_V1_0_INSERT_DIRECT_WT(reg, value) { \\\n\tmmsch_v1_0_insert_direct_wt(&direct_wt, \\\n\t\t\t\t    init_table, (reg), \\\n\t\t\t\t    (value)); \\\n\tinit_table += sizeof(struct mmsch_v1_0_cmd_direct_write)/4; \\\n\ttable_size += sizeof(struct mmsch_v1_0_cmd_direct_write)/4; \\\n}\n\n#define MMSCH_V1_0_INSERT_DIRECT_POLL(reg, mask, wait) { \\\n\tmmsch_v1_0_insert_direct_poll(&direct_poll, \\\n\t\t\t\t      init_table, (reg), \\\n\t\t\t\t      (mask), (wait)); \\\n\tinit_table += sizeof(struct mmsch_v1_0_cmd_direct_polling)/4; \\\n\ttable_size += sizeof(struct mmsch_v1_0_cmd_direct_polling)/4; \\\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}