{
  "module_name": "amdgpu_doorbell.h",
  "hash_id": "a6abdb5be2e02fab413716a6977737912103f1c0a5b181e543cbf40323323270",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdgpu/amdgpu_doorbell.h",
  "human_readable_source": " \n\n#ifndef AMDGPU_DOORBELL_H\n#define AMDGPU_DOORBELL_H\n\n \nstruct amdgpu_doorbell {\n\t \n\tresource_size_t\t\tbase;\n\tresource_size_t\t\tsize;\n\n\t \n\tu32 num_kernel_doorbells;\n\n\t \n\tstruct amdgpu_bo *kernel_doorbells;\n\n\t \n\tuint32_t *cpu_addr;\n};\n\n \nstruct amdgpu_doorbell_index {\n\tuint32_t kiq;\n\tuint32_t mec_ring0;\n\tuint32_t mec_ring1;\n\tuint32_t mec_ring2;\n\tuint32_t mec_ring3;\n\tuint32_t mec_ring4;\n\tuint32_t mec_ring5;\n\tuint32_t mec_ring6;\n\tuint32_t mec_ring7;\n\tuint32_t userqueue_start;\n\tuint32_t userqueue_end;\n\tuint32_t gfx_ring0;\n\tuint32_t gfx_ring1;\n\tuint32_t gfx_userqueue_start;\n\tuint32_t gfx_userqueue_end;\n\tuint32_t sdma_engine[16];\n\tuint32_t mes_ring0;\n\tuint32_t mes_ring1;\n\tuint32_t ih;\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t vcn_ring0_1;\n\t\t\tuint32_t vcn_ring2_3;\n\t\t\tuint32_t vcn_ring4_5;\n\t\t\tuint32_t vcn_ring6_7;\n\t\t} vcn;\n\t\tstruct {\n\t\t\tuint32_t uvd_ring0_1;\n\t\t\tuint32_t uvd_ring2_3;\n\t\t\tuint32_t uvd_ring4_5;\n\t\t\tuint32_t uvd_ring6_7;\n\t\t\tuint32_t vce_ring0_1;\n\t\t\tuint32_t vce_ring2_3;\n\t\t\tuint32_t vce_ring4_5;\n\t\t\tuint32_t vce_ring6_7;\n\t\t} uvd_vce;\n\t};\n\tuint32_t first_non_cp;\n\tuint32_t last_non_cp;\n\tuint32_t max_assignment;\n\t \n\tuint32_t sdma_doorbell_range;\n\t \n\tuint32_t xcc_doorbell_range;\n};\n\nenum AMDGPU_DOORBELL_ASSIGNMENT {\n\tAMDGPU_DOORBELL_KIQ                     = 0x000,\n\tAMDGPU_DOORBELL_HIQ                     = 0x001,\n\tAMDGPU_DOORBELL_DIQ                     = 0x002,\n\tAMDGPU_DOORBELL_MEC_RING0               = 0x010,\n\tAMDGPU_DOORBELL_MEC_RING1               = 0x011,\n\tAMDGPU_DOORBELL_MEC_RING2               = 0x012,\n\tAMDGPU_DOORBELL_MEC_RING3               = 0x013,\n\tAMDGPU_DOORBELL_MEC_RING4               = 0x014,\n\tAMDGPU_DOORBELL_MEC_RING5               = 0x015,\n\tAMDGPU_DOORBELL_MEC_RING6               = 0x016,\n\tAMDGPU_DOORBELL_MEC_RING7               = 0x017,\n\tAMDGPU_DOORBELL_GFX_RING0               = 0x020,\n\tAMDGPU_DOORBELL_sDMA_ENGINE0            = 0x1E0,\n\tAMDGPU_DOORBELL_sDMA_ENGINE1            = 0x1E1,\n\tAMDGPU_DOORBELL_IH                      = 0x1E8,\n\tAMDGPU_DOORBELL_MAX_ASSIGNMENT          = 0x3FF,\n\tAMDGPU_DOORBELL_INVALID                 = 0xFFFF\n};\n\nenum AMDGPU_VEGA20_DOORBELL_ASSIGNMENT {\n\n\t \n\tAMDGPU_VEGA20_DOORBELL_KIQ                     = 0x000,\n\tAMDGPU_VEGA20_DOORBELL_HIQ                     = 0x001,\n\tAMDGPU_VEGA20_DOORBELL_DIQ                     = 0x002,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING0               = 0x003,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING1               = 0x004,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING2               = 0x005,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING3               = 0x006,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING4               = 0x007,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING5               = 0x008,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING6               = 0x009,\n\tAMDGPU_VEGA20_DOORBELL_MEC_RING7               = 0x00A,\n\tAMDGPU_VEGA20_DOORBELL_USERQUEUE_START\t       = 0x00B,\n\tAMDGPU_VEGA20_DOORBELL_USERQUEUE_END\t       = 0x08A,\n\tAMDGPU_VEGA20_DOORBELL_GFX_RING0               = 0x08B,\n\t \n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE0            = 0x100,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE1            = 0x10A,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE2            = 0x114,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE3            = 0x11E,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE4            = 0x128,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE5            = 0x132,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE6            = 0x13C,\n\tAMDGPU_VEGA20_DOORBELL_sDMA_ENGINE7            = 0x146,\n\t \n\tAMDGPU_VEGA20_DOORBELL_IH                      = 0x178,\n\t \n\tAMDGPU_VEGA20_DOORBELL64_VCN0_1                  = 0x188,  \n\tAMDGPU_VEGA20_DOORBELL64_VCN2_3                  = 0x189,\n\tAMDGPU_VEGA20_DOORBELL64_VCN4_5                  = 0x18A,\n\tAMDGPU_VEGA20_DOORBELL64_VCN6_7                  = 0x18B,\n\n\tAMDGPU_VEGA20_DOORBELL64_VCN8_9                  = 0x18C,  \n\tAMDGPU_VEGA20_DOORBELL64_VCNa_b                  = 0x18D,\n\tAMDGPU_VEGA20_DOORBELL64_VCNc_d                  = 0x18E,\n\tAMDGPU_VEGA20_DOORBELL64_VCNe_f                  = 0x18F,\n\n\tAMDGPU_VEGA20_DOORBELL64_UVD_RING0_1             = 0x188,\n\tAMDGPU_VEGA20_DOORBELL64_UVD_RING2_3             = 0x189,\n\tAMDGPU_VEGA20_DOORBELL64_UVD_RING4_5             = 0x18A,\n\tAMDGPU_VEGA20_DOORBELL64_UVD_RING6_7             = 0x18B,\n\n\tAMDGPU_VEGA20_DOORBELL64_VCE_RING0_1             = 0x18C,\n\tAMDGPU_VEGA20_DOORBELL64_VCE_RING2_3             = 0x18D,\n\tAMDGPU_VEGA20_DOORBELL64_VCE_RING4_5             = 0x18E,\n\tAMDGPU_VEGA20_DOORBELL64_VCE_RING6_7             = 0x18F,\n\n\tAMDGPU_VEGA20_DOORBELL64_FIRST_NON_CP            = AMDGPU_VEGA20_DOORBELL_sDMA_ENGINE0,\n\tAMDGPU_VEGA20_DOORBELL64_LAST_NON_CP             = AMDGPU_VEGA20_DOORBELL64_VCE_RING6_7,\n\n\t \n\tAMDGPU_VEGA20_DOORBELL_XCC1_KIQ_START             = 0x190,\n\t \n\tAMDGPU_VEGA20_DOORBELL_XCC1_MEC_RING0_START       = 0x197,\n\n\t \n\tAMDGPU_VEGA20_DOORBELL_AID1_sDMA_START           = 0x1D0,\n\n\tAMDGPU_VEGA20_DOORBELL_MAX_ASSIGNMENT            = 0x1F7,\n\tAMDGPU_VEGA20_DOORBELL_INVALID                   = 0xFFFF\n};\n\nenum AMDGPU_NAVI10_DOORBELL_ASSIGNMENT {\n\n\t \n\tAMDGPU_NAVI10_DOORBELL_KIQ\t\t\t= 0x000,\n\tAMDGPU_NAVI10_DOORBELL_HIQ\t\t\t= 0x001,\n\tAMDGPU_NAVI10_DOORBELL_DIQ\t\t\t= 0x002,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING0\t\t= 0x003,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING1\t\t= 0x004,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING2\t\t= 0x005,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING3\t\t= 0x006,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING4\t\t= 0x007,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING5\t\t= 0x008,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING6\t\t= 0x009,\n\tAMDGPU_NAVI10_DOORBELL_MEC_RING7\t\t= 0x00A,\n\tAMDGPU_NAVI10_DOORBELL_MES_RING0\t        = 0x00B,\n\tAMDGPU_NAVI10_DOORBELL_MES_RING1\t\t= 0x00C,\n\tAMDGPU_NAVI10_DOORBELL_USERQUEUE_START\t\t= 0x00D,\n\tAMDGPU_NAVI10_DOORBELL_USERQUEUE_END\t\t= 0x08A,\n\tAMDGPU_NAVI10_DOORBELL_GFX_RING0\t\t= 0x08B,\n\tAMDGPU_NAVI10_DOORBELL_GFX_RING1\t\t= 0x08C,\n\tAMDGPU_NAVI10_DOORBELL_GFX_USERQUEUE_START\t= 0x08D,\n\tAMDGPU_NAVI10_DOORBELL_GFX_USERQUEUE_END\t= 0x0FF,\n\n\t \n\tAMDGPU_NAVI10_DOORBELL_sDMA_ENGINE0\t\t= 0x100,\n\tAMDGPU_NAVI10_DOORBELL_sDMA_ENGINE1\t\t= 0x10A,\n\tAMDGPU_NAVI10_DOORBELL_sDMA_ENGINE2\t\t= 0x114,\n\tAMDGPU_NAVI10_DOORBELL_sDMA_ENGINE3\t\t= 0x11E,\n\t \n\tAMDGPU_NAVI10_DOORBELL_IH\t\t\t= 0x178,\n\t \n\tAMDGPU_NAVI10_DOORBELL64_VCN0_1\t\t\t= 0x188,  \n\tAMDGPU_NAVI10_DOORBELL64_VCN2_3\t\t\t= 0x189,\n\tAMDGPU_NAVI10_DOORBELL64_VCN4_5\t\t\t= 0x18A,\n\tAMDGPU_NAVI10_DOORBELL64_VCN6_7\t\t\t= 0x18B,\n\n\tAMDGPU_NAVI10_DOORBELL64_VCN8_9\t\t\t= 0x18C,\n\tAMDGPU_NAVI10_DOORBELL64_VCNa_b\t\t\t= 0x18D,\n\tAMDGPU_NAVI10_DOORBELL64_VCNc_d\t\t\t= 0x18E,\n\tAMDGPU_NAVI10_DOORBELL64_VCNe_f\t\t\t= 0x18F,\n\n\tAMDGPU_NAVI10_DOORBELL64_FIRST_NON_CP\t\t= AMDGPU_NAVI10_DOORBELL_sDMA_ENGINE0,\n\tAMDGPU_NAVI10_DOORBELL64_LAST_NON_CP\t\t= AMDGPU_NAVI10_DOORBELL64_VCNe_f,\n\n\tAMDGPU_NAVI10_DOORBELL_MAX_ASSIGNMENT\t\t= 0x18F,\n\tAMDGPU_NAVI10_DOORBELL_INVALID\t\t\t= 0xFFFF\n};\n\n \nenum AMDGPU_DOORBELL64_ASSIGNMENT {\n\t \n\n\n\t \n\tAMDGPU_DOORBELL64_KIQ                     = 0x00,\n\n\t \n\tAMDGPU_DOORBELL64_HIQ                     = 0x01,\n\tAMDGPU_DOORBELL64_DIQ                     = 0x02,\n\n\t \n\tAMDGPU_DOORBELL64_MEC_RING0               = 0x03,\n\tAMDGPU_DOORBELL64_MEC_RING1               = 0x04,\n\tAMDGPU_DOORBELL64_MEC_RING2               = 0x05,\n\tAMDGPU_DOORBELL64_MEC_RING3               = 0x06,\n\tAMDGPU_DOORBELL64_MEC_RING4               = 0x07,\n\tAMDGPU_DOORBELL64_MEC_RING5               = 0x08,\n\tAMDGPU_DOORBELL64_MEC_RING6               = 0x09,\n\tAMDGPU_DOORBELL64_MEC_RING7               = 0x0a,\n\n\t \n\tAMDGPU_DOORBELL64_USERQUEUE_START         = 0x0b,\n\tAMDGPU_DOORBELL64_USERQUEUE_END           = 0x8a,\n\n\t \n\tAMDGPU_DOORBELL64_GFX_RING0               = 0x8b,\n\n\t \n\n\t \n\tAMDGPU_DOORBELL64_sDMA_ENGINE0            = 0xF0,\n\tAMDGPU_DOORBELL64_sDMA_HI_PRI_ENGINE0     = 0xF1,\n\tAMDGPU_DOORBELL64_sDMA_ENGINE1            = 0xF2,\n\tAMDGPU_DOORBELL64_sDMA_HI_PRI_ENGINE1     = 0xF3,\n\n\t \n\tAMDGPU_DOORBELL64_IH                      = 0xF4,   \n\tAMDGPU_DOORBELL64_IH_RING1                = 0xF5,   \n\tAMDGPU_DOORBELL64_IH_RING2                = 0xF6,   \n\n\t \n\tAMDGPU_DOORBELL64_VCN0_1                  = 0xF8,  \n\tAMDGPU_DOORBELL64_VCN2_3                  = 0xF9,\n\tAMDGPU_DOORBELL64_VCN4_5                  = 0xFA,\n\tAMDGPU_DOORBELL64_VCN6_7                  = 0xFB,\n\n\t \n\tAMDGPU_DOORBELL64_UVD_RING0_1             = 0xF8,\n\tAMDGPU_DOORBELL64_UVD_RING2_3             = 0xF9,\n\tAMDGPU_DOORBELL64_UVD_RING4_5             = 0xFA,\n\tAMDGPU_DOORBELL64_UVD_RING6_7             = 0xFB,\n\n\tAMDGPU_DOORBELL64_VCE_RING0_1             = 0xFC,\n\tAMDGPU_DOORBELL64_VCE_RING2_3             = 0xFD,\n\tAMDGPU_DOORBELL64_VCE_RING4_5             = 0xFE,\n\tAMDGPU_DOORBELL64_VCE_RING6_7             = 0xFF,\n\n\tAMDGPU_DOORBELL64_FIRST_NON_CP            = AMDGPU_DOORBELL64_sDMA_ENGINE0,\n\tAMDGPU_DOORBELL64_LAST_NON_CP             = AMDGPU_DOORBELL64_VCE_RING6_7,\n\n\tAMDGPU_DOORBELL64_MAX_ASSIGNMENT          = 0xFF,\n\tAMDGPU_DOORBELL64_INVALID                 = 0xFFFF\n};\n\nenum AMDGPU_DOORBELL_ASSIGNMENT_LAYOUT1 {\n\n\t \n\n\t \n\tAMDGPU_DOORBELL_LAYOUT1_KIQ_START\t\t= 0x000,\n\tAMDGPU_DOORBELL_LAYOUT1_HIQ\t\t\t= 0x001,\n\tAMDGPU_DOORBELL_LAYOUT1_DIQ\t\t\t= 0x002,\n\t \n\tAMDGPU_DOORBELL_LAYOUT1_MEC_RING_START\t\t= 0x008,\n\tAMDGPU_DOORBELL_LAYOUT1_MEC_RING_END\t\t= 0x00F,\n\tAMDGPU_DOORBELL_LAYOUT1_USERQUEUE_START\t\t= 0x010,\n\tAMDGPU_DOORBELL_LAYOUT1_USERQUEUE_END\t\t= 0x01F,\n\tAMDGPU_DOORBELL_LAYOUT1_XCC_RANGE\t\t= 0x020,\n\n\t \n\tAMDGPU_DOORBELL_LAYOUT1_sDMA_ENGINE_START\t= 0x100,\n\tAMDGPU_DOORBELL_LAYOUT1_sDMA_ENGINE_END\t\t= 0x19F,\n\t \n\tAMDGPU_DOORBELL_LAYOUT1_IH                      = 0x1A0,\n\t \n\tAMDGPU_DOORBELL_LAYOUT1_VCN_START               = 0x1B0,\n\tAMDGPU_DOORBELL_LAYOUT1_VCN_END                 = 0x1E8,\n\n\tAMDGPU_DOORBELL_LAYOUT1_FIRST_NON_CP\t\t= AMDGPU_DOORBELL_LAYOUT1_sDMA_ENGINE_START,\n\tAMDGPU_DOORBELL_LAYOUT1_LAST_NON_CP\t\t= AMDGPU_DOORBELL_LAYOUT1_VCN_END,\n\n\tAMDGPU_DOORBELL_LAYOUT1_MAX_ASSIGNMENT          = 0x1E8,\n\tAMDGPU_DOORBELL_LAYOUT1_INVALID                 = 0xFFFF\n};\n\nu32 amdgpu_mm_rdoorbell(struct amdgpu_device *adev, u32 index);\nvoid amdgpu_mm_wdoorbell(struct amdgpu_device *adev, u32 index, u32 v);\nu64 amdgpu_mm_rdoorbell64(struct amdgpu_device *adev, u32 index);\nvoid amdgpu_mm_wdoorbell64(struct amdgpu_device *adev, u32 index, u64 v);\n\n \nint amdgpu_doorbell_init(struct amdgpu_device *adev);\nvoid amdgpu_doorbell_fini(struct amdgpu_device *adev);\nint amdgpu_doorbell_create_kernel_doorbells(struct amdgpu_device *adev);\nuint32_t amdgpu_doorbell_index_on_bar(struct amdgpu_device *adev,\n\t\t\t\t      struct amdgpu_bo *db_bo,\n\t\t\t\t      uint32_t doorbell_index,\n\t\t\t\t      uint32_t db_size);\n\n#define RDOORBELL32(index) amdgpu_mm_rdoorbell(adev, (index))\n#define WDOORBELL32(index, v) amdgpu_mm_wdoorbell(adev, (index), (v))\n#define RDOORBELL64(index) amdgpu_mm_rdoorbell64(adev, (index))\n#define WDOORBELL64(index, v) amdgpu_mm_wdoorbell64(adev, (index), (v))\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}