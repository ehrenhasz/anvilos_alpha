{
  "module_name": "kfd_pm4_headers_ai.h",
  "hash_id": "70cf7f246db7a5c9a8da5e521c9149c29ce462df774bcb197e034d661ecfc3cd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/amdkfd/kfd_pm4_headers_ai.h",
  "human_readable_source": " \n \n\n#ifndef F32_MES_PM4_PACKETS_H\n#define F32_MES_PM4_PACKETS_H\n\n#ifndef PM4_MES_HEADER_DEFINED\n#define PM4_MES_HEADER_DEFINED\nunion PM4_MES_TYPE_3_HEADER {\n\tstruct {\n\t\tuint32_t reserved1 : 8;  \n\t\tuint32_t opcode    : 8;  \n\t\tuint32_t count     : 14; \n\t\tuint32_t type      : 2;  \n\t};\n\tuint32_t u32All;\n};\n#endif  \n\n \n\n#ifndef PM4_MES_SET_RESOURCES_DEFINED\n#define PM4_MES_SET_RESOURCES_DEFINED\nenum mes_set_resources_queue_type_enum {\n\tqueue_type__mes_set_resources__kernel_interface_queue_kiq = 0,\n\tqueue_type__mes_set_resources__hsa_interface_queue_hiq = 1,\n\tqueue_type__mes_set_resources__hsa_debug_interface_queue = 4\n};\n\n\nstruct pm4_mes_set_resources {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER\theader;\t\t \n\t\tuint32_t\t\t\tordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t vmid_mask:16;\n\t\t\tuint32_t unmap_latency:8;\n\t\t\tuint32_t reserved1:5;\n\t\t\tenum mes_set_resources_queue_type_enum queue_type:3;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tuint32_t queue_mask_lo;\n\tuint32_t queue_mask_hi;\n\tuint32_t gws_mask_lo;\n\tuint32_t gws_mask_hi;\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t oac_mask:16;\n\t\t\tuint32_t reserved2:16;\n\t\t} bitfields7;\n\t\tuint32_t ordinal7;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\tuint32_t gds_heap_base:10;\n\t\tuint32_t reserved3:1;\n\t\tuint32_t gds_heap_size:10;\n\t\tuint32_t reserved4:11;\n\t\t} bitfields8;\n\t\tuint32_t ordinal8;\n\t};\n\n};\n#endif\n\n \n\n#ifndef PM4_MES_RUN_LIST_DEFINED\n#define PM4_MES_RUN_LIST_DEFINED\n\nstruct pm4_mes_runlist {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER header;  \n\t\tuint32_t ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved1:2;\n\t\t\tuint32_t ib_base_lo:30;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tuint32_t ib_base_hi;\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t ib_size:20;\n\t\t\tuint32_t chain:1;\n\t\t\tuint32_t offload_polling:1;\n\t\t\tuint32_t chained_runlist_idle_disable:1;\n\t\t\tuint32_t valid:1;\n\t\t\tuint32_t process_cnt:4;\n\t\t\tuint32_t reserved3:4;\n\t\t} bitfields4;\n\t\tuint32_t ordinal4;\n\t};\n\n};\n#endif\n\n \n\n#ifndef PM4_MES_MAP_PROCESS_DEFINED\n#define PM4_MES_MAP_PROCESS_DEFINED\n\nstruct pm4_mes_map_process {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER header;\t \n\t\tuint32_t ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t pasid:16;\n\t\t\tuint32_t reserved1:2;\n\t\t\tuint32_t debug_vmid:4;\n\t\t\tuint32_t new_debug:1;\n\t\t\tuint32_t reserved2:1;\n\t\t\tuint32_t diq_enable:1;\n\t\t\tuint32_t process_quantum:7;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tuint32_t vm_context_page_table_base_addr_lo32;\n\n\tuint32_t vm_context_page_table_base_addr_hi32;\n\n\tuint32_t sh_mem_bases;\n\n\tuint32_t sh_mem_config;\n\n\tuint32_t sq_shader_tba_lo;\n\n\tuint32_t sq_shader_tba_hi;\n\n\tuint32_t sq_shader_tma_lo;\n\n\tuint32_t sq_shader_tma_hi;\n\n\tuint32_t reserved6;\n\n\tuint32_t gds_addr_lo;\n\n\tuint32_t gds_addr_hi;\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t num_gws:7;\n\t\t\tuint32_t sdma_enable:1;\n\t\t\tuint32_t num_oac:4;\n\t\t\tuint32_t gds_size_hi:4;\n\t\t\tuint32_t gds_size:6;\n\t\t\tuint32_t num_queues:10;\n\t\t} bitfields14;\n\t\tuint32_t ordinal14;\n\t};\n\n\tuint32_t completion_signal_lo;\n\n\tuint32_t completion_signal_hi;\n\n};\n\n#endif\n\n \n\n#ifndef PM4_MES_MAP_PROCESS_VM_DEFINED\n#define PM4_MES_MAP_PROCESS_VM_DEFINED\n\nstruct PM4_MES_MAP_PROCESS_VM {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER header;\t \n\t\tuint32_t ordinal1;\n\t};\n\n\tuint32_t reserved1;\n\n\tuint32_t vm_context_cntl;\n\n\tuint32_t reserved2;\n\n\tuint32_t vm_context_page_table_end_addr_lo32;\n\n\tuint32_t vm_context_page_table_end_addr_hi32;\n\n\tuint32_t vm_context_page_table_start_addr_lo32;\n\n\tuint32_t vm_context_page_table_start_addr_hi32;\n\n\tuint32_t reserved3;\n\n\tuint32_t reserved4;\n\n\tuint32_t reserved5;\n\n\tuint32_t reserved6;\n\n\tuint32_t reserved7;\n\n\tuint32_t reserved8;\n\n\tuint32_t completion_signal_lo32;\n\n\tuint32_t completion_signal_hi32;\n\n};\n#endif\n\n \n\n#ifndef PM4_MES_MAP_QUEUES_VI_DEFINED\n#define PM4_MES_MAP_QUEUES_VI_DEFINED\nenum mes_map_queues_queue_sel_enum {\n\tqueue_sel__mes_map_queues__map_to_specified_queue_slots_vi = 0,\nqueue_sel__mes_map_queues__map_to_hws_determined_queue_slots_vi = 1\n};\n\nenum mes_map_queues_queue_type_enum {\n\tqueue_type__mes_map_queues__normal_compute_vi = 0,\n\tqueue_type__mes_map_queues__debug_interface_queue_vi = 1,\n\tqueue_type__mes_map_queues__normal_latency_static_queue_vi = 2,\nqueue_type__mes_map_queues__low_latency_static_queue_vi = 3\n};\n\nenum mes_map_queues_engine_sel_enum {\n\tengine_sel__mes_map_queues__compute_vi = 0,\n\tengine_sel__mes_map_queues__sdma0_vi = 2,\n\tengine_sel__mes_map_queues__sdma1_vi = 3\n};\n\nenum mes_map_queues_extended_engine_sel_enum {\n\textended_engine_sel__mes_map_queues__legacy_engine_sel = 0,\n\textended_engine_sel__mes_map_queues__sdma0_to_7_sel  = 1,\n\textended_engine_sel__mes_map_queues__sdma8_to_15_sel = 2\n};\n\nstruct pm4_mes_map_queues {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER   header;             \n\t\tuint32_t            ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved1:2;\n\t\t\tenum mes_map_queues_extended_engine_sel_enum extended_engine_sel:2;\n\t\t\tenum mes_map_queues_queue_sel_enum queue_sel:2;\n\t\t\tuint32_t reserved5:6;\n\t\t\tuint32_t gws_control_queue:1;\n\t\t\tuint32_t reserved2:8;\n\t\t\tenum mes_map_queues_queue_type_enum queue_type:3;\n\t\t\tuint32_t reserved3:2;\n\t\t\tenum mes_map_queues_engine_sel_enum engine_sel:3;\n\t\t\tuint32_t num_queues:3;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved3:1;\n\t\t\tuint32_t check_disable:1;\n\t\t\tuint32_t doorbell_offset:26;\n\t\t\tuint32_t reserved4:4;\n\t\t} bitfields3;\n\t\tuint32_t ordinal3;\n\t};\n\n\tuint32_t mqd_addr_lo;\n\tuint32_t mqd_addr_hi;\n\tuint32_t wptr_addr_lo;\n\tuint32_t wptr_addr_hi;\n};\n#endif\n\n \n\n#ifndef PM4_MES_QUERY_STATUS_DEFINED\n#define PM4_MES_QUERY_STATUS_DEFINED\nenum mes_query_status_interrupt_sel_enum {\n\tinterrupt_sel__mes_query_status__completion_status = 0,\n\tinterrupt_sel__mes_query_status__process_status = 1,\n\tinterrupt_sel__mes_query_status__queue_status = 2\n};\n\nenum mes_query_status_command_enum {\n\tcommand__mes_query_status__interrupt_only = 0,\n\tcommand__mes_query_status__fence_only_immediate = 1,\n\tcommand__mes_query_status__fence_only_after_write_ack = 2,\n\tcommand__mes_query_status__fence_wait_for_write_ack_send_interrupt = 3\n};\n\nenum mes_query_status_engine_sel_enum {\n\tengine_sel__mes_query_status__compute = 0,\n\tengine_sel__mes_query_status__sdma0_queue = 2,\n\tengine_sel__mes_query_status__sdma1_queue = 3\n};\n\nstruct pm4_mes_query_status {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER   header;             \n\t\tuint32_t            ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t context_id:28;\n\t\t\tenum mes_query_status_interrupt_sel_enum\tinterrupt_sel:2;\n\t\t\tenum mes_query_status_command_enum command:2;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t pasid:16;\n\t\t\tuint32_t reserved1:16;\n\t\t} bitfields3a;\n\t\tstruct {\n\t\t\tuint32_t reserved2:2;\n\t\t\tuint32_t doorbell_offset:26;\n\t\t\tenum mes_query_status_engine_sel_enum engine_sel:3;\n\t\t\tuint32_t reserved3:1;\n\t\t} bitfields3b;\n\t\tuint32_t ordinal3;\n\t};\n\n\tuint32_t addr_lo;\n\tuint32_t addr_hi;\n\tuint32_t data_lo;\n\tuint32_t data_hi;\n};\n#endif\n\n \n\n#ifndef PM4_MES_UNMAP_QUEUES_DEFINED\n#define PM4_MES_UNMAP_QUEUES_DEFINED\nenum mes_unmap_queues_action_enum {\n\taction__mes_unmap_queues__preempt_queues = 0,\n\taction__mes_unmap_queues__reset_queues = 1,\n\taction__mes_unmap_queues__disable_process_queues = 2,\n\taction__mes_unmap_queues__reserved = 3\n};\n\nenum mes_unmap_queues_queue_sel_enum {\n\tqueue_sel__mes_unmap_queues__perform_request_on_specified_queues = 0,\n\tqueue_sel__mes_unmap_queues__perform_request_on_pasid_queues = 1,\n\tqueue_sel__mes_unmap_queues__unmap_all_queues = 2,\n\tqueue_sel__mes_unmap_queues__unmap_all_non_static_queues = 3\n};\n\nenum mes_unmap_queues_engine_sel_enum {\n\tengine_sel__mes_unmap_queues__compute = 0,\n\tengine_sel__mes_unmap_queues__sdma0 = 2,\n\tengine_sel__mes_unmap_queues__sdmal = 3\n};\n\nenum mes_unmap_queues_extended_engine_sel_enum {\n\textended_engine_sel__mes_unmap_queues__legacy_engine_sel = 0,\n\textended_engine_sel__mes_unmap_queues__sdma0_to_7_sel = 1\n};\n\nstruct pm4_mes_unmap_queues {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER   header;             \n\t\tuint32_t            ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tenum mes_unmap_queues_action_enum action:2;\n\t\t\tenum mes_unmap_queues_extended_engine_sel_enum extended_engine_sel:2;\n\t\t\tenum mes_unmap_queues_queue_sel_enum queue_sel:2;\n\t\t\tuint32_t reserved2:20;\n\t\t\tenum mes_unmap_queues_engine_sel_enum engine_sel:3;\n\t\t\tuint32_t num_queues:3;\n\t\t} bitfields2;\n\t\tuint32_t ordinal2;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t pasid:16;\n\t\t\tuint32_t reserved3:16;\n\t\t} bitfields3a;\n\t\tstruct {\n\t\t\tuint32_t reserved4:2;\n\t\t\tuint32_t doorbell_offset0:26;\n\t\t\tint32_t reserved5:4;\n\t\t} bitfields3b;\n\t\tuint32_t ordinal3;\n\t};\n\n\tunion {\n\tstruct {\n\t\t\tuint32_t reserved6:2;\n\t\t\tuint32_t doorbell_offset1:26;\n\t\t\tuint32_t reserved7:4;\n\t\t} bitfields4;\n\t\tuint32_t ordinal4;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved8:2;\n\t\t\tuint32_t doorbell_offset2:26;\n\t\t\tuint32_t reserved9:4;\n\t\t} bitfields5;\n\t\tuint32_t ordinal5;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved10:2;\n\t\t\tuint32_t doorbell_offset3:26;\n\t\t\tuint32_t reserved11:4;\n\t\t} bitfields6;\n\t\tuint32_t ordinal6;\n\t};\n};\n#endif\n\n#ifndef PM4_MEC_RELEASE_MEM_DEFINED\n#define PM4_MEC_RELEASE_MEM_DEFINED\n\nenum mec_release_mem_event_index_enum {\n\tevent_index__mec_release_mem__end_of_pipe = 5,\n\tevent_index__mec_release_mem__shader_done = 6\n};\n\nenum mec_release_mem_cache_policy_enum {\n\tcache_policy__mec_release_mem__lru = 0,\n\tcache_policy__mec_release_mem__stream = 1\n};\n\nenum mec_release_mem_pq_exe_status_enum {\n\tpq_exe_status__mec_release_mem__default = 0,\n\tpq_exe_status__mec_release_mem__phase_update = 1\n};\n\nenum mec_release_mem_dst_sel_enum {\n\tdst_sel__mec_release_mem__memory_controller = 0,\n\tdst_sel__mec_release_mem__tc_l2 = 1,\n\tdst_sel__mec_release_mem__queue_write_pointer_register = 2,\n\tdst_sel__mec_release_mem__queue_write_pointer_poll_mask_bit = 3\n};\n\nenum mec_release_mem_int_sel_enum {\n\tint_sel__mec_release_mem__none = 0,\n\tint_sel__mec_release_mem__send_interrupt_only = 1,\n\tint_sel__mec_release_mem__send_interrupt_after_write_confirm = 2,\n\tint_sel__mec_release_mem__send_data_after_write_confirm = 3,\n\tint_sel__mec_release_mem__unconditionally_send_int_ctxid = 4,\n\tint_sel__mec_release_mem__conditionally_send_int_ctxid_based_on_32_bit_compare = 5,\n\tint_sel__mec_release_mem__conditionally_send_int_ctxid_based_on_64_bit_compare = 6\n};\n\nenum mec_release_mem_data_sel_enum {\n\tdata_sel__mec_release_mem__none = 0,\n\tdata_sel__mec_release_mem__send_32_bit_low = 1,\n\tdata_sel__mec_release_mem__send_64_bit_data = 2,\n\tdata_sel__mec_release_mem__send_gpu_clock_counter = 3,\n\tdata_sel__mec_release_mem__send_cp_perfcounter_hi_lo = 4,\n\tdata_sel__mec_release_mem__store_gds_data_to_memory = 5\n};\n\nstruct pm4_mec_release_mem {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER header;      \n\t\tunsigned int ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tunsigned int event_type:6;\n\t\t\tunsigned int reserved1:2;\n\t\t\tenum mec_release_mem_event_index_enum event_index:4;\n\t\t\tunsigned int tcl1_vol_action_ena:1;\n\t\t\tunsigned int tc_vol_action_ena:1;\n\t\t\tunsigned int reserved2:1;\n\t\t\tunsigned int tc_wb_action_ena:1;\n\t\t\tunsigned int tcl1_action_ena:1;\n\t\t\tunsigned int tc_action_ena:1;\n\t\t\tuint32_t reserved3:1;\n\t\t\tuint32_t tc_nc_action_ena:1;\n\t\t\tuint32_t tc_wc_action_ena:1;\n\t\t\tuint32_t tc_md_action_ena:1;\n\t\t\tuint32_t reserved4:3;\n\t\t\tenum mec_release_mem_cache_policy_enum cache_policy:2;\n\t\t\tuint32_t reserved5:2;\n\t\t\tenum mec_release_mem_pq_exe_status_enum pq_exe_status:1;\n\t\t\tuint32_t reserved6:2;\n\t\t} bitfields2;\n\t\tunsigned int ordinal2;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved7:16;\n\t\t\tenum mec_release_mem_dst_sel_enum dst_sel:2;\n\t\t\tuint32_t reserved8:6;\n\t\t\tenum mec_release_mem_int_sel_enum int_sel:3;\n\t\t\tuint32_t reserved9:2;\n\t\t\tenum mec_release_mem_data_sel_enum data_sel:3;\n\t\t} bitfields3;\n\t\tunsigned int ordinal3;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t reserved10:2;\n\t\t\tunsigned int address_lo_32b:30;\n\t\t} bitfields4;\n\t\tstruct {\n\t\t\tuint32_t reserved11:3;\n\t\t\tuint32_t address_lo_64b:29;\n\t\t} bitfields4b;\n\t\tuint32_t reserved12;\n\t\tunsigned int ordinal4;\n\t};\n\n\tunion {\n\t\tuint32_t address_hi;\n\t\tuint32_t reserved13;\n\t\tuint32_t ordinal5;\n\t};\n\n\tunion {\n\t\tuint32_t data_lo;\n\t\tuint32_t cmp_data_lo;\n\t\tstruct {\n\t\t\tuint32_t dw_offset:16;\n\t\t\tuint32_t num_dwords:16;\n\t\t} bitfields6c;\n\t\tuint32_t reserved14;\n\t\tuint32_t ordinal6;\n\t};\n\n\tunion {\n\t\tuint32_t data_hi;\n\t\tuint32_t cmp_data_hi;\n\t\tuint32_t reserved15;\n\t\tuint32_t reserved16;\n\t\tuint32_t ordinal7;\n\t};\n\n\tuint32_t int_ctxid;\n\n};\n\n#endif\n\n#ifndef PM4_MEC_WRITE_DATA_DEFINED\n#define PM4_MEC_WRITE_DATA_DEFINED\n\nenum WRITE_DATA_dst_sel_enum {\n\tdst_sel___write_data__mem_mapped_register = 0,\n\tdst_sel___write_data__tc_l2 = 2,\n\tdst_sel___write_data__gds = 3,\n\tdst_sel___write_data__memory = 5,\n\tdst_sel___write_data__memory_mapped_adc_persistent_state = 6,\n};\n\nenum WRITE_DATA_addr_incr_enum {\n\taddr_incr___write_data__increment_address = 0,\n\taddr_incr___write_data__do_not_increment_address = 1\n};\n\nenum WRITE_DATA_wr_confirm_enum {\n\twr_confirm___write_data__do_not_wait_for_write_confirmation = 0,\n\twr_confirm___write_data__wait_for_write_confirmation = 1\n};\n\nenum WRITE_DATA_cache_policy_enum {\n\tcache_policy___write_data__lru = 0,\n\tcache_policy___write_data__stream = 1\n};\n\n\nstruct pm4_mec_write_data_mmio {\n\tunion {\n\t\tunion PM4_MES_TYPE_3_HEADER header;      \n\t\tunsigned int ordinal1;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tunsigned int reserved1:8;\n\t\t\tunsigned int dst_sel:4;\n\t\t\tunsigned int reserved2:4;\n\t\t\tunsigned int addr_incr:1;\n\t\t\tunsigned int reserved3:2;\n\t\t\tunsigned int resume_vf:1;\n\t\t\tunsigned int wr_confirm:1;\n\t\t\tunsigned int reserved4:4;\n\t\t\tunsigned int cache_policy:2;\n\t\t\tunsigned int reserved5:5;\n\t\t} bitfields2;\n\t\tunsigned int ordinal2;\n\t};\n\n\tunion {\n\t\tstruct {\n\t\t\tunsigned int dst_mmreg_addr:18;\n\t\t\tunsigned int reserved6:14;\n\t\t} bitfields3;\n\t\tunsigned int ordinal3;\n\t};\n\n\tuint32_t reserved7;\n\n\tuint32_t data;\n\n};\n\n#endif\n\nenum {\n\tCACHE_FLUSH_AND_INV_TS_EVENT = 0x00000014\n};\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}