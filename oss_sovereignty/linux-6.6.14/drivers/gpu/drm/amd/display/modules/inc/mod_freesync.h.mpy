{
  "module_name": "mod_freesync.h",
  "hash_id": "8553697da42c51b764bbd9cd7082758f5861c56c140e8fc2b358028cb342181e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/modules/inc/mod_freesync.h",
  "human_readable_source": " \n\n\n\n\n \n\n#ifndef MOD_FREESYNC_H_\n#define MOD_FREESYNC_H_\n\n#include \"mod_shared.h\"\n\n\nstruct mod_freesync {\n\tint dummy;\n};\n\n\nstruct mod_freesync_caps {\n\tbool supported;\n\tunsigned int min_refresh_in_micro_hz;\n\tunsigned int max_refresh_in_micro_hz;\n};\n\nenum mod_vrr_state {\n\tVRR_STATE_UNSUPPORTED = 0,\n\tVRR_STATE_DISABLED,\n\tVRR_STATE_INACTIVE,\n\tVRR_STATE_ACTIVE_VARIABLE,\n\tVRR_STATE_ACTIVE_FIXED\n};\n\nstruct mod_freesync_config {\n\tenum mod_vrr_state state;\n\tbool vsif_supported;\n\tbool ramping;\n\tbool btr;\n\tunsigned int min_refresh_in_uhz;\n\tunsigned int max_refresh_in_uhz;\n\tunsigned int fixed_refresh_in_uhz;\n\n};\n\nstruct mod_vrr_params_btr {\n\tbool btr_enabled;\n\tbool btr_active;\n\tuint32_t mid_point_in_us;\n\tuint32_t inserted_duration_in_us;\n\tuint32_t frames_to_insert;\n\tuint32_t frame_counter;\n\tuint32_t margin_in_us;\n};\n\nstruct mod_vrr_params_fixed_refresh {\n\tbool fixed_active;\n\tbool ramping_active;\n\tbool ramping_done;\n\tuint32_t target_refresh_in_uhz;\n\tuint32_t frame_counter;\n};\n\nstruct mod_vrr_params_flip_interval {\n\tbool flip_interval_workaround_active;\n\tbool program_flip_interval_workaround;\n\tbool do_flip_interval_workaround_cleanup;\n\tuint32_t flip_interval_detect_counter;\n\tuint32_t vsyncs_between_flip;\n\tuint32_t vsync_to_flip_in_us;\n\tuint32_t v_update_timestamp_in_us;\n};\n\nstruct mod_vrr_params {\n\tbool supported;\n\tbool send_info_frame;\n\tenum mod_vrr_state state;\n\n\tuint32_t min_refresh_in_uhz;\n\tuint32_t max_duration_in_us;\n\tuint32_t max_refresh_in_uhz;\n\tuint32_t min_duration_in_us;\n\tuint32_t fixed_refresh_in_uhz;\n\n\tstruct dc_crtc_timing_adjust adjust;\n\n\tstruct mod_vrr_params_fixed_refresh fixed;\n\n\tstruct mod_vrr_params_btr btr;\n\n\tstruct mod_vrr_params_flip_interval flip_interval;\n};\n\nstruct mod_freesync *mod_freesync_create(struct dc *dc);\nvoid mod_freesync_destroy(struct mod_freesync *mod_freesync);\n\nbool mod_freesync_get_vmin_vmax(struct mod_freesync *mod_freesync,\n\t\tconst struct dc_stream_state *stream,\n\t\tunsigned int *vmin,\n\t\tunsigned int *vmax);\n\nbool mod_freesync_get_v_position(struct mod_freesync *mod_freesync,\n\t\tstruct dc_stream_state *stream,\n\t\tunsigned int *nom_v_pos,\n\t\tunsigned int *v_pos);\n\nvoid mod_freesync_get_settings(struct mod_freesync *mod_freesync,\n\t\tconst struct mod_vrr_params *vrr,\n\t\tunsigned int *v_total_min, unsigned int *v_total_max,\n\t\tunsigned int *event_triggers,\n\t\tunsigned int *window_min, unsigned int *window_max,\n\t\tunsigned int *lfc_mid_point_in_us,\n\t\tunsigned int *inserted_frames,\n\t\tunsigned int *inserted_duration_in_us);\n\nvoid mod_freesync_build_vrr_infopacket(struct mod_freesync *mod_freesync,\n\t\tconst struct dc_stream_state *stream,\n\t\tconst struct mod_vrr_params *vrr,\n\t\tenum vrr_packet_type packet_type,\n\t\tenum color_transfer_func app_tf,\n\t\tstruct dc_info_packet *infopacket,\n\t\tbool pack_sdp_v1_3);\n\nvoid mod_freesync_build_vrr_params(struct mod_freesync *mod_freesync,\n\t\tconst struct dc_stream_state *stream,\n\t\tstruct mod_freesync_config *in_config,\n\t\tstruct mod_vrr_params *in_out_vrr);\n\nvoid mod_freesync_handle_preflip(struct mod_freesync *mod_freesync,\n\t\tconst struct dc_plane_state *plane,\n\t\tconst struct dc_stream_state *stream,\n\t\tunsigned int curr_time_stamp_in_us,\n\t\tstruct mod_vrr_params *in_out_vrr);\n\nvoid mod_freesync_handle_v_update(struct mod_freesync *mod_freesync,\n\t\tconst struct dc_stream_state *stream,\n\t\tstruct mod_vrr_params *in_out_vrr);\n\nunsigned long long mod_freesync_calc_nominal_field_rate(\n\t\t\tconst struct dc_stream_state *stream);\n\nunsigned long long mod_freesync_calc_field_rate_from_timing(\n\t\tunsigned int vtotal, unsigned int htotal, unsigned int pix_clk);\n\nbool mod_freesync_is_valid_range(uint32_t min_refresh_cap_in_uhz,\n\t\tuint32_t max_refresh_cap_in_uhz,\n\t\tuint32_t nominal_field_rate_in_uhz);\n\nunsigned int mod_freesync_calc_v_total_from_refresh(\n\t\tconst struct dc_stream_state *stream,\n\t\tunsigned int refresh_in_uhz);\n\n\nbool mod_freesync_get_freesync_enabled(struct mod_vrr_params *pVrr);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}