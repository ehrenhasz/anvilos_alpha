{
  "module_name": "mod_hdcp.h",
  "hash_id": "365680fd0ef80f355357e54dde073ca5b5429f23b786c595a9765bd6070555eb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/modules/inc/mod_hdcp.h",
  "human_readable_source": " \n\n#ifndef MOD_HDCP_H_\n#define MOD_HDCP_H_\n\n#include \"os_types.h\"\n#include \"signal_types.h\"\n\n \nstruct mod_hdcp;\n\n#define MAX_NUM_OF_DISPLAYS 6\n#define MAX_NUM_OF_ATTEMPTS 4\n#define MAX_NUM_OF_ERROR_TRACE 10\n\n \nenum mod_hdcp_status {\n\tMOD_HDCP_STATUS_SUCCESS = 0,\n\tMOD_HDCP_STATUS_FAILURE,\n\tMOD_HDCP_STATUS_RESET_NEEDED,\n\tMOD_HDCP_STATUS_DISPLAY_OUT_OF_BOUND,\n\tMOD_HDCP_STATUS_DISPLAY_NOT_FOUND,\n\tMOD_HDCP_STATUS_INVALID_STATE,\n\tMOD_HDCP_STATUS_NOT_IMPLEMENTED,\n\tMOD_HDCP_STATUS_INTERNAL_POLICY_FAILURE,\n\tMOD_HDCP_STATUS_UPDATE_TOPOLOGY_FAILURE,\n\tMOD_HDCP_STATUS_CREATE_PSP_SERVICE_FAILURE,\n\tMOD_HDCP_STATUS_DESTROY_PSP_SERVICE_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_CREATE_SESSION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_DESTROY_SESSION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_VALIDATE_ENCRYPTION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_NOT_HDCP_REPEATER,\n\tMOD_HDCP_STATUS_HDCP1_NOT_CAPABLE,\n\tMOD_HDCP_STATUS_HDCP1_R0_PRIME_PENDING,\n\tMOD_HDCP_STATUS_HDCP1_VALIDATE_RX_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_BKSV_REVOKED,\n\tMOD_HDCP_STATUS_HDCP1_KSV_LIST_NOT_READY,\n\tMOD_HDCP_STATUS_HDCP1_VALIDATE_KSV_LIST_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_KSV_LIST_REVOKED,\n\tMOD_HDCP_STATUS_HDCP1_ENABLE_ENCRYPTION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_ENABLE_STREAM_ENCRYPTION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_MAX_CASCADE_EXCEEDED_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_MAX_DEVS_EXCEEDED_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_DEVICE_COUNT_MISMATCH_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_LINK_INTEGRITY_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_REAUTH_REQUEST_ISSUED,\n\tMOD_HDCP_STATUS_HDCP1_LINK_MAINTENANCE_FAILURE,\n\tMOD_HDCP_STATUS_HDCP1_INVALID_BKSV,\n\tMOD_HDCP_STATUS_DDC_FAILURE,  \n\tMOD_HDCP_STATUS_INVALID_OPERATION,\n\tMOD_HDCP_STATUS_HDCP2_NOT_CAPABLE,\n\tMOD_HDCP_STATUS_HDCP2_CREATE_SESSION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_DESTROY_SESSION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_PREP_AKE_INIT_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_AKE_CERT_PENDING,\n\tMOD_HDCP_STATUS_HDCP2_H_PRIME_PENDING,\n\tMOD_HDCP_STATUS_HDCP2_PAIRING_INFO_PENDING,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_AKE_CERT_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_AKE_CERT_REVOKED,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_H_PRIME_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_PAIRING_INFO_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_PREP_LC_INIT_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_L_PRIME_PENDING,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_L_PRIME_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_PREP_EKS_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_ENABLE_ENCRYPTION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_RX_ID_LIST_NOT_READY,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_RX_ID_LIST_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_RX_ID_LIST_REVOKED,\n\tMOD_HDCP_STATUS_HDCP2_ENABLE_STREAM_ENCRYPTION_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_STREAM_READY_PENDING,\n\tMOD_HDCP_STATUS_HDCP2_VALIDATE_STREAM_READY_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_PREPARE_STREAM_MANAGEMENT_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_REAUTH_REQUEST,\n\tMOD_HDCP_STATUS_HDCP2_REAUTH_LINK_INTEGRITY_FAILURE,\n\tMOD_HDCP_STATUS_HDCP2_DEVICE_COUNT_MISMATCH_FAILURE,\n\tMOD_HDCP_STATUS_UNSUPPORTED_PSP_VER_FAILURE,\n};\n\nstruct mod_hdcp_displayport {\n\tuint8_t rev;\n\tuint8_t assr_enabled;\n\tuint8_t mst_enabled;\n\tuint8_t dp2_enabled;\n\tuint8_t usb4_enabled;\n};\n\nstruct mod_hdcp_hdmi {\n\tuint8_t reserved;\n};\nenum mod_hdcp_operation_mode {\n\tMOD_HDCP_MODE_OFF,\n\tMOD_HDCP_MODE_DEFAULT,\n\tMOD_HDCP_MODE_DP\n};\n\nenum mod_hdcp_display_state {\n\tMOD_HDCP_DISPLAY_INACTIVE = 0,\n\tMOD_HDCP_DISPLAY_ACTIVE,\n\tMOD_HDCP_DISPLAY_ENCRYPTION_ENABLED\n};\n\nstruct mod_hdcp_psp_caps {\n\tuint8_t dtm_v3_supported;\n};\n\nenum mod_hdcp_display_disable_option {\n\tMOD_HDCP_DISPLAY_NOT_DISABLE = 0,\n\tMOD_HDCP_DISPLAY_DISABLE_AUTHENTICATION,\n\tMOD_HDCP_DISPLAY_DISABLE_ENCRYPTION,\n};\n\nstruct mod_hdcp_ddc {\n\tvoid *handle;\n\tstruct {\n\t\tbool (*read_i2c)(void *handle,\n\t\t\t\tuint32_t address,\n\t\t\t\tuint8_t offset,\n\t\t\t\tuint8_t *data,\n\t\t\t\tuint32_t size);\n\t\tbool (*write_i2c)(void *handle,\n\t\t\t\tuint32_t address,\n\t\t\t\tconst uint8_t *data,\n\t\t\t\tuint32_t size);\n\t\tbool (*read_dpcd)(void *handle,\n\t\t\t\tuint32_t address,\n\t\t\t\tuint8_t *data,\n\t\t\t\tuint32_t size);\n\t\tbool (*write_dpcd)(void *handle,\n\t\t\t\tuint32_t address,\n\t\t\t\tconst uint8_t *data,\n\t\t\t\tuint32_t size);\n\t} funcs;\n};\n\nstruct mod_hdcp_psp {\n\tvoid *handle;\n\tvoid *funcs;\n\tstruct mod_hdcp_psp_caps caps;\n};\n\nstruct mod_hdcp_display_adjustment {\n\tuint8_t disable\t\t\t: 2;\n\tuint8_t reserved\t\t: 6;\n};\n\nstruct mod_hdcp_link_adjustment_hdcp1 {\n\tuint8_t disable\t\t\t: 1;\n\tuint8_t postpone_encryption\t: 1;\n\tuint8_t min_auth_retries_wa : 1;\n\tuint8_t reserved\t\t: 5;\n};\n\nenum mod_hdcp_force_hdcp_type {\n\tMOD_HDCP_FORCE_TYPE_MAX = 0,\n\tMOD_HDCP_FORCE_TYPE_0,\n\tMOD_HDCP_FORCE_TYPE_1\n};\n\nstruct mod_hdcp_link_adjustment_hdcp2 {\n\tuint8_t disable\t\t\t: 1;\n\tuint8_t force_type\t\t: 2;\n\tuint8_t force_no_stored_km\t: 1;\n\tuint8_t increase_h_prime_timeout: 1;\n\tuint8_t reserved\t\t: 3;\n};\n\nstruct mod_hdcp_link_adjustment {\n\tuint8_t auth_delay;\n\tstruct mod_hdcp_link_adjustment_hdcp1 hdcp1;\n\tstruct mod_hdcp_link_adjustment_hdcp2 hdcp2;\n};\n\nstruct mod_hdcp_error {\n\tenum mod_hdcp_status status;\n\tuint8_t state_id;\n};\n\nstruct mod_hdcp_trace {\n\tstruct mod_hdcp_error errors[MAX_NUM_OF_ERROR_TRACE];\n\tuint8_t error_count;\n};\n\nenum mod_hdcp_encryption_status {\n\tMOD_HDCP_ENCRYPTION_STATUS_HDCP_OFF = 0,\n\tMOD_HDCP_ENCRYPTION_STATUS_HDCP1_ON,\n\tMOD_HDCP_ENCRYPTION_STATUS_HDCP2_TYPE0_ON,\n\tMOD_HDCP_ENCRYPTION_STATUS_HDCP2_TYPE1_ON,\n\tMOD_HDCP_ENCRYPTION_STATUS_HDCP2_ON\n};\n\n \nenum mod_hdcp_event {\n\tMOD_HDCP_EVENT_CALLBACK = 0,\n\tMOD_HDCP_EVENT_WATCHDOG_TIMEOUT,\n\tMOD_HDCP_EVENT_CPIRQ\n};\n\n \nstruct mod_hdcp_output {\n\tuint8_t callback_needed;\n\tuint8_t callback_stop;\n\tuint8_t watchdog_timer_needed;\n\tuint8_t watchdog_timer_stop;\n\tuint16_t callback_delay;\n\tuint16_t watchdog_timer_delay;\n\tuint8_t auth_complete;\n};\n\n \nstruct mod_hdcp_display {\n\tenum mod_hdcp_display_state state;\n\tuint8_t index;\n\tuint8_t controller;\n\tuint8_t dig_fe;\n\tuint8_t stream_enc_idx;\n\tunion {\n\t\tuint8_t vc_id;\n\t};\n\tstruct mod_hdcp_display_adjustment adjust;\n};\n\n \n \nstruct mod_hdcp_link {\n\tenum mod_hdcp_operation_mode mode;\n\tuint8_t dig_be;\n\tuint8_t ddc_line;\n\tuint8_t link_enc_idx;\n\tuint8_t phy_idx;\n\tuint8_t dio_output_id;\n\tuint8_t hdcp_supported_informational;\n\tunion {\n\t\tstruct mod_hdcp_displayport dp;\n\t\tstruct mod_hdcp_hdmi hdmi;\n\t};\n\tstruct mod_hdcp_link_adjustment adjust;\n};\n\n \nstruct mod_hdcp_display_query {\n\tconst struct mod_hdcp_display *display;\n\tconst struct mod_hdcp_link *link;\n\tconst struct mod_hdcp_trace *trace;\n\tenum mod_hdcp_encryption_status encryption_status;\n};\n\n \nstruct mod_hdcp_config {\n\tstruct mod_hdcp_psp psp;\n\tstruct mod_hdcp_ddc ddc;\n\tuint8_t index;\n};\n\n \nsize_t mod_hdcp_get_memory_size(void);\n\n \nenum mod_hdcp_status mod_hdcp_setup(struct mod_hdcp *hdcp,\n\t\tstruct mod_hdcp_config *config);\n\n \nenum mod_hdcp_status mod_hdcp_teardown(struct mod_hdcp *hdcp);\n\n \nenum mod_hdcp_status mod_hdcp_add_display(struct mod_hdcp *hdcp,\n\t\tstruct mod_hdcp_link *link, struct mod_hdcp_display *display,\n\t\tstruct mod_hdcp_output *output);\n\n \nenum mod_hdcp_status mod_hdcp_remove_display(struct mod_hdcp *hdcp,\n\t\tuint8_t index, struct mod_hdcp_output *output);\n\n \nenum mod_hdcp_status mod_hdcp_update_display(struct mod_hdcp *hdcp,\n\t\tuint8_t index,\n\t\tstruct mod_hdcp_link_adjustment *link_adjust,\n\t\tstruct mod_hdcp_display_adjustment *display_adjust,\n\t\tstruct mod_hdcp_output *output);\n\n \nenum mod_hdcp_status mod_hdcp_query_display(struct mod_hdcp *hdcp,\n\t\tuint8_t index, struct mod_hdcp_display_query *query);\n\n \nenum mod_hdcp_status mod_hdcp_reset_connection(struct mod_hdcp *hdcp,\n\t\tstruct mod_hdcp_output *output);\n\n \nenum mod_hdcp_status mod_hdcp_process_event(struct mod_hdcp *hdcp,\n\t\tenum mod_hdcp_event event, struct mod_hdcp_output *output);\n\n \nchar *mod_hdcp_status_to_str(int32_t status);\n\n \nchar *mod_hdcp_state_id_to_str(int32_t id);\n\n \nenum mod_hdcp_operation_mode mod_hdcp_signal_type_to_operation_mode(\n\t\tenum signal_type signal);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}