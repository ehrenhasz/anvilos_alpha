{
  "module_name": "timing_generator.h",
  "hash_id": "e499e3101b9d8437bbaea0806acf7929946598f7f0bafcb615f79a503d0fc31e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/hw/timing_generator.h",
  "human_readable_source": " \n\n#ifndef __DAL_TIMING_GENERATOR_TYPES_H__\n#define __DAL_TIMING_GENERATOR_TYPES_H__\n\n#include \"hw_shared.h\"\n\nstruct dc_bios;\n\n \nstruct crtc_position {\n\tint32_t vertical_count;\n\tint32_t horizontal_count;\n\tint32_t nominal_vcount;\n};\n\nstruct dcp_gsl_params {\n\tint gsl_group;\n\tint gsl_master;\n};\n\nstruct gsl_params {\n\tint gsl0_en;\n\tint gsl1_en;\n\tint gsl2_en;\n\tint gsl_master_en;\n\tint gsl_master_mode;\n\tint master_update_lock_gsl_en;\n\tint gsl_window_start_x;\n\tint gsl_window_end_x;\n\tint gsl_window_start_y;\n\tint gsl_window_end_y;\n};\n\n \nstruct drr_params {\n\tuint32_t vertical_total_min;\n\tuint32_t vertical_total_max;\n\tuint32_t vertical_total_mid;\n\tuint32_t vertical_total_mid_frame_num;\n\tbool immediate_flip;\n};\n\n#define LEFT_EYE_3D_PRIMARY_SURFACE 1\n#define RIGHT_EYE_3D_PRIMARY_SURFACE 0\n\nenum crtc_state {\n\tCRTC_STATE_VBLANK = 0,\n\tCRTC_STATE_VACTIVE\n};\n\nstruct vupdate_keepout_params {\n\tint start_offset;\n\tint end_offset;\n\tint enable;\n};\n\nstruct crtc_stereo_flags {\n\tuint8_t PROGRAM_STEREO         : 1;\n\tuint8_t PROGRAM_POLARITY       : 1;\n\tuint8_t RIGHT_EYE_POLARITY     : 1;\n\tuint8_t FRAME_PACKED           : 1;\n\tuint8_t DISABLE_STEREO_DP_SYNC : 1;\n};\n\nenum crc_selection {\n\t \n\tUNION_WINDOW_A_B = 0,\n\tUNION_WINDOW_A_NOT_B,\n\tUNION_WINDOW_NOT_A_B,\n\tUNION_WINDOW_NOT_A_NOT_B,\n\tINTERSECT_WINDOW_A_B,\n\tINTERSECT_WINDOW_A_NOT_B,\n\tINTERSECT_WINDOW_NOT_A_B,\n\tINTERSECT_WINDOW_NOT_A_NOT_B,\n};\n\nenum otg_out_mux_dest {\n\tOUT_MUX_DIO = 0,\n\tOUT_MUX_HPO_DP = 2,\n};\n\nenum h_timing_div_mode {\n\tH_TIMING_NO_DIV,\n\tH_TIMING_DIV_BY2,\n\tH_TIMING_RESERVED,\n\tH_TIMING_DIV_BY4,\n};\n\nenum timing_synchronization_type {\n\tNOT_SYNCHRONIZABLE,\n\tTIMING_SYNCHRONIZABLE,\n\tVBLANK_SYNCHRONIZABLE\n};\n\nstruct crc_params {\n\t \n\tuint16_t windowa_x_start;\n\tuint16_t windowa_x_end;\n\tuint16_t windowa_y_start;\n\tuint16_t windowa_y_end;\n\n\tuint16_t windowb_x_start;\n\tuint16_t windowb_x_end;\n\tuint16_t windowb_y_start;\n\tuint16_t windowb_y_end;\n\n\tenum crc_selection selection;\n\n\tuint8_t dsc_mode;\n\tuint8_t odm_mode;\n\n\tbool continuous_mode;\n\tbool enable;\n};\n\n \nstruct timing_generator {\n\t \n\tconst struct timing_generator_funcs *funcs;\n\tstruct dc_bios *bp;\n\tstruct dc_context *ctx;\n\tint inst;\n};\n\nstruct dc_crtc_timing;\n\nstruct drr_params;\n\n \nstruct timing_generator_funcs {\n\tbool (*validate_timing)(struct timing_generator *tg,\n\t\t\t\t\t\t\tconst struct dc_crtc_timing *timing);\n\tvoid (*program_timing)(struct timing_generator *tg,\n\t\t\t\t\t\t\tconst struct dc_crtc_timing *timing,\n\t\t\t\t\t\t\tint vready_offset,\n\t\t\t\t\t\t\tint vstartup_start,\n\t\t\t\t\t\t\tint vupdate_offset,\n\t\t\t\t\t\t\tint vupdate_width,\n\t\t\t\t\t\t\tconst enum signal_type signal,\n\t\t\t\t\t\t\tbool use_vbios\n\t);\n\tvoid (*setup_vertical_interrupt0)(\n\t\t\tstruct timing_generator *optc,\n\t\t\tuint32_t start_line,\n\t\t\tuint32_t end_line);\n\tvoid (*setup_vertical_interrupt1)(\n\t\t\tstruct timing_generator *optc,\n\t\t\tuint32_t start_line);\n\tvoid (*setup_vertical_interrupt2)(\n\t\t\tstruct timing_generator *optc,\n\t\t\tuint32_t start_line);\n\n\tbool (*enable_crtc)(struct timing_generator *tg);\n\tbool (*disable_crtc)(struct timing_generator *tg);\n#ifdef CONFIG_DRM_AMD_DC_FP\n\tvoid (*phantom_crtc_post_enable)(struct timing_generator *tg);\n#endif\n\tvoid (*disable_phantom_crtc)(struct timing_generator *tg);\n\tbool (*immediate_disable_crtc)(struct timing_generator *tg);\n\tbool (*is_counter_moving)(struct timing_generator *tg);\n\tvoid (*get_position)(struct timing_generator *tg,\n\t\t\t\tstruct crtc_position *position);\n\n\tuint32_t (*get_frame_count)(struct timing_generator *tg);\n\tvoid (*get_scanoutpos)(\n\t\tstruct timing_generator *tg,\n\t\tuint32_t *v_blank_start,\n\t\tuint32_t *v_blank_end,\n\t\tuint32_t *h_position,\n\t\tuint32_t *v_position);\n\tbool (*get_otg_active_size)(struct timing_generator *optc,\n\t\t\tuint32_t *otg_active_width,\n\t\t\tuint32_t *otg_active_height);\n\tbool (*is_matching_timing)(struct timing_generator *tg,\n\t\t\tconst struct dc_crtc_timing *otg_timing);\n\tvoid (*set_early_control)(struct timing_generator *tg,\n\t\t\t\t\t\t\t   uint32_t early_cntl);\n\tvoid (*wait_for_state)(struct timing_generator *tg,\n\t\t\t\t\t\t\tenum crtc_state state);\n\tvoid (*set_blank)(struct timing_generator *tg,\n\t\t\t\t\tbool enable_blanking);\n\tbool (*is_blanked)(struct timing_generator *tg);\n\tvoid (*set_overscan_blank_color) (struct timing_generator *tg, const struct tg_color *color);\n\tvoid (*set_blank_color)(struct timing_generator *tg, const struct tg_color *color);\n\tvoid (*set_colors)(struct timing_generator *tg,\n\t\t\t\t\t\tconst struct tg_color *blank_color,\n\t\t\t\t\t\tconst struct tg_color *overscan_color);\n\n\tvoid (*disable_vga)(struct timing_generator *tg);\n\tbool (*did_triggered_reset_occur)(struct timing_generator *tg);\n\tvoid (*setup_global_swap_lock)(struct timing_generator *tg,\n\t\t\t\t\t\t\tconst struct dcp_gsl_params *gsl_params);\n\tvoid (*unlock)(struct timing_generator *tg);\n\tvoid (*lock)(struct timing_generator *tg);\n\tvoid (*lock_doublebuffer_disable)(struct timing_generator *tg);\n\tvoid (*lock_doublebuffer_enable)(struct timing_generator *tg);\n\tvoid(*triplebuffer_unlock)(struct timing_generator *tg);\n\tvoid(*triplebuffer_lock)(struct timing_generator *tg);\n\tvoid (*enable_reset_trigger)(struct timing_generator *tg,\n\t\t\t\t     int source_tg_inst);\n\tvoid (*enable_crtc_reset)(struct timing_generator *tg,\n\t\t\t\t  int source_tg_inst,\n\t\t\t\t  struct crtc_trigger_info *crtc_tp);\n\tvoid (*disable_reset_trigger)(struct timing_generator *tg);\n\tvoid (*tear_down_global_swap_lock)(struct timing_generator *tg);\n\tvoid (*enable_advanced_request)(struct timing_generator *tg,\n\t\t\t\t\tbool enable, const struct dc_crtc_timing *timing);\n\tvoid (*set_drr)(struct timing_generator *tg, const struct drr_params *params);\n\tvoid (*set_vtotal_min_max)(struct timing_generator *optc, int vtotal_min, int vtotal_max);\n\tvoid (*get_last_used_drr_vtotal)(struct timing_generator *optc, uint32_t *refresh_rate);\n\tvoid (*set_static_screen_control)(struct timing_generator *tg,\n\t\t\t\t\t\tuint32_t event_triggers,\n\t\t\t\t\t\tuint32_t num_frames);\n\tvoid (*set_test_pattern)(\n\t\tstruct timing_generator *tg,\n\t\tenum controller_dp_test_pattern test_pattern,\n\t\tenum dc_color_depth color_depth);\n\n\tbool (*arm_vert_intr)(struct timing_generator *tg, uint8_t width);\n\n\tvoid (*program_global_sync)(struct timing_generator *tg,\n\t\t\tint vready_offset,\n\t\t\tint vstartup_start,\n\t\t\tint vupdate_offset,\n\t\t\tint vupdate_width);\n\tvoid (*enable_optc_clock)(struct timing_generator *tg, bool enable);\n\tvoid (*program_stereo)(struct timing_generator *tg,\n\t\tconst struct dc_crtc_timing *timing, struct crtc_stereo_flags *flags);\n\tbool (*is_stereo_left_eye)(struct timing_generator *tg);\n\n\tvoid (*set_blank_data_double_buffer)(struct timing_generator *tg, bool enable);\n\n\tvoid (*tg_init)(struct timing_generator *tg);\n\tbool (*is_tg_enabled)(struct timing_generator *tg);\n\tbool (*is_optc_underflow_occurred)(struct timing_generator *tg);\n\tvoid (*clear_optc_underflow)(struct timing_generator *tg);\n\n\tvoid (*set_dwb_source)(struct timing_generator *optc,\n\t\tuint32_t dwb_pipe_inst);\n\n\tvoid (*get_optc_source)(struct timing_generator *optc,\n\t\t\tuint32_t *num_of_input_segments,\n\t\t\tuint32_t *seg0_src_sel,\n\t\t\tuint32_t *seg1_src_sel);\n\n\t \n\tbool (*configure_crc)(struct timing_generator *tg,\n\t\t\t       const struct crc_params *params);\n\n\t \n\tbool (*get_crc)(struct timing_generator *tg,\n\t\t\tuint32_t *r_cr, uint32_t *g_y, uint32_t *b_cb);\n\n\tvoid (*program_manual_trigger)(struct timing_generator *optc);\n\tvoid (*setup_manual_trigger)(struct timing_generator *optc);\n\tbool (*get_hw_timing)(struct timing_generator *optc,\n\t\t\tstruct dc_crtc_timing *hw_crtc_timing);\n\n\tvoid (*set_vtg_params)(struct timing_generator *optc,\n\t\t\tconst struct dc_crtc_timing *dc_crtc_timing, bool program_fp2);\n\n\tvoid (*set_dsc_config)(struct timing_generator *optc,\n\t\t\t       enum optc_dsc_mode dsc_mode,\n\t\t\t       uint32_t dsc_bytes_per_pixel,\n\t\t\t       uint32_t dsc_slice_width);\n\tvoid (*get_dsc_status)(struct timing_generator *optc,\n\t\t\t\t\tuint32_t *dsc_mode);\n\tvoid (*set_odm_bypass)(struct timing_generator *optc, const struct dc_crtc_timing *dc_crtc_timing);\n\n\t \n\tvoid (*set_odm_combine)(struct timing_generator *optc, int *opp_id, int opp_cnt,\n\t\t\tstruct dc_crtc_timing *timing);\n\tvoid (*set_h_timing_div_manual_mode)(struct timing_generator *optc, bool manual_mode);\n\tvoid (*set_gsl)(struct timing_generator *optc, const struct gsl_params *params);\n\tvoid (*set_gsl_source_select)(struct timing_generator *optc,\n\t\t\tint group_idx,\n\t\t\tuint32_t gsl_ready_signal);\n\tvoid (*set_out_mux)(struct timing_generator *tg, enum otg_out_mux_dest dest);\n\tvoid (*set_drr_trigger_window)(struct timing_generator *optc,\n\t\t\tuint32_t window_start, uint32_t window_end);\n\tvoid (*set_vtotal_change_limit)(struct timing_generator *optc,\n\t\t\tuint32_t limit);\n\tvoid (*align_vblanks)(struct timing_generator *master_optc,\n\t\t\tstruct timing_generator *slave_optc,\n\t\t\tuint32_t master_pixel_clock_100Hz,\n\t\t\tuint32_t slave_pixel_clock_100Hz,\n\t\t\tuint8_t master_clock_divider,\n\t\t\tuint8_t slave_clock_divider);\n\tbool (*validate_vmin_vmax)(struct timing_generator *optc,\n\t\t\tint vmin, int vmax);\n\tbool (*validate_vtotal_change_limit)(struct timing_generator *optc,\n\t\t\tuint32_t vtotal_change_limit);\n\n\tvoid (*init_odm)(struct timing_generator *tg);\n\tvoid (*wait_drr_doublebuffer_pending_clear)(struct timing_generator *tg);\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}