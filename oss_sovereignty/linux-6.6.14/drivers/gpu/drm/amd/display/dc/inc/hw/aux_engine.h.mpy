{
  "module_name": "aux_engine.h",
  "hash_id": "f065e2771c18d742902cc551d5e253338dff66ad90b70c668e8071a8b06ac33d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/hw/aux_engine.h",
  "human_readable_source": " \n\n#ifndef __DAL_AUX_ENGINE_H__\n#define __DAL_AUX_ENGINE_H__\n\n#include \"dc_ddc_types.h\"\n\nenum aux_return_code_type;\n\nenum i2caux_transaction_operation {\n\tI2CAUX_TRANSACTION_READ,\n\tI2CAUX_TRANSACTION_WRITE\n};\n\nenum i2caux_transaction_address_space {\n\tI2CAUX_TRANSACTION_ADDRESS_SPACE_I2C = 1,\n\tI2CAUX_TRANSACTION_ADDRESS_SPACE_DPCD\n};\n\nstruct i2caux_transaction_payload {\n\tenum i2caux_transaction_address_space address_space;\n\tuint32_t address;\n\tuint32_t length;\n\tuint8_t *data;\n};\n\nenum i2caux_transaction_status {\n\tI2CAUX_TRANSACTION_STATUS_UNKNOWN = (-1L),\n\tI2CAUX_TRANSACTION_STATUS_SUCCEEDED,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_CHANNEL_BUSY,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_TIMEOUT,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_PROTOCOL_ERROR,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_NACK,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_INCOMPLETE,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_OPERATION,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_INVALID_OPERATION,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_BUFFER_OVERFLOW,\n\tI2CAUX_TRANSACTION_STATUS_FAILED_HPD_DISCON\n};\n\nstruct i2caux_transaction_request {\n\tenum i2caux_transaction_operation operation;\n\tstruct i2caux_transaction_payload payload;\n\tenum i2caux_transaction_status status;\n};\n\nenum i2caux_engine_type {\n\tI2CAUX_ENGINE_TYPE_UNKNOWN = (-1L),\n\tI2CAUX_ENGINE_TYPE_AUX,\n\tI2CAUX_ENGINE_TYPE_I2C_DDC_HW,\n\tI2CAUX_ENGINE_TYPE_I2C_GENERIC_HW,\n\tI2CAUX_ENGINE_TYPE_I2C_SW\n};\n\nenum i2c_default_speed {\n\tI2CAUX_DEFAULT_I2C_HW_SPEED = 50,\n\tI2CAUX_DEFAULT_I2C_SW_SPEED = 50\n};\n\nunion aux_config {\n\tstruct {\n\t\tuint32_t ALLOW_AUX_WHEN_HPD_LOW:1;\n\t} bits;\n\tuint32_t raw;\n};\n\nstruct aux_engine {\n\tuint32_t inst;\n\tstruct ddc *ddc;\n\tstruct dc_context *ctx;\n\tconst struct aux_engine_funcs *funcs;\n\t \n\tuint32_t delay;\n\tuint32_t max_defer_write_retry;\n\tbool acquire_reset;\n};\n\nstruct read_command_context {\n\tuint8_t *buffer;\n\tuint32_t current_read_length;\n\tuint32_t offset;\n\tenum i2caux_transaction_status status;\n\n\tstruct aux_request_transaction_data request;\n\tstruct aux_reply_transaction_data reply;\n\n\tuint8_t returned_byte;\n\n\tuint32_t timed_out_retry_aux;\n\tuint32_t invalid_reply_retry_aux;\n\tuint32_t defer_retry_aux;\n\tuint32_t defer_retry_i2c;\n\tuint32_t invalid_reply_retry_aux_on_ack;\n\n\tbool transaction_complete;\n\tbool operation_succeeded;\n};\n\nstruct write_command_context {\n\tbool mot;\n\n\tuint8_t *buffer;\n\tuint32_t current_write_length;\n\tenum i2caux_transaction_status status;\n\n\tstruct aux_request_transaction_data request;\n\tstruct aux_reply_transaction_data reply;\n\n\tuint8_t returned_byte;\n\n\tuint32_t timed_out_retry_aux;\n\tuint32_t invalid_reply_retry_aux;\n\tuint32_t defer_retry_aux;\n\tuint32_t defer_retry_i2c;\n\tuint32_t max_defer_retry;\n\tuint32_t ack_m_retry;\n\n\tuint8_t reply_data[DEFAULT_AUX_MAX_DATA_SIZE];\n\n\tbool transaction_complete;\n\tbool operation_succeeded;\n};\n\n\nstruct aux_engine_funcs {\n\tbool (*configure_timeout)(\n\t\tstruct ddc_service *ddc,\n\t\tuint32_t timeout);\n\tvoid (*destroy)(\n\t\tstruct aux_engine **ptr);\n\tbool (*acquire_engine)(\n\t\tstruct aux_engine *engine);\n\tvoid (*configure)(\n\t\tstruct aux_engine *engine,\n\t\tunion aux_config cfg);\n\tvoid (*submit_channel_request)(\n\t\tstruct aux_engine *engine,\n\t\tstruct aux_request_transaction_data *request);\n\tvoid (*process_channel_reply)(\n\t\tstruct aux_engine *engine,\n\t\tstruct aux_reply_transaction_data *reply);\n\tint (*read_channel_reply)(\n\t\tstruct aux_engine *engine,\n\t\tuint32_t size,\n\t\tuint8_t *buffer,\n\t\tuint8_t *reply_result,\n\t\tuint32_t *sw_status);\n\tenum aux_return_code_type (*get_channel_status)(\n\t\tstruct aux_engine *engine,\n\t\tuint8_t *returned_bytes);\n\tbool (*is_engine_available)(struct aux_engine *engine);\n\tbool (*acquire)(\n\t\tstruct aux_engine *engine,\n\t\tstruct ddc *ddc);\n\tbool (*submit_request)(\n\t\tstruct aux_engine *engine,\n\t\tstruct i2caux_transaction_request *request,\n\t\tbool middle_of_transaction);\n\tvoid (*release_engine)(\n\t\tstruct aux_engine *engine);\n\tvoid (*destroy_engine)(\n\t\tstruct aux_engine **engine);\n};\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}