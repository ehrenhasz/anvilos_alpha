{
  "module_name": "dce_i2c_hw.h",
  "hash_id": "2bf4a1d30b948fd18ad9709ac119341c75f8e1f0a8731c43654b6a11174f2972",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dce/dce_i2c_hw.h",
  "human_readable_source": " \n\n#ifndef __DCE_I2C_HW_H__\n#define __DCE_I2C_HW_H__\n\nenum dc_i2c_status {\n\tDC_I2C_STATUS__DC_I2C_STATUS_IDLE,\n\tDC_I2C_STATUS__DC_I2C_STATUS_USED_BY_SW,\n\tDC_I2C_STATUS__DC_I2C_STATUS_USED_BY_HW,\n\tDC_I2C_REG_RW_CNTL_STATUS_DMCU_ONLY = 2,\n};\n\nenum dc_i2c_arbitration {\n\tDC_I2C_ARBITRATION__DC_I2C_SW_PRIORITY_NORMAL,\n\tDC_I2C_ARBITRATION__DC_I2C_SW_PRIORITY_HIGH\n};\n\nenum i2c_channel_operation_result {\n\tI2C_CHANNEL_OPERATION_SUCCEEDED,\n\tI2C_CHANNEL_OPERATION_FAILED,\n\tI2C_CHANNEL_OPERATION_NOT_GRANTED,\n\tI2C_CHANNEL_OPERATION_IS_BUSY,\n\tI2C_CHANNEL_OPERATION_NO_HANDLE_PROVIDED,\n\tI2C_CHANNEL_OPERATION_CHANNEL_IN_USE,\n\tI2C_CHANNEL_OPERATION_CHANNEL_CLIENT_MAX_ALLOWED,\n\tI2C_CHANNEL_OPERATION_ENGINE_BUSY,\n\tI2C_CHANNEL_OPERATION_TIMEOUT,\n\tI2C_CHANNEL_OPERATION_NO_RESPONSE,\n\tI2C_CHANNEL_OPERATION_HW_REQUEST_I2C_BUS,\n\tI2C_CHANNEL_OPERATION_WRONG_PARAMETER,\n\tI2C_CHANNEL_OPERATION_OUT_NB_OF_RETRIES,\n\tI2C_CHANNEL_OPERATION_NOT_STARTED\n};\n\n\nenum dce_i2c_transaction_action {\n\tDCE_I2C_TRANSACTION_ACTION_I2C_WRITE = 0x00,\n\tDCE_I2C_TRANSACTION_ACTION_I2C_READ = 0x10,\n\tDCE_I2C_TRANSACTION_ACTION_I2C_STATUS_REQUEST = 0x20,\n\n\tDCE_I2C_TRANSACTION_ACTION_I2C_WRITE_MOT = 0x40,\n\tDCE_I2C_TRANSACTION_ACTION_I2C_READ_MOT = 0x50,\n\tDCE_I2C_TRANSACTION_ACTION_I2C_STATUS_REQUEST_MOT = 0x60,\n\n\tDCE_I2C_TRANSACTION_ACTION_DP_WRITE = 0x80,\n\tDCE_I2C_TRANSACTION_ACTION_DP_READ = 0x90\n};\n\nenum {\n\tI2C_SETUP_TIME_LIMIT_DCE = 255,\n\tI2C_SETUP_TIME_LIMIT_DCN = 3,\n\tI2C_HW_BUFFER_SIZE_DCE100 = 538,\n\tI2C_HW_BUFFER_SIZE_DCE = 144,\n\tI2C_SEND_RESET_LENGTH_9 = 9,\n\tI2C_SEND_RESET_LENGTH_10 = 10,\n\tDEFAULT_I2C_HW_SPEED = 50,\n\tDEFAULT_I2C_HW_SPEED_100KHZ = 100,\n\tTRANSACTION_TIMEOUT_IN_I2C_CLOCKS = 32,\n};\n\n#define I2C_HW_ENGINE_COMMON_REG_LIST(id)\\\n\tSRI(SETUP, DC_I2C_DDC, id),\\\n\tSRI(SPEED, DC_I2C_DDC, id),\\\n\tSRI(HW_STATUS, DC_I2C_DDC, id),\\\n\tSR(DC_I2C_ARBITRATION),\\\n\tSR(DC_I2C_CONTROL),\\\n\tSR(DC_I2C_SW_STATUS),\\\n\tSR(DC_I2C_TRANSACTION0),\\\n\tSR(DC_I2C_TRANSACTION1),\\\n\tSR(DC_I2C_TRANSACTION2),\\\n\tSR(DC_I2C_TRANSACTION3),\\\n\tSR(DC_I2C_DATA),\\\n\tSR(MICROSECOND_TIME_BASE_DIV)\n\n#define I2C_HW_ENGINE_COMMON_REG_LIST_DCN30(id)\\\n\tI2C_HW_ENGINE_COMMON_REG_LIST(id),\\\n\tSR(DIO_MEM_PWR_CTRL),\\\n\tSR(DIO_MEM_PWR_STATUS)\n\n#define I2C_SF(reg_name, field_name, post_fix)\\\n\t.field_name = reg_name ## __ ## field_name ## post_fix\n\n#define I2C_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh)\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_ENABLE, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_TIME_LIMIT, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_DATA_DRIVE_EN, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_CLK_DRIVE_EN, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_DATA_DRIVE_SEL, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_INTRA_TRANSACTION_DELAY, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_INTRA_BYTE_DELAY, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_HW_STATUS, DC_I2C_DDC1_HW_STATUS, mask_sh),\\\n\tI2C_SF(DC_I2C_ARBITRATION, DC_I2C_SW_USE_I2C_REG_REQ, mask_sh),\\\n\tI2C_SF(DC_I2C_ARBITRATION, DC_I2C_SW_DONE_USING_I2C_REG, mask_sh),\\\n\tI2C_SF(DC_I2C_ARBITRATION, DC_I2C_NO_QUEUED_SW_GO, mask_sh),\\\n\tI2C_SF(DC_I2C_ARBITRATION, DC_I2C_SW_PRIORITY, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_SOFT_RESET, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_SW_STATUS_RESET, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_GO, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_SEND_RESET, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_TRANSACTION_COUNT, mask_sh),\\\n\tI2C_SF(DC_I2C_CONTROL, DC_I2C_DDC_SELECT, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SPEED, DC_I2C_DDC1_PRESCALE, mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SPEED, DC_I2C_DDC1_THRESHOLD, mask_sh),\\\n\tI2C_SF(DC_I2C_SW_STATUS, DC_I2C_SW_STOPPED_ON_NACK, mask_sh),\\\n\tI2C_SF(DC_I2C_SW_STATUS, DC_I2C_SW_TIMEOUT, mask_sh),\\\n\tI2C_SF(DC_I2C_SW_STATUS, DC_I2C_SW_ABORTED, mask_sh),\\\n\tI2C_SF(DC_I2C_SW_STATUS, DC_I2C_SW_DONE, mask_sh),\\\n\tI2C_SF(DC_I2C_SW_STATUS, DC_I2C_SW_STATUS, mask_sh),\\\n\tI2C_SF(DC_I2C_TRANSACTION0, DC_I2C_STOP_ON_NACK0, mask_sh),\\\n\tI2C_SF(DC_I2C_TRANSACTION0, DC_I2C_START0, mask_sh),\\\n\tI2C_SF(DC_I2C_TRANSACTION0, DC_I2C_RW0, mask_sh),\\\n\tI2C_SF(DC_I2C_TRANSACTION0, DC_I2C_STOP0, mask_sh),\\\n\tI2C_SF(DC_I2C_TRANSACTION0, DC_I2C_COUNT0, mask_sh),\\\n\tI2C_SF(DC_I2C_DATA, DC_I2C_DATA_RW, mask_sh),\\\n\tI2C_SF(DC_I2C_DATA, DC_I2C_DATA, mask_sh),\\\n\tI2C_SF(DC_I2C_DATA, DC_I2C_INDEX, mask_sh),\\\n\tI2C_SF(DC_I2C_DATA, DC_I2C_INDEX_WRITE, mask_sh),\\\n\tI2C_SF(MICROSECOND_TIME_BASE_DIV, XTAL_REF_DIV, mask_sh),\\\n\tI2C_SF(MICROSECOND_TIME_BASE_DIV, MICROSECOND_TIME_BASE_DIV, mask_sh),\\\n\tI2C_SF(DC_I2C_ARBITRATION, DC_I2C_REG_RW_CNTL_STATUS, mask_sh)\n\n#define I2C_COMMON_MASK_SH_LIST_DCE110(mask_sh)\\\n\tI2C_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SPEED, DC_I2C_DDC1_START_STOP_TIMING_CNTL, mask_sh)\n\nstruct dce_i2c_shift {\n\tuint8_t DC_I2C_DDC1_ENABLE;\n\tuint8_t DC_I2C_DDC1_TIME_LIMIT;\n\tuint8_t DC_I2C_DDC1_DATA_DRIVE_EN;\n\tuint8_t DC_I2C_DDC1_CLK_DRIVE_EN;\n\tuint8_t DC_I2C_DDC1_DATA_DRIVE_SEL;\n\tuint8_t DC_I2C_DDC1_INTRA_TRANSACTION_DELAY;\n\tuint8_t DC_I2C_DDC1_INTRA_BYTE_DELAY;\n\tuint8_t DC_I2C_DDC1_HW_STATUS;\n\tuint8_t DC_I2C_SW_DONE_USING_I2C_REG;\n\tuint8_t DC_I2C_SW_USE_I2C_REG_REQ;\n\tuint8_t DC_I2C_NO_QUEUED_SW_GO;\n\tuint8_t DC_I2C_SW_PRIORITY;\n\tuint8_t DC_I2C_SOFT_RESET;\n\tuint8_t DC_I2C_SW_STATUS_RESET;\n\tuint8_t DC_I2C_GO;\n\tuint8_t DC_I2C_SEND_RESET;\n\tuint8_t DC_I2C_TRANSACTION_COUNT;\n\tuint8_t DC_I2C_DDC_SELECT;\n\tuint8_t DC_I2C_DDC1_PRESCALE;\n\tuint8_t DC_I2C_DDC1_THRESHOLD;\n\tuint8_t DC_I2C_DDC1_START_STOP_TIMING_CNTL;\n\tuint8_t DC_I2C_SW_STOPPED_ON_NACK;\n\tuint8_t DC_I2C_SW_TIMEOUT;\n\tuint8_t DC_I2C_SW_ABORTED;\n\tuint8_t DC_I2C_SW_DONE;\n\tuint8_t DC_I2C_SW_STATUS;\n\tuint8_t DC_I2C_STOP_ON_NACK0;\n\tuint8_t DC_I2C_START0;\n\tuint8_t DC_I2C_RW0;\n\tuint8_t DC_I2C_STOP0;\n\tuint8_t DC_I2C_COUNT0;\n\tuint8_t DC_I2C_DATA_RW;\n\tuint8_t DC_I2C_DATA;\n\tuint8_t DC_I2C_INDEX;\n\tuint8_t DC_I2C_INDEX_WRITE;\n\tuint8_t XTAL_REF_DIV;\n\tuint8_t MICROSECOND_TIME_BASE_DIV;\n\tuint8_t DC_I2C_DDC1_SEND_RESET_LENGTH;\n\tuint8_t DC_I2C_REG_RW_CNTL_STATUS;\n\tuint8_t I2C_LIGHT_SLEEP_FORCE;\n\tuint8_t I2C_MEM_PWR_STATE;\n};\n\nstruct dce_i2c_mask {\n\tuint32_t DC_I2C_DDC1_ENABLE;\n\tuint32_t DC_I2C_DDC1_TIME_LIMIT;\n\tuint32_t DC_I2C_DDC1_DATA_DRIVE_EN;\n\tuint32_t DC_I2C_DDC1_CLK_DRIVE_EN;\n\tuint32_t DC_I2C_DDC1_DATA_DRIVE_SEL;\n\tuint32_t DC_I2C_DDC1_INTRA_TRANSACTION_DELAY;\n\tuint32_t DC_I2C_DDC1_INTRA_BYTE_DELAY;\n\tuint32_t DC_I2C_DDC1_HW_STATUS;\n\tuint32_t DC_I2C_SW_DONE_USING_I2C_REG;\n\tuint32_t DC_I2C_SW_USE_I2C_REG_REQ;\n\tuint32_t DC_I2C_NO_QUEUED_SW_GO;\n\tuint32_t DC_I2C_SW_PRIORITY;\n\tuint32_t DC_I2C_SOFT_RESET;\n\tuint32_t DC_I2C_SW_STATUS_RESET;\n\tuint32_t DC_I2C_GO;\n\tuint32_t DC_I2C_SEND_RESET;\n\tuint32_t DC_I2C_TRANSACTION_COUNT;\n\tuint32_t DC_I2C_DDC_SELECT;\n\tuint32_t DC_I2C_DDC1_PRESCALE;\n\tuint32_t DC_I2C_DDC1_THRESHOLD;\n\tuint32_t DC_I2C_DDC1_START_STOP_TIMING_CNTL;\n\tuint32_t DC_I2C_SW_STOPPED_ON_NACK;\n\tuint32_t DC_I2C_SW_TIMEOUT;\n\tuint32_t DC_I2C_SW_ABORTED;\n\tuint32_t DC_I2C_SW_DONE;\n\tuint32_t DC_I2C_SW_STATUS;\n\tuint32_t DC_I2C_STOP_ON_NACK0;\n\tuint32_t DC_I2C_START0;\n\tuint32_t DC_I2C_RW0;\n\tuint32_t DC_I2C_STOP0;\n\tuint32_t DC_I2C_COUNT0;\n\tuint32_t DC_I2C_DATA_RW;\n\tuint32_t DC_I2C_DATA;\n\tuint32_t DC_I2C_INDEX;\n\tuint32_t DC_I2C_INDEX_WRITE;\n\tuint32_t XTAL_REF_DIV;\n\tuint32_t MICROSECOND_TIME_BASE_DIV;\n\tuint32_t DC_I2C_DDC1_SEND_RESET_LENGTH;\n\tuint32_t DC_I2C_REG_RW_CNTL_STATUS;\n\tuint32_t I2C_LIGHT_SLEEP_FORCE;\n\tuint32_t I2C_MEM_PWR_STATE;\n};\n\n#define I2C_COMMON_MASK_SH_LIST_DCN2(mask_sh)\\\n\tI2C_COMMON_MASK_SH_LIST_DCE110(mask_sh),\\\n\tI2C_SF(DC_I2C_DDC1_SETUP, DC_I2C_DDC1_SEND_RESET_LENGTH, mask_sh)\n\n#define I2C_COMMON_MASK_SH_LIST_DCN30(mask_sh)\\\n\tI2C_COMMON_MASK_SH_LIST_DCN2(mask_sh),\\\n\tI2C_SF(DIO_MEM_PWR_CTRL, I2C_LIGHT_SLEEP_FORCE, mask_sh),\\\n\tI2C_SF(DIO_MEM_PWR_STATUS, I2C_MEM_PWR_STATE, mask_sh)\n\nstruct dce_i2c_registers {\n\tuint32_t SETUP;\n\tuint32_t SPEED;\n\tuint32_t HW_STATUS;\n\tuint32_t DC_I2C_ARBITRATION;\n\tuint32_t DC_I2C_CONTROL;\n\tuint32_t DC_I2C_SW_STATUS;\n\tuint32_t DC_I2C_TRANSACTION0;\n\tuint32_t DC_I2C_TRANSACTION1;\n\tuint32_t DC_I2C_TRANSACTION2;\n\tuint32_t DC_I2C_TRANSACTION3;\n\tuint32_t DC_I2C_DATA;\n\tuint32_t MICROSECOND_TIME_BASE_DIV;\n\tuint32_t DIO_MEM_PWR_CTRL;\n\tuint32_t DIO_MEM_PWR_STATUS;\n};\n\nenum dce_i2c_transaction_address_space {\n\tDCE_I2C_TRANSACTION_ADDRESS_SPACE_I2C = 1,\n\tDCE_I2C_TRANSACTION_ADDRESS_SPACE_DPCD\n};\n\nstruct i2c_request_transaction_data {\n\tenum dce_i2c_transaction_action action;\n\tenum i2c_channel_operation_result status;\n\tuint8_t address;\n\tuint32_t length;\n\tuint8_t *data;\n};\n\nstruct dce_i2c_hw {\n\tstruct ddc *ddc;\n\tuint32_t engine_keep_power_up_count;\n\tuint32_t transaction_count;\n\tuint32_t buffer_used_bytes;\n\tuint32_t buffer_used_write;\n\tuint32_t reference_frequency;\n\tuint32_t default_speed;\n\tuint32_t engine_id;\n\tuint32_t setup_limit;\n\tuint32_t send_reset_length;\n\tuint32_t buffer_size;\n\tstruct dc_context *ctx;\n\n\tconst struct dce_i2c_registers *regs;\n\tconst struct dce_i2c_shift *shifts;\n\tconst struct dce_i2c_mask *masks;\n};\n\nvoid dce_i2c_hw_construct(\n\tstruct dce_i2c_hw *dce_i2c_hw,\n\tstruct dc_context *ctx,\n\tuint32_t engine_id,\n\tconst struct dce_i2c_registers *regs,\n\tconst struct dce_i2c_shift *shifts,\n\tconst struct dce_i2c_mask *masks);\n\nvoid dce100_i2c_hw_construct(\n\tstruct dce_i2c_hw *dce_i2c_hw,\n\tstruct dc_context *ctx,\n\tuint32_t engine_id,\n\tconst struct dce_i2c_registers *regs,\n\tconst struct dce_i2c_shift *shifts,\n\tconst struct dce_i2c_mask *masks);\n\nvoid dce112_i2c_hw_construct(\n\tstruct dce_i2c_hw *dce_i2c_hw,\n\tstruct dc_context *ctx,\n\tuint32_t engine_id,\n\tconst struct dce_i2c_registers *regs,\n\tconst struct dce_i2c_shift *shifts,\n\tconst struct dce_i2c_mask *masks);\n\nvoid dcn1_i2c_hw_construct(\n\tstruct dce_i2c_hw *dce_i2c_hw,\n\tstruct dc_context *ctx,\n\tuint32_t engine_id,\n\tconst struct dce_i2c_registers *regs,\n\tconst struct dce_i2c_shift *shifts,\n\tconst struct dce_i2c_mask *masks);\n\nvoid dcn2_i2c_hw_construct(\n\tstruct dce_i2c_hw *dce_i2c_hw,\n\tstruct dc_context *ctx,\n\tuint32_t engine_id,\n\tconst struct dce_i2c_registers *regs,\n\tconst struct dce_i2c_shift *shifts,\n\tconst struct dce_i2c_mask *masks);\n\nbool dce_i2c_submit_command_hw(\n\tstruct resource_pool *pool,\n\tstruct ddc *ddc,\n\tstruct i2c_command *cmd,\n\tstruct dce_i2c_hw *dce_i2c_hw);\n\nstruct dce_i2c_hw *acquire_i2c_hw_engine(\n\tstruct resource_pool *pool,\n\tstruct ddc *ddc);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}