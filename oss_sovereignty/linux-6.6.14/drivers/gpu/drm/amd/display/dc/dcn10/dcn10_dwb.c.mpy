{
  "module_name": "dcn10_dwb.c",
  "hash_id": "a028003bb366709acb6c50424a454b61103d4f7f2e95ff7a260cd2b2f8d7022c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_dwb.c",
  "human_readable_source": " \n\n#include \"reg_helper.h\"\n#include \"resource.h\"\n#include \"dwb.h\"\n#include \"dcn10_dwb.h\"\n\n\n#define REG(reg)\\\n\tdwbc10->dwbc_regs->reg\n\n#define CTX \\\n\tdwbc10->base.ctx\n\n#undef FN\n#define FN(reg_name, field_name) \\\n\tdwbc10->dwbc_shift->field_name, dwbc10->dwbc_mask->field_name\n\n#define TO_DCN10_DWBC(dwbc_base) \\\n\tcontainer_of(dwbc_base, struct dcn10_dwbc, base)\n\nstatic bool dwb1_get_caps(struct dwbc *dwbc, struct dwb_caps *caps)\n{\n\tif (caps) {\n\t\tcaps->adapter_id = 0;\t \n\t\tcaps->hw_version = DCN_VERSION_1_0;\n\t\tcaps->num_pipes = 2;\n\t\tmemset(&caps->reserved, 0, sizeof(caps->reserved));\n\t\tmemset(&caps->reserved2, 0, sizeof(caps->reserved2));\n\t\tcaps->sw_version = dwb_ver_1_0;\n\t\tcaps->caps.support_dwb = true;\n\t\tcaps->caps.support_ogam = false;\n\t\tcaps->caps.support_wbscl = true;\n\t\tcaps->caps.support_ocsc = false;\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nstatic bool dwb1_enable(struct dwbc *dwbc, struct dc_dwb_params *params)\n{\n\tstruct dcn10_dwbc *dwbc10 = TO_DCN10_DWBC(dwbc);\n\n\t \n\tdwbc->funcs->disable(dwbc);\n\n\t \n\tREG_UPDATE_5(WB_EC_CONFIG, DISPCLK_R_WB_GATE_DIS, 1,\n\t\t DISPCLK_G_WB_GATE_DIS, 1, DISPCLK_G_WBSCL_GATE_DIS, 1,\n\t\t WB_LB_LS_DIS, 1, WB_LUT_LS_DIS, 1);\n\n\tREG_UPDATE(WB_ENABLE, WB_ENABLE, 1);\n\n\treturn true;\n}\n\nstatic bool dwb1_disable(struct dwbc *dwbc)\n{\n\tstruct dcn10_dwbc *dwbc10 = TO_DCN10_DWBC(dwbc);\n\n\t \n\tREG_UPDATE(CNV_MODE, CNV_FRAME_CAPTURE_EN, 0);\n\n\t \n\tREG_UPDATE(WB_ENABLE, WB_ENABLE, 0);\n\n\t \n\tREG_UPDATE(WB_SOFT_RESET, WB_SOFT_RESET, 1);\n\tREG_UPDATE(WB_SOFT_RESET, WB_SOFT_RESET, 0);\n\n\t \n\tREG_UPDATE_5(WB_EC_CONFIG, DISPCLK_R_WB_GATE_DIS, 0,\n\t\t DISPCLK_G_WB_GATE_DIS, 0, DISPCLK_G_WBSCL_GATE_DIS, 0,\n\t\t WB_LB_LS_DIS, 0, WB_LUT_LS_DIS, 0);\n\n\treturn true;\n}\n\nconst struct dwbc_funcs dcn10_dwbc_funcs = {\n\t.get_caps\t\t\t= dwb1_get_caps,\n\t.enable\t\t\t\t= dwb1_enable,\n\t.disable\t\t\t= dwb1_disable,\n\t.update\t\t\t\t= NULL,\n\t.set_stereo\t\t\t= NULL,\n\t.set_new_content\t\t= NULL,\n\t.set_warmup\t\t\t= NULL,\n\t.dwb_set_scaler\t\t\t= NULL,\n};\n\nvoid dcn10_dwbc_construct(struct dcn10_dwbc *dwbc10,\n\t\tstruct dc_context *ctx,\n\t\tconst struct dcn10_dwbc_registers *dwbc_regs,\n\t\tconst struct dcn10_dwbc_shift *dwbc_shift,\n\t\tconst struct dcn10_dwbc_mask *dwbc_mask,\n\t\tint inst)\n{\n\tdwbc10->base.ctx = ctx;\n\n\tdwbc10->base.inst = inst;\n\tdwbc10->base.funcs = &dcn10_dwbc_funcs;\n\n\tdwbc10->dwbc_regs = dwbc_regs;\n\tdwbc10->dwbc_shift = dwbc_shift;\n\tdwbc10->dwbc_mask = dwbc_mask;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}