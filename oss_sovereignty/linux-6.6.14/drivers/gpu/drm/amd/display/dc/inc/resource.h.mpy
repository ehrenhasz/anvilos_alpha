{
  "module_name": "resource.h",
  "hash_id": "9aa7bb69ead530ef4fbcaf793ae32a624f1741df44672f0d16179ace2a057252",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/resource.h",
  "human_readable_source": " \n\n#ifndef DRIVERS_GPU_DRM_AMD_DC_DEV_DC_INC_RESOURCE_H_\n#define DRIVERS_GPU_DRM_AMD_DC_DEV_DC_INC_RESOURCE_H_\n\n#include \"core_types.h\"\n#include \"core_status.h\"\n#include \"dal_asic_id.h\"\n#include \"dm_pp_smu.h\"\n\n#define MEMORY_TYPE_MULTIPLIER_CZ 4\n#define MEMORY_TYPE_HBM 2\n\n\n#define IS_PIPE_SYNCD_VALID(pipe) ((((pipe)->pipe_idx_syncd) & 0x80)?1:0)\n#define GET_PIPE_SYNCD_FROM_PIPE(pipe) ((pipe)->pipe_idx_syncd & 0x7F)\n#define SET_PIPE_SYNCD_TO_PIPE(pipe, pipe_syncd) ((pipe)->pipe_idx_syncd = (0x80 | pipe_syncd))\n\nenum dce_version resource_parse_asic_id(\n\t\tstruct hw_asic_id asic_id);\n\nstruct resource_caps {\n\tint num_timing_generator;\n\tint num_opp;\n\tint num_video_plane;\n\tint num_audio;\n\tint num_stream_encoder;\n\tint num_pll;\n\tint num_dwb;\n\tint num_ddc;\n\tint num_vmid;\n\tint num_dsc;\n\tunsigned int num_dig_link_enc; \n\tunsigned int num_usb4_dpia; \n\tint num_hpo_dp_stream_encoder;\n\tint num_hpo_dp_link_encoder;\n\tint num_mpc_3dlut;\n};\n\nstruct resource_straps {\n\tuint32_t hdmi_disable;\n\tuint32_t dc_pinstraps_audio;\n\tuint32_t audio_stream_number;\n};\n\nstruct resource_create_funcs {\n\tvoid (*read_dce_straps)(\n\t\t\tstruct dc_context *ctx, struct resource_straps *straps);\n\n\tstruct audio *(*create_audio)(\n\t\t\tstruct dc_context *ctx, unsigned int inst);\n\n\tstruct stream_encoder *(*create_stream_encoder)(\n\t\t\tenum engine_id eng_id, struct dc_context *ctx);\n\n\tstruct hpo_dp_stream_encoder *(*create_hpo_dp_stream_encoder)(\n\t\t\tenum engine_id eng_id, struct dc_context *ctx);\n\n\tstruct hpo_dp_link_encoder *(*create_hpo_dp_link_encoder)(\n\t\t\tuint8_t inst,\n\t\t\tstruct dc_context *ctx);\n\n\tstruct dce_hwseq *(*create_hwseq)(\n\t\t\tstruct dc_context *ctx);\n};\n\nbool resource_construct(\n\tunsigned int num_virtual_links,\n\tstruct dc *dc,\n\tstruct resource_pool *pool,\n\tconst struct resource_create_funcs *create_funcs);\n\nstruct resource_pool *dc_create_resource_pool(struct dc  *dc,\n\t\t\t\t\t      const struct dc_init_data *init_data,\n\t\t\t\t\t      enum dce_version dc_version);\n\nvoid dc_destroy_resource_pool(struct dc *dc);\n\nenum dc_status resource_map_pool_resources(\n\t\tconst struct dc *dc,\n\t\tstruct dc_state *context,\n\t\tstruct dc_stream_state *stream);\n\nbool resource_build_scaling_params(struct pipe_ctx *pipe_ctx);\n\nenum dc_status resource_build_scaling_params_for_context(\n\t\tconst struct dc *dc,\n\t\tstruct dc_state *context);\n\nvoid resource_build_info_frame(struct pipe_ctx *pipe_ctx);\n\nvoid resource_unreference_clock_source(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tstruct clock_source *clock_source);\n\nvoid resource_reference_clock_source(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tstruct clock_source *clock_source);\n\nint resource_get_clock_source_reference(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tstruct clock_source *clock_source);\n\nbool resource_are_streams_timing_synchronizable(\n\t\tstruct dc_stream_state *stream1,\n\t\tstruct dc_stream_state *stream2);\n\nbool resource_are_vblanks_synchronizable(\n\t\tstruct dc_stream_state *stream1,\n\t\tstruct dc_stream_state *stream2);\n\nstruct clock_source *resource_find_used_clk_src_for_sharing(\n\t\tstruct resource_context *res_ctx,\n\t\tstruct pipe_ctx *pipe_ctx);\n\nstruct clock_source *dc_resource_find_first_free_pll(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool);\n\nbool resource_attach_surfaces_to_context(\n\t\tstruct dc_plane_state *const *plane_state,\n\t\tint surface_count,\n\t\tstruct dc_stream_state *dc_stream,\n\t\tstruct dc_state *context,\n\t\tconst struct resource_pool *pool);\n\n#define FREE_PIPE_INDEX_NOT_FOUND -1\n\n \nenum pipe_type {\n\t \n\tFREE_PIPE,\n\n\t \n\tOTG_MASTER,\n\n\t \n\tOPP_HEAD,\n\n\t \n\tDPP_PIPE,\n};\n\n \nbool resource_is_pipe_type(const struct pipe_ctx *pipe_ctx, enum pipe_type type);\n\n \nbool resource_is_for_mpcc_combine(const struct pipe_ctx *pipe_ctx);\n\n \nint resource_find_free_pipe_used_in_cur_mpc_blending_tree(\n\t\tconst struct resource_context *cur_res_ctx,\n\t\tstruct resource_context *new_res_ctx,\n\t\tconst struct pipe_ctx *cur_opp_head);\n\n \nint recource_find_free_pipe_not_used_in_cur_res_ctx(\n\t\tconst struct resource_context *cur_res_ctx,\n\t\tstruct resource_context *new_res_ctx,\n\t\tconst struct resource_pool *pool);\n\n \nint resource_find_free_pipe_used_as_cur_sec_dpp_in_mpcc_combine(\n\t\tconst struct resource_context *cur_res_ctx,\n\t\tstruct resource_context *new_res_ctx,\n\t\tconst struct resource_pool *pool);\n\n \nint resource_find_any_free_pipe(struct resource_context *new_res_ctx,\n\t\tconst struct resource_pool *pool);\n\n \nstruct pipe_ctx *resource_find_free_secondary_pipe_legacy(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tconst struct pipe_ctx *primary_pipe);\n\n \nint resource_get_num_mpc_splits(const struct pipe_ctx *pipe);\n\n \nint resource_get_num_odm_splits(const struct pipe_ctx *pipe);\n\n \nstruct pipe_ctx *resource_get_otg_master_for_stream(\n\t\tstruct resource_context *res_ctx,\n\t\tstruct dc_stream_state *stream);\n\n \nstruct pipe_ctx *resource_get_otg_master(const struct pipe_ctx *pipe_ctx);\n\n \nstruct pipe_ctx *resource_get_opp_head(const struct pipe_ctx *pipe_ctx);\n\n\nbool resource_validate_attach_surfaces(\n\t\tconst struct dc_validation_set set[],\n\t\tint set_count,\n\t\tconst struct dc_state *old_context,\n\t\tstruct dc_state *context,\n\t\tconst struct resource_pool *pool);\n\nenum dc_status resource_map_clock_resources(\n\t\tconst struct dc *dc,\n\t\tstruct dc_state *context,\n\t\tstruct dc_stream_state *stream);\n\nenum dc_status resource_map_phy_clock_resources(\n\t\tconst struct dc *dc,\n\t\tstruct dc_state *context,\n\t\tstruct dc_stream_state *stream);\n\nbool pipe_need_reprogram(\n\t\tstruct pipe_ctx *pipe_ctx_old,\n\t\tstruct pipe_ctx *pipe_ctx);\n\nvoid resource_build_bit_depth_reduction_params(struct dc_stream_state *stream,\n\t\tstruct bit_depth_reduction_params *fmt_bit_depth);\n\nvoid update_audio_usage(\n\t\tstruct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tstruct audio *audio,\n\t\tbool acquired);\n\nunsigned int resource_pixel_format_to_bpp(enum surface_pixel_format format);\n\nvoid get_audio_check(struct audio_info *aud_modes,\n\tstruct audio_check *aud_chk);\n\nbool get_temp_dp_link_res(struct dc_link *link,\n\t\tstruct link_resource *link_res,\n\t\tstruct dc_link_settings *link_settings);\n\n#if defined(CONFIG_DRM_AMD_DC_FP)\nstruct hpo_dp_link_encoder *resource_get_hpo_dp_link_enc_for_det_lt(\n\t\tconst struct resource_context *res_ctx,\n\t\tconst struct resource_pool *pool,\n\t\tconst struct dc_link *link);\n#endif\n\nvoid reset_syncd_pipes_from_disabled_pipes(struct dc *dc,\n\tstruct dc_state *context);\n\nvoid check_syncd_pipes_for_disabled_master_pipe(struct dc *dc,\n\tstruct dc_state *context,\n\tuint8_t disabled_master_pipe_idx);\n\nvoid reset_sync_context_for_pipe(const struct dc *dc,\n\tstruct dc_state *context,\n\tuint8_t pipe_idx);\n\nuint8_t resource_transmitter_to_phy_idx(const struct dc *dc, enum transmitter transmitter);\n\nconst struct link_hwss *get_link_hwss(const struct dc_link *link,\n\t\tconst struct link_resource *link_res);\n\nbool is_h_timing_divisible_by_2(struct dc_stream_state *stream);\n\nbool dc_resource_acquire_secondary_pipe_for_mpc_odm(\n\t\tconst struct dc *dc,\n\t\tstruct dc_state *state,\n\t\tstruct pipe_ctx *pri_pipe,\n\t\tstruct pipe_ctx *sec_pipe,\n\t\tbool odm);\n\n \nenum dc_status update_dp_encoder_resources_for_test_harness(const struct dc *dc,\n\t\tstruct dc_state *context,\n\t\tstruct pipe_ctx *pipe_ctx);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}