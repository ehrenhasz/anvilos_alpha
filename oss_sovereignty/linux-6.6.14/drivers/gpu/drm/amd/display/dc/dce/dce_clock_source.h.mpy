{
  "module_name": "dce_clock_source.h",
  "hash_id": "827884372e25c8240dfac38c3e37f94924883c2bf2a011daa022d005e2578c2c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dce/dce_clock_source.h",
  "human_readable_source": " \n\n#ifndef __DC_CLOCK_SOURCE_DCE_H__\n#define __DC_CLOCK_SOURCE_DCE_H__\n\n#include \"../inc/clock_source.h\"\n\n#define TO_DCE110_CLK_SRC(clk_src)\\\n\tcontainer_of(clk_src, struct dce110_clk_src, base)\n\n#define CS_COMMON_REG_LIST_DCE_100_110(id) \\\n\t\tSRI(RESYNC_CNTL, PIXCLK, id), \\\n\t\tSRI(PLL_CNTL, BPHYC_PLL, id)\n\n#define CS_COMMON_REG_LIST_DCE_80(id) \\\n\t\tSRI(RESYNC_CNTL, PIXCLK, id), \\\n\t\tSRI(PLL_CNTL, DCCG_PLL, id)\n\n#define CS_COMMON_REG_LIST_DCE_112(id) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, id)\n\n\n#define CS_SF(reg_name, field_name, post_fix)\\\n\t.field_name = reg_name ## __ ## field_name ## post_fix\n\n#define CS_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh)\\\n\tCS_SF(PLL_CNTL, PLL_REF_DIV_SRC, mask_sh),\\\n\tCS_SF(PIXCLK1_RESYNC_CNTL, DCCG_DEEP_COLOR_CNTL1, mask_sh),\\\n\tCS_SF(PLL_POST_DIV, PLL_POST_DIV_PIXCLK, mask_sh),\\\n\tCS_SF(PLL_REF_DIV, PLL_REF_DIV, mask_sh)\n\n#define CS_COMMON_MASK_SH_LIST_DCE_112(mask_sh)\\\n\tCS_SF(PHYPLLA_PIXCLK_RESYNC_CNTL, PHYPLLA_DCCG_DEEP_COLOR_CNTL, mask_sh),\\\n\tCS_SF(PHYPLLA_PIXCLK_RESYNC_CNTL, PHYPLLA_PIXCLK_DOUBLE_RATE_ENABLE, mask_sh)\n\n#define CS_COMMON_REG_LIST_DCN2_0(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(PHASE, DP_DTO, 4),\\\n\t\tSRII(PHASE, DP_DTO, 5),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 4),\\\n\t\tSRII(MODULO, DP_DTO, 5),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 4),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 5)\n\n#define CS_COMMON_REG_LIST_DCN201(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1)\n\n#define CS_COMMON_REG_LIST_DCN2_1(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3)\n\n#define CS_COMMON_REG_LIST_DCN3_0(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3)\n\n#define CS_COMMON_REG_LIST_DCN3_01(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3)\n\n#define CS_COMMON_REG_LIST_DCN3_02(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(PHASE, DP_DTO, 4),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 4),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 4)\n\n#define CS_COMMON_REG_LIST_DCN3_03(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1)\n\n#define CS_COMMON_MASK_SH_LIST_DCN2_0(mask_sh)\\\n\tCS_SF(DP_DTO0_PHASE, DP_DTO0_PHASE, mask_sh),\\\n\tCS_SF(DP_DTO0_MODULO, DP_DTO0_MODULO, mask_sh),\\\n\tCS_SF(PHYPLLA_PIXCLK_RESYNC_CNTL, PHYPLLA_DCCG_DEEP_COLOR_CNTL, mask_sh),\\\n\tCS_SF(OTG0_PIXEL_RATE_CNTL, DP_DTO0_ENABLE, mask_sh)\n\n#define CS_COMMON_MASK_SH_LIST_DCN3_1_4(mask_sh)\\\n\tCS_COMMON_MASK_SH_LIST_DCN2_0(mask_sh),\\\n\tCS_SF(OTG0_PIXEL_RATE_CNTL, PIPE0_DTO_SRC_SEL, mask_sh),\n\n#define CS_COMMON_MASK_SH_LIST_DCN3_2(mask_sh)\\\n\tCS_COMMON_MASK_SH_LIST_DCN2_0(mask_sh),\\\n\tCS_SF(OTG0_PIXEL_RATE_CNTL, PIPE0_DTO_SRC_SEL, mask_sh)\n\n#define CS_COMMON_REG_LIST_DCN1_0(index, pllid) \\\n\t\tSRI(PIXCLK_RESYNC_CNTL, PHYPLL, pllid),\\\n\t\tSRII(PHASE, DP_DTO, 0),\\\n\t\tSRII(PHASE, DP_DTO, 1),\\\n\t\tSRII(PHASE, DP_DTO, 2),\\\n\t\tSRII(PHASE, DP_DTO, 3),\\\n\t\tSRII(MODULO, DP_DTO, 0),\\\n\t\tSRII(MODULO, DP_DTO, 1),\\\n\t\tSRII(MODULO, DP_DTO, 2),\\\n\t\tSRII(MODULO, DP_DTO, 3),\\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 0), \\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 1), \\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 2), \\\n\t\tSRII(PIXEL_RATE_CNTL, OTG, 3)\n\n#define CS_COMMON_MASK_SH_LIST_DCN1_0(mask_sh)\\\n\tCS_SF(DP_DTO0_PHASE, DP_DTO0_PHASE, mask_sh),\\\n\tCS_SF(DP_DTO0_MODULO, DP_DTO0_MODULO, mask_sh),\\\n\tCS_SF(PHYPLLA_PIXCLK_RESYNC_CNTL, PHYPLLA_DCCG_DEEP_COLOR_CNTL, mask_sh),\\\n\tCS_SF(OTG0_PIXEL_RATE_CNTL, DP_DTO0_ENABLE, mask_sh)\n\n\n#define CS_REG_FIELD_LIST(type) \\\n\ttype PLL_REF_DIV_SRC; \\\n\ttype DCCG_DEEP_COLOR_CNTL1; \\\n\ttype PHYPLLA_DCCG_DEEP_COLOR_CNTL; \\\n\ttype PHYPLLA_PIXCLK_DOUBLE_RATE_ENABLE; \\\n\ttype PLL_POST_DIV_PIXCLK; \\\n\ttype PLL_REF_DIV; \\\n\ttype DP_DTO0_PHASE; \\\n\ttype DP_DTO0_MODULO; \\\n\ttype DP_DTO0_ENABLE;\n\n#define CS_REG_FIELD_LIST_DCN32(type) \\\n\ttype PIPE0_DTO_SRC_SEL;\n\nstruct dce110_clk_src_shift {\n\tCS_REG_FIELD_LIST(uint8_t)\n\tCS_REG_FIELD_LIST_DCN32(uint8_t)\n};\n\nstruct dce110_clk_src_mask{\n\tCS_REG_FIELD_LIST(uint32_t)\n\tCS_REG_FIELD_LIST_DCN32(uint32_t)\n};\n\nstruct dce110_clk_src_regs {\n\tuint32_t RESYNC_CNTL;\n\tuint32_t PIXCLK_RESYNC_CNTL;\n\tuint32_t PLL_CNTL;\n\n\t \n\tuint32_t PHASE[MAX_PIPES];\n\tuint32_t MODULO[MAX_PIPES];\n\tuint32_t PIXEL_RATE_CNTL[MAX_PIPES];\n};\n\nstruct dce110_clk_src {\n\tstruct clock_source base;\n\tconst struct dce110_clk_src_regs *regs;\n\tconst struct dce110_clk_src_mask *cs_mask;\n\tconst struct dce110_clk_src_shift *cs_shift;\n\tstruct dc_bios *bios;\n\n\tstruct spread_spectrum_data *dp_ss_params;\n\tuint32_t dp_ss_params_cnt;\n\tstruct spread_spectrum_data *hdmi_ss_params;\n\tuint32_t hdmi_ss_params_cnt;\n\tstruct spread_spectrum_data *dvi_ss_params;\n\tuint32_t dvi_ss_params_cnt;\n\tstruct spread_spectrum_data *lvds_ss_params;\n\tuint32_t lvds_ss_params_cnt;\n\n\tuint32_t ext_clk_khz;\n\tuint32_t ref_freq_khz;\n\n\tstruct calc_pll_clock_source calc_pll;\n\tstruct calc_pll_clock_source calc_pll_hdmi;\n};\n\nbool dce110_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\nbool dce112_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\nbool dcn20_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\nbool dcn3_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\nbool dcn301_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\nbool dcn31_clk_src_construct(\n\tstruct dce110_clk_src *clk_src,\n\tstruct dc_context *ctx,\n\tstruct dc_bios *bios,\n\tenum clock_source_id id,\n\tconst struct dce110_clk_src_regs *regs,\n\tconst struct dce110_clk_src_shift *cs_shift,\n\tconst struct dce110_clk_src_mask *cs_mask);\n\n \nstruct pixel_rate_range_table_entry {\n\tunsigned int range_min_khz;\n\tunsigned int range_max_khz;\n\tunsigned int target_pixel_rate_khz;\n\tunsigned short mult_factor;\n\tunsigned short div_factor;\n};\n\nextern const struct pixel_rate_range_table_entry video_optimized_pixel_rates[];\nconst struct pixel_rate_range_table_entry *look_up_in_video_optimized_rate_tlb(\n\t\tunsigned int pixel_rate_khz);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}