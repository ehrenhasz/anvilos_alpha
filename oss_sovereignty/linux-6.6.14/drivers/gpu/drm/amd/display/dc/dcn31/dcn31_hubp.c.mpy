{
  "module_name": "dcn31_hubp.c",
  "hash_id": "a193a759f4b9c705339c6a322015dcd7492487cc464b822e19d4cba0bffceb05",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dcn31/dcn31_hubp.c",
  "human_readable_source": " \n\n#include \"dm_services.h\"\n#include \"dce_calcs.h\"\n#include \"reg_helper.h\"\n#include \"basics/conversion.h\"\n#include \"dcn31_hubp.h\"\n\n#define REG(reg)\\\n\thubp2->hubp_regs->reg\n\n#define CTX \\\n\thubp2->base.ctx\n\n#undef FN\n#define FN(reg_name, field_name) \\\n\thubp2->hubp_shift->field_name, hubp2->hubp_mask->field_name\n\nvoid hubp31_set_unbounded_requesting(struct hubp *hubp, bool enable)\n{\n\tstruct dcn20_hubp *hubp2 = TO_DCN20_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_UNBOUNDED_REQ_MODE, enable);\n\tREG_UPDATE(CURSOR_CONTROL, CURSOR_REQ_MODE, enable);\n}\n\nvoid hubp31_soft_reset(struct hubp *hubp, bool reset)\n{\n\tstruct dcn20_hubp *hubp2 = TO_DCN20_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_SOFT_RESET, reset);\n}\n\nstatic void hubp31_program_extended_blank(struct hubp *hubp,\n\t\t\t\t\t  unsigned int min_dst_y_next_start_optimized)\n{\n\tstruct dcn20_hubp *hubp2 = TO_DCN20_HUBP(hubp);\n\n\tREG_UPDATE(BLANK_OFFSET_1, MIN_DST_Y_NEXT_START, min_dst_y_next_start_optimized);\n}\n\nstatic struct hubp_funcs dcn31_hubp_funcs = {\n\t.hubp_enable_tripleBuffer = hubp2_enable_triplebuffer,\n\t.hubp_is_triplebuffer_enabled = hubp2_is_triplebuffer_enabled,\n\t.hubp_program_surface_flip_and_addr = hubp3_program_surface_flip_and_addr,\n\t.hubp_program_surface_config = hubp3_program_surface_config,\n\t.hubp_is_flip_pending = hubp2_is_flip_pending,\n\t.hubp_setup = hubp3_setup,\n\t.hubp_setup_interdependent = hubp2_setup_interdependent,\n\t.hubp_set_vm_system_aperture_settings = hubp3_set_vm_system_aperture_settings,\n\t.set_blank = hubp2_set_blank,\n\t.dcc_control = hubp3_dcc_control,\n\t.mem_program_viewport = min_set_viewport,\n\t.set_cursor_attributes\t= hubp2_cursor_set_attributes,\n\t.set_cursor_position\t= hubp2_cursor_set_position,\n\t.hubp_clk_cntl = hubp2_clk_cntl,\n\t.hubp_vtg_sel = hubp2_vtg_sel,\n\t.dmdata_set_attributes = hubp3_dmdata_set_attributes,\n\t.dmdata_load = hubp2_dmdata_load,\n\t.dmdata_status_done = hubp2_dmdata_status_done,\n\t.hubp_read_state = hubp3_read_state,\n\t.hubp_clear_underflow = hubp2_clear_underflow,\n\t.hubp_set_flip_control_surface_gsl = hubp2_set_flip_control_surface_gsl,\n\t.hubp_init = hubp3_init,\n\t.set_unbounded_requesting = hubp31_set_unbounded_requesting,\n\t.hubp_soft_reset = hubp31_soft_reset,\n\t.hubp_set_flip_int = hubp1_set_flip_int,\n\t.hubp_in_blank = hubp1_in_blank,\n\t.program_extended_blank = hubp31_program_extended_blank,\n};\n\nbool hubp31_construct(\n\tstruct dcn20_hubp *hubp2,\n\tstruct dc_context *ctx,\n\tuint32_t inst,\n\tconst struct dcn_hubp2_registers *hubp_regs,\n\tconst struct dcn_hubp2_shift *hubp_shift,\n\tconst struct dcn_hubp2_mask *hubp_mask)\n{\n\thubp2->base.funcs = &dcn31_hubp_funcs;\n\thubp2->base.ctx = ctx;\n\thubp2->hubp_regs = hubp_regs;\n\thubp2->hubp_shift = hubp_shift;\n\thubp2->hubp_mask = hubp_mask;\n\thubp2->base.inst = inst;\n\thubp2->base.opp_id = OPP_ID_INVALID;\n\thubp2->base.mpcc_id = 0xf;\n\n\treturn true;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}