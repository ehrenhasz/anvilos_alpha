{
  "module_name": "dcn201_hubbub.c",
  "hash_id": "c2dcfd7c43d2f79165eac9bf29e034e3afe5c6bbd035367982b622964bbde70d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dcn201/dcn201_hubbub.c",
  "human_readable_source": " \n#include \"dm_services.h\"\n#include \"dcn20/dcn20_hubbub.h\"\n#include \"dcn201_hubbub.h\"\n#include \"reg_helper.h\"\n\n#define REG(reg)\\\n\thubbub1->regs->reg\n\n#define DC_LOGGER \\\n\thubbub1->base.ctx->logger\n\n#define CTX \\\n\thubbub1->base.ctx\n\n#undef FN\n#define FN(reg_name, field_name) \\\n\thubbub1->shifts->field_name, hubbub1->masks->field_name\n\n#define REG(reg)\\\n\thubbub1->regs->reg\n\n#define CTX \\\n\thubbub1->base.ctx\n\n#undef FN\n#define FN(reg_name, field_name) \\\n\thubbub1->shifts->field_name, hubbub1->masks->field_name\n\nstatic bool hubbub201_program_watermarks(\n\t\tstruct hubbub *hubbub,\n\t\tstruct dcn_watermark_set *watermarks,\n\t\tunsigned int refclk_mhz,\n\t\tbool safe_to_lower)\n{\n\tstruct dcn20_hubbub *hubbub1 = TO_DCN20_HUBBUB(hubbub);\n\tbool wm_pending = false;\n\n\tif (hubbub1_program_urgent_watermarks(hubbub, watermarks, refclk_mhz, safe_to_lower))\n\t\twm_pending = true;\n\n\tif (hubbub1_program_pstate_watermarks(hubbub, watermarks, refclk_mhz, safe_to_lower))\n\t\twm_pending = true;\n\n\tREG_SET(DCHUBBUB_ARB_SAT_LEVEL, 0,\n\t\t\tDCHUBBUB_ARB_SAT_LEVEL, 60 * refclk_mhz);\n\tREG_UPDATE(DCHUBBUB_ARB_DF_REQ_OUTSTAND,\n\t\t\tDCHUBBUB_ARB_MIN_REQ_OUTSTAND, 68);\n\n\thubbub1_allow_self_refresh_control(hubbub, !hubbub->ctx->dc->debug.disable_stutter);\n\n\treturn wm_pending;\n}\n\nstatic const struct hubbub_funcs hubbub201_funcs = {\n\t.update_dchub = hubbub2_update_dchub,\n\t.init_dchub_sys_ctx = NULL,\n\t.init_vm_ctx = NULL,\n\t.dcc_support_swizzle = hubbub2_dcc_support_swizzle,\n\t.dcc_support_pixel_format = hubbub2_dcc_support_pixel_format,\n\t.get_dcc_compression_cap = hubbub2_get_dcc_compression_cap,\n\t.wm_read_state = hubbub2_wm_read_state,\n\t.get_dchub_ref_freq = hubbub2_get_dchub_ref_freq,\n\t.program_watermarks = hubbub201_program_watermarks,\n\t.hubbub_read_state = hubbub2_read_state,\n};\n\nvoid hubbub201_construct(struct dcn20_hubbub *hubbub,\n\tstruct dc_context *ctx,\n\tconst struct dcn_hubbub_registers *hubbub_regs,\n\tconst struct dcn_hubbub_shift *hubbub_shift,\n\tconst struct dcn_hubbub_mask *hubbub_mask)\n{\n\thubbub->base.ctx = ctx;\n\n\thubbub->base.funcs = &hubbub201_funcs;\n\n\thubbub->regs = hubbub_regs;\n\thubbub->shifts = hubbub_shift;\n\thubbub->masks = hubbub_mask;\n\n\thubbub->debug_test_index_pstate = 0xB;\n\thubbub->detile_buf_size = 164 * 1024;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}