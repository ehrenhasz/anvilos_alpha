{
  "module_name": "link.h",
  "hash_id": "5bf9f2417d742200a21733e70045ceed85f5a5562f9370b9f8f80b0ae8cbf578",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/link.h",
  "human_readable_source": " \n\n#ifndef __DC_LINK_H__\n#define __DC_LINK_H__\n\n \n#include \"core_types.h\"\n\nstruct link_service *link_create_link_service(void);\nvoid link_destroy_link_service(struct link_service **link_srv);\n\nstruct link_init_data {\n\tconst struct dc *dc;\n\tstruct dc_context *ctx;  \n\tuint32_t connector_index;  \n\tuint32_t link_index;  \n\tbool is_dpia_link;\n};\n\nstruct ddc_service_init_data {\n\tstruct graphics_object_id id;\n\tstruct dc_context *ctx;\n\tstruct dc_link *link;\n\tbool is_dpia_link;\n};\n\nstruct link_service {\n\t \n\tstruct dc_link *(*create_link)(\n\t\t\tconst struct link_init_data *init_params);\n\tvoid (*destroy_link)(struct dc_link **link);\n\n\n\t \n\tbool (*detect_link)(struct dc_link *link, enum dc_detect_reason reason);\n\tbool (*detect_connection_type)(struct dc_link *link,\n\t\t\tenum dc_connection_type *type);\n\tstruct dc_sink *(*add_remote_sink)(\n\t\t\tstruct dc_link *link,\n\t\t\tconst uint8_t *edid,\n\t\t\tint len,\n\t\t\tstruct dc_sink_init_data *init_data);\n\tvoid (*remove_remote_sink)(struct dc_link *link, struct dc_sink *sink);\n\tbool (*get_hpd_state)(struct dc_link *link);\n\tstruct gpio *(*get_hpd_gpio)(struct dc_bios *dcb,\n\t\t\tstruct graphics_object_id link_id,\n\t\t\tstruct gpio_service *gpio_service);\n\tvoid (*enable_hpd)(const struct dc_link *link);\n\tvoid (*disable_hpd)(const struct dc_link *link);\n\tvoid (*enable_hpd_filter)(struct dc_link *link, bool enable);\n\tbool (*reset_cur_dp_mst_topology)(struct dc_link *link);\n\tconst struct dc_link_status *(*get_status)(const struct dc_link *link);\n\tbool (*is_hdcp1x_supported)(struct dc_link *link,\n\t\t\tenum signal_type signal);\n\tbool (*is_hdcp2x_supported)(struct dc_link *link,\n\t\t\tenum signal_type signal);\n\tvoid (*clear_dprx_states)(struct dc_link *link);\n\n\n\t \n\tvoid (*get_cur_res_map)(const struct dc *dc, uint32_t *map);\n\tvoid (*restore_res_map)(const struct dc *dc, uint32_t *map);\n\tvoid (*get_cur_link_res)(const struct dc_link *link,\n\t\t\tstruct link_resource *link_res);\n\n\n\t \n\tenum dc_status (*validate_mode_timing)(\n\t\t\tconst struct dc_stream_state *stream,\n\t\t\tstruct dc_link *link,\n\t\t\tconst struct dc_crtc_timing *timing);\n\tuint32_t (*dp_link_bandwidth_kbps)(\n\t\tconst struct dc_link *link,\n\t\tconst struct dc_link_settings *link_settings);\n\tbool (*validate_dpia_bandwidth)(\n\t\t\tconst struct dc_stream_state *stream,\n\t\t\tconst unsigned int num_streams);\n\n\n\t \n\tvoid (*set_dpms_on)(struct dc_state *state, struct pipe_ctx *pipe_ctx);\n\tvoid (*set_dpms_off)(struct pipe_ctx *pipe_ctx);\n\tvoid (*resume)(struct dc_link *link);\n\tvoid (*blank_all_dp_displays)(struct dc *dc);\n\tvoid (*blank_all_edp_displays)(struct dc *dc);\n\tvoid (*blank_dp_stream)(struct dc_link *link, bool hw_init);\n\tenum dc_status (*increase_mst_payload)(\n\t\t\tstruct pipe_ctx *pipe_ctx, uint32_t req_pbn);\n\tenum dc_status (*reduce_mst_payload)(\n\t\t\tstruct pipe_ctx *pipe_ctx, uint32_t req_pbn);\n\tvoid (*set_dsc_on_stream)(struct pipe_ctx *pipe_ctx, bool enable);\n\tbool (*set_dsc_enable)(struct pipe_ctx *pipe_ctx, bool enable);\n\tbool (*update_dsc_config)(struct pipe_ctx *pipe_ctx);\n\n\n\t \n\tstruct ddc_service *(*create_ddc_service)(\n\t\t\tstruct ddc_service_init_data *ddc_init_data);\n\tvoid (*destroy_ddc_service)(struct ddc_service **ddc);\n\tbool (*query_ddc_data)(\n\t\t\tstruct ddc_service *ddc,\n\t\t\tuint32_t address,\n\t\t\tuint8_t *write_buf,\n\t\t\tuint32_t write_size,\n\t\t\tuint8_t *read_buf,\n\t\t\tuint32_t read_size);\n\tint (*aux_transfer_raw)(struct ddc_service *ddc,\n\t\t\tstruct aux_payload *payload,\n\t\t\tenum aux_return_code_type *operation_result);\n\tbool (*configure_fixed_vs_pe_retimer)(\n\t\t\tstruct ddc_service *ddc,\n\t\t\tconst uint8_t *data,\n\t\t\tuint32_t len);\n\tbool (*aux_transfer_with_retries_no_mutex)(struct ddc_service *ddc,\n\t\t\tstruct aux_payload *payload);\n\tbool (*is_in_aux_transaction_mode)(struct ddc_service *ddc);\n\tuint32_t (*get_aux_defer_delay)(struct ddc_service *ddc);\n\n\n\t \n\tbool (*dp_is_sink_present)(struct dc_link *link);\n\tbool (*dp_is_fec_supported)(const struct dc_link *link);\n\tbool (*dp_is_128b_132b_signal)(struct pipe_ctx *pipe_ctx);\n\tbool (*dp_get_max_link_enc_cap)(const struct dc_link *link,\n\t\t\tstruct dc_link_settings *max_link_enc_cap);\n\tconst struct dc_link_settings *(*dp_get_verified_link_cap)(\n\t\t\tconst struct dc_link *link);\n\tenum dp_link_encoding (*dp_get_encoding_format)(\n\t\t\tconst struct dc_link_settings *link_settings);\n\tbool (*dp_should_enable_fec)(const struct dc_link *link);\n\tbool (*dp_decide_link_settings)(\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_link_settings *link_setting);\n\tenum dp_link_encoding (*mst_decide_link_encoding_format)(\n\t\t\tconst struct dc_link *link);\n\tbool (*edp_decide_link_settings)(struct dc_link *link,\n\t\t\tstruct dc_link_settings *link_setting, uint32_t req_bw);\n\tuint32_t (*bw_kbps_from_raw_frl_link_rate_data)(uint8_t bw);\n\tbool (*dp_overwrite_extended_receiver_cap)(struct dc_link *link);\n\tenum lttpr_mode (*dp_decide_lttpr_mode)(struct dc_link *link,\n\t\t\tstruct dc_link_settings *link_setting);\n\n\n\t \n\tint (*dpia_handle_usb4_bandwidth_allocation_for_link)(\n\t\t\tstruct dc_link *link, int peak_bw);\n\tvoid (*dpia_handle_bw_alloc_response)(\n\t\t\tstruct dc_link *link, uint8_t bw, uint8_t result);\n\tvoid (*dp_set_drive_settings)(\n\t\tstruct dc_link *link,\n\t\tconst struct link_resource *link_res,\n\t\tstruct link_training_settings *lt_settings);\n\tvoid (*dpcd_write_rx_power_ctrl)(struct dc_link *link, bool on);\n\n\n\t \n\tbool (*dp_parse_link_loss_status)(\n\t\tstruct dc_link *link,\n\t\tunion hpd_irq_data *hpd_irq_dpcd_data);\n\tbool (*dp_should_allow_hpd_rx_irq)(const struct dc_link *link);\n\tvoid (*dp_handle_link_loss)(struct dc_link *link);\n\tenum dc_status (*dp_read_hpd_rx_irq_data)(\n\t\tstruct dc_link *link,\n\t\tunion hpd_irq_data *irq_data);\n\tbool (*dp_handle_hpd_rx_irq)(struct dc_link *link,\n\t\t\tunion hpd_irq_data *out_hpd_irq_dpcd_data,\n\t\t\tbool *out_link_loss,\n\t\t\tbool defer_handling, bool *has_left_work);\n\n\n\t \n\tvoid (*edp_panel_backlight_power_on)(\n\t\t\tstruct dc_link *link, bool wait_for_hpd);\n\tint (*edp_get_backlight_level)(const struct dc_link *link);\n\tbool (*edp_get_backlight_level_nits)(struct dc_link *link,\n\t\t\tuint32_t *backlight_millinits_avg,\n\t\t\tuint32_t *backlight_millinits_peak);\n\tbool (*edp_set_backlight_level)(const struct dc_link *link,\n\t\t\tuint32_t backlight_pwm_u16_16,\n\t\t\tuint32_t frame_ramp);\n\tbool (*edp_set_backlight_level_nits)(struct dc_link *link,\n\t\t\tbool isHDR,\n\t\t\tuint32_t backlight_millinits,\n\t\t\tuint32_t transition_time_in_ms);\n\tint (*edp_get_target_backlight_pwm)(const struct dc_link *link);\n\tbool (*edp_get_psr_state)(\n\t\t\tconst struct dc_link *link, enum dc_psr_state *state);\n\tbool (*edp_set_psr_allow_active)(\n\t\t\tstruct dc_link *link,\n\t\t\tconst bool *allow_active,\n\t\t\tbool wait,\n\t\t\tbool force_static,\n\t\t\tconst unsigned int *power_opts);\n\tbool (*edp_setup_psr)(struct dc_link *link,\n\t\t\tconst struct dc_stream_state *stream,\n\t\t\tstruct psr_config *psr_config,\n\t\t\tstruct psr_context *psr_context);\n\tbool (*edp_set_sink_vtotal_in_psr_active)(\n\t\t\tconst struct dc_link *link,\n\t\t\tuint16_t psr_vtotal_idle,\n\t\t\tuint16_t psr_vtotal_su);\n\tvoid (*edp_get_psr_residency)(\n\t\t\tconst struct dc_link *link, uint32_t *residency);\n\n\tbool (*edp_get_replay_state)(\n\t\t\tconst struct dc_link *link, uint64_t *state);\n\tbool (*edp_set_replay_allow_active)(struct dc_link *dc_link,\n\t\t\tconst bool *enable, bool wait, bool force_static,\n\t\t\tconst unsigned int *power_opts);\n\tbool (*edp_setup_replay)(struct dc_link *link,\n\t\t\tconst struct dc_stream_state *stream);\n\tbool (*edp_set_coasting_vtotal)(\n\t\t\tstruct dc_link *link, uint16_t coasting_vtotal);\n\tbool (*edp_replay_residency)(const struct dc_link *link,\n\t\t\tunsigned int *residency, const bool is_start,\n\t\t\tconst bool is_alpm);\n\n\tbool (*edp_wait_for_t12)(struct dc_link *link);\n\tbool (*edp_is_ilr_optimization_required)(struct dc_link *link,\n\t\t\tstruct dc_crtc_timing *crtc_timing);\n\tbool (*edp_backlight_enable_aux)(struct dc_link *link, bool enable);\n\tvoid (*edp_add_delay_for_T9)(struct dc_link *link);\n\tbool (*edp_receiver_ready_T9)(struct dc_link *link);\n\tbool (*edp_receiver_ready_T7)(struct dc_link *link);\n\tbool (*edp_power_alpm_dpcd_enable)(struct dc_link *link, bool enable);\n\tvoid (*edp_set_panel_power)(struct dc_link *link, bool powerOn);\n\n\n\t \n\tvoid (*dp_handle_automated_test)(struct dc_link *link);\n\tbool (*dp_set_test_pattern)(\n\t\t\tstruct dc_link *link,\n\t\t\tenum dp_test_pattern test_pattern,\n\t\t\tenum dp_test_pattern_color_space test_pattern_color_space,\n\t\t\tconst struct link_training_settings *p_link_settings,\n\t\t\tconst unsigned char *p_custom_pattern,\n\t\t\tunsigned int cust_pattern_size);\n\tvoid (*dp_set_preferred_link_settings)(struct dc *dc,\n\t\t\tstruct dc_link_settings *link_setting,\n\t\t\tstruct dc_link *link);\n\tvoid (*dp_set_preferred_training_settings)(struct dc *dc,\n\t\t\tstruct dc_link_settings *link_setting,\n\t\t\tstruct dc_link_training_overrides *lt_overrides,\n\t\t\tstruct dc_link *link,\n\t\t\tbool skip_immediate_retrain);\n\n\n\t \n\tbool (*dp_trace_is_initialized)(struct dc_link *link);\n\tvoid (*dp_trace_set_is_logged_flag)(struct dc_link *link,\n\t\t\tbool in_detection,\n\t\t\tbool is_logged);\n\tbool (*dp_trace_is_logged)(struct dc_link *link, bool in_detection);\n\tunsigned long long (*dp_trace_get_lt_end_timestamp)(\n\t\t\tstruct dc_link *link, bool in_detection);\n\tconst struct dp_trace_lt_counts *(*dp_trace_get_lt_counts)(\n\t\t\tstruct dc_link *link, bool in_detection);\n\tunsigned int (*dp_trace_get_link_loss_count)(struct dc_link *link);\n\tvoid (*dp_trace_set_edp_power_timestamp)(struct dc_link *link,\n\t\t\tbool power_up);\n\tuint64_t (*dp_trace_get_edp_poweron_timestamp)(struct dc_link *link);\n\tuint64_t (*dp_trace_get_edp_poweroff_timestamp)(struct dc_link *link);\n\tvoid (*dp_trace_source_sequence)(\n\t\t\tstruct dc_link *link, uint8_t dp_test_mode);\n};\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}