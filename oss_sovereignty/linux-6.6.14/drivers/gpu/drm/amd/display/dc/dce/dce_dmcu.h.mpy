{
  "module_name": "dce_dmcu.h",
  "hash_id": "66f3b4c6c2d10268f4e1ab87ae34bf8aa1ead104ce841500c1cc30cf6937c586",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dce/dce_dmcu.h",
  "human_readable_source": " \n\n\n#ifndef _DCE_DMCU_H_\n#define _DCE_DMCU_H_\n\n#include \"dmcu.h\"\n\n#define DMCU_COMMON_REG_LIST_DCE_BASE() \\\n\tSR(DMCU_CTRL), \\\n\tSR(DMCU_STATUS), \\\n\tSR(DMCU_RAM_ACCESS_CTRL), \\\n\tSR(DMCU_IRAM_WR_CTRL), \\\n\tSR(DMCU_IRAM_WR_DATA), \\\n\tSR(MASTER_COMM_DATA_REG1), \\\n\tSR(MASTER_COMM_DATA_REG2), \\\n\tSR(MASTER_COMM_DATA_REG3), \\\n\tSR(MASTER_COMM_CMD_REG), \\\n\tSR(MASTER_COMM_CNTL_REG), \\\n\tSR(SLAVE_COMM_DATA_REG1), \\\n\tSR(SLAVE_COMM_DATA_REG2), \\\n\tSR(SLAVE_COMM_DATA_REG3), \\\n\tSR(SLAVE_COMM_CMD_REG), \\\n\tSR(DMCU_IRAM_RD_CTRL), \\\n\tSR(DMCU_IRAM_RD_DATA), \\\n\tSR(DMCU_INTERRUPT_TO_UC_EN_MASK), \\\n\tSR(SMU_INTERRUPT_CONTROL), \\\n\tSR(DC_DMCU_SCRATCH)\n\n#if defined(CONFIG_DRM_AMD_DC_SI)\n#define DMCU_DCE60_REG_LIST() \\\n\tSR(DMCU_CTRL), \\\n\tSR(DMCU_STATUS), \\\n\tSR(DMCU_RAM_ACCESS_CTRL), \\\n\tSR(DMCU_IRAM_WR_CTRL), \\\n\tSR(DMCU_IRAM_WR_DATA), \\\n\tSR(MASTER_COMM_DATA_REG1), \\\n\tSR(MASTER_COMM_DATA_REG2), \\\n\tSR(MASTER_COMM_DATA_REG3), \\\n\tSR(MASTER_COMM_CMD_REG), \\\n\tSR(MASTER_COMM_CNTL_REG), \\\n\tSR(DMCU_IRAM_RD_CTRL), \\\n\tSR(DMCU_IRAM_RD_DATA), \\\n\tSR(DMCU_INTERRUPT_TO_UC_EN_MASK), \\\n\tSR(DC_DMCU_SCRATCH)\n#endif\n\n#define DMCU_DCE80_REG_LIST() \\\n\tSR(DMCU_CTRL), \\\n\tSR(DMCU_STATUS), \\\n\tSR(DMCU_RAM_ACCESS_CTRL), \\\n\tSR(DMCU_IRAM_WR_CTRL), \\\n\tSR(DMCU_IRAM_WR_DATA), \\\n\tSR(MASTER_COMM_DATA_REG1), \\\n\tSR(MASTER_COMM_DATA_REG2), \\\n\tSR(MASTER_COMM_DATA_REG3), \\\n\tSR(MASTER_COMM_CMD_REG), \\\n\tSR(MASTER_COMM_CNTL_REG), \\\n\tSR(DMCU_IRAM_RD_CTRL), \\\n\tSR(DMCU_IRAM_RD_DATA), \\\n\tSR(DMCU_INTERRUPT_TO_UC_EN_MASK), \\\n\tSR(SMU_INTERRUPT_CONTROL), \\\n\tSR(DC_DMCU_SCRATCH)\n\n#define DMCU_DCE110_COMMON_REG_LIST() \\\n\tDMCU_COMMON_REG_LIST_DCE_BASE(), \\\n\tSR(DCI_MEM_PWR_STATUS)\n\n#define DMCU_DCN10_REG_LIST()\\\n\tDMCU_COMMON_REG_LIST_DCE_BASE(), \\\n\tSR(DMU_MEM_PWR_CNTL)\n\n#define DMCU_DCN20_REG_LIST()\\\n\tDMCU_DCN10_REG_LIST(), \\\n\tSR(DMCUB_SCRATCH15)\n\n#define DMCU_SF(reg_name, field_name, post_fix)\\\n\t.field_name = reg_name ## __ ## field_name ## post_fix\n\n#define DMCU_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh) \\\n\tDMCU_SF(DMCU_CTRL, \\\n\t\t\tDMCU_ENABLE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_STOP_MODE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_RESET, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_HOST_ACCESS_EN, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_WR_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_RD_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CMD_REG, \\\n\t\t\tMASTER_COMM_CMD_REG_BYTE0, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CNTL_REG, MASTER_COMM_INTERRUPT, mask_sh), \\\n\tDMCU_SF(SLAVE_COMM_CNTL_REG, SLAVE_COMM_INTERRUPT, mask_sh), \\\n\tDMCU_SF(DMCU_INTERRUPT_TO_UC_EN_MASK, \\\n\t\t\tSTATIC_SCREEN1_INT_TO_UC_EN, mask_sh), \\\n\tDMCU_SF(DMCU_INTERRUPT_TO_UC_EN_MASK, \\\n\t\t\tSTATIC_SCREEN2_INT_TO_UC_EN, mask_sh), \\\n\tDMCU_SF(DMCU_INTERRUPT_TO_UC_EN_MASK, \\\n\t\t\tSTATIC_SCREEN3_INT_TO_UC_EN, mask_sh), \\\n\tDMCU_SF(DMCU_INTERRUPT_TO_UC_EN_MASK, \\\n\t\t\tSTATIC_SCREEN4_INT_TO_UC_EN, mask_sh), \\\n\tDMCU_SF(SMU_INTERRUPT_CONTROL, DC_SMU_INT_ENABLE, mask_sh)\n\n#if defined(CONFIG_DRM_AMD_DC_SI)\n#define DMCU_MASK_SH_LIST_DCE60(mask_sh) \\\n\tDMCU_SF(DMCU_CTRL, \\\n\t\t\tDMCU_ENABLE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_STOP_MODE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_RESET, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_HOST_ACCESS_EN, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_WR_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_RD_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CMD_REG, \\\n\t\t\tMASTER_COMM_CMD_REG_BYTE0, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CNTL_REG, MASTER_COMM_INTERRUPT, mask_sh)\n#endif\n\n#define DMCU_MASK_SH_LIST_DCE80(mask_sh) \\\n\tDMCU_SF(DMCU_CTRL, \\\n\t\t\tDMCU_ENABLE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_STOP_MODE, mask_sh), \\\n\tDMCU_SF(DMCU_STATUS, \\\n\t\t\tUC_IN_RESET, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_HOST_ACCESS_EN, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_WR_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(DMCU_RAM_ACCESS_CTRL, \\\n\t\t\tIRAM_RD_ADDR_AUTO_INC, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CMD_REG, \\\n\t\t\tMASTER_COMM_CMD_REG_BYTE0, mask_sh), \\\n\tDMCU_SF(MASTER_COMM_CNTL_REG, MASTER_COMM_INTERRUPT, mask_sh), \\\n\tDMCU_SF(SMU_INTERRUPT_CONTROL, DC_SMU_INT_ENABLE, mask_sh)\n\n#define DMCU_MASK_SH_LIST_DCE110(mask_sh) \\\n\tDMCU_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh), \\\n\tDMCU_SF(DCI_MEM_PWR_STATUS, \\\n\t\tDMCU_IRAM_MEM_PWR_STATE, mask_sh)\n\n#define DMCU_MASK_SH_LIST_DCN10(mask_sh) \\\n\tDMCU_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh), \\\n\tDMCU_SF(DMU_MEM_PWR_CNTL, \\\n\t\t\tDMCU_IRAM_MEM_PWR_STATE, mask_sh)\n\n#define DMCU_REG_FIELD_LIST(type) \\\n\ttype DMCU_IRAM_MEM_PWR_STATE; \\\n\ttype IRAM_HOST_ACCESS_EN; \\\n\ttype IRAM_WR_ADDR_AUTO_INC; \\\n\ttype IRAM_RD_ADDR_AUTO_INC; \\\n\ttype DMCU_ENABLE; \\\n\ttype UC_IN_STOP_MODE; \\\n\ttype UC_IN_RESET; \\\n\ttype MASTER_COMM_CMD_REG_BYTE0; \\\n\ttype MASTER_COMM_INTERRUPT; \\\n\ttype SLAVE_COMM_INTERRUPT; \\\n\ttype DPHY_RX_FAST_TRAINING_CAPABLE; \\\n\ttype DPHY_LOAD_BS_COUNT; \\\n\ttype STATIC_SCREEN1_INT_TO_UC_EN; \\\n\ttype STATIC_SCREEN2_INT_TO_UC_EN; \\\n\ttype STATIC_SCREEN3_INT_TO_UC_EN; \\\n\ttype STATIC_SCREEN4_INT_TO_UC_EN; \\\n\ttype DP_SEC_GSP0_LINE_NUM; \\\n\ttype DP_SEC_GSP0_PRIORITY; \\\n\ttype DC_SMU_INT_ENABLE\n\nstruct dce_dmcu_shift {\n\tDMCU_REG_FIELD_LIST(uint8_t);\n};\n\nstruct dce_dmcu_mask {\n\tDMCU_REG_FIELD_LIST(uint32_t);\n};\n\nstruct dce_dmcu_registers {\n\tuint32_t DMCU_CTRL;\n\tuint32_t DMCU_STATUS;\n\tuint32_t DMCU_RAM_ACCESS_CTRL;\n\tuint32_t DCI_MEM_PWR_STATUS;\n\tuint32_t DMU_MEM_PWR_CNTL;\n\tuint32_t DMCU_IRAM_WR_CTRL;\n\tuint32_t DMCU_IRAM_WR_DATA;\n\n\tuint32_t MASTER_COMM_DATA_REG1;\n\tuint32_t MASTER_COMM_DATA_REG2;\n\tuint32_t MASTER_COMM_DATA_REG3;\n\tuint32_t MASTER_COMM_CMD_REG;\n\tuint32_t MASTER_COMM_CNTL_REG;\n\tuint32_t SLAVE_COMM_DATA_REG1;\n\tuint32_t SLAVE_COMM_DATA_REG2;\n\tuint32_t SLAVE_COMM_DATA_REG3;\n\tuint32_t SLAVE_COMM_CMD_REG;\n\tuint32_t SLAVE_COMM_CNTL_REG;\n\tuint32_t DMCU_IRAM_RD_CTRL;\n\tuint32_t DMCU_IRAM_RD_DATA;\n\tuint32_t DMCU_INTERRUPT_TO_UC_EN_MASK;\n\tuint32_t SMU_INTERRUPT_CONTROL;\n\tuint32_t DC_DMCU_SCRATCH;\n\tuint32_t DMCUB_SCRATCH15;\n};\n\nstruct dce_dmcu {\n\tstruct dmcu base;\n\tconst struct dce_dmcu_registers *regs;\n\tconst struct dce_dmcu_shift *dmcu_shift;\n\tconst struct dce_dmcu_mask *dmcu_mask;\n};\n\n \nunion dce_dmcu_psr_config_data_reg1 {\n\tstruct {\n\t\tunsigned int timehyst_frames:8;                   \n\t\tunsigned int hyst_lines:7;                        \n\t\tunsigned int rfb_update_auto_en:1;                \n\t\tunsigned int dp_port_num:3;                       \n\t\tunsigned int dcp_sel:3;                           \n\t\tunsigned int phy_type:1;                          \n\t\tunsigned int frame_cap_ind:1;                     \n\t\tunsigned int aux_chan:3;                          \n\t\tunsigned int aux_repeat:4;                        \n\t\tunsigned int allow_smu_optimizations:1;          \n\t} bits;\n\tunsigned int u32All;\n};\n\n \nunion dce_dmcu_psr_config_data_reg2 {\n\tstruct {\n\t\tunsigned int dig_fe:3;                   \n\t\tunsigned int dig_be:3;                   \n\t\tunsigned int skip_wait_for_pll_lock:1;   \n\t\tunsigned int reserved:9;                 \n\t\tunsigned int frame_delay:8;              \n\t\tunsigned int smu_phy_id:4;               \n\t\tunsigned int num_of_controllers:4;       \n\t} bits;\n\tunsigned int u32All;\n};\n\n \nunion dce_dmcu_psr_config_data_reg3 {\n\tstruct {\n\t\tunsigned int psr_level:16;       \n\t\tunsigned int link_rate:4;        \n\t\tunsigned int reserved:12;         \n\t} bits;\n\tunsigned int u32All;\n};\n\nunion dce_dmcu_psr_config_data_wait_loop_reg1 {\n\tstruct {\n\t\tunsigned int wait_loop:16;  \n\t\tunsigned int reserved:16;  \n\t} bits;\n\tunsigned int u32;\n};\n\nstruct dmcu *dce_dmcu_create(\n\tstruct dc_context *ctx,\n\tconst struct dce_dmcu_registers *regs,\n\tconst struct dce_dmcu_shift *dmcu_shift,\n\tconst struct dce_dmcu_mask *dmcu_mask);\n\nstruct dmcu *dcn10_dmcu_create(\n\tstruct dc_context *ctx,\n\tconst struct dce_dmcu_registers *regs,\n\tconst struct dce_dmcu_shift *dmcu_shift,\n\tconst struct dce_dmcu_mask *dmcu_mask);\n\nstruct dmcu *dcn20_dmcu_create(\n\tstruct dc_context *ctx,\n\tconst struct dce_dmcu_registers *regs,\n\tconst struct dce_dmcu_shift *dmcu_shift,\n\tconst struct dce_dmcu_mask *dmcu_mask);\n\nstruct dmcu *dcn21_dmcu_create(\n\tstruct dc_context *ctx,\n\tconst struct dce_dmcu_registers *regs,\n\tconst struct dce_dmcu_shift *dmcu_shift,\n\tconst struct dce_dmcu_mask *dmcu_mask);\n\nvoid dce_dmcu_destroy(struct dmcu **dmcu);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}