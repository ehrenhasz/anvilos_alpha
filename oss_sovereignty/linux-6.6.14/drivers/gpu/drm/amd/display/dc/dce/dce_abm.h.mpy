{
  "module_name": "dce_abm.h",
  "hash_id": "b32787797db04053bc562a078bb8d5403f9d77f31b0c29bd932a3b735804addf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dce/dce_abm.h",
  "human_readable_source": " \n\n\n#ifndef _DCE_ABM_H_\n#define _DCE_ABM_H_\n\n#include \"abm.h\"\n\n#define ABM_COMMON_REG_LIST_DCE_BASE() \\\n\tSR(MASTER_COMM_CNTL_REG), \\\n\tSR(MASTER_COMM_CMD_REG), \\\n\tSR(MASTER_COMM_DATA_REG1)\n\n#define ABM_DCE110_COMMON_REG_LIST() \\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSR(DC_ABM1_HG_SAMPLE_RATE), \\\n\tSR(DC_ABM1_LS_SAMPLE_RATE), \\\n\tSR(BL1_PWM_BL_UPDATE_SAMPLE_RATE), \\\n\tSR(DC_ABM1_HG_MISC_CTRL), \\\n\tSR(DC_ABM1_IPCSC_COEFF_SEL), \\\n\tSR(BL1_PWM_CURRENT_ABM_LEVEL), \\\n\tSR(BL1_PWM_TARGET_ABM_LEVEL), \\\n\tSR(BL1_PWM_USER_LEVEL), \\\n\tSR(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES), \\\n\tSR(DC_ABM1_HGLS_REG_READ_PROGRESS), \\\n\tSR(DC_ABM1_ACE_OFFSET_SLOPE_0), \\\n\tSR(DC_ABM1_ACE_THRES_12), \\\n\tSR(BIOS_SCRATCH_2)\n\n#define ABM_DCN10_REG_LIST(id)\\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSRI(DC_ABM1_HG_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_LS_SAMPLE_RATE, ABM, id), \\\n\tSRI(BL1_PWM_BL_UPDATE_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_HG_MISC_CTRL, ABM, id), \\\n\tSRI(DC_ABM1_IPCSC_COEFF_SEL, ABM, id), \\\n\tSRI(BL1_PWM_CURRENT_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_TARGET_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_USER_LEVEL, ABM, id), \\\n\tSRI(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, ABM, id), \\\n\tSRI(DC_ABM1_HGLS_REG_READ_PROGRESS, ABM, id), \\\n\tSRI(DC_ABM1_ACE_OFFSET_SLOPE_0, ABM, id), \\\n\tSRI(DC_ABM1_ACE_THRES_12, ABM, id), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_DCN20_REG_LIST() \\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSR(DC_ABM1_HG_SAMPLE_RATE), \\\n\tSR(DC_ABM1_LS_SAMPLE_RATE), \\\n\tSR(BL1_PWM_BL_UPDATE_SAMPLE_RATE), \\\n\tSR(DC_ABM1_HG_MISC_CTRL), \\\n\tSR(DC_ABM1_IPCSC_COEFF_SEL), \\\n\tSR(BL1_PWM_CURRENT_ABM_LEVEL), \\\n\tSR(BL1_PWM_TARGET_ABM_LEVEL), \\\n\tSR(BL1_PWM_USER_LEVEL), \\\n\tSR(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES), \\\n\tSR(DC_ABM1_HGLS_REG_READ_PROGRESS), \\\n\tSR(DC_ABM1_ACE_OFFSET_SLOPE_0), \\\n\tSR(DC_ABM1_ACE_THRES_12), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_DCN301_REG_LIST(id)\\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSRI(DC_ABM1_HG_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_LS_SAMPLE_RATE, ABM, id), \\\n\tSRI(BL1_PWM_BL_UPDATE_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_HG_MISC_CTRL, ABM, id), \\\n\tSRI(DC_ABM1_IPCSC_COEFF_SEL, ABM, id), \\\n\tSRI(BL1_PWM_CURRENT_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_TARGET_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_USER_LEVEL, ABM, id), \\\n\tSRI(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, ABM, id), \\\n\tSRI(DC_ABM1_HGLS_REG_READ_PROGRESS, ABM, id), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_DCN302_REG_LIST(id)\\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSRI(DC_ABM1_HG_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_LS_SAMPLE_RATE, ABM, id), \\\n\tSRI(BL1_PWM_BL_UPDATE_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_HG_MISC_CTRL, ABM, id), \\\n\tSRI(DC_ABM1_IPCSC_COEFF_SEL, ABM, id), \\\n\tSRI(BL1_PWM_CURRENT_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_TARGET_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_USER_LEVEL, ABM, id), \\\n\tSRI(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, ABM, id), \\\n\tSRI(DC_ABM1_HGLS_REG_READ_PROGRESS, ABM, id), \\\n\tSRI(DC_ABM1_ACE_OFFSET_SLOPE_0, ABM, id), \\\n\tSRI(DC_ABM1_ACE_THRES_12, ABM, id), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_DCN30_REG_LIST(id)\\\n\tABM_COMMON_REG_LIST_DCE_BASE(), \\\n\tSRI(DC_ABM1_HG_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_LS_SAMPLE_RATE, ABM, id), \\\n\tSRI(BL1_PWM_BL_UPDATE_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_HG_MISC_CTRL, ABM, id), \\\n\tSRI(DC_ABM1_IPCSC_COEFF_SEL, ABM, id), \\\n\tSRI(BL1_PWM_CURRENT_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_TARGET_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_USER_LEVEL, ABM, id), \\\n\tSRI(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, ABM, id), \\\n\tSRI(DC_ABM1_HGLS_REG_READ_PROGRESS, ABM, id), \\\n\tSRI(DC_ABM1_ACE_OFFSET_SLOPE_0, ABM, id), \\\n\tSRI(DC_ABM1_ACE_THRES_12, ABM, id), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_DCN32_REG_LIST(id)\\\n\tSRI(DC_ABM1_HG_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_LS_SAMPLE_RATE, ABM, id), \\\n\tSRI(BL1_PWM_BL_UPDATE_SAMPLE_RATE, ABM, id), \\\n\tSRI(DC_ABM1_HG_MISC_CTRL, ABM, id), \\\n\tSRI(DC_ABM1_IPCSC_COEFF_SEL, ABM, id), \\\n\tSRI(BL1_PWM_CURRENT_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_TARGET_ABM_LEVEL, ABM, id), \\\n\tSRI(BL1_PWM_USER_LEVEL, ABM, id), \\\n\tSRI(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, ABM, id), \\\n\tSRI(DC_ABM1_HGLS_REG_READ_PROGRESS, ABM, id), \\\n\tSRI(DC_ABM1_ACE_OFFSET_SLOPE_0, ABM, id), \\\n\tSRI(DC_ABM1_ACE_THRES_12, ABM, id), \\\n\tNBIO_SR(BIOS_SCRATCH_2)\n\n#define ABM_SF(reg_name, field_name, post_fix)\\\n\t.field_name = reg_name ## __ ## field_name ## post_fix\n\n#define ABM_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh) \\\n\tABM_SF(MASTER_COMM_CNTL_REG, MASTER_COMM_INTERRUPT, mask_sh), \\\n\tABM_SF(MASTER_COMM_CMD_REG, MASTER_COMM_CMD_REG_BYTE0, mask_sh), \\\n\tABM_SF(MASTER_COMM_CMD_REG, MASTER_COMM_CMD_REG_BYTE1, mask_sh), \\\n\tABM_SF(MASTER_COMM_CMD_REG, MASTER_COMM_CMD_REG_BYTE2, mask_sh)\n\n#define ABM_MASK_SH_LIST_DCE110(mask_sh) \\\n\tABM_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh), \\\n\tABM_SF(DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_NUM_OF_BINS_SEL, mask_sh), \\\n\tABM_SF(DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_VMAX_SEL, mask_sh), \\\n\tABM_SF(DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_BIN_BITWIDTH_SIZE_SEL, mask_sh), \\\n\tABM_SF(DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_R, mask_sh), \\\n\tABM_SF(DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_G, mask_sh), \\\n\tABM_SF(DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_B, mask_sh), \\\n\tABM_SF(BL1_PWM_CURRENT_ABM_LEVEL, \\\n\t\t\tBL1_PWM_CURRENT_ABM_LEVEL, mask_sh), \\\n\tABM_SF(BL1_PWM_TARGET_ABM_LEVEL, \\\n\t\t\tBL1_PWM_TARGET_ABM_LEVEL, mask_sh), \\\n\tABM_SF(BL1_PWM_USER_LEVEL, \\\n\t\t\tBL1_PWM_USER_LEVEL, mask_sh), \\\n\tABM_SF(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MIN_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MAX_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_HG_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_LS_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_BL_REG_READ_MISSED_FRAME_CLEAR, mask_sh)\n\n#define ABM_MASK_SH_LIST_DCN10(mask_sh) \\\n\tABM_COMMON_MASK_SH_LIST_DCE_COMMON_BASE(mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_NUM_OF_BINS_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_VMAX_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_BIN_BITWIDTH_SIZE_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_R, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_G, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_B, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_CURRENT_ABM_LEVEL, \\\n\t\t\tBL1_PWM_CURRENT_ABM_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_TARGET_ABM_LEVEL, \\\n\t\t\tBL1_PWM_TARGET_ABM_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_USER_LEVEL, \\\n\t\t\tBL1_PWM_USER_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MIN_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MAX_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_HG_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_LS_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_BL_REG_READ_MISSED_FRAME_CLEAR, mask_sh)\n\n#define ABM_MASK_SH_LIST_DCN20(mask_sh) ABM_MASK_SH_LIST_DCE110(mask_sh)\n\n#define ABM_MASK_SH_LIST_DCN30(mask_sh) ABM_MASK_SH_LIST_DCN10(mask_sh)\n\n#define ABM_MASK_SH_LIST_DCN32(mask_sh) \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_NUM_OF_BINS_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_VMAX_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HG_MISC_CTRL, \\\n\t\t\tABM1_HG_BIN_BITWIDTH_SIZE_SEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_R, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_G, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_IPCSC_COEFF_SEL, \\\n\t\t\tABM1_IPCSC_COEFF_SEL_B, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_CURRENT_ABM_LEVEL, \\\n\t\t\tBL1_PWM_CURRENT_ABM_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_TARGET_ABM_LEVEL, \\\n\t\t\tBL1_PWM_TARGET_ABM_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_BL1_PWM_USER_LEVEL, \\\n\t\t\tBL1_PWM_USER_LEVEL, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MIN_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES, \\\n\t\t\tABM1_LS_MAX_PIXEL_VALUE_THRES, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_HG_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_LS_REG_READ_MISSED_FRAME_CLEAR, mask_sh), \\\n\tABM_SF(ABM0_DC_ABM1_HGLS_REG_READ_PROGRESS, \\\n\t\t\tABM1_BL_REG_READ_MISSED_FRAME_CLEAR, mask_sh)\n\n#define ABM_REG_FIELD_LIST(type) \\\n\ttype ABM1_HG_NUM_OF_BINS_SEL; \\\n\ttype ABM1_HG_VMAX_SEL; \\\n\ttype ABM1_HG_BIN_BITWIDTH_SIZE_SEL; \\\n\ttype ABM1_IPCSC_COEFF_SEL_R; \\\n\ttype ABM1_IPCSC_COEFF_SEL_G; \\\n\ttype ABM1_IPCSC_COEFF_SEL_B; \\\n\ttype BL1_PWM_CURRENT_ABM_LEVEL; \\\n\ttype BL1_PWM_TARGET_ABM_LEVEL; \\\n\ttype BL1_PWM_USER_LEVEL; \\\n\ttype ABM1_LS_MIN_PIXEL_VALUE_THRES; \\\n\ttype ABM1_LS_MAX_PIXEL_VALUE_THRES; \\\n\ttype ABM1_HG_REG_READ_MISSED_FRAME_CLEAR; \\\n\ttype ABM1_LS_REG_READ_MISSED_FRAME_CLEAR; \\\n\ttype ABM1_BL_REG_READ_MISSED_FRAME_CLEAR; \\\n\ttype MASTER_COMM_INTERRUPT; \\\n\ttype MASTER_COMM_CMD_REG_BYTE0; \\\n\ttype MASTER_COMM_CMD_REG_BYTE1; \\\n\ttype MASTER_COMM_CMD_REG_BYTE2; \\\n\ttype ABM1_HG_BIN_33_40_SHIFT_INDEX; \\\n\ttype ABM1_HG_BIN_33_64_SHIFT_FLAG; \\\n\ttype ABM1_HG_BIN_41_48_SHIFT_INDEX; \\\n\ttype ABM1_HG_BIN_49_56_SHIFT_INDEX; \\\n\ttype ABM1_HG_BIN_57_64_SHIFT_INDEX; \\\n\ttype ABM1_HG_RESULT_DATA; \\\n\ttype ABM1_HG_RESULT_INDEX; \\\n\ttype ABM1_ACE_SLOPE_DATA; \\\n\ttype ABM1_ACE_OFFSET_DATA; \\\n\ttype ABM1_ACE_OFFSET_SLOPE_INDEX; \\\n\ttype ABM1_ACE_THRES_INDEX; \\\n\ttype ABM1_ACE_IGNORE_MASTER_LOCK_EN; \\\n\ttype ABM1_ACE_READBACK_DB_REG_VALUE_EN; \\\n\ttype ABM1_ACE_DBUF_REG_UPDATE_PENDING; \\\n\ttype ABM1_ACE_LOCK; \\\n\ttype ABM1_ACE_THRES_DATA_1; \\\n\ttype ABM1_ACE_THRES_DATA_2\n\nstruct dce_abm_shift {\n\tABM_REG_FIELD_LIST(uint8_t);\n};\n\nstruct dce_abm_mask {\n\tABM_REG_FIELD_LIST(uint32_t);\n};\n\nstruct dce_abm_registers {\n\tuint32_t DC_ABM1_HG_SAMPLE_RATE;\n\tuint32_t DC_ABM1_LS_SAMPLE_RATE;\n\tuint32_t BL1_PWM_BL_UPDATE_SAMPLE_RATE;\n\tuint32_t DC_ABM1_HG_MISC_CTRL;\n\tuint32_t DC_ABM1_IPCSC_COEFF_SEL;\n\tuint32_t BL1_PWM_CURRENT_ABM_LEVEL;\n\tuint32_t BL1_PWM_TARGET_ABM_LEVEL;\n\tuint32_t BL1_PWM_USER_LEVEL;\n\tuint32_t DC_ABM1_LS_MIN_MAX_PIXEL_VALUE_THRES;\n\tuint32_t DC_ABM1_HGLS_REG_READ_PROGRESS;\n\tuint32_t DC_ABM1_ACE_OFFSET_SLOPE_0;\n\tuint32_t DC_ABM1_ACE_OFFSET_SLOPE_DATA;\n\tuint32_t DC_ABM1_ACE_PWL_CNTL;\n\tuint32_t DC_ABM1_HG_BIN_33_40_SHIFT_INDEX;\n\tuint32_t DC_ABM1_HG_BIN_33_64_SHIFT_FLAG;\n\tuint32_t DC_ABM1_HG_BIN_41_48_SHIFT_INDEX;\n\tuint32_t DC_ABM1_HG_BIN_49_56_SHIFT_INDEX;\n\tuint32_t DC_ABM1_HG_BIN_57_64_SHIFT_INDEX;\n\tuint32_t DC_ABM1_HG_RESULT_DATA;\n\tuint32_t DC_ABM1_HG_RESULT_INDEX;\n\tuint32_t DC_ABM1_ACE_THRES_DATA;\n\tuint32_t DC_ABM1_ACE_THRES_12;\n\tuint32_t MASTER_COMM_CNTL_REG;\n\tuint32_t MASTER_COMM_CMD_REG;\n\tuint32_t MASTER_COMM_DATA_REG1;\n\tuint32_t BIOS_SCRATCH_2;\n};\n\nstruct dce_abm {\n\tstruct abm base;\n\tconst struct dce_abm_registers *regs;\n\tconst struct dce_abm_shift *abm_shift;\n\tconst struct dce_abm_mask *abm_mask;\n};\n\nstruct abm *dce_abm_create(\n\tstruct dc_context *ctx,\n\tconst struct dce_abm_registers *regs,\n\tconst struct dce_abm_shift *abm_shift,\n\tconst struct dce_abm_mask *abm_mask);\n\nvoid dce_abm_destroy(struct abm **abm);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}