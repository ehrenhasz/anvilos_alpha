{
  "module_name": "dce110_opp_csc_v.c",
  "hash_id": "619f4f3041258c406e6fa365e7c6faa6148d40dd6997b1a7ef8fee142fb3f1c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dce110/dce110_opp_csc_v.c",
  "human_readable_source": " \n\n#include \"dm_services.h\"\n#include \"dce110_transform_v.h\"\n#include \"basics/conversion.h\"\n\n \n#include \"dce/dce_11_0_d.h\"\n#include \"dce/dce_11_0_sh_mask.h\"\n#include \"dce/dce_11_0_enum.h\"\n\nenum {\n\tOUTPUT_CSC_MATRIX_SIZE = 12\n};\n\n \n#define UNDERLAY_CONTRAST_DEFAULT 100\n#define UNDERLAY_CONTRAST_MAX     200\n#define UNDERLAY_CONTRAST_MIN       0\n#define UNDERLAY_CONTRAST_STEP      1\n#define UNDERLAY_CONTRAST_DIVIDER 100\n\n \n#define UNDERLAY_SATURATION_DEFAULT   100  \n#define UNDERLAY_SATURATION_MIN         0\n#define UNDERLAY_SATURATION_MAX       200  \n#define UNDERLAY_SATURATION_STEP        1  \n \n\n \n#define  UNDERLAY_HUE_DEFAULT      0\n#define  UNDERLAY_HUE_MIN       -300\n#define  UNDERLAY_HUE_MAX        300\n#define  UNDERLAY_HUE_STEP         5\n#define  UNDERLAY_HUE_DIVIDER   10  \n#define UNDERLAY_SATURATION_DIVIDER   100\n\n \n#define  UNDERLAY_BRIGHTNESS_DEFAULT    0\n#define  UNDERLAY_BRIGHTNESS_MIN      -46  \n#define  UNDERLAY_BRIGHTNESS_MAX       46\n#define  UNDERLAY_BRIGHTNESS_STEP       1  \n#define  UNDERLAY_BRIGHTNESS_DIVIDER  100\n\nstatic const struct out_csc_color_matrix global_color_matrix[] = {\n{ COLOR_SPACE_SRGB,\n\t{ 0x2000, 0, 0, 0, 0, 0x2000, 0, 0, 0, 0, 0x2000, 0} },\n{ COLOR_SPACE_SRGB_LIMITED,\n\t{ 0x1B60, 0, 0, 0x200, 0, 0x1B60, 0, 0x200, 0, 0, 0x1B60, 0x200} },\n{ COLOR_SPACE_YCBCR601,\n\t{ 0xE00, 0xF447, 0xFDB9, 0x1000, 0x82F, 0x1012, 0x31F, 0x200, 0xFB47,\n\t\t0xF6B9, 0xE00, 0x1000} },\n{ COLOR_SPACE_YCBCR709, { 0xE00, 0xF349, 0xFEB7, 0x1000, 0x5D2, 0x1394, 0x1FA,\n\t0x200, 0xFCCB, 0xF535, 0xE00, 0x1000} },\n \n{ COLOR_SPACE_YCBCR601_LIMITED, { 0xE00, 0xF447, 0xFDB9, 0x1000, 0x991,\n\t0x12C9, 0x3A6, 0x200, 0xFB47, 0xF6B9, 0xE00, 0x1000} },\n{ COLOR_SPACE_YCBCR709_LIMITED, { 0xE00, 0xF349, 0xFEB7, 0x1000, 0x6CE, 0x16E3,\n\t0x24F, 0x200, 0xFCCB, 0xF535, 0xE00, 0x1000} }\n};\n\nenum csc_color_mode {\n\t \n\tCSC_COLOR_MODE_GRAPHICS_BYPASS,\n\t \n\tCSC_COLOR_MODE_GRAPHICS_PREDEFINED,\n\t \n\tCSC_COLOR_MODE_GRAPHICS_OUTPUT_CSC,\n};\n\nenum grph_color_adjust_option {\n\tGRPH_COLOR_MATRIX_HW_DEFAULT = 1,\n\tGRPH_COLOR_MATRIX_SW\n};\n\nstatic void program_color_matrix_v(\n\tstruct dce_transform *xfm_dce,\n\tconst struct out_csc_color_matrix *tbl_entry,\n\tenum grph_color_adjust_option options)\n{\n\tstruct dc_context *ctx = xfm_dce->base.ctx;\n\tuint32_t cntl_value = dm_read_reg(ctx, mmCOL_MAN_OUTPUT_CSC_CONTROL);\n\tbool use_set_a = (get_reg_field_value(cntl_value,\n\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\tOUTPUT_CSC_MODE) != 4);\n\n\tset_reg_field_value(\n\t\t\tcntl_value,\n\t\t0,\n\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\tOUTPUT_CSC_MODE);\n\n\tif (use_set_a) {\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C11_C12_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[0],\n\t\t\t\tOUTPUT_CSC_C11_C12_A,\n\t\t\t\tOUTPUT_CSC_C11_A);\n\n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[1],\n\t\t\t\tOUTPUT_CSC_C11_C12_A,\n\t\t\t\tOUTPUT_CSC_C12_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C13_C14_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[2],\n\t\t\t\tOUTPUT_CSC_C13_C14_A,\n\t\t\t\tOUTPUT_CSC_C13_A);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[3],\n\t\t\t\tOUTPUT_CSC_C13_C14_A,\n\t\t\t\tOUTPUT_CSC_C14_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C21_C22_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[4],\n\t\t\t\tOUTPUT_CSC_C21_C22_A,\n\t\t\t\tOUTPUT_CSC_C21_A);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[5],\n\t\t\t\tOUTPUT_CSC_C21_C22_A,\n\t\t\t\tOUTPUT_CSC_C22_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C23_C24_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[6],\n\t\t\t\tOUTPUT_CSC_C23_C24_A,\n\t\t\t\tOUTPUT_CSC_C23_A);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[7],\n\t\t\t\tOUTPUT_CSC_C23_C24_A,\n\t\t\t\tOUTPUT_CSC_C24_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C31_C32_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[8],\n\t\t\t\tOUTPUT_CSC_C31_C32_A,\n\t\t\t\tOUTPUT_CSC_C31_A);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[9],\n\t\t\t\tOUTPUT_CSC_C31_C32_A,\n\t\t\t\tOUTPUT_CSC_C32_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C33_C34_A;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[10],\n\t\t\t\tOUTPUT_CSC_C33_C34_A,\n\t\t\t\tOUTPUT_CSC_C33_A);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[11],\n\t\t\t\tOUTPUT_CSC_C33_C34_A,\n\t\t\t\tOUTPUT_CSC_C34_A);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\tset_reg_field_value(\n\t\t\tcntl_value,\n\t\t\t4,\n\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\tOUTPUT_CSC_MODE);\n\t} else {\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C11_C12_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[0],\n\t\t\t\tOUTPUT_CSC_C11_C12_B,\n\t\t\t\tOUTPUT_CSC_C11_B);\n\n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[1],\n\t\t\t\tOUTPUT_CSC_C11_C12_B,\n\t\t\t\tOUTPUT_CSC_C12_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C13_C14_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[2],\n\t\t\t\tOUTPUT_CSC_C13_C14_B,\n\t\t\t\tOUTPUT_CSC_C13_B);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[3],\n\t\t\t\tOUTPUT_CSC_C13_C14_B,\n\t\t\t\tOUTPUT_CSC_C14_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C21_C22_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[4],\n\t\t\t\tOUTPUT_CSC_C21_C22_B,\n\t\t\t\tOUTPUT_CSC_C21_B);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[5],\n\t\t\t\tOUTPUT_CSC_C21_C22_B,\n\t\t\t\tOUTPUT_CSC_C22_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C23_C24_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[6],\n\t\t\t\tOUTPUT_CSC_C23_C24_B,\n\t\t\t\tOUTPUT_CSC_C23_B);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[7],\n\t\t\t\tOUTPUT_CSC_C23_C24_B,\n\t\t\t\tOUTPUT_CSC_C24_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C31_C32_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[8],\n\t\t\t\tOUTPUT_CSC_C31_C32_B,\n\t\t\t\tOUTPUT_CSC_C31_B);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[9],\n\t\t\t\tOUTPUT_CSC_C31_C32_B,\n\t\t\t\tOUTPUT_CSC_C32_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\t{\n\t\t\tuint32_t value = 0;\n\t\t\tuint32_t addr = mmOUTPUT_CSC_C33_C34_B;\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[10],\n\t\t\t\tOUTPUT_CSC_C33_C34_B,\n\t\t\t\tOUTPUT_CSC_C33_B);\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\ttbl_entry->regval[11],\n\t\t\t\tOUTPUT_CSC_C33_C34_B,\n\t\t\t\tOUTPUT_CSC_C34_B);\n\n\t\t\tdm_write_reg(ctx, addr, value);\n\t\t}\n\t\tset_reg_field_value(\n\t\t\tcntl_value,\n\t\t\t5,\n\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\tOUTPUT_CSC_MODE);\n\t}\n\n\tdm_write_reg(ctx, mmCOL_MAN_OUTPUT_CSC_CONTROL, cntl_value);\n}\n\nstatic bool configure_graphics_mode_v(\n\tstruct dce_transform *xfm_dce,\n\tenum csc_color_mode config,\n\tenum graphics_csc_adjust_type csc_adjust_type,\n\tenum dc_color_space color_space)\n{\n\tstruct dc_context *ctx = xfm_dce->base.ctx;\n\tuint32_t addr = mmCOL_MAN_OUTPUT_CSC_CONTROL;\n\tuint32_t value = dm_read_reg(ctx, addr);\n\n\tset_reg_field_value(\n\t\tvalue,\n\t\t0,\n\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\tOUTPUT_CSC_MODE);\n\n\tif (csc_adjust_type == GRAPHICS_CSC_ADJUST_TYPE_SW) {\n\t\tif (config == CSC_COLOR_MODE_GRAPHICS_OUTPUT_CSC)\n\t\t\treturn true;\n\n\t\tswitch (color_space) {\n\t\tcase COLOR_SPACE_SRGB:\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t0,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tcase COLOR_SPACE_SRGB_LIMITED:\n\t\t\t \n\t\t\treturn false;\n\n\t\tcase COLOR_SPACE_YCBCR601_LIMITED:\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t2,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tcase COLOR_SPACE_YCBCR709:\n\t\tcase COLOR_SPACE_YCBCR709_LIMITED:\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t3,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t\t}\n\n\t} else if (csc_adjust_type == GRAPHICS_CSC_ADJUST_TYPE_HW) {\n\t\tswitch (color_space) {\n\t\tcase COLOR_SPACE_SRGB:\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t0,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tcase COLOR_SPACE_SRGB_LIMITED:\n\t\t\t \n\t\t\treturn false;\n\t\tcase COLOR_SPACE_YCBCR601:\n\t\tcase COLOR_SPACE_YCBCR601_LIMITED:\n\t\t\t \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t2,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tcase COLOR_SPACE_YCBCR709:\n\t\tcase COLOR_SPACE_YCBCR709_LIMITED:\n\t\t\t  \n\t\t\tset_reg_field_value(\n\t\t\t\tvalue,\n\t\t\t\t3,\n\t\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\t\tOUTPUT_CSC_MODE);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t\t}\n\n\t} else\n\t\t \n\t\tset_reg_field_value(\n\t\t\tvalue,\n\t\t\t0,\n\t\t\tCOL_MAN_OUTPUT_CSC_CONTROL,\n\t\t\tOUTPUT_CSC_MODE);\n\n\taddr = mmCOL_MAN_OUTPUT_CSC_CONTROL;\n\tdm_write_reg(ctx, addr, value);\n\n\treturn true;\n}\n\n \nstatic void set_Denormalization(struct transform *xfm,\n\t\tenum dc_color_depth color_depth)\n{\n\tuint32_t value = dm_read_reg(xfm->ctx, mmDENORM_CLAMP_CONTROL);\n\n\tswitch (color_depth) {\n\tcase COLOR_DEPTH_888:\n\t\t \n\t\tset_reg_field_value(\n\t\t\tvalue,\n\t\t\t1,\n\t\t\tDENORM_CLAMP_CONTROL,\n\t\t\tDENORM_MODE);\n\t\tbreak;\n\tcase COLOR_DEPTH_101010:\n\t\t \n\t\tset_reg_field_value(\n\t\t\tvalue,\n\t\t\t2,\n\t\t\tDENORM_CLAMP_CONTROL,\n\t\t\tDENORM_MODE);\n\t\tbreak;\n\tcase COLOR_DEPTH_121212:\n\t\t \n\t\tset_reg_field_value(\n\t\t\tvalue,\n\t\t\t3,\n\t\t\tDENORM_CLAMP_CONTROL,\n\t\t\tDENORM_MODE);\n\t\tbreak;\n\tdefault:\n\t\t \n\t\tbreak;\n\t}\n\n\tset_reg_field_value(\n\t\tvalue,\n\t\t1,\n\t\tDENORM_CLAMP_CONTROL,\n\t\tDENORM_10BIT_OUT);\n\n\tdm_write_reg(xfm->ctx, mmDENORM_CLAMP_CONTROL, value);\n}\n\nstruct input_csc_matrix {\n\tenum dc_color_space color_space;\n\tuint32_t regval[12];\n};\n\nstatic const struct input_csc_matrix input_csc_matrix[] = {\n\t{COLOR_SPACE_SRGB,\n \n\t\t{0x2000, 0, 0, 0, 0, 0x2000, 0, 0, 0, 0, 0x2000, 0} },\n\t{COLOR_SPACE_SRGB_LIMITED,\n\t\t{0x2000, 0, 0, 0, 0, 0x2000, 0, 0, 0, 0, 0x2000, 0} },\n\t{COLOR_SPACE_YCBCR601,\n\t\t{0x2cdd, 0x2000, 0x0, 0xe991, 0xe926, 0x2000, 0xf4fd, 0x10ef,\n\t\t\t\t\t\t0x0, 0x2000, 0x38b4, 0xe3a6} },\n\t{COLOR_SPACE_YCBCR601_LIMITED,\n\t\t{0x3353, 0x2568, 0x0, 0xe400, 0xe5dc, 0x2568, 0xf367, 0x1108,\n\t\t\t\t\t\t0x0, 0x2568, 0x40de, 0xdd3a} },\n\t{COLOR_SPACE_YCBCR709,\n\t\t{0x3265, 0x2000, 0, 0xe6ce, 0xf105, 0x2000, 0xfa01, 0xa7d, 0,\n\t\t\t\t\t\t0x2000, 0x3b61, 0xe24f} },\n\t{COLOR_SPACE_YCBCR709_LIMITED,\n\t\t{0x39a6, 0x2568, 0, 0xe0d6, 0xeedd, 0x2568, 0xf925, 0x9a8, 0,\n\t\t\t\t\t\t0x2568, 0x43ee, 0xdbb2} }\n};\n\nstatic void program_input_csc(\n\t\tstruct transform *xfm, enum dc_color_space color_space)\n{\n\tint arr_size = sizeof(input_csc_matrix)/sizeof(struct input_csc_matrix);\n\tstruct dc_context *ctx = xfm->ctx;\n\tconst uint32_t *regval = NULL;\n\tbool use_set_a;\n\tuint32_t value;\n\tint i;\n\n\tfor (i = 0; i < arr_size; i++)\n\t\tif (input_csc_matrix[i].color_space == color_space) {\n\t\t\tregval = input_csc_matrix[i].regval;\n\t\t\tbreak;\n\t\t}\n\tif (regval == NULL) {\n\t\tBREAK_TO_DEBUGGER();\n\t\treturn;\n\t}\n\n\t \n\tvalue = dm_read_reg(ctx, mmCOL_MAN_INPUT_CSC_CONTROL);\n\tuse_set_a = get_reg_field_value(\n\t\tvalue, COL_MAN_INPUT_CSC_CONTROL, INPUT_CSC_MODE) != 1;\n\n\tif (use_set_a) {\n\t\t \n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[0], INPUT_CSC_C11_C12_A, INPUT_CSC_C11_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[1], INPUT_CSC_C11_C12_A, INPUT_CSC_C12_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C11_C12_A, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[2], INPUT_CSC_C13_C14_A, INPUT_CSC_C13_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[3], INPUT_CSC_C13_C14_A, INPUT_CSC_C14_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C13_C14_A, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[4], INPUT_CSC_C21_C22_A, INPUT_CSC_C21_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[5], INPUT_CSC_C21_C22_A, INPUT_CSC_C22_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C21_C22_A, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[6], INPUT_CSC_C23_C24_A, INPUT_CSC_C23_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[7], INPUT_CSC_C23_C24_A, INPUT_CSC_C24_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C23_C24_A, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[8], INPUT_CSC_C31_C32_A, INPUT_CSC_C31_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[9], INPUT_CSC_C31_C32_A, INPUT_CSC_C32_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C31_C32_A, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[10], INPUT_CSC_C33_C34_A, INPUT_CSC_C33_A);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[11], INPUT_CSC_C33_C34_A, INPUT_CSC_C34_A);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C33_C34_A, value);\n\t} else {\n\t\t \n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[0], INPUT_CSC_C11_C12_B, INPUT_CSC_C11_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[1], INPUT_CSC_C11_C12_B, INPUT_CSC_C12_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C11_C12_B, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[2], INPUT_CSC_C13_C14_B, INPUT_CSC_C13_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[3], INPUT_CSC_C13_C14_B, INPUT_CSC_C14_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C13_C14_B, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[4], INPUT_CSC_C21_C22_B, INPUT_CSC_C21_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[5], INPUT_CSC_C21_C22_B, INPUT_CSC_C22_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C21_C22_B, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[6], INPUT_CSC_C23_C24_B, INPUT_CSC_C23_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[7], INPUT_CSC_C23_C24_B, INPUT_CSC_C24_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C23_C24_B, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[8], INPUT_CSC_C31_C32_B, INPUT_CSC_C31_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[9], INPUT_CSC_C31_C32_B, INPUT_CSC_C32_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C31_C32_B, value);\n\n\t\tvalue = 0;\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[10], INPUT_CSC_C33_C34_B, INPUT_CSC_C33_B);\n\t\tset_reg_field_value(\n\t\t\tvalue, regval[11], INPUT_CSC_C33_C34_B, INPUT_CSC_C34_B);\n\t\tdm_write_reg(ctx, mmINPUT_CSC_C33_C34_B, value);\n\t}\n\n\t \n\tvalue = 0;\n\t \n\n\tset_reg_field_value(\n\t\tvalue, 2, COL_MAN_INPUT_CSC_CONTROL, INPUT_CSC_INPUT_TYPE);\n\tset_reg_field_value(\n\t\tvalue,\n\t\tuse_set_a ? 1 : 2,\n\t\tCOL_MAN_INPUT_CSC_CONTROL,\n\t\tINPUT_CSC_MODE);\n\n\tdm_write_reg(ctx, mmCOL_MAN_INPUT_CSC_CONTROL, value);\n}\n\nvoid dce110_opp_v_set_csc_default(\n\tstruct transform *xfm,\n\tconst struct default_adjustment *default_adjust)\n{\n\tstruct dce_transform *xfm_dce = TO_DCE_TRANSFORM(xfm);\n\tenum csc_color_mode config =\n\t\t\tCSC_COLOR_MODE_GRAPHICS_PREDEFINED;\n\n\tif (default_adjust->force_hw_default == false) {\n\t\tconst struct out_csc_color_matrix *elm;\n\t\t \n\t\tenum grph_color_adjust_option option;\n\t\tuint32_t i;\n\t\t \n\t\toption = GRPH_COLOR_MATRIX_SW;\n\n\t\tfor (i = 0; i < ARRAY_SIZE(global_color_matrix); ++i) {\n\t\t\telm = &global_color_matrix[i];\n\t\t\tif (elm->color_space != default_adjust->out_color_space)\n\t\t\t\tcontinue;\n\t\t\t \n\t\t\tprogram_color_matrix_v(xfm_dce, elm, option);\n\t\t\tconfig = CSC_COLOR_MODE_GRAPHICS_OUTPUT_CSC;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprogram_input_csc(xfm, default_adjust->in_color_space);\n\n\t \n\n\tconfigure_graphics_mode_v(xfm_dce, config,\n\t\tdefault_adjust->csc_adjust_type,\n\t\tdefault_adjust->out_color_space);\n\n\tset_Denormalization(xfm, default_adjust->color_depth);\n}\n\nvoid dce110_opp_v_set_csc_adjustment(\n\tstruct transform *xfm,\n\tconst struct out_csc_color_matrix *tbl_entry)\n{\n\tstruct dce_transform *xfm_dce = TO_DCE_TRANSFORM(xfm);\n\tenum csc_color_mode config =\n\t\t\tCSC_COLOR_MODE_GRAPHICS_OUTPUT_CSC;\n\n\tprogram_color_matrix_v(\n\t\t\txfm_dce, tbl_entry, GRPH_COLOR_MATRIX_SW);\n\n\t \n\tconfigure_graphics_mode_v(xfm_dce, config, GRAPHICS_CSC_ADJUST_TYPE_SW,\n\t\t\ttbl_entry->color_space);\n\n\t \n\t \n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}