{
  "module_name": "core_types.h",
  "hash_id": "f9fa846480a225038322e18478398d9a5d74f83d7f72677a36c8d227a4ee3fd6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/core_types.h",
  "human_readable_source": " \n\n#ifndef _CORE_TYPES_H_\n#define _CORE_TYPES_H_\n\n#include \"dc.h\"\n#include \"dce_calcs.h\"\n#include \"dcn_calcs.h\"\n#include \"ddc_service_types.h\"\n#include \"dc_bios_types.h\"\n#include \"mem_input.h\"\n#include \"hubp.h\"\n#include \"mpc.h\"\n#include \"dwb.h\"\n#include \"mcif_wb.h\"\n#include \"panel_cntl.h\"\n#include \"dmub/inc/dmub_cmd.h\"\n\n#define MAX_CLOCK_SOURCES 7\n#define MAX_SVP_PHANTOM_STREAMS 2\n#define MAX_SVP_PHANTOM_PLANES 2\n\nvoid enable_surface_flip_reporting(struct dc_plane_state *plane_state,\n\t\tuint32_t controller_id);\n\n#include \"grph_object_id.h\"\n#include \"link_encoder.h\"\n#include \"stream_encoder.h\"\n#include \"clock_source.h\"\n#include \"audio.h\"\n#include \"dm_pp_smu.h\"\n#include \"dm_cp_psp.h\"\n#include \"link_hwss.h\"\n\n \n#include \"transform.h\"\n#include \"dpp.h\"\n\nstruct resource_pool;\nstruct dc_state;\nstruct resource_context;\nstruct clk_bw_params;\n\nstruct resource_funcs {\n\tenum engine_id (*get_preferred_eng_id_dpia)(unsigned int dpia_index);\n\tvoid (*destroy)(struct resource_pool **pool);\n\tvoid (*link_init)(struct dc_link *link);\n\tstruct panel_cntl*(*panel_cntl_create)(\n\t\tconst struct panel_cntl_init_data *panel_cntl_init_data);\n\tstruct link_encoder *(*link_enc_create)(\n\t\t\tstruct dc_context *ctx,\n\t\t\tconst struct encoder_init_data *init);\n\t \n\tstruct link_encoder *(*link_enc_create_minimal)(struct dc_context *ctx, enum engine_id eng_id);\n\n\tbool (*validate_bandwidth)(\n\t\t\t\t\tstruct dc *dc,\n\t\t\t\t\tstruct dc_state *context,\n\t\t\t\t\tbool fast_validate);\n\tvoid (*calculate_wm_and_dlg)(\n\t\t\t\tstruct dc *dc, struct dc_state *context,\n\t\t\t\tdisplay_e2e_pipe_params_st *pipes,\n\t\t\t\tint pipe_cnt,\n\t\t\t\tint vlevel);\n\tvoid (*update_soc_for_wm_a)(\n\t\t\t\tstruct dc *dc, struct dc_state *context);\n\n\t \n\tint (*populate_dml_pipes)(\n\t\tstruct dc *dc,\n\t\tstruct dc_state *context,\n\t\tdisplay_e2e_pipe_params_st *pipes,\n\t\tbool fast_validate);\n\n\t \n\tvoid (*link_encs_assign)(\n\t\t\tstruct dc *dc,\n\t\t\tstruct dc_state *state,\n\t\t\tstruct dc_stream_state *streams[],\n\t\t\tuint8_t stream_count);\n\t \n\tvoid (*link_enc_unassign)(\n\t\t\tstruct dc_state *state,\n\t\t\tstruct dc_stream_state *stream);\n\n\tenum dc_status (*validate_global)(\n\t\tstruct dc *dc,\n\t\tstruct dc_state *context);\n\n\tstruct pipe_ctx *(*acquire_free_pipe_as_secondary_dpp_pipe)(\n\t\t\tconst struct dc_state *cur_ctx,\n\t\t\tstruct dc_state *new_ctx,\n\t\t\tconst struct resource_pool *pool,\n\t\t\tconst struct pipe_ctx *opp_head_pipe);\n\n\tenum dc_status (*validate_plane)(\n\t\t\tconst struct dc_plane_state *plane_state,\n\t\t\tstruct dc_caps *caps);\n\n\tenum dc_status (*add_stream_to_ctx)(\n\t\t\tstruct dc *dc,\n\t\t\tstruct dc_state *new_ctx,\n\t\t\tstruct dc_stream_state *dc_stream);\n\n\tenum dc_status (*remove_stream_from_ctx)(\n\t\t\t\tstruct dc *dc,\n\t\t\t\tstruct dc_state *new_ctx,\n\t\t\t\tstruct dc_stream_state *stream);\n\tenum dc_status (*patch_unknown_plane_state)(\n\t\t\tstruct dc_plane_state *plane_state);\n\n\tstruct stream_encoder *(*find_first_free_match_stream_enc_for_link)(\n\t\t\tstruct resource_context *res_ctx,\n\t\t\tconst struct resource_pool *pool,\n\t\t\tstruct dc_stream_state *stream);\n\tvoid (*populate_dml_writeback_from_context)(\n\t\t\tstruct dc *dc,\n\t\t\tstruct resource_context *res_ctx,\n\t\t\tdisplay_e2e_pipe_params_st *pipes);\n\n\tvoid (*set_mcif_arb_params)(\n\t\t\tstruct dc *dc,\n\t\t\tstruct dc_state *context,\n\t\t\tdisplay_e2e_pipe_params_st *pipes,\n\t\t\tint pipe_cnt);\n\tvoid (*update_bw_bounding_box)(\n\t\t\tstruct dc *dc,\n\t\t\tstruct clk_bw_params *bw_params);\n\tbool (*acquire_post_bldn_3dlut)(\n\t\t\tstruct resource_context *res_ctx,\n\t\t\tconst struct resource_pool *pool,\n\t\t\tint mpcc_id,\n\t\t\tstruct dc_3dlut **lut,\n\t\t\tstruct dc_transfer_func **shaper);\n\n\tbool (*release_post_bldn_3dlut)(\n\t\t\tstruct resource_context *res_ctx,\n\t\t\tconst struct resource_pool *pool,\n\t\t\tstruct dc_3dlut **lut,\n\t\t\tstruct dc_transfer_func **shaper);\n\n\tenum dc_status (*add_dsc_to_stream_resource)(\n\t\t\tstruct dc *dc, struct dc_state *state,\n\t\t\tstruct dc_stream_state *stream);\n\n\tvoid (*add_phantom_pipes)(\n            struct dc *dc,\n            struct dc_state *context,\n            display_e2e_pipe_params_st *pipes,\n\t\t\tunsigned int pipe_cnt,\n            unsigned int index);\n\n\tbool (*remove_phantom_pipes)(struct dc *dc, struct dc_state *context, bool fast_update);\n\tvoid (*retain_phantom_pipes)(struct dc *dc, struct dc_state *context);\n\tvoid (*get_panel_config_defaults)(struct dc_panel_config *panel_config);\n\tvoid (*save_mall_state)(struct dc *dc, struct dc_state *context, struct mall_temp_config *temp_config);\n\tvoid (*restore_mall_state)(struct dc *dc, struct dc_state *context, struct mall_temp_config *temp_config);\n};\n\nstruct audio_support{\n\tbool dp_audio;\n\tbool hdmi_audio_on_dongle;\n\tbool hdmi_audio_native;\n};\n\n#define NO_UNDERLAY_PIPE -1\n\nstruct resource_pool {\n\tstruct mem_input *mis[MAX_PIPES];\n\tstruct hubp *hubps[MAX_PIPES];\n\tstruct input_pixel_processor *ipps[MAX_PIPES];\n\tstruct transform *transforms[MAX_PIPES];\n\tstruct dpp *dpps[MAX_PIPES];\n\tstruct output_pixel_processor *opps[MAX_PIPES];\n\tstruct timing_generator *timing_generators[MAX_PIPES];\n\tstruct stream_encoder *stream_enc[MAX_PIPES * 2];\n\tstruct hubbub *hubbub;\n\tstruct mpc *mpc;\n\tstruct pp_smu_funcs *pp_smu;\n\tstruct dce_aux *engines[MAX_PIPES];\n\tstruct dce_i2c_hw *hw_i2cs[MAX_PIPES];\n\tstruct dce_i2c_sw *sw_i2cs[MAX_PIPES];\n\tbool i2c_hw_buffer_in_use;\n\n\tstruct dwbc *dwbc[MAX_DWB_PIPES];\n\tstruct mcif_wb *mcif_wb[MAX_DWB_PIPES];\n\tstruct {\n\t\tunsigned int gsl_0:1;\n\t\tunsigned int gsl_1:1;\n\t\tunsigned int gsl_2:1;\n\t} gsl_groups;\n\n\tstruct display_stream_compressor *dscs[MAX_PIPES];\n\n\tunsigned int pipe_count;\n\tunsigned int underlay_pipe_index;\n\tunsigned int stream_enc_count;\n\n\t \n\tstruct link_encoder *link_encoders[MAX_DIG_LINK_ENCODERS];\n\t \n\tunsigned int dig_link_enc_count;\n\t \n\tunsigned int usb4_dpia_count;\n\n\tunsigned int hpo_dp_stream_enc_count;\n\tstruct hpo_dp_stream_encoder *hpo_dp_stream_enc[MAX_HPO_DP2_ENCODERS];\n\tunsigned int hpo_dp_link_enc_count;\n\tstruct hpo_dp_link_encoder *hpo_dp_link_enc[MAX_HPO_DP2_LINK_ENCODERS];\n\tstruct dc_3dlut *mpc_lut[MAX_PIPES];\n\tstruct dc_transfer_func *mpc_shaper[MAX_PIPES];\n\n\tstruct {\n\t\tunsigned int xtalin_clock_inKhz;\n\t\tunsigned int dccg_ref_clock_inKhz;\n\t\tunsigned int dchub_ref_clock_inKhz;\n\t} ref_clocks;\n\tunsigned int timing_generator_count;\n\tunsigned int mpcc_count;\n\n\tunsigned int writeback_pipe_count;\n\t \n\tstruct clock_source *dp_clock_source;\n\n\tstruct clock_source *clock_sources[MAX_CLOCK_SOURCES];\n\tunsigned int clk_src_count;\n\n\tstruct audio *audios[MAX_AUDIOS];\n\tunsigned int audio_count;\n\tstruct audio_support audio_support;\n\n\tstruct dccg *dccg;\n\tstruct irq_service *irqs;\n\n\tstruct abm *abm;\n\tstruct dmcu *dmcu;\n\tstruct dmub_psr *psr;\n\n\tstruct dmub_replay *replay;\n\n\tstruct abm *multiple_abms[MAX_PIPES];\n\n\tconst struct resource_funcs *funcs;\n\tconst struct resource_caps *res_cap;\n\n\tstruct ddc_service *oem_device;\n};\n\nstruct dcn_fe_bandwidth {\n\tint dppclk_khz;\n\n};\n\nstruct stream_resource {\n\tstruct output_pixel_processor *opp;\n\tstruct display_stream_compressor *dsc;\n\tstruct timing_generator *tg;\n\tstruct stream_encoder *stream_enc;\n\tstruct hpo_dp_stream_encoder *hpo_dp_stream_enc;\n\tstruct audio *audio;\n\n\tstruct pixel_clk_params pix_clk_params;\n\tstruct encoder_info_frame encoder_info_frame;\n\n\tstruct abm *abm;\n\t \n\tuint8_t gsl_group;\n};\n\nstruct plane_resource {\n\tstruct scaler_data scl_data;\n\tstruct hubp *hubp;\n\tstruct mem_input *mi;\n\tstruct input_pixel_processor *ipp;\n\tstruct transform *xfm;\n\tstruct dpp *dpp;\n\tuint8_t mpcc_inst;\n\n\tstruct dcn_fe_bandwidth bw;\n};\n\n#define LINK_RES_HPO_DP_REC_MAP__MASK 0xFFFF\n#define LINK_RES_HPO_DP_REC_MAP__SHIFT 0\n\n \nstruct link_resource {\n\tstruct hpo_dp_link_encoder *hpo_dp_link_enc;\n};\n\nstruct link_config {\n\tstruct dc_link_settings dp_link_settings;\n};\nunion pipe_update_flags {\n\tstruct {\n\t\tuint32_t enable : 1;\n\t\tuint32_t disable : 1;\n\t\tuint32_t odm : 1;\n\t\tuint32_t global_sync : 1;\n\t\tuint32_t opp_changed : 1;\n\t\tuint32_t tg_changed : 1;\n\t\tuint32_t mpcc : 1;\n\t\tuint32_t dppclk : 1;\n\t\tuint32_t hubp_interdependent : 1;\n\t\tuint32_t hubp_rq_dlg_ttu : 1;\n\t\tuint32_t gamut_remap : 1;\n\t\tuint32_t scaler : 1;\n\t\tuint32_t viewport : 1;\n\t\tuint32_t plane_changed : 1;\n\t\tuint32_t det_size : 1;\n\t\tuint32_t unbounded_req : 1;\n\t} bits;\n\tuint32_t raw;\n};\n\nstruct pipe_ctx {\n\tstruct dc_plane_state *plane_state;\n\tstruct dc_stream_state *stream;\n\n\tstruct plane_resource plane_res;\n\n\t \n\tstruct stream_resource stream_res;\n\tstruct link_resource link_res;\n\n\tstruct clock_source *clock_source;\n\n\tstruct pll_settings pll_settings;\n\n\t \n\tstruct link_config link_config;\n\n\tuint8_t pipe_idx;\n\tuint8_t pipe_idx_syncd;\n\n\tstruct pipe_ctx *top_pipe;\n\tstruct pipe_ctx *bottom_pipe;\n\tstruct pipe_ctx *next_odm_pipe;\n\tstruct pipe_ctx *prev_odm_pipe;\n\n\tstruct _vcs_dpi_display_dlg_regs_st dlg_regs;\n\tstruct _vcs_dpi_display_ttu_regs_st ttu_regs;\n\tstruct _vcs_dpi_display_rq_regs_st rq_regs;\n\tstruct _vcs_dpi_display_pipe_dest_params_st pipe_dlg_param;\n\tstruct _vcs_dpi_display_rq_params_st dml_rq_param;\n\tstruct _vcs_dpi_display_dlg_sys_params_st dml_dlg_sys_param;\n\tstruct _vcs_dpi_display_e2e_pipe_params_st dml_input;\n\tint det_buffer_size_kb;\n\tbool unbounded_req;\n\tunsigned int surface_size_in_mall_bytes;\n\n\tstruct dwbc *dwbc;\n\tstruct mcif_wb *mcif_wb;\n\tunion pipe_update_flags update_flags;\n\tstruct tg_color visual_confirm_color;\n\tbool has_vactive_margin;\n};\n\n \nstruct link_enc_cfg_context {\n\tenum link_enc_cfg_mode mode;\n\tstruct link_enc_assignment link_enc_assignments[MAX_PIPES];\n\tenum engine_id link_enc_avail[MAX_DIG_LINK_ENCODERS];\n\tstruct link_enc_assignment transient_assignments[MAX_PIPES];\n};\n\nstruct resource_context {\n\tstruct pipe_ctx pipe_ctx[MAX_PIPES];\n\tbool is_stream_enc_acquired[MAX_PIPES * 2];\n\tbool is_audio_acquired[MAX_PIPES];\n\tuint8_t clock_source_ref_count[MAX_CLOCK_SOURCES];\n\tuint8_t dp_clock_source_ref_count;\n\tbool is_dsc_acquired[MAX_PIPES];\n\tstruct link_enc_cfg_context link_enc_cfg_ctx;\n\tbool is_hpo_dp_stream_enc_acquired[MAX_HPO_DP2_ENCODERS];\n\tunsigned int hpo_dp_link_enc_to_link_idx[MAX_HPO_DP2_LINK_ENCODERS];\n\tint hpo_dp_link_enc_ref_cnts[MAX_HPO_DP2_LINK_ENCODERS];\n\tbool is_mpc_3dlut_acquired[MAX_PIPES];\n};\n\nstruct dce_bw_output {\n\tbool cpuc_state_change_enable;\n\tbool cpup_state_change_enable;\n\tbool stutter_mode_enable;\n\tbool nbp_state_change_enable;\n\tbool all_displays_in_sync;\n\tstruct dce_watermarks urgent_wm_ns[MAX_PIPES];\n\tstruct dce_watermarks stutter_exit_wm_ns[MAX_PIPES];\n\tstruct dce_watermarks stutter_entry_wm_ns[MAX_PIPES];\n\tstruct dce_watermarks nbp_state_change_wm_ns[MAX_PIPES];\n\tint sclk_khz;\n\tint sclk_deep_sleep_khz;\n\tint yclk_khz;\n\tint dispclk_khz;\n\tint blackout_recovery_time_us;\n};\n\nstruct dcn_bw_writeback {\n\tstruct mcif_arb_params mcif_wb_arb[MAX_DWB_PIPES];\n};\n\nstruct dcn_bw_output {\n\tstruct dc_clocks clk;\n\tstruct dcn_watermark_set watermarks;\n\tstruct dcn_bw_writeback bw_writeback;\n\tint compbuf_size_kb;\n\tunsigned int mall_ss_size_bytes;\n\tunsigned int mall_ss_psr_active_size_bytes;\n\tunsigned int mall_subvp_size_bytes;\n\tunsigned int legacy_svp_drr_stream_index;\n\tbool legacy_svp_drr_stream_index_valid;\n};\n\nunion bw_output {\n\tstruct dcn_bw_output dcn;\n\tstruct dce_bw_output dce;\n};\n\nstruct bw_context {\n\tunion bw_output bw;\n\tstruct display_mode_lib dml;\n};\n\nstruct dc_dmub_cmd {\n\tunion dmub_rb_cmd dmub_cmd;\n\tenum dm_dmub_wait_type wait_type;\n};\n\n \nstruct dc_state {\n\t \n\tstruct dc_stream_state *streams[MAX_PIPES];\n\n\t \n\tstruct dc_stream_status stream_status[MAX_PIPES];\n\n\t \n\tuint8_t stream_count;\n\tuint8_t stream_mask;\n\n\t \n\tstruct resource_context res_ctx;\n\n\t \n\tstruct dm_pp_display_configuration pp_display_cfg;\n\n\t \n\tstruct dcn_bw_internal_vars dcn_bw_vars;\n\n\tstruct clk_mgr *clk_mgr;\n\n\t \n\tstruct bw_context bw_ctx;\n\n\tstruct block_sequence block_sequence[50];\n\tunsigned int block_sequence_steps;\n\tstruct dc_dmub_cmd dc_dmub_cmd[10];\n\tunsigned int dmub_cmd_count;\n\n\t \n\tstruct kref refcount;\n\n\tstruct {\n\t\tunsigned int stutter_period_us;\n\t} perf_params;\n};\n\nstruct replay_context {\n\t \n\tenum channel_id aux_inst;\n\t \n\tenum transmitter digbe_inst;\n\t \n\tenum engine_id digfe_inst;\n\t \n\tenum controller_id controllerId;\n\tunsigned int line_time_in_ns;\n};\n\nenum dc_replay_enable {\n\tDC_REPLAY_DISABLE\t\t\t= 0,\n\tDC_REPLAY_ENABLE\t\t\t= 1,\n};\n\nstruct dc_bounding_box_max_clk {\n\tint max_dcfclk_mhz;\n\tint max_dispclk_mhz;\n\tint max_dppclk_mhz;\n\tint max_phyclk_mhz;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}