{
  "module_name": "dcn20_hubp.h",
  "hash_id": "29055e5c176224fb772f4c95d36c7f1eef823803c51328ba997cc902a394b26a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dcn20/dcn20_hubp.h",
  "human_readable_source": " \n\n#ifndef __DC_MEM_INPUT_DCN20_H__\n#define __DC_MEM_INPUT_DCN20_H__\n\n#include \"../dcn10/dcn10_hubp.h\"\n\n#define TO_DCN20_HUBP(hubp)\\\n\tcontainer_of(hubp, struct dcn20_hubp, base)\n\n#define HUBP_REG_LIST_DCN2_COMMON(id)\\\n\tHUBP_REG_LIST_DCN(id),\\\n\tHUBP_REG_LIST_DCN_VM(id),\\\n\tSRI(PREFETCH_SETTINGS, HUBPREQ, id),\\\n\tSRI(PREFETCH_SETTINGS_C, HUBPREQ, id),\\\n\tSRI(DCN_VM_SYSTEM_APERTURE_LOW_ADDR, HUBPREQ, id),\\\n\tSRI(DCN_VM_SYSTEM_APERTURE_HIGH_ADDR, HUBPREQ, id),\\\n\tSRI(CURSOR_SETTINGS, HUBPREQ, id), \\\n\tSRI(CURSOR_SURFACE_ADDRESS_HIGH, CURSOR0_, id), \\\n\tSRI(CURSOR_SURFACE_ADDRESS, CURSOR0_, id), \\\n\tSRI(CURSOR_SIZE, CURSOR0_, id), \\\n\tSRI(CURSOR_CONTROL, CURSOR0_, id), \\\n\tSRI(CURSOR_POSITION, CURSOR0_, id), \\\n\tSRI(CURSOR_HOT_SPOT, CURSOR0_, id), \\\n\tSRI(CURSOR_DST_OFFSET, CURSOR0_, id), \\\n\tSRI(DMDATA_ADDRESS_HIGH, CURSOR0_, id), \\\n\tSRI(DMDATA_ADDRESS_LOW, CURSOR0_, id), \\\n\tSRI(DMDATA_CNTL, CURSOR0_, id), \\\n\tSRI(DMDATA_SW_CNTL, CURSOR0_, id), \\\n\tSRI(DMDATA_QOS_CNTL, CURSOR0_, id), \\\n\tSRI(DMDATA_SW_DATA, CURSOR0_, id), \\\n\tSRI(DMDATA_STATUS, CURSOR0_, id),\\\n\tSRI(FLIP_PARAMETERS_0, HUBPREQ, id),\\\n\tSRI(FLIP_PARAMETERS_1, HUBPREQ, id),\\\n\tSRI(FLIP_PARAMETERS_2, HUBPREQ, id),\\\n\tSRI(DCN_CUR1_TTU_CNTL0, HUBPREQ, id),\\\n\tSRI(DCN_CUR1_TTU_CNTL1, HUBPREQ, id),\\\n\tSRI(DCSURF_FLIP_CONTROL2, HUBPREQ, id), \\\n\tSRI(VMID_SETTINGS_0, HUBPREQ, id)\n\n#define HUBP_REG_LIST_DCN20(id)\\\n\tHUBP_REG_LIST_DCN2_COMMON(id),\\\n\tSR(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB),\\\n\tSR(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_LSB)\n\n#define HUBP_MASK_SH_LIST_DCN2_SHARE_COMMON(mask_sh)\\\n\tHUBP_MASK_SH_LIST_DCN_SHARE_COMMON(mask_sh),\\\n\tHUBP_MASK_SH_LIST_DCN_VM(mask_sh),\\\n\tHUBP_SF(HUBP0_DCSURF_SURFACE_CONFIG, ROTATION_ANGLE, mask_sh),\\\n\tHUBP_SF(HUBP0_DCSURF_SURFACE_CONFIG, H_MIRROR_EN, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_PREFETCH_SETTINGS, DST_Y_PREFETCH, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_PREFETCH_SETTINGS, VRATIO_PREFETCH, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_PREFETCH_SETTINGS_C, VRATIO_PREFETCH_C, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_DCN_VM_SYSTEM_APERTURE_LOW_ADDR, MC_VM_SYSTEM_APERTURE_LOW_ADDR, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_DCN_VM_SYSTEM_APERTURE_HIGH_ADDR, MC_VM_SYSTEM_APERTURE_HIGH_ADDR, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_CURSOR_SETTINGS, CURSOR0_DST_Y_OFFSET, mask_sh), \\\n\tHUBP_SF(HUBPREQ0_CURSOR_SETTINGS, CURSOR0_CHUNK_HDL_ADJUST, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_SURFACE_ADDRESS_HIGH, CURSOR_SURFACE_ADDRESS_HIGH, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_SURFACE_ADDRESS, CURSOR_SURFACE_ADDRESS, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_SIZE, CURSOR_WIDTH, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_SIZE, CURSOR_HEIGHT, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_CONTROL, CURSOR_MODE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_CONTROL, CURSOR_2X_MAGNIFY, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_CONTROL, CURSOR_PITCH, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_CONTROL, CURSOR_LINES_PER_CHUNK, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_CONTROL, CURSOR_ENABLE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_POSITION, CURSOR_X_POSITION, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_POSITION, CURSOR_Y_POSITION, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_HOT_SPOT, CURSOR_HOT_SPOT_X, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_HOT_SPOT, CURSOR_HOT_SPOT_Y, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_CURSOR_DST_OFFSET, CURSOR_DST_X_OFFSET, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_ADDRESS_HIGH, DMDATA_ADDRESS_HIGH, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_CNTL, DMDATA_MODE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_CNTL, DMDATA_UPDATED, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_CNTL, DMDATA_REPEAT, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_CNTL, DMDATA_SIZE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_SW_CNTL, DMDATA_SW_UPDATED, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_SW_CNTL, DMDATA_SW_REPEAT, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_SW_CNTL, DMDATA_SW_SIZE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_QOS_CNTL, DMDATA_QOS_MODE, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_QOS_CNTL, DMDATA_QOS_LEVEL, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_QOS_CNTL, DMDATA_DL_DELTA, mask_sh), \\\n\tHUBP_SF(CURSOR0_0_DMDATA_STATUS, DMDATA_DONE, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_FLIP_PARAMETERS_0, DST_Y_PER_VM_FLIP, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_FLIP_PARAMETERS_0, DST_Y_PER_ROW_FLIP, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_FLIP_PARAMETERS_1, REFCYC_PER_PTE_GROUP_FLIP_L, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_FLIP_PARAMETERS_2, REFCYC_PER_META_CHUNK_FLIP_L, mask_sh),\\\n\tHUBP_SF(HUBP0_DCHUBP_CNTL, HUBP_VREADY_AT_OR_AFTER_VSYNC, mask_sh),\\\n\tHUBP_SF(HUBP0_DCHUBP_CNTL, HUBP_DISABLE_STOP_DATA_DURING_VM, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_DCSURF_FLIP_CONTROL, HUBPREQ_MASTER_UPDATE_LOCK_STATUS, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_DCSURF_FLIP_CONTROL2, SURFACE_GSL_ENABLE, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_DCSURF_FLIP_CONTROL2, SURFACE_TRIPLE_BUFFER_ENABLE, mask_sh),\\\n\tHUBP_SF(HUBPREQ0_VMID_SETTINGS_0, VMID, mask_sh)\n\n \n#define HUBP_MASK_SH_LIST_DCN2_COMMON(mask_sh)\\\n\tHUBP_MASK_SH_LIST_DCN2_SHARE_COMMON(mask_sh),\\\n\tHUBP_SF(HUBP0_DCSURF_TILING_CONFIG, RB_ALIGNED, mask_sh),\\\n\tHUBP_SF(HUBP0_DCHUBP_REQ_SIZE_CONFIG, MPTE_GROUP_SIZE, mask_sh),\\\n\tHUBP_SF(HUBP0_DCHUBP_REQ_SIZE_CONFIG_C, MPTE_GROUP_SIZE_C, mask_sh)\n\n \n#define HUBP_MASK_SH_LIST_DCN20(mask_sh)\\\n\tHUBP_MASK_SH_LIST_DCN2_COMMON(mask_sh),\\\n\tHUBP_SF(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB, DCN_VM_SYSTEM_APERTURE_DEFAULT_SYSTEM, mask_sh),\\\n\tHUBP_SF(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB, DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB, mask_sh),\\\n\tHUBP_SF(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_LSB, DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_LSB, mask_sh)\n\n \n#define DCN2_HUBP_REG_COMMON_VARIABLE_LIST \\\n\tHUBP_COMMON_REG_VARIABLE_LIST; \\\n\tuint32_t DMDATA_ADDRESS_HIGH; \\\n\tuint32_t DMDATA_ADDRESS_LOW; \\\n\tuint32_t DMDATA_CNTL; \\\n\tuint32_t DMDATA_SW_CNTL; \\\n\tuint32_t DMDATA_QOS_CNTL; \\\n\tuint32_t DMDATA_SW_DATA; \\\n\tuint32_t DMDATA_STATUS;\\\n\tuint32_t DCSURF_FLIP_CONTROL2;\\\n\tuint32_t FLIP_PARAMETERS_0;\\\n\tuint32_t FLIP_PARAMETERS_1;\\\n\tuint32_t FLIP_PARAMETERS_2;\\\n\tuint32_t DCN_CUR1_TTU_CNTL0;\\\n\tuint32_t DCN_CUR1_TTU_CNTL1;\\\n\tuint32_t VMID_SETTINGS_0\n\n\n#define DCN21_HUBP_REG_COMMON_VARIABLE_LIST \\\n\tDCN2_HUBP_REG_COMMON_VARIABLE_LIST; \\\n\tuint32_t FLIP_PARAMETERS_3;\\\n\tuint32_t FLIP_PARAMETERS_4;\\\n\tuint32_t FLIP_PARAMETERS_5;\\\n\tuint32_t FLIP_PARAMETERS_6;\\\n\tuint32_t VBLANK_PARAMETERS_5;\\\n\tuint32_t VBLANK_PARAMETERS_6\n\n#define DCN30_HUBP_REG_COMMON_VARIABLE_LIST \\\n\tDCN21_HUBP_REG_COMMON_VARIABLE_LIST;\\\n\tuint32_t DCN_DMDATA_VM_CNTL\n\n#define DCN32_HUBP_REG_COMMON_VARIABLE_LIST \\\n\tDCN30_HUBP_REG_COMMON_VARIABLE_LIST;\\\n\tuint32_t DCHUBP_MALL_CONFIG;\\\n\tuint32_t DCHUBP_VMPG_CONFIG;\\\n\tuint32_t UCLK_PSTATE_FORCE\n\n#define DCN2_HUBP_REG_FIELD_VARIABLE_LIST(type) \\\n\tDCN_HUBP_REG_FIELD_BASE_LIST(type); \\\n\ttype DMDATA_ADDRESS_HIGH;\\\n\ttype DMDATA_MODE;\\\n\ttype DMDATA_UPDATED;\\\n\ttype DMDATA_REPEAT;\\\n\ttype DMDATA_SIZE;\\\n\ttype DMDATA_SW_UPDATED;\\\n\ttype DMDATA_SW_REPEAT;\\\n\ttype DMDATA_SW_SIZE;\\\n\ttype DMDATA_QOS_MODE;\\\n\ttype DMDATA_QOS_LEVEL;\\\n\ttype DMDATA_DL_DELTA;\\\n\ttype DMDATA_DONE;\\\n\ttype DST_Y_PER_VM_FLIP;\\\n\ttype DST_Y_PER_ROW_FLIP;\\\n\ttype REFCYC_PER_PTE_GROUP_FLIP_L;\\\n\ttype REFCYC_PER_META_CHUNK_FLIP_L;\\\n\ttype HUBP_VREADY_AT_OR_AFTER_VSYNC;\\\n\ttype HUBP_DISABLE_STOP_DATA_DURING_VM;\\\n\ttype HUBPREQ_MASTER_UPDATE_LOCK_STATUS;\\\n\ttype SURFACE_GSL_ENABLE;\\\n\ttype SURFACE_TRIPLE_BUFFER_ENABLE;\\\n\ttype VMID\n\n#define DCN21_HUBP_REG_FIELD_VARIABLE_LIST(type) \\\n\tDCN2_HUBP_REG_FIELD_VARIABLE_LIST(type);\\\n\ttype REFCYC_PER_VM_GROUP_FLIP;\\\n\ttype REFCYC_PER_VM_REQ_FLIP;\\\n\ttype REFCYC_PER_VM_GROUP_VBLANK;\\\n\ttype REFCYC_PER_VM_REQ_VBLANK;\\\n\ttype REFCYC_PER_PTE_GROUP_FLIP_C; \\\n\ttype REFCYC_PER_META_CHUNK_FLIP_C; \\\n\ttype VM_GROUP_SIZE\n\n#define DCN30_HUBP_REG_FIELD_VARIABLE_LIST(type) \\\n\tDCN21_HUBP_REG_FIELD_VARIABLE_LIST(type);\\\n\ttype PRIMARY_SURFACE_DCC_IND_BLK;\\\n\ttype SECONDARY_SURFACE_DCC_IND_BLK;\\\n\ttype PRIMARY_SURFACE_DCC_IND_BLK_C;\\\n\ttype SECONDARY_SURFACE_DCC_IND_BLK_C;\\\n\ttype ALPHA_PLANE_EN;\\\n\ttype REFCYC_PER_VM_DMDATA;\\\n\ttype DMDATA_VM_FAULT_STATUS;\\\n\ttype DMDATA_VM_FAULT_STATUS_CLEAR; \\\n\ttype DMDATA_VM_UNDERFLOW_STATUS;\\\n\ttype DMDATA_VM_LATE_STATUS;\\\n\ttype DMDATA_VM_UNDERFLOW_STATUS_CLEAR; \\\n\ttype DMDATA_VM_DONE; \\\n\ttype CROSSBAR_SRC_Y_G; \\\n\ttype CROSSBAR_SRC_ALPHA; \\\n\ttype PACK_3TO2_ELEMENT_DISABLE; \\\n\ttype ROW_TTU_MODE; \\\n\ttype NUM_PKRS\n\n#define DCN31_HUBP_REG_FIELD_VARIABLE_LIST(type) \\\n\tDCN30_HUBP_REG_FIELD_VARIABLE_LIST(type);\\\n\ttype HUBP_UNBOUNDED_REQ_MODE;\\\n\ttype CURSOR_REQ_MODE;\\\n\ttype HUBP_SOFT_RESET\n\n#define DCN32_HUBP_REG_FIELD_VARIABLE_LIST(type) \\\n\tDCN31_HUBP_REG_FIELD_VARIABLE_LIST(type);\\\n\ttype USE_MALL_SEL; \\\n\ttype USE_MALL_FOR_CURSOR;\\\n\ttype VMPG_SIZE; \\\n\ttype PTE_BUFFER_MODE; \\\n\ttype BIGK_FRAGMENT_SIZE; \\\n\ttype FORCE_ONE_ROW_FOR_FRAME; \\\n\ttype DATA_UCLK_PSTATE_FORCE_EN; \\\n\ttype DATA_UCLK_PSTATE_FORCE_VALUE; \\\n\ttype CURSOR_UCLK_PSTATE_FORCE_EN; \\\n\ttype CURSOR_UCLK_PSTATE_FORCE_VALUE\n\nstruct dcn_hubp2_registers {\n\tDCN32_HUBP_REG_COMMON_VARIABLE_LIST;\n};\n\nstruct dcn_hubp2_shift {\n\tDCN32_HUBP_REG_FIELD_VARIABLE_LIST(uint8_t);\n};\n\nstruct dcn_hubp2_mask {\n\tDCN32_HUBP_REG_FIELD_VARIABLE_LIST(uint32_t);\n};\n\nstruct dcn20_hubp {\n\tstruct hubp base;\n\tstruct dcn_hubp_state state;\n\tconst struct dcn_hubp2_registers *hubp_regs;\n\tconst struct dcn_hubp2_shift *hubp_shift;\n\tconst struct dcn_hubp2_mask *hubp_mask;\n};\n\nbool hubp2_construct(\n\t\tstruct dcn20_hubp *hubp2,\n\t\tstruct dc_context *ctx,\n\t\tuint32_t inst,\n\t\tconst struct dcn_hubp2_registers *hubp_regs,\n\t\tconst struct dcn_hubp2_shift *hubp_shift,\n\t\tconst struct dcn_hubp2_mask *hubp_mask);\n\nvoid hubp2_setup_interdependent(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr,\n\t\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr);\n\nvoid hubp2_vready_at_or_After_vsync(struct hubp *hubp,\n\t\tstruct _vcs_dpi_display_pipe_dest_params_st *pipe_dest);\n\nvoid hubp2_cursor_set_attributes(\n\t\tstruct hubp *hubp,\n\t\tconst struct dc_cursor_attributes *attr);\n\nvoid hubp2_set_vm_system_aperture_settings(struct hubp *hubp,\n\t\tstruct vm_system_aperture_param *apt);\n\nenum cursor_lines_per_chunk hubp2_get_lines_per_chunk(\n\t\tunsigned int cursor_width,\n\t\tenum dc_cursor_color_format cursor_mode);\n\nvoid hubp2_dmdata_set_attributes(\n\t\tstruct hubp *hubp,\n\t\tconst struct dc_dmdata_attributes *attr);\n\nvoid hubp2_dmdata_load(\n\t\tstruct hubp *hubp,\n\t\tuint32_t dmdata_sw_size,\n\t\tconst uint32_t *dmdata_sw_data);\n\nbool hubp2_dmdata_status_done(struct hubp *hubp);\n\nvoid hubp2_enable_triplebuffer(\n\t\tstruct hubp *hubp,\n\t\tbool enable);\n\nbool hubp2_is_triplebuffer_enabled(\n\t\tstruct hubp *hubp);\n\nvoid hubp2_set_flip_control_surface_gsl(struct hubp *hubp, bool enable);\n\nvoid hubp2_program_deadline(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr,\n\t\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr);\n\nbool hubp2_program_surface_flip_and_addr(\n\tstruct hubp *hubp,\n\tconst struct dc_plane_address *address,\n\tbool flip_immediate);\n\nvoid hubp2_dcc_control(struct hubp *hubp, bool enable,\n\t\tenum hubp_ind_block_size independent_64b_blks);\n\nvoid hubp2_program_size(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format,\n\tconst struct plane_size *plane_size,\n\tstruct dc_plane_dcc_param *dcc);\n\nvoid hubp2_program_rotation(\n\tstruct hubp *hubp,\n\tenum dc_rotation_angle rotation,\n\tbool horizontal_mirror);\n\nvoid hubp2_program_pixel_format(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format);\n\nvoid hubp2_program_surface_config(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format,\n\tunion dc_tiling_info *tiling_info,\n\tstruct plane_size *plane_size,\n\tenum dc_rotation_angle rotation,\n\tstruct dc_plane_dcc_param *dcc,\n\tbool horizontal_mirror,\n\tunsigned int compat_level);\n\nbool hubp2_is_flip_pending(struct hubp *hubp);\n\nvoid hubp2_set_blank(struct hubp *hubp, bool blank);\nvoid hubp2_set_blank_regs(struct hubp *hubp, bool blank);\n\nvoid hubp2_cursor_set_position(\n\t\tstruct hubp *hubp,\n\t\tconst struct dc_cursor_position *pos,\n\t\tconst struct dc_cursor_mi_param *param);\n\nvoid hubp2_clk_cntl(struct hubp *hubp, bool enable);\n\nvoid hubp2_vtg_sel(struct hubp *hubp, uint32_t otg_inst);\n\nvoid hubp2_clear_underflow(struct hubp *hubp);\n\nvoid hubp2_read_state_common(struct hubp *hubp);\n\nvoid hubp2_read_state(struct hubp *hubp);\n\n#endif  \n\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}