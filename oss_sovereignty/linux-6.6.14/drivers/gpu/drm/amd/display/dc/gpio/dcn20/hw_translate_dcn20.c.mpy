{
  "module_name": "hw_translate_dcn20.c",
  "hash_id": "562c0e7dc03439638c432e7369f40a6245f15bf3652689c5e0d4b8bbf2c6aafd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/gpio/dcn20/hw_translate_dcn20.c",
  "human_readable_source": " \n\n \n#include \"hw_translate_dcn20.h\"\n\n#include \"dm_services.h\"\n#include \"include/gpio_types.h\"\n#include \"../hw_translate.h\"\n\n#include \"dcn/dcn_1_0_offset.h\"\n#include \"dcn/dcn_1_0_sh_mask.h\"\n#include \"soc15_hw_ip.h\"\n#include \"vega10_ip_offset.h\"\n\n\n\n \n\n \n#define block HPD\n#define reg_num 0\n\n#undef BASE_INNER\n#define BASE_INNER(seg) DCN_BASE__INST0_SEG ## seg\n\n#define BASE(seg) BASE_INNER(seg)\n\n#undef REG\n#define REG(reg_name)\\\n\t\tBASE(mm ## reg_name ## _BASE_IDX) + mm ## reg_name\n#define SF_HPD(reg_name, field_name, post_fix)\\\n\t.field_name = reg_name ## __ ## field_name ## post_fix\n\n\n \n\n\nstatic bool offset_to_id(\n\tuint32_t offset,\n\tuint32_t mask,\n\tenum gpio_id *id,\n\tuint32_t *en)\n{\n\tswitch (offset) {\n\t \n\tcase REG(DC_GPIO_GENERIC_A):\n\t\t*id = GPIO_ID_GENERIC;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICA_A_MASK:\n\t\t\t*en = GPIO_GENERIC_A;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICB_A_MASK:\n\t\t\t*en = GPIO_GENERIC_B;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICC_A_MASK:\n\t\t\t*en = GPIO_GENERIC_C;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICD_A_MASK:\n\t\t\t*en = GPIO_GENERIC_D;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICE_A_MASK:\n\t\t\t*en = GPIO_GENERIC_E;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICF_A_MASK:\n\t\t\t*en = GPIO_GENERIC_F;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICG_A_MASK:\n\t\t\t*en = GPIO_GENERIC_G;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase REG(DC_GPIO_HPD_A):\n\t\t*id = GPIO_ID_HPD;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD1_A_MASK:\n\t\t\t*en = GPIO_HPD_1;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD2_A_MASK:\n\t\t\t*en = GPIO_HPD_2;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD3_A_MASK:\n\t\t\t*en = GPIO_HPD_3;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD4_A_MASK:\n\t\t\t*en = GPIO_HPD_4;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD5_A_MASK:\n\t\t\t*en = GPIO_HPD_5;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD6_A_MASK:\n\t\t\t*en = GPIO_HPD_6;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase REG(DC_GPIO_GENLK_A):\n\t\t*id = GPIO_ID_GSL;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_GENLK_CLK_A_MASK:\n\t\t\t*en = GPIO_GSL_GENLOCK_CLOCK;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_GENLK_VSYNC_A_MASK:\n\t\t\t*en = GPIO_GSL_GENLOCK_VSYNC;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_A_A_MASK:\n\t\t\t*en = GPIO_GSL_SWAPLOCK_A;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_B_A_MASK:\n\t\t\t*en = GPIO_GSL_SWAPLOCK_B;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\t \n\tcase REG(DC_GPIO_DDC1_A):\n\t\t*en = GPIO_DDC_LINE_DDC1;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDC2_A):\n\t\t*en = GPIO_DDC_LINE_DDC2;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDC3_A):\n\t\t*en = GPIO_DDC_LINE_DDC3;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDC4_A):\n\t\t*en = GPIO_DDC_LINE_DDC4;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDC5_A):\n\t\t*en = GPIO_DDC_LINE_DDC5;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDC6_A):\n\t\t*en = GPIO_DDC_LINE_DDC6;\n\t\treturn true;\n\tcase REG(DC_GPIO_DDCVGA_A):\n\t\t*en = GPIO_DDC_LINE_DDC_VGA;\n\t\treturn true;\n\n \n\t \n\tdefault:\n \n\t\tASSERT_CRITICAL(false);\n\t\treturn false;\n\t}\n}\n\nstatic bool id_to_offset(\n\tenum gpio_id id,\n\tuint32_t en,\n\tstruct gpio_pin_info *info)\n{\n\tbool result = true;\n\n\tswitch (id) {\n\tcase GPIO_ID_DDC_DATA:\n\t\tinfo->mask = DC_GPIO_DDC6_A__DC_GPIO_DDC6DATA_A_MASK;\n\t\tswitch (en) {\n\t\tcase GPIO_DDC_LINE_DDC1:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC1_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC2:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC2_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC3:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC3_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC4:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC4_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC5:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC5_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC6:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC6_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC_VGA:\n\t\t\tinfo->offset = REG(DC_GPIO_DDCVGA_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_I2C_PAD:\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_DDC_CLOCK:\n\t\tinfo->mask = DC_GPIO_DDC6_A__DC_GPIO_DDC6CLK_A_MASK;\n\t\tswitch (en) {\n\t\tcase GPIO_DDC_LINE_DDC1:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC1_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC2:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC2_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC3:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC3_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC4:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC4_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC5:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC5_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC6:\n\t\t\tinfo->offset = REG(DC_GPIO_DDC6_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC_VGA:\n\t\t\tinfo->offset = REG(DC_GPIO_DDCVGA_A);\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_I2C_PAD:\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_GENERIC:\n\t\tinfo->offset = REG(DC_GPIO_GENERIC_A);\n\t\tswitch (en) {\n\t\tcase GPIO_GENERIC_A:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICA_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_B:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICB_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_C:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICC_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_D:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICD_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_E:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICE_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_F:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICF_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_G:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICG_A_MASK;\n\t\tbreak;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_HPD:\n\t\tinfo->offset = REG(DC_GPIO_HPD_A);\n\t\tswitch (en) {\n\t\tcase GPIO_HPD_1:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD1_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_2:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD2_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_3:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD3_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_4:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD4_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_5:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD5_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_6:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD6_A_MASK;\n\t\tbreak;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_GSL:\n\t\tswitch (en) {\n\t\tcase GPIO_GSL_GENLOCK_CLOCK:\n\t\t\t\t \n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\tbreak;\n\t\tcase GPIO_GSL_GENLOCK_VSYNC:\n\t\t\t \n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\tbreak;\n\t\tcase GPIO_GSL_SWAPLOCK_A:\n\t\t\t \n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\tbreak;\n\t\tcase GPIO_GSL_SWAPLOCK_B:\n\t\t\t \n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\n\t\tbreak;\n\t\tdefault:\n\t\t\tASSERT_CRITICAL(false);\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_SYNC:\n\tcase GPIO_ID_VIP_PAD:\n\tdefault:\n\t\tASSERT_CRITICAL(false);\n\t\tresult = false;\n\t}\n\n\tif (result) {\n\t\tinfo->offset_y = info->offset + 2;\n\t\tinfo->offset_en = info->offset + 1;\n\t\tinfo->offset_mask = info->offset - 1;\n\n\t\tinfo->mask_y = info->mask;\n\t\tinfo->mask_en = info->mask;\n\t\tinfo->mask_mask = info->mask;\n\t}\n\n\treturn result;\n}\n\n \nstatic const struct hw_translate_funcs funcs = {\n\t.offset_to_id = offset_to_id,\n\t.id_to_offset = id_to_offset,\n};\n\n \nvoid dal_hw_translate_dcn20_init(struct hw_translate *tr)\n{\n\ttr->funcs = &funcs;\n}\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}