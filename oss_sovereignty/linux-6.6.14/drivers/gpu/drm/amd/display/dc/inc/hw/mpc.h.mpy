{
  "module_name": "mpc.h",
  "hash_id": "4b67d21b6cf9e50051dce186e39d73654459753bb76db6d9c169d13fb42a91be",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/hw/mpc.h",
  "human_readable_source": " \n\n \n\n#ifndef __DC_MPCC_H__\n#define __DC_MPCC_H__\n\n#include \"dc_hw_types.h\"\n#include \"hw_shared.h\"\n#include \"transform.h\"\n\n#define MAX_MPCC 6\n#define MAX_OPP 6\n\n#define MAX_DWB\t\t2\n\nenum mpc_output_csc_mode {\n\tMPC_OUTPUT_CSC_DISABLE = 0,\n\tMPC_OUTPUT_CSC_COEF_A,\n\tMPC_OUTPUT_CSC_COEF_B\n};\n\n\nenum mpcc_blend_mode {\n\tMPCC_BLEND_MODE_BYPASS,\n\tMPCC_BLEND_MODE_TOP_LAYER_PASSTHROUGH,\n\tMPCC_BLEND_MODE_TOP_LAYER_ONLY,\n\tMPCC_BLEND_MODE_TOP_BOT_BLENDING\n};\n\n \nenum mpcc_alpha_blend_mode {\n\t \n\tMPCC_ALPHA_BLEND_MODE_PER_PIXEL_ALPHA,\n\t \n\tMPCC_ALPHA_BLEND_MODE_PER_PIXEL_ALPHA_COMBINED_GLOBAL_GAIN,\n\t \n\tMPCC_ALPHA_BLEND_MODE_GLOBAL_ALPHA\n};\n\n \nstruct mpcc_blnd_cfg {\n\tstruct tg_color black_color;\t \n\tenum mpcc_alpha_blend_mode alpha_mode;\t \n\tbool pre_multiplied_alpha;\t \n\tint global_gain;\n\tint global_alpha;\n\tbool overlap_only;\n\n\t \n\tint bottom_gain_mode;\n\tint background_color_bpc;\n\tint top_gain;\n\tint bottom_inside_gain;\n\tint bottom_outside_gain;\n};\n\nstruct mpc_grph_gamut_adjustment {\n\tstruct fixed31_32 temperature_matrix[CSC_TEMPERATURE_MATRIX_SIZE];\n\tenum graphics_gamut_adjust_type gamut_adjust_type;\n};\n\nstruct mpcc_sm_cfg {\n\tbool enable;\n\t \n\tint sm_mode;\n\t \n\tbool frame_alt;\n\t \n\tbool field_alt;\n\t \n\tint force_next_frame_porlarity;\n\t \n\tint force_next_field_polarity;\n};\n\nstruct mpc_denorm_clamp {\n\tint clamp_max_r_cr;\n\tint clamp_min_r_cr;\n\tint clamp_max_g_y;\n\tint clamp_min_g_y;\n\tint clamp_max_b_cb;\n\tint clamp_min_b_cb;\n};\n\nstruct mpc_dwb_flow_control {\n\tint flow_ctrl_mode;\n\tint flow_ctrl_cnt0;\n\tint flow_ctrl_cnt1;\n};\n\n \nstruct mpcc {\n\tint mpcc_id;\t\t\t \n\tint dpp_id;\t\t\t \n\tstruct mpcc *mpcc_bot;\t\t \n\tstruct mpcc_blnd_cfg blnd_cfg;\t \n\tstruct mpcc_sm_cfg sm_cfg;\t \n\tbool shared_bottom;\t\t \n};\n\n \nstruct mpc_tree {\n\tint opp_id;\t\t\t \n\tstruct mpcc *opp_list;\t\t \n};\n\nstruct mpc {\n\tconst struct mpc_funcs *funcs;\n\tstruct dc_context *ctx;\n\n\tstruct mpcc mpcc_array[MAX_MPCC];\n\tstruct pwl_params blender_params;\n\tbool cm_bypass_mode;\n};\n\nstruct mpcc_state {\n\tuint32_t opp_id;\n\tuint32_t dpp_id;\n\tuint32_t bot_mpcc_id;\n\tuint32_t mode;\n\tuint32_t alpha_mode;\n\tuint32_t pre_multiplied_alpha;\n\tuint32_t overlap_only;\n\tuint32_t idle;\n\tuint32_t busy;\n};\n\n \nstruct mpc_funcs {\n\tvoid (*read_mpcc_state)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint mpcc_inst,\n\t\t\tstruct mpcc_state *s);\n\n\t \n\tstruct mpcc* (*insert_plane)(\n\t\t\tstruct mpc *mpc,\n\t\t\tstruct mpc_tree *tree,\n\t\t\tstruct mpcc_blnd_cfg *blnd_cfg,\n\t\t\tstruct mpcc_sm_cfg *sm_cfg,\n\t\t\tstruct mpcc *insert_above_mpcc,\n\t\t\tint dpp_id,\n\t\t\tint mpcc_id);\n\n\t \n\tvoid (*remove_mpcc)(\n\t\t\tstruct mpc *mpc,\n\t\t\tstruct mpc_tree *tree,\n\t\t\tstruct mpcc *mpcc);\n\n\t \n\tvoid (*mpc_init)(struct mpc *mpc);\n\tvoid (*mpc_init_single_inst)(\n\t\t\tstruct mpc *mpc,\n\t\t\tunsigned int mpcc_id);\n\n\t \n\tvoid (*update_blending)(\n\t\tstruct mpc *mpc,\n\t\tstruct mpcc_blnd_cfg *blnd_cfg,\n\t\tint mpcc_id);\n\n\t \n\tvoid (*cursor_lock)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint opp_id,\n\t\t\tbool lock);\n\n\t \n\tstruct mpcc* (*insert_plane_to_secondary)(\n\t\t\tstruct mpc *mpc,\n\t\t\tstruct mpc_tree *tree,\n\t\t\tstruct mpcc_blnd_cfg *blnd_cfg,\n\t\t\tstruct mpcc_sm_cfg *sm_cfg,\n\t\t\tstruct mpcc *insert_above_mpcc,\n\t\t\tint dpp_id,\n\t\t\tint mpcc_id);\n\n\t \n\tvoid (*remove_mpcc_from_secondary)(\n\t\t\tstruct mpc *mpc,\n\t\t\tstruct mpc_tree *tree,\n\t\t\tstruct mpcc *mpcc);\n\n\tstruct mpcc* (*get_mpcc_for_dpp_from_secondary)(\n\t\t\tstruct mpc_tree *tree,\n\t\t\tint dpp_id);\n\n\tstruct mpcc* (*get_mpcc_for_dpp)(\n\t\t\tstruct mpc_tree *tree,\n\t\t\tint dpp_id);\n\n\tvoid (*wait_for_idle)(struct mpc *mpc, int id);\n\n\tvoid (*assert_mpcc_idle_before_connect)(struct mpc *mpc, int mpcc_id);\n\n\tvoid (*init_mpcc_list_from_hw)(\n\t\tstruct mpc *mpc,\n\t\tstruct mpc_tree *tree);\n\n\tvoid (*set_denorm)(struct mpc *mpc,\n\t\t\tint opp_id,\n\t\t\tenum dc_color_depth output_depth);\n\n\tvoid (*set_denorm_clamp)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint opp_id,\n\t\t\tstruct mpc_denorm_clamp denorm_clamp);\n\n\tvoid (*set_output_csc)(struct mpc *mpc,\n\t\t\tint opp_id,\n\t\t\tconst uint16_t *regval,\n\t\t\tenum mpc_output_csc_mode ocsc_mode);\n\n\tvoid (*set_ocsc_default)(struct mpc *mpc,\n\t\t\tint opp_id,\n\t\t\tenum dc_color_space color_space,\n\t\t\tenum mpc_output_csc_mode ocsc_mode);\n\n\tvoid (*set_output_gamma)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint mpcc_id,\n\t\t\tconst struct pwl_params *params);\n\tvoid (*power_on_mpc_mem_pwr)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint mpcc_id,\n\t\t\tbool power_on);\n\tvoid (*set_dwb_mux)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint dwb_id,\n\t\t\tint mpcc_id);\n\n\tvoid (*disable_dwb_mux)(\n\t\tstruct mpc *mpc,\n\t\tint dwb_id);\n\n\tbool (*is_dwb_idle)(\n\t\tstruct mpc *mpc,\n\t\tint dwb_id);\n\n\tvoid (*set_out_rate_control)(\n\t\tstruct mpc *mpc,\n\t\tint opp_id,\n\t\tbool enable,\n\t\tbool rate_2x_mode,\n\t\tstruct mpc_dwb_flow_control *flow_control);\n\n\tvoid (*set_gamut_remap)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint mpcc_id,\n\t\t\tconst struct mpc_grph_gamut_adjustment *adjust);\n\n\tbool (*program_1dlut)(\n\t\t\tstruct mpc *mpc,\n\t\t\tconst struct pwl_params *params,\n\t\t\tuint32_t rmu_idx);\n\n\tbool (*program_shaper)(\n\t\t\tstruct mpc *mpc,\n\t\t\tconst struct pwl_params *params,\n\t\t\tuint32_t rmu_idx);\n\n\tuint32_t (*acquire_rmu)(struct mpc *mpc, int mpcc_id, int rmu_idx);\n\n\tbool (*program_3dlut)(\n\t\t\tstruct mpc *mpc,\n\t\t\tconst struct tetrahedral_params *params,\n\t\t\tint rmu_idx);\n\n\tint (*release_rmu)(struct mpc *mpc, int mpcc_id);\n\n\tunsigned int (*get_mpc_out_mux)(\n\t\t\tstruct mpc *mpc,\n\t\t\tint opp_id);\n\n\tvoid (*set_bg_color)(struct mpc *mpc,\n\t\t\tstruct tg_color *bg_color,\n\t\t\tint mpcc_id);\n\tvoid (*set_mpc_mem_lp_mode)(struct mpc *mpc);\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}