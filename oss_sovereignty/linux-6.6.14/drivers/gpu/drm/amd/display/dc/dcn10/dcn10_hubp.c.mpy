{
  "module_name": "dcn10_hubp.c",
  "hash_id": "b5196f8e63f27bf03c3c69dab5ddf07e6de935145f6ff5ec0f181689c7595d8b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hubp.c",
  "human_readable_source": " \n#include \"dm_services.h\"\n#include \"dce_calcs.h\"\n#include \"reg_helper.h\"\n#include \"basics/conversion.h\"\n#include \"dcn10_hubp.h\"\n\n#define REG(reg)\\\n\thubp1->hubp_regs->reg\n\n#define CTX \\\n\thubp1->base.ctx\n\n#undef FN\n#define FN(reg_name, field_name) \\\n\thubp1->hubp_shift->field_name, hubp1->hubp_mask->field_name\n\nvoid hubp1_set_blank(struct hubp *hubp, bool blank)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t blank_en = blank ? 1 : 0;\n\n\tREG_UPDATE_2(DCHUBP_CNTL,\n\t\t\tHUBP_BLANK_EN, blank_en,\n\t\t\tHUBP_TTU_DISABLE, blank_en);\n\n\tif (blank) {\n\t\tuint32_t reg_val = REG_READ(DCHUBP_CNTL);\n\n\t\tif (reg_val) {\n\t\t\t \n\t\t\tREG_WAIT(DCHUBP_CNTL,\n\t\t\t\t\tHUBP_NO_OUTSTANDING_REQ, 1,\n\t\t\t\t\t1, 200);\n\t\t}\n\n\t\thubp->mpcc_id = 0xf;\n\t\thubp->opp_id = OPP_ID_INVALID;\n\t}\n}\n\nstatic void hubp1_disconnect(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL,\n\t\t\tHUBP_TTU_DISABLE, 1);\n\n\tREG_UPDATE(CURSOR_CONTROL,\n\t\t\tCURSOR_ENABLE, 0);\n}\n\nstatic void hubp1_disable_control(struct hubp *hubp, bool disable_hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t disable = disable_hubp ? 1 : 0;\n\n\tREG_UPDATE(DCHUBP_CNTL,\n\t\t\tHUBP_DISABLE, disable);\n}\n\nstatic unsigned int hubp1_get_underflow_status(struct hubp *hubp)\n{\n\tuint32_t hubp_underflow = 0;\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_GET(DCHUBP_CNTL,\n\t\tHUBP_UNDERFLOW_STATUS,\n\t\t&hubp_underflow);\n\n\treturn hubp_underflow;\n}\n\n\nvoid hubp1_clear_underflow(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_UNDERFLOW_CLEAR, 1);\n}\n\nstatic void hubp1_set_hubp_blank_en(struct hubp *hubp, bool blank)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t blank_en = blank ? 1 : 0;\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_BLANK_EN, blank_en);\n}\n\nvoid hubp1_vready_workaround(struct hubp *hubp,\n\t\tstruct _vcs_dpi_display_pipe_dest_params_st *pipe_dest)\n{\n\tuint32_t value = 0;\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\t \n\tvalue = REG_READ(HUBPREQ_DEBUG_DB);\n\n\t \n\tvalue |= 0x100;\n\tvalue &= ~0x1000;\n\n\tif ((pipe_dest->vstartup_start - 2*(pipe_dest->vready_offset+pipe_dest->vupdate_width\n\t\t+ pipe_dest->vupdate_offset) / pipe_dest->htotal) <= pipe_dest->vblank_end) {\n\t\t \n\t\tvalue |= 0x1000;\n\t}\n\n\tREG_WRITE(HUBPREQ_DEBUG_DB, value);\n}\n\nvoid hubp1_program_tiling(\n\tstruct hubp *hubp,\n\tconst union dc_tiling_info *info,\n\tconst enum surface_pixel_format pixel_format)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE_6(DCSURF_ADDR_CONFIG,\n\t\t\tNUM_PIPES, log_2(info->gfx9.num_pipes),\n\t\t\tNUM_BANKS, log_2(info->gfx9.num_banks),\n\t\t\tPIPE_INTERLEAVE, info->gfx9.pipe_interleave,\n\t\t\tNUM_SE, log_2(info->gfx9.num_shader_engines),\n\t\t\tNUM_RB_PER_SE, log_2(info->gfx9.num_rb_per_se),\n\t\t\tMAX_COMPRESSED_FRAGS, log_2(info->gfx9.max_compressed_frags));\n\n\tREG_UPDATE_4(DCSURF_TILING_CONFIG,\n\t\t\tSW_MODE, info->gfx9.swizzle,\n\t\t\tMETA_LINEAR, info->gfx9.meta_linear,\n\t\t\tRB_ALIGNED, info->gfx9.rb_aligned,\n\t\t\tPIPE_ALIGNED, info->gfx9.pipe_aligned);\n}\n\nvoid hubp1_program_size(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format,\n\tconst struct plane_size *plane_size,\n\tstruct dc_plane_dcc_param *dcc)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t pitch, meta_pitch, pitch_c, meta_pitch_c;\n\n\t \n\tif (format >= SURFACE_PIXEL_FORMAT_VIDEO_BEGIN && format < SURFACE_PIXEL_FORMAT_SUBSAMPLE_END) {\n\t\tASSERT(plane_size->chroma_pitch != 0);\n\t\t \n\n\t\tpitch = plane_size->surface_pitch - 1;\n\t\tmeta_pitch = dcc->meta_pitch - 1;\n\t\tpitch_c = plane_size->chroma_pitch - 1;\n\t\tmeta_pitch_c = dcc->meta_pitch_c - 1;\n\t} else {\n\t\tpitch = plane_size->surface_pitch - 1;\n\t\tmeta_pitch = dcc->meta_pitch - 1;\n\t\tpitch_c = 0;\n\t\tmeta_pitch_c = 0;\n\t}\n\n\tif (!dcc->enable) {\n\t\tmeta_pitch = 0;\n\t\tmeta_pitch_c = 0;\n\t}\n\n\tREG_UPDATE_2(DCSURF_SURFACE_PITCH,\n\t\t\tPITCH, pitch, META_PITCH, meta_pitch);\n\n\tif (format >= SURFACE_PIXEL_FORMAT_VIDEO_BEGIN)\n\t\tREG_UPDATE_2(DCSURF_SURFACE_PITCH_C,\n\t\t\tPITCH_C, pitch_c, META_PITCH_C, meta_pitch_c);\n}\n\nvoid hubp1_program_rotation(\n\tstruct hubp *hubp,\n\tenum dc_rotation_angle rotation,\n\tbool horizontal_mirror)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t mirror;\n\n\n\tif (horizontal_mirror)\n\t\tmirror = 1;\n\telse\n\t\tmirror = 0;\n\n\t \n\tif (rotation == ROTATION_ANGLE_0)\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tROTATION_ANGLE, 0,\n\t\t\t\tH_MIRROR_EN, mirror);\n\telse if (rotation == ROTATION_ANGLE_90)\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tROTATION_ANGLE, 1,\n\t\t\t\tH_MIRROR_EN, mirror);\n\telse if (rotation == ROTATION_ANGLE_180)\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tROTATION_ANGLE, 2,\n\t\t\t\tH_MIRROR_EN, mirror);\n\telse if (rotation == ROTATION_ANGLE_270)\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tROTATION_ANGLE, 3,\n\t\t\t\tH_MIRROR_EN, mirror);\n}\n\nvoid hubp1_program_pixel_format(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t red_bar = 3;\n\tuint32_t blue_bar = 2;\n\n\t \n\tif (format == SURFACE_PIXEL_FORMAT_GRPH_ABGR8888\n\t\t\t|| format == SURFACE_PIXEL_FORMAT_GRPH_ABGR2101010\n\t\t\t|| format == SURFACE_PIXEL_FORMAT_GRPH_ABGR2101010_XR_BIAS\n\t\t\t|| format == SURFACE_PIXEL_FORMAT_GRPH_ABGR16161616\n\t\t\t|| format == SURFACE_PIXEL_FORMAT_GRPH_ABGR16161616F) {\n\t\tred_bar = 2;\n\t\tblue_bar = 3;\n\t}\n\n\tREG_UPDATE_2(HUBPRET_CONTROL,\n\t\t\tCROSSBAR_SRC_CB_B, blue_bar,\n\t\t\tCROSSBAR_SRC_CR_R, red_bar);\n\n\t \n\n\tswitch (format)\t{\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ARGB1555:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 1);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_RGB565:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 3);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ARGB8888:\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ABGR8888:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 8);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ARGB2101010:\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ABGR2101010:\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ABGR2101010_XR_BIAS:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 10);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ARGB16161616:\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ABGR16161616:  \n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 26);  \n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ARGB16161616F:\n\tcase SURFACE_PIXEL_FORMAT_GRPH_ABGR16161616F: \n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 24);\n\t\tbreak;\n\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_420_YCbCr:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 65);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_420_YCrCb:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 64);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_420_10bpc_YCbCr:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 67);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_420_10bpc_YCrCb:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 66);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_AYCrCb8888:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 12);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_RGB111110_FIX:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 112);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_BGR101111_FIX:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 113);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_VIDEO_ACrYCb2101010:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 114);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_RGB111110_FLOAT:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 118);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_BGR101111_FLOAT:\n\t\tREG_UPDATE(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 119);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_RGBE:\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 116,\n\t\t\t\tALPHA_PLANE_EN, 0);\n\t\tbreak;\n\tcase SURFACE_PIXEL_FORMAT_GRPH_RGBE_ALPHA:\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONFIG,\n\t\t\t\tSURFACE_PIXEL_FORMAT, 116,\n\t\t\t\tALPHA_PLANE_EN, 1);\n\t\tbreak;\n\tdefault:\n\t\tBREAK_TO_DEBUGGER();\n\t\tbreak;\n\t}\n\n\t \n}\n\nbool hubp1_program_surface_flip_and_addr(\n\tstruct hubp *hubp,\n\tconst struct dc_plane_address *address,\n\tbool flip_immediate)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\n\t\n\tREG_UPDATE(DCSURF_FLIP_CONTROL,\n\t\t\tSURFACE_FLIP_TYPE, flip_immediate);\n\n\n\tif (address->type == PLN_ADDR_TYPE_GRPH_STEREO) {\n\t\tREG_UPDATE(DCSURF_FLIP_CONTROL, SURFACE_FLIP_MODE_FOR_STEREOSYNC, 0x1);\n\t\tREG_UPDATE(DCSURF_FLIP_CONTROL, SURFACE_FLIP_IN_STEREOSYNC, 0x1);\n\n\t} else {\n\t\t\n\t\tREG_UPDATE(DCSURF_FLIP_CONTROL, SURFACE_FLIP_MODE_FOR_STEREOSYNC, 0x0);\n\t\tREG_UPDATE(DCSURF_FLIP_CONTROL, SURFACE_FLIP_IN_STEREOSYNC, 0x0);\n\t}\n\n\n\n\t \n\tswitch (address->type) {\n\tcase PLN_ADDR_TYPE_GRAPHICS:\n\t\t \n\n\t\tif (address->grph.addr.quad_part == 0)\n\t\t\tbreak;\n\n\t\tREG_UPDATE_2(DCSURF_SURFACE_CONTROL,\n\t\t\t\tPRIMARY_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tPRIMARY_META_SURFACE_TMZ, address->tmz_surface);\n\n\t\tif (address->grph.meta_addr.quad_part != 0) {\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\t\tPRIMARY_META_SURFACE_ADDRESS_HIGH,\n\t\t\t\t\taddress->grph.meta_addr.high_part);\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS, 0,\n\t\t\t\t\tPRIMARY_META_SURFACE_ADDRESS,\n\t\t\t\t\taddress->grph.meta_addr.low_part);\n\t\t}\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\tPRIMARY_SURFACE_ADDRESS_HIGH,\n\t\t\t\taddress->grph.addr.high_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS, 0,\n\t\t\t\tPRIMARY_SURFACE_ADDRESS,\n\t\t\t\taddress->grph.addr.low_part);\n\t\tbreak;\n\tcase PLN_ADDR_TYPE_VIDEO_PROGRESSIVE:\n\t\tif (address->video_progressive.luma_addr.quad_part == 0\n\t\t\t|| address->video_progressive.chroma_addr.quad_part == 0)\n\t\t\tbreak;\n\n\t\tREG_UPDATE_4(DCSURF_SURFACE_CONTROL,\n\t\t\t\tPRIMARY_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tPRIMARY_SURFACE_TMZ_C, address->tmz_surface,\n\t\t\t\tPRIMARY_META_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tPRIMARY_META_SURFACE_TMZ_C, address->tmz_surface);\n\n\t\tif (address->video_progressive.luma_meta_addr.quad_part != 0) {\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_HIGH_C, 0,\n\t\t\t\tPRIMARY_META_SURFACE_ADDRESS_HIGH_C,\n\t\t\t\taddress->video_progressive.chroma_meta_addr.high_part);\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_C, 0,\n\t\t\t\tPRIMARY_META_SURFACE_ADDRESS_C,\n\t\t\t\taddress->video_progressive.chroma_meta_addr.low_part);\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\tPRIMARY_META_SURFACE_ADDRESS_HIGH,\n\t\t\t\taddress->video_progressive.luma_meta_addr.high_part);\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS, 0,\n\t\t\t\tPRIMARY_META_SURFACE_ADDRESS,\n\t\t\t\taddress->video_progressive.luma_meta_addr.low_part);\n\t\t}\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH_C, 0,\n\t\t\tPRIMARY_SURFACE_ADDRESS_HIGH_C,\n\t\t\taddress->video_progressive.chroma_addr.high_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS_C, 0,\n\t\t\tPRIMARY_SURFACE_ADDRESS_C,\n\t\t\taddress->video_progressive.chroma_addr.low_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH, 0,\n\t\t\tPRIMARY_SURFACE_ADDRESS_HIGH,\n\t\t\taddress->video_progressive.luma_addr.high_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS, 0,\n\t\t\tPRIMARY_SURFACE_ADDRESS,\n\t\t\taddress->video_progressive.luma_addr.low_part);\n\t\tbreak;\n\tcase PLN_ADDR_TYPE_GRPH_STEREO:\n\t\tif (address->grph_stereo.left_addr.quad_part == 0)\n\t\t\tbreak;\n\t\tif (address->grph_stereo.right_addr.quad_part == 0)\n\t\t\tbreak;\n\n\t\tREG_UPDATE_8(DCSURF_SURFACE_CONTROL,\n\t\t\t\tPRIMARY_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tPRIMARY_SURFACE_TMZ_C, address->tmz_surface,\n\t\t\t\tPRIMARY_META_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tPRIMARY_META_SURFACE_TMZ_C, address->tmz_surface,\n\t\t\t\tSECONDARY_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tSECONDARY_SURFACE_TMZ_C, address->tmz_surface,\n\t\t\t\tSECONDARY_META_SURFACE_TMZ, address->tmz_surface,\n\t\t\t\tSECONDARY_META_SURFACE_TMZ_C, address->tmz_surface);\n\n\t\tif (address->grph_stereo.right_meta_addr.quad_part != 0) {\n\n\t\t\tREG_SET(DCSURF_SECONDARY_META_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\t\tSECONDARY_META_SURFACE_ADDRESS_HIGH,\n\t\t\t\t\taddress->grph_stereo.right_meta_addr.high_part);\n\n\t\t\tREG_SET(DCSURF_SECONDARY_META_SURFACE_ADDRESS, 0,\n\t\t\t\t\tSECONDARY_META_SURFACE_ADDRESS,\n\t\t\t\t\taddress->grph_stereo.right_meta_addr.low_part);\n\t\t}\n\t\tif (address->grph_stereo.left_meta_addr.quad_part != 0) {\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\t\tPRIMARY_META_SURFACE_ADDRESS_HIGH,\n\t\t\t\t\taddress->grph_stereo.left_meta_addr.high_part);\n\n\t\t\tREG_SET(DCSURF_PRIMARY_META_SURFACE_ADDRESS, 0,\n\t\t\t\t\tPRIMARY_META_SURFACE_ADDRESS,\n\t\t\t\t\taddress->grph_stereo.left_meta_addr.low_part);\n\t\t}\n\n\t\tREG_SET(DCSURF_SECONDARY_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\tSECONDARY_SURFACE_ADDRESS_HIGH,\n\t\t\t\taddress->grph_stereo.right_addr.high_part);\n\n\t\tREG_SET(DCSURF_SECONDARY_SURFACE_ADDRESS, 0,\n\t\t\t\tSECONDARY_SURFACE_ADDRESS,\n\t\t\t\taddress->grph_stereo.right_addr.low_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH, 0,\n\t\t\t\tPRIMARY_SURFACE_ADDRESS_HIGH,\n\t\t\t\taddress->grph_stereo.left_addr.high_part);\n\n\t\tREG_SET(DCSURF_PRIMARY_SURFACE_ADDRESS, 0,\n\t\t\t\tPRIMARY_SURFACE_ADDRESS,\n\t\t\t\taddress->grph_stereo.left_addr.low_part);\n\t\tbreak;\n\tdefault:\n\t\tBREAK_TO_DEBUGGER();\n\t\tbreak;\n\t}\n\n\thubp->request_address = *address;\n\n\treturn true;\n}\n\nvoid hubp1_dcc_control(struct hubp *hubp, bool enable,\n\t\tenum hubp_ind_block_size independent_64b_blks)\n{\n\tuint32_t dcc_en = enable ? 1 : 0;\n\tuint32_t dcc_ind_64b_blk = independent_64b_blks ? 1 : 0;\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE_4(DCSURF_SURFACE_CONTROL,\n\t\t\tPRIMARY_SURFACE_DCC_EN, dcc_en,\n\t\t\tPRIMARY_SURFACE_DCC_IND_64B_BLK, dcc_ind_64b_blk,\n\t\t\tSECONDARY_SURFACE_DCC_EN, dcc_en,\n\t\t\tSECONDARY_SURFACE_DCC_IND_64B_BLK, dcc_ind_64b_blk);\n}\n\nvoid hubp1_program_surface_config(\n\tstruct hubp *hubp,\n\tenum surface_pixel_format format,\n\tunion dc_tiling_info *tiling_info,\n\tstruct plane_size *plane_size,\n\tenum dc_rotation_angle rotation,\n\tstruct dc_plane_dcc_param *dcc,\n\tbool horizontal_mirror,\n\tunsigned int compat_level)\n{\n\thubp1_dcc_control(hubp, dcc->enable, dcc->independent_64b_blks);\n\thubp1_program_tiling(hubp, tiling_info, format);\n\thubp1_program_size(hubp, format, plane_size, dcc);\n\thubp1_program_rotation(hubp, rotation, horizontal_mirror);\n\thubp1_program_pixel_format(hubp, format);\n}\n\nvoid hubp1_program_requestor(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_rq_regs_st *rq_regs)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(HUBPRET_CONTROL,\n\t\t\tDET_BUF_PLANE1_BASE_ADDRESS, rq_regs->plane1_base_address);\n\tREG_SET_4(DCN_EXPANSION_MODE, 0,\n\t\t\tDRQ_EXPANSION_MODE, rq_regs->drq_expansion_mode,\n\t\t\tPRQ_EXPANSION_MODE, rq_regs->prq_expansion_mode,\n\t\t\tMRQ_EXPANSION_MODE, rq_regs->mrq_expansion_mode,\n\t\t\tCRQ_EXPANSION_MODE, rq_regs->crq_expansion_mode);\n\tREG_SET_8(DCHUBP_REQ_SIZE_CONFIG, 0,\n\t\tCHUNK_SIZE, rq_regs->rq_regs_l.chunk_size,\n\t\tMIN_CHUNK_SIZE, rq_regs->rq_regs_l.min_chunk_size,\n\t\tMETA_CHUNK_SIZE, rq_regs->rq_regs_l.meta_chunk_size,\n\t\tMIN_META_CHUNK_SIZE, rq_regs->rq_regs_l.min_meta_chunk_size,\n\t\tDPTE_GROUP_SIZE, rq_regs->rq_regs_l.dpte_group_size,\n\t\tMPTE_GROUP_SIZE, rq_regs->rq_regs_l.mpte_group_size,\n\t\tSWATH_HEIGHT, rq_regs->rq_regs_l.swath_height,\n\t\tPTE_ROW_HEIGHT_LINEAR, rq_regs->rq_regs_l.pte_row_height_linear);\n\tREG_SET_8(DCHUBP_REQ_SIZE_CONFIG_C, 0,\n\t\tCHUNK_SIZE_C, rq_regs->rq_regs_c.chunk_size,\n\t\tMIN_CHUNK_SIZE_C, rq_regs->rq_regs_c.min_chunk_size,\n\t\tMETA_CHUNK_SIZE_C, rq_regs->rq_regs_c.meta_chunk_size,\n\t\tMIN_META_CHUNK_SIZE_C, rq_regs->rq_regs_c.min_meta_chunk_size,\n\t\tDPTE_GROUP_SIZE_C, rq_regs->rq_regs_c.dpte_group_size,\n\t\tMPTE_GROUP_SIZE_C, rq_regs->rq_regs_c.mpte_group_size,\n\t\tSWATH_HEIGHT_C, rq_regs->rq_regs_c.swath_height,\n\t\tPTE_ROW_HEIGHT_LINEAR_C, rq_regs->rq_regs_c.pte_row_height_linear);\n}\n\n\nvoid hubp1_program_deadline(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr,\n\t\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\t \n\tREG_SET_2(BLANK_OFFSET_0, 0,\n\t\tREFCYC_H_BLANK_END, dlg_attr->refcyc_h_blank_end,\n\t\tDLG_V_BLANK_END, dlg_attr->dlg_vblank_end);\n\n\tREG_SET(BLANK_OFFSET_1, 0,\n\t\tMIN_DST_Y_NEXT_START, dlg_attr->min_dst_y_next_start);\n\n\tREG_SET(DST_DIMENSIONS, 0,\n\t\tREFCYC_PER_HTOTAL, dlg_attr->refcyc_per_htotal);\n\n\tREG_SET_2(DST_AFTER_SCALER, 0,\n\t\tREFCYC_X_AFTER_SCALER, dlg_attr->refcyc_x_after_scaler,\n\t\tDST_Y_AFTER_SCALER, dlg_attr->dst_y_after_scaler);\n\n\tREG_SET(REF_FREQ_TO_PIX_FREQ, 0,\n\t\tREF_FREQ_TO_PIX_FREQ, dlg_attr->ref_freq_to_pix_freq);\n\n\t \n\tREG_SET(VBLANK_PARAMETERS_1, 0,\n\t\tREFCYC_PER_PTE_GROUP_VBLANK_L, dlg_attr->refcyc_per_pte_group_vblank_l);\n\n\tif (REG(NOM_PARAMETERS_0))\n\t\tREG_SET(NOM_PARAMETERS_0, 0,\n\t\t\tDST_Y_PER_PTE_ROW_NOM_L, dlg_attr->dst_y_per_pte_row_nom_l);\n\n\tif (REG(NOM_PARAMETERS_1))\n\t\tREG_SET(NOM_PARAMETERS_1, 0,\n\t\t\tREFCYC_PER_PTE_GROUP_NOM_L, dlg_attr->refcyc_per_pte_group_nom_l);\n\n\tREG_SET(NOM_PARAMETERS_4, 0,\n\t\tDST_Y_PER_META_ROW_NOM_L, dlg_attr->dst_y_per_meta_row_nom_l);\n\n\tREG_SET(NOM_PARAMETERS_5, 0,\n\t\tREFCYC_PER_META_CHUNK_NOM_L, dlg_attr->refcyc_per_meta_chunk_nom_l);\n\n\tREG_SET_2(PER_LINE_DELIVERY, 0,\n\t\tREFCYC_PER_LINE_DELIVERY_L, dlg_attr->refcyc_per_line_delivery_l,\n\t\tREFCYC_PER_LINE_DELIVERY_C, dlg_attr->refcyc_per_line_delivery_c);\n\n\tREG_SET(VBLANK_PARAMETERS_2, 0,\n\t\tREFCYC_PER_PTE_GROUP_VBLANK_C, dlg_attr->refcyc_per_pte_group_vblank_c);\n\n\tif (REG(NOM_PARAMETERS_2))\n\t\tREG_SET(NOM_PARAMETERS_2, 0,\n\t\t\tDST_Y_PER_PTE_ROW_NOM_C, dlg_attr->dst_y_per_pte_row_nom_c);\n\n\tif (REG(NOM_PARAMETERS_3))\n\t\tREG_SET(NOM_PARAMETERS_3, 0,\n\t\t\tREFCYC_PER_PTE_GROUP_NOM_C, dlg_attr->refcyc_per_pte_group_nom_c);\n\n\tREG_SET(NOM_PARAMETERS_6, 0,\n\t\tDST_Y_PER_META_ROW_NOM_C, dlg_attr->dst_y_per_meta_row_nom_c);\n\n\tREG_SET(NOM_PARAMETERS_7, 0,\n\t\tREFCYC_PER_META_CHUNK_NOM_C, dlg_attr->refcyc_per_meta_chunk_nom_c);\n\n\t \n\tREG_SET_2(DCN_TTU_QOS_WM, 0,\n\t\tQoS_LEVEL_LOW_WM, ttu_attr->qos_level_low_wm,\n\t\tQoS_LEVEL_HIGH_WM, ttu_attr->qos_level_high_wm);\n\n\t \n\t \n\n\tREG_SET_3(DCN_SURF0_TTU_CNTL0, 0,\n\t\tREFCYC_PER_REQ_DELIVERY, ttu_attr->refcyc_per_req_delivery_l,\n\t\tQoS_LEVEL_FIXED, ttu_attr->qos_level_fixed_l,\n\t\tQoS_RAMP_DISABLE, ttu_attr->qos_ramp_disable_l);\n\n\tREG_SET_3(DCN_SURF1_TTU_CNTL0, 0,\n\t\tREFCYC_PER_REQ_DELIVERY, ttu_attr->refcyc_per_req_delivery_c,\n\t\tQoS_LEVEL_FIXED, ttu_attr->qos_level_fixed_c,\n\t\tQoS_RAMP_DISABLE, ttu_attr->qos_ramp_disable_c);\n\n\tREG_SET_3(DCN_CUR0_TTU_CNTL0, 0,\n\t\tREFCYC_PER_REQ_DELIVERY, ttu_attr->refcyc_per_req_delivery_cur0,\n\t\tQoS_LEVEL_FIXED, ttu_attr->qos_level_fixed_cur0,\n\t\tQoS_RAMP_DISABLE, ttu_attr->qos_ramp_disable_cur0);\n}\n\nstatic void hubp1_setup(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr,\n\t\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr,\n\t\tstruct _vcs_dpi_display_rq_regs_st *rq_regs,\n\t\tstruct _vcs_dpi_display_pipe_dest_params_st *pipe_dest)\n{\n\t \n\thubp1_program_requestor(hubp, rq_regs);\n\thubp1_program_deadline(hubp, dlg_attr, ttu_attr);\n\thubp1_vready_workaround(hubp, pipe_dest);\n}\n\nstatic void hubp1_setup_interdependent(\n\t\tstruct hubp *hubp,\n\t\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr,\n\t\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_SET_2(PREFETCH_SETTINS, 0,\n\t\tDST_Y_PREFETCH, dlg_attr->dst_y_prefetch,\n\t\tVRATIO_PREFETCH, dlg_attr->vratio_prefetch);\n\n\tREG_SET(PREFETCH_SETTINS_C, 0,\n\t\tVRATIO_PREFETCH_C, dlg_attr->vratio_prefetch_c);\n\n\tREG_SET_2(VBLANK_PARAMETERS_0, 0,\n\t\tDST_Y_PER_VM_VBLANK, dlg_attr->dst_y_per_vm_vblank,\n\t\tDST_Y_PER_ROW_VBLANK, dlg_attr->dst_y_per_row_vblank);\n\n\tREG_SET(VBLANK_PARAMETERS_3, 0,\n\t\tREFCYC_PER_META_CHUNK_VBLANK_L, dlg_attr->refcyc_per_meta_chunk_vblank_l);\n\n\tREG_SET(VBLANK_PARAMETERS_4, 0,\n\t\tREFCYC_PER_META_CHUNK_VBLANK_C, dlg_attr->refcyc_per_meta_chunk_vblank_c);\n\n\tREG_SET_2(PER_LINE_DELIVERY_PRE, 0,\n\t\tREFCYC_PER_LINE_DELIVERY_PRE_L, dlg_attr->refcyc_per_line_delivery_pre_l,\n\t\tREFCYC_PER_LINE_DELIVERY_PRE_C, dlg_attr->refcyc_per_line_delivery_pre_c);\n\n\tREG_SET(DCN_SURF0_TTU_CNTL1, 0,\n\t\tREFCYC_PER_REQ_DELIVERY_PRE,\n\t\tttu_attr->refcyc_per_req_delivery_pre_l);\n\tREG_SET(DCN_SURF1_TTU_CNTL1, 0,\n\t\tREFCYC_PER_REQ_DELIVERY_PRE,\n\t\tttu_attr->refcyc_per_req_delivery_pre_c);\n\tREG_SET(DCN_CUR0_TTU_CNTL1, 0,\n\t\tREFCYC_PER_REQ_DELIVERY_PRE, ttu_attr->refcyc_per_req_delivery_pre_cur0);\n\n\tREG_SET_2(DCN_GLOBAL_TTU_CNTL, 0,\n\t\tMIN_TTU_VBLANK, ttu_attr->min_ttu_vblank,\n\t\tQoS_LEVEL_FLIP, ttu_attr->qos_level_flip);\n}\n\nbool hubp1_is_flip_pending(struct hubp *hubp)\n{\n\tuint32_t flip_pending = 0;\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tstruct dc_plane_address earliest_inuse_address;\n\n\tif (hubp && hubp->power_gated)\n\t\treturn false;\n\n\tREG_GET(DCSURF_FLIP_CONTROL,\n\t\t\tSURFACE_FLIP_PENDING, &flip_pending);\n\n\tREG_GET(DCSURF_SURFACE_EARLIEST_INUSE,\n\t\t\tSURFACE_EARLIEST_INUSE_ADDRESS, &earliest_inuse_address.grph.addr.low_part);\n\n\tREG_GET(DCSURF_SURFACE_EARLIEST_INUSE_HIGH,\n\t\t\tSURFACE_EARLIEST_INUSE_ADDRESS_HIGH, &earliest_inuse_address.grph.addr.high_part);\n\n\tif (flip_pending)\n\t\treturn true;\n\n\tif (earliest_inuse_address.grph.addr.quad_part != hubp->request_address.grph.addr.quad_part)\n\t\treturn true;\n\n\treturn false;\n}\n\nstatic uint32_t aperture_default_system = 1;\nstatic uint32_t context0_default_system;  \n\nstatic void hubp1_set_vm_system_aperture_settings(struct hubp *hubp,\n\t\tstruct vm_system_aperture_param *apt)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tPHYSICAL_ADDRESS_LOC mc_vm_apt_default;\n\tPHYSICAL_ADDRESS_LOC mc_vm_apt_low;\n\tPHYSICAL_ADDRESS_LOC mc_vm_apt_high;\n\n\tmc_vm_apt_default.quad_part = apt->sys_default.quad_part >> 12;\n\tmc_vm_apt_low.quad_part = apt->sys_low.quad_part >> 12;\n\tmc_vm_apt_high.quad_part = apt->sys_high.quad_part >> 12;\n\n\tREG_SET_2(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB, 0,\n\t\tMC_VM_SYSTEM_APERTURE_DEFAULT_SYSTEM, aperture_default_system,  \n\t\tMC_VM_SYSTEM_APERTURE_DEFAULT_ADDR_MSB, mc_vm_apt_default.high_part);\n\tREG_SET(DCN_VM_SYSTEM_APERTURE_DEFAULT_ADDR_LSB, 0,\n\t\tMC_VM_SYSTEM_APERTURE_DEFAULT_ADDR_LSB, mc_vm_apt_default.low_part);\n\n\tREG_SET(DCN_VM_SYSTEM_APERTURE_LOW_ADDR_MSB, 0,\n\t\t\tMC_VM_SYSTEM_APERTURE_LOW_ADDR_MSB, mc_vm_apt_low.high_part);\n\tREG_SET(DCN_VM_SYSTEM_APERTURE_LOW_ADDR_LSB, 0,\n\t\t\tMC_VM_SYSTEM_APERTURE_LOW_ADDR_LSB, mc_vm_apt_low.low_part);\n\n\tREG_SET(DCN_VM_SYSTEM_APERTURE_HIGH_ADDR_MSB, 0,\n\t\t\tMC_VM_SYSTEM_APERTURE_HIGH_ADDR_MSB, mc_vm_apt_high.high_part);\n\tREG_SET(DCN_VM_SYSTEM_APERTURE_HIGH_ADDR_LSB, 0,\n\t\t\tMC_VM_SYSTEM_APERTURE_HIGH_ADDR_LSB, mc_vm_apt_high.low_part);\n}\n\nstatic void hubp1_set_vm_context0_settings(struct hubp *hubp,\n\t\tconst struct vm_context0_param *vm0)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\t \n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_BASE_ADDR_MSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_BASE_ADDR_MSB, vm0->pte_base.high_part);\n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_BASE_ADDR_LSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_BASE_ADDR_LSB, vm0->pte_base.low_part);\n\n\t \n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_START_ADDR_MSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_START_ADDR_MSB, vm0->pte_start.high_part);\n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_START_ADDR_LSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_START_ADDR_LSB, vm0->pte_start.low_part);\n\n\t \n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_END_ADDR_MSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_END_ADDR_MSB, vm0->pte_end.high_part);\n\tREG_SET(DCN_VM_CONTEXT0_PAGE_TABLE_END_ADDR_LSB, 0,\n\t\t\tVM_CONTEXT0_PAGE_TABLE_END_ADDR_LSB, vm0->pte_end.low_part);\n\n\t \n\tREG_SET_2(DCN_VM_CONTEXT0_PROTECTION_FAULT_DEFAULT_ADDR_MSB, 0,\n\t\t\tVM_CONTEXT0_PROTECTION_FAULT_DEFAULT_ADDR_MSB, vm0->fault_default.high_part,\n\t\t\tVM_CONTEXT0_PROTECTION_FAULT_DEFAULT_SYSTEM, context0_default_system);\n\tREG_SET(DCN_VM_CONTEXT0_PROTECTION_FAULT_DEFAULT_ADDR_LSB, 0,\n\t\t\tVM_CONTEXT0_PROTECTION_FAULT_DEFAULT_ADDR_LSB, vm0->fault_default.low_part);\n\n\t \n\tREG_SET_2(DCN_VM_MX_L1_TLB_CNTL, 0,\n\t\t\tENABLE_L1_TLB, 1,\n\t\t\tSYSTEM_ACCESS_MODE, 3);\n}\n\nvoid min_set_viewport(\n\tstruct hubp *hubp,\n\tconst struct rect *viewport,\n\tconst struct rect *viewport_c)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_SET_2(DCSURF_PRI_VIEWPORT_DIMENSION, 0,\n\t\t  PRI_VIEWPORT_WIDTH, viewport->width,\n\t\t  PRI_VIEWPORT_HEIGHT, viewport->height);\n\n\tREG_SET_2(DCSURF_PRI_VIEWPORT_START, 0,\n\t\t  PRI_VIEWPORT_X_START, viewport->x,\n\t\t  PRI_VIEWPORT_Y_START, viewport->y);\n\n\t \n\tREG_SET_2(DCSURF_SEC_VIEWPORT_DIMENSION, 0,\n\t\t  SEC_VIEWPORT_WIDTH, viewport->width,\n\t\t  SEC_VIEWPORT_HEIGHT, viewport->height);\n\n\tREG_SET_2(DCSURF_SEC_VIEWPORT_START, 0,\n\t\t  SEC_VIEWPORT_X_START, viewport->x,\n\t\t  SEC_VIEWPORT_Y_START, viewport->y);\n\n\t \n\tREG_SET_2(DCSURF_PRI_VIEWPORT_DIMENSION_C, 0,\n\t\t  PRI_VIEWPORT_WIDTH_C, viewport_c->width,\n\t\t  PRI_VIEWPORT_HEIGHT_C, viewport_c->height);\n\n\tREG_SET_2(DCSURF_PRI_VIEWPORT_START_C, 0,\n\t\t  PRI_VIEWPORT_X_START_C, viewport_c->x,\n\t\t  PRI_VIEWPORT_Y_START_C, viewport_c->y);\n\n\tREG_SET_2(DCSURF_SEC_VIEWPORT_DIMENSION_C, 0,\n\t\t  SEC_VIEWPORT_WIDTH_C, viewport_c->width,\n\t\t  SEC_VIEWPORT_HEIGHT_C, viewport_c->height);\n\n\tREG_SET_2(DCSURF_SEC_VIEWPORT_START_C, 0,\n\t\t  SEC_VIEWPORT_X_START_C, viewport_c->x,\n\t\t  SEC_VIEWPORT_Y_START_C, viewport_c->y);\n}\n\nvoid hubp1_read_state_common(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tstruct dcn_hubp_state *s = &hubp1->state;\n\tstruct _vcs_dpi_display_dlg_regs_st *dlg_attr = &s->dlg_attr;\n\tstruct _vcs_dpi_display_ttu_regs_st *ttu_attr = &s->ttu_attr;\n\tstruct _vcs_dpi_display_rq_regs_st *rq_regs = &s->rq_regs;\n\tuint32_t aperture_low_msb, aperture_low_lsb;\n\tuint32_t aperture_high_msb, aperture_high_lsb;\n\n\t \n\tREG_GET(HUBPRET_CONTROL,\n\t\t\tDET_BUF_PLANE1_BASE_ADDRESS, &rq_regs->plane1_base_address);\n\tREG_GET_4(DCN_EXPANSION_MODE,\n\t\t\tDRQ_EXPANSION_MODE, &rq_regs->drq_expansion_mode,\n\t\t\tPRQ_EXPANSION_MODE, &rq_regs->prq_expansion_mode,\n\t\t\tMRQ_EXPANSION_MODE, &rq_regs->mrq_expansion_mode,\n\t\t\tCRQ_EXPANSION_MODE, &rq_regs->crq_expansion_mode);\n\n\tREG_GET(DCN_VM_SYSTEM_APERTURE_LOW_ADDR_MSB,\n\t\t\tMC_VM_SYSTEM_APERTURE_LOW_ADDR_MSB, &aperture_low_msb);\n\n\tREG_GET(DCN_VM_SYSTEM_APERTURE_LOW_ADDR_LSB,\n\t\t\tMC_VM_SYSTEM_APERTURE_LOW_ADDR_LSB, &aperture_low_lsb);\n\n\tREG_GET(DCN_VM_SYSTEM_APERTURE_HIGH_ADDR_MSB,\n\t\t\tMC_VM_SYSTEM_APERTURE_HIGH_ADDR_MSB, &aperture_high_msb);\n\n\tREG_GET(DCN_VM_SYSTEM_APERTURE_HIGH_ADDR_LSB,\n\t\t\tMC_VM_SYSTEM_APERTURE_HIGH_ADDR_LSB, &aperture_high_lsb);\n\n\t\n\trq_regs->aperture_low_addr = (aperture_low_msb << 26) | (aperture_low_lsb >> 6);\n\trq_regs->aperture_high_addr = (aperture_high_msb << 26) | (aperture_high_lsb >> 6);\n\n\t \n\tREG_GET_2(BLANK_OFFSET_0,\n\t\tREFCYC_H_BLANK_END, &dlg_attr->refcyc_h_blank_end,\n\t\tDLG_V_BLANK_END, &dlg_attr->dlg_vblank_end);\n\n\tREG_GET(BLANK_OFFSET_1,\n\t\tMIN_DST_Y_NEXT_START, &dlg_attr->min_dst_y_next_start);\n\n\tREG_GET(DST_DIMENSIONS,\n\t\tREFCYC_PER_HTOTAL, &dlg_attr->refcyc_per_htotal);\n\n\tREG_GET_2(DST_AFTER_SCALER,\n\t\tREFCYC_X_AFTER_SCALER, &dlg_attr->refcyc_x_after_scaler,\n\t\tDST_Y_AFTER_SCALER, &dlg_attr->dst_y_after_scaler);\n\n\tif (REG(PREFETCH_SETTINS))\n\t\tREG_GET_2(PREFETCH_SETTINS,\n\t\t\tDST_Y_PREFETCH, &dlg_attr->dst_y_prefetch,\n\t\t\tVRATIO_PREFETCH, &dlg_attr->vratio_prefetch);\n\telse\n\t\tREG_GET_2(PREFETCH_SETTINGS,\n\t\t\tDST_Y_PREFETCH, &dlg_attr->dst_y_prefetch,\n\t\t\tVRATIO_PREFETCH, &dlg_attr->vratio_prefetch);\n\n\tREG_GET_2(VBLANK_PARAMETERS_0,\n\t\tDST_Y_PER_VM_VBLANK, &dlg_attr->dst_y_per_vm_vblank,\n\t\tDST_Y_PER_ROW_VBLANK, &dlg_attr->dst_y_per_row_vblank);\n\n\tREG_GET(REF_FREQ_TO_PIX_FREQ,\n\t\tREF_FREQ_TO_PIX_FREQ, &dlg_attr->ref_freq_to_pix_freq);\n\n\t \n\tREG_GET(VBLANK_PARAMETERS_1,\n\t\tREFCYC_PER_PTE_GROUP_VBLANK_L, &dlg_attr->refcyc_per_pte_group_vblank_l);\n\n\tREG_GET(VBLANK_PARAMETERS_3,\n\t\tREFCYC_PER_META_CHUNK_VBLANK_L, &dlg_attr->refcyc_per_meta_chunk_vblank_l);\n\n\tif (REG(NOM_PARAMETERS_0))\n\t\tREG_GET(NOM_PARAMETERS_0,\n\t\t\tDST_Y_PER_PTE_ROW_NOM_L, &dlg_attr->dst_y_per_pte_row_nom_l);\n\n\tif (REG(NOM_PARAMETERS_1))\n\t\tREG_GET(NOM_PARAMETERS_1,\n\t\t\tREFCYC_PER_PTE_GROUP_NOM_L, &dlg_attr->refcyc_per_pte_group_nom_l);\n\n\tREG_GET(NOM_PARAMETERS_4,\n\t\tDST_Y_PER_META_ROW_NOM_L, &dlg_attr->dst_y_per_meta_row_nom_l);\n\n\tREG_GET(NOM_PARAMETERS_5,\n\t\tREFCYC_PER_META_CHUNK_NOM_L, &dlg_attr->refcyc_per_meta_chunk_nom_l);\n\n\tREG_GET_2(PER_LINE_DELIVERY_PRE,\n\t\tREFCYC_PER_LINE_DELIVERY_PRE_L, &dlg_attr->refcyc_per_line_delivery_pre_l,\n\t\tREFCYC_PER_LINE_DELIVERY_PRE_C, &dlg_attr->refcyc_per_line_delivery_pre_c);\n\n\tREG_GET_2(PER_LINE_DELIVERY,\n\t\tREFCYC_PER_LINE_DELIVERY_L, &dlg_attr->refcyc_per_line_delivery_l,\n\t\tREFCYC_PER_LINE_DELIVERY_C, &dlg_attr->refcyc_per_line_delivery_c);\n\n\tif (REG(PREFETCH_SETTINS_C))\n\t\tREG_GET(PREFETCH_SETTINS_C,\n\t\t\tVRATIO_PREFETCH_C, &dlg_attr->vratio_prefetch_c);\n\telse\n\t\tREG_GET(PREFETCH_SETTINGS_C,\n\t\t\tVRATIO_PREFETCH_C, &dlg_attr->vratio_prefetch_c);\n\n\tREG_GET(VBLANK_PARAMETERS_2,\n\t\tREFCYC_PER_PTE_GROUP_VBLANK_C, &dlg_attr->refcyc_per_pte_group_vblank_c);\n\n\tREG_GET(VBLANK_PARAMETERS_4,\n\t\tREFCYC_PER_META_CHUNK_VBLANK_C, &dlg_attr->refcyc_per_meta_chunk_vblank_c);\n\n\tif (REG(NOM_PARAMETERS_2))\n\t\tREG_GET(NOM_PARAMETERS_2,\n\t\t\tDST_Y_PER_PTE_ROW_NOM_C, &dlg_attr->dst_y_per_pte_row_nom_c);\n\n\tif (REG(NOM_PARAMETERS_3))\n\t\tREG_GET(NOM_PARAMETERS_3,\n\t\t\tREFCYC_PER_PTE_GROUP_NOM_C, &dlg_attr->refcyc_per_pte_group_nom_c);\n\n\tREG_GET(NOM_PARAMETERS_6,\n\t\tDST_Y_PER_META_ROW_NOM_C, &dlg_attr->dst_y_per_meta_row_nom_c);\n\n\tREG_GET(NOM_PARAMETERS_7,\n\t\tREFCYC_PER_META_CHUNK_NOM_C, &dlg_attr->refcyc_per_meta_chunk_nom_c);\n\n\t \n\tREG_GET_2(DCN_TTU_QOS_WM,\n\t\tQoS_LEVEL_LOW_WM, &ttu_attr->qos_level_low_wm,\n\t\tQoS_LEVEL_HIGH_WM, &ttu_attr->qos_level_high_wm);\n\n\tREG_GET_2(DCN_GLOBAL_TTU_CNTL,\n\t\tMIN_TTU_VBLANK, &ttu_attr->min_ttu_vblank,\n\t\tQoS_LEVEL_FLIP, &ttu_attr->qos_level_flip);\n\n\t \n\t \n\n\tREG_GET_3(DCN_SURF0_TTU_CNTL0,\n\t\tREFCYC_PER_REQ_DELIVERY, &ttu_attr->refcyc_per_req_delivery_l,\n\t\tQoS_LEVEL_FIXED, &ttu_attr->qos_level_fixed_l,\n\t\tQoS_RAMP_DISABLE, &ttu_attr->qos_ramp_disable_l);\n\n\tREG_GET(DCN_SURF0_TTU_CNTL1,\n\t\tREFCYC_PER_REQ_DELIVERY_PRE,\n\t\t&ttu_attr->refcyc_per_req_delivery_pre_l);\n\n\tREG_GET_3(DCN_SURF1_TTU_CNTL0,\n\t\tREFCYC_PER_REQ_DELIVERY, &ttu_attr->refcyc_per_req_delivery_c,\n\t\tQoS_LEVEL_FIXED, &ttu_attr->qos_level_fixed_c,\n\t\tQoS_RAMP_DISABLE, &ttu_attr->qos_ramp_disable_c);\n\n\tREG_GET(DCN_SURF1_TTU_CNTL1,\n\t\tREFCYC_PER_REQ_DELIVERY_PRE,\n\t\t&ttu_attr->refcyc_per_req_delivery_pre_c);\n\n\t \n\tREG_GET(DCSURF_SURFACE_CONFIG,\n\t\t\tSURFACE_PIXEL_FORMAT, &s->pixel_format);\n\n\tREG_GET(DCSURF_SURFACE_EARLIEST_INUSE_HIGH,\n\t\t\tSURFACE_EARLIEST_INUSE_ADDRESS_HIGH, &s->inuse_addr_hi);\n\n\tREG_GET(DCSURF_SURFACE_EARLIEST_INUSE,\n\t\t\tSURFACE_EARLIEST_INUSE_ADDRESS, &s->inuse_addr_lo);\n\n\tREG_GET_2(DCSURF_PRI_VIEWPORT_DIMENSION,\n\t\t\tPRI_VIEWPORT_WIDTH, &s->viewport_width,\n\t\t\tPRI_VIEWPORT_HEIGHT, &s->viewport_height);\n\n\tREG_GET_2(DCSURF_SURFACE_CONFIG,\n\t\t\tROTATION_ANGLE, &s->rotation_angle,\n\t\t\tH_MIRROR_EN, &s->h_mirror_en);\n\n\tREG_GET(DCSURF_TILING_CONFIG,\n\t\t\tSW_MODE, &s->sw_mode);\n\n\tREG_GET(DCSURF_SURFACE_CONTROL,\n\t\t\tPRIMARY_SURFACE_DCC_EN, &s->dcc_en);\n\n\tREG_GET_3(DCHUBP_CNTL,\n\t\t\tHUBP_BLANK_EN, &s->blank_en,\n\t\t\tHUBP_TTU_DISABLE, &s->ttu_disable,\n\t\t\tHUBP_UNDERFLOW_STATUS, &s->underflow_status);\n\n\tREG_GET(HUBP_CLK_CNTL,\n\t\t\tHUBP_CLOCK_ENABLE, &s->clock_en);\n\n\tREG_GET(DCN_GLOBAL_TTU_CNTL,\n\t\t\tMIN_TTU_VBLANK, &s->min_ttu_vblank);\n\n\tREG_GET_2(DCN_TTU_QOS_WM,\n\t\t\tQoS_LEVEL_LOW_WM, &s->qos_level_low_wm,\n\t\t\tQoS_LEVEL_HIGH_WM, &s->qos_level_high_wm);\n\n\tREG_GET(DCSURF_PRIMARY_SURFACE_ADDRESS,\n\t\t\tPRIMARY_SURFACE_ADDRESS, &s->primary_surface_addr_lo);\n\n\tREG_GET(DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH,\n\t\t\tPRIMARY_SURFACE_ADDRESS, &s->primary_surface_addr_hi);\n\n\tREG_GET(DCSURF_PRIMARY_META_SURFACE_ADDRESS,\n\t\t\tPRIMARY_META_SURFACE_ADDRESS, &s->primary_meta_addr_lo);\n\n\tREG_GET(DCSURF_PRIMARY_META_SURFACE_ADDRESS_HIGH,\n\t\t\tPRIMARY_META_SURFACE_ADDRESS, &s->primary_meta_addr_hi);\n}\n\nvoid hubp1_read_state(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tstruct dcn_hubp_state *s = &hubp1->state;\n\tstruct _vcs_dpi_display_rq_regs_st *rq_regs = &s->rq_regs;\n\n\thubp1_read_state_common(hubp);\n\n\tREG_GET_8(DCHUBP_REQ_SIZE_CONFIG,\n\t\tCHUNK_SIZE, &rq_regs->rq_regs_l.chunk_size,\n\t\tMIN_CHUNK_SIZE, &rq_regs->rq_regs_l.min_chunk_size,\n\t\tMETA_CHUNK_SIZE, &rq_regs->rq_regs_l.meta_chunk_size,\n\t\tMIN_META_CHUNK_SIZE, &rq_regs->rq_regs_l.min_meta_chunk_size,\n\t\tDPTE_GROUP_SIZE, &rq_regs->rq_regs_l.dpte_group_size,\n\t\tMPTE_GROUP_SIZE, &rq_regs->rq_regs_l.mpte_group_size,\n\t\tSWATH_HEIGHT, &rq_regs->rq_regs_l.swath_height,\n\t\tPTE_ROW_HEIGHT_LINEAR, &rq_regs->rq_regs_l.pte_row_height_linear);\n\n\tREG_GET_8(DCHUBP_REQ_SIZE_CONFIG_C,\n\t\tCHUNK_SIZE_C, &rq_regs->rq_regs_c.chunk_size,\n\t\tMIN_CHUNK_SIZE_C, &rq_regs->rq_regs_c.min_chunk_size,\n\t\tMETA_CHUNK_SIZE_C, &rq_regs->rq_regs_c.meta_chunk_size,\n\t\tMIN_META_CHUNK_SIZE_C, &rq_regs->rq_regs_c.min_meta_chunk_size,\n\t\tDPTE_GROUP_SIZE_C, &rq_regs->rq_regs_c.dpte_group_size,\n\t\tMPTE_GROUP_SIZE_C, &rq_regs->rq_regs_c.mpte_group_size,\n\t\tSWATH_HEIGHT_C, &rq_regs->rq_regs_c.swath_height,\n\t\tPTE_ROW_HEIGHT_LINEAR_C, &rq_regs->rq_regs_c.pte_row_height_linear);\n\n}\nenum cursor_pitch hubp1_get_cursor_pitch(unsigned int pitch)\n{\n\tenum cursor_pitch hw_pitch;\n\n\tswitch (pitch) {\n\tcase 64:\n\t\thw_pitch = CURSOR_PITCH_64_PIXELS;\n\t\tbreak;\n\tcase 128:\n\t\thw_pitch = CURSOR_PITCH_128_PIXELS;\n\t\tbreak;\n\tcase 256:\n\t\thw_pitch = CURSOR_PITCH_256_PIXELS;\n\t\tbreak;\n\tdefault:\n\t\tDC_ERR(\"Invalid cursor pitch of %d. \"\n\t\t\t\t\"Only 64/128/256 is supported on DCN.\\n\", pitch);\n\t\thw_pitch = CURSOR_PITCH_64_PIXELS;\n\t\tbreak;\n\t}\n\treturn hw_pitch;\n}\n\nstatic enum cursor_lines_per_chunk hubp1_get_lines_per_chunk(\n\t\tunsigned int cur_width,\n\t\tenum dc_cursor_color_format format)\n{\n\tenum cursor_lines_per_chunk line_per_chunk;\n\n\tif (format == CURSOR_MODE_MONO)\n\t\t \n\t\tline_per_chunk = CURSOR_LINE_PER_CHUNK_16;\n\telse if (cur_width <= 32)\n\t\tline_per_chunk = CURSOR_LINE_PER_CHUNK_16;\n\telse if (cur_width <= 64)\n\t\tline_per_chunk = CURSOR_LINE_PER_CHUNK_8;\n\telse if (cur_width <= 128)\n\t\tline_per_chunk = CURSOR_LINE_PER_CHUNK_4;\n\telse\n\t\tline_per_chunk = CURSOR_LINE_PER_CHUNK_2;\n\n\treturn line_per_chunk;\n}\n\nvoid hubp1_cursor_set_attributes(\n\t\tstruct hubp *hubp,\n\t\tconst struct dc_cursor_attributes *attr)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tenum cursor_pitch hw_pitch = hubp1_get_cursor_pitch(attr->pitch);\n\tenum cursor_lines_per_chunk lpc = hubp1_get_lines_per_chunk(\n\t\t\tattr->width, attr->color_format);\n\n\thubp->curs_attr = *attr;\n\n\tREG_UPDATE(CURSOR_SURFACE_ADDRESS_HIGH,\n\t\t\tCURSOR_SURFACE_ADDRESS_HIGH, attr->address.high_part);\n\tREG_UPDATE(CURSOR_SURFACE_ADDRESS,\n\t\t\tCURSOR_SURFACE_ADDRESS, attr->address.low_part);\n\n\tREG_UPDATE_2(CURSOR_SIZE,\n\t\t\tCURSOR_WIDTH, attr->width,\n\t\t\tCURSOR_HEIGHT, attr->height);\n\n\tREG_UPDATE_3(CURSOR_CONTROL,\n\t\t\tCURSOR_MODE, attr->color_format,\n\t\t\tCURSOR_PITCH, hw_pitch,\n\t\t\tCURSOR_LINES_PER_CHUNK, lpc);\n\n\tREG_SET_2(CURSOR_SETTINS, 0,\n\t\t\t \n\t\t\tCURSOR0_DST_Y_OFFSET, 0,\n\t\t\t  \n\t\t\tCURSOR0_CHUNK_HDL_ADJUST, 3);\n}\n\nvoid hubp1_cursor_set_position(\n\t\tstruct hubp *hubp,\n\t\tconst struct dc_cursor_position *pos,\n\t\tconst struct dc_cursor_mi_param *param)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tint x_pos = pos->x - param->viewport.x;\n\tint y_pos = pos->y - param->viewport.y;\n\tint x_hotspot = pos->x_hotspot;\n\tint y_hotspot = pos->y_hotspot;\n\tint src_x_offset = x_pos - pos->x_hotspot;\n\tint src_y_offset = y_pos - pos->y_hotspot;\n\tint cursor_height = (int)hubp->curs_attr.height;\n\tint cursor_width = (int)hubp->curs_attr.width;\n\tuint32_t dst_x_offset;\n\tuint32_t cur_en = pos->enable ? 1 : 0;\n\n\thubp->curs_pos = *pos;\n\n\t \n\tif (hubp->curs_attr.address.quad_part == 0)\n\t\treturn;\n\n\t\n\tif (param->rotation == ROTATION_ANGLE_90 || param->rotation == ROTATION_ANGLE_270) {\n\t\tswap(cursor_height, cursor_width);\n\t\tswap(x_hotspot, y_hotspot);\n\n\t\tif (param->rotation == ROTATION_ANGLE_90) {\n\t\t\t\n\t\t\tsrc_x_offset = x_pos - (cursor_width - x_hotspot);\n\t\t\tsrc_y_offset = y_pos - y_hotspot;\n\t\t} else if (param->rotation == ROTATION_ANGLE_270) {\n\t\t\t\n\t\t\tsrc_x_offset = x_pos - x_hotspot;\n\t\t\tsrc_y_offset = y_pos - (cursor_height - y_hotspot);\n\t\t}\n\t} else if (param->rotation == ROTATION_ANGLE_180) {\n\t\t\n\t\tif (!param->mirror)\n\t\t\tsrc_x_offset = x_pos - (cursor_width - x_hotspot);\n\n\t\tsrc_y_offset = y_pos - (cursor_height - y_hotspot);\n\t}\n\n\tdst_x_offset = (src_x_offset >= 0) ? src_x_offset : 0;\n\tdst_x_offset *= param->ref_clk_khz;\n\tdst_x_offset /= param->pixel_clk_khz;\n\n\tASSERT(param->h_scale_ratio.value);\n\n\tif (param->h_scale_ratio.value)\n\t\tdst_x_offset = dc_fixpt_floor(dc_fixpt_div(\n\t\t\t\tdc_fixpt_from_int(dst_x_offset),\n\t\t\t\tparam->h_scale_ratio));\n\n\tif (src_x_offset >= (int)param->viewport.width)\n\t\tcur_en = 0;   \n\n\tif (src_x_offset + cursor_width <= 0)\n\t\tcur_en = 0;   \n\n\tif (src_y_offset >= (int)param->viewport.height)\n\t\tcur_en = 0;   \n\n\tif (src_y_offset + cursor_height <= 0)\n\t\tcur_en = 0;   \n\n\tif (cur_en && REG_READ(CURSOR_SURFACE_ADDRESS) == 0)\n\t\thubp->funcs->set_cursor_attributes(hubp, &hubp->curs_attr);\n\n\tREG_UPDATE(CURSOR_CONTROL,\n\t\t\tCURSOR_ENABLE, cur_en);\n\n\tREG_SET_2(CURSOR_POSITION, 0,\n\t\t\tCURSOR_X_POSITION, pos->x,\n\t\t\tCURSOR_Y_POSITION, pos->y);\n\n\tREG_SET_2(CURSOR_HOT_SPOT, 0,\n\t\t\tCURSOR_HOT_SPOT_X, pos->x_hotspot,\n\t\t\tCURSOR_HOT_SPOT_Y, pos->y_hotspot);\n\n\tREG_SET(CURSOR_DST_OFFSET, 0,\n\t\t\tCURSOR_DST_X_OFFSET, dst_x_offset);\n\t \n}\n\n \nvoid hubp1_clk_cntl(struct hubp *hubp, bool enable)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\tuint32_t clk_enable = enable ? 1 : 0;\n\n\tREG_UPDATE(HUBP_CLK_CNTL, HUBP_CLOCK_ENABLE, clk_enable);\n}\n\nvoid hubp1_vtg_sel(struct hubp *hubp, uint32_t otg_inst)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_VTG_SEL, otg_inst);\n}\n\nbool hubp1_in_blank(struct hubp *hubp)\n{\n\tuint32_t in_blank;\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_GET(DCHUBP_CNTL, HUBP_IN_BLANK, &in_blank);\n\treturn in_blank ? true : false;\n}\n\nvoid hubp1_soft_reset(struct hubp *hubp, bool reset)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(DCHUBP_CNTL, HUBP_DISABLE, reset ? 1 : 0);\n}\n\n \nvoid hubp1_set_flip_int(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_UPDATE(DCSURF_SURFACE_FLIP_INTERRUPT,\n\t\tSURFACE_FLIP_INT_MASK, 1);\n\n\treturn;\n}\n\n \nstatic void hubp1_wait_pipe_read_start(struct hubp *hubp)\n{\n\tstruct dcn10_hubp *hubp1 = TO_DCN10_HUBP(hubp);\n\n\tREG_WAIT(HUBPRET_READ_LINE_STATUS,\n\t\tPIPE_READ_VBLANK, 0,\n\t\t 1, 1000);\n}\n\nvoid hubp1_init(struct hubp *hubp)\n{\n\t\n}\nstatic const struct hubp_funcs dcn10_hubp_funcs = {\n\t.hubp_program_surface_flip_and_addr =\n\t\t\thubp1_program_surface_flip_and_addr,\n\t.hubp_program_surface_config =\n\t\t\thubp1_program_surface_config,\n\t.hubp_is_flip_pending = hubp1_is_flip_pending,\n\t.hubp_setup = hubp1_setup,\n\t.hubp_setup_interdependent = hubp1_setup_interdependent,\n\t.hubp_set_vm_system_aperture_settings = hubp1_set_vm_system_aperture_settings,\n\t.hubp_set_vm_context0_settings = hubp1_set_vm_context0_settings,\n\t.set_blank = hubp1_set_blank,\n\t.dcc_control = hubp1_dcc_control,\n\t.mem_program_viewport = min_set_viewport,\n\t.set_hubp_blank_en = hubp1_set_hubp_blank_en,\n\t.set_cursor_attributes\t= hubp1_cursor_set_attributes,\n\t.set_cursor_position\t= hubp1_cursor_set_position,\n\t.hubp_disconnect = hubp1_disconnect,\n\t.hubp_clk_cntl = hubp1_clk_cntl,\n\t.hubp_vtg_sel = hubp1_vtg_sel,\n\t.hubp_read_state = hubp1_read_state,\n\t.hubp_clear_underflow = hubp1_clear_underflow,\n\t.hubp_disable_control =  hubp1_disable_control,\n\t.hubp_get_underflow_status = hubp1_get_underflow_status,\n\t.hubp_init = hubp1_init,\n\n\t.dmdata_set_attributes = NULL,\n\t.dmdata_load = NULL,\n\t.hubp_soft_reset = hubp1_soft_reset,\n\t.hubp_in_blank = hubp1_in_blank,\n\t.hubp_set_flip_int = hubp1_set_flip_int,\n\t.hubp_wait_pipe_read_start = hubp1_wait_pipe_read_start,\n};\n\n \n \n \n\nvoid dcn10_hubp_construct(\n\tstruct dcn10_hubp *hubp1,\n\tstruct dc_context *ctx,\n\tuint32_t inst,\n\tconst struct dcn_mi_registers *hubp_regs,\n\tconst struct dcn_mi_shift *hubp_shift,\n\tconst struct dcn_mi_mask *hubp_mask)\n{\n\thubp1->base.funcs = &dcn10_hubp_funcs;\n\thubp1->base.ctx = ctx;\n\thubp1->hubp_regs = hubp_regs;\n\thubp1->hubp_shift = hubp_shift;\n\thubp1->hubp_mask = hubp_mask;\n\thubp1->base.inst = inst;\n\thubp1->base.opp_id = OPP_ID_INVALID;\n\thubp1->base.mpcc_id = 0xf;\n}\n\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}