{
  "module_name": "dc_stream.h",
  "hash_id": "c78dac4e4191e5e881b7ed38026e874645831a915fb1a52cf49761bc1102b45b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/dc_stream.h",
  "human_readable_source": " \n\n#ifndef DC_STREAM_H_\n#define DC_STREAM_H_\n\n#include \"dc_types.h\"\n#include \"grph_object_defs.h\"\n\n \nstruct timing_sync_info {\n\tint group_id;\n\tint group_size;\n\tbool master;\n};\n\nstruct dc_stream_status {\n\tint primary_otg_inst;\n\tint stream_enc_inst;\n\n\t \n\tint plane_count;\n\tint audio_inst;\n\tstruct timing_sync_info timing_sync_info;\n\tstruct dc_plane_state *plane_states[MAX_SURFACE_NUM];\n\tbool is_abm_supported;\n};\n\nenum hubp_dmdata_mode {\n\tDMDATA_SW_MODE,\n\tDMDATA_HW_MODE\n};\n\nstruct dc_dmdata_attributes {\n\t \n\tenum hubp_dmdata_mode dmdata_mode;\n\t \n\tbool dmdata_repeat;\n\t \n\tuint32_t dmdata_size;\n\t \n\tbool dmdata_updated;\n\t \n\tPHYSICAL_ADDRESS_LOC address;\n\t \n\tbool dmdata_qos_mode;\n\t \n\tuint32_t dmdata_qos_level;\n\t \n\tuint32_t dmdata_dl_delta;\n\t \n\tuint32_t *dmdata_sw_data;\n};\n\nstruct dc_writeback_info {\n\tbool wb_enabled;\n\tint dwb_pipe_inst;\n\tstruct dc_dwb_params dwb_params;\n\tstruct mcif_buf_params mcif_buf_params;\n\tstruct mcif_warmup_params mcif_warmup_params;\n\t \n\tstruct dc_plane_state *writeback_source_plane;\n\t \n\tint mpcc_inst;\n};\n\nstruct dc_writeback_update {\n\tunsigned int num_wb_info;\n\tstruct dc_writeback_info writeback_info[MAX_DWB_PIPES];\n};\n\nenum vertical_interrupt_ref_point {\n\tSTART_V_UPDATE = 0,\n\tSTART_V_SYNC,\n\tINVALID_POINT\n\n\t\n\t\n\t\n};\n\nstruct periodic_interrupt_config {\n\tenum vertical_interrupt_ref_point ref_point;\n\tint lines_offset;\n};\n\nstruct dc_mst_stream_bw_update {\n\tbool is_increase; \n\tuint32_t mst_stream_bw; \n};\n\nunion stream_update_flags {\n\tstruct {\n\t\tuint32_t scaling:1;\n\t\tuint32_t out_tf:1;\n\t\tuint32_t out_csc:1;\n\t\tuint32_t abm_level:1;\n\t\tuint32_t dpms_off:1;\n\t\tuint32_t gamut_remap:1;\n\t\tuint32_t wb_update:1;\n\t\tuint32_t dsc_changed : 1;\n\t\tuint32_t mst_bw : 1;\n\t\tuint32_t crtc_timing_adjust : 1;\n\t\tuint32_t fams_changed : 1;\n\t} bits;\n\n\tuint32_t raw;\n};\n\nstruct test_pattern {\n\tenum dp_test_pattern type;\n\tenum dp_test_pattern_color_space color_space;\n\tstruct link_training_settings const *p_link_settings;\n\tunsigned char const *p_custom_pattern;\n\tunsigned int cust_pattern_size;\n};\n\n#define SUBVP_DRR_MARGIN_US 100 \n\nenum mall_stream_type {\n\tSUBVP_NONE, \n\tSUBVP_MAIN, \n\tSUBVP_PHANTOM, \n};\n\nstruct mall_stream_config {\n\t \n\tenum mall_stream_type type;\n\tstruct dc_stream_state *paired_stream;\t\n};\n\n \nstruct mall_temp_config {\n\tstruct mall_stream_config mall_stream_config[MAX_PIPES];\n\tbool is_phantom_plane[MAX_PIPES];\n};\n\nstruct dc_stream_debug_options {\n\tchar force_odm_combine_segments;\n};\n\nstruct dc_stream_state {\n\t\n\t\n\tstruct dc_sink *sink;\n\n\tstruct dc_link *link;\n\t \n\tstruct link_encoder *link_enc;\n\tstruct dc_stream_debug_options debug;\n\tstruct dc_panel_patch sink_patches;\n\tunion display_content_support content_support;\n\tstruct dc_crtc_timing timing;\n\tstruct dc_crtc_timing_adjust adjust;\n\tstruct dc_info_packet vrr_infopacket;\n\tstruct dc_info_packet vsc_infopacket;\n\tstruct dc_info_packet vsp_infopacket;\n\tstruct dc_info_packet hfvsif_infopacket;\n\tstruct dc_info_packet vtem_infopacket;\n\tstruct dc_info_packet adaptive_sync_infopacket;\n\tuint8_t dsc_packed_pps[128];\n\tstruct rect src;  \n\tstruct rect dst;  \n\n\tstruct audio_info audio_info;\n\n\tstruct dc_info_packet hdr_static_metadata;\n\tPHYSICAL_ADDRESS_LOC dmdata_address;\n\tbool   use_dynamic_meta;\n\n\tstruct dc_transfer_func *out_transfer_func;\n\tstruct colorspace_transform gamut_remap_matrix;\n\tstruct dc_csc_transform csc_color_matrix;\n\n\tenum dc_color_space output_color_space;\n\tenum dc_dither_option dither_option;\n\n\tenum view_3d_format view_format;\n\n\tbool use_vsc_sdp_for_colorimetry;\n\tbool ignore_msa_timing_param;\n\n\t \n\tbool allow_freesync;\n\n\t \n\tbool vrr_active_variable;\n\tbool freesync_on_desktop;\n\tbool vrr_active_fixed;\n\n\tbool converter_disable_audio;\n\tuint8_t qs_bit;\n\tuint8_t qy_bit;\n\n\t \n\t \n\t \n\n\t \n\tunsigned int abm_level;\n\n\tstruct periodic_interrupt_config periodic_interrupt;\n\n\t \n\tstruct dc_context *ctx;\n\n\t \n\tstruct bit_depth_reduction_params bit_depth_params;\n\tstruct clamping_and_pixel_encoding_params clamping;\n\n\tint phy_pix_clk;\n\tenum signal_type signal;\n\tbool dpms_off;\n\n\tvoid *dm_stream_context;\n\n\tstruct dc_cursor_attributes cursor_attributes;\n\tstruct dc_cursor_position cursor_position;\n\tuint32_t sdr_white_level; \n\n\t \n\tstruct kref refcount;\n\n\tstruct crtc_trigger_info triggered_crtc_reset;\n\n\t \n\tunsigned int num_wb_info;\n\tstruct dc_writeback_info writeback_info[MAX_DWB_PIPES];\n\tconst struct dc_transfer_func *func_shaper;\n\tconst struct dc_3dlut *lut3d_func;\n\t \n\tbool mode_changed : 1;\n\n\t \n\tstruct {\n\t\t\n\t\t\n\t\tuint8_t otg_offset;\n\t} out;\n\n\tbool apply_edp_fast_boot_optimization;\n\tbool apply_seamless_boot_optimization;\n\tuint32_t apply_boot_odm_mode;\n\n\tuint32_t stream_id;\n\n\tstruct test_pattern test_pattern;\n\tunion stream_update_flags update_flags;\n\n\tbool has_non_synchronizable_pclk;\n\tbool vblank_synchronized;\n\tbool fpo_in_use;\n\tstruct mall_stream_config mall_stream_config;\n};\n\n#define ABM_LEVEL_IMMEDIATE_DISABLE 255\n\nstruct dc_stream_update {\n\tstruct dc_stream_state *stream;\n\n\tstruct rect src;\n\tstruct rect dst;\n\tstruct dc_transfer_func *out_transfer_func;\n\tstruct dc_info_packet *hdr_static_metadata;\n\tunsigned int *abm_level;\n\n\tstruct periodic_interrupt_config *periodic_interrupt;\n\n\tstruct dc_info_packet *vrr_infopacket;\n\tstruct dc_info_packet *vsc_infopacket;\n\tstruct dc_info_packet *vsp_infopacket;\n\tstruct dc_info_packet *hfvsif_infopacket;\n\tstruct dc_info_packet *vtem_infopacket;\n\tstruct dc_info_packet *adaptive_sync_infopacket;\n\tbool *dpms_off;\n\tbool integer_scaling_update;\n\tbool *allow_freesync;\n\tbool *vrr_active_variable;\n\tbool *vrr_active_fixed;\n\n\tstruct colorspace_transform *gamut_remap;\n\tenum dc_color_space *output_color_space;\n\tenum dc_dither_option *dither_option;\n\n\tstruct dc_csc_transform *output_csc_transform;\n\n\tstruct dc_writeback_update *wb_update;\n\tstruct dc_dsc_config *dsc_config;\n\tstruct dc_mst_stream_bw_update *mst_bw_update;\n\tstruct dc_transfer_func *func_shaper;\n\tstruct dc_3dlut *lut3d_func;\n\n\tstruct test_pattern *pending_test_pattern;\n\tstruct dc_crtc_timing_adjust *crtc_timing_adjust;\n};\n\nbool dc_is_stream_unchanged(\n\tstruct dc_stream_state *old_stream, struct dc_stream_state *stream);\nbool dc_is_stream_scaling_unchanged(\n\tstruct dc_stream_state *old_stream, struct dc_stream_state *stream);\n\n \nbool dc_update_planes_and_stream(struct dc *dc,\n\t\tstruct dc_surface_update *surface_updates, int surface_count,\n\t\tstruct dc_stream_state *dc_stream,\n\t\tstruct dc_stream_update *stream_update);\n\n \nvoid dc_commit_updates_for_stream(struct dc *dc,\n\t\tstruct dc_surface_update *srf_updates,\n\t\tint surface_count,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_stream_update *stream_update,\n\t\tstruct dc_state *state);\n \nvoid dc_stream_log(const struct dc *dc, const struct dc_stream_state *stream);\n\nuint8_t dc_get_current_stream_count(struct dc *dc);\nstruct dc_stream_state *dc_get_stream_at_index(struct dc *dc, uint8_t i);\n\n \nuint32_t dc_stream_get_vblank_counter(const struct dc_stream_state *stream);\n\n \nbool dc_stream_send_dp_sdp(const struct dc_stream_state *stream,\n\t\tconst uint8_t *custom_sdp_message,\n\t\tunsigned int sdp_message_size);\n\n \nbool dc_stream_get_scanoutpos(const struct dc_stream_state *stream,\n\t\t\t\t  uint32_t *v_blank_start,\n\t\t\t\t  uint32_t *v_blank_end,\n\t\t\t\t  uint32_t *h_position,\n\t\t\t\t  uint32_t *v_position);\n\nenum dc_status dc_add_stream_to_ctx(\n\t\t\tstruct dc *dc,\n\t\tstruct dc_state *new_ctx,\n\t\tstruct dc_stream_state *stream);\n\nenum dc_status dc_remove_stream_from_ctx(\n\t\tstruct dc *dc,\n\t\t\tstruct dc_state *new_ctx,\n\t\t\tstruct dc_stream_state *stream);\n\n\nbool dc_add_plane_to_context(\n\t\tconst struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_plane_state *plane_state,\n\t\tstruct dc_state *context);\n\nbool dc_remove_plane_from_context(\n\t\tconst struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_plane_state *plane_state,\n\t\tstruct dc_state *context);\n\nbool dc_rem_all_planes_for_stream(\n\t\tconst struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_state *context);\n\nbool dc_add_all_planes_for_stream(\n\t\tconst struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_plane_state * const *plane_states,\n\t\tint plane_count,\n\t\tstruct dc_state *context);\n\nbool dc_stream_add_writeback(struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_writeback_info *wb_info);\n\nbool dc_stream_remove_writeback(struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tuint32_t dwb_pipe_inst);\n\nenum dc_status dc_stream_add_dsc_to_resource(struct dc *dc,\n\t\tstruct dc_state *state,\n\t\tstruct dc_stream_state *stream);\n\nbool dc_stream_warmup_writeback(struct dc *dc,\n\t\tint num_dwb,\n\t\tstruct dc_writeback_info *wb_info);\n\nbool dc_stream_dmdata_status_done(struct dc *dc, struct dc_stream_state *stream);\n\nbool dc_stream_set_dynamic_metadata(struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tstruct dc_dmdata_attributes *dmdata_attr);\n\nenum dc_status dc_validate_stream(struct dc *dc, struct dc_stream_state *stream);\n\n \n \nvoid dc_enable_stereo(\n\tstruct dc *dc,\n\tstruct dc_state *context,\n\tstruct dc_stream_state *streams[],\n\tuint8_t stream_count);\n\n \nvoid dc_trigger_sync(struct dc *dc, struct dc_state *context);\n\nenum surface_update_type dc_check_update_surfaces_for_stream(\n\t\tstruct dc *dc,\n\t\tstruct dc_surface_update *updates,\n\t\tint surface_count,\n\t\tstruct dc_stream_update *stream_update,\n\t\tconst struct dc_stream_status *stream_status);\n\n \nstruct dc_stream_state *dc_create_stream_for_sink(struct dc_sink *dc_sink);\n\nstruct dc_stream_state *dc_copy_stream(const struct dc_stream_state *stream);\n\nvoid update_stream_signal(struct dc_stream_state *stream, struct dc_sink *sink);\n\nvoid dc_stream_retain(struct dc_stream_state *dc_stream);\nvoid dc_stream_release(struct dc_stream_state *dc_stream);\n\nstruct dc_stream_status *dc_stream_get_status_from_state(\n\tstruct dc_state *state,\n\tstruct dc_stream_state *stream);\nstruct dc_stream_status *dc_stream_get_status(\n\tstruct dc_stream_state *dc_stream);\n\n#ifndef TRIM_FSFT\nbool dc_optimize_timing_for_fsft(\n\tstruct dc_stream_state *pStream,\n\tunsigned int max_input_rate_in_khz);\n#endif\n\n \n \nbool dc_stream_set_cursor_attributes(\n\tstruct dc_stream_state *stream,\n\tconst struct dc_cursor_attributes *attributes);\n\nbool dc_stream_set_cursor_position(\n\tstruct dc_stream_state *stream,\n\tconst struct dc_cursor_position *position);\n\n\nbool dc_stream_adjust_vmin_vmax(struct dc *dc,\n\t\t\t\tstruct dc_stream_state *stream,\n\t\t\t\tstruct dc_crtc_timing_adjust *adjust);\n\nbool dc_stream_get_last_used_drr_vtotal(struct dc *dc,\n\t\tstruct dc_stream_state *stream,\n\t\tuint32_t *refresh_rate);\n\nbool dc_stream_get_crtc_position(struct dc *dc,\n\t\t\t\t struct dc_stream_state **stream,\n\t\t\t\t int num_streams,\n\t\t\t\t unsigned int *v_pos,\n\t\t\t\t unsigned int *nom_v_pos);\n\n#if defined(CONFIG_DRM_AMD_SECURE_DISPLAY)\nbool dc_stream_forward_crc_window(struct dc_stream_state *stream,\n\t\tstruct rect *rect,\n\t\tbool is_stop);\n#endif\n\nbool dc_stream_configure_crc(struct dc *dc,\n\t\t\t     struct dc_stream_state *stream,\n\t\t\t     struct crc_params *crc_window,\n\t\t\t     bool enable,\n\t\t\t     bool continuous);\n\nbool dc_stream_get_crc(struct dc *dc,\n\t\t       struct dc_stream_state *stream,\n\t\t       uint32_t *r_cr,\n\t\t       uint32_t *g_y,\n\t\t       uint32_t *b_cb);\n\nvoid dc_stream_set_static_screen_params(struct dc *dc,\n\t\t\t\t\tstruct dc_stream_state **stream,\n\t\t\t\t\tint num_streams,\n\t\t\t\t\tconst struct dc_static_screen_params *params);\n\nvoid dc_stream_set_dyn_expansion(struct dc *dc, struct dc_stream_state *stream,\n\t\tenum dc_dynamic_expansion option);\n\nvoid dc_stream_set_dither_option(struct dc_stream_state *stream,\n\t\t\t\t enum dc_dither_option option);\n\nbool dc_stream_set_gamut_remap(struct dc *dc,\n\t\t\t       const struct dc_stream_state *stream);\n\nbool dc_stream_program_csc_matrix(struct dc *dc,\n\t\t\t\t  struct dc_stream_state *stream);\n\nbool dc_stream_get_crtc_position(struct dc *dc,\n\t\t\t\t struct dc_stream_state **stream,\n\t\t\t\t int num_streams,\n\t\t\t\t unsigned int *v_pos,\n\t\t\t\t unsigned int *nom_v_pos);\n\nstruct pipe_ctx *dc_stream_get_pipe_ctx(struct dc_stream_state *stream);\n\nvoid dc_dmub_update_dirty_rect(struct dc *dc,\n\t\t\t       int surface_count,\n\t\t\t       struct dc_stream_state *stream,\n\t\t\t       struct dc_surface_update *srf_updates,\n\t\t\t       struct dc_state *context);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}