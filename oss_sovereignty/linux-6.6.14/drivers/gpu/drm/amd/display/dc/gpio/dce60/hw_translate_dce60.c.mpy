{
  "module_name": "hw_translate_dce60.c",
  "hash_id": "6156f271713e2fc8f38ef35dbf8d27432e3ecfd3199417ce697e73a24982e6a7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/gpio/dce60/hw_translate_dce60.c",
  "human_readable_source": " \n\n#include \"dm_services.h\"\n\n \n#include \"include/gpio_types.h\"\n#include \"../hw_translate.h\"\n\n#include \"hw_translate_dce60.h\"\n\n#include \"dce/dce_6_0_d.h\"\n#include \"dce/dce_6_0_sh_mask.h\"\n#include \"smu/smu_6_0_d.h\"\n\n \nstatic uint32_t index_from_vector(\n\tuint32_t vector)\n{\n\tuint32_t result = 0;\n\tuint32_t mask = 1;\n\n\tdo {\n\t\tif (vector == mask)\n\t\t\treturn result;\n\n\t\t++result;\n\t\tmask <<= 1;\n\t} while (mask);\n\n\tBREAK_TO_DEBUGGER();\n\n\treturn GPIO_ENUM_UNKNOWN;\n}\n\nstatic bool offset_to_id(\n\tuint32_t offset,\n\tuint32_t mask,\n\tenum gpio_id *id,\n\tuint32_t *en)\n{\n\tswitch (offset) {\n\t \n\tcase mmDC_GPIO_GENERIC_A:\n\t\t*id = GPIO_ID_GENERIC;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICA_A_MASK:\n\t\t\t*en = GPIO_GENERIC_A;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICB_A_MASK:\n\t\t\t*en = GPIO_GENERIC_B;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICC_A_MASK:\n\t\t\t*en = GPIO_GENERIC_C;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICD_A_MASK:\n\t\t\t*en = GPIO_GENERIC_D;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICE_A_MASK:\n\t\t\t*en = GPIO_GENERIC_E;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICF_A_MASK:\n\t\t\t*en = GPIO_GENERIC_F;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENERIC_A__DC_GPIO_GENERICG_A_MASK:\n\t\t\t*en = GPIO_GENERIC_G;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase mmDC_GPIO_HPD_A:\n\t\t*id = GPIO_ID_HPD;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD1_A_MASK:\n\t\t\t*en = GPIO_HPD_1;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD2_A_MASK:\n\t\t\t*en = GPIO_HPD_2;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD3_A_MASK:\n\t\t\t*en = GPIO_HPD_3;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD4_A_MASK:\n\t\t\t*en = GPIO_HPD_4;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD5_A_MASK:\n\t\t\t*en = GPIO_HPD_5;\n\t\t\treturn true;\n\t\tcase DC_GPIO_HPD_A__DC_GPIO_HPD6_A_MASK:\n\t\t\t*en = GPIO_HPD_6;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase mmDC_GPIO_SYNCA_A:\n\t\t*id = GPIO_ID_SYNC;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_SYNCA_A__DC_GPIO_HSYNCA_A_MASK:\n\t\t\t*en = GPIO_SYNC_HSYNC_A;\n\t\t\treturn true;\n\t\tcase DC_GPIO_SYNCA_A__DC_GPIO_VSYNCA_A_MASK:\n\t\t\t*en = GPIO_SYNC_VSYNC_A;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase mmDC_GPIO_GENLK_A:\n\t\t*id = GPIO_ID_GSL;\n\t\tswitch (mask) {\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_GENLK_CLK_A_MASK:\n\t\t\t*en = GPIO_GSL_GENLOCK_CLOCK;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_GENLK_VSYNC_A_MASK:\n\t\t\t*en = GPIO_GSL_GENLOCK_VSYNC;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_A_A_MASK:\n\t\t\t*en = GPIO_GSL_SWAPLOCK_A;\n\t\t\treturn true;\n\t\tcase DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_B_A_MASK:\n\t\t\t*en = GPIO_GSL_SWAPLOCK_B;\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\treturn false;\n\t\t}\n\tbreak;\n\t \n\tcase mmGPIOPAD_A:\n\t\t*id = GPIO_ID_GPIO_PAD;\n\t\t*en = index_from_vector(mask);\n\t\treturn (*en <= GPIO_GPIO_PAD_MAX);\n\t \n\t \n\tcase mmDC_GPIO_DDC1_A:\n\t\t*en = GPIO_DDC_LINE_DDC1;\n\t\treturn true;\n\tcase mmDC_GPIO_DDC2_A:\n\t\t*en = GPIO_DDC_LINE_DDC2;\n\t\treturn true;\n\tcase mmDC_GPIO_DDC3_A:\n\t\t*en = GPIO_DDC_LINE_DDC3;\n\t\treturn true;\n\tcase mmDC_GPIO_DDC4_A:\n\t\t*en = GPIO_DDC_LINE_DDC4;\n\t\treturn true;\n\tcase mmDC_GPIO_DDC5_A:\n\t\t*en = GPIO_DDC_LINE_DDC5;\n\t\treturn true;\n\tcase mmDC_GPIO_DDC6_A:\n\t\t*en = GPIO_DDC_LINE_DDC6;\n\t\treturn true;\n\tcase mmDC_GPIO_DDCVGA_A:\n\t\t*en = GPIO_DDC_LINE_DDC_VGA;\n\t\treturn true;\n\t \n\tcase mmDC_GPIO_I2CPAD_A:\n\t\t*en = GPIO_DDC_LINE_I2C_PAD;\n\t\treturn true;\n\t \n\tcase mmDC_GPIO_PWRSEQ_A:\n\tcase mmDC_GPIO_PAD_STRENGTH_1:\n\tcase mmDC_GPIO_PAD_STRENGTH_2:\n\tcase mmDC_GPIO_DEBUG:\n\t\treturn false;\n\t \n\tdefault:\n\t\tBREAK_TO_DEBUGGER();\n\t\treturn false;\n\t}\n}\n\nstatic bool id_to_offset(\n\tenum gpio_id id,\n\tuint32_t en,\n\tstruct gpio_pin_info *info)\n{\n\tbool result = true;\n\n\tswitch (id) {\n\tcase GPIO_ID_DDC_DATA:\n\t\tinfo->mask = DC_GPIO_DDC6_A__DC_GPIO_DDC6DATA_A_MASK;\n\t\tswitch (en) {\n\t\tcase GPIO_DDC_LINE_DDC1:\n\t\t\tinfo->offset = mmDC_GPIO_DDC1_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC2:\n\t\t\tinfo->offset = mmDC_GPIO_DDC2_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC3:\n\t\t\tinfo->offset = mmDC_GPIO_DDC3_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC4:\n\t\t\tinfo->offset = mmDC_GPIO_DDC4_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC5:\n\t\t\tinfo->offset = mmDC_GPIO_DDC5_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC6:\n\t\t\tinfo->offset = mmDC_GPIO_DDC6_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC_VGA:\n\t\t\tinfo->offset = mmDC_GPIO_DDCVGA_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_I2C_PAD:\n\t\t\tinfo->offset = mmDC_GPIO_I2CPAD_A;\n\t\tbreak;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_DDC_CLOCK:\n\t\tinfo->mask = DC_GPIO_DDC6_A__DC_GPIO_DDC6CLK_A_MASK;\n\t\tswitch (en) {\n\t\tcase GPIO_DDC_LINE_DDC1:\n\t\t\tinfo->offset = mmDC_GPIO_DDC1_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC2:\n\t\t\tinfo->offset = mmDC_GPIO_DDC2_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC3:\n\t\t\tinfo->offset = mmDC_GPIO_DDC3_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC4:\n\t\t\tinfo->offset = mmDC_GPIO_DDC4_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC5:\n\t\t\tinfo->offset = mmDC_GPIO_DDC5_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC6:\n\t\t\tinfo->offset = mmDC_GPIO_DDC6_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_DDC_VGA:\n\t\t\tinfo->offset = mmDC_GPIO_DDCVGA_A;\n\t\tbreak;\n\t\tcase GPIO_DDC_LINE_I2C_PAD:\n\t\t\tinfo->offset = mmDC_GPIO_I2CPAD_A;\n\t\tbreak;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_GENERIC:\n\t\tinfo->offset = mmDC_GPIO_GENERIC_A;\n\t\tswitch (en) {\n\t\tcase GPIO_GENERIC_A:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICA_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_B:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICB_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_C:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICC_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_D:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICD_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_E:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICE_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_F:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICF_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GENERIC_G:\n\t\t\tinfo->mask = DC_GPIO_GENERIC_A__DC_GPIO_GENERICG_A_MASK;\n\t\tbreak;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_HPD:\n\t\tinfo->offset = mmDC_GPIO_HPD_A;\n\t\tswitch (en) {\n\t\tcase GPIO_HPD_1:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD1_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_2:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD2_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_3:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD3_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_4:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD4_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_5:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD5_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_HPD_6:\n\t\t\tinfo->mask = DC_GPIO_HPD_A__DC_GPIO_HPD6_A_MASK;\n\t\tbreak;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_SYNC:\n\t\tswitch (en) {\n\t\tcase GPIO_SYNC_HSYNC_A:\n\t\t\tinfo->offset = mmDC_GPIO_SYNCA_A;\n\t\t\tinfo->mask = DC_GPIO_SYNCA_A__DC_GPIO_HSYNCA_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_SYNC_VSYNC_A:\n\t\t\tinfo->offset = mmDC_GPIO_SYNCA_A;\n\t\t\tinfo->mask = DC_GPIO_SYNCA_A__DC_GPIO_VSYNCA_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_SYNC_HSYNC_B:\n\t\tcase GPIO_SYNC_VSYNC_B:\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_GSL:\n\t\tswitch (en) {\n\t\tcase GPIO_GSL_GENLOCK_CLOCK:\n\t\t\tinfo->offset = mmDC_GPIO_GENLK_A;\n\t\t\tinfo->mask = DC_GPIO_GENLK_A__DC_GPIO_GENLK_CLK_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GSL_GENLOCK_VSYNC:\n\t\t\tinfo->offset = mmDC_GPIO_GENLK_A;\n\t\t\tinfo->mask =\n\t\t\t\tDC_GPIO_GENLK_A__DC_GPIO_GENLK_VSYNC_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GSL_SWAPLOCK_A:\n\t\t\tinfo->offset = mmDC_GPIO_GENLK_A;\n\t\t\tinfo->mask = DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_A_A_MASK;\n\t\tbreak;\n\t\tcase GPIO_GSL_SWAPLOCK_B:\n\t\t\tinfo->offset = mmDC_GPIO_GENLK_A;\n\t\t\tinfo->mask = DC_GPIO_GENLK_A__DC_GPIO_SWAPLOCK_B_A_MASK;\n\t\tbreak;\n\t\tdefault:\n\t\t\tBREAK_TO_DEBUGGER();\n\t\t\tresult = false;\n\t\t}\n\tbreak;\n\tcase GPIO_ID_GPIO_PAD:\n\t\tinfo->offset = mmGPIOPAD_A;\n\t\tinfo->mask = (1 << en);\n\t\tresult = (info->mask <= GPIO_GPIO_PAD_MAX);\n\tbreak;\n\tcase GPIO_ID_VIP_PAD:\n\tdefault:\n\t\tBREAK_TO_DEBUGGER();\n\t\tresult = false;\n\t}\n\n\tif (result) {\n\t\tinfo->offset_y = info->offset + 2;\n\t\tinfo->offset_en = info->offset + 1;\n\t\tinfo->offset_mask = info->offset - 1;\n\n\t\tinfo->mask_y = info->mask;\n\t\tinfo->mask_en = info->mask;\n\t\tinfo->mask_mask = info->mask;\n\t}\n\n\treturn result;\n}\n\nstatic const struct hw_translate_funcs funcs = {\n\t\t.offset_to_id = offset_to_id,\n\t\t.id_to_offset = id_to_offset,\n};\n\nvoid dal_hw_translate_dce60_init(\n\tstruct hw_translate *translate)\n{\n\ttranslate->funcs = &funcs;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}