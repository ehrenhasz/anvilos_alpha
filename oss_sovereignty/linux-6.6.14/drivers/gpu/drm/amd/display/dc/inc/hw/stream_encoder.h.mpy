{
  "module_name": "stream_encoder.h",
  "hash_id": "7a5463ed053e37b46987e81ba6e9c00e7f5665e4fc63730aaf0bed78cbccadb6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/inc/hw/stream_encoder.h",
  "human_readable_source": " \n \n\n#ifndef STREAM_ENCODER_H_\n#define STREAM_ENCODER_H_\n\n#include \"audio_types.h\"\n#include \"hw_shared.h\"\n\nstruct dc_bios;\nstruct dc_context;\nstruct dc_crtc_timing;\n\nenum dp_pixel_encoding_type {\n\tDP_PIXEL_ENCODING_TYPE_RGB444\t\t= 0x00000000,\n\tDP_PIXEL_ENCODING_TYPE_YCBCR422\t\t= 0x00000001,\n\tDP_PIXEL_ENCODING_TYPE_YCBCR444\t\t= 0x00000002,\n\tDP_PIXEL_ENCODING_TYPE_RGB_WIDE_GAMUT\t= 0x00000003,\n\tDP_PIXEL_ENCODING_TYPE_Y_ONLY\t\t= 0x00000004,\n\tDP_PIXEL_ENCODING_TYPE_YCBCR420\t\t= 0x00000005\n};\n\nenum dp_component_depth {\n\tDP_COMPONENT_PIXEL_DEPTH_6BPC\t\t= 0x00000000,\n\tDP_COMPONENT_PIXEL_DEPTH_8BPC\t\t= 0x00000001,\n\tDP_COMPONENT_PIXEL_DEPTH_10BPC\t\t= 0x00000002,\n\tDP_COMPONENT_PIXEL_DEPTH_12BPC\t\t= 0x00000003,\n\tDP_COMPONENT_PIXEL_DEPTH_16BPC\t\t= 0x00000004\n};\n\nstruct audio_clock_info {\n\t \n\tuint32_t pixel_clock_in_10khz;\n\t \n\tuint32_t n_32khz;\n\t \n\tuint32_t cts_32khz;\n\tuint32_t n_44khz;\n\tuint32_t cts_44khz;\n\tuint32_t n_48khz;\n\tuint32_t cts_48khz;\n};\n\nenum dynamic_metadata_mode {\n\tdmdata_dp,\n\tdmdata_hdmi,\n\tdmdata_dolby_vision\n};\n\nstruct enc_sdp_line_num {\n\t \n\tbool adaptive_sync_line_num_valid;\n\tuint32_t adaptive_sync_line_num;\n};\n\nstruct encoder_info_frame {\n\t \n\tstruct dc_info_packet avi;\n\tstruct dc_info_packet gamut;\n\tstruct dc_info_packet vendor;\n\tstruct dc_info_packet hfvsif;\n\tstruct dc_info_packet vtem;\n\t \n\tstruct dc_info_packet spd;\n\t \n\tstruct dc_info_packet vsc;\n\t \n\tstruct dc_info_packet hdrsmd;\n\t \n\tstruct dc_info_packet adaptive_sync;\n\tstruct enc_sdp_line_num sdp_line_num;\n};\n\nstruct encoder_unblank_param {\n\tstruct dc_link_settings link_settings;\n\tstruct dc_crtc_timing timing;\n\tint opp_cnt;\n};\n\nstruct encoder_set_dp_phy_pattern_param {\n\tenum dp_test_pattern dp_phy_pattern;\n\tconst uint8_t *custom_pattern;\n\tuint32_t custom_pattern_size;\n\tenum dp_panel_mode dp_panel_mode;\n};\n\nstruct stream_encoder {\n\tconst struct stream_encoder_funcs *funcs;\n\tstruct dc_context *ctx;\n\tstruct dc_bios *bp;\n\tenum engine_id id;\n\tuint32_t stream_enc_inst;\n\tstruct vpg *vpg;\n\tstruct afmt *afmt;\n};\n\nstruct enc_state {\n\tuint32_t dsc_mode;  \n\tuint32_t dsc_slice_width;\n\tuint32_t sec_gsp_pps_line_num;\n\tuint32_t vbid6_line_reference;\n\tuint32_t vbid6_line_num;\n\tuint32_t sec_gsp_pps_enable;\n\tuint32_t sec_stream_enable;\n};\n\nstruct stream_encoder_funcs {\n\tvoid (*dp_set_stream_attribute)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct dc_crtc_timing *crtc_timing,\n\t\tenum dc_color_space output_color_space,\n\t\tbool use_vsc_sdp_for_colorimetry,\n\t\tuint32_t enable_sdp_splitting);\n\n\tvoid (*hdmi_set_stream_attribute)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct dc_crtc_timing *crtc_timing,\n\t\tint actual_pix_clk_khz,\n\t\tbool enable_audio);\n\n\tvoid (*dvi_set_stream_attribute)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct dc_crtc_timing *crtc_timing,\n\t\tbool is_dual_link);\n\n\tvoid (*lvds_set_stream_attribute)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct dc_crtc_timing *crtc_timing);\n\n\tvoid (*set_throttled_vcp_size)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct fixed31_32 avg_time_slots_per_mtp);\n\n\tvoid (*update_hdmi_info_packets)(\n\t\tstruct stream_encoder *enc,\n\t\tconst struct encoder_info_frame *info_frame);\n\n\tvoid (*stop_hdmi_info_packets)(\n\t\tstruct stream_encoder *enc);\n\n\tvoid (*update_dp_info_packets_sdp_line_num)(\n\t\tstruct stream_encoder *enc,\n\t\tstruct encoder_info_frame *info_frame);\n\n\tvoid (*update_dp_info_packets)(\n\t\tstruct stream_encoder *enc,\n\t\tconst struct encoder_info_frame *info_frame);\n\n\tvoid (*send_immediate_sdp_message)(\n\t\t\t\tstruct stream_encoder *enc,\n\t\t\t\tconst uint8_t *custom_sdp_message,\n\t\t\t\tunsigned int sdp_message_size);\n\n\tvoid (*stop_dp_info_packets)(\n\t\tstruct stream_encoder *enc);\n\n\tvoid (*reset_fifo)(\n\t\tstruct stream_encoder *enc\n\t);\n\n\tvoid (*dp_blank)(\n\t\tstruct dc_link *link,\n\t\tstruct stream_encoder *enc);\n\n\tvoid (*dp_unblank)(\n\t\tstruct dc_link *link,\n\t\tstruct stream_encoder *enc,\n\t\tconst struct encoder_unblank_param *param);\n\n\tvoid (*audio_mute_control)(\n\t\tstruct stream_encoder *enc, bool mute);\n\n\tvoid (*dp_audio_setup)(\n\t\tstruct stream_encoder *enc,\n\t\tunsigned int az_inst,\n\t\tstruct audio_info *info);\n\n\tvoid (*dp_audio_enable) (\n\t\t\tstruct stream_encoder *enc);\n\n\tvoid (*dp_audio_disable) (\n\t\t\tstruct stream_encoder *enc);\n\n\tvoid (*hdmi_audio_setup)(\n\t\tstruct stream_encoder *enc,\n\t\tunsigned int az_inst,\n\t\tstruct audio_info *info,\n\t\tstruct audio_crtc_info *audio_crtc_info);\n\n\tvoid (*hdmi_audio_disable) (\n\t\t\tstruct stream_encoder *enc);\n\n\tvoid (*setup_stereo_sync) (\n\t\t\tstruct stream_encoder *enc,\n\t\t\tint tg_inst,\n\t\t\tbool enable);\n\n\tvoid (*set_avmute)(\n\t\tstruct stream_encoder *enc, bool enable);\n\n\tvoid (*dig_connect_to_otg)(\n\t\tstruct stream_encoder *enc,\n\t\tint tg_inst);\n\n\tvoid (*hdmi_reset_stream_attribute)(\n\t\tstruct stream_encoder *enc);\n\n\tunsigned int (*dig_source_otg)(\n\t\tstruct stream_encoder *enc);\n\n\tbool (*dp_get_pixel_format)(\n\t\tstruct stream_encoder *enc,\n\t\tenum dc_pixel_encoding *encoding,\n\t\tenum dc_color_depth *depth);\n\n\tvoid (*enc_read_state)(struct stream_encoder *enc, struct enc_state *s);\n\n\tvoid (*dp_set_dsc_config)(\n\t\t\tstruct stream_encoder *enc,\n\t\t\tenum optc_dsc_mode dsc_mode,\n\t\t\tuint32_t dsc_bytes_per_pixel,\n\t\t\tuint32_t dsc_slice_width);\n\n\tvoid (*dp_set_dsc_pps_info_packet)(struct stream_encoder *enc,\n\t\t\t\tbool enable,\n\t\t\t\tuint8_t *dsc_packed_pps,\n\t\t\t\tbool immediate_update);\n\n\tvoid (*set_dynamic_metadata)(struct stream_encoder *enc,\n\t\t\tbool enable,\n\t\t\tuint32_t hubp_requestor_id,\n\t\t\tenum dynamic_metadata_mode dmdata_mode);\n\n\t \n\tvoid (*dp_set_odm_combine)(\n\t\tstruct stream_encoder *enc,\n\t\tbool odm_combine);\n\n\tuint32_t (*get_fifo_cal_average_level)(\n\t\tstruct stream_encoder *enc);\n\n\tvoid (*set_input_mode)(\n\t\tstruct stream_encoder *enc, unsigned int pix_per_container);\n\tvoid (*enable_fifo)(struct stream_encoder *enc);\n\tvoid (*disable_fifo)(struct stream_encoder *enc);\n\tvoid (*map_stream_to_link)(struct stream_encoder *enc, uint32_t stream_enc_inst, uint32_t link_enc_inst);\n};\n\nstruct hpo_dp_stream_encoder_state {\n\tuint32_t stream_enc_enabled;\n\tuint32_t vid_stream_enabled;\n\tuint32_t otg_inst;\n\tuint32_t pixel_encoding;\n\tuint32_t component_depth;\n\tuint32_t compressed_format;\n\tuint32_t sdp_enabled;\n\tuint32_t mapped_to_link_enc;\n};\n\nstruct hpo_dp_stream_encoder {\n\tconst struct hpo_dp_stream_encoder_funcs *funcs;\n\tstruct dc_context *ctx;\n\tstruct dc_bios *bp;\n\tuint32_t inst;\n\tenum engine_id id;\n\tstruct vpg *vpg;\n\tstruct apg *apg;\n};\n\nstruct hpo_dp_stream_encoder_funcs {\n\tvoid (*enable_stream)(\n\t\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*dp_unblank)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tuint32_t stream_source);\n\n\tvoid (*dp_blank)(\n\t\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*disable)(\n\t\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*set_stream_attribute)(\n\t\tstruct hpo_dp_stream_encoder *enc,\n\t\tstruct dc_crtc_timing *crtc_timing,\n\t\tenum dc_color_space output_color_space,\n\t\tbool use_vsc_sdp_for_colorimetry,\n\t\tbool compressed_format,\n\t\tbool double_buffer_en);\n\n\tvoid (*update_dp_info_packets_sdp_line_num)(\n\t\tstruct hpo_dp_stream_encoder *enc,\n\t\tstruct encoder_info_frame *info_frame);\n\n\tvoid (*update_dp_info_packets)(\n\t\tstruct hpo_dp_stream_encoder *enc,\n\t\tconst struct encoder_info_frame *info_frame);\n\n\tvoid (*stop_dp_info_packets)(\n\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*dp_set_dsc_pps_info_packet)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tbool enable,\n\t\t\tuint8_t *dsc_packed_pps,\n\t\t\tbool immediate_update);\n\n\tvoid (*map_stream_to_link)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tuint32_t stream_enc_inst,\n\t\t\tuint32_t link_enc_inst);\n\n\tvoid (*dp_audio_setup)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tunsigned int az_inst,\n\t\t\tstruct audio_info *info);\n\n\tvoid (*dp_audio_enable)(\n\t\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*dp_audio_disable)(\n\t\t\tstruct hpo_dp_stream_encoder *enc);\n\n\tvoid (*read_state)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tstruct hpo_dp_stream_encoder_state *state);\n\n\tvoid (*set_hblank_min_symbol_width)(\n\t\t\tstruct hpo_dp_stream_encoder *enc,\n\t\t\tuint16_t width);\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}