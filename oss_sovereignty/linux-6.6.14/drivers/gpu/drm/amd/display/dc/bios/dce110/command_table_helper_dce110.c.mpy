{
  "module_name": "command_table_helper_dce110.c",
  "hash_id": "0eccd7abaf0c8c5d2604f9075cf35c689b8940aaed4e521da7ee427dbc96f101",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dc/bios/dce110/command_table_helper_dce110.c",
  "human_readable_source": " \n\n#include \"dm_services.h\"\n\n#include \"atom.h\"\n\n#include \"include/bios_parser_types.h\"\n\n#include \"../command_table_helper.h\"\n\nstatic uint8_t phy_id_to_atom(enum transmitter t)\n{\n\tuint8_t atom_phy_id;\n\n\tswitch (t) {\n\tcase TRANSMITTER_UNIPHY_A:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYA;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_B:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYB;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_C:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYC;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_D:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYD;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_E:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYE;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_F:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYF;\n\t\tbreak;\n\tcase TRANSMITTER_UNIPHY_G:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYG;\n\t\tbreak;\n\tdefault:\n\t\tatom_phy_id = ATOM_PHY_ID_UNIPHYA;\n\t\tbreak;\n\t}\n\treturn atom_phy_id;\n}\n\nstatic uint8_t signal_type_to_atom_dig_mode(enum signal_type s)\n{\n\tuint8_t atom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_DP;\n\n\tswitch (s) {\n\tcase SIGNAL_TYPE_DISPLAY_PORT:\n\tcase SIGNAL_TYPE_EDP:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_DP;\n\t\tbreak;\n\tcase SIGNAL_TYPE_LVDS:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_LVDS;\n\t\tbreak;\n\tcase SIGNAL_TYPE_DVI_SINGLE_LINK:\n\tcase SIGNAL_TYPE_DVI_DUAL_LINK:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_DVI;\n\t\tbreak;\n\tcase SIGNAL_TYPE_HDMI_TYPE_A:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_HDMI;\n\t\tbreak;\n\tcase SIGNAL_TYPE_DISPLAY_PORT_MST:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_DP_MST;\n\t\tbreak;\n\tdefault:\n\t\tatom_dig_mode = ATOM_TRANSMITTER_DIGMODE_V5_DVI;\n\t\tbreak;\n\t}\n\n\treturn atom_dig_mode;\n}\n\nstatic uint8_t clock_source_id_to_atom_phy_clk_src_id(\n\t\tenum clock_source_id id)\n{\n\tuint8_t atom_phy_clk_src_id = 0;\n\n\tswitch (id) {\n\tcase CLOCK_SOURCE_ID_PLL0:\n\t\tatom_phy_clk_src_id = ATOM_TRANSMITTER_CONFIG_V5_P0PLL;\n\t\tbreak;\n\tcase CLOCK_SOURCE_ID_PLL1:\n\t\tatom_phy_clk_src_id = ATOM_TRANSMITTER_CONFIG_V5_P1PLL;\n\t\tbreak;\n\tcase CLOCK_SOURCE_ID_PLL2:\n\t\tatom_phy_clk_src_id = ATOM_TRANSMITTER_CONFIG_V5_P2PLL;\n\t\tbreak;\n\tcase CLOCK_SOURCE_ID_EXTERNAL:\n\t\tatom_phy_clk_src_id = ATOM_TRANSMITTER_CONFIG_V5_REFCLK_SRC_EXT;\n\t\tbreak;\n\tdefault:\n\t\tatom_phy_clk_src_id = ATOM_TRANSMITTER_CONFIG_V5_P1PLL;\n\t\tbreak;\n\t}\n\n\treturn atom_phy_clk_src_id >> 2;\n}\n\nstatic uint8_t hpd_sel_to_atom(enum hpd_source_id id)\n{\n\tuint8_t atom_hpd_sel = 0;\n\n\tswitch (id) {\n\tcase HPD_SOURCEID1:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD1_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID2:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD2_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID3:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD3_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID4:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD4_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID5:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD5_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID6:\n\t\tatom_hpd_sel = ATOM_TRANSMITTER_CONFIG_V5_HPD6_SEL;\n\t\tbreak;\n\tcase HPD_SOURCEID_UNKNOWN:\n\tdefault:\n\t\tatom_hpd_sel = 0;\n\t\tbreak;\n\t}\n\treturn atom_hpd_sel >> 4;\n}\n\nstatic uint8_t dig_encoder_sel_to_atom(enum engine_id id)\n{\n\t \n\n\treturn 0;\n}\n\nstatic bool clock_source_id_to_atom(\n\tenum clock_source_id id,\n\tuint32_t *atom_pll_id)\n{\n\tbool result = true;\n\n\tif (atom_pll_id != NULL)\n\t\tswitch (id) {\n\t\tcase CLOCK_SOURCE_ID_PLL0:\n\t\t\t*atom_pll_id = ATOM_PPLL0;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_PLL1:\n\t\t\t*atom_pll_id = ATOM_PPLL1;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_PLL2:\n\t\t\t*atom_pll_id = ATOM_PPLL2;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_EXTERNAL:\n\t\t\t*atom_pll_id = ATOM_PPLL_INVALID;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_DFS:\n\t\t\t*atom_pll_id = ATOM_EXT_PLL1;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_VCE:\n\t\t\t \n\t\t\t*atom_pll_id = ATOM_PPLL_INVALID;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_DP_DTO:\n\t\t\t \n\t\t\t*atom_pll_id = ATOM_PPLL_INVALID;\n\t\t\tbreak;\n\t\tcase CLOCK_SOURCE_ID_UNDEFINED:\n\t\t\t \n\t\t\t*atom_pll_id = ATOM_PPLL_INVALID;\n\t\t\tresult = false;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tresult = false;\n\t\t\tbreak;\n\t\t}\n\n\treturn result;\n}\n\nstatic bool engine_bp_to_atom(enum engine_id id, uint32_t *atom_engine_id)\n{\n\tbool result = false;\n\n\tif (atom_engine_id != NULL)\n\t\tswitch (id) {\n\t\tcase ENGINE_ID_DIGA:\n\t\t\t*atom_engine_id = ASIC_INT_DIG1_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGB:\n\t\t\t*atom_engine_id = ASIC_INT_DIG2_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGC:\n\t\t\t*atom_engine_id = ASIC_INT_DIG3_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGD:\n\t\t\t*atom_engine_id = ASIC_INT_DIG4_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGE:\n\t\t\t*atom_engine_id = ASIC_INT_DIG5_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGF:\n\t\t\t*atom_engine_id = ASIC_INT_DIG6_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DIGG:\n\t\t\t*atom_engine_id = ASIC_INT_DIG7_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tcase ENGINE_ID_DACA:\n\t\t\t*atom_engine_id = ASIC_INT_DAC1_ENCODER_ID;\n\t\t\tresult = true;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\n\treturn result;\n}\n\nstatic uint8_t encoder_action_to_atom(enum bp_encoder_control_action action)\n{\n\tuint8_t atom_action = 0;\n\n\tswitch (action) {\n\tcase ENCODER_CONTROL_ENABLE:\n\t\tatom_action = ATOM_ENABLE;\n\t\tbreak;\n\tcase ENCODER_CONTROL_DISABLE:\n\t\tatom_action = ATOM_DISABLE;\n\t\tbreak;\n\tcase ENCODER_CONTROL_SETUP:\n\t\tatom_action = ATOM_ENCODER_CMD_SETUP;\n\t\tbreak;\n\tcase ENCODER_CONTROL_INIT:\n\t\tatom_action = ATOM_ENCODER_INIT;\n\t\tbreak;\n\tdefault:\n\t\tBREAK_TO_DEBUGGER();  \n\t\tbreak;\n\t}\n\n\treturn atom_action;\n}\n\nstatic uint8_t disp_power_gating_action_to_atom(\n\tenum bp_pipe_control_action action)\n{\n\tuint8_t atom_pipe_action = 0;\n\n\tswitch (action) {\n\tcase ASIC_PIPE_DISABLE:\n\t\tatom_pipe_action = ATOM_DISABLE;\n\t\tbreak;\n\tcase ASIC_PIPE_ENABLE:\n\t\tatom_pipe_action = ATOM_ENABLE;\n\t\tbreak;\n\tcase ASIC_PIPE_INIT:\n\t\tatom_pipe_action = ATOM_INIT;\n\t\tbreak;\n\tdefault:\n\t\tASSERT_CRITICAL(false);  \n\t\tbreak;\n\t}\n\n\treturn atom_pipe_action;\n}\n\n \nstatic const struct command_table_helper command_table_helper_funcs = {\n\t.controller_id_to_atom = dal_cmd_table_helper_controller_id_to_atom,\n\t.encoder_action_to_atom = encoder_action_to_atom,\n\t.engine_bp_to_atom = engine_bp_to_atom,\n\t.clock_source_id_to_atom = clock_source_id_to_atom,\n\t.clock_source_id_to_atom_phy_clk_src_id =\n\t\t\tclock_source_id_to_atom_phy_clk_src_id,\n\t.signal_type_to_atom_dig_mode = signal_type_to_atom_dig_mode,\n\t.hpd_sel_to_atom = hpd_sel_to_atom,\n\t.dig_encoder_sel_to_atom = dig_encoder_sel_to_atom,\n\t.phy_id_to_atom = phy_id_to_atom,\n\t.disp_power_gating_action_to_atom = disp_power_gating_action_to_atom,\n\t.assign_control_parameter = NULL,\n\t.clock_source_id_to_ref_clk_src = NULL,\n\t.transmitter_bp_to_atom = NULL,\n\t.encoder_id_to_atom = dal_cmd_table_helper_encoder_id_to_atom,\n\t.encoder_mode_bp_to_atom = dal_cmd_table_helper_encoder_mode_bp_to_atom,\n};\n\n \nconst struct command_table_helper *dal_cmd_tbl_helper_dce110_get_table(void)\n{\n\treturn &command_table_helper_funcs;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}