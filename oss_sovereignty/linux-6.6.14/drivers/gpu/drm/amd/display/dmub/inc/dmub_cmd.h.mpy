{
  "module_name": "dmub_cmd.h",
  "hash_id": "cab9b1c6f4ee44b2d3136838f2705114b4dcd5d50772fbc833bd17a1dc86c26b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/display/dmub/inc/dmub_cmd.h",
  "human_readable_source": " \n\n#ifndef DMUB_CMD_H\n#define DMUB_CMD_H\n\n#if defined(_TEST_HARNESS) || defined(FPGA_USB4)\n#include \"dmub_fw_types.h\"\n#include \"include_legacy/atomfirmware.h\"\n\n#if defined(_TEST_HARNESS)\n#include <string.h>\n#endif\n#else\n\n#include <asm/byteorder.h>\n#include <linux/types.h>\n#include <linux/string.h>\n#include <linux/delay.h>\n\n#include \"atomfirmware.h\"\n\n#endif \n\n\n \n\n#define __forceinline inline\n\n \n#define SET_ABM_PIPE_GRADUALLY_DISABLE           0\n\n \n#define SET_ABM_PIPE_IMMEDIATELY_DISABLE         255\n\n \n#define SET_ABM_PIPE_IMMEDIATE_KEEP_GAIN_DISABLE 254\n\n \n#define SET_ABM_PIPE_NORMAL                      1\n\n \n#define NUM_AMBI_LEVEL                  5\n\n \n#define NUM_AGGR_LEVEL                  4\n\n \n#define NUM_POWER_FN_SEGS               8\n\n \n#define NUM_BL_CURVE_SEGS               16\n\n \n#define DMUB_MAX_SUBVP_STREAMS 2\n\n \n#define DMUB_MAX_FPO_STREAMS 4\n\n \n#define DMUB_MAX_STREAMS 6\n\n \n#define DMUB_MAX_PLANES 6\n\n \n#define TRACE_BUFFER_ENTRY_OFFSET  16\n\n \n#define DMUB_MAX_DIRTY_RECTS 3\n\n \n#define DMUB_CMD_PSR_CONTROL_VERSION_UNKNOWN 0x0\n \n#define DMUB_CMD_PSR_CONTROL_VERSION_1 0x1\n\n\n \n#define DMUB_CMD_ABM_CONTROL_VERSION_UNKNOWN 0x0\n\n \n#define DMUB_CMD_ABM_CONTROL_VERSION_1 0x1\n\n \n#ifndef PHYSICAL_ADDRESS_LOC\n#define PHYSICAL_ADDRESS_LOC union large_integer\n#endif\n\n \n#ifndef dmub_memcpy\n#define dmub_memcpy(dest, source, bytes) memcpy((dest), (source), (bytes))\n#endif\n\n \n#ifndef dmub_memset\n#define dmub_memset(dest, val, bytes) memset((dest), (val), (bytes))\n#endif\n\n#if defined(__cplusplus)\nextern \"C\" {\n#endif\n\n \n#ifndef dmub_udelay\n#define dmub_udelay(microseconds) udelay(microseconds)\n#endif\n\n#pragma pack(push, 1)\n#define ABM_NUM_OF_ACE_SEGMENTS         5\n\nunion abm_flags {\n\tstruct {\n\t\t \n\t\tunsigned int abm_enabled : 1;\n\n\t\t \n\t\tunsigned int disable_abm_requested : 1;\n\n\t\t \n\t\tunsigned int disable_abm_immediately : 1;\n\n\t\t \n\t\tunsigned int disable_abm_immediate_keep_gain : 1;\n\n\t\t \n\t\tunsigned int fractional_pwm : 1;\n\n\t\t \n\t\tunsigned int abm_gradual_bl_change : 1;\n\t} bitfields;\n\n\tunsigned int u32All;\n};\n\nstruct abm_save_restore {\n\t \n\tunion abm_flags flags;\n\n\t \n\tuint32_t pause;\n\n\t \n\tuint32_t next_ace_slope[ABM_NUM_OF_ACE_SEGMENTS];\n\n\t \n\tuint32_t next_ace_thresh[ABM_NUM_OF_ACE_SEGMENTS];\n\n\t \n\tuint32_t next_ace_offset[ABM_NUM_OF_ACE_SEGMENTS];\n\n\n\t \n\tuint32_t knee_threshold;\n\t \n\tuint32_t current_gain;\n\t \n\tuint16_t curr_bl_level;\n\n\t \n\tuint16_t curr_user_bl_level;\n\n};\n\n \nunion dmub_addr {\n\tstruct {\n\t\tuint32_t low_part;  \n\t\tuint32_t high_part;  \n\t} u;  \n\tuint64_t quad_part;  \n};\n#pragma pack(pop)\n\n \nstruct dmub_rect {\n\t \n\tuint32_t x;\n\n\t \n\tuint32_t y;\n\n\t \n\tuint32_t width;\n\n\t \n\tuint32_t height;\n};\n\n \nunion dmub_psr_debug_flags {\n\t \n\tstruct {\n\t\t \n\t\tuint32_t visual_confirm : 1;\n\n\t\t \n\t\tuint32_t force_full_frame_update : 1;\n\n\t\t \n\t\tuint32_t use_hw_lock_mgr : 1;\n\n\t\t \n\t\tuint32_t force_wakeup_by_tps3 : 1;\n\n\t\t \n\t\tuint32_t back_to_back_flip : 1;\n\n\t} bitfields;\n\n\t \n\tuint32_t u32All;\n};\n\n \nunion replay_debug_flags {\n\tstruct {\n\t\t \n\t\tuint32_t visual_confirm : 1;\n\n\t\t \n\t\tuint32_t skip_crc : 1;\n\n\t\t \n\t\tuint32_t force_link_power_on : 1;\n\n\t\t \n\t\tuint32_t force_phy_power_on : 1;\n\n\t\t \n\t\tuint32_t timing_resync_disabled : 1;\n\n\t\t \n\t\tuint32_t skip_crtc_disabled : 1;\n\n\t\t \n\t\tuint32_t force_defer_one_frame_update : 1;\n\t\t \n\t\tuint32_t disable_delay_alpm_on : 1;\n\t\t \n\t\tuint32_t disable_desync_error_check : 1;\n\t\t \n\t\tuint32_t disable_dmub_save_restore : 1;\n\n\t\tuint32_t reserved : 22;\n\t} bitfields;\n\n\tuint32_t u32All;\n};\n\nunion replay_hw_flags {\n\tstruct {\n\t\t \n\t\tuint32_t allow_alpm_fw_standby_mode : 1;\n\n\t\t \n\t\tuint32_t dsc_enable_status : 1;\n\n\t\t \n\t\tuint32_t fec_enable_status : 1;\n\n\t\t \n\t\tuint32_t smu_optimizations_en : 1;\n\n\t\t \n\t\tuint32_t otg_powered_down : 1;\n\n\t\t \n\t\tuint32_t phy_power_state : 1;\n\n\t\t \n\t\tuint32_t link_power_state : 1;\n\t\t \n\t\tuint32_t force_wakeup_by_tps3 : 1;\n\t} bitfields;\n\n\tuint32_t u32All;\n};\n\n \nstruct dmub_feature_caps {\n\t \n\tuint8_t psr;\n\tuint8_t fw_assisted_mclk_switch;\n\tuint8_t reserved[4];\n\tuint8_t subvp_psr_support;\n\tuint8_t gecc_enable;\n};\n\nstruct dmub_visual_confirm_color {\n\t \n\tuint16_t color_r_cr;\n\tuint16_t color_g_y;\n\tuint16_t color_b_cb;\n\tuint16_t panel_inst;\n};\n\n#if defined(__cplusplus)\n}\n#endif\n\n\n\n\n\n\n#pragma pack(push, 1)\n\n \n#define DMUB_FW_META_MAGIC 0x444D5542\n\n \n#define DMUB_FW_META_OFFSET 0x24\n\n \nstruct dmub_fw_meta_info {\n\tuint32_t magic_value;  \n\tuint32_t fw_region_size;  \n\tuint32_t trace_buffer_size;  \n\tuint32_t fw_version;  \n\tuint8_t dal_fw;  \n\tuint8_t reserved[3];  \n};\n\n \nunion dmub_fw_meta {\n\tstruct dmub_fw_meta_info info;  \n\tuint8_t reserved[64];  \n};\n\n#pragma pack(pop)\n\n\n\n\n \ntypedef uint32_t dmub_trace_code_t;\n\n \nstruct dmcub_trace_buf_entry {\n\tdmub_trace_code_t trace_code;  \n\tuint32_t tick_count;  \n\tuint32_t param0;  \n\tuint32_t param1;  \n};\n\n\n\n\n\n \n\n \nunion dmub_fw_boot_status {\n\tstruct {\n\t\tuint32_t dal_fw : 1;  \n\t\tuint32_t mailbox_rdy : 1;  \n\t\tuint32_t optimized_init_done : 1;  \n\t\tuint32_t restore_required : 1;  \n\t\tuint32_t defer_load : 1;  \n\t\tuint32_t fams_enabled : 1;  \n\t\tuint32_t detection_required: 1;  \n\t\tuint32_t hw_power_init_done: 1;  \n\t} bits;  \n\tuint32_t all;  \n};\n\n \nenum dmub_fw_boot_status_bit {\n\tDMUB_FW_BOOT_STATUS_BIT_DAL_FIRMWARE = (1 << 0),  \n\tDMUB_FW_BOOT_STATUS_BIT_MAILBOX_READY = (1 << 1),  \n\tDMUB_FW_BOOT_STATUS_BIT_OPTIMIZED_INIT_DONE = (1 << 2),  \n\tDMUB_FW_BOOT_STATUS_BIT_RESTORE_REQUIRED = (1 << 3),  \n\tDMUB_FW_BOOT_STATUS_BIT_DEFERRED_LOADED = (1 << 4),  \n\tDMUB_FW_BOOT_STATUS_BIT_FAMS_ENABLED = (1 << 5),  \n\tDMUB_FW_BOOT_STATUS_BIT_DETECTION_REQUIRED = (1 << 6),  \n\tDMUB_FW_BOOT_STATUS_BIT_HW_POWER_INIT_DONE = (1 << 7),  \n};\n\n \nunion dmub_lvtma_status {\n\tstruct {\n\t\tuint32_t psp_ok : 1;\n\t\tuint32_t edp_on : 1;\n\t\tuint32_t reserved : 30;\n\t} bits;\n\tuint32_t all;\n};\n\nenum dmub_lvtma_status_bit {\n\tDMUB_LVTMA_STATUS_BIT_PSP_OK = (1 << 0),\n\tDMUB_LVTMA_STATUS_BIT_EDP_ON = (1 << 1),\n};\n\nenum dmub_ips_disable_type {\n\tDMUB_IPS_DISABLE_IPS1 = 1,\n\tDMUB_IPS_DISABLE_IPS2 = 2,\n\tDMUB_IPS_DISABLE_IPS2_Z10 = 3,\n};\n\n \nunion dmub_fw_boot_options {\n\tstruct {\n\t\tuint32_t pemu_env : 1;  \n\t\tuint32_t fpga_env : 1;  \n\t\tuint32_t optimized_init : 1;  \n\t\tuint32_t skip_phy_access : 1;  \n\t\tuint32_t disable_clk_gate: 1;  \n\t\tuint32_t skip_phy_init_panel_sequence: 1;  \n\t\tuint32_t z10_disable: 1;  \n\t\tuint32_t enable_dpia: 1;  \n\t\tuint32_t invalid_vbios_data: 1;  \n\t\tuint32_t dpia_supported: 1;  \n\t\tuint32_t sel_mux_phy_c_d_phy_f_g: 1;  \n\t\t \n\t\tuint32_t power_optimization: 1;\n\t\tuint32_t diag_env: 1;  \n\t\tuint32_t gpint_scratch8: 1;  \n\t\tuint32_t usb4_cm_version: 1;  \n\t\tuint32_t dpia_hpd_int_enable_supported: 1;  \n\t\tuint32_t usb4_dpia_bw_alloc_supported: 1;  \n\t\tuint32_t disable_clk_ds: 1;  \n\t\tuint32_t disable_timeout_recovery : 1;  \n\t\tuint32_t ips_pg_disable: 1;  \n\t\tuint32_t ips_disable: 2;  \n\t\tuint32_t reserved : 10;  \n\t} bits;  \n\tuint32_t all;  \n};\n\nenum dmub_fw_boot_options_bit {\n\tDMUB_FW_BOOT_OPTION_BIT_PEMU_ENV = (1 << 0),  \n\tDMUB_FW_BOOT_OPTION_BIT_FPGA_ENV = (1 << 1),  \n\tDMUB_FW_BOOT_OPTION_BIT_OPTIMIZED_INIT_DONE = (1 << 2),  \n};\n\n\n\n\n\n\n\n \nenum dmub_cmd_vbios_type {\n\t \n\tDMUB_CMD__VBIOS_DIGX_ENCODER_CONTROL = 0,\n\t \n\tDMUB_CMD__VBIOS_DIG1_TRANSMITTER_CONTROL = 1,\n\t \n\tDMUB_CMD__VBIOS_SET_PIXEL_CLOCK = 2,\n\t \n\tDMUB_CMD__VBIOS_ENABLE_DISP_POWER_GATING = 3,\n\t \n\tDMUB_CMD__VBIOS_LVTMA_CONTROL = 15,\n\t \n\tDMUB_CMD__VBIOS_TRANSMITTER_QUERY_DP_ALT  = 26,\n\t \n\tDMUB_CMD__VBIOS_DOMAIN_CONTROL = 28,\n};\n\n\n\n\n\n\n\n \n\n#define DMUB_GPINT_DATA_PARAM_MASK 0xFFFF\n#define DMUB_GPINT_DATA_PARAM_SHIFT 0\n\n#define DMUB_GPINT_DATA_COMMAND_CODE_MASK 0xFFF\n#define DMUB_GPINT_DATA_COMMAND_CODE_SHIFT 16\n\n#define DMUB_GPINT_DATA_STATUS_MASK 0xF\n#define DMUB_GPINT_DATA_STATUS_SHIFT 28\n\n \n\n \n#define DMUB_GPINT__STOP_FW_RESPONSE 0xDEADDEAD\n\n \nunion dmub_gpint_data_register {\n\tstruct {\n\t\tuint32_t param : 16;  \n\t\tuint32_t command_code : 12;  \n\t\tuint32_t status : 4;  \n\t} bits;  \n\tuint32_t all;  \n};\n\n \nenum dmub_gpint_command {\n\t \n\tDMUB_GPINT__INVALID_COMMAND = 0,\n\t \n\tDMUB_GPINT__GET_FW_VERSION = 1,\n\t \n\tDMUB_GPINT__STOP_FW = 2,\n\t \n\tDMUB_GPINT__GET_PSR_STATE = 7,\n\t \n\tDMUB_GPINT__IDLE_OPT_NOTIFY_STREAM_MASK = 8,\n\t \n\tDMUB_GPINT__PSR_RESIDENCY = 9,\n\n\t \n\tDMUB_GPINT__GET_REPLAY_STATE = 13,\n\n\t \n\tDMUB_GPINT__REPLAY_RESIDENCY = 14,\n\n\n\t \n\tDMUB_GPINT__NOTIFY_DETECTION_DONE = 12,\n\t \n\tDMUB_GPINT__UPDATE_TRACE_BUFFER_MASK = 101,\n\t \n\tDMUB_GPINT__SET_TRACE_BUFFER_MASK_WORD0 = 102,\n\t \n\tDMUB_GPINT__SET_TRACE_BUFFER_MASK_WORD1 = 103,\n};\n\n \nunion dmub_inbox0_cmd_common {\n\tstruct {\n\t\tuint32_t command_code: 8;  \n\t\tuint32_t param: 24;  \n\t} bits;\n\tuint32_t all;\n};\n\n \nunion dmub_inbox0_cmd_lock_hw {\n\tstruct {\n\t\tuint32_t command_code: 8;\n\n\t\t \n\t\tuint32_t hw_lock_client: 2;\n\n\t\t \n\t\tuint32_t otg_inst: 3;\n\t\tuint32_t opp_inst: 3;\n\t\tuint32_t dig_inst: 3;\n\n\t\t \n\t\tuint32_t lock_pipe: 1;\n\t\tuint32_t lock_cursor: 1;\n\t\tuint32_t lock_dig: 1;\n\t\tuint32_t triple_buffer_lock: 1;\n\n\t\tuint32_t lock: 1;\t\t\t\t \n\t\tuint32_t should_release: 1;\t\t \n\t\tuint32_t reserved: 7; \t\t\t \n\t} bits;\n\tuint32_t all;\n};\n\nunion dmub_inbox0_data_register {\n\tunion dmub_inbox0_cmd_common inbox0_cmd_common;\n\tunion dmub_inbox0_cmd_lock_hw inbox0_cmd_lock_hw;\n};\n\nenum dmub_inbox0_command {\n\t \n\tDMUB_INBOX0_CMD__INVALID_COMMAND = 0,\n\t \n\tDMUB_INBOX0_CMD__HW_LOCK = 1,\n};\n\n\n\n\n\n\n \n#define DMUB_RB_CMD_SIZE 64\n\n \n#define DMUB_RB_MAX_ENTRY 128\n\n \n#define DMUB_RB_SIZE (DMUB_RB_CMD_SIZE * DMUB_RB_MAX_ENTRY)\n\n \n#define REG_SET_MASK 0xFFFF\n\n \nenum dmub_cmd_type {\n\t \n\tDMUB_CMD__NULL = 0,\n\t \n\tDMUB_CMD__REG_SEQ_READ_MODIFY_WRITE = 1,\n\t \n\tDMUB_CMD__REG_SEQ_FIELD_UPDATE_SEQ = 2,\n\t \n\tDMUB_CMD__REG_SEQ_BURST_WRITE = 3,\n\t \n\tDMUB_CMD__REG_REG_WAIT = 4,\n\t \n\tDMUB_CMD__PLAT_54186_WA = 5,\n\t \n\tDMUB_CMD__QUERY_FEATURE_CAPS = 6,\n\t \n\tDMUB_CMD__GET_VISUAL_CONFIRM_COLOR = 8,\n\t \n\tDMUB_CMD__PSR = 64,\n\t \n\tDMUB_CMD__MALL = 65,\n\t \n\tDMUB_CMD__ABM = 66,\n\t \n\tDMUB_CMD__UPDATE_DIRTY_RECT = 67,\n\t \n\tDMUB_CMD__UPDATE_CURSOR_INFO = 68,\n\t \n\tDMUB_CMD__HW_LOCK = 69,\n\t \n\tDMUB_CMD__DP_AUX_ACCESS = 70,\n\t \n\tDMUB_CMD__OUTBOX1_ENABLE = 71,\n\n\t \n\tDMUB_CMD__IDLE_OPT = 72,\n\t \n\tDMUB_CMD__CLK_MGR = 73,\n\t \n\tDMUB_CMD__PANEL_CNTL = 74,\n\t \n\tDMUB_CMD__CAB_FOR_SS = 75,\n\n\tDMUB_CMD__FW_ASSISTED_MCLK_SWITCH = 76,\n\n\t \n\tDMUB_CMD__DPIA = 77,\n\t \n\tDMUB_CMD__EDID_CEA = 79,\n\t \n\tDMUB_CMD_GET_USBC_CABLE_ID = 81,\n\t \n\tDMUB_CMD__QUERY_HPD_STATE = 82,\n\t \n\n\t \n\tDMUB_CMD__REPLAY = 83,\n\n\t \n\tDMUB_CMD__SECURE_DISPLAY = 85,\n\n\t \n\tDMUB_CMD__DPIA_HPD_INT_ENABLE = 86,\n\n\tDMUB_CMD__VBIOS = 128,\n};\n\n \nenum dmub_out_cmd_type {\n\t \n\tDMUB_OUT_CMD__NULL = 0,\n\t \n\tDMUB_OUT_CMD__DP_AUX_REPLY = 1,\n\t \n\tDMUB_OUT_CMD__DP_HPD_NOTIFY = 2,\n\t \n\tDMUB_OUT_CMD__SET_CONFIG_REPLY = 3,\n\t \n\tDMUB_OUT_CMD__DPIA_NOTIFICATION = 5,\n};\n\n \nenum dmub_cmd_dpia_type {\n\tDMUB_CMD__DPIA_DIG1_DPIA_CONTROL = 0,\n\tDMUB_CMD__DPIA_SET_CONFIG_ACCESS = 1,\n\tDMUB_CMD__DPIA_MST_ALLOC_SLOTS = 2,\n};\n\n \nenum dmub_cmd_dpia_notification_type {\n\tDPIA_NOTIFY__BW_ALLOCATION = 0,\n};\n\n#pragma pack(push, 1)\n\n \nstruct dmub_cmd_header {\n\tunsigned int type : 8;  \n\tunsigned int sub_type : 8;  \n\tunsigned int ret_status : 1;  \n\tunsigned int multi_cmd_pending : 1;  \n\tunsigned int reserved0 : 6;  \n\tunsigned int payload_bytes : 6;   \n\tunsigned int reserved1 : 2;  \n};\n\n \nstruct dmub_cmd_read_modify_write_sequence {\n\tuint32_t addr;  \n\tuint32_t modify_mask;  \n\tuint32_t modify_value;  \n};\n\n \n#define DMUB_READ_MODIFY_WRITE_SEQ__MAX 5\n\n \nstruct dmub_rb_cmd_read_modify_write {\n\tstruct dmub_cmd_header header;   \n\t \n\tstruct dmub_cmd_read_modify_write_sequence seq[DMUB_READ_MODIFY_WRITE_SEQ__MAX];\n};\n\n \n\nstruct dmub_cmd_reg_field_update_sequence {\n\tuint32_t modify_mask;  \n\tuint32_t modify_value;  \n};\n\n \n#define DMUB_REG_FIELD_UPDATE_SEQ__MAX 7\n\n \nstruct dmub_rb_cmd_reg_field_update_sequence {\n\tstruct dmub_cmd_header header;  \n\tuint32_t addr;  \n\t \n\tstruct dmub_cmd_reg_field_update_sequence seq[DMUB_REG_FIELD_UPDATE_SEQ__MAX];\n};\n\n\n \n#define DMUB_BURST_WRITE_VALUES__MAX  14\n\n \nstruct dmub_rb_cmd_burst_write {\n\tstruct dmub_cmd_header header;  \n\tuint32_t addr;  \n\t \n\tuint32_t write_values[DMUB_BURST_WRITE_VALUES__MAX];\n};\n\n \nstruct dmub_rb_cmd_common {\n\tstruct dmub_cmd_header header;  \n\t \n\tuint8_t cmd_buffer[DMUB_RB_CMD_SIZE - sizeof(struct dmub_cmd_header)];\n};\n\n \nstruct dmub_cmd_reg_wait_data {\n\tuint32_t addr;  \n\tuint32_t mask;  \n\tuint32_t condition_field_value;  \n\tuint32_t time_out_us;  \n};\n\n \nstruct dmub_rb_cmd_reg_wait {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_reg_wait_data reg_wait;  \n};\n\n \nstruct dmub_cmd_PLAT_54186_wa {\n\tuint32_t DCSURF_SURFACE_CONTROL;  \n\tuint32_t DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH;  \n\tuint32_t DCSURF_PRIMARY_SURFACE_ADDRESS;  \n\tuint32_t DCSURF_PRIMARY_SURFACE_ADDRESS_HIGH_C;  \n\tuint32_t DCSURF_PRIMARY_SURFACE_ADDRESS_C;  \n\tstruct {\n\t\tuint8_t hubp_inst : 4;  \n\t\tuint8_t tmz_surface : 1;  \n\t\tuint8_t immediate :1;  \n\t\tuint8_t vmid : 4;  \n\t\tuint8_t grph_stereo : 1;  \n\t\tuint32_t reserved : 21;  \n\t} flip_params;  \n\tuint32_t reserved[9];  \n};\n\n \nstruct dmub_rb_cmd_PLAT_54186_wa {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_PLAT_54186_wa flip;  \n};\n\n \nstruct dmub_rb_cmd_mall {\n\tstruct dmub_cmd_header header;  \n\tunion dmub_addr cursor_copy_src;  \n\tunion dmub_addr cursor_copy_dst;  \n\tuint32_t tmr_delay;  \n\tuint32_t tmr_scale;  \n\tuint16_t cursor_width;  \n\tuint16_t cursor_pitch;  \n\tuint16_t cursor_height;  \n\tuint8_t cursor_bpp;  \n\tuint8_t debug_bits;  \n\n\tuint8_t reserved1;  \n\tuint8_t reserved2;  \n};\n\n \nenum dmub_cmd_cab_type {\n\t \n\tDMUB_CMD__CAB_NO_IDLE_OPTIMIZATION = 0,\n\t \n\tDMUB_CMD__CAB_NO_DCN_REQ = 1,\n\t \n\tDMUB_CMD__CAB_DCN_SS_FIT_IN_CAB = 2,\n};\n\n \nstruct dmub_rb_cmd_cab_for_ss {\n\tstruct dmub_cmd_header header;\n\tuint8_t cab_alloc_ways;  \n\tuint8_t debug_bits;      \n};\n\n \nenum mclk_switch_mode {\n\tNONE = 0,\n\tFPO = 1,\n\tSUBVP = 2,\n\tVBLANK = 3,\n};\n\n \nstruct dmub_cmd_fw_assisted_mclk_switch_pipe_data_v2 {\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t pix_clk_100hz;\n\t\t\tuint16_t main_vblank_start;\n\t\t\tuint16_t main_vblank_end;\n\t\t\tuint16_t mall_region_lines;\n\t\t\tuint16_t prefetch_lines;\n\t\t\tuint16_t prefetch_to_mall_start_lines;\n\t\t\tuint16_t processing_delay_lines;\n\t\t\tuint16_t htotal;  \n\t\t\tuint16_t vtotal;\n\t\t\tuint8_t main_pipe_index;\n\t\t\tuint8_t phantom_pipe_index;\n\t\t\t \n\t\t\tuint8_t scale_factor_numerator;\n\t\t\tuint8_t scale_factor_denominator;\n\t\t\tuint8_t is_drr;\n\t\t\tuint8_t main_split_pipe_index;\n\t\t\tuint8_t phantom_split_pipe_index;\n\t\t} subvp_data;\n\n\t\tstruct {\n\t\t\tuint32_t pix_clk_100hz;\n\t\t\tuint16_t vblank_start;\n\t\t\tuint16_t vblank_end;\n\t\t\tuint16_t vstartup_start;\n\t\t\tuint16_t vtotal;\n\t\t\tuint16_t htotal;\n\t\t\tuint8_t vblank_pipe_index;\n\t\t\tuint8_t padding[1];\n\t\t\tstruct {\n\t\t\t\tuint8_t drr_in_use;\n\t\t\t\tuint8_t drr_window_size_ms;\t \n\t\t\t\tuint16_t min_vtotal_supported;\t \n\t\t\t\tuint16_t max_vtotal_supported;\t \n\t\t\t\tuint8_t use_ramping;\t\t \n\t\t\t\tuint8_t drr_vblank_start_margin;\n\t\t\t} drr_info;\t\t\t\t \n\t\t} vblank_data;\n\t} pipe_config;\n\n\t \n\tuint8_t mode;  \n};\n\n \nstruct dmub_cmd_fw_assisted_mclk_switch_config_v2 {\n\tuint16_t watermark_a_cache;\n\tuint8_t vertical_int_margin_us;\n\tuint8_t pstate_allow_width_us;\n\tstruct dmub_cmd_fw_assisted_mclk_switch_pipe_data_v2 pipe_data[DMUB_MAX_SUBVP_STREAMS];\n};\n\n \nstruct dmub_rb_cmd_fw_assisted_mclk_switch_v2 {\n\tstruct dmub_cmd_header header;\n\tstruct dmub_cmd_fw_assisted_mclk_switch_config_v2 config_data;\n};\n\n \nenum dmub_cmd_idle_opt_type {\n\t \n\tDMUB_CMD__IDLE_OPT_DCN_RESTORE = 0,\n\n\t \n\tDMUB_CMD__IDLE_OPT_DCN_SAVE_INIT = 1,\n\n\t \n\tDMUB_CMD__IDLE_OPT_DCN_NOTIFY_IDLE = 2\n};\n\n \nstruct dmub_rb_cmd_idle_opt_dcn_restore {\n\tstruct dmub_cmd_header header;  \n};\n\n \nstruct dmub_dcn_notify_idle_cntl_data {\n\tuint8_t driver_idle;\n\tuint8_t pad[1];\n};\n\n \nstruct dmub_rb_cmd_idle_opt_dcn_notify_idle {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_dcn_notify_idle_cntl_data cntl_data;\n};\n\n \nstruct dmub_clocks {\n\tuint32_t dispclk_khz;  \n\tuint32_t dppclk_khz;  \n\tuint32_t dcfclk_khz;  \n\tuint32_t dcfclk_deep_sleep_khz;  \n};\n\n \nenum dmub_cmd_clk_mgr_type {\n\t \n\tDMUB_CMD__CLK_MGR_NOTIFY_CLOCKS = 0,\n};\n\n \nstruct dmub_rb_cmd_clk_mgr_notify_clocks {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_clocks clocks;  \n};\n\n \nstruct dmub_cmd_digx_encoder_control_data {\n\tunion dig_encoder_control_parameters_v1_5 dig;  \n};\n\n \nstruct dmub_rb_cmd_digx_encoder_control {\n\tstruct dmub_cmd_header header;   \n\tstruct dmub_cmd_digx_encoder_control_data encoder_control;  \n};\n\n \nstruct dmub_cmd_set_pixel_clock_data {\n\tstruct set_pixel_clock_parameter_v1_7 clk;  \n};\n\n \nstruct dmub_rb_cmd_set_pixel_clock {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_set_pixel_clock_data pixel_clock;  \n};\n\n \nstruct dmub_cmd_enable_disp_power_gating_data {\n\tstruct enable_disp_power_gating_parameters_v2_1 pwr;  \n};\n\n \nstruct dmub_rb_cmd_enable_disp_power_gating {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_enable_disp_power_gating_data power_gating;   \n};\n\n \nstruct dmub_dig_transmitter_control_data_v1_7 {\n\tuint8_t phyid;  \n\tuint8_t action;  \n\tunion {\n\t\tuint8_t digmode;  \n\t\tuint8_t dplaneset;  \n\t} mode_laneset;\n\tuint8_t lanenum;  \n\tunion {\n\t\tuint32_t symclk_10khz;  \n\t} symclk_units;\n\tuint8_t hpdsel;  \n\tuint8_t digfe_sel;  \n\tuint8_t connobj_id;  \n\tuint8_t HPO_instance;  \n\tuint8_t reserved1;  \n\tuint8_t reserved2[3];  \n\tuint32_t reserved3[11];  \n};\n\n \nunion dmub_cmd_dig1_transmitter_control_data {\n\tstruct dig_transmitter_control_parameters_v1_6 dig;  \n\tstruct dmub_dig_transmitter_control_data_v1_7 dig_v1_7;   \n};\n\n \nstruct dmub_rb_cmd_dig1_transmitter_control {\n\tstruct dmub_cmd_header header;  \n\tunion dmub_cmd_dig1_transmitter_control_data transmitter_control;  \n};\n\n \nstruct dmub_rb_cmd_domain_control_data {\n\tuint8_t inst : 6;  \n\tuint8_t power_gate : 1;  \n\tuint8_t reserved[3];  \n};\n\n \nstruct dmub_rb_cmd_domain_control {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_rb_cmd_domain_control_data data;  \n};\n\n \nstruct dmub_cmd_dig_dpia_control_data {\n\tuint8_t enc_id;          \n\tuint8_t action;          \n\tunion {\n\t\tuint8_t digmode;     \n\t\tuint8_t dplaneset;   \n\t} mode_laneset;\n\tuint8_t lanenum;         \n\tuint32_t symclk_10khz;   \n\tuint8_t hpdsel;          \n\tuint8_t digfe_sel;       \n\tuint8_t dpia_id;         \n\tuint8_t fec_rdy : 1;\n\tuint8_t reserved : 7;\n\tuint32_t reserved1;\n};\n\n \nstruct dmub_rb_cmd_dig1_dpia_control {\n\tstruct dmub_cmd_header header;\n\tstruct dmub_cmd_dig_dpia_control_data dpia_control;\n};\n\n \nstruct set_config_cmd_payload {\n\tuint8_t msg_type;  \n\tuint8_t msg_data;  \n};\n\n \nstruct dmub_cmd_set_config_control_data {\n\tstruct set_config_cmd_payload cmd_pkt;\n\tuint8_t instance;  \n\tuint8_t immed_status;  \n};\n\n \nstruct dmub_rb_cmd_set_config_access {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_set_config_control_data set_config_control;  \n};\n\n \nstruct dmub_cmd_mst_alloc_slots_control_data {\n\tuint8_t mst_alloc_slots;  \n\tuint8_t instance;  \n\tuint8_t immed_status;  \n\tuint8_t mst_slots_in_use;  \n};\n\n \nstruct dmub_rb_cmd_set_mst_alloc_slots {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_mst_alloc_slots_control_data mst_slots_control;  \n};\n\n \nstruct dmub_rb_cmd_dpia_hpd_int_enable {\n\tstruct dmub_cmd_header header;  \n\tuint32_t enable;  \n};\n\n \nstruct dmub_rb_cmd_dpphy_init {\n\tstruct dmub_cmd_header header;  \n\tuint8_t reserved[60];  \n};\n\n \nenum dp_aux_request_action {\n\t \n\tDP_AUX_REQ_ACTION_I2C_WRITE\t\t= 0x00,\n\t \n\tDP_AUX_REQ_ACTION_I2C_READ\t\t= 0x10,\n\t \n\tDP_AUX_REQ_ACTION_I2C_STATUS_REQ\t= 0x20,\n\t \n\tDP_AUX_REQ_ACTION_I2C_WRITE_MOT\t\t= 0x40,\n\t \n\tDP_AUX_REQ_ACTION_I2C_READ_MOT\t\t= 0x50,\n\t \n\tDP_AUX_REQ_ACTION_I2C_STATUS_REQ_MOT\t= 0x60,\n\t \n\tDP_AUX_REQ_ACTION_DPCD_WRITE\t\t= 0x80,\n\t \n\tDP_AUX_REQ_ACTION_DPCD_READ\t\t= 0x90\n};\n\n \nenum aux_return_code_type {\n\t \n\tAUX_RET_SUCCESS = 0,\n\t \n\tAUX_RET_ERROR_UNKNOWN,\n\t \n\tAUX_RET_ERROR_INVALID_REPLY,\n\t \n\tAUX_RET_ERROR_TIMEOUT,\n\t \n\tAUX_RET_ERROR_HPD_DISCON,\n\t \n\tAUX_RET_ERROR_ENGINE_ACQUIRE,\n\t \n\tAUX_RET_ERROR_INVALID_OPERATION,\n\t \n\tAUX_RET_ERROR_PROTOCOL_ERROR,\n};\n\n \nenum aux_channel_type {\n\t \n\tAUX_CHANNEL_LEGACY_DDC,\n\t \n\tAUX_CHANNEL_DPIA\n};\n\n \nstruct aux_transaction_parameters {\n\tuint8_t is_i2c_over_aux;  \n\tuint8_t action;  \n\tuint8_t length;  \n\tuint8_t reserved;  \n\tuint32_t address;  \n\tuint8_t data[16];  \n};\n\n \nstruct dmub_cmd_dp_aux_control_data {\n\tuint8_t instance;  \n\tuint8_t manual_acq_rel_enable;  \n\tuint8_t sw_crc_enabled;  \n\tuint8_t reserved0;  \n\tuint16_t timeout;  \n\tuint16_t reserved1;  \n\tenum aux_channel_type type;  \n\tstruct aux_transaction_parameters dpaux;  \n};\n\n \nstruct dmub_rb_cmd_dp_aux_access {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_dp_aux_control_data aux_control;\n};\n\n \nstruct dmub_rb_cmd_outbox1_enable {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tuint32_t enable;\n};\n\n \n \nstruct aux_reply_data {\n\t \n\tuint8_t command;\n\t \n\tuint8_t length;\n\t \n\tuint8_t pad[2];\n\t \n\tuint8_t data[16];\n};\n\n \nstruct aux_reply_control_data {\n\t \n\tuint32_t handle;\n\t \n\tuint8_t instance;\n\t \n\tuint8_t result;\n\t \n\tuint16_t pad;\n};\n\n \nstruct dmub_rb_cmd_dp_aux_reply {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct aux_reply_control_data control;\n\t \n\tstruct aux_reply_data reply_data;\n};\n\n \n \nenum dp_hpd_type {\n\t \n\tDP_HPD = 0,\n\t \n\tDP_IRQ\n};\n\n \nenum dp_hpd_status {\n\t \n\tDP_HPD_UNPLUG = 0,\n\t \n\tDP_HPD_PLUG\n};\n\n \nstruct dp_hpd_data {\n\t \n\tuint8_t instance;\n\t \n\tuint8_t hpd_type;\n\t \n\tuint8_t hpd_status;\n\t \n\tuint8_t pad;\n};\n\n \nstruct dmub_rb_cmd_dp_hpd_notify {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dp_hpd_data hpd_data;\n};\n\n \nenum set_config_status {\n\tSET_CONFIG_PENDING = 0,\n\tSET_CONFIG_ACK_RECEIVED,\n\tSET_CONFIG_RX_TIMEOUT,\n\tSET_CONFIG_UNKNOWN_ERROR,\n};\n\n \nstruct set_config_reply_control_data {\n\tuint8_t instance;  \n\tuint8_t status;  \n\tuint16_t pad;  \n};\n\n \nstruct dmub_rb_cmd_dp_set_config_reply {\n\tstruct dmub_cmd_header header;\n\tstruct set_config_reply_control_data set_config_reply_control;\n};\n\n \nstruct dpia_notification_header {\n\tuint8_t instance;  \n\tuint8_t reserved[3];\n\tenum dmub_cmd_dpia_notification_type type;  \n};\n\n \nstruct dpia_notification_common {\n\tuint8_t cmd_buffer[DMUB_RB_CMD_SIZE - sizeof(struct dmub_cmd_header)\n\t\t\t\t\t\t\t\t- sizeof(struct dpia_notification_header)];\n};\n\n \nstruct dpia_bw_allocation_notify_data {\n\tunion {\n\t\tstruct {\n\t\t\tuint16_t cm_bw_alloc_support: 1;  \n\t\t\tuint16_t bw_request_failed: 1;  \n\t\t\tuint16_t bw_request_succeeded: 1;  \n\t\t\tuint16_t est_bw_changed: 1;  \n\t\t\tuint16_t bw_alloc_cap_changed: 1;  \n\t\t\tuint16_t reserved: 11;  \n\t\t} bits;\n\n\t\tuint16_t flags;\n\t};\n\n\tuint8_t cm_id;  \n\tuint8_t group_id;  \n\tuint8_t granularity;  \n\tuint8_t estimated_bw;  \n\tuint8_t allocated_bw;  \n\tuint8_t reserved;\n};\n\n \nunion dpia_notification_data {\n\t \n\tstruct dpia_notification_common common_data;\n\n\t \n\tstruct dpia_bw_allocation_notify_data dpia_bw_alloc;\n};\n\n \nstruct dpia_notification_payload {\n\tstruct dpia_notification_header header;\n\tunion dpia_notification_data data;  \n};\n\n \nstruct dmub_rb_cmd_dpia_notification {\n\tstruct dmub_cmd_header header;  \n\tstruct dpia_notification_payload payload;  \n};\n\n \nstruct dmub_cmd_hpd_state_query_data {\n\tuint8_t instance;  \n\tuint8_t result;  \n\tuint16_t pad;  \n\tenum aux_channel_type ch_type;  \n\tenum aux_return_code_type status;  \n};\n\n \nstruct dmub_rb_cmd_query_hpd_state {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_hpd_state_query_data data;\n};\n\n \n\n \nenum dmub_cmd_psr_type {\n\t \n\tDMUB_CMD__PSR_SET_VERSION\t\t= 0,\n\t \n\tDMUB_CMD__PSR_COPY_SETTINGS\t\t= 1,\n\t \n\tDMUB_CMD__PSR_ENABLE\t\t\t= 2,\n\n\t \n\tDMUB_CMD__PSR_DISABLE\t\t\t= 3,\n\n\t \n\tDMUB_CMD__PSR_SET_LEVEL\t\t\t= 4,\n\n\t \n\tDMUB_CMD__PSR_FORCE_STATIC\t\t= 5,\n\t \n\tDMUB_CMD__SET_SINK_VTOTAL_IN_PSR_ACTIVE = 6,\n\t \n\tDMUB_CMD__SET_PSR_POWER_OPT = 7,\n};\n\nenum dmub_cmd_fams_type {\n\tDMUB_CMD__FAMS_SETUP_FW_CTRL\t= 0,\n\tDMUB_CMD__FAMS_DRR_UPDATE\t\t= 1,\n\tDMUB_CMD__HANDLE_SUBVP_CMD\t= 2,  \n\t \n\tDMUB_CMD__FAMS_SET_MANUAL_TRIGGER = 3,\n};\n\n \nenum psr_version {\n\t \n\tPSR_VERSION_1\t\t\t\t= 0,\n\t \n\tPSR_VERSION_SU_1\t\t\t= 1,\n\t \n\tPSR_VERSION_UNSUPPORTED\t\t\t= 0xFFFFFFFF,\n};\n\n \nenum dmub_cmd_mall_type {\n\t \n\tDMUB_CMD__MALL_ACTION_ALLOW = 0,\n\t \n\tDMUB_CMD__MALL_ACTION_DISALLOW = 1,\n\t \n\tDMUB_CMD__MALL_ACTION_COPY_CURSOR = 2,\n\t \n\tDMUB_CMD__MALL_ACTION_NO_DF_REQ = 3,\n};\n\n \nenum phy_link_rate {\n\t \n\tPHY_RATE_UNKNOWN = 0,\n\t \n\tPHY_RATE_162 = 1,\n\t \n\tPHY_RATE_216 = 2,\n\t \n\tPHY_RATE_243 = 3,\n\t \n\tPHY_RATE_270 = 4,\n\t \n\tPHY_RATE_324 = 5,\n\t \n\tPHY_RATE_432 = 6,\n\t \n\tPHY_RATE_540 = 7,\n\t \n\tPHY_RATE_810 = 8,\n\t \n\tPHY_RATE_1000 = 9,\n\t \n\tPHY_RATE_1350 = 10,\n\t \n\tPHY_RATE_2000 = 11,\n};\n\n \nenum dmub_phy_fsm_state {\n\tDMUB_PHY_FSM_POWER_UP_DEFAULT = 0,\n\tDMUB_PHY_FSM_RESET,\n\tDMUB_PHY_FSM_RESET_RELEASED,\n\tDMUB_PHY_FSM_SRAM_LOAD_DONE,\n\tDMUB_PHY_FSM_INITIALIZED,\n\tDMUB_PHY_FSM_CALIBRATED,\n\tDMUB_PHY_FSM_CALIBRATED_LP,\n\tDMUB_PHY_FSM_CALIBRATED_PG,\n\tDMUB_PHY_FSM_POWER_DOWN,\n\tDMUB_PHY_FSM_PLL_EN,\n\tDMUB_PHY_FSM_TX_EN,\n\tDMUB_PHY_FSM_FAST_LP,\n\tDMUB_PHY_FSM_P2_PLL_OFF_CPM,\n\tDMUB_PHY_FSM_P2_PLL_OFF_PG,\n\tDMUB_PHY_FSM_P2_PLL_OFF,\n\tDMUB_PHY_FSM_P2_PLL_ON,\n};\n\n \nstruct dmub_cmd_psr_copy_settings_data {\n\t \n\tunion dmub_psr_debug_flags debug;\n\t \n\tuint16_t psr_level;\n\t \n\tuint8_t dpp_inst;\n\t \n\tuint8_t mpcc_inst;\n\t \n\tuint8_t opp_inst;\n\t \n\tuint8_t otg_inst;\n\t \n\tuint8_t digfe_inst;\n\t \n\tuint8_t digbe_inst;\n\t \n\tuint8_t dpphy_inst;\n\t \n\tuint8_t aux_inst;\n\t \n\tuint8_t smu_optimizations_en;\n\t \n\tuint8_t frame_delay;\n\t \n\tuint8_t frame_cap_ind;\n\t \n\tuint8_t su_y_granularity;\n\t \n\tuint8_t line_capture_indication;\n\t \n\tuint8_t multi_disp_optimizations_en;\n\t \n\tuint16_t init_sdp_deadline;\n\t \n\tuint8_t rate_control_caps ;\n\t \n\tuint8_t force_ffu_mode;\n\t \n\tuint32_t line_time_in_us;\n\t \n\tuint8_t fec_enable_status;\n\t \n\tuint8_t fec_enable_delay_in100us;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t dsc_enable_status;\n\t \n\tuint8_t use_phy_fsm;\n\t \n\tuint8_t relock_delay_frame_cnt;\n\t \n\tuint8_t pad3;\n\t \n\tuint16_t dsc_slice_height;\n\t \n\tuint16_t pad;\n};\n\n \nstruct dmub_rb_cmd_psr_copy_settings {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_copy_settings_data psr_copy_settings_data;\n};\n\n \nstruct dmub_cmd_psr_set_level_data {\n\t \n\tuint16_t psr_level;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n};\n\n \nstruct dmub_rb_cmd_psr_set_level {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_set_level_data psr_set_level_data;\n};\n\nstruct dmub_rb_cmd_psr_enable_data {\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t phy_fsm_state;\n\t \n\tuint8_t phy_rate;\n};\n\n \nstruct dmub_rb_cmd_psr_enable {\n\t \n\tstruct dmub_cmd_header header;\n\n\tstruct dmub_rb_cmd_psr_enable_data data;\n};\n\n \nstruct dmub_cmd_psr_set_version_data {\n\t \n\tenum psr_version version;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_psr_set_version {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_set_version_data psr_set_version_data;\n};\n\nstruct dmub_cmd_psr_force_static_data {\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_psr_force_static {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_force_static_data psr_force_static_data;\n};\n\n \nunion dmub_psr_su_debug_flags {\n\t \n\tstruct {\n\t\t \n\t\tuint8_t update_dirty_rect_only : 1;\n\t\t \n\t\tuint8_t reset_state : 1;\n\t} bitfields;\n\n\t \n\tuint32_t u32All;\n};\n\n \nstruct dmub_cmd_update_dirty_rect_data {\n\t \n\tstruct dmub_rect src_dirty_rects[DMUB_MAX_DIRTY_RECTS];\n\t \n\tunion dmub_psr_su_debug_flags debug_flags;\n\t \n\tuint8_t pipe_idx;\n\t \n\tuint8_t dirty_rect_count;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n};\n\n \nstruct dmub_rb_cmd_update_dirty_rect {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_update_dirty_rect_data update_dirty_rect_data;\n};\n\n \nunion dmub_reg_cursor_control_cfg {\n\tstruct {\n\t\tuint32_t     cur_enable: 1;\n\t\tuint32_t         reser0: 3;\n\t\tuint32_t cur_2x_magnify: 1;\n\t\tuint32_t         reser1: 3;\n\t\tuint32_t           mode: 3;\n\t\tuint32_t         reser2: 5;\n\t\tuint32_t          pitch: 2;\n\t\tuint32_t         reser3: 6;\n\t\tuint32_t line_per_chunk: 5;\n\t\tuint32_t         reser4: 3;\n\t} bits;\n\tuint32_t raw;\n};\nstruct dmub_cursor_position_cache_hubp {\n\tunion dmub_reg_cursor_control_cfg cur_ctl;\n\tunion dmub_reg_position_cfg {\n\t\tstruct {\n\t\t\tuint32_t cur_x_pos: 16;\n\t\t\tuint32_t cur_y_pos: 16;\n\t\t} bits;\n\t\tuint32_t raw;\n\t} position;\n\tunion dmub_reg_hot_spot_cfg {\n\t\tstruct {\n\t\t\tuint32_t hot_x: 16;\n\t\t\tuint32_t hot_y: 16;\n\t\t} bits;\n\t\tuint32_t raw;\n\t} hot_spot;\n\tunion dmub_reg_dst_offset_cfg {\n\t\tstruct {\n\t\t\tuint32_t dst_x_offset: 13;\n\t\t\tuint32_t reserved: 19;\n\t\t} bits;\n\t\tuint32_t raw;\n\t} dst_offset;\n};\n\nunion dmub_reg_cur0_control_cfg {\n\tstruct {\n\t\tuint32_t     cur0_enable: 1;\n\t\tuint32_t  expansion_mode: 1;\n\t\tuint32_t          reser0: 1;\n\t\tuint32_t     cur0_rom_en: 1;\n\t\tuint32_t            mode: 3;\n\t\tuint32_t        reserved: 25;\n\t} bits;\n\tuint32_t raw;\n};\nstruct dmub_cursor_position_cache_dpp {\n\tunion dmub_reg_cur0_control_cfg cur0_ctl;\n};\nstruct dmub_cursor_position_cfg {\n\tstruct  dmub_cursor_position_cache_hubp pHubp;\n\tstruct  dmub_cursor_position_cache_dpp  pDpp;\n\tuint8_t pipe_idx;\n\t \n\tuint8_t padding[3];\n};\n\nstruct dmub_cursor_attribute_cache_hubp {\n\tuint32_t SURFACE_ADDR_HIGH;\n\tuint32_t SURFACE_ADDR;\n\tunion    dmub_reg_cursor_control_cfg  cur_ctl;\n\tunion    dmub_reg_cursor_size_cfg {\n\t\tstruct {\n\t\t\tuint32_t width: 16;\n\t\t\tuint32_t height: 16;\n\t\t} bits;\n\t\tuint32_t raw;\n\t} size;\n\tunion    dmub_reg_cursor_settings_cfg {\n\t\tstruct {\n\t\t\tuint32_t     dst_y_offset: 8;\n\t\t\tuint32_t chunk_hdl_adjust: 2;\n\t\t\tuint32_t         reserved: 22;\n\t\t} bits;\n\t\tuint32_t raw;\n\t} settings;\n};\nstruct dmub_cursor_attribute_cache_dpp {\n\tunion dmub_reg_cur0_control_cfg cur0_ctl;\n};\nstruct dmub_cursor_attributes_cfg {\n\tstruct  dmub_cursor_attribute_cache_hubp aHubp;\n\tstruct  dmub_cursor_attribute_cache_dpp  aDpp;\n};\n\nstruct dmub_cmd_update_cursor_payload0 {\n\t \n\tstruct dmub_rect cursor_rect;\n\t \n\tunion dmub_psr_su_debug_flags debug_flags;\n\t \n\tuint8_t enable;\n\t \n\tuint8_t pipe_idx;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tstruct dmub_cursor_position_cfg position_cfg;\n};\n\nstruct dmub_cmd_update_cursor_payload1 {\n\tstruct dmub_cursor_attributes_cfg attribute_cfg;\n};\n\nunion dmub_cmd_update_cursor_info_data {\n\tstruct dmub_cmd_update_cursor_payload0 payload0;\n\tstruct dmub_cmd_update_cursor_payload1 payload1;\n};\n \nstruct dmub_rb_cmd_update_cursor_info {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tunion dmub_cmd_update_cursor_info_data update_cursor_info_data;\n};\n\n \nstruct dmub_cmd_psr_set_vtotal_data {\n\t \n\tuint16_t psr_vtotal_idle;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint16_t psr_vtotal_su;\n\t \n\tuint8_t pad2[2];\n};\n\n \nstruct dmub_rb_cmd_psr_set_vtotal {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_set_vtotal_data psr_set_vtotal_data;\n};\n\n \nstruct dmub_cmd_psr_set_power_opt_data {\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t pad[2];\n\t \n\tuint32_t power_opt;\n};\n\n#define REPLAY_RESIDENCY_MODE_SHIFT            (0)\n#define REPLAY_RESIDENCY_ENABLE_SHIFT          (1)\n\n#define REPLAY_RESIDENCY_MODE_MASK             (0x1 << REPLAY_RESIDENCY_MODE_SHIFT)\n# define REPLAY_RESIDENCY_MODE_PHY             (0x0 << REPLAY_RESIDENCY_MODE_SHIFT)\n# define REPLAY_RESIDENCY_MODE_ALPM            (0x1 << REPLAY_RESIDENCY_MODE_SHIFT)\n\n#define REPLAY_RESIDENCY_ENABLE_MASK           (0x1 << REPLAY_RESIDENCY_ENABLE_SHIFT)\n# define REPLAY_RESIDENCY_DISABLE              (0x0 << REPLAY_RESIDENCY_ENABLE_SHIFT)\n# define REPLAY_RESIDENCY_ENABLE               (0x1 << REPLAY_RESIDENCY_ENABLE_SHIFT)\n\nenum replay_state {\n\tREPLAY_STATE_0\t\t\t= 0x0,\n\tREPLAY_STATE_1\t\t\t= 0x10,\n\tREPLAY_STATE_1A\t\t\t= 0x11,\n\tREPLAY_STATE_2\t\t\t= 0x20,\n\tREPLAY_STATE_3\t\t\t= 0x30,\n\tREPLAY_STATE_3INIT\t\t= 0x31,\n\tREPLAY_STATE_4\t\t\t= 0x40,\n\tREPLAY_STATE_4A\t\t\t= 0x41,\n\tREPLAY_STATE_4B\t\t\t= 0x42,\n\tREPLAY_STATE_4C\t\t\t= 0x43,\n\tREPLAY_STATE_4D\t\t\t= 0x44,\n\tREPLAY_STATE_4B_LOCKED\t\t= 0x4A,\n\tREPLAY_STATE_4C_UNLOCKED\t= 0x4B,\n\tREPLAY_STATE_5\t\t\t= 0x50,\n\tREPLAY_STATE_5A\t\t\t= 0x51,\n\tREPLAY_STATE_5B\t\t\t= 0x52,\n\tREPLAY_STATE_5A_LOCKED\t\t= 0x5A,\n\tREPLAY_STATE_5B_UNLOCKED\t= 0x5B,\n\tREPLAY_STATE_6\t\t\t= 0x60,\n\tREPLAY_STATE_6A\t\t\t= 0x61,\n\tREPLAY_STATE_6B\t\t\t= 0x62,\n\tREPLAY_STATE_INVALID\t\t= 0xFF,\n};\n\n \nenum dmub_cmd_replay_type {\n\t \n\tDMUB_CMD__REPLAY_COPY_SETTINGS\t\t= 0,\n\t \n\tDMUB_CMD__REPLAY_ENABLE\t\t\t= 1,\n\t \n\tDMUB_CMD__SET_REPLAY_POWER_OPT\t\t= 2,\n\t \n\tDMUB_CMD__REPLAY_SET_COASTING_VTOTAL\t= 3,\n};\n\n \nstruct dmub_cmd_replay_copy_settings_data {\n\t \n\tunion replay_debug_flags debug;\n\n\t \n\tunion replay_hw_flags flags;\n\n\t \n\tuint8_t dpp_inst;\n\t \n\tuint8_t otg_inst;\n\t \n\tuint8_t digfe_inst;\n\t \n\tuint8_t digbe_inst;\n\t \n\tuint8_t aux_inst;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t pixel_deviation_per_line;\n\t \n\tuint8_t max_deviation_line;\n\t \n\tuint32_t line_time_in_ns;\n\t \n\tuint8_t dpphy_inst;\n\t \n\tuint8_t smu_optimizations_en;\n\t \n\tuint8_t replay_timing_sync_supported;\n\t \n\tuint8_t use_phy_fsm;\n};\n\n \nstruct dmub_rb_cmd_replay_copy_settings {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_replay_copy_settings_data replay_copy_settings_data;\n};\n\n \nenum replay_enable {\n\t \n\tREPLAY_DISABLE\t\t\t\t= 0,\n\t \n\tREPLAY_ENABLE\t\t\t\t= 1,\n};\n\n \nstruct dmub_rb_cmd_replay_enable_data {\n\t \n\tuint8_t enable;\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t phy_fsm_state;\n\t \n\tuint8_t phy_rate;\n};\n\n \nstruct dmub_rb_cmd_replay_enable {\n\t \n\tstruct dmub_cmd_header header;\n\n\tstruct dmub_rb_cmd_replay_enable_data data;\n};\n\n \nstruct dmub_cmd_replay_set_power_opt_data {\n\t \n\tuint8_t panel_inst;\n\t \n\tuint8_t pad[3];\n\t \n\tuint32_t power_opt;\n};\n\n \nstruct dmub_rb_cmd_replay_set_power_opt {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_replay_set_power_opt_data replay_set_power_opt_data;\n};\n\n \nstruct dmub_cmd_replay_set_coasting_vtotal_data {\n\t \n\tuint16_t coasting_vtotal;\n\t \n\tuint8_t cmd_version;\n\t \n\tuint8_t panel_inst;\n};\n\n \nstruct dmub_rb_cmd_replay_set_coasting_vtotal {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_replay_set_coasting_vtotal_data replay_set_coasting_vtotal_data;\n};\n\n \nstruct dmub_rb_cmd_psr_set_power_opt {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_psr_set_power_opt_data psr_set_power_opt_data;\n};\n\n \nunion dmub_hw_lock_flags {\n\t \n\tstruct {\n\t\t \n\t\tuint8_t lock_pipe   : 1;\n\t\t \n\t\tuint8_t lock_cursor : 1;\n\t\t \n\t\tuint8_t lock_dig    : 1;\n\t\t \n\t\tuint8_t triple_buffer_lock : 1;\n\t} bits;\n\n\t \n\tuint8_t u8All;\n};\n\n \nstruct dmub_hw_lock_inst_flags {\n\t \n\tuint8_t otg_inst;\n\t \n\tuint8_t opp_inst;\n\t \n\tuint8_t dig_inst;\n\t \n\tuint8_t pad;\n};\n\n \nenum hw_lock_client {\n\t \n\tHW_LOCK_CLIENT_DRIVER = 0,\n\t \n\tHW_LOCK_CLIENT_PSR_SU\t\t= 1,\n\t \n\tHW_LOCK_CLIENT_REPLAY           = 4,\n\t \n\tHW_LOCK_CLIENT_INVALID = 0xFFFFFFFF,\n};\n\n \nstruct dmub_cmd_lock_hw_data {\n\t \n\tenum hw_lock_client client;\n\t \n\tstruct dmub_hw_lock_inst_flags inst_flags;\n\t \n\tunion dmub_hw_lock_flags hw_locks;\n\t \n\tuint8_t lock;\n\t \n\tuint8_t should_release;\n\t \n\tuint8_t pad;\n};\n\n \nstruct dmub_rb_cmd_lock_hw {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_lock_hw_data lock_hw_data;\n};\n\n \nenum dmub_cmd_abm_type {\n\t \n\tDMUB_CMD__ABM_INIT_CONFIG\t= 0,\n\t \n\tDMUB_CMD__ABM_SET_PIPE\t\t= 1,\n\t \n\tDMUB_CMD__ABM_SET_BACKLIGHT\t= 2,\n\t \n\tDMUB_CMD__ABM_SET_LEVEL\t\t= 3,\n\t \n\tDMUB_CMD__ABM_SET_AMBIENT_LEVEL\t= 4,\n\t \n\tDMUB_CMD__ABM_SET_PWM_FRAC\t= 5,\n\n\t \n\tDMUB_CMD__ABM_PAUSE\t= 6,\n\n\t \n\tDMUB_CMD__ABM_SAVE_RESTORE\t= 7,\n};\n\n \nstruct abm_config_table {\n\t \n\tuint16_t crgb_thresh[NUM_POWER_FN_SEGS];                 \n\t \n\tuint16_t crgb_offset[NUM_POWER_FN_SEGS];                 \n\t \n\tuint16_t crgb_slope[NUM_POWER_FN_SEGS];                  \n\t \n\tuint16_t backlight_thresholds[NUM_BL_CURVE_SEGS];        \n\t \n\tuint16_t backlight_offsets[NUM_BL_CURVE_SEGS];           \n\t \n\tuint16_t ambient_thresholds_lux[NUM_AMBI_LEVEL];         \n\t \n\tuint16_t min_abm_backlight;                              \n\t \n\tuint8_t min_reduction[NUM_AMBI_LEVEL][NUM_AGGR_LEVEL];   \n\t \n\tuint8_t max_reduction[NUM_AMBI_LEVEL][NUM_AGGR_LEVEL];   \n\t \n\tuint8_t bright_pos_gain[NUM_AMBI_LEVEL][NUM_AGGR_LEVEL]; \n\t \n\tuint8_t dark_pos_gain[NUM_AMBI_LEVEL][NUM_AGGR_LEVEL];   \n\t \n\tuint8_t hybrid_factor[NUM_AGGR_LEVEL];                   \n\t \n\tuint8_t contrast_factor[NUM_AGGR_LEVEL];                 \n\t \n\tuint8_t deviation_gain[NUM_AGGR_LEVEL];                  \n\t \n\tuint8_t min_knee[NUM_AGGR_LEVEL];                        \n\t \n\tuint8_t max_knee[NUM_AGGR_LEVEL];                        \n\t \n\tuint8_t iir_curve[NUM_AMBI_LEVEL];                       \n\t \n\tuint8_t pad3[3];                                         \n\t \n\tuint16_t blRampReduction[NUM_AGGR_LEVEL];                \n\t \n\tuint16_t blRampStart[NUM_AGGR_LEVEL];                    \n};\n\n \nstruct dmub_cmd_abm_set_pipe_data {\n\t \n\tuint8_t otg_inst;\n\n\t \n\tuint8_t panel_inst;\n\n\t \n\tuint8_t set_pipe_option;\n\n\t \n\tuint8_t ramping_boundary;\n\n\t \n\tuint8_t pwrseq_inst;\n\n\t \n\tuint8_t pad[3];\n};\n\n \nstruct dmub_rb_cmd_abm_set_pipe {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_set_pipe_data abm_set_pipe_data;\n};\n\n \nstruct dmub_cmd_abm_set_backlight_data {\n\t \n\tuint32_t frame_ramp;\n\n\t \n\tuint32_t backlight_user_level;\n\n\t \n\tuint8_t version;\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_abm_set_backlight {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_set_backlight_data abm_set_backlight_data;\n};\n\n \nstruct dmub_cmd_abm_set_level_data {\n\t \n\tuint32_t level;\n\n\t \n\tuint8_t version;\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_abm_set_level {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_set_level_data abm_set_level_data;\n};\n\n \nstruct dmub_cmd_abm_set_ambient_level_data {\n\t \n\tuint32_t ambient_lux;\n\n\t \n\tuint8_t version;\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_abm_set_ambient_level {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_set_ambient_level_data abm_set_ambient_level_data;\n};\n\n \nstruct dmub_cmd_abm_set_pwm_frac_data {\n\t \n\tuint32_t fractional_pwm;\n\n\t \n\tuint8_t version;\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_abm_set_pwm_frac {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_set_pwm_frac_data abm_set_pwm_frac_data;\n};\n\n \nstruct dmub_cmd_abm_init_config_data {\n\t \n\tunion dmub_addr src;\n\n\t \n\tuint16_t bytes;\n\n\n\t \n\tuint8_t version;\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t pad[2];\n};\n\n \nstruct dmub_rb_cmd_abm_init_config {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_init_config_data abm_init_config_data;\n};\n\n \n\nstruct dmub_cmd_abm_pause_data {\n\n\t \n\tuint8_t panel_mask;\n\n\t \n\tuint8_t otg_inst;\n\n\t \n\tuint8_t enable;\n\n\t \n\tuint8_t pad[1];\n};\n\n\n \nstruct dmub_rb_cmd_abm_pause {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tstruct dmub_cmd_abm_pause_data abm_pause_data;\n};\n\n \nstruct dmub_rb_cmd_abm_save_restore {\n\t \n\tstruct dmub_cmd_header header;\n\n\t \n\tuint8_t otg_inst;\n\n\t \n\tuint8_t freeze;\n\n\t \n\tuint8_t debug;\n\n\t \n\tstruct dmub_cmd_abm_init_config_data abm_init_config_data;\n};\n\n \nstruct dmub_cmd_query_feature_caps_data {\n\t \n\tstruct dmub_feature_caps feature_caps;\n};\n\n \nstruct dmub_rb_cmd_query_feature_caps {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_query_feature_caps_data query_feature_caps_data;\n};\n\n \nstruct dmub_cmd_visual_confirm_color_data {\n\t \nstruct dmub_visual_confirm_color visual_confirm_color;\n};\n\n \nstruct dmub_rb_cmd_get_visual_confirm_color {\n  \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_visual_confirm_color_data visual_confirm_color_data;\n};\n\nstruct dmub_optc_state {\n\tuint32_t v_total_max;\n\tuint32_t v_total_min;\n\tuint32_t tg_inst;\n};\n\nstruct dmub_rb_cmd_drr_update {\n\t\tstruct dmub_cmd_header header;\n\t\tstruct dmub_optc_state dmub_optc_state_req;\n};\n\nstruct dmub_cmd_fw_assisted_mclk_switch_pipe_data {\n\tuint32_t pix_clk_100hz;\n\tuint8_t max_ramp_step;\n\tuint8_t pipes;\n\tuint8_t min_refresh_in_hz;\n\tuint8_t pipe_count;\n\tuint8_t pipe_index[4];\n};\n\nstruct dmub_cmd_fw_assisted_mclk_switch_config {\n\tuint8_t fams_enabled;\n\tuint8_t visual_confirm_enabled;\n\tuint16_t vactive_stretch_margin_us; \n\tstruct dmub_cmd_fw_assisted_mclk_switch_pipe_data pipe_data[DMUB_MAX_FPO_STREAMS];\n};\n\nstruct dmub_rb_cmd_fw_assisted_mclk_switch {\n\tstruct dmub_cmd_header header;\n\tstruct dmub_cmd_fw_assisted_mclk_switch_config config_data;\n};\n\n \nenum dmub_cmd_panel_cntl_type {\n\t \n\tDMUB_CMD__PANEL_CNTL_HW_INIT = 0,\n\t \n\tDMUB_CMD__PANEL_CNTL_QUERY_BACKLIGHT_INFO = 1,\n};\n\n \nstruct dmub_cmd_panel_cntl_data {\n\tuint32_t pwrseq_inst;  \n\tuint32_t current_backlight;  \n\tuint32_t bl_pwm_cntl;  \n\tuint32_t bl_pwm_period_cntl;  \n\tuint32_t bl_pwm_ref_div1;  \n\tuint8_t is_backlight_on : 1;  \n\tuint8_t is_powered_on : 1;  \n\tuint8_t padding[3];\n\tuint32_t bl_pwm_ref_div2;  \n\tuint8_t reserved[4];\n};\n\n \nstruct dmub_rb_cmd_panel_cntl {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_cmd_panel_cntl_data data;  \n};\n\n \nstruct dmub_cmd_lvtma_control_data {\n\tuint8_t uc_pwr_action;  \n\tuint8_t bypass_panel_control_wait;\n\tuint8_t reserved_0[2];  \n\tuint8_t pwrseq_inst;  \n\tuint8_t reserved_1[3];  \n};\n\n \nstruct dmub_rb_cmd_lvtma_control {\n\t \n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_lvtma_control_data data;\n};\n\n \nstruct dmub_rb_cmd_transmitter_query_dp_alt_data {\n\tuint8_t phy_id;  \n\tuint8_t is_usb;  \n\tuint8_t is_dp_alt_disable;  \n\tuint8_t is_dp4;  \n};\n\n \nstruct dmub_rb_cmd_transmitter_query_dp_alt {\n\tstruct dmub_cmd_header header;  \n\tstruct dmub_rb_cmd_transmitter_query_dp_alt_data data;  \n};\n\n \n#define DMUB_EDID_CEA_DATA_CHUNK_BYTES 8\n\n \nstruct dmub_cmd_send_edid_cea {\n\tuint16_t offset;\t \n\tuint8_t length;\t \n\tuint16_t cea_total_length;   \n\tuint8_t payload[DMUB_EDID_CEA_DATA_CHUNK_BYTES];  \n\tuint8_t pad[3];  \n};\n\n \nstruct dmub_cmd_edid_cea_amd_vsdb {\n\tuint8_t vsdb_found;\t\t \n\tuint8_t freesync_supported;\t \n\tuint16_t amd_vsdb_version;\t \n\tuint16_t min_frame_rate;\t \n\tuint16_t max_frame_rate;\t \n};\n\n \nstruct dmub_cmd_edid_cea_ack {\n\tuint16_t offset;\t \n\tuint8_t success;\t \n\tuint8_t pad;\t\t \n};\n\n \nenum dmub_cmd_edid_cea_reply_type {\n\tDMUB_CMD__EDID_CEA_AMD_VSDB\t= 1,  \n\tDMUB_CMD__EDID_CEA_ACK\t\t= 2,  \n};\n\n \nstruct dmub_rb_cmd_edid_cea {\n\tstruct dmub_cmd_header header;\t \n\tunion dmub_cmd_edid_cea_data {\n\t\tstruct dmub_cmd_send_edid_cea input;  \n\t\tstruct dmub_cmd_edid_cea_output {  \n\t\t\tuint8_t type;\t \n\t\t\tunion {\n\t\t\t\tstruct dmub_cmd_edid_cea_amd_vsdb amd_vsdb;\n\t\t\t\tstruct dmub_cmd_edid_cea_ack ack;\n\t\t\t};\n\t\t} output;\t \n\t} data;\t \n\n};\n\n \nstruct dmub_cmd_cable_id_input {\n\tuint8_t phy_inst;   \n};\n\n \nstruct dmub_cmd_cable_id_output {\n\tuint8_t UHBR10_20_CAPABILITY\t:2;  \n\tuint8_t UHBR13_5_CAPABILITY\t:1;  \n\tuint8_t CABLE_TYPE\t\t:3;  \n\tuint8_t RESERVED\t\t:2;  \n};\n\n \nstruct dmub_rb_cmd_get_usbc_cable_id {\n\tstruct dmub_cmd_header header;  \n\t \n\tunion dmub_cmd_cable_id_data {\n\t\tstruct dmub_cmd_cable_id_input input;  \n\t\tstruct dmub_cmd_cable_id_output output;  \n\t\tuint8_t output_raw;  \n\t} data;\n};\n\n \nenum dmub_cmd_secure_display_type {\n\tDMUB_CMD__SECURE_DISPLAY_TEST_CMD = 0,\t\t \n\tDMUB_CMD__SECURE_DISPLAY_CRC_STOP_UPDATE,\n\tDMUB_CMD__SECURE_DISPLAY_CRC_WIN_NOTIFY\n};\n\n \nstruct dmub_rb_cmd_secure_display {\n\tstruct dmub_cmd_header header;\n\t \n\tstruct dmub_cmd_roi_info {\n\t\tuint16_t x_start;\n\t\tuint16_t x_end;\n\t\tuint16_t y_start;\n\t\tuint16_t y_end;\n\t\tuint8_t otg_id;\n\t\tuint8_t phy_id;\n\t} roi_info;\n};\n\n \nunion dmub_rb_cmd {\n\t \n\tstruct dmub_rb_cmd_common cmd_common;\n\t \n\tstruct dmub_rb_cmd_read_modify_write read_modify_write;\n\t \n\tstruct dmub_rb_cmd_reg_field_update_sequence reg_field_update_seq;\n\t \n\tstruct dmub_rb_cmd_burst_write burst_write;\n\t \n\tstruct dmub_rb_cmd_reg_wait reg_wait;\n\t \n\tstruct dmub_rb_cmd_digx_encoder_control digx_encoder_control;\n\t \n\tstruct dmub_rb_cmd_set_pixel_clock set_pixel_clock;\n\t \n\tstruct dmub_rb_cmd_enable_disp_power_gating enable_disp_power_gating;\n\t \n\tstruct dmub_rb_cmd_dpphy_init dpphy_init;\n\t \n\tstruct dmub_rb_cmd_dig1_transmitter_control dig1_transmitter_control;\n\t \n\tstruct dmub_rb_cmd_domain_control domain_control;\n\t \n\tstruct dmub_rb_cmd_psr_set_version psr_set_version;\n\t \n\tstruct dmub_rb_cmd_psr_copy_settings psr_copy_settings;\n\t \n\tstruct dmub_rb_cmd_psr_enable psr_enable;\n\t \n\tstruct dmub_rb_cmd_psr_set_level psr_set_level;\n\t \n\tstruct dmub_rb_cmd_psr_force_static psr_force_static;\n\t \n\tstruct dmub_rb_cmd_update_dirty_rect update_dirty_rect;\n\t \n\tstruct dmub_rb_cmd_update_cursor_info update_cursor_info;\n\t \n\tstruct dmub_rb_cmd_lock_hw lock_hw;\n\t \n\tstruct dmub_rb_cmd_psr_set_vtotal psr_set_vtotal;\n\t \n\tstruct dmub_rb_cmd_psr_set_power_opt psr_set_power_opt;\n\t \n\tstruct dmub_rb_cmd_PLAT_54186_wa PLAT_54186_wa;\n\t \n\tstruct dmub_rb_cmd_mall mall;\n\t \n\tstruct dmub_rb_cmd_cab_for_ss cab;\n\n\tstruct dmub_rb_cmd_fw_assisted_mclk_switch_v2 fw_assisted_mclk_switch_v2;\n\n\t \n\tstruct dmub_rb_cmd_idle_opt_dcn_restore dcn_restore;\n\n\t \n\tstruct dmub_rb_cmd_clk_mgr_notify_clocks notify_clocks;\n\n\t \n\tstruct dmub_rb_cmd_panel_cntl panel_cntl;\n\t \n\tstruct dmub_rb_cmd_abm_set_pipe abm_set_pipe;\n\n\t \n\tstruct dmub_rb_cmd_abm_set_backlight abm_set_backlight;\n\n\t \n\tstruct dmub_rb_cmd_abm_set_level abm_set_level;\n\n\t \n\tstruct dmub_rb_cmd_abm_set_ambient_level abm_set_ambient_level;\n\n\t \n\tstruct dmub_rb_cmd_abm_set_pwm_frac abm_set_pwm_frac;\n\n\t \n\tstruct dmub_rb_cmd_abm_init_config abm_init_config;\n\n\t \n\tstruct dmub_rb_cmd_abm_pause abm_pause;\n\n\t \n\tstruct dmub_rb_cmd_abm_save_restore abm_save_restore;\n\n\t \n\tstruct dmub_rb_cmd_dp_aux_access dp_aux_access;\n\n\t \n\tstruct dmub_rb_cmd_outbox1_enable outbox1_enable;\n\n\t \n\tstruct dmub_rb_cmd_query_feature_caps query_feature_caps;\n\n\t \n\tstruct dmub_rb_cmd_get_visual_confirm_color visual_confirm_color;\n\tstruct dmub_rb_cmd_drr_update drr_update;\n\tstruct dmub_rb_cmd_fw_assisted_mclk_switch fw_assisted_mclk_switch;\n\n\t \n\tstruct dmub_rb_cmd_lvtma_control lvtma_control;\n\t \n\tstruct dmub_rb_cmd_transmitter_query_dp_alt query_dp_alt;\n\t \n\tstruct dmub_rb_cmd_dig1_dpia_control dig1_dpia_control;\n\t \n\tstruct dmub_rb_cmd_set_config_access set_config_access;\n\t \n\tstruct dmub_rb_cmd_set_mst_alloc_slots set_mst_alloc_slots;\n\t \n\tstruct dmub_rb_cmd_edid_cea edid_cea;\n\t \n\tstruct dmub_rb_cmd_get_usbc_cable_id cable_id;\n\n\t \n\tstruct dmub_rb_cmd_query_hpd_state query_hpd;\n\t \n\tstruct dmub_rb_cmd_secure_display secure_display;\n\n\t \n\tstruct dmub_rb_cmd_dpia_hpd_int_enable dpia_hpd_int_enable;\n\t \n\tstruct dmub_rb_cmd_idle_opt_dcn_notify_idle idle_opt_notify_idle;\n\t \n\tstruct dmub_rb_cmd_replay_copy_settings replay_copy_settings;\n\t \n\tstruct dmub_rb_cmd_replay_enable replay_enable;\n\t \n\tstruct dmub_rb_cmd_replay_set_power_opt replay_set_power_opt;\n\t \n\tstruct dmub_rb_cmd_replay_set_coasting_vtotal replay_set_coasting_vtotal;\n};\n\n \nunion dmub_rb_out_cmd {\n\t \n\tstruct dmub_rb_cmd_common cmd_common;\n\t \n\tstruct dmub_rb_cmd_dp_aux_reply dp_aux_reply;\n\t \n\tstruct dmub_rb_cmd_dp_hpd_notify dp_hpd_notify;\n\t \n\tstruct dmub_rb_cmd_dp_set_config_reply set_config_reply;\n\t \n\tstruct dmub_rb_cmd_dpia_notification dpia_notification;\n};\n#pragma pack(pop)\n\n\n\n\n\n\n\n\n#if defined(__cplusplus)\nextern \"C\" {\n#endif\n\n \nstruct dmub_rb_init_params {\n\tvoid *ctx;  \n\tvoid *base_address;  \n\tuint32_t capacity;  \n\tuint32_t read_ptr;  \n\tuint32_t write_ptr;  \n};\n\n \nstruct dmub_rb {\n\tvoid *base_address;  \n\tuint32_t rptr;  \n\tuint32_t wrpt;  \n\tuint32_t capacity;  \n\n\tvoid *ctx;  \n\tvoid *dmub;  \n};\n\n \nstatic inline bool dmub_rb_empty(struct dmub_rb *rb)\n{\n\treturn (rb->wrpt == rb->rptr);\n}\n\n \nstatic inline bool dmub_rb_full(struct dmub_rb *rb)\n{\n\tuint32_t data_count;\n\n\tif (rb->wrpt >= rb->rptr)\n\t\tdata_count = rb->wrpt - rb->rptr;\n\telse\n\t\tdata_count = rb->capacity - (rb->rptr - rb->wrpt);\n\n\treturn (data_count == (rb->capacity - DMUB_RB_CMD_SIZE));\n}\n\n \nstatic inline bool dmub_rb_push_front(struct dmub_rb *rb,\n\t\t\t\t      const union dmub_rb_cmd *cmd)\n{\n\tuint64_t volatile *dst = (uint64_t volatile *)((uint8_t *)(rb->base_address) + rb->wrpt);\n\tconst uint64_t *src = (const uint64_t *)cmd;\n\tuint8_t i;\n\n\tif (dmub_rb_full(rb))\n\t\treturn false;\n\n\t\n\tfor (i = 0; i < DMUB_RB_CMD_SIZE / sizeof(uint64_t); i++)\n\t\t*dst++ = *src++;\n\n\trb->wrpt += DMUB_RB_CMD_SIZE;\n\n\tif (rb->wrpt >= rb->capacity)\n\t\trb->wrpt %= rb->capacity;\n\n\treturn true;\n}\n\n \nstatic inline bool dmub_rb_out_push_front(struct dmub_rb *rb,\n\t\t\t\t      const union dmub_rb_out_cmd *cmd)\n{\n\tuint8_t *dst = (uint8_t *)(rb->base_address) + rb->wrpt;\n\tconst uint8_t *src = (const uint8_t *)cmd;\n\n\tif (dmub_rb_full(rb))\n\t\treturn false;\n\n\tdmub_memcpy(dst, src, DMUB_RB_CMD_SIZE);\n\n\trb->wrpt += DMUB_RB_CMD_SIZE;\n\n\tif (rb->wrpt >= rb->capacity)\n\t\trb->wrpt %= rb->capacity;\n\n\treturn true;\n}\n\n \nstatic inline bool dmub_rb_front(struct dmub_rb *rb,\n\t\t\t\t union dmub_rb_cmd  **cmd)\n{\n\tuint8_t *rb_cmd = (uint8_t *)(rb->base_address) + rb->rptr;\n\n\tif (dmub_rb_empty(rb))\n\t\treturn false;\n\n\t*cmd = (union dmub_rb_cmd *)rb_cmd;\n\n\treturn true;\n}\n\n \nstatic inline void dmub_rb_get_rptr_with_offset(struct dmub_rb *rb,\n\t\t\t\t  uint32_t num_cmds,\n\t\t\t\t  uint32_t *next_rptr)\n{\n\t*next_rptr = rb->rptr + DMUB_RB_CMD_SIZE * num_cmds;\n\n\tif (*next_rptr >= rb->capacity)\n\t\t*next_rptr %= rb->capacity;\n}\n\n \nstatic inline bool dmub_rb_peek_offset(struct dmub_rb *rb,\n\t\t\t\t union dmub_rb_cmd  **cmd,\n\t\t\t\t uint32_t rptr)\n{\n\tuint8_t *rb_cmd = (uint8_t *)(rb->base_address) + rptr;\n\n\tif (dmub_rb_empty(rb))\n\t\treturn false;\n\n\t*cmd = (union dmub_rb_cmd *)rb_cmd;\n\n\treturn true;\n}\n\n \nstatic inline bool dmub_rb_out_front(struct dmub_rb *rb,\n\t\t\t\t union dmub_rb_out_cmd *cmd)\n{\n\tconst uint64_t volatile *src = (const uint64_t volatile *)((uint8_t *)(rb->base_address) + rb->rptr);\n\tuint64_t *dst = (uint64_t *)cmd;\n\tuint8_t i;\n\n\tif (dmub_rb_empty(rb))\n\t\treturn false;\n\n\t\n\tfor (i = 0; i < DMUB_RB_CMD_SIZE / sizeof(uint64_t); i++)\n\t\t*dst++ = *src++;\n\n\treturn true;\n}\n\n \nstatic inline bool dmub_rb_pop_front(struct dmub_rb *rb)\n{\n\tif (dmub_rb_empty(rb))\n\t\treturn false;\n\n\trb->rptr += DMUB_RB_CMD_SIZE;\n\n\tif (rb->rptr >= rb->capacity)\n\t\trb->rptr %= rb->capacity;\n\n\treturn true;\n}\n\n \nstatic inline void dmub_rb_flush_pending(const struct dmub_rb *rb)\n{\n\tuint32_t rptr = rb->rptr;\n\tuint32_t wptr = rb->wrpt;\n\n\twhile (rptr != wptr) {\n\t\tuint64_t *data = (uint64_t *)((uint8_t *)(rb->base_address) + rptr);\n\t\tuint8_t i;\n\n\t\t \n\t\tfor (i = 0; i < DMUB_RB_CMD_SIZE / sizeof(uint64_t); i++)\n\t\t\t(void)READ_ONCE(*data++);\n\n\t\trptr += DMUB_RB_CMD_SIZE;\n\t\tif (rptr >= rb->capacity)\n\t\t\trptr %= rb->capacity;\n\t}\n}\n\n \nstatic inline void dmub_rb_init(struct dmub_rb *rb,\n\t\t\t\tstruct dmub_rb_init_params *init_params)\n{\n\trb->base_address = init_params->base_address;\n\trb->capacity = init_params->capacity;\n\trb->rptr = init_params->read_ptr;\n\trb->wrpt = init_params->write_ptr;\n}\n\n \nstatic inline void dmub_rb_get_return_data(struct dmub_rb *rb,\n\t\t\t\t\t   union dmub_rb_cmd *cmd)\n{\n\t\n\tuint8_t *rd_ptr = (rb->rptr == 0) ?\n\t\t(uint8_t *)rb->base_address + rb->capacity - DMUB_RB_CMD_SIZE :\n\t\t(uint8_t *)rb->base_address + rb->rptr - DMUB_RB_CMD_SIZE;\n\n\tdmub_memcpy(cmd, rd_ptr, DMUB_RB_CMD_SIZE);\n}\n\n#if defined(__cplusplus)\n}\n#endif\n\n\n\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}