{
  "module_name": "discovery.h",
  "hash_id": "75936b76303e612d2c26dc0beeb454b12ec80011b3e6b551b0af5103be4d4d32",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/include/discovery.h",
  "human_readable_source": " \n\n#ifndef _DISCOVERY_H_\n#define _DISCOVERY_H_\n\n#define PSP_HEADER_SIZE                 256\n#define BINARY_SIGNATURE                0x28211407\n#define DISCOVERY_TABLE_SIGNATURE       0x53445049\n#define GC_TABLE_ID                     0x4347\n#define HARVEST_TABLE_SIGNATURE         0x56524148\n#define VCN_INFO_TABLE_ID               0x004E4356\n#define MALL_INFO_TABLE_ID              0x4C4C414D\n\ntypedef enum\n{\n\tIP_DISCOVERY = 0,\n\tGC,\n\tHARVEST_INFO,\n\tVCN_INFO,\n\tMALL_INFO,\n\tRESERVED_1,\n\tTOTAL_TABLES = 6\n} table;\n\n#pragma pack(1)\n\ntypedef struct table_info\n{\n\tuint16_t offset;    \n\tuint16_t checksum;  \n\tuint16_t size;      \n\tuint16_t padding;\n} table_info;\n\ntypedef struct binary_header\n{\n\t \n\tuint32_t binary_signature;  \n\tuint16_t version_major;\n\tuint16_t version_minor;\n\tuint16_t binary_checksum;   \n\tuint16_t binary_size;       \n\ttable_info table_list[TOTAL_TABLES];\n} binary_header;\n\ntypedef struct die_info\n{\n\tuint16_t die_id;\n\tuint16_t die_offset;  \n} die_info;\n\n\ntypedef struct ip_discovery_header\n{\n\tuint32_t signature;     \n\tuint16_t version;       \n\tuint16_t size;          \n\tuint32_t id;            \n\tuint16_t num_dies;      \n\tdie_info die_info[16];  \n\tunion {\n\t\tuint16_t padding[1];\t \n\t\tstruct {\t\t \n\t\t\tuint8_t base_addr_64_bit : 1;  \n\t\t\tuint8_t reserved : 7;\n\t\t\tuint8_t reserved2;\n\t\t};\n\t};\n} ip_discovery_header;\n\ntypedef struct ip\n{\n\tuint16_t hw_id;            \n\tuint8_t number_instance;   \n\tuint8_t num_base_address;  \n\tuint8_t major;             \n\tuint8_t minor;             \n\tuint8_t revision;          \n#if defined(__BIG_ENDIAN)\n\tuint8_t reserved : 4;      \n\tuint8_t harvest : 4;       \n#else\n\tuint8_t harvest : 4;       \n\tuint8_t reserved : 4;      \n#endif\n\tuint32_t base_address[];  \n} ip;\n\ntypedef struct ip_v3\n{\n\tuint16_t hw_id;                          \n\tuint8_t instance_number;                 \n\tuint8_t num_base_address;                \n\tuint8_t major;                           \n\tuint8_t minor;                           \n\tuint8_t revision;                        \n#if defined(__BIG_ENDIAN)\n\tuint8_t variant : 4;                     \n\tuint8_t sub_revision : 4;                \n#else\n\tuint8_t sub_revision : 4;                \n\tuint8_t variant : 4;                     \n#endif\n\tuint32_t base_address[];\t\t \n} ip_v3;\n\ntypedef struct ip_v4 {\n\tuint16_t hw_id;                          \n\tuint8_t instance_number;                 \n\tuint8_t num_base_address;                \n\tuint8_t major;                           \n\tuint8_t minor;                           \n\tuint8_t revision;                        \n#if defined(LITTLEENDIAN_CPU)\n\tuint8_t sub_revision : 4;                \n\tuint8_t variant : 4;                     \n#elif defined(BIGENDIAN_CPU)\n\tuint8_t variant : 4;                     \n\tuint8_t sub_revision : 4;                \n#endif\n\tunion {\n\t\tDECLARE_FLEX_ARRAY(uint32_t, base_address);\t \n\t\tDECLARE_FLEX_ARRAY(uint64_t, base_address_64);\t \n\t} __packed;\n} ip_v4;\n\ntypedef struct die_header\n{\n\tuint16_t die_id;\n\tuint16_t num_ips;\n} die_header;\n\ntypedef struct ip_structure\n{\n\tip_discovery_header* header;\n\tstruct die\n\t{\n\t\tdie_header *die_header;\n\t\tunion\n\t\t{\n\t\t\tip *ip_list;\n\t\t\tip_v3 *ip_v3_list;\n\t\t\tip_v4 *ip_v4_list;\n\t\t};                                   \n\t} die;\n} ip_structure;\n\nstruct gpu_info_header {\n\tuint32_t table_id;       \n\tuint16_t version_major;  \n\tuint16_t version_minor;  \n\tuint32_t size;           \n};\n\nstruct gc_info_v1_0 {\n\tstruct gpu_info_header header;\n\n\tuint32_t gc_num_se;\n\tuint32_t gc_num_wgp0_per_sa;\n\tuint32_t gc_num_wgp1_per_sa;\n\tuint32_t gc_num_rb_per_se;\n\tuint32_t gc_num_gl2c;\n\tuint32_t gc_num_gprs;\n\tuint32_t gc_num_max_gs_thds;\n\tuint32_t gc_gs_table_depth;\n\tuint32_t gc_gsprim_buff_depth;\n\tuint32_t gc_parameter_cache_depth;\n\tuint32_t gc_double_offchip_lds_buffer;\n\tuint32_t gc_wave_size;\n\tuint32_t gc_max_waves_per_simd;\n\tuint32_t gc_max_scratch_slots_per_cu;\n\tuint32_t gc_lds_size;\n\tuint32_t gc_num_sc_per_se;\n\tuint32_t gc_num_sa_per_se;\n\tuint32_t gc_num_packer_per_sc;\n\tuint32_t gc_num_gl2a;\n};\n\nstruct gc_info_v1_1 {\n\tstruct gpu_info_header header;\n\n\tuint32_t gc_num_se;\n\tuint32_t gc_num_wgp0_per_sa;\n\tuint32_t gc_num_wgp1_per_sa;\n\tuint32_t gc_num_rb_per_se;\n\tuint32_t gc_num_gl2c;\n\tuint32_t gc_num_gprs;\n\tuint32_t gc_num_max_gs_thds;\n\tuint32_t gc_gs_table_depth;\n\tuint32_t gc_gsprim_buff_depth;\n\tuint32_t gc_parameter_cache_depth;\n\tuint32_t gc_double_offchip_lds_buffer;\n\tuint32_t gc_wave_size;\n\tuint32_t gc_max_waves_per_simd;\n\tuint32_t gc_max_scratch_slots_per_cu;\n\tuint32_t gc_lds_size;\n\tuint32_t gc_num_sc_per_se;\n\tuint32_t gc_num_sa_per_se;\n\tuint32_t gc_num_packer_per_sc;\n\tuint32_t gc_num_gl2a;\n\tuint32_t gc_num_tcp_per_sa;\n\tuint32_t gc_num_sdp_interface;\n\tuint32_t gc_num_tcps;\n};\n\nstruct gc_info_v1_2 {\n\tstruct gpu_info_header header;\n\tuint32_t gc_num_se;\n\tuint32_t gc_num_wgp0_per_sa;\n\tuint32_t gc_num_wgp1_per_sa;\n\tuint32_t gc_num_rb_per_se;\n\tuint32_t gc_num_gl2c;\n\tuint32_t gc_num_gprs;\n\tuint32_t gc_num_max_gs_thds;\n\tuint32_t gc_gs_table_depth;\n\tuint32_t gc_gsprim_buff_depth;\n\tuint32_t gc_parameter_cache_depth;\n\tuint32_t gc_double_offchip_lds_buffer;\n\tuint32_t gc_wave_size;\n\tuint32_t gc_max_waves_per_simd;\n\tuint32_t gc_max_scratch_slots_per_cu;\n\tuint32_t gc_lds_size;\n\tuint32_t gc_num_sc_per_se;\n\tuint32_t gc_num_sa_per_se;\n\tuint32_t gc_num_packer_per_sc;\n\tuint32_t gc_num_gl2a;\n\tuint32_t gc_num_tcp_per_sa;\n\tuint32_t gc_num_sdp_interface;\n\tuint32_t gc_num_tcps;\n\tuint32_t gc_num_tcp_per_wpg;\n\tuint32_t gc_tcp_l1_size;\n\tuint32_t gc_num_sqc_per_wgp;\n\tuint32_t gc_l1_instruction_cache_size_per_sqc;\n\tuint32_t gc_l1_data_cache_size_per_sqc;\n\tuint32_t gc_gl1c_per_sa;\n\tuint32_t gc_gl1c_size_per_instance;\n\tuint32_t gc_gl2c_per_gpu;\n};\n\nstruct gc_info_v2_0 {\n\tstruct gpu_info_header header;\n\n\tuint32_t gc_num_se;\n\tuint32_t gc_num_cu_per_sh;\n\tuint32_t gc_num_sh_per_se;\n\tuint32_t gc_num_rb_per_se;\n\tuint32_t gc_num_tccs;\n\tuint32_t gc_num_gprs;\n\tuint32_t gc_num_max_gs_thds;\n\tuint32_t gc_gs_table_depth;\n\tuint32_t gc_gsprim_buff_depth;\n\tuint32_t gc_parameter_cache_depth;\n\tuint32_t gc_double_offchip_lds_buffer;\n\tuint32_t gc_wave_size;\n\tuint32_t gc_max_waves_per_simd;\n\tuint32_t gc_max_scratch_slots_per_cu;\n\tuint32_t gc_lds_size;\n\tuint32_t gc_num_sc_per_se;\n\tuint32_t gc_num_packer_per_sc;\n};\n\nstruct gc_info_v2_1 {\n\tstruct gpu_info_header header;\n\n\tuint32_t gc_num_se;\n\tuint32_t gc_num_cu_per_sh;\n\tuint32_t gc_num_sh_per_se;\n\tuint32_t gc_num_rb_per_se;\n\tuint32_t gc_num_tccs;\n\tuint32_t gc_num_gprs;\n\tuint32_t gc_num_max_gs_thds;\n\tuint32_t gc_gs_table_depth;\n\tuint32_t gc_gsprim_buff_depth;\n\tuint32_t gc_parameter_cache_depth;\n\tuint32_t gc_double_offchip_lds_buffer;\n\tuint32_t gc_wave_size;\n\tuint32_t gc_max_waves_per_simd;\n\tuint32_t gc_max_scratch_slots_per_cu;\n\tuint32_t gc_lds_size;\n\tuint32_t gc_num_sc_per_se;\n\tuint32_t gc_num_packer_per_sc;\n\t \n\tuint32_t gc_num_tcp_per_sh;\n\tuint32_t gc_tcp_size_per_cu;\n\tuint32_t gc_num_sdp_interface;\n\tuint32_t gc_num_cu_per_sqc;\n\tuint32_t gc_instruction_cache_size_per_sqc;\n\tuint32_t gc_scalar_data_cache_size_per_sqc;\n\tuint32_t gc_tcc_size;\n};\n\ntypedef struct harvest_info_header {\n\tuint32_t signature;  \n\tuint32_t version;    \n} harvest_info_header;\n\ntypedef struct harvest_info {\n\tuint16_t hw_id;           \n\tuint8_t number_instance;  \n\tuint8_t reserved;         \n} harvest_info;\n\ntypedef struct harvest_table {\n\tharvest_info_header header;\n\tharvest_info list[32];\n} harvest_table;\n\nstruct mall_info_header {\n\tuint32_t table_id;  \n\tuint16_t version_major;  \n\tuint16_t version_minor;  \n\tuint32_t size_bytes;  \n};\n\nstruct mall_info_v1_0 {\n\tstruct mall_info_header header;\n\tuint32_t mall_size_per_m;\n\tuint32_t m_s_present;\n\tuint32_t m_half_use;\n\tuint32_t m_mall_config;\n\tuint32_t reserved[5];\n};\n\nstruct mall_info_v2_0 {\n\tstruct mall_info_header header;\n\tuint32_t mall_size_per_umc;\n\tuint32_t reserved[8];\n};\n\n#define VCN_INFO_TABLE_MAX_NUM_INSTANCES 4\n\nstruct vcn_info_header {\n    uint32_t table_id;  \n    uint16_t version_major;  \n    uint16_t version_minor;  \n    uint32_t size_bytes;  \n};\n\nstruct vcn_instance_info_v1_0\n{\n\tuint32_t instance_num;  \n\tunion _fuse_data {\n\t\tstruct {\n\t\t\tuint32_t av1_disabled : 1;\n\t\t\tuint32_t vp9_disabled : 1;\n\t\t\tuint32_t hevc_disabled : 1;\n\t\t\tuint32_t h264_disabled : 1;\n\t\t\tuint32_t reserved : 28;\n\t\t} bits;\n\t\tuint32_t all_bits;\n\t} fuse_data;\n\tuint32_t reserved[2];\n};\n\nstruct vcn_info_v1_0 {\n\tstruct vcn_info_header header;\n\tuint32_t num_of_instances;  \n\tstruct vcn_instance_info_v1_0 instance_info[VCN_INFO_TABLE_MAX_NUM_INSTANCES];\n\tuint32_t reserved[4];\n};\n\n#pragma pack()\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}