{
  "module_name": "vega12_hwmgr.h",
  "hash_id": "fa6a94c6bacc818cd0fdf66b2473afd6ad282d1ea13cb2a5414004e0613210d7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.h",
  "human_readable_source": " \n\n#ifndef _VEGA12_HWMGR_H_\n#define _VEGA12_HWMGR_H_\n\n#include \"hwmgr.h\"\n#include \"vega12/smu9_driver_if.h\"\n#include \"ppatomfwctrl.h\"\n\n#define VEGA12_MAX_HARDWARE_POWERLEVELS 2\n\n#define WaterMarksExist  1\n#define WaterMarksLoaded 2\n\n#define VG12_PSUEDO_NUM_GFXCLK_DPM_LEVELS   16\n#define VG12_PSUEDO_NUM_SOCCLK_DPM_LEVELS   8\n#define VG12_PSUEDO_NUM_DCEFCLK_DPM_LEVELS  8\n#define VG12_PSUEDO_NUM_UCLK_DPM_LEVELS     4\n\nenum {\n\tGNLD_DPM_PREFETCHER = 0,\n\tGNLD_DPM_GFXCLK,\n\tGNLD_DPM_UCLK,\n\tGNLD_DPM_SOCCLK,\n\tGNLD_DPM_UVD,\n\tGNLD_DPM_VCE,\n\tGNLD_ULV,\n\tGNLD_DPM_MP0CLK,\n\tGNLD_DPM_LINK,\n\tGNLD_DPM_DCEFCLK,\n\tGNLD_DS_GFXCLK,\n\tGNLD_DS_SOCCLK,\n\tGNLD_DS_LCLK,\n\tGNLD_PPT,\n\tGNLD_TDC,\n\tGNLD_THERMAL,\n\tGNLD_GFX_PER_CU_CG,\n\tGNLD_RM,\n\tGNLD_DS_DCEFCLK,\n\tGNLD_ACDC,\n\tGNLD_VR0HOT,\n\tGNLD_VR1HOT,\n\tGNLD_FW_CTF,\n\tGNLD_LED_DISPLAY,\n\tGNLD_FAN_CONTROL,\n\tGNLD_DIDT,\n\tGNLD_GFXOFF,\n\tGNLD_CG,\n\tGNLD_ACG,\n\n\tGNLD_FEATURES_MAX\n};\n\n\n#define GNLD_DPM_MAX    (GNLD_DPM_DCEFCLK + 1)\n\n#define SMC_DPM_FEATURES    0x30F\n\nstruct smu_features {\n\tbool supported;\n\tbool enabled;\n\tbool allowed;\n\tuint32_t smu_feature_id;\n\tuint64_t smu_feature_bitmap;\n};\n\nstruct vega12_dpm_level {\n\tbool\t\tenabled;\n\tuint32_t\tvalue;\n\tuint32_t\tparam1;\n};\n\n#define VEGA12_MAX_DEEPSLEEP_DIVIDER_ID 5\n#define MAX_REGULAR_DPM_NUMBER 16\n#define MAX_PCIE_CONF 2\n#define VEGA12_MINIMUM_ENGINE_CLOCK 2500\n\nstruct vega12_dpm_state {\n\tuint32_t  soft_min_level;\n\tuint32_t  soft_max_level;\n\tuint32_t  hard_min_level;\n\tuint32_t  hard_max_level;\n};\n\nstruct vega12_single_dpm_table {\n\tuint32_t\t\tcount;\n\tstruct vega12_dpm_state\tdpm_state;\n\tstruct vega12_dpm_level\tdpm_levels[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct vega12_odn_dpm_control {\n\tuint32_t\tcount;\n\tuint32_t\tentries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct vega12_pcie_table {\n\tuint16_t count;\n\tuint8_t  pcie_gen[MAX_PCIE_CONF];\n\tuint8_t  pcie_lane[MAX_PCIE_CONF];\n\tuint32_t lclk[MAX_PCIE_CONF];\n};\n\nstruct vega12_dpm_table {\n\tstruct vega12_single_dpm_table  soc_table;\n\tstruct vega12_single_dpm_table  gfx_table;\n\tstruct vega12_single_dpm_table  mem_table;\n\tstruct vega12_single_dpm_table  eclk_table;\n\tstruct vega12_single_dpm_table  vclk_table;\n\tstruct vega12_single_dpm_table  dclk_table;\n\tstruct vega12_single_dpm_table  dcef_table;\n\tstruct vega12_single_dpm_table  pixel_table;\n\tstruct vega12_single_dpm_table  display_table;\n\tstruct vega12_single_dpm_table  phy_table;\n\tstruct vega12_pcie_table        pcie_table;\n};\n\n#define VEGA12_MAX_LEAKAGE_COUNT  8\nstruct vega12_leakage_voltage {\n\tuint16_t  count;\n\tuint16_t  leakage_id[VEGA12_MAX_LEAKAGE_COUNT];\n\tuint16_t  actual_voltage[VEGA12_MAX_LEAKAGE_COUNT];\n};\n\nstruct vega12_display_timing {\n\tuint32_t  min_clock_in_sr;\n\tuint32_t  num_existing_displays;\n};\n\nstruct vega12_dpmlevel_enable_mask {\n\tuint32_t  uvd_dpm_enable_mask;\n\tuint32_t  vce_dpm_enable_mask;\n\tuint32_t  samu_dpm_enable_mask;\n\tuint32_t  sclk_dpm_enable_mask;\n\tuint32_t  mclk_dpm_enable_mask;\n};\n\nstruct vega12_vbios_boot_state {\n\tbool        bsoc_vddc_lock;\n\tuint8_t     uc_cooling_id;\n\tuint16_t    vddc;\n\tuint16_t    vddci;\n\tuint16_t    mvddc;\n\tuint16_t    vdd_gfx;\n\tuint32_t    gfx_clock;\n\tuint32_t    mem_clock;\n\tuint32_t    soc_clock;\n\tuint32_t    dcef_clock;\n\tuint32_t    eclock;\n\tuint32_t    dclock;\n\tuint32_t    vclock;\n};\n\n#define DPMTABLE_OD_UPDATE_SCLK     0x00000001\n#define DPMTABLE_OD_UPDATE_MCLK     0x00000002\n#define DPMTABLE_UPDATE_SCLK        0x00000004\n#define DPMTABLE_UPDATE_MCLK        0x00000008\n#define DPMTABLE_OD_UPDATE_VDDC     0x00000010\n\nstruct vega12_smc_state_table {\n\tuint32_t        soc_boot_level;\n\tuint32_t        gfx_boot_level;\n\tuint32_t        dcef_boot_level;\n\tuint32_t        mem_boot_level;\n\tuint32_t        uvd_boot_level;\n\tuint32_t        vce_boot_level;\n\tuint32_t        gfx_max_level;\n\tuint32_t        mem_max_level;\n\tuint8_t         vr_hot_gpio;\n\tuint8_t         ac_dc_gpio;\n\tuint8_t         therm_out_gpio;\n\tuint8_t         therm_out_polarity;\n\tuint8_t         therm_out_mode;\n\tPPTable_t       pp_table;\n\tWatermarks_t    water_marks_table;\n\tAvfsDebugTable_t avfs_debug_table;\n\tAvfsFuseOverride_t avfs_fuse_override_table;\n\tSmuMetrics_t    smu_metrics;\n\tDriverSmuConfig_t driver_smu_config;\n\tDpmActivityMonitorCoeffInt_t dpm_activity_monitor_coeffint;\n\tOverDriveTable_t overdrive_table;\n};\n\nstruct vega12_mclk_latency_entries {\n\tuint32_t  frequency;\n\tuint32_t  latency;\n};\n\nstruct vega12_mclk_latency_table {\n\tuint32_t  count;\n\tstruct vega12_mclk_latency_entries  entries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct vega12_registry_data {\n\tuint64_t  disallowed_features;\n\tuint8_t   ac_dc_switch_gpio_support;\n\tuint8_t   acg_loop_support;\n\tuint8_t   clock_stretcher_support;\n\tuint8_t   db_ramping_support;\n\tuint8_t   didt_mode;\n\tuint8_t   didt_support;\n\tuint8_t   edc_didt_support;\n\tuint8_t   force_dpm_high;\n\tuint8_t   fuzzy_fan_control_support;\n\tuint8_t   mclk_dpm_key_disabled;\n\tuint8_t   od_state_in_dc_support;\n\tuint8_t   pcie_lane_override;\n\tuint8_t   pcie_speed_override;\n\tuint32_t  pcie_clock_override;\n\tuint8_t   pcie_dpm_key_disabled;\n\tuint8_t   dcefclk_dpm_key_disabled;\n\tuint8_t   prefetcher_dpm_key_disabled;\n\tuint8_t   quick_transition_support;\n\tuint8_t   regulator_hot_gpio_support;\n\tuint8_t   master_deep_sleep_support;\n\tuint8_t   gfx_clk_deep_sleep_support;\n\tuint8_t   sclk_deep_sleep_support;\n\tuint8_t   lclk_deep_sleep_support;\n\tuint8_t   dce_fclk_deep_sleep_support;\n\tuint8_t   sclk_dpm_key_disabled;\n\tuint8_t   sclk_throttle_low_notification;\n\tuint8_t   skip_baco_hardware;\n\tuint8_t   socclk_dpm_key_disabled;\n\tuint8_t   sq_ramping_support;\n\tuint8_t   tcp_ramping_support;\n\tuint8_t   td_ramping_support;\n\tuint8_t   dbr_ramping_support;\n\tuint8_t   gc_didt_support;\n\tuint8_t   psm_didt_support;\n\tuint8_t   thermal_support;\n\tuint8_t   fw_ctf_enabled;\n\tuint8_t   led_dpm_enabled;\n\tuint8_t   fan_control_support;\n\tuint8_t   ulv_support;\n\tuint8_t   odn_feature_enable;\n\tuint8_t   disable_water_mark;\n\tuint8_t   disable_workload_policy;\n\tuint32_t  force_workload_policy_mask;\n\tuint8_t   disable_3d_fs_detection;\n\tuint8_t   disable_pp_tuning;\n\tuint8_t   disable_xlpp_tuning;\n\tuint32_t  perf_ui_tuning_profile_turbo;\n\tuint32_t  perf_ui_tuning_profile_powerSave;\n\tuint32_t  perf_ui_tuning_profile_xl;\n\tuint16_t  zrpm_stop_temp;\n\tuint16_t  zrpm_start_temp;\n\tuint32_t  stable_pstate_sclk_dpm_percentage;\n\tuint8_t   fps_support;\n\tuint8_t   vr0hot;\n\tuint8_t   vr1hot;\n\tuint8_t   disable_auto_wattman;\n\tuint32_t  auto_wattman_debug;\n\tuint32_t  auto_wattman_sample_period;\n\tuint8_t   auto_wattman_threshold;\n\tuint8_t   log_avfs_param;\n\tuint8_t   enable_enginess;\n\tuint8_t   custom_fan_support;\n\tuint8_t   disable_pcc_limit_control;\n};\n\nstruct vega12_odn_clock_voltage_dependency_table {\n\tuint32_t count;\n\tstruct phm_ppt_v1_clock_voltage_dependency_record\n\t\tentries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct vega12_odn_dpm_table {\n\tstruct vega12_odn_dpm_control\t\tcontrol_gfxclk_state;\n\tstruct vega12_odn_dpm_control\t\tcontrol_memclk_state;\n\tstruct phm_odn_clock_levels\t\todn_core_clock_dpm_levels;\n\tstruct phm_odn_clock_levels\t\todn_memory_clock_dpm_levels;\n\tstruct vega12_odn_clock_voltage_dependency_table\t\tvdd_dependency_on_sclk;\n\tstruct vega12_odn_clock_voltage_dependency_table\t\tvdd_dependency_on_mclk;\n\tstruct vega12_odn_clock_voltage_dependency_table\t\tvdd_dependency_on_socclk;\n\tuint32_t\t\t\t\todn_mclk_min_limit;\n};\n\nstruct vega12_odn_fan_table {\n\tuint32_t\ttarget_fan_speed;\n\tuint32_t\ttarget_temperature;\n\tuint32_t\tmin_performance_clock;\n\tuint32_t\tmin_fan_limit;\n\tbool\t\tforce_fan_pwm;\n};\n\nstruct vega12_clock_range {\n\tuint32_t\tACMax;\n\tuint32_t\tACMin;\n\tuint32_t\tDCMax;\n};\n\nstruct vega12_hwmgr {\n\tstruct vega12_dpm_table          dpm_table;\n\tstruct vega12_dpm_table          golden_dpm_table;\n\tstruct vega12_registry_data      registry_data;\n\tstruct vega12_vbios_boot_state   vbios_boot_state;\n\tstruct vega12_mclk_latency_table mclk_latency_table;\n\n\tstruct vega12_leakage_voltage    vddc_leakage;\n\n\tuint32_t                           vddc_control;\n\tstruct pp_atomfwctrl_voltage_table vddc_voltage_table;\n\tuint32_t                           mvdd_control;\n\tstruct pp_atomfwctrl_voltage_table mvdd_voltage_table;\n\tuint32_t                           vddci_control;\n\tstruct pp_atomfwctrl_voltage_table vddci_voltage_table;\n\n\tuint32_t                           active_auto_throttle_sources;\n\tuint32_t                           water_marks_bitmap;\n\n\tstruct vega12_odn_dpm_table       odn_dpm_table;\n\tstruct vega12_odn_fan_table       odn_fan_table;\n\n\t \n\tuint8_t                           need_update_dpm_table;\n\n\tbool                           cac_enabled;\n\tbool                           battery_state;\n\tbool                           is_tlu_enabled;\n\tbool                           avfs_exist;\n\n\tuint32_t                       low_sclk_interrupt_threshold;\n\n\tuint32_t                       total_active_cus;\n\n\tstruct vega12_display_timing display_timing;\n\n\t \n\n\tuint32_t                       debug_settings;\n\tuint32_t                       lowest_uclk_reserved_for_ulv;\n\tuint32_t                       gfxclk_average_alpha;\n\tuint32_t                       socclk_average_alpha;\n\tuint32_t                       uclk_average_alpha;\n\tuint32_t                       gfx_activity_average_alpha;\n\tuint32_t                       display_voltage_mode;\n\tuint32_t                       dcef_clk_quad_eqn_a;\n\tuint32_t                       dcef_clk_quad_eqn_b;\n\tuint32_t                       dcef_clk_quad_eqn_c;\n\tuint32_t                       disp_clk_quad_eqn_a;\n\tuint32_t                       disp_clk_quad_eqn_b;\n\tuint32_t                       disp_clk_quad_eqn_c;\n\tuint32_t                       pixel_clk_quad_eqn_a;\n\tuint32_t                       pixel_clk_quad_eqn_b;\n\tuint32_t                       pixel_clk_quad_eqn_c;\n\tuint32_t                       phy_clk_quad_eqn_a;\n\tuint32_t                       phy_clk_quad_eqn_b;\n\tuint32_t                       phy_clk_quad_eqn_c;\n\n\t \n\tstruct vega12_dpmlevel_enable_mask     dpm_level_enable_mask;\n\n\t \n\tbool                           uvd_power_gated;\n\tbool                           vce_power_gated;\n\tbool                           samu_power_gated;\n\tbool                           need_long_memory_training;\n\n\t \n\tbool                           apply_optimized_settings;\n\tuint32_t                       disable_dpm_mask;\n\n\t \n\tuint32_t                       apply_overdrive_next_settings_mask;\n\n\t \n\tuint32_t                       workload_mask;\n\n\t \n\tuint32_t                       smu_version;\n\tstruct smu_features            smu_features[GNLD_FEATURES_MAX];\n\tstruct vega12_smc_state_table  smc_state_table;\n\n\tstruct vega12_clock_range      clk_range[PPCLK_COUNT];\n\n\t \n\tbool                           gfxoff_controlled_by_driver;\n\n\tunsigned long                  metrics_time;\n\tSmuMetrics_t                   metrics_table;\n\tstruct gpu_metrics_v1_0        gpu_metrics_table;\n};\n\n#define VEGA12_DPM2_NEAR_TDP_DEC                      10\n#define VEGA12_DPM2_ABOVE_SAFE_INC                    5\n#define VEGA12_DPM2_BELOW_SAFE_INC                    20\n\n#define VEGA12_DPM2_LTA_WINDOW_SIZE                   7\n\n#define VEGA12_DPM2_LTS_TRUNCATE                      0\n\n#define VEGA12_DPM2_TDP_SAFE_LIMIT_PERCENT            80\n\n#define VEGA12_DPM2_MAXPS_PERCENT_M                   90\n#define VEGA12_DPM2_MAXPS_PERCENT_H                   90\n\n#define VEGA12_DPM2_PWREFFICIENCYRATIO_MARGIN         50\n\n#define VEGA12_DPM2_SQ_RAMP_MAX_POWER                 0x3FFF\n#define VEGA12_DPM2_SQ_RAMP_MIN_POWER                 0x12\n#define VEGA12_DPM2_SQ_RAMP_MAX_POWER_DELTA           0x15\n#define VEGA12_DPM2_SQ_RAMP_SHORT_TERM_INTERVAL_SIZE  0x1E\n#define VEGA12_DPM2_SQ_RAMP_LONG_TERM_INTERVAL_RATIO  0xF\n\n#define VEGA12_VOLTAGE_CONTROL_NONE                   0x0\n#define VEGA12_VOLTAGE_CONTROL_BY_GPIO                0x1\n#define VEGA12_VOLTAGE_CONTROL_BY_SVID2               0x2\n#define VEGA12_VOLTAGE_CONTROL_MERGED                 0x3\n \n#define VEGA12_Q88_FORMAT_CONVERSION_UNIT             256\n\n#define VEGA12_UNUSED_GPIO_PIN       0x7F\n\n#define VEGA12_THERM_OUT_MODE_DISABLE       0x0\n#define VEGA12_THERM_OUT_MODE_THERM_ONLY    0x1\n#define VEGA12_THERM_OUT_MODE_THERM_VRHOT   0x2\n\n#define PPVEGA12_VEGA12DISPLAYVOLTAGEMODE_DFLT   0xffffffff\n#define PPREGKEY_VEGA12QUADRATICEQUATION_DFLT    0xffffffff\n\n#define PPVEGA12_VEGA12GFXCLKAVERAGEALPHA_DFLT       25  \n#define PPVEGA12_VEGA12SOCCLKAVERAGEALPHA_DFLT       25  \n#define PPVEGA12_VEGA12UCLKCLKAVERAGEALPHA_DFLT      25  \n#define PPVEGA12_VEGA12GFXACTIVITYAVERAGEALPHA_DFLT  25  \n#define PPVEGA12_VEGA12LOWESTUCLKRESERVEDFORULV_DFLT   0xffffffff\n#define PPVEGA12_VEGA12DISPLAYVOLTAGEMODE_DFLT         0xffffffff\n#define PPREGKEY_VEGA12QUADRATICEQUATION_DFLT          0xffffffff\n\n#define VEGA12_UMD_PSTATE_GFXCLK_LEVEL         0x3\n#define VEGA12_UMD_PSTATE_SOCCLK_LEVEL         0x3\n#define VEGA12_UMD_PSTATE_MCLK_LEVEL           0x2\n#define VEGA12_UMD_PSTATE_UVDCLK_LEVEL         0x3\n#define VEGA12_UMD_PSTATE_VCEMCLK_LEVEL        0x3\n\nint vega12_enable_disable_vce_dpm(struct pp_hwmgr *hwmgr, bool enable);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}