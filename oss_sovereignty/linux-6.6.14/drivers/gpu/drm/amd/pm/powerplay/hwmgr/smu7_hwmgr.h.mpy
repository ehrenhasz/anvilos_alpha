{
  "module_name": "smu7_hwmgr.h",
  "hash_id": "d571372b9faafd7d45d3defc4ebee07f856af146afb900dd0954b73c27f1abb5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.h",
  "human_readable_source": " \n\n#ifndef _SMU7_HWMGR_H\n#define _SMU7_HWMGR_H\n\n#include \"hwmgr.h\"\n#include \"ppatomctrl.h\"\n\n#define SMU7_MAX_HARDWARE_POWERLEVELS   2\n\n#define SMU7_VOLTAGE_CONTROL_NONE                   0x0\n#define SMU7_VOLTAGE_CONTROL_BY_GPIO                0x1\n#define SMU7_VOLTAGE_CONTROL_BY_SVID2               0x2\n#define SMU7_VOLTAGE_CONTROL_MERGED                 0x3\n\nenum gpu_pt_config_reg_type {\n\tGPU_CONFIGREG_MMR = 0,\n\tGPU_CONFIGREG_SMC_IND,\n\tGPU_CONFIGREG_DIDT_IND,\n\tGPU_CONFIGREG_GC_CAC_IND,\n\tGPU_CONFIGREG_CACHE,\n\tGPU_CONFIGREG_MAX\n};\n\nstruct gpu_pt_config_reg {\n\tuint32_t                           offset;\n\tuint32_t                           mask;\n\tuint32_t                           shift;\n\tuint32_t                           value;\n\tenum gpu_pt_config_reg_type       type;\n};\n\nstruct smu7_performance_level {\n\tuint32_t  memory_clock;\n\tuint32_t  engine_clock;\n\tuint16_t  pcie_gen;\n\tuint16_t  pcie_lane;\n};\n\nstruct smu7_thermal_temperature_setting {\n\tlong temperature_low;\n\tlong temperature_high;\n\tlong temperature_shutdown;\n};\n\nstruct smu7_uvd_clocks {\n\tuint32_t  vclk;\n\tuint32_t  dclk;\n};\n\nstruct smu7_vce_clocks {\n\tuint32_t  evclk;\n\tuint32_t  ecclk;\n};\n\nstruct smu7_power_state {\n\tuint32_t                  magic;\n\tstruct smu7_uvd_clocks    uvd_clks;\n\tstruct smu7_vce_clocks    vce_clks;\n\tuint32_t                  sam_clk;\n\tuint16_t                  performance_level_count;\n\tbool                      dc_compatible;\n\tuint32_t                  sclk_threshold;\n\tstruct smu7_performance_level  performance_levels[SMU7_MAX_HARDWARE_POWERLEVELS];\n};\n\nstruct smu7_dpm_level {\n\tbool\tenabled;\n\tuint32_t\tvalue;\n\tuint32_t\tparam1;\n};\n\n#define SMU7_MAX_DEEPSLEEP_DIVIDER_ID 5\n#define MAX_REGULAR_DPM_NUMBER 8\n#define SMU7_MINIMUM_ENGINE_CLOCK 2500\n\nstruct smu7_single_dpm_table {\n\tuint32_t\t\tcount;\n\tstruct smu7_dpm_level\tdpm_levels[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct smu7_dpm_table {\n\tstruct smu7_single_dpm_table  sclk_table;\n\tstruct smu7_single_dpm_table  mclk_table;\n\tstruct smu7_single_dpm_table  pcie_speed_table;\n\tstruct smu7_single_dpm_table  vddc_table;\n\tstruct smu7_single_dpm_table  vddci_table;\n\tstruct smu7_single_dpm_table  mvdd_table;\n};\n\nstruct smu7_clock_registers {\n\tuint32_t  vCG_SPLL_FUNC_CNTL;\n\tuint32_t  vCG_SPLL_FUNC_CNTL_2;\n\tuint32_t  vCG_SPLL_FUNC_CNTL_3;\n\tuint32_t  vCG_SPLL_FUNC_CNTL_4;\n\tuint32_t  vCG_SPLL_SPREAD_SPECTRUM;\n\tuint32_t  vCG_SPLL_SPREAD_SPECTRUM_2;\n\tuint32_t  vDLL_CNTL;\n\tuint32_t  vMCLK_PWRMGT_CNTL;\n\tuint32_t  vMPLL_AD_FUNC_CNTL;\n\tuint32_t  vMPLL_DQ_FUNC_CNTL;\n\tuint32_t  vMPLL_FUNC_CNTL;\n\tuint32_t  vMPLL_FUNC_CNTL_1;\n\tuint32_t  vMPLL_FUNC_CNTL_2;\n\tuint32_t  vMPLL_SS1;\n\tuint32_t  vMPLL_SS2;\n};\n\n#define DISABLE_MC_LOADMICROCODE   1\n#define DISABLE_MC_CFGPROGRAMMING  2\n\nstruct smu7_voltage_smio_registers {\n\tuint32_t vS0_VID_LOWER_SMIO_CNTL;\n};\n\n#define SMU7_MAX_LEAKAGE_COUNT  8\n\nstruct smu7_leakage_voltage {\n\tuint16_t  count;\n\tuint16_t  leakage_id[SMU7_MAX_LEAKAGE_COUNT];\n\tuint16_t  actual_voltage[SMU7_MAX_LEAKAGE_COUNT];\n};\n\nstruct smu7_vbios_boot_state {\n\tuint16_t    mvdd_bootup_value;\n\tuint16_t    vddc_bootup_value;\n\tuint16_t    vddci_bootup_value;\n\tuint16_t    vddgfx_bootup_value;\n\tuint32_t    sclk_bootup_value;\n\tuint32_t    mclk_bootup_value;\n\tuint16_t    pcie_gen_bootup_value;\n\tuint16_t    pcie_lane_bootup_value;\n};\n\nstruct smu7_display_timing {\n\tuint32_t  min_clock_in_sr;\n\tuint32_t  num_existing_displays;\n\tuint32_t  vrefresh;\n};\n\nstruct smu7_dpmlevel_enable_mask {\n\tuint32_t  uvd_dpm_enable_mask;\n\tuint32_t  vce_dpm_enable_mask;\n\tuint32_t  acp_dpm_enable_mask;\n\tuint32_t  samu_dpm_enable_mask;\n\tuint32_t  sclk_dpm_enable_mask;\n\tuint32_t  mclk_dpm_enable_mask;\n\tuint32_t  pcie_dpm_enable_mask;\n};\n\nstruct smu7_pcie_perf_range {\n\tuint16_t  max;\n\tuint16_t  min;\n};\n\nstruct smu7_odn_clock_voltage_dependency_table {\n\tuint32_t count;\n\tphm_ppt_v1_clock_voltage_dependency_record entries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct smu7_odn_dpm_table {\n\tstruct phm_odn_clock_levels\t\todn_core_clock_dpm_levels;\n\tstruct phm_odn_clock_levels\t\todn_memory_clock_dpm_levels;\n\tstruct smu7_odn_clock_voltage_dependency_table\tvdd_dependency_on_sclk;\n\tstruct smu7_odn_clock_voltage_dependency_table\tvdd_dependency_on_mclk;\n\tuint32_t\t\t\t\t\todn_mclk_min_limit;\n\tuint32_t min_vddc;\n\tuint32_t max_vddc;\n};\n\nstruct profile_mode_setting {\n\tuint8_t bupdate_sclk;\n\tuint8_t sclk_up_hyst;\n\tuint8_t sclk_down_hyst;\n\tuint16_t sclk_activity;\n\tuint8_t bupdate_mclk;\n\tuint8_t mclk_up_hyst;\n\tuint8_t mclk_down_hyst;\n\tuint16_t mclk_activity;\n};\n\nstruct smu7_mclk_latency_entries {\n\tuint32_t  frequency;\n\tuint32_t  latency;\n};\n\nstruct smu7_mclk_latency_table {\n\tuint32_t  count;\n\tstruct smu7_mclk_latency_entries  entries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct smu7_hwmgr {\n\tstruct smu7_dpm_table\t\t\tdpm_table;\n\tstruct smu7_dpm_table\t\t\tgolden_dpm_table;\n\tstruct smu7_odn_dpm_table\t\todn_dpm_table;\n\tstruct smu7_mclk_latency_table\t\tmclk_latency_table;\n\n\tuint32_t\t\t\t\t\t\tvoting_rights_clients[8];\n\tuint32_t\t\t\t\t\t\tstatic_screen_threshold_unit;\n\tuint32_t\t\t\t\t\t\tstatic_screen_threshold;\n\tuint32_t\t\t\t\t\t\tvoltage_control;\n\tuint32_t\t\t\t\t\t\tvdd_gfx_control;\n\tuint32_t\t\t\t\t\t\tvddc_vddgfx_delta;\n\tuint32_t\t\t\t\t\t\tactive_auto_throttle_sources;\n\n\tstruct smu7_clock_registers            clock_registers;\n\n\tbool                           is_memory_gddr5;\n\tuint16_t                       acpi_vddc;\n\tbool                           pspp_notify_required;\n\tuint16_t                       force_pcie_gen;\n\tuint16_t                       acpi_pcie_gen;\n\tuint32_t                       pcie_gen_cap;\n\tuint32_t                       pcie_lane_cap;\n\tuint32_t                       pcie_spc_cap;\n\tstruct smu7_leakage_voltage          vddc_leakage;\n\tstruct smu7_leakage_voltage          vddci_leakage;\n\tstruct smu7_leakage_voltage          vddcgfx_leakage;\n\n\tuint32_t                             mvdd_control;\n\tuint32_t                             vddc_mask_low;\n\tuint32_t                             mvdd_mask_low;\n\tuint16_t                            max_vddc_in_pptable;\n\tuint16_t                            min_vddc_in_pptable;\n\tuint16_t                            max_vddci_in_pptable;\n\tuint16_t                            min_vddci_in_pptable;\n\tbool                                is_uvd_enabled;\n\tstruct smu7_vbios_boot_state        vbios_boot_state;\n\n\tbool                           pcie_performance_request;\n\tbool                           battery_state;\n\tbool                           mclk_ignore_signal;\n\tbool                           is_tlu_enabled;\n\tbool                           disable_handshake;\n\tbool                           smc_voltage_control_enabled;\n\tbool                           vbi_time_out_support;\n\n\tuint32_t                       soft_regs_start;\n\t \n\tuint32_t                             vddci_control;\n\tstruct pp_atomctrl_voltage_table     vddc_voltage_table;\n\tstruct pp_atomctrl_voltage_table     vddci_voltage_table;\n\tstruct pp_atomctrl_voltage_table     mvdd_voltage_table;\n\tstruct pp_atomctrl_voltage_table     vddgfx_voltage_table;\n\n\tuint32_t                             mgcg_cgtt_local2;\n\tuint32_t                             mgcg_cgtt_local3;\n\tuint32_t                             gpio_debug;\n\tuint32_t                             mc_micro_code_feature;\n\tuint32_t                             highest_mclk;\n\tuint16_t                             acpi_vddci;\n\tuint8_t                              mvdd_high_index;\n\tuint8_t                              mvdd_low_index;\n\tbool                                 dll_default_on;\n\tbool                                 performance_request_registered;\n\n\t \n\tbool                           ulv_supported;\n\n\t \n\tuint32_t                       cac_table_start;\n\tbool                           cac_configuration_required;\n\tbool                           driver_calculate_cac_leakage;\n\tbool                           cac_enabled;\n\n\t \n\tuint32_t                       power_containment_features;\n\tbool                           enable_dte_feature;\n\tbool                           enable_tdc_limit_feature;\n\tbool                           enable_pkg_pwr_tracking_feature;\n\tbool                           disable_uvd_power_tune_feature;\n\n\n\tuint32_t                       dte_tj_offset;\n\tuint32_t                       fast_watermark_threshold;\n\n\t \n\tuint8_t                           vddc_phase_shed_control;\n\n\t \n\tstruct smu7_display_timing        display_timing;\n\n\t \n\tstruct smu7_thermal_temperature_setting  thermal_temp_setting;\n\tstruct smu7_dpmlevel_enable_mask     dpm_level_enable_mask;\n\tuint32_t                                  need_update_smu7_dpm_table;\n\tuint32_t                                  sclk_dpm_key_disabled;\n\tuint32_t                                  mclk_dpm_key_disabled;\n\tuint32_t                                  pcie_dpm_key_disabled;\n\tuint32_t                                  min_engine_clocks;\n\tstruct smu7_pcie_perf_range          pcie_gen_performance;\n\tstruct smu7_pcie_perf_range          pcie_lane_performance;\n\tstruct smu7_pcie_perf_range          pcie_gen_power_saving;\n\tstruct smu7_pcie_perf_range          pcie_lane_power_saving;\n\tbool                                      use_pcie_performance_levels;\n\tbool                                      use_pcie_power_saving_levels;\n\tuint32_t                                  mclk_dpm0_activity_target;\n\tuint32_t                                  low_sclk_interrupt_threshold;\n\tuint32_t                                  last_mclk_dpm_enable_mask;\n\tbool                                      uvd_enabled;\n\n\t \n\tbool                           uvd_power_gated;\n\tbool                           vce_power_gated;\n\tbool                           need_long_memory_training;\n\n\t \n\tbool                               update_up_hyst;\n\tbool                               update_down_hyst;\n\tuint32_t                           down_hyst;\n\tuint32_t                           up_hyst;\n\tuint32_t disable_dpm_mask;\n\tbool apply_optimized_settings;\n\n\tuint32_t                              avfs_vdroop_override_setting;\n\tbool                                  apply_avfs_cks_off_voltage;\n\tuint32_t                              frame_time_x2;\n\tuint32_t                              last_sent_vbi_timeout;\n\tuint16_t                              mem_latency_high;\n\tuint16_t                              mem_latency_low;\n\tuint32_t                              vr_config;\n\tstruct profile_mode_setting           current_profile_setting;\n\n\tuint32_t                              ro_range_minimum;\n\tuint32_t                              ro_range_maximum;\n\n\tbool                                  disable_edc_leakage_controller;\n\tAtomCtrl_HiLoLeakageOffsetTable       edc_hilo_leakage_offset_from_vbios;\n\tAtomCtrl_EDCLeakgeTable               edc_leakage_table;\n};\n\n \n#define SMU7_Q88_FORMAT_CONVERSION_UNIT             256\n\nenum SMU7_I2CLineID {\n\tSMU7_I2CLineID_DDC1 = 0x90,\n\tSMU7_I2CLineID_DDC2 = 0x91,\n\tSMU7_I2CLineID_DDC3 = 0x92,\n\tSMU7_I2CLineID_DDC4 = 0x93,\n\tSMU7_I2CLineID_DDC5 = 0x94,\n\tSMU7_I2CLineID_DDC6 = 0x95,\n\tSMU7_I2CLineID_SCLSDA = 0x96,\n\tSMU7_I2CLineID_DDCVGA = 0x97\n};\n\n#define SMU7_I2C_DDC1DATA          0\n#define SMU7_I2C_DDC1CLK           1\n#define SMU7_I2C_DDC2DATA          2\n#define SMU7_I2C_DDC2CLK           3\n#define SMU7_I2C_DDC3DATA          4\n#define SMU7_I2C_DDC3CLK           5\n#define SMU7_I2C_SDA               40\n#define SMU7_I2C_SCL               41\n#define SMU7_I2C_DDC4DATA          65\n#define SMU7_I2C_DDC4CLK           66\n#define SMU7_I2C_DDC5DATA          0x48\n#define SMU7_I2C_DDC5CLK           0x49\n#define SMU7_I2C_DDC6DATA          0x4a\n#define SMU7_I2C_DDC6CLK           0x4b\n#define SMU7_I2C_DDCVGADATA        0x4c\n#define SMU7_I2C_DDCVGACLK         0x4d\n\n#define SMU7_UNUSED_GPIO_PIN       0x7F\nuint8_t smu7_get_sleep_divider_id_from_clock(uint32_t clock,\n\t\tuint32_t clock_insr);\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}