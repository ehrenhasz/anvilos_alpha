{
  "module_name": "smumgr.c",
  "hash_id": "cf1244a7d77da7e165c22f94c347842e6257d0754dac89c80cb410e52b721af3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/smumgr/smumgr.c",
  "human_readable_source": " \n\n#include <linux/delay.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/slab.h>\n#include <linux/types.h>\n#include <drm/amdgpu_drm.h>\n#include \"smumgr.h\"\n\nMODULE_FIRMWARE(\"amdgpu/bonaire_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/bonaire_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/hawaii_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/hawaii_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/topaz_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/topaz_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/tonga_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/tonga_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/fiji_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris10_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris10_smc_sk.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris10_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris10_k2_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris11_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris11_smc_sk.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris11_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris11_k2_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris12_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/polaris12_k_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/vegam_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/vega10_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/vega10_acg_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/vega12_smc.bin\");\nMODULE_FIRMWARE(\"amdgpu/vega20_smc.bin\");\n\nint smum_thermal_avfs_enable(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->thermal_avfs_enable)\n\t\treturn hwmgr->smumgr_funcs->thermal_avfs_enable(hwmgr);\n\n\treturn 0;\n}\n\nint smum_thermal_setup_fan_table(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->thermal_setup_fan_table)\n\t\treturn hwmgr->smumgr_funcs->thermal_setup_fan_table(hwmgr);\n\n\treturn 0;\n}\n\nint smum_update_sclk_threshold(struct pp_hwmgr *hwmgr)\n{\n\n\tif (NULL != hwmgr->smumgr_funcs->update_sclk_threshold)\n\t\treturn hwmgr->smumgr_funcs->update_sclk_threshold(hwmgr);\n\n\treturn 0;\n}\n\nint smum_update_smc_table(struct pp_hwmgr *hwmgr, uint32_t type)\n{\n\n\tif (NULL != hwmgr->smumgr_funcs->update_smc_table)\n\t\treturn hwmgr->smumgr_funcs->update_smc_table(hwmgr, type);\n\n\treturn 0;\n}\n\nuint32_t smum_get_offsetof(struct pp_hwmgr *hwmgr, uint32_t type, uint32_t member)\n{\n\tif (NULL != hwmgr->smumgr_funcs->get_offsetof)\n\t\treturn hwmgr->smumgr_funcs->get_offsetof(type, member);\n\n\treturn 0;\n}\n\nint smum_process_firmware_header(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->process_firmware_header)\n\t\treturn hwmgr->smumgr_funcs->process_firmware_header(hwmgr);\n\treturn 0;\n}\n\nuint32_t smum_get_mac_definition(struct pp_hwmgr *hwmgr, uint32_t value)\n{\n\tif (NULL != hwmgr->smumgr_funcs->get_mac_definition)\n\t\treturn hwmgr->smumgr_funcs->get_mac_definition(value);\n\n\treturn 0;\n}\n\nint smum_download_powerplay_table(struct pp_hwmgr *hwmgr, void **table)\n{\n\tif (NULL != hwmgr->smumgr_funcs->download_pptable_settings)\n\t\treturn hwmgr->smumgr_funcs->download_pptable_settings(hwmgr,\n\t\t\t\t\t\t\t\t\ttable);\n\treturn 0;\n}\n\nint smum_upload_powerplay_table(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->upload_pptable_settings)\n\t\treturn hwmgr->smumgr_funcs->upload_pptable_settings(hwmgr);\n\n\treturn 0;\n}\n\nint smum_send_msg_to_smc(struct pp_hwmgr *hwmgr, uint16_t msg, uint32_t *resp)\n{\n\tint ret = 0;\n\n\tif (hwmgr == NULL ||\n\t    hwmgr->smumgr_funcs->send_msg_to_smc == NULL ||\n\t    (resp && !hwmgr->smumgr_funcs->get_argument))\n\t\treturn -EINVAL;\n\n\tmutex_lock(&hwmgr->msg_lock);\n\n\tret = hwmgr->smumgr_funcs->send_msg_to_smc(hwmgr, msg);\n\tif (ret) {\n\t\tmutex_unlock(&hwmgr->msg_lock);\n\t\treturn ret;\n\t}\n\n\tif (resp)\n\t\t*resp = hwmgr->smumgr_funcs->get_argument(hwmgr);\n\n\tmutex_unlock(&hwmgr->msg_lock);\n\n\treturn ret;\n}\n\nint smum_send_msg_to_smc_with_parameter(struct pp_hwmgr *hwmgr,\n\t\t\t\t\tuint16_t msg,\n\t\t\t\t\tuint32_t parameter,\n\t\t\t\t\tuint32_t *resp)\n{\n\tint ret = 0;\n\n\tif (hwmgr == NULL ||\n\t    hwmgr->smumgr_funcs->send_msg_to_smc_with_parameter == NULL ||\n\t    (resp && !hwmgr->smumgr_funcs->get_argument))\n\t\treturn -EINVAL;\n\n\tmutex_lock(&hwmgr->msg_lock);\n\n\tret = hwmgr->smumgr_funcs->send_msg_to_smc_with_parameter(\n\t\t\t\t\t\thwmgr, msg, parameter);\n\tif (ret) {\n\t\tmutex_unlock(&hwmgr->msg_lock);\n\t\treturn ret;\n\t}\n\n\tif (resp)\n\t\t*resp = hwmgr->smumgr_funcs->get_argument(hwmgr);\n\n\tmutex_unlock(&hwmgr->msg_lock);\n\n\treturn ret;\n}\n\nint smum_init_smc_table(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->init_smc_table)\n\t\treturn hwmgr->smumgr_funcs->init_smc_table(hwmgr);\n\n\treturn 0;\n}\n\nint smum_populate_all_graphic_levels(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->populate_all_graphic_levels)\n\t\treturn hwmgr->smumgr_funcs->populate_all_graphic_levels(hwmgr);\n\n\treturn 0;\n}\n\nint smum_populate_all_memory_levels(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->populate_all_memory_levels)\n\t\treturn hwmgr->smumgr_funcs->populate_all_memory_levels(hwmgr);\n\n\treturn 0;\n}\n\n \nint smum_initialize_mc_reg_table(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->initialize_mc_reg_table)\n\t\treturn hwmgr->smumgr_funcs->initialize_mc_reg_table(hwmgr);\n\n\treturn 0;\n}\n\nbool smum_is_dpm_running(struct pp_hwmgr *hwmgr)\n{\n\tif (NULL != hwmgr->smumgr_funcs->is_dpm_running)\n\t\treturn hwmgr->smumgr_funcs->is_dpm_running(hwmgr);\n\n\treturn true;\n}\n\nbool smum_is_hw_avfs_present(struct pp_hwmgr *hwmgr)\n{\n\tif (hwmgr->smumgr_funcs->is_hw_avfs_present)\n\t\treturn hwmgr->smumgr_funcs->is_hw_avfs_present(hwmgr);\n\n\treturn false;\n}\n\nint smum_update_dpm_settings(struct pp_hwmgr *hwmgr, void *profile_setting)\n{\n\tif (hwmgr->smumgr_funcs->update_dpm_settings)\n\t\treturn hwmgr->smumgr_funcs->update_dpm_settings(hwmgr, profile_setting);\n\n\treturn -EINVAL;\n}\n\nint smum_smc_table_manager(struct pp_hwmgr *hwmgr, uint8_t *table, uint16_t table_id, bool rw)\n{\n\tif (hwmgr->smumgr_funcs->smc_table_manager)\n\t\treturn hwmgr->smumgr_funcs->smc_table_manager(hwmgr, table, table_id, rw);\n\n\treturn -EINVAL;\n}\n\nint smum_stop_smc(struct pp_hwmgr *hwmgr)\n{\n\tif (hwmgr->smumgr_funcs->stop_smc)\n\t\treturn hwmgr->smumgr_funcs->stop_smc(hwmgr);\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}