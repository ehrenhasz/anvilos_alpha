{
  "module_name": "smu10_hwmgr.h",
  "hash_id": "000bbb4da6b1f4b6a95b196bc0a1fe424145fc3869647bbec313309fe550b0a7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.h",
  "human_readable_source": " \n\n#ifndef SMU10_HWMGR_H\n#define SMU10_HWMGR_H\n\n#include \"hwmgr.h\"\n#include \"smu10_inc.h\"\n#include \"smu10_driver_if.h\"\n#include \"rv_ppsmc.h\"\n\n\n#define SMU10_MAX_HARDWARE_POWERLEVELS               8\n#define SMU10_DYNCLK_NUMBER_OF_TREND_COEFFICIENTS   15\n\n#define DPMFlags_SCLK_Enabled                     0x00000001\n#define DPMFlags_UVD_Enabled                      0x00000002\n#define DPMFlags_VCE_Enabled                      0x00000004\n#define DPMFlags_ACP_Enabled                      0x00000008\n#define DPMFlags_ForceHighestValid                0x40000000\n\n \n#define SMU_EnabledFeatureScoreboard_AcpDpmOn     0x00000001\n#define SMU_EnabledFeatureScoreboard_SclkDpmOn    0x00200000\n#define SMU_EnabledFeatureScoreboard_UvdDpmOn     0x01000000\n#define SMU_EnabledFeatureScoreboard_VceDpmOn     0x02000000\n\n#define SMU_PHYID_SHIFT      8\n\n#define SMU10_PCIE_POWERGATING_TARGET_GFX            0\n#define SMU10_PCIE_POWERGATING_TARGET_DDI            1\n#define SMU10_PCIE_POWERGATING_TARGET_PLLCASCADE     2\n#define SMU10_PCIE_POWERGATING_TARGET_PHY            3\n\nenum VQ_TYPE {\n\tCLOCK_TYPE_DCLK = 0L,\n\tCLOCK_TYPE_ECLK,\n\tCLOCK_TYPE_SCLK,\n\tCLOCK_TYPE_CCLK,\n\tVQ_GFX_CU\n};\n\n#define SUSTAINABLE_SCLK_MASK  0x00ffffff\n#define SUSTAINABLE_SCLK_SHIFT 0\n#define SUSTAINABLE_CU_MASK    0xff000000\n#define SUSTAINABLE_CU_SHIFT   24\n\nstruct smu10_dpm_entry {\n\tuint32_t soft_min_clk;\n\tuint32_t hard_min_clk;\n\tuint32_t soft_max_clk;\n\tuint32_t hard_max_clk;\n};\n\nstruct smu10_power_level {\n\tuint32_t engine_clock;\n\tuint8_t vddc_index;\n\tuint8_t ds_divider_index;\n\tuint8_t ss_divider_index;\n\tuint8_t allow_gnb_slow;\n\tuint8_t force_nbp_state;\n\tuint8_t display_wm;\n\tuint8_t vce_wm;\n\tuint8_t num_simd_to_powerdown;\n\tuint8_t hysteresis_up;\n\tuint8_t rsv[3];\n};\n\n \n#define SMU10_POWERSTATE_FLAGS_NBPS_FORCEHIGH (1<<0)\n#define SMU10_POWERSTATE_FLAGS_NBPS_LOCKTOHIGH (1<<1)\n#define SMU10_POWERSTATE_FLAGS_NBPS_LOCKTOLOW (1<<2)\n\n#define SMU10_POWERSTATE_FLAGS_BAPM_DISABLE    (1<<0)\n\nstruct smu10_uvd_clocks {\n\tuint32_t vclk;\n\tuint32_t dclk;\n\tuint32_t vclk_low_divider;\n\tuint32_t vclk_high_divider;\n\tuint32_t dclk_low_divider;\n\tuint32_t dclk_high_divider;\n};\n\nstruct pp_disable_nbpslo_flags {\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t entry : 1;\n\t\t\tuint32_t display : 1;\n\t\t\tuint32_t driver: 1;\n\t\t\tuint32_t vce : 1;\n\t\t\tuint32_t uvd : 1;\n\t\t\tuint32_t acp : 1;\n\t\t\tuint32_t reserved: 26;\n\t\t} bits;\n\t\tuint32_t u32All;\n\t};\n};\n\n\nenum smu10_pstate_previous_action {\n\tDO_NOTHING = 1,\n\tFORCE_HIGH,\n\tCANCEL_FORCE_HIGH\n};\n\nstruct smu10_power_state {\n\tunsigned int magic;\n\tuint32_t level;\n\tstruct smu10_uvd_clocks uvd_clocks;\n\tuint32_t evclk;\n\tuint32_t ecclk;\n\tuint32_t samclk;\n\tuint32_t acpclk;\n\tbool need_dfs_bypass;\n\n\tuint32_t nbps_flags;\n\tuint32_t bapm_flags;\n\tuint8_t dpm0_pg_nbps_low;\n\tuint8_t dpm0_pg_nbps_high;\n\tuint8_t dpm_x_nbps_low;\n\tuint8_t dpm_x_nbps_high;\n\n\tenum smu10_pstate_previous_action action;\n\n\tstruct smu10_power_level levels[SMU10_MAX_HARDWARE_POWERLEVELS];\n\tstruct pp_disable_nbpslo_flags nbpslo_flags;\n};\n\n#define SMU10_NUM_NBPSTATES        4\n#define SMU10_NUM_NBPMEMORYCLOCK   2\n\n\nstruct smu10_display_phy_info_entry {\n\tuint8_t                   phy_present;\n\tuint8_t                   active_lane_mapping;\n\tuint8_t                   display_config_type;\n\tuint8_t                   active_num_of_lanes;\n};\n\n#define SMU10_MAX_DISPLAYPHY_IDS       10\n\nstruct smu10_display_phy_info {\n\tbool                         display_phy_access_initialized;\n\tstruct smu10_display_phy_info_entry  entries[SMU10_MAX_DISPLAYPHY_IDS];\n};\n\n#define MAX_DISPLAY_CLOCK_LEVEL 8\n\nstruct smu10_system_info{\n\tuint8_t                      htc_tmp_lmt;\n\tuint8_t                      htc_hyst_lmt;\n};\n\n#define MAX_REGULAR_DPM_NUMBER 8\n\nstruct smu10_mclk_latency_entries {\n\tuint32_t  frequency;\n\tuint32_t  latency;\n};\n\nstruct smu10_mclk_latency_table {\n\tuint32_t  count;\n\tstruct smu10_mclk_latency_entries  entries[MAX_REGULAR_DPM_NUMBER];\n};\n\nstruct smu10_clock_voltage_dependency_record {\n\tuint32_t clk;\n\tuint32_t vol;\n};\n\n\nstruct smu10_voltage_dependency_table {\n\tuint32_t count;\n\tstruct smu10_clock_voltage_dependency_record entries[];\n};\n\nstruct smu10_clock_voltage_information {\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_dcefclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_socclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_fclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_mclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_dispclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_dppclk;\n\tstruct smu10_voltage_dependency_table    *vdd_dep_on_phyclk;\n};\n\nstruct smu10_hwmgr {\n\tuint32_t disable_driver_thermal_policy;\n\tuint32_t thermal_auto_throttling_treshold;\n\tstruct smu10_system_info sys_info;\n\tstruct smu10_mclk_latency_table mclk_latency_table;\n\n\tuint32_t ddi_power_gating_disabled;\n\n\tstruct smu10_display_phy_info_entry            display_phy_info;\n\tuint32_t dce_slow_sclk_threshold;\n\n\tbool disp_clk_bypass;\n\tbool disp_clk_bypass_pending;\n\tuint32_t bapm_enabled;\n\n\tbool video_start;\n\tbool battery_state;\n\n\tuint32_t is_nb_dpm_enabled;\n\tuint32_t is_voltage_island_enabled;\n\tuint32_t disable_smu_acp_s3_handshake;\n\tuint32_t disable_notify_smu_vpu_recovery;\n\tbool                           in_vpu_recovery;\n\tbool pg_acp_init;\n\tuint8_t disp_config;\n\n\t \n\tuint32_t power_containment_features;\n\tbool cac_enabled;\n\tbool disable_uvd_power_tune_feature;\n\tbool enable_bapm_feature;\n\tbool enable_tdc_limit_feature;\n\n\n\t \n\tuint32_t sram_end;\n\tuint32_t dpm_table_start;\n\tuint32_t soft_regs_start;\n\n\t \n\n\tuint8_t uvd_level_count;\n\tuint8_t vce_level_count;\n\tuint8_t acp_level_count;\n\tuint8_t samu_level_count;\n\n\tuint32_t fps_high_threshold;\n\tuint32_t fps_low_threshold;\n\n\tuint32_t dpm_flags;\n\tstruct smu10_dpm_entry sclk_dpm;\n\tstruct smu10_dpm_entry uvd_dpm;\n\tstruct smu10_dpm_entry vce_dpm;\n\tstruct smu10_dpm_entry acp_dpm;\n\tbool acp_power_up_no_dsp;\n\n\tuint32_t max_sclk_level;\n\tuint32_t num_of_clk_entries;\n\n\t \n\tuint32_t                          separation_time;\n\tbool                              cc6_disable;\n\tbool                              pstate_disable;\n\tbool                              cc6_setting_changed;\n\n\tuint32_t                             ulTotalActiveCUs;\n\n\tbool                           isp_tileA_power_gated;\n\tbool                           isp_tileB_power_gated;\n\tuint32_t                       isp_actual_hard_min_freq;\n\tuint32_t                       soc_actual_hard_min_freq;\n\tuint32_t                       dcf_actual_hard_min_freq;\n\n\tuint32_t                        f_actual_hard_min_freq;\n\tuint32_t                        fabric_actual_soft_min_freq;\n\tuint32_t                        vclk_soft_min;\n\tuint32_t                        dclk_soft_min;\n\tuint32_t                        gfx_actual_soft_min_freq;\n\tuint32_t                        gfx_actual_soft_max_freq;\n\tuint32_t                        gfx_min_freq_limit;\n\tuint32_t                        gfx_max_freq_limit;  \n\n\tbool                           vcn_power_gated;\n\tbool                           vcn_dpg_mode;\n\n\tbool                           gfx_off_controled_by_driver;\n\tbool                           water_marks_exist;\n\tWatermarks_t                      water_marks_table;\n\tstruct smu10_clock_voltage_information   clock_vol_info;\n\tDpmClocks_t                       clock_table;\n\n\tuint32_t active_process_mask;\n\tbool need_min_deep_sleep_dcefclk;\n\tuint32_t                             deep_sleep_dcefclk;\n\tuint32_t                             num_active_display;\n\n\tbool\t\t\t\t\t\t\tfine_grain_enabled;\n};\n\nstruct pp_hwmgr;\n\nint smu10_init_function_pointers(struct pp_hwmgr *hwmgr);\n\n \n#define SMU10_UMD_PSTATE_GFXCLK                 700\n#define SMU10_UMD_PSTATE_SOCCLK                 626\n#define SMU10_UMD_PSTATE_FCLK                   933\n#define SMU10_UMD_PSTATE_VCE                    0x03C00320\n#define SMU10_UMD_PSTATE_PROFILE_VCE            0x02AD0229\n\n#define SMU10_UMD_PSTATE_PEAK_SOCCLK            757\n#define SMU10_UMD_PSTATE_PEAK_FCLK              1200\n\n#define SMU10_UMD_PSTATE_MIN_FCLK               400\n#define SMU10_UMD_PSTATE_MIN_SOCCLK             200\n#define SMU10_UMD_PSTATE_MIN_VCE                0x0190012C\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}