{
  "module_name": "ppatomctrl.h",
  "hash_id": "da67e73a15a5343e59e5f5672cd70e6cac22b4e314ce184f9d868c437435248d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/ppatomctrl.h",
  "human_readable_source": " \n\n#ifndef PP_ATOMVOLTAGECTRL_H\n#define PP_ATOMVOLTAGECTRL_H\n\n#include \"hwmgr.h\"\n\n \n#define PP_ATOM_POWER_BUDGET_DISABLE_OVERDRIVE  0x80\n#define PP_ATOM_POWER_BUDGET_SHOW_WARNING       0x40\n#define PP_ATOM_POWER_BUDGET_SHOW_WAIVER        0x20\n#define PP_ATOM_POWER_POWER_BUDGET_BEHAVIOUR    0x0F\n\n \n#define PP_ATOMCTRL_MAX_VOLTAGE_ENTRIES 32\n\nstruct pp_atomctrl_clock_dividers {\n\tuint32_t pll_post_divider;\n\tuint32_t pll_feedback_divider;\n\tuint32_t pll_ref_divider;\n\tbool  enable_post_divider;\n};\n\ntypedef struct pp_atomctrl_clock_dividers pp_atomctrl_clock_dividers;\n\nunion pp_atomctrl_tcipll_fb_divider {\n\tstruct {\n\t\tuint32_t ul_fb_div_frac : 14;\n\t\tuint32_t ul_fb_div : 12;\n\t\tuint32_t un_used : 6;\n\t};\n\tuint32_t ul_fb_divider;\n};\n\ntypedef union pp_atomctrl_tcipll_fb_divider pp_atomctrl_tcipll_fb_divider;\n\nstruct pp_atomctrl_clock_dividers_rv730 {\n\tuint32_t pll_post_divider;\n\tpp_atomctrl_tcipll_fb_divider mpll_feedback_divider;\n\tuint32_t pll_ref_divider;\n\tbool  enable_post_divider;\n\tbool  enable_dithen;\n\tuint32_t vco_mode;\n};\ntypedef struct pp_atomctrl_clock_dividers_rv730 pp_atomctrl_clock_dividers_rv730;\n\n\nstruct pp_atomctrl_clock_dividers_kong {\n\tuint32_t    pll_post_divider;\n\tuint32_t    real_clock;\n};\ntypedef struct pp_atomctrl_clock_dividers_kong pp_atomctrl_clock_dividers_kong;\n\nstruct pp_atomctrl_clock_dividers_ci {\n\tuint32_t    pll_post_divider;                \n\tuint32_t    real_clock;\n\tpp_atomctrl_tcipll_fb_divider   ul_fb_div;          \n\tuint8_t   uc_pll_ref_div;                       \n\tuint8_t   uc_pll_post_div;                       \n\tuint8_t   uc_pll_cntl_flag;                     \n};\ntypedef struct pp_atomctrl_clock_dividers_ci pp_atomctrl_clock_dividers_ci;\n\nstruct pp_atomctrl_clock_dividers_vi {\n\tuint32_t    pll_post_divider;                \n\tuint32_t    real_clock;\n\tpp_atomctrl_tcipll_fb_divider   ul_fb_div;          \n\tuint8_t   uc_pll_ref_div;                       \n\tuint8_t   uc_pll_post_div;                      \n\tuint8_t   uc_pll_cntl_flag;                     \n};\ntypedef struct pp_atomctrl_clock_dividers_vi pp_atomctrl_clock_dividers_vi;\n\nstruct pp_atomctrl_clock_dividers_ai {\n\tu16 usSclk_fcw_frac;\n\tu16  usSclk_fcw_int;\n\tu8   ucSclkPostDiv;\n\tu8   ucSclkVcoMode;\n\tu8   ucSclkPllRange;\n\tu8   ucSscEnable;\n\tu16  usSsc_fcw1_frac;\n\tu16  usSsc_fcw1_int;\n\tu16  usReserved;\n\tu16  usPcc_fcw_int;\n\tu16  usSsc_fcw_slew_frac;\n\tu16  usPcc_fcw_slew_frac;\n};\ntypedef struct pp_atomctrl_clock_dividers_ai pp_atomctrl_clock_dividers_ai;\n\n\nunion pp_atomctrl_s_mpll_fb_divider {\n\tstruct {\n\t\tuint32_t cl_kf : 12;\n\t\tuint32_t clk_frac : 12;\n\t\tuint32_t un_used : 8;\n\t};\n\tuint32_t ul_fb_divider;\n};\ntypedef union pp_atomctrl_s_mpll_fb_divider pp_atomctrl_s_mpll_fb_divider;\n\nenum pp_atomctrl_spread_spectrum_mode {\n\tpp_atomctrl_spread_spectrum_mode_down = 0,\n\tpp_atomctrl_spread_spectrum_mode_center\n};\ntypedef enum pp_atomctrl_spread_spectrum_mode pp_atomctrl_spread_spectrum_mode;\n\nstruct pp_atomctrl_memory_clock_param {\n\tpp_atomctrl_s_mpll_fb_divider mpll_fb_divider;\n\tuint32_t mpll_post_divider;\n\tuint32_t bw_ctrl;\n\tuint32_t dll_speed;\n\tuint32_t vco_mode;\n\tuint32_t yclk_sel;\n\tuint32_t qdr;\n\tuint32_t half_rate;\n};\ntypedef struct pp_atomctrl_memory_clock_param pp_atomctrl_memory_clock_param;\n\nstruct pp_atomctrl_memory_clock_param_ai {\n\tuint32_t ulClock;\n\tuint32_t ulPostDiv;\n\tuint16_t ulMclk_fcw_frac;\n\tuint16_t ulMclk_fcw_int;\n};\ntypedef struct pp_atomctrl_memory_clock_param_ai pp_atomctrl_memory_clock_param_ai;\n\nstruct pp_atomctrl_internal_ss_info {\n\tuint32_t speed_spectrum_percentage;                       \n\tuint32_t speed_spectrum_rate;                             \n\tpp_atomctrl_spread_spectrum_mode speed_spectrum_mode;\n};\ntypedef struct pp_atomctrl_internal_ss_info pp_atomctrl_internal_ss_info;\n\n#ifndef NUMBER_OF_M3ARB_PARAMS\n#define NUMBER_OF_M3ARB_PARAMS 3\n#endif\n\n#ifndef NUMBER_OF_M3ARB_PARAM_SETS\n#define NUMBER_OF_M3ARB_PARAM_SETS 10\n#endif\n\nstruct pp_atomctrl_kong_system_info {\n\tuint32_t\t\t\tul_bootup_uma_clock;           \n\tuint16_t\t\t\tus_max_nb_voltage;             \n\tuint16_t\t\t\tus_min_nb_voltage;             \n\tuint16_t\t\t\tus_bootup_nb_voltage;          \n\tuint8_t\t\t\tuc_htc_tmp_lmt;                \n\tuint8_t\t\t\tuc_tj_offset;                 \n\t \n\tuint32_t          ul_csr_m3_srb_cntl[NUMBER_OF_M3ARB_PARAM_SETS][NUMBER_OF_M3ARB_PARAMS]; \n};\ntypedef struct pp_atomctrl_kong_system_info pp_atomctrl_kong_system_info;\n\nstruct pp_atomctrl_memory_info {\n\tuint8_t memory_vendor;\n\tuint8_t memory_type;\n};\ntypedef struct pp_atomctrl_memory_info pp_atomctrl_memory_info;\n\n#define MAX_AC_TIMING_ENTRIES 16\n\nstruct pp_atomctrl_memory_clock_range_table {\n\tuint8_t   num_entries;\n\tuint8_t   rsv[3];\n\n\tuint32_t mclk[MAX_AC_TIMING_ENTRIES];\n};\ntypedef struct pp_atomctrl_memory_clock_range_table pp_atomctrl_memory_clock_range_table;\n\nstruct pp_atomctrl_voltage_table_entry {\n\tuint16_t value;\n\tuint32_t smio_low;\n};\n\ntypedef struct pp_atomctrl_voltage_table_entry pp_atomctrl_voltage_table_entry;\n\nstruct pp_atomctrl_voltage_table {\n\tuint32_t count;\n\tuint32_t mask_low;\n\tuint32_t phase_delay;    \n\tpp_atomctrl_voltage_table_entry entries[PP_ATOMCTRL_MAX_VOLTAGE_ENTRIES];\n};\n\ntypedef struct pp_atomctrl_voltage_table pp_atomctrl_voltage_table;\n\n#define VBIOS_MC_REGISTER_ARRAY_SIZE           32\n#define VBIOS_MAX_AC_TIMING_ENTRIES            20\n\nstruct pp_atomctrl_mc_reg_entry {\n\tuint32_t           mclk_max;\n\tuint32_t mc_data[VBIOS_MC_REGISTER_ARRAY_SIZE];\n};\ntypedef struct pp_atomctrl_mc_reg_entry pp_atomctrl_mc_reg_entry;\n\nstruct pp_atomctrl_mc_register_address {\n\tuint16_t s1;\n\tuint8_t  uc_pre_reg_data;\n};\n\ntypedef struct pp_atomctrl_mc_register_address pp_atomctrl_mc_register_address;\n\n#define MAX_SCLK_RANGE 8\n\nstruct pp_atom_ctrl_sclk_range_table_entry{\n\tuint8_t  ucVco_setting;\n\tuint8_t  ucPostdiv;\n\tuint16_t usFcw_pcc;\n\tuint16_t usFcw_trans_upper;\n\tuint16_t usRcw_trans_lower;\n};\n\n\nstruct pp_atom_ctrl_sclk_range_table{\n\tstruct pp_atom_ctrl_sclk_range_table_entry entry[MAX_SCLK_RANGE];\n};\n\nstruct pp_atomctrl_mc_reg_table {\n\tuint8_t                         last;                     \n\tuint8_t                         num_entries;              \n\tpp_atomctrl_mc_reg_entry        mc_reg_table_entry[VBIOS_MAX_AC_TIMING_ENTRIES];\n\tpp_atomctrl_mc_register_address mc_reg_address[VBIOS_MC_REGISTER_ARRAY_SIZE];\n};\ntypedef struct pp_atomctrl_mc_reg_table pp_atomctrl_mc_reg_table;\n\nstruct pp_atomctrl_gpio_pin_assignment {\n\tuint16_t                   us_gpio_pin_aindex;\n\tuint8_t                    uc_gpio_pin_bit_shift;\n};\ntypedef struct pp_atomctrl_gpio_pin_assignment pp_atomctrl_gpio_pin_assignment;\n\nstruct pp_atom_ctrl__avfs_parameters {\n\tuint32_t  ulAVFS_meanNsigma_Acontant0;\n\tuint32_t  ulAVFS_meanNsigma_Acontant1;\n\tuint32_t  ulAVFS_meanNsigma_Acontant2;\n\tuint16_t usAVFS_meanNsigma_DC_tol_sigma;\n\tuint16_t usAVFS_meanNsigma_Platform_mean;\n\tuint16_t usAVFS_meanNsigma_Platform_sigma;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSOFF_a0;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSOFF_a1;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSOFF_a2;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSON_a0;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSON_a1;\n\tuint32_t  ulGB_VDROOP_TABLE_CKSON_a2;\n\tuint32_t  ulAVFSGB_FUSE_TABLE_CKSOFF_m1;\n\tuint16_t  usAVFSGB_FUSE_TABLE_CKSOFF_m2;\n\tuint32_t  ulAVFSGB_FUSE_TABLE_CKSOFF_b;\n\tuint32_t  ulAVFSGB_FUSE_TABLE_CKSON_m1;\n\tuint16_t  usAVFSGB_FUSE_TABLE_CKSON_m2;\n\tuint32_t  ulAVFSGB_FUSE_TABLE_CKSON_b;\n\tuint16_t  usMaxVoltage_0_25mv;\n\tuint8_t  ucEnableGB_VDROOP_TABLE_CKSOFF;\n\tuint8_t  ucEnableGB_VDROOP_TABLE_CKSON;\n\tuint8_t  ucEnableGB_FUSE_TABLE_CKSOFF;\n\tuint8_t  ucEnableGB_FUSE_TABLE_CKSON;\n\tuint16_t usPSM_Age_ComFactor;\n\tuint8_t  ucEnableApplyAVFS_CKS_OFF_Voltage;\n\tuint8_t  ucReserved;\n};\n\nstruct _AtomCtrl_HiLoLeakageOffsetTable {\n    USHORT usHiLoLeakageThreshold;\n    USHORT usEdcDidtLoDpm7TableOffset;\n    USHORT usEdcDidtHiDpm7TableOffset;\n};\ntypedef struct _AtomCtrl_HiLoLeakageOffsetTable AtomCtrl_HiLoLeakageOffsetTable;\n\nstruct _AtomCtrl_EDCLeakgeTable {\n    ULONG DIDT_REG[24];\n};\ntypedef struct _AtomCtrl_EDCLeakgeTable AtomCtrl_EDCLeakgeTable;\n\nextern bool atomctrl_get_pp_assign_pin(struct pp_hwmgr *hwmgr, const uint32_t pinId, pp_atomctrl_gpio_pin_assignment *gpio_pin_assignment);\nextern int atomctrl_get_voltage_evv_on_sclk(struct pp_hwmgr *hwmgr, uint8_t voltage_type, uint32_t sclk, uint16_t virtual_voltage_Id, uint16_t *voltage);\nextern int atomctrl_get_voltage_evv(struct pp_hwmgr *hwmgr, uint16_t virtual_voltage_id, uint16_t *voltage);\nextern uint32_t atomctrl_get_mpll_reference_clock(struct pp_hwmgr *hwmgr);\n\nbool atomctrl_is_asic_internal_ss_supported(struct pp_hwmgr *hwmgr);\nextern int atomctrl_get_memory_clock_spread_spectrum(struct pp_hwmgr *hwmgr, const uint32_t memory_clock, pp_atomctrl_internal_ss_info *ssInfo);\nextern int atomctrl_get_engine_clock_spread_spectrum(struct pp_hwmgr *hwmgr, const uint32_t engine_clock, pp_atomctrl_internal_ss_info *ssInfo);\nextern int atomctrl_initialize_mc_reg_table(struct pp_hwmgr *hwmgr, uint8_t module_index, pp_atomctrl_mc_reg_table *table);\nextern int atomctrl_initialize_mc_reg_table_v2_2(struct pp_hwmgr *hwmgr, uint8_t module_index, pp_atomctrl_mc_reg_table *table);\nextern int atomctrl_set_engine_dram_timings_rv770(struct pp_hwmgr *hwmgr, uint32_t engine_clock, uint32_t memory_clock);\nextern uint32_t atomctrl_get_reference_clock(struct pp_hwmgr *hwmgr);\nextern int atomctrl_get_memory_pll_dividers_si(struct pp_hwmgr *hwmgr, uint32_t clock_value, pp_atomctrl_memory_clock_param *mpll_param, bool strobe_mode);\nextern int atomctrl_get_engine_pll_dividers_vi(struct pp_hwmgr *hwmgr, uint32_t clock_value, pp_atomctrl_clock_dividers_vi *dividers);\nextern int atomctrl_get_dfs_pll_dividers_vi(struct pp_hwmgr *hwmgr, uint32_t clock_value, pp_atomctrl_clock_dividers_vi *dividers);\nextern bool atomctrl_is_voltage_controlled_by_gpio_v3(struct pp_hwmgr *hwmgr, uint8_t voltage_type, uint8_t voltage_mode);\nextern int atomctrl_get_voltage_table_v3(struct pp_hwmgr *hwmgr, uint8_t voltage_type, uint8_t voltage_mode, pp_atomctrl_voltage_table *voltage_table);\nextern int atomctrl_get_memory_pll_dividers_vi(struct pp_hwmgr *hwmgr,\n\t\tuint32_t clock_value, pp_atomctrl_memory_clock_param *mpll_param);\nextern int atomctrl_get_memory_pll_dividers_ai(struct pp_hwmgr *hwmgr,\n\t\tuint32_t clock_value, pp_atomctrl_memory_clock_param_ai *mpll_param);\nextern int atomctrl_get_engine_pll_dividers_kong(struct pp_hwmgr *hwmgr,\n\t\t\t\t\t\t uint32_t clock_value,\n\t\t\t\t\t\t pp_atomctrl_clock_dividers_kong *dividers);\nextern int atomctrl_read_efuse(struct pp_hwmgr *hwmgr, uint16_t start_index,\n\t\tuint16_t end_index, uint32_t *efuse);\nextern int atomctrl_calculate_voltage_evv_on_sclk(struct pp_hwmgr *hwmgr, uint8_t voltage_type,\n\t\tuint32_t sclk, uint16_t virtual_voltage_Id, uint16_t *voltage, uint16_t dpm_level, bool debug);\nextern int atomctrl_get_engine_pll_dividers_ai(struct pp_hwmgr *hwmgr, uint32_t clock_value, pp_atomctrl_clock_dividers_ai *dividers);\nextern int atomctrl_set_ac_timing_ai(struct pp_hwmgr *hwmgr, uint32_t memory_clock,\n\t\t\t\t\t\t\t\tuint8_t level);\nextern int atomctrl_get_voltage_evv_on_sclk_ai(struct pp_hwmgr *hwmgr, uint8_t voltage_type,\n\t\t\t\tuint32_t sclk, uint16_t virtual_voltage_Id, uint32_t *voltage);\nextern int atomctrl_get_smc_sclk_range_table(struct pp_hwmgr *hwmgr, struct pp_atom_ctrl_sclk_range_table *table);\n\nextern int atomctrl_get_avfs_information(struct pp_hwmgr *hwmgr, struct pp_atom_ctrl__avfs_parameters *param);\n\nextern int  atomctrl_get_svi2_info(struct pp_hwmgr *hwmgr, uint8_t voltage_type,\n\t\t\t\tuint8_t *svd_gpio_id, uint8_t *svc_gpio_id,\n\t\t\t\tuint16_t *load_line);\n\nextern int atomctrl_get_leakage_vddc_base_on_leakage(struct pp_hwmgr *hwmgr,\n\t\t\t\t\tuint16_t *vddc, uint16_t *vddci,\n\t\t\t\t\tuint16_t virtual_voltage_id,\n\t\t\t\t\tuint16_t efuse_voltage_id);\nextern int atomctrl_get_leakage_id_from_efuse(struct pp_hwmgr *hwmgr, uint16_t *virtual_voltage_id);\n\nextern void atomctrl_get_voltage_range(struct pp_hwmgr *hwmgr, uint32_t *max_vddc,\n\t\t\t\t\t\t\tuint32_t *min_vddc);\n\nextern int atomctrl_get_edc_hilo_leakage_offset_table(struct pp_hwmgr *hwmgr,\n\t\t\t\t\t\t      AtomCtrl_HiLoLeakageOffsetTable *table);\n\nextern int atomctrl_get_edc_leakage_table(struct pp_hwmgr *hwmgr,\n\t\t\t\t\t  AtomCtrl_EDCLeakgeTable *table,\n\t\t\t\t\t  uint16_t offset);\n\nextern int atomctrl_get_vddc_shared_railinfo(struct pp_hwmgr *hwmgr, uint8_t *shared_rail);\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}