{
  "module_name": "smu7_baco.c",
  "hash_id": "e7070f242f7287b8920a6bfcc3bf069a52223a91c9666ec3763ef9494eba21d1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_baco.c",
  "human_readable_source": " \n#include \"amdgpu.h\"\n#include \"smu7_baco.h\"\n#include \"tonga_baco.h\"\n#include \"fiji_baco.h\"\n#include \"polaris_baco.h\"\n#include \"ci_baco.h\"\n\n#include \"bif/bif_5_0_d.h\"\n#include \"bif/bif_5_0_sh_mask.h\"\n\n#include \"smu/smu_7_1_2_d.h\"\n#include \"smu/smu_7_1_2_sh_mask.h\"\n\nint smu7_baco_get_capability(struct pp_hwmgr *hwmgr, bool *cap)\n{\n\tstruct amdgpu_device *adev = (struct amdgpu_device *)(hwmgr->adev);\n\tuint32_t reg;\n\n\t*cap = false;\n\tif (!phm_cap_enabled(hwmgr->platform_descriptor.platformCaps, PHM_PlatformCaps_BACO))\n\t\treturn 0;\n\n\treg = RREG32(mmCC_BIF_BX_FUSESTRAP0);\n\n\tif (reg & CC_BIF_BX_FUSESTRAP0__STRAP_BIF_PX_CAPABLE_MASK)\n\t\t*cap = true;\n\n\treturn 0;\n}\n\nint smu7_baco_get_state(struct pp_hwmgr *hwmgr, enum BACO_STATE *state)\n{\n\tstruct amdgpu_device *adev = (struct amdgpu_device *)(hwmgr->adev);\n\tuint32_t reg;\n\n\treg = RREG32(mmBACO_CNTL);\n\n\tif (reg & BACO_CNTL__BACO_MODE_MASK)\n\t\t \n\t\t*state = BACO_STATE_IN;\n\telse\n\t\t*state = BACO_STATE_OUT;\n\treturn 0;\n}\n\nint smu7_baco_set_state(struct pp_hwmgr *hwmgr, enum BACO_STATE state)\n{\n\tstruct amdgpu_device *adev = (struct amdgpu_device *)(hwmgr->adev);\n\n\tswitch (adev->asic_type) {\n\tcase CHIP_TOPAZ:\n\tcase CHIP_TONGA:\n\t\treturn tonga_baco_set_state(hwmgr, state);\n\tcase CHIP_FIJI:\n\t\treturn fiji_baco_set_state(hwmgr, state);\n\tcase CHIP_POLARIS10:\n\tcase CHIP_POLARIS11:\n\tcase CHIP_POLARIS12:\n\tcase CHIP_VEGAM:\n\t\treturn polaris_baco_set_state(hwmgr, state);\n#ifdef CONFIG_DRM_AMDGPU_CIK\n\tcase CHIP_BONAIRE:\n\tcase CHIP_HAWAII:\n\t\treturn ci_baco_set_state(hwmgr, state);\n#endif\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}