{
  "module_name": "vega20_processpptables.c",
  "hash_id": "41ed5651c30c1cdcea3717a591bcc17001f075dc45f2303b7d05dd4f50581c76",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_processpptables.c",
  "human_readable_source": " \n#include <linux/module.h>\n#include <linux/slab.h>\n\n#include \"smu11_driver_if.h\"\n#include \"vega20_processpptables.h\"\n#include \"ppatomfwctrl.h\"\n#include \"atomfirmware.h\"\n#include \"pp_debug.h\"\n#include \"cgs_common.h\"\n#include \"vega20_pptable.h\"\n\n#define VEGA20_FAN_TARGET_TEMPERATURE_OVERRIDE 105\n\nstatic void set_hw_cap(struct pp_hwmgr *hwmgr, bool enable,\n\t\tenum phm_platform_caps cap)\n{\n\tif (enable)\n\t\tphm_cap_set(hwmgr->platform_descriptor.platformCaps, cap);\n\telse\n\t\tphm_cap_unset(hwmgr->platform_descriptor.platformCaps, cap);\n}\n\nstatic const void *get_powerplay_table(struct pp_hwmgr *hwmgr)\n{\n\tint index = GetIndexIntoMasterDataTable(powerplayinfo);\n\n\tu16 size;\n\tu8 frev, crev;\n\tconst void *table_address = hwmgr->soft_pp_table;\n\n\tif (!table_address) {\n\t\ttable_address = (ATOM_Vega20_POWERPLAYTABLE *)\n\t\t\t\tsmu_atom_get_data_table(hwmgr->adev, index,\n\t\t\t\t\t\t&size, &frev, &crev);\n\n\t\thwmgr->soft_pp_table = table_address;\n\t\thwmgr->soft_pp_table_size = size;\n\t}\n\n\treturn table_address;\n}\n\n#if 0\nstatic void dump_pptable(PPTable_t *pptable)\n{\n\tint i;\n\n\tpr_info(\"Version = 0x%08x\\n\", pptable->Version);\n\n\tpr_info(\"FeaturesToRun[0] = 0x%08x\\n\", pptable->FeaturesToRun[0]);\n\tpr_info(\"FeaturesToRun[1] = 0x%08x\\n\", pptable->FeaturesToRun[1]);\n\n\tpr_info(\"SocketPowerLimitAc0 = %d\\n\", pptable->SocketPowerLimitAc0);\n\tpr_info(\"SocketPowerLimitAc0Tau = %d\\n\", pptable->SocketPowerLimitAc0Tau);\n\tpr_info(\"SocketPowerLimitAc1 = %d\\n\", pptable->SocketPowerLimitAc1);\n\tpr_info(\"SocketPowerLimitAc1Tau = %d\\n\", pptable->SocketPowerLimitAc1Tau);\n\tpr_info(\"SocketPowerLimitAc2 = %d\\n\", pptable->SocketPowerLimitAc2);\n\tpr_info(\"SocketPowerLimitAc2Tau = %d\\n\", pptable->SocketPowerLimitAc2Tau);\n\tpr_info(\"SocketPowerLimitAc3 = %d\\n\", pptable->SocketPowerLimitAc3);\n\tpr_info(\"SocketPowerLimitAc3Tau = %d\\n\", pptable->SocketPowerLimitAc3Tau);\n\tpr_info(\"SocketPowerLimitDc = %d\\n\", pptable->SocketPowerLimitDc);\n\tpr_info(\"SocketPowerLimitDcTau = %d\\n\", pptable->SocketPowerLimitDcTau);\n\tpr_info(\"TdcLimitSoc = %d\\n\", pptable->TdcLimitSoc);\n\tpr_info(\"TdcLimitSocTau = %d\\n\", pptable->TdcLimitSocTau);\n\tpr_info(\"TdcLimitGfx = %d\\n\", pptable->TdcLimitGfx);\n\tpr_info(\"TdcLimitGfxTau = %d\\n\", pptable->TdcLimitGfxTau);\n\n\tpr_info(\"TedgeLimit = %d\\n\", pptable->TedgeLimit);\n\tpr_info(\"ThotspotLimit = %d\\n\", pptable->ThotspotLimit);\n\tpr_info(\"ThbmLimit = %d\\n\", pptable->ThbmLimit);\n\tpr_info(\"Tvr_gfxLimit = %d\\n\", pptable->Tvr_gfxLimit);\n\tpr_info(\"Tvr_memLimit = %d\\n\", pptable->Tvr_memLimit);\n\tpr_info(\"Tliquid1Limit = %d\\n\", pptable->Tliquid1Limit);\n\tpr_info(\"Tliquid2Limit = %d\\n\", pptable->Tliquid2Limit);\n\tpr_info(\"TplxLimit = %d\\n\", pptable->TplxLimit);\n\tpr_info(\"FitLimit = %d\\n\", pptable->FitLimit);\n\n\tpr_info(\"PpmPowerLimit = %d\\n\", pptable->PpmPowerLimit);\n\tpr_info(\"PpmTemperatureThreshold = %d\\n\", pptable->PpmTemperatureThreshold);\n\n\tpr_info(\"MemoryOnPackage = 0x%02x\\n\", pptable->MemoryOnPackage);\n\tpr_info(\"padding8_limits = 0x%02x\\n\", pptable->padding8_limits);\n\tpr_info(\"Tvr_SocLimit = %d\\n\", pptable->Tvr_SocLimit);\n\n\tpr_info(\"UlvVoltageOffsetSoc = %d\\n\", pptable->UlvVoltageOffsetSoc);\n\tpr_info(\"UlvVoltageOffsetGfx = %d\\n\", pptable->UlvVoltageOffsetGfx);\n\n\tpr_info(\"UlvSmnclkDid = %d\\n\", pptable->UlvSmnclkDid);\n\tpr_info(\"UlvMp1clkDid = %d\\n\", pptable->UlvMp1clkDid);\n\tpr_info(\"UlvGfxclkBypass = %d\\n\", pptable->UlvGfxclkBypass);\n\tpr_info(\"Padding234 = 0x%02x\\n\", pptable->Padding234);\n\n\tpr_info(\"MinVoltageGfx = %d\\n\", pptable->MinVoltageGfx);\n\tpr_info(\"MinVoltageSoc = %d\\n\", pptable->MinVoltageSoc);\n\tpr_info(\"MaxVoltageGfx = %d\\n\", pptable->MaxVoltageGfx);\n\tpr_info(\"MaxVoltageSoc = %d\\n\", pptable->MaxVoltageSoc);\n\n\tpr_info(\"LoadLineResistanceGfx = %d\\n\", pptable->LoadLineResistanceGfx);\n\tpr_info(\"LoadLineResistanceSoc = %d\\n\", pptable->LoadLineResistanceSoc);\n\n\tpr_info(\"[PPCLK_GFXCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_GFXCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_VCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_VCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_DCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_ECLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_ECLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_SOCCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_SOCCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_UCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_UCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_DCEFCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DCEFCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_DISPCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_DISPCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_PIXCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_PIXCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_PHYCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_PHYCLK].SsCurve.c);\n\n\tpr_info(\"[PPCLK_FCLK]\\n\"\n\t\t\t\"  .VoltageMode          = 0x%02x\\n\"\n\t\t\t\"  .SnapToDiscrete       = 0x%02x\\n\"\n\t\t\t\"  .NumDiscreteLevels    = 0x%02x\\n\"\n\t\t\t\"  .padding              = 0x%02x\\n\"\n\t\t\t\"  .ConversionToAvfsClk{m = 0x%08x b = 0x%08x}\\n\"\n\t\t\t\"  .SsCurve            {a = 0x%08x b = 0x%08x c = 0x%08x}\\n\",\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].VoltageMode,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].SnapToDiscrete,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].NumDiscreteLevels,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].padding,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].ConversionToAvfsClk.m,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].ConversionToAvfsClk.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].SsCurve.a,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].SsCurve.b,\n\t\t\tpptable->DpmDescriptor[PPCLK_FCLK].SsCurve.c);\n\n\n\tpr_info(\"FreqTableGfx\\n\");\n\tfor (i = 0; i < NUM_GFXCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableGfx[i]);\n\n\tpr_info(\"FreqTableVclk\\n\");\n\tfor (i = 0; i < NUM_VCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableVclk[i]);\n\n\tpr_info(\"FreqTableDclk\\n\");\n\tfor (i = 0; i < NUM_DCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableDclk[i]);\n\n\tpr_info(\"FreqTableEclk\\n\");\n\tfor (i = 0; i < NUM_ECLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableEclk[i]);\n\n\tpr_info(\"FreqTableSocclk\\n\");\n\tfor (i = 0; i < NUM_SOCCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableSocclk[i]);\n\n\tpr_info(\"FreqTableUclk\\n\");\n\tfor (i = 0; i < NUM_UCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableUclk[i]);\n\n\tpr_info(\"FreqTableFclk\\n\");\n\tfor (i = 0; i < NUM_FCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableFclk[i]);\n\n\tpr_info(\"FreqTableDcefclk\\n\");\n\tfor (i = 0; i < NUM_DCEFCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableDcefclk[i]);\n\n\tpr_info(\"FreqTableDispclk\\n\");\n\tfor (i = 0; i < NUM_DISPCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTableDispclk[i]);\n\n\tpr_info(\"FreqTablePixclk\\n\");\n\tfor (i = 0; i < NUM_PIXCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTablePixclk[i]);\n\n\tpr_info(\"FreqTablePhyclk\\n\");\n\tfor (i = 0; i < NUM_PHYCLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%02d] = %d\\n\", i, pptable->FreqTablePhyclk[i]);\n\n\tpr_info(\"DcModeMaxFreq[PPCLK_GFXCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_GFXCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_VCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_VCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_DCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_DCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_ECLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_ECLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_SOCCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_SOCCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_UCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_UCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_DCEFCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_DCEFCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_DISPCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_DISPCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_PIXCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_PIXCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_PHYCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_PHYCLK]);\n\tpr_info(\"DcModeMaxFreq[PPCLK_FCLK] = %d\\n\", pptable->DcModeMaxFreq[PPCLK_FCLK]);\n\tpr_info(\"Padding8_Clks = %d\\n\", pptable->Padding8_Clks);\n\n\tpr_info(\"Mp0clkFreq\\n\");\n\tfor (i = 0; i < NUM_MP0CLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->Mp0clkFreq[i]);\n\n\tpr_info(\"Mp0DpmVoltage\\n\");\n\tfor (i = 0; i < NUM_MP0CLK_DPM_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->Mp0DpmVoltage[i]);\n\n\tpr_info(\"GfxclkFidle = 0x%x\\n\", pptable->GfxclkFidle);\n\tpr_info(\"GfxclkSlewRate = 0x%x\\n\", pptable->GfxclkSlewRate);\n\tpr_info(\"CksEnableFreq = 0x%x\\n\", pptable->CksEnableFreq);\n\tpr_info(\"Padding789 = 0x%x\\n\", pptable->Padding789);\n\tpr_info(\"CksVoltageOffset[a = 0x%08x b = 0x%08x c = 0x%08x]\\n\",\n\t\t\tpptable->CksVoltageOffset.a,\n\t\t\tpptable->CksVoltageOffset.b,\n\t\t\tpptable->CksVoltageOffset.c);\n\tpr_info(\"Padding567[0] = 0x%x\\n\", pptable->Padding567[0]);\n\tpr_info(\"Padding567[1] = 0x%x\\n\", pptable->Padding567[1]);\n\tpr_info(\"Padding567[2] = 0x%x\\n\", pptable->Padding567[2]);\n\tpr_info(\"Padding567[3] = 0x%x\\n\", pptable->Padding567[3]);\n\tpr_info(\"GfxclkDsMaxFreq = %d\\n\", pptable->GfxclkDsMaxFreq);\n\tpr_info(\"GfxclkSource = 0x%x\\n\", pptable->GfxclkSource);\n\tpr_info(\"Padding456 = 0x%x\\n\", pptable->Padding456);\n\n\tpr_info(\"LowestUclkReservedForUlv = %d\\n\", pptable->LowestUclkReservedForUlv);\n\tpr_info(\"Padding8_Uclk[0] = 0x%x\\n\", pptable->Padding8_Uclk[0]);\n\tpr_info(\"Padding8_Uclk[1] = 0x%x\\n\", pptable->Padding8_Uclk[1]);\n\tpr_info(\"Padding8_Uclk[2] = 0x%x\\n\", pptable->Padding8_Uclk[2]);\n\n\tpr_info(\"PcieGenSpeed\\n\");\n\tfor (i = 0; i < NUM_LINK_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->PcieGenSpeed[i]);\n\n\tpr_info(\"PcieLaneCount\\n\");\n\tfor (i = 0; i < NUM_LINK_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->PcieLaneCount[i]);\n\n\tpr_info(\"LclkFreq\\n\");\n\tfor (i = 0; i < NUM_LINK_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->LclkFreq[i]);\n\n\tpr_info(\"EnableTdpm = %d\\n\", pptable->EnableTdpm);\n\tpr_info(\"TdpmHighHystTemperature = %d\\n\", pptable->TdpmHighHystTemperature);\n\tpr_info(\"TdpmLowHystTemperature = %d\\n\", pptable->TdpmLowHystTemperature);\n\tpr_info(\"GfxclkFreqHighTempLimit = %d\\n\", pptable->GfxclkFreqHighTempLimit);\n\n\tpr_info(\"FanStopTemp = %d\\n\", pptable->FanStopTemp);\n\tpr_info(\"FanStartTemp = %d\\n\", pptable->FanStartTemp);\n\n\tpr_info(\"FanGainEdge = %d\\n\", pptable->FanGainEdge);\n\tpr_info(\"FanGainHotspot = %d\\n\", pptable->FanGainHotspot);\n\tpr_info(\"FanGainLiquid = %d\\n\", pptable->FanGainLiquid);\n\tpr_info(\"FanGainVrGfx = %d\\n\", pptable->FanGainVrGfx);\n\tpr_info(\"FanGainVrSoc = %d\\n\", pptable->FanGainVrSoc);\n\tpr_info(\"FanGainPlx = %d\\n\", pptable->FanGainPlx);\n\tpr_info(\"FanGainHbm = %d\\n\", pptable->FanGainHbm);\n\tpr_info(\"FanPwmMin = %d\\n\", pptable->FanPwmMin);\n\tpr_info(\"FanAcousticLimitRpm = %d\\n\", pptable->FanAcousticLimitRpm);\n\tpr_info(\"FanThrottlingRpm = %d\\n\", pptable->FanThrottlingRpm);\n\tpr_info(\"FanMaximumRpm = %d\\n\", pptable->FanMaximumRpm);\n\tpr_info(\"FanTargetTemperature = %d\\n\", pptable->FanTargetTemperature);\n\tpr_info(\"FanTargetGfxclk = %d\\n\", pptable->FanTargetGfxclk);\n\tpr_info(\"FanZeroRpmEnable = %d\\n\", pptable->FanZeroRpmEnable);\n\tpr_info(\"FanTachEdgePerRev = %d\\n\", pptable->FanTachEdgePerRev);\n\n\tpr_info(\"FuzzyFan_ErrorSetDelta = %d\\n\", pptable->FuzzyFan_ErrorSetDelta);\n\tpr_info(\"FuzzyFan_ErrorRateSetDelta = %d\\n\", pptable->FuzzyFan_ErrorRateSetDelta);\n\tpr_info(\"FuzzyFan_PwmSetDelta = %d\\n\", pptable->FuzzyFan_PwmSetDelta);\n\tpr_info(\"FuzzyFan_Reserved = %d\\n\", pptable->FuzzyFan_Reserved);\n\n\tpr_info(\"OverrideAvfsGb[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->OverrideAvfsGb[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"OverrideAvfsGb[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->OverrideAvfsGb[AVFS_VOLTAGE_SOC]);\n\tpr_info(\"Padding8_Avfs[0] = %d\\n\", pptable->Padding8_Avfs[0]);\n\tpr_info(\"Padding8_Avfs[1] = %d\\n\", pptable->Padding8_Avfs[1]);\n\n\tpr_info(\"qAvfsGb[AVFS_VOLTAGE_GFX]{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_GFX].a,\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_GFX].b,\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_GFX].c);\n\tpr_info(\"qAvfsGb[AVFS_VOLTAGE_SOC]{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_SOC].a,\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_SOC].b,\n\t\t\tpptable->qAvfsGb[AVFS_VOLTAGE_SOC].c);\n\tpr_info(\"dBtcGbGfxCksOn{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->dBtcGbGfxCksOn.a,\n\t\t\tpptable->dBtcGbGfxCksOn.b,\n\t\t\tpptable->dBtcGbGfxCksOn.c);\n\tpr_info(\"dBtcGbGfxCksOff{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->dBtcGbGfxCksOff.a,\n\t\t\tpptable->dBtcGbGfxCksOff.b,\n\t\t\tpptable->dBtcGbGfxCksOff.c);\n\tpr_info(\"dBtcGbGfxAfll{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->dBtcGbGfxAfll.a,\n\t\t\tpptable->dBtcGbGfxAfll.b,\n\t\t\tpptable->dBtcGbGfxAfll.c);\n\tpr_info(\"dBtcGbSoc{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->dBtcGbSoc.a,\n\t\t\tpptable->dBtcGbSoc.b,\n\t\t\tpptable->dBtcGbSoc.c);\n\tpr_info(\"qAgingGb[AVFS_VOLTAGE_GFX]{m = 0x%x b = 0x%x}\\n\",\n\t\t\tpptable->qAgingGb[AVFS_VOLTAGE_GFX].m,\n\t\t\tpptable->qAgingGb[AVFS_VOLTAGE_GFX].b);\n\tpr_info(\"qAgingGb[AVFS_VOLTAGE_SOC]{m = 0x%x b = 0x%x}\\n\",\n\t\t\tpptable->qAgingGb[AVFS_VOLTAGE_SOC].m,\n\t\t\tpptable->qAgingGb[AVFS_VOLTAGE_SOC].b);\n\n\tpr_info(\"qStaticVoltageOffset[AVFS_VOLTAGE_GFX]{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_GFX].a,\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_GFX].b,\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_GFX].c);\n\tpr_info(\"qStaticVoltageOffset[AVFS_VOLTAGE_SOC]{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_SOC].a,\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_SOC].b,\n\t\t\tpptable->qStaticVoltageOffset[AVFS_VOLTAGE_SOC].c);\n\n\tpr_info(\"DcTol[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->DcTol[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"DcTol[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->DcTol[AVFS_VOLTAGE_SOC]);\n\n\tpr_info(\"DcBtcEnabled[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->DcBtcEnabled[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"DcBtcEnabled[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->DcBtcEnabled[AVFS_VOLTAGE_SOC]);\n\tpr_info(\"Padding8_GfxBtc[0] = 0x%x\\n\", pptable->Padding8_GfxBtc[0]);\n\tpr_info(\"Padding8_GfxBtc[1] = 0x%x\\n\", pptable->Padding8_GfxBtc[1]);\n\n\tpr_info(\"DcBtcMin[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->DcBtcMin[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"DcBtcMin[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->DcBtcMin[AVFS_VOLTAGE_SOC]);\n\tpr_info(\"DcBtcMax[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->DcBtcMax[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"DcBtcMax[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->DcBtcMax[AVFS_VOLTAGE_SOC]);\n\n\tpr_info(\"XgmiLinkSpeed\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiLinkSpeed[i]);\n\tpr_info(\"XgmiLinkWidth\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiLinkWidth[i]);\n\tpr_info(\"XgmiFclkFreq\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiFclkFreq[i]);\n\tpr_info(\"XgmiUclkFreq\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiUclkFreq[i]);\n\tpr_info(\"XgmiSocclkFreq\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiSocclkFreq[i]);\n\tpr_info(\"XgmiSocVoltage\\n\");\n\tfor (i = 0; i < NUM_XGMI_LEVELS; i++)\n\t\tpr_info(\"  .[%d] = %d\\n\", i, pptable->XgmiSocVoltage[i]);\n\n\tpr_info(\"DebugOverrides = 0x%x\\n\", pptable->DebugOverrides);\n\tpr_info(\"ReservedEquation0{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->ReservedEquation0.a,\n\t\t\tpptable->ReservedEquation0.b,\n\t\t\tpptable->ReservedEquation0.c);\n\tpr_info(\"ReservedEquation1{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->ReservedEquation1.a,\n\t\t\tpptable->ReservedEquation1.b,\n\t\t\tpptable->ReservedEquation1.c);\n\tpr_info(\"ReservedEquation2{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->ReservedEquation2.a,\n\t\t\tpptable->ReservedEquation2.b,\n\t\t\tpptable->ReservedEquation2.c);\n\tpr_info(\"ReservedEquation3{a = 0x%x b = 0x%x c = 0x%x}\\n\",\n\t\t\tpptable->ReservedEquation3.a,\n\t\t\tpptable->ReservedEquation3.b,\n\t\t\tpptable->ReservedEquation3.c);\n\n\tpr_info(\"MinVoltageUlvGfx = %d\\n\", pptable->MinVoltageUlvGfx);\n\tpr_info(\"MinVoltageUlvSoc = %d\\n\", pptable->MinVoltageUlvSoc);\n\n\tpr_info(\"MGpuFanBoostLimitRpm = %d\\n\", pptable->MGpuFanBoostLimitRpm);\n\tpr_info(\"padding16_Fan = %d\\n\", pptable->padding16_Fan);\n\n\tpr_info(\"FanGainVrMem0 = %d\\n\", pptable->FanGainVrMem0);\n\tpr_info(\"FanGainVrMem0 = %d\\n\", pptable->FanGainVrMem0);\n\n\tpr_info(\"DcBtcGb[AVFS_VOLTAGE_GFX] = 0x%x\\n\", pptable->DcBtcGb[AVFS_VOLTAGE_GFX]);\n\tpr_info(\"DcBtcGb[AVFS_VOLTAGE_SOC] = 0x%x\\n\", pptable->DcBtcGb[AVFS_VOLTAGE_SOC]);\n\n\tfor (i = 0; i < 11; i++)\n\t\tpr_info(\"Reserved[%d] = 0x%x\\n\", i, pptable->Reserved[i]);\n\n\tfor (i = 0; i < 3; i++)\n\t\tpr_info(\"Padding32[%d] = 0x%x\\n\", i, pptable->Padding32[i]);\n\n\tpr_info(\"MaxVoltageStepGfx = 0x%x\\n\", pptable->MaxVoltageStepGfx);\n\tpr_info(\"MaxVoltageStepSoc = 0x%x\\n\", pptable->MaxVoltageStepSoc);\n\n\tpr_info(\"VddGfxVrMapping = 0x%x\\n\", pptable->VddGfxVrMapping);\n\tpr_info(\"VddSocVrMapping = 0x%x\\n\", pptable->VddSocVrMapping);\n\tpr_info(\"VddMem0VrMapping = 0x%x\\n\", pptable->VddMem0VrMapping);\n\tpr_info(\"VddMem1VrMapping = 0x%x\\n\", pptable->VddMem1VrMapping);\n\n\tpr_info(\"GfxUlvPhaseSheddingMask = 0x%x\\n\", pptable->GfxUlvPhaseSheddingMask);\n\tpr_info(\"SocUlvPhaseSheddingMask = 0x%x\\n\", pptable->SocUlvPhaseSheddingMask);\n\tpr_info(\"ExternalSensorPresent = 0x%x\\n\", pptable->ExternalSensorPresent);\n\tpr_info(\"Padding8_V = 0x%x\\n\", pptable->Padding8_V);\n\n\tpr_info(\"GfxMaxCurrent = 0x%x\\n\", pptable->GfxMaxCurrent);\n\tpr_info(\"GfxOffset = 0x%x\\n\", pptable->GfxOffset);\n\tpr_info(\"Padding_TelemetryGfx = 0x%x\\n\", pptable->Padding_TelemetryGfx);\n\n\tpr_info(\"SocMaxCurrent = 0x%x\\n\", pptable->SocMaxCurrent);\n\tpr_info(\"SocOffset = 0x%x\\n\", pptable->SocOffset);\n\tpr_info(\"Padding_TelemetrySoc = 0x%x\\n\", pptable->Padding_TelemetrySoc);\n\n\tpr_info(\"Mem0MaxCurrent = 0x%x\\n\", pptable->Mem0MaxCurrent);\n\tpr_info(\"Mem0Offset = 0x%x\\n\", pptable->Mem0Offset);\n\tpr_info(\"Padding_TelemetryMem0 = 0x%x\\n\", pptable->Padding_TelemetryMem0);\n\n\tpr_info(\"Mem1MaxCurrent = 0x%x\\n\", pptable->Mem1MaxCurrent);\n\tpr_info(\"Mem1Offset = 0x%x\\n\", pptable->Mem1Offset);\n\tpr_info(\"Padding_TelemetryMem1 = 0x%x\\n\", pptable->Padding_TelemetryMem1);\n\n\tpr_info(\"AcDcGpio = %d\\n\", pptable->AcDcGpio);\n\tpr_info(\"AcDcPolarity = %d\\n\", pptable->AcDcPolarity);\n\tpr_info(\"VR0HotGpio = %d\\n\", pptable->VR0HotGpio);\n\tpr_info(\"VR0HotPolarity = %d\\n\", pptable->VR0HotPolarity);\n\n\tpr_info(\"VR1HotGpio = %d\\n\", pptable->VR1HotGpio);\n\tpr_info(\"VR1HotPolarity = %d\\n\", pptable->VR1HotPolarity);\n\tpr_info(\"Padding1 = 0x%x\\n\", pptable->Padding1);\n\tpr_info(\"Padding2 = 0x%x\\n\", pptable->Padding2);\n\n\tpr_info(\"LedPin0 = %d\\n\", pptable->LedPin0);\n\tpr_info(\"LedPin1 = %d\\n\", pptable->LedPin1);\n\tpr_info(\"LedPin2 = %d\\n\", pptable->LedPin2);\n\tpr_info(\"padding8_4 = 0x%x\\n\", pptable->padding8_4);\n\n\tpr_info(\"PllGfxclkSpreadEnabled = %d\\n\", pptable->PllGfxclkSpreadEnabled);\n\tpr_info(\"PllGfxclkSpreadPercent = %d\\n\", pptable->PllGfxclkSpreadPercent);\n\tpr_info(\"PllGfxclkSpreadFreq = %d\\n\", pptable->PllGfxclkSpreadFreq);\n\n\tpr_info(\"UclkSpreadEnabled = %d\\n\", pptable->UclkSpreadEnabled);\n\tpr_info(\"UclkSpreadPercent = %d\\n\", pptable->UclkSpreadPercent);\n\tpr_info(\"UclkSpreadFreq = %d\\n\", pptable->UclkSpreadFreq);\n\n\tpr_info(\"FclkSpreadEnabled = %d\\n\", pptable->FclkSpreadEnabled);\n\tpr_info(\"FclkSpreadPercent = %d\\n\", pptable->FclkSpreadPercent);\n\tpr_info(\"FclkSpreadFreq = %d\\n\", pptable->FclkSpreadFreq);\n\n\tpr_info(\"FllGfxclkSpreadEnabled = %d\\n\", pptable->FllGfxclkSpreadEnabled);\n\tpr_info(\"FllGfxclkSpreadPercent = %d\\n\", pptable->FllGfxclkSpreadPercent);\n\tpr_info(\"FllGfxclkSpreadFreq = %d\\n\", pptable->FllGfxclkSpreadFreq);\n\n\tfor (i = 0; i < I2C_CONTROLLER_NAME_COUNT; i++) {\n\t\tpr_info(\"I2cControllers[%d]:\\n\", i);\n\t\tpr_info(\"                   .Enabled = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].Enabled);\n\t\tpr_info(\"                   .SlaveAddress = 0x%x\\n\",\n\t\t\t\tpptable->I2cControllers[i].SlaveAddress);\n\t\tpr_info(\"                   .ControllerPort = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].ControllerPort);\n\t\tpr_info(\"                   .ControllerName = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].ControllerName);\n\t\tpr_info(\"                   .ThermalThrottler = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].ThermalThrottler);\n\t\tpr_info(\"                   .I2cProtocol = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].I2cProtocol);\n\t\tpr_info(\"                   .I2cSpeed = %d\\n\",\n\t\t\t\tpptable->I2cControllers[i].I2cSpeed);\n\t}\n\n\tfor (i = 0; i < 10; i++)\n\t\tpr_info(\"BoardReserved[%d] = 0x%x\\n\", i, pptable->BoardReserved[i]);\n\n\tfor (i = 0; i < 8; i++)\n\t\tpr_info(\"MmHubPadding[%d] = 0x%x\\n\", i, pptable->MmHubPadding[i]);\n}\n#endif\n\nstatic int check_powerplay_tables(\n\t\tstruct pp_hwmgr *hwmgr,\n\t\tconst ATOM_Vega20_POWERPLAYTABLE *powerplay_table)\n{\n\tPP_ASSERT_WITH_CODE((powerplay_table->sHeader.format_revision >=\n\t\tATOM_VEGA20_TABLE_REVISION_VEGA20),\n\t\t\"Unsupported PPTable format!\", return -1);\n\tPP_ASSERT_WITH_CODE(powerplay_table->sHeader.structuresize > 0,\n\t\t\"Invalid PowerPlay Table!\", return -1);\n\n\tif (powerplay_table->smcPPTable.Version != PPTABLE_V20_SMU_VERSION) {\n\t\tpr_info(\"Unmatch PPTable version: \"\n\t\t\t\"pptable from VBIOS is V%d while driver supported is V%d!\",\n\t\t\tpowerplay_table->smcPPTable.Version,\n\t\t\tPPTABLE_V20_SMU_VERSION);\n\t\treturn -EINVAL;\n\t}\n\n\t\n\n\treturn 0;\n}\n\nstatic int set_platform_caps(struct pp_hwmgr *hwmgr, uint32_t powerplay_caps)\n{\n\tset_hw_cap(\n\t\thwmgr,\n\t\t0 != (powerplay_caps & ATOM_VEGA20_PP_PLATFORM_CAP_POWERPLAY),\n\t\tPHM_PlatformCaps_PowerPlaySupport);\n\n\tset_hw_cap(\n\t\thwmgr,\n\t\t0 != (powerplay_caps & ATOM_VEGA20_PP_PLATFORM_CAP_SBIOSPOWERSOURCE),\n\t\tPHM_PlatformCaps_BiosPowerSourceControl);\n\n\tset_hw_cap(\n\t\thwmgr,\n\t\t0 != (powerplay_caps & ATOM_VEGA20_PP_PLATFORM_CAP_BACO),\n\t\tPHM_PlatformCaps_BACO);\n\n\tset_hw_cap(\n\t\thwmgr,\n\t\t0 != (powerplay_caps & ATOM_VEGA20_PP_PLATFORM_CAP_BAMACO),\n\t\t PHM_PlatformCaps_BAMACO);\n\n\treturn 0;\n}\n\nstatic int copy_overdrive_feature_capabilities_array(\n\t\tstruct pp_hwmgr *hwmgr,\n\t\tuint8_t **pptable_info_array,\n\t\tconst uint8_t *pptable_array,\n\t\tuint8_t od_feature_count)\n{\n\tuint32_t array_size, i;\n\tuint8_t *table;\n\tbool od_supported = false;\n\n\tarray_size = sizeof(uint8_t) * od_feature_count;\n\ttable = kzalloc(array_size, GFP_KERNEL);\n\tif (NULL == table)\n\t\treturn -ENOMEM;\n\n\tfor (i = 0; i < od_feature_count; i++) {\n\t\ttable[i] = le32_to_cpu(pptable_array[i]);\n\t\tif (table[i])\n\t\t\tod_supported = true;\n\t}\n\n\t*pptable_info_array = table;\n\n\tif (od_supported)\n\t\tphm_cap_set(hwmgr->platform_descriptor.platformCaps,\n\t\t\t\tPHM_PlatformCaps_ACOverdriveSupport);\n\n\treturn 0;\n}\n\nstatic int append_vbios_pptable(struct pp_hwmgr *hwmgr, PPTable_t *ppsmc_pptable)\n{\n\tstruct atom_smc_dpm_info_v4_4 *smc_dpm_table;\n\tint index = GetIndexIntoMasterDataTable(smc_dpm_info);\n\tint i;\n\n\tPP_ASSERT_WITH_CODE(\n\t\tsmc_dpm_table = smu_atom_get_data_table(hwmgr->adev, index, NULL, NULL, NULL),\n\t\t\"[appendVbiosPPTable] Failed to retrieve Smc Dpm Table from VBIOS!\",\n\t\treturn -1);\n\n\tppsmc_pptable->MaxVoltageStepGfx = smc_dpm_table->maxvoltagestepgfx;\n\tppsmc_pptable->MaxVoltageStepSoc = smc_dpm_table->maxvoltagestepsoc;\n\n\tppsmc_pptable->VddGfxVrMapping = smc_dpm_table->vddgfxvrmapping;\n\tppsmc_pptable->VddSocVrMapping = smc_dpm_table->vddsocvrmapping;\n\tppsmc_pptable->VddMem0VrMapping = smc_dpm_table->vddmem0vrmapping;\n\tppsmc_pptable->VddMem1VrMapping = smc_dpm_table->vddmem1vrmapping;\n\n\tppsmc_pptable->GfxUlvPhaseSheddingMask = smc_dpm_table->gfxulvphasesheddingmask;\n\tppsmc_pptable->SocUlvPhaseSheddingMask = smc_dpm_table->soculvphasesheddingmask;\n\tppsmc_pptable->ExternalSensorPresent = smc_dpm_table->externalsensorpresent;\n\n\tppsmc_pptable->GfxMaxCurrent = smc_dpm_table->gfxmaxcurrent;\n\tppsmc_pptable->GfxOffset = smc_dpm_table->gfxoffset;\n\tppsmc_pptable->Padding_TelemetryGfx = smc_dpm_table->padding_telemetrygfx;\n\n\tppsmc_pptable->SocMaxCurrent = smc_dpm_table->socmaxcurrent;\n\tppsmc_pptable->SocOffset = smc_dpm_table->socoffset;\n\tppsmc_pptable->Padding_TelemetrySoc = smc_dpm_table->padding_telemetrysoc;\n\n\tppsmc_pptable->Mem0MaxCurrent = smc_dpm_table->mem0maxcurrent;\n\tppsmc_pptable->Mem0Offset = smc_dpm_table->mem0offset;\n\tppsmc_pptable->Padding_TelemetryMem0 = smc_dpm_table->padding_telemetrymem0;\n\n\tppsmc_pptable->Mem1MaxCurrent = smc_dpm_table->mem1maxcurrent;\n\tppsmc_pptable->Mem1Offset = smc_dpm_table->mem1offset;\n\tppsmc_pptable->Padding_TelemetryMem1 = smc_dpm_table->padding_telemetrymem1;\n\n\tppsmc_pptable->AcDcGpio = smc_dpm_table->acdcgpio;\n\tppsmc_pptable->AcDcPolarity = smc_dpm_table->acdcpolarity;\n\tppsmc_pptable->VR0HotGpio = smc_dpm_table->vr0hotgpio;\n\tppsmc_pptable->VR0HotPolarity = smc_dpm_table->vr0hotpolarity;\n\n\tppsmc_pptable->VR1HotGpio = smc_dpm_table->vr1hotgpio;\n\tppsmc_pptable->VR1HotPolarity = smc_dpm_table->vr1hotpolarity;\n\tppsmc_pptable->Padding1 = smc_dpm_table->padding1;\n\tppsmc_pptable->Padding2 = smc_dpm_table->padding2;\n\n\tppsmc_pptable->LedPin0 = smc_dpm_table->ledpin0;\n\tppsmc_pptable->LedPin1 = smc_dpm_table->ledpin1;\n\tppsmc_pptable->LedPin2 = smc_dpm_table->ledpin2;\n\n\tppsmc_pptable->PllGfxclkSpreadEnabled = smc_dpm_table->pllgfxclkspreadenabled;\n\tppsmc_pptable->PllGfxclkSpreadPercent = smc_dpm_table->pllgfxclkspreadpercent;\n\tppsmc_pptable->PllGfxclkSpreadFreq = smc_dpm_table->pllgfxclkspreadfreq;\n\n\tppsmc_pptable->UclkSpreadEnabled = 0;\n\tppsmc_pptable->UclkSpreadPercent = smc_dpm_table->uclkspreadpercent;\n\tppsmc_pptable->UclkSpreadFreq = smc_dpm_table->uclkspreadfreq;\n\n\tppsmc_pptable->FclkSpreadEnabled = smc_dpm_table->fclkspreadenabled;\n\tppsmc_pptable->FclkSpreadPercent = smc_dpm_table->fclkspreadpercent;\n\tppsmc_pptable->FclkSpreadFreq = smc_dpm_table->fclkspreadfreq;\n\n\tppsmc_pptable->FllGfxclkSpreadEnabled = smc_dpm_table->fllgfxclkspreadenabled;\n\tppsmc_pptable->FllGfxclkSpreadPercent = smc_dpm_table->fllgfxclkspreadpercent;\n\tppsmc_pptable->FllGfxclkSpreadFreq = smc_dpm_table->fllgfxclkspreadfreq;\n\n\tfor (i = 0; i < I2C_CONTROLLER_NAME_COUNT; i++) {\n\t\tppsmc_pptable->I2cControllers[i].Enabled =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].enabled;\n\t\tppsmc_pptable->I2cControllers[i].SlaveAddress =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].slaveaddress;\n\t\tppsmc_pptable->I2cControllers[i].ControllerPort =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].controllerport;\n\t\tppsmc_pptable->I2cControllers[i].ThermalThrottler =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].thermalthrottler;\n\t\tppsmc_pptable->I2cControllers[i].I2cProtocol =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].i2cprotocol;\n\t\tppsmc_pptable->I2cControllers[i].I2cSpeed =\n\t\t\tsmc_dpm_table->i2ccontrollers[i].i2cspeed;\n\t}\n\n\treturn 0;\n}\n\nstatic int override_powerplay_table_fantargettemperature(struct pp_hwmgr *hwmgr)\n{\n\tstruct phm_ppt_v3_information *pptable_information =\n\t\t(struct phm_ppt_v3_information *)hwmgr->pptable;\n\tPPTable_t *ppsmc_pptable = (PPTable_t *)(pptable_information->smc_pptable);\n\n\tppsmc_pptable->FanTargetTemperature = VEGA20_FAN_TARGET_TEMPERATURE_OVERRIDE;\n\n\treturn 0;\n}\n\n#define VEGA20_ENGINECLOCK_HARDMAX 198000\nstatic int init_powerplay_table_information(\n\t\tstruct pp_hwmgr *hwmgr,\n\t\tconst ATOM_Vega20_POWERPLAYTABLE *powerplay_table)\n{\n\tstruct phm_ppt_v3_information *pptable_information =\n\t\t(struct phm_ppt_v3_information *)hwmgr->pptable;\n\tuint32_t disable_power_control = 0;\n\tuint32_t od_feature_count, od_setting_count, power_saving_clock_count;\n\tint result;\n\n\thwmgr->thermal_controller.ucType = powerplay_table->ucThermalControllerType;\n\tpptable_information->uc_thermal_controller_type = powerplay_table->ucThermalControllerType;\n\thwmgr->thermal_controller.fanInfo.ulMinRPM = 0;\n\thwmgr->thermal_controller.fanInfo.ulMaxRPM = powerplay_table->smcPPTable.FanMaximumRpm;\n\n\tset_hw_cap(hwmgr,\n\t\tATOM_VEGA20_PP_THERMALCONTROLLER_NONE != hwmgr->thermal_controller.ucType,\n\t\tPHM_PlatformCaps_ThermalController);\n\n\tphm_cap_set(hwmgr->platform_descriptor.platformCaps, PHM_PlatformCaps_MicrocodeFanControl);\n\n\tif (powerplay_table->OverDrive8Table.ucODTableRevision == 1) {\n\t\tod_feature_count =\n\t\t\t(le32_to_cpu(powerplay_table->OverDrive8Table.ODFeatureCount) >\n\t\t\t ATOM_VEGA20_ODFEATURE_COUNT) ?\n\t\t\tATOM_VEGA20_ODFEATURE_COUNT :\n\t\t\tle32_to_cpu(powerplay_table->OverDrive8Table.ODFeatureCount);\n\t\tod_setting_count =\n\t\t\t(le32_to_cpu(powerplay_table->OverDrive8Table.ODSettingCount) >\n\t\t\t ATOM_VEGA20_ODSETTING_COUNT) ?\n\t\t\tATOM_VEGA20_ODSETTING_COUNT :\n\t\t\tle32_to_cpu(powerplay_table->OverDrive8Table.ODSettingCount);\n\n\t\tcopy_overdrive_feature_capabilities_array(hwmgr,\n\t\t\t\t&pptable_information->od_feature_capabilities,\n\t\t\t\tpowerplay_table->OverDrive8Table.ODFeatureCapabilities,\n\t\t\t\tod_feature_count);\n\t\tphm_copy_overdrive_settings_limits_array(hwmgr,\n\t\t\t\t&pptable_information->od_settings_max,\n\t\t\t\tpowerplay_table->OverDrive8Table.ODSettingsMax,\n\t\t\t\tod_setting_count);\n\t\tphm_copy_overdrive_settings_limits_array(hwmgr,\n\t\t\t\t&pptable_information->od_settings_min,\n\t\t\t\tpowerplay_table->OverDrive8Table.ODSettingsMin,\n\t\t\t\tod_setting_count);\n\t}\n\n\tpptable_information->us_small_power_limit1 = le16_to_cpu(powerplay_table->usSmallPowerLimit1);\n\tpptable_information->us_small_power_limit2 = le16_to_cpu(powerplay_table->usSmallPowerLimit2);\n\tpptable_information->us_boost_power_limit = le16_to_cpu(powerplay_table->usBoostPowerLimit);\n\tpptable_information->us_od_turbo_power_limit = le16_to_cpu(powerplay_table->usODTurboPowerLimit);\n\tpptable_information->us_od_powersave_power_limit = le16_to_cpu(powerplay_table->usODPowerSavePowerLimit);\n\n\tpptable_information->us_software_shutdown_temp = le16_to_cpu(powerplay_table->usSoftwareShutdownTemp);\n\n\thwmgr->platform_descriptor.TDPODLimit = le32_to_cpu(powerplay_table->OverDrive8Table.ODSettingsMax[ATOM_VEGA20_ODSETTING_POWERPERCENTAGE]);\n\n\tdisable_power_control = 0;\n\tif (!disable_power_control && hwmgr->platform_descriptor.TDPODLimit)\n\t\t \n\t\tphm_cap_set(hwmgr->platform_descriptor.platformCaps, PHM_PlatformCaps_PowerControl);\n\n\tif (powerplay_table->PowerSavingClockTable.ucTableRevision == 1) {\n\t\tpower_saving_clock_count =\n\t\t\t(le32_to_cpu(powerplay_table->PowerSavingClockTable.PowerSavingClockCount) >=\n\t\t\t ATOM_VEGA20_PPCLOCK_COUNT) ?\n\t\t\tATOM_VEGA20_PPCLOCK_COUNT :\n\t\t\tle32_to_cpu(powerplay_table->PowerSavingClockTable.PowerSavingClockCount);\n\t\tphm_copy_clock_limits_array(hwmgr,\n\t\t\t\t&pptable_information->power_saving_clock_max,\n\t\t\t\tpowerplay_table->PowerSavingClockTable.PowerSavingClockMax,\n\t\t\t\tpower_saving_clock_count);\n\t\tphm_copy_clock_limits_array(hwmgr,\n\t\t\t\t&pptable_information->power_saving_clock_min,\n\t\t\t\tpowerplay_table->PowerSavingClockTable.PowerSavingClockMin,\n\t\t\t\tpower_saving_clock_count);\n\t}\n\n\tpptable_information->smc_pptable = kmemdup(&(powerplay_table->smcPPTable),\n\t\t\t\t\t\t   sizeof(PPTable_t),\n\t\t\t\t\t\t   GFP_KERNEL);\n\tif (pptable_information->smc_pptable == NULL)\n\t\treturn -ENOMEM;\n\n\n\tresult = append_vbios_pptable(hwmgr, (pptable_information->smc_pptable));\n\tif (result)\n\t\treturn result;\n\n\tresult = override_powerplay_table_fantargettemperature(hwmgr);\n\n\treturn result;\n}\n\nstatic int vega20_pp_tables_initialize(struct pp_hwmgr *hwmgr)\n{\n\tint result = 0;\n\tconst ATOM_Vega20_POWERPLAYTABLE *powerplay_table;\n\n\thwmgr->pptable = kzalloc(sizeof(struct phm_ppt_v3_information), GFP_KERNEL);\n\tPP_ASSERT_WITH_CODE((hwmgr->pptable != NULL),\n\t\t\"Failed to allocate hwmgr->pptable!\", return -ENOMEM);\n\n\tpowerplay_table = get_powerplay_table(hwmgr);\n\tPP_ASSERT_WITH_CODE((powerplay_table != NULL),\n\t\t\"Missing PowerPlay Table!\", return -1);\n\n\tresult = check_powerplay_tables(hwmgr, powerplay_table);\n\tPP_ASSERT_WITH_CODE((result == 0),\n\t\t\"check_powerplay_tables failed\", return result);\n\n\tresult = set_platform_caps(hwmgr,\n\t\t\tle32_to_cpu(powerplay_table->ulPlatformCaps));\n\tPP_ASSERT_WITH_CODE((result == 0),\n\t\t\"set_platform_caps failed\", return result);\n\n\tresult = init_powerplay_table_information(hwmgr, powerplay_table);\n\tPP_ASSERT_WITH_CODE((result == 0),\n\t\t\"init_powerplay_table_information failed\", return result);\n\n\treturn result;\n}\n\nstatic int vega20_pp_tables_uninitialize(struct pp_hwmgr *hwmgr)\n{\n\tstruct phm_ppt_v3_information *pp_table_info =\n\t\t\t(struct phm_ppt_v3_information *)(hwmgr->pptable);\n\n\tkfree(pp_table_info->power_saving_clock_max);\n\tpp_table_info->power_saving_clock_max = NULL;\n\n\tkfree(pp_table_info->power_saving_clock_min);\n\tpp_table_info->power_saving_clock_min = NULL;\n\n\tkfree(pp_table_info->od_feature_capabilities);\n\tpp_table_info->od_feature_capabilities = NULL;\n\n\tkfree(pp_table_info->od_settings_max);\n\tpp_table_info->od_settings_max = NULL;\n\n\tkfree(pp_table_info->od_settings_min);\n\tpp_table_info->od_settings_min = NULL;\n\n\tkfree(pp_table_info->smc_pptable);\n\tpp_table_info->smc_pptable = NULL;\n\n\tkfree(hwmgr->pptable);\n\thwmgr->pptable = NULL;\n\n\treturn 0;\n}\n\nconst struct pp_table_func vega20_pptable_funcs = {\n\t.pptable_init = vega20_pp_tables_initialize,\n\t.pptable_fini = vega20_pp_tables_uninitialize,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}