{
  "module_name": "smu71_discrete.h",
  "hash_id": "ea6a0620fec0e7ef2f51adca0544ca3934727a87142d5ecab8540c415ab31736",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/powerplay/inc/smu71_discrete.h",
  "human_readable_source": " \n#ifndef SMU71_DISCRETE_H\n#define SMU71_DISCRETE_H\n\n#include \"smu71.h\"\n\n#if !defined(SMC_MICROCODE)\n#pragma pack(push, 1)\n#endif\n\n#define VDDC_ON_SVI2  0x1\n#define VDDCI_ON_SVI2 0x2\n#define MVDD_ON_SVI2  0x4\n\nstruct SMU71_Discrete_VoltageLevel\n{\n    uint16_t    Voltage;\n    uint16_t    StdVoltageHiSidd;\n    uint16_t    StdVoltageLoSidd;\n    uint8_t     Smio;\n    uint8_t     padding;\n};\n\ntypedef struct SMU71_Discrete_VoltageLevel SMU71_Discrete_VoltageLevel;\n\nstruct SMU71_Discrete_GraphicsLevel\n{\n    uint32_t    MinVddc;\n    uint32_t    MinVddcPhases;\n\n    uint32_t    SclkFrequency;\n\n    uint8_t     pcieDpmLevel;\n    uint8_t     DeepSleepDivId;\n    uint16_t    ActivityLevel;\n\n    uint32_t    CgSpllFuncCntl3;\n    uint32_t    CgSpllFuncCntl4;\n    uint32_t    SpllSpreadSpectrum;\n    uint32_t    SpllSpreadSpectrum2;\n    uint32_t    CcPwrDynRm;\n    uint32_t    CcPwrDynRm1;\n    uint8_t     SclkDid;\n    uint8_t     DisplayWatermark;\n    uint8_t     EnabledForActivity;\n    uint8_t     EnabledForThrottle;\n    uint8_t     UpHyst;\n    uint8_t     DownHyst;\n    uint8_t     VoltageDownHyst;\n    uint8_t     PowerThrottle;\n};\n\ntypedef struct SMU71_Discrete_GraphicsLevel SMU71_Discrete_GraphicsLevel;\n\nstruct SMU71_Discrete_ACPILevel\n{\n    uint32_t    Flags;\n    uint32_t    MinVddc;\n    uint32_t    MinVddcPhases;\n    uint32_t    SclkFrequency;\n    uint8_t     SclkDid;\n    uint8_t     DisplayWatermark;\n    uint8_t     DeepSleepDivId;\n    uint8_t     padding;\n    uint32_t    CgSpllFuncCntl;\n    uint32_t    CgSpllFuncCntl2;\n    uint32_t    CgSpllFuncCntl3;\n    uint32_t    CgSpllFuncCntl4;\n    uint32_t    SpllSpreadSpectrum;\n    uint32_t    SpllSpreadSpectrum2;\n    uint32_t    CcPwrDynRm;\n    uint32_t    CcPwrDynRm1;\n};\n\ntypedef struct SMU71_Discrete_ACPILevel SMU71_Discrete_ACPILevel;\n\nstruct SMU71_Discrete_Ulv\n{\n    uint32_t    CcPwrDynRm;\n    uint32_t    CcPwrDynRm1;\n    uint16_t    VddcOffset;\n    uint8_t     VddcOffsetVid;\n    uint8_t     VddcPhase;\n    uint32_t    Reserved;\n};\n\ntypedef struct SMU71_Discrete_Ulv SMU71_Discrete_Ulv;\n\nstruct SMU71_Discrete_MemoryLevel\n{\n    uint32_t    MinVddc;\n    uint32_t    MinVddcPhases;\n    uint32_t    MinVddci;\n    uint32_t    MinMvdd;\n\n    uint32_t    MclkFrequency;\n\n    uint8_t     EdcReadEnable;\n    uint8_t     EdcWriteEnable;\n    uint8_t     RttEnable;\n    uint8_t     StutterEnable;\n\n    uint8_t     StrobeEnable;\n    uint8_t     StrobeRatio;\n    uint8_t     EnabledForThrottle;\n    uint8_t     EnabledForActivity;\n\n    uint8_t     UpHyst;\n    uint8_t     DownHyst;\n    uint8_t     VoltageDownHyst;\n    uint8_t     padding;\n\n    uint16_t    ActivityLevel;\n    uint8_t     DisplayWatermark;\n    uint8_t     padding1;\n\n    uint32_t    MpllFuncCntl;\n    uint32_t    MpllFuncCntl_1;\n    uint32_t    MpllFuncCntl_2;\n    uint32_t    MpllAdFuncCntl;\n    uint32_t    MpllDqFuncCntl;\n    uint32_t    MclkPwrmgtCntl;\n    uint32_t    DllCntl;\n    uint32_t    MpllSs1;\n    uint32_t    MpllSs2;\n};\n\ntypedef struct SMU71_Discrete_MemoryLevel SMU71_Discrete_MemoryLevel;\n\nstruct SMU71_Discrete_LinkLevel\n{\n    uint8_t     PcieGenSpeed;           \n    uint8_t     PcieLaneCount;          \n    uint8_t     EnabledForActivity;\n    uint8_t     SPC;\n    uint32_t    DownThreshold;\n    uint32_t    UpThreshold;\n    uint32_t    Reserved;\n};\n\ntypedef struct SMU71_Discrete_LinkLevel SMU71_Discrete_LinkLevel;\n\n\n#ifdef SMU__DYNAMIC_MCARB_SETTINGS\n\nstruct SMU71_Discrete_MCArbDramTimingTableEntry\n{\n    uint32_t McArbDramTiming;\n    uint32_t McArbDramTiming2;\n    uint8_t  McArbBurstTime;\n    uint8_t  padding[3];\n};\n\ntypedef struct SMU71_Discrete_MCArbDramTimingTableEntry SMU71_Discrete_MCArbDramTimingTableEntry;\n\nstruct SMU71_Discrete_MCArbDramTimingTable\n{\n    SMU71_Discrete_MCArbDramTimingTableEntry entries[SMU__NUM_SCLK_DPM_STATE][SMU__NUM_MCLK_DPM_LEVELS];\n};\n\ntypedef struct SMU71_Discrete_MCArbDramTimingTable SMU71_Discrete_MCArbDramTimingTable;\n#endif\n\n\nstruct SMU71_Discrete_UvdLevel\n{\n    uint32_t VclkFrequency;\n    uint32_t DclkFrequency;\n    uint16_t MinVddc;\n    uint8_t  MinVddcPhases;\n    uint8_t  VclkDivider;\n    uint8_t  DclkDivider;\n    uint8_t  padding[3];\n};\n\ntypedef struct SMU71_Discrete_UvdLevel SMU71_Discrete_UvdLevel;\n\n\nstruct SMU71_Discrete_ExtClkLevel\n{\n    uint32_t Frequency;\n    uint16_t MinVoltage;\n    uint8_t  MinPhases;\n    uint8_t  Divider;\n};\n\ntypedef struct SMU71_Discrete_ExtClkLevel SMU71_Discrete_ExtClkLevel;\n\n\n\n\n\nstruct SMU71_Discrete_StateInfo\n{\n    uint32_t SclkFrequency;\n    uint32_t MclkFrequency;\n    uint32_t VclkFrequency;\n    uint32_t DclkFrequency;\n    uint32_t SamclkFrequency;\n    uint32_t AclkFrequency;\n    uint32_t EclkFrequency;\n    uint16_t MvddVoltage;\n    uint16_t padding16;\n    uint8_t  DisplayWatermark;\n    uint8_t  McArbIndex;\n    uint8_t  McRegIndex;\n    uint8_t  SeqIndex;\n    uint8_t  SclkDid;\n    int8_t   SclkIndex;\n    int8_t   MclkIndex;\n    uint8_t  PCIeGen;\n\n};\n\ntypedef struct SMU71_Discrete_StateInfo SMU71_Discrete_StateInfo;\n\n\nstruct SMU71_Discrete_DpmTable\n{\n    \n    SMU71_PIDController                  GraphicsPIDController;\n    SMU71_PIDController                  MemoryPIDController;\n    SMU71_PIDController                  LinkPIDController;\n\n    uint32_t                            SystemFlags;\n\n    \n    uint32_t                            SmioMaskVddcVid;\n    uint32_t                            SmioMaskVddcPhase;\n    uint32_t                            SmioMaskVddciVid;\n    uint32_t                            SmioMaskMvddVid;\n\n    uint32_t                            VddcLevelCount;\n    uint32_t                            VddciLevelCount;\n    uint32_t                            MvddLevelCount;\n\n    SMU71_Discrete_VoltageLevel          VddcLevel               [SMU71_MAX_LEVELS_VDDC];\n    SMU71_Discrete_VoltageLevel          VddciLevel              [SMU71_MAX_LEVELS_VDDCI];\n    SMU71_Discrete_VoltageLevel          MvddLevel               [SMU71_MAX_LEVELS_MVDD];\n\n    uint8_t                             GraphicsDpmLevelCount;\n    uint8_t                             MemoryDpmLevelCount;\n    uint8_t                             LinkLevelCount;\n    uint8_t                             MasterDeepSleepControl;\n\n    uint32_t                            Reserved[5];\n\n    \n    SMU71_Discrete_GraphicsLevel         GraphicsLevel           [SMU71_MAX_LEVELS_GRAPHICS];\n    SMU71_Discrete_MemoryLevel           MemoryACPILevel;\n    SMU71_Discrete_MemoryLevel           MemoryLevel             [SMU71_MAX_LEVELS_MEMORY];\n    SMU71_Discrete_LinkLevel             LinkLevel               [SMU71_MAX_LEVELS_LINK];\n    SMU71_Discrete_ACPILevel             ACPILevel;\n\n    uint32_t                            SclkStepSize;\n    uint32_t                            Smio                    [SMU71_MAX_ENTRIES_SMIO];\n\n    uint8_t                             GraphicsBootLevel;\n    uint8_t                             GraphicsVoltageChangeEnable;\n    uint8_t                             GraphicsThermThrottleEnable;\n    uint8_t                             GraphicsInterval;\n\n    uint8_t                             VoltageInterval;\n    uint8_t                             ThermalInterval;\n    uint16_t                            TemperatureLimitHigh;\n\n    uint16_t                            TemperatureLimitLow;\n    uint8_t                             MemoryBootLevel;\n    uint8_t                             MemoryVoltageChangeEnable;\n\n    uint8_t                             MemoryInterval;\n    uint8_t                             MemoryThermThrottleEnable;\n    uint8_t                             MergedVddci;\n    uint8_t                             padding2;\n\n    uint16_t                            VoltageResponseTime;\n    uint16_t                            PhaseResponseTime;\n\n    uint8_t                             PCIeBootLinkLevel;\n    uint8_t                             PCIeGenInterval;\n    uint8_t                             DTEInterval;\n    uint8_t                             DTEMode;\n\n    uint8_t                             SVI2Enable;\n    uint8_t                             VRHotGpio;\n    uint8_t                             AcDcGpio;\n    uint8_t                             ThermGpio;\n\n    uint32_t                            DisplayCac;\n\n    uint16_t                            MaxPwr;\n    uint16_t                            NomPwr;\n\n    uint16_t                            FpsHighThreshold;\n    uint16_t                            FpsLowThreshold;\n\n    uint16_t                            BAPMTI_R  [SMU71_DTE_ITERATIONS][SMU71_DTE_SOURCES][SMU71_DTE_SINKS];\n    uint16_t                            BAPMTI_RC [SMU71_DTE_ITERATIONS][SMU71_DTE_SOURCES][SMU71_DTE_SINKS];\n\n    uint8_t                             DTEAmbientTempBase;\n    uint8_t                             DTETjOffset;\n    uint8_t                             GpuTjMax;\n    uint8_t                             GpuTjHyst;\n\n    uint16_t                            BootVddc;\n    uint16_t                            BootVddci;\n\n    uint16_t                            BootMVdd;\n    uint16_t                            padding;\n\n    uint32_t                            BAPM_TEMP_GRADIENT;\n\n    uint32_t                            LowSclkInterruptThreshold;\n    uint32_t                            VddGfxReChkWait;\n\n    uint16_t                            PPM_PkgPwrLimit;\n    uint16_t                            PPM_TemperatureLimit;\n\n    uint16_t                            DefaultTdp;\n    uint16_t                            TargetTdp;\n};\n\ntypedef struct SMU71_Discrete_DpmTable SMU71_Discrete_DpmTable;\n\n\n#define SMU71_DISCRETE_MC_REGISTER_ARRAY_SIZE 16\n#define SMU71_DISCRETE_MC_REGISTER_ARRAY_SET_COUNT SMU71_MAX_LEVELS_MEMORY\n\nstruct SMU71_Discrete_MCRegisterAddress\n{\n    uint16_t s0;\n    uint16_t s1;\n};\n\ntypedef struct SMU71_Discrete_MCRegisterAddress SMU71_Discrete_MCRegisterAddress;\n\nstruct SMU71_Discrete_MCRegisterSet\n{\n    uint32_t value[SMU71_DISCRETE_MC_REGISTER_ARRAY_SIZE];\n};\n\ntypedef struct SMU71_Discrete_MCRegisterSet SMU71_Discrete_MCRegisterSet;\n\nstruct SMU71_Discrete_MCRegisters\n{\n    uint8_t                             last;\n    uint8_t                             reserved[3];\n    SMU71_Discrete_MCRegisterAddress     address[SMU71_DISCRETE_MC_REGISTER_ARRAY_SIZE];\n    SMU71_Discrete_MCRegisterSet         data[SMU71_DISCRETE_MC_REGISTER_ARRAY_SET_COUNT];\n};\n\ntypedef struct SMU71_Discrete_MCRegisters SMU71_Discrete_MCRegisters;\n\n\n\nstruct SMU71_Discrete_FanTable\n{\n    uint16_t FdoMode;\n    int16_t  TempMin;\n    int16_t  TempMed;\n    int16_t  TempMax;\n    int16_t  Slope1;\n    int16_t  Slope2;\n    int16_t  FdoMin;\n    int16_t  HystUp;\n    int16_t  HystDown;\n    int16_t  HystSlope;\n    int16_t  TempRespLim;\n    int16_t  TempCurr;\n    int16_t  SlopeCurr;\n    int16_t  PwmCurr;\n    uint32_t RefreshPeriod;\n    int16_t  FdoMax;\n    uint8_t  TempSrc;\n    int8_t   Padding;\n};\n\ntypedef struct SMU71_Discrete_FanTable SMU71_Discrete_FanTable;\n\n#define SMU7_DISCRETE_GPIO_SCLK_DEBUG             4\n#define SMU7_DISCRETE_GPIO_SCLK_DEBUG_BIT         (0x1 << SMU7_DISCRETE_GPIO_SCLK_DEBUG)\n\nstruct SMU71_MclkDpmScoreboard\n{\n\n    uint32_t PercentageBusy;\n\n    int32_t  PIDError;\n    int32_t  PIDIntegral;\n    int32_t  PIDOutput;\n\n    uint32_t SigmaDeltaAccum;\n    uint32_t SigmaDeltaOutput;\n    uint32_t SigmaDeltaLevel;\n\n    uint32_t UtilizationSetpoint;\n\n    uint8_t  TdpClampMode;\n    uint8_t  TdcClampMode;\n    uint8_t  ThermClampMode;\n    uint8_t  VoltageBusy;\n\n    int8_t   CurrLevel;\n    int8_t   TargLevel;\n    uint8_t  LevelChangeInProgress;\n    uint8_t  UpHyst;\n\n    uint8_t  DownHyst;\n    uint8_t  VoltageDownHyst;\n    uint8_t  DpmEnable;\n    uint8_t  DpmRunning;\n\n    uint8_t  DpmForce;\n    uint8_t  DpmForceLevel;\n    uint8_t  DisplayWatermark;\n    uint8_t  McArbIndex;\n\n    uint32_t MinimumPerfMclk;\n\n    uint8_t  AcpiReq;\n    uint8_t  AcpiAck;\n    uint8_t  MclkSwitchInProgress;\n    uint8_t  MclkSwitchCritical;\n\n    uint8_t  TargetMclkIndex;\n    uint8_t  TargetMvddIndex;\n    uint8_t  MclkSwitchResult;\n\n    uint8_t  EnabledLevelsChange;\n\n    uint16_t LevelResidencyCounters [SMU71_MAX_LEVELS_MEMORY];\n    uint16_t LevelSwitchCounters [SMU71_MAX_LEVELS_MEMORY];\n\n    void     (*TargetStateCalculator)(uint8_t);\n    void     (*SavedTargetStateCalculator)(uint8_t);\n\n    uint16_t AutoDpmInterval;\n    uint16_t AutoDpmRange;\n\n    uint16_t  MclkSwitchingTime;\n    uint8_t padding[2];\n};\n\ntypedef struct SMU71_MclkDpmScoreboard SMU71_MclkDpmScoreboard;\n\nstruct SMU71_UlvScoreboard\n{\n    uint8_t     EnterUlv;\n    uint8_t     ExitUlv;\n    uint8_t     UlvActive;\n    uint8_t     WaitingForUlv;\n    uint8_t     UlvEnable;\n    uint8_t     UlvRunning;\n    uint8_t     UlvMasterEnable;\n    uint8_t     padding;\n    uint32_t    UlvAbortedCount;\n    uint32_t    UlvTimeStamp;\n};\n\ntypedef struct SMU71_UlvScoreboard SMU71_UlvScoreboard;\n\nstruct SMU71_VddGfxScoreboard\n{\n    uint8_t     VddGfxEnable;\n    uint8_t     VddGfxActive;\n    uint8_t     padding[2];\n\n    uint32_t    VddGfxEnteredCount;\n    uint32_t    VddGfxAbortedCount;\n};\n\ntypedef struct SMU71_VddGfxScoreboard SMU71_VddGfxScoreboard;\n\nstruct SMU71_AcpiScoreboard {\n  uint32_t SavedInterruptMask[2];\n  uint8_t LastACPIRequest;\n  uint8_t CgBifResp;\n  uint8_t RequestType;\n  uint8_t Padding;\n  SMU71_Discrete_ACPILevel D0Level;\n};\n\ntypedef struct SMU71_AcpiScoreboard SMU71_AcpiScoreboard;\n\n\nstruct SMU71_Discrete_PmFuses {\n  \n  uint8_t BapmVddCVidHiSidd[8];\n\n  \n  uint8_t BapmVddCVidLoSidd[8];\n\n  \n  uint8_t VddCVid[8];\n\n  \n  uint8_t SviLoadLineEn;\n  uint8_t SviLoadLineVddC;\n  uint8_t SviLoadLineTrimVddC;\n  uint8_t SviLoadLineOffsetVddC;\n\n  \n  uint16_t TDC_VDDC_PkgLimit;\n  uint8_t TDC_VDDC_ThrottleReleaseLimitPerc;\n  uint8_t TDC_MAWt;\n\n  \n  uint8_t TdcWaterfallCtl;\n  uint8_t LPMLTemperatureMin;\n  uint8_t LPMLTemperatureMax;\n  uint8_t Reserved;\n\n  \n  uint8_t LPMLTemperatureScaler[16];\n\n  \n  int16_t FuzzyFan_ErrorSetDelta;\n  int16_t FuzzyFan_ErrorRateSetDelta;\n  int16_t FuzzyFan_PwmSetDelta;\n  uint16_t Reserved6;\n\n  \n  uint8_t GnbLPML[16];\n\n  \n  uint8_t GnbLPMLMaxVid;\n  uint8_t GnbLPMLMinVid;\n  uint8_t Reserved1[2];\n\n  \n  uint16_t BapmVddCBaseLeakageHiSidd;\n  uint16_t BapmVddCBaseLeakageLoSidd;\n};\n\ntypedef struct SMU71_Discrete_PmFuses SMU71_Discrete_PmFuses;\n\nstruct SMU71_Discrete_Log_Header_Table {\n  uint32_t    version;\n  uint32_t    asic_id;\n  uint16_t    flags;\n  uint16_t    entry_size;\n  uint32_t    total_size;\n  uint32_t    num_of_entries;\n  uint8_t     type;\n  uint8_t     mode;\n  uint8_t     filler_0[2];\n  uint32_t    filler_1[2];\n};\n\ntypedef struct SMU71_Discrete_Log_Header_Table SMU71_Discrete_Log_Header_Table;\n\nstruct SMU71_Discrete_Log_Cntl {\n    uint8_t             Enabled;\n    uint8_t             Type;\n    uint8_t             padding[2];\n    uint32_t            BufferSize;\n    uint32_t            SamplesLogged;\n    uint32_t            SampleSize;\n    uint32_t            AddrL;\n    uint32_t            AddrH;\n};\n\ntypedef struct SMU71_Discrete_Log_Cntl SMU71_Discrete_Log_Cntl;\n\n#if defined SMU__DGPU_ONLY\n  #define CAC_ACC_NW_NUM_OF_SIGNALS 83\n#endif\n\n\nstruct SMU71_Discrete_Cac_Collection_Table {\n  uint32_t temperature;\n  uint32_t cac_acc_nw[CAC_ACC_NW_NUM_OF_SIGNALS];\n  uint32_t filler[4];\n};\n\ntypedef struct SMU71_Discrete_Cac_Collection_Table SMU71_Discrete_Cac_Collection_Table;\n\nstruct SMU71_Discrete_Cac_Verification_Table {\n  uint32_t VddcTotalPower;\n  uint32_t VddcLeakagePower;\n  uint32_t VddcConstantPower;\n  uint32_t VddcGfxDynamicPower;\n  uint32_t VddcUvdDynamicPower;\n  uint32_t VddcVceDynamicPower;\n  uint32_t VddcAcpDynamicPower;\n  uint32_t VddcPcieDynamicPower;\n  uint32_t VddcDceDynamicPower;\n  uint32_t VddcCurrent;\n  uint32_t VddcVoltage;\n  uint32_t VddciTotalPower;\n  uint32_t VddciLeakagePower;\n  uint32_t VddciConstantPower;\n  uint32_t VddciDynamicPower;\n  uint32_t Vddr1TotalPower;\n  uint32_t Vddr1LeakagePower;\n  uint32_t Vddr1ConstantPower;\n  uint32_t Vddr1DynamicPower;\n  uint32_t spare[8];\n  uint32_t temperature;\n};\n\ntypedef struct SMU71_Discrete_Cac_Verification_Table SMU71_Discrete_Cac_Verification_Table;\n\n#if !defined(SMC_MICROCODE)\n#pragma pack(pop)\n#endif\n\n\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}