{
  "module_name": "kv_dpm.h",
  "hash_id": "b0f3682cb6b64c06e2ba1c20ba51cd70dec1e8d788c0a87fe67352732b542027",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/amd/pm/legacy-dpm/kv_dpm.h",
  "human_readable_source": " \n#ifndef __KV_DPM_H__\n#define __KV_DPM_H__\n\n#define SMU__NUM_SCLK_DPM_STATE  8\n#define SMU__NUM_MCLK_DPM_LEVELS 4\n#define SMU__NUM_LCLK_DPM_LEVELS 8\n#define SMU__NUM_PCIE_DPM_LEVELS 0  \n#include \"smu7_fusion.h\"\n#include \"ppsmc.h\"\n\n#define SUMO_MAX_HARDWARE_POWERLEVELS 5\n\n#define SUMO_MAX_NUMBER_VOLTAGES    4\n\nstruct sumo_vid_mapping_entry {\n\tu16 vid_2bit;\n\tu16 vid_7bit;\n};\n\nstruct sumo_vid_mapping_table {\n\tu32 num_entries;\n\tstruct sumo_vid_mapping_entry entries[SUMO_MAX_NUMBER_VOLTAGES];\n};\n\nstruct sumo_sclk_voltage_mapping_entry {\n\tu32 sclk_frequency;\n\tu16 vid_2bit;\n\tu16 rsv;\n};\n\nstruct sumo_sclk_voltage_mapping_table {\n\tu32 num_max_dpm_entries;\n\tstruct sumo_sclk_voltage_mapping_entry entries[SUMO_MAX_HARDWARE_POWERLEVELS];\n};\n\n#define TRINITY_AT_DFLT            30\n\n#define KV_NUM_NBPSTATES   4\n\nenum kv_pt_config_reg_type {\n\tKV_CONFIGREG_MMR = 0,\n\tKV_CONFIGREG_SMC_IND,\n\tKV_CONFIGREG_DIDT_IND,\n\tKV_CONFIGREG_CACHE,\n\tKV_CONFIGREG_MAX\n};\n\nstruct kv_pt_config_reg {\n\tu32 offset;\n\tu32 mask;\n\tu32 shift;\n\tu32 value;\n\tenum kv_pt_config_reg_type type;\n};\n\nstruct kv_lcac_config_values {\n\tu32 block_id;\n\tu32 signal_id;\n\tu32 t;\n};\n\nstruct kv_lcac_config_reg {\n\tu32 cntl;\n\tu32 block_mask;\n\tu32 block_shift;\n\tu32 signal_mask;\n\tu32 signal_shift;\n\tu32 t_mask;\n\tu32 t_shift;\n\tu32 enable_mask;\n\tu32 enable_shift;\n};\n\nstruct kv_pl {\n\tu32 sclk;\n\tu8 vddc_index;\n\tu8 ds_divider_index;\n\tu8 ss_divider_index;\n\tu8 allow_gnb_slow;\n\tu8 force_nbp_state;\n\tu8 display_wm;\n\tu8 vce_wm;\n};\n\nstruct kv_ps {\n\tstruct kv_pl levels[SUMO_MAX_HARDWARE_POWERLEVELS];\n\tu32 num_levels;\n\tbool need_dfs_bypass;\n\tu8 dpm0_pg_nb_ps_lo;\n\tu8 dpm0_pg_nb_ps_hi;\n\tu8 dpmx_nb_ps_lo;\n\tu8 dpmx_nb_ps_hi;\n};\n\nstruct kv_sys_info {\n\tu32 bootup_uma_clk;\n\tu32 bootup_sclk;\n\tu32 dentist_vco_freq;\n\tu32 nb_dpm_enable;\n\tu32 nbp_memory_clock[KV_NUM_NBPSTATES];\n\tu32 nbp_n_clock[KV_NUM_NBPSTATES];\n\tu16 bootup_nb_voltage_index;\n\tu8 htc_tmp_lmt;\n\tu8 htc_hyst_lmt;\n\tstruct sumo_sclk_voltage_mapping_table sclk_voltage_mapping_table;\n\tstruct sumo_vid_mapping_table vid_mapping_table;\n\tu32 uma_channel_number;\n};\n\nstruct kv_power_info {\n\tu32 at[SUMO_MAX_HARDWARE_POWERLEVELS];\n\tu32 voltage_drop_t;\n\tstruct kv_sys_info sys_info;\n\tstruct kv_pl boot_pl;\n\tbool enable_nb_ps_policy;\n\tbool disable_nb_ps3_in_battery;\n\tbool video_start;\n\tbool battery_state;\n\tu32 lowest_valid;\n\tu32 highest_valid;\n\tu16 high_voltage_t;\n\tbool cac_enabled;\n\tbool bapm_enable;\n\t \n\tu32 sram_end;\n\tu32 dpm_table_start;\n\tu32 soft_regs_start;\n\t \n\tu8 graphics_dpm_level_count;\n\tu8 uvd_level_count;\n\tu8 vce_level_count;\n\tu8 acp_level_count;\n\tu8 samu_level_count;\n\tu16 fps_high_t;\n\tSMU7_Fusion_GraphicsLevel graphics_level[SMU__NUM_SCLK_DPM_STATE];\n\tSMU7_Fusion_ACPILevel acpi_level;\n\tSMU7_Fusion_UvdLevel uvd_level[SMU7_MAX_LEVELS_UVD];\n\tSMU7_Fusion_ExtClkLevel vce_level[SMU7_MAX_LEVELS_VCE];\n\tSMU7_Fusion_ExtClkLevel acp_level[SMU7_MAX_LEVELS_ACP];\n\tSMU7_Fusion_ExtClkLevel samu_level[SMU7_MAX_LEVELS_SAMU];\n\tu8 uvd_boot_level;\n\tu8 vce_boot_level;\n\tu8 acp_boot_level;\n\tu8 samu_boot_level;\n\tu8 uvd_interval;\n\tu8 vce_interval;\n\tu8 acp_interval;\n\tu8 samu_interval;\n\tu8 graphics_boot_level;\n\tu8 graphics_interval;\n\tu8 graphics_therm_throttle_enable;\n\tu8 graphics_voltage_change_enable;\n\tu8 graphics_clk_slow_enable;\n\tu8 graphics_clk_slow_divider;\n\tu8 fps_low_t;\n\tu32 low_sclk_interrupt_t;\n\tbool uvd_power_gated;\n\tbool vce_power_gated;\n\tbool acp_power_gated;\n\tbool samu_power_gated;\n\tbool nb_dpm_enabled;\n\t \n\tbool enable_didt;\n\tbool enable_dpm;\n\tbool enable_auto_thermal_throttling;\n\tbool enable_nb_dpm;\n\t \n\tbool caps_cac;\n\tbool caps_power_containment;\n\tbool caps_sq_ramping;\n\tbool caps_db_ramping;\n\tbool caps_td_ramping;\n\tbool caps_tcp_ramping;\n\tbool caps_sclk_throttle_low_notification;\n\tbool caps_fps;\n\tbool caps_uvd_dpm;\n\tbool caps_uvd_pg;\n\tbool caps_vce_pg;\n\tbool caps_samu_pg;\n\tbool caps_acp_pg;\n\tbool caps_stable_p_state;\n\tbool caps_enable_dfs_bypass;\n\tbool caps_sclk_ds;\n\tstruct amdgpu_ps current_rps;\n\tstruct kv_ps current_ps;\n\tstruct amdgpu_ps requested_rps;\n\tstruct kv_ps requested_ps;\n};\n\n \n#define KV_TEMP_RANGE_MIN (90 * 1000)\n#define KV_TEMP_RANGE_MAX (120 * 1000)\n\n \nint amdgpu_kv_notify_message_to_smu(struct amdgpu_device *adev, u32 id);\nint amdgpu_kv_dpm_get_enable_mask(struct amdgpu_device *adev, u32 *enable_mask);\nint amdgpu_kv_send_msg_to_smc_with_parameter(struct amdgpu_device *adev,\n\t\t\t\t      PPSMC_Msg msg, u32 parameter);\nint amdgpu_kv_read_smc_sram_dword(struct amdgpu_device *adev, u32 smc_address,\n\t\t\t   u32 *value, u32 limit);\nint amdgpu_kv_smc_dpm_enable(struct amdgpu_device *adev, bool enable);\nint amdgpu_kv_smc_bapm_enable(struct amdgpu_device *adev, bool enable);\nint amdgpu_kv_copy_bytes_to_smc(struct amdgpu_device *adev,\n\t\t\t u32 smc_start_address,\n\t\t\t const u8 *src, u32 byte_count, u32 limit);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}