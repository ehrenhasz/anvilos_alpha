{
  "module_name": "i915_params.c",
  "hash_id": "0c51a9da32c3d52ea63f62bbf2b0d925734223bc888bb2e452b45f899f4c8f56",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_params.c",
  "human_readable_source": " \n\n#include <linux/string_helpers.h>\n\n#include <drm/drm_print.h>\n\n#include \"i915_params.h\"\n#include \"i915_drv.h\"\n\nDECLARE_DYNDBG_CLASSMAP(drm_debug_classes, DD_CLASS_TYPE_DISJOINT_BITS, 0,\n\t\t\t\"DRM_UT_CORE\",\n\t\t\t\"DRM_UT_DRIVER\",\n\t\t\t\"DRM_UT_KMS\",\n\t\t\t\"DRM_UT_PRIME\",\n\t\t\t\"DRM_UT_ATOMIC\",\n\t\t\t\"DRM_UT_VBL\",\n\t\t\t\"DRM_UT_STATE\",\n\t\t\t\"DRM_UT_LEASE\",\n\t\t\t\"DRM_UT_DP\",\n\t\t\t\"DRM_UT_DRMRES\");\n\n#define i915_param_named(name, T, perm, desc) \\\n\tmodule_param_named(name, i915_modparams.name, T, perm); \\\n\tMODULE_PARM_DESC(name, desc)\n#define i915_param_named_unsafe(name, T, perm, desc) \\\n\tmodule_param_named_unsafe(name, i915_modparams.name, T, perm); \\\n\tMODULE_PARM_DESC(name, desc)\n\nstruct i915_params i915_modparams __read_mostly = {\n#define MEMBER(T, member, value, ...) .member = (value),\n\tI915_PARAMS_FOR_EACH(MEMBER)\n#undef MEMBER\n};\n\n \n\ni915_param_named(modeset, int, 0400,\n\t\"Use kernel modesetting [KMS] (0=disable, \"\n\t\"1=on, -1=force vga console preference [default])\");\n\ni915_param_named_unsafe(enable_dc, int, 0400,\n\t\"Enable power-saving display C-states. \"\n\t\"(-1=auto [default]; 0=disable; 1=up to DC5; 2=up to DC6; \"\n\t\"3=up to DC5 with DC3CO; 4=up to DC6 with DC3CO)\");\n\ni915_param_named_unsafe(enable_fbc, int, 0400,\n\t\"Enable frame buffer compression for power savings \"\n\t\"(default: -1 (use per-chip default))\");\n\ni915_param_named_unsafe(lvds_channel_mode, int, 0400,\n\t \"Specify LVDS channel mode \"\n\t \"(0=probe BIOS [default], 1=single-channel, 2=dual-channel)\");\n\ni915_param_named_unsafe(panel_use_ssc, int, 0400,\n\t\"Use Spread Spectrum Clock with panels [LVDS/eDP] \"\n\t\"(default: auto from VBT)\");\n\ni915_param_named_unsafe(vbt_sdvo_panel_type, int, 0400,\n\t\"Override/Ignore selection of SDVO panel mode in the VBT \"\n\t\"(-2=ignore, -1=auto [default], index in VBT BIOS table)\");\n\ni915_param_named_unsafe(reset, uint, 0400,\n\t\"Attempt GPU resets (0=disabled, 1=full gpu reset, 2=engine reset [default])\");\n\ni915_param_named_unsafe(vbt_firmware, charp, 0400,\n\t\"Load VBT from specified file under /lib/firmware\");\n\n#if IS_ENABLED(CONFIG_DRM_I915_CAPTURE_ERROR)\ni915_param_named(error_capture, bool, 0400,\n\t\"Record the GPU state following a hang. \"\n\t\"This information in /sys/class/drm/card<N>/error is vital for \"\n\t\"triaging and debugging hangs.\");\n#endif\n\ni915_param_named_unsafe(enable_hangcheck, bool, 0400,\n\t\"Periodically check GPU activity for detecting hangs. \"\n\t\"WARNING: Disabling this can cause system wide hangs. \"\n\t\"(default: true)\");\n\ni915_param_named_unsafe(enable_psr, int, 0400,\n\t\"Enable PSR \"\n\t\"(0=disabled, 1=enable up to PSR1, 2=enable up to PSR2) \"\n\t\"Default: -1 (use per-chip default)\");\n\ni915_param_named(psr_safest_params, bool, 0400,\n\t\"Replace PSR VBT parameters by the safest and not optimal ones. This \"\n\t\"is helpful to detect if PSR issues are related to bad values set in \"\n\t\" VBT. (0=use VBT parameters, 1=use safest parameters)\");\n\ni915_param_named_unsafe(enable_psr2_sel_fetch, bool, 0400,\n\t\"Enable PSR2 selective fetch \"\n\t\"(0=disabled, 1=enabled) \"\n\t\"Default: 0\");\n\ni915_param_named_unsafe(enable_sagv, bool, 0600,\n\t\"Enable system agent voltage/frequency scaling (SAGV) (default: true)\");\n\ni915_param_named_unsafe(force_probe, charp, 0400,\n\t\"Force probe options for specified supported devices. \"\n\t\"See CONFIG_DRM_I915_FORCE_PROBE for details.\");\n\ni915_param_named_unsafe(disable_power_well, int, 0400,\n\t\"Disable display power wells when possible \"\n\t\"(-1=auto [default], 0=power wells always on, 1=power wells disabled when possible)\");\n\ni915_param_named_unsafe(enable_ips, int, 0400, \"Enable IPS (default: true)\");\n\ni915_param_named_unsafe(enable_dpt, bool, 0400,\n\t\"Enable display page table (DPT) (default: true)\");\n\ni915_param_named(fastboot, int, 0400,\n\t\"Try to skip unnecessary mode sets at boot time \"\n\t\"(0=disabled, 1=enabled) \"\n\t\"Default: -1 (use per-chip default)\");\n\ni915_param_named_unsafe(load_detect_test, bool, 0400,\n\t\"Force-enable the VGA load detect code for testing (default:false). \"\n\t\"For developers only.\");\n\ni915_param_named_unsafe(force_reset_modeset_test, bool, 0400,\n\t\"Force a modeset during gpu reset for testing (default:false). \"\n\t\"For developers only.\");\n\ni915_param_named_unsafe(invert_brightness, int, 0400,\n\t\"Invert backlight brightness \"\n\t\"(-1 force normal, 0 machine defaults, 1 force inversion), please \"\n\t\"report PCI device ID, subsystem vendor and subsystem device ID \"\n\t\"to dri-devel@lists.freedesktop.org, if your machine needs it. \"\n\t\"It will then be included in an upcoming module version.\");\n\ni915_param_named(disable_display, bool, 0400,\n\t\"Disable display (default: false)\");\n\ni915_param_named(memtest, bool, 0400,\n\t\"Perform a read/write test of all device memory on module load (default: off)\");\n\ni915_param_named(mmio_debug, int, 0400,\n\t\"Enable the MMIO debug code for the first N failures (default: off). \"\n\t\"This may negatively affect performance.\");\n\n \ni915_param_named(verbose_state_checks, bool, 0600,\n\t\"Enable verbose logs (ie. WARN_ON()) in case of unexpected hw state conditions.\");\n\ni915_param_named_unsafe(nuclear_pageflip, bool, 0400,\n\t\"Force enable atomic functionality on platforms that don't have full support yet.\");\n\n \ni915_param_named_unsafe(edp_vswing, int, 0400,\n\t\"Ignore/Override vswing pre-emph table selection from VBT \"\n\t\"(0=use value from vbt [default], 1=low power swing(200mV),\"\n\t\"2=default swing(400mV))\");\n\ni915_param_named_unsafe(enable_guc, int, 0400,\n\t\"Enable GuC load for GuC submission and/or HuC load. \"\n\t\"Required functionality can be selected using bitmask values. \"\n\t\"(-1=auto [default], 0=disable, 1=GuC submission, 2=HuC load)\");\n\ni915_param_named(guc_log_level, int, 0400,\n\t\"GuC firmware logging level. Requires GuC to be loaded. \"\n\t\"(-1=auto [default], 0=disable, 1..4=enable with verbosity min..max)\");\n\ni915_param_named_unsafe(guc_firmware_path, charp, 0400,\n\t\"GuC firmware path to use instead of the default one\");\n\ni915_param_named_unsafe(huc_firmware_path, charp, 0400,\n\t\"HuC firmware path to use instead of the default one\");\n\ni915_param_named_unsafe(dmc_firmware_path, charp, 0400,\n\t\"DMC firmware path to use instead of the default one\");\n\ni915_param_named_unsafe(gsc_firmware_path, charp, 0400,\n\t\"GSC firmware path to use instead of the default one\");\n\ni915_param_named_unsafe(enable_dp_mst, bool, 0400,\n\t\"Enable multi-stream transport (MST) for new DisplayPort sinks. (default: true)\");\n\n#if IS_ENABLED(CONFIG_DRM_I915_DEBUG)\ni915_param_named_unsafe(inject_probe_failure, uint, 0400,\n\t\"Force an error after a number of failure check points (0:disabled (default), N:force failure at the Nth failure check point)\");\n#endif\n\ni915_param_named(enable_dpcd_backlight, int, 0400,\n\t\"Enable support for DPCD backlight control\"\n\t\"(-1=use per-VBT LFP backlight type setting [default], 0=disabled, 1=enable, 2=force VESA interface, 3=force Intel interface)\");\n\n#if IS_ENABLED(CONFIG_DRM_I915_GVT)\ni915_param_named(enable_gvt, bool, 0400,\n\t\"Enable support for Intel GVT-g graphics virtualization host support(default:false)\");\n#endif\n\n#if CONFIG_DRM_I915_REQUEST_TIMEOUT\ni915_param_named_unsafe(request_timeout_ms, uint, 0600,\n\t\t\t\"Default request/fence/batch buffer expiration timeout.\");\n#endif\n\ni915_param_named_unsafe(lmem_size, uint, 0400,\n\t\t\t\"Set the lmem size(in MiB) for each region. (default: 0, all memory)\");\ni915_param_named_unsafe(lmem_bar_size, uint, 0400,\n\t\t\t\"Set the lmem bar size(in MiB).\");\n\nstatic void _param_print_bool(struct drm_printer *p, const char *name,\n\t\t\t      bool val)\n{\n\tdrm_printf(p, \"i915.%s=%s\\n\", name, str_yes_no(val));\n}\n\nstatic void _param_print_int(struct drm_printer *p, const char *name,\n\t\t\t     int val)\n{\n\tdrm_printf(p, \"i915.%s=%d\\n\", name, val);\n}\n\nstatic void _param_print_uint(struct drm_printer *p, const char *name,\n\t\t\t      unsigned int val)\n{\n\tdrm_printf(p, \"i915.%s=%u\\n\", name, val);\n}\n\nstatic void _param_print_ulong(struct drm_printer *p, const char *name,\n\t\t\t       unsigned long val)\n{\n\tdrm_printf(p, \"i915.%s=%lu\\n\", name, val);\n}\n\nstatic void _param_print_charp(struct drm_printer *p, const char *name,\n\t\t\t       const char *val)\n{\n\tdrm_printf(p, \"i915.%s=%s\\n\", name, val);\n}\n\n#define _param_print(p, name, val)\t\t\t\t\\\n\t_Generic(val,\t\t\t\t\t\t\\\n\t\t bool: _param_print_bool,\t\t\t\\\n\t\t int: _param_print_int,\t\t\t\t\\\n\t\t unsigned int: _param_print_uint,\t\t\\\n\t\t unsigned long: _param_print_ulong,\t\t\\\n\t\t char *: _param_print_charp)(p, name, val)\n\n \nvoid i915_params_dump(const struct i915_params *params, struct drm_printer *p)\n{\n#define PRINT(T, x, ...) _param_print(p, #x, params->x);\n\tI915_PARAMS_FOR_EACH(PRINT);\n#undef PRINT\n}\n\nstatic void _param_dup_charp(char **valp)\n{\n\t*valp = kstrdup(*valp, GFP_ATOMIC);\n}\n\nstatic void _param_nop(void *valp)\n{\n}\n\n#define _param_dup(valp)\t\t\t\t\\\n\t_Generic(valp,\t\t\t\t\t\\\n\t\t char **: _param_dup_charp,\t\t\\\n\t\t default: _param_nop)(valp)\n\nvoid i915_params_copy(struct i915_params *dest, const struct i915_params *src)\n{\n\t*dest = *src;\n#define DUP(T, x, ...) _param_dup(&dest->x);\n\tI915_PARAMS_FOR_EACH(DUP);\n#undef DUP\n}\n\nstatic void _param_free_charp(char **valp)\n{\n\tkfree(*valp);\n\t*valp = NULL;\n}\n\n#define _param_free(valp)\t\t\t\t\\\n\t_Generic(valp,\t\t\t\t\t\\\n\t\t char **: _param_free_charp,\t\t\\\n\t\t default: _param_nop)(valp)\n\n \nvoid i915_params_free(struct i915_params *params)\n{\n#define FREE(T, x, ...) _param_free(&params->x);\n\tI915_PARAMS_FOR_EACH(FREE);\n#undef FREE\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}