{
  "module_name": "i915_gem.h",
  "hash_id": "f11bff1f12f9dd3f47fc74f43b7c2bcaf6d2faa1ceb1faed73d54d74c0815233",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_gem.h",
  "human_readable_source": " \n\n#ifndef __I915_GEM_H__\n#define __I915_GEM_H__\n\n#include <linux/bug.h>\n#include <linux/types.h>\n\n#include <drm/drm_drv.h>\n\n#include \"i915_utils.h\"\n\nstruct drm_file;\nstruct drm_i915_gem_object;\nstruct drm_i915_private;\nstruct i915_gem_ww_ctx;\nstruct i915_gtt_view;\nstruct i915_vma;\n\n#define I915_GEM_GPU_DOMAINS\t       \\\n\t(I915_GEM_DOMAIN_RENDER |      \\\n\t I915_GEM_DOMAIN_SAMPLER |     \\\n\t I915_GEM_DOMAIN_COMMAND |     \\\n\t I915_GEM_DOMAIN_INSTRUCTION | \\\n\t I915_GEM_DOMAIN_VERTEX)\n\nvoid i915_gem_init_early(struct drm_i915_private *i915);\nvoid i915_gem_cleanup_early(struct drm_i915_private *i915);\n\nvoid i915_gem_drain_freed_objects(struct drm_i915_private *i915);\nvoid i915_gem_drain_workqueue(struct drm_i915_private *i915);\n\nstruct i915_vma * __must_check\ni915_gem_object_ggtt_pin_ww(struct drm_i915_gem_object *obj,\n\t\t\t    struct i915_gem_ww_ctx *ww,\n\t\t\t    const struct i915_gtt_view *view,\n\t\t\t    u64 size, u64 alignment, u64 flags);\n\nstruct i915_vma * __must_check\ni915_gem_object_ggtt_pin(struct drm_i915_gem_object *obj,\n\t\t\t const struct i915_gtt_view *view,\n\t\t\t u64 size, u64 alignment, u64 flags);\n\nint i915_gem_object_unbind(struct drm_i915_gem_object *obj,\n\t\t\t   unsigned long flags);\n#define I915_GEM_OBJECT_UNBIND_ACTIVE BIT(0)\n#define I915_GEM_OBJECT_UNBIND_BARRIER BIT(1)\n#define I915_GEM_OBJECT_UNBIND_TEST BIT(2)\n#define I915_GEM_OBJECT_UNBIND_VM_TRYLOCK BIT(3)\n#define I915_GEM_OBJECT_UNBIND_ASYNC BIT(4)\n\nvoid i915_gem_runtime_suspend(struct drm_i915_private *i915);\n\nint __must_check i915_gem_init(struct drm_i915_private *i915);\nvoid i915_gem_driver_register(struct drm_i915_private *i915);\nvoid i915_gem_driver_unregister(struct drm_i915_private *i915);\nvoid i915_gem_driver_remove(struct drm_i915_private *i915);\nvoid i915_gem_driver_release(struct drm_i915_private *i915);\n\nint i915_gem_open(struct drm_i915_private *i915, struct drm_file *file);\n\n \n\n#ifdef CONFIG_DRM_I915_DEBUG_GEM\n\n#define GEM_SHOW_DEBUG() drm_debug_enabled(DRM_UT_DRIVER)\n\n#ifdef CONFIG_DRM_I915_DEBUG_GEM_ONCE\n#define __GEM_BUG(cond) BUG()\n#else\n#define __GEM_BUG(cond) \\\n\tWARN(1, \"%s:%d GEM_BUG_ON(%s)\\n\", __func__, __LINE__, __stringify(cond))\n#endif\n\n#define GEM_BUG_ON(condition) do { if (unlikely((condition))) {\t\\\n\t\tGEM_TRACE_ERR(\"%s:%d GEM_BUG_ON(%s)\\n\", \\\n\t\t\t      __func__, __LINE__, __stringify(condition)); \\\n\t\tGEM_TRACE_DUMP(); \\\n\t\t__GEM_BUG(condition); \\\n\t\t} \\\n\t} while(0)\n#define GEM_WARN_ON(expr) WARN_ON(expr)\n\n#define GEM_DEBUG_WARN_ON(expr) GEM_WARN_ON(expr)\n\n#else\n\n#define GEM_SHOW_DEBUG() (0)\n\n#define GEM_BUG_ON(expr) BUILD_BUG_ON_INVALID(expr)\n#define GEM_WARN_ON(expr) ({ unlikely(!!(expr)); })\n\n#define GEM_DEBUG_WARN_ON(expr) ({ BUILD_BUG_ON_INVALID(expr); 0; })\n#endif\n\n#if IS_ENABLED(CONFIG_DRM_I915_TRACE_GEM)\n#define GEM_TRACE(...) trace_printk(__VA_ARGS__)\n#define GEM_TRACE_ERR(...) do {\t\t\t\t\t\t\\\n\tpr_err(__VA_ARGS__);\t\t\t\t\t\t\\\n\ttrace_printk(__VA_ARGS__);\t\t\t\t\t\\\n} while (0)\n#define GEM_TRACE_DUMP() \\\n\tdo { ftrace_dump(DUMP_ALL); __add_taint_for_CI(TAINT_WARN); } while (0)\n#define GEM_TRACE_DUMP_ON(expr) \\\n\tdo { if (expr) GEM_TRACE_DUMP(); } while (0)\n#else\n#define GEM_TRACE(...) do { } while (0)\n#define GEM_TRACE_ERR(...) do { } while (0)\n#define GEM_TRACE_DUMP() do { } while (0)\n#define GEM_TRACE_DUMP_ON(expr) BUILD_BUG_ON_INVALID(expr)\n#endif\n\n#define I915_GEM_IDLE_TIMEOUT (HZ / 5)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}