{
  "module_name": "i915_pmu.h",
  "hash_id": "cfdf0483926e7c298e5c7d15cdac88c9df3fa8463d4377c12ed3526b154a85c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_pmu.h",
  "human_readable_source": " \n\n#ifndef __I915_PMU_H__\n#define __I915_PMU_H__\n\n#include <linux/hrtimer.h>\n#include <linux/perf_event.h>\n#include <linux/spinlock_types.h>\n#include <uapi/drm/i915_drm.h>\n\nstruct drm_i915_private;\nstruct intel_gt;\n\n \nenum i915_pmu_tracked_events {\n\t__I915_PMU_ACTUAL_FREQUENCY_ENABLED = 0,\n\t__I915_PMU_REQUESTED_FREQUENCY_ENABLED,\n\t__I915_PMU_RC6_RESIDENCY_ENABLED,\n\t__I915_PMU_TRACKED_EVENT_COUNT,  \n};\n\n \nenum {\n\t__I915_SAMPLE_FREQ_ACT = 0,\n\t__I915_SAMPLE_FREQ_REQ,\n\t__I915_SAMPLE_RC6,\n\t__I915_SAMPLE_RC6_LAST_REPORTED,\n\t__I915_NUM_PMU_SAMPLERS\n};\n\n#define I915_PMU_MAX_GT 2\n\n \n#define I915_PMU_MASK_BITS \\\n\t(I915_ENGINE_SAMPLE_COUNT + \\\n\t I915_PMU_MAX_GT * __I915_PMU_TRACKED_EVENT_COUNT)\n\n#define I915_ENGINE_SAMPLE_COUNT (I915_SAMPLE_SEMA + 1)\n\nstruct i915_pmu_sample {\n\tu64 cur;\n};\n\nstruct i915_pmu {\n\t \n\tstruct {\n\t\tstruct hlist_node node;\n\t\tunsigned int cpu;\n\t} cpuhp;\n\t \n\tstruct pmu base;\n\t \n\tbool closed;\n\t \n\tconst char *name;\n\t \n\tspinlock_t lock;\n\t \n\tunsigned int unparked;\n\t \n\tstruct hrtimer timer;\n\t \n\tu32 enable;\n\n\t \n\tktime_t timer_last;\n\n\t \n\tunsigned int enable_count[I915_PMU_MASK_BITS];\n\t \n\tbool timer_enabled;\n\t \n\tstruct i915_pmu_sample sample[I915_PMU_MAX_GT][__I915_NUM_PMU_SAMPLERS];\n\t \n\tktime_t sleep_last[I915_PMU_MAX_GT];\n\t \n\tunsigned long irq_count;\n\t \n\tstruct attribute_group events_attr_group;\n\t \n\tvoid *i915_attr;\n\t \n\tvoid *pmu_attr;\n};\n\n#ifdef CONFIG_PERF_EVENTS\nint i915_pmu_init(void);\nvoid i915_pmu_exit(void);\nvoid i915_pmu_register(struct drm_i915_private *i915);\nvoid i915_pmu_unregister(struct drm_i915_private *i915);\nvoid i915_pmu_gt_parked(struct intel_gt *gt);\nvoid i915_pmu_gt_unparked(struct intel_gt *gt);\n#else\nstatic inline int i915_pmu_init(void) { return 0; }\nstatic inline void i915_pmu_exit(void) {}\nstatic inline void i915_pmu_register(struct drm_i915_private *i915) {}\nstatic inline void i915_pmu_unregister(struct drm_i915_private *i915) {}\nstatic inline void i915_pmu_gt_parked(struct intel_gt *gt) {}\nstatic inline void i915_pmu_gt_unparked(struct intel_gt *gt) {}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}