{
  "module_name": "intel_display_core.h",
  "hash_id": "fee47d172c457eba6f88fd316257f6932c84f0f1fd9f3ac0ad792cc62a1b00f7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_display_core.h",
  "human_readable_source": " \n \n\n#ifndef __INTEL_DISPLAY_CORE_H__\n#define __INTEL_DISPLAY_CORE_H__\n\n#include <linux/list.h>\n#include <linux/llist.h>\n#include <linux/mutex.h>\n#include <linux/types.h>\n#include <linux/wait.h>\n#include <linux/workqueue.h>\n\n#include <drm/drm_connector.h>\n#include <drm/drm_modeset_lock.h>\n\n#include \"intel_cdclk.h\"\n#include \"intel_display_device.h\"\n#include \"intel_display_limits.h\"\n#include \"intel_display_power.h\"\n#include \"intel_dpll_mgr.h\"\n#include \"intel_fbc.h\"\n#include \"intel_global_state.h\"\n#include \"intel_gmbus.h\"\n#include \"intel_opregion.h\"\n#include \"intel_wm_types.h\"\n\nstruct drm_i915_private;\nstruct drm_property;\nstruct drm_property_blob;\nstruct i915_audio_component;\nstruct i915_hdcp_arbiter;\nstruct intel_atomic_state;\nstruct intel_audio_funcs;\nstruct intel_cdclk_funcs;\nstruct intel_cdclk_vals;\nstruct intel_color_funcs;\nstruct intel_crtc;\nstruct intel_crtc_state;\nstruct intel_dmc;\nstruct intel_dpll_funcs;\nstruct intel_dpll_mgr;\nstruct intel_fbdev;\nstruct intel_fdi_funcs;\nstruct intel_hotplug_funcs;\nstruct intel_initial_plane_config;\nstruct intel_overlay;\n\n \n#define I915_NUM_QGV_POINTS 8\n\n \n#define I915_NUM_PSF_GV_POINTS 3\n\nstruct intel_display_funcs {\n\t \n\tbool (*get_pipe_config)(struct intel_crtc *,\n\t\t\t\tstruct intel_crtc_state *);\n\tvoid (*get_initial_plane_config)(struct intel_crtc *,\n\t\t\t\t\t struct intel_initial_plane_config *);\n\tvoid (*crtc_enable)(struct intel_atomic_state *state,\n\t\t\t    struct intel_crtc *crtc);\n\tvoid (*crtc_disable)(struct intel_atomic_state *state,\n\t\t\t     struct intel_crtc *crtc);\n\tvoid (*commit_modeset_enables)(struct intel_atomic_state *state);\n};\n\n \nstruct intel_wm_funcs {\n\t \n\tvoid (*update_wm)(struct drm_i915_private *dev_priv);\n\tint (*compute_pipe_wm)(struct intel_atomic_state *state,\n\t\t\t       struct intel_crtc *crtc);\n\tint (*compute_intermediate_wm)(struct intel_atomic_state *state,\n\t\t\t\t       struct intel_crtc *crtc);\n\tvoid (*initial_watermarks)(struct intel_atomic_state *state,\n\t\t\t\t   struct intel_crtc *crtc);\n\tvoid (*atomic_update_watermarks)(struct intel_atomic_state *state,\n\t\t\t\t\t struct intel_crtc *crtc);\n\tvoid (*optimize_watermarks)(struct intel_atomic_state *state,\n\t\t\t\t    struct intel_crtc *crtc);\n\tint (*compute_global_watermarks)(struct intel_atomic_state *state);\n\tvoid (*get_hw_state)(struct drm_i915_private *i915);\n};\n\nstruct intel_audio_state {\n\tstruct intel_encoder *encoder;\n\tu8 eld[MAX_ELD_BYTES];\n};\n\nstruct intel_audio {\n\t \n\tstruct i915_audio_component *component;\n\tbool component_registered;\n\t \n\tstruct mutex mutex;\n\tint power_refcount;\n\tu32 freq_cntrl;\n\n\t \n\tstruct intel_audio_state state[I915_MAX_TRANSCODERS];\n\n\t \n\tstruct {\n\t\tstruct platform_device *platdev;\n\t\tint irq;\n\t} lpe;\n};\n\n \nstruct intel_dpll {\n\tstruct mutex lock;\n\n\tint num_shared_dpll;\n\tstruct intel_shared_dpll shared_dplls[I915_NUM_PLLS];\n\tconst struct intel_dpll_mgr *mgr;\n\n\tstruct {\n\t\tint nssc;\n\t\tint ssc;\n\t} ref_clks;\n\n\t \n\tu8 pch_ssc_use;\n};\n\nstruct intel_frontbuffer_tracking {\n\tspinlock_t lock;\n\n\t \n\tunsigned busy_bits;\n\tunsigned flip_bits;\n};\n\nstruct intel_hotplug {\n\tstruct delayed_work hotplug_work;\n\n\tconst u32 *hpd, *pch_hpd;\n\n\tstruct {\n\t\tunsigned long last_jiffies;\n\t\tint count;\n\t\tenum {\n\t\t\tHPD_ENABLED = 0,\n\t\t\tHPD_DISABLED = 1,\n\t\t\tHPD_MARK_DISABLED = 2\n\t\t} state;\n\t} stats[HPD_NUM_PINS];\n\tu32 event_bits;\n\tu32 retry_bits;\n\tstruct delayed_work reenable_work;\n\n\tu32 long_port_mask;\n\tu32 short_port_mask;\n\tstruct work_struct dig_port_work;\n\n\tstruct work_struct poll_init_work;\n\tbool poll_enabled;\n\n\tunsigned int hpd_storm_threshold;\n\t \n\tu8 hpd_short_storm_enabled;\n\n\t \n\tstruct workqueue_struct *dp_wq;\n\n\t \n\tbool ignore_long_hpd;\n};\n\nstruct intel_vbt_data {\n\t \n\tu16 version;\n\n\t \n\tunsigned int int_tv_support:1;\n\tunsigned int int_crt_support:1;\n\tunsigned int lvds_use_ssc:1;\n\tunsigned int int_lvds_support:1;\n\tunsigned int display_clock_mode:1;\n\tunsigned int fdi_rx_polarity_inverted:1;\n\tint lvds_ssc_freq;\n\tenum drm_panel_orientation orientation;\n\n\tbool override_afc_startup;\n\tu8 override_afc_startup_val;\n\n\tint crt_ddc_pin;\n\n\tstruct list_head display_devices;\n\tstruct list_head bdb_blocks;\n\n\tstruct sdvo_device_mapping {\n\t\tu8 initialized;\n\t\tu8 dvo_port;\n\t\tu8 slave_addr;\n\t\tu8 dvo_wiring;\n\t\tu8 i2c_pin;\n\t\tu8 ddc_pin;\n\t} sdvo_mappings[2];\n};\n\nstruct intel_wm {\n\t \n\t \n\tu16 pri_latency[5];\n\t \n\tu16 spr_latency[5];\n\t \n\tu16 cur_latency[5];\n\t \n\tu16 skl_latency[8];\n\n\t \n\tunion {\n\t\tstruct ilk_wm_values hw;\n\t\tstruct vlv_wm_values vlv;\n\t\tstruct g4x_wm_values g4x;\n\t};\n\n\tu8 num_levels;\n\n\t \n\tstruct mutex wm_mutex;\n\n\tbool ipc_enabled;\n};\n\nstruct intel_display {\n\t \n\tstruct {\n\t\t \n\t\tconst struct intel_display_funcs *display;\n\n\t\t \n\t\tconst struct intel_cdclk_funcs *cdclk;\n\n\t\t \n\t\tconst struct intel_dpll_funcs *dpll;\n\n\t\t \n\t\tconst struct intel_hotplug_funcs *hotplug;\n\n\t\t \n\t\tconst struct intel_wm_funcs *wm;\n\n\t\t \n\t\tconst struct intel_fdi_funcs *fdi;\n\n\t\t \n\t\tconst struct intel_color_funcs *color;\n\n\t\t \n\t\tconst struct intel_audio_funcs *audio;\n\t} funcs;\n\n\t \n\tstruct intel_atomic_helper {\n\t\tstruct llist_head free_list;\n\t\tstruct work_struct free_work;\n\t} atomic_helper;\n\n\tstruct {\n\t\t \n\t\tstruct mutex lock;\n\t} backlight;\n\n\tstruct {\n\t\tstruct intel_global_obj obj;\n\n\t\tstruct intel_bw_info {\n\t\t\t \n\t\t\tunsigned int deratedbw[I915_NUM_QGV_POINTS];\n\t\t\t \n\t\t\tunsigned int psf_bw[I915_NUM_PSF_GV_POINTS];\n\t\t\t \n\t\t\tunsigned int peakbw[I915_NUM_QGV_POINTS];\n\t\t\tu8 num_qgv_points;\n\t\t\tu8 num_psf_gv_points;\n\t\t\tu8 num_planes;\n\t\t} max[6];\n\t} bw;\n\n\tstruct {\n\t\t \n\t\tstruct intel_cdclk_config hw;\n\n\t\t \n\t\tconst struct intel_cdclk_vals *table;\n\n\t\tstruct intel_global_obj obj;\n\n\t\tunsigned int max_cdclk_freq;\n\t} cdclk;\n\n\tstruct {\n\t\tstruct drm_property_blob *glk_linear_degamma_lut;\n\t} color;\n\n\tstruct {\n\t\t \n\t\tu8 enabled_slices;\n\n\t\tstruct intel_global_obj obj;\n\t} dbuf;\n\n\tstruct {\n\t\twait_queue_head_t waitqueue;\n\n\t\t \n\t\tstruct mutex lock;\n\n\t\tstruct intel_global_obj obj;\n\t} pmdemand;\n\n\tstruct {\n\t\t \n\t\tspinlock_t phy_lock;\n\t} dkl;\n\n\tstruct {\n\t\tstruct intel_dmc *dmc;\n\t\tintel_wakeref_t wakeref;\n\t} dmc;\n\n\tstruct {\n\t\t \n\t\tu32 mmio_base;\n\t} dsi;\n\n\tstruct {\n\t\t \n\t\tstruct intel_fbdev *fbdev;\n\t\tstruct work_struct suspend_work;\n\t} fbdev;\n\n\tstruct {\n\t\tunsigned int pll_freq;\n\t\tu32 rx_config;\n\t} fdi;\n\n\tstruct {\n\t\tstruct list_head obj_list;\n\t} global;\n\n\tstruct {\n\t\t \n\t\tu32 mmio_base;\n\n\t\t \n\t\tstruct mutex mutex;\n\n\t\tstruct intel_gmbus *bus[GMBUS_NUM_PINS];\n\n\t\twait_queue_head_t wait_queue;\n\t} gmbus;\n\n\tstruct {\n\t\tstruct i915_hdcp_arbiter *arbiter;\n\t\tbool comp_added;\n\n\t\t \n\t\tstruct intel_hdcp_gsc_message *hdcp_message;\n\t\t \n\t\tstruct mutex hdcp_mutex;\n\t} hdcp;\n\n\tstruct {\n\t\t \n\t\tu32 state;\n\t} hti;\n\n\tstruct {\n\t\t \n\t\tconst struct intel_display_device_info *__device_info;\n\n\t\t \n\t\tstruct intel_display_runtime_info __runtime_info;\n\t} info;\n\n\tstruct {\n\t\tbool false_color;\n\t} ips;\n\n\tstruct {\n\t\tstruct i915_power_domains domains;\n\n\t\t \n\t\tu32 chv_phy_control;\n\n\t\t \n\t\tbool chv_phy_assert[2];\n\t} power;\n\n\tstruct {\n\t\tu32 mmio_base;\n\n\t\t \n\t\tstruct mutex mutex;\n\t} pps;\n\n\tstruct {\n\t\tstruct drm_property *broadcast_rgb;\n\t\tstruct drm_property *force_audio;\n\t} properties;\n\n\tstruct {\n\t\tunsigned long mask;\n\t} quirks;\n\n\tstruct {\n\t\t \n\t\tstruct drm_atomic_state *modeset_state;\n\t\tstruct drm_modeset_acquire_ctx reset_ctx;\n\t} restore;\n\n\tstruct {\n\t\tenum {\n\t\t\tI915_SAGV_UNKNOWN = 0,\n\t\t\tI915_SAGV_DISABLED,\n\t\t\tI915_SAGV_ENABLED,\n\t\t\tI915_SAGV_NOT_CONTROLLED\n\t\t} status;\n\n\t\tu32 block_time_us;\n\t} sagv;\n\n\tstruct {\n\t\t \n\t\tu8 phy_failed_calibration;\n\t} snps;\n\n\tstruct {\n\t\t \n\t\tu32 chv_dpll_md[I915_MAX_PIPES];\n\t\tu32 bxt_phy_grc;\n\t} state;\n\n\tstruct {\n\t\t \n\t\tstruct workqueue_struct *modeset;\n\n\t\t \n\t\tstruct workqueue_struct *flip;\n\t} wq;\n\n\t \n\tstruct intel_audio audio;\n\tstruct intel_dpll dpll;\n\tstruct intel_fbc *fbc[I915_MAX_FBCS];\n\tstruct intel_frontbuffer_tracking fb_tracking;\n\tstruct intel_hotplug hotplug;\n\tstruct intel_opregion opregion;\n\tstruct intel_overlay *overlay;\n\tstruct intel_vbt_data vbt;\n\tstruct intel_wm wm;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}