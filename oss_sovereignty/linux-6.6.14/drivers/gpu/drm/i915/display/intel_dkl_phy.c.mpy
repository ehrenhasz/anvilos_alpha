{
  "module_name": "intel_dkl_phy.c",
  "hash_id": "e760638a78559d2c5b94bdef485393ceddf4247cc4c412babdcdaf4f2fa7c2ca",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_dkl_phy.c",
  "human_readable_source": "\n \n\n#include \"i915_drv.h\"\n#include \"i915_reg.h\"\n\n#include \"intel_de.h\"\n#include \"intel_display.h\"\n#include \"intel_dkl_phy.h\"\n#include \"intel_dkl_phy_regs.h\"\n\n \nvoid intel_dkl_phy_init(struct drm_i915_private *i915)\n{\n\tspin_lock_init(&i915->display.dkl.phy_lock);\n}\n\nstatic void\ndkl_phy_set_hip_idx(struct drm_i915_private *i915, struct intel_dkl_phy_reg reg)\n{\n\tenum tc_port tc_port = DKL_REG_TC_PORT(reg);\n\n\tdrm_WARN_ON(&i915->drm, tc_port < TC_PORT_1 || tc_port >= I915_MAX_TC_PORTS);\n\n\tintel_de_write(i915,\n\t\t       HIP_INDEX_REG(tc_port),\n\t\t       HIP_INDEX_VAL(tc_port, reg.bank_idx));\n}\n\n \nu32\nintel_dkl_phy_read(struct drm_i915_private *i915, struct intel_dkl_phy_reg reg)\n{\n\tu32 val;\n\n\tspin_lock(&i915->display.dkl.phy_lock);\n\n\tdkl_phy_set_hip_idx(i915, reg);\n\tval = intel_de_read(i915, DKL_REG_MMIO(reg));\n\n\tspin_unlock(&i915->display.dkl.phy_lock);\n\n\treturn val;\n}\n\n \nvoid\nintel_dkl_phy_write(struct drm_i915_private *i915, struct intel_dkl_phy_reg reg, u32 val)\n{\n\tspin_lock(&i915->display.dkl.phy_lock);\n\n\tdkl_phy_set_hip_idx(i915, reg);\n\tintel_de_write(i915, DKL_REG_MMIO(reg), val);\n\n\tspin_unlock(&i915->display.dkl.phy_lock);\n}\n\n \nvoid\nintel_dkl_phy_rmw(struct drm_i915_private *i915, struct intel_dkl_phy_reg reg, u32 clear, u32 set)\n{\n\tspin_lock(&i915->display.dkl.phy_lock);\n\n\tdkl_phy_set_hip_idx(i915, reg);\n\tintel_de_rmw(i915, DKL_REG_MMIO(reg), clear, set);\n\n\tspin_unlock(&i915->display.dkl.phy_lock);\n}\n\n \nvoid\nintel_dkl_phy_posting_read(struct drm_i915_private *i915, struct intel_dkl_phy_reg reg)\n{\n\tspin_lock(&i915->display.dkl.phy_lock);\n\n\tdkl_phy_set_hip_idx(i915, reg);\n\tintel_de_posting_read(i915, DKL_REG_MMIO(reg));\n\n\tspin_unlock(&i915->display.dkl.phy_lock);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}