{
  "module_name": "intel_dpll_mgr.h",
  "hash_id": "e4d63a943b91d9cac3299305c82792013a9eb2f7513cd70d1421fe2feade72ff",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_dpll_mgr.h",
  "human_readable_source": " \n\n#ifndef _INTEL_DPLL_MGR_H_\n#define _INTEL_DPLL_MGR_H_\n\n#include <linux/types.h>\n\n#include \"intel_wakeref.h\"\n\nenum tc_port;\nstruct drm_i915_private;\nstruct intel_atomic_state;\nstruct intel_crtc;\nstruct intel_crtc_state;\nstruct intel_encoder;\nstruct intel_shared_dpll;\nstruct intel_shared_dpll_funcs;\n\n \nenum intel_dpll_id {\n\t \n\tDPLL_ID_PRIVATE = -1,\n\n\t \n\tDPLL_ID_PCH_PLL_A = 0,\n\t \n\tDPLL_ID_PCH_PLL_B = 1,\n\n\n\t \n\tDPLL_ID_WRPLL1 = 0,\n\t \n\tDPLL_ID_WRPLL2 = 1,\n\t \n\tDPLL_ID_SPLL = 2,\n\t \n\tDPLL_ID_LCPLL_810 = 3,\n\t \n\tDPLL_ID_LCPLL_1350 = 4,\n\t \n\tDPLL_ID_LCPLL_2700 = 5,\n\n\n\t \n\tDPLL_ID_SKL_DPLL0 = 0,\n\t \n\tDPLL_ID_SKL_DPLL1 = 1,\n\t \n\tDPLL_ID_SKL_DPLL2 = 2,\n\t \n\tDPLL_ID_SKL_DPLL3 = 3,\n\n\n\t \n\tDPLL_ID_ICL_DPLL0 = 0,\n\t \n\tDPLL_ID_ICL_DPLL1 = 1,\n\t \n\tDPLL_ID_EHL_DPLL4 = 2,\n\t \n\tDPLL_ID_ICL_TBTPLL = 2,\n\t \n\tDPLL_ID_ICL_MGPLL1 = 3,\n\t \n\tDPLL_ID_ICL_MGPLL2 = 4,\n\t \n\tDPLL_ID_ICL_MGPLL3 = 5,\n\t \n\tDPLL_ID_ICL_MGPLL4 = 6,\n\t \n\tDPLL_ID_TGL_MGPLL5 = 7,\n\t \n\tDPLL_ID_TGL_MGPLL6 = 8,\n\n\t \n\tDPLL_ID_DG1_DPLL0 = 0,\n\t \n\tDPLL_ID_DG1_DPLL1 = 1,\n\t \n\tDPLL_ID_DG1_DPLL2 = 2,\n\t \n\tDPLL_ID_DG1_DPLL3 = 3,\n};\n\n#define I915_NUM_PLLS 9\n\nenum icl_port_dpll_id {\n\tICL_PORT_DPLL_DEFAULT,\n\tICL_PORT_DPLL_MG_PHY,\n\n\tICL_PORT_DPLL_COUNT,\n};\n\nstruct intel_dpll_hw_state {\n\t \n\tu32 dpll;\n\tu32 dpll_md;\n\tu32 fp0;\n\tu32 fp1;\n\n\t \n\tu32 wrpll;\n\tu32 spll;\n\n\t \n\t \n\tu32 ctrl1;\n\t \n\tu32 cfgcr1, cfgcr2;\n\n\t \n\tu32 cfgcr0;\n\n\t \n\tu32 div0;\n\n\t \n\tu32 ebb0, ebb4, pll0, pll1, pll2, pll3, pll6, pll8, pll9, pll10, pcsdw12;\n\n\t \n\tu32 mg_refclkin_ctl;\n\tu32 mg_clktop2_coreclkctl1;\n\tu32 mg_clktop2_hsclkctl;\n\tu32 mg_pll_div0;\n\tu32 mg_pll_div1;\n\tu32 mg_pll_lf;\n\tu32 mg_pll_frac_lock;\n\tu32 mg_pll_ssc;\n\tu32 mg_pll_bias;\n\tu32 mg_pll_tdc_coldst_bias;\n\tu32 mg_pll_bias_mask;\n\tu32 mg_pll_tdc_coldst_bias_mask;\n};\n\n \nstruct intel_shared_dpll_state {\n\t \n\tu8 pipe_mask;\n\n\t \n\tstruct intel_dpll_hw_state hw_state;\n};\n\n \nstruct dpll_info {\n\t \n\tconst char *name;\n\n\t \n\tconst struct intel_shared_dpll_funcs *funcs;\n\n\t \n\tenum intel_dpll_id id;\n\n#define INTEL_DPLL_ALWAYS_ON\t(1 << 0)\n\t \n\tu32 flags;\n};\n\n \nstruct intel_shared_dpll {\n\t \n\tstruct intel_shared_dpll_state state;\n\n\t \n\tu8 active_mask;\n\n\t \n\tbool on;\n\n\t \n\tconst struct dpll_info *info;\n\n\t \n\tintel_wakeref_t wakeref;\n};\n\n#define SKL_DPLL0 0\n#define SKL_DPLL1 1\n#define SKL_DPLL2 2\n#define SKL_DPLL3 3\n\n \nstruct intel_shared_dpll *\nintel_get_shared_dpll_by_id(struct drm_i915_private *dev_priv,\n\t\t\t    enum intel_dpll_id id);\nvoid assert_shared_dpll(struct drm_i915_private *dev_priv,\n\t\t\tstruct intel_shared_dpll *pll,\n\t\t\tbool state);\n#define assert_shared_dpll_enabled(d, p) assert_shared_dpll(d, p, true)\n#define assert_shared_dpll_disabled(d, p) assert_shared_dpll(d, p, false)\nint intel_compute_shared_dplls(struct intel_atomic_state *state,\n\t\t\t       struct intel_crtc *crtc,\n\t\t\t       struct intel_encoder *encoder);\nint intel_reserve_shared_dplls(struct intel_atomic_state *state,\n\t\t\t       struct intel_crtc *crtc,\n\t\t\t       struct intel_encoder *encoder);\nvoid intel_release_shared_dplls(struct intel_atomic_state *state,\n\t\t\t\tstruct intel_crtc *crtc);\nvoid intel_unreference_shared_dpll_crtc(const struct intel_crtc *crtc,\n\t\t\t\t\tconst struct intel_shared_dpll *pll,\n\t\t\t\t\tstruct intel_shared_dpll_state *shared_dpll_state);\nvoid icl_set_active_port_dpll(struct intel_crtc_state *crtc_state,\n\t\t\t      enum icl_port_dpll_id port_dpll_id);\nvoid intel_update_active_dpll(struct intel_atomic_state *state,\n\t\t\t      struct intel_crtc *crtc,\n\t\t\t      struct intel_encoder *encoder);\nint intel_dpll_get_freq(struct drm_i915_private *i915,\n\t\t\tconst struct intel_shared_dpll *pll,\n\t\t\tconst struct intel_dpll_hw_state *pll_state);\nbool intel_dpll_get_hw_state(struct drm_i915_private *i915,\n\t\t\t     struct intel_shared_dpll *pll,\n\t\t\t     struct intel_dpll_hw_state *hw_state);\nvoid intel_enable_shared_dpll(const struct intel_crtc_state *crtc_state);\nvoid intel_disable_shared_dpll(const struct intel_crtc_state *crtc_state);\nvoid intel_shared_dpll_swap_state(struct intel_atomic_state *state);\nvoid intel_shared_dpll_init(struct drm_i915_private *dev_priv);\nvoid intel_dpll_update_ref_clks(struct drm_i915_private *dev_priv);\nvoid intel_dpll_readout_hw_state(struct drm_i915_private *dev_priv);\nvoid intel_dpll_sanitize_state(struct drm_i915_private *dev_priv);\n\nvoid intel_dpll_dump_hw_state(struct drm_i915_private *dev_priv,\n\t\t\t      const struct intel_dpll_hw_state *hw_state);\nenum intel_dpll_id icl_tc_port_to_pll_id(enum tc_port tc_port);\nbool intel_dpll_is_combophy(enum intel_dpll_id id);\n\nvoid intel_shared_dpll_state_verify(struct intel_crtc *crtc,\n\t\t\t\t    struct intel_crtc_state *old_crtc_state,\n\t\t\t\t    struct intel_crtc_state *new_crtc_state);\nvoid intel_shared_dpll_verify_disabled(struct drm_i915_private *i915);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}