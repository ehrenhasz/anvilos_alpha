{
  "module_name": "intel_global_state.h",
  "hash_id": "3379cf68496941814230b580c08fdd5579fc450edf0e0e59daa10de58e381718",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_global_state.h",
  "human_readable_source": " \n \n\n#ifndef __INTEL_GLOBAL_STATE_H__\n#define __INTEL_GLOBAL_STATE_H__\n\n#include <linux/kref.h>\n#include <linux/list.h>\n\nstruct drm_i915_private;\nstruct intel_atomic_state;\nstruct intel_global_obj;\nstruct intel_global_state;\n\nstruct intel_global_state_funcs {\n\tstruct intel_global_state *(*atomic_duplicate_state)(struct intel_global_obj *obj);\n\tvoid (*atomic_destroy_state)(struct intel_global_obj *obj,\n\t\t\t\t     struct intel_global_state *state);\n};\n\nstruct intel_global_obj {\n\tstruct list_head head;\n\tstruct intel_global_state *state;\n\tconst struct intel_global_state_funcs *funcs;\n};\n\n#define intel_for_each_global_obj(obj, dev_priv) \\\n\tlist_for_each_entry(obj, &(dev_priv)->display.global.obj_list, head)\n\n#define for_each_new_global_obj_in_state(__state, obj, new_obj_state, __i) \\\n\tfor ((__i) = 0; \\\n\t     (__i) < (__state)->num_global_objs && \\\n\t\t     ((obj) = (__state)->global_objs[__i].ptr, \\\n\t\t      (new_obj_state) = (__state)->global_objs[__i].new_state, 1); \\\n\t     (__i)++) \\\n\t\tfor_each_if(obj)\n\n#define for_each_old_global_obj_in_state(__state, obj, new_obj_state, __i) \\\n\tfor ((__i) = 0; \\\n\t     (__i) < (__state)->num_global_objs && \\\n\t\t     ((obj) = (__state)->global_objs[__i].ptr, \\\n\t\t      (new_obj_state) = (__state)->global_objs[__i].old_state, 1); \\\n\t     (__i)++) \\\n\t\tfor_each_if(obj)\n\n#define for_each_oldnew_global_obj_in_state(__state, obj, old_obj_state, new_obj_state, __i) \\\n\tfor ((__i) = 0; \\\n\t     (__i) < (__state)->num_global_objs && \\\n\t\t     ((obj) = (__state)->global_objs[__i].ptr, \\\n\t\t      (old_obj_state) = (__state)->global_objs[__i].old_state, \\\n\t\t      (new_obj_state) = (__state)->global_objs[__i].new_state, 1); \\\n\t     (__i)++) \\\n\t\tfor_each_if(obj)\n\nstruct intel_global_state {\n\tstruct intel_global_obj *obj;\n\tstruct intel_atomic_state *state;\n\tstruct kref ref;\n\tbool changed;\n};\n\nstruct __intel_global_objs_state {\n\tstruct intel_global_obj *ptr;\n\tstruct intel_global_state *state, *old_state, *new_state;\n};\n\nvoid intel_atomic_global_obj_init(struct drm_i915_private *dev_priv,\n\t\t\t\t  struct intel_global_obj *obj,\n\t\t\t\t  struct intel_global_state *state,\n\t\t\t\t  const struct intel_global_state_funcs *funcs);\nvoid intel_atomic_global_obj_cleanup(struct drm_i915_private *dev_priv);\n\nstruct intel_global_state *\nintel_atomic_get_global_obj_state(struct intel_atomic_state *state,\n\t\t\t\t  struct intel_global_obj *obj);\nstruct intel_global_state *\nintel_atomic_get_old_global_obj_state(struct intel_atomic_state *state,\n\t\t\t\t      struct intel_global_obj *obj);\nstruct intel_global_state *\nintel_atomic_get_new_global_obj_state(struct intel_atomic_state *state,\n\t\t\t\t      struct intel_global_obj *obj);\n\nvoid intel_atomic_swap_global_state(struct intel_atomic_state *state);\nvoid intel_atomic_clear_global_state(struct intel_atomic_state *state);\nint intel_atomic_lock_global_state(struct intel_global_state *obj_state);\nint intel_atomic_serialize_global_state(struct intel_global_state *obj_state);\n\nbool intel_atomic_global_state_is_serialized(struct intel_atomic_state *state);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}