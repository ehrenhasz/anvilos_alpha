{
  "module_name": "intel_quirks.c",
  "hash_id": "e7252ba12e793b91bb6721b9c3ef2bc7f7055f1c189918bcd88ce735d8acaf02",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_quirks.c",
  "human_readable_source": "\n \n\n#include <linux/dmi.h>\n\n#include \"i915_drv.h\"\n#include \"intel_display_types.h\"\n#include \"intel_quirks.h\"\n\nstatic void intel_set_quirk(struct drm_i915_private *i915, enum intel_quirk_id quirk)\n{\n\ti915->display.quirks.mask |= BIT(quirk);\n}\n\n \nstatic void quirk_ssc_force_disable(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_LVDS_SSC_DISABLE);\n\tdrm_info(&i915->drm, \"applying lvds SSC disable quirk\\n\");\n}\n\n \nstatic void quirk_invert_brightness(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_INVERT_BRIGHTNESS);\n\tdrm_info(&i915->drm, \"applying inverted panel brightness quirk\\n\");\n}\n\n \nstatic void quirk_backlight_present(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_BACKLIGHT_PRESENT);\n\tdrm_info(&i915->drm, \"applying backlight present quirk\\n\");\n}\n\n \nstatic void quirk_increase_t12_delay(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_INCREASE_T12_DELAY);\n\tdrm_info(&i915->drm, \"Applying T12 delay quirk\\n\");\n}\n\n \nstatic void quirk_increase_ddi_disabled_time(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_INCREASE_DDI_DISABLED_TIME);\n\tdrm_info(&i915->drm, \"Applying Increase DDI Disabled quirk\\n\");\n}\n\nstatic void quirk_no_pps_backlight_power_hook(struct drm_i915_private *i915)\n{\n\tintel_set_quirk(i915, QUIRK_NO_PPS_BACKLIGHT_POWER_HOOK);\n\tdrm_info(&i915->drm, \"Applying no pps backlight power quirk\\n\");\n}\n\nstruct intel_quirk {\n\tint device;\n\tint subsystem_vendor;\n\tint subsystem_device;\n\tvoid (*hook)(struct drm_i915_private *i915);\n};\n\n \nstruct intel_dmi_quirk {\n\tvoid (*hook)(struct drm_i915_private *i915);\n\tconst struct dmi_system_id (*dmi_id_list)[];\n};\n\nstatic int intel_dmi_reverse_brightness(const struct dmi_system_id *id)\n{\n\tDRM_INFO(\"Backlight polarity reversed on %s\\n\", id->ident);\n\treturn 1;\n}\n\nstatic int intel_dmi_no_pps_backlight(const struct dmi_system_id *id)\n{\n\tDRM_INFO(\"No pps backlight support on %s\\n\", id->ident);\n\treturn 1;\n}\n\nstatic const struct intel_dmi_quirk intel_dmi_quirks[] = {\n\t{\n\t\t.dmi_id_list = &(const struct dmi_system_id[]) {\n\t\t\t{\n\t\t\t\t.callback = intel_dmi_reverse_brightness,\n\t\t\t\t.ident = \"NCR Corporation\",\n\t\t\t\t.matches = {DMI_MATCH(DMI_SYS_VENDOR, \"NCR Corporation\"),\n\t\t\t\t\t    DMI_MATCH(DMI_PRODUCT_NAME, \"\"),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t.callback = intel_dmi_reverse_brightness,\n\t\t\t\t.ident = \"Thundersoft TST178 tablet\",\n\t\t\t\t \n\t\t\t\t.matches = {DMI_EXACT_MATCH(DMI_BOARD_VENDOR, \"AMI Corporation\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_BOARD_NAME, \"Aptio CRB\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"To be filled by O.E.M.\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_BIOS_DATE, \"04/15/2014\"),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ }   \n\t\t},\n\t\t.hook = quirk_invert_brightness,\n\t},\n\t{\n\t\t.dmi_id_list = &(const struct dmi_system_id[]) {\n\t\t\t{\n\t\t\t\t.callback = intel_dmi_no_pps_backlight,\n\t\t\t\t.ident = \"Google Lillipup sku524294\",\n\t\t\t\t.matches = {DMI_EXACT_MATCH(DMI_BOARD_VENDOR, \"Google\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_BOARD_NAME, \"Lindar\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_PRODUCT_SKU, \"sku524294\"),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t.callback = intel_dmi_no_pps_backlight,\n\t\t\t\t.ident = \"Google Lillipup sku524295\",\n\t\t\t\t.matches = {DMI_EXACT_MATCH(DMI_BOARD_VENDOR, \"Google\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_BOARD_NAME, \"Lindar\"),\n\t\t\t\t\t    DMI_EXACT_MATCH(DMI_PRODUCT_SKU, \"sku524295\"),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ }\n\t\t},\n\t\t.hook = quirk_no_pps_backlight_power_hook,\n\t},\n};\n\nstatic struct intel_quirk intel_quirks[] = {\n\t \n\t{ 0x0046, 0x17aa, 0x3920, quirk_ssc_force_disable },\n\n\t \n\t{ 0x0046, 0x104d, 0x9076, quirk_ssc_force_disable },\n\n\t \n\t{ 0x2a42, 0x1025, 0x0459, quirk_invert_brightness },\n\n\t \n\t{ 0x2a42, 0x1025, 0x0210, quirk_invert_brightness },\n\n\t \n\t{ 0x2a42, 0x1025, 0x0212, quirk_invert_brightness },\n\n\t \n\t{ 0x2a42, 0x1025, 0x034b, quirk_invert_brightness },\n\n\t \n\t{ 0x2a42, 0x1025, 0x0260, quirk_invert_brightness },\n\n\t \n\t{ 0x2a42, 0x1025, 0x048a, quirk_invert_brightness },\n\n\t \n\t{ 0x0a06, 0x1025, 0x0a11, quirk_backlight_present },\n\n\t \n\t{ 0x0a16, 0x1025, 0x0a11, quirk_backlight_present },\n\n\t \n\t{ 0x27a2, 0x8086, 0x7270, quirk_backlight_present },\n\n\t \n\t{ 0x2a02, 0x106b, 0x00a1, quirk_backlight_present },\n\n\t \n\t{ 0x0a06, 0x1179, 0x0a88, quirk_backlight_present },\n\n\t \n\t{ 0x0a06, 0x103c, 0x21ed, quirk_backlight_present },\n\n\t \n\t{ 0x0a06, 0x1028, 0x0a35, quirk_backlight_present },\n\n\t \n\t{ 0x0a16, 0x1028, 0x0a35, quirk_backlight_present },\n\n\t \n\t{ 0x191B, 0x1179, 0xF840, quirk_increase_t12_delay },\n\n\t \n\t{ 0x3185, 0x8086, 0x2072, quirk_increase_ddi_disabled_time },\n\t{ 0x3184, 0x8086, 0x2072, quirk_increase_ddi_disabled_time },\n\t \n\t{ 0x3185, 0x1849, 0x2212, quirk_increase_ddi_disabled_time },\n\t{ 0x3184, 0x1849, 0x2212, quirk_increase_ddi_disabled_time },\n\t \n\t{ 0x3185, 0x1019, 0xa94d, quirk_increase_ddi_disabled_time },\n\t{ 0x3184, 0x1019, 0xa94d, quirk_increase_ddi_disabled_time },\n\t \n\t{ 0x0f31, 0x103c, 0x220f, quirk_invert_brightness },\n};\n\nvoid intel_init_quirks(struct drm_i915_private *i915)\n{\n\tstruct pci_dev *d = to_pci_dev(i915->drm.dev);\n\tint i;\n\n\tfor (i = 0; i < ARRAY_SIZE(intel_quirks); i++) {\n\t\tstruct intel_quirk *q = &intel_quirks[i];\n\n\t\tif (d->device == q->device &&\n\t\t    (d->subsystem_vendor == q->subsystem_vendor ||\n\t\t     q->subsystem_vendor == PCI_ANY_ID) &&\n\t\t    (d->subsystem_device == q->subsystem_device ||\n\t\t     q->subsystem_device == PCI_ANY_ID))\n\t\t\tq->hook(i915);\n\t}\n\tfor (i = 0; i < ARRAY_SIZE(intel_dmi_quirks); i++) {\n\t\tif (dmi_check_system(*intel_dmi_quirks[i].dmi_id_list) != 0)\n\t\t\tintel_dmi_quirks[i].hook(i915);\n\t}\n}\n\nbool intel_has_quirk(struct drm_i915_private *i915, enum intel_quirk_id quirk)\n{\n\treturn i915->display.quirks.mask & BIT(quirk);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}