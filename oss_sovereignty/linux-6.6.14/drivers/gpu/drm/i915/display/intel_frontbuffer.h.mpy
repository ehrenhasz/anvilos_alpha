{
  "module_name": "intel_frontbuffer.h",
  "hash_id": "c3a99ed11a545a1751064533a1ec03b0d3c827d412268aa282193f4c6853b960",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_frontbuffer.h",
  "human_readable_source": " \n\n#ifndef __INTEL_FRONTBUFFER_H__\n#define __INTEL_FRONTBUFFER_H__\n\n#include <linux/atomic.h>\n#include <linux/bits.h>\n#include <linux/kref.h>\n\n#include \"i915_active_types.h\"\n\nstruct drm_i915_private;\n\nenum fb_op_origin {\n\tORIGIN_CPU = 0,\n\tORIGIN_CS,\n\tORIGIN_FLIP,\n\tORIGIN_DIRTYFB,\n\tORIGIN_CURSOR_UPDATE,\n};\n\nstruct intel_frontbuffer {\n\tstruct kref ref;\n\tatomic_t bits;\n\tstruct i915_active write;\n\tstruct drm_i915_gem_object *obj;\n\tstruct rcu_head rcu;\n};\n\n \n#define INTEL_FRONTBUFFER_BITS_PER_PIPE 8\n#define INTEL_FRONTBUFFER(pipe, plane_id) \\\n\tBIT((plane_id) + INTEL_FRONTBUFFER_BITS_PER_PIPE * (pipe));\n#define INTEL_FRONTBUFFER_OVERLAY(pipe) \\\n\tBIT(INTEL_FRONTBUFFER_BITS_PER_PIPE - 1 + INTEL_FRONTBUFFER_BITS_PER_PIPE * (pipe))\n#define INTEL_FRONTBUFFER_ALL_MASK(pipe) \\\n\tGENMASK(INTEL_FRONTBUFFER_BITS_PER_PIPE * ((pipe) + 1) - 1,\t\\\n\t\tINTEL_FRONTBUFFER_BITS_PER_PIPE * (pipe))\n\nvoid intel_frontbuffer_flip_prepare(struct drm_i915_private *i915,\n\t\t\t\t    unsigned frontbuffer_bits);\nvoid intel_frontbuffer_flip_complete(struct drm_i915_private *i915,\n\t\t\t\t     unsigned frontbuffer_bits);\nvoid intel_frontbuffer_flip(struct drm_i915_private *i915,\n\t\t\t    unsigned frontbuffer_bits);\n\nvoid intel_frontbuffer_put(struct intel_frontbuffer *front);\n\nstruct intel_frontbuffer *\nintel_frontbuffer_get(struct drm_i915_gem_object *obj);\n\nvoid __intel_fb_invalidate(struct intel_frontbuffer *front,\n\t\t\t   enum fb_op_origin origin,\n\t\t\t   unsigned int frontbuffer_bits);\n\n \nstatic inline bool intel_frontbuffer_invalidate(struct intel_frontbuffer *front,\n\t\t\t\t\t\tenum fb_op_origin origin)\n{\n\tunsigned int frontbuffer_bits;\n\n\tif (!front)\n\t\treturn false;\n\n\tfrontbuffer_bits = atomic_read(&front->bits);\n\tif (!frontbuffer_bits)\n\t\treturn false;\n\n\t__intel_fb_invalidate(front, origin, frontbuffer_bits);\n\treturn true;\n}\n\nvoid __intel_fb_flush(struct intel_frontbuffer *front,\n\t\t      enum fb_op_origin origin,\n\t\t      unsigned int frontbuffer_bits);\n\n \nstatic inline void intel_frontbuffer_flush(struct intel_frontbuffer *front,\n\t\t\t\t\t   enum fb_op_origin origin)\n{\n\tunsigned int frontbuffer_bits;\n\n\tif (!front)\n\t\treturn;\n\n\tfrontbuffer_bits = atomic_read(&front->bits);\n\tif (!frontbuffer_bits)\n\t\treturn;\n\n\t__intel_fb_flush(front, origin, frontbuffer_bits);\n}\n\nvoid intel_frontbuffer_track(struct intel_frontbuffer *old,\n\t\t\t     struct intel_frontbuffer *new,\n\t\t\t     unsigned int frontbuffer_bits);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}