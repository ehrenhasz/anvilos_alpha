{
  "module_name": "intel_display_power_map.c",
  "hash_id": "5eebc4bff84e7063d7034fc41bded59846a54446ce115a36426e12cf46f25234",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/display/intel_display_power_map.c",
  "human_readable_source": "\n \n\n#include \"i915_drv.h\"\n#include \"i915_reg.h\"\n\n#include \"vlv_sideband_reg.h\"\n\n#include \"intel_display_power_map.h\"\n#include \"intel_display_power_well.h\"\n#include \"intel_display_types.h\"\n\n#define __LIST_INLINE_ELEMS(__elem_type, ...) \\\n\t((__elem_type[]) { __VA_ARGS__ })\n\n#define __LIST(__elems) { \\\n\t.list = __elems, \\\n\t.count = ARRAY_SIZE(__elems), \\\n}\n\n#define I915_PW_DOMAINS(...) \\\n\t(const struct i915_power_domain_list) \\\n\t\t__LIST(__LIST_INLINE_ELEMS(const enum intel_display_power_domain, __VA_ARGS__))\n\n#define I915_DECL_PW_DOMAINS(__name, ...) \\\n\tstatic const struct i915_power_domain_list __name = I915_PW_DOMAINS(__VA_ARGS__)\n\n \n#define I915_PW_DOMAINS_NONE\tNULL\n#define I915_PW_DOMAINS_ALL\t \n\n#define I915_PW_INSTANCES(...) \\\n\t(const struct i915_power_well_instance_list) \\\n\t\t__LIST(__LIST_INLINE_ELEMS(const struct i915_power_well_instance, __VA_ARGS__))\n\n#define I915_PW(_name, _domain_list, ...) \\\n\t{ .name = _name, .domain_list = _domain_list, ## __VA_ARGS__ }\n\n\nstruct i915_power_well_desc_list {\n\tconst struct i915_power_well_desc *list;\n\tu8 count;\n};\n\n#define I915_PW_DESCRIPTORS(x) __LIST(x)\n\n\nI915_DECL_PW_DOMAINS(i9xx_pwdoms_always_on, I915_PW_DOMAINS_ALL);\n\nstatic const struct i915_power_well_desc i9xx_power_wells_always_on[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"always-on\", &i9xx_pwdoms_always_on),\n\t\t),\n\t\t.ops = &i9xx_always_on_power_well_ops,\n\t\t.always_on = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list i9xx_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n};\n\nI915_DECL_PW_DOMAINS(i830_pwdoms_pipes,\n\tPOWER_DOMAIN_PIPE_A,\n\tPOWER_DOMAIN_PIPE_B,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_A,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B,\n\tPOWER_DOMAIN_TRANSCODER_A,\n\tPOWER_DOMAIN_TRANSCODER_B,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc i830_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"pipes\", &i830_pwdoms_pipes),\n\t\t),\n\t\t.ops = &i830_pipes_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list i830_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(i830_power_wells_main),\n};\n\nI915_DECL_PW_DOMAINS(hsw_pwdoms_display,\n\tPOWER_DOMAIN_PIPE_B,\n\tPOWER_DOMAIN_PIPE_C,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_A,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C,\n\tPOWER_DOMAIN_TRANSCODER_A,\n\tPOWER_DOMAIN_TRANSCODER_B,\n\tPOWER_DOMAIN_TRANSCODER_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_D,\n\tPOWER_DOMAIN_PORT_CRT,  \n\tPOWER_DOMAIN_VGA,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUDIO_PLAYBACK,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc hsw_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"display\", &hsw_pwdoms_display,\n\t\t\t\t.hsw.idx = HSW_PW_CTL_IDX_GLOBAL,\n\t\t\t\t.id = HSW_DISP_PW_GLOBAL),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list hsw_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(hsw_power_wells_main),\n};\n\nI915_DECL_PW_DOMAINS(bdw_pwdoms_display,\n\tPOWER_DOMAIN_PIPE_B,\n\tPOWER_DOMAIN_PIPE_C,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C,\n\tPOWER_DOMAIN_TRANSCODER_A,\n\tPOWER_DOMAIN_TRANSCODER_B,\n\tPOWER_DOMAIN_TRANSCODER_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_D,\n\tPOWER_DOMAIN_PORT_CRT,  \n\tPOWER_DOMAIN_VGA,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUDIO_PLAYBACK,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc bdw_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"display\", &bdw_pwdoms_display,\n\t\t\t\t.hsw.idx = HSW_PW_CTL_IDX_GLOBAL,\n\t\t\t\t.id = HSW_DISP_PW_GLOBAL),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B) | BIT(PIPE_C),\n\t},\n};\n\nstatic const struct i915_power_well_desc_list bdw_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(bdw_power_wells_main),\n};\n\nI915_DECL_PW_DOMAINS(vlv_pwdoms_display,\n\tPOWER_DOMAIN_DISPLAY_CORE,\n\tPOWER_DOMAIN_PIPE_A,\n\tPOWER_DOMAIN_PIPE_B,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_A,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B,\n\tPOWER_DOMAIN_TRANSCODER_A,\n\tPOWER_DOMAIN_TRANSCODER_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_PORT_DSI,\n\tPOWER_DOMAIN_PORT_CRT,\n\tPOWER_DOMAIN_VGA,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUDIO_PLAYBACK,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_GMBUS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(vlv_pwdoms_dpio_cmn_bc,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_PORT_CRT,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(vlv_pwdoms_dpio_tx_bc_lanes,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc vlv_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"display\", &vlv_pwdoms_display,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DISP2D,\n\t\t\t\t.id = VLV_DISP_PW_DISP2D),\n\t\t),\n\t\t.ops = &vlv_display_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"dpio-tx-b-01\", &vlv_pwdoms_dpio_tx_bc_lanes,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_TX_B_LANES_01),\n\t\t\tI915_PW(\"dpio-tx-b-23\", &vlv_pwdoms_dpio_tx_bc_lanes,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_TX_B_LANES_23),\n\t\t\tI915_PW(\"dpio-tx-c-01\", &vlv_pwdoms_dpio_tx_bc_lanes,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_TX_C_LANES_01),\n\t\t\tI915_PW(\"dpio-tx-c-23\", &vlv_pwdoms_dpio_tx_bc_lanes,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_TX_C_LANES_23),\n\t\t),\n\t\t.ops = &vlv_dpio_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"dpio-common\", &vlv_pwdoms_dpio_cmn_bc,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_CMN_BC,\n\t\t\t\t.id = VLV_DISP_PW_DPIO_CMN_BC),\n\t\t),\n\t\t.ops = &vlv_dpio_cmn_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list vlv_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(vlv_power_wells_main),\n};\n\nI915_DECL_PW_DOMAINS(chv_pwdoms_display,\n\tPOWER_DOMAIN_DISPLAY_CORE,\n\tPOWER_DOMAIN_PIPE_A,\n\tPOWER_DOMAIN_PIPE_B,\n\tPOWER_DOMAIN_PIPE_C,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_A,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C,\n\tPOWER_DOMAIN_TRANSCODER_A,\n\tPOWER_DOMAIN_TRANSCODER_B,\n\tPOWER_DOMAIN_TRANSCODER_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_PORT_DDI_LANES_D,\n\tPOWER_DOMAIN_PORT_DSI,\n\tPOWER_DOMAIN_VGA,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUDIO_PLAYBACK,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_IO_D,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_AUX_D,\n\tPOWER_DOMAIN_GMBUS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(chv_pwdoms_dpio_cmn_bc,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(chv_pwdoms_dpio_cmn_d,\n\tPOWER_DOMAIN_PORT_DDI_LANES_D,\n\tPOWER_DOMAIN_AUX_IO_D,\n\tPOWER_DOMAIN_AUX_D,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc chv_power_wells_main[] = {\n\t{\n\t\t \n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"display\", &chv_pwdoms_display),\n\t\t),\n\t\t.ops = &chv_pipe_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"dpio-common-bc\", &chv_pwdoms_dpio_cmn_bc,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_CMN_BC,\n\t\t\t\t.id = VLV_DISP_PW_DPIO_CMN_BC),\n\t\t\tI915_PW(\"dpio-common-d\", &chv_pwdoms_dpio_cmn_d,\n\t\t\t\t.vlv.idx = PUNIT_PWGT_IDX_DPIO_CMN_D,\n\t\t\t\t.id = CHV_DISP_PW_DPIO_CMN_D),\n\t\t),\n\t\t.ops = &chv_dpio_cmn_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list chv_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(chv_power_wells_main),\n};\n\n#define SKL_PW_2_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_A, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_D, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_E, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_IO_B, \\\n\tPOWER_DOMAIN_AUX_IO_C, \\\n\tPOWER_DOMAIN_AUX_IO_D, \\\n\tPOWER_DOMAIN_AUX_B, \\\n\tPOWER_DOMAIN_AUX_C, \\\n\tPOWER_DOMAIN_AUX_D\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_pw_2,\n\tSKL_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_dc_off,\n\tSKL_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_GT_IRQ,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_ddi_io_a_e,\n\tPOWER_DOMAIN_PORT_DDI_IO_A,\n\tPOWER_DOMAIN_PORT_DDI_IO_E,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_ddi_io_b,\n\tPOWER_DOMAIN_PORT_DDI_IO_B,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_ddi_io_c,\n\tPOWER_DOMAIN_PORT_DDI_IO_C,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(skl_pwdoms_ddi_io_d,\n\tPOWER_DOMAIN_PORT_DDI_IO_D,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc skl_power_wells_pw_1[] = {\n\t{\n\t\t \n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_1\", I915_PW_DOMAINS_NONE,\n\t\t\t\t.hsw.idx = SKL_PW_CTL_IDX_PW_1,\n\t\t\t\t.id = SKL_DISP_PW_1),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.always_on = true,\n\t\t.has_fuses = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc skl_power_wells_main[] = {\n\t{\n\t\t \n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"MISC_IO\", I915_PW_DOMAINS_NONE,\n\t\t\t\t.hsw.idx = SKL_PW_CTL_IDX_MISC_IO,\n\t\t\t\t.id = SKL_DISP_PW_MISC_IO),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.always_on = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &skl_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &skl_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = SKL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B) | BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DDI_IO_A_E\", &skl_pwdoms_ddi_io_a_e, .hsw.idx = SKL_PW_CTL_IDX_DDI_A_E),\n\t\t\tI915_PW(\"DDI_IO_B\", &skl_pwdoms_ddi_io_b, .hsw.idx = SKL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_C\", &skl_pwdoms_ddi_io_c, .hsw.idx = SKL_PW_CTL_IDX_DDI_C),\n\t\t\tI915_PW(\"DDI_IO_D\", &skl_pwdoms_ddi_io_d, .hsw.idx = SKL_PW_CTL_IDX_DDI_D),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list skl_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(skl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(skl_power_wells_main),\n};\n\n#define BXT_PW_2_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_A, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_C, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_IO_B, \\\n\tPOWER_DOMAIN_AUX_IO_C, \\\n\tPOWER_DOMAIN_AUX_B, \\\n\tPOWER_DOMAIN_AUX_C\n\nI915_DECL_PW_DOMAINS(bxt_pwdoms_pw_2,\n\tBXT_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(bxt_pwdoms_dc_off,\n\tBXT_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_GMBUS,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_GT_IRQ,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(bxt_pwdoms_dpio_cmn_a,\n\tPOWER_DOMAIN_PORT_DDI_LANES_A,\n\tPOWER_DOMAIN_AUX_IO_A,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(bxt_pwdoms_dpio_cmn_bc,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc bxt_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &bxt_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &bxt_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = SKL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B) | BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"dpio-common-a\", &bxt_pwdoms_dpio_cmn_a,\n\t\t\t\t.bxt.phy = DPIO_PHY1,\n\t\t\t\t.id = BXT_DISP_PW_DPIO_CMN_A),\n\t\t\tI915_PW(\"dpio-common-bc\", &bxt_pwdoms_dpio_cmn_bc,\n\t\t\t\t.bxt.phy = DPIO_PHY0,\n\t\t\t\t.id = VLV_DISP_PW_DPIO_CMN_BC),\n\t\t),\n\t\t.ops = &bxt_dpio_cmn_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list bxt_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(skl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(bxt_power_wells_main),\n};\n\n#define GLK_PW_2_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_A, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_C, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_IO_B, \\\n\tPOWER_DOMAIN_AUX_IO_C, \\\n\tPOWER_DOMAIN_AUX_B, \\\n\tPOWER_DOMAIN_AUX_C\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_pw_2,\n\tGLK_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_dc_off,\n\tGLK_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_GMBUS,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_GT_IRQ,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_ddi_io_a,\tPOWER_DOMAIN_PORT_DDI_IO_A);\nI915_DECL_PW_DOMAINS(glk_pwdoms_ddi_io_b,\tPOWER_DOMAIN_PORT_DDI_IO_B);\nI915_DECL_PW_DOMAINS(glk_pwdoms_ddi_io_c,\tPOWER_DOMAIN_PORT_DDI_IO_C);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_dpio_cmn_a,\n\tPOWER_DOMAIN_PORT_DDI_LANES_A,\n\tPOWER_DOMAIN_AUX_IO_A,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_dpio_cmn_b,\n\tPOWER_DOMAIN_PORT_DDI_LANES_B,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_dpio_cmn_c,\n\tPOWER_DOMAIN_PORT_DDI_LANES_C,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_aux_a,\n\tPOWER_DOMAIN_AUX_IO_A,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_aux_b,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(glk_pwdoms_aux_c,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc glk_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &glk_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &glk_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = SKL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B) | BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"dpio-common-a\", &glk_pwdoms_dpio_cmn_a,\n\t\t\t\t.bxt.phy = DPIO_PHY1,\n\t\t\t\t.id = BXT_DISP_PW_DPIO_CMN_A),\n\t\t\tI915_PW(\"dpio-common-b\", &glk_pwdoms_dpio_cmn_b,\n\t\t\t\t.bxt.phy = DPIO_PHY0,\n\t\t\t\t.id = VLV_DISP_PW_DPIO_CMN_BC),\n\t\t\tI915_PW(\"dpio-common-c\", &glk_pwdoms_dpio_cmn_c,\n\t\t\t\t.bxt.phy = DPIO_PHY2,\n\t\t\t\t.id = GLK_DISP_PW_DPIO_CMN_C),\n\t\t),\n\t\t.ops = &bxt_dpio_cmn_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &glk_pwdoms_aux_a, .hsw.idx = GLK_PW_CTL_IDX_AUX_A),\n\t\t\tI915_PW(\"AUX_B\", &glk_pwdoms_aux_b, .hsw.idx = GLK_PW_CTL_IDX_AUX_B),\n\t\t\tI915_PW(\"AUX_C\", &glk_pwdoms_aux_c, .hsw.idx = GLK_PW_CTL_IDX_AUX_C),\n\t\t\tI915_PW(\"DDI_IO_A\", &glk_pwdoms_ddi_io_a, .hsw.idx = GLK_PW_CTL_IDX_DDI_A),\n\t\t\tI915_PW(\"DDI_IO_B\", &glk_pwdoms_ddi_io_b, .hsw.idx = SKL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_C\", &glk_pwdoms_ddi_io_c, .hsw.idx = SKL_PW_CTL_IDX_DDI_C),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list glk_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(skl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(glk_power_wells_main),\n};\n\n \n#define ICL_PW_4_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C\n\nI915_DECL_PW_DOMAINS(icl_pwdoms_pw_4,\n\tICL_PW_4_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\t \n\n#define ICL_PW_3_POWER_DOMAINS \\\n\tICL_PW_4_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_A, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_D, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_E, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_F, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_IO_B, \\\n\tPOWER_DOMAIN_AUX_IO_C, \\\n\tPOWER_DOMAIN_AUX_IO_D, \\\n\tPOWER_DOMAIN_AUX_IO_E, \\\n\tPOWER_DOMAIN_AUX_IO_F, \\\n\tPOWER_DOMAIN_AUX_B, \\\n\tPOWER_DOMAIN_AUX_C, \\\n\tPOWER_DOMAIN_AUX_D, \\\n\tPOWER_DOMAIN_AUX_E, \\\n\tPOWER_DOMAIN_AUX_F, \\\n\tPOWER_DOMAIN_AUX_TBT1, \\\n\tPOWER_DOMAIN_AUX_TBT2, \\\n\tPOWER_DOMAIN_AUX_TBT3, \\\n\tPOWER_DOMAIN_AUX_TBT4\n\nI915_DECL_PW_DOMAINS(icl_pwdoms_pw_3,\n\tICL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\t \n\n#define ICL_PW_2_POWER_DOMAINS \\\n\tICL_PW_3_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_TRANSCODER_VDSC_PW2\n\nI915_DECL_PW_DOMAINS(icl_pwdoms_pw_2,\n\tICL_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\t \n\nI915_DECL_PW_DOMAINS(icl_pwdoms_dc_off,\n\tICL_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(icl_pwdoms_ddi_io_d,\tPOWER_DOMAIN_PORT_DDI_IO_D);\nI915_DECL_PW_DOMAINS(icl_pwdoms_ddi_io_e,\tPOWER_DOMAIN_PORT_DDI_IO_E);\nI915_DECL_PW_DOMAINS(icl_pwdoms_ddi_io_f,\tPOWER_DOMAIN_PORT_DDI_IO_F);\n\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_a,\n\tPOWER_DOMAIN_AUX_IO_A,\n\tPOWER_DOMAIN_AUX_A);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_b,\n\tPOWER_DOMAIN_AUX_IO_B,\n\tPOWER_DOMAIN_AUX_B);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_c,\n\tPOWER_DOMAIN_AUX_IO_C,\n\tPOWER_DOMAIN_AUX_C);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_d,\n\tPOWER_DOMAIN_AUX_IO_D,\n\tPOWER_DOMAIN_AUX_D);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_e,\n\tPOWER_DOMAIN_AUX_IO_E,\n\tPOWER_DOMAIN_AUX_E);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_f,\n\tPOWER_DOMAIN_AUX_IO_F,\n\tPOWER_DOMAIN_AUX_F);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_tbt1,\tPOWER_DOMAIN_AUX_TBT1);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_tbt2,\tPOWER_DOMAIN_AUX_TBT2);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_tbt3,\tPOWER_DOMAIN_AUX_TBT3);\nI915_DECL_PW_DOMAINS(icl_pwdoms_aux_tbt4,\tPOWER_DOMAIN_AUX_TBT4);\n\nstatic const struct i915_power_well_desc icl_power_wells_pw_1[] = {\n\t{\n\t\t \n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_1\", I915_PW_DOMAINS_NONE,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_1,\n\t\t\t\t.id = SKL_DISP_PW_1),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.always_on = true,\n\t\t.has_fuses = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc icl_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &icl_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &icl_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_3\", &icl_pwdoms_pw_3,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_3,\n\t\t\t\t.id = ICL_DISP_PW_3),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DDI_IO_A\", &glk_pwdoms_ddi_io_a, .hsw.idx = ICL_PW_CTL_IDX_DDI_A),\n\t\t\tI915_PW(\"DDI_IO_B\", &glk_pwdoms_ddi_io_b, .hsw.idx = ICL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_C\", &glk_pwdoms_ddi_io_c, .hsw.idx = ICL_PW_CTL_IDX_DDI_C),\n\t\t\tI915_PW(\"DDI_IO_D\", &icl_pwdoms_ddi_io_d, .hsw.idx = ICL_PW_CTL_IDX_DDI_D),\n\t\t\tI915_PW(\"DDI_IO_E\", &icl_pwdoms_ddi_io_e, .hsw.idx = ICL_PW_CTL_IDX_DDI_E),\n\t\t\tI915_PW(\"DDI_IO_F\", &icl_pwdoms_ddi_io_f, .hsw.idx = ICL_PW_CTL_IDX_DDI_F),\n\t\t),\n\t\t.ops = &icl_ddi_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &icl_pwdoms_aux_a, .hsw.idx = ICL_PW_CTL_IDX_AUX_A),\n\t\t\tI915_PW(\"AUX_B\", &icl_pwdoms_aux_b, .hsw.idx = ICL_PW_CTL_IDX_AUX_B),\n\t\t\tI915_PW(\"AUX_C\", &icl_pwdoms_aux_c, .hsw.idx = ICL_PW_CTL_IDX_AUX_C),\n\t\t\tI915_PW(\"AUX_D\", &icl_pwdoms_aux_d, .hsw.idx = ICL_PW_CTL_IDX_AUX_D),\n\t\t\tI915_PW(\"AUX_E\", &icl_pwdoms_aux_e, .hsw.idx = ICL_PW_CTL_IDX_AUX_E),\n\t\t\tI915_PW(\"AUX_F\", &icl_pwdoms_aux_f, .hsw.idx = ICL_PW_CTL_IDX_AUX_F),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_TBT1\", &icl_pwdoms_aux_tbt1, .hsw.idx = ICL_PW_CTL_IDX_AUX_TBT1),\n\t\t\tI915_PW(\"AUX_TBT2\", &icl_pwdoms_aux_tbt2, .hsw.idx = ICL_PW_CTL_IDX_AUX_TBT2),\n\t\t\tI915_PW(\"AUX_TBT3\", &icl_pwdoms_aux_tbt3, .hsw.idx = ICL_PW_CTL_IDX_AUX_TBT3),\n\t\t\tI915_PW(\"AUX_TBT4\", &icl_pwdoms_aux_tbt4, .hsw.idx = ICL_PW_CTL_IDX_AUX_TBT4),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t\t.is_tc_tbt = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_4\", &icl_pwdoms_pw_4,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_4),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list icl_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(icl_power_wells_main),\n};\n\n#define TGL_PW_5_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_D, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_D, \\\n\tPOWER_DOMAIN_TRANSCODER_D\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_pw_5,\n\tTGL_PW_5_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n#define TGL_PW_4_POWER_DOMAINS \\\n\tTGL_PW_5_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_C\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_pw_4,\n\tTGL_PW_4_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n#define TGL_PW_3_POWER_DOMAINS \\\n\tTGL_PW_4_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC1, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC2, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC3, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC4, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC5, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC6, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_USBC1, \\\n\tPOWER_DOMAIN_AUX_USBC2, \\\n\tPOWER_DOMAIN_AUX_USBC3, \\\n\tPOWER_DOMAIN_AUX_USBC4, \\\n\tPOWER_DOMAIN_AUX_USBC5, \\\n\tPOWER_DOMAIN_AUX_USBC6, \\\n\tPOWER_DOMAIN_AUX_TBT1, \\\n\tPOWER_DOMAIN_AUX_TBT2, \\\n\tPOWER_DOMAIN_AUX_TBT3, \\\n\tPOWER_DOMAIN_AUX_TBT4, \\\n\tPOWER_DOMAIN_AUX_TBT5, \\\n\tPOWER_DOMAIN_AUX_TBT6\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_pw_3,\n\tTGL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_pw_2,\n\tTGL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_TRANSCODER_VDSC_PW2,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_dc_off,\n\tTGL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_AUX_C,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc1,\tPOWER_DOMAIN_PORT_DDI_IO_TC1);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc2,\tPOWER_DOMAIN_PORT_DDI_IO_TC2);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc3,\tPOWER_DOMAIN_PORT_DDI_IO_TC3);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc4,\tPOWER_DOMAIN_PORT_DDI_IO_TC4);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc5,\tPOWER_DOMAIN_PORT_DDI_IO_TC5);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_ddi_io_tc6,\tPOWER_DOMAIN_PORT_DDI_IO_TC6);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc1,\tPOWER_DOMAIN_AUX_USBC1);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc2,\tPOWER_DOMAIN_AUX_USBC2);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc3,\tPOWER_DOMAIN_AUX_USBC3);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc4,\tPOWER_DOMAIN_AUX_USBC4);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc5,\tPOWER_DOMAIN_AUX_USBC5);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_usbc6,\tPOWER_DOMAIN_AUX_USBC6);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_tbt5,\tPOWER_DOMAIN_AUX_TBT5);\nI915_DECL_PW_DOMAINS(tgl_pwdoms_aux_tbt6,\tPOWER_DOMAIN_AUX_TBT6);\n\nI915_DECL_PW_DOMAINS(tgl_pwdoms_tc_cold_off,\n\tPOWER_DOMAIN_AUX_USBC1,\n\tPOWER_DOMAIN_AUX_USBC2,\n\tPOWER_DOMAIN_AUX_USBC3,\n\tPOWER_DOMAIN_AUX_USBC4,\n\tPOWER_DOMAIN_AUX_USBC5,\n\tPOWER_DOMAIN_AUX_USBC6,\n\tPOWER_DOMAIN_AUX_TBT1,\n\tPOWER_DOMAIN_AUX_TBT2,\n\tPOWER_DOMAIN_AUX_TBT3,\n\tPOWER_DOMAIN_AUX_TBT4,\n\tPOWER_DOMAIN_AUX_TBT5,\n\tPOWER_DOMAIN_AUX_TBT6,\n\tPOWER_DOMAIN_TC_COLD_OFF);\n\nstatic const struct i915_power_well_desc tgl_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &tgl_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &tgl_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_3\", &tgl_pwdoms_pw_3,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_3,\n\t\t\t\t.id = ICL_DISP_PW_3),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DDI_IO_A\", &glk_pwdoms_ddi_io_a, .hsw.idx = ICL_PW_CTL_IDX_DDI_A),\n\t\t\tI915_PW(\"DDI_IO_B\", &glk_pwdoms_ddi_io_b, .hsw.idx = ICL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_C\", &glk_pwdoms_ddi_io_c, .hsw.idx = ICL_PW_CTL_IDX_DDI_C),\n\t\t\tI915_PW(\"DDI_IO_TC1\", &tgl_pwdoms_ddi_io_tc1, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC1),\n\t\t\tI915_PW(\"DDI_IO_TC2\", &tgl_pwdoms_ddi_io_tc2, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC2),\n\t\t\tI915_PW(\"DDI_IO_TC3\", &tgl_pwdoms_ddi_io_tc3, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC3),\n\t\t\tI915_PW(\"DDI_IO_TC4\", &tgl_pwdoms_ddi_io_tc4, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC4),\n\t\t\tI915_PW(\"DDI_IO_TC5\", &tgl_pwdoms_ddi_io_tc5, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC5),\n\t\t\tI915_PW(\"DDI_IO_TC6\", &tgl_pwdoms_ddi_io_tc6, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC6),\n\t\t),\n\t\t.ops = &icl_ddi_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_4\", &tgl_pwdoms_pw_4,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_4),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_5\", &tgl_pwdoms_pw_5,\n\t\t\t\t.hsw.idx = TGL_PW_CTL_IDX_PW_5),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t\t.irq_pipe_mask = BIT(PIPE_D),\n\t},\n};\n\nstatic const struct i915_power_well_desc tgl_power_wells_tc_cold_off[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"TC_cold_off\", &tgl_pwdoms_tc_cold_off,\n\t\t\t\t.id = TGL_DISP_PW_TC_COLD_OFF),\n\t\t),\n\t\t.ops = &tgl_tc_cold_off_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc tgl_power_wells_aux[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &icl_pwdoms_aux_a, .hsw.idx = ICL_PW_CTL_IDX_AUX_A),\n\t\t\tI915_PW(\"AUX_B\", &icl_pwdoms_aux_b, .hsw.idx = ICL_PW_CTL_IDX_AUX_B),\n\t\t\tI915_PW(\"AUX_C\", &icl_pwdoms_aux_c, .hsw.idx = ICL_PW_CTL_IDX_AUX_C),\n\t\t\tI915_PW(\"AUX_USBC1\", &tgl_pwdoms_aux_usbc1, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC1),\n\t\t\tI915_PW(\"AUX_USBC2\", &tgl_pwdoms_aux_usbc2, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC2),\n\t\t\tI915_PW(\"AUX_USBC3\", &tgl_pwdoms_aux_usbc3, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC3),\n\t\t\tI915_PW(\"AUX_USBC4\", &tgl_pwdoms_aux_usbc4, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC4),\n\t\t\tI915_PW(\"AUX_USBC5\", &tgl_pwdoms_aux_usbc5, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC5),\n\t\t\tI915_PW(\"AUX_USBC6\", &tgl_pwdoms_aux_usbc6, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC6),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_TBT1\", &icl_pwdoms_aux_tbt1, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT1),\n\t\t\tI915_PW(\"AUX_TBT2\", &icl_pwdoms_aux_tbt2, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT2),\n\t\t\tI915_PW(\"AUX_TBT3\", &icl_pwdoms_aux_tbt3, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT3),\n\t\t\tI915_PW(\"AUX_TBT4\", &icl_pwdoms_aux_tbt4, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT4),\n\t\t\tI915_PW(\"AUX_TBT5\", &tgl_pwdoms_aux_tbt5, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT5),\n\t\t\tI915_PW(\"AUX_TBT6\", &tgl_pwdoms_aux_tbt6, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT6),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t\t.is_tc_tbt = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list tgl_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(tgl_power_wells_main),\n\tI915_PW_DESCRIPTORS(tgl_power_wells_tc_cold_off),\n\tI915_PW_DESCRIPTORS(tgl_power_wells_aux),\n};\n\nstatic const struct i915_power_well_desc_list adls_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(tgl_power_wells_main),\n\tI915_PW_DESCRIPTORS(tgl_power_wells_aux),\n};\n\n#define RKL_PW_4_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_C\n\nI915_DECL_PW_DOMAINS(rkl_pwdoms_pw_4,\n\tRKL_PW_4_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n#define RKL_PW_3_POWER_DOMAINS \\\n\tRKL_PW_4_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC1, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC2, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_MMIO, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_USBC1, \\\n\tPOWER_DOMAIN_AUX_USBC2\n\nI915_DECL_PW_DOMAINS(rkl_pwdoms_pw_3,\n\tRKL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n \n\nI915_DECL_PW_DOMAINS(rkl_pwdoms_dc_off,\n\tRKL_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc rkl_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &rkl_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_3\", &rkl_pwdoms_pw_3,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_3,\n\t\t\t\t.id = ICL_DISP_PW_3),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_vga = true,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_4\", &rkl_pwdoms_pw_4,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_4),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t},\n};\n\nstatic const struct i915_power_well_desc rkl_power_wells_ddi_aux[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DDI_IO_A\", &glk_pwdoms_ddi_io_a, .hsw.idx = ICL_PW_CTL_IDX_DDI_A),\n\t\t\tI915_PW(\"DDI_IO_B\", &glk_pwdoms_ddi_io_b, .hsw.idx = ICL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_TC1\", &tgl_pwdoms_ddi_io_tc1, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC1),\n\t\t\tI915_PW(\"DDI_IO_TC2\", &tgl_pwdoms_ddi_io_tc2, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC2),\n\t\t),\n\t\t.ops = &icl_ddi_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &icl_pwdoms_aux_a, .hsw.idx = ICL_PW_CTL_IDX_AUX_A),\n\t\t\tI915_PW(\"AUX_B\", &icl_pwdoms_aux_b, .hsw.idx = ICL_PW_CTL_IDX_AUX_B),\n\t\t\tI915_PW(\"AUX_USBC1\", &tgl_pwdoms_aux_usbc1, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC1),\n\t\t\tI915_PW(\"AUX_USBC2\", &tgl_pwdoms_aux_usbc2, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC2),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list rkl_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(rkl_power_wells_main),\n\tI915_PW_DESCRIPTORS(rkl_power_wells_ddi_aux),\n};\n\n \n#define DG1_PW_3_POWER_DOMAINS \\\n\tTGL_PW_4_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_B, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC1, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC2, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_USBC1, \\\n\tPOWER_DOMAIN_AUX_USBC2\n\nI915_DECL_PW_DOMAINS(dg1_pwdoms_pw_3,\n\tDG1_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(dg1_pwdoms_dc_off,\n\tDG1_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(dg1_pwdoms_pw_2,\n\tDG1_PW_3_POWER_DOMAINS,\n\tPOWER_DOMAIN_TRANSCODER_VDSC_PW2,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc dg1_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &dg1_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &dg1_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_3\", &dg1_pwdoms_pw_3,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_3,\n\t\t\t\t.id = ICL_DISP_PW_3),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_vga = true,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_4\", &tgl_pwdoms_pw_4,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_4),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_5\", &tgl_pwdoms_pw_5,\n\t\t\t\t.hsw.idx = TGL_PW_CTL_IDX_PW_5),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_fuses = true,\n\t\t.irq_pipe_mask = BIT(PIPE_D),\n\t},\n};\n\nstatic const struct i915_power_well_desc_list dg1_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(dg1_power_wells_main),\n\tI915_PW_DESCRIPTORS(rkl_power_wells_ddi_aux),\n};\n\n \n\n#define XELPD_PW_D_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_D, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_D, \\\n\tPOWER_DOMAIN_TRANSCODER_D\n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_pw_d,\n\tXELPD_PW_D_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n#define XELPD_PW_C_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_C, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_C, \\\n\tPOWER_DOMAIN_TRANSCODER_C\n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_pw_c,\n\tXELPD_PW_C_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n#define XELPD_PW_B_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PIPE_B, \\\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_B, \\\n\tPOWER_DOMAIN_TRANSCODER_B\n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_pw_b,\n\tXELPD_PW_B_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_pw_a,\n\tPOWER_DOMAIN_PIPE_A,\n\tPOWER_DOMAIN_PIPE_PANEL_FITTER_A,\n\tPOWER_DOMAIN_INIT);\n\n#define XELPD_DC_OFF_PORT_POWER_DOMAINS \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_C, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_D, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_E, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC1, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC2, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC3, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC4, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_AUX_IO_C, \\\n\tPOWER_DOMAIN_AUX_IO_D, \\\n\tPOWER_DOMAIN_AUX_IO_E, \\\n\tPOWER_DOMAIN_AUX_C, \\\n\tPOWER_DOMAIN_AUX_D, \\\n\tPOWER_DOMAIN_AUX_E, \\\n\tPOWER_DOMAIN_AUX_USBC1, \\\n\tPOWER_DOMAIN_AUX_USBC2, \\\n\tPOWER_DOMAIN_AUX_USBC3, \\\n\tPOWER_DOMAIN_AUX_USBC4, \\\n\tPOWER_DOMAIN_AUX_TBT1, \\\n\tPOWER_DOMAIN_AUX_TBT2, \\\n\tPOWER_DOMAIN_AUX_TBT3, \\\n\tPOWER_DOMAIN_AUX_TBT4\n\n#define XELPD_PW_2_POWER_DOMAINS \\\n\tXELPD_PW_B_POWER_DOMAINS, \\\n\tXELPD_PW_C_POWER_DOMAINS, \\\n\tXELPD_PW_D_POWER_DOMAINS, \\\n\tXELPD_DC_OFF_PORT_POWER_DOMAINS\n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_pw_2,\n\tXELPD_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\n \n\nI915_DECL_PW_DOMAINS(xelpd_pwdoms_dc_off,\n\tXELPD_DC_OFF_PORT_POWER_DOMAINS,\n\tXELPD_PW_C_POWER_DOMAINS,\n\tXELPD_PW_D_POWER_DOMAINS,\n\tPOWER_DOMAIN_PORT_DSI,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc xelpd_power_wells_dc_off[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &xelpd_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}\n};\n\nstatic const struct i915_power_well_desc xelpd_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &xelpd_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_A\", &xelpd_pwdoms_pw_a,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_A),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_A),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_B\", &xelpd_pwdoms_pw_b,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_B),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_C\", &xelpd_pwdoms_pw_c,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_C),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_D\", &xelpd_pwdoms_pw_d,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_D),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_D),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DDI_IO_A\", &glk_pwdoms_ddi_io_a, .hsw.idx = ICL_PW_CTL_IDX_DDI_A),\n\t\t\tI915_PW(\"DDI_IO_B\", &glk_pwdoms_ddi_io_b, .hsw.idx = ICL_PW_CTL_IDX_DDI_B),\n\t\t\tI915_PW(\"DDI_IO_C\", &glk_pwdoms_ddi_io_c, .hsw.idx = ICL_PW_CTL_IDX_DDI_C),\n\t\t\tI915_PW(\"DDI_IO_D\", &icl_pwdoms_ddi_io_d, .hsw.idx = XELPD_PW_CTL_IDX_DDI_D),\n\t\t\tI915_PW(\"DDI_IO_E\", &icl_pwdoms_ddi_io_e, .hsw.idx = XELPD_PW_CTL_IDX_DDI_E),\n\t\t\tI915_PW(\"DDI_IO_TC1\", &tgl_pwdoms_ddi_io_tc1, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC1),\n\t\t\tI915_PW(\"DDI_IO_TC2\", &tgl_pwdoms_ddi_io_tc2, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC2),\n\t\t\tI915_PW(\"DDI_IO_TC3\", &tgl_pwdoms_ddi_io_tc3, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC3),\n\t\t\tI915_PW(\"DDI_IO_TC4\", &tgl_pwdoms_ddi_io_tc4, .hsw.idx = TGL_PW_CTL_IDX_DDI_TC4),\n\t\t),\n\t\t.ops = &icl_ddi_power_well_ops,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &icl_pwdoms_aux_a, .hsw.idx = ICL_PW_CTL_IDX_AUX_A),\n\t\t\tI915_PW(\"AUX_B\", &icl_pwdoms_aux_b, .hsw.idx = ICL_PW_CTL_IDX_AUX_B),\n\t\t\tI915_PW(\"AUX_C\", &icl_pwdoms_aux_c, .hsw.idx = ICL_PW_CTL_IDX_AUX_C),\n\t\t\tI915_PW(\"AUX_D\", &icl_pwdoms_aux_d, .hsw.idx = XELPD_PW_CTL_IDX_AUX_D),\n\t\t\tI915_PW(\"AUX_E\", &icl_pwdoms_aux_e, .hsw.idx = XELPD_PW_CTL_IDX_AUX_E),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t\t.fixed_enable_delay = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_USBC1\", &tgl_pwdoms_aux_usbc1, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC1),\n\t\t\tI915_PW(\"AUX_USBC2\", &tgl_pwdoms_aux_usbc2, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC2),\n\t\t\tI915_PW(\"AUX_USBC3\", &tgl_pwdoms_aux_usbc3, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC3),\n\t\t\tI915_PW(\"AUX_USBC4\", &tgl_pwdoms_aux_usbc4, .hsw.idx = TGL_PW_CTL_IDX_AUX_TC4),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t\t.fixed_enable_delay = true,\n\t\t \n\t\t.enable_timeout = 500,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_TBT1\", &icl_pwdoms_aux_tbt1, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT1),\n\t\t\tI915_PW(\"AUX_TBT2\", &icl_pwdoms_aux_tbt2, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT2),\n\t\t\tI915_PW(\"AUX_TBT3\", &icl_pwdoms_aux_tbt3, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT3),\n\t\t\tI915_PW(\"AUX_TBT4\", &icl_pwdoms_aux_tbt4, .hsw.idx = TGL_PW_CTL_IDX_AUX_TBT4),\n\t\t),\n\t\t.ops = &icl_aux_power_well_ops,\n\t\t.is_tc_tbt = true,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list xelpd_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(xelpd_power_wells_dc_off),\n\tI915_PW_DESCRIPTORS(xelpd_power_wells_main),\n};\n\nI915_DECL_PW_DOMAINS(xehpd_pwdoms_dc_off,\n\tXELPD_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_PORT_DSI,\n\tPOWER_DOMAIN_AUDIO_MMIO,\n\tPOWER_DOMAIN_AUX_A,\n\tPOWER_DOMAIN_AUX_B,\n\tPOWER_DOMAIN_MODESET,\n\tPOWER_DOMAIN_DC_OFF,\n\tPOWER_DOMAIN_INIT);\n\nstatic const struct i915_power_well_desc xehpd_power_wells_dc_off[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"DC_off\", &xehpd_pwdoms_dc_off,\n\t\t\t\t.id = SKL_DISP_DC_OFF),\n\t\t),\n\t\t.ops = &gen9_dc_off_power_well_ops,\n\t}\n};\n\nstatic const struct i915_power_well_desc_list xehpd_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(xehpd_power_wells_dc_off),\n\tI915_PW_DESCRIPTORS(xelpd_power_wells_main),\n};\n\n \n#define XELPDP_PW_2_POWER_DOMAINS \\\n\tXELPD_PW_B_POWER_DOMAINS, \\\n\tXELPD_PW_C_POWER_DOMAINS, \\\n\tXELPD_PW_D_POWER_DOMAINS, \\\n\tPOWER_DOMAIN_AUDIO_PLAYBACK, \\\n\tPOWER_DOMAIN_VGA, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC1, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC2, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC3, \\\n\tPOWER_DOMAIN_PORT_DDI_LANES_TC4\n\nI915_DECL_PW_DOMAINS(xelpdp_pwdoms_pw_2,\n\tXELPDP_PW_2_POWER_DOMAINS,\n\tPOWER_DOMAIN_INIT);\n\nI915_DECL_PW_DOMAINS(xelpdp_pwdoms_aux_tc1,\n\tPOWER_DOMAIN_AUX_USBC1,\n\tPOWER_DOMAIN_AUX_TBT1);\n\nI915_DECL_PW_DOMAINS(xelpdp_pwdoms_aux_tc2,\n\tPOWER_DOMAIN_AUX_USBC2,\n\tPOWER_DOMAIN_AUX_TBT2);\n\nI915_DECL_PW_DOMAINS(xelpdp_pwdoms_aux_tc3,\n\tPOWER_DOMAIN_AUX_USBC3,\n\tPOWER_DOMAIN_AUX_TBT3);\n\nI915_DECL_PW_DOMAINS(xelpdp_pwdoms_aux_tc4,\n\tPOWER_DOMAIN_AUX_USBC4,\n\tPOWER_DOMAIN_AUX_TBT4);\n\nstatic const struct i915_power_well_desc xelpdp_power_wells_main[] = {\n\t{\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_2\", &xelpdp_pwdoms_pw_2,\n\t\t\t\t.hsw.idx = ICL_PW_CTL_IDX_PW_2,\n\t\t\t\t.id = SKL_DISP_PW_2),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.has_vga = true,\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_A\", &xelpd_pwdoms_pw_a,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_A),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_A),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_B\", &xelpd_pwdoms_pw_b,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_B),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_B),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_C\", &xelpd_pwdoms_pw_c,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_C),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_C),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"PW_D\", &xelpd_pwdoms_pw_d,\n\t\t\t\t.hsw.idx = XELPD_PW_CTL_IDX_PW_D),\n\t\t),\n\t\t.ops = &hsw_power_well_ops,\n\t\t.irq_pipe_mask = BIT(PIPE_D),\n\t\t.has_fuses = true,\n\t}, {\n\t\t.instances = &I915_PW_INSTANCES(\n\t\t\tI915_PW(\"AUX_A\", &icl_pwdoms_aux_a, .xelpdp.aux_ch = AUX_CH_A),\n\t\t\tI915_PW(\"AUX_B\", &icl_pwdoms_aux_b, .xelpdp.aux_ch = AUX_CH_B),\n\t\t\tI915_PW(\"AUX_TC1\", &xelpdp_pwdoms_aux_tc1, .xelpdp.aux_ch = AUX_CH_USBC1),\n\t\t\tI915_PW(\"AUX_TC2\", &xelpdp_pwdoms_aux_tc2, .xelpdp.aux_ch = AUX_CH_USBC2),\n\t\t\tI915_PW(\"AUX_TC3\", &xelpdp_pwdoms_aux_tc3, .xelpdp.aux_ch = AUX_CH_USBC3),\n\t\t\tI915_PW(\"AUX_TC4\", &xelpdp_pwdoms_aux_tc4, .xelpdp.aux_ch = AUX_CH_USBC4),\n\t\t),\n\t\t.ops = &xelpdp_aux_power_well_ops,\n\t},\n};\n\nstatic const struct i915_power_well_desc_list xelpdp_power_wells[] = {\n\tI915_PW_DESCRIPTORS(i9xx_power_wells_always_on),\n\tI915_PW_DESCRIPTORS(icl_power_wells_pw_1),\n\tI915_PW_DESCRIPTORS(xelpd_power_wells_dc_off),\n\tI915_PW_DESCRIPTORS(xelpdp_power_wells_main),\n};\n\nstatic void init_power_well_domains(const struct i915_power_well_instance *inst,\n\t\t\t\t    struct i915_power_well *power_well)\n{\n\tint j;\n\n\tif (!inst->domain_list)\n\t\treturn;\n\n\tif (inst->domain_list->count == 0) {\n\t\tbitmap_fill(power_well->domains.bits, POWER_DOMAIN_NUM);\n\n\t\treturn;\n\t}\n\n\tfor (j = 0; j < inst->domain_list->count; j++)\n\t\tset_bit(inst->domain_list->list[j], power_well->domains.bits);\n}\n\n#define for_each_power_well_instance_in_desc_list(_desc_list, _desc_count, _desc, _inst) \\\n\tfor ((_desc) = (_desc_list); (_desc) - (_desc_list) < (_desc_count); (_desc)++) \\\n\t\tfor ((_inst) = (_desc)->instances->list; \\\n\t\t     (_inst) - (_desc)->instances->list < (_desc)->instances->count; \\\n\t\t     (_inst)++)\n\n#define for_each_power_well_instance(_desc_list, _desc_count, _descs, _desc, _inst) \\\n\tfor ((_descs) = (_desc_list); \\\n\t     (_descs) - (_desc_list) < (_desc_count); \\\n\t     (_descs)++) \\\n\t\tfor_each_power_well_instance_in_desc_list((_descs)->list, (_descs)->count, \\\n\t\t\t\t\t\t\t  (_desc), (_inst))\n\nstatic int\n__set_power_wells(struct i915_power_domains *power_domains,\n\t\t  const struct i915_power_well_desc_list *power_well_descs,\n\t\t  int power_well_descs_sz)\n{\n\tstruct drm_i915_private *i915 = container_of(power_domains,\n\t\t\t\t\t\t     struct drm_i915_private,\n\t\t\t\t\t\t     display.power.domains);\n\tu64 power_well_ids = 0;\n\tconst struct i915_power_well_desc_list *desc_list;\n\tconst struct i915_power_well_desc *desc;\n\tconst struct i915_power_well_instance *inst;\n\tint power_well_count = 0;\n\tint plt_idx = 0;\n\n\tfor_each_power_well_instance(power_well_descs, power_well_descs_sz, desc_list, desc, inst)\n\t\tpower_well_count++;\n\n\tpower_domains->power_well_count = power_well_count;\n\tpower_domains->power_wells =\n\t\t\t\tkcalloc(power_well_count,\n\t\t\t\t\tsizeof(*power_domains->power_wells),\n\t\t\t\t\tGFP_KERNEL);\n\tif (!power_domains->power_wells)\n\t\treturn -ENOMEM;\n\n\tfor_each_power_well_instance(power_well_descs, power_well_descs_sz, desc_list, desc, inst) {\n\t\tstruct i915_power_well *pw = &power_domains->power_wells[plt_idx];\n\t\tenum i915_power_well_id id = inst->id;\n\n\t\tpw->desc = desc;\n\t\tdrm_WARN_ON(&i915->drm,\n\t\t\t    overflows_type(inst - desc->instances->list, pw->instance_idx));\n\t\tpw->instance_idx = inst - desc->instances->list;\n\n\t\tinit_power_well_domains(inst, pw);\n\n\t\tplt_idx++;\n\n\t\tif (id == DISP_PW_ID_NONE)\n\t\t\tcontinue;\n\n\t\tdrm_WARN_ON(&i915->drm, id >= sizeof(power_well_ids) * 8);\n\t\tdrm_WARN_ON(&i915->drm, power_well_ids & BIT_ULL(id));\n\t\tpower_well_ids |= BIT_ULL(id);\n\t}\n\n\treturn 0;\n}\n\n#define set_power_wells(power_domains, __power_well_descs) \\\n\t__set_power_wells(power_domains, __power_well_descs, \\\n\t\t\t  ARRAY_SIZE(__power_well_descs))\n\n \nint intel_display_power_map_init(struct i915_power_domains *power_domains)\n{\n\tstruct drm_i915_private *i915 = container_of(power_domains,\n\t\t\t\t\t\t     struct drm_i915_private,\n\t\t\t\t\t\t     display.power.domains);\n\t \n\tif (!HAS_DISPLAY(i915)) {\n\t\tpower_domains->power_well_count = 0;\n\t\treturn 0;\n\t}\n\n\tif (DISPLAY_VER(i915) >= 14)\n\t\treturn set_power_wells(power_domains, xelpdp_power_wells);\n\telse if (IS_DG2(i915))\n\t\treturn set_power_wells(power_domains, xehpd_power_wells);\n\telse if (DISPLAY_VER(i915) >= 13)\n\t\treturn set_power_wells(power_domains, xelpd_power_wells);\n\telse if (IS_DG1(i915))\n\t\treturn set_power_wells(power_domains, dg1_power_wells);\n\telse if (IS_ALDERLAKE_S(i915))\n\t\treturn set_power_wells(power_domains, adls_power_wells);\n\telse if (IS_ROCKETLAKE(i915))\n\t\treturn set_power_wells(power_domains, rkl_power_wells);\n\telse if (DISPLAY_VER(i915) == 12)\n\t\treturn set_power_wells(power_domains, tgl_power_wells);\n\telse if (DISPLAY_VER(i915) == 11)\n\t\treturn set_power_wells(power_domains, icl_power_wells);\n\telse if (IS_GEMINILAKE(i915))\n\t\treturn set_power_wells(power_domains, glk_power_wells);\n\telse if (IS_BROXTON(i915))\n\t\treturn set_power_wells(power_domains, bxt_power_wells);\n\telse if (DISPLAY_VER(i915) == 9)\n\t\treturn set_power_wells(power_domains, skl_power_wells);\n\telse if (IS_CHERRYVIEW(i915))\n\t\treturn set_power_wells(power_domains, chv_power_wells);\n\telse if (IS_BROADWELL(i915))\n\t\treturn set_power_wells(power_domains, bdw_power_wells);\n\telse if (IS_HASWELL(i915))\n\t\treturn set_power_wells(power_domains, hsw_power_wells);\n\telse if (IS_VALLEYVIEW(i915))\n\t\treturn set_power_wells(power_domains, vlv_power_wells);\n\telse if (IS_I830(i915))\n\t\treturn set_power_wells(power_domains, i830_power_wells);\n\telse\n\t\treturn set_power_wells(power_domains, i9xx_power_wells);\n}\n\n \nvoid intel_display_power_map_cleanup(struct i915_power_domains *power_domains)\n{\n\tkfree(power_domains->power_wells);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}