{
  "module_name": "i915_drv.h",
  "hash_id": "23ca3ccdfdbb6b29e9cf7e8211918a7d019cf3d9b94f7fb4bc2364c960807610",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_drv.h",
  "human_readable_source": " \n \n\n#ifndef _I915_DRV_H_\n#define _I915_DRV_H_\n\n#include <uapi/drm/i915_drm.h>\n\n#include <linux/pm_qos.h>\n\n#include <drm/ttm/ttm_device.h>\n\n#include \"display/intel_display_limits.h\"\n#include \"display/intel_display_core.h\"\n\n#include \"gem/i915_gem_context_types.h\"\n#include \"gem/i915_gem_shrinker.h\"\n#include \"gem/i915_gem_stolen.h\"\n\n#include \"gt/intel_engine.h\"\n#include \"gt/intel_gt_types.h\"\n#include \"gt/intel_region_lmem.h\"\n#include \"gt/intel_workarounds.h\"\n#include \"gt/uc/intel_uc.h\"\n\n#include \"soc/intel_pch.h\"\n\n#include \"i915_drm_client.h\"\n#include \"i915_gem.h\"\n#include \"i915_gpu_error.h\"\n#include \"i915_params.h\"\n#include \"i915_perf_types.h\"\n#include \"i915_scheduler.h\"\n#include \"i915_utils.h\"\n#include \"intel_device_info.h\"\n#include \"intel_memory_region.h\"\n#include \"intel_runtime_pm.h\"\n#include \"intel_step.h\"\n#include \"intel_uncore.h\"\n\nstruct drm_i915_clock_gating_funcs;\nstruct vlv_s0ix_state;\nstruct intel_pxp;\n\n#define GEM_QUIRK_PIN_SWIZZLED_PAGES\tBIT(0)\n\n \nstruct i915_dsm {\n\t \n\tstruct resource stolen;\n\n\t \n\tstruct resource reserved;\n\n\t \n\tresource_size_t usable_size;\n};\n\nstruct i915_suspend_saved_registers {\n\tu32 saveDSPARB;\n\tu32 saveSWF0[16];\n\tu32 saveSWF1[16];\n\tu32 saveSWF3[3];\n\tu16 saveGCDGMBUS;\n};\n\n#define MAX_L3_SLICES 2\nstruct intel_l3_parity {\n\tu32 *remap_info[MAX_L3_SLICES];\n\tstruct work_struct error_work;\n\tint which_slice;\n};\n\nstruct i915_gem_mm {\n\t \n\tstruct intel_memory_region *stolen_region;\n\t \n\tstruct drm_mm stolen;\n\t \n\tstruct mutex stolen_lock;\n\n\t \n\tspinlock_t obj_lock;\n\n\t \n\tstruct list_head purge_list;\n\n\t \n\tstruct list_head shrink_list;\n\n\t \n\tstruct llist_head free_list;\n\tstruct work_struct free_work;\n\t \n\tatomic_t free_count;\n\n\t \n\tstruct vfsmount *gemfs;\n\n\tstruct intel_memory_region *regions[INTEL_REGION_UNKNOWN];\n\n\tstruct notifier_block oom_notifier;\n\tstruct notifier_block vmap_notifier;\n\tstruct shrinker shrinker;\n\n#ifdef CONFIG_MMU_NOTIFIER\n\t \n\trwlock_t notifier_lock;\n#endif\n\n\t \n\tu64 shrink_memory;\n\tu32 shrink_count;\n};\n\nstruct i915_virtual_gpu {\n\tstruct mutex lock;  \n\tbool active;\n\tu32 caps;\n\tu32 *initial_mmio;\n\tu8 *initial_cfg_space;\n\tstruct list_head entry;\n};\n\nstruct i915_selftest_stash {\n\tatomic_t counter;\n\tstruct ida mock_region_instances;\n};\n\nstruct drm_i915_private {\n\tstruct drm_device drm;\n\n\tstruct intel_display display;\n\n\t \n\tbool do_release;\n\n\t \n\tstruct i915_params params;\n\n\tconst struct intel_device_info *__info;  \n\tstruct intel_runtime_info __runtime;  \n\tstruct intel_driver_caps caps;\n\n\tstruct i915_dsm dsm;\n\n\tstruct intel_uncore uncore;\n\tstruct intel_uncore_mmio_debug mmio_debug;\n\n\tstruct i915_virtual_gpu vgpu;\n\n\tstruct intel_gvt *gvt;\n\n\tstruct {\n\t\tstruct pci_dev *pdev;\n\t\tstruct resource mch_res;\n\t\tbool mchbar_need_disable;\n\t} gmch;\n\n\tstruct rb_root uabi_engines;\n\tunsigned int engine_uabi_class_count[I915_LAST_UABI_ENGINE_CLASS + 1];\n\n\t \n\tspinlock_t irq_lock;\n\n\tbool display_irqs_enabled;\n\n\t \n\tstruct mutex sb_lock;\n\tstruct pm_qos_request sb_qos;\n\n\t \n\tunion {\n\t\tu32 irq_mask;\n\t\tu32 de_irq_mask[I915_MAX_PIPES];\n\t};\n\tu32 pipestat_irq_mask[I915_MAX_PIPES];\n\n\tbool preserve_bios_swizzle;\n\n\tunsigned int fsb_freq, mem_freq, is_ddr3;\n\tunsigned int skl_preferred_vco_freq;\n\n\tunsigned int max_dotclk_freq;\n\tunsigned int hpll_freq;\n\tunsigned int czclk_freq;\n\n\t \n\tstruct workqueue_struct *wq;\n\n\t \n\tstruct workqueue_struct *unordered_wq;\n\n\t \n\tconst struct drm_i915_clock_gating_funcs *clock_gating_funcs;\n\n\t \n\tenum intel_pch pch_type;\n\tunsigned short pch_id;\n\n\tunsigned long gem_quirks;\n\n\tstruct i915_gem_mm mm;\n\n\tstruct intel_l3_parity l3_parity;\n\n\t \n\tu32 edram_size_mb;\n\n\tstruct i915_gpu_error gpu_error;\n\n\tu32 suspend_count;\n\tstruct i915_suspend_saved_registers regfile;\n\tstruct vlv_s0ix_state *vlv_s0ix_state;\n\n\tstruct dram_info {\n\t\tbool wm_lv_0_adjust_needed;\n\t\tu8 num_channels;\n\t\tbool symmetric_memory;\n\t\tenum intel_dram_type {\n\t\t\tINTEL_DRAM_UNKNOWN,\n\t\t\tINTEL_DRAM_DDR3,\n\t\t\tINTEL_DRAM_DDR4,\n\t\t\tINTEL_DRAM_LPDDR3,\n\t\t\tINTEL_DRAM_LPDDR4,\n\t\t\tINTEL_DRAM_DDR5,\n\t\t\tINTEL_DRAM_LPDDR5,\n\t\t} type;\n\t\tu8 num_qgv_points;\n\t\tu8 num_psf_gv_points;\n\t} dram_info;\n\n\tstruct intel_runtime_pm runtime_pm;\n\n\tstruct i915_perf perf;\n\n\tstruct i915_hwmon *hwmon;\n\n\t \n\tstruct intel_gt gt0;\n\n\t \n\tstruct intel_gt *gt[I915_MAX_GT];\n\n\tstruct kobject *sysfs_gt;\n\n\t \n\tstruct intel_gt *media_gt;\n\n\tstruct {\n\t\tstruct i915_gem_contexts {\n\t\t\tspinlock_t lock;  \n\t\t\tstruct list_head list;\n\t\t} contexts;\n\n\t\t \n\t\tstruct file *mmap_singleton;\n\t} gem;\n\n\tstruct intel_pxp *pxp;\n\n\t \n\tu8 vblank_enabled;\n\n\tbool irq_enabled;\n\n\tstruct i915_pmu pmu;\n\n\t \n\tstruct ttm_device bdev;\n\n\tI915_SELFTEST_DECLARE(struct i915_selftest_stash selftest;)\n\n\t \n};\n\nstatic inline struct drm_i915_private *to_i915(const struct drm_device *dev)\n{\n\treturn container_of(dev, struct drm_i915_private, drm);\n}\n\nstatic inline struct drm_i915_private *kdev_to_i915(struct device *kdev)\n{\n\treturn dev_get_drvdata(kdev);\n}\n\nstatic inline struct drm_i915_private *pdev_to_i915(struct pci_dev *pdev)\n{\n\treturn pci_get_drvdata(pdev);\n}\n\nstatic inline struct intel_gt *to_gt(struct drm_i915_private *i915)\n{\n\treturn &i915->gt0;\n}\n\n \n#define for_each_engine(engine__, gt__, id__) \\\n\tfor ((id__) = 0; \\\n\t     (id__) < I915_NUM_ENGINES; \\\n\t     (id__)++) \\\n\t\tfor_each_if ((engine__) = (gt__)->engine[(id__)])\n\n \n#define for_each_engine_masked(engine__, gt__, mask__, tmp__) \\\n\tfor ((tmp__) = (mask__) & (gt__)->info.engine_mask; \\\n\t     (tmp__) ? \\\n\t     ((engine__) = (gt__)->engine[__mask_next_bit(tmp__)]), 1 : \\\n\t     0;)\n\n#define rb_to_uabi_engine(rb) \\\n\trb_entry_safe(rb, struct intel_engine_cs, uabi_node)\n\n#define for_each_uabi_engine(engine__, i915__) \\\n\tfor ((engine__) = rb_to_uabi_engine(rb_first(&(i915__)->uabi_engines));\\\n\t     (engine__); \\\n\t     (engine__) = rb_to_uabi_engine(rb_next(&(engine__)->uabi_node)))\n\n#define for_each_uabi_class_engine(engine__, class__, i915__) \\\n\tfor ((engine__) = intel_engine_lookup_user((i915__), (class__), 0); \\\n\t     (engine__) && (engine__)->uabi_class == (class__); \\\n\t     (engine__) = rb_to_uabi_engine(rb_next(&(engine__)->uabi_node)))\n\n#define INTEL_INFO(i915)\t((i915)->__info)\n#define RUNTIME_INFO(i915)\t(&(i915)->__runtime)\n#define DISPLAY_INFO(i915)\t((i915)->display.info.__device_info)\n#define DISPLAY_RUNTIME_INFO(i915)\t(&(i915)->display.info.__runtime_info)\n#define DRIVER_CAPS(i915)\t(&(i915)->caps)\n\n#define INTEL_DEVID(i915)\t(RUNTIME_INFO(i915)->device_id)\n\n#define IP_VER(ver, rel)\t\t((ver) << 8 | (rel))\n\n#define GRAPHICS_VER(i915)\t\t(RUNTIME_INFO(i915)->graphics.ip.ver)\n#define GRAPHICS_VER_FULL(i915)\t\tIP_VER(RUNTIME_INFO(i915)->graphics.ip.ver, \\\n\t\t\t\t\t       RUNTIME_INFO(i915)->graphics.ip.rel)\n#define IS_GRAPHICS_VER(i915, from, until) \\\n\t(GRAPHICS_VER(i915) >= (from) && GRAPHICS_VER(i915) <= (until))\n\n#define MEDIA_VER(i915)\t\t\t(RUNTIME_INFO(i915)->media.ip.ver)\n#define MEDIA_VER_FULL(i915)\t\tIP_VER(RUNTIME_INFO(i915)->media.ip.ver, \\\n\t\t\t\t\t       RUNTIME_INFO(i915)->media.ip.rel)\n#define IS_MEDIA_VER(i915, from, until) \\\n\t(MEDIA_VER(i915) >= (from) && MEDIA_VER(i915) <= (until))\n\n#define DISPLAY_VER(i915)\t(DISPLAY_RUNTIME_INFO(i915)->ip.ver)\n#define IS_DISPLAY_VER(i915, from, until) \\\n\t(DISPLAY_VER(i915) >= (from) && DISPLAY_VER(i915) <= (until))\n\n#define INTEL_REVID(i915)\t(to_pci_dev((i915)->drm.dev)->revision)\n\n#define INTEL_DISPLAY_STEP(__i915) (RUNTIME_INFO(__i915)->step.display_step)\n#define INTEL_GRAPHICS_STEP(__i915) (RUNTIME_INFO(__i915)->step.graphics_step)\n#define INTEL_MEDIA_STEP(__i915) (RUNTIME_INFO(__i915)->step.media_step)\n#define INTEL_BASEDIE_STEP(__i915) (RUNTIME_INFO(__i915)->step.basedie_step)\n\n#define IS_DISPLAY_STEP(__i915, since, until) \\\n\t(drm_WARN_ON(&(__i915)->drm, INTEL_DISPLAY_STEP(__i915) == STEP_NONE), \\\n\t INTEL_DISPLAY_STEP(__i915) >= (since) && INTEL_DISPLAY_STEP(__i915) < (until))\n\n#define IS_GRAPHICS_STEP(__i915, since, until) \\\n\t(drm_WARN_ON(&(__i915)->drm, INTEL_GRAPHICS_STEP(__i915) == STEP_NONE), \\\n\t INTEL_GRAPHICS_STEP(__i915) >= (since) && INTEL_GRAPHICS_STEP(__i915) < (until))\n\n#define IS_MEDIA_STEP(__i915, since, until) \\\n\t(drm_WARN_ON(&(__i915)->drm, INTEL_MEDIA_STEP(__i915) == STEP_NONE), \\\n\t INTEL_MEDIA_STEP(__i915) >= (since) && INTEL_MEDIA_STEP(__i915) < (until))\n\n#define IS_BASEDIE_STEP(__i915, since, until) \\\n\t(drm_WARN_ON(&(__i915)->drm, INTEL_BASEDIE_STEP(__i915) == STEP_NONE), \\\n\t INTEL_BASEDIE_STEP(__i915) >= (since) && INTEL_BASEDIE_STEP(__i915) < (until))\n\nstatic __always_inline unsigned int\n__platform_mask_index(const struct intel_runtime_info *info,\n\t\t      enum intel_platform p)\n{\n\tconst unsigned int pbits =\n\t\tBITS_PER_TYPE(info->platform_mask[0]) - INTEL_SUBPLATFORM_BITS;\n\n\t \n\tBUILD_BUG_ON(INTEL_MAX_PLATFORMS >\n\t\t     pbits * ARRAY_SIZE(info->platform_mask));\n\n\treturn p / pbits;\n}\n\nstatic __always_inline unsigned int\n__platform_mask_bit(const struct intel_runtime_info *info,\n\t\t    enum intel_platform p)\n{\n\tconst unsigned int pbits =\n\t\tBITS_PER_TYPE(info->platform_mask[0]) - INTEL_SUBPLATFORM_BITS;\n\n\treturn p % pbits + INTEL_SUBPLATFORM_BITS;\n}\n\nstatic inline u32\nintel_subplatform(const struct intel_runtime_info *info, enum intel_platform p)\n{\n\tconst unsigned int pi = __platform_mask_index(info, p);\n\n\treturn info->platform_mask[pi] & INTEL_SUBPLATFORM_MASK;\n}\n\nstatic __always_inline bool\nIS_PLATFORM(const struct drm_i915_private *i915, enum intel_platform p)\n{\n\tconst struct intel_runtime_info *info = RUNTIME_INFO(i915);\n\tconst unsigned int pi = __platform_mask_index(info, p);\n\tconst unsigned int pb = __platform_mask_bit(info, p);\n\n\tBUILD_BUG_ON(!__builtin_constant_p(p));\n\n\treturn info->platform_mask[pi] & BIT(pb);\n}\n\nstatic __always_inline bool\nIS_SUBPLATFORM(const struct drm_i915_private *i915,\n\t       enum intel_platform p, unsigned int s)\n{\n\tconst struct intel_runtime_info *info = RUNTIME_INFO(i915);\n\tconst unsigned int pi = __platform_mask_index(info, p);\n\tconst unsigned int pb = __platform_mask_bit(info, p);\n\tconst unsigned int msb = BITS_PER_TYPE(info->platform_mask[0]) - 1;\n\tconst u32 mask = info->platform_mask[pi];\n\n\tBUILD_BUG_ON(!__builtin_constant_p(p));\n\tBUILD_BUG_ON(!__builtin_constant_p(s));\n\tBUILD_BUG_ON((s) >= INTEL_SUBPLATFORM_BITS);\n\n\t \n\treturn ((mask << (msb - pb)) & (mask << (msb - s))) & BIT(msb);\n}\n\n#define IS_MOBILE(i915)\t(INTEL_INFO(i915)->is_mobile)\n#define IS_DGFX(i915)   (INTEL_INFO(i915)->is_dgfx)\n\n#define IS_I830(i915)\tIS_PLATFORM(i915, INTEL_I830)\n#define IS_I845G(i915)\tIS_PLATFORM(i915, INTEL_I845G)\n#define IS_I85X(i915)\tIS_PLATFORM(i915, INTEL_I85X)\n#define IS_I865G(i915)\tIS_PLATFORM(i915, INTEL_I865G)\n#define IS_I915G(i915)\tIS_PLATFORM(i915, INTEL_I915G)\n#define IS_I915GM(i915)\tIS_PLATFORM(i915, INTEL_I915GM)\n#define IS_I945G(i915)\tIS_PLATFORM(i915, INTEL_I945G)\n#define IS_I945GM(i915)\tIS_PLATFORM(i915, INTEL_I945GM)\n#define IS_I965G(i915)\tIS_PLATFORM(i915, INTEL_I965G)\n#define IS_I965GM(i915)\tIS_PLATFORM(i915, INTEL_I965GM)\n#define IS_G45(i915)\tIS_PLATFORM(i915, INTEL_G45)\n#define IS_GM45(i915)\tIS_PLATFORM(i915, INTEL_GM45)\n#define IS_G4X(i915)\t(IS_G45(i915) || IS_GM45(i915))\n#define IS_PINEVIEW(i915)\tIS_PLATFORM(i915, INTEL_PINEVIEW)\n#define IS_G33(i915)\tIS_PLATFORM(i915, INTEL_G33)\n#define IS_IRONLAKE(i915)\tIS_PLATFORM(i915, INTEL_IRONLAKE)\n#define IS_IRONLAKE_M(i915) \\\n\t(IS_PLATFORM(i915, INTEL_IRONLAKE) && IS_MOBILE(i915))\n#define IS_SANDYBRIDGE(i915) IS_PLATFORM(i915, INTEL_SANDYBRIDGE)\n#define IS_IVYBRIDGE(i915)\tIS_PLATFORM(i915, INTEL_IVYBRIDGE)\n#define IS_IVB_GT1(i915)\t(IS_IVYBRIDGE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 1)\n#define IS_VALLEYVIEW(i915)\tIS_PLATFORM(i915, INTEL_VALLEYVIEW)\n#define IS_CHERRYVIEW(i915)\tIS_PLATFORM(i915, INTEL_CHERRYVIEW)\n#define IS_HASWELL(i915)\tIS_PLATFORM(i915, INTEL_HASWELL)\n#define IS_BROADWELL(i915)\tIS_PLATFORM(i915, INTEL_BROADWELL)\n#define IS_SKYLAKE(i915)\tIS_PLATFORM(i915, INTEL_SKYLAKE)\n#define IS_BROXTON(i915)\tIS_PLATFORM(i915, INTEL_BROXTON)\n#define IS_KABYLAKE(i915)\tIS_PLATFORM(i915, INTEL_KABYLAKE)\n#define IS_GEMINILAKE(i915)\tIS_PLATFORM(i915, INTEL_GEMINILAKE)\n#define IS_COFFEELAKE(i915)\tIS_PLATFORM(i915, INTEL_COFFEELAKE)\n#define IS_COMETLAKE(i915)\tIS_PLATFORM(i915, INTEL_COMETLAKE)\n#define IS_ICELAKE(i915)\tIS_PLATFORM(i915, INTEL_ICELAKE)\n#define IS_JASPERLAKE(i915)\tIS_PLATFORM(i915, INTEL_JASPERLAKE)\n#define IS_ELKHARTLAKE(i915)\tIS_PLATFORM(i915, INTEL_ELKHARTLAKE)\n#define IS_TIGERLAKE(i915)\tIS_PLATFORM(i915, INTEL_TIGERLAKE)\n#define IS_ROCKETLAKE(i915)\tIS_PLATFORM(i915, INTEL_ROCKETLAKE)\n#define IS_DG1(i915)        IS_PLATFORM(i915, INTEL_DG1)\n#define IS_ALDERLAKE_S(i915) IS_PLATFORM(i915, INTEL_ALDERLAKE_S)\n#define IS_ALDERLAKE_P(i915) IS_PLATFORM(i915, INTEL_ALDERLAKE_P)\n#define IS_XEHPSDV(i915) IS_PLATFORM(i915, INTEL_XEHPSDV)\n#define IS_DG2(i915)\tIS_PLATFORM(i915, INTEL_DG2)\n#define IS_PONTEVECCHIO(i915) IS_PLATFORM(i915, INTEL_PONTEVECCHIO)\n#define IS_METEORLAKE(i915) IS_PLATFORM(i915, INTEL_METEORLAKE)\n\n#define IS_METEORLAKE_M(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_METEORLAKE, INTEL_SUBPLATFORM_M)\n#define IS_METEORLAKE_P(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_METEORLAKE, INTEL_SUBPLATFORM_P)\n#define IS_DG2_G10(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_DG2, INTEL_SUBPLATFORM_G10)\n#define IS_DG2_G11(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_DG2, INTEL_SUBPLATFORM_G11)\n#define IS_DG2_G12(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_DG2, INTEL_SUBPLATFORM_G12)\n#define IS_RAPTORLAKE_S(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_ALDERLAKE_S, INTEL_SUBPLATFORM_RPL)\n#define IS_ALDERLAKE_P_N(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_ALDERLAKE_P, INTEL_SUBPLATFORM_N)\n#define IS_RAPTORLAKE_P(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_ALDERLAKE_P, INTEL_SUBPLATFORM_RPL)\n#define IS_RAPTORLAKE_U(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_ALDERLAKE_P, INTEL_SUBPLATFORM_RPLU)\n#define IS_HASWELL_EARLY_SDV(i915) (IS_HASWELL(i915) && \\\n\t\t\t\t    (INTEL_DEVID(i915) & 0xFF00) == 0x0C00)\n#define IS_BROADWELL_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_BROADWELL, INTEL_SUBPLATFORM_ULT)\n#define IS_BROADWELL_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_BROADWELL, INTEL_SUBPLATFORM_ULX)\n#define IS_BROADWELL_GT3(i915)\t(IS_BROADWELL(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 3)\n#define IS_HASWELL_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_HASWELL, INTEL_SUBPLATFORM_ULT)\n#define IS_HASWELL_GT3(i915)\t(IS_HASWELL(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 3)\n#define IS_HASWELL_GT1(i915)\t(IS_HASWELL(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 1)\n \n#define IS_HASWELL_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_HASWELL, INTEL_SUBPLATFORM_ULX)\n#define IS_SKYLAKE_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_SKYLAKE, INTEL_SUBPLATFORM_ULT)\n#define IS_SKYLAKE_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_SKYLAKE, INTEL_SUBPLATFORM_ULX)\n#define IS_KABYLAKE_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_KABYLAKE, INTEL_SUBPLATFORM_ULT)\n#define IS_KABYLAKE_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_KABYLAKE, INTEL_SUBPLATFORM_ULX)\n#define IS_SKYLAKE_GT2(i915)\t(IS_SKYLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 2)\n#define IS_SKYLAKE_GT3(i915)\t(IS_SKYLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 3)\n#define IS_SKYLAKE_GT4(i915)\t(IS_SKYLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 4)\n#define IS_KABYLAKE_GT2(i915)\t(IS_KABYLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 2)\n#define IS_KABYLAKE_GT3(i915)\t(IS_KABYLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 3)\n#define IS_COFFEELAKE_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_COFFEELAKE, INTEL_SUBPLATFORM_ULT)\n#define IS_COFFEELAKE_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_COFFEELAKE, INTEL_SUBPLATFORM_ULX)\n#define IS_COFFEELAKE_GT2(i915)\t(IS_COFFEELAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 2)\n#define IS_COFFEELAKE_GT3(i915)\t(IS_COFFEELAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 3)\n\n#define IS_COMETLAKE_ULT(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_COMETLAKE, INTEL_SUBPLATFORM_ULT)\n#define IS_COMETLAKE_ULX(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_COMETLAKE, INTEL_SUBPLATFORM_ULX)\n#define IS_COMETLAKE_GT2(i915)\t(IS_COMETLAKE(i915) && \\\n\t\t\t\t INTEL_INFO(i915)->gt == 2)\n\n#define IS_ICL_WITH_PORT_F(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_ICELAKE, INTEL_SUBPLATFORM_PORTF)\n\n#define IS_TIGERLAKE_UY(i915) \\\n\tIS_SUBPLATFORM(i915, INTEL_TIGERLAKE, INTEL_SUBPLATFORM_UY)\n\n\n\n\n\n\n\n\n#define IS_XEHPSDV_GRAPHICS_STEP(__i915, since, until) \\\n\t(IS_XEHPSDV(__i915) && IS_GRAPHICS_STEP(__i915, since, until))\n\n#define IS_MTL_GRAPHICS_STEP(__i915, variant, since, until) \\\n\t(IS_SUBPLATFORM(__i915, INTEL_METEORLAKE, INTEL_SUBPLATFORM_##variant) && \\\n\t IS_GRAPHICS_STEP(__i915, since, until))\n\n#define IS_MTL_DISPLAY_STEP(__i915, since, until) \\\n\t(IS_METEORLAKE(__i915) && \\\n\t IS_DISPLAY_STEP(__i915, since, until))\n\n#define IS_MTL_MEDIA_STEP(__i915, since, until) \\\n\t(IS_METEORLAKE(__i915) && \\\n\t IS_MEDIA_STEP(__i915, since, until))\n\n \n#define IS_DG2_GRAPHICS_STEP(__i915, variant, since, until) \\\n\t(IS_SUBPLATFORM(__i915, INTEL_DG2, INTEL_SUBPLATFORM_##variant) && \\\n\t IS_GRAPHICS_STEP(__i915, since, until))\n\n#define IS_DG2_DISPLAY_STEP(__i915, since, until) \\\n\t(IS_DG2(__i915) && \\\n\t IS_DISPLAY_STEP(__i915, since, until))\n\n#define IS_PVC_BD_STEP(__i915, since, until) \\\n\t(IS_PONTEVECCHIO(__i915) && \\\n\t IS_BASEDIE_STEP(__i915, since, until))\n\n#define IS_PVC_CT_STEP(__i915, since, until) \\\n\t(IS_PONTEVECCHIO(__i915) && \\\n\t IS_GRAPHICS_STEP(__i915, since, until))\n\n#define IS_LP(i915)\t\t(INTEL_INFO(i915)->is_lp)\n#define IS_GEN9_LP(i915)\t(GRAPHICS_VER(i915) == 9 && IS_LP(i915))\n#define IS_GEN9_BC(i915)\t(GRAPHICS_VER(i915) == 9 && !IS_LP(i915))\n\n#define __HAS_ENGINE(engine_mask, id) ((engine_mask) & BIT(id))\n#define HAS_ENGINE(gt, id) __HAS_ENGINE((gt)->info.engine_mask, id)\n\n#define __ENGINE_INSTANCES_MASK(mask, first, count) ({\t\t\t\\\n\tunsigned int first__ = (first);\t\t\t\t\t\\\n\tunsigned int count__ = (count);\t\t\t\t\t\\\n\t((mask) & GENMASK(first__ + count__ - 1, first__)) >> first__;\t\\\n})\n\n#define ENGINE_INSTANCES_MASK(gt, first, count) \\\n\t__ENGINE_INSTANCES_MASK((gt)->info.engine_mask, first, count)\n\n#define RCS_MASK(gt) \\\n\tENGINE_INSTANCES_MASK(gt, RCS0, I915_MAX_RCS)\n#define BCS_MASK(gt) \\\n\tENGINE_INSTANCES_MASK(gt, BCS0, I915_MAX_BCS)\n#define VDBOX_MASK(gt) \\\n\tENGINE_INSTANCES_MASK(gt, VCS0, I915_MAX_VCS)\n#define VEBOX_MASK(gt) \\\n\tENGINE_INSTANCES_MASK(gt, VECS0, I915_MAX_VECS)\n#define CCS_MASK(gt) \\\n\tENGINE_INSTANCES_MASK(gt, CCS0, I915_MAX_CCS)\n\n#define HAS_MEDIA_RATIO_MODE(i915) (INTEL_INFO(i915)->has_media_ratio_mode)\n\n \n#define CMDPARSER_USES_GGTT(i915) (GRAPHICS_VER(i915) == 7)\n\n#define HAS_LLC(i915)\t(INTEL_INFO(i915)->has_llc)\n#define HAS_4TILE(i915)\t(INTEL_INFO(i915)->has_4tile)\n#define HAS_SNOOP(i915)\t(INTEL_INFO(i915)->has_snoop)\n#define HAS_EDRAM(i915)\t((i915)->edram_size_mb)\n#define HAS_SECURE_BATCHES(i915) (GRAPHICS_VER(i915) < 6)\n#define HAS_WT(i915)\tHAS_EDRAM(i915)\n\n#define HWS_NEEDS_PHYSICAL(i915)\t(INTEL_INFO(i915)->hws_needs_physical)\n\n#define HAS_LOGICAL_RING_CONTEXTS(i915) \\\n\t\t(INTEL_INFO(i915)->has_logical_ring_contexts)\n#define HAS_LOGICAL_RING_ELSQ(i915) \\\n\t\t(INTEL_INFO(i915)->has_logical_ring_elsq)\n\n#define HAS_EXECLISTS(i915) HAS_LOGICAL_RING_CONTEXTS(i915)\n\n#define INTEL_PPGTT(i915) (RUNTIME_INFO(i915)->ppgtt_type)\n#define HAS_PPGTT(i915) \\\n\t(INTEL_PPGTT(i915) != INTEL_PPGTT_NONE)\n#define HAS_FULL_PPGTT(i915) \\\n\t(INTEL_PPGTT(i915) >= INTEL_PPGTT_FULL)\n\n#define HAS_PAGE_SIZES(i915, sizes) ({ \\\n\tGEM_BUG_ON((sizes) == 0); \\\n\t((sizes) & ~RUNTIME_INFO(i915)->page_sizes) == 0; \\\n})\n\n \n#define HAS_BROKEN_CS_TLB(i915)\t(IS_I830(i915) || IS_I845G(i915))\n\n#define NEEDS_RC6_CTX_CORRUPTION_WA(i915)\t\\\n\t(IS_BROADWELL(i915) || GRAPHICS_VER(i915) == 9)\n\n \n#define NEEDS_WaRsDisableCoarsePowerGating(i915)\t\t\t\\\n\t(IS_SKYLAKE_GT3(i915) || IS_SKYLAKE_GT4(i915))\n\n \n#define HAS_128_BYTE_Y_TILING(i915) (GRAPHICS_VER(i915) != 2 && \\\n\t\t\t\t\t !(IS_I915G(i915) || IS_I915GM(i915)))\n\n#define HAS_RC6(i915)\t\t (INTEL_INFO(i915)->has_rc6)\n#define HAS_RC6p(i915)\t\t (INTEL_INFO(i915)->has_rc6p)\n#define HAS_RC6pp(i915)\t\t (false)  \n\n#define HAS_RPS(i915)\t(INTEL_INFO(i915)->has_rps)\n\n#define HAS_HECI_PXP(i915) \\\n\t(INTEL_INFO(i915)->has_heci_pxp)\n\n#define HAS_HECI_GSCFI(i915) \\\n\t(INTEL_INFO(i915)->has_heci_gscfi)\n\n#define HAS_HECI_GSC(i915) (HAS_HECI_PXP(i915) || HAS_HECI_GSCFI(i915))\n\n#define HAS_RUNTIME_PM(i915) (INTEL_INFO(i915)->has_runtime_pm)\n#define HAS_64BIT_RELOC(i915) (INTEL_INFO(i915)->has_64bit_reloc)\n\n#define HAS_OA_BPC_REPORTING(i915) \\\n\t(INTEL_INFO(i915)->has_oa_bpc_reporting)\n#define HAS_OA_SLICE_CONTRIB_LIMITS(i915) \\\n\t(INTEL_INFO(i915)->has_oa_slice_contrib_limits)\n#define HAS_OAM(i915) \\\n\t(INTEL_INFO(i915)->has_oam)\n\n \n#define HAS_64K_PAGES(i915) (INTEL_INFO(i915)->has_64k_pages)\n\n#define HAS_REGION(i915, i) (INTEL_INFO(i915)->memory_regions & (i))\n#define HAS_LMEM(i915) HAS_REGION(i915, REGION_LMEM)\n\n#define HAS_EXTRA_GT_LIST(i915)   (INTEL_INFO(i915)->extra_gt_list)\n\n \n#define HAS_FLAT_CCS(i915)   (INTEL_INFO(i915)->has_flat_ccs)\n\n#define HAS_GT_UC(i915)\t(INTEL_INFO(i915)->has_gt_uc)\n\n#define HAS_POOLED_EU(i915)\t(RUNTIME_INFO(i915)->has_pooled_eu)\n\n#define HAS_GLOBAL_MOCS_REGISTERS(i915)\t(INTEL_INFO(i915)->has_global_mocs)\n\n#define HAS_GMD_ID(i915)\t(INTEL_INFO(i915)->has_gmd_id)\n\n#define HAS_L3_CCS_READ(i915) (INTEL_INFO(i915)->has_l3_ccs_read)\n\n \n#define HAS_L3_DPF(i915) (INTEL_INFO(i915)->has_l3_dpf)\n#define NUM_L3_SLICES(i915) (IS_HASWELL_GT3(i915) ? \\\n\t\t\t\t 2 : HAS_L3_DPF(i915))\n\n \n#define INTEL_DISPLAY_ENABLED(i915) \\\n\t(drm_WARN_ON(&(i915)->drm, !HAS_DISPLAY(i915)),\t\t\\\n\t !(i915)->params.disable_display &&\t\t\t\t\\\n\t !intel_opregion_headless_sku(i915))\n\n#define HAS_GUC_DEPRIVILEGE(i915) \\\n\t(INTEL_INFO(i915)->has_guc_deprivilege)\n\n#define HAS_3D_PIPELINE(i915)\t(INTEL_INFO(i915)->has_3d_pipeline)\n\n#define HAS_ONE_EU_PER_FUSE_BIT(i915)\t(INTEL_INFO(i915)->has_one_eu_per_fuse_bit)\n\n#define HAS_LMEMBAR_SMEM_STOLEN(i915) (!HAS_LMEM(i915) && \\\n\t\t\t\t       GRAPHICS_VER_FULL(i915) >= IP_VER(12, 70))\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}