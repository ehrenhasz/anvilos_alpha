{
  "module_name": "display.h",
  "hash_id": "e3ad726c1d769f00d40de971aa95f24c0b0161d5932b28bf8b13ed03857d6639",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gvt/display.h",
  "human_readable_source": " \n\n#ifndef _GVT_DISPLAY_H_\n#define _GVT_DISPLAY_H_\n\n#include <linux/types.h>\n#include <linux/hrtimer.h>\n\nstruct intel_gvt;\nstruct intel_vgpu;\n\n#define SBI_REG_MAX\t20\n#define DPCD_SIZE\t0x700\n\n#define intel_vgpu_port(vgpu, port) \\\n\t(&(vgpu->display.ports[port]))\n\n#define intel_vgpu_has_monitor_on_port(vgpu, port) \\\n\t(intel_vgpu_port(vgpu, port)->edid && \\\n\t\tintel_vgpu_port(vgpu, port)->edid->data_valid)\n\n#define intel_vgpu_port_is_dp(vgpu, port) \\\n\t((intel_vgpu_port(vgpu, port)->type == GVT_DP_A) || \\\n\t(intel_vgpu_port(vgpu, port)->type == GVT_DP_B) || \\\n\t(intel_vgpu_port(vgpu, port)->type == GVT_DP_C) || \\\n\t(intel_vgpu_port(vgpu, port)->type == GVT_DP_D))\n\n#define INTEL_GVT_MAX_UEVENT_VARS\t3\n\n \n#define DPCD_SIZE\t0x700\n\n \n#define DP_SET_POWER            0x600\n#define DP_SET_POWER_D0         0x1\n#define AUX_NATIVE_WRITE        0x8\n#define AUX_NATIVE_READ         0x9\n\n#define AUX_NATIVE_REPLY_MASK   (0x3 << 4)\n#define AUX_NATIVE_REPLY_ACK    (0x0 << 4)\n#define AUX_NATIVE_REPLY_NAK    (0x1 << 4)\n#define AUX_NATIVE_REPLY_DEFER  (0x2 << 4)\n\n#define AUX_BURST_SIZE          20\n\n \n#define DPCD_REV\t\t\t0x000\n#define DPCD_MAX_LINK_RATE\t\t0x001\n#define DPCD_MAX_LANE_COUNT\t\t0x002\n\n#define DPCD_TRAINING_PATTERN_SET\t0x102\n#define\tDPCD_SINK_COUNT\t\t\t0x200\n#define DPCD_LANE0_1_STATUS\t\t0x202\n#define DPCD_LANE2_3_STATUS\t\t0x203\n#define DPCD_LANE_ALIGN_STATUS_UPDATED\t0x204\n#define DPCD_SINK_STATUS\t\t0x205\n\n \n#define DPCD_TRAINING_PATTERN_SET_MASK\t0x03\n#define DPCD_LINK_TRAINING_DISABLED\t0x00\n#define DPCD_TRAINING_PATTERN_1\t\t0x01\n#define DPCD_TRAINING_PATTERN_2\t\t0x02\n\n#define DPCD_CP_READY_MASK\t\t(1 << 6)\n\n \n#define DPCD_LANES_CR_DONE\t\t0x11\n#define DPCD_LANES_EQ_DONE\t\t0x22\n#define DPCD_SYMBOL_LOCKED\t\t0x44\n\n#define DPCD_INTERLANE_ALIGN_DONE\t0x01\n\n#define DPCD_SINK_IN_SYNC\t\t0x03\n \n\n#define SBI_RESPONSE_MASK               0x3\n#define SBI_RESPONSE_SHIFT              0x1\n#define SBI_STAT_MASK                   0x1\n#define SBI_STAT_SHIFT                  0x0\n#define SBI_OPCODE_SHIFT                8\n#define SBI_OPCODE_MASK\t\t\t(0xff << SBI_OPCODE_SHIFT)\n#define SBI_CMD_IORD                    2\n#define SBI_CMD_IOWR                    3\n#define SBI_CMD_CRRD                    6\n#define SBI_CMD_CRWR                    7\n#define SBI_ADDR_OFFSET_SHIFT           16\n#define SBI_ADDR_OFFSET_MASK            (0xffff << SBI_ADDR_OFFSET_SHIFT)\n\nstruct intel_vgpu_sbi_register {\n\tunsigned int offset;\n\tu32 value;\n};\n\nstruct intel_vgpu_sbi {\n\tint number;\n\tstruct intel_vgpu_sbi_register registers[SBI_REG_MAX];\n};\n\nenum intel_gvt_plane_type {\n\tPRIMARY_PLANE = 0,\n\tCURSOR_PLANE,\n\tSPRITE_PLANE,\n\tMAX_PLANE\n};\n\nstruct intel_vgpu_dpcd_data {\n\tbool data_valid;\n\tu8 data[DPCD_SIZE];\n};\n\nenum intel_vgpu_port_type {\n\tGVT_CRT = 0,\n\tGVT_DP_A,\n\tGVT_DP_B,\n\tGVT_DP_C,\n\tGVT_DP_D,\n\tGVT_HDMI_B,\n\tGVT_HDMI_C,\n\tGVT_HDMI_D,\n\tGVT_PORT_MAX\n};\n\nenum intel_vgpu_edid {\n\tGVT_EDID_1024_768,\n\tGVT_EDID_1920_1200,\n\tGVT_EDID_NUM,\n};\n\n#define GVT_DEFAULT_REFRESH_RATE 60\nstruct intel_vgpu_port {\n\t \n\tstruct intel_vgpu_edid_data *edid;\n\t \n\tstruct intel_vgpu_dpcd_data *dpcd;\n\tint type;\n\tenum intel_vgpu_edid id;\n\t \n\tu32 vrefresh_k;\n};\n\nstruct intel_vgpu_vblank_timer {\n\tstruct hrtimer timer;\n\tu32 vrefresh_k;\n\tu64 period;\n};\n\nstatic inline char *vgpu_edid_str(enum intel_vgpu_edid id)\n{\n\tswitch (id) {\n\tcase GVT_EDID_1024_768:\n\t\treturn \"1024x768\";\n\tcase GVT_EDID_1920_1200:\n\t\treturn \"1920x1200\";\n\tdefault:\n\t\treturn \"\";\n\t}\n}\n\nstatic inline unsigned int vgpu_edid_xres(enum intel_vgpu_edid id)\n{\n\tswitch (id) {\n\tcase GVT_EDID_1024_768:\n\t\treturn 1024;\n\tcase GVT_EDID_1920_1200:\n\t\treturn 1920;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\nstatic inline unsigned int vgpu_edid_yres(enum intel_vgpu_edid id)\n{\n\tswitch (id) {\n\tcase GVT_EDID_1024_768:\n\t\treturn 768;\n\tcase GVT_EDID_1920_1200:\n\t\treturn 1200;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\nvoid intel_vgpu_emulate_vblank(struct intel_vgpu *vgpu);\nvoid vgpu_update_vblank_emulation(struct intel_vgpu *vgpu, bool turnon);\n\nint intel_vgpu_init_display(struct intel_vgpu *vgpu, u64 resolution);\nvoid intel_vgpu_reset_display(struct intel_vgpu *vgpu);\nvoid intel_vgpu_clean_display(struct intel_vgpu *vgpu);\n\nint pipe_is_enabled(struct intel_vgpu *vgpu, int pipe);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}