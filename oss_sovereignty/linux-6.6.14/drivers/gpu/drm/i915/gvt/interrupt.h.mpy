{
  "module_name": "interrupt.h",
  "hash_id": "c7171d0cfe3cc76219d6d384dc40558fc3cb41a12d1ee1fea71b9ad3ab002c1f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gvt/interrupt.h",
  "human_readable_source": " \n\n#ifndef _GVT_INTERRUPT_H_\n#define _GVT_INTERRUPT_H_\n\n#include <linux/hrtimer.h>\n#include <linux/kernel.h>\n\n#include \"i915_reg_defs.h\"\n\nenum intel_gvt_event_type {\n\tRCS_MI_USER_INTERRUPT = 0,\n\tRCS_DEBUG,\n\tRCS_MMIO_SYNC_FLUSH,\n\tRCS_CMD_STREAMER_ERR,\n\tRCS_PIPE_CONTROL,\n\tRCS_L3_PARITY_ERR,\n\tRCS_WATCHDOG_EXCEEDED,\n\tRCS_PAGE_DIRECTORY_FAULT,\n\tRCS_AS_CONTEXT_SWITCH,\n\tRCS_MONITOR_BUFF_HALF_FULL,\n\n\tVCS_MI_USER_INTERRUPT,\n\tVCS_MMIO_SYNC_FLUSH,\n\tVCS_CMD_STREAMER_ERR,\n\tVCS_MI_FLUSH_DW,\n\tVCS_WATCHDOG_EXCEEDED,\n\tVCS_PAGE_DIRECTORY_FAULT,\n\tVCS_AS_CONTEXT_SWITCH,\n\n\tVCS2_MI_USER_INTERRUPT,\n\tVCS2_MI_FLUSH_DW,\n\tVCS2_AS_CONTEXT_SWITCH,\n\n\tBCS_MI_USER_INTERRUPT,\n\tBCS_MMIO_SYNC_FLUSH,\n\tBCS_CMD_STREAMER_ERR,\n\tBCS_MI_FLUSH_DW,\n\tBCS_PAGE_DIRECTORY_FAULT,\n\tBCS_AS_CONTEXT_SWITCH,\n\n\tVECS_MI_USER_INTERRUPT,\n\tVECS_MI_FLUSH_DW,\n\tVECS_AS_CONTEXT_SWITCH,\n\n\tPIPE_A_FIFO_UNDERRUN,\n\tPIPE_B_FIFO_UNDERRUN,\n\tPIPE_A_CRC_ERR,\n\tPIPE_B_CRC_ERR,\n\tPIPE_A_CRC_DONE,\n\tPIPE_B_CRC_DONE,\n\tPIPE_A_ODD_FIELD,\n\tPIPE_B_ODD_FIELD,\n\tPIPE_A_EVEN_FIELD,\n\tPIPE_B_EVEN_FIELD,\n\tPIPE_A_LINE_COMPARE,\n\tPIPE_B_LINE_COMPARE,\n\tPIPE_C_LINE_COMPARE,\n\tPIPE_A_VBLANK,\n\tPIPE_B_VBLANK,\n\tPIPE_C_VBLANK,\n\tPIPE_A_VSYNC,\n\tPIPE_B_VSYNC,\n\tPIPE_C_VSYNC,\n\tPRIMARY_A_FLIP_DONE,\n\tPRIMARY_B_FLIP_DONE,\n\tPRIMARY_C_FLIP_DONE,\n\tSPRITE_A_FLIP_DONE,\n\tSPRITE_B_FLIP_DONE,\n\tSPRITE_C_FLIP_DONE,\n\n\tPCU_THERMAL,\n\tPCU_PCODE2DRIVER_MAILBOX,\n\n\tDPST_PHASE_IN,\n\tDPST_HISTOGRAM,\n\tGSE,\n\tDP_A_HOTPLUG,\n\tAUX_CHANNEL_A,\n\tPERF_COUNTER,\n\tPOISON,\n\tGTT_FAULT,\n\tERROR_INTERRUPT_COMBINED,\n\n\tFDI_RX_INTERRUPTS_TRANSCODER_A,\n\tAUDIO_CP_CHANGE_TRANSCODER_A,\n\tAUDIO_CP_REQUEST_TRANSCODER_A,\n\tFDI_RX_INTERRUPTS_TRANSCODER_B,\n\tAUDIO_CP_CHANGE_TRANSCODER_B,\n\tAUDIO_CP_REQUEST_TRANSCODER_B,\n\tFDI_RX_INTERRUPTS_TRANSCODER_C,\n\tAUDIO_CP_CHANGE_TRANSCODER_C,\n\tAUDIO_CP_REQUEST_TRANSCODER_C,\n\tERR_AND_DBG,\n\tGMBUS,\n\tSDVO_B_HOTPLUG,\n\tCRT_HOTPLUG,\n\tDP_B_HOTPLUG,\n\tDP_C_HOTPLUG,\n\tDP_D_HOTPLUG,\n\tAUX_CHANNEL_B,\n\tAUX_CHANNEL_C,\n\tAUX_CHANNEL_D,\n\tAUDIO_POWER_STATE_CHANGE_B,\n\tAUDIO_POWER_STATE_CHANGE_C,\n\tAUDIO_POWER_STATE_CHANGE_D,\n\n\tINTEL_GVT_EVENT_RESERVED,\n\tINTEL_GVT_EVENT_MAX,\n};\n\nstruct intel_gvt_irq;\nstruct intel_gvt;\nstruct intel_vgpu;\n\ntypedef void (*gvt_event_virt_handler_t)(struct intel_gvt_irq *irq,\n\tenum intel_gvt_event_type event, struct intel_vgpu *vgpu);\n\nstruct intel_gvt_irq_ops {\n\tvoid (*init_irq)(struct intel_gvt_irq *irq);\n\tvoid (*check_pending_irq)(struct intel_vgpu *vgpu);\n};\n\n \nenum intel_gvt_irq_type {\n\tINTEL_GVT_IRQ_INFO_GT,\n\tINTEL_GVT_IRQ_INFO_DPY,\n\tINTEL_GVT_IRQ_INFO_PCH,\n\tINTEL_GVT_IRQ_INFO_PM,\n\n\tINTEL_GVT_IRQ_INFO_MASTER,\n\tINTEL_GVT_IRQ_INFO_GT0,\n\tINTEL_GVT_IRQ_INFO_GT1,\n\tINTEL_GVT_IRQ_INFO_GT2,\n\tINTEL_GVT_IRQ_INFO_GT3,\n\tINTEL_GVT_IRQ_INFO_DE_PIPE_A,\n\tINTEL_GVT_IRQ_INFO_DE_PIPE_B,\n\tINTEL_GVT_IRQ_INFO_DE_PIPE_C,\n\tINTEL_GVT_IRQ_INFO_DE_PORT,\n\tINTEL_GVT_IRQ_INFO_DE_MISC,\n\tINTEL_GVT_IRQ_INFO_AUD,\n\tINTEL_GVT_IRQ_INFO_PCU,\n\n\tINTEL_GVT_IRQ_INFO_MAX,\n};\n\n#define INTEL_GVT_IRQ_BITWIDTH\t32\n\n \nstruct intel_gvt_irq_info {\n\tchar *name;\n\ti915_reg_t reg_base;\n\tenum intel_gvt_event_type bit_to_event[INTEL_GVT_IRQ_BITWIDTH];\n\tunsigned long warned;\n\tint group;\n\tDECLARE_BITMAP(downstream_irq_bitmap, INTEL_GVT_IRQ_BITWIDTH);\n\tbool has_upstream_irq;\n};\n\n \nstruct intel_gvt_event_info {\n\tint bit;\t\t\t\t \n\tint policy;\t\t\t\t \n\tstruct intel_gvt_irq_info *info;\t \n\tgvt_event_virt_handler_t v_handler;\t \n};\n\nstruct intel_gvt_irq_map {\n\tint up_irq_group;\n\tint up_irq_bit;\n\tint down_irq_group;\n\tu32 down_irq_bitmask;\n};\n\n \nstruct intel_gvt_irq {\n\tconst struct intel_gvt_irq_ops *ops;\n\tstruct intel_gvt_irq_info *info[INTEL_GVT_IRQ_INFO_MAX];\n\tDECLARE_BITMAP(irq_info_bitmap, INTEL_GVT_IRQ_INFO_MAX);\n\tstruct intel_gvt_event_info events[INTEL_GVT_EVENT_MAX];\n\tDECLARE_BITMAP(pending_events, INTEL_GVT_EVENT_MAX);\n\tstruct intel_gvt_irq_map *irq_map;\n};\n\nint intel_gvt_init_irq(struct intel_gvt *gvt);\n\nvoid intel_vgpu_trigger_virtual_event(struct intel_vgpu *vgpu,\n\tenum intel_gvt_event_type event);\n\nint intel_vgpu_reg_iir_handler(struct intel_vgpu *vgpu, unsigned int reg,\n\tvoid *p_data, unsigned int bytes);\nint intel_vgpu_reg_ier_handler(struct intel_vgpu *vgpu,\n\tunsigned int reg, void *p_data, unsigned int bytes);\nint intel_vgpu_reg_master_irq_handler(struct intel_vgpu *vgpu,\n\tunsigned int reg, void *p_data, unsigned int bytes);\nint intel_vgpu_reg_imr_handler(struct intel_vgpu *vgpu,\n\tunsigned int reg, void *p_data, unsigned int bytes);\n\nint gvt_ring_id_to_pipe_control_notify_event(int ring_id);\nint gvt_ring_id_to_mi_flush_dw_event(int ring_id);\nint gvt_ring_id_to_mi_user_interrupt_event(int ring_id);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}