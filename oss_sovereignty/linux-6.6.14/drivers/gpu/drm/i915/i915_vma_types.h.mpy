{
  "module_name": "i915_vma_types.h",
  "hash_id": "e4999465904d805c1d42e1e039c14f730fdba398485a821c008225caae857251",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_vma_types.h",
  "human_readable_source": " \n \n\n#ifndef __I915_VMA_TYPES_H__\n#define __I915_VMA_TYPES_H__\n\n#include <linux/rbtree.h>\n\n#include <drm/drm_mm.h>\n\n#include \"gem/i915_gem_object_types.h\"\n\n \n\nstruct i915_vma_resource;\n\nstruct intel_remapped_plane_info {\n\t \n\tu32 offset:31;\n\tu32 linear:1;\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\tu16 width;\n\t\t\tu16 height;\n\t\t\tu16 src_stride;\n\t\t\tu16 dst_stride;\n\t\t};\n\n\t\t \n\t\tu32 size;\n\t};\n} __packed;\n\nstruct intel_remapped_info {\n\tstruct intel_remapped_plane_info plane[4];\n\t \n\tu32 plane_alignment;\n} __packed;\n\nstruct intel_rotation_info {\n\tstruct intel_remapped_plane_info plane[2];\n} __packed;\n\nstruct intel_partial_info {\n\tu64 offset;\n\tunsigned int size;\n} __packed;\n\nenum i915_gtt_view_type {\n\tI915_GTT_VIEW_NORMAL = 0,\n\tI915_GTT_VIEW_ROTATED = sizeof(struct intel_rotation_info),\n\tI915_GTT_VIEW_PARTIAL = sizeof(struct intel_partial_info),\n\tI915_GTT_VIEW_REMAPPED = sizeof(struct intel_remapped_info),\n};\n\nstatic inline void assert_i915_gem_gtt_types(void)\n{\n\tBUILD_BUG_ON(sizeof(struct intel_rotation_info) != 2 * sizeof(u32) + 8 * sizeof(u16));\n\tBUILD_BUG_ON(sizeof(struct intel_partial_info) != sizeof(u64) + sizeof(unsigned int));\n\tBUILD_BUG_ON(sizeof(struct intel_remapped_info) != 5 * sizeof(u32) + 16 * sizeof(u16));\n\n\t \n\tBUILD_BUG_ON(offsetof(struct intel_remapped_info, plane[0]) !=\n\t\t     offsetof(struct intel_rotation_info, plane[0]));\n\tBUILD_BUG_ON(offsetofend(struct intel_remapped_info, plane[1]) !=\n\t\t     offsetofend(struct intel_rotation_info, plane[1]));\n\n\t \n\tswitch ((enum i915_gtt_view_type)0) {\n\tcase I915_GTT_VIEW_NORMAL:\n\tcase I915_GTT_VIEW_PARTIAL:\n\tcase I915_GTT_VIEW_ROTATED:\n\tcase I915_GTT_VIEW_REMAPPED:\n\t\t \n\t\tbreak;\n\t}\n}\n\nstruct i915_gtt_view {\n\tenum i915_gtt_view_type type;\n\tunion {\n\t\t \n\t\tstruct intel_partial_info partial;\n\t\tstruct intel_rotation_info rotated;\n\t\tstruct intel_remapped_info remapped;\n\t};\n};\n\n \nstruct i915_vma {\n\tstruct drm_mm_node node;\n\n\tstruct i915_address_space *vm;\n\tconst struct i915_vma_ops *ops;\n\n\tstruct drm_i915_gem_object *obj;\n\n\tstruct sg_table *pages;\n\tvoid __iomem *iomap;\n\tvoid *private;  \n\n\tstruct i915_fence_reg *fence;\n\n\tu64 size;\n\tstruct i915_page_sizes page_sizes;\n\n\t \n\tstruct i915_mmap_offset\t*mmo;\n\n\tu32 guard;  \n\tu32 fence_size;\n\tu32 fence_alignment;\n\tu32 display_alignment;\n\n\t \n\tatomic_t open_count;\n\tatomic_t flags;\n\t \n#define I915_VMA_PIN_MASK 0x3ff\n#define I915_VMA_OVERFLOW 0x200\n\n\t \n#define I915_VMA_GLOBAL_BIND_BIT 10\n#define I915_VMA_LOCAL_BIND_BIT  11\n\n#define I915_VMA_GLOBAL_BIND\t((int)BIT(I915_VMA_GLOBAL_BIND_BIT))\n#define I915_VMA_LOCAL_BIND\t((int)BIT(I915_VMA_LOCAL_BIND_BIT))\n\n#define I915_VMA_BIND_MASK (I915_VMA_GLOBAL_BIND | I915_VMA_LOCAL_BIND)\n\n#define I915_VMA_ERROR_BIT\t12\n#define I915_VMA_ERROR\t\t((int)BIT(I915_VMA_ERROR_BIT))\n\n#define I915_VMA_GGTT_BIT\t13\n#define I915_VMA_CAN_FENCE_BIT\t14\n#define I915_VMA_USERFAULT_BIT\t15\n#define I915_VMA_GGTT_WRITE_BIT\t16\n\n#define I915_VMA_GGTT\t\t((int)BIT(I915_VMA_GGTT_BIT))\n#define I915_VMA_CAN_FENCE\t((int)BIT(I915_VMA_CAN_FENCE_BIT))\n#define I915_VMA_USERFAULT\t((int)BIT(I915_VMA_USERFAULT_BIT))\n#define I915_VMA_GGTT_WRITE\t((int)BIT(I915_VMA_GGTT_WRITE_BIT))\n\n#define I915_VMA_SCANOUT_BIT\t17\n#define I915_VMA_SCANOUT\t((int)BIT(I915_VMA_SCANOUT_BIT))\n\n\tstruct i915_active active;\n\n#define I915_VMA_PAGES_BIAS 24\n#define I915_VMA_PAGES_ACTIVE (BIT(24) | 1)\n\tatomic_t pages_count;  \n\n\t \n\tbool vm_ddestroy;\n\n\t \n\tstruct i915_gtt_view gtt_view;\n\n\t \n\tstruct list_head vm_link;\n\n\tstruct list_head obj_link;  \n\tstruct rb_node obj_node;\n\tstruct hlist_node obj_hash;\n\n\t \n\tstruct list_head evict_link;\n\n\tstruct list_head closed_link;\n\n\t \n\tstruct i915_vma_resource *resource;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}