{
  "module_name": "i915_selftest.h",
  "hash_id": "5375642112e0dcd8fc2f34cf6d989292d290d67c0d9a054077e103d4a62f4e3c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_selftest.h",
  "human_readable_source": " \n\n#ifndef __I915_SELFTEST_H__\n#define __I915_SELFTEST_H__\n\n#include <linux/types.h>\n\nstruct pci_dev;\nstruct drm_i915_private;\n\nstruct i915_selftest {\n\tunsigned long timeout_jiffies;\n\tunsigned int timeout_ms;\n\tunsigned int random_seed;\n\tchar *filter;\n\tint mock;\n\tint live;\n\tint perf;\n};\n\n#if IS_ENABLED(CONFIG_DRM_I915_SELFTEST)\n#include <linux/fault-inject.h>\n\nextern struct i915_selftest i915_selftest;\n\nint i915_mock_selftests(void);\nint i915_live_selftests(struct pci_dev *pdev);\nint i915_perf_selftests(struct pci_dev *pdev);\n\n \n#define selftest(name, func) int func(void);\n#include \"selftests/i915_mock_selftests.h\"\n#undef selftest\n#define selftest(name, func) int func(struct drm_i915_private *i915);\n#include \"selftests/i915_live_selftests.h\"\n#include \"selftests/i915_perf_selftests.h\"\n#undef selftest\n\nstruct i915_subtest {\n\tint (*func)(void *data);\n\tconst char *name;\n};\n\nint __i915_nop_setup(void *data);\nint __i915_nop_teardown(int err, void *data);\n\nint __i915_live_setup(void *data);\nint __i915_live_teardown(int err, void *data);\n\nint __intel_gt_live_setup(void *data);\nint __intel_gt_live_teardown(int err, void *data);\n\nint __i915_subtests(const char *caller,\n\t\t    int (*setup)(void *data),\n\t\t    int (*teardown)(int err, void *data),\n\t\t    const struct i915_subtest *st,\n\t\t    unsigned int count,\n\t\t    void *data);\n#define i915_subtests(T, data) \\\n\t__i915_subtests(__func__, \\\n\t\t\t__i915_nop_setup, __i915_nop_teardown, \\\n\t\t\tT, ARRAY_SIZE(T), data)\n#define i915_live_subtests(T, data) ({ \\\n\ttypecheck(struct drm_i915_private *, data); \\\n\t(data)->gt[0]->uc.guc.submission_state.sched_disable_delay_ms = 0; \\\n\t__i915_subtests(__func__, \\\n\t\t\t__i915_live_setup, __i915_live_teardown, \\\n\t\t\tT, ARRAY_SIZE(T), data); \\\n})\n#define intel_gt_live_subtests(T, data) ({ \\\n\ttypecheck(struct intel_gt *, data); \\\n\t(data)->uc.guc.submission_state.sched_disable_delay_ms = 0; \\\n\t__i915_subtests(__func__, \\\n\t\t\t__intel_gt_live_setup, __intel_gt_live_teardown, \\\n\t\t\tT, ARRAY_SIZE(T), data); \\\n})\n\n#define SUBTEST(x) { x, #x }\n\n#define I915_SELFTEST_DECLARE(x) x\n#define I915_SELFTEST_ONLY(x) unlikely(x)\n#define I915_SELFTEST_EXPORT\n\n#else  \n\nstatic inline int i915_mock_selftests(void) { return 0; }\nstatic inline int i915_live_selftests(struct pci_dev *pdev) { return 0; }\nstatic inline int i915_perf_selftests(struct pci_dev *pdev) { return 0; }\n\n#define I915_SELFTEST_DECLARE(x)\n#define I915_SELFTEST_ONLY(x) 0\n#define I915_SELFTEST_EXPORT static\n\n#endif\n\n \n\n#define IGT_TIMEOUT(name__) \\\n\tunsigned long name__ = jiffies + i915_selftest.timeout_jiffies\n\n__printf(2, 3)\nbool __igt_timeout(unsigned long timeout, const char *fmt, ...);\n\n#define igt_timeout(t, fmt, ...) \\\n\t__igt_timeout((t), KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)\n\nvoid igt_hexdump(const void *buf, size_t len);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}