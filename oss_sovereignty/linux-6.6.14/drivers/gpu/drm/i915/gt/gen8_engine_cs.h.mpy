{
  "module_name": "gen8_engine_cs.h",
  "hash_id": "7f81c771473a91f7a41850b96a7e6b2f833d656473b9e3b81658f925b8a9c47e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/gen8_engine_cs.h",
  "human_readable_source": " \n \n\n#ifndef __GEN8_ENGINE_CS_H__\n#define __GEN8_ENGINE_CS_H__\n\n#include <linux/string.h>\n#include <linux/types.h>\n\n#include \"i915_gem.h\"  \n#include \"intel_gt_regs.h\"\n#include \"intel_gpu_commands.h\"\n\nstruct intel_engine_cs;\nstruct intel_gt;\nstruct i915_request;\n\nint gen8_emit_flush_rcs(struct i915_request *rq, u32 mode);\nint gen11_emit_flush_rcs(struct i915_request *rq, u32 mode);\nint gen12_emit_flush_rcs(struct i915_request *rq, u32 mode);\n\nint gen8_emit_flush_xcs(struct i915_request *rq, u32 mode);\nint gen12_emit_flush_xcs(struct i915_request *rq, u32 mode);\n\nint gen8_emit_init_breadcrumb(struct i915_request *rq);\n\nint gen8_emit_bb_start_noarb(struct i915_request *rq,\n\t\t\t     u64 offset, u32 len,\n\t\t\t     const unsigned int flags);\nint gen8_emit_bb_start(struct i915_request *rq,\n\t\t       u64 offset, u32 len,\n\t\t       const unsigned int flags);\n\nint xehp_emit_bb_start_noarb(struct i915_request *rq,\n\t\t\t     u64 offset, u32 len,\n\t\t\t     const unsigned int flags);\nint xehp_emit_bb_start(struct i915_request *rq,\n\t\t       u64 offset, u32 len,\n\t\t       const unsigned int flags);\n\nu32 *gen8_emit_fini_breadcrumb_xcs(struct i915_request *rq, u32 *cs);\nu32 *gen12_emit_fini_breadcrumb_xcs(struct i915_request *rq, u32 *cs);\n\nu32 *gen8_emit_fini_breadcrumb_rcs(struct i915_request *rq, u32 *cs);\nu32 *gen11_emit_fini_breadcrumb_rcs(struct i915_request *rq, u32 *cs);\nu32 *gen12_emit_fini_breadcrumb_rcs(struct i915_request *rq, u32 *cs);\n\nu32 *gen12_emit_aux_table_inv(struct intel_engine_cs *engine, u32 *cs);\n\nstatic inline u32 *\n__gen8_emit_pipe_control(u32 *batch, u32 bit_group_0,\n\t\t\t u32 bit_group_1, u32 offset)\n{\n\tmemset(batch, 0, 6 * sizeof(u32));\n\n\tbatch[0] = GFX_OP_PIPE_CONTROL(6) | bit_group_0;\n\tbatch[1] = bit_group_1;\n\tbatch[2] = offset;\n\n\treturn batch + 6;\n}\n\nstatic inline u32 *gen8_emit_pipe_control(u32 *batch,\n\t\t\t\t\t  u32 bit_group_1, u32 offset)\n{\n\treturn __gen8_emit_pipe_control(batch, 0, bit_group_1, offset);\n}\n\nstatic inline u32 *gen12_emit_pipe_control(u32 *batch, u32 bit_group_0,\n\t\t\t\t\t   u32 bit_group_1, u32 offset)\n{\n\treturn __gen8_emit_pipe_control(batch, bit_group_0,\n\t\t\t\t\tbit_group_1, offset);\n}\n\nstatic inline u32 *\n__gen8_emit_write_rcs(u32 *cs, u32 value, u32 offset, u32 flags0, u32 flags1)\n{\n\t*cs++ = GFX_OP_PIPE_CONTROL(6) | flags0;\n\t*cs++ = flags1 | PIPE_CONTROL_QW_WRITE;\n\t*cs++ = offset;\n\t*cs++ = 0;\n\t*cs++ = value;\n\t*cs++ = 0;  \n\n\treturn cs;\n}\n\nstatic inline u32*\ngen8_emit_ggtt_write_rcs(u32 *cs, u32 value, u32 gtt_offset, u32 flags)\n{\n\t \n\tGEM_BUG_ON(!IS_ALIGNED(gtt_offset, 8));\n\n\treturn __gen8_emit_write_rcs(cs,\n\t\t\t\t     value,\n\t\t\t\t     gtt_offset,\n\t\t\t\t     0,\n\t\t\t\t     flags | PIPE_CONTROL_GLOBAL_GTT_IVB);\n}\n\nstatic inline u32*\ngen12_emit_ggtt_write_rcs(u32 *cs, u32 value, u32 gtt_offset, u32 flags0, u32 flags1)\n{\n\t \n\tGEM_BUG_ON(!IS_ALIGNED(gtt_offset, 8));\n\n\treturn __gen8_emit_write_rcs(cs,\n\t\t\t\t     value,\n\t\t\t\t     gtt_offset,\n\t\t\t\t     flags0,\n\t\t\t\t     flags1 | PIPE_CONTROL_GLOBAL_GTT_IVB);\n}\n\nstatic inline u32 *\n__gen8_emit_flush_dw(u32 *cs, u32 value, u32 gtt_offset, u32 flags)\n{\n\t*cs++ = (MI_FLUSH_DW + 1) | flags;\n\t*cs++ = gtt_offset;\n\t*cs++ = 0;\n\t*cs++ = value;\n\n\treturn cs;\n}\n\nstatic inline u32 *\ngen8_emit_ggtt_write(u32 *cs, u32 value, u32 gtt_offset, u32 flags)\n{\n\t \n\tGEM_BUG_ON(gtt_offset & (1 << 5));\n\t \n\tGEM_BUG_ON(!IS_ALIGNED(gtt_offset, 8));\n\n\treturn __gen8_emit_flush_dw(cs,\n\t\t\t\t    value,\n\t\t\t\t    gtt_offset | MI_FLUSH_DW_USE_GTT,\n\t\t\t\t    flags | MI_FLUSH_DW_OP_STOREDW);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}