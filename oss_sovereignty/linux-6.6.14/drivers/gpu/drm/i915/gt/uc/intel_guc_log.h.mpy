{
  "module_name": "intel_guc_log.h",
  "hash_id": "29e1349c062a099e6b70c01d653bf63fae7dc6e215fd4b452f0ffe18b1b5516d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/uc/intel_guc_log.h",
  "human_readable_source": " \n \n\n#ifndef _INTEL_GUC_LOG_H_\n#define _INTEL_GUC_LOG_H_\n\n#include <linux/mutex.h>\n#include <linux/relay.h>\n#include <linux/workqueue.h>\n\n#include \"intel_guc_fwif.h\"\n#include \"i915_gem.h\"\n\nstruct intel_guc;\n\n \n#define GUC_LOG_LEVEL_DISABLED\t\t0\n#define GUC_LOG_LEVEL_NON_VERBOSE\t1\n#define GUC_LOG_LEVEL_IS_ENABLED(x)\t((x) > GUC_LOG_LEVEL_DISABLED)\n#define GUC_LOG_LEVEL_IS_VERBOSE(x)\t((x) > GUC_LOG_LEVEL_NON_VERBOSE)\n#define GUC_LOG_LEVEL_TO_VERBOSITY(x) ({\t\t\\\n\ttypeof(x) _x = (x);\t\t\t\t\\\n\tGUC_LOG_LEVEL_IS_VERBOSE(_x) ? _x - 2 : 0;\t\\\n})\n#define GUC_VERBOSITY_TO_LOG_LEVEL(x)\t((x) + 2)\n#define GUC_LOG_LEVEL_MAX GUC_VERBOSITY_TO_LOG_LEVEL(GUC_LOG_VERBOSITY_MAX)\n\nenum {\n\tGUC_LOG_SECTIONS_CRASH,\n\tGUC_LOG_SECTIONS_DEBUG,\n\tGUC_LOG_SECTIONS_CAPTURE,\n\tGUC_LOG_SECTIONS_LIMIT\n};\n\nstruct intel_guc_log {\n\tu32 level;\n\n\t \n\tstruct {\n\t\ts32 bytes;\t \n\t\ts32 units;\t \n\t\ts32 count;\t \n\t\tu32 flag;\t \n\t} sizes[GUC_LOG_SECTIONS_LIMIT];\n\tbool sizes_initialised;\n\n\t \n\tstruct i915_vma *vma;\n\tvoid *buf_addr;\n\n\t \n\tstruct {\n\t\tbool buf_in_use;\n\t\tbool started;\n\t\tstruct work_struct flush_work;\n\t\tstruct rchan *channel;\n\t\tstruct mutex lock;\n\t\tu32 full_count;\n\t} relay;\n\n\t \n\tstruct {\n\t\tu32 sampled_overflow;\n\t\tu32 overflow;\n\t\tu32 flush;\n\t} stats[GUC_MAX_LOG_BUFFER];\n};\n\nvoid intel_guc_log_init_early(struct intel_guc_log *log);\nbool intel_guc_check_log_buf_overflow(struct intel_guc_log *log, enum guc_log_buffer_type type,\n\t\t\t\t      unsigned int full_cnt);\nunsigned int intel_guc_get_log_buffer_size(struct intel_guc_log *log,\n\t\t\t\t\t   enum guc_log_buffer_type type);\nsize_t intel_guc_get_log_buffer_offset(struct intel_guc_log *log, enum guc_log_buffer_type type);\nint intel_guc_log_create(struct intel_guc_log *log);\nvoid intel_guc_log_destroy(struct intel_guc_log *log);\n\nint intel_guc_log_set_level(struct intel_guc_log *log, u32 level);\nbool intel_guc_log_relay_created(const struct intel_guc_log *log);\nint intel_guc_log_relay_open(struct intel_guc_log *log);\nint intel_guc_log_relay_start(struct intel_guc_log *log);\nvoid intel_guc_log_relay_flush(struct intel_guc_log *log);\nvoid intel_guc_log_relay_close(struct intel_guc_log *log);\n\nvoid intel_guc_log_handle_flush_event(struct intel_guc_log *log);\n\nstatic inline u32 intel_guc_log_get_level(struct intel_guc_log *log)\n{\n\treturn log->level;\n}\n\nvoid intel_guc_log_info(struct intel_guc_log *log, struct drm_printer *p);\nint intel_guc_log_dump(struct intel_guc_log *log, struct drm_printer *p,\n\t\t       bool dump_load_err);\n\nu32 intel_guc_log_section_size_capture(struct intel_guc_log *log);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}