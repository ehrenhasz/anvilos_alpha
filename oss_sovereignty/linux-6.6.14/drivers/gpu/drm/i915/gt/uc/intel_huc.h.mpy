{
  "module_name": "intel_huc.h",
  "hash_id": "d653ff009427151c28b244eda166ae081606eb38871798de178d13ccce8c3b7c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/uc/intel_huc.h",
  "human_readable_source": " \n \n\n#ifndef _INTEL_HUC_H_\n#define _INTEL_HUC_H_\n\n#include \"i915_reg_defs.h\"\n#include \"i915_sw_fence.h\"\n#include \"intel_uc_fw.h\"\n#include \"intel_huc_fw.h\"\n\n#include <linux/notifier.h>\n#include <linux/hrtimer.h>\n\nstruct bus_type;\nstruct i915_vma;\n\nenum intel_huc_delayed_load_status {\n\tINTEL_HUC_WAITING_ON_GSC = 0,\n\tINTEL_HUC_WAITING_ON_PXP,\n\tINTEL_HUC_DELAYED_LOAD_ERROR,\n};\n\nenum intel_huc_authentication_type {\n\tINTEL_HUC_AUTH_BY_GUC = 0,\n\tINTEL_HUC_AUTH_BY_GSC,\n\tINTEL_HUC_AUTH_MAX_MODES\n};\n\nstruct intel_huc {\n\t \n\tstruct intel_uc_fw fw;\n\n\t \n\tstruct {\n\t\ti915_reg_t reg;\n\t\tu32 mask;\n\t\tu32 value;\n\t} status[INTEL_HUC_AUTH_MAX_MODES];\n\n\tstruct {\n\t\tstruct i915_sw_fence fence;\n\t\tstruct hrtimer timer;\n\t\tstruct notifier_block nb;\n\t\tenum intel_huc_delayed_load_status status;\n\t} delayed_load;\n\n\t \n\tstruct i915_vma *heci_pkt;\n\n\tbool loaded_via_gsc;\n};\n\nint intel_huc_sanitize(struct intel_huc *huc);\nvoid intel_huc_init_early(struct intel_huc *huc);\nint intel_huc_init(struct intel_huc *huc);\nvoid intel_huc_fini(struct intel_huc *huc);\nvoid intel_huc_suspend(struct intel_huc *huc);\nint intel_huc_auth(struct intel_huc *huc, enum intel_huc_authentication_type type);\nint intel_huc_wait_for_auth_complete(struct intel_huc *huc,\n\t\t\t\t     enum intel_huc_authentication_type type);\nbool intel_huc_is_authenticated(struct intel_huc *huc,\n\t\t\t\tenum intel_huc_authentication_type type);\nint intel_huc_check_status(struct intel_huc *huc);\nvoid intel_huc_update_auth_status(struct intel_huc *huc);\n\nvoid intel_huc_register_gsc_notifier(struct intel_huc *huc, const struct bus_type *bus);\nvoid intel_huc_unregister_gsc_notifier(struct intel_huc *huc, const struct bus_type *bus);\n\nstatic inline bool intel_huc_is_supported(struct intel_huc *huc)\n{\n\treturn intel_uc_fw_is_supported(&huc->fw);\n}\n\nstatic inline bool intel_huc_is_wanted(struct intel_huc *huc)\n{\n\treturn intel_uc_fw_is_enabled(&huc->fw);\n}\n\nstatic inline bool intel_huc_is_used(struct intel_huc *huc)\n{\n\tGEM_BUG_ON(__intel_uc_fw_status(&huc->fw) == INTEL_UC_FIRMWARE_SELECTED);\n\treturn intel_uc_fw_is_available(&huc->fw);\n}\n\nstatic inline bool intel_huc_is_loaded_by_gsc(const struct intel_huc *huc)\n{\n\treturn huc->loaded_via_gsc;\n}\n\nstatic inline bool intel_huc_wait_required(struct intel_huc *huc)\n{\n\treturn intel_huc_is_used(huc) && intel_huc_is_loaded_by_gsc(huc) &&\n\t       !intel_huc_is_authenticated(huc, INTEL_HUC_AUTH_BY_GSC);\n}\n\nvoid intel_huc_load_status(struct intel_huc *huc, struct drm_printer *p);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}