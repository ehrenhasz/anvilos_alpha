{
  "module_name": "intel_timeline.h",
  "hash_id": "720e7c720952a2c69acc3b3c0f3fc9882d0983663ba1645dac81f9ee8ba93fa8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/intel_timeline.h",
  "human_readable_source": " \n \n\n#ifndef I915_TIMELINE_H\n#define I915_TIMELINE_H\n\n#include <linux/lockdep.h>\n\n#include \"i915_active.h\"\n#include \"i915_syncmap.h\"\n#include \"intel_timeline_types.h\"\n\nstruct drm_printer;\n\nstruct intel_timeline *\n__intel_timeline_create(struct intel_gt *gt,\n\t\t\tstruct i915_vma *global_hwsp,\n\t\t\tunsigned int offset);\n\nstatic inline struct intel_timeline *\nintel_timeline_create(struct intel_gt *gt)\n{\n\treturn __intel_timeline_create(gt, NULL, 0);\n}\n\nstruct intel_timeline *\nintel_timeline_create_from_engine(struct intel_engine_cs *engine,\n\t\t\t\t  unsigned int offset);\n\nstatic inline struct intel_timeline *\nintel_timeline_get(struct intel_timeline *timeline)\n{\n\tkref_get(&timeline->kref);\n\treturn timeline;\n}\n\nvoid __intel_timeline_free(struct kref *kref);\nstatic inline void intel_timeline_put(struct intel_timeline *timeline)\n{\n\tkref_put(&timeline->kref, __intel_timeline_free);\n}\n\nstatic inline int __intel_timeline_sync_set(struct intel_timeline *tl,\n\t\t\t\t\t    u64 context, u32 seqno)\n{\n\treturn i915_syncmap_set(&tl->sync, context, seqno);\n}\n\nstatic inline int intel_timeline_sync_set(struct intel_timeline *tl,\n\t\t\t\t\t  const struct dma_fence *fence)\n{\n\treturn __intel_timeline_sync_set(tl, fence->context, fence->seqno);\n}\n\nstatic inline bool __intel_timeline_sync_is_later(struct intel_timeline *tl,\n\t\t\t\t\t\t  u64 context, u32 seqno)\n{\n\treturn i915_syncmap_is_later(&tl->sync, context, seqno);\n}\n\nstatic inline bool intel_timeline_sync_is_later(struct intel_timeline *tl,\n\t\t\t\t\t\tconst struct dma_fence *fence)\n{\n\treturn __intel_timeline_sync_is_later(tl, fence->context, fence->seqno);\n}\n\nvoid __intel_timeline_pin(struct intel_timeline *tl);\nint intel_timeline_pin(struct intel_timeline *tl, struct i915_gem_ww_ctx *ww);\nvoid intel_timeline_enter(struct intel_timeline *tl);\nint intel_timeline_get_seqno(struct intel_timeline *tl,\n\t\t\t     struct i915_request *rq,\n\t\t\t     u32 *seqno);\nvoid intel_timeline_exit(struct intel_timeline *tl);\nvoid intel_timeline_unpin(struct intel_timeline *tl);\n\nvoid intel_timeline_reset_seqno(const struct intel_timeline *tl);\n\nint intel_timeline_read_hwsp(struct i915_request *from,\n\t\t\t     struct i915_request *until,\n\t\t\t     u32 *hwsp_offset);\n\nvoid intel_gt_init_timelines(struct intel_gt *gt);\nvoid intel_gt_fini_timelines(struct intel_gt *gt);\n\nvoid intel_gt_show_timelines(struct intel_gt *gt,\n\t\t\t     struct drm_printer *m,\n\t\t\t     void (*show_request)(struct drm_printer *m,\n\t\t\t\t\t\t  const struct i915_request *rq,\n\t\t\t\t\t\t  const char *prefix,\n\t\t\t\t\t\t  int indent));\n\nstatic inline bool\nintel_timeline_is_last(const struct intel_timeline *tl,\n\t\t       const struct i915_request *rq)\n{\n\treturn list_is_last_rcu(&rq->link, &tl->requests);\n}\n\nI915_SELFTEST_DECLARE(int intel_timeline_pin_map(struct intel_timeline *tl));\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}