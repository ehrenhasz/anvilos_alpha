{
  "module_name": "gen6_ppgtt.h",
  "hash_id": "63563b958142e9f4f3df58965b2926902f93d1f0f723979cf03df2d501fffa01",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/gen6_ppgtt.h",
  "human_readable_source": " \n \n\n#ifndef __GEN6_PPGTT_H__\n#define __GEN6_PPGTT_H__\n\n#include \"intel_gtt.h\"\n\nstruct i915_gem_ww_ctx;\n\nstruct gen6_ppgtt {\n\tstruct i915_ppgtt base;\n\n\tstruct mutex flush;\n\tstruct i915_vma *vma;\n\tgen6_pte_t __iomem *pd_addr;\n\tu32 pp_dir;\n\n\tatomic_t pin_count;\n\n\tbool scan_for_unused_pt;\n};\n\nstatic inline u32 gen6_pte_index(u32 addr)\n{\n\treturn i915_pte_index(addr, GEN6_PDE_SHIFT);\n}\n\nstatic inline u32 gen6_pte_count(u32 addr, u32 length)\n{\n\treturn i915_pte_count(addr, length, GEN6_PDE_SHIFT);\n}\n\nstatic inline u32 gen6_pde_index(u32 addr)\n{\n\treturn i915_pde_index(addr, GEN6_PDE_SHIFT);\n}\n\n#define __to_gen6_ppgtt(base) container_of(base, struct gen6_ppgtt, base)\n\nstatic inline struct gen6_ppgtt *to_gen6_ppgtt(struct i915_ppgtt *base)\n{\n\tBUILD_BUG_ON(offsetof(struct gen6_ppgtt, base));\n\treturn __to_gen6_ppgtt(base);\n}\n\n \n#define gen6_for_each_pde(pt, pd, start, length, iter)\t\t\t\\\n\tfor (iter = gen6_pde_index(start);\t\t\t\t\\\n\t     length > 0 && iter < I915_PDES &&\t\t\t\t\\\n\t\t     (pt = i915_pt_entry(pd, iter), true);\t\t\\\n\t     ({ u32 temp = ALIGN(start + 1, 1 << GEN6_PDE_SHIFT);\t\\\n\t\t    temp = min(temp - start, length);\t\t\t\\\n\t\t    start += temp; length -= temp; }), ++iter)\n\n#define gen6_for_all_pdes(pt, pd, iter)\t\t\t\t\t\\\n\tfor (iter = 0;\t\t\t\t\t\t\t\\\n\t     iter < I915_PDES &&\t\t\t\t\t\\\n\t\t     (pt = i915_pt_entry(pd, iter), true);\t\t\\\n\t     ++iter)\n\nint gen6_ppgtt_pin(struct i915_ppgtt *base, struct i915_gem_ww_ctx *ww);\nvoid gen6_ppgtt_unpin(struct i915_ppgtt *base);\nvoid gen6_ppgtt_enable(struct intel_gt *gt);\nvoid gen7_ppgtt_enable(struct intel_gt *gt);\nstruct i915_ppgtt *gen6_ppgtt_create(struct intel_gt *gt);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}