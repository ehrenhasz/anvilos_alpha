{
  "module_name": "intel_gpu_commands.h",
  "hash_id": "0609f6582a067f3d27cddca21cc53a7ab33cb4af7d380ee82fb033499de0b576",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/gt/intel_gpu_commands.h",
  "human_readable_source": " \n \n\n#ifndef _INTEL_GPU_COMMANDS_H_\n#define _INTEL_GPU_COMMANDS_H_\n\n#include <linux/bitops.h>\n\n \n#define alignof_dword 4\n#define alignof_qword 8\n\n \n#define INSTR_CLIENT_SHIFT      29\n#define   INSTR_MI_CLIENT       0x0\n#define   INSTR_BC_CLIENT       0x2\n#define   INSTR_GSC_CLIENT      0x2  \n#define   INSTR_RC_CLIENT       0x3\n#define INSTR_SUBCLIENT_SHIFT   27\n#define INSTR_SUBCLIENT_MASK    0x18000000\n#define   INSTR_MEDIA_SUBCLIENT 0x2\n#define INSTR_26_TO_24_MASK\t0x7000000\n#define   INSTR_26_TO_24_SHIFT\t24\n\n#define __INSTR(client) ((client) << INSTR_CLIENT_SHIFT)\n\n \n#define MI_INSTR(opcode, flags) \\\n\t(__INSTR(INSTR_MI_CLIENT) | (opcode) << 23 | (flags))\n \n#define  MI_GLOBAL_GTT    (1<<22)\n\n#define MI_NOOP\t\t\tMI_INSTR(0, 0)\n#define MI_SET_PREDICATE\tMI_INSTR(0x01, 0)\n#define   MI_SET_PREDICATE_DISABLE\t(0 << 0)\n#define MI_USER_INTERRUPT\tMI_INSTR(0x02, 0)\n#define MI_WAIT_FOR_EVENT       MI_INSTR(0x03, 0)\n#define   MI_WAIT_FOR_OVERLAY_FLIP\t(1<<16)\n#define   MI_WAIT_FOR_PLANE_B_FLIP      (1<<6)\n#define   MI_WAIT_FOR_PLANE_A_FLIP      (1<<2)\n#define   MI_WAIT_FOR_PLANE_A_SCANLINES (1<<1)\n#define MI_FLUSH\t\tMI_INSTR(0x04, 0)\n#define   MI_READ_FLUSH\t\t(1 << 0)\n#define   MI_EXE_FLUSH\t\t(1 << 1)\n#define   MI_NO_WRITE_FLUSH\t(1 << 2)\n#define   MI_SCENE_COUNT\t(1 << 3)  \n#define   MI_END_SCENE\t\t(1 << 4)  \n#define   MI_INVALIDATE_ISP\t(1 << 5)  \n#define MI_REPORT_HEAD\t\tMI_INSTR(0x07, 0)\n#define MI_ARB_ON_OFF\t\tMI_INSTR(0x08, 0)\n#define   MI_ARB_ENABLE\t\t\t(1<<0)\n#define   MI_ARB_DISABLE\t\t(0<<0)\n#define MI_BATCH_BUFFER_END\tMI_INSTR(0x0a, 0)\n#define MI_SUSPEND_FLUSH\tMI_INSTR(0x0b, 0)\n#define   MI_SUSPEND_FLUSH_EN\t(1<<0)\n#define MI_SET_APPID\t\tMI_INSTR(0x0e, 0)\n#define   MI_SET_APPID_SESSION_ID(x)\t((x) << 0)\n#define MI_OVERLAY_FLIP\t\tMI_INSTR(0x11, 0)\n#define   MI_OVERLAY_CONTINUE\t(0x0<<21)\n#define   MI_OVERLAY_ON\t\t(0x1<<21)\n#define   MI_OVERLAY_OFF\t(0x2<<21)\n#define MI_LOAD_SCAN_LINES_INCL MI_INSTR(0x12, 0)\n#define MI_DISPLAY_FLIP\t\tMI_INSTR(0x14, 2)\n#define MI_DISPLAY_FLIP_I915\tMI_INSTR(0x14, 1)\n#define   MI_DISPLAY_FLIP_PLANE(n) ((n) << 20)\n \n#define   MI_DISPLAY_FLIP_IVB_PLANE_A  (0 << 19)\n#define   MI_DISPLAY_FLIP_IVB_PLANE_B  (1 << 19)\n#define   MI_DISPLAY_FLIP_IVB_SPRITE_A (2 << 19)\n#define   MI_DISPLAY_FLIP_IVB_SPRITE_B (3 << 19)\n#define   MI_DISPLAY_FLIP_IVB_PLANE_C  (4 << 19)\n#define   MI_DISPLAY_FLIP_IVB_SPRITE_C (5 << 19)\n \n#define   MI_DISPLAY_FLIP_SKL_PLANE_1_A\t(0 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_1_B\t(1 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_1_C\t(2 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_2_A\t(4 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_2_B\t(5 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_2_C\t(6 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_3_A\t(7 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_3_B\t(8 << 8)\n#define   MI_DISPLAY_FLIP_SKL_PLANE_3_C\t(9 << 8)\n#define MI_SEMAPHORE_MBOX\tMI_INSTR(0x16, 1)  \n#define   MI_SEMAPHORE_GLOBAL_GTT    (1<<22)\n#define   MI_SEMAPHORE_UPDATE\t    (1<<21)\n#define   MI_SEMAPHORE_COMPARE\t    (1<<20)\n#define   MI_SEMAPHORE_REGISTER\t    (1<<18)\n#define   MI_SEMAPHORE_SYNC_VR\t    (0<<16)  \n#define   MI_SEMAPHORE_SYNC_VER\t    (1<<16)  \n#define   MI_SEMAPHORE_SYNC_BR\t    (2<<16)  \n#define   MI_SEMAPHORE_SYNC_BV\t    (0<<16)  \n#define   MI_SEMAPHORE_SYNC_VEV\t    (1<<16)  \n#define   MI_SEMAPHORE_SYNC_RV\t    (2<<16)  \n#define   MI_SEMAPHORE_SYNC_RB\t    (0<<16)  \n#define   MI_SEMAPHORE_SYNC_VEB\t    (1<<16)  \n#define   MI_SEMAPHORE_SYNC_VB\t    (2<<16)  \n#define   MI_SEMAPHORE_SYNC_BVE\t    (0<<16)  \n#define   MI_SEMAPHORE_SYNC_VVE\t    (1<<16)  \n#define   MI_SEMAPHORE_SYNC_RVE\t    (2<<16)  \n#define   MI_SEMAPHORE_SYNC_INVALID (3<<16)\n#define   MI_SEMAPHORE_SYNC_MASK    (3<<16)\n#define MI_SET_CONTEXT\t\tMI_INSTR(0x18, 0)\n#define   MI_MM_SPACE_GTT\t\t(1<<8)\n#define   MI_MM_SPACE_PHYSICAL\t\t(0<<8)\n#define   MI_SAVE_EXT_STATE_EN\t\t(1<<3)\n#define   MI_RESTORE_EXT_STATE_EN\t(1<<2)\n#define   MI_FORCE_RESTORE\t\t(1<<1)\n#define   MI_RESTORE_INHIBIT\t\t(1<<0)\n#define   HSW_MI_RS_SAVE_STATE_EN       (1<<3)\n#define   HSW_MI_RS_RESTORE_STATE_EN    (1<<2)\n#define MI_SEMAPHORE_SIGNAL\tMI_INSTR(0x1b, 0)  \n#define   MI_SEMAPHORE_TARGET(engine)\t((engine)<<15)\n#define MI_SEMAPHORE_WAIT\tMI_INSTR(0x1c, 2)  \n#define MI_SEMAPHORE_WAIT_TOKEN\tMI_INSTR(0x1c, 3)  \n#define   MI_SEMAPHORE_REGISTER_POLL\t(1 << 16)\n#define   MI_SEMAPHORE_POLL\t\t(1 << 15)\n#define   MI_SEMAPHORE_SAD_GT_SDD\t(0 << 12)\n#define   MI_SEMAPHORE_SAD_GTE_SDD\t(1 << 12)\n#define   MI_SEMAPHORE_SAD_LT_SDD\t(2 << 12)\n#define   MI_SEMAPHORE_SAD_LTE_SDD\t(3 << 12)\n#define   MI_SEMAPHORE_SAD_EQ_SDD\t(4 << 12)\n#define   MI_SEMAPHORE_SAD_NEQ_SDD\t(5 << 12)\n#define   MI_SEMAPHORE_TOKEN_MASK\tREG_GENMASK(9, 5)\n#define   MI_SEMAPHORE_TOKEN_SHIFT\t5\n#define MI_STORE_DATA_IMM\tMI_INSTR(0x20, 0)\n#define MI_STORE_DWORD_IMM\tMI_INSTR(0x20, 1)\n#define MI_STORE_DWORD_IMM_GEN4\tMI_INSTR(0x20, 2)\n#define MI_STORE_QWORD_IMM_GEN8 (MI_INSTR(0x20, 3) | REG_BIT(21))\n#define   MI_MEM_VIRTUAL\t(1 << 22)  \n#define   MI_USE_GGTT\t\t(1 << 22)  \n#define MI_STORE_DWORD_INDEX\tMI_INSTR(0x21, 1)\n#define MI_ATOMIC\t\tMI_INSTR(0x2f, 1)\n#define MI_ATOMIC_INLINE\t(MI_INSTR(0x2f, 9) | MI_ATOMIC_INLINE_DATA)\n#define   MI_ATOMIC_GLOBAL_GTT\t\t(1 << 22)\n#define   MI_ATOMIC_INLINE_DATA\t\t(1 << 18)\n#define   MI_ATOMIC_CS_STALL\t\t(1 << 17)\n#define\t  MI_ATOMIC_MOVE\t\t(0x4 << 8)\n\n \n#define MI_LOAD_REGISTER_IMM(x)\tMI_INSTR(0x22, 2*(x)-1)\n \n#define   MI_LRI_LRM_CS_MMIO\t\tREG_BIT(19)\n#define   MI_LRI_MMIO_REMAP_EN\t\tREG_BIT(17)\n#define   MI_LRI_FORCE_POSTED\t\t(1<<12)\n#define MI_LOAD_REGISTER_IMM_MAX_REGS (126)\n#define MI_STORE_REGISTER_MEM        MI_INSTR(0x24, 1)\n#define MI_STORE_REGISTER_MEM_GEN8   MI_INSTR(0x24, 2)\n#define   MI_SRM_LRM_GLOBAL_GTT\t\t(1<<22)\n#define MI_FLUSH_DW\t\tMI_INSTR(0x26, 1)  \n#define   MI_FLUSH_DW_PROTECTED_MEM_EN\t(1 << 22)\n#define   MI_FLUSH_DW_STORE_INDEX\t(1<<21)\n#define   MI_INVALIDATE_TLB\t\t(1<<18)\n#define   MI_FLUSH_DW_CCS\t\t(1<<16)\n#define   MI_FLUSH_DW_OP_STOREDW\t(1<<14)\n#define   MI_FLUSH_DW_OP_MASK\t\t(3<<14)\n#define   MI_FLUSH_DW_LLC\t\t(1<<9)\n#define   MI_FLUSH_DW_NOTIFY\t\t(1<<8)\n#define   MI_INVALIDATE_BSD\t\t(1<<7)\n#define   MI_FLUSH_DW_USE_GTT\t\t(1<<2)\n#define   MI_FLUSH_DW_USE_PPGTT\t\t(0<<2)\n#define MI_LOAD_REGISTER_MEM\t   MI_INSTR(0x29, 1)\n#define MI_LOAD_REGISTER_MEM_GEN8  MI_INSTR(0x29, 2)\n#define MI_LOAD_REGISTER_REG    MI_INSTR(0x2A, 1)\n#define   MI_LRR_SOURCE_CS_MMIO\t\tREG_BIT(18)\n#define MI_BATCH_BUFFER\t\tMI_INSTR(0x30, 1)\n#define   MI_BATCH_NON_SECURE\t\t(1)\n \n#define   MI_BATCH_NON_SECURE_I965\t(1<<8)\n#define   MI_BATCH_PPGTT_HSW\t\t(1<<8)\n#define   MI_BATCH_NON_SECURE_HSW\t(1<<13)\n#define MI_BATCH_BUFFER_START\tMI_INSTR(0x31, 0)\n#define   MI_BATCH_GTT\t\t    (2<<6)  \n#define MI_BATCH_BUFFER_START_GEN8\tMI_INSTR(0x31, 1)\n#define   MI_BATCH_RESOURCE_STREAMER REG_BIT(10)\n#define   MI_BATCH_PREDICATE         REG_BIT(15)  \n\n#define MI_OPCODE(x)\t\t(((x) >> 23) & 0x3f)\n#define IS_MI_LRI_CMD(x)\t(MI_OPCODE(x) == MI_OPCODE(MI_INSTR(0x22, 0)))\n#define MI_LRI_LEN(x)\t\t(((x) & 0xff) + 1)\n\n \n#define GFX_INSTR(opcode, flags) ((0x3 << 29) | ((opcode) << 24) | (flags))\n\n#define GEN9_MEDIA_POOL_STATE     ((0x3 << 29) | (0x2 << 27) | (0x5 << 16) | 4)\n#define   GEN9_MEDIA_POOL_ENABLE  (1 << 31)\n#define GFX_OP_RASTER_RULES    ((0x3<<29)|(0x7<<24))\n#define GFX_OP_SCISSOR         ((0x3<<29)|(0x1c<<24)|(0x10<<19))\n#define   SC_UPDATE_SCISSOR       (0x1<<1)\n#define   SC_ENABLE_MASK          (0x1<<0)\n#define   SC_ENABLE               (0x1<<0)\n#define GFX_OP_LOAD_INDIRECT   ((0x3<<29)|(0x1d<<24)|(0x7<<16))\n#define GFX_OP_SCISSOR_INFO    ((0x3<<29)|(0x1d<<24)|(0x81<<16)|(0x1))\n#define   SCI_YMIN_MASK      (0xffff<<16)\n#define   SCI_XMIN_MASK      (0xffff<<0)\n#define   SCI_YMAX_MASK      (0xffff<<16)\n#define   SCI_XMAX_MASK      (0xffff<<0)\n#define GFX_OP_SCISSOR_ENABLE\t ((0x3<<29)|(0x1c<<24)|(0x10<<19))\n#define GFX_OP_SCISSOR_RECT\t ((0x3<<29)|(0x1d<<24)|(0x81<<16)|1)\n#define GFX_OP_COLOR_FACTOR      ((0x3<<29)|(0x1d<<24)|(0x1<<16)|0x0)\n#define GFX_OP_STIPPLE           ((0x3<<29)|(0x1d<<24)|(0x83<<16))\n#define GFX_OP_MAP_INFO          ((0x3<<29)|(0x1d<<24)|0x4)\n#define GFX_OP_DESTBUFFER_VARS   ((0x3<<29)|(0x1d<<24)|(0x85<<16)|0x0)\n#define GFX_OP_DESTBUFFER_INFO\t ((0x3<<29)|(0x1d<<24)|(0x8e<<16)|1)\n#define GFX_OP_DRAWRECT_INFO     ((0x3<<29)|(0x1d<<24)|(0x80<<16)|(0x3))\n#define GFX_OP_DRAWRECT_INFO_I965  ((0x7900<<16)|0x2)\n\n#define XY_CTRL_SURF_INSTR_SIZE\t\t5\n#define MI_FLUSH_DW_SIZE\t\t3\n#define XY_CTRL_SURF_COPY_BLT\t\t((2 << 29) | (0x48 << 22) | 3)\n#define   SRC_ACCESS_TYPE_SHIFT\t\t21\n#define   DST_ACCESS_TYPE_SHIFT\t\t20\n#define   CCS_SIZE_MASK\t\t\t0x3FF\n#define   CCS_SIZE_SHIFT\t\t8\n#define   XY_CTRL_SURF_MOCS_MASK\tGENMASK(31, 25)\n#define   NUM_CCS_BYTES_PER_BLOCK\t256\n#define   NUM_BYTES_PER_CCS_BYTE\t256\n#define   NUM_CCS_BLKS_PER_XFER\t\t1024\n#define   INDIRECT_ACCESS\t\t0\n#define   DIRECT_ACCESS\t\t\t1\n\n#define COLOR_BLT_CMD\t\t\t(2 << 29 | 0x40 << 22 | (5 - 2))\n#define XY_COLOR_BLT_CMD\t\t(2 << 29 | 0x50 << 22)\n#define XY_FAST_COLOR_BLT_CMD\t\t(2 << 29 | 0x44 << 22)\n#define   XY_FAST_COLOR_BLT_DEPTH_32\t(2 << 19)\n#define   XY_FAST_COLOR_BLT_DW\t\t16\n#define   XY_FAST_COLOR_BLT_MOCS_MASK\tGENMASK(27, 21)\n#define   XY_FAST_COLOR_BLT_MEM_TYPE_SHIFT 31\n\n#define   XY_FAST_COPY_BLT_D0_SRC_TILING_MASK     REG_GENMASK(21, 20)\n#define   XY_FAST_COPY_BLT_D0_DST_TILING_MASK     REG_GENMASK(14, 13)\n#define   XY_FAST_COPY_BLT_D0_SRC_TILE_MODE(mode)  \\\n\tREG_FIELD_PREP(XY_FAST_COPY_BLT_D0_SRC_TILING_MASK, mode)\n#define   XY_FAST_COPY_BLT_D0_DST_TILE_MODE(mode)  \\\n\tREG_FIELD_PREP(XY_FAST_COPY_BLT_D0_DST_TILING_MASK, mode)\n#define     LINEAR\t\t\t\t0\n#define     TILE_X\t\t\t\t0x1\n#define     XMAJOR\t\t\t\t0x1\n#define     YMAJOR\t\t\t\t0x2\n#define     TILE_64\t\t\t0x3\n#define   XY_FAST_COPY_BLT_D1_SRC_TILE4\tREG_BIT(31)\n#define   XY_FAST_COPY_BLT_D1_DST_TILE4\tREG_BIT(30)\n#define BLIT_CCTL_SRC_MOCS_MASK  REG_GENMASK(6, 0)\n#define BLIT_CCTL_DST_MOCS_MASK  REG_GENMASK(14, 8)\n \n#define BLIT_CCTL_SRC_MOCS(idx) \\\n\tREG_FIELD_PREP(BLIT_CCTL_SRC_MOCS_MASK, (idx) << 1)\n#define BLIT_CCTL_DST_MOCS(idx) \\\n\tREG_FIELD_PREP(BLIT_CCTL_DST_MOCS_MASK, (idx) << 1)\n\n#define SRC_COPY_BLT_CMD\t\t(2 << 29 | 0x43 << 22)\n#define GEN9_XY_FAST_COPY_BLT_CMD\t(2 << 29 | 0x42 << 22)\n#define XY_SRC_COPY_BLT_CMD\t\t(2 << 29 | 0x53 << 22)\n#define XY_MONO_SRC_COPY_IMM_BLT\t(2 << 29 | 0x71 << 22 | 5)\n#define   BLT_WRITE_A\t\t\t(2<<20)\n#define   BLT_WRITE_RGB\t\t\t(1<<20)\n#define   BLT_WRITE_RGBA\t\t(BLT_WRITE_RGB | BLT_WRITE_A)\n#define   BLT_DEPTH_8\t\t\t(0<<24)\n#define   BLT_DEPTH_16_565\t\t(1<<24)\n#define   BLT_DEPTH_16_1555\t\t(2<<24)\n#define   BLT_DEPTH_32\t\t\t(3<<24)\n#define   BLT_ROP_SRC_COPY\t\t(0xcc<<16)\n#define   BLT_ROP_COLOR_COPY\t\t(0xf0<<16)\n#define XY_SRC_COPY_BLT_SRC_TILED\t(1<<15)  \n#define XY_SRC_COPY_BLT_DST_TILED\t(1<<11)  \n#define CMD_OP_DISPLAYBUFFER_INFO ((0x0<<29)|(0x14<<23)|2)\n#define   ASYNC_FLIP                (1<<22)\n#define   DISPLAY_PLANE_A           (0<<20)\n#define   DISPLAY_PLANE_B           (1<<20)\n#define GFX_OP_PIPE_CONTROL(len)\t((0x3<<29)|(0x3<<27)|(0x2<<24)|((len)-2))\n#define   PIPE_CONTROL_COMMAND_CACHE_INVALIDATE\t\t(1<<29)  \n#define   PIPE_CONTROL_TILE_CACHE_FLUSH\t\t\t(1<<28)  \n#define   PIPE_CONTROL_FLUSH_L3\t\t\t\t(1<<27)\n#define   PIPE_CONTROL_AMFS_FLUSH\t\t\t(1<<25)  \n#define   PIPE_CONTROL_GLOBAL_GTT_IVB\t\t\t(1<<24)  \n#define   PIPE_CONTROL_MMIO_WRITE\t\t\t(1<<23)\n#define   PIPE_CONTROL_STORE_DATA_INDEX\t\t\t(1<<21)\n#define   PIPE_CONTROL_CS_STALL\t\t\t\t(1<<20)\n#define   PIPE_CONTROL_GLOBAL_SNAPSHOT_RESET\t\t(1<<19)\n#define   PIPE_CONTROL_TLB_INVALIDATE\t\t\t(1<<18)\n#define   PIPE_CONTROL_PSD_SYNC\t\t\t\t(1<<17)  \n#define   PIPE_CONTROL_MEDIA_STATE_CLEAR\t\t(1<<16)\n#define   PIPE_CONTROL_WRITE_TIMESTAMP\t\t\t(3<<14)\n#define   PIPE_CONTROL_QW_WRITE\t\t\t\t(1<<14)\n#define   PIPE_CONTROL_POST_SYNC_OP_MASK                (3<<14)\n#define   PIPE_CONTROL_DEPTH_STALL\t\t\t(1<<13)\n#define   PIPE_CONTROL_CCS_FLUSH\t\t\t(1<<13)  \n#define   PIPE_CONTROL_WRITE_FLUSH\t\t\t(1<<12)\n#define   PIPE_CONTROL_RENDER_TARGET_CACHE_FLUSH\t(1<<12)  \n#define   PIPE_CONTROL_INSTRUCTION_CACHE_INVALIDATE\t(1<<11)  \n#define   PIPE_CONTROL_TEXTURE_CACHE_INVALIDATE\t\t(1<<10)  \n#define   PIPE_CONTROL_INDIRECT_STATE_DISABLE\t\t(1<<9)\n#define   PIPE_CONTROL0_HDC_PIPELINE_FLUSH\t\tREG_BIT(9)   \n#define   PIPE_CONTROL_NOTIFY\t\t\t\t(1<<8)\n#define   PIPE_CONTROL_FLUSH_ENABLE\t\t\t(1<<7)  \n#define   PIPE_CONTROL_DC_FLUSH_ENABLE\t\t\t(1<<5)\n#define   PIPE_CONTROL_VF_CACHE_INVALIDATE\t\t(1<<4)\n#define   PIPE_CONTROL_CONST_CACHE_INVALIDATE\t\t(1<<3)\n#define   PIPE_CONTROL_STATE_CACHE_INVALIDATE\t\t(1<<2)\n#define   PIPE_CONTROL_STALL_AT_SCOREBOARD\t\t(1<<1)\n#define   PIPE_CONTROL_DEPTH_CACHE_FLUSH\t\t(1<<0)\n#define   PIPE_CONTROL_GLOBAL_GTT (1<<2)  \n\n \n#define PIPE_CONTROL_3D_ENGINE_FLAGS (\\\n\t\tPIPE_CONTROL_RENDER_TARGET_CACHE_FLUSH | \\\n\t\tPIPE_CONTROL_DEPTH_CACHE_FLUSH | \\\n\t\tPIPE_CONTROL_TILE_CACHE_FLUSH | \\\n\t\tPIPE_CONTROL_DEPTH_STALL | \\\n\t\tPIPE_CONTROL_STALL_AT_SCOREBOARD | \\\n\t\tPIPE_CONTROL_PSD_SYNC | \\\n\t\tPIPE_CONTROL_AMFS_FLUSH | \\\n\t\tPIPE_CONTROL_VF_CACHE_INVALIDATE | \\\n\t\tPIPE_CONTROL_GLOBAL_SNAPSHOT_RESET)\n\n \n#define PIPE_CONTROL_3D_ARCH_FLAGS ( \\\n\t\tPIPE_CONTROL_3D_ENGINE_FLAGS | \\\n\t\tPIPE_CONTROL_INDIRECT_STATE_DISABLE | \\\n\t\tPIPE_CONTROL_FLUSH_ENABLE | \\\n\t\tPIPE_CONTROL_TEXTURE_CACHE_INVALIDATE | \\\n\t\tPIPE_CONTROL_DC_FLUSH_ENABLE)\n\n#define MI_MATH(x)\t\t\tMI_INSTR(0x1a, (x) - 1)\n#define MI_MATH_INSTR(opcode, op1, op2) ((opcode) << 20 | (op1) << 10 | (op2))\n \n#define   MI_MATH_NOOP\t\t\tMI_MATH_INSTR(0x000, 0x0, 0x0)\n#define   MI_MATH_LOAD(op1, op2)\tMI_MATH_INSTR(0x080, op1, op2)\n#define   MI_MATH_LOADINV(op1, op2)\tMI_MATH_INSTR(0x480, op1, op2)\n#define   MI_MATH_LOAD0(op1)\t\tMI_MATH_INSTR(0x081, op1)\n#define   MI_MATH_LOAD1(op1)\t\tMI_MATH_INSTR(0x481, op1)\n#define   MI_MATH_ADD\t\t\tMI_MATH_INSTR(0x100, 0x0, 0x0)\n#define   MI_MATH_SUB\t\t\tMI_MATH_INSTR(0x101, 0x0, 0x0)\n#define   MI_MATH_AND\t\t\tMI_MATH_INSTR(0x102, 0x0, 0x0)\n#define   MI_MATH_OR\t\t\tMI_MATH_INSTR(0x103, 0x0, 0x0)\n#define   MI_MATH_XOR\t\t\tMI_MATH_INSTR(0x104, 0x0, 0x0)\n#define   MI_MATH_STORE(op1, op2)\tMI_MATH_INSTR(0x180, op1, op2)\n#define   MI_MATH_STOREINV(op1, op2)\tMI_MATH_INSTR(0x580, op1, op2)\n \n#define   MI_MATH_REG(x)\t\t(x)\n#define   MI_MATH_REG_SRCA\t\t0x20\n#define   MI_MATH_REG_SRCB\t\t0x21\n#define   MI_MATH_REG_ACCU\t\t0x31\n#define   MI_MATH_REG_ZF\t\t0x32\n#define   MI_MATH_REG_CF\t\t0x33\n\n \n#define MEDIA_INSTR(pipe, op, sub_op, flags) \\\n\t(__INSTR(INSTR_RC_CLIENT) | (pipe) << INSTR_SUBCLIENT_SHIFT | \\\n\t(op) << INSTR_26_TO_24_SHIFT | (sub_op) << 16 | (flags))\n\n#define MFX_WAIT\t\t\t\tMEDIA_INSTR(1, 0, 0, 0)\n#define  MFX_WAIT_DW0_MFX_SYNC_CONTROL_FLAG\tREG_BIT(8)\n#define  MFX_WAIT_DW0_PXP_SYNC_CONTROL_FLAG\tREG_BIT(9)\n\n#define CRYPTO_KEY_EXCHANGE\t\t\tMEDIA_INSTR(2, 6, 9, 0)\n\n \n#define MI_SET_PREDICATE        MI_INSTR(0x01, 0)\n#define MI_ARB_CHECK            MI_INSTR(0x05, 0)\n#define MI_RS_CONTROL           MI_INSTR(0x06, 0)\n#define MI_URB_ATOMIC_ALLOC     MI_INSTR(0x09, 0)\n#define MI_PREDICATE            MI_INSTR(0x0C, 0)\n#define MI_RS_CONTEXT           MI_INSTR(0x0F, 0)\n#define MI_TOPOLOGY_FILTER      MI_INSTR(0x0D, 0)\n#define MI_LOAD_SCAN_LINES_EXCL MI_INSTR(0x13, 0)\n#define MI_URB_CLEAR            MI_INSTR(0x19, 0)\n#define MI_UPDATE_GTT           MI_INSTR(0x23, 0)\n#define MI_CLFLUSH              MI_INSTR(0x27, 0)\n#define MI_REPORT_PERF_COUNT    MI_INSTR(0x28, 0)\n#define   MI_REPORT_PERF_COUNT_GGTT (1<<0)\n#define MI_RS_STORE_DATA_IMM    MI_INSTR(0x2B, 0)\n#define MI_LOAD_URB_MEM         MI_INSTR(0x2C, 0)\n#define MI_STORE_URB_MEM        MI_INSTR(0x2D, 0)\n#define MI_CONDITIONAL_BATCH_BUFFER_END MI_INSTR(0x36, 0)\n#define  MI_DO_COMPARE\t\tREG_BIT(21)\n\n#define STATE_BASE_ADDRESS \\\n\t((0x3 << 29) | (0x0 << 27) | (0x1 << 24) | (0x1 << 16))\n#define BASE_ADDRESS_MODIFY\t\tREG_BIT(0)\n#define PIPELINE_SELECT \\\n\t((0x3 << 29) | (0x1 << 27) | (0x1 << 24) | (0x4 << 16))\n#define PIPELINE_SELECT_MEDIA\t       REG_BIT(0)\n#define GFX_OP_3DSTATE_VF_STATISTICS \\\n\t((0x3 << 29) | (0x1 << 27) | (0x0 << 24) | (0xB << 16))\n#define MEDIA_VFE_STATE \\\n\t((0x3 << 29) | (0x2 << 27) | (0x0 << 24) | (0x0 << 16))\n#define  MEDIA_VFE_STATE_MMIO_ACCESS_MASK (0x18)\n#define MEDIA_INTERFACE_DESCRIPTOR_LOAD \\\n\t((0x3 << 29) | (0x2 << 27) | (0x0 << 24) | (0x2 << 16))\n#define MEDIA_OBJECT \\\n\t((0x3 << 29) | (0x2 << 27) | (0x1 << 24) | (0x0 << 16))\n#define GPGPU_OBJECT                   ((0x3<<29)|(0x2<<27)|(0x1<<24)|(0x4<<16))\n#define GPGPU_WALKER                   ((0x3<<29)|(0x2<<27)|(0x1<<24)|(0x5<<16))\n#define GFX_OP_3DSTATE_DX9_CONSTANTF_VS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x39<<16))\n#define GFX_OP_3DSTATE_DX9_CONSTANTF_PS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x3A<<16))\n#define GFX_OP_3DSTATE_SO_DECL_LIST \\\n\t((0x3<<29)|(0x3<<27)|(0x1<<24)|(0x17<<16))\n\n#define GFX_OP_3DSTATE_BINDING_TABLE_EDIT_VS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x43<<16))\n#define GFX_OP_3DSTATE_BINDING_TABLE_EDIT_GS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x44<<16))\n#define GFX_OP_3DSTATE_BINDING_TABLE_EDIT_HS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x45<<16))\n#define GFX_OP_3DSTATE_BINDING_TABLE_EDIT_DS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x46<<16))\n#define GFX_OP_3DSTATE_BINDING_TABLE_EDIT_PS \\\n\t((0x3<<29)|(0x3<<27)|(0x0<<24)|(0x47<<16))\n\n#define COLOR_BLT     ((0x2<<29)|(0x40<<22))\n#define SRC_COPY_BLT  ((0x2<<29)|(0x43<<22))\n\n#define GSC_INSTR(opcode, data, flags) \\\n\t(__INSTR(INSTR_GSC_CLIENT) | (opcode) << 22 | (data) << 9 | (flags))\n\n#define GSC_FW_LOAD GSC_INSTR(1, 0, 2)\n#define   HECI1_FW_LIMIT_VALID (1 << 31)\n\n#define GSC_HECI_CMD_PKT GSC_INSTR(0, 0, 6)\n\n \n#define GEN8_HIGH_ADDRESS_BIT 47\nstatic inline u64 gen8_canonical_addr(u64 address)\n{\n\treturn sign_extend64(address, GEN8_HIGH_ADDRESS_BIT);\n}\n\nstatic inline u64 gen8_noncanonical_addr(u64 address)\n{\n\treturn address & GENMASK_ULL(GEN8_HIGH_ADDRESS_BIT, 0);\n}\n\nstatic inline u32 *__gen6_emit_bb_start(u32 *cs, u32 addr, unsigned int flags)\n{\n\t*cs++ = MI_BATCH_BUFFER_START | flags;\n\t*cs++ = addr;\n\n\treturn cs;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}