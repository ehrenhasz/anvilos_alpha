{
  "module_name": "i915_scheduler.h",
  "hash_id": "1149530fb62c0deadd2fdfaf507a12d746d718c465fc51b4e63b349eeb2891bf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_scheduler.h",
  "human_readable_source": " \n\n#ifndef _I915_SCHEDULER_H_\n#define _I915_SCHEDULER_H_\n\n#include <linux/bitops.h>\n#include <linux/list.h>\n#include <linux/kernel.h>\n\n#include \"i915_scheduler_types.h\"\n#include \"i915_tasklet.h\"\n\nstruct drm_printer;\n\n#define priolist_for_each_request(it, plist) \\\n\tlist_for_each_entry(it, &(plist)->requests, sched.link)\n\n#define priolist_for_each_request_consume(it, n, plist) \\\n\tlist_for_each_entry_safe(it, n, &(plist)->requests, sched.link)\n\nvoid i915_sched_node_init(struct i915_sched_node *node);\nvoid i915_sched_node_reinit(struct i915_sched_node *node);\n\nbool __i915_sched_node_add_dependency(struct i915_sched_node *node,\n\t\t\t\t      struct i915_sched_node *signal,\n\t\t\t\t      struct i915_dependency *dep,\n\t\t\t\t      unsigned long flags);\n\nint i915_sched_node_add_dependency(struct i915_sched_node *node,\n\t\t\t\t   struct i915_sched_node *signal,\n\t\t\t\t   unsigned long flags);\n\nvoid i915_sched_node_fini(struct i915_sched_node *node);\n\nvoid i915_schedule(struct i915_request *request,\n\t\t   const struct i915_sched_attr *attr);\n\nstruct list_head *\ni915_sched_lookup_priolist(struct i915_sched_engine *sched_engine, int prio);\n\nvoid __i915_priolist_free(struct i915_priolist *p);\nstatic inline void i915_priolist_free(struct i915_priolist *p)\n{\n\tif (p->priority != I915_PRIORITY_NORMAL)\n\t\t__i915_priolist_free(p);\n}\n\nstruct i915_sched_engine *\ni915_sched_engine_create(unsigned int subclass);\n\nstatic inline struct i915_sched_engine *\ni915_sched_engine_get(struct i915_sched_engine *sched_engine)\n{\n\tkref_get(&sched_engine->ref);\n\treturn sched_engine;\n}\n\nstatic inline void\ni915_sched_engine_put(struct i915_sched_engine *sched_engine)\n{\n\tkref_put(&sched_engine->ref, sched_engine->destroy);\n}\n\nstatic inline bool\ni915_sched_engine_is_empty(struct i915_sched_engine *sched_engine)\n{\n\treturn RB_EMPTY_ROOT(&sched_engine->queue.rb_root);\n}\n\nstatic inline void\ni915_sched_engine_reset_on_empty(struct i915_sched_engine *sched_engine)\n{\n\tif (i915_sched_engine_is_empty(sched_engine))\n\t\tsched_engine->no_priolist = false;\n}\n\nstatic inline void\ni915_sched_engine_active_lock_bh(struct i915_sched_engine *sched_engine)\n{\n\tlocal_bh_disable();  \n\ttasklet_lock(&sched_engine->tasklet);\n}\n\nstatic inline void\ni915_sched_engine_active_unlock_bh(struct i915_sched_engine *sched_engine)\n{\n\ttasklet_unlock(&sched_engine->tasklet);\n\tlocal_bh_enable();  \n}\n\nvoid i915_request_show_with_schedule(struct drm_printer *m,\n\t\t\t\t     const struct i915_request *rq,\n\t\t\t\t     const char *prefix,\n\t\t\t\t     int indent);\n\nstatic inline bool\ni915_sched_engine_disabled(struct i915_sched_engine *sched_engine)\n{\n\treturn sched_engine->disabled(sched_engine);\n}\n\nvoid i915_scheduler_module_exit(void);\nint i915_scheduler_module_init(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}