{
  "module_name": "i915_module.c",
  "hash_id": "ce431f96a45ac9cfe950c2f1fad297218ffe4e85fd45bc0ca839926efc4096cb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/i915/i915_module.c",
  "human_readable_source": " \n\n#include <drm/drm_drv.h>\n\n#include \"gem/i915_gem_context.h\"\n#include \"gem/i915_gem_object.h\"\n#include \"i915_active.h\"\n#include \"i915_driver.h\"\n#include \"i915_params.h\"\n#include \"i915_pci.h\"\n#include \"i915_perf.h\"\n#include \"i915_request.h\"\n#include \"i915_scheduler.h\"\n#include \"i915_selftest.h\"\n#include \"i915_vma.h\"\n#include \"i915_vma_resource.h\"\n\nstatic int i915_check_nomodeset(void)\n{\n\tbool use_kms = true;\n\n\t \n\n\tif (i915_modparams.modeset == 0)\n\t\tuse_kms = false;\n\n\tif (drm_firmware_drivers_only() && i915_modparams.modeset == -1)\n\t\tuse_kms = false;\n\n\tif (!use_kms) {\n\t\t \n\t\tDRM_DEBUG_DRIVER(\"KMS disabled.\\n\");\n\t\treturn 1;\n\t}\n\n\treturn 0;\n}\n\nstatic const struct {\n   int (*init)(void);\n   void (*exit)(void);\n} init_funcs[] = {\n\t{ .init = i915_check_nomodeset },\n\t{ .init = i915_active_module_init,\n\t  .exit = i915_active_module_exit },\n\t{ .init = i915_context_module_init,\n\t  .exit = i915_context_module_exit },\n\t{ .init = i915_gem_context_module_init,\n\t  .exit = i915_gem_context_module_exit },\n\t{ .init = i915_objects_module_init,\n\t  .exit = i915_objects_module_exit },\n\t{ .init = i915_request_module_init,\n\t  .exit = i915_request_module_exit },\n\t{ .init = i915_scheduler_module_init,\n\t  .exit = i915_scheduler_module_exit },\n\t{ .init = i915_vma_module_init,\n\t  .exit = i915_vma_module_exit },\n\t{ .init = i915_vma_resource_module_init,\n\t  .exit = i915_vma_resource_module_exit },\n\t{ .init = i915_mock_selftests },\n\t{ .init = i915_pmu_init,\n\t  .exit = i915_pmu_exit },\n\t{ .init = i915_pci_register_driver,\n\t  .exit = i915_pci_unregister_driver },\n\t{ .init = i915_perf_sysctl_register,\n\t  .exit = i915_perf_sysctl_unregister },\n};\nstatic int init_progress;\n\nstatic int __init i915_init(void)\n{\n\tint err, i;\n\n\tfor (i = 0; i < ARRAY_SIZE(init_funcs); i++) {\n\t\terr = init_funcs[i].init();\n\t\tif (err < 0) {\n\t\t\twhile (i--) {\n\t\t\t\tif (init_funcs[i].exit)\n\t\t\t\t\tinit_funcs[i].exit();\n\t\t\t}\n\t\t\treturn err;\n\t\t} else if (err > 0) {\n\t\t\t \n\t\t\tWARN_ON(init_funcs[i].exit);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tinit_progress = i;\n\n\treturn 0;\n}\n\nstatic void __exit i915_exit(void)\n{\n\tint i;\n\n\tfor (i = init_progress - 1; i >= 0; i--) {\n\t\tGEM_BUG_ON(i >= ARRAY_SIZE(init_funcs));\n\t\tif (init_funcs[i].exit)\n\t\t\tinit_funcs[i].exit();\n\t}\n}\n\nmodule_init(i915_init);\nmodule_exit(i915_exit);\n\nMODULE_AUTHOR(\"Tungsten Graphics, Inc.\");\nMODULE_AUTHOR(\"Intel Corporation\");\n\nMODULE_DESCRIPTION(DRIVER_DESC);\nMODULE_LICENSE(\"GPL and additional rights\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}