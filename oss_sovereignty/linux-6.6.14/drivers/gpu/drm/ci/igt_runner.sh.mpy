{
  "module_name": "igt_runner.sh",
  "hash_id": "3f11829fd53b53dd6b78bf8593683f88985c4e6da64eb6d79a2681e12ae25afc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/ci/igt_runner.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: MIT\n\nset -ex\n\nexport IGT_FORCE_DRIVER=${DRIVER_NAME}\nexport PATH=$PATH:/igt/bin/\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/igt/lib/aarch64-linux-gnu/:/igt/lib/x86_64-linux-gnu:/igt/lib:/igt/lib64\n\n# Uncomment the below to debug problems with driver probing\n: '\nls -l /dev/dri/\ncat /sys/kernel/debug/devices_deferred\ncat /sys/kernel/debug/device_component/*\n'\n\n# Dump drm state to confirm that kernel was able to find a connected display:\n# TODO this path might not exist for all drivers.. maybe run modetest instead?\nset +e\ncat /sys/kernel/debug/dri/*/state\nset -e\n\n# Cannot use HWCI_KERNEL_MODULES as at that point we don't have the module in /lib\nif [ \"$IGT_FORCE_DRIVER\" = \"amdgpu\" ]; then\n    mv /install/modules/lib/modules/* /lib/modules/.\n    modprobe amdgpu\nfi\n\nif [ -e \"/install/xfails/$DRIVER_NAME-$GPU_VERSION-skips.txt\" ]; then\n    IGT_SKIPS=\"--skips /install/xfails/$DRIVER_NAME-$GPU_VERSION-skips.txt\"\nfi\n\nif [ -e \"/install/xfails/$DRIVER_NAME-$GPU_VERSION-flakes.txt\" ]; then\n    IGT_FLAKES=\"--flakes /install/xfails/$DRIVER_NAME-$GPU_VERSION-flakes.txt\"\nfi\n\nif [ -e \"/install/xfails/$DRIVER_NAME-$GPU_VERSION-fails.txt\" ]; then\n    IGT_FAILS=\"--baseline /install/xfails/$DRIVER_NAME-$GPU_VERSION-fails.txt\"\nfi\n\nif [ \"`uname -m`\" = \"aarch64\" ]; then\n    ARCH=\"arm64\"\nelif [ \"`uname -m`\" = \"armv7l\" ]; then\n    ARCH=\"arm\"\nelse\n    ARCH=\"x86_64\"\nfi\n\ncurl -L --retry 4 -f --retry-all-errors --retry-delay 60 -s ${FDO_HTTP_CACHE_URI:-}$PIPELINE_ARTIFACTS_BASE/$ARCH/igt.tar.gz | tar --zstd -v -x -C /\n\nset +e\nigt-runner \\\n    run \\\n    --igt-folder /igt/libexec/igt-gpu-tools \\\n    --caselist /install/testlist.txt \\\n    --output /results \\\n    $IGT_SKIPS \\\n    $IGT_FLAKES \\\n    $IGT_FAILS \\\n    --fraction-start $CI_NODE_INDEX \\\n    --fraction $CI_NODE_TOTAL \\\n    --jobs 1\nret=$?\nset -e\n\ndeqp-runner junit \\\n   --testsuite IGT \\\n   --results /results/failures.csv \\\n   --output /results/junit.xml \\\n   --limit 50 \\\n   --template \"See https://$CI_PROJECT_ROOT_NAMESPACE.pages.freedesktop.org/-/$CI_PROJECT_NAME/-/jobs/$CI_JOB_ID/artifacts/results/{{testcase}}.xml\"\n\n# Store the results also in the simpler format used by the runner in ChromeOS CI\n#sed -r 's/(dmesg-warn|pass)/success/g' /results/results.txt > /results/results_simple.txt\n\ncd $oldpath\nexit $ret\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}