{
  "module_name": "lsdc_ttm.h",
  "hash_id": "f74debf3f97925ccc2ef08deee207d342c91810010798bfd6434a5f0511f8153",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/loongson/lsdc_ttm.h",
  "human_readable_source": " \n \n\n#ifndef __LSDC_TTM_H__\n#define __LSDC_TTM_H__\n\n#include <linux/container_of.h>\n#include <linux/iosys-map.h>\n#include <linux/list.h>\n\n#include <drm/drm_gem.h>\n#include <drm/ttm/ttm_bo.h>\n#include <drm/ttm/ttm_placement.h>\n#include <drm/ttm/ttm_range_manager.h>\n#include <drm/ttm/ttm_tt.h>\n\n#define LSDC_GEM_DOMAIN_SYSTEM          0x1\n#define LSDC_GEM_DOMAIN_GTT             0x2\n#define LSDC_GEM_DOMAIN_VRAM            0x4\n\nstruct lsdc_bo {\n\tstruct ttm_buffer_object tbo;\n\n\t \n\tstruct list_head list;\n\n\tstruct iosys_map map;\n\n\tunsigned int vmap_count;\n\t \n\tunsigned int sharing_count;\n\n\tstruct ttm_bo_kmap_obj kmap;\n\tvoid *kptr;\n\tbool is_iomem;\n\n\tsize_t size;\n\n\tu32 initial_domain;\n\n\tstruct ttm_placement placement;\n\tstruct ttm_place placements[4];\n};\n\nstatic inline struct ttm_buffer_object *to_ttm_bo(struct drm_gem_object *gem)\n{\n\treturn container_of(gem, struct ttm_buffer_object, base);\n}\n\nstatic inline struct lsdc_bo *to_lsdc_bo(struct ttm_buffer_object *tbo)\n{\n\treturn container_of(tbo, struct lsdc_bo, tbo);\n}\n\nstatic inline struct lsdc_bo *gem_to_lsdc_bo(struct drm_gem_object *gem)\n{\n\treturn container_of(gem, struct lsdc_bo, tbo.base);\n}\n\nconst char *lsdc_mem_type_to_str(uint32_t mem_type);\nconst char *lsdc_domain_to_str(u32 domain);\n\nstruct lsdc_bo *lsdc_bo_create(struct drm_device *ddev,\n\t\t\t       u32 domain,\n\t\t\t       size_t size,\n\t\t\t       bool kernel,\n\t\t\t       struct sg_table *sg,\n\t\t\t       struct dma_resv *resv);\n\nstruct lsdc_bo *lsdc_bo_create_kernel_pinned(struct drm_device *ddev,\n\t\t\t\t\t     u32 domain,\n\t\t\t\t\t     size_t size);\n\nvoid lsdc_bo_free_kernel_pinned(struct lsdc_bo *lbo);\n\nint lsdc_bo_reserve(struct lsdc_bo *lbo);\nvoid lsdc_bo_unreserve(struct lsdc_bo *lbo);\n\nint lsdc_bo_pin(struct lsdc_bo *lbo, u32 domain, u64 *gpu_addr);\nvoid lsdc_bo_unpin(struct lsdc_bo *lbo);\n\nvoid lsdc_bo_ref(struct lsdc_bo *lbo);\nvoid lsdc_bo_unref(struct lsdc_bo *lbo);\n\nu64 lsdc_bo_gpu_offset(struct lsdc_bo *lbo);\nsize_t lsdc_bo_size(struct lsdc_bo *lbo);\n\nint lsdc_bo_kmap(struct lsdc_bo *lbo);\nvoid lsdc_bo_kunmap(struct lsdc_bo *lbo);\nvoid lsdc_bo_clear(struct lsdc_bo *lbo);\n\nint lsdc_bo_evict_vram(struct drm_device *ddev);\n\nint lsdc_ttm_init(struct lsdc_device *ldev);\nvoid lsdc_ttm_debugfs_init(struct lsdc_device *ldev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}