{
  "module_name": "lsdc_irq.c",
  "hash_id": "660df63b744fb00f02f071481240cd4e63823432d894cb80503cbe8d7c992a4c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/loongson/lsdc_irq.c",
  "human_readable_source": "\n \n\n#include <drm/drm_vblank.h>\n\n#include \"lsdc_irq.h\"\n\n \n\nirqreturn_t ls7a2000_dc_irq_handler(int irq, void *arg)\n{\n\tstruct drm_device *ddev = arg;\n\tstruct lsdc_device *ldev = to_lsdc(ddev);\n\tu32 val;\n\n\t \n\tval = lsdc_rreg32(ldev, LSDC_INT_REG);\n\tif ((val & INT_STATUS_MASK) == 0) {\n\t\tdrm_warn(ddev, \"no interrupt occurs\\n\");\n\t\treturn IRQ_NONE;\n\t}\n\n\tldev->irq_status = val;\n\n\t \n\tlsdc_wreg32(ldev, LSDC_INT_REG, val);\n\n\tif (ldev->irq_status & INT_CRTC0_VSYNC)\n\t\tdrm_handle_vblank(ddev, 0);\n\n\tif (ldev->irq_status & INT_CRTC1_VSYNC)\n\t\tdrm_handle_vblank(ddev, 1);\n\n\treturn IRQ_HANDLED;\n}\n\n \nirqreturn_t ls7a1000_dc_irq_handler(int irq, void *arg)\n{\n\tstruct drm_device *ddev = arg;\n\tstruct lsdc_device *ldev = to_lsdc(ddev);\n\tu32 val;\n\n\t \n\tval = lsdc_rreg32(ldev, LSDC_INT_REG);\n\tif ((val & INT_STATUS_MASK) == 0) {\n\t\tdrm_warn(ddev, \"no interrupt occurs\\n\");\n\t\treturn IRQ_NONE;\n\t}\n\n\tldev->irq_status = val;\n\n\t \n\tval &= ~(INT_CRTC0_VSYNC | INT_CRTC1_VSYNC);\n\tlsdc_wreg32(ldev, LSDC_INT_REG, val);\n\n\tif (ldev->irq_status & INT_CRTC0_VSYNC)\n\t\tdrm_handle_vblank(ddev, 0);\n\n\tif (ldev->irq_status & INT_CRTC1_VSYNC)\n\t\tdrm_handle_vblank(ddev, 1);\n\n\treturn IRQ_HANDLED;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}