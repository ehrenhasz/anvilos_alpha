{
  "module_name": "vc4_hdmi.h",
  "hash_id": "0864b5e81670d1ab7b08888ffe00280159de7b311c81423d14368931eb524ef9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/vc4/vc4_hdmi.h",
  "human_readable_source": "#ifndef _VC4_HDMI_H_\n#define _VC4_HDMI_H_\n\n#include <drm/drm_connector.h>\n#include <media/cec.h>\n#include <sound/dmaengine_pcm.h>\n#include <sound/soc.h>\n\n#include \"vc4_drv.h\"\n\nstruct vc4_hdmi;\nstruct vc4_hdmi_register;\nstruct vc4_hdmi_connector_state;\n\nenum vc4_hdmi_phy_channel {\n\tPHY_LANE_0 = 0,\n\tPHY_LANE_1,\n\tPHY_LANE_2,\n\tPHY_LANE_CK,\n};\n\nstruct vc4_hdmi_variant {\n\t \n\tenum vc4_encoder_type encoder_type;\n\n\t \n\tconst char *card_name;\n\n\t \n\tconst char *debugfs_name;\n\n\t \n\tunsigned long long max_pixel_clock;\n\n\t \n\tconst struct vc4_hdmi_register *registers;\n\n\t \n\tunsigned int num_registers;\n\n\t \n\tenum vc4_hdmi_phy_channel phy_lane_mapping[4];\n\n\t \n\tbool unsupported_odd_h_timings;\n\n\t \n\tbool external_irq_controller;\n\n\t \n\tint (*init_resources)(struct drm_device *drm,\n\t\t\t      struct vc4_hdmi *vc4_hdmi);\n\n\t \n\tvoid (*reset)(struct vc4_hdmi *vc4_hdmi);\n\n\t \n\tvoid (*csc_setup)(struct vc4_hdmi *vc4_hdmi,\n\t\t\t  struct drm_connector_state *state,\n\t\t\t  const struct drm_display_mode *mode);\n\n\t \n\tvoid (*set_timings)(struct vc4_hdmi *vc4_hdmi,\n\t\t\t    struct drm_connector_state *state,\n\t\t\t    const struct drm_display_mode *mode);\n\n\t \n\tvoid (*phy_init)(struct vc4_hdmi *vc4_hdmi,\n\t\t\t struct vc4_hdmi_connector_state *vc4_conn_state);\n\n\t \n\tvoid (*phy_disable)(struct vc4_hdmi *vc4_hdmi);\n\n\t \n\tvoid (*phy_rng_enable)(struct vc4_hdmi *vc4_hdmi);\n\n\t \n\tvoid (*phy_rng_disable)(struct vc4_hdmi *vc4_hdmi);\n\n\t \n\tu32 (*channel_map)(struct vc4_hdmi *vc4_hdmi, u32 channel_mask);\n\n\t \n\tbool supports_hdr;\n\n\t \n\tbool (*hp_detect)(struct vc4_hdmi *vc4_hdmi);\n};\n\n \nstruct vc4_hdmi_audio {\n\tstruct snd_soc_card card;\n\tstruct snd_soc_dai_link link;\n\tstruct snd_soc_dai_link_component cpu;\n\tstruct snd_soc_dai_link_component codec;\n\tstruct snd_soc_dai_link_component platform;\n\tstruct snd_dmaengine_dai_dma_data dma_data;\n\tstruct hdmi_audio_infoframe infoframe;\n\tstruct platform_device *codec_pdev;\n\tbool streaming;\n};\n\nenum vc4_hdmi_output_format {\n\tVC4_HDMI_OUTPUT_RGB,\n\tVC4_HDMI_OUTPUT_YUV422,\n\tVC4_HDMI_OUTPUT_YUV444,\n\tVC4_HDMI_OUTPUT_YUV420,\n};\n\nenum vc4_hdmi_broadcast_rgb {\n\tVC4_HDMI_BROADCAST_RGB_AUTO,\n\tVC4_HDMI_BROADCAST_RGB_FULL,\n\tVC4_HDMI_BROADCAST_RGB_LIMITED,\n};\n\n \nstruct vc4_hdmi {\n\tstruct vc4_hdmi_audio audio;\n\n\tstruct platform_device *pdev;\n\tconst struct vc4_hdmi_variant *variant;\n\n\tstruct vc4_encoder encoder;\n\tstruct drm_connector connector;\n\n\tstruct delayed_work scrambling_work;\n\n\tstruct drm_property *broadcast_rgb_property;\n\n\tstruct i2c_adapter *ddc;\n\tvoid __iomem *hdmicore_regs;\n\tvoid __iomem *hd_regs;\n\n\t \n\tvoid __iomem *cec_regs;\n\t \n\tvoid __iomem *csc_regs;\n\t \n\tvoid __iomem *dvp_regs;\n\t \n\tvoid __iomem *phy_regs;\n\t \n\tvoid __iomem *ram_regs;\n\t \n\tvoid __iomem *rm_regs;\n\n\tstruct gpio_desc *hpd_gpio;\n\n\t \n\tbool disable_wifi_frequencies;\n\n\tstruct cec_adapter *cec_adap;\n\tstruct cec_msg cec_rx_msg;\n\tbool cec_tx_ok;\n\tbool cec_irq_was_rx;\n\n\tstruct clk *cec_clock;\n\tstruct clk *pixel_clock;\n\tstruct clk *hsm_clock;\n\tstruct clk *audio_clock;\n\tstruct clk *pixel_bvb_clock;\n\n\tstruct reset_control *reset;\n\n\tstruct debugfs_regset32 hdmi_regset;\n\tstruct debugfs_regset32 hd_regset;\n\n\t \n\tstruct debugfs_regset32 cec_regset;\n\tstruct debugfs_regset32 csc_regset;\n\tstruct debugfs_regset32 dvp_regset;\n\tstruct debugfs_regset32 phy_regset;\n\tstruct debugfs_regset32 ram_regset;\n\tstruct debugfs_regset32 rm_regset;\n\n\t \n\tspinlock_t hw_lock;\n\n\t \n\tstruct mutex mutex;\n\n\t \n\tstruct drm_display_mode saved_adjusted_mode;\n\n\t \n\tbool packet_ram_enabled;\n\n\t \n\tbool scdc_enabled;\n\n\t \n\tunsigned int output_bpc;\n\n\t \n\tenum vc4_hdmi_output_format output_format;\n};\n\n#define connector_to_vc4_hdmi(_connector)\t\t\t\t\\\n\tcontainer_of_const(_connector, struct vc4_hdmi, connector)\n\nstatic inline struct vc4_hdmi *\nencoder_to_vc4_hdmi(struct drm_encoder *encoder)\n{\n\tstruct vc4_encoder *_encoder = to_vc4_encoder(encoder);\n\treturn container_of_const(_encoder, struct vc4_hdmi, encoder);\n}\n\nstruct vc4_hdmi_connector_state {\n\tstruct drm_connector_state\tbase;\n\tunsigned long long\t\ttmds_char_rate;\n\tunsigned int \t\t\toutput_bpc;\n\tenum vc4_hdmi_output_format\toutput_format;\n\tenum vc4_hdmi_broadcast_rgb\tbroadcast_rgb;\n};\n\n#define conn_state_to_vc4_hdmi_conn_state(_state)\t\t\t\\\n\tcontainer_of_const(_state, struct vc4_hdmi_connector_state, base)\n\nvoid vc4_hdmi_phy_init(struct vc4_hdmi *vc4_hdmi,\n\t\t       struct vc4_hdmi_connector_state *vc4_conn_state);\nvoid vc4_hdmi_phy_disable(struct vc4_hdmi *vc4_hdmi);\nvoid vc4_hdmi_phy_rng_enable(struct vc4_hdmi *vc4_hdmi);\nvoid vc4_hdmi_phy_rng_disable(struct vc4_hdmi *vc4_hdmi);\n\nvoid vc5_hdmi_phy_init(struct vc4_hdmi *vc4_hdmi,\n\t\t       struct vc4_hdmi_connector_state *vc4_conn_state);\nvoid vc5_hdmi_phy_disable(struct vc4_hdmi *vc4_hdmi);\nvoid vc5_hdmi_phy_rng_enable(struct vc4_hdmi *vc4_hdmi);\nvoid vc5_hdmi_phy_rng_disable(struct vc4_hdmi *vc4_hdmi);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}