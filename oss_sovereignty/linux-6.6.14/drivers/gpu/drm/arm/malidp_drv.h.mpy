{
  "module_name": "malidp_drv.h",
  "hash_id": "575445b905ef48712049e44c75285cc1ff407914502fc28ba97e7fb731af54ce",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/arm/malidp_drv.h",
  "human_readable_source": " \n \n\n#ifndef __MALIDP_DRV_H__\n#define __MALIDP_DRV_H__\n\n#include <linux/mutex.h>\n#include <linux/wait.h>\n#include <linux/spinlock.h>\n\n#include <drm/drm_writeback.h>\n#include <drm/drm_encoder.h>\n\n#include \"malidp_hw.h\"\n\n#define MALIDP_CONFIG_VALID_INIT\t0\n#define MALIDP_CONFIG_VALID_DONE\t1\n#define MALIDP_CONFIG_START\t\t0xd0\n\nstruct malidp_error_stats {\n\ts32 num_errors;\n\tu32 last_error_status;\n\ts64 last_error_vblank;\n};\n\nstruct malidp_drm {\n\tstruct drm_device base;\n\tstruct malidp_hw_device *dev;\n\tstruct drm_crtc crtc;\n\tstruct drm_writeback_connector mw_connector;\n\twait_queue_head_t wq;\n\tstruct drm_pending_vblank_event *event;\n\tatomic_t config_valid;\n\tu32 core_id;\n#ifdef CONFIG_DEBUG_FS\n\tstruct malidp_error_stats de_errors;\n\tstruct malidp_error_stats se_errors;\n\t \n\tspinlock_t errors_lock;\n#endif\n};\n\n#define drm_to_malidp(x) container_of(x, struct malidp_drm, base)\n#define crtc_to_malidp_device(x) container_of(x, struct malidp_drm, crtc)\n\nstruct malidp_plane {\n\tstruct drm_plane base;\n\tstruct malidp_hw_device *hwdev;\n\tconst struct malidp_layer *layer;\n};\n\nenum mmu_prefetch_mode {\n\tMALIDP_PREFETCH_MODE_NONE,\n\tMALIDP_PREFETCH_MODE_PARTIAL,\n\tMALIDP_PREFETCH_MODE_FULL,\n};\n\nstruct malidp_plane_state {\n\tstruct drm_plane_state base;\n\n\t \n\tu32 rotmem_size;\n\t \n\tu8 format;\n\tu8 n_planes;\n\tenum mmu_prefetch_mode mmu_prefetch_mode;\n\tu32 mmu_prefetch_pgsize;\n};\n\n#define to_malidp_plane(x) container_of(x, struct malidp_plane, base)\n#define to_malidp_plane_state(x) container_of(x, struct malidp_plane_state, base)\n\nstruct malidp_crtc_state {\n\tstruct drm_crtc_state base;\n\tu32 gamma_coeffs[MALIDP_COEFFTAB_NUM_COEFFS];\n\tu32 coloradj_coeffs[MALIDP_COLORADJ_NUM_COEFFS];\n\tstruct malidp_se_config scaler_config;\n\t \n\tu8 scaled_planes_mask;\n};\n\n#define to_malidp_crtc_state(x) container_of(x, struct malidp_crtc_state, base)\n\nint malidp_de_planes_init(struct drm_device *drm);\nint malidp_crtc_init(struct drm_device *drm);\n\nbool malidp_hw_format_is_linear_only(u32 format);\nbool malidp_hw_format_is_afbc_only(u32 format);\n\nbool malidp_format_mod_supported(struct drm_device *drm,\n\t\t\t\t u32 format, u64 modifier);\n\n#ifdef CONFIG_DEBUG_FS\nvoid malidp_error(struct malidp_drm *malidp,\n\t\t  struct malidp_error_stats *error_stats, u32 status,\n\t\t  u64 vblank);\n#endif\n\n \n#define MALIDP_ROTATED_MASK\t(DRM_MODE_ROTATE_90 | DRM_MODE_ROTATE_270)\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}