{
  "module_name": "nouveau_platform.c",
  "hash_id": "5b028bcb64903dccd490422c0320f06b132950a36878b11a370f9406c936ae75",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nouveau_platform.c",
  "human_readable_source": " \n#include \"nouveau_platform.h\"\n\nstatic int nouveau_platform_probe(struct platform_device *pdev)\n{\n\tconst struct nvkm_device_tegra_func *func;\n\tstruct nvkm_device *device = NULL;\n\tstruct drm_device *drm;\n\tint ret;\n\n\tfunc = of_device_get_match_data(&pdev->dev);\n\n\tdrm = nouveau_platform_device_create(func, pdev, &device);\n\tif (IS_ERR(drm))\n\t\treturn PTR_ERR(drm);\n\n\tret = drm_dev_register(drm, 0);\n\tif (ret < 0) {\n\t\tdrm_dev_put(drm);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic int nouveau_platform_remove(struct platform_device *pdev)\n{\n\tstruct drm_device *dev = platform_get_drvdata(pdev);\n\tnouveau_drm_device_remove(dev);\n\treturn 0;\n}\n\n#if IS_ENABLED(CONFIG_OF)\nstatic const struct nvkm_device_tegra_func gk20a_platform_data = {\n\t.iommu_bit = 34,\n\t.require_vdd = true,\n};\n\nstatic const struct nvkm_device_tegra_func gm20b_platform_data = {\n\t.iommu_bit = 34,\n\t.require_vdd = true,\n\t.require_ref_clk = true,\n};\n\nstatic const struct nvkm_device_tegra_func gp10b_platform_data = {\n\t.iommu_bit = 36,\n\t \n\t.require_vdd = false,\n};\n\nstatic const struct of_device_id nouveau_platform_match[] = {\n\t{\n\t\t.compatible = \"nvidia,gk20a\",\n\t\t.data = &gk20a_platform_data,\n\t},\n\t{\n\t\t.compatible = \"nvidia,gm20b\",\n\t\t.data = &gm20b_platform_data,\n\t},\n\t{\n\t\t.compatible = \"nvidia,gp10b\",\n\t\t.data = &gp10b_platform_data,\n\t},\n\t{ }\n};\n\nMODULE_DEVICE_TABLE(of, nouveau_platform_match);\n#endif\n\nstruct platform_driver nouveau_platform_driver = {\n\t.driver = {\n\t\t.name = \"nouveau\",\n\t\t.of_match_table = of_match_ptr(nouveau_platform_match),\n\t},\n\t.probe = nouveau_platform_probe,\n\t.remove = nouveau_platform_remove,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}