{
  "module_name": "oproxy.c",
  "hash_id": "146d4adcdabe8f29f9bc76bf63706f8f91566d6cab31758bd7c7017aa860a84a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/core/oproxy.c",
  "human_readable_source": " \n#include <core/oproxy.h>\n\nstatic int\nnvkm_oproxy_mthd(struct nvkm_object *object, u32 mthd, void *data, u32 size)\n{\n\treturn nvkm_object_mthd(nvkm_oproxy(object)->object, mthd, data, size);\n}\n\nstatic int\nnvkm_oproxy_ntfy(struct nvkm_object *object, u32 mthd,\n\t\t struct nvkm_event **pevent)\n{\n\treturn nvkm_object_ntfy(nvkm_oproxy(object)->object, mthd, pevent);\n}\n\nstatic int\nnvkm_oproxy_map(struct nvkm_object *object, void *argv, u32 argc,\n\t\tenum nvkm_object_map *type, u64 *addr, u64 *size)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\treturn nvkm_object_map(oproxy->object, argv, argc, type, addr, size);\n}\n\nstatic int\nnvkm_oproxy_unmap(struct nvkm_object *object)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\n\tif (unlikely(!oproxy->object))\n\t\treturn 0;\n\n\treturn nvkm_object_unmap(oproxy->object);\n}\n\nstatic int\nnvkm_oproxy_rd08(struct nvkm_object *object, u64 addr, u8 *data)\n{\n\treturn nvkm_object_rd08(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_rd16(struct nvkm_object *object, u64 addr, u16 *data)\n{\n\treturn nvkm_object_rd16(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_rd32(struct nvkm_object *object, u64 addr, u32 *data)\n{\n\treturn nvkm_object_rd32(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_wr08(struct nvkm_object *object, u64 addr, u8 data)\n{\n\treturn nvkm_object_wr08(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_wr16(struct nvkm_object *object, u64 addr, u16 data)\n{\n\treturn nvkm_object_wr16(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_wr32(struct nvkm_object *object, u64 addr, u32 data)\n{\n\treturn nvkm_object_wr32(nvkm_oproxy(object)->object, addr, data);\n}\n\nstatic int\nnvkm_oproxy_bind(struct nvkm_object *object, struct nvkm_gpuobj *parent,\n\t\t int align, struct nvkm_gpuobj **pgpuobj)\n{\n\treturn nvkm_object_bind(nvkm_oproxy(object)->object,\n\t\t\t\tparent, align, pgpuobj);\n}\n\nstatic int\nnvkm_oproxy_sclass(struct nvkm_object *object, int index,\n\t\t   struct nvkm_oclass *oclass)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\toclass->parent = oproxy->object;\n\tif (!oproxy->object->func->sclass)\n\t\treturn -ENODEV;\n\treturn oproxy->object->func->sclass(oproxy->object, index, oclass);\n}\n\nstatic int\nnvkm_oproxy_uevent(struct nvkm_object *object, void *argv, u32 argc,\n\t\t   struct nvkm_uevent *uevent)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\n\tif (!oproxy->object->func->uevent)\n\t\treturn -ENOSYS;\n\n\treturn oproxy->object->func->uevent(oproxy->object, argv, argc, uevent);\n}\n\nstatic int\nnvkm_oproxy_fini(struct nvkm_object *object, bool suspend)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\tint ret;\n\n\tif (oproxy->func->fini[0]) {\n\t\tret = oproxy->func->fini[0](oproxy, suspend);\n\t\tif (ret && suspend)\n\t\t\treturn ret;\n\t}\n\n\tif (oproxy->object->func->fini) {\n\t\tret = oproxy->object->func->fini(oproxy->object, suspend);\n\t\tif (ret && suspend)\n\t\t\treturn ret;\n\t}\n\n\tif (oproxy->func->fini[1]) {\n\t\tret = oproxy->func->fini[1](oproxy, suspend);\n\t\tif (ret && suspend)\n\t\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic int\nnvkm_oproxy_init(struct nvkm_object *object)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\tint ret;\n\n\tif (oproxy->func->init[0]) {\n\t\tret = oproxy->func->init[0](oproxy);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif (oproxy->object->func->init) {\n\t\tret = oproxy->object->func->init(oproxy->object);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif (oproxy->func->init[1]) {\n\t\tret = oproxy->func->init[1](oproxy);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic void *\nnvkm_oproxy_dtor(struct nvkm_object *object)\n{\n\tstruct nvkm_oproxy *oproxy = nvkm_oproxy(object);\n\tif (oproxy->func->dtor[0])\n\t\toproxy->func->dtor[0](oproxy);\n\tnvkm_object_del(&oproxy->object);\n\tif (oproxy->func->dtor[1])\n\t\toproxy->func->dtor[1](oproxy);\n\treturn oproxy;\n}\n\nstatic const struct nvkm_object_func\nnvkm_oproxy_func = {\n\t.dtor = nvkm_oproxy_dtor,\n\t.init = nvkm_oproxy_init,\n\t.fini = nvkm_oproxy_fini,\n\t.mthd = nvkm_oproxy_mthd,\n\t.ntfy = nvkm_oproxy_ntfy,\n\t.map = nvkm_oproxy_map,\n\t.unmap = nvkm_oproxy_unmap,\n\t.rd08 = nvkm_oproxy_rd08,\n\t.rd16 = nvkm_oproxy_rd16,\n\t.rd32 = nvkm_oproxy_rd32,\n\t.wr08 = nvkm_oproxy_wr08,\n\t.wr16 = nvkm_oproxy_wr16,\n\t.wr32 = nvkm_oproxy_wr32,\n\t.bind = nvkm_oproxy_bind,\n\t.sclass = nvkm_oproxy_sclass,\n\t.uevent = nvkm_oproxy_uevent,\n};\n\nvoid\nnvkm_oproxy_ctor(const struct nvkm_oproxy_func *func,\n\t\t const struct nvkm_oclass *oclass, struct nvkm_oproxy *oproxy)\n{\n\tnvkm_object_ctor(&nvkm_oproxy_func, oclass, &oproxy->base);\n\toproxy->func = func;\n}\n\nint\nnvkm_oproxy_new_(const struct nvkm_oproxy_func *func,\n\t\t const struct nvkm_oclass *oclass, struct nvkm_oproxy **poproxy)\n{\n\tif (!(*poproxy = kzalloc(sizeof(**poproxy), GFP_KERNEL)))\n\t\treturn -ENOMEM;\n\tnvkm_oproxy_ctor(func, oclass, *poproxy);\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}