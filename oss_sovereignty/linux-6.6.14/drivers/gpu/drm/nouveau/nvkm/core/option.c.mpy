{
  "module_name": "option.c",
  "hash_id": "1a4add6e98808b0a485d7f0b87f610c7b310f38d47fa39acdb551f3eb8e76342",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/core/option.c",
  "human_readable_source": " \n#include <core/option.h>\n#include <core/debug.h>\n\nconst char *\nnvkm_stropt(const char *optstr, const char *opt, int *arglen)\n{\n\twhile (optstr && *optstr != '\\0') {\n\t\tint len = strcspn(optstr, \",=\");\n\t\tswitch (optstr[len]) {\n\t\tcase '=':\n\t\t\tif (!strncasecmpz(optstr, opt, len)) {\n\t\t\t\toptstr += len + 1;\n\t\t\t\t*arglen = strcspn(optstr, \",=\");\n\t\t\t\treturn *arglen ? optstr : NULL;\n\t\t\t}\n\t\t\toptstr++;\n\t\t\tbreak;\n\t\tcase ',':\n\t\t\toptstr++;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\toptstr += len;\n\t}\n\n\treturn NULL;\n}\n\nbool\nnvkm_boolopt(const char *optstr, const char *opt, bool value)\n{\n\tint arglen;\n\n\toptstr = nvkm_stropt(optstr, opt, &arglen);\n\tif (optstr) {\n\t\tif (!strncasecmpz(optstr, \"0\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"no\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"off\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"false\", arglen))\n\t\t\tvalue = false;\n\t\telse\n\t\tif (!strncasecmpz(optstr, \"1\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"yes\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"on\", arglen) ||\n\t\t    !strncasecmpz(optstr, \"true\", arglen))\n\t\t\tvalue = true;\n\t}\n\n\treturn value;\n}\n\nlong\nnvkm_longopt(const char *optstr, const char *opt, long value)\n{\n\tlong result = value;\n\tint arglen;\n\tchar *s;\n\n\toptstr = nvkm_stropt(optstr, opt, &arglen);\n\tif (optstr && (s = kstrndup(optstr, arglen, GFP_KERNEL))) {\n\t\tint ret = kstrtol(s, 0, &value);\n\t\tif (ret == 0)\n\t\t\tresult = value;\n\t\tkfree(s);\n\t}\n\n\treturn result;\n}\n\nint\nnvkm_dbgopt(const char *optstr, const char *sub)\n{\n\tint mode = 1, level = CONFIG_NOUVEAU_DEBUG_DEFAULT;\n\n\twhile (optstr) {\n\t\tint len = strcspn(optstr, \",=\");\n\t\tswitch (optstr[len]) {\n\t\tcase '=':\n\t\t\tif (strncasecmpz(optstr, sub, len))\n\t\t\t\tmode = 0;\n\t\t\toptstr++;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (mode) {\n\t\t\t\tif (!strncasecmpz(optstr, \"fatal\", len))\n\t\t\t\t\tlevel = NV_DBG_FATAL;\n\t\t\t\telse if (!strncasecmpz(optstr, \"error\", len))\n\t\t\t\t\tlevel = NV_DBG_ERROR;\n\t\t\t\telse if (!strncasecmpz(optstr, \"warn\", len))\n\t\t\t\t\tlevel = NV_DBG_WARN;\n\t\t\t\telse if (!strncasecmpz(optstr, \"info\", len))\n\t\t\t\t\tlevel = NV_DBG_INFO;\n\t\t\t\telse if (!strncasecmpz(optstr, \"debug\", len))\n\t\t\t\t\tlevel = NV_DBG_DEBUG;\n\t\t\t\telse if (!strncasecmpz(optstr, \"trace\", len))\n\t\t\t\t\tlevel = NV_DBG_TRACE;\n\t\t\t\telse if (!strncasecmpz(optstr, \"paranoia\", len))\n\t\t\t\t\tlevel = NV_DBG_PARANOIA;\n\t\t\t\telse if (!strncasecmpz(optstr, \"spam\", len))\n\t\t\t\t\tlevel = NV_DBG_SPAM;\n\t\t\t}\n\n\t\t\tif (optstr[len] != '\\0') {\n\t\t\t\toptstr++;\n\t\t\t\tmode = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn level;\n\t\t}\n\t\toptstr += len;\n\t}\n\n\treturn level;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}