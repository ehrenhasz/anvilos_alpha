{
  "module_name": "gt215.c",
  "hash_id": "5824d55e4005b7b43e93f9301d8ae999a95bf32bd4a5c97736c456503d51ccd1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/ce/gt215.c",
  "human_readable_source": " \n#include \"priv.h\"\n#include \"fuc/gt215.fuc3.h\"\n\n#include <core/client.h>\n#include <core/enum.h>\n#include <core/gpuobj.h>\n#include <engine/fifo.h>\n\n#include <nvif/class.h>\n\nstatic const struct nvkm_enum\ngt215_ce_isr_error_name[] = {\n\t{ 0x0001, \"ILLEGAL_MTHD\" },\n\t{ 0x0002, \"INVALID_ENUM\" },\n\t{ 0x0003, \"INVALID_BITFIELD\" },\n\t{}\n};\n\nvoid\ngt215_ce_intr(struct nvkm_falcon *ce, struct nvkm_chan *chan)\n{\n\tstruct nvkm_subdev *subdev = &ce->engine.subdev;\n\tstruct nvkm_device *device = subdev->device;\n\tconst u32 base = subdev->inst * 0x1000;\n\tu32 ssta = nvkm_rd32(device, 0x104040 + base) & 0x0000ffff;\n\tu32 addr = nvkm_rd32(device, 0x104040 + base) >> 16;\n\tu32 mthd = (addr & 0x07ff) << 2;\n\tu32 subc = (addr & 0x3800) >> 11;\n\tu32 data = nvkm_rd32(device, 0x104044 + base);\n\tconst struct nvkm_enum *en =\n\t\tnvkm_enum_find(gt215_ce_isr_error_name, ssta);\n\n\tnvkm_error(subdev, \"DISPATCH_ERROR %04x [%s] ch %d [%010llx %s] \"\n\t\t\t   \"subc %d mthd %04x data %08x\\n\", ssta,\n\t\t   en ? en->name : \"\", chan ? chan->id : -1,\n\t\t   chan ? chan->inst->addr : 0,\n\t\t   chan ? chan->name : \"unknown\",\n\t\t   subc, mthd, data);\n}\n\nstatic const struct nvkm_falcon_func\ngt215_ce = {\n\t.code.data = gt215_ce_code,\n\t.code.size = sizeof(gt215_ce_code),\n\t.data.data = gt215_ce_data,\n\t.data.size = sizeof(gt215_ce_data),\n\t.intr = gt215_ce_intr,\n\t.sclass = {\n\t\t{ -1, -1, GT212_DMA },\n\t\t{}\n\t}\n};\n\nint\ngt215_ce_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t     struct nvkm_engine **pengine)\n{\n\treturn nvkm_falcon_new_(&gt215_ce, device, type, -1,\n\t\t\t\t(device->chipset != 0xaf), 0x104000, pengine);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}