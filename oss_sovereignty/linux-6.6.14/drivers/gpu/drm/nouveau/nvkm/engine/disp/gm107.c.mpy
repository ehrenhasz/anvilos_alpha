{
  "module_name": "gm107.c",
  "hash_id": "7447945f2890f9999a003ed3b14ad7a1cdcc5f1197599dcec2c052eccb027788",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/disp/gm107.c",
  "human_readable_source": " \n#include \"priv.h\"\n#include \"chan.h\"\n#include \"head.h\"\n#include \"ior.h\"\n\n#include <nvif/class.h>\n\nvoid\ngm107_sor_dp_pattern(struct nvkm_ior *sor, int pattern)\n{\n\tstruct nvkm_device *device = sor->disp->engine.subdev.device;\n\tconst u32 soff = nv50_ior_base(sor);\n\tu32 mask = 0x1f1f1f1f, data;\n\n\tswitch (pattern) {\n\tcase 0: data = 0x10101010; break;\n\tcase 1: data = 0x01010101; break;\n\tcase 2: data = 0x02020202; break;\n\tcase 3: data = 0x03030303; break;\n\tcase 4: data = 0x1b1b1b1b; break;\n\tdefault:\n\t\tWARN_ON(1);\n\t\treturn;\n\t}\n\n\tif (sor->asy.link & 1)\n\t\tnvkm_mask(device, 0x61c110 + soff, mask, data);\n\telse\n\t\tnvkm_mask(device, 0x61c12c + soff, mask, data);\n}\n\nstatic const struct nvkm_ior_func_dp\ngm107_sor_dp = {\n\t.lanes = { 0, 1, 2, 3 },\n\t.links = gf119_sor_dp_links,\n\t.power = g94_sor_dp_power,\n\t.pattern = gm107_sor_dp_pattern,\n\t.drive = gf119_sor_dp_drive,\n\t.vcpi = gf119_sor_dp_vcpi,\n\t.audio = gf119_sor_dp_audio,\n\t.audio_sym = gf119_sor_dp_audio_sym,\n\t.watermark = gf119_sor_dp_watermark,\n};\n\nstatic const struct nvkm_ior_func\ngm107_sor = {\n\t.state = gf119_sor_state,\n\t.power = nv50_sor_power,\n\t.clock = gf119_sor_clock,\n\t.hdmi = &gk104_sor_hdmi,\n\t.dp = &gm107_sor_dp,\n\t.hda = &gf119_sor_hda,\n};\n\nstatic int\ngm107_sor_new(struct nvkm_disp *disp, int id)\n{\n\treturn nvkm_ior_new_(&gm107_sor, disp, SOR, id, true);\n}\n\nstatic const struct nvkm_disp_func\ngm107_disp = {\n\t.oneinit = nv50_disp_oneinit,\n\t.init = gf119_disp_init,\n\t.fini = gf119_disp_fini,\n\t.intr = gf119_disp_intr,\n\t.intr_error = gf119_disp_intr_error,\n\t.super = gf119_disp_super,\n\t.uevent = &gf119_disp_chan_uevent,\n\t.head = { .cnt = gf119_head_cnt, .new = gf119_head_new },\n\t.dac = { .cnt = gf119_dac_cnt, .new = gf119_dac_new },\n\t.sor = { .cnt = gf119_sor_cnt, .new = gm107_sor_new },\n\t.root = { 0,0,GM107_DISP },\n\t.user = {\n\t\t{{0,0,GK104_DISP_CURSOR             }, nvkm_disp_chan_new, &gf119_disp_curs },\n\t\t{{0,0,GK104_DISP_OVERLAY            }, nvkm_disp_chan_new, &gf119_disp_oimm },\n\t\t{{0,0,GK110_DISP_BASE_CHANNEL_DMA   }, nvkm_disp_chan_new, &gf119_disp_base },\n\t\t{{0,0,GM107_DISP_CORE_CHANNEL_DMA   }, nvkm_disp_core_new, &gk104_disp_core },\n\t\t{{0,0,GK104_DISP_OVERLAY_CONTROL_DMA}, nvkm_disp_chan_new, &gk104_disp_ovly },\n\t\t{}\n\t},\n};\n\nint\ngm107_disp_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t       struct nvkm_disp **pdisp)\n{\n\treturn nvkm_disp_new_(&gm107_disp, device, type, inst, pdisp);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}