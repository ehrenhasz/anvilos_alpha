{
  "module_name": "ior.h",
  "hash_id": "f1ca8ba0e886a9960d7c46930dff2bb774d81f103ec8baf04aa24d9a11296e74",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.h",
  "human_readable_source": " \n#ifndef __NVKM_DISP_IOR_H__\n#define __NVKM_DISP_IOR_H__\n#include \"priv.h\"\nstruct nvkm_i2c_aux;\n\nstruct nvkm_ior {\n\tconst struct nvkm_ior_func *func;\n\tstruct nvkm_disp *disp;\n\tenum nvkm_ior_type {\n\t\tDAC,\n\t\tSOR,\n\t\tPIOR,\n\t} type;\n\tint id;\n\tbool hda;\n\tchar name[8];\n\n\tstruct list_head head;\n\tbool identity;\n\n\tstruct nvkm_ior_state {\n\t\tstruct nvkm_outp *outp;\n\t\tunsigned rgdiv;\n\t\tunsigned proto_evo:4;\n\t\tenum nvkm_ior_proto {\n\t\t\tCRT,\n\t\t\tTV,\n\t\t\tTMDS,\n\t\t\tLVDS,\n\t\t\tDP,\n\t\t\tUNKNOWN\n\t\t} proto:3;\n\t\tunsigned link:2;\n\t\tunsigned head:8;\n\t} arm, asy;\n\n\t \n\tstruct {\n\t\tbool mst;\n\t\tbool ef;\n\t\tu8 nr;\n\t\tu8 bw;\n\t} dp;\n\n\t \n\tstruct {\n\t\tbool high_speed;\n\t} tmds;\n};\n\nstruct nvkm_ior_func {\n\tstruct {\n\t\tint (*get)(struct nvkm_outp *, int *link);\n\t\tvoid (*set)(struct nvkm_outp *, struct nvkm_ior *);\n\t} route;\n\n\tvoid (*state)(struct nvkm_ior *, struct nvkm_ior_state *);\n\tvoid (*power)(struct nvkm_ior *, bool normal, bool pu,\n\t\t      bool data, bool vsync, bool hsync);\n\tint (*sense)(struct nvkm_ior *, u32 loadval);\n\tvoid (*clock)(struct nvkm_ior *);\n\tvoid (*war_2)(struct nvkm_ior *);\n\tvoid (*war_3)(struct nvkm_ior *);\n\n\tconst struct nvkm_ior_func_hdmi {\n\t\tvoid (*ctrl)(struct nvkm_ior *, int head, bool enable, u8 max_ac_packet, u8 rekey);\n\t\tvoid (*scdc)(struct nvkm_ior *, u8 scdc);\n\t\tvoid (*infoframe_avi)(struct nvkm_ior *, int head, void *data, u32 size);\n\t\tvoid (*infoframe_vsi)(struct nvkm_ior *, int head, void *data, u32 size);\n\t} *hdmi;\n\n\tconst struct nvkm_ior_func_dp {\n\t\tu8 lanes[4];\n\t\tint (*links)(struct nvkm_ior *, struct nvkm_i2c_aux *);\n\t\tvoid (*power)(struct nvkm_ior *, int nr);\n\t\tvoid (*pattern)(struct nvkm_ior *, int pattern);\n\t\tvoid (*drive)(struct nvkm_ior *, int ln, int pc,\n\t\t\t      int dc, int pe, int tx_pu);\n\t\tvoid (*vcpi)(struct nvkm_ior *, int head, u8 slot,\n\t\t\t     u8 slot_nr, u16 pbn, u16 aligned);\n\t\tvoid (*audio)(struct nvkm_ior *, int head, bool enable);\n\t\tvoid (*audio_sym)(struct nvkm_ior *, int head, u16 h, u32 v);\n\t\tvoid (*activesym)(struct nvkm_ior *, int head,\n\t\t\t\t  u8 TU, u8 VTUa, u8 VTUf, u8 VTUi);\n\t\tvoid (*watermark)(struct nvkm_ior *, int head, u8 watermark);\n\t} *dp;\n\n\tconst struct nvkm_ior_func_hda {\n\t\tvoid (*hpd)(struct nvkm_ior *, int head, bool present);\n\t\tvoid (*eld)(struct nvkm_ior *, int head, u8 *data, u8 size);\n\t\tvoid (*device_entry)(struct nvkm_ior *, int head);\n\t} *hda;\n};\n\nint nvkm_ior_new_(const struct nvkm_ior_func *func, struct nvkm_disp *,\n\t\t  enum nvkm_ior_type type, int id, bool hda);\nvoid nvkm_ior_del(struct nvkm_ior **);\nstruct nvkm_ior *nvkm_ior_find(struct nvkm_disp *, enum nvkm_ior_type, int id);\n\nstatic inline u32\nnv50_ior_base(struct nvkm_ior *ior)\n{\n\treturn ior->id * 0x800;\n}\n\nint nv50_dac_cnt(struct nvkm_disp *, unsigned long *);\nint nv50_dac_new(struct nvkm_disp *, int);\nvoid nv50_dac_power(struct nvkm_ior *, bool, bool, bool, bool, bool);\nint nv50_dac_sense(struct nvkm_ior *, u32);\n\nint gf119_dac_cnt(struct nvkm_disp *, unsigned long *);\nint gf119_dac_new(struct nvkm_disp *, int);\n\nstatic inline u32\nnv50_sor_link(struct nvkm_ior *ior)\n{\n\treturn nv50_ior_base(ior) + ((ior->asy.link == 2) * 0x80);\n}\n\nint nv50_sor_cnt(struct nvkm_disp *, unsigned long *);\nvoid nv50_sor_state(struct nvkm_ior *, struct nvkm_ior_state *);\nvoid nv50_sor_power(struct nvkm_ior *, bool, bool, bool, bool, bool);\nvoid nv50_sor_clock(struct nvkm_ior *);\n\nint g84_sor_new(struct nvkm_disp *, int);\nextern const struct nvkm_ior_func_hdmi g84_sor_hdmi;\n\nint g94_sor_cnt(struct nvkm_disp *, unsigned long *);\n\nvoid g94_sor_state(struct nvkm_ior *, struct nvkm_ior_state *);\nextern const struct nvkm_ior_func_dp g94_sor_dp;\nint g94_sor_dp_links(struct nvkm_ior *, struct nvkm_i2c_aux *);\nvoid g94_sor_dp_power(struct nvkm_ior *, int);\nvoid g94_sor_dp_pattern(struct nvkm_ior *, int);\nvoid g94_sor_dp_drive(struct nvkm_ior *, int, int, int, int, int);\nvoid g94_sor_dp_audio_sym(struct nvkm_ior *, int, u16, u32);\nvoid g94_sor_dp_activesym(struct nvkm_ior *, int, u8, u8, u8, u8);\nvoid g94_sor_dp_watermark(struct nvkm_ior *, int, u8);\n\nextern const struct nvkm_ior_func_hdmi gt215_sor_hdmi;\nvoid gt215_sor_dp_audio(struct nvkm_ior *, int, bool);\nextern const struct nvkm_ior_func_hda gt215_sor_hda;\n\nint gf119_sor_cnt(struct nvkm_disp *, unsigned long *);\nvoid gf119_sor_state(struct nvkm_ior *, struct nvkm_ior_state *);\nvoid gf119_sor_clock(struct nvkm_ior *);\nextern const struct nvkm_ior_func_dp gf119_sor_dp;\nint gf119_sor_dp_links(struct nvkm_ior *, struct nvkm_i2c_aux *);\nvoid gf119_sor_dp_drive(struct nvkm_ior *, int, int, int, int, int);\nvoid gf119_sor_dp_vcpi(struct nvkm_ior *, int, u8, u8, u16, u16);\nvoid gf119_sor_dp_audio(struct nvkm_ior *, int, bool);\nvoid gf119_sor_dp_audio_sym(struct nvkm_ior *, int, u16, u32);\nvoid gf119_sor_dp_watermark(struct nvkm_ior *, int, u8);\nextern const struct nvkm_ior_func_hda gf119_sor_hda;\nvoid gf119_sor_hda_hpd(struct nvkm_ior *, int, bool);\nvoid gf119_sor_hda_eld(struct nvkm_ior *, int, u8 *, u8);\n\nint gk104_sor_new(struct nvkm_disp *, int);\nextern const struct nvkm_ior_func_hdmi gk104_sor_hdmi;\nvoid gk104_sor_hdmi_ctrl(struct nvkm_ior *, int, bool, u8, u8);\nvoid gk104_sor_hdmi_infoframe_avi(struct nvkm_ior *, int, void *, u32);\nvoid gk104_sor_hdmi_infoframe_vsi(struct nvkm_ior *, int, void *, u32);\n\nvoid gm107_sor_dp_pattern(struct nvkm_ior *, int);\n\nvoid gm200_sor_route_set(struct nvkm_outp *, struct nvkm_ior *);\nint gm200_sor_route_get(struct nvkm_outp *, int *);\nextern const struct nvkm_ior_func_hdmi gm200_sor_hdmi;\nvoid gm200_sor_hdmi_scdc(struct nvkm_ior *, u8);\nextern const struct nvkm_ior_func_dp gm200_sor_dp;\nvoid gm200_sor_dp_drive(struct nvkm_ior *, int, int, int, int, int);\n\nint gp100_sor_new(struct nvkm_disp *, int);\n\nint gv100_sor_cnt(struct nvkm_disp *, unsigned long *);\nvoid gv100_sor_state(struct nvkm_ior *, struct nvkm_ior_state *);\nextern const struct nvkm_ior_func_hdmi gv100_sor_hdmi;\nvoid gv100_sor_dp_audio(struct nvkm_ior *, int, bool);\nvoid gv100_sor_dp_audio_sym(struct nvkm_ior *, int, u16, u32);\nvoid gv100_sor_dp_watermark(struct nvkm_ior *, int, u8);\nextern const struct nvkm_ior_func_hda gv100_sor_hda;\n\nvoid tu102_sor_dp_vcpi(struct nvkm_ior *, int, u8, u8, u16, u16);\n\nint nv50_pior_cnt(struct nvkm_disp *, unsigned long *);\nint nv50_pior_new(struct nvkm_disp *, int);\nvoid nv50_pior_depth(struct nvkm_ior *, struct nvkm_ior_state *, u32 ctrl);\n\n#define IOR_MSG(i,l,f,a...) do {                                               \\\n\tstruct nvkm_ior *_ior = (i);                                           \\\n\tnvkm_##l(&_ior->disp->engine.subdev, \"%s: \"f\"\\n\", _ior->name, ##a);    \\\n} while(0)\n#define IOR_WARN(i,f,a...) IOR_MSG((i), warn, f, ##a)\n#define IOR_DBG(i,f,a...) IOR_MSG((i), debug, f, ##a)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}