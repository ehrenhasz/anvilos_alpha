{
  "module_name": "macros.fuc",
  "hash_id": "4143f186f9c7985a81b10e44c51d0dbe5633b5f69a1164ea1dca9d96c3138b6b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/gr/fuc/macros.fuc",
  "human_readable_source": "/*\n * Copyright 2013 Red Hat Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE COPYRIGHT HOLDER(S) OR AUTHOR(S) BE LIABLE FOR ANY CLAIM, DAMAGES OR\n * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n *\n * Authors: Ben Skeggs <bskeggs@redhat.com>\n */\n\n#include \"os.h\"\n\n#define GF100 0xc0\n#define GF117 0xd7\n#define GK100 0xe0\n#define GK110 0xf0\n#define GK208 0x108\n#define GM107 0x117\n\n#define NV_PGRAPH_TRAPPED_ADDR                                         0x400704\n#define NV_PGRAPH_TRAPPED_DATA_LO                                      0x400708\n#define NV_PGRAPH_TRAPPED_DATA_HI                                      0x40070c\n\n#define NV_PGRAPH_FE_OBJECT_TABLE(n)                        ((n) * 4 + 0x400700)\n\n#define NV_PGRAPH_FECS_INTR_ACK                                        0x409004\n#define NV_PGRAPH_FECS_INTR                                            0x409008\n#define NV_PGRAPH_FECS_INTR_FWMTHD                                   0x00000400\n#define NV_PGRAPH_FECS_INTR_CHSW                                     0x00000100\n#define NV_PGRAPH_FECS_INTR_FIFO                                     0x00000004\n#define NV_PGRAPH_FECS_INTR_MODE                                       0x40900c\n#define NV_PGRAPH_FECS_INTR_MODE_FIFO                                0x00000004\n#define NV_PGRAPH_FECS_INTR_MODE_FIFO_LEVEL                          0x00000004\n#define NV_PGRAPH_FECS_INTR_MODE_FIFO_EDGE                           0x00000000\n#define NV_PGRAPH_FECS_INTR_EN_SET                                     0x409010\n#define NV_PGRAPH_FECS_INTR_EN_SET_FIFO                              0x00000004\n#define NV_PGRAPH_FECS_INTR_ROUTE                                      0x40901c\n#define NV_PGRAPH_FECS_ACCESS                                          0x409048\n#define NV_PGRAPH_FECS_ACCESS_FIFO                                   0x00000002\n#define NV_PGRAPH_FECS_FIFO_DATA                                       0x409064\n#define NV_PGRAPH_FECS_FIFO_CMD                                        0x409068\n#define NV_PGRAPH_FECS_FIFO_ACK                                        0x409074\n#define NV_PGRAPH_FECS_CAPS                                            0x409108\n#define NV_PGRAPH_FECS_SIGNAL                                          0x409400\n#define NV_PGRAPH_FECS_IROUTE                                          0x409404\n#define NV_PGRAPH_FECS_BAR_MASK0                                       0x40940c\n#define NV_PGRAPH_FECS_BAR_MASK1                                       0x409410\n#define NV_PGRAPH_FECS_BAR                                             0x409414\n#define NV_PGRAPH_FECS_BAR_SET                                         0x409418\n#define NV_PGRAPH_FECS_RED_SWITCH                                      0x409614\n#define NV_PGRAPH_FECS_RED_SWITCH_ENABLE_ROP                         0x00000400\n#define NV_PGRAPH_FECS_RED_SWITCH_ENABLE_GPC                         0x00000200\n#define NV_PGRAPH_FECS_RED_SWITCH_ENABLE_MAIN                        0x00000100\n#define NV_PGRAPH_FECS_RED_SWITCH_POWER_ROP                          0x00000040\n#define NV_PGRAPH_FECS_RED_SWITCH_POWER_GPC                          0x00000020\n#define NV_PGRAPH_FECS_RED_SWITCH_POWER_MAIN                         0x00000010\n#define NV_PGRAPH_FECS_RED_SWITCH_PAUSE_GPC                          0x00000002\n#define NV_PGRAPH_FECS_RED_SWITCH_PAUSE_MAIN                         0x00000001\n#define NV_PGRAPH_FECS_MMCTX_SAVE_SWBASE                               0x409700\n#define NV_PGRAPH_FECS_MMCTX_LOAD_SWBASE                               0x409704\n#define NV_PGRAPH_FECS_MMCTX_LOAD_COUNT                                0x40974c\n#define NV_PGRAPH_FECS_MMCTX_SAVE_SWBASE                               0x409700\n#define NV_PGRAPH_FECS_MMCTX_LOAD_SWBASE                               0x409704\n#define NV_PGRAPH_FECS_MMCTX_BASE                                      0x409710\n#define NV_PGRAPH_FECS_MMCTX_CTRL                                      0x409714\n#define NV_PGRAPH_FECS_MMCTX_MULTI_STRIDE                              0x409718\n#define NV_PGRAPH_FECS_MMCTX_MULTI_MASK                                0x40971c\n#define NV_PGRAPH_FECS_MMCTX_QUEUE                                     0x409720\n#define NV_PGRAPH_FECS_MMIO_BASE                                       0x409724\n#define NV_PGRAPH_FECS_MMIO_CTRL                                       0x409728\n#define NV_PGRAPH_FECS_MMIO_CTRL_BASE_ENABLE                         0x00000001\n#define NV_PGRAPH_FECS_MMIO_RDVAL                                      0x40972c\n#define NV_PGRAPH_FECS_MMIO_WRVAL                                      0x409730\n#define NV_PGRAPH_FECS_MMCTX_LOAD_COUNT                                0x40974c\n#if CHIPSET < GK110\n#define NV_PGRAPH_FECS_CC_SCRATCH_VAL(n)                    ((n) * 4 + 0x409800)\n#define NV_PGRAPH_FECS_CC_SCRATCH_SET(n)                    ((n) * 4 + 0x409820)\n#define NV_PGRAPH_FECS_CC_SCRATCH_CLR(n)                    ((n) * 4 + 0x409840)\n#define NV_PGRAPH_FECS_UNK86C                                          0x40986c\n#else\n#define NV_PGRAPH_FECS_CC_SCRATCH_VAL(n)                    ((n) * 4 + 0x409800)\n#define NV_PGRAPH_FECS_CC_SCRATCH_CLR(n)                    ((n) * 4 + 0x409840)\n#define NV_PGRAPH_FECS_UNK86C                                          0x40988c\n#define NV_PGRAPH_FECS_CC_SCRATCH_SET(n)                    ((n) * 4 + 0x4098c0)\n#endif\n#define NV_PGRAPH_FECS_STRANDS_CNT                                     0x409880\n#define NV_PGRAPH_FECS_STRAND_SAVE_SWBASE                              0x409908\n#define NV_PGRAPH_FECS_STRAND_LOAD_SWBASE                              0x40990c\n#define NV_PGRAPH_FECS_STRAND_WORDS                                    0x409910\n#define NV_PGRAPH_FECS_STRAND_DATA                                     0x409918\n#define NV_PGRAPH_FECS_STRAND_SELECT                                   0x40991c\n#define NV_PGRAPH_FECS_STRAND_CMD                                      0x409928\n#define NV_PGRAPH_FECS_STRAND_CMD_SEEK                               0x00000001\n#define NV_PGRAPH_FECS_STRAND_CMD_GET_INFO                           0x00000002\n#define NV_PGRAPH_FECS_STRAND_CMD_SAVE                               0x00000003\n#define NV_PGRAPH_FECS_STRAND_CMD_LOAD                               0x00000004\n#define NV_PGRAPH_FECS_STRAND_CMD_ACTIVATE_FILTER                    0x0000000a\n#define NV_PGRAPH_FECS_STRAND_CMD_DEACTIVATE_FILTER                  0x0000000b\n#define NV_PGRAPH_FECS_STRAND_CMD_ENABLE                             0x0000000c\n#define NV_PGRAPH_FECS_STRAND_CMD_DISABLE                            0x0000000d\n#define NV_PGRAPH_FECS_STRAND_FILTER                                   0x40993c\n#define NV_PGRAPH_FECS_MEM_BASE                                        0x409a04\n#define NV_PGRAPH_FECS_MEM_CHAN                                        0x409a0c\n#define NV_PGRAPH_FECS_MEM_CMD                                         0x409a10\n#define NV_PGRAPH_FECS_MEM_CMD_LOAD_CHAN                             0x00000007\n#define NV_PGRAPH_FECS_MEM_TARGET                                      0x409a20\n#define NV_PGRAPH_FECS_MEM_TARGET_UNK31                              0x80000000\n#define NV_PGRAPH_FECS_MEM_TARGET_AS                                 0x0000001f\n#define NV_PGRAPH_FECS_MEM_TARGET_AS_VM                              0x00000001\n#define NV_PGRAPH_FECS_MEM_TARGET_AS_VRAM                            0x00000002\n#define NV_PGRAPH_FECS_CHAN_ADDR                                       0x409b00\n#define NV_PGRAPH_FECS_CHAN_NEXT                                       0x409b04\n#define NV_PGRAPH_FECS_CHSW                                            0x409b0c\n#define NV_PGRAPH_FECS_CHSW_ACK                                      0x00000001\n#define NV_PGRAPH_FECS_INTR_UP_SET                                     0x409c1c\n#define NV_PGRAPH_FECS_INTR_UP_EN                                      0x409c24\n\n#define NV_PGRAPH_GPCX_GPCCS_INTR_ACK                                  0x41a004\n#define NV_PGRAPH_GPCX_GPCCS_INTR                                      0x41a008\n#define NV_PGRAPH_GPCX_GPCCS_INTR_FIFO                               0x00000004\n#define NV_PGRAPH_GPCX_GPCCS_INTR_EN_SET                               0x41a010\n#define NV_PGRAPH_GPCX_GPCCS_INTR_EN_SET_FIFO                        0x00000004\n#define NV_PGRAPH_GPCX_GPCCS_INTR_ROUTE                                0x41a01c\n#define NV_PGRAPH_GPCX_GPCCS_ACCESS                                    0x41a048\n#define NV_PGRAPH_GPCX_GPCCS_ACCESS_FIFO                             0x00000002\n#define NV_PGRAPH_GPCX_GPCCS_FIFO_DATA                                 0x41a064\n#define NV_PGRAPH_GPCX_GPCCS_FIFO_CMD                                  0x41a068\n#define NV_PGRAPH_GPCX_GPCCS_FIFO_ACK                                  0x41a074\n#define NV_PGRAPH_GPCX_GPCCS_UNITS                                     0x41a608\n#define NV_PGRAPH_GPCX_GPCCS_CAPS                                      0x41a108\n#define NV_PGRAPH_GPCX_GPCCS_RED_SWITCH                                0x41a614\n#define NV_PGRAPH_GPCX_GPCCS_RED_SWITCH_UNK11                        0x00000800\n#define NV_PGRAPH_GPCX_GPCCS_RED_SWITCH_ENABLE                       0x00000200\n#define NV_PGRAPH_GPCX_GPCCS_RED_SWITCH_POWER                        0x00000020\n#define NV_PGRAPH_GPCX_GPCCS_RED_SWITCH_PAUSE                        0x00000002\n#define NV_PGRAPH_GPCX_GPCCS_MYINDEX                                   0x41a618\n#define NV_PGRAPH_GPCX_GPCCS_MMCTX_SAVE_SWBASE                         0x41a700\n#define NV_PGRAPH_GPCX_GPCCS_MMCTX_LOAD_SWBASE                         0x41a704\n#define NV_PGRAPH_GPCX_GPCCS_MMIO_BASE                                 0x41a724\n#define NV_PGRAPH_GPCX_GPCCS_MMIO_CTRL                                 0x41a728\n#define NV_PGRAPH_GPCX_GPCCS_MMIO_CTRL_BASE_ENABLE                   0x00000001\n#define NV_PGRAPH_GPCX_GPCCS_MMIO_RDVAL                                0x41a72c\n#define NV_PGRAPH_GPCX_GPCCS_MMIO_WRVAL                                0x41a730\n#define NV_PGRAPH_GPCX_GPCCS_MMCTX_LOAD_COUNT                          0x41a74c\n#if CHIPSET < GK110\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_VAL(n)              ((n) * 4 + 0x41a800)\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_SET(n)              ((n) * 4 + 0x41a820)\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_CLR(n)              ((n) * 4 + 0x41a840)\n#define NV_PGRAPH_GPCX_GPCCS_UNK86C                                    0x41a86c\n#else\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_VAL(n)              ((n) * 4 + 0x41a800)\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_CLR(n)              ((n) * 4 + 0x41a840)\n#define NV_PGRAPH_GPCX_GPCCS_UNK86C                                    0x41a88c\n#define NV_PGRAPH_GPCX_GPCCS_CC_SCRATCH_SET(n)              ((n) * 4 + 0x41a8c0)\n#endif\n#define NV_PGRAPH_GPCX_GPCCS_STRAND_SELECT                             0x41a91c\n#define NV_PGRAPH_GPCX_GPCCS_STRAND_CMD                                0x41a928\n#define NV_PGRAPH_GPCX_GPCCS_STRAND_CMD_SAVE                         0x00000003\n#define NV_PGRAPH_GPCX_GPCCS_STRAND_CMD_LOAD                         0x00000004\n#define NV_PGRAPH_GPCX_GPCCS_MEM_BASE                                  0x41aa04\n#define NV_PGRAPH_GPCX_GPCCS_TPC_STATUS                                0x41acfc\n\n#define NV_PGRAPH_GPC0_TPC0                                            0x504000\n#define NV_PGRAPH_GPC0_TPC0__SIZE                                      0x000800\n\n#define NV_PGRAPH_GPC0_TPCX_STRAND_INDEX                               0x501d60\n#define NV_PGRAPH_GPC0_TPCX_STRAND_INDEX_ALL                         0x0000003f\n#define NV_PGRAPH_GPC0_TPCX_STRAND_DATA                                0x501d98\n#define NV_PGRAPH_GPC0_TPCX_STRAND_SELECT                              0x501d9c\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD                                 0x501da8\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_SEEK                          0x00000001\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_GET_INFO                      0x00000002\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_SAVE                          0x00000003\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_LOAD                          0x00000004\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_ENABLE                        0x0000000c\n#define NV_PGRAPH_GPC0_TPCX_STRAND_CMD_DISABLE                       0x0000000d\n#define NV_PGRAPH_GPC0_TPCX_STRAND_MEM_BASE                            0x501dc4\n\n#define NV_TPC_STRAND_INDEX                                               0x560\n#define NV_TPC_STRAND_CNT                                                 0x570\n#define NV_TPC_STRAND_SAVE_SWBASE                                         0x588\n#define NV_TPC_STRAND_LOAD_SWBASE                                         0x58c\n#define NV_TPC_STRAND_WORDS                                               0x590\n\n#define mmctx_data(r,c) .b32 (((c - 1) << 26) | r)\n#define queue_init      .skip 72 // (2 * 4) + ((8 * 4) * 2)\n\n#define T_WAIT    0\n#define T_MMCTX   1\n#define T_STRWAIT 2\n#define T_STRINIT 3\n#define T_AUTO    4\n#define T_CHAN    5\n#define T_LOAD    6\n#define T_SAVE    7\n#define T_LCHAN   8\n#define T_LCTXH   9\n#define T_STRTPC  10\n\n#if CHIPSET < GK208\n#define imm32(reg,val) /*\n*/\tmovw reg  ((val) & 0x0000ffff) /*\n*/\tsethi reg ((val) & 0xffff0000)\n#else\n#define imm32(reg,val) /*\n*/\tmov reg (val)\n#endif\n\n#define nv_mkio(rv,r,i) /*\n*/\timm32(rv, (((r) & 0xffc) << 6) | ((i) << 2))\n\n#define hash #\n#define fn(a) a\n#if CHIPSET < GK208\n#define call(a) call fn(hash)a\n#else\n#define call(a) lcall fn(hash)a\n#endif\n\n#define nv_iord(rv,r,i) /*\n*/\tnv_mkio(rv,r,i) /*\n*/\tiord rv I[rv]\n\n#define nv_iowr(r,i,rv) /*\n*/\tnv_mkio($r0,r,i) /*\n*/\tiowr I[$r0] rv /*\n*/\tclear b32 $r0\n\n#define nv_rd32(reg,addr) /*\n*/\timm32($r14, addr) /*\n*/\tcall(nv_rd32) /*\n*/\tmov b32 reg $r15\n\n#define nv_wr32(addr,reg) /*\n*/\tmov b32 $r15 reg /*\n*/\timm32($r14, addr) /*\n*/\tcall(nv_wr32)\n\n#define trace_set(bit) /*\n*/\tclear b32 $r9 /*\n*/\tbset $r9 bit /*\n*/\tnv_iowr(NV_PGRAPH_FECS_CC_SCRATCH_SET(7), 0, $r9)\n\n#define trace_clr(bit) /*\n*/\tclear b32 $r9 /*\n*/\tbset $r9 bit /*\n*/\tnv_iowr(NV_PGRAPH_FECS_CC_SCRATCH_CLR(7), 0, $r9)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}