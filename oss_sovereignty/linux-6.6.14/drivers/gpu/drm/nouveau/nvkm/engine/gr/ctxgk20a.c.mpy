{
  "module_name": "ctxgk20a.c",
  "hash_id": "c7471a8bf8b383357d569e4697a763b79caf7feae188f40c98db06e9a75e67b1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk20a.c",
  "human_readable_source": " \n#include \"ctxgf100.h\"\n#include \"gf100.h\"\n\n#include <subdev/mc.h>\n\nstatic void\ngk20a_grctx_generate_main(struct gf100_gr_chan *chan)\n{\n\tstruct gf100_gr *gr = chan->gr;\n\tstruct nvkm_device *device = gr->base.engine.subdev.device;\n\tconst struct gf100_grctx_func *grctx = gr->func->grctx;\n\tu32 idle_timeout;\n\tint i;\n\n\tgf100_gr_mmio(gr, gr->sw_ctx);\n\n\tgf100_gr_wait_idle(gr);\n\n\tidle_timeout = nvkm_mask(device, 0x404154, 0xffffffff, 0x00000000);\n\n\tgrctx->attrib_cb(chan, chan->attrib_cb->addr, grctx->attrib_cb_size(gr));\n\tgrctx->attrib(chan);\n\n\tgrctx->unkn(gr);\n\n\tgf100_grctx_generate_floorsweep(gr);\n\n\tfor (i = 0; i < 8; i++)\n\t\tnvkm_wr32(device, 0x4064d0 + (i * 0x04), 0x00000000);\n\n\tnvkm_wr32(device, 0x405b00, (gr->tpc_total << 8) | gr->gpc_nr);\n\n\tnvkm_mask(device, 0x5044b0, 0x08000000, 0x08000000);\n\n\tgf100_gr_wait_idle(gr);\n\n\tnvkm_wr32(device, 0x404154, idle_timeout);\n\tgf100_gr_wait_idle(gr);\n\n\tgf100_gr_mthd(gr, gr->method);\n\tgf100_gr_wait_idle(gr);\n\n\tgf100_gr_icmd(gr, gr->bundle);\n\tgrctx->pagepool(chan, chan->pagepool->addr);\n\tgrctx->bundle(chan, chan->bundle_cb->addr, grctx->bundle_size);\n}\n\nconst struct gf100_grctx_func\ngk20a_grctx = {\n\t.main  = gk20a_grctx_generate_main,\n\t.unkn  = gk104_grctx_generate_unkn,\n\t.bundle = gk104_grctx_generate_bundle,\n\t.bundle_size = 0x1800,\n\t.bundle_min_gpm_fifo_depth = 0x62,\n\t.bundle_token_limit = 0x100,\n\t.pagepool = gk104_grctx_generate_pagepool,\n\t.pagepool_size = 0x8000,\n\t.attrib_cb_size = gf100_grctx_generate_attrib_cb_size,\n\t.attrib_cb = gf100_grctx_generate_attrib_cb,\n\t.attrib = gf117_grctx_generate_attrib,\n\t.attrib_nr_max = 0x240,\n\t.attrib_nr = 0x240,\n\t.alpha_nr_max = 0x648 + (0x648 / 2),\n\t.alpha_nr = 0x648,\n\t.sm_id = gf100_grctx_generate_sm_id,\n\t.tpc_nr = gf100_grctx_generate_tpc_nr,\n\t.rop_mapping = gf117_grctx_generate_rop_mapping,\n\t.alpha_beta_tables = gk104_grctx_generate_alpha_beta_tables,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}