{
  "module_name": "chan.h",
  "hash_id": "a0c0f81059d712643c88e60675aecfe177f5beba092052d160dbb4fe32919455",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/fifo/chan.h",
  "human_readable_source": " \n#ifndef __NVKM_CHAN_H__\n#define __NVKM_CHAN_H__\n#include <engine/fifo.h>\nstruct nvkm_dmaobj;\nstruct nvkm_engn;\nstruct nvkm_runl;\n\nextern const struct nvkm_event_func nvkm_chan_event;\n\nstruct nvkm_cctx {\n\tstruct nvkm_vctx *vctx;\n\trefcount_t refs;\n\trefcount_t uses;\n\n\tstruct list_head head;\n};\n\nstruct nvkm_chan_func {\n\tconst struct nvkm_chan_func_inst {\n\t\tu32 size;\n\t\tbool zero;\n\t\tbool vmm;\n\t} *inst;\n\n\tconst struct nvkm_chan_func_userd {\n\t\tint bar;\n\t\tu32 base;\n\t\tu32 size;\n\t\tvoid (*clear)(struct nvkm_chan *);\n\t} *userd;\n\n\tconst struct nvkm_chan_func_ramfc {\n\t\tconst struct nvkm_ramfc_layout {\n\t\t\tunsigned bits:6;\n\t\t\tunsigned ctxs:5;\n\t\t\tunsigned ctxp:8;\n\t\t\tunsigned regs:5;\n\t\t\tunsigned regp;\n\t\t} *layout;\n\t\tint (*write)(struct nvkm_chan *, u64 offset, u64 length, u32 devm, bool priv);\n\t\tvoid (*clear)(struct nvkm_chan *);\n\t\tbool ctxdma;\n\t\tu32 devm;\n\t\tbool priv;\n\t} *ramfc;\n\n\tvoid (*bind)(struct nvkm_chan *);\n\tvoid (*unbind)(struct nvkm_chan *);\n\tvoid (*start)(struct nvkm_chan *);\n\tvoid (*stop)(struct nvkm_chan *);\n\tvoid (*preempt)(struct nvkm_chan *);\n\tu32 (*doorbell_handle)(struct nvkm_chan *);\n};\n\nint nvkm_chan_new_(const struct nvkm_chan_func *, struct nvkm_runl *, int runq, struct nvkm_cgrp *,\n\t\t   const char *name, bool priv, u32 devm, struct nvkm_vmm *, struct nvkm_dmaobj *,\n\t\t   u64 offset, u64 length, struct nvkm_memory *userd, u64 userd_bar1,\n\t\t   struct nvkm_chan **);\nvoid nvkm_chan_del(struct nvkm_chan **);\nvoid nvkm_chan_allow(struct nvkm_chan *);\nvoid nvkm_chan_block(struct nvkm_chan *);\nvoid nvkm_chan_error(struct nvkm_chan *, bool preempt);\nvoid nvkm_chan_insert(struct nvkm_chan *);\nvoid nvkm_chan_remove(struct nvkm_chan *, bool preempt);\nvoid nvkm_chan_remove_locked(struct nvkm_chan *);\nint nvkm_chan_preempt(struct nvkm_chan *, bool wait);\nint nvkm_chan_preempt_locked(struct nvkm_chan *, bool wait);\nint nvkm_chan_cctx_get(struct nvkm_chan *, struct nvkm_engn *, struct nvkm_cctx **,\n\t\t       struct nvkm_client *  );\nvoid nvkm_chan_cctx_put(struct nvkm_chan *, struct nvkm_cctx **);\nvoid nvkm_chan_cctx_bind(struct nvkm_chan *, struct nvkm_engn *, struct nvkm_cctx *);\n\n#define CHAN_PRCLI(c,l,p,f,a...) CGRP_PRINT((c)->cgrp, l, p, \"%04x:[%s]\"f, (c)->id, (c)->name, ##a)\n#define CHAN_PRINT(c,l,p,f,a...) CGRP_PRINT((c)->cgrp, l, p, \"%04x:\"f, (c)->id, ##a)\n#define CHAN_ERROR(c,f,a...) CHAN_PRCLI((c), ERROR,    err, \" \"f\"\\n\", ##a)\n#define CHAN_TRACE(c,f,a...) CHAN_PRINT((c), TRACE,   info, \" \"f\"\\n\", ##a)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}