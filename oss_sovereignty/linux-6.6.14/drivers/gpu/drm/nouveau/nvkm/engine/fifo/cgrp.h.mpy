{
  "module_name": "cgrp.h",
  "hash_id": "7a3322102f3b5a98e93f3e5e5bc70ba13d172642061b085f753345d7d1870d80",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/fifo/cgrp.h",
  "human_readable_source": " \n#ifndef __NVKM_CGRP_H__\n#define __NVKM_CGRP_H__\n#include <core/os.h>\nstruct nvkm_chan;\nstruct nvkm_client;\n\nstruct nvkm_vctx {\n\tstruct nvkm_ectx *ectx;\n\tstruct nvkm_vmm *vmm;\n\trefcount_t refs;\n\n\tstruct nvkm_gpuobj *inst;\n\tstruct nvkm_vma *vma;\n\n\tstruct list_head head;\n};\n\nstruct nvkm_ectx {\n\tstruct nvkm_engn *engn;\n\trefcount_t refs;\n\trefcount_t uses;\n\n\tstruct nvkm_object *object;\n\n\tstruct list_head head;\n};\n\nstruct nvkm_cgrp {\n\tconst struct nvkm_cgrp_func {\n\t\tvoid (*preempt)(struct nvkm_cgrp *);\n\t} *func;\n\tchar name[64];\n\tstruct nvkm_runl *runl;\n\tstruct nvkm_vmm *vmm;\n\tbool hw;\n\tint id;\n\tstruct kref kref;\n\n\tstruct list_head chans;\n\tint chan_nr;\n\n\tspinlock_t lock;  \n\n\tstruct list_head ectxs;\n\tstruct list_head vctxs;\n\tstruct mutex mutex;\n\n#define NVKM_CGRP_RC_NONE    0\n#define NVKM_CGRP_RC_PENDING 1\n#define NVKM_CGRP_RC_RUNNING 2\n\tatomic_t rc;\n\n\tstruct list_head head;\n};\n\nint nvkm_cgrp_new(struct nvkm_runl *, const char *name, struct nvkm_vmm *, bool hw,\n\t\t  struct nvkm_cgrp **);\nstruct nvkm_cgrp *nvkm_cgrp_ref(struct nvkm_cgrp *);\nvoid nvkm_cgrp_unref(struct nvkm_cgrp **);\nint nvkm_cgrp_vctx_get(struct nvkm_cgrp *, struct nvkm_engn *, struct nvkm_chan *,\n\t\t       struct nvkm_vctx **, struct nvkm_client *);\nvoid nvkm_cgrp_vctx_put(struct nvkm_cgrp *, struct nvkm_vctx **);\n\nvoid nvkm_cgrp_put(struct nvkm_cgrp **, unsigned long irqflags);\n\n#define nvkm_cgrp_foreach_chan(chan,cgrp) list_for_each_entry((chan), &(cgrp)->chans, head)\n#define nvkm_cgrp_foreach_chan_safe(chan,ctmp,cgrp) \\\n\tlist_for_each_entry_safe((chan), (ctmp), &(cgrp)->chans, head)\n\n#define CGRP_PRCLI(c,l,p,f,a...) RUNL_PRINT((c)->runl, l, p, \"%04x:[%s]\"f, (c)->id, (c)->name, ##a)\n#define CGRP_PRINT(c,l,p,f,a...) RUNL_PRINT((c)->runl, l, p, \"%04x:\"f, (c)->id, ##a)\n#define CGRP_ERROR(c,f,a...) CGRP_PRCLI((c), ERROR,    err, \" \"f\"\\n\", ##a)\n#define CGRP_TRACE(c,f,a...) CGRP_PRINT((c), TRACE,   info, \" \"f\"\\n\", ##a)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}