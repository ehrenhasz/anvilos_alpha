{
  "module_name": "base.c",
  "hash_id": "27f1c92f296ee0afdfc2eacace3b8ce710e0cb1a4add9d93a30e226ac10f081b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/engine/gr/base.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <engine/fifo.h>\n\nu32\nnvkm_gr_ctxsw_inst(struct nvkm_device *device)\n{\n\tstruct nvkm_gr *gr = device->gr;\n\tif (gr && gr->func->ctxsw.inst)\n\t\treturn gr->func->ctxsw.inst(gr);\n\treturn 0;\n}\n\nint\nnvkm_gr_ctxsw_resume(struct nvkm_device *device)\n{\n\tstruct nvkm_gr *gr = device->gr;\n\tif (gr && gr->func->ctxsw.resume)\n\t\treturn gr->func->ctxsw.resume(gr);\n\treturn 0;\n}\n\nint\nnvkm_gr_ctxsw_pause(struct nvkm_device *device)\n{\n\tstruct nvkm_gr *gr = device->gr;\n\tif (gr && gr->func->ctxsw.pause)\n\t\treturn gr->func->ctxsw.pause(gr);\n\treturn 0;\n}\n\nstatic bool\nnvkm_gr_chsw_load(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tif (gr->func->chsw_load)\n\t\treturn gr->func->chsw_load(gr);\n\treturn false;\n}\n\nstatic void\nnvkm_gr_tile(struct nvkm_engine *engine, int region, struct nvkm_fb_tile *tile)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tif (gr->func->tile)\n\t\tgr->func->tile(gr, region, tile);\n}\n\nu64\nnvkm_gr_units(struct nvkm_gr *gr)\n{\n\tif (gr->func->units)\n\t\treturn gr->func->units(gr);\n\treturn 0;\n}\n\nint\nnvkm_gr_tlb_flush(struct nvkm_gr *gr)\n{\n\tif (gr->func->tlb_flush)\n\t\treturn gr->func->tlb_flush(gr);\n\treturn -ENODEV;\n}\n\nstatic int\nnvkm_gr_oclass_get(struct nvkm_oclass *oclass, int index)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(oclass->engine);\n\tint c = 0;\n\n\tif (gr->func->object_get) {\n\t\tint ret = gr->func->object_get(gr, index, &oclass->base);\n\t\tif (oclass->base.oclass)\n\t\t\treturn index;\n\t\treturn ret;\n\t}\n\n\twhile (gr->func->sclass[c].oclass) {\n\t\tif (c++ == index) {\n\t\t\toclass->base = gr->func->sclass[index];\n\t\t\treturn index;\n\t\t}\n\t}\n\n\treturn c;\n}\n\nstatic int\nnvkm_gr_cclass_new(struct nvkm_chan *chan, const struct nvkm_oclass *oclass,\n\t\t   struct nvkm_object **pobject)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(oclass->engine);\n\tif (gr->func->chan_new)\n\t\treturn gr->func->chan_new(gr, chan, oclass, pobject);\n\treturn 0;\n}\n\nstatic void\nnvkm_gr_intr(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tgr->func->intr(gr);\n}\n\nstatic int\nnvkm_gr_nonstall(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\n\tif (gr->func->nonstall)\n\t\treturn gr->func->nonstall(gr);\n\n\treturn -EINVAL;\n}\n\nstatic int\nnvkm_gr_oneinit(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tif (gr->func->oneinit)\n\t\treturn gr->func->oneinit(gr);\n\treturn 0;\n}\n\nstatic int\nnvkm_gr_reset(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\n\tif (gr->func->reset)\n\t\treturn gr->func->reset(gr);\n\n\treturn -ENOSYS;\n}\n\nstatic int\nnvkm_gr_init(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\treturn gr->func->init(gr);\n}\n\nstatic int\nnvkm_gr_fini(struct nvkm_engine *engine, bool suspend)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tif (gr->func->fini)\n\t\treturn gr->func->fini(gr, suspend);\n\treturn 0;\n}\n\nstatic void *\nnvkm_gr_dtor(struct nvkm_engine *engine)\n{\n\tstruct nvkm_gr *gr = nvkm_gr(engine);\n\tif (gr->func->dtor)\n\t\treturn gr->func->dtor(gr);\n\treturn gr;\n}\n\nstatic const struct nvkm_engine_func\nnvkm_gr = {\n\t.dtor = nvkm_gr_dtor,\n\t.oneinit = nvkm_gr_oneinit,\n\t.init = nvkm_gr_init,\n\t.fini = nvkm_gr_fini,\n\t.reset = nvkm_gr_reset,\n\t.nonstall = nvkm_gr_nonstall,\n\t.intr = nvkm_gr_intr,\n\t.tile = nvkm_gr_tile,\n\t.chsw_load = nvkm_gr_chsw_load,\n\t.fifo.cclass = nvkm_gr_cclass_new,\n\t.fifo.sclass = nvkm_gr_oclass_get,\n};\n\nint\nnvkm_gr_ctor(const struct nvkm_gr_func *func, struct nvkm_device *device,\n\t     enum nvkm_subdev_type type, int inst, bool enable, struct nvkm_gr *gr)\n{\n\tgr->func = func;\n\treturn nvkm_engine_ctor(&nvkm_gr, device, type, inst, enable, &gr->engine);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}