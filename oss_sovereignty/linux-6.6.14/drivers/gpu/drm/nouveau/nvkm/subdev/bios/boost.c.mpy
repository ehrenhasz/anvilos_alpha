{
  "module_name": "boost.c",
  "hash_id": "8b3a82a6711faf31759369fc3b6fc87434e51ddb50af3f573d9b992905eb6336",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bios/boost.c",
  "human_readable_source": " \n#include <subdev/bios.h>\n#include <subdev/bios/bit.h>\n#include <subdev/bios/boost.h>\n\nu32\nnvbios_boostTe(struct nvkm_bios *bios,\n\t       u8 *ver, u8 *hdr, u8 *cnt, u8 *len, u8 *snr, u8 *ssz)\n{\n\tstruct bit_entry bit_P;\n\tu32 boost = 0;\n\n\tif (!bit_entry(bios, 'P', &bit_P)) {\n\t\tif (bit_P.version == 2 && bit_P.length >= 0x34)\n\t\t\tboost = nvbios_rd32(bios, bit_P.offset + 0x30);\n\n\t\tif (boost) {\n\t\t\t*ver = nvbios_rd08(bios, boost + 0);\n\t\t\tswitch (*ver) {\n\t\t\tcase 0x11:\n\t\t\t\t*hdr = nvbios_rd08(bios, boost + 1);\n\t\t\t\t*cnt = nvbios_rd08(bios, boost + 5);\n\t\t\t\t*len = nvbios_rd08(bios, boost + 2);\n\t\t\t\t*snr = nvbios_rd08(bios, boost + 4);\n\t\t\t\t*ssz = nvbios_rd08(bios, boost + 3);\n\t\t\t\treturn boost;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nu32\nnvbios_boostEe(struct nvkm_bios *bios, int idx,\n\t       u8 *ver, u8 *hdr, u8 *cnt, u8 *len)\n{\n\tu8  snr, ssz;\n\tu32 data = nvbios_boostTe(bios, ver, hdr, cnt, len, &snr, &ssz);\n\tif (data && idx < *cnt) {\n\t\tdata = data + *hdr + (idx * (*len + (snr * ssz)));\n\t\t*hdr = *len;\n\t\t*cnt = snr;\n\t\t*len = ssz;\n\t\treturn data;\n\t}\n\treturn 0;\n}\n\nu32\nnvbios_boostEp(struct nvkm_bios *bios, int idx,\n\t       u8 *ver, u8 *hdr, u8 *cnt, u8 *len, struct nvbios_boostE *info)\n{\n\tu32 data = nvbios_boostEe(bios, idx, ver, hdr, cnt, len);\n\tmemset(info, 0x00, sizeof(*info));\n\tif (data) {\n\t\tinfo->pstate = (nvbios_rd16(bios, data + 0x00) & 0x01e0) >> 5;\n\t\tinfo->min    =  nvbios_rd16(bios, data + 0x02) * 1000;\n\t\tinfo->max    =  nvbios_rd16(bios, data + 0x04) * 1000;\n\t}\n\treturn data;\n}\n\nu32\nnvbios_boostEm(struct nvkm_bios *bios, u8 pstate,\n\t       u8 *ver, u8 *hdr, u8 *cnt, u8 *len, struct nvbios_boostE *info)\n{\n\tu32 data, idx = 0;\n\twhile ((data = nvbios_boostEp(bios, idx++, ver, hdr, cnt, len, info))) {\n\t\tif (info->pstate == pstate)\n\t\t\tbreak;\n\t}\n\treturn data;\n}\n\nu32\nnvbios_boostSe(struct nvkm_bios *bios, int idx,\n\t       u32 data, u8 *ver, u8 *hdr, u8 cnt, u8 len)\n{\n\tif (data && idx < cnt) {\n\t\tdata = data + *hdr + (idx * len);\n\t\t*hdr = len;\n\t\treturn data;\n\t}\n\treturn 0;\n}\n\nu32\nnvbios_boostSp(struct nvkm_bios *bios, int idx,\n\t       u32 data, u8 *ver, u8 *hdr, u8 cnt, u8 len,\n\t       struct nvbios_boostS *info)\n{\n\tdata = nvbios_boostSe(bios, idx, data, ver, hdr, cnt, len);\n\tmemset(info, 0x00, sizeof(*info));\n\tif (data) {\n\t\tinfo->domain  = nvbios_rd08(bios, data + 0x00);\n\t\tinfo->percent = nvbios_rd08(bios, data + 0x01);\n\t\tinfo->min     = nvbios_rd16(bios, data + 0x02) * 1000;\n\t\tinfo->max     = nvbios_rd16(bios, data + 0x04) * 1000;\n\t}\n\treturn data;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}