{
  "module_name": "conn.c",
  "hash_id": "d644cd54441e5aab55e7189c06b8d53f6e8eb4f40c2f2d49914f482a07fdfbe5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bios/conn.c",
  "human_readable_source": " \n#include <subdev/bios.h>\n#include <subdev/bios/dcb.h>\n#include <subdev/bios/conn.h>\n\nu32\nnvbios_connTe(struct nvkm_bios *bios, u8 *ver, u8 *hdr, u8 *cnt, u8 *len)\n{\n\tu32 dcb = dcb_table(bios, ver, hdr, cnt, len);\n\tif (dcb && *ver >= 0x30 && *hdr >= 0x16) {\n\t\tu32 data = nvbios_rd16(bios, dcb + 0x14);\n\t\tif (data) {\n\t\t\t*ver = nvbios_rd08(bios, data + 0);\n\t\t\t*hdr = nvbios_rd08(bios, data + 1);\n\t\t\t*cnt = nvbios_rd08(bios, data + 2);\n\t\t\t*len = nvbios_rd08(bios, data + 3);\n\t\t\treturn data;\n\t\t}\n\t}\n\treturn 0x00000000;\n}\n\nu32\nnvbios_connTp(struct nvkm_bios *bios, u8 *ver, u8 *hdr, u8 *cnt, u8 *len,\n\t      struct nvbios_connT *info)\n{\n\tu32 data = nvbios_connTe(bios, ver, hdr, cnt, len);\n\tmemset(info, 0x00, sizeof(*info));\n\tswitch (!!data * *ver) {\n\tcase 0x30:\n\tcase 0x40:\n\t\treturn data;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn 0x00000000;\n}\n\nu32\nnvbios_connEe(struct nvkm_bios *bios, u8 idx, u8 *ver, u8 *len)\n{\n\tu8  hdr, cnt;\n\tu32 data = nvbios_connTe(bios, ver, &hdr, &cnt, len);\n\tif (data && idx < cnt)\n\t\treturn data + hdr + (idx * *len);\n\treturn 0x00000000;\n}\n\nu32\nnvbios_connEp(struct nvkm_bios *bios, u8 idx, u8 *ver, u8 *len,\n\t      struct nvbios_connE *info)\n{\n\tu32 data = nvbios_connEe(bios, idx, ver, len);\n\tmemset(info, 0x00, sizeof(*info));\n\tswitch (!!data * *ver) {\n\tcase 0x30:\n\tcase 0x40:\n\t\tinfo->type     =  nvbios_rd08(bios, data + 0x00);\n\t\tinfo->location =  nvbios_rd08(bios, data + 0x01) & 0x0f;\n\t\tinfo->hpd      = (nvbios_rd08(bios, data + 0x01) & 0x30) >> 4;\n\t\tinfo->dp       = (nvbios_rd08(bios, data + 0x01) & 0xc0) >> 6;\n\t\tif (*len < 4)\n\t\t\treturn data;\n\t\tinfo->hpd     |= (nvbios_rd08(bios, data + 0x02) & 0x03) << 2;\n\t\tinfo->dp      |=  nvbios_rd08(bios, data + 0x02) & 0x0c;\n\t\tinfo->di       = (nvbios_rd08(bios, data + 0x02) & 0xf0) >> 4;\n\t\tinfo->hpd     |= (nvbios_rd08(bios, data + 0x03) & 0x07) << 4;\n\t\tinfo->sr       = (nvbios_rd08(bios, data + 0x03) & 0x08) >> 3;\n\t\tinfo->lcdid    = (nvbios_rd08(bios, data + 0x03) & 0x70) >> 4;\n\t\treturn data;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn 0x00000000;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}