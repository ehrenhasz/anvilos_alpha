{
  "module_name": "busgf119.c",
  "hash_id": "24bd281df863d03477e1fd91dcc702020330c00f2804cd9ac5311a03d3fd8c79",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/busgf119.c",
  "human_readable_source": " \n#define gf119_i2c_bus(p) container_of((p), struct gf119_i2c_bus, base)\n#include \"bus.h\"\n\nstruct gf119_i2c_bus {\n\tstruct nvkm_i2c_bus base;\n\tu32 addr;\n};\n\nstatic void\ngf119_i2c_bus_drive_scl(struct nvkm_i2c_bus *base, int state)\n{\n\tstruct gf119_i2c_bus *bus = gf119_i2c_bus(base);\n\tstruct nvkm_device *device = bus->base.pad->i2c->subdev.device;\n\tnvkm_mask(device, bus->addr, 0x00000001, state ? 0x00000001 : 0);\n}\n\nstatic void\ngf119_i2c_bus_drive_sda(struct nvkm_i2c_bus *base, int state)\n{\n\tstruct gf119_i2c_bus *bus = gf119_i2c_bus(base);\n\tstruct nvkm_device *device = bus->base.pad->i2c->subdev.device;\n\tnvkm_mask(device, bus->addr, 0x00000002, state ? 0x00000002 : 0);\n}\n\nstatic int\ngf119_i2c_bus_sense_scl(struct nvkm_i2c_bus *base)\n{\n\tstruct gf119_i2c_bus *bus = gf119_i2c_bus(base);\n\tstruct nvkm_device *device = bus->base.pad->i2c->subdev.device;\n\treturn !!(nvkm_rd32(device, bus->addr) & 0x00000010);\n}\n\nstatic int\ngf119_i2c_bus_sense_sda(struct nvkm_i2c_bus *base)\n{\n\tstruct gf119_i2c_bus *bus = gf119_i2c_bus(base);\n\tstruct nvkm_device *device = bus->base.pad->i2c->subdev.device;\n\treturn !!(nvkm_rd32(device, bus->addr) & 0x00000020);\n}\n\nstatic void\ngf119_i2c_bus_init(struct nvkm_i2c_bus *base)\n{\n\tstruct gf119_i2c_bus *bus = gf119_i2c_bus(base);\n\tstruct nvkm_device *device = bus->base.pad->i2c->subdev.device;\n\tnvkm_wr32(device, bus->addr, 0x00000007);\n}\n\nstatic const struct nvkm_i2c_bus_func\ngf119_i2c_bus_func = {\n\t.init = gf119_i2c_bus_init,\n\t.drive_scl = gf119_i2c_bus_drive_scl,\n\t.drive_sda = gf119_i2c_bus_drive_sda,\n\t.sense_scl = gf119_i2c_bus_sense_scl,\n\t.sense_sda = gf119_i2c_bus_sense_sda,\n\t.xfer = nvkm_i2c_bit_xfer,\n};\n\nint\ngf119_i2c_bus_new(struct nvkm_i2c_pad *pad, int id, u8 drive,\n\t\t struct nvkm_i2c_bus **pbus)\n{\n\tstruct gf119_i2c_bus *bus;\n\n\tif (!(bus = kzalloc(sizeof(*bus), GFP_KERNEL)))\n\t\treturn -ENOMEM;\n\t*pbus = &bus->base;\n\n\tnvkm_i2c_bus_ctor(&gf119_i2c_bus_func, pad, id, &bus->base);\n\tbus->addr = 0x00d014 + (drive * 0x20);\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}