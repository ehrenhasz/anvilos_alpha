{
  "module_name": "gddr5.c",
  "hash_id": "15efd79ffe12b0e744648489cdb1482deb66e730ec9b2846b39beb708dfc8446",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/fb/gddr5.c",
  "human_readable_source": " \n#include \"ram.h\"\n\n \n#define NOTE00(a) 1\n\nint\nnvkm_gddr5_calc(struct nvkm_ram *ram, bool nuts)\n{\n\tint pd, lf, xd, vh, vr, vo, l3;\n\tint WL, CL, WR, at[2], dt, ds;\n\tint rq = ram->freq < 1000000;  \n\n\txd = !ram->next->bios.ramcfg_DLLoff;\n\n\tswitch (ram->next->bios.ramcfg_ver) {\n\tcase 0x11:\n\t\tpd =  ram->next->bios.ramcfg_11_01_80;\n\t\tlf =  ram->next->bios.ramcfg_11_01_40;\n\t\tvh =  ram->next->bios.ramcfg_11_02_10;\n\t\tvr =  ram->next->bios.ramcfg_11_02_04;\n\t\tvo =  ram->next->bios.ramcfg_11_06;\n\t\tl3 = !ram->next->bios.ramcfg_11_07_02;\n\t\tbreak;\n\tdefault:\n\t\treturn -ENOSYS;\n\t}\n\n\tswitch (ram->next->bios.timing_ver) {\n\tcase 0x20:\n\t\tWL = (ram->next->bios.timing[1] & 0x00000f80) >> 7;\n\t\tCL = (ram->next->bios.timing[1] & 0x0000001f);\n\t\tWR = (ram->next->bios.timing[2] & 0x007f0000) >> 16;\n\t\tat[0] = ram->next->bios.timing_20_2e_c0;\n\t\tat[1] = ram->next->bios.timing_20_2e_30;\n\t\tdt =  ram->next->bios.timing_20_2e_03;\n\t\tds =  ram->next->bios.timing_20_2f_03;\n\t\tbreak;\n\tdefault:\n\t\treturn -ENOSYS;\n\t}\n\n\tif (WL < 1 || WL > 7 || CL < 5 || CL > 36 || WR < 4 || WR > 35)\n\t\treturn -EINVAL;\n\tCL -= 5;\n\tWR -= 4;\n\n\tram->mr[0] &= ~0xf7f;\n\tram->mr[0] |= (WR & 0x0f) << 8;\n\tram->mr[0] |= (CL & 0x0f) << 3;\n\tram->mr[0] |= (WL & 0x07) << 0;\n\n\tram->mr[1] &= ~0x0bf;\n\tram->mr[1] |= (xd & 0x01) << 7;\n\tram->mr[1] |= (at[0] & 0x03) << 4;\n\tram->mr[1] |= (dt & 0x03) << 2;\n\tram->mr[1] |= (ds & 0x03) << 0;\n\n\t \n\tram->mr1_nuts = ram->mr[1];\n\tif (nuts) {\n\t\tram->mr[1] &= ~0x030;\n\t\tram->mr[1] |= (at[1] & 0x03) << 4;\n\t}\n\n\tram->mr[3] &= ~0x020;\n\tram->mr[3] |= (rq & 0x01) << 5;\n\n\tram->mr[5] &= ~0x004;\n\tram->mr[5] |= (l3 << 2);\n\n\tif (!vo)\n\t\tvo = (ram->mr[6] & 0xff0) >> 4;\n\tif (ram->mr[6] & 0x001)\n\t\tpd = 1;  \n\tram->mr[6] &= ~0xff1;\n\tram->mr[6] |= (vo & 0xff) << 4;\n\tram->mr[6] |= (pd & 0x01) << 0;\n\n\tif (NOTE00(vr)) {\n\t\tram->mr[7] &= ~0x300;\n\t\tram->mr[7] |= (vr & 0x03) << 8;\n\t}\n\tram->mr[7] &= ~0x088;\n\tram->mr[7] |= (vh & 0x01) << 7;\n\tram->mr[7] |= (lf & 0x01) << 3;\n\n\tram->mr[8] &= ~0x003;\n\tram->mr[8] |= (WR & 0x10) >> 3;\n\tram->mr[8] |= (CL & 0x10) >> 4;\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}