{
  "module_name": "gp108.c",
  "hash_id": "a15df3662f73d5285e958dd1121f6e562abe40a00d3573dfbd59a6b8e893286d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/acr/gp108.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <subdev/mmu.h>\n\n#include <nvfw/flcn.h>\n\nint\ngp108_acr_hsfw_load_bld(struct nvkm_falcon_fw *fw)\n{\n\tstruct flcn_bl_dmem_desc_v2 hsdesc = {\n\t\t.ctx_dma = FALCON_DMAIDX_VIRT,\n\t\t.code_dma_base = fw->vma->addr,\n\t\t.non_sec_code_off = fw->nmem_base,\n\t\t.non_sec_code_size = fw->nmem_size,\n\t\t.sec_code_off = fw->imem_base,\n\t\t.sec_code_size = fw->imem_size,\n\t\t.code_entry_point = 0,\n\t\t.data_dma_base = fw->vma->addr + fw->dmem_base_img,\n\t\t.data_size = fw->dmem_size,\n\t\t.argc = 0,\n\t\t.argv = 0,\n\t};\n\n\tflcn_bl_dmem_desc_v2_dump(fw->falcon->user, &hsdesc);\n\n\treturn nvkm_falcon_pio_wr(fw->falcon, (u8 *)&hsdesc, 0, 0, DMEM, 0, sizeof(hsdesc), 0, 0);\n}\n\nconst struct nvkm_falcon_fw_func\ngp108_acr_hsfw_0 = {\n\t.signature = gm200_flcn_fw_signature,\n\t.reset = gm200_flcn_fw_reset,\n\t.load = gm200_flcn_fw_load,\n\t.load_bld = gp108_acr_hsfw_load_bld,\n\t.boot = gm200_flcn_fw_boot,\n};\n\nMODULE_FIRMWARE(\"nvidia/gp108/acr/unload_bl.bin\");\nMODULE_FIRMWARE(\"nvidia/gp108/acr/ucode_unload.bin\");\n\nstatic const struct nvkm_acr_hsf_fwif\ngp108_acr_unload_fwif[] = {\n\t{ 0, gm200_acr_hsfw_ctor, &gp108_acr_hsfw_0, NVKM_ACR_HSF_PMU, 0x1d, 0x00000010 },\n\t{}\n};\n\nconst struct nvkm_falcon_fw_func\ngp108_acr_load_0 = {\n\t.signature = gm200_flcn_fw_signature,\n\t.reset = gm200_flcn_fw_reset,\n\t.setup = gp102_acr_load_setup,\n\t.load = gm200_flcn_fw_load,\n\t.load_bld = gp108_acr_hsfw_load_bld,\n\t.boot = gm200_flcn_fw_boot,\n};\n\nMODULE_FIRMWARE(\"nvidia/gp108/acr/bl.bin\");\nMODULE_FIRMWARE(\"nvidia/gp108/acr/ucode_load.bin\");\n\nstatic const struct nvkm_acr_hsf_fwif\ngp108_acr_load_fwif[] = {\n\t{ 0, gm200_acr_hsfw_ctor, &gp108_acr_load_0, NVKM_ACR_HSF_SEC2, 0, 0x00000010 },\n\t{}\n};\n\nstatic const struct nvkm_acr_func\ngp108_acr = {\n\t.load = gp108_acr_load_fwif,\n\t.unload = gp108_acr_unload_fwif,\n\t.wpr_parse = gp102_acr_wpr_parse,\n\t.wpr_layout = gp102_acr_wpr_layout,\n\t.wpr_alloc = gp102_acr_wpr_alloc,\n\t.wpr_build = gp102_acr_wpr_build,\n\t.wpr_patch = gp102_acr_wpr_patch,\n\t.wpr_check = gm200_acr_wpr_check,\n\t.init = gm200_acr_init,\n};\n\nstatic const struct nvkm_acr_fwif\ngp108_acr_fwif[] = {\n\t{  0, gp102_acr_load, &gp108_acr },\n\t{ -1, gm200_acr_nofw, &gm200_acr },\n\t{}\n};\n\nint\ngp108_acr_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t      struct nvkm_acr **pacr)\n{\n\treturn nvkm_acr_new_(gp108_acr_fwif, device, type, inst, pacr);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}