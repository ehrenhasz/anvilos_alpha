{
  "module_name": "gf119.c",
  "hash_id": "b8012c966c32d3fe1001f9fbc808d9b14fa6c8d1a60d6e7cbcb2c3c20bb99cf1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/gpio/gf119.c",
  "human_readable_source": " \n#include \"priv.h\"\n\nvoid\ngf119_gpio_reset(struct nvkm_gpio *gpio, u8 match)\n{\n\tstruct nvkm_device *device = gpio->subdev.device;\n\tstruct nvkm_bios *bios = device->bios;\n\tu8 ver, len;\n\tu16 entry;\n\tint ent = -1;\n\n\twhile ((entry = dcb_gpio_entry(bios, 0, ++ent, &ver, &len))) {\n\t\tu32 data = nvbios_rd32(bios, entry);\n\t\tu8  line =   (data & 0x0000003f);\n\t\tu8  defs = !!(data & 0x00000080);\n\t\tu8  func =   (data & 0x0000ff00) >> 8;\n\t\tu8  unk0 =   (data & 0x00ff0000) >> 16;\n\t\tu8  unk1 =   (data & 0x1f000000) >> 24;\n\n\t\tif ( func  == DCB_GPIO_UNUSED ||\n\t\t    (match != DCB_GPIO_UNUSED && match != func))\n\t\t\tcontinue;\n\n\t\tnvkm_gpio_set(gpio, 0, func, line, defs);\n\n\t\tnvkm_mask(device, 0x00d610 + (line * 4), 0xff, unk0);\n\t\tif (unk1--)\n\t\t\tnvkm_mask(device, 0x00d740 + (unk1 * 4), 0xff, line);\n\t}\n}\n\nint\ngf119_gpio_drive(struct nvkm_gpio *gpio, int line, int dir, int out)\n{\n\tstruct nvkm_device *device = gpio->subdev.device;\n\tu32 data = ((dir ^ 1) << 13) | (out << 12);\n\tnvkm_mask(device, 0x00d610 + (line * 4), 0x00003000, data);\n\tnvkm_mask(device, 0x00d604, 0x00000001, 0x00000001);  \n\treturn 0;\n}\n\nint\ngf119_gpio_sense(struct nvkm_gpio *gpio, int line)\n{\n\tstruct nvkm_device *device = gpio->subdev.device;\n\treturn !!(nvkm_rd32(device, 0x00d610 + (line * 4)) & 0x00004000);\n}\n\nstatic const struct nvkm_gpio_func\ngf119_gpio = {\n\t.lines = 32,\n\t.intr_stat = g94_gpio_intr_stat,\n\t.intr_mask = g94_gpio_intr_mask,\n\t.drive = gf119_gpio_drive,\n\t.sense = gf119_gpio_sense,\n\t.reset = gf119_gpio_reset,\n};\n\nint\ngf119_gpio_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t       struct nvkm_gpio **pgpio)\n{\n\treturn nvkm_gpio_new_(&gf119_gpio, device, type, inst, pgpio);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}