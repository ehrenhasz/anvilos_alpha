{
  "module_name": "base.c",
  "hash_id": "25339fd5ab31dfe71d75ae152dd7eb9bd38996b7fa38eefee04d031fff4a9362",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/devinit/base.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <core/option.h>\n#include <subdev/vga.h>\n\nu32\nnvkm_devinit_mmio(struct nvkm_devinit *init, u32 addr)\n{\n\tif (init->func->mmio)\n\t\taddr = init->func->mmio(init, addr);\n\treturn addr;\n}\n\nint\nnvkm_devinit_pll_set(struct nvkm_devinit *init, u32 type, u32 khz)\n{\n\treturn init->func->pll_set(init, type, khz);\n}\n\nvoid\nnvkm_devinit_meminit(struct nvkm_devinit *init)\n{\n\tif (init->func->meminit)\n\t\tinit->func->meminit(init);\n}\n\nu64\nnvkm_devinit_disable(struct nvkm_devinit *init)\n{\n\tif (init && init->func->disable)\n\t\tinit->func->disable(init);\n\n\treturn 0;\n}\n\nint\nnvkm_devinit_post(struct nvkm_devinit *init)\n{\n\tint ret = 0;\n\tif (init && init->func->post)\n\t\tret = init->func->post(init, init->post);\n\tnvkm_devinit_disable(init);\n\treturn ret;\n}\n\nstatic int\nnvkm_devinit_fini(struct nvkm_subdev *subdev, bool suspend)\n{\n\tstruct nvkm_devinit *init = nvkm_devinit(subdev);\n\t \n\tif (suspend)\n\t\tinit->post = true;\n\treturn 0;\n}\n\nstatic int\nnvkm_devinit_preinit(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_devinit *init = nvkm_devinit(subdev);\n\n\tif (init->func->preinit)\n\t\tinit->func->preinit(init);\n\n\t \n\tif (init->force_post) {\n\t\tinit->post = init->force_post;\n\t\tinit->force_post = false;\n\t}\n\n\t \n\tnvkm_lockvgac(subdev->device, false);\n\treturn 0;\n}\n\nstatic int\nnvkm_devinit_init(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_devinit *init = nvkm_devinit(subdev);\n\tif (init->func->init)\n\t\tinit->func->init(init);\n\treturn 0;\n}\n\nstatic void *\nnvkm_devinit_dtor(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_devinit *init = nvkm_devinit(subdev);\n\tvoid *data = init;\n\n\tif (init->func->dtor)\n\t\tdata = init->func->dtor(init);\n\n\t \n\tnvkm_lockvgac(subdev->device, true);\n\treturn data;\n}\n\nstatic const struct nvkm_subdev_func\nnvkm_devinit = {\n\t.dtor = nvkm_devinit_dtor,\n\t.preinit = nvkm_devinit_preinit,\n\t.init = nvkm_devinit_init,\n\t.fini = nvkm_devinit_fini,\n};\n\nvoid\nnvkm_devinit_ctor(const struct nvkm_devinit_func *func, struct nvkm_device *device,\n\t\t  enum nvkm_subdev_type type, int inst, struct nvkm_devinit *init)\n{\n\tnvkm_subdev_ctor(&nvkm_devinit, device, type, inst, &init->subdev);\n\tinit->func = func;\n\tinit->force_post = nvkm_boolopt(device->cfgopt, \"NvForcePost\", false);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}