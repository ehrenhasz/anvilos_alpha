{
  "module_name": "base.c",
  "hash_id": "3eca972a5a493fe0a4acf58638c1814f61e91e6a8d2994763934317d5293158f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bar/base.c",
  "human_readable_source": " \n#include \"priv.h\"\n\nvoid\nnvkm_bar_flush(struct nvkm_bar *bar)\n{\n\tif (bar && bar->func->flush)\n\t\tbar->func->flush(bar);\n}\n\nstruct nvkm_vmm *\nnvkm_bar_bar1_vmm(struct nvkm_device *device)\n{\n\treturn device->bar->func->bar1.vmm(device->bar);\n}\n\nvoid\nnvkm_bar_bar1_reset(struct nvkm_device *device)\n{\n\tstruct nvkm_bar *bar = device->bar;\n\tif (bar) {\n\t\tbar->func->bar1.init(bar);\n\t\tbar->func->bar1.wait(bar);\n\t}\n}\n\nstruct nvkm_vmm *\nnvkm_bar_bar2_vmm(struct nvkm_device *device)\n{\n\t \n\tstruct nvkm_bar *bar = device->bar;\n\tif (bar && bar->bar2)\n\t\treturn bar->func->bar2.vmm(bar);\n\treturn NULL;\n}\n\nvoid\nnvkm_bar_bar2_reset(struct nvkm_device *device)\n{\n\tstruct nvkm_bar *bar = device->bar;\n\tif (bar && bar->bar2) {\n\t\tbar->func->bar2.init(bar);\n\t\tbar->func->bar2.wait(bar);\n\t}\n}\n\nvoid\nnvkm_bar_bar2_fini(struct nvkm_device *device)\n{\n\tstruct nvkm_bar *bar = device->bar;\n\tif (bar && bar->bar2) {\n\t\tbar->func->bar2.fini(bar);\n\t\tbar->bar2 = false;\n\t}\n}\n\nvoid\nnvkm_bar_bar2_init(struct nvkm_device *device)\n{\n\tstruct nvkm_bar *bar = device->bar;\n\tif (bar && bar->subdev.oneinit && !bar->bar2 && bar->func->bar2.init) {\n\t\tbar->func->bar2.init(bar);\n\t\tbar->func->bar2.wait(bar);\n\t\tbar->bar2 = true;\n\t}\n}\n\nstatic int\nnvkm_bar_fini(struct nvkm_subdev *subdev, bool suspend)\n{\n\tstruct nvkm_bar *bar = nvkm_bar(subdev);\n\tif (bar->func->bar1.fini)\n\t\tbar->func->bar1.fini(bar);\n\treturn 0;\n}\n\nstatic int\nnvkm_bar_init(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_bar *bar = nvkm_bar(subdev);\n\tbar->func->bar1.init(bar);\n\tbar->func->bar1.wait(bar);\n\tif (bar->func->init)\n\t\tbar->func->init(bar);\n\treturn 0;\n}\n\nstatic int\nnvkm_bar_oneinit(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_bar *bar = nvkm_bar(subdev);\n\treturn bar->func->oneinit(bar);\n}\n\nstatic void *\nnvkm_bar_dtor(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_bar *bar = nvkm_bar(subdev);\n\tnvkm_bar_bar2_fini(subdev->device);\n\treturn bar->func->dtor(bar);\n}\n\nstatic const struct nvkm_subdev_func\nnvkm_bar = {\n\t.dtor = nvkm_bar_dtor,\n\t.oneinit = nvkm_bar_oneinit,\n\t.init = nvkm_bar_init,\n\t.fini = nvkm_bar_fini,\n};\n\nvoid\nnvkm_bar_ctor(const struct nvkm_bar_func *func, struct nvkm_device *device,\n\t      enum nvkm_subdev_type type, int inst, struct nvkm_bar *bar)\n{\n\tnvkm_subdev_ctor(&nvkm_bar, device, type, inst, &bar->subdev);\n\tbar->func = func;\n\tspin_lock_init(&bar->lock);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}