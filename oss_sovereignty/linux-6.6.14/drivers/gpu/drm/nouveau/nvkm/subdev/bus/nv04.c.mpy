{
  "module_name": "nv04.c",
  "hash_id": "a055636e762857878727199fab19bca06a638aa3f13c592695aa986e0c11d2fe",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bus/nv04.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <subdev/gpio.h>\n\nstatic void\nnv04_bus_intr(struct nvkm_bus *bus)\n{\n\tstruct nvkm_subdev *subdev = &bus->subdev;\n\tstruct nvkm_device *device = subdev->device;\n\tu32 stat = nvkm_rd32(device, 0x001100) & nvkm_rd32(device, 0x001140);\n\n\tif (stat & 0x00000001) {\n\t\tnvkm_error(subdev, \"BUS ERROR\\n\");\n\t\tstat &= ~0x00000001;\n\t\tnvkm_wr32(device, 0x001100, 0x00000001);\n\t}\n\n\tif (stat & 0x00000110) {\n\t\tstruct nvkm_gpio *gpio = device->gpio;\n\t\tif (gpio)\n\t\t\tnvkm_subdev_intr(&gpio->subdev);\n\t\tstat &= ~0x00000110;\n\t\tnvkm_wr32(device, 0x001100, 0x00000110);\n\t}\n\n\tif (stat) {\n\t\tnvkm_error(subdev, \"intr %08x\\n\", stat);\n\t\tnvkm_mask(device, 0x001140, stat, 0x00000000);\n\t}\n}\n\nstatic void\nnv04_bus_init(struct nvkm_bus *bus)\n{\n\tstruct nvkm_device *device = bus->subdev.device;\n\tnvkm_wr32(device, 0x001100, 0xffffffff);\n\tnvkm_wr32(device, 0x001140, 0x00000111);\n}\n\nstatic const struct nvkm_bus_func\nnv04_bus = {\n\t.init = nv04_bus_init,\n\t.intr = nv04_bus_intr,\n};\n\nint\nnv04_bus_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t     struct nvkm_bus **pbus)\n{\n\treturn nvkm_bus_new_(&nv04_bus, device, type, inst, pbus);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}