{
  "module_name": "nv04.c",
  "hash_id": "7c85615bb3bde5f7d7007d93cd059ed1cd136ff2ad5bbe1a04835ae3b6631c41",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/clk/nv04.c",
  "human_readable_source": " \n#include \"priv.h\"\n#include \"pll.h\"\n\n#include <subdev/bios.h>\n#include <subdev/bios/pll.h>\n#include <subdev/devinit/nv04.h>\n\nint\nnv04_clk_pll_calc(struct nvkm_clk *clock, struct nvbios_pll *info,\n\t\t  int clk, struct nvkm_pll_vals *pv)\n{\n\tint N1, M1, N2, M2, P;\n\tint ret = nv04_pll_calc(&clock->subdev, info, clk, &N1, &M1, &N2, &M2, &P);\n\tif (ret) {\n\t\tpv->refclk = info->refclk;\n\t\tpv->N1 = N1;\n\t\tpv->M1 = M1;\n\t\tpv->N2 = N2;\n\t\tpv->M2 = M2;\n\t\tpv->log2P = P;\n\t}\n\treturn ret;\n}\n\nint\nnv04_clk_pll_prog(struct nvkm_clk *clk, u32 reg1, struct nvkm_pll_vals *pv)\n{\n\tstruct nvkm_device *device = clk->subdev.device;\n\tstruct nvkm_devinit *devinit = device->devinit;\n\tint cv = device->bios->version.chip;\n\n\tif (cv == 0x30 || cv == 0x31 || cv == 0x35 || cv == 0x36 ||\n\t    cv >= 0x40) {\n\t\tif (reg1 > 0x405c)\n\t\t\tsetPLL_double_highregs(devinit, reg1, pv);\n\t\telse\n\t\t\tsetPLL_double_lowregs(devinit, reg1, pv);\n\t} else\n\t\tsetPLL_single(devinit, reg1, pv);\n\n\treturn 0;\n}\n\nstatic const struct nvkm_clk_func\nnv04_clk = {\n\t.domains = {\n\t\t{ nv_clk_src_max }\n\t}\n};\n\nint\nnv04_clk_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t     struct nvkm_clk **pclk)\n{\n\tint ret = nvkm_clk_new_(&nv04_clk, device, type, inst, false, pclk);\n\tif (ret == 0) {\n\t\t(*pclk)->pll_calc = nv04_clk_pll_calc;\n\t\t(*pclk)->pll_prog = nv04_clk_pll_prog;\n\t}\n\treturn ret;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}