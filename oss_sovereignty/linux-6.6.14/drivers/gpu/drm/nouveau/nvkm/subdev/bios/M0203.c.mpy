{
  "module_name": "M0203.c",
  "hash_id": "99bf75fcf6ced70f1591950a523fe8d3f16ca66f2ebf69d919d4f0bfded8cbc1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bios/M0203.c",
  "human_readable_source": " \n#include <subdev/bios.h>\n#include <subdev/bios/bit.h>\n#include <subdev/bios/M0203.h>\n\nu32\nnvbios_M0203Te(struct nvkm_bios *bios, u8 *ver, u8 *hdr, u8 *cnt, u8 *len)\n{\n\tstruct bit_entry bit_M;\n\tu32 data = 0x00000000;\n\n\tif (!bit_entry(bios, 'M', &bit_M)) {\n\t\tif (bit_M.version == 2 && bit_M.length > 0x04)\n\t\t\tdata = nvbios_rd16(bios, bit_M.offset + 0x03);\n\t\tif (data) {\n\t\t\t*ver = nvbios_rd08(bios, data + 0x00);\n\t\t\tswitch (*ver) {\n\t\t\tcase 0x10:\n\t\t\t\t*hdr = nvbios_rd08(bios, data + 0x01);\n\t\t\t\t*len = nvbios_rd08(bios, data + 0x02);\n\t\t\t\t*cnt = nvbios_rd08(bios, data + 0x03);\n\t\t\t\treturn data;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0x00000000;\n}\n\nu32\nnvbios_M0203Tp(struct nvkm_bios *bios, u8 *ver, u8 *hdr, u8 *cnt, u8 *len,\n\t       struct nvbios_M0203T *info)\n{\n\tu32 data = nvbios_M0203Te(bios, ver, hdr, cnt, len);\n\tmemset(info, 0x00, sizeof(*info));\n\tswitch (!!data * *ver) {\n\tcase 0x10:\n\t\tinfo->type    = nvbios_rd08(bios, data + 0x04);\n\t\tinfo->pointer = nvbios_rd16(bios, data + 0x05);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn data;\n}\n\nu32\nnvbios_M0203Ee(struct nvkm_bios *bios, int idx, u8 *ver, u8 *hdr)\n{\n\tu8  cnt, len;\n\tu32 data = nvbios_M0203Te(bios, ver, hdr, &cnt, &len);\n\tif (data && idx < cnt) {\n\t\tdata = data + *hdr + idx * len;\n\t\t*hdr = len;\n\t\treturn data;\n\t}\n\treturn 0x00000000;\n}\n\nu32\nnvbios_M0203Ep(struct nvkm_bios *bios, int idx, u8 *ver, u8 *hdr,\n\t       struct nvbios_M0203E *info)\n{\n\tu32 data = nvbios_M0203Ee(bios, idx, ver, hdr);\n\tmemset(info, 0x00, sizeof(*info));\n\tswitch (!!data * *ver) {\n\tcase 0x10:\n\t\tinfo->type  = (nvbios_rd08(bios, data + 0x00) & 0x0f) >> 0;\n\t\tinfo->strap = (nvbios_rd08(bios, data + 0x00) & 0xf0) >> 4;\n\t\tinfo->group = (nvbios_rd08(bios, data + 0x01) & 0x0f) >> 0;\n\t\treturn data;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn 0x00000000;\n}\n\nu32\nnvbios_M0203Em(struct nvkm_bios *bios, u8 ramcfg, u8 *ver, u8 *hdr,\n\t       struct nvbios_M0203E *info)\n{\n\tstruct nvkm_subdev *subdev = &bios->subdev;\n\tstruct nvbios_M0203T M0203T;\n\tu8  cnt, len, idx = 0xff;\n\tu32 data;\n\n\tif (!nvbios_M0203Tp(bios, ver, hdr, &cnt, &len, &M0203T)) {\n\t\tnvkm_warn(subdev, \"M0203T not found\\n\");\n\t\treturn 0x00000000;\n\t}\n\n\twhile ((data = nvbios_M0203Ep(bios, ++idx, ver, hdr, info))) {\n\t\tswitch (M0203T.type) {\n\t\tcase M0203T_TYPE_RAMCFG:\n\t\t\tif (info->strap != ramcfg)\n\t\t\t\tcontinue;\n\t\t\treturn data;\n\t\tdefault:\n\t\t\tnvkm_warn(subdev, \"M0203T type %02x\\n\", M0203T.type);\n\t\t\treturn 0x00000000;\n\t\t}\n\t}\n\n\treturn data;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}