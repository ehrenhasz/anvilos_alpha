{
  "module_name": "gp100.c",
  "hash_id": "1f439c0c3482bee0491086a5c0759fec4486a481fc9493c7e32284c331e7e7d9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <core/memory.h>\n#include <subdev/mc.h>\n\n#include <nvif/class.h>\n\nvoid\ngp100_fault_buffer_intr(struct nvkm_fault_buffer *buffer, bool enable)\n{\n\tstruct nvkm_device *device = buffer->fault->subdev.device;\n\tnvkm_mc_intr_mask(device, NVKM_SUBDEV_FAULT, 0, enable);\n}\n\nvoid\ngp100_fault_buffer_fini(struct nvkm_fault_buffer *buffer)\n{\n\tstruct nvkm_device *device = buffer->fault->subdev.device;\n\tnvkm_mask(device, 0x002a70, 0x00000001, 0x00000000);\n}\n\nvoid\ngp100_fault_buffer_init(struct nvkm_fault_buffer *buffer)\n{\n\tstruct nvkm_device *device = buffer->fault->subdev.device;\n\tnvkm_wr32(device, 0x002a74, upper_32_bits(buffer->addr));\n\tnvkm_wr32(device, 0x002a70, lower_32_bits(buffer->addr));\n\tnvkm_mask(device, 0x002a70, 0x00000001, 0x00000001);\n}\n\nu64 gp100_fault_buffer_pin(struct nvkm_fault_buffer *buffer)\n{\n\treturn nvkm_memory_bar2(buffer->mem);\n}\n\nvoid\ngp100_fault_buffer_info(struct nvkm_fault_buffer *buffer)\n{\n\tbuffer->entries = nvkm_rd32(buffer->fault->subdev.device, 0x002a78);\n\tbuffer->get = 0x002a7c;\n\tbuffer->put = 0x002a80;\n}\n\nvoid\ngp100_fault_intr(struct nvkm_fault *fault)\n{\n\tnvkm_event_ntfy(&fault->event, 0, NVKM_FAULT_BUFFER_EVENT_PENDING);\n}\n\nstatic const struct nvkm_fault_func\ngp100_fault = {\n\t.intr = gp100_fault_intr,\n\t.buffer.nr = 1,\n\t.buffer.entry_size = 32,\n\t.buffer.info = gp100_fault_buffer_info,\n\t.buffer.pin = gp100_fault_buffer_pin,\n\t.buffer.init = gp100_fault_buffer_init,\n\t.buffer.fini = gp100_fault_buffer_fini,\n\t.buffer.intr = gp100_fault_buffer_intr,\n\t.user = { { 0, 0, MAXWELL_FAULT_BUFFER_A }, 0 },\n};\n\nint\ngp100_fault_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t\tstruct nvkm_fault **pfault)\n{\n\treturn nvkm_fault_new_(&gp100_fault, device, type, inst, pfault);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}