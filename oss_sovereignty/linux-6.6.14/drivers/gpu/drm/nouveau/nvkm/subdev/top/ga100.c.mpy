{
  "module_name": "ga100.c",
  "hash_id": "ade0b1d8100f909d4e8bee3e1bb370a13917c93f87b88a77efb20308fdc778d5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/top/ga100.c",
  "human_readable_source": " \n#include \"priv.h\"\n\nstatic int\nga100_top_parse(struct nvkm_top *top)\n{\n\tstruct nvkm_subdev *subdev = &top->subdev;\n\tstruct nvkm_device *device = subdev->device;\n\tstruct nvkm_top_device *info = NULL;\n\tu32 data, type, inst;\n\tint i, n, size = nvkm_rd32(device, 0x0224fc) >> 20;\n\n\tfor (i = 0, n = 0; i < size; i++) {\n\t\tif (!info) {\n\t\t\tif (!(info = nvkm_top_device_new(top)))\n\t\t\t\treturn -ENOMEM;\n\t\t\ttype = ~0;\n\t\t\tinst = 0;\n\t\t}\n\n\t\tdata = nvkm_rd32(device, 0x022800 + (i * 0x04));\n\t\tnvkm_trace(subdev, \"%02x: %08x\\n\", i, data);\n\t\tif (!data && n == 0)\n\t\t\tcontinue;\n\n\t\tswitch (n++) {\n\t\tcase 0:\n\t\t\ttype\t      = (data & 0x3f000000) >> 24;\n\t\t\tinst\t      = (data & 0x000f0000) >> 16;\n\t\t\tinfo->fault   = (data & 0x0000007f);\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tinfo->addr    = (data & 0x00fff000);\n\t\t\tinfo->reset   = (data & 0x0000001f);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tinfo->runlist = (data & 0x00fffc00);\n\t\t\tinfo->engine  = (data & 0x00000003);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\n\t\tif (data & 0x80000000)\n\t\t\tcontinue;\n\t\tn = 0;\n\n\t\t \n#define I_(T,I) do { info->type = (T); info->inst = (I); } while(0)\n#define O_(T,I) do { WARN_ON(inst); I_(T, I); } while (0)\n\t\tswitch (type) {\n\t\tcase 0x00000000: O_(NVKM_ENGINE_GR    ,    0); break;\n\t\tcase 0x0000000d: O_(NVKM_ENGINE_SEC2  ,    0); break;\n\t\tcase 0x0000000e: I_(NVKM_ENGINE_NVENC , inst); break;\n\t\tcase 0x00000010: I_(NVKM_ENGINE_NVDEC , inst); break;\n\t\tcase 0x00000012: I_(NVKM_SUBDEV_IOCTRL, inst); break;\n\t\tcase 0x00000013: I_(NVKM_ENGINE_CE    , inst); break;\n\t\tcase 0x00000014: O_(NVKM_SUBDEV_GSP   ,    0); break;\n\t\tcase 0x00000015: O_(NVKM_ENGINE_NVJPG ,    0); break;\n\t\tcase 0x00000016: O_(NVKM_ENGINE_OFA   ,    0); break;\n\t\tcase 0x00000017: O_(NVKM_SUBDEV_FLA   ,    0); break;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\n\t\tnvkm_debug(subdev, \"%02x.%d (%8s): addr %06x fault %2d \"\n\t\t\t\t   \"runlist %6x engine %2d reset %2d\\n\", type, inst,\n\t\t\t   info->type == NVKM_SUBDEV_NR ? \"????????\" : nvkm_subdev_type[info->type],\n\t\t\t   info->addr, info->fault, info->runlist < 0 ? 0 : info->runlist,\n\t\t\t   info->engine, info->reset);\n\t\tinfo = NULL;\n\t}\n\n\treturn 0;\n}\n\nstatic const struct nvkm_top_func\nga100_top = {\n\t.parse = ga100_top_parse,\n};\n\nint\nga100_top_new(struct nvkm_device *device, enum nvkm_subdev_type type, int inst,\n\t      struct nvkm_top **ptop)\n{\n\treturn nvkm_top_new_(&ga100_top, device, type, inst, ptop);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}