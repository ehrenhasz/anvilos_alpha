{
  "module_name": "ramcfg.c",
  "hash_id": "d9b37426319b460e3a022acfb7757bbe88f23b223a7c9e7061225e17fbbed7b6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/subdev/bios/ramcfg.c",
  "human_readable_source": " \n#include <subdev/bios.h>\n#include <subdev/bios/bit.h>\n#include <subdev/bios/ramcfg.h>\n#include <subdev/bios/M0203.h>\n\nstatic u8\nnvbios_ramcfg_strap(struct nvkm_subdev *subdev)\n{\n\treturn (nvkm_rd32(subdev->device, 0x101000) & 0x0000003c) >> 2;\n}\n\nu8\nnvbios_ramcfg_count(struct nvkm_bios *bios)\n{\n\tstruct bit_entry bit_M;\n\n\tif (!bit_entry(bios, 'M', &bit_M)) {\n\t\tif (bit_M.version == 1 && bit_M.length >= 5)\n\t\t\treturn nvbios_rd08(bios, bit_M.offset + 2);\n\t\tif (bit_M.version == 2 && bit_M.length >= 3)\n\t\t\treturn nvbios_rd08(bios, bit_M.offset + 0);\n\t}\n\n\treturn 0x00;\n}\n\nu8\nnvbios_ramcfg_index(struct nvkm_subdev *subdev)\n{\n\tstruct nvkm_bios *bios = subdev->device->bios;\n\tu8 strap = nvbios_ramcfg_strap(subdev);\n\tu32 xlat = 0x00000000;\n\tstruct bit_entry bit_M;\n\tstruct nvbios_M0203E M0203E;\n\tu8 ver, hdr;\n\n\tif (!bit_entry(bios, 'M', &bit_M)) {\n\t\tif (bit_M.version == 1 && bit_M.length >= 5)\n\t\t\txlat = nvbios_rd16(bios, bit_M.offset + 3);\n\t\tif (bit_M.version == 2 && bit_M.length >= 3) {\n\t\t\t \n\t\t\tif (bit_M.length >= 7 &&\n\t\t\t    nvbios_M0203Em(bios, strap, &ver, &hdr, &M0203E))\n\t\t\t\treturn M0203E.group;\n\t\t\txlat = nvbios_rd16(bios, bit_M.offset + 1);\n\t\t}\n\t}\n\n\tif (xlat)\n\t\tstrap = nvbios_rd08(bios, xlat + strap);\n\treturn strap;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}