{
  "module_name": "v1.c",
  "hash_id": "dd7215ee351b99b7312924a1b0d30e9820b7b5a755e04b76de74639b5eb17d7a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nvkm/falcon/v1.c",
  "human_readable_source": " \n#include \"priv.h\"\n\n#include <core/gpuobj.h>\n#include <core/memory.h>\n#include <subdev/timer.h>\n\nvoid\nnvkm_falcon_v1_load_imem(struct nvkm_falcon *falcon, void *data, u32 start,\n\t\t\t u32 size, u16 tag, u8 port, bool secure)\n{\n\tu8 rem = size % 4;\n\tu32 reg;\n\tint i;\n\n\tsize -= rem;\n\n\treg = start | BIT(24) | (secure ? BIT(28) : 0);\n\tnvkm_falcon_wr32(falcon, 0x180 + (port * 16), reg);\n\tfor (i = 0; i < size / 4; i++) {\n\t\t \n\t\tif ((i & 0x3f) == 0)\n\t\t\tnvkm_falcon_wr32(falcon, 0x188 + (port * 16), tag++);\n\t\tnvkm_falcon_wr32(falcon, 0x184 + (port * 16), ((u32 *)data)[i]);\n\t}\n\n\t \n\tif (rem) {\n\t\tu32 extra = ((u32 *)data)[i];\n\n\t\t \n\t\tif ((i & 0x3f) == 0)\n\t\t\tnvkm_falcon_wr32(falcon, 0x188 + (port * 16), tag++);\n\t\tnvkm_falcon_wr32(falcon, 0x184 + (port * 16),\n\t\t\t\t extra & (BIT(rem * 8) - 1));\n\t\t++i;\n\t}\n\n\t \n\tfor (; i & 0x3f; i++)\n\t\tnvkm_falcon_wr32(falcon, 0x184 + (port * 16), 0);\n}\n\nvoid\nnvkm_falcon_v1_load_dmem(struct nvkm_falcon *falcon, void *data, u32 start,\n\t\t\t u32 size, u8 port)\n{\n\tu8 rem = size % 4;\n\tint i;\n\n\tsize -= rem;\n\n\tnvkm_falcon_wr32(falcon, 0x1c0 + (port * 8), start | (0x1 << 24));\n\tfor (i = 0; i < size / 4; i++)\n\t\tnvkm_falcon_wr32(falcon, 0x1c4 + (port * 8), ((u32 *)data)[i]);\n\n\t \n\tif (rem) {\n\t\tu32 extra = ((u32 *)data)[i];\n\n\t\tnvkm_falcon_wr32(falcon, 0x1c4 + (port * 8),\n\t\t\t\t extra & (BIT(rem * 8) - 1));\n\t}\n}\n\nvoid\nnvkm_falcon_v1_start(struct nvkm_falcon *falcon)\n{\n\tu32 reg = nvkm_falcon_rd32(falcon, 0x100);\n\n\tif (reg & BIT(6))\n\t\tnvkm_falcon_wr32(falcon, 0x130, 0x2);\n\telse\n\t\tnvkm_falcon_wr32(falcon, 0x100, 0x2);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}