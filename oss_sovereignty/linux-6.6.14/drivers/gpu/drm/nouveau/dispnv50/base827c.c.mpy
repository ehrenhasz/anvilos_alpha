{
  "module_name": "base827c.c",
  "hash_id": "9f0dba46e018f1d8b99f02f516136f48c542a7462ed7a6a3343d6b54df492fac",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/base827c.c",
  "human_readable_source": " \n#include \"base.h\"\n\n#include <nvif/push507c.h>\n\n#include <nvhw/class/cl827c.h>\n\nstatic int\nbase827c_image_set(struct nv50_wndw *wndw, struct nv50_wndw_atom *asyw)\n{\n\tstruct nvif_push *push = wndw->wndw.push;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 13)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827C, SET_PRESENT_CONTROL,\n\t\t  NVVAL(NV827C, SET_PRESENT_CONTROL, BEGIN_MODE, asyw->image.mode) |\n\t\t  NVVAL(NV827C, SET_PRESENT_CONTROL, MIN_PRESENT_INTERVAL, asyw->image.interval));\n\n\tPUSH_MTHD(push, NV827C, SET_CONTEXT_DMAS_ISO(0), asyw->image.handle, 1);\n\n\tif (asyw->image.format == NV827C_SURFACE_SET_PARAMS_FORMAT_RF16_GF16_BF16_AF16) {\n\t\tPUSH_MTHD(push, NV827C, SET_PROCESSING,\n\t\t\t  NVDEF(NV827C, SET_PROCESSING, USE_GAIN_OFS, ENABLE),\n\n\t\t\t\t\tSET_CONVERSION,\n\t\t\t  NVVAL(NV827C, SET_CONVERSION, GAIN, 0) |\n\t\t\t  NVVAL(NV827C, SET_CONVERSION, OFS, 0x64));\n\t} else {\n\t\tPUSH_MTHD(push, NV827C, SET_PROCESSING,\n\t\t\t  NVDEF(NV827C, SET_PROCESSING, USE_GAIN_OFS, DISABLE),\n\n\t\t\t\t\tSET_CONVERSION,\n\t\t\t  NVVAL(NV827C, SET_CONVERSION, GAIN, 0) |\n\t\t\t  NVVAL(NV827C, SET_CONVERSION, OFS, 0));\n\t}\n\n\tPUSH_MTHD(push, NV827C, SURFACE_SET_OFFSET(0, 0), asyw->image.offset[0] >> 8,\n\t\t\t\tSURFACE_SET_OFFSET(0, 1), 0x00000000,\n\n\t\t\t\tSURFACE_SET_SIZE(0),\n\t\t  NVVAL(NV827C, SURFACE_SET_SIZE, WIDTH, asyw->image.w) |\n\t\t  NVVAL(NV827C, SURFACE_SET_SIZE, HEIGHT, asyw->image.h),\n\n\t\t\t\tSURFACE_SET_STORAGE(0),\n\t\t  NVVAL(NV827C, SURFACE_SET_STORAGE, BLOCK_HEIGHT, asyw->image.blockh) |\n\t\t  NVVAL(NV827C, SURFACE_SET_STORAGE, PITCH, asyw->image.pitch[0] >> 8) |\n\t\t  NVVAL(NV827C, SURFACE_SET_STORAGE, PITCH, asyw->image.blocks[0]) |\n\t\t  NVVAL(NV827C, SURFACE_SET_STORAGE, MEMORY_LAYOUT, asyw->image.layout),\n\n\t\t\t\tSURFACE_SET_PARAMS(0),\n\t\t  NVVAL(NV827C, SURFACE_SET_PARAMS, FORMAT, asyw->image.format) |\n\t\t  NVDEF(NV827C, SURFACE_SET_PARAMS, SUPER_SAMPLE, X1_AA) |\n\t\t  NVDEF(NV827C, SURFACE_SET_PARAMS, GAMMA, LINEAR) |\n\t\t  NVDEF(NV827C, SURFACE_SET_PARAMS, LAYOUT, FRM));\n\treturn 0;\n}\n\nstatic const struct nv50_wndw_func\nbase827c = {\n\t.acquire = base507c_acquire,\n\t.release = base507c_release,\n\t.sema_set = base507c_sema_set,\n\t.sema_clr = base507c_sema_clr,\n\t.ntfy_reset = base507c_ntfy_reset,\n\t.ntfy_set = base507c_ntfy_set,\n\t.ntfy_clr = base507c_ntfy_clr,\n\t.ntfy_wait_begun = base507c_ntfy_wait_begun,\n\t.olut_core = 1,\n\t.xlut_set = base507c_xlut_set,\n\t.xlut_clr = base507c_xlut_clr,\n\t.image_set = base827c_image_set,\n\t.image_clr = base507c_image_clr,\n\t.update = base507c_update,\n};\n\nint\nbase827c_new(struct nouveau_drm *drm, int head, s32 oclass,\n\t     struct nv50_wndw **pwndw)\n{\n\treturn base507c_new_(&base827c, base507c_format, drm, head, oclass,\n\t\t\t     0x00000002 << (head * 8), pwndw);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}