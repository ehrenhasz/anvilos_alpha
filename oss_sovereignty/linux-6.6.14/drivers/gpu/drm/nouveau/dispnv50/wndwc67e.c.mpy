{
  "module_name": "wndwc67e.c",
  "hash_id": "23a294fa880cab41d225cd2ed88b3a542ffc33efb5e5558216bdc673ae739b3b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/wndwc67e.c",
  "human_readable_source": " \n#include \"wndw.h\"\n#include \"atom.h\"\n\n#include <nvif/pushc37b.h>\n\n#include <nvhw/class/clc57e.h>\n\nstatic int\nwndwc67e_image_set(struct nv50_wndw *wndw, struct nv50_wndw_atom *asyw)\n{\n\tstruct nvif_push *push = wndw->wndw.push;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 17)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NVC57E, SET_PRESENT_CONTROL,\n\t\t  NVVAL(NVC57E, SET_PRESENT_CONTROL, MIN_PRESENT_INTERVAL, asyw->image.interval) |\n\t\t  NVVAL(NVC57E, SET_PRESENT_CONTROL, BEGIN_MODE, asyw->image.mode) |\n\t\t  NVDEF(NVC57E, SET_PRESENT_CONTROL, TIMESTAMP_MODE, DISABLE));\n\n\tPUSH_MTHD(push, NVC57E, SET_SIZE,\n\t\t  NVVAL(NVC57E, SET_SIZE, WIDTH, asyw->image.w) |\n\t\t  NVVAL(NVC57E, SET_SIZE, HEIGHT, asyw->image.h),\n\n\t\t\t\tSET_STORAGE,\n\t\t  NVVAL(NVC57E, SET_STORAGE, BLOCK_HEIGHT, asyw->image.blockh),\n\n\t\t\t\tSET_PARAMS,\n\t\t  NVVAL(NVC57E, SET_PARAMS, FORMAT, asyw->image.format) |\n\t\t  NVDEF(NVC57E, SET_PARAMS, CLAMP_BEFORE_BLEND, DISABLE) |\n\t\t  NVDEF(NVC57E, SET_PARAMS, SWAP_UV, DISABLE) |\n\t\t  NVDEF(NVC57E, SET_PARAMS, FMT_ROUNDING_MODE, ROUND_TO_NEAREST),\n\n\t\t\t\tSET_PLANAR_STORAGE(0),\n\t\t  NVVAL(NVC57E, SET_PLANAR_STORAGE, PITCH, asyw->image.blocks[0]) |\n\t\t  NVVAL(NVC57E, SET_PLANAR_STORAGE, PITCH, asyw->image.pitch[0] >> 6));\n\n\tPUSH_MTHD(push, NVC57E, SET_CONTEXT_DMA_ISO(0), asyw->image.handle, 1);\n\tPUSH_MTHD(push, NVC57E, SET_OFFSET(0), asyw->image.offset[0] >> 8);\n\n\tPUSH_MTHD(push, NVC57E, SET_POINT_IN(0),\n\t\t  NVVAL(NVC57E, SET_POINT_IN, X, asyw->state.src_x >> 16) |\n\t\t  NVVAL(NVC57E, SET_POINT_IN, Y, asyw->state.src_y >> 16));\n\n\tPUSH_MTHD(push, NVC57E, SET_SIZE_IN,\n\t\t  NVVAL(NVC57E, SET_SIZE_IN, WIDTH, asyw->state.src_w >> 16) |\n\t\t  NVVAL(NVC57E, SET_SIZE_IN, HEIGHT, asyw->state.src_h >> 16));\n\n\tPUSH_MTHD(push, NVC57E, SET_SIZE_OUT,\n\t\t  NVVAL(NVC57E, SET_SIZE_OUT, WIDTH, asyw->state.crtc_w) |\n\t\t  NVVAL(NVC57E, SET_SIZE_OUT, HEIGHT, asyw->state.crtc_h));\n\treturn 0;\n}\n\nstatic const struct nv50_wndw_func\nwndwc67e = {\n\t.acquire = wndwc37e_acquire,\n\t.release = wndwc37e_release,\n\t.sema_set = wndwc37e_sema_set,\n\t.sema_clr = wndwc37e_sema_clr,\n\t.ntfy_set = wndwc37e_ntfy_set,\n\t.ntfy_clr = wndwc37e_ntfy_clr,\n\t.ntfy_reset = corec37d_ntfy_init,\n\t.ntfy_wait_begun = base507c_ntfy_wait_begun,\n\t.ilut = wndwc57e_ilut,\n\t.ilut_identity = true,\n\t.ilut_size = 1024,\n\t.xlut_set = wndwc57e_ilut_set,\n\t.xlut_clr = wndwc57e_ilut_clr,\n\t.csc = base907c_csc,\n\t.csc_set = wndwc57e_csc_set,\n\t.csc_clr = wndwc57e_csc_clr,\n\t.image_set = wndwc67e_image_set,\n\t.image_clr = wndwc37e_image_clr,\n\t.blend_set = wndwc37e_blend_set,\n\t.update = wndwc37e_update,\n};\n\nint\nwndwc67e_new(struct nouveau_drm *drm, enum drm_plane_type type, int index,\n\t     s32 oclass, struct nv50_wndw **pwndw)\n{\n\treturn wndwc37e_new_(&wndwc67e, drm, type, index, oclass, BIT(index >> 1), pwndw);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}