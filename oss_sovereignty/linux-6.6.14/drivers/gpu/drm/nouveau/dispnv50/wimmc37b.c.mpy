{
  "module_name": "wimmc37b.c",
  "hash_id": "01b8997907f2a100cac635a31db33646f0aa6e551a955e36b34f6d3327ac78ca",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/wimmc37b.c",
  "human_readable_source": " \n#include \"wimm.h\"\n#include \"atom.h\"\n#include \"wndw.h\"\n\n#include <nvif/if0014.h>\n#include <nvif/pushc37b.h>\n\n#include <nvhw/class/clc37b.h>\n\nstatic int\nwimmc37b_update(struct nv50_wndw *wndw, u32 *interlock)\n{\n\tstruct nvif_push *push = wndw->wimm.push;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 2)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NVC37B, UPDATE, 0x00000001 |\n\t\t  NVVAL(NVC37B, UPDATE, INTERLOCK_WITH_WINDOW,\n\t\t\t!!(interlock[NV50_DISP_INTERLOCK_WNDW] & wndw->interlock.data)));\n\treturn PUSH_KICK(push);\n}\n\nstatic int\nwimmc37b_point(struct nv50_wndw *wndw, struct nv50_wndw_atom *asyw)\n{\n\tstruct nvif_push *push = wndw->wimm.push;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 2)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NVC37B, SET_POINT_OUT(0),\n\t\t  NVVAL(NVC37B, SET_POINT_OUT, X, asyw->point.x) |\n\t\t  NVVAL(NVC37B, SET_POINT_OUT, Y, asyw->point.y));\n\treturn 0;\n}\n\nstatic const struct nv50_wimm_func\nwimmc37b = {\n\t.point = wimmc37b_point,\n\t.update = wimmc37b_update,\n};\n\nstatic int\nwimmc37b_init_(const struct nv50_wimm_func *func, struct nouveau_drm *drm,\n\t       s32 oclass, struct nv50_wndw *wndw)\n{\n\tstruct nvif_disp_chan_v0 args = {\n\t\t.id = wndw->id,\n\t};\n\tstruct nv50_disp *disp = nv50_disp(drm->dev);\n\tint ret;\n\n\tret = nv50_dmac_create(&drm->client.device, &disp->disp->object,\n\t\t\t       &oclass, 0, &args, sizeof(args), -1,\n\t\t\t       &wndw->wimm);\n\tif (ret) {\n\t\tNV_ERROR(drm, \"wimm%04x allocation failed: %d\\n\", oclass, ret);\n\t\treturn ret;\n\t}\n\n\twndw->interlock.wimm = wndw->interlock.data;\n\twndw->immd = func;\n\treturn 0;\n}\n\nint\nwimmc37b_init(struct nouveau_drm *drm, s32 oclass, struct nv50_wndw *wndw)\n{\n\treturn wimmc37b_init_(&wimmc37b, drm, oclass, wndw);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}