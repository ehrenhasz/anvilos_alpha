{
  "module_name": "crcc57d.c",
  "hash_id": "e9c6320f6430e060b5bf97eb593a3310d0d94012ad878da8fbdab9269821148c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/crcc57d.c",
  "human_readable_source": "\n\n#include \"crc.h\"\n#include \"crcc37d.h\"\n#include \"core.h\"\n#include \"disp.h\"\n#include \"head.h\"\n\n#include <nvif/pushc37b.h>\n\n#include <nvhw/class/clc57d.h>\n\nstatic int crcc57d_set_src(struct nv50_head *head, int or, enum nv50_crc_source_type source,\n\t\t\t   struct nv50_crc_notifier_ctx *ctx)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tu32 crc_args = NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, CONTROLLING_CHANNEL, CORE) |\n\t\t       NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, EXPECT_BUFFER_COLLAPSE, FALSE) |\n\t\t       NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, SECONDARY_CRC, NONE) |\n\t\t       NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, CRC_DURING_SNOOZE, DISABLE);\n\tint ret;\n\n\tswitch (source) {\n\tcase NV50_CRC_SOURCE_TYPE_SOR:\n\t\tcrc_args |= NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, PRIMARY_CRC, SOR(or));\n\t\tbreak;\n\tcase NV50_CRC_SOURCE_TYPE_SF:\n\t\tcrc_args |= NVDEF(NVC57D, HEAD_SET_CRC_CONTROL, PRIMARY_CRC, SF);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\tret = PUSH_WAIT(push, 4);\n\tif (ret)\n\t\treturn ret;\n\n\tif (source) {\n\t\tPUSH_MTHD(push, NVC57D, HEAD_SET_CONTEXT_DMA_CRC(i), ctx->ntfy.handle);\n\t\tPUSH_MTHD(push, NVC57D, HEAD_SET_CRC_CONTROL(i), crc_args);\n\t} else {\n\t\tPUSH_MTHD(push, NVC57D, HEAD_SET_CRC_CONTROL(i), 0);\n\t\tPUSH_MTHD(push, NVC57D, HEAD_SET_CONTEXT_DMA_CRC(i), 0);\n\t}\n\n\treturn 0;\n}\n\nconst struct nv50_crc_func crcc57d = {\n\t.set_src = crcc57d_set_src,\n\t.set_ctx = crcc37d_set_ctx,\n\t.get_entry = crcc37d_get_entry,\n\t.ctx_finished = crcc37d_ctx_finished,\n\t.flip_threshold = CRCC37D_FLIP_THRESHOLD,\n\t.num_entries = CRCC37D_MAX_ENTRIES,\n\t.notifier_len = sizeof(struct crcc37d_notifier),\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}