{
  "module_name": "crc.h",
  "hash_id": "24c1a73b4511937d03d18404ee25331a97fe3aca8121b6b97523471e6994c844",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/crc.h",
  "human_readable_source": " \n#ifndef __NV50_CRC_H__\n#define __NV50_CRC_H__\n\n#include <linux/mutex.h>\n#include <drm/drm_crtc.h>\n#include <drm/drm_vblank_work.h>\n\n#include <nvif/mem.h>\n#include <nvkm/subdev/bios.h>\n#include \"nouveau_encoder.h\"\n\nstruct nv50_atom;\nstruct nv50_disp;\nstruct nv50_head;\n\n#if IS_ENABLED(CONFIG_DEBUG_FS)\nenum nv50_crc_source {\n\tNV50_CRC_SOURCE_NONE = 0,\n\tNV50_CRC_SOURCE_AUTO,\n\tNV50_CRC_SOURCE_RG,\n\tNV50_CRC_SOURCE_OUTP_ACTIVE,\n\tNV50_CRC_SOURCE_OUTP_COMPLETE,\n\tNV50_CRC_SOURCE_OUTP_INACTIVE,\n};\n\n \nenum nv50_crc_source_type {\n\tNV50_CRC_SOURCE_TYPE_NONE = 0,\n\tNV50_CRC_SOURCE_TYPE_SOR,\n\tNV50_CRC_SOURCE_TYPE_PIOR,\n\tNV50_CRC_SOURCE_TYPE_DAC,\n\tNV50_CRC_SOURCE_TYPE_RG,\n\tNV50_CRC_SOURCE_TYPE_SF,\n};\n\nstruct nv50_crc_notifier_ctx {\n\tstruct nvif_mem mem;\n\tstruct nvif_object ntfy;\n};\n\nstruct nv50_crc_atom {\n\tenum nv50_crc_source src;\n};\n\nstruct nv50_crc_func {\n\tint (*set_src)(struct nv50_head *, int or, enum nv50_crc_source_type type,\n\t\t       struct nv50_crc_notifier_ctx *ctx);\n\tint (*set_ctx)(struct nv50_head *, struct nv50_crc_notifier_ctx *);\n\tu32 (*get_entry)(struct nv50_head *, struct nv50_crc_notifier_ctx *,\n\t\t\t enum nv50_crc_source, int idx);\n\tbool (*ctx_finished)(struct nv50_head *,\n\t\t\t     struct nv50_crc_notifier_ctx *);\n\tshort flip_threshold;\n\tshort num_entries;\n\tsize_t notifier_len;\n};\n\nstruct nv50_crc {\n\tspinlock_t lock;\n\tstruct nv50_crc_notifier_ctx ctx[2];\n\tstruct drm_vblank_work flip_work;\n\tenum nv50_crc_source src;\n\n\tu64 frame;\n\tshort entry_idx;\n\tshort flip_threshold;\n\tu8 ctx_idx : 1;\n\tbool ctx_changed : 1;\n};\n\nvoid nv50_crc_init(struct drm_device *dev);\nint nv50_head_crc_late_register(struct nv50_head *);\nvoid nv50_crc_handle_vblank(struct nv50_head *head);\n\nint nv50_crc_verify_source(struct drm_crtc *, const char *, size_t *);\nconst char *const *nv50_crc_get_sources(struct drm_crtc *, size_t *);\nint nv50_crc_set_source(struct drm_crtc *, const char *);\n\nint nv50_crc_atomic_check_head(struct nv50_head *, struct nv50_head_atom *,\n\t\t\t       struct nv50_head_atom *);\nvoid nv50_crc_atomic_check_outp(struct nv50_atom *atom);\nvoid nv50_crc_atomic_stop_reporting(struct drm_atomic_state *);\nvoid nv50_crc_atomic_init_notifier_contexts(struct drm_atomic_state *);\nvoid nv50_crc_atomic_release_notifier_contexts(struct drm_atomic_state *);\nvoid nv50_crc_atomic_start_reporting(struct drm_atomic_state *);\nvoid nv50_crc_atomic_set(struct nv50_head *, struct nv50_head_atom *);\nvoid nv50_crc_atomic_clr(struct nv50_head *);\n\nextern const struct nv50_crc_func crc907d;\nextern const struct nv50_crc_func crcc37d;\nextern const struct nv50_crc_func crcc57d;\n\n#else  \nstruct nv50_crc {};\nstruct nv50_crc_func {};\nstruct nv50_crc_atom {};\n\n#define nv50_crc_verify_source NULL\n#define nv50_crc_get_sources NULL\n#define nv50_crc_set_source NULL\n\nstatic inline void nv50_crc_init(struct drm_device *dev) {}\nstatic inline int\nnv50_head_crc_late_register(struct nv50_head *head) { return 0; }\nstatic inline void nv50_crc_handle_vblank(struct nv50_head *head) {}\n\nstatic inline int\nnv50_crc_atomic_check_head(struct nv50_head *head,\n\t\t\t   struct nv50_head_atom *asyh,\n\t\t\t   struct nv50_head_atom *armh) { return 0; }\nstatic inline void nv50_crc_atomic_check_outp(struct nv50_atom *atom) {}\nstatic inline void\nnv50_crc_atomic_stop_reporting(struct drm_atomic_state *state) {}\nstatic inline void\nnv50_crc_atomic_init_notifier_contexts(struct drm_atomic_state *state) {}\nstatic inline void\nnv50_crc_atomic_release_notifier_contexts(struct drm_atomic_state *state) {}\nstatic inline void\nnv50_crc_atomic_start_reporting(struct drm_atomic_state *state) {}\nstatic inline void\nnv50_crc_atomic_set(struct nv50_head *head, struct nv50_head_atom *state) {}\nstatic inline void\nnv50_crc_atomic_clr(struct nv50_head *head) {}\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}