{
  "module_name": "head827d.c",
  "hash_id": "4626f1278f4ebce73c7363f9f31d122a776ac176521a3936337038638280e108",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv50/head827d.c",
  "human_readable_source": " \n#include \"head.h\"\n#include \"core.h\"\n\n#include <nvif/push507c.h>\n\n#include <nvhw/class/cl827d.h>\n\nstatic int\nhead827d_curs_clr(struct nv50_head *head)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 4)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTROL_CURSOR(i),\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, ENABLE, DISABLE) |\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, FORMAT, A8R8G8B8) |\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, SIZE, W64_H64));\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTEXT_DMA_CURSOR(i), 0x00000000);\n\treturn 0;\n}\n\nstatic int\nhead827d_curs_set(struct nv50_head *head, struct nv50_head_atom *asyh)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 5)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTROL_CURSOR(i),\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, ENABLE, ENABLE) |\n\t\t  NVVAL(NV827D, HEAD_SET_CONTROL_CURSOR, FORMAT, asyh->curs.format) |\n\t\t  NVVAL(NV827D, HEAD_SET_CONTROL_CURSOR, SIZE, asyh->curs.layout) |\n\t\t  NVVAL(NV827D, HEAD_SET_CONTROL_CURSOR, HOT_SPOT_X, 0) |\n\t\t  NVVAL(NV827D, HEAD_SET_CONTROL_CURSOR, HOT_SPOT_Y, 0) |\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, COMPOSITION, ALPHA_BLEND) |\n\t\t  NVDEF(NV827D, HEAD_SET_CONTROL_CURSOR, SUB_OWNER, NONE),\n\n\t\t\t\tHEAD_SET_OFFSET_CURSOR(i), asyh->curs.offset >> 8);\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTEXT_DMA_CURSOR(i), asyh->curs.handle);\n\treturn 0;\n}\n\nstatic int\nhead827d_core_set(struct nv50_head *head, struct nv50_head_atom *asyh)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 9)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_OFFSET(i, 0),\n\t\t  NVVAL(NV827D, HEAD_SET_OFFSET, ORIGIN, asyh->core.offset >> 8));\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_SIZE(i),\n\t\t  NVVAL(NV827D, HEAD_SET_SIZE, WIDTH, asyh->core.w) |\n\t\t  NVVAL(NV827D, HEAD_SET_SIZE, HEIGHT, asyh->core.h),\n\n\t\t\t\tHEAD_SET_STORAGE(i),\n\t\t  NVVAL(NV827D, HEAD_SET_STORAGE, BLOCK_HEIGHT, asyh->core.blockh) |\n\t\t  NVVAL(NV827D, HEAD_SET_STORAGE, PITCH, asyh->core.pitch >> 8) |\n\t\t  NVVAL(NV827D, HEAD_SET_STORAGE, PITCH, asyh->core.blocks) |\n\t\t  NVVAL(NV827D, HEAD_SET_STORAGE, MEMORY_LAYOUT, asyh->core.layout),\n\n\t\t\t\tHEAD_SET_PARAMS(i),\n\t\t  NVVAL(NV827D, HEAD_SET_PARAMS, FORMAT, asyh->core.format) |\n\t\t  NVDEF(NV827D, HEAD_SET_PARAMS, SUPER_SAMPLE, X1_AA) |\n\t\t  NVDEF(NV827D, HEAD_SET_PARAMS, GAMMA, LINEAR),\n\n\t\t\t\tHEAD_SET_CONTEXT_DMAS_ISO(i, 0),\n\t\t  NVVAL(NV827D, HEAD_SET_CONTEXT_DMAS_ISO, HANDLE, asyh->core.handle));\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_VIEWPORT_POINT_IN(i, 0),\n\t\t  NVVAL(NV827D, HEAD_SET_VIEWPORT_POINT_IN, X, asyh->core.x) |\n\t\t  NVVAL(NV827D, HEAD_SET_VIEWPORT_POINT_IN, Y, asyh->core.y));\n\treturn 0;\n}\n\nstatic int\nhead827d_olut_clr(struct nv50_head *head)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 4)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_BASE_LUT_LO(i),\n\t\t  NVDEF(NV827D, HEAD_SET_BASE_LUT_LO, ENABLE, DISABLE));\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTEXT_DMA_LUT(i), 0x00000000);\n\treturn 0;\n}\n\nstatic int\nhead827d_olut_set(struct nv50_head *head, struct nv50_head_atom *asyh)\n{\n\tstruct nvif_push *push = nv50_disp(head->base.base.dev)->core->chan.push;\n\tconst int i = head->base.index;\n\tint ret;\n\n\tif ((ret = PUSH_WAIT(push, 5)))\n\t\treturn ret;\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_BASE_LUT_LO(i),\n\t\t  NVDEF(NV827D, HEAD_SET_BASE_LUT_LO, ENABLE, ENABLE) |\n\t\t  NVVAL(NV827D, HEAD_SET_BASE_LUT_LO, MODE, asyh->olut.mode) |\n\t\t  NVVAL(NV827D, HEAD_SET_BASE_LUT_LO, ORIGIN, 0),\n\n\t\t\t\tHEAD_SET_BASE_LUT_HI(i),\n\t\t  NVVAL(NV827D, HEAD_SET_BASE_LUT_HI, ORIGIN, asyh->olut.offset >> 8));\n\n\tPUSH_MTHD(push, NV827D, HEAD_SET_CONTEXT_DMA_LUT(i), asyh->olut.handle);\n\treturn 0;\n}\n\nconst struct nv50_head_func\nhead827d = {\n\t.view = head507d_view,\n\t.mode = head507d_mode,\n\t.olut = head507d_olut,\n\t.olut_size = 256,\n\t.olut_set = head827d_olut_set,\n\t.olut_clr = head827d_olut_clr,\n\t.core_calc = head507d_core_calc,\n\t.core_set = head827d_core_set,\n\t.core_clr = head507d_core_clr,\n\t.curs_layout = head507d_curs_layout,\n\t.curs_format = head507d_curs_format,\n\t.curs_set = head827d_curs_set,\n\t.curs_clr = head827d_curs_clr,\n\t.base = head507d_base,\n\t.ovly = head507d_ovly,\n\t.dither = head507d_dither,\n\t.procamp = head507d_procamp,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}