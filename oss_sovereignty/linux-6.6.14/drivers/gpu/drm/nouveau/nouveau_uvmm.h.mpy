{
  "module_name": "nouveau_uvmm.h",
  "hash_id": "7862000f95d8909f0d93200d315e919f1b1b40c22ba502cf68dc5c1089f6d1f1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/nouveau_uvmm.h",
  "human_readable_source": " \n\n#ifndef __NOUVEAU_UVMM_H__\n#define __NOUVEAU_UVMM_H__\n\n#include <drm/drm_gpuva_mgr.h>\n\n#include \"nouveau_drv.h\"\n\nstruct nouveau_uvmm {\n\tstruct nouveau_vmm vmm;\n\tstruct drm_gpuva_manager umgr;\n\tstruct maple_tree region_mt;\n\tstruct mutex mutex;\n\tstruct dma_resv resv;\n\n\tu64 kernel_managed_addr;\n\tu64 kernel_managed_size;\n\n\tbool disabled;\n};\n\nstruct nouveau_uvma_region {\n\tstruct nouveau_uvmm *uvmm;\n\n\tstruct {\n\t\tu64 addr;\n\t\tu64 range;\n\t} va;\n\n\tstruct kref kref;\n\n\tstruct completion complete;\n\tbool dirty;\n};\n\nstruct nouveau_uvma {\n\tstruct drm_gpuva va;\n\n\tstruct nouveau_uvma_region *region;\n\tu8 kind;\n};\n\n#define uvmm_from_mgr(x) container_of((x), struct nouveau_uvmm, umgr)\n#define uvma_from_va(x) container_of((x), struct nouveau_uvma, va)\n\n#define to_uvmm(x) uvmm_from_mgr((x)->va.mgr)\n\nstruct nouveau_uvmm_bind_job {\n\tstruct nouveau_job base;\n\n\tstruct kref kref;\n\tstruct list_head entry;\n\tstruct work_struct work;\n\tstruct completion complete;\n\n\t \n\tstruct list_head ops;\n};\n\nstruct nouveau_uvmm_bind_job_args {\n\tstruct drm_file *file_priv;\n\tstruct nouveau_sched_entity *sched_entity;\n\n\tunsigned int flags;\n\n\tstruct {\n\t\tstruct drm_nouveau_sync *s;\n\t\tu32 count;\n\t} in_sync;\n\n\tstruct {\n\t\tstruct drm_nouveau_sync *s;\n\t\tu32 count;\n\t} out_sync;\n\n\tstruct {\n\t\tstruct drm_nouveau_vm_bind_op *s;\n\t\tu32 count;\n\t} op;\n};\n\n#define to_uvmm_bind_job(job) container_of((job), struct nouveau_uvmm_bind_job, base)\n\nint nouveau_uvmm_init(struct nouveau_uvmm *uvmm, struct nouveau_cli *cli,\n\t\t      u64 kernel_managed_addr, u64 kernel_managed_size);\nvoid nouveau_uvmm_fini(struct nouveau_uvmm *uvmm);\n\nvoid nouveau_uvmm_bo_map_all(struct nouveau_bo *nvbov, struct nouveau_mem *mem);\nvoid nouveau_uvmm_bo_unmap_all(struct nouveau_bo *nvbo);\n\nint nouveau_uvmm_ioctl_vm_init(struct drm_device *dev, void *data,\n\t\t\t       struct drm_file *file_priv);\n\nint nouveau_uvmm_ioctl_vm_bind(struct drm_device *dev, void *data,\n\t\t\t       struct drm_file *file_priv);\n\nstatic inline void nouveau_uvmm_lock(struct nouveau_uvmm *uvmm)\n{\n\tmutex_lock(&uvmm->mutex);\n}\n\nstatic inline void nouveau_uvmm_unlock(struct nouveau_uvmm *uvmm)\n{\n\tmutex_unlock(&uvmm->mutex);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}