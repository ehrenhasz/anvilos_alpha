{
  "module_name": "therm.h",
  "hash_id": "6f2400038443ad8018d776343930d608335d00e381c4822a099a02bce308ea6f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/include/nvkm/subdev/therm.h",
  "human_readable_source": " \n#ifndef __NVKM_THERM_H__\n#define __NVKM_THERM_H__\n#include <core/subdev.h>\n\n#include <subdev/bios.h>\n#include <subdev/bios/therm.h>\n#include <subdev/timer.h>\n\nenum nvkm_therm_thrs_direction {\n\tNVKM_THERM_THRS_FALLING = 0,\n\tNVKM_THERM_THRS_RISING = 1\n};\n\nenum nvkm_therm_thrs_state {\n\tNVKM_THERM_THRS_LOWER = 0,\n\tNVKM_THERM_THRS_HIGHER = 1\n};\n\nenum nvkm_therm_thrs {\n\tNVKM_THERM_THRS_FANBOOST = 0,\n\tNVKM_THERM_THRS_DOWNCLOCK = 1,\n\tNVKM_THERM_THRS_CRITICAL = 2,\n\tNVKM_THERM_THRS_SHUTDOWN = 3,\n\tNVKM_THERM_THRS_NR\n};\n\nenum nvkm_therm_fan_mode {\n\tNVKM_THERM_CTRL_NONE = 0,\n\tNVKM_THERM_CTRL_MANUAL = 1,\n\tNVKM_THERM_CTRL_AUTO = 2,\n};\n\nenum nvkm_therm_attr_type {\n\tNVKM_THERM_ATTR_FAN_MIN_DUTY = 0,\n\tNVKM_THERM_ATTR_FAN_MAX_DUTY = 1,\n\tNVKM_THERM_ATTR_FAN_MODE = 2,\n\n\tNVKM_THERM_ATTR_THRS_FAN_BOOST = 10,\n\tNVKM_THERM_ATTR_THRS_FAN_BOOST_HYST = 11,\n\tNVKM_THERM_ATTR_THRS_DOWN_CLK = 12,\n\tNVKM_THERM_ATTR_THRS_DOWN_CLK_HYST = 13,\n\tNVKM_THERM_ATTR_THRS_CRITICAL = 14,\n\tNVKM_THERM_ATTR_THRS_CRITICAL_HYST = 15,\n\tNVKM_THERM_ATTR_THRS_SHUTDOWN = 16,\n\tNVKM_THERM_ATTR_THRS_SHUTDOWN_HYST = 17,\n};\n\nstruct nvkm_therm_clkgate_init {\n\tu32 addr;\n\tu8  count;\n\tu32 data;\n};\n\nstruct nvkm_therm_clkgate_pack {\n\tconst struct nvkm_therm_clkgate_init *init;\n};\n\nstruct nvkm_therm {\n\tconst struct nvkm_therm_func *func;\n\tstruct nvkm_subdev subdev;\n\n\t \n\tstruct nvkm_alarm alarm;\n\tspinlock_t lock;\n\tstruct nvbios_therm_trip_point *last_trip;\n\tint mode;\n\tint cstate;\n\tint suspend;\n\n\t \n\tstruct nvbios_therm_sensor bios_sensor;\n\n\t \n\tstruct nvkm_fan *fan;\n\n\t \n\tstruct {\n\t\tspinlock_t alarm_program_lock;\n\t\tstruct nvkm_alarm therm_poll_alarm;\n\t\tenum nvkm_therm_thrs_state alarm_state[NVKM_THERM_THRS_NR];\n\t} sensor;\n\n\t \n\tstruct {\n\t\tvoid (*downclock)(struct nvkm_therm *, bool active);\n\t\tvoid (*pause)(struct nvkm_therm *, bool active);\n\t} emergency;\n\n\t \n\tstruct i2c_client *ic;\n\n\tint (*fan_get)(struct nvkm_therm *);\n\tint (*fan_set)(struct nvkm_therm *, int);\n\n\tint (*attr_get)(struct nvkm_therm *, enum nvkm_therm_attr_type);\n\tint (*attr_set)(struct nvkm_therm *, enum nvkm_therm_attr_type, int);\n\n\tbool clkgating_enabled;\n};\n\nint nvkm_therm_temp_get(struct nvkm_therm *);\nint nvkm_therm_fan_sense(struct nvkm_therm *);\nint nvkm_therm_cstate(struct nvkm_therm *, int, int);\nvoid nvkm_therm_clkgate_init(struct nvkm_therm *,\n\t\t\t     const struct nvkm_therm_clkgate_pack *);\nvoid nvkm_therm_clkgate_enable(struct nvkm_therm *);\nvoid nvkm_therm_clkgate_fini(struct nvkm_therm *, bool);\n\nint nv40_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint nv50_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint g84_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gt215_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gf119_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gk104_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gm107_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gm200_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\nint gp100_therm_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_therm **);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}