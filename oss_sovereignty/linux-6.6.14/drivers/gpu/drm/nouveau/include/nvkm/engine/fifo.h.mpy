{
  "module_name": "fifo.h",
  "hash_id": "a68b454e90815452de5a2cd89764aace1ea8206de7c7978b5f82acaa3bc8c8b8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/include/nvkm/engine/fifo.h",
  "human_readable_source": " \n#ifndef __NVKM_FIFO_H__\n#define __NVKM_FIFO_H__\n#include <core/engine.h>\n#include <core/object.h>\n#include <core/event.h>\nstruct nvkm_fault_data;\n\n#define NVKM_FIFO_ENGN_NR 16\n\nstruct nvkm_chan {\n\tconst struct nvkm_chan_func *func;\n\tchar name[64];\n\tstruct nvkm_cgrp *cgrp;\n\tint runq;\n\n\tstruct nvkm_gpuobj *inst;\n\tstruct nvkm_vmm *vmm;\n\tstruct nvkm_gpuobj *push;\n\tint id;\n\n\tstruct {\n\t\tstruct nvkm_memory *mem;\n\t\tu32 base;\n\t} userd;\n\n\tu32 ramfc_offset;\n\tstruct nvkm_gpuobj *ramfc;\n\tstruct nvkm_gpuobj *cache;\n\tstruct nvkm_gpuobj *eng;\n\tstruct nvkm_gpuobj *pgd;\n\tstruct nvkm_ramht *ramht;\n\n\tspinlock_t lock;\n\tatomic_t blocked;\n\tatomic_t errored;\n\n\tstruct list_head cctxs;\n\tstruct list_head head;\n};\n\nstruct nvkm_chan *nvkm_chan_get_chid(struct nvkm_engine *, int id, unsigned long *irqflags);\nstruct nvkm_chan *nvkm_chan_get_inst(struct nvkm_engine *, u64 inst, unsigned long *irqflags);\nvoid nvkm_chan_put(struct nvkm_chan **, unsigned long irqflags);\n\nstruct nvkm_fifo {\n\tconst struct nvkm_fifo_func *func;\n\tstruct nvkm_engine engine;\n\n\tstruct nvkm_chid *chid;\n\tstruct nvkm_chid *cgid;\n\n\tstruct list_head runqs;\n\tstruct list_head runls;\n\n\tstruct {\n#define NVKM_FIFO_NONSTALL_EVENT BIT(0)\n\t\tstruct nvkm_event event;\n\t\tstruct nvkm_inth intr;\n\t} nonstall;\n\n\tstruct {\n\t\tu32 chan_msec;\n\t} timeout;\n\n\tstruct {\n\t\tstruct nvkm_memory *mem;\n\t\tstruct nvkm_vma *bar1;\n\t} userd;\n\n\tspinlock_t lock;\n\tstruct mutex mutex;\n};\n\nvoid nvkm_fifo_fault(struct nvkm_fifo *, struct nvkm_fault_data *);\nvoid nvkm_fifo_pause(struct nvkm_fifo *, unsigned long *);\nvoid nvkm_fifo_start(struct nvkm_fifo *, unsigned long *);\nbool nvkm_fifo_ctxsw_in_progress(struct nvkm_engine *);\n\nint nv04_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint nv10_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint nv17_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint nv40_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint nv50_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint g84_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint g98_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gf100_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gk104_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gk110_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gk208_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gk20a_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gm107_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gm200_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gp100_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint gv100_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint tu102_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint ga100_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\nint ga102_fifo_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_fifo **);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}