{
  "module_name": "clk.h",
  "hash_id": "390518569d5a22f81f45a83b3f76de56ee7b3ed0e093248dbd35785397f5ebc4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/include/nvkm/subdev/clk.h",
  "human_readable_source": " \n#ifndef __NVKM_CLK_H__\n#define __NVKM_CLK_H__\n#include <core/subdev.h>\n#include <subdev/pci.h>\nstruct nvbios_pll;\nstruct nvkm_pll_vals;\n\n#define NVKM_CLK_CSTATE_DEFAULT -1  \n#define NVKM_CLK_CSTATE_BASE    -2  \n#define NVKM_CLK_CSTATE_HIGHEST -3  \n\nenum nv_clk_src {\n\tnv_clk_src_crystal,\n\tnv_clk_src_href,\n\n\tnv_clk_src_hclk,\n\tnv_clk_src_hclkm3,\n\tnv_clk_src_hclkm3d2,\n\tnv_clk_src_hclkm2d3,  \n\tnv_clk_src_hclkm4,  \n\tnv_clk_src_cclk,  \n\n\tnv_clk_src_host,\n\n\tnv_clk_src_sppll0,\n\tnv_clk_src_sppll1,\n\n\tnv_clk_src_mpllsrcref,\n\tnv_clk_src_mpllsrc,\n\tnv_clk_src_mpll,\n\tnv_clk_src_mdiv,\n\n\tnv_clk_src_core,\n\tnv_clk_src_core_intm,\n\tnv_clk_src_shader,\n\n\tnv_clk_src_mem,\n\n\tnv_clk_src_gpc,\n\tnv_clk_src_rop,\n\tnv_clk_src_hubk01,\n\tnv_clk_src_hubk06,\n\tnv_clk_src_hubk07,\n\tnv_clk_src_copy,\n\tnv_clk_src_pmu,\n\tnv_clk_src_disp,\n\tnv_clk_src_vdec,\n\n\tnv_clk_src_dom6,\n\n\tnv_clk_src_max,\n};\n\nstruct nvkm_cstate {\n\tstruct list_head head;\n\tu8  voltage;\n\tu32 domain[nv_clk_src_max];\n\tu8  id;\n};\n\nstruct nvkm_pstate {\n\tstruct list_head head;\n\tstruct list_head list;  \n\tstruct nvkm_cstate base;\n\tu8 pstate;\n\tu8 fanspeed;\n\tenum nvkm_pcie_speed pcie_speed;\n\tu8 pcie_width;\n};\n\nstruct nvkm_domain {\n\tenum nv_clk_src name;\n\tu8 bios;  \n#define NVKM_CLK_DOM_FLAG_CORE    0x01\n#define NVKM_CLK_DOM_FLAG_VPSTATE 0x02\n\tu8 flags;\n\tconst char *mname;\n\tint mdiv;\n};\n\nstruct nvkm_clk {\n\tconst struct nvkm_clk_func *func;\n\tstruct nvkm_subdev subdev;\n\n\tconst struct nvkm_domain *domains;\n\tstruct nvkm_pstate bstate;\n\n\tstruct list_head states;\n\tint state_nr;\n\n\tstruct work_struct work;\n\twait_queue_head_t wait;\n\tatomic_t waiting;\n\n\tint pwrsrc;\n\tint pstate;  \n\tint ustate_ac;  \n\tint ustate_dc;  \n\tint astate;  \n\tint dstate;  \n\tu8  temp;\n\n\tbool allow_reclock;\n#define NVKM_CLK_BOOST_NONE 0x0\n#define NVKM_CLK_BOOST_BIOS 0x1\n#define NVKM_CLK_BOOST_FULL 0x2\n\tu8  boost_mode;\n\tu32 base_khz;\n\tu32 boost_khz;\n\n\t \n\tint (*pll_calc)(struct nvkm_clk *, struct nvbios_pll *, int clk,\n\t\t\tstruct nvkm_pll_vals *pv);\n\tint (*pll_prog)(struct nvkm_clk *, u32 reg1, struct nvkm_pll_vals *pv);\n};\n\nint nvkm_clk_read(struct nvkm_clk *, enum nv_clk_src);\nint nvkm_clk_ustate(struct nvkm_clk *, int req, int pwr);\nint nvkm_clk_astate(struct nvkm_clk *, int req, int rel, bool wait);\nint nvkm_clk_dstate(struct nvkm_clk *, int req, int rel);\nint nvkm_clk_tstate(struct nvkm_clk *, u8 temperature);\nint nvkm_clk_pwrsrc(struct nvkm_device *);\n\nint nv04_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint nv40_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint nv50_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint g84_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint mcp77_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint gt215_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint gf100_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint gk104_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint gk20a_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\nint gm20b_clk_new(struct nvkm_device *, enum nvkm_subdev_type, int inst, struct nvkm_clk **);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}