{
  "module_name": "mm.h",
  "hash_id": "4d7e07c997b48e4ad866ef73b944f20709e22a29498afa5746c5b7e86ec20a84",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/include/nvkm/core/mm.h",
  "human_readable_source": " \n#ifndef __NVKM_MM_H__\n#define __NVKM_MM_H__\n#include <core/os.h>\n\nstruct nvkm_mm_node {\n\tstruct list_head nl_entry;\n\tstruct list_head fl_entry;\n\tstruct nvkm_mm_node *next;\n\n#define NVKM_MM_HEAP_ANY 0x00\n\tu8  heap;\n#define NVKM_MM_TYPE_NONE 0x00\n#define NVKM_MM_TYPE_HOLE 0xff\n\tu8  type;\n\tu32 offset;\n\tu32 length;\n};\n\nstruct nvkm_mm {\n\tstruct list_head nodes;\n\tstruct list_head free;\n\n\tu32 block_size;\n\tint heap_nodes;\n};\n\nstatic inline bool\nnvkm_mm_initialised(struct nvkm_mm *mm)\n{\n\treturn mm->heap_nodes;\n}\n\nint  nvkm_mm_init(struct nvkm_mm *, u8 heap, u32 offset, u32 length, u32 block);\nint  nvkm_mm_fini(struct nvkm_mm *);\nint  nvkm_mm_head(struct nvkm_mm *, u8 heap, u8 type, u32 size_max,\n\t\t  u32 size_min, u32 align, struct nvkm_mm_node **);\nint  nvkm_mm_tail(struct nvkm_mm *, u8 heap, u8 type, u32 size_max,\n\t\t  u32 size_min, u32 align, struct nvkm_mm_node **);\nvoid nvkm_mm_free(struct nvkm_mm *, struct nvkm_mm_node **);\nvoid nvkm_mm_dump(struct nvkm_mm *, const char *);\n\nstatic inline u32\nnvkm_mm_heap_size(struct nvkm_mm *mm, u8 heap)\n{\n\tstruct nvkm_mm_node *node;\n\tu32 size = 0;\n\tlist_for_each_entry(node, &mm->nodes, nl_entry) {\n\t\tif (node->heap == heap)\n\t\t\tsize += node->length;\n\t}\n\treturn size;\n}\n\nstatic inline bool\nnvkm_mm_contiguous(struct nvkm_mm_node *node)\n{\n\treturn !node->next;\n}\n\nstatic inline u32\nnvkm_mm_addr(struct nvkm_mm_node *node)\n{\n\tif (WARN_ON(!nvkm_mm_contiguous(node)))\n\t\treturn 0;\n\treturn node->offset;\n}\n\nstatic inline u32\nnvkm_mm_size(struct nvkm_mm_node *node)\n{\n\tu32 size = 0;\n\tdo {\n\t\tsize += node->length;\n\t} while ((node = node->next));\n\treturn size;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}