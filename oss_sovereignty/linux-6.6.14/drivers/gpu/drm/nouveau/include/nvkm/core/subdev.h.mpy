{
  "module_name": "subdev.h",
  "hash_id": "e3d2f0221c508a57e5a3c2314aeccd57cae36fe2efe333d5f534f5dc38802bac",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/include/nvkm/core/subdev.h",
  "human_readable_source": " \n#ifndef __NVKM_SUBDEV_H__\n#define __NVKM_SUBDEV_H__\n#include <core/device.h>\n\nenum nvkm_subdev_type {\n#define NVKM_LAYOUT_ONCE(t,s,p,...) t,\n#define NVKM_LAYOUT_INST NVKM_LAYOUT_ONCE\n#include <core/layout.h>\n#undef NVKM_LAYOUT_INST\n#undef NVKM_LAYOUT_ONCE\n\tNVKM_SUBDEV_NR\n};\n\nstruct nvkm_subdev {\n\tconst struct nvkm_subdev_func *func;\n\tstruct nvkm_device *device;\n\tenum nvkm_subdev_type type;\n\tint inst;\n\n\tchar name[16];\n\tu32 debug;\n\n\tstruct {\n\t\trefcount_t refcount;\n\t\tstruct mutex mutex;\n\t\tbool enabled;\n\t} use;\n\n\tstruct nvkm_inth inth;\n\n\tstruct list_head head;\n\tvoid **pself;\n\tbool oneinit;\n};\n\nstruct nvkm_subdev_func {\n\tvoid *(*dtor)(struct nvkm_subdev *);\n\tint (*preinit)(struct nvkm_subdev *);\n\tint (*oneinit)(struct nvkm_subdev *);\n\tint (*info)(struct nvkm_subdev *, u64 mthd, u64 *data);\n\tint (*init)(struct nvkm_subdev *);\n\tint (*fini)(struct nvkm_subdev *, bool suspend);\n\tvoid (*intr)(struct nvkm_subdev *);\n};\n\nextern const char *nvkm_subdev_type[NVKM_SUBDEV_NR];\nint nvkm_subdev_new_(const struct nvkm_subdev_func *, struct nvkm_device *, enum nvkm_subdev_type,\n\t\t     int inst, struct nvkm_subdev **);\nvoid __nvkm_subdev_ctor(const struct nvkm_subdev_func *, struct nvkm_device *,\n\t\t\tenum nvkm_subdev_type, int inst, struct nvkm_subdev *);\n\nstatic inline void\nnvkm_subdev_ctor(const struct nvkm_subdev_func *func, struct nvkm_device *device,\n\t\t enum nvkm_subdev_type type, int inst, struct nvkm_subdev *subdev)\n{\n\t__nvkm_subdev_ctor(func, device, type, inst, subdev);\n\tmutex_init(&subdev->use.mutex);\n}\n\nvoid nvkm_subdev_disable(struct nvkm_device *, enum nvkm_subdev_type, int inst);\nvoid nvkm_subdev_del(struct nvkm_subdev **);\nint  nvkm_subdev_ref(struct nvkm_subdev *);\nvoid nvkm_subdev_unref(struct nvkm_subdev *);\nint  nvkm_subdev_preinit(struct nvkm_subdev *);\nint  nvkm_subdev_oneinit(struct nvkm_subdev *);\nint  nvkm_subdev_init(struct nvkm_subdev *);\nint  nvkm_subdev_fini(struct nvkm_subdev *, bool suspend);\nint  nvkm_subdev_info(struct nvkm_subdev *, u64, u64 *);\nvoid nvkm_subdev_intr(struct nvkm_subdev *);\n\n \n#define nvkm_printk_ok(s,u,l)                                                                \\\n\t((CONFIG_NOUVEAU_DEBUG >= (l)) && ((s)->debug >= (l) || ((u) && (u)->debug >= (l))))\n#define nvkm_printk___(s,u,l,p,f,a...) do {                                                  \\\n\tif (nvkm_printk_ok((s), (u), (l))) {                                                 \\\n\t\tif ((u) && (u) != (s))                                                       \\\n\t\t\tdev_##p((s)->device->dev, \"%s(%s):\"f, (s)->name, (u)->name, ##a);    \\\n\t\telse                                                                         \\\n\t\t\tdev_##p((s)->device->dev, \"%s:\"f, (s)->name, ##a);                   \\\n\t}                                                                                    \\\n} while(0)\n#define nvkm_printk__(s,l,p,f,a...) nvkm_printk___((s), (s), (l), p, f, ##a)\n#define nvkm_printk_(s,l,p,f,a...) nvkm_printk__((s), (l), p, \" \"f, ##a)\n#define nvkm_printk(s,l,p,f,a...) nvkm_printk_((s), NV_DBG_##l, p, f, ##a)\n#define nvkm_fatal(s,f,a...) nvkm_printk((s), FATAL,   crit, f, ##a)\n#define nvkm_error(s,f,a...) nvkm_printk((s), ERROR,    err, f, ##a)\n#define nvkm_warn(s,f,a...)  nvkm_printk((s),  WARN, notice, f, ##a)\n#define nvkm_info(s,f,a...)  nvkm_printk((s),  INFO,   info, f, ##a)\n#define nvkm_debug(s,f,a...) nvkm_printk((s), DEBUG,   info, f, ##a)\n#define nvkm_trace(s,f,a...) nvkm_printk((s), TRACE,   info, f, ##a)\n#define nvkm_spam(s,f,a...)  nvkm_printk((s),  SPAM,    dbg, f, ##a)\n\n#define nvkm_error_ratelimited(s,f,a...) nvkm_printk((s), ERROR, err_ratelimited, f, ##a)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}