{
  "module_name": "tvnv17.h",
  "hash_id": "b8e22f9aa15d172ed85ff695b94a77b0de2dad5276bf3230dcaa10c943cbfd9d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/nouveau/dispnv04/tvnv17.h",
  "human_readable_source": " \n\n#ifndef __NV17_TV_H__\n#define __NV17_TV_H__\n\nstruct nv17_tv_state {\n\tuint8_t tv_enc[0x40];\n\n\tuint32_t hfilter[4][7];\n\tuint32_t hfilter2[4][7];\n\tuint32_t vfilter[4][7];\n\n\tuint32_t ptv_200;\n\tuint32_t ptv_204;\n\tuint32_t ptv_208;\n\tuint32_t ptv_20c;\n\tuint32_t ptv_304;\n\tuint32_t ptv_500;\n\tuint32_t ptv_504;\n\tuint32_t ptv_508;\n\tuint32_t ptv_600;\n\tuint32_t ptv_604;\n\tuint32_t ptv_608;\n\tuint32_t ptv_60c;\n\tuint32_t ptv_610;\n\tuint32_t ptv_614;\n};\n\nenum nv17_tv_norm{\n\tTV_NORM_PAL,\n\tTV_NORM_PAL_M,\n\tTV_NORM_PAL_N,\n\tTV_NORM_PAL_NC,\n\tTV_NORM_NTSC_M,\n\tTV_NORM_NTSC_J,\n\tNUM_LD_TV_NORMS,\n\tTV_NORM_HD480I = NUM_LD_TV_NORMS,\n\tTV_NORM_HD480P,\n\tTV_NORM_HD576I,\n\tTV_NORM_HD576P,\n\tTV_NORM_HD720P,\n\tTV_NORM_HD1080I,\n\tNUM_TV_NORMS\n};\n\nstruct nv17_tv_encoder {\n\tstruct nouveau_encoder base;\n\n\tstruct nv17_tv_state state;\n\tstruct nv17_tv_state saved_state;\n\n\tint overscan;\n\tint flicker;\n\tint saturation;\n\tint hue;\n\tenum nv17_tv_norm tv_norm;\n\tint subconnector;\n\tint select_subconnector;\n\tuint32_t pin_mask;\n};\n#define to_tv_enc(x) container_of(nouveau_encoder(x),\t\t\\\n\t\t\t\t  struct nv17_tv_encoder, base)\n\nextern const char * const nv17_tv_norm_names[NUM_TV_NORMS];\n\nextern struct nv17_tv_norm_params {\n\tenum {\n\t\tTV_ENC_MODE,\n\t\tCTV_ENC_MODE,\n\t} kind;\n\n\tunion {\n\t\tstruct {\n\t\t\tint hdisplay;\n\t\t\tint vdisplay;\n\t\t\tint vrefresh;  \n\n\t\t\tuint8_t tv_enc[0x40];\n\t\t} tv_enc_mode;\n\n\t\tstruct {\n\t\t\tstruct drm_display_mode mode;\n\n\t\t\tuint32_t ctv_regs[38];\n\t\t} ctv_enc_mode;\n\t};\n\n} nv17_tv_norms[NUM_TV_NORMS];\n#define get_tv_norm(enc) (&nv17_tv_norms[to_tv_enc(enc)->tv_norm])\n\nextern const struct drm_display_mode nv17_tv_modes[];\n\nstatic inline int interpolate(int y0, int y1, int y2, int x)\n{\n\treturn y1 + (x < 50 ? y1 - y0 : y2 - y1) * (x - 50) / 50;\n}\n\nvoid nv17_tv_state_save(struct drm_device *dev, struct nv17_tv_state *state);\nvoid nv17_tv_state_load(struct drm_device *dev, struct nv17_tv_state *state);\nvoid nv17_tv_update_properties(struct drm_encoder *encoder);\nvoid nv17_tv_update_rescaler(struct drm_encoder *encoder);\nvoid nv17_ctv_update_rescaler(struct drm_encoder *encoder);\n\n \n\nstatic inline void nv_write_ptv(struct drm_device *dev, uint32_t reg,\n\t\t\t\tuint32_t val)\n{\n\tstruct nvif_device *device = &nouveau_drm(dev)->client.device;\n\tnvif_wr32(&device->object, reg, val);\n}\n\nstatic inline uint32_t nv_read_ptv(struct drm_device *dev, uint32_t reg)\n{\n\tstruct nvif_device *device = &nouveau_drm(dev)->client.device;\n\treturn nvif_rd32(&device->object, reg);\n}\n\nstatic inline void nv_write_tv_enc(struct drm_device *dev, uint8_t reg,\n\t\t\t\t   uint8_t val)\n{\n\tnv_write_ptv(dev, NV_PTV_TV_INDEX, reg);\n\tnv_write_ptv(dev, NV_PTV_TV_DATA, val);\n}\n\nstatic inline uint8_t nv_read_tv_enc(struct drm_device *dev, uint8_t reg)\n{\n\tnv_write_ptv(dev, NV_PTV_TV_INDEX, reg);\n\treturn nv_read_ptv(dev, NV_PTV_TV_DATA);\n}\n\n#define nv_load_ptv(dev, state, reg) \\\n\tnv_write_ptv(dev, NV_PTV_OFFSET + 0x##reg, state->ptv_##reg)\n#define nv_save_ptv(dev, state, reg) \\\n\tstate->ptv_##reg = nv_read_ptv(dev, NV_PTV_OFFSET + 0x##reg)\n#define nv_load_tv_enc(dev, state, reg) \\\n\tnv_write_tv_enc(dev, 0x##reg, state->tv_enc[0x##reg])\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}