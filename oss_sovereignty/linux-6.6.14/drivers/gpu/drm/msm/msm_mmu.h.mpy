{
  "module_name": "msm_mmu.h",
  "hash_id": "a4669c85e10a0e33d7c17167cc5d3c6cc4b32639246ed0c184474cd726708725",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/msm_mmu.h",
  "human_readable_source": " \n \n\n#ifndef __MSM_MMU_H__\n#define __MSM_MMU_H__\n\n#include <linux/iommu.h>\n\nstruct msm_mmu_funcs {\n\tvoid (*detach)(struct msm_mmu *mmu);\n\tint (*map)(struct msm_mmu *mmu, uint64_t iova, struct sg_table *sgt,\n\t\t\tsize_t len, int prot);\n\tint (*unmap)(struct msm_mmu *mmu, uint64_t iova, size_t len);\n\tvoid (*destroy)(struct msm_mmu *mmu);\n\tvoid (*resume_translation)(struct msm_mmu *mmu);\n};\n\nenum msm_mmu_type {\n\tMSM_MMU_GPUMMU,\n\tMSM_MMU_IOMMU,\n\tMSM_MMU_IOMMU_PAGETABLE,\n};\n\nstruct msm_mmu {\n\tconst struct msm_mmu_funcs *funcs;\n\tstruct device *dev;\n\tint (*handler)(void *arg, unsigned long iova, int flags, void *data);\n\tvoid *arg;\n\tenum msm_mmu_type type;\n};\n\nstatic inline void msm_mmu_init(struct msm_mmu *mmu, struct device *dev,\n\t\tconst struct msm_mmu_funcs *funcs, enum msm_mmu_type type)\n{\n\tmmu->dev = dev;\n\tmmu->funcs = funcs;\n\tmmu->type = type;\n}\n\nstruct msm_mmu *msm_iommu_new(struct device *dev, unsigned long quirks);\nstruct msm_mmu *msm_iommu_gpu_new(struct device *dev, struct msm_gpu *gpu, unsigned long quirks);\nstruct msm_mmu *msm_gpummu_new(struct device *dev, struct msm_gpu *gpu);\n\nstatic inline void msm_mmu_set_fault_handler(struct msm_mmu *mmu, void *arg,\n\t\tint (*handler)(void *arg, unsigned long iova, int flags, void *data))\n{\n\tmmu->arg = arg;\n\tmmu->handler = handler;\n}\n\nstruct msm_mmu *msm_iommu_pagetable_create(struct msm_mmu *parent);\n\nvoid msm_gpummu_params(struct msm_mmu *mmu, dma_addr_t *pt_base,\n\t\tdma_addr_t *tran_error);\n\n\nint msm_iommu_pagetable_params(struct msm_mmu *mmu, phys_addr_t *ttbr,\n\t\tint *asid);\nstruct iommu_domain_geometry *msm_iommu_get_geometry(struct msm_mmu *mmu);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}