{
  "module_name": "dp_panel.h",
  "hash_id": "a8faa913f202069b0dc86fdb39029365d150f3e315ffbdc7be7351d8a00d9425",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/dp/dp_panel.h",
  "human_readable_source": " \n \n\n#ifndef _DP_PANEL_H_\n#define _DP_PANEL_H_\n\n#include <drm/msm_drm.h>\n\n#include \"dp_aux.h\"\n#include \"dp_link.h\"\n\nstruct edid;\n\n#define DPRX_EXTENDED_DPCD_FIELD\t0x2200\n\n#define DP_DOWNSTREAM_PORTS\t\t4\n#define DP_DOWNSTREAM_CAP_SIZE\t\t4\n\nstruct dp_display_mode {\n\tstruct drm_display_mode drm_mode;\n\tu32 capabilities;\n\tu32 bpp;\n\tu32 h_active_low;\n\tu32 v_active_low;\n};\n\nstruct dp_panel_in {\n\tstruct device *dev;\n\tstruct drm_dp_aux *aux;\n\tstruct dp_link *link;\n\tstruct dp_catalog *catalog;\n};\n\nstruct dp_panel_psr {\n\tu8 version;\n\tu8 capabilities;\n};\n\nstruct dp_panel {\n\t \n\tu8 dpcd[DP_RECEIVER_CAP_SIZE + 1];\n\tu8 ds_cap_info[DP_DOWNSTREAM_PORTS * DP_DOWNSTREAM_CAP_SIZE];\n\tu32 ds_port_cnt;\n\tu32 dfp_present;\n\n\tstruct dp_link_info link_info;\n\tstruct drm_dp_desc desc;\n\tstruct edid *edid;\n\tstruct drm_connector *connector;\n\tstruct dp_display_mode dp_mode;\n\tstruct dp_panel_psr psr_cap;\n\tbool video_test;\n\n\tu32 vic;\n\tu32 max_dp_lanes;\n\tu32 max_dp_link_rate;\n\n\tu32 max_bw_code;\n};\n\nint dp_panel_init_panel_info(struct dp_panel *dp_panel);\nint dp_panel_deinit(struct dp_panel *dp_panel);\nint dp_panel_timing_cfg(struct dp_panel *dp_panel);\nvoid dp_panel_dump_regs(struct dp_panel *dp_panel);\nint dp_panel_read_sink_caps(struct dp_panel *dp_panel,\n\t\tstruct drm_connector *connector);\nu32 dp_panel_get_mode_bpp(struct dp_panel *dp_panel, u32 mode_max_bpp,\n\t\t\tu32 mode_pclk_khz);\nint dp_panel_get_modes(struct dp_panel *dp_panel,\n\t\tstruct drm_connector *connector);\nvoid dp_panel_handle_sink_request(struct dp_panel *dp_panel);\nvoid dp_panel_tpg_config(struct dp_panel *dp_panel, bool enable);\n\n \nstatic inline bool is_link_rate_valid(u32 bw_code)\n{\n\treturn (bw_code == DP_LINK_BW_1_62 ||\n\t\tbw_code == DP_LINK_BW_2_7 ||\n\t\tbw_code == DP_LINK_BW_5_4 ||\n\t\tbw_code == DP_LINK_BW_8_1);\n}\n\n \nstatic inline bool is_lane_count_valid(u32 lane_count)\n{\n\treturn (lane_count == 1 ||\n\t\tlane_count == 2 ||\n\t\tlane_count == 4);\n}\n\nstruct dp_panel *dp_panel_get(struct dp_panel_in *in);\nvoid dp_panel_put(struct dp_panel *dp_panel);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}