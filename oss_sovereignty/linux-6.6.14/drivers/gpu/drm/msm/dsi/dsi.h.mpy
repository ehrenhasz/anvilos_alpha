{
  "module_name": "dsi.h",
  "hash_id": "771c0c73406c401bfa1bb694d9b841375e950bff6c26a10537cbaaf9d75573a4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/dsi/dsi.h",
  "human_readable_source": " \n \n\n#ifndef __DSI_CONNECTOR_H__\n#define __DSI_CONNECTOR_H__\n\n#include <linux/of_platform.h>\n#include <linux/platform_device.h>\n\n#include <drm/drm_bridge.h>\n#include <drm/drm_crtc.h>\n#include <drm/drm_mipi_dsi.h>\n\n#include \"msm_drv.h\"\n#include \"disp/msm_disp_snapshot.h\"\n\n#define DSI_0\t0\n#define DSI_1\t1\n#define DSI_MAX\t2\n\nstruct msm_dsi_phy_shared_timings;\nstruct msm_dsi_phy_clk_request;\n\nenum msm_dsi_phy_usecase {\n\tMSM_DSI_PHY_STANDALONE,\n\tMSM_DSI_PHY_MASTER,\n\tMSM_DSI_PHY_SLAVE,\n};\n\n#define DSI_BUS_CLK_MAX\t\t4\n\nstruct msm_dsi {\n\tstruct drm_device *dev;\n\tstruct platform_device *pdev;\n\n\t \n\tstruct drm_bridge *bridge;\n\n\tstruct mipi_dsi_host *host;\n\tstruct msm_dsi_phy *phy;\n\n\t \n\tstruct drm_bridge *external_bridge;\n\n\tstruct device *phy_dev;\n\tbool phy_enabled;\n\n\t \n\tstruct drm_encoder *encoder;\n\n\tint id;\n};\n\n \nstruct drm_bridge *msm_dsi_manager_bridge_init(u8 id);\nvoid msm_dsi_manager_bridge_destroy(struct drm_bridge *bridge);\nint msm_dsi_manager_ext_bridge_init(u8 id);\nint msm_dsi_manager_cmd_xfer(int id, const struct mipi_dsi_msg *msg);\nbool msm_dsi_manager_cmd_xfer_trigger(int id, u32 dma_base, u32 len);\nint msm_dsi_manager_register(struct msm_dsi *msm_dsi);\nvoid msm_dsi_manager_unregister(struct msm_dsi *msm_dsi);\nvoid msm_dsi_manager_tpg_enable(void);\n\n \nstatic inline bool msm_dsi_device_connected(struct msm_dsi *msm_dsi)\n{\n\treturn msm_dsi->external_bridge;\n}\n\n \nstruct msm_dsi_host;\nint msm_dsi_host_xfer_prepare(struct mipi_dsi_host *host,\n\t\t\t\t\tconst struct mipi_dsi_msg *msg);\nvoid msm_dsi_host_xfer_restore(struct mipi_dsi_host *host,\n\t\t\t\t\tconst struct mipi_dsi_msg *msg);\nint msm_dsi_host_cmd_tx(struct mipi_dsi_host *host,\n\t\t\t\t\tconst struct mipi_dsi_msg *msg);\nint msm_dsi_host_cmd_rx(struct mipi_dsi_host *host,\n\t\t\t\t\tconst struct mipi_dsi_msg *msg);\nvoid msm_dsi_host_cmd_xfer_commit(struct mipi_dsi_host *host,\n\t\t\t\t\tu32 dma_base, u32 len);\nint msm_dsi_host_enable(struct mipi_dsi_host *host);\nint msm_dsi_host_disable(struct mipi_dsi_host *host);\nvoid msm_dsi_host_enable_irq(struct mipi_dsi_host *host);\nvoid msm_dsi_host_disable_irq(struct mipi_dsi_host *host);\nint msm_dsi_host_power_on(struct mipi_dsi_host *host,\n\t\t\tstruct msm_dsi_phy_shared_timings *phy_shared_timings,\n\t\t\tbool is_bonded_dsi, struct msm_dsi_phy *phy);\nint msm_dsi_host_power_off(struct mipi_dsi_host *host);\nint msm_dsi_host_set_display_mode(struct mipi_dsi_host *host,\n\t\t\t\t  const struct drm_display_mode *mode);\nenum drm_mode_status msm_dsi_host_check_dsc(struct mipi_dsi_host *host,\n\t\t\t\t\t    const struct drm_display_mode *mode);\nunsigned long msm_dsi_host_get_mode_flags(struct mipi_dsi_host *host);\nint msm_dsi_host_register(struct mipi_dsi_host *host);\nvoid msm_dsi_host_unregister(struct mipi_dsi_host *host);\nvoid msm_dsi_host_set_phy_mode(struct mipi_dsi_host *host,\n\t\t\tstruct msm_dsi_phy *src_phy);\nint msm_dsi_host_set_src_pll(struct mipi_dsi_host *host,\n\t\t\tstruct msm_dsi_phy *src_phy);\nvoid msm_dsi_host_reset_phy(struct mipi_dsi_host *host);\nvoid msm_dsi_host_get_phy_clk_req(struct mipi_dsi_host *host,\n\tstruct msm_dsi_phy_clk_request *clk_req,\n\tbool is_bonded_dsi);\nvoid msm_dsi_host_destroy(struct mipi_dsi_host *host);\nint msm_dsi_host_modeset_init(struct mipi_dsi_host *host,\n\t\t\t\t\tstruct drm_device *dev);\nint msm_dsi_host_init(struct msm_dsi *msm_dsi);\nint msm_dsi_runtime_suspend(struct device *dev);\nint msm_dsi_runtime_resume(struct device *dev);\nint dsi_link_clk_set_rate_6g(struct msm_dsi_host *msm_host);\nint dsi_link_clk_set_rate_v2(struct msm_dsi_host *msm_host);\nint dsi_link_clk_enable_6g(struct msm_dsi_host *msm_host);\nint dsi_link_clk_enable_v2(struct msm_dsi_host *msm_host);\nvoid dsi_link_clk_disable_6g(struct msm_dsi_host *msm_host);\nvoid dsi_link_clk_disable_v2(struct msm_dsi_host *msm_host);\nunsigned long dsi_byte_clk_get_rate(struct mipi_dsi_host *host, bool is_bonded_dsi,\n\t\t\t\t    const struct drm_display_mode *mode);\nint dsi_tx_buf_alloc_6g(struct msm_dsi_host *msm_host, int size);\nint dsi_tx_buf_alloc_v2(struct msm_dsi_host *msm_host, int size);\nvoid *dsi_tx_buf_get_6g(struct msm_dsi_host *msm_host);\nvoid *dsi_tx_buf_get_v2(struct msm_dsi_host *msm_host);\nvoid dsi_tx_buf_put_6g(struct msm_dsi_host *msm_host);\nvoid msm_dsi_tx_buf_free(struct mipi_dsi_host *mipi_host);\nint dsi_dma_base_get_6g(struct msm_dsi_host *msm_host, uint64_t *iova);\nint dsi_dma_base_get_v2(struct msm_dsi_host *msm_host, uint64_t *iova);\nint dsi_clk_init_v2(struct msm_dsi_host *msm_host);\nint dsi_clk_init_6g_v2(struct msm_dsi_host *msm_host);\nint dsi_calc_clk_rate_v2(struct msm_dsi_host *msm_host, bool is_bonded_dsi);\nint dsi_calc_clk_rate_6g(struct msm_dsi_host *msm_host, bool is_bonded_dsi);\nvoid msm_dsi_host_snapshot(struct msm_disp_state *disp_state, struct mipi_dsi_host *host);\nvoid msm_dsi_host_test_pattern_en(struct mipi_dsi_host *host);\nstruct drm_dsc_config *msm_dsi_host_get_dsc_config(struct mipi_dsi_host *host);\n\n \nstruct msm_dsi_phy;\nstruct msm_dsi_phy_shared_timings {\n\tu32 clk_post;\n\tu32 clk_pre;\n\tbool clk_pre_inc_by_2;\n\tbool byte_intf_clk_div_2;\n};\n\nstruct msm_dsi_phy_clk_request {\n\tunsigned long bitclk_rate;\n\tunsigned long escclk_rate;\n};\n\nvoid msm_dsi_phy_driver_register(void);\nvoid msm_dsi_phy_driver_unregister(void);\nint msm_dsi_phy_enable(struct msm_dsi_phy *phy,\n\t\t\tstruct msm_dsi_phy_clk_request *clk_req,\n\t\t\tstruct msm_dsi_phy_shared_timings *shared_timings);\nvoid msm_dsi_phy_disable(struct msm_dsi_phy *phy);\nvoid msm_dsi_phy_set_usecase(struct msm_dsi_phy *phy,\n\t\t\t     enum msm_dsi_phy_usecase uc);\nvoid msm_dsi_phy_pll_save_state(struct msm_dsi_phy *phy);\nint msm_dsi_phy_pll_restore_state(struct msm_dsi_phy *phy);\nvoid msm_dsi_phy_snapshot(struct msm_disp_state *disp_state, struct msm_dsi_phy *phy);\nbool msm_dsi_phy_set_continuous_clock(struct msm_dsi_phy *phy, bool enable);\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}