{
  "module_name": "dsi_phy.h",
  "hash_id": "95343fc92a2d58149994efc420cc4908863f9d87382f506b5677749176accc64",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/dsi/phy/dsi_phy.h",
  "human_readable_source": " \n \n\n#ifndef __DSI_PHY_H__\n#define __DSI_PHY_H__\n\n#include <linux/clk-provider.h>\n#include <linux/delay.h>\n#include <linux/regulator/consumer.h>\n\n#include \"dsi.h\"\n\n#define dsi_phy_read(offset) msm_readl((offset))\n#define dsi_phy_write(offset, data) msm_writel((data), (offset))\n#define dsi_phy_write_udelay(offset, data, delay_us) { msm_writel((data), (offset)); udelay(delay_us); }\n#define dsi_phy_write_ndelay(offset, data, delay_ns) { msm_writel((data), (offset)); ndelay(delay_ns); }\n\nstruct msm_dsi_phy_ops {\n\tint (*pll_init)(struct msm_dsi_phy *phy);\n\tint (*enable)(struct msm_dsi_phy *phy,\n\t\t\tstruct msm_dsi_phy_clk_request *clk_req);\n\tvoid (*disable)(struct msm_dsi_phy *phy);\n\tvoid (*save_pll_state)(struct msm_dsi_phy *phy);\n\tint (*restore_pll_state)(struct msm_dsi_phy *phy);\n\tbool (*set_continuous_clock)(struct msm_dsi_phy *phy, bool enable);\n\tint (*parse_dt_properties)(struct msm_dsi_phy *phy);\n};\n\nstruct msm_dsi_phy_cfg {\n\tconst struct regulator_bulk_data *regulator_data;\n\tint num_regulators;\n\tstruct msm_dsi_phy_ops ops;\n\n\tunsigned long\tmin_pll_rate;\n\tunsigned long\tmax_pll_rate;\n\n\tconst resource_size_t io_start[DSI_MAX];\n\tconst int num_dsi_phy;\n\tconst int quirks;\n\tbool has_phy_regulator;\n\tbool has_phy_lane;\n};\n\nextern const struct msm_dsi_phy_cfg dsi_phy_28nm_hpm_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_28nm_hpm_famb_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_28nm_lp_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_28nm_8226_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_28nm_8960_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_20nm_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_14nm_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_14nm_660_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_14nm_2290_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_14nm_8953_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_10nm_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_10nm_8998_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_7nm_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_7nm_6375_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_7nm_8150_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_7nm_7280_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_5nm_8350_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_5nm_8450_cfgs;\nextern const struct msm_dsi_phy_cfg dsi_phy_4nm_8550_cfgs;\n\nstruct msm_dsi_dphy_timing {\n\tu32 clk_zero;\n\tu32 clk_trail;\n\tu32 clk_prepare;\n\tu32 hs_exit;\n\tu32 hs_zero;\n\tu32 hs_prepare;\n\tu32 hs_trail;\n\tu32 hs_rqst;\n\tu32 ta_go;\n\tu32 ta_sure;\n\tu32 ta_get;\n\n\tstruct msm_dsi_phy_shared_timings shared_timings;\n\n\t \n\tu32 hs_rqst_ckln;\n\tu32 hs_prep_dly;\n\tu32 hs_prep_dly_ckln;\n\tu8 hs_halfbyte_en;\n\tu8 hs_halfbyte_en_ckln;\n};\n\n#define DSI_BYTE_PLL_CLK\t\t0\n#define DSI_PIXEL_PLL_CLK\t\t1\n#define NUM_PROVIDED_CLKS\t\t2\n\n#define DSI_LANE_MAX\t\t\t5\n\nstruct msm_dsi_phy {\n\tstruct platform_device *pdev;\n\tvoid __iomem *base;\n\tvoid __iomem *pll_base;\n\tvoid __iomem *reg_base;\n\tvoid __iomem *lane_base;\n\tphys_addr_t base_size;\n\tphys_addr_t pll_size;\n\tphys_addr_t reg_size;\n\tphys_addr_t lane_size;\n\tint id;\n\n\tstruct clk *ahb_clk;\n\tstruct regulator_bulk_data *supplies;\n\n\tstruct msm_dsi_dphy_timing timing;\n\tconst struct msm_dsi_phy_cfg *cfg;\n\tvoid *tuning_cfg;\n\n\tenum msm_dsi_phy_usecase usecase;\n\tbool regulator_ldo_mode;\n\tbool cphy_mode;\n\n\tstruct clk_hw *vco_hw;\n\tbool pll_on;\n\n\tstruct clk_hw_onecell_data *provided_clocks;\n\n\tbool state_saved;\n};\n\n \nint msm_dsi_dphy_timing_calc(struct msm_dsi_dphy_timing *timing,\n\t\t\t     struct msm_dsi_phy_clk_request *clk_req);\nint msm_dsi_dphy_timing_calc_v2(struct msm_dsi_dphy_timing *timing,\n\t\t\t\tstruct msm_dsi_phy_clk_request *clk_req);\nint msm_dsi_dphy_timing_calc_v3(struct msm_dsi_dphy_timing *timing,\n\t\t\t\tstruct msm_dsi_phy_clk_request *clk_req);\nint msm_dsi_dphy_timing_calc_v4(struct msm_dsi_dphy_timing *timing,\n\t\t\t\tstruct msm_dsi_phy_clk_request *clk_req);\nint msm_dsi_cphy_timing_calc_v4(struct msm_dsi_dphy_timing *timing,\n\t\t\t\tstruct msm_dsi_phy_clk_request *clk_req);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}