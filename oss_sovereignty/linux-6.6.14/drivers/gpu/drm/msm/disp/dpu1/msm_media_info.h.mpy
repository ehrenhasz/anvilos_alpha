{
  "module_name": "msm_media_info.h",
  "hash_id": "c467eb77099479210d8f667e5f8e1cb5bb0e272abfc98bb469e5161120aff20c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/disp/dpu1/msm_media_info.h",
  "human_readable_source": "#ifndef __MEDIA_INFO_H__\n#define __MEDIA_INFO_H__\n\n#ifndef MSM_MEDIA_ALIGN\n#define MSM_MEDIA_ALIGN(__sz, __align) (((__align) & ((__align) - 1)) ?\\\n\t((((__sz) + (__align) - 1) / (__align)) * (__align)) :\\\n\t(((__sz) + (__align) - 1) & (~((__align) - 1))))\n#endif\n\n#ifndef MSM_MEDIA_ROUNDUP\n#define MSM_MEDIA_ROUNDUP(__sz, __r) (((__sz) + ((__r) - 1)) / (__r))\n#endif\n\n#ifndef MSM_MEDIA_MAX\n#define MSM_MEDIA_MAX(__a, __b) ((__a) > (__b)?(__a):(__b))\n#endif\n\nenum color_fmts {\n\t \n\tCOLOR_FMT_NV12,\n\n\t \n\tCOLOR_FMT_NV21,\n\t \n\tCOLOR_FMT_NV12_MVTB,\n\t \n\tCOLOR_FMT_NV12_UBWC,\n\t \n\tCOLOR_FMT_NV12_BPP10_UBWC,\n\t \n\tCOLOR_FMT_RGBA8888,\n\t \n\tCOLOR_FMT_RGBA8888_UBWC,\n\t \n\tCOLOR_FMT_RGBA1010102_UBWC,\n\t \n\tCOLOR_FMT_RGB565_UBWC,\n\t \n\tCOLOR_FMT_P010_UBWC,\n\t \n\tCOLOR_FMT_P010,\n};\n\n#define COLOR_FMT_RGBA1010102_UBWC\tCOLOR_FMT_RGBA1010102_UBWC\n#define COLOR_FMT_RGB565_UBWC\t\tCOLOR_FMT_RGB565_UBWC\n#define COLOR_FMT_P010_UBWC\t\tCOLOR_FMT_P010_UBWC\n#define COLOR_FMT_P010\t\tCOLOR_FMT_P010\n\n \nstatic unsigned int VENUS_Y_STRIDE(int color_fmt, int width)\n{\n\tunsigned int stride = 0;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV21:\n\tcase COLOR_FMT_NV12:\n\tcase COLOR_FMT_NV12_MVTB:\n\tcase COLOR_FMT_NV12_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width, 128);\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width, 192);\n\t\tstride = MSM_MEDIA_ALIGN(stride * 4 / 3, 256);\n\t\tbreak;\n\tcase COLOR_FMT_P010_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width * 2, 256);\n\t\tbreak;\n\tcase COLOR_FMT_P010:\n\t\tstride = MSM_MEDIA_ALIGN(width * 2, 128);\n\t\tbreak;\n\t}\n\n\treturn stride;\n}\n\n \nstatic unsigned int VENUS_UV_STRIDE(int color_fmt, int width)\n{\n\tunsigned int stride = 0;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV21:\n\tcase COLOR_FMT_NV12:\n\tcase COLOR_FMT_NV12_MVTB:\n\tcase COLOR_FMT_NV12_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width, 128);\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width, 192);\n\t\tstride = MSM_MEDIA_ALIGN(stride * 4 / 3, 256);\n\t\tbreak;\n\tcase COLOR_FMT_P010_UBWC:\n\t\tstride = MSM_MEDIA_ALIGN(width * 2, 256);\n\t\tbreak;\n\tcase COLOR_FMT_P010:\n\t\tstride = MSM_MEDIA_ALIGN(width * 2, 128);\n\t\tbreak;\n\t}\n\n\treturn stride;\n}\n\n \nstatic unsigned int VENUS_Y_SCANLINES(int color_fmt, int height)\n{\n\tunsigned int sclines = 0;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV21:\n\tcase COLOR_FMT_NV12:\n\tcase COLOR_FMT_NV12_MVTB:\n\tcase COLOR_FMT_NV12_UBWC:\n\tcase COLOR_FMT_P010:\n\t\tsclines = MSM_MEDIA_ALIGN(height, 32);\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\t\tsclines = MSM_MEDIA_ALIGN(height, 16);\n\t\tbreak;\n\t}\n\n\treturn sclines;\n}\n\n \nstatic unsigned int VENUS_UV_SCANLINES(int color_fmt, int height)\n{\n\tunsigned int sclines = 0;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV21:\n\tcase COLOR_FMT_NV12:\n\tcase COLOR_FMT_NV12_MVTB:\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\tcase COLOR_FMT_P010:\n\t\tsclines = MSM_MEDIA_ALIGN((height + 1) >> 1, 16);\n\t\tbreak;\n\tcase COLOR_FMT_NV12_UBWC:\n\t\tsclines = MSM_MEDIA_ALIGN((height + 1) >> 1, 32);\n\t\tbreak;\n\t}\n\n\treturn sclines;\n}\n\n \nstatic unsigned int VENUS_Y_META_STRIDE(int color_fmt, int width)\n{\n\tint y_tile_width = 0, y_meta_stride;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV12_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\t\ty_tile_width = 32;\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\t\ty_tile_width = 48;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\ty_meta_stride = MSM_MEDIA_ROUNDUP(width, y_tile_width);\n\treturn MSM_MEDIA_ALIGN(y_meta_stride, 64);\n}\n\n \nstatic unsigned int VENUS_Y_META_SCANLINES(int color_fmt, int height)\n{\n\tint y_tile_height = 0, y_meta_scanlines;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV12_UBWC:\n\t\ty_tile_height = 8;\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\t\ty_tile_height = 4;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\ty_meta_scanlines = MSM_MEDIA_ROUNDUP(height, y_tile_height);\n\treturn MSM_MEDIA_ALIGN(y_meta_scanlines, 16);\n}\n\n \nstatic unsigned int VENUS_UV_META_STRIDE(int color_fmt, int width)\n{\n\tint uv_tile_width = 0, uv_meta_stride;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV12_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\t\tuv_tile_width = 16;\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\t\tuv_tile_width = 24;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\tuv_meta_stride = MSM_MEDIA_ROUNDUP((width+1)>>1, uv_tile_width);\n\treturn MSM_MEDIA_ALIGN(uv_meta_stride, 64);\n}\n\n \nstatic unsigned int VENUS_UV_META_SCANLINES(int color_fmt, int height)\n{\n\tint uv_tile_height = 0, uv_meta_scanlines;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_NV12_UBWC:\n\t\tuv_tile_height = 8;\n\t\tbreak;\n\tcase COLOR_FMT_NV12_BPP10_UBWC:\n\tcase COLOR_FMT_P010_UBWC:\n\t\tuv_tile_height = 4;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\tuv_meta_scanlines = MSM_MEDIA_ROUNDUP((height+1)>>1, uv_tile_height);\n\treturn MSM_MEDIA_ALIGN(uv_meta_scanlines, 16);\n}\n\nstatic unsigned int VENUS_RGB_STRIDE(int color_fmt, int width)\n{\n\tunsigned int alignment = 0, bpp = 4;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_RGBA8888:\n\t\talignment = 128;\n\t\tbreak;\n\tcase COLOR_FMT_RGB565_UBWC:\n\t\talignment = 256;\n\t\tbpp = 2;\n\t\tbreak;\n\tcase COLOR_FMT_RGBA8888_UBWC:\n\tcase COLOR_FMT_RGBA1010102_UBWC:\n\t\talignment = 256;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\treturn MSM_MEDIA_ALIGN(width * bpp, alignment);\n}\n\nstatic unsigned int VENUS_RGB_SCANLINES(int color_fmt, int height)\n{\n\tunsigned int alignment = 0;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_RGBA8888:\n\t\talignment = 32;\n\t\tbreak;\n\tcase COLOR_FMT_RGBA8888_UBWC:\n\tcase COLOR_FMT_RGBA1010102_UBWC:\n\tcase COLOR_FMT_RGB565_UBWC:\n\t\talignment = 16;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n\n\treturn MSM_MEDIA_ALIGN(height, alignment);\n}\n\nstatic unsigned int VENUS_RGB_META_STRIDE(int color_fmt, int width)\n{\n\tint rgb_meta_stride;\n\n\tif (!width)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_RGBA8888_UBWC:\n\tcase COLOR_FMT_RGBA1010102_UBWC:\n\tcase COLOR_FMT_RGB565_UBWC:\n\t\trgb_meta_stride = MSM_MEDIA_ROUNDUP(width, 16);\n\t\treturn MSM_MEDIA_ALIGN(rgb_meta_stride, 64);\n\t}\n\n\treturn 0;\n}\n\nstatic unsigned int VENUS_RGB_META_SCANLINES(int color_fmt, int height)\n{\n\tint rgb_meta_scanlines;\n\n\tif (!height)\n\t\treturn 0;\n\n\tswitch (color_fmt) {\n\tcase COLOR_FMT_RGBA8888_UBWC:\n\tcase COLOR_FMT_RGBA1010102_UBWC:\n\tcase COLOR_FMT_RGB565_UBWC:\n\t\trgb_meta_scanlines = MSM_MEDIA_ROUNDUP(height, 4);\n\t\treturn MSM_MEDIA_ALIGN(rgb_meta_scanlines, 16);\n\t}\n\n\treturn 0;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}