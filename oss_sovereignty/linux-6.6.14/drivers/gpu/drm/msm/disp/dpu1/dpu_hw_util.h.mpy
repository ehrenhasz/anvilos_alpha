{
  "module_name": "dpu_hw_util.h",
  "hash_id": "d859d25467e69479149ccc9b2018018caacafdbb6361d3a5d8d65cba38d7d7ec",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_util.h",
  "human_readable_source": " \n \n\n#ifndef _DPU_HW_UTIL_H\n#define _DPU_HW_UTIL_H\n\n#include <linux/io.h>\n#include <linux/slab.h>\n#include \"dpu_hw_mdss.h\"\n#include \"dpu_hw_catalog.h\"\n\n#define REG_MASK(n)                     ((BIT(n)) - 1)\n#define MISR_FRAME_COUNT                0x1\n#define MISR_CTRL_ENABLE                BIT(8)\n#define MISR_CTRL_STATUS                BIT(9)\n#define MISR_CTRL_STATUS_CLEAR          BIT(10)\n#define MISR_CTRL_FREE_RUN_MASK         BIT(31)\n\n \nstruct dpu_hw_blk_reg_map {\n\tvoid __iomem *blk_addr;\n\tu32 log_mask;\n};\n\n \nstruct dpu_hw_blk {\n\t \n};\n\n \nstruct dpu_hw_scaler3_de_cfg {\n\tu32 enable;\n\tint16_t sharpen_level1;\n\tint16_t sharpen_level2;\n\tuint16_t clip;\n\tuint16_t limit;\n\tuint16_t thr_quiet;\n\tuint16_t thr_dieout;\n\tuint16_t thr_low;\n\tuint16_t thr_high;\n\tuint16_t prec_shift;\n\tint16_t adjust_a[DPU_MAX_DE_CURVES];\n\tint16_t adjust_b[DPU_MAX_DE_CURVES];\n\tint16_t adjust_c[DPU_MAX_DE_CURVES];\n};\n\n\n \nstruct dpu_hw_scaler3_cfg {\n\tu32 enable;\n\tu32 dir_en;\n\tint32_t init_phase_x[DPU_MAX_PLANES];\n\tint32_t phase_step_x[DPU_MAX_PLANES];\n\tint32_t init_phase_y[DPU_MAX_PLANES];\n\tint32_t phase_step_y[DPU_MAX_PLANES];\n\n\tu32 preload_x[DPU_MAX_PLANES];\n\tu32 preload_y[DPU_MAX_PLANES];\n\tu32 src_width[DPU_MAX_PLANES];\n\tu32 src_height[DPU_MAX_PLANES];\n\n\tu32 dst_width;\n\tu32 dst_height;\n\n\tu32 y_rgb_filter_cfg;\n\tu32 uv_filter_cfg;\n\tu32 alpha_filter_cfg;\n\tu32 blend_cfg;\n\n\tu32 lut_flag;\n\tu32 dir_lut_idx;\n\n\tu32 y_rgb_cir_lut_idx;\n\tu32 uv_cir_lut_idx;\n\tu32 y_rgb_sep_lut_idx;\n\tu32 uv_sep_lut_idx;\n\tu32 *dir_lut;\n\tsize_t dir_len;\n\tu32 *cir_lut;\n\tsize_t cir_len;\n\tu32 *sep_lut;\n\tsize_t sep_len;\n\n\t \n\tstruct dpu_hw_scaler3_de_cfg de;\n\n\tu32 dir_weight;\n};\n\n \nstruct dpu_drm_pix_ext_v1 {\n\t \n\tint32_t num_ext_pxls_lr[DPU_MAX_PLANES];\n\tint32_t num_ext_pxls_tb[DPU_MAX_PLANES];\n\n\t \n\tint32_t left_ftch[DPU_MAX_PLANES];\n\tint32_t right_ftch[DPU_MAX_PLANES];\n\tint32_t top_ftch[DPU_MAX_PLANES];\n\tint32_t btm_ftch[DPU_MAX_PLANES];\n\t \n\tint32_t left_rpt[DPU_MAX_PLANES];\n\tint32_t right_rpt[DPU_MAX_PLANES];\n\tint32_t top_rpt[DPU_MAX_PLANES];\n\tint32_t btm_rpt[DPU_MAX_PLANES];\n\n};\n\n \nstruct dpu_drm_de_v1 {\n\tuint32_t enable;\n\tint16_t sharpen_level1;\n\tint16_t sharpen_level2;\n\tuint16_t clip;\n\tuint16_t limit;\n\tuint16_t thr_quiet;\n\tuint16_t thr_dieout;\n\tuint16_t thr_low;\n\tuint16_t thr_high;\n\tuint16_t prec_shift;\n\tint16_t adjust_a[DPU_MAX_DE_CURVES];\n\tint16_t adjust_b[DPU_MAX_DE_CURVES];\n\tint16_t adjust_c[DPU_MAX_DE_CURVES];\n};\n\n \nstruct dpu_drm_scaler_v2 {\n\t \n\tuint32_t enable;\n\tuint32_t dir_en;\n\n\t \n\tstruct dpu_drm_pix_ext_v1 pe;\n\n\t \n\tuint32_t horz_decimate;\n\tuint32_t vert_decimate;\n\n\t \n\tint32_t init_phase_x[DPU_MAX_PLANES];\n\tint32_t phase_step_x[DPU_MAX_PLANES];\n\tint32_t init_phase_y[DPU_MAX_PLANES];\n\tint32_t phase_step_y[DPU_MAX_PLANES];\n\n\tuint32_t preload_x[DPU_MAX_PLANES];\n\tuint32_t preload_y[DPU_MAX_PLANES];\n\tuint32_t src_width[DPU_MAX_PLANES];\n\tuint32_t src_height[DPU_MAX_PLANES];\n\n\tuint32_t dst_width;\n\tuint32_t dst_height;\n\n\tuint32_t y_rgb_filter_cfg;\n\tuint32_t uv_filter_cfg;\n\tuint32_t alpha_filter_cfg;\n\tuint32_t blend_cfg;\n\n\tuint32_t lut_flag;\n\tuint32_t dir_lut_idx;\n\n\t \n\tuint32_t y_rgb_cir_lut_idx;\n\tuint32_t uv_cir_lut_idx;\n\tuint32_t y_rgb_sep_lut_idx;\n\tuint32_t uv_sep_lut_idx;\n\n\t \n\tstruct dpu_drm_de_v1 de;\n};\n\n \nstruct dpu_hw_qos_cfg {\n\tu32 danger_lut;\n\tu32 safe_lut;\n\tu64 creq_lut;\n\tbool danger_safe_en;\n};\n\nu32 *dpu_hw_util_get_log_mask_ptr(void);\n\nvoid dpu_reg_write(struct dpu_hw_blk_reg_map *c,\n\t\tu32 reg_off,\n\t\tu32 val,\n\t\tconst char *name);\nint dpu_reg_read(struct dpu_hw_blk_reg_map *c, u32 reg_off);\n\n#define DPU_REG_WRITE(c, off, val) dpu_reg_write(c, off, val, #off)\n#define DPU_REG_READ(c, off) dpu_reg_read(c, off)\n\nvoid *dpu_hw_util_get_dir(void);\n\nvoid dpu_hw_setup_scaler3(struct dpu_hw_blk_reg_map *c,\n\t\tstruct dpu_hw_scaler3_cfg *scaler3_cfg,\n\t\tu32 scaler_offset, u32 scaler_version,\n\t\tconst struct dpu_format *format);\n\nu32 dpu_hw_get_scaler3_ver(struct dpu_hw_blk_reg_map *c,\n\t\tu32 scaler_offset);\n\nvoid dpu_hw_csc_setup(struct dpu_hw_blk_reg_map  *c,\n\t\tu32 csc_reg_off,\n\t\tconst struct dpu_csc_cfg *data, bool csc10);\n\nvoid dpu_setup_cdp(struct dpu_hw_blk_reg_map *c, u32 offset,\n\t\t   const struct dpu_format *fmt, bool enable);\n\nu64 _dpu_hw_get_qos_lut(const struct dpu_qos_lut_tbl *tbl,\n\t\tu32 total_fl);\n\nvoid _dpu_hw_setup_qos_lut(struct dpu_hw_blk_reg_map *c, u32 offset,\n\t\t\t   bool qos_8lvl,\n\t\t\t   const struct dpu_hw_qos_cfg *cfg);\n\nvoid dpu_hw_setup_misr(struct dpu_hw_blk_reg_map *c,\n\t\tu32 misr_ctrl_offset, u8 input_sel);\n\nint dpu_hw_collect_misr(struct dpu_hw_blk_reg_map *c,\n\t\tu32 misr_ctrl_offset,\n\t\tu32 misr_signature_offset,\n\t\tu32 *misr_value);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}