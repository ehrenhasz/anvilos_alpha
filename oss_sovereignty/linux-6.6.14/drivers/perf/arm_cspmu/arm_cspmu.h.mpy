{
  "module_name": "arm_cspmu.h",
  "hash_id": "eef78b67013fca892820b7cefac49aefa84c0fcc600e7d034ca80ede8ec13b73",
  "original_prompt": "Ingested from linux-6.6.14/drivers/perf/arm_cspmu/arm_cspmu.h",
  "human_readable_source": " \n\n#ifndef __ARM_CSPMU_H__\n#define __ARM_CSPMU_H__\n\n#include <linux/bitfield.h>\n#include <linux/cpumask.h>\n#include <linux/device.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/perf_event.h>\n#include <linux/platform_device.h>\n#include <linux/types.h>\n\n#define to_arm_cspmu(p) (container_of(p, struct arm_cspmu, pmu))\n\n#define ARM_CSPMU_EXT_ATTR(_name, _func, _config)\t\t\t\\\n\t(&((struct dev_ext_attribute[]){\t\t\t\t\\\n\t\t{\t\t\t\t\t\t\t\\\n\t\t\t.attr = __ATTR(_name, 0444, _func, NULL),\t\\\n\t\t\t.var = (void *)_config\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t})[0].attr.attr)\n\n#define ARM_CSPMU_FORMAT_ATTR(_name, _config)\t\t\t\t\\\n\tARM_CSPMU_EXT_ATTR(_name, arm_cspmu_sysfs_format_show, (char *)_config)\n\n#define ARM_CSPMU_EVENT_ATTR(_name, _config)\t\t\t\t\\\n\tPMU_EVENT_ATTR_ID(_name, arm_cspmu_sysfs_event_show, _config)\n\n\n \n#define ARM_CSPMU_EVENT_MASK\tGENMASK_ULL(63, 0)\n\n \n#define ARM_CSPMU_FILTER_MASK\tGENMASK_ULL(63, 0)\n\n \n#define ARM_CSPMU_FORMAT_EVENT_ATTR\t\\\n\tARM_CSPMU_FORMAT_ATTR(event, \"config:0-32\")\n\n \n#define ARM_CSPMU_FORMAT_FILTER_ATTR\t\\\n\tARM_CSPMU_FORMAT_ATTR(filter, \"config1:0-31\")\n\n \n#define ARM_CSPMU_EVT_CYCLES_DEFAULT\t(0x1ULL << 32)\n\n \n#define ARM_CSPMU_MAX_HW_CNTRS\t\t256\n\n \n#define ARM_CSPMU_CYCLE_CNTR_IDX\t31\n\n \n#define ARM_CSPMU_PMIIDR_IMPLEMENTER\tGENMASK(11, 0)\n#define ARM_CSPMU_PMIIDR_PRODUCTID\tGENMASK(31, 20)\n\nstruct arm_cspmu;\n\n \nstruct arm_cspmu_hw_events {\n\t \n\tstruct perf_event **events;\n\n\t \n\tDECLARE_BITMAP(used_ctrs, ARM_CSPMU_MAX_HW_CNTRS);\n};\n\n \nstruct arm_cspmu_impl_ops {\n\t \n\tstruct attribute **(*get_event_attrs)(const struct arm_cspmu *cspmu);\n\t \n\tstruct attribute **(*get_format_attrs)(const struct arm_cspmu *cspmu);\n\t \n\tconst char *(*get_identifier)(const struct arm_cspmu *cspmu);\n\t \n\tconst char *(*get_name)(const struct arm_cspmu *cspmu);\n\t \n\tbool (*is_cycle_counter_event)(const struct perf_event *event);\n\t \n\tu32 (*event_type)(const struct perf_event *event);\n\t \n\tu32 (*event_filter)(const struct perf_event *event);\n\t \n\tumode_t (*event_attr_is_visible)(struct kobject *kobj,\n\t\t\t\t\t struct attribute *attr, int unused);\n};\n\n \nstruct arm_cspmu_impl {\n\tu32 pmiidr;\n\tstruct arm_cspmu_impl_ops ops;\n\tvoid *ctx;\n};\n\n \nstruct arm_cspmu {\n\tstruct pmu pmu;\n\tstruct device *dev;\n\tconst char *name;\n\tconst char *identifier;\n\tvoid __iomem *base0;\n\tvoid __iomem *base1;\n\tcpumask_t associated_cpus;\n\tcpumask_t active_cpu;\n\tstruct hlist_node cpuhp_node;\n\tint irq;\n\n\tbool has_atomic_dword;\n\tu32 pmcfgr;\n\tu32 num_logical_ctrs;\n\tu32 num_set_clr_reg;\n\tint cycle_counter_logical_idx;\n\n\tstruct arm_cspmu_hw_events hw_events;\n\n\tstruct arm_cspmu_impl impl;\n};\n\n \nssize_t arm_cspmu_sysfs_event_show(struct device *dev,\n\t\t\t\t   struct device_attribute *attr,\n\t\t\t\t   char *buf);\n\n \nssize_t arm_cspmu_sysfs_format_show(struct device *dev,\n\t\t\t\t    struct device_attribute *attr,\n\t\t\t\t    char *buf);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}