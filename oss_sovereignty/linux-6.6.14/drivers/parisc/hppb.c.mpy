{
  "module_name": "hppb.c",
  "hash_id": "90ac4bcb59403aa20dcf428271d53c8e71704e21be1650c9bfb77a17694ae7bd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/parisc/hppb.c",
  "human_readable_source": "\n \n\n#include <linux/types.h>\n#include <linux/init.h>\n#include <linux/mm.h>\n#include <linux/slab.h>\n#include <linux/dma-mapping.h>\n#include <linux/ioport.h>\n\n#include <asm/io.h>\n#include <asm/hardware.h>\n#include <asm/parisc-device.h>\n\n#include \"iommu.h\"\n\nstruct hppb_card {\n\tunsigned long hpa;\n\tstruct resource mmio_region;\n\tstruct hppb_card *next;\n};\n\nstatic struct hppb_card hppb_card_head = {\n\t.hpa = 0,\n\t.next = NULL,\n};\n\n#define IO_IO_LOW  offsetof(struct bc_module, io_io_low)\n#define IO_IO_HIGH offsetof(struct bc_module, io_io_high)\n\n \nstatic int __init hppb_probe(struct parisc_device *dev)\n{\n\tint status;\n\tstruct hppb_card *card = &hppb_card_head;\n\n\twhile(card->next) {\n\t\tcard = card->next;\n\t}\n\n\tif(card->hpa) {\n\t\tcard->next = kzalloc(sizeof(struct hppb_card), GFP_KERNEL);\n\t\tif(!card->next) {\n\t\t\tprintk(KERN_ERR \"HP-PB: Unable to allocate memory.\\n\");\n\t\t\treturn 1;\n\t\t}\n\t\tcard = card->next;\n\t}\n\n\tcard->hpa = dev->hpa.start;\n\tcard->mmio_region.name = \"HP-PB Bus\";\n\tcard->mmio_region.flags = IORESOURCE_MEM;\n\n\tcard->mmio_region.start = gsc_readl(dev->hpa.start + IO_IO_LOW);\n\tcard->mmio_region.end = gsc_readl(dev->hpa.start + IO_IO_HIGH) - 1;\n\n\tstatus = ccio_request_resource(dev, &card->mmio_region);\n\n\tpr_info(\"Found GeckoBoa at %pap, bus space %pR,%s claimed.\\n\",\n\t\t\t&dev->hpa.start,\n\t\t\t&card->mmio_region,\n\t\t\t(status < 0) ? \" not\":\"\" );\n\n        return 0;\n}\n\nstatic const struct parisc_device_id hppb_tbl[] __initconst = {\n        { HPHW_BCPORT, HVERSION_REV_ANY_ID, 0x500, 0xc },  \n        { HPHW_BCPORT, 0x0, 0x501, 0xc },  \n        { HPHW_BCPORT, 0x0, 0x502, 0xc },  \n        { HPHW_BCPORT, 0x0, 0x503, 0xc },  \n        { 0, }\n};\n\nstatic struct parisc_driver hppb_driver __refdata = {\n        .name =         \"gecko_boa\",\n        .id_table =     hppb_tbl,\n\t.probe =        hppb_probe,\n};\n\n \nstatic int __init hppb_init(void)\n{\n        return register_parisc_driver(&hppb_driver);\n}\narch_initcall(hppb_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}