{
  "module_name": "parport_serial.c",
  "hash_id": "14de4cc167a6794794864145b17d97610e9c072c30ef813a90f183b82e474738",
  "original_prompt": "Ingested from linux-6.6.14/drivers/parport/parport_serial.c",
  "human_readable_source": "\n \n\n#include <linux/interrupt.h>\n#include <linux/module.h>\n#include <linux/parport.h>\n#include <linux/parport_pc.h>\n#include <linux/pci.h>\n#include <linux/slab.h>\n#include <linux/types.h>\n\n#include <linux/8250_pci.h>\n\nenum parport_pc_pci_cards {\n\ttitan_110l = 0,\n\ttitan_210l,\n\tnetmos_9xx5_combo,\n\tnetmos_9855,\n\tnetmos_9855_2p,\n\tnetmos_9900,\n\tnetmos_9900_2p,\n\tnetmos_99xx_1p,\n\tavlab_1s1p,\n\tavlab_1s2p,\n\tavlab_2s1p,\n\tsiig_1s1p_10x,\n\tsiig_2s1p_10x,\n\tsiig_2p1s_20x,\n\tsiig_1s1p_20x,\n\tsiig_2s1p_20x,\n\ttimedia_4078a,\n\ttimedia_4079h,\n\ttimedia_4085h,\n\ttimedia_4088a,\n\ttimedia_4089a,\n\ttimedia_4095a,\n\ttimedia_4096a,\n\ttimedia_4078u,\n\ttimedia_4079a,\n\ttimedia_4085u,\n\ttimedia_4079r,\n\ttimedia_4079s,\n\ttimedia_4079d,\n\ttimedia_4079e,\n\ttimedia_4079f,\n\ttimedia_9079a,\n\ttimedia_9079b,\n\ttimedia_9079c,\n\twch_ch353_1s1p,\n\twch_ch353_2s1p,\n\twch_ch382_0s1p,\n\twch_ch382_2s1p,\n\tbrainboxes_5s1p,\n\tsunix_4008a,\n\tsunix_5069a,\n\tsunix_5079a,\n\tsunix_5099a,\n\tbrainboxes_uc257,\n\tbrainboxes_is300,\n\tbrainboxes_uc414,\n\tbrainboxes_px263,\n};\n\n \nstruct parport_pc_pci {\n\tint numports;\n\tstruct {  \n\t\tint lo;\n\t\tint hi;  \n\t} addr[4];\n\n\t \n\tint (*preinit_hook) (struct pci_dev *pdev, struct parport_pc_pci *card,\n\t\t\t\tint autoirq, int autodma);\n\n\t \n\tvoid (*postinit_hook) (struct pci_dev *pdev,\n\t\t\t\tstruct parport_pc_pci *card, int failed);\n};\n\nstatic int netmos_parallel_init(struct pci_dev *dev, struct parport_pc_pci *par,\n\t\t\t\tint autoirq, int autodma)\n{\n\t \n\tif (dev->device == PCI_DEVICE_ID_NETMOS_9835 &&\n\t\t\tdev->subsystem_vendor == PCI_VENDOR_ID_IBM &&\n\t\t\tdev->subsystem_device == 0x0299)\n\t\treturn -ENODEV;\n\n\tif (dev->device == PCI_DEVICE_ID_NETMOS_9912) {\n\t\tpar->numports = 1;\n\t} else {\n\t\t \n\t\tpar->numports = (dev->subsystem_device & 0xf0) >> 4;\n\t\tif (par->numports > ARRAY_SIZE(par->addr))\n\t\t\tpar->numports = ARRAY_SIZE(par->addr);\n\t}\n\n\treturn 0;\n}\n\nstatic struct parport_pc_pci cards[] = {\n\t \t\t{ 1, { { 3, -1 }, } },\n\t \t\t{ 1, { { 3, -1 }, } },\n\t \t\t{ 1, { { 2, -1 }, }, netmos_parallel_init },\n\t \t\t{ 1, { { 0, -1 }, }, netmos_parallel_init },\n\t \t\t{ 2, { { 0, -1 }, { 2, -1 }, } },\n\t \t\t{1, { { 3, 4 }, }, netmos_parallel_init },\n\t \t\t{2, { { 0, 1 }, { 3, 4 }, } },\n\t \t\t{1, { { 0, 1 }, } },\n\t \t\t{ 1, { { 1, 2}, } },\n\t \t\t{ 2, { { 1, 2}, { 3, 4 },} },\n\t \t\t{ 1, { { 2, 3}, } },\n\t \t\t{ 1, { { 3, 4 }, } },\n\t \t\t{ 1, { { 4, 5 }, } },\n\t \t\t{ 2, { { 1, 2 }, { 3, 4 }, } },\n\t \t\t{ 1, { { 1, 2 }, } },\n\t \t\t{ 1, { { 2, 3 }, } },\n\t \t\t{ 1, { { 2, -1 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 2, { { 2, -1 }, { 4, -1 }, } },\n\t              { 2, { { 2, 3 }, { 4, 5 }, } },\n\t              { 2, { { 2, 3 }, { 4, 5 }, } },\n\t              { 2, { { 2, 3 }, { 4, 5 }, } },\n\t              { 2, { { 2, 3 }, { 4, 5 }, } },\n\t              { 1, { { 2, -1 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 2, { { 2, -1 }, { 4, -1 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 2, 3 }, } },\n\t              { 1, { { 1, -1}, } },\n\t              { 1, { { 2, -1}, } },\n\t \t\t{ 1, { { 2, -1}, } },\n\t              { 1, { { 2, -1}, } },\n\t            { 1, { { 3, -1 }, } },\n\t \t\t{ 1, { { 1, 2 }, } },\n\t \t\t{ 1, { { 1, 2 }, } },\n\t \t\t{ 1, { { 1, 2 }, } },\n\t \t\t{ 1, { { 1, 2 }, } },\n\t \t{ 1, { { 3, -1 }, } },\n\t \t{ 1, { { 3, -1 }, } },\n\t   { 1, { { 3, -1 }, } },\n\t \t{ 1, { { 3, -1 }, } },\n};\n\nstatic struct pci_device_id parport_serial_pci_tbl[] = {\n\t \n\t{ PCI_VENDOR_ID_TITAN, PCI_DEVICE_ID_TITAN_110L,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, titan_110l },\n\t{ PCI_VENDOR_ID_TITAN, PCI_DEVICE_ID_TITAN_210L,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, titan_210l },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9735,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, netmos_9xx5_combo },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9745,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, netmos_9xx5_combo },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9835,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, netmos_9xx5_combo },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9845,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, netmos_9xx5_combo },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9855,\n\t  0x1000, 0x0020, 0, 0, netmos_9855_2p },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9855,\n\t  0x1000, 0x0022, 0, 0, netmos_9855_2p },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9855,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, netmos_9855 },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9900,\n\t  0xA000, 0x3011, 0, 0, netmos_9900 },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9900,\n\t  0xA000, 0x3012, 0, 0, netmos_9900 },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9900,\n\t  0xA000, 0x3020, 0, 0, netmos_9900_2p },\n\t{ PCI_VENDOR_ID_NETMOS, PCI_DEVICE_ID_NETMOS_9912,\n\t  0xA000, 0x2000, 0, 0, netmos_99xx_1p },\n\t \n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2110,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s1p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2111,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s1p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2112,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s1p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2140,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s2p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2141,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s2p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2142,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_1s2p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2160,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_2s1p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2161,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_2s1p },\n\t{ PCI_VENDOR_ID_AFAVLAB, 0x2162,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, avlab_2s1p },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_10x_550,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_1s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_10x_650,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_1s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_10x_850,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_1s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_10x_550,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_10x_650,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_10x_850,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_10x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2P1S_20x_550,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2p1s_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2P1S_20x_650,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2p1s_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2P1S_20x_850,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2p1s_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_20x_550,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_20x_650,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_1s1p_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_1S1P_20x_850,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_1s1p_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_20x_550,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_20x_650,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_20x },\n\t{ PCI_VENDOR_ID_SIIG, PCI_DEVICE_ID_SIIG_2S1P_20x_850,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, siig_2s1p_20x },\n\t \n\t{ 0x1409, 0x7168, 0x1409, 0x4078, 0, 0, timedia_4078a },\n\t{ 0x1409, 0x7168, 0x1409, 0x4079, 0, 0, timedia_4079h },\n\t{ 0x1409, 0x7168, 0x1409, 0x4085, 0, 0, timedia_4085h },\n\t{ 0x1409, 0x7168, 0x1409, 0x4088, 0, 0, timedia_4088a },\n\t{ 0x1409, 0x7168, 0x1409, 0x4089, 0, 0, timedia_4089a },\n\t{ 0x1409, 0x7168, 0x1409, 0x4095, 0, 0, timedia_4095a },\n\t{ 0x1409, 0x7168, 0x1409, 0x4096, 0, 0, timedia_4096a },\n\t{ 0x1409, 0x7168, 0x1409, 0x5078, 0, 0, timedia_4078u },\n\t{ 0x1409, 0x7168, 0x1409, 0x5079, 0, 0, timedia_4079a },\n\t{ 0x1409, 0x7168, 0x1409, 0x5085, 0, 0, timedia_4085u },\n\t{ 0x1409, 0x7168, 0x1409, 0x6079, 0, 0, timedia_4079r },\n\t{ 0x1409, 0x7168, 0x1409, 0x7079, 0, 0, timedia_4079s },\n\t{ 0x1409, 0x7168, 0x1409, 0x8079, 0, 0, timedia_4079d },\n\t{ 0x1409, 0x7168, 0x1409, 0x9079, 0, 0, timedia_4079e },\n\t{ 0x1409, 0x7168, 0x1409, 0xa079, 0, 0, timedia_4079f },\n\t{ 0x1409, 0x7168, 0x1409, 0xb079, 0, 0, timedia_9079a },\n\t{ 0x1409, 0x7168, 0x1409, 0xc079, 0, 0, timedia_9079b },\n\t{ 0x1409, 0x7168, 0x1409, 0xd079, 0, 0, timedia_9079c },\n\n\t \n\t{ 0x4348, 0x5053, PCI_ANY_ID, PCI_ANY_ID, 0, 0, wch_ch353_1s1p},\n\t{ 0x4348, 0x7053, 0x4348, 0x3253, 0, 0, wch_ch353_2s1p},\n\t{ 0x1c00, 0x3050, 0x1c00, 0x3050, 0, 0, wch_ch382_0s1p},\n\t{ 0x1c00, 0x3250, 0x1c00, 0x3250, 0, 0, wch_ch382_2s1p},\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x4100,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_5s1p },\n\n\t \n\t{ PCI_VENDOR_ID_SUNIX, PCI_DEVICE_ID_SUNIX_1999, PCI_VENDOR_ID_SUNIX,\n\t  0x0100, 0, 0, sunix_4008a },\n\t{ PCI_VENDOR_ID_SUNIX, PCI_DEVICE_ID_SUNIX_1999, PCI_VENDOR_ID_SUNIX,\n\t  0x0101, 0, 0, sunix_5069a },\n\t{ PCI_VENDOR_ID_SUNIX, PCI_DEVICE_ID_SUNIX_1999, PCI_VENDOR_ID_SUNIX,\n\t  0x0102, 0, 0, sunix_5079a },\n\t{ PCI_VENDOR_ID_SUNIX, PCI_DEVICE_ID_SUNIX_1999, PCI_VENDOR_ID_SUNIX,\n\t  0x0104, 0, 0, sunix_5099a },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0bc1,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0bc2,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0861,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0862,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0863,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0e61,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc414 },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0981,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0982,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_uc257 },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x0da0,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_is300 },\n\n\t \n\t{ PCI_VENDOR_ID_INTASHIELD, 0x402c,\n\t  PCI_ANY_ID, PCI_ANY_ID, 0, 0, brainboxes_px263 },\n\n\t{ 0, }  \n};\nMODULE_DEVICE_TABLE(pci,parport_serial_pci_tbl);\n\n \nstatic struct pciserial_board pci_parport_serial_boards[] = {\n\t[titan_110l] = {\n\t\t.flags\t\t= FL_BASE1 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[titan_210l] = {\n\t\t.flags\t\t= FL_BASE1 | FL_BASE_BARS,\n\t\t.num_ports\t= 2,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_9xx5_combo] = {\n\t\t.flags\t\t= FL_BASE0 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_9855] = {\n\t\t.flags\t\t= FL_BASE2 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_9855_2p] = {\n\t\t.flags\t\t= FL_BASE4 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_9900] = {  \n\t\t.flags\t\t= FL_BASE0 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_9900_2p] = {    \n\t\t.flags\t\t= FL_BASE0,\n\t\t.num_ports\t= 0,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[netmos_99xx_1p] = {    \n\t\t.flags\t\t= FL_BASE0,\n\t\t.num_ports\t= 0,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[avlab_1s1p] = {  \n\t\t.flags\t\t= FL_BASE0 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[avlab_1s2p] = {  \n\t\t.flags\t\t= FL_BASE0 | FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[avlab_2s1p] = {  \n\t\t.flags\t\t= FL_BASE0 | FL_BASE_BARS,\n\t\t.num_ports\t= 2,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[siig_1s1p_10x] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 460800,\n\t\t.uart_offset\t= 8,\n\t},\n\t[siig_2s1p_10x] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[siig_2p1s_20x] = {\n\t\t.flags\t\t= FL_BASE0,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[siig_1s1p_20x] = {\n\t\t.flags\t\t= FL_BASE0,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[siig_2s1p_20x] = {\n\t\t.flags\t\t= FL_BASE0,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4078a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079h] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4085h] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4088a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4089a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4095a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4096a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4078u] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4085u] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079r] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079s] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079d] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079e] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_4079f] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_9079a] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_9079b] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[timedia_9079c] = {\n\t\t.flags\t\t= FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[wch_ch353_1s1p] = {\n\t\t.flags          = FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports      = 1,\n\t\t.base_baud      = 115200,\n\t\t.uart_offset    = 8,\n\t},\n\t[wch_ch353_2s1p] = {\n\t\t.flags          = FL_BASE0|FL_BASE_BARS,\n\t\t.num_ports      = 2,\n\t\t.base_baud      = 115200,\n\t\t.uart_offset    = 8,\n\t},\n\t[wch_ch382_0s1p] = {\n\t\t.flags          = FL_BASE0,\n\t\t.num_ports      = 0,\n\t\t.base_baud      = 115200,\n\t\t.uart_offset    = 8,\n\t},\n\t[wch_ch382_2s1p] = {\n\t\t.flags          = FL_BASE0,\n\t\t.num_ports      = 2,\n\t\t.base_baud      = 115200,\n\t\t.uart_offset    = 8,\n\t\t.first_offset   = 0xC0,\n\t},\n\t[brainboxes_5s1p] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 5,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n\t[sunix_4008a] = {\n\t\t.num_ports\t= 0,\n\t},\n\t[sunix_5069a] = {\n\t\t.num_ports\t= 1,\n\t\t.base_baud      = 921600,\n\t\t.uart_offset\t= 0x8,\n\t},\n\t[sunix_5079a] = {\n\t\t.num_ports\t= 2,\n\t\t.base_baud      = 921600,\n\t\t.uart_offset\t= 0x8,\n\t},\n\t[sunix_5099a] = {\n\t\t.num_ports\t= 4,\n\t\t.base_baud      = 921600,\n\t\t.uart_offset\t= 0x8,\n\t},\n\t[brainboxes_uc257] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 2,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[brainboxes_is300] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 1,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[brainboxes_uc414] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 4,\n\t\t.base_baud\t= 115200,\n\t\t.uart_offset\t= 8,\n\t},\n\t[brainboxes_px263] = {\n\t\t.flags\t\t= FL_BASE2,\n\t\t.num_ports\t= 4,\n\t\t.base_baud\t= 921600,\n\t\t.uart_offset\t= 8,\n\t},\n};\n\nstruct parport_serial_private {\n\tstruct serial_private\t*serial;\n\tint num_par;\n\tstruct parport *port[PARPORT_MAX];\n\tstruct parport_pc_pci par;\n};\n\n \nstatic int serial_register(struct pci_dev *dev, const struct pci_device_id *id)\n{\n\tstruct parport_serial_private *priv = pci_get_drvdata (dev);\n\tstruct pciserial_board *board;\n\tstruct serial_private *serial;\n\n\tboard = &pci_parport_serial_boards[id->driver_data];\n\tif (board->num_ports == 0)\n\t\treturn 0;\n\n\tserial = pciserial_init_ports(dev, board);\n\tif (IS_ERR(serial))\n\t\treturn PTR_ERR(serial);\n\n\tpriv->serial = serial;\n\treturn 0;\n}\n\n \nstatic int parport_register(struct pci_dev *dev, const struct pci_device_id *id)\n{\n\tstruct parport_pc_pci *card;\n\tstruct parport_serial_private *priv = pci_get_drvdata (dev);\n\tint n, success = 0;\n\n\tpriv->par = cards[id->driver_data];\n\tcard = &priv->par;\n\tif (card->preinit_hook &&\n\t    card->preinit_hook (dev, card, PARPORT_IRQ_NONE, PARPORT_DMA_NONE))\n\t\treturn -ENODEV;\n\n\tfor (n = 0; n < card->numports; n++) {\n\t\tstruct parport *port;\n\t\tint lo = card->addr[n].lo;\n\t\tint hi = card->addr[n].hi;\n\t\tunsigned long io_lo, io_hi;\n\t\tint irq;\n\n\t\tif (priv->num_par == ARRAY_SIZE (priv->port)) {\n\t\t\tdev_warn(&dev->dev,\n\t\t\t\t \"only %zu parallel ports supported (%d reported)\\n\",\n\t\t\t\t ARRAY_SIZE(priv->port), card->numports);\n\t\t\tbreak;\n\t\t}\n\n\t\tio_lo = pci_resource_start (dev, lo);\n\t\tio_hi = 0;\n\t\tif ((hi >= 0) && (hi <= 6))\n\t\t\tio_hi = pci_resource_start (dev, hi);\n\t\telse if (hi > 6)\n\t\t\tio_lo += hi;  \n\t\t \n\t\tirq = pci_irq_vector(dev, 0);\n\t\tif (irq < 0)\n\t\t\treturn irq;\n\t\tif (irq == 0)\n\t\t\tirq = PARPORT_IRQ_NONE;\n\t\tif (irq == PARPORT_IRQ_NONE) {\n\t\t\tdev_dbg(&dev->dev,\n\t\t\t\t\"PCI parallel port detected: I/O at %#lx(%#lx)\\n\",\n\t\t\t\tio_lo, io_hi);\n\t\t} else {\n\t\t\tdev_dbg(&dev->dev,\n\t\t\t\t\"PCI parallel port detected: I/O at %#lx(%#lx), IRQ %d\\n\",\n\t\t\t\tio_lo, io_hi, irq);\n\t\t}\n\t\tport = parport_pc_probe_port (io_lo, io_hi, irq,\n\t\t\t      PARPORT_DMA_NONE, &dev->dev, IRQF_SHARED);\n\t\tif (port) {\n\t\t\tpriv->port[priv->num_par++] = port;\n\t\t\tsuccess = 1;\n\t\t}\n\t}\n\n\tif (card->postinit_hook)\n\t\tcard->postinit_hook (dev, card, !success);\n\n\treturn 0;\n}\n\nstatic int parport_serial_pci_probe(struct pci_dev *dev,\n\t\t\t\t    const struct pci_device_id *id)\n{\n\tstruct parport_serial_private *priv;\n\tint err;\n\n\tpriv = devm_kzalloc(&dev->dev, sizeof(*priv), GFP_KERNEL);\n\tif (!priv)\n\t\treturn -ENOMEM;\n\n\tpci_set_drvdata (dev, priv);\n\n\terr = pcim_enable_device(dev);\n\tif (err)\n\t\treturn err;\n\n\terr = parport_register(dev, id);\n\tif (err)\n\t\treturn err;\n\n\terr = serial_register(dev, id);\n\tif (err) {\n\t\tint i;\n\t\tfor (i = 0; i < priv->num_par; i++)\n\t\t\tparport_pc_unregister_port (priv->port[i]);\n\t\treturn err;\n\t}\n\n\treturn 0;\n}\n\nstatic void parport_serial_pci_remove(struct pci_dev *dev)\n{\n\tstruct parport_serial_private *priv = pci_get_drvdata (dev);\n\tint i;\n\n\t\n\tif (priv->serial)\n\t\tpciserial_remove_ports(priv->serial);\n\n\t\n\tfor (i = 0; i < priv->num_par; i++)\n\t\tparport_pc_unregister_port (priv->port[i]);\n\n\treturn;\n}\n\nstatic int __maybe_unused parport_serial_pci_suspend(struct device *dev)\n{\n\tstruct parport_serial_private *priv = dev_get_drvdata(dev);\n\n\tif (priv->serial)\n\t\tpciserial_suspend_ports(priv->serial);\n\n\t \n\treturn 0;\n}\n\nstatic int __maybe_unused parport_serial_pci_resume(struct device *dev)\n{\n\tstruct parport_serial_private *priv = dev_get_drvdata(dev);\n\n\tif (priv->serial)\n\t\tpciserial_resume_ports(priv->serial);\n\n\t \n\treturn 0;\n}\n\nstatic SIMPLE_DEV_PM_OPS(parport_serial_pm_ops,\n\t\t\t parport_serial_pci_suspend, parport_serial_pci_resume);\n\nstatic struct pci_driver parport_serial_pci_driver = {\n\t.name\t\t= \"parport_serial\",\n\t.id_table\t= parport_serial_pci_tbl,\n\t.probe\t\t= parport_serial_pci_probe,\n\t.remove\t\t= parport_serial_pci_remove,\n\t.driver         = {\n\t\t.pm     = &parport_serial_pm_ops,\n\t},\n};\nmodule_pci_driver(parport_serial_pci_driver);\n\nMODULE_AUTHOR(\"Tim Waugh <twaugh@redhat.com>\");\nMODULE_DESCRIPTION(\"Driver for common parallel+serial multi-I/O PCI cards\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}