{
  "module_name": "reset-starfive-jh7110.c",
  "hash_id": "ba78e1be7c78965cdcacb43c64f371e6e88b94fedc85ae34138779ac4d94bc7b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/reset/starfive/reset-starfive-jh7110.c",
  "human_readable_source": "\n \n\n#include <linux/auxiliary_bus.h>\n\n#include <soc/starfive/reset-starfive-jh71x0.h>\n\n#include \"reset-starfive-jh71x0.h\"\n\n#include <dt-bindings/reset/starfive,jh7110-crg.h>\n\nstruct jh7110_reset_info {\n\tunsigned int nr_resets;\n\tunsigned int assert_offset;\n\tunsigned int status_offset;\n};\n\nstatic const struct jh7110_reset_info jh7110_sys_info = {\n\t.nr_resets = JH7110_SYSRST_END,\n\t.assert_offset = 0x2F8,\n\t.status_offset = 0x308,\n};\n\nstatic const struct jh7110_reset_info jh7110_aon_info = {\n\t.nr_resets = JH7110_AONRST_END,\n\t.assert_offset = 0x38,\n\t.status_offset = 0x3C,\n};\n\nstatic const struct jh7110_reset_info jh7110_stg_info = {\n\t.nr_resets = JH7110_STGRST_END,\n\t.assert_offset = 0x74,\n\t.status_offset = 0x78,\n};\n\nstatic const struct jh7110_reset_info jh7110_isp_info = {\n\t.nr_resets = JH7110_ISPRST_END,\n\t.assert_offset = 0x38,\n\t.status_offset = 0x3C,\n};\n\nstatic const struct jh7110_reset_info jh7110_vout_info = {\n\t.nr_resets = JH7110_VOUTRST_END,\n\t.assert_offset = 0x48,\n\t.status_offset = 0x4C,\n};\n\nstatic int jh7110_reset_probe(struct auxiliary_device *adev,\n\t\t\t      const struct auxiliary_device_id *id)\n{\n\tstruct jh7110_reset_info *info = (struct jh7110_reset_info *)(id->driver_data);\n\tstruct jh71x0_reset_adev *rdev = to_jh71x0_reset_adev(adev);\n\tvoid __iomem *base = rdev->base;\n\n\tif (!info || !base)\n\t\treturn -ENODEV;\n\n\treturn reset_starfive_jh71x0_register(&adev->dev, adev->dev.parent->of_node,\n\t\t\t\t\t      base + info->assert_offset,\n\t\t\t\t\t      base + info->status_offset,\n\t\t\t\t\t      NULL,\n\t\t\t\t\t      info->nr_resets,\n\t\t\t\t\t      NULL);\n}\n\nstatic const struct auxiliary_device_id jh7110_reset_ids[] = {\n\t{\n\t\t.name = \"clk_starfive_jh7110_sys.rst-sys\",\n\t\t.driver_data = (kernel_ulong_t)&jh7110_sys_info,\n\t},\n\t{\n\t\t.name = \"clk_starfive_jh7110_sys.rst-aon\",\n\t\t.driver_data = (kernel_ulong_t)&jh7110_aon_info,\n\t},\n\t{\n\t\t.name = \"clk_starfive_jh7110_sys.rst-stg\",\n\t\t.driver_data = (kernel_ulong_t)&jh7110_stg_info,\n\t},\n\t{\n\t\t.name = \"clk_starfive_jh7110_sys.rst-isp\",\n\t\t.driver_data = (kernel_ulong_t)&jh7110_isp_info,\n\t},\n\t{\n\t\t.name = \"clk_starfive_jh7110_sys.rst-vo\",\n\t\t.driver_data = (kernel_ulong_t)&jh7110_vout_info,\n\t},\n\t{   }\n};\nMODULE_DEVICE_TABLE(auxiliary, jh7110_reset_ids);\n\nstatic struct auxiliary_driver jh7110_reset_driver = {\n\t.probe\t\t= jh7110_reset_probe,\n\t.id_table\t= jh7110_reset_ids,\n};\nmodule_auxiliary_driver(jh7110_reset_driver);\n\nMODULE_AUTHOR(\"Hal Feng <hal.feng@starfivetech.com>\");\nMODULE_DESCRIPTION(\"StarFive JH7110 reset driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}