{
  "module_name": "iohelper.h",
  "hash_id": "6e5a27fcb2c8dae31880ebf3c15673a58723c2b5173994a4e8e3e7d1d66367e3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/isdn/hardware/mISDN/iohelper.h",
  "human_readable_source": " \n \n\n#ifndef _IOHELPER_H\n#define _IOHELPER_H\n\ntypedef u8 (read_reg_func)(void *hwp, u8 offset);\ntypedef void (write_reg_func)(void *hwp, u8 offset, u8 value);\ntypedef void (fifo_func)(void *hwp, u8 offset, u8 *datap, int size);\n\nstruct _ioport {\n\tu32 port;\n\tu32 ale;\n};\n\n#define IOFUNC_IO(name, hws, ap)\t\t\t\t\t\\\n\tstatic u8 Read##name##_IO(void *p, u8 off) {\t\t\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\treturn inb(hw->ap.port + off);\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void Write##name##_IO(void *p, u8 off, u8 val) {\t\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutb(val, hw->ap.port + off);\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void ReadFiFo##name##_IO(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\tinsb(hw->ap.port + off, dp, size);\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void WriteFiFo##name##_IO(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutsb(hw->ap.port + off, dp, size);\t\t\t\\\n\t}\n\n#define IOFUNC_IND(name, hws, ap)\t\t\t\t\t\\\n\tstatic u8 Read##name##_IND(void *p, u8 off) {\t\t\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutb(off, hw->ap.ale);\t\t\t\t\t\\\n\t\treturn inb(hw->ap.port);\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void Write##name##_IND(void *p, u8 off, u8 val) {\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutb(off, hw->ap.ale);\t\t\t\t\t\\\n\t\toutb(val, hw->ap.port);\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void ReadFiFo##name##_IND(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutb(off, hw->ap.ale);\t\t\t\t\t\\\n\t\tinsb(hw->ap.port, dp, size);\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void WriteFiFo##name##_IND(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\toutb(off, hw->ap.ale);\t\t\t\t\t\\\n\t\toutsb(hw->ap.port, dp, size);\t\t\t\t\\\n\t}\n\n#define IOFUNC_MEMIO(name, hws, typ, adr)\t\t\t\t\\\n\tstatic u8 Read##name##_MIO(void *p, u8 off) {\t\t\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\treturn readb(((typ *)hw->adr) + off);\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void Write##name##_MIO(void *p, u8 off, u8 val) {\t\\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\twriteb(val, ((typ *)hw->adr) + off);\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void ReadFiFo##name##_MIO(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\twhile (size--)\t\t\t\t\t\t\\\n\t\t\t*dp++ = readb(((typ *)hw->adr) + off);\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tstatic void WriteFiFo##name##_MIO(void *p, u8 off, u8 *dp, int size) { \\\n\t\tstruct hws *hw = p;\t\t\t\t\t\\\n\t\twhile (size--)\t\t\t\t\t\t\\\n\t\t\twriteb(*dp++, ((typ *)hw->adr) + off);\t\t\\\n\t}\n\n#define ASSIGN_FUNC(typ, name, dest)\tdo {\t\t\t\\\n\t\tdest.read_reg = &Read##name##_##typ;\t\t\\\n\t\tdest.write_reg = &Write##name##_##typ;\t\t\\\n\t\tdest.read_fifo = &ReadFiFo##name##_##typ;\t\\\n\t\tdest.write_fifo = &WriteFiFo##name##_##typ;\t\\\n\t} while (0)\n#define ASSIGN_FUNC_IPAC(typ, target)\tdo {\t\t\\\n\t\tASSIGN_FUNC(typ, ISAC, target.isac);\t\\\n\t\tASSIGN_FUNC(typ, IPAC, target);\t\t\\\n\t} while (0)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}