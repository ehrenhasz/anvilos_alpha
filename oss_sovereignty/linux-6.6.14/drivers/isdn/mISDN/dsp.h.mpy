{
  "module_name": "dsp.h",
  "hash_id": "960905feba25777af05b395b3dc4c3aa995ecc564b2156705747c9de5c2d24fa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/isdn/mISDN/dsp.h",
  "human_readable_source": " \n\n#define DEBUG_DSP_CTRL\t\t0x0001\n#define DEBUG_DSP_CORE\t\t0x0002\n#define DEBUG_DSP_DTMF\t\t0x0004\n#define DEBUG_DSP_CMX\t\t0x0010\n#define DEBUG_DSP_TONE\t\t0x0020\n#define DEBUG_DSP_BLOWFISH\t0x0040\n#define DEBUG_DSP_DELAY\t\t0x0100\n#define DEBUG_DSP_CLOCK\t\t0x0200\n#define DEBUG_DSP_DTMFCOEFF\t0x8000  \n\n \n#define DSP_OPT_ULAW\t\t(1 << 0)\n#define DSP_OPT_NOHARDWARE\t(1 << 1)\n\n#include <linux/timer.h>\n#include <linux/workqueue.h>\n\n#include \"dsp_ecdis.h\"\n\nextern int dsp_options;\nextern int dsp_debug;\nextern int dsp_poll;\nextern int dsp_tics;\nextern spinlock_t dsp_lock;\nextern struct work_struct dsp_workq;\nextern u32 dsp_poll_diff;  \n\n \n\nextern s32 dsp_audio_alaw_to_s32[256];\nextern s32 dsp_audio_ulaw_to_s32[256];\nextern s32 *dsp_audio_law_to_s32;\nextern u8 dsp_audio_s16_to_law[65536];\nextern u8 dsp_audio_alaw_to_ulaw[256];\nextern u8 dsp_audio_mix_law[65536];\nextern u8 dsp_audio_seven2law[128];\nextern u8 dsp_audio_law2seven[256];\nextern void dsp_audio_generate_law_tables(void);\nextern void dsp_audio_generate_s2law_table(void);\nextern void dsp_audio_generate_seven(void);\nextern void dsp_audio_generate_mix_table(void);\nextern void dsp_audio_generate_ulaw_samples(void);\nextern void dsp_audio_generate_volume_changes(void);\nextern u8 dsp_silence;\n\n\n \n\n#define MAX_POLL\t256\t \n\n#define CMX_BUFF_SIZE\t0x8000\t \n#define CMX_BUFF_HALF\t0x4000\t \n#define CMX_BUFF_MASK\t0x7fff\t \n\n \n#define MAX_SECONDS_JITTER_CHECK 5\n\nextern struct timer_list dsp_spl_tl;\n\n \nextern unsigned long dsp_spl_jiffies;\n\n \n\n \nstruct dsp;\nstruct dsp_conf_member {\n\tstruct list_head\tlist;\n\tstruct dsp\t\t*dsp;\n};\n\n \nstruct dsp_conf {\n\tstruct list_head\tlist;\n\tu32\t\t\tid;\n\t \n\tstruct list_head\tmlist;\n\tint\t\t\tsoftware;  \n\tint\t\t\thardware;  \n\t \n};\n\n\n \n\n#define DSP_DTMF_NPOINTS 102\n\n#define ECHOCAN_BUFF_SIZE 0x400  \n#define ECHOCAN_BUFF_MASK 0x3ff  \n\nstruct dsp_dtmf {\n\tint\t\tenable;  \n\tint\t\ttreshold;  \n\tint\t\tsoftware;  \n\tint\t\thardware;  \n\tint\t\tsize;  \n\tsigned short\tbuffer[DSP_DTMF_NPOINTS];\n\t \n\tu8\t\tlastwhat, lastdigit;\n\tint\t\tcount;\n\tu8\t\tdigits[16];  \n};\n\n\n \nstruct dsp_pipeline {\n\trwlock_t  lock;\n\tstruct list_head list;\n\tint inuse;\n};\n\n \n\nstruct dsp_tone {\n\tint\t\tsoftware;  \n\tint\t\thardware;  \n\tint\t\ttone;\n\tvoid\t\t*pattern;\n\tint\t\tcount;\n\tint\t\tindex;\n\tstruct timer_list tl;\n};\n\n \n\nstruct dsp_echo {\n\tint\t\tsoftware;  \n\tint\t\thardware;  \n};\n\n \n\nstruct dsp {\n\tstruct list_head list;\n\tstruct mISDNchannel\tch;\n\tstruct mISDNchannel\t*up;\n\tunsigned char\tname[64];\n\tint\t\tb_active;\n\tstruct dsp_echo\techo;\n\tint\t\trx_disabled;  \n\tint\t\trx_is_off;  \n\tint\t\ttx_mix;\n\tstruct dsp_tone\ttone;\n\tstruct dsp_dtmf\tdtmf;\n\tint\t\ttx_volume, rx_volume;\n\n\t \n\tstruct work_struct\tworkq;\n\tstruct sk_buff_head\tsendq;\n\tint\t\thdlc;\t \n\tint\t\tdata_pending;\t \n\n\t \n\tu32\t\tconf_id;\n\tstruct dsp_conf\t*conf;\n\tstruct dsp_conf_member\n\t*member;\n\n\t \n\tint\t\trx_W;  \n\tint\t\trx_R;  \n\tint\t\trx_init;  \n\tint\t\ttx_W;  \n\tint\t\ttx_R;  \n\tint\t\trx_delay[MAX_SECONDS_JITTER_CHECK];\n\tint\t\ttx_delay[MAX_SECONDS_JITTER_CHECK];\n\tu8\t\ttx_buff[CMX_BUFF_SIZE];\n\tu8\t\trx_buff[CMX_BUFF_SIZE];\n\tint\t\tlast_tx;  \n\tint\t\tcmx_delay;  \n\tint\t\ttx_dejitter;  \n\tint\t\ttx_data;  \n\n\t \n\tstruct dsp_features features;\n\tint\t\tfeatures_rx_off;  \n\tint\t\tfeatures_fill_empty;  \n\tint\t\tpcm_slot_rx;  \n\tint\t\tpcm_bank_rx;\n\tint\t\tpcm_slot_tx;\n\tint\t\tpcm_bank_tx;\n\tint\t\thfc_conf;  \n\n\t \n\tint\t\tbf_enable;\n\tu32\t\tbf_p[18];\n\tu32\t\tbf_s[1024];\n\tint\t\tbf_crypt_pos;\n\tu8\t\tbf_data_in[9];\n\tu8\t\tbf_crypt_out[9];\n\tint\t\tbf_decrypt_in_pos;\n\tint\t\tbf_decrypt_out_pos;\n\tu8\t\tbf_crypt_inring[16];\n\tu8\t\tbf_data_out[9];\n\tint\t\tbf_sync;\n\n\tstruct dsp_pipeline\n\tpipeline;\n};\n\n \n\nextern void dsp_change_volume(struct sk_buff *skb, int volume);\n\nextern struct list_head dsp_ilist;\nextern struct list_head conf_ilist;\nextern void dsp_cmx_debug(struct dsp *dsp);\nextern void dsp_cmx_hardware(struct dsp_conf *conf, struct dsp *dsp);\nextern int dsp_cmx_conf(struct dsp *dsp, u32 conf_id);\nextern void dsp_cmx_receive(struct dsp *dsp, struct sk_buff *skb);\nextern void dsp_cmx_hdlc(struct dsp *dsp, struct sk_buff *skb);\nextern void dsp_cmx_send(struct timer_list *arg);\nextern void dsp_cmx_transmit(struct dsp *dsp, struct sk_buff *skb);\nextern int dsp_cmx_del_conf_member(struct dsp *dsp);\nextern int dsp_cmx_del_conf(struct dsp_conf *conf);\n\nextern void dsp_dtmf_goertzel_init(struct dsp *dsp);\nextern void dsp_dtmf_hardware(struct dsp *dsp);\nextern u8 *dsp_dtmf_goertzel_decode(struct dsp *dsp, u8 *data, int len,\n\t\t\t\t    int fmt);\n\nextern int dsp_tone(struct dsp *dsp, int tone);\nextern void dsp_tone_copy(struct dsp *dsp, u8 *data, int len);\nextern void dsp_tone_timeout(struct timer_list *t);\n\nextern void dsp_bf_encrypt(struct dsp *dsp, u8 *data, int len);\nextern void dsp_bf_decrypt(struct dsp *dsp, u8 *data, int len);\nextern int dsp_bf_init(struct dsp *dsp, const u8 *key, unsigned int keylen);\nextern void dsp_bf_cleanup(struct dsp *dsp);\n\nextern int  dsp_pipeline_module_init(void);\nextern void dsp_pipeline_module_exit(void);\nextern int  dsp_pipeline_init(struct dsp_pipeline *pipeline);\nextern void dsp_pipeline_destroy(struct dsp_pipeline *pipeline);\nextern int  dsp_pipeline_build(struct dsp_pipeline *pipeline, const char *cfg);\nextern void dsp_pipeline_process_tx(struct dsp_pipeline *pipeline, u8 *data,\n\t\t\t\t    int len);\nextern void dsp_pipeline_process_rx(struct dsp_pipeline *pipeline, u8 *data,\n\t\t\t\t    int len, unsigned int txlen);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}