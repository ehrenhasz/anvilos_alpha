{
  "module_name": "alps.h",
  "hash_id": "d70b06940a1ec29664408b4ae302a9200bbc68db87fcfa1e9abfaf3cf777484e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/mouse/alps.h",
  "human_readable_source": " \n \n\n#ifndef _ALPS_H\n#define _ALPS_H\n\n#include <linux/input/mt.h>\n\n#define ALPS_PROTO_V1\t\t0x100\n#define ALPS_PROTO_V2\t\t0x200\n#define ALPS_PROTO_V3\t\t0x300\n#define ALPS_PROTO_V3_RUSHMORE\t0x310\n#define ALPS_PROTO_V4\t\t0x400\n#define ALPS_PROTO_V5\t\t0x500\n#define ALPS_PROTO_V6\t\t0x600\n#define ALPS_PROTO_V7\t\t0x700\t \n#define ALPS_PROTO_V8\t\t0x800\t \n#define ALPS_PROTO_V9\t\t0x900\t \n\n#define MAX_TOUCHES\t4\n\n#define DOLPHIN_COUNT_PER_ELECTRODE\t64\n#define DOLPHIN_PROFILE_XOFFSET\t\t8\t \n#define DOLPHIN_PROFILE_YOFFSET\t\t1\t \n\n \nenum SS4_PACKET_ID {\n\tSS4_PACKET_ID_IDLE = 0,\n\tSS4_PACKET_ID_ONE,\n\tSS4_PACKET_ID_TWO,\n\tSS4_PACKET_ID_MULTI,\n\tSS4_PACKET_ID_STICK,\n};\n\n#define SS4_COUNT_PER_ELECTRODE\t\t256\n#define SS4_NUMSENSOR_XOFFSET\t\t7\n#define SS4_NUMSENSOR_YOFFSET\t\t7\n#define SS4_MIN_PITCH_MM\t\t50\n\n#define SS4_MASK_NORMAL_BUTTONS\t\t0x07\n\n#define SS4PLUS_COUNT_PER_ELECTRODE\t128\n#define SS4PLUS_NUMSENSOR_XOFFSET\t16\n#define SS4PLUS_NUMSENSOR_YOFFSET\t5\n#define SS4PLUS_MIN_PITCH_MM\t\t37\n\n#define IS_SS4PLUS_DEV(_b)\t(((_b[0]) == 0x73) &&\t\\\n\t\t\t\t ((_b[1]) == 0x03) &&\t\\\n\t\t\t\t ((_b[2]) == 0x28)\t\t\\\n\t\t\t\t)\n\n#define SS4_IS_IDLE_V2(_b)\t(((_b[0]) == 0x18) &&\t\t\\\n\t\t\t\t ((_b[1]) == 0x10) &&\t\t\\\n\t\t\t\t ((_b[2]) == 0x00) &&\t\t\\\n\t\t\t\t ((_b[3] & 0x88) == 0x08) &&\t\\\n\t\t\t\t ((_b[4]) == 0x10) &&\t\t\\\n\t\t\t\t ((_b[5]) == 0x00)\t\t\\\n\t\t\t\t)\n\n#define SS4_1F_X_V2(_b)\t\t(((_b[0]) & 0x0007) |\t\t\\\n\t\t\t\t ((_b[1] << 3) & 0x0078) |\t\\\n\t\t\t\t ((_b[1] << 2) & 0x0380) |\t\\\n\t\t\t\t ((_b[2] << 5) & 0x1C00)\t\\\n\t\t\t\t)\n\n#define SS4_1F_Y_V2(_b)\t\t(((_b[2]) & 0x000F) |\t\t\\\n\t\t\t\t ((_b[3] >> 2) & 0x0030) |\t\\\n\t\t\t\t ((_b[4] << 6) & 0x03C0) |\t\\\n\t\t\t\t ((_b[4] << 5) & 0x0C00)\t\\\n\t\t\t\t)\n\n#define SS4_1F_Z_V2(_b)\t\t(((_b[5]) & 0x0F) |\t\t\\\n\t\t\t\t ((_b[5] >> 1) & 0x70) |\t\\\n\t\t\t\t ((_b[4]) & 0x80)\t\t\\\n\t\t\t\t)\n\n#define SS4_1F_LFB_V2(_b)\t(((_b[2] >> 4) & 0x01) == 0x01)\n\n#define SS4_MF_LF_V2(_b, _i)\t((_b[1 + (_i) * 3] & 0x0004) == 0x0004)\n\n#define SS4_BTN_V2(_b)\t\t((_b[0] >> 5) & SS4_MASK_NORMAL_BUTTONS)\n\n#define SS4_STD_MF_X_V2(_b, _i)\t(((_b[0 + (_i) * 3] << 5) & 0x00E0) |\t\\\n\t\t\t\t ((_b[1 + _i * 3]  << 5) & 0x1F00)\t\\\n\t\t\t\t)\n\n#define SS4_PLUS_STD_MF_X_V2(_b, _i) (((_b[0 + (_i) * 3] << 4) & 0x0070) | \\\n\t\t\t\t ((_b[1 + (_i) * 3]  << 4) & 0x0F80)\t\\\n\t\t\t\t)\n\n#define SS4_STD_MF_Y_V2(_b, _i)\t(((_b[1 + (_i) * 3] << 3) & 0x0010) |\t\\\n\t\t\t\t ((_b[2 + (_i) * 3] << 5) & 0x01E0) |\t\\\n\t\t\t\t ((_b[2 + (_i) * 3] << 4) & 0x0E00)\t\\\n\t\t\t\t)\n\n#define SS4_BTL_MF_X_V2(_b, _i)\t(SS4_STD_MF_X_V2(_b, _i) |\t\t\\\n\t\t\t\t ((_b[0 + (_i) * 3] >> 3) & 0x0010)\t\\\n\t\t\t\t)\n\n#define SS4_PLUS_BTL_MF_X_V2(_b, _i) (SS4_PLUS_STD_MF_X_V2(_b, _i) |\t\\\n\t\t\t\t ((_b[0 + (_i) * 3] >> 4) & 0x0008)\t\\\n\t\t\t\t)\n\n#define SS4_BTL_MF_Y_V2(_b, _i)\t(SS4_STD_MF_Y_V2(_b, _i) | \\\n\t\t\t\t ((_b[0 + (_i) * 3] >> 3) & 0x0008)\t\\\n\t\t\t\t)\n\n#define SS4_MF_Z_V2(_b, _i)\t(((_b[1 + (_i) * 3]) & 0x0001) |\t\\\n\t\t\t\t ((_b[1 + (_i) * 3] >> 1) & 0x0002)\t\\\n\t\t\t\t)\n\n#define SS4_IS_MF_CONTINUE(_b)\t((_b[2] & 0x10) == 0x10)\n#define SS4_IS_5F_DETECTED(_b)\t((_b[2] & 0x10) == 0x10)\n\n#define SS4_TS_X_V2(_b)\t\t(s8)(\t\t\t\t\\\n\t\t\t\t ((_b[0] & 0x01) << 7) |\t\\\n\t\t\t\t (_b[1] & 0x7F)\t\t\\\n\t\t\t\t)\n\n#define SS4_TS_Y_V2(_b)\t\t-(s8)(\t\t\t\t\\\n\t\t\t\t ((_b[3] & 0x01) << 7) |\t\\\n\t\t\t\t (_b[2] & 0x7F)\t\t\\\n\t\t\t\t)\n\n#define SS4_TS_Z_V2(_b)\t\t(s8)(_b[4] & 0x7F)\n\n\n#define SS4_MFPACKET_NO_AX\t\t8160\t \n#define SS4_MFPACKET_NO_AY\t\t4080\t \n#define SS4_MFPACKET_NO_AX_BL\t\t8176\t \n#define SS4_MFPACKET_NO_AY_BL\t\t4088\t \n#define SS4_PLUS_MFPACKET_NO_AX\t\t4080\t \n#define SS4_PLUS_MFPACKET_NO_AX_BL\t4088\t \n\n \nenum V7_PACKET_ID {\n\t V7_PACKET_ID_IDLE,\n\t V7_PACKET_ID_TWO,\n\t V7_PACKET_ID_MULTI,\n\t V7_PACKET_ID_NEW,\n\t V7_PACKET_ID_UNKNOWN,\n};\n\n \nstruct alps_protocol_info {\n\tu16 version;\n\tu8 byte0, mask0;\n\tunsigned int flags;\n};\n\n \nstruct alps_model_info {\n\tu8 signature[3];\n\tstruct alps_protocol_info protocol_info;\n};\n\n \nstruct alps_nibble_commands {\n\tint command;\n\tunsigned char data;\n};\n\nstruct alps_bitmap_point {\n\tint start_bit;\n\tint num_bits;\n};\n\n \nstruct alps_fields {\n\tunsigned int x_map;\n\tunsigned int y_map;\n\tunsigned int fingers;\n\n\tint pressure;\n\tstruct input_mt_pos st;\n\tstruct input_mt_pos mt[MAX_TOUCHES];\n\n\tunsigned int first_mp:1;\n\tunsigned int is_mp:1;\n\n\tunsigned int left:1;\n\tunsigned int right:1;\n\tunsigned int middle:1;\n\n\tunsigned int ts_left:1;\n\tunsigned int ts_right:1;\n\tunsigned int ts_middle:1;\n};\n\n \nstruct alps_data {\n\tstruct psmouse *psmouse;\n\tstruct input_dev *dev2;\n\tstruct input_dev *dev3;\n\tchar phys2[32];\n\tchar phys3[32];\n\tstruct delayed_work dev3_register_work;\n\n\t \n\tconst struct alps_nibble_commands *nibble_commands;\n\tint addr_command;\n\tu16 proto_version;\n\tu8 byte0, mask0;\n\tu8 dev_id[3];\n\tu8 fw_ver[3];\n\tint flags;\n\tint x_max;\n\tint y_max;\n\tint x_bits;\n\tint y_bits;\n\tunsigned int x_res;\n\tunsigned int y_res;\n\n\tint (*hw_init)(struct psmouse *psmouse);\n\tvoid (*process_packet)(struct psmouse *psmouse);\n\tint (*decode_fields)(struct alps_fields *f, unsigned char *p,\n\t\t\t      struct psmouse *psmouse);\n\tvoid (*set_abs_params)(struct alps_data *priv, struct input_dev *dev1);\n\n\tint prev_fin;\n\tint multi_packet;\n\tint second_touch;\n\tunsigned char multi_data[6];\n\tstruct alps_fields f;\n\tu8 quirks;\n\tstruct timer_list timer;\n};\n\n#define ALPS_QUIRK_TRACKSTICK_BUTTONS\t1  \n\nint alps_detect(struct psmouse *psmouse, bool set_properties);\nint alps_init(struct psmouse *psmouse);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}