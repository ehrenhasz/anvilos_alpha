{
  "module_name": "psmouse.h",
  "hash_id": "6e16eb2734f20301be2fc0b5e8e81332f6e91786ef70a9bedc1a9bc8526c1ca7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/mouse/psmouse.h",
  "human_readable_source": " \n#ifndef _PSMOUSE_H\n#define _PSMOUSE_H\n\n#define PSMOUSE_OOB_NONE\t0x00\n#define PSMOUSE_OOB_EXTRA_BTNS\t0x01\n\n#define PSMOUSE_CMD_SETSCALE11\t0x00e6\n#define PSMOUSE_CMD_SETSCALE21\t0x00e7\n#define PSMOUSE_CMD_SETRES\t0x10e8\n#define PSMOUSE_CMD_GETINFO\t0x03e9\n#define PSMOUSE_CMD_SETSTREAM\t0x00ea\n#define PSMOUSE_CMD_SETPOLL\t0x00f0\n#define PSMOUSE_CMD_POLL\t0x00eb\t \n#define PSMOUSE_CMD_RESET_WRAP\t0x00ec\n#define PSMOUSE_CMD_GETID\t0x02f2\n#define PSMOUSE_CMD_SETRATE\t0x10f3\n#define PSMOUSE_CMD_ENABLE\t0x00f4\n#define PSMOUSE_CMD_DISABLE\t0x00f5\n#define PSMOUSE_CMD_RESET_DIS\t0x00f6\n#define PSMOUSE_CMD_RESET_BAT\t0x02ff\n\n#define PSMOUSE_RET_BAT\t\t0xaa\n#define PSMOUSE_RET_ID\t\t0x00\n#define PSMOUSE_RET_ACK\t\t0xfa\n#define PSMOUSE_RET_NAK\t\t0xfe\n\nenum psmouse_state {\n\tPSMOUSE_IGNORE,\n\tPSMOUSE_INITIALIZING,\n\tPSMOUSE_RESYNCING,\n\tPSMOUSE_CMD_MODE,\n\tPSMOUSE_ACTIVATED,\n};\n\n \ntypedef enum {\n\tPSMOUSE_BAD_DATA,\n\tPSMOUSE_GOOD_DATA,\n\tPSMOUSE_FULL_PACKET\n} psmouse_ret_t;\n\nenum psmouse_scale {\n\tPSMOUSE_SCALE11,\n\tPSMOUSE_SCALE21\n};\n\nenum psmouse_type {\n\tPSMOUSE_NONE,\n\tPSMOUSE_PS2,\n\tPSMOUSE_PS2PP,\n\tPSMOUSE_THINKPS,\n\tPSMOUSE_GENPS,\n\tPSMOUSE_IMPS,\n\tPSMOUSE_IMEX,\n\tPSMOUSE_SYNAPTICS,\n\tPSMOUSE_ALPS,\n\tPSMOUSE_LIFEBOOK,\n\tPSMOUSE_TRACKPOINT,\n\tPSMOUSE_TOUCHKIT_PS2,\n\tPSMOUSE_CORTRON,\n\tPSMOUSE_HGPK,\n\tPSMOUSE_ELANTECH,\n\tPSMOUSE_FSP,\n\tPSMOUSE_SYNAPTICS_RELATIVE,\n\tPSMOUSE_CYPRESS,\n\tPSMOUSE_FOCALTECH,\n\tPSMOUSE_VMMOUSE,\n\tPSMOUSE_BYD,\n\tPSMOUSE_SYNAPTICS_SMBUS,\n\tPSMOUSE_ELANTECH_SMBUS,\n\tPSMOUSE_AUTO\t\t \n};\n\nstruct psmouse;\n\nstruct psmouse_protocol {\n\tenum psmouse_type type;\n\tbool maxproto;\n\tbool ignore_parity;  \n\tbool try_passthru;  \n\tbool smbus_companion;  \n\tconst char *name;\n\tconst char *alias;\n\tint (*detect)(struct psmouse *, bool);\n\tint (*init)(struct psmouse *);\n};\n\nstruct psmouse {\n\tvoid *private;\n\tstruct input_dev *dev;\n\tstruct ps2dev ps2dev;\n\tstruct delayed_work resync_work;\n\tconst char *vendor;\n\tconst char *name;\n\tconst struct psmouse_protocol *protocol;\n\tunsigned char packet[8];\n\tunsigned char badbyte;\n\tunsigned char pktcnt;\n\tunsigned char pktsize;\n\tunsigned char oob_data_type;\n\tunsigned char extra_buttons;\n\tbool acks_disable_command;\n\tunsigned int model;\n\tunsigned long last;\n\tunsigned long out_of_sync_cnt;\n\tunsigned long num_resyncs;\n\tenum psmouse_state state;\n\tchar devname[64];\n\tchar phys[32];\n\n\tunsigned int rate;\n\tunsigned int resolution;\n\tunsigned int resetafter;\n\tunsigned int resync_time;\n\tbool smartscroll;\t \n\n\tpsmouse_ret_t (*protocol_handler)(struct psmouse *psmouse);\n\tvoid (*set_rate)(struct psmouse *psmouse, unsigned int rate);\n\tvoid (*set_resolution)(struct psmouse *psmouse, unsigned int resolution);\n\tvoid (*set_scale)(struct psmouse *psmouse, enum psmouse_scale scale);\n\n\tint (*reconnect)(struct psmouse *psmouse);\n\tint (*fast_reconnect)(struct psmouse *psmouse);\n\tvoid (*disconnect)(struct psmouse *psmouse);\n\tvoid (*cleanup)(struct psmouse *psmouse);\n\tint (*poll)(struct psmouse *psmouse);\n\n\tvoid (*pt_activate)(struct psmouse *psmouse);\n\tvoid (*pt_deactivate)(struct psmouse *psmouse);\n};\n\nstruct psmouse *psmouse_from_serio(struct serio *serio);\n\nvoid psmouse_queue_work(struct psmouse *psmouse, struct delayed_work *work,\n\t\tunsigned long delay);\nint psmouse_reset(struct psmouse *psmouse);\nvoid psmouse_set_state(struct psmouse *psmouse, enum psmouse_state new_state);\nvoid psmouse_set_resolution(struct psmouse *psmouse, unsigned int resolution);\npsmouse_ret_t psmouse_process_byte(struct psmouse *psmouse);\nint psmouse_activate(struct psmouse *psmouse);\nint psmouse_deactivate(struct psmouse *psmouse);\nbool psmouse_matches_pnp_id(struct psmouse *psmouse, const char * const ids[]);\n\nvoid psmouse_report_standard_buttons(struct input_dev *, u8 buttons);\nvoid psmouse_report_standard_motion(struct input_dev *, u8 *packet);\nvoid psmouse_report_standard_packet(struct input_dev *, u8 *packet);\n\nstruct psmouse_attribute {\n\tstruct device_attribute dattr;\n\tvoid *data;\n\tssize_t (*show)(struct psmouse *psmouse, void *data, char *buf);\n\tssize_t (*set)(struct psmouse *psmouse, void *data,\n\t\t\tconst char *buf, size_t count);\n\tbool protect;\n};\n#define to_psmouse_attr(a)\tcontainer_of((a), struct psmouse_attribute, dattr)\n\nssize_t psmouse_attr_show_helper(struct device *dev, struct device_attribute *attr,\n\t\t\t\t char *buf);\nssize_t psmouse_attr_set_helper(struct device *dev, struct device_attribute *attr,\n\t\t\t\tconst char *buf, size_t count);\n\n#define __PSMOUSE_DEFINE_ATTR_VAR(_name, _mode, _data, _show, _set, _protect)\t\\\nstatic struct psmouse_attribute psmouse_attr_##_name = {\t\t\t\\\n\t.dattr\t= {\t\t\t\t\t\t\t\t\\\n\t\t.attr\t= {\t\t\t\t\t\t\t\\\n\t\t\t.name\t= __stringify(_name),\t\t\t\t\\\n\t\t\t.mode\t= _mode,\t\t\t\t\t\\\n\t\t},\t\t\t\t\t\t\t\t\\\n\t\t.show\t= psmouse_attr_show_helper,\t\t\t\t\\\n\t\t.store\t= psmouse_attr_set_helper,\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\t\t\\\n\t.data\t= _data,\t\t\t\t\t\t\t\\\n\t.show\t= _show,\t\t\t\t\t\t\t\\\n\t.set\t= _set,\t\t\t\t\t\t\t\t\\\n\t.protect = _protect,\t\t\t\t\t\t\t\\\n}\n\n#define __PSMOUSE_DEFINE_ATTR(_name, _mode, _data, _show, _set, _protect)\t\\\n\tstatic ssize_t _show(struct psmouse *, void *, char *);\t\t\t\\\n\tstatic ssize_t _set(struct psmouse *, void *, const char *, size_t);\t\\\n\t__PSMOUSE_DEFINE_ATTR_VAR(_name, _mode, _data, _show, _set, _protect)\n\n#define PSMOUSE_DEFINE_ATTR(_name, _mode, _data, _show, _set)\t\t\t\\\n\t__PSMOUSE_DEFINE_ATTR(_name, _mode, _data, _show, _set, true)\n\n#define PSMOUSE_DEFINE_RO_ATTR(_name, _mode, _data, _show)\t\t\t\\\n\tstatic ssize_t _show(struct psmouse *, void *, char *);\t\t\t\\\n\t__PSMOUSE_DEFINE_ATTR_VAR(_name, _mode, _data, _show, NULL, true)\n\n#define PSMOUSE_DEFINE_WO_ATTR(_name, _mode, _data, _set)\t\t\t\\\n\tstatic ssize_t _set(struct psmouse *, void *, const char *, size_t);\t\\\n\t__PSMOUSE_DEFINE_ATTR_VAR(_name, _mode, _data, NULL, _set, true)\n\n#ifndef psmouse_fmt\n#define psmouse_fmt(fmt)\tKBUILD_BASENAME \": \" fmt\n#endif\n\n#define psmouse_dbg(psmouse, format, ...)\t\t\\\n\tdev_dbg(&(psmouse)->ps2dev.serio->dev,\t\t\\\n\t\tpsmouse_fmt(format), ##__VA_ARGS__)\n#define psmouse_info(psmouse, format, ...)\t\t\\\n\tdev_info(&(psmouse)->ps2dev.serio->dev,\t\t\\\n\t\t psmouse_fmt(format), ##__VA_ARGS__)\n#define psmouse_warn(psmouse, format, ...)\t\t\\\n\tdev_warn(&(psmouse)->ps2dev.serio->dev,\t\t\\\n\t\t psmouse_fmt(format), ##__VA_ARGS__)\n#define psmouse_err(psmouse, format, ...)\t\t\\\n\tdev_err(&(psmouse)->ps2dev.serio->dev,\t\t\\\n\t\tpsmouse_fmt(format), ##__VA_ARGS__)\n#define psmouse_notice(psmouse, format, ...)\t\t\\\n\tdev_notice(&(psmouse)->ps2dev.serio->dev,\t\\\n\t\t   psmouse_fmt(format), ##__VA_ARGS__)\n#define psmouse_printk(level, psmouse, format, ...)\t\\\n\tdev_printk(level,\t\t\t\t\\\n\t\t   &(psmouse)->ps2dev.serio->dev,\t\\\n\t\t   psmouse_fmt(format), ##__VA_ARGS__)\n\n#ifdef CONFIG_MOUSE_PS2_SMBUS\n\nint psmouse_smbus_module_init(void);\nvoid psmouse_smbus_module_exit(void);\n\nstruct i2c_board_info;\n\nint psmouse_smbus_init(struct psmouse *psmouse,\n\t\t       const struct i2c_board_info *board,\n\t\t       const void *pdata, size_t pdata_size,\n\t\t       bool need_deactivate,\n\t\t       bool leave_breadcrumbs);\nvoid psmouse_smbus_cleanup(struct psmouse *psmouse);\n\n#else  \n\nstatic inline int psmouse_smbus_module_init(void)\n{\n\treturn 0;\n}\n\nstatic inline void psmouse_smbus_module_exit(void)\n{\n}\n\nstatic inline void psmouse_smbus_cleanup(struct psmouse *psmouse)\n{\n}\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}