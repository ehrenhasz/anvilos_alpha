{
  "module_name": "rmi_driver.h",
  "hash_id": "71bc294415df7f2950cda6ff96085b87a014d35f319f47fc12705c8620299d35",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/rmi4/rmi_driver.h",
  "human_readable_source": " \n \n\n#ifndef _RMI_DRIVER_H\n#define _RMI_DRIVER_H\n\n#include <linux/ctype.h>\n#include <linux/hrtimer.h>\n#include <linux/ktime.h>\n#include <linux/input.h>\n#include \"rmi_bus.h\"\n\n#define SYNAPTICS_INPUT_DEVICE_NAME \"Synaptics RMI4 Touch Sensor\"\n#define SYNAPTICS_VENDOR_ID 0x06cb\n\n#define GROUP(_attrs) { \\\n\t.attrs = _attrs,  \\\n}\n\n#define PDT_PROPERTIES_LOCATION 0x00EF\n#define BSR_LOCATION 0x00FE\n\n#define RMI_PDT_PROPS_HAS_BSR 0x02\n\n#define NAME_BUFFER_SIZE 256\n\n#define RMI_PDT_ENTRY_SIZE 6\n#define RMI_PDT_FUNCTION_VERSION_MASK   0x60\n#define RMI_PDT_INT_SOURCE_COUNT_MASK   0x07\n\n#define PDT_START_SCAN_LOCATION 0x00e9\n#define PDT_END_SCAN_LOCATION\t0x0005\n#define RMI4_END_OF_PDT(id) ((id) == 0x00 || (id) == 0xff)\n\nstruct pdt_entry {\n\tu16 page_start;\n\tu8 query_base_addr;\n\tu8 command_base_addr;\n\tu8 control_base_addr;\n\tu8 data_base_addr;\n\tu8 interrupt_source_count;\n\tu8 function_version;\n\tu8 function_number;\n};\n\n#define RMI_REG_DESC_PRESENSE_BITS\t(32 * BITS_PER_BYTE)\n#define RMI_REG_DESC_SUBPACKET_BITS\t(37 * BITS_PER_BYTE)\n\n \nstruct rmi_register_desc_item {\n\tu16 reg;\n\tunsigned long reg_size;\n\tu8 num_subpackets;\n\tunsigned long subpacket_map[BITS_TO_LONGS(\n\t\t\t\tRMI_REG_DESC_SUBPACKET_BITS)];\n};\n\n \nstruct rmi_register_descriptor {\n\tunsigned long struct_size;\n\tunsigned long presense_map[BITS_TO_LONGS(RMI_REG_DESC_PRESENSE_BITS)];\n\tu8 num_registers;\n\tstruct rmi_register_desc_item *registers;\n};\n\nint rmi_read_register_desc(struct rmi_device *d, u16 addr,\n\t\t\t\tstruct rmi_register_descriptor *rdesc);\nconst struct rmi_register_desc_item *rmi_get_register_desc_item(\n\t\t\t\tstruct rmi_register_descriptor *rdesc, u16 reg);\n\n \nsize_t rmi_register_desc_calc_size(struct rmi_register_descriptor *rdesc);\nint rmi_register_desc_calc_reg_offset(\n\t\t\tstruct rmi_register_descriptor *rdesc, u16 reg);\nbool rmi_register_desc_has_subpacket(const struct rmi_register_desc_item *item,\n\t\t\tu8 subpacket);\n\nbool rmi_is_physical_driver(struct device_driver *);\nint rmi_register_physical_driver(void);\nvoid rmi_unregister_physical_driver(void);\nvoid rmi_free_function_list(struct rmi_device *rmi_dev);\nstruct rmi_function *rmi_find_function(struct rmi_device *rmi_dev, u8 number);\nint rmi_enable_sensor(struct rmi_device *rmi_dev);\nint rmi_scan_pdt(struct rmi_device *rmi_dev, void *ctx,\n\t\t int (*callback)(struct rmi_device *rmi_dev, void *ctx,\n\t\t const struct pdt_entry *entry));\nint rmi_probe_interrupts(struct rmi_driver_data *data);\nvoid rmi_enable_irq(struct rmi_device *rmi_dev, bool clear_wake);\nvoid rmi_disable_irq(struct rmi_device *rmi_dev, bool enable_wake);\nint rmi_init_functions(struct rmi_driver_data *data);\nint rmi_initial_reset(struct rmi_device *rmi_dev, void *ctx,\n\t\t      const struct pdt_entry *pdt);\n\nconst char *rmi_f01_get_product_ID(struct rmi_function *fn);\n\n#ifdef CONFIG_RMI4_F03\nint rmi_f03_overwrite_button(struct rmi_function *fn, unsigned int button,\n\t\t\t     int value);\nvoid rmi_f03_commit_buttons(struct rmi_function *fn);\n#else\nstatic inline int rmi_f03_overwrite_button(struct rmi_function *fn,\n\t\t\t\t\t   unsigned int button, int value)\n{\n\treturn 0;\n}\nstatic inline void rmi_f03_commit_buttons(struct rmi_function *fn) {}\n#endif\n\n#ifdef CONFIG_RMI4_F34\nint rmi_f34_create_sysfs(struct rmi_device *rmi_dev);\nvoid rmi_f34_remove_sysfs(struct rmi_device *rmi_dev);\n#else\nstatic inline int rmi_f34_create_sysfs(struct rmi_device *rmi_dev)\n{\n\treturn 0;\n}\n\nstatic inline void rmi_f34_remove_sysfs(struct rmi_device *rmi_dev)\n{\n}\n#endif  \n\nextern struct rmi_function_handler rmi_f01_handler;\nextern struct rmi_function_handler rmi_f03_handler;\nextern struct rmi_function_handler rmi_f11_handler;\nextern struct rmi_function_handler rmi_f12_handler;\nextern struct rmi_function_handler rmi_f30_handler;\nextern struct rmi_function_handler rmi_f34_handler;\nextern struct rmi_function_handler rmi_f3a_handler;\nextern struct rmi_function_handler rmi_f54_handler;\nextern struct rmi_function_handler rmi_f55_handler;\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}