{
  "module_name": "rmi_bus.h",
  "hash_id": "d1691167f83b4af6cbe6dcf97c1deaeae0010b40b0f5979905c58f5e1860d0f7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/rmi4/rmi_bus.h",
  "human_readable_source": " \n \n\n#ifndef _RMI_BUS_H\n#define _RMI_BUS_H\n\n#include <linux/rmi.h>\n\nstruct rmi_device;\n\n \n#define RMI_FN_MAX_IRQS\t6\n\n \nstruct rmi_function {\n\tstruct rmi_function_descriptor fd;\n\tstruct rmi_device *rmi_dev;\n\tstruct device dev;\n\tstruct list_head node;\n\n\tunsigned int num_of_irqs;\n\tint irq[RMI_FN_MAX_IRQS];\n\tunsigned int irq_pos;\n\tunsigned long irq_mask[];\n};\n\n#define to_rmi_function(d)\tcontainer_of(d, struct rmi_function, dev)\n\nbool rmi_is_function_device(struct device *dev);\n\nint __must_check rmi_register_function(struct rmi_function *);\nvoid rmi_unregister_function(struct rmi_function *);\n\n \nstruct rmi_function_handler {\n\tstruct device_driver driver;\n\n\tu8 func;\n\n\tint (*probe)(struct rmi_function *fn);\n\tvoid (*remove)(struct rmi_function *fn);\n\tint (*config)(struct rmi_function *fn);\n\tint (*reset)(struct rmi_function *fn);\n\tirqreturn_t (*attention)(int irq, void *ctx);\n\tint (*suspend)(struct rmi_function *fn);\n\tint (*resume)(struct rmi_function *fn);\n};\n\n#define to_rmi_function_handler(d) \\\n\t\tcontainer_of(d, struct rmi_function_handler, driver)\n\nint __must_check __rmi_register_function_handler(struct rmi_function_handler *,\n\t\t\t\t\t\t struct module *, const char *);\n#define rmi_register_function_handler(handler) \\\n\t__rmi_register_function_handler(handler, THIS_MODULE, KBUILD_MODNAME)\n\nvoid rmi_unregister_function_handler(struct rmi_function_handler *);\n\n#define to_rmi_driver(d) \\\n\tcontainer_of(d, struct rmi_driver, driver)\n\n#define to_rmi_device(d) container_of(d, struct rmi_device, dev)\n\nstatic inline struct rmi_device_platform_data *\nrmi_get_platform_data(struct rmi_device *d)\n{\n\treturn &d->xport->pdata;\n}\n\nbool rmi_is_physical_device(struct device *dev);\n\n \nstatic inline int rmi_reset(struct rmi_device *d)\n{\n\treturn d->driver->reset_handler(d);\n}\n\n \nstatic inline int rmi_read(struct rmi_device *d, u16 addr, u8 *buf)\n{\n\treturn d->xport->ops->read_block(d->xport, addr, buf, 1);\n}\n\n \nstatic inline int rmi_read_block(struct rmi_device *d, u16 addr,\n\t\t\t\t void *buf, size_t len)\n{\n\treturn d->xport->ops->read_block(d->xport, addr, buf, len);\n}\n\n \nstatic inline int rmi_write(struct rmi_device *d, u16 addr, u8 data)\n{\n\treturn d->xport->ops->write_block(d->xport, addr, &data, 1);\n}\n\n \nstatic inline int rmi_write_block(struct rmi_device *d, u16 addr,\n\t\t\t\t  const void *buf, size_t len)\n{\n\treturn d->xport->ops->write_block(d->xport, addr, buf, len);\n}\n\nint rmi_for_each_dev(void *data, int (*func)(struct device *dev, void *data));\n\nextern struct bus_type rmi_bus_type;\n\nint rmi_of_property_read_u32(struct device *dev, u32 *result,\n\t\t\t\tconst char *prop, bool optional);\n\n#define RMI_DEBUG_CORE\t\t\tBIT(0)\n#define RMI_DEBUG_XPORT\t\t\tBIT(1)\n#define RMI_DEBUG_FN\t\t\tBIT(2)\n#define RMI_DEBUG_2D_SENSOR\t\tBIT(3)\n\nvoid rmi_dbg(int flags, struct device *dev, const char *fmt, ...);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}