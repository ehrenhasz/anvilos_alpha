{
  "module_name": "ad714x-i2c.c",
  "hash_id": "d6ee27e3e54de728285d620b8d1beef0c8b257e626ccf0db53cdafbca4e63403",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/misc/ad714x-i2c.c",
  "human_readable_source": "\n \n\n#include <linux/input.h>\t \n#include <linux/i2c.h>\n#include <linux/module.h>\n#include <linux/types.h>\n#include <linux/pm.h>\n#include \"ad714x.h\"\n\nstatic int ad714x_i2c_write(struct ad714x_chip *chip,\n\t\t\t    unsigned short reg, unsigned short data)\n{\n\tstruct i2c_client *client = to_i2c_client(chip->dev);\n\tint error;\n\n\tchip->xfer_buf[0] = cpu_to_be16(reg);\n\tchip->xfer_buf[1] = cpu_to_be16(data);\n\n\terror = i2c_master_send(client, (u8 *)chip->xfer_buf,\n\t\t\t\t2 * sizeof(*chip->xfer_buf));\n\tif (unlikely(error < 0)) {\n\t\tdev_err(&client->dev, \"I2C write error: %d\\n\", error);\n\t\treturn error;\n\t}\n\n\treturn 0;\n}\n\nstatic int ad714x_i2c_read(struct ad714x_chip *chip,\n\t\t\t   unsigned short reg, unsigned short *data, size_t len)\n{\n\tstruct i2c_client *client = to_i2c_client(chip->dev);\n\tint i;\n\tint error;\n\n\tchip->xfer_buf[0] = cpu_to_be16(reg);\n\n\terror = i2c_master_send(client, (u8 *)chip->xfer_buf,\n\t\t\t\tsizeof(*chip->xfer_buf));\n\tif (error >= 0)\n\t\terror = i2c_master_recv(client, (u8 *)chip->xfer_buf,\n\t\t\t\t\tlen * sizeof(*chip->xfer_buf));\n\n\tif (unlikely(error < 0)) {\n\t\tdev_err(&client->dev, \"I2C read error: %d\\n\", error);\n\t\treturn error;\n\t}\n\n\tfor (i = 0; i < len; i++)\n\t\tdata[i] = be16_to_cpu(chip->xfer_buf[i]);\n\n\treturn 0;\n}\n\nstatic int ad714x_i2c_probe(struct i2c_client *client)\n{\n\tstruct ad714x_chip *chip;\n\n\tchip = ad714x_probe(&client->dev, BUS_I2C, client->irq,\n\t\t\t    ad714x_i2c_read, ad714x_i2c_write);\n\tif (IS_ERR(chip))\n\t\treturn PTR_ERR(chip);\n\n\ti2c_set_clientdata(client, chip);\n\n\treturn 0;\n}\n\nstatic const struct i2c_device_id ad714x_id[] = {\n\t{ \"ad7142_captouch\", 0 },\n\t{ \"ad7143_captouch\", 0 },\n\t{ \"ad7147_captouch\", 0 },\n\t{ \"ad7147a_captouch\", 0 },\n\t{ \"ad7148_captouch\", 0 },\n\t{ }\n};\nMODULE_DEVICE_TABLE(i2c, ad714x_id);\n\nstatic struct i2c_driver ad714x_i2c_driver = {\n\t.driver = {\n\t\t.name = \"ad714x_captouch\",\n\t\t.pm   = pm_sleep_ptr(&ad714x_pm),\n\t},\n\t.probe = ad714x_i2c_probe,\n\t.id_table = ad714x_id,\n};\n\nmodule_i2c_driver(ad714x_i2c_driver);\n\nMODULE_DESCRIPTION(\"Analog Devices AD714X Capacitance Touch Sensor I2C Bus Driver\");\nMODULE_AUTHOR(\"Barry Song <21cnbao@gmail.com>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}