{
  "module_name": "cma3000_d0x_i2c.c",
  "hash_id": "8647899040fce48644d2935cbafde49e389f03e81c8235fe9cc408aaf7d0a901",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/misc/cma3000_d0x_i2c.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/i2c.h>\n#include <linux/input/cma3000.h>\n#include \"cma3000_d0x.h\"\n\nstatic int cma3000_i2c_set(struct device *dev,\n\t\t\t   u8 reg, u8 val, char *msg)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\tint ret;\n\n\tret = i2c_smbus_write_byte_data(client, reg, val);\n\tif (ret < 0)\n\t\tdev_err(&client->dev,\n\t\t\t\"%s failed (%s, %d)\\n\", __func__, msg, ret);\n\treturn ret;\n}\n\nstatic int cma3000_i2c_read(struct device *dev, u8 reg, char *msg)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\tint ret;\n\n\tret = i2c_smbus_read_byte_data(client, reg);\n\tif (ret < 0)\n\t\tdev_err(&client->dev,\n\t\t\t\"%s failed (%s, %d)\\n\", __func__, msg, ret);\n\treturn ret;\n}\n\nstatic const struct cma3000_bus_ops cma3000_i2c_bops = {\n\t.bustype\t= BUS_I2C,\n#define CMA3000_BUSI2C     (0 << 4)\n\t.ctrl_mod\t= CMA3000_BUSI2C,\n\t.read\t\t= cma3000_i2c_read,\n\t.write\t\t= cma3000_i2c_set,\n};\n\nstatic int cma3000_i2c_probe(struct i2c_client *client)\n{\n\tstruct cma3000_accl_data *data;\n\n\tdata = cma3000_init(&client->dev, client->irq, &cma3000_i2c_bops);\n\tif (IS_ERR(data))\n\t\treturn PTR_ERR(data);\n\n\ti2c_set_clientdata(client, data);\n\n\treturn 0;\n}\n\nstatic void cma3000_i2c_remove(struct i2c_client *client)\n{\n\tstruct cma3000_accl_data *data = i2c_get_clientdata(client);\n\n\tcma3000_exit(data);\n}\n\nstatic int cma3000_i2c_suspend(struct device *dev)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\tstruct cma3000_accl_data *data = i2c_get_clientdata(client);\n\n\tcma3000_suspend(data);\n\n\treturn 0;\n}\n\nstatic int cma3000_i2c_resume(struct device *dev)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\tstruct cma3000_accl_data *data = i2c_get_clientdata(client);\n\n\tcma3000_resume(data);\n\n\treturn 0;\n}\n\nstatic const struct dev_pm_ops cma3000_i2c_pm_ops = {\n\t.suspend\t= cma3000_i2c_suspend,\n\t.resume\t\t= cma3000_i2c_resume,\n};\n\nstatic const struct i2c_device_id cma3000_i2c_id[] = {\n\t{ \"cma3000_d01\", 0 },\n\t{ },\n};\n\nMODULE_DEVICE_TABLE(i2c, cma3000_i2c_id);\n\nstatic struct i2c_driver cma3000_i2c_driver = {\n\t.probe\t\t= cma3000_i2c_probe,\n\t.remove\t\t= cma3000_i2c_remove,\n\t.id_table\t= cma3000_i2c_id,\n\t.driver = {\n\t\t.name\t= \"cma3000_i2c_accl\",\n\t\t.pm\t= pm_sleep_ptr(&cma3000_i2c_pm_ops),\n\t},\n};\n\nmodule_i2c_driver(cma3000_i2c_driver);\n\nMODULE_DESCRIPTION(\"CMA3000-D0x Accelerometer I2C Driver\");\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Hemanth V <hemanthv@ti.com>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}