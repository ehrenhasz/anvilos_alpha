{
  "module_name": "goodix.h",
  "hash_id": "25f5a425b49041e1354f9188983d7ea29b688a388cbeb2595a8bb9bd4893b987",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/touchscreen/goodix.h",
  "human_readable_source": " \n#ifndef __GOODIX_H__\n#define __GOODIX_H__\n\n#include <linux/gpio/consumer.h>\n#include <linux/i2c.h>\n#include <linux/input.h>\n#include <linux/input/mt.h>\n#include <linux/input/touchscreen.h>\n#include <linux/regulator/consumer.h>\n\n \n#define GOODIX_REG_MISCTL_DSP_CTL\t\t0x4010\n#define GOODIX_REG_MISCTL_SRAM_BANK\t\t0x4048\n#define GOODIX_REG_MISCTL_MEM_CD_EN\t\t0x4049\n#define GOODIX_REG_MISCTL_CACHE_EN\t\t0x404B\n#define GOODIX_REG_MISCTL_TMR0_EN\t\t0x40B0\n#define GOODIX_REG_MISCTL_SWRST\t\t\t0x4180\n#define GOODIX_REG_MISCTL_CPU_SWRST_PULSE\t0x4184\n#define GOODIX_REG_MISCTL_BOOTCTL\t\t0x4190\n#define GOODIX_REG_MISCTL_BOOT_OPT\t\t0x4218\n#define GOODIX_REG_MISCTL_BOOT_CTL\t\t0x5094\n\n#define GOODIX_REG_FW_SIG\t\t\t0x8000\n#define GOODIX_FW_SIG_LEN\t\t\t10\n\n#define GOODIX_REG_MAIN_CLK\t\t\t0x8020\n#define GOODIX_MAIN_CLK_LEN\t\t\t6\n\n#define GOODIX_REG_COMMAND\t\t\t0x8040\n#define GOODIX_CMD_SCREEN_OFF\t\t\t0x05\n\n#define GOODIX_REG_SW_WDT\t\t\t0x8041\n\n#define GOODIX_REG_REQUEST\t\t\t0x8043\n#define GOODIX_RQST_RESPONDED\t\t\t0x00\n#define GOODIX_RQST_CONFIG\t\t\t0x01\n#define GOODIX_RQST_BAK_REF\t\t\t0x02\n#define GOODIX_RQST_RESET\t\t\t0x03\n#define GOODIX_RQST_MAIN_CLOCK\t\t\t0x04\n \n#define GOODIX_RQST_UNKNOWN\t\t\t0x06\n#define GOODIX_RQST_IDLE\t\t\t0xFF\n\n#define GOODIX_REG_STATUS\t\t\t0x8044\n\n#define GOODIX_GT1X_REG_CONFIG_DATA\t\t0x8050\n#define GOODIX_GT9X_REG_CONFIG_DATA\t\t0x8047\n#define GOODIX_REG_ID\t\t\t\t0x8140\n#define GOODIX_READ_COOR_ADDR\t\t\t0x814E\n#define GOODIX_REG_BAK_REF\t\t\t0x99D0\n\n#define GOODIX_ID_MAX_LEN\t\t\t4\n#define GOODIX_CONFIG_MAX_LENGTH\t\t240\n#define GOODIX_MAX_KEYS\t\t\t\t7\n\nenum goodix_irq_pin_access_method {\n\tIRQ_PIN_ACCESS_NONE,\n\tIRQ_PIN_ACCESS_GPIO,\n\tIRQ_PIN_ACCESS_ACPI_GPIO,\n\tIRQ_PIN_ACCESS_ACPI_METHOD,\n};\n\nstruct goodix_ts_data;\n\nstruct goodix_chip_data {\n\tu16 config_addr;\n\tint config_len;\n\tint (*check_config)(struct goodix_ts_data *ts, const u8 *cfg, int len);\n\tvoid (*calc_config_checksum)(struct goodix_ts_data *ts);\n};\n\nstruct goodix_ts_data {\n\tstruct i2c_client *client;\n\tstruct input_dev *input_dev;\n\tstruct input_dev *input_pen;\n\tconst struct goodix_chip_data *chip;\n\tconst char *firmware_name;\n\tstruct touchscreen_properties prop;\n\tunsigned int max_touch_num;\n\tunsigned int int_trigger_type;\n\tstruct regulator *avdd28;\n\tstruct regulator *vddio;\n\tstruct gpio_desc *gpiod_int;\n\tstruct gpio_desc *gpiod_rst;\n\tint gpio_count;\n\tint gpio_int_idx;\n\tenum gpiod_flags gpiod_rst_flags;\n\tchar id[GOODIX_ID_MAX_LEN + 1];\n\tchar cfg_name[64];\n\tu16 version;\n\tbool reset_controller_at_probe;\n\tbool load_cfg_from_disk;\n\tint pen_input_registered;\n\tstruct completion firmware_loading_complete;\n\tunsigned long irq_flags;\n\tenum goodix_irq_pin_access_method irq_pin_access_method;\n\tunsigned int contact_size;\n\tu8 config[GOODIX_CONFIG_MAX_LENGTH];\n\tunsigned short keymap[GOODIX_MAX_KEYS];\n\tu8 main_clk[GOODIX_MAIN_CLK_LEN];\n\tint bak_ref_len;\n\tu8 *bak_ref;\n};\n\nint goodix_i2c_read(struct i2c_client *client, u16 reg, u8 *buf, int len);\nint goodix_i2c_write(struct i2c_client *client, u16 reg, const u8 *buf, int len);\nint goodix_i2c_write_u8(struct i2c_client *client, u16 reg, u8 value);\nint goodix_send_cfg(struct goodix_ts_data *ts, const u8 *cfg, int len);\nint goodix_int_sync(struct goodix_ts_data *ts);\nint goodix_reset_no_int_sync(struct goodix_ts_data *ts);\n\nint goodix_firmware_check(struct goodix_ts_data *ts);\nbool goodix_handle_fw_request(struct goodix_ts_data *ts);\nvoid goodix_save_bak_ref(struct goodix_ts_data *ts);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}