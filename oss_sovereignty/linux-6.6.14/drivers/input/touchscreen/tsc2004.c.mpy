{
  "module_name": "tsc2004.c",
  "hash_id": "37fca09c1018ff065f5b0b7c608771991e3f354e4c1b0d04ac96f2a68288545f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/input/touchscreen/tsc2004.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/input.h>\n#include <linux/of.h>\n#include <linux/i2c.h>\n#include <linux/regmap.h>\n#include \"tsc200x-core.h\"\n\nstatic const struct input_id tsc2004_input_id = {\n\t.bustype = BUS_I2C,\n\t.product = 2004,\n};\n\nstatic int tsc2004_cmd(struct device *dev, u8 cmd)\n{\n\tu8 tx = TSC200X_CMD | TSC200X_CMD_12BIT | cmd;\n\ts32 data;\n\tstruct i2c_client *i2c = to_i2c_client(dev);\n\n\tdata = i2c_smbus_write_byte(i2c, tx);\n\tif (data < 0) {\n\t\tdev_err(dev, \"%s: failed, command: %x i2c error: %d\\n\",\n\t\t\t__func__, cmd, data);\n\t\treturn data;\n\t}\n\n\treturn 0;\n}\n\nstatic int tsc2004_probe(struct i2c_client *i2c)\n\n{\n\treturn tsc200x_probe(&i2c->dev, i2c->irq, &tsc2004_input_id,\n\t\t\t     devm_regmap_init_i2c(i2c, &tsc200x_regmap_config),\n\t\t\t     tsc2004_cmd);\n}\n\nstatic void tsc2004_remove(struct i2c_client *i2c)\n{\n\ttsc200x_remove(&i2c->dev);\n}\n\nstatic const struct i2c_device_id tsc2004_idtable[] = {\n\t{ \"tsc2004\", 0 },\n\t{ }\n};\nMODULE_DEVICE_TABLE(i2c, tsc2004_idtable);\n\n#ifdef CONFIG_OF\nstatic const struct of_device_id tsc2004_of_match[] = {\n\t{ .compatible = \"ti,tsc2004\" },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, tsc2004_of_match);\n#endif\n\nstatic struct i2c_driver tsc2004_driver = {\n\t.driver = {\n\t\t.name   = \"tsc2004\",\n\t\t.of_match_table = of_match_ptr(tsc2004_of_match),\n\t\t.pm     = pm_sleep_ptr(&tsc200x_pm_ops),\n\t},\n\t.id_table       = tsc2004_idtable,\n\t.probe          = tsc2004_probe,\n\t.remove         = tsc2004_remove,\n};\nmodule_i2c_driver(tsc2004_driver);\n\nMODULE_AUTHOR(\"Michael Welling <mwelling@ieee.org>\");\nMODULE_DESCRIPTION(\"TSC2004 Touchscreen Driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}