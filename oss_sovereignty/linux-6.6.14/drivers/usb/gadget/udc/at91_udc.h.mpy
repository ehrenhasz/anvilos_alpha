{
  "module_name": "at91_udc.h",
  "hash_id": "7341c3e9c7869ac3177479749ef63e43e97e22a2cf7ddaee54c343517cc369b7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/udc/at91_udc.h",
  "human_readable_source": "\n \n\n#ifndef AT91_UDC_H\n#define AT91_UDC_H\n\n \n\n#define AT91_UDP_FRM_NUM\t0x00\t\t \n#define     AT91_UDP_NUM\t(0x7ff <<  0)\t \n#define     AT91_UDP_FRM_ERR\t(1     << 16)\t \n#define     AT91_UDP_FRM_OK\t(1     << 17)\t \n\n#define AT91_UDP_GLB_STAT\t0x04\t\t \n#define     AT91_UDP_FADDEN\t(1 <<  0)\t \n#define     AT91_UDP_CONFG\t(1 <<  1)\t \n#define     AT91_UDP_ESR\t(1 <<  2)\t \n#define     AT91_UDP_RSMINPR\t(1 <<  3)\t \n#define     AT91_UDP_RMWUPE\t(1 <<  4)\t \n\n#define AT91_UDP_FADDR\t\t0x08\t\t \n#define     AT91_UDP_FADD\t(0x7f << 0)\t \n#define     AT91_UDP_FEN\t(1    << 8)\t \n\n#define AT91_UDP_IER\t\t0x10\t\t \n#define AT91_UDP_IDR\t\t0x14\t\t \n#define AT91_UDP_IMR\t\t0x18\t\t \n\n#define AT91_UDP_ISR\t\t0x1c\t\t \n#define     AT91_UDP_EP(n)\t(1 << (n))\t \n#define     AT91_UDP_RXSUSP\t(1 <<  8) \t \n#define     AT91_UDP_RXRSM\t(1 <<  9)\t \n#define     AT91_UDP_EXTRSM\t(1 << 10)\t \n#define     AT91_UDP_SOFINT\t(1 << 11)\t \n#define     AT91_UDP_ENDBUSRES\t(1 << 12)\t \n#define     AT91_UDP_WAKEUP\t(1 << 13)\t \n\n#define AT91_UDP_ICR\t\t0x20\t\t \n#define AT91_UDP_RST_EP\t\t0x28\t\t \n\n#define AT91_UDP_CSR(n)\t\t(0x30+((n)*4))\t \n#define     AT91_UDP_TXCOMP\t(1 <<  0)\t \n#define     AT91_UDP_RX_DATA_BK0 (1 <<  1)\t \n#define     AT91_UDP_RXSETUP\t(1 <<  2)\t \n#define     AT91_UDP_STALLSENT\t(1 <<  3)\t \n#define     AT91_UDP_TXPKTRDY\t(1 <<  4)\t \n#define     AT91_UDP_FORCESTALL\t(1 <<  5)\t \n#define     AT91_UDP_RX_DATA_BK1 (1 <<  6)\t \n#define     AT91_UDP_DIR\t(1 <<  7)\t \n#define     AT91_UDP_EPTYPE\t(7 <<  8)\t \n#define\t\tAT91_UDP_EPTYPE_CTRL\t\t(0 <<  8)\n#define\t\tAT91_UDP_EPTYPE_ISO_OUT\t\t(1 <<  8)\n#define\t\tAT91_UDP_EPTYPE_BULK_OUT\t(2 <<  8)\n#define\t\tAT91_UDP_EPTYPE_INT_OUT\t\t(3 <<  8)\n#define\t\tAT91_UDP_EPTYPE_ISO_IN\t\t(5 <<  8)\n#define\t\tAT91_UDP_EPTYPE_BULK_IN\t\t(6 <<  8)\n#define\t\tAT91_UDP_EPTYPE_INT_IN\t\t(7 <<  8)\n#define     AT91_UDP_DTGLE\t(1 << 11)\t \n#define     AT91_UDP_EPEDS\t(1 << 15)\t \n#define     AT91_UDP_RXBYTECNT\t(0x7ff << 16)\t \n\n#define AT91_UDP_FDR(n)\t\t(0x50+((n)*4))\t \n\n#define AT91_UDP_TXVC\t\t0x74\t\t \n#define     AT91_UDP_TXVC_TXVDIS (1 << 8)\t \n#define     AT91_UDP_TXVC_PUON   (1 << 9)\t \n\n \n\n \n\n#define\tNUM_ENDPOINTS\t6\n\n \n#define\tMINIMUS_INTERRUPTUS \\\n\t(AT91_UDP_ENDBUSRES | AT91_UDP_RXRSM | AT91_UDP_RXSUSP)\n\nstruct at91_ep {\n\tstruct usb_ep\t\t\tep;\n\tstruct list_head\t\tqueue;\n\tstruct at91_udc\t\t\t*udc;\n\tvoid __iomem\t\t\t*creg;\n\n\tunsigned\t\t\tmaxpacket:16;\n\tu8\t\t\t\tint_mask;\n\tunsigned\t\t\tis_pingpong:1;\n\n\tunsigned\t\t\tstopped:1;\n\tunsigned\t\t\tis_in:1;\n\tunsigned\t\t\tis_iso:1;\n\tunsigned\t\t\tfifo_bank:1;\n};\n\nstruct at91_udc_caps {\n\tint (*init)(struct at91_udc *udc);\n\tvoid (*pullup)(struct at91_udc *udc, int is_on);\n};\n\nstruct at91_udc_data {\n\tstruct gpio_desc  *vbus_pin;\t\t \n\tu8\t          vbus_polled;\t\t \n\tstruct gpio_desc  *pullup_pin;\t\t \n};\n\n \nstruct at91_udc {\n\tstruct usb_gadget\t\tgadget;\n\tstruct at91_ep\t\t\tep[NUM_ENDPOINTS];\n\tstruct usb_gadget_driver\t*driver;\n\tconst struct at91_udc_caps\t*caps;\n\tunsigned\t\t\tvbus:1;\n\tunsigned\t\t\tenabled:1;\n\tunsigned\t\t\tclocked:1;\n\tunsigned\t\t\tsuspended:1;\n\tunsigned\t\t\treq_pending:1;\n\tunsigned\t\t\twait_for_addr_ack:1;\n\tunsigned\t\t\twait_for_config_ack:1;\n\tunsigned\t\t\tactive_suspend:1;\n\tu8\t\t\t\taddr;\n\tstruct at91_udc_data\t\tboard;\n\tstruct clk\t\t\t*iclk, *fclk;\n\tstruct platform_device\t\t*pdev;\n\tstruct proc_dir_entry\t\t*pde;\n\tvoid __iomem\t\t\t*udp_baseaddr;\n\tint\t\t\t\tudp_irq;\n\tspinlock_t\t\t\tlock;\n\tstruct timer_list\t\tvbus_timer;\n\tstruct work_struct\t\tvbus_timer_work;\n\tstruct regmap\t\t\t*matrix;\n};\n\nstatic inline struct at91_udc *to_udc(struct usb_gadget *g)\n{\n\treturn container_of(g, struct at91_udc, gadget);\n}\n\nstruct at91_request {\n\tstruct usb_request\t\treq;\n\tstruct list_head\t\tqueue;\n};\n\n \n\n#ifdef VERBOSE_DEBUG\n#    define VDBG\t\tDBG\n#else\n#    define VDBG(stuff...)\tdo{}while(0)\n#endif\n\n#ifdef PACKET_TRACE\n#    define PACKET\t\tVDBG\n#else\n#    define PACKET(stuff...)\tdo{}while(0)\n#endif\n\n#define ERR(stuff...)\t\tpr_err(\"udc: \" stuff)\n#define WARNING(stuff...)\tpr_warn(\"udc: \" stuff)\n#define INFO(stuff...)\t\tpr_info(\"udc: \" stuff)\n#define DBG(stuff...)\t\tpr_debug(\"udc: \" stuff)\n\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}