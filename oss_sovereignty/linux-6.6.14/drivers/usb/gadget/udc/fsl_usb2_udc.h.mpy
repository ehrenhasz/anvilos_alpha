{
  "module_name": "fsl_usb2_udc.h",
  "hash_id": "2a104e18531c180750cb9553649a42131d80262d4adaf91fddfb58c32a86017a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/udc/fsl_usb2_udc.h",
  "human_readable_source": "\n \n#ifndef __FSL_USB2_UDC_H\n#define __FSL_USB2_UDC_H\n\n#include <linux/usb/ch9.h>\n#include <linux/usb/gadget.h>\n\n \n#define USB_MAX_CTRL_PAYLOAD\t\t64\n#define USB_DR_SYS_OFFSET\t\t0x400\n\n  \nstruct usb_dr_device {\n\t \n\tu8 res1[256];\n\tu16 caplength;\t\t \n\tu16 hciversion;\t\t \n\tu32 hcsparams;\t\t \n\tu32 hccparams;\t\t \n\tu8 res2[20];\n\tu32 dciversion;\t\t \n\tu32 dccparams;\t\t \n\tu8 res3[24];\n\t \n\tu32 usbcmd;\t\t \n\tu32 usbsts;\t\t \n\tu32 usbintr;\t\t \n\tu32 frindex;\t\t \n\tu8 res4[4];\n\tu32 deviceaddr;\t\t \n\tu32 endpointlistaddr;\t \n\tu8 res5[4];\n\tu32 burstsize;\t\t \n\tu32 txttfilltuning;\t \n\tu8 res6[24];\n\tu32 configflag;\t\t \n\tu32 portsc1;\t\t \n\tu8 res7[28];\n\tu32 otgsc;\t\t \n\tu32 usbmode;\t\t \n\tu32 endptsetupstat;\t \n\tu32 endpointprime;\t \n\tu32 endptflush;\t\t \n\tu32 endptstatus;\t \n\tu32 endptcomplete;\t \n\tu32 endptctrl[6];\t \n};\n\n  \nstruct usb_dr_host {\n\t \n\tu8 res1[256];\n\tu16 caplength;\t\t \n\tu16 hciversion;\t\t \n\tu32 hcsparams;\t\t \n\tu32 hccparams;\t\t \n\tu8 res2[20];\n\tu32 dciversion;\t\t \n\tu32 dccparams;\t\t \n\tu8 res3[24];\n\t \n\tu32 usbcmd;\t\t \n\tu32 usbsts;\t\t \n\tu32 usbintr;\t\t \n\tu32 frindex;\t\t \n\tu8 res4[4];\n\tu32 periodiclistbase;\t \n\tu32 asynclistaddr;\t \n\tu8 res5[4];\n\tu32 burstsize;\t\t \n\tu32 txttfilltuning;\t \n\tu8 res6[24];\n\tu32 configflag;\t\t \n\tu32 portsc1;\t\t \n\tu8 res7[28];\n\tu32 otgsc;\t\t \n\tu32 usbmode;\t\t \n\tu32 endptsetupstat;\t \n\tu32 endpointprime;\t \n\tu32 endptflush;\t\t \n\tu32 endptstatus;\t \n\tu32 endptcomplete;\t \n\tu32 endptctrl[6];\t \n};\n\n  \nstruct usb_sys_interface {\n\tu32 snoop1;\n\tu32 snoop2;\n\tu32 age_cnt_thresh;\t \n\tu32 pri_ctrl;\t\t \n\tu32 si_ctrl;\t\t \n\tu8 res[236];\n\tu32 control;\t\t \n};\n\n \n#define WAIT_FOR_SETUP          0\n#define DATA_STATE_XMIT         1\n#define DATA_STATE_NEED_ZLP     2\n#define WAIT_FOR_OUT_STATUS     3\n#define DATA_STATE_RECV         4\n\n \n#define DCCPARAMS_DC\t\t\t\t0x00000080\n#define DCCPARAMS_DEN_MASK\t\t\t0x0000001f\n\n \n#define\tUSB_FRINDEX_MASKS\t\t\t0x3fff\n \n#define  USB_CMD_RUN_STOP                     0x00000001\n#define  USB_CMD_CTRL_RESET                   0x00000002\n#define  USB_CMD_PERIODIC_SCHEDULE_EN         0x00000010\n#define  USB_CMD_ASYNC_SCHEDULE_EN            0x00000020\n#define  USB_CMD_INT_AA_DOORBELL              0x00000040\n#define  USB_CMD_ASP                          0x00000300\n#define  USB_CMD_ASYNC_SCH_PARK_EN            0x00000800\n#define  USB_CMD_SUTW                         0x00002000\n#define  USB_CMD_ATDTW                        0x00004000\n#define  USB_CMD_ITC                          0x00FF0000\n\n \n#define  USB_CMD_FRAME_SIZE_1024              0x00000000\n#define  USB_CMD_FRAME_SIZE_512               0x00000004\n#define  USB_CMD_FRAME_SIZE_256               0x00000008\n#define  USB_CMD_FRAME_SIZE_128               0x0000000C\n#define  USB_CMD_FRAME_SIZE_64                0x00008000\n#define  USB_CMD_FRAME_SIZE_32                0x00008004\n#define  USB_CMD_FRAME_SIZE_16                0x00008008\n#define  USB_CMD_FRAME_SIZE_8                 0x0000800C\n\n \n#define  USB_CMD_ASP_00                       0x00000000\n#define  USB_CMD_ASP_01                       0x00000100\n#define  USB_CMD_ASP_10                       0x00000200\n#define  USB_CMD_ASP_11                       0x00000300\n#define  USB_CMD_ASP_BIT_POS                  8\n\n \n#define  USB_CMD_ITC_NO_THRESHOLD             0x00000000\n#define  USB_CMD_ITC_1_MICRO_FRM              0x00010000\n#define  USB_CMD_ITC_2_MICRO_FRM              0x00020000\n#define  USB_CMD_ITC_4_MICRO_FRM              0x00040000\n#define  USB_CMD_ITC_8_MICRO_FRM              0x00080000\n#define  USB_CMD_ITC_16_MICRO_FRM             0x00100000\n#define  USB_CMD_ITC_32_MICRO_FRM             0x00200000\n#define  USB_CMD_ITC_64_MICRO_FRM             0x00400000\n#define  USB_CMD_ITC_BIT_POS                  16\n\n \n#define  USB_STS_INT                          0x00000001\n#define  USB_STS_ERR                          0x00000002\n#define  USB_STS_PORT_CHANGE                  0x00000004\n#define  USB_STS_FRM_LST_ROLL                 0x00000008\n#define  USB_STS_SYS_ERR                      0x00000010\n#define  USB_STS_IAA                          0x00000020\n#define  USB_STS_RESET                        0x00000040\n#define  USB_STS_SOF                          0x00000080\n#define  USB_STS_SUSPEND                      0x00000100\n#define  USB_STS_HC_HALTED                    0x00001000\n#define  USB_STS_RCL                          0x00002000\n#define  USB_STS_PERIODIC_SCHEDULE            0x00004000\n#define  USB_STS_ASYNC_SCHEDULE               0x00008000\n\n \n#define  USB_INTR_INT_EN                      0x00000001\n#define  USB_INTR_ERR_INT_EN                  0x00000002\n#define  USB_INTR_PTC_DETECT_EN               0x00000004\n#define  USB_INTR_FRM_LST_ROLL_EN             0x00000008\n#define  USB_INTR_SYS_ERR_EN                  0x00000010\n#define  USB_INTR_ASYN_ADV_EN                 0x00000020\n#define  USB_INTR_RESET_EN                    0x00000040\n#define  USB_INTR_SOF_EN                      0x00000080\n#define  USB_INTR_DEVICE_SUSPEND              0x00000100\n\n \n#define  USB_DEVICE_ADDRESS_MASK              0xFE000000\n#define  USB_DEVICE_ADDRESS_BIT_POS           25\n\n \n#define USB_EP_LIST_ADDRESS_MASK              0xfffff800\n\n \n#define  PORTSCX_CURRENT_CONNECT_STATUS       0x00000001\n#define  PORTSCX_CONNECT_STATUS_CHANGE        0x00000002\n#define  PORTSCX_PORT_ENABLE                  0x00000004\n#define  PORTSCX_PORT_EN_DIS_CHANGE           0x00000008\n#define  PORTSCX_OVER_CURRENT_ACT             0x00000010\n#define  PORTSCX_OVER_CURRENT_CHG             0x00000020\n#define  PORTSCX_PORT_FORCE_RESUME            0x00000040\n#define  PORTSCX_PORT_SUSPEND                 0x00000080\n#define  PORTSCX_PORT_RESET                   0x00000100\n#define  PORTSCX_LINE_STATUS_BITS             0x00000C00\n#define  PORTSCX_PORT_POWER                   0x00001000\n#define  PORTSCX_PORT_INDICTOR_CTRL           0x0000C000\n#define  PORTSCX_PORT_TEST_CTRL               0x000F0000\n#define  PORTSCX_WAKE_ON_CONNECT_EN           0x00100000\n#define  PORTSCX_WAKE_ON_CONNECT_DIS          0x00200000\n#define  PORTSCX_WAKE_ON_OVER_CURRENT         0x00400000\n#define  PORTSCX_PHY_LOW_POWER_SPD            0x00800000\n#define  PORTSCX_PORT_FORCE_FULL_SPEED        0x01000000\n#define  PORTSCX_PORT_SPEED_MASK              0x0C000000\n#define  PORTSCX_PORT_WIDTH                   0x10000000\n#define  PORTSCX_PHY_TYPE_SEL                 0xC0000000\n\n \n#define  PORTSCX_LINE_STATUS_SE0              0x00000000\n#define  PORTSCX_LINE_STATUS_JSTATE           0x00000400\n#define  PORTSCX_LINE_STATUS_KSTATE           0x00000800\n#define  PORTSCX_LINE_STATUS_UNDEF            0x00000C00\n#define  PORTSCX_LINE_STATUS_BIT_POS          10\n\n \n#define  PORTSCX_PIC_OFF                      0x00000000\n#define  PORTSCX_PIC_AMBER                    0x00004000\n#define  PORTSCX_PIC_GREEN                    0x00008000\n#define  PORTSCX_PIC_UNDEF                    0x0000C000\n#define  PORTSCX_PIC_BIT_POS                  14\n\n \n#define  PORTSCX_PTC_DISABLE                  0x00000000\n#define  PORTSCX_PTC_JSTATE                   0x00010000\n#define  PORTSCX_PTC_KSTATE                   0x00020000\n#define  PORTSCX_PTC_SEQNAK                   0x00030000\n#define  PORTSCX_PTC_PACKET                   0x00040000\n#define  PORTSCX_PTC_FORCE_EN                 0x00050000\n#define  PORTSCX_PTC_BIT_POS                  16\n\n \n#define  PORTSCX_PORT_SPEED_FULL              0x00000000\n#define  PORTSCX_PORT_SPEED_LOW               0x04000000\n#define  PORTSCX_PORT_SPEED_HIGH              0x08000000\n#define  PORTSCX_PORT_SPEED_UNDEF             0x0C000000\n#define  PORTSCX_SPEED_BIT_POS                26\n\n \n#define  PORTSCX_PTW                          0x10000000\n#define  PORTSCX_PTW_8BIT                     0x00000000\n#define  PORTSCX_PTW_16BIT                    0x10000000\n\n \n#define  PORTSCX_PTS_UTMI                     0x00000000\n#define  PORTSCX_PTS_ULPI                     0x80000000\n#define  PORTSCX_PTS_FSLS                     0xC0000000\n#define  PORTSCX_PTS_BIT_POS                  30\n\n \n#define  OTGSC_CTRL_VUSB_DISCHARGE            0x00000001\n#define  OTGSC_CTRL_VUSB_CHARGE               0x00000002\n#define  OTGSC_CTRL_OTG_TERM                  0x00000008\n#define  OTGSC_CTRL_DATA_PULSING              0x00000010\n#define  OTGSC_STS_USB_ID                     0x00000100\n#define  OTGSC_STS_A_VBUS_VALID               0x00000200\n#define  OTGSC_STS_A_SESSION_VALID            0x00000400\n#define  OTGSC_STS_B_SESSION_VALID            0x00000800\n#define  OTGSC_STS_B_SESSION_END              0x00001000\n#define  OTGSC_STS_1MS_TOGGLE                 0x00002000\n#define  OTGSC_STS_DATA_PULSING               0x00004000\n#define  OTGSC_INTSTS_USB_ID                  0x00010000\n#define  OTGSC_INTSTS_A_VBUS_VALID            0x00020000\n#define  OTGSC_INTSTS_A_SESSION_VALID         0x00040000\n#define  OTGSC_INTSTS_B_SESSION_VALID         0x00080000\n#define  OTGSC_INTSTS_B_SESSION_END           0x00100000\n#define  OTGSC_INTSTS_1MS                     0x00200000\n#define  OTGSC_INTSTS_DATA_PULSING            0x00400000\n#define  OTGSC_INTR_USB_ID                    0x01000000\n#define  OTGSC_INTR_A_VBUS_VALID              0x02000000\n#define  OTGSC_INTR_A_SESSION_VALID           0x04000000\n#define  OTGSC_INTR_B_SESSION_VALID           0x08000000\n#define  OTGSC_INTR_B_SESSION_END             0x10000000\n#define  OTGSC_INTR_1MS_TIMER                 0x20000000\n#define  OTGSC_INTR_DATA_PULSING              0x40000000\n\n \n#define  USB_MODE_CTRL_MODE_IDLE              0x00000000\n#define  USB_MODE_CTRL_MODE_DEVICE            0x00000002\n#define  USB_MODE_CTRL_MODE_HOST              0x00000003\n#define  USB_MODE_CTRL_MODE_MASK              0x00000003\n#define  USB_MODE_CTRL_MODE_RSV               0x00000001\n#define  USB_MODE_ES                          0x00000004  \n#define  USB_MODE_SETUP_LOCK_OFF              0x00000008\n#define  USB_MODE_STREAM_DISABLE              0x00000010\n \n#define EPFLUSH_TX_OFFSET\t\t      0x00010000\n#define EPFLUSH_RX_OFFSET\t\t      0x00000000\n\n \n#define  EP_SETUP_STATUS_MASK                 0x0000003F\n#define  EP_SETUP_STATUS_EP0\t\t      0x00000001\n\n \n#define  EPCTRL_TX_ENABLE                     0x00800000\n#define  EPCTRL_TX_DATA_TOGGLE_RST            0x00400000\t \n#define  EPCTRL_TX_DATA_TOGGLE_INH            0x00200000\t \n#define  EPCTRL_TX_TYPE                       0x000C0000\n#define  EPCTRL_TX_DATA_SOURCE                0x00020000\t \n#define  EPCTRL_TX_EP_STALL                   0x00010000\n#define  EPCTRL_RX_ENABLE                     0x00000080\n#define  EPCTRL_RX_DATA_TOGGLE_RST            0x00000040\t \n#define  EPCTRL_RX_DATA_TOGGLE_INH            0x00000020\t \n#define  EPCTRL_RX_TYPE                       0x0000000C\n#define  EPCTRL_RX_DATA_SINK                  0x00000002\t \n#define  EPCTRL_RX_EP_STALL                   0x00000001\n\n \n#define  EPCTRL_EP_TYPE_CONTROL               0\n#define  EPCTRL_EP_TYPE_ISO                   1\n#define  EPCTRL_EP_TYPE_BULK                  2\n#define  EPCTRL_EP_TYPE_INTERRUPT             3\n#define  EPCTRL_TX_EP_TYPE_SHIFT              18\n#define  EPCTRL_RX_EP_TYPE_SHIFT              2\n\n \n#define  SNOOP_ADDRESS_MASK                   0xFFFFF000\n#define  SNOOP_SIZE_ZERO                      0x00\t \n#define  SNOOP_SIZE_4KB                       0x0B\t \n#define  SNOOP_SIZE_8KB                       0x0C\n#define  SNOOP_SIZE_16KB                      0x0D\n#define  SNOOP_SIZE_32KB                      0x0E\n#define  SNOOP_SIZE_64KB                      0x0F\n#define  SNOOP_SIZE_128KB                     0x10\n#define  SNOOP_SIZE_256KB                     0x11\n#define  SNOOP_SIZE_512KB                     0x12\n#define  SNOOP_SIZE_1MB                       0x13\n#define  SNOOP_SIZE_2MB                       0x14\n#define  SNOOP_SIZE_4MB                       0x15\n#define  SNOOP_SIZE_8MB                       0x16\n#define  SNOOP_SIZE_16MB                      0x17\n#define  SNOOP_SIZE_32MB                      0x18\n#define  SNOOP_SIZE_64MB                      0x19\n#define  SNOOP_SIZE_128MB                     0x1A\n#define  SNOOP_SIZE_256MB                     0x1B\n#define  SNOOP_SIZE_512MB                     0x1C\n#define  SNOOP_SIZE_1GB                       0x1D\n#define  SNOOP_SIZE_2GB                       0x1E\t \n\n \n#define  PRI_CTRL_PRI_LVL1                    0x0000000C\n#define  PRI_CTRL_PRI_LVL0                    0x00000003\n\n \n#define  SI_CTRL_ERR_DISABLE                  0x00000010\n#define  SI_CTRL_IDRC_DISABLE                 0x00000008\n#define  SI_CTRL_RD_SAFE_EN                   0x00000004\n#define  SI_CTRL_RD_PREFETCH_DISABLE          0x00000002\n#define  SI_CTRL_RD_PREFEFETCH_VAL            0x00000001\n\n \n#define  USB_CTRL_IOENB                       0x00000004\n#define  USB_CTRL_ULPI_INT0EN                 0x00000001\n#define USB_CTRL_UTMI_PHY_EN\t\t      0x00000200\n#define USB_CTRL_USB_EN\t\t\t      0x00000004\n#define USB_CTRL_ULPI_PHY_CLK_SEL\t      0x00000400\n\n \nstruct ep_queue_head {\n\tu32 max_pkt_length;\t \n\tu32 curr_dtd_ptr;\t \n\tu32 next_dtd_ptr;\t \n\tu32 size_ioc_int_sts;\t \n\tu32 buff_ptr0;\t\t \n\tu32 buff_ptr1;\t\t \n\tu32 buff_ptr2;\t\t \n\tu32 buff_ptr3;\t\t \n\tu32 buff_ptr4;\t\t \n\tu32 res1;\n\tu8 setup_buffer[8];\t \n\tu32 res2[4];\n};\n\n \n#define  EP_QUEUE_HEAD_MULT_POS               30\n#define  EP_QUEUE_HEAD_ZLT_SEL                0x20000000\n#define  EP_QUEUE_HEAD_MAX_PKT_LEN_POS        16\n#define  EP_QUEUE_HEAD_MAX_PKT_LEN(ep_info)   (((ep_info)>>16)&0x07ff)\n#define  EP_QUEUE_HEAD_IOS                    0x00008000\n#define  EP_QUEUE_HEAD_NEXT_TERMINATE         0x00000001\n#define  EP_QUEUE_HEAD_IOC                    0x00008000\n#define  EP_QUEUE_HEAD_MULTO                  0x00000C00\n#define  EP_QUEUE_HEAD_STATUS_HALT\t      0x00000040\n#define  EP_QUEUE_HEAD_STATUS_ACTIVE          0x00000080\n#define  EP_QUEUE_CURRENT_OFFSET_MASK         0x00000FFF\n#define  EP_QUEUE_HEAD_NEXT_POINTER_MASK      0xFFFFFFE0\n#define  EP_QUEUE_FRINDEX_MASK                0x000007FF\n#define  EP_MAX_LENGTH_TRANSFER               0x4000\n\n \n \nstruct ep_td_struct {\n\tu32 next_td_ptr;\t \n\tu32 size_ioc_sts;\t \n\tu32 buff_ptr0;\t\t \n\tu32 buff_ptr1;\t\t \n\tu32 buff_ptr2;\t\t \n\tu32 buff_ptr3;\t\t \n\tu32 buff_ptr4;\t\t \n\tu32 res;\n\t \n\tdma_addr_t td_dma;\t \n\t \n\tstruct ep_td_struct *next_td_virt;\n};\n\n \n#define  DTD_NEXT_TERMINATE                   0x00000001\n#define  DTD_IOC                              0x00008000\n#define  DTD_STATUS_ACTIVE                    0x00000080\n#define  DTD_STATUS_HALTED                    0x00000040\n#define  DTD_STATUS_DATA_BUFF_ERR             0x00000020\n#define  DTD_STATUS_TRANSACTION_ERR           0x00000008\n#define  DTD_RESERVED_FIELDS                  0x80007300\n#define  DTD_ADDR_MASK                        0xFFFFFFE0\n#define  DTD_PACKET_SIZE                      0x7FFF0000\n#define  DTD_LENGTH_BIT_POS                   16\n#define  DTD_ERROR_MASK                       (DTD_STATUS_HALTED | \\\n                                               DTD_STATUS_DATA_BUFF_ERR | \\\n                                               DTD_STATUS_TRANSACTION_ERR)\n \n#define DTD_ALIGNMENT\t\t\t\t0x20\n#define QH_ALIGNMENT\t\t\t\t2048\n\n \n#define UDC_DMA_BOUNDARY\t\t\t0x1000\n\n \n\n \nstruct fsl_req {\n\tstruct usb_request req;\n\tstruct list_head queue;\n\t \n\tstruct fsl_ep *ep;\n\tunsigned mapped:1;\n\n\tstruct ep_td_struct *head, *tail;\t \n\tunsigned int dtd_count;\n};\n\n#define REQ_UNCOMPLETE\t\t\t1\n\nstruct fsl_ep {\n\tstruct usb_ep ep;\n\tstruct list_head queue;\n\tstruct fsl_udc *udc;\n\tstruct ep_queue_head *qh;\n\tstruct usb_gadget *gadget;\n\n\tchar name[14];\n\tunsigned stopped:1;\n};\n\n#define EP_DIR_IN\t1\n#define EP_DIR_OUT\t0\n\nstruct fsl_udc {\n\tstruct usb_gadget gadget;\n\tstruct usb_gadget_driver *driver;\n\tstruct fsl_usb2_platform_data *pdata;\n\tstruct completion *done;\t \n\tstruct fsl_ep *eps;\n\tunsigned int max_ep;\n\tunsigned int irq;\n\n\tstruct usb_ctrlrequest local_setup_buff;\n\tspinlock_t lock;\n\tstruct usb_phy *transceiver;\n\tunsigned softconnect:1;\n\tunsigned vbus_active:1;\n\tunsigned stopped:1;\n\tunsigned remote_wakeup:1;\n\tunsigned already_stopped:1;\n\tunsigned big_endian_desc:1;\n\n\tstruct ep_queue_head *ep_qh;\t \n\tstruct fsl_req *status_req;\t \n\tstruct dma_pool *td_pool;\t \n\tenum fsl_usb2_phy_modes phy_mode;\n\n\tsize_t ep_qh_size;\t\t \n\tdma_addr_t ep_qh_dma;\t\t \n\n\tu32 max_pipes;           \n\tu32 bus_reset;\t\t \n\tu32 resume_state;\t \n\tu32 usb_state;\t\t \n\tu32 ep0_state;\t\t \n\tu32 ep0_dir;\t\t \n\tu8 device_address;\t \n};\n\n \n\n#ifdef DEBUG\n#define DBG(fmt, args...) \tprintk(KERN_DEBUG \"[%s]  \" fmt \"\\n\", \\\n\t\t\t\t__func__, ## args)\n#else\n#define DBG(fmt, args...)\tdo{}while(0)\n#endif\n\n#if 0\nstatic void dump_msg(const char *label, const u8 * buf, unsigned int length)\n{\n\tunsigned int start, num, i;\n\tchar line[52], *p;\n\n\tif (length >= 512)\n\t\treturn;\n\tDBG(\"%s, length %u:\\n\", label, length);\n\tstart = 0;\n\twhile (length > 0) {\n\t\tnum = min(length, 16u);\n\t\tp = line;\n\t\tfor (i = 0; i < num; ++i) {\n\t\t\tif (i == 8)\n\t\t\t\t*p++ = ' ';\n\t\t\tsprintf(p, \" %02x\", buf[i]);\n\t\t\tp += 3;\n\t\t}\n\t\t*p = 0;\n\t\tprintk(KERN_DEBUG \"%6x: %s\\n\", start, line);\n\t\tbuf += num;\n\t\tstart += num;\n\t\tlength -= num;\n\t}\n}\n#endif\n\n#ifdef VERBOSE\n#define VDBG\t\tDBG\n#else\n#define VDBG(stuff...)\tdo{}while(0)\n#endif\n\n#define ERR(stuff...)\t\tpr_err(\"udc: \" stuff)\n#define WARNING(stuff...)\tpr_warn(\"udc: \" stuff)\n#define INFO(stuff...)\t\tpr_info(\"udc: \" stuff)\n\n \n\n \n\n \n#define USB_RECV\t0\t \n#define USB_SEND\t1\t \n\n \n#define ep_index(EP)\t\t((EP)->ep.desc->bEndpointAddress&0xF)\n#define ep_maxpacket(EP)\t((EP)->ep.maxpacket)\n#define ep_is_in(EP)\t( (ep_index(EP) == 0) ? (EP->udc->ep0_dir == \\\n\t\t\tUSB_DIR_IN) : ((EP)->ep.desc->bEndpointAddress \\\n\t\t\t& USB_DIR_IN)==USB_DIR_IN)\n#define get_ep_by_pipe(udc, pipe)\t((pipe == 1)? &udc->eps[0]: \\\n\t\t\t\t\t&udc->eps[pipe])\n#define get_pipe_by_windex(windex)\t((windex & USB_ENDPOINT_NUMBER_MASK) \\\n\t\t\t\t\t* 2 + ((windex & USB_DIR_IN) ? 1 : 0))\n#define get_pipe_by_ep(EP)\t(ep_index(EP) * 2 + ep_is_in(EP))\n\nstatic inline struct ep_queue_head *get_qh_by_ep(struct fsl_ep *ep)\n{\n\t \n\tif (ep_index(ep) != 0)\n\t\treturn ep->qh;\n\telse\n\t\treturn &ep->udc->ep_qh[(ep->udc->ep0_dir ==\n\t\t\t\tUSB_DIR_IN) ? 1 : 0];\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}