{
  "module_name": "gr_udc.h",
  "hash_id": "f310e87a744c510d7f19c30ac748fb858e94ae3287fd0c22fc7d054bb9fa9d4e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/udc/gr_udc.h",
  "human_readable_source": "\n \n\n \n\n#define GR_MAXEP\t16\t \n\nstruct gr_epregs {\n\tu32 epctrl;\n\tunion {\n\t\tstruct {  \n\t\t\tu32 slvctrl;\n\t\t\tu32 slvdata;\n\t\t};\n\t\tstruct {  \n\t\t\tu32 dmactrl;\n\t\t\tu32 dmaaddr;\n\t\t};\n\t};\n\tu32 epstat;\n};\n\nstruct gr_regs {\n\tstruct gr_epregs\tepo[GR_MAXEP];\t \n\tstruct gr_epregs\tepi[GR_MAXEP];\t \n\tu32\t\t\tcontrol;\t \n\tu32\t\t\tstatus;\t\t \n};\n\n#define GR_EPCTRL_BUFSZ_SCALER\t8\n#define GR_EPCTRL_BUFSZ_MASK\t0xffe00000\n#define GR_EPCTRL_BUFSZ_POS\t21\n#define GR_EPCTRL_PI\t\tBIT(20)\n#define GR_EPCTRL_CB\t\tBIT(19)\n#define GR_EPCTRL_CS\t\tBIT(18)\n#define GR_EPCTRL_MAXPL_MASK\t0x0003ff80\n#define GR_EPCTRL_MAXPL_POS\t7\n#define GR_EPCTRL_NT_MASK\t0x00000060\n#define GR_EPCTRL_NT_POS\t5\n#define GR_EPCTRL_TT_MASK\t0x00000018\n#define GR_EPCTRL_TT_POS\t3\n#define GR_EPCTRL_EH\t\tBIT(2)\n#define GR_EPCTRL_ED\t\tBIT(1)\n#define GR_EPCTRL_EV\t\tBIT(0)\n\n#define GR_DMACTRL_AE\t\tBIT(10)\n#define GR_DMACTRL_AD\t\tBIT(3)\n#define GR_DMACTRL_AI\t\tBIT(2)\n#define GR_DMACTRL_IE\t\tBIT(1)\n#define GR_DMACTRL_DA\t\tBIT(0)\n\n#define GR_EPSTAT_PT\t\tBIT(29)\n#define GR_EPSTAT_PR\t\tBIT(29)\n#define GR_EPSTAT_B1CNT_MASK\t0x1fff0000\n#define GR_EPSTAT_B1CNT_POS\t16\n#define GR_EPSTAT_B0CNT_MASK\t0x0000fff8\n#define GR_EPSTAT_B0CNT_POS\t3\n#define GR_EPSTAT_B1\t\tBIT(2)\n#define GR_EPSTAT_B0\t\tBIT(1)\n#define GR_EPSTAT_BS\t\tBIT(0)\n\n#define GR_CONTROL_SI\t\tBIT(31)\n#define GR_CONTROL_UI\t\tBIT(30)\n#define GR_CONTROL_VI\t\tBIT(29)\n#define GR_CONTROL_SP\t\tBIT(28)\n#define GR_CONTROL_FI\t\tBIT(27)\n#define GR_CONTROL_EP\t\tBIT(14)\n#define GR_CONTROL_DH\t\tBIT(13)\n#define GR_CONTROL_RW\t\tBIT(12)\n#define GR_CONTROL_TS_MASK\t0x00000e00\n#define GR_CONTROL_TS_POS\t9\n#define GR_CONTROL_TM\t\tBIT(8)\n#define GR_CONTROL_UA_MASK\t0x000000fe\n#define GR_CONTROL_UA_POS\t1\n#define GR_CONTROL_SU\t\tBIT(0)\n\n#define GR_STATUS_NEPI_MASK\t0xf0000000\n#define GR_STATUS_NEPI_POS\t28\n#define GR_STATUS_NEPO_MASK\t0x0f000000\n#define GR_STATUS_NEPO_POS\t24\n#define GR_STATUS_DM\t\tBIT(23)\n#define GR_STATUS_SU\t\tBIT(17)\n#define GR_STATUS_UR\t\tBIT(16)\n#define GR_STATUS_VB\t\tBIT(15)\n#define GR_STATUS_SP\t\tBIT(14)\n#define GR_STATUS_AF_MASK\t0x00003800\n#define GR_STATUS_AF_POS\t11\n#define GR_STATUS_FN_MASK\t0x000007ff\n#define GR_STATUS_FN_POS\t0\n\n\n#define MAX_CTRL_PL_SIZE 64  \n\n \n\n \n\nstruct gr_dma_desc {\n\tu32 ctrl;\n\tu32 data;\n\tu32 next;\n\n\t \n\tu32 paddr;\n\tstruct gr_dma_desc *next_desc;\n};\n\n#define GR_DESC_OUT_CTRL_SE\t\tBIT(17)\n#define GR_DESC_OUT_CTRL_IE\t\tBIT(15)\n#define GR_DESC_OUT_CTRL_NX\t\tBIT(14)\n#define GR_DESC_OUT_CTRL_EN\t\tBIT(13)\n#define GR_DESC_OUT_CTRL_LEN_MASK\t0x00001fff\n\n#define GR_DESC_IN_CTRL_MO\t\tBIT(18)\n#define GR_DESC_IN_CTRL_PI\t\tBIT(17)\n#define GR_DESC_IN_CTRL_ML\t\tBIT(16)\n#define GR_DESC_IN_CTRL_IE\t\tBIT(15)\n#define GR_DESC_IN_CTRL_NX\t\tBIT(14)\n#define GR_DESC_IN_CTRL_EN\t\tBIT(13)\n#define GR_DESC_IN_CTRL_LEN_MASK\t0x00001fff\n\n#define GR_DESC_DMAADDR_MASK\t\t0xfffffffc\n\nstruct gr_ep {\n\tstruct usb_ep ep;\n\tstruct gr_udc *dev;\n\tu16 bytes_per_buffer;\n\tunsigned int dma_start;\n\tstruct gr_epregs __iomem *regs;\n\n\tunsigned num:8;\n\tunsigned is_in:1;\n\tunsigned stopped:1;\n\tunsigned wedged:1;\n\tunsigned callback:1;\n\n\t \n\tstruct list_head queue;\n\n\tstruct list_head ep_list;\n\n\t \n\tvoid *tailbuf;\n\tdma_addr_t tailbuf_paddr;\n};\n\nstruct gr_request {\n\tstruct usb_request req;\n\tstruct list_head queue;\n\n\t \n\tstruct gr_dma_desc *first_desc;  \n\tstruct gr_dma_desc *curr_desc;  \n\tstruct gr_dma_desc *last_desc;  \n\n\tu16 evenlen;  \n\tu16 oddlen;  \n\n\tu8 setup;  \n};\n\nenum gr_ep0state {\n\tGR_EP0_DISCONNECT = 0,\t \n\tGR_EP0_SETUP,\t\t \n\tGR_EP0_IDATA,\t\t \n\tGR_EP0_ODATA,\t\t \n\tGR_EP0_ISTATUS,\t\t \n\tGR_EP0_OSTATUS,\t\t \n\tGR_EP0_STALL,\t\t \n\tGR_EP0_SUSPEND,\t\t \n};\n\nstruct gr_udc {\n\tstruct usb_gadget gadget;\n\tstruct gr_ep epi[GR_MAXEP];\n\tstruct gr_ep epo[GR_MAXEP];\n\tstruct usb_gadget_driver *driver;\n\tstruct dma_pool *desc_pool;\n\tstruct device *dev;\n\n\tenum gr_ep0state ep0state;\n\tstruct gr_request *ep0reqo;\n\tstruct gr_request *ep0reqi;\n\n\tstruct gr_regs __iomem *regs;\n\tint irq;\n\tint irqi;\n\tint irqo;\n\n\tunsigned added:1;\n\tunsigned irq_enabled:1;\n\tunsigned remote_wakeup:1;\n\n\tu8 test_mode;\n\n\tenum usb_device_state suspended_from;\n\n\tunsigned int nepi;\n\tunsigned int nepo;\n\n\tstruct list_head ep_list;\n\n\tspinlock_t lock;  \n};\n\n#define to_gr_udc(gadget)\t(container_of((gadget), struct gr_udc, gadget))\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}