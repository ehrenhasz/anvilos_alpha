{
  "module_name": "u_ether.h",
  "hash_id": "5ed5a4a603efa969aebfdd9a1af54f20964740d353a4aed4bdec90295caeb148",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/function/u_ether.h",
  "human_readable_source": " \n \n\n#ifndef __U_ETHER_H\n#define __U_ETHER_H\n\n#include <linux/err.h>\n#include <linux/if_ether.h>\n#include <linux/usb/composite.h>\n#include <linux/usb/cdc.h>\n#include <linux/netdevice.h>\n\n#define QMULT_DEFAULT 5\n\n \n#define USB_ETHERNET_MODULE_PARAMETERS() \\\n\tstatic unsigned qmult = QMULT_DEFAULT;\t\t\t\t\\\n\tmodule_param(qmult, uint, S_IRUGO|S_IWUSR);\t\t\t\\\n\tMODULE_PARM_DESC(qmult, \"queue length multiplier at high/super speed\");\\\n\t\t\t\t\t\t\t\t\t\\\n\tstatic char *dev_addr;\t\t\t\t\t\t\\\n\tmodule_param(dev_addr, charp, S_IRUGO);\t\t\t\t\\\n\tMODULE_PARM_DESC(dev_addr, \"Device Ethernet Address\");\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tstatic char *host_addr;\t\t\t\t\t\t\\\n\tmodule_param(host_addr, charp, S_IRUGO);\t\t\t\\\n\tMODULE_PARM_DESC(host_addr, \"Host Ethernet Address\")\n\nstruct eth_dev;\n\n \nstruct gether {\n\tstruct usb_function\t\tfunc;\n\n\t \n\tstruct eth_dev\t\t\t*ioport;\n\n\t \n\tstruct usb_ep\t\t\t*in_ep;\n\tstruct usb_ep\t\t\t*out_ep;\n\n\tbool\t\t\t\tis_zlp_ok;\n\n\tu16\t\t\t\tcdc_filter;\n\n\t \n\tu32\t\t\t\theader_len;\n\t \n\tbool\t\t\t\tis_fixed;\n\tu32\t\t\t\tfixed_out_len;\n\tu32\t\t\t\tfixed_in_len;\n\tbool\t\t\t\tsupports_multi_frame;\n\tstruct sk_buff\t\t\t*(*wrap)(struct gether *port,\n\t\t\t\t\t\tstruct sk_buff *skb);\n\tint\t\t\t\t(*unwrap)(struct gether *port,\n\t\t\t\t\t\tstruct sk_buff *skb,\n\t\t\t\t\t\tstruct sk_buff_head *list);\n\n\t \n\tvoid\t\t\t\t(*open)(struct gether *);\n\tvoid\t\t\t\t(*close)(struct gether *);\n\tbool\t\t\t\tis_suspend;\n};\n\n#define\tDEFAULT_FILTER\t(USB_CDC_PACKET_TYPE_BROADCAST \\\n\t\t\t|USB_CDC_PACKET_TYPE_ALL_MULTICAST \\\n\t\t\t|USB_CDC_PACKET_TYPE_PROMISCUOUS \\\n\t\t\t|USB_CDC_PACKET_TYPE_DIRECTED)\n\n \nstruct eth_dev *gether_setup_name(struct usb_gadget *g,\n\t\tconst char *dev_addr, const char *host_addr,\n\t\tu8 ethaddr[ETH_ALEN], unsigned qmult, const char *netname);\n\n \n \nstatic inline struct eth_dev *gether_setup(struct usb_gadget *g,\n\t\tconst char *dev_addr, const char *host_addr,\n\t\tu8 ethaddr[ETH_ALEN], unsigned qmult)\n{\n\treturn gether_setup_name(g, dev_addr, host_addr, ethaddr, qmult, \"usb\");\n}\n\n \nstruct net_device *gether_setup_name_default(const char *netname);\n\n \nint gether_register_netdev(struct net_device *net);\n\n \nstatic inline struct net_device *gether_setup_default(void)\n{\n\treturn gether_setup_name_default(\"usb\");\n}\n\n \nvoid gether_set_gadget(struct net_device *net, struct usb_gadget *g);\n\n \nint gether_set_dev_addr(struct net_device *net, const char *dev_addr);\n\n \nint gether_get_dev_addr(struct net_device *net, char *dev_addr, int len);\n\n \nint gether_set_host_addr(struct net_device *net, const char *host_addr);\n\n \nint gether_get_host_addr(struct net_device *net, char *host_addr, int len);\n\n \nint gether_get_host_addr_cdc(struct net_device *net, char *host_addr, int len);\n\n \nvoid gether_get_host_addr_u8(struct net_device *net, u8 host_mac[ETH_ALEN]);\n\n \nvoid gether_set_qmult(struct net_device *net, unsigned qmult);\n\n \nunsigned gether_get_qmult(struct net_device *net);\n\n \nint gether_get_ifname(struct net_device *net, char *name, int len);\n\n \nint gether_set_ifname(struct net_device *net, const char *name, int len);\n\nvoid gether_cleanup(struct eth_dev *dev);\n\nvoid gether_suspend(struct gether *link);\nvoid gether_resume(struct gether *link);\n\n \nstruct net_device *gether_connect(struct gether *);\nvoid gether_disconnect(struct gether *);\n\n \nstatic inline bool can_support_ecm(struct usb_gadget *gadget)\n{\n\tif (!gadget_is_altset_supported(gadget))\n\t\treturn false;\n\n\t \n\treturn true;\n}\n\n \nstatic inline unsigned int gether_bitrate(struct usb_gadget *g)\n{\n\tif (g->speed >= USB_SPEED_SUPER_PLUS)\n\t\treturn 4250000000U;\n\tif (g->speed == USB_SPEED_SUPER)\n\t\treturn 3750000000U;\n\telse if (g->speed == USB_SPEED_HIGH)\n\t\treturn 13 * 512 * 8 * 1000 * 8;\n\telse\n\t\treturn 19 * 64 * 1 * 1000 * 8;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}