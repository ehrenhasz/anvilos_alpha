{
  "module_name": "uvc_configfs.h",
  "hash_id": "ab2bf22fe081a656928aa36a54f645ab5eb4c55cf7ce8c0147a3cfe582a57bfd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/function/uvc_configfs.h",
  "human_readable_source": " \n \n#ifndef UVC_CONFIGFS_H\n#define UVC_CONFIGFS_H\n\n#include <linux/configfs.h>\n\n#include \"u_uvc.h\"\n\nstatic inline struct f_uvc_opts *to_f_uvc_opts(struct config_item *item)\n{\n\treturn container_of(to_config_group(item), struct f_uvc_opts,\n\t\t\t    func_inst.group);\n}\n\n#define UVCG_STREAMING_CONTROL_SIZE\t1\n\nDECLARE_UVC_HEADER_DESCRIPTOR(1);\n\nstruct uvcg_control_header {\n\tstruct config_item\t\titem;\n\tstruct UVC_HEADER_DESCRIPTOR(1)\tdesc;\n\tunsigned\t\t\tlinked;\n};\n\nstatic inline struct uvcg_control_header *to_uvcg_control_header(struct config_item *item)\n{\n\treturn container_of(item, struct uvcg_control_header, item);\n}\n\nstruct uvcg_color_matching {\n\tstruct config_group group;\n\tstruct uvc_color_matching_descriptor desc;\n\tunsigned int refcnt;\n};\n\n#define to_uvcg_color_matching(group_ptr) \\\ncontainer_of(group_ptr, struct uvcg_color_matching, group)\n\nenum uvcg_format_type {\n\tUVCG_UNCOMPRESSED = 0,\n\tUVCG_MJPEG,\n};\n\nstruct uvcg_format {\n\tstruct config_group\t\tgroup;\n\tenum uvcg_format_type\t\ttype;\n\tunsigned\t\t\tlinked;\n\tstruct list_head\t\tframes;\n\tunsigned\t\t\tnum_frames;\n\t__u8\t\t\t\tbmaControls[UVCG_STREAMING_CONTROL_SIZE];\n\tstruct uvcg_color_matching\t*color_matching;\n};\n\nstruct uvcg_format_ptr {\n\tstruct uvcg_format\t*fmt;\n\tstruct list_head\tentry;\n};\n\nstatic inline struct uvcg_format *to_uvcg_format(struct config_item *item)\n{\n\treturn container_of(to_config_group(item), struct uvcg_format, group);\n}\n\nstruct uvcg_streaming_header {\n\tstruct config_item\t\t\t\titem;\n\tstruct uvc_input_header_descriptor\t\tdesc;\n\tunsigned\t\t\t\t\tlinked;\n\tstruct list_head\t\t\t\tformats;\n\tunsigned\t\t\t\t\tnum_fmt;\n};\n\nstatic inline struct uvcg_streaming_header *to_uvcg_streaming_header(struct config_item *item)\n{\n\treturn container_of(item, struct uvcg_streaming_header, item);\n}\n\nstruct uvcg_frame_ptr {\n\tstruct uvcg_frame\t*frm;\n\tstruct list_head\tentry;\n};\n\nstruct uvcg_frame {\n\tstruct config_item\titem;\n\tenum uvcg_format_type\tfmt_type;\n\tstruct {\n\t\tu8\tb_length;\n\t\tu8\tb_descriptor_type;\n\t\tu8\tb_descriptor_subtype;\n\t\tu8\tb_frame_index;\n\t\tu8\tbm_capabilities;\n\t\tu16\tw_width;\n\t\tu16\tw_height;\n\t\tu32\tdw_min_bit_rate;\n\t\tu32\tdw_max_bit_rate;\n\t\tu32\tdw_max_video_frame_buffer_size;\n\t\tu32\tdw_default_frame_interval;\n\t\tu8\tb_frame_interval_type;\n\t} __attribute__((packed)) frame;\n\tu32 *dw_frame_interval;\n};\n\nstatic inline struct uvcg_frame *to_uvcg_frame(struct config_item *item)\n{\n\treturn container_of(item, struct uvcg_frame, item);\n}\n\n \n\nstruct uvcg_uncompressed {\n\tstruct uvcg_format\t\tfmt;\n\tstruct uvc_format_uncompressed\tdesc;\n};\n\nstatic inline struct uvcg_uncompressed *to_uvcg_uncompressed(struct config_item *item)\n{\n\treturn container_of(to_uvcg_format(item), struct uvcg_uncompressed, fmt);\n}\n\n \n\nstruct uvcg_mjpeg {\n\tstruct uvcg_format\t\tfmt;\n\tstruct uvc_format_mjpeg\t\tdesc;\n};\n\nstatic inline struct uvcg_mjpeg *to_uvcg_mjpeg(struct config_item *item)\n{\n\treturn container_of(to_uvcg_format(item), struct uvcg_mjpeg, fmt);\n}\n\n \n\nstruct uvcg_extension_unit_descriptor {\n\tu8 bLength;\n\tu8 bDescriptorType;\n\tu8 bDescriptorSubType;\n\tu8 bUnitID;\n\tu8 guidExtensionCode[16];\n\tu8 bNumControls;\n\tu8 bNrInPins;\n\tu8 *baSourceID;\n\tu8 bControlSize;\n\tu8 *bmControls;\n\tu8 iExtension;\n} __packed;\n\nstruct uvcg_extension {\n\tstruct config_item item;\n\tstruct list_head list;\n\tu8 string_descriptor_index;\n\tstruct uvcg_extension_unit_descriptor desc;\n};\n\nstatic inline struct uvcg_extension *to_uvcg_extension(struct config_item *item)\n{\n\treturn container_of(item, struct uvcg_extension, item);\n}\n\nint uvcg_attach_configfs(struct f_uvc_opts *opts);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}