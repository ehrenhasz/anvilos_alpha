{
  "module_name": "Kconfig",
  "hash_id": "90be5b8e5ec623bd5895f355e67d47abb8084314c21ab636c0df5f014b700e73",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/gadget/legacy/Kconfig",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n#\n# USB Gadget support on a system involves\n#    (a) a peripheral controller, and\n#    (b) the gadget driver using it.\n#\n# NOTE:  Gadget support ** DOES NOT ** depend on host-side CONFIG_USB !!\n#\n#  - Host systems (like PCs) need CONFIG_USB (with \"A\" jacks).\n#  - Peripherals (like PDAs) need CONFIG_USB_GADGET (with \"B\" jacks).\n#  - Some systems have both kinds of controllers.\n#\n# With help from a special transceiver and a \"Mini-AB\" jack, systems with\n# both kinds of controller can also support \"USB On-the-Go\" (CONFIG_USB_OTG).\n#\n# A Linux \"Gadget Driver\" talks to the USB Peripheral Controller\n# driver through the abstract \"gadget\" API.  Some other operating\n# systems call these \"client\" drivers, of which \"class drivers\"\n# are a subset (implementing a USB device class specification).\n# A gadget driver implements one or more USB functions using\n# the peripheral hardware.\n#\n# Gadget drivers are hardware-neutral, or \"platform independent\",\n# except that they sometimes must understand quirks or limitations\n# of the particular controllers they work with.  For example, when\n# a controller doesn't support alternate configurations or provide\n# enough of the right types of endpoints, the gadget driver might\n# not be able work with that controller, or might need to implement\n# a less common variant of a device class protocol.\n#\n# The available choices each represent a single precomposed USB\n# gadget configuration. In the device model, each option contains\n# both the device instantiation as a child for a USB gadget\n# controller, and the relevant drivers for each function declared\n# by the device.\n\nmenu \"USB Gadget precomposed configurations\"\n\nconfig USB_ZERO\n\ttristate \"Gadget Zero (DEVELOPMENT)\"\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_SS_LB\n\thelp\n\t  Gadget Zero is a two-configuration device.  It either sinks and\n\t  sources bulk data; or it loops back a configurable number of\n\t  transfers.  It also implements control requests, for \"chapter 9\"\n\t  conformance.  The driver needs only two bulk-capable endpoints, so\n\t  it can work on top of most device-side usb controllers.  It's\n\t  useful for testing, and is also a working example showing how\n\t  USB \"gadget drivers\" can be written.\n\n\t  Make this be the first driver you try using on top of any new\n\t  USB peripheral controller driver.  Then you can use host-side\n\t  test software, like the \"usbtest\" driver, to put your hardware\n\t  and its driver through a basic set of functional tests.\n\n\t  Gadget Zero also works with the host-side \"usb-skeleton\" driver,\n\t  and with many kinds of host-side test software.  You may need\n\t  to tweak product and vendor IDs before host software knows about\n\t  this device, and arrange to select an appropriate configuration.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_zero\".\n\nconfig USB_ZERO_HNPTEST\n\tbool \"HNP Test Device\"\n\tdepends on USB_ZERO && USB_OTG\n\thelp\n\t  You can configure this device to enumerate using the device\n\t  identifiers of the USB-OTG test device.  That means that when\n\t  this gadget connects to another OTG device, with this one using\n\t  the \"B-Peripheral\" role, that device will use HNP to let this\n\t  one serve as the USB host instead (in the \"B-Host\" role).\n\nconfig USB_AUDIO\n\ttristate \"Audio Gadget\"\n\tdepends on SND\n\tselect USB_LIBCOMPOSITE\n\tselect SND_PCM\n\tselect USB_F_UAC1 if (GADGET_UAC1 && !GADGET_UAC1_LEGACY)\n\tselect USB_F_UAC1_LEGACY if (GADGET_UAC1 && GADGET_UAC1_LEGACY)\n\tselect USB_F_UAC2 if !GADGET_UAC1\n\tselect USB_U_AUDIO if (USB_F_UAC2 || USB_F_UAC1)\n\thelp\n\t  This Gadget Audio driver is compatible with USB Audio Class\n\t  specification 2.0. It implements 1 AudioControl interface,\n\t  1 AudioStreaming Interface each for USB-OUT and USB-IN.\n\t  Number of channels, sample rate and sample size can be\n\t  specified as module parameters.\n\t  This driver doesn't expect any real Audio codec to be present\n\t  on the device - the audio streams are simply sinked to and\n\t  sourced from a virtual ALSA sound card created. The user-space\n\t  application may choose to do whatever it wants with the data\n\t  received from the USB Host and choose to provide whatever it\n\t  wants as audio data to the USB Host.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_audio\".\n\nconfig GADGET_UAC1\n\tbool \"UAC 1.0\"\n\tdepends on USB_AUDIO\n\thelp\n\t  If you instead want older USB Audio Class specification 1.0 support\n\t  with similar driver capabilities.\n\nconfig GADGET_UAC1_LEGACY\n\tbool \"UAC 1.0 (Legacy)\"\n\tdepends on GADGET_UAC1\n\thelp\n\t  If you instead want legacy UAC Spec-1.0 driver that also has audio\n\t  paths hardwired to the Audio codec chip on-board and doesn't work\n\t  without one.\n\nconfig USB_ETH\n\ttristate \"Ethernet Gadget (with CDC Ethernet support)\"\n\tdepends on NET\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_ETHER\n\tselect USB_F_ECM\n\tselect USB_F_SUBSET\n\tselect CRC32\n\thelp\n\t  This driver implements Ethernet style communication, in one of\n\t  several ways:\n\n\t   - The \"Communication Device Class\" (CDC) Ethernet Control Model.\n\t     That protocol is often avoided with pure Ethernet adapters, in\n\t     favor of simpler vendor-specific hardware, but is widely\n\t     supported by firmware for smart network devices.\n\n\t   - On hardware can't implement that protocol, a simple CDC subset\n\t     is used, placing fewer demands on USB.\n\n\t   - CDC Ethernet Emulation Model (EEM) is a newer standard that has\n\t     a simpler interface that can be used by more USB hardware.\n\n\t  RNDIS support is an additional option, more demanding than subset.\n\n\t  Within the USB device, this gadget driver exposes a network device\n\t  \"usbX\", where X depends on what other networking devices you have.\n\t  Treat it like a two-node Ethernet link:  host, and gadget.\n\n\t  The Linux-USB host-side \"usbnet\" driver interoperates with this\n\t  driver, so that deep I/O queues can be supported.  On 2.4 kernels,\n\t  use \"CDCEther\" instead, if you're using the CDC option. That CDC\n\t  mode should also interoperate with standard CDC Ethernet class\n\t  drivers on other host operating systems.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_ether\".\n\nconfig USB_ETH_RNDIS\n\tbool \"RNDIS support\"\n\tdepends on USB_ETH\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_RNDIS\n\tdefault y\n\thelp\n\t   Microsoft Windows XP bundles the \"Remote NDIS\" (RNDIS) protocol,\n\t   and Microsoft provides redistributable binary RNDIS drivers for\n\t   older versions of Windows.\n\n\t   If you say \"y\" here, the Ethernet gadget driver will try to provide\n\t   a second device configuration, supporting RNDIS to talk to such\n\t   Microsoft USB hosts.\n\n\t   To make MS-Windows work with this, use Documentation/usb/linux.inf\n\t   as the \"driver info file\".  For versions of MS-Windows older than\n\t   XP, you'll need to download drivers from Microsoft's website; a URL\n\t   is given in comments found in that info file.\n\nconfig USB_ETH_EEM\n\tbool \"Ethernet Emulation Model (EEM) support\"\n\tdepends on USB_ETH\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_EEM\n\thelp\n\t  CDC EEM is a newer USB standard that is somewhat simpler than CDC ECM\n\t  and therefore can be supported by more hardware.  Technically ECM and\n\t  EEM are designed for different applications.  The ECM model extends\n\t  the network interface to the target (e.g. a USB cable modem), and the\n\t  EEM model is for mobile devices to communicate with hosts using\n\t  ethernet over USB.  For Linux gadgets, however, the interface with\n\t  the host is the same (a usbX device), so the differences are minimal.\n\n\t  If you say \"y\" here, the Ethernet gadget driver will use the EEM\n\t  protocol rather than ECM.  If unsure, say \"n\".\n\nconfig USB_G_NCM\n\ttristate \"Network Control Model (NCM) support\"\n\tdepends on NET\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_ETHER\n\tselect USB_F_NCM\n\tselect CRC32\n\thelp\n\t  This driver implements USB CDC NCM subclass standard. NCM is\n\t  an advanced protocol for Ethernet encapsulation, allows grouping\n\t  of several ethernet frames into one USB transfer and different\n\t  alignment possibilities.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_ncm\".\n\nconfig USB_GADGETFS\n\ttristate \"Gadget Filesystem\"\n\thelp\n\t  This driver provides a filesystem based API that lets user mode\n\t  programs implement a single-configuration USB device, including\n\t  endpoint I/O and control requests that don't relate to enumeration.\n\t  All endpoints, transfer speeds, and transfer types supported by\n\t  the hardware are available, through read() and write() calls.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"gadgetfs\".\n\nconfig USB_FUNCTIONFS\n\ttristate \"Function Filesystem\"\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_FS\n\tselect USB_FUNCTIONFS_GENERIC if !(USB_FUNCTIONFS_ETH || USB_FUNCTIONFS_RNDIS)\n\thelp\n\t  The Function Filesystem (FunctionFS) lets one create USB\n\t  composite functions in user space in the same way GadgetFS\n\t  lets one create USB gadgets in user space.  This allows creation\n\t  of composite gadgets such that some of the functions are\n\t  implemented in kernel space (for instance Ethernet, serial or\n\t  mass storage) and other are implemented in user space.\n\n\t  If you say \"y\" or \"m\" here you will be able what kind of\n\t  configurations the gadget will provide.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build\n\t  a dynamically linked module called \"g_ffs\".\n\nconfig USB_FUNCTIONFS_ETH\n\tbool \"Include configuration with CDC ECM (Ethernet)\"\n\tdepends on USB_FUNCTIONFS && NET\n\tselect USB_U_ETHER\n\tselect USB_F_ECM\n\tselect USB_F_SUBSET\n\thelp\n\t  Include a configuration with CDC ECM function (Ethernet) and the\n\t  Function Filesystem.\n\nconfig USB_FUNCTIONFS_RNDIS\n\tbool \"Include configuration with RNDIS (Ethernet)\"\n\tdepends on USB_FUNCTIONFS && NET\n\tselect USB_U_ETHER\n\tselect USB_F_RNDIS\n\thelp\n\t  Include a configuration with RNDIS function (Ethernet) and the Filesystem.\n\nconfig USB_FUNCTIONFS_GENERIC\n\tbool \"Include 'pure' configuration\"\n\tdepends on USB_FUNCTIONFS\n\thelp\n\t  Include a configuration with the Function Filesystem alone with\n\t  no Ethernet interface.\n\nconfig USB_MASS_STORAGE\n\ttristate \"Mass Storage Gadget\"\n\tdepends on BLOCK\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_MASS_STORAGE\n\thelp\n\t  The Mass Storage Gadget acts as a USB Mass Storage disk drive.\n\t  As its storage repository it can use a regular file or a block\n\t  device (in much the same way as the \"loop\" device driver),\n\t  specified as a module parameter or sysfs option.\n\n\t  This driver is a replacement for now removed File-backed\n\t  Storage Gadget (g_file_storage).\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build\n\t  a dynamically linked module called \"g_mass_storage\".\n\nconfig USB_GADGET_TARGET\n\ttristate \"USB Gadget Target Fabric Module\"\n\tdepends on TARGET_CORE\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_TCM\n\thelp\n\t  This fabric is an USB gadget. Two USB protocols are supported that is\n\t  BBB or BOT (Bulk Only Transport) and UAS (USB Attached SCSI). BOT is\n\t  advertised on alternative interface 0 (primary) and UAS is on\n\t  alternative interface 1. Both protocols can work on USB2.0 and USB3.0.\n\t  UAS utilizes the USB 3.0 feature called streams support.\n\nconfig USB_G_SERIAL\n\ttristate \"Serial Gadget (with CDC ACM and CDC OBEX support)\"\n\tdepends on TTY\n\tselect USB_U_SERIAL\n\tselect USB_F_ACM\n\tselect USB_F_SERIAL\n\tselect USB_F_OBEX\n\tselect USB_LIBCOMPOSITE\n\thelp\n\t  The Serial Gadget talks to the Linux-USB generic serial driver.\n\t  This driver supports a CDC-ACM module option, which can be used\n\t  to interoperate with MS-Windows hosts or with the Linux-USB\n\t  \"cdc-acm\" driver.\n\n\t  This driver also supports a CDC-OBEX option.  You will need a\n\t  user space OBEX server talking to /dev/ttyGS*, since the kernel\n\t  itself doesn't implement the OBEX protocol.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_serial\".\n\n\t  For more information, see Documentation/usb/gadget_serial.rst\n\t  which includes instructions and a \"driver info file\" needed to\n\t  make MS-Windows work with CDC ACM.\n\nconfig USB_MIDI_GADGET\n\ttristate \"MIDI Gadget\"\n\tdepends on SND\n\tselect USB_LIBCOMPOSITE\n\tselect SND_RAWMIDI\n\tselect USB_F_MIDI\n\thelp\n\t  The MIDI Gadget acts as a USB Audio device, with one MIDI\n\t  input and one MIDI output. These MIDI jacks appear as\n\t  a sound \"card\" in the ALSA sound system. Other MIDI\n\t  connections can then be made on the gadget system, using\n\t  ALSA's aconnect utility etc.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_midi\".\n\nconfig USB_G_PRINTER\n\ttristate \"Printer Gadget\"\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_PRINTER\n\thelp\n\t  The Printer Gadget channels data between the USB host and a\n\t  userspace program driving the print engine. The user space\n\t  program reads and writes the device file /dev/g_printer to\n\t  receive or send printer data. It can use ioctl calls to\n\t  the device file to get or set printer status.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_printer\".\n\n\t  For more information, see Documentation/usb/gadget_printer.rst\n\t  which includes sample code for accessing the device file.\n\nif TTY\n\nconfig USB_CDC_COMPOSITE\n\ttristate \"CDC Composite Device (Ethernet and ACM)\"\n\tdepends on NET\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_SERIAL\n\tselect USB_U_ETHER\n\tselect USB_F_ACM\n\tselect USB_F_ECM\n\thelp\n\t  This driver provides two functions in one configuration:\n\t  a CDC Ethernet (ECM) link, and a CDC ACM (serial port) link.\n\n\t  This driver requires four bulk and two interrupt endpoints,\n\t  plus the ability to handle altsettings.  Not all peripheral\n\t  controllers are that capable.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module.\n\nconfig USB_G_NOKIA\n\ttristate \"Nokia composite gadget\"\n\tdepends on PHONET\n\tdepends on BLOCK\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_SERIAL\n\tselect USB_U_ETHER\n\tselect USB_F_ACM\n\tselect USB_F_OBEX\n\tselect USB_F_PHONET\n\tselect USB_F_ECM\n\tselect USB_F_MASS_STORAGE\n\thelp\n\t  The Nokia composite gadget provides support for acm, obex\n\t  and phonet in only one composite gadget driver.\n\n\t  It's only really useful for N900 hardware. If you're building\n\t  a kernel for N900, say Y or M here. If unsure, say N.\n\nconfig USB_G_ACM_MS\n\ttristate \"CDC Composite Device (ACM and mass storage)\"\n\tdepends on BLOCK\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_SERIAL\n\tselect USB_F_ACM\n\tselect USB_F_MASS_STORAGE\n\thelp\n\t  This driver provides two functions in one configuration:\n\t  a mass storage, and a CDC ACM (serial port) link.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_acm_ms\".\n\nconfig USB_G_MULTI\n\ttristate \"Multifunction Composite Gadget\"\n\tdepends on BLOCK && NET\n\tselect USB_G_MULTI_CDC if !USB_G_MULTI_RNDIS\n\tselect USB_LIBCOMPOSITE\n\tselect USB_U_SERIAL\n\tselect USB_U_ETHER\n\tselect USB_F_ACM\n\tselect USB_F_MASS_STORAGE\n\thelp\n\t  The Multifunction Composite Gadget provides Ethernet (RNDIS\n\t  and/or CDC Ethernet), mass storage and ACM serial link\n\t  interfaces.\n\n\t  You will be asked to choose which of the two configurations is\n\t  to be available in the gadget.  At least one configuration must\n\t  be chosen to make the gadget usable.  Selecting more than one\n\t  configuration will prevent Windows from automatically detecting\n\t  the gadget as a composite gadget, so an INF file will be needed to\n\t  use the gadget.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_multi\".\n\nconfig USB_G_MULTI_RNDIS\n\tbool \"RNDIS + CDC Serial + Storage configuration\"\n\tdepends on USB_G_MULTI\n\tselect USB_F_RNDIS\n\tdefault y\n\thelp\n\t  This option enables a configuration with RNDIS, CDC Serial and\n\t  Mass Storage functions available in the Multifunction Composite\n\t  Gadget.  This is the configuration dedicated for Windows since RNDIS\n\t  is Microsoft's protocol.\n\n\t  If unsure, say \"y\".\n\nconfig USB_G_MULTI_CDC\n\tbool \"CDC Ethernet + CDC Serial + Storage configuration\"\n\tdepends on USB_G_MULTI\n\tselect USB_F_ECM\n\thelp\n\t  This option enables a configuration with CDC Ethernet (ECM), CDC\n\t  Serial and Mass Storage functions available in the Multifunction\n\t  Composite Gadget.\n\n\t  If unsure, say \"y\".\n\nendif # TTY\n\nconfig USB_G_HID\n\ttristate \"HID Gadget\"\n\tselect USB_LIBCOMPOSITE\n\tselect USB_F_HID\n\thelp\n\t  The HID gadget driver provides generic emulation of USB\n\t  Human Interface Devices (HID).\n\n\t  For more information, see Documentation/usb/gadget_hid.rst which\n\t  includes sample code for accessing the device files.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_hid\".\n\n# Standalone / single function gadgets\nconfig USB_G_DBGP\n\ttristate \"EHCI Debug Device Gadget\"\n\tdepends on TTY\n\tselect USB_LIBCOMPOSITE\n\thelp\n\t  This gadget emulates an EHCI Debug device. This is useful when you want\n\t  to interact with an EHCI Debug Port.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_dbgp\".\n\nif USB_G_DBGP\nchoice\n\tprompt \"EHCI Debug Device mode\"\n\tdefault USB_G_DBGP_SERIAL\n\nconfig USB_G_DBGP_PRINTK\n\tdepends on USB_G_DBGP\n\tbool \"printk\"\n\thelp\n\t  Directly printk() received data. No interaction.\n\nconfig USB_G_DBGP_SERIAL\n\tdepends on USB_G_DBGP\n\tselect USB_U_SERIAL\n\tbool \"serial\"\n\thelp\n\t  Userland can interact using /dev/ttyGSxxx.\nendchoice\nendif\n\n# put drivers that need isochronous transfer support (for audio\n# or video class gadget drivers), or specific hardware, here.\nconfig USB_G_WEBCAM\n\ttristate \"USB Webcam Gadget\"\n\tdepends on VIDEO_DEV\n\tselect USB_LIBCOMPOSITE\n\tselect VIDEOBUF2_DMA_SG\n\tselect VIDEOBUF2_VMALLOC\n\tselect USB_F_UVC\n\thelp\n\t  The Webcam Gadget acts as a composite USB Audio and Video Class\n\t  device. It provides a userspace API to process UVC control requests\n\t  and stream video data to the host.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"g_webcam\".\n\nconfig USB_RAW_GADGET\n\ttristate \"USB Raw Gadget\"\n\thelp\n\t  USB Raw Gadget is a gadget driver that gives userspace low-level\n\t  control over the gadget's communication process.\n\n\t  Like any other gadget driver, Raw Gadget implements USB devices via\n\t  the USB gadget API. Unlike most gadget drivers, Raw Gadget does not\n\t  implement any concrete USB functions itself but requires userspace\n\t  to do that.\n\n\t  See Documentation/usb/raw-gadget.rst for details.\n\n\t  Say \"y\" to link the driver statically, or \"m\" to build a\n\t  dynamically linked module called \"raw_gadget\".\n\nendmenu\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}