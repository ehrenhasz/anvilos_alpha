{
  "module_name": "empeg.c",
  "hash_id": "33dcb8f1d4e097f87ee663acc38188fd3a40075f266f6f4715e55698abdf1e0a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/serial/empeg.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/errno.h>\n#include <linux/slab.h>\n#include <linux/tty.h>\n#include <linux/tty_driver.h>\n#include <linux/tty_flip.h>\n#include <linux/module.h>\n#include <linux/spinlock.h>\n#include <linux/uaccess.h>\n#include <linux/usb.h>\n#include <linux/usb/serial.h>\n\n#define DRIVER_AUTHOR \"Greg Kroah-Hartman <greg@kroah.com>, Gary Brubaker <xavyer@ix.netcom.com>\"\n#define DRIVER_DESC \"USB Empeg Mark I/II Driver\"\n\n#define EMPEG_VENDOR_ID\t\t\t0x084f\n#define EMPEG_PRODUCT_ID\t\t0x0001\n\n \nstatic int  empeg_startup(struct usb_serial *serial);\nstatic void empeg_init_termios(struct tty_struct *tty);\n\nstatic const struct usb_device_id id_table[] = {\n\t{ USB_DEVICE(EMPEG_VENDOR_ID, EMPEG_PRODUCT_ID) },\n\t{ }\t\t\t\t\t \n};\n\nMODULE_DEVICE_TABLE(usb, id_table);\n\nstatic struct usb_serial_driver empeg_device = {\n\t.driver = {\n\t\t.owner =\tTHIS_MODULE,\n\t\t.name =\t\t\"empeg\",\n\t},\n\t.id_table =\t\tid_table,\n\t.num_ports =\t\t1,\n\t.bulk_out_size =\t256,\n\t.throttle =\t\tusb_serial_generic_throttle,\n\t.unthrottle =\t\tusb_serial_generic_unthrottle,\n\t.attach =\t\tempeg_startup,\n\t.init_termios =\t\tempeg_init_termios,\n};\n\nstatic struct usb_serial_driver * const serial_drivers[] = {\n\t&empeg_device, NULL\n};\n\nstatic int empeg_startup(struct usb_serial *serial)\n{\n\tint r;\n\n\tif (serial->dev->actconfig->desc.bConfigurationValue != 1) {\n\t\tdev_err(&serial->dev->dev, \"active config #%d != 1 ??\\n\",\n\t\t\tserial->dev->actconfig->desc.bConfigurationValue);\n\t\treturn -ENODEV;\n\t}\n\n\tr = usb_reset_configuration(serial->dev);\n\n\t \n\treturn r;\n}\n\nstatic void empeg_init_termios(struct tty_struct *tty)\n{\n\tstruct ktermios *termios = &tty->termios;\n\n\t \n\ttermios->c_iflag\n\t\t&= ~(IGNBRK\t \n\t\t| BRKINT\t \n\t\t| PARMRK\t \n\t\t| ISTRIP\t \n\t\t| INLCR\t\t \n\t\t| IGNCR\t\t \n\t\t| ICRNL\t\t \n\t\t| IXON);\t \n\n\ttermios->c_oflag\n\t\t&= ~OPOST;\t \n\n\ttermios->c_lflag\n\t\t&= ~(ECHO\t \n\t\t| ECHONL\t \n\t\t| ICANON\t \n\t\t| ISIG\t\t \n\t\t| IEXTEN);\t \n\n\ttermios->c_cflag\n\t\t&= ~(CSIZE\t \n\t\t| PARENB\t \n\t\t| CBAUD);\t \n\n\ttermios->c_cflag\n\t\t|= CS8;\t\t \n\n\ttty_encode_baud_rate(tty, 115200, 115200);\n}\n\nmodule_usb_serial_driver(serial_drivers, id_table);\n\nMODULE_AUTHOR(DRIVER_AUTHOR);\nMODULE_DESCRIPTION(DRIVER_DESC);\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}