{
  "module_name": "ipaq.c",
  "hash_id": "2ff5059365185a0660c1ba209ab2907ba29ac8a7e84e2d9662ccd4a34b27c823",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/serial/ipaq.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/errno.h>\n#include <linux/slab.h>\n#include <linux/tty.h>\n#include <linux/tty_driver.h>\n#include <linux/tty_flip.h>\n#include <linux/module.h>\n#include <linux/spinlock.h>\n#include <linux/uaccess.h>\n#include <linux/usb.h>\n#include <linux/usb/serial.h>\n\n#define KP_RETRIES\t100\n\n#define DRIVER_AUTHOR \"Ganesh Varadarajan <ganesh@veritas.com>\"\n#define DRIVER_DESC \"USB PocketPC PDA driver\"\n\nstatic int connect_retries = KP_RETRIES;\nstatic int initial_wait;\n\n \nstatic int  ipaq_open(struct tty_struct *tty,\n\t\t\tstruct usb_serial_port *port);\nstatic int ipaq_calc_num_ports(struct usb_serial *serial,\n\t\t\t\t\tstruct usb_serial_endpoints *epds);\nstatic int  ipaq_startup(struct usb_serial *serial);\n\nstatic const struct usb_device_id ipaq_id_table[] = {\n\t{ USB_DEVICE(0x0104, 0x00BE) },  \n\t{ USB_DEVICE(0x03F0, 0x1016) },  \n\t{ USB_DEVICE(0x03F0, 0x1116) },  \n\t{ USB_DEVICE(0x03F0, 0x1216) },  \n\t{ USB_DEVICE(0x03F0, 0x2016) },  \n\t{ USB_DEVICE(0x03F0, 0x2116) },  \n\t{ USB_DEVICE(0x03F0, 0x2216) },  \n\t{ USB_DEVICE(0x03F0, 0x3016) },  \n\t{ USB_DEVICE(0x03F0, 0x3116) },  \n\t{ USB_DEVICE(0x03F0, 0x3216) },  \n\t{ USB_DEVICE(0x03F0, 0x4016) },  \n\t{ USB_DEVICE(0x03F0, 0x4116) },  \n\t{ USB_DEVICE(0x03F0, 0x4216) },  \n\t{ USB_DEVICE(0x03F0, 0x5016) },  \n\t{ USB_DEVICE(0x03F0, 0x5116) },  \n\t{ USB_DEVICE(0x03F0, 0x5216) },  \n\t{ USB_DEVICE(0x0409, 0x00D5) },  \n\t{ USB_DEVICE(0x0409, 0x00D6) },  \n\t{ USB_DEVICE(0x0409, 0x00D7) },  \n\t{ USB_DEVICE(0x0409, 0x8024) },  \n\t{ USB_DEVICE(0x0409, 0x8025) },  \n\t{ USB_DEVICE(0x043E, 0x9C01) },  \n\t{ USB_DEVICE(0x045E, 0x00CE) },  \n\t{ USB_DEVICE(0x045E, 0x0400) },  \n\t{ USB_DEVICE(0x045E, 0x0401) },  \n\t{ USB_DEVICE(0x045E, 0x0402) },  \n\t{ USB_DEVICE(0x045E, 0x0403) },  \n\t{ USB_DEVICE(0x045E, 0x0404) },  \n\t{ USB_DEVICE(0x045E, 0x0405) },  \n\t{ USB_DEVICE(0x045E, 0x0406) },  \n\t{ USB_DEVICE(0x045E, 0x0407) },  \n\t{ USB_DEVICE(0x045E, 0x0408) },  \n\t{ USB_DEVICE(0x045E, 0x0409) },  \n\t{ USB_DEVICE(0x045E, 0x040A) },  \n\t{ USB_DEVICE(0x045E, 0x040B) },  \n\t{ USB_DEVICE(0x045E, 0x040C) },  \n\t{ USB_DEVICE(0x045E, 0x040D) },  \n\t{ USB_DEVICE(0x045E, 0x040E) },  \n\t{ USB_DEVICE(0x045E, 0x040F) },  \n\t{ USB_DEVICE(0x045E, 0x0410) },  \n\t{ USB_DEVICE(0x045E, 0x0411) },  \n\t{ USB_DEVICE(0x045E, 0x0412) },  \n\t{ USB_DEVICE(0x045E, 0x0413) },  \n\t{ USB_DEVICE(0x045E, 0x0414) },  \n\t{ USB_DEVICE(0x045E, 0x0415) },  \n\t{ USB_DEVICE(0x045E, 0x0416) },  \n\t{ USB_DEVICE(0x045E, 0x0417) },  \n\t{ USB_DEVICE(0x045E, 0x0432) },  \n\t{ USB_DEVICE(0x045E, 0x0433) },  \n\t{ USB_DEVICE(0x045E, 0x0434) },  \n\t{ USB_DEVICE(0x045E, 0x0435) },  \n\t{ USB_DEVICE(0x045E, 0x0436) },  \n\t{ USB_DEVICE(0x045E, 0x0437) },  \n\t{ USB_DEVICE(0x045E, 0x0438) },  \n\t{ USB_DEVICE(0x045E, 0x0439) },  \n\t{ USB_DEVICE(0x045E, 0x043A) },  \n\t{ USB_DEVICE(0x045E, 0x043B) },  \n\t{ USB_DEVICE(0x045E, 0x043C) },  \n\t{ USB_DEVICE(0x045E, 0x043D) },  \n\t{ USB_DEVICE(0x045E, 0x043E) },  \n\t{ USB_DEVICE(0x045E, 0x043F) },  \n\t{ USB_DEVICE(0x045E, 0x0440) },  \n\t{ USB_DEVICE(0x045E, 0x0441) },  \n\t{ USB_DEVICE(0x045E, 0x0442) },  \n\t{ USB_DEVICE(0x045E, 0x0443) },  \n\t{ USB_DEVICE(0x045E, 0x0444) },  \n\t{ USB_DEVICE(0x045E, 0x0445) },  \n\t{ USB_DEVICE(0x045E, 0x0446) },  \n\t{ USB_DEVICE(0x045E, 0x0447) },  \n\t{ USB_DEVICE(0x045E, 0x0448) },  \n\t{ USB_DEVICE(0x045E, 0x0449) },  \n\t{ USB_DEVICE(0x045E, 0x044A) },  \n\t{ USB_DEVICE(0x045E, 0x044B) },  \n\t{ USB_DEVICE(0x045E, 0x044C) },  \n\t{ USB_DEVICE(0x045E, 0x044D) },  \n\t{ USB_DEVICE(0x045E, 0x044E) },  \n\t{ USB_DEVICE(0x045E, 0x044F) },  \n\t{ USB_DEVICE(0x045E, 0x0450) },  \n\t{ USB_DEVICE(0x045E, 0x0451) },  \n\t{ USB_DEVICE(0x045E, 0x0452) },  \n\t{ USB_DEVICE(0x045E, 0x0453) },  \n\t{ USB_DEVICE(0x045E, 0x0454) },  \n\t{ USB_DEVICE(0x045E, 0x0455) },  \n\t{ USB_DEVICE(0x045E, 0x0456) },  \n\t{ USB_DEVICE(0x045E, 0x0457) },  \n\t{ USB_DEVICE(0x045E, 0x0458) },  \n\t{ USB_DEVICE(0x045E, 0x0459) },  \n\t{ USB_DEVICE(0x045E, 0x045A) },  \n\t{ USB_DEVICE(0x045E, 0x045B) },  \n\t{ USB_DEVICE(0x045E, 0x045C) },  \n\t{ USB_DEVICE(0x045E, 0x045D) },  \n\t{ USB_DEVICE(0x045E, 0x045E) },  \n\t{ USB_DEVICE(0x045E, 0x045F) },  \n\t{ USB_DEVICE(0x045E, 0x0460) },  \n\t{ USB_DEVICE(0x045E, 0x0461) },  \n\t{ USB_DEVICE(0x045E, 0x0462) },  \n\t{ USB_DEVICE(0x045E, 0x0463) },  \n\t{ USB_DEVICE(0x045E, 0x0464) },  \n\t{ USB_DEVICE(0x045E, 0x0465) },  \n\t{ USB_DEVICE(0x045E, 0x0466) },  \n\t{ USB_DEVICE(0x045E, 0x0467) },  \n\t{ USB_DEVICE(0x045E, 0x0468) },  \n\t{ USB_DEVICE(0x045E, 0x0469) },  \n\t{ USB_DEVICE(0x045E, 0x046A) },  \n\t{ USB_DEVICE(0x045E, 0x046B) },  \n\t{ USB_DEVICE(0x045E, 0x046C) },  \n\t{ USB_DEVICE(0x045E, 0x046D) },  \n\t{ USB_DEVICE(0x045E, 0x046E) },  \n\t{ USB_DEVICE(0x045E, 0x046F) },  \n\t{ USB_DEVICE(0x045E, 0x0470) },  \n\t{ USB_DEVICE(0x045E, 0x0471) },  \n\t{ USB_DEVICE(0x045E, 0x0472) },  \n\t{ USB_DEVICE(0x045E, 0x0473) },  \n\t{ USB_DEVICE(0x045E, 0x0474) },  \n\t{ USB_DEVICE(0x045E, 0x0475) },  \n\t{ USB_DEVICE(0x045E, 0x0476) },  \n\t{ USB_DEVICE(0x045E, 0x0477) },  \n\t{ USB_DEVICE(0x045E, 0x0478) },  \n\t{ USB_DEVICE(0x045E, 0x0479) },  \n\t{ USB_DEVICE(0x045E, 0x047A) },  \n\t{ USB_DEVICE(0x045E, 0x047B) },  \n\t{ USB_DEVICE(0x045E, 0x04C8) },  \n\t{ USB_DEVICE(0x045E, 0x04C9) },  \n\t{ USB_DEVICE(0x045E, 0x04CA) },  \n\t{ USB_DEVICE(0x045E, 0x04CB) },  \n\t{ USB_DEVICE(0x045E, 0x04CC) },  \n\t{ USB_DEVICE(0x045E, 0x04CD) },  \n\t{ USB_DEVICE(0x045E, 0x04CE) },  \n\t{ USB_DEVICE(0x045E, 0x04D7) },  \n\t{ USB_DEVICE(0x045E, 0x04D8) },  \n\t{ USB_DEVICE(0x045E, 0x04D9) },  \n\t{ USB_DEVICE(0x045E, 0x04DA) },  \n\t{ USB_DEVICE(0x045E, 0x04DB) },  \n\t{ USB_DEVICE(0x045E, 0x04DC) },  \n\t{ USB_DEVICE(0x045E, 0x04DD) },  \n\t{ USB_DEVICE(0x045E, 0x04DE) },  \n\t{ USB_DEVICE(0x045E, 0x04DF) },  \n\t{ USB_DEVICE(0x045E, 0x04E0) },  \n\t{ USB_DEVICE(0x045E, 0x04E1) },  \n\t{ USB_DEVICE(0x045E, 0x04E2) },  \n\t{ USB_DEVICE(0x045E, 0x04E3) },  \n\t{ USB_DEVICE(0x045E, 0x04E4) },  \n\t{ USB_DEVICE(0x045E, 0x04E5) },  \n\t{ USB_DEVICE(0x045E, 0x04E6) },  \n\t{ USB_DEVICE(0x045E, 0x04E7) },  \n\t{ USB_DEVICE(0x045E, 0x04E8) },  \n\t{ USB_DEVICE(0x045E, 0x04E9) },  \n\t{ USB_DEVICE(0x045E, 0x04EA) },  \n\t{ USB_DEVICE(0x049F, 0x0003) },  \n\t{ USB_DEVICE(0x049F, 0x0032) },  \n\t{ USB_DEVICE(0x04A4, 0x0014) },  \n\t{ USB_DEVICE(0x04AD, 0x0301) },  \n\t{ USB_DEVICE(0x04AD, 0x0302) },  \n\t{ USB_DEVICE(0x04AD, 0x0303) },  \n\t{ USB_DEVICE(0x04AD, 0x0306) },  \n\t{ USB_DEVICE(0x04B7, 0x0531) },  \n\t{ USB_DEVICE(0x04C5, 0x1058) },  \n\t{ USB_DEVICE(0x04C5, 0x1079) },  \n\t{ USB_DEVICE(0x04DA, 0x2500) },  \n\t{ USB_DEVICE(0x04DD, 0x9102) },  \n\t{ USB_DEVICE(0x04DD, 0x9121) },  \n\t{ USB_DEVICE(0x04DD, 0x9123) },  \n\t{ USB_DEVICE(0x04DD, 0x9151) },  \n\t{ USB_DEVICE(0x04DD, 0x91AC) },  \n\t{ USB_DEVICE(0x04E8, 0x5F00) },  \n\t{ USB_DEVICE(0x04E8, 0x5F01) },  \n\t{ USB_DEVICE(0x04E8, 0x5F02) },  \n\t{ USB_DEVICE(0x04E8, 0x5F03) },  \n\t{ USB_DEVICE(0x04E8, 0x5F04) },  \n\t{ USB_DEVICE(0x04E8, 0x6611) },  \n\t{ USB_DEVICE(0x04E8, 0x6613) },  \n\t{ USB_DEVICE(0x04E8, 0x6615) },  \n\t{ USB_DEVICE(0x04E8, 0x6617) },  \n\t{ USB_DEVICE(0x04E8, 0x6619) },  \n\t{ USB_DEVICE(0x04E8, 0x661B) },  \n\t{ USB_DEVICE(0x04E8, 0x662E) },  \n\t{ USB_DEVICE(0x04E8, 0x6630) },  \n\t{ USB_DEVICE(0x04E8, 0x6632) },  \n\t{ USB_DEVICE(0x04f1, 0x3011) },  \n\t{ USB_DEVICE(0x04F1, 0x3012) },  \n\t{ USB_DEVICE(0x0502, 0x1631) },  \n\t{ USB_DEVICE(0x0502, 0x1632) },  \n\t{ USB_DEVICE(0x0502, 0x16E1) },  \n\t{ USB_DEVICE(0x0502, 0x16E2) },  \n\t{ USB_DEVICE(0x0502, 0x16E3) },  \n\t{ USB_DEVICE(0x0536, 0x01A0) },  \n\t{ USB_DEVICE(0x0543, 0x0ED9) },  \n\t{ USB_DEVICE(0x0543, 0x1527) },  \n\t{ USB_DEVICE(0x0543, 0x1529) },  \n\t{ USB_DEVICE(0x0543, 0x152B) },  \n\t{ USB_DEVICE(0x0543, 0x152E) },  \n\t{ USB_DEVICE(0x0543, 0x1921) },  \n\t{ USB_DEVICE(0x0543, 0x1922) },  \n\t{ USB_DEVICE(0x0543, 0x1923) },  \n\t{ USB_DEVICE(0x05E0, 0x2000) },  \n\t{ USB_DEVICE(0x05E0, 0x2001) },  \n\t{ USB_DEVICE(0x05E0, 0x2002) },  \n\t{ USB_DEVICE(0x05E0, 0x2003) },  \n\t{ USB_DEVICE(0x05E0, 0x2004) },  \n\t{ USB_DEVICE(0x05E0, 0x2005) },  \n\t{ USB_DEVICE(0x05E0, 0x2006) },  \n\t{ USB_DEVICE(0x05E0, 0x2007) },  \n\t{ USB_DEVICE(0x05E0, 0x2008) },  \n\t{ USB_DEVICE(0x05E0, 0x2009) },  \n\t{ USB_DEVICE(0x05E0, 0x200A) },  \n\t{ USB_DEVICE(0x067E, 0x1001) },  \n\t{ USB_DEVICE(0x07CF, 0x2001) },  \n\t{ USB_DEVICE(0x07CF, 0x2002) },  \n\t{ USB_DEVICE(0x07CF, 0x2003) },  \n\t{ USB_DEVICE(0x0930, 0x0700) },  \n\t{ USB_DEVICE(0x0930, 0x0705) },  \n\t{ USB_DEVICE(0x0930, 0x0706) },  \n\t{ USB_DEVICE(0x0930, 0x0707) },  \n\t{ USB_DEVICE(0x0930, 0x0708) },  \n\t{ USB_DEVICE(0x0930, 0x0709) },  \n\t{ USB_DEVICE(0x0930, 0x070A) },  \n\t{ USB_DEVICE(0x0930, 0x070B) },  \n\t{ USB_DEVICE(0x094B, 0x0001) },  \n\t{ USB_DEVICE(0x0960, 0x0065) },  \n\t{ USB_DEVICE(0x0960, 0x0066) },  \n\t{ USB_DEVICE(0x0960, 0x0067) },  \n\t{ USB_DEVICE(0x0961, 0x0010) },  \n\t{ USB_DEVICE(0x099E, 0x0052) },  \n\t{ USB_DEVICE(0x099E, 0x4000) },  \n\t{ USB_DEVICE(0x0B05, 0x4200) },  \n\t{ USB_DEVICE(0x0B05, 0x4201) },  \n\t{ USB_DEVICE(0x0B05, 0x4202) },  \n\t{ USB_DEVICE(0x0B05, 0x420F) },  \n\t{ USB_DEVICE(0x0B05, 0x9200) },  \n\t{ USB_DEVICE(0x0B05, 0x9202) },  \n\t{ USB_DEVICE(0x0BB4, 0x00CE) },  \n\t{ USB_DEVICE(0x0BB4, 0x00CF) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A01) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A02) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A03) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A04) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A05) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A06) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A07) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A08) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A09) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A0F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A10) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A11) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A12) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A13) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A14) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A15) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A16) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A17) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A18) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A19) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A1F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A20) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A21) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A22) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A23) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A24) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A25) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A26) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A27) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A28) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A29) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A2F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A30) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A31) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A32) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A33) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A34) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A35) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A36) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A37) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A38) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A39) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A3F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A40) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A41) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A42) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A43) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A44) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A45) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A46) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A47) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A48) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A49) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A4F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A50) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A51) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A52) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A53) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A54) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A55) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A56) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A57) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A58) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A59) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A5F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A60) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A61) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A62) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A63) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A64) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A65) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A66) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A67) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A68) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A69) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A6F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A70) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A71) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A72) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A73) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A74) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A75) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A76) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A77) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A78) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A79) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A7F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A80) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A81) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A82) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A83) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A84) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A85) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A86) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A87) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A88) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A89) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A8F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A90) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A91) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A92) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A93) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A94) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A95) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A96) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A97) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A98) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A99) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9A) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9B) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9C) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9D) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9E) },  \n\t{ USB_DEVICE(0x0BB4, 0x0A9F) },  \n\t{ USB_DEVICE(0x0BB4, 0x0BCE) },  \n\t{ USB_DEVICE(0x0BF8, 0x1001) },  \n\t{ USB_DEVICE(0x0C44, 0x03A2) },  \n\t{ USB_DEVICE(0x0C8E, 0x6000) },  \n\t{ USB_DEVICE(0x0CAD, 0x9001) },  \n\t{ USB_DEVICE(0x0F4E, 0x0200) },  \n\t{ USB_DEVICE(0x0F98, 0x0201) },  \n\t{ USB_DEVICE(0x0FB8, 0x3001) },  \n\t{ USB_DEVICE(0x0FB8, 0x3002) },  \n\t{ USB_DEVICE(0x0FB8, 0x3003) },  \n\t{ USB_DEVICE(0x0FB8, 0x4001) },  \n\t{ USB_DEVICE(0x1066, 0x00CE) },  \n\t{ USB_DEVICE(0x1066, 0x0300) },  \n\t{ USB_DEVICE(0x1066, 0x0500) },  \n\t{ USB_DEVICE(0x1066, 0x0600) },  \n\t{ USB_DEVICE(0x1066, 0x0700) },  \n\t{ USB_DEVICE(0x1114, 0x0001) },  \n\t{ USB_DEVICE(0x1114, 0x0004) },  \n\t{ USB_DEVICE(0x1114, 0x0006) },  \n\t{ USB_DEVICE(0x1182, 0x1388) },  \n\t{ USB_DEVICE(0x11D9, 0x1002) },  \n\t{ USB_DEVICE(0x11D9, 0x1003) },  \n\t{ USB_DEVICE(0x1231, 0xCE01) },  \n\t{ USB_DEVICE(0x1231, 0xCE02) },  \n\t{ USB_DEVICE(0x1690, 0x0601) },  \n\t{ USB_DEVICE(0x22B8, 0x4204) },  \n\t{ USB_DEVICE(0x22B8, 0x4214) },  \n\t{ USB_DEVICE(0x22B8, 0x4224) },  \n\t{ USB_DEVICE(0x22B8, 0x4234) },  \n\t{ USB_DEVICE(0x22B8, 0x4244) },  \n\t{ USB_DEVICE(0x3340, 0x011C) },  \n\t{ USB_DEVICE(0x3340, 0x0326) },  \n\t{ USB_DEVICE(0x3340, 0x0426) },  \n\t{ USB_DEVICE(0x3340, 0x043A) },  \n\t{ USB_DEVICE(0x3340, 0x051C) },  \n\t{ USB_DEVICE(0x3340, 0x053A) },  \n\t{ USB_DEVICE(0x3340, 0x071C) },  \n\t{ USB_DEVICE(0x3340, 0x0B1C) },  \n\t{ USB_DEVICE(0x3340, 0x0E3A) },  \n\t{ USB_DEVICE(0x3340, 0x0F1C) },  \n\t{ USB_DEVICE(0x3340, 0x0F3A) },  \n\t{ USB_DEVICE(0x3340, 0x1326) },  \n\t{ USB_DEVICE(0x3340, 0x191C) },  \n\t{ USB_DEVICE(0x3340, 0x2326) },  \n\t{ USB_DEVICE(0x3340, 0x3326) },  \n\t{ USB_DEVICE(0x3708, 0x20CE) },  \n\t{ USB_DEVICE(0x3708, 0x21CE) },  \n\t{ USB_DEVICE(0x4113, 0x0210) },  \n\t{ USB_DEVICE(0x4113, 0x0211) },  \n\t{ USB_DEVICE(0x4113, 0x0400) },  \n\t{ USB_DEVICE(0x4113, 0x0410) },  \n\t{ USB_DEVICE(0x413C, 0x4001) },  \n\t{ USB_DEVICE(0x413C, 0x4002) },  \n\t{ USB_DEVICE(0x413C, 0x4003) },  \n\t{ USB_DEVICE(0x413C, 0x4004) },  \n\t{ USB_DEVICE(0x413C, 0x4005) },  \n\t{ USB_DEVICE(0x413C, 0x4006) },  \n\t{ USB_DEVICE(0x413C, 0x4007) },  \n\t{ USB_DEVICE(0x413C, 0x4008) },  \n\t{ USB_DEVICE(0x413C, 0x4009) },  \n\t{ USB_DEVICE(0x4505, 0x0010) },  \n\t{ USB_DEVICE(0x5E04, 0xCE00) },  \n\t{ }                              \n};\n\nMODULE_DEVICE_TABLE(usb, ipaq_id_table);\n\n\n \nstatic struct usb_serial_driver ipaq_device = {\n\t.driver = {\n\t\t.owner =\tTHIS_MODULE,\n\t\t.name =\t\t\"ipaq\",\n\t},\n\t.description =\t\t\"PocketPC PDA\",\n\t.id_table =\t\tipaq_id_table,\n\t.bulk_in_size =\t\t256,\n\t.bulk_out_size =\t256,\n\t.open =\t\t\tipaq_open,\n\t.attach =\t\tipaq_startup,\n\t.calc_num_ports =\tipaq_calc_num_ports,\n};\n\nstatic struct usb_serial_driver * const serial_drivers[] = {\n\t&ipaq_device, NULL\n};\n\nstatic int ipaq_open(struct tty_struct *tty,\n\t\t\tstruct usb_serial_port *port)\n{\n\tstruct usb_serial\t*serial = port->serial;\n\tint\t\t\tresult = 0;\n\tint\t\t\tretries = connect_retries;\n\n\tmsleep(1000*initial_wait);\n\n\t \n\twhile (retries) {\n\t\tretries--;\n\t\tresult = usb_control_msg(serial->dev,\n\t\t\t\tusb_sndctrlpipe(serial->dev, 0), 0x22, 0x21,\n\t\t\t\t0x1, 0, NULL, 0, 100);\n\t\tif (!result)\n\t\t\tbreak;\n\n\t\tmsleep(1000);\n\t}\n\tif (!retries && result) {\n\t\tdev_err(&port->dev, \"%s - failed doing control urb, error %d\\n\",\n\t\t\t\t\t\t\t__func__, result);\n\t\treturn result;\n\t}\n\n\treturn usb_serial_generic_open(tty, port);\n}\n\nstatic int ipaq_calc_num_ports(struct usb_serial *serial,\n\t\t\t\t\tstruct usb_serial_endpoints *epds)\n{\n\t \n\tif (epds->num_bulk_in == 0 || epds->num_bulk_out == 0)\n\t\treturn -ENODEV;\n\n\t \n\tif (epds->num_bulk_in > 1 && epds->num_bulk_out > 1) {\n\t\tepds->bulk_in[0] = epds->bulk_in[1];\n\t\tepds->bulk_out[0] = epds->bulk_out[1];\n\t}\n\n\t \n\tepds->num_bulk_in = 1;\n\tepds->num_bulk_out = 1;\n\n\treturn 1;\n}\n\nstatic int ipaq_startup(struct usb_serial *serial)\n{\n\tif (serial->dev->actconfig->desc.bConfigurationValue != 1) {\n\t\t \n\n\t\tdev_err(&serial->dev->dev, \"active config #%d != 1 ??\\n\",\n\t\t\tserial->dev->actconfig->desc.bConfigurationValue);\n\t\treturn -ENODEV;\n\t}\n\n\treturn usb_reset_configuration(serial->dev);\n}\n\nmodule_usb_serial_driver(serial_drivers, ipaq_id_table);\n\nMODULE_AUTHOR(DRIVER_AUTHOR);\nMODULE_DESCRIPTION(DRIVER_DESC);\nMODULE_LICENSE(\"GPL\");\n\nmodule_param(connect_retries, int, 0644);\nMODULE_PARM_DESC(connect_retries,\n\t\t\"Maximum number of connect retries (one second each)\");\n\nmodule_param(initial_wait, int, 0644);\nMODULE_PARM_DESC(initial_wait,\n\t\t\"Time to wait before attempting a connection (in seconds)\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}