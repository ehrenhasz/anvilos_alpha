{
  "module_name": "mod.h",
  "hash_id": "bef1e7e88f3b7f54cd7a58daf7c8d066f20b232e169658fdc194779bcefa8036",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/renesas_usbhs/mod.h",
  "human_readable_source": " \n \n#ifndef RENESAS_USB_MOD_H\n#define RENESAS_USB_MOD_H\n\n#include <linux/spinlock.h>\n#include <linux/usb/renesas_usbhs.h>\n#include \"common.h\"\n\n \nstruct usbhs_irq_state {\n\tu16 intsts0;\n\tu16 intsts1;\n\tu16 brdysts;\n\tu16 nrdysts;\n\tu16 bempsts;\n};\n\nstruct usbhs_mod {\n\tchar *name;\n\n\t \n\tint (*start)(struct usbhs_priv *priv);\n\tint (*stop)(struct usbhs_priv *priv);\n\n\t \n\n\t \n\tint (*irq_dev_state)(struct usbhs_priv *priv,\n\t\t\t     struct usbhs_irq_state *irq_state);\n\n\t \n\tint (*irq_ctrl_stage)(struct usbhs_priv *priv,\n\t\t\t      struct usbhs_irq_state *irq_state);\n\n\t \n\tint (*irq_empty)(struct usbhs_priv *priv,\n\t\t\t struct usbhs_irq_state *irq_state);\n\tu16 irq_bempsts;\n\n\t \n\tint (*irq_ready)(struct usbhs_priv *priv,\n\t\t\t struct usbhs_irq_state *irq_state);\n\tu16 irq_brdysts;\n\n\t \n\n\t \n\tint (*irq_attch)(struct usbhs_priv *priv,\n\t\t\t struct usbhs_irq_state *irq_state);\n\n\t \n\tint (*irq_dtch)(struct usbhs_priv *priv,\n\t\t\tstruct usbhs_irq_state *irq_state);\n\n\t \n\tint (*irq_sign)(struct usbhs_priv *priv,\n\t\t\tstruct usbhs_irq_state *irq_state);\n\n\t \n\tint (*irq_sack)(struct usbhs_priv *priv,\n\t\t\tstruct usbhs_irq_state *irq_state);\n\n\tstruct usbhs_priv *priv;\n};\n\nstruct usbhs_mod_info {\n\tstruct usbhs_mod *mod[USBHS_MAX];\n\tstruct usbhs_mod *curt;  \n\n\t \n\tint (*irq_vbus)(struct usbhs_priv *priv,\n\t\t\tstruct usbhs_irq_state *irq_state);\n\n\t \n\tint (*get_vbus)(struct platform_device *pdev);\n};\n\n \nstruct usbhs_mod *usbhs_mod_get(struct usbhs_priv *priv, int id);\nstruct usbhs_mod *usbhs_mod_get_current(struct usbhs_priv *priv);\nvoid usbhs_mod_register(struct usbhs_priv *priv, struct usbhs_mod *usb, int id);\nint usbhs_mod_is_host(struct usbhs_priv *priv);\nint usbhs_mod_change(struct usbhs_priv *priv, int id);\nint usbhs_mod_probe(struct usbhs_priv *priv);\nvoid usbhs_mod_remove(struct usbhs_priv *priv);\n\nvoid usbhs_mod_autonomy_mode(struct usbhs_priv *priv);\nvoid usbhs_mod_non_autonomy_mode(struct usbhs_priv *priv);\n\n \nint usbhs_status_get_device_state(struct usbhs_irq_state *irq_state);\nint usbhs_status_get_ctrl_stage(struct usbhs_irq_state *irq_state);\n\n \nvoid usbhs_irq_callback_update(struct usbhs_priv *priv, struct usbhs_mod *mod);\n\n\n#define usbhs_mod_call(priv, func, param...)\t\t\\\n\t({\t\t\t\t\t\t\\\n\t\tstruct usbhs_mod *mod;\t\t\t\\\n\t\tmod = usbhs_mod_get_current(priv);\t\\\n\t\t!mod\t\t? -ENODEV :\t\t\\\n\t\t!mod->func\t? 0 :\t\t\t\\\n\t\t mod->func(param);\t\t\t\\\n\t})\n\n#define usbhs_priv_to_modinfo(priv) (&priv->mod_info)\n#define usbhs_mod_info_call(priv, func, param...)\t\\\n({\t\t\t\t\t\t\t\\\n\tstruct usbhs_mod_info *info;\t\t\t\\\n\tinfo = usbhs_priv_to_modinfo(priv);\t\t\\\n\t!info->func ? 0 :\t\t\t\t\\\n\t info->func(param);\t\t\t\t\\\n})\n\n \n#if\tdefined(CONFIG_USB_RENESAS_USBHS_HCD) || \\\n\tdefined(CONFIG_USB_RENESAS_USBHS_HCD_MODULE)\nextern int usbhs_mod_host_probe(struct usbhs_priv *priv);\nextern int usbhs_mod_host_remove(struct usbhs_priv *priv);\n#else\nstatic inline int usbhs_mod_host_probe(struct usbhs_priv *priv)\n{\n\treturn 0;\n}\nstatic inline void usbhs_mod_host_remove(struct usbhs_priv *priv)\n{\n}\n#endif\n\n#if\tdefined(CONFIG_USB_RENESAS_USBHS_UDC) || \\\n\tdefined(CONFIG_USB_RENESAS_USBHS_UDC_MODULE)\nextern int usbhs_mod_gadget_probe(struct usbhs_priv *priv);\nextern void usbhs_mod_gadget_remove(struct usbhs_priv *priv);\n#else\nstatic inline int usbhs_mod_gadget_probe(struct usbhs_priv *priv)\n{\n\treturn 0;\n}\nstatic inline void usbhs_mod_gadget_remove(struct usbhs_priv *priv)\n{\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}