{
  "module_name": "common.h",
  "hash_id": "8d03ddbe356b9028fb6ec306d98fc64374b78d72b7a1f194d407b04bfddb526c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/renesas_usbhs/common.h",
  "human_readable_source": " \n \n#ifndef RENESAS_USB_DRIVER_H\n#define RENESAS_USB_DRIVER_H\n\n#include <linux/clk.h>\n#include <linux/extcon.h>\n#include <linux/platform_device.h>\n#include <linux/reset.h>\n#include <linux/usb/renesas_usbhs.h>\n\nstruct usbhs_priv;\n\n#include \"mod.h\"\n#include \"pipe.h\"\n\n \n#define SYSCFG\t\t0x0000\n#define BUSWAIT\t\t0x0002\n#define DVSTCTR\t\t0x0008\n#define TESTMODE\t0x000C\n#define CFIFO\t\t0x0014\n#define CFIFOSEL\t0x0020\n#define CFIFOCTR\t0x0022\n#define D0FIFO\t\t0x0100\n#define D0FIFOSEL\t0x0028\n#define D0FIFOCTR\t0x002A\n#define D1FIFO\t\t0x0120\n#define D1FIFOSEL\t0x002C\n#define D1FIFOCTR\t0x002E\n#define INTENB0\t\t0x0030\n#define INTENB1\t\t0x0032\n#define BRDYENB\t\t0x0036\n#define NRDYENB\t\t0x0038\n#define BEMPENB\t\t0x003A\n#define INTSTS0\t\t0x0040\n#define INTSTS1\t\t0x0042\n#define BRDYSTS\t\t0x0046\n#define NRDYSTS\t\t0x0048\n#define BEMPSTS\t\t0x004A\n#define FRMNUM\t\t0x004C\n#define USBREQ\t\t0x0054\t \n#define USBVAL\t\t0x0056\t \n#define USBINDX\t\t0x0058\t \n#define USBLENG\t\t0x005A\t \n#define DCPCFG\t\t0x005C\n#define DCPMAXP\t\t0x005E\n#define DCPCTR\t\t0x0060\n#define PIPESEL\t\t0x0064\n#define PIPECFG\t\t0x0068\n#define PIPEBUF\t\t0x006A\n#define PIPEMAXP\t0x006C\n#define PIPEPERI\t0x006E\n#define PIPEnCTR\t0x0070\n#define PIPE1TRE\t0x0090\n#define PIPE1TRN\t0x0092\n#define PIPE2TRE\t0x0094\n#define PIPE2TRN\t0x0096\n#define PIPE3TRE\t0x0098\n#define PIPE3TRN\t0x009A\n#define PIPE4TRE\t0x009C\n#define PIPE4TRN\t0x009E\n#define PIPE5TRE\t0x00A0\n#define PIPE5TRN\t0x00A2\n#define PIPEBTRE\t0x00A4\n#define PIPEBTRN\t0x00A6\n#define PIPECTRE\t0x00A8\n#define PIPECTRN\t0x00AA\n#define PIPEDTRE\t0x00AC\n#define PIPEDTRN\t0x00AE\n#define PIPEETRE\t0x00B0\n#define PIPEETRN\t0x00B2\n#define PIPEFTRE\t0x00B4\n#define PIPEFTRN\t0x00B6\n#define PIPE9TRE\t0x00B8\n#define PIPE9TRN\t0x00BA\n#define PIPEATRE\t0x00BC\n#define PIPEATRN\t0x00BE\n#define DEVADD0\t\t0x00D0  \n#define DEVADD1\t\t0x00D2\n#define DEVADD2\t\t0x00D4\n#define DEVADD3\t\t0x00D6\n#define DEVADD4\t\t0x00D8\n#define DEVADD5\t\t0x00DA\n#define DEVADD6\t\t0x00DC\n#define DEVADD7\t\t0x00DE\n#define DEVADD8\t\t0x00E0\n#define DEVADD9\t\t0x00E2\n#define DEVADDA\t\t0x00E4\n#define D2FIFOSEL\t0x00F0\t \n#define D2FIFOCTR\t0x00F2\t \n#define D3FIFOSEL\t0x00F4\t \n#define D3FIFOCTR\t0x00F6\t \n#define SUSPMODE\t0x0102\t \n\n \n#define SCKE\t(1 << 10)\t \n#define CNEN\t(1 << 8)\t \n#define HSE\t(1 << 7)\t \n#define DCFM\t(1 << 6)\t \n#define DRPD\t(1 << 5)\t \n#define DPRPU\t(1 << 4)\t \n#define USBE\t(1 << 0)\t \n#define UCKSEL\t(1 << 2)\t \n#define UPLLE\t(1 << 1)\t \n\n \n#define EXTLP\t(1 << 10)\t \n#define PWEN\t(1 << 9)\t \n#define USBRST\t(1 << 6)\t \n#define UACT\t(1 << 4)\t \n#define RHST\t(0x7)\t\t \n#define  RHST_LOW_SPEED  1\t \n#define  RHST_FULL_SPEED 2\t \n#define  RHST_HIGH_SPEED 3\t \n\n \n#define DREQE\t(1 << 12)\t \n#define MBW_32\t(0x2 << 10)\t \n\n \n#define BVAL\t(1 << 15)\t \n#define BCLR\t(1 << 14)\t \n#define FRDY\t(1 << 13)\t \n#define DTLN_MASK (0x0FFF)\t \n\n \n#define VBSE\t(1 << 15)\t \n#define RSME\t(1 << 14)\t \n#define SOFE\t(1 << 13)\t \n#define DVSE\t(1 << 12)\t \n#define CTRE\t(1 << 11)\t \n#define BEMPE\t(1 << 10)\t \n#define NRDYE\t(1 << 9)\t \n#define BRDYE\t(1 << 8)\t \n\n \n#define BCHGE\t(1 << 14)\t \n#define DTCHE\t(1 << 12)\t \n#define ATTCHE\t(1 << 11)\t \n#define EOFERRE\t(1 << 6)\t \n#define SIGNE\t(1 << 5)\t \n#define SACKE\t(1 << 4)\t \n\n \n#define VBINT\t(1 << 15)\t \n#define DVST\t(1 << 12)\t \n#define CTRT\t(1 << 11)\t \n#define BEMP\t(1 << 10)\t \n#define BRDY\t(1 << 8)\t \n#define VBSTS\t(1 << 7)\t \n#define VALID\t(1 << 3)\t \n\n#define DVSQ_MASK\t\t(0x7 << 4)\t \n#define  POWER_STATE\t\t(0 << 4)\n#define  DEFAULT_STATE\t\t(1 << 4)\n#define  ADDRESS_STATE\t\t(2 << 4)\n#define  CONFIGURATION_STATE\t(3 << 4)\n#define  SUSPENDED_STATE\t(4 << 4)\n\n#define CTSQ_MASK\t\t(0x7)\t \n#define  IDLE_SETUP_STAGE\t0\t \n#define  READ_DATA_STAGE\t1\t \n#define  READ_STATUS_STAGE\t2\t \n#define  WRITE_DATA_STAGE\t3\t \n#define  WRITE_STATUS_STAGE\t4\t \n#define  NODATA_STATUS_STAGE\t5\t \n#define  SEQUENCE_ERROR\t\t6\t \n\n \n#define OVRCR\t(1 << 15)  \n#define BCHG\t(1 << 14)  \n#define DTCH\t(1 << 12)  \n#define ATTCH\t(1 << 11)  \n#define EOFERR\t(1 << 6)   \n#define SIGN\t(1 << 5)   \n#define SACK\t(1 << 4)   \n\n \n \n#define TYPE_NONE\t(0 << 14)\t \n#define TYPE_BULK\t(1 << 14)\n#define TYPE_INT\t(2 << 14)\n#define TYPE_ISO\t(3 << 14)\n#define BFRE\t\t(1 << 10)\t \n#define DBLB\t\t(1 << 9)\t \n#define SHTNAK\t\t(1 << 7)\t \n#define DIR_OUT\t\t(1 << 4)\t \n\n \n \n#define DEVSEL_MASK\t(0xF << 12)\t \n#define DCP_MAXP_MASK\t(0x7F)\n#define PIPE_MAXP_MASK\t(0x7FF)\n\n \n#define BUFSIZE_SHIFT\t10\n#define BUFSIZE_MASK\t(0x1F << BUFSIZE_SHIFT)\n#define BUFNMB_MASK\t(0xFF)\n\n \n \n#define BSTS\t\t(1 << 15)\t \n#define SUREQ\t\t(1 << 14)\t \n#define INBUFM\t\t(1 << 14)\t \n#define CSSTS\t\t(1 << 12)\t \n#define\tACLRM\t\t(1 << 9)\t \n#define SQCLR\t\t(1 << 8)\t \n#define SQSET\t\t(1 << 7)\t \n#define SQMON\t\t(1 << 6)\t \n#define PBUSY\t\t(1 << 5)\t \n#define PID_MASK\t(0x3)\t\t \n#define  PID_NAK\t0\n#define  PID_BUF\t1\n#define  PID_STALL10\t2\n#define  PID_STALL11\t3\n\n#define CCPL\t\t(1 << 2)\t \n\n \n#define TRENB\t\t(1 << 9)\t \n#define TRCLR\t\t(1 << 8)\t \n\n \n#define FRNM_MASK\t(0x7FF)\n\n \n#define UPPHUB(x)\t(((x) & 0xF) << 11)\t \n#define HUBPORT(x)\t(((x) & 0x7) << 8)\t \n#define USBSPD(x)\t(((x) & 0x3) << 6)\t \n#define USBSPD_SPEED_LOW\t0x1\n#define USBSPD_SPEED_FULL\t0x2\n#define USBSPD_SPEED_HIGH\t0x3\n\n \n#define SUSPM\t\t(1 << 14)\t \n\n \nstruct usbhs_priv {\n\n\tvoid __iomem *base;\n\tunsigned int irq;\n\n\tconst struct renesas_usbhs_platform_callback *pfunc;\n\tstruct renesas_usbhs_driver_param\tdparam;\n\n\tstruct delayed_work notify_hotplug_work;\n\tstruct platform_device *pdev;\n\n\tstruct extcon_dev *edev;\n\n\tspinlock_t\t\tlock;\n\n\t \n\tstruct usbhs_mod_info mod_info;\n\n\t \n\tstruct usbhs_pipe_info pipe_info;\n\n\t \n\tstruct usbhs_fifo_info fifo_info;\n\n\tstruct phy *phy;\n\tstruct reset_control *rsts;\n\tstruct clk *clks[2];\n};\n\n \nu16 usbhs_read(struct usbhs_priv *priv, u32 reg);\nvoid usbhs_write(struct usbhs_priv *priv, u32 reg, u16 data);\nvoid usbhs_bset(struct usbhs_priv *priv, u32 reg, u16 mask, u16 data);\n\n#define usbhs_lock(p, f) spin_lock_irqsave(usbhs_priv_to_lock(p), f)\n#define usbhs_unlock(p, f) spin_unlock_irqrestore(usbhs_priv_to_lock(p), f)\n\nint usbhs_get_id_as_gadget(struct platform_device *pdev);\n\n \nvoid usbhs_sys_host_ctrl(struct usbhs_priv *priv, int enable);\nvoid usbhs_sys_function_ctrl(struct usbhs_priv *priv, int enable);\nvoid usbhs_sys_function_pullup(struct usbhs_priv *priv, int enable);\nvoid usbhs_sys_set_test_mode(struct usbhs_priv *priv, u16 mode);\n\n \nvoid usbhs_usbreq_get_val(struct usbhs_priv *priv, struct usb_ctrlrequest *req);\nvoid usbhs_usbreq_set_val(struct usbhs_priv *priv, struct usb_ctrlrequest *req);\n\n \nvoid usbhs_bus_send_sof_enable(struct usbhs_priv *priv);\nvoid usbhs_bus_send_reset(struct usbhs_priv *priv);\nint usbhs_bus_get_speed(struct usbhs_priv *priv);\nint usbhs_vbus_ctrl(struct usbhs_priv *priv, int enable);\nint usbhsc_schedule_notify_hotplug(struct platform_device *pdev);\n\n \nint usbhs_frame_get_num(struct usbhs_priv *priv);\n\n \nint usbhs_set_device_config(struct usbhs_priv *priv, int devnum, u16 upphub,\n\t\t\t   u16 hubport, u16 speed);\n\n \nvoid usbhs_xxxsts_clear(struct usbhs_priv *priv, u16 sts_reg, u16 bit);\n\n \nstruct usbhs_priv *usbhs_pdev_to_priv(struct platform_device *pdev);\n#define usbhs_get_dparam(priv, param)\t(priv->dparam.param)\n#define usbhs_priv_to_pdev(priv)\t(priv->pdev)\n#define usbhs_priv_to_dev(priv)\t\t(&priv->pdev->dev)\n#define usbhs_priv_to_lock(priv)\t(&priv->lock)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}