{
  "module_name": "fifo.h",
  "hash_id": "1eecbea244f289409888b0f8135891ffb28626a34bab57173d3ffe6c5ff1cc44",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/renesas_usbhs/fifo.h",
  "human_readable_source": " \n \n#ifndef RENESAS_USB_FIFO_H\n#define RENESAS_USB_FIFO_H\n\n#include <linux/interrupt.h>\n#include <linux/sh_dma.h>\n#include <linux/workqueue.h>\n#include <asm/dma.h>\n#include \"pipe.h\"\n\nstruct usbhs_fifo {\n\tchar *name;\n\tu32 port;\t \n\tu32 sel;\t \n\tu32 ctr;\t \n\n\tstruct usbhs_pipe\t*pipe;\n\n\tstruct dma_chan\t\t*tx_chan;\n\tstruct dma_chan\t\t*rx_chan;\n\n\tstruct sh_dmae_slave\ttx_slave;\n\tstruct sh_dmae_slave\trx_slave;\n};\n\n#define USBHS_MAX_NUM_DFIFO\t4\nstruct usbhs_fifo_info {\n\tstruct usbhs_fifo cfifo;\n\tstruct usbhs_fifo dfifo[USBHS_MAX_NUM_DFIFO];\n};\n#define usbhsf_get_dnfifo(p, n)\t(&((p)->fifo_info.dfifo[n]))\n#define usbhs_for_each_dfifo(priv, dfifo, i)\t\t\t\\\n\tfor ((i) = 0;\t\t\t\t\t\t\\\n\t     ((i) < USBHS_MAX_NUM_DFIFO) &&\t\t\t\\\n\t\t     ((dfifo) = usbhsf_get_dnfifo(priv, (i)));\t\\\n\t     (i)++)\n\nstruct usbhs_pkt_handle;\nstruct usbhs_pkt {\n\tstruct list_head node;\n\tstruct usbhs_pipe *pipe;\n\tconst struct usbhs_pkt_handle *handler;\n\tvoid (*done)(struct usbhs_priv *priv,\n\t\t     struct usbhs_pkt *pkt);\n\tstruct work_struct work;\n\tdma_addr_t dma;\n\tconst struct dmaengine_result *dma_result;\n\tvoid *buf;\n\tint length;\n\tint trans;\n\tint actual;\n\tint zero;\n\tint sequence;\n};\n\nstruct usbhs_pkt_handle {\n\tint (*prepare)(struct usbhs_pkt *pkt, int *is_done);\n\tint (*try_run)(struct usbhs_pkt *pkt, int *is_done);\n\tint (*dma_done)(struct usbhs_pkt *pkt, int *is_done);\n};\n\n \nint usbhs_fifo_probe(struct usbhs_priv *priv);\nvoid usbhs_fifo_remove(struct usbhs_priv *priv);\nvoid usbhs_fifo_init(struct usbhs_priv *priv);\nvoid usbhs_fifo_quit(struct usbhs_priv *priv);\nvoid usbhs_fifo_clear_dcp(struct usbhs_pipe *pipe);\n\n \nextern const struct usbhs_pkt_handle usbhs_fifo_pio_push_handler;\nextern const struct usbhs_pkt_handle usbhs_fifo_pio_pop_handler;\nextern const struct usbhs_pkt_handle usbhs_ctrl_stage_end_handler;\n\nextern const struct usbhs_pkt_handle usbhs_fifo_dma_push_handler;\nextern const struct usbhs_pkt_handle usbhs_fifo_dma_pop_handler;\n\nextern const struct usbhs_pkt_handle usbhs_dcp_status_stage_in_handler;\nextern const struct usbhs_pkt_handle usbhs_dcp_status_stage_out_handler;\n\nextern const struct usbhs_pkt_handle usbhs_dcp_data_stage_in_handler;\nextern const struct usbhs_pkt_handle usbhs_dcp_data_stage_out_handler;\n\nvoid usbhs_pkt_init(struct usbhs_pkt *pkt);\nvoid usbhs_pkt_push(struct usbhs_pipe *pipe, struct usbhs_pkt *pkt,\n\t\t    void (*done)(struct usbhs_priv *priv,\n\t\t\t\t struct usbhs_pkt *pkt),\n\t\t    void *buf, int len, int zero, int sequence);\nstruct usbhs_pkt *usbhs_pkt_pop(struct usbhs_pipe *pipe, struct usbhs_pkt *pkt);\nvoid usbhs_pkt_start(struct usbhs_pipe *pipe);\nstruct usbhs_pkt *__usbhsf_pkt_get(struct usbhs_pipe *pipe);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}