{
  "module_name": "debug.c",
  "hash_id": "48a60443380fc4b037b5113a38d127bfe815d2bfb8be591379b1e2d93508d36b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/common/debug.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/usb/ch9.h>\n\nstatic void usb_decode_get_status(__u8 bRequestType, __u16 wIndex,\n\t\t\t\t  __u16 wLength, char *str, size_t size)\n{\n\tswitch (bRequestType & USB_RECIP_MASK) {\n\tcase USB_RECIP_DEVICE:\n\t\tsnprintf(str, size, \"Get Device Status(Length = %d)\", wLength);\n\t\tbreak;\n\tcase USB_RECIP_INTERFACE:\n\t\tsnprintf(str, size,\n\t\t\t \"Get Interface Status(Intf = %d, Length = %d)\",\n\t\t\t wIndex, wLength);\n\t\tbreak;\n\tcase USB_RECIP_ENDPOINT:\n\t\tsnprintf(str, size, \"Get Endpoint Status(ep%d%s)\",\n\t\t\t wIndex & ~USB_DIR_IN,\n\t\t\t wIndex & USB_DIR_IN ? \"in\" : \"out\");\n\t\tbreak;\n\t}\n}\n\nstatic const char *usb_decode_device_feature(u16 wValue)\n{\n\tswitch (wValue) {\n\tcase USB_DEVICE_SELF_POWERED:\n\t\treturn \"Self Powered\";\n\tcase USB_DEVICE_REMOTE_WAKEUP:\n\t\treturn \"Remote Wakeup\";\n\tcase USB_DEVICE_TEST_MODE:\n\t\treturn \"Test Mode\";\n\tcase USB_DEVICE_U1_ENABLE:\n\t\treturn \"U1 Enable\";\n\tcase USB_DEVICE_U2_ENABLE:\n\t\treturn \"U2 Enable\";\n\tcase USB_DEVICE_LTM_ENABLE:\n\t\treturn \"LTM Enable\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic const char *usb_decode_test_mode(u16 wIndex)\n{\n\tswitch (wIndex) {\n\tcase USB_TEST_J:\n\t\treturn \": TEST_J\";\n\tcase USB_TEST_K:\n\t\treturn \": TEST_K\";\n\tcase USB_TEST_SE0_NAK:\n\t\treturn \": TEST_SE0_NAK\";\n\tcase USB_TEST_PACKET:\n\t\treturn \": TEST_PACKET\";\n\tcase USB_TEST_FORCE_ENABLE:\n\t\treturn \": TEST_FORCE_EN\";\n\tdefault:\n\t\treturn \": UNKNOWN\";\n\t}\n}\n\nstatic void usb_decode_set_clear_feature(__u8 bRequestType,\n\t\t\t\t\t __u8 bRequest, __u16 wValue,\n\t\t\t\t\t __u16 wIndex, char *str, size_t size)\n{\n\tswitch (bRequestType & USB_RECIP_MASK) {\n\tcase USB_RECIP_DEVICE:\n\t\tsnprintf(str, size, \"%s Device Feature(%s%s)\",\n\t\t\t bRequest == USB_REQ_CLEAR_FEATURE ? \"Clear\" : \"Set\",\n\t\t\t usb_decode_device_feature(wValue),\n\t\t\t wValue == USB_DEVICE_TEST_MODE ?\n\t\t\t usb_decode_test_mode(wIndex) : \"\");\n\t\tbreak;\n\tcase USB_RECIP_INTERFACE:\n\t\tsnprintf(str, size, \"%s Interface Feature(%s)\",\n\t\t\t bRequest == USB_REQ_CLEAR_FEATURE ? \"Clear\" : \"Set\",\n\t\t\t wValue == USB_INTRF_FUNC_SUSPEND ?\n\t\t\t \"Function Suspend\" : \"UNKNOWN\");\n\t\tbreak;\n\tcase USB_RECIP_ENDPOINT:\n\t\tsnprintf(str, size, \"%s Endpoint Feature(%s ep%d%s)\",\n\t\t\t bRequest == USB_REQ_CLEAR_FEATURE ? \"Clear\" : \"Set\",\n\t\t\t wValue == USB_ENDPOINT_HALT ? \"Halt\" : \"UNKNOWN\",\n\t\t\t wIndex & ~USB_DIR_IN,\n\t\t\t wIndex & USB_DIR_IN ? \"in\" : \"out\");\n\t\tbreak;\n\t}\n}\n\nstatic void usb_decode_set_address(__u16 wValue, char *str, size_t size)\n{\n\tsnprintf(str, size, \"Set Address(Addr = %02x)\", wValue);\n}\n\nstatic void usb_decode_get_set_descriptor(__u8 bRequestType, __u8 bRequest,\n\t\t\t\t\t  __u16 wValue, __u16 wIndex,\n\t\t\t\t\t  __u16 wLength, char *str, size_t size)\n{\n\tchar *s;\n\n\tswitch (wValue >> 8) {\n\tcase USB_DT_DEVICE:\n\t\ts = \"Device\";\n\t\tbreak;\n\tcase USB_DT_CONFIG:\n\t\ts = \"Configuration\";\n\t\tbreak;\n\tcase USB_DT_STRING:\n\t\ts = \"String\";\n\t\tbreak;\n\tcase USB_DT_INTERFACE:\n\t\ts = \"Interface\";\n\t\tbreak;\n\tcase USB_DT_ENDPOINT:\n\t\ts = \"Endpoint\";\n\t\tbreak;\n\tcase USB_DT_DEVICE_QUALIFIER:\n\t\ts = \"Device Qualifier\";\n\t\tbreak;\n\tcase USB_DT_OTHER_SPEED_CONFIG:\n\t\ts = \"Other Speed Config\";\n\t\tbreak;\n\tcase USB_DT_INTERFACE_POWER:\n\t\ts = \"Interface Power\";\n\t\tbreak;\n\tcase USB_DT_OTG:\n\t\ts = \"OTG\";\n\t\tbreak;\n\tcase USB_DT_DEBUG:\n\t\ts = \"Debug\";\n\t\tbreak;\n\tcase USB_DT_INTERFACE_ASSOCIATION:\n\t\ts = \"Interface Association\";\n\t\tbreak;\n\tcase USB_DT_BOS:\n\t\ts = \"BOS\";\n\t\tbreak;\n\tcase USB_DT_DEVICE_CAPABILITY:\n\t\ts = \"Device Capability\";\n\t\tbreak;\n\tcase USB_DT_PIPE_USAGE:\n\t\ts = \"Pipe Usage\";\n\t\tbreak;\n\tcase USB_DT_SS_ENDPOINT_COMP:\n\t\ts = \"SS Endpoint Companion\";\n\t\tbreak;\n\tcase USB_DT_SSP_ISOC_ENDPOINT_COMP:\n\t\ts = \"SSP Isochronous Endpoint Companion\";\n\t\tbreak;\n\tdefault:\n\t\ts = \"UNKNOWN\";\n\t\tbreak;\n\t}\n\n\tsnprintf(str, size, \"%s %s Descriptor(Index = %d, Length = %d)\",\n\t\tbRequest == USB_REQ_GET_DESCRIPTOR ? \"Get\" : \"Set\",\n\t\ts, wValue & 0xff, wLength);\n}\n\nstatic void usb_decode_get_configuration(__u16 wLength, char *str, size_t size)\n{\n\tsnprintf(str, size, \"Get Configuration(Length = %d)\", wLength);\n}\n\nstatic void usb_decode_set_configuration(__u8 wValue, char *str, size_t size)\n{\n\tsnprintf(str, size, \"Set Configuration(Config = %d)\", wValue);\n}\n\nstatic void usb_decode_get_intf(__u16 wIndex, __u16 wLength, char *str,\n\t\t\t\tsize_t size)\n{\n\tsnprintf(str, size, \"Get Interface(Intf = %d, Length = %d)\",\n\t\t wIndex, wLength);\n}\n\nstatic void usb_decode_set_intf(__u8 wValue, __u16 wIndex, char *str,\n\t\t\t\tsize_t size)\n{\n\tsnprintf(str, size, \"Set Interface(Intf = %d, Alt.Setting = %d)\",\n\t\t wIndex, wValue);\n}\n\nstatic void usb_decode_synch_frame(__u16 wIndex, __u16 wLength,\n\t\t\t\t   char *str, size_t size)\n{\n\tsnprintf(str, size, \"Synch Frame(Endpoint = %d, Length = %d)\",\n\t\t wIndex, wLength);\n}\n\nstatic void usb_decode_set_sel(__u16 wLength, char *str, size_t size)\n{\n\tsnprintf(str, size, \"Set SEL(Length = %d)\", wLength);\n}\n\nstatic void usb_decode_set_isoch_delay(__u8 wValue, char *str, size_t size)\n{\n\tsnprintf(str, size, \"Set Isochronous Delay(Delay = %d ns)\", wValue);\n}\n\nstatic void usb_decode_ctrl_generic(char *str, size_t size, __u8 bRequestType,\n\t\t\t\t    __u8 bRequest, __u16 wValue, __u16 wIndex,\n\t\t\t\t    __u16 wLength)\n{\n\tu8 recip = bRequestType & USB_RECIP_MASK;\n\tu8 type = bRequestType & USB_TYPE_MASK;\n\n\tsnprintf(str, size,\n\t\t \"Type=%s Recipient=%s Dir=%s bRequest=%u wValue=%u wIndex=%u wLength=%u\",\n\t\t (type == USB_TYPE_STANDARD)    ? \"Standard\" :\n\t\t (type == USB_TYPE_VENDOR)      ? \"Vendor\" :\n\t\t (type == USB_TYPE_CLASS)       ? \"Class\" : \"Unknown\",\n\t\t (recip == USB_RECIP_DEVICE)    ? \"Device\" :\n\t\t (recip == USB_RECIP_INTERFACE) ? \"Interface\" :\n\t\t (recip == USB_RECIP_ENDPOINT)  ? \"Endpoint\" : \"Unknown\",\n\t\t (bRequestType & USB_DIR_IN)    ? \"IN\" : \"OUT\",\n\t\t bRequest, wValue, wIndex, wLength);\n}\n\nstatic void usb_decode_ctrl_standard(char *str, size_t size, __u8 bRequestType,\n\t\t\t\t     __u8 bRequest, __u16 wValue, __u16 wIndex,\n\t\t\t\t     __u16 wLength)\n{\n\tswitch (bRequest) {\n\tcase USB_REQ_GET_STATUS:\n\t\tusb_decode_get_status(bRequestType, wIndex, wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_CLEAR_FEATURE:\n\tcase USB_REQ_SET_FEATURE:\n\t\tusb_decode_set_clear_feature(bRequestType, bRequest, wValue,\n\t\t\t\t\t     wIndex, str, size);\n\t\tbreak;\n\tcase USB_REQ_SET_ADDRESS:\n\t\tusb_decode_set_address(wValue, str, size);\n\t\tbreak;\n\tcase USB_REQ_GET_DESCRIPTOR:\n\tcase USB_REQ_SET_DESCRIPTOR:\n\t\tusb_decode_get_set_descriptor(bRequestType, bRequest, wValue,\n\t\t\t\t\t      wIndex, wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_GET_CONFIGURATION:\n\t\tusb_decode_get_configuration(wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_SET_CONFIGURATION:\n\t\tusb_decode_set_configuration(wValue, str, size);\n\t\tbreak;\n\tcase USB_REQ_GET_INTERFACE:\n\t\tusb_decode_get_intf(wIndex, wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_SET_INTERFACE:\n\t\tusb_decode_set_intf(wValue, wIndex, str, size);\n\t\tbreak;\n\tcase USB_REQ_SYNCH_FRAME:\n\t\tusb_decode_synch_frame(wIndex, wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_SET_SEL:\n\t\tusb_decode_set_sel(wLength, str, size);\n\t\tbreak;\n\tcase USB_REQ_SET_ISOCH_DELAY:\n\t\tusb_decode_set_isoch_delay(wValue, str, size);\n\t\tbreak;\n\tdefault:\n\t\tusb_decode_ctrl_generic(str, size, bRequestType, bRequest,\n\t\t\t\t\twValue, wIndex, wLength);\n\t\tbreak;\n\t}\n}\n\n \nconst char *usb_decode_ctrl(char *str, size_t size, __u8 bRequestType,\n\t\t\t    __u8 bRequest, __u16 wValue, __u16 wIndex,\n\t\t\t    __u16 wLength)\n{\n\tswitch (bRequestType & USB_TYPE_MASK) {\n\tcase USB_TYPE_STANDARD:\n\t\tusb_decode_ctrl_standard(str, size, bRequestType, bRequest,\n\t\t\t\t\t wValue, wIndex, wLength);\n\t\tbreak;\n\tcase USB_TYPE_VENDOR:\n\tcase USB_TYPE_CLASS:\n\tdefault:\n\t\tusb_decode_ctrl_generic(str, size, bRequestType, bRequest,\n\t\t\t\t\twValue, wIndex, wLength);\n\t\tbreak;\n\t}\n\n\treturn str;\n}\nEXPORT_SYMBOL_GPL(usb_decode_ctrl);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}