{
  "module_name": "gadget.h",
  "hash_id": "f8e3aed95946269f30f44593de992b4287eb48cf8c9d7d2d13b55c91943f6acc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/dwc3/gadget.h",
  "human_readable_source": " \n \n\n#ifndef __DRIVERS_USB_DWC3_GADGET_H\n#define __DRIVERS_USB_DWC3_GADGET_H\n\n#include <linux/list.h>\n#include <linux/usb/gadget.h>\n#include \"io.h\"\n\nstruct dwc3;\n#define to_dwc3_ep(ep)\t\t(container_of(ep, struct dwc3_ep, endpoint))\n#define gadget_to_dwc(g)\t(dev_get_platdata(&g->dev))\n\n \n#define DWC3_DEPCFG_INT_NUM(n)\t\t(((n) & 0x1f) << 0)\n#define DWC3_DEPCFG_XFER_COMPLETE_EN\tBIT(8)\n#define DWC3_DEPCFG_XFER_IN_PROGRESS_EN\tBIT(9)\n#define DWC3_DEPCFG_XFER_NOT_READY_EN\tBIT(10)\n#define DWC3_DEPCFG_FIFO_ERROR_EN\tBIT(11)\n#define DWC3_DEPCFG_STREAM_EVENT_EN\tBIT(13)\n#define DWC3_DEPCFG_BINTERVAL_M1(n)\t(((n) & 0xff) << 16)\n#define DWC3_DEPCFG_STREAM_CAPABLE\tBIT(24)\n#define DWC3_DEPCFG_EP_NUMBER(n)\t(((n) & 0x1f) << 25)\n#define DWC3_DEPCFG_BULK_BASED\t\tBIT(30)\n#define DWC3_DEPCFG_FIFO_BASED\t\tBIT(31)\n\n \n#define DWC3_DEPCFG_EP_TYPE(n)\t\t(((n) & 0x3) << 1)\n#define DWC3_DEPCFG_MAX_PACKET_SIZE(n)\t(((n) & 0x7ff) << 3)\n#define DWC3_DEPCFG_FIFO_NUMBER(n)\t(((n) & 0x1f) << 17)\n#define DWC3_DEPCFG_BURST_SIZE(n)\t(((n) & 0xf) << 22)\n#define DWC3_DEPCFG_DATA_SEQ_NUM(n)\t((n) << 26)\n \n#define DWC3_DEPCFG_IGN_SEQ_NUM\t\tBIT(31)\n \n#define DWC3_DEPCFG_ACTION_INIT\t\t(0 << 30)\n#define DWC3_DEPCFG_ACTION_RESTORE\tBIT(30)\n#define DWC3_DEPCFG_ACTION_MODIFY\t(2 << 30)\n\n \n#define DWC3_DEPXFERCFG_NUM_XFER_RES(n)\t((n) & 0xffff)\n\n \n#define DWC3_DEFAULT_U1_DEV_EXIT_LAT\t0x0A\t \n\n \n#define DWC3_DEFAULT_U2_DEV_EXIT_LAT\t0x1FF\t \n\n \n#define DWC3_FRNUMBER_MASK\t\t0x3fff\n \n\n#define to_dwc3_request(r)\t(container_of(r, struct dwc3_request, request))\n\n \nstatic inline struct dwc3_request *next_request(struct list_head *list)\n{\n\treturn list_first_entry_or_null(list, struct dwc3_request, list);\n}\n\n \nstatic inline void dwc3_gadget_move_started_request(struct dwc3_request *req)\n{\n\tstruct dwc3_ep\t\t*dep = req->dep;\n\n\treq->status = DWC3_REQUEST_STATUS_STARTED;\n\tlist_move_tail(&req->list, &dep->started_list);\n}\n\n \nstatic inline void dwc3_gadget_move_cancelled_request(struct dwc3_request *req,\n\t\tunsigned int reason)\n{\n\tstruct dwc3_ep\t\t*dep = req->dep;\n\n\treq->status = reason;\n\tlist_move_tail(&req->list, &dep->cancelled_list);\n}\n\nvoid dwc3_gadget_giveback(struct dwc3_ep *dep, struct dwc3_request *req,\n\t\tint status);\n\nvoid dwc3_ep0_interrupt(struct dwc3 *dwc,\n\t\tconst struct dwc3_event_depevt *event);\nvoid dwc3_ep0_out_start(struct dwc3 *dwc);\nvoid dwc3_ep0_end_control_data(struct dwc3 *dwc, struct dwc3_ep *dep);\nvoid dwc3_ep0_stall_and_restart(struct dwc3 *dwc);\nint __dwc3_gadget_ep0_set_halt(struct usb_ep *ep, int value);\nint dwc3_gadget_ep0_set_halt(struct usb_ep *ep, int value);\nint dwc3_gadget_ep0_queue(struct usb_ep *ep, struct usb_request *request,\n\t\tgfp_t gfp_flags);\nint __dwc3_gadget_ep_set_halt(struct dwc3_ep *dep, int value, int protocol);\nvoid dwc3_ep0_send_delayed_status(struct dwc3 *dwc);\nvoid dwc3_stop_active_transfer(struct dwc3_ep *dep, bool force, bool interrupt);\n\n \nstatic inline void dwc3_gadget_ep_get_transfer_index(struct dwc3_ep *dep)\n{\n\tu32\t\t\tres_id;\n\n\tres_id = dwc3_readl(dep->regs, DWC3_DEPCMD);\n\tdep->resource_index = DWC3_DEPCMD_GET_RSC_IDX(res_id);\n}\n\n \nstatic inline void dwc3_gadget_dctl_write_safe(struct dwc3 *dwc, u32 value)\n{\n\tvalue &= ~DWC3_DCTL_ULSTCHNGREQ_MASK;\n\tdwc3_writel(dwc->regs, DWC3_DCTL, value);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}