{
  "module_name": "trace.h",
  "hash_id": "d5f1fb14564ebbdf808e6cc78c99e5b15d2a9e0f7614b7bc0170e7af46499f83",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/dwc3/trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM dwc3\n\n#if !defined(__DWC3_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __DWC3_TRACE_H\n\n#include <linux/types.h>\n#include <linux/tracepoint.h>\n#include <asm/byteorder.h>\n#include \"core.h\"\n#include \"debug.h\"\n\nDECLARE_EVENT_CLASS(dwc3_log_io,\n\tTP_PROTO(void *base, u32 offset, u32 value),\n\tTP_ARGS(base, offset, value),\n\tTP_STRUCT__entry(\n\t\t__field(void *, base)\n\t\t__field(u32, offset)\n\t\t__field(u32, value)\n\t),\n\tTP_fast_assign(\n\t\t__entry->base = base;\n\t\t__entry->offset = offset;\n\t\t__entry->value = value;\n\t),\n\tTP_printk(\"addr %p offset %04x value %08x\",\n\t\t__entry->base + __entry->offset,\n\t\t__entry->offset,\n\t\t__entry->value)\n);\n\nDEFINE_EVENT(dwc3_log_io, dwc3_readl,\n\tTP_PROTO(void __iomem *base, u32 offset, u32 value),\n\tTP_ARGS(base, offset, value)\n);\n\nDEFINE_EVENT(dwc3_log_io, dwc3_writel,\n\tTP_PROTO(void __iomem *base, u32 offset, u32 value),\n\tTP_ARGS(base, offset, value)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_event,\n\tTP_PROTO(u32 event, struct dwc3 *dwc),\n\tTP_ARGS(event, dwc),\n\tTP_STRUCT__entry(\n\t\t__field(u32, event)\n\t\t__field(u32, ep0state)\n\t),\n\tTP_fast_assign(\n\t\t__entry->event = event;\n\t\t__entry->ep0state = dwc->ep0state;\n\t),\n\tTP_printk(\"event (%08x): %s\", __entry->event,\n\t\t\tdwc3_decode_event(__get_buf(DWC3_MSG_MAX), DWC3_MSG_MAX,\n\t\t\t\t\t__entry->event, __entry->ep0state))\n);\n\nDEFINE_EVENT(dwc3_log_event, dwc3_event,\n\tTP_PROTO(u32 event, struct dwc3 *dwc),\n\tTP_ARGS(event, dwc)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_ctrl,\n\tTP_PROTO(struct usb_ctrlrequest *ctrl),\n\tTP_ARGS(ctrl),\n\tTP_STRUCT__entry(\n\t\t__field(__u8, bRequestType)\n\t\t__field(__u8, bRequest)\n\t\t__field(__u16, wValue)\n\t\t__field(__u16, wIndex)\n\t\t__field(__u16, wLength)\n\t),\n\tTP_fast_assign(\n\t\t__entry->bRequestType = ctrl->bRequestType;\n\t\t__entry->bRequest = ctrl->bRequest;\n\t\t__entry->wValue = le16_to_cpu(ctrl->wValue);\n\t\t__entry->wIndex = le16_to_cpu(ctrl->wIndex);\n\t\t__entry->wLength = le16_to_cpu(ctrl->wLength);\n\t),\n\tTP_printk(\"%s\", usb_decode_ctrl(__get_buf(DWC3_MSG_MAX), DWC3_MSG_MAX,\n\t\t\t\t\t__entry->bRequestType,\n\t\t\t\t\t__entry->bRequest, __entry->wValue,\n\t\t\t\t\t__entry->wIndex, __entry->wLength)\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_ctrl, dwc3_ctrl_req,\n\tTP_PROTO(struct usb_ctrlrequest *ctrl),\n\tTP_ARGS(ctrl)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_request,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req),\n\tTP_STRUCT__entry(\n\t\t__string(name, req->dep->name)\n\t\t__field(struct dwc3_request *, req)\n\t\t__field(unsigned int, actual)\n\t\t__field(unsigned int, length)\n\t\t__field(int, status)\n\t\t__field(int, zero)\n\t\t__field(int, short_not_ok)\n\t\t__field(int, no_interrupt)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, req->dep->name);\n\t\t__entry->req = req;\n\t\t__entry->actual = req->request.actual;\n\t\t__entry->length = req->request.length;\n\t\t__entry->status = req->request.status;\n\t\t__entry->zero = req->request.zero;\n\t\t__entry->short_not_ok = req->request.short_not_ok;\n\t\t__entry->no_interrupt = req->request.no_interrupt;\n\t),\n\tTP_printk(\"%s: req %p length %u/%u %s%s%s ==> %d\",\n\t\t__get_str(name), __entry->req, __entry->actual, __entry->length,\n\t\t__entry->zero ? \"Z\" : \"z\",\n\t\t__entry->short_not_ok ? \"S\" : \"s\",\n\t\t__entry->no_interrupt ? \"i\" : \"I\",\n\t\t__entry->status\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_request, dwc3_alloc_request,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(dwc3_log_request, dwc3_free_request,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(dwc3_log_request, dwc3_ep_queue,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(dwc3_log_request, dwc3_ep_dequeue,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(dwc3_log_request, dwc3_gadget_giveback,\n\tTP_PROTO(struct dwc3_request *req),\n\tTP_ARGS(req)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_generic_cmd,\n\tTP_PROTO(unsigned int cmd, u32 param, int status),\n\tTP_ARGS(cmd, param, status),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, cmd)\n\t\t__field(u32, param)\n\t\t__field(int, status)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cmd = cmd;\n\t\t__entry->param = param;\n\t\t__entry->status = status;\n\t),\n\tTP_printk(\"cmd '%s' [%x] param %08x --> status: %s\",\n\t\tdwc3_gadget_generic_cmd_string(__entry->cmd),\n\t\t__entry->cmd, __entry->param,\n\t\tdwc3_gadget_generic_cmd_status_string(__entry->status)\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_generic_cmd, dwc3_gadget_generic_cmd,\n\tTP_PROTO(unsigned int cmd, u32 param, int status),\n\tTP_ARGS(cmd, param, status)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_gadget_ep_cmd,\n\tTP_PROTO(struct dwc3_ep *dep, unsigned int cmd,\n\t\tstruct dwc3_gadget_ep_cmd_params *params, int cmd_status),\n\tTP_ARGS(dep, cmd, params, cmd_status),\n\tTP_STRUCT__entry(\n\t\t__string(name, dep->name)\n\t\t__field(unsigned int, cmd)\n\t\t__field(u32, param0)\n\t\t__field(u32, param1)\n\t\t__field(u32, param2)\n\t\t__field(int, cmd_status)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dep->name);\n\t\t__entry->cmd = cmd;\n\t\t__entry->param0 = params->param0;\n\t\t__entry->param1 = params->param1;\n\t\t__entry->param2 = params->param2;\n\t\t__entry->cmd_status = cmd_status;\n\t),\n\tTP_printk(\"%s: cmd '%s' [%x] params %08x %08x %08x --> status: %s\",\n\t\t__get_str(name), dwc3_gadget_ep_cmd_string(__entry->cmd),\n\t\t__entry->cmd, __entry->param0,\n\t\t__entry->param1, __entry->param2,\n\t\tdwc3_ep_cmd_status_string(__entry->cmd_status)\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_gadget_ep_cmd, dwc3_gadget_ep_cmd,\n\tTP_PROTO(struct dwc3_ep *dep, unsigned int cmd,\n\t\tstruct dwc3_gadget_ep_cmd_params *params, int cmd_status),\n\tTP_ARGS(dep, cmd, params, cmd_status)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_trb,\n\tTP_PROTO(struct dwc3_ep *dep, struct dwc3_trb *trb),\n\tTP_ARGS(dep, trb),\n\tTP_STRUCT__entry(\n\t\t__string(name, dep->name)\n\t\t__field(struct dwc3_trb *, trb)\n\t\t__field(u32, bpl)\n\t\t__field(u32, bph)\n\t\t__field(u32, size)\n\t\t__field(u32, ctrl)\n\t\t__field(u32, type)\n\t\t__field(u32, enqueue)\n\t\t__field(u32, dequeue)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dep->name);\n\t\t__entry->trb = trb;\n\t\t__entry->bpl = trb->bpl;\n\t\t__entry->bph = trb->bph;\n\t\t__entry->size = trb->size;\n\t\t__entry->ctrl = trb->ctrl;\n\t\t__entry->type = usb_endpoint_type(dep->endpoint.desc);\n\t\t__entry->enqueue = dep->trb_enqueue;\n\t\t__entry->dequeue = dep->trb_dequeue;\n\t),\n\tTP_printk(\"%s: trb %p (E%d:D%d) buf %08x%08x size %s%d ctrl %08x sofn %08x (%c%c%c%c:%c%c:%s)\",\n\t\t__get_str(name), __entry->trb, __entry->enqueue,\n\t\t__entry->dequeue, __entry->bph, __entry->bpl,\n\t\t({char *s;\n\t\tint pcm = ((__entry->size >> 24) & 3) + 1;\n\n\t\tswitch (__entry->type) {\n\t\tcase USB_ENDPOINT_XFER_INT:\n\t\tcase USB_ENDPOINT_XFER_ISOC:\n\t\t\tswitch (pcm) {\n\t\t\tcase 1:\n\t\t\t\ts = \"1x \";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ts = \"2x \";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\tdefault:\n\t\t\t\ts = \"3x \";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\ts = \"\";\n\t\t} s; }),\n\t\tDWC3_TRB_SIZE_LENGTH(__entry->size), __entry->ctrl,\n\t\tDWC3_TRB_CTRL_GET_SID_SOFN(__entry->ctrl),\n\t\t__entry->ctrl & DWC3_TRB_CTRL_HWO ? 'H' : 'h',\n\t\t__entry->ctrl & DWC3_TRB_CTRL_LST ? 'L' : 'l',\n\t\t__entry->ctrl & DWC3_TRB_CTRL_CHN ? 'C' : 'c',\n\t\t__entry->ctrl & DWC3_TRB_CTRL_CSP ? 'S' : 's',\n\t\t__entry->ctrl & DWC3_TRB_CTRL_ISP_IMI ? 'S' : 's',\n\t\t__entry->ctrl & DWC3_TRB_CTRL_IOC ? 'C' : 'c',\n\t\t  dwc3_trb_type_string(DWC3_TRBCTL_TYPE(__entry->ctrl))\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_trb, dwc3_prepare_trb,\n\tTP_PROTO(struct dwc3_ep *dep, struct dwc3_trb *trb),\n\tTP_ARGS(dep, trb)\n);\n\nDEFINE_EVENT(dwc3_log_trb, dwc3_complete_trb,\n\tTP_PROTO(struct dwc3_ep *dep, struct dwc3_trb *trb),\n\tTP_ARGS(dep, trb)\n);\n\nDECLARE_EVENT_CLASS(dwc3_log_ep,\n\tTP_PROTO(struct dwc3_ep *dep),\n\tTP_ARGS(dep),\n\tTP_STRUCT__entry(\n\t\t__string(name, dep->name)\n\t\t__field(unsigned int, maxpacket)\n\t\t__field(unsigned int, maxpacket_limit)\n\t\t__field(unsigned int, max_streams)\n\t\t__field(unsigned int, maxburst)\n\t\t__field(unsigned int, flags)\n\t\t__field(unsigned int, direction)\n\t\t__field(u8, trb_enqueue)\n\t\t__field(u8, trb_dequeue)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dep->name);\n\t\t__entry->maxpacket = dep->endpoint.maxpacket;\n\t\t__entry->maxpacket_limit = dep->endpoint.maxpacket_limit;\n\t\t__entry->max_streams = dep->endpoint.max_streams;\n\t\t__entry->maxburst = dep->endpoint.maxburst;\n\t\t__entry->flags = dep->flags;\n\t\t__entry->direction = dep->direction;\n\t\t__entry->trb_enqueue = dep->trb_enqueue;\n\t\t__entry->trb_dequeue = dep->trb_dequeue;\n\t),\n\tTP_printk(\"%s: mps %d/%d streams %d burst %d ring %d/%d flags %c:%c%c%c%c:%c\",\n\t\t__get_str(name), __entry->maxpacket,\n\t\t__entry->maxpacket_limit, __entry->max_streams,\n\t\t__entry->maxburst, __entry->trb_enqueue,\n\t\t__entry->trb_dequeue,\n\t\t__entry->flags & DWC3_EP_ENABLED ? 'E' : 'e',\n\t\t__entry->flags & DWC3_EP_STALL ? 'S' : 's',\n\t\t__entry->flags & DWC3_EP_WEDGE ? 'W' : 'w',\n\t\t__entry->flags & DWC3_EP_TRANSFER_STARTED ? 'B' : 'b',\n\t\t__entry->flags & DWC3_EP_PENDING_REQUEST ? 'P' : 'p',\n\t\t__entry->direction ? '<' : '>'\n\t)\n);\n\nDEFINE_EVENT(dwc3_log_ep, dwc3_gadget_ep_enable,\n\tTP_PROTO(struct dwc3_ep *dep),\n\tTP_ARGS(dep)\n);\n\nDEFINE_EVENT(dwc3_log_ep, dwc3_gadget_ep_disable,\n\tTP_PROTO(struct dwc3_ep *dep),\n\tTP_ARGS(dep)\n);\n\n#endif  \n\n \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}