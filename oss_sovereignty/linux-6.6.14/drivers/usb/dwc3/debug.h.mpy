{
  "module_name": "debug.h",
  "hash_id": "2b660f23d8aeec2078024ccc7206b422ed9532855ea0e41a9ac8167513428093",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/dwc3/debug.h",
  "human_readable_source": " \n \n\n#ifndef __DWC3_DEBUG_H\n#define __DWC3_DEBUG_H\n\n#include \"core.h\"\n\n \nstatic inline const char *\ndwc3_gadget_ep_cmd_string(u8 cmd)\n{\n\tswitch (cmd) {\n\tcase DWC3_DEPCMD_DEPSTARTCFG:\n\t\treturn \"Start New Configuration\";\n\tcase DWC3_DEPCMD_ENDTRANSFER:\n\t\treturn \"End Transfer\";\n\tcase DWC3_DEPCMD_UPDATETRANSFER:\n\t\treturn \"Update Transfer\";\n\tcase DWC3_DEPCMD_STARTTRANSFER:\n\t\treturn \"Start Transfer\";\n\tcase DWC3_DEPCMD_CLEARSTALL:\n\t\treturn \"Clear Stall\";\n\tcase DWC3_DEPCMD_SETSTALL:\n\t\treturn \"Set Stall\";\n\tcase DWC3_DEPCMD_GETEPSTATE:\n\t\treturn \"Get Endpoint State\";\n\tcase DWC3_DEPCMD_SETTRANSFRESOURCE:\n\t\treturn \"Set Endpoint Transfer Resource\";\n\tcase DWC3_DEPCMD_SETEPCONFIG:\n\t\treturn \"Set Endpoint Configuration\";\n\tdefault:\n\t\treturn \"UNKNOWN command\";\n\t}\n}\n\n \nstatic inline const char *\ndwc3_gadget_generic_cmd_string(u8 cmd)\n{\n\tswitch (cmd) {\n\tcase DWC3_DGCMD_SET_LMP:\n\t\treturn \"Set LMP\";\n\tcase DWC3_DGCMD_SET_PERIODIC_PAR:\n\t\treturn \"Set Periodic Parameters\";\n\tcase DWC3_DGCMD_XMIT_FUNCTION:\n\t\treturn \"Transmit Function Wake Device Notification\";\n\tcase DWC3_DGCMD_SET_SCRATCHPAD_ADDR_LO:\n\t\treturn \"Set Scratchpad Buffer Array Address Lo\";\n\tcase DWC3_DGCMD_SET_SCRATCHPAD_ADDR_HI:\n\t\treturn \"Set Scratchpad Buffer Array Address Hi\";\n\tcase DWC3_DGCMD_SELECTED_FIFO_FLUSH:\n\t\treturn \"Selected FIFO Flush\";\n\tcase DWC3_DGCMD_ALL_FIFO_FLUSH:\n\t\treturn \"All FIFO Flush\";\n\tcase DWC3_DGCMD_SET_ENDPOINT_NRDY:\n\t\treturn \"Set Endpoint NRDY\";\n\tcase DWC3_DGCMD_SET_ENDPOINT_PRIME:\n\t\treturn \"Set Endpoint Prime\";\n\tcase DWC3_DGCMD_RUN_SOC_BUS_LOOPBACK:\n\t\treturn \"Run SoC Bus Loopback Test\";\n\tcase DWC3_DGCMD_DEV_NOTIFICATION:\n\t\treturn \"Device Notification\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\n \nstatic inline const char *\ndwc3_gadget_link_string(enum dwc3_link_state link_state)\n{\n\tswitch (link_state) {\n\tcase DWC3_LINK_STATE_U0:\n\t\treturn \"U0\";\n\tcase DWC3_LINK_STATE_U1:\n\t\treturn \"U1\";\n\tcase DWC3_LINK_STATE_U2:\n\t\treturn \"U2\";\n\tcase DWC3_LINK_STATE_U3:\n\t\treturn \"U3\";\n\tcase DWC3_LINK_STATE_SS_DIS:\n\t\treturn \"SS.Disabled\";\n\tcase DWC3_LINK_STATE_RX_DET:\n\t\treturn \"RX.Detect\";\n\tcase DWC3_LINK_STATE_SS_INACT:\n\t\treturn \"SS.Inactive\";\n\tcase DWC3_LINK_STATE_POLL:\n\t\treturn \"Polling\";\n\tcase DWC3_LINK_STATE_RECOV:\n\t\treturn \"Recovery\";\n\tcase DWC3_LINK_STATE_HRESET:\n\t\treturn \"Hot Reset\";\n\tcase DWC3_LINK_STATE_CMPLY:\n\t\treturn \"Compliance\";\n\tcase DWC3_LINK_STATE_LPBK:\n\t\treturn \"Loopback\";\n\tcase DWC3_LINK_STATE_RESET:\n\t\treturn \"Reset\";\n\tcase DWC3_LINK_STATE_RESUME:\n\t\treturn \"Resume\";\n\tdefault:\n\t\treturn \"UNKNOWN link state\";\n\t}\n}\n\n \nstatic inline const char *\ndwc3_gadget_hs_link_string(enum dwc3_link_state link_state)\n{\n\tswitch (link_state) {\n\tcase DWC3_LINK_STATE_U0:\n\t\treturn \"On\";\n\tcase DWC3_LINK_STATE_U2:\n\t\treturn \"Sleep\";\n\tcase DWC3_LINK_STATE_U3:\n\t\treturn \"Suspend\";\n\tcase DWC3_LINK_STATE_SS_DIS:\n\t\treturn \"Disconnected\";\n\tcase DWC3_LINK_STATE_RX_DET:\n\t\treturn \"Early Suspend\";\n\tcase DWC3_LINK_STATE_RECOV:\n\t\treturn \"Recovery\";\n\tcase DWC3_LINK_STATE_RESET:\n\t\treturn \"Reset\";\n\tcase DWC3_LINK_STATE_RESUME:\n\t\treturn \"Resume\";\n\tdefault:\n\t\treturn \"UNKNOWN link state\";\n\t}\n}\n\n \nstatic inline const char *dwc3_trb_type_string(unsigned int type)\n{\n\tswitch (type) {\n\tcase DWC3_TRBCTL_NORMAL:\n\t\treturn \"normal\";\n\tcase DWC3_TRBCTL_CONTROL_SETUP:\n\t\treturn \"setup\";\n\tcase DWC3_TRBCTL_CONTROL_STATUS2:\n\t\treturn \"status2\";\n\tcase DWC3_TRBCTL_CONTROL_STATUS3:\n\t\treturn \"status3\";\n\tcase DWC3_TRBCTL_CONTROL_DATA:\n\t\treturn \"data\";\n\tcase DWC3_TRBCTL_ISOCHRONOUS_FIRST:\n\t\treturn \"isoc-first\";\n\tcase DWC3_TRBCTL_ISOCHRONOUS:\n\t\treturn \"isoc\";\n\tcase DWC3_TRBCTL_LINK_TRB:\n\t\treturn \"link\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic inline const char *dwc3_ep0_state_string(enum dwc3_ep0_state state)\n{\n\tswitch (state) {\n\tcase EP0_UNCONNECTED:\n\t\treturn \"Unconnected\";\n\tcase EP0_SETUP_PHASE:\n\t\treturn \"Setup Phase\";\n\tcase EP0_DATA_PHASE:\n\t\treturn \"Data Phase\";\n\tcase EP0_STATUS_PHASE:\n\t\treturn \"Status Phase\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\n \nstatic inline const char *dwc3_gadget_event_string(char *str, size_t size,\n\t\tconst struct dwc3_event_devt *event)\n{\n\tenum dwc3_link_state state = event->event_info & DWC3_LINK_STATE_MASK;\n\n\tswitch (event->type) {\n\tcase DWC3_DEVICE_EVENT_DISCONNECT:\n\t\tsnprintf(str, size, \"Disconnect: [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_RESET:\n\t\tsnprintf(str, size, \"Reset [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_CONNECT_DONE:\n\t\tsnprintf(str, size, \"Connection Done [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_LINK_STATUS_CHANGE:\n\t\tsnprintf(str, size, \"Link Change [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_WAKEUP:\n\t\tsnprintf(str, size, \"WakeUp [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_SUSPEND:\n\t\tsnprintf(str, size, \"Suspend [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_SOF:\n\t\tsnprintf(str, size, \"Start-Of-Frame [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_ERRATIC_ERROR:\n\t\tsnprintf(str, size, \"Erratic Error [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_CMD_CMPL:\n\t\tsnprintf(str, size, \"Command Complete [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tcase DWC3_DEVICE_EVENT_OVERFLOW:\n\t\tsnprintf(str, size, \"Overflow [%s]\",\n\t\t\t\tdwc3_gadget_link_string(state));\n\t\tbreak;\n\tdefault:\n\t\tsnprintf(str, size, \"UNKNOWN\");\n\t}\n\n\treturn str;\n}\n\n \nstatic inline const char *dwc3_ep_event_string(char *str, size_t size,\n\t\tconst struct dwc3_event_depevt *event, u32 ep0state)\n{\n\tu8 epnum = event->endpoint_number;\n\tsize_t len;\n\tint status;\n\n\tlen = scnprintf(str, size, \"ep%d%s: \", epnum >> 1,\n\t\t\t(epnum & 1) ? \"in\" : \"out\");\n\n\tstatus = event->status;\n\n\tswitch (event->endpoint_event) {\n\tcase DWC3_DEPEVT_XFERCOMPLETE:\n\t\tlen += scnprintf(str + len, size - len,\n\t\t\t\t\"Transfer Complete (%c%c%c)\",\n\t\t\t\tstatus & DEPEVT_STATUS_SHORT ? 'S' : 's',\n\t\t\t\tstatus & DEPEVT_STATUS_IOC ? 'I' : 'i',\n\t\t\t\tstatus & DEPEVT_STATUS_LST ? 'L' : 'l');\n\n\t\tif (epnum <= 1)\n\t\t\tscnprintf(str + len, size - len, \" [%s]\",\n\t\t\t\t\tdwc3_ep0_state_string(ep0state));\n\t\tbreak;\n\tcase DWC3_DEPEVT_XFERINPROGRESS:\n\t\tscnprintf(str + len, size - len,\n\t\t\t\t\"Transfer In Progress [%08x] (%c%c%c)\",\n\t\t\t\tevent->parameters,\n\t\t\t\tstatus & DEPEVT_STATUS_SHORT ? 'S' : 's',\n\t\t\t\tstatus & DEPEVT_STATUS_IOC ? 'I' : 'i',\n\t\t\t\tstatus & DEPEVT_STATUS_LST ? 'M' : 'm');\n\t\tbreak;\n\tcase DWC3_DEPEVT_XFERNOTREADY:\n\t\tlen += scnprintf(str + len, size - len,\n\t\t\t\t\"Transfer Not Ready [%08x]%s\",\n\t\t\t\tevent->parameters,\n\t\t\t\tstatus & DEPEVT_STATUS_TRANSFER_ACTIVE ?\n\t\t\t\t\" (Active)\" : \" (Not Active)\");\n\n\t\t \n\t\tif (epnum <= 1) {\n\t\t\tint phase = DEPEVT_STATUS_CONTROL_PHASE(event->status);\n\n\t\t\tswitch (phase) {\n\t\t\tcase DEPEVT_STATUS_CONTROL_DATA:\n\t\t\t\tscnprintf(str + len, size - len,\n\t\t\t\t\t\t\" [Data Phase]\");\n\t\t\t\tbreak;\n\t\t\tcase DEPEVT_STATUS_CONTROL_STATUS:\n\t\t\t\tscnprintf(str + len, size - len,\n\t\t\t\t\t\t\" [Status Phase]\");\n\t\t\t}\n\t\t}\n\t\tbreak;\n\tcase DWC3_DEPEVT_RXTXFIFOEVT:\n\t\tscnprintf(str + len, size - len, \"FIFO\");\n\t\tbreak;\n\tcase DWC3_DEPEVT_STREAMEVT:\n\t\tstatus = event->status;\n\n\t\tswitch (status) {\n\t\tcase DEPEVT_STREAMEVT_FOUND:\n\t\t\tscnprintf(str + len, size - len, \" Stream %d Found\",\n\t\t\t\t\tevent->parameters);\n\t\t\tbreak;\n\t\tcase DEPEVT_STREAMEVT_NOTFOUND:\n\t\tdefault:\n\t\t\tscnprintf(str + len, size - len, \" Stream Not Found\");\n\t\t\tbreak;\n\t\t}\n\n\t\tbreak;\n\tcase DWC3_DEPEVT_EPCMDCMPLT:\n\t\tscnprintf(str + len, size - len, \"Endpoint Command Complete\");\n\t\tbreak;\n\tdefault:\n\t\tscnprintf(str + len, size - len, \"UNKNOWN\");\n\t}\n\n\treturn str;\n}\n\n \nstatic inline const char *dwc3_gadget_event_type_string(u8 event)\n{\n\tswitch (event) {\n\tcase DWC3_DEVICE_EVENT_DISCONNECT:\n\t\treturn \"Disconnect\";\n\tcase DWC3_DEVICE_EVENT_RESET:\n\t\treturn \"Reset\";\n\tcase DWC3_DEVICE_EVENT_CONNECT_DONE:\n\t\treturn \"Connect Done\";\n\tcase DWC3_DEVICE_EVENT_LINK_STATUS_CHANGE:\n\t\treturn \"Link Status Change\";\n\tcase DWC3_DEVICE_EVENT_WAKEUP:\n\t\treturn \"Wake-Up\";\n\tcase DWC3_DEVICE_EVENT_HIBER_REQ:\n\t\treturn \"Hibernation\";\n\tcase DWC3_DEVICE_EVENT_SUSPEND:\n\t\treturn \"Suspend\";\n\tcase DWC3_DEVICE_EVENT_SOF:\n\t\treturn \"Start of Frame\";\n\tcase DWC3_DEVICE_EVENT_ERRATIC_ERROR:\n\t\treturn \"Erratic Error\";\n\tcase DWC3_DEVICE_EVENT_CMD_CMPL:\n\t\treturn \"Command Complete\";\n\tcase DWC3_DEVICE_EVENT_OVERFLOW:\n\t\treturn \"Overflow\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic inline const char *dwc3_decode_event(char *str, size_t size, u32 event,\n\t\tu32 ep0state)\n{\n\tunion dwc3_event evt;\n\n\tmemcpy(&evt, &event, sizeof(event));\n\n\tif (evt.type.is_devspec)\n\t\treturn dwc3_gadget_event_string(str, size, &evt.devt);\n\telse\n\t\treturn dwc3_ep_event_string(str, size, &evt.depevt, ep0state);\n}\n\nstatic inline const char *dwc3_ep_cmd_status_string(int status)\n{\n\tswitch (status) {\n\tcase -ETIMEDOUT:\n\t\treturn \"Timed Out\";\n\tcase 0:\n\t\treturn \"Successful\";\n\tcase DEPEVT_TRANSFER_NO_RESOURCE:\n\t\treturn \"No Resource\";\n\tcase DEPEVT_TRANSFER_BUS_EXPIRY:\n\t\treturn \"Bus Expiry\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic inline const char *dwc3_gadget_generic_cmd_status_string(int status)\n{\n\tswitch (status) {\n\tcase -ETIMEDOUT:\n\t\treturn \"Timed Out\";\n\tcase 0:\n\t\treturn \"Successful\";\n\tcase 1:\n\t\treturn \"Error\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\n\n#ifdef CONFIG_DEBUG_FS\nextern void dwc3_debugfs_create_endpoint_dir(struct dwc3_ep *dep);\nextern void dwc3_debugfs_remove_endpoint_dir(struct dwc3_ep *dep);\nextern void dwc3_debugfs_init(struct dwc3 *d);\nextern void dwc3_debugfs_exit(struct dwc3 *d);\n#else\nstatic inline void dwc3_debugfs_create_endpoint_dir(struct dwc3_ep *dep)\n{  }\nstatic inline void dwc3_debugfs_remove_endpoint_dir(struct dwc3_ep *dep)\n{  }\nstatic inline void dwc3_debugfs_init(struct dwc3 *d)\n{  }\nstatic inline void dwc3_debugfs_exit(struct dwc3 *d)\n{  }\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}