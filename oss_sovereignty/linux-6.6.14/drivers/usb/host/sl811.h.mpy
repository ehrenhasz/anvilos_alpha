{
  "module_name": "sl811.h",
  "hash_id": "85aebaa8c806abdaf6f86f19d696fa13aa589d415b4db976bbbe18c0d4a5fc69",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/host/sl811.h",
  "human_readable_source": " \n \n\n \n\n#define SL811_EP_A(base)\t((base) + 0)\n#define SL811_EP_B(base)\t((base) + 8)\n\n#define SL811_HOST_BUF\t\t0x00\n#define SL811_PERIPH_EP0\t0x00\n#define SL811_PERIPH_EP1\t0x10\n#define SL811_PERIPH_EP2\t0x20\n#define SL811_PERIPH_EP3\t0x30\n\n\n \n#define SL11H_HOSTCTLREG\t0\n#\tdefine SL11H_HCTLMASK_ARM\t0x01\n#\tdefine SL11H_HCTLMASK_ENABLE\t0x02\n#\tdefine SL11H_HCTLMASK_IN\t0x00\n#\tdefine SL11H_HCTLMASK_OUT\t0x04\n#\tdefine SL11H_HCTLMASK_ISOCH\t0x10\n#\tdefine SL11H_HCTLMASK_AFTERSOF\t0x20\n#\tdefine SL11H_HCTLMASK_TOGGLE\t0x40\n#\tdefine SL11H_HCTLMASK_PREAMBLE\t0x80\n#define SL11H_BUFADDRREG\t1\n#define SL11H_BUFLNTHREG\t2\n#define SL11H_PKTSTATREG\t3\t \n#\tdefine SL11H_STATMASK_ACK\t0x01\n#\tdefine SL11H_STATMASK_ERROR\t0x02\n#\tdefine SL11H_STATMASK_TMOUT\t0x04\n#\tdefine SL11H_STATMASK_SEQ\t0x08\n#\tdefine SL11H_STATMASK_SETUP\t0x10\n#\tdefine SL11H_STATMASK_OVF\t0x20\n#\tdefine SL11H_STATMASK_NAK\t0x40\n#\tdefine SL11H_STATMASK_STALL\t0x80\n#define SL11H_PIDEPREG\t\t3\t \n#\tdefine\tSL_SETUP\t0xd0\n#\tdefine\tSL_IN\t\t0x90\n#\tdefine\tSL_OUT\t\t0x10\n#\tdefine\tSL_SOF\t\t0x50\n#\tdefine\tSL_PREAMBLE\t0xc0\n#\tdefine\tSL_NAK\t\t0xa0\n#\tdefine\tSL_STALL\t0xe0\n#\tdefine\tSL_DATA0\t0x30\n#\tdefine\tSL_DATA1\t0xb0\n#define SL11H_XFERCNTREG\t4\t \n#define SL11H_DEVADDRREG\t4\t \n\n\n \n#define SL11H_CTLREG1\t\t5\n#\tdefine SL11H_CTL1MASK_SOF_ENA\t0x01\n#\tdefine SL11H_CTL1MASK_FORCE\t0x18\n#\t\tdefine SL11H_CTL1MASK_NORMAL\t0x00\n#\t\tdefine SL11H_CTL1MASK_SE0\t0x08\t \n#\t\tdefine SL11H_CTL1MASK_J\t\t0x10\n#\t\tdefine SL11H_CTL1MASK_K\t\t0x18\t \n#\tdefine SL11H_CTL1MASK_LSPD\t0x20\n#\tdefine SL11H_CTL1MASK_SUSPEND\t0x40\n#define SL11H_IRQ_ENABLE\t6\n#\tdefine SL11H_INTMASK_DONE_A\t0x01\n#\tdefine SL11H_INTMASK_DONE_B\t0x02\n#\tdefine SL11H_INTMASK_SOFINTR\t0x10\n#\tdefine SL11H_INTMASK_INSRMV\t0x20\t \n#\tdefine SL11H_INTMASK_RD\t\t0x40\n#\tdefine SL11H_INTMASK_DP\t\t0x80\t \n#define SL11S_ADDRESS\t\t7\n\n \n\n#define SL11H_IRQ_STATUS\t0x0D\t \n#define SL11H_HWREVREG\t\t0x0E\t \n#\tdefine SL11H_HWRMASK_HWREV\t0xF0\n#define SL11H_SOFLOWREG\t\t0x0E\t \n#define SL11H_SOFTMRREG\t\t0x0F\t \n\n \n#define SL811HS_CTLREG2\t\t0x0F\n#\tdefine SL811HS_CTL2MASK_SOF_MASK\t0x3F\n#\tdefine SL811HS_CTL2MASK_DSWAP\t\t0x40\n#\tdefine SL811HS_CTL2MASK_HOST\t\t0x80\n\n#define SL811HS_CTL2_INIT\t(SL811HS_CTL2MASK_HOST | 0x2e)\n\n\n \n#define H_MAXPACKET\t120\t\t \n\n#define SL11H_DATA_START\t0x10\n#define\tSL811HS_PACKET_BUF(is_a)\t((is_a) \\\n\t\t? SL11H_DATA_START \\\n\t\t: (SL11H_DATA_START + H_MAXPACKET))\n\n \n\n#define\tLOG2_PERIODIC_SIZE\t5\t \n#define\tPERIODIC_SIZE\t\t(1 << LOG2_PERIODIC_SIZE)\n\nstruct sl811 {\n\tspinlock_t\t\tlock;\n\tvoid __iomem\t\t*addr_reg;\n\tvoid __iomem\t\t*data_reg;\n\tstruct sl811_platform_data\t*board;\n\n\tunsigned long\t\tstat_insrmv;\n\tunsigned long\t\tstat_wake;\n\tunsigned long\t\tstat_sof;\n\tunsigned long\t\tstat_a;\n\tunsigned long\t\tstat_b;\n\tunsigned long\t\tstat_lost;\n\tunsigned long\t\tstat_overrun;\n\n\t \n\tstruct timer_list\ttimer;\n\tstruct sl811h_ep\t*next_periodic;\n\tstruct sl811h_ep\t*next_async;\n\n\tstruct sl811h_ep\t*active_a;\n\tunsigned long\t\tjiffies_a;\n\tstruct sl811h_ep\t*active_b;\n\tunsigned long\t\tjiffies_b;\n\n\tu32\t\t\tport1;\n\tu8\t\t\tctrl1, ctrl2, irq_enable;\n\tu16\t\t\tframe;\n\n\t \n\tstruct list_head\tasync;\n\n\t \n\tu16\t\t\tload[PERIODIC_SIZE];\n\tstruct sl811h_ep\t*periodic[PERIODIC_SIZE];\n\tunsigned\t\tperiodic_count;\n};\n\nstatic inline struct sl811 *hcd_to_sl811(struct usb_hcd *hcd)\n{\n\treturn (struct sl811 *) (hcd->hcd_priv);\n}\n\nstatic inline struct usb_hcd *sl811_to_hcd(struct sl811 *sl811)\n{\n\treturn container_of((void *) sl811, struct usb_hcd, hcd_priv);\n}\n\nstruct sl811h_ep {\n\tstruct usb_host_endpoint *hep;\n\tstruct usb_device\t*udev;\n\n\tu8\t\t\tdefctrl;\n\tu8\t\t\tmaxpacket;\n\tu8\t\t\tepnum;\n\tu8\t\t\tnextpid;\n\n\tu16\t\t\terror_count;\n\tu16\t\t\tnak_count;\n\tu16\t\t\tlength;\t\t \n\n\t \n\tu16\t\t\tperiod;\n\tu16\t\t\tbranch;\n\tu16\t\t\tload;\n\tstruct sl811h_ep\t*next;\n\n\t \n\tstruct list_head\tschedule;\n};\n\n \n\n \n\nstatic inline u8 sl811_read(struct sl811 *sl811, int reg)\n{\n\twriteb(reg, sl811->addr_reg);\n\treturn readb(sl811->data_reg);\n}\n\nstatic inline void sl811_write(struct sl811 *sl811, int reg, u8 val)\n{\n\twriteb(reg, sl811->addr_reg);\n\twriteb(val, sl811->data_reg);\n}\n\nstatic inline void\nsl811_write_buf(struct sl811 *sl811, int addr, const void *buf, size_t count)\n{\n\tconst u8\t*data;\n\tvoid __iomem\t*data_reg;\n\n\tif (!count)\n\t\treturn;\n\twriteb(addr, sl811->addr_reg);\n\n\tdata = buf;\n\tdata_reg = sl811->data_reg;\n\tdo {\n\t\twriteb(*data++, data_reg);\n\t} while (--count);\n}\n\nstatic inline void\nsl811_read_buf(struct sl811 *sl811, int addr, void *buf, size_t count)\n{\n\tu8 \t\t*data;\n\tvoid __iomem\t*data_reg;\n\n\tif (!count)\n\t\treturn;\n\twriteb(addr, sl811->addr_reg);\n\n\tdata = buf;\n\tdata_reg = sl811->data_reg;\n\tdo {\n\t\t*data++ = readb(data_reg);\n\t} while (--count);\n}\n\n \n\n#ifdef PACKET_TRACE\n#    define PACKET\t\tpr_debug(\"sl811: \"stuff)\n#else\n#    define PACKET(stuff...)\tdo{}while(0)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}