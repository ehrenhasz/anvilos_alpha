{
  "module_name": "fotg210-udc.h",
  "hash_id": "88c8c02f6e74fbee9d33af951b342993d930efc24c32e2c701fbc4e9a776018f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/fotg210/fotg210-udc.h",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n\n#define FOTG210_MAX_NUM_EP\t5  \n#define FOTG210_MAX_FIFO_NUM\t4  \n\n \n#define FOTG210_GMIR\t\t0xC4\n#define GMIR_INT_POLARITY\t0x8  \n#define GMIR_MHC_INT\t\t0x4\n#define GMIR_MOTG_INT\t\t0x2\n#define GMIR_MDEV_INT\t\t0x1\n\n \n#define FOTG210_DMCR\t\t0x100\n#define DMCR_HS_EN\t\t(1 << 6)\n#define DMCR_CHIP_EN\t\t(1 << 5)\n#define DMCR_SFRST\t\t(1 << 4)\n#define DMCR_GOSUSP\t\t(1 << 3)\n#define DMCR_GLINT_EN\t\t(1 << 2)\n#define DMCR_HALF_SPEED\t\t(1 << 1)\n#define DMCR_CAP_RMWAKUP\t(1 << 0)\n\n \n#define FOTG210_DAR\t\t0x104\n#define DAR_AFT_CONF\t\t(1 << 7)\n\n \n#define FOTG210_DTR\t\t0x108\n#define DTR_TST_CLRFF\t\t(1 << 0)\n\n \n#define FOTG210_PHYTMSR\t\t0x114\n#define PHYTMSR_TST_PKT\t\t(1 << 4)\n#define PHYTMSR_TST_SE0NAK\t(1 << 3)\n#define PHYTMSR_TST_KSTA\t(1 << 2)\n#define PHYTMSR_TST_JSTA\t(1 << 1)\n#define PHYTMSR_UNPLUG\t\t(1 << 0)\n\n \n#define FOTG210_DCFESR\t\t0x120\n#define DCFESR_FIFO_EMPTY(fifo)\t(1 << 8 << (fifo))\n#define DCFESR_CX_EMP\t\t(1 << 5)\n#define DCFESR_CX_CLR\t\t(1 << 3)\n#define DCFESR_CX_STL\t\t(1 << 2)\n#define DCFESR_TST_PKDONE\t(1 << 1)\n#define DCFESR_CX_DONE\t\t(1 << 0)\n\n \n#define FOTG210_DICR\t\t0x124\n\n \n#define FOTG210_DMIGR\t\t0x130\n#define DMIGR_MINT_G2\t\t(1 << 2)\n#define DMIGR_MINT_G1\t\t(1 << 1)\n#define DMIGR_MINT_G0\t\t(1 << 0)\n\n \n#define FOTG210_DMISGR0\t\t0x134\n#define DMISGR0_MCX_COMEND\t(1 << 3)\n#define DMISGR0_MCX_OUT_INT\t(1 << 2)\n#define DMISGR0_MCX_IN_INT\t(1 << 1)\n#define DMISGR0_MCX_SETUP_INT\t(1 << 0)\n\n \n#define FOTG210_DMISGR1\t\t0x138\n#define DMISGR1_MF3_IN_INT\t(1 << 19)\n#define DMISGR1_MF2_IN_INT\t(1 << 18)\n#define DMISGR1_MF1_IN_INT\t(1 << 17)\n#define DMISGR1_MF0_IN_INT\t(1 << 16)\n#define DMISGR1_MF_IN_INT(fifo)\t(1 << (16 + (fifo)))\n#define DMISGR1_MF3_SPK_INT\t(1 << 7)\n#define DMISGR1_MF3_OUT_INT\t(1 << 6)\n#define DMISGR1_MF2_SPK_INT\t(1 << 5)\n#define DMISGR1_MF2_OUT_INT\t(1 << 4)\n#define DMISGR1_MF1_SPK_INT\t(1 << 3)\n#define DMISGR1_MF1_OUT_INT\t(1 << 2)\n#define DMISGR1_MF0_SPK_INT\t(1 << 1)\n#define DMISGR1_MF0_OUT_INT\t(1 << 0)\n#define DMISGR1_MF_OUTSPK_INT(fifo)\t(0x3 << (fifo) * 2)\n\n \n#define FOTG210_DMISGR2\t\t0x13C\n#define DMISGR2_MDMA_ERROR\t(1 << 8)\n#define DMISGR2_MDMA_CMPLT\t(1 << 7)\n\n \n#define FOTG210_DIGR\t\t0x140\n#define DIGR_INT_G2\t\t(1 << 2)\n#define DIGR_INT_G1\t\t(1 << 1)\n#define DIGR_INT_G0\t\t(1 << 0)\n\n \n#define FOTG210_DISGR0\t\t0x144\n#define DISGR0_CX_COMABT_INT\t(1 << 5)\n#define DISGR0_CX_COMFAIL_INT\t(1 << 4)\n#define DISGR0_CX_COMEND_INT\t(1 << 3)\n#define DISGR0_CX_OUT_INT\t(1 << 2)\n#define DISGR0_CX_IN_INT\t(1 << 1)\n#define DISGR0_CX_SETUP_INT\t(1 << 0)\n\n \n#define FOTG210_DISGR1\t\t0x148\n#define DISGR1_OUT_INT(fifo)\t(1 << ((fifo) * 2))\n#define DISGR1_SPK_INT(fifo)\t(1 << 1 << ((fifo) * 2))\n#define DISGR1_IN_INT(fifo)\t(1 << 16 << (fifo))\n\n \n#define FOTG210_DISGR2\t\t0x14C\n#define DISGR2_DMA_ERROR\t(1 << 8)\n#define DISGR2_DMA_CMPLT\t(1 << 7)\n#define DISGR2_RX0BYTE_INT\t(1 << 6)\n#define DISGR2_TX0BYTE_INT\t(1 << 5)\n#define DISGR2_ISO_SEQ_ABORT_INT\t(1 << 4)\n#define DISGR2_ISO_SEQ_ERR_INT\t(1 << 3)\n#define DISGR2_RESM_INT\t\t(1 << 2)\n#define DISGR2_SUSP_INT\t\t(1 << 1)\n#define DISGR2_USBRST_INT\t(1 << 0)\n\n \n#define FOTG210_RX0BYTE\t\t0x150\n#define RX0BYTE_EP8\t\t(1 << 7)\n#define RX0BYTE_EP7\t\t(1 << 6)\n#define RX0BYTE_EP6\t\t(1 << 5)\n#define RX0BYTE_EP5\t\t(1 << 4)\n#define RX0BYTE_EP4\t\t(1 << 3)\n#define RX0BYTE_EP3\t\t(1 << 2)\n#define RX0BYTE_EP2\t\t(1 << 1)\n#define RX0BYTE_EP1\t\t(1 << 0)\n\n \n#define FOTG210_TX0BYTE\t\t0x154\n#define TX0BYTE_EP8\t\t(1 << 7)\n#define TX0BYTE_EP7\t\t(1 << 6)\n#define TX0BYTE_EP6\t\t(1 << 5)\n#define TX0BYTE_EP5\t\t(1 << 4)\n#define TX0BYTE_EP4\t\t(1 << 3)\n#define TX0BYTE_EP3\t\t(1 << 2)\n#define TX0BYTE_EP2\t\t(1 << 1)\n#define TX0BYTE_EP1\t\t(1 << 0)\n\n \n#define FOTG210_INEPMPSR(ep)\t(0x160 + 4 * ((ep) - 1))\n#define INOUTEPMPSR_MPS(mps)\t((mps) & 0x2FF)\n#define INOUTEPMPSR_STL_EP\t(1 << 11)\n#define INOUTEPMPSR_RESET_TSEQ\t(1 << 12)\n\n \n#define FOTG210_OUTEPMPSR(ep)\t(0x180 + 4 * ((ep) - 1))\n\n \n#define FOTG210_EPMAP\t\t0x1A0\n#define EPMAP_FIFONO(ep, dir)\t\t\\\n\t((((ep) - 1) << ((ep) - 1) * 8) << ((dir) ? 0 : 4))\n#define EPMAP_FIFONOMSK(ep, dir)\t\\\n\t((3 << ((ep) - 1) * 8) << ((dir) ? 0 : 4))\n\n \n#define FOTG210_FIFOMAP\t\t0x1A8\n#define FIFOMAP_DIROUT(fifo)\t(0x0 << 4 << (fifo) * 8)\n#define FIFOMAP_DIRIN(fifo)\t(0x1 << 4 << (fifo) * 8)\n#define FIFOMAP_BIDIR(fifo)\t(0x2 << 4 << (fifo) * 8)\n#define FIFOMAP_NA(fifo)\t(0x3 << 4 << (fifo) * 8)\n#define FIFOMAP_EPNO(ep)\t((ep) << ((ep) - 1) * 8)\n#define FIFOMAP_EPNOMSK(ep)\t(0xF << ((ep) - 1) * 8)\n\n \n#define FOTG210_FIFOCF\t\t0x1AC\n#define FIFOCF_TYPE(type, fifo)\t((type) << (fifo) * 8)\n#define FIFOCF_BLK_SIN(fifo)\t(0x0 << (fifo) * 8 << 2)\n#define FIFOCF_BLK_DUB(fifo)\t(0x1 << (fifo) * 8 << 2)\n#define FIFOCF_BLK_TRI(fifo)\t(0x2 << (fifo) * 8 << 2)\n#define FIFOCF_BLKSZ_512(fifo)\t(0x0 << (fifo) * 8 << 4)\n#define FIFOCF_BLKSZ_1024(fifo)\t(0x1 << (fifo) * 8 << 4)\n#define FIFOCF_FIFO_EN(fifo)\t(0x1 << (fifo) * 8 << 5)\n\n \n#define FOTG210_FIBCR(fifo)\t(0x1B0 + (fifo) * 4)\n#define FIBCR_BCFX\t\t0x7FF\n#define FIBCR_FFRST\t\t(1 << 12)\n\n \n#define FOTG210_DMATFNR\t\t0x1C0\n#define DMATFNR_ACC_CXF\t\t(1 << 4)\n#define DMATFNR_ACC_F3\t\t(1 << 3)\n#define DMATFNR_ACC_F2\t\t(1 << 2)\n#define DMATFNR_ACC_F1\t\t(1 << 1)\n#define DMATFNR_ACC_F0\t\t(1 << 0)\n#define DMATFNR_ACC_FN(fifo)\t(1 << (fifo))\n#define DMATFNR_DISDMA\t\t0\n\n \n#define FOTG210_DMACPSR1\t0x1C8\n#define DMACPSR1_DMA_LEN(len)\t(((len) & 0xFFFF) << 8)\n#define DMACPSR1_DMA_ABORT\t(1 << 3)\n#define DMACPSR1_DMA_TYPE(dir_in)\t(((dir_in) ? 1 : 0) << 1)\n#define DMACPSR1_DMA_START\t(1 << 0)\n\n \n#define FOTG210_DMACPSR2\t0x1CC\n\n \n#define FOTG210_CXPORT\t\t0x1D0\n\nstruct fotg210_request {\n\tstruct usb_request\treq;\n\tstruct list_head\tqueue;\n};\n\nstruct fotg210_ep {\n\tstruct usb_ep\t\tep;\n\tstruct fotg210_udc\t*fotg210;\n\n\tstruct list_head\tqueue;\n\tunsigned\t\tstall:1;\n\tunsigned\t\twedged:1;\n\tunsigned\t\tuse_dma:1;\n\n\tunsigned char\t\tepnum;\n\tunsigned char\t\ttype;\n\tunsigned char\t\tdir_in;\n\tunsigned int\t\tmaxp;\n\tconst struct usb_endpoint_descriptor\t*desc;\n};\n\nstruct fotg210_udc {\n\tspinlock_t\t\tlock;  \n\tvoid __iomem\t\t*reg;\n\n\tunsigned long\t\tirq_trigger;\n\n\tstruct device\t\t\t*dev;\n\tstruct fotg210\t\t\t*fotg;\n\tstruct usb_phy\t\t\t*phy;\n\tstruct usb_gadget\t\tgadget;\n\tstruct usb_gadget_driver\t*driver;\n\n\tstruct fotg210_ep\t*ep[FOTG210_MAX_NUM_EP];\n\n\tstruct usb_request\t*ep0_req;\t \n\t__le16\t\t\tep0_data;\n\tu8\t\t\tep0_dir;\t \n\n\tu8\t\t\treenum;\t\t \n};\n\n#define gadget_to_fotg210(g)\tcontainer_of((g), struct fotg210_udc, gadget)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}