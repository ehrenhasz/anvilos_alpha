{
  "module_name": "xhci-dbc.h",
  "hash_id": "ee5b9f84b23ad63e1d6478add8baf145cffb6bbcf576399a4ba19d798ed1caa3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/early/xhci-dbc.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_XHCI_DBC_H\n#define __LINUX_XHCI_DBC_H\n\n#include <linux/types.h>\n#include <linux/usb/ch9.h>\n\n \nstruct xdbc_regs {\n\t__le32\tcapability;\n\t__le32\tdoorbell;\n\t__le32\tersts;\t\t \n\t__le32\t__reserved_0;\t \n\t__le64\terstba;\t\t \n\t__le64\terdp;\t\t \n\t__le32\tcontrol;\n\t__le32\tstatus;\n\t__le32\tportsc;\t\t \n\t__le32\t__reserved_1;\t \n\t__le64\tdccp;\t\t \n\t__le32\tdevinfo1;\t \n\t__le32\tdevinfo2;\t \n};\n\n#define DEBUG_MAX_BURST(p)\t(((p) >> 16) & 0xff)\n\n#define CTRL_DBC_RUN\t\tBIT(0)\n#define CTRL_PORT_ENABLE\tBIT(1)\n#define CTRL_HALT_OUT_TR\tBIT(2)\n#define CTRL_HALT_IN_TR\t\tBIT(3)\n#define CTRL_DBC_RUN_CHANGE\tBIT(4)\n#define CTRL_DBC_ENABLE\t\tBIT(31)\n\n#define DCST_DEBUG_PORT(p)\t(((p) >> 24) & 0xff)\n\n#define PORTSC_CONN_STATUS\tBIT(0)\n#define PORTSC_CONN_CHANGE\tBIT(17)\n#define PORTSC_RESET_CHANGE\tBIT(21)\n#define PORTSC_LINK_CHANGE\tBIT(22)\n#define PORTSC_CONFIG_CHANGE\tBIT(23)\n\n \nstruct xdbc_trb {\n\t__le32 field[4];\n};\n\nstruct xdbc_erst_entry {\n\t__le64\tseg_addr;\n\t__le32\tseg_size;\n\t__le32\t__reserved_0;\n};\n\nstruct xdbc_info_context {\n\t__le64\tstring0;\n\t__le64\tmanufacturer;\n\t__le64\tproduct;\n\t__le64\tserial;\n\t__le32\tlength;\n\t__le32\t__reserved_0[7];\n};\n\nstruct xdbc_ep_context {\n\t__le32\tep_info1;\n\t__le32\tep_info2;\n\t__le64\tdeq;\n\t__le32\ttx_info;\n\t__le32\t__reserved_0[11];\n};\n\nstruct xdbc_context {\n\tstruct xdbc_info_context\tinfo;\n\tstruct xdbc_ep_context\t\tout;\n\tstruct xdbc_ep_context\t\tin;\n};\n\n#define XDBC_INFO_CONTEXT_SIZE\t\t48\n#define XDBC_MAX_STRING_LENGTH\t\t64\n#define XDBC_STRING_MANUFACTURER\t\"Linux Foundation\"\n#define XDBC_STRING_PRODUCT\t\t\"Linux USB GDB Target\"\n#define XDBC_STRING_SERIAL\t\t\"0001\"\n\nstruct xdbc_strings {\n\tchar\tstring0[XDBC_MAX_STRING_LENGTH];\n\tchar\tmanufacturer[XDBC_MAX_STRING_LENGTH];\n\tchar\tproduct[XDBC_MAX_STRING_LENGTH];\n\tchar\tserial[XDBC_MAX_STRING_LENGTH];\n};\n\n#define XDBC_PROTOCOL\t\t1\t \n#define XDBC_VENDOR_ID\t\t0x1d6b\t \n#define XDBC_PRODUCT_ID\t\t0x0011\t \n#define XDBC_DEVICE_REV\t\t0x0010\t \n\n \nstruct xdbc_segment {\n\tstruct xdbc_trb\t\t*trbs;\n\tdma_addr_t\t\tdma;\n};\n\n#define XDBC_TRBS_PER_SEGMENT\t256\n\nstruct xdbc_ring {\n\tstruct xdbc_segment\t*segment;\n\tstruct xdbc_trb\t\t*enqueue;\n\tstruct xdbc_trb\t\t*dequeue;\n\tu32\t\t\tcycle_state;\n};\n\n \n#define XDBC_EPID_OUT\t\t0\n#define XDBC_EPID_IN\t\t1\n#define XDBC_EPID_OUT_INTEL\t2\n#define XDBC_EPID_IN_INTEL\t3\n\nstruct xdbc_state {\n\tu16\t\t\tvendor;\n\tu16\t\t\tdevice;\n\tu32\t\t\tbus;\n\tu32\t\t\tdev;\n\tu32\t\t\tfunc;\n\tvoid __iomem\t\t*xhci_base;\n\tu64\t\t\txhci_start;\n\tsize_t\t\t\txhci_length;\n\tint\t\t\tport_number;\n\n\t \n\tstruct xdbc_regs __iomem *xdbc_reg;\n\n\t \n\tdma_addr_t\t\ttable_dma;\n\tvoid\t\t\t*table_base;\n\n\t \n\tdma_addr_t\t\terst_dma;\n\tsize_t\t\t\terst_size;\n\tvoid\t\t\t*erst_base;\n\n\t \n\tstruct xdbc_ring\tevt_ring;\n\tstruct xdbc_segment\tevt_seg;\n\n\t \n\tdma_addr_t\t\tdbcc_dma;\n\tsize_t\t\t\tdbcc_size;\n\tvoid\t\t\t*dbcc_base;\n\n\t \n\tdma_addr_t\t\tstring_dma;\n\tsize_t\t\t\tstring_size;\n\tvoid\t\t\t*string_base;\n\n\t \n\tstruct xdbc_ring\tout_ring;\n\tstruct xdbc_segment\tout_seg;\n\tvoid\t\t\t*out_buf;\n\tdma_addr_t\t\tout_dma;\n\n\t \n\tstruct xdbc_ring\tin_ring;\n\tstruct xdbc_segment\tin_seg;\n\tvoid\t\t\t*in_buf;\n\tdma_addr_t\t\tin_dma;\n\n\tu32\t\t\tflags;\n\n\t \n\traw_spinlock_t\t\tlock;\n};\n\n#define XDBC_PCI_MAX_BUSES\t256\n#define XDBC_PCI_MAX_DEVICES\t32\n#define XDBC_PCI_MAX_FUNCTION\t8\n\n#define XDBC_TABLE_ENTRY_SIZE\t64\n#define XDBC_ERST_ENTRY_NUM\t1\n#define XDBC_DBCC_ENTRY_NUM\t3\n#define XDBC_STRING_ENTRY_NUM\t4\n\n \n#define XDBC_FLAGS_INITIALIZED\tBIT(0)\n#define XDBC_FLAGS_IN_STALL\tBIT(1)\n#define XDBC_FLAGS_OUT_STALL\tBIT(2)\n#define XDBC_FLAGS_IN_PROCESS\tBIT(3)\n#define XDBC_FLAGS_OUT_PROCESS\tBIT(4)\n#define XDBC_FLAGS_CONFIGURED\tBIT(5)\n\n#define XDBC_MAX_PACKET\t\t1024\n\n \n#define OUT_EP_DOORBELL\t\t0\n#define IN_EP_DOORBELL\t\t1\n#define DOOR_BELL_TARGET(p)\t(((p) & 0xff) << 8)\n\n#define xdbc_read64(regs)\txhci_read_64(NULL, (regs))\n#define xdbc_write64(val, regs)\txhci_write_64(NULL, (val), (regs))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}