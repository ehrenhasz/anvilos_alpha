{
  "module_name": "usb.h",
  "hash_id": "c7f85af873b32ca8bb594160fe1dd222e90253f50a765ed4788272872b8e3bd3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/storage/usb.h",
  "human_readable_source": " \n \n\n#ifndef _USB_H_\n#define _USB_H_\n\n#include <linux/usb.h>\n#include <linux/usb_usual.h>\n#include <linux/blkdev.h>\n#include <linux/completion.h>\n#include <linux/mutex.h>\n#include <linux/workqueue.h>\n#include <scsi/scsi_host.h>\n\nstruct us_data;\nstruct scsi_cmnd;\n\n \n\nstruct us_unusual_dev {\n\tconst char* vendorName;\n\tconst char* productName;\n\t__u8  useProtocol;\n\t__u8  useTransport;\n\tint (*initFunction)(struct us_data *);\n};\n\n\n \n#define US_FLIDX_URB_ACTIVE\t0\t \n#define US_FLIDX_SG_ACTIVE\t1\t \n#define US_FLIDX_ABORTING\t2\t \n#define US_FLIDX_DISCONNECTING\t3\t \n#define US_FLIDX_RESETTING\t4\t \n#define US_FLIDX_TIMED_OUT\t5\t \n#define US_FLIDX_SCAN_PENDING\t6\t \n#define US_FLIDX_REDO_READ10\t7\t \n#define US_FLIDX_READ10_WORKED\t8\t \n\n#define USB_STOR_STRING_LEN 32\n\n \n\n#define US_IOBUF_SIZE\t\t64\t \n#define US_SENSE_SIZE\t\t18\t \n\ntypedef int (*trans_cmnd)(struct scsi_cmnd *, struct us_data*);\ntypedef int (*trans_reset)(struct us_data*);\ntypedef void (*proto_cmnd)(struct scsi_cmnd*, struct us_data*);\ntypedef void (*extra_data_destructor)(void *);\t \ntypedef void (*pm_hook)(struct us_data *, int);\t \n\n#define US_SUSPEND\t0\n#define US_RESUME\t1\n\n \nstruct us_data {\n\t \n\tstruct mutex\t\tdev_mutex;\t  \n\tstruct usb_device\t*pusb_dev;\t  \n\tstruct usb_interface\t*pusb_intf;\t  \n\tconst struct us_unusual_dev   *unusual_dev;\n\t\t\t\t\t\t \n\tunsigned long\t\tfflags;\t\t  \n\tunsigned long\t\tdflags;\t\t  \n\tunsigned int\t\tsend_bulk_pipe;\t  \n\tunsigned int\t\trecv_bulk_pipe;\n\tunsigned int\t\tsend_ctrl_pipe;\n\tunsigned int\t\trecv_ctrl_pipe;\n\tunsigned int\t\trecv_intr_pipe;\n\n\t \n\tchar\t\t\t*transport_name;\n\tchar\t\t\t*protocol_name;\n\t__le32\t\t\tbcs_signature;\n\tu8\t\t\tsubclass;\n\tu8\t\t\tprotocol;\n\tu8\t\t\tmax_lun;\n\n\tu8\t\t\tifnum;\t\t  \n\tu8\t\t\tep_bInterval;\t  \n\n\t \n\ttrans_cmnd\t\ttransport;\t  \n\ttrans_reset\t\ttransport_reset;  \n\tproto_cmnd\t\tproto_handler;\t  \n\n\t \n\tstruct scsi_cmnd\t*srb;\t\t  \n\tunsigned int\t\ttag;\t\t  \n\tchar\t\t\tscsi_name[32];\t  \n\n\t \n\tstruct urb\t\t*current_urb;\t  \n\tstruct usb_ctrlrequest\t*cr;\t\t  \n\tstruct usb_sg_request\tcurrent_sg;\t  \n\tunsigned char\t\t*iobuf;\t\t  \n\tdma_addr_t\t\tiobuf_dma;\t  \n\tstruct task_struct\t*ctl_thread;\t  \n\n\t \n\tstruct completion\tcmnd_ready;\t  \n\tstruct completion\tnotify;\t\t  \n\twait_queue_head_t\tdelay_wait;\t  \n\tstruct delayed_work\tscan_dwork;\t  \n\n\t \n\tvoid\t\t\t*extra;\t\t  \n\textra_data_destructor\textra_destructor; \n#ifdef CONFIG_PM\n\tpm_hook\t\t\tsuspend_resume_hook;\n#endif\n\n\t \n\tint\t\t\tuse_last_sector_hacks;\n\tint\t\t\tlast_sector_retries;\n};\n\n \nstatic inline struct Scsi_Host *us_to_host(struct us_data *us) {\n\treturn container_of((void *) us, struct Scsi_Host, hostdata);\n}\nstatic inline struct us_data *host_to_us(struct Scsi_Host *host) {\n\treturn (struct us_data *) host->hostdata;\n}\n\n \nextern void fill_inquiry_response(struct us_data *us,\n\tunsigned char *data, unsigned int data_len);\n\n \n#define scsi_unlock(host)\tspin_unlock_irq(host->host_lock)\n#define scsi_lock(host)\t\tspin_lock_irq(host->host_lock)\n\n \n#ifdef CONFIG_PM\nextern int usb_stor_suspend(struct usb_interface *iface, pm_message_t message);\nextern int usb_stor_resume(struct usb_interface *iface);\nextern int usb_stor_reset_resume(struct usb_interface *iface);\n#else\n#define usb_stor_suspend\tNULL\n#define usb_stor_resume\t\tNULL\n#define usb_stor_reset_resume\tNULL\n#endif\n\nextern int usb_stor_pre_reset(struct usb_interface *iface);\nextern int usb_stor_post_reset(struct usb_interface *iface);\n\nextern int usb_stor_probe1(struct us_data **pus,\n\t\tstruct usb_interface *intf,\n\t\tconst struct usb_device_id *id,\n\t\tconst struct us_unusual_dev *unusual_dev,\n\t\tconst struct scsi_host_template *sht);\nextern int usb_stor_probe2(struct us_data *us);\nextern void usb_stor_disconnect(struct usb_interface *intf);\n\nextern void usb_stor_adjust_quirks(struct usb_device *dev,\n\t\tunsigned long *fflags);\n\n#define module_usb_stor_driver(__driver, __sht, __name) \\\nstatic int __init __driver##_init(void) \\\n{ \\\n\tusb_stor_host_template_init(&(__sht), __name, THIS_MODULE); \\\n\treturn usb_register(&(__driver)); \\\n} \\\nmodule_init(__driver##_init); \\\nstatic void __exit __driver##_exit(void) \\\n{ \\\n\tusb_deregister(&(__driver)); \\\n} \\\nmodule_exit(__driver##_exit)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}