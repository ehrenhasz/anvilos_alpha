{
  "module_name": "cdnsp-trace.h",
  "hash_id": "802cf9343f1617c4b7982bdbc9bc4ea7d0e7026c0104bda00bd16b6cdce17d93",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/cdns3/cdnsp-trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM cdnsp-dev\n\n \n#undef TRACE_SYSTEM_VAR\n#define TRACE_SYSTEM_VAR cdnsp_dev\n\n#if !defined(__CDNSP_DEV_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __CDNSP_DEV_TRACE_H\n\n#include <linux/tracepoint.h>\n#include \"cdnsp-gadget.h\"\n#include \"cdnsp-debug.h\"\n\n \n#define CDNSP_MSG_MAX 500\n\nDECLARE_EVENT_CLASS(cdnsp_log_ep,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id),\n\tTP_STRUCT__entry(\n\t\t__string(name, pep->name)\n\t\t__field(unsigned int, state)\n\t\t__field(u32, stream_id)\n\t\t__field(u8, enabled)\n\t\t__field(unsigned int, num_streams)\n\t\t__field(int, td_count)\n\t\t__field(u8, first_prime_det)\n\t\t__field(u8, drbls_count)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, pep->name);\n\t\t__entry->state = pep->ep_state;\n\t\t__entry->stream_id = stream_id;\n\t\t__entry->enabled = pep->ep_state & EP_HAS_STREAMS;\n\t\t__entry->num_streams = pep->stream_info.num_streams;\n\t\t__entry->td_count = pep->stream_info.td_count;\n\t\t__entry->first_prime_det = pep->stream_info.first_prime_det;\n\t\t__entry->drbls_count = pep->stream_info.drbls_count;\n\t),\n\tTP_printk(\"%s: SID: %08x, ep state: %x, stream: enabled: %d num %d \"\n\t\t  \"tds %d, first prime: %d drbls %d\",\n\t\t  __get_str(name), __entry->stream_id, __entry->state,\n\t\t  __entry->enabled, __entry->num_streams, __entry->td_count,\n\t\t  __entry->first_prime_det, __entry->drbls_count)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_tr_drbl,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_wait_for_prime,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_ep_list_empty_with_skip,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_ep_enable_end,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_ep_disable_end,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDEFINE_EVENT(cdnsp_log_ep, cdnsp_ep_busy_try_halt_again,\n\tTP_PROTO(struct cdnsp_ep *pep, u32 stream_id),\n\tTP_ARGS(pep, stream_id)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_enable_disable,\n\tTP_PROTO(int set),\n\tTP_ARGS(set),\n\tTP_STRUCT__entry(\n\t\t__field(int, set)\n\t),\n\tTP_fast_assign(\n\t\t__entry->set = set;\n\t),\n\tTP_printk(\"%s\", __entry->set ? \"enabled\" : \"disabled\")\n);\n\nDEFINE_EVENT(cdnsp_log_enable_disable, cdnsp_pullup,\n\tTP_PROTO(int set),\n\tTP_ARGS(set)\n);\n\nDEFINE_EVENT(cdnsp_log_enable_disable, cdnsp_u1,\n\tTP_PROTO(int set),\n\tTP_ARGS(set)\n);\n\nDEFINE_EVENT(cdnsp_log_enable_disable, cdnsp_u2,\n\tTP_PROTO(int set),\n\tTP_ARGS(set)\n);\n\nDEFINE_EVENT(cdnsp_log_enable_disable, cdnsp_lpm,\n\tTP_PROTO(int set),\n\tTP_ARGS(set)\n);\n\nDEFINE_EVENT(cdnsp_log_enable_disable, cdnsp_may_wakeup,\n\tTP_PROTO(int set),\n\tTP_ARGS(set)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_simple,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg),\n\tTP_STRUCT__entry(\n\t\t__string(text, msg)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(text, msg);\n\t),\n\tTP_printk(\"%s\", __get_str(text))\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_exit,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_init,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_slot_id,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_no_room_on_ring,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_ep0_status_stage,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_ep0_request,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_ep0_set_config,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_ep0_halted,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nDEFINE_EVENT(cdnsp_log_simple, cdnsp_ep_halt,\n\tTP_PROTO(char *msg),\n\tTP_ARGS(msg)\n);\n\nTRACE_EVENT(cdnsp_looking_trb_in_td,\n\tTP_PROTO(dma_addr_t suspect, dma_addr_t trb_start, dma_addr_t trb_end,\n\t\t dma_addr_t curr_seg, dma_addr_t end_seg),\n\tTP_ARGS(suspect, trb_start, trb_end, curr_seg, end_seg),\n\tTP_STRUCT__entry(\n\t\t__field(dma_addr_t, suspect)\n\t\t__field(dma_addr_t, trb_start)\n\t\t__field(dma_addr_t, trb_end)\n\t\t__field(dma_addr_t, curr_seg)\n\t\t__field(dma_addr_t, end_seg)\n\t),\n\tTP_fast_assign(\n\t\t__entry->suspect = suspect;\n\t\t__entry->trb_start = trb_start;\n\t\t__entry->trb_end = trb_end;\n\t\t__entry->curr_seg = curr_seg;\n\t\t__entry->end_seg = end_seg;\n\t),\n\tTP_printk(\"DMA: suspect event: %pad, trb-start: %pad, trb-end %pad, \"\n\t\t  \"seg-start %pad, seg-end %pad\",\n\t\t  &__entry->suspect, &__entry->trb_start, &__entry->trb_end,\n\t\t  &__entry->curr_seg, &__entry->end_seg)\n);\n\nTRACE_EVENT(cdnsp_port_info,\n\tTP_PROTO(__le32 __iomem *addr, u32 offset, u32 count, u32 rev),\n\tTP_ARGS(addr, offset, count, rev),\n\tTP_STRUCT__entry(\n\t\t__field(__le32 __iomem *, addr)\n\t\t__field(u32, offset)\n\t\t__field(u32, count)\n\t\t__field(u32, rev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->addr = addr;\n\t\t__entry->offset = offset;\n\t\t__entry->count = count;\n\t\t__entry->rev = rev;\n\t),\n\tTP_printk(\"Ext Cap %p, port offset = %u, count = %u, rev = 0x%x\",\n\t\t  __entry->addr, __entry->offset, __entry->count, __entry->rev)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_deq_state,\n\tTP_PROTO(struct cdnsp_dequeue_state *state),\n\tTP_ARGS(state),\n\tTP_STRUCT__entry(\n\t\t__field(int, new_cycle_state)\n\t\t__field(struct cdnsp_segment *, new_deq_seg)\n\t\t__field(dma_addr_t, deq_seg_dma)\n\t\t__field(union cdnsp_trb\t*, new_deq_ptr)\n\t\t__field(dma_addr_t, deq_ptr_dma)\n\t),\n\tTP_fast_assign(\n\t\t__entry->new_cycle_state = state->new_cycle_state;\n\t\t__entry->new_deq_seg = state->new_deq_seg;\n\t\t__entry->deq_seg_dma = state->new_deq_seg->dma;\n\t\t__entry->new_deq_ptr = state->new_deq_ptr,\n\t\t__entry->deq_ptr_dma = cdnsp_trb_virt_to_dma(state->new_deq_seg,\n\t\t\t\t\t\t\t     state->new_deq_ptr);\n\t),\n\tTP_printk(\"New cycle state = 0x%x, New dequeue segment = %p (0x%pad dma), \"\n\t\t  \"New dequeue pointer = %p (0x%pad dma)\",\n\t\t  __entry->new_cycle_state, __entry->new_deq_seg,\n\t\t  &__entry->deq_seg_dma, __entry->new_deq_ptr,\n\t\t  &__entry->deq_ptr_dma\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_deq_state, cdnsp_new_deq_state,\n\tTP_PROTO(struct cdnsp_dequeue_state *state),\n\tTP_ARGS(state)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_ctrl,\n\tTP_PROTO(struct usb_ctrlrequest *ctrl),\n\tTP_ARGS(ctrl),\n\tTP_STRUCT__entry(\n\t\t__field(u8, bRequestType)\n\t\t__field(u8, bRequest)\n\t\t__field(u16, wValue)\n\t\t__field(u16, wIndex)\n\t\t__field(u16, wLength)\n\t),\n\tTP_fast_assign(\n\t\t__entry->bRequestType = ctrl->bRequestType;\n\t\t__entry->bRequest = ctrl->bRequest;\n\t\t__entry->wValue = le16_to_cpu(ctrl->wValue);\n\t\t__entry->wIndex = le16_to_cpu(ctrl->wIndex);\n\t\t__entry->wLength = le16_to_cpu(ctrl->wLength);\n\t),\n\tTP_printk(\"%s\", usb_decode_ctrl(__get_buf(CDNSP_MSG_MAX), CDNSP_MSG_MAX,\n\t\t\t\t\t__entry->bRequestType,\n\t\t\t\t\t__entry->bRequest, __entry->wValue,\n\t\t\t\t\t__entry->wIndex, __entry->wLength)\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_ctrl, cdnsp_ctrl_req,\n\tTP_PROTO(struct usb_ctrlrequest *ctrl),\n\tTP_ARGS(ctrl)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_bounce,\n\tTP_PROTO(struct cdnsp_request *preq, u32 new_buf_len, u32 offset,\n\t\t dma_addr_t dma, unsigned int unalign),\n\tTP_ARGS(preq, new_buf_len, offset, dma, unalign),\n\tTP_STRUCT__entry(\n\t\t__string(name, preq->pep->name)\n\t\t__field(u32, new_buf_len)\n\t\t__field(u32, offset)\n\t\t__field(dma_addr_t, dma)\n\t\t__field(unsigned int, unalign)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, preq->pep->name);\n\t\t__entry->new_buf_len = new_buf_len;\n\t\t__entry->offset = offset;\n\t\t__entry->dma = dma;\n\t\t__entry->unalign = unalign;\n\t),\n\tTP_printk(\"%s buf len %d, offset %d, dma %pad, unalign %d\",\n\t\t  __get_str(name), __entry->new_buf_len,\n\t\t  __entry->offset, &__entry->dma, __entry->unalign\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_bounce, cdnsp_bounce_align_td_split,\n\tTP_PROTO(struct cdnsp_request *preq, u32 new_buf_len, u32 offset,\n\t\t dma_addr_t dma, unsigned int unalign),\n\tTP_ARGS(preq, new_buf_len, offset, dma, unalign)\n);\n\nDEFINE_EVENT(cdnsp_log_bounce, cdnsp_bounce_map,\n\tTP_PROTO(struct cdnsp_request *preq, u32 new_buf_len, u32 offset,\n\t\t dma_addr_t dma, unsigned int unalign),\n\tTP_ARGS(preq, new_buf_len, offset, dma, unalign)\n);\n\nDEFINE_EVENT(cdnsp_log_bounce, cdnsp_bounce_unmap,\n\tTP_PROTO(struct cdnsp_request *preq, u32 new_buf_len, u32 offset,\n\t\t dma_addr_t dma, unsigned int unalign),\n\tTP_ARGS(preq, new_buf_len, offset, dma, unalign)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_trb,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb),\n\tTP_STRUCT__entry(\n\t\t__field(u32, type)\n\t\t__field(u32, field0)\n\t\t__field(u32, field1)\n\t\t__field(u32, field2)\n\t\t__field(u32, field3)\n\t\t__field(union cdnsp_trb *, trb)\n\t\t__field(dma_addr_t, trb_dma)\n\t),\n\tTP_fast_assign(\n\t\t__entry->type = ring->type;\n\t\t__entry->field0 = le32_to_cpu(trb->field[0]);\n\t\t__entry->field1 = le32_to_cpu(trb->field[1]);\n\t\t__entry->field2 = le32_to_cpu(trb->field[2]);\n\t\t__entry->field3 = le32_to_cpu(trb->field[3]);\n\t\t__entry->trb = (union cdnsp_trb *)trb;\n\t\t__entry->trb_dma = cdnsp_trb_virt_to_dma(ring->deq_seg,\n\t\t\t\t\t\t\t (union cdnsp_trb *)trb);\n\n\t),\n\tTP_printk(\"%s: %s trb: %p(%pad)\", cdnsp_ring_type_string(__entry->type),\n\t\t  cdnsp_decode_trb(__get_buf(CDNSP_MSG_MAX), CDNSP_MSG_MAX,\n\t\t\t\t   __entry->field0, __entry->field1,\n\t\t\t\t   __entry->field2, __entry->field3),\n\t\t\t\t   __entry->trb, &__entry->trb_dma\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_handle_event,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_trb_without_td,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_handle_command,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_handle_transfer,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_queue_trb,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_cmd_wait_for_compl,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_cmd_timeout,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDEFINE_EVENT(cdnsp_log_trb, cdnsp_defered_event,\n\tTP_PROTO(struct cdnsp_ring *ring, struct cdnsp_generic_trb *trb),\n\tTP_ARGS(ring, trb)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_pdev,\n\tTP_PROTO(struct cdnsp_device *pdev),\n\tTP_ARGS(pdev),\n\tTP_STRUCT__entry(\n\t\t__field(struct cdnsp_device *, pdev)\n\t\t__field(struct usb_gadget *, gadget)\n\t\t__field(dma_addr_t, out_ctx)\n\t\t__field(dma_addr_t, in_ctx)\n\t\t__field(u8, port_num)\n\t),\n\tTP_fast_assign(\n\t\t__entry->pdev = pdev;\n\t\t__entry->gadget = &pdev->gadget;\n\t\t__entry->in_ctx = pdev->in_ctx.dma;\n\t\t__entry->out_ctx = pdev->out_ctx.dma;\n\t\t__entry->port_num = pdev->active_port ?\n\t\t\t\tpdev->active_port->port_num : 0xFF;\n\t),\n\tTP_printk(\"pdev %p gadget %p ctx %pad | %pad, port %d \",\n\t\t  __entry->pdev, __entry->gadget, &__entry->in_ctx,\n\t\t  &__entry->out_ctx, __entry->port_num\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_pdev, cdnsp_alloc_priv_device,\n\tTP_PROTO(struct cdnsp_device *vdev),\n\tTP_ARGS(vdev)\n);\n\nDEFINE_EVENT(cdnsp_log_pdev, cdnsp_free_priv_device,\n\tTP_PROTO(struct cdnsp_device *vdev),\n\tTP_ARGS(vdev)\n);\n\nDEFINE_EVENT(cdnsp_log_pdev, cdnsp_setup_device,\n\tTP_PROTO(struct cdnsp_device *vdev),\n\tTP_ARGS(vdev)\n);\n\nDEFINE_EVENT(cdnsp_log_pdev, cdnsp_setup_addressable_priv_device,\n\tTP_PROTO(struct cdnsp_device *vdev),\n\tTP_ARGS(vdev)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_request,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req),\n\tTP_STRUCT__entry(\n\t\t__string(name, req->pep->name)\n\t\t__field(struct usb_request *, request)\n\t\t__field(struct cdnsp_request *, preq)\n\t\t__field(void *, buf)\n\t\t__field(unsigned int, actual)\n\t\t__field(unsigned int, length)\n\t\t__field(int, status)\n\t\t__field(dma_addr_t, dma)\n\t\t__field(unsigned int, stream_id)\n\t\t__field(unsigned int, zero)\n\t\t__field(unsigned int, short_not_ok)\n\t\t__field(unsigned int, no_interrupt)\n\t\t__field(struct scatterlist*, sg)\n\t\t__field(unsigned int, num_sgs)\n\t\t__field(unsigned int, num_mapped_sgs)\n\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, req->pep->name);\n\t\t__entry->request = &req->request;\n\t\t__entry->preq = req;\n\t\t__entry->buf = req->request.buf;\n\t\t__entry->actual = req->request.actual;\n\t\t__entry->length = req->request.length;\n\t\t__entry->status = req->request.status;\n\t\t__entry->dma = req->request.dma;\n\t\t__entry->stream_id = req->request.stream_id;\n\t\t__entry->zero = req->request.zero;\n\t\t__entry->short_not_ok = req->request.short_not_ok;\n\t\t__entry->no_interrupt = req->request.no_interrupt;\n\t\t__entry->sg = req->request.sg;\n\t\t__entry->num_sgs = req->request.num_sgs;\n\t\t__entry->num_mapped_sgs = req->request.num_mapped_sgs;\n\t),\n\tTP_printk(\"%s; req U:%p/P:%p, req buf %p, length %u/%u, status %d, \"\n\t\t  \"buf dma (%pad), SID %u, %s%s%s, sg %p, num_sg %d,\"\n\t\t  \" num_m_sg %d\",\n\t\t  __get_str(name), __entry->request, __entry->preq,\n\t\t  __entry->buf, __entry->actual, __entry->length,\n\t\t  __entry->status, &__entry->dma,\n\t\t  __entry->stream_id, __entry->zero ? \"Z\" : \"z\",\n\t\t  __entry->short_not_ok ? \"S\" : \"s\",\n\t\t  __entry->no_interrupt ? \"I\" : \"i\",\n\t\t  __entry->sg, __entry->num_sgs, __entry->num_mapped_sgs\n\t\t)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_request_enqueue,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_request_enqueue_busy,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_request_enqueue_error,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_request_dequeue,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_request_giveback,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_alloc_request,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(cdnsp_log_request, cdnsp_free_request,\n\tTP_PROTO(struct cdnsp_request *req),\n\tTP_ARGS(req)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_ep_ctx,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx),\n\tTP_STRUCT__entry(\n\t\t__field(u32, info)\n\t\t__field(u32, info2)\n\t\t__field(u64, deq)\n\t\t__field(u32, tx_info)\n\t),\n\tTP_fast_assign(\n\t\t__entry->info = le32_to_cpu(ctx->ep_info);\n\t\t__entry->info2 = le32_to_cpu(ctx->ep_info2);\n\t\t__entry->deq = le64_to_cpu(ctx->deq);\n\t\t__entry->tx_info = le32_to_cpu(ctx->tx_info);\n\t),\n\tTP_printk(\"%s\", cdnsp_decode_ep_context(__get_buf(CDNSP_MSG_MAX), CDNSP_MSG_MAX,\n\t\t\t\t\t\t__entry->info, __entry->info2,\n\t\t\t\t\t\t__entry->deq, __entry->tx_info)\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_ep_disabled,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_ep_stopped_or_disabled,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_remove_request,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_handle_cmd_stop_ep,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_handle_cmd_flush_ep,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_handle_cmd_set_deq_ep,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_handle_cmd_reset_ep,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_ep_ctx, cdnsp_handle_cmd_config_ep,\n\tTP_PROTO(struct cdnsp_ep_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_slot_ctx,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx),\n\tTP_STRUCT__entry(\n\t\t__field(u32, info)\n\t\t__field(u32, info2)\n\t\t__field(u32, int_target)\n\t\t__field(u32, state)\n\t),\n\tTP_fast_assign(\n\t\t__entry->info = le32_to_cpu(ctx->dev_info);\n\t\t__entry->info2 = le32_to_cpu(ctx->dev_port);\n\t\t__entry->int_target = le32_to_cpu(ctx->int_target);\n\t\t__entry->state = le32_to_cpu(ctx->dev_state);\n\t),\n\tTP_printk(\"%s\", cdnsp_decode_slot_context(__entry->info,\n\t\t\t\t\t\t  __entry->info2,\n\t\t\t\t\t\t  __entry->int_target,\n\t\t\t\t\t\t  __entry->state)\n\t)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_slot_already_in_default,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_handle_cmd_enable_slot,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_handle_cmd_disable_slot,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_reset_device,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_setup_device_slot,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_handle_cmd_addr_dev,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_handle_cmd_reset_dev,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_handle_cmd_set_deq,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDEFINE_EVENT(cdnsp_log_slot_ctx, cdnsp_configure_endpoint,\n\tTP_PROTO(struct cdnsp_slot_ctx *ctx),\n\tTP_ARGS(ctx)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_td_info,\n\tTP_PROTO(struct cdnsp_request *preq),\n\tTP_ARGS(preq),\n\tTP_STRUCT__entry(\n\t\t__string(name, preq->pep->name)\n\t\t__field(struct usb_request *, request)\n\t\t__field(struct cdnsp_request *, preq)\n\t\t__field(union cdnsp_trb *, first_trb)\n\t\t__field(union cdnsp_trb *, last_trb)\n\t\t__field(dma_addr_t, trb_dma)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, preq->pep->name);\n\t\t__entry->request = &preq->request;\n\t\t__entry->preq = preq;\n\t\t__entry->first_trb = preq->td.first_trb;\n\t\t__entry->last_trb = preq->td.last_trb;\n\t\t__entry->trb_dma = cdnsp_trb_virt_to_dma(preq->td.start_seg,\n\t\t\t\t\t\t\t preq->td.first_trb)\n\t),\n\tTP_printk(\"%s req/preq:  %p/%p, first trb %p[vir]/%pad(dma), last trb %p\",\n\t\t  __get_str(name), __entry->request, __entry->preq,\n\t\t  __entry->first_trb, &__entry->trb_dma,\n\t\t  __entry->last_trb\n\t\t)\n);\n\nDEFINE_EVENT(cdnsp_log_td_info, cdnsp_remove_request_td,\n\tTP_PROTO(struct cdnsp_request *preq),\n\tTP_ARGS(preq)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_ring,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring),\n\tTP_STRUCT__entry(\n\t\t__field(u32, type)\n\t\t__field(void *, ring)\n\t\t__field(dma_addr_t, enq)\n\t\t__field(dma_addr_t, deq)\n\t\t__field(dma_addr_t, enq_seg)\n\t\t__field(dma_addr_t, deq_seg)\n\t\t__field(unsigned int, num_segs)\n\t\t__field(unsigned int, stream_id)\n\t\t__field(unsigned int, cycle_state)\n\t\t__field(unsigned int, num_trbs_free)\n\t\t__field(unsigned int, bounce_buf_len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ring = ring;\n\t\t__entry->type = ring->type;\n\t\t__entry->num_segs = ring->num_segs;\n\t\t__entry->stream_id = ring->stream_id;\n\t\t__entry->enq_seg = ring->enq_seg->dma;\n\t\t__entry->deq_seg = ring->deq_seg->dma;\n\t\t__entry->cycle_state = ring->cycle_state;\n\t\t__entry->num_trbs_free = ring->num_trbs_free;\n\t\t__entry->bounce_buf_len = ring->bounce_buf_len;\n\t\t__entry->enq = cdnsp_trb_virt_to_dma(ring->enq_seg,\n\t\t\t\t\t\t     ring->enqueue);\n\t\t__entry->deq = cdnsp_trb_virt_to_dma(ring->deq_seg,\n\t\t\t\t\t\t     ring->dequeue);\n\t),\n\tTP_printk(\"%s %p: enq %pad(%pad) deq %pad(%pad) segs %d stream %d\"\n\t\t  \" free_trbs %d bounce %d cycle %d\",\n\t\t  cdnsp_ring_type_string(__entry->type), __entry->ring,\n\t\t  &__entry->enq, &__entry->enq_seg,\n\t\t  &__entry->deq, &__entry->deq_seg,\n\t\t  __entry->num_segs,\n\t\t  __entry->stream_id,\n\t\t  __entry->num_trbs_free,\n\t\t  __entry->bounce_buf_len,\n\t\t  __entry->cycle_state\n\t\t)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_ring_alloc,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_ring_free,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_set_stream_ring,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_ring_expansion,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_inc_enq,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDEFINE_EVENT(cdnsp_log_ring, cdnsp_inc_deq,\n\tTP_PROTO(struct cdnsp_ring *ring),\n\tTP_ARGS(ring)\n);\n\nDECLARE_EVENT_CLASS(cdnsp_log_portsc,\n\t\tTP_PROTO(u32 portnum, u32 portsc),\n\t\tTP_ARGS(portnum, portsc),\n\t\tTP_STRUCT__entry(\n\t\t\t\t__field(u32, portnum)\n\t\t\t\t__field(u32, portsc)\n\t\t\t\t),\n\t\tTP_fast_assign(\n\t\t\t\t__entry->portnum = portnum;\n\t\t\t\t__entry->portsc = portsc;\n\t\t\t\t),\n\t\tTP_printk(\"port-%d: %s\",\n\t\t\t  __entry->portnum,\n\t\t\t  cdnsp_decode_portsc(__get_buf(CDNSP_MSG_MAX), CDNSP_MSG_MAX,\n\t\t\t\t\t      __entry->portsc)\n\t\t\t)\n);\n\nDEFINE_EVENT(cdnsp_log_portsc, cdnsp_handle_port_status,\n\t\tTP_PROTO(u32 portnum, u32 portsc),\n\t\tTP_ARGS(portnum, portsc)\n);\n\nDEFINE_EVENT(cdnsp_log_portsc, cdnsp_link_state_changed,\n\t\tTP_PROTO(u32 portnum, u32 portsc),\n\t\tTP_ARGS(portnum, portsc)\n);\n\nTRACE_EVENT(cdnsp_stream_number,\n\tTP_PROTO(struct cdnsp_ep *pep, int num_stream_ctxs, int num_streams),\n\tTP_ARGS(pep, num_stream_ctxs, num_streams),\n\tTP_STRUCT__entry(\n\t\t__string(name, pep->name)\n\t\t__field(int, num_stream_ctxs)\n\t\t__field(int, num_streams)\n\t),\n\tTP_fast_assign(\n\t\t__entry->num_stream_ctxs = num_stream_ctxs;\n\t\t__entry->num_streams = num_streams;\n\t),\n\tTP_printk(\"%s Need %u stream ctx entries for %u stream IDs.\",\n\t\t  __get_str(name), __entry->num_stream_ctxs,\n\t\t  __entry->num_streams)\n);\n\n#endif  \n\n \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE cdnsp-trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}