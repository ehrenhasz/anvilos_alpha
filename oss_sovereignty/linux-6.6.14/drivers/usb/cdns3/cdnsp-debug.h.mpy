{
  "module_name": "cdnsp-debug.h",
  "hash_id": "ad6e3baa3afdba4ef1e8545f8305f6dea7614eb6863abcee0d5f89291dd5d3af",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/cdns3/cdnsp-debug.h",
  "human_readable_source": " \n \n#ifndef __LINUX_CDNSP_DEBUG\n#define __LINUX_CDNSP_DEBUG\n\nstatic inline const char *cdnsp_trb_comp_code_string(u8 status)\n{\n\tswitch (status) {\n\tcase COMP_INVALID:\n\t\treturn \"Invalid\";\n\tcase COMP_SUCCESS:\n\t\treturn \"Success\";\n\tcase COMP_DATA_BUFFER_ERROR:\n\t\treturn \"Data Buffer Error\";\n\tcase COMP_BABBLE_DETECTED_ERROR:\n\t\treturn \"Babble Detected\";\n\tcase COMP_TRB_ERROR:\n\t\treturn \"TRB Error\";\n\tcase COMP_RESOURCE_ERROR:\n\t\treturn \"Resource Error\";\n\tcase COMP_NO_SLOTS_AVAILABLE_ERROR:\n\t\treturn \"No Slots Available Error\";\n\tcase COMP_INVALID_STREAM_TYPE_ERROR:\n\t\treturn \"Invalid Stream Type Error\";\n\tcase COMP_SLOT_NOT_ENABLED_ERROR:\n\t\treturn \"Slot Not Enabled Error\";\n\tcase COMP_ENDPOINT_NOT_ENABLED_ERROR:\n\t\treturn \"Endpoint Not Enabled Error\";\n\tcase COMP_SHORT_PACKET:\n\t\treturn \"Short Packet\";\n\tcase COMP_RING_UNDERRUN:\n\t\treturn \"Ring Underrun\";\n\tcase COMP_RING_OVERRUN:\n\t\treturn \"Ring Overrun\";\n\tcase COMP_VF_EVENT_RING_FULL_ERROR:\n\t\treturn \"VF Event Ring Full Error\";\n\tcase COMP_PARAMETER_ERROR:\n\t\treturn \"Parameter Error\";\n\tcase COMP_CONTEXT_STATE_ERROR:\n\t\treturn \"Context State Error\";\n\tcase COMP_EVENT_RING_FULL_ERROR:\n\t\treturn \"Event Ring Full Error\";\n\tcase COMP_INCOMPATIBLE_DEVICE_ERROR:\n\t\treturn \"Incompatible Device Error\";\n\tcase COMP_MISSED_SERVICE_ERROR:\n\t\treturn \"Missed Service Error\";\n\tcase COMP_COMMAND_RING_STOPPED:\n\t\treturn \"Command Ring Stopped\";\n\tcase COMP_COMMAND_ABORTED:\n\t\treturn \"Command Aborted\";\n\tcase COMP_STOPPED:\n\t\treturn \"Stopped\";\n\tcase COMP_STOPPED_LENGTH_INVALID:\n\t\treturn \"Stopped - Length Invalid\";\n\tcase COMP_STOPPED_SHORT_PACKET:\n\t\treturn \"Stopped - Short Packet\";\n\tcase COMP_MAX_EXIT_LATENCY_TOO_LARGE_ERROR:\n\t\treturn \"Max Exit Latency Too Large Error\";\n\tcase COMP_ISOCH_BUFFER_OVERRUN:\n\t\treturn \"Isoch Buffer Overrun\";\n\tcase COMP_EVENT_LOST_ERROR:\n\t\treturn \"Event Lost Error\";\n\tcase COMP_UNDEFINED_ERROR:\n\t\treturn \"Undefined Error\";\n\tcase COMP_INVALID_STREAM_ID_ERROR:\n\t\treturn \"Invalid Stream ID Error\";\n\tdefault:\n\t\treturn \"Unknown!!\";\n\t}\n}\n\nstatic inline const char *cdnsp_trb_type_string(u8 type)\n{\n\tswitch (type) {\n\tcase TRB_NORMAL:\n\t\treturn \"Normal\";\n\tcase TRB_SETUP:\n\t\treturn \"Setup Stage\";\n\tcase TRB_DATA:\n\t\treturn \"Data Stage\";\n\tcase TRB_STATUS:\n\t\treturn \"Status Stage\";\n\tcase TRB_ISOC:\n\t\treturn \"Isoch\";\n\tcase TRB_LINK:\n\t\treturn \"Link\";\n\tcase TRB_EVENT_DATA:\n\t\treturn \"Event Data\";\n\tcase TRB_TR_NOOP:\n\t\treturn \"No-Op\";\n\tcase TRB_ENABLE_SLOT:\n\t\treturn \"Enable Slot Command\";\n\tcase TRB_DISABLE_SLOT:\n\t\treturn \"Disable Slot Command\";\n\tcase TRB_ADDR_DEV:\n\t\treturn \"Address Device Command\";\n\tcase TRB_CONFIG_EP:\n\t\treturn \"Configure Endpoint Command\";\n\tcase TRB_EVAL_CONTEXT:\n\t\treturn \"Evaluate Context Command\";\n\tcase TRB_RESET_EP:\n\t\treturn \"Reset Endpoint Command\";\n\tcase TRB_STOP_RING:\n\t\treturn \"Stop Ring Command\";\n\tcase TRB_SET_DEQ:\n\t\treturn \"Set TR Dequeue Pointer Command\";\n\tcase TRB_RESET_DEV:\n\t\treturn \"Reset Device Command\";\n\tcase TRB_FORCE_HEADER:\n\t\treturn \"Force Header Command\";\n\tcase TRB_CMD_NOOP:\n\t\treturn \"No-Op Command\";\n\tcase TRB_TRANSFER:\n\t\treturn \"Transfer Event\";\n\tcase TRB_COMPLETION:\n\t\treturn \"Command Completion Event\";\n\tcase TRB_PORT_STATUS:\n\t\treturn \"Port Status Change Event\";\n\tcase TRB_HC_EVENT:\n\t\treturn \"Device Controller Event\";\n\tcase TRB_MFINDEX_WRAP:\n\t\treturn \"MFINDEX Wrap Event\";\n\tcase TRB_ENDPOINT_NRDY:\n\t\treturn \"Endpoint Not ready\";\n\tcase TRB_HALT_ENDPOINT:\n\t\treturn \"Halt Endpoint\";\n\tcase TRB_FLUSH_ENDPOINT:\n\t\treturn \"FLush Endpoint\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic inline const char *cdnsp_ring_type_string(enum cdnsp_ring_type type)\n{\n\tswitch (type) {\n\tcase TYPE_CTRL:\n\t\treturn \"CTRL\";\n\tcase TYPE_ISOC:\n\t\treturn \"ISOC\";\n\tcase TYPE_BULK:\n\t\treturn \"BULK\";\n\tcase TYPE_INTR:\n\t\treturn \"INTR\";\n\tcase TYPE_STREAM:\n\t\treturn \"STREAM\";\n\tcase TYPE_COMMAND:\n\t\treturn \"CMD\";\n\tcase TYPE_EVENT:\n\t\treturn \"EVENT\";\n\t}\n\n\treturn \"UNKNOWN\";\n}\n\nstatic inline char *cdnsp_slot_state_string(u32 state)\n{\n\tswitch (state) {\n\tcase SLOT_STATE_ENABLED:\n\t\treturn \"enabled/disabled\";\n\tcase SLOT_STATE_DEFAULT:\n\t\treturn \"default\";\n\tcase SLOT_STATE_ADDRESSED:\n\t\treturn \"addressed\";\n\tcase SLOT_STATE_CONFIGURED:\n\t\treturn \"configured\";\n\tdefault:\n\t\treturn \"reserved\";\n\t}\n}\n\nstatic inline const char *cdnsp_decode_trb(char *str, size_t size, u32 field0,\n\t\t\t\t\t   u32 field1, u32 field2, u32 field3)\n{\n\tint ep_id = TRB_TO_EP_INDEX(field3) - 1;\n\tint type = TRB_FIELD_TO_TYPE(field3);\n\tunsigned int ep_num;\n\tint ret;\n\tu32 temp;\n\n\tep_num = DIV_ROUND_UP(ep_id, 2);\n\n\tswitch (type) {\n\tcase TRB_LINK:\n\t\tret = snprintf(str, size,\n\t\t\t       \"LINK %08x%08x intr %ld type '%s' flags %c:%c:%c:%c\",\n\t\t\t       field1, field0, GET_INTR_TARGET(field2),\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field3 & TRB_IOC ? 'I' : 'i',\n\t\t\t       field3 & TRB_CHAIN ? 'C' : 'c',\n\t\t\t       field3 & TRB_TC ? 'T' : 't',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_TRANSFER:\n\tcase TRB_COMPLETION:\n\tcase TRB_PORT_STATUS:\n\tcase TRB_HC_EVENT:\n\t\tret = snprintf(str, size,\n\t\t\t       \"ep%d%s(%d) type '%s' TRB %08x%08x status '%s'\"\n\t\t\t       \" len %ld slot %ld flags %c:%c\",\n\t\t\t       ep_num, ep_id % 2 ? \"out\" : \"in\",\n\t\t\t       TRB_TO_EP_INDEX(field3),\n\t\t\t       cdnsp_trb_type_string(type), field1, field0,\n\t\t\t       cdnsp_trb_comp_code_string(GET_COMP_CODE(field2)),\n\t\t\t       EVENT_TRB_LEN(field2), TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & EVENT_DATA ? 'E' : 'e',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_MFINDEX_WRAP:\n\t\tret = snprintf(str, size, \"%s: flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_SETUP:\n\t\tret = snprintf(str, size,\n\t\t\t       \"type '%s' bRequestType %02x bRequest %02x \"\n\t\t\t       \"wValue %02x%02x wIndex %02x%02x wLength %d \"\n\t\t\t       \"length %ld TD size %ld intr %ld Setup ID %ld \"\n\t\t\t       \"flags %c:%c:%c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field0 & 0xff,\n\t\t\t       (field0 & 0xff00) >> 8,\n\t\t\t       (field0 & 0xff000000) >> 24,\n\t\t\t       (field0 & 0xff0000) >> 16,\n\t\t\t       (field1 & 0xff00) >> 8,\n\t\t\t       field1 & 0xff,\n\t\t\t       (field1 & 0xff000000) >> 16 |\n\t\t\t       (field1 & 0xff0000) >> 16,\n\t\t\t       TRB_LEN(field2), GET_TD_SIZE(field2),\n\t\t\t       GET_INTR_TARGET(field2),\n\t\t\t       TRB_SETUPID_TO_TYPE(field3),\n\t\t\t       field3 & TRB_IDT ? 'D' : 'd',\n\t\t\t       field3 & TRB_IOC ? 'I' : 'i',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_DATA:\n\t\tret = snprintf(str, size,\n\t\t\t       \"type '%s' Buffer %08x%08x length %ld TD size %ld \"\n\t\t\t       \"intr %ld flags %c:%c:%c:%c:%c:%c:%c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field1, field0, TRB_LEN(field2),\n\t\t\t       GET_TD_SIZE(field2),\n\t\t\t       GET_INTR_TARGET(field2),\n\t\t\t       field3 & TRB_IDT ? 'D' : 'i',\n\t\t\t       field3 & TRB_IOC ? 'I' : 'i',\n\t\t\t       field3 & TRB_CHAIN ? 'C' : 'c',\n\t\t\t       field3 & TRB_NO_SNOOP ? 'S' : 's',\n\t\t\t       field3 & TRB_ISP ? 'I' : 'i',\n\t\t\t       field3 & TRB_ENT ? 'E' : 'e',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_STATUS:\n\t\tret = snprintf(str, size,\n\t\t\t       \"Buffer %08x%08x length %ld TD size %ld intr\"\n\t\t\t       \"%ld type '%s' flags %c:%c:%c:%c\",\n\t\t\t       field1, field0, TRB_LEN(field2),\n\t\t\t       GET_TD_SIZE(field2),\n\t\t\t       GET_INTR_TARGET(field2),\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field3 & TRB_IOC ? 'I' : 'i',\n\t\t\t       field3 & TRB_CHAIN ? 'C' : 'c',\n\t\t\t       field3 & TRB_ENT ? 'E' : 'e',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_NORMAL:\n\tcase TRB_ISOC:\n\tcase TRB_EVENT_DATA:\n\tcase TRB_TR_NOOP:\n\t\tret = snprintf(str, size,\n\t\t\t       \"type '%s' Buffer %08x%08x length %ld \"\n\t\t\t       \"TD size %ld intr %ld \"\n\t\t\t       \"flags %c:%c:%c:%c:%c:%c:%c:%c:%c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field1, field0, TRB_LEN(field2),\n\t\t\t       GET_TD_SIZE(field2),\n\t\t\t       GET_INTR_TARGET(field2),\n\t\t\t       field3 & TRB_BEI ? 'B' : 'b',\n\t\t\t       field3 & TRB_IDT ? 'T' : 't',\n\t\t\t       field3 & TRB_IOC ? 'I' : 'i',\n\t\t\t       field3 & TRB_CHAIN ? 'C' : 'c',\n\t\t\t       field3 & TRB_NO_SNOOP ? 'S' : 's',\n\t\t\t       field3 & TRB_ISP ? 'I' : 'i',\n\t\t\t       field3 & TRB_ENT ? 'E' : 'e',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c',\n\t\t\t       !(field3 & TRB_EVENT_INVALIDATE) ? 'V' : 'v');\n\t\tbreak;\n\tcase TRB_CMD_NOOP:\n\tcase TRB_ENABLE_SLOT:\n\t\tret = snprintf(str, size, \"%s: flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_DISABLE_SLOT:\n\t\tret = snprintf(str, size, \"%s: slot %ld flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_ADDR_DEV:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ctx %08x%08x slot %ld flags %c:%c\",\n\t\t\t       cdnsp_trb_type_string(type), field1, field0,\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_BSR ? 'B' : 'b',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_CONFIG_EP:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ctx %08x%08x slot %ld flags %c:%c\",\n\t\t\t       cdnsp_trb_type_string(type), field1, field0,\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_DC ? 'D' : 'd',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_EVAL_CONTEXT:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ctx %08x%08x slot %ld flags %c\",\n\t\t\t       cdnsp_trb_type_string(type), field1, field0,\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_RESET_EP:\n\tcase TRB_HALT_ENDPOINT:\n\tcase TRB_FLUSH_ENDPOINT:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ep%d%s(%d) ctx %08x%08x slot %ld flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       ep_num, ep_id % 2 ? \"out\" : \"in\",\n\t\t\t       TRB_TO_EP_INDEX(field3), field1, field0,\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_STOP_RING:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ep%d%s(%d) slot %ld sp %d flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       ep_num, ep_id % 2 ? \"out\" : \"in\",\n\t\t\t       TRB_TO_EP_INDEX(field3),\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       TRB_TO_SUSPEND_PORT(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_SET_DEQ:\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ep%d%s(%d) deq %08x%08x stream %ld slot %ld  flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       ep_num, ep_id % 2 ? \"out\" : \"in\",\n\t\t\t       TRB_TO_EP_INDEX(field3), field1, field0,\n\t\t\t       TRB_TO_STREAM_ID(field2),\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_RESET_DEV:\n\t\tret = snprintf(str, size, \"%s: slot %ld flags %c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       TRB_TO_SLOT_ID(field3),\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tcase TRB_ENDPOINT_NRDY:\n\t\ttemp = TRB_TO_HOST_STREAM(field2);\n\n\t\tret = snprintf(str, size,\n\t\t\t       \"%s: ep%d%s(%d) H_SID %x%s%s D_SID %lx flags %c:%c\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       ep_num, ep_id % 2 ? \"out\" : \"in\",\n\t\t\t       TRB_TO_EP_INDEX(field3), temp,\n\t\t\t       temp == STREAM_PRIME_ACK ? \"(PRIME)\" : \"\",\n\t\t\t       temp == STREAM_REJECTED ? \"(REJECTED)\" : \"\",\n\t\t\t       TRB_TO_DEV_STREAM(field0),\n\t\t\t       field3 & TRB_STAT ? 'S' : 's',\n\t\t\t       field3 & TRB_CYCLE ? 'C' : 'c');\n\t\tbreak;\n\tdefault:\n\t\tret = snprintf(str, size,\n\t\t\t       \"type '%s' -> raw %08x %08x %08x %08x\",\n\t\t\t       cdnsp_trb_type_string(type),\n\t\t\t       field0, field1, field2, field3);\n\t}\n\n\tif (ret >= size)\n\t\tpr_info(\"CDNSP: buffer overflowed.\\n\");\n\n\treturn str;\n}\n\nstatic inline const char *cdnsp_decode_slot_context(u32 info, u32 info2,\n\t\t\t\t\t\t    u32 int_target, u32 state)\n{\n\tstatic char str[1024];\n\tint ret = 0;\n\tu32 speed;\n\tchar *s;\n\n\tspeed = info & DEV_SPEED;\n\n\tswitch (speed) {\n\tcase SLOT_SPEED_FS:\n\t\ts = \"full-speed\";\n\t\tbreak;\n\tcase SLOT_SPEED_HS:\n\t\ts = \"high-speed\";\n\t\tbreak;\n\tcase SLOT_SPEED_SS:\n\t\ts = \"super-speed\";\n\t\tbreak;\n\tcase SLOT_SPEED_SSP:\n\t\ts = \"super-speed plus\";\n\t\tbreak;\n\tdefault:\n\t\ts = \"UNKNOWN speed\";\n\t}\n\n\tret = sprintf(str, \"%s Ctx Entries %d\",\n\t\t      s, (info & LAST_CTX_MASK) >> 27);\n\n\tret += sprintf(str + ret, \" [Intr %ld] Addr %ld State %s\",\n\t\t       GET_INTR_TARGET(int_target), state & DEV_ADDR_MASK,\n\t\t       cdnsp_slot_state_string(GET_SLOT_STATE(state)));\n\n\treturn str;\n}\n\nstatic inline const char *cdnsp_portsc_link_state_string(u32 portsc)\n{\n\tswitch (portsc & PORT_PLS_MASK) {\n\tcase XDEV_U0:\n\t\treturn \"U0\";\n\tcase XDEV_U1:\n\t\treturn \"U1\";\n\tcase XDEV_U2:\n\t\treturn \"U2\";\n\tcase XDEV_U3:\n\t\treturn \"U3\";\n\tcase XDEV_DISABLED:\n\t\treturn \"Disabled\";\n\tcase XDEV_RXDETECT:\n\t\treturn \"RxDetect\";\n\tcase XDEV_INACTIVE:\n\t\treturn \"Inactive\";\n\tcase XDEV_POLLING:\n\t\treturn \"Polling\";\n\tcase XDEV_RECOVERY:\n\t\treturn \"Recovery\";\n\tcase XDEV_HOT_RESET:\n\t\treturn \"Hot Reset\";\n\tcase XDEV_COMP_MODE:\n\t\treturn \"Compliance mode\";\n\tcase XDEV_TEST_MODE:\n\t\treturn \"Test mode\";\n\tcase XDEV_RESUME:\n\t\treturn \"Resume\";\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn \"Unknown\";\n}\n\nstatic inline const char *cdnsp_decode_portsc(char *str, size_t size,\n\t\t\t\t\t      u32 portsc)\n{\n\tint ret;\n\n\tret = snprintf(str, size, \"%s %s %s Link:%s PortSpeed:%d \",\n\t\t       portsc & PORT_POWER ? \"Powered\" : \"Powered-off\",\n\t\t       portsc & PORT_CONNECT ? \"Connected\" : \"Not-connected\",\n\t\t       portsc & PORT_PED ? \"Enabled\" : \"Disabled\",\n\t\t       cdnsp_portsc_link_state_string(portsc),\n\t\t       DEV_PORT_SPEED(portsc));\n\n\tif (portsc & PORT_RESET)\n\t\tret += snprintf(str + ret, size - ret, \"In-Reset \");\n\n\tret += snprintf(str + ret, size - ret, \"Change: \");\n\tif (portsc & PORT_CSC)\n\t\tret += snprintf(str + ret, size - ret, \"CSC \");\n\tif (portsc & PORT_WRC)\n\t\tret += snprintf(str + ret, size - ret, \"WRC \");\n\tif (portsc & PORT_RC)\n\t\tret += snprintf(str + ret, size - ret, \"PRC \");\n\tif (portsc & PORT_PLC)\n\t\tret += snprintf(str + ret, size - ret, \"PLC \");\n\tif (portsc & PORT_CEC)\n\t\tret += snprintf(str + ret, size - ret, \"CEC \");\n\tret += snprintf(str + ret, size - ret, \"Wake: \");\n\tif (portsc & PORT_WKCONN_E)\n\t\tret += snprintf(str + ret, size - ret, \"WCE \");\n\tif (portsc & PORT_WKDISC_E)\n\t\tret += snprintf(str + ret, size - ret, \"WDE \");\n\n\treturn str;\n}\n\nstatic inline const char *cdnsp_ep_state_string(u8 state)\n{\n\tswitch (state) {\n\tcase EP_STATE_DISABLED:\n\t\treturn \"disabled\";\n\tcase EP_STATE_RUNNING:\n\t\treturn \"running\";\n\tcase EP_STATE_HALTED:\n\t\treturn \"halted\";\n\tcase EP_STATE_STOPPED:\n\t\treturn \"stopped\";\n\tcase EP_STATE_ERROR:\n\t\treturn \"error\";\n\tdefault:\n\t\treturn \"INVALID\";\n\t}\n}\n\nstatic inline const char *cdnsp_ep_type_string(u8 type)\n{\n\tswitch (type) {\n\tcase ISOC_OUT_EP:\n\t\treturn \"Isoc OUT\";\n\tcase BULK_OUT_EP:\n\t\treturn \"Bulk OUT\";\n\tcase INT_OUT_EP:\n\t\treturn \"Int OUT\";\n\tcase CTRL_EP:\n\t\treturn \"Ctrl\";\n\tcase ISOC_IN_EP:\n\t\treturn \"Isoc IN\";\n\tcase BULK_IN_EP:\n\t\treturn \"Bulk IN\";\n\tcase INT_IN_EP:\n\t\treturn \"Int IN\";\n\tdefault:\n\t\treturn \"INVALID\";\n\t}\n}\n\nstatic inline const char *cdnsp_decode_ep_context(char *str, size_t size,\n\t\t\t\t\t\t  u32 info, u32 info2,\n\t\t\t\t\t\t  u64 deq, u32 tx_info)\n{\n\tu8 max_pstr, ep_state, interval, ep_type, burst, cerr, mult;\n\tbool lsa, hid;\n\tu16 maxp, avg;\n\tu32 esit;\n\tint ret;\n\n\tesit = CTX_TO_MAX_ESIT_PAYLOAD_HI(info) << 16 |\n\t       CTX_TO_MAX_ESIT_PAYLOAD_LO(tx_info);\n\n\tep_state = info & EP_STATE_MASK;\n\tmax_pstr = CTX_TO_EP_MAXPSTREAMS(info);\n\tinterval = CTX_TO_EP_INTERVAL(info);\n\tmult = CTX_TO_EP_MULT(info) + 1;\n\tlsa = !!(info & EP_HAS_LSA);\n\n\tcerr = (info2 & (3 << 1)) >> 1;\n\tep_type = CTX_TO_EP_TYPE(info2);\n\thid = !!(info2 & (1 << 7));\n\tburst = CTX_TO_MAX_BURST(info2);\n\tmaxp = MAX_PACKET_DECODED(info2);\n\n\tavg = EP_AVG_TRB_LENGTH(tx_info);\n\n\tret = snprintf(str, size, \"State %s mult %d max P. Streams %d %s\",\n\t\t       cdnsp_ep_state_string(ep_state), mult,\n\t\t       max_pstr, lsa ? \"LSA \" : \"\");\n\n\tret += snprintf(str + ret, size - ret,\n\t\t\t\"interval %d us max ESIT payload %d CErr %d \",\n\t\t\t(1 << interval) * 125, esit, cerr);\n\n\tret += snprintf(str + ret, size - ret,\n\t\t\t\"Type %s %sburst %d maxp %d deq %016llx \",\n\t\t\tcdnsp_ep_type_string(ep_type), hid ? \"HID\" : \"\",\n\t\t\tburst, maxp, deq);\n\n\tret += snprintf(str + ret, size - ret, \"avg trb len %d\", avg);\n\n\treturn str;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}