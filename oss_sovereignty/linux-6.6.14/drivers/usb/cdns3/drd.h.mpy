{
  "module_name": "drd.h",
  "hash_id": "fdd518282f865099af68c34ec045d03e26256634ba1bb7ff05eae0c2703b1543",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/cdns3/drd.h",
  "human_readable_source": " \n \n#ifndef __LINUX_CDNS3_DRD\n#define __LINUX_CDNS3_DRD\n\n#include <linux/usb/otg.h>\n#include \"core.h\"\n\n \nstruct cdns3_otg_regs {\n\t__le32 did;\n\t__le32 rid;\n\t__le32 capabilities;\n\t__le32 reserved1;\n\t__le32 cmd;\n\t__le32 sts;\n\t__le32 state;\n\t__le32 reserved2;\n\t__le32 ien;\n\t__le32 ivect;\n\t__le32 refclk;\n\t__le32 tmr;\n\t__le32 reserved3[4];\n\t__le32 simulate;\n\t__le32 override;\n\t__le32 susp_ctrl;\n\t__le32 phyrst_cfg;\n\t__le32 anasts;\n\t__le32 adp_ramp_time;\n\t__le32 ctrl1;\n\t__le32 ctrl2;\n};\n\n \nstruct cdns3_otg_legacy_regs {\n\t__le32 cmd;\n\t__le32 sts;\n\t__le32 state;\n\t__le32 refclk;\n\t__le32 ien;\n\t__le32 ivect;\n\t__le32 reserved1[3];\n\t__le32 tmr;\n\t__le32 reserved2[2];\n\t__le32 version;\n\t__le32 capabilities;\n\t__le32 reserved3[2];\n\t__le32 simulate;\n\t__le32 reserved4[5];\n\t__le32 ctrl1;\n};\n\n \nstruct cdnsp_otg_regs {\n\t__le32 did;\n\t__le32 rid;\n\t__le32 cfgs1;\n\t__le32 cfgs2;\n\t__le32 cmd;\n\t__le32 sts;\n\t__le32 state;\n\t__le32 ien;\n\t__le32 ivect;\n\t__le32 tmr;\n\t__le32 simulate;\n\t__le32 adpbc_sts;\n\t__le32 adp_ramp_time;\n\t__le32 adpbc_ctrl1;\n\t__le32 adpbc_ctrl2;\n\t__le32 override;\n\t__le32 vbusvalid_dbnc_cfg;\n\t__le32 sessvalid_dbnc_cfg;\n\t__le32 susp_timing_ctrl;\n};\n\n#define OTG_CDNSP_DID\t0x0004034E\n\n \nstruct cdns_otg_common_regs {\n\t__le32 cmd;\n\t__le32 sts;\n\t__le32 state;\n};\n\n \nstruct cdns_otg_irq_regs {\n\t__le32 ien;\n\t__le32 ivect;\n};\n\n \n#define CDNS_RID(p)\t\t\t((p) & GENMASK(15, 0))\n\n \n#define CDNS_DID(p)\t\t\t((p) & GENMASK(31, 0))\n\n \n \n#define OTGCMD_DEV_BUS_REQ\t\tBIT(0)\n \n#define OTGCMD_HOST_BUS_REQ\t\tBIT(1)\n \n#define OTGCMD_OTG_EN\t\t\tBIT(2)\n \n#define OTGCMD_OTG_DIS\t\t\tBIT(3)\n \n#define OTGCMD_A_DEV_EN\t\t\tBIT(4)\n \n#define OTGCMD_A_DEV_DIS\t\tBIT(5)\n \n#define OTGCMD_DEV_BUS_DROP\t\tBIT(8)\n \n#define OTGCMD_HOST_BUS_DROP\t\tBIT(9)\n \n#define OTGCMD_DEV_POWER_OFF\t\tBIT(11)\n \n#define OTGCMD_HOST_POWER_OFF\t\tBIT(12)\n\n \n \n#define OTGIEN_ID_CHANGE_INT\t\tBIT(0)\n \n#define OTGIEN_VBUSVALID_RISE_INT\tBIT(4)\n \n#define OTGIEN_VBUSVALID_FALL_INT\tBIT(5)\n\n \n \n#define OTGSTS_ID_VALUE\t\t\tBIT(0)\n \n#define OTGSTS_VBUS_VALID\t\tBIT(1)\n \n#define OTGSTS_SESSION_VALID\t\tBIT(2)\n \n#define OTGSTS_DEV_ACTIVE\t\tBIT(3)\n \n#define OTGSTS_HOST_ACTIVE\t\tBIT(4)\n \n#define OTGSTS_OTG_NRDY_MASK\t\tBIT(11)\n#define OTGSTS_OTG_NRDY(p)\t\t((p) & OTGSTS_OTG_NRDY_MASK)\n \n#define OTGSTS_STRAP(p)\t\t\t(((p) & GENMASK(14, 12)) >> 12)\n#define OTGSTS_STRAP_NO_DEFAULT_CFG\t0x00\n#define OTGSTS_STRAP_HOST_OTG\t\t0x01\n#define OTGSTS_STRAP_HOST\t\t0x02\n#define OTGSTS_STRAP_GADGET\t\t0x04\n#define OTGSTS_CDNSP_STRAP_HOST\t\t0x01\n#define OTGSTS_CDNSP_STRAP_GADGET\t0x02\n\n \n#define OTGSTS_CDNS3_XHCI_READY\t\tBIT(26)\n#define OTGSTS_CDNSP_XHCI_READY\t\tBIT(27)\n\n \n#define OTGSTS_CDNS3_DEV_READY\t\tBIT(27)\n#define OTGSTS_CDNSP_DEV_READY\t\tBIT(26)\n\n \n#define OTGSTATE_DEV_STATE_MASK\t\tGENMASK(2, 0)\n#define OTGSTATE_HOST_STATE_MASK\tGENMASK(5, 3)\n#define OTGSTATE_HOST_STATE_IDLE\t0x0\n#define OTGSTATE_HOST_STATE_VBUS_FALL\t0x7\n#define OTGSTATE_HOST_STATE(p)\t\t(((p) & OTGSTATE_HOST_STATE_MASK) >> 3)\n\n \n#define OTGREFCLK_STB_CLK_SWITCH_EN\tBIT(31)\n\n \n#define OVERRIDE_IDPULLUP\t\tBIT(0)\n \n#define OVERRIDE_IDPULLUP_V0\t\tBIT(24)\n \n#define OVERRIDE_SESS_VLD_SEL\t\tBIT(10)\n\n \n#define PHYRST_CFG_PHYRST_A_ENABLE     BIT(0)\n\n#define CDNS3_ID_PERIPHERAL\t\t1\n#define CDNS3_ID_HOST\t\t\t0\n\nbool cdns_is_host(struct cdns *cdns);\nbool cdns_is_device(struct cdns *cdns);\nint cdns_get_id(struct cdns *cdns);\nint cdns_get_vbus(struct cdns *cdns);\nvoid cdns_clear_vbus(struct cdns *cdns);\nvoid cdns_set_vbus(struct cdns *cdns);\nint cdns_drd_init(struct cdns *cdns);\nint cdns_drd_exit(struct cdns *cdns);\nint cdns_drd_update_mode(struct cdns *cdns);\nint cdns_drd_gadget_on(struct cdns *cdns);\nvoid cdns_drd_gadget_off(struct cdns *cdns);\nint cdns_drd_host_on(struct cdns *cdns);\nvoid cdns_drd_host_off(struct cdns *cdns);\nbool cdns_power_is_lost(struct cdns *cdns);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}