{
  "module_name": "cppi_dma.h",
  "hash_id": "93a8a6ee048f8b94837fed5aee7125b75cd5cd3000322261f719c8154f7b593b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/musb/cppi_dma.h",
  "human_readable_source": " \n \n\n#ifndef _CPPI_DMA_H_\n#define _CPPI_DMA_H_\n\n#include <linux/slab.h>\n#include <linux/list.h>\n#include <linux/errno.h>\n#include <linux/dmapool.h>\n#include <linux/dmaengine.h>\n\n#include \"musb_core.h\"\n#include \"musb_dma.h\"\n\n \n\nstruct cppi_tx_stateram {\n\tu32 tx_head;\t\t\t \n\tu32 tx_buf;\n\tu32 tx_current;\t\t\t \n\tu32 tx_buf_current;\n\tu32 tx_info;\t\t\t \n\tu32 tx_rem_len;\n\tu32 tx_dummy;\t\t\t \n\tu32 tx_complete;\n};\n\nstruct cppi_rx_stateram {\n\tu32 rx_skipbytes;\n\tu32 rx_head;\n\tu32 rx_sop;\t\t\t \n\tu32 rx_current;\t\t\t \n\tu32 rx_buf_current;\n\tu32 rx_len_len;\n\tu32 rx_cnt_cnt;\n\tu32 rx_complete;\n};\n\n \n#define CPPI_SOP_SET\t((u32)(1 << 31))\n#define CPPI_EOP_SET\t((u32)(1 << 30))\n#define CPPI_OWN_SET\t((u32)(1 << 29))\t \n#define CPPI_EOQ_MASK\t((u32)(1 << 28))\n#define CPPI_ZERO_SET\t((u32)(1 << 23))\t \n#define CPPI_RXABT_MASK\t((u32)(1 << 19))\t \n\n#define CPPI_RECV_PKTLEN_MASK 0xFFFF\n#define CPPI_BUFFER_LEN_MASK 0xFFFF\n\n#define CPPI_TEAR_READY ((u32)(1 << 31))\n\n \n\n#define\tCPPI_DESCRIPTOR_ALIGN\t16\t \n\nstruct cppi_descriptor {\n\t \n\tu32\t\thw_next;\t \n\tu32\t\thw_bufp;\t \n\tu32\t\thw_off_len;\t \n\tu32\t\thw_options;\t \n\n\tstruct cppi_descriptor *next;\n\tdma_addr_t\tdma;\t\t \n\tu32\t\tbuflen;\t\t \n} __attribute__ ((aligned(CPPI_DESCRIPTOR_ALIGN)));\n\n\nstruct cppi;\n\n \nstruct cppi_channel {\n\tstruct dma_channel\tchannel;\n\n\t \n\tstruct cppi\t\t*controller;\n\n\t \n\tstruct musb_hw_ep\t*hw_ep;\n\tbool\t\t\ttransmit;\n\tu8\t\t\tindex;\n\n\t \n\tu8\t\t\tis_rndis;\n\n\t \n\tdma_addr_t\t\tbuf_dma;\n\tu32\t\t\tbuf_len;\n\tu32\t\t\tmaxpacket;\n\tu32\t\t\toffset;\t\t \n\n\tvoid __iomem\t\t*state_ram;\t \n\n\tstruct cppi_descriptor\t*freelist;\n\n\t \n\tstruct cppi_descriptor\t*head;\n\tstruct cppi_descriptor\t*tail;\n\tstruct cppi_descriptor\t*last_processed;\n\n\t \n\tstruct list_head\ttx_complete;\n};\n\n \nstruct cppi {\n\tstruct dma_controller\t\tcontroller;\n\tvoid __iomem\t\t\t*mregs;\t\t \n\tvoid __iomem\t\t\t*tibase;\t \n\n\tint\t\t\t\tirq;\n\n\tstruct cppi_channel\t\ttx[4];\n\tstruct cppi_channel\t\trx[4];\n\n\tstruct dma_pool\t\t\t*pool;\n\n\tstruct list_head\t\ttx_complete;\n};\n\nstruct cppi41_dma_channel {\n\tstruct dma_channel channel;\n\tstruct cppi41_dma_controller *controller;\n\tstruct musb_hw_ep *hw_ep;\n\tstruct dma_chan *dc;\n\tdma_cookie_t cookie;\n\tu8 port_num;\n\tu8 is_tx;\n\tu8 is_allocated;\n\tu8 usb_toggle;\n\n\tdma_addr_t buf_addr;\n\tu32 total_len;\n\tu32 prog_len;\n\tu32 transferred;\n\tu32 packet_sz;\n\tstruct list_head tx_check;\n\tint tx_zlp;\n};\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}