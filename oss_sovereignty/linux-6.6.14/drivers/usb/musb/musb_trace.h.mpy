{
  "module_name": "musb_trace.h",
  "hash_id": "f3ed9c9046db7d39c918d6278447639ae8eb0476f00888f8d7a147d9979cf113",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/musb/musb_trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM musb\n\n#if !defined(__MUSB_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __MUSB_TRACE_H\n\n#include <linux/types.h>\n#include <linux/tracepoint.h>\n#include <linux/usb.h>\n#include \"musb_core.h\"\n#ifdef CONFIG_USB_TI_CPPI41_DMA\n#include \"cppi_dma.h\"\n#endif\n\n#define MUSB_MSG_MAX   500\n\nTRACE_EVENT(musb_log,\n\tTP_PROTO(struct musb *musb, struct va_format *vaf),\n\tTP_ARGS(musb, vaf),\n\tTP_STRUCT__entry(\n\t\t__string(name, dev_name(musb->controller))\n\t\t__vstring(msg, vaf->fmt, vaf->va)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dev_name(musb->controller));\n\t\t__assign_vstr(msg, vaf->fmt, vaf->va);\n\t),\n\tTP_printk(\"%s: %s\", __get_str(name), __get_str(msg))\n);\n\nTRACE_EVENT(musb_state,\n\tTP_PROTO(struct musb *musb, u8 devctl, const char *desc),\n\tTP_ARGS(musb, devctl, desc),\n\tTP_STRUCT__entry(\n\t\t__string(name, dev_name(musb->controller))\n\t\t__field(u8, devctl)\n\t\t__string(desc, desc)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dev_name(musb->controller));\n\t\t__entry->devctl = devctl;\n\t\t__assign_str(desc, desc);\n\t),\n\tTP_printk(\"%s: devctl: %02x %s\", __get_str(name), __entry->devctl,\n\t\t  __get_str(desc))\n);\n\nDECLARE_EVENT_CLASS(musb_regb,\n\tTP_PROTO(void *caller, const void  __iomem *addr,\n\t\t unsigned int offset, u8 data),\n\tTP_ARGS(caller, addr, offset, data),\n\tTP_STRUCT__entry(\n\t\t__field(void *, caller)\n\t\t__field(const void __iomem *, addr)\n\t\t__field(unsigned int, offset)\n\t\t__field(u8, data)\n\t),\n\tTP_fast_assign(\n\t\t__entry->caller = caller;\n\t\t__entry->addr = addr;\n\t\t__entry->offset = offset;\n\t\t__entry->data = data;\n\t),\n\tTP_printk(\"%pS: %p + %04x: %02x\",\n\t\t__entry->caller, __entry->addr, __entry->offset, __entry->data)\n);\n\nDEFINE_EVENT(musb_regb, musb_readb,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u8 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nDEFINE_EVENT(musb_regb, musb_writeb,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u8 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nDECLARE_EVENT_CLASS(musb_regw,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u16 data),\n\tTP_ARGS(caller, addr, offset, data),\n\tTP_STRUCT__entry(\n\t\t__field(void *, caller)\n\t\t__field(const void __iomem *, addr)\n\t\t__field(unsigned int, offset)\n\t\t__field(u16, data)\n\t),\n\tTP_fast_assign(\n\t\t__entry->caller = caller;\n\t\t__entry->addr = addr;\n\t\t__entry->offset = offset;\n\t\t__entry->data = data;\n\t),\n\tTP_printk(\"%pS: %p + %04x: %04x\",\n\t\t__entry->caller, __entry->addr, __entry->offset, __entry->data)\n);\n\nDEFINE_EVENT(musb_regw, musb_readw,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u16 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nDEFINE_EVENT(musb_regw, musb_writew,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u16 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nDECLARE_EVENT_CLASS(musb_regl,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u32 data),\n\tTP_ARGS(caller, addr, offset, data),\n\tTP_STRUCT__entry(\n\t\t__field(void *, caller)\n\t\t__field(const void __iomem *, addr)\n\t\t__field(unsigned int, offset)\n\t\t__field(u32, data)\n\t),\n\tTP_fast_assign(\n\t\t__entry->caller = caller;\n\t\t__entry->addr = addr;\n\t\t__entry->offset = offset;\n\t\t__entry->data = data;\n\t),\n\tTP_printk(\"%pS: %p + %04x: %08x\",\n\t\t__entry->caller, __entry->addr, __entry->offset, __entry->data)\n);\n\nDEFINE_EVENT(musb_regl, musb_readl,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u32 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nDEFINE_EVENT(musb_regl, musb_writel,\n\tTP_PROTO(void *caller, const void __iomem *addr,\n\t\t unsigned int offset, u32 data),\n\tTP_ARGS(caller, addr, offset, data)\n);\n\nTRACE_EVENT(musb_isr,\n\tTP_PROTO(struct musb *musb),\n\tTP_ARGS(musb),\n\tTP_STRUCT__entry(\n\t\t__string(name, dev_name(musb->controller))\n\t\t__field(u8, int_usb)\n\t\t__field(u16, int_tx)\n\t\t__field(u16, int_rx)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dev_name(musb->controller));\n\t\t__entry->int_usb = musb->int_usb;\n\t\t__entry->int_tx = musb->int_tx;\n\t\t__entry->int_rx = musb->int_rx;\n\t),\n\tTP_printk(\"%s: usb %02x, tx %04x, rx %04x\",\n\t\t__get_str(name), __entry->int_usb,\n\t\t__entry->int_tx, __entry->int_rx\n\t)\n);\n\nDECLARE_EVENT_CLASS(musb_urb,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb),\n\tTP_STRUCT__entry(\n\t\t__string(name, dev_name(musb->controller))\n\t\t__field(struct urb *, urb)\n\t\t__field(unsigned int, pipe)\n\t\t__field(int, status)\n\t\t__field(unsigned int, flag)\n\t\t__field(u32, buf_len)\n\t\t__field(u32, actual_len)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dev_name(musb->controller));\n\t\t__entry->urb = urb;\n\t\t__entry->pipe = urb->pipe;\n\t\t__entry->status = urb->status;\n\t\t__entry->flag = urb->transfer_flags;\n\t\t__entry->buf_len = urb->transfer_buffer_length;\n\t\t__entry->actual_len = urb->actual_length;\n\t),\n\tTP_printk(\"%s: %p, dev%d ep%d%s, flag 0x%x, len %d/%d, status %d\",\n\t\t\t__get_str(name), __entry->urb,\n\t\t\tusb_pipedevice(__entry->pipe),\n\t\t\tusb_pipeendpoint(__entry->pipe),\n\t\t\tusb_pipein(__entry->pipe) ? \"in\" : \"out\",\n\t\t\t__entry->flag,\n\t\t\t__entry->actual_len, __entry->buf_len,\n\t\t\t__entry->status\n\t)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_start,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_gb,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_rx,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_tx,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_enq,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDEFINE_EVENT(musb_urb, musb_urb_deq,\n\tTP_PROTO(struct musb *musb, struct urb *urb),\n\tTP_ARGS(musb, urb)\n);\n\nDECLARE_EVENT_CLASS(musb_req,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req),\n\tTP_STRUCT__entry(\n\t\t__field(struct usb_request *, req)\n\t\t__field(u8, is_tx)\n\t\t__field(u8, epnum)\n\t\t__field(int, status)\n\t\t__field(unsigned int, buf_len)\n\t\t__field(unsigned int, actual_len)\n\t\t__field(unsigned int, zero)\n\t\t__field(unsigned int, short_not_ok)\n\t\t__field(unsigned int, no_interrupt)\n\t),\n\tTP_fast_assign(\n\t\t__entry->req = &req->request;\n\t\t__entry->is_tx = req->tx;\n\t\t__entry->epnum = req->epnum;\n\t\t__entry->status = req->request.status;\n\t\t__entry->buf_len = req->request.length;\n\t\t__entry->actual_len = req->request.actual;\n\t\t__entry->zero = req->request.zero;\n\t\t__entry->short_not_ok = req->request.short_not_ok;\n\t\t__entry->no_interrupt = req->request.no_interrupt;\n\t),\n\tTP_printk(\"%p, ep%d %s, %s%s%s, len %d/%d, status %d\",\n\t\t\t__entry->req, __entry->epnum,\n\t\t\t__entry->is_tx ? \"tx/IN\" : \"rx/OUT\",\n\t\t\t__entry->zero ? \"Z\" : \"z\",\n\t\t\t__entry->short_not_ok ? \"S\" : \"s\",\n\t\t\t__entry->no_interrupt ? \"I\" : \"i\",\n\t\t\t__entry->actual_len, __entry->buf_len,\n\t\t\t__entry->status\n\t)\n);\n\nDEFINE_EVENT(musb_req, musb_req_gb,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_tx,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_rx,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_alloc,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_free,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_start,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_enq,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(musb_req, musb_req_deq,\n\tTP_PROTO(struct musb_request *req),\n\tTP_ARGS(req)\n);\n\n#ifdef CONFIG_USB_TI_CPPI41_DMA\nDECLARE_EVENT_CLASS(musb_cppi41,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch),\n\tTP_STRUCT__entry(\n\t\t__field(struct cppi41_dma_channel *, ch)\n\t\t__string(name, dev_name(ch->hw_ep->musb->controller))\n\t\t__field(u8, hwep)\n\t\t__field(u8, port)\n\t\t__field(u8, is_tx)\n\t\t__field(u32, len)\n\t\t__field(u32, prog_len)\n\t\t__field(u32, xferred)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ch = ch;\n\t\t__assign_str(name, dev_name(ch->hw_ep->musb->controller));\n\t\t__entry->hwep = ch->hw_ep->epnum;\n\t\t__entry->port = ch->port_num;\n\t\t__entry->is_tx = ch->is_tx;\n\t\t__entry->len = ch->total_len;\n\t\t__entry->prog_len = ch->prog_len;\n\t\t__entry->xferred = ch->transferred;\n\t),\n\tTP_printk(\"%s: %p, hwep%d ch%d%s, prog_len %d, len %d/%d\",\n\t\t\t__get_str(name), __entry->ch, __entry->hwep,\n\t\t\t__entry->port, __entry->is_tx ? \"tx\" : \"rx\",\n\t\t\t__entry->prog_len, __entry->xferred, __entry->len\n\t)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_done,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_gb,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_config,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_cont,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_alloc,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_abort,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n\nDEFINE_EVENT(musb_cppi41, musb_cppi41_free,\n\tTP_PROTO(struct cppi41_dma_channel *ch),\n\tTP_ARGS(ch)\n);\n#endif  \n\n#endif  \n\n \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE musb_trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}