{
  "module_name": "mtu3_trace.h",
  "hash_id": "fb5249662dc5a394174031fb4844effbcf9f2e24ada8bfdedfa2606d22dc7921",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/mtu3/mtu3_trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM mtu3\n\n#if !defined(__MTU3_TRACE_H__) || defined(TRACE_HEADER_MULTI_READ)\n#define __MTU3_TRACE_H__\n\n#include <linux/types.h>\n#include <linux/tracepoint.h>\n\n#include \"mtu3.h\"\n\nTRACE_EVENT(mtu3_log,\n\tTP_PROTO(struct device *dev, struct va_format *vaf),\n\tTP_ARGS(dev, vaf),\n\tTP_STRUCT__entry(\n\t\t__string(name, dev_name(dev))\n\t\t__vstring(msg, vaf->fmt, vaf->va)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, dev_name(dev));\n\t\t__assign_vstr(msg, vaf->fmt, vaf->va);\n\t),\n\tTP_printk(\"%s: %s\", __get_str(name), __get_str(msg))\n);\n\nTRACE_EVENT(mtu3_u3_ltssm_isr,\n\tTP_PROTO(u32 intr),\n\tTP_ARGS(intr),\n\tTP_STRUCT__entry(\n\t\t__field(u32, intr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->intr = intr;\n\t),\n\tTP_printk(\"(%08x) %s %s %s %s %s %s\", __entry->intr,\n\t\t__entry->intr & HOT_RST_INTR ? \"HOT_RST\" : \"\",\n\t\t__entry->intr & WARM_RST_INTR ? \"WARM_RST\" : \"\",\n\t\t__entry->intr & ENTER_U3_INTR ? \"ENT_U3\" : \"\",\n\t\t__entry->intr & EXIT_U3_INTR ? \"EXIT_U3\" : \"\",\n\t\t__entry->intr & VBUS_RISE_INTR ? \"VBUS_RISE\" : \"\",\n\t\t__entry->intr & VBUS_FALL_INTR ? \"VBUS_FALL\" : \"\"\n\t)\n);\n\nTRACE_EVENT(mtu3_u2_common_isr,\n\tTP_PROTO(u32 intr),\n\tTP_ARGS(intr),\n\tTP_STRUCT__entry(\n\t\t__field(u32, intr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->intr = intr;\n\t),\n\tTP_printk(\"(%08x) %s %s %s\", __entry->intr,\n\t\t__entry->intr & SUSPEND_INTR ? \"SUSPEND\" : \"\",\n\t\t__entry->intr & RESUME_INTR ? \"RESUME\" : \"\",\n\t\t__entry->intr & RESET_INTR ? \"RESET\" : \"\"\n\t)\n);\n\nTRACE_EVENT(mtu3_qmu_isr,\n\tTP_PROTO(u32 done_intr, u32 exp_intr),\n\tTP_ARGS(done_intr, exp_intr),\n\tTP_STRUCT__entry(\n\t\t__field(u32, done_intr)\n\t\t__field(u32, exp_intr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->done_intr = done_intr;\n\t\t__entry->exp_intr = exp_intr;\n\t),\n\tTP_printk(\"done (tx %04x, rx %04x), exp (%08x)\",\n\t\t__entry->done_intr & 0xffff,\n\t\t__entry->done_intr >> 16,\n\t\t__entry->exp_intr\n\t)\n);\n\nDECLARE_EVENT_CLASS(mtu3_log_setup,\n\tTP_PROTO(struct usb_ctrlrequest *setup),\n\tTP_ARGS(setup),\n\tTP_STRUCT__entry(\n\t\t__field(__u8, bRequestType)\n\t\t__field(__u8, bRequest)\n\t\t__field(__u16, wValue)\n\t\t__field(__u16, wIndex)\n\t\t__field(__u16, wLength)\n\t),\n\tTP_fast_assign(\n\t\t__entry->bRequestType = setup->bRequestType;\n\t\t__entry->bRequest = setup->bRequest;\n\t\t__entry->wValue = le16_to_cpu(setup->wValue);\n\t\t__entry->wIndex = le16_to_cpu(setup->wIndex);\n\t\t__entry->wLength = le16_to_cpu(setup->wLength);\n\t),\n\tTP_printk(\"setup - %02x %02x %04x %04x %04x\",\n\t\t__entry->bRequestType, __entry->bRequest,\n\t\t__entry->wValue, __entry->wIndex, __entry->wLength\n\t)\n);\n\nDEFINE_EVENT(mtu3_log_setup, mtu3_handle_setup,\n\tTP_PROTO(struct usb_ctrlrequest *setup),\n\tTP_ARGS(setup)\n);\n\nDECLARE_EVENT_CLASS(mtu3_log_request,\n\tTP_PROTO(struct mtu3_request *mreq),\n\tTP_ARGS(mreq),\n\tTP_STRUCT__entry(\n\t\t__string(name, mreq->mep->name)\n\t\t__field(struct mtu3_request *, mreq)\n\t\t__field(struct qmu_gpd *, gpd)\n\t\t__field(unsigned int, actual)\n\t\t__field(unsigned int, length)\n\t\t__field(int, status)\n\t\t__field(int, zero)\n\t\t__field(int, no_interrupt)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, mreq->mep->name);\n\t\t__entry->mreq = mreq;\n\t\t__entry->gpd = mreq->gpd;\n\t\t__entry->actual = mreq->request.actual;\n\t\t__entry->length = mreq->request.length;\n\t\t__entry->status = mreq->request.status;\n\t\t__entry->zero = mreq->request.zero;\n\t\t__entry->no_interrupt = mreq->request.no_interrupt;\n\t),\n\tTP_printk(\"%s: req %p gpd %p len %u/%u %s%s --> %d\",\n\t\t__get_str(name), __entry->mreq, __entry->gpd,\n\t\t__entry->actual, __entry->length,\n\t\t__entry->zero ? \"Z\" : \"z\",\n\t\t__entry->no_interrupt ? \"i\" : \"I\",\n\t\t__entry->status\n\t)\n);\n\nDEFINE_EVENT(mtu3_log_request, mtu3_alloc_request,\n\tTP_PROTO(struct mtu3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(mtu3_log_request, mtu3_free_request,\n\tTP_PROTO(struct mtu3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(mtu3_log_request, mtu3_gadget_queue,\n\tTP_PROTO(struct mtu3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(mtu3_log_request, mtu3_gadget_dequeue,\n\tTP_PROTO(struct mtu3_request *req),\n\tTP_ARGS(req)\n);\n\nDEFINE_EVENT(mtu3_log_request, mtu3_req_complete,\n\tTP_PROTO(struct mtu3_request *req),\n\tTP_ARGS(req)\n);\n\nDECLARE_EVENT_CLASS(mtu3_log_gpd,\n\tTP_PROTO(struct mtu3_ep *mep, struct qmu_gpd *gpd),\n\tTP_ARGS(mep, gpd),\n\tTP_STRUCT__entry(\n\t\t__string(name, mep->name)\n\t\t__field(struct qmu_gpd *, gpd)\n\t\t__field(u32, dw0)\n\t\t__field(u32, dw1)\n\t\t__field(u32, dw2)\n\t\t__field(u32, dw3)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, mep->name);\n\t\t__entry->gpd = gpd;\n\t\t__entry->dw0 = le32_to_cpu(gpd->dw0_info);\n\t\t__entry->dw1 = le32_to_cpu(gpd->next_gpd);\n\t\t__entry->dw2 = le32_to_cpu(gpd->buffer);\n\t\t__entry->dw3 = le32_to_cpu(gpd->dw3_info);\n\t),\n\tTP_printk(\"%s: gpd %p - %08x %08x %08x %08x\",\n\t\t__get_str(name), __entry->gpd,\n\t\t__entry->dw0, __entry->dw1,\n\t\t__entry->dw2, __entry->dw3\n\t)\n);\n\nDEFINE_EVENT(mtu3_log_gpd, mtu3_prepare_gpd,\n\tTP_PROTO(struct mtu3_ep *mep, struct qmu_gpd *gpd),\n\tTP_ARGS(mep, gpd)\n);\n\nDEFINE_EVENT(mtu3_log_gpd, mtu3_complete_gpd,\n\tTP_PROTO(struct mtu3_ep *mep, struct qmu_gpd *gpd),\n\tTP_ARGS(mep, gpd)\n);\n\nDEFINE_EVENT(mtu3_log_gpd, mtu3_zlp_exp_gpd,\n\tTP_PROTO(struct mtu3_ep *mep, struct qmu_gpd *gpd),\n\tTP_ARGS(mep, gpd)\n);\n\nDECLARE_EVENT_CLASS(mtu3_log_ep,\n\tTP_PROTO(struct mtu3_ep *mep),\n\tTP_ARGS(mep),\n\tTP_STRUCT__entry(\n\t\t__string(name, mep->name)\n\t\t__field(unsigned int, type)\n\t\t__field(unsigned int, slot)\n\t\t__field(unsigned int, maxp)\n\t\t__field(unsigned int, mult)\n\t\t__field(unsigned int, maxburst)\n\t\t__field(unsigned int, flags)\n\t\t__field(unsigned int, direction)\n\t\t__field(struct mtu3_gpd_ring *, gpd_ring)\n\t),\n\tTP_fast_assign(\n\t\t__assign_str(name, mep->name);\n\t\t__entry->type = mep->type;\n\t\t__entry->slot = mep->slot;\n\t\t__entry->maxp = mep->ep.maxpacket;\n\t\t__entry->mult = mep->ep.mult;\n\t\t__entry->maxburst = mep->ep.maxburst;\n\t\t__entry->flags = mep->flags;\n\t\t__entry->direction = mep->is_in;\n\t\t__entry->gpd_ring = &mep->gpd_ring;\n\t),\n\tTP_printk(\"%s: type %s maxp %d slot %d mult %d burst %d ring %p/%pad flags %c:%c%c%c:%c\",\n\t\t__get_str(name), usb_ep_type_string(__entry->type),\n\t\t__entry->maxp, __entry->slot,\n\t\t__entry->mult, __entry->maxburst,\n\t\t__entry->gpd_ring, &__entry->gpd_ring->dma,\n\t\t__entry->flags & MTU3_EP_ENABLED ? 'E' : 'e',\n\t\t__entry->flags & MTU3_EP_STALL ? 'S' : 's',\n\t\t__entry->flags & MTU3_EP_WEDGE ? 'W' : 'w',\n\t\t__entry->flags & MTU3_EP_BUSY ? 'B' : 'b',\n\t\t__entry->direction ? '<' : '>'\n\t)\n);\n\nDEFINE_EVENT(mtu3_log_ep, mtu3_gadget_ep_enable,\n\tTP_PROTO(struct mtu3_ep *mep),\n\tTP_ARGS(mep)\n);\n\nDEFINE_EVENT(mtu3_log_ep, mtu3_gadget_ep_disable,\n\tTP_PROTO(struct mtu3_ep *mep),\n\tTP_ARGS(mep)\n);\n\nDEFINE_EVENT(mtu3_log_ep, mtu3_gadget_ep_set_halt,\n\tTP_PROTO(struct mtu3_ep *mep),\n\tTP_ARGS(mep)\n);\n\n#endif  \n\n \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE mtu3_trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}