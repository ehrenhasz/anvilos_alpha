{
  "module_name": "qcom_pmic_typec_pdphy.h",
  "hash_id": "a347d225f587559aa8a49293218a64bd5fddb692048c69574ff4cbfbf4d68401",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/typec/tcpm/qcom/qcom_pmic_typec_pdphy.h",
  "human_readable_source": " \n \n#ifndef __QCOM_PMIC_PDPHY_H__\n#define __QCOM_PMIC_PDPHY_H__\n\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n#include <linux/usb/tcpm.h>\n\n#define USB_PDPHY_MAX_DATA_OBJ_LEN\t28\n#define USB_PDPHY_MSG_HDR_LEN\t\t2\n\n \n#define USB_PDPHY_MSG_CONFIG_REG\t0x40\n#define MSG_CONFIG_PORT_DATA_ROLE\tBIT(3)\n#define MSG_CONFIG_PORT_POWER_ROLE\tBIT(2)\n#define MSG_CONFIG_SPEC_REV_MASK\t(BIT(1) | BIT(0))\n\n#define USB_PDPHY_EN_CONTROL_REG\t0x46\n#define CONTROL_ENABLE\t\t\tBIT(0)\n\n#define USB_PDPHY_RX_STATUS_REG\t\t0x4A\n#define RX_FRAME_TYPE\t\t\t(BIT(0) | BIT(1) | BIT(2))\n\n#define USB_PDPHY_FRAME_FILTER_REG\t0x4C\n#define FRAME_FILTER_EN_HARD_RESET\tBIT(5)\n#define FRAME_FILTER_EN_SOP\t\tBIT(0)\n\n#define USB_PDPHY_TX_SIZE_REG\t\t0x42\n#define TX_SIZE_MASK\t\t\t0xF\n\n#define USB_PDPHY_TX_CONTROL_REG\t0x44\n#define TX_CONTROL_RETRY_COUNT(n)\t(((n) & 0x3) << 5)\n#define TX_CONTROL_FRAME_TYPE(n)        (((n) & 0x7) << 2)\n#define TX_CONTROL_FRAME_TYPE_CABLE_RESET\t(0x1 << 2)\n#define TX_CONTROL_SEND_SIGNAL\t\tBIT(1)\n#define TX_CONTROL_SEND_MSG\t\tBIT(0)\n\n#define USB_PDPHY_RX_SIZE_REG\t\t0x48\n\n#define USB_PDPHY_RX_ACKNOWLEDGE_REG\t0x4B\n#define RX_BUFFER_TOKEN\t\t\tBIT(0)\n\n#define USB_PDPHY_BIST_MODE_REG\t\t0x4E\n#define BIST_MODE_MASK\t\t\t0xF\n#define BIST_ENABLE\t\t\tBIT(7)\n#define PD_MSG_BIST\t\t\t0x3\n#define PD_BIST_TEST_DATA_MODE\t\t0x8\n\n#define USB_PDPHY_TX_BUFFER_HDR_REG\t0x60\n#define USB_PDPHY_TX_BUFFER_DATA_REG\t0x62\n\n#define USB_PDPHY_RX_BUFFER_REG\t\t0x80\n\n \n#define VDD_PDPHY_VOL_MIN\t\t2800000\t \n#define VDD_PDPHY_VOL_MAX\t\t3300000\t \n#define VDD_PDPHY_HPM_LOAD\t\t3000\t \n\n \n#define PD_MSG_HDR_REV(hdr)\t\t(((hdr) >> 6) & 3)\n\n \n#define RECEIVER_RESPONSE_TIME\t\t15\t \n#define HARD_RESET_COMPLETE_TIME\t5\t \n\n \n#define PMIC_PDPHY_SIG_TX_IRQ\t\t0x0\n#define PMIC_PDPHY_SIG_RX_IRQ\t\t0x1\n#define PMIC_PDPHY_MSG_TX_IRQ\t\t0x2\n#define PMIC_PDPHY_MSG_RX_IRQ\t\t0x3\n#define PMIC_PDPHY_MSG_TX_FAIL_IRQ\t0x4\n#define PMIC_PDPHY_MSG_TX_DISCARD_IRQ\t0x5\n#define PMIC_PDPHY_MSG_RX_DISCARD_IRQ\t0x6\n#define PMIC_PDPHY_FR_SWAP_IRQ\t\t0x7\n\n \n#define PMIC_PDPHY_MAX_IRQS\t\t0x08\n\nstruct pmic_typec_pdphy_irq_params {\n\tint\t\t\t\tvirq;\n\tchar\t\t\t\t*irq_name;\n};\n\nstruct pmic_typec_pdphy_resources {\n\tunsigned int\t\t\t\tnr_irqs;\n\tstruct pmic_typec_pdphy_irq_params\tirq_params[PMIC_PDPHY_MAX_IRQS];\n};\n\n \nstruct pmic_typec_pdphy;\n\nstruct pmic_typec_pdphy *qcom_pmic_typec_pdphy_alloc(struct device *dev);\n\nint qcom_pmic_typec_pdphy_probe(struct platform_device *pdev,\n\t\t\t\tstruct pmic_typec_pdphy *pmic_typec_pdphy,\n\t\t\t\tstruct pmic_typec_pdphy_resources *res,\n\t\t\t\tstruct regmap *regmap,\n\t\t\t\tu32 base);\n\nint qcom_pmic_typec_pdphy_start(struct pmic_typec_pdphy *pmic_typec_pdphy,\n\t\t\t\tstruct tcpm_port *tcpm_port);\n\nvoid qcom_pmic_typec_pdphy_stop(struct pmic_typec_pdphy *pmic_typec_pdphy);\n\nint qcom_pmic_typec_pdphy_set_roles(struct pmic_typec_pdphy *pmic_typec_pdphy,\n\t\t\t\t    bool power_role_src, bool data_role_host);\n\nint qcom_pmic_typec_pdphy_set_pd_rx(struct pmic_typec_pdphy *pmic_typec_pdphy, bool on);\n\nint qcom_pmic_typec_pdphy_pd_transmit(struct pmic_typec_pdphy *pmic_typec_pdphy,\n\t\t\t\t      enum tcpm_transmit_type type,\n\t\t\t\t      const struct pd_message *msg,\n\t\t\t\t      unsigned int negotiated_rev);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}