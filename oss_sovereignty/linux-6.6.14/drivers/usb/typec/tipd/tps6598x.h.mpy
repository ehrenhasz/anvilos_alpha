{
  "module_name": "tps6598x.h",
  "hash_id": "25aaf3939511563651b7fe8b8341c8b75bbda0d3b75993914d93a15c415f9ad0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/typec/tipd/tps6598x.h",
  "human_readable_source": " \n \n\n#include <linux/bits.h>\n#include <linux/bitfield.h>\n\n#ifndef __TPS6598X_H__\n#define __TPS6598X_H__\n\n#define TPS_FIELD_GET(_mask, _reg) ((typeof(_mask))(((_reg) & (_mask)) >> __bf_shf(_mask)))\n\n \n#define TPS_STATUS_PLUG_PRESENT\t\tBIT(0)\n#define TPS_STATUS_PLUG_UPSIDE_DOWN\tBIT(4)\n#define TPS_STATUS_TO_UPSIDE_DOWN(s)\t(!!((s) & TPS_STATUS_PLUG_UPSIDE_DOWN))\n#define TPS_STATUS_PORTROLE\t\tBIT(5)\n#define TPS_STATUS_TO_TYPEC_PORTROLE(s) (!!((s) & TPS_STATUS_PORTROLE))\n#define TPS_STATUS_DATAROLE\t\tBIT(6)\n#define TPS_STATUS_TO_TYPEC_DATAROLE(s)\t(!!((s) & TPS_STATUS_DATAROLE))\n#define TPS_STATUS_VCONN\t\tBIT(7)\n#define TPS_STATUS_TO_TYPEC_VCONN(s)\t(!!((s) & TPS_STATUS_VCONN))\n#define TPS_STATUS_OVERCURRENT\t\tBIT(16)\n#define TPS_STATUS_GOTO_MIN_ACTIVE\tBIT(26)\n#define TPS_STATUS_BIST\t\t\tBIT(27)\n#define TPS_STATUS_HIGH_VOLAGE_WARNING\tBIT(28)\n#define TPS_STATUS_HIGH_LOW_VOLTAGE_WARNING BIT(29)\n\n#define TPS_STATUS_CONN_STATE_MASK\t\tGENMASK(3, 1)\n#define TPS_STATUS_CONN_STATE(x)\t\tTPS_FIELD_GET(TPS_STATUS_CONN_STATE_MASK, (x))\n#define TPS_STATUS_PP_5V0_SWITCH_MASK\t\tGENMASK(9, 8)\n#define TPS_STATUS_PP_5V0_SWITCH(x)\t\tTPS_FIELD_GET(TPS_STATUS_PP_5V0_SWITCH_MASK, (x))\n#define TPS_STATUS_PP_HV_SWITCH_MASK\t\tGENMASK(11, 10)\n#define TPS_STATUS_PP_HV_SWITCH(x)\t\tTPS_FIELD_GET(TPS_STATUS_PP_HV_SWITCH_MASK, (x))\n#define TPS_STATUS_PP_EXT_SWITCH_MASK\t\tGENMASK(13, 12)\n#define TPS_STATUS_PP_EXT_SWITCH(x)\t\tTPS_FIELD_GET(TPS_STATUS_PP_EXT_SWITCH_MASK, (x))\n#define TPS_STATUS_PP_CABLE_SWITCH_MASK\t\tGENMASK(15, 14)\n#define TPS_STATUS_PP_CABLE_SWITCH(x)\t\tTPS_FIELD_GET(TPS_STATUS_PP_CABLE_SWITCH_MASK, (x))\n#define TPS_STATUS_POWER_SOURCE_MASK\t\tGENMASK(19, 18)\n#define TPS_STATUS_POWER_SOURCE(x)\t\tTPS_FIELD_GET(TPS_STATUS_POWER_SOURCE_MASK, (x))\n#define TPS_STATUS_VBUS_STATUS_MASK\t\tGENMASK(21, 20)\n#define TPS_STATUS_VBUS_STATUS(x)\t\tTPS_FIELD_GET(TPS_STATUS_VBUS_STATUS_MASK, (x))\n#define TPS_STATUS_USB_HOST_PRESENT_MASK\tGENMASK(23, 22)\n#define TPS_STATUS_USB_HOST_PRESENT(x)\t\tTPS_FIELD_GET(TPS_STATUS_USB_HOST_PRESENT_MASK, (x))\n#define TPS_STATUS_LEGACY_MASK\t\t\tGENMASK(25, 24)\n#define TPS_STATUS_LEGACY(x)\t\t\tTPS_FIELD_GET(TPS_STATUS_LEGACY_MASK, (x))\n\n#define TPS_STATUS_CONN_STATE_NO_CONN\t\t0\n#define TPS_STATUS_CONN_STATE_DISABLED\t\t1\n#define TPS_STATUS_CONN_STATE_AUDIO_CONN\t2\n#define TPS_STATUS_CONN_STATE_DEBUG_CONN\t3\n#define TPS_STATUS_CONN_STATE_NO_CONN_R_A\t4\n#define TPS_STATUS_CONN_STATE_RESERVED\t\t5\n#define TPS_STATUS_CONN_STATE_CONN_NO_R_A\t6\n#define TPS_STATUS_CONN_STATE_CONN_WITH_R_A\t7\n\n#define TPS_STATUS_PP_SWITCH_STATE_DISABLED\t0\n#define TPS_STATUS_PP_SWITCH_STATE_FAULT\t1\n#define TPS_STATUS_PP_SWITCH_STATE_OUT\t\t2\n#define TPS_STATUS_PP_SWITCH_STATE_IN\t\t3\n\n#define TPS_STATUS_POWER_SOURCE_UNKNOWN\t\t0\n#define TPS_STATUS_POWER_SOURCE_VIN_3P3\t\t1\n#define TPS_STATUS_POWER_SOURCE_DEAD_BAT\t2\n#define TPS_STATUS_POWER_SOURCE_VBUS\t\t3\n\n#define TPS_STATUS_VBUS_STATUS_VSAFE0V\t\t0\n#define TPS_STATUS_VBUS_STATUS_VSAFE5V\t\t1\n#define TPS_STATUS_VBUS_STATUS_PD\t\t2\n#define TPS_STATUS_VBUS_STATUS_FAULT\t\t3\n\n#define TPS_STATUS_USB_HOST_PRESENT_NO\t\t0\n#define TPS_STATUS_USB_HOST_PRESENT_PD_NO_USB\t1\n#define TPS_STATUS_USB_HOST_PRESENT_NO_PD\t2\n#define TPS_STATUS_USB_HOST_PRESENT_PD_USB\t3\n\n#define TPS_STATUS_LEGACY_NO\t\t\t0\n#define TPS_STATUS_LEGACY_SINK\t\t\t1\n#define TPS_STATUS_LEGACY_SOURCE\t\t2\n\n \n#define TPS_REG_INT_USER_VID_ALT_MODE_OTHER_VDM\t\tBIT_ULL(27+32)\n#define TPS_REG_INT_USER_VID_ALT_MODE_ATTN_VDM\t\tBIT_ULL(26+32)\n#define TPS_REG_INT_USER_VID_ALT_MODE_EXIT\t\tBIT_ULL(25+32)\n#define TPS_REG_INT_USER_VID_ALT_MODE_ENTERED\t\tBIT_ULL(24+32)\n#define TPS_REG_INT_EXIT_MODES_COMPLETE\t\t\tBIT_ULL(20+32)\n#define TPS_REG_INT_DISCOVER_MODES_COMPLETE\t\tBIT_ULL(19+32)\n#define TPS_REG_INT_VDM_MSG_SENT\t\t\tBIT_ULL(18+32)\n#define TPS_REG_INT_VDM_ENTERED_MODE\t\t\tBIT_ULL(17+32)\n#define TPS_REG_INT_ERROR_UNABLE_TO_SOURCE\t\tBIT_ULL(14+32)\n#define TPS_REG_INT_SRC_TRANSITION\t\t\tBIT_ULL(10+32)\n#define TPS_REG_INT_ERROR_DISCHARGE_FAILED\t\tBIT_ULL(9+32)\n#define TPS_REG_INT_ERROR_MESSAGE_DATA\t\t\tBIT_ULL(7+32)\n#define TPS_REG_INT_ERROR_PROTOCOL_ERROR\t\tBIT_ULL(6+32)\n#define TPS_REG_INT_ERROR_MISSING_GET_CAP_MESSAGE\tBIT_ULL(4+32)\n#define TPS_REG_INT_ERROR_POWER_EVENT_OCCURRED\t\tBIT_ULL(3+32)\n#define TPS_REG_INT_ERROR_CAN_PROVIDE_PWR_LATER\t\tBIT_ULL(2+32)\n#define TPS_REG_INT_ERROR_CANNOT_PROVIDE_PWR\t\tBIT_ULL(1+32)\n#define TPS_REG_INT_ERROR_DEVICE_INCOMPATIBLE\t\tBIT_ULL(0+32)\n#define TPS_REG_INT_CMD2_COMPLETE\t\t\tBIT(31)\n#define TPS_REG_INT_CMD1_COMPLETE\t\t\tBIT(30)\n#define TPS_REG_INT_ADC_HIGH_THRESHOLD\t\t\tBIT(29)\n#define TPS_REG_INT_ADC_LOW_THRESHOLD\t\t\tBIT(28)\n#define TPS_REG_INT_PD_STATUS_UPDATE\t\t\tBIT(27)\n#define TPS_REG_INT_STATUS_UPDATE\t\t\tBIT(26)\n#define TPS_REG_INT_DATA_STATUS_UPDATE\t\t\tBIT(25)\n#define TPS_REG_INT_POWER_STATUS_UPDATE\t\t\tBIT(24)\n#define TPS_REG_INT_PP_SWITCH_CHANGED\t\t\tBIT(23)\n#define TPS_REG_INT_HIGH_VOLTAGE_WARNING\t\tBIT(22)\n#define TPS_REG_INT_USB_HOST_PRESENT_NO_LONGER\t\tBIT(21)\n#define TPS_REG_INT_USB_HOST_PRESENT\t\t\tBIT(20)\n#define TPS_REG_INT_GOTO_MIN_RECEIVED\t\t\tBIT(19)\n#define TPS_REG_INT_PR_SWAP_REQUESTED\t\t\tBIT(17)\n#define TPS_REG_INT_SINK_CAP_MESSAGE_READY\t\tBIT(15)\n#define TPS_REG_INT_SOURCE_CAP_MESSAGE_READY\t\tBIT(14)\n#define TPS_REG_INT_NEW_CONTRACT_AS_PROVIDER\t\tBIT(13)\n#define TPS_REG_INT_NEW_CONTRACT_AS_CONSUMER\t\tBIT(12)\n#define TPS_REG_INT_VDM_RECEIVED\t\t\tBIT(11)\n#define TPS_REG_INT_ATTENTION_RECEIVED\t\t\tBIT(10)\n#define TPS_REG_INT_OVERCURRENT\t\t\t\tBIT(9)\n#define TPS_REG_INT_BIST\t\t\t\tBIT(8)\n#define TPS_REG_INT_RDO_RECEIVED_FROM_SINK\t\tBIT(7)\n#define TPS_REG_INT_DR_SWAP_COMPLETE\t\t\tBIT(5)\n#define TPS_REG_INT_PR_SWAP_COMPLETE\t\t\tBIT(4)\n#define TPS_REG_INT_PLUG_EVENT\t\t\t\tBIT(3)\n#define TPS_REG_INT_HARD_RESET\t\t\t\tBIT(1)\n#define TPS_REG_INT_PD_SOFT_RESET\t\t\tBIT(0)\n\n \n#define APPLE_CD_REG_INT_DATA_STATUS_UPDATE\t\tBIT(10)\n#define APPLE_CD_REG_INT_POWER_STATUS_UPDATE\t\tBIT(9)\n#define APPLE_CD_REG_INT_STATUS_UPDATE\t\t\tBIT(8)\n#define APPLE_CD_REG_INT_PLUG_EVENT\t\t\tBIT(1)\n\n \n#define TPS_SYSTEM_POWER_STATE_S0\t0x00\n#define TPS_SYSTEM_POWER_STATE_S3\t0x03\n#define TPS_SYSTEM_POWER_STATE_S4\t0x04\n#define TPS_SYSTEM_POWER_STATE_S5\t0x05\n\n \n#define TPS_POWER_STATUS_CONNECTION(x)  TPS_FIELD_GET(BIT(0), (x))\n#define TPS_POWER_STATUS_SOURCESINK(x)\tTPS_FIELD_GET(BIT(1), (x))\n#define TPS_POWER_STATUS_BC12_DET(x)\tTPS_FIELD_GET(BIT(2), (x))\n\n#define TPS_POWER_STATUS_TYPEC_CURRENT_MASK GENMASK(3, 2)\n#define TPS_POWER_STATUS_PWROPMODE(p)\t    TPS_FIELD_GET(TPS_POWER_STATUS_TYPEC_CURRENT_MASK, (p))\n#define TPS_POWER_STATUS_BC12_STATUS_MASK   GENMASK(6, 5)\n#define TPS_POWER_STATUS_BC12_STATUS(p)\t    TPS_FIELD_GET(TPS_POWER_STATUS_BC12_STATUS_MASK, (p))\n\n#define TPS_POWER_STATUS_TYPEC_CURRENT_USB     0\n#define TPS_POWER_STATUS_TYPEC_CURRENT_1A5     1\n#define TPS_POWER_STATUS_TYPEC_CURRENT_3A0     2\n#define TPS_POWER_STATUS_TYPEC_CURRENT_PD      3\n\n#define TPS_POWER_STATUS_BC12_STATUS_SDP 0\n#define TPS_POWER_STATUS_BC12_STATUS_CDP 2\n#define TPS_POWER_STATUS_BC12_STATUS_DCP 3\n\n \n#define TPS_DATA_STATUS_DATA_CONNECTION\t     BIT(0)\n#define TPS_DATA_STATUS_UPSIDE_DOWN\t     BIT(1)\n#define TPS_DATA_STATUS_ACTIVE_CABLE\t     BIT(2)\n#define TPS_DATA_STATUS_USB2_CONNECTION\t     BIT(4)\n#define TPS_DATA_STATUS_USB3_CONNECTION\t     BIT(5)\n#define TPS_DATA_STATUS_USB3_GEN2\t     BIT(6)\n#define TPS_DATA_STATUS_USB_DATA_ROLE\t     BIT(7)\n#define TPS_DATA_STATUS_DP_CONNECTION\t     BIT(8)\n#define TPS_DATA_STATUS_DP_SINK\t\t     BIT(9)\n#define TPS_DATA_STATUS_TBT_CONNECTION\t     BIT(16)\n#define TPS_DATA_STATUS_TBT_TYPE\t     BIT(17)\n#define TPS_DATA_STATUS_OPTICAL_CABLE\t     BIT(18)\n#define TPS_DATA_STATUS_ACTIVE_LINK_TRAIN    BIT(20)\n#define TPS_DATA_STATUS_FORCE_LSX\t     BIT(23)\n#define TPS_DATA_STATUS_POWER_MISMATCH\t     BIT(24)\n\n#define TPS_DATA_STATUS_DP_PIN_ASSIGNMENT_MASK GENMASK(11, 10)\n#define TPS_DATA_STATUS_DP_PIN_ASSIGNMENT(x) \\\n\tTPS_FIELD_GET(TPS_DATA_STATUS_DP_PIN_ASSIGNMENT_MASK, (x))\n#define TPS_DATA_STATUS_TBT_CABLE_SPEED_MASK   GENMASK(27, 25)\n#define TPS_DATA_STATUS_TBT_CABLE_SPEED \\\n\tTPS_FIELD_GET(TPS_DATA_STATUS_TBT_CABLE_SPEED_MASK, (x))\n#define TPS_DATA_STATUS_TBT_CABLE_GEN_MASK     GENMASK(29, 28)\n#define TPS_DATA_STATUS_TBT_CABLE_GEN \\\n\tTPS_FIELD_GET(TPS_DATA_STATUS_TBT_CABLE_GEN_MASK, (x))\n\n \n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT(x) \\\n\t((TPS_DATA_STATUS_DP_PIN_ASSIGNMENT(x) << 1) | \\\n\t\tTPS_FIELD_GET(TPS_DATA_STATUS_USB3_CONNECTION, (x)))\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_E    0\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_F    BIT(0)\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_C    BIT(1)\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_D    (BIT(1) | BIT(0))\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_A    BIT(2)\n#define TPS_DATA_STATUS_DP_SPEC_PIN_ASSIGNMENT_B    (BIT(2) | BIT(1))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}