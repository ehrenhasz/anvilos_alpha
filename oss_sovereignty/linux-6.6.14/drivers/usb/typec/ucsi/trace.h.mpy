{
  "module_name": "trace.h",
  "hash_id": "45e6b2ceb38cf358ca51420aee4c942950dc6c4ce10dbee74d7199743fe5e2e7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/usb/typec/ucsi/trace.h",
  "human_readable_source": " \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ucsi\n\n#if !defined(__UCSI_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __UCSI_TRACE_H\n\n#include <linux/tracepoint.h>\n#include <linux/usb/typec_altmode.h>\n\nconst char *ucsi_cmd_str(u64 raw_cmd);\nconst char *ucsi_cci_str(u32 cci);\nconst char *ucsi_recipient_str(u8 recipient);\n\nDECLARE_EVENT_CLASS(ucsi_log_command,\n\tTP_PROTO(u64 command, int ret),\n\tTP_ARGS(command, ret),\n\tTP_STRUCT__entry(\n\t\t__field(u64, ctrl)\n\t\t__field(int, ret)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ctrl = command;\n\t\t__entry->ret = ret;\n\t),\n\tTP_printk(\"%s -> %s (err=%d)\", ucsi_cmd_str(__entry->ctrl),\n\t\t__entry->ret < 0 ? \"FAIL\" : \"OK\",\n\t\t__entry->ret < 0 ? __entry->ret : 0)\n);\n\nDEFINE_EVENT(ucsi_log_command, ucsi_run_command,\n\tTP_PROTO(u64 command, int ret),\n\tTP_ARGS(command, ret)\n);\n\nDEFINE_EVENT(ucsi_log_command, ucsi_reset_ppm,\n\tTP_PROTO(u64 command, int ret),\n\tTP_ARGS(command, ret)\n);\n\nDECLARE_EVENT_CLASS(ucsi_log_connector_status,\n\tTP_PROTO(int port, struct ucsi_connector_status *status),\n\tTP_ARGS(port, status),\n\tTP_STRUCT__entry(\n\t\t__field(int, port)\n\t\t__field(u16, change)\n\t\t__field(u8, opmode)\n\t\t__field(u8, connected)\n\t\t__field(u8, pwr_dir)\n\t\t__field(u8, partner_flags)\n\t\t__field(u8, partner_type)\n\t\t__field(u32, request_data_obj)\n\t\t__field(u8, bc_status)\n\t),\n\tTP_fast_assign(\n\t\t__entry->port = port - 1;\n\t\t__entry->change = status->change;\n\t\t__entry->opmode = UCSI_CONSTAT_PWR_OPMODE(status->flags);\n\t\t__entry->connected = !!(status->flags & UCSI_CONSTAT_CONNECTED);\n\t\t__entry->pwr_dir = !!(status->flags & UCSI_CONSTAT_PWR_DIR);\n\t\t__entry->partner_flags = UCSI_CONSTAT_PARTNER_FLAGS(status->flags);\n\t\t__entry->partner_type = UCSI_CONSTAT_PARTNER_TYPE(status->flags);\n\t\t__entry->request_data_obj = status->request_data_obj;\n\t\t__entry->bc_status = UCSI_CONSTAT_BC_STATUS(status->pwr_status);\n\t),\n\tTP_printk(\"port%d status: change=%04x, opmode=%x, connected=%d, \"\n\t\t\"sourcing=%d, partner_flags=%x, partner_type=%x, \"\n\t\t\"request_data_obj=%08x, BC status=%x\", __entry->port,\n\t\t__entry->change, __entry->opmode, __entry->connected,\n\t\t__entry->pwr_dir, __entry->partner_flags, __entry->partner_type,\n\t\t__entry->request_data_obj, __entry->bc_status)\n);\n\nDEFINE_EVENT(ucsi_log_connector_status, ucsi_connector_change,\n\tTP_PROTO(int port, struct ucsi_connector_status *status),\n\tTP_ARGS(port, status)\n);\n\nDEFINE_EVENT(ucsi_log_connector_status, ucsi_register_port,\n\tTP_PROTO(int port, struct ucsi_connector_status *status),\n\tTP_ARGS(port, status)\n);\n\nDECLARE_EVENT_CLASS(ucsi_log_register_altmode,\n\tTP_PROTO(u8 recipient, struct typec_altmode *alt),\n\tTP_ARGS(recipient, alt),\n\tTP_STRUCT__entry(\n\t\t__field(u8, recipient)\n\t\t__field(u16, svid)\n\t\t__field(u8, mode)\n\t\t__field(u32, vdo)\n\t),\n\tTP_fast_assign(\n\t\t__entry->recipient = recipient;\n\t\t__entry->svid = alt->svid;\n\t\t__entry->mode = alt->mode;\n\t\t__entry->vdo = alt->vdo;\n\t),\n\tTP_printk(\"%s alt mode: svid %04x, mode %d vdo %x\",\n\t\t  ucsi_recipient_str(__entry->recipient), __entry->svid,\n\t\t  __entry->mode, __entry->vdo)\n);\n\nDEFINE_EVENT(ucsi_log_register_altmode, ucsi_register_altmode,\n\tTP_PROTO(u8 recipient, struct typec_altmode *alt),\n\tTP_ARGS(recipient, alt)\n);\n\n#endif  \n\n \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}