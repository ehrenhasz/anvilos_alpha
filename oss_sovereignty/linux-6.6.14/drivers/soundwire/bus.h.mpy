{
  "module_name": "bus.h",
  "hash_id": "34ffde736bb085bb3e48a272b86822e2a45a67e036adb79a7f46a18b16556075",
  "original_prompt": "Ingested from linux-6.6.14/drivers/soundwire/bus.h",
  "human_readable_source": " \n \n\n#ifndef __SDW_BUS_H\n#define __SDW_BUS_H\n\n#define DEFAULT_BANK_SWITCH_TIMEOUT 3000\n#define DEFAULT_PROBE_TIMEOUT       2000\n\nu64 sdw_dmi_override_adr(struct sdw_bus *bus, u64 addr);\n\n#if IS_ENABLED(CONFIG_ACPI)\nint sdw_acpi_find_slaves(struct sdw_bus *bus);\n#else\nstatic inline int sdw_acpi_find_slaves(struct sdw_bus *bus)\n{\n\treturn -ENOTSUPP;\n}\n#endif\n\nint sdw_of_find_slaves(struct sdw_bus *bus);\nvoid sdw_extract_slave_id(struct sdw_bus *bus,\n\t\t\t  u64 addr, struct sdw_slave_id *id);\nint sdw_slave_add(struct sdw_bus *bus, struct sdw_slave_id *id,\n\t\t  struct fwnode_handle *fwnode);\nint sdw_master_device_add(struct sdw_bus *bus, struct device *parent,\n\t\t\t  struct fwnode_handle *fwnode);\nint sdw_master_device_del(struct sdw_bus *bus);\n\n#ifdef CONFIG_DEBUG_FS\nvoid sdw_bus_debugfs_init(struct sdw_bus *bus);\nvoid sdw_bus_debugfs_exit(struct sdw_bus *bus);\nvoid sdw_slave_debugfs_init(struct sdw_slave *slave);\nvoid sdw_slave_debugfs_exit(struct sdw_slave *slave);\nvoid sdw_debugfs_init(void);\nvoid sdw_debugfs_exit(void);\n#else\nstatic inline void sdw_bus_debugfs_init(struct sdw_bus *bus) {}\nstatic inline void sdw_bus_debugfs_exit(struct sdw_bus *bus) {}\nstatic inline void sdw_slave_debugfs_init(struct sdw_slave *slave) {}\nstatic inline void sdw_slave_debugfs_exit(struct sdw_slave *slave) {}\nstatic inline void sdw_debugfs_init(void) {}\nstatic inline void sdw_debugfs_exit(void) {}\n#endif\n\nenum {\n\tSDW_MSG_FLAG_READ = 0,\n\tSDW_MSG_FLAG_WRITE,\n};\n\n \nstruct sdw_msg {\n\tu16 addr;\n\tu16 len;\n\tu8 dev_num;\n\tu8 addr_page1;\n\tu8 addr_page2;\n\tu8 flags;\n\tu8 *buf;\n\tbool ssp_sync;\n\tbool page;\n};\n\n#define SDW_DOUBLE_RATE_FACTOR\t\t2\n#define SDW_STRM_RATE_GROUPING\t\t1\n\nextern int sdw_rows[SDW_FRAME_ROWS];\nextern int sdw_cols[SDW_FRAME_COLS];\n\nint sdw_find_row_index(int row);\nint sdw_find_col_index(int col);\n\n \nstruct sdw_port_runtime {\n\tint num;\n\tint ch_mask;\n\tstruct sdw_transport_params transport_params;\n\tstruct sdw_port_params port_params;\n\tstruct list_head port_node;\n};\n\n \nstruct sdw_slave_runtime {\n\tstruct sdw_slave *slave;\n\tenum sdw_data_direction direction;\n\tunsigned int ch_count;\n\tstruct list_head m_rt_node;\n\tstruct list_head port_list;\n};\n\n \nstruct sdw_master_runtime {\n\tstruct sdw_bus *bus;\n\tstruct sdw_stream_runtime *stream;\n\tenum sdw_data_direction direction;\n\tunsigned int ch_count;\n\tstruct list_head slave_rt_list;\n\tstruct list_head port_list;\n\tstruct list_head stream_node;\n\tstruct list_head bus_node;\n};\n\nstruct sdw_transport_data {\n\tint hstart;\n\tint hstop;\n\tint block_offset;\n\tint sub_block_offset;\n};\n\nstruct sdw_dpn_prop *sdw_get_slave_dpn_prop(struct sdw_slave *slave,\n\t\t\t\t\t    enum sdw_data_direction direction,\n\t\t\t\t\t    unsigned int port_num);\nint sdw_configure_dpn_intr(struct sdw_slave *slave, int port,\n\t\t\t   bool enable, int mask);\n\nint sdw_transfer(struct sdw_bus *bus, struct sdw_msg *msg);\nint sdw_transfer_defer(struct sdw_bus *bus, struct sdw_msg *msg);\n\n#define SDW_READ_INTR_CLEAR_RETRY\t10\n\nint sdw_fill_msg(struct sdw_msg *msg, struct sdw_slave *slave,\n\t\t u32 addr, size_t count, u16 dev_num, u8 flags, u8 *buf);\n\n \nstatic inline void sdw_fill_xport_params(struct sdw_transport_params *params,\n\t\t\t\t\t int port_num, bool grp_ctrl_valid,\n\t\t\t\t\t int grp_ctrl, int sample_int,\n\t\t\t\t\t int off1, int off2,\n\t\t\t\t\t int hstart, int hstop,\n\t\t\t\t\t int pack_mode, int lane_ctrl)\n{\n\tparams->port_num = port_num;\n\tparams->blk_grp_ctrl_valid = grp_ctrl_valid;\n\tparams->blk_grp_ctrl = grp_ctrl;\n\tparams->sample_interval = sample_int;\n\tparams->offset1 = off1;\n\tparams->offset2 = off2;\n\tparams->hstart = hstart;\n\tparams->hstop = hstop;\n\tparams->blk_pkg_mode = pack_mode;\n\tparams->lane_ctrl = lane_ctrl;\n}\n\n \nstatic inline void sdw_fill_port_params(struct sdw_port_params *params,\n\t\t\t\t\tint port_num, int bps,\n\t\t\t\t\tint flow_mode, int data_mode)\n{\n\tparams->num = port_num;\n\tparams->bps = bps;\n\tparams->flow_mode = flow_mode;\n\tparams->data_mode = data_mode;\n}\n\n \nint sdw_bread_no_pm_unlocked(struct sdw_bus *bus, u16 dev_num, u32 addr);\nint sdw_bwrite_no_pm_unlocked(struct sdw_bus *bus, u16 dev_num, u32 addr, u8 value);\n\n \n#define SDW_UNATTACH_REQUEST_MASTER_RESET\tBIT(0)\n\nvoid sdw_clear_slave_status(struct sdw_bus *bus, u32 request);\nint sdw_slave_modalias(const struct sdw_slave *slave, char *buf, size_t size);\nvoid sdw_compute_slave_ports(struct sdw_master_runtime *m_rt,\n\t\t\t     struct sdw_transport_data *t_data);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}