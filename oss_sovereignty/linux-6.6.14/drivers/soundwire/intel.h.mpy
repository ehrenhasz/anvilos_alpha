{
  "module_name": "intel.h",
  "hash_id": "14fea2d69f11da0246134d125c5e2816285a388f4fa5dbb431b6e45acb40cc5d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/soundwire/intel.h",
  "human_readable_source": " \n \n\n#ifndef __SDW_INTEL_LOCAL_H\n#define __SDW_INTEL_LOCAL_H\n\nstruct hdac_bus;\n\n \nstruct sdw_intel_link_res {\n\tconst struct sdw_intel_hw_ops *hw_ops;\n\n\tvoid __iomem *mmio_base;  \n\tvoid __iomem *registers;\n\tu32 ip_offset;\n\tvoid __iomem *shim;\n\tvoid __iomem *shim_vs;\n\tvoid __iomem *alh;\n\tint irq;\n\tconst struct sdw_intel_ops *ops;\n\tstruct device *dev;\n\tstruct mutex *shim_lock;  \n\tu32 *shim_mask;\n\tu32 clock_stop_quirks;\n\tu32 link_mask;\n\tstruct sdw_cdns *cdns;\n\tstruct list_head list;\n\tstruct hdac_bus *hbus;\n};\n\nstruct sdw_intel {\n\tstruct sdw_cdns cdns;\n\tint instance;\n\tstruct sdw_intel_link_res *link_res;\n\tbool startup_done;\n#ifdef CONFIG_DEBUG_FS\n\tstruct dentry *debugfs;\n#endif\n};\n\nenum intel_pdi_type {\n\tINTEL_PDI_IN = 0,\n\tINTEL_PDI_OUT = 1,\n\tINTEL_PDI_BD = 2,\n};\n\n \nstatic inline int intel_readl(void __iomem *base, int offset)\n{\n\treturn readl(base + offset);\n}\n\nstatic inline void intel_writel(void __iomem *base, int offset, int value)\n{\n\twritel(value, base + offset);\n}\n\nstatic inline u16 intel_readw(void __iomem *base, int offset)\n{\n\treturn readw(base + offset);\n}\n\nstatic inline void intel_writew(void __iomem *base, int offset, u16 value)\n{\n\twritew(value, base + offset);\n}\n\n#define cdns_to_intel(_cdns) container_of(_cdns, struct sdw_intel, cdns)\n\n#define INTEL_MASTER_RESET_ITERATIONS\t10\n\n#define SDW_INTEL_CHECK_OPS(sdw, cb)\t((sdw) && (sdw)->link_res && (sdw)->link_res->hw_ops && \\\n\t\t\t\t\t (sdw)->link_res->hw_ops->cb)\n#define SDW_INTEL_OPS(sdw, cb)\t\t((sdw)->link_res->hw_ops->cb)\n\n#ifdef CONFIG_DEBUG_FS\nvoid intel_ace2x_debugfs_init(struct sdw_intel *sdw);\nvoid intel_ace2x_debugfs_exit(struct sdw_intel *sdw);\n#else\nstatic inline void intel_ace2x_debugfs_init(struct sdw_intel *sdw) {}\nstatic inline void intel_ace2x_debugfs_exit(struct sdw_intel *sdw) {}\n#endif\n\nstatic inline void sdw_intel_debugfs_init(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, debugfs_init))\n\t\tSDW_INTEL_OPS(sdw, debugfs_init)(sdw);\n}\n\nstatic inline void sdw_intel_debugfs_exit(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, debugfs_exit))\n\t\tSDW_INTEL_OPS(sdw, debugfs_exit)(sdw);\n}\n\nstatic inline int sdw_intel_register_dai(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, register_dai))\n\t\treturn SDW_INTEL_OPS(sdw, register_dai)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline void sdw_intel_check_clock_stop(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, check_clock_stop))\n\t\tSDW_INTEL_OPS(sdw, check_clock_stop)(sdw);\n}\n\nstatic inline int sdw_intel_start_bus(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, start_bus))\n\t\treturn SDW_INTEL_OPS(sdw, start_bus)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_start_bus_after_reset(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, start_bus_after_reset))\n\t\treturn SDW_INTEL_OPS(sdw, start_bus_after_reset)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_start_bus_after_clock_stop(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, start_bus_after_clock_stop))\n\t\treturn SDW_INTEL_OPS(sdw, start_bus_after_clock_stop)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_stop_bus(struct sdw_intel *sdw, bool clock_stop)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, stop_bus))\n\t\treturn SDW_INTEL_OPS(sdw, stop_bus)(sdw, clock_stop);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_link_power_up(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, link_power_up))\n\t\treturn SDW_INTEL_OPS(sdw, link_power_up)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_link_power_down(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, link_power_down))\n\t\treturn SDW_INTEL_OPS(sdw, link_power_down)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_shim_check_wake(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, shim_check_wake))\n\t\treturn SDW_INTEL_OPS(sdw, shim_check_wake)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline void sdw_intel_shim_wake(struct sdw_intel *sdw, bool wake_enable)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, shim_wake))\n\t\tSDW_INTEL_OPS(sdw, shim_wake)(sdw, wake_enable);\n}\n\nstatic inline void sdw_intel_sync_arm(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, sync_arm))\n\t\tSDW_INTEL_OPS(sdw, sync_arm)(sdw);\n}\n\nstatic inline int sdw_intel_sync_go_unlocked(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, sync_go_unlocked))\n\t\treturn SDW_INTEL_OPS(sdw, sync_go_unlocked)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline int sdw_intel_sync_go(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, sync_go))\n\t\treturn SDW_INTEL_OPS(sdw, sync_go)(sdw);\n\treturn -ENOTSUPP;\n}\n\nstatic inline bool sdw_intel_sync_check_cmdsync_unlocked(struct sdw_intel *sdw)\n{\n\tif (SDW_INTEL_CHECK_OPS(sdw, sync_check_cmdsync_unlocked))\n\t\treturn SDW_INTEL_OPS(sdw, sync_check_cmdsync_unlocked)(sdw);\n\treturn false;\n}\n\n \nint intel_start_bus(struct sdw_intel *sdw);\nint intel_start_bus_after_reset(struct sdw_intel *sdw);\nvoid intel_check_clock_stop(struct sdw_intel *sdw);\nint intel_start_bus_after_clock_stop(struct sdw_intel *sdw);\nint intel_stop_bus(struct sdw_intel *sdw, bool clock_stop);\n\n \nint intel_pre_bank_switch(struct sdw_intel *sdw);\nint intel_post_bank_switch(struct sdw_intel *sdw);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}