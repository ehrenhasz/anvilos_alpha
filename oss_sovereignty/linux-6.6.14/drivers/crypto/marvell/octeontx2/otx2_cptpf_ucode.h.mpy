{
  "module_name": "otx2_cptpf_ucode.h",
  "hash_id": "37a5ce53dc33869091074b3143a9711af928664c7271d8006b7f2c4ce1d39598",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.h",
  "human_readable_source": " \n\n#ifndef __OTX2_CPTPF_UCODE_H\n#define __OTX2_CPTPF_UCODE_H\n\n#include <linux/pci.h>\n#include <linux/types.h>\n#include <linux/module.h>\n#include \"otx2_cpt_hw_types.h\"\n#include \"otx2_cpt_common.h\"\n\n \n#define OTX2_CPT_MAX_ETYPES_PER_GRP 2\n\n \n#define OTX2_CPT_UCODE_SIGN_LEN     256\n\n \n#define OTX2_CPT_UCODE_VER_STR_SZ   44\n\n \n#define OTX2_CPT_MAX_ENGINES        144\n\n#define OTX2_CPT_ENGS_BITMASK_LEN   BITS_TO_LONGS(OTX2_CPT_MAX_ENGINES)\n\n#define OTX2_CPT_UCODE_SZ           (64 * 1024)\n\n \nenum otx2_cpt_ucode_type {\n\tOTX2_CPT_AE_UC_TYPE = 1,   \n\tOTX2_CPT_SE_UC_TYPE1 = 20, \n\tOTX2_CPT_SE_UC_TYPE2 = 21, \n\tOTX2_CPT_SE_UC_TYPE3 = 22, \n\tOTX2_CPT_IE_UC_TYPE1 = 30,  \n\tOTX2_CPT_IE_UC_TYPE2 = 31,  \n\tOTX2_CPT_IE_UC_TYPE3 = 32,  \n};\n\nstruct otx2_cpt_bitmap {\n\tunsigned long bits[OTX2_CPT_ENGS_BITMASK_LEN];\n\tint size;\n};\n\nstruct otx2_cpt_engines {\n\tint type;\n\tint count;\n};\n\n \nstruct otx2_cpt_ucode_ver_num {\n\tu8 nn;\n\tu8 xx;\n\tu8 yy;\n\tu8 zz;\n};\n\nstruct otx2_cpt_ucode_hdr {\n\tstruct otx2_cpt_ucode_ver_num ver_num;\n\tu8 ver_str[OTX2_CPT_UCODE_VER_STR_SZ];\n\t__be32 code_length;\n\tu32 padding[3];\n};\n\nstruct otx2_cpt_ucode {\n\tu8 ver_str[OTX2_CPT_UCODE_VER_STR_SZ]; \n\tstruct otx2_cpt_ucode_ver_num ver_num; \n\tchar filename[OTX2_CPT_NAME_LENGTH]; \n\tdma_addr_t dma;\t\t \n\tvoid *va;\t\t \n\tu32 size;\t\t \n\tint type;\t\t \n};\n\nstruct otx2_cpt_uc_info_t {\n\tstruct list_head list;\n\tstruct otx2_cpt_ucode ucode; \n\tconst struct firmware *fw;\n};\n\n \nstruct otx2_cpt_engs_available {\n\tint max_se_cnt;\n\tint max_ie_cnt;\n\tint max_ae_cnt;\n\tint se_cnt;\n\tint ie_cnt;\n\tint ae_cnt;\n};\n\n \nstruct otx2_cpt_engs_rsvd {\n\tint type;\t \n\tint count;\t \n\tint offset;      \n\tunsigned long *bmap;\t\t \n\tstruct otx2_cpt_ucode *ucode;\t \n};\n\nstruct otx2_cpt_mirror_info {\n\tint is_ena;\t \n\tint idx;\t \n\tint ref_count;\t \n};\n\nstruct otx2_cpt_eng_grp_info {\n\tstruct otx2_cpt_eng_grps *g;  \n\t \n\tstruct otx2_cpt_engs_rsvd engs[OTX2_CPT_MAX_ETYPES_PER_GRP];\n\t \n\tstruct otx2_cpt_ucode ucode[OTX2_CPT_MAX_ETYPES_PER_GRP];\n\t \n\tstruct otx2_cpt_mirror_info mirror;\n\tint idx;\t  \n\tbool is_enabled;  \n};\n\nstruct otx2_cpt_eng_grps {\n\tstruct mutex lock;\n\tstruct otx2_cpt_eng_grp_info grp[OTX2_CPT_MAX_ENGINE_GROUPS];\n\tstruct otx2_cpt_engs_available avail;\n\tvoid *obj;\t\t\t \n\tint engs_num;\t\t\t \n\tu8 eng_ref_cnt[OTX2_CPT_MAX_ENGINES]; \n\tbool is_grps_created;  \n};\nstruct otx2_cptpf_dev;\nint otx2_cpt_init_eng_grps(struct pci_dev *pdev,\n\t\t\t   struct otx2_cpt_eng_grps *eng_grps);\nvoid otx2_cpt_cleanup_eng_grps(struct pci_dev *pdev,\n\t\t\t       struct otx2_cpt_eng_grps *eng_grps);\nint otx2_cpt_create_eng_grps(struct otx2_cptpf_dev *cptpf,\n\t\t\t     struct otx2_cpt_eng_grps *eng_grps);\nint otx2_cpt_disable_all_cores(struct otx2_cptpf_dev *cptpf);\nint otx2_cpt_get_eng_grp(struct otx2_cpt_eng_grps *eng_grps, int eng_type);\nint otx2_cpt_discover_eng_capabilities(struct otx2_cptpf_dev *cptpf);\nint otx2_cpt_dl_custom_egrp_create(struct otx2_cptpf_dev *cptpf,\n\t\t\t\t   struct devlink_param_gset_ctx *ctx);\nint otx2_cpt_dl_custom_egrp_delete(struct otx2_cptpf_dev *cptpf,\n\t\t\t\t   struct devlink_param_gset_ctx *ctx);\nvoid otx2_cpt_print_uc_dbg_info(struct otx2_cptpf_dev *cptpf);\nstruct otx2_cpt_engs_rsvd *find_engines_by_type(\n\t\t\t\t\tstruct otx2_cpt_eng_grp_info *eng_grp,\n\t\t\t\t\tint eng_type);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}