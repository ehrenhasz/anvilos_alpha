{
  "module_name": "otx2_cpt_common.h",
  "hash_id": "c99093a5a6921bca4fbebca68ea3d40b9b27b206b38fe3e157e8f0bb2499dc36",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/marvell/octeontx2/otx2_cpt_common.h",
  "human_readable_source": " \n\n#ifndef __OTX2_CPT_COMMON_H\n#define __OTX2_CPT_COMMON_H\n\n#include <linux/pci.h>\n#include <linux/types.h>\n#include <linux/module.h>\n#include <linux/delay.h>\n#include <linux/crypto.h>\n#include <net/devlink.h>\n#include \"otx2_cpt_hw_types.h\"\n#include \"rvu.h\"\n#include \"mbox.h\"\n\n#define OTX2_CPT_MAX_VFS_NUM 128\n#define OTX2_CPT_RVU_FUNC_ADDR_S(blk, slot, offs) \\\n\t\t(((blk) << 20) | ((slot) << 12) | (offs))\n#define OTX2_CPT_RVU_PFFUNC(pf, func)\t\\\n\t\t((((pf) & RVU_PFVF_PF_MASK) << RVU_PFVF_PF_SHIFT) | \\\n\t\t(((func) & RVU_PFVF_FUNC_MASK) << RVU_PFVF_FUNC_SHIFT))\n\n#define OTX2_CPT_INVALID_CRYPTO_ENG_GRP 0xFF\n#define OTX2_CPT_NAME_LENGTH 64\n#define OTX2_CPT_DMA_MINALIGN 128\n\n \n#define CN10K_MBOX  0\n#define CN10K_LMTST 1\n\n#define BAD_OTX2_CPT_ENG_TYPE OTX2_CPT_MAX_ENG_TYPES\n\nenum otx2_cpt_eng_type {\n\tOTX2_CPT_AE_TYPES = 1,\n\tOTX2_CPT_SE_TYPES = 2,\n\tOTX2_CPT_IE_TYPES = 3,\n\tOTX2_CPT_MAX_ENG_TYPES,\n};\n\n \n#define MBOX_MSG_RX_INLINE_IPSEC_LF_CFG 0xBFE\n#define MBOX_MSG_GET_ENG_GRP_NUM        0xBFF\n#define MBOX_MSG_GET_CAPS               0xBFD\n#define MBOX_MSG_GET_KVF_LIMITS         0xBFC\n\n \nstruct otx2_cpt_rx_inline_lf_cfg {\n\tstruct mbox_msghdr hdr;\n\tu16 sso_pf_func;\n\tu16 param1;\n\tu16 param2;\n\tu16 opcode;\n\tu32 credit;\n\tu32 reserved;\n};\n\n \nstruct otx2_cpt_egrp_num_msg {\n\tstruct mbox_msghdr hdr;\n\tu8 eng_type;\n};\n\nstruct otx2_cpt_egrp_num_rsp {\n\tstruct mbox_msghdr hdr;\n\tu8 eng_type;\n\tu8 eng_grp_num;\n};\n\n \nstruct otx2_cpt_kvf_limits_msg {\n\tstruct mbox_msghdr hdr;\n};\n\nstruct otx2_cpt_kvf_limits_rsp {\n\tstruct mbox_msghdr hdr;\n\tu8 kvf_limits;\n};\n\n \nunion otx2_cpt_eng_caps {\n\tu64 u;\n\tstruct {\n\t\tu64 reserved_0_4:5;\n\t\tu64 mul:1;\n\t\tu64 sha1_sha2:1;\n\t\tu64 chacha20:1;\n\t\tu64 zuc_snow3g:1;\n\t\tu64 sha3:1;\n\t\tu64 aes:1;\n\t\tu64 kasumi:1;\n\t\tu64 des:1;\n\t\tu64 crc:1;\n\t\tu64 reserved_14_63:50;\n\t};\n};\n\n \nstruct otx2_cpt_caps_msg {\n\tstruct mbox_msghdr hdr;\n};\n\nstruct otx2_cpt_caps_rsp {\n\tstruct mbox_msghdr hdr;\n\tu16 cpt_pf_drv_version;\n\tu8 cpt_revision;\n\tunion otx2_cpt_eng_caps eng_caps[OTX2_CPT_MAX_ENG_TYPES];\n};\n\nstatic inline void otx2_cpt_write64(void __iomem *reg_base, u64 blk, u64 slot,\n\t\t\t\t    u64 offs, u64 val)\n{\n\twriteq_relaxed(val, reg_base +\n\t\t       OTX2_CPT_RVU_FUNC_ADDR_S(blk, slot, offs));\n}\n\nstatic inline u64 otx2_cpt_read64(void __iomem *reg_base, u64 blk, u64 slot,\n\t\t\t\t  u64 offs)\n{\n\treturn readq_relaxed(reg_base +\n\t\t\t     OTX2_CPT_RVU_FUNC_ADDR_S(blk, slot, offs));\n}\n\nstatic inline bool is_dev_otx2(struct pci_dev *pdev)\n{\n\tif (pdev->device == OTX2_CPT_PCI_PF_DEVICE_ID ||\n\t    pdev->device == OTX2_CPT_PCI_VF_DEVICE_ID)\n\t\treturn true;\n\n\treturn false;\n}\n\nstatic inline void otx2_cpt_set_hw_caps(struct pci_dev *pdev,\n\t\t\t\t\tunsigned long *cap_flag)\n{\n\tif (!is_dev_otx2(pdev)) {\n\t\t__set_bit(CN10K_MBOX, cap_flag);\n\t\t__set_bit(CN10K_LMTST, cap_flag);\n\t}\n}\n\n\nint otx2_cpt_send_ready_msg(struct otx2_mbox *mbox, struct pci_dev *pdev);\nint otx2_cpt_send_mbox_msg(struct otx2_mbox *mbox, struct pci_dev *pdev);\n\nint otx2_cpt_send_af_reg_requests(struct otx2_mbox *mbox,\n\t\t\t\t  struct pci_dev *pdev);\nint otx2_cpt_add_write_af_reg(struct otx2_mbox *mbox, struct pci_dev *pdev,\n\t\t\t      u64 reg, u64 val, int blkaddr);\nint otx2_cpt_read_af_reg(struct otx2_mbox *mbox, struct pci_dev *pdev,\n\t\t\t u64 reg, u64 *val, int blkaddr);\nint otx2_cpt_write_af_reg(struct otx2_mbox *mbox, struct pci_dev *pdev,\n\t\t\t  u64 reg, u64 val, int blkaddr);\nstruct otx2_cptlfs_info;\nint otx2_cpt_attach_rscrs_msg(struct otx2_cptlfs_info *lfs);\nint otx2_cpt_detach_rsrcs_msg(struct otx2_cptlfs_info *lfs);\nint otx2_cpt_msix_offset_msg(struct otx2_cptlfs_info *lfs);\nint otx2_cpt_sync_mbox_msg(struct otx2_mbox *mbox);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}