{
  "module_name": "cptvf.h",
  "hash_id": "dfd92906cb032a7e4a42920a6b86a434325065f117c9b1df85a08fb941849939",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/cavium/cpt/cptvf.h",
  "human_readable_source": " \n \n\n#ifndef __CPTVF_H\n#define __CPTVF_H\n\n#include <linux/list.h>\n#include \"cpt_common.h\"\n\n \n#define CPT_CMD_QLEN 2046\n#define CPT_CMD_QCHUNK_SIZE 1023\n\n \n#define CPT_COMMAND_TIMEOUT 4\n#define CPT_TIMER_THOLD\t0xFFFF\n#define CPT_NUM_QS_PER_VF 1\n#define CPT_INST_SIZE 64\n#define CPT_NEXT_CHUNK_PTR_SIZE 8\n\n#define\tCPT_VF_MSIX_VECTORS 2\n#define CPT_VF_INTR_MBOX_MASK BIT(0)\n#define CPT_VF_INTR_DOVF_MASK BIT(1)\n#define CPT_VF_INTR_IRDE_MASK BIT(2)\n#define CPT_VF_INTR_NWRP_MASK BIT(3)\n#define CPT_VF_INTR_SERR_MASK BIT(4)\n#define DMA_DIRECT_DIRECT 0  \n#define DMA_GATHER_SCATTER 1\n#define FROM_DPTR 1\n\n \nenum cpt_vf_int_vec_e {\n\tCPT_VF_INT_VEC_E_MISC = 0x00,\n\tCPT_VF_INT_VEC_E_DONE = 0x01\n};\n\nstruct command_chunk {\n\tu8 *head;\n\tdma_addr_t dma_addr;\n\tu32 size;  \n\tstruct hlist_node nextchunk;\n};\n\nstruct command_queue {\n\tspinlock_t lock;  \n\tu32 idx;  \n\tu32 nchunks;  \n\tstruct command_chunk *qhead;\t \n\tstruct hlist_head chead;\n};\n\nstruct command_qinfo {\n\tu32 cmd_size;\n\tu32 qchunksize;  \n\tstruct command_queue queue[CPT_NUM_QS_PER_VF];\n};\n\nstruct pending_entry {\n\tu8 busy;  \n\n\tvolatile u64 *completion_addr;  \n\tvoid *post_arg;\n\tvoid (*callback)(int, void *);  \n\tvoid *callback_arg;  \n};\n\nstruct pending_queue {\n\tstruct pending_entry *head;\t \n\tu32 front;  \n\tu32 rear;  \n\tatomic64_t pending_count;\n\tspinlock_t lock;  \n};\n\nstruct pending_qinfo {\n\tu32 nr_queues;\t \n\tu32 qlen;  \n\tstruct pending_queue queue[CPT_NUM_QS_PER_VF];\n};\n\n#define for_each_pending_queue(qinfo, q, i)\t\\\n\tfor (i = 0, q = &qinfo->queue[i]; i < qinfo->nr_queues; i++, \\\n\t     q = &qinfo->queue[i])\n\nstruct cpt_vf {\n\tu16 flags;  \n\tu8 vfid;  \n\tu8 vftype;  \n\tu8 vfgrp;  \n\tu8 node;  \n\tu8 priority;  \n\tstruct pci_dev *pdev;  \n\tvoid __iomem *reg_base;  \n\tvoid *wqe_info;\t \n\t \n\tcpumask_var_t affinity_mask[CPT_VF_MSIX_VECTORS];\n\t \n\tu32 qsize;\n\tu32 nr_queues;\n\tstruct command_qinfo cqinfo;  \n\tstruct pending_qinfo pqinfo;  \n\t \n\tbool pf_acked;\n\tbool pf_nacked;\n};\n\nint cptvf_send_vf_up(struct cpt_vf *cptvf);\nint cptvf_send_vf_down(struct cpt_vf *cptvf);\nint cptvf_send_vf_to_grp_msg(struct cpt_vf *cptvf);\nint cptvf_send_vf_priority_msg(struct cpt_vf *cptvf);\nint cptvf_send_vq_size_msg(struct cpt_vf *cptvf);\nint cptvf_check_pf_ready(struct cpt_vf *cptvf);\nvoid cptvf_handle_mbox_intr(struct cpt_vf *cptvf);\nvoid cvm_crypto_exit(void);\nint cvm_crypto_init(struct cpt_vf *cptvf);\nvoid vq_post_process(struct cpt_vf *cptvf, u32 qno);\nvoid cptvf_write_vq_doorbell(struct cpt_vf *cptvf, u32 val);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}