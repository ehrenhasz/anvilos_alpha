{
  "module_name": "adf_dbgfs.c",
  "hash_id": "91fd720d44abc1d7ed7462266677fb3c183813ee32654f079534416f8d3e8686",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/intel/qat/qat_common/adf_dbgfs.c",
  "human_readable_source": "\n \n\n#include <linux/debugfs.h>\n#include \"adf_accel_devices.h\"\n#include \"adf_cfg.h\"\n#include \"adf_common_drv.h\"\n#include \"adf_dbgfs.h\"\n#include \"adf_fw_counters.h\"\n#include \"adf_heartbeat_dbgfs.h\"\n\n \nvoid adf_dbgfs_init(struct adf_accel_dev *accel_dev)\n{\n\tchar name[ADF_DEVICE_NAME_LENGTH];\n\tvoid *ret;\n\n\t \n\tsnprintf(name, sizeof(name), \"%s%s_%s\", ADF_DEVICE_NAME_PREFIX,\n\t\t accel_dev->hw_device->dev_class->name,\n\t\t pci_name(accel_dev->accel_pci_dev.pci_dev));\n\n\tret = debugfs_create_dir(name, NULL);\n\tif (IS_ERR_OR_NULL(ret))\n\t\treturn;\n\n\taccel_dev->debugfs_dir = ret;\n\n\tadf_cfg_dev_dbgfs_add(accel_dev);\n}\nEXPORT_SYMBOL_GPL(adf_dbgfs_init);\n\n \nvoid adf_dbgfs_exit(struct adf_accel_dev *accel_dev)\n{\n\tadf_cfg_dev_dbgfs_rm(accel_dev);\n\tdebugfs_remove(accel_dev->debugfs_dir);\n}\nEXPORT_SYMBOL_GPL(adf_dbgfs_exit);\n\n \nvoid adf_dbgfs_add(struct adf_accel_dev *accel_dev)\n{\n\tif (!accel_dev->debugfs_dir)\n\t\treturn;\n\n\tif (!accel_dev->is_vf) {\n\t\tadf_fw_counters_dbgfs_add(accel_dev);\n\t\tadf_heartbeat_dbgfs_add(accel_dev);\n\t}\n}\n\n \nvoid adf_dbgfs_rm(struct adf_accel_dev *accel_dev)\n{\n\tif (!accel_dev->debugfs_dir)\n\t\treturn;\n\n\tif (!accel_dev->is_vf) {\n\t\tadf_heartbeat_dbgfs_rm(accel_dev);\n\t\tadf_fw_counters_dbgfs_rm(accel_dev);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}