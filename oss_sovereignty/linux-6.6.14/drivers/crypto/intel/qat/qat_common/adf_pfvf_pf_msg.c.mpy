{
  "module_name": "adf_pfvf_pf_msg.c",
  "hash_id": "3b64bc6860c631c55606e563779644030af433d3e0ca2246ca26842411edc640",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/intel/qat/qat_common/adf_pfvf_pf_msg.c",
  "human_readable_source": "\n \n#include <linux/pci.h>\n#include \"adf_accel_devices.h\"\n#include \"adf_pfvf_msg.h\"\n#include \"adf_pfvf_pf_msg.h\"\n#include \"adf_pfvf_pf_proto.h\"\n\nvoid adf_pf2vf_notify_restarting(struct adf_accel_dev *accel_dev)\n{\n\tstruct adf_accel_vf_info *vf;\n\tstruct pfvf_message msg = { .type = ADF_PF2VF_MSGTYPE_RESTARTING };\n\tint i, num_vfs = pci_num_vf(accel_to_pci_dev(accel_dev));\n\n\tfor (i = 0, vf = accel_dev->pf.vf_info; i < num_vfs; i++, vf++) {\n\t\tif (vf->init && adf_send_pf2vf_msg(accel_dev, i, msg))\n\t\t\tdev_err(&GET_DEV(accel_dev),\n\t\t\t\t\"Failed to send restarting msg to VF%d\\n\", i);\n\t}\n}\n\nint adf_pf_capabilities_msg_provider(struct adf_accel_dev *accel_dev,\n\t\t\t\t     u8 *buffer, u8 compat)\n{\n\tstruct adf_hw_device_data *hw_data = accel_dev->hw_device;\n\tstruct capabilities_v2 caps_msg;\n\n\tcaps_msg.ext_dc_caps = hw_data->extended_dc_capabilities;\n\tcaps_msg.capabilities = hw_data->accel_capabilities_mask;\n\n\tcaps_msg.hdr.version = ADF_PFVF_CAPABILITIES_V2_VERSION;\n\tcaps_msg.hdr.payload_size =\n\t\t\tADF_PFVF_BLKMSG_PAYLOAD_SIZE(struct capabilities_v2);\n\n\tmemcpy(buffer, &caps_msg, sizeof(caps_msg));\n\n\treturn 0;\n}\n\nint adf_pf_ring_to_svc_msg_provider(struct adf_accel_dev *accel_dev,\n\t\t\t\t    u8 *buffer, u8 compat)\n{\n\tstruct ring_to_svc_map_v1 rts_map_msg;\n\n\trts_map_msg.map = accel_dev->hw_device->ring_to_svc_map;\n\trts_map_msg.hdr.version = ADF_PFVF_RING_TO_SVC_VERSION;\n\trts_map_msg.hdr.payload_size = ADF_PFVF_BLKMSG_PAYLOAD_SIZE(rts_map_msg);\n\n\tmemcpy(buffer, &rts_map_msg, sizeof(rts_map_msg));\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}