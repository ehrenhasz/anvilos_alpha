{
  "module_name": "adf_gen2_dc.c",
  "hash_id": "eac18ca8869cb99d3e3045e9396a569b4e70b8568c9f86ef60078fa00f1635cb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/intel/qat/qat_common/adf_gen2_dc.c",
  "human_readable_source": "\n \n#include \"adf_accel_devices.h\"\n#include \"adf_gen2_dc.h\"\n#include \"icp_qat_fw_comp.h\"\n\nstatic void qat_comp_build_deflate_ctx(void *ctx)\n{\n\tstruct icp_qat_fw_comp_req *req_tmpl = (struct icp_qat_fw_comp_req *)ctx;\n\tstruct icp_qat_fw_comn_req_hdr *header = &req_tmpl->comn_hdr;\n\tstruct icp_qat_fw_comp_req_hdr_cd_pars *cd_pars = &req_tmpl->cd_pars;\n\tstruct icp_qat_fw_comp_req_params *req_pars = &req_tmpl->comp_pars;\n\tstruct icp_qat_fw_comp_cd_hdr *comp_cd_ctrl = &req_tmpl->comp_cd_ctrl;\n\n\tmemset(req_tmpl, 0, sizeof(*req_tmpl));\n\theader->hdr_flags =\n\t\tICP_QAT_FW_COMN_HDR_FLAGS_BUILD(ICP_QAT_FW_COMN_REQ_FLAG_SET);\n\theader->service_type = ICP_QAT_FW_COMN_REQ_CPM_FW_COMP;\n\theader->service_cmd_id = ICP_QAT_FW_COMP_CMD_STATIC;\n\theader->comn_req_flags =\n\t\tICP_QAT_FW_COMN_FLAGS_BUILD(QAT_COMN_CD_FLD_TYPE_16BYTE_DATA,\n\t\t\t\t\t    QAT_COMN_PTR_TYPE_SGL);\n\theader->serv_specif_flags =\n\t\tICP_QAT_FW_COMP_FLAGS_BUILD(ICP_QAT_FW_COMP_STATELESS_SESSION,\n\t\t\t\t\t    ICP_QAT_FW_COMP_NOT_AUTO_SELECT_BEST,\n\t\t\t\t\t    ICP_QAT_FW_COMP_NOT_ENH_AUTO_SELECT_BEST,\n\t\t\t\t\t    ICP_QAT_FW_COMP_NOT_DISABLE_TYPE0_ENH_AUTO_SELECT_BEST,\n\t\t\t\t\t    ICP_QAT_FW_COMP_ENABLE_SECURE_RAM_USED_AS_INTMD_BUF);\n\tcd_pars->u.sl.comp_slice_cfg_word[0] =\n\t\tICP_QAT_HW_COMPRESSION_CONFIG_BUILD(ICP_QAT_HW_COMPRESSION_DIR_COMPRESS,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_DELAYED_MATCH_DISABLED,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_ALGO_DEFLATE,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_DEPTH_1,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_FILE_TYPE_0);\n\treq_pars->crc.legacy.initial_adler = COMP_CPR_INITIAL_ADLER;\n\treq_pars->crc.legacy.initial_crc32 = COMP_CPR_INITIAL_CRC;\n\treq_pars->req_par_flags =\n\t\tICP_QAT_FW_COMP_REQ_PARAM_FLAGS_BUILD(ICP_QAT_FW_COMP_SOP,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_EOP,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_BFINAL,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_CNV,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_CNV_RECOVERY,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_NO_CNV_DFX,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_CRC_MODE_LEGACY,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_NO_XXHASH_ACC,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_CNV_ERROR_NONE,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_NO_APPEND_CRC,\n\t\t\t\t\t\t      ICP_QAT_FW_COMP_NO_DROP_DATA);\n\tICP_QAT_FW_COMN_NEXT_ID_SET(comp_cd_ctrl, ICP_QAT_FW_SLICE_DRAM_WR);\n\tICP_QAT_FW_COMN_CURR_ID_SET(comp_cd_ctrl, ICP_QAT_FW_SLICE_COMP);\n\n\t \n\tmemcpy(req_tmpl + 1, req_tmpl, sizeof(*req_tmpl));\n\treq_tmpl++;\n\theader = &req_tmpl->comn_hdr;\n\theader->service_cmd_id = ICP_QAT_FW_COMP_CMD_DECOMPRESS;\n\tcd_pars = &req_tmpl->cd_pars;\n\tcd_pars->u.sl.comp_slice_cfg_word[0] =\n\t\tICP_QAT_HW_COMPRESSION_CONFIG_BUILD(ICP_QAT_HW_COMPRESSION_DIR_DECOMPRESS,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_DELAYED_MATCH_DISABLED,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_ALGO_DEFLATE,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_DEPTH_1,\n\t\t\t\t\t\t    ICP_QAT_HW_COMPRESSION_FILE_TYPE_0);\n}\n\nvoid adf_gen2_init_dc_ops(struct adf_dc_ops *dc_ops)\n{\n\tdc_ops->build_deflate_ctx = qat_comp_build_deflate_ctx;\n}\nEXPORT_SYMBOL_GPL(adf_gen2_init_dc_ops);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}