{
  "module_name": "adf_heartbeat.h",
  "hash_id": "c83d7232f8a6c479afeffac98c20fed84e847910cd5f299373b0bdd886ee8660",
  "original_prompt": "Ingested from linux-6.6.14/drivers/crypto/intel/qat/qat_common/adf_heartbeat.h",
  "human_readable_source": " \n \n\n#ifndef ADF_HEARTBEAT_H_\n#define ADF_HEARTBEAT_H_\n\n#include <linux/types.h>\n\nstruct adf_accel_dev;\nstruct dentry;\n\n#define ADF_CFG_HB_TIMER_MIN_MS 200\n#define ADF_CFG_HB_TIMER_DEFAULT_MS 500\n#define ADF_CFG_HB_COUNT_THRESHOLD 3\n\nenum adf_device_heartbeat_status {\n\tHB_DEV_UNRESPONSIVE = 0,\n\tHB_DEV_ALIVE,\n\tHB_DEV_UNSUPPORTED,\n};\n\nstruct adf_heartbeat {\n\tunsigned int hb_sent_counter;\n\tunsigned int hb_failed_counter;\n\tunsigned int hb_timer;\n\tu64 last_hb_check_time;\n\tbool ctrs_cnt_checked;\n\tstruct hb_dma_addr {\n\t\tdma_addr_t phy_addr;\n\t\tvoid *virt_addr;\n\t} dma;\n\tstruct {\n\t\tstruct dentry *base_dir;\n\t\tstruct dentry *status;\n\t\tstruct dentry *cfg;\n\t\tstruct dentry *sent;\n\t\tstruct dentry *failed;\n\t} dbgfs;\n};\n\n#ifdef CONFIG_DEBUG_FS\nint adf_heartbeat_init(struct adf_accel_dev *accel_dev);\nint adf_heartbeat_start(struct adf_accel_dev *accel_dev);\nvoid adf_heartbeat_shutdown(struct adf_accel_dev *accel_dev);\n\nint adf_heartbeat_ms_to_ticks(struct adf_accel_dev *accel_dev, unsigned int time_ms,\n\t\t\t      uint32_t *value);\nint adf_heartbeat_save_cfg_param(struct adf_accel_dev *accel_dev,\n\t\t\t\t unsigned int timer_ms);\nvoid adf_heartbeat_status(struct adf_accel_dev *accel_dev,\n\t\t\t  enum adf_device_heartbeat_status *hb_status);\nvoid adf_heartbeat_check_ctrs(struct adf_accel_dev *accel_dev);\n\n#else\nstatic inline int adf_heartbeat_init(struct adf_accel_dev *accel_dev)\n{\n\treturn 0;\n}\n\nstatic inline int adf_heartbeat_start(struct adf_accel_dev *accel_dev)\n{\n\treturn 0;\n}\n\nstatic inline void adf_heartbeat_shutdown(struct adf_accel_dev *accel_dev)\n{\n}\n\nstatic inline int adf_heartbeat_save_cfg_param(struct adf_accel_dev *accel_dev,\n\t\t\t\t\t       unsigned int timer_ms)\n{\n\treturn 0;\n}\n\nstatic inline void adf_heartbeat_check_ctrs(struct adf_accel_dev *accel_dev)\n{\n}\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}