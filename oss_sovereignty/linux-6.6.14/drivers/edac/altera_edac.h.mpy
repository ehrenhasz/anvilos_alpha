{
  "module_name": "altera_edac.h",
  "hash_id": "7ebd1446cad7b70ba5202bb1fd37785b65440b33437911dedfb3f2be712e2b28",
  "original_prompt": "Ingested from linux-6.6.14/drivers/edac/altera_edac.h",
  "human_readable_source": " \n \n\n#ifndef _ALTERA_EDAC_H\n#define _ALTERA_EDAC_H\n\n#include <linux/arm-smccc.h>\n#include <linux/edac.h>\n#include <linux/types.h>\n\n \n#define CV_CTLCFG_OFST             0x00\n\n \n#define CV_CTLCFG_ECC_EN           0x400\n#define CV_CTLCFG_ECC_CORR_EN      0x800\n#define CV_CTLCFG_GEN_SB_ERR       0x2000\n#define CV_CTLCFG_GEN_DB_ERR       0x4000\n\n#define CV_CTLCFG_ECC_AUTO_EN     (CV_CTLCFG_ECC_EN)\n\n \n#define CV_DRAMADDRW_OFST          0x2C\n\n \n#define DRAMADDRW_COLBIT_MASK      0x001F\n#define DRAMADDRW_COLBIT_SHIFT     0\n#define DRAMADDRW_ROWBIT_MASK      0x03E0\n#define DRAMADDRW_ROWBIT_SHIFT     5\n#define CV_DRAMADDRW_BANKBIT_MASK  0x1C00\n#define CV_DRAMADDRW_BANKBIT_SHIFT 10\n#define CV_DRAMADDRW_CSBIT_MASK    0xE000\n#define CV_DRAMADDRW_CSBIT_SHIFT   13\n\n \n#define CV_DRAMIFWIDTH_OFST        0x30\n\n \n#define CV_DRAMIFWIDTH_16B_ECC     24\n#define CV_DRAMIFWIDTH_32B_ECC     40\n\n \n#define CV_DRAMSTS_OFST            0x38\n\n \n#define CV_DRAMSTS_SBEERR          0x04\n#define CV_DRAMSTS_DBEERR          0x08\n#define CV_DRAMSTS_CORR_DROP       0x10\n\n \n#define CV_DRAMINTR_OFST           0x3C\n\n \n#define CV_DRAMINTR_INTREN         0x01\n#define CV_DRAMINTR_SBEMASK        0x02\n#define CV_DRAMINTR_DBEMASK        0x04\n#define CV_DRAMINTR_CORRDROPMASK   0x08\n#define CV_DRAMINTR_INTRCLR        0x10\n\n \n#define CV_SBECOUNT_OFST           0x40\n\n \n#define CV_DBECOUNT_OFST           0x44\n\n \n#define CV_ERRADDR_OFST            0x48\n\n \n\n \n#define A10_ECCCTRL1_OFST          0x00\n\n \n#define A10_ECCCTRL1_ECC_EN        0x001\n#define A10_ECCCTRL1_CNT_RST       0x010\n#define A10_ECCCTRL1_AWB_CNT_RST   0x100\n#define A10_ECC_CNT_RESET_MASK     (A10_ECCCTRL1_CNT_RST | \\\n\t\t\t\t    A10_ECCCTRL1_AWB_CNT_RST)\n\n \n#define CV_DRAMADDRW               0xFFC2502C\n#define A10_DRAMADDRW              0xFFCFA0A8\n#define S10_DRAMADDRW              0xF80110E0\n\n \n#define DRAMADDRW_COLBIT_MASK      0x001F\n#define DRAMADDRW_COLBIT_SHIFT     0\n#define DRAMADDRW_ROWBIT_MASK      0x03E0\n#define DRAMADDRW_ROWBIT_SHIFT     5\n#define CV_DRAMADDRW_BANKBIT_MASK  0x1C00\n#define CV_DRAMADDRW_BANKBIT_SHIFT 10\n#define CV_DRAMADDRW_CSBIT_MASK    0xE000\n#define CV_DRAMADDRW_CSBIT_SHIFT   13\n\n#define A10_DRAMADDRW_BANKBIT_MASK  0x3C00\n#define A10_DRAMADDRW_BANKBIT_SHIFT 10\n#define A10_DRAMADDRW_GRPBIT_MASK   0xC000\n#define A10_DRAMADDRW_GRPBIT_SHIFT  14\n#define A10_DRAMADDRW_CSBIT_MASK    0x70000\n#define A10_DRAMADDRW_CSBIT_SHIFT   16\n\n \n#define CV_DRAMIFWIDTH             0xFFC25030\n#define A10_DRAMIFWIDTH            0xFFCFB008\n#define S10_DRAMIFWIDTH            0xF8011008\n\n \n#define CV_DRAMIFWIDTH_16B_ECC     24\n#define CV_DRAMIFWIDTH_32B_ECC     40\n\n#define A10_DRAMIFWIDTH_16B        0x0\n#define A10_DRAMIFWIDTH_32B        0x1\n#define A10_DRAMIFWIDTH_64B        0x2\n\n \n#define A10_ERRINTEN_OFST          0x10\n\n \n#define A10_ERRINTEN_SERRINTEN     0x01\n#define A10_ERRINTEN_DERRINTEN     0x02\n#define A10_ECC_IRQ_EN_MASK        (A10_ERRINTEN_SERRINTEN | \\\n\t\t\t\t    A10_ERRINTEN_DERRINTEN)\n\n \n#define A10_INTMODE_OFST           0x1C\n#define A10_INTMODE_SB_INT         1\n\n \n#define A10_INTSTAT_OFST           0x20\n\n \n#define A10_INTSTAT_SBEERR         0x01\n#define A10_INTSTAT_DBEERR         0x02\n\n \n#define A10_DERRADDR_OFST          0x2C\n#define A10_SERRADDR_OFST          0x30\n\n \n#define A10_DIAGINTTEST_OFST       0x24\n\n#define A10_DIAGINT_TSERRA_MASK    0x0001\n#define A10_DIAGINT_TDERRA_MASK    0x0100\n\n#define A10_SBERR_IRQ              34\n#define A10_DBERR_IRQ              32\n\n \n#define A10_SERRCNTREG_OFST        0x3C\n\n#define A10_SYMAN_INTMASK_CLR      0xFFD06098\n#define A10_INTMASK_CLR_OFST       0x10\n#define A10_DDR0_IRQ_MASK          BIT(17)\n\nstruct altr_sdram_prv_data {\n\tint ecc_ctrl_offset;\n\tint ecc_ctl_en_mask;\n\tint ecc_cecnt_offset;\n\tint ecc_uecnt_offset;\n\tint ecc_stat_offset;\n\tint ecc_stat_ce_mask;\n\tint ecc_stat_ue_mask;\n\tint ecc_saddr_offset;\n\tint ecc_daddr_offset;\n\tint ecc_irq_en_offset;\n\tint ecc_irq_en_mask;\n\tint ecc_irq_clr_offset;\n\tint ecc_irq_clr_mask;\n\tint ecc_cnt_rst_offset;\n\tint ecc_cnt_rst_mask;\n\tstruct edac_dev_sysfs_attribute *eccmgr_sysfs_attr;\n\tint ecc_enable_mask;\n\tint ce_set_mask;\n\tint ue_set_mask;\n\tint ce_ue_trgr_offset;\n};\n\n \nstruct altr_sdram_mc_data {\n\tstruct regmap *mc_vbase;\n\tint sb_irq;\n\tint db_irq;\n\tconst struct altr_sdram_prv_data *data;\n};\n\n \n \n#define ALTR_UE_TRIGGER_CHAR            'U'    \n#define ALTR_TRIGGER_READ_WRD_CNT       32     \n#define ALTR_TRIG_OCRAM_BYTE_SIZE       128    \n#define ALTR_TRIG_L2C_BYTE_SIZE         4096   \n\n \n \n#define ALTR_MAN_GRP_OCRAM_ECC_OFFSET   0x04\n#define ALTR_OCR_ECC_REG_OFFSET         0x00\n#define ALTR_OCR_ECC_EN                 BIT(0)\n#define ALTR_OCR_ECC_INJS               BIT(1)\n#define ALTR_OCR_ECC_INJD               BIT(2)\n#define ALTR_OCR_ECC_SERR               BIT(3)\n#define ALTR_OCR_ECC_DERR               BIT(4)\n\n \n#define ALTR_MAN_GRP_L2_ECC_OFFSET      0x00\n#define ALTR_L2_ECC_REG_OFFSET          0x00\n#define ALTR_L2_ECC_EN                  BIT(0)\n#define ALTR_L2_ECC_INJS                BIT(1)\n#define ALTR_L2_ECC_INJD                BIT(2)\n\n \n#define ALTR_A10_ECC_CTRL_OFST          0x08\n#define ALTR_A10_ECC_EN                 BIT(0)\n#define ALTR_A10_ECC_INITA              BIT(16)\n#define ALTR_A10_ECC_INITB              BIT(24)\n\n#define ALTR_A10_ECC_INITSTAT_OFST      0x0C\n#define ALTR_A10_ECC_INITCOMPLETEA      BIT(0)\n#define ALTR_A10_ECC_INITCOMPLETEB      BIT(8)\n\n#define ALTR_A10_ECC_ERRINTEN_OFST      0x10\n#define ALTR_A10_ECC_ERRINTENS_OFST     0x14\n#define ALTR_A10_ECC_ERRINTENR_OFST     0x18\n#define ALTR_A10_ECC_SERRINTEN          BIT(0)\n\n#define ALTR_A10_ECC_INTMODE_OFST       0x1C\n#define ALTR_A10_ECC_INTMODE            BIT(0)\n\n#define ALTR_A10_ECC_INTSTAT_OFST       0x20\n#define ALTR_A10_ECC_SERRPENA           BIT(0)\n#define ALTR_A10_ECC_DERRPENA           BIT(8)\n#define ALTR_A10_ECC_ERRPENA_MASK       (ALTR_A10_ECC_SERRPENA | \\\n\t\t\t\t\t ALTR_A10_ECC_DERRPENA)\n#define ALTR_A10_ECC_SERRPENB           BIT(16)\n#define ALTR_A10_ECC_DERRPENB           BIT(24)\n#define ALTR_A10_ECC_ERRPENB_MASK       (ALTR_A10_ECC_SERRPENB | \\\n\t\t\t\t\t ALTR_A10_ECC_DERRPENB)\n\n#define ALTR_A10_ECC_INTTEST_OFST       0x24\n#define ALTR_A10_ECC_TSERRA             BIT(0)\n#define ALTR_A10_ECC_TDERRA             BIT(8)\n#define ALTR_A10_ECC_TSERRB             BIT(16)\n#define ALTR_A10_ECC_TDERRB             BIT(24)\n\n \n#define A10_SYSMGR_ECC_INTMASK_SET_OFST   0x94\n#define A10_SYSMGR_ECC_INTMASK_CLR_OFST   0x98\n#define A10_SYSMGR_ECC_INTMASK_OCRAM      BIT(1)\n\n#define A10_SYSMGR_ECC_INTSTAT_SERR_OFST  0x9C\n#define A10_SYSMGR_ECC_INTSTAT_DERR_OFST  0xA0\n#define A10_SYSMGR_ECC_INTSTAT_L2         BIT(0)\n#define A10_SYSMGR_ECC_INTSTAT_OCRAM      BIT(1)\n\n#define A10_SYSGMR_MPU_CLEAR_L2_ECC_OFST  0xA8\n#define A10_SYSGMR_MPU_CLEAR_L2_ECC_SB    BIT(15)\n#define A10_SYSGMR_MPU_CLEAR_L2_ECC_MB    BIT(31)\n\n \n#define ALTR_A10_L2_ECC_CTL_OFST        0x0\n#define ALTR_A10_L2_ECC_EN_CTL          BIT(0)\n\n#define ALTR_A10_L2_ECC_STATUS          0xFFD060A4\n#define ALTR_A10_L2_ECC_STAT_OFST       0xA4\n#define ALTR_A10_L2_ECC_SERR_PEND       BIT(0)\n#define ALTR_A10_L2_ECC_MERR_PEND       BIT(0)\n\n#define ALTR_A10_L2_ECC_CLR_OFST        0x4\n#define ALTR_A10_L2_ECC_SERR_CLR        BIT(15)\n#define ALTR_A10_L2_ECC_MERR_CLR        BIT(31)\n\n#define ALTR_A10_L2_ECC_INJ_OFST        ALTR_A10_L2_ECC_CTL_OFST\n#define ALTR_A10_L2_ECC_CE_INJ_MASK     0x00000101\n#define ALTR_A10_L2_ECC_UE_INJ_MASK     0x00010101\n\n \n#define ALTR_A10_OCRAM_ECC_EN_CTL       (BIT(1) | BIT(0))\n\n \n#define ALTR_A10_COMMON_ECC_EN_CTL      BIT(0)\n\n \n#define ALTR_A10_SDMMC_IRQ_MASK         (BIT(16) | BIT(15))\n\n \n#define ALTR_A10_ECC_INIT_WATCHDOG_10US      10000\n\n \n#define ALTR_S10_ECC_CTRL_SDRAM_OFST      0x00\n#define ALTR_S10_ECC_EN                   BIT(0)\n\n#define ALTR_S10_ECC_ERRINTEN_OFST        0x10\n#define ALTR_S10_ECC_ERRINTENS_OFST       0x14\n#define ALTR_S10_ECC_ERRINTENR_OFST       0x18\n#define ALTR_S10_ECC_SERRINTEN            BIT(0)\n\n#define ALTR_S10_ECC_INTMODE_OFST         0x1C\n#define ALTR_S10_ECC_INTMODE              BIT(0)\n\n#define ALTR_S10_ECC_INTSTAT_OFST         0x20\n#define ALTR_S10_ECC_SERRPENA             BIT(0)\n#define ALTR_S10_ECC_DERRPENA             BIT(8)\n#define ALTR_S10_ECC_ERRPENA_MASK         (ALTR_S10_ECC_SERRPENA | \\\n\t\t\t\t\t   ALTR_S10_ECC_DERRPENA)\n\n#define ALTR_S10_ECC_INTTEST_OFST         0x24\n#define ALTR_S10_ECC_TSERRA               BIT(0)\n#define ALTR_S10_ECC_TDERRA               BIT(8)\n#define ALTR_S10_ECC_TSERRB               BIT(16)\n#define ALTR_S10_ECC_TDERRB               BIT(24)\n\n#define ALTR_S10_DERR_ADDRA_OFST          0x2C\n\n \n#define S10_SYSMGR_ECC_INTMASK_CLR_OFST   0x98\n#define S10_SYSMGR_ECC_INTSTAT_DERR_OFST  0xA0\n\n \n#define S10_SYSMGR_UE_VAL_OFST            0x220\n#define S10_SYSMGR_UE_ADDR_OFST           0x224\n\n#define S10_DDR0_IRQ_MASK                 BIT(16)\n#define S10_DBE_IRQ_MASK                  0x3FFFE\n\n \n#define ECC_BLK_ADDRESS_OFST              0x40\n#define ECC_BLK_RDATA0_OFST               0x44\n#define ECC_BLK_RDATA1_OFST               0x48\n#define ECC_BLK_RDATA2_OFST               0x4C\n#define ECC_BLK_RDATA3_OFST               0x50\n#define ECC_BLK_WDATA0_OFST               0x54\n#define ECC_BLK_WDATA1_OFST               0x58\n#define ECC_BLK_WDATA2_OFST               0x5C\n#define ECC_BLK_WDATA3_OFST               0x60\n#define ECC_BLK_RECC0_OFST                0x64\n#define ECC_BLK_RECC1_OFST                0x68\n#define ECC_BLK_WECC0_OFST                0x6C\n#define ECC_BLK_WECC1_OFST                0x70\n#define ECC_BLK_DBYTECTRL_OFST            0x74\n#define ECC_BLK_ACCCTRL_OFST              0x78\n#define ECC_BLK_STARTACC_OFST             0x7C\n\n#define ECC_XACT_KICK                     0x10000\n#define ECC_WORD_WRITE                    0xFF\n#define ECC_WRITE_DOVR                    0x101\n#define ECC_WRITE_EDOVR                   0x103\n#define ECC_READ_EOVR                     0x2\n#define ECC_READ_EDOVR                    0x3\n\nstruct altr_edac_device_dev;\n\nstruct edac_device_prv_data {\n\tint (*setup)(struct altr_edac_device_dev *device);\n\tint ce_clear_mask;\n\tint ue_clear_mask;\n\tint irq_status_mask;\n\tvoid * (*alloc_mem)(size_t size, void **other);\n\tvoid (*free_mem)(void *p, size_t size, void *other);\n\tint ecc_enable_mask;\n\tint ecc_en_ofst;\n\tint ce_set_mask;\n\tint ue_set_mask;\n\tint set_err_ofst;\n\tirqreturn_t (*ecc_irq_handler)(int irq, void *dev_id);\n\tint trig_alloc_sz;\n\tconst struct file_operations *inject_fops;\n\tbool panic;\n};\n\nstruct altr_edac_device_dev {\n\tstruct list_head next;\n\tvoid __iomem *base;\n\tint sb_irq;\n\tint db_irq;\n\tconst struct edac_device_prv_data *data;\n\tstruct dentry *debugfs_dir;\n\tchar *edac_dev_name;\n\tstruct altr_arria10_edac *edac;\n\tstruct edac_device_ctl_info *edac_dev;\n\tstruct device ddev;\n\tint edac_idx;\n};\n\nstruct altr_arria10_edac {\n\tstruct device\t\t*dev;\n\tstruct regmap\t\t*ecc_mgr_map;\n\tint sb_irq;\n\tint db_irq;\n\tstruct irq_domain\t*domain;\n\tstruct irq_chip\t\tirq_chip;\n\tstruct list_head\ta10_ecc_devices;\n\tstruct notifier_block\tpanic_notifier;\n};\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}