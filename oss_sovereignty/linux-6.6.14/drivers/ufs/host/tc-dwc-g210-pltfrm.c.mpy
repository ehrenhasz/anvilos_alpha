{
  "module_name": "tc-dwc-g210-pltfrm.c",
  "hash_id": "32f4940d99fc76e93ac94995016277abb97093f09057e5dd2364503e01db8034",
  "original_prompt": "Ingested from linux-6.6.14/drivers/ufs/host/tc-dwc-g210-pltfrm.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/of.h>\n#include <linux/delay.h>\n#include <linux/pm_runtime.h>\n\n#include \"ufshcd-pltfrm.h\"\n#include \"ufshcd-dwc.h\"\n#include \"tc-dwc-g210.h\"\n\n \nstatic struct ufs_hba_variant_ops tc_dwc_g210_20bit_pltfm_hba_vops = {\n\t.name                   = \"tc-dwc-g210-pltfm\",\n\t.link_startup_notify\t= ufshcd_dwc_link_startup_notify,\n\t.phy_initialization = tc_dwc_g210_config_20_bit,\n};\n\nstatic struct ufs_hba_variant_ops tc_dwc_g210_40bit_pltfm_hba_vops = {\n\t.name                   = \"tc-dwc-g210-pltfm\",\n\t.link_startup_notify\t= ufshcd_dwc_link_startup_notify,\n\t.phy_initialization = tc_dwc_g210_config_40_bit,\n};\n\nstatic const struct of_device_id tc_dwc_g210_pltfm_match[] = {\n\t{\n\t\t.compatible = \"snps,g210-tc-6.00-20bit\",\n\t\t.data = &tc_dwc_g210_20bit_pltfm_hba_vops,\n\t},\n\t{\n\t\t.compatible = \"snps,g210-tc-6.00-40bit\",\n\t\t.data = &tc_dwc_g210_40bit_pltfm_hba_vops,\n\t},\n\t{ },\n};\nMODULE_DEVICE_TABLE(of, tc_dwc_g210_pltfm_match);\n\n \nstatic int tc_dwc_g210_pltfm_probe(struct platform_device *pdev)\n{\n\tint err;\n\tconst struct of_device_id *of_id;\n\tstruct ufs_hba_variant_ops *vops;\n\tstruct device *dev = &pdev->dev;\n\n\tof_id = of_match_node(tc_dwc_g210_pltfm_match, dev->of_node);\n\tvops = (struct ufs_hba_variant_ops *)of_id->data;\n\n\t \n\terr = ufshcd_pltfrm_init(pdev, vops);\n\tif (err)\n\t\tdev_err(dev, \"ufshcd_pltfrm_init() failed %d\\n\", err);\n\n\treturn err;\n}\n\n \nstatic int tc_dwc_g210_pltfm_remove(struct platform_device *pdev)\n{\n\tstruct ufs_hba *hba =  platform_get_drvdata(pdev);\n\n\tpm_runtime_get_sync(&(pdev)->dev);\n\tufshcd_remove(hba);\n\n\treturn 0;\n}\n\nstatic const struct dev_pm_ops tc_dwc_g210_pltfm_pm_ops = {\n\tSET_SYSTEM_SLEEP_PM_OPS(ufshcd_system_suspend, ufshcd_system_resume)\n\tSET_RUNTIME_PM_OPS(ufshcd_runtime_suspend, ufshcd_runtime_resume, NULL)\n};\n\nstatic struct platform_driver tc_dwc_g210_pltfm_driver = {\n\t.probe\t\t= tc_dwc_g210_pltfm_probe,\n\t.remove\t\t= tc_dwc_g210_pltfm_remove,\n\t.driver\t\t= {\n\t\t.name\t= \"tc-dwc-g210-pltfm\",\n\t\t.pm\t= &tc_dwc_g210_pltfm_pm_ops,\n\t\t.of_match_table\t= of_match_ptr(tc_dwc_g210_pltfm_match),\n\t},\n};\n\nmodule_platform_driver(tc_dwc_g210_pltfm_driver);\n\nMODULE_ALIAS(\"platform:tc-dwc-g210-pltfm\");\nMODULE_DESCRIPTION(\"Synopsys Test Chip G210 platform glue driver\");\nMODULE_AUTHOR(\"Joao Pinto <Joao.Pinto@synopsys.com>\");\nMODULE_LICENSE(\"Dual BSD/GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}