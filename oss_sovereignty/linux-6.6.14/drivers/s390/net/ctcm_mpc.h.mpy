{
  "module_name": "ctcm_mpc.h",
  "hash_id": "dc0551184b4f7a66dba814e5f88f0d4191d0293c314bd9531848d2eca0d1200e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/s390/net/ctcm_mpc.h",
  "human_readable_source": " \n \n\n#ifndef _CTC_MPC_H_\n#define _CTC_MPC_H_\n\n#include <linux/interrupt.h>\n#include <linux/skbuff.h>\n#include \"fsm.h\"\n\n \n\n \n\n \nextern int ctc_mpc_alloc_channel(int port,\n\t\tvoid (*callback)(int port_num, int max_write_size));\n \nextern void ctc_mpc_establish_connectivity(int port,\n\t\tvoid (*callback)(int port_num, int rc, int max_write_size));\n\nextern void ctc_mpc_dealloc_ch(int port);\nextern void ctc_mpc_flow_control(int port, int flowc);\n\n \n\n#define ETH_P_SNA_DIX\t0x80D5\n\n \n#define ALLZEROS 0x0000000000000000\n\n#define XID_FM2\t\t0x20\n#define XID2_0\t\t0x00\n#define XID2_7\t\t0x07\n#define XID2_WRITE_SIDE 0x04\n#define XID2_READ_SIDE\t0x05\n\nstruct xid2 {\n\t__u8\txid2_type_id;\n\t__u8\txid2_len;\n\t__u32\txid2_adj_id;\n\t__u8\txid2_rlen;\n\t__u8\txid2_resv1;\n\t__u8\txid2_flag1;\n\t__u8\txid2_fmtt;\n\t__u8\txid2_flag4;\n\t__u16\txid2_resv2;\n\t__u8\txid2_tgnum;\n\t__u32\txid2_sender_id;\n\t__u8\txid2_flag2;\n\t__u8\txid2_option;\n\tchar  xid2_resv3[8];\n\t__u16\txid2_resv4;\n\t__u8\txid2_dlc_type;\n\t__u16\txid2_resv5;\n\t__u8\txid2_mpc_flag;\n\t__u8\txid2_resv6;\n\t__u16\txid2_buf_len;\n\tchar xid2_buffer[255 - (13 * sizeof(__u8) +\n\t\t\t\t2 * sizeof(__u32) +\n\t\t\t\t4 * sizeof(__u16) +\n\t\t\t\t8 * sizeof(char))];\n} __attribute__ ((packed));\n\n#define XID2_LENGTH  (sizeof(struct xid2))\n\nstruct th_header {\n\t__u8\tth_seg;\n\t__u8\tth_ch_flag;\n#define TH_HAS_PDU\t0xf0\n#define TH_IS_XID\t0x01\n#define TH_SWEEP_REQ\t0xfe\n#define TH_SWEEP_RESP\t0xff\n\t__u8\tth_blk_flag;\n#define TH_DATA_IS_XID\t0x80\n#define TH_RETRY\t0x40\n#define TH_DISCONTACT\t0xc0\n#define TH_SEG_BLK\t0x20\n#define TH_LAST_SEG\t0x10\n#define TH_PDU_PART\t0x08\n\t__u8\tth_is_xid;\t \n\t__u32\tth_seq_num;\n} __attribute__ ((packed));\n\nstruct th_addon {\n\t__u32\tth_last_seq;\n\t__u32\tth_resvd;\n} __attribute__ ((packed));\n\nstruct th_sweep {\n\tstruct th_header th;\n\tstruct th_addon sw;\n} __attribute__ ((packed));\n\n#define TH_HEADER_LENGTH (sizeof(struct th_header))\n#define TH_SWEEP_LENGTH (sizeof(struct th_sweep))\n\n#define PDU_LAST\t0x80\n#define PDU_CNTL\t0x40\n#define PDU_FIRST\t0x20\n\nstruct pdu {\n\t__u32\tpdu_offset;\n\t__u8\tpdu_flag;\n\t__u8\tpdu_proto;    \n\t__u16\tpdu_seq;\n} __attribute__ ((packed));\n\n#define PDU_HEADER_LENGTH  (sizeof(struct pdu))\n\nstruct qllc {\n\t__u8\tqllc_address;\n#define QLLC_REQ\t0xFF\n#define QLLC_RESP\t0x00\n\t__u8\tqllc_commands;\n#define QLLC_DISCONNECT 0x53\n#define QLLC_UNSEQACK\t0x73\n#define QLLC_SETMODE\t0x93\n#define QLLC_EXCHID\t0xBF\n} __attribute__ ((packed));\n\n\n \n\n#define MAX_MPCGCHAN\t\t10\n#define MPC_XID_TIMEOUT_VALUE\t10000\n#define MPC_CHANNEL_ADD\t\t0\n#define MPC_CHANNEL_REMOVE\t1\n#define MPC_CHANNEL_ATTN\t2\n#define XSIDE\t1\n#define YSIDE\t0\n\nstruct mpcg_info {\n\tstruct sk_buff\t*skb;\n\tstruct channel\t*ch;\n\tstruct xid2\t*xid;\n\tstruct th_sweep\t*sweep;\n\tstruct th_header *th;\n};\n\nstruct mpc_group {\n\tstruct tasklet_struct mpc_tasklet;\n\tstruct tasklet_struct mpc_tasklet2;\n\tint\tchanged_side;\n\tint\tsaved_state;\n\tint\tchannels_terminating;\n\tint\tout_of_sequence;\n\tint\tflow_off_called;\n\tint\tport_num;\n\tint\tport_persist;\n\tint\talloc_called;\n\t__u32\txid2_adj_id;\n\t__u8\txid2_tgnum;\n\t__u32\txid2_sender_id;\n\tint\tnum_channel_paths;\n\tint\tactive_channels[2];\n\t__u16\tgroup_max_buflen;\n\tint\toutstanding_xid2;\n\tint\toutstanding_xid7;\n\tint\toutstanding_xid7_p2;\n\tint\tsweep_req_pend_num;\n\tint\tsweep_rsp_pend_num;\n\tstruct sk_buff\t*xid_skb;\n\tchar\t\t*xid_skb_data;\n\tstruct th_header *xid_th;\n\tstruct xid2\t*xid;\n\tchar\t\t*xid_id;\n\tstruct th_header *rcvd_xid_th;\n\tstruct sk_buff\t*rcvd_xid_skb;\n\tchar\t\t*rcvd_xid_data;\n\t__u8\t\tin_sweep;\n\t__u8\t\troll;\n\tstruct xid2\t*saved_xid2;\n\tvoid \t\t(*allochanfunc)(int, int);\n\tint\t\tallocchan_callback_retries;\n\tvoid \t\t(*estconnfunc)(int, int, int);\n\tint\t\testconn_callback_retries;\n\tint\t\testconn_called;\n\tint\t\txidnogood;\n\tint\t\tsend_qllc_disc;\n\tfsm_timer\ttimer;\n\tfsm_instance\t*fsm;  \n};\n\n#ifdef DEBUGDATA\nvoid ctcmpc_dumpit(char *buf, int len);\n#else\nstatic inline void ctcmpc_dumpit(char *buf, int len)\n{\n}\n#endif\n\n#ifdef DEBUGDATA\n \nvoid ctcmpc_dump_skb(struct sk_buff *skb, int offset);\n#else\nstatic inline void ctcmpc_dump_skb(struct sk_buff *skb, int offset)\n{}\n#endif\n\nstatic inline void ctcmpc_dump32(char *buf, int len)\n{\n\tif (len < 32)\n\t\tctcmpc_dumpit(buf, len);\n\telse\n\t\tctcmpc_dumpit(buf, 32);\n}\n\nvoid ctcm_ccw_check_rc(struct channel *, int, char *);\nvoid mpc_group_ready(unsigned long adev);\nvoid mpc_channel_action(struct channel *ch, int direction, int action);\nvoid mpc_action_send_discontact(unsigned long thischan);\nvoid mpc_action_discontact(fsm_instance *fi, int event, void *arg);\nvoid ctcmpc_bh(unsigned long thischan);\n#endif\n \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}