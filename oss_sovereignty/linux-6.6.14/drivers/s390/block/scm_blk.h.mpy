{
  "module_name": "scm_blk.h",
  "hash_id": "045829e9837fbf457b1ea5b88539543bfa5cf06dadbf8d45a7112fb9cd9edfef",
  "original_prompt": "Ingested from linux-6.6.14/drivers/s390/block/scm_blk.h",
  "human_readable_source": " \n#ifndef SCM_BLK_H\n#define SCM_BLK_H\n\n#include <linux/interrupt.h>\n#include <linux/spinlock.h>\n#include <linux/blkdev.h>\n#include <linux/blk-mq.h>\n#include <linux/list.h>\n\n#include <asm/debug.h>\n#include <asm/eadm.h>\n\n#define SCM_NR_PARTS 8\n#define SCM_QUEUE_DELAY 5\n\nstruct scm_blk_dev {\n\tstruct request_queue *rq;\n\tstruct gendisk *gendisk;\n\tstruct blk_mq_tag_set tag_set;\n\tstruct scm_device *scmdev;\n\tspinlock_t lock;\n\tatomic_t queued_reqs;\n\tenum {SCM_OPER, SCM_WR_PROHIBIT} state;\n\tstruct list_head finished_requests;\n};\n\nstruct scm_request {\n\tstruct scm_blk_dev *bdev;\n\tstruct aidaw *next_aidaw;\n\tstruct request **request;\n\tstruct aob *aob;\n\tstruct list_head list;\n\tu8 retries;\n\tblk_status_t error;\n};\n\n#define to_aobrq(rq) container_of((void *) rq, struct aob_rq_header, data)\n\nint scm_blk_dev_setup(struct scm_blk_dev *, struct scm_device *);\nvoid scm_blk_dev_cleanup(struct scm_blk_dev *);\nvoid scm_blk_set_available(struct scm_blk_dev *);\nvoid scm_blk_irq(struct scm_device *, void *, blk_status_t);\n\nstruct aidaw *scm_aidaw_fetch(struct scm_request *scmrq, unsigned int bytes);\n\nint scm_drv_init(void);\nvoid scm_drv_cleanup(void);\n\nextern debug_info_t *scm_debug;\n\n#define SCM_LOG(imp, txt) do {\t\t\t\t\t\\\n\t\tdebug_text_event(scm_debug, imp, txt);\t\t\\\n\t} while (0)\n\nstatic inline void SCM_LOG_HEX(int level, void *data, int length)\n{\n\tdebug_event(scm_debug, level, data, length);\n}\n\nstatic inline void SCM_LOG_STATE(int level, struct scm_device *scmdev)\n{\n\tstruct {\n\t\tu64 address;\n\t\tu8 oper_state;\n\t\tu8 rank;\n\t} __packed data = {\n\t\t.address = scmdev->address,\n\t\t.oper_state = scmdev->attrs.oper_state,\n\t\t.rank = scmdev->attrs.rank,\n\t};\n\n\tSCM_LOG_HEX(level, &data, sizeof(data));\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}