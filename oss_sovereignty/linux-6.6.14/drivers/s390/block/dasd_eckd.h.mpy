{
  "module_name": "dasd_eckd.h",
  "hash_id": "8fc9b7b5d24b172579adc5680876aceee293ac54516d2ba145b9b0637fec80bd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/s390/block/dasd_eckd.h",
  "human_readable_source": " \n \n\n#ifndef DASD_ECKD_H\n#define DASD_ECKD_H\n\n \n#define DASD_ECKD_CCW_NOP\t\t 0x03\n#define DASD_ECKD_CCW_WRITE\t\t 0x05\n#define DASD_ECKD_CCW_READ\t\t 0x06\n#define DASD_ECKD_CCW_WRITE_HOME_ADDRESS 0x09\n#define DASD_ECKD_CCW_READ_HOME_ADDRESS\t 0x0a\n#define DASD_ECKD_CCW_WRITE_KD\t\t 0x0d\n#define DASD_ECKD_CCW_READ_KD\t\t 0x0e\n#define DASD_ECKD_CCW_ERASE\t\t 0x11\n#define DASD_ECKD_CCW_READ_COUNT\t 0x12\n#define DASD_ECKD_CCW_SLCK\t\t 0x14\n#define DASD_ECKD_CCW_WRITE_RECORD_ZERO\t 0x15\n#define DASD_ECKD_CCW_READ_RECORD_ZERO\t 0x16\n#define DASD_ECKD_CCW_WRITE_CKD\t\t 0x1d\n#define DASD_ECKD_CCW_READ_CKD\t\t 0x1e\n#define DASD_ECKD_CCW_PSF\t\t 0x27\n#define DASD_ECKD_CCW_SNID\t\t 0x34\n#define DASD_ECKD_CCW_RSSD\t\t 0x3e\n#define DASD_ECKD_CCW_LOCATE_RECORD\t 0x47\n#define DASD_ECKD_CCW_LOCATE_RECORD_EXT\t 0x4b\n#define DASD_ECKD_CCW_SNSS\t\t 0x54\n#define DASD_ECKD_CCW_DEFINE_EXTENT\t 0x63\n#define DASD_ECKD_CCW_WRITE_MT\t\t 0x85\n#define DASD_ECKD_CCW_READ_MT\t\t 0x86\n#define DASD_ECKD_CCW_WRITE_KD_MT\t 0x8d\n#define DASD_ECKD_CCW_READ_KD_MT\t 0x8e\n#define DASD_ECKD_CCW_READ_COUNT_MT\t 0x92\n#define DASD_ECKD_CCW_RELEASE\t\t 0x94\n#define DASD_ECKD_CCW_WRITE_FULL_TRACK\t 0x95\n#define DASD_ECKD_CCW_READ_CKD_MT\t 0x9e\n#define DASD_ECKD_CCW_WRITE_CKD_MT\t 0x9d\n#define DASD_ECKD_CCW_WRITE_TRACK_DATA\t 0xA5\n#define DASD_ECKD_CCW_READ_TRACK_DATA\t 0xA6\n#define DASD_ECKD_CCW_RESERVE\t\t 0xB4\n#define DASD_ECKD_CCW_READ_TRACK\t 0xDE\n#define DASD_ECKD_CCW_PFX\t\t 0xE7\n#define DASD_ECKD_CCW_PFX_READ\t\t 0xEA\n#define DASD_ECKD_CCW_RSCK\t\t 0xF9\n#define DASD_ECKD_CCW_RCD\t\t 0xFA\n#define DASD_ECKD_CCW_DSO\t\t 0xF7\n\n \n#define DSO_ORDER_RAS\t\t\t 0x81\n\n \n#define PSF_ORDER_PRSSD\t\t\t 0x18\n#define PSF_ORDER_CUIR_RESPONSE\t\t 0x1A\n#define PSF_ORDER_SSC\t\t\t 0x1D\n\n \n#define PSF_SUBORDER_QHA\t\t 0x1C  \n#define PSF_SUBORDER_PPRCEQ\t\t 0x50  \n#define PSF_SUBORDER_VSQ\t\t 0x52  \n#define PSF_SUBORDER_LCQ\t\t 0x53  \n\n \n#define PPRCEQ_SCOPE_4\t\t\t 0x04  \n\n \n#define PSF_CUIR_INVALID\t\t 0x00\n#define PSF_CUIR_COMPLETED\t\t 0x01\n#define PSF_CUIR_NOT_SUPPORTED\t\t 0x02\n#define PSF_CUIR_ERROR_IN_REQ\t\t 0x03\n#define PSF_CUIR_DENIED\t\t\t 0x04\n#define PSF_CUIR_LAST_PATH\t\t 0x05\n#define PSF_CUIR_DEVICE_ONLINE\t\t 0x06\n#define PSF_CUIR_VARY_FAILURE\t\t 0x07\n#define PSF_CUIR_SOFTWARE_FAILURE\t 0x08\n#define PSF_CUIR_NOT_RECOGNIZED\t\t 0x09\n\n \n#define CUIR_QUIESCE\t\t\t 0x01\n#define CUIR_RESUME\t\t\t 0x02\n\n \n#define REPO_WARN\t\t\t 0x01\n#define REPO_EXHAUST\t\t\t 0x02\n#define POOL_WARN\t\t\t 0x03\n#define POOL_EXHAUST\t\t\t 0x04\n#define REPO_RELIEVE\t\t\t 0x05\n#define POOL_RELIEVE\t\t\t 0x06\n\n \n#define ATTENTION_LENGTH_CUIR\t\t 0x0e\n#define ATTENTION_FORMAT_CUIR\t\t 0x01\n#define ATTENTION_LENGTH_OOS\t\t 0x10\n#define ATTENTION_FORMAT_OOS\t\t 0x06\n\n#define DASD_ECKD_PG_GROUPED\t\t 0x10\n\n \n#define LV_COMPAT_CYL 0xFFFE\n\n\n#define FCX_MAX_DATA_FACTOR 65536\n#define DASD_ECKD_RCD_DATA_SIZE 256\n\n#define DASD_ECKD_PATH_THRHLD\t\t 256\n#define DASD_ECKD_PATH_INTERVAL\t\t 300\n\n \n#define DASD_ECKD_MAX_BLOCKS\t\t 190\n#define DASD_ECKD_MAX_BLOCKS_RAW\t 256\n\n \n\nstruct eckd_count {\n\t__u16 cyl;\n\t__u16 head;\n\t__u8 record;\n\t__u8 kl;\n\t__u16 dl;\n} __attribute__ ((packed));\n\nstruct ch_t {\n\t__u16 cyl;\n\t__u16 head;\n} __attribute__ ((packed));\n\nstruct chr_t {\n\t__u16 cyl;\n\t__u16 head;\n\t__u8 record;\n} __attribute__ ((packed));\n\nstruct DE_eckd_data {\n\tstruct {\n\t\tunsigned char perm:2;\t \n\t\tunsigned char reserved:1;\n\t\tunsigned char seek:2;\t \n\t\tunsigned char auth:2;\t \n\t\tunsigned char pci:1;\t \n\t} __attribute__ ((packed)) mask;\n\tstruct {\n\t\tunsigned char mode:2;\t \n\t\tunsigned char ckd:1;\t \n\t\tunsigned char operation:3;\t \n\t\tunsigned char cfw:1;\t \n\t\tunsigned char dfw:1;\t \n\t} __attribute__ ((packed)) attributes;\n\t__u16 blk_size;\t\t \n\t__u16 fast_write_id;\n\t__u8 ga_additional;\t \n\t__u8 ga_extended;\t \n\tstruct ch_t beg_ext;\n\tstruct ch_t end_ext;\n\tunsigned long ep_sys_time;  \n\t__u8 ep_format;         \n\t__u8 ep_prio;           \n\t__u8 ep_reserved1;      \n\t__u8 ep_rec_per_track;  \n\t__u8 ep_reserved[4];    \n} __attribute__ ((packed));\n\nstruct LO_eckd_data {\n\tstruct {\n\t\tunsigned char orientation:2;\n\t\tunsigned char operation:6;\n\t} __attribute__ ((packed)) operation;\n\tstruct {\n\t\tunsigned char last_bytes_used:1;\n\t\tunsigned char reserved:6;\n\t\tunsigned char read_count_suffix:1;\n\t} __attribute__ ((packed)) auxiliary;\n\t__u8 unused;\n\t__u8 count;\n\tstruct ch_t seek_addr;\n\tstruct chr_t search_arg;\n\t__u8 sector;\n\t__u16 length;\n} __attribute__ ((packed));\n\nstruct LRE_eckd_data {\n\tstruct {\n\t\tunsigned char orientation:2;\n\t\tunsigned char operation:6;\n\t} __attribute__ ((packed)) operation;\n\tstruct {\n\t\tunsigned char length_valid:1;\n\t\tunsigned char length_scope:1;\n\t\tunsigned char imbedded_ccw_valid:1;\n\t\tunsigned char check_bytes:2;\n\t\tunsigned char imbedded_count_valid:1;\n\t\tunsigned char reserved:1;\n\t\tunsigned char read_count_suffix:1;\n\t} __attribute__ ((packed)) auxiliary;\n\t__u8 imbedded_ccw;\n\t__u8 count;\n\tstruct ch_t seek_addr;\n\tstruct chr_t search_arg;\n\t__u8 sector;\n\t__u16 length;\n\t__u8 imbedded_count;\n\t__u8 extended_operation;\n\t__u16 extended_parameter_length;\n\t__u8 extended_parameter[];\n} __attribute__ ((packed));\n\n \nstruct PFX_eckd_data {\n\tunsigned char format;\n\tstruct {\n\t\tunsigned char define_extent:1;\n\t\tunsigned char time_stamp:1;\n\t\tunsigned char verify_base:1;\n\t\tunsigned char hyper_pav:1;\n\t\tunsigned char reserved:4;\n\t} __attribute__ ((packed)) validity;\n\t__u8 base_address;\n\t__u8 aux;\n\t__u8 base_lss;\n\t__u8 reserved[7];\n\tstruct DE_eckd_data define_extent;\n\tstruct LRE_eckd_data locate_record;\n} __attribute__ ((packed));\n\nstruct dasd_eckd_characteristics {\n\t__u16 cu_type;\n\tstruct {\n\t\tunsigned char support:2;\n\t\tunsigned char async:1;\n\t\tunsigned char reserved:1;\n\t\tunsigned char cache_info:1;\n\t\tunsigned char model:3;\n\t} __attribute__ ((packed)) cu_model;\n\t__u16 dev_type;\n\t__u8 dev_model;\n\tstruct {\n\t\tunsigned char mult_burst:1;\n\t\tunsigned char RT_in_LR:1;\n\t\tunsigned char reserved1:1;\n\t\tunsigned char RD_IN_LR:1;\n\t\tunsigned char reserved2:4;\n\t\tunsigned char reserved3:8;\n\t\tunsigned char defect_wr:1;\n\t\tunsigned char XRC_supported:1;\n\t\tunsigned char PPRC_enabled:1;\n\t\tunsigned char striping:1;\n\t\tunsigned char reserved5:4;\n\t\tunsigned char cfw:1;\n\t\tunsigned char reserved6:2;\n\t\tunsigned char cache:1;\n\t\tunsigned char dual_copy:1;\n\t\tunsigned char dfw:1;\n\t\tunsigned char reset_alleg:1;\n\t\tunsigned char sense_down:1;\n\t} __attribute__ ((packed)) facilities;\n\t__u8 dev_class;\n\t__u8 unit_type;\n\t__u16 no_cyl;\n\t__u16 trk_per_cyl;\n\t__u8 sec_per_trk;\n\t__u8 byte_per_track[3];\n\t__u16 home_bytes;\n\t__u8 formula;\n\tunion {\n\t\tstruct {\n\t\t\t__u8 f1;\n\t\t\t__u16 f2;\n\t\t\t__u16 f3;\n\t\t} __attribute__ ((packed)) f_0x01;\n\t\tstruct {\n\t\t\t__u8 f1;\n\t\t\t__u8 f2;\n\t\t\t__u8 f3;\n\t\t\t__u8 f4;\n\t\t\t__u8 f5;\n\t\t} __attribute__ ((packed)) f_0x02;\n\t} __attribute__ ((packed)) factors;\n\t__u16 first_alt_trk;\n\t__u16 no_alt_trk;\n\t__u16 first_dia_trk;\n\t__u16 no_dia_trk;\n\t__u16 first_sup_trk;\n\t__u16 no_sup_trk;\n\t__u8 MDR_ID;\n\t__u8 OBR_ID;\n\t__u8 director;\n\t__u8 rd_trk_set;\n\t__u16 max_rec_zero;\n\t__u8 reserved1;\n\t__u8 RWANY_in_LR;\n\t__u8 factor6;\n\t__u8 factor7;\n\t__u8 factor8;\n\t__u8 reserved2[3];\n\t__u8 reserved3[6];\n\t__u32 long_no_cyl;\n} __attribute__ ((packed));\n\n \nstruct dasd_ned {\n\tstruct {\n\t\t__u8 identifier:2;\n\t\t__u8 token_id:1;\n\t\t__u8 sno_valid:1;\n\t\t__u8 subst_sno:1;\n\t\t__u8 recNED:1;\n\t\t__u8 emuNED:1;\n\t\t__u8 reserved:1;\n\t} __attribute__ ((packed)) flags;\n\t__u8 descriptor;\n\t__u8 dev_class;\n\t__u8 reserved;\n\t__u8 dev_type[6];\n\t__u8 dev_model[3];\n\t__u8 HDA_manufacturer[3];\n\tstruct {\n\t\t__u8 HDA_location[2];\n\t\t__u8 HDA_seqno[12];\n\t} serial;\n\t__u8 ID;\n\t__u8 unit_addr;\n} __attribute__ ((packed));\n\nstruct dasd_sneq {\n\tstruct {\n\t\t__u8 identifier:2;\n\t\t__u8 reserved:6;\n\t} __attribute__ ((packed)) flags;\n\t__u8 res1;\n\t__u16 format;\n\t__u8 res2[4];\t\t \n\t__u8 sua_flags;\t\t \n\t__u8 base_unit_addr;\t \n\t__u8 res3[22];\t\t \n} __attribute__ ((packed));\n\nstruct vd_sneq {\n\tstruct {\n\t\t__u8 identifier:2;\n\t\t__u8 reserved:6;\n\t} __attribute__ ((packed)) flags;\n\t__u8 res1;\n\t__u16 format;\n\t__u8 res2[4];\t \n\t__u8 uit[16];\t \n\t__u8 res3[8];\t \n} __attribute__ ((packed));\n\nstruct dasd_gneq {\n\tstruct {\n\t\t__u8 identifier:2;\n\t\t__u8 reserved:6;\n\t} __attribute__ ((packed)) flags;\n\t__u8 record_selector;\n\t__u8 reserved[4];\n\tstruct {\n\t\t__u8 value:2;\n\t\t__u8 number:6;\n\t} __attribute__ ((packed)) timeout;\n\t__u8 reserved3;\n\t__u16 subsystemID;\n\t__u8 reserved2[22];\n} __attribute__ ((packed));\n\nstruct dasd_rssd_features {\n\tchar feature[256];\n} __attribute__((packed));\n\nstruct dasd_rssd_messages {\n\t__u16 length;\n\t__u8 format;\n\t__u8 code;\n\t__u32 message_id;\n\t__u8 flags;\n\tchar messages[4087];\n} __packed;\n\n \nstruct dasd_rssd_vsq {\n\tstruct {\n\t\t__u8 tse:1;\n\t\t__u8 space_not_available:1;\n\t\t__u8 ese:1;\n\t\t__u8 unused:5;\n\t} __packed vol_info;\n\t__u8 unused1;\n\t__u16 extent_pool_id;\n\t__u8 warn_cap_limit;\n\t__u8 warn_cap_guaranteed;\n\t__u16 unused2;\n\t__u32 limit_capacity;\n\t__u32 guaranteed_capacity;\n\t__u32 space_allocated;\n\t__u32 space_configured;\n\t__u32 logical_capacity;\n} __packed;\n\n \nstruct dasd_ext_pool_sum {\n\t__u16 pool_id;\n\t__u8 repo_warn_thrshld;\n\t__u8 warn_thrshld;\n\tstruct {\n\t\t__u8 type:1;\t\t\t \n\t\t__u8 track_space_efficient:1;\n\t\t__u8 extent_space_efficient:1;\n\t\t__u8 standard_volume:1;\n\t\t__u8 extent_size_valid:1;\n\t\t__u8 capacity_at_warnlevel:1;\n\t\t__u8 pool_oos:1;\n\t\t__u8 unused0:1;\n\t\t__u8 unused1;\n\t} __packed flags;\n\tstruct {\n\t\t__u8 reserved0:1;\n\t\t__u8 size_1G:1;\n\t\t__u8 reserved1:5;\n\t\t__u8 size_16M:1;\n\t} __packed extent_size;\n\t__u8 unused;\n} __packed;\n\n \nstruct dasd_rssd_lcq {\n\t__u16 data_length;\t\t \n\t__u16 pool_count;\t\t \n\tstruct {\n\t\t__u8 pool_info_valid:1;\t \n\t\t__u8 pool_id_volume:1;\n\t\t__u8 pool_id_cec:1;\n\t\t__u8 unused0:5;\n\t\t__u8 unused1;\n\t} __packed header_flags;\n\tchar sfi_type[6];\t\t \n\tchar sfi_model[3];\t\t \n\t__u8 sfi_seq_num[10];\t\t \n\t__u8 reserved[7];\n\tstruct dasd_ext_pool_sum ext_pool_sum[448];\n} __packed;\n\nstruct dasd_oos_message {\n\t__u16 length;\n\t__u8 format;\n\t__u8 code;\n\t__u8 percentage_empty;\n\t__u8 reserved;\n\t__u16 ext_pool_id;\n\t__u16 token;\n\t__u8 unused[6];\n} __packed;\n\nstruct dasd_cuir_message {\n\t__u16 length;\n\t__u8 format;\n\t__u8 code;\n\t__u32 message_id;\n\t__u8 flags;\n\t__u8 neq_map[3];\n\t__u8 ned_map;\n\t__u8 record_selector;\n} __packed;\n\nstruct dasd_psf_cuir_response {\n\t__u8 order;\n\t__u8 flags;\n\t__u8 cc;\n\t__u8 chpid;\n\t__u16 device_nr;\n\t__u16 reserved;\n\t__u32 message_id;\n\t__u64 system_id;\n\t__u8 cssid;\n\t__u8 ssid;\n} __packed;\n\nstruct dasd_ckd_path_group_entry {\n\t__u8 status_flags;\n\t__u8 pgid[11];\n\t__u8 sysplex_name[8];\n\t__u32 timestamp;\n\t__u32 cylinder;\n\t__u8 reserved[4];\n} __packed;\n\nstruct dasd_ckd_host_information {\n\t__u8 access_flags;\n\t__u8 entry_size;\n\t__u16 entry_count;\n\t__u8 entry[16390];\n} __packed;\n\nstruct dasd_psf_query_host_access {\n\t__u8 access_flag;\n\t__u8 version;\n\t__u16 CKD_length;\n\t__u16 SCSI_length;\n\t__u8 unused[10];\n\t__u8 host_access_information[16394];\n} __packed;\n\n \nstruct dasd_psf_prssd_data {\n\tunsigned char order;\n\tunsigned char flags;\n\tunsigned char reserved1;\n\tunsigned char reserved2;\n\tunsigned char lss;\n\tunsigned char volume;\n\tunsigned char suborder;\n\tunsigned char varies[5];\n} __attribute__ ((packed));\n\n \nstruct dasd_psf_ssc_data {\n\tunsigned char order;\n\tunsigned char flags;\n\tunsigned char cu_type[4];\n\tunsigned char suborder;\n\tunsigned char reserved[59];\n} __attribute__((packed));\n\n \n#define DASD_ECKD_RAS_EXTS_MAX\t\t110U\n\nstruct dasd_dso_ras_ext_range {\n\tstruct ch_t beg_ext;\n\tstruct ch_t end_ext;\n} __packed;\n\n \nstruct dasd_dso_ras_data {\n\t__u8 order;\n\tstruct {\n\t\t__u8 message:1;\t\t \n\t\t__u8 reserved1:2;\n\t\t__u8 vol_type:1;\t \n\t\t__u8 reserved2:4;\n\t} __packed flags;\n\t \n\tstruct {\n\t\t__u8 reserved1:2;\n\t\t \n\t\t__u8 by_extent:1;\t \n\t\t__u8 guarantee_init:1;\n\t\t__u8 force_release:1;\t \n\t\t__u16 reserved2:11;\n\t} __packed op_flags;\n\t__u8 lss;\n\t__u8 dev_addr;\n\t__u32 reserved1;\n\t__u8 reserved2[10];\n\t__u16 nr_exts;\t\t\t \n\t__u16 reserved3;\n} __packed;\n\n\n \nstruct dasd_unit_address_configuration {\n\tstruct {\n\t\tchar ua_type;\n\t\tchar base_ua;\n\t} unit[256];\n} __attribute__((packed));\n\n\n#define MAX_DEVICES_PER_LCU 256\n\n \n#define NEED_UAC_UPDATE  0x01\n#define UPDATE_PENDING\t0x02\n\nenum pavtype {NO_PAV, BASE_PAV, HYPER_PAV};\n\n\nstruct alias_root {\n\tstruct list_head serverlist;\n\tspinlock_t lock;\n};\n\nstruct alias_server {\n\tstruct list_head server;\n\tstruct dasd_uid uid;\n\tstruct list_head lculist;\n};\n\nstruct summary_unit_check_work_data {\n\tchar reason;\n\tstruct dasd_device *device;\n\tstruct work_struct worker;\n};\n\nstruct read_uac_work_data {\n\tstruct dasd_device *device;\n\tstruct delayed_work dwork;\n};\n\nstruct alias_lcu {\n\tstruct list_head lcu;\n\tstruct dasd_uid uid;\n\tenum pavtype pav;\n\tchar flags;\n\tspinlock_t lock;\n\tstruct list_head grouplist;\n\tstruct list_head active_devices;\n\tstruct list_head inactive_devices;\n\tstruct dasd_unit_address_configuration *uac;\n\tstruct summary_unit_check_work_data suc_data;\n\tstruct read_uac_work_data ruac_data;\n\tstruct dasd_ccw_req *rsu_cqr;\n\tstruct completion lcu_setup;\n};\n\nstruct alias_pav_group {\n\tstruct list_head group;\n\tstruct dasd_uid uid;\n\tstruct alias_lcu *lcu;\n\tstruct list_head baselist;\n\tstruct list_head aliaslist;\n\tstruct dasd_device *next;\n};\n\nstruct dasd_conf_data {\n\tstruct dasd_ned neds[5];\n\tu8 reserved[64];\n\tstruct dasd_gneq gneq;\n} __packed;\n\nstruct dasd_conf {\n\tu8 *data;\n\tint len;\n\t \n\tstruct dasd_ned *ned;\n\tstruct dasd_sneq *sneq;\n\tstruct vd_sneq *vdsneq;\n\tstruct dasd_gneq *gneq;\n};\n\nstruct dasd_eckd_private {\n\tstruct dasd_eckd_characteristics rdc_data;\n\tstruct dasd_conf conf;\n\n\tstruct eckd_count count_area[5];\n\tint init_cqr_status;\n\tint uses_cdl;\n\tstruct attrib_data_t attrib;\t \n\tstruct dasd_rssd_features features;\n\tstruct dasd_rssd_vsq vsq;\n\tstruct dasd_ext_pool_sum eps;\n\tu32 real_cyl;\n\n\t \n\tstruct dasd_uid uid;\n\tstruct alias_pav_group *pavgroup;\n\tstruct alias_lcu *lcu;\n\tint count;\n\n\tu32 fcx_max_data;\n\tchar suc_reason;\n};\n\n\n\nint dasd_alias_make_device_known_to_lcu(struct dasd_device *);\nvoid dasd_alias_disconnect_device_from_lcu(struct dasd_device *);\nint dasd_alias_add_device(struct dasd_device *);\nint dasd_alias_remove_device(struct dasd_device *);\nstruct dasd_device *dasd_alias_get_start_dev(struct dasd_device *);\nvoid dasd_alias_handle_summary_unit_check(struct work_struct *);\nvoid dasd_eckd_reset_ccw_to_base_io(struct dasd_ccw_req *);\nint dasd_alias_update_add_device(struct dasd_device *);\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}