{
  "module_name": "zfcp_fsf.h",
  "hash_id": "92014d3cc044a0a5ab650ac56345f74d38de95135b4eea3d915671c40db39663",
  "original_prompt": "Ingested from linux-6.6.14/drivers/s390/scsi/zfcp_fsf.h",
  "human_readable_source": " \n \n\n#ifndef FSF_H\n#define FSF_H\n\n#include <linux/pfn.h>\n#include <linux/scatterlist.h>\n#include <scsi/libfc.h>\n\n#define FSF_QTCB_CURRENT_VERSION\t\t0x00000001\n\n \n#define\tFSF_QTCB_FCP_CMND\t\t\t0x00000001\n#define\tFSF_QTCB_ABORT_FCP_CMND\t\t\t0x00000002\n#define\tFSF_QTCB_OPEN_PORT_WITH_DID\t\t0x00000005\n#define\tFSF_QTCB_OPEN_LUN\t\t\t0x00000006\n#define\tFSF_QTCB_CLOSE_LUN\t\t\t0x00000007\n#define\tFSF_QTCB_CLOSE_PORT\t\t\t0x00000008\n#define\tFSF_QTCB_CLOSE_PHYSICAL_PORT\t\t0x00000009\n#define\tFSF_QTCB_SEND_ELS\t\t\t0x0000000B\n#define\tFSF_QTCB_SEND_GENERIC\t\t\t0x0000000C\n#define\tFSF_QTCB_EXCHANGE_CONFIG_DATA\t\t0x0000000D\n#define\tFSF_QTCB_EXCHANGE_PORT_DATA\t\t0x0000000E\n#define FSF_QTCB_DOWNLOAD_CONTROL_FILE\t\t0x00000012\n#define FSF_QTCB_UPLOAD_CONTROL_FILE\t\t0x00000013\n\n \n#define FSF_IO_COMMAND\t\t\t\t0x00000001\n#define FSF_SUPPORT_COMMAND\t\t\t0x00000002\n#define FSF_CONFIG_COMMAND\t\t\t0x00000003\n#define FSF_PORT_COMMAND\t\t\t0x00000004\n\n \n#define FSF_PROT_GOOD\t\t\t\t0x00000001\n#define FSF_PROT_QTCB_VERSION_ERROR\t\t0x00000010\n#define FSF_PROT_SEQ_NUMB_ERROR\t\t\t0x00000020\n#define FSF_PROT_UNSUPP_QTCB_TYPE\t\t0x00000040\n#define FSF_PROT_HOST_CONNECTION_INITIALIZING\t0x00000080\n#define FSF_PROT_FSF_STATUS_PRESENTED\t\t0x00000100\n#define FSF_PROT_DUPLICATE_REQUEST_ID\t\t0x00000200\n#define FSF_PROT_LINK_DOWN                      0x00000400\n#define FSF_PROT_REEST_QUEUE                    0x00000800\n#define FSF_PROT_ERROR_STATE\t\t\t0x01000000\n\n \n#define FSF_GOOD\t\t\t\t0x00000000\n#define FSF_PORT_ALREADY_OPEN\t\t\t0x00000001\n#define FSF_LUN_ALREADY_OPEN\t\t\t0x00000002\n#define FSF_PORT_HANDLE_NOT_VALID\t\t0x00000003\n#define FSF_LUN_HANDLE_NOT_VALID\t\t0x00000004\n#define FSF_HANDLE_MISMATCH\t\t\t0x00000005\n#define FSF_SERVICE_CLASS_NOT_SUPPORTED\t\t0x00000006\n#define FSF_FCPLUN_NOT_VALID\t\t\t0x00000009\n#define FSF_LUN_SHARING_VIOLATION               0x00000012\n#define FSF_FCP_COMMAND_DOES_NOT_EXIST\t\t0x00000022\n#define FSF_DIRECTION_INDICATOR_NOT_VALID\t0x00000030\n#define FSF_CMND_LENGTH_NOT_VALID\t\t0x00000033\n#define FSF_MAXIMUM_NUMBER_OF_PORTS_EXCEEDED\t0x00000040\n#define FSF_MAXIMUM_NUMBER_OF_LUNS_EXCEEDED\t0x00000041\n#define FSF_ELS_COMMAND_REJECTED\t\t0x00000050\n#define FSF_GENERIC_COMMAND_REJECTED\t\t0x00000051\n#define FSF_PORT_BOXED\t\t\t\t0x00000059\n#define FSF_LUN_BOXED\t\t\t\t0x0000005A\n#define FSF_EXCHANGE_CONFIG_DATA_INCOMPLETE\t0x0000005B\n#define FSF_PAYLOAD_SIZE_MISMATCH\t\t0x00000060\n#define FSF_REQUEST_SIZE_TOO_LARGE\t\t0x00000061\n#define FSF_RESPONSE_SIZE_TOO_LARGE\t\t0x00000062\n#define FSF_SBAL_MISMATCH\t\t\t0x00000063\n#define FSF_INCONSISTENT_PROT_DATA\t\t0x00000070\n#define FSF_INVALID_PROT_PARM\t\t\t0x00000071\n#define FSF_BLOCK_GUARD_CHECK_FAILURE\t\t0x00000081\n#define FSF_APP_TAG_CHECK_FAILURE\t\t0x00000082\n#define FSF_REF_TAG_CHECK_FAILURE\t\t0x00000083\n#define FSF_SECURITY_ERROR\t\t\t0x00000090\n#define FSF_ADAPTER_STATUS_AVAILABLE\t\t0x000000AD\n#define FSF_FCP_RSP_AVAILABLE\t\t\t0x000000AF\n#define FSF_UNKNOWN_COMMAND\t\t\t0x000000E2\n#define FSF_UNKNOWN_OP_SUBTYPE                  0x000000E3\n#define FSF_INVALID_COMMAND_OPTION              0x000000E5\n\n#define FSF_PROT_STATUS_QUAL_SIZE\t\t16\n#define FSF_STATUS_QUALIFIER_SIZE\t\t16\n\n \n#define FSF_SQ_NO_RECOM\t\t\t\t0x00\n#define FSF_SQ_FCP_RSP_AVAILABLE\t\t0x01\n#define FSF_SQ_RETRY_IF_POSSIBLE\t\t0x02\n#define FSF_SQ_ULP_DEPENDENT_ERP_REQUIRED\t0x03\n#define FSF_SQ_INVOKE_LINK_TEST_PROCEDURE\t0x04\n#define FSF_SQ_COMMAND_ABORTED\t\t\t0x06\n#define FSF_SQ_NO_RETRY_POSSIBLE\t\t0x07\n\n \n#define FSF_PSQ_LINK_NO_LIGHT\t\t\t0x00000004\n#define FSF_PSQ_LINK_WRAP_PLUG\t\t\t0x00000008\n#define FSF_PSQ_LINK_NO_FCP\t\t\t0x00000010\n#define FSF_PSQ_LINK_FIRMWARE_UPDATE\t\t0x00000020\n#define FSF_PSQ_LINK_INVALID_WWPN\t\t0x00000100\n#define FSF_PSQ_LINK_NO_NPIV_SUPPORT\t\t0x00000200\n#define FSF_PSQ_LINK_NO_FCP_RESOURCES\t\t0x00000400\n#define FSF_PSQ_LINK_NO_FABRIC_RESOURCES\t0x00000800\n#define FSF_PSQ_LINK_FABRIC_LOGIN_UNABLE\t0x00001000\n#define FSF_PSQ_LINK_WWPN_ASSIGNMENT_CORRUPTED\t0x00002000\n#define FSF_PSQ_LINK_MODE_TABLE_CURRUPTED\t0x00004000\n#define FSF_PSQ_LINK_NO_WWPN_ASSIGNMENT\t\t0x00008000\n\n \n#define FSF_SQ_SECURITY_REQUIRED\t\t0x00000001\n#define FSF_SQ_SECURITY_TIMEOUT\t\t\t0x00000002\n#define FSF_SQ_SECURITY_KM_UNAVAILABLE\t\t0x00000003\n#define FSF_SQ_SECURITY_RKM_UNAVAILABLE\t\t0x00000004\n#define FSF_SQ_SECURITY_AUTH_FAILURE\t\t0x00000005\n#define FSF_SQ_SECURITY_ENC_FAILURE\t\t0x00000010\n\n \n#define FSF_STATUS_READ_PAYLOAD_SIZE\t\t4032\n\n \n#define FSF_STATUS_READS_RECOM\t\t\t16\n\n \n#define FSF_STATUS_READ_PORT_CLOSED\t\t0x00000001\n#define FSF_STATUS_READ_INCOMING_ELS\t\t0x00000002\n#define FSF_STATUS_READ_SENSE_DATA_AVAIL        0x00000003\n#define FSF_STATUS_READ_BIT_ERROR_THRESHOLD\t0x00000004\n#define FSF_STATUS_READ_LINK_DOWN\t\t0x00000005\n#define FSF_STATUS_READ_LINK_UP          \t0x00000006\n#define FSF_STATUS_READ_NOTIFICATION_LOST\t0x00000009\n#define FSF_STATUS_READ_FEATURE_UPDATE_ALERT\t0x0000000C\n#define FSF_STATUS_READ_VERSION_CHANGE\t\t0x0000000D\n\n \n#define FSF_STATUS_READ_SUB_NO_PHYSICAL_LINK\t0x00000000\n#define FSF_STATUS_READ_SUB_FDISC_FAILED\t0x00000001\n#define FSF_STATUS_READ_SUB_FIRMWARE_UPDATE\t0x00000002\n\n \n#define FSF_STATUS_READ_SUB_INCOMING_ELS\t0x00000001\n#define FSF_STATUS_READ_SUB_VERSION_CHANGE\t0x00000100\n\n \n#define FSF_STATUS_READ_SUB_LIC_CHANGE\t\t0x00000001\n\n \n#define FSF_TOPO_P2P\t\t\t\t0x00000001\n#define FSF_TOPO_FABRIC\t\t\t\t0x00000002\n#define FSF_TOPO_AL\t\t\t\t0x00000003\n\n \n#define FSF_DATADIR_WRITE\t\t\t0x00000001\n#define FSF_DATADIR_READ\t\t\t0x00000002\n#define FSF_DATADIR_CMND\t\t\t0x00000004\n#define FSF_DATADIR_DIF_WRITE_INSERT\t\t0x00000009\n#define FSF_DATADIR_DIF_READ_STRIP\t\t0x0000000a\n#define FSF_DATADIR_DIF_WRITE_CONVERT\t\t0x0000000b\n#define FSF_DATADIR_DIF_READ_CONVERT\t\t0X0000000c\n\n \n#define FSF_APP_TAG_CHECK_ENABLE\t\t0x10\n\n \n#define FSF_CLASS_3\t\t\t\t0x00000003\n\n \n#define FSF_QTCB_LOG_SIZE\t\t\t1024\n\n \n#define FSF_FEATURE_NOTIFICATION_LOST\t\t0x00000008\n#define FSF_FEATURE_HBAAPI_MANAGEMENT           0x00000010\n#define FSF_FEATURE_ELS_CT_CHAINED_SBALS\t0x00000020\n#define FSF_FEATURE_UPDATE_ALERT\t\t0x00000100\n#define FSF_FEATURE_MEASUREMENT_DATA\t\t0x00000200\n#define FSF_FEATURE_REQUEST_SFP_DATA\t\t0x00000200\n#define FSF_FEATURE_REPORT_SFP_DATA\t\t0x00000800\n#define FSF_FEATURE_FC_SECURITY\t\t\t0x00001000\n#define FSF_FEATURE_DIF_PROT_TYPE1\t\t0x00010000\n#define FSF_FEATURE_DIX_PROT_TCPIP\t\t0x00020000\n\n \n#define FSF_FEATURE_NPIV_MODE\t\t\t0x00000001\n\n \n#define FSF_OPEN_LUN_SUPPRESS_BOXING\t\t0x00000001\n\n \n#define FSF_FC_SECURITY_AUTH\t\t\t0x00000001\n#define FSF_FC_SECURITY_ENC_FCSP2\t\t0x00000002\n#define FSF_FC_SECURITY_ENC_ERAS\t\t0x00000004\n\nstruct fsf_queue_designator {\n\tu8  cssid;\n\tu8  chpid;\n\tu8  hla;\n\tu8  ua;\n\tu32 res1;\n} __attribute__ ((packed));\n\nstruct fsf_bit_error_payload {\n\tu32 res1;\n\tu32 link_failure_error_count;\n\tu32 loss_of_sync_error_count;\n\tu32 loss_of_signal_error_count;\n\tu32 primitive_sequence_error_count;\n\tu32 invalid_transmission_word_error_count;\n\tu32 crc_error_count;\n\tu32 primitive_sequence_event_timeout_count;\n\tu32 elastic_buffer_overrun_error_count;\n\tu32 fcal_arbitration_timeout_count;\n\tu32 advertised_receive_b2b_credit;\n\tu32 current_receive_b2b_credit;\n\tu32 advertised_transmit_b2b_credit;\n\tu32 current_transmit_b2b_credit;\n} __attribute__ ((packed));\n\nstruct fsf_link_down_info {\n\tu32 error_code;\n\tu32 res1;\n\tu8 res2[2];\n\tu8 primary_status;\n\tu8 ioerr_code;\n\tu8 action_code;\n\tu8 reason_code;\n\tu8 explanation_code;\n\tu8 vendor_specific_code;\n} __attribute__ ((packed));\n\nstruct fsf_version_change {\n\tu32 current_version;\n\tu32 previous_version;\n} __packed;\n\nstruct fsf_status_read_buffer {\n\tu32 status_type;\n\tu32 status_subtype;\n\tu32 length;\n\tu32 res1;\n\tstruct fsf_queue_designator queue_designator;\n\tu8 res2;\n\tu8 d_id[3];\n\tu32 class;\n\tu64 fcp_lun;\n\tu8  res3[24];\n\tunion {\n\t\tu8  data[FSF_STATUS_READ_PAYLOAD_SIZE];\n\t\tu32 word[FSF_STATUS_READ_PAYLOAD_SIZE/sizeof(u32)];\n\t\tstruct fsf_link_down_info link_down_info;\n\t\tstruct fsf_bit_error_payload bit_error;\n\t\tstruct fsf_version_change version_change;\n\t} payload;\n} __attribute__ ((packed));\n\nstruct fsf_qual_version_error {\n\tu32 fsf_version;\n\tu32 res1[3];\n} __attribute__ ((packed));\n\nstruct fsf_qual_sequence_error {\n\tu32 exp_req_seq_no;\n\tu32 res1[3];\n} __attribute__ ((packed));\n\nstruct fsf_qual_latency_info {\n\tu32 channel_lat;\n\tu32 fabric_lat;\n\tu8 res1[8];\n} __attribute__ ((packed));\n\nunion fsf_prot_status_qual {\n\tu32 word[FSF_PROT_STATUS_QUAL_SIZE / sizeof(u32)];\n\tu64 doubleword[FSF_PROT_STATUS_QUAL_SIZE / sizeof(u64)];\n\tstruct fsf_qual_version_error   version_error;\n\tstruct fsf_qual_sequence_error  sequence_error;\n\tstruct fsf_link_down_info link_down_info;\n\tstruct fsf_qual_latency_info latency_info;\n} __attribute__ ((packed));\n\nstruct fsf_qtcb_prefix {\n\tu64 req_id;\n\tu32 qtcb_version;\n\tu32 ulp_info;\n\tu32 qtcb_type;\n\tu32 req_seq_no;\n\tu32 prot_status;\n\tunion fsf_prot_status_qual prot_status_qual;\n\tu8  res1[20];\n} __attribute__ ((packed));\n\nstruct fsf_statistics_info {\n\tu64 input_req;\n\tu64 output_req;\n\tu64 control_req;\n\tu64 input_mb;\n\tu64 output_mb;\n\tu64 seconds_act;\n} __attribute__ ((packed));\n\nunion fsf_status_qual {\n\tu8  byte[FSF_STATUS_QUALIFIER_SIZE];\n\tu16 halfword[FSF_STATUS_QUALIFIER_SIZE / sizeof (u16)];\n\tu32 word[FSF_STATUS_QUALIFIER_SIZE / sizeof (u32)];\n\tu64 doubleword[FSF_STATUS_QUALIFIER_SIZE / sizeof(u64)];\n\tstruct fsf_queue_designator fsf_queue_designator;\n\tstruct fsf_link_down_info link_down_info;\n} __attribute__ ((packed));\n\nstruct fsf_qtcb_header {\n\tu64 req_handle;\n\tu32 fsf_command;\n\tu32 res1;\n\tu32 port_handle;\n\tu32 lun_handle;\n\tu32 res2;\n\tu32 fsf_status;\n\tunion fsf_status_qual fsf_status_qual;\n\tu8  res3[28];\n\tu16 log_start;\n\tu16 log_length;\n\tu8  res4[16];\n} __attribute__ ((packed));\n\n#define FSF_PLOGI_MIN_LEN\t112\n\n#define FSF_FCP_CMND_SIZE\t288\n#define FSF_FCP_RSP_SIZE\t128\n\nstruct fsf_qtcb_bottom_io {\n\tu32 data_direction;\n\tu32 service_class;\n\tu8  res1;\n\tu8  data_prot_flags;\n\tu16 app_tag_value;\n\tu32 ref_tag_value;\n\tu32 fcp_cmnd_length;\n\tu32 data_block_length;\n\tu32 prot_data_length;\n\tu8  res2[4];\n\tunion {\n\t\tu8\t\tbyte[FSF_FCP_CMND_SIZE];\n\t\tstruct fcp_cmnd iu;\n\t}   fcp_cmnd;\n\tunion {\n\t\tu8\t\t\t byte[FSF_FCP_RSP_SIZE];\n\t\tstruct fcp_resp_with_ext iu;\n\t}   fcp_rsp;\n\tu8  res3[64];\n} __attribute__ ((packed));\n\nstruct fsf_qtcb_bottom_support {\n\tu32 operation_subtype;\n\tu8  res1[13];\n\tu8 d_id[3];\n\tu32 option;\n\tu64 fcp_lun;\n\tu64 res2;\n\tu64 req_handle;\n\tu32 service_class;\n\tu8  res3[3];\n\tu8  timeout;\n        u32 lun_access_info;\n\tu32 connection_info;\n\tu8  res4[176];\n\tu32 els1_length;\n\tu32 els2_length;\n\tu32 req_buf_length;\n\tu32 resp_buf_length;\n\tu8  els[256];\n} __attribute__ ((packed));\n\n#define ZFCP_FSF_TIMER_INT_MASK\t0x3FFF\n\nstruct fsf_qtcb_bottom_config {\n\tu32 lic_version;\n\tu32 feature_selection;\n\tu32 high_qtcb_version;\n\tu32 low_qtcb_version;\n\tu32 max_qtcb_size;\n\tu32 max_data_transfer_size;\n\tu32 adapter_features;\n\tu32 connection_features;\n\tu32 fc_topology;\n\tu32 fc_link_speed;\t \n\tu32 adapter_type;\n\tu8 res0;\n\tu8 peer_d_id[3];\n\tu16 status_read_buf_num;\n\tu16 timer_interval;\n\tu8 res2[9];\n\tu8 s_id[3];\n\tu8 nport_serv_param[128];\n\tu8 res3[8];\n\tu32 adapter_ports;\n\tu32 hardware_version;\n\tu8 serial_number[32];\n\tu8 plogi_payload[112];\n\tstruct fsf_statistics_info stat_info;\n\tu8 res4[112];\n} __attribute__ ((packed));\n\nstruct fsf_qtcb_bottom_port {\n\tu64 wwpn;\n\tu32 fc_port_id;\n\tu32 port_type;\n\tu32 port_state;\n\tu32 class_of_service;\t \n\tu8 supported_fc4_types[32];  \n\tu8 active_fc4_types[32];\n\tu32 supported_speed;\t \n\tu32 maximum_frame_size;\t \n\tu64 seconds_since_last_reset;\n\tu64 tx_frames;\n\tu64 tx_words;\n\tu64 rx_frames;\n\tu64 rx_words;\n\tu64 lip;\t\t \n\tu64 nos;\t\t \n\tu64 error_frames;\t \n\tu64 dumped_frames;\t \n\tu64 link_failure;\n\tu64 loss_of_sync;\n\tu64 loss_of_signal;\n\tu64 psp_error_counts;\n\tu64 invalid_tx_words;\n\tu64 invalid_crcs;\n\tu64 input_requests;\n\tu64 output_requests;\n\tu64 control_requests;\n\tu64 input_mb;\t\t \n\tu64 output_mb;\t\t \n\tu8 cp_util;\n\tu8 cb_util;\n\tu8 a_util;\n\tu8 res2;\n\ts16 temperature;\n\tu16 vcc;\n\tu16 tx_bias;\n\tu16 tx_power;\n\tu16 rx_power;\n\tunion {\n\t\tu16 raw;\n\t\tstruct {\n\t\t\tu16 fec_active\t\t:1;\n\t\t\tu16:7;\n\t\t\tu16 connector_type\t:2;\n\t\t\tu16 sfp_invalid\t\t:1;\n\t\t\tu16 optical_port\t:1;\n\t\t\tu16 port_tx_type\t:4;\n\t\t};\n\t} sfp_flags;\n\tu32 fc_security_algorithms;\n\tu8 res3[236];\n} __attribute__ ((packed));\n\nunion fsf_qtcb_bottom {\n\tstruct fsf_qtcb_bottom_io      io;\n\tstruct fsf_qtcb_bottom_support support;\n\tstruct fsf_qtcb_bottom_config  config;\n\tstruct fsf_qtcb_bottom_port port;\n};\n\nstruct fsf_qtcb {\n\tstruct fsf_qtcb_prefix prefix;\n\tstruct fsf_qtcb_header header;\n\tunion  fsf_qtcb_bottom bottom;\n\tu8 log[FSF_QTCB_LOG_SIZE];\n} __attribute__ ((packed));\n\nstruct zfcp_blk_drv_data {\n#define ZFCP_BLK_DRV_DATA_MAGIC\t\t\t0x1\n\tu32 magic;\n#define ZFCP_BLK_LAT_VALID\t\t\t0x1\n#define ZFCP_BLK_REQ_ERROR\t\t\t0x2\n\tu16 flags;\n\tu8 inb_usage;\n\tu8 outb_usage;\n\tu64 channel_lat;\n\tu64 fabric_lat;\n} __attribute__ ((packed));\n\n \nstruct zfcp_fsf_ct_els {\n\tstruct scatterlist *req;\n\tstruct scatterlist *resp;\n\tvoid (*handler)(void *);\n\tvoid *handler_data;\n\tstruct zfcp_port *port;\n\tint status;\n\tu32 d_id;\n};\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}