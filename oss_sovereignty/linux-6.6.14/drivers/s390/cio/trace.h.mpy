{
  "module_name": "trace.h",
  "hash_id": "4be14cad2fc18d89eef4e64be78ce13cfb4fd307aa26ce167e1f7a0e0618ff16",
  "original_prompt": "Ingested from linux-6.6.14/drivers/s390/cio/trace.h",
  "human_readable_source": " \n \n\n#include <linux/kernel.h>\n#include <asm/crw.h>\n#include <uapi/asm/chpid.h>\n#include <uapi/asm/schid.h>\n#include \"cio.h\"\n#include \"orb.h\"\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM s390\n\n#if !defined(_TRACE_S390_CIO_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_S390_CIO_H\n\n#include <linux/tracepoint.h>\n\nDECLARE_EVENT_CLASS(s390_class_schib,\n\tTP_PROTO(struct subchannel_id schid, struct schib *schib, int cc),\n\tTP_ARGS(schid, schib, cc),\n\tTP_STRUCT__entry(\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field(u16, devno)\n\t\t__field_struct(struct schib, schib)\n\t\t__field(u8, pmcw_ena)\n\t\t__field(u8, pmcw_st)\n\t\t__field(u8, pmcw_dnv)\n\t\t__field(u16, pmcw_dev)\n\t\t__field(u8, pmcw_lpm)\n\t\t__field(u8, pmcw_pnom)\n\t\t__field(u8, pmcw_lpum)\n\t\t__field(u8, pmcw_pim)\n\t\t__field(u8, pmcw_pam)\n\t\t__field(u8, pmcw_pom)\n\t\t__field(u64, pmcw_chpid)\n\t\t__field(int, cc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cssid = schid.cssid;\n\t\t__entry->ssid = schid.ssid;\n\t\t__entry->schno = schid.sch_no;\n\t\t__entry->devno = schib->pmcw.dev;\n\t\t__entry->schib = *schib;\n\t\t__entry->pmcw_ena = schib->pmcw.ena;\n\t\t__entry->pmcw_st = schib->pmcw.ena;\n\t\t__entry->pmcw_dnv = schib->pmcw.dnv;\n\t\t__entry->pmcw_dev = schib->pmcw.dev;\n\t\t__entry->pmcw_lpm = schib->pmcw.lpm;\n\t\t__entry->pmcw_pnom = schib->pmcw.pnom;\n\t\t__entry->pmcw_lpum = schib->pmcw.lpum;\n\t\t__entry->pmcw_pim = schib->pmcw.pim;\n\t\t__entry->pmcw_pam = schib->pmcw.pam;\n\t\t__entry->pmcw_pom = schib->pmcw.pom;\n\t\tmemcpy(&__entry->pmcw_chpid, &schib->pmcw.chpid, 8);\n\t\t__entry->cc = cc;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x cc=%d ena=%d st=%d dnv=%d dev=%04x \"\n\t\t  \"lpm=0x%02x pnom=0x%02x lpum=0x%02x pim=0x%02x pam=0x%02x \"\n\t\t  \"pom=0x%02x chpids=%016llx\",\n\t\t  __entry->cssid, __entry->ssid, __entry->schno, __entry->cc,\n\t\t  __entry->pmcw_ena, __entry->pmcw_st,\n\t\t  __entry->pmcw_dnv, __entry->pmcw_dev,\n\t\t  __entry->pmcw_lpm, __entry->pmcw_pnom,\n\t\t  __entry->pmcw_lpum, __entry->pmcw_pim,\n\t\t  __entry->pmcw_pam, __entry->pmcw_pom,\n\t\t  __entry->pmcw_chpid\n\t)\n);\n\n \nDEFINE_EVENT(s390_class_schib, s390_cio_stsch,\n\tTP_PROTO(struct subchannel_id schid, struct schib *schib, int cc),\n\tTP_ARGS(schid, schib, cc)\n);\n\n \nDEFINE_EVENT(s390_class_schib, s390_cio_msch,\n\tTP_PROTO(struct subchannel_id schid, struct schib *schib, int cc),\n\tTP_ARGS(schid, schib, cc)\n);\n\n \nTRACE_EVENT(s390_cio_tsch,\n\tTP_PROTO(struct subchannel_id schid, struct irb *irb, int cc),\n\tTP_ARGS(schid, irb, cc),\n\tTP_STRUCT__entry(\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field_struct(struct irb, irb)\n\t\t__field(u8, scsw_dcc)\n\t\t__field(u8, scsw_pno)\n\t\t__field(u8, scsw_fctl)\n\t\t__field(u8, scsw_actl)\n\t\t__field(u8, scsw_stctl)\n\t\t__field(u8, scsw_dstat)\n\t\t__field(u8, scsw_cstat)\n\t\t__field(int, cc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cssid = schid.cssid;\n\t\t__entry->ssid = schid.ssid;\n\t\t__entry->schno = schid.sch_no;\n\t\t__entry->irb = *irb;\n\t\t__entry->scsw_dcc = scsw_cc(&irb->scsw);\n\t\t__entry->scsw_pno = scsw_pno(&irb->scsw);\n\t\t__entry->scsw_fctl = scsw_fctl(&irb->scsw);\n\t\t__entry->scsw_actl = scsw_actl(&irb->scsw);\n\t\t__entry->scsw_stctl = scsw_stctl(&irb->scsw);\n\t\t__entry->scsw_dstat = scsw_dstat(&irb->scsw);\n\t\t__entry->scsw_cstat = scsw_cstat(&irb->scsw);\n\t\t__entry->cc = cc;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x cc=%d dcc=%d pno=%d fctl=0x%x actl=0x%x \"\n\t\t  \"stctl=0x%x dstat=0x%x cstat=0x%x\",\n\t\t  __entry->cssid, __entry->ssid, __entry->schno, __entry->cc,\n\t\t  __entry->scsw_dcc, __entry->scsw_pno,\n\t\t  __entry->scsw_fctl, __entry->scsw_actl,\n\t\t  __entry->scsw_stctl,\n\t\t  __entry->scsw_dstat, __entry->scsw_cstat\n\t)\n);\n\n \nTRACE_EVENT(s390_cio_tpi,\n\tTP_PROTO(struct tpi_info *addr, int cc),\n\tTP_ARGS(addr, cc),\n\tTP_STRUCT__entry(\n\t\t__field(int, cc)\n\t\t__field_struct(struct tpi_info, tpi_info)\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field(u8, adapter_IO)\n\t\t__field(u8, isc)\n\t\t__field(u8, type)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cc = cc;\n\t\tif (cc != 0)\n\t\t\tmemset(&__entry->tpi_info, 0, sizeof(struct tpi_info));\n\t\telse if (addr)\n\t\t\t__entry->tpi_info = *addr;\n\t\telse\n\t\t\t__entry->tpi_info = S390_lowcore.tpi_info;\n\t\t__entry->cssid = __entry->tpi_info.schid.cssid;\n\t\t__entry->ssid = __entry->tpi_info.schid.ssid;\n\t\t__entry->schno = __entry->tpi_info.schid.sch_no;\n\t\t__entry->adapter_IO = __entry->tpi_info.adapter_IO;\n\t\t__entry->isc = __entry->tpi_info.isc;\n\t\t__entry->type = __entry->tpi_info.type;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x cc=%d a=%d isc=%d type=%d\",\n\t\t  __entry->cssid, __entry->ssid, __entry->schno, __entry->cc,\n\t\t  __entry->adapter_IO, __entry->isc,\n\t\t  __entry->type\n\t)\n);\n\n \nTRACE_EVENT(s390_cio_ssch,\n\tTP_PROTO(struct subchannel_id schid, union orb *orb, int cc),\n\tTP_ARGS(schid, orb, cc),\n\tTP_STRUCT__entry(\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field_struct(union orb, orb)\n\t\t__field(int, cc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cssid = schid.cssid;\n\t\t__entry->ssid = schid.ssid;\n\t\t__entry->schno = schid.sch_no;\n\t\t__entry->orb = *orb;\n\t\t__entry->cc = cc;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x cc=%d\", __entry->cssid, __entry->ssid,\n\t\t  __entry->schno, __entry->cc\n\t)\n);\n\nDECLARE_EVENT_CLASS(s390_class_schid,\n\tTP_PROTO(struct subchannel_id schid, int cc),\n\tTP_ARGS(schid, cc),\n\tTP_STRUCT__entry(\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field(int, cc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cssid = schid.cssid;\n\t\t__entry->ssid = schid.ssid;\n\t\t__entry->schno = schid.sch_no;\n\t\t__entry->cc = cc;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x cc=%d\", __entry->cssid, __entry->ssid,\n\t\t  __entry->schno, __entry->cc\n\t)\n);\n\n \nDEFINE_EVENT(s390_class_schid, s390_cio_csch,\n\tTP_PROTO(struct subchannel_id schid, int cc),\n\tTP_ARGS(schid, cc)\n);\n\n \nDEFINE_EVENT(s390_class_schid, s390_cio_hsch,\n\tTP_PROTO(struct subchannel_id schid, int cc),\n\tTP_ARGS(schid, cc)\n);\n\n \nDEFINE_EVENT(s390_class_schid, s390_cio_xsch,\n\tTP_PROTO(struct subchannel_id schid, int cc),\n\tTP_ARGS(schid, cc)\n);\n\n \nDEFINE_EVENT(s390_class_schid, s390_cio_rsch,\n\tTP_PROTO(struct subchannel_id schid, int cc),\n\tTP_ARGS(schid, cc)\n);\n\n#define CHSC_MAX_REQUEST_LEN\t\t64\n#define CHSC_MAX_RESPONSE_LEN\t\t64\n\n \nTRACE_EVENT(s390_cio_chsc,\n\tTP_PROTO(struct chsc_header *chsc, int cc),\n\tTP_ARGS(chsc, cc),\n\tTP_STRUCT__entry(\n\t\t__field(int, cc)\n\t\t__field(u16, code)\n\t\t__field(u16, rcode)\n\t\t__array(u8, request, CHSC_MAX_REQUEST_LEN)\n\t\t__array(u8, response, CHSC_MAX_RESPONSE_LEN)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cc = cc;\n\t\t__entry->code = chsc->code;\n\t\tmemcpy(&entry->request, chsc,\n\t\t       min_t(u16, chsc->length, CHSC_MAX_REQUEST_LEN));\n\t\tchsc = (struct chsc_header *) ((char *) chsc + chsc->length);\n\t\t__entry->rcode = chsc->code;\n\t\tmemcpy(&entry->response, chsc,\n\t\t       min_t(u16, chsc->length, CHSC_MAX_RESPONSE_LEN));\n\t),\n\tTP_printk(\"code=0x%04x cc=%d rcode=0x%04x\", __entry->code,\n\t\t  __entry->cc, __entry->rcode)\n);\n\n \nTRACE_EVENT(s390_cio_interrupt,\n\tTP_PROTO(struct tpi_info *tpi_info),\n\tTP_ARGS(tpi_info),\n\tTP_STRUCT__entry(\n\t\t__field_struct(struct tpi_info, tpi_info)\n\t\t__field(u8, cssid)\n\t\t__field(u8, ssid)\n\t\t__field(u16, schno)\n\t\t__field(u8, isc)\n\t\t__field(u8, type)\n\t),\n\tTP_fast_assign(\n\t\t__entry->tpi_info = *tpi_info;\n\t\t__entry->cssid = tpi_info->schid.cssid;\n\t\t__entry->ssid = tpi_info->schid.ssid;\n\t\t__entry->schno = tpi_info->schid.sch_no;\n\t\t__entry->isc = tpi_info->isc;\n\t\t__entry->type = tpi_info->type;\n\t),\n\tTP_printk(\"schid=%x.%x.%04x isc=%d type=%d\",\n\t\t  __entry->cssid, __entry->ssid, __entry->schno,\n\t\t  __entry->isc, __entry->type\n\t)\n);\n\n \nTRACE_EVENT(s390_cio_adapter_int,\n\tTP_PROTO(struct tpi_info *tpi_info),\n\tTP_ARGS(tpi_info),\n\tTP_STRUCT__entry(\n\t\t__field_struct(struct tpi_info, tpi_info)\n\t\t__field(u8, isc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->tpi_info = *tpi_info;\n\t\t__entry->isc = tpi_info->isc;\n\t),\n\tTP_printk(\"isc=%d\", __entry->isc)\n);\n\n \nTRACE_EVENT(s390_cio_stcrw,\n\tTP_PROTO(struct crw *crw, int cc),\n\tTP_ARGS(crw, cc),\n\tTP_STRUCT__entry(\n\t\t__field_struct(struct crw, crw)\n\t\t__field(int, cc)\n\t\t__field(u8, slct)\n\t\t__field(u8, oflw)\n\t\t__field(u8, chn)\n\t\t__field(u8, rsc)\n\t\t__field(u8, anc)\n\t\t__field(u8, erc)\n\t\t__field(u16, rsid)\n\t),\n\tTP_fast_assign(\n\t\t__entry->crw = *crw;\n\t\t__entry->cc = cc;\n\t\t__entry->slct = crw->slct;\n\t\t__entry->oflw = crw->oflw;\n\t\t__entry->chn = crw->chn;\n\t\t__entry->rsc = crw->rsc;\n\t\t__entry->anc = crw->anc;\n\t\t__entry->erc = crw->erc;\n\t\t__entry->rsid = crw->rsid;\n\t),\n\tTP_printk(\"cc=%d slct=%d oflw=%d chn=%d rsc=%d anc=%d erc=0x%x \"\n\t\t  \"rsid=0x%x\",\n\t\t  __entry->cc, __entry->slct, __entry->oflw,\n\t\t  __entry->chn, __entry->rsc,  __entry->anc,\n\t\t  __entry->erc, __entry->rsid\n\t)\n);\n\n#endif  \n\n \n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}