{
  "module_name": "label.h",
  "hash_id": "f9f8c8f0f04f954dfdd7310141b194a3693726cf2ef5e67889fbdfec4984ea36",
  "original_prompt": "Ingested from linux-6.6.14/drivers/nvdimm/label.h",
  "human_readable_source": " \n \n#ifndef __LABEL_H__\n#define __LABEL_H__\n\n#include <linux/ndctl.h>\n#include <linux/sizes.h>\n#include <linux/uuid.h>\n#include <linux/io.h>\n\nenum {\n\tNSINDEX_SIG_LEN = 16,\n\tNSINDEX_ALIGN = 256,\n\tNSINDEX_SEQ_MASK = 0x3,\n\tNSLABEL_UUID_LEN = 16,\n\tNSLABEL_NAME_LEN = 64,\n\tNSLABEL_FLAG_ROLABEL = 0x1,   \n\tNSLABEL_FLAG_LOCAL = 0x2,     \n\tNSLABEL_FLAG_BTT = 0x4,       \n\tNSLABEL_FLAG_UPDATING = 0x8,  \n\tBTT_ALIGN = 4096,             \n\tBTTINFO_SIG_LEN = 16,\n\tBTTINFO_UUID_LEN = 16,\n\tBTTINFO_FLAG_ERROR = 0x1,     \n\tBTTINFO_MAJOR_VERSION = 1,\n\tND_LABEL_MIN_SIZE = 256 * 4,  \n\tND_LABEL_ID_SIZE = 50,\n\tND_NSINDEX_INIT = 0x1,\n};\n\n \nstruct nd_namespace_index {\n\tu8 sig[NSINDEX_SIG_LEN];\n\tu8 flags[3];\n\tu8 labelsize;\n\t__le32 seq;\n\t__le64 myoff;\n\t__le64 mysize;\n\t__le64 otheroff;\n\t__le64 labeloff;\n\t__le32 nslot;\n\t__le16 major;\n\t__le16 minor;\n\t__le64 checksum;\n\tu8 free[];\n};\n\n \nstruct cxl_region_label {\n\tu8 type[NSLABEL_UUID_LEN];\n\tu8 uuid[NSLABEL_UUID_LEN];\n\t__le32 flags;\n\t__le16 nlabel;\n\t__le16 position;\n\t__le64 dpa;\n\t__le64 rawsize;\n\t__le64 hpa;\n\t__le32 slot;\n\t__le32 ig;\n\t__le32 align;\n\tu8 reserved[0xac];\n\t__le64 checksum;\n};\n\n \nstruct nvdimm_efi_label {\n\tu8 uuid[NSLABEL_UUID_LEN];\n\tu8 name[NSLABEL_NAME_LEN];\n\t__le32 flags;\n\t__le16 nlabel;\n\t__le16 position;\n\t__le64 isetcookie;\n\t__le64 lbasize;\n\t__le64 dpa;\n\t__le64 rawsize;\n\t__le32 slot;\n\t \n\tu8 align;\n\tu8 reserved[3];\n\tguid_t type_guid;\n\tguid_t abstraction_guid;\n\tu8 reserved2[88];\n\t__le64 checksum;\n};\n\n \nstruct nvdimm_cxl_label {\n\tu8 type[NSLABEL_UUID_LEN];\n\tu8 uuid[NSLABEL_UUID_LEN];\n\tu8 name[NSLABEL_NAME_LEN];\n\t__le32 flags;\n\t__le16 nrange;\n\t__le16 position;\n\t__le64 dpa;\n\t__le64 rawsize;\n\t__le32 slot;\n\t__le32 align;\n\tu8 region_uuid[16];\n\tu8 abstraction_uuid[16];\n\t__le16 lbasize;\n\tu8 reserved[0x56];\n\t__le64 checksum;\n};\n\nstruct nd_namespace_label {\n\tunion {\n\t\tstruct nvdimm_cxl_label cxl;\n\t\tstruct nvdimm_efi_label efi;\n\t};\n};\n\n#define NVDIMM_BTT_GUID \"8aed63a2-29a2-4c66-8b12-f05d15d3922a\"\n#define NVDIMM_BTT2_GUID \"18633bfc-1735-4217-8ac9-17239282d3f8\"\n#define NVDIMM_PFN_GUID \"266400ba-fb9f-4677-bcb0-968f11d0d225\"\n#define NVDIMM_DAX_GUID \"97a86d9c-3cdd-4eda-986f-5068b4f80088\"\n\n#define CXL_REGION_UUID \"529d7c61-da07-47c4-a93f-ecdf2c06f444\"\n#define CXL_NAMESPACE_UUID \"68bb2c0a-5a77-4937-9f85-3caf41a0f93c\"\n\n \nstruct nd_label_id {\n\tchar id[ND_LABEL_ID_SIZE];\n};\n\n \nstatic inline int nd_label_next_nsindex(int index)\n{\n\tif (index < 0)\n\t\treturn -1;\n\n\treturn (index + 1) % 2;\n}\n\nstruct nvdimm_drvdata;\nint nd_label_data_init(struct nvdimm_drvdata *ndd);\nsize_t sizeof_namespace_index(struct nvdimm_drvdata *ndd);\nint nd_label_active_count(struct nvdimm_drvdata *ndd);\nstruct nd_namespace_label *nd_label_active(struct nvdimm_drvdata *ndd, int n);\nu32 nd_label_alloc_slot(struct nvdimm_drvdata *ndd);\nbool nd_label_free_slot(struct nvdimm_drvdata *ndd, u32 slot);\nu32 nd_label_nfree(struct nvdimm_drvdata *ndd);\nstruct nd_region;\nstruct nd_namespace_pmem;\nint nd_pmem_namespace_label_update(struct nd_region *nd_region,\n\t\tstruct nd_namespace_pmem *nspm, resource_size_t size);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}