{
  "module_name": "balancing.c",
  "hash_id": "40de6fb96f194aef5be7463f025bb5bf01866af1be96b59ded673fe160ca8a43",
  "original_prompt": "Ingested from linux-6.6.14/drivers/sh/intc/balancing.c",
  "human_readable_source": " \n#include \"internals.h\"\n\nstatic unsigned long dist_handle[INTC_NR_IRQS];\n\nvoid intc_balancing_enable(unsigned int irq)\n{\n\tstruct intc_desc_int *d = get_intc_desc(irq);\n\tunsigned long handle = dist_handle[irq];\n\tunsigned long addr;\n\n\tif (irq_balancing_disabled(irq) || !handle)\n\t\treturn;\n\n\taddr = INTC_REG(d, _INTC_ADDR_D(handle), 0);\n\tintc_reg_fns[_INTC_FN(handle)](addr, handle, 1);\n}\n\nvoid intc_balancing_disable(unsigned int irq)\n{\n\tstruct intc_desc_int *d = get_intc_desc(irq);\n\tunsigned long handle = dist_handle[irq];\n\tunsigned long addr;\n\n\tif (irq_balancing_disabled(irq) || !handle)\n\t\treturn;\n\n\taddr = INTC_REG(d, _INTC_ADDR_D(handle), 0);\n\tintc_reg_fns[_INTC_FN(handle)](addr, handle, 0);\n}\n\nstatic unsigned int intc_dist_data(struct intc_desc *desc,\n\t\t\t\t   struct intc_desc_int *d,\n\t\t\t\t   intc_enum enum_id)\n{\n\tstruct intc_mask_reg *mr = desc->hw.mask_regs;\n\tunsigned int i, j, fn, mode;\n\tunsigned long reg_e, reg_d;\n\n\tfor (i = 0; mr && enum_id && i < desc->hw.nr_mask_regs; i++) {\n\t\tmr = desc->hw.mask_regs + i;\n\n\t\t \n\t\tif (!mr->dist_reg)\n\t\t\tcontinue;\n\n\t\tfor (j = 0; j < ARRAY_SIZE(mr->enum_ids); j++) {\n\t\t\tif (mr->enum_ids[j] != enum_id)\n\t\t\t\tcontinue;\n\n\t\t\tfn = REG_FN_MODIFY_BASE;\n\t\t\tmode = MODE_ENABLE_REG;\n\t\t\treg_e = mr->dist_reg;\n\t\t\treg_d = mr->dist_reg;\n\n\t\t\tfn += (mr->reg_width >> 3) - 1;\n\t\t\treturn _INTC_MK(fn, mode,\n\t\t\t\t\tintc_get_reg(d, reg_e),\n\t\t\t\t\tintc_get_reg(d, reg_d),\n\t\t\t\t\t1,\n\t\t\t\t\t(mr->reg_width - 1) - j);\n\t\t}\n\t}\n\n\t \n\treturn 0;\n}\n\nvoid intc_set_dist_handle(unsigned int irq, struct intc_desc *desc,\n\t\t\t  struct intc_desc_int *d, intc_enum id)\n{\n\tunsigned long flags;\n\n\t \n\tif (!desc->hw.mask_regs)\n\t\treturn;\n\n\traw_spin_lock_irqsave(&intc_big_lock, flags);\n\tdist_handle[irq] = intc_dist_data(desc, d, id);\n\traw_spin_unlock_irqrestore(&intc_big_lock, flags);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}