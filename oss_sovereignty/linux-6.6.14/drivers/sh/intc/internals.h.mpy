{
  "module_name": "internals.h",
  "hash_id": "17cda4600c3a9c4696c7b8f7734ec1ef0a80e7f2a1f7f58492e9c3d99cefd96a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/sh/intc/internals.h",
  "human_readable_source": " \n#include <linux/sh_intc.h>\n#include <linux/irq.h>\n#include <linux/irqdomain.h>\n#include <linux/list.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/radix-tree.h>\n#include <linux/device.h>\n\n#define _INTC_MK(fn, mode, addr_e, addr_d, width, shift) \\\n\t((shift) | ((width) << 5) | ((fn) << 9) | ((mode) << 13) | \\\n\t ((addr_e) << 16) | ((addr_d << 24)))\n\n#define _INTC_SHIFT(h)\t\t(h & 0x1f)\n#define _INTC_WIDTH(h)\t\t((h >> 5) & 0xf)\n#define _INTC_FN(h)\t\t((h >> 9) & 0xf)\n#define _INTC_MODE(h)\t\t((h >> 13) & 0x7)\n#define _INTC_ADDR_E(h)\t\t((h >> 16) & 0xff)\n#define _INTC_ADDR_D(h)\t\t((h >> 24) & 0xff)\n\n#ifdef CONFIG_SMP\n#define IS_SMP(x)\t\t(x.smp)\n#define INTC_REG(d, x, c)\t(d->reg[(x)] + ((d->smp[(x)] & 0xff) * c))\n#define SMP_NR(d, x)\t\t((d->smp[(x)] >> 8) ? (d->smp[(x)] >> 8) : 1)\n#else\n#define IS_SMP(x)\t\t0\n#define INTC_REG(d, x, c)\t(d->reg[(x)])\n#define SMP_NR(d, x)\t\t1\n#endif\n\nstruct intc_handle_int {\n\tunsigned int irq;\n\tunsigned long handle;\n};\n\nstruct intc_window {\n\tphys_addr_t phys;\n\tvoid __iomem *virt;\n\tunsigned long size;\n};\n\nstruct intc_map_entry {\n\tintc_enum enum_id;\n\tstruct intc_desc_int *desc;\n};\n\nstruct intc_subgroup_entry {\n\tunsigned int pirq;\n\tintc_enum enum_id;\n\tunsigned long handle;\n};\n\nstruct intc_desc_int {\n\tstruct list_head list;\n\tstruct device dev;\n\tstruct radix_tree_root tree;\n\traw_spinlock_t lock;\n\tunsigned int index;\n\tunsigned long *reg;\n#ifdef CONFIG_SMP\n\tunsigned long *smp;\n#endif\n\tunsigned int nr_reg;\n\tstruct intc_handle_int *prio;\n\tunsigned int nr_prio;\n\tstruct intc_handle_int *sense;\n\tunsigned int nr_sense;\n\tstruct intc_window *window;\n\tunsigned int nr_windows;\n\tstruct irq_domain *domain;\n\tstruct irq_chip chip;\n\tbool skip_suspend;\n};\n\n\nenum {\n\tREG_FN_ERR = 0,\n\tREG_FN_TEST_BASE = 1,\n\tREG_FN_WRITE_BASE = 5,\n\tREG_FN_MODIFY_BASE = 9\n};\n\nenum {\tMODE_ENABLE_REG = 0,  \n\tMODE_MASK_REG,        \n\tMODE_DUAL_REG,        \n\tMODE_PRIO_REG,        \n\tMODE_PCLR_REG,        \n};\n\nstatic inline struct intc_desc_int *get_intc_desc(unsigned int irq)\n{\n\tstruct irq_chip *chip = irq_get_chip(irq);\n\n\treturn container_of(chip, struct intc_desc_int, chip);\n}\n\n \nstatic inline void activate_irq(int irq)\n{\n\tirq_modify_status(irq, IRQ_NOREQUEST, IRQ_NOPROBE);\n}\n\nstatic inline int intc_handle_int_cmp(const void *a, const void *b)\n{\n\tconst struct intc_handle_int *_a = a;\n\tconst struct intc_handle_int *_b = b;\n\n\treturn _a->irq - _b->irq;\n}\n\n \nextern unsigned long\n(*intc_reg_fns[])(unsigned long addr, unsigned long h, unsigned long data);\n\nextern unsigned long\n(*intc_enable_fns[])(unsigned long addr, unsigned long handle,\n\t\t     unsigned long (*fn)(unsigned long,\n\t\t\t\tunsigned long, unsigned long),\n\t\t     unsigned int irq);\nextern unsigned long\n(*intc_disable_fns[])(unsigned long addr, unsigned long handle,\n\t\t      unsigned long (*fn)(unsigned long,\n\t\t\t\tunsigned long, unsigned long),\n\t\t      unsigned int irq);\nextern unsigned long\n(*intc_enable_noprio_fns[])(unsigned long addr, unsigned long handle,\n\t\t            unsigned long (*fn)(unsigned long,\n\t\t\t\tunsigned long, unsigned long),\n\t\t\t    unsigned int irq);\n\nunsigned long intc_phys_to_virt(struct intc_desc_int *d, unsigned long address);\nunsigned int intc_get_reg(struct intc_desc_int *d, unsigned long address);\nunsigned int intc_set_field_from_handle(unsigned int value,\n\t\t\t    unsigned int field_value,\n\t\t\t    unsigned int handle);\nunsigned long intc_get_field_from_handle(unsigned int value,\n\t\t\t\t\t unsigned int handle);\n\n \n#ifdef CONFIG_INTC_BALANCING\nvoid intc_balancing_enable(unsigned int irq);\nvoid intc_balancing_disable(unsigned int irq);\nvoid intc_set_dist_handle(unsigned int irq, struct intc_desc *desc,\n\t\t\t  struct intc_desc_int *d, intc_enum id);\n#else\nstatic inline void intc_balancing_enable(unsigned int irq) { }\nstatic inline void intc_balancing_disable(unsigned int irq) { }\nstatic inline void\nintc_set_dist_handle(unsigned int irq, struct intc_desc *desc,\n\t\t     struct intc_desc_int *d, intc_enum id) { }\n#endif\n\n \nextern struct irq_chip intc_irq_chip;\nvoid _intc_enable(struct irq_data *data, unsigned long handle);\n\n \nextern struct list_head intc_list;\nextern raw_spinlock_t intc_big_lock;\nextern struct bus_type intc_subsys;\n\nunsigned int intc_get_dfl_prio_level(void);\nunsigned int intc_get_prio_level(unsigned int irq);\nvoid intc_set_prio_level(unsigned int irq, unsigned int level);\n\n \nunsigned int intc_get_mask_handle(struct intc_desc *desc,\n\t\t\t\t  struct intc_desc_int *d,\n\t\t\t\t  intc_enum enum_id, int do_grps);\nunsigned int intc_get_prio_handle(struct intc_desc *desc,\n\t\t\t\t  struct intc_desc_int *d,\n\t\t\t\t  intc_enum enum_id, int do_grps);\nunsigned int intc_get_sense_handle(struct intc_desc *desc,\n\t\t\t\t   struct intc_desc_int *d,\n\t\t\t\t   intc_enum enum_id);\nvoid intc_set_ack_handle(unsigned int irq, struct intc_desc *desc,\n\t\t\t struct intc_desc_int *d, intc_enum id);\nunsigned long intc_get_ack_handle(unsigned int irq);\nvoid intc_enable_disable_enum(struct intc_desc *desc, struct intc_desc_int *d,\n\t\t\t      intc_enum enum_id, int enable);\n\n \nvoid intc_irq_domain_init(struct intc_desc_int *d, struct intc_hw_desc *hw);\n\n \nvoid intc_subgroup_init(struct intc_desc *desc, struct intc_desc_int *d);\nvoid intc_irq_xlate_set(unsigned int irq, intc_enum id, struct intc_desc_int *d);\nstruct intc_map_entry *intc_irq_xlate_get(unsigned int irq);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}