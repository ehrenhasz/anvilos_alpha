{
  "module_name": "bitmap.c",
  "hash_id": "78386df05db14e904b631cbd22588b318474c7772aad80faf820b40dc1936dd5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/firmware/efi/libstub/bitmap.c",
  "human_readable_source": "#include <linux/bitmap.h>\n\nvoid __bitmap_set(unsigned long *map, unsigned int start, int len)\n{\n\tunsigned long *p = map + BIT_WORD(start);\n\tconst unsigned int size = start + len;\n\tint bits_to_set = BITS_PER_LONG - (start % BITS_PER_LONG);\n\tunsigned long mask_to_set = BITMAP_FIRST_WORD_MASK(start);\n\n\twhile (len - bits_to_set >= 0) {\n\t\t*p |= mask_to_set;\n\t\tlen -= bits_to_set;\n\t\tbits_to_set = BITS_PER_LONG;\n\t\tmask_to_set = ~0UL;\n\t\tp++;\n\t}\n\tif (len) {\n\t\tmask_to_set &= BITMAP_LAST_WORD_MASK(size);\n\t\t*p |= mask_to_set;\n\t}\n}\n\nvoid __bitmap_clear(unsigned long *map, unsigned int start, int len)\n{\n\tunsigned long *p = map + BIT_WORD(start);\n\tconst unsigned int size = start + len;\n\tint bits_to_clear = BITS_PER_LONG - (start % BITS_PER_LONG);\n\tunsigned long mask_to_clear = BITMAP_FIRST_WORD_MASK(start);\n\n\twhile (len - bits_to_clear >= 0) {\n\t\t*p &= ~mask_to_clear;\n\t\tlen -= bits_to_clear;\n\t\tbits_to_clear = BITS_PER_LONG;\n\t\tmask_to_clear = ~0UL;\n\t\tp++;\n\t}\n\tif (len) {\n\t\tmask_to_clear &= BITMAP_LAST_WORD_MASK(size);\n\t\t*p &= ~mask_to_clear;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}