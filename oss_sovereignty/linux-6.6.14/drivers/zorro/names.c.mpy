{
  "module_name": "names.c",
  "hash_id": "9795c6d2e842f964abdbbf080b178c2726e57703bcf42bed60d9ab58702aaa2f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/zorro/names.c",
  "human_readable_source": "\n \n\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/zorro.h>\n\n#include \"zorro.h\"\n\nstruct zorro_prod_info {\n\t__u16 prod;\n\tunsigned short seen;\n\tconst char *name;\n};\n\nstruct zorro_manuf_info {\n\t__u16 manuf;\n\tunsigned short nr;\n\tconst char *name;\n\tstruct zorro_prod_info *prods;\n};\n\n \n#define MANUF( manuf, name )\t\tstatic char __manufstr_##manuf[] __initdata = name;\n#define ENDMANUF()\n#define PRODUCT( manuf, prod, name ) \tstatic char __prodstr_##manuf##prod[] __initdata = name;\n#include \"devlist.h\"\n\n\n#define MANUF( manuf, name )\t\tstatic struct zorro_prod_info __prods_##manuf[] __initdata = {\n#define ENDMANUF()\t\t\t};\n#define PRODUCT( manuf, prod, name )\t{ 0x##prod, 0, __prodstr_##manuf##prod },\n#include \"devlist.h\"\n\nstatic struct zorro_manuf_info __initdata zorro_manuf_list[] = {\n#define MANUF( manuf, name )\t\t{ 0x##manuf, ARRAY_SIZE(__prods_##manuf), __manufstr_##manuf, __prods_##manuf },\n#define ENDMANUF()\n#define PRODUCT( manuf, prod, name )\n#include \"devlist.h\"\n};\n\n#define MANUFS ARRAY_SIZE(zorro_manuf_list)\n\nvoid __init zorro_name_device(struct zorro_dev *dev)\n{\n\tconst struct zorro_manuf_info *manuf_p = zorro_manuf_list;\n\tint i = MANUFS;\n\tchar *name = dev->name;\n\n\tdo {\n\t\tif (manuf_p->manuf == ZORRO_MANUF(dev->id))\n\t\t\tgoto match_manuf;\n\t\tmanuf_p++;\n\t} while (--i);\n\n\t \n\treturn;\n\n\tmatch_manuf: {\n\t\tstruct zorro_prod_info *prod_p = manuf_p->prods;\n\t\tint i = manuf_p->nr;\n\n\t\twhile (i > 0) {\n\t\t\tif (prod_p->prod ==\n\t\t\t    ((ZORRO_PROD(dev->id)<<8) | ZORRO_EPC(dev->id)))\n\t\t\t\tgoto match_prod;\n\t\t\tprod_p++;\n\t\t\ti--;\n\t\t}\n\n\t\t \n\t\tsprintf(name, \"Zorro device %08x (%s)\", dev->id, manuf_p->name);\n\t\treturn;\n\n\t\t \n\t\tmatch_prod: {\n\t\t\tchar *n = name + sprintf(name, \"%s %s\", manuf_p->name, prod_p->name);\n\t\t\tint nr = prod_p->seen + 1;\n\t\t\tprod_p->seen = nr;\n\t\t\tif (nr > 1)\n\t\t\t\tsprintf(n, \" (#%d)\", nr);\n\t\t}\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}