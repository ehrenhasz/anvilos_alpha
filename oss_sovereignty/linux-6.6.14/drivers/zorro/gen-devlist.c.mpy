{
  "module_name": "gen-devlist.c",
  "hash_id": "7172e4eaea2af8fb99f655c170d8700149b7491887a9244464cde076daa7c702",
  "original_prompt": "Ingested from linux-6.6.14/drivers/zorro/gen-devlist.c",
  "human_readable_source": "\n \n\n#include <stdio.h>\n#include <string.h>\n\n#define MAX_NAME_SIZE 63\n\nstatic void\npq(FILE *f, const char *c)\n{\n\twhile (*c) {\n\t\tif (*c == '\"')\n\t\t\tfprintf(f, \"\\\\\\\"\");\n\t\telse\n\t\t\tfputc(*c, f);\n\t\tc++;\n\t}\n}\n\nint\nmain(void)\n{\n\tchar line[1024], *c, *bra, manuf[8];\n\tint manufs = 0;\n\tint mode = 0;\n\tint lino = 0;\n\tint manuf_len = 0;\n\tFILE *devf;\n\n\tdevf = fopen(\"devlist.h\", \"w\");\n\tif (!devf) {\n\t\tfprintf(stderr, \"Cannot create output file!\\n\");\n\t\treturn 1;\n\t}\n\n\twhile (fgets(line, sizeof(line)-1, stdin)) {\n\t\tlino++;\n\t\tif ((c = strchr(line, '\\n')))\n\t\t\t*c = 0;\n\t\tif (!line[0] || line[0] == '#')\n\t\t\tcontinue;\n\t\tif (line[0] == '\\t') {\n\t\t\tswitch (mode) {\n\t\t\tcase 1:\n\t\t\t\tif (strlen(line) > 5 && line[5] == ' ') {\n\t\t\t\t\tc = line + 5;\n\t\t\t\t\twhile (*c == ' ')\n\t\t\t\t\t\t*c++ = 0;\n\t\t\t\t\tif (manuf_len + strlen(c) + 1 > MAX_NAME_SIZE) {\n\t\t\t\t\t\t \n\t\t\t\t\t\tbra = strchr(c, '[');\n\t\t\t\t\t\tif (bra && bra > c && bra[-1] == ' ')\n\t\t\t\t\t\t\tbra[-1] = 0;\n\t\t\t\t\t\tif (manuf_len + strlen(c) + 1 > MAX_NAME_SIZE) {\n\t\t\t\t\t\t\tfprintf(stderr, \"Line %d: Product name too long\\n\", lino);\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfprintf(devf, \"\\tPRODUCT(%s,%s,\\\"\", manuf, line+1);\n\t\t\t\t\tpq(devf, c);\n\t\t\t\t\tfputs(\"\\\")\\n\", devf);\n\t\t\t\t} else goto err;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tgoto err;\n\t\t\t}\n\t\t} else if (strlen(line) > 4 && line[4] == ' ') {\n\t\t\tc = line + 4;\n\t\t\twhile (*c == ' ')\n\t\t\t\t*c++ = 0;\n\t\t\tif (manufs)\n\t\t\t\tfputs(\"ENDMANUF()\\n\\n\", devf);\n\t\t\tmanufs++;\n\t\t\tstrcpy(manuf, line);\n\t\t\tmanuf_len = strlen(c);\n\t\t\tif (manuf_len + 24 > MAX_NAME_SIZE) {\n\t\t\t\tfprintf(stderr, \"Line %d: manufacturer name too long\\n\", lino);\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tfprintf(devf, \"MANUF(%s,\\\"\", manuf);\n\t\t\tpq(devf, c);\n\t\t\tfputs(\"\\\")\\n\", devf);\n\t\t\tmode = 1;\n\t\t} else {\n\t\terr:\n\t\t\tfprintf(stderr, \"Line %d: Syntax error in mode %d: %s\\n\", lino, mode, line);\n\t\t\treturn 1;\n\t\t}\n\t}\n\tfputs(\"ENDMANUF()\\n\\\n\\n\\\n#undef MANUF\\n\\\n#undef PRODUCT\\n\\\n#undef ENDMANUF\\n\", devf);\n\n\tfclose(devf);\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}