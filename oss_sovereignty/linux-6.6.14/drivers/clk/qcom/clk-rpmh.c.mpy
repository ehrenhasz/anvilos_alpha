{
  "module_name": "clk-rpmh.c",
  "hash_id": "9303483d011dba8ba082865e29d87b9936684dd472a1e8fc74c5bb739f36705d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/clk-rpmh.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/err.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <soc/qcom/cmd-db.h>\n#include <soc/qcom/rpmh.h>\n#include <soc/qcom/tcs.h>\n\n#include <dt-bindings/clock/qcom,rpmh.h>\n\n#define CLK_RPMH_ARC_EN_OFFSET\t\t0\n#define CLK_RPMH_VRM_EN_OFFSET\t\t4\n\n \nstruct bcm_db {\n\t__le32 unit;\n\t__le16 width;\n\tu8 vcd;\n\tu8 reserved;\n};\n\n \nstruct clk_rpmh {\n\tstruct clk_hw hw;\n\tconst char *res_name;\n\tu8 div;\n\tu32 res_addr;\n\tu32 res_on_val;\n\tu32 state;\n\tu32 aggr_state;\n\tu32 last_sent_aggr_state;\n\tu32 valid_state_mask;\n\tu32 unit;\n\tstruct device *dev;\n\tstruct clk_rpmh *peer;\n};\n\nstruct clk_rpmh_desc {\n\tstruct clk_hw **clks;\n\tsize_t num_clks;\n};\n\nstatic DEFINE_MUTEX(rpmh_clk_lock);\n\n#define __DEFINE_CLK_RPMH(_name, _clk_name, _res_name,\t\t\t\\\n\t\t\t  _res_en_offset, _res_on, _div)\t\t\\\n\tstatic struct clk_rpmh clk_rpmh_##_clk_name##_ao;\t\t\\\n\tstatic struct clk_rpmh clk_rpmh_##_clk_name = {\t\t\t\\\n\t\t.res_name = _res_name,\t\t\t\t\t\\\n\t\t.res_addr = _res_en_offset,\t\t\t\t\\\n\t\t.res_on_val = _res_on,\t\t\t\t\t\\\n\t\t.div = _div,\t\t\t\t\t\t\\\n\t\t.peer = &clk_rpmh_##_clk_name##_ao,\t\t\t\\\n\t\t.valid_state_mask = (BIT(RPMH_WAKE_ONLY_STATE) |\t\\\n\t\t\t\t      BIT(RPMH_ACTIVE_ONLY_STATE) |\t\\\n\t\t\t\t      BIT(RPMH_SLEEP_STATE)),\t\t\\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t\\\n\t\t\t.ops = &clk_rpmh_ops,\t\t\t\t\\\n\t\t\t.name = #_name,\t\t\t\t\t\\\n\t\t\t.parent_data =  &(const struct clk_parent_data){ \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t\\\n\t\t\t\t\t.name = \"xo_board\",\t\t\\\n\t\t\t},\t\t\t\t\t\t\\\n\t\t\t.num_parents = 1,\t\t\t\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tstatic struct clk_rpmh clk_rpmh_##_clk_name##_ao= {\t\t\\\n\t\t.res_name = _res_name,\t\t\t\t\t\\\n\t\t.res_addr = _res_en_offset,\t\t\t\t\\\n\t\t.res_on_val = _res_on,\t\t\t\t\t\\\n\t\t.div = _div,\t\t\t\t\t\t\\\n\t\t.peer = &clk_rpmh_##_clk_name,\t\t\t\t\\\n\t\t.valid_state_mask = (BIT(RPMH_WAKE_ONLY_STATE) |\t\\\n\t\t\t\t\tBIT(RPMH_ACTIVE_ONLY_STATE)),\t\\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t\\\n\t\t\t.ops = &clk_rpmh_ops,\t\t\t\t\\\n\t\t\t.name = #_name \"_ao\",\t\t\t\t\\\n\t\t\t.parent_data =  &(const struct clk_parent_data){ \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t\\\n\t\t\t\t\t.name = \"xo_board\",\t\t\\\n\t\t\t},\t\t\t\t\t\t\\\n\t\t\t.num_parents = 1,\t\t\t\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define DEFINE_CLK_RPMH_ARC(_name, _res_name, _res_on, _div)\t\t\\\n\t__DEFINE_CLK_RPMH(_name, _name##_##div##_div, _res_name,\t\\\n\t\t\t  CLK_RPMH_ARC_EN_OFFSET, _res_on, _div)\n\n#define DEFINE_CLK_RPMH_VRM(_name, _suffix, _res_name, _div)\t\t\\\n\t__DEFINE_CLK_RPMH(_name, _name##_suffix, _res_name,\t\t\\\n\t\t\t  CLK_RPMH_VRM_EN_OFFSET, 1, _div)\n\n#define DEFINE_CLK_RPMH_BCM(_name, _res_name)\t\t\t\t\\\n\tstatic struct clk_rpmh clk_rpmh_##_name = {\t\t\t\\\n\t\t.res_name = _res_name,\t\t\t\t\t\\\n\t\t.valid_state_mask = BIT(RPMH_ACTIVE_ONLY_STATE),\t\\\n\t\t.div = 1,\t\t\t\t\t\t\\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t\\\n\t\t\t.ops = &clk_rpmh_bcm_ops,\t\t\t\\\n\t\t\t.name = #_name,\t\t\t\t\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\nstatic inline struct clk_rpmh *to_clk_rpmh(struct clk_hw *_hw)\n{\n\treturn container_of(_hw, struct clk_rpmh, hw);\n}\n\nstatic inline bool has_state_changed(struct clk_rpmh *c, u32 state)\n{\n\treturn (c->last_sent_aggr_state & BIT(state))\n\t\t!= (c->aggr_state & BIT(state));\n}\n\nstatic int clk_rpmh_send(struct clk_rpmh *c, enum rpmh_state state,\n\t\t\t struct tcs_cmd *cmd, bool wait)\n{\n\tif (wait)\n\t\treturn rpmh_write(c->dev, state, cmd, 1);\n\n\treturn rpmh_write_async(c->dev, state, cmd, 1);\n}\n\nstatic int clk_rpmh_send_aggregate_command(struct clk_rpmh *c)\n{\n\tstruct tcs_cmd cmd = { 0 };\n\tu32 cmd_state, on_val;\n\tenum rpmh_state state = RPMH_SLEEP_STATE;\n\tint ret;\n\tbool wait;\n\n\tcmd.addr = c->res_addr;\n\tcmd_state = c->aggr_state;\n\ton_val = c->res_on_val;\n\n\tfor (; state <= RPMH_ACTIVE_ONLY_STATE; state++) {\n\t\tif (has_state_changed(c, state)) {\n\t\t\tif (cmd_state & BIT(state))\n\t\t\t\tcmd.data = on_val;\n\n\t\t\twait = cmd_state && state == RPMH_ACTIVE_ONLY_STATE;\n\t\t\tret = clk_rpmh_send(c, state, &cmd, wait);\n\t\t\tif (ret) {\n\t\t\t\tdev_err(c->dev, \"set %s state of %s failed: (%d)\\n\",\n\t\t\t\t\t!state ? \"sleep\" :\n\t\t\t\t\tstate == RPMH_WAKE_ONLY_STATE\t?\n\t\t\t\t\t\"wake\" : \"active\", c->res_name, ret);\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t}\n\n\tc->last_sent_aggr_state = c->aggr_state;\n\tc->peer->last_sent_aggr_state =  c->last_sent_aggr_state;\n\n\treturn 0;\n}\n\n \nstatic int clk_rpmh_aggregate_state_send_command(struct clk_rpmh *c,\n\t\t\t\t\t\tbool enable)\n{\n\tint ret;\n\n\tc->state = enable ? c->valid_state_mask : 0;\n\tc->aggr_state = c->state | c->peer->state;\n\tc->peer->aggr_state = c->aggr_state;\n\n\tret = clk_rpmh_send_aggregate_command(c);\n\tif (!ret)\n\t\treturn 0;\n\n\tif (ret && enable)\n\t\tc->state = 0;\n\telse if (ret)\n\t\tc->state = c->valid_state_mask;\n\n\tWARN(1, \"clk: %s failed to %s\\n\", c->res_name,\n\t     enable ? \"enable\" : \"disable\");\n\treturn ret;\n}\n\nstatic int clk_rpmh_prepare(struct clk_hw *hw)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\tint ret = 0;\n\n\tmutex_lock(&rpmh_clk_lock);\n\tret = clk_rpmh_aggregate_state_send_command(c, true);\n\tmutex_unlock(&rpmh_clk_lock);\n\n\treturn ret;\n}\n\nstatic void clk_rpmh_unprepare(struct clk_hw *hw)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\n\tmutex_lock(&rpmh_clk_lock);\n\tclk_rpmh_aggregate_state_send_command(c, false);\n\tmutex_unlock(&rpmh_clk_lock);\n};\n\nstatic unsigned long clk_rpmh_recalc_rate(struct clk_hw *hw,\n\t\t\t\t\tunsigned long prate)\n{\n\tstruct clk_rpmh *r = to_clk_rpmh(hw);\n\n\t \n\treturn prate / r->div;\n}\n\nstatic const struct clk_ops clk_rpmh_ops = {\n\t.prepare\t= clk_rpmh_prepare,\n\t.unprepare\t= clk_rpmh_unprepare,\n\t.recalc_rate\t= clk_rpmh_recalc_rate,\n};\n\nstatic int clk_rpmh_bcm_send_cmd(struct clk_rpmh *c, bool enable)\n{\n\tstruct tcs_cmd cmd = { 0 };\n\tu32 cmd_state;\n\tint ret = 0;\n\n\tmutex_lock(&rpmh_clk_lock);\n\tif (enable) {\n\t\tcmd_state = 1;\n\t\tif (c->aggr_state)\n\t\t\tcmd_state = c->aggr_state;\n\t} else {\n\t\tcmd_state = 0;\n\t}\n\n\tif (c->last_sent_aggr_state != cmd_state) {\n\t\tcmd.addr = c->res_addr;\n\t\tcmd.data = BCM_TCS_CMD(1, enable, 0, cmd_state);\n\n\t\t \n\t\tret = clk_rpmh_send(c, RPMH_ACTIVE_ONLY_STATE, &cmd, enable);\n\t\tif (ret) {\n\t\t\tdev_err(c->dev, \"set active state of %s failed: (%d)\\n\",\n\t\t\t\tc->res_name, ret);\n\t\t} else {\n\t\t\tc->last_sent_aggr_state = cmd_state;\n\t\t}\n\t}\n\n\tmutex_unlock(&rpmh_clk_lock);\n\n\treturn ret;\n}\n\nstatic int clk_rpmh_bcm_prepare(struct clk_hw *hw)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\n\treturn clk_rpmh_bcm_send_cmd(c, true);\n}\n\nstatic void clk_rpmh_bcm_unprepare(struct clk_hw *hw)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\n\tclk_rpmh_bcm_send_cmd(c, false);\n}\n\nstatic int clk_rpmh_bcm_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\t unsigned long parent_rate)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\n\tc->aggr_state = rate / c->unit;\n\t \n\tif (clk_hw_is_prepared(hw))\n\t\tclk_rpmh_bcm_send_cmd(c, true);\n\n\treturn 0;\n}\n\nstatic long clk_rpmh_round_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\tunsigned long *parent_rate)\n{\n\treturn rate;\n}\n\nstatic unsigned long clk_rpmh_bcm_recalc_rate(struct clk_hw *hw,\n\t\t\t\t\tunsigned long prate)\n{\n\tstruct clk_rpmh *c = to_clk_rpmh(hw);\n\n\treturn c->aggr_state * c->unit;\n}\n\nstatic const struct clk_ops clk_rpmh_bcm_ops = {\n\t.prepare\t= clk_rpmh_bcm_prepare,\n\t.unprepare\t= clk_rpmh_bcm_unprepare,\n\t.set_rate\t= clk_rpmh_bcm_set_rate,\n\t.round_rate\t= clk_rpmh_round_rate,\n\t.recalc_rate\t= clk_rpmh_bcm_recalc_rate,\n};\n\n \nDEFINE_CLK_RPMH_ARC(bi_tcxo, \"xo.lvl\", 0x3, 1);\nDEFINE_CLK_RPMH_ARC(bi_tcxo, \"xo.lvl\", 0x3, 2);\nDEFINE_CLK_RPMH_ARC(bi_tcxo, \"xo.lvl\", 0x3, 4);\nDEFINE_CLK_RPMH_ARC(qlink, \"qphy.lvl\", 0x1, 4);\n\nDEFINE_CLK_RPMH_VRM(ln_bb_clk1, _a2, \"lnbclka1\", 2);\nDEFINE_CLK_RPMH_VRM(ln_bb_clk2, _a2, \"lnbclka2\", 2);\nDEFINE_CLK_RPMH_VRM(ln_bb_clk3, _a2, \"lnbclka3\", 2);\n\nDEFINE_CLK_RPMH_VRM(ln_bb_clk1, _a4, \"lnbclka1\", 4);\nDEFINE_CLK_RPMH_VRM(ln_bb_clk2, _a4, \"lnbclka2\", 4);\n\nDEFINE_CLK_RPMH_VRM(ln_bb_clk2, _g4, \"lnbclkg2\", 4);\nDEFINE_CLK_RPMH_VRM(ln_bb_clk3, _g4, \"lnbclkg3\", 4);\n\nDEFINE_CLK_RPMH_VRM(rf_clk1, _a, \"rfclka1\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk2, _a, \"rfclka2\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk3, _a, \"rfclka3\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk4, _a, \"rfclka4\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk5, _a, \"rfclka5\", 1);\n\nDEFINE_CLK_RPMH_VRM(rf_clk1, _d, \"rfclkd1\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk2, _d, \"rfclkd2\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk3, _d, \"rfclkd3\", 1);\nDEFINE_CLK_RPMH_VRM(rf_clk4, _d, \"rfclkd4\", 1);\n\nDEFINE_CLK_RPMH_VRM(clk1, _a1, \"clka1\", 1);\nDEFINE_CLK_RPMH_VRM(clk2, _a1, \"clka2\", 1);\nDEFINE_CLK_RPMH_VRM(clk3, _a1, \"clka3\", 1);\nDEFINE_CLK_RPMH_VRM(clk4, _a1, \"clka4\", 1);\nDEFINE_CLK_RPMH_VRM(clk5, _a1, \"clka5\", 1);\n\nDEFINE_CLK_RPMH_VRM(clk6, _a2, \"clka6\", 2);\nDEFINE_CLK_RPMH_VRM(clk7, _a2, \"clka7\", 2);\nDEFINE_CLK_RPMH_VRM(clk8, _a2, \"clka8\", 2);\n\nDEFINE_CLK_RPMH_VRM(div_clk1, _div2, \"divclka1\", 2);\n\nDEFINE_CLK_RPMH_BCM(ce, \"CE0\");\nDEFINE_CLK_RPMH_BCM(hwkm, \"HK0\");\nDEFINE_CLK_RPMH_BCM(ipa, \"IP0\");\nDEFINE_CLK_RPMH_BCM(pka, \"PKA0\");\nDEFINE_CLK_RPMH_BCM(qpic_clk, \"QP0\");\n\nstatic struct clk_hw *sdm845_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n\t[RPMH_CE_CLK]\t\t= &clk_rpmh_ce.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sdm845 = {\n\t.clks = sdm845_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sdm845_rpmh_clocks),\n};\n\nstatic struct clk_hw *sa8775p_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK1]\t= &clk_rpmh_ln_bb_clk1_a2.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a4_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n\t[RPMH_PKA_CLK]\t\t= &clk_rpmh_pka.hw,\n\t[RPMH_HWKM_CLK]\t\t= &clk_rpmh_hwkm.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sa8775p = {\n\t.clks = sa8775p_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sa8775p_rpmh_clocks),\n};\n\nstatic struct clk_hw *sdm670_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n\t[RPMH_CE_CLK]\t\t= &clk_rpmh_ce.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sdm670 = {\n\t.clks = sdm670_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sdm670_rpmh_clocks),\n};\n\nstatic struct clk_hw *sdx55_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_d.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_d_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_d.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_d_ao.hw,\n\t[RPMH_QPIC_CLK]\t\t= &clk_rpmh_qpic_clk.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sdx55 = {\n\t.clks = sdx55_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sdx55_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm8150_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm8150 = {\n\t.clks = sm8150_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm8150_rpmh_clocks),\n};\n\nstatic struct clk_hw *sc7180_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sc7180 = {\n\t.clks = sc7180_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sc7180_rpmh_clocks),\n};\n\nstatic struct clk_hw *sc8180x_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_d.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_d_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_d.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_d_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_d.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_d_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sc8180x = {\n\t.clks = sc8180x_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sc8180x_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm8250_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK1]\t= &clk_rpmh_ln_bb_clk1_a2.hw,\n\t[RPMH_LN_BB_CLK1_A]\t= &clk_rpmh_ln_bb_clk1_a2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm8250 = {\n\t.clks = sm8250_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm8250_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm8350_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_DIV_CLK1]\t\t= &clk_rpmh_div_clk1_div2.hw,\n\t[RPMH_DIV_CLK1_A]\t= &clk_rpmh_div_clk1_div2_ao.hw,\n\t[RPMH_LN_BB_CLK1]\t= &clk_rpmh_ln_bb_clk1_a2.hw,\n\t[RPMH_LN_BB_CLK1_A]\t= &clk_rpmh_ln_bb_clk1_a2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_RF_CLK4]\t\t= &clk_rpmh_rf_clk4_a.hw,\n\t[RPMH_RF_CLK4_A]\t= &clk_rpmh_rf_clk4_a_ao.hw,\n\t[RPMH_RF_CLK5]\t\t= &clk_rpmh_rf_clk5_a.hw,\n\t[RPMH_RF_CLK5_A]\t= &clk_rpmh_rf_clk5_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n\t[RPMH_PKA_CLK]\t\t= &clk_rpmh_pka.hw,\n\t[RPMH_HWKM_CLK]\t\t= &clk_rpmh_hwkm.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm8350 = {\n\t.clks = sm8350_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm8350_rpmh_clocks),\n};\n\nstatic struct clk_hw *sc8280xp_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK3]       = &clk_rpmh_ln_bb_clk3_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]     = &clk_rpmh_ln_bb_clk3_a2_ao.hw,\n\t[RPMH_IPA_CLK]          = &clk_rpmh_ipa.hw,\n\t[RPMH_PKA_CLK]          = &clk_rpmh_pka.hw,\n\t[RPMH_HWKM_CLK]         = &clk_rpmh_hwkm.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sc8280xp = {\n\t.clks = sc8280xp_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sc8280xp_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm8450_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div4.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div4_ao.hw,\n\t[RPMH_LN_BB_CLK1]\t= &clk_rpmh_ln_bb_clk1_a4.hw,\n\t[RPMH_LN_BB_CLK1_A]\t= &clk_rpmh_ln_bb_clk1_a4_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_a4.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_a4_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_RF_CLK4]\t\t= &clk_rpmh_rf_clk4_a.hw,\n\t[RPMH_RF_CLK4_A]\t= &clk_rpmh_rf_clk4_a_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm8450 = {\n\t.clks = sm8450_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm8450_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm8550_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div2.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div2_ao.hw,\n\t[RPMH_LN_BB_CLK1]\t= &clk_rpmh_clk6_a2.hw,\n\t[RPMH_LN_BB_CLK1_A]\t= &clk_rpmh_clk6_a2_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_clk7_a2.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_clk7_a2_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_clk8_a2.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_clk8_a2_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_clk1_a1.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_clk1_a1_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_clk2_a1.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_clk2_a1_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_clk3_a1.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_clk3_a1_ao.hw,\n\t[RPMH_RF_CLK4]\t\t= &clk_rpmh_clk4_a1.hw,\n\t[RPMH_RF_CLK4_A]\t= &clk_rpmh_clk4_a1_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm8550 = {\n\t.clks = sm8550_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm8550_rpmh_clocks),\n};\n\nstatic struct clk_hw *sc7280_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]      = &clk_rpmh_bi_tcxo_div4.hw,\n\t[RPMH_CXO_CLK_A]    = &clk_rpmh_bi_tcxo_div4_ao.hw,\n\t[RPMH_LN_BB_CLK2]   = &clk_rpmh_ln_bb_clk2_a2.hw,\n\t[RPMH_LN_BB_CLK2_A] = &clk_rpmh_ln_bb_clk2_a2_ao.hw,\n\t[RPMH_RF_CLK1]      = &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]    = &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK3]      = &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]    = &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_RF_CLK4]      = &clk_rpmh_rf_clk4_a.hw,\n\t[RPMH_RF_CLK4_A]    = &clk_rpmh_rf_clk4_a_ao.hw,\n\t[RPMH_IPA_CLK]      = &clk_rpmh_ipa.hw,\n\t[RPMH_PKA_CLK]      = &clk_rpmh_pka.hw,\n\t[RPMH_HWKM_CLK]     = &clk_rpmh_hwkm.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sc7280 = {\n\t.clks = sc7280_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sc7280_rpmh_clocks),\n};\n\nstatic struct clk_hw *sm6350_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div4.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div4_ao.hw,\n\t[RPMH_LN_BB_CLK2]\t= &clk_rpmh_ln_bb_clk2_g4.hw,\n\t[RPMH_LN_BB_CLK2_A]\t= &clk_rpmh_ln_bb_clk2_g4_ao.hw,\n\t[RPMH_LN_BB_CLK3]\t= &clk_rpmh_ln_bb_clk3_g4.hw,\n\t[RPMH_LN_BB_CLK3_A]\t= &clk_rpmh_ln_bb_clk3_g4_ao.hw,\n\t[RPMH_QLINK_CLK]\t= &clk_rpmh_qlink_div4.hw,\n\t[RPMH_QLINK_CLK_A]\t= &clk_rpmh_qlink_div4_ao.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sm6350 = {\n\t.clks = sm6350_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sm6350_rpmh_clocks),\n};\n\nstatic struct clk_hw *sdx65_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]          = &clk_rpmh_bi_tcxo_div4.hw,\n\t[RPMH_CXO_CLK_A]        = &clk_rpmh_bi_tcxo_div4_ao.hw,\n\t[RPMH_LN_BB_CLK1]       = &clk_rpmh_ln_bb_clk1_a4.hw,\n\t[RPMH_LN_BB_CLK1_A]     = &clk_rpmh_ln_bb_clk1_a4_ao.hw,\n\t[RPMH_RF_CLK1]          = &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]        = &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]          = &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]        = &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_RF_CLK3]          = &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]        = &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_RF_CLK4]          = &clk_rpmh_rf_clk4_a.hw,\n\t[RPMH_RF_CLK4_A]        = &clk_rpmh_rf_clk4_a_ao.hw,\n\t[RPMH_IPA_CLK]          = &clk_rpmh_ipa.hw,\n\t[RPMH_QPIC_CLK]         = &clk_rpmh_qpic_clk.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sdx65 = {\n\t.clks = sdx65_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sdx65_rpmh_clocks),\n};\n\nstatic struct clk_hw *qdu1000_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]      = &clk_rpmh_bi_tcxo_div1.hw,\n\t[RPMH_CXO_CLK_A]    = &clk_rpmh_bi_tcxo_div1_ao.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_qdu1000 = {\n\t.clks = qdu1000_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(qdu1000_rpmh_clocks),\n};\n\nstatic struct clk_hw *sdx75_rpmh_clocks[] = {\n\t[RPMH_CXO_CLK]\t\t= &clk_rpmh_bi_tcxo_div4.hw,\n\t[RPMH_CXO_CLK_A]\t= &clk_rpmh_bi_tcxo_div4_ao.hw,\n\t[RPMH_RF_CLK1]\t\t= &clk_rpmh_rf_clk1_a.hw,\n\t[RPMH_RF_CLK1_A]\t= &clk_rpmh_rf_clk1_a_ao.hw,\n\t[RPMH_RF_CLK2]\t\t= &clk_rpmh_rf_clk2_a.hw,\n\t[RPMH_RF_CLK2_A]\t= &clk_rpmh_rf_clk2_a_ao.hw,\n\t[RPMH_RF_CLK3]\t\t= &clk_rpmh_rf_clk3_a.hw,\n\t[RPMH_RF_CLK3_A]\t= &clk_rpmh_rf_clk3_a_ao.hw,\n\t[RPMH_QPIC_CLK]\t\t= &clk_rpmh_qpic_clk.hw,\n\t[RPMH_IPA_CLK]\t\t= &clk_rpmh_ipa.hw,\n};\n\nstatic const struct clk_rpmh_desc clk_rpmh_sdx75 = {\n\t.clks = sdx75_rpmh_clocks,\n\t.num_clks = ARRAY_SIZE(sdx75_rpmh_clocks),\n};\n\nstatic struct clk_hw *of_clk_rpmh_hw_get(struct of_phandle_args *clkspec,\n\t\t\t\t\t void *data)\n{\n\tstruct clk_rpmh_desc *rpmh = data;\n\tunsigned int idx = clkspec->args[0];\n\n\tif (idx >= rpmh->num_clks) {\n\t\tpr_err(\"%s: invalid index %u\\n\", __func__, idx);\n\t\treturn ERR_PTR(-EINVAL);\n\t}\n\n\treturn rpmh->clks[idx];\n}\n\nstatic int clk_rpmh_probe(struct platform_device *pdev)\n{\n\tstruct clk_hw **hw_clks;\n\tstruct clk_rpmh *rpmh_clk;\n\tconst struct clk_rpmh_desc *desc;\n\tint ret, i;\n\n\tdesc = of_device_get_match_data(&pdev->dev);\n\tif (!desc)\n\t\treturn -ENODEV;\n\n\thw_clks = desc->clks;\n\n\tfor (i = 0; i < desc->num_clks; i++) {\n\t\tconst char *name;\n\t\tu32 res_addr;\n\t\tsize_t aux_data_len;\n\t\tconst struct bcm_db *data;\n\n\t\tif (!hw_clks[i])\n\t\t\tcontinue;\n\n\t\tname = hw_clks[i]->init->name;\n\n\t\trpmh_clk = to_clk_rpmh(hw_clks[i]);\n\t\tres_addr = cmd_db_read_addr(rpmh_clk->res_name);\n\t\tif (!res_addr) {\n\t\t\tdev_err(&pdev->dev, \"missing RPMh resource address for %s\\n\",\n\t\t\t\trpmh_clk->res_name);\n\t\t\treturn -ENODEV;\n\t\t}\n\n\t\tdata = cmd_db_read_aux_data(rpmh_clk->res_name, &aux_data_len);\n\t\tif (IS_ERR(data)) {\n\t\t\tret = PTR_ERR(data);\n\t\t\tdev_err(&pdev->dev,\n\t\t\t\t\"error reading RPMh aux data for %s (%d)\\n\",\n\t\t\t\trpmh_clk->res_name, ret);\n\t\t\treturn ret;\n\t\t}\n\n\t\t \n\t\tif (aux_data_len == sizeof(*data))\n\t\t\trpmh_clk->unit = le32_to_cpu(data->unit) * 1000ULL;\n\n\t\trpmh_clk->res_addr += res_addr;\n\t\trpmh_clk->dev = &pdev->dev;\n\n\t\tret = devm_clk_hw_register(&pdev->dev, hw_clks[i]);\n\t\tif (ret) {\n\t\t\tdev_err(&pdev->dev, \"failed to register %s\\n\", name);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\t \n\tret = devm_of_clk_add_hw_provider(&pdev->dev, of_clk_rpmh_hw_get,\n\t\t\t\t\t  (void *)desc);\n\tif (ret) {\n\t\tdev_err(&pdev->dev, \"Failed to add clock provider\\n\");\n\t\treturn ret;\n\t}\n\n\tdev_dbg(&pdev->dev, \"Registered RPMh clocks\\n\");\n\n\treturn 0;\n}\n\nstatic const struct of_device_id clk_rpmh_match_table[] = {\n\t{ .compatible = \"qcom,qdu1000-rpmh-clk\", .data = &clk_rpmh_qdu1000},\n\t{ .compatible = \"qcom,sa8775p-rpmh-clk\", .data = &clk_rpmh_sa8775p},\n\t{ .compatible = \"qcom,sc7180-rpmh-clk\", .data = &clk_rpmh_sc7180},\n\t{ .compatible = \"qcom,sc8180x-rpmh-clk\", .data = &clk_rpmh_sc8180x},\n\t{ .compatible = \"qcom,sc8280xp-rpmh-clk\", .data = &clk_rpmh_sc8280xp},\n\t{ .compatible = \"qcom,sdm845-rpmh-clk\", .data = &clk_rpmh_sdm845},\n\t{ .compatible = \"qcom,sdm670-rpmh-clk\", .data = &clk_rpmh_sdm670},\n\t{ .compatible = \"qcom,sdx55-rpmh-clk\",  .data = &clk_rpmh_sdx55},\n\t{ .compatible = \"qcom,sdx65-rpmh-clk\",  .data = &clk_rpmh_sdx65},\n\t{ .compatible = \"qcom,sdx75-rpmh-clk\",  .data = &clk_rpmh_sdx75},\n\t{ .compatible = \"qcom,sm6350-rpmh-clk\", .data = &clk_rpmh_sm6350},\n\t{ .compatible = \"qcom,sm8150-rpmh-clk\", .data = &clk_rpmh_sm8150},\n\t{ .compatible = \"qcom,sm8250-rpmh-clk\", .data = &clk_rpmh_sm8250},\n\t{ .compatible = \"qcom,sm8350-rpmh-clk\", .data = &clk_rpmh_sm8350},\n\t{ .compatible = \"qcom,sm8450-rpmh-clk\", .data = &clk_rpmh_sm8450},\n\t{ .compatible = \"qcom,sm8550-rpmh-clk\", .data = &clk_rpmh_sm8550},\n\t{ .compatible = \"qcom,sc7280-rpmh-clk\", .data = &clk_rpmh_sc7280},\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, clk_rpmh_match_table);\n\nstatic struct platform_driver clk_rpmh_driver = {\n\t.probe\t\t= clk_rpmh_probe,\n\t.driver\t\t= {\n\t\t.name\t= \"clk-rpmh\",\n\t\t.of_match_table = clk_rpmh_match_table,\n\t},\n};\n\nstatic int __init clk_rpmh_init(void)\n{\n\treturn platform_driver_register(&clk_rpmh_driver);\n}\ncore_initcall(clk_rpmh_init);\n\nstatic void __exit clk_rpmh_exit(void)\n{\n\tplatform_driver_unregister(&clk_rpmh_driver);\n}\nmodule_exit(clk_rpmh_exit);\n\nMODULE_DESCRIPTION(\"QCOM RPMh Clock Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}