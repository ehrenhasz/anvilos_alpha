{
  "module_name": "apss-ipq6018.c",
  "hash_id": "25921354e94d98e3befb33c9ce55b43947ebb56f45c1ccf19a3ce79b968f4a31",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/apss-ipq6018.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/err.h>\n#include <linux/platform_device.h>\n#include <linux/clk-provider.h>\n#include <linux/regmap.h>\n#include <linux/module.h>\n\n#include <dt-bindings/clock/qcom,apss-ipq.h>\n\n#include \"common.h\"\n#include \"clk-regmap.h\"\n#include \"clk-branch.h\"\n#include \"clk-alpha-pll.h\"\n#include \"clk-rcg.h\"\n\nenum {\n\tP_XO,\n\tP_APSS_PLL_EARLY,\n};\n\nstatic const struct clk_parent_data parents_apcs_alias0_clk_src[] = {\n\t{ .fw_name = \"xo\" },\n\t{ .fw_name = \"pll\" },\n};\n\nstatic const struct parent_map parents_apcs_alias0_clk_src_map[] = {\n\t{ P_XO, 0 },\n\t{ P_APSS_PLL_EARLY, 5 },\n};\n\nstatic struct clk_rcg2 apcs_alias0_clk_src = {\n\t.cmd_rcgr = 0x0050,\n\t.hid_width = 5,\n\t.parent_map = parents_apcs_alias0_clk_src_map,\n\t.clkr.hw.init = &(struct clk_init_data){\n\t\t.name = \"apcs_alias0_clk_src\",\n\t\t.parent_data = parents_apcs_alias0_clk_src,\n\t\t.num_parents = ARRAY_SIZE(parents_apcs_alias0_clk_src),\n\t\t.ops = &clk_rcg2_mux_closest_ops,\n\t\t.flags = CLK_SET_RATE_PARENT,\n\t},\n};\n\nstatic struct clk_branch apcs_alias0_core_clk = {\n\t.halt_reg = 0x0058,\n\t.clkr = {\n\t\t.enable_reg = 0x0058,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"apcs_alias0_core_clk\",\n\t\t\t.parent_hws = (const struct clk_hw *[]){\n\t\t\t\t&apcs_alias0_clk_src.clkr.hw },\n\t\t\t.num_parents = 1,\n\t\t\t.flags = CLK_SET_RATE_PARENT | CLK_IS_CRITICAL,\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic const struct regmap_config apss_ipq6018_regmap_config = {\n\t.reg_bits       = 32,\n\t.reg_stride     = 4,\n\t.val_bits       = 32,\n\t.max_register   = 0x1000,\n\t.fast_io        = true,\n};\n\nstatic struct clk_regmap *apss_ipq6018_clks[] = {\n\t[APCS_ALIAS0_CLK_SRC] = &apcs_alias0_clk_src.clkr,\n\t[APCS_ALIAS0_CORE_CLK] = &apcs_alias0_core_clk.clkr,\n};\n\nstatic const struct qcom_cc_desc apss_ipq6018_desc = {\n\t.config = &apss_ipq6018_regmap_config,\n\t.clks = apss_ipq6018_clks,\n\t.num_clks = ARRAY_SIZE(apss_ipq6018_clks),\n};\n\nstatic int apss_ipq6018_probe(struct platform_device *pdev)\n{\n\tstruct regmap *regmap;\n\n\tregmap = dev_get_regmap(pdev->dev.parent, NULL);\n\tif (!regmap)\n\t\treturn -ENODEV;\n\n\treturn qcom_cc_really_probe(pdev, &apss_ipq6018_desc, regmap);\n}\n\nstatic struct platform_driver apss_ipq6018_driver = {\n\t.probe = apss_ipq6018_probe,\n\t.driver = {\n\t\t.name   = \"qcom,apss-ipq6018-clk\",\n\t},\n};\n\nmodule_platform_driver(apss_ipq6018_driver);\n\nMODULE_DESCRIPTION(\"QCOM APSS IPQ 6018 CLK Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}