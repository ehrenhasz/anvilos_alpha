{
  "module_name": "clk-smd-rpm.c",
  "hash_id": "cb4d41742d0e35645f7cc57b6f0866724e8acbd2d06d5fe272494b0a391c4a23",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/clk-smd-rpm.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/err.h>\n#include <linux/export.h>\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/mutex.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/soc/qcom/smd-rpm.h>\n\n#include <dt-bindings/clock/qcom,rpmcc.h>\n\n#define __DEFINE_CLK_SMD_RPM_PREFIX(_prefix, _name, _active,\t\t      \\\n\t\t\t\t    type, r_id, key, ao_rate, ao_flags)\t\t\t      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_active;\t      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_name = {\t      \\\n\t\t.rpm_res_type = (type),\t\t\t\t\t      \\\n\t\t.rpm_clk_id = (r_id),\t\t\t\t\t      \\\n\t\t.rpm_key = (key),\t\t\t\t\t      \\\n\t\t.peer = &clk_smd_rpm_##_prefix##_active,\t\t      \\\n\t\t.rate = INT_MAX,\t\t\t\t\t      \\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t      \\\n\t\t\t.ops = &clk_smd_rpm_ops,\t\t\t      \\\n\t\t\t.name = #_name,\t\t\t\t\t      \\\n\t\t\t.parent_data =  &(const struct clk_parent_data){      \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t      \\\n\t\t\t\t\t.name = \"xo_board\",\t\t      \\\n\t\t\t},\t\t\t\t\t\t      \\\n\t\t\t.num_parents = 1,\t\t\t\t      \\\n\t\t},\t\t\t\t\t\t\t      \\\n\t};\t\t\t\t\t\t\t\t      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_active = {\t      \\\n\t\t.rpm_res_type = (type),\t\t\t\t\t      \\\n\t\t.rpm_clk_id = (r_id),\t\t\t\t\t      \\\n\t\t.active_only = true,\t\t\t\t\t      \\\n\t\t.rpm_key = (key),\t\t\t\t\t      \\\n\t\t.peer = &clk_smd_rpm_##_prefix##_name,\t\t\t      \\\n\t\t.rate = (ao_rate),\t\t\t\t\t      \\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t      \\\n\t\t\t.ops = &clk_smd_rpm_ops,\t\t\t      \\\n\t\t\t.name = #_active,\t\t\t\t      \\\n\t\t\t.parent_data =  &(const struct clk_parent_data){      \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t      \\\n\t\t\t\t\t.name = \"xo_board\",\t\t      \\\n\t\t\t},\t\t\t\t\t\t      \\\n\t\t\t.num_parents = 1,\t\t\t\t      \\\n\t\t\t.flags = (ao_flags),\t\t\t\t      \\\n\t\t},\t\t\t\t\t\t\t      \\\n\t}\n\n#define __DEFINE_CLK_SMD_RPM(_name, _active, type, r_id, key,\\\n\t\t\t     ao_rate, ao_flags)\t\t\t\t      \\\n\t__DEFINE_CLK_SMD_RPM_PREFIX( , _name, _active,\t      \\\n\t\t\t\t    type, r_id, key, ao_rate, ao_flags)\n\n#define __DEFINE_CLK_SMD_RPM_BRANCH_PREFIX(_prefix, _name, _active,\\\n\t\t\t\t\t   type, r_id, r, key, ao_flags)      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_active;\t      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_name = {\t      \\\n\t\t.rpm_res_type = (type),\t\t\t\t\t      \\\n\t\t.rpm_clk_id = (r_id),\t\t\t\t\t      \\\n\t\t.rpm_key = (key),\t\t\t\t\t      \\\n\t\t.branch = true,\t\t\t\t\t\t      \\\n\t\t.peer = &clk_smd_rpm_##_prefix##_active,\t\t      \\\n\t\t.rate = (r),\t\t\t\t\t\t      \\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t      \\\n\t\t\t.ops = &clk_smd_rpm_branch_ops,\t\t\t      \\\n\t\t\t.name = #_name,\t\t\t\t\t      \\\n\t\t\t.parent_data =  &(const struct clk_parent_data){      \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t      \\\n\t\t\t\t\t.name = \"xo_board\",\t\t      \\\n\t\t\t},\t\t\t\t\t\t      \\\n\t\t\t.num_parents = 1,\t\t\t\t      \\\n\t\t},\t\t\t\t\t\t\t      \\\n\t};\t\t\t\t\t\t\t\t      \\\n\tstatic struct clk_smd_rpm clk_smd_rpm_##_prefix##_active = {\t      \\\n\t\t.rpm_res_type = (type),\t\t\t\t\t      \\\n\t\t.rpm_clk_id = (r_id),\t\t\t\t\t      \\\n\t\t.active_only = true,\t\t\t\t\t      \\\n\t\t.rpm_key = (key),\t\t\t\t\t      \\\n\t\t.branch = true,\t\t\t\t\t\t      \\\n\t\t.peer = &clk_smd_rpm_##_prefix##_name,\t\t\t      \\\n\t\t.rate = (r),\t\t\t\t\t\t      \\\n\t\t.hw.init = &(struct clk_init_data){\t\t\t      \\\n\t\t\t.ops = &clk_smd_rpm_branch_ops,\t\t\t      \\\n\t\t\t.name = #_active,\t\t\t\t      \\\n\t\t\t.parent_data =  &(const struct clk_parent_data){      \\\n\t\t\t\t\t.fw_name = \"xo\",\t\t      \\\n\t\t\t\t\t.name = \"xo_board\",\t\t      \\\n\t\t\t},\t\t\t\t\t\t      \\\n\t\t\t.num_parents = 1,\t\t\t\t      \\\n\t\t\t.flags = (ao_flags),\t\t\t\t      \\\n\t\t},\t\t\t\t\t\t\t      \\\n\t}\n\n#define __DEFINE_CLK_SMD_RPM_BRANCH(_name, _active, type, r_id, r, key)\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH_PREFIX( ,\t\t      \\\n\t\t_name, _active, type, r_id, r, key, 0)\n\n#define DEFINE_CLK_SMD_RPM(_name, type, r_id)\t\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM(_name##_clk, _name##_a_clk,\t      \\\n\t\ttype, r_id, QCOM_RPM_SMD_KEY_RATE, INT_MAX, 0)\n\n#define DEFINE_CLK_SMD_RPM_BUS(_name, r_id)\t\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_PREFIX(bus_##r_id##_,\t\t      \\\n\t\t_name##_clk, _name##_a_clk, QCOM_SMD_RPM_BUS_CLK, r_id,\t      \\\n\t\tQCOM_RPM_SMD_KEY_RATE, INT_MAX, 0)\n\n#define DEFINE_CLK_SMD_RPM_BUS_A(_name, r_id, ao_rate, ao_flags)\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_PREFIX(bus_##r_id##_,\t\t      \\\n\t\t_name##_clk, _name##_a_clk, QCOM_SMD_RPM_BUS_CLK, r_id,\t      \\\n\t\tQCOM_RPM_SMD_KEY_RATE, ao_rate, ao_flags)\n\n#define DEFINE_CLK_SMD_RPM_CLK_SRC(_name, type, r_id)\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM(\t\t\t\t\t      \\\n\t\t_name##_clk_src, _name##_a_clk_src,\t\t\t      \\\n\t\ttype, r_id, QCOM_RPM_SMD_KEY_RATE, INT_MAX, 0)\n\n#define DEFINE_CLK_SMD_RPM_BRANCH(_name, type, r_id, r)\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH_PREFIX(branch_,\t\t      \\\n\t\t_name##_clk, _name##_a_clk,\t\t\t\t      \\\n\t\ttype, r_id, r, QCOM_RPM_SMD_KEY_ENABLE, 0)\n\n#define DEFINE_CLK_SMD_RPM_BRANCH_A(_name, type, r_id, r, ao_flags)\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH_PREFIX(branch_,\t\t      \\\n\t\t_name, _name##_a, type,\t\t\t\t\t      \\\n\t\tr_id, r, QCOM_RPM_SMD_KEY_ENABLE, ao_flags)\n\n#define DEFINE_CLK_SMD_RPM_QDSS(_name, type, r_id)\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM(_name##_clk, _name##_a_clk,\t      \\\n\t\ttype, r_id, QCOM_RPM_SMD_KEY_STATE, INT_MAX, 0)\n\n#define DEFINE_CLK_SMD_RPM_XO_BUFFER(_name, r_id, r)\t\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH(_name, _name##_a,\t\t      \\\n\t\tQCOM_SMD_RPM_CLK_BUF_A, r_id, r,\t\t\t      \\\n\t\tQCOM_RPM_KEY_SOFTWARE_ENABLE)\n\n#define DEFINE_CLK_SMD_RPM_XO_BUFFER_PREFIX(_prefix, _name, r_id, r)\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH_PREFIX(_prefix,\t\t      \\\n\t\t_name, _name##_a,\t\t\t\t\t      \\\n\t\tQCOM_SMD_RPM_CLK_BUF_A, r_id, r,\t\t\t      \\\n\t\tQCOM_RPM_KEY_SOFTWARE_ENABLE, 0)\n\n#define DEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(_name, r_id, r)\t\t      \\\n\t\tDEFINE_CLK_SMD_RPM_XO_BUFFER(_name, r_id, r);\t\t      \\\n\t\t__DEFINE_CLK_SMD_RPM_BRANCH(_name##_pin, _name##_a##_pin,     \\\n\t\tQCOM_SMD_RPM_CLK_BUF_A, r_id, r,\t\t\t      \\\n\t\tQCOM_RPM_KEY_PIN_CTRL_CLK_BUFFER_ENABLE_KEY)\n\n#define to_clk_smd_rpm(_hw) container_of(_hw, struct clk_smd_rpm, hw)\n\nstatic struct qcom_smd_rpm *rpmcc_smd_rpm;\n\nstruct clk_smd_rpm {\n\tconst int rpm_res_type;\n\tconst int rpm_key;\n\tconst int rpm_clk_id;\n\tconst bool active_only;\n\tbool enabled;\n\tbool branch;\n\tstruct clk_smd_rpm *peer;\n\tstruct clk_hw hw;\n\tunsigned long rate;\n};\n\nstruct rpm_smd_clk_desc {\n\tstruct clk_smd_rpm **clks;\n\tsize_t num_clks;\n\n\t \n\tconst struct clk_smd_rpm ** const icc_clks;\n\tsize_t num_icc_clks;\n\tbool scaling_before_handover;\n};\n\nstatic DEFINE_MUTEX(rpm_smd_clk_lock);\n\nstatic int clk_smd_rpm_handoff(const struct clk_smd_rpm *r)\n{\n\tint ret;\n\tstruct clk_smd_rpm_req req = {\n\t\t.key = cpu_to_le32(r->rpm_key),\n\t\t.nbytes = cpu_to_le32(sizeof(u32)),\n\t\t.value = cpu_to_le32(r->branch ? 1 : INT_MAX),\n\t};\n\n\tret = qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_ACTIVE_STATE,\n\t\t\t\t r->rpm_res_type, r->rpm_clk_id, &req,\n\t\t\t\t sizeof(req));\n\tif (ret)\n\t\treturn ret;\n\tret = qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_SLEEP_STATE,\n\t\t\t\t r->rpm_res_type, r->rpm_clk_id, &req,\n\t\t\t\t sizeof(req));\n\tif (ret)\n\t\treturn ret;\n\n\treturn 0;\n}\n\nstatic int clk_smd_rpm_set_rate_active(struct clk_smd_rpm *r,\n\t\t\t\t       unsigned long rate)\n{\n\tstruct clk_smd_rpm_req req = {\n\t\t.key = cpu_to_le32(r->rpm_key),\n\t\t.nbytes = cpu_to_le32(sizeof(u32)),\n\t\t.value = cpu_to_le32(DIV_ROUND_UP(rate, 1000)),  \n\t};\n\n\treturn qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_ACTIVE_STATE,\n\t\t\t\t  r->rpm_res_type, r->rpm_clk_id, &req,\n\t\t\t\t  sizeof(req));\n}\n\nstatic int clk_smd_rpm_set_rate_sleep(struct clk_smd_rpm *r,\n\t\t\t\t      unsigned long rate)\n{\n\tstruct clk_smd_rpm_req req = {\n\t\t.key = cpu_to_le32(r->rpm_key),\n\t\t.nbytes = cpu_to_le32(sizeof(u32)),\n\t\t.value = cpu_to_le32(DIV_ROUND_UP(rate, 1000)),  \n\t};\n\n\treturn qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_SLEEP_STATE,\n\t\t\t\t  r->rpm_res_type, r->rpm_clk_id, &req,\n\t\t\t\t  sizeof(req));\n}\n\nstatic void to_active_sleep(struct clk_smd_rpm *r, unsigned long rate,\n\t\t\t    unsigned long *active, unsigned long *sleep)\n{\n\t*active = rate;\n\n\t \n\tif (r->active_only)\n\t\t*sleep = 0;\n\telse\n\t\t*sleep = *active;\n}\n\nstatic int clk_smd_rpm_prepare(struct clk_hw *hw)\n{\n\tstruct clk_smd_rpm *r = to_clk_smd_rpm(hw);\n\tstruct clk_smd_rpm *peer = r->peer;\n\tunsigned long this_rate = 0, this_sleep_rate = 0;\n\tunsigned long peer_rate = 0, peer_sleep_rate = 0;\n\tunsigned long active_rate, sleep_rate;\n\tint ret = 0;\n\n\tmutex_lock(&rpm_smd_clk_lock);\n\n\t \n\tif (!r->rate)\n\t\tgoto out;\n\n\tto_active_sleep(r, r->rate, &this_rate, &this_sleep_rate);\n\n\t \n\tif (peer->enabled)\n\t\tto_active_sleep(peer, peer->rate,\n\t\t\t\t&peer_rate, &peer_sleep_rate);\n\n\tactive_rate = max(this_rate, peer_rate);\n\n\tif (r->branch)\n\t\tactive_rate = !!active_rate;\n\n\tret = clk_smd_rpm_set_rate_active(r, active_rate);\n\tif (ret)\n\t\tgoto out;\n\n\tsleep_rate = max(this_sleep_rate, peer_sleep_rate);\n\tif (r->branch)\n\t\tsleep_rate = !!sleep_rate;\n\n\tret = clk_smd_rpm_set_rate_sleep(r, sleep_rate);\n\tif (ret)\n\t\t \n\t\tret = clk_smd_rpm_set_rate_active(r, peer_rate);\n\nout:\n\tif (!ret)\n\t\tr->enabled = true;\n\n\tmutex_unlock(&rpm_smd_clk_lock);\n\n\treturn ret;\n}\n\nstatic void clk_smd_rpm_unprepare(struct clk_hw *hw)\n{\n\tstruct clk_smd_rpm *r = to_clk_smd_rpm(hw);\n\tstruct clk_smd_rpm *peer = r->peer;\n\tunsigned long peer_rate = 0, peer_sleep_rate = 0;\n\tunsigned long active_rate, sleep_rate;\n\tint ret;\n\n\tmutex_lock(&rpm_smd_clk_lock);\n\n\tif (!r->rate)\n\t\tgoto out;\n\n\t \n\tif (peer->enabled)\n\t\tto_active_sleep(peer, peer->rate, &peer_rate,\n\t\t\t\t&peer_sleep_rate);\n\n\tactive_rate = r->branch ? !!peer_rate : peer_rate;\n\tret = clk_smd_rpm_set_rate_active(r, active_rate);\n\tif (ret)\n\t\tgoto out;\n\n\tsleep_rate = r->branch ? !!peer_sleep_rate : peer_sleep_rate;\n\tret = clk_smd_rpm_set_rate_sleep(r, sleep_rate);\n\tif (ret)\n\t\tgoto out;\n\n\tr->enabled = false;\n\nout:\n\tmutex_unlock(&rpm_smd_clk_lock);\n}\n\nstatic int clk_smd_rpm_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\tunsigned long parent_rate)\n{\n\tstruct clk_smd_rpm *r = to_clk_smd_rpm(hw);\n\tstruct clk_smd_rpm *peer = r->peer;\n\tunsigned long active_rate, sleep_rate;\n\tunsigned long this_rate = 0, this_sleep_rate = 0;\n\tunsigned long peer_rate = 0, peer_sleep_rate = 0;\n\tint ret = 0;\n\n\tmutex_lock(&rpm_smd_clk_lock);\n\n\tif (!r->enabled)\n\t\tgoto out;\n\n\tto_active_sleep(r, rate, &this_rate, &this_sleep_rate);\n\n\t \n\tif (peer->enabled)\n\t\tto_active_sleep(peer, peer->rate,\n\t\t\t\t&peer_rate, &peer_sleep_rate);\n\n\tactive_rate = max(this_rate, peer_rate);\n\tret = clk_smd_rpm_set_rate_active(r, active_rate);\n\tif (ret)\n\t\tgoto out;\n\n\tsleep_rate = max(this_sleep_rate, peer_sleep_rate);\n\tret = clk_smd_rpm_set_rate_sleep(r, sleep_rate);\n\tif (ret)\n\t\tgoto out;\n\n\tr->rate = rate;\n\nout:\n\tmutex_unlock(&rpm_smd_clk_lock);\n\n\treturn ret;\n}\n\nstatic long clk_smd_rpm_round_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\t   unsigned long *parent_rate)\n{\n\t \n\treturn rate;\n}\n\nstatic unsigned long clk_smd_rpm_recalc_rate(struct clk_hw *hw,\n\t\t\t\t\t     unsigned long parent_rate)\n{\n\tstruct clk_smd_rpm *r = to_clk_smd_rpm(hw);\n\n\t \n\treturn r->rate;\n}\n\nstatic int clk_smd_rpm_enable_scaling(void)\n{\n\tint ret;\n\tstruct clk_smd_rpm_req req = {\n\t\t.key = cpu_to_le32(QCOM_RPM_SMD_KEY_ENABLE),\n\t\t.nbytes = cpu_to_le32(sizeof(u32)),\n\t\t.value = cpu_to_le32(1),\n\t};\n\n\tret = qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_SLEEP_STATE,\n\t\t\t\t QCOM_SMD_RPM_MISC_CLK,\n\t\t\t\t QCOM_RPM_SCALING_ENABLE_ID, &req, sizeof(req));\n\tif (ret) {\n\t\tpr_err(\"RPM clock scaling (sleep set) not enabled!\\n\");\n\t\treturn ret;\n\t}\n\n\tret = qcom_rpm_smd_write(rpmcc_smd_rpm, QCOM_SMD_RPM_ACTIVE_STATE,\n\t\t\t\t QCOM_SMD_RPM_MISC_CLK,\n\t\t\t\t QCOM_RPM_SCALING_ENABLE_ID, &req, sizeof(req));\n\tif (ret) {\n\t\tpr_err(\"RPM clock scaling (active set) not enabled!\\n\");\n\t\treturn ret;\n\t}\n\n\tpr_debug(\"%s: RPM clock scaling is enabled\\n\", __func__);\n\treturn 0;\n}\n\nstatic const struct clk_ops clk_smd_rpm_ops = {\n\t.prepare\t= clk_smd_rpm_prepare,\n\t.unprepare\t= clk_smd_rpm_unprepare,\n\t.set_rate\t= clk_smd_rpm_set_rate,\n\t.round_rate\t= clk_smd_rpm_round_rate,\n\t.recalc_rate\t= clk_smd_rpm_recalc_rate,\n};\n\nstatic const struct clk_ops clk_smd_rpm_branch_ops = {\n\t.prepare\t= clk_smd_rpm_prepare,\n\t.unprepare\t= clk_smd_rpm_unprepare,\n\t.recalc_rate\t= clk_smd_rpm_recalc_rate,\n};\n\n \nDEFINE_CLK_SMD_RPM_BRANCH_A(bi_tcxo, QCOM_SMD_RPM_MISC_CLK, 0, 19200000, CLK_IS_CRITICAL);\nDEFINE_CLK_SMD_RPM_BRANCH(qdss, QCOM_SMD_RPM_MISC_CLK, 1, 19200000);\nDEFINE_CLK_SMD_RPM_QDSS(qdss, QCOM_SMD_RPM_MISC_CLK, 1);\nDEFINE_CLK_SMD_RPM_BRANCH_A(bimc_freq_log, QCOM_SMD_RPM_MISC_CLK, 4, 1, 0);\n\nDEFINE_CLK_SMD_RPM_BRANCH(mss_cfg_ahb, QCOM_SMD_RPM_MCFG_CLK, 0, 19200000);\n\nDEFINE_CLK_SMD_RPM_BRANCH(aggre1_noc, QCOM_SMD_RPM_AGGR_CLK, 1, 1000);\nDEFINE_CLK_SMD_RPM_BRANCH(aggre2_noc, QCOM_SMD_RPM_AGGR_CLK, 2, 1000);\nDEFINE_CLK_SMD_RPM(aggre1_noc, QCOM_SMD_RPM_AGGR_CLK, 1);\nDEFINE_CLK_SMD_RPM(aggre2_noc, QCOM_SMD_RPM_AGGR_CLK, 2);\n\nDEFINE_CLK_SMD_RPM_BUS_A(pcnoc, 0, 19200000, CLK_IS_CRITICAL);\nDEFINE_CLK_SMD_RPM_BUS(snoc, 1);\nDEFINE_CLK_SMD_RPM_BUS(sysmmnoc, 2);\nDEFINE_CLK_SMD_RPM_BUS(cnoc, 2);\nDEFINE_CLK_SMD_RPM_BUS(mmssnoc_ahb, 3);\nDEFINE_CLK_SMD_RPM_BUS(snoc_periph, 0);\nDEFINE_CLK_SMD_RPM_BUS(cnoc, 1);\nDEFINE_CLK_SMD_RPM_BUS(snoc, 2);\nDEFINE_CLK_SMD_RPM_BUS(snoc_lpass, 5);\n\nDEFINE_CLK_SMD_RPM(bimc, QCOM_SMD_RPM_MEM_CLK, 0);\nDEFINE_CLK_SMD_RPM(cpuss_gnoc, QCOM_SMD_RPM_MEM_CLK, 1);\nDEFINE_CLK_SMD_RPM_CLK_SRC(gfx3d, QCOM_SMD_RPM_MEM_CLK, 1);\nDEFINE_CLK_SMD_RPM(ocmemgx, QCOM_SMD_RPM_MEM_CLK, 2);\nDEFINE_CLK_SMD_RPM(bimc_gpu, QCOM_SMD_RPM_MEM_CLK, 2);\n\nDEFINE_CLK_SMD_RPM(ce1, QCOM_SMD_RPM_CE_CLK, 0);\nDEFINE_CLK_SMD_RPM(ce2, QCOM_SMD_RPM_CE_CLK, 1);\nDEFINE_CLK_SMD_RPM(ce3, QCOM_SMD_RPM_CE_CLK, 2);\n\nDEFINE_CLK_SMD_RPM(ipa, QCOM_SMD_RPM_IPA_CLK, 0);\n\nDEFINE_CLK_SMD_RPM(hwkm, QCOM_SMD_RPM_HWKM_CLK, 0);\n\nDEFINE_CLK_SMD_RPM(mmssnoc_axi_rpm, QCOM_SMD_RPM_MMAXI_CLK, 0);\nDEFINE_CLK_SMD_RPM(mmnrt, QCOM_SMD_RPM_MMAXI_CLK, 0);\nDEFINE_CLK_SMD_RPM(mmrt, QCOM_SMD_RPM_MMAXI_CLK, 1);\n\nDEFINE_CLK_SMD_RPM(pka, QCOM_SMD_RPM_PKA_CLK, 0);\n\nDEFINE_CLK_SMD_RPM(qpic, QCOM_SMD_RPM_QPIC_CLK, 0);\n\nDEFINE_CLK_SMD_RPM(qup, QCOM_SMD_RPM_QUP_CLK, 0);\n\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(bb_clk1, 1, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(bb_clk2, 2, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(ln_bb_clk1, 1, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(ln_bb_clk2, 2, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(ln_bb_clk3, 3, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(rf_clk1, 4, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(rf_clk2, 5, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(rf_clk3, 6, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(ln_bb_clk, 8, 19200000);\n\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PREFIX(38m4_, rf_clk3, 6, 38400000);\n\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(cxo_d0, 1, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(cxo_d1, 2, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(cxo_a0, 4, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(cxo_a1, 5, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER_PINCTRL(cxo_a2, 6, 19200000);\n\nDEFINE_CLK_SMD_RPM_XO_BUFFER(diff_clk, 7, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER(div_clk1, 11, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER(div_clk2, 12, 19200000);\nDEFINE_CLK_SMD_RPM_XO_BUFFER(div_clk3, 13, 19200000);\n\nstatic const struct clk_smd_rpm *bimc_pcnoc_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_0_pcnoc_clk,\n};\n\nstatic const struct clk_smd_rpm *bimc_pcnoc_snoc_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_0_pcnoc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n};\n\nstatic const struct clk_smd_rpm *bimc_pcnoc_snoc_smmnoc_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_0_pcnoc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n\t&clk_smd_rpm_bus_2_sysmmnoc_clk,\n};\n\nstatic const struct clk_smd_rpm *bimc_pcnoc_snoc_cnoc_ocmem_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_0_pcnoc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n\t&clk_smd_rpm_bus_2_cnoc_clk,\n\t&clk_smd_rpm_ocmemgx_clk,\n};\n\nstatic const struct clk_smd_rpm *msm8996_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_branch_aggre1_noc_clk,\n\t&clk_smd_rpm_branch_aggre2_noc_clk,\n\t&clk_smd_rpm_bus_0_pcnoc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n\t&clk_smd_rpm_bus_2_cnoc_clk,\n\t&clk_smd_rpm_mmssnoc_axi_rpm_clk,\n};\n\nstatic const struct clk_smd_rpm *msm8998_icc_clks[] = {\n\t&clk_smd_rpm_aggre1_noc_clk,\n\t&clk_smd_rpm_aggre2_noc_clk,\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n\t&clk_smd_rpm_bus_2_cnoc_clk,\n\t&clk_smd_rpm_mmssnoc_axi_rpm_clk,\n};\n\nstatic const struct clk_smd_rpm *sdm660_icc_clks[] = {\n\t&clk_smd_rpm_aggre2_noc_clk,\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_1_snoc_clk,\n\t&clk_smd_rpm_bus_2_cnoc_clk,\n\t&clk_smd_rpm_mmssnoc_axi_rpm_clk,\n};\n\nstatic const struct clk_smd_rpm *sm_qnoc_icc_clks[] = {\n\t&clk_smd_rpm_bimc_clk,\n\t&clk_smd_rpm_bus_1_cnoc_clk,\n\t&clk_smd_rpm_mmnrt_clk,\n\t&clk_smd_rpm_mmrt_clk,\n\t&clk_smd_rpm_qup_clk,\n\t&clk_smd_rpm_bus_2_snoc_clk,\n};\n\nstatic struct clk_smd_rpm *msm8909_clks[] = {\n\t[RPM_SMD_QPIC_CLK]\t\t= &clk_smd_rpm_qpic_clk,\n\t[RPM_SMD_QPIC_CLK_A]\t\t= &clk_smd_rpm_qpic_a_clk,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2]\t\t= &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A]\t\t= &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK1]\t\t= &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A]\t\t= &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2]\t\t= &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A]\t\t= &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN]\t\t= &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN]\t\t= &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_RF_CLK1_PIN]\t\t= &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN]\t\t= &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN]\t\t= &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN]\t\t= &clk_smd_rpm_rf_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8909 = {\n\t.clks = msm8909_clks,\n\t.num_clks = ARRAY_SIZE(msm8909_clks),\n\t.icc_clks = bimc_pcnoc_snoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8916_clks[] = {\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2]\t\t= &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A]\t\t= &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK1]\t\t= &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A]\t\t= &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2]\t\t= &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A]\t\t= &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN]\t\t= &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN]\t\t= &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_RF_CLK1_PIN]\t\t= &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN]\t\t= &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN]\t\t= &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN]\t\t= &clk_smd_rpm_rf_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8916 = {\n\t.clks = msm8916_clks,\n\t.num_clks = ARRAY_SIZE(msm8916_clks),\n\t.icc_clks = bimc_pcnoc_snoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8917_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_BIMC_GPU_CLK]\t\t= &clk_smd_rpm_bimc_gpu_clk,\n\t[RPM_SMD_BIMC_GPU_A_CLK]\t= &clk_smd_rpm_bimc_gpu_a_clk,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2]\t\t= &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A]\t\t= &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK2]\t\t= &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A]\t\t= &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_DIV_CLK2]\t\t= &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2]\t\t= &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN]\t\t= &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN]\t\t= &clk_smd_rpm_bb_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8917 = {\n\t.clks = msm8917_clks,\n\t.num_clks = ARRAY_SIZE(msm8917_clks),\n\t.icc_clks = bimc_pcnoc_snoc_smmnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_smmnoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8936_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2]\t\t= &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A]\t\t= &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK1]\t\t= &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A]\t\t= &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2]\t\t= &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A]\t\t= &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN]\t\t= &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN]\t\t= &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_RF_CLK1_PIN]\t\t= &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN]\t\t= &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN]\t\t= &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN]\t\t= &clk_smd_rpm_rf_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8936 = {\n\t\t.clks = msm8936_clks,\n\t\t.num_clks = ARRAY_SIZE(msm8936_clks),\n\t\t.icc_clks = bimc_pcnoc_snoc_smmnoc_icc_clks,\n\t\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_smmnoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8974_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_MMSSNOC_AHB_CLK]\t= &clk_smd_rpm_bus_3_mmssnoc_ahb_clk,\n\t[RPM_SMD_MMSSNOC_AHB_A_CLK]\t= &clk_smd_rpm_bus_3_mmssnoc_ahb_a_clk,\n\t[RPM_SMD_GFX3D_CLK_SRC]\t\t= &clk_smd_rpm_gfx3d_clk_src,\n\t[RPM_SMD_GFX3D_A_CLK_SRC]\t= &clk_smd_rpm_gfx3d_a_clk_src,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_CXO_D0]\t\t= &clk_smd_rpm_cxo_d0,\n\t[RPM_SMD_CXO_D0_A]\t\t= &clk_smd_rpm_cxo_d0_a,\n\t[RPM_SMD_CXO_D1]\t\t= &clk_smd_rpm_cxo_d1,\n\t[RPM_SMD_CXO_D1_A]\t\t= &clk_smd_rpm_cxo_d1_a,\n\t[RPM_SMD_CXO_A0]\t\t= &clk_smd_rpm_cxo_a0,\n\t[RPM_SMD_CXO_A0_A]\t\t= &clk_smd_rpm_cxo_a0_a,\n\t[RPM_SMD_CXO_A1]\t\t= &clk_smd_rpm_cxo_a1,\n\t[RPM_SMD_CXO_A1_A]\t\t= &clk_smd_rpm_cxo_a1_a,\n\t[RPM_SMD_CXO_A2]\t\t= &clk_smd_rpm_cxo_a2,\n\t[RPM_SMD_CXO_A2_A]\t\t= &clk_smd_rpm_cxo_a2_a,\n\t[RPM_SMD_DIFF_CLK]\t\t= &clk_smd_rpm_diff_clk,\n\t[RPM_SMD_DIFF_A_CLK]\t\t= &clk_smd_rpm_diff_clk_a,\n\t[RPM_SMD_DIV_CLK1]\t\t= &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1]\t\t= &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_DIV_CLK2]\t\t= &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2]\t\t= &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_CXO_D0_PIN]\t\t= &clk_smd_rpm_cxo_d0_pin,\n\t[RPM_SMD_CXO_D0_A_PIN]\t\t= &clk_smd_rpm_cxo_d0_a_pin,\n\t[RPM_SMD_CXO_D1_PIN]\t\t= &clk_smd_rpm_cxo_d1_pin,\n\t[RPM_SMD_CXO_D1_A_PIN]\t\t= &clk_smd_rpm_cxo_d1_a_pin,\n\t[RPM_SMD_CXO_A0_PIN]\t\t= &clk_smd_rpm_cxo_a0_pin,\n\t[RPM_SMD_CXO_A0_A_PIN]\t\t= &clk_smd_rpm_cxo_a0_a_pin,\n\t[RPM_SMD_CXO_A1_PIN]\t\t= &clk_smd_rpm_cxo_a1_pin,\n\t[RPM_SMD_CXO_A1_A_PIN]\t\t= &clk_smd_rpm_cxo_a1_a_pin,\n\t[RPM_SMD_CXO_A2_PIN]\t\t= &clk_smd_rpm_cxo_a2_pin,\n\t[RPM_SMD_CXO_A2_A_PIN]\t\t= &clk_smd_rpm_cxo_a2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8974 = {\n\t.clks = msm8974_clks,\n\t.num_clks = ARRAY_SIZE(msm8974_clks),\n\t.icc_clks = bimc_pcnoc_snoc_cnoc_ocmem_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_cnoc_ocmem_icc_clks),\n\t.scaling_before_handover = true,\n};\n\nstatic struct clk_smd_rpm *msm8976_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1] = &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A] = &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2] = &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A] = &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN] = &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN] = &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN] = &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN] = &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_DIV_CLK2] = &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2] = &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8976 = {\n\t.clks = msm8976_clks,\n\t.icc_clks = bimc_pcnoc_snoc_smmnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_smmnoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8992_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_GFX3D_CLK_SRC] = &clk_smd_rpm_gfx3d_clk_src,\n\t[RPM_SMD_GFX3D_A_CLK_SRC] = &clk_smd_rpm_gfx3d_a_clk_src,\n\t[RPM_SMD_BB_CLK1] = &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A] = &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK1_PIN] = &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN] = &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2] = &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A] = &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_BB_CLK2_PIN] = &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN] = &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_DIV_CLK1] = &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1] = &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_DIV_CLK2] = &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2] = &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_DIV_CLK3] = &clk_smd_rpm_div_clk3,\n\t[RPM_SMD_DIV_A_CLK3] = &clk_smd_rpm_div_clk3_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_LN_BB_CLK] = &clk_smd_rpm_ln_bb_clk,\n\t[RPM_SMD_LN_BB_A_CLK] = &clk_smd_rpm_ln_bb_clk_a,\n\t[RPM_SMD_MMSSNOC_AHB_CLK] = &clk_smd_rpm_bus_3_mmssnoc_ahb_clk,\n\t[RPM_SMD_MMSSNOC_AHB_A_CLK] = &clk_smd_rpm_bus_3_mmssnoc_ahb_a_clk,\n\t[RPM_SMD_MSS_CFG_AHB_CLK] = &clk_smd_rpm_branch_mss_cfg_ahb_clk,\n\t[RPM_SMD_MSS_CFG_AHB_A_CLK] = &clk_smd_rpm_branch_mss_cfg_ahb_a_clk,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN] = &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN] = &clk_smd_rpm_rf_clk2_a_pin,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_CE2_CLK] = &clk_smd_rpm_ce2_clk,\n\t[RPM_SMD_CE2_A_CLK] = &clk_smd_rpm_ce2_a_clk,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8992 = {\n\t.clks = msm8992_clks,\n\t.num_clks = ARRAY_SIZE(msm8992_clks),\n\t.icc_clks = bimc_pcnoc_snoc_cnoc_ocmem_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_cnoc_ocmem_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8994_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_GFX3D_CLK_SRC] = &clk_smd_rpm_gfx3d_clk_src,\n\t[RPM_SMD_GFX3D_A_CLK_SRC] = &clk_smd_rpm_gfx3d_a_clk_src,\n\t[RPM_SMD_BB_CLK1] = &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A] = &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK1_PIN] = &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN] = &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2] = &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A] = &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_BB_CLK2_PIN] = &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN] = &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_DIV_CLK1] = &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1] = &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_DIV_CLK2] = &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2] = &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_DIV_CLK3] = &clk_smd_rpm_div_clk3,\n\t[RPM_SMD_DIV_A_CLK3] = &clk_smd_rpm_div_clk3_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_LN_BB_CLK] = &clk_smd_rpm_ln_bb_clk,\n\t[RPM_SMD_LN_BB_A_CLK] = &clk_smd_rpm_ln_bb_clk_a,\n\t[RPM_SMD_MMSSNOC_AHB_CLK] = &clk_smd_rpm_bus_3_mmssnoc_ahb_clk,\n\t[RPM_SMD_MMSSNOC_AHB_A_CLK] = &clk_smd_rpm_bus_3_mmssnoc_ahb_a_clk,\n\t[RPM_SMD_MSS_CFG_AHB_CLK] = &clk_smd_rpm_branch_mss_cfg_ahb_clk,\n\t[RPM_SMD_MSS_CFG_AHB_A_CLK] = &clk_smd_rpm_branch_mss_cfg_ahb_a_clk,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN] = &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN] = &clk_smd_rpm_rf_clk2_a_pin,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_CE2_CLK] = &clk_smd_rpm_ce2_clk,\n\t[RPM_SMD_CE2_A_CLK] = &clk_smd_rpm_ce2_a_clk,\n\t[RPM_SMD_CE3_CLK] = &clk_smd_rpm_ce3_clk,\n\t[RPM_SMD_CE3_A_CLK] = &clk_smd_rpm_ce3_a_clk,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8994 = {\n\t.clks = msm8994_clks,\n\t.num_clks = ARRAY_SIZE(msm8994_clks),\n\t.icc_clks = bimc_pcnoc_snoc_cnoc_ocmem_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_cnoc_ocmem_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8996_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1] = &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A] = &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2] = &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A] = &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_LN_BB_CLK] = &clk_smd_rpm_ln_bb_clk,\n\t[RPM_SMD_LN_BB_A_CLK] = &clk_smd_rpm_ln_bb_clk_a,\n\t[RPM_SMD_DIV_CLK1] = &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1] = &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_DIV_CLK2] = &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2] = &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_DIV_CLK3] = &clk_smd_rpm_div_clk3,\n\t[RPM_SMD_DIV_A_CLK3] = &clk_smd_rpm_div_clk3_a,\n\t[RPM_SMD_BB_CLK1_PIN] = &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN] = &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN] = &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN] = &clk_smd_rpm_bb_clk2_a_pin,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN] = &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN] = &clk_smd_rpm_rf_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8996 = {\n\t.clks = msm8996_clks,\n\t.num_clks = ARRAY_SIZE(msm8996_clks),\n\t.icc_clks = msm8996_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(msm8996_icc_clks),\n};\n\nstatic struct clk_smd_rpm *qcs404_clks[] = {\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_PNOC_CLK] = &clk_smd_rpm_bus_0_pcnoc_clk,\n\t[RPM_SMD_PNOC_A_CLK] = &clk_smd_rpm_bus_0_pcnoc_a_clk,\n\t[RPM_SMD_SNOC_CLK] = &clk_smd_rpm_bus_1_snoc_clk,\n\t[RPM_SMD_SNOC_A_CLK] = &clk_smd_rpm_bus_1_snoc_a_clk,\n\t[RPM_SMD_BIMC_CLK] = &clk_smd_rpm_bimc_clk,\n\t[RPM_SMD_BIMC_A_CLK] = &clk_smd_rpm_bimc_a_clk,\n\t[RPM_SMD_BIMC_GPU_CLK] = &clk_smd_rpm_bimc_gpu_clk,\n\t[RPM_SMD_BIMC_GPU_A_CLK] = &clk_smd_rpm_bimc_gpu_a_clk,\n\t[RPM_SMD_QPIC_CLK] = &clk_smd_rpm_qpic_clk,\n\t[RPM_SMD_QPIC_CLK_A] = &clk_smd_rpm_qpic_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_LN_BB_CLK] = &clk_smd_rpm_ln_bb_clk,\n\t[RPM_SMD_LN_BB_A_CLK] = &clk_smd_rpm_ln_bb_clk_a,\n\t[RPM_SMD_LN_BB_CLK_PIN] = &clk_smd_rpm_ln_bb_clk_pin,\n\t[RPM_SMD_LN_BB_A_CLK_PIN] = &clk_smd_rpm_ln_bb_clk_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_qcs404 = {\n\t.clks = qcs404_clks,\n\t.num_clks = ARRAY_SIZE(qcs404_clks),\n\t.icc_clks = bimc_pcnoc_snoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8998_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_PCNOC_CLK] = &clk_smd_rpm_bus_0_pcnoc_clk,\n\t[RPM_SMD_PCNOC_A_CLK] = &clk_smd_rpm_bus_0_pcnoc_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_DIV_CLK1] = &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1] = &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_DIV_CLK2] = &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2] = &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_DIV_CLK3] = &clk_smd_rpm_div_clk3,\n\t[RPM_SMD_DIV_A_CLK3] = &clk_smd_rpm_div_clk3_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_LN_BB_CLK1] = &clk_smd_rpm_ln_bb_clk1,\n\t[RPM_SMD_LN_BB_CLK1_A] = &clk_smd_rpm_ln_bb_clk1_a,\n\t[RPM_SMD_LN_BB_CLK2] = &clk_smd_rpm_ln_bb_clk2,\n\t[RPM_SMD_LN_BB_CLK2_A] = &clk_smd_rpm_ln_bb_clk2_a,\n\t[RPM_SMD_LN_BB_CLK3] = &clk_smd_rpm_ln_bb_clk3,\n\t[RPM_SMD_LN_BB_CLK3_A] = &clk_smd_rpm_ln_bb_clk3_a,\n\t[RPM_SMD_LN_BB_CLK1_PIN] = &clk_smd_rpm_ln_bb_clk1_pin,\n\t[RPM_SMD_LN_BB_CLK1_A_PIN] = &clk_smd_rpm_ln_bb_clk1_a_pin,\n\t[RPM_SMD_LN_BB_CLK2_PIN] = &clk_smd_rpm_ln_bb_clk2_pin,\n\t[RPM_SMD_LN_BB_CLK2_A_PIN] = &clk_smd_rpm_ln_bb_clk2_a_pin,\n\t[RPM_SMD_LN_BB_CLK3_PIN] = &clk_smd_rpm_ln_bb_clk3_pin,\n\t[RPM_SMD_LN_BB_CLK3_A_PIN] = &clk_smd_rpm_ln_bb_clk3_a_pin,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_RF_CLK3] = &clk_smd_rpm_rf_clk3,\n\t[RPM_SMD_RF_CLK3_A] = &clk_smd_rpm_rf_clk3_a,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN] = &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN] = &clk_smd_rpm_rf_clk2_a_pin,\n\t[RPM_SMD_RF_CLK3_PIN] = &clk_smd_rpm_rf_clk3_pin,\n\t[RPM_SMD_RF_CLK3_A_PIN] = &clk_smd_rpm_rf_clk3_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8998 = {\n\t.clks = msm8998_clks,\n\t.num_clks = ARRAY_SIZE(msm8998_clks),\n\t.icc_clks = msm8998_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(msm8998_icc_clks),\n};\n\nstatic struct clk_smd_rpm *sdm660_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_CNOC_PERIPH_CLK] = &clk_smd_rpm_bus_0_pcnoc_clk,\n\t[RPM_SMD_CNOC_PERIPH_A_CLK] = &clk_smd_rpm_bus_0_pcnoc_a_clk,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_DIV_CLK1] = &clk_smd_rpm_div_clk1,\n\t[RPM_SMD_DIV_A_CLK1] = &clk_smd_rpm_div_clk1_a,\n\t[RPM_SMD_LN_BB_CLK] = &clk_smd_rpm_ln_bb_clk1,\n\t[RPM_SMD_LN_BB_A_CLK] = &clk_smd_rpm_ln_bb_clk1_a,\n\t[RPM_SMD_LN_BB_CLK2] = &clk_smd_rpm_ln_bb_clk2,\n\t[RPM_SMD_LN_BB_CLK2_A] = &clk_smd_rpm_ln_bb_clk2_a,\n\t[RPM_SMD_LN_BB_CLK3] = &clk_smd_rpm_ln_bb_clk3,\n\t[RPM_SMD_LN_BB_CLK3_A] = &clk_smd_rpm_ln_bb_clk3_a,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_LN_BB_CLK1_PIN] = &clk_smd_rpm_ln_bb_clk1_pin,\n\t[RPM_SMD_LN_BB_CLK1_A_PIN] = &clk_smd_rpm_ln_bb_clk1_a_pin,\n\t[RPM_SMD_LN_BB_CLK2_PIN] = &clk_smd_rpm_ln_bb_clk2_pin,\n\t[RPM_SMD_LN_BB_CLK2_A_PIN] = &clk_smd_rpm_ln_bb_clk2_a_pin,\n\t[RPM_SMD_LN_BB_CLK3_PIN] = &clk_smd_rpm_ln_bb_clk3_pin,\n\t[RPM_SMD_LN_BB_CLK3_A_PIN] = &clk_smd_rpm_ln_bb_clk3_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_sdm660 = {\n\t.clks = sdm660_clks,\n\t.num_clks = ARRAY_SIZE(sdm660_clks),\n\t.icc_clks = sdm660_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(sdm660_icc_clks),\n};\n\nstatic struct clk_smd_rpm *mdm9607_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QPIC_CLK]\t\t= &clk_smd_rpm_qpic_clk,\n\t[RPM_SMD_QPIC_CLK_A]\t\t= &clk_smd_rpm_qpic_a_clk,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_mdm9607 = {\n\t.clks = mdm9607_clks,\n\t.num_clks = ARRAY_SIZE(mdm9607_clks),\n\t.icc_clks = bimc_pcnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *msm8953_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC]\t\t= &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_IPA_CLK]\t\t= &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK]\t\t= &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_QDSS_CLK]\t\t= &clk_smd_rpm_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK]\t\t= &clk_smd_rpm_qdss_a_clk,\n\t[RPM_SMD_BB_CLK1]\t\t= &clk_smd_rpm_bb_clk1,\n\t[RPM_SMD_BB_CLK1_A]\t\t= &clk_smd_rpm_bb_clk1_a,\n\t[RPM_SMD_BB_CLK2]\t\t= &clk_smd_rpm_bb_clk2,\n\t[RPM_SMD_BB_CLK2_A]\t\t= &clk_smd_rpm_bb_clk2_a,\n\t[RPM_SMD_RF_CLK2]\t\t= &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A]\t\t= &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_RF_CLK3]\t\t= &clk_smd_rpm_ln_bb_clk,\n\t[RPM_SMD_RF_CLK3_A]\t\t= &clk_smd_rpm_ln_bb_clk_a,\n\t[RPM_SMD_DIV_CLK2]\t\t= &clk_smd_rpm_div_clk2,\n\t[RPM_SMD_DIV_A_CLK2]\t\t= &clk_smd_rpm_div_clk2_a,\n\t[RPM_SMD_BB_CLK1_PIN]\t\t= &clk_smd_rpm_bb_clk1_pin,\n\t[RPM_SMD_BB_CLK1_A_PIN]\t\t= &clk_smd_rpm_bb_clk1_a_pin,\n\t[RPM_SMD_BB_CLK2_PIN]\t\t= &clk_smd_rpm_bb_clk2_pin,\n\t[RPM_SMD_BB_CLK2_A_PIN]\t\t= &clk_smd_rpm_bb_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_msm8953 = {\n\t.clks = msm8953_clks,\n\t.num_clks = ARRAY_SIZE(msm8953_clks),\n\t.icc_clks = bimc_pcnoc_snoc_smmnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(bimc_pcnoc_snoc_smmnoc_icc_clks),\n};\n\nstatic struct clk_smd_rpm *sm6125_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_branch_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_branch_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_LN_BB_CLK1] = &clk_smd_rpm_ln_bb_clk1,\n\t[RPM_SMD_LN_BB_CLK1_A] = &clk_smd_rpm_ln_bb_clk1_a,\n\t[RPM_SMD_LN_BB_CLK2] = &clk_smd_rpm_ln_bb_clk2,\n\t[RPM_SMD_LN_BB_CLK2_A] = &clk_smd_rpm_ln_bb_clk2_a,\n\t[RPM_SMD_LN_BB_CLK3] = &clk_smd_rpm_ln_bb_clk3,\n\t[RPM_SMD_LN_BB_CLK3_A] = &clk_smd_rpm_ln_bb_clk3_a,\n\t[RPM_SMD_SNOC_PERIPH_CLK] = &clk_smd_rpm_bus_0_snoc_periph_clk,\n\t[RPM_SMD_SNOC_PERIPH_A_CLK] = &clk_smd_rpm_bus_0_snoc_periph_a_clk,\n\t[RPM_SMD_SNOC_LPASS_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_clk,\n\t[RPM_SMD_SNOC_LPASS_A_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_a_clk,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_sm6125 = {\n\t.clks = sm6125_clks,\n\t.num_clks = ARRAY_SIZE(sm6125_clks),\n\t.icc_clks = sm_qnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(sm_qnoc_icc_clks)\n};\n\n \nstatic struct clk_smd_rpm *sm6115_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_branch_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_branch_qdss_a_clk,\n\t[RPM_SMD_RF_CLK1] = &clk_smd_rpm_rf_clk1,\n\t[RPM_SMD_RF_CLK1_A] = &clk_smd_rpm_rf_clk1_a,\n\t[RPM_SMD_RF_CLK2] = &clk_smd_rpm_rf_clk2,\n\t[RPM_SMD_RF_CLK2_A] = &clk_smd_rpm_rf_clk2_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_SNOC_PERIPH_CLK] = &clk_smd_rpm_bus_0_snoc_periph_clk,\n\t[RPM_SMD_SNOC_PERIPH_A_CLK] = &clk_smd_rpm_bus_0_snoc_periph_a_clk,\n\t[RPM_SMD_SNOC_LPASS_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_clk,\n\t[RPM_SMD_SNOC_LPASS_A_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_a_clk,\n\t[RPM_SMD_RF_CLK1_PIN] = &clk_smd_rpm_rf_clk1_pin,\n\t[RPM_SMD_RF_CLK1_A_PIN] = &clk_smd_rpm_rf_clk1_a_pin,\n\t[RPM_SMD_RF_CLK2_PIN] = &clk_smd_rpm_rf_clk2_pin,\n\t[RPM_SMD_RF_CLK2_A_PIN] = &clk_smd_rpm_rf_clk2_a_pin,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_sm6115 = {\n\t.clks = sm6115_clks,\n\t.num_clks = ARRAY_SIZE(sm6115_clks),\n\t.icc_clks = sm_qnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(sm_qnoc_icc_clks)\n};\n\nstatic struct clk_smd_rpm *sm6375_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_branch_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_branch_qdss_a_clk,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_SNOC_PERIPH_CLK] = &clk_smd_rpm_bus_0_snoc_periph_clk,\n\t[RPM_SMD_SNOC_PERIPH_A_CLK] = &clk_smd_rpm_bus_0_snoc_periph_a_clk,\n\t[RPM_SMD_SNOC_LPASS_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_clk,\n\t[RPM_SMD_SNOC_LPASS_A_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_HWKM_CLK] = &clk_smd_rpm_hwkm_clk,\n\t[RPM_SMD_HWKM_A_CLK] = &clk_smd_rpm_hwkm_a_clk,\n\t[RPM_SMD_PKA_CLK] = &clk_smd_rpm_pka_clk,\n\t[RPM_SMD_PKA_A_CLK] = &clk_smd_rpm_pka_a_clk,\n\t[RPM_SMD_BIMC_FREQ_LOG] = &clk_smd_rpm_branch_bimc_freq_log,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_sm6375 = {\n\t.clks = sm6375_clks,\n\t.num_clks = ARRAY_SIZE(sm6375_clks),\n\t.icc_clks = sm_qnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(sm_qnoc_icc_clks)\n};\n\nstatic struct clk_smd_rpm *qcm2290_clks[] = {\n\t[RPM_SMD_XO_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo,\n\t[RPM_SMD_XO_A_CLK_SRC] = &clk_smd_rpm_branch_bi_tcxo_a,\n\t[RPM_SMD_QDSS_CLK] = &clk_smd_rpm_branch_qdss_clk,\n\t[RPM_SMD_QDSS_A_CLK] = &clk_smd_rpm_branch_qdss_a_clk,\n\t[RPM_SMD_LN_BB_CLK2] = &clk_smd_rpm_ln_bb_clk2,\n\t[RPM_SMD_LN_BB_CLK2_A] = &clk_smd_rpm_ln_bb_clk2_a,\n\t[RPM_SMD_RF_CLK3] = &clk_smd_rpm_38m4_rf_clk3,\n\t[RPM_SMD_RF_CLK3_A] = &clk_smd_rpm_38m4_rf_clk3_a,\n\t[RPM_SMD_IPA_CLK] = &clk_smd_rpm_ipa_clk,\n\t[RPM_SMD_IPA_A_CLK] = &clk_smd_rpm_ipa_a_clk,\n\t[RPM_SMD_SNOC_PERIPH_CLK] = &clk_smd_rpm_bus_0_snoc_periph_clk,\n\t[RPM_SMD_SNOC_PERIPH_A_CLK] = &clk_smd_rpm_bus_0_snoc_periph_a_clk,\n\t[RPM_SMD_SNOC_LPASS_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_clk,\n\t[RPM_SMD_SNOC_LPASS_A_CLK] = &clk_smd_rpm_bus_5_snoc_lpass_a_clk,\n\t[RPM_SMD_CE1_CLK] = &clk_smd_rpm_ce1_clk,\n\t[RPM_SMD_CE1_A_CLK] = &clk_smd_rpm_ce1_a_clk,\n\t[RPM_SMD_QPIC_CLK] = &clk_smd_rpm_qpic_clk,\n\t[RPM_SMD_QPIC_CLK_A] = &clk_smd_rpm_qpic_a_clk,\n\t[RPM_SMD_HWKM_CLK] = &clk_smd_rpm_hwkm_clk,\n\t[RPM_SMD_HWKM_A_CLK] = &clk_smd_rpm_hwkm_a_clk,\n\t[RPM_SMD_PKA_CLK] = &clk_smd_rpm_pka_clk,\n\t[RPM_SMD_PKA_A_CLK] = &clk_smd_rpm_pka_a_clk,\n\t[RPM_SMD_BIMC_GPU_CLK] = &clk_smd_rpm_bimc_gpu_clk,\n\t[RPM_SMD_BIMC_GPU_A_CLK] = &clk_smd_rpm_bimc_gpu_a_clk,\n\t[RPM_SMD_CPUSS_GNOC_CLK] = &clk_smd_rpm_cpuss_gnoc_clk,\n\t[RPM_SMD_CPUSS_GNOC_A_CLK] = &clk_smd_rpm_cpuss_gnoc_a_clk,\n};\n\nstatic const struct rpm_smd_clk_desc rpm_clk_qcm2290 = {\n\t.clks = qcm2290_clks,\n\t.num_clks = ARRAY_SIZE(qcm2290_clks),\n\t.icc_clks = sm_qnoc_icc_clks,\n\t.num_icc_clks = ARRAY_SIZE(sm_qnoc_icc_clks)\n};\n\nstatic const struct of_device_id rpm_smd_clk_match_table[] = {\n\t{ .compatible = \"qcom,rpmcc-mdm9607\", .data = &rpm_clk_mdm9607 },\n\t{ .compatible = \"qcom,rpmcc-msm8226\", .data = &rpm_clk_msm8974 },\n\t{ .compatible = \"qcom,rpmcc-msm8909\", .data = &rpm_clk_msm8909 },\n\t{ .compatible = \"qcom,rpmcc-msm8916\", .data = &rpm_clk_msm8916 },\n\t{ .compatible = \"qcom,rpmcc-msm8917\", .data = &rpm_clk_msm8917 },\n\t{ .compatible = \"qcom,rpmcc-msm8936\", .data = &rpm_clk_msm8936 },\n\t{ .compatible = \"qcom,rpmcc-msm8953\", .data = &rpm_clk_msm8953 },\n\t{ .compatible = \"qcom,rpmcc-msm8974\", .data = &rpm_clk_msm8974 },\n\t{ .compatible = \"qcom,rpmcc-msm8976\", .data = &rpm_clk_msm8976 },\n\t{ .compatible = \"qcom,rpmcc-msm8992\", .data = &rpm_clk_msm8992 },\n\t{ .compatible = \"qcom,rpmcc-msm8994\", .data = &rpm_clk_msm8994 },\n\t{ .compatible = \"qcom,rpmcc-msm8996\", .data = &rpm_clk_msm8996 },\n\t{ .compatible = \"qcom,rpmcc-msm8998\", .data = &rpm_clk_msm8998 },\n\t{ .compatible = \"qcom,rpmcc-qcm2290\", .data = &rpm_clk_qcm2290 },\n\t{ .compatible = \"qcom,rpmcc-qcs404\",  .data = &rpm_clk_qcs404  },\n\t{ .compatible = \"qcom,rpmcc-sdm660\",  .data = &rpm_clk_sdm660  },\n\t{ .compatible = \"qcom,rpmcc-sm6115\",  .data = &rpm_clk_sm6115  },\n\t{ .compatible = \"qcom,rpmcc-sm6125\",  .data = &rpm_clk_sm6125  },\n\t{ .compatible = \"qcom,rpmcc-sm6375\",  .data = &rpm_clk_sm6375  },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, rpm_smd_clk_match_table);\n\nstatic struct clk_hw *qcom_smdrpm_clk_hw_get(struct of_phandle_args *clkspec,\n\t\t\t\t\t     void *data)\n{\n\tconst struct rpm_smd_clk_desc *desc = data;\n\tunsigned int idx = clkspec->args[0];\n\n\tif (idx >= desc->num_clks) {\n\t\tpr_err(\"%s: invalid index %u\\n\", __func__, idx);\n\t\treturn ERR_PTR(-EINVAL);\n\t}\n\n\treturn desc->clks[idx] ? &desc->clks[idx]->hw : ERR_PTR(-ENOENT);\n}\n\nstatic void rpm_smd_unregister_icc(void *data)\n{\n\tstruct platform_device *icc_pdev = data;\n\n\tplatform_device_unregister(icc_pdev);\n}\n\nstatic int rpm_smd_clk_probe(struct platform_device *pdev)\n{\n\tint ret;\n\tsize_t num_clks, i;\n\tstruct clk_smd_rpm **rpm_smd_clks;\n\tconst struct rpm_smd_clk_desc *desc;\n\tstruct platform_device *icc_pdev;\n\n\trpmcc_smd_rpm = dev_get_drvdata(pdev->dev.parent);\n\tif (!rpmcc_smd_rpm) {\n\t\tdev_err(&pdev->dev, \"Unable to retrieve handle to RPM\\n\");\n\t\treturn -ENODEV;\n\t}\n\n\tdesc = of_device_get_match_data(&pdev->dev);\n\tif (!desc)\n\t\treturn -EINVAL;\n\n\trpm_smd_clks = desc->clks;\n\tnum_clks = desc->num_clks;\n\n\tif (desc->scaling_before_handover) {\n\t\tret = clk_smd_rpm_enable_scaling();\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\tfor (i = 0; i < num_clks; i++) {\n\t\tif (!rpm_smd_clks[i])\n\t\t\tcontinue;\n\n\t\tret = clk_smd_rpm_handoff(rpm_smd_clks[i]);\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\tfor (i = 0; i < desc->num_icc_clks; i++) {\n\t\tif (!desc->icc_clks[i])\n\t\t\tcontinue;\n\n\t\tret = clk_smd_rpm_handoff(desc->icc_clks[i]);\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\tif (!desc->scaling_before_handover) {\n\t\tret = clk_smd_rpm_enable_scaling();\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\tfor (i = 0; i < num_clks; i++) {\n\t\tif (!rpm_smd_clks[i])\n\t\t\tcontinue;\n\n\t\tret = devm_clk_hw_register(&pdev->dev, &rpm_smd_clks[i]->hw);\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\tret = devm_of_clk_add_hw_provider(&pdev->dev, qcom_smdrpm_clk_hw_get,\n\t\t\t\t\t  (void *)desc);\n\tif (ret)\n\t\tgoto err;\n\n\ticc_pdev = platform_device_register_data(pdev->dev.parent,\n\t\t\t\t\t\t \"icc_smd_rpm\", -1, NULL, 0);\n\tif (IS_ERR(icc_pdev)) {\n\t\tdev_err(&pdev->dev, \"Failed to register icc_smd_rpm device: %pE\\n\",\n\t\t\ticc_pdev);\n\t\t \n\t} else {\n\t\tret = devm_add_action_or_reset(&pdev->dev, rpm_smd_unregister_icc,\n\t\t\t\t\t       icc_pdev);\n\t\tif (ret)\n\t\t\tgoto err;\n\t}\n\n\treturn 0;\nerr:\n\tdev_err(&pdev->dev, \"Error registering SMD clock driver (%d)\\n\", ret);\n\treturn ret;\n}\n\nstatic struct platform_driver rpm_smd_clk_driver = {\n\t.driver = {\n\t\t.name = \"qcom-clk-smd-rpm\",\n\t\t.of_match_table = rpm_smd_clk_match_table,\n\t},\n\t.probe = rpm_smd_clk_probe,\n};\n\nstatic int __init rpm_smd_clk_init(void)\n{\n\treturn platform_driver_register(&rpm_smd_clk_driver);\n}\ncore_initcall(rpm_smd_clk_init);\n\nstatic void __exit rpm_smd_clk_exit(void)\n{\n\tplatform_driver_unregister(&rpm_smd_clk_driver);\n}\nmodule_exit(rpm_smd_clk_exit);\n\nMODULE_DESCRIPTION(\"Qualcomm RPM over SMD Clock Controller Driver\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_ALIAS(\"platform:qcom-clk-smd-rpm\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}