{
  "module_name": "kpss-xcc.c",
  "hash_id": "d9efd9a8da9f43ef645d0ea3d176260818a5790b94520bc4e820afbad766dda1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/kpss-xcc.c",
  "human_readable_source": "\n\n\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/err.h>\n#include <linux/io.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/clk.h>\n#include <linux/clk-provider.h>\n\nstatic const struct clk_parent_data aux_parents[] = {\n\t{ .fw_name = \"pll8_vote\", .name = \"pll8_vote\" },\n\t{ .fw_name = \"pxo\", .name = \"pxo_board\" },\n};\n\nstatic const u32 aux_parent_map[] = {\n\t3,\n\t0,\n};\n\nstatic const struct of_device_id kpss_xcc_match_table[] = {\n\t{ .compatible = \"qcom,kpss-acc-v1\", .data = (void *)1UL },\n\t{ .compatible = \"qcom,kpss-gcc\" },\n\t{}\n};\nMODULE_DEVICE_TABLE(of, kpss_xcc_match_table);\n\nstatic int kpss_xcc_driver_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tconst struct of_device_id *id;\n\tvoid __iomem *base;\n\tstruct clk_hw *hw;\n\tconst char *name;\n\n\tid = of_match_device(kpss_xcc_match_table, dev);\n\tif (!id)\n\t\treturn -ENODEV;\n\n\tbase = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(base))\n\t\treturn PTR_ERR(base);\n\n\tif (id->data) {\n\t\tif (of_property_read_string_index(dev->of_node,\n\t\t\t\t\t\t  \"clock-output-names\",\n\t\t\t\t\t\t  0, &name))\n\t\t\treturn -ENODEV;\n\t\tbase += 0x14;\n\t} else {\n\t\tname = \"acpu_l2_aux\";\n\t\tbase += 0x28;\n\t}\n\n\thw = devm_clk_hw_register_mux_parent_data_table(dev, name, aux_parents,\n\t\t\t\t\t\t\tARRAY_SIZE(aux_parents), 0,\n\t\t\t\t\t\t\tbase, 0, 0x3,\n\t\t\t\t\t\t\t0, aux_parent_map, NULL);\n\tif (IS_ERR(hw))\n\t\treturn PTR_ERR(hw);\n\n\tof_clk_add_hw_provider(dev->of_node, of_clk_hw_simple_get, hw);\n\n\treturn 0;\n}\n\nstatic struct platform_driver kpss_xcc_driver = {\n\t.probe = kpss_xcc_driver_probe,\n\t.driver = {\n\t\t.name = \"kpss-xcc\",\n\t\t.of_match_table = kpss_xcc_match_table,\n\t},\n};\nmodule_platform_driver(kpss_xcc_driver);\n\nMODULE_DESCRIPTION(\"Krait Processor Sub System (KPSS) Clock Driver\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_ALIAS(\"platform:kpss-xcc\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}