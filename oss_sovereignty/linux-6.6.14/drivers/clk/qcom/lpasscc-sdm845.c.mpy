{
  "module_name": "lpasscc-sdm845.c",
  "hash_id": "646820d657ba900b0e0e578927041f3fe469c3f4961682a2741e386fd21018f4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/lpasscc-sdm845.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/platform_device.h>\n#include <linux/module.h>\n#include <linux/of_address.h>\n#include <linux/regmap.h>\n\n#include <dt-bindings/clock/qcom,lpass-sdm845.h>\n\n#include \"clk-regmap.h\"\n#include \"clk-branch.h\"\n#include \"common.h\"\n\nstatic struct clk_branch lpass_q6ss_ahbm_aon_clk = {\n\t.halt_reg = 0x12000,\n\t.halt_check = BRANCH_VOTED,\n\t.clkr = {\n\t\t.enable_reg = 0x12000,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"lpass_q6ss_ahbm_aon_clk\",\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic struct clk_branch lpass_q6ss_ahbs_aon_clk = {\n\t.halt_reg = 0x1f000,\n\t.halt_check = BRANCH_VOTED,\n\t.clkr = {\n\t\t.enable_reg = 0x1f000,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"lpass_q6ss_ahbs_aon_clk\",\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic struct clk_branch lpass_qdsp6ss_core_clk = {\n\t.halt_reg = 0x20,\n\t \n\t.halt_check = BRANCH_HALT_SKIP,\n\t.clkr = {\n\t\t.enable_reg = 0x20,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"lpass_qdsp6ss_core_clk\",\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic struct clk_branch lpass_qdsp6ss_xo_clk = {\n\t.halt_reg = 0x38,\n\t \n\t.halt_check = BRANCH_HALT_SKIP,\n\t.clkr = {\n\t\t.enable_reg = 0x38,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"lpass_qdsp6ss_xo_clk\",\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic struct clk_branch lpass_qdsp6ss_sleep_clk = {\n\t.halt_reg = 0x3c,\n\t \n\t.halt_check = BRANCH_HALT_SKIP,\n\t.clkr = {\n\t\t.enable_reg = 0x3c,\n\t\t.enable_mask = BIT(0),\n\t\t.hw.init = &(struct clk_init_data){\n\t\t\t.name = \"lpass_qdsp6ss_sleep_clk\",\n\t\t\t.ops = &clk_branch2_ops,\n\t\t},\n\t},\n};\n\nstatic struct regmap_config lpass_regmap_config = {\n\t.reg_bits\t= 32,\n\t.reg_stride\t= 4,\n\t.val_bits\t= 32,\n\t.fast_io\t= true,\n};\n\nstatic struct clk_regmap *lpass_cc_sdm845_clocks[] = {\n\t[LPASS_Q6SS_AHBM_AON_CLK] = &lpass_q6ss_ahbm_aon_clk.clkr,\n\t[LPASS_Q6SS_AHBS_AON_CLK] = &lpass_q6ss_ahbs_aon_clk.clkr,\n};\n\nstatic const struct qcom_cc_desc lpass_cc_sdm845_desc = {\n\t.config = &lpass_regmap_config,\n\t.clks = lpass_cc_sdm845_clocks,\n\t.num_clks = ARRAY_SIZE(lpass_cc_sdm845_clocks),\n};\n\nstatic struct clk_regmap *lpass_qdsp6ss_sdm845_clocks[] = {\n\t[LPASS_QDSP6SS_XO_CLK] = &lpass_qdsp6ss_xo_clk.clkr,\n\t[LPASS_QDSP6SS_SLEEP_CLK] = &lpass_qdsp6ss_sleep_clk.clkr,\n\t[LPASS_QDSP6SS_CORE_CLK] = &lpass_qdsp6ss_core_clk.clkr,\n};\n\nstatic const struct qcom_cc_desc lpass_qdsp6ss_sdm845_desc = {\n\t.config = &lpass_regmap_config,\n\t.clks = lpass_qdsp6ss_sdm845_clocks,\n\t.num_clks = ARRAY_SIZE(lpass_qdsp6ss_sdm845_clocks),\n};\n\nstatic int lpass_cc_sdm845_probe(struct platform_device *pdev)\n{\n\tconst struct qcom_cc_desc *desc;\n\tint ret;\n\n\tlpass_regmap_config.name = \"cc\";\n\tdesc = &lpass_cc_sdm845_desc;\n\n\tret = qcom_cc_probe_by_index(pdev, 0, desc);\n\tif (ret)\n\t\treturn ret;\n\n\tlpass_regmap_config.name = \"qdsp6ss\";\n\tdesc = &lpass_qdsp6ss_sdm845_desc;\n\n\treturn qcom_cc_probe_by_index(pdev, 1, desc);\n}\n\nstatic const struct of_device_id lpass_cc_sdm845_match_table[] = {\n\t{ .compatible = \"qcom,sdm845-lpasscc\" },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, lpass_cc_sdm845_match_table);\n\nstatic struct platform_driver lpass_cc_sdm845_driver = {\n\t.probe\t\t= lpass_cc_sdm845_probe,\n\t.driver\t\t= {\n\t\t.name\t= \"sdm845-lpasscc\",\n\t\t.of_match_table = lpass_cc_sdm845_match_table,\n\t},\n};\n\nstatic int __init lpass_cc_sdm845_init(void)\n{\n\treturn platform_driver_register(&lpass_cc_sdm845_driver);\n}\nsubsys_initcall(lpass_cc_sdm845_init);\n\nstatic void __exit lpass_cc_sdm845_exit(void)\n{\n\tplatform_driver_unregister(&lpass_cc_sdm845_driver);\n}\nmodule_exit(lpass_cc_sdm845_exit);\n\nMODULE_DESCRIPTION(\"QTI LPASS_CC SDM845 Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}