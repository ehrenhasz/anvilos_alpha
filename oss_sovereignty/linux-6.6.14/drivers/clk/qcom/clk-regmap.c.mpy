{
  "module_name": "clk-regmap.c",
  "hash_id": "49818d6a94fcd48e25e36fa0cb79292faca3ac1de542d239df1f57e16ae2da03",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/clk-regmap.c",
  "human_readable_source": "\n \n\n#include <linux/device.h>\n#include <linux/clk-provider.h>\n#include <linux/regmap.h>\n#include <linux/export.h>\n\n#include \"clk-regmap.h\"\n\n \nint clk_is_enabled_regmap(struct clk_hw *hw)\n{\n\tstruct clk_regmap *rclk = to_clk_regmap(hw);\n\tunsigned int val;\n\tint ret;\n\n\tret = regmap_read(rclk->regmap, rclk->enable_reg, &val);\n\tif (ret != 0)\n\t\treturn ret;\n\n\tif (rclk->enable_is_inverted)\n\t\treturn (val & rclk->enable_mask) == 0;\n\telse\n\t\treturn (val & rclk->enable_mask) != 0;\n}\nEXPORT_SYMBOL_GPL(clk_is_enabled_regmap);\n\n \nint clk_enable_regmap(struct clk_hw *hw)\n{\n\tstruct clk_regmap *rclk = to_clk_regmap(hw);\n\tunsigned int val;\n\n\tif (rclk->enable_is_inverted)\n\t\tval = 0;\n\telse\n\t\tval = rclk->enable_mask;\n\n\treturn regmap_update_bits(rclk->regmap, rclk->enable_reg,\n\t\t\t\t  rclk->enable_mask, val);\n}\nEXPORT_SYMBOL_GPL(clk_enable_regmap);\n\n \nvoid clk_disable_regmap(struct clk_hw *hw)\n{\n\tstruct clk_regmap *rclk = to_clk_regmap(hw);\n\tunsigned int val;\n\n\tif (rclk->enable_is_inverted)\n\t\tval = rclk->enable_mask;\n\telse\n\t\tval = 0;\n\n\tregmap_update_bits(rclk->regmap, rclk->enable_reg, rclk->enable_mask,\n\t\t\t   val);\n}\nEXPORT_SYMBOL_GPL(clk_disable_regmap);\n\n \nint devm_clk_register_regmap(struct device *dev, struct clk_regmap *rclk)\n{\n\tif (dev && dev_get_regmap(dev, NULL))\n\t\trclk->regmap = dev_get_regmap(dev, NULL);\n\telse if (dev && dev->parent)\n\t\trclk->regmap = dev_get_regmap(dev->parent, NULL);\n\n\treturn devm_clk_hw_register(dev, &rclk->hw);\n}\nEXPORT_SYMBOL_GPL(devm_clk_register_regmap);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}