{
  "module_name": "reset.c",
  "hash_id": "0b7f308e50ad54101c495f188713dac20c8158d9f9cdde5cf5902c0a45dba4fb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/qcom/reset.c",
  "human_readable_source": "\n \n\n#include <linux/bitops.h>\n#include <linux/export.h>\n#include <linux/regmap.h>\n#include <linux/reset-controller.h>\n#include <linux/delay.h>\n\n#include \"reset.h\"\n\nstatic int qcom_reset(struct reset_controller_dev *rcdev, unsigned long id)\n{\n\tstruct qcom_reset_controller *rst = to_qcom_reset_controller(rcdev);\n\n\trcdev->ops->assert(rcdev, id);\n\tfsleep(rst->reset_map[id].udelay ?: 1);  \n\n\trcdev->ops->deassert(rcdev, id);\n\treturn 0;\n}\n\nstatic int\nqcom_reset_assert(struct reset_controller_dev *rcdev, unsigned long id)\n{\n\tstruct qcom_reset_controller *rst;\n\tconst struct qcom_reset_map *map;\n\tu32 mask;\n\n\trst = to_qcom_reset_controller(rcdev);\n\tmap = &rst->reset_map[id];\n\tmask = map->bitmask ? map->bitmask : BIT(map->bit);\n\n\treturn regmap_update_bits(rst->regmap, map->reg, mask, mask);\n}\n\nstatic int\nqcom_reset_deassert(struct reset_controller_dev *rcdev, unsigned long id)\n{\n\tstruct qcom_reset_controller *rst;\n\tconst struct qcom_reset_map *map;\n\tu32 mask;\n\n\trst = to_qcom_reset_controller(rcdev);\n\tmap = &rst->reset_map[id];\n\tmask = map->bitmask ? map->bitmask : BIT(map->bit);\n\n\treturn regmap_update_bits(rst->regmap, map->reg, mask, 0);\n}\n\nconst struct reset_control_ops qcom_reset_ops = {\n\t.reset = qcom_reset,\n\t.assert = qcom_reset_assert,\n\t.deassert = qcom_reset_deassert,\n};\nEXPORT_SYMBOL_GPL(qcom_reset_ops);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}