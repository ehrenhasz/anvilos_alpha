{
  "module_name": "clk-imx6sll.c",
  "hash_id": "5821c6bef939ed79b094e2d5d94a82d84a78ade34bf8d9afa35146330fa3d5a9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/imx/clk-imx6sll.c",
  "human_readable_source": "\n \n\n#include <dt-bindings/clock/imx6sll-clock.h>\n#include <linux/clk.h>\n#include <linux/clkdev.h>\n#include <linux/clk-provider.h>\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/of.h>\n#include <linux/of_address.h>\n\n#include \"clk.h\"\n\n#define CCM_ANALOG_PLL_BYPASS\t\t(0x1 << 16)\n#define xPLL_CLR(offset)\t\t(offset + 0x8)\n\nstatic const char *pll_bypass_src_sels[] = { \"osc\", \"dummy\", };\nstatic const char *pll1_bypass_sels[] = { \"pll1\", \"pll1_bypass_src\", };\nstatic const char *pll2_bypass_sels[] = { \"pll2\", \"pll2_bypass_src\", };\nstatic const char *pll3_bypass_sels[] = { \"pll3\", \"pll3_bypass_src\", };\nstatic const char *pll4_bypass_sels[] = { \"pll4\", \"pll4_bypass_src\", };\nstatic const char *pll5_bypass_sels[] = { \"pll5\", \"pll5_bypass_src\", };\nstatic const char *pll6_bypass_sels[] = { \"pll6\", \"pll6_bypass_src\", };\nstatic const char *pll7_bypass_sels[] = { \"pll7\", \"pll7_bypass_src\", };\nstatic const char *step_sels[] = { \"osc\", \"pll2_pfd2_396m\", };\nstatic const char *pll1_sw_sels[] = { \"pll1_sys\", \"step\", };\nstatic const char *axi_alt_sels[] = { \"pll2_pfd2_396m\", \"pll3_pfd1_540m\", };\nstatic const char *axi_sels[] = {\"periph\", \"axi_alt_sel\", };\nstatic const char *periph_pre_sels[] = { \"pll2_bus\", \"pll2_pfd2_396m\", \"pll2_pfd0_352m\", \"pll2_198m\", };\nstatic const char *periph2_pre_sels[] = { \"pll2_bus\", \"pll2_pfd2_396m\", \"pll2_pfd0_352m\", \"pll4_audio_div\", };\nstatic const char *periph_clk2_sels[] = { \"pll3_usb_otg\", \"osc\", \"osc\", };\nstatic const char *periph2_clk2_sels[] = { \"pll3_usb_otg\", \"osc\", };\nstatic const char *periph_sels[] = { \"periph_pre\", \"periph_clk2\", };\nstatic const char *periph2_sels[] = { \"periph2_pre\", \"periph2_clk2\", };\nstatic const char *usdhc_sels[] = { \"pll2_pfd2_396m\", \"pll2_pfd0_352m\", };\nstatic const char *ssi_sels[] = {\"pll3_pfd2_508m\", \"pll3_pfd3_454m\", \"pll4_audio_div\", \"dummy\",};\nstatic const char *spdif_sels[] = { \"pll4_audio_div\", \"pll3_pfd2_508m\", \"pll5_video_div\", \"pll3_usb_otg\", };\nstatic const char *ldb_di0_div_sels[] = { \"ldb_di0_div_3_5\", \"ldb_di0_div_7\", };\nstatic const char *ldb_di1_div_sels[] = { \"ldb_di1_div_3_5\", \"ldb_di1_div_7\", };\nstatic const char *ldb_di0_sels[] = { \"pll5_video_div\", \"pll2_pfd0_352m\", \"pll2_pfd2_396m\", \"pll2_pfd3_594m\", \"pll2_pfd1_594m\", \"pll3_pfd3_454m\", };\nstatic const char *ldb_di1_sels[] = { \"pll3_usb_otg\", \"pll2_pfd0_352m\", \"pll2_pfd2_396m\", \"pll2_bus\", \"pll3_pfd3_454m\", \"pll3_pfd2_508m\", };\nstatic const char *lcdif_pre_sels[] = { \"pll2_bus\", \"pll3_pfd3_454m\", \"pll5_video_div\", \"pll2_pfd0_352m\", \"pll2_pfd1_594m\", \"pll3_pfd1_540m\", };\nstatic const char *ecspi_sels[] = { \"pll3_60m\", \"osc\", };\nstatic const char *uart_sels[] = { \"pll3_80m\", \"osc\", };\nstatic const char *perclk_sels[] = { \"ipg\", \"osc\", };\nstatic const char *lcdif_sels[] = { \"lcdif_podf\", \"ipp_di0\", \"ipp_di1\", \"ldb_di0\", \"ldb_di1\", };\n\nstatic const char *epdc_pre_sels[] = { \"pll2_bus\", \"pll3_usb_otg\", \"pll5_video_div\", \"pll2_pfd0_352m\", \"pll2_pfd2_396m\", \"pll3_pfd2_508m\", };\nstatic const char *epdc_sels[] = { \"epdc_podf\", \"ipp_di0\", \"ipp_di1\", \"ldb_di0\", \"ldb_di1\", };\n\nstatic struct clk_hw **hws;\nstatic struct clk_hw_onecell_data *clk_hw_data;\n\nstatic const struct clk_div_table post_div_table[] = {\n\t{ .val = 2, .div = 1, },\n\t{ .val = 1, .div = 2, },\n\t{ .val = 0, .div = 4, },\n\t{ }\n};\n\nstatic const struct clk_div_table video_div_table[] = {\n\t{ .val = 0, .div = 1, },\n\t{ .val = 1, .div = 2, },\n\t{ .val = 2, .div = 1, },\n\t{ .val = 3, .div = 4, },\n\t{ }\n};\n\nstatic u32 share_count_audio;\nstatic u32 share_count_ssi1;\nstatic u32 share_count_ssi2;\nstatic u32 share_count_ssi3;\n\nstatic void __init imx6sll_clocks_init(struct device_node *ccm_node)\n{\n\tstruct device_node *np;\n\tvoid __iomem *base;\n\n\tclk_hw_data = kzalloc(struct_size(clk_hw_data, hws,\n\t\t\t\t\t  IMX6SLL_CLK_END), GFP_KERNEL);\n\tif (WARN_ON(!clk_hw_data))\n\t\treturn;\n\n\tclk_hw_data->num = IMX6SLL_CLK_END;\n\thws = clk_hw_data->hws;\n\n\thws[IMX6SLL_CLK_DUMMY] = imx_clk_hw_fixed(\"dummy\", 0);\n\n\thws[IMX6SLL_CLK_CKIL] = imx_get_clk_hw_by_name(ccm_node, \"ckil\");\n\thws[IMX6SLL_CLK_OSC] = imx_get_clk_hw_by_name(ccm_node, \"osc\");\n\n\t \n\thws[IMX6SLL_CLK_IPP_DI0] = imx_get_clk_hw_by_name(ccm_node, \"ipp_di0\");\n\thws[IMX6SLL_CLK_IPP_DI1] = imx_get_clk_hw_by_name(ccm_node, \"ipp_di1\");\n\n\tnp = of_find_compatible_node(NULL, NULL, \"fsl,imx6sll-anatop\");\n\tbase = of_iomap(np, 0);\n\tof_node_put(np);\n\tWARN_ON(!base);\n\n\t \n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0x0));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0x10));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0x20));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0x30));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0x70));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0xa0));\n\twritel_relaxed(CCM_ANALOG_PLL_BYPASS, base + xPLL_CLR(0xe0));\n\n\thws[IMX6SLL_PLL1_BYPASS_SRC] = imx_clk_hw_mux(\"pll1_bypass_src\", base + 0x00, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL2_BYPASS_SRC] = imx_clk_hw_mux(\"pll2_bypass_src\", base + 0x30, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL3_BYPASS_SRC] = imx_clk_hw_mux(\"pll3_bypass_src\", base + 0x10, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL4_BYPASS_SRC] = imx_clk_hw_mux(\"pll4_bypass_src\", base + 0x70, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL5_BYPASS_SRC] = imx_clk_hw_mux(\"pll5_bypass_src\", base + 0xa0, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL6_BYPASS_SRC] = imx_clk_hw_mux(\"pll6_bypass_src\", base + 0xe0, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\thws[IMX6SLL_PLL7_BYPASS_SRC] = imx_clk_hw_mux(\"pll7_bypass_src\", base + 0x20, 14, 1, pll_bypass_src_sels, ARRAY_SIZE(pll_bypass_src_sels));\n\n\thws[IMX6SLL_CLK_PLL1] = imx_clk_hw_pllv3(IMX_PLLV3_SYS,\t \"pll1\", \"pll1_bypass_src\", base + 0x00, 0x7f);\n\thws[IMX6SLL_CLK_PLL2] = imx_clk_hw_pllv3(IMX_PLLV3_GENERIC, \"pll2\", \"pll2_bypass_src\", base + 0x30, 0x1);\n\thws[IMX6SLL_CLK_PLL3] = imx_clk_hw_pllv3(IMX_PLLV3_USB,\t \"pll3\", \"pll3_bypass_src\", base + 0x10, 0x3);\n\thws[IMX6SLL_CLK_PLL4] = imx_clk_hw_pllv3(IMX_PLLV3_AV,\t \"pll4\", \"pll4_bypass_src\", base + 0x70, 0x7f);\n\thws[IMX6SLL_CLK_PLL5] = imx_clk_hw_pllv3(IMX_PLLV3_AV,\t \"pll5\", \"pll5_bypass_src\", base + 0xa0, 0x7f);\n\thws[IMX6SLL_CLK_PLL6] = imx_clk_hw_pllv3(IMX_PLLV3_ENET,\t \"pll6\", \"pll6_bypass_src\", base + 0xe0, 0x3);\n\thws[IMX6SLL_CLK_PLL7] = imx_clk_hw_pllv3(IMX_PLLV3_USB,\t \"pll7\", \"pll7_bypass_src\", base + 0x20, 0x3);\n\n\thws[IMX6SLL_PLL1_BYPASS] = imx_clk_hw_mux_flags(\"pll1_bypass\", base + 0x00, 16, 1, pll1_bypass_sels, ARRAY_SIZE(pll1_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL2_BYPASS] = imx_clk_hw_mux_flags(\"pll2_bypass\", base + 0x30, 16, 1, pll2_bypass_sels, ARRAY_SIZE(pll2_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL3_BYPASS] = imx_clk_hw_mux_flags(\"pll3_bypass\", base + 0x10, 16, 1, pll3_bypass_sels, ARRAY_SIZE(pll3_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL4_BYPASS] = imx_clk_hw_mux_flags(\"pll4_bypass\", base + 0x70, 16, 1, pll4_bypass_sels, ARRAY_SIZE(pll4_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL5_BYPASS] = imx_clk_hw_mux_flags(\"pll5_bypass\", base + 0xa0, 16, 1, pll5_bypass_sels, ARRAY_SIZE(pll5_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL6_BYPASS] = imx_clk_hw_mux_flags(\"pll6_bypass\", base + 0xe0, 16, 1, pll6_bypass_sels, ARRAY_SIZE(pll6_bypass_sels), CLK_SET_RATE_PARENT);\n\thws[IMX6SLL_PLL7_BYPASS] = imx_clk_hw_mux_flags(\"pll7_bypass\", base + 0x20, 16, 1, pll7_bypass_sels, ARRAY_SIZE(pll7_bypass_sels), CLK_SET_RATE_PARENT);\n\n\thws[IMX6SLL_CLK_PLL1_SYS]\t= imx_clk_hw_fixed_factor(\"pll1_sys\", \"pll1_bypass\", 1, 1);\n\thws[IMX6SLL_CLK_PLL2_BUS]\t= imx_clk_hw_gate(\"pll2_bus\",\t   \"pll2_bypass\", base + 0x30, 13);\n\thws[IMX6SLL_CLK_PLL3_USB_OTG]\t= imx_clk_hw_gate(\"pll3_usb_otg\",\t   \"pll3_bypass\", base + 0x10, 13);\n\thws[IMX6SLL_CLK_PLL4_AUDIO]\t= imx_clk_hw_gate(\"pll4_audio\",\t   \"pll4_bypass\", base + 0x70, 13);\n\thws[IMX6SLL_CLK_PLL5_VIDEO]\t= imx_clk_hw_gate(\"pll5_video\",\t   \"pll5_bypass\", base + 0xa0, 13);\n\thws[IMX6SLL_CLK_PLL6_ENET]\t= imx_clk_hw_gate(\"pll6_enet\",\t   \"pll6_bypass\", base + 0xe0, 13);\n\thws[IMX6SLL_CLK_PLL7_USB_HOST]\t= imx_clk_hw_gate(\"pll7_usb_host\",\t   \"pll7_bypass\", base + 0x20, 13);\n\n\t \n\thws[IMX6SLL_CLK_USBPHY1] = imx_clk_hw_gate(\"usbphy1\", \"pll3_usb_otg\",  base + 0x10, 20);\n\thws[IMX6SLL_CLK_USBPHY2] = imx_clk_hw_gate(\"usbphy2\", \"pll7_usb_host\", base + 0x20, 20);\n\n\t \n\tif (IS_ENABLED(CONFIG_USB_MXS_PHY)) {\n\t\thws[IMX6SLL_CLK_USBPHY1_GATE] = imx_clk_hw_gate_flags(\"usbphy1_gate\", \"dummy\", base + 0x10, 6, CLK_IS_CRITICAL);\n\t\thws[IMX6SLL_CLK_USBPHY2_GATE] = imx_clk_hw_gate_flags(\"usbphy2_gate\", \"dummy\", base + 0x20, 6, CLK_IS_CRITICAL);\n\t}\n\n\t \n\thws[IMX6SLL_CLK_PLL2_PFD0] = imx_clk_hw_pfd(\"pll2_pfd0_352m\", \"pll2_bus\", base + 0x100, 0);\n\thws[IMX6SLL_CLK_PLL2_PFD1] = imx_clk_hw_pfd(\"pll2_pfd1_594m\", \"pll2_bus\", base + 0x100, 1);\n\thws[IMX6SLL_CLK_PLL2_PFD2] = imx_clk_hw_pfd(\"pll2_pfd2_396m\", \"pll2_bus\", base + 0x100, 2);\n\thws[IMX6SLL_CLK_PLL2_PFD3] = imx_clk_hw_pfd(\"pll2_pfd3_594m\", \"pll2_bus\",\tbase + 0x100, 3);\n\thws[IMX6SLL_CLK_PLL3_PFD0] = imx_clk_hw_pfd(\"pll3_pfd0_720m\", \"pll3_usb_otg\", base + 0xf0, 0);\n\thws[IMX6SLL_CLK_PLL3_PFD1] = imx_clk_hw_pfd(\"pll3_pfd1_540m\", \"pll3_usb_otg\", base + 0xf0, 1);\n\thws[IMX6SLL_CLK_PLL3_PFD2] = imx_clk_hw_pfd(\"pll3_pfd2_508m\", \"pll3_usb_otg\", base + 0xf0, 2);\n\thws[IMX6SLL_CLK_PLL3_PFD3] = imx_clk_hw_pfd(\"pll3_pfd3_454m\", \"pll3_usb_otg\", base + 0xf0, 3);\n\n\thws[IMX6SLL_CLK_PLL4_POST_DIV]  = clk_hw_register_divider_table(NULL, \"pll4_post_div\", \"pll4_audio\",\n\t\t CLK_SET_RATE_PARENT | CLK_SET_RATE_GATE, base + 0x70, 19, 2, 0, post_div_table, &imx_ccm_lock);\n\thws[IMX6SLL_CLK_PLL4_AUDIO_DIV] = clk_hw_register_divider(NULL, \"pll4_audio_div\", \"pll4_post_div\",\n\t\t CLK_SET_RATE_PARENT | CLK_SET_RATE_GATE, base + 0x170, 15, 1, 0, &imx_ccm_lock);\n\thws[IMX6SLL_CLK_PLL5_POST_DIV]  = clk_hw_register_divider_table(NULL, \"pll5_post_div\", \"pll5_video\",\n\t\t CLK_SET_RATE_PARENT | CLK_SET_RATE_GATE, base + 0xa0, 19, 2, 0, post_div_table, &imx_ccm_lock);\n\thws[IMX6SLL_CLK_PLL5_VIDEO_DIV] = clk_hw_register_divider_table(NULL, \"pll5_video_div\", \"pll5_post_div\",\n\t\t CLK_SET_RATE_PARENT | CLK_SET_RATE_GATE, base + 0x170, 30, 2, 0, video_div_table, &imx_ccm_lock);\n\n\t \n\thws[IMX6SLL_CLK_PLL2_198M] = imx_clk_hw_fixed_factor(\"pll2_198m\", \"pll2_pfd2_396m\", 1, 2);\n\thws[IMX6SLL_CLK_PLL3_120M] = imx_clk_hw_fixed_factor(\"pll3_120m\", \"pll3_usb_otg\",   1, 4);\n\thws[IMX6SLL_CLK_PLL3_80M]  = imx_clk_hw_fixed_factor(\"pll3_80m\",  \"pll3_usb_otg\",   1, 6);\n\thws[IMX6SLL_CLK_PLL3_60M]  = imx_clk_hw_fixed_factor(\"pll3_60m\",  \"pll3_usb_otg\",   1, 8);\n\n\tnp = ccm_node;\n\tbase = of_iomap(np, 0);\n\tWARN_ON(!base);\n\n\thws[IMX6SLL_CLK_STEP]\t\t  = imx_clk_hw_mux(\"step\", base + 0x0c, 8, 1, step_sels, ARRAY_SIZE(step_sels));\n\thws[IMX6SLL_CLK_PLL1_SW]\t  = imx_clk_hw_mux_flags(\"pll1_sw\",   base + 0x0c, 2,  1, pll1_sw_sels, ARRAY_SIZE(pll1_sw_sels), 0);\n\thws[IMX6SLL_CLK_AXI_ALT_SEL]\t  = imx_clk_hw_mux(\"axi_alt_sel\",\t   base + 0x14, 7,  1, axi_alt_sels, ARRAY_SIZE(axi_alt_sels));\n\thws[IMX6SLL_CLK_AXI_SEL]\t  = imx_clk_hw_mux_flags(\"axi_sel\",   base + 0x14, 6,  1, axi_sels, ARRAY_SIZE(axi_sels), 0);\n\thws[IMX6SLL_CLK_PERIPH_PRE]\t  = imx_clk_hw_mux(\"periph_pre\",      base + 0x18, 18, 2, periph_pre_sels, ARRAY_SIZE(periph_pre_sels));\n\thws[IMX6SLL_CLK_PERIPH2_PRE]\t  = imx_clk_hw_mux(\"periph2_pre\",     base + 0x18, 21, 2, periph2_pre_sels, ARRAY_SIZE(periph2_pre_sels));\n\thws[IMX6SLL_CLK_PERIPH_CLK2_SEL]  = imx_clk_hw_mux(\"periph_clk2_sel\",  base + 0x18, 12, 2, periph_clk2_sels, ARRAY_SIZE(periph_clk2_sels));\n\thws[IMX6SLL_CLK_PERIPH2_CLK2_SEL] = imx_clk_hw_mux(\"periph2_clk2_sel\", base + 0x18, 20, 1, periph2_clk2_sels, ARRAY_SIZE(periph2_clk2_sels));\n\thws[IMX6SLL_CLK_USDHC1_SEL]\t  = imx_clk_hw_mux(\"usdhc1_sel\",   base + 0x1c, 16, 1, usdhc_sels, ARRAY_SIZE(usdhc_sels));\n\thws[IMX6SLL_CLK_USDHC2_SEL]\t  = imx_clk_hw_mux(\"usdhc2_sel\",   base + 0x1c, 17, 1, usdhc_sels, ARRAY_SIZE(usdhc_sels));\n\thws[IMX6SLL_CLK_USDHC3_SEL]\t  = imx_clk_hw_mux(\"usdhc3_sel\",   base + 0x1c, 18, 1, usdhc_sels, ARRAY_SIZE(usdhc_sels));\n\thws[IMX6SLL_CLK_SSI1_SEL]\t  = imx_clk_hw_mux(\"ssi1_sel\",     base + 0x1c, 10, 2, ssi_sels, ARRAY_SIZE(ssi_sels));\n\thws[IMX6SLL_CLK_SSI2_SEL]\t  = imx_clk_hw_mux(\"ssi2_sel\",     base + 0x1c, 12, 2, ssi_sels, ARRAY_SIZE(ssi_sels));\n\thws[IMX6SLL_CLK_SSI3_SEL]\t  = imx_clk_hw_mux(\"ssi3_sel\",     base + 0x1c, 14, 2, ssi_sels, ARRAY_SIZE(ssi_sels));\n\thws[IMX6SLL_CLK_PERCLK_SEL]\t  = imx_clk_hw_mux(\"perclk_sel\",   base + 0x1c, 6,  1, perclk_sels, ARRAY_SIZE(perclk_sels));\n\thws[IMX6SLL_CLK_UART_SEL]\t  = imx_clk_hw_mux(\"uart_sel\",\tbase + 0x24, 6,  1, uart_sels, ARRAY_SIZE(uart_sels));\n\thws[IMX6SLL_CLK_SPDIF_SEL]\t  = imx_clk_hw_mux(\"spdif_sel\",\tbase + 0x30, 20, 2, spdif_sels, ARRAY_SIZE(spdif_sels));\n\thws[IMX6SLL_CLK_EXTERN_AUDIO_SEL] = imx_clk_hw_mux(\"extern_audio_sel\", base + 0x30, 7,  2, spdif_sels, ARRAY_SIZE(spdif_sels));\n\thws[IMX6SLL_CLK_EPDC_PRE_SEL]\t  = imx_clk_hw_mux(\"epdc_pre_sel\",\tbase + 0x34, 15, 3, epdc_pre_sels, ARRAY_SIZE(epdc_pre_sels));\n\thws[IMX6SLL_CLK_EPDC_SEL]\t  = imx_clk_hw_mux(\"epdc_sel\",\tbase + 0x34, 9, 3, epdc_sels, ARRAY_SIZE(epdc_sels));\n\thws[IMX6SLL_CLK_ECSPI_SEL]\t  = imx_clk_hw_mux(\"ecspi_sel\",\tbase + 0x38, 18, 1, ecspi_sels, ARRAY_SIZE(ecspi_sels));\n\thws[IMX6SLL_CLK_LCDIF_PRE_SEL]\t  = imx_clk_hw_mux(\"lcdif_pre_sel\", base + 0x38, 15, 3, lcdif_pre_sels, ARRAY_SIZE(lcdif_pre_sels));\n\thws[IMX6SLL_CLK_LCDIF_SEL]\t  = imx_clk_hw_mux(\"lcdif_sel\",\t    base + 0x38, 9, 3, lcdif_sels, ARRAY_SIZE(lcdif_sels));\n\n\thws[IMX6SLL_CLK_PERIPH]  = imx_clk_hw_busy_mux(\"periph\",  base + 0x14, 25, 1, base + 0x48, 5, periph_sels, ARRAY_SIZE(periph_sels));\n\thws[IMX6SLL_CLK_PERIPH2] = imx_clk_hw_busy_mux(\"periph2\", base + 0x14, 26, 1, base + 0x48, 3, periph2_sels, ARRAY_SIZE(periph2_sels));\n\n\thws[IMX6SLL_CLK_PERIPH_CLK2]\t= imx_clk_hw_divider(\"periph_clk2\",   \"periph_clk2_sel\",\tbase + 0x14, 27, 3);\n\thws[IMX6SLL_CLK_PERIPH2_CLK2]\t= imx_clk_hw_divider(\"periph2_clk2\",  \"periph2_clk2_sel\",\tbase + 0x14, 0,  3);\n\thws[IMX6SLL_CLK_IPG]\t\t= imx_clk_hw_divider(\"ipg\",\t   \"ahb\",\tbase + 0x14, 8, 2);\n\thws[IMX6SLL_CLK_LCDIF_PODF]\t= imx_clk_hw_divider(\"lcdif_podf\",\t   \"lcdif_pred\",\tbase + 0x18, 23, 3);\n\thws[IMX6SLL_CLK_PERCLK]\t= imx_clk_hw_divider(\"perclk\",\t   \"perclk_sel\",\tbase + 0x1c, 0,  6);\n\thws[IMX6SLL_CLK_USDHC3_PODF]   = imx_clk_hw_divider(\"usdhc3_podf\",   \"usdhc3_sel\",\tbase + 0x24, 19, 3);\n\thws[IMX6SLL_CLK_USDHC2_PODF]\t= imx_clk_hw_divider(\"usdhc2_podf\",   \"usdhc2_sel\",\tbase + 0x24, 16, 3);\n\thws[IMX6SLL_CLK_USDHC1_PODF]\t= imx_clk_hw_divider(\"usdhc1_podf\",   \"usdhc1_sel\",\tbase + 0x24, 11, 3);\n\thws[IMX6SLL_CLK_UART_PODF]\t= imx_clk_hw_divider(\"uart_podf\",\t   \"uart_sel\",\t\tbase + 0x24, 0,  6);\n\thws[IMX6SLL_CLK_SSI3_PRED]\t= imx_clk_hw_divider(\"ssi3_pred\",\t   \"ssi3_sel\",\t\tbase + 0x28, 22, 3);\n\thws[IMX6SLL_CLK_SSI3_PODF]\t= imx_clk_hw_divider(\"ssi3_podf\",\t   \"ssi3_pred\",\t\tbase + 0x28, 16, 6);\n\thws[IMX6SLL_CLK_SSI1_PRED]\t= imx_clk_hw_divider(\"ssi1_pred\",\t   \"ssi1_sel\",\t\tbase + 0x28, 6,\t 3);\n\thws[IMX6SLL_CLK_SSI1_PODF]\t= imx_clk_hw_divider(\"ssi1_podf\",\t   \"ssi1_pred\",\t\tbase + 0x28, 0,\t 6);\n\thws[IMX6SLL_CLK_SSI2_PRED]\t= imx_clk_hw_divider(\"ssi2_pred\",\t   \"ssi2_sel\",\t\tbase + 0x2c, 6,\t 3);\n\thws[IMX6SLL_CLK_SSI2_PODF]\t= imx_clk_hw_divider(\"ssi2_podf\",\t   \"ssi2_pred\",\t\tbase + 0x2c, 0,  6);\n\thws[IMX6SLL_CLK_SPDIF_PRED]\t= imx_clk_hw_divider(\"spdif_pred\",\t   \"spdif_sel\",\t\tbase + 0x30, 25, 3);\n\thws[IMX6SLL_CLK_SPDIF_PODF]\t= imx_clk_hw_divider(\"spdif_podf\",\t   \"spdif_pred\",\tbase + 0x30, 22, 3);\n\thws[IMX6SLL_CLK_EXTERN_AUDIO_PRED] = imx_clk_hw_divider(\"extern_audio_pred\", \"extern_audio_sel\",  base + 0x30, 12, 3);\n\thws[IMX6SLL_CLK_EXTERN_AUDIO_PODF] = imx_clk_hw_divider(\"extern_audio_podf\", \"extern_audio_pred\", base + 0x30, 9,  3);\n\thws[IMX6SLL_CLK_EPDC_PODF]  = imx_clk_hw_divider(\"epdc_podf\",  \"epdc_pre_sel\",  base + 0x34, 12, 3);\n\thws[IMX6SLL_CLK_ECSPI_PODF] = imx_clk_hw_divider(\"ecspi_podf\", \"ecspi_sel\",     base + 0x38, 19, 6);\n\thws[IMX6SLL_CLK_LCDIF_PRED] = imx_clk_hw_divider(\"lcdif_pred\", \"lcdif_pre_sel\", base + 0x38, 12, 3);\n\n\thws[IMX6SLL_CLK_ARM]\t\t= imx_clk_hw_busy_divider(\"arm\",\t\"pll1_sw\",\tbase +\t0x10, 0,  3,  base + 0x48, 16);\n\thws[IMX6SLL_CLK_MMDC_PODF]\t= imx_clk_hw_busy_divider(\"mmdc_podf\",\t\"periph2\",\tbase +  0x14, 3,  3,  base + 0x48, 2);\n\thws[IMX6SLL_CLK_AXI_PODF]\t= imx_clk_hw_busy_divider(\"axi\",\t\"axi_sel\",\tbase +  0x14, 16, 3,  base + 0x48, 0);\n\thws[IMX6SLL_CLK_AHB]\t\t= imx_clk_hw_busy_divider(\"ahb\",\t\"periph\",\tbase +  0x14, 10, 3,  base + 0x48, 1);\n\n\thws[IMX6SLL_CLK_LDB_DI0_DIV_3_5] = imx_clk_hw_fixed_factor(\"ldb_di0_div_3_5\", \"ldb_di0_sel\", 2, 7);\n\thws[IMX6SLL_CLK_LDB_DI0_DIV_7]\t  = imx_clk_hw_fixed_factor(\"ldb_di0_div_7\",   \"ldb_di0_sel\", 1, 7);\n\thws[IMX6SLL_CLK_LDB_DI1_DIV_3_5] = imx_clk_hw_fixed_factor(\"ldb_di1_div_3_5\", \"ldb_di1_sel\", 2, 7);\n\thws[IMX6SLL_CLK_LDB_DI1_DIV_7]\t  = imx_clk_hw_fixed_factor(\"ldb_di1_div_7\",   \"ldb_di1_sel\", 1, 7);\n\n\thws[IMX6SLL_CLK_LDB_DI0_SEL]\t= imx_clk_hw_mux(\"ldb_di0_sel\", base + 0x2c, 9, 3, ldb_di0_sels, ARRAY_SIZE(ldb_di0_sels));\n\thws[IMX6SLL_CLK_LDB_DI1_SEL]   = imx_clk_hw_mux(\"ldb_di1_sel\", base + 0x1c, 7, 3, ldb_di1_sels, ARRAY_SIZE(ldb_di1_sels));\n\thws[IMX6SLL_CLK_LDB_DI0_DIV_SEL] = imx_clk_hw_mux(\"ldb_di0_div_sel\", base + 0x20, 10, 1, ldb_di0_div_sels, ARRAY_SIZE(ldb_di0_div_sels));\n\thws[IMX6SLL_CLK_LDB_DI1_DIV_SEL] = imx_clk_hw_mux(\"ldb_di1_div_sel\", base + 0x20, 10, 1, ldb_di1_div_sels, ARRAY_SIZE(ldb_di1_div_sels));\n\n\t \n\thws[IMX6SLL_CLK_AIPSTZ1]\t= imx_clk_hw_gate2_flags(\"aips_tz1\", \"ahb\", base + 0x68, 0, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_AIPSTZ2]\t= imx_clk_hw_gate2_flags(\"aips_tz2\", \"ahb\", base + 0x68, 2, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_DCP]\t\t= imx_clk_hw_gate2(\"dcp\", \"ahb\", base + 0x68, 10);\n\thws[IMX6SLL_CLK_UART2_IPG]\t= imx_clk_hw_gate2(\"uart2_ipg\", \"ipg\", base + 0x68, 28);\n\thws[IMX6SLL_CLK_UART2_SERIAL]\t= imx_clk_hw_gate2(\"uart2_serial\",\t\"uart_podf\", base + 0x68, 28);\n\thws[IMX6SLL_CLK_GPIO2]\t\t= imx_clk_hw_gate2(\"gpio2\", \"ipg\", base + 0x68, 30);\n\n\t \n\thws[IMX6SLL_CLK_ECSPI1]\t= imx_clk_hw_gate2(\"ecspi1\",\t\"ecspi_podf\", base + 0x6c, 0);\n\thws[IMX6SLL_CLK_ECSPI2]\t= imx_clk_hw_gate2(\"ecspi2\",\t\"ecspi_podf\", base + 0x6c, 2);\n\thws[IMX6SLL_CLK_ECSPI3]\t= imx_clk_hw_gate2(\"ecspi3\",\t\"ecspi_podf\", base + 0x6c, 4);\n\thws[IMX6SLL_CLK_ECSPI4]\t= imx_clk_hw_gate2(\"ecspi4\",\t\"ecspi_podf\", base + 0x6c, 6);\n\thws[IMX6SLL_CLK_UART3_IPG]\t= imx_clk_hw_gate2(\"uart3_ipg\",\t\"ipg\", base + 0x6c, 10);\n\thws[IMX6SLL_CLK_UART3_SERIAL]\t= imx_clk_hw_gate2(\"uart3_serial\",\t\"uart_podf\", base + 0x6c, 10);\n\thws[IMX6SLL_CLK_EPIT1]\t\t= imx_clk_hw_gate2(\"epit1\",\t\"perclk\", base + 0x6c, 12);\n\thws[IMX6SLL_CLK_EPIT2]\t\t= imx_clk_hw_gate2(\"epit2\",\t\"perclk\", base + 0x6c, 14);\n\thws[IMX6SLL_CLK_GPT_BUS]\t= imx_clk_hw_gate2(\"gpt1_bus\",\t\"perclk\", base + 0x6c, 20);\n\thws[IMX6SLL_CLK_GPT_SERIAL]\t= imx_clk_hw_gate2(\"gpt1_serial\",\t\"perclk\", base + 0x6c, 22);\n\thws[IMX6SLL_CLK_UART4_IPG]\t= imx_clk_hw_gate2(\"uart4_ipg\",\t\"ipg\", base + 0x6c, 24);\n\thws[IMX6SLL_CLK_UART4_SERIAL]\t= imx_clk_hw_gate2(\"uart4_serial\",\t\"uart_podf\", base + 0x6c, 24);\n\thws[IMX6SLL_CLK_GPIO1]\t\t= imx_clk_hw_gate2(\"gpio1\",\t\"ipg\", base + 0x6c, 26);\n\thws[IMX6SLL_CLK_GPIO5]\t\t= imx_clk_hw_gate2(\"gpio5\",\t\"ipg\", base + 0x6c, 30);\n\n\t \n\thws[IMX6SLL_CLK_GPIO6]\t\t= imx_clk_hw_gate2(\"gpio6\",\t\"ipg\",    base + 0x70, 0);\n\thws[IMX6SLL_CLK_CSI]\t\t= imx_clk_hw_gate2(\"csi\",\t\t\"axi\",    base + 0x70,\t2);\n\thws[IMX6SLL_CLK_I2C1]\t\t= imx_clk_hw_gate2(\"i2c1\",\t\t\"perclk\", base + 0x70,\t6);\n\thws[IMX6SLL_CLK_I2C2]\t\t= imx_clk_hw_gate2(\"i2c2\",\t\t\"perclk\", base + 0x70,\t8);\n\thws[IMX6SLL_CLK_I2C3]\t\t= imx_clk_hw_gate2(\"i2c3\",\t\t\"perclk\", base + 0x70,\t10);\n\thws[IMX6SLL_CLK_OCOTP]\t\t= imx_clk_hw_gate2(\"ocotp\",\t\"ipg\",    base + 0x70,\t12);\n\thws[IMX6SLL_CLK_GPIO3]\t\t= imx_clk_hw_gate2(\"gpio3\",\t\"ipg\",    base + 0x70,\t26);\n\thws[IMX6SLL_CLK_LCDIF_APB]\t= imx_clk_hw_gate2(\"lcdif_apb\",\t\"axi\",    base + 0x70,\t28);\n\thws[IMX6SLL_CLK_PXP]\t\t= imx_clk_hw_gate2(\"pxp\",\t\t\"axi\",    base + 0x70,\t30);\n\n\t \n\thws[IMX6SLL_CLK_UART5_IPG]\t= imx_clk_hw_gate2(\"uart5_ipg\",\t\"ipg\",\t\tbase + 0x74, 2);\n\thws[IMX6SLL_CLK_UART5_SERIAL]\t= imx_clk_hw_gate2(\"uart5_serial\",\t\"uart_podf\",\tbase + 0x74, 2);\n\thws[IMX6SLL_CLK_EPDC_AXI]\t= imx_clk_hw_gate2(\"epdc_aclk\",\t\"axi\",\t\tbase + 0x74, 4);\n\thws[IMX6SLL_CLK_EPDC_PIX]\t= imx_clk_hw_gate2(\"epdc_pix\",\t\"epdc_podf\",\tbase + 0x74, 4);\n\thws[IMX6SLL_CLK_LCDIF_PIX]\t= imx_clk_hw_gate2(\"lcdif_pix\",\t\"lcdif_podf\",\tbase + 0x74, 10);\n\thws[IMX6SLL_CLK_GPIO4]\t\t= imx_clk_hw_gate2(\"gpio4\",\t\"ipg\",\t\tbase + 0x74, 12);\n\thws[IMX6SLL_CLK_WDOG1]\t\t= imx_clk_hw_gate2(\"wdog1\",\t\"ipg\",\t\tbase + 0x74, 16);\n\thws[IMX6SLL_CLK_MMDC_P0_FAST]\t= imx_clk_hw_gate_flags(\"mmdc_p0_fast\", \"mmdc_podf\",  base + 0x74,\t20, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_MMDC_P0_IPG]\t= imx_clk_hw_gate2_flags(\"mmdc_p0_ipg\", \"ipg\",\t   base + 0x74,\t24, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_MMDC_P1_IPG]\t= imx_clk_hw_gate2_flags(\"mmdc_p1_ipg\", \"ipg\",\t   base + 0x74,\t26, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_OCRAM]\t\t= imx_clk_hw_gate_flags(\"ocram\", \"ahb\",\t\t   base + 0x74,\t28, CLK_IS_CRITICAL);\n\n\t \n\thws[IMX6SLL_CLK_PWM1]\t\t= imx_clk_hw_gate2(\"pwm1\", \"perclk\", base + 0x78, 16);\n\thws[IMX6SLL_CLK_PWM2]\t\t= imx_clk_hw_gate2(\"pwm2\", \"perclk\", base + 0x78, 18);\n\thws[IMX6SLL_CLK_PWM3]\t\t= imx_clk_hw_gate2(\"pwm3\", \"perclk\", base + 0x78, 20);\n\thws[IMX6SLL_CLK_PWM4]\t\t= imx_clk_hw_gate2(\"pwm4\", \"perclk\", base + 0x78, 22);\n\n\t \n\thws[IMX6SLL_CLK_ROM]\t\t= imx_clk_hw_gate2_flags(\"rom\", \"ahb\", base + 0x7c, 0, CLK_IS_CRITICAL);\n\thws[IMX6SLL_CLK_SDMA]\t\t= imx_clk_hw_gate2(\"sdma\",\t \"ahb\",\tbase + 0x7c, 6);\n\thws[IMX6SLL_CLK_WDOG2]\t\t= imx_clk_hw_gate2(\"wdog2\", \"ipg\",\tbase + 0x7c, 10);\n\thws[IMX6SLL_CLK_SPBA]\t\t= imx_clk_hw_gate2(\"spba\",\t \"ipg\",\tbase + 0x7c, 12);\n\thws[IMX6SLL_CLK_EXTERN_AUDIO]\t= imx_clk_hw_gate2_shared(\"extern_audio\",  \"extern_audio_podf\", base + 0x7c, 14, &share_count_audio);\n\thws[IMX6SLL_CLK_SPDIF]\t\t= imx_clk_hw_gate2_shared(\"spdif\",\t\t\"spdif_podf\",\tbase + 0x7c, 14, &share_count_audio);\n\thws[IMX6SLL_CLK_SPDIF_GCLK]\t= imx_clk_hw_gate2_shared(\"spdif_gclk\",\t\"ipg\",\t\tbase + 0x7c, 14, &share_count_audio);\n\thws[IMX6SLL_CLK_SSI1]\t\t= imx_clk_hw_gate2_shared(\"ssi1\",\t\t\"ssi1_podf\",\tbase + 0x7c, 18, &share_count_ssi1);\n\thws[IMX6SLL_CLK_SSI1_IPG]\t= imx_clk_hw_gate2_shared(\"ssi1_ipg\",\t\"ipg\",\t\tbase + 0x7c, 18, &share_count_ssi1);\n\thws[IMX6SLL_CLK_SSI2]\t\t= imx_clk_hw_gate2_shared(\"ssi2\",\t\t\"ssi2_podf\",\tbase + 0x7c, 20, &share_count_ssi2);\n\thws[IMX6SLL_CLK_SSI2_IPG]\t= imx_clk_hw_gate2_shared(\"ssi2_ipg\",\t\"ipg\",\t\tbase + 0x7c, 20, &share_count_ssi2);\n\thws[IMX6SLL_CLK_SSI3]\t\t= imx_clk_hw_gate2_shared(\"ssi3\",\t\t\"ssi3_podf\",\tbase + 0x7c, 22, &share_count_ssi3);\n\thws[IMX6SLL_CLK_SSI3_IPG]\t= imx_clk_hw_gate2_shared(\"ssi3_ipg\",\t\"ipg\",\t\tbase + 0x7c, 22, &share_count_ssi3);\n\thws[IMX6SLL_CLK_UART1_IPG]\t= imx_clk_hw_gate2(\"uart1_ipg\",\t\"ipg\",\t\tbase + 0x7c, 24);\n\thws[IMX6SLL_CLK_UART1_SERIAL]\t= imx_clk_hw_gate2(\"uart1_serial\",\t\"uart_podf\",\tbase + 0x7c, 24);\n\n\t \n\thws[IMX6SLL_CLK_USBOH3]\t= imx_clk_hw_gate2(\"usboh3\", \"ipg\",\t  base + 0x80,\t0);\n\thws[IMX6SLL_CLK_USDHC1]\t= imx_clk_hw_gate2(\"usdhc1\", \"usdhc1_podf\",  base + 0x80,\t2);\n\thws[IMX6SLL_CLK_USDHC2]\t= imx_clk_hw_gate2(\"usdhc2\", \"usdhc2_podf\",  base + 0x80,\t4);\n\thws[IMX6SLL_CLK_USDHC3]\t= imx_clk_hw_gate2(\"usdhc3\", \"usdhc3_podf\",  base + 0x80,\t6);\n\n\t \n\timx_mmdc_mask_handshake(base, 0);\n\n\timx_check_clk_hws(hws, IMX6SLL_CLK_END);\n\n\tof_clk_add_hw_provider(np, of_clk_hw_onecell_get, clk_hw_data);\n\n\timx_register_uart_clocks();\n\n\t \n\tclk_set_rate(hws[IMX6SLL_CLK_AHB]->clk, 99000000);\n\n\t \n\tclk_set_parent(hws[IMX6SLL_CLK_PERIPH_CLK2_SEL]->clk, hws[IMX6SLL_CLK_PLL3_USB_OTG]->clk);\n\tclk_set_parent(hws[IMX6SLL_CLK_PERIPH]->clk, hws[IMX6SLL_CLK_PERIPH_CLK2]->clk);\n\tclk_set_parent(hws[IMX6SLL_CLK_PERIPH_PRE]->clk, hws[IMX6SLL_CLK_PLL2_BUS]->clk);\n\tclk_set_parent(hws[IMX6SLL_CLK_PERIPH]->clk, hws[IMX6SLL_CLK_PERIPH_PRE]->clk);\n\n\tclk_set_rate(hws[IMX6SLL_CLK_AHB]->clk, 132000000);\n}\nCLK_OF_DECLARE_DRIVER(imx6sll, \"fsl,imx6sll-ccm\", imx6sll_clocks_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}