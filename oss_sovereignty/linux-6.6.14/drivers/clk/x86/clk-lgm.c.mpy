{
  "module_name": "clk-lgm.c",
  "hash_id": "be544c4ebd1bfb38da50798dad7912b0c63887e85a2932964798253c67f08535",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/x86/clk-lgm.c",
  "human_readable_source": "\n \n#include <linux/clk-provider.h>\n#include <linux/mfd/syscon.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <dt-bindings/clock/intel,lgm-clk.h>\n#include \"clk-cgu.h\"\n\n#define PLL_DIV_WIDTH\t\t4\n#define PLL_DDIV_WIDTH\t\t3\n\n \n#define G_C55_SHIFT\t\t7\n#define G_QSPI_SHIFT\t\t9\n#define G_EIP197_SHIFT\t\t11\n#define G_VAULT130_SHIFT\t12\n#define G_TOE_SHIFT\t\t13\n#define G_SDXC_SHIFT\t\t14\n#define G_EMMC_SHIFT\t\t15\n#define G_SPIDBG_SHIFT\t\t17\n#define G_DMA3_SHIFT\t\t28\n\n \n#define G_DMA0_SHIFT\t\t0\n#define G_LEDC0_SHIFT\t\t1\n#define G_LEDC1_SHIFT\t\t2\n#define G_I2S0_SHIFT\t\t3\n#define G_I2S1_SHIFT\t\t4\n#define G_EBU_SHIFT\t\t5\n#define G_PWM_SHIFT\t\t6\n#define G_I2C0_SHIFT\t\t7\n#define G_I2C1_SHIFT\t\t8\n#define G_I2C2_SHIFT\t\t9\n#define G_I2C3_SHIFT\t\t10\n\n#define G_SSC0_SHIFT\t\t12\n#define G_SSC1_SHIFT\t\t13\n#define G_SSC2_SHIFT\t\t14\n#define G_SSC3_SHIFT\t\t15\n\n#define G_GPTC0_SHIFT\t\t17\n#define G_GPTC1_SHIFT\t\t18\n#define G_GPTC2_SHIFT\t\t19\n#define G_GPTC3_SHIFT\t\t20\n\n#define G_ASC0_SHIFT\t\t22\n#define G_ASC1_SHIFT\t\t23\n#define G_ASC2_SHIFT\t\t24\n#define G_ASC3_SHIFT\t\t25\n\n#define G_PCM0_SHIFT\t\t27\n#define G_PCM1_SHIFT\t\t28\n#define G_PCM2_SHIFT\t\t29\n\n \n#define G_PCIE10_SHIFT\t\t1\n#define G_PCIE11_SHIFT\t\t2\n#define G_PCIE30_SHIFT\t\t3\n#define G_PCIE31_SHIFT\t\t4\n#define G_PCIE20_SHIFT\t\t5\n#define G_PCIE21_SHIFT\t\t6\n#define G_PCIE40_SHIFT\t\t7\n#define G_PCIE41_SHIFT\t\t8\n\n#define G_XPCS0_SHIFT\t\t10\n#define G_XPCS1_SHIFT\t\t11\n#define G_XPCS2_SHIFT\t\t12\n#define G_XPCS3_SHIFT\t\t13\n#define G_SATA0_SHIFT\t\t14\n#define G_SATA1_SHIFT\t\t15\n#define G_SATA2_SHIFT\t\t16\n#define G_SATA3_SHIFT\t\t17\n\n \n#define G_ARCEM4_SHIFT\t\t0\n#define G_IDMAR1_SHIFT\t\t2\n#define G_IDMAT0_SHIFT\t\t3\n#define G_IDMAT1_SHIFT\t\t4\n#define G_IDMAT2_SHIFT\t\t5\n\n#define G_PPV4_SHIFT\t\t8\n#define G_GSWIPO_SHIFT\t\t9\n#define G_CQEM_SHIFT\t\t10\n#define G_XPCS5_SHIFT\t\t14\n#define G_USB1_SHIFT\t\t25\n#define G_USB2_SHIFT\t\t26\n\n\n \n#define CGU_PLL0CZ_CFG0\t\t0x000\n#define CGU_PLL0CM0_CFG0\t0x020\n#define CGU_PLL0CM1_CFG0\t0x040\n#define CGU_PLL0B_CFG0\t\t0x060\n#define CGU_PLL1_CFG0\t\t0x080\n#define CGU_PLL2_CFG0\t\t0x0A0\n#define CGU_PLLPP_CFG0\t\t0x0C0\n#define CGU_LJPLL3_CFG0\t\t0x0E0\n#define CGU_LJPLL4_CFG0\t\t0x100\n#define CGU_C55_PCMCR\t\t0x18C\n#define CGU_PCMCR\t\t0x190\n#define CGU_IF_CLK1\t\t0x1A0\n#define CGU_IF_CLK2\t\t0x1A4\n#define CGU_GATE0\t\t0x300\n#define CGU_GATE1\t\t0x310\n#define CGU_GATE2\t\t0x320\n#define CGU_GATE3\t\t0x310\n\n#define PLL_DIV(x)\t\t((x) + 0x04)\n#define PLL_SSC(x)\t\t((x) + 0x10)\n\n#define CLK_NR_CLKS\t\t(LGM_GCLK_USB2 + 1)\n\n \nstatic const struct clk_div_table pll_div[] = {\n\t{ .val = 0, .div = 1 },\n\t{ .val = 1, .div = 2 },\n\t{ .val = 2, .div = 3 },\n\t{ .val = 3, .div = 4 },\n\t{ .val = 4, .div = 5 },\n\t{ .val = 5, .div = 6 },\n\t{ .val = 6, .div = 8 },\n\t{ .val = 7, .div = 10 },\n\t{ .val = 8, .div = 12 },\n\t{ .val = 9, .div = 16 },\n\t{ .val = 10, .div = 20 },\n\t{ .val = 11, .div = 24 },\n\t{ .val = 12, .div = 32 },\n\t{ .val = 13, .div = 40 },\n\t{ .val = 14, .div = 48 },\n\t{ .val = 15, .div = 64 },\n\t{}\n};\n\nstatic const struct clk_div_table dcl_div[] = {\n\t{ .val = 0, .div = 6  },\n\t{ .val = 1, .div = 12 },\n\t{ .val = 2, .div = 24 },\n\t{ .val = 3, .div = 32 },\n\t{ .val = 4, .div = 48 },\n\t{ .val = 5, .div = 96 },\n\t{}\n};\n\nstatic const struct clk_parent_data pll_p[] = {\n\t{ .fw_name = \"osc\", .name = \"osc\" },\n};\nstatic const struct clk_parent_data pllcm_p[] = {\n\t{ .fw_name = \"cpu_cm\", .name = \"cpu_cm\" },\n};\nstatic const struct clk_parent_data emmc_p[] = {\n\t{ .fw_name = \"emmc4\", .name = \"emmc4\" },\n\t{ .fw_name = \"noc4\", .name = \"noc4\" },\n};\nstatic const struct clk_parent_data sdxc_p[] = {\n\t{ .fw_name = \"sdxc3\", .name = \"sdxc3\" },\n\t{ .fw_name = \"sdxc2\", .name = \"sdxc2\" },\n};\nstatic const struct clk_parent_data pcm_p[] = {\n\t{ .fw_name = \"v_docsis\", .name = \"v_docsis\" },\n\t{ .fw_name = \"dcl\", .name = \"dcl\" },\n};\nstatic const struct clk_parent_data cbphy_p[] = {\n\t{ .fw_name = \"dd_serdes\", .name = \"dd_serdes\" },\n\t{ .fw_name = \"dd_pcie\", .name = \"dd_pcie\" },\n};\n\nstatic const struct lgm_pll_clk_data lgm_pll_clks[] = {\n\tLGM_PLL(LGM_CLK_PLL0CZ, \"pll0cz\", pll_p, CLK_IGNORE_UNUSED,\n\t\tCGU_PLL0CZ_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLL0CM0, \"pll0cm0\", pllcm_p, CLK_IGNORE_UNUSED,\n\t\tCGU_PLL0CM0_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLL0CM1, \"pll0cm1\", pllcm_p, CLK_IGNORE_UNUSED,\n\t\tCGU_PLL0CM1_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLL0B, \"pll0b\", pll_p, CLK_IGNORE_UNUSED,\n\t\tCGU_PLL0B_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLL1, \"pll1\", pll_p, 0, CGU_PLL1_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLL2, \"pll2\", pll_p, CLK_IGNORE_UNUSED,\n\t\tCGU_PLL2_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_PLLPP, \"pllpp\", pll_p, 0, CGU_PLLPP_CFG0, TYPE_ROPLL),\n\tLGM_PLL(LGM_CLK_LJPLL3, \"ljpll3\", pll_p, 0, CGU_LJPLL3_CFG0, TYPE_LJPLL),\n\tLGM_PLL(LGM_CLK_LJPLL4, \"ljpll4\", pll_p, 0, CGU_LJPLL4_CFG0, TYPE_LJPLL),\n};\n\nstatic const struct lgm_clk_branch lgm_branch_clks[] = {\n\tLGM_DIV(LGM_CLK_PP_HW, \"pp_hw\", \"pllpp\", 0, PLL_DIV(CGU_PLLPP_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_PP_UC, \"pp_uc\", \"pllpp\", 0, PLL_DIV(CGU_PLLPP_CFG0),\n\t\t4, PLL_DIV_WIDTH, 25, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_PP_FXD, \"pp_fxd\", \"pllpp\", 0, PLL_DIV(CGU_PLLPP_CFG0),\n\t\t8, PLL_DIV_WIDTH, 26, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_PP_TBM, \"pp_tbm\", \"pllpp\", 0, PLL_DIV(CGU_PLLPP_CFG0),\n\t\t12, PLL_DIV_WIDTH, 27, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_DDR, \"ddr\", \"pll2\", CLK_IGNORE_UNUSED,\n\t\tPLL_DIV(CGU_PLL2_CFG0), 0, PLL_DIV_WIDTH, 24, 1, 0, 0,\n\t\tpll_div),\n\tLGM_DIV(LGM_CLK_CM, \"cpu_cm\", \"pll0cz\", 0, PLL_DIV(CGU_PLL0CZ_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\n\tLGM_DIV(LGM_CLK_IC, \"cpu_ic\", \"pll0cz\", CLK_IGNORE_UNUSED,\n\t\tPLL_DIV(CGU_PLL0CZ_CFG0), 4, PLL_DIV_WIDTH, 25,\n\t\t1, 0, 0, pll_div),\n\n\tLGM_DIV(LGM_CLK_SDXC3, \"sdxc3\", \"pll0cz\", 0, PLL_DIV(CGU_PLL0CZ_CFG0),\n\t\t8, PLL_DIV_WIDTH, 26, 1, 0, 0, pll_div),\n\n\tLGM_DIV(LGM_CLK_CPU0, \"cm0\", \"pll0cm0\",\n\t\tCLK_IGNORE_UNUSED, PLL_DIV(CGU_PLL0CM0_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_CPU1, \"cm1\", \"pll0cm1\",\n\t\tCLK_IGNORE_UNUSED, PLL_DIV(CGU_PLL0CM1_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\n\t \n\tLGM_DIV(LGM_CLK_NGI, \"ngi\", \"pll0b\",\n\t\t(CLK_IGNORE_UNUSED|CLK_IS_CRITICAL), PLL_DIV(CGU_PLL0B_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_NOC4, \"noc4\", \"pll0b\",\n\t\t(CLK_IGNORE_UNUSED|CLK_IS_CRITICAL), PLL_DIV(CGU_PLL0B_CFG0),\n\t\t4, PLL_DIV_WIDTH, 25, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_SW, \"switch\", \"pll0b\", 0, PLL_DIV(CGU_PLL0B_CFG0),\n\t\t8, PLL_DIV_WIDTH, 26, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_QSPI, \"qspi\", \"pll0b\", 0, PLL_DIV(CGU_PLL0B_CFG0),\n\t\t12, PLL_DIV_WIDTH, 27, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_CT, \"v_ct\", \"pll1\", 0, PLL_DIV(CGU_PLL1_CFG0),\n\t\t0, PLL_DIV_WIDTH, 24, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_DSP, \"v_dsp\", \"pll1\", 0, PLL_DIV(CGU_PLL1_CFG0),\n\t\t8, PLL_DIV_WIDTH, 26, 1, 0, 0, pll_div),\n\tLGM_DIV(LGM_CLK_VIF, \"v_ifclk\", \"pll1\", 0, PLL_DIV(CGU_PLL1_CFG0),\n\t\t12, PLL_DIV_WIDTH, 27, 1, 0, 0, pll_div),\n\n\tLGM_FIXED_FACTOR(LGM_CLK_EMMC4, \"emmc4\", \"sdxc3\", 0,  0,\n\t\t\t 0, 0, 0, 0, 1, 4),\n\tLGM_FIXED_FACTOR(LGM_CLK_SDXC2, \"sdxc2\", \"noc4\", 0,  0,\n\t\t\t 0, 0, 0, 0, 1, 4),\n\tLGM_MUX(LGM_CLK_EMMC, \"emmc\", emmc_p, 0, CGU_IF_CLK1,\n\t\t0, 1, CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_MUX(LGM_CLK_SDXC, \"sdxc\", sdxc_p, 0, CGU_IF_CLK1,\n\t\t1, 1, CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_FIXED(LGM_CLK_OSC, \"osc\", NULL, 0, 0, 0, 0, 0, 40000000, 0),\n\tLGM_FIXED(LGM_CLK_SLIC, \"slic\", NULL, 0, CGU_IF_CLK1,\n\t\t  8, 2, CLOCK_FLAG_VAL_INIT, 8192000, 2),\n\tLGM_FIXED(LGM_CLK_DOCSIS, \"v_docsis\", NULL, 0, 0, 0, 0, 0, 16000000, 0),\n\tLGM_DIV(LGM_CLK_DCL, \"dcl\", \"v_ifclk\", CLK_SET_RATE_PARENT, CGU_PCMCR,\n\t\t25, 3, 0, 0, DIV_CLK_NO_MASK, 0, dcl_div),\n\tLGM_MUX(LGM_CLK_PCM, \"pcm\", pcm_p, 0, CGU_C55_PCMCR,\n\t\t0, 1, CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_FIXED_FACTOR(LGM_CLK_DDR_PHY, \"ddr_phy\", \"ddr\",\n\t\t\t CLK_IGNORE_UNUSED, 0,\n\t\t\t 0, 0, 0, 0, 2, 1),\n\tLGM_FIXED_FACTOR(LGM_CLK_PONDEF, \"pondef\", \"dd_pool\",\n\t\t\t CLK_SET_RATE_PARENT, 0, 0, 0, 0, 0, 1, 2),\n\tLGM_MUX(LGM_CLK_CBPHY0, \"cbphy0\", cbphy_p, 0, 0,\n\t\t0, 0, MUX_CLK_SW | CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_MUX(LGM_CLK_CBPHY1, \"cbphy1\", cbphy_p, 0, 0,\n\t\t0, 0, MUX_CLK_SW | CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_MUX(LGM_CLK_CBPHY2, \"cbphy2\", cbphy_p, 0, 0,\n\t\t0, 0, MUX_CLK_SW | CLK_MUX_ROUND_CLOSEST, 0),\n\tLGM_MUX(LGM_CLK_CBPHY3, \"cbphy3\", cbphy_p, 0, 0,\n\t\t0, 0, MUX_CLK_SW | CLK_MUX_ROUND_CLOSEST, 0),\n\n\tLGM_GATE(LGM_GCLK_C55, \"g_c55\", NULL, 0, CGU_GATE0,\n\t\t G_C55_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_QSPI, \"g_qspi\", \"qspi\", 0, CGU_GATE0,\n\t\t G_QSPI_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_EIP197, \"g_eip197\", NULL, 0, CGU_GATE0,\n\t\t G_EIP197_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_VAULT, \"g_vault130\", NULL, 0, CGU_GATE0,\n\t\t G_VAULT130_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_TOE, \"g_toe\", NULL, 0, CGU_GATE0,\n\t\t G_TOE_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SDXC, \"g_sdxc\", \"sdxc\", 0, CGU_GATE0,\n\t\t G_SDXC_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_EMMC, \"g_emmc\", \"emmc\", 0, CGU_GATE0,\n\t\t G_EMMC_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SPI_DBG, \"g_spidbg\", NULL, 0, CGU_GATE0,\n\t\t G_SPIDBG_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_DMA3, \"g_dma3\", NULL, 0, CGU_GATE0,\n\t\t G_DMA3_SHIFT, 0, 0),\n\n\tLGM_GATE(LGM_GCLK_DMA0, \"g_dma0\", NULL, 0, CGU_GATE1,\n\t\t G_DMA0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_LEDC0, \"g_ledc0\", NULL, 0, CGU_GATE1,\n\t\t G_LEDC0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_LEDC1, \"g_ledc1\", NULL, 0, CGU_GATE1,\n\t\t G_LEDC1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2S0, \"g_i2s0\", NULL, 0, CGU_GATE1,\n\t\t G_I2S0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2S1, \"g_i2s1\", NULL, 0, CGU_GATE1,\n\t\t G_I2S1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_EBU, \"g_ebu\", NULL, 0, CGU_GATE1,\n\t\t G_EBU_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PWM, \"g_pwm\", NULL, 0, CGU_GATE1,\n\t\t G_PWM_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2C0, \"g_i2c0\", NULL, 0, CGU_GATE1,\n\t\t G_I2C0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2C1, \"g_i2c1\", NULL, 0, CGU_GATE1,\n\t\t G_I2C1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2C2, \"g_i2c2\", NULL, 0, CGU_GATE1,\n\t\t G_I2C2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_I2C3, \"g_i2c3\", NULL, 0, CGU_GATE1,\n\t\t G_I2C3_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SSC0, \"g_ssc0\", \"noc4\", 0, CGU_GATE1,\n\t\t G_SSC0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SSC1, \"g_ssc1\", \"noc4\", 0, CGU_GATE1,\n\t\t G_SSC1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SSC2, \"g_ssc2\", \"noc4\", 0, CGU_GATE1,\n\t\t G_SSC2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SSC3, \"g_ssc3\", \"noc4\", 0, CGU_GATE1,\n\t\t G_SSC3_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_GPTC0, \"g_gptc0\", \"noc4\", 0, CGU_GATE1,\n\t\t G_GPTC0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_GPTC1, \"g_gptc1\", \"noc4\", 0, CGU_GATE1,\n\t\t G_GPTC1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_GPTC2, \"g_gptc2\", \"noc4\", 0, CGU_GATE1,\n\t\t G_GPTC2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_GPTC3, \"g_gptc3\", \"osc\", 0, CGU_GATE1,\n\t\t G_GPTC3_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_ASC0, \"g_asc0\", \"noc4\", 0, CGU_GATE1,\n\t\t G_ASC0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_ASC1, \"g_asc1\", \"noc4\", 0, CGU_GATE1,\n\t\t G_ASC1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_ASC2, \"g_asc2\", \"noc4\", 0, CGU_GATE1,\n\t\t G_ASC2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_ASC3, \"g_asc3\", \"osc\", 0, CGU_GATE1,\n\t\t G_ASC3_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCM0, \"g_pcm0\", NULL, 0, CGU_GATE1,\n\t\t G_PCM0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCM1, \"g_pcm1\", NULL, 0, CGU_GATE1,\n\t\t G_PCM1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCM2, \"g_pcm2\", NULL, 0, CGU_GATE1,\n\t\t G_PCM2_SHIFT, 0, 0),\n\n\tLGM_GATE(LGM_GCLK_PCIE10, \"g_pcie10\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE10_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE11, \"g_pcie11\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE11_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE30, \"g_pcie30\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE30_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE31, \"g_pcie31\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE31_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE20, \"g_pcie20\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE20_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE21, \"g_pcie21\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE21_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE40, \"g_pcie40\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE40_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PCIE41, \"g_pcie41\", NULL, 0, CGU_GATE2,\n\t\t G_PCIE41_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_XPCS0, \"g_xpcs0\", NULL, 0, CGU_GATE2,\n\t\t G_XPCS0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_XPCS1, \"g_xpcs1\", NULL, 0, CGU_GATE2,\n\t\t G_XPCS1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_XPCS2, \"g_xpcs2\", NULL, 0, CGU_GATE2,\n\t\t G_XPCS2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_XPCS3, \"g_xpcs3\", NULL, 0, CGU_GATE2,\n\t\t G_XPCS3_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SATA0, \"g_sata0\", NULL, 0, CGU_GATE2,\n\t\t G_SATA0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SATA1, \"g_sata1\", NULL, 0, CGU_GATE2,\n\t\t G_SATA1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SATA2, \"g_sata2\", NULL, 0, CGU_GATE2,\n\t\t G_SATA2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_SATA3, \"g_sata3\", NULL, 0, CGU_GATE2,\n\t\t G_SATA3_SHIFT, 0, 0),\n\n\tLGM_GATE(LGM_GCLK_ARCEM4, \"g_arcem4\", NULL, 0, CGU_GATE3,\n\t\t G_ARCEM4_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_IDMAR1, \"g_idmar1\", NULL, 0, CGU_GATE3,\n\t\t G_IDMAR1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_IDMAT0, \"g_idmat0\", NULL, 0, CGU_GATE3,\n\t\t G_IDMAT0_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_IDMAT1, \"g_idmat1\", NULL, 0, CGU_GATE3,\n\t\t G_IDMAT1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_IDMAT2, \"g_idmat2\", NULL, 0, CGU_GATE3,\n\t\t G_IDMAT2_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_PPV4, \"g_ppv4\", NULL, 0, CGU_GATE3,\n\t\t G_PPV4_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_GSWIPO, \"g_gswipo\", \"switch\", 0, CGU_GATE3,\n\t\t G_GSWIPO_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_CQEM, \"g_cqem\", \"switch\", 0, CGU_GATE3,\n\t\t G_CQEM_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_XPCS5, \"g_xpcs5\", NULL, 0, CGU_GATE3,\n\t\t G_XPCS5_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_USB1, \"g_usb1\", NULL, 0, CGU_GATE3,\n\t\t G_USB1_SHIFT, 0, 0),\n\tLGM_GATE(LGM_GCLK_USB2, \"g_usb2\", NULL, 0, CGU_GATE3,\n\t\t G_USB2_SHIFT, 0, 0),\n};\n\n\nstatic const struct lgm_clk_ddiv_data lgm_ddiv_clks[] = {\n\tLGM_DDIV(LGM_CLK_CML, \"dd_cml\", \"ljpll3\", 0,\n\t\t PLL_DIV(CGU_LJPLL3_CFG0), 0, PLL_DDIV_WIDTH,\n\t\t 3, PLL_DDIV_WIDTH, 24, 1, 29, 0),\n\tLGM_DDIV(LGM_CLK_SERDES, \"dd_serdes\", \"ljpll3\", 0,\n\t\t PLL_DIV(CGU_LJPLL3_CFG0), 6, PLL_DDIV_WIDTH,\n\t\t 9, PLL_DDIV_WIDTH, 25, 1, 28, 0),\n\tLGM_DDIV(LGM_CLK_POOL, \"dd_pool\", \"ljpll3\", 0,\n\t\t PLL_DIV(CGU_LJPLL3_CFG0), 12, PLL_DDIV_WIDTH,\n\t\t 15, PLL_DDIV_WIDTH, 26, 1, 28, 0),\n\tLGM_DDIV(LGM_CLK_PTP, \"dd_ptp\", \"ljpll3\", 0,\n\t\t PLL_DIV(CGU_LJPLL3_CFG0), 18, PLL_DDIV_WIDTH,\n\t\t 21, PLL_DDIV_WIDTH, 27, 1, 28, 0),\n\tLGM_DDIV(LGM_CLK_PCIE, \"dd_pcie\", \"ljpll4\", 0,\n\t\t PLL_DIV(CGU_LJPLL4_CFG0), 0, PLL_DDIV_WIDTH,\n\t\t 3, PLL_DDIV_WIDTH, 24, 1, 29, 0),\n};\n\nstatic int lgm_cgu_probe(struct platform_device *pdev)\n{\n\tstruct lgm_clk_provider *ctx;\n\tstruct device *dev = &pdev->dev;\n\tstruct device_node *np = dev->of_node;\n\tint ret;\n\n\tctx = devm_kzalloc(dev, struct_size(ctx, clk_data.hws, CLK_NR_CLKS),\n\t\t\t   GFP_KERNEL);\n\tif (!ctx)\n\t\treturn -ENOMEM;\n\n\tctx->clk_data.num = CLK_NR_CLKS;\n\n\tctx->membase = syscon_node_to_regmap(np);\n\tif (IS_ERR(ctx->membase)) {\n\t\tdev_err(dev, \"Failed to get clk CGU iomem\\n\");\n\t\treturn PTR_ERR(ctx->membase);\n\t}\n\n\n\tctx->np = np;\n\tctx->dev = dev;\n\n\tret = lgm_clk_register_plls(ctx, lgm_pll_clks,\n\t\t\t\t    ARRAY_SIZE(lgm_pll_clks));\n\tif (ret)\n\t\treturn ret;\n\n\tret = lgm_clk_register_branches(ctx, lgm_branch_clks,\n\t\t\t\t\tARRAY_SIZE(lgm_branch_clks));\n\tif (ret)\n\t\treturn ret;\n\n\tret = lgm_clk_register_ddiv(ctx, lgm_ddiv_clks,\n\t\t\t\t    ARRAY_SIZE(lgm_ddiv_clks));\n\tif (ret)\n\t\treturn ret;\n\n\treturn devm_of_clk_add_hw_provider(dev, of_clk_hw_onecell_get,\n\t\t\t\t\t   &ctx->clk_data);\n}\n\nstatic const struct of_device_id of_lgm_cgu_match[] = {\n\t{ .compatible = \"intel,cgu-lgm\" },\n\t{}\n};\n\nstatic struct platform_driver lgm_cgu_driver = {\n\t.probe = lgm_cgu_probe,\n\t.driver = {\n\t\t   .name = \"cgu-lgm\",\n\t\t   .of_match_table = of_lgm_cgu_match,\n\t},\n};\nbuiltin_platform_driver(lgm_cgu_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}