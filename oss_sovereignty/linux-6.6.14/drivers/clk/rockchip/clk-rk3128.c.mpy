{
  "module_name": "clk-rk3128.c",
  "hash_id": "32b85eaf80f5b8e97cb981291caa55092926753431a2456242e3fc7570e28132",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/rockchip/clk-rk3128.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/io.h>\n#include <linux/of.h>\n#include <linux/of_address.h>\n#include <linux/syscore_ops.h>\n#include <dt-bindings/clock/rk3128-cru.h>\n#include \"clk.h\"\n\n#define RK3128_GRF_SOC_STATUS0\t0x14c\n\nenum rk3128_plls {\n\tapll, dpll, cpll, gpll,\n};\n\nstatic struct rockchip_pll_rate_table rk3128_pll_rates[] = {\n\t \n\tRK3036_PLL_RATE(1608000000, 1, 67, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1584000000, 1, 66, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1560000000, 1, 65, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1536000000, 1, 64, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1512000000, 1, 63, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1488000000, 1, 62, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1464000000, 1, 61, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1440000000, 1, 60, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1416000000, 1, 59, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1392000000, 1, 58, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1368000000, 1, 57, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1344000000, 1, 56, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1320000000, 1, 55, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1296000000, 1, 54, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1272000000, 1, 53, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1248000000, 1, 52, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1200000000, 1, 50, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1188000000, 2, 99, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1104000000, 1, 46, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1100000000, 12, 550, 1, 1, 1, 0),\n\tRK3036_PLL_RATE(1008000000, 1, 84, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(1000000000, 6, 500, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(984000000, 1, 82, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(960000000, 1, 80, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(936000000, 1, 78, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(912000000, 1, 76, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(900000000, 4, 300, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(888000000, 1, 74, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(864000000, 1, 72, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(840000000, 1, 70, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(816000000, 1, 68, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(800000000, 6, 400, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(700000000, 6, 350, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(696000000, 1, 58, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(600000000, 1, 75, 3, 1, 1, 0),\n\tRK3036_PLL_RATE(594000000, 2, 99, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(504000000, 1, 63, 3, 1, 1, 0),\n\tRK3036_PLL_RATE(500000000, 6, 250, 2, 1, 1, 0),\n\tRK3036_PLL_RATE(408000000, 1, 68, 2, 2, 1, 0),\n\tRK3036_PLL_RATE(312000000, 1, 52, 2, 2, 1, 0),\n\tRK3036_PLL_RATE(216000000, 1, 72, 4, 2, 1, 0),\n\tRK3036_PLL_RATE(96000000, 1, 64, 4, 4, 1, 0),\n\t{   },\n};\n\n#define RK3128_DIV_CPU_MASK\t\t0x1f\n#define RK3128_DIV_CPU_SHIFT\t\t8\n\n#define RK3128_DIV_PERI_MASK\t\t0xf\n#define RK3128_DIV_PERI_SHIFT\t\t0\n#define RK3128_DIV_ACLK_MASK\t\t0x7\n#define RK3128_DIV_ACLK_SHIFT\t\t4\n#define RK3128_DIV_HCLK_MASK\t\t0x3\n#define RK3128_DIV_HCLK_SHIFT\t\t8\n#define RK3128_DIV_PCLK_MASK\t\t0x7\n#define RK3128_DIV_PCLK_SHIFT\t\t12\n\n#define RK3128_CLKSEL1(_core_aclk_div, _pclk_dbg_div)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t.reg = RK2928_CLKSEL_CON(1),\t\t\t\t\t\\\n\t.val = HIWORD_UPDATE(_pclk_dbg_div, RK3128_DIV_PERI_MASK,\t\\\n\t\t\t     RK3128_DIV_PERI_SHIFT) |\t\t\t\\\n\t       HIWORD_UPDATE(_core_aclk_div, RK3128_DIV_ACLK_MASK,\t\\\n\t\t\t     RK3128_DIV_ACLK_SHIFT),\t\t\t\\\n}\n\n#define RK3128_CPUCLK_RATE(_prate, _core_aclk_div, _pclk_dbg_div)\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t.prate = _prate,\t\t\t\t\t\t\\\n\t.divs = {\t\t\t\t\t\t\t\\\n\t\tRK3128_CLKSEL1(_core_aclk_div, _pclk_dbg_div),\t\t\\\n\t},\t\t\t\t\t\t\t\t\\\n}\n\nstatic struct rockchip_cpuclk_rate_table rk3128_cpuclk_rates[] __initdata = {\n\tRK3128_CPUCLK_RATE(1800000000, 1, 7),\n\tRK3128_CPUCLK_RATE(1704000000, 1, 7),\n\tRK3128_CPUCLK_RATE(1608000000, 1, 7),\n\tRK3128_CPUCLK_RATE(1512000000, 1, 7),\n\tRK3128_CPUCLK_RATE(1488000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1416000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1392000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1296000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1200000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1104000000, 1, 5),\n\tRK3128_CPUCLK_RATE(1008000000, 1, 5),\n\tRK3128_CPUCLK_RATE(912000000, 1, 5),\n\tRK3128_CPUCLK_RATE(816000000, 1, 3),\n\tRK3128_CPUCLK_RATE(696000000, 1, 3),\n\tRK3128_CPUCLK_RATE(600000000, 1, 3),\n\tRK3128_CPUCLK_RATE(408000000, 1, 1),\n\tRK3128_CPUCLK_RATE(312000000, 1, 1),\n\tRK3128_CPUCLK_RATE(216000000,  1, 1),\n\tRK3128_CPUCLK_RATE(96000000, 1, 1),\n};\n\nstatic const struct rockchip_cpuclk_reg_data rk3128_cpuclk_data = {\n\t.core_reg[0] = RK2928_CLKSEL_CON(0),\n\t.div_core_shift[0] = 0,\n\t.div_core_mask[0] = 0x1f,\n\t.num_cores = 1,\n\t.mux_core_alt = 1,\n\t.mux_core_main = 0,\n\t.mux_core_shift = 7,\n\t.mux_core_mask = 0x1,\n};\n\nPNAME(mux_pll_p)\t\t= { \"clk_24m\", \"xin24m\" };\n\nPNAME(mux_ddrphy_p)\t\t= { \"dpll_ddr\", \"gpll_div2_ddr\" };\nPNAME(mux_armclk_p)\t\t= { \"apll_core\", \"gpll_div2_core\" };\nPNAME(mux_usb480m_p)\t\t= { \"usb480m_phy\", \"xin24m\" };\nPNAME(mux_aclk_cpu_src_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"gpll_div3\" };\n\nPNAME(mux_pll_src_5plls_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"gpll_div3\", \"usb480m\" };\nPNAME(mux_pll_src_4plls_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"usb480m\" };\nPNAME(mux_pll_src_3plls_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\" };\n\nPNAME(mux_clk_peri_src_p)\t= { \"gpll\", \"cpll\", \"gpll_div2\", \"gpll_div3\" };\nPNAME(mux_mmc_src_p)\t\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"xin24m\" };\nPNAME(mux_clk_cif_out_src_p)\t\t= { \"clk_cif_src\", \"xin24m\" };\nPNAME(mux_sclk_vop_src_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"gpll_div3\" };\n\nPNAME(mux_i2s0_p)\t\t= { \"i2s0_src\", \"i2s0_frac\", \"ext_i2s\", \"xin12m\" };\nPNAME(mux_i2s1_pre_p)\t\t= { \"i2s1_src\", \"i2s1_frac\", \"ext_i2s\", \"xin12m\" };\nPNAME(mux_i2s_out_p)\t\t= { \"i2s1_pre\", \"xin12m\" };\nPNAME(mux_sclk_spdif_p)\t\t= { \"sclk_spdif_src\", \"spdif_frac\", \"xin12m\" };\n\nPNAME(mux_uart0_p)\t\t= { \"uart0_src\", \"uart0_frac\", \"xin24m\" };\nPNAME(mux_uart1_p)\t\t= { \"uart1_src\", \"uart1_frac\", \"xin24m\" };\nPNAME(mux_uart2_p)\t\t= { \"uart2_src\", \"uart2_frac\", \"xin24m\" };\n\nPNAME(mux_sclk_gmac_p)\t= { \"sclk_gmac_src\", \"gmac_clkin\" };\nPNAME(mux_sclk_sfc_src_p)\t= { \"cpll\", \"gpll\", \"gpll_div2\", \"xin24m\" };\n\nstatic struct rockchip_pll_clock rk3128_pll_clks[] __initdata = {\n\t[apll] = PLL(pll_rk3036, PLL_APLL, \"apll\", mux_pll_p, 0, RK2928_PLL_CON(0),\n\t\t     RK2928_MODE_CON, 0, 1, 0, rk3128_pll_rates),\n\t[dpll] = PLL(pll_rk3036, PLL_DPLL, \"dpll\", mux_pll_p, 0, RK2928_PLL_CON(4),\n\t\t     RK2928_MODE_CON, 4, 0, 0, NULL),\n\t[cpll] = PLL(pll_rk3036, PLL_CPLL, \"cpll\", mux_pll_p, 0, RK2928_PLL_CON(8),\n\t\t     RK2928_MODE_CON, 8, 2, 0, rk3128_pll_rates),\n\t[gpll] = PLL(pll_rk3036, PLL_GPLL, \"gpll\", mux_pll_p, 0, RK2928_PLL_CON(12),\n\t\t     RK2928_MODE_CON, 12, 3, ROCKCHIP_PLL_SYNC_RATE, rk3128_pll_rates),\n};\n\n#define MFLAGS CLK_MUX_HIWORD_MASK\n#define DFLAGS CLK_DIVIDER_HIWORD_MASK\n#define GFLAGS (CLK_GATE_HIWORD_MASK | CLK_GATE_SET_TO_DISABLE)\n\nstatic struct rockchip_clk_branch rk3128_i2s0_fracmux __initdata =\n\tMUX(0, \"i2s0_pre\", mux_i2s0_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(9), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch rk3128_i2s1_fracmux __initdata =\n\tMUX(0, \"i2s1_pre\", mux_i2s1_pre_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(3), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch rk3128_spdif_fracmux __initdata =\n\tMUX(SCLK_SPDIF, \"sclk_spdif\", mux_sclk_spdif_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(6), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch rk3128_uart0_fracmux __initdata =\n\tMUX(SCLK_UART0, \"sclk_uart0\", mux_uart0_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(13), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch rk3128_uart1_fracmux __initdata =\n\tMUX(SCLK_UART1, \"sclk_uart1\", mux_uart1_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(14), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch rk3128_uart2_fracmux __initdata =\n\tMUX(SCLK_UART2, \"sclk_uart2\", mux_uart2_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(15), 8, 2, MFLAGS);\n\nstatic struct rockchip_clk_branch common_clk_branches[] __initdata = {\n\t \n\n\tFACTOR(PLL_GPLL_DIV2, \"gpll_div2\", \"gpll\", 0, 1, 2),\n\tFACTOR(PLL_GPLL_DIV3, \"gpll_div3\", \"gpll\", 0, 1, 3),\n\n\tDIV(0, \"clk_24m\", \"xin24m\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKSEL_CON(4), 8, 5, DFLAGS),\n\n\t \n\tGATE(0, \"dpll_ddr\", \"dpll\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(0), 2, GFLAGS),\n\tGATE(0, \"gpll_div2_ddr\", \"gpll_div2\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(0), 2, GFLAGS),\n\tCOMPOSITE_NOGATE(0, \"ddrphy2x\", mux_ddrphy_p, CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKSEL_CON(26), 8, 2, MFLAGS, 0, 2, DFLAGS | CLK_DIVIDER_POWER_OF_TWO),\n\tFACTOR(SCLK_DDRC, \"clk_ddrc\", \"ddrphy2x\", 0, 1, 2),\n\tFACTOR(0, \"clk_ddrphy\", \"ddrphy2x\", 0, 1, 2),\n\n\t \n\tGATE(0, \"apll_core\", \"apll\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(0), 6, GFLAGS),\n\tGATE(0, \"gpll_div2_core\", \"gpll_div2\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(0), 6, GFLAGS),\n\tCOMPOSITE_NOMUX(0, \"pclk_dbg\", \"armclk\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKSEL_CON(1), 0, 4, DFLAGS | CLK_DIVIDER_READ_ONLY,\n\t\t\tRK2928_CLKGATE_CON(0), 0, GFLAGS),\n\tCOMPOSITE_NOMUX(0, \"armcore\", \"armclk\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKSEL_CON(1), 4, 3, DFLAGS | CLK_DIVIDER_READ_ONLY,\n\t\t\tRK2928_CLKGATE_CON(0), 7, GFLAGS),\n\n\t \n\tMUX(SCLK_USB480M, \"usb480m\", mux_usb480m_p, CLK_SET_RATE_PARENT,\n\t\t\tRK2928_MISC_CON, 15, 1, MFLAGS),\n\n\t \n\tCOMPOSITE(0, \"aclk_cpu_src\", mux_aclk_cpu_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(0), 13, 2, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 1, GFLAGS),\n\tGATE(ACLK_CPU, \"aclk_cpu\", \"aclk_cpu_src\", 0,\n\t\t\tRK2928_CLKGATE_CON(0), 3, GFLAGS),\n\tCOMPOSITE_NOMUX(HCLK_CPU, \"hclk_cpu\", \"aclk_cpu_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(1), 8, 2, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 4, GFLAGS),\n\tCOMPOSITE_NOMUX(PCLK_CPU, \"pclk_cpu\", \"aclk_cpu_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(1), 12, 2, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 5, GFLAGS),\n\tCOMPOSITE_NOMUX(SCLK_CRYPTO, \"clk_crypto\", \"aclk_cpu_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(24), 0, 2, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 12, GFLAGS),\n\n\t \n\tCOMPOSITE(ACLK_VEPU, \"aclk_vepu\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(32), 5, 3, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 9, GFLAGS),\n\tFACTOR(HCLK_VEPU, \"hclk_vepu\", \"aclk_vepu\", 0, 1, 4),\n\n\tCOMPOSITE(ACLK_VDPU, \"aclk_vdpu\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(32), 13, 3, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 11, GFLAGS),\n\tFACTOR_GATE(HCLK_VDPU, \"hclk_vdpu\", \"aclk_vdpu\", 0, 1, 4,\n\t\t\tRK2928_CLKGATE_CON(3), 12, GFLAGS),\n\n\tCOMPOSITE(SCLK_HEVC_CORE, \"sclk_hevc_core\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(34), 13, 3, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 10, GFLAGS),\n\n\t \n\tCOMPOSITE(ACLK_VIO0, \"aclk_vio0\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(31), 5, 3, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 0, GFLAGS),\n\tCOMPOSITE(ACLK_VIO1, \"aclk_vio1\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(31), 13, 3, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 4, GFLAGS),\n\tCOMPOSITE(HCLK_VIO, \"hclk_vio\", mux_pll_src_4plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(30), 14, 2, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 11, GFLAGS),\n\n\t \n\tCOMPOSITE(0, \"clk_peri_src\", mux_clk_peri_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(10), 14, 2, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 0, GFLAGS),\n\n\tCOMPOSITE_NOMUX(PCLK_PERI, \"pclk_peri\", \"clk_peri_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(10), 12, 2, DFLAGS | CLK_DIVIDER_POWER_OF_TWO,\n\t\t\tRK2928_CLKGATE_CON(2), 3, GFLAGS),\n\tCOMPOSITE_NOMUX(HCLK_PERI, \"hclk_peri\", \"clk_peri_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(10), 8, 2, DFLAGS | CLK_DIVIDER_POWER_OF_TWO,\n\t\t\tRK2928_CLKGATE_CON(2), 2, GFLAGS),\n\tGATE(ACLK_PERI, \"aclk_peri\", \"clk_peri_src\", 0,\n\t\t\tRK2928_CLKGATE_CON(2), 1, GFLAGS),\n\n\tGATE(SCLK_TIMER0, \"sclk_timer0\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 3, GFLAGS),\n\tGATE(SCLK_TIMER1, \"sclk_timer1\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 4, GFLAGS),\n\tGATE(SCLK_TIMER2, \"sclk_timer2\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 5, GFLAGS),\n\tGATE(SCLK_TIMER3, \"sclk_timer3\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 6, GFLAGS),\n\tGATE(SCLK_TIMER4, \"sclk_timer4\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 7, GFLAGS),\n\tGATE(SCLK_TIMER5, \"sclk_timer5\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 8, GFLAGS),\n\n\tGATE(SCLK_PVTM_CORE, \"clk_pvtm_core\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 0, GFLAGS),\n\tGATE(SCLK_PVTM_GPU, \"clk_pvtm_gpu\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 1, GFLAGS),\n\tGATE(SCLK_PVTM_FUNC, \"clk_pvtm_func\", \"xin24m\", 0,\n\t\t\tRK2928_CLKGATE_CON(10), 2, GFLAGS),\n\tGATE(SCLK_MIPI_24M, \"clk_mipi_24m\", \"xin24m\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(2), 15, GFLAGS),\n\n\tCOMPOSITE(SCLK_SDMMC, \"sclk_sdmmc\", mux_mmc_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(11), 6, 2, MFLAGS, 0, 6, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 11, GFLAGS),\n\n\tCOMPOSITE(SCLK_SDIO, \"sclk_sdio\", mux_mmc_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(12), 6, 2, MFLAGS, 0, 6, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 13, GFLAGS),\n\n\tCOMPOSITE(SCLK_EMMC, \"sclk_emmc\", mux_mmc_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(12), 14, 2, MFLAGS, 8, 6, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 14, GFLAGS),\n\n\tDIV(SCLK_PVTM, \"clk_pvtm\", \"clk_pvtm_func\", 0,\n\t\t\tRK2928_CLKSEL_CON(2), 0, 7, DFLAGS),\n\n\t \n\tCOMPOSITE(DCLK_VOP, \"dclk_vop\", mux_sclk_vop_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(27), 0, 2, MFLAGS, 8, 8, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 1, GFLAGS),\n\tCOMPOSITE(SCLK_VOP, \"sclk_vop\", mux_sclk_vop_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(28), 0, 2, MFLAGS, 8, 8, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 2, GFLAGS),\n\tCOMPOSITE(DCLK_EBC, \"dclk_ebc\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(23), 0, 2, MFLAGS, 8, 8, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 4, GFLAGS),\n\n\tFACTOR(0, \"xin12m\", \"xin24m\", 0, 1, 2),\n\n\tCOMPOSITE_NODIV(SCLK_CIF_SRC, \"sclk_cif_src\", mux_pll_src_4plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(29), 0, 2, MFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 7, GFLAGS),\n\tMUX(SCLK_CIF_OUT_SRC, \"sclk_cif_out_src\", mux_clk_cif_out_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(13), 14, 2, MFLAGS),\n\tDIV(SCLK_CIF_OUT, \"sclk_cif_out\", \"sclk_cif_out_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(29), 2, 5, DFLAGS),\n\n\tCOMPOSITE(0, \"i2s0_src\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(9), 14, 2, MFLAGS, 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(4), 4, GFLAGS),\n\tCOMPOSITE_FRACMUX(0, \"i2s0_frac\", \"i2s0_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(8), 0,\n\t\t\tRK2928_CLKGATE_CON(4), 5, GFLAGS,\n\t\t\t&rk3128_i2s0_fracmux),\n\tGATE(SCLK_I2S0, \"sclk_i2s0\", \"i2s0_pre\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKGATE_CON(4), 6, GFLAGS),\n\n\tCOMPOSITE(0, \"i2s1_src\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(3), 14, 2, MFLAGS, 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 9, GFLAGS),\n\tCOMPOSITE_FRACMUX(0, \"i2s1_frac\", \"i2s1_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(7), 0,\n\t\t\tRK2928_CLKGATE_CON(0), 10, GFLAGS,\n\t\t\t&rk3128_i2s1_fracmux),\n\tGATE(SCLK_I2S1, \"sclk_i2s1\", \"i2s1_pre\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKGATE_CON(0), 14, GFLAGS),\n\tCOMPOSITE_NODIV(SCLK_I2S_OUT, \"i2s_out\", mux_i2s_out_p, 0,\n\t\t\tRK2928_CLKSEL_CON(3), 12, 1, MFLAGS,\n\t\t\tRK2928_CLKGATE_CON(0), 13, GFLAGS),\n\n\tCOMPOSITE(0, \"sclk_spdif_src\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(6), 14, 2, MFLAGS, 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 10, GFLAGS),\n\tCOMPOSITE_FRACMUX(0, \"spdif_frac\", \"sclk_spdif_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(20), 0,\n\t\t\tRK2928_CLKGATE_CON(2), 12, GFLAGS,\n\t\t\t&rk3128_spdif_fracmux),\n\n\tGATE(0, \"jtag\", \"ext_jtag\", CLK_IGNORE_UNUSED,\n\t\t\tRK2928_CLKGATE_CON(1), 3, GFLAGS),\n\n\tGATE(SCLK_OTGPHY0, \"sclk_otgphy0\", \"xin12m\", 0,\n\t\t\tRK2928_CLKGATE_CON(1), 5, GFLAGS),\n\tGATE(SCLK_OTGPHY1, \"sclk_otgphy1\", \"xin12m\", 0,\n\t\t\tRK2928_CLKGATE_CON(1), 6, GFLAGS),\n\n\tCOMPOSITE_NOMUX(SCLK_SARADC, \"sclk_saradc\", \"xin24m\", 0,\n\t\t\tRK2928_CLKSEL_CON(24), 8, 8, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 8, GFLAGS),\n\n\tCOMPOSITE(ACLK_GPU, \"aclk_gpu\", mux_pll_src_5plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(34), 5, 3, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 13, GFLAGS),\n\n\tCOMPOSITE(SCLK_SPI0, \"sclk_spi0\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(25), 8, 2, MFLAGS, 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(2), 9, GFLAGS),\n\n\t \n\tCOMPOSITE(0, \"uart0_src\", mux_pll_src_4plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(13), 12, 2, MFLAGS, 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 8, GFLAGS),\n\tMUX(0, \"uart12_src\", mux_pll_src_4plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(13), 14, 2, MFLAGS),\n\tCOMPOSITE_NOMUX(0, \"uart1_src\", \"uart12_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(14), 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 10, GFLAGS),\n\tCOMPOSITE_NOMUX(0, \"uart2_src\", \"uart12_src\", 0,\n\t\t\tRK2928_CLKSEL_CON(15), 0, 7, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 13, GFLAGS),\n\tCOMPOSITE_FRACMUX(0, \"uart0_frac\", \"uart0_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(17), 0,\n\t\t\tRK2928_CLKGATE_CON(1), 9, GFLAGS,\n\t\t\t&rk3128_uart0_fracmux),\n\tCOMPOSITE_FRACMUX(0, \"uart1_frac\", \"uart1_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(18), 0,\n\t\t\tRK2928_CLKGATE_CON(1), 11, GFLAGS,\n\t\t\t&rk3128_uart1_fracmux),\n\tCOMPOSITE_FRACMUX(0, \"uart2_frac\", \"uart2_src\", CLK_SET_RATE_PARENT,\n\t\t\tRK2928_CLKSEL_CON(19), 0,\n\t\t\tRK2928_CLKGATE_CON(1), 13, GFLAGS,\n\t\t\t&rk3128_uart2_fracmux),\n\n\tCOMPOSITE(SCLK_MAC_SRC, \"sclk_gmac_src\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(5), 6, 2, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 7, GFLAGS),\n\tMUX(SCLK_MAC, \"sclk_gmac\", mux_sclk_gmac_p, 0,\n\t\t\tRK2928_CLKSEL_CON(5), 15, 1, MFLAGS),\n\tGATE(SCLK_MAC_REFOUT, \"sclk_mac_refout\", \"sclk_gmac\", 0,\n\t\t\tRK2928_CLKGATE_CON(2), 5, GFLAGS),\n\tGATE(SCLK_MAC_REF, \"sclk_mac_ref\", \"sclk_gmac\", 0,\n\t\t\tRK2928_CLKGATE_CON(2), 4, GFLAGS),\n\tGATE(SCLK_MAC_RX, \"sclk_mac_rx\", \"sclk_gmac\", 0,\n\t\t\tRK2928_CLKGATE_CON(2), 6, GFLAGS),\n\tGATE(SCLK_MAC_TX, \"sclk_mac_tx\", \"sclk_gmac\", 0,\n\t\t\tRK2928_CLKGATE_CON(2), 7, GFLAGS),\n\n\tCOMPOSITE(SCLK_TSP, \"sclk_tsp\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(4), 6, 2, MFLAGS, 0, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 14, GFLAGS),\n\n\tCOMPOSITE(SCLK_NANDC, \"sclk_nandc\", mux_pll_src_3plls_p, 0,\n\t\t\tRK2928_CLKSEL_CON(2), 14, 2, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(10), 15, GFLAGS),\n\n\tCOMPOSITE_NOMUX(PCLK_PMU_PRE, \"pclk_pmu_pre\", \"cpll\", 0,\n\t\t\tRK2928_CLKSEL_CON(29), 8, 6, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(1), 0, GFLAGS),\n\n\t \n\n\t \n\tGATE(ACLK_LCDC0, \"aclk_lcdc0\", \"aclk_vio0\", 0, RK2928_CLKGATE_CON(6), 0, GFLAGS),\n\tGATE(ACLK_CIF, \"aclk_cif\", \"aclk_vio0\", 0, RK2928_CLKGATE_CON(6), 5, GFLAGS),\n\tGATE(ACLK_RGA, \"aclk_rga\", \"aclk_vio0\", 0, RK2928_CLKGATE_CON(6), 11, GFLAGS),\n\tGATE(0, \"aclk_vio0_niu\", \"aclk_vio0\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(6), 13, GFLAGS),\n\n\tGATE(ACLK_IEP, \"aclk_iep\", \"aclk_vio1\", 0, RK2928_CLKGATE_CON(9), 8, GFLAGS),\n\tGATE(0, \"aclk_vio1_niu\", \"aclk_vio1\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(9), 10, GFLAGS),\n\n\tGATE(HCLK_VIO_H2P, \"hclk_vio_h2p\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(9), 5, GFLAGS),\n\tGATE(PCLK_MIPI, \"pclk_mipi\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(9), 6, GFLAGS),\n\tGATE(HCLK_RGA, \"hclk_rga\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(6), 10, GFLAGS),\n\tGATE(HCLK_LCDC0, \"hclk_lcdc0\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(6), 1, GFLAGS),\n\tGATE(HCLK_IEP, \"hclk_iep\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(9), 7, GFLAGS),\n\tGATE(0, \"hclk_vio_niu\", \"hclk_vio\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(6), 12, GFLAGS),\n\tGATE(HCLK_CIF, \"hclk_cif\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(6), 4, GFLAGS),\n\tGATE(HCLK_EBC, \"hclk_ebc\", \"hclk_vio\", 0, RK2928_CLKGATE_CON(9), 9, GFLAGS),\n\n\t \n\tGATE(0, \"aclk_peri_axi\", \"aclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 3, GFLAGS),\n\tGATE(ACLK_GMAC, \"aclk_gmac\", \"aclk_peri\", 0, RK2928_CLKGATE_CON(10), 10, GFLAGS),\n\tGATE(ACLK_DMAC, \"aclk_dmac\", \"aclk_peri\", 0, RK2928_CLKGATE_CON(5), 1, GFLAGS),\n\tGATE(0, \"aclk_peri_niu\", \"aclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(9), 15, GFLAGS),\n\tGATE(0, \"aclk_cpu_to_peri\", \"aclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 2, GFLAGS),\n\n\tGATE(HCLK_I2S_8CH, \"hclk_i2s_8ch\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(7), 4, GFLAGS),\n\tGATE(0, \"hclk_peri_matrix\", \"hclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 0, GFLAGS),\n\tGATE(HCLK_I2S_2CH, \"hclk_i2s_2ch\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(7), 2, GFLAGS),\n\tGATE(0, \"hclk_usb_peri\", \"hclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(9), 13, GFLAGS),\n\tGATE(HCLK_HOST2, \"hclk_host2\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(7), 3, GFLAGS),\n\tGATE(HCLK_OTG, \"hclk_otg\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(5), 13, GFLAGS),\n\tGATE(0, \"hclk_peri_ahb\", \"hclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(9), 14, GFLAGS),\n\tGATE(HCLK_SPDIF, \"hclk_spdif\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(10), 9, GFLAGS),\n\tGATE(HCLK_TSP, \"hclk_tsp\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(10), 12, GFLAGS),\n\tGATE(HCLK_SDMMC, \"hclk_sdmmc\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(5), 10, GFLAGS),\n\tGATE(HCLK_SDIO, \"hclk_sdio\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(5), 11, GFLAGS),\n\tGATE(HCLK_EMMC, \"hclk_emmc\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(7), 0, GFLAGS),\n\tGATE(0, \"hclk_emmc_peri\", \"hclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(3), 6, GFLAGS),\n\tGATE(HCLK_NANDC, \"hclk_nandc\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(5), 9, GFLAGS),\n\tGATE(HCLK_USBHOST, \"hclk_usbhost\", \"hclk_peri\", 0, RK2928_CLKGATE_CON(10), 14, GFLAGS),\n\n\tGATE(PCLK_SIM_CARD, \"pclk_sim_card\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(9), 12, GFLAGS),\n\tGATE(PCLK_GMAC, \"pclk_gmac\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(10), 11, GFLAGS),\n\tGATE(0, \"pclk_peri_axi\", \"pclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 1, GFLAGS),\n\tGATE(PCLK_SPI0, \"pclk_spi0\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(7), 12, GFLAGS),\n\tGATE(PCLK_UART0, \"pclk_uart0\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 0, GFLAGS),\n\tGATE(PCLK_UART1, \"pclk_uart1\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 1, GFLAGS),\n\tGATE(PCLK_UART2, \"pclk_uart2\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 2, GFLAGS),\n\tGATE(PCLK_PWM, \"pclk_pwm\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(7), 10, GFLAGS),\n\tGATE(PCLK_WDT, \"pclk_wdt\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(7), 15, GFLAGS),\n\tGATE(PCLK_I2C0, \"pclk_i2c0\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 4, GFLAGS),\n\tGATE(PCLK_I2C1, \"pclk_i2c1\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 5, GFLAGS),\n\tGATE(PCLK_I2C2, \"pclk_i2c2\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 6, GFLAGS),\n\tGATE(PCLK_I2C3, \"pclk_i2c3\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 7, GFLAGS),\n\tGATE(PCLK_SARADC, \"pclk_saradc\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(7), 14, GFLAGS),\n\tGATE(PCLK_EFUSE, \"pclk_efuse\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(5), 2, GFLAGS),\n\tGATE(PCLK_TIMER, \"pclk_timer\", \"pclk_peri\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(7), 7, GFLAGS),\n\tGATE(PCLK_GPIO0, \"pclk_gpio0\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 9, GFLAGS),\n\tGATE(PCLK_GPIO1, \"pclk_gpio1\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 10, GFLAGS),\n\tGATE(PCLK_GPIO2, \"pclk_gpio2\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 11, GFLAGS),\n\tGATE(PCLK_GPIO3, \"pclk_gpio3\", \"pclk_peri\", 0, RK2928_CLKGATE_CON(8), 12, GFLAGS),\n\n\t \n\tGATE(0, \"aclk_initmem\", \"aclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 12, GFLAGS),\n\tGATE(0, \"aclk_strc_sys\", \"aclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(4), 10, GFLAGS),\n\n\tGATE(0, \"hclk_rom\", \"hclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(5), 6, GFLAGS),\n\tGATE(HCLK_CRYPTO, \"hclk_crypto\", \"hclk_cpu\", 0, RK2928_CLKGATE_CON(3), 5, GFLAGS),\n\n\tGATE(PCLK_ACODEC, \"pclk_acodec\", \"pclk_cpu\", 0, RK2928_CLKGATE_CON(5), 14, GFLAGS),\n\tGATE(0, \"pclk_ddrupctl\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(5), 7, GFLAGS),\n\tGATE(0, \"pclk_grf\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(5), 4, GFLAGS),\n\tGATE(0, \"pclk_mipiphy\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(5), 0, GFLAGS),\n\n\tGATE(0, \"pclk_pmu\", \"pclk_pmu_pre\", 0, RK2928_CLKGATE_CON(9), 2, GFLAGS),\n\tGATE(0, \"pclk_pmu_niu\", \"pclk_pmu_pre\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(9), 3, GFLAGS),\n\n\t \n\tMMC(SCLK_SDMMC_DRV,    \"sdmmc_drv\",    \"sclk_sdmmc\", RK3228_SDMMC_CON0, 1),\n\tMMC(SCLK_SDMMC_SAMPLE, \"sdmmc_sample\", \"sclk_sdmmc\", RK3228_SDMMC_CON1, 0),\n\n\tMMC(SCLK_SDIO_DRV,     \"sdio_drv\",     \"sclk_sdio\",  RK3228_SDIO_CON0,  1),\n\tMMC(SCLK_SDIO_SAMPLE,  \"sdio_sample\",  \"sclk_sdio\",  RK3228_SDIO_CON1,  0),\n\n\tMMC(SCLK_EMMC_DRV,     \"emmc_drv\",     \"sclk_emmc\",  RK3228_EMMC_CON0,  1),\n\tMMC(SCLK_EMMC_SAMPLE,  \"emmc_sample\",  \"sclk_emmc\",  RK3228_EMMC_CON1,  0),\n};\n\nstatic struct rockchip_clk_branch rk3126_clk_branches[] __initdata = {\n\tGATE(0, \"pclk_stimer\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(3), 15, GFLAGS),\n\tGATE(0, \"pclk_s_efuse\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(3), 14, GFLAGS),\n\tGATE(0, \"pclk_sgrf\", \"pclk_cpu\", CLK_IGNORE_UNUSED, RK2928_CLKGATE_CON(3), 8, GFLAGS),\n};\n\nstatic struct rockchip_clk_branch rk3128_clk_branches[] __initdata = {\n\tCOMPOSITE(SCLK_SFC, \"sclk_sfc\", mux_sclk_sfc_src_p, 0,\n\t\t\tRK2928_CLKSEL_CON(11), 14, 2, MFLAGS, 8, 5, DFLAGS,\n\t\t\tRK2928_CLKGATE_CON(3), 15, GFLAGS),\n\n\tGATE(HCLK_GPS, \"hclk_gps\", \"aclk_peri\", 0, RK2928_CLKGATE_CON(3), 14, GFLAGS),\n\tGATE(PCLK_HDMI, \"pclk_hdmi\", \"pclk_cpu\", 0, RK2928_CLKGATE_CON(3), 8, GFLAGS),\n};\n\nstatic const char *const rk3128_critical_clocks[] __initconst = {\n\t\"aclk_cpu\",\n\t\"hclk_cpu\",\n\t\"pclk_cpu\",\n\t\"aclk_peri\",\n\t\"hclk_peri\",\n\t\"pclk_peri\",\n\t\"pclk_pmu\",\n\t\"sclk_timer5\",\n};\n\nstatic struct rockchip_clk_provider *__init rk3128_common_clk_init(struct device_node *np)\n{\n\tstruct rockchip_clk_provider *ctx;\n\tvoid __iomem *reg_base;\n\n\treg_base = of_iomap(np, 0);\n\tif (!reg_base) {\n\t\tpr_err(\"%s: could not map cru region\\n\", __func__);\n\t\treturn ERR_PTR(-ENOMEM);\n\t}\n\n\tctx = rockchip_clk_init(np, reg_base, CLK_NR_CLKS);\n\tif (IS_ERR(ctx)) {\n\t\tpr_err(\"%s: rockchip clk init failed\\n\", __func__);\n\t\tiounmap(reg_base);\n\t\treturn ERR_PTR(-ENOMEM);\n\t}\n\n\trockchip_clk_register_plls(ctx, rk3128_pll_clks,\n\t\t\t\t   ARRAY_SIZE(rk3128_pll_clks),\n\t\t\t\t   RK3128_GRF_SOC_STATUS0);\n\trockchip_clk_register_branches(ctx, common_clk_branches,\n\t\t\t\t  ARRAY_SIZE(common_clk_branches));\n\n\trockchip_clk_register_armclk(ctx, ARMCLK, \"armclk\",\n\t\t\tmux_armclk_p, ARRAY_SIZE(mux_armclk_p),\n\t\t\t&rk3128_cpuclk_data, rk3128_cpuclk_rates,\n\t\t\tARRAY_SIZE(rk3128_cpuclk_rates));\n\n\trockchip_register_softrst(np, 9, reg_base + RK2928_SOFTRST_CON(0),\n\t\t\t\t  ROCKCHIP_SOFTRST_HIWORD_MASK);\n\n\trockchip_register_restart_notifier(ctx, RK2928_GLB_SRST_FST, NULL);\n\n\treturn ctx;\n}\n\nstatic void __init rk3126_clk_init(struct device_node *np)\n{\n\tstruct rockchip_clk_provider *ctx;\n\n\tctx = rk3128_common_clk_init(np);\n\tif (IS_ERR(ctx))\n\t\treturn;\n\n\trockchip_clk_register_branches(ctx, rk3126_clk_branches,\n\t\t\t\t       ARRAY_SIZE(rk3126_clk_branches));\n\trockchip_clk_protect_critical(rk3128_critical_clocks,\n\t\t\t\t      ARRAY_SIZE(rk3128_critical_clocks));\n\n\trockchip_clk_of_add_provider(np, ctx);\n}\n\nCLK_OF_DECLARE(rk3126_cru, \"rockchip,rk3126-cru\", rk3126_clk_init);\n\nstatic void __init rk3128_clk_init(struct device_node *np)\n{\n\tstruct rockchip_clk_provider *ctx;\n\n\tctx = rk3128_common_clk_init(np);\n\tif (IS_ERR(ctx))\n\t\treturn;\n\n\trockchip_clk_register_branches(ctx, rk3128_clk_branches,\n\t\t\t\t       ARRAY_SIZE(rk3128_clk_branches));\n\trockchip_clk_protect_critical(rk3128_critical_clocks,\n\t\t\t\t      ARRAY_SIZE(rk3128_critical_clocks));\n\n\trockchip_clk_of_add_provider(np, ctx);\n}\n\nCLK_OF_DECLARE(rk3128_cru, \"rockchip,rk3128-cru\", rk3128_clk_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}