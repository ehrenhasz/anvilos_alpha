{
  "module_name": "clk.h",
  "hash_id": "83fc75764bb41b52814cb6f640cb89fbe4cf7ccfba6e96e134f21c629fcd51d3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/rockchip/clk.h",
  "human_readable_source": " \n \n\n#ifndef CLK_ROCKCHIP_CLK_H\n#define CLK_ROCKCHIP_CLK_H\n\n#include <linux/io.h>\n#include <linux/clk-provider.h>\n\nstruct clk;\n\n#define HIWORD_UPDATE(val, mask, shift) \\\n\t\t((val) << (shift) | (mask) << ((shift) + 16))\n\n \n#define BOOST_PLL_H_CON(x)\t\t((x) * 0x4)\n#define BOOST_CLK_CON\t\t\t0x0008\n#define BOOST_BOOST_CON\t\t\t0x000c\n#define BOOST_SWITCH_CNT\t\t0x0010\n#define BOOST_HIGH_PERF_CNT0\t\t0x0014\n#define BOOST_HIGH_PERF_CNT1\t\t0x0018\n#define BOOST_STATIS_THRESHOLD\t\t0x001c\n#define BOOST_SHORT_SWITCH_CNT\t\t0x0020\n#define BOOST_SWITCH_THRESHOLD\t\t0x0024\n#define BOOST_FSM_STATUS\t\t0x0028\n#define BOOST_PLL_L_CON(x)\t\t((x) * 0x4 + 0x2c)\n#define BOOST_RECOVERY_MASK\t\t0x1\n#define BOOST_RECOVERY_SHIFT\t\t1\n#define BOOST_SW_CTRL_MASK\t\t0x1\n#define BOOST_SW_CTRL_SHIFT\t\t2\n#define BOOST_LOW_FREQ_EN_MASK\t\t0x1\n#define BOOST_LOW_FREQ_EN_SHIFT\t\t3\n#define BOOST_BUSY_STATE\t\tBIT(8)\n\n#define PX30_PLL_CON(x)\t\t\t((x) * 0x4)\n#define PX30_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define PX30_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x200)\n#define PX30_GLB_SRST_FST\t\t0xb8\n#define PX30_GLB_SRST_SND\t\t0xbc\n#define PX30_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x300)\n#define PX30_MODE_CON\t\t\t0xa0\n#define PX30_MISC_CON\t\t\t0xa4\n#define PX30_SDMMC_CON0\t\t\t0x380\n#define PX30_SDMMC_CON1\t\t\t0x384\n#define PX30_SDIO_CON0\t\t\t0x388\n#define PX30_SDIO_CON1\t\t\t0x38c\n#define PX30_EMMC_CON0\t\t\t0x390\n#define PX30_EMMC_CON1\t\t\t0x394\n\n#define PX30_PMU_PLL_CON(x)\t\t((x) * 0x4)\n#define PX30_PMU_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x40)\n#define PX30_PMU_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x80)\n#define PX30_PMU_MODE\t\t\t0x0020\n\n#define RV1108_PLL_CON(x)\t\t((x) * 0x4)\n#define RV1108_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x60)\n#define RV1108_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x120)\n#define RV1108_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x180)\n#define RV1108_GLB_SRST_FST\t\t0x1c0\n#define RV1108_GLB_SRST_SND\t\t0x1c4\n#define RV1108_MISC_CON\t\t\t0x1cc\n#define RV1108_SDMMC_CON0\t\t0x1d8\n#define RV1108_SDMMC_CON1\t\t0x1dc\n#define RV1108_SDIO_CON0\t\t0x1e0\n#define RV1108_SDIO_CON1\t\t0x1e4\n#define RV1108_EMMC_CON0\t\t0x1e8\n#define RV1108_EMMC_CON1\t\t0x1ec\n\n#define RV1126_PMU_MODE\t\t\t0x0\n#define RV1126_PMU_PLL_CON(x)\t\t((x) * 0x4 + 0x10)\n#define RV1126_PMU_CLKSEL_CON(x)\t((x) * 0x4 + 0x100)\n#define RV1126_PMU_CLKGATE_CON(x)\t((x) * 0x4 + 0x180)\n#define RV1126_PMU_SOFTRST_CON(x)\t((x) * 0x4 + 0x200)\n#define RV1126_PLL_CON(x)\t\t((x) * 0x4)\n#define RV1126_MODE_CON\t\t\t0x90\n#define RV1126_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RV1126_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x280)\n#define RV1126_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RV1126_GLB_SRST_FST\t\t0x408\n#define RV1126_GLB_SRST_SND\t\t0x40c\n#define RV1126_SDMMC_CON0\t\t0x440\n#define RV1126_SDMMC_CON1\t\t0x444\n#define RV1126_SDIO_CON0\t\t0x448\n#define RV1126_SDIO_CON1\t\t0x44c\n#define RV1126_EMMC_CON0\t\t0x450\n#define RV1126_EMMC_CON1\t\t0x454\n\n#define RK2928_PLL_CON(x)\t\t((x) * 0x4)\n#define RK2928_MODE_CON\t\t0x40\n#define RK2928_CLKSEL_CON(x)\t((x) * 0x4 + 0x44)\n#define RK2928_CLKGATE_CON(x)\t((x) * 0x4 + 0xd0)\n#define RK2928_GLB_SRST_FST\t\t0x100\n#define RK2928_GLB_SRST_SND\t\t0x104\n#define RK2928_SOFTRST_CON(x)\t((x) * 0x4 + 0x110)\n#define RK2928_MISC_CON\t\t0x134\n\n#define RK3036_SDMMC_CON0\t\t0x144\n#define RK3036_SDMMC_CON1\t\t0x148\n#define RK3036_SDIO_CON0\t\t0x14c\n#define RK3036_SDIO_CON1\t\t0x150\n#define RK3036_EMMC_CON0\t\t0x154\n#define RK3036_EMMC_CON1\t\t0x158\n\n#define RK3228_GLB_SRST_FST\t\t0x1f0\n#define RK3228_GLB_SRST_SND\t\t0x1f4\n#define RK3228_SDMMC_CON0\t\t0x1c0\n#define RK3228_SDMMC_CON1\t\t0x1c4\n#define RK3228_SDIO_CON0\t\t0x1c8\n#define RK3228_SDIO_CON1\t\t0x1cc\n#define RK3228_EMMC_CON0\t\t0x1d8\n#define RK3228_EMMC_CON1\t\t0x1dc\n\n#define RK3288_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3288_MODE_CON\t\t\t0x50\n#define RK3288_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x60)\n#define RK3288_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x160)\n#define RK3288_GLB_SRST_FST\t\t0x1b0\n#define RK3288_GLB_SRST_SND\t\t0x1b4\n#define RK3288_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x1b8)\n#define RK3288_MISC_CON\t\t\t0x1e8\n#define RK3288_SDMMC_CON0\t\t0x200\n#define RK3288_SDMMC_CON1\t\t0x204\n#define RK3288_SDIO0_CON0\t\t0x208\n#define RK3288_SDIO0_CON1\t\t0x20c\n#define RK3288_SDIO1_CON0\t\t0x210\n#define RK3288_SDIO1_CON1\t\t0x214\n#define RK3288_EMMC_CON0\t\t0x218\n#define RK3288_EMMC_CON1\t\t0x21c\n\n#define RK3308_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3308_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3308_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3308_GLB_SRST_FST\t\t0xb8\n#define RK3308_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x400)\n#define RK3308_MODE_CON\t\t\t0xa0\n#define RK3308_SDMMC_CON0\t\t0x480\n#define RK3308_SDMMC_CON1\t\t0x484\n#define RK3308_SDIO_CON0\t\t0x488\n#define RK3308_SDIO_CON1\t\t0x48c\n#define RK3308_EMMC_CON0\t\t0x490\n#define RK3308_EMMC_CON1\t\t0x494\n\n#define RK3328_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3328_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3328_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x200)\n#define RK3328_GRFCLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3328_GLB_SRST_FST\t\t0x9c\n#define RK3328_GLB_SRST_SND\t\t0x98\n#define RK3328_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3328_MODE_CON\t\t\t0x80\n#define RK3328_MISC_CON\t\t\t0x84\n#define RK3328_SDMMC_CON0\t\t0x380\n#define RK3328_SDMMC_CON1\t\t0x384\n#define RK3328_SDIO_CON0\t\t0x388\n#define RK3328_SDIO_CON1\t\t0x38c\n#define RK3328_EMMC_CON0\t\t0x390\n#define RK3328_EMMC_CON1\t\t0x394\n#define RK3328_SDMMC_EXT_CON0\t\t0x398\n#define RK3328_SDMMC_EXT_CON1\t\t0x39C\n\n#define RK3368_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3368_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3368_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x200)\n#define RK3368_GLB_SRST_FST\t\t0x280\n#define RK3368_GLB_SRST_SND\t\t0x284\n#define RK3368_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3368_MISC_CON\t\t\t0x380\n#define RK3368_SDMMC_CON0\t\t0x400\n#define RK3368_SDMMC_CON1\t\t0x404\n#define RK3368_SDIO0_CON0\t\t0x408\n#define RK3368_SDIO0_CON1\t\t0x40c\n#define RK3368_SDIO1_CON0\t\t0x410\n#define RK3368_SDIO1_CON1\t\t0x414\n#define RK3368_EMMC_CON0\t\t0x418\n#define RK3368_EMMC_CON1\t\t0x41c\n\n#define RK3399_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3399_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3399_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3399_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x400)\n#define RK3399_GLB_SRST_FST\t\t0x500\n#define RK3399_GLB_SRST_SND\t\t0x504\n#define RK3399_GLB_CNT_TH\t\t0x508\n#define RK3399_MISC_CON\t\t\t0x50c\n#define RK3399_RST_CON\t\t\t0x510\n#define RK3399_RST_ST\t\t\t0x514\n#define RK3399_SDMMC_CON0\t\t0x580\n#define RK3399_SDMMC_CON1\t\t0x584\n#define RK3399_SDIO_CON0\t\t0x588\n#define RK3399_SDIO_CON1\t\t0x58c\n\n#define RK3399_PMU_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3399_PMU_CLKSEL_CON(x)\t((x) * 0x4 + 0x80)\n#define RK3399_PMU_CLKGATE_CON(x)\t((x) * 0x4 + 0x100)\n#define RK3399_PMU_SOFTRST_CON(x)\t((x) * 0x4 + 0x110)\n\n#define RK3568_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3568_MODE_CON0\t\t0xc0\n#define RK3568_MISC_CON0\t\t0xc4\n#define RK3568_MISC_CON1\t\t0xc8\n#define RK3568_MISC_CON2\t\t0xcc\n#define RK3568_GLB_CNT_TH\t\t0xd0\n#define RK3568_GLB_SRST_FST\t\t0xd4\n#define RK3568_GLB_SRST_SND\t\t0xd8\n#define RK3568_GLB_RST_CON\t\t0xdc\n#define RK3568_GLB_RST_ST\t\t0xe0\n#define RK3568_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x100)\n#define RK3568_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3568_SOFTRST_CON(x)\t\t((x) * 0x4 + 0x400)\n#define RK3568_SDMMC0_CON0\t\t0x580\n#define RK3568_SDMMC0_CON1\t\t0x584\n#define RK3568_SDMMC1_CON0\t\t0x588\n#define RK3568_SDMMC1_CON1\t\t0x58c\n#define RK3568_SDMMC2_CON0\t\t0x590\n#define RK3568_SDMMC2_CON1\t\t0x594\n#define RK3568_EMMC_CON0\t\t0x598\n#define RK3568_EMMC_CON1\t\t0x59c\n\n#define RK3568_PMU_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3568_PMU_MODE_CON0\t\t0x80\n#define RK3568_PMU_CLKSEL_CON(x)\t((x) * 0x4 + 0x100)\n#define RK3568_PMU_CLKGATE_CON(x)\t((x) * 0x4 + 0x180)\n#define RK3568_PMU_SOFTRST_CON(x)\t((x) * 0x4 + 0x200)\n\n#define RK3588_PHP_CRU_BASE\t\t0x8000\n#define RK3588_PMU_CRU_BASE\t\t0x30000\n#define RK3588_BIGCORE0_CRU_BASE\t0x50000\n#define RK3588_BIGCORE1_CRU_BASE\t0x52000\n#define RK3588_DSU_CRU_BASE\t\t0x58000\n\n#define RK3588_PLL_CON(x)\t\tRK2928_PLL_CON(x)\n#define RK3588_MODE_CON0\t\t0x280\n#define RK3588_B0_PLL_MODE_CON0\t\t(RK3588_BIGCORE0_CRU_BASE + 0x280)\n#define RK3588_B1_PLL_MODE_CON0\t\t(RK3588_BIGCORE1_CRU_BASE + 0x280)\n#define RK3588_LPLL_MODE_CON0\t\t(RK3588_DSU_CRU_BASE + 0x280)\n#define RK3588_CLKSEL_CON(x)\t\t((x) * 0x4 + 0x300)\n#define RK3588_CLKGATE_CON(x)\t\t((x) * 0x4 + 0x800)\n#define RK3588_SOFTRST_CON(x)\t\t((x) * 0x4 + 0xa00)\n#define RK3588_GLB_CNT_TH\t\t0xc00\n#define RK3588_GLB_SRST_FST\t\t0xc08\n#define RK3588_GLB_SRST_SND\t\t0xc0c\n#define RK3588_GLB_RST_CON\t\t0xc10\n#define RK3588_GLB_RST_ST\t\t0xc04\n#define RK3588_SDIO_CON0\t\t0xC24\n#define RK3588_SDIO_CON1\t\t0xC28\n#define RK3588_SDMMC_CON0\t\t0xC30\n#define RK3588_SDMMC_CON1\t\t0xC34\n\n#define RK3588_PHP_CLKGATE_CON(x)\t((x) * 0x4 + RK3588_PHP_CRU_BASE + 0x800)\n#define RK3588_PHP_SOFTRST_CON(x)\t((x) * 0x4 + RK3588_PHP_CRU_BASE + 0xa00)\n\n#define RK3588_PMU_PLL_CON(x)\t\t((x) * 0x4 + RK3588_PHP_CRU_BASE)\n#define RK3588_PMU_CLKSEL_CON(x)\t((x) * 0x4 + RK3588_PMU_CRU_BASE + 0x300)\n#define RK3588_PMU_CLKGATE_CON(x)\t((x) * 0x4 + RK3588_PMU_CRU_BASE + 0x800)\n#define RK3588_PMU_SOFTRST_CON(x)\t((x) * 0x4 + RK3588_PMU_CRU_BASE + 0xa00)\n\n#define RK3588_B0_PLL_CON(x)\t\t((x) * 0x4 + RK3588_BIGCORE0_CRU_BASE)\n#define RK3588_BIGCORE0_CLKSEL_CON(x)\t((x) * 0x4 + RK3588_BIGCORE0_CRU_BASE + 0x300)\n#define RK3588_BIGCORE0_CLKGATE_CON(x)\t((x) * 0x4 + RK3588_BIGCORE0_CRU_BASE + 0x800)\n#define RK3588_BIGCORE0_SOFTRST_CON(x)\t((x) * 0x4 + RK3588_BIGCORE0_CRU_BASE + 0xa00)\n#define RK3588_B1_PLL_CON(x)\t\t((x) * 0x4 + RK3588_BIGCORE1_CRU_BASE)\n#define RK3588_BIGCORE1_CLKSEL_CON(x)\t((x) * 0x4 + RK3588_BIGCORE1_CRU_BASE + 0x300)\n#define RK3588_BIGCORE1_CLKGATE_CON(x)\t((x) * 0x4 + RK3588_BIGCORE1_CRU_BASE + 0x800)\n#define RK3588_BIGCORE1_SOFTRST_CON(x)\t((x) * 0x4 + RK3588_BIGCORE1_CRU_BASE + 0xa00)\n#define RK3588_LPLL_CON(x)\t\t((x) * 0x4 + RK3588_DSU_CRU_BASE)\n#define RK3588_DSU_CLKSEL_CON(x)\t((x) * 0x4 + RK3588_DSU_CRU_BASE + 0x300)\n#define RK3588_DSU_CLKGATE_CON(x)\t((x) * 0x4 + RK3588_DSU_CRU_BASE + 0x800)\n#define RK3588_DSU_SOFTRST_CON(x)\t((x) * 0x4 + RK3588_DSU_CRU_BASE + 0xa00)\n\nenum rockchip_pll_type {\n\tpll_rk3036,\n\tpll_rk3066,\n\tpll_rk3328,\n\tpll_rk3399,\n\tpll_rk3588,\n\tpll_rk3588_core,\n};\n\n#define RK3036_PLL_RATE(_rate, _refdiv, _fbdiv, _postdiv1,\t\\\n\t\t\t_postdiv2, _dsmpd, _frac)\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\t.rate\t= _rate##U,\t\t\t\t\t\\\n\t.fbdiv = _fbdiv,\t\t\t\t\t\\\n\t.postdiv1 = _postdiv1,\t\t\t\t\t\\\n\t.refdiv = _refdiv,\t\t\t\t\t\\\n\t.postdiv2 = _postdiv2,\t\t\t\t\t\\\n\t.dsmpd = _dsmpd,\t\t\t\t\t\\\n\t.frac = _frac,\t\t\t\t\t\t\\\n}\n\n#define RK3066_PLL_RATE(_rate, _nr, _nf, _no)\t\\\n{\t\t\t\t\t\t\\\n\t.rate\t= _rate##U,\t\t\t\\\n\t.nr = _nr,\t\t\t\t\\\n\t.nf = _nf,\t\t\t\t\\\n\t.no = _no,\t\t\t\t\\\n\t.nb = ((_nf) < 2) ? 1 : (_nf) >> 1,\t\\\n}\n\n#define RK3066_PLL_RATE_NB(_rate, _nr, _nf, _no, _nb)\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\t.rate\t= _rate##U,\t\t\t\t\t\\\n\t.nr = _nr,\t\t\t\t\t\t\\\n\t.nf = _nf,\t\t\t\t\t\t\\\n\t.no = _no,\t\t\t\t\t\t\\\n\t.nb = _nb,\t\t\t\t\t\t\\\n}\n\n#define RK3588_PLL_RATE(_rate, _p, _m, _s, _k)\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\t.rate   = _rate##U,\t\t\t\t\t\\\n\t.p = _p,\t\t\t\t\t\t\\\n\t.m = _m,\t\t\t\t\t\t\\\n\t.s = _s,\t\t\t\t\t\t\\\n\t.k = _k,\t\t\t\t\t\t\\\n}\n\n \nstruct rockchip_clk_provider {\n\tvoid __iomem *reg_base;\n\tstruct clk_onecell_data clk_data;\n\tstruct device_node *cru_node;\n\tstruct regmap *grf;\n\tspinlock_t lock;\n};\n\nstruct rockchip_pll_rate_table {\n\tunsigned long rate;\n\tunion {\n\t\tstruct {\n\t\t\t \n\t\t\tunsigned int nr;\n\t\t\tunsigned int nf;\n\t\t\tunsigned int no;\n\t\t\tunsigned int nb;\n\t\t};\n\t\tstruct {\n\t\t\t \n\t\t\tunsigned int fbdiv;\n\t\t\tunsigned int postdiv1;\n\t\t\tunsigned int refdiv;\n\t\t\tunsigned int postdiv2;\n\t\t\tunsigned int dsmpd;\n\t\t\tunsigned int frac;\n\t\t};\n\t\tstruct {\n\t\t\t \n\t\t\tunsigned int m;\n\t\t\tunsigned int p;\n\t\t\tunsigned int s;\n\t\t\tunsigned int k;\n\t\t};\n\t};\n};\n\n \nstruct rockchip_pll_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*const *parent_names;\n\tu8\t\t\tnum_parents;\n\tunsigned long\t\tflags;\n\tint\t\t\tcon_offset;\n\tint\t\t\tmode_offset;\n\tint\t\t\tmode_shift;\n\tint\t\t\tlock_shift;\n\tenum rockchip_pll_type\ttype;\n\tu8\t\t\tpll_flags;\n\tstruct rockchip_pll_rate_table *rate_table;\n};\n\n#define ROCKCHIP_PLL_SYNC_RATE\t\tBIT(0)\n\n#define PLL(_type, _id, _name, _pnames, _flags, _con, _mode, _mshift,\t\\\n\t\t_lshift, _pflags, _rtable)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\t\\\n\t\t.type\t\t= _type,\t\t\t\t\\\n\t\t.name\t\t= _name,\t\t\t\t\\\n\t\t.parent_names\t= _pnames,\t\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(_pnames),\t\t\t\\\n\t\t.flags\t\t= CLK_GET_RATE_NOCACHE | _flags,\t\\\n\t\t.con_offset\t= _con,\t\t\t\t\t\\\n\t\t.mode_offset\t= _mode,\t\t\t\t\\\n\t\t.mode_shift\t= _mshift,\t\t\t\t\\\n\t\t.lock_shift\t= _lshift,\t\t\t\t\\\n\t\t.pll_flags\t= _pflags,\t\t\t\t\\\n\t\t.rate_table\t= _rtable,\t\t\t\t\\\n\t}\n\nstruct clk *rockchip_clk_register_pll(struct rockchip_clk_provider *ctx,\n\t\tenum rockchip_pll_type pll_type,\n\t\tconst char *name, const char *const *parent_names,\n\t\tu8 num_parents, int con_offset, int grf_lock_offset,\n\t\tint lock_shift, int mode_offset, int mode_shift,\n\t\tstruct rockchip_pll_rate_table *rate_table,\n\t\tunsigned long flags, u8 clk_pll_flags);\n\nstruct rockchip_cpuclk_clksel {\n\tint reg;\n\tu32 val;\n};\n\n#define ROCKCHIP_CPUCLK_NUM_DIVIDERS\t6\n#define ROCKCHIP_CPUCLK_MAX_CORES\t4\nstruct rockchip_cpuclk_rate_table {\n\tunsigned long prate;\n\tstruct rockchip_cpuclk_clksel divs[ROCKCHIP_CPUCLK_NUM_DIVIDERS];\n\tstruct rockchip_cpuclk_clksel pre_muxs[ROCKCHIP_CPUCLK_NUM_DIVIDERS];\n\tstruct rockchip_cpuclk_clksel post_muxs[ROCKCHIP_CPUCLK_NUM_DIVIDERS];\n};\n\n \nstruct rockchip_cpuclk_reg_data {\n\tint\tcore_reg[ROCKCHIP_CPUCLK_MAX_CORES];\n\tu8\tdiv_core_shift[ROCKCHIP_CPUCLK_MAX_CORES];\n\tu32\tdiv_core_mask[ROCKCHIP_CPUCLK_MAX_CORES];\n\tint\tnum_cores;\n\tint\tmux_core_reg;\n\tu8\tmux_core_alt;\n\tu8\tmux_core_main;\n\tu8\tmux_core_shift;\n\tu32\tmux_core_mask;\n};\n\nstruct clk *rockchip_clk_register_cpuclk(const char *name,\n\t\t\tconst char *const *parent_names, u8 num_parents,\n\t\t\tconst struct rockchip_cpuclk_reg_data *reg_data,\n\t\t\tconst struct rockchip_cpuclk_rate_table *rates,\n\t\t\tint nrates, void __iomem *reg_base, spinlock_t *lock);\n\nstruct clk *rockchip_clk_register_mmc(const char *name,\n\t\t\t\tconst char *const *parent_names, u8 num_parents,\n\t\t\t\tvoid __iomem *reg, int shift);\n\n \n#define ROCKCHIP_DDRCLK_SIP\t\tBIT(0)\n\nstruct clk *rockchip_clk_register_ddrclk(const char *name, int flags,\n\t\t\t\t\t const char *const *parent_names,\n\t\t\t\t\t u8 num_parents, int mux_offset,\n\t\t\t\t\t int mux_shift, int mux_width,\n\t\t\t\t\t int div_shift, int div_width,\n\t\t\t\t\t int ddr_flags, void __iomem *reg_base,\n\t\t\t\t\t spinlock_t *lock);\n\n#define ROCKCHIP_INVERTER_HIWORD_MASK\tBIT(0)\n\nstruct clk *rockchip_clk_register_inverter(const char *name,\n\t\t\t\tconst char *const *parent_names, u8 num_parents,\n\t\t\t\tvoid __iomem *reg, int shift, int flags,\n\t\t\t\tspinlock_t *lock);\n\nstruct clk *rockchip_clk_register_muxgrf(const char *name,\n\t\t\t\tconst char *const *parent_names, u8 num_parents,\n\t\t\t\tint flags, struct regmap *grf, int reg,\n\t\t\t\tint shift, int width, int mux_flags);\n\n#define PNAME(x) static const char *const x[] __initconst\n\nenum rockchip_clk_branch_type {\n\tbranch_composite,\n\tbranch_mux,\n\tbranch_muxgrf,\n\tbranch_divider,\n\tbranch_fraction_divider,\n\tbranch_gate,\n\tbranch_mmc,\n\tbranch_inverter,\n\tbranch_factor,\n\tbranch_ddrclk,\n\tbranch_half_divider,\n};\n\nstruct rockchip_clk_branch {\n\tunsigned int\t\t\tid;\n\tenum rockchip_clk_branch_type\tbranch_type;\n\tconst char\t\t\t*name;\n\tconst char\t\t\t*const *parent_names;\n\tu8\t\t\t\tnum_parents;\n\tunsigned long\t\t\tflags;\n\tint\t\t\t\tmuxdiv_offset;\n\tu8\t\t\t\tmux_shift;\n\tu8\t\t\t\tmux_width;\n\tu8\t\t\t\tmux_flags;\n\tu32\t\t\t\t*mux_table;\n\tint\t\t\t\tdiv_offset;\n\tu8\t\t\t\tdiv_shift;\n\tu8\t\t\t\tdiv_width;\n\tu8\t\t\t\tdiv_flags;\n\tstruct clk_div_table\t\t*div_table;\n\tint\t\t\t\tgate_offset;\n\tu8\t\t\t\tgate_shift;\n\tu8\t\t\t\tgate_flags;\n\tstruct rockchip_clk_branch\t*child;\n};\n\n#define COMPOSITE(_id, cname, pnames, f, mo, ms, mw, mf, ds, dw,\\\n\t\t  df, go, gs, gf)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_DIV_OFFSET(_id, cname, pnames, f, mo, ms, mw,\t\\\n\t\t\t     mf, do, ds, dw, df, go, gs, gf)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_offset\t= do,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOMUX(_id, cname, pname, f, mo, ds, dw, df,\t\\\n\t\t\tgo, gs, gf)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOMUX_DIVTBL(_id, cname, pname, f, mo, ds, dw,\\\n\t\t\t       df, dt, go, gs, gf)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.div_table\t= dt,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NODIV(_id, cname, pnames, f, mo, ms, mw, mf,\t\\\n\t\t\tgo, gs, gf)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOGATE(_id, cname, pnames, f, mo, ms, mw, mf,\t\\\n\t\t\t ds, dw, df)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOGATE_DIVTBL(_id, cname, pnames, f, mo, ms,\t\\\n\t\t\t\tmw, mf, ds, dw, df, dt)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_composite,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.div_table\t= dt,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_FRAC(_id, cname, pname, f, mo, df, go, gs, gf)\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_fraction_divider,\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= 16,\t\t\t\t\\\n\t\t.div_width\t= 16,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_FRACMUX(_id, cname, pname, f, mo, df, go, gs, gf, ch) \\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_fraction_divider,\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= 16,\t\t\t\t\\\n\t\t.div_width\t= 16,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t\t.child\t\t= ch,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_FRACMUX_NOGATE(_id, cname, pname, f, mo, df, ch) \\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_fraction_divider,\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= 16,\t\t\t\t\\\n\t\t.div_width\t= 16,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t\t.child\t\t= ch,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_DDRCLK(_id, cname, pnames, f, mo, ms, mw,\t\\\n\t\t\t ds, dw, df)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_ddrclk,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset  = mo,                           \\\n\t\t.mux_shift      = ms,                           \\\n\t\t.mux_width      = mw,                           \\\n\t\t.div_shift      = ds,                           \\\n\t\t.div_width      = dw,                           \\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset    = -1,                           \\\n\t}\n\n#define MUX(_id, cname, pnames, f, o, s, w, mf)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_mux,\t\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.mux_shift\t= s,\t\t\t\t\\\n\t\t.mux_width\t= w,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define MUXTBL(_id, cname, pnames, f, o, s, w, mf, mt)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_mux,\t\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.mux_shift\t= s,\t\t\t\t\\\n\t\t.mux_width\t= w,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t\t.mux_table\t= mt,\t\t\t\t\\\n\t}\n\n#define MUXGRF(_id, cname, pnames, f, o, s, w, mf)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_muxgrf,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.mux_shift\t= s,\t\t\t\t\\\n\t\t.mux_width\t= w,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define DIV(_id, cname, pname, f, o, s, w, df)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.div_shift\t= s,\t\t\t\t\\\n\t\t.div_width\t= w,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define DIVTBL(_id, cname, pname, f, o, s, w, df, dt)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.div_shift\t= s,\t\t\t\t\\\n\t\t.div_width\t= w,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.div_table\t= dt,\t\t\t\t\\\n\t}\n\n#define GATE(_id, cname, pname, f, o, b, gf)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_gate,\t\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.gate_offset\t= o,\t\t\t\t\\\n\t\t.gate_shift\t= b,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define MMC(_id, cname, pname, offset, shift)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_mmc,\t\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.muxdiv_offset\t= offset,\t\t\t\\\n\t\t.div_shift\t= shift,\t\t\t\\\n\t}\n\n#define INVERTER(_id, cname, pname, io, is, if)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_inverter,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.muxdiv_offset\t= io,\t\t\t\t\\\n\t\t.div_shift\t= is,\t\t\t\t\\\n\t\t.div_flags\t= if,\t\t\t\t\\\n\t}\n\n#define FACTOR(_id, cname, pname,  f, fm, fd)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_factor,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.div_shift\t= fm,\t\t\t\t\\\n\t\t.div_width\t= fd,\t\t\t\t\\\n\t}\n\n#define FACTOR_GATE(_id, cname, pname,  f, fm, fd, go, gb, gf)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_factor,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.div_shift\t= fm,\t\t\t\t\\\n\t\t.div_width\t= fd,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gb,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_HALFDIV(_id, cname, pnames, f, mo, ms, mw, mf, ds, dw,\\\n\t\t\t  df, go, gs, gf)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_half_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOGATE_HALFDIV(_id, cname, pnames, f, mo, ms, mw, mf,\t\\\n\t\t\t\t ds, dw, df)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_half_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= pnames,\t\t\t\\\n\t\t.num_parents\t= ARRAY_SIZE(pnames),\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.mux_shift\t= ms,\t\t\t\t\\\n\t\t.mux_width\t= mw,\t\t\t\t\\\n\t\t.mux_flags\t= mf,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n#define COMPOSITE_NOMUX_HALFDIV(_id, cname, pname, f, mo, ds, dw, df,\t\\\n\t\t\tgo, gs, gf)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_half_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= mo,\t\t\t\t\\\n\t\t.div_shift\t= ds,\t\t\t\t\\\n\t\t.div_width\t= dw,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= go,\t\t\t\t\\\n\t\t.gate_shift\t= gs,\t\t\t\t\\\n\t\t.gate_flags\t= gf,\t\t\t\t\\\n\t}\n\n#define DIV_HALF(_id, cname, pname, f, o, s, w, df)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.id\t\t= _id,\t\t\t\t\\\n\t\t.branch_type\t= branch_half_divider,\t\t\\\n\t\t.name\t\t= cname,\t\t\t\\\n\t\t.parent_names\t= (const char *[]){ pname },\t\\\n\t\t.num_parents\t= 1,\t\t\t\t\\\n\t\t.flags\t\t= f,\t\t\t\t\\\n\t\t.muxdiv_offset\t= o,\t\t\t\t\\\n\t\t.div_shift\t= s,\t\t\t\t\\\n\t\t.div_width\t= w,\t\t\t\t\\\n\t\t.div_flags\t= df,\t\t\t\t\\\n\t\t.gate_offset\t= -1,\t\t\t\t\\\n\t}\n\n \n#define SGRF_GATE(_id, cname, pname)\t\t\t\t\\\n\t\tFACTOR(_id, cname, pname, 0, 1, 1)\n\nstruct rockchip_clk_provider *rockchip_clk_init(struct device_node *np,\n\t\t\tvoid __iomem *base, unsigned long nr_clks);\nvoid rockchip_clk_of_add_provider(struct device_node *np,\n\t\t\t\tstruct rockchip_clk_provider *ctx);\nvoid rockchip_clk_register_branches(struct rockchip_clk_provider *ctx,\n\t\t\t\t    struct rockchip_clk_branch *list,\n\t\t\t\t    unsigned int nr_clk);\nvoid rockchip_clk_register_plls(struct rockchip_clk_provider *ctx,\n\t\t\t\tstruct rockchip_pll_clock *pll_list,\n\t\t\t\tunsigned int nr_pll, int grf_lock_offset);\nvoid rockchip_clk_register_armclk(struct rockchip_clk_provider *ctx,\n\t\t\tunsigned int lookup_id, const char *name,\n\t\t\tconst char *const *parent_names, u8 num_parents,\n\t\t\tconst struct rockchip_cpuclk_reg_data *reg_data,\n\t\t\tconst struct rockchip_cpuclk_rate_table *rates,\n\t\t\tint nrates);\nvoid rockchip_clk_protect_critical(const char *const clocks[], int nclocks);\nvoid rockchip_register_restart_notifier(struct rockchip_clk_provider *ctx,\n\t\t\t\t\tunsigned int reg, void (*cb)(void));\n\n#define ROCKCHIP_SOFTRST_HIWORD_MASK\tBIT(0)\n\nstruct clk *rockchip_clk_register_halfdiv(const char *name,\n\t\t\t\t\t  const char *const *parent_names,\n\t\t\t\t\t  u8 num_parents, void __iomem *base,\n\t\t\t\t\t  int muxdiv_offset, u8 mux_shift,\n\t\t\t\t\t  u8 mux_width, u8 mux_flags,\n\t\t\t\t\t  u8 div_shift, u8 div_width,\n\t\t\t\t\t  u8 div_flags, int gate_offset,\n\t\t\t\t\t  u8 gate_shift, u8 gate_flags,\n\t\t\t\t\t  unsigned long flags,\n\t\t\t\t\t  spinlock_t *lock);\n\n#ifdef CONFIG_RESET_CONTROLLER\nvoid rockchip_register_softrst_lut(struct device_node *np,\n\t\t\t\t   const int *lookup_table,\n\t\t\t\t   unsigned int num_regs,\n\t\t\t\t   void __iomem *base, u8 flags);\n#else\nstatic inline void rockchip_register_softrst_lut(struct device_node *np,\n\t\t\t\t   const int *lookup_table,\n\t\t\t\t   unsigned int num_regs,\n\t\t\t\t   void __iomem *base, u8 flags)\n{\n}\n#endif\n\nstatic inline void rockchip_register_softrst(struct device_node *np,\n\t\t\t\t\t     unsigned int num_regs,\n\t\t\t\t\t     void __iomem *base, u8 flags)\n{\n\treturn rockchip_register_softrst_lut(np, NULL, num_regs, base, flags);\n}\n\nvoid rk3588_rst_init(struct device_node *np, void __iomem *reg_base);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}