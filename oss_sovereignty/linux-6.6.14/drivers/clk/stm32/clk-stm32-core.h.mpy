{
  "module_name": "clk-stm32-core.h",
  "hash_id": "29f67ca59f9797bf80a4fc419219985675b6505a4abdbf70331516afa94fb4b4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/stm32/clk-stm32-core.h",
  "human_readable_source": " \n \n\n#include <linux/clk-provider.h>\n\nstruct stm32_rcc_match_data;\n\nstruct stm32_mux_cfg {\n\tu16\toffset;\n\tu8\tshift;\n\tu8\twidth;\n\tu8\tflags;\n\tu32\t*table;\n\tu8\tready;\n};\n\nstruct stm32_gate_cfg {\n\tu16\toffset;\n\tu8\tbit_idx;\n\tu8\tset_clr;\n};\n\nstruct stm32_div_cfg {\n\tu16\toffset;\n\tu8\tshift;\n\tu8\twidth;\n\tu8\tflags;\n\tu8\tready;\n\tconst struct clk_div_table *table;\n};\n\nstruct stm32_composite_cfg {\n\tint\tmux;\n\tint\tgate;\n\tint\tdiv;\n};\n\n#define NO_ID 0xFFFFFFFF\n\n#define NO_STM32_MUX\t\t0xFFFF\n#define NO_STM32_DIV\t\t0xFFFF\n#define NO_STM32_GATE\t\t0xFFFF\n\nstruct clock_config {\n\tunsigned long\tid;\n\tint\t\tsec_id;\n\tvoid\t\t*clock_cfg;\n\n\tstruct clk_hw *(*func)(struct device *dev,\n\t\t\t       const struct stm32_rcc_match_data *data,\n\t\t\t       void __iomem *base,\n\t\t\t       spinlock_t *lock,\n\t\t\t       const struct clock_config *cfg);\n};\n\nstruct clk_stm32_clock_data {\n\tu16 *gate_cpt;\n\tconst struct stm32_gate_cfg\t*gates;\n\tconst struct stm32_mux_cfg\t*muxes;\n\tconst struct stm32_div_cfg\t*dividers;\n\tstruct clk_hw *(*is_multi_mux)(struct clk_hw *hw);\n};\n\nstruct stm32_rcc_match_data {\n\tstruct clk_hw_onecell_data\t*hw_clks;\n\tunsigned int\t\t\tnum_clocks;\n\tconst struct clock_config\t*tab_clocks;\n\tunsigned int\t\t\tmaxbinding;\n\tstruct clk_stm32_clock_data\t*clock_data;\n\tu32\t\t\t\tclear_offset;\n\tint (*check_security)(void __iomem *base,\n\t\t\t      const struct clock_config *cfg);\n\tint (*multi_mux)(void __iomem *base, const struct clock_config *cfg);\n};\n\nint stm32_rcc_reset_init(struct device *dev, const struct of_device_id *match,\n\t\t\t void __iomem *base);\n\nint stm32_rcc_init(struct device *dev, const struct of_device_id *match_data,\n\t\t   void __iomem *base);\n\n \n#define MUX_NO_RDY\t\t0xFF\n#define MUX_SAFE\t\tBIT(7)\n\n \n#define DIV_NO_RDY\t\t0xFF\n\n \nstruct clk_stm32_mux {\n\tu16 mux_id;\n\tstruct clk_hw hw;\n\tvoid __iomem *base;\n\tstruct clk_stm32_clock_data *clock_data;\n\tspinlock_t *lock;  \n};\n\n#define to_clk_stm32_mux(_hw) container_of(_hw, struct clk_stm32_mux, hw)\n\nstruct clk_stm32_gate {\n\tu16 gate_id;\n\tstruct clk_hw hw;\n\tvoid __iomem *base;\n\tstruct clk_stm32_clock_data *clock_data;\n\tspinlock_t *lock;  \n};\n\n#define to_clk_stm32_gate(_hw) container_of(_hw, struct clk_stm32_gate, hw)\n\nstruct clk_stm32_div {\n\tu16 div_id;\n\tstruct clk_hw hw;\n\tvoid __iomem *base;\n\tstruct clk_stm32_clock_data *clock_data;\n\tspinlock_t *lock;  \n};\n\n#define to_clk_stm32_divider(_hw) container_of(_hw, struct clk_stm32_div, hw)\n\nstruct clk_stm32_composite {\n\tu16 gate_id;\n\tu16 mux_id;\n\tu16 div_id;\n\tstruct clk_hw hw;\n\tvoid __iomem *base;\n\tstruct clk_stm32_clock_data *clock_data;\n\tspinlock_t *lock;  \n};\n\n#define to_clk_stm32_composite(_hw) container_of(_hw, struct clk_stm32_composite, hw)\n\n \nextern const struct clk_ops clk_stm32_mux_ops;\nextern const struct clk_ops clk_stm32_gate_ops;\nextern const struct clk_ops clk_stm32_divider_ops;\nextern const struct clk_ops clk_stm32_composite_ops;\n\n \nstruct clk_hw *clk_stm32_mux_register(struct device *dev,\n\t\t\t\t      const struct stm32_rcc_match_data *data,\n\t\t\t\t      void __iomem *base,\n\t\t\t\t      spinlock_t *lock,\n\t\t\t\t      const struct clock_config *cfg);\n\nstruct clk_hw *clk_stm32_gate_register(struct device *dev,\n\t\t\t\t       const struct stm32_rcc_match_data *data,\n\t\t\t\t       void __iomem *base,\n\t\t\t\t       spinlock_t *lock,\n\t\t\t\t       const struct clock_config *cfg);\n\nstruct clk_hw *clk_stm32_div_register(struct device *dev,\n\t\t\t\t      const struct stm32_rcc_match_data *data,\n\t\t\t\t      void __iomem *base,\n\t\t\t\t      spinlock_t *lock,\n\t\t\t\t      const struct clock_config *cfg);\n\nstruct clk_hw *clk_stm32_composite_register(struct device *dev,\n\t\t\t\t\t    const struct stm32_rcc_match_data *data,\n\t\t\t\t\t    void __iomem *base,\n\t\t\t\t\t    spinlock_t *lock,\n\t\t\t\t\t    const struct clock_config *cfg);\n\n#define STM32_CLOCK_CFG(_binding, _clk, _sec_id, _struct, _register)\\\n{\\\n\t.id\t\t= (_binding),\\\n\t.sec_id\t\t= (_sec_id),\\\n\t.clock_cfg\t= (_struct) {_clk},\\\n\t.func\t\t= (_register),\\\n}\n\n#define STM32_MUX_CFG(_binding, _clk, _sec_id)\\\n\tSTM32_CLOCK_CFG(_binding, &(_clk), _sec_id, struct clk_stm32_mux *,\\\n\t\t\t&clk_stm32_mux_register)\n\n#define STM32_GATE_CFG(_binding, _clk, _sec_id)\\\n\tSTM32_CLOCK_CFG(_binding, &(_clk), _sec_id, struct clk_stm32_gate *,\\\n\t\t\t&clk_stm32_gate_register)\n\n#define STM32_DIV_CFG(_binding, _clk, _sec_id)\\\n\tSTM32_CLOCK_CFG(_binding, &(_clk), _sec_id, struct clk_stm32_div *,\\\n\t\t\t&clk_stm32_div_register)\n\n#define STM32_COMPOSITE_CFG(_binding, _clk, _sec_id)\\\n\tSTM32_CLOCK_CFG(_binding, &(_clk), _sec_id, struct clk_stm32_composite *,\\\n\t\t\t&clk_stm32_composite_register)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}