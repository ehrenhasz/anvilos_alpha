{
  "module_name": "cgu.h",
  "hash_id": "8dafb8ade463e55a5107e3ea9f13e93a972b82395c4853f5f4cd081ed2ea90f1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/ingenic/cgu.h",
  "human_readable_source": " \n \n\n#ifndef __DRIVERS_CLK_INGENIC_CGU_H__\n#define __DRIVERS_CLK_INGENIC_CGU_H__\n\n#include <linux/bitops.h>\n#include <linux/clk-provider.h>\n#include <linux/of.h>\n#include <linux/spinlock.h>\n\n \nstruct ingenic_cgu_pll_info {\n\tunsigned reg;\n\tunsigned rate_multiplier;\n\tconst s8 *od_encoding;\n\tu8 m_shift, m_bits, m_offset;\n\tu8 n_shift, n_bits, n_offset;\n\tu8 od_shift, od_bits, od_max;\n\tunsigned bypass_reg;\n\ts8 bypass_bit;\n\ts8 enable_bit;\n\ts8 stable_bit;\n\tvoid (*calc_m_n_od)(const struct ingenic_cgu_pll_info *pll_info,\n\t\t\t    unsigned long rate, unsigned long parent_rate,\n\t\t\t    unsigned int *m, unsigned int *n, unsigned int *od);\n\tvoid (*set_rate_hook)(const struct ingenic_cgu_pll_info *pll_info,\n\t\t\t      unsigned long rate, unsigned long parent_rate);\n};\n\n \nstruct ingenic_cgu_mux_info {\n\tunsigned reg;\n\tu8 shift;\n\tu8 bits;\n};\n\n \nstruct ingenic_cgu_div_info {\n\tunsigned reg;\n\tu8 shift;\n\tu8 div;\n\tu8 bits;\n\ts8 ce_bit;\n\ts8 busy_bit;\n\ts8 stop_bit;\n\tu8 bypass_mask;\n\tconst u8 *div_table;\n};\n\n \nstruct ingenic_cgu_fixdiv_info {\n\tunsigned div;\n};\n\n \nstruct ingenic_cgu_gate_info {\n\tunsigned reg;\n\tu8 bit;\n\tbool clear_to_gate;\n\tu16 delay_us;\n};\n\n \nstruct ingenic_cgu_custom_info {\n\tconst struct clk_ops *clk_ops;\n};\n\n \nstruct ingenic_cgu_clk_info {\n\tconst char *name;\n\n\tenum {\n\t\tCGU_CLK_NONE\t\t= 0,\n\t\tCGU_CLK_EXT\t\t= BIT(0),\n\t\tCGU_CLK_PLL\t\t= BIT(1),\n\t\tCGU_CLK_GATE\t\t= BIT(2),\n\t\tCGU_CLK_MUX\t\t= BIT(3),\n\t\tCGU_CLK_MUX_GLITCHFREE\t= BIT(4),\n\t\tCGU_CLK_DIV\t\t= BIT(5),\n\t\tCGU_CLK_FIXDIV\t\t= BIT(6),\n\t\tCGU_CLK_CUSTOM\t\t= BIT(7),\n\t} type;\n\n\tunsigned long flags;\n\n\tint parents[4];\n\n\tunion {\n\t\tstruct ingenic_cgu_pll_info pll;\n\n\t\tstruct {\n\t\t\tstruct ingenic_cgu_gate_info gate;\n\t\t\tstruct ingenic_cgu_mux_info mux;\n\t\t\tstruct ingenic_cgu_div_info div;\n\t\t\tstruct ingenic_cgu_fixdiv_info fixdiv;\n\t\t};\n\n\t\tstruct ingenic_cgu_custom_info custom;\n\t};\n};\n\n \nstruct ingenic_cgu {\n\tstruct device_node *np;\n\tvoid __iomem *base;\n\n\tconst struct ingenic_cgu_clk_info *clock_info;\n\tstruct clk_onecell_data clocks;\n\n\tspinlock_t lock;\n};\n\n \nstruct ingenic_clk {\n\tstruct clk_hw hw;\n\tstruct ingenic_cgu *cgu;\n\tunsigned idx;\n};\n\n#define to_ingenic_clk(_hw) container_of(_hw, struct ingenic_clk, hw)\n\n \nstruct ingenic_cgu *\ningenic_cgu_new(const struct ingenic_cgu_clk_info *clock_info,\n\t\tunsigned num_clocks, struct device_node *np);\n\n \nint ingenic_cgu_register_clocks(struct ingenic_cgu *cgu);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}