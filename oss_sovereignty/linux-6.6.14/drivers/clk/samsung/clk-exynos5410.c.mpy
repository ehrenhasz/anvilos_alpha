{
  "module_name": "clk-exynos5410.c",
  "hash_id": "ed88acafc14d4c6f76cdebc4e249a6be0744a2703382d7bc82cb936d20546774",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/samsung/clk-exynos5410.c",
  "human_readable_source": "\n \n\n#include <dt-bindings/clock/exynos5410.h>\n\n#include <linux/clk-provider.h>\n#include <linux/of.h>\n#include <linux/of_address.h>\n#include <linux/clk.h>\n\n#include \"clk.h\"\n\n#define APLL_LOCK               0x0\n#define APLL_CON0               0x100\n#define CPLL_LOCK               0x10020\n#define CPLL_CON0               0x10120\n#define EPLL_LOCK               0x10040\n#define EPLL_CON0               0x10130\n#define MPLL_LOCK               0x4000\n#define MPLL_CON0               0x4100\n#define BPLL_LOCK               0x20010\n#define BPLL_CON0               0x20110\n#define KPLL_LOCK               0x28000\n#define KPLL_CON0               0x28100\n\n#define SRC_CPU\t\t\t0x200\n#define DIV_CPU0\t\t0x500\n#define SRC_CPERI1\t\t0x4204\n#define GATE_IP_G2D\t\t0x8800\n#define DIV_TOP0\t\t0x10510\n#define DIV_TOP1\t\t0x10514\n#define DIV_FSYS0\t\t0x10548\n#define DIV_FSYS1\t\t0x1054c\n#define DIV_FSYS2\t\t0x10550\n#define DIV_PERIC0\t\t0x10558\n#define DIV_PERIC3\t\t0x10564\n#define SRC_TOP0\t\t0x10210\n#define SRC_TOP1\t\t0x10214\n#define SRC_TOP2\t\t0x10218\n#define SRC_FSYS\t\t0x10244\n#define SRC_PERIC0\t\t0x10250\n#define SRC_MASK_FSYS\t\t0x10340\n#define SRC_MASK_PERIC0\t\t0x10350\n#define GATE_BUS_FSYS0\t\t0x10740\n#define GATE_TOP_SCLK_FSYS\t0x10840\n#define GATE_TOP_SCLK_PERIC\t0x10850\n#define GATE_IP_FSYS\t\t0x10944\n#define GATE_IP_PERIC\t\t0x10950\n#define GATE_IP_PERIS\t\t0x10960\n#define SRC_CDREX\t\t0x20200\n#define SRC_KFC\t\t\t0x28200\n#define DIV_KFC0\t\t0x28500\n\n \n#define CLKS_NR\t\t\t512\n\n \nenum exynos5410_plls {\n\tapll, cpll, epll, mpll,\n\tbpll, kpll,\n\tnr_plls                  \n};\n\n \nPNAME(apll_p)\t\t= { \"fin_pll\", \"fout_apll\", };\nPNAME(bpll_p)\t\t= { \"fin_pll\", \"fout_bpll\", };\nPNAME(cpll_p)\t\t= { \"fin_pll\", \"fout_cpll\" };\nPNAME(epll_p)\t\t= { \"fin_pll\", \"fout_epll\" };\nPNAME(mpll_p)\t\t= { \"fin_pll\", \"fout_mpll\", };\nPNAME(kpll_p)\t\t= { \"fin_pll\", \"fout_kpll\", };\n\nPNAME(mout_cpu_p)\t= { \"mout_apll\", \"sclk_mpll\", };\nPNAME(mout_kfc_p)\t= { \"mout_kpll\", \"sclk_mpll\", };\n\nPNAME(mpll_user_p)\t= { \"fin_pll\", \"sclk_mpll\", };\nPNAME(bpll_user_p)\t= { \"fin_pll\", \"sclk_bpll\", };\nPNAME(mpll_bpll_p)\t= { \"sclk_mpll_muxed\", \"sclk_bpll_muxed\", };\nPNAME(sclk_mpll_bpll_p)\t= { \"sclk_mpll_bpll\", \"fin_pll\", };\n\nPNAME(group2_p)\t\t= { \"fin_pll\", \"fin_pll\", \"none\", \"none\",\n\t\t\t\"none\", \"none\", \"sclk_mpll_bpll\",\n\t\t\t \"none\", \"none\", \"sclk_cpll\" };\n\nstatic const struct samsung_mux_clock exynos5410_mux_clks[] __initconst = {\n\tMUX(0, \"mout_apll\", apll_p, SRC_CPU, 0, 1),\n\tMUX(0, \"mout_cpu\", mout_cpu_p, SRC_CPU, 16, 1),\n\n\tMUX(0, \"mout_kpll\", kpll_p, SRC_KFC, 0, 1),\n\tMUX(0, \"mout_kfc\", mout_kfc_p, SRC_KFC, 16, 1),\n\n\tMUX(0, \"sclk_mpll\", mpll_p, SRC_CPERI1, 8, 1),\n\tMUX(0, \"sclk_mpll_muxed\", mpll_user_p, SRC_TOP2, 20, 1),\n\n\tMUX(0, \"sclk_bpll\", bpll_p, SRC_CDREX, 0, 1),\n\tMUX(0, \"sclk_bpll_muxed\", bpll_user_p, SRC_TOP2, 24, 1),\n\n\tMUX(0, \"sclk_epll\", epll_p, SRC_TOP2, 12, 1),\n\n\tMUX(0, \"sclk_cpll\", cpll_p, SRC_TOP2, 8, 1),\n\n\tMUX(0, \"sclk_mpll_bpll\", mpll_bpll_p, SRC_TOP1, 20, 1),\n\n\tMUX(0, \"mout_mmc0\", group2_p, SRC_FSYS, 0, 4),\n\tMUX(0, \"mout_mmc1\", group2_p, SRC_FSYS, 4, 4),\n\tMUX(0, \"mout_mmc2\", group2_p, SRC_FSYS, 8, 4),\n\tMUX(0, \"mout_usbd300\", sclk_mpll_bpll_p, SRC_FSYS, 28, 1),\n\tMUX(0, \"mout_usbd301\", sclk_mpll_bpll_p, SRC_FSYS, 29, 1),\n\n\tMUX(0, \"mout_uart0\", group2_p, SRC_PERIC0, 0, 4),\n\tMUX(0, \"mout_uart1\", group2_p, SRC_PERIC0, 4, 4),\n\tMUX(0, \"mout_uart2\", group2_p, SRC_PERIC0, 8, 4),\n\tMUX(0, \"mout_uart3\", group2_p, SRC_PERIC0, 12, 4),\n\tMUX(0, \"mout_pwm\", group2_p, SRC_PERIC0, 24, 4),\n\n\tMUX(0, \"mout_aclk200\", mpll_bpll_p, SRC_TOP0, 12, 1),\n\tMUX(0, \"mout_aclk400\", mpll_bpll_p, SRC_TOP0, 20, 1),\n};\n\nstatic const struct samsung_div_clock exynos5410_div_clks[] __initconst = {\n\tDIV(0, \"div_arm\", \"mout_cpu\", DIV_CPU0, 0, 3),\n\tDIV(0, \"div_arm2\", \"div_arm\", DIV_CPU0, 28, 3),\n\n\tDIV(0, \"div_acp\", \"div_arm2\", DIV_CPU0, 8, 3),\n\tDIV(0, \"div_cpud\", \"div_arm2\", DIV_CPU0, 4, 3),\n\tDIV(0, \"div_atb\", \"div_arm2\", DIV_CPU0, 16, 3),\n\tDIV(0, \"pclk_dbg\", \"div_arm2\", DIV_CPU0, 20, 3),\n\n\tDIV(0, \"div_kfc\", \"mout_kfc\", DIV_KFC0, 0, 3),\n\tDIV(0, \"div_aclk\", \"div_kfc\", DIV_KFC0, 4, 3),\n\tDIV(0, \"div_pclk\", \"div_kfc\", DIV_KFC0, 20, 3),\n\n\tDIV(0, \"aclk66_pre\", \"sclk_mpll_muxed\", DIV_TOP1, 24, 3),\n\tDIV(0, \"aclk66\", \"aclk66_pre\", DIV_TOP0, 0, 3),\n\n\tDIV(0, \"dout_usbphy300\", \"mout_usbd300\", DIV_FSYS0, 16, 4),\n\tDIV(0, \"dout_usbphy301\", \"mout_usbd301\", DIV_FSYS0, 20, 4),\n\tDIV(0, \"dout_usbd300\", \"mout_usbd300\", DIV_FSYS0, 24, 4),\n\tDIV(0, \"dout_usbd301\", \"mout_usbd301\", DIV_FSYS0, 28, 4),\n\n\tDIV(0, \"div_mmc0\", \"mout_mmc0\", DIV_FSYS1, 0, 4),\n\tDIV(0, \"div_mmc1\", \"mout_mmc1\", DIV_FSYS1, 16, 4),\n\tDIV(0, \"div_mmc2\", \"mout_mmc2\", DIV_FSYS2, 0, 4),\n\n\tDIV_F(0, \"div_mmc_pre0\", \"div_mmc0\",\n\t\t\tDIV_FSYS1, 8, 8, CLK_SET_RATE_PARENT, 0),\n\tDIV_F(0, \"div_mmc_pre1\", \"div_mmc1\",\n\t\t\tDIV_FSYS1, 24, 8, CLK_SET_RATE_PARENT, 0),\n\tDIV_F(0, \"div_mmc_pre2\", \"div_mmc2\",\n\t\t\tDIV_FSYS2, 8, 8, CLK_SET_RATE_PARENT, 0),\n\n\tDIV(0, \"div_uart0\", \"mout_uart0\", DIV_PERIC0, 0, 4),\n\tDIV(0, \"div_uart1\", \"mout_uart1\", DIV_PERIC0, 4, 4),\n\tDIV(0, \"div_uart2\", \"mout_uart2\", DIV_PERIC0, 8, 4),\n\tDIV(0, \"div_uart3\", \"mout_uart3\", DIV_PERIC0, 12, 4),\n\n\tDIV(0, \"dout_pwm\", \"mout_pwm\", DIV_PERIC3, 0, 4),\n\n\tDIV(0, \"aclk200\", \"mout_aclk200\", DIV_TOP0, 12, 3),\n\tDIV(0, \"aclk266\", \"mpll_user_p\", DIV_TOP0, 16, 3),\n\tDIV(0, \"aclk400\", \"mout_aclk400\", DIV_TOP0, 24, 3),\n};\n\nstatic const struct samsung_gate_clock exynos5410_gate_clks[] __initconst = {\n\tGATE(CLK_SSS, \"sss\", \"aclk266\", GATE_IP_G2D, 2, 0, 0),\n\tGATE(CLK_MCT, \"mct\", \"aclk66\", GATE_IP_PERIS, 18, 0, 0),\n\tGATE(CLK_WDT, \"wdt\", \"aclk66\", GATE_IP_PERIS, 19, 0, 0),\n\tGATE(CLK_RTC, \"rtc\", \"aclk66\", GATE_IP_PERIS, 20, 0, 0),\n\tGATE(CLK_TMU, \"tmu\", \"aclk66\", GATE_IP_PERIS, 21, 0, 0),\n\n\tGATE(CLK_SCLK_MMC0, \"sclk_mmc0\", \"div_mmc_pre0\",\n\t\t\tSRC_MASK_FSYS, 0, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_MMC1, \"sclk_mmc1\", \"div_mmc_pre1\",\n\t\t\tSRC_MASK_FSYS, 4, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_MMC2, \"sclk_mmc2\", \"div_mmc_pre2\",\n\t\t\tSRC_MASK_FSYS, 8, CLK_SET_RATE_PARENT, 0),\n\n\tGATE(CLK_MMC0, \"sdmmc0\", \"aclk200\", GATE_BUS_FSYS0, 12, 0, 0),\n\tGATE(CLK_MMC1, \"sdmmc1\", \"aclk200\", GATE_BUS_FSYS0, 13, 0, 0),\n\tGATE(CLK_MMC2, \"sdmmc2\", \"aclk200\", GATE_BUS_FSYS0, 14, 0, 0),\n\tGATE(CLK_PDMA1, \"pdma1\", \"aclk200\", GATE_BUS_FSYS0, 2, 0, 0),\n\tGATE(CLK_PDMA0, \"pdma0\", \"aclk200\", GATE_BUS_FSYS0, 1, 0, 0),\n\n\tGATE(CLK_SCLK_USBPHY301, \"sclk_usbphy301\", \"dout_usbphy301\",\n\t     GATE_TOP_SCLK_FSYS, 7, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_USBPHY300, \"sclk_usbphy300\", \"dout_usbphy300\",\n\t     GATE_TOP_SCLK_FSYS, 8, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_USBD300, \"sclk_usbd300\", \"dout_usbd300\",\n\t     GATE_TOP_SCLK_FSYS, 9, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_USBD301, \"sclk_usbd301\", \"dout_usbd301\",\n\t     GATE_TOP_SCLK_FSYS, 10, CLK_SET_RATE_PARENT, 0),\n\n\tGATE(CLK_SCLK_PWM, \"sclk_pwm\", \"dout_pwm\",\n\t     GATE_TOP_SCLK_PERIC, 11, CLK_SET_RATE_PARENT, 0),\n\n\tGATE(CLK_UART0, \"uart0\", \"aclk66\", GATE_IP_PERIC, 0, 0, 0),\n\tGATE(CLK_UART1, \"uart1\", \"aclk66\", GATE_IP_PERIC, 1, 0, 0),\n\tGATE(CLK_UART2, \"uart2\", \"aclk66\", GATE_IP_PERIC, 2, 0, 0),\n\tGATE(CLK_UART3, \"uart3\", \"aclk66\", GATE_IP_PERIC, 3, 0, 0),\n\tGATE(CLK_I2C0, \"i2c0\", \"aclk66\", GATE_IP_PERIC, 6, 0, 0),\n\tGATE(CLK_I2C1, \"i2c1\", \"aclk66\", GATE_IP_PERIC, 7, 0, 0),\n\tGATE(CLK_I2C2, \"i2c2\", \"aclk66\", GATE_IP_PERIC, 8, 0, 0),\n\tGATE(CLK_I2C3, \"i2c3\", \"aclk66\", GATE_IP_PERIC, 9, 0, 0),\n\tGATE(CLK_USI0, \"usi0\", \"aclk66\", GATE_IP_PERIC, 10, 0, 0),\n\tGATE(CLK_USI1, \"usi1\", \"aclk66\", GATE_IP_PERIC, 11, 0, 0),\n\tGATE(CLK_USI2, \"usi2\", \"aclk66\", GATE_IP_PERIC, 12, 0, 0),\n\tGATE(CLK_USI3, \"usi3\", \"aclk66\", GATE_IP_PERIC, 13, 0, 0),\n\tGATE(CLK_TSADC, \"tsadc\", \"aclk66\", GATE_IP_PERIC, 15, 0, 0),\n\tGATE(CLK_PWM, \"pwm\", \"aclk66\", GATE_IP_PERIC, 24, 0, 0),\n\n\tGATE(CLK_SCLK_UART0, \"sclk_uart0\", \"div_uart0\",\n\t\t\tSRC_MASK_PERIC0, 0, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_UART1, \"sclk_uart1\", \"div_uart1\",\n\t\t\tSRC_MASK_PERIC0, 4, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_UART2, \"sclk_uart2\", \"div_uart2\",\n\t\t\tSRC_MASK_PERIC0, 8, CLK_SET_RATE_PARENT, 0),\n\tGATE(CLK_SCLK_UART3, \"sclk_uart3\", \"div_uart3\",\n\t\t\tSRC_MASK_PERIC0, 12, CLK_SET_RATE_PARENT, 0),\n\n\tGATE(CLK_USBH20, \"usbh20\", \"aclk200_fsys\", GATE_IP_FSYS, 18, 0, 0),\n\tGATE(CLK_USBD300, \"usbd300\", \"aclk200_fsys\", GATE_IP_FSYS, 19, 0, 0),\n\tGATE(CLK_USBD301, \"usbd301\", \"aclk200_fsys\", GATE_IP_FSYS, 20, 0, 0),\n};\n\nstatic const struct samsung_pll_rate_table exynos5410_pll2550x_24mhz_tbl[] __initconst = {\n\tPLL_36XX_RATE(24 * MHZ, 400000000U, 200, 3, 2, 0),\n\tPLL_36XX_RATE(24 * MHZ, 333000000U, 111, 2, 2, 0),\n\tPLL_36XX_RATE(24 * MHZ, 300000000U, 100, 2, 2, 0),\n\tPLL_36XX_RATE(24 * MHZ, 266000000U, 266, 3, 3, 0),\n\tPLL_36XX_RATE(24 * MHZ, 200000000U, 200, 3, 3, 0),\n\tPLL_36XX_RATE(24 * MHZ, 192000000U, 192, 3, 3, 0),\n\tPLL_36XX_RATE(24 * MHZ, 166000000U, 166, 3, 3, 0),\n\tPLL_36XX_RATE(24 * MHZ, 133000000U, 266, 3, 4, 0),\n\tPLL_36XX_RATE(24 * MHZ, 100000000U, 200, 3, 4, 0),\n\tPLL_36XX_RATE(24 * MHZ, 66000000U,  176, 2, 5, 0),\n};\n\nstatic struct samsung_pll_clock exynos5410_plls[nr_plls] __initdata = {\n\t[apll] = PLL(pll_35xx, CLK_FOUT_APLL, \"fout_apll\", \"fin_pll\", APLL_LOCK,\n\t\tAPLL_CON0, NULL),\n\t[cpll] = PLL(pll_35xx, CLK_FOUT_CPLL, \"fout_cpll\", \"fin_pll\", CPLL_LOCK,\n\t\tCPLL_CON0, NULL),\n\t[epll] = PLL(pll_2650x, CLK_FOUT_EPLL, \"fout_epll\", \"fin_pll\", EPLL_LOCK,\n\t\tEPLL_CON0, NULL),\n\t[mpll] = PLL(pll_35xx, CLK_FOUT_MPLL, \"fout_mpll\", \"fin_pll\", MPLL_LOCK,\n\t\tMPLL_CON0, NULL),\n\t[bpll] = PLL(pll_35xx, CLK_FOUT_BPLL, \"fout_bpll\", \"fin_pll\", BPLL_LOCK,\n\t\tBPLL_CON0, NULL),\n\t[kpll] = PLL(pll_35xx, CLK_FOUT_KPLL, \"fout_kpll\", \"fin_pll\", KPLL_LOCK,\n\t\tKPLL_CON0, NULL),\n};\n\nstatic const struct samsung_cmu_info cmu __initconst = {\n\t.pll_clks\t= exynos5410_plls,\n\t.nr_pll_clks\t= ARRAY_SIZE(exynos5410_plls),\n\t.mux_clks\t= exynos5410_mux_clks,\n\t.nr_mux_clks\t= ARRAY_SIZE(exynos5410_mux_clks),\n\t.div_clks\t= exynos5410_div_clks,\n\t.nr_div_clks\t= ARRAY_SIZE(exynos5410_div_clks),\n\t.gate_clks\t= exynos5410_gate_clks,\n\t.nr_gate_clks\t= ARRAY_SIZE(exynos5410_gate_clks),\n\t.nr_clk_ids\t= CLKS_NR,\n};\n\n \nstatic void __init exynos5410_clk_init(struct device_node *np)\n{\n\tstruct clk *xxti = of_clk_get(np, 0);\n\n\tif (!IS_ERR(xxti) && clk_get_rate(xxti) == 24 * MHZ)\n\t\texynos5410_plls[epll].rate_table = exynos5410_pll2550x_24mhz_tbl;\n\n\tsamsung_cmu_register_one(np, &cmu);\n\n\tpr_debug(\"Exynos5410: clock setup completed.\\n\");\n}\nCLK_OF_DECLARE(exynos5410_clk, \"samsung,exynos5410-clock\", exynos5410_clk_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}