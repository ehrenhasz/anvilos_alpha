{
  "module_name": "clk-ma35d1.c",
  "hash_id": "552d2f4d14be6176b270801e904263df016c18d15cceb0edd8202390ad00b9d0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/nuvoton/clk-ma35d1.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/mfd/syscon.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/spinlock.h>\n#include <dt-bindings/clock/nuvoton,ma35d1-clk.h>\n\n#include \"clk-ma35d1.h\"\n\nstatic DEFINE_SPINLOCK(ma35d1_lock);\n\n#define PLL_MAX_NUM\t\t5\n\n \n#define REG_CLK_PWRCTL\t\t0x00\n#define REG_CLK_SYSCLK0\t\t0x04\n#define REG_CLK_SYSCLK1\t\t0x08\n#define REG_CLK_APBCLK0\t\t0x0c\n#define REG_CLK_APBCLK1\t\t0x10\n#define REG_CLK_APBCLK2\t\t0x14\n#define REG_CLK_CLKSEL0\t\t0x18\n#define REG_CLK_CLKSEL1\t\t0x1c\n#define REG_CLK_CLKSEL2\t\t0x20\n#define REG_CLK_CLKSEL3\t\t0x24\n#define REG_CLK_CLKSEL4\t\t0x28\n#define REG_CLK_CLKDIV0\t\t0x2c\n#define REG_CLK_CLKDIV1\t\t0x30\n#define REG_CLK_CLKDIV2\t\t0x34\n#define REG_CLK_CLKDIV3\t\t0x38\n#define REG_CLK_CLKDIV4\t\t0x3c\n#define REG_CLK_CLKOCTL\t\t0x40\n#define REG_CLK_STATUS\t\t0x50\n#define REG_CLK_PLL0CTL0\t0x60\n#define REG_CLK_PLL2CTL0\t0x80\n#define REG_CLK_PLL2CTL1\t0x84\n#define REG_CLK_PLL2CTL2\t0x88\n#define REG_CLK_PLL3CTL0\t0x90\n#define REG_CLK_PLL3CTL1\t0x94\n#define REG_CLK_PLL3CTL2\t0x98\n#define REG_CLK_PLL4CTL0\t0xa0\n#define REG_CLK_PLL4CTL1\t0xa4\n#define REG_CLK_PLL4CTL2\t0xa8\n#define REG_CLK_PLL5CTL0\t0xb0\n#define REG_CLK_PLL5CTL1\t0xb4\n#define REG_CLK_PLL5CTL2\t0xb8\n#define REG_CLK_CLKDCTL\t\t0xc0\n#define REG_CLK_CLKDSTS\t\t0xc4\n#define REG_CLK_CDUPB\t\t0xc8\n#define REG_CLK_CDLOWB\t\t0xcc\n#define REG_CLK_CKFLTRCTL\t0xd0\n#define REG_CLK_TESTCLK\t\t0xf0\n#define REG_CLK_PLLCTL\t\t0x40\n\n#define PLL_MODE_INT            0\n#define PLL_MODE_FRAC           1\n#define PLL_MODE_SS             2\n\nstatic const struct clk_parent_data ca35clk_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"capll\", },\n\t{ .fw_name = \"ddrpll\", },\n};\n\nstatic const struct clk_parent_data sysclk0_sel_clks[] = {\n\t{ .fw_name = \"epll_div2\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data sysclk1_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data axiclk_sel_clks[] = {\n\t{ .fw_name = \"capll_div2\", },\n\t{ .fw_name = \"capll_div4\", },\n};\n\nstatic const struct clk_parent_data ccap_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"vpll\", },\n\t{ .fw_name = \"apll\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data sdh_sel_clks[] = {\n\t{ .fw_name = \"syspll\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data dcu_sel_clks[] = {\n\t{ .fw_name = \"epll_div2\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data gfx_sel_clks[] = {\n\t{ .fw_name = \"epll\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data dbg_sel_clks[] = {\n\t{ .fw_name = \"hirc\", },\n\t{ .fw_name = \"syspll\", },\n};\n\nstatic const struct clk_parent_data timer0_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk0\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer1_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk0\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer2_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk1\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer3_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk1\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer4_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk2\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer5_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk2\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer6_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk0\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer7_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk0\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer8_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk1\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer9_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk1\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer10_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk2\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data timer11_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk2\", },\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"lirc\", },\n\t{ .index = -1, },\n\t{ .fw_name = \"hirc\", },\n};\n\nstatic const struct clk_parent_data uart_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"sysclk1_div2\", },\n};\n\nstatic const struct clk_parent_data wdt0_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk3_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data wdt1_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk3_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data wdt2_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"pclk4_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data wwdt0_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"pclk3_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data wwdt1_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"pclk3_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data wwdt2_sel_clks[] = {\n\t{ .index = -1, },\n\t{ .index = -1, },\n\t{ .fw_name = \"pclk4_div4096\", },\n\t{ .fw_name = \"lirc\", },\n};\n\nstatic const struct clk_parent_data spi0_sel_clks[] = {\n\t{ .fw_name = \"pclk1\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data spi1_sel_clks[] = {\n\t{ .fw_name = \"pclk2\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data spi2_sel_clks[] = {\n\t{ .fw_name = \"pclk1\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data spi3_sel_clks[] = {\n\t{ .fw_name = \"pclk2\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data qspi0_sel_clks[] = {\n\t{ .fw_name = \"pclk0\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data qspi1_sel_clks[] = {\n\t{ .fw_name = \"pclk0\", },\n\t{ .fw_name = \"apll\", },\n};\n\nstatic const struct clk_parent_data i2s0_sel_clks[] = {\n\t{ .fw_name = \"apll\", },\n\t{ .fw_name = \"sysclk1_div2\", },\n};\n\nstatic const struct clk_parent_data i2s1_sel_clks[] = {\n\t{ .fw_name = \"apll\", },\n\t{ .fw_name = \"sysclk1_div2\", },\n};\n\nstatic const struct clk_parent_data can_sel_clks[] = {\n\t{ .fw_name = \"apll\", },\n\t{ .fw_name = \"vpll\", },\n};\n\nstatic const struct clk_parent_data cko_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n\t{ .fw_name = \"hirc\", },\n\t{ .fw_name = \"lirc\", },\n\t{ .fw_name = \"capll_div4\", },\n\t{ .fw_name = \"syspll\", },\n\t{ .fw_name = \"ddrpll\", },\n\t{ .fw_name = \"epll_div2\", },\n\t{ .fw_name = \"apll\", },\n\t{ .fw_name = \"vpll\", },\n};\n\nstatic const struct clk_parent_data smc_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"pclk4\", },\n};\n\nstatic const struct clk_parent_data kpi_sel_clks[] = {\n\t{ .fw_name = \"hxt\", },\n\t{ .fw_name = \"lxt\", },\n};\n\nstatic const struct clk_div_table ip_div_table[] = {\n\t{0, 2}, {1, 4}, {2, 6}, {3, 8}, {4, 10},\n\t{5, 12}, {6, 14}, {7, 16}, {0, 0},\n};\n\nstatic const struct clk_div_table eadc_div_table[] = {\n\t{0, 2}, {1, 4}, {2, 6}, {3, 8}, {4, 10},\n\t{5, 12}, {6, 14}, {7, 16}, {8, 18},\n\t{9, 20}, {10, 22}, {11, 24}, {12, 26},\n\t{13, 28}, {14, 30}, {15, 32}, {0, 0},\n};\n\nstatic struct clk_hw *ma35d1_clk_fixed(const char *name, int rate)\n{\n\treturn clk_hw_register_fixed_rate(NULL, name, NULL, 0, rate);\n}\n\nstatic struct clk_hw *ma35d1_clk_mux_parent(struct device *dev, const char *name,\n\t\t\t\t\t    void __iomem *reg, u8 shift, u8 width,\n\t\t\t\t\t    const struct clk_parent_data *pdata,\n\t\t\t\t\t    int num_pdata)\n{\n\treturn clk_hw_register_mux_parent_data(dev, name, pdata, num_pdata,\n\t\t\t\t\t       CLK_SET_RATE_NO_REPARENT, reg, shift,\n\t\t\t\t\t       width, 0, &ma35d1_lock);\n}\n\nstatic struct clk_hw *ma35d1_clk_mux(struct device *dev, const char *name,\n\t\t\t\t     void __iomem *reg, u8 shift, u8 width,\n\t\t\t\t     const struct clk_parent_data *pdata,\n\t\t\t\t     int num_pdata)\n{\n\treturn clk_hw_register_mux_parent_data(dev, name, pdata, num_pdata,\n\t\t\t\t\t       CLK_SET_RATE_NO_REPARENT, reg, shift,\n\t\t\t\t\t       width, 0, &ma35d1_lock);\n}\n\nstatic struct clk_hw *ma35d1_clk_divider(struct device *dev, const char *name,\n\t\t\t\t\t const char *parent, void __iomem *reg,\n\t\t\t\t\t u8 shift, u8 width)\n{\n\treturn devm_clk_hw_register_divider(dev, name, parent, CLK_SET_RATE_PARENT,\n\t\t\t\t\t    reg, shift, width, 0, &ma35d1_lock);\n}\n\nstatic struct clk_hw *ma35d1_clk_divider_pow2(struct device *dev, const char *name,\n\t\t\t\t\t      const char *parent, void __iomem *reg,\n\t\t\t\t\t      u8 shift, u8 width)\n{\n\treturn devm_clk_hw_register_divider(dev, name, parent,\n\t\t\t\t\t    CLK_DIVIDER_POWER_OF_TWO, reg, shift,\n\t\t\t\t\t    width, 0, &ma35d1_lock);\n}\n\nstatic struct clk_hw *ma35d1_clk_divider_table(struct device *dev, const char *name,\n\t\t\t\t\t       const char *parent, void __iomem *reg,\n\t\t\t\t\t       u8 shift, u8 width,\n\t\t\t\t\t       const struct clk_div_table *table)\n{\n\treturn devm_clk_hw_register_divider_table(dev, name, parent, 0,\n\t\t\t\t\t\t  reg, shift, width, 0,\n\t\t\t\t\t\t  table, &ma35d1_lock);\n}\n\nstatic struct clk_hw *ma35d1_clk_fixed_factor(struct device *dev, const char *name,\n\t\t\t\t\t      const char *parent, unsigned int mult,\n\t\t\t\t\t      unsigned int div)\n{\n\treturn devm_clk_hw_register_fixed_factor(dev, name, parent,\n\t\t\t\t\t    CLK_SET_RATE_PARENT, mult, div);\n}\n\nstatic struct clk_hw *ma35d1_clk_gate(struct device *dev, const char *name, const char *parent,\n\t\t\t\t      void __iomem *reg, u8 shift)\n{\n\treturn devm_clk_hw_register_gate(dev, name, parent, CLK_SET_RATE_PARENT,\n\t\t\t\t    reg, shift, 0, &ma35d1_lock);\n}\n\nstatic int ma35d1_get_pll_setting(struct device_node *clk_node, u32 *pllmode)\n{\n\tconst char *of_str;\n\tint i;\n\n\tfor (i = 0; i < PLL_MAX_NUM; i++) {\n\t\tif (of_property_read_string_index(clk_node, \"nuvoton,pll-mode\", i, &of_str))\n\t\t\treturn -EINVAL;\n\t\tif (!strcmp(of_str, \"integer\"))\n\t\t\tpllmode[i] = PLL_MODE_INT;\n\t\telse if (!strcmp(of_str, \"fractional\"))\n\t\t\tpllmode[i] = PLL_MODE_FRAC;\n\t\telse if (!strcmp(of_str, \"spread-spectrum\"))\n\t\t\tpllmode[i] = PLL_MODE_SS;\n\t\telse\n\t\t\treturn -EINVAL;\n\t}\n\treturn 0;\n}\n\nstatic int ma35d1_clocks_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tstruct device_node *clk_node = pdev->dev.of_node;\n\tvoid __iomem *clk_base;\n\tstatic struct clk_hw **hws;\n\tstatic struct clk_hw_onecell_data *ma35d1_hw_data;\n\tu32 pllmode[PLL_MAX_NUM];\n\tint ret;\n\n\tma35d1_hw_data = devm_kzalloc(dev,\n\t\t\t\t      struct_size(ma35d1_hw_data, hws, CLK_MAX_IDX),\n\t\t\t\t      GFP_KERNEL);\n\tif (!ma35d1_hw_data)\n\t\treturn -ENOMEM;\n\n\tma35d1_hw_data->num = CLK_MAX_IDX;\n\thws = ma35d1_hw_data->hws;\n\n\tclk_base = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(clk_base))\n\t\treturn PTR_ERR(clk_base);\n\n\tret = ma35d1_get_pll_setting(clk_node, pllmode);\n\tif (ret < 0) {\n\t\tdev_err(dev, \"Invalid PLL setting!\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\thws[HXT] = ma35d1_clk_fixed(\"hxt\", 24000000);\n\thws[HXT_GATE] = ma35d1_clk_gate(dev, \"hxt_gate\", \"hxt\",\n\t\t\t\t\tclk_base + REG_CLK_PWRCTL, 0);\n\thws[LXT] = ma35d1_clk_fixed(\"lxt\", 32768);\n\thws[LXT_GATE] = ma35d1_clk_gate(dev, \"lxt_gate\", \"lxt\",\n\t\t\t\t\tclk_base + REG_CLK_PWRCTL, 1);\n\thws[HIRC] = ma35d1_clk_fixed(\"hirc\", 12000000);\n\thws[HIRC_GATE] = ma35d1_clk_gate(dev, \"hirc_gate\", \"hirc\",\n\t\t\t\t\t clk_base + REG_CLK_PWRCTL, 2);\n\thws[LIRC] = ma35d1_clk_fixed(\"lirc\", 32000);\n\thws[LIRC_GATE] = ma35d1_clk_gate(dev, \"lirc_gate\", \"lirc\",\n\t\t\t\t\t clk_base + REG_CLK_PWRCTL, 3);\n\n\thws[CAPLL] = ma35d1_reg_clk_pll(dev, CAPLL, pllmode[0], \"capll\",\n\t\t\t\t\thws[HXT], clk_base + REG_CLK_PLL0CTL0);\n\thws[SYSPLL] = ma35d1_clk_fixed(\"syspll\", 180000000);\n\thws[DDRPLL] = ma35d1_reg_clk_pll(dev, DDRPLL, pllmode[1], \"ddrpll\",\n\t\t\t\t\thws[HXT], clk_base + REG_CLK_PLL2CTL0);\n\thws[APLL] = ma35d1_reg_clk_pll(dev, APLL, pllmode[2], \"apll\",\n\t\t\t\t       hws[HXT], clk_base + REG_CLK_PLL3CTL0);\n\thws[EPLL] = ma35d1_reg_clk_pll(dev, EPLL, pllmode[3], \"epll\",\n\t\t\t\t       hws[HXT], clk_base + REG_CLK_PLL4CTL0);\n\thws[VPLL] = ma35d1_reg_clk_pll(dev, VPLL, pllmode[4], \"vpll\",\n\t\t\t\t       hws[HXT], clk_base + REG_CLK_PLL5CTL0);\n\n\thws[EPLL_DIV2] = ma35d1_clk_fixed_factor(dev, \"epll_div2\", \"epll\", 1, 2);\n\thws[EPLL_DIV4] = ma35d1_clk_fixed_factor(dev, \"epll_div4\", \"epll\", 1, 4);\n\thws[EPLL_DIV8] = ma35d1_clk_fixed_factor(dev, \"epll_div8\", \"epll\", 1, 8);\n\n\thws[CA35CLK_MUX] = ma35d1_clk_mux_parent(dev, \"ca35clk_mux\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKSEL0, 0, 2,\n\t\t\t\t\t\t ca35clk_sel_clks,\n\t\t\t\t\t\t ARRAY_SIZE(ca35clk_sel_clks));\n\thws[AXICLK_DIV2] = ma35d1_clk_fixed_factor(dev, \"capll_div2\", \"ca35clk_mux\", 1, 2);\n\thws[AXICLK_DIV4] = ma35d1_clk_fixed_factor(dev, \"capll_div4\", \"ca35clk_mux\", 1, 4);\n\n\thws[AXICLK_MUX] = ma35d1_clk_mux(dev, \"axiclk_mux\", clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t 26, 1, axiclk_sel_clks,\n\t\t\t\t\t ARRAY_SIZE(axiclk_sel_clks));\n\thws[SYSCLK0_MUX] = ma35d1_clk_mux(dev, \"sysclk0_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t\t  2, 1, sysclk0_sel_clks,\n\t\t\t\t\t  ARRAY_SIZE(sysclk0_sel_clks));\n\thws[SYSCLK1_MUX] = ma35d1_clk_mux(dev, \"sysclk1_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t\t  4, 1, sysclk1_sel_clks,\n\t\t\t\t\t  ARRAY_SIZE(sysclk1_sel_clks));\n\thws[SYSCLK1_DIV2] = ma35d1_clk_fixed_factor(dev, \"sysclk1_div2\", \"sysclk1_mux\", 1, 2);\n\n\t \n\thws[HCLK0] = ma35d1_clk_fixed_factor(dev, \"hclk0\", \"sysclk1_mux\", 1, 1);\n\thws[HCLK1] = ma35d1_clk_fixed_factor(dev, \"hclk1\", \"sysclk1_mux\", 1, 1);\n\thws[HCLK2] = ma35d1_clk_fixed_factor(dev, \"hclk2\", \"sysclk1_mux\", 1, 1);\n\thws[PCLK0] = ma35d1_clk_fixed_factor(dev, \"pclk0\", \"sysclk1_mux\", 1, 1);\n\thws[PCLK1] = ma35d1_clk_fixed_factor(dev, \"pclk1\", \"sysclk1_mux\", 1, 1);\n\thws[PCLK2] = ma35d1_clk_fixed_factor(dev, \"pclk2\", \"sysclk1_mux\", 1, 1);\n\n\thws[HCLK3] = ma35d1_clk_fixed_factor(dev, \"hclk3\", \"sysclk1_mux\", 1, 2);\n\thws[PCLK3] = ma35d1_clk_fixed_factor(dev, \"pclk3\", \"sysclk1_mux\", 1, 2);\n\thws[PCLK4] = ma35d1_clk_fixed_factor(dev, \"pclk4\", \"sysclk1_mux\", 1, 2);\n\n\thws[USBPHY0] = ma35d1_clk_fixed(\"usbphy0\", 480000000);\n\thws[USBPHY1] = ma35d1_clk_fixed(\"usbphy1\", 480000000);\n\n\t \n\thws[DDR0_GATE] = ma35d1_clk_gate(dev, \"ddr0_gate\", \"ddrpll\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 4);\n\thws[DDR6_GATE] = ma35d1_clk_gate(dev, \"ddr6_gate\", \"ddrpll\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 5);\n\n\thws[CAN0_MUX] = ma35d1_clk_mux(dev, \"can0_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       16, 1, can_sel_clks, ARRAY_SIZE(can_sel_clks));\n\thws[CAN0_DIV] = ma35d1_clk_divider_table(dev, \"can0_div\", \"can0_mux\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t\t 0, 3, ip_div_table);\n\thws[CAN0_GATE] = ma35d1_clk_gate(dev, \"can0_gate\", \"can0_div\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 8);\n\thws[CAN1_MUX] = ma35d1_clk_mux(dev, \"can1_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       17, 1, can_sel_clks, ARRAY_SIZE(can_sel_clks));\n\thws[CAN1_DIV] = ma35d1_clk_divider_table(dev, \"can1_div\", \"can1_mux\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t\t 4, 3, ip_div_table);\n\thws[CAN1_GATE] = ma35d1_clk_gate(dev, \"can1_gate\", \"can1_div\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 9);\n\thws[CAN2_MUX] = ma35d1_clk_mux(dev, \"can2_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       18, 1, can_sel_clks, ARRAY_SIZE(can_sel_clks));\n\thws[CAN2_DIV] = ma35d1_clk_divider_table(dev, \"can2_div\", \"can2_mux\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t\t 8, 3, ip_div_table);\n\thws[CAN2_GATE] = ma35d1_clk_gate(dev, \"can2_gate\", \"can2_div\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 10);\n\thws[CAN3_MUX] = ma35d1_clk_mux(dev, \"can3_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       19, 1, can_sel_clks, ARRAY_SIZE(can_sel_clks));\n\thws[CAN3_DIV] = ma35d1_clk_divider_table(dev, \"can3_div\", \"can3_mux\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t\t 12, 3, ip_div_table);\n\thws[CAN3_GATE] = ma35d1_clk_gate(dev, \"can3_gate\", \"can3_div\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 11);\n\n\thws[SDH0_MUX] = ma35d1_clk_mux(dev, \"sdh0_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t       16, 2, sdh_sel_clks, ARRAY_SIZE(sdh_sel_clks));\n\thws[SDH0_GATE] = ma35d1_clk_gate(dev, \"sdh0_gate\", \"sdh0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 16);\n\thws[SDH1_MUX] = ma35d1_clk_mux(dev, \"sdh1_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t       18, 2, sdh_sel_clks, ARRAY_SIZE(sdh_sel_clks));\n\thws[SDH1_GATE] = ma35d1_clk_gate(dev, \"sdh1_gate\", \"sdh1_mux\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 17);\n\n\thws[NAND_GATE] = ma35d1_clk_gate(dev, \"nand_gate\", \"hclk1\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 18);\n\n\thws[USBD_GATE] = ma35d1_clk_gate(dev, \"usbd_gate\", \"usbphy0\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 19);\n\thws[USBH_GATE] = ma35d1_clk_gate(dev, \"usbh_gate\", \"usbphy0\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 20);\n\thws[HUSBH0_GATE] = ma35d1_clk_gate(dev, \"husbh0_gate\", \"usbphy0\",\n\t\t\t\t\t   clk_base + REG_CLK_SYSCLK0, 21);\n\thws[HUSBH1_GATE] = ma35d1_clk_gate(dev, \"husbh1_gate\", \"usbphy0\",\n\t\t\t\t\t   clk_base + REG_CLK_SYSCLK0, 22);\n\n\thws[GFX_MUX] = ma35d1_clk_mux(dev, \"gfx_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t      26, 1, gfx_sel_clks, ARRAY_SIZE(gfx_sel_clks));\n\thws[GFX_GATE] = ma35d1_clk_gate(dev, \"gfx_gate\", \"gfx_mux\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK0, 24);\n\thws[VC8K_GATE] = ma35d1_clk_gate(dev, \"vc8k_gate\", \"sysclk0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK0, 25);\n\thws[DCU_MUX] = ma35d1_clk_mux(dev, \"dcu_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t      24, 1, dcu_sel_clks, ARRAY_SIZE(dcu_sel_clks));\n\thws[DCU_GATE] = ma35d1_clk_gate(dev, \"dcu_gate\", \"dcu_mux\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK0, 26);\n\thws[DCUP_DIV] = ma35d1_clk_divider_table(dev, \"dcup_div\", \"vpll\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV0,\n\t\t\t\t\t\t 16, 3, ip_div_table);\n\n\thws[EMAC0_GATE] = ma35d1_clk_gate(dev, \"emac0_gate\", \"epll_div2\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK0, 27);\n\thws[EMAC1_GATE] = ma35d1_clk_gate(dev, \"emac1_gate\", \"epll_div2\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK0, 28);\n\n\thws[CCAP0_MUX] = ma35d1_clk_mux(dev, \"ccap0_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t\t12, 1, ccap_sel_clks, ARRAY_SIZE(ccap_sel_clks));\n\thws[CCAP0_DIV] = ma35d1_clk_divider(dev, \"ccap0_div\", \"ccap0_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1, 8, 4);\n\thws[CCAP0_GATE] = ma35d1_clk_gate(dev, \"ccap0_gate\", \"ccap0_div\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK0, 29);\n\thws[CCAP1_MUX] = ma35d1_clk_mux(dev, \"ccap1_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t\t14, 1, ccap_sel_clks, ARRAY_SIZE(ccap_sel_clks));\n\thws[CCAP1_DIV] = ma35d1_clk_divider(dev, \"ccap1_div\", \"ccap1_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t    12, 4);\n\thws[CCAP1_GATE] = ma35d1_clk_gate(dev, \"ccap1_gate\", \"ccap1_div\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK0, 30);\n\n\thws[PDMA0_GATE] = ma35d1_clk_gate(dev, \"pdma0_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 0);\n\thws[PDMA1_GATE] = ma35d1_clk_gate(dev, \"pdma1_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 1);\n\thws[PDMA2_GATE] = ma35d1_clk_gate(dev, \"pdma2_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 2);\n\thws[PDMA3_GATE] = ma35d1_clk_gate(dev, \"pdma3_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 3);\n\n\thws[WH0_GATE] = ma35d1_clk_gate(dev, \"wh0_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 4);\n\thws[WH1_GATE] = ma35d1_clk_gate(dev, \"wh1_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 5);\n\n\thws[HWS_GATE] = ma35d1_clk_gate(dev, \"hws_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 6);\n\n\thws[EBI_GATE] = ma35d1_clk_gate(dev, \"ebi_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 7);\n\n\thws[SRAM0_GATE] = ma35d1_clk_gate(dev, \"sram0_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 8);\n\thws[SRAM1_GATE] = ma35d1_clk_gate(dev, \"sram1_gate\", \"hclk0\",\n\t\t\t\t\t  clk_base + REG_CLK_SYSCLK1, 9);\n\n\thws[ROM_GATE] = ma35d1_clk_gate(dev, \"rom_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 10);\n\n\thws[TRA_GATE] = ma35d1_clk_gate(dev, \"tra_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 11);\n\n\thws[DBG_MUX] = ma35d1_clk_mux(dev, \"dbg_mux\", clk_base + REG_CLK_CLKSEL0,\n\t\t\t\t      27, 1, dbg_sel_clks, ARRAY_SIZE(dbg_sel_clks));\n\thws[DBG_GATE] = ma35d1_clk_gate(dev, \"dbg_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 12);\n\n\thws[CKO_MUX] = ma35d1_clk_mux(dev, \"cko_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t      24, 4, cko_sel_clks, ARRAY_SIZE(cko_sel_clks));\n\thws[CKO_DIV] = ma35d1_clk_divider_pow2(dev, \"cko_div\", \"cko_mux\",\n\t\t\t\t\t       clk_base + REG_CLK_CLKOCTL, 0, 4);\n\thws[CKO_GATE] = ma35d1_clk_gate(dev, \"cko_gate\", \"cko_div\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 13);\n\n\thws[GTMR_GATE] = ma35d1_clk_gate(dev, \"gtmr_gate\", \"hirc\",\n\t\t\t\t\t clk_base + REG_CLK_SYSCLK1, 14);\n\n\thws[GPA_GATE] = ma35d1_clk_gate(dev, \"gpa_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 16);\n\thws[GPB_GATE] = ma35d1_clk_gate(dev, \"gpb_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 17);\n\thws[GPC_GATE] = ma35d1_clk_gate(dev, \"gpc_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 18);\n\thws[GPD_GATE] = ma35d1_clk_gate(dev, \"gpd_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 19);\n\thws[GPE_GATE] = ma35d1_clk_gate(dev, \"gpe_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 20);\n\thws[GPF_GATE] = ma35d1_clk_gate(dev, \"gpf_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 21);\n\thws[GPG_GATE] = ma35d1_clk_gate(dev, \"gpg_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 22);\n\thws[GPH_GATE] = ma35d1_clk_gate(dev, \"gph_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 23);\n\thws[GPI_GATE] = ma35d1_clk_gate(dev, \"gpi_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 24);\n\thws[GPJ_GATE] = ma35d1_clk_gate(dev, \"gpj_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 25);\n\thws[GPK_GATE] = ma35d1_clk_gate(dev, \"gpk_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 26);\n\thws[GPL_GATE] = ma35d1_clk_gate(dev, \"gpl_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 27);\n\thws[GPM_GATE] = ma35d1_clk_gate(dev, \"gpm_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 28);\n\thws[GPN_GATE] = ma35d1_clk_gate(dev, \"gpn_gate\", \"hclk0\",\n\t\t\t\t\tclk_base + REG_CLK_SYSCLK1, 29);\n\n\thws[TMR0_MUX] = ma35d1_clk_mux(dev, \"tmr0_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       0, 3, timer0_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer0_sel_clks));\n\thws[TMR0_GATE] = ma35d1_clk_gate(dev, \"tmr0_gate\", \"tmr0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 0);\n\thws[TMR1_MUX] = ma35d1_clk_mux(dev, \"tmr1_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       4, 3, timer1_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer1_sel_clks));\n\thws[TMR1_GATE] = ma35d1_clk_gate(dev, \"tmr1_gate\", \"tmr1_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 1);\n\thws[TMR2_MUX] = ma35d1_clk_mux(dev, \"tmr2_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       8, 3, timer2_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer2_sel_clks));\n\thws[TMR2_GATE] = ma35d1_clk_gate(dev, \"tmr2_gate\", \"tmr2_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 2);\n\thws[TMR3_MUX] = ma35d1_clk_mux(dev, \"tmr3_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       12, 3, timer3_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer3_sel_clks));\n\thws[TMR3_GATE] = ma35d1_clk_gate(dev, \"tmr3_gate\", \"tmr3_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 3);\n\thws[TMR4_MUX] = ma35d1_clk_mux(dev, \"tmr4_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       16, 3, timer4_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer4_sel_clks));\n\thws[TMR4_GATE] = ma35d1_clk_gate(dev, \"tmr4_gate\", \"tmr4_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 4);\n\thws[TMR5_MUX] = ma35d1_clk_mux(dev, \"tmr5_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       20, 3, timer5_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer5_sel_clks));\n\thws[TMR5_GATE] = ma35d1_clk_gate(dev, \"tmr5_gate\", \"tmr5_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 5);\n\thws[TMR6_MUX] = ma35d1_clk_mux(dev, \"tmr6_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       24, 3, timer6_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer6_sel_clks));\n\thws[TMR6_GATE] = ma35d1_clk_gate(dev, \"tmr6_gate\", \"tmr6_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 6);\n\thws[TMR7_MUX] = ma35d1_clk_mux(dev, \"tmr7_mux\", clk_base + REG_CLK_CLKSEL1,\n\t\t\t\t       28, 3, timer7_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer7_sel_clks));\n\thws[TMR7_GATE] = ma35d1_clk_gate(dev, \"tmr7_gate\", \"tmr7_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 7);\n\thws[TMR8_MUX] = ma35d1_clk_mux(dev, \"tmr8_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t       0, 3, timer8_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer8_sel_clks));\n\thws[TMR8_GATE] = ma35d1_clk_gate(dev, \"tmr8_gate\", \"tmr8_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 8);\n\thws[TMR9_MUX] = ma35d1_clk_mux(dev, \"tmr9_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t       4, 3, timer9_sel_clks,\n\t\t\t\t       ARRAY_SIZE(timer9_sel_clks));\n\thws[TMR9_GATE] = ma35d1_clk_gate(dev, \"tmr9_gate\", \"tmr9_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK0, 9);\n\thws[TMR10_MUX] = ma35d1_clk_mux(dev, \"tmr10_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t8, 3, timer10_sel_clks,\n\t\t\t\t\tARRAY_SIZE(timer10_sel_clks));\n\thws[TMR10_GATE] = ma35d1_clk_gate(dev, \"tmr10_gate\", \"tmr10_mux\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 10);\n\thws[TMR11_MUX] = ma35d1_clk_mux(dev, \"tmr11_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t12, 3, timer11_sel_clks,\n\t\t\t\t\tARRAY_SIZE(timer11_sel_clks));\n\thws[TMR11_GATE] = ma35d1_clk_gate(dev, \"tmr11_gate\", \"tmr11_mux\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 11);\n\n\thws[UART0_MUX] = ma35d1_clk_mux(dev, \"uart0_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t16, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART0_DIV] = ma35d1_clk_divider(dev, \"uart0_div\", \"uart0_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t    16, 4);\n\thws[UART0_GATE] = ma35d1_clk_gate(dev, \"uart0_gate\", \"uart0_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 12);\n\thws[UART1_MUX] = ma35d1_clk_mux(dev, \"uart1_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t18, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART1_DIV] = ma35d1_clk_divider(dev, \"uart1_div\", \"uart1_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t    20, 4);\n\thws[UART1_GATE] = ma35d1_clk_gate(dev, \"uart1_gate\", \"uart1_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 13);\n\thws[UART2_MUX] = ma35d1_clk_mux(dev, \"uart2_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t20, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART2_DIV] = ma35d1_clk_divider(dev, \"uart2_div\", \"uart2_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t    24, 4);\n\thws[UART2_GATE] = ma35d1_clk_gate(dev, \"uart2_gate\", \"uart2_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 14);\n\thws[UART3_MUX] = ma35d1_clk_mux(dev, \"uart3_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t22, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART3_DIV] = ma35d1_clk_divider(dev, \"uart3_div\", \"uart3_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t    28, 4);\n\thws[UART3_GATE] = ma35d1_clk_gate(dev, \"uart3_gate\", \"uart3_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 15);\n\thws[UART4_MUX] = ma35d1_clk_mux(dev, \"uart4_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t24, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART4_DIV] = ma35d1_clk_divider(dev, \"uart4_div\", \"uart4_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    0, 4);\n\thws[UART4_GATE] = ma35d1_clk_gate(dev, \"uart4_gate\", \"uart4_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 16);\n\thws[UART5_MUX] = ma35d1_clk_mux(dev, \"uart5_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t26, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART5_DIV] = ma35d1_clk_divider(dev, \"uart5_div\", \"uart5_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    4, 4);\n\thws[UART5_GATE] = ma35d1_clk_gate(dev, \"uart5_gate\", \"uart5_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 17);\n\thws[UART6_MUX] = ma35d1_clk_mux(dev, \"uart6_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t28, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART6_DIV] = ma35d1_clk_divider(dev, \"uart6_div\", \"uart6_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    8, 4);\n\thws[UART6_GATE] = ma35d1_clk_gate(dev, \"uart6_gate\", \"uart6_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 18);\n\thws[UART7_MUX] = ma35d1_clk_mux(dev, \"uart7_mux\", clk_base + REG_CLK_CLKSEL2,\n\t\t\t\t\t30, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART7_DIV] = ma35d1_clk_divider(dev, \"uart7_div\", \"uart7_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    12, 4);\n\thws[UART7_GATE] = ma35d1_clk_gate(dev, \"uart7_gate\", \"uart7_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 19);\n\thws[UART8_MUX] = ma35d1_clk_mux(dev, \"uart8_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t0, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART8_DIV] = ma35d1_clk_divider(dev, \"uart8_div\", \"uart8_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    16, 4);\n\thws[UART8_GATE] = ma35d1_clk_gate(dev, \"uart8_gate\", \"uart8_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 20);\n\thws[UART9_MUX] = ma35d1_clk_mux(dev, \"uart9_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t2, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART9_DIV] = ma35d1_clk_divider(dev, \"uart9_div\", \"uart9_mux\",\n\t\t\t\t\t    clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t    20, 4);\n\thws[UART9_GATE] = ma35d1_clk_gate(dev, \"uart9_gate\", \"uart9_div\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK0, 21);\n\thws[UART10_MUX] = ma35d1_clk_mux(dev, \"uart10_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 4, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART10_DIV] = ma35d1_clk_divider(dev, \"uart10_div\", \"uart10_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t     24, 4);\n\thws[UART10_GATE] = ma35d1_clk_gate(dev, \"uart10_gate\", \"uart10_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 22);\n\thws[UART11_MUX] = ma35d1_clk_mux(dev, \"uart11_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 6, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART11_DIV] = ma35d1_clk_divider(dev, \"uart11_div\", \"uart11_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV2,\n\t\t\t\t\t     28, 4);\n\thws[UART11_GATE] = ma35d1_clk_gate(dev, \"uart11_gate\", \"uart11_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 23);\n\thws[UART12_MUX] = ma35d1_clk_mux(dev, \"uart12_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 8, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART12_DIV] = ma35d1_clk_divider(dev, \"uart12_div\", \"uart12_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV3,\n\t\t\t\t\t     0, 4);\n\thws[UART12_GATE] = ma35d1_clk_gate(dev, \"uart12_gate\", \"uart12_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 24);\n\thws[UART13_MUX] = ma35d1_clk_mux(dev, \"uart13_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 10, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART13_DIV] = ma35d1_clk_divider(dev, \"uart13_div\", \"uart13_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV3,\n\t\t\t\t\t     4, 4);\n\thws[UART13_GATE] = ma35d1_clk_gate(dev, \"uart13_gate\", \"uart13_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 25);\n\thws[UART14_MUX] = ma35d1_clk_mux(dev, \"uart14_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 12, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART14_DIV] = ma35d1_clk_divider(dev, \"uart14_div\", \"uart14_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV3,\n\t\t\t\t\t     8, 4);\n\thws[UART14_GATE] = ma35d1_clk_gate(dev, \"uart14_gate\", \"uart14_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 26);\n\thws[UART15_MUX] = ma35d1_clk_mux(dev, \"uart15_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 14, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART15_DIV] = ma35d1_clk_divider(dev, \"uart15_div\", \"uart15_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV3,\n\t\t\t\t\t     12, 4);\n\thws[UART15_GATE] = ma35d1_clk_gate(dev, \"uart15_gate\", \"uart15_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 27);\n\thws[UART16_MUX] = ma35d1_clk_mux(dev, \"uart16_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t 16, 2, uart_sel_clks, ARRAY_SIZE(uart_sel_clks));\n\thws[UART16_DIV] = ma35d1_clk_divider(dev, \"uart16_div\", \"uart16_mux\",\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV3,\n\t\t\t\t\t     16, 4);\n\thws[UART16_GATE] = ma35d1_clk_gate(dev, \"uart16_gate\", \"uart16_div\",\n\t\t\t\t\t   clk_base + REG_CLK_APBCLK0, 28);\n\n\thws[RTC_GATE] = ma35d1_clk_gate(dev, \"rtc_gate\", \"lxt\",\n\t\t\t\t\tclk_base + REG_CLK_APBCLK0, 29);\n\thws[DDR_GATE] = ma35d1_clk_gate(dev, \"ddr_gate\", \"ddrpll\",\n\t\t\t\t\tclk_base + REG_CLK_APBCLK0, 30);\n\n\thws[KPI_MUX] = ma35d1_clk_mux(dev, \"kpi_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t      30, 1, kpi_sel_clks, ARRAY_SIZE(kpi_sel_clks));\n\thws[KPI_DIV] = ma35d1_clk_divider(dev, \"kpi_div\", \"kpi_mux\",\n\t\t\t\t\t  clk_base + REG_CLK_CLKDIV4,\n\t\t\t\t\t  24, 8);\n\thws[KPI_GATE] = ma35d1_clk_gate(dev, \"kpi_gate\", \"kpi_div\",\n\t\t\t\t\tclk_base + REG_CLK_APBCLK0, 31);\n\n\thws[I2C0_GATE] = ma35d1_clk_gate(dev, \"i2c0_gate\", \"pclk0\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 0);\n\thws[I2C1_GATE] = ma35d1_clk_gate(dev, \"i2c1_gate\", \"pclk1\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 1);\n\thws[I2C2_GATE] = ma35d1_clk_gate(dev, \"i2c2_gate\", \"pclk2\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 2);\n\thws[I2C3_GATE] = ma35d1_clk_gate(dev, \"i2c3_gate\", \"pclk0\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 3);\n\thws[I2C4_GATE] = ma35d1_clk_gate(dev, \"i2c4_gate\", \"pclk1\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 4);\n\thws[I2C5_GATE] = ma35d1_clk_gate(dev, \"i2c5_gate\", \"pclk2\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 5);\n\n\thws[QSPI0_MUX] = ma35d1_clk_mux(dev, \"qspi0_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t\t8, 2, qspi0_sel_clks, ARRAY_SIZE(qspi0_sel_clks));\n\thws[QSPI0_GATE] = ma35d1_clk_gate(dev, \"qspi0_gate\", \"qspi0_mux\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK1, 6);\n\thws[QSPI1_MUX] = ma35d1_clk_mux(dev, \"qspi1_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t\t10, 2, qspi1_sel_clks, ARRAY_SIZE(qspi1_sel_clks));\n\thws[QSPI1_GATE] = ma35d1_clk_gate(dev, \"qspi1_gate\", \"qspi1_mux\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK1, 7);\n\n\thws[SMC0_MUX] = ma35d1_clk_mux(dev, \"smc0_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t\t28, 1, smc_sel_clks, ARRAY_SIZE(smc_sel_clks));\n\thws[SMC0_DIV] = ma35d1_clk_divider(dev, \"smc0_div\", \"smc0_mux\",\n\t\t\t\t\t   clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t   0, 4);\n\thws[SMC0_GATE] = ma35d1_clk_gate(dev, \"smc0_gate\", \"smc0_div\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 12);\n\thws[SMC1_MUX] = ma35d1_clk_mux(dev, \"smc1_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t\t 29, 1, smc_sel_clks, ARRAY_SIZE(smc_sel_clks));\n\thws[SMC1_DIV] = ma35d1_clk_divider(dev, \"smc1_div\", \"smc1_mux\",\n\t\t\t\t\t   clk_base + REG_CLK_CLKDIV1,\n\t\t\t\t\t   4, 4);\n\thws[SMC1_GATE] = ma35d1_clk_gate(dev, \"smc1_gate\", \"smc1_div\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 13);\n\n\thws[WDT0_MUX] = ma35d1_clk_mux(dev, \"wdt0_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t       20, 2, wdt0_sel_clks, ARRAY_SIZE(wdt0_sel_clks));\n\thws[WDT0_GATE] = ma35d1_clk_gate(dev, \"wdt0_gate\", \"wdt0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 16);\n\thws[WDT1_MUX] = ma35d1_clk_mux(dev, \"wdt1_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t       24, 2, wdt1_sel_clks, ARRAY_SIZE(wdt1_sel_clks));\n\thws[WDT1_GATE] = ma35d1_clk_gate(dev, \"wdt1_gate\", \"wdt1_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK1, 17);\n\thws[WDT2_MUX] = ma35d1_clk_mux(dev, \"wdt2_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t       28, 2, wdt2_sel_clks, ARRAY_SIZE(wdt2_sel_clks));\n\thws[WDT2_GATE] = ma35d1_clk_gate(dev, \"wdt2_gate\", \"wdt2_mux\",\n\t\t\t\t       clk_base + REG_CLK_APBCLK1, 18);\n\n\thws[WWDT0_MUX] = ma35d1_clk_mux(dev, \"wwdt0_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t22, 2, wwdt0_sel_clks, ARRAY_SIZE(wwdt0_sel_clks));\n\thws[WWDT1_MUX] = ma35d1_clk_mux(dev, \"wwdt1_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t26, 2, wwdt1_sel_clks, ARRAY_SIZE(wwdt1_sel_clks));\n\thws[WWDT2_MUX] = ma35d1_clk_mux(dev, \"wwdt2_mux\", clk_base + REG_CLK_CLKSEL3,\n\t\t\t\t\t30, 2, wwdt2_sel_clks, ARRAY_SIZE(wwdt2_sel_clks));\n\n\thws[EPWM0_GATE] = ma35d1_clk_gate(dev, \"epwm0_gate\", \"pclk1\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK1, 24);\n\thws[EPWM1_GATE] = ma35d1_clk_gate(dev, \"epwm1_gate\", \"pclk2\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK1, 25);\n\thws[EPWM2_GATE] = ma35d1_clk_gate(dev, \"epwm2_gate\", \"pclk1\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK1, 26);\n\n\thws[I2S0_MUX] = ma35d1_clk_mux(dev, \"i2s0_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       12, 2, i2s0_sel_clks, ARRAY_SIZE(i2s0_sel_clks));\n\thws[I2S0_GATE] = ma35d1_clk_gate(dev, \"i2s0_gate\", \"i2s0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 0);\n\thws[I2S1_MUX] = ma35d1_clk_mux(dev, \"i2s1_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       14, 2, i2s1_sel_clks, ARRAY_SIZE(i2s1_sel_clks));\n\thws[I2S1_GATE] = ma35d1_clk_gate(dev, \"i2s1_gate\", \"i2s1_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 1);\n\n\thws[SSMCC_GATE] = ma35d1_clk_gate(dev, \"ssmcc_gate\", \"pclk3\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK2, 2);\n\thws[SSPCC_GATE] = ma35d1_clk_gate(dev, \"sspcc_gate\", \"pclk3\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK2, 3);\n\n\thws[SPI0_MUX] = ma35d1_clk_mux(dev, \"spi0_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       0, 2, spi0_sel_clks, ARRAY_SIZE(spi0_sel_clks));\n\thws[SPI0_GATE] = ma35d1_clk_gate(dev, \"spi0_gate\", \"spi0_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 4);\n\thws[SPI1_MUX] = ma35d1_clk_mux(dev, \"spi1_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       2, 2, spi1_sel_clks, ARRAY_SIZE(spi1_sel_clks));\n\thws[SPI1_GATE] = ma35d1_clk_gate(dev, \"spi1_gate\", \"spi1_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 5);\n\thws[SPI2_MUX] = ma35d1_clk_mux(dev, \"spi2_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       4, 2, spi2_sel_clks, ARRAY_SIZE(spi2_sel_clks));\n\thws[SPI2_GATE] = ma35d1_clk_gate(dev, \"spi2_gate\", \"spi2_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 6);\n\thws[SPI3_MUX] = ma35d1_clk_mux(dev, \"spi3_mux\", clk_base + REG_CLK_CLKSEL4,\n\t\t\t\t       6, 2, spi3_sel_clks, ARRAY_SIZE(spi3_sel_clks));\n\thws[SPI3_GATE] = ma35d1_clk_gate(dev, \"spi3_gate\", \"spi3_mux\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 7);\n\n\thws[ECAP0_GATE] = ma35d1_clk_gate(dev, \"ecap0_gate\", \"pclk1\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK2, 8);\n\thws[ECAP1_GATE] = ma35d1_clk_gate(dev, \"ecap1_gate\", \"pclk2\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK2, 9);\n\thws[ECAP2_GATE] = ma35d1_clk_gate(dev, \"ecap2_gate\", \"pclk1\",\n\t\t\t\t\t  clk_base + REG_CLK_APBCLK2, 10);\n\n\thws[QEI0_GATE] = ma35d1_clk_gate(dev, \"qei0_gate\", \"pclk1\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 12);\n\thws[QEI1_GATE] = ma35d1_clk_gate(dev, \"qei1_gate\", \"pclk2\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 13);\n\thws[QEI2_GATE] = ma35d1_clk_gate(dev, \"qei2_gate\", \"pclk1\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 14);\n\n\thws[ADC_DIV] = ma35d1_reg_adc_clkdiv(dev, \"adc_div\", hws[PCLK0],\n\t\t\t\t\t     &ma35d1_lock, 0,\n\t\t\t\t\t     clk_base + REG_CLK_CLKDIV4,\n\t\t\t\t\t     4, 17, 0x1ffff);\n\thws[ADC_GATE] = ma35d1_clk_gate(dev, \"adc_gate\", \"adc_div\",\n\t\t\t\t\tclk_base + REG_CLK_APBCLK2, 24);\n\n\thws[EADC_DIV] = ma35d1_clk_divider_table(dev, \"eadc_div\", \"pclk2\",\n\t\t\t\t\t\t clk_base + REG_CLK_CLKDIV4,\n\t\t\t\t\t\t 0, 4, eadc_div_table);\n\thws[EADC_GATE] = ma35d1_clk_gate(dev, \"eadc_gate\", \"eadc_div\",\n\t\t\t\t\t clk_base + REG_CLK_APBCLK2, 25);\n\n\treturn devm_of_clk_add_hw_provider(dev,\n\t\t\t\t\t   of_clk_hw_onecell_get,\n\t\t\t\t\t   ma35d1_hw_data);\n}\n\nstatic const struct of_device_id ma35d1_clk_of_match[] = {\n\t{ .compatible = \"nuvoton,ma35d1-clk\" },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, ma35d1_clk_of_match);\n\nstatic struct platform_driver ma35d1_clk_driver = {\n\t.probe = ma35d1_clocks_probe,\n\t.driver = {\n\t\t.name = \"ma35d1-clk\",\n\t\t.of_match_table = ma35d1_clk_of_match,\n\t},\n};\n\nstatic int __init ma35d1_clocks_init(void)\n{\n\treturn platform_driver_register(&ma35d1_clk_driver);\n}\n\npostcore_initcall(ma35d1_clocks_init);\n\nMODULE_AUTHOR(\"Chi-Fang Li <cfli0@nuvoton.com>\");\nMODULE_DESCRIPTION(\"NUVOTON MA35D1 Clock Driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}