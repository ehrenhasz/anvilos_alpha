{
  "module_name": "clk-starfive-jh71x0.h",
  "hash_id": "b5b4ee5e3d5297743ccfc38ccb73924392d3cbb6de292b1b3da7c6eae1fb1c6e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/starfive/clk-starfive-jh71x0.h",
  "human_readable_source": " \n#ifndef __CLK_STARFIVE_JH71X0_H\n#define __CLK_STARFIVE_JH71X0_H\n\n#include <linux/bits.h>\n#include <linux/clk-provider.h>\n#include <linux/device.h>\n#include <linux/spinlock.h>\n\n \n#define JH71X0_CLK_ENABLE\tBIT(31)\n#define JH71X0_CLK_INVERT\tBIT(30)\n#define JH71X0_CLK_MUX_MASK\tGENMASK(27, 24)\n#define JH71X0_CLK_MUX_SHIFT\t24\n#define JH71X0_CLK_DIV_MASK\tGENMASK(23, 0)\n#define JH71X0_CLK_FRAC_MASK\tGENMASK(15, 8)\n#define JH71X0_CLK_FRAC_SHIFT\t8\n#define JH71X0_CLK_INT_MASK\tGENMASK(7, 0)\n\n \n#define JH71X0_CLK_FRAC_MIN\t100UL\n#define JH71X0_CLK_FRAC_MAX\t25599UL\n\n \nstruct jh71x0_clk_data {\n\tconst char *name;\n\tunsigned long flags;\n\tu32 max;\n\tu8 parents[4];\n};\n\n#define JH71X0_GATE(_idx, _name, _flags, _parent)\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = CLK_SET_RATE_PARENT | (_flags),\t\t\t\t\\\n\t.max = JH71X0_CLK_ENABLE,\t\t\t\t\t\t\\\n\t.parents = { [0] = _parent },\t\t\t\t\t\t\\\n}\n\n#define JH71X0__DIV(_idx, _name, _max, _parent)\t\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = 0,\t\t\t\t\t\t\t\t\\\n\t.max = _max,\t\t\t\t\t\t\t\t\\\n\t.parents = { [0] = _parent },\t\t\t\t\t\t\\\n}\n\n#define JH71X0_GDIV(_idx, _name, _flags, _max, _parent)\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = _flags,\t\t\t\t\t\t\t\\\n\t.max = JH71X0_CLK_ENABLE | (_max),\t\t\t\t\t\\\n\t.parents = { [0] = _parent },\t\t\t\t\t\t\\\n}\n\n#define JH71X0_FDIV(_idx, _name, _parent)\t\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = 0,\t\t\t\t\t\t\t\t\\\n\t.max = JH71X0_CLK_FRAC_MAX,\t\t\t\t\t\t\\\n\t.parents = { [0] = _parent },\t\t\t\t\t\t\\\n}\n\n#define JH71X0__MUX(_idx, _name, _nparents, ...)\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = 0,\t\t\t\t\t\t\t\t\\\n\t.max = ((_nparents) - 1) << JH71X0_CLK_MUX_SHIFT,\t\t\t\\\n\t.parents = { __VA_ARGS__ },\t\t\t\t\t\t\\\n}\n\n#define JH71X0_GMUX(_idx, _name, _flags, _nparents, ...)\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = _flags,\t\t\t\t\t\t\t\\\n\t.max = JH71X0_CLK_ENABLE |\t\t\t\t\t\t\\\n\t\t(((_nparents) - 1) << JH71X0_CLK_MUX_SHIFT),\t\t\t\\\n\t.parents = { __VA_ARGS__ },\t\t\t\t\t\t\\\n}\n\n#define JH71X0_MDIV(_idx, _name, _max, _nparents, ...)\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = 0,\t\t\t\t\t\t\t\t\\\n\t.max = (((_nparents) - 1) << JH71X0_CLK_MUX_SHIFT) | (_max),\t\t\\\n\t.parents = { __VA_ARGS__ },\t\t\t\t\t\t\\\n}\n\n#define JH71X0__GMD(_idx, _name, _flags, _max, _nparents, ...)\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = _flags,\t\t\t\t\t\t\t\\\n\t.max = JH71X0_CLK_ENABLE |\t\t\t\t\t\t\\\n\t\t(((_nparents) - 1) << JH71X0_CLK_MUX_SHIFT) | (_max),\t\t\\\n\t.parents = { __VA_ARGS__ },\t\t\t\t\t\t\\\n}\n\n#define JH71X0__INV(_idx, _name, _parent)\t\t\t\t\t\\\n[_idx] = {\t\t\t\t\t\t\t\t\t\\\n\t.name = _name,\t\t\t\t\t\t\t\t\\\n\t.flags = CLK_SET_RATE_PARENT,\t\t\t\t\t\t\\\n\t.max = JH71X0_CLK_INVERT,\t\t\t\t\t\t\\\n\t.parents = { [0] = _parent },\t\t\t\t\t\t\\\n}\n\nstruct jh71x0_clk {\n\tstruct clk_hw hw;\n\tunsigned int idx;\n\tunsigned int max_div;\n};\n\nstruct jh71x0_clk_priv {\n\t \n\tspinlock_t rmw_lock;\n\tstruct device *dev;\n\tvoid __iomem *base;\n\tstruct clk_hw *pll[3];\n\tstruct jh71x0_clk reg[];\n};\n\nconst struct clk_ops *starfive_jh71x0_clk_ops(u32 max);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}