{
  "module_name": "clk-starfive-jh7100.c",
  "hash_id": "f5976fa89454664e3bbeff7766bb278c3c1bc3d63e58bab61cfea4ef9d34cc16",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/starfive/clk-starfive-jh7100.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/device.h>\n#include <linux/init.h>\n#include <linux/mod_devicetable.h>\n#include <linux/platform_device.h>\n\n#include <dt-bindings/clock/starfive-jh7100.h>\n\n#include \"clk-starfive-jh71x0.h\"\n\n \n#define JH7100_CLK_OSC_SYS\t\t(JH7100_CLK_END + 0)\n#define JH7100_CLK_OSC_AUD\t\t(JH7100_CLK_END + 1)\n#define JH7100_CLK_GMAC_RMII_REF\t(JH7100_CLK_END + 2)\n#define JH7100_CLK_GMAC_GR_MII_RX\t(JH7100_CLK_END + 3)\n\nstatic const struct jh71x0_clk_data jh7100_clk_data[] __initconst = {\n\tJH71X0__MUX(JH7100_CLK_CPUNDBUS_ROOT, \"cpundbus_root\", 4,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL1_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_DLA_ROOT, \"dla_root\", 3,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL1_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_DSP_ROOT, \"dsp_root\", 4,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL1_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_GMACUSB_ROOT, \"gmacusb_root\", 3,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_PERH0_ROOT, \"perh0_root\", 2,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL0_OUT),\n\tJH71X0__MUX(JH7100_CLK_PERH1_ROOT, \"perh1_root\", 2,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_VIN_ROOT, \"vin_root\", 3,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL1_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_VOUT_ROOT, \"vout_root\", 3,\n\t\t    JH7100_CLK_OSC_AUD,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0_GDIV(JH7100_CLK_AUDIO_ROOT, \"audio_root\", 0, 8, JH7100_CLK_PLL0_OUT),\n\tJH71X0__MUX(JH7100_CLK_CDECHIFI4_ROOT, \"cdechifi4_root\", 3,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL1_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__MUX(JH7100_CLK_CDEC_ROOT, \"cdec_root\", 3,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL1_OUT),\n\tJH71X0__MUX(JH7100_CLK_VOUTBUS_ROOT, \"voutbus_root\", 3,\n\t\t    JH7100_CLK_OSC_AUD,\n\t\t    JH7100_CLK_PLL0_OUT,\n\t\t    JH7100_CLK_PLL2_OUT),\n\tJH71X0__DIV(JH7100_CLK_CPUNBUS_ROOT_DIV, \"cpunbus_root_div\", 2, JH7100_CLK_CPUNDBUS_ROOT),\n\tJH71X0__DIV(JH7100_CLK_DSP_ROOT_DIV, \"dsp_root_div\", 4, JH7100_CLK_DSP_ROOT),\n\tJH71X0__DIV(JH7100_CLK_PERH0_SRC, \"perh0_src\", 4, JH7100_CLK_PERH0_ROOT),\n\tJH71X0__DIV(JH7100_CLK_PERH1_SRC, \"perh1_src\", 4, JH7100_CLK_PERH1_ROOT),\n\tJH71X0_GDIV(JH7100_CLK_PLL0_TESTOUT, \"pll0_testout\", 0, 31, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_PLL1_TESTOUT, \"pll1_testout\", 0, 31, JH7100_CLK_DLA_ROOT),\n\tJH71X0_GDIV(JH7100_CLK_PLL2_TESTOUT, \"pll2_testout\", 0, 31, JH7100_CLK_PERH1_SRC),\n\tJH71X0__MUX(JH7100_CLK_PLL2_REF, \"pll2_refclk\", 2,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_OSC_AUD),\n\tJH71X0__DIV(JH7100_CLK_CPU_CORE, \"cpu_core\", 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0__DIV(JH7100_CLK_CPU_AXI, \"cpu_axi\", 8, JH7100_CLK_CPU_CORE),\n\tJH71X0__DIV(JH7100_CLK_AHB_BUS, \"ahb_bus\", 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0__DIV(JH7100_CLK_APB1_BUS, \"apb1_bus\", 8, JH7100_CLK_AHB_BUS),\n\tJH71X0__DIV(JH7100_CLK_APB2_BUS, \"apb2_bus\", 8, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_DOM3AHB_BUS, \"dom3ahb_bus\", CLK_IS_CRITICAL, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_DOM7AHB_BUS, \"dom7ahb_bus\", CLK_IS_CRITICAL, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_U74_CORE0, \"u74_core0\", CLK_IS_CRITICAL, JH7100_CLK_CPU_CORE),\n\tJH71X0_GDIV(JH7100_CLK_U74_CORE1, \"u74_core1\", CLK_IS_CRITICAL, 8, JH7100_CLK_CPU_CORE),\n\tJH71X0_GATE(JH7100_CLK_U74_AXI, \"u74_axi\", CLK_IS_CRITICAL, JH7100_CLK_CPU_AXI),\n\tJH71X0_GATE(JH7100_CLK_U74RTC_TOGGLE, \"u74rtc_toggle\", CLK_IS_CRITICAL, JH7100_CLK_OSC_SYS),\n\tJH71X0_GATE(JH7100_CLK_SGDMA2P_AXI, \"sgdma2p_axi\", 0, JH7100_CLK_CPU_AXI),\n\tJH71X0_GATE(JH7100_CLK_DMA2PNOC_AXI, \"dma2pnoc_axi\", 0, JH7100_CLK_CPU_AXI),\n\tJH71X0_GATE(JH7100_CLK_SGDMA2P_AHB, \"sgdma2p_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0__DIV(JH7100_CLK_DLA_BUS, \"dla_bus\", 4, JH7100_CLK_DLA_ROOT),\n\tJH71X0_GATE(JH7100_CLK_DLA_AXI, \"dla_axi\", 0, JH7100_CLK_DLA_BUS),\n\tJH71X0_GATE(JH7100_CLK_DLANOC_AXI, \"dlanoc_axi\", 0, JH7100_CLK_DLA_BUS),\n\tJH71X0_GATE(JH7100_CLK_DLA_APB, \"dla_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_VP6_CORE, \"vp6_core\", 0, 4, JH7100_CLK_DSP_ROOT_DIV),\n\tJH71X0__DIV(JH7100_CLK_VP6BUS_SRC, \"vp6bus_src\", 4, JH7100_CLK_DSP_ROOT),\n\tJH71X0_GDIV(JH7100_CLK_VP6_AXI, \"vp6_axi\", 0, 4, JH7100_CLK_VP6BUS_SRC),\n\tJH71X0__DIV(JH7100_CLK_VCDECBUS_SRC, \"vcdecbus_src\", 4, JH7100_CLK_CDECHIFI4_ROOT),\n\tJH71X0__DIV(JH7100_CLK_VDEC_BUS, \"vdec_bus\", 8, JH7100_CLK_VCDECBUS_SRC),\n\tJH71X0_GATE(JH7100_CLK_VDEC_AXI, \"vdec_axi\", 0, JH7100_CLK_VDEC_BUS),\n\tJH71X0_GATE(JH7100_CLK_VDECBRG_MAIN, \"vdecbrg_mainclk\", 0, JH7100_CLK_VDEC_BUS),\n\tJH71X0_GDIV(JH7100_CLK_VDEC_BCLK, \"vdec_bclk\", 0, 8, JH7100_CLK_VCDECBUS_SRC),\n\tJH71X0_GDIV(JH7100_CLK_VDEC_CCLK, \"vdec_cclk\", 0, 8, JH7100_CLK_CDEC_ROOT),\n\tJH71X0_GATE(JH7100_CLK_VDEC_APB, \"vdec_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_JPEG_AXI, \"jpeg_axi\", 0, 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0_GDIV(JH7100_CLK_JPEG_CCLK, \"jpeg_cclk\", 0, 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0_GATE(JH7100_CLK_JPEG_APB, \"jpeg_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_GC300_2X, \"gc300_2x\", 0, 8, JH7100_CLK_CDECHIFI4_ROOT),\n\tJH71X0_GATE(JH7100_CLK_GC300_AHB, \"gc300_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0__DIV(JH7100_CLK_JPCGC300_AXIBUS, \"jpcgc300_axibus\", 8, JH7100_CLK_VCDECBUS_SRC),\n\tJH71X0_GATE(JH7100_CLK_GC300_AXI, \"gc300_axi\", 0, JH7100_CLK_JPCGC300_AXIBUS),\n\tJH71X0_GATE(JH7100_CLK_JPCGC300_MAIN, \"jpcgc300_mainclk\", 0, JH7100_CLK_JPCGC300_AXIBUS),\n\tJH71X0__DIV(JH7100_CLK_VENC_BUS, \"venc_bus\", 8, JH7100_CLK_VCDECBUS_SRC),\n\tJH71X0_GATE(JH7100_CLK_VENC_AXI, \"venc_axi\", 0, JH7100_CLK_VENC_BUS),\n\tJH71X0_GATE(JH7100_CLK_VENCBRG_MAIN, \"vencbrg_mainclk\", 0, JH7100_CLK_VENC_BUS),\n\tJH71X0_GDIV(JH7100_CLK_VENC_BCLK, \"venc_bclk\", 0, 8, JH7100_CLK_VCDECBUS_SRC),\n\tJH71X0_GDIV(JH7100_CLK_VENC_CCLK, \"venc_cclk\", 0, 8, JH7100_CLK_CDEC_ROOT),\n\tJH71X0_GATE(JH7100_CLK_VENC_APB, \"venc_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_DDRPLL_DIV2, \"ddrpll_div2\", CLK_IS_CRITICAL, 2, JH7100_CLK_PLL1_OUT),\n\tJH71X0_GDIV(JH7100_CLK_DDRPLL_DIV4, \"ddrpll_div4\", CLK_IS_CRITICAL, 2,\n\t\t    JH7100_CLK_DDRPLL_DIV2),\n\tJH71X0_GDIV(JH7100_CLK_DDRPLL_DIV8, \"ddrpll_div8\", CLK_IS_CRITICAL, 2,\n\t\t    JH7100_CLK_DDRPLL_DIV4),\n\tJH71X0_GDIV(JH7100_CLK_DDROSC_DIV2, \"ddrosc_div2\", CLK_IS_CRITICAL, 2, JH7100_CLK_OSC_SYS),\n\tJH71X0_GMUX(JH7100_CLK_DDRC0, \"ddrc0\", CLK_IS_CRITICAL, 4,\n\t\t    JH7100_CLK_DDROSC_DIV2,\n\t\t    JH7100_CLK_DDRPLL_DIV2,\n\t\t    JH7100_CLK_DDRPLL_DIV4,\n\t\t    JH7100_CLK_DDRPLL_DIV8),\n\tJH71X0_GMUX(JH7100_CLK_DDRC1, \"ddrc1\", CLK_IS_CRITICAL, 4,\n\t\t    JH7100_CLK_DDROSC_DIV2,\n\t\t    JH7100_CLK_DDRPLL_DIV2,\n\t\t    JH7100_CLK_DDRPLL_DIV4,\n\t\t    JH7100_CLK_DDRPLL_DIV8),\n\tJH71X0_GATE(JH7100_CLK_DDRPHY_APB, \"ddrphy_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0__DIV(JH7100_CLK_NOC_ROB, \"noc_rob\", 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0__DIV(JH7100_CLK_NOC_COG, \"noc_cog\", 8, JH7100_CLK_DLA_ROOT),\n\tJH71X0_GATE(JH7100_CLK_NNE_AHB, \"nne_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0__DIV(JH7100_CLK_NNEBUS_SRC1, \"nnebus_src1\", 4, JH7100_CLK_DSP_ROOT),\n\tJH71X0__MUX(JH7100_CLK_NNE_BUS, \"nne_bus\", 2,\n\t\t    JH7100_CLK_CPU_AXI,\n\t\t    JH7100_CLK_NNEBUS_SRC1),\n\tJH71X0_GATE(JH7100_CLK_NNE_AXI, \"nne_axi\", 0, JH7100_CLK_NNE_BUS),\n\tJH71X0_GATE(JH7100_CLK_NNENOC_AXI, \"nnenoc_axi\", 0, JH7100_CLK_NNE_BUS),\n\tJH71X0_GATE(JH7100_CLK_DLASLV_AXI, \"dlaslv_axi\", 0, JH7100_CLK_NNE_BUS),\n\tJH71X0_GATE(JH7100_CLK_DSPX2C_AXI, \"dspx2c_axi\", CLK_IS_CRITICAL, JH7100_CLK_NNE_BUS),\n\tJH71X0__DIV(JH7100_CLK_HIFI4_SRC, \"hifi4_src\", 4, JH7100_CLK_CDECHIFI4_ROOT),\n\tJH71X0__DIV(JH7100_CLK_HIFI4_COREFREE, \"hifi4_corefree\", 8, JH7100_CLK_HIFI4_SRC),\n\tJH71X0_GATE(JH7100_CLK_HIFI4_CORE, \"hifi4_core\", 0, JH7100_CLK_HIFI4_COREFREE),\n\tJH71X0__DIV(JH7100_CLK_HIFI4_BUS, \"hifi4_bus\", 8, JH7100_CLK_HIFI4_COREFREE),\n\tJH71X0_GATE(JH7100_CLK_HIFI4_AXI, \"hifi4_axi\", 0, JH7100_CLK_HIFI4_BUS),\n\tJH71X0_GATE(JH7100_CLK_HIFI4NOC_AXI, \"hifi4noc_axi\", 0, JH7100_CLK_HIFI4_BUS),\n\tJH71X0__DIV(JH7100_CLK_SGDMA1P_BUS, \"sgdma1p_bus\", 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0_GATE(JH7100_CLK_SGDMA1P_AXI, \"sgdma1p_axi\", 0, JH7100_CLK_SGDMA1P_BUS),\n\tJH71X0_GATE(JH7100_CLK_DMA1P_AXI, \"dma1p_axi\", 0, JH7100_CLK_SGDMA1P_BUS),\n\tJH71X0_GDIV(JH7100_CLK_X2C_AXI, \"x2c_axi\", CLK_IS_CRITICAL, 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0__DIV(JH7100_CLK_USB_BUS, \"usb_bus\", 8, JH7100_CLK_CPUNBUS_ROOT_DIV),\n\tJH71X0_GATE(JH7100_CLK_USB_AXI, \"usb_axi\", 0, JH7100_CLK_USB_BUS),\n\tJH71X0_GATE(JH7100_CLK_USBNOC_AXI, \"usbnoc_axi\", 0, JH7100_CLK_USB_BUS),\n\tJH71X0__DIV(JH7100_CLK_USBPHY_ROOTDIV, \"usbphy_rootdiv\", 4, JH7100_CLK_GMACUSB_ROOT),\n\tJH71X0_GDIV(JH7100_CLK_USBPHY_125M, \"usbphy_125m\", 0, 8, JH7100_CLK_USBPHY_ROOTDIV),\n\tJH71X0_GDIV(JH7100_CLK_USBPHY_PLLDIV25M, \"usbphy_plldiv25m\", 0, 32,\n\t\t    JH7100_CLK_USBPHY_ROOTDIV),\n\tJH71X0__MUX(JH7100_CLK_USBPHY_25M, \"usbphy_25m\", 2,\n\t\t    JH7100_CLK_OSC_SYS,\n\t\t    JH7100_CLK_USBPHY_PLLDIV25M),\n\tJH71X0_FDIV(JH7100_CLK_AUDIO_DIV, \"audio_div\", JH7100_CLK_AUDIO_ROOT),\n\tJH71X0_GATE(JH7100_CLK_AUDIO_SRC, \"audio_src\", 0, JH7100_CLK_AUDIO_DIV),\n\tJH71X0_GATE(JH7100_CLK_AUDIO_12288, \"audio_12288\", 0, JH7100_CLK_OSC_AUD),\n\tJH71X0_GDIV(JH7100_CLK_VIN_SRC, \"vin_src\", 0, 4, JH7100_CLK_VIN_ROOT),\n\tJH71X0__DIV(JH7100_CLK_ISP0_BUS, \"isp0_bus\", 8, JH7100_CLK_VIN_SRC),\n\tJH71X0_GATE(JH7100_CLK_ISP0_AXI, \"isp0_axi\", 0, JH7100_CLK_ISP0_BUS),\n\tJH71X0_GATE(JH7100_CLK_ISP0NOC_AXI, \"isp0noc_axi\", 0, JH7100_CLK_ISP0_BUS),\n\tJH71X0_GATE(JH7100_CLK_ISPSLV_AXI, \"ispslv_axi\", 0, JH7100_CLK_ISP0_BUS),\n\tJH71X0__DIV(JH7100_CLK_ISP1_BUS, \"isp1_bus\", 8, JH7100_CLK_VIN_SRC),\n\tJH71X0_GATE(JH7100_CLK_ISP1_AXI, \"isp1_axi\", 0, JH7100_CLK_ISP1_BUS),\n\tJH71X0_GATE(JH7100_CLK_ISP1NOC_AXI, \"isp1noc_axi\", 0, JH7100_CLK_ISP1_BUS),\n\tJH71X0__DIV(JH7100_CLK_VIN_BUS, \"vin_bus\", 8, JH7100_CLK_VIN_SRC),\n\tJH71X0_GATE(JH7100_CLK_VIN_AXI, \"vin_axi\", 0, JH7100_CLK_VIN_BUS),\n\tJH71X0_GATE(JH7100_CLK_VINNOC_AXI, \"vinnoc_axi\", 0, JH7100_CLK_VIN_BUS),\n\tJH71X0_GDIV(JH7100_CLK_VOUT_SRC, \"vout_src\", 0, 4, JH7100_CLK_VOUT_ROOT),\n\tJH71X0__DIV(JH7100_CLK_DISPBUS_SRC, \"dispbus_src\", 4, JH7100_CLK_VOUTBUS_ROOT),\n\tJH71X0__DIV(JH7100_CLK_DISP_BUS, \"disp_bus\", 4, JH7100_CLK_DISPBUS_SRC),\n\tJH71X0_GATE(JH7100_CLK_DISP_AXI, \"disp_axi\", 0, JH7100_CLK_DISP_BUS),\n\tJH71X0_GATE(JH7100_CLK_DISPNOC_AXI, \"dispnoc_axi\", 0, JH7100_CLK_DISP_BUS),\n\tJH71X0_GATE(JH7100_CLK_SDIO0_AHB, \"sdio0_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SDIO0_CCLKINT, \"sdio0_cclkint\", 0, 24, JH7100_CLK_PERH0_SRC),\n\tJH71X0__INV(JH7100_CLK_SDIO0_CCLKINT_INV, \"sdio0_cclkint_inv\", JH7100_CLK_SDIO0_CCLKINT),\n\tJH71X0_GATE(JH7100_CLK_SDIO1_AHB, \"sdio1_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SDIO1_CCLKINT, \"sdio1_cclkint\", 0, 24, JH7100_CLK_PERH1_SRC),\n\tJH71X0__INV(JH7100_CLK_SDIO1_CCLKINT_INV, \"sdio1_cclkint_inv\", JH7100_CLK_SDIO1_CCLKINT),\n\tJH71X0_GATE(JH7100_CLK_GMAC_AHB, \"gmac_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0__DIV(JH7100_CLK_GMAC_ROOT_DIV, \"gmac_root_div\", 8, JH7100_CLK_GMACUSB_ROOT),\n\tJH71X0_GDIV(JH7100_CLK_GMAC_PTP_REF, \"gmac_ptp_refclk\", 0, 31, JH7100_CLK_GMAC_ROOT_DIV),\n\tJH71X0_GDIV(JH7100_CLK_GMAC_GTX, \"gmac_gtxclk\", 0, 255, JH7100_CLK_GMAC_ROOT_DIV),\n\tJH71X0_GDIV(JH7100_CLK_GMAC_RMII_TX, \"gmac_rmii_txclk\", 0, 8, JH7100_CLK_GMAC_RMII_REF),\n\tJH71X0_GDIV(JH7100_CLK_GMAC_RMII_RX, \"gmac_rmii_rxclk\", 0, 8, JH7100_CLK_GMAC_RMII_REF),\n\tJH71X0__MUX(JH7100_CLK_GMAC_TX, \"gmac_tx\", 3,\n\t\t    JH7100_CLK_GMAC_GTX,\n\t\t    JH7100_CLK_GMAC_TX_INV,\n\t\t    JH7100_CLK_GMAC_RMII_TX),\n\tJH71X0__INV(JH7100_CLK_GMAC_TX_INV, \"gmac_tx_inv\", JH7100_CLK_GMAC_TX),\n\tJH71X0__MUX(JH7100_CLK_GMAC_RX_PRE, \"gmac_rx_pre\", 2,\n\t\t    JH7100_CLK_GMAC_GR_MII_RX,\n\t\t    JH7100_CLK_GMAC_RMII_RX),\n\tJH71X0__INV(JH7100_CLK_GMAC_RX_INV, \"gmac_rx_inv\", JH7100_CLK_GMAC_RX_PRE),\n\tJH71X0_GATE(JH7100_CLK_GMAC_RMII, \"gmac_rmii\", 0, JH7100_CLK_GMAC_RMII_REF),\n\tJH71X0_GDIV(JH7100_CLK_GMAC_TOPHYREF, \"gmac_tophyref\", 0, 127, JH7100_CLK_GMAC_ROOT_DIV),\n\tJH71X0_GATE(JH7100_CLK_SPI2AHB_AHB, \"spi2ahb_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SPI2AHB_CORE, \"spi2ahb_core\", 0, 31, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_EZMASTER_AHB, \"ezmaster_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_E24_AHB, \"e24_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_E24RTC_TOGGLE, \"e24rtc_toggle\", 0, JH7100_CLK_OSC_SYS),\n\tJH71X0_GATE(JH7100_CLK_QSPI_AHB, \"qspi_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_QSPI_APB, \"qspi_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_QSPI_REF, \"qspi_refclk\", 0, 31, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_SEC_AHB, \"sec_ahb\", 0, JH7100_CLK_AHB_BUS),\n\tJH71X0_GATE(JH7100_CLK_AES, \"aes_clk\", 0, JH7100_CLK_SEC_AHB),\n\tJH71X0_GATE(JH7100_CLK_SHA, \"sha_clk\", 0, JH7100_CLK_SEC_AHB),\n\tJH71X0_GATE(JH7100_CLK_PKA, \"pka_clk\", 0, JH7100_CLK_SEC_AHB),\n\tJH71X0_GATE(JH7100_CLK_TRNG_APB, \"trng_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GATE(JH7100_CLK_OTP_APB, \"otp_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GATE(JH7100_CLK_UART0_APB, \"uart0_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_UART0_CORE, \"uart0_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_UART1_APB, \"uart1_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_UART1_CORE, \"uart1_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_SPI0_APB, \"spi0_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SPI0_CORE, \"spi0_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_SPI1_APB, \"spi1_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SPI1_CORE, \"spi1_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_I2C0_APB, \"i2c0_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_I2C0_CORE, \"i2c0_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_I2C1_APB, \"i2c1_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GDIV(JH7100_CLK_I2C1_CORE, \"i2c1_core\", 0, 63, JH7100_CLK_PERH1_SRC),\n\tJH71X0_GATE(JH7100_CLK_GPIO_APB, \"gpio_apb\", 0, JH7100_CLK_APB1_BUS),\n\tJH71X0_GATE(JH7100_CLK_UART2_APB, \"uart2_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_UART2_CORE, \"uart2_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_UART3_APB, \"uart3_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_UART3_CORE, \"uart3_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_SPI2_APB, \"spi2_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SPI2_CORE, \"spi2_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_SPI3_APB, \"spi3_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_SPI3_CORE, \"spi3_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_I2C2_APB, \"i2c2_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_I2C2_CORE, \"i2c2_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_I2C3_APB, \"i2c3_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_I2C3_CORE, \"i2c3_core\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_WDTIMER_APB, \"wdtimer_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_WDT_CORE, \"wdt_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER0_CORE, \"timer0_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER1_CORE, \"timer1_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER2_CORE, \"timer2_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER3_CORE, \"timer3_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER4_CORE, \"timer4_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER5_CORE, \"timer5_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GDIV(JH7100_CLK_TIMER6_CORE, \"timer6_coreclk\", 0, 63, JH7100_CLK_PERH0_SRC),\n\tJH71X0_GATE(JH7100_CLK_VP6INTC_APB, \"vp6intc_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GATE(JH7100_CLK_PWM_APB, \"pwm_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GATE(JH7100_CLK_MSI_APB, \"msi_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GATE(JH7100_CLK_TEMP_APB, \"temp_apb\", 0, JH7100_CLK_APB2_BUS),\n\tJH71X0_GDIV(JH7100_CLK_TEMP_SENSE, \"temp_sense\", 0, 31, JH7100_CLK_OSC_SYS),\n\tJH71X0_GATE(JH7100_CLK_SYSERR_APB, \"syserr_apb\", 0, JH7100_CLK_APB2_BUS),\n};\n\nstatic struct clk_hw *jh7100_clk_get(struct of_phandle_args *clkspec, void *data)\n{\n\tstruct jh71x0_clk_priv *priv = data;\n\tunsigned int idx = clkspec->args[0];\n\n\tif (idx < JH7100_CLK_PLL0_OUT)\n\t\treturn &priv->reg[idx].hw;\n\n\tif (idx < JH7100_CLK_END)\n\t\treturn priv->pll[idx - JH7100_CLK_PLL0_OUT];\n\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic int __init clk_starfive_jh7100_probe(struct platform_device *pdev)\n{\n\tstruct jh71x0_clk_priv *priv;\n\tunsigned int idx;\n\tint ret;\n\n\tpriv = devm_kzalloc(&pdev->dev, struct_size(priv, reg, JH7100_CLK_PLL0_OUT), GFP_KERNEL);\n\tif (!priv)\n\t\treturn -ENOMEM;\n\n\tspin_lock_init(&priv->rmw_lock);\n\tpriv->dev = &pdev->dev;\n\tpriv->base = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(priv->base))\n\t\treturn PTR_ERR(priv->base);\n\n\tpriv->pll[0] = devm_clk_hw_register_fixed_factor(priv->dev, \"pll0_out\",\n\t\t\t\t\t\t\t \"osc_sys\", 0, 40, 1);\n\tif (IS_ERR(priv->pll[0]))\n\t\treturn PTR_ERR(priv->pll[0]);\n\n\tpriv->pll[1] = devm_clk_hw_register_fixed_factor(priv->dev, \"pll1_out\",\n\t\t\t\t\t\t\t \"osc_sys\", 0, 64, 1);\n\tif (IS_ERR(priv->pll[1]))\n\t\treturn PTR_ERR(priv->pll[1]);\n\n\tpriv->pll[2] = devm_clk_hw_register_fixed_factor(priv->dev, \"pll2_out\",\n\t\t\t\t\t\t\t \"pll2_refclk\", 0, 55, 1);\n\tif (IS_ERR(priv->pll[2]))\n\t\treturn PTR_ERR(priv->pll[2]);\n\n\tfor (idx = 0; idx < JH7100_CLK_PLL0_OUT; idx++) {\n\t\tu32 max = jh7100_clk_data[idx].max;\n\t\tstruct clk_parent_data parents[4] = {};\n\t\tstruct clk_init_data init = {\n\t\t\t.name = jh7100_clk_data[idx].name,\n\t\t\t.ops = starfive_jh71x0_clk_ops(max),\n\t\t\t.parent_data = parents,\n\t\t\t.num_parents = ((max & JH71X0_CLK_MUX_MASK) >> JH71X0_CLK_MUX_SHIFT) + 1,\n\t\t\t.flags = jh7100_clk_data[idx].flags,\n\t\t};\n\t\tstruct jh71x0_clk *clk = &priv->reg[idx];\n\t\tunsigned int i;\n\n\t\tfor (i = 0; i < init.num_parents; i++) {\n\t\t\tunsigned int pidx = jh7100_clk_data[idx].parents[i];\n\n\t\t\tif (pidx < JH7100_CLK_PLL0_OUT)\n\t\t\t\tparents[i].hw = &priv->reg[pidx].hw;\n\t\t\telse if (pidx < JH7100_CLK_END)\n\t\t\t\tparents[i].hw = priv->pll[pidx - JH7100_CLK_PLL0_OUT];\n\t\t\telse if (pidx == JH7100_CLK_OSC_SYS)\n\t\t\t\tparents[i].fw_name = \"osc_sys\";\n\t\t\telse if (pidx == JH7100_CLK_OSC_AUD)\n\t\t\t\tparents[i].fw_name = \"osc_aud\";\n\t\t\telse if (pidx == JH7100_CLK_GMAC_RMII_REF)\n\t\t\t\tparents[i].fw_name = \"gmac_rmii_ref\";\n\t\t\telse if (pidx == JH7100_CLK_GMAC_GR_MII_RX)\n\t\t\t\tparents[i].fw_name = \"gmac_gr_mii_rxclk\";\n\t\t}\n\n\t\tclk->hw.init = &init;\n\t\tclk->idx = idx;\n\t\tclk->max_div = max & JH71X0_CLK_DIV_MASK;\n\n\t\tret = devm_clk_hw_register(priv->dev, &clk->hw);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\treturn devm_of_clk_add_hw_provider(priv->dev, jh7100_clk_get, priv);\n}\n\nstatic const struct of_device_id clk_starfive_jh7100_match[] = {\n\t{ .compatible = \"starfive,jh7100-clkgen\" },\n\t{   }\n};\n\nstatic struct platform_driver clk_starfive_jh7100_driver = {\n\t.driver = {\n\t\t.name = \"clk-starfive-jh7100\",\n\t\t.of_match_table = clk_starfive_jh7100_match,\n\t\t.suppress_bind_attrs = true,\n\t},\n};\nbuiltin_platform_driver_probe(clk_starfive_jh7100_driver, clk_starfive_jh7100_probe);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}