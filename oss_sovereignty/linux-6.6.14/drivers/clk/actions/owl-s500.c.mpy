{
  "module_name": "owl-s500.c",
  "hash_id": "f2fdcd9917b4bd5e480764cfc110e8bca66bfa27cac1c50fe9f2dd28406973a7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/actions/owl-s500.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/platform_device.h>\n\n#include \"owl-common.h\"\n#include \"owl-composite.h\"\n#include \"owl-divider.h\"\n#include \"owl-factor.h\"\n#include \"owl-fixed-factor.h\"\n#include \"owl-gate.h\"\n#include \"owl-mux.h\"\n#include \"owl-pll.h\"\n#include \"owl-reset.h\"\n\n#include <dt-bindings/clock/actions,s500-cmu.h>\n#include <dt-bindings/reset/actions,s500-reset.h>\n\n#define CMU_COREPLL\t\t\t(0x0000)\n#define CMU_DEVPLL\t\t\t(0x0004)\n#define CMU_DDRPLL\t\t\t(0x0008)\n#define CMU_NANDPLL\t\t\t(0x000C)\n#define CMU_DISPLAYPLL\t\t\t(0x0010)\n#define CMU_AUDIOPLL\t\t\t(0x0014)\n#define CMU_TVOUTPLL\t\t\t(0x0018)\n#define CMU_BUSCLK\t\t\t(0x001C)\n#define CMU_SENSORCLK\t\t\t(0x0020)\n#define CMU_LCDCLK\t\t\t(0x0024)\n#define CMU_DSICLK\t\t\t(0x0028)\n#define CMU_CSICLK\t\t\t(0x002C)\n#define CMU_DECLK\t\t\t(0x0030)\n#define CMU_BISPCLK\t\t\t(0x0034)\n#define CMU_BUSCLK1\t\t\t(0x0038)\n#define CMU_VDECLK\t\t\t(0x0040)\n#define CMU_VCECLK\t\t\t(0x0044)\n#define CMU_NANDCCLK\t\t\t(0x004C)\n#define CMU_SD0CLK\t\t\t(0x0050)\n#define CMU_SD1CLK\t\t\t(0x0054)\n#define CMU_SD2CLK\t\t\t(0x0058)\n#define CMU_UART0CLK\t\t\t(0x005C)\n#define CMU_UART1CLK\t\t\t(0x0060)\n#define CMU_UART2CLK\t\t\t(0x0064)\n#define CMU_PWM4CLK\t\t\t(0x0068)\n#define CMU_PWM5CLK\t\t\t(0x006C)\n#define CMU_PWM0CLK\t\t\t(0x0070)\n#define CMU_PWM1CLK\t\t\t(0x0074)\n#define CMU_PWM2CLK\t\t\t(0x0078)\n#define CMU_PWM3CLK\t\t\t(0x007C)\n#define CMU_USBPLL\t\t\t(0x0080)\n#define CMU_ETHERNETPLL\t\t\t(0x0084)\n#define CMU_CVBSPLL\t\t\t(0x0088)\n#define CMU_LENSCLK\t\t\t(0x008C)\n#define CMU_GPU3DCLK\t\t\t(0x0090)\n#define CMU_CORECTL\t\t\t(0x009C)\n#define CMU_DEVCLKEN0\t\t\t(0x00A0)\n#define CMU_DEVCLKEN1\t\t\t(0x00A4)\n#define CMU_DEVRST0\t\t\t(0x00A8)\n#define CMU_DEVRST1\t\t\t(0x00AC)\n#define CMU_UART3CLK\t\t\t(0x00B0)\n#define CMU_UART4CLK\t\t\t(0x00B4)\n#define CMU_UART5CLK\t\t\t(0x00B8)\n#define CMU_UART6CLK\t\t\t(0x00BC)\n#define CMU_SSCLK\t\t\t(0x00C0)\n#define CMU_DIGITALDEBUG\t\t(0x00D0)\n#define CMU_ANALOGDEBUG\t\t\t(0x00D4)\n#define CMU_COREPLLDEBUG\t\t(0x00D8)\n#define CMU_DEVPLLDEBUG\t\t\t(0x00DC)\n#define CMU_DDRPLLDEBUG\t\t\t(0x00E0)\n#define CMU_NANDPLLDEBUG\t\t(0x00E4)\n#define CMU_DISPLAYPLLDEBUG\t\t(0x00E8)\n#define CMU_TVOUTPLLDEBUG\t\t(0x00EC)\n#define CMU_DEEPCOLORPLLDEBUG\t\t(0x00F4)\n#define CMU_AUDIOPLL_ETHPLLDEBUG\t(0x00F8)\n#define CMU_CVBSPLLDEBUG\t\t(0x00FC)\n\n#define OWL_S500_COREPLL_DELAY\t\t(150)\n#define OWL_S500_DDRPLL_DELAY\t\t(63)\n#define OWL_S500_DEVPLL_DELAY\t\t(28)\n#define OWL_S500_NANDPLL_DELAY\t\t(44)\n#define OWL_S500_DISPLAYPLL_DELAY\t(57)\n#define OWL_S500_ETHERNETPLL_DELAY\t(25)\n#define OWL_S500_AUDIOPLL_DELAY\t\t(100)\n\nstatic const struct clk_pll_table clk_audio_pll_table[] = {\n\t{ 0, 45158400 }, { 1, 49152000 },\n\t{   }\n};\n\n \nstatic OWL_PLL_NO_PARENT_DELAY(ethernet_pll_clk, \"ethernet_pll_clk\", CMU_ETHERNETPLL, 500000000, 0, 0, 0, 0, 0, OWL_S500_ETHERNETPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(core_pll_clk, \"core_pll_clk\", CMU_COREPLL, 12000000, 9, 0, 8, 4, 134, OWL_S500_COREPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(ddr_pll_clk, \"ddr_pll_clk\", CMU_DDRPLL, 12000000, 8, 0, 8, 1, 67, OWL_S500_DDRPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(nand_pll_clk, \"nand_pll_clk\", CMU_NANDPLL, 6000000, 8, 0, 7, 2, 86, OWL_S500_NANDPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(display_pll_clk, \"display_pll_clk\", CMU_DISPLAYPLL, 6000000, 8, 0, 8, 2, 126, OWL_S500_DISPLAYPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(dev_pll_clk, \"dev_pll_clk\", CMU_DEVPLL, 6000000, 8, 0, 7, 8, 126, OWL_S500_DEVPLL_DELAY, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT_DELAY(audio_pll_clk, \"audio_pll_clk\", CMU_AUDIOPLL, 0, 4, 0, 1, 0, 0, OWL_S500_AUDIOPLL_DELAY, clk_audio_pll_table, CLK_IGNORE_UNUSED);\n\nstatic const char * const dev_clk_mux_p[] = { \"hosc\", \"dev_pll_clk\" };\nstatic const char * const bisp_clk_mux_p[] = { \"display_pll_clk\", \"dev_clk\" };\nstatic const char * const sensor_clk_mux_p[] = { \"hosc\", \"bisp_clk\" };\nstatic const char * const sd_clk_mux_p[] = { \"dev_clk\", \"nand_pll_clk\" };\nstatic const char * const pwm_clk_mux_p[] = { \"losc\", \"hosc\" };\nstatic const char * const ahbprediv_clk_mux_p[] = { \"dev_clk\", \"display_pll_clk\", \"nand_pll_clk\", \"ddr_pll_clk\" };\nstatic const char * const nic_clk_mux_p[] = { \"dev_clk\", \"display_pll_clk\", \"nand_pll_clk\", \"ddr_pll_clk\" };\nstatic const char * const uart_clk_mux_p[] = { \"hosc\", \"dev_pll_clk\" };\nstatic const char * const de_clk_mux_p[] = { \"display_pll_clk\", \"dev_clk\" };\nstatic const char * const i2s_clk_mux_p[] = { \"audio_pll_clk\" };\nstatic const char * const hde_clk_mux_p[] = { \"dev_clk\", \"display_pll_clk\", \"nand_pll_clk\", \"ddr_pll_clk\" };\nstatic const char * const nand_clk_mux_p[] = { \"nand_pll_clk\", \"display_pll_clk\", \"dev_clk\", \"ddr_pll_clk\" };\n\nstatic struct clk_factor_table sd_factor_table[] = {\n\t \n\t{ 0, 1, 1 }, { 1, 1, 2 }, { 2, 1, 3 }, { 3, 1, 4 },\n\t{ 4, 1, 5 }, { 5, 1, 6 }, { 6, 1, 7 }, { 7, 1, 8 },\n\t{ 8, 1, 9 }, { 9, 1, 10 }, { 10, 1, 11 }, { 11, 1, 12 },\n\t{ 12, 1, 13 }, { 13, 1, 14 }, { 14, 1, 15 }, { 15, 1, 16 },\n\t{ 16, 1, 17 }, { 17, 1, 18 }, { 18, 1, 19 }, { 19, 1, 20 },\n\t{ 20, 1, 21 }, { 21, 1, 22 }, { 22, 1, 23 }, { 23, 1, 24 },\n\t{ 24, 1, 25 },\n\n\t \n\t{ 256, 1, 1 * 128 }, { 257, 1, 2 * 128 }, { 258, 1, 3 * 128 }, { 259, 1, 4 * 128 },\n\t{ 260, 1, 5 * 128 }, { 261, 1, 6 * 128 }, { 262, 1, 7 * 128 }, { 263, 1, 8 * 128 },\n\t{ 264, 1, 9 * 128 }, { 265, 1, 10 * 128 }, { 266, 1, 11 * 128 }, { 267, 1, 12 * 128 },\n\t{ 268, 1, 13 * 128 }, { 269, 1, 14 * 128 }, { 270, 1, 15 * 128 }, { 271, 1, 16 * 128 },\n\t{ 272, 1, 17 * 128 }, { 273, 1, 18 * 128 }, { 274, 1, 19 * 128 }, { 275, 1, 20 * 128 },\n\t{ 276, 1, 21 * 128 }, { 277, 1, 22 * 128 }, { 278, 1, 23 * 128 }, { 279, 1, 24 * 128 },\n\t{ 280, 1, 25 * 128 },\n\t{   }\n};\n\nstatic struct clk_factor_table de_factor_table[] = {\n\t{ 0, 1, 1 }, { 1, 2, 3 }, { 2, 1, 2 }, { 3, 2, 5 },\n\t{ 4, 1, 3 }, { 5, 1, 4 }, { 6, 1, 6 }, { 7, 1, 8 },\n\t{ 8, 1, 12 },\n\t{   }\n};\n\nstatic struct clk_factor_table hde_factor_table[] = {\n\t{ 0, 1, 1 }, { 1, 2, 3 }, { 2, 1, 2 }, { 3, 2, 5 },\n\t{ 4, 1, 3 }, { 5, 1, 4 }, { 6, 1, 6 }, { 7, 1, 8 },\n\t{   }\n};\n\nstatic struct clk_div_table rmii_ref_div_table[] = {\n\t{ 0, 4 }, { 1, 10 },\n\t{   }\n};\n\nstatic struct clk_div_table std12rate_div_table[] = {\n\t{ 0, 1 }, { 1, 2 }, { 2, 3 }, { 3, 4 },\n\t{ 4, 5 }, { 5, 6 }, { 6, 7 }, { 7, 8 },\n\t{ 8, 9 }, { 9, 10 }, { 10, 11 }, { 11, 12 },\n\t{   }\n};\n\nstatic struct clk_div_table i2s_div_table[] = {\n\t{ 0, 1 }, { 1, 2 }, { 2, 3 }, { 3, 4 },\n\t{ 4, 6 }, { 5, 8 }, { 6, 12 }, { 7, 16 },\n\t{ 8, 24 },\n\t{   }\n};\n\nstatic struct clk_div_table nand_div_table[] = {\n\t{ 0, 1 }, { 1, 2 }, { 2, 4 }, { 3, 6 },\n\t{ 4, 8 }, { 5, 10 }, { 6, 12 }, { 7, 14 },\n\t{ 8, 16 }, { 9, 18 }, { 10, 20 }, { 11, 22 },\n\t{   }\n};\n\n \nstatic OWL_MUX(dev_clk, \"dev_clk\", dev_clk_mux_p, CMU_DEVPLL, 12, 1, CLK_SET_RATE_PARENT);\n\n \nstatic OWL_GATE(gpio_clk, \"gpio_clk\", \"apb_clk\", CMU_DEVCLKEN0, 18, 0, 0);\nstatic OWL_GATE(dmac_clk, \"dmac_clk\", \"h_clk\", CMU_DEVCLKEN0, 1, 0, 0);\nstatic OWL_GATE(spi0_clk, \"spi0_clk\", \"ahb_clk\", CMU_DEVCLKEN1, 10, 0, CLK_IGNORE_UNUSED);\nstatic OWL_GATE(spi1_clk, \"spi1_clk\", \"ahb_clk\", CMU_DEVCLKEN1, 11, 0, CLK_IGNORE_UNUSED);\nstatic OWL_GATE(spi2_clk, \"spi2_clk\", \"ahb_clk\", CMU_DEVCLKEN1, 12, 0, CLK_IGNORE_UNUSED);\nstatic OWL_GATE(spi3_clk, \"spi3_clk\", \"ahb_clk\", CMU_DEVCLKEN1, 13, 0, CLK_IGNORE_UNUSED);\nstatic OWL_GATE(timer_clk, \"timer_clk\", \"hosc\", CMU_DEVCLKEN1, 27, 0, 0);\nstatic OWL_GATE(hdmi_clk, \"hdmi_clk\", \"hosc\", CMU_DEVCLKEN1, 3, 0, 0);\n\n \nstatic OWL_DIVIDER(h_clk, \"h_clk\", \"ahbprediv_clk\", CMU_BUSCLK1, 2, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(apb_clk, \"apb_clk\", \"nic_clk\", CMU_BUSCLK1, 14, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(rmii_ref_clk, \"rmii_ref_clk\", \"ethernet_pll_clk\", CMU_ETHERNETPLL, 1, 1, rmii_ref_div_table, 0, 0);\n\n \nstatic OWL_FACTOR(de1_clk, \"de_clk1\", \"de_clk\", CMU_DECLK, 0, 4, de_factor_table, 0, 0);\nstatic OWL_FACTOR(de2_clk, \"de_clk2\", \"de_clk\", CMU_DECLK, 4, 4, de_factor_table, 0, 0);\n\n \nstatic OWL_COMP_DIV(nic_clk, \"nic_clk\", nic_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_BUSCLK1, 4, 3),\n\t\t\t{ 0 },\n\t\t\tOWL_DIVIDER_HW(CMU_BUSCLK1, 16, 2, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(ahbprediv_clk, \"ahbprediv_clk\", ahbprediv_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_BUSCLK1, 8, 3),\n\t\t\t{ 0 },\n\t\t\tOWL_DIVIDER_HW(CMU_BUSCLK1, 12, 2, 0, NULL),\n\t\t\tCLK_SET_RATE_PARENT);\n\nstatic OWL_COMP_FIXED_FACTOR(ahb_clk, \"ahb_clk\", \"h_clk\",\n\t\t\t{ 0 },\n\t\t\t1, 1, 0);\n\nstatic OWL_COMP_FACTOR(vce_clk, \"vce_clk\", hde_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_VCECLK, 4, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 26, 0),\n\t\t\tOWL_FACTOR_HW(CMU_VCECLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(vde_clk, \"vde_clk\", hde_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_VDECLK, 4, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 25, 0),\n\t\t\tOWL_FACTOR_HW(CMU_VDECLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(bisp_clk, \"bisp_clk\", bisp_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_BISPCLK, 4, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 14, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_BISPCLK, 0, 4, 0, std12rate_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(sensor0_clk, \"sensor0_clk\", sensor_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SENSORCLK, 4, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 14, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_SENSORCLK, 0, 4, 0, std12rate_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(sensor1_clk, \"sensor1_clk\", sensor_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SENSORCLK, 4, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 14, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_SENSORCLK, 8, 4, 0, std12rate_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(sd0_clk, \"sd0_clk\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD0CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 5, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD0CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(sd1_clk, \"sd1_clk\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD1CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 6, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD1CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(sd2_clk, \"sd2_clk\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD2CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 7, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD2CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm0_clk, \"pwm0_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM0CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 23, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM0CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm1_clk, \"pwm1_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM1CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 24, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM1CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm2_clk, \"pwm2_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM2CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 25, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM2CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm3_clk, \"pwm3_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM3CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 26, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM3CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm4_clk, \"pwm4_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM4CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 11, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM4CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(pwm5_clk, \"pwm5_clk\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM5CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 0, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM5CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_PASS(de_clk, \"de_clk\", de_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_DECLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 8, 0),\n\t\t\t0);\n\nstatic OWL_COMP_FIXED_FACTOR(i2c0_clk, \"i2c0_clk\", \"ethernet_pll_clk\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 14, 0),\n\t\t\t1, 5, 0);\n\nstatic OWL_COMP_FIXED_FACTOR(i2c1_clk, \"i2c1_clk\", \"ethernet_pll_clk\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 15, 0),\n\t\t\t1, 5, 0);\n\nstatic OWL_COMP_FIXED_FACTOR(i2c2_clk, \"i2c2_clk\", \"ethernet_pll_clk\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 30, 0),\n\t\t\t1, 5, 0);\n\nstatic OWL_COMP_FIXED_FACTOR(i2c3_clk, \"i2c3_clk\", \"ethernet_pll_clk\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 31, 0),\n\t\t\t1, 5, 0);\n\nstatic OWL_COMP_FIXED_FACTOR(ethernet_clk, \"ethernet_clk\", \"ethernet_pll_clk\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 22, 0),\n\t\t\t1, 20, 0);\n\nstatic OWL_COMP_DIV(uart0_clk, \"uart0_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART0CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 6, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART0CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart1_clk, \"uart1_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART1CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 7, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART1CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart2_clk, \"uart2_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART2CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 8, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART2CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart3_clk, \"uart3_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART3CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 19, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART3CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart4_clk, \"uart4_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART4CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 20, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART4CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart5_clk, \"uart5_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART5CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 21, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART5CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(uart6_clk, \"uart6_clk\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART6CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 18, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART6CLK, 0, 8, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(i2srx_clk, \"i2srx_clk\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 21, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 20, 4, 0, i2s_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(i2stx_clk, \"i2stx_clk\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 20, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 16, 4, 0, i2s_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(hdmia_clk, \"hdmia_clk\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 22, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 24, 4, 0, i2s_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(spdif_clk, \"spdif_clk\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 23, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 28, 4, 0, i2s_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(nand_clk, \"nand_clk\", nand_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_NANDCCLK, 8, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 4, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_NANDCCLK, 0, 3, 0, nand_div_table),\n\t\t\tCLK_SET_RATE_PARENT);\n\nstatic OWL_COMP_DIV(ecc_clk, \"ecc_clk\", nand_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_NANDCCLK, 8, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 4, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_NANDCCLK, 4, 3, 0, nand_div_table),\n\t\t\tCLK_SET_RATE_PARENT);\n\nstatic struct owl_clk_common *s500_clks[] = {\n\t&ethernet_pll_clk.common,\n\t&core_pll_clk.common,\n\t&ddr_pll_clk.common,\n\t&dev_pll_clk.common,\n\t&nand_pll_clk.common,\n\t&audio_pll_clk.common,\n\t&display_pll_clk.common,\n\t&dev_clk.common,\n\t&timer_clk.common,\n\t&i2c0_clk.common,\n\t&i2c1_clk.common,\n\t&i2c2_clk.common,\n\t&i2c3_clk.common,\n\t&uart0_clk.common,\n\t&uart1_clk.common,\n\t&uart2_clk.common,\n\t&uart3_clk.common,\n\t&uart4_clk.common,\n\t&uart5_clk.common,\n\t&uart6_clk.common,\n\t&pwm0_clk.common,\n\t&pwm1_clk.common,\n\t&pwm2_clk.common,\n\t&pwm3_clk.common,\n\t&pwm4_clk.common,\n\t&pwm5_clk.common,\n\t&sensor0_clk.common,\n\t&sensor1_clk.common,\n\t&sd0_clk.common,\n\t&sd1_clk.common,\n\t&sd2_clk.common,\n\t&bisp_clk.common,\n\t&ahb_clk.common,\n\t&ahbprediv_clk.common,\n\t&h_clk.common,\n\t&spi0_clk.common,\n\t&spi1_clk.common,\n\t&spi2_clk.common,\n\t&spi3_clk.common,\n\t&rmii_ref_clk.common,\n\t&de_clk.common,\n\t&de1_clk.common,\n\t&de2_clk.common,\n\t&i2srx_clk.common,\n\t&i2stx_clk.common,\n\t&hdmia_clk.common,\n\t&hdmi_clk.common,\n\t&vce_clk.common,\n\t&vde_clk.common,\n\t&spdif_clk.common,\n\t&nand_clk.common,\n\t&ecc_clk.common,\n\t&apb_clk.common,\n\t&dmac_clk.common,\n\t&gpio_clk.common,\n\t&nic_clk.common,\n\t&ethernet_clk.common,\n};\n\nstatic struct clk_hw_onecell_data s500_hw_clks = {\n\t.hws = {\n\t\t[CLK_ETHERNET_PLL]\t= &ethernet_pll_clk.common.hw,\n\t\t[CLK_CORE_PLL]\t\t= &core_pll_clk.common.hw,\n\t\t[CLK_DDR_PLL]\t\t= &ddr_pll_clk.common.hw,\n\t\t[CLK_NAND_PLL]\t\t= &nand_pll_clk.common.hw,\n\t\t[CLK_DISPLAY_PLL]\t= &display_pll_clk.common.hw,\n\t\t[CLK_DEV_PLL]\t\t= &dev_pll_clk.common.hw,\n\t\t[CLK_AUDIO_PLL]\t\t= &audio_pll_clk.common.hw,\n\t\t[CLK_TIMER]\t\t= &timer_clk.common.hw,\n\t\t[CLK_DEV]\t\t= &dev_clk.common.hw,\n\t\t[CLK_DE]\t\t= &de_clk.common.hw,\n\t\t[CLK_DE1]\t\t= &de1_clk.common.hw,\n\t\t[CLK_DE2]\t\t= &de2_clk.common.hw,\n\t\t[CLK_I2C0]\t\t= &i2c0_clk.common.hw,\n\t\t[CLK_I2C1]\t\t= &i2c1_clk.common.hw,\n\t\t[CLK_I2C2]\t\t= &i2c2_clk.common.hw,\n\t\t[CLK_I2C3]\t\t= &i2c3_clk.common.hw,\n\t\t[CLK_I2SRX]\t\t= &i2srx_clk.common.hw,\n\t\t[CLK_I2STX]\t\t= &i2stx_clk.common.hw,\n\t\t[CLK_UART0]\t\t= &uart0_clk.common.hw,\n\t\t[CLK_UART1]\t\t= &uart1_clk.common.hw,\n\t\t[CLK_UART2]\t\t= &uart2_clk.common.hw,\n\t\t[CLK_UART3]\t\t= &uart3_clk.common.hw,\n\t\t[CLK_UART4]\t\t= &uart4_clk.common.hw,\n\t\t[CLK_UART5]\t\t= &uart5_clk.common.hw,\n\t\t[CLK_UART6]\t\t= &uart6_clk.common.hw,\n\t\t[CLK_PWM0]\t\t= &pwm0_clk.common.hw,\n\t\t[CLK_PWM1]\t\t= &pwm1_clk.common.hw,\n\t\t[CLK_PWM2]\t\t= &pwm2_clk.common.hw,\n\t\t[CLK_PWM3]\t\t= &pwm3_clk.common.hw,\n\t\t[CLK_PWM4]\t\t= &pwm4_clk.common.hw,\n\t\t[CLK_PWM5]\t\t= &pwm5_clk.common.hw,\n\t\t[CLK_SENSOR0]\t\t= &sensor0_clk.common.hw,\n\t\t[CLK_SENSOR1]\t\t= &sensor1_clk.common.hw,\n\t\t[CLK_SD0]\t\t= &sd0_clk.common.hw,\n\t\t[CLK_SD1]\t\t= &sd1_clk.common.hw,\n\t\t[CLK_SD2]\t\t= &sd2_clk.common.hw,\n\t\t[CLK_BISP]\t\t= &bisp_clk.common.hw,\n\t\t[CLK_SPI0]\t\t= &spi0_clk.common.hw,\n\t\t[CLK_SPI1]\t\t= &spi1_clk.common.hw,\n\t\t[CLK_SPI2]\t\t= &spi2_clk.common.hw,\n\t\t[CLK_SPI3]\t\t= &spi3_clk.common.hw,\n\t\t[CLK_AHB]\t\t= &ahb_clk.common.hw,\n\t\t[CLK_H]\t\t\t= &h_clk.common.hw,\n\t\t[CLK_AHBPREDIV]\t\t= &ahbprediv_clk.common.hw,\n\t\t[CLK_RMII_REF]\t\t= &rmii_ref_clk.common.hw,\n\t\t[CLK_HDMI_AUDIO]\t= &hdmia_clk.common.hw,\n\t\t[CLK_HDMI]\t\t= &hdmi_clk.common.hw,\n\t\t[CLK_VDE]\t\t= &vde_clk.common.hw,\n\t\t[CLK_VCE]\t\t= &vce_clk.common.hw,\n\t\t[CLK_SPDIF]\t\t= &spdif_clk.common.hw,\n\t\t[CLK_NAND]\t\t= &nand_clk.common.hw,\n\t\t[CLK_ECC]\t\t= &ecc_clk.common.hw,\n\t\t[CLK_APB]\t\t= &apb_clk.common.hw,\n\t\t[CLK_DMAC]\t\t= &dmac_clk.common.hw,\n\t\t[CLK_GPIO]\t\t= &gpio_clk.common.hw,\n\t\t[CLK_NIC]\t\t= &nic_clk.common.hw,\n\t\t[CLK_ETHERNET]\t\t= &ethernet_clk.common.hw,\n\t},\n\t.num = CLK_NR_CLKS,\n};\n\nstatic const struct owl_reset_map s500_resets[] = {\n\t[RESET_DMAC]\t= { CMU_DEVRST0, BIT(0) },\n\t[RESET_NORIF]\t= { CMU_DEVRST0, BIT(1) },\n\t[RESET_DDR]\t= { CMU_DEVRST0, BIT(2) },\n\t[RESET_NANDC]\t= { CMU_DEVRST0, BIT(3) },\n\t[RESET_SD0]\t= { CMU_DEVRST0, BIT(4) },\n\t[RESET_SD1]\t= { CMU_DEVRST0, BIT(5) },\n\t[RESET_PCM1]\t= { CMU_DEVRST0, BIT(6) },\n\t[RESET_DE]\t= { CMU_DEVRST0, BIT(7) },\n\t[RESET_LCD]\t= { CMU_DEVRST0, BIT(8) },\n\t[RESET_SD2]\t= { CMU_DEVRST0, BIT(9) },\n\t[RESET_DSI]\t= { CMU_DEVRST0, BIT(10) },\n\t[RESET_CSI]\t= { CMU_DEVRST0, BIT(11) },\n\t[RESET_BISP]\t= { CMU_DEVRST0, BIT(12) },\n\t[RESET_KEY]\t= { CMU_DEVRST0, BIT(14) },\n\t[RESET_GPIO]\t= { CMU_DEVRST0, BIT(15) },\n\t[RESET_AUDIO]\t= { CMU_DEVRST0, BIT(17) },\n\t[RESET_PCM0]\t= { CMU_DEVRST0, BIT(18) },\n\t[RESET_VDE]\t= { CMU_DEVRST0, BIT(19) },\n\t[RESET_VCE]\t= { CMU_DEVRST0, BIT(20) },\n\t[RESET_GPU3D]\t= { CMU_DEVRST0, BIT(22) },\n\t[RESET_NIC301]\t= { CMU_DEVRST0, BIT(23) },\n\t[RESET_LENS]\t= { CMU_DEVRST0, BIT(26) },\n\t[RESET_PERIPHRESET] = { CMU_DEVRST0, BIT(27) },\n\t[RESET_USB2_0]\t= { CMU_DEVRST1, BIT(0) },\n\t[RESET_TVOUT]\t= { CMU_DEVRST1, BIT(1) },\n\t[RESET_HDMI]\t= { CMU_DEVRST1, BIT(2) },\n\t[RESET_HDCP2TX]\t= { CMU_DEVRST1, BIT(3) },\n\t[RESET_UART6]\t= { CMU_DEVRST1, BIT(4) },\n\t[RESET_UART0]\t= { CMU_DEVRST1, BIT(5) },\n\t[RESET_UART1]\t= { CMU_DEVRST1, BIT(6) },\n\t[RESET_UART2]\t= { CMU_DEVRST1, BIT(7) },\n\t[RESET_SPI0]\t= { CMU_DEVRST1, BIT(8) },\n\t[RESET_SPI1]\t= { CMU_DEVRST1, BIT(9) },\n\t[RESET_SPI2]\t= { CMU_DEVRST1, BIT(10) },\n\t[RESET_SPI3]\t= { CMU_DEVRST1, BIT(11) },\n\t[RESET_I2C0]\t= { CMU_DEVRST1, BIT(12) },\n\t[RESET_I2C1]\t= { CMU_DEVRST1, BIT(13) },\n\t[RESET_USB3]\t= { CMU_DEVRST1, BIT(14) },\n\t[RESET_UART3]\t= { CMU_DEVRST1, BIT(15) },\n\t[RESET_UART4]\t= { CMU_DEVRST1, BIT(16) },\n\t[RESET_UART5]\t= { CMU_DEVRST1, BIT(17) },\n\t[RESET_I2C2]\t= { CMU_DEVRST1, BIT(18) },\n\t[RESET_I2C3]\t= { CMU_DEVRST1, BIT(19) },\n\t[RESET_ETHERNET] = { CMU_DEVRST1, BIT(20) },\n\t[RESET_CHIPID]\t= { CMU_DEVRST1, BIT(21) },\n\t[RESET_USB2_1]\t= { CMU_DEVRST1, BIT(22) },\n\t[RESET_WD0RESET] = { CMU_DEVRST1, BIT(24) },\n\t[RESET_WD1RESET] = { CMU_DEVRST1, BIT(25) },\n\t[RESET_WD2RESET] = { CMU_DEVRST1, BIT(26) },\n\t[RESET_WD3RESET] = { CMU_DEVRST1, BIT(27) },\n\t[RESET_DBG0RESET] = { CMU_DEVRST1, BIT(28) },\n\t[RESET_DBG1RESET] = { CMU_DEVRST1, BIT(29) },\n\t[RESET_DBG2RESET] = { CMU_DEVRST1, BIT(30) },\n\t[RESET_DBG3RESET] = { CMU_DEVRST1, BIT(31) },\n};\n\nstatic struct owl_clk_desc s500_clk_desc = {\n\t.clks\t    = s500_clks,\n\t.num_clks   = ARRAY_SIZE(s500_clks),\n\n\t.hw_clks    = &s500_hw_clks,\n\n\t.resets     = s500_resets,\n\t.num_resets = ARRAY_SIZE(s500_resets),\n};\n\nstatic int s500_clk_probe(struct platform_device *pdev)\n{\n\tstruct owl_clk_desc *desc;\n\tstruct owl_reset *reset;\n\tint ret;\n\n\tdesc = &s500_clk_desc;\n\towl_clk_regmap_init(pdev, desc);\n\n\treset = devm_kzalloc(&pdev->dev, sizeof(*reset), GFP_KERNEL);\n\tif (!reset)\n\t\treturn -ENOMEM;\n\n\treset->rcdev.of_node = pdev->dev.of_node;\n\treset->rcdev.ops = &owl_reset_ops;\n\treset->rcdev.nr_resets = desc->num_resets;\n\treset->reset_map = desc->resets;\n\treset->regmap = desc->regmap;\n\n\tret = devm_reset_controller_register(&pdev->dev, &reset->rcdev);\n\tif (ret)\n\t\tdev_err(&pdev->dev, \"Failed to register reset controller\\n\");\n\n\treturn owl_clk_probe(&pdev->dev, desc->hw_clks);\n}\n\nstatic const struct of_device_id s500_clk_of_match[] = {\n\t{ .compatible = \"actions,s500-cmu\", },\n\t{   }\n};\n\nstatic struct platform_driver s500_clk_driver = {\n\t.probe = s500_clk_probe,\n\t.driver = {\n\t\t.name = \"s500-cmu\",\n\t\t.of_match_table = s500_clk_of_match,\n\t},\n};\n\nstatic int __init s500_clk_init(void)\n{\n\treturn platform_driver_register(&s500_clk_driver);\n}\ncore_initcall(s500_clk_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}