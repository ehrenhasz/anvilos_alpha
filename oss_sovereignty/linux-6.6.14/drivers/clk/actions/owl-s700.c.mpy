{
  "module_name": "owl-s700.c",
  "hash_id": "8e36ca965269bcaeaf314f3f076c92555bb424c10c383db862eae0b5eda74fa2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/actions/owl-s700.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/platform_device.h>\n\n#include \"owl-common.h\"\n#include \"owl-composite.h\"\n#include \"owl-divider.h\"\n#include \"owl-factor.h\"\n#include \"owl-fixed-factor.h\"\n#include \"owl-gate.h\"\n#include \"owl-mux.h\"\n#include \"owl-pll.h\"\n#include \"owl-reset.h\"\n\n#include <dt-bindings/clock/actions,s700-cmu.h>\n#include <dt-bindings/reset/actions,s700-reset.h>\n\n#define CMU_COREPLL\t\t(0x0000)\n#define CMU_DEVPLL\t\t(0x0004)\n#define CMU_DDRPLL\t\t(0x0008)\n#define CMU_NANDPLL\t\t(0x000C)\n#define CMU_DISPLAYPLL\t\t(0x0010)\n#define CMU_AUDIOPLL\t\t(0x0014)\n#define CMU_TVOUTPLL\t\t(0x0018)\n#define CMU_BUSCLK\t\t(0x001C)\n#define CMU_SENSORCLK\t\t(0x0020)\n#define CMU_LCDCLK\t\t(0x0024)\n#define CMU_DSIPLLCLK\t\t(0x0028)\n#define CMU_CSICLK\t\t(0x002C)\n#define CMU_DECLK\t\t(0x0030)\n#define CMU_SICLK\t\t(0x0034)\n#define CMU_BUSCLK1\t\t(0x0038)\n#define CMU_HDECLK\t\t(0x003C)\n#define CMU_VDECLK\t\t(0x0040)\n#define CMU_VCECLK\t\t(0x0044)\n#define CMU_NANDCCLK\t\t(0x004C)\n#define CMU_SD0CLK\t\t(0x0050)\n#define CMU_SD1CLK\t\t(0x0054)\n#define CMU_SD2CLK\t\t(0x0058)\n#define CMU_UART0CLK\t\t(0x005C)\n#define CMU_UART1CLK\t\t(0x0060)\n#define CMU_UART2CLK\t\t(0x0064)\n#define CMU_UART3CLK\t\t(0x0068)\n#define CMU_UART4CLK\t\t(0x006C)\n#define CMU_UART5CLK\t\t(0x0070)\n#define CMU_UART6CLK\t\t(0x0074)\n#define CMU_PWM0CLK\t\t(0x0078)\n#define CMU_PWM1CLK\t\t(0x007C)\n#define CMU_PWM2CLK\t\t(0x0080)\n#define CMU_PWM3CLK\t\t(0x0084)\n#define CMU_PWM4CLK\t\t(0x0088)\n#define CMU_PWM5CLK\t\t(0x008C)\n#define CMU_GPU3DCLK\t\t(0x0090)\n#define CMU_CORECTL\t\t(0x009C)\n#define CMU_DEVCLKEN0\t\t(0x00A0)\n#define CMU_DEVCLKEN1\t\t(0x00A4)\n#define CMU_DEVRST0\t\t(0x00A8)\n#define CMU_DEVRST1\t\t(0x00AC)\n#define CMU_USBPLL\t\t(0x00B0)\n#define CMU_ETHERNETPLL\t\t(0x00B4)\n#define CMU_CVBSPLL\t\t(0x00B8)\n#define CMU_SSTSCLK\t\t(0x00C0)\n\nstatic struct clk_pll_table clk_audio_pll_table[] = {\n\t{0, 45158400}, {1, 49152000},\n\t{   }\n};\n\nstatic struct clk_pll_table clk_cvbs_pll_table[] = {\n\t{27, 29 * 12000000}, {28, 30 * 12000000}, {29, 31 * 12000000},\n\t{30, 32 * 12000000}, {31, 33 * 12000000}, {32, 34 * 12000000},\n\t{33, 35 * 12000000}, {34, 36 * 12000000}, {35, 37 * 12000000},\n\t{36, 38 * 12000000}, {37, 39 * 12000000}, {38, 40 * 12000000},\n\t{39, 41 * 12000000}, {40, 42 * 12000000}, {41, 43 * 12000000},\n\t{42, 44 * 12000000}, {43, 45 * 12000000},\n\t{   }\n};\n\n \nstatic OWL_PLL_NO_PARENT(clk_core_pll,   \"core_pll\", CMU_COREPLL, 12000000, 9, 0, 8,  4, 174, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_dev_pll,    \"dev_pll\", CMU_DEVPLL,  6000000, 8, 0, 8, 8, 126, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_ddr_pll,    \"ddr_pll\", CMU_DDRPLL, 6000000, 8, 0, 8,  2,  180, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_nand_pll,   \"nand_pll\", CMU_NANDPLL,  6000000, 8, 0, 8,  2, 86, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_display_pll, \"display_pll\", CMU_DISPLAYPLL, 6000000, 8, 0, 8, 2, 140, NULL, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_cvbs_pll, \"cvbs_pll\", CMU_CVBSPLL, 0, 8, 0, 8, 27, 43, clk_cvbs_pll_table, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_audio_pll,  \"audio_pll\", CMU_AUDIOPLL, 0, 4, 0, 1, 0, 0, clk_audio_pll_table, CLK_IGNORE_UNUSED);\nstatic OWL_PLL_NO_PARENT(clk_ethernet_pll, \"ethernet_pll\", CMU_ETHERNETPLL, 500000000, 0, 0, 0, 0, 0, NULL, CLK_IGNORE_UNUSED);\n\nstatic const char *cpu_clk_mux_p[] = {\"losc\", \"hosc\", \"core_pll\", \"noc1_clk_div\"};\nstatic const char *dev_clk_p[] = { \"hosc\", \"dev_pll\"};\nstatic const char *noc_clk_mux_p[] = { \"dev_clk\", \"display_pll\", \"nand_pll\", \"ddr_pll\", \"cvbs_pll\"};\n\nstatic const char *csi_clk_mux_p[] = { \"display_pll\", \"dev_clk\"};\nstatic const char *de_clk_mux_p[] = { \"display_pll\", \"dev_clk\"};\nstatic const char *hde_clk_mux_p[] = { \"dev_clk\", \"display_pll\", \"nand_pll\", \"ddr_pll\"};\nstatic const char *nand_clk_mux_p[] = { \"nand_pll\", \"display_pll\", \"dev_clk\", \"ddr_pll\"};\nstatic const char *sd_clk_mux_p[] = { \"dev_clk\", \"nand_pll\", };\nstatic const char *uart_clk_mux_p[] = { \"hosc\", \"dev_pll\"};\nstatic const char *pwm_clk_mux_p[] = { \"losc\", \"hosc\"};\nstatic const char *gpu_clk_mux_p[] = { \"dev_clk\", \"display_pll\", \"nand_pll\", \"ddr_clk\", \"cvbs_pll\"};\nstatic const char *lcd_clk_mux_p[] = { \"display_pll\", \"dev_clk\" };\nstatic const char *i2s_clk_mux_p[] = { \"audio_pll\" };\nstatic const char *sensor_clk_mux_p[] = { \"hosc\", \"si\"};\n\n \nstatic OWL_MUX(clk_cpu, \"cpu_clk\", cpu_clk_mux_p,  CMU_BUSCLK, 0, 2, CLK_SET_RATE_PARENT);\nstatic OWL_MUX(clk_dev, \"dev_clk\", dev_clk_p, CMU_DEVPLL, 12, 1, CLK_SET_RATE_PARENT);\nstatic OWL_MUX(clk_noc0_clk_mux, \"noc0_clk_mux\", noc_clk_mux_p, CMU_BUSCLK, 4, 3, CLK_SET_RATE_PARENT);\nstatic OWL_MUX(clk_noc1_clk_mux, \"noc1_clk_mux\", noc_clk_mux_p, CMU_BUSCLK1, 4, 3, CLK_SET_RATE_PARENT);\nstatic OWL_MUX(clk_hp_clk_mux, \"hp_clk_mux\", noc_clk_mux_p, CMU_BUSCLK1, 8, 3, CLK_SET_RATE_PARENT);\n\nstatic struct clk_factor_table sd_factor_table[] = {\n\t \n\t{0, 1, 1}, {1, 1, 2}, {2, 1, 3}, {3, 1, 4},\n\t{4, 1, 5}, {5, 1, 6}, {6, 1, 7}, {7, 1, 8},\n\t{8, 1, 9}, {9, 1, 10}, {10, 1, 11}, {11, 1, 12},\n\t{12, 1, 13}, {13, 1, 14}, {14, 1, 15}, {15, 1, 16},\n\t{16, 1, 17}, {17, 1, 18}, {18, 1, 19}, {19, 1, 20},\n\t{20, 1, 21}, {21, 1, 22}, {22, 1, 23}, {23, 1, 24},\n\t{24, 1, 25}, {25, 1, 26},\n\n\t \n\t{256, 1, 1 * 128}, {257, 1, 2 * 128}, {258, 1, 3 * 128}, {259, 1, 4 * 128},\n\t{260, 1, 5 * 128}, {261, 1, 6 * 128}, {262, 1, 7 * 128}, {263, 1, 8 * 128},\n\t{264, 1, 9 * 128}, {265, 1, 10 * 128}, {266, 1, 11 * 128}, {267, 1, 12 * 128},\n\t{268, 1, 13 * 128}, {269, 1, 14 * 128}, {270, 1, 15 * 128}, {271, 1, 16 * 128},\n\t{272, 1, 17 * 128}, {273, 1, 18 * 128}, {274, 1, 19 * 128}, {275, 1, 20 * 128},\n\t{276, 1, 21 * 128}, {277, 1, 22 * 128}, {278, 1, 23 * 128}, {279, 1, 24 * 128},\n\t{280, 1, 25 * 128}, {281, 1, 26 * 128},\n\n\t{   }\n};\n\nstatic struct clk_factor_table lcd_factor_table[] = {\n\t \n\t{0, 1, 1}, {1, 1, 2}, {2, 1, 3}, {3, 1, 4},\n\t{4, 1, 5}, {5, 1, 6}, {6, 1, 7}, {7, 1, 8},\n\t{8, 1, 9}, {9, 1, 10}, {10, 1, 11}, {11, 1, 12},\n\n\t \n\t{256, 1, 1 * 7}, {257, 1, 2 * 7}, {258, 1, 3 * 7}, {259, 1, 4 * 7},\n\t{260, 1, 5 * 7}, {261, 1, 6 * 7}, {262, 1, 7 * 7}, {263, 1, 8 * 7},\n\t{264, 1, 9 * 7}, {265, 1, 10 * 7}, {266, 1, 11 * 7}, {267, 1, 12 * 7},\n\t{   }\n};\n\nstatic struct clk_div_table hdmia_div_table[] = {\n\t{0, 1},   {1, 2},   {2, 3},   {3, 4},\n\t{4, 6},   {5, 8},   {6, 12},  {7, 16},\n\t{8, 24},\n\t{   }\n};\n\nstatic struct clk_div_table rmii_div_table[] = {\n\t{0, 4},   {1, 10},\n\t{   }\n};\n\n \nstatic OWL_DIVIDER(clk_noc0, \"noc0_clk\", \"noc0_clk_mux\", CMU_BUSCLK, 16, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_noc1, \"noc1_clk\", \"noc1_clk_mux\", CMU_BUSCLK1, 16, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_noc1_clk_div, \"noc1_clk_div\", \"noc1_clk\", CMU_BUSCLK1, 20, 1, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_hp_clk_div, \"hp_clk_div\", \"hp_clk_mux\", CMU_BUSCLK1, 12, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_ahb, \"ahb_clk\", \"hp_clk_div\", CMU_BUSCLK1, 2, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_apb, \"apb_clk\", \"ahb_clk\", CMU_BUSCLK1, 14, 2, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_sensor0, \"sensor0\", \"sensor_src\", CMU_SENSORCLK, 0, 4, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_sensor1, \"sensor1\", \"sensor_src\", CMU_SENSORCLK, 8, 4, NULL, 0, 0);\nstatic OWL_DIVIDER(clk_rmii_ref, \"rmii_ref\", \"ethernet_pll\", CMU_ETHERNETPLL, 2, 1, rmii_div_table, 0, 0);\n\nstatic struct clk_factor_table de_factor_table[] = {\n\t{0, 1, 1}, {1, 2, 3}, {2, 1, 2}, {3, 2, 5},\n\t{4, 1, 3}, {5, 1, 4}, {6, 1, 6}, {7, 1, 8},\n\t{8, 1, 12},\n\t{   }\n};\n\nstatic struct clk_factor_table hde_factor_table[] = {\n\t{0, 1, 1}, {1, 2, 3}, {2, 1, 2}, {3, 2, 5},\n\t{4, 1, 3}, {5, 1, 4}, {6, 1, 6}, {7, 1, 8},\n\t{   }\n};\n\n \nstatic OWL_GATE(clk_gpio, \"gpio\", \"apb_clk\", CMU_DEVCLKEN1, 25, 0, 0);\nstatic OWL_GATE(clk_dmac, \"dmac\", \"hp_clk_div\", CMU_DEVCLKEN0, 17, 0, 0);\nstatic OWL_GATE(clk_timer, \"timer\", \"hosc\", CMU_DEVCLKEN1, 22, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_dsi, \"dsi_clk\", CMU_DEVCLKEN0, 2, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_tvout, \"tvout_clk\", CMU_DEVCLKEN0, 3, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_hdmi_dev, \"hdmi_dev\", CMU_DEVCLKEN0, 5, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb3_480mpll0, \"usb3_480mpll0\", CMU_USBPLL, 3, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb3_480mphy0, \"usb3_480mphy0\", CMU_USBPLL, 2, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb3_5gphy, \"usb3_5gphy\", CMU_USBPLL, 1, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb3_cce, \"usb3_cce\", CMU_DEVCLKEN0, 25, 0, 0);\nstatic OWL_GATE(clk_i2c0, \"i2c0\", \"hosc\", CMU_DEVCLKEN1, 0, 0, 0);\nstatic OWL_GATE(clk_i2c1, \"i2c1\", \"hosc\", CMU_DEVCLKEN1, 1, 0, 0);\nstatic OWL_GATE(clk_i2c2, \"i2c2\", \"hosc\", CMU_DEVCLKEN1, 2, 0, 0);\nstatic OWL_GATE(clk_i2c3, \"i2c3\", \"hosc\", CMU_DEVCLKEN1, 3, 0, 0);\nstatic OWL_GATE(clk_spi0, \"spi0\", \"ahb_clk\", CMU_DEVCLKEN1, 4, 0, 0);\nstatic OWL_GATE(clk_spi1, \"spi1\", \"ahb_clk\", CMU_DEVCLKEN1, 5, 0, 0);\nstatic OWL_GATE(clk_spi2, \"spi2\", \"ahb_clk\", CMU_DEVCLKEN1, 6, 0, 0);\nstatic OWL_GATE(clk_spi3, \"spi3\", \"ahb_clk\", CMU_DEVCLKEN1, 7, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h0_pllen, \"usbh0_pllen\", CMU_USBPLL, 12, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h0_phy, \"usbh0_phy\", CMU_USBPLL, 10, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h0_cce, \"usbh0_cce\", CMU_DEVCLKEN0, 26, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h1_pllen, \"usbh1_pllen\", CMU_USBPLL, 13, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h1_phy, \"usbh1_phy\", CMU_USBPLL, 11, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_usb2h1_cce, \"usbh1_cce\", CMU_DEVCLKEN0, 27, 0, 0);\nstatic OWL_GATE_NO_PARENT(clk_irc_switch, \"irc_switch\", CMU_DEVCLKEN1, 15, 0, 0);\n\n \n\nstatic OWL_COMP_DIV(clk_csi, \"csi\", csi_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_CSICLK, 4, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 13, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_CSICLK, 0, 4, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_si, \"si\", csi_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SICLK, 4, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 14,  0),\n\t\t\tOWL_DIVIDER_HW(CMU_SICLK, 0, 4, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_de, \"de\", de_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_DECLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 0,  0),\n\t\t\tOWL_FACTOR_HW(CMU_DECLK, 0, 3, 0, de_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_hde, \"hde\", hde_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_HDECLK, 4, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 9, 0),\n\t\t\tOWL_FACTOR_HW(CMU_HDECLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_vde, \"vde\", hde_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_VDECLK, 4, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 10,  0),\n\t\t\tOWL_FACTOR_HW(CMU_VDECLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_vce, \"vce\", hde_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_VCECLK, 4, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 11, 0),\n\t\t\tOWL_FACTOR_HW(CMU_VCECLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_nand, \"nand\", nand_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_NANDCCLK, 8, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 21, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_NANDCCLK, 0, 3, 0, NULL),\n\t\t\tCLK_SET_RATE_PARENT);\n\nstatic OWL_COMP_FACTOR(clk_sd0, \"sd0\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD0CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 22, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD0CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_sd1, \"sd1\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD1CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 23, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD1CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_sd2, \"sd2\", sd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SD2CLK, 9, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 24, 0),\n\t\t\tOWL_FACTOR_HW(CMU_SD2CLK, 0, 9, 0, sd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart0, \"uart0\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART0CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 8, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART0CLK, 0, 9, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart1, \"uart1\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART1CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 9, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART1CLK, 0, 9, CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart2, \"uart2\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART2CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 10, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART2CLK, 0, 9,  CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart3, \"uart3\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART3CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 11, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART3CLK, 0, 9,  CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart4, \"uart4\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART4CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 12, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART4CLK, 0, 9,  CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart5, \"uart5\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART5CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 13, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART5CLK, 0, 9,  CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_uart6, \"uart6\", uart_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_UART6CLK, 16, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 14, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_UART6CLK, 0, 9,  CLK_DIVIDER_ROUND_CLOSEST, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_pwm0, \"pwm0\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM0CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 16, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM0CLK, 0, 10, 0, NULL),\n\t\t\tCLK_IGNORE_UNUSED);\n\nstatic OWL_COMP_DIV(clk_pwm1, \"pwm1\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM1CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 17, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM1CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_pwm2, \"pwm2\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM2CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 18, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM2CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_pwm3, \"pwm3\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM3CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 19, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM3CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_pwm4, \"pwm4\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM4CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 20, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM4CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_pwm5, \"pwm5\", pwm_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_PWM5CLK, 12, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 21, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_PWM5CLK, 0, 10, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_gpu3d, \"gpu3d\", gpu_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_GPU3DCLK, 4, 3),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 8, 0),\n\t\t\tOWL_FACTOR_HW(CMU_GPU3DCLK, 0, 3, 0, hde_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_FACTOR(clk_lcd, \"lcd\", lcd_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_LCDCLK, 12, 2),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 1, 0),\n\t\t\tOWL_FACTOR_HW(CMU_LCDCLK, 0, 9, 0, lcd_factor_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_hdmi_audio, \"hdmia\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),  \n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 28, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 24, 4, 0, hdmia_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_i2srx, \"i2srx\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 27, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 20, 4, 0, hdmia_div_table),\n\t\t\t0);\n\nstatic OWL_COMP_DIV(clk_i2stx, \"i2stx\", i2s_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_AUDIOPLL, 24, 1),\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 26, 0),\n\t\t\tOWL_DIVIDER_HW(CMU_AUDIOPLL, 16, 4, 0, hdmia_div_table),\n\t\t\t0);\n\n \nstatic OWL_COMP_FIXED_FACTOR(clk_pcm1, \"pcm1\", \"audio_pll\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 31, 0),\n\t\t\t1, 2, 0);\n\nstatic OWL_COMP_DIV(clk_sensor_src, \"sensor_src\", sensor_clk_mux_p,\n\t\t\tOWL_MUX_HW(CMU_SENSORCLK, 4, 1),\n\t\t\t{0},\n\t\t\tOWL_DIVIDER_HW(CMU_SENSORCLK, 5, 2, 0, NULL),\n\t\t\t0);\n\nstatic OWL_COMP_FIXED_FACTOR(clk_ethernet, \"ethernet\", \"ethernet_pll\",\n\t\t\tOWL_GATE_HW(CMU_DEVCLKEN1, 23, 0),\n\t\t\t1, 20, 0);\n\nstatic OWL_COMP_DIV_FIXED(clk_thermal_sensor, \"thermal_sensor\", \"hosc\",\n\t\t\t\tOWL_GATE_HW(CMU_DEVCLKEN0, 31, 0),\n\t\t\t\tOWL_DIVIDER_HW(CMU_SSTSCLK, 20, 10, 0, NULL),\n\t\t\t\t0);\n\nstatic struct owl_clk_common *s700_clks[] = {\n\t&clk_core_pll.common,\n\t&clk_dev_pll.common,\n\t&clk_ddr_pll.common,\n\t&clk_nand_pll.common,\n\t&clk_display_pll.common,\n\t&clk_cvbs_pll .common,\n\t&clk_audio_pll.common,\n\t&clk_ethernet_pll.common,\n\t&clk_cpu.common,\n\t&clk_dev.common,\n\t&clk_ahb.common,\n\t&clk_apb.common,\n\t&clk_dmac.common,\n\t&clk_noc0_clk_mux.common,\n\t&clk_noc1_clk_mux.common,\n\t&clk_hp_clk_mux.common,\n\t&clk_hp_clk_div.common,\n\t&clk_noc1_clk_div.common,\n\t&clk_noc0.common,\n\t&clk_noc1.common,\n\t&clk_sensor_src.common,\n\t&clk_gpio.common,\n\t&clk_timer.common,\n\t&clk_dsi.common,\n\t&clk_csi.common,\n\t&clk_si.common,\n\t&clk_de.common,\n\t&clk_hde.common,\n\t&clk_vde.common,\n\t&clk_vce.common,\n\t&clk_nand.common,\n\t&clk_sd0.common,\n\t&clk_sd1.common,\n\t&clk_sd2.common,\n\t&clk_uart0.common,\n\t&clk_uart1.common,\n\t&clk_uart2.common,\n\t&clk_uart3.common,\n\t&clk_uart4.common,\n\t&clk_uart5.common,\n\t&clk_uart6.common,\n\t&clk_pwm0.common,\n\t&clk_pwm1.common,\n\t&clk_pwm2.common,\n\t&clk_pwm3.common,\n\t&clk_pwm4.common,\n\t&clk_pwm5.common,\n\t&clk_gpu3d.common,\n\t&clk_i2c0.common,\n\t&clk_i2c1.common,\n\t&clk_i2c2.common,\n\t&clk_i2c3.common,\n\t&clk_spi0.common,\n\t&clk_spi1.common,\n\t&clk_spi2.common,\n\t&clk_spi3.common,\n\t&clk_usb3_480mpll0.common,\n\t&clk_usb3_480mphy0.common,\n\t&clk_usb3_5gphy.common,\n\t&clk_usb3_cce.common,\n\t&clk_lcd.common,\n\t&clk_hdmi_audio.common,\n\t&clk_i2srx.common,\n\t&clk_i2stx.common,\n\t&clk_sensor0.common,\n\t&clk_sensor1.common,\n\t&clk_hdmi_dev.common,\n\t&clk_ethernet.common,\n\t&clk_rmii_ref.common,\n\t&clk_usb2h0_pllen.common,\n\t&clk_usb2h0_phy.common,\n\t&clk_usb2h0_cce.common,\n\t&clk_usb2h1_pllen.common,\n\t&clk_usb2h1_phy.common,\n\t&clk_usb2h1_cce.common,\n\t&clk_tvout.common,\n\t&clk_thermal_sensor.common,\n\t&clk_irc_switch.common,\n\t&clk_pcm1.common,\n};\n\nstatic struct clk_hw_onecell_data s700_hw_clks = {\n\t.hws    = {\n\t\t\t[CLK_CORE_PLL]\t\t\t\t= &clk_core_pll.common.hw,\n\t\t\t[CLK_DEV_PLL]\t\t\t\t= &clk_dev_pll.common.hw,\n\t\t\t[CLK_DDR_PLL]\t\t\t\t= &clk_ddr_pll.common.hw,\n\t\t\t[CLK_NAND_PLL]\t\t\t\t= &clk_nand_pll.common.hw,\n\t\t\t[CLK_DISPLAY_PLL]\t\t\t= &clk_display_pll.common.hw,\n\t\t\t[CLK_CVBS_PLL]\t\t\t\t= &clk_cvbs_pll .common.hw,\n\t\t\t[CLK_AUDIO_PLL]\t\t\t\t= &clk_audio_pll.common.hw,\n\t\t\t[CLK_ETHERNET_PLL]\t\t\t= &clk_ethernet_pll.common.hw,\n\t\t\t[CLK_CPU]\t\t\t\t= &clk_cpu.common.hw,\n\t\t\t[CLK_DEV]\t\t\t\t= &clk_dev.common.hw,\n\t\t\t[CLK_AHB]\t\t\t\t= &clk_ahb.common.hw,\n\t\t\t[CLK_APB]\t\t\t\t= &clk_apb.common.hw,\n\t\t\t[CLK_DMAC]\t\t\t\t= &clk_dmac.common.hw,\n\t\t\t[CLK_NOC0_CLK_MUX]\t\t\t= &clk_noc0_clk_mux.common.hw,\n\t\t\t[CLK_NOC1_CLK_MUX]\t\t\t= &clk_noc1_clk_mux.common.hw,\n\t\t\t[CLK_HP_CLK_MUX]\t\t\t= &clk_hp_clk_mux.common.hw,\n\t\t\t[CLK_HP_CLK_DIV]\t\t\t= &clk_hp_clk_div.common.hw,\n\t\t\t[CLK_NOC1_CLK_DIV]\t\t\t= &clk_noc1_clk_div.common.hw,\n\t\t\t[CLK_NOC0]\t\t\t\t= &clk_noc0.common.hw,\n\t\t\t[CLK_NOC1]\t\t\t\t= &clk_noc1.common.hw,\n\t\t\t[CLK_SENOR_SRC]\t\t\t\t= &clk_sensor_src.common.hw,\n\t\t\t[CLK_GPIO]\t\t\t\t= &clk_gpio.common.hw,\n\t\t\t[CLK_TIMER]\t\t\t\t= &clk_timer.common.hw,\n\t\t\t[CLK_DSI]\t\t\t\t= &clk_dsi.common.hw,\n\t\t\t[CLK_CSI]\t\t\t\t= &clk_csi.common.hw,\n\t\t\t[CLK_SI]\t\t\t\t= &clk_si.common.hw,\n\t\t\t[CLK_DE]\t\t\t\t= &clk_de.common.hw,\n\t\t\t[CLK_HDE]\t\t\t\t= &clk_hde.common.hw,\n\t\t\t[CLK_VDE]\t\t\t\t= &clk_vde.common.hw,\n\t\t\t[CLK_VCE]\t\t\t\t= &clk_vce.common.hw,\n\t\t\t[CLK_NAND]\t\t\t\t= &clk_nand.common.hw,\n\t\t\t[CLK_SD0]\t\t\t\t= &clk_sd0.common.hw,\n\t\t\t[CLK_SD1]\t\t\t\t= &clk_sd1.common.hw,\n\t\t\t[CLK_SD2]\t\t\t\t= &clk_sd2.common.hw,\n\t\t\t[CLK_UART0]\t\t\t\t= &clk_uart0.common.hw,\n\t\t\t[CLK_UART1]\t\t\t\t= &clk_uart1.common.hw,\n\t\t\t[CLK_UART2]\t\t\t\t= &clk_uart2.common.hw,\n\t\t\t[CLK_UART3]\t\t\t\t= &clk_uart3.common.hw,\n\t\t\t[CLK_UART4]\t\t\t\t= &clk_uart4.common.hw,\n\t\t\t[CLK_UART5]\t\t\t\t= &clk_uart5.common.hw,\n\t\t\t[CLK_UART6]\t\t\t\t= &clk_uart6.common.hw,\n\t\t\t[CLK_PWM0]\t\t\t\t= &clk_pwm0.common.hw,\n\t\t\t[CLK_PWM1]\t\t\t\t= &clk_pwm1.common.hw,\n\t\t\t[CLK_PWM2]\t\t\t\t= &clk_pwm2.common.hw,\n\t\t\t[CLK_PWM3]\t\t\t\t= &clk_pwm3.common.hw,\n\t\t\t[CLK_PWM4]\t\t\t\t= &clk_pwm4.common.hw,\n\t\t\t[CLK_PWM5]\t\t\t\t= &clk_pwm5.common.hw,\n\t\t\t[CLK_GPU3D]\t\t\t\t= &clk_gpu3d.common.hw,\n\t\t\t[CLK_I2C0]\t\t\t\t= &clk_i2c0.common.hw,\n\t\t\t[CLK_I2C1]\t\t\t\t= &clk_i2c1.common.hw,\n\t\t\t[CLK_I2C2]\t\t\t\t= &clk_i2c2.common.hw,\n\t\t\t[CLK_I2C3]\t\t\t\t= &clk_i2c3.common.hw,\n\t\t\t[CLK_SPI0]\t\t\t\t= &clk_spi0.common.hw,\n\t\t\t[CLK_SPI1]\t\t\t\t= &clk_spi1.common.hw,\n\t\t\t[CLK_SPI2]\t\t\t\t= &clk_spi2.common.hw,\n\t\t\t[CLK_SPI3]\t\t\t\t= &clk_spi3.common.hw,\n\t\t\t[CLK_USB3_480MPLL0]\t\t\t= &clk_usb3_480mpll0.common.hw,\n\t\t\t[CLK_USB3_480MPHY0]\t\t\t= &clk_usb3_480mphy0.common.hw,\n\t\t\t[CLK_USB3_5GPHY]\t\t\t= &clk_usb3_5gphy.common.hw,\n\t\t\t[CLK_USB3_CCE]\t\t\t\t= &clk_usb3_cce.common.hw,\n\t\t\t[CLK_LCD]\t\t\t\t= &clk_lcd.common.hw,\n\t\t\t[CLK_HDMI_AUDIO]\t\t\t= &clk_hdmi_audio.common.hw,\n\t\t\t[CLK_I2SRX]\t\t\t\t= &clk_i2srx.common.hw,\n\t\t\t[CLK_I2STX]\t\t\t\t= &clk_i2stx.common.hw,\n\t\t\t[CLK_SENSOR0]\t\t\t\t= &clk_sensor0.common.hw,\n\t\t\t[CLK_SENSOR1]\t\t\t\t= &clk_sensor1.common.hw,\n\t\t\t[CLK_HDMI_DEV]\t\t\t\t= &clk_hdmi_dev.common.hw,\n\t\t\t[CLK_ETHERNET]\t\t\t\t= &clk_ethernet.common.hw,\n\t\t\t[CLK_RMII_REF]\t\t\t\t= &clk_rmii_ref.common.hw,\n\t\t\t[CLK_USB2H0_PLLEN]\t\t\t= &clk_usb2h0_pllen.common.hw,\n\t\t\t[CLK_USB2H0_PHY]\t\t\t= &clk_usb2h0_phy.common.hw,\n\t\t\t[CLK_USB2H0_CCE]\t\t\t= &clk_usb2h0_cce.common.hw,\n\t\t\t[CLK_USB2H1_PLLEN]\t\t\t= &clk_usb2h1_pllen.common.hw,\n\t\t\t[CLK_USB2H1_PHY]\t\t\t= &clk_usb2h1_phy.common.hw,\n\t\t\t[CLK_USB2H1_CCE]\t\t\t= &clk_usb2h1_cce.common.hw,\n\t\t\t[CLK_TVOUT]\t\t\t\t= &clk_tvout.common.hw,\n\t\t\t[CLK_THERMAL_SENSOR]\t\t\t= &clk_thermal_sensor.common.hw,\n\t\t\t[CLK_IRC_SWITCH]\t\t\t= &clk_irc_switch.common.hw,\n\t\t\t[CLK_PCM1]\t\t\t\t= &clk_pcm1.common.hw,\n\t\t},\n\t\t.num    = CLK_NR_CLKS,\n};\n\nstatic const struct owl_reset_map s700_resets[] = {\n\t[RESET_DE]\t= { CMU_DEVRST0, BIT(0) },\n\t[RESET_LCD0]\t= { CMU_DEVRST0, BIT(1) },\n\t[RESET_DSI]\t= { CMU_DEVRST0, BIT(2) },\n\t[RESET_CSI]\t= { CMU_DEVRST0, BIT(13) },\n\t[RESET_SI]\t= { CMU_DEVRST0, BIT(14) },\n\t[RESET_I2C0]\t= { CMU_DEVRST1, BIT(0) },\n\t[RESET_I2C1]\t= { CMU_DEVRST1, BIT(1) },\n\t[RESET_I2C2]\t= { CMU_DEVRST1, BIT(2) },\n\t[RESET_I2C3]\t= { CMU_DEVRST1, BIT(3) },\n\t[RESET_SPI0]\t= { CMU_DEVRST1, BIT(4) },\n\t[RESET_SPI1]\t= { CMU_DEVRST1, BIT(5) },\n\t[RESET_SPI2]\t= { CMU_DEVRST1, BIT(6) },\n\t[RESET_SPI3]\t= { CMU_DEVRST1, BIT(7) },\n\t[RESET_UART0]\t= { CMU_DEVRST1, BIT(8) },\n\t[RESET_UART1]\t= { CMU_DEVRST1, BIT(9) },\n\t[RESET_UART2]\t= { CMU_DEVRST1, BIT(10) },\n\t[RESET_UART3]\t= { CMU_DEVRST1, BIT(11) },\n\t[RESET_UART4]\t= { CMU_DEVRST1, BIT(12) },\n\t[RESET_UART5]\t= { CMU_DEVRST1, BIT(13) },\n\t[RESET_UART6]\t= { CMU_DEVRST1, BIT(14) },\n\t[RESET_KEY]\t= { CMU_DEVRST1, BIT(24) },\n\t[RESET_GPIO]\t= { CMU_DEVRST1, BIT(25) },\n\t[RESET_AUDIO]\t= { CMU_DEVRST1, BIT(29) },\n};\n\nstatic struct owl_clk_desc s700_clk_desc = {\n\t.clks       = s700_clks,\n\t.num_clks   = ARRAY_SIZE(s700_clks),\n\n\t.hw_clks    = &s700_hw_clks,\n\n\t.resets     = s700_resets,\n\t.num_resets = ARRAY_SIZE(s700_resets),\n};\n\nstatic int s700_clk_probe(struct platform_device *pdev)\n{\n\tstruct owl_clk_desc *desc;\n\tstruct owl_reset *reset;\n\tint ret;\n\n\tdesc = &s700_clk_desc;\n\towl_clk_regmap_init(pdev, desc);\n\n\t \n\treset = devm_kzalloc(&pdev->dev, sizeof(*reset), GFP_KERNEL);\n\tif (!reset)\n\t\treturn -ENOMEM;\n\n\treset->rcdev.of_node = pdev->dev.of_node;\n\treset->rcdev.ops = &owl_reset_ops;\n\treset->rcdev.nr_resets = desc->num_resets;\n\treset->reset_map = desc->resets;\n\treset->regmap = desc->regmap;\n\n\tret = devm_reset_controller_register(&pdev->dev, &reset->rcdev);\n\tif (ret)\n\t\tdev_err(&pdev->dev, \"Failed to register reset controller\\n\");\n\n\treturn owl_clk_probe(&pdev->dev, desc->hw_clks);\n}\n\nstatic const struct of_device_id s700_clk_of_match[] = {\n\t{ .compatible = \"actions,s700-cmu\", },\n\t{   }\n};\n\nstatic struct platform_driver s700_clk_driver = {\n\t.probe = s700_clk_probe,\n\t.driver = {\n\t\t.name = \"s700-cmu\",\n\t\t.of_match_table = s700_clk_of_match\n\t},\n};\n\nstatic int __init s700_clk_init(void)\n{\n\treturn platform_driver_register(&s700_clk_driver);\n}\ncore_initcall(s700_clk_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}