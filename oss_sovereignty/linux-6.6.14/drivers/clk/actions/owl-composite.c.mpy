{
  "module_name": "owl-composite.c",
  "hash_id": "a85a48b060838cb172b238b8f40d6fbf2b834f8f9625e20470cef2f02e75d6bc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/actions/owl-composite.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n\n\n#include <linux/clk-provider.h>\n#include <linux/regmap.h>\n\n#include \"owl-composite.h\"\n\nstatic u8 owl_comp_get_parent(struct clk_hw *hw)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_mux_helper_get_parent(&comp->common, &comp->mux_hw);\n}\n\nstatic int owl_comp_set_parent(struct clk_hw *hw, u8 index)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_mux_helper_set_parent(&comp->common, &comp->mux_hw, index);\n}\n\nstatic void owl_comp_disable(struct clk_hw *hw)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tstruct owl_clk_common *common = &comp->common;\n\n\towl_gate_set(common, &comp->gate_hw, false);\n}\n\nstatic int owl_comp_enable(struct clk_hw *hw)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tstruct owl_clk_common *common = &comp->common;\n\n\towl_gate_set(common, &comp->gate_hw, true);\n\n\treturn 0;\n}\n\nstatic int owl_comp_is_enabled(struct clk_hw *hw)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tstruct owl_clk_common *common = &comp->common;\n\n\treturn owl_gate_clk_is_enabled(common, &comp->gate_hw);\n}\n\nstatic int owl_comp_div_determine_rate(struct clk_hw *hw,\n\t\t\t\t       struct clk_rate_request *req)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tlong rate;\n\n\trate = owl_divider_helper_round_rate(&comp->common, &comp->rate.div_hw,\n\t\t\t\t\t     req->rate, &req->best_parent_rate);\n\tif (rate < 0)\n\t\treturn rate;\n\n\treq->rate = rate;\n\treturn 0;\n}\n\nstatic unsigned long owl_comp_div_recalc_rate(struct clk_hw *hw,\n\t\t\t\t\t  unsigned long parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_divider_helper_recalc_rate(&comp->common, &comp->rate.div_hw,\n\t\t\t\t\tparent_rate);\n}\n\nstatic int owl_comp_div_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\tunsigned long parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_divider_helper_set_rate(&comp->common, &comp->rate.div_hw,\n\t\t\t\t\trate, parent_rate);\n}\n\nstatic int owl_comp_fact_determine_rate(struct clk_hw *hw,\n\t\t\t\t\tstruct clk_rate_request *req)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tlong rate;\n\n\trate = owl_factor_helper_round_rate(&comp->common,\n\t\t\t\t\t    &comp->rate.factor_hw,\n\t\t\t\t\t    req->rate, &req->best_parent_rate);\n\tif (rate < 0)\n\t\treturn rate;\n\n\treq->rate = rate;\n\treturn 0;\n}\n\nstatic unsigned long owl_comp_fact_recalc_rate(struct clk_hw *hw,\n\t\t\tunsigned long parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_factor_helper_recalc_rate(&comp->common,\n\t\t\t\t\t&comp->rate.factor_hw,\n\t\t\t\t\tparent_rate);\n}\n\nstatic int owl_comp_fact_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\tunsigned long parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\n\treturn owl_factor_helper_set_rate(&comp->common,\n\t\t\t\t\t&comp->rate.factor_hw,\n\t\t\t\t\trate, parent_rate);\n}\n\nstatic long owl_comp_fix_fact_round_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\tunsigned long *parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tstruct clk_fixed_factor *fix_fact_hw = &comp->rate.fix_fact_hw;\n\n\treturn comp->fix_fact_ops->round_rate(&fix_fact_hw->hw, rate, parent_rate);\n}\n\nstatic unsigned long owl_comp_fix_fact_recalc_rate(struct clk_hw *hw,\n\t\t\tunsigned long parent_rate)\n{\n\tstruct owl_composite *comp = hw_to_owl_comp(hw);\n\tstruct clk_fixed_factor *fix_fact_hw = &comp->rate.fix_fact_hw;\n\n\treturn comp->fix_fact_ops->recalc_rate(&fix_fact_hw->hw, parent_rate);\n\n}\n\nstatic int owl_comp_fix_fact_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\tunsigned long parent_rate)\n{\n\t \n\n\treturn 0;\n}\n\nconst struct clk_ops owl_comp_div_ops = {\n\t \n\t.get_parent\t= owl_comp_get_parent,\n\t.set_parent\t= owl_comp_set_parent,\n\n\t \n\t.disable\t= owl_comp_disable,\n\t.enable\t\t= owl_comp_enable,\n\t.is_enabled\t= owl_comp_is_enabled,\n\n\t \n\t.determine_rate\t= owl_comp_div_determine_rate,\n\t.recalc_rate\t= owl_comp_div_recalc_rate,\n\t.set_rate\t= owl_comp_div_set_rate,\n};\n\n\nconst struct clk_ops owl_comp_fact_ops = {\n\t \n\t.get_parent\t= owl_comp_get_parent,\n\t.set_parent\t= owl_comp_set_parent,\n\n\t \n\t.disable\t= owl_comp_disable,\n\t.enable\t\t= owl_comp_enable,\n\t.is_enabled\t= owl_comp_is_enabled,\n\n\t \n\t.determine_rate\t= owl_comp_fact_determine_rate,\n\t.recalc_rate\t= owl_comp_fact_recalc_rate,\n\t.set_rate\t= owl_comp_fact_set_rate,\n};\n\nconst struct clk_ops owl_comp_fix_fact_ops = {\n\t \n\t.disable\t= owl_comp_disable,\n\t.enable\t\t= owl_comp_enable,\n\t.is_enabled\t= owl_comp_is_enabled,\n\n\t \n\t.round_rate\t= owl_comp_fix_fact_round_rate,\n\t.recalc_rate\t= owl_comp_fix_fact_recalc_rate,\n\t.set_rate\t= owl_comp_fix_fact_set_rate,\n};\n\n\nconst struct clk_ops owl_comp_pass_ops = {\n\t \n\t.determine_rate\t= clk_hw_determine_rate_no_reparent,\n\t.get_parent\t= owl_comp_get_parent,\n\t.set_parent\t= owl_comp_set_parent,\n\n\t \n\t.disable\t= owl_comp_disable,\n\t.enable\t\t= owl_comp_enable,\n\t.is_enabled\t= owl_comp_is_enabled,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}