{
  "module_name": "ccu-sun20i-d1-r.c",
  "hash_id": "772a56ab0a0841e3e38845b0570f4d09fb7ebdedd13e2ed2d770d940260fadbc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu-sun20i-d1-r.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n\n#include \"ccu_common.h\"\n#include \"ccu_reset.h\"\n\n#include \"ccu_gate.h\"\n#include \"ccu_mp.h\"\n\n#include \"ccu-sun20i-d1-r.h\"\n\nstatic const struct clk_parent_data r_ahb_apb0_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"iosc\" },\n\t{ .fw_name = \"pll-periph\" },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX(r_ahb_clk, \"r-ahb\",\n\t\t\t\t  r_ahb_apb0_parents, 0x000,\n\t\t\t\t  0, 5,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 3,\t \n\t\t\t\t  0);\nstatic const struct clk_hw *r_ahb_hw = &r_ahb_clk.common.hw;\n\nstatic SUNXI_CCU_MP_DATA_WITH_MUX(r_apb0_clk, \"r-apb0\",\n\t\t\t\t  r_ahb_apb0_parents, 0x00c,\n\t\t\t\t  0, 5,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 3,\t \n\t\t\t\t  0);\nstatic const struct clk_hw *r_apb0_hw = &r_apb0_clk.common.hw;\n\nstatic SUNXI_CCU_GATE_HWS(bus_r_timer_clk,\t\"bus-r-timer\",\t&r_apb0_hw,\n\t\t\t  0x11c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_r_twd_clk,\t\"bus-r-twd\",\t&r_apb0_hw,\n\t\t\t  0x12c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_r_ppu_clk,\t\"bus-r-ppu\",\t&r_apb0_hw,\n\t\t\t  0x1ac, BIT(0), 0);\n\nstatic const struct clk_parent_data r_ir_rx_parents[] = {\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"hosc\" },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(r_ir_rx_clk, \"r-ir-rx\",\n\t\t\t\t       r_ir_rx_parents, 0x1c0,\n\t\t\t\t       0, 5,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 2,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_r_ir_rx_clk,\t\"bus-r-ir-rx\",\t&r_apb0_hw,\n\t\t\t  0x1cc, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_r_rtc_clk,\t\"bus-r-rtc\",\t&r_ahb_hw,\n\t\t\t  0x20c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_r_cpucfg_clk,\t\"bus-r-cpucfg\",\t&r_apb0_hw,\n\t\t\t  0x22c, BIT(0), 0);\n\nstatic struct ccu_common *sun20i_d1_r_ccu_clks[] = {\n\t&r_ahb_clk.common,\n\t&r_apb0_clk.common,\n\t&bus_r_timer_clk.common,\n\t&bus_r_twd_clk.common,\n\t&bus_r_ppu_clk.common,\n\t&r_ir_rx_clk.common,\n\t&bus_r_ir_rx_clk.common,\n\t&bus_r_rtc_clk.common,\n\t&bus_r_cpucfg_clk.common,\n};\n\nstatic struct clk_hw_onecell_data sun20i_d1_r_hw_clks = {\n\t.num\t= CLK_NUMBER,\n\t.hws\t= {\n\t\t[CLK_R_AHB]\t\t= &r_ahb_clk.common.hw,\n\t\t[CLK_R_APB0]\t\t= &r_apb0_clk.common.hw,\n\t\t[CLK_BUS_R_TIMER]\t= &bus_r_timer_clk.common.hw,\n\t\t[CLK_BUS_R_TWD]\t\t= &bus_r_twd_clk.common.hw,\n\t\t[CLK_BUS_R_PPU]\t\t= &bus_r_ppu_clk.common.hw,\n\t\t[CLK_R_IR_RX]\t\t= &r_ir_rx_clk.common.hw,\n\t\t[CLK_BUS_R_IR_RX]\t= &bus_r_ir_rx_clk.common.hw,\n\t\t[CLK_BUS_R_RTC]\t\t= &bus_r_rtc_clk.common.hw,\n\t\t[CLK_BUS_R_CPUCFG]\t= &bus_r_cpucfg_clk.common.hw,\n\t},\n};\n\nstatic struct ccu_reset_map sun20i_d1_r_ccu_resets[] = {\n\t[RST_BUS_R_TIMER]\t= { 0x11c, BIT(16) },\n\t[RST_BUS_R_TWD]\t\t= { 0x12c, BIT(16) },\n\t[RST_BUS_R_PPU]\t\t= { 0x1ac, BIT(16) },\n\t[RST_BUS_R_IR_RX]\t= { 0x1cc, BIT(16) },\n\t[RST_BUS_R_RTC]\t\t= { 0x20c, BIT(16) },\n\t[RST_BUS_R_CPUCFG]\t= { 0x22c, BIT(16) },\n};\n\nstatic const struct sunxi_ccu_desc sun20i_d1_r_ccu_desc = {\n\t.ccu_clks\t= sun20i_d1_r_ccu_clks,\n\t.num_ccu_clks\t= ARRAY_SIZE(sun20i_d1_r_ccu_clks),\n\n\t.hw_clks\t= &sun20i_d1_r_hw_clks,\n\n\t.resets\t\t= sun20i_d1_r_ccu_resets,\n\t.num_resets\t= ARRAY_SIZE(sun20i_d1_r_ccu_resets),\n};\n\nstatic int sun20i_d1_r_ccu_probe(struct platform_device *pdev)\n{\n\tvoid __iomem *reg;\n\n\treg = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(reg))\n\t\treturn PTR_ERR(reg);\n\n\treturn devm_sunxi_ccu_probe(&pdev->dev, reg, &sun20i_d1_r_ccu_desc);\n}\n\nstatic const struct of_device_id sun20i_d1_r_ccu_ids[] = {\n\t{ .compatible = \"allwinner,sun20i-d1-r-ccu\" },\n\t{ }\n};\n\nstatic struct platform_driver sun20i_d1_r_ccu_driver = {\n\t.probe\t= sun20i_d1_r_ccu_probe,\n\t.driver\t= {\n\t\t.name\t\t\t= \"sun20i-d1-r-ccu\",\n\t\t.suppress_bind_attrs\t= true,\n\t\t.of_match_table\t\t= sun20i_d1_r_ccu_ids,\n\t},\n};\nmodule_platform_driver(sun20i_d1_r_ccu_driver);\n\nMODULE_IMPORT_NS(SUNXI_CCU);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}