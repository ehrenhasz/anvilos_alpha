{
  "module_name": "ccu_common.h",
  "hash_id": "2138a5751dc145fa6e8584a3858a027884780e5cf61e0ca4498038c95747cfb4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu_common.h",
  "human_readable_source": " \n \n\n#ifndef _COMMON_H_\n#define _COMMON_H_\n\n#include <linux/compiler.h>\n#include <linux/clk-provider.h>\n\n#define CCU_FEATURE_FRACTIONAL\t\tBIT(0)\n#define CCU_FEATURE_VARIABLE_PREDIV\tBIT(1)\n#define CCU_FEATURE_FIXED_PREDIV\tBIT(2)\n#define CCU_FEATURE_FIXED_POSTDIV\tBIT(3)\n#define CCU_FEATURE_ALL_PREDIV\t\tBIT(4)\n#define CCU_FEATURE_LOCK_REG\t\tBIT(5)\n#define CCU_FEATURE_MMC_TIMING_SWITCH\tBIT(6)\n#define CCU_FEATURE_SIGMA_DELTA_MOD\tBIT(7)\n#define CCU_FEATURE_KEY_FIELD\t\tBIT(8)\n#define CCU_FEATURE_CLOSEST_RATE\tBIT(9)\n\n \n#define CCU_MMC_NEW_TIMING_MODE\t\tBIT(30)\n\nstruct device_node;\n\nstruct ccu_common {\n\tvoid __iomem\t*base;\n\tu16\t\treg;\n\tu16\t\tlock_reg;\n\tu32\t\tprediv;\n\n\tunsigned long\tfeatures;\n\tspinlock_t\t*lock;\n\tstruct clk_hw\thw;\n};\n\nstatic inline struct ccu_common *hw_to_ccu_common(struct clk_hw *hw)\n{\n\treturn container_of(hw, struct ccu_common, hw);\n}\n\nstruct sunxi_ccu_desc {\n\tstruct ccu_common\t\t**ccu_clks;\n\tunsigned long\t\t\tnum_ccu_clks;\n\n\tstruct clk_hw_onecell_data\t*hw_clks;\n\n\tstruct ccu_reset_map\t\t*resets;\n\tunsigned long\t\t\tnum_resets;\n};\n\nvoid ccu_helper_wait_for_lock(struct ccu_common *common, u32 lock);\n\nbool ccu_is_better_rate(struct ccu_common *common,\n\t\t\tunsigned long target_rate,\n\t\t\tunsigned long current_rate,\n\t\t\tunsigned long best_rate);\n\nstruct ccu_pll_nb {\n\tstruct notifier_block\tclk_nb;\n\tstruct ccu_common\t*common;\n\n\tu32\tenable;\n\tu32\tlock;\n};\n\n#define to_ccu_pll_nb(_nb) container_of(_nb, struct ccu_pll_nb, clk_nb)\n\nint ccu_pll_notifier_register(struct ccu_pll_nb *pll_nb);\n\nint devm_sunxi_ccu_probe(struct device *dev, void __iomem *reg,\n\t\t\t const struct sunxi_ccu_desc *desc);\nvoid of_sunxi_ccu_probe(struct device_node *node, void __iomem *reg,\n\t\t\tconst struct sunxi_ccu_desc *desc);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}