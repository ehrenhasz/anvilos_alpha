{
  "module_name": "ccu-sun20i-d1.c",
  "hash_id": "478e02d741aff5522083436db1d5c97cff392b68cbbd5fa49929aa92a1cc2536",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu-sun20i-d1.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/io.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n\n#include \"../clk.h\"\n\n#include \"ccu_common.h\"\n#include \"ccu_reset.h\"\n\n#include \"ccu_div.h\"\n#include \"ccu_gate.h\"\n#include \"ccu_mp.h\"\n#include \"ccu_mult.h\"\n#include \"ccu_nk.h\"\n#include \"ccu_nkm.h\"\n#include \"ccu_nkmp.h\"\n#include \"ccu_nm.h\"\n\n#include \"ccu-sun20i-d1.h\"\n\nstatic const struct clk_parent_data osc24M[] = {\n\t{ .fw_name = \"hosc\" }\n};\n\n \n#define SUN20I_D1_PLL_CPUX_REG\t\t0x000\nstatic struct ccu_mult pll_cpux_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.mult\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.common\t\t= {\n\t\t.reg\t\t= 0x000,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-cpux\", osc24M,\n\t\t\t\t\t\t\t   &ccu_mult_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\n \n#define SUN20I_D1_PLL_DDR0_REG\t\t0x010\nstatic struct ccu_nkmp pll_ddr0_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x010,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-ddr0\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nkmp_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN20I_D1_PLL_PERIPH0_REG\t0x020\nstatic struct ccu_nm pll_periph0_4x_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x020,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-periph0-4x\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nm_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const struct clk_hw *pll_periph0_4x_hws[] = {\n\t&pll_periph0_4x_clk.common.hw\n};\nstatic SUNXI_CCU_M_HWS(pll_periph0_2x_clk, \"pll-periph0-2x\",\n\t\t       pll_periph0_4x_hws, 0x020, 16, 3, 0);\nstatic SUNXI_CCU_M_HWS(pll_periph0_800M_clk, \"pll-periph0-800M\",\n\t\t       pll_periph0_4x_hws, 0x020, 20, 3, 0);\n\nstatic const struct clk_hw *pll_periph0_2x_hws[] = {\n\t&pll_periph0_2x_clk.common.hw\n};\nstatic CLK_FIXED_FACTOR_HWS(pll_periph0_clk, \"pll-periph0\",\n\t\t\t    pll_periph0_2x_hws, 2, 1, 0);\n\nstatic const struct clk_hw *pll_periph0_hws[] = { &pll_periph0_clk.hw };\nstatic CLK_FIXED_FACTOR_HWS(pll_periph0_div3_clk, \"pll-periph0-div3\",\n\t\t\t    pll_periph0_2x_hws, 6, 1, 0);\n\n \n#define SUN20I_D1_PLL_VIDEO0_REG\t0x040\nstatic struct ccu_nm pll_video0_4x_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.min_rate\t= 252000000U,\n\t.max_rate\t= 2400000000U,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x040,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-video0-4x\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nm_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const struct clk_hw *pll_video0_4x_hws[] = {\n\t&pll_video0_4x_clk.common.hw\n};\nstatic CLK_FIXED_FACTOR_HWS(pll_video0_2x_clk, \"pll-video0-2x\",\n\t\t\t    pll_video0_4x_hws, 2, 1, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HWS(pll_video0_clk, \"pll-video0\",\n\t\t\t    pll_video0_4x_hws, 4, 1, CLK_SET_RATE_PARENT);\n\n#define SUN20I_D1_PLL_VIDEO1_REG\t0x048\nstatic struct ccu_nm pll_video1_4x_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.min_rate\t= 252000000U,\n\t.max_rate\t= 2400000000U,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x048,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-video1-4x\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nm_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const struct clk_hw *pll_video1_4x_hws[] = {\n\t&pll_video1_4x_clk.common.hw\n};\nstatic CLK_FIXED_FACTOR_HWS(pll_video1_2x_clk, \"pll-video1-2x\",\n\t\t\t    pll_video1_4x_hws, 2, 1, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HWS(pll_video1_clk, \"pll-video1\",\n\t\t\t    pll_video1_4x_hws, 4, 1, CLK_SET_RATE_PARENT);\n\n#define SUN20I_D1_PLL_VE_REG\t\t0x058\nstatic struct ccu_nkmp pll_ve_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x058,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-ve\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nkmp_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\n \n#define SUN20I_D1_PLL_AUDIO0_REG\t\t0x078\nstatic struct ccu_sdm_setting pll_audio0_sdm_table[] = {\n\t{ .rate = 90316800, .pattern = 0xc001288d, .m = 6, .n = 22 },\n};\n\nstatic struct ccu_nm pll_audio0_4x_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(16, 6),\n\t.sdm\t\t= _SUNXI_CCU_SDM(pll_audio0_sdm_table, BIT(24),\n\t\t\t\t\t 0x178, BIT(31)),\n\t.min_rate\t= 180000000U,\n\t.max_rate\t= 3000000000U,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x078,\n\t\t.features\t= CCU_FEATURE_SIGMA_DELTA_MOD,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-audio0-4x\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nm_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const struct clk_hw *pll_audio0_4x_hws[] = {\n\t&pll_audio0_4x_clk.common.hw\n};\nstatic CLK_FIXED_FACTOR_HWS(pll_audio0_2x_clk, \"pll-audio0-2x\",\n\t\t\t    pll_audio0_4x_hws, 2, 1, 0);\nstatic CLK_FIXED_FACTOR_HWS(pll_audio0_clk, \"pll-audio0\",\n\t\t\t    pll_audio0_4x_hws, 4, 1, 0);\n\n \n#define SUN20I_D1_PLL_AUDIO1_REG\t\t0x080\nstatic struct ccu_nm pll_audio1_clk = {\n\t.enable\t\t= BIT(27),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),\n\t.min_rate\t= 180000000U,\n\t.max_rate\t= 3000000000U,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x080,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"pll-audio1\", osc24M,\n\t\t\t\t\t\t\t   &ccu_nm_ops,\n\t\t\t\t\t\t\t   CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const struct clk_hw *pll_audio1_hws[] = {\n\t&pll_audio1_clk.common.hw\n};\nstatic SUNXI_CCU_M_HWS(pll_audio1_div2_clk, \"pll-audio1-div2\",\n\t\t       pll_audio1_hws, 0x080, 16, 3, 0);\nstatic SUNXI_CCU_M_HWS(pll_audio1_div5_clk, \"pll-audio1-div5\",\n\t\t       pll_audio1_hws, 0x080, 20, 3, 0);\n\n \nstatic const struct clk_parent_data cpux_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"iosc\" },\n\t{ .hw = &pll_cpux_clk.common.hw },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_periph0_800M_clk.common.hw },\n};\nstatic SUNXI_CCU_MUX_DATA(cpux_clk, \"cpux\", cpux_parents,\n\t\t\t  0x500, 24, 3, CLK_SET_RATE_PARENT | CLK_IS_CRITICAL);\n\nstatic const struct clk_hw *cpux_hws[] = { &cpux_clk.common.hw };\nstatic SUNXI_CCU_M_HWS(cpux_axi_clk, \"cpux-axi\",\n\t\t       cpux_hws, 0x500, 0, 2, 0);\nstatic SUNXI_CCU_M_HWS(cpux_apb_clk, \"cpux-apb\",\n\t\t       cpux_hws, 0x500, 8, 2, 0);\n\nstatic const struct clk_parent_data psi_ahb_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"iosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX(psi_ahb_clk, \"psi-ahb\", psi_ahb_parents, 0x510,\n\t\t\t\t  0, 2,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 2,\t \n\t\t\t\t  0);\n\nstatic const struct clk_parent_data apb0_apb1_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .hw = &psi_ahb_clk.common.hw },\n\t{ .hw = &pll_periph0_clk.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX(apb0_clk, \"apb0\", apb0_apb1_parents, 0x520,\n\t\t\t\t  0, 5,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 2,\t \n\t\t\t\t  0);\n\nstatic SUNXI_CCU_MP_DATA_WITH_MUX(apb1_clk, \"apb1\", apb0_apb1_parents, 0x524,\n\t\t\t\t  0, 5,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 2,\t \n\t\t\t\t  0);\n\nstatic const struct clk_hw *psi_ahb_hws[] = { &psi_ahb_clk.common.hw };\nstatic const struct clk_hw *apb0_hws[] = { &apb0_clk.common.hw };\nstatic const struct clk_hw *apb1_hws[] = { &apb1_clk.common.hw };\n\nstatic const struct clk_hw *de_di_g2d_parents[] = {\n\t&pll_periph0_2x_clk.common.hw,\n\t&pll_video0_4x_clk.common.hw,\n\t&pll_video1_4x_clk.common.hw,\n\t&pll_audio1_div2_clk.common.hw,\n};\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(de_clk, \"de\", de_di_g2d_parents, 0x600,\n\t\t\t\t    0, 5,\t \n\t\t\t\t    24, 3,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_de_clk, \"bus-de\", psi_ahb_hws,\n\t\t\t  0x60c, BIT(0), 0);\n\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(di_clk, \"di\", de_di_g2d_parents, 0x620,\n\t\t\t\t    0, 5,\t \n\t\t\t\t    24, 3,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_di_clk, \"bus-di\", psi_ahb_hws,\n\t\t\t  0x62c, BIT(0), 0);\n\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(g2d_clk, \"g2d\", de_di_g2d_parents, 0x630,\n\t\t\t\t    0, 5,\t \n\t\t\t\t    24, 3,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_g2d_clk, \"bus-g2d\", psi_ahb_hws,\n\t\t\t  0x63c, BIT(0), 0);\n\nstatic const struct clk_parent_data ce_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_periph0_clk.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(ce_clk, \"ce\", ce_parents, 0x680,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_ce_clk, \"bus-ce\", psi_ahb_hws,\n\t\t\t  0x68c, BIT(0), 0);\n\nstatic const struct clk_hw *ve_parents[] = {\n\t&pll_ve_clk.common.hw,\n\t&pll_periph0_2x_clk.common.hw,\n};\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(ve_clk, \"ve\", ve_parents, 0x690,\n\t\t\t\t    0, 5,\t \n\t\t\t\t    24, 1,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_ve_clk, \"bus-ve\", psi_ahb_hws,\n\t\t\t  0x69c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dma_clk, \"bus-dma\", psi_ahb_hws,\n\t\t\t  0x70c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_msgbox0_clk, \"bus-msgbox0\", psi_ahb_hws,\n\t\t\t  0x71c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_msgbox1_clk, \"bus-msgbox1\", psi_ahb_hws,\n\t\t\t  0x71c, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_msgbox2_clk, \"bus-msgbox2\", psi_ahb_hws,\n\t\t\t  0x71c, BIT(2), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_spinlock_clk, \"bus-spinlock\", psi_ahb_hws,\n\t\t\t  0x72c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_hstimer_clk, \"bus-hstimer\", psi_ahb_hws,\n\t\t\t  0x73c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(avs_clk, \"avs\", osc24M,\n\t\t\t   0x740, BIT(31), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dbg_clk, \"bus-dbg\", psi_ahb_hws,\n\t\t\t  0x78c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_pwm_clk, \"bus-pwm\", apb0_hws,\n\t\t\t  0x7ac, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_iommu_clk, \"bus-iommu\", apb0_hws,\n\t\t\t  0x7bc, BIT(0), 0);\n\nstatic const struct clk_hw *dram_parents[] = {\n\t&pll_ddr0_clk.common.hw,\n\t&pll_audio1_div2_clk.common.hw,\n\t&pll_periph0_2x_clk.common.hw,\n\t&pll_periph0_800M_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(dram_clk, \"dram\", dram_parents, 0x800,\n\t\t\t\t     0, 2,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 2,\t \n\t\t\t\t     BIT(31), CLK_IS_CRITICAL);\n\nstatic CLK_FIXED_FACTOR_HW(mbus_clk, \"mbus\",\n\t\t\t   &dram_clk.common.hw, 4, 1, 0);\n\nstatic const struct clk_hw *mbus_hws[] = { &mbus_clk.hw };\n\nstatic SUNXI_CCU_GATE_HWS(mbus_dma_clk, \"mbus-dma\", mbus_hws,\n\t\t\t  0x804, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_ve_clk, \"mbus-ve\", mbus_hws,\n\t\t\t  0x804, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_ce_clk, \"mbus-ce\", mbus_hws,\n\t\t\t  0x804, BIT(2), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_tvin_clk, \"mbus-tvin\", mbus_hws,\n\t\t\t  0x804, BIT(7), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_csi_clk, \"mbus-csi\", mbus_hws,\n\t\t\t  0x804, BIT(8), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_g2d_clk, \"mbus-g2d\", mbus_hws,\n\t\t\t  0x804, BIT(10), 0);\nstatic SUNXI_CCU_GATE_HWS(mbus_riscv_clk, \"mbus-riscv\", mbus_hws,\n\t\t\t  0x804, BIT(11), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dram_clk, \"bus-dram\", psi_ahb_hws,\n\t\t\t  0x80c, BIT(0), CLK_IS_CRITICAL);\n\nstatic const struct clk_parent_data mmc0_mmc1_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(mmc0_clk, \"mmc0\", mmc0_mmc1_parents, 0x830,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(mmc1_clk, \"mmc1\", mmc0_mmc1_parents, 0x834,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic const struct clk_parent_data mmc2_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_periph0_800M_clk.common.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(mmc2_clk, \"mmc2\", mmc2_parents, 0x838,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_mmc0_clk, \"bus-mmc0\", psi_ahb_hws,\n\t\t\t  0x84c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_mmc1_clk, \"bus-mmc1\", psi_ahb_hws,\n\t\t\t  0x84c, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_mmc2_clk, \"bus-mmc2\", psi_ahb_hws,\n\t\t\t  0x84c, BIT(2), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_uart0_clk, \"bus-uart0\", apb1_hws,\n\t\t\t  0x90c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_uart1_clk, \"bus-uart1\", apb1_hws,\n\t\t\t  0x90c, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_uart2_clk, \"bus-uart2\", apb1_hws,\n\t\t\t  0x90c, BIT(2), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_uart3_clk, \"bus-uart3\", apb1_hws,\n\t\t\t  0x90c, BIT(3), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_uart4_clk, \"bus-uart4\", apb1_hws,\n\t\t\t  0x90c, BIT(4), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_uart5_clk, \"bus-uart5\", apb1_hws,\n\t\t\t  0x90c, BIT(5), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_i2c0_clk, \"bus-i2c0\", apb1_hws,\n\t\t\t  0x91c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_i2c1_clk, \"bus-i2c1\", apb1_hws,\n\t\t\t  0x91c, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_i2c2_clk, \"bus-i2c2\", apb1_hws,\n\t\t\t  0x91c, BIT(2), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_i2c3_clk, \"bus-i2c3\", apb1_hws,\n\t\t\t  0x91c, BIT(3), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_can0_clk, \"bus-can0\", apb1_hws,\n\t\t\t  0x92c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_can1_clk, \"bus-can1\", apb1_hws,\n\t\t\t  0x92c, BIT(1), 0);\n\nstatic const struct clk_parent_data spi_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n\t{ .hw = &pll_audio1_div5_clk.common.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(spi0_clk, \"spi0\", spi_parents, 0x940,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(spi1_clk, \"spi1\", spi_parents, 0x944,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_spi0_clk, \"bus-spi0\", psi_ahb_hws,\n\t\t\t  0x96c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_spi1_clk, \"bus-spi1\", psi_ahb_hws,\n\t\t\t  0x96c, BIT(1), 0);\n\nstatic SUNXI_CCU_GATE_HWS_WITH_PREDIV(emac_25M_clk, \"emac-25M\", pll_periph0_hws,\n\t\t\t\t      0x970, BIT(31) | BIT(30), 24, 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_emac_clk, \"bus-emac\", psi_ahb_hws,\n\t\t\t  0x97c, BIT(0), 0);\n\nstatic const struct clk_parent_data ir_tx_ledc_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n};\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(ir_tx_clk, \"ir-tx\", ir_tx_ledc_parents, 0x9c0,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 3,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_ir_tx_clk, \"bus-ir-tx\", apb0_hws,\n\t\t\t  0x9cc, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_gpadc_clk, \"bus-gpadc\", apb0_hws,\n\t\t\t  0x9ec, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_ths_clk, \"bus-ths\", apb0_hws,\n\t\t\t  0x9fc, BIT(0), 0);\n\nstatic const struct clk_hw *i2s_spdif_tx_parents[] = {\n\t&pll_audio0_clk.hw,\n\t&pll_audio0_4x_clk.common.hw,\n\t&pll_audio1_div2_clk.common.hw,\n\t&pll_audio1_div5_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(i2s0_clk, \"i2s0\", i2s_spdif_tx_parents, 0xa10,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(i2s1_clk, \"i2s1\", i2s_spdif_tx_parents, 0xa14,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(i2s2_clk, \"i2s2\", i2s_spdif_tx_parents, 0xa18,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic const struct clk_hw *i2s2_asrc_parents[] = {\n\t&pll_audio0_4x_clk.common.hw,\n\t&pll_periph0_clk.hw,\n\t&pll_audio1_div2_clk.common.hw,\n\t&pll_audio1_div5_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(i2s2_asrc_clk, \"i2s2-asrc\", i2s2_asrc_parents, 0xa1c,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_i2s0_clk, \"bus-i2s0\", apb0_hws,\n\t\t\t  0xa20, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_i2s1_clk, \"bus-i2s1\", apb0_hws,\n\t\t\t  0xa20, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_i2s2_clk, \"bus-i2s2\", apb0_hws,\n\t\t\t  0xa20, BIT(2), 0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(spdif_tx_clk, \"spdif-tx\", i2s_spdif_tx_parents, 0xa24,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic const struct clk_hw *spdif_rx_parents[] = {\n\t&pll_periph0_clk.hw,\n\t&pll_audio1_div2_clk.common.hw,\n\t&pll_audio1_div5_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(spdif_rx_clk, \"spdif-rx\", spdif_rx_parents, 0xa28,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_spdif_clk, \"bus-spdif\", apb0_hws,\n\t\t\t  0xa2c, BIT(0), 0);\n\nstatic const struct clk_hw *dmic_codec_parents[] = {\n\t&pll_audio0_clk.hw,\n\t&pll_audio1_div2_clk.common.hw,\n\t&pll_audio1_div5_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(dmic_clk, \"dmic\", dmic_codec_parents, 0xa40,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dmic_clk, \"bus-dmic\", apb0_hws,\n\t\t\t  0xa4c, BIT(0), 0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(audio_dac_clk, \"audio-dac\", dmic_codec_parents, 0xa50,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(audio_adc_clk, \"audio-adc\", dmic_codec_parents, 0xa54,\n\t\t\t\t     0, 5,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_audio_clk, \"bus-audio\", apb0_hws,\n\t\t\t  0xa5c, BIT(0), 0);\n\n\n \nstatic const struct clk_parent_data usb_ohci_parents[] = {\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n};\nstatic const struct ccu_mux_fixed_prediv usb_ohci_predivs[] = {\n\t{ .index = 0, .div = 50 },\n\t{ .index = 1, .div = 2 },\n};\n\nstatic struct ccu_mux usb_ohci0_clk = {\n\t.enable\t\t= BIT(31),\n\t.mux\t\t= {\n\t\t.shift\t\t= 24,\n\t\t.width\t\t= 2,\n\t\t.fixed_predivs\t= usb_ohci_predivs,\n\t\t.n_predivs\t= ARRAY_SIZE(usb_ohci_predivs),\n\t},\n\t.common\t\t= {\n\t\t.reg\t\t= 0xa70,\n\t\t.features\t= CCU_FEATURE_FIXED_PREDIV,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"usb-ohci0\",\n\t\t\t\t\t\t\t   usb_ohci_parents,\n\t\t\t\t\t\t\t   &ccu_mux_ops,\n\t\t\t\t\t\t\t   0),\n\t},\n};\n\nstatic struct ccu_mux usb_ohci1_clk = {\n\t.enable\t\t= BIT(31),\n\t.mux\t\t= {\n\t\t.shift\t\t= 24,\n\t\t.width\t\t= 2,\n\t\t.fixed_predivs\t= usb_ohci_predivs,\n\t\t.n_predivs\t= ARRAY_SIZE(usb_ohci_predivs),\n\t},\n\t.common\t\t= {\n\t\t.reg\t\t= 0xa74,\n\t\t.features\t= CCU_FEATURE_FIXED_PREDIV,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(\"usb-ohci1\",\n\t\t\t\t\t\t\t   usb_ohci_parents,\n\t\t\t\t\t\t\t   &ccu_mux_ops,\n\t\t\t\t\t\t\t   0),\n\t},\n};\n\nstatic SUNXI_CCU_GATE_HWS(bus_ohci0_clk, \"bus-ohci0\", psi_ahb_hws,\n\t\t\t  0xa8c, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_ohci1_clk, \"bus-ohci1\", psi_ahb_hws,\n\t\t\t  0xa8c, BIT(1), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_ehci0_clk, \"bus-ehci0\", psi_ahb_hws,\n\t\t\t  0xa8c, BIT(4), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_ehci1_clk, \"bus-ehci1\", psi_ahb_hws,\n\t\t\t  0xa8c, BIT(5), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_otg_clk, \"bus-otg\", psi_ahb_hws,\n\t\t\t  0xa8c, BIT(8), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_lradc_clk, \"bus-lradc\", apb0_hws,\n\t\t\t  0xa9c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dpss_top_clk, \"bus-dpss-top\", psi_ahb_hws,\n\t\t\t  0xabc, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(hdmi_24M_clk, \"hdmi-24M\", osc24M,\n\t\t\t   0xb04, BIT(31), 0);\n\nstatic SUNXI_CCU_GATE_HWS_WITH_PREDIV(hdmi_cec_32k_clk, \"hdmi-cec-32k\",\n\t\t\t\t      pll_periph0_2x_hws,\n\t\t\t\t      0xb10, BIT(30), 36621, 0);\n\nstatic const struct clk_parent_data hdmi_cec_parents[] = {\n\t{ .fw_name = \"losc\" },\n\t{ .hw = &hdmi_cec_32k_clk.common.hw },\n};\nstatic SUNXI_CCU_MUX_DATA_WITH_GATE(hdmi_cec_clk, \"hdmi-cec\", hdmi_cec_parents, 0xb10,\n\t\t\t\t    24, 1,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_hdmi_clk, \"bus-hdmi\", psi_ahb_hws,\n\t\t\t  0xb1c, BIT(0), 0);\n\nstatic const struct clk_parent_data mipi_dsi_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_video0_2x_clk.hw },\n\t{ .hw = &pll_video1_2x_clk.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n};\nstatic SUNXI_CCU_M_DATA_WITH_MUX_GATE(mipi_dsi_clk, \"mipi-dsi\", mipi_dsi_parents, 0xb24,\n\t\t\t\t      0, 4,\t \n\t\t\t\t      24, 3,\t \n\t\t\t\t      BIT(31),\t \n\t\t\t\t      CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_mipi_dsi_clk, \"bus-mipi-dsi\", psi_ahb_hws,\n\t\t\t  0xb4c, BIT(0), 0);\n\nstatic const struct clk_hw *tcon_tve_parents[] = {\n\t&pll_video0_clk.hw,\n\t&pll_video0_4x_clk.common.hw,\n\t&pll_video1_clk.hw,\n\t&pll_video1_4x_clk.common.hw,\n\t&pll_periph0_2x_clk.common.hw,\n\t&pll_audio1_div2_clk.common.hw,\n};\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(tcon_lcd0_clk, \"tcon-lcd0\", tcon_tve_parents, 0xb60,\n\t\t\t\t     0, 4,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tcon_lcd0_clk, \"bus-tcon-lcd0\", psi_ahb_hws,\n\t\t\t  0xb7c, BIT(0), 0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(tcon_tv_clk, \"tcon-tv\", tcon_tve_parents, 0xb80,\n\t\t\t\t     0, 4,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tcon_tv_clk, \"bus-tcon-tv\", psi_ahb_hws,\n\t\t\t  0xb9c, BIT(0), 0);\n\nstatic SUNXI_CCU_MP_HW_WITH_MUX_GATE(tve_clk, \"tve\", tcon_tve_parents, 0xbb0,\n\t\t\t\t     0, 4,\t \n\t\t\t\t     8, 2,\t \n\t\t\t\t     24, 3,\t \n\t\t\t\t     BIT(31),\t \n\t\t\t\t     0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tve_top_clk, \"bus-tve-top\", psi_ahb_hws,\n\t\t\t  0xbbc, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_tve_clk, \"bus-tve\", psi_ahb_hws,\n\t\t\t  0xbbc, BIT(1), 0);\n\nstatic const struct clk_parent_data tvd_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_video0_clk.hw },\n\t{ .hw = &pll_video1_clk.hw },\n\t{ .hw = &pll_periph0_clk.hw },\n};\nstatic SUNXI_CCU_M_DATA_WITH_MUX_GATE(tvd_clk, \"tvd\", tvd_parents, 0xbc0,\n\t\t\t\t      0, 5,\t \n\t\t\t\t      24, 3,\t \n\t\t\t\t      BIT(31),\t \n\t\t\t\t      0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tvd_top_clk, \"bus-tvd-top\", psi_ahb_hws,\n\t\t\t  0xbdc, BIT(0), 0);\nstatic SUNXI_CCU_GATE_HWS(bus_tvd_clk, \"bus-tvd\", psi_ahb_hws,\n\t\t\t  0xbdc, BIT(1), 0);\n\nstatic SUNXI_CCU_MP_DATA_WITH_MUX_GATE(ledc_clk, \"ledc\", ir_tx_ledc_parents, 0xbf0,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       8, 2,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_ledc_clk, \"bus-ledc\", psi_ahb_hws,\n\t\t\t  0xbfc, BIT(0), 0);\n\nstatic const struct clk_hw *csi_top_parents[] = {\n\t&pll_periph0_2x_clk.common.hw,\n\t&pll_video0_2x_clk.hw,\n\t&pll_video1_2x_clk.hw,\n};\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(csi_top_clk, \"csi-top\", csi_top_parents, 0xc04,\n\t\t\t\t    0, 4,\t \n\t\t\t\t    24, 3,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    0);\n\nstatic const struct clk_parent_data csi_mclk_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_video0_clk.hw },\n\t{ .hw = &pll_video1_clk.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n\t{ .hw = &pll_audio1_div5_clk.common.hw },\n};\nstatic SUNXI_CCU_M_DATA_WITH_MUX_GATE(csi_mclk_clk, \"csi-mclk\", csi_mclk_parents, 0xc08,\n\t\t\t\t      0, 5,\t \n\t\t\t\t      24, 3,\t \n\t\t\t\t      BIT(31),\t \n\t\t\t\t      0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_csi_clk, \"bus-csi\", psi_ahb_hws,\n\t\t\t  0xc1c, BIT(0), 0);\n\nstatic const struct clk_parent_data tpadc_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .hw = &pll_audio0_clk.hw },\n};\nstatic SUNXI_CCU_MUX_DATA_WITH_GATE(tpadc_clk, \"tpadc\", tpadc_parents, 0xc50,\n\t\t\t\t    24, 3,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tpadc_clk, \"bus-tpadc\", apb0_hws,\n\t\t\t  0xc5c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_tzma_clk, \"bus-tzma\", apb0_hws,\n\t\t\t  0xc6c, BIT(0), 0);\n\nstatic const struct clk_parent_data dsp_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"iosc\" },\n\t{ .hw = &pll_periph0_2x_clk.common.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n};\nstatic SUNXI_CCU_M_DATA_WITH_MUX_GATE(dsp_clk, \"dsp\", dsp_parents, 0xc70,\n\t\t\t\t      0, 5,\t \n\t\t\t\t      24, 3,\t \n\t\t\t\t      BIT(31),\t \n\t\t\t\t      0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_dsp_cfg_clk, \"bus-dsp-cfg\", psi_ahb_hws,\n\t\t\t  0xc7c, BIT(1), 0);\n\n \nstatic const struct clk_parent_data riscv_parents[] = {\n\t{ .fw_name = \"hosc\" },\n\t{ .fw_name = \"losc\" },\n\t{ .fw_name = \"iosc\" },\n\t{ .hw = &pll_periph0_800M_clk.common.hw },\n\t{ .hw = &pll_periph0_clk.hw },\n\t{ .hw = &pll_cpux_clk.common.hw },\n\t{ .hw = &pll_audio1_div2_clk.common.hw },\n};\nstatic SUNXI_CCU_M_DATA_WITH_MUX(riscv_clk, \"riscv\", riscv_parents, 0xd00,\n\t\t\t\t 0, 5,\t \n\t\t\t\t 24, 3,\t \n\t\t\t\t CLK_SET_RATE_PARENT | CLK_IS_CRITICAL);\n\n \nstatic struct clk_div_table riscv_axi_table[] = {\n\t{ .val = 1, .div = 2 },\n\t{ .val = 2, .div = 3 },\n\t{ .val = 3, .div = 4 },\n\t{   }\n};\nstatic SUNXI_CCU_DIV_TABLE_HW(riscv_axi_clk, \"riscv-axi\", &riscv_clk.common.hw,\n\t\t\t      0xd00, 8, 2, riscv_axi_table, 0);\n\nstatic SUNXI_CCU_GATE_HWS(bus_riscv_cfg_clk, \"bus-riscv-cfg\", psi_ahb_hws,\n\t\t\t  0xd0c, BIT(0), CLK_IS_CRITICAL);\n\nstatic SUNXI_CCU_GATE_DATA(fanout_24M_clk, \"fanout-24M\", osc24M,\n\t\t\t   0xf30, BIT(0), 0);\nstatic SUNXI_CCU_GATE_DATA_WITH_PREDIV(fanout_12M_clk, \"fanout-12M\", osc24M,\n\t\t\t\t       0xf30, BIT(1), 2, 0);\nstatic SUNXI_CCU_GATE_HWS_WITH_PREDIV(fanout_16M_clk, \"fanout-16M\", pll_periph0_2x_hws,\n\t\t\t\t      0xf30, BIT(2), 75, 0);\nstatic SUNXI_CCU_GATE_HWS_WITH_PREDIV(fanout_25M_clk, \"fanout-25M\", pll_periph0_hws,\n\t\t\t\t      0xf30, BIT(3), 24, 0);\nstatic SUNXI_CCU_GATE_HWS_WITH_PREDIV(fanout_32k_clk, \"fanout-32k\", pll_periph0_2x_hws,\n\t\t\t\t      0xf30, BIT(4), 36621, 0);\n\n \n#define SUN20I_D1_FANOUT_27M_REG\t0xf34\nstatic const struct clk_hw *fanout_27M_parents[] = {\n\t&pll_video0_clk.hw,\n\t&pll_video1_clk.hw,\n};\nstatic SUNXI_CCU_M_HW_WITH_MUX_GATE(fanout_27M_clk, \"fanout-27M\", fanout_27M_parents, 0xf34,\n\t\t\t\t    0, 5,\t \n\t\t\t\t    24, 2,\t \n\t\t\t\t    BIT(31),\t \n\t\t\t\t    0);\n\nstatic SUNXI_CCU_M_HWS_WITH_GATE(fanout_pclk_clk, \"fanout-pclk\", apb0_hws, 0xf38,\n\t\t\t\t 0, 5,\t\t \n\t\t\t\t BIT(31),\t \n\t\t\t\t 0);\n\nstatic const struct clk_hw *fanout_parents[] = {\n\t&fanout_32k_clk.common.hw,\n\t&fanout_12M_clk.common.hw,\n\t&fanout_16M_clk.common.hw,\n\t&fanout_24M_clk.common.hw,\n\t&fanout_25M_clk.common.hw,\n\t&fanout_27M_clk.common.hw,\n\t&fanout_pclk_clk.common.hw,\n};\nstatic SUNXI_CCU_MUX_HW_WITH_GATE(fanout0_clk, \"fanout0\", fanout_parents, 0xf3c,\n\t\t\t\t  0, 3,\t\t \n\t\t\t\t  BIT(21),\t \n\t\t\t\t  0);\nstatic SUNXI_CCU_MUX_HW_WITH_GATE(fanout1_clk, \"fanout1\", fanout_parents, 0xf3c,\n\t\t\t\t  3, 3,\t\t \n\t\t\t\t  BIT(22),\t \n\t\t\t\t  0);\nstatic SUNXI_CCU_MUX_HW_WITH_GATE(fanout2_clk, \"fanout2\", fanout_parents, 0xf3c,\n\t\t\t\t  6, 3,\t\t \n\t\t\t\t  BIT(23),\t \n\t\t\t\t  0);\n\nstatic struct ccu_common *sun20i_d1_ccu_clks[] = {\n\t&pll_cpux_clk.common,\n\t&pll_ddr0_clk.common,\n\t&pll_periph0_4x_clk.common,\n\t&pll_periph0_2x_clk.common,\n\t&pll_periph0_800M_clk.common,\n\t&pll_video0_4x_clk.common,\n\t&pll_video1_4x_clk.common,\n\t&pll_ve_clk.common,\n\t&pll_audio0_4x_clk.common,\n\t&pll_audio1_clk.common,\n\t&pll_audio1_div2_clk.common,\n\t&pll_audio1_div5_clk.common,\n\t&cpux_clk.common,\n\t&cpux_axi_clk.common,\n\t&cpux_apb_clk.common,\n\t&psi_ahb_clk.common,\n\t&apb0_clk.common,\n\t&apb1_clk.common,\n\t&de_clk.common,\n\t&bus_de_clk.common,\n\t&di_clk.common,\n\t&bus_di_clk.common,\n\t&g2d_clk.common,\n\t&bus_g2d_clk.common,\n\t&ce_clk.common,\n\t&bus_ce_clk.common,\n\t&ve_clk.common,\n\t&bus_ve_clk.common,\n\t&bus_dma_clk.common,\n\t&bus_msgbox0_clk.common,\n\t&bus_msgbox1_clk.common,\n\t&bus_msgbox2_clk.common,\n\t&bus_spinlock_clk.common,\n\t&bus_hstimer_clk.common,\n\t&avs_clk.common,\n\t&bus_dbg_clk.common,\n\t&bus_pwm_clk.common,\n\t&bus_iommu_clk.common,\n\t&dram_clk.common,\n\t&mbus_dma_clk.common,\n\t&mbus_ve_clk.common,\n\t&mbus_ce_clk.common,\n\t&mbus_tvin_clk.common,\n\t&mbus_csi_clk.common,\n\t&mbus_g2d_clk.common,\n\t&mbus_riscv_clk.common,\n\t&bus_dram_clk.common,\n\t&mmc0_clk.common,\n\t&mmc1_clk.common,\n\t&mmc2_clk.common,\n\t&bus_mmc0_clk.common,\n\t&bus_mmc1_clk.common,\n\t&bus_mmc2_clk.common,\n\t&bus_uart0_clk.common,\n\t&bus_uart1_clk.common,\n\t&bus_uart2_clk.common,\n\t&bus_uart3_clk.common,\n\t&bus_uart4_clk.common,\n\t&bus_uart5_clk.common,\n\t&bus_i2c0_clk.common,\n\t&bus_i2c1_clk.common,\n\t&bus_i2c2_clk.common,\n\t&bus_i2c3_clk.common,\n\t&bus_can0_clk.common,\n\t&bus_can1_clk.common,\n\t&spi0_clk.common,\n\t&spi1_clk.common,\n\t&bus_spi0_clk.common,\n\t&bus_spi1_clk.common,\n\t&emac_25M_clk.common,\n\t&bus_emac_clk.common,\n\t&ir_tx_clk.common,\n\t&bus_ir_tx_clk.common,\n\t&bus_gpadc_clk.common,\n\t&bus_ths_clk.common,\n\t&i2s0_clk.common,\n\t&i2s1_clk.common,\n\t&i2s2_clk.common,\n\t&i2s2_asrc_clk.common,\n\t&bus_i2s0_clk.common,\n\t&bus_i2s1_clk.common,\n\t&bus_i2s2_clk.common,\n\t&spdif_tx_clk.common,\n\t&spdif_rx_clk.common,\n\t&bus_spdif_clk.common,\n\t&dmic_clk.common,\n\t&bus_dmic_clk.common,\n\t&audio_dac_clk.common,\n\t&audio_adc_clk.common,\n\t&bus_audio_clk.common,\n\t&usb_ohci0_clk.common,\n\t&usb_ohci1_clk.common,\n\t&bus_ohci0_clk.common,\n\t&bus_ohci1_clk.common,\n\t&bus_ehci0_clk.common,\n\t&bus_ehci1_clk.common,\n\t&bus_otg_clk.common,\n\t&bus_lradc_clk.common,\n\t&bus_dpss_top_clk.common,\n\t&hdmi_24M_clk.common,\n\t&hdmi_cec_32k_clk.common,\n\t&hdmi_cec_clk.common,\n\t&bus_hdmi_clk.common,\n\t&mipi_dsi_clk.common,\n\t&bus_mipi_dsi_clk.common,\n\t&tcon_lcd0_clk.common,\n\t&bus_tcon_lcd0_clk.common,\n\t&tcon_tv_clk.common,\n\t&bus_tcon_tv_clk.common,\n\t&tve_clk.common,\n\t&bus_tve_top_clk.common,\n\t&bus_tve_clk.common,\n\t&tvd_clk.common,\n\t&bus_tvd_top_clk.common,\n\t&bus_tvd_clk.common,\n\t&ledc_clk.common,\n\t&bus_ledc_clk.common,\n\t&csi_top_clk.common,\n\t&csi_mclk_clk.common,\n\t&bus_csi_clk.common,\n\t&tpadc_clk.common,\n\t&bus_tpadc_clk.common,\n\t&bus_tzma_clk.common,\n\t&dsp_clk.common,\n\t&bus_dsp_cfg_clk.common,\n\t&riscv_clk.common,\n\t&riscv_axi_clk.common,\n\t&bus_riscv_cfg_clk.common,\n\t&fanout_24M_clk.common,\n\t&fanout_12M_clk.common,\n\t&fanout_16M_clk.common,\n\t&fanout_25M_clk.common,\n\t&fanout_32k_clk.common,\n\t&fanout_27M_clk.common,\n\t&fanout_pclk_clk.common,\n\t&fanout0_clk.common,\n\t&fanout1_clk.common,\n\t&fanout2_clk.common,\n};\n\nstatic struct clk_hw_onecell_data sun20i_d1_hw_clks = {\n\t.num\t= CLK_NUMBER,\n\t.hws\t= {\n\t\t[CLK_PLL_CPUX]\t\t= &pll_cpux_clk.common.hw,\n\t\t[CLK_PLL_DDR0]\t\t= &pll_ddr0_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0_4X]\t= &pll_periph0_4x_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0_2X]\t= &pll_periph0_2x_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0_800M]\t= &pll_periph0_800M_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0]\t= &pll_periph0_clk.hw,\n\t\t[CLK_PLL_PERIPH0_DIV3]\t= &pll_periph0_div3_clk.hw,\n\t\t[CLK_PLL_VIDEO0_4X]\t= &pll_video0_4x_clk.common.hw,\n\t\t[CLK_PLL_VIDEO0_2X]\t= &pll_video0_2x_clk.hw,\n\t\t[CLK_PLL_VIDEO0]\t= &pll_video0_clk.hw,\n\t\t[CLK_PLL_VIDEO1_4X]\t= &pll_video1_4x_clk.common.hw,\n\t\t[CLK_PLL_VIDEO1_2X]\t= &pll_video1_2x_clk.hw,\n\t\t[CLK_PLL_VIDEO1]\t= &pll_video1_clk.hw,\n\t\t[CLK_PLL_VE]\t\t= &pll_ve_clk.common.hw,\n\t\t[CLK_PLL_AUDIO0_4X]\t= &pll_audio0_4x_clk.common.hw,\n\t\t[CLK_PLL_AUDIO0_2X]\t= &pll_audio0_2x_clk.hw,\n\t\t[CLK_PLL_AUDIO0]\t= &pll_audio0_clk.hw,\n\t\t[CLK_PLL_AUDIO1]\t= &pll_audio1_clk.common.hw,\n\t\t[CLK_PLL_AUDIO1_DIV2]\t= &pll_audio1_div2_clk.common.hw,\n\t\t[CLK_PLL_AUDIO1_DIV5]\t= &pll_audio1_div5_clk.common.hw,\n\t\t[CLK_CPUX]\t\t= &cpux_clk.common.hw,\n\t\t[CLK_CPUX_AXI]\t\t= &cpux_axi_clk.common.hw,\n\t\t[CLK_CPUX_APB]\t\t= &cpux_apb_clk.common.hw,\n\t\t[CLK_PSI_AHB]\t\t= &psi_ahb_clk.common.hw,\n\t\t[CLK_APB0]\t\t= &apb0_clk.common.hw,\n\t\t[CLK_APB1]\t\t= &apb1_clk.common.hw,\n\t\t[CLK_MBUS]\t\t= &mbus_clk.hw,\n\t\t[CLK_DE]\t\t= &de_clk.common.hw,\n\t\t[CLK_BUS_DE]\t\t= &bus_de_clk.common.hw,\n\t\t[CLK_DI]\t\t= &di_clk.common.hw,\n\t\t[CLK_BUS_DI]\t\t= &bus_di_clk.common.hw,\n\t\t[CLK_G2D]\t\t= &g2d_clk.common.hw,\n\t\t[CLK_BUS_G2D]\t\t= &bus_g2d_clk.common.hw,\n\t\t[CLK_CE]\t\t= &ce_clk.common.hw,\n\t\t[CLK_BUS_CE]\t\t= &bus_ce_clk.common.hw,\n\t\t[CLK_VE]\t\t= &ve_clk.common.hw,\n\t\t[CLK_BUS_VE]\t\t= &bus_ve_clk.common.hw,\n\t\t[CLK_BUS_DMA]\t\t= &bus_dma_clk.common.hw,\n\t\t[CLK_BUS_MSGBOX0]\t= &bus_msgbox0_clk.common.hw,\n\t\t[CLK_BUS_MSGBOX1]\t= &bus_msgbox1_clk.common.hw,\n\t\t[CLK_BUS_MSGBOX2]\t= &bus_msgbox2_clk.common.hw,\n\t\t[CLK_BUS_SPINLOCK]\t= &bus_spinlock_clk.common.hw,\n\t\t[CLK_BUS_HSTIMER]\t= &bus_hstimer_clk.common.hw,\n\t\t[CLK_AVS]\t\t= &avs_clk.common.hw,\n\t\t[CLK_BUS_DBG]\t\t= &bus_dbg_clk.common.hw,\n\t\t[CLK_BUS_PWM]\t\t= &bus_pwm_clk.common.hw,\n\t\t[CLK_BUS_IOMMU]\t\t= &bus_iommu_clk.common.hw,\n\t\t[CLK_DRAM]\t\t= &dram_clk.common.hw,\n\t\t[CLK_MBUS_DMA]\t\t= &mbus_dma_clk.common.hw,\n\t\t[CLK_MBUS_VE]\t\t= &mbus_ve_clk.common.hw,\n\t\t[CLK_MBUS_CE]\t\t= &mbus_ce_clk.common.hw,\n\t\t[CLK_MBUS_TVIN]\t\t= &mbus_tvin_clk.common.hw,\n\t\t[CLK_MBUS_CSI]\t\t= &mbus_csi_clk.common.hw,\n\t\t[CLK_MBUS_G2D]\t\t= &mbus_g2d_clk.common.hw,\n\t\t[CLK_MBUS_RISCV]\t= &mbus_riscv_clk.common.hw,\n\t\t[CLK_BUS_DRAM]\t\t= &bus_dram_clk.common.hw,\n\t\t[CLK_MMC0]\t\t= &mmc0_clk.common.hw,\n\t\t[CLK_MMC1]\t\t= &mmc1_clk.common.hw,\n\t\t[CLK_MMC2]\t\t= &mmc2_clk.common.hw,\n\t\t[CLK_BUS_MMC0]\t\t= &bus_mmc0_clk.common.hw,\n\t\t[CLK_BUS_MMC1]\t\t= &bus_mmc1_clk.common.hw,\n\t\t[CLK_BUS_MMC2]\t\t= &bus_mmc2_clk.common.hw,\n\t\t[CLK_BUS_UART0]\t\t= &bus_uart0_clk.common.hw,\n\t\t[CLK_BUS_UART1]\t\t= &bus_uart1_clk.common.hw,\n\t\t[CLK_BUS_UART2]\t\t= &bus_uart2_clk.common.hw,\n\t\t[CLK_BUS_UART3]\t\t= &bus_uart3_clk.common.hw,\n\t\t[CLK_BUS_UART4]\t\t= &bus_uart4_clk.common.hw,\n\t\t[CLK_BUS_UART5]\t\t= &bus_uart5_clk.common.hw,\n\t\t[CLK_BUS_I2C0]\t\t= &bus_i2c0_clk.common.hw,\n\t\t[CLK_BUS_I2C1]\t\t= &bus_i2c1_clk.common.hw,\n\t\t[CLK_BUS_I2C2]\t\t= &bus_i2c2_clk.common.hw,\n\t\t[CLK_BUS_I2C3]\t\t= &bus_i2c3_clk.common.hw,\n\t\t[CLK_BUS_CAN0]\t\t= &bus_can0_clk.common.hw,\n\t\t[CLK_BUS_CAN1]\t\t= &bus_can1_clk.common.hw,\n\t\t[CLK_SPI0]\t\t= &spi0_clk.common.hw,\n\t\t[CLK_SPI1]\t\t= &spi1_clk.common.hw,\n\t\t[CLK_BUS_SPI0]\t\t= &bus_spi0_clk.common.hw,\n\t\t[CLK_BUS_SPI1]\t\t= &bus_spi1_clk.common.hw,\n\t\t[CLK_EMAC_25M]\t\t= &emac_25M_clk.common.hw,\n\t\t[CLK_BUS_EMAC]\t\t= &bus_emac_clk.common.hw,\n\t\t[CLK_IR_TX]\t\t= &ir_tx_clk.common.hw,\n\t\t[CLK_BUS_IR_TX]\t\t= &bus_ir_tx_clk.common.hw,\n\t\t[CLK_BUS_GPADC]\t\t= &bus_gpadc_clk.common.hw,\n\t\t[CLK_BUS_THS]\t\t= &bus_ths_clk.common.hw,\n\t\t[CLK_I2S0]\t\t= &i2s0_clk.common.hw,\n\t\t[CLK_I2S1]\t\t= &i2s1_clk.common.hw,\n\t\t[CLK_I2S2]\t\t= &i2s2_clk.common.hw,\n\t\t[CLK_I2S2_ASRC]\t\t= &i2s2_asrc_clk.common.hw,\n\t\t[CLK_BUS_I2S0]\t\t= &bus_i2s0_clk.common.hw,\n\t\t[CLK_BUS_I2S1]\t\t= &bus_i2s1_clk.common.hw,\n\t\t[CLK_BUS_I2S2]\t\t= &bus_i2s2_clk.common.hw,\n\t\t[CLK_SPDIF_TX]\t\t= &spdif_tx_clk.common.hw,\n\t\t[CLK_SPDIF_RX]\t\t= &spdif_rx_clk.common.hw,\n\t\t[CLK_BUS_SPDIF]\t\t= &bus_spdif_clk.common.hw,\n\t\t[CLK_DMIC]\t\t= &dmic_clk.common.hw,\n\t\t[CLK_BUS_DMIC]\t\t= &bus_dmic_clk.common.hw,\n\t\t[CLK_AUDIO_DAC]\t\t= &audio_dac_clk.common.hw,\n\t\t[CLK_AUDIO_ADC]\t\t= &audio_adc_clk.common.hw,\n\t\t[CLK_BUS_AUDIO]\t\t= &bus_audio_clk.common.hw,\n\t\t[CLK_USB_OHCI0]\t\t= &usb_ohci0_clk.common.hw,\n\t\t[CLK_USB_OHCI1]\t\t= &usb_ohci1_clk.common.hw,\n\t\t[CLK_BUS_OHCI0]\t\t= &bus_ohci0_clk.common.hw,\n\t\t[CLK_BUS_OHCI1]\t\t= &bus_ohci1_clk.common.hw,\n\t\t[CLK_BUS_EHCI0]\t\t= &bus_ehci0_clk.common.hw,\n\t\t[CLK_BUS_EHCI1]\t\t= &bus_ehci1_clk.common.hw,\n\t\t[CLK_BUS_OTG]\t\t= &bus_otg_clk.common.hw,\n\t\t[CLK_BUS_LRADC]\t\t= &bus_lradc_clk.common.hw,\n\t\t[CLK_BUS_DPSS_TOP]\t= &bus_dpss_top_clk.common.hw,\n\t\t[CLK_HDMI_24M]\t\t= &hdmi_24M_clk.common.hw,\n\t\t[CLK_HDMI_CEC_32K]\t= &hdmi_cec_32k_clk.common.hw,\n\t\t[CLK_HDMI_CEC]\t\t= &hdmi_cec_clk.common.hw,\n\t\t[CLK_BUS_HDMI]\t\t= &bus_hdmi_clk.common.hw,\n\t\t[CLK_MIPI_DSI]\t\t= &mipi_dsi_clk.common.hw,\n\t\t[CLK_BUS_MIPI_DSI]\t= &bus_mipi_dsi_clk.common.hw,\n\t\t[CLK_TCON_LCD0]\t\t= &tcon_lcd0_clk.common.hw,\n\t\t[CLK_BUS_TCON_LCD0]\t= &bus_tcon_lcd0_clk.common.hw,\n\t\t[CLK_TCON_TV]\t\t= &tcon_tv_clk.common.hw,\n\t\t[CLK_BUS_TCON_TV]\t= &bus_tcon_tv_clk.common.hw,\n\t\t[CLK_TVE]\t\t= &tve_clk.common.hw,\n\t\t[CLK_BUS_TVE_TOP]\t= &bus_tve_top_clk.common.hw,\n\t\t[CLK_BUS_TVE]\t\t= &bus_tve_clk.common.hw,\n\t\t[CLK_TVD]\t\t= &tvd_clk.common.hw,\n\t\t[CLK_BUS_TVD_TOP]\t= &bus_tvd_top_clk.common.hw,\n\t\t[CLK_BUS_TVD]\t\t= &bus_tvd_clk.common.hw,\n\t\t[CLK_LEDC]\t\t= &ledc_clk.common.hw,\n\t\t[CLK_BUS_LEDC]\t\t= &bus_ledc_clk.common.hw,\n\t\t[CLK_CSI_TOP]\t\t= &csi_top_clk.common.hw,\n\t\t[CLK_CSI_MCLK]\t\t= &csi_mclk_clk.common.hw,\n\t\t[CLK_BUS_CSI]\t\t= &bus_csi_clk.common.hw,\n\t\t[CLK_TPADC]\t\t= &tpadc_clk.common.hw,\n\t\t[CLK_BUS_TPADC]\t\t= &bus_tpadc_clk.common.hw,\n\t\t[CLK_BUS_TZMA]\t\t= &bus_tzma_clk.common.hw,\n\t\t[CLK_DSP]\t\t= &dsp_clk.common.hw,\n\t\t[CLK_BUS_DSP_CFG]\t= &bus_dsp_cfg_clk.common.hw,\n\t\t[CLK_RISCV]\t\t= &riscv_clk.common.hw,\n\t\t[CLK_RISCV_AXI]\t\t= &riscv_axi_clk.common.hw,\n\t\t[CLK_BUS_RISCV_CFG]\t= &bus_riscv_cfg_clk.common.hw,\n\t\t[CLK_FANOUT_24M]\t= &fanout_24M_clk.common.hw,\n\t\t[CLK_FANOUT_12M]\t= &fanout_12M_clk.common.hw,\n\t\t[CLK_FANOUT_16M]\t= &fanout_16M_clk.common.hw,\n\t\t[CLK_FANOUT_25M]\t= &fanout_25M_clk.common.hw,\n\t\t[CLK_FANOUT_32K]\t= &fanout_32k_clk.common.hw,\n\t\t[CLK_FANOUT_27M]\t= &fanout_27M_clk.common.hw,\n\t\t[CLK_FANOUT_PCLK]\t= &fanout_pclk_clk.common.hw,\n\t\t[CLK_FANOUT0]\t\t= &fanout0_clk.common.hw,\n\t\t[CLK_FANOUT1]\t\t= &fanout1_clk.common.hw,\n\t\t[CLK_FANOUT2]\t\t= &fanout2_clk.common.hw,\n\t},\n};\n\nstatic struct ccu_reset_map sun20i_d1_ccu_resets[] = {\n\t[RST_MBUS]\t\t= { 0x540, BIT(30) },\n\t[RST_BUS_DE]\t\t= { 0x60c, BIT(16) },\n\t[RST_BUS_DI]\t\t= { 0x62c, BIT(16) },\n\t[RST_BUS_G2D]\t\t= { 0x63c, BIT(16) },\n\t[RST_BUS_CE]\t\t= { 0x68c, BIT(16) },\n\t[RST_BUS_VE]\t\t= { 0x69c, BIT(16) },\n\t[RST_BUS_DMA]\t\t= { 0x70c, BIT(16) },\n\t[RST_BUS_MSGBOX0]\t= { 0x71c, BIT(16) },\n\t[RST_BUS_MSGBOX1]\t= { 0x71c, BIT(17) },\n\t[RST_BUS_MSGBOX2]\t= { 0x71c, BIT(18) },\n\t[RST_BUS_SPINLOCK]\t= { 0x72c, BIT(16) },\n\t[RST_BUS_HSTIMER]\t= { 0x73c, BIT(16) },\n\t[RST_BUS_DBG]\t\t= { 0x78c, BIT(16) },\n\t[RST_BUS_PWM]\t\t= { 0x7ac, BIT(16) },\n\t[RST_BUS_DRAM]\t\t= { 0x80c, BIT(16) },\n\t[RST_BUS_MMC0]\t\t= { 0x84c, BIT(16) },\n\t[RST_BUS_MMC1]\t\t= { 0x84c, BIT(17) },\n\t[RST_BUS_MMC2]\t\t= { 0x84c, BIT(18) },\n\t[RST_BUS_UART0]\t\t= { 0x90c, BIT(16) },\n\t[RST_BUS_UART1]\t\t= { 0x90c, BIT(17) },\n\t[RST_BUS_UART2]\t\t= { 0x90c, BIT(18) },\n\t[RST_BUS_UART3]\t\t= { 0x90c, BIT(19) },\n\t[RST_BUS_UART4]\t\t= { 0x90c, BIT(20) },\n\t[RST_BUS_UART5]\t\t= { 0x90c, BIT(21) },\n\t[RST_BUS_I2C0]\t\t= { 0x91c, BIT(16) },\n\t[RST_BUS_I2C1]\t\t= { 0x91c, BIT(17) },\n\t[RST_BUS_I2C2]\t\t= { 0x91c, BIT(18) },\n\t[RST_BUS_I2C3]\t\t= { 0x91c, BIT(19) },\n\t[RST_BUS_CAN0]\t\t= { 0x92c, BIT(16) },\n\t[RST_BUS_CAN1]\t\t= { 0x92c, BIT(17) },\n\t[RST_BUS_SPI0]\t\t= { 0x96c, BIT(16) },\n\t[RST_BUS_SPI1]\t\t= { 0x96c, BIT(17) },\n\t[RST_BUS_EMAC]\t\t= { 0x97c, BIT(16) },\n\t[RST_BUS_IR_TX]\t\t= { 0x9cc, BIT(16) },\n\t[RST_BUS_GPADC]\t\t= { 0x9ec, BIT(16) },\n\t[RST_BUS_THS]\t\t= { 0x9fc, BIT(16) },\n\t[RST_BUS_I2S0]\t\t= { 0xa20, BIT(16) },\n\t[RST_BUS_I2S1]\t\t= { 0xa20, BIT(17) },\n\t[RST_BUS_I2S2]\t\t= { 0xa20, BIT(18) },\n\t[RST_BUS_SPDIF]\t\t= { 0xa2c, BIT(16) },\n\t[RST_BUS_DMIC]\t\t= { 0xa4c, BIT(16) },\n\t[RST_BUS_AUDIO]\t\t= { 0xa5c, BIT(16) },\n\t[RST_USB_PHY0]\t\t= { 0xa70, BIT(30) },\n\t[RST_USB_PHY1]\t\t= { 0xa74, BIT(30) },\n\t[RST_BUS_OHCI0]\t\t= { 0xa8c, BIT(16) },\n\t[RST_BUS_OHCI1]\t\t= { 0xa8c, BIT(17) },\n\t[RST_BUS_EHCI0]\t\t= { 0xa8c, BIT(20) },\n\t[RST_BUS_EHCI1]\t\t= { 0xa8c, BIT(21) },\n\t[RST_BUS_OTG]\t\t= { 0xa8c, BIT(24) },\n\t[RST_BUS_LRADC]\t\t= { 0xa9c, BIT(16) },\n\t[RST_BUS_DPSS_TOP]\t= { 0xabc, BIT(16) },\n\t[RST_BUS_HDMI_MAIN]\t= { 0xb1c, BIT(16) },\n\t[RST_BUS_HDMI_SUB]\t= { 0xb1c, BIT(17) },\n\t[RST_BUS_MIPI_DSI]\t= { 0xb4c, BIT(16) },\n\t[RST_BUS_TCON_LCD0]\t= { 0xb7c, BIT(16) },\n\t[RST_BUS_TCON_TV]\t= { 0xb9c, BIT(16) },\n\t[RST_BUS_LVDS0]\t\t= { 0xbac, BIT(16) },\n\t[RST_BUS_TVE_TOP]\t= { 0xbbc, BIT(16) },\n\t[RST_BUS_TVE]\t\t= { 0xbbc, BIT(17) },\n\t[RST_BUS_TVD_TOP]\t= { 0xbdc, BIT(16) },\n\t[RST_BUS_TVD]\t\t= { 0xbdc, BIT(17) },\n\t[RST_BUS_LEDC]\t\t= { 0xbfc, BIT(16) },\n\t[RST_BUS_CSI]\t\t= { 0xc1c, BIT(16) },\n\t[RST_BUS_TPADC]\t\t= { 0xc5c, BIT(16) },\n\t[RST_DSP]\t\t= { 0xc7c, BIT(16) },\n\t[RST_BUS_DSP_CFG]\t= { 0xc7c, BIT(17) },\n\t[RST_BUS_DSP_DBG]\t= { 0xc7c, BIT(18) },\n\t[RST_BUS_RISCV_CFG]\t= { 0xd0c, BIT(16) },\n};\n\nstatic const struct sunxi_ccu_desc sun20i_d1_ccu_desc = {\n\t.ccu_clks\t= sun20i_d1_ccu_clks,\n\t.num_ccu_clks\t= ARRAY_SIZE(sun20i_d1_ccu_clks),\n\n\t.hw_clks\t= &sun20i_d1_hw_clks,\n\n\t.resets\t\t= sun20i_d1_ccu_resets,\n\t.num_resets\t= ARRAY_SIZE(sun20i_d1_ccu_resets),\n};\n\nstatic const u32 pll_regs[] = {\n\tSUN20I_D1_PLL_CPUX_REG,\n\tSUN20I_D1_PLL_DDR0_REG,\n\tSUN20I_D1_PLL_PERIPH0_REG,\n\tSUN20I_D1_PLL_VIDEO0_REG,\n\tSUN20I_D1_PLL_VIDEO1_REG,\n\tSUN20I_D1_PLL_VE_REG,\n\tSUN20I_D1_PLL_AUDIO0_REG,\n\tSUN20I_D1_PLL_AUDIO1_REG,\n};\n\nstatic const u32 pll_video_regs[] = {\n\tSUN20I_D1_PLL_VIDEO0_REG,\n\tSUN20I_D1_PLL_VIDEO1_REG,\n};\n\nstatic struct ccu_mux_nb sun20i_d1_riscv_nb = {\n\t.common\t\t= &riscv_clk.common,\n\t.cm\t\t= &riscv_clk.mux,\n\t.delay_us       = 1,\n\t.bypass_index   = 4,  \n};\n\nstatic int sun20i_d1_ccu_probe(struct platform_device *pdev)\n{\n\tvoid __iomem *reg;\n\tu32 val;\n\tint i, ret;\n\n\treg = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(reg))\n\t\treturn PTR_ERR(reg);\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(pll_regs); i++) {\n\t\tval = readl(reg + pll_regs[i]);\n\t\tval |= BIT(31) | BIT(30) | BIT(29);\n\t\twritel(val, reg + pll_regs[i]);\n\t}\n\n\t \n\tval = readl(reg + SUN20I_D1_PLL_CPUX_REG);\n\tval &= ~GENMASK(1, 0);\n\twritel(val, reg + SUN20I_D1_PLL_CPUX_REG);\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(pll_video_regs); i++) {\n\t\tval = readl(reg + pll_video_regs[i]);\n\t\tval &= ~BIT(0);\n\t\twritel(val, reg + pll_video_regs[i]);\n\t}\n\n\t \n\tval = readl(reg + SUN20I_D1_PLL_AUDIO0_REG);\n\tval &= ~BIT(1) | BIT(0);\n\twritel(val, reg + SUN20I_D1_PLL_AUDIO0_REG);\n\n\t \n\tval = readl(reg + SUN20I_D1_FANOUT_27M_REG);\n\tval &= ~GENMASK(9, 8);\n\twritel(val, reg + SUN20I_D1_FANOUT_27M_REG);\n\n\tret = devm_sunxi_ccu_probe(&pdev->dev, reg, &sun20i_d1_ccu_desc);\n\tif (ret)\n\t\treturn ret;\n\n\t \n\tccu_mux_notifier_register(pll_cpux_clk.common.hw.clk,\n\t\t\t\t  &sun20i_d1_riscv_nb);\n\n\treturn 0;\n}\n\nstatic const struct of_device_id sun20i_d1_ccu_ids[] = {\n\t{ .compatible = \"allwinner,sun20i-d1-ccu\" },\n\t{ }\n};\n\nstatic struct platform_driver sun20i_d1_ccu_driver = {\n\t.probe\t= sun20i_d1_ccu_probe,\n\t.driver\t= {\n\t\t.name\t\t\t= \"sun20i-d1-ccu\",\n\t\t.suppress_bind_attrs\t= true,\n\t\t.of_match_table\t\t= sun20i_d1_ccu_ids,\n\t},\n};\nmodule_platform_driver(sun20i_d1_ccu_driver);\n\nMODULE_IMPORT_NS(SUNXI_CCU);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}