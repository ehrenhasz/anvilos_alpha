{
  "module_name": "ccu_div.h",
  "hash_id": "d6d77a615bcf39ec773b62efa7b326404d54676bc86c29aca60a25b842c2e6af",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu_div.h",
  "human_readable_source": " \n \n\n#ifndef _CCU_DIV_H_\n#define _CCU_DIV_H_\n\n#include <linux/clk-provider.h>\n\n#include \"ccu_common.h\"\n#include \"ccu_mux.h\"\n\n \nstruct ccu_div_internal {\n\tu8\t\t\tshift;\n\tu8\t\t\twidth;\n\n\tu32\t\t\tmax;\n\tu32\t\t\toffset;\n\n\tu32\t\t\tflags;\n\n\tstruct clk_div_table\t*table;\n};\n\n#define _SUNXI_CCU_DIV_TABLE_FLAGS(_shift, _width, _table, _flags)\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.shift\t= _shift,\t\t\t\t\t\\\n\t\t.width\t= _width,\t\t\t\t\t\\\n\t\t.flags\t= _flags,\t\t\t\t\t\\\n\t\t.table\t= _table,\t\t\t\t\t\\\n\t}\n\n#define _SUNXI_CCU_DIV_TABLE(_shift, _width, _table)\t\t\t\\\n\t_SUNXI_CCU_DIV_TABLE_FLAGS(_shift, _width, _table, 0)\n\n#define _SUNXI_CCU_DIV_OFFSET_MAX_FLAGS(_shift, _width, _off, _max, _flags) \\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.shift\t= _shift,\t\t\t\t\t\\\n\t\t.width\t= _width,\t\t\t\t\t\\\n\t\t.flags\t= _flags,\t\t\t\t\t\\\n\t\t.max\t= _max,\t\t\t\t\t\t\\\n\t\t.offset\t= _off,\t\t\t\t\t\t\\\n\t}\n\n#define _SUNXI_CCU_DIV_MAX_FLAGS(_shift, _width, _max, _flags)\t\t\\\n\t_SUNXI_CCU_DIV_OFFSET_MAX_FLAGS(_shift, _width, 1, _max, _flags)\n\n#define _SUNXI_CCU_DIV_FLAGS(_shift, _width, _flags)\t\t\t\\\n\t_SUNXI_CCU_DIV_MAX_FLAGS(_shift, _width, 0, _flags)\n\n#define _SUNXI_CCU_DIV_MAX(_shift, _width, _max)\t\t\t\\\n\t_SUNXI_CCU_DIV_MAX_FLAGS(_shift, _width, _max, 0)\n\n#define _SUNXI_CCU_DIV_OFFSET(_shift, _width, _offset)\t\t\t\\\n\t_SUNXI_CCU_DIV_OFFSET_MAX_FLAGS(_shift, _width, _offset, 0, 0)\n\n#define _SUNXI_CCU_DIV(_shift, _width)\t\t\t\t\t\\\n\t_SUNXI_CCU_DIV_FLAGS(_shift, _width, 0)\n\nstruct ccu_div {\n\tu32\t\t\tenable;\n\n\tstruct ccu_div_internal\tdiv;\n\tstruct ccu_mux_internal\tmux;\n\tstruct ccu_common\tcommon;\n\tunsigned int\t\tfixed_post_div;\n};\n\n#define SUNXI_CCU_DIV_TABLE_WITH_GATE(_struct, _name, _parent, _reg,\t\\\n\t\t\t\t      _shift, _width,\t\t\t\\\n\t\t\t\t      _table, _gate, _flags)\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.div\t\t= _SUNXI_CCU_DIV_TABLE(_shift, _width,\t\\\n\t\t\t\t\t\t       _table),\t\t\\\n\t\t.enable\t\t= _gate,\t\t\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT(_name,\t\t\\\n\t\t\t\t\t\t      _parent,\t\t\\\n\t\t\t\t\t\t      &ccu_div_ops,\t\\\n\t\t\t\t\t\t      _flags),\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t}\n\n\n#define SUNXI_CCU_DIV_TABLE(_struct, _name, _parent, _reg,\t\t\\\n\t\t\t    _shift, _width,\t\t\t\t\\\n\t\t\t    _table, _flags)\t\t\t\t\\\n\tSUNXI_CCU_DIV_TABLE_WITH_GATE(_struct, _name, _parent, _reg,\t\\\n\t\t\t\t      _shift, _width, _table, 0,\t\\\n\t\t\t\t      _flags)\n\n#define SUNXI_CCU_DIV_TABLE_HW(_struct, _name, _parent, _reg,\t\t\\\n\t\t\t       _shift, _width,\t\t\t\t\\\n\t\t\t       _table, _flags)\t\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.div\t\t= _SUNXI_CCU_DIV_TABLE(_shift, _width,\t\\\n\t\t\t\t\t\t       _table),\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_HW(_name,\t\t\\\n\t\t\t\t\t\t\t _parent,\t\\\n\t\t\t\t\t\t\t &ccu_div_ops,\t\\\n\t\t\t\t\t\t\t _flags),\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t}\n\n\n#define SUNXI_CCU_M_WITH_MUX_TABLE_GATE(_struct, _name,\t\t\t\\\n\t\t\t\t\t_parents, _table,\t\t\\\n\t\t\t\t\t_reg,\t\t\t\t\\\n\t\t\t\t\t_mshift, _mwidth,\t\t\\\n\t\t\t\t\t_muxshift, _muxwidth,\t\t\\\n\t\t\t\t\t_gate, _flags)\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV(_mshift, _mwidth),\t\t\\\n\t\t.mux\t= _SUNXI_CCU_MUX_TABLE(_muxshift, _muxwidth, _table), \\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_PARENTS(_name,\t\\\n\t\t\t\t\t\t\t      _parents, \\\n\t\t\t\t\t\t\t      &ccu_div_ops, \\\n\t\t\t\t\t\t\t      _flags),\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M_WITH_MUX_TABLE_GATE_CLOSEST(_struct, _name,\t\t\\\n\t\t\t\t\t\t_parents, _table,\t\\\n\t\t\t\t\t\t_reg,\t\t\t\\\n\t\t\t\t\t\t_mshift, _mwidth,\t\\\n\t\t\t\t\t\t_muxshift, _muxwidth,\t\\\n\t\t\t\t\t\t_gate, _flags)\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV_FLAGS(_mshift, _mwidth, CLK_DIVIDER_ROUND_CLOSEST), \\\n\t\t.mux\t= _SUNXI_CCU_MUX_TABLE(_muxshift, _muxwidth, _table), \\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_PARENTS(_name,\t\\\n\t\t\t\t\t\t\t      _parents, \\\n\t\t\t\t\t\t\t      &ccu_div_ops, \\\n\t\t\t\t\t\t\t      _flags),\t\\\n\t\t\t.features\t= CCU_FEATURE_CLOSEST_RATE,\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M_WITH_MUX_GATE(_struct, _name, _parents, _reg,\t\\\n\t\t\t\t  _mshift, _mwidth, _muxshift, _muxwidth, \\\n\t\t\t\t  _gate, _flags)\t\t\t\\\n\tSUNXI_CCU_M_WITH_MUX_TABLE_GATE(_struct, _name,\t\t\t\\\n\t\t\t\t\t_parents, NULL,\t\t\t\\\n\t\t\t\t\t_reg, _mshift, _mwidth,\t\t\\\n\t\t\t\t\t_muxshift, _muxwidth,\t\t\\\n\t\t\t\t\t_gate, _flags)\n\n#define SUNXI_CCU_M_WITH_MUX_GATE_CLOSEST(_struct, _name, _parents,\t\\\n\t\t\t\t\t  _reg, _mshift, _mwidth,\t\\\n\t\t\t\t\t  _muxshift, _muxwidth,\t\t\\\n\t\t\t\t\t  _gate, _flags)\t\t\\\n\tSUNXI_CCU_M_WITH_MUX_TABLE_GATE_CLOSEST(_struct, _name,\t\t\\\n\t\t\t\t\t\t_parents, NULL,\t\t\\\n\t\t\t\t\t\t_reg, _mshift, _mwidth,\t\\\n\t\t\t\t\t\t_muxshift, _muxwidth,\t\\\n\t\t\t\t\t\t_gate, _flags)\n\n#define SUNXI_CCU_M_WITH_MUX(_struct, _name, _parents, _reg,\t\t\\\n\t\t\t     _mshift, _mwidth, _muxshift, _muxwidth,\t\\\n\t\t\t     _flags)\t\t\t\t\t\\\n\tSUNXI_CCU_M_WITH_MUX_TABLE_GATE(_struct, _name,\t\t\t\\\n\t\t\t\t\t_parents, NULL,\t\t\t\\\n\t\t\t\t\t_reg, _mshift, _mwidth,\t\t\\\n\t\t\t\t\t_muxshift, _muxwidth,\t\t\\\n\t\t\t\t\t0, _flags)\n\n\n#define SUNXI_CCU_M_WITH_GATE(_struct, _name, _parent, _reg,\t\t\\\n\t\t\t      _mshift, _mwidth,\t_gate,\t\t\t\\\n\t\t\t      _flags)\t\t\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV(_mshift, _mwidth),\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT(_name,\t\t\\\n\t\t\t\t\t\t      _parent,\t\t\\\n\t\t\t\t\t\t      &ccu_div_ops,\t\\\n\t\t\t\t\t\t      _flags),\t\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M(_struct, _name, _parent, _reg, _mshift, _mwidth,\t\\\n\t\t    _flags)\t\t\t\t\t\t\\\n\tSUNXI_CCU_M_WITH_GATE(_struct, _name, _parent, _reg,\t\t\\\n\t\t\t      _mshift, _mwidth, 0, _flags)\n\n#define SUNXI_CCU_M_DATA_WITH_MUX_GATE(_struct, _name, _parents, _reg,\t\\\n\t\t\t\t       _mshift, _mwidth,\t\t\\\n\t\t\t\t       _muxshift, _muxwidth,\t\t\\\n\t\t\t\t       _gate, _flags)\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV(_mshift, _mwidth),\t\t\\\n\t\t.mux\t= _SUNXI_CCU_MUX(_muxshift, _muxwidth),\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_PARENTS_DATA(_name, \\\n\t\t\t\t\t\t\t\t   _parents, \\\n\t\t\t\t\t\t\t\t   &ccu_div_ops, \\\n\t\t\t\t\t\t\t\t   _flags), \\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M_DATA_WITH_MUX(_struct, _name, _parents, _reg,\t\\\n\t\t\t\t  _mshift, _mwidth,\t\t\t\\\n\t\t\t\t  _muxshift, _muxwidth,\t\t\t\\\n\t\t\t\t  _flags)\t\t\t\t\\\n\tSUNXI_CCU_M_DATA_WITH_MUX_GATE(_struct, _name, _parents, _reg,  \\\n\t\t\t\t       _mshift, _mwidth,\t\t\\\n\t\t\t\t       _muxshift, _muxwidth,\t\t\\\n\t\t\t\t       0, _flags)\n\n#define SUNXI_CCU_M_HW_WITH_MUX_GATE(_struct, _name, _parents, _reg,\t\\\n\t\t\t\t     _mshift, _mwidth, _muxshift, _muxwidth, \\\n\t\t\t\t     _gate, _flags)\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV(_mshift, _mwidth),\t\t\\\n\t\t.mux\t= _SUNXI_CCU_MUX(_muxshift, _muxwidth),\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_PARENTS_HW(_name,\t\\\n\t\t\t\t\t\t\t\t _parents, \\\n\t\t\t\t\t\t\t\t &ccu_div_ops, \\\n\t\t\t\t\t\t\t\t _flags), \\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M_HWS_WITH_GATE(_struct, _name, _parent, _reg,\t\\\n\t\t\t\t  _mshift, _mwidth, _gate,\t\t\\\n\t\t\t\t  _flags)\t\t\t\t\\\n\tstruct ccu_div _struct = {\t\t\t\t\t\\\n\t\t.enable\t= _gate,\t\t\t\t\t\\\n\t\t.div\t= _SUNXI_CCU_DIV(_mshift, _mwidth),\t\t\\\n\t\t.common\t= {\t\t\t\t\t\t\\\n\t\t\t.reg\t\t= _reg,\t\t\t\t\\\n\t\t\t.hw.init\t= CLK_HW_INIT_HWS(_name,\t\\\n\t\t\t\t\t\t\t  _parent,\t\\\n\t\t\t\t\t\t\t  &ccu_div_ops,\t\\\n\t\t\t\t\t\t\t  _flags),\t\\\n\t\t},\t\t\t\t\t\t\t\\\n\t}\n\n#define SUNXI_CCU_M_HWS(_struct, _name, _parent, _reg, _mshift,\t\t\\\n\t\t\t_mwidth, _flags)\t\t\t\t\\\n\tSUNXI_CCU_M_HWS_WITH_GATE(_struct, _name, _parent, _reg,\t\\\n\t\t\t\t  _mshift, _mwidth, 0, _flags)\n\nstatic inline struct ccu_div *hw_to_ccu_div(struct clk_hw *hw)\n{\n\tstruct ccu_common *common = hw_to_ccu_common(hw);\n\n\treturn container_of(common, struct ccu_div, common);\n}\n\nextern const struct clk_ops ccu_div_ops;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}