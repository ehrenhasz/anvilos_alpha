{
  "module_name": "ccu-sun50i-h616.c",
  "hash_id": "7f64d9d22e5e423dea602d8b84d8957af2c9a660122d55b4c583848c63fa8697",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu-sun50i-h616.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/io.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n\n#include \"ccu_common.h\"\n#include \"ccu_reset.h\"\n\n#include \"ccu_div.h\"\n#include \"ccu_gate.h\"\n#include \"ccu_mp.h\"\n#include \"ccu_mult.h\"\n#include \"ccu_nk.h\"\n#include \"ccu_nkm.h\"\n#include \"ccu_nkmp.h\"\n#include \"ccu_nm.h\"\n\n#include \"ccu-sun50i-h616.h\"\n\n \n#define SUN50I_H616_PLL_CPUX_REG\t0x000\nstatic struct ccu_mult pll_cpux_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.mult\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.common\t\t= {\n\t\t.reg\t\t= 0x000,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-cpux\", \"osc24M\",\n\t\t\t\t\t      &ccu_mult_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n \n#define SUN50I_H616_PLL_DDR0_REG\t0x010\nstatic struct ccu_nkmp pll_ddr0_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x010,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-ddr0\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_DDR1_REG\t0x018\nstatic struct ccu_nkmp pll_ddr1_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x018,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-ddr1\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_PERIPH0_REG\t0x020\nstatic struct ccu_nkmp pll_periph0_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.fixed_post_div\t= 2,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x020,\n\t\t.features\t= CCU_FEATURE_FIXED_POSTDIV,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-periph0\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_PERIPH1_REG\t0x028\nstatic struct ccu_nkmp pll_periph1_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.fixed_post_div\t= 2,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x028,\n\t\t.features\t= CCU_FEATURE_FIXED_POSTDIV,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-periph1\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_GPU_REG\t\t0x030\nstatic struct ccu_nkmp pll_gpu_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x030,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-gpu\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n \n#define SUN50I_H616_PLL_VIDEO0_REG\t0x040\nstatic struct ccu_nm pll_video0_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.fixed_post_div\t= 4,\n\t.min_rate\t= 288000000,\n\t.max_rate\t= 2400000000UL,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x040,\n\t\t.features\t= CCU_FEATURE_FIXED_POSTDIV,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-video0\", \"osc24M\",\n\t\t\t\t\t      &ccu_nm_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_VIDEO1_REG\t0x048\nstatic struct ccu_nm pll_video1_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.fixed_post_div\t= 4,\n\t.min_rate\t= 288000000,\n\t.max_rate\t= 2400000000UL,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x048,\n\t\t.features\t= CCU_FEATURE_FIXED_POSTDIV,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-video1\", \"osc24M\",\n\t\t\t\t\t      &ccu_nm_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_VIDEO2_REG\t0x050\nstatic struct ccu_nm pll_video2_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.fixed_post_div\t= 4,\n\t.min_rate\t= 288000000,\n\t.max_rate\t= 2400000000UL,\n\t.common\t\t= {\n\t\t.reg\t\t= 0x050,\n\t\t.features\t= CCU_FEATURE_FIXED_POSTDIV,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-video2\", \"osc24M\",\n\t\t\t\t\t      &ccu_nm_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_VE_REG\t\t0x058\nstatic struct ccu_nkmp pll_ve_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x058,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-ve\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n#define SUN50I_H616_PLL_DE_REG\t\t0x060\nstatic struct ccu_nkmp pll_de_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.p\t\t= _SUNXI_CCU_DIV(0, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x060,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-de\", \"osc24M\",\n\t\t\t\t\t      &ccu_nkmp_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\n \n#define SUN50I_H616_PLL_AUDIO_REG\t0x078\nstatic struct ccu_nm pll_audio_hs_clk = {\n\t.enable\t\t= BIT(31),\n\t.lock\t\t= BIT(28),\n\t.n\t\t= _SUNXI_CCU_MULT_MIN(8, 8, 12),\n\t.m\t\t= _SUNXI_CCU_DIV(1, 1),  \n\t.common\t\t= {\n\t\t.reg\t\t= 0x078,\n\t\t.hw.init\t= CLK_HW_INIT(\"pll-audio-hs\", \"osc24M\",\n\t\t\t\t\t      &ccu_nm_ops,\n\t\t\t\t\t      CLK_SET_RATE_UNGATE),\n\t},\n};\n\nstatic const char * const cpux_parents[] = { \"osc24M\", \"osc32k\",\n\t\t\t\t\t\"iosc\", \"pll-cpux\", \"pll-periph0\" };\nstatic SUNXI_CCU_MUX(cpux_clk, \"cpux\", cpux_parents,\n\t\t     0x500, 24, 3, CLK_SET_RATE_PARENT | CLK_IS_CRITICAL);\nstatic SUNXI_CCU_M(axi_clk, \"axi\", \"cpux\", 0x500, 0, 2, 0);\nstatic SUNXI_CCU_M(cpux_apb_clk, \"cpux-apb\", \"cpux\", 0x500, 8, 2, 0);\n\nstatic const char * const psi_ahb1_ahb2_parents[] = { \"osc24M\", \"osc32k\",\n\t\t\t\t\t\t      \"iosc\", \"pll-periph0\" };\nstatic SUNXI_CCU_MP_WITH_MUX(psi_ahb1_ahb2_clk, \"psi-ahb1-ahb2\",\n\t\t\t     psi_ahb1_ahb2_parents,\n\t\t\t     0x510,\n\t\t\t     0, 2,\t \n\t\t\t     8, 2,\t \n\t\t\t     24, 2,\t \n\t\t\t     0);\n\nstatic const char * const ahb3_apb1_apb2_parents[] = { \"osc24M\", \"osc32k\",\n\t\t\t\t\t\t       \"psi-ahb1-ahb2\",\n\t\t\t\t\t\t       \"pll-periph0\" };\nstatic SUNXI_CCU_MP_WITH_MUX(ahb3_clk, \"ahb3\", ahb3_apb1_apb2_parents, 0x51c,\n\t\t\t     0, 2,\t \n\t\t\t     8, 2,\t \n\t\t\t     24, 2,\t \n\t\t\t     0);\n\nstatic SUNXI_CCU_MP_WITH_MUX(apb1_clk, \"apb1\", ahb3_apb1_apb2_parents, 0x520,\n\t\t\t     0, 2,\t \n\t\t\t     8, 2,\t \n\t\t\t     24, 2,\t \n\t\t\t     0);\n\nstatic SUNXI_CCU_MP_WITH_MUX(apb2_clk, \"apb2\", ahb3_apb1_apb2_parents, 0x524,\n\t\t\t     0, 2,\t \n\t\t\t     8, 2,\t \n\t\t\t     24, 2,\t \n\t\t\t     0);\n\nstatic const char * const mbus_parents[] = { \"osc24M\", \"pll-periph0-2x\",\n\t\t\t\t\t     \"pll-ddr0\", \"pll-ddr1\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(mbus_clk, \"mbus\", mbus_parents, 0x540,\n\t\t\t\t\t0, 3,\t \n\t\t\t\t\t24, 2,\t \n\t\t\t\t\tBIT(31),\t \n\t\t\t\t\tCLK_IS_CRITICAL);\n\nstatic const char * const de_parents[] = { \"pll-de\", \"pll-periph0-2x\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(de_clk, \"de\", de_parents, 0x600,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE(bus_de_clk, \"bus-de\", \"psi-ahb1-ahb2\",\n\t\t      0x60c, BIT(0), 0);\n\nstatic SUNXI_CCU_M_WITH_MUX_GATE(deinterlace_clk, \"deinterlace\",\n\t\t\t\t       de_parents,\n\t\t\t\t       0x620,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE(bus_deinterlace_clk, \"bus-deinterlace\", \"psi-ahb1-ahb2\",\n\t\t      0x62c, BIT(0), 0);\n\nstatic SUNXI_CCU_M_WITH_MUX_GATE(g2d_clk, \"g2d\", de_parents, 0x630,\n\t\t\t\t       0, 4,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       0);\n\nstatic SUNXI_CCU_GATE(bus_g2d_clk, \"bus-g2d\", \"psi-ahb1-ahb2\",\n\t\t      0x63c, BIT(0), 0);\n\nstatic const char * const gpu0_parents[] = { \"pll-gpu\", \"gpu1\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(gpu0_clk, \"gpu0\", gpu0_parents, 0x670,\n\t\t\t\t       0, 2,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       CLK_SET_RATE_PARENT);\nstatic SUNXI_CCU_M_WITH_GATE(gpu1_clk, \"gpu1\", \"pll-periph0-2x\", 0x674,\n\t\t\t\t\t0, 2,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_GATE(bus_gpu_clk, \"bus-gpu\", \"psi-ahb1-ahb2\",\n\t\t      0x67c, BIT(0), 0);\n\nstatic const char * const ce_parents[] = { \"osc24M\", \"pll-periph0-2x\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(ce_clk, \"ce\", ce_parents, 0x680,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 1,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_GATE(bus_ce_clk, \"bus-ce\", \"psi-ahb1-ahb2\",\n\t\t      0x68c, BIT(0), 0);\n\nstatic const char * const ve_parents[] = { \"pll-ve\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(ve_clk, \"ve\", ve_parents, 0x690,\n\t\t\t\t       0, 3,\t \n\t\t\t\t       24, 1,\t \n\t\t\t\t       BIT(31),\t \n\t\t\t\t       CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE(bus_ve_clk, \"bus-ve\", \"psi-ahb1-ahb2\",\n\t\t      0x69c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_dma_clk, \"bus-dma\", \"psi-ahb1-ahb2\",\n\t\t      0x70c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_hstimer_clk, \"bus-hstimer\", \"psi-ahb1-ahb2\",\n\t\t      0x73c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(avs_clk, \"avs\", \"osc24M\", 0x740, BIT(31), 0);\n\nstatic SUNXI_CCU_GATE(bus_dbg_clk, \"bus-dbg\", \"psi-ahb1-ahb2\",\n\t\t      0x78c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_psi_clk, \"bus-psi\", \"psi-ahb1-ahb2\",\n\t\t      0x79c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_pwm_clk, \"bus-pwm\", \"apb1\", 0x7ac, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_iommu_clk, \"bus-iommu\", \"apb1\", 0x7bc, BIT(0), 0);\n\nstatic const char * const dram_parents[] = { \"pll-ddr0\", \"pll-ddr1\" };\nstatic struct ccu_div dram_clk = {\n\t.div\t\t= _SUNXI_CCU_DIV(0, 2),\n\t.mux\t\t= _SUNXI_CCU_MUX(24, 2),\n\t.common\t= {\n\t\t.reg\t\t= 0x800,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"dram\",\n\t\t\t\t\t\t      dram_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      CLK_IS_CRITICAL),\n\t},\n};\n\nstatic SUNXI_CCU_GATE(mbus_dma_clk, \"mbus-dma\", \"mbus\",\n\t\t      0x804, BIT(0), 0);\nstatic SUNXI_CCU_GATE(mbus_ve_clk, \"mbus-ve\", \"mbus\",\n\t\t      0x804, BIT(1), 0);\nstatic SUNXI_CCU_GATE(mbus_ce_clk, \"mbus-ce\", \"mbus\",\n\t\t      0x804, BIT(2), 0);\nstatic SUNXI_CCU_GATE(mbus_ts_clk, \"mbus-ts\", \"mbus\",\n\t\t      0x804, BIT(3), 0);\nstatic SUNXI_CCU_GATE(mbus_nand_clk, \"mbus-nand\", \"mbus\",\n\t\t      0x804, BIT(5), 0);\nstatic SUNXI_CCU_GATE(mbus_g2d_clk, \"mbus-g2d\", \"mbus\",\n\t\t      0x804, BIT(10), 0);\n\nstatic SUNXI_CCU_GATE(bus_dram_clk, \"bus-dram\", \"psi-ahb1-ahb2\",\n\t\t      0x80c, BIT(0), CLK_IS_CRITICAL);\n\nstatic const char * const nand_spi_parents[] = { \"osc24M\", \"pll-periph0\",\n\t\t\t\t\t     \"pll-periph1\", \"pll-periph0-2x\",\n\t\t\t\t\t     \"pll-periph1-2x\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(nand0_clk, \"nand0\", nand_spi_parents, 0x810,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 3,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(nand1_clk, \"nand1\", nand_spi_parents, 0x814,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 3,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_GATE(bus_nand_clk, \"bus-nand\", \"ahb3\", 0x82c, BIT(0), 0);\n\nstatic const char * const mmc_parents[] = { \"osc24M\", \"pll-periph0-2x\",\n\t\t\t\t\t    \"pll-periph1-2x\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE_POSTDIV(mmc0_clk, \"mmc0\", mmc_parents, 0x830,\n\t\t\t\t\t  0, 4,\t\t \n\t\t\t\t\t  8, 2,\t\t \n\t\t\t\t\t  24, 2,\t \n\t\t\t\t\t  BIT(31),\t \n\t\t\t\t\t  2,\t\t \n\t\t\t\t\t  0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE_POSTDIV(mmc1_clk, \"mmc1\", mmc_parents, 0x834,\n\t\t\t\t\t  0, 4,\t\t \n\t\t\t\t\t  8, 2,\t\t \n\t\t\t\t\t  24, 2,\t \n\t\t\t\t\t  BIT(31),\t \n\t\t\t\t\t  2,\t\t \n\t\t\t\t\t  0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE_POSTDIV(mmc2_clk, \"mmc2\", mmc_parents, 0x838,\n\t\t\t\t\t  0, 4,\t\t \n\t\t\t\t\t  8, 2,\t\t \n\t\t\t\t\t  24, 2,\t \n\t\t\t\t\t  BIT(31),\t \n\t\t\t\t\t  2,\t\t \n\t\t\t\t\t  0);\n\nstatic SUNXI_CCU_GATE(bus_mmc0_clk, \"bus-mmc0\", \"ahb3\", 0x84c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_mmc1_clk, \"bus-mmc1\", \"ahb3\", 0x84c, BIT(1), 0);\nstatic SUNXI_CCU_GATE(bus_mmc2_clk, \"bus-mmc2\", \"ahb3\", 0x84c, BIT(2), 0);\n\nstatic SUNXI_CCU_GATE(bus_uart0_clk, \"bus-uart0\", \"apb2\", 0x90c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_uart1_clk, \"bus-uart1\", \"apb2\", 0x90c, BIT(1), 0);\nstatic SUNXI_CCU_GATE(bus_uart2_clk, \"bus-uart2\", \"apb2\", 0x90c, BIT(2), 0);\nstatic SUNXI_CCU_GATE(bus_uart3_clk, \"bus-uart3\", \"apb2\", 0x90c, BIT(3), 0);\nstatic SUNXI_CCU_GATE(bus_uart4_clk, \"bus-uart4\", \"apb2\", 0x90c, BIT(4), 0);\nstatic SUNXI_CCU_GATE(bus_uart5_clk, \"bus-uart5\", \"apb2\", 0x90c, BIT(5), 0);\n\nstatic SUNXI_CCU_GATE(bus_i2c0_clk, \"bus-i2c0\", \"apb2\", 0x91c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_i2c1_clk, \"bus-i2c1\", \"apb2\", 0x91c, BIT(1), 0);\nstatic SUNXI_CCU_GATE(bus_i2c2_clk, \"bus-i2c2\", \"apb2\", 0x91c, BIT(2), 0);\nstatic SUNXI_CCU_GATE(bus_i2c3_clk, \"bus-i2c3\", \"apb2\", 0x91c, BIT(3), 0);\nstatic SUNXI_CCU_GATE(bus_i2c4_clk, \"bus-i2c4\", \"apb2\", 0x91c, BIT(4), 0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(spi0_clk, \"spi0\", nand_spi_parents, 0x940,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 3,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(spi1_clk, \"spi1\", nand_spi_parents, 0x944,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 3,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_GATE(bus_spi0_clk, \"bus-spi0\", \"ahb3\", 0x96c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_spi1_clk, \"bus-spi1\", \"ahb3\", 0x96c, BIT(1), 0);\n\nstatic SUNXI_CCU_GATE(emac_25m_clk, \"emac-25m\", \"ahb3\", 0x970,\n\t\t      BIT(31) | BIT(30), 0);\n\nstatic SUNXI_CCU_GATE(bus_emac0_clk, \"bus-emac0\", \"ahb3\", 0x97c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_emac1_clk, \"bus-emac1\", \"ahb3\", 0x97c, BIT(1), 0);\n\nstatic const char * const ts_parents[] = { \"osc24M\", \"pll-periph0\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(ts_clk, \"ts\", ts_parents, 0x9b0,\n\t\t\t\t\t0, 4,\t \n\t\t\t\t\t8, 2,\t \n\t\t\t\t\t24, 1,\t \n\t\t\t\t\tBIT(31), \n\t\t\t\t\t0);\n\nstatic SUNXI_CCU_GATE(bus_ts_clk, \"bus-ts\", \"ahb3\", 0x9bc, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_ths_clk, \"bus-ths\", \"apb1\", 0x9fc, BIT(0), 0);\n\nstatic const char * const audio_parents[] = { \"pll-audio-1x\", \"pll-audio-2x\",\n\t\t\t\t\t      \"pll-audio-4x\", \"pll-audio-hs\" };\nstatic struct ccu_div spdif_clk = {\n\t.enable\t\t= BIT(31),\n\t.div\t\t= _SUNXI_CCU_DIV_FLAGS(8, 2, CLK_DIVIDER_POWER_OF_TWO),\n\t.mux\t\t= _SUNXI_CCU_MUX(24, 2),\n\t.common\t\t= {\n\t\t.reg\t\t= 0xa20,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"spdif\",\n\t\t\t\t\t\t      audio_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic SUNXI_CCU_GATE(bus_spdif_clk, \"bus-spdif\", \"apb1\", 0xa2c, BIT(0), 0);\n\nstatic struct ccu_div dmic_clk = {\n\t.enable\t\t= BIT(31),\n\t.div\t\t= _SUNXI_CCU_DIV_FLAGS(8, 2, CLK_DIVIDER_POWER_OF_TWO),\n\t.mux\t\t= _SUNXI_CCU_MUX(24, 2),\n\t.common\t\t= {\n\t\t.reg\t\t= 0xa40,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"dmic\",\n\t\t\t\t\t\t      audio_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic SUNXI_CCU_GATE(bus_dmic_clk, \"bus-dmic\", \"apb1\", 0xa4c, BIT(0), 0);\n\nstatic SUNXI_CCU_M_WITH_MUX_GATE(audio_codec_1x_clk, \"audio-codec-1x\",\n\t\t\t\t audio_parents, 0xa50,\n\t\t\t\t 0, 4,\t \n\t\t\t\t 24, 2,\t \n\t\t\t\t BIT(31),\t \n\t\t\t\t CLK_SET_RATE_PARENT);\nstatic SUNXI_CCU_M_WITH_MUX_GATE(audio_codec_4x_clk, \"audio-codec-4x\",\n\t\t\t\t audio_parents, 0xa54,\n\t\t\t\t 0, 4,\t \n\t\t\t\t 24, 2,\t \n\t\t\t\t BIT(31),\t \n\t\t\t\t CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE(bus_audio_codec_clk, \"bus-audio-codec\", \"apb1\", 0xa5c,\n\t\tBIT(0), 0);\n\nstatic struct ccu_div audio_hub_clk = {\n\t.enable\t\t= BIT(31),\n\t.div\t\t= _SUNXI_CCU_DIV_FLAGS(8, 2, CLK_DIVIDER_POWER_OF_TWO),\n\t.mux\t\t= _SUNXI_CCU_MUX(24, 2),\n\t.common\t\t= {\n\t\t.reg\t\t= 0xa60,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"audio-hub\",\n\t\t\t\t\t\t      audio_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic SUNXI_CCU_GATE(bus_audio_hub_clk, \"bus-audio-hub\", \"apb1\", 0xa6c, BIT(0), 0);\n\n \n#define SUN50I_H616_USB0_CLK_REG\t\t0xa70\n#define SUN50I_H616_USB1_CLK_REG\t\t0xa74\n#define SUN50I_H616_USB2_CLK_REG\t\t0xa78\n#define SUN50I_H616_USB3_CLK_REG\t\t0xa7c\n\nstatic SUNXI_CCU_GATE(usb_ohci0_clk, \"usb-ohci0\", \"osc12M\", 0xa70, BIT(31), 0);\nstatic SUNXI_CCU_GATE(usb_phy0_clk, \"usb-phy0\", \"osc24M\", 0xa70, BIT(29), 0);\n\nstatic SUNXI_CCU_GATE(usb_ohci1_clk, \"usb-ohci1\", \"osc12M\", 0xa74, BIT(31), 0);\nstatic SUNXI_CCU_GATE(usb_phy1_clk, \"usb-phy1\", \"osc24M\", 0xa74, BIT(29), 0);\n\nstatic SUNXI_CCU_GATE(usb_ohci2_clk, \"usb-ohci2\", \"osc12M\", 0xa78, BIT(31), 0);\nstatic SUNXI_CCU_GATE(usb_phy2_clk, \"usb-phy2\", \"osc24M\", 0xa78, BIT(29), 0);\n\nstatic SUNXI_CCU_GATE(usb_ohci3_clk, \"usb-ohci3\", \"osc12M\", 0xa7c, BIT(31), 0);\nstatic SUNXI_CCU_GATE(usb_phy3_clk, \"usb-phy3\", \"osc24M\", 0xa7c, BIT(29), 0);\n\nstatic SUNXI_CCU_GATE(bus_ohci0_clk, \"bus-ohci0\", \"ahb3\", 0xa8c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_ohci1_clk, \"bus-ohci1\", \"ahb3\", 0xa8c, BIT(1), 0);\nstatic SUNXI_CCU_GATE(bus_ohci2_clk, \"bus-ohci2\", \"ahb3\", 0xa8c, BIT(2), 0);\nstatic SUNXI_CCU_GATE(bus_ohci3_clk, \"bus-ohci3\", \"ahb3\", 0xa8c, BIT(3), 0);\nstatic SUNXI_CCU_GATE(bus_ehci0_clk, \"bus-ehci0\", \"ahb3\", 0xa8c, BIT(4), 0);\nstatic SUNXI_CCU_GATE(bus_ehci1_clk, \"bus-ehci1\", \"ahb3\", 0xa8c, BIT(5), 0);\nstatic SUNXI_CCU_GATE(bus_ehci2_clk, \"bus-ehci2\", \"ahb3\", 0xa8c, BIT(6), 0);\nstatic SUNXI_CCU_GATE(bus_ehci3_clk, \"bus-ehci3\", \"ahb3\", 0xa8c, BIT(7), 0);\nstatic SUNXI_CCU_GATE(bus_otg_clk, \"bus-otg\", \"ahb3\", 0xa8c, BIT(8), 0);\n\nstatic SUNXI_CCU_GATE(bus_keyadc_clk, \"bus-keyadc\", \"apb1\", 0xa9c, BIT(0), 0);\n\nstatic const char * const hdmi_parents[] = { \"pll-video0\", \"pll-video0-4x\",\n\t\t\t\t\t     \"pll-video2\", \"pll-video2-4x\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(hdmi_clk, \"hdmi\", hdmi_parents, 0xb00,\n\t\t\t\t 0, 4,\t\t \n\t\t\t\t 24, 2,\t\t \n\t\t\t\t BIT(31),\t \n\t\t\t\t 0);\n\nstatic SUNXI_CCU_GATE(hdmi_slow_clk, \"hdmi-slow\", \"osc24M\", 0xb04, BIT(31), 0);\n\nstatic const char * const hdmi_cec_parents[] = { \"osc32k\", \"pll-periph0-2x\" };\nstatic const struct ccu_mux_fixed_prediv hdmi_cec_predivs[] = {\n\t{ .index = 1, .div = 36621 },\n};\n\n#define SUN50I_H616_HDMI_CEC_CLK_REG\t\t0xb10\nstatic struct ccu_mux hdmi_cec_clk = {\n\t.enable\t\t= BIT(31) | BIT(30),\n\n\t.mux\t\t= {\n\t\t.shift\t= 24,\n\t\t.width\t= 2,\n\n\t\t.fixed_predivs\t= hdmi_cec_predivs,\n\t\t.n_predivs\t= ARRAY_SIZE(hdmi_cec_predivs),\n\t},\n\n\t.common\t\t= {\n\t\t.reg\t\t= 0xb10,\n\t\t.features\t= CCU_FEATURE_FIXED_PREDIV,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"hdmi-cec\",\n\t\t\t\t\t\t      hdmi_cec_parents,\n\t\t\t\t\t\t      &ccu_mux_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic SUNXI_CCU_GATE(bus_hdmi_clk, \"bus-hdmi\", \"ahb3\", 0xb1c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(bus_tcon_top_clk, \"bus-tcon-top\", \"ahb3\",\n\t\t      0xb5c, BIT(0), 0);\n\nstatic const char * const tcon_tv_parents[] = { \"pll-video0\",\n\t\t\t\t\t\t\"pll-video0-4x\",\n\t\t\t\t\t\t\"pll-video1\",\n\t\t\t\t\t\t\"pll-video1-4x\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(tcon_tv0_clk, \"tcon-tv0\",\n\t\t\t\t  tcon_tv_parents, 0xb80,\n\t\t\t\t  0, 4,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 3,\t \n\t\t\t\t  BIT(31),\t \n\t\t\t\t  CLK_SET_RATE_PARENT);\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(tcon_tv1_clk, \"tcon-tv1\",\n\t\t\t\t  tcon_tv_parents, 0xb84,\n\t\t\t\t  0, 4,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 3,\t \n\t\t\t\t  BIT(31),\t \n\t\t\t\t  CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE(bus_tcon_tv0_clk, \"bus-tcon-tv0\", \"ahb3\",\n\t\t      0xb9c, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_tcon_tv1_clk, \"bus-tcon-tv1\", \"ahb3\",\n\t\t      0xb9c, BIT(1), 0);\n\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(tve0_clk, \"tve0\",\n\t\t\t\t  tcon_tv_parents, 0xbb0,\n\t\t\t\t  0, 4,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 3,\t \n\t\t\t\t  BIT(31),\t \n\t\t\t\t  CLK_SET_RATE_PARENT);\n\nstatic SUNXI_CCU_GATE(bus_tve_top_clk, \"bus-tve-top\", \"ahb3\",\n\t\t      0xbbc, BIT(0), 0);\nstatic SUNXI_CCU_GATE(bus_tve0_clk, \"bus-tve0\", \"ahb3\",\n\t\t      0xbbc, BIT(1), 0);\n\nstatic const char * const hdcp_parents[] = { \"pll-periph0\", \"pll-periph1\" };\nstatic SUNXI_CCU_M_WITH_MUX_GATE(hdcp_clk, \"hdcp\", hdcp_parents, 0xc40,\n\t\t\t\t 0, 4,\t\t \n\t\t\t\t 24, 2,\t\t \n\t\t\t\t BIT(31),\t \n\t\t\t\t 0);\n\nstatic SUNXI_CCU_GATE(bus_hdcp_clk, \"bus-hdcp\", \"ahb3\", 0xc4c, BIT(0), 0);\n\n \nstatic CLK_FIXED_FACTOR_FW_NAME(osc12M_clk, \"osc12M\", \"hosc\", 2, 1, 0);\n\nstatic const struct clk_hw *clk_parent_pll_audio[] = {\n\t&pll_audio_hs_clk.common.hw\n};\n\n \nstatic CLK_FIXED_FACTOR_HWS(pll_audio_1x_clk, \"pll-audio-1x\",\n\t\t\t    clk_parent_pll_audio,\n\t\t\t    96, 1, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HWS(pll_audio_2x_clk, \"pll-audio-2x\",\n\t\t\t    clk_parent_pll_audio,\n\t\t\t    48, 1, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HWS(pll_audio_4x_clk, \"pll-audio-4x\",\n\t\t\t    clk_parent_pll_audio,\n\t\t\t    24, 1, CLK_SET_RATE_PARENT);\n\nstatic const struct clk_hw *pll_periph0_parents[] = {\n\t&pll_periph0_clk.common.hw\n};\n\nstatic CLK_FIXED_FACTOR_HWS(pll_periph0_2x_clk, \"pll-periph0-2x\",\n\t\t\t    pll_periph0_parents,\n\t\t\t    1, 2, 0);\n\nstatic const struct clk_hw *pll_periph0_2x_hws[] = {\n\t&pll_periph0_2x_clk.hw\n};\n\nstatic CLK_FIXED_FACTOR_HWS(pll_system_32k_clk, \"pll-system-32k\",\n\t\t\t    pll_periph0_2x_hws, 36621, 1, 0);\n\nstatic const struct clk_hw *pll_periph1_parents[] = {\n\t&pll_periph1_clk.common.hw\n};\n\nstatic CLK_FIXED_FACTOR_HWS(pll_periph1_2x_clk, \"pll-periph1-2x\",\n\t\t\t    pll_periph1_parents,\n\t\t\t    1, 2, 0);\n\nstatic CLK_FIXED_FACTOR_HW(pll_video0_4x_clk, \"pll-video0-4x\",\n\t\t\t   &pll_video0_clk.common.hw,\n\t\t\t   1, 4, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HW(pll_video1_4x_clk, \"pll-video1-4x\",\n\t\t\t   &pll_video1_clk.common.hw,\n\t\t\t   1, 4, CLK_SET_RATE_PARENT);\nstatic CLK_FIXED_FACTOR_HW(pll_video2_4x_clk, \"pll-video2-4x\",\n\t\t\t   &pll_video2_clk.common.hw,\n\t\t\t   1, 4, CLK_SET_RATE_PARENT);\n\nstatic struct ccu_common *sun50i_h616_ccu_clks[] = {\n\t&pll_cpux_clk.common,\n\t&pll_ddr0_clk.common,\n\t&pll_ddr1_clk.common,\n\t&pll_periph0_clk.common,\n\t&pll_periph1_clk.common,\n\t&pll_gpu_clk.common,\n\t&pll_video0_clk.common,\n\t&pll_video1_clk.common,\n\t&pll_video2_clk.common,\n\t&pll_ve_clk.common,\n\t&pll_de_clk.common,\n\t&pll_audio_hs_clk.common,\n\t&cpux_clk.common,\n\t&axi_clk.common,\n\t&cpux_apb_clk.common,\n\t&psi_ahb1_ahb2_clk.common,\n\t&ahb3_clk.common,\n\t&apb1_clk.common,\n\t&apb2_clk.common,\n\t&mbus_clk.common,\n\t&de_clk.common,\n\t&bus_de_clk.common,\n\t&deinterlace_clk.common,\n\t&bus_deinterlace_clk.common,\n\t&g2d_clk.common,\n\t&bus_g2d_clk.common,\n\t&gpu0_clk.common,\n\t&bus_gpu_clk.common,\n\t&gpu1_clk.common,\n\t&ce_clk.common,\n\t&bus_ce_clk.common,\n\t&ve_clk.common,\n\t&bus_ve_clk.common,\n\t&bus_dma_clk.common,\n\t&bus_hstimer_clk.common,\n\t&avs_clk.common,\n\t&bus_dbg_clk.common,\n\t&bus_psi_clk.common,\n\t&bus_pwm_clk.common,\n\t&bus_iommu_clk.common,\n\t&dram_clk.common,\n\t&mbus_dma_clk.common,\n\t&mbus_ve_clk.common,\n\t&mbus_ce_clk.common,\n\t&mbus_ts_clk.common,\n\t&mbus_nand_clk.common,\n\t&mbus_g2d_clk.common,\n\t&bus_dram_clk.common,\n\t&nand0_clk.common,\n\t&nand1_clk.common,\n\t&bus_nand_clk.common,\n\t&mmc0_clk.common,\n\t&mmc1_clk.common,\n\t&mmc2_clk.common,\n\t&bus_mmc0_clk.common,\n\t&bus_mmc1_clk.common,\n\t&bus_mmc2_clk.common,\n\t&bus_uart0_clk.common,\n\t&bus_uart1_clk.common,\n\t&bus_uart2_clk.common,\n\t&bus_uart3_clk.common,\n\t&bus_uart4_clk.common,\n\t&bus_uart5_clk.common,\n\t&bus_i2c0_clk.common,\n\t&bus_i2c1_clk.common,\n\t&bus_i2c2_clk.common,\n\t&bus_i2c3_clk.common,\n\t&bus_i2c4_clk.common,\n\t&spi0_clk.common,\n\t&spi1_clk.common,\n\t&bus_spi0_clk.common,\n\t&bus_spi1_clk.common,\n\t&emac_25m_clk.common,\n\t&bus_emac0_clk.common,\n\t&bus_emac1_clk.common,\n\t&ts_clk.common,\n\t&bus_ts_clk.common,\n\t&bus_ths_clk.common,\n\t&spdif_clk.common,\n\t&bus_spdif_clk.common,\n\t&dmic_clk.common,\n\t&bus_dmic_clk.common,\n\t&audio_codec_1x_clk.common,\n\t&audio_codec_4x_clk.common,\n\t&bus_audio_codec_clk.common,\n\t&audio_hub_clk.common,\n\t&bus_audio_hub_clk.common,\n\t&usb_ohci0_clk.common,\n\t&usb_phy0_clk.common,\n\t&usb_ohci1_clk.common,\n\t&usb_phy1_clk.common,\n\t&usb_ohci2_clk.common,\n\t&usb_phy2_clk.common,\n\t&usb_ohci3_clk.common,\n\t&usb_phy3_clk.common,\n\t&bus_ohci0_clk.common,\n\t&bus_ohci1_clk.common,\n\t&bus_ohci2_clk.common,\n\t&bus_ohci3_clk.common,\n\t&bus_ehci0_clk.common,\n\t&bus_ehci1_clk.common,\n\t&bus_ehci2_clk.common,\n\t&bus_ehci3_clk.common,\n\t&bus_otg_clk.common,\n\t&bus_keyadc_clk.common,\n\t&hdmi_clk.common,\n\t&hdmi_slow_clk.common,\n\t&hdmi_cec_clk.common,\n\t&bus_hdmi_clk.common,\n\t&bus_tcon_top_clk.common,\n\t&tcon_tv0_clk.common,\n\t&tcon_tv1_clk.common,\n\t&bus_tcon_tv0_clk.common,\n\t&bus_tcon_tv1_clk.common,\n\t&tve0_clk.common,\n\t&bus_tve_top_clk.common,\n\t&bus_tve0_clk.common,\n\t&hdcp_clk.common,\n\t&bus_hdcp_clk.common,\n};\n\nstatic struct clk_hw_onecell_data sun50i_h616_hw_clks = {\n\t.hws\t= {\n\t\t[CLK_OSC12M]\t\t= &osc12M_clk.hw,\n\t\t[CLK_PLL_CPUX]\t\t= &pll_cpux_clk.common.hw,\n\t\t[CLK_PLL_DDR0]\t\t= &pll_ddr0_clk.common.hw,\n\t\t[CLK_PLL_DDR1]\t\t= &pll_ddr1_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0]\t= &pll_periph0_clk.common.hw,\n\t\t[CLK_PLL_PERIPH0_2X]\t= &pll_periph0_2x_clk.hw,\n\t\t[CLK_PLL_SYSTEM_32K]\t= &pll_system_32k_clk.hw,\n\t\t[CLK_PLL_PERIPH1]\t= &pll_periph1_clk.common.hw,\n\t\t[CLK_PLL_PERIPH1_2X]\t= &pll_periph1_2x_clk.hw,\n\t\t[CLK_PLL_GPU]\t\t= &pll_gpu_clk.common.hw,\n\t\t[CLK_PLL_VIDEO0]\t= &pll_video0_clk.common.hw,\n\t\t[CLK_PLL_VIDEO0_4X]\t= &pll_video0_4x_clk.hw,\n\t\t[CLK_PLL_VIDEO1]\t= &pll_video1_clk.common.hw,\n\t\t[CLK_PLL_VIDEO1_4X]\t= &pll_video1_4x_clk.hw,\n\t\t[CLK_PLL_VIDEO2]\t= &pll_video2_clk.common.hw,\n\t\t[CLK_PLL_VIDEO2_4X]\t= &pll_video2_4x_clk.hw,\n\t\t[CLK_PLL_VE]\t\t= &pll_ve_clk.common.hw,\n\t\t[CLK_PLL_DE]\t\t= &pll_de_clk.common.hw,\n\t\t[CLK_PLL_AUDIO_HS]\t= &pll_audio_hs_clk.common.hw,\n\t\t[CLK_PLL_AUDIO_1X]\t= &pll_audio_1x_clk.hw,\n\t\t[CLK_PLL_AUDIO_2X]\t= &pll_audio_2x_clk.hw,\n\t\t[CLK_PLL_AUDIO_4X]\t= &pll_audio_4x_clk.hw,\n\t\t[CLK_CPUX]\t\t= &cpux_clk.common.hw,\n\t\t[CLK_AXI]\t\t= &axi_clk.common.hw,\n\t\t[CLK_CPUX_APB]\t\t= &cpux_apb_clk.common.hw,\n\t\t[CLK_PSI_AHB1_AHB2]\t= &psi_ahb1_ahb2_clk.common.hw,\n\t\t[CLK_AHB3]\t\t= &ahb3_clk.common.hw,\n\t\t[CLK_APB1]\t\t= &apb1_clk.common.hw,\n\t\t[CLK_APB2]\t\t= &apb2_clk.common.hw,\n\t\t[CLK_MBUS]\t\t= &mbus_clk.common.hw,\n\t\t[CLK_DE]\t\t= &de_clk.common.hw,\n\t\t[CLK_BUS_DE]\t\t= &bus_de_clk.common.hw,\n\t\t[CLK_DEINTERLACE]\t= &deinterlace_clk.common.hw,\n\t\t[CLK_BUS_DEINTERLACE]\t= &bus_deinterlace_clk.common.hw,\n\t\t[CLK_G2D]\t\t= &g2d_clk.common.hw,\n\t\t[CLK_BUS_G2D]\t\t= &bus_g2d_clk.common.hw,\n\t\t[CLK_GPU0]\t\t= &gpu0_clk.common.hw,\n\t\t[CLK_BUS_GPU]\t\t= &bus_gpu_clk.common.hw,\n\t\t[CLK_GPU1]\t\t= &gpu1_clk.common.hw,\n\t\t[CLK_CE]\t\t= &ce_clk.common.hw,\n\t\t[CLK_BUS_CE]\t\t= &bus_ce_clk.common.hw,\n\t\t[CLK_VE]\t\t= &ve_clk.common.hw,\n\t\t[CLK_BUS_VE]\t\t= &bus_ve_clk.common.hw,\n\t\t[CLK_BUS_DMA]\t\t= &bus_dma_clk.common.hw,\n\t\t[CLK_BUS_HSTIMER]\t= &bus_hstimer_clk.common.hw,\n\t\t[CLK_AVS]\t\t= &avs_clk.common.hw,\n\t\t[CLK_BUS_DBG]\t\t= &bus_dbg_clk.common.hw,\n\t\t[CLK_BUS_PSI]\t\t= &bus_psi_clk.common.hw,\n\t\t[CLK_BUS_PWM]\t\t= &bus_pwm_clk.common.hw,\n\t\t[CLK_BUS_IOMMU]\t\t= &bus_iommu_clk.common.hw,\n\t\t[CLK_DRAM]\t\t= &dram_clk.common.hw,\n\t\t[CLK_MBUS_DMA]\t\t= &mbus_dma_clk.common.hw,\n\t\t[CLK_MBUS_VE]\t\t= &mbus_ve_clk.common.hw,\n\t\t[CLK_MBUS_CE]\t\t= &mbus_ce_clk.common.hw,\n\t\t[CLK_MBUS_TS]\t\t= &mbus_ts_clk.common.hw,\n\t\t[CLK_MBUS_NAND]\t\t= &mbus_nand_clk.common.hw,\n\t\t[CLK_MBUS_G2D]\t\t= &mbus_g2d_clk.common.hw,\n\t\t[CLK_BUS_DRAM]\t\t= &bus_dram_clk.common.hw,\n\t\t[CLK_NAND0]\t\t= &nand0_clk.common.hw,\n\t\t[CLK_NAND1]\t\t= &nand1_clk.common.hw,\n\t\t[CLK_BUS_NAND]\t\t= &bus_nand_clk.common.hw,\n\t\t[CLK_MMC0]\t\t= &mmc0_clk.common.hw,\n\t\t[CLK_MMC1]\t\t= &mmc1_clk.common.hw,\n\t\t[CLK_MMC2]\t\t= &mmc2_clk.common.hw,\n\t\t[CLK_BUS_MMC0]\t\t= &bus_mmc0_clk.common.hw,\n\t\t[CLK_BUS_MMC1]\t\t= &bus_mmc1_clk.common.hw,\n\t\t[CLK_BUS_MMC2]\t\t= &bus_mmc2_clk.common.hw,\n\t\t[CLK_BUS_UART0]\t\t= &bus_uart0_clk.common.hw,\n\t\t[CLK_BUS_UART1]\t\t= &bus_uart1_clk.common.hw,\n\t\t[CLK_BUS_UART2]\t\t= &bus_uart2_clk.common.hw,\n\t\t[CLK_BUS_UART3]\t\t= &bus_uart3_clk.common.hw,\n\t\t[CLK_BUS_UART4]\t\t= &bus_uart4_clk.common.hw,\n\t\t[CLK_BUS_UART5]\t\t= &bus_uart5_clk.common.hw,\n\t\t[CLK_BUS_I2C0]\t\t= &bus_i2c0_clk.common.hw,\n\t\t[CLK_BUS_I2C1]\t\t= &bus_i2c1_clk.common.hw,\n\t\t[CLK_BUS_I2C2]\t\t= &bus_i2c2_clk.common.hw,\n\t\t[CLK_BUS_I2C3]\t\t= &bus_i2c3_clk.common.hw,\n\t\t[CLK_BUS_I2C4]\t\t= &bus_i2c4_clk.common.hw,\n\t\t[CLK_SPI0]\t\t= &spi0_clk.common.hw,\n\t\t[CLK_SPI1]\t\t= &spi1_clk.common.hw,\n\t\t[CLK_BUS_SPI0]\t\t= &bus_spi0_clk.common.hw,\n\t\t[CLK_BUS_SPI1]\t\t= &bus_spi1_clk.common.hw,\n\t\t[CLK_EMAC_25M]\t\t= &emac_25m_clk.common.hw,\n\t\t[CLK_BUS_EMAC0]\t\t= &bus_emac0_clk.common.hw,\n\t\t[CLK_BUS_EMAC1]\t\t= &bus_emac1_clk.common.hw,\n\t\t[CLK_TS]\t\t= &ts_clk.common.hw,\n\t\t[CLK_BUS_TS]\t\t= &bus_ts_clk.common.hw,\n\t\t[CLK_BUS_THS]\t\t= &bus_ths_clk.common.hw,\n\t\t[CLK_SPDIF]\t\t= &spdif_clk.common.hw,\n\t\t[CLK_BUS_SPDIF]\t\t= &bus_spdif_clk.common.hw,\n\t\t[CLK_DMIC]\t\t= &dmic_clk.common.hw,\n\t\t[CLK_BUS_DMIC]\t\t= &bus_dmic_clk.common.hw,\n\t\t[CLK_AUDIO_CODEC_1X]\t= &audio_codec_1x_clk.common.hw,\n\t\t[CLK_AUDIO_CODEC_4X]\t= &audio_codec_4x_clk.common.hw,\n\t\t[CLK_BUS_AUDIO_CODEC]\t= &bus_audio_codec_clk.common.hw,\n\t\t[CLK_AUDIO_HUB]\t\t= &audio_hub_clk.common.hw,\n\t\t[CLK_BUS_AUDIO_HUB]\t= &bus_audio_hub_clk.common.hw,\n\t\t[CLK_USB_OHCI0]\t\t= &usb_ohci0_clk.common.hw,\n\t\t[CLK_USB_PHY0]\t\t= &usb_phy0_clk.common.hw,\n\t\t[CLK_USB_OHCI1]\t\t= &usb_ohci1_clk.common.hw,\n\t\t[CLK_USB_PHY1]\t\t= &usb_phy1_clk.common.hw,\n\t\t[CLK_USB_OHCI2]\t\t= &usb_ohci2_clk.common.hw,\n\t\t[CLK_USB_PHY2]\t\t= &usb_phy2_clk.common.hw,\n\t\t[CLK_USB_OHCI3]\t\t= &usb_ohci3_clk.common.hw,\n\t\t[CLK_USB_PHY3]\t\t= &usb_phy3_clk.common.hw,\n\t\t[CLK_BUS_OHCI0]\t\t= &bus_ohci0_clk.common.hw,\n\t\t[CLK_BUS_OHCI1]\t\t= &bus_ohci1_clk.common.hw,\n\t\t[CLK_BUS_OHCI2]\t\t= &bus_ohci2_clk.common.hw,\n\t\t[CLK_BUS_OHCI3]\t\t= &bus_ohci3_clk.common.hw,\n\t\t[CLK_BUS_EHCI0]\t\t= &bus_ehci0_clk.common.hw,\n\t\t[CLK_BUS_EHCI1]\t\t= &bus_ehci1_clk.common.hw,\n\t\t[CLK_BUS_EHCI2]\t\t= &bus_ehci2_clk.common.hw,\n\t\t[CLK_BUS_EHCI3]\t\t= &bus_ehci3_clk.common.hw,\n\t\t[CLK_BUS_OTG]\t\t= &bus_otg_clk.common.hw,\n\t\t[CLK_BUS_KEYADC]\t= &bus_keyadc_clk.common.hw,\n\t\t[CLK_HDMI]\t\t= &hdmi_clk.common.hw,\n\t\t[CLK_HDMI_SLOW]\t\t= &hdmi_slow_clk.common.hw,\n\t\t[CLK_HDMI_CEC]\t\t= &hdmi_cec_clk.common.hw,\n\t\t[CLK_BUS_HDMI]\t\t= &bus_hdmi_clk.common.hw,\n\t\t[CLK_BUS_TCON_TOP]\t= &bus_tcon_top_clk.common.hw,\n\t\t[CLK_TCON_TV0]\t\t= &tcon_tv0_clk.common.hw,\n\t\t[CLK_TCON_TV1]\t\t= &tcon_tv1_clk.common.hw,\n\t\t[CLK_BUS_TCON_TV0]\t= &bus_tcon_tv0_clk.common.hw,\n\t\t[CLK_BUS_TCON_TV1]\t= &bus_tcon_tv1_clk.common.hw,\n\t\t[CLK_TVE0]\t\t= &tve0_clk.common.hw,\n\t\t[CLK_BUS_TVE_TOP]\t= &bus_tve_top_clk.common.hw,\n\t\t[CLK_BUS_TVE0]\t\t= &bus_tve0_clk.common.hw,\n\t\t[CLK_HDCP]\t\t= &hdcp_clk.common.hw,\n\t\t[CLK_BUS_HDCP]\t\t= &bus_hdcp_clk.common.hw,\n\t},\n\t.num = CLK_NUMBER,\n};\n\nstatic struct ccu_reset_map sun50i_h616_ccu_resets[] = {\n\t[RST_MBUS]\t\t= { 0x540, BIT(30) },\n\n\t[RST_BUS_DE]\t\t= { 0x60c, BIT(16) },\n\t[RST_BUS_DEINTERLACE]\t= { 0x62c, BIT(16) },\n\t[RST_BUS_GPU]\t\t= { 0x67c, BIT(16) },\n\t[RST_BUS_CE]\t\t= { 0x68c, BIT(16) },\n\t[RST_BUS_VE]\t\t= { 0x69c, BIT(16) },\n\t[RST_BUS_DMA]\t\t= { 0x70c, BIT(16) },\n\t[RST_BUS_HSTIMER]\t= { 0x73c, BIT(16) },\n\t[RST_BUS_DBG]\t\t= { 0x78c, BIT(16) },\n\t[RST_BUS_PSI]\t\t= { 0x79c, BIT(16) },\n\t[RST_BUS_PWM]\t\t= { 0x7ac, BIT(16) },\n\t[RST_BUS_IOMMU]\t\t= { 0x7bc, BIT(16) },\n\t[RST_BUS_DRAM]\t\t= { 0x80c, BIT(16) },\n\t[RST_BUS_NAND]\t\t= { 0x82c, BIT(16) },\n\t[RST_BUS_MMC0]\t\t= { 0x84c, BIT(16) },\n\t[RST_BUS_MMC1]\t\t= { 0x84c, BIT(17) },\n\t[RST_BUS_MMC2]\t\t= { 0x84c, BIT(18) },\n\t[RST_BUS_UART0]\t\t= { 0x90c, BIT(16) },\n\t[RST_BUS_UART1]\t\t= { 0x90c, BIT(17) },\n\t[RST_BUS_UART2]\t\t= { 0x90c, BIT(18) },\n\t[RST_BUS_UART3]\t\t= { 0x90c, BIT(19) },\n\t[RST_BUS_UART4]\t\t= { 0x90c, BIT(20) },\n\t[RST_BUS_UART5]\t\t= { 0x90c, BIT(21) },\n\t[RST_BUS_I2C0]\t\t= { 0x91c, BIT(16) },\n\t[RST_BUS_I2C1]\t\t= { 0x91c, BIT(17) },\n\t[RST_BUS_I2C2]\t\t= { 0x91c, BIT(18) },\n\t[RST_BUS_I2C3]\t\t= { 0x91c, BIT(19) },\n\t[RST_BUS_I2C4]\t\t= { 0x91c, BIT(20) },\n\t[RST_BUS_SPI0]\t\t= { 0x96c, BIT(16) },\n\t[RST_BUS_SPI1]\t\t= { 0x96c, BIT(17) },\n\t[RST_BUS_EMAC0]\t\t= { 0x97c, BIT(16) },\n\t[RST_BUS_EMAC1]\t\t= { 0x97c, BIT(17) },\n\t[RST_BUS_TS]\t\t= { 0x9bc, BIT(16) },\n\t[RST_BUS_THS]\t\t= { 0x9fc, BIT(16) },\n\t[RST_BUS_SPDIF]\t\t= { 0xa2c, BIT(16) },\n\t[RST_BUS_DMIC]\t\t= { 0xa4c, BIT(16) },\n\t[RST_BUS_AUDIO_CODEC]\t= { 0xa5c, BIT(16) },\n\t[RST_BUS_AUDIO_HUB]\t= { 0xa6c, BIT(16) },\n\n\t[RST_USB_PHY0]\t\t= { 0xa70, BIT(30) },\n\t[RST_USB_PHY1]\t\t= { 0xa74, BIT(30) },\n\t[RST_USB_PHY2]\t\t= { 0xa78, BIT(30) },\n\t[RST_USB_PHY3]\t\t= { 0xa7c, BIT(30) },\n\t[RST_BUS_OHCI0]\t\t= { 0xa8c, BIT(16) },\n\t[RST_BUS_OHCI1]\t\t= { 0xa8c, BIT(17) },\n\t[RST_BUS_OHCI2]\t\t= { 0xa8c, BIT(18) },\n\t[RST_BUS_OHCI3]\t\t= { 0xa8c, BIT(19) },\n\t[RST_BUS_EHCI0]\t\t= { 0xa8c, BIT(20) },\n\t[RST_BUS_EHCI1]\t\t= { 0xa8c, BIT(21) },\n\t[RST_BUS_EHCI2]\t\t= { 0xa8c, BIT(22) },\n\t[RST_BUS_EHCI3]\t\t= { 0xa8c, BIT(23) },\n\t[RST_BUS_OTG]\t\t= { 0xa8c, BIT(24) },\n\t[RST_BUS_KEYADC]\t= { 0xa9c, BIT(16) },\n\n\t[RST_BUS_HDMI]\t\t= { 0xb1c, BIT(16) },\n\t[RST_BUS_HDMI_SUB]\t= { 0xb1c, BIT(17) },\n\t[RST_BUS_TCON_TOP]\t= { 0xb5c, BIT(16) },\n\t[RST_BUS_TCON_TV0]\t= { 0xb9c, BIT(16) },\n\t[RST_BUS_TCON_TV1]\t= { 0xb9c, BIT(17) },\n\t[RST_BUS_TVE_TOP]\t= { 0xbbc, BIT(16) },\n\t[RST_BUS_TVE0]\t\t= { 0xbbc, BIT(17) },\n\t[RST_BUS_HDCP]\t\t= { 0xc4c, BIT(16) },\n};\n\nstatic const struct sunxi_ccu_desc sun50i_h616_ccu_desc = {\n\t.ccu_clks\t= sun50i_h616_ccu_clks,\n\t.num_ccu_clks\t= ARRAY_SIZE(sun50i_h616_ccu_clks),\n\n\t.hw_clks\t= &sun50i_h616_hw_clks,\n\n\t.resets\t\t= sun50i_h616_ccu_resets,\n\t.num_resets\t= ARRAY_SIZE(sun50i_h616_ccu_resets),\n};\n\nstatic const u32 pll_regs[] = {\n\tSUN50I_H616_PLL_CPUX_REG,\n\tSUN50I_H616_PLL_DDR0_REG,\n\tSUN50I_H616_PLL_DDR1_REG,\n\tSUN50I_H616_PLL_PERIPH0_REG,\n\tSUN50I_H616_PLL_PERIPH1_REG,\n\tSUN50I_H616_PLL_GPU_REG,\n\tSUN50I_H616_PLL_VIDEO0_REG,\n\tSUN50I_H616_PLL_VIDEO1_REG,\n\tSUN50I_H616_PLL_VIDEO2_REG,\n\tSUN50I_H616_PLL_VE_REG,\n\tSUN50I_H616_PLL_DE_REG,\n\tSUN50I_H616_PLL_AUDIO_REG,\n};\n\nstatic const u32 pll_video_regs[] = {\n\tSUN50I_H616_PLL_VIDEO0_REG,\n\tSUN50I_H616_PLL_VIDEO1_REG,\n\tSUN50I_H616_PLL_VIDEO2_REG,\n};\n\nstatic const u32 usb2_clk_regs[] = {\n\tSUN50I_H616_USB0_CLK_REG,\n\tSUN50I_H616_USB1_CLK_REG,\n\tSUN50I_H616_USB2_CLK_REG,\n\tSUN50I_H616_USB3_CLK_REG,\n};\n\nstatic int sun50i_h616_ccu_probe(struct platform_device *pdev)\n{\n\tvoid __iomem *reg;\n\tu32 val;\n\tint i;\n\n\treg = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(reg))\n\t\treturn PTR_ERR(reg);\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(pll_regs); i++) {\n\t\tval = readl(reg + pll_regs[i]);\n\t\tval |= BIT(29) | BIT(27);\n\t\twritel(val, reg + pll_regs[i]);\n\t}\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(pll_video_regs); i++) {\n\t\tval = readl(reg + pll_video_regs[i]);\n\t\tval &= ~BIT(0);\n\t\twritel(val, reg + pll_video_regs[i]);\n\t}\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(usb2_clk_regs); i++) {\n\t\tval = readl(reg + usb2_clk_regs[i]);\n\t\tval &= ~GENMASK(25, 24);\n\t\twritel(val, reg + usb2_clk_regs[i]);\n\t}\n\n\t \n\tval = readl(reg + SUN50I_H616_PLL_AUDIO_REG);\n\tval &= ~(GENMASK(21, 16) | BIT(0));\n\twritel(val | (11 << 16) | BIT(0), reg + SUN50I_H616_PLL_AUDIO_REG);\n\n\t \n\tval = readl(reg + SUN50I_H616_HDMI_CEC_CLK_REG);\n\tval |= BIT(24);\n\twritel(val, reg + SUN50I_H616_HDMI_CEC_CLK_REG);\n\n\treturn devm_sunxi_ccu_probe(&pdev->dev, reg, &sun50i_h616_ccu_desc);\n}\n\nstatic const struct of_device_id sun50i_h616_ccu_ids[] = {\n\t{ .compatible = \"allwinner,sun50i-h616-ccu\" },\n\t{ }\n};\n\nstatic struct platform_driver sun50i_h616_ccu_driver = {\n\t.probe\t= sun50i_h616_ccu_probe,\n\t.driver\t= {\n\t\t.name\t\t\t= \"sun50i-h616-ccu\",\n\t\t.suppress_bind_attrs\t= true,\n\t\t.of_match_table\t\t= sun50i_h616_ccu_ids,\n\t},\n};\nmodule_platform_driver(sun50i_h616_ccu_driver);\n\nMODULE_IMPORT_NS(SUNXI_CCU);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}