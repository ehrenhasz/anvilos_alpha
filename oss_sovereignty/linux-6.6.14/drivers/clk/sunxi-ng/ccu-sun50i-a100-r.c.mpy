{
  "module_name": "ccu-sun50i-a100-r.c",
  "hash_id": "3715259e58531ef0341fc82004ae9b5acb44ca8946663ed70122715a2ace4fbc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/sunxi-ng/ccu-sun50i-a100-r.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n\n#include \"ccu_common.h\"\n#include \"ccu_reset.h\"\n\n#include \"ccu_div.h\"\n#include \"ccu_gate.h\"\n#include \"ccu_mp.h\"\n#include \"ccu_nm.h\"\n\n#include \"ccu-sun50i-a100-r.h\"\n\nstatic const char * const cpus_r_apb2_parents[] = { \"dcxo24M\", \"osc32k\",\n\t\t\t\t\t\t     \"iosc\", \"pll-periph0\" };\nstatic const struct ccu_mux_var_prediv cpus_r_apb2_predivs[] = {\n\t{ .index = 3, .shift = 0, .width = 5 },\n};\n\nstatic struct ccu_div r_cpus_clk = {\n\t.div\t\t= _SUNXI_CCU_DIV_FLAGS(8, 2, CLK_DIVIDER_POWER_OF_TWO),\n\n\t.mux\t\t= {\n\t\t.shift\t= 24,\n\t\t.width\t= 2,\n\n\t\t.var_predivs\t= cpus_r_apb2_predivs,\n\t\t.n_var_predivs\t= ARRAY_SIZE(cpus_r_apb2_predivs),\n\t},\n\n\t.common\t\t= {\n\t\t.reg\t\t= 0x000,\n\t\t.features\t= CCU_FEATURE_VARIABLE_PREDIV,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"cpus\",\n\t\t\t\t\t\t      cpus_r_apb2_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic CLK_FIXED_FACTOR_HW(r_ahb_clk, \"r-ahb\", &r_cpus_clk.common.hw, 1, 1, 0);\n\nstatic struct ccu_div r_apb1_clk = {\n\t.div\t\t= _SUNXI_CCU_DIV(0, 2),\n\n\t.common\t\t= {\n\t\t.reg\t\t= 0x00c,\n\t\t.hw.init\t= CLK_HW_INIT(\"r-apb1\",\n\t\t\t\t\t      \"r-ahb\",\n\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t      0),\n\t},\n};\n\nstatic struct ccu_div r_apb2_clk = {\n\t.div\t\t= _SUNXI_CCU_DIV_FLAGS(8, 2, CLK_DIVIDER_POWER_OF_TWO),\n\n\t.mux\t\t= {\n\t\t.shift\t= 24,\n\t\t.width\t= 2,\n\n\t\t.var_predivs\t= cpus_r_apb2_predivs,\n\t\t.n_var_predivs\t= ARRAY_SIZE(cpus_r_apb2_predivs),\n\t},\n\n\t.common\t\t= {\n\t\t.reg\t\t= 0x010,\n\t\t.features\t= CCU_FEATURE_VARIABLE_PREDIV,\n\t\t.hw.init\t= CLK_HW_INIT_PARENTS(\"r-apb2\",\n\t\t\t\t\t\t      cpus_r_apb2_parents,\n\t\t\t\t\t\t      &ccu_div_ops,\n\t\t\t\t\t\t      0),\n\t},\n};\n\nstatic const struct clk_parent_data clk_parent_r_apb1[] = {\n\t{ .hw = &r_apb1_clk.common.hw },\n};\n\nstatic const struct clk_parent_data clk_parent_r_apb2[] = {\n\t{ .hw = &r_apb2_clk.common.hw },\n};\n\nstatic SUNXI_CCU_GATE_DATA(r_apb1_timer_clk, \"r-apb1-timer\", clk_parent_r_apb1,\n\t\t\t   0x11c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb1_twd_clk, \"r-apb1-twd\", clk_parent_r_apb1,\n\t\t\t   0x12c, BIT(0), 0);\n\nstatic const char * const r_apb1_pwm_clk_parents[] = { \"dcxo24M\", \"osc32k\",\n\t\t\t\t\t\t       \"iosc\" };\nstatic SUNXI_CCU_MUX(r_apb1_pwm_clk, \"r-apb1-pwm\", r_apb1_pwm_clk_parents,\n\t\t     0x130, 24, 2, 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb1_bus_pwm_clk, \"r-apb1-bus-pwm\",\n\t\t\t   clk_parent_r_apb1, 0x13c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb1_ppu_clk, \"r-apb1-ppu\", clk_parent_r_apb1,\n\t\t\t   0x17c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb2_uart_clk, \"r-apb2-uart\", clk_parent_r_apb2,\n\t\t\t   0x18c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb2_i2c0_clk, \"r-apb2-i2c0\", clk_parent_r_apb2,\n\t\t\t   0x19c, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb2_i2c1_clk, \"r-apb2-i2c1\", clk_parent_r_apb2,\n\t\t\t   0x19c, BIT(1), 0);\n\nstatic const char * const r_apb1_ir_rx_parents[] = { \"osc32k\", \"dcxo24M\" };\nstatic SUNXI_CCU_MP_WITH_MUX_GATE(r_apb1_ir_rx_clk, \"r-apb1-ir-rx\",\n\t\t\t\t  r_apb1_ir_rx_parents, 0x1c0,\n\t\t\t\t  0, 5,\t\t \n\t\t\t\t  8, 2,\t\t \n\t\t\t\t  24, 1,\t \n\t\t\t\t  BIT(31),\t \n\t\t\t\t  0);\n\nstatic SUNXI_CCU_GATE_DATA(r_apb1_bus_ir_rx_clk, \"r-apb1-bus-ir-rx\",\n\t\t\t   clk_parent_r_apb1, 0x1cc, BIT(0), 0);\n\nstatic SUNXI_CCU_GATE(r_ahb_bus_rtc_clk, \"r-ahb-rtc\", \"r-ahb\",\n\t\t      0x20c, BIT(0), 0);\n\nstatic struct ccu_common *sun50i_a100_r_ccu_clks[] = {\n\t&r_cpus_clk.common,\n\t&r_apb1_clk.common,\n\t&r_apb2_clk.common,\n\t&r_apb1_timer_clk.common,\n\t&r_apb1_twd_clk.common,\n\t&r_apb1_pwm_clk.common,\n\t&r_apb1_bus_pwm_clk.common,\n\t&r_apb1_ppu_clk.common,\n\t&r_apb2_uart_clk.common,\n\t&r_apb2_i2c0_clk.common,\n\t&r_apb2_i2c1_clk.common,\n\t&r_apb1_ir_rx_clk.common,\n\t&r_apb1_bus_ir_rx_clk.common,\n\t&r_ahb_bus_rtc_clk.common,\n};\n\nstatic struct clk_hw_onecell_data sun50i_a100_r_hw_clks = {\n\t.hws\t= {\n\t\t[CLK_R_CPUS]\t\t= &r_cpus_clk.common.hw,\n\t\t[CLK_R_AHB]\t\t= &r_ahb_clk.hw,\n\t\t[CLK_R_APB1]\t\t= &r_apb1_clk.common.hw,\n\t\t[CLK_R_APB2]\t\t= &r_apb2_clk.common.hw,\n\t\t[CLK_R_APB1_TIMER]\t= &r_apb1_timer_clk.common.hw,\n\t\t[CLK_R_APB1_TWD]\t= &r_apb1_twd_clk.common.hw,\n\t\t[CLK_R_APB1_PWM]\t= &r_apb1_pwm_clk.common.hw,\n\t\t[CLK_R_APB1_BUS_PWM]\t= &r_apb1_bus_pwm_clk.common.hw,\n\t\t[CLK_R_APB1_PPU]\t= &r_apb1_ppu_clk.common.hw,\n\t\t[CLK_R_APB2_UART]\t= &r_apb2_uart_clk.common.hw,\n\t\t[CLK_R_APB2_I2C0]\t= &r_apb2_i2c0_clk.common.hw,\n\t\t[CLK_R_APB2_I2C1]\t= &r_apb2_i2c1_clk.common.hw,\n\t\t[CLK_R_APB1_IR]\t\t= &r_apb1_ir_rx_clk.common.hw,\n\t\t[CLK_R_APB1_BUS_IR]\t= &r_apb1_bus_ir_rx_clk.common.hw,\n\t\t[CLK_R_AHB_BUS_RTC]\t= &r_ahb_bus_rtc_clk.common.hw,\n\t},\n\t.num\t= CLK_NUMBER,\n};\n\nstatic struct ccu_reset_map sun50i_a100_r_ccu_resets[] = {\n\t[RST_R_APB1_TIMER]\t=  { 0x11c, BIT(16) },\n\t[RST_R_APB1_BUS_PWM]\t=  { 0x13c, BIT(16) },\n\t[RST_R_APB1_PPU]\t=  { 0x17c, BIT(16) },\n\t[RST_R_APB2_UART]\t=  { 0x18c, BIT(16) },\n\t[RST_R_APB2_I2C0]\t=  { 0x19c, BIT(16) },\n\t[RST_R_APB2_I2C1]\t=  { 0x19c, BIT(17) },\n\t[RST_R_APB1_BUS_IR]\t=  { 0x1cc, BIT(16) },\n\t[RST_R_AHB_BUS_RTC]\t=  { 0x20c, BIT(16) },\n};\n\nstatic const struct sunxi_ccu_desc sun50i_a100_r_ccu_desc = {\n\t.ccu_clks\t= sun50i_a100_r_ccu_clks,\n\t.num_ccu_clks\t= ARRAY_SIZE(sun50i_a100_r_ccu_clks),\n\n\t.hw_clks\t= &sun50i_a100_r_hw_clks,\n\n\t.resets\t\t= sun50i_a100_r_ccu_resets,\n\t.num_resets\t= ARRAY_SIZE(sun50i_a100_r_ccu_resets),\n};\n\nstatic int sun50i_a100_r_ccu_probe(struct platform_device *pdev)\n{\n\tvoid __iomem *reg;\n\n\treg = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(reg))\n\t\treturn PTR_ERR(reg);\n\n\treturn devm_sunxi_ccu_probe(&pdev->dev, reg, &sun50i_a100_r_ccu_desc);\n}\n\nstatic const struct of_device_id sun50i_a100_r_ccu_ids[] = {\n\t{ .compatible = \"allwinner,sun50i-a100-r-ccu\" },\n\t{ }\n};\n\nstatic struct platform_driver sun50i_a100_r_ccu_driver = {\n\t.probe\t= sun50i_a100_r_ccu_probe,\n\t.driver\t= {\n\t\t.name\t= \"sun50i-a100-r-ccu\",\n\t\t.suppress_bind_attrs = true,\n\t\t.of_match_table\t= sun50i_a100_r_ccu_ids,\n\t},\n};\nmodule_platform_driver(sun50i_a100_r_ccu_driver);\n\nMODULE_IMPORT_NS(SUNXI_CCU);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}