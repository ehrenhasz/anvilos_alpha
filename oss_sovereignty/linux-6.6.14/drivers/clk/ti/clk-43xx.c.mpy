{
  "module_name": "clk-43xx.c",
  "hash_id": "f8e35fafd93aca14f09b55b19635e942787ad854636689f3730ac6627bfeebb9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/ti/clk-43xx.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/list.h>\n#include <linux/clk.h>\n#include <linux/clk-provider.h>\n#include <linux/clk/ti.h>\n#include <dt-bindings/clock/am4.h>\n\n#include \"clock.h\"\n\nstatic const struct omap_clkctrl_reg_data am4_l3s_tsc_clkctrl_regs[] __initconst = {\n\t{ AM4_L3S_TSC_ADC_TSC_CLKCTRL, NULL, CLKF_SW_SUP, \"adc_tsc_fck\" },\n\t{ 0 },\n};\n\nstatic const char * const am4_synctimer_32kclk_parents[] __initconst = {\n\t\"mux_synctimer32k_ck\",\n\tNULL,\n};\n\nstatic const struct omap_clkctrl_bit_data am4_counter_32k_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_synctimer_32kclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l4_wkup_aon_clkctrl_regs[] __initconst = {\n\t{ AM4_L4_WKUP_AON_WKUP_M3_CLKCTRL, NULL, CLKF_SW_SUP | CLKF_NO_IDLEST, \"sys_clkin_ck\" },\n\t{ AM4_L4_WKUP_AON_COUNTER_32K_CLKCTRL, am4_counter_32k_bit_data, CLKF_SW_SUP, \"l4-wkup-aon-clkctrl:0008:8\" },\n\t{ 0 },\n};\n\nstatic const char * const am4_gpio0_dbclk_parents[] __initconst = {\n\t\"gpio0_dbclk_mux_ck\",\n\tNULL,\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio1_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio0_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l4_wkup_clkctrl_regs[] __initconst = {\n\t{ AM4_L4_WKUP_L4_WKUP_CLKCTRL, NULL, CLKF_SW_SUP, \"sys_clkin_ck\" },\n\t{ AM4_L4_WKUP_TIMER1_CLKCTRL, NULL, CLKF_SW_SUP, \"timer1_fck\" },\n\t{ AM4_L4_WKUP_WD_TIMER2_CLKCTRL, NULL, CLKF_SW_SUP, \"wdt1_fck\" },\n\t{ AM4_L4_WKUP_I2C1_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_wkupdm_ck\" },\n\t{ AM4_L4_WKUP_UART1_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_wkupdm_ck\" },\n\t{ AM4_L4_WKUP_SMARTREFLEX0_CLKCTRL, NULL, CLKF_SW_SUP, \"smartreflex0_fck\" },\n\t{ AM4_L4_WKUP_SMARTREFLEX1_CLKCTRL, NULL, CLKF_SW_SUP, \"smartreflex1_fck\" },\n\t{ AM4_L4_WKUP_CONTROL_CLKCTRL, NULL, CLKF_SW_SUP, \"sys_clkin_ck\" },\n\t{ AM4_L4_WKUP_GPIO1_CLKCTRL, am4_gpio1_bit_data, CLKF_SW_SUP, \"sys_clkin_ck\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_mpu_clkctrl_regs[] __initconst = {\n\t{ AM4_MPU_MPU_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_mpu_m2_ck\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_gfx_l3_clkctrl_regs[] __initconst = {\n\t{ AM4_GFX_L3_GFX_CLKCTRL, NULL, CLKF_SW_SUP | CLKF_NO_IDLEST, \"gfx_fck_div_ck\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l4_rtc_clkctrl_regs[] __initconst = {\n\t{ AM4_L4_RTC_RTC_CLKCTRL, NULL, CLKF_SW_SUP, \"clkdiv32k_ick\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l3_clkctrl_regs[] __initconst = {\n\t{ AM4_L3_L3_MAIN_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_AES_CLKCTRL, NULL, CLKF_SW_SUP, \"aes0_fck\" },\n\t{ AM4_L3_DES_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_L3_INSTR_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_OCMCRAM_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_SHAM_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_TPCC_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_TPTC0_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_TPTC1_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_TPTC2_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3_L4_HS_CLKCTRL, NULL, CLKF_SW_SUP, \"l4hs_gclk\" },\n\t{ 0 },\n};\n\nstatic const char * const am4_usb_otg_ss0_refclk960m_parents[] __initconst = {\n\t\"dpll_per_clkdcoldo\",\n\tNULL,\n};\n\nstatic const struct omap_clkctrl_bit_data am4_usb_otg_ss0_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_usb_otg_ss0_refclk960m_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_bit_data am4_usb_otg_ss1_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_usb_otg_ss0_refclk960m_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l3s_clkctrl_regs[] __initconst = {\n\t{ AM4_L3S_VPFE0_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3S_VPFE1_CLKCTRL, NULL, CLKF_SW_SUP, \"l3_gclk\" },\n\t{ AM4_L3S_GPMC_CLKCTRL, NULL, CLKF_SW_SUP, \"l3s_gclk\" },\n\t{ AM4_L3S_ADC1_CLKCTRL, NULL, CLKF_SW_SUP, \"l3s_gclk\" },\n\t{ AM4_L3S_MCASP0_CLKCTRL, NULL, CLKF_SW_SUP, \"mcasp0_fck\" },\n\t{ AM4_L3S_MCASP1_CLKCTRL, NULL, CLKF_SW_SUP, \"mcasp1_fck\" },\n\t{ AM4_L3S_MMC3_CLKCTRL, NULL, CLKF_SW_SUP, \"mmc_clk\" },\n\t{ AM4_L3S_QSPI_CLKCTRL, NULL, CLKF_SW_SUP, \"l3s_gclk\" },\n\t{ AM4_L3S_USB_OTG_SS0_CLKCTRL, am4_usb_otg_ss0_bit_data, CLKF_SW_SUP, \"l3s_gclk\" },\n\t{ AM4_L3S_USB_OTG_SS1_CLKCTRL, am4_usb_otg_ss1_bit_data, CLKF_SW_SUP, \"l3s_gclk\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_pruss_ocp_clkctrl_regs[] __initconst = {\n\t{ AM4_PRUSS_OCP_PRUSS_CLKCTRL, NULL, CLKF_SW_SUP | CLKF_NO_IDLEST, \"pruss_ocp_gclk\" },\n\t{ 0 },\n};\n\nstatic const char * const am4_gpio1_dbclk_parents[] __initconst = {\n\t\"clkdiv32k_ick\",\n\tNULL,\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio2_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio1_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio3_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio1_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio4_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio1_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio5_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio1_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_bit_data am4_gpio6_bit_data[] __initconst = {\n\t{ 8, TI_CLK_GATE, am4_gpio1_dbclk_parents, NULL },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_l4ls_clkctrl_regs[] __initconst = {\n\t{ AM4_L4LS_L4_LS_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_D_CAN0_CLKCTRL, NULL, CLKF_SW_SUP, \"dcan0_fck\" },\n\t{ AM4_L4LS_D_CAN1_CLKCTRL, NULL, CLKF_SW_SUP, \"dcan1_fck\" },\n\t{ AM4_L4LS_EPWMSS0_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_EPWMSS1_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_EPWMSS2_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_EPWMSS3_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_EPWMSS4_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_EPWMSS5_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_ELM_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_GPIO2_CLKCTRL, am4_gpio2_bit_data, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_GPIO3_CLKCTRL, am4_gpio3_bit_data, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_GPIO4_CLKCTRL, am4_gpio4_bit_data, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_GPIO5_CLKCTRL, am4_gpio5_bit_data, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_GPIO6_CLKCTRL, am4_gpio6_bit_data, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_HDQ1W_CLKCTRL, NULL, CLKF_SW_SUP, \"func_12m_clk\" },\n\t{ AM4_L4LS_I2C2_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_I2C3_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_MAILBOX_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_MMC1_CLKCTRL, NULL, CLKF_SW_SUP, \"mmc_clk\" },\n\t{ AM4_L4LS_MMC2_CLKCTRL, NULL, CLKF_SW_SUP, \"mmc_clk\" },\n\t{ AM4_L4LS_RNG_CLKCTRL, NULL, CLKF_SW_SUP, \"rng_fck\" },\n\t{ AM4_L4LS_SPI0_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_SPI1_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_SPI2_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_SPI3_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_SPI4_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_SPINLOCK_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_TIMER2_CLKCTRL, NULL, CLKF_SW_SUP, \"timer2_fck\" },\n\t{ AM4_L4LS_TIMER3_CLKCTRL, NULL, CLKF_SW_SUP, \"timer3_fck\" },\n\t{ AM4_L4LS_TIMER4_CLKCTRL, NULL, CLKF_SW_SUP, \"timer4_fck\" },\n\t{ AM4_L4LS_TIMER5_CLKCTRL, NULL, CLKF_SW_SUP, \"timer5_fck\" },\n\t{ AM4_L4LS_TIMER6_CLKCTRL, NULL, CLKF_SW_SUP, \"timer6_fck\" },\n\t{ AM4_L4LS_TIMER7_CLKCTRL, NULL, CLKF_SW_SUP, \"timer7_fck\" },\n\t{ AM4_L4LS_TIMER8_CLKCTRL, NULL, CLKF_SW_SUP, \"timer8_fck\" },\n\t{ AM4_L4LS_TIMER9_CLKCTRL, NULL, CLKF_SW_SUP, \"timer9_fck\" },\n\t{ AM4_L4LS_TIMER10_CLKCTRL, NULL, CLKF_SW_SUP, \"timer10_fck\" },\n\t{ AM4_L4LS_TIMER11_CLKCTRL, NULL, CLKF_SW_SUP, \"timer11_fck\" },\n\t{ AM4_L4LS_UART2_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_UART3_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_UART4_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_UART5_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_UART6_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_per_m2_div4_ck\" },\n\t{ AM4_L4LS_OCP2SCP0_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ AM4_L4LS_OCP2SCP1_CLKCTRL, NULL, CLKF_SW_SUP, \"l4ls_gclk\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_emif_clkctrl_regs[] __initconst = {\n\t{ AM4_EMIF_EMIF_CLKCTRL, NULL, CLKF_SW_SUP, \"dpll_ddr_m2_ck\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_dss_clkctrl_regs[] __initconst = {\n\t{ AM4_DSS_DSS_CORE_CLKCTRL, NULL, CLKF_SW_SUP | CLKF_SET_RATE_PARENT, \"disp_clk\" },\n\t{ 0 },\n};\n\nstatic const struct omap_clkctrl_reg_data am4_cpsw_125mhz_clkctrl_regs[] __initconst = {\n\t{ AM4_CPSW_125MHZ_CPGMAC0_CLKCTRL, NULL, CLKF_SW_SUP, \"cpsw_125mhz_gclk\" },\n\t{ 0 },\n};\n\nconst struct omap_clkctrl_data am4_clkctrl_data[] __initconst = {\n\t{ 0x44df2920, am4_l3s_tsc_clkctrl_regs },\n\t{ 0x44df2a28, am4_l4_wkup_aon_clkctrl_regs },\n\t{ 0x44df2a20, am4_l4_wkup_clkctrl_regs },\n\t{ 0x44df8320, am4_mpu_clkctrl_regs },\n\t{ 0x44df8420, am4_gfx_l3_clkctrl_regs },\n\t{ 0x44df8520, am4_l4_rtc_clkctrl_regs },\n\t{ 0x44df8820, am4_l3_clkctrl_regs },\n\t{ 0x44df8868, am4_l3s_clkctrl_regs },\n\t{ 0x44df8b20, am4_pruss_ocp_clkctrl_regs },\n\t{ 0x44df8c20, am4_l4ls_clkctrl_regs },\n\t{ 0x44df8f20, am4_emif_clkctrl_regs },\n\t{ 0x44df9220, am4_dss_clkctrl_regs },\n\t{ 0x44df9320, am4_cpsw_125mhz_clkctrl_regs },\n\t{ 0 },\n};\n\nconst struct omap_clkctrl_data am438x_clkctrl_data[] __initconst = {\n\t{ 0x44df2920, am4_l3s_tsc_clkctrl_regs },\n\t{ 0x44df2a28, am4_l4_wkup_aon_clkctrl_regs },\n\t{ 0x44df2a20, am4_l4_wkup_clkctrl_regs },\n\t{ 0x44df8320, am4_mpu_clkctrl_regs },\n\t{ 0x44df8420, am4_gfx_l3_clkctrl_regs },\n\t{ 0x44df8820, am4_l3_clkctrl_regs },\n\t{ 0x44df8868, am4_l3s_clkctrl_regs },\n\t{ 0x44df8b20, am4_pruss_ocp_clkctrl_regs },\n\t{ 0x44df8c20, am4_l4ls_clkctrl_regs },\n\t{ 0x44df8f20, am4_emif_clkctrl_regs },\n\t{ 0x44df9220, am4_dss_clkctrl_regs },\n\t{ 0x44df9320, am4_cpsw_125mhz_clkctrl_regs },\n\t{ 0 },\n};\n\nstatic struct ti_dt_clk am43xx_clks[] = {\n\tDT_CLK(NULL, \"timer_32k_ck\", \"clkdiv32k_ick\"),\n\tDT_CLK(NULL, \"timer_sys_ck\", \"sys_clkin_ck\"),\n\tDT_CLK(NULL, \"gpio0_dbclk\", \"l4-wkup-clkctrl:0148:8\"),\n\tDT_CLK(NULL, \"gpio1_dbclk\", \"l4ls-clkctrl:0058:8\"),\n\tDT_CLK(NULL, \"gpio2_dbclk\", \"l4ls-clkctrl:0060:8\"),\n\tDT_CLK(NULL, \"gpio3_dbclk\", \"l4ls-clkctrl:0068:8\"),\n\tDT_CLK(NULL, \"gpio4_dbclk\", \"l4ls-clkctrl:0070:8\"),\n\tDT_CLK(NULL, \"gpio5_dbclk\", \"l4ls-clkctrl:0078:8\"),\n\tDT_CLK(NULL, \"synctimer_32kclk\", \"l4-wkup-aon-clkctrl:0008:8\"),\n\tDT_CLK(NULL, \"usb_otg_ss0_refclk960m\", \"l3s-clkctrl:01f8:8\"),\n\tDT_CLK(NULL, \"usb_otg_ss1_refclk960m\", \"l3s-clkctrl:0200:8\"),\n\t{ .node_name = NULL },\n};\n\nstatic const char *enable_init_clks[] = {\n\t \n\t\"l3-clkctrl:0000:0\",\n};\n\nint __init am43xx_dt_clk_init(void)\n{\n\tstruct clk *clk1, *clk2;\n\n\tti_dt_clocks_register(am43xx_clks);\n\n\tomap2_clk_disable_autoidle_all();\n\n\tomap2_clk_enable_init_clocks(enable_init_clks,\n\t\t\t\t     ARRAY_SIZE(enable_init_clks));\n\n\tti_clk_add_aliases();\n\n\t \n\tclk1 = clk_get_sys(NULL, \"cpsw_cpts_rft_clk\");\n\tclk2 = clk_get_sys(NULL, \"dpll_core_m5_ck\");\n\tclk_set_parent(clk1, clk2);\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}