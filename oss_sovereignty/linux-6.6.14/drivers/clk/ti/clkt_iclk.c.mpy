{
  "module_name": "clkt_iclk.c",
  "hash_id": "55763746e47bfc9f6fde8b48d887cd0415cdc6459e883dc4513478553d2a4ec3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/ti/clkt_iclk.c",
  "human_readable_source": "\n \n#undef DEBUG\n\n#include <linux/kernel.h>\n#include <linux/clk-provider.h>\n#include <linux/io.h>\n#include <linux/clk/ti.h>\n\n#include \"clock.h\"\n\n \n#define OMAP24XX_CM_FCLKEN2\t\t0x04\n#define CM_AUTOIDLE\t\t\t0x30\n#define CM_ICLKEN\t\t\t0x10\n#define CM_IDLEST\t\t\t0x20\n\n#define OMAP24XX_CM_IDLEST_VAL\t\t0\n\n \n\n \nvoid omap2_clkt_iclk_allow_idle(struct clk_hw_omap *clk)\n{\n\tu32 v;\n\tstruct clk_omap_reg r;\n\n\tmemcpy(&r, &clk->enable_reg, sizeof(r));\n\tr.offset ^= (CM_AUTOIDLE ^ CM_ICLKEN);\n\n\tv = ti_clk_ll_ops->clk_readl(&r);\n\tv |= (1 << clk->enable_bit);\n\tti_clk_ll_ops->clk_writel(v, &r);\n}\n\n \nvoid omap2_clkt_iclk_deny_idle(struct clk_hw_omap *clk)\n{\n\tu32 v;\n\tstruct clk_omap_reg r;\n\n\tmemcpy(&r, &clk->enable_reg, sizeof(r));\n\n\tr.offset ^= (CM_AUTOIDLE ^ CM_ICLKEN);\n\n\tv = ti_clk_ll_ops->clk_readl(&r);\n\tv &= ~(1 << clk->enable_bit);\n\tti_clk_ll_ops->clk_writel(v, &r);\n}\n\n \nstatic void omap2430_clk_i2chs_find_idlest(struct clk_hw_omap *clk,\n\t\t\t\t\t   struct clk_omap_reg *idlest_reg,\n\t\t\t\t\t   u8 *idlest_bit,\n\t\t\t\t\t   u8 *idlest_val)\n{\n\tmemcpy(idlest_reg, &clk->enable_reg, sizeof(*idlest_reg));\n\tidlest_reg->offset ^= (OMAP24XX_CM_FCLKEN2 ^ CM_IDLEST);\n\t*idlest_bit = clk->enable_bit;\n\t*idlest_val = OMAP24XX_CM_IDLEST_VAL;\n}\n\n \n\nconst struct clk_hw_omap_ops clkhwops_iclk = {\n\t.allow_idle\t= omap2_clkt_iclk_allow_idle,\n\t.deny_idle\t= omap2_clkt_iclk_deny_idle,\n};\n\nconst struct clk_hw_omap_ops clkhwops_iclk_wait = {\n\t.allow_idle\t= omap2_clkt_iclk_allow_idle,\n\t.deny_idle\t= omap2_clkt_iclk_deny_idle,\n\t.find_idlest\t= omap2_clk_dflt_find_idlest,\n\t.find_companion\t= omap2_clk_dflt_find_companion,\n};\n\n \nconst struct clk_hw_omap_ops clkhwops_omap2430_i2chs_wait = {\n\t.find_idlest\t= omap2430_clk_i2chs_find_idlest,\n\t.find_companion\t= omap2_clk_dflt_find_companion,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}