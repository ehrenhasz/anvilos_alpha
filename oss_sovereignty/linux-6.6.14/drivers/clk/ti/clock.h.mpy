{
  "module_name": "clock.h",
  "hash_id": "b48d90794c20407a4e53b17946d0b62160410b99bf58c8ea8459b84a07ce0c50",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/ti/clock.h",
  "human_readable_source": " \n \n#ifndef __DRIVERS_CLK_TI_CLOCK__\n#define __DRIVERS_CLK_TI_CLOCK__\n\nstruct clk_omap_divider {\n\tstruct clk_hw\t\thw;\n\tstruct clk_omap_reg\treg;\n\tu8\t\t\tshift;\n\tu8\t\t\tflags;\n\ts8\t\t\tlatch;\n\tu16\t\t\tmin;\n\tu16\t\t\tmax;\n\tu16\t\t\tmask;\n\tconst struct clk_div_table\t*table;\n\tu32\t\tcontext;\n};\n\n#define to_clk_omap_divider(_hw) container_of(_hw, struct clk_omap_divider, hw)\n\nstruct clk_omap_mux {\n\tstruct clk_hw\t\thw;\n\tstruct clk_omap_reg\treg;\n\tu32\t\t\t*table;\n\tu32\t\t\tmask;\n\tu8\t\t\tshift;\n\ts8\t\t\tlatch;\n\tu8\t\t\tflags;\n\tu8\t\t\tsaved_parent;\n};\n\n#define to_clk_omap_mux(_hw) container_of(_hw, struct clk_omap_mux, hw)\n\nenum {\n\tTI_CLK_FIXED,\n\tTI_CLK_MUX,\n\tTI_CLK_DIVIDER,\n\tTI_CLK_COMPOSITE,\n\tTI_CLK_FIXED_FACTOR,\n\tTI_CLK_GATE,\n\tTI_CLK_DPLL,\n};\n\n \n#define CLKF_INDEX_POWER_OF_TWO\t\t(1 << 0)\n#define CLKF_INDEX_STARTS_AT_ONE\t(1 << 1)\n#define CLKF_SET_RATE_PARENT\t\t(1 << 2)\n#define CLKF_OMAP3\t\t\t(1 << 3)\n#define CLKF_AM35XX\t\t\t(1 << 4)\n\n \n#define CLKF_SET_BIT_TO_DISABLE\t\t(1 << 5)\n#define CLKF_INTERFACE\t\t\t(1 << 6)\n#define CLKF_SSI\t\t\t(1 << 7)\n#define CLKF_DSS\t\t\t(1 << 8)\n#define CLKF_HSOTGUSB\t\t\t(1 << 9)\n#define CLKF_WAIT\t\t\t(1 << 10)\n#define CLKF_NO_WAIT\t\t\t(1 << 11)\n#define CLKF_HSDIV\t\t\t(1 << 12)\n#define CLKF_CLKDM\t\t\t(1 << 13)\n\n \n#define CLKF_LOW_POWER_STOP\t\t(1 << 5)\n#define CLKF_LOCK\t\t\t(1 << 6)\n#define CLKF_LOW_POWER_BYPASS\t\t(1 << 7)\n#define CLKF_PER\t\t\t(1 << 8)\n#define CLKF_CORE\t\t\t(1 << 9)\n#define CLKF_J_TYPE\t\t\t(1 << 10)\n\n \n#define CLKF_SW_SUP\t\t\tBIT(5)\n#define CLKF_HW_SUP\t\t\tBIT(6)\n#define CLKF_NO_IDLEST\t\t\tBIT(7)\n\n#define CLKF_SOC_MASK\t\t\tGENMASK(11, 8)\n\n#define CLKF_SOC_NONSEC\t\t\tBIT(8)\n#define CLKF_SOC_DRA72\t\t\tBIT(9)\n#define CLKF_SOC_DRA74\t\t\tBIT(10)\n#define CLKF_SOC_DRA76\t\t\tBIT(11)\n\n#define CLK(dev, con, ck)\t\t\\\n\t{\t\t\t\t\\\n\t\t.lk = {\t\t\t\\\n\t\t\t.dev_id = dev,\t\\\n\t\t\t.con_id = con,\t\\\n\t\t},\t\t\t\\\n\t\t.clk = ck,\t\t\\\n\t}\n\nstruct ti_clk {\n\tconst char *name;\n\tconst char *clkdm_name;\n\tint type;\n\tvoid *data;\n\tstruct ti_clk *patch;\n\tstruct clk *clk;\n};\n\nstruct ti_clk_mux {\n\tu8 bit_shift;\n\tint num_parents;\n\tu16 reg;\n\tu8 module;\n\tconst char * const *parents;\n\tu16 flags;\n};\n\nstruct ti_clk_divider {\n\tconst char *parent;\n\tu8 bit_shift;\n\tu16 max_div;\n\tu16 reg;\n\tu8 module;\n\tint *dividers;\n\tint num_dividers;\n\tu16 flags;\n};\n\nstruct ti_clk_gate {\n\tconst char *parent;\n\tu8 bit_shift;\n\tu16 reg;\n\tu8 module;\n\tu16 flags;\n};\n\n \nenum {\n\tCLK_COMPONENT_TYPE_GATE = 0,\n\tCLK_COMPONENT_TYPE_DIVIDER,\n\tCLK_COMPONENT_TYPE_MUX,\n\tCLK_COMPONENT_TYPE_MAX,\n};\n\n \nstruct ti_dt_clk {\n\tstruct clk_lookup\t\tlk;\n\tchar\t\t\t\t*node_name;\n};\n\n#define DT_CLK(dev, con, name)\t\t\\\n\t{\t\t\t\t\\\n\t\t.lk = {\t\t\t\\\n\t\t\t.dev_id = dev,\t\\\n\t\t\t.con_id = con,\t\\\n\t\t},\t\t\t\\\n\t\t.node_name = name,\t\\\n\t}\n\n \nstruct omap_clkctrl_div_data {\n\tconst int *dividers;\n\tint max_div;\n\tu32 flags;\n};\n\nstruct omap_clkctrl_bit_data {\n\tu8 bit;\n\tu8 type;\n\tconst char * const *parents;\n\tconst void *data;\n};\n\nstruct omap_clkctrl_reg_data {\n\tu16 offset;\n\tconst struct omap_clkctrl_bit_data *bit_data;\n\tu16 flags;\n\tconst char *parent;\n\tconst char *clkdm_name;\n};\n\nstruct omap_clkctrl_data {\n\tu32 addr;\n\tconst struct omap_clkctrl_reg_data *regs;\n};\n\nextern const struct omap_clkctrl_data omap4_clkctrl_data[];\nextern const struct omap_clkctrl_data omap5_clkctrl_data[];\nextern const struct omap_clkctrl_data dra7_clkctrl_data[];\nextern const struct omap_clkctrl_data dra7_clkctrl_compat_data[];\nextern struct ti_dt_clk dra7xx_compat_clks[];\nextern const struct omap_clkctrl_data am3_clkctrl_data[];\nextern const struct omap_clkctrl_data am3_clkctrl_compat_data[];\nextern struct ti_dt_clk am33xx_compat_clks[];\nextern const struct omap_clkctrl_data am4_clkctrl_data[];\nextern const struct omap_clkctrl_data am438x_clkctrl_data[];\nextern const struct omap_clkctrl_data dm814_clkctrl_data[];\nextern const struct omap_clkctrl_data dm816_clkctrl_data[];\n\ntypedef void (*ti_of_clk_init_cb_t)(void *, struct device_node *);\n\nstruct clk *of_ti_clk_register(struct device_node *node, struct clk_hw *hw,\n\t\t\t       const char *con);\nstruct clk *of_ti_clk_register_omap_hw(struct device_node *node,\n\t\t\t\t       struct clk_hw *hw, const char *con);\nconst char *ti_dt_clk_name(struct device_node *np);\nint ti_clk_add_alias(struct clk *clk, const char *con);\nvoid ti_clk_add_aliases(void);\n\nvoid ti_clk_latch(struct clk_omap_reg *reg, s8 shift);\n\nstruct clk_hw *ti_clk_build_component_mux(struct ti_clk_mux *setup);\n\nint ti_clk_parse_divider_data(int *div_table, int num_dividers, int max_div,\n\t\t\t      u8 flags, struct clk_omap_divider *div);\n\nint ti_clk_get_reg_addr(struct device_node *node, int index,\n\t\t\tstruct clk_omap_reg *reg);\nvoid ti_dt_clocks_register(struct ti_dt_clk *oclks);\nint ti_clk_retry_init(struct device_node *node, void *user,\n\t\t      ti_of_clk_init_cb_t func);\nint ti_clk_add_component(struct device_node *node, struct clk_hw *hw, int type);\n\nint of_ti_clk_autoidle_setup(struct device_node *node);\nvoid omap2_clk_enable_init_clocks(const char **clk_names, u8 num_clocks);\n\nextern const struct clk_hw_omap_ops clkhwops_omap3_dpll;\nextern const struct clk_hw_omap_ops clkhwops_omap4_dpllmx;\nextern const struct clk_hw_omap_ops clkhwops_wait;\nextern const struct clk_hw_omap_ops clkhwops_iclk;\nextern const struct clk_hw_omap_ops clkhwops_iclk_wait;\nextern const struct clk_hw_omap_ops clkhwops_omap2430_i2chs_wait;\nextern const struct clk_hw_omap_ops clkhwops_omap3430es2_dss_usbhost_wait;\nextern const struct clk_hw_omap_ops clkhwops_omap3430es2_iclk_hsotgusb_wait;\nextern const struct clk_hw_omap_ops clkhwops_omap3430es2_iclk_dss_usbhost_wait;\nextern const struct clk_hw_omap_ops clkhwops_omap3430es2_iclk_ssi_wait;\nextern const struct clk_hw_omap_ops clkhwops_am35xx_ipss_module_wait;\nextern const struct clk_hw_omap_ops clkhwops_am35xx_ipss_wait;\n\nextern const struct clk_ops ti_clk_divider_ops;\nextern const struct clk_ops ti_clk_mux_ops;\nextern const struct clk_ops omap_gate_clk_ops;\n\nextern struct ti_clk_features ti_clk_features;\n\nint omap2_init_clk_clkdm(struct clk_hw *hw);\nint omap2_clkops_enable_clkdm(struct clk_hw *hw);\nvoid omap2_clkops_disable_clkdm(struct clk_hw *hw);\n\nint omap2_dflt_clk_enable(struct clk_hw *hw);\nvoid omap2_dflt_clk_disable(struct clk_hw *hw);\nint omap2_dflt_clk_is_enabled(struct clk_hw *hw);\nvoid omap2_clk_dflt_find_companion(struct clk_hw_omap *clk,\n\t\t\t\t   struct clk_omap_reg *other_reg,\n\t\t\t\t   u8 *other_bit);\nvoid omap2_clk_dflt_find_idlest(struct clk_hw_omap *clk,\n\t\t\t\tstruct clk_omap_reg *idlest_reg,\n\t\t\t\tu8 *idlest_bit, u8 *idlest_val);\n\nvoid omap2_clkt_iclk_allow_idle(struct clk_hw_omap *clk);\nvoid omap2_clkt_iclk_deny_idle(struct clk_hw_omap *clk);\n\nu8 omap2_init_dpll_parent(struct clk_hw *hw);\nint omap3_noncore_dpll_enable(struct clk_hw *hw);\nvoid omap3_noncore_dpll_disable(struct clk_hw *hw);\nint omap3_noncore_dpll_set_parent(struct clk_hw *hw, u8 index);\nint omap3_noncore_dpll_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t\tunsigned long parent_rate);\nint omap3_noncore_dpll_set_rate_and_parent(struct clk_hw *hw,\n\t\t\t\t\t   unsigned long rate,\n\t\t\t\t\t   unsigned long parent_rate,\n\t\t\t\t\t   u8 index);\nint omap3_noncore_dpll_determine_rate(struct clk_hw *hw,\n\t\t\t\t      struct clk_rate_request *req);\nlong omap2_dpll_round_rate(struct clk_hw *hw, unsigned long target_rate,\n\t\t\t   unsigned long *parent_rate);\nunsigned long omap3_clkoutx2_recalc(struct clk_hw *hw,\n\t\t\t\t    unsigned long parent_rate);\n\n \n#define OMAP3_DPLL5_FREQ_FOR_USBHOST\t120000000\n\nunsigned long omap3_dpll_recalc(struct clk_hw *hw, unsigned long parent_rate);\nint omap3_dpll4_set_rate(struct clk_hw *clk, unsigned long rate,\n\t\t\t unsigned long parent_rate);\nint omap3_dpll4_set_rate_and_parent(struct clk_hw *hw, unsigned long rate,\n\t\t\t\t    unsigned long parent_rate, u8 index);\nint omap3_dpll5_set_rate(struct clk_hw *hw, unsigned long rate,\n\t\t\t unsigned long parent_rate);\nvoid omap3_clk_lock_dpll5(void);\n\nunsigned long omap4_dpll_regm4xen_recalc(struct clk_hw *hw,\n\t\t\t\t\t unsigned long parent_rate);\nlong omap4_dpll_regm4xen_round_rate(struct clk_hw *hw,\n\t\t\t\t    unsigned long target_rate,\n\t\t\t\t    unsigned long *parent_rate);\nint omap4_dpll_regm4xen_determine_rate(struct clk_hw *hw,\n\t\t\t\t       struct clk_rate_request *req);\nint omap2_clk_for_each(int (*fn)(struct clk_hw_omap *hw));\n\nextern struct ti_clk_ll_ops *ti_clk_ll_ops;\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}