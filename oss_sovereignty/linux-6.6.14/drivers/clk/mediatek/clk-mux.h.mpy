{
  "module_name": "clk-mux.h",
  "hash_id": "c2ae921bda660b642dc8fcf17dafee277f50fa0b7622dba892af6e3592811ef8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/mediatek/clk-mux.h",
  "human_readable_source": " \n \n\n#ifndef __DRV_CLK_MTK_MUX_H\n#define __DRV_CLK_MTK_MUX_H\n\n#include <linux/notifier.h>\n#include <linux/spinlock.h>\n#include <linux/types.h>\n\nstruct clk;\nstruct clk_hw_onecell_data;\nstruct clk_ops;\nstruct device;\nstruct device_node;\n\nstruct mtk_mux {\n\tint id;\n\tconst char *name;\n\tconst char * const *parent_names;\n\tunsigned int flags;\n\n\tu32 mux_ofs;\n\tu32 set_ofs;\n\tu32 clr_ofs;\n\tu32 upd_ofs;\n\n\tu8 mux_shift;\n\tu8 mux_width;\n\tu8 gate_shift;\n\ts8 upd_shift;\n\n\tconst struct clk_ops *ops;\n\tsigned char num_parents;\n};\n\n#define GATE_CLR_SET_UPD_FLAGS(_id, _name, _parents, _mux_ofs,\t\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t_gate, _upd_ofs, _upd, _flags, _ops) {\t\t\\\n\t\t.id = _id,\t\t\t\t\t\t\\\n\t\t.name = _name,\t\t\t\t\t\t\\\n\t\t.mux_ofs = _mux_ofs,\t\t\t\t\t\\\n\t\t.set_ofs = _mux_set_ofs,\t\t\t\t\\\n\t\t.clr_ofs = _mux_clr_ofs,\t\t\t\t\\\n\t\t.upd_ofs = _upd_ofs,\t\t\t\t\t\\\n\t\t.mux_shift = _shift,\t\t\t\t\t\\\n\t\t.mux_width = _width,\t\t\t\t\t\\\n\t\t.gate_shift = _gate,\t\t\t\t\t\\\n\t\t.upd_shift = _upd,\t\t\t\t\t\\\n\t\t.parent_names = _parents,\t\t\t\t\\\n\t\t.num_parents = ARRAY_SIZE(_parents),\t\t\t\\\n\t\t.flags = _flags,\t\t\t\t\t\\\n\t\t.ops = &_ops,\t\t\t\t\t\t\\\n\t}\n\nextern const struct clk_ops mtk_mux_clr_set_upd_ops;\nextern const struct clk_ops mtk_mux_gate_clr_set_upd_ops;\n\n#define MUX_GATE_CLR_SET_UPD_FLAGS(_id, _name, _parents, _mux_ofs,\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t_gate, _upd_ofs, _upd, _flags)\t\t\t\\\n\t\tGATE_CLR_SET_UPD_FLAGS(_id, _name, _parents, _mux_ofs,\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t_gate, _upd_ofs, _upd, _flags,\t\t\t\\\n\t\t\tmtk_mux_gate_clr_set_upd_ops)\n\n#define MUX_GATE_CLR_SET_UPD(_id, _name, _parents, _mux_ofs,\t\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t_gate, _upd_ofs, _upd)\t\t\t\t\\\n\t\tMUX_GATE_CLR_SET_UPD_FLAGS(_id, _name, _parents,\t\\\n\t\t\t_mux_ofs, _mux_set_ofs, _mux_clr_ofs, _shift,\t\\\n\t\t\t_width, _gate, _upd_ofs, _upd,\t\t\t\\\n\t\t\tCLK_SET_RATE_PARENT)\n\n#define MUX_CLR_SET_UPD(_id, _name, _parents, _mux_ofs,\t\t\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t_upd_ofs, _upd)\t\t\t\t\t\\\n\t\tGATE_CLR_SET_UPD_FLAGS(_id, _name, _parents, _mux_ofs,\t\\\n\t\t\t_mux_set_ofs, _mux_clr_ofs, _shift, _width,\t\\\n\t\t\t0, _upd_ofs, _upd, CLK_SET_RATE_PARENT,\t\t\\\n\t\t\tmtk_mux_clr_set_upd_ops)\n\nint mtk_clk_register_muxes(struct device *dev,\n\t\t\t   const struct mtk_mux *muxes,\n\t\t\t   int num, struct device_node *node,\n\t\t\t   spinlock_t *lock,\n\t\t\t   struct clk_hw_onecell_data *clk_data);\n\nvoid mtk_clk_unregister_muxes(const struct mtk_mux *muxes, int num,\n\t\t\t      struct clk_hw_onecell_data *clk_data);\n\nstruct mtk_mux_nb {\n\tstruct notifier_block\tnb;\n\tconst struct clk_ops\t*ops;\n\n\tu8\tbypass_index;\t \n\tu8\toriginal_index;\t \n};\n\n#define to_mtk_mux_nb(_nb)\tcontainer_of(_nb, struct mtk_mux_nb, nb)\n\nint devm_mtk_clk_mux_notifier_register(struct device *dev, struct clk *clk,\n\t\t\t\t       struct mtk_mux_nb *mux_nb);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}