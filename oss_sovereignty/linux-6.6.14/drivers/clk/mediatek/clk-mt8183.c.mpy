{
  "module_name": "clk-mt8183.c",
  "hash_id": "285963c02e7dd427541533a3194b21f37d07ba00c97ffce7f694daf2751990af",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/mediatek/clk-mt8183.c",
  "human_readable_source": "\n\n\n\n\n#include <linux/delay.h>\n#include <linux/mfd/syscon.h>\n#include <linux/mod_devicetable.h>\n#include <linux/platform_device.h>\n#include <linux/slab.h>\n\n#include \"clk-gate.h\"\n#include \"clk-mtk.h\"\n#include \"clk-mux.h\"\n\n#include <dt-bindings/clock/mt8183-clk.h>\n\nstatic DEFINE_SPINLOCK(mt8183_clk_lock);\n\nstatic const struct mtk_fixed_clk top_fixed_clks[] = {\n\tFIXED_CLK(CLK_TOP_CLK26M, \"f_f26m_ck\", \"clk26m\", 26000000),\n\tFIXED_CLK(CLK_TOP_ULPOSC, \"osc\", NULL, 250000),\n\tFIXED_CLK(CLK_TOP_UNIVP_192M, \"univpll_192m\", \"univpll\", 192000000),\n};\n\n \nstatic const struct mtk_fixed_factor top_divs[] = {\n\tFACTOR(CLK_TOP_CLK13M, \"clk26m_d2\", \"clk26m\", 1, 2),\n\tFACTOR(CLK_TOP_F26M_CK_D2, \"csw_f26m_ck_d2\", \"clk26m\", 1, 2),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_CK, \"syspll_ck\", \"mainpll\", 1, 1, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D2, \"syspll_d2\", \"syspll_ck\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D2_D2, \"syspll_d2_d2\", \"syspll_d2\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D2_D4, \"syspll_d2_d4\", \"syspll_d2\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D2_D8, \"syspll_d2_d8\", \"syspll_d2\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D2_D16, \"syspll_d2_d16\", \"syspll_d2\", 1, 16, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D3, \"syspll_d3\", \"mainpll\", 1, 3, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D3_D2, \"syspll_d3_d2\", \"syspll_d3\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D3_D4, \"syspll_d3_d4\", \"syspll_d3\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D3_D8, \"syspll_d3_d8\", \"syspll_d3\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D5, \"syspll_d5\", \"mainpll\", 1, 5, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D5_D2, \"syspll_d5_d2\", \"syspll_d5\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D5_D4, \"syspll_d5_d4\", \"syspll_d5\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D7, \"syspll_d7\", \"mainpll\", 1, 7, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D7_D2, \"syspll_d7_d2\", \"syspll_d7\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_SYSPLL_D7_D4, \"syspll_d7_d4\", \"syspll_d7\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_CK, \"univpll_ck\", \"univpll\", 1, 1, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D2, \"univpll_d2\", \"univpll_ck\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D2_D2, \"univpll_d2_d2\", \"univpll_d2\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D2_D4, \"univpll_d2_d4\", \"univpll_d2\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D2_D8, \"univpll_d2_d8\", \"univpll_d2\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D3, \"univpll_d3\", \"univpll\", 1, 3, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D3_D2, \"univpll_d3_d2\", \"univpll_d3\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D3_D4, \"univpll_d3_d4\", \"univpll_d3\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D3_D8, \"univpll_d3_d8\", \"univpll_d3\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D5, \"univpll_d5\", \"univpll\", 1, 5, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D5_D2, \"univpll_d5_d2\", \"univpll_d5\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D5_D4, \"univpll_d5_d4\", \"univpll_d5\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D5_D8, \"univpll_d5_d8\", \"univpll_d5\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D7, \"univpll_d7\", \"univpll\", 1, 7, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_CK, \"univ_192m_ck\", \"univpll_192m\", 1, 1, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_D2, \"univ_192m_d2\", \"univ_192m_ck\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_D4, \"univ_192m_d4\", \"univ_192m_ck\", 1, 4, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_D8, \"univ_192m_d8\", \"univ_192m_ck\", 1, 8, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_D16, \"univ_192m_d16\", \"univ_192m_ck\", 1, 16, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVP_192M_D32, \"univ_192m_d32\", \"univ_192m_ck\", 1, 32, 0),\n\tFACTOR(CLK_TOP_APLL1_CK, \"apll1_ck\", \"apll1\", 1, 1),\n\tFACTOR(CLK_TOP_APLL1_D2, \"apll1_d2\", \"apll1\", 1, 2),\n\tFACTOR(CLK_TOP_APLL1_D4, \"apll1_d4\", \"apll1\", 1, 4),\n\tFACTOR(CLK_TOP_APLL1_D8, \"apll1_d8\", \"apll1\", 1, 8),\n\tFACTOR(CLK_TOP_APLL2_CK, \"apll2_ck\", \"apll2\", 1, 1),\n\tFACTOR(CLK_TOP_APLL2_D2, \"apll2_d2\", \"apll2\", 1, 2),\n\tFACTOR(CLK_TOP_APLL2_D4, \"apll2_d4\", \"apll2\", 1, 4),\n\tFACTOR(CLK_TOP_APLL2_D8, \"apll2_d8\", \"apll2\", 1, 8),\n\tFACTOR(CLK_TOP_TVDPLL_CK, \"tvdpll_ck\", \"tvdpll\", 1, 1),\n\tFACTOR(CLK_TOP_TVDPLL_D2, \"tvdpll_d2\", \"tvdpll_ck\", 1, 2),\n\tFACTOR(CLK_TOP_TVDPLL_D4, \"tvdpll_d4\", \"tvdpll\", 1, 4),\n\tFACTOR(CLK_TOP_TVDPLL_D8, \"tvdpll_d8\", \"tvdpll\", 1, 8),\n\tFACTOR(CLK_TOP_TVDPLL_D16, \"tvdpll_d16\", \"tvdpll\", 1, 16),\n\tFACTOR(CLK_TOP_MMPLL_CK, \"mmpll_ck\", \"mmpll\", 1, 1),\n\tFACTOR(CLK_TOP_MMPLL_D4, \"mmpll_d4\", \"mmpll\", 1, 4),\n\tFACTOR(CLK_TOP_MMPLL_D4_D2, \"mmpll_d4_d2\", \"mmpll_d4\", 1, 2),\n\tFACTOR(CLK_TOP_MMPLL_D4_D4, \"mmpll_d4_d4\", \"mmpll_d4\", 1, 4),\n\tFACTOR(CLK_TOP_MMPLL_D5, \"mmpll_d5\", \"mmpll\", 1, 5),\n\tFACTOR(CLK_TOP_MMPLL_D5_D2, \"mmpll_d5_d2\", \"mmpll_d5\", 1, 2),\n\tFACTOR(CLK_TOP_MMPLL_D5_D4, \"mmpll_d5_d4\", \"mmpll_d5\", 1, 4),\n\tFACTOR(CLK_TOP_MMPLL_D6, \"mmpll_d6\", \"mmpll\", 1, 6),\n\tFACTOR(CLK_TOP_MMPLL_D7, \"mmpll_d7\", \"mmpll\", 1, 7),\n\tFACTOR(CLK_TOP_MFGPLL_CK, \"mfgpll_ck\", \"mfgpll\", 1, 1),\n\tFACTOR(CLK_TOP_MSDCPLL_CK, \"msdcpll_ck\", \"msdcpll\", 1, 1),\n\tFACTOR(CLK_TOP_MSDCPLL_D2, \"msdcpll_d2\", \"msdcpll\", 1, 2),\n\tFACTOR(CLK_TOP_MSDCPLL_D4, \"msdcpll_d4\", \"msdcpll\", 1, 4),\n\tFACTOR(CLK_TOP_MSDCPLL_D8, \"msdcpll_d8\", \"msdcpll\", 1, 8),\n\tFACTOR(CLK_TOP_MSDCPLL_D16, \"msdcpll_d16\", \"msdcpll\", 1, 16),\n\tFACTOR(CLK_TOP_AD_OSC_CK, \"ad_osc_ck\", \"osc\", 1, 1),\n\tFACTOR(CLK_TOP_OSC_D2, \"osc_d2\", \"osc\", 1, 2),\n\tFACTOR(CLK_TOP_OSC_D4, \"osc_d4\", \"osc\", 1, 4),\n\tFACTOR(CLK_TOP_OSC_D8, \"osc_d8\", \"osc\", 1, 8),\n\tFACTOR(CLK_TOP_OSC_D16, \"osc_d16\", \"osc\", 1, 16),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL, \"univpll\", \"univ2pll\", 1, 2, 0),\n\tFACTOR_FLAGS(CLK_TOP_UNIVPLL_D3_D16, \"univpll_d3_d16\", \"univpll_d3\", 1, 16, 0),\n};\n\nstatic const char * const axi_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d4\",\n\t\"syspll_d7\",\n\t\"osc_d4\"\n};\n\nstatic const char * const mm_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d7\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const img_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d6\",\n\t\"univpll_d3\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const cam_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2\",\n\t\"mmpll_d6\",\n\t\"syspll_d3\",\n\t\"mmpll_d7\",\n\t\"univpll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d3_d2\",\n\t\"univpll_d3_d2\"\n};\n\nstatic const char * const dsp_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\",\n\t\"univpll_d3\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const dsp1_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\",\n\t\"univpll_d3\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const dsp2_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\",\n\t\"univpll_d3\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const ipu_if_parents[] = {\n\t\"clk26m\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\",\n\t\"univpll_d3\",\n\t\"syspll_d3\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const mfg_parents[] = {\n\t\"clk26m\",\n\t\"mfgpll_ck\",\n\t\"univpll_d3\",\n\t\"syspll_d3\"\n};\n\nstatic const char * const f52m_mfg_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d3_d2\",\n\t\"univpll_d3_d4\",\n\t\"univpll_d3_d8\"\n};\n\nstatic const char * const camtg_parents[] = {\n\t\"clk26m\",\n\t\"univ_192m_d8\",\n\t\"univpll_d3_d8\",\n\t\"univ_192m_d4\",\n\t\"univpll_d3_d16\",\n\t\"csw_f26m_ck_d2\",\n\t\"univ_192m_d16\",\n\t\"univ_192m_d32\"\n};\n\nstatic const char * const camtg2_parents[] = {\n\t\"clk26m\",\n\t\"univ_192m_d8\",\n\t\"univpll_d3_d8\",\n\t\"univ_192m_d4\",\n\t\"univpll_d3_d16\",\n\t\"csw_f26m_ck_d2\",\n\t\"univ_192m_d16\",\n\t\"univ_192m_d32\"\n};\n\nstatic const char * const camtg3_parents[] = {\n\t\"clk26m\",\n\t\"univ_192m_d8\",\n\t\"univpll_d3_d8\",\n\t\"univ_192m_d4\",\n\t\"univpll_d3_d16\",\n\t\"csw_f26m_ck_d2\",\n\t\"univ_192m_d16\",\n\t\"univ_192m_d32\"\n};\n\nstatic const char * const camtg4_parents[] = {\n\t\"clk26m\",\n\t\"univ_192m_d8\",\n\t\"univpll_d3_d8\",\n\t\"univ_192m_d4\",\n\t\"univpll_d3_d16\",\n\t\"csw_f26m_ck_d2\",\n\t\"univ_192m_d16\",\n\t\"univ_192m_d32\"\n};\n\nstatic const char * const uart_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d3_d8\"\n};\n\nstatic const char * const spi_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d5_d2\",\n\t\"syspll_d3_d4\",\n\t\"msdcpll_d4\"\n};\n\nstatic const char * const msdc50_hclk_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d3_d2\"\n};\n\nstatic const char * const msdc50_0_parents[] = {\n\t\"clk26m\",\n\t\"msdcpll_ck\",\n\t\"msdcpll_d2\",\n\t\"univpll_d2_d4\",\n\t\"syspll_d3_d2\",\n\t\"univpll_d2_d2\"\n};\n\nstatic const char * const msdc30_1_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\",\n\t\"syspll_d7\",\n\t\"msdcpll_d2\"\n};\n\nstatic const char * const msdc30_2_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d3_d2\",\n\t\"syspll_d3_d2\",\n\t\"syspll_d7\",\n\t\"msdcpll_d2\"\n};\n\nstatic const char * const audio_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d5_d4\",\n\t\"syspll_d7_d4\",\n\t\"syspll_d2_d16\"\n};\n\nstatic const char * const aud_intbus_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d4\",\n\t\"syspll_d7_d2\"\n};\n\nstatic const char * const pmicspi_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d8\",\n\t\"osc_d8\"\n};\n\nstatic const char * const fpwrap_ulposc_parents[] = {\n\t\"clk26m\",\n\t\"osc_d16\",\n\t\"osc_d4\",\n\t\"osc_d8\"\n};\n\nstatic const char * const atb_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d5\"\n};\n\nstatic const char * const sspm_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d2_d4\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d3\"\n};\n\nstatic const char * const dpi0_parents[] = {\n\t\"clk26m\",\n\t\"tvdpll_d2\",\n\t\"tvdpll_d4\",\n\t\"tvdpll_d8\",\n\t\"tvdpll_d16\",\n\t\"univpll_d5_d2\",\n\t\"univpll_d3_d4\",\n\t\"syspll_d3_d4\",\n\t\"univpll_d3_d8\"\n};\n\nstatic const char * const scam_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d5_d2\"\n};\n\nstatic const char * const disppwm_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d3_d4\",\n\t\"osc_d2\",\n\t\"osc_d4\",\n\t\"osc_d16\"\n};\n\nstatic const char * const usb_top_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d5_d4\",\n\t\"univpll_d3_d4\",\n\t\"univpll_d5_d2\"\n};\n\n\nstatic const char * const ssusb_top_xhci_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d5_d4\",\n\t\"univpll_d3_d4\",\n\t\"univpll_d5_d2\"\n};\n\nstatic const char * const spm_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d8\"\n};\n\nstatic const char * const i2c_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d8\",\n\t\"univpll_d5_d2\"\n};\n\nstatic const char * const scp_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d2_d8\",\n\t\"syspll_d5\",\n\t\"syspll_d2_d2\",\n\t\"univpll_d2_d2\",\n\t\"syspll_d3\",\n\t\"univpll_d3\"\n};\n\nstatic const char * const seninf_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d2_d2\",\n\t\"univpll_d3_d2\",\n\t\"univpll_d2_d4\"\n};\n\nstatic const char * const dxcc_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d2_d4\",\n\t\"syspll_d2_d8\"\n};\n\nstatic const char * const aud_engen1_parents[] = {\n\t\"clk26m\",\n\t\"apll1_d2\",\n\t\"apll1_d4\",\n\t\"apll1_d8\"\n};\n\nstatic const char * const aud_engen2_parents[] = {\n\t\"clk26m\",\n\t\"apll2_d2\",\n\t\"apll2_d4\",\n\t\"apll2_d8\"\n};\n\nstatic const char * const faes_ufsfde_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2\",\n\t\"syspll_d2_d2\",\n\t\"syspll_d3\",\n\t\"syspll_d2_d4\",\n\t\"univpll_d3\"\n};\n\nstatic const char * const fufs_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d2_d4\",\n\t\"syspll_d2_d8\",\n\t\"syspll_d2_d16\"\n};\n\nstatic const char * const aud_1_parents[] = {\n\t\"clk26m\",\n\t\"apll1_ck\"\n};\n\nstatic const char * const aud_2_parents[] = {\n\t\"clk26m\",\n\t\"apll2_ck\"\n};\n\n \nstatic const struct mtk_mux top_muxes[] = {\n\t \n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_AXI, \"axi_sel\",\n\t\taxi_parents, 0x40, 0x44, 0x48, 0, 2, 7, 0x004, 0,\n\t\t\t\t   CLK_IS_CRITICAL | CLK_SET_RATE_PARENT),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_MM, \"mm_sel\",\n\t\tmm_parents, 0x40, 0x44, 0x48, 8, 3, 15, 0x004, 1),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_IMG, \"img_sel\",\n\t\timg_parents, 0x40, 0x44, 0x48, 16, 3, 23, 0x004, 2),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_CAM, \"cam_sel\",\n\t\tcam_parents, 0x40, 0x44, 0x48, 24, 4, 31, 0x004, 3),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DSP, \"dsp_sel\",\n\t\tdsp_parents, 0x50, 0x54, 0x58, 0, 4, 7, 0x004, 4),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DSP1, \"dsp1_sel\",\n\t\tdsp1_parents, 0x50, 0x54, 0x58, 8, 4, 15, 0x004, 5),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DSP2, \"dsp2_sel\",\n\t\tdsp2_parents, 0x50, 0x54, 0x58, 16, 4, 23, 0x004, 6),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_IPU_IF, \"ipu_if_sel\",\n\t\tipu_if_parents, 0x50, 0x54, 0x58, 24, 4, 31, 0x004, 7),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_MFG, \"mfg_sel\",\n\t\tmfg_parents, 0x60, 0x64, 0x68, 0, 2, 7, 0x004, 8),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_F52M_MFG, \"f52m_mfg_sel\",\n\t\tf52m_mfg_parents, 0x60, 0x64, 0x68, 8, 2, 15, 0x004, 9),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_CAMTG, \"camtg_sel\",\n\t\tcamtg_parents, 0x60, 0x64, 0x68, 16, 3, 23, 0x004, 10),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_CAMTG2, \"camtg2_sel\",\n\t\tcamtg2_parents, 0x60, 0x64, 0x68, 24, 3, 31, 0x004, 11),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_CAMTG3, \"camtg3_sel\",\n\t\tcamtg3_parents, 0x70, 0x74, 0x78, 0, 3, 7, 0x004, 12),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_CAMTG4, \"camtg4_sel\",\n\t\tcamtg4_parents, 0x70, 0x74, 0x78, 8, 3, 15, 0x004, 13),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_UART, \"uart_sel\",\n\t\tuart_parents, 0x70, 0x74, 0x78, 16, 1, 23, 0x004, 14),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_SPI, \"spi_sel\",\n\t\tspi_parents, 0x70, 0x74, 0x78, 24, 2, 31, 0x004, 15),\n\t \n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_MSDC50_0_HCLK, \"msdc50_hclk_sel\",\n\t\tmsdc50_hclk_parents, 0x80, 0x84, 0x88, 0, 2, 7, 0x004, 16, 0),\n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_MSDC50_0, \"msdc50_0_sel\",\n\t\tmsdc50_0_parents, 0x80, 0x84, 0x88, 8, 3, 15, 0x004, 17, 0),\n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_MSDC30_1, \"msdc30_1_sel\",\n\t\tmsdc30_1_parents, 0x80, 0x84, 0x88, 16, 3, 23, 0x004, 18, 0),\n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_MSDC30_2, \"msdc30_2_sel\",\n\t\tmsdc30_2_parents, 0x80, 0x84, 0x88, 24, 3, 31, 0x004, 19, 0),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUDIO, \"audio_sel\",\n\t\taudio_parents, 0x90, 0x94, 0x98, 0, 2, 7, 0x004, 20),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUD_INTBUS, \"aud_intbus_sel\",\n\t\taud_intbus_parents, 0x90, 0x94, 0x98, 8, 2, 15, 0x004, 21),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_PMICSPI, \"pmicspi_sel\",\n\t\tpmicspi_parents, 0x90, 0x94, 0x98, 16, 2, 23, 0x004, 22),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_FPWRAP_ULPOSC, \"fpwrap_ulposc_sel\",\n\t\tfpwrap_ulposc_parents, 0x90, 0x94, 0x98, 24, 2, 31, 0x004, 23),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_ATB, \"atb_sel\",\n\t\tatb_parents, 0xa0, 0xa4, 0xa8, 0, 2, 7, 0x004, 24),\n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_SSPM, \"sspm_sel\",\n\t\t\t\t   sspm_parents, 0xa0, 0xa4, 0xa8, 8, 3, 15, 0x004, 25,\n\t\t\t\t   CLK_IS_CRITICAL | CLK_SET_RATE_PARENT),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DPI0, \"dpi0_sel\",\n\t\tdpi0_parents, 0xa0, 0xa4, 0xa8, 16, 4, 23, 0x004, 26),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_SCAM, \"scam_sel\",\n\t\tscam_parents, 0xa0, 0xa4, 0xa8, 24, 1, 31, 0x004, 27),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DISP_PWM, \"disppwm_sel\",\n\t\tdisppwm_parents, 0xb0, 0xb4, 0xb8, 0, 3, 7, 0x004, 28),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_USB_TOP, \"usb_top_sel\",\n\t\tusb_top_parents, 0xb0, 0xb4, 0xb8, 8, 2, 15, 0x004, 29),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_SSUSB_TOP_XHCI, \"ssusb_top_xhci_sel\",\n\t\tssusb_top_xhci_parents, 0xb0, 0xb4, 0xb8, 16, 2, 23, 0x004, 30),\n\tMUX_GATE_CLR_SET_UPD_FLAGS(CLK_TOP_MUX_SPM, \"spm_sel\",\n\t\tspm_parents, 0xb0, 0xb4, 0xb8, 24, 1, 31, 0x008, 0,\n\t\t\t\t   CLK_IS_CRITICAL | CLK_SET_RATE_PARENT),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_I2C, \"i2c_sel\",\n\t\ti2c_parents, 0xc0, 0xc4, 0xc8, 0, 2, 7, 0x008, 1),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_SCP, \"scp_sel\",\n\t\tscp_parents, 0xc0, 0xc4, 0xc8, 8, 3, 15, 0x008, 2),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_SENINF, \"seninf_sel\",\n\t\tseninf_parents, 0xc0, 0xc4, 0xc8, 16, 2, 23, 0x008, 3),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_DXCC, \"dxcc_sel\",\n\t\tdxcc_parents, 0xc0, 0xc4, 0xc8, 24, 2, 31, 0x008, 4),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUD_ENG1, \"aud_eng1_sel\",\n\t\taud_engen1_parents, 0xd0, 0xd4, 0xd8, 0, 2, 7, 0x008, 5),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUD_ENG2, \"aud_eng2_sel\",\n\t\taud_engen2_parents, 0xd0, 0xd4, 0xd8, 8, 2, 15, 0x008, 6),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_FAES_UFSFDE, \"faes_ufsfde_sel\",\n\t\tfaes_ufsfde_parents, 0xd0, 0xd4, 0xd8, 16, 3, 23, 0x008, 7),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_FUFS, \"fufs_sel\",\n\t\tfufs_parents, 0xd0, 0xd4, 0xd8, 24, 2, 31, 0x008, 8),\n\t \n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUD_1, \"aud_1_sel\",\n\t\taud_1_parents, 0xe0, 0xe4, 0xe8, 0, 1, 7, 0x008, 9),\n\tMUX_GATE_CLR_SET_UPD(CLK_TOP_MUX_AUD_2, \"aud_2_sel\",\n\t\taud_2_parents, 0xe0, 0xe4, 0xe8, 8, 1, 15, 0x008, 10),\n};\n\nstatic const char * const apll_i2s0_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const apll_i2s1_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const apll_i2s2_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const apll_i2s3_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const apll_i2s4_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const apll_i2s5_parents[] = {\n\t\"aud_1_sel\",\n\t\"aud_2_sel\"\n};\n\nstatic const char * const mcu_mp0_parents[] = {\n\t\"clk26m\",\n\t\"armpll_ll\",\n\t\"armpll_div_pll1\",\n\t\"armpll_div_pll2\"\n};\n\nstatic const char * const mcu_mp2_parents[] = {\n\t\"clk26m\",\n\t\"armpll_l\",\n\t\"armpll_div_pll1\",\n\t\"armpll_div_pll2\"\n};\n\nstatic const char * const mcu_bus_parents[] = {\n\t\"clk26m\",\n\t\"ccipll\",\n\t\"armpll_div_pll1\",\n\t\"armpll_div_pll2\"\n};\n\nstatic struct mtk_composite mcu_muxes[] = {\n\t \n\tMUX(CLK_MCU_MP0_SEL, \"mcu_mp0_sel\", mcu_mp0_parents, 0x7A0, 9, 2),\n\t \n\tMUX(CLK_MCU_MP2_SEL, \"mcu_mp2_sel\", mcu_mp2_parents, 0x7A8, 9, 2),\n\t \n\tMUX(CLK_MCU_BUS_SEL, \"mcu_bus_sel\", mcu_bus_parents, 0x7C0, 9, 2),\n};\n\nstatic struct mtk_composite top_aud_comp[] = {\n\tMUX(CLK_TOP_MUX_APLL_I2S0, \"apll_i2s0_sel\", apll_i2s0_parents, 0x320, 8, 1),\n\tMUX(CLK_TOP_MUX_APLL_I2S1, \"apll_i2s1_sel\", apll_i2s1_parents, 0x320, 9, 1),\n\tMUX(CLK_TOP_MUX_APLL_I2S2, \"apll_i2s2_sel\", apll_i2s2_parents, 0x320, 10, 1),\n\tMUX(CLK_TOP_MUX_APLL_I2S3, \"apll_i2s3_sel\", apll_i2s3_parents, 0x320, 11, 1),\n\tMUX(CLK_TOP_MUX_APLL_I2S4, \"apll_i2s4_sel\", apll_i2s4_parents, 0x320, 12, 1),\n\tMUX(CLK_TOP_MUX_APLL_I2S5, \"apll_i2s5_sel\", apll_i2s5_parents, 0x328, 20, 1),\n\tDIV_GATE(CLK_TOP_APLL12_DIV0, \"apll12_div0\", \"apll_i2s0_sel\", 0x320, 2, 0x324, 8, 0),\n\tDIV_GATE(CLK_TOP_APLL12_DIV1, \"apll12_div1\", \"apll_i2s1_sel\", 0x320, 3, 0x324, 8, 8),\n\tDIV_GATE(CLK_TOP_APLL12_DIV2, \"apll12_div2\", \"apll_i2s2_sel\", 0x320, 4, 0x324, 8, 16),\n\tDIV_GATE(CLK_TOP_APLL12_DIV3, \"apll12_div3\", \"apll_i2s3_sel\", 0x320, 5, 0x324, 8, 24),\n\tDIV_GATE(CLK_TOP_APLL12_DIV4, \"apll12_div4\", \"apll_i2s4_sel\", 0x320, 6, 0x328, 8, 0),\n\tDIV_GATE(CLK_TOP_APLL12_DIVB, \"apll12_divb\", \"apll12_div4\", 0x320, 7, 0x328, 8, 8),\n};\n\nstatic const struct mtk_gate_regs top_cg_regs = {\n\t.set_ofs = 0x104,\n\t.clr_ofs = 0x104,\n\t.sta_ofs = 0x104,\n};\n\n#define GATE_TOP(_id, _name, _parent, _shift)\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &top_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr_inv)\n\nstatic const struct mtk_gate top_clks[] = {\n\t \n\tGATE_TOP(CLK_TOP_ARMPLL_DIV_PLL1, \"armpll_div_pll1\", \"mainpll\", 4),\n\tGATE_TOP(CLK_TOP_ARMPLL_DIV_PLL2, \"armpll_div_pll2\", \"univpll\", 5),\n};\n\nstatic const struct mtk_gate_regs infra0_cg_regs = {\n\t.set_ofs = 0x80,\n\t.clr_ofs = 0x84,\n\t.sta_ofs = 0x90,\n};\n\nstatic const struct mtk_gate_regs infra1_cg_regs = {\n\t.set_ofs = 0x88,\n\t.clr_ofs = 0x8c,\n\t.sta_ofs = 0x94,\n};\n\nstatic const struct mtk_gate_regs infra2_cg_regs = {\n\t.set_ofs = 0xa4,\n\t.clr_ofs = 0xa8,\n\t.sta_ofs = 0xac,\n};\n\nstatic const struct mtk_gate_regs infra3_cg_regs = {\n\t.set_ofs = 0xc0,\n\t.clr_ofs = 0xc4,\n\t.sta_ofs = 0xc8,\n};\n\n#define GATE_INFRA0(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &infra0_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_setclr)\n\n#define GATE_INFRA1(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &infra1_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_setclr)\n\n#define GATE_INFRA2(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &infra2_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_setclr)\n\n#define GATE_INFRA2_FLAGS(_id, _name, _parent, _shift, _flag)\t\\\n\tGATE_MTK_FLAGS(_id, _name, _parent, &infra2_cg_regs, \t\\\n\t\t       _shift, &mtk_clk_gate_ops_setclr, _flag)\n\n#define GATE_INFRA3(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &infra3_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_setclr)\n\n#define GATE_INFRA3_FLAGS(_id, _name, _parent, _shift, _flag)\t\\\n\tGATE_MTK_FLAGS(_id, _name, _parent, &infra3_cg_regs, \t\\\n\t\t       _shift, &mtk_clk_gate_ops_setclr, _flag)\n\nstatic const struct mtk_gate infra_clks[] = {\n\t \n\tGATE_INFRA0(CLK_INFRA_PMIC_TMR, \"infra_pmic_tmr\", \"axi_sel\", 0),\n\tGATE_INFRA0(CLK_INFRA_PMIC_AP, \"infra_pmic_ap\", \"axi_sel\", 1),\n\tGATE_INFRA0(CLK_INFRA_PMIC_MD, \"infra_pmic_md\", \"axi_sel\", 2),\n\tGATE_INFRA0(CLK_INFRA_PMIC_CONN, \"infra_pmic_conn\", \"axi_sel\", 3),\n\tGATE_INFRA0(CLK_INFRA_SCPSYS, \"infra_scp\", \"scp_sel\", 4),\n\tGATE_INFRA0(CLK_INFRA_SEJ, \"infra_sej\", \"f_f26m_ck\", 5),\n\tGATE_INFRA0(CLK_INFRA_APXGPT, \"infra_apxgpt\", \"axi_sel\", 6),\n\tGATE_INFRA0(CLK_INFRA_ICUSB, \"infra_icusb\", \"axi_sel\", 8),\n\tGATE_INFRA0(CLK_INFRA_GCE, \"infra_gce\", \"axi_sel\", 9),\n\tGATE_INFRA0(CLK_INFRA_THERM, \"infra_therm\", \"axi_sel\", 10),\n\tGATE_INFRA0(CLK_INFRA_I2C0, \"infra_i2c0\", \"i2c_sel\", 11),\n\tGATE_INFRA0(CLK_INFRA_I2C1, \"infra_i2c1\", \"i2c_sel\", 12),\n\tGATE_INFRA0(CLK_INFRA_I2C2, \"infra_i2c2\", \"i2c_sel\", 13),\n\tGATE_INFRA0(CLK_INFRA_I2C3, \"infra_i2c3\", \"i2c_sel\", 14),\n\tGATE_INFRA0(CLK_INFRA_PWM_HCLK, \"infra_pwm_hclk\", \"axi_sel\", 15),\n\tGATE_INFRA0(CLK_INFRA_PWM1, \"infra_pwm1\", \"i2c_sel\", 16),\n\tGATE_INFRA0(CLK_INFRA_PWM2, \"infra_pwm2\", \"i2c_sel\", 17),\n\tGATE_INFRA0(CLK_INFRA_PWM3, \"infra_pwm3\", \"i2c_sel\", 18),\n\tGATE_INFRA0(CLK_INFRA_PWM4, \"infra_pwm4\", \"i2c_sel\", 19),\n\tGATE_INFRA0(CLK_INFRA_PWM, \"infra_pwm\", \"i2c_sel\", 21),\n\tGATE_INFRA0(CLK_INFRA_UART0, \"infra_uart0\", \"uart_sel\", 22),\n\tGATE_INFRA0(CLK_INFRA_UART1, \"infra_uart1\", \"uart_sel\", 23),\n\tGATE_INFRA0(CLK_INFRA_UART2, \"infra_uart2\", \"uart_sel\", 24),\n\tGATE_INFRA0(CLK_INFRA_UART3, \"infra_uart3\", \"uart_sel\", 25),\n\tGATE_INFRA0(CLK_INFRA_GCE_26M, \"infra_gce_26m\", \"axi_sel\", 27),\n\tGATE_INFRA0(CLK_INFRA_CQ_DMA_FPC, \"infra_cqdma_fpc\", \"axi_sel\", 28),\n\tGATE_INFRA0(CLK_INFRA_BTIF, \"infra_btif\", \"axi_sel\", 31),\n\t \n\tGATE_INFRA1(CLK_INFRA_SPI0, \"infra_spi0\", \"spi_sel\", 1),\n\tGATE_INFRA1(CLK_INFRA_MSDC0, \"infra_msdc0\", \"msdc50_hclk_sel\", 2),\n\tGATE_INFRA1(CLK_INFRA_MSDC1, \"infra_msdc1\", \"axi_sel\", 4),\n\tGATE_INFRA1(CLK_INFRA_MSDC2, \"infra_msdc2\", \"axi_sel\", 5),\n\tGATE_INFRA1(CLK_INFRA_MSDC0_SCK, \"infra_msdc0_sck\", \"msdc50_0_sel\", 6),\n\tGATE_INFRA1(CLK_INFRA_DVFSRC, \"infra_dvfsrc\", \"f_f26m_ck\", 7),\n\tGATE_INFRA1(CLK_INFRA_GCPU, \"infra_gcpu\", \"axi_sel\", 8),\n\tGATE_INFRA1(CLK_INFRA_TRNG, \"infra_trng\", \"axi_sel\", 9),\n\tGATE_INFRA1(CLK_INFRA_AUXADC, \"infra_auxadc\", \"f_f26m_ck\", 10),\n\tGATE_INFRA1(CLK_INFRA_CPUM, \"infra_cpum\", \"axi_sel\", 11),\n\tGATE_INFRA1(CLK_INFRA_CCIF1_AP, \"infra_ccif1_ap\", \"axi_sel\", 12),\n\tGATE_INFRA1(CLK_INFRA_CCIF1_MD, \"infra_ccif1_md\", \"axi_sel\", 13),\n\tGATE_INFRA1(CLK_INFRA_AUXADC_MD, \"infra_auxadc_md\", \"f_f26m_ck\", 14),\n\tGATE_INFRA1(CLK_INFRA_MSDC1_SCK, \"infra_msdc1_sck\", \"msdc30_1_sel\", 16),\n\tGATE_INFRA1(CLK_INFRA_MSDC2_SCK, \"infra_msdc2_sck\", \"msdc30_2_sel\", 17),\n\tGATE_INFRA1(CLK_INFRA_AP_DMA, \"infra_apdma\", \"axi_sel\", 18),\n\tGATE_INFRA1(CLK_INFRA_XIU, \"infra_xiu\", \"axi_sel\", 19),\n\tGATE_INFRA1(CLK_INFRA_DEVICE_APC, \"infra_device_apc\", \"axi_sel\", 20),\n\tGATE_INFRA1(CLK_INFRA_CCIF_AP, \"infra_ccif_ap\", \"axi_sel\", 23),\n\tGATE_INFRA1(CLK_INFRA_DEBUGSYS, \"infra_debugsys\", \"axi_sel\", 24),\n\tGATE_INFRA1(CLK_INFRA_AUDIO, \"infra_audio\", \"axi_sel\", 25),\n\tGATE_INFRA1(CLK_INFRA_CCIF_MD, \"infra_ccif_md\", \"axi_sel\", 26),\n\tGATE_INFRA1(CLK_INFRA_DXCC_SEC_CORE, \"infra_dxcc_sec_core\", \"dxcc_sel\", 27),\n\tGATE_INFRA1(CLK_INFRA_DXCC_AO, \"infra_dxcc_ao\", \"dxcc_sel\", 28),\n\tGATE_INFRA1(CLK_INFRA_DEVMPU_BCLK, \"infra_devmpu_bclk\", \"axi_sel\", 30),\n\tGATE_INFRA1(CLK_INFRA_DRAMC_F26M, \"infra_dramc_f26m\", \"f_f26m_ck\", 31),\n\t \n\tGATE_INFRA2(CLK_INFRA_IRTX, \"infra_irtx\", \"f_f26m_ck\", 0),\n\tGATE_INFRA2(CLK_INFRA_USB, \"infra_usb\", \"usb_top_sel\", 1),\n\tGATE_INFRA2(CLK_INFRA_DISP_PWM, \"infra_disppwm\", \"axi_sel\", 2),\n\tGATE_INFRA2(CLK_INFRA_CLDMA_BCLK, \"infra_cldma_bclk\", \"axi_sel\", 3),\n\tGATE_INFRA2(CLK_INFRA_AUDIO_26M_BCLK, \"infra_audio_26m_bclk\", \"f_f26m_ck\", 4),\n\tGATE_INFRA2(CLK_INFRA_SPI1, \"infra_spi1\", \"spi_sel\", 6),\n\tGATE_INFRA2(CLK_INFRA_I2C4, \"infra_i2c4\", \"i2c_sel\", 7),\n\tGATE_INFRA2(CLK_INFRA_MODEM_TEMP_SHARE, \"infra_md_tmp_share\", \"f_f26m_ck\", 8),\n\tGATE_INFRA2(CLK_INFRA_SPI2, \"infra_spi2\", \"spi_sel\", 9),\n\tGATE_INFRA2(CLK_INFRA_SPI3, \"infra_spi3\", \"spi_sel\", 10),\n\tGATE_INFRA2(CLK_INFRA_UNIPRO_SCK, \"infra_unipro_sck\", \"ssusb_top_xhci_sel\", 11),\n\tGATE_INFRA2(CLK_INFRA_UNIPRO_TICK, \"infra_unipro_tick\", \"fufs_sel\", 12),\n\tGATE_INFRA2(CLK_INFRA_UFS_MP_SAP_BCLK, \"infra_ufs_mp_sap_bck\", \"fufs_sel\", 13),\n\tGATE_INFRA2(CLK_INFRA_MD32_BCLK, \"infra_md32_bclk\", \"axi_sel\", 14),\n\t \n\tGATE_INFRA2_FLAGS(CLK_INFRA_SSPM, \"infra_sspm\", \"sspm_sel\", 15, CLK_IS_CRITICAL),\n\tGATE_INFRA2(CLK_INFRA_UNIPRO_MBIST, \"infra_unipro_mbist\", \"axi_sel\", 16),\n\t \n\tGATE_INFRA2_FLAGS(CLK_INFRA_SSPM_BUS_HCLK, \"infra_sspm_bus_hclk\", \"axi_sel\", 17, CLK_IS_CRITICAL),\n\tGATE_INFRA2(CLK_INFRA_I2C5, \"infra_i2c5\", \"i2c_sel\", 18),\n\tGATE_INFRA2(CLK_INFRA_I2C5_ARBITER, \"infra_i2c5_arbiter\", \"i2c_sel\", 19),\n\tGATE_INFRA2(CLK_INFRA_I2C5_IMM, \"infra_i2c5_imm\", \"i2c_sel\", 20),\n\tGATE_INFRA2(CLK_INFRA_I2C1_ARBITER, \"infra_i2c1_arbiter\", \"i2c_sel\", 21),\n\tGATE_INFRA2(CLK_INFRA_I2C1_IMM, \"infra_i2c1_imm\", \"i2c_sel\", 22),\n\tGATE_INFRA2(CLK_INFRA_I2C2_ARBITER, \"infra_i2c2_arbiter\", \"i2c_sel\", 23),\n\tGATE_INFRA2(CLK_INFRA_I2C2_IMM, \"infra_i2c2_imm\", \"i2c_sel\", 24),\n\tGATE_INFRA2(CLK_INFRA_SPI4, \"infra_spi4\", \"spi_sel\", 25),\n\tGATE_INFRA2(CLK_INFRA_SPI5, \"infra_spi5\", \"spi_sel\", 26),\n\tGATE_INFRA2(CLK_INFRA_CQ_DMA, \"infra_cqdma\", \"axi_sel\", 27),\n\tGATE_INFRA2(CLK_INFRA_UFS, \"infra_ufs\", \"fufs_sel\", 28),\n\tGATE_INFRA2(CLK_INFRA_AES_UFSFDE, \"infra_aes_ufsfde\", \"faes_ufsfde_sel\", 29),\n\tGATE_INFRA2(CLK_INFRA_UFS_TICK, \"infra_ufs_tick\", \"fufs_sel\", 30),\n\t \n\tGATE_INFRA3(CLK_INFRA_MSDC0_SELF, \"infra_msdc0_self\", \"msdc50_0_sel\", 0),\n\tGATE_INFRA3(CLK_INFRA_MSDC1_SELF, \"infra_msdc1_self\", \"msdc50_0_sel\", 1),\n\tGATE_INFRA3(CLK_INFRA_MSDC2_SELF, \"infra_msdc2_self\", \"msdc50_0_sel\", 2),\n\t \n\tGATE_INFRA3_FLAGS(CLK_INFRA_SSPM_26M_SELF, \"infra_sspm_26m_self\", \"f_f26m_ck\", 3, CLK_IS_CRITICAL),\n\t \n\tGATE_INFRA3_FLAGS(CLK_INFRA_SSPM_32K_SELF, \"infra_sspm_32k_self\", \"f_f26m_ck\", 4, CLK_IS_CRITICAL),\n\tGATE_INFRA3(CLK_INFRA_UFS_AXI, \"infra_ufs_axi\", \"axi_sel\", 5),\n\tGATE_INFRA3(CLK_INFRA_I2C6, \"infra_i2c6\", \"i2c_sel\", 6),\n\tGATE_INFRA3(CLK_INFRA_AP_MSDC0, \"infra_ap_msdc0\", \"msdc50_hclk_sel\", 7),\n\tGATE_INFRA3(CLK_INFRA_MD_MSDC0, \"infra_md_msdc0\", \"msdc50_hclk_sel\", 8),\n\tGATE_INFRA3(CLK_INFRA_CCIF2_AP, \"infra_ccif2_ap\", \"axi_sel\", 16),\n\tGATE_INFRA3(CLK_INFRA_CCIF2_MD, \"infra_ccif2_md\", \"axi_sel\", 17),\n\tGATE_INFRA3(CLK_INFRA_CCIF3_AP, \"infra_ccif3_ap\", \"axi_sel\", 18),\n\tGATE_INFRA3(CLK_INFRA_CCIF3_MD, \"infra_ccif3_md\", \"axi_sel\", 19),\n\tGATE_INFRA3(CLK_INFRA_SEJ_F13M, \"infra_sej_f13m\", \"f_f26m_ck\", 20),\n\tGATE_INFRA3(CLK_INFRA_AES_BCLK, \"infra_aes_bclk\", \"axi_sel\", 21),\n\tGATE_INFRA3(CLK_INFRA_I2C7, \"infra_i2c7\", \"i2c_sel\", 22),\n\tGATE_INFRA3(CLK_INFRA_I2C8, \"infra_i2c8\", \"i2c_sel\", 23),\n\tGATE_INFRA3(CLK_INFRA_FBIST2FPC, \"infra_fbist2fpc\", \"msdc50_0_sel\", 24),\n};\n\nstatic const struct mtk_gate_regs peri_cg_regs = {\n\t.set_ofs = 0x20c,\n\t.clr_ofs = 0x20c,\n\t.sta_ofs = 0x20c,\n};\n\n#define GATE_PERI(_id, _name, _parent, _shift)\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &peri_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr_inv)\n\nstatic const struct mtk_gate peri_clks[] = {\n\tGATE_PERI(CLK_PERI_AXI, \"peri_axi\", \"axi_sel\", 31),\n};\n\nstatic u16 infra_rst_ofs[] = {\n\tINFRA_RST0_SET_OFFSET,\n\tINFRA_RST1_SET_OFFSET,\n\tINFRA_RST2_SET_OFFSET,\n\tINFRA_RST3_SET_OFFSET,\n};\n\nstatic const struct mtk_clk_rst_desc clk_rst_desc = {\n\t.version = MTK_RST_SET_CLR,\n\t.rst_bank_ofs = infra_rst_ofs,\n\t.rst_bank_nr = ARRAY_SIZE(infra_rst_ofs),\n};\n\n \nstatic int clk_mt8183_reg_mfg_mux_notifier(struct device *dev, struct clk *clk)\n{\n\tstruct mtk_mux_nb *mfg_mux_nb;\n\tint i;\n\n\tmfg_mux_nb = devm_kzalloc(dev, sizeof(*mfg_mux_nb), GFP_KERNEL);\n\tif (!mfg_mux_nb)\n\t\treturn -ENOMEM;\n\n\tfor (i = 0; i < ARRAY_SIZE(top_muxes); i++)\n\t\tif (top_muxes[i].id == CLK_TOP_MUX_MFG)\n\t\t\tbreak;\n\tif (i == ARRAY_SIZE(top_muxes))\n\t\treturn -EINVAL;\n\n\tmfg_mux_nb->ops = top_muxes[i].ops;\n\tmfg_mux_nb->bypass_index = 0;  \n\n\treturn devm_mtk_clk_mux_notifier_register(dev, clk, mfg_mux_nb);\n}\n\nstatic const struct mtk_clk_desc infra_desc = {\n\t.clks = infra_clks,\n\t.num_clks = ARRAY_SIZE(infra_clks),\n\t.rst_desc = &clk_rst_desc,\n};\n\nstatic const struct mtk_clk_desc mcu_desc = {\n\t.composite_clks = mcu_muxes,\n\t.num_composite_clks = ARRAY_SIZE(mcu_muxes),\n\t.clk_lock = &mt8183_clk_lock,\n};\n\nstatic const struct mtk_clk_desc peri_desc = {\n\t.clks = peri_clks,\n\t.num_clks = ARRAY_SIZE(peri_clks),\n};\n\nstatic const struct mtk_clk_desc topck_desc = {\n\t.fixed_clks = top_fixed_clks,\n\t.num_fixed_clks = ARRAY_SIZE(top_fixed_clks),\n\t.factor_clks = top_divs,\n\t.num_factor_clks = ARRAY_SIZE(top_divs),\n\t.mux_clks = top_muxes,\n\t.num_mux_clks = ARRAY_SIZE(top_muxes),\n\t.composite_clks = top_aud_comp,\n\t.num_composite_clks = ARRAY_SIZE(top_aud_comp),\n\t.clks = top_clks,\n\t.num_clks = ARRAY_SIZE(top_clks),\n\t.clk_lock = &mt8183_clk_lock,\n\t.clk_notifier_func = clk_mt8183_reg_mfg_mux_notifier,\n\t.mfg_clk_idx = CLK_TOP_MUX_MFG,\n};\n\nstatic const struct of_device_id of_match_clk_mt8183[] = {\n\t{ .compatible = \"mediatek,mt8183-infracfg\", .data = &infra_desc },\n\t{ .compatible = \"mediatek,mt8183-mcucfg\", .data = &mcu_desc },\n\t{ .compatible = \"mediatek,mt8183-pericfg\", .data = &peri_desc, },\n\t{ .compatible = \"mediatek,mt8183-topckgen\", .data = &topck_desc },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, of_match_clk_mt8183);\n\nstatic struct platform_driver clk_mt8183_drv = {\n\t.probe = mtk_clk_simple_probe,\n\t.remove_new = mtk_clk_simple_remove,\n\t.driver = {\n\t\t.name = \"clk-mt8183\",\n\t\t.of_match_table = of_match_clk_mt8183,\n\t},\n};\nmodule_platform_driver(clk_mt8183_drv)\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}