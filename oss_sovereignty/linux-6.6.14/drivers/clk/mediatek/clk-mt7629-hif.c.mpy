{
  "module_name": "clk-mt7629-hif.c",
  "hash_id": "ab4d0b2f503ea0ee9c2f9c64c082b81cf12617d09c7278f9caa37a5257e9f644",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/mediatek/clk-mt7629-hif.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/mod_devicetable.h>\n#include <linux/platform_device.h>\n\n#include \"clk-mtk.h\"\n#include \"clk-gate.h\"\n\n#include <dt-bindings/clock/mt7629-clk.h>\n\n#define GATE_PCIE(_id, _name, _parent, _shift)\t\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &pcie_cg_regs, _shift, &mtk_clk_gate_ops_no_setclr_inv)\n\n#define GATE_SSUSB(_id, _name, _parent, _shift)\t\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ssusb_cg_regs, _shift, &mtk_clk_gate_ops_no_setclr_inv)\n\nstatic const struct mtk_gate_regs pcie_cg_regs = {\n\t.set_ofs = 0x30,\n\t.clr_ofs = 0x30,\n\t.sta_ofs = 0x30,\n};\n\nstatic const struct mtk_gate_regs ssusb_cg_regs = {\n\t.set_ofs = 0x30,\n\t.clr_ofs = 0x30,\n\t.sta_ofs = 0x30,\n};\n\nstatic const struct mtk_gate ssusb_clks[] = {\n\tGATE_SSUSB(CLK_SSUSB_U2_PHY_1P_EN, \"ssusb_u2_phy_1p\",\n\t\t   \"to_u2_phy_1p\", 0),\n\tGATE_SSUSB(CLK_SSUSB_U2_PHY_EN, \"ssusb_u2_phy_en\", \"to_u2_phy\", 1),\n\tGATE_SSUSB(CLK_SSUSB_REF_EN, \"ssusb_ref_en\", \"to_usb3_ref\", 5),\n\tGATE_SSUSB(CLK_SSUSB_SYS_EN, \"ssusb_sys_en\", \"to_usb3_sys\", 6),\n\tGATE_SSUSB(CLK_SSUSB_MCU_EN, \"ssusb_mcu_en\", \"to_usb3_mcu\", 7),\n\tGATE_SSUSB(CLK_SSUSB_DMA_EN, \"ssusb_dma_en\", \"to_usb3_dma\", 8),\n};\n\nstatic const struct mtk_gate pcie_clks[] = {\n\tGATE_PCIE(CLK_PCIE_P1_AUX_EN, \"pcie_p1_aux_en\", \"p1_1mhz\", 12),\n\tGATE_PCIE(CLK_PCIE_P1_OBFF_EN, \"pcie_p1_obff_en\", \"free_run_4mhz\", 13),\n\tGATE_PCIE(CLK_PCIE_P1_AHB_EN, \"pcie_p1_ahb_en\", \"from_top_ahb\", 14),\n\tGATE_PCIE(CLK_PCIE_P1_AXI_EN, \"pcie_p1_axi_en\", \"from_top_axi\", 15),\n\tGATE_PCIE(CLK_PCIE_P1_MAC_EN, \"pcie_p1_mac_en\", \"pcie1_mac_en\", 16),\n\tGATE_PCIE(CLK_PCIE_P1_PIPE_EN, \"pcie_p1_pipe_en\", \"pcie1_pipe_en\", 17),\n\tGATE_PCIE(CLK_PCIE_P0_AUX_EN, \"pcie_p0_aux_en\", \"p0_1mhz\", 18),\n\tGATE_PCIE(CLK_PCIE_P0_OBFF_EN, \"pcie_p0_obff_en\", \"free_run_4mhz\", 19),\n\tGATE_PCIE(CLK_PCIE_P0_AHB_EN, \"pcie_p0_ahb_en\", \"from_top_ahb\", 20),\n\tGATE_PCIE(CLK_PCIE_P0_AXI_EN, \"pcie_p0_axi_en\", \"from_top_axi\", 21),\n\tGATE_PCIE(CLK_PCIE_P0_MAC_EN, \"pcie_p0_mac_en\", \"pcie0_mac_en\", 22),\n\tGATE_PCIE(CLK_PCIE_P0_PIPE_EN, \"pcie_p0_pipe_en\", \"pcie0_pipe_en\", 23),\n};\n\nstatic u16 rst_ofs[] = { 0x34, };\n\nstatic const struct mtk_clk_rst_desc clk_rst_desc = {\n\t.version = MTK_RST_SIMPLE,\n\t.rst_bank_ofs = rst_ofs,\n\t.rst_bank_nr = ARRAY_SIZE(rst_ofs),\n};\n\nstatic const struct mtk_clk_desc ssusb_desc = {\n\t.clks = ssusb_clks,\n\t.num_clks = ARRAY_SIZE(ssusb_clks),\n\t.rst_desc = &clk_rst_desc,\n};\n\nstatic const struct mtk_clk_desc pcie_desc = {\n\t.clks = pcie_clks,\n\t.num_clks = ARRAY_SIZE(pcie_clks),\n\t.rst_desc = &clk_rst_desc,\n};\n\nstatic const struct of_device_id of_match_clk_mt7629_hif[] = {\n\t{ .compatible = \"mediatek,mt7629-pciesys\", .data = &pcie_desc },\n\t{ .compatible = \"mediatek,mt7629-ssusbsys\", .data = &ssusb_desc },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, of_match_clk_mt7629_hif);\n\nstatic struct platform_driver clk_mt7629_hif_drv = {\n\t.probe = mtk_clk_simple_probe,\n\t.remove_new = mtk_clk_simple_remove,\n\t.driver = {\n\t\t.name = \"clk-mt7629-hif\",\n\t\t.of_match_table = of_match_clk_mt7629_hif,\n\t},\n};\nmodule_platform_driver(clk_mt7629_hif_drv);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}