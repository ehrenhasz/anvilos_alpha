{
  "module_name": "clk-mt8183-ipu_conn.c",
  "hash_id": "01cccdbb0147e988667bb36733ae3cd8f8a08865c86e3c6e73086921d8229a02",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/mediatek/clk-mt8183-ipu_conn.c",
  "human_readable_source": "\n\n\n\n\n#include <linux/clk-provider.h>\n#include <linux/platform_device.h>\n\n#include \"clk-mtk.h\"\n#include \"clk-gate.h\"\n\n#include <dt-bindings/clock/mt8183-clk.h>\n\nstatic const struct mtk_gate_regs ipu_conn_cg_regs = {\n\t.set_ofs = 0x4,\n\t.clr_ofs = 0x8,\n\t.sta_ofs = 0x0,\n};\n\nstatic const struct mtk_gate_regs ipu_conn_apb_cg_regs = {\n\t.set_ofs = 0x10,\n\t.clr_ofs = 0x10,\n\t.sta_ofs = 0x10,\n};\n\nstatic const struct mtk_gate_regs ipu_conn_axi_cg_regs = {\n\t.set_ofs = 0x18,\n\t.clr_ofs = 0x18,\n\t.sta_ofs = 0x18,\n};\n\nstatic const struct mtk_gate_regs ipu_conn_axi1_cg_regs = {\n\t.set_ofs = 0x1c,\n\t.clr_ofs = 0x1c,\n\t.sta_ofs = 0x1c,\n};\n\nstatic const struct mtk_gate_regs ipu_conn_axi2_cg_regs = {\n\t.set_ofs = 0x20,\n\t.clr_ofs = 0x20,\n\t.sta_ofs = 0x20,\n};\n\n#define GATE_IPU_CONN(_id, _name, _parent, _shift)\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ipu_conn_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_setclr)\n\n#define GATE_IPU_CONN_APB(_id, _name, _parent, _shift)\t\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ipu_conn_apb_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr)\n\n#define GATE_IPU_CONN_AXI_I(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ipu_conn_axi_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr_inv)\n\n#define GATE_IPU_CONN_AXI1_I(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ipu_conn_axi1_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr_inv)\n\n#define GATE_IPU_CONN_AXI2_I(_id, _name, _parent, _shift)\t\t\\\n\tGATE_MTK(_id, _name, _parent, &ipu_conn_axi2_cg_regs, _shift,\t\\\n\t\t&mtk_clk_gate_ops_no_setclr_inv)\n\nstatic const struct mtk_gate ipu_conn_clks[] = {\n\tGATE_IPU_CONN(CLK_IPU_CONN_IPU,\n\t\t\"ipu_conn_ipu\", \"dsp_sel\", 0),\n\tGATE_IPU_CONN(CLK_IPU_CONN_AHB,\n\t\t\"ipu_conn_ahb\", \"dsp_sel\", 1),\n\tGATE_IPU_CONN(CLK_IPU_CONN_AXI,\n\t\t\"ipu_conn_axi\", \"dsp_sel\", 2),\n\tGATE_IPU_CONN(CLK_IPU_CONN_ISP,\n\t\t\"ipu_conn_isp\", \"dsp_sel\", 3),\n\tGATE_IPU_CONN(CLK_IPU_CONN_CAM_ADL,\n\t\t\"ipu_conn_cam_adl\", \"dsp_sel\", 4),\n\tGATE_IPU_CONN(CLK_IPU_CONN_IMG_ADL,\n\t\t\"ipu_conn_img_adl\", \"dsp_sel\", 5),\n\tGATE_IPU_CONN_APB(CLK_IPU_CONN_DAP_RX,\n\t\t\"ipu_conn_dap_rx\", \"dsp1_sel\", 0),\n\tGATE_IPU_CONN_APB(CLK_IPU_CONN_APB2AXI,\n\t\t\"ipu_conn_apb2axi\", \"dsp1_sel\", 3),\n\tGATE_IPU_CONN_APB(CLK_IPU_CONN_APB2AHB,\n\t\t\"ipu_conn_apb2ahb\", \"dsp1_sel\", 20),\n\tGATE_IPU_CONN_AXI_I(CLK_IPU_CONN_IPU_CAB1TO2,\n\t\t\"ipu_conn_ipu_cab1to2\", \"dsp1_sel\", 6),\n\tGATE_IPU_CONN_AXI_I(CLK_IPU_CONN_IPU1_CAB1TO2,\n\t\t\"ipu_conn_ipu1_cab1to2\", \"dsp1_sel\", 13),\n\tGATE_IPU_CONN_AXI_I(CLK_IPU_CONN_IPU2_CAB1TO2,\n\t\t\"ipu_conn_ipu2_cab1to2\", \"dsp1_sel\", 20),\n\tGATE_IPU_CONN_AXI1_I(CLK_IPU_CONN_CAB3TO3,\n\t\t\"ipu_conn_cab3to3\", \"dsp1_sel\", 0),\n\tGATE_IPU_CONN_AXI2_I(CLK_IPU_CONN_CAB2TO1,\n\t\t\"ipu_conn_cab2to1\", \"dsp1_sel\", 14),\n\tGATE_IPU_CONN_AXI2_I(CLK_IPU_CONN_CAB3TO1_SLICE,\n\t\t\"ipu_conn_cab3to1_slice\", \"dsp1_sel\", 17),\n};\n\nstatic const struct mtk_clk_desc ipu_conn_desc = {\n\t.clks = ipu_conn_clks,\n\t.num_clks = ARRAY_SIZE(ipu_conn_clks),\n};\n\nstatic const struct of_device_id of_match_clk_mt8183_ipu_conn[] = {\n\t{\n\t\t.compatible = \"mediatek,mt8183-ipu_conn\",\n\t\t.data = &ipu_conn_desc,\n\t}, {\n\t\t \n\t}\n};\nMODULE_DEVICE_TABLE(of, of_match_clk_mt8183_ipu_conn);\n\nstatic struct platform_driver clk_mt8183_ipu_conn_drv = {\n\t.probe = mtk_clk_simple_probe,\n\t.remove_new = mtk_clk_simple_remove,\n\t.driver = {\n\t\t.name = \"clk-mt8183-ipu_conn\",\n\t\t.of_match_table = of_match_clk_mt8183_ipu_conn,\n\t},\n};\nmodule_platform_driver(clk_mt8183_ipu_conn_drv);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}