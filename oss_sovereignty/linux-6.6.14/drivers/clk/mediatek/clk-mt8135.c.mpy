{
  "module_name": "clk-mt8135.c",
  "hash_id": "a56dc093f2ec7ff75aaf9c70e992aebdb6628832d103ff0660adb23b4fd7df7e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/mediatek/clk-mt8135.c",
  "human_readable_source": "\n \n\n#include <linux/clk.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/of_address.h>\n#include <linux/platform_device.h>\n#include <linux/slab.h>\n#include <linux/mfd/syscon.h>\n#include <dt-bindings/clock/mt8135-clk.h>\n\n#include \"clk-gate.h\"\n#include \"clk-mtk.h\"\n#include \"clk-pll.h\"\n\nstatic DEFINE_SPINLOCK(mt8135_clk_lock);\n\nstatic const struct mtk_fixed_factor top_divs[] = {\n\tFACTOR(CLK_DUMMY, \"top_divs_dummy\", \"clk_null\", 1, 1),\n\tFACTOR(CLK_TOP_DSI0_LNTC_DSICLK, \"dsi0_lntc_dsiclk\", \"clk_null\", 1, 1),\n\tFACTOR(CLK_TOP_HDMITX_CLKDIG_CTS, \"hdmitx_clkdig_cts\", \"clk_null\", 1, 1),\n\tFACTOR(CLK_TOP_CLKPH_MCK, \"clkph_mck\", \"clk_null\", 1, 1),\n\tFACTOR(CLK_TOP_CPUM_TCK_IN, \"cpum_tck_in\", \"clk_null\", 1, 1),\n\n\tFACTOR(CLK_TOP_MAINPLL_806M, \"mainpll_806m\", \"mainpll\", 1, 2),\n\tFACTOR(CLK_TOP_MAINPLL_537P3M, \"mainpll_537p3m\", \"mainpll\", 1, 3),\n\tFACTOR(CLK_TOP_MAINPLL_322P4M, \"mainpll_322p4m\", \"mainpll\", 1, 5),\n\tFACTOR(CLK_TOP_MAINPLL_230P3M, \"mainpll_230p3m\", \"mainpll\", 1, 7),\n\n\tFACTOR(CLK_TOP_UNIVPLL_624M, \"univpll_624m\", \"univpll\", 1, 2),\n\tFACTOR(CLK_TOP_UNIVPLL_416M, \"univpll_416m\", \"univpll\", 1, 3),\n\tFACTOR(CLK_TOP_UNIVPLL_249P6M, \"univpll_249p6m\", \"univpll\", 1, 5),\n\tFACTOR(CLK_TOP_UNIVPLL_178P3M, \"univpll_178p3m\", \"univpll\", 1, 7),\n\tFACTOR(CLK_TOP_UNIVPLL_48M, \"univpll_48m\", \"univpll\", 1, 26),\n\n\tFACTOR(CLK_TOP_MMPLL_D2, \"mmpll_d2\", \"mmpll\", 1, 2),\n\tFACTOR(CLK_TOP_MMPLL_D3, \"mmpll_d3\", \"mmpll\", 1, 3),\n\tFACTOR(CLK_TOP_MMPLL_D5, \"mmpll_d5\", \"mmpll\", 1, 5),\n\tFACTOR(CLK_TOP_MMPLL_D7, \"mmpll_d7\", \"mmpll\", 1, 7),\n\tFACTOR(CLK_TOP_MMPLL_D4, \"mmpll_d4\", \"mmpll_d2\", 1, 2),\n\tFACTOR(CLK_TOP_MMPLL_D6, \"mmpll_d6\", \"mmpll_d3\", 1, 2),\n\n\tFACTOR(CLK_TOP_SYSPLL_D2, \"syspll_d2\", \"mainpll_806m\", 1, 1),\n\tFACTOR(CLK_TOP_SYSPLL_D4, \"syspll_d4\", \"mainpll_806m\", 1, 2),\n\tFACTOR(CLK_TOP_SYSPLL_D6, \"syspll_d6\", \"mainpll_806m\", 1, 3),\n\tFACTOR(CLK_TOP_SYSPLL_D8, \"syspll_d8\", \"mainpll_806m\", 1, 4),\n\tFACTOR(CLK_TOP_SYSPLL_D10, \"syspll_d10\", \"mainpll_806m\", 1, 5),\n\tFACTOR(CLK_TOP_SYSPLL_D12, \"syspll_d12\", \"mainpll_806m\", 1, 6),\n\tFACTOR(CLK_TOP_SYSPLL_D16, \"syspll_d16\", \"mainpll_806m\", 1, 8),\n\tFACTOR(CLK_TOP_SYSPLL_D24, \"syspll_d24\", \"mainpll_806m\", 1, 12),\n\n\tFACTOR(CLK_TOP_SYSPLL_D3, \"syspll_d3\", \"mainpll_537p3m\", 1, 1),\n\n\tFACTOR(CLK_TOP_SYSPLL_D2P5, \"syspll_d2p5\", \"mainpll_322p4m\", 2, 1),\n\tFACTOR(CLK_TOP_SYSPLL_D5, \"syspll_d5\", \"mainpll_322p4m\", 1, 1),\n\n\tFACTOR(CLK_TOP_SYSPLL_D3P5, \"syspll_d3p5\", \"mainpll_230p3m\", 2, 1),\n\n\tFACTOR(CLK_TOP_UNIVPLL1_D2, \"univpll1_d2\", \"univpll_624m\", 1, 2),\n\tFACTOR(CLK_TOP_UNIVPLL1_D4, \"univpll1_d4\", \"univpll_624m\", 1, 4),\n\tFACTOR(CLK_TOP_UNIVPLL1_D6, \"univpll1_d6\", \"univpll_624m\", 1, 6),\n\tFACTOR(CLK_TOP_UNIVPLL1_D8, \"univpll1_d8\", \"univpll_624m\", 1, 8),\n\tFACTOR(CLK_TOP_UNIVPLL1_D10, \"univpll1_d10\", \"univpll_624m\", 1, 10),\n\n\tFACTOR(CLK_TOP_UNIVPLL2_D2, \"univpll2_d2\", \"univpll_416m\", 1, 2),\n\tFACTOR(CLK_TOP_UNIVPLL2_D4, \"univpll2_d4\", \"univpll_416m\", 1, 4),\n\tFACTOR(CLK_TOP_UNIVPLL2_D6, \"univpll2_d6\", \"univpll_416m\", 1, 6),\n\tFACTOR(CLK_TOP_UNIVPLL2_D8, \"univpll2_d8\", \"univpll_416m\", 1, 8),\n\n\tFACTOR(CLK_TOP_UNIVPLL_D3, \"univpll_d3\", \"univpll_416m\", 1, 1),\n\tFACTOR(CLK_TOP_UNIVPLL_D5, \"univpll_d5\", \"univpll_249p6m\", 1, 1),\n\tFACTOR(CLK_TOP_UNIVPLL_D7, \"univpll_d7\", \"univpll_178p3m\", 1, 1),\n\tFACTOR(CLK_TOP_UNIVPLL_D10, \"univpll_d10\", \"univpll_249p6m\", 1, 2),\n\tFACTOR(CLK_TOP_UNIVPLL_D26, \"univpll_d26\", \"univpll_48m\", 1, 1),\n\n\tFACTOR(CLK_TOP_APLL, \"apll_ck\", \"audpll\", 1, 1),\n\tFACTOR(CLK_TOP_APLL_D4, \"apll_d4\", \"audpll\", 1, 4),\n\tFACTOR(CLK_TOP_APLL_D8, \"apll_d8\", \"audpll\", 1, 8),\n\tFACTOR(CLK_TOP_APLL_D16, \"apll_d16\", \"audpll\", 1, 16),\n\tFACTOR(CLK_TOP_APLL_D24, \"apll_d24\", \"audpll\", 1, 24),\n\n\tFACTOR(CLK_TOP_LVDSPLL_D2, \"lvdspll_d2\", \"lvdspll\", 1, 2),\n\tFACTOR(CLK_TOP_LVDSPLL_D4, \"lvdspll_d4\", \"lvdspll\", 1, 4),\n\tFACTOR(CLK_TOP_LVDSPLL_D8, \"lvdspll_d8\", \"lvdspll\", 1, 8),\n\n\tFACTOR(CLK_TOP_LVDSTX_CLKDIG_CT, \"lvdstx_clkdig_cts\", \"lvdspll\", 1, 1),\n\tFACTOR(CLK_TOP_VPLL_DPIX, \"vpll_dpix_ck\", \"lvdspll\", 1, 1),\n\n\tFACTOR(CLK_TOP_TVHDMI_H, \"tvhdmi_h_ck\", \"tvdpll\", 1, 1),\n\n\tFACTOR(CLK_TOP_HDMITX_CLKDIG_D2, \"hdmitx_clkdig_d2\", \"hdmitx_clkdig_cts\", 1, 2),\n\tFACTOR(CLK_TOP_HDMITX_CLKDIG_D3, \"hdmitx_clkdig_d3\", \"hdmitx_clkdig_cts\", 1, 3),\n\n\tFACTOR(CLK_TOP_TVHDMI_D2, \"tvhdmi_d2\", \"tvhdmi_h_ck\", 1, 2),\n\tFACTOR(CLK_TOP_TVHDMI_D4, \"tvhdmi_d4\", \"tvhdmi_h_ck\", 1, 4),\n\n\tFACTOR(CLK_TOP_MEMPLL_MCK_D4, \"mempll_mck_d4\", \"clkph_mck\", 1, 4),\n};\n\nstatic const char * const axi_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d3\",\n\t\"syspll_d4\",\n\t\"syspll_d6\",\n\t\"univpll_d5\",\n\t\"univpll2_d2\",\n\t\"syspll_d3p5\"\n};\n\nstatic const char * const smi_parents[] = {\n\t\"clk26m\",\n\t\"clkph_mck\",\n\t\"syspll_d2p5\",\n\t\"syspll_d3\",\n\t\"syspll_d8\",\n\t\"univpll_d5\",\n\t\"univpll1_d2\",\n\t\"univpll1_d6\",\n\t\"mmpll_d3\",\n\t\"mmpll_d4\",\n\t\"mmpll_d5\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\",\n\t\"vdecpll\",\n\t\"lvdspll\"\n};\n\nstatic const char * const mfg_parents[] = {\n\t\"clk26m\",\n\t\"univpll1_d4\",\n\t\"syspll_d2\",\n\t\"syspll_d2p5\",\n\t\"syspll_d3\",\n\t\"univpll_d5\",\n\t\"univpll1_d2\",\n\t\"mmpll_d2\",\n\t\"mmpll_d3\",\n\t\"mmpll_d4\",\n\t\"mmpll_d5\",\n\t\"mmpll_d6\",\n\t\"mmpll_d7\"\n};\n\nstatic const char * const irda_parents[] = {\n\t\"clk26m\",\n\t\"univpll2_d8\",\n\t\"univpll1_d6\"\n};\n\nstatic const char * const cam_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d3\",\n\t\"syspll_d3p5\",\n\t\"syspll_d4\",\n\t\"univpll_d5\",\n\t\"univpll2_d2\",\n\t\"univpll_d7\",\n\t\"univpll1_d4\"\n};\n\nstatic const char * const aud_intbus_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d6\",\n\t\"univpll_d10\"\n};\n\nstatic const char * const jpg_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d5\",\n\t\"syspll_d4\",\n\t\"syspll_d3\",\n\t\"univpll_d7\",\n\t\"univpll2_d2\",\n\t\"univpll_d5\"\n};\n\nstatic const char * const disp_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d3p5\",\n\t\"syspll_d3\",\n\t\"univpll2_d2\",\n\t\"univpll_d5\",\n\t\"univpll1_d2\",\n\t\"lvdspll\",\n\t\"vdecpll\"\n};\n\nstatic const char * const msdc30_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d6\",\n\t\"syspll_d5\",\n\t\"univpll1_d4\",\n\t\"univpll2_d4\",\n\t\"msdcpll\"\n};\n\nstatic const char * const usb20_parents[] = {\n\t\"clk26m\",\n\t\"univpll2_d6\",\n\t\"univpll1_d10\"\n};\n\nstatic const char * const venc_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d3\",\n\t\"syspll_d8\",\n\t\"univpll_d5\",\n\t\"univpll1_d6\",\n\t\"mmpll_d4\",\n\t\"mmpll_d5\",\n\t\"mmpll_d6\"\n};\n\nstatic const char * const spi_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d6\",\n\t\"syspll_d8\",\n\t\"syspll_d10\",\n\t\"univpll1_d6\",\n\t\"univpll1_d8\"\n};\n\nstatic const char * const uart_parents[] = {\n\t\"clk26m\",\n\t\"univpll2_d8\"\n};\n\nstatic const char * const mem_parents[] = {\n\t\"clk26m\",\n\t\"clkph_mck\"\n};\n\nstatic const char * const camtg_parents[] = {\n\t\"clk26m\",\n\t\"univpll_d26\",\n\t\"univpll1_d6\",\n\t\"syspll_d16\",\n\t\"syspll_d8\"\n};\n\nstatic const char * const audio_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d24\"\n};\n\nstatic const char * const fix_parents[] = {\n\t\"rtc32k\",\n\t\"clk26m\",\n\t\"univpll_d5\",\n\t\"univpll_d7\",\n\t\"univpll1_d2\",\n\t\"univpll1_d4\",\n\t\"univpll1_d6\",\n\t\"univpll1_d8\"\n};\n\nstatic const char * const vdec_parents[] = {\n\t\"clk26m\",\n\t\"vdecpll\",\n\t\"clkph_mck\",\n\t\"syspll_d2p5\",\n\t\"syspll_d3\",\n\t\"syspll_d3p5\",\n\t\"syspll_d4\",\n\t\"syspll_d5\",\n\t\"syspll_d6\",\n\t\"syspll_d8\",\n\t\"univpll1_d2\",\n\t\"univpll2_d2\",\n\t\"univpll_d7\",\n\t\"univpll_d10\",\n\t\"univpll2_d4\",\n\t\"lvdspll\"\n};\n\nstatic const char * const ddrphycfg_parents[] = {\n\t\"clk26m\",\n\t\"axi_sel\",\n\t\"syspll_d12\"\n};\n\nstatic const char * const dpilvds_parents[] = {\n\t\"clk26m\",\n\t\"lvdspll\",\n\t\"lvdspll_d2\",\n\t\"lvdspll_d4\",\n\t\"lvdspll_d8\"\n};\n\nstatic const char * const pmicspi_parents[] = {\n\t\"clk26m\",\n\t\"univpll2_d6\",\n\t\"syspll_d8\",\n\t\"syspll_d10\",\n\t\"univpll1_d10\",\n\t\"mempll_mck_d4\",\n\t\"univpll_d26\",\n\t\"syspll_d24\"\n};\n\nstatic const char * const smi_mfg_as_parents[] = {\n\t\"clk26m\",\n\t\"smi_sel\",\n\t\"mfg_sel\",\n\t\"mem_sel\"\n};\n\nstatic const char * const gcpu_parents[] = {\n\t\"clk26m\",\n\t\"syspll_d4\",\n\t\"univpll_d7\",\n\t\"syspll_d5\",\n\t\"syspll_d6\"\n};\n\nstatic const char * const dpi1_parents[] = {\n\t\"clk26m\",\n\t\"tvhdmi_h_ck\",\n\t\"tvhdmi_d2\",\n\t\"tvhdmi_d4\"\n};\n\nstatic const char * const cci_parents[] = {\n\t\"clk26m\",\n\t\"mainpll_537p3m\",\n\t\"univpll_d3\",\n\t\"syspll_d2p5\",\n\t\"syspll_d3\",\n\t\"syspll_d5\"\n};\n\nstatic const char * const apll_parents[] = {\n\t\"clk26m\",\n\t\"apll_ck\",\n\t\"apll_d4\",\n\t\"apll_d8\",\n\t\"apll_d16\",\n\t\"apll_d24\"\n};\n\nstatic const char * const hdmipll_parents[] = {\n\t\"clk26m\",\n\t\"hdmitx_clkdig_cts\",\n\t\"hdmitx_clkdig_d2\",\n\t\"hdmitx_clkdig_d3\"\n};\n\nstatic const struct mtk_composite top_muxes[] = {\n\t \n\tMUX_GATE(CLK_TOP_AXI_SEL, \"axi_sel\", axi_parents,\n\t\t0x0140, 0, 3, INVALID_MUX_GATE_BIT),\n\tMUX_GATE(CLK_TOP_SMI_SEL, \"smi_sel\", smi_parents, 0x0140, 8, 4, 15),\n\tMUX_GATE(CLK_TOP_MFG_SEL, \"mfg_sel\", mfg_parents, 0x0140, 16, 4, 23),\n\tMUX_GATE(CLK_TOP_IRDA_SEL, \"irda_sel\", irda_parents, 0x0140, 24, 2, 31),\n\t \n\tMUX_GATE(CLK_TOP_CAM_SEL, \"cam_sel\", cam_parents, 0x0144, 0, 3, 7),\n\tMUX_GATE(CLK_TOP_AUD_INTBUS_SEL, \"aud_intbus_sel\", aud_intbus_parents,\n\t\t0x0144, 8, 2, 15),\n\tMUX_GATE(CLK_TOP_JPG_SEL, \"jpg_sel\", jpg_parents, 0x0144, 16, 3, 23),\n\tMUX_GATE(CLK_TOP_DISP_SEL, \"disp_sel\", disp_parents, 0x0144, 24, 3, 31),\n\t \n\tMUX_GATE(CLK_TOP_MSDC30_1_SEL, \"msdc30_1_sel\", msdc30_parents, 0x0148, 0, 3, 7),\n\tMUX_GATE(CLK_TOP_MSDC30_2_SEL, \"msdc30_2_sel\", msdc30_parents, 0x0148, 8, 3, 15),\n\tMUX_GATE(CLK_TOP_MSDC30_3_SEL, \"msdc30_3_sel\", msdc30_parents, 0x0148, 16, 3, 23),\n\tMUX_GATE(CLK_TOP_MSDC30_4_SEL, \"msdc30_4_sel\", msdc30_parents, 0x0148, 24, 3, 31),\n\t \n\tMUX_GATE(CLK_TOP_USB20_SEL, \"usb20_sel\", usb20_parents, 0x014c, 0, 2, 7),\n\t \n\tMUX_GATE(CLK_TOP_VENC_SEL, \"venc_sel\", venc_parents, 0x0150, 8, 3, 15),\n\tMUX_GATE(CLK_TOP_SPI_SEL, \"spi_sel\", spi_parents, 0x0150, 16, 3, 23),\n\tMUX_GATE(CLK_TOP_UART_SEL, \"uart_sel\", uart_parents, 0x0150, 24, 2, 31),\n\t \n\tMUX_GATE(CLK_TOP_MEM_SEL, \"mem_sel\", mem_parents, 0x0158, 0, 2, 7),\n\tMUX_GATE(CLK_TOP_CAMTG_SEL, \"camtg_sel\", camtg_parents, 0x0158, 8, 3, 15),\n\tMUX_GATE(CLK_TOP_AUDIO_SEL, \"audio_sel\", audio_parents, 0x0158, 24, 2, 31),\n\t \n\tMUX_GATE(CLK_TOP_FIX_SEL, \"fix_sel\", fix_parents, 0x015c, 0, 3, 7),\n\tMUX_GATE(CLK_TOP_VDEC_SEL, \"vdec_sel\", vdec_parents, 0x015c, 8, 4, 15),\n\tMUX_GATE(CLK_TOP_DDRPHYCFG_SEL, \"ddrphycfg_sel\", ddrphycfg_parents,\n\t\t0x015c, 16, 2, 23),\n\tMUX_GATE(CLK_TOP_DPILVDS_SEL, \"dpilvds_sel\", dpilvds_parents, 0x015c, 24, 3, 31),\n\t \n\tMUX_GATE(CLK_TOP_PMICSPI_SEL, \"pmicspi_sel\", pmicspi_parents, 0x0164, 0, 3, 7),\n\tMUX_GATE(CLK_TOP_MSDC30_0_SEL, \"msdc30_0_sel\", msdc30_parents, 0x0164, 8, 3, 15),\n\tMUX_GATE(CLK_TOP_SMI_MFG_AS_SEL, \"smi_mfg_as_sel\", smi_mfg_as_parents,\n\t\t0x0164, 16, 2, 23),\n\tMUX_GATE(CLK_TOP_GCPU_SEL, \"gcpu_sel\", gcpu_parents, 0x0164, 24, 3, 31),\n\t \n\tMUX_GATE(CLK_TOP_DPI1_SEL, \"dpi1_sel\", dpi1_parents, 0x0168, 0, 2, 7),\n\tMUX_GATE_FLAGS(CLK_TOP_CCI_SEL, \"cci_sel\", cci_parents, 0x0168, 8, 3, 15, CLK_IS_CRITICAL),\n\tMUX_GATE(CLK_TOP_APLL_SEL, \"apll_sel\", apll_parents, 0x0168, 16, 3, 23),\n\tMUX_GATE(CLK_TOP_HDMIPLL_SEL, \"hdmipll_sel\", hdmipll_parents, 0x0168, 24, 2, 31),\n};\n\nstatic const struct mtk_gate_regs infra_cg_regs = {\n\t.set_ofs = 0x0040,\n\t.clr_ofs = 0x0044,\n\t.sta_ofs = 0x0048,\n};\n\n#define GATE_ICG(_id, _name, _parent, _shift)\t\\\n\tGATE_MTK(_id, _name, _parent, &infra_cg_regs, _shift, &mtk_clk_gate_ops_setclr)\n\n#define GATE_ICG_AO(_id, _name, _parent, _shift)\t\\\n\tGATE_MTK_FLAGS(_id, _name, _parent, &infra_cg_regs, _shift,\t\\\n\t\t       &mtk_clk_gate_ops_setclr, CLK_IS_CRITICAL)\n\nstatic const struct mtk_gate infra_clks[] = {\n\tGATE_DUMMY(CLK_DUMMY, \"infra_dummy\"),\n\tGATE_ICG(CLK_INFRA_PMIC_WRAP, \"pmic_wrap_ck\", \"axi_sel\", 23),\n\tGATE_ICG(CLK_INFRA_PMICSPI, \"pmicspi_ck\", \"pmicspi_sel\", 22),\n\tGATE_ICG(CLK_INFRA_CCIF1_AP_CTRL, \"ccif1_ap_ctrl\", \"axi_sel\", 21),\n\tGATE_ICG(CLK_INFRA_CCIF0_AP_CTRL, \"ccif0_ap_ctrl\", \"axi_sel\", 20),\n\tGATE_ICG(CLK_INFRA_KP, \"kp_ck\", \"axi_sel\", 16),\n\tGATE_ICG(CLK_INFRA_CPUM, \"cpum_ck\", \"cpum_tck_in\", 15),\n\tGATE_ICG_AO(CLK_INFRA_M4U, \"m4u_ck\", \"mem_sel\", 8),\n\tGATE_ICG(CLK_INFRA_MFGAXI, \"mfgaxi_ck\", \"axi_sel\", 7),\n\tGATE_ICG(CLK_INFRA_DEVAPC, \"devapc_ck\", \"axi_sel\", 6),\n\tGATE_ICG(CLK_INFRA_AUDIO, \"audio_ck\", \"aud_intbus_sel\", 5),\n\tGATE_ICG(CLK_INFRA_MFG_BUS, \"mfg_bus_ck\", \"axi_sel\", 2),\n\tGATE_ICG(CLK_INFRA_SMI, \"smi_ck\", \"smi_sel\", 1),\n\tGATE_ICG(CLK_INFRA_DBGCLK, \"dbgclk_ck\", \"axi_sel\", 0),\n};\n\nstatic const struct mtk_gate_regs peri0_cg_regs = {\n\t.set_ofs = 0x0008,\n\t.clr_ofs = 0x0010,\n\t.sta_ofs = 0x0018,\n};\n\nstatic const struct mtk_gate_regs peri1_cg_regs = {\n\t.set_ofs = 0x000c,\n\t.clr_ofs = 0x0014,\n\t.sta_ofs = 0x001c,\n};\n\n#define GATE_PERI0(_id, _name, _parent, _shift)\t\\\n\tGATE_MTK(_id, _name, _parent, &peri0_cg_regs, _shift, &mtk_clk_gate_ops_setclr)\n\n#define GATE_PERI1(_id, _name, _parent, _shift)\t\\\n\tGATE_MTK(_id, _name, _parent, &peri1_cg_regs, _shift, &mtk_clk_gate_ops_setclr)\n\nstatic const struct mtk_gate peri_gates[] = {\n\tGATE_DUMMY(CLK_DUMMY, \"peri_dummy\"),\n\t \n\tGATE_PERI0(CLK_PERI_I2C5, \"i2c5_ck\", \"axi_sel\", 31),\n\tGATE_PERI0(CLK_PERI_I2C4, \"i2c4_ck\", \"axi_sel\", 30),\n\tGATE_PERI0(CLK_PERI_I2C3, \"i2c3_ck\", \"axi_sel\", 29),\n\tGATE_PERI0(CLK_PERI_I2C2, \"i2c2_ck\", \"axi_sel\", 28),\n\tGATE_PERI0(CLK_PERI_I2C1, \"i2c1_ck\", \"axi_sel\", 27),\n\tGATE_PERI0(CLK_PERI_I2C0, \"i2c0_ck\", \"axi_sel\", 26),\n\tGATE_PERI0(CLK_PERI_UART3, \"uart3_ck\", \"axi_sel\", 25),\n\tGATE_PERI0(CLK_PERI_UART2, \"uart2_ck\", \"axi_sel\", 24),\n\tGATE_PERI0(CLK_PERI_UART1, \"uart1_ck\", \"axi_sel\", 23),\n\tGATE_PERI0(CLK_PERI_UART0, \"uart0_ck\", \"axi_sel\", 22),\n\tGATE_PERI0(CLK_PERI_IRDA, \"irda_ck\", \"irda_sel\", 21),\n\tGATE_PERI0(CLK_PERI_NLI, \"nli_ck\", \"axi_sel\", 20),\n\tGATE_PERI0(CLK_PERI_MD_HIF, \"md_hif_ck\", \"axi_sel\", 19),\n\tGATE_PERI0(CLK_PERI_AP_HIF, \"ap_hif_ck\", \"axi_sel\", 18),\n\tGATE_PERI0(CLK_PERI_MSDC30_3, \"msdc30_3_ck\", \"msdc30_4_sel\", 17),\n\tGATE_PERI0(CLK_PERI_MSDC30_2, \"msdc30_2_ck\", \"msdc30_3_sel\", 16),\n\tGATE_PERI0(CLK_PERI_MSDC30_1, \"msdc30_1_ck\", \"msdc30_2_sel\", 15),\n\tGATE_PERI0(CLK_PERI_MSDC20_2, \"msdc20_2_ck\", \"msdc30_1_sel\", 14),\n\tGATE_PERI0(CLK_PERI_MSDC20_1, \"msdc20_1_ck\", \"msdc30_0_sel\", 13),\n\tGATE_PERI0(CLK_PERI_AP_DMA, \"ap_dma_ck\", \"axi_sel\", 12),\n\tGATE_PERI0(CLK_PERI_USB1, \"usb1_ck\", \"usb20_sel\", 11),\n\tGATE_PERI0(CLK_PERI_USB0, \"usb0_ck\", \"usb20_sel\", 10),\n\tGATE_PERI0(CLK_PERI_PWM, \"pwm_ck\", \"axi_sel\", 9),\n\tGATE_PERI0(CLK_PERI_PWM7, \"pwm7_ck\", \"axi_sel\", 8),\n\tGATE_PERI0(CLK_PERI_PWM6, \"pwm6_ck\", \"axi_sel\", 7),\n\tGATE_PERI0(CLK_PERI_PWM5, \"pwm5_ck\", \"axi_sel\", 6),\n\tGATE_PERI0(CLK_PERI_PWM4, \"pwm4_ck\", \"axi_sel\", 5),\n\tGATE_PERI0(CLK_PERI_PWM3, \"pwm3_ck\", \"axi_sel\", 4),\n\tGATE_PERI0(CLK_PERI_PWM2, \"pwm2_ck\", \"axi_sel\", 3),\n\tGATE_PERI0(CLK_PERI_PWM1, \"pwm1_ck\", \"axi_sel\", 2),\n\tGATE_PERI0(CLK_PERI_THERM, \"therm_ck\", \"axi_sel\", 1),\n\tGATE_PERI0(CLK_PERI_NFI, \"nfi_ck\", \"axi_sel\", 0),\n\t \n\tGATE_PERI1(CLK_PERI_USBSLV, \"usbslv_ck\", \"axi_sel\", 8),\n\tGATE_PERI1(CLK_PERI_USB1_MCU, \"usb1_mcu_ck\", \"axi_sel\", 7),\n\tGATE_PERI1(CLK_PERI_USB0_MCU, \"usb0_mcu_ck\", \"axi_sel\", 6),\n\tGATE_PERI1(CLK_PERI_GCPU, \"gcpu_ck\", \"gcpu_sel\", 5),\n\tGATE_PERI1(CLK_PERI_FHCTL, \"fhctl_ck\", \"clk26m\", 4),\n\tGATE_PERI1(CLK_PERI_SPI1, \"spi1_ck\", \"spi_sel\", 3),\n\tGATE_PERI1(CLK_PERI_AUXADC, \"auxadc_ck\", \"clk26m\", 2),\n\tGATE_PERI1(CLK_PERI_PERI_PWRAP, \"peri_pwrap_ck\", \"axi_sel\", 1),\n\tGATE_PERI1(CLK_PERI_I2C6, \"i2c6_ck\", \"axi_sel\", 0),\n};\n\nstatic const char * const uart_ck_sel_parents[] = {\n\t\"clk26m\",\n\t\"uart_sel\",\n};\n\nstatic const struct mtk_composite peri_clks[] = {\n\tMUX(CLK_PERI_UART0_SEL, \"uart0_ck_sel\", uart_ck_sel_parents, 0x40c, 0, 1),\n\tMUX(CLK_PERI_UART1_SEL, \"uart1_ck_sel\", uart_ck_sel_parents, 0x40c, 1, 1),\n\tMUX(CLK_PERI_UART2_SEL, \"uart2_ck_sel\", uart_ck_sel_parents, 0x40c, 2, 1),\n\tMUX(CLK_PERI_UART3_SEL, \"uart3_ck_sel\", uart_ck_sel_parents, 0x40c, 3, 1),\n};\n\nstatic u16 infrasys_rst_ofs[] = { 0x30, 0x34, };\nstatic u16 pericfg_rst_ofs[] = { 0x0, 0x4, };\n\nstatic const struct mtk_clk_rst_desc clk_rst_desc[] = {\n\t \n\t{\n\t\t.version = MTK_RST_SIMPLE,\n\t\t.rst_bank_ofs = infrasys_rst_ofs,\n\t\t.rst_bank_nr = ARRAY_SIZE(infrasys_rst_ofs),\n\t},\n\t \n\t{\n\t\t.version = MTK_RST_SIMPLE,\n\t\t.rst_bank_ofs = pericfg_rst_ofs,\n\t\t.rst_bank_nr = ARRAY_SIZE(pericfg_rst_ofs),\n\t}\n};\n\nstatic const struct mtk_clk_desc infra_desc = {\n\t.clks = infra_clks,\n\t.num_clks = ARRAY_SIZE(infra_clks),\n\t.rst_desc = &clk_rst_desc[0],\n};\n\nstatic const struct mtk_clk_desc peri_desc = {\n\t.clks = peri_gates,\n\t.num_clks = ARRAY_SIZE(peri_gates),\n\t.composite_clks = peri_clks,\n\t.num_composite_clks = ARRAY_SIZE(peri_clks),\n\t.clk_lock = &mt8135_clk_lock,\n\t.rst_desc = &clk_rst_desc[1],\n};\n\nstatic const struct mtk_clk_desc topck_desc = {\n\t.factor_clks = top_divs,\n\t.num_factor_clks = ARRAY_SIZE(top_divs),\n\t.composite_clks = top_muxes,\n\t.num_composite_clks = ARRAY_SIZE(top_muxes),\n\t.clk_lock = &mt8135_clk_lock,\n};\n\nstatic const struct of_device_id of_match_clk_mt8135[] = {\n\t{ .compatible = \"mediatek,mt8135-infracfg\", .data = &infra_desc },\n\t{ .compatible = \"mediatek,mt8135-pericfg\", .data = &peri_desc },\n\t{ .compatible = \"mediatek,mt8135-topckgen\", .data = &topck_desc },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, of_match_clk_mt8135);\n\nstatic struct platform_driver clk_mt8135_drv = {\n\t.driver = {\n\t\t.name = \"clk-mt8135\",\n\t\t.of_match_table = of_match_clk_mt8135,\n\t},\n\t.probe = mtk_clk_simple_probe,\n\t.remove_new = mtk_clk_simple_remove,\n};\nmodule_platform_driver(clk_mt8135_drv);\n\nMODULE_DESCRIPTION(\"MediaTek MT8135 clocks driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}