{
  "module_name": "clk-bcm21664.c",
  "hash_id": "8667ead8dcb7a4c29f06e8506737b7e8ad967e0f2845665edc3ac51ec7ac7577",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/bcm/clk-bcm21664.c",
  "human_readable_source": "\n \n\n#include \"clk-kona.h\"\n#include \"dt-bindings/clock/bcm21664.h\"\n\n#define BCM21664_CCU_COMMON(_name, _capname) \\\n\tKONA_CCU_COMMON(BCM21664, _name, _capname)\n\n \n\nstatic struct peri_clk_data frac_1m_data = {\n\t.gate\t\t= HW_SW_GATE(0x214, 16, 0, 1),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\"),\n};\n\nstatic struct ccu_data root_ccu_data = {\n\tBCM21664_CCU_COMMON(root, ROOT),\n\t \n\t.kona_clks\t= {\n\t\t[BCM21664_ROOT_CCU_FRAC_1M] =\n\t\t\tKONA_CLK(root, frac_1m, peri),\n\t\t[BCM21664_ROOT_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data hub_timer_data = {\n\t.gate\t\t= HW_SW_GATE(0x0414, 16, 0, 1),\n\t.hyst\t\t= HYST(0x0414, 8, 9),\n\t.clocks\t\t= CLOCKS(\"bbl_32k\",\n\t\t\t\t \"frac_1m\",\n\t\t\t\t \"dft_19_5m\"),\n\t.sel\t\t= SELECTOR(0x0a10, 0, 2),\n\t.trig\t\t= TRIGGER(0x0a40, 4),\n};\n\nstatic struct ccu_data aon_ccu_data = {\n\tBCM21664_CCU_COMMON(aon, AON),\n\t.policy\t\t= {\n\t\t.enable\t\t= CCU_LVM_EN(0x0034, 0),\n\t\t.control\t= CCU_POLICY_CTL(0x000c, 0, 1, 2),\n\t},\n\t.kona_clks\t= {\n\t\t[BCM21664_AON_CCU_HUB_TIMER] =\n\t\t\tKONA_CLK(aon, hub_timer, peri),\n\t\t[BCM21664_AON_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data sdio1_data = {\n\t.gate\t\t= HW_SW_GATE(0x0358, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a28, 0, 3),\n\t.div\t\t= DIVIDER(0x0a28, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 9),\n};\n\nstatic struct peri_clk_data sdio2_data = {\n\t.gate\t\t= HW_SW_GATE(0x035c, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a2c, 0, 3),\n\t.div\t\t= DIVIDER(0x0a2c, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 10),\n};\n\nstatic struct peri_clk_data sdio3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0364, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a34, 0, 3),\n\t.div\t\t= DIVIDER(0x0a34, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 12),\n};\n\nstatic struct peri_clk_data sdio4_data = {\n\t.gate\t\t= HW_SW_GATE(0x0360, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a30, 0, 3),\n\t.div\t\t= DIVIDER(0x0a30, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 11),\n};\n\nstatic struct peri_clk_data sdio1_sleep_data = {\n\t.clocks\t\t= CLOCKS(\"ref_32k\"),\t \n\t.gate\t\t= HW_SW_GATE(0x0358, 18, 2, 3),\n};\n\nstatic struct peri_clk_data sdio2_sleep_data = {\n\t.clocks\t\t= CLOCKS(\"ref_32k\"),\t \n\t.gate\t\t= HW_SW_GATE(0x035c, 18, 2, 3),\n};\n\nstatic struct peri_clk_data sdio3_sleep_data = {\n\t.clocks\t\t= CLOCKS(\"ref_32k\"),\t \n\t.gate\t\t= HW_SW_GATE(0x0364, 18, 2, 3),\n};\n\nstatic struct peri_clk_data sdio4_sleep_data = {\n\t.clocks\t\t= CLOCKS(\"ref_32k\"),\t \n\t.gate\t\t= HW_SW_GATE(0x0360, 18, 2, 3),\n};\n\nstatic struct ccu_data master_ccu_data = {\n\tBCM21664_CCU_COMMON(master, MASTER),\n\t.policy\t\t= {\n\t\t.enable\t\t= CCU_LVM_EN(0x0034, 0),\n\t\t.control\t= CCU_POLICY_CTL(0x000c, 0, 1, 2),\n\t},\n\t.kona_clks\t= {\n\t\t[BCM21664_MASTER_CCU_SDIO1] =\n\t\t\tKONA_CLK(master, sdio1, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO2] =\n\t\t\tKONA_CLK(master, sdio2, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO3] =\n\t\t\tKONA_CLK(master, sdio3, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO4] =\n\t\t\tKONA_CLK(master, sdio4, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO1_SLEEP] =\n\t\t\tKONA_CLK(master, sdio1_sleep, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO2_SLEEP] =\n\t\t\tKONA_CLK(master, sdio2_sleep, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO3_SLEEP] =\n\t\t\tKONA_CLK(master, sdio3_sleep, peri),\n\t\t[BCM21664_MASTER_CCU_SDIO4_SLEEP] =\n\t\t\tKONA_CLK(master, sdio4_sleep, peri),\n\t\t[BCM21664_MASTER_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data uartb_data = {\n\t.gate\t\t= HW_SW_GATE(0x0400, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a10, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a10, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 2),\n};\n\nstatic struct peri_clk_data uartb2_data = {\n\t.gate\t\t= HW_SW_GATE(0x0404, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a14, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a14, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 3),\n};\n\nstatic struct peri_clk_data uartb3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0408, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a18, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a18, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 4),\n};\n\nstatic struct peri_clk_data bsc1_data = {\n\t.gate\t\t= HW_SW_GATE(0x0458, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a64, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 23),\n};\n\nstatic struct peri_clk_data bsc2_data = {\n\t.gate\t\t= HW_SW_GATE(0x045c, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a68, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 24),\n};\n\nstatic struct peri_clk_data bsc3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0470, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a7c, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 18),\n};\n\nstatic struct peri_clk_data bsc4_data = {\n\t.gate\t\t= HW_SW_GATE(0x0474, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a80, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 19),\n};\n\nstatic struct ccu_data slave_ccu_data = {\n\tBCM21664_CCU_COMMON(slave, SLAVE),\n       .policy\t\t= {\n\t\t.enable\t\t= CCU_LVM_EN(0x0034, 0),\n\t\t.control\t= CCU_POLICY_CTL(0x000c, 0, 1, 2),\n\t},\n\t.kona_clks\t= {\n\t\t[BCM21664_SLAVE_CCU_UARTB] =\n\t\t\tKONA_CLK(slave, uartb, peri),\n\t\t[BCM21664_SLAVE_CCU_UARTB2] =\n\t\t\tKONA_CLK(slave, uartb2, peri),\n\t\t[BCM21664_SLAVE_CCU_UARTB3] =\n\t\t\tKONA_CLK(slave, uartb3, peri),\n\t\t[BCM21664_SLAVE_CCU_BSC1] =\n\t\t\tKONA_CLK(slave, bsc1, peri),\n\t\t[BCM21664_SLAVE_CCU_BSC2] =\n\t\t\tKONA_CLK(slave, bsc2, peri),\n\t\t[BCM21664_SLAVE_CCU_BSC3] =\n\t\t\tKONA_CLK(slave, bsc3, peri),\n\t\t[BCM21664_SLAVE_CCU_BSC4] =\n\t\t\tKONA_CLK(slave, bsc4, peri),\n\t\t[BCM21664_SLAVE_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic void __init kona_dt_root_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&root_ccu_data, node);\n}\n\nstatic void __init kona_dt_aon_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&aon_ccu_data, node);\n}\n\nstatic void __init kona_dt_master_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&master_ccu_data, node);\n}\n\nstatic void __init kona_dt_slave_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&slave_ccu_data, node);\n}\n\nCLK_OF_DECLARE(bcm21664_root_ccu, BCM21664_DT_ROOT_CCU_COMPAT,\n\t\t\tkona_dt_root_ccu_setup);\nCLK_OF_DECLARE(bcm21664_aon_ccu, BCM21664_DT_AON_CCU_COMPAT,\n\t\t\tkona_dt_aon_ccu_setup);\nCLK_OF_DECLARE(bcm21664_master_ccu, BCM21664_DT_MASTER_CCU_COMPAT,\n\t\t\tkona_dt_master_ccu_setup);\nCLK_OF_DECLARE(bcm21664_slave_ccu, BCM21664_DT_SLAVE_CCU_COMPAT,\n\t\t\tkona_dt_slave_ccu_setup);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}