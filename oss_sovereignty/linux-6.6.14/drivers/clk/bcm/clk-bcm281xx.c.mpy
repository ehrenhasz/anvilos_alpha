{
  "module_name": "clk-bcm281xx.c",
  "hash_id": "5af4c3a5ac8065f430a9a27a14f4cfe331bcda4f458c8b79a72ee44001ccc4b6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/bcm/clk-bcm281xx.c",
  "human_readable_source": "\n \n\n#include \"clk-kona.h\"\n#include \"dt-bindings/clock/bcm281xx.h\"\n\n#define BCM281XX_CCU_COMMON(_name, _ucase_name) \\\n\tKONA_CCU_COMMON(BCM281XX, _name, _ucase_name)\n\n \n\nstatic struct peri_clk_data frac_1m_data = {\n\t.gate\t\t= HW_SW_GATE(0x214, 16, 0, 1),\n\t.trig\t\t= TRIGGER(0x0e04, 0),\n\t.div\t\t= FRAC_DIVIDER(0x0e00, 0, 22, 16),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\"),\n};\n\nstatic struct ccu_data root_ccu_data = {\n\tBCM281XX_CCU_COMMON(root, ROOT),\n\t.kona_clks\t= {\n\t\t[BCM281XX_ROOT_CCU_FRAC_1M] =\n\t\t\tKONA_CLK(root, frac_1m, peri),\n\t\t[BCM281XX_ROOT_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data hub_timer_data = {\n\t.gate\t\t= HW_SW_GATE(0x0414, 16, 0, 1),\n\t.clocks\t\t= CLOCKS(\"bbl_32k\",\n\t\t\t\t \"frac_1m\",\n\t\t\t\t \"dft_19_5m\"),\n\t.sel\t\t= SELECTOR(0x0a10, 0, 2),\n\t.trig\t\t= TRIGGER(0x0a40, 4),\n};\n\nstatic struct peri_clk_data pmu_bsc_data = {\n\t.gate\t\t= HW_SW_GATE(0x0418, 16, 0, 1),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"pmu_bsc_var\",\n\t\t\t\t \"bbl_32k\"),\n\t.sel\t\t= SELECTOR(0x0a04, 0, 2),\n\t.div\t\t= DIVIDER(0x0a04, 3, 4),\n\t.trig\t\t= TRIGGER(0x0a40, 0),\n};\n\nstatic struct peri_clk_data pmu_bsc_var_data = {\n\t.clocks\t\t= CLOCKS(\"var_312m\",\n\t\t\t\t \"ref_312m\"),\n\t.sel\t\t= SELECTOR(0x0a00, 0, 2),\n\t.div\t\t= DIVIDER(0x0a00, 4, 5),\n\t.trig\t\t= TRIGGER(0x0a40, 2),\n};\n\nstatic struct ccu_data aon_ccu_data = {\n\tBCM281XX_CCU_COMMON(aon, AON),\n\t.kona_clks\t= {\n\t\t[BCM281XX_AON_CCU_HUB_TIMER] =\n\t\t\tKONA_CLK(aon, hub_timer, peri),\n\t\t[BCM281XX_AON_CCU_PMU_BSC] =\n\t\t\tKONA_CLK(aon, pmu_bsc, peri),\n\t\t[BCM281XX_AON_CCU_PMU_BSC_VAR] =\n\t\t\tKONA_CLK(aon, pmu_bsc_var, peri),\n\t\t[BCM281XX_AON_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data tmon_1m_data = {\n\t.gate\t\t= HW_SW_GATE(0x04a4, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"frac_1m\"),\n\t.sel\t\t= SELECTOR(0x0e74, 0, 2),\n\t.trig\t\t= TRIGGER(0x0e84, 1),\n};\n\nstatic struct ccu_data hub_ccu_data = {\n\tBCM281XX_CCU_COMMON(hub, HUB),\n\t.kona_clks\t= {\n\t\t[BCM281XX_HUB_CCU_TMON_1M] =\n\t\t\tKONA_CLK(hub, tmon_1m, peri),\n\t\t[BCM281XX_HUB_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data sdio1_data = {\n\t.gate\t\t= HW_SW_GATE(0x0358, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a28, 0, 3),\n\t.div\t\t= DIVIDER(0x0a28, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 9),\n};\n\nstatic struct peri_clk_data sdio2_data = {\n\t.gate\t\t= HW_SW_GATE(0x035c, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a2c, 0, 3),\n\t.div\t\t= DIVIDER(0x0a2c, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 10),\n};\n\nstatic struct peri_clk_data sdio3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0364, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a34, 0, 3),\n\t.div\t\t= DIVIDER(0x0a34, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 12),\n};\n\nstatic struct peri_clk_data sdio4_data = {\n\t.gate\t\t= HW_SW_GATE(0x0360, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_52m\",\n\t\t\t\t \"ref_52m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a30, 0, 3),\n\t.div\t\t= DIVIDER(0x0a30, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 11),\n};\n\nstatic struct peri_clk_data usb_ic_data = {\n\t.gate\t\t= HW_SW_GATE(0x0354, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.div\t\t= FIXED_DIVIDER(2),\n\t.sel\t\t= SELECTOR(0x0a24, 0, 2),\n\t.trig\t\t= TRIGGER(0x0afc, 7),\n};\n\n \nstatic struct peri_clk_data hsic2_48m_data = {\n\t.gate\t\t= HW_SW_GATE(0x0370, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a38, 0, 2),\n\t.div\t\t= FIXED_DIVIDER(2),\n\t.trig\t\t= TRIGGER(0x0afc, 5),\n};\n\n \nstatic struct peri_clk_data hsic2_12m_data = {\n\t.gate\t\t= HW_SW_GATE(0x0370, 20, 4, 5),\n\t.div\t\t= DIVIDER(0x0a38, 12, 2),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.pre_div\t= FIXED_DIVIDER(2),\n\t.sel\t\t= SELECTOR(0x0a38, 0, 2),\n\t.trig\t\t= TRIGGER(0x0afc, 5),\n};\n\nstatic struct ccu_data master_ccu_data = {\n\tBCM281XX_CCU_COMMON(master, MASTER),\n\t.kona_clks\t= {\n\t\t[BCM281XX_MASTER_CCU_SDIO1] =\n\t\t\tKONA_CLK(master, sdio1, peri),\n\t\t[BCM281XX_MASTER_CCU_SDIO2] =\n\t\t\tKONA_CLK(master, sdio2, peri),\n\t\t[BCM281XX_MASTER_CCU_SDIO3] =\n\t\t\tKONA_CLK(master, sdio3, peri),\n\t\t[BCM281XX_MASTER_CCU_SDIO4] =\n\t\t\tKONA_CLK(master, sdio4, peri),\n\t\t[BCM281XX_MASTER_CCU_USB_IC] =\n\t\t\tKONA_CLK(master, usb_ic, peri),\n\t\t[BCM281XX_MASTER_CCU_HSIC2_48M] =\n\t\t\tKONA_CLK(master, hsic2_48m, peri),\n\t\t[BCM281XX_MASTER_CCU_HSIC2_12M] =\n\t\t\tKONA_CLK(master, hsic2_12m, peri),\n\t\t[BCM281XX_MASTER_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic struct peri_clk_data uartb_data = {\n\t.gate\t\t= HW_SW_GATE(0x0400, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a10, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a10, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 2),\n};\n\nstatic struct peri_clk_data uartb2_data = {\n\t.gate\t\t= HW_SW_GATE(0x0404, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a14, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a14, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 3),\n};\n\nstatic struct peri_clk_data uartb3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0408, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a18, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a18, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 4),\n};\n\nstatic struct peri_clk_data uartb4_data = {\n\t.gate\t\t= HW_SW_GATE(0x0408, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_156m\",\n\t\t\t\t \"ref_156m\"),\n\t.sel\t\t= SELECTOR(0x0a1c, 0, 2),\n\t.div\t\t= FRAC_DIVIDER(0x0a1c, 4, 12, 8),\n\t.trig\t\t= TRIGGER(0x0afc, 5),\n};\n\nstatic struct peri_clk_data ssp0_data = {\n\t.gate\t\t= HW_SW_GATE(0x0410, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a20, 0, 3),\n\t.div\t\t= DIVIDER(0x0a20, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 6),\n};\n\nstatic struct peri_clk_data ssp2_data = {\n\t.gate\t\t= HW_SW_GATE(0x0418, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_96m\",\n\t\t\t\t \"ref_96m\"),\n\t.sel\t\t= SELECTOR(0x0a28, 0, 3),\n\t.div\t\t= DIVIDER(0x0a28, 4, 14),\n\t.trig\t\t= TRIGGER(0x0afc, 8),\n};\n\nstatic struct peri_clk_data bsc1_data = {\n\t.gate\t\t= HW_SW_GATE(0x0458, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a64, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 23),\n};\n\nstatic struct peri_clk_data bsc2_data = {\n\t.gate\t\t= HW_SW_GATE(0x045c, 18, 2, 3),\n\t.clocks\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a68, 0, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 24),\n};\n\nstatic struct peri_clk_data bsc3_data = {\n\t.gate\t\t= HW_SW_GATE(0x0484, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\",\n\t\t\t\t \"ref_104m\",\n\t\t\t\t \"var_13m\",\n\t\t\t\t \"ref_13m\"),\n\t.sel\t\t= SELECTOR(0x0a84, 0, 3),\n\t.trig\t\t= TRIGGER(0x0b00, 2),\n};\n\nstatic struct peri_clk_data pwm_data = {\n\t.gate\t\t= HW_SW_GATE(0x0468, 18, 2, 3),\n\t.clocks\t\t= CLOCKS(\"ref_crystal\",\n\t\t\t\t \"var_104m\"),\n\t.sel\t\t= SELECTOR(0x0a70, 0, 2),\n\t.div\t\t= DIVIDER(0x0a70, 4, 3),\n\t.trig\t\t= TRIGGER(0x0afc, 15),\n};\n\nstatic struct ccu_data slave_ccu_data = {\n\tBCM281XX_CCU_COMMON(slave, SLAVE),\n\t.kona_clks\t= {\n\t\t[BCM281XX_SLAVE_CCU_UARTB] =\n\t\t\tKONA_CLK(slave, uartb, peri),\n\t\t[BCM281XX_SLAVE_CCU_UARTB2] =\n\t\t\tKONA_CLK(slave, uartb2, peri),\n\t\t[BCM281XX_SLAVE_CCU_UARTB3] =\n\t\t\tKONA_CLK(slave, uartb3, peri),\n\t\t[BCM281XX_SLAVE_CCU_UARTB4] =\n\t\t\tKONA_CLK(slave, uartb4, peri),\n\t\t[BCM281XX_SLAVE_CCU_SSP0] =\n\t\t\tKONA_CLK(slave, ssp0, peri),\n\t\t[BCM281XX_SLAVE_CCU_SSP2] =\n\t\t\tKONA_CLK(slave, ssp2, peri),\n\t\t[BCM281XX_SLAVE_CCU_BSC1] =\n\t\t\tKONA_CLK(slave, bsc1, peri),\n\t\t[BCM281XX_SLAVE_CCU_BSC2] =\n\t\t\tKONA_CLK(slave, bsc2, peri),\n\t\t[BCM281XX_SLAVE_CCU_BSC3] =\n\t\t\tKONA_CLK(slave, bsc3, peri),\n\t\t[BCM281XX_SLAVE_CCU_PWM] =\n\t\t\tKONA_CLK(slave, pwm, peri),\n\t\t[BCM281XX_SLAVE_CCU_CLOCK_COUNT] = LAST_KONA_CLK,\n\t},\n};\n\n \n\nstatic void __init kona_dt_root_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&root_ccu_data, node);\n}\n\nstatic void __init kona_dt_aon_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&aon_ccu_data, node);\n}\n\nstatic void __init kona_dt_hub_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&hub_ccu_data, node);\n}\n\nstatic void __init kona_dt_master_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&master_ccu_data, node);\n}\n\nstatic void __init kona_dt_slave_ccu_setup(struct device_node *node)\n{\n\tkona_dt_ccu_setup(&slave_ccu_data, node);\n}\n\nCLK_OF_DECLARE(bcm281xx_root_ccu, BCM281XX_DT_ROOT_CCU_COMPAT,\n\t\t\tkona_dt_root_ccu_setup);\nCLK_OF_DECLARE(bcm281xx_aon_ccu, BCM281XX_DT_AON_CCU_COMPAT,\n\t\t\tkona_dt_aon_ccu_setup);\nCLK_OF_DECLARE(bcm281xx_hub_ccu, BCM281XX_DT_HUB_CCU_COMPAT,\n\t\t\tkona_dt_hub_ccu_setup);\nCLK_OF_DECLARE(bcm281xx_master_ccu, BCM281XX_DT_MASTER_CCU_COMPAT,\n\t\t\tkona_dt_master_ccu_setup);\nCLK_OF_DECLARE(bcm281xx_slave_ccu, BCM281XX_DT_SLAVE_CCU_COMPAT,\n\t\t\tkona_dt_slave_ccu_setup);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}