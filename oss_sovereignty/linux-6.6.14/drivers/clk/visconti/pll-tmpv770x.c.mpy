{
  "module_name": "pll-tmpv770x.c",
  "hash_id": "8034bdc8ef395de9bbb9f94b128b8209701f56730c379a41360d850d0d8938f7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/visconti/pll-tmpv770x.c",
  "human_readable_source": "\n \n\n#include <linux/clk-provider.h>\n#include <linux/of_address.h>\n#include <linux/slab.h>\n\n#include <dt-bindings/clock/toshiba,tmpv770x.h>\n\n#include \"pll.h\"\n\nstatic DEFINE_SPINLOCK(tmpv770x_pll_lock);\n\nstatic const struct visconti_pll_rate_table pipll0_rates[] __initconst = {\n\tVISCONTI_PLL_RATE(840000000, 0x1, 0x0, 0x1, 0x54, 0x000000, 0x2, 0x1),\n\tVISCONTI_PLL_RATE(780000000, 0x1, 0x0, 0x1, 0x4e, 0x000000, 0x2, 0x1),\n\tVISCONTI_PLL_RATE(600000000, 0x1, 0x0, 0x1, 0x3c, 0x000000, 0x2, 0x1),\n\t{   },\n};\n\nstatic const struct visconti_pll_rate_table piddrcpll_rates[] __initconst = {\n\tVISCONTI_PLL_RATE(780000000, 0x1, 0x0, 0x1, 0x4e, 0x000000, 0x2, 0x1),\n\tVISCONTI_PLL_RATE(760000000, 0x1, 0x0, 0x1, 0x4c, 0x000000, 0x2, 0x1),\n\t{   },\n};\n\nstatic const struct visconti_pll_rate_table pivoifpll_rates[] __initconst = {\n\tVISCONTI_PLL_RATE(165000000, 0x1, 0x0, 0x1, 0x42, 0x000000, 0x4, 0x2),\n\tVISCONTI_PLL_RATE(148500000, 0x1, 0x1, 0x1, 0x3b, 0x666666, 0x4, 0x2),\n\tVISCONTI_PLL_RATE(96000000, 0x1, 0x0, 0x1, 0x30, 0x000000, 0x5, 0x2),\n\tVISCONTI_PLL_RATE(74250000, 0x1, 0x1, 0x1, 0x3b, 0x666666, 0x4, 0x4),\n\tVISCONTI_PLL_RATE(54000000, 0x1, 0x0, 0x1, 0x36, 0x000000, 0x5, 0x4),\n\tVISCONTI_PLL_RATE(48000000, 0x1, 0x0, 0x1, 0x30, 0x000000, 0x5, 0x4),\n\tVISCONTI_PLL_RATE(35750000, 0x1, 0x1, 0x1, 0x32, 0x0ccccc, 0x7, 0x4),\n\t{   },\n};\n\nstatic const struct visconti_pll_rate_table piimgerpll_rates[] __initconst = {\n\tVISCONTI_PLL_RATE(165000000, 0x1, 0x0, 0x1, 0x42, 0x000000, 0x4, 0x2),\n\tVISCONTI_PLL_RATE(96000000, 0x1, 0x0, 0x1, 0x30, 0x000000, 0x5, 0x2),\n\tVISCONTI_PLL_RATE(54000000, 0x1, 0x0, 0x1, 0x36, 0x000000, 0x5, 0x4),\n\tVISCONTI_PLL_RATE(48000000, 0x1, 0x0, 0x1, 0x30, 0x000000, 0x5, 0x4),\n\t{   },\n};\n\nstatic const struct visconti_pll_info pll_info[] __initconst = {\n\t{ TMPV770X_PLL_PIPLL0, \"pipll0\", \"osc2-clk\", 0x0, pipll0_rates },\n\t{ TMPV770X_PLL_PIDDRCPLL, \"piddrcpll\", \"osc2-clk\", 0x500, piddrcpll_rates },\n\t{ TMPV770X_PLL_PIVOIFPLL, \"pivoifpll\", \"osc2-clk\", 0x600, pivoifpll_rates },\n\t{ TMPV770X_PLL_PIIMGERPLL, \"piimgerpll\", \"osc2-clk\", 0x700, piimgerpll_rates },\n};\n\nstatic void __init tmpv770x_setup_plls(struct device_node *np)\n{\n\tstruct visconti_pll_provider *ctx;\n\tvoid __iomem *reg_base;\n\n\treg_base = of_iomap(np, 0);\n\tif (!reg_base)\n\t\treturn;\n\n\tctx = visconti_init_pll(np, reg_base, TMPV770X_NR_PLL);\n\tif (IS_ERR(ctx)) {\n\t\tiounmap(reg_base);\n\t\treturn;\n\t}\n\n\tctx->clk_data.hws[TMPV770X_PLL_PIPLL1] =\n\t\tclk_hw_register_fixed_rate(NULL, \"pipll1\", NULL, 0, 600000000);\n\tctx->clk_data.hws[TMPV770X_PLL_PIDNNPLL] =\n\t\tclk_hw_register_fixed_rate(NULL, \"pidnnpll\", NULL, 0, 500000000);\n\tctx->clk_data.hws[TMPV770X_PLL_PIETHERPLL] =\n\t\tclk_hw_register_fixed_rate(NULL, \"pietherpll\", NULL, 0, 500000000);\n\n\tvisconti_register_plls(ctx, pll_info, ARRAY_SIZE(pll_info), &tmpv770x_pll_lock);\n}\n\nCLK_OF_DECLARE(tmpv770x_plls, \"toshiba,tmpv7708-pipllct\", tmpv770x_setup_plls);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}