{
  "module_name": "clk-pxa.h",
  "hash_id": "db0ebca838607cfdc2382c35c090659e89b8db4a77a53d6b270f9a928c6e3571",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/pxa/clk-pxa.h",
  "human_readable_source": " \n \n#ifndef _CLK_PXA_\n#define _CLK_PXA_\n\n#define CLKCFG_TURBO\t\t0x1\n#define CLKCFG_FCS\t\t0x2\n#define CLKCFG_HALFTURBO\t0x4\n#define CLKCFG_FASTBUS\t\t0x8\n\n#define PARENTS(name) \\\n\tstatic const char *const name ## _parents[] __initconst\n#define MUX_RO_RATE_RO_OPS(name, clk_name)\t\t\t\\\n\tstatic struct clk_hw name ## _mux_hw;\t\t\t\\\n\tstatic struct clk_hw name ## _rate_hw;\t\t\t\\\n\tstatic const struct clk_ops name ## _mux_ops = {\t\\\n\t\t.get_parent = name ## _get_parent,\t\t\\\n\t\t.set_parent = dummy_clk_set_parent,\t\t\\\n\t};\t\t\t\t\t\t\t\\\n\tstatic const struct clk_ops name ## _rate_ops = {\t\\\n\t\t.recalc_rate = name ## _get_rate,\t\t\\\n\t};\t\t\t\t\t\t\t\\\n\tstatic struct clk * __init clk_register_ ## name(void)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\treturn clk_register_composite(NULL, clk_name,\t\\\n\t\t\tname ## _parents,\t\t\t\\\n\t\t\tARRAY_SIZE(name ## _parents),\t\t\\\n\t\t\t&name ## _mux_hw, &name ## _mux_ops,\t\\\n\t\t\t&name ## _rate_hw, &name ## _rate_ops,\t\\\n\t\t\tNULL, NULL, CLK_GET_RATE_NOCACHE);\t\\\n\t}\n\n#define RATE_RO_OPS(name, clk_name)\t\t\t\t\\\n\tstatic struct clk_hw name ## _rate_hw;\t\t\t\\\n\tstatic const struct clk_ops name ## _rate_ops = {\t\\\n\t\t.recalc_rate = name ## _get_rate,\t\t\\\n\t};\t\t\t\t\t\t\t\\\n\tstatic struct clk * __init clk_register_ ## name(void)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\treturn clk_register_composite(NULL, clk_name,\t\\\n\t\t\tname ## _parents,\t\t\t\\\n\t\t\tARRAY_SIZE(name ## _parents),\t\t\\\n\t\t\tNULL, NULL,\t\t\t\t\\\n\t\t\t&name ## _rate_hw, &name ## _rate_ops,\t\\\n\t\t\tNULL, NULL, CLK_GET_RATE_NOCACHE);\t\\\n\t}\n\n#define RATE_OPS(name, clk_name)\t\t\t\t\\\n\tstatic struct clk_hw name ## _rate_hw;\t\t\t\\\n\tstatic const struct clk_ops name ## _rate_ops = {\t\\\n\t\t.recalc_rate = name ## _get_rate,\t\t\\\n\t\t.set_rate = name ## _set_rate,\t\t\t\\\n\t\t.determine_rate = name ## _determine_rate,\t\\\n\t};\t\t\t\t\t\t\t\\\n\tstatic struct clk * __init clk_register_ ## name(void)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\treturn clk_register_composite(NULL, clk_name,\t\\\n\t\t\tname ## _parents,\t\t\t\\\n\t\t\tARRAY_SIZE(name ## _parents),\t\t\\\n\t\t\tNULL, NULL,\t\t\t\t\\\n\t\t\t&name ## _rate_hw, &name ## _rate_ops,\t\\\n\t\t\tNULL, NULL, CLK_GET_RATE_NOCACHE);\t\\\n\t}\n\n#define MUX_OPS(name, clk_name, flags)\t\t\t\t\\\n\tstatic struct clk_hw name ## _mux_hw;\t\t\t\\\n\tstatic const struct clk_ops name ## _mux_ops = {\t\\\n\t\t.get_parent = name ## _get_parent,\t\t\\\n\t\t.set_parent = name ## _set_parent,\t\t\\\n\t\t.determine_rate = name ## _determine_rate,\t\\\n\t};\t\t\t\t\t\t\t\\\n\tstatic struct clk * __init clk_register_ ## name(void)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\treturn clk_register_composite(NULL, clk_name,\t\\\n\t\t\tname ## _parents,\t\t\t\\\n\t\t\tARRAY_SIZE(name ## _parents),\t\t\\\n\t\t\t&name ## _mux_hw, &name ## _mux_ops,\t\\\n\t\t\tNULL, NULL,\t\t\t\t\\\n\t\t\tNULL, NULL,\t\t\t\t\\\n\t\t\tCLK_GET_RATE_NOCACHE | flags); \\\n\t}\n\n \nstruct desc_clk_cken {\n\tstruct clk_hw hw;\n\tint ckid;\n\tint cken_reg;\n\tconst char *name;\n\tconst char *dev_id;\n\tconst char *con_id;\n\tconst char * const *parent_names;\n\tstruct clk_fixed_factor lp;\n\tstruct clk_fixed_factor hp;\n\tstruct clk_gate gate;\n\tbool (*is_in_low_power)(void);\n\tconst unsigned long flags;\n};\n\n#define PXA_CKEN(_dev_id, _con_id, _name, parents, _mult_lp, _div_lp,\t\\\n\t\t _mult_hp, _div_hp, is_lp, _cken_reg, _cken_bit, flag)\t\\\n\t{ .ckid = CLK_ ## _name, .name = #_name,\t\t\t\\\n\t  .cken_reg = _cken_reg,\t\t\t\t\t\\\n\t  .dev_id = _dev_id, .con_id = _con_id,\t.parent_names = parents,\\\n\t  .lp = { .mult = _mult_lp, .div = _div_lp },\t\t\t\\\n\t  .hp = { .mult = _mult_hp, .div = _div_hp },\t\t\t\\\n\t  .is_in_low_power = is_lp,\t\t\t\t\t\\\n\t  .gate = { .bit_idx = _cken_bit }, \\\n\t  .flags = flag,\t\t\t\t\t\t\\\n\t}\n#define PXA_CKEN_1RATE(dev_id, con_id, name, parents, cken_reg,\t\t\\\n\t\t\t    cken_bit, flag)\t\t\t\t\\\n\tPXA_CKEN(dev_id, con_id, name, parents, 1, 1, 1, 1,\t\t\\\n\t\t NULL, cken_reg, cken_bit, flag)\n\nstruct pxa2xx_freq {\n\tunsigned long cpll;\n\tunsigned int membus_khz;\n\tunsigned int cccr;\n\tunsigned int div2;\n\tunsigned int clkcfg;\n};\n\nstatic inline int dummy_clk_set_parent(struct clk_hw *hw, u8 index)\n{\n\treturn 0;\n}\n\nextern void clkdev_pxa_register(int ckid, const char *con_id,\n\t\t\t\tconst char *dev_id, struct clk *clk);\nextern int clk_pxa_cken_init(const struct desc_clk_cken *clks,\n\t\t\t     int nb_clks, void __iomem *clk_regs);\nvoid clk_pxa_dt_common_init(struct device_node *np);\n\nvoid pxa2xx_core_turbo_switch(bool on);\nvoid pxa2xx_cpll_change(struct pxa2xx_freq *freq,\n\t\t\tu32 (*mdrefr_dri)(unsigned int),\n\t\t\tvoid __iomem *cccr);\nint pxa2xx_determine_rate(struct clk_rate_request *req,\n\t\t\t  struct pxa2xx_freq *freqs,  int nb_freqs);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}