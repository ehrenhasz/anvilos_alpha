{
  "module_name": "pmc.h",
  "hash_id": "433de8c342efc7e911d5e7c6205cff5dc1f0faff8705ddc5b9d7853e6e16f5c9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/at91/pmc.h",
  "human_readable_source": " \n \n\n#ifndef __PMC_H_\n#define __PMC_H_\n\n#include <linux/io.h>\n#include <linux/irqdomain.h>\n#include <linux/regmap.h>\n#include <linux/spinlock.h>\n\n#include <dt-bindings/clock/at91.h>\n\nextern spinlock_t pmc_pcr_lock;\n\nstruct pmc_data {\n\tunsigned int ncore;\n\tstruct clk_hw **chws;\n\tunsigned int nsystem;\n\tstruct clk_hw **shws;\n\tunsigned int nperiph;\n\tstruct clk_hw **phws;\n\tunsigned int ngck;\n\tstruct clk_hw **ghws;\n\tunsigned int npck;\n\tstruct clk_hw **pchws;\n\n\tstruct clk_hw *hwtable[];\n};\n\nstruct clk_range {\n\tunsigned long min;\n\tunsigned long max;\n};\n\n#define CLK_RANGE(MIN, MAX) {.min = MIN, .max = MAX,}\n\nstruct clk_master_layout {\n\tu32 offset;\n\tu32 mask;\n\tu8 pres_shift;\n};\n\nextern const struct clk_master_layout at91rm9200_master_layout;\nextern const struct clk_master_layout at91sam9x5_master_layout;\n\nstruct clk_master_characteristics {\n\tstruct clk_range output;\n\tu32 divisors[5];\n\tu8 have_div3_pres;\n};\n\nstruct clk_pll_layout {\n\tu32 pllr_mask;\n\tu32 mul_mask;\n\tu32 frac_mask;\n\tu32 div_mask;\n\tu32 endiv_mask;\n\tu8 mul_shift;\n\tu8 frac_shift;\n\tu8 div_shift;\n\tu8 endiv_shift;\n};\n\nextern const struct clk_pll_layout at91rm9200_pll_layout;\nextern const struct clk_pll_layout at91sam9g45_pll_layout;\nextern const struct clk_pll_layout at91sam9g20_pllb_layout;\nextern const struct clk_pll_layout sama5d3_pll_layout;\n\nstruct clk_pll_characteristics {\n\tstruct clk_range input;\n\tint num_output;\n\tconst struct clk_range *output;\n\tu16 *icpll;\n\tu8 *out;\n\tu8 upll : 1;\n};\n\nstruct clk_programmable_layout {\n\tu8 pres_mask;\n\tu8 pres_shift;\n\tu8 css_mask;\n\tu8 have_slck_mck;\n\tu8 is_pres_direct;\n};\n\nextern const struct clk_programmable_layout at91rm9200_programmable_layout;\nextern const struct clk_programmable_layout at91sam9g45_programmable_layout;\nextern const struct clk_programmable_layout at91sam9x5_programmable_layout;\n\nstruct clk_pcr_layout {\n\tu32 offset;\n\tu32 cmd;\n\tu32 div_mask;\n\tu32 gckcss_mask;\n\tu32 pid_mask;\n};\n\n \nstruct at91_clk_pms {\n\tunsigned long rate;\n\tunsigned long parent_rate;\n\tunsigned int status;\n\tunsigned int parent;\n};\n\n#define field_get(_mask, _reg) (((_reg) & (_mask)) >> (ffs(_mask) - 1))\n#define field_prep(_mask, _val) (((_val) << (ffs(_mask) - 1)) & (_mask))\n\n#define ndck(a, s) (a[s - 1].id + 1)\n#define nck(a) (a[ARRAY_SIZE(a) - 1].id + 1)\nstruct pmc_data *pmc_data_allocate(unsigned int ncore, unsigned int nsystem,\n\t\t\t\t   unsigned int nperiph, unsigned int ngck,\n\t\t\t\t   unsigned int npck);\n\nint of_at91_get_clk_range(struct device_node *np, const char *propname,\n\t\t\t  struct clk_range *range);\n\nstruct clk_hw *of_clk_hw_pmc_get(struct of_phandle_args *clkspec, void *data);\n\nstruct clk_hw * __init\nat91_clk_register_audio_pll_frac(struct regmap *regmap, const char *name,\n\t\t\t\t const char *parent_name);\n\nstruct clk_hw * __init\nat91_clk_register_audio_pll_pad(struct regmap *regmap, const char *name,\n\t\t\t\tconst char *parent_name);\n\nstruct clk_hw * __init\nat91_clk_register_audio_pll_pmc(struct regmap *regmap, const char *name,\n\t\t\t\tconst char *parent_name);\n\nstruct clk_hw * __init\nat91_clk_register_generated(struct regmap *regmap, spinlock_t *lock,\n\t\t\t    const struct clk_pcr_layout *layout,\n\t\t\t    const char *name, const char **parent_names,\n\t\t\t    struct clk_hw **parent_hws, u32 *mux_table,\n\t\t\t    u8 num_parents, u8 id,\n\t\t\t    const struct clk_range *range, int chg_pid);\n\nstruct clk_hw * __init\nat91_clk_register_h32mx(struct regmap *regmap, const char *name,\n\t\t\tconst char *parent_name);\n\nstruct clk_hw * __init\nat91_clk_i2s_mux_register(struct regmap *regmap, const char *name,\n\t\t\t  const char * const *parent_names,\n\t\t\t  unsigned int num_parents, u8 bus_id);\n\nstruct clk_hw * __init\nat91_clk_register_main_rc_osc(struct regmap *regmap, const char *name,\n\t\t\t      u32 frequency, u32 accuracy);\nstruct clk_hw * __init\nat91_clk_register_main_osc(struct regmap *regmap, const char *name,\n\t\t\t   const char *parent_name,\n\t\t\t   struct clk_parent_data *parent_data, bool bypass);\nstruct clk_hw * __init\nat91_clk_register_rm9200_main(struct regmap *regmap,\n\t\t\t      const char *name,\n\t\t\t      const char *parent_name,\n\t\t\t      struct clk_hw *parent_hw);\nstruct clk_hw * __init\nat91_clk_register_sam9x5_main(struct regmap *regmap, const char *name,\n\t\t\t      const char **parent_names,\n\t\t\t      struct clk_hw **parent_hws, int num_parents);\n\nstruct clk_hw * __init\nat91_clk_register_master_pres(struct regmap *regmap, const char *name,\n\t\t\t      int num_parents, const char **parent_names,\n\t\t\t      struct clk_hw **parent_hws,\n\t\t\t      const struct clk_master_layout *layout,\n\t\t\t      const struct clk_master_characteristics *characteristics,\n\t\t\t      spinlock_t *lock);\n\nstruct clk_hw * __init\nat91_clk_register_master_div(struct regmap *regmap, const char *name,\n\t\t\t     const char *parent_names, struct clk_hw *parent_hw,\n\t\t\t     const struct clk_master_layout *layout,\n\t\t\t     const struct clk_master_characteristics *characteristics,\n\t\t\t     spinlock_t *lock, u32 flags, u32 safe_div);\n\nstruct clk_hw * __init\nat91_clk_sama7g5_register_master(struct regmap *regmap,\n\t\t\t\t const char *name, int num_parents,\n\t\t\t\t const char **parent_names,\n\t\t\t\t struct clk_hw **parent_hws, u32 *mux_table,\n\t\t\t\t spinlock_t *lock, u8 id, bool critical,\n\t\t\t\t int chg_pid);\n\nstruct clk_hw * __init\nat91_clk_register_peripheral(struct regmap *regmap, const char *name,\n\t\t\t     const char *parent_name, struct clk_hw *parent_hw,\n\t\t\t     u32 id);\nstruct clk_hw * __init\nat91_clk_register_sam9x5_peripheral(struct regmap *regmap, spinlock_t *lock,\n\t\t\t\t    const struct clk_pcr_layout *layout,\n\t\t\t\t    const char *name, const char *parent_name,\n\t\t\t\t    struct clk_hw *parent_hw,\n\t\t\t\t    u32 id, const struct clk_range *range,\n\t\t\t\t    int chg_pid, unsigned long flags);\n\nstruct clk_hw * __init\nat91_clk_register_pll(struct regmap *regmap, const char *name,\n\t\t      const char *parent_name, u8 id,\n\t\t      const struct clk_pll_layout *layout,\n\t\t      const struct clk_pll_characteristics *characteristics);\nstruct clk_hw * __init\nat91_clk_register_plldiv(struct regmap *regmap, const char *name,\n\t\t\t const char *parent_name);\n\nstruct clk_hw * __init\nsam9x60_clk_register_div_pll(struct regmap *regmap, spinlock_t *lock,\n\t\t\t     const char *name, const char *parent_name,\n\t\t\t     struct clk_hw *parent_hw, u8 id,\n\t\t\t     const struct clk_pll_characteristics *characteristics,\n\t\t\t     const struct clk_pll_layout *layout, u32 flags,\n\t\t\t     u32 safe_div);\n\nstruct clk_hw * __init\nsam9x60_clk_register_frac_pll(struct regmap *regmap, spinlock_t *lock,\n\t\t\t      const char *name, const char *parent_name,\n\t\t\t      struct clk_hw *parent_hw, u8 id,\n\t\t\t      const struct clk_pll_characteristics *characteristics,\n\t\t\t      const struct clk_pll_layout *layout, u32 flags);\n\nstruct clk_hw * __init\nat91_clk_register_programmable(struct regmap *regmap, const char *name,\n\t\t\t       const char **parent_names, struct clk_hw **parent_hws,\n\t\t\t       u8 num_parents, u8 id,\n\t\t\t       const struct clk_programmable_layout *layout,\n\t\t\t       u32 *mux_table);\n\nstruct clk_hw * __init\nat91_clk_register_sam9260_slow(struct regmap *regmap,\n\t\t\t       const char *name,\n\t\t\t       const char **parent_names,\n\t\t\t       int num_parents);\n\nstruct clk_hw * __init\nat91sam9x5_clk_register_smd(struct regmap *regmap, const char *name,\n\t\t\t    const char **parent_names, u8 num_parents);\n\nstruct clk_hw * __init\nat91_clk_register_system(struct regmap *regmap, const char *name,\n\t\t\t const char *parent_name, struct clk_hw *parent_hw,\n\t\t\t u8 id, unsigned long flags);\n\nstruct clk_hw * __init\nat91sam9x5_clk_register_usb(struct regmap *regmap, const char *name,\n\t\t\t    const char **parent_names, u8 num_parents);\nstruct clk_hw * __init\nat91sam9n12_clk_register_usb(struct regmap *regmap, const char *name,\n\t\t\t     const char *parent_name);\nstruct clk_hw * __init\nsam9x60_clk_register_usb(struct regmap *regmap, const char *name,\n\t\t\t const char **parent_names, u8 num_parents);\nstruct clk_hw * __init\nat91rm9200_clk_register_usb(struct regmap *regmap, const char *name,\n\t\t\t    const char *parent_name, const u32 *divisors);\n\nstruct clk_hw * __init\nat91_clk_register_utmi(struct regmap *regmap_pmc, struct regmap *regmap_sfr,\n\t\t       const char *name, const char *parent_name,\n\t\t       struct clk_hw *parent_hw);\n\nstruct clk_hw * __init\nat91_clk_sama7g5_register_utmi(struct regmap *regmap, const char *name,\n\t\t\t       const char *parent_name, struct clk_hw *parent_hw);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}