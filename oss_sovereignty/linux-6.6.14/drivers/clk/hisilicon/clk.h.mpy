{
  "module_name": "clk.h",
  "hash_id": "594a86be9afd34719f6596a71f19d4e83d0991f5ede693867122a2e7890c0614",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/hisilicon/clk.h",
  "human_readable_source": " \n \n\n#ifndef\t__HISI_CLK_H\n#define\t__HISI_CLK_H\n\n#include <linux/clk-provider.h>\n#include <linux/io.h>\n#include <linux/spinlock.h>\n\nstruct platform_device;\n\nstruct hisi_clock_data {\n\tstruct clk_onecell_data\tclk_data;\n\tvoid __iomem\t\t*base;\n};\n\nstruct hisi_fixed_rate_clock {\n\tunsigned int\t\tid;\n\tchar\t\t\t*name;\n\tconst char\t\t*parent_name;\n\tunsigned long\t\tflags;\n\tunsigned long\t\tfixed_rate;\n};\n\nstruct hisi_fixed_factor_clock {\n\tunsigned int\t\tid;\n\tchar\t\t\t*name;\n\tconst char\t\t*parent_name;\n\tunsigned long\t\tmult;\n\tunsigned long\t\tdiv;\n\tunsigned long\t\tflags;\n};\n\nstruct hisi_mux_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*const *parent_names;\n\tu8\t\t\tnum_parents;\n\tunsigned long\t\tflags;\n\tunsigned long\t\toffset;\n\tu8\t\t\tshift;\n\tu8\t\t\twidth;\n\tu8\t\t\tmux_flags;\n\tconst u32\t\t*table;\n\tconst char\t\t*alias;\n};\n\nstruct hisi_phase_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*parent_names;\n\tunsigned long\t\tflags;\n\tunsigned long\t\toffset;\n\tu8\t\t\tshift;\n\tu8\t\t\twidth;\n\tu32\t\t\t*phase_degrees;\n\tu32\t\t\t*phase_regvals;\n\tu8\t\t\tphase_num;\n};\n\nstruct hisi_divider_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*parent_name;\n\tunsigned long\t\tflags;\n\tunsigned long\t\toffset;\n\tu8\t\t\tshift;\n\tu8\t\t\twidth;\n\tu8\t\t\tdiv_flags;\n\tstruct clk_div_table\t*table;\n\tconst char\t\t*alias;\n};\n\nstruct hi6220_divider_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*parent_name;\n\tunsigned long\t\tflags;\n\tunsigned long\t\toffset;\n\tu8\t\t\tshift;\n\tu8\t\t\twidth;\n\tu32\t\t\tmask_bit;\n\tconst char\t\t*alias;\n};\n\nstruct hisi_gate_clock {\n\tunsigned int\t\tid;\n\tconst char\t\t*name;\n\tconst char\t\t*parent_name;\n\tunsigned long\t\tflags;\n\tunsigned long\t\toffset;\n\tu8\t\t\tbit_idx;\n\tu8\t\t\tgate_flags;\n\tconst char\t\t*alias;\n};\n\nstruct clk *hisi_register_clkgate_sep(struct device *, const char *,\n\t\t\t\tconst char *, unsigned long,\n\t\t\t\tvoid __iomem *, u8,\n\t\t\t\tu8, spinlock_t *);\nstruct clk *hi6220_register_clkdiv(struct device *dev, const char *name,\n\tconst char *parent_name, unsigned long flags, void __iomem *reg,\n\tu8 shift, u8 width, u32 mask_bit, spinlock_t *lock);\n\nstruct hisi_clock_data *hisi_clk_alloc(struct platform_device *, int);\nstruct hisi_clock_data *hisi_clk_init(struct device_node *, int);\nint hisi_clk_register_fixed_rate(const struct hisi_fixed_rate_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\nint hisi_clk_register_fixed_factor(const struct hisi_fixed_factor_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\nint hisi_clk_register_mux(const struct hisi_mux_clock *, int,\n\t\t\t\tstruct hisi_clock_data *);\nstruct clk *clk_register_hisi_phase(struct device *dev,\n\t\t\t\tconst struct hisi_phase_clock *clks,\n\t\t\t\tvoid __iomem *base, spinlock_t *lock);\nint hisi_clk_register_phase(struct device *dev,\n\t\t\t\tconst struct hisi_phase_clock *clks,\n\t\t\t\tint nums, struct hisi_clock_data *data);\nint hisi_clk_register_divider(const struct hisi_divider_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\nint hisi_clk_register_gate(const struct hisi_gate_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\nvoid hisi_clk_register_gate_sep(const struct hisi_gate_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\nvoid hi6220_clk_register_divider(const struct hi6220_divider_clock *,\n\t\t\t\tint, struct hisi_clock_data *);\n\n#define hisi_clk_unregister(type) \\\nstatic inline \\\nvoid hisi_clk_unregister_##type(const struct hisi_##type##_clock *clks, \\\n\t\t\t\tint nums, struct hisi_clock_data *data) \\\n{ \\\n\tstruct clk **clocks = data->clk_data.clks; \\\n\tint i; \\\n\tfor (i = 0; i < nums; i++) { \\\n\t\tint id = clks[i].id; \\\n\t\tif (clocks[id])  \\\n\t\t\tclk_unregister_##type(clocks[id]); \\\n\t} \\\n}\n\nhisi_clk_unregister(fixed_rate)\nhisi_clk_unregister(fixed_factor)\nhisi_clk_unregister(mux)\nhisi_clk_unregister(divider)\nhisi_clk_unregister(gate)\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}