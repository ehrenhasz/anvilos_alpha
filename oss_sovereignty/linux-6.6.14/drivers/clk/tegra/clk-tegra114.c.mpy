{
  "module_name": "clk-tegra114.c",
  "hash_id": "4a1fc8949c4d2ed0cec7461f64fb75a98b5be95b4e3cf5e841907f84583eb4e9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/clk/tegra/clk-tegra114.c",
  "human_readable_source": "\n \n\n#include <linux/io.h>\n#include <linux/clk-provider.h>\n#include <linux/of.h>\n#include <linux/of_address.h>\n#include <linux/delay.h>\n#include <linux/export.h>\n#include <linux/clk/tegra.h>\n#include <dt-bindings/clock/tegra114-car.h>\n\n#include \"clk.h\"\n#include \"clk-id.h\"\n\n#define RST_DFLL_DVCO\t\t\t0x2F4\n#define CPU_FINETRIM_SELECT\t\t0x4d4\t \n#define CPU_FINETRIM_DR\t\t\t0x4d8\t \n#define CPU_FINETRIM_R\t\t\t0x4e4\t \n\n \n#define DVFS_DFLL_RESET_SHIFT\t\t0\n\n \n#define CPU_FINETRIM_1_FCPU_1\t\tBIT(0)\t \n#define CPU_FINETRIM_1_FCPU_2\t\tBIT(1)\t \n#define CPU_FINETRIM_1_FCPU_3\t\tBIT(2)\t \n#define CPU_FINETRIM_1_FCPU_4\t\tBIT(3)\t \n#define CPU_FINETRIM_1_FCPU_5\t\tBIT(4)\t \n#define CPU_FINETRIM_1_FCPU_6\t\tBIT(5)\t \n\n \n#define CPU_FINETRIM_R_FCPU_1_SHIFT\t0\t\t \n#define CPU_FINETRIM_R_FCPU_1_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_1_SHIFT)\n#define CPU_FINETRIM_R_FCPU_2_SHIFT\t2\t\t \n#define CPU_FINETRIM_R_FCPU_2_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_2_SHIFT)\n#define CPU_FINETRIM_R_FCPU_3_SHIFT\t4\t\t \n#define CPU_FINETRIM_R_FCPU_3_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_3_SHIFT)\n#define CPU_FINETRIM_R_FCPU_4_SHIFT\t6\t\t \n#define CPU_FINETRIM_R_FCPU_4_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_4_SHIFT)\n#define CPU_FINETRIM_R_FCPU_5_SHIFT\t8\t\t \n#define CPU_FINETRIM_R_FCPU_5_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_5_SHIFT)\n#define CPU_FINETRIM_R_FCPU_6_SHIFT\t10\t\t \n#define CPU_FINETRIM_R_FCPU_6_MASK\t(0x3 << CPU_FINETRIM_R_FCPU_6_SHIFT)\n\n#define TEGRA114_CLK_PERIPH_BANKS\t5\n\n#define PLLC_BASE 0x80\n#define PLLC_MISC2 0x88\n#define PLLC_MISC 0x8c\n#define PLLC2_BASE 0x4e8\n#define PLLC2_MISC 0x4ec\n#define PLLC3_BASE 0x4fc\n#define PLLC3_MISC 0x500\n#define PLLM_BASE 0x90\n#define PLLM_MISC 0x9c\n#define PLLP_BASE 0xa0\n#define PLLP_MISC 0xac\n#define PLLX_BASE 0xe0\n#define PLLX_MISC 0xe4\n#define PLLX_MISC2 0x514\n#define PLLX_MISC3 0x518\n#define PLLD_BASE 0xd0\n#define PLLD_MISC 0xdc\n#define PLLD2_BASE 0x4b8\n#define PLLD2_MISC 0x4bc\n#define PLLE_BASE 0xe8\n#define PLLE_MISC 0xec\n#define PLLA_BASE 0xb0\n#define PLLA_MISC 0xbc\n#define PLLU_BASE 0xc0\n#define PLLU_MISC 0xcc\n#define PLLRE_BASE 0x4c4\n#define PLLRE_MISC 0x4c8\n\n#define PLL_MISC_LOCK_ENABLE 18\n#define PLLC_MISC_LOCK_ENABLE 24\n#define PLLDU_MISC_LOCK_ENABLE 22\n#define PLLE_MISC_LOCK_ENABLE 9\n#define PLLRE_MISC_LOCK_ENABLE 30\n\n#define PLLC_IDDQ_BIT 26\n#define PLLX_IDDQ_BIT 3\n#define PLLRE_IDDQ_BIT 16\n\n#define PLL_BASE_LOCK BIT(27)\n#define PLLE_MISC_LOCK BIT(11)\n#define PLLRE_MISC_LOCK BIT(24)\n#define PLLCX_BASE_LOCK (BIT(26)|BIT(27))\n\n#define PLLE_AUX 0x48c\n#define PLLC_OUT 0x84\n#define PLLM_OUT 0x94\n\n#define OSC_CTRL\t\t\t0x50\n#define OSC_CTRL_OSC_FREQ_SHIFT\t\t28\n#define OSC_CTRL_PLL_REF_DIV_SHIFT\t26\n\n#define PLLXC_SW_MAX_P\t\t\t6\n\n#define CCLKG_BURST_POLICY 0x368\n\n#define CLK_SOURCE_CSITE 0x1d4\n#define CLK_SOURCE_EMC 0x19c\n\n \n#define PMC_PLLM_WB0_OVERRIDE 0x1dc\n#define PMC_PLLM_WB0_OVERRIDE_2 0x2b0\n\n \n#define CLK_RST_CONTROLLER_CPU_CMPLX_STATUS\t0x470\n\n#define MUX8(_name, _parents, _offset, \\\n\t\t\t     _clk_num, _gate_flags, _clk_id)\t\\\n\tTEGRA_INIT_DATA_TABLE(_name, NULL, NULL, _parents, _offset,\\\n\t\t\t29, MASK(3), 0, 0, 8, 1, TEGRA_DIVIDER_ROUND_UP,\\\n\t\t\t_clk_num, _gate_flags, _clk_id, _parents##_idx, 0,\\\n\t\t\tNULL)\n\n#ifdef CONFIG_PM_SLEEP\nstatic struct cpu_clk_suspend_context {\n\tu32 clk_csite_src;\n\tu32 cclkg_burst;\n\tu32 cclkg_divider;\n} tegra114_cpu_clk_sctx;\n#endif\n\nstatic void __iomem *clk_base;\nstatic void __iomem *pmc_base;\n\nstatic DEFINE_SPINLOCK(pll_d_lock);\nstatic DEFINE_SPINLOCK(pll_d2_lock);\nstatic DEFINE_SPINLOCK(pll_u_lock);\nstatic DEFINE_SPINLOCK(pll_re_lock);\nstatic DEFINE_SPINLOCK(emc_lock);\n\nstatic struct div_nmp pllxc_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 8,\n\t.divn_shift = 8,\n\t.divn_width = 8,\n\t.divp_shift = 20,\n\t.divp_width = 4,\n};\n\nstatic const struct pdiv_map pllxc_p[] = {\n\t{ .pdiv =  1, .hw_val =  0 },\n\t{ .pdiv =  2, .hw_val =  1 },\n\t{ .pdiv =  3, .hw_val =  2 },\n\t{ .pdiv =  4, .hw_val =  3 },\n\t{ .pdiv =  5, .hw_val =  4 },\n\t{ .pdiv =  6, .hw_val =  5 },\n\t{ .pdiv =  8, .hw_val =  6 },\n\t{ .pdiv = 10, .hw_val =  7 },\n\t{ .pdiv = 12, .hw_val =  8 },\n\t{ .pdiv = 16, .hw_val =  9 },\n\t{ .pdiv = 12, .hw_val = 10 },\n\t{ .pdiv = 16, .hw_val = 11 },\n\t{ .pdiv = 20, .hw_val = 12 },\n\t{ .pdiv = 24, .hw_val = 13 },\n\t{ .pdiv = 32, .hw_val = 14 },\n\t{ .pdiv =  0, .hw_val =  0 },\n};\n\nstatic struct tegra_clk_pll_freq_table pll_c_freq_table[] = {\n\t{ 12000000, 624000000, 104, 1, 2, 0 },\n\t{ 12000000, 600000000, 100, 1, 2, 0 },\n\t{ 13000000, 600000000,  92, 1, 2, 0 },  \n\t{ 16800000, 600000000,  71, 1, 2, 0 },  \n\t{ 19200000, 600000000,  62, 1, 2, 0 },  \n\t{ 26000000, 600000000,  92, 2, 2, 0 },  \n\t{        0,         0,   0, 0, 0, 0 },\n};\n\nstatic struct tegra_clk_pll_params pll_c_params = {\n\t.input_min = 12000000,\n\t.input_max = 800000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,  \n\t.vco_min = 600000000,\n\t.vco_max = 1400000000,\n\t.base_reg = PLLC_BASE,\n\t.misc_reg = PLLC_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLLC_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.iddq_reg = PLLC_MISC,\n\t.iddq_bit_idx = PLLC_IDDQ_BIT,\n\t.max_p = PLLXC_SW_MAX_P,\n\t.dyn_ramp_reg = PLLC_MISC2,\n\t.stepa_shift = 17,\n\t.stepb_shift = 9,\n\t.pdiv_tohw = pllxc_p,\n\t.div_nmp = &pllxc_nmp,\n\t.freq_table = pll_c_freq_table,\n\t.flags = TEGRA_PLL_USE_LOCK | TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic struct div_nmp pllcx_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 2,\n\t.divn_shift = 8,\n\t.divn_width = 8,\n\t.divp_shift = 20,\n\t.divp_width = 3,\n};\n\nstatic const struct pdiv_map pllc_p[] = {\n\t{ .pdiv =  1, .hw_val = 0 },\n\t{ .pdiv =  2, .hw_val = 1 },\n\t{ .pdiv =  4, .hw_val = 3 },\n\t{ .pdiv =  8, .hw_val = 5 },\n\t{ .pdiv = 16, .hw_val = 7 },\n\t{ .pdiv =  0, .hw_val = 0 },\n};\n\nstatic struct tegra_clk_pll_freq_table pll_cx_freq_table[] = {\n\t{ 12000000, 600000000, 100, 1, 2, 0 },\n\t{ 13000000, 600000000,  92, 1, 2, 0 },  \n\t{ 16800000, 600000000,  71, 1, 2, 0 },  \n\t{ 19200000, 600000000,  62, 1, 2, 0 },  \n\t{ 26000000, 600000000,  92, 2, 2, 0 },  \n\t{        0,         0,   0, 0, 0, 0 },\n};\n\nstatic struct tegra_clk_pll_params pll_c2_params = {\n\t.input_min = 12000000,\n\t.input_max = 48000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,\n\t.vco_min = 600000000,\n\t.vco_max = 1200000000,\n\t.base_reg = PLLC2_BASE,\n\t.misc_reg = PLLC2_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.pdiv_tohw = pllc_p,\n\t.div_nmp = &pllcx_nmp,\n\t.max_p = 7,\n\t.ext_misc_reg[0] = 0x4f0,\n\t.ext_misc_reg[1] = 0x4f4,\n\t.ext_misc_reg[2] = 0x4f8,\n\t.freq_table = pll_cx_freq_table,\n\t.flags = TEGRA_PLL_USE_LOCK,\n};\n\nstatic struct tegra_clk_pll_params pll_c3_params = {\n\t.input_min = 12000000,\n\t.input_max = 48000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,\n\t.vco_min = 600000000,\n\t.vco_max = 1200000000,\n\t.base_reg = PLLC3_BASE,\n\t.misc_reg = PLLC3_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.pdiv_tohw = pllc_p,\n\t.div_nmp = &pllcx_nmp,\n\t.max_p = 7,\n\t.ext_misc_reg[0] = 0x504,\n\t.ext_misc_reg[1] = 0x508,\n\t.ext_misc_reg[2] = 0x50c,\n\t.freq_table = pll_cx_freq_table,\n\t.flags = TEGRA_PLL_USE_LOCK,\n};\n\nstatic struct div_nmp pllm_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 8,\n\t.override_divm_shift = 0,\n\t.divn_shift = 8,\n\t.divn_width = 8,\n\t.override_divn_shift = 8,\n\t.divp_shift = 20,\n\t.divp_width = 1,\n\t.override_divp_shift = 27,\n};\n\nstatic const struct pdiv_map pllm_p[] = {\n\t{ .pdiv = 1, .hw_val = 0 },\n\t{ .pdiv = 2, .hw_val = 1 },\n\t{ .pdiv = 0, .hw_val = 0 },\n};\n\nstatic struct tegra_clk_pll_freq_table pll_m_freq_table[] = {\n\t{ 12000000, 800000000, 66, 1, 1, 0 },  \n\t{ 13000000, 800000000, 61, 1, 1, 0 },  \n\t{ 16800000, 800000000, 47, 1, 1, 0 },  \n\t{ 19200000, 800000000, 41, 1, 1, 0 },  \n\t{ 26000000, 800000000, 61, 2, 1, 0 },  \n\t{        0,         0,  0, 0, 0, 0 },\n};\n\nstatic struct tegra_clk_pll_params pll_m_params = {\n\t.input_min = 12000000,\n\t.input_max = 500000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,  \n\t.vco_min = 400000000,\n\t.vco_max = 1066000000,\n\t.base_reg = PLLM_BASE,\n\t.misc_reg = PLLM_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.max_p = 2,\n\t.pdiv_tohw = pllm_p,\n\t.div_nmp = &pllm_nmp,\n\t.pmc_divnm_reg = PMC_PLLM_WB0_OVERRIDE,\n\t.pmc_divp_reg = PMC_PLLM_WB0_OVERRIDE_2,\n\t.freq_table = pll_m_freq_table,\n\t.flags = TEGRA_PLL_USE_LOCK | TEGRA_PLL_HAS_LOCK_ENABLE |\n\t\t TEGRA_PLL_FIXED,\n};\n\nstatic struct div_nmp pllp_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 5,\n\t.divn_shift = 8,\n\t.divn_width = 10,\n\t.divp_shift = 20,\n\t.divp_width = 3,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_p_freq_table[] = {\n\t{ 12000000, 216000000, 432, 12, 2, 8 },\n\t{ 13000000, 216000000, 432, 13, 2, 8 },\n\t{ 16800000, 216000000, 360, 14, 2, 8 },\n\t{ 19200000, 216000000, 360, 16, 2, 8 },\n\t{ 26000000, 216000000, 432, 26, 2, 8 },\n\t{        0,         0,   0,  0, 0, 0 },\n};\n\nstatic struct tegra_clk_pll_params pll_p_params = {\n\t.input_min = 2000000,\n\t.input_max = 31000000,\n\t.cf_min = 1000000,\n\t.cf_max = 6000000,\n\t.vco_min = 200000000,\n\t.vco_max = 700000000,\n\t.base_reg = PLLP_BASE,\n\t.misc_reg = PLLP_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.div_nmp = &pllp_nmp,\n\t.freq_table = pll_p_freq_table,\n\t.flags = TEGRA_PLL_FIXED | TEGRA_PLL_USE_LOCK |\n\t\t TEGRA_PLL_HAS_LOCK_ENABLE,\n\t.fixed_rate = 408000000,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_a_freq_table[] = {\n\t{  9600000, 282240000, 147,  5, 1, 4 },\n\t{  9600000, 368640000, 192,  5, 1, 4 },\n\t{  9600000, 240000000, 200,  8, 1, 8 },\n\t{ 28800000, 282240000, 245, 25, 1, 8 },\n\t{ 28800000, 368640000, 320, 25, 1, 8 },\n\t{ 28800000, 240000000, 200, 24, 1, 8 },\n\t{        0,         0,   0,  0, 0, 0 },\n};\n\n\nstatic struct tegra_clk_pll_params pll_a_params = {\n\t.input_min = 2000000,\n\t.input_max = 31000000,\n\t.cf_min = 1000000,\n\t.cf_max = 6000000,\n\t.vco_min = 200000000,\n\t.vco_max = 700000000,\n\t.base_reg = PLLA_BASE,\n\t.misc_reg = PLLA_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.div_nmp = &pllp_nmp,\n\t.freq_table = pll_a_freq_table,\n\t.flags = TEGRA_PLL_HAS_CPCON | TEGRA_PLL_USE_LOCK |\n\t\t TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_d_freq_table[] = {\n\t{ 12000000,  216000000,  864, 12, 4, 12 },\n\t{ 13000000,  216000000,  864, 13, 4, 12 },\n\t{ 16800000,  216000000,  720, 14, 4, 12 },\n\t{ 19200000,  216000000,  720, 16, 4, 12 },\n\t{ 26000000,  216000000,  864, 26, 4, 12 },\n\t{ 12000000,  594000000,  594, 12, 1, 12 },\n\t{ 13000000,  594000000,  594, 13, 1, 12 },\n\t{ 16800000,  594000000,  495, 14, 1, 12 },\n\t{ 19200000,  594000000,  495, 16, 1, 12 },\n\t{ 26000000,  594000000,  594, 26, 1, 12 },\n\t{ 12000000, 1000000000, 1000, 12, 1, 12 },\n\t{ 13000000, 1000000000, 1000, 13, 1, 12 },\n\t{ 19200000, 1000000000,  625, 12, 1, 12 },\n\t{ 26000000, 1000000000, 1000, 26, 1, 12 },\n\t{        0,          0,    0,  0, 0,  0 },\n};\n\nstatic struct tegra_clk_pll_params pll_d_params = {\n\t.input_min = 2000000,\n\t.input_max = 40000000,\n\t.cf_min = 1000000,\n\t.cf_max = 6000000,\n\t.vco_min = 500000000,\n\t.vco_max = 1000000000,\n\t.base_reg = PLLD_BASE,\n\t.misc_reg = PLLD_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLLDU_MISC_LOCK_ENABLE,\n\t.lock_delay = 1000,\n\t.div_nmp = &pllp_nmp,\n\t.freq_table = pll_d_freq_table,\n\t.flags = TEGRA_PLL_HAS_CPCON | TEGRA_PLL_SET_LFCON |\n\t\t TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic struct tegra_clk_pll_params pll_d2_params = {\n\t.input_min = 2000000,\n\t.input_max = 40000000,\n\t.cf_min = 1000000,\n\t.cf_max = 6000000,\n\t.vco_min = 500000000,\n\t.vco_max = 1000000000,\n\t.base_reg = PLLD2_BASE,\n\t.misc_reg = PLLD2_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLLDU_MISC_LOCK_ENABLE,\n\t.lock_delay = 1000,\n\t.div_nmp = &pllp_nmp,\n\t.freq_table = pll_d_freq_table,\n\t.flags = TEGRA_PLL_HAS_CPCON | TEGRA_PLL_SET_LFCON |\n\t\t TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic const struct pdiv_map pllu_p[] = {\n\t{ .pdiv = 1, .hw_val = 1 },\n\t{ .pdiv = 2, .hw_val = 0 },\n\t{ .pdiv = 0, .hw_val = 0 },\n};\n\nstatic struct div_nmp pllu_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 5,\n\t.divn_shift = 8,\n\t.divn_width = 10,\n\t.divp_shift = 20,\n\t.divp_width = 1,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_u_freq_table[] = {\n\t{ 12000000, 480000000, 960, 12, 2, 12 },\n\t{ 13000000, 480000000, 960, 13, 2, 12 },\n\t{ 16800000, 480000000, 400,  7, 2,  5 },\n\t{ 19200000, 480000000, 200,  4, 2,  3 },\n\t{ 26000000, 480000000, 960, 26, 2, 12 },\n\t{        0,         0,   0,  0, 0,  0 },\n};\n\nstatic struct tegra_clk_pll_params pll_u_params = {\n\t.input_min = 2000000,\n\t.input_max = 40000000,\n\t.cf_min = 1000000,\n\t.cf_max = 6000000,\n\t.vco_min = 480000000,\n\t.vco_max = 960000000,\n\t.base_reg = PLLU_BASE,\n\t.misc_reg = PLLU_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLLDU_MISC_LOCK_ENABLE,\n\t.lock_delay = 1000,\n\t.pdiv_tohw = pllu_p,\n\t.div_nmp = &pllu_nmp,\n\t.freq_table = pll_u_freq_table,\n\t.flags = TEGRA_PLLU | TEGRA_PLL_HAS_CPCON | TEGRA_PLL_SET_LFCON |\n\t\t TEGRA_PLL_USE_LOCK | TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_x_freq_table[] = {\n\t \n\t{ 12000000, 1000000000, 83, 1, 1, 0 },  \n\t{ 13000000, 1000000000, 76, 1, 1, 0 },  \n\t{ 16800000, 1000000000, 59, 1, 1, 0 },  \n\t{ 19200000, 1000000000, 52, 1, 1, 0 },  \n\t{ 26000000, 1000000000, 76, 2, 1, 0 },  \n\t{        0,          0,  0, 0, 0, 0 },\n};\n\nstatic struct tegra_clk_pll_params pll_x_params = {\n\t.input_min = 12000000,\n\t.input_max = 800000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,  \n\t.vco_min = 700000000,\n\t.vco_max = 2400000000U,\n\t.base_reg = PLLX_BASE,\n\t.misc_reg = PLLX_MISC,\n\t.lock_mask = PLL_BASE_LOCK,\n\t.lock_enable_bit_idx = PLL_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.iddq_reg = PLLX_MISC3,\n\t.iddq_bit_idx = PLLX_IDDQ_BIT,\n\t.max_p = PLLXC_SW_MAX_P,\n\t.dyn_ramp_reg = PLLX_MISC2,\n\t.stepa_shift = 16,\n\t.stepb_shift = 24,\n\t.pdiv_tohw = pllxc_p,\n\t.div_nmp = &pllxc_nmp,\n\t.freq_table = pll_x_freq_table,\n\t.flags = TEGRA_PLL_USE_LOCK | TEGRA_PLL_HAS_LOCK_ENABLE,\n};\n\nstatic struct tegra_clk_pll_freq_table pll_e_freq_table[] = {\n\t \n\t{ 336000000, 100000000, 100, 21, 16, 11 },\n\t{ 312000000, 100000000, 200, 26, 24, 13 },\n\t{  12000000, 100000000, 200,  1, 24, 13 },\n\t{         0,         0,   0,  0,  0,  0 },\n};\n\nstatic const struct pdiv_map plle_p[] = {\n\t{ .pdiv =  1, .hw_val =  0 },\n\t{ .pdiv =  2, .hw_val =  1 },\n\t{ .pdiv =  3, .hw_val =  2 },\n\t{ .pdiv =  4, .hw_val =  3 },\n\t{ .pdiv =  5, .hw_val =  4 },\n\t{ .pdiv =  6, .hw_val =  5 },\n\t{ .pdiv =  8, .hw_val =  6 },\n\t{ .pdiv = 10, .hw_val =  7 },\n\t{ .pdiv = 12, .hw_val =  8 },\n\t{ .pdiv = 16, .hw_val =  9 },\n\t{ .pdiv = 12, .hw_val = 10 },\n\t{ .pdiv = 16, .hw_val = 11 },\n\t{ .pdiv = 20, .hw_val = 12 },\n\t{ .pdiv = 24, .hw_val = 13 },\n\t{ .pdiv = 32, .hw_val = 14 },\n\t{ .pdiv =  0, .hw_val =  0 }\n};\n\nstatic struct div_nmp plle_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 8,\n\t.divn_shift = 8,\n\t.divn_width = 8,\n\t.divp_shift = 24,\n\t.divp_width = 4,\n};\n\nstatic struct tegra_clk_pll_params pll_e_params = {\n\t.input_min = 12000000,\n\t.input_max = 1000000000,\n\t.cf_min = 12000000,\n\t.cf_max = 75000000,\n\t.vco_min = 1600000000,\n\t.vco_max = 2400000000U,\n\t.base_reg = PLLE_BASE,\n\t.misc_reg = PLLE_MISC,\n\t.aux_reg = PLLE_AUX,\n\t.lock_mask = PLLE_MISC_LOCK,\n\t.lock_enable_bit_idx = PLLE_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.pdiv_tohw = plle_p,\n\t.div_nmp = &plle_nmp,\n\t.freq_table = pll_e_freq_table,\n\t.flags = TEGRA_PLL_FIXED | TEGRA_PLL_HAS_LOCK_ENABLE,\n\t.fixed_rate = 100000000,\n};\n\nstatic struct div_nmp pllre_nmp = {\n\t.divm_shift = 0,\n\t.divm_width = 8,\n\t.divn_shift = 8,\n\t.divn_width = 8,\n\t.divp_shift = 16,\n\t.divp_width = 4,\n};\n\nstatic struct tegra_clk_pll_params pll_re_vco_params = {\n\t.input_min = 12000000,\n\t.input_max = 1000000000,\n\t.cf_min = 12000000,\n\t.cf_max = 19200000,  \n\t.vco_min = 300000000,\n\t.vco_max = 600000000,\n\t.base_reg = PLLRE_BASE,\n\t.misc_reg = PLLRE_MISC,\n\t.lock_mask = PLLRE_MISC_LOCK,\n\t.lock_enable_bit_idx = PLLRE_MISC_LOCK_ENABLE,\n\t.lock_delay = 300,\n\t.iddq_reg = PLLRE_MISC,\n\t.iddq_bit_idx = PLLRE_IDDQ_BIT,\n\t.div_nmp = &pllre_nmp,\n\t.flags = TEGRA_PLL_USE_LOCK | TEGRA_PLL_HAS_LOCK_ENABLE |\n\t\t TEGRA_PLL_LOCK_MISC,\n};\n\n \nstatic unsigned long tegra114_input_freq[] = {\n\t[ 0] = 13000000,\n\t[ 1] = 16800000,\n\t[ 4] = 19200000,\n\t[ 5] = 38400000,\n\t[ 8] = 12000000,\n\t[ 9] = 48000000,\n\t[12] = 26000000,\n};\n\n#define MASK(x) (BIT(x) - 1)\n\n \n\nstatic const char *mux_plld_out0_plld2_out0[] = {\n\t\"pll_d_out0\", \"pll_d2_out0\",\n};\n#define mux_plld_out0_plld2_out0_idx NULL\n\nstatic const char *mux_pllmcp_clkm[] = {\n\t\"pll_m_out0\", \"pll_c_out0\", \"pll_p_out0\", \"clk_m\", \"pll_m_ud\",\n};\n\nstatic const struct clk_div_table pll_re_div_table[] = {\n\t{ .val = 0, .div = 1 },\n\t{ .val = 1, .div = 2 },\n\t{ .val = 2, .div = 3 },\n\t{ .val = 3, .div = 4 },\n\t{ .val = 4, .div = 5 },\n\t{ .val = 5, .div = 6 },\n\t{ .val = 0, .div = 0 },\n};\n\nstatic struct tegra_clk tegra114_clks[tegra_clk_max] __initdata = {\n\t[tegra_clk_rtc] = { .dt_id = TEGRA114_CLK_RTC, .present = true },\n\t[tegra_clk_timer] = { .dt_id = TEGRA114_CLK_TIMER, .present = true },\n\t[tegra_clk_uarta] = { .dt_id = TEGRA114_CLK_UARTA, .present = true },\n\t[tegra_clk_uartd] = { .dt_id = TEGRA114_CLK_UARTD, .present = true },\n\t[tegra_clk_sdmmc2_8] = { .dt_id = TEGRA114_CLK_SDMMC2, .present = true },\n\t[tegra_clk_i2s1] = { .dt_id = TEGRA114_CLK_I2S1, .present = true },\n\t[tegra_clk_i2c1] = { .dt_id = TEGRA114_CLK_I2C1, .present = true },\n\t[tegra_clk_ndflash] = { .dt_id = TEGRA114_CLK_NDFLASH, .present = true },\n\t[tegra_clk_sdmmc1_8] = { .dt_id = TEGRA114_CLK_SDMMC1, .present = true },\n\t[tegra_clk_sdmmc4_8] = { .dt_id = TEGRA114_CLK_SDMMC4, .present = true },\n\t[tegra_clk_pwm] = { .dt_id = TEGRA114_CLK_PWM, .present = true },\n\t[tegra_clk_i2s0] = { .dt_id = TEGRA114_CLK_I2S0, .present = true },\n\t[tegra_clk_i2s2] = { .dt_id = TEGRA114_CLK_I2S2, .present = true },\n\t[tegra_clk_epp_8] = { .dt_id = TEGRA114_CLK_EPP, .present = true },\n\t[tegra_clk_gr2d_8] = { .dt_id = TEGRA114_CLK_GR2D, .present = true },\n\t[tegra_clk_usbd] = { .dt_id = TEGRA114_CLK_USBD, .present = true },\n\t[tegra_clk_isp] = { .dt_id = TEGRA114_CLK_ISP, .present = true },\n\t[tegra_clk_gr3d_8] = { .dt_id = TEGRA114_CLK_GR3D, .present = true },\n\t[tegra_clk_disp2] = { .dt_id = TEGRA114_CLK_DISP2, .present = true },\n\t[tegra_clk_disp1] = { .dt_id = TEGRA114_CLK_DISP1, .present = true },\n\t[tegra_clk_host1x_8] = { .dt_id = TEGRA114_CLK_HOST1X, .present = true },\n\t[tegra_clk_vcp] = { .dt_id = TEGRA114_CLK_VCP, .present = true },\n\t[tegra_clk_apbdma] = { .dt_id = TEGRA114_CLK_APBDMA, .present = true },\n\t[tegra_clk_kbc] = { .dt_id = TEGRA114_CLK_KBC, .present = true },\n\t[tegra_clk_kfuse] = { .dt_id = TEGRA114_CLK_KFUSE, .present = true },\n\t[tegra_clk_sbc1_8] = { .dt_id = TEGRA114_CLK_SBC1, .present = true },\n\t[tegra_clk_nor] = { .dt_id = TEGRA114_CLK_NOR, .present = true },\n\t[tegra_clk_sbc2_8] = { .dt_id = TEGRA114_CLK_SBC2, .present = true },\n\t[tegra_clk_sbc3_8] = { .dt_id = TEGRA114_CLK_SBC3, .present = true },\n\t[tegra_clk_i2c5] = { .dt_id = TEGRA114_CLK_I2C5, .present = true },\n\t[tegra_clk_mipi] = { .dt_id = TEGRA114_CLK_MIPI, .present = true },\n\t[tegra_clk_hdmi] = { .dt_id = TEGRA114_CLK_HDMI, .present = true },\n\t[tegra_clk_csi] = { .dt_id = TEGRA114_CLK_CSI, .present = true },\n\t[tegra_clk_i2c2] = { .dt_id = TEGRA114_CLK_I2C2, .present = true },\n\t[tegra_clk_uartc] = { .dt_id = TEGRA114_CLK_UARTC, .present = true },\n\t[tegra_clk_emc] = { .dt_id = TEGRA114_CLK_EMC, .present = true },\n\t[tegra_clk_usb2] = { .dt_id = TEGRA114_CLK_USB2, .present = true },\n\t[tegra_clk_usb3] = { .dt_id = TEGRA114_CLK_USB3, .present = true },\n\t[tegra_clk_vde_8] = { .dt_id = TEGRA114_CLK_VDE, .present = true },\n\t[tegra_clk_bsea] = { .dt_id = TEGRA114_CLK_BSEA, .present = true },\n\t[tegra_clk_bsev] = { .dt_id = TEGRA114_CLK_BSEV, .present = true },\n\t[tegra_clk_i2c3] = { .dt_id = TEGRA114_CLK_I2C3, .present = true },\n\t[tegra_clk_sbc4_8] = { .dt_id = TEGRA114_CLK_SBC4, .present = true },\n\t[tegra_clk_sdmmc3_8] = { .dt_id = TEGRA114_CLK_SDMMC3, .present = true },\n\t[tegra_clk_owr] = { .dt_id = TEGRA114_CLK_OWR, .present = true },\n\t[tegra_clk_csite] = { .dt_id = TEGRA114_CLK_CSITE, .present = true },\n\t[tegra_clk_la] = { .dt_id = TEGRA114_CLK_LA, .present = true },\n\t[tegra_clk_trace] = { .dt_id = TEGRA114_CLK_TRACE, .present = true },\n\t[tegra_clk_soc_therm] = { .dt_id = TEGRA114_CLK_SOC_THERM, .present = true },\n\t[tegra_clk_dtv] = { .dt_id = TEGRA114_CLK_DTV, .present = true },\n\t[tegra_clk_ndspeed] = { .dt_id = TEGRA114_CLK_NDSPEED, .present = true },\n\t[tegra_clk_i2cslow] = { .dt_id = TEGRA114_CLK_I2CSLOW, .present = true },\n\t[tegra_clk_tsec] = { .dt_id = TEGRA114_CLK_TSEC, .present = true },\n\t[tegra_clk_xusb_host] = { .dt_id = TEGRA114_CLK_XUSB_HOST, .present = true },\n\t[tegra_clk_msenc] = { .dt_id = TEGRA114_CLK_MSENC, .present = true },\n\t[tegra_clk_csus] = { .dt_id = TEGRA114_CLK_CSUS, .present = true },\n\t[tegra_clk_mselect] = { .dt_id = TEGRA114_CLK_MSELECT, .present = true },\n\t[tegra_clk_tsensor] = { .dt_id = TEGRA114_CLK_TSENSOR, .present = true },\n\t[tegra_clk_i2s3] = { .dt_id = TEGRA114_CLK_I2S3, .present = true },\n\t[tegra_clk_i2s4] = { .dt_id = TEGRA114_CLK_I2S4, .present = true },\n\t[tegra_clk_i2c4] = { .dt_id = TEGRA114_CLK_I2C4, .present = true },\n\t[tegra_clk_sbc5_8] = { .dt_id = TEGRA114_CLK_SBC5, .present = true },\n\t[tegra_clk_sbc6_8] = { .dt_id = TEGRA114_CLK_SBC6, .present = true },\n\t[tegra_clk_d_audio] = { .dt_id = TEGRA114_CLK_D_AUDIO, .present = true },\n\t[tegra_clk_apbif] = { .dt_id = TEGRA114_CLK_APBIF, .present = true },\n\t[tegra_clk_dam0] = { .dt_id = TEGRA114_CLK_DAM0, .present = true },\n\t[tegra_clk_dam1] = { .dt_id = TEGRA114_CLK_DAM1, .present = true },\n\t[tegra_clk_dam2] = { .dt_id = TEGRA114_CLK_DAM2, .present = true },\n\t[tegra_clk_hda2codec_2x] = { .dt_id = TEGRA114_CLK_HDA2CODEC_2X, .present = true },\n\t[tegra_clk_audio0_2x] = { .dt_id = TEGRA114_CLK_AUDIO0_2X, .present = true },\n\t[tegra_clk_audio1_2x] = { .dt_id = TEGRA114_CLK_AUDIO1_2X, .present = true },\n\t[tegra_clk_audio2_2x] = { .dt_id = TEGRA114_CLK_AUDIO2_2X, .present = true },\n\t[tegra_clk_audio3_2x] = { .dt_id = TEGRA114_CLK_AUDIO3_2X, .present = true },\n\t[tegra_clk_audio4_2x] = { .dt_id = TEGRA114_CLK_AUDIO4_2X, .present = true },\n\t[tegra_clk_spdif_2x] = { .dt_id = TEGRA114_CLK_SPDIF_2X, .present = true },\n\t[tegra_clk_actmon] = { .dt_id = TEGRA114_CLK_ACTMON, .present = true },\n\t[tegra_clk_extern1] = { .dt_id = TEGRA114_CLK_EXTERN1, .present = true },\n\t[tegra_clk_extern2] = { .dt_id = TEGRA114_CLK_EXTERN2, .present = true },\n\t[tegra_clk_extern3] = { .dt_id = TEGRA114_CLK_EXTERN3, .present = true },\n\t[tegra_clk_hda] = { .dt_id = TEGRA114_CLK_HDA, .present = true },\n\t[tegra_clk_se] = { .dt_id = TEGRA114_CLK_SE, .present = true },\n\t[tegra_clk_hda2hdmi] = { .dt_id = TEGRA114_CLK_HDA2HDMI, .present = true },\n\t[tegra_clk_cilab] = { .dt_id = TEGRA114_CLK_CILAB, .present = true },\n\t[tegra_clk_cilcd] = { .dt_id = TEGRA114_CLK_CILCD, .present = true },\n\t[tegra_clk_cile] = { .dt_id = TEGRA114_CLK_CILE, .present = true },\n\t[tegra_clk_dsialp] = { .dt_id = TEGRA114_CLK_DSIALP, .present = true },\n\t[tegra_clk_dsiblp] = { .dt_id = TEGRA114_CLK_DSIBLP, .present = true },\n\t[tegra_clk_dds] = { .dt_id = TEGRA114_CLK_DDS, .present = true },\n\t[tegra_clk_dp2] = { .dt_id = TEGRA114_CLK_DP2, .present = true },\n\t[tegra_clk_amx] = { .dt_id = TEGRA114_CLK_AMX, .present = true },\n\t[tegra_clk_adx] = { .dt_id = TEGRA114_CLK_ADX, .present = true },\n\t[tegra_clk_xusb_ss] = { .dt_id = TEGRA114_CLK_XUSB_SS, .present = true },\n\t[tegra_clk_uartb] = { .dt_id = TEGRA114_CLK_UARTB, .present = true },\n\t[tegra_clk_vfir] = { .dt_id = TEGRA114_CLK_VFIR, .present = true },\n\t[tegra_clk_spdif_in] = { .dt_id = TEGRA114_CLK_SPDIF_IN, .present = true },\n\t[tegra_clk_spdif_out] = { .dt_id = TEGRA114_CLK_SPDIF_OUT, .present = true },\n\t[tegra_clk_vi_8] = { .dt_id = TEGRA114_CLK_VI, .present = true },\n\t[tegra_clk_fuse] = { .dt_id = TEGRA114_CLK_FUSE, .present = true },\n\t[tegra_clk_fuse_burn] = { .dt_id = TEGRA114_CLK_FUSE_BURN, .present = true },\n\t[tegra_clk_clk_32k] = { .dt_id = TEGRA114_CLK_CLK_32K, .present = true },\n\t[tegra_clk_clk_m] = { .dt_id = TEGRA114_CLK_CLK_M, .present = true },\n\t[tegra_clk_osc] = { .dt_id = TEGRA114_CLK_OSC, .present = true },\n\t[tegra_clk_osc_div2] = { .dt_id = TEGRA114_CLK_OSC_DIV2, .present = true },\n\t[tegra_clk_osc_div4] = { .dt_id = TEGRA114_CLK_OSC_DIV4, .present = true },\n\t[tegra_clk_pll_ref] = { .dt_id = TEGRA114_CLK_PLL_REF, .present = true },\n\t[tegra_clk_pll_c] = { .dt_id = TEGRA114_CLK_PLL_C, .present = true },\n\t[tegra_clk_pll_c_out1] = { .dt_id = TEGRA114_CLK_PLL_C_OUT1, .present = true },\n\t[tegra_clk_pll_c2] = { .dt_id = TEGRA114_CLK_PLL_C2, .present = true },\n\t[tegra_clk_pll_c3] = { .dt_id = TEGRA114_CLK_PLL_C3, .present = true },\n\t[tegra_clk_pll_m] = { .dt_id = TEGRA114_CLK_PLL_M, .present = true },\n\t[tegra_clk_pll_m_out1] = { .dt_id = TEGRA114_CLK_PLL_M_OUT1, .present = true },\n\t[tegra_clk_pll_p] = { .dt_id = TEGRA114_CLK_PLL_P, .present = true },\n\t[tegra_clk_pll_p_out1] = { .dt_id = TEGRA114_CLK_PLL_P_OUT1, .present = true },\n\t[tegra_clk_pll_p_out2_int] = { .dt_id = TEGRA114_CLK_PLL_P_OUT2, .present = true },\n\t[tegra_clk_pll_p_out3] = { .dt_id = TEGRA114_CLK_PLL_P_OUT3, .present = true },\n\t[tegra_clk_pll_p_out4] = { .dt_id = TEGRA114_CLK_PLL_P_OUT4, .present = true },\n\t[tegra_clk_pll_a] = { .dt_id = TEGRA114_CLK_PLL_A, .present = true },\n\t[tegra_clk_pll_a_out0] = { .dt_id = TEGRA114_CLK_PLL_A_OUT0, .present = true },\n\t[tegra_clk_pll_d] = { .dt_id = TEGRA114_CLK_PLL_D, .present = true },\n\t[tegra_clk_pll_d_out0] = { .dt_id = TEGRA114_CLK_PLL_D_OUT0, .present = true },\n\t[tegra_clk_pll_d2] = { .dt_id = TEGRA114_CLK_PLL_D2, .present = true },\n\t[tegra_clk_pll_d2_out0] = { .dt_id = TEGRA114_CLK_PLL_D2_OUT0, .present = true },\n\t[tegra_clk_pll_u] = { .dt_id = TEGRA114_CLK_PLL_U, .present = true },\n\t[tegra_clk_pll_u_480m] = { .dt_id = TEGRA114_CLK_PLL_U_480M, .present = true },\n\t[tegra_clk_pll_u_60m] = { .dt_id = TEGRA114_CLK_PLL_U_60M, .present = true },\n\t[tegra_clk_pll_u_48m] = { .dt_id = TEGRA114_CLK_PLL_U_48M, .present = true },\n\t[tegra_clk_pll_u_12m] = { .dt_id = TEGRA114_CLK_PLL_U_12M, .present = true },\n\t[tegra_clk_pll_x] = { .dt_id = TEGRA114_CLK_PLL_X, .present = true },\n\t[tegra_clk_pll_x_out0] = { .dt_id = TEGRA114_CLK_PLL_X_OUT0, .present = true },\n\t[tegra_clk_pll_re_vco] = { .dt_id = TEGRA114_CLK_PLL_RE_VCO, .present = true },\n\t[tegra_clk_pll_re_out] = { .dt_id = TEGRA114_CLK_PLL_RE_OUT, .present = true },\n\t[tegra_clk_pll_e_out0] = { .dt_id = TEGRA114_CLK_PLL_E_OUT0, .present = true },\n\t[tegra_clk_spdif_in_sync] = { .dt_id = TEGRA114_CLK_SPDIF_IN_SYNC, .present = true },\n\t[tegra_clk_i2s0_sync] = { .dt_id = TEGRA114_CLK_I2S0_SYNC, .present = true },\n\t[tegra_clk_i2s1_sync] = { .dt_id = TEGRA114_CLK_I2S1_SYNC, .present = true },\n\t[tegra_clk_i2s2_sync] = { .dt_id = TEGRA114_CLK_I2S2_SYNC, .present = true },\n\t[tegra_clk_i2s3_sync] = { .dt_id = TEGRA114_CLK_I2S3_SYNC, .present = true },\n\t[tegra_clk_i2s4_sync] = { .dt_id = TEGRA114_CLK_I2S4_SYNC, .present = true },\n\t[tegra_clk_vimclk_sync] = { .dt_id = TEGRA114_CLK_VIMCLK_SYNC, .present = true },\n\t[tegra_clk_audio0] = { .dt_id = TEGRA114_CLK_AUDIO0, .present = true },\n\t[tegra_clk_audio1] = { .dt_id = TEGRA114_CLK_AUDIO1, .present = true },\n\t[tegra_clk_audio2] = { .dt_id = TEGRA114_CLK_AUDIO2, .present = true },\n\t[tegra_clk_audio3] = { .dt_id = TEGRA114_CLK_AUDIO3, .present = true },\n\t[tegra_clk_audio4] = { .dt_id = TEGRA114_CLK_AUDIO4, .present = true },\n\t[tegra_clk_spdif] = { .dt_id = TEGRA114_CLK_SPDIF, .present = true },\n\t[tegra_clk_xusb_host_src] = { .dt_id = TEGRA114_CLK_XUSB_HOST_SRC, .present = true },\n\t[tegra_clk_xusb_falcon_src] = { .dt_id = TEGRA114_CLK_XUSB_FALCON_SRC, .present = true },\n\t[tegra_clk_xusb_fs_src] = { .dt_id = TEGRA114_CLK_XUSB_FS_SRC, .present = true },\n\t[tegra_clk_xusb_ss_src] = { .dt_id = TEGRA114_CLK_XUSB_SS_SRC, .present = true },\n\t[tegra_clk_xusb_ss_div2] = { .dt_id = TEGRA114_CLK_XUSB_SS_DIV2, .present = true},\n\t[tegra_clk_xusb_dev_src] = { .dt_id = TEGRA114_CLK_XUSB_DEV_SRC, .present = true },\n\t[tegra_clk_xusb_dev] = { .dt_id = TEGRA114_CLK_XUSB_DEV, .present = true },\n\t[tegra_clk_xusb_hs_src] = { .dt_id = TEGRA114_CLK_XUSB_HS_SRC, .present = true },\n\t[tegra_clk_sclk] = { .dt_id = TEGRA114_CLK_SCLK, .present = true },\n\t[tegra_clk_hclk] = { .dt_id = TEGRA114_CLK_HCLK, .present = true },\n\t[tegra_clk_pclk] = { .dt_id = TEGRA114_CLK_PCLK, .present = true },\n\t[tegra_clk_cclk_g] = { .dt_id = TEGRA114_CLK_CCLK_G, .present = true },\n\t[tegra_clk_cclk_lp] = { .dt_id = TEGRA114_CLK_CCLK_LP, .present = true },\n\t[tegra_clk_dfll_ref] = { .dt_id = TEGRA114_CLK_DFLL_REF, .present = true },\n\t[tegra_clk_dfll_soc] = { .dt_id = TEGRA114_CLK_DFLL_SOC, .present = true },\n\t[tegra_clk_audio0_mux] = { .dt_id = TEGRA114_CLK_AUDIO0_MUX, .present = true },\n\t[tegra_clk_audio1_mux] = { .dt_id = TEGRA114_CLK_AUDIO1_MUX, .present = true },\n\t[tegra_clk_audio2_mux] = { .dt_id = TEGRA114_CLK_AUDIO2_MUX, .present = true },\n\t[tegra_clk_audio3_mux] = { .dt_id = TEGRA114_CLK_AUDIO3_MUX, .present = true },\n\t[tegra_clk_audio4_mux] = { .dt_id = TEGRA114_CLK_AUDIO4_MUX, .present = true },\n\t[tegra_clk_spdif_mux] = { .dt_id = TEGRA114_CLK_SPDIF_MUX, .present = true },\n\t[tegra_clk_dsia_mux] = { .dt_id = TEGRA114_CLK_DSIA_MUX, .present = true },\n\t[tegra_clk_dsib_mux] = { .dt_id = TEGRA114_CLK_DSIB_MUX, .present = true },\n\t[tegra_clk_cec] = { .dt_id = TEGRA114_CLK_CEC, .present = true },\n};\n\nstatic struct tegra_devclk devclks[] __initdata = {\n\t{ .con_id = \"clk_m\", .dt_id = TEGRA114_CLK_CLK_M },\n\t{ .con_id = \"pll_ref\", .dt_id = TEGRA114_CLK_PLL_REF },\n\t{ .con_id = \"clk_32k\", .dt_id = TEGRA114_CLK_CLK_32K },\n\t{ .con_id = \"osc\", .dt_id = TEGRA114_CLK_OSC },\n\t{ .con_id = \"osc_div2\", .dt_id = TEGRA114_CLK_OSC_DIV2 },\n\t{ .con_id = \"osc_div4\", .dt_id = TEGRA114_CLK_OSC_DIV4 },\n\t{ .con_id = \"pll_c\", .dt_id = TEGRA114_CLK_PLL_C },\n\t{ .con_id = \"pll_c_out1\", .dt_id = TEGRA114_CLK_PLL_C_OUT1 },\n\t{ .con_id = \"pll_c2\", .dt_id = TEGRA114_CLK_PLL_C2 },\n\t{ .con_id = \"pll_c3\", .dt_id = TEGRA114_CLK_PLL_C3 },\n\t{ .con_id = \"pll_p\", .dt_id = TEGRA114_CLK_PLL_P },\n\t{ .con_id = \"pll_p_out1\", .dt_id = TEGRA114_CLK_PLL_P_OUT1 },\n\t{ .con_id = \"pll_p_out2\", .dt_id = TEGRA114_CLK_PLL_P_OUT2 },\n\t{ .con_id = \"pll_p_out3\", .dt_id = TEGRA114_CLK_PLL_P_OUT3 },\n\t{ .con_id = \"pll_p_out4\", .dt_id = TEGRA114_CLK_PLL_P_OUT4 },\n\t{ .con_id = \"pll_m\", .dt_id = TEGRA114_CLK_PLL_M },\n\t{ .con_id = \"pll_m_out1\", .dt_id = TEGRA114_CLK_PLL_M_OUT1 },\n\t{ .con_id = \"pll_x\", .dt_id = TEGRA114_CLK_PLL_X },\n\t{ .con_id = \"pll_x_out0\", .dt_id = TEGRA114_CLK_PLL_X_OUT0 },\n\t{ .con_id = \"pll_u\", .dt_id = TEGRA114_CLK_PLL_U },\n\t{ .con_id = \"pll_u_480M\", .dt_id = TEGRA114_CLK_PLL_U_480M },\n\t{ .con_id = \"pll_u_60M\", .dt_id = TEGRA114_CLK_PLL_U_60M },\n\t{ .con_id = \"pll_u_48M\", .dt_id = TEGRA114_CLK_PLL_U_48M },\n\t{ .con_id = \"pll_u_12M\", .dt_id = TEGRA114_CLK_PLL_U_12M },\n\t{ .con_id = \"pll_d\", .dt_id = TEGRA114_CLK_PLL_D },\n\t{ .con_id = \"pll_d_out0\", .dt_id = TEGRA114_CLK_PLL_D_OUT0 },\n\t{ .con_id = \"pll_d2\", .dt_id = TEGRA114_CLK_PLL_D2 },\n\t{ .con_id = \"pll_d2_out0\", .dt_id = TEGRA114_CLK_PLL_D2_OUT0 },\n\t{ .con_id = \"pll_a\", .dt_id = TEGRA114_CLK_PLL_A },\n\t{ .con_id = \"pll_a_out0\", .dt_id = TEGRA114_CLK_PLL_A_OUT0 },\n\t{ .con_id = \"pll_re_vco\", .dt_id = TEGRA114_CLK_PLL_RE_VCO },\n\t{ .con_id = \"pll_re_out\", .dt_id = TEGRA114_CLK_PLL_RE_OUT },\n\t{ .con_id = \"pll_e_out0\", .dt_id = TEGRA114_CLK_PLL_E_OUT0 },\n\t{ .con_id = \"spdif_in_sync\", .dt_id = TEGRA114_CLK_SPDIF_IN_SYNC },\n\t{ .con_id = \"i2s0_sync\", .dt_id = TEGRA114_CLK_I2S0_SYNC },\n\t{ .con_id = \"i2s1_sync\", .dt_id = TEGRA114_CLK_I2S1_SYNC },\n\t{ .con_id = \"i2s2_sync\", .dt_id = TEGRA114_CLK_I2S2_SYNC },\n\t{ .con_id = \"i2s3_sync\", .dt_id = TEGRA114_CLK_I2S3_SYNC },\n\t{ .con_id = \"i2s4_sync\", .dt_id = TEGRA114_CLK_I2S4_SYNC },\n\t{ .con_id = \"vimclk_sync\", .dt_id = TEGRA114_CLK_VIMCLK_SYNC },\n\t{ .con_id = \"audio0\", .dt_id = TEGRA114_CLK_AUDIO0 },\n\t{ .con_id = \"audio1\", .dt_id = TEGRA114_CLK_AUDIO1 },\n\t{ .con_id = \"audio2\", .dt_id = TEGRA114_CLK_AUDIO2 },\n\t{ .con_id = \"audio3\", .dt_id = TEGRA114_CLK_AUDIO3 },\n\t{ .con_id = \"audio4\", .dt_id = TEGRA114_CLK_AUDIO4 },\n\t{ .con_id = \"spdif\", .dt_id = TEGRA114_CLK_SPDIF },\n\t{ .con_id = \"audio0_2x\", .dt_id = TEGRA114_CLK_AUDIO0_2X },\n\t{ .con_id = \"audio1_2x\", .dt_id = TEGRA114_CLK_AUDIO1_2X },\n\t{ .con_id = \"audio2_2x\", .dt_id = TEGRA114_CLK_AUDIO2_2X },\n\t{ .con_id = \"audio3_2x\", .dt_id = TEGRA114_CLK_AUDIO3_2X },\n\t{ .con_id = \"audio4_2x\", .dt_id = TEGRA114_CLK_AUDIO4_2X },\n\t{ .con_id = \"spdif_2x\", .dt_id = TEGRA114_CLK_SPDIF_2X },\n\t{ .con_id = \"extern1\", .dt_id = TEGRA114_CLK_EXTERN1 },\n\t{ .con_id = \"extern2\", .dt_id = TEGRA114_CLK_EXTERN2 },\n\t{ .con_id = \"extern3\", .dt_id = TEGRA114_CLK_EXTERN3 },\n\t{ .con_id = \"cclk_g\", .dt_id = TEGRA114_CLK_CCLK_G },\n\t{ .con_id = \"cclk_lp\", .dt_id = TEGRA114_CLK_CCLK_LP },\n\t{ .con_id = \"sclk\", .dt_id = TEGRA114_CLK_SCLK },\n\t{ .con_id = \"hclk\", .dt_id = TEGRA114_CLK_HCLK },\n\t{ .con_id = \"pclk\", .dt_id = TEGRA114_CLK_PCLK },\n\t{ .con_id = \"fuse\", .dt_id = TEGRA114_CLK_FUSE },\n\t{ .dev_id = \"rtc-tegra\", .dt_id = TEGRA114_CLK_RTC },\n\t{ .dev_id = \"timer\", .dt_id = TEGRA114_CLK_TIMER },\n};\n\nstatic const char *mux_pllm_pllc2_c_c3_pllp_plla[] = {\n\t\"pll_m\", \"pll_c2\", \"pll_c\", \"pll_c3\", \"pll_p\", \"pll_a_out0\"\n};\nstatic u32 mux_pllm_pllc2_c_c3_pllp_plla_idx[] = {\n\t[0] = 0, [1] = 1, [2] = 2, [3] = 3, [4] = 4, [5] = 6,\n};\n\nstatic struct tegra_audio_clk_info tegra114_audio_plls[] = {\n\t{ \"pll_a\", &pll_a_params, tegra_clk_pll_a, \"pll_p_out1\" },\n};\n\nstatic struct clk **clks;\n\nstatic unsigned long osc_freq;\nstatic unsigned long pll_ref_freq;\n\nstatic void __init tegra114_fixed_clk_init(void __iomem *clk_base)\n{\n\tstruct clk *clk;\n\n\t \n\tclk = clk_register_fixed_rate(NULL, \"clk_32k\", NULL, 0, 32768);\n\tclks[TEGRA114_CLK_CLK_32K] = clk;\n}\n\nstatic void __init tegra114_pll_init(void __iomem *clk_base,\n\t\t\t\t     void __iomem *pmc)\n{\n\tstruct clk *clk;\n\n\t \n\tclk = tegra_clk_register_pllxc(\"pll_c\", \"pll_ref\", clk_base,\n\t\t\tpmc, 0, &pll_c_params, NULL);\n\tclks[TEGRA114_CLK_PLL_C] = clk;\n\n\t \n\tclk = tegra_clk_register_divider(\"pll_c_out1_div\", \"pll_c\",\n\t\t\tclk_base + PLLC_OUT, 0, TEGRA_DIVIDER_ROUND_UP,\n\t\t\t8, 8, 1, NULL);\n\tclk = tegra_clk_register_pll_out(\"pll_c_out1\", \"pll_c_out1_div\",\n\t\t\t\tclk_base + PLLC_OUT, 1, 0,\n\t\t\t\tCLK_SET_RATE_PARENT, 0, NULL);\n\tclks[TEGRA114_CLK_PLL_C_OUT1] = clk;\n\n\t \n\tclk = tegra_clk_register_pllc(\"pll_c2\", \"pll_ref\", clk_base, pmc, 0,\n\t\t\t     &pll_c2_params, NULL);\n\tclks[TEGRA114_CLK_PLL_C2] = clk;\n\n\t \n\tclk = tegra_clk_register_pllc(\"pll_c3\", \"pll_ref\", clk_base, pmc, 0,\n\t\t\t     &pll_c3_params, NULL);\n\tclks[TEGRA114_CLK_PLL_C3] = clk;\n\n\t \n\tclk = tegra_clk_register_pllm(\"pll_m\", \"pll_ref\", clk_base, pmc,\n\t\t\t     CLK_SET_RATE_GATE, &pll_m_params, NULL);\n\tclks[TEGRA114_CLK_PLL_M] = clk;\n\n\t \n\tclk = tegra_clk_register_divider(\"pll_m_out1_div\", \"pll_m\",\n\t\t\t\tclk_base + PLLM_OUT, 0, TEGRA_DIVIDER_ROUND_UP,\n\t\t\t\t8, 8, 1, NULL);\n\tclk = tegra_clk_register_pll_out(\"pll_m_out1\", \"pll_m_out1_div\",\n\t\t\t\tclk_base + PLLM_OUT, 1, 0, CLK_IGNORE_UNUSED |\n\t\t\t\tCLK_SET_RATE_PARENT, 0, NULL);\n\tclks[TEGRA114_CLK_PLL_M_OUT1] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_m_ud\", \"pll_m\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 1);\n\n\t \n\tclk = tegra_clk_register_pllu_tegra114(\"pll_u\", \"pll_ref\", clk_base, 0,\n\t\t\t\t\t       &pll_u_params, &pll_u_lock);\n\tclks[TEGRA114_CLK_PLL_U] = clk;\n\n\t \n\tclk = clk_register_gate(NULL, \"pll_u_480M\", \"pll_u\",\n\t\t\t\tCLK_SET_RATE_PARENT, clk_base + PLLU_BASE,\n\t\t\t\t22, 0, &pll_u_lock);\n\tclks[TEGRA114_CLK_PLL_U_480M] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_u_60M\", \"pll_u\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 8);\n\tclks[TEGRA114_CLK_PLL_U_60M] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_u_48M\", \"pll_u\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 10);\n\tclks[TEGRA114_CLK_PLL_U_48M] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_u_12M\", \"pll_u\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 40);\n\tclks[TEGRA114_CLK_PLL_U_12M] = clk;\n\n\t \n\tclk = tegra_clk_register_pll(\"pll_d\", \"pll_ref\", clk_base, pmc, 0,\n\t\t\t    &pll_d_params, &pll_d_lock);\n\tclks[TEGRA114_CLK_PLL_D] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_d_out0\", \"pll_d\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 2);\n\tclks[TEGRA114_CLK_PLL_D_OUT0] = clk;\n\n\t \n\tclk = tegra_clk_register_pll(\"pll_d2\", \"pll_ref\", clk_base, pmc, 0,\n\t\t\t    &pll_d2_params, &pll_d2_lock);\n\tclks[TEGRA114_CLK_PLL_D2] = clk;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"pll_d2_out0\", \"pll_d2\",\n\t\t\t\t\tCLK_SET_RATE_PARENT, 1, 2);\n\tclks[TEGRA114_CLK_PLL_D2_OUT0] = clk;\n\n\t \n\tclk = tegra_clk_register_pllre(\"pll_re_vco\", \"pll_ref\", clk_base, pmc,\n\t\t\t     0, &pll_re_vco_params, &pll_re_lock, pll_ref_freq);\n\tclks[TEGRA114_CLK_PLL_RE_VCO] = clk;\n\n\tclk = clk_register_divider_table(NULL, \"pll_re_out\", \"pll_re_vco\", 0,\n\t\t\t\t\t clk_base + PLLRE_BASE, 16, 4, 0,\n\t\t\t\t\t pll_re_div_table, &pll_re_lock);\n\tclks[TEGRA114_CLK_PLL_RE_OUT] = clk;\n\n\t \n\tclk = tegra_clk_register_plle_tegra114(\"pll_e_out0\", \"pll_ref\",\n\t\t\t\t      clk_base, 0, &pll_e_params, NULL);\n\tclks[TEGRA114_CLK_PLL_E_OUT0] = clk;\n}\n\n#define CLK_SOURCE_VI_SENSOR 0x1a8\n\nstatic struct tegra_periph_init_data tegra_periph_clk_list[] = {\n\tMUX8(\"vi_sensor\", mux_pllm_pllc2_c_c3_pllp_plla, CLK_SOURCE_VI_SENSOR, 20, TEGRA_PERIPH_NO_RESET, TEGRA114_CLK_VI_SENSOR),\n};\n\nstatic __init void tegra114_periph_clk_init(void __iomem *clk_base,\n\t\t\t\t\t    void __iomem *pmc_base)\n{\n\tstruct clk *clk;\n\tstruct tegra_periph_init_data *data;\n\tunsigned int i;\n\n\t \n\tclk = clk_register_fixed_factor(NULL, \"xusb_ss_div2\", \"xusb_ss_src\", 0,\n\t\t\t\t\t1, 2);\n\tclks[TEGRA114_CLK_XUSB_SS_DIV2] = clk;\n\n\t \n\tclk = clk_register_mux(NULL, \"dsia_mux\", mux_plld_out0_plld2_out0,\n\t\t\t       ARRAY_SIZE(mux_plld_out0_plld2_out0),\n\t\t\t       CLK_SET_RATE_NO_REPARENT,\n\t\t\t       clk_base + PLLD_BASE, 25, 1, 0, &pll_d_lock);\n\tclks[TEGRA114_CLK_DSIA_MUX] = clk;\n\n\t \n\tclk = clk_register_mux(NULL, \"dsib_mux\", mux_plld_out0_plld2_out0,\n\t\t\t       ARRAY_SIZE(mux_plld_out0_plld2_out0),\n\t\t\t       CLK_SET_RATE_NO_REPARENT,\n\t\t\t       clk_base + PLLD2_BASE, 25, 1, 0, &pll_d2_lock);\n\tclks[TEGRA114_CLK_DSIB_MUX] = clk;\n\n\tclk = tegra_clk_register_periph_gate(\"dsia\", \"dsia_mux\", 0, clk_base,\n\t\t\t\t\t     0, 48, periph_clk_enb_refcnt);\n\tclks[TEGRA114_CLK_DSIA] = clk;\n\n\tclk = tegra_clk_register_periph_gate(\"dsib\", \"dsib_mux\", 0, clk_base,\n\t\t\t\t\t     0, 82, periph_clk_enb_refcnt);\n\tclks[TEGRA114_CLK_DSIB] = clk;\n\n\t \n\tclk = clk_register_mux(NULL, \"emc_mux\", mux_pllmcp_clkm,\n\t\t\t       ARRAY_SIZE(mux_pllmcp_clkm),\n\t\t\t       CLK_SET_RATE_NO_REPARENT,\n\t\t\t       clk_base + CLK_SOURCE_EMC,\n\t\t\t       29, 3, 0, &emc_lock);\n\n\tclk = tegra_clk_register_mc(\"mc\", \"emc_mux\", clk_base + CLK_SOURCE_EMC,\n\t\t\t\t    &emc_lock);\n\tclks[TEGRA114_CLK_MC] = clk;\n\n\tclk = tegra_clk_register_periph_gate(\"mipi-cal\", \"clk_m\", 0, clk_base,\n\t\t\t\t\t     CLK_SET_RATE_PARENT, 56,\n\t\t\t\t\t     periph_clk_enb_refcnt);\n\tclks[TEGRA114_CLK_MIPI_CAL] = clk;\n\n\tfor (i = 0; i < ARRAY_SIZE(tegra_periph_clk_list); i++) {\n\t\tdata = &tegra_periph_clk_list[i];\n\t\tclk = tegra_clk_register_periph_data(clk_base, data);\n\t\tclks[data->clk_id] = clk;\n\t}\n\n\ttegra_periph_clk_init(clk_base, pmc_base, tegra114_clks,\n\t\t\t\t&pll_p_params);\n}\n\n \nstatic void tegra114_wait_cpu_in_reset(u32 cpu)\n{\n\tunsigned int reg;\n\n\tdo {\n\t\treg = readl(clk_base + CLK_RST_CONTROLLER_CPU_CMPLX_STATUS);\n\t\tcpu_relax();\n\t} while (!(reg & (1 << cpu)));   \n}\n\nstatic void tegra114_disable_cpu_clock(u32 cpu)\n{\n\t \n}\n\n#ifdef CONFIG_PM_SLEEP\nstatic void tegra114_cpu_clock_suspend(void)\n{\n\t \n\ttegra114_cpu_clk_sctx.clk_csite_src =\n\t\t\t\treadl(clk_base + CLK_SOURCE_CSITE);\n\twritel(3 << 30, clk_base + CLK_SOURCE_CSITE);\n\n\ttegra114_cpu_clk_sctx.cclkg_burst =\n\t\t\t\treadl(clk_base + CCLKG_BURST_POLICY);\n\ttegra114_cpu_clk_sctx.cclkg_divider =\n\t\t\t\treadl(clk_base + CCLKG_BURST_POLICY + 4);\n}\n\nstatic void tegra114_cpu_clock_resume(void)\n{\n\twritel(tegra114_cpu_clk_sctx.clk_csite_src,\n\t\t\t\t\tclk_base + CLK_SOURCE_CSITE);\n\n\twritel(tegra114_cpu_clk_sctx.cclkg_burst,\n\t\t\t\t\tclk_base + CCLKG_BURST_POLICY);\n\twritel(tegra114_cpu_clk_sctx.cclkg_divider,\n\t\t\t\t\tclk_base + CCLKG_BURST_POLICY + 4);\n}\n#endif\n\nstatic struct tegra_cpu_car_ops tegra114_cpu_car_ops = {\n\t.wait_for_reset\t= tegra114_wait_cpu_in_reset,\n\t.disable_clock\t= tegra114_disable_cpu_clock,\n#ifdef CONFIG_PM_SLEEP\n\t.suspend\t= tegra114_cpu_clock_suspend,\n\t.resume\t\t= tegra114_cpu_clock_resume,\n#endif\n};\n\nstatic const struct of_device_id pmc_match[] __initconst = {\n\t{ .compatible = \"nvidia,tegra114-pmc\" },\n\t{ },\n};\n\n \nstatic struct tegra_clk_init_table init_table[] __initdata = {\n\t{ TEGRA114_CLK_UARTA, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t{ TEGRA114_CLK_UARTB, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t{ TEGRA114_CLK_UARTC, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t{ TEGRA114_CLK_UARTD, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t{ TEGRA114_CLK_PLL_A, TEGRA114_CLK_CLK_MAX, 564480000, 0 },\n\t{ TEGRA114_CLK_PLL_A_OUT0, TEGRA114_CLK_CLK_MAX, 11289600, 0 },\n\t{ TEGRA114_CLK_I2S0, TEGRA114_CLK_PLL_A_OUT0, 11289600, 0 },\n\t{ TEGRA114_CLK_I2S1, TEGRA114_CLK_PLL_A_OUT0, 11289600, 0 },\n\t{ TEGRA114_CLK_I2S2, TEGRA114_CLK_PLL_A_OUT0, 11289600, 0 },\n\t{ TEGRA114_CLK_I2S3, TEGRA114_CLK_PLL_A_OUT0, 11289600, 0 },\n\t{ TEGRA114_CLK_I2S4, TEGRA114_CLK_PLL_A_OUT0, 11289600, 0 },\n\t{ TEGRA114_CLK_HOST1X, TEGRA114_CLK_PLL_P, 136000000, 0 },\n\t{ TEGRA114_CLK_DFLL_SOC, TEGRA114_CLK_PLL_P, 51000000, 1 },\n\t{ TEGRA114_CLK_DFLL_REF, TEGRA114_CLK_PLL_P, 51000000, 1 },\n\t{ TEGRA114_CLK_DISP1, TEGRA114_CLK_PLL_P, 0, 0 },\n\t{ TEGRA114_CLK_DISP2, TEGRA114_CLK_PLL_P, 0, 0 },\n\t{ TEGRA114_CLK_GR2D, TEGRA114_CLK_PLL_C2, 300000000, 0 },\n\t{ TEGRA114_CLK_GR3D, TEGRA114_CLK_PLL_C2, 300000000, 0 },\n\t{ TEGRA114_CLK_DSIALP, TEGRA114_CLK_PLL_P, 68000000, 0 },\n\t{ TEGRA114_CLK_DSIBLP, TEGRA114_CLK_PLL_P, 68000000, 0 },\n\t{ TEGRA114_CLK_PLL_RE_VCO, TEGRA114_CLK_CLK_MAX, 612000000, 0 },\n\t{ TEGRA114_CLK_XUSB_SS_SRC, TEGRA114_CLK_PLL_RE_OUT, 122400000, 0 },\n\t{ TEGRA114_CLK_XUSB_FS_SRC, TEGRA114_CLK_PLL_U_48M, 48000000, 0 },\n\t{ TEGRA114_CLK_XUSB_HS_SRC, TEGRA114_CLK_XUSB_SS_DIV2, 61200000, 0 },\n\t{ TEGRA114_CLK_XUSB_FALCON_SRC, TEGRA114_CLK_PLL_P, 204000000, 0 },\n\t{ TEGRA114_CLK_XUSB_HOST_SRC, TEGRA114_CLK_PLL_P, 102000000, 0 },\n\t{ TEGRA114_CLK_VDE, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t{ TEGRA114_CLK_SPDIF_IN_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_I2S0_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_I2S1_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_I2S2_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_I2S3_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_I2S4_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_VIMCLK_SYNC, TEGRA114_CLK_CLK_MAX, 24000000, 0 },\n\t{ TEGRA114_CLK_PWM, TEGRA114_CLK_PLL_P, 408000000, 0 },\n\t \n\t{ TEGRA114_CLK_CLK_MAX, TEGRA114_CLK_CLK_MAX, 0, 0 },\n};\n\nstatic void __init tegra114_clock_apply_init_table(void)\n{\n\ttegra_init_from_table(init_table, clks, TEGRA114_CLK_CLK_MAX);\n}\n\n \nstatic void tegra114_car_barrier(void)\n{\n\twmb();\t\t \n\treadl_relaxed(clk_base + CPU_FINETRIM_SELECT);\n}\n\n \nvoid tegra114_clock_tune_cpu_trimmers_high(void)\n{\n\tu32 select = 0;\n\n\t \n\tselect |= ~(CPU_FINETRIM_1_FCPU_1 | CPU_FINETRIM_1_FCPU_2 |\n\t\t    CPU_FINETRIM_1_FCPU_3 | CPU_FINETRIM_1_FCPU_4 |\n\t\t    CPU_FINETRIM_1_FCPU_5 | CPU_FINETRIM_1_FCPU_6);\n\twritel_relaxed(select, clk_base + CPU_FINETRIM_SELECT);\n\n\ttegra114_car_barrier();\n}\nEXPORT_SYMBOL(tegra114_clock_tune_cpu_trimmers_high);\n\n \nvoid tegra114_clock_tune_cpu_trimmers_low(void)\n{\n\tu32 select = 0;\n\n\t \n\tselect |= (CPU_FINETRIM_1_FCPU_1 | CPU_FINETRIM_1_FCPU_2 |\n\t\t   CPU_FINETRIM_1_FCPU_3 | CPU_FINETRIM_1_FCPU_4 |\n\t\t   CPU_FINETRIM_1_FCPU_5 | CPU_FINETRIM_1_FCPU_6);\n\twritel_relaxed(select, clk_base + CPU_FINETRIM_SELECT);\n\n\ttegra114_car_barrier();\n}\nEXPORT_SYMBOL(tegra114_clock_tune_cpu_trimmers_low);\n\n \n \nvoid tegra114_clock_tune_cpu_trimmers_init(void)\n{\n\tu32 dr = 0, r = 0;\n\n\t \n\tr |= (CPU_FINETRIM_R_FCPU_1_MASK | CPU_FINETRIM_R_FCPU_2_MASK |\n\t      CPU_FINETRIM_R_FCPU_3_MASK | CPU_FINETRIM_R_FCPU_4_MASK |\n\t      CPU_FINETRIM_R_FCPU_5_MASK | CPU_FINETRIM_R_FCPU_6_MASK);\n\twritel_relaxed(r, clk_base + CPU_FINETRIM_R);\n\n\t \n\tdr |= (CPU_FINETRIM_1_FCPU_1 | CPU_FINETRIM_1_FCPU_2 |\n\t       CPU_FINETRIM_1_FCPU_3 | CPU_FINETRIM_1_FCPU_4 |\n\t       CPU_FINETRIM_1_FCPU_5 | CPU_FINETRIM_1_FCPU_6);\n\twritel_relaxed(dr, clk_base + CPU_FINETRIM_DR);\n\n\ttegra114_clock_tune_cpu_trimmers_low();\n}\nEXPORT_SYMBOL(tegra114_clock_tune_cpu_trimmers_init);\n\n \nvoid tegra114_clock_assert_dfll_dvco_reset(void)\n{\n\tu32 v;\n\n\tv = readl_relaxed(clk_base + RST_DFLL_DVCO);\n\tv |= (1 << DVFS_DFLL_RESET_SHIFT);\n\twritel_relaxed(v, clk_base + RST_DFLL_DVCO);\n\ttegra114_car_barrier();\n}\nEXPORT_SYMBOL(tegra114_clock_assert_dfll_dvco_reset);\n\n \nvoid tegra114_clock_deassert_dfll_dvco_reset(void)\n{\n\tu32 v;\n\n\tv = readl_relaxed(clk_base + RST_DFLL_DVCO);\n\tv &= ~(1 << DVFS_DFLL_RESET_SHIFT);\n\twritel_relaxed(v, clk_base + RST_DFLL_DVCO);\n\ttegra114_car_barrier();\n}\nEXPORT_SYMBOL(tegra114_clock_deassert_dfll_dvco_reset);\n\nstatic void __init tegra114_clock_init(struct device_node *np)\n{\n\tstruct device_node *node;\n\n\tclk_base = of_iomap(np, 0);\n\tif (!clk_base) {\n\t\tpr_err(\"ioremap tegra114 CAR failed\\n\");\n\t\treturn;\n\t}\n\n\tnode = of_find_matching_node(NULL, pmc_match);\n\tif (!node) {\n\t\tpr_err(\"Failed to find pmc node\\n\");\n\t\tWARN_ON(1);\n\t\treturn;\n\t}\n\n\tpmc_base = of_iomap(node, 0);\n\tof_node_put(node);\n\tif (!pmc_base) {\n\t\tpr_err(\"Can't map pmc registers\\n\");\n\t\tWARN_ON(1);\n\t\treturn;\n\t}\n\n\tclks = tegra_clk_init(clk_base, TEGRA114_CLK_CLK_MAX,\n\t\t\t\tTEGRA114_CLK_PERIPH_BANKS);\n\tif (!clks)\n\t\treturn;\n\n\tif (tegra_osc_clk_init(clk_base, tegra114_clks, tegra114_input_freq,\n\t\t\t       ARRAY_SIZE(tegra114_input_freq), 1, &osc_freq,\n\t\t\t       &pll_ref_freq) < 0)\n\t\treturn;\n\n\ttegra114_fixed_clk_init(clk_base);\n\ttegra114_pll_init(clk_base, pmc_base);\n\ttegra114_periph_clk_init(clk_base, pmc_base);\n\ttegra_audio_clk_init(clk_base, pmc_base, tegra114_clks,\n\t\t\t     tegra114_audio_plls,\n\t\t\t     ARRAY_SIZE(tegra114_audio_plls), 24000000);\n\ttegra_super_clk_gen4_init(clk_base, pmc_base, tegra114_clks,\n\t\t\t\t\t&pll_x_params);\n\n\ttegra_add_of_provider(np, of_clk_src_onecell_get);\n\ttegra_register_devclks(devclks, ARRAY_SIZE(devclks));\n\n\ttegra_clk_apply_init_table = tegra114_clock_apply_init_table;\n\n\ttegra_cpu_car_ops = &tegra114_cpu_car_ops;\n}\nCLK_OF_DECLARE(tegra114, \"nvidia,tegra114-car\", tegra114_clock_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}