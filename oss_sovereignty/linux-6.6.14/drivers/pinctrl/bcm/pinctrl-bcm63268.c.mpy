{
  "module_name": "pinctrl-bcm63268.c",
  "hash_id": "d6a3e2eede6a627324fc044e887b9c1e85b03dd78daa1b40f79a88fa26935e64",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/bcm/pinctrl-bcm63268.c",
  "human_readable_source": "\n \n\n#include <linux/bits.h>\n#include <linux/gpio/driver.h>\n#include <linux/kernel.h>\n#include <linux/of.h>\n#include <linux/pinctrl/pinmux.h>\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n\n#include \"../pinctrl-utils.h\"\n\n#include \"pinctrl-bcm63xx.h\"\n\n#define BCM63268_NUM_GPIOS\t\t52\n#define BCM63268_NUM_LEDS\t\t24\n\n#define BCM63268_LED_REG\t\t0x10\n#define BCM63268_MODE_REG\t\t0x18\n#define BCM63268_CTRL_REG\t\t0x1c\n#define BCM63268_BASEMODE_REG\t\t0x38\n#define  BCM63268_BASEMODE_NAND\t\tBIT(2)  \n#define  BCM63268_BASEMODE_GPIO35\tBIT(4)  \n#define  BCM63268_BASEMODE_DECTPD\tBIT(5)  \n#define  BCM63268_BASEMODE_VDSL_PHY_0\tBIT(6)  \n#define  BCM63268_BASEMODE_VDSL_PHY_1\tBIT(7)  \n#define  BCM63268_BASEMODE_VDSL_PHY_2\tBIT(8)  \n#define  BCM63268_BASEMODE_VDSL_PHY_3\tBIT(9)  \n\nenum bcm63268_pinctrl_reg {\n\tBCM63268_LEDCTRL,\n\tBCM63268_MODE,\n\tBCM63268_CTRL,\n\tBCM63268_BASEMODE,\n};\n\nstruct bcm63268_function {\n\tconst char *name;\n\tconst char * const *groups;\n\tconst unsigned num_groups;\n\n\tenum bcm63268_pinctrl_reg reg;\n\tuint32_t mask;\n};\n\n#define BCM63268_PIN(a, b, basemode)\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.number = a,\t\t\t\t\\\n\t\t.name = b,\t\t\t\t\\\n\t\t.drv_data = (void *)(basemode)\t\t\\\n\t}\n\nstatic const struct pinctrl_pin_desc bcm63268_pins[] = {\n\tPINCTRL_PIN(0, \"gpio0\"),\n\tPINCTRL_PIN(1, \"gpio1\"),\n\tBCM63268_PIN(2, \"gpio2\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(3, \"gpio3\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(4, \"gpio4\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(5, \"gpio5\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(6, \"gpio6\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(7, \"gpio7\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(8, \"gpio8\", BCM63268_BASEMODE_DECTPD),\n\tBCM63268_PIN(9, \"gpio9\", BCM63268_BASEMODE_DECTPD),\n\tBCM63268_PIN(10, \"gpio10\", BCM63268_BASEMODE_VDSL_PHY_0),\n\tBCM63268_PIN(11, \"gpio11\", BCM63268_BASEMODE_VDSL_PHY_0),\n\tBCM63268_PIN(12, \"gpio12\", BCM63268_BASEMODE_VDSL_PHY_1),\n\tBCM63268_PIN(13, \"gpio13\", BCM63268_BASEMODE_VDSL_PHY_1),\n\tPINCTRL_PIN(14, \"gpio14\"),\n\tPINCTRL_PIN(15, \"gpio15\"),\n\tPINCTRL_PIN(16, \"gpio16\"),\n\tPINCTRL_PIN(17, \"gpio17\"),\n\tPINCTRL_PIN(18, \"gpio18\"),\n\tPINCTRL_PIN(19, \"gpio19\"),\n\tPINCTRL_PIN(20, \"gpio20\"),\n\tPINCTRL_PIN(21, \"gpio21\"),\n\tPINCTRL_PIN(22, \"gpio22\"),\n\tPINCTRL_PIN(23, \"gpio23\"),\n\tBCM63268_PIN(24, \"gpio24\",\n\t\t     BCM63268_BASEMODE_NAND | BCM63268_BASEMODE_VDSL_PHY_2),\n\tBCM63268_PIN(25, \"gpio25\",\n\t\t     BCM63268_BASEMODE_NAND | BCM63268_BASEMODE_VDSL_PHY_2),\n\tBCM63268_PIN(26, \"gpio26\",\n\t\t     BCM63268_BASEMODE_NAND | BCM63268_BASEMODE_VDSL_PHY_3),\n\tBCM63268_PIN(27, \"gpio27\",\n\t\t     BCM63268_BASEMODE_NAND | BCM63268_BASEMODE_VDSL_PHY_3),\n\tBCM63268_PIN(28, \"gpio28\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(29, \"gpio29\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(30, \"gpio30\", BCM63268_BASEMODE_NAND),\n\tBCM63268_PIN(31, \"gpio31\", BCM63268_BASEMODE_NAND),\n\tPINCTRL_PIN(32, \"gpio32\"),\n\tPINCTRL_PIN(33, \"gpio33\"),\n\tPINCTRL_PIN(34, \"gpio34\"),\n\tPINCTRL_PIN(35, \"gpio35\"),\n\tPINCTRL_PIN(36, \"gpio36\"),\n\tPINCTRL_PIN(37, \"gpio37\"),\n\tPINCTRL_PIN(38, \"gpio38\"),\n\tPINCTRL_PIN(39, \"gpio39\"),\n\tPINCTRL_PIN(40, \"gpio40\"),\n\tPINCTRL_PIN(41, \"gpio41\"),\n\tPINCTRL_PIN(42, \"gpio42\"),\n\tPINCTRL_PIN(43, \"gpio43\"),\n\tPINCTRL_PIN(44, \"gpio44\"),\n\tPINCTRL_PIN(45, \"gpio45\"),\n\tPINCTRL_PIN(46, \"gpio46\"),\n\tPINCTRL_PIN(47, \"gpio47\"),\n\tPINCTRL_PIN(48, \"gpio48\"),\n\tPINCTRL_PIN(49, \"gpio49\"),\n\tPINCTRL_PIN(50, \"gpio50\"),\n\tPINCTRL_PIN(51, \"gpio51\"),\n};\n\nstatic unsigned gpio0_pins[] = { 0 };\nstatic unsigned gpio1_pins[] = { 1 };\nstatic unsigned gpio2_pins[] = { 2 };\nstatic unsigned gpio3_pins[] = { 3 };\nstatic unsigned gpio4_pins[] = { 4 };\nstatic unsigned gpio5_pins[] = { 5 };\nstatic unsigned gpio6_pins[] = { 6 };\nstatic unsigned gpio7_pins[] = { 7 };\nstatic unsigned gpio8_pins[] = { 8 };\nstatic unsigned gpio9_pins[] = { 9 };\nstatic unsigned gpio10_pins[] = { 10 };\nstatic unsigned gpio11_pins[] = { 11 };\nstatic unsigned gpio12_pins[] = { 12 };\nstatic unsigned gpio13_pins[] = { 13 };\nstatic unsigned gpio14_pins[] = { 14 };\nstatic unsigned gpio15_pins[] = { 15 };\nstatic unsigned gpio16_pins[] = { 16 };\nstatic unsigned gpio17_pins[] = { 17 };\nstatic unsigned gpio18_pins[] = { 18 };\nstatic unsigned gpio19_pins[] = { 19 };\nstatic unsigned gpio20_pins[] = { 20 };\nstatic unsigned gpio21_pins[] = { 21 };\nstatic unsigned gpio22_pins[] = { 22 };\nstatic unsigned gpio23_pins[] = { 23 };\nstatic unsigned gpio24_pins[] = { 24 };\nstatic unsigned gpio25_pins[] = { 25 };\nstatic unsigned gpio26_pins[] = { 26 };\nstatic unsigned gpio27_pins[] = { 27 };\nstatic unsigned gpio28_pins[] = { 28 };\nstatic unsigned gpio29_pins[] = { 29 };\nstatic unsigned gpio30_pins[] = { 30 };\nstatic unsigned gpio31_pins[] = { 31 };\nstatic unsigned gpio32_pins[] = { 32 };\nstatic unsigned gpio33_pins[] = { 33 };\nstatic unsigned gpio34_pins[] = { 34 };\nstatic unsigned gpio35_pins[] = { 35 };\nstatic unsigned gpio36_pins[] = { 36 };\nstatic unsigned gpio37_pins[] = { 37 };\nstatic unsigned gpio38_pins[] = { 38 };\nstatic unsigned gpio39_pins[] = { 39 };\nstatic unsigned gpio40_pins[] = { 40 };\nstatic unsigned gpio41_pins[] = { 41 };\nstatic unsigned gpio42_pins[] = { 42 };\nstatic unsigned gpio43_pins[] = { 43 };\nstatic unsigned gpio44_pins[] = { 44 };\nstatic unsigned gpio45_pins[] = { 45 };\nstatic unsigned gpio46_pins[] = { 46 };\nstatic unsigned gpio47_pins[] = { 47 };\nstatic unsigned gpio48_pins[] = { 48 };\nstatic unsigned gpio49_pins[] = { 49 };\nstatic unsigned gpio50_pins[] = { 50 };\nstatic unsigned gpio51_pins[] = { 51 };\n\nstatic unsigned nand_grp_pins[] = {\n\t2, 3, 4, 5, 6, 7, 24,\n\t25, 26, 27, 28, 29, 30, 31,\n};\n\nstatic unsigned dectpd_grp_pins[] = { 8, 9 };\nstatic unsigned vdsl_phy0_grp_pins[] = { 10, 11 };\nstatic unsigned vdsl_phy1_grp_pins[] = { 12, 13 };\nstatic unsigned vdsl_phy2_grp_pins[] = { 24, 25 };\nstatic unsigned vdsl_phy3_grp_pins[] = { 26, 27 };\n\nstatic struct pingroup bcm63268_groups[] = {\n\tBCM_PIN_GROUP(gpio0),\n\tBCM_PIN_GROUP(gpio1),\n\tBCM_PIN_GROUP(gpio2),\n\tBCM_PIN_GROUP(gpio3),\n\tBCM_PIN_GROUP(gpio4),\n\tBCM_PIN_GROUP(gpio5),\n\tBCM_PIN_GROUP(gpio6),\n\tBCM_PIN_GROUP(gpio7),\n\tBCM_PIN_GROUP(gpio8),\n\tBCM_PIN_GROUP(gpio9),\n\tBCM_PIN_GROUP(gpio10),\n\tBCM_PIN_GROUP(gpio11),\n\tBCM_PIN_GROUP(gpio12),\n\tBCM_PIN_GROUP(gpio13),\n\tBCM_PIN_GROUP(gpio14),\n\tBCM_PIN_GROUP(gpio15),\n\tBCM_PIN_GROUP(gpio16),\n\tBCM_PIN_GROUP(gpio17),\n\tBCM_PIN_GROUP(gpio18),\n\tBCM_PIN_GROUP(gpio19),\n\tBCM_PIN_GROUP(gpio20),\n\tBCM_PIN_GROUP(gpio21),\n\tBCM_PIN_GROUP(gpio22),\n\tBCM_PIN_GROUP(gpio23),\n\tBCM_PIN_GROUP(gpio24),\n\tBCM_PIN_GROUP(gpio25),\n\tBCM_PIN_GROUP(gpio26),\n\tBCM_PIN_GROUP(gpio27),\n\tBCM_PIN_GROUP(gpio28),\n\tBCM_PIN_GROUP(gpio29),\n\tBCM_PIN_GROUP(gpio30),\n\tBCM_PIN_GROUP(gpio31),\n\tBCM_PIN_GROUP(gpio32),\n\tBCM_PIN_GROUP(gpio33),\n\tBCM_PIN_GROUP(gpio34),\n\tBCM_PIN_GROUP(gpio35),\n\tBCM_PIN_GROUP(gpio36),\n\tBCM_PIN_GROUP(gpio37),\n\tBCM_PIN_GROUP(gpio38),\n\tBCM_PIN_GROUP(gpio39),\n\tBCM_PIN_GROUP(gpio40),\n\tBCM_PIN_GROUP(gpio41),\n\tBCM_PIN_GROUP(gpio42),\n\tBCM_PIN_GROUP(gpio43),\n\tBCM_PIN_GROUP(gpio44),\n\tBCM_PIN_GROUP(gpio45),\n\tBCM_PIN_GROUP(gpio46),\n\tBCM_PIN_GROUP(gpio47),\n\tBCM_PIN_GROUP(gpio48),\n\tBCM_PIN_GROUP(gpio49),\n\tBCM_PIN_GROUP(gpio50),\n\tBCM_PIN_GROUP(gpio51),\n\n\t \n\tBCM_PIN_GROUP(nand_grp),\n\tBCM_PIN_GROUP(dectpd_grp),\n\tBCM_PIN_GROUP(vdsl_phy0_grp),\n\tBCM_PIN_GROUP(vdsl_phy1_grp),\n\tBCM_PIN_GROUP(vdsl_phy2_grp),\n\tBCM_PIN_GROUP(vdsl_phy3_grp),\n};\n\nstatic const char * const led_groups[] = {\n\t\"gpio0\",\n\t\"gpio1\",\n\t\"gpio2\",\n\t\"gpio3\",\n\t\"gpio4\",\n\t\"gpio5\",\n\t\"gpio6\",\n\t\"gpio7\",\n\t\"gpio8\",\n\t\"gpio9\",\n\t\"gpio10\",\n\t\"gpio11\",\n\t\"gpio12\",\n\t\"gpio13\",\n\t\"gpio14\",\n\t\"gpio15\",\n\t\"gpio16\",\n\t\"gpio17\",\n\t\"gpio18\",\n\t\"gpio19\",\n\t\"gpio20\",\n\t\"gpio21\",\n\t\"gpio22\",\n\t\"gpio23\",\n};\n\nstatic const char * const serial_led_clk_groups[] = {\n\t\"gpio0\",\n};\n\nstatic const char * const serial_led_data_groups[] = {\n\t\"gpio1\",\n};\n\nstatic const char * const hsspi_cs4_groups[] = {\n\t\"gpio16\",\n};\n\nstatic const char * const hsspi_cs5_groups[] = {\n\t\"gpio17\",\n};\n\nstatic const char * const hsspi_cs6_groups[] = {\n\t\"gpio8\",\n};\n\nstatic const char * const hsspi_cs7_groups[] = {\n\t\"gpio9\",\n};\n\nstatic const char * const uart1_scts_groups[] = {\n\t\"gpio10\",\n\t\"gpio24\",\n};\n\nstatic const char * const uart1_srts_groups[] = {\n\t\"gpio11\",\n\t\"gpio25\",\n};\n\nstatic const char * const uart1_sdin_groups[] = {\n\t\"gpio12\",\n\t\"gpio26\",\n};\n\nstatic const char * const uart1_sdout_groups[] = {\n\t\"gpio13\",\n\t\"gpio27\",\n};\n\nstatic const char * const ntr_pulse_in_groups[] = {\n\t\"gpio14\",\n\t\"gpio28\",\n};\n\nstatic const char * const dsl_ntr_pulse_out_groups[] = {\n\t\"gpio15\",\n\t\"gpio29\",\n};\n\nstatic const char * const adsl_spi_miso_groups[] = {\n\t\"gpio18\",\n};\n\nstatic const char * const adsl_spi_mosi_groups[] = {\n\t\"gpio19\",\n};\n\nstatic const char * const vreg_clk_groups[] = {\n\t\"gpio22\",\n};\n\nstatic const char * const pcie_clkreq_b_groups[] = {\n\t\"gpio23\",\n};\n\nstatic const char * const switch_led_clk_groups[] = {\n\t\"gpio30\",\n};\n\nstatic const char * const switch_led_data_groups[] = {\n\t\"gpio31\",\n};\n\nstatic const char * const wifi_groups[] = {\n\t\"gpio32\",\n\t\"gpio33\",\n\t\"gpio34\",\n\t\"gpio35\",\n\t\"gpio36\",\n\t\"gpio37\",\n\t\"gpio38\",\n\t\"gpio39\",\n\t\"gpio40\",\n\t\"gpio41\",\n\t\"gpio42\",\n\t\"gpio43\",\n\t\"gpio44\",\n\t\"gpio45\",\n\t\"gpio46\",\n\t\"gpio47\",\n\t\"gpio48\",\n\t\"gpio49\",\n\t\"gpio50\",\n\t\"gpio51\",\n};\n\nstatic const char * const nand_groups[] = {\n\t\"nand_grp\",\n};\n\nstatic const char * const dectpd_groups[] = {\n\t\"dectpd_grp\",\n};\n\nstatic const char * const vdsl_phy_override_0_groups[] = {\n\t\"vdsl_phy_override_0_grp\",\n};\n\nstatic const char * const vdsl_phy_override_1_groups[] = {\n\t\"vdsl_phy_override_1_grp\",\n};\n\nstatic const char * const vdsl_phy_override_2_groups[] = {\n\t\"vdsl_phy_override_2_grp\",\n};\n\nstatic const char * const vdsl_phy_override_3_groups[] = {\n\t\"vdsl_phy_override_3_grp\",\n};\n\n#define BCM63268_LED_FUN(n)\t\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = #n,\t\t\t\t\\\n\t\t.groups = n##_groups,\t\t\t\\\n\t\t.num_groups = ARRAY_SIZE(n##_groups),\t\\\n\t\t.reg = BCM63268_LEDCTRL,\t\t\\\n\t}\n\n#define BCM63268_MODE_FUN(n)\t\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = #n,\t\t\t\t\\\n\t\t.groups = n##_groups,\t\t\t\\\n\t\t.num_groups = ARRAY_SIZE(n##_groups),\t\\\n\t\t.reg = BCM63268_MODE,\t\t\t\\\n\t}\n\n#define BCM63268_CTRL_FUN(n)\t\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = #n,\t\t\t\t\\\n\t\t.groups = n##_groups,\t\t\t\\\n\t\t.num_groups = ARRAY_SIZE(n##_groups),\t\\\n\t\t.reg = BCM63268_CTRL,\t\t\t\\\n\t}\n\n#define BCM63268_BASEMODE_FUN(n, val)\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = #n,\t\t\t\t\\\n\t\t.groups = n##_groups,\t\t\t\\\n\t\t.num_groups = ARRAY_SIZE(n##_groups),\t\\\n\t\t.reg = BCM63268_BASEMODE,\t\t\\\n\t\t.mask = val,\t\t\t\t\\\n\t}\n\nstatic const struct bcm63268_function bcm63268_funcs[] = {\n\tBCM63268_LED_FUN(led),\n\tBCM63268_MODE_FUN(serial_led_clk),\n\tBCM63268_MODE_FUN(serial_led_data),\n\tBCM63268_MODE_FUN(hsspi_cs6),\n\tBCM63268_MODE_FUN(hsspi_cs7),\n\tBCM63268_MODE_FUN(uart1_scts),\n\tBCM63268_MODE_FUN(uart1_srts),\n\tBCM63268_MODE_FUN(uart1_sdin),\n\tBCM63268_MODE_FUN(uart1_sdout),\n\tBCM63268_MODE_FUN(ntr_pulse_in),\n\tBCM63268_MODE_FUN(dsl_ntr_pulse_out),\n\tBCM63268_MODE_FUN(hsspi_cs4),\n\tBCM63268_MODE_FUN(hsspi_cs5),\n\tBCM63268_MODE_FUN(adsl_spi_miso),\n\tBCM63268_MODE_FUN(adsl_spi_mosi),\n\tBCM63268_MODE_FUN(vreg_clk),\n\tBCM63268_MODE_FUN(pcie_clkreq_b),\n\tBCM63268_MODE_FUN(switch_led_clk),\n\tBCM63268_MODE_FUN(switch_led_data),\n\tBCM63268_CTRL_FUN(wifi),\n\tBCM63268_BASEMODE_FUN(nand, BCM63268_BASEMODE_NAND),\n\tBCM63268_BASEMODE_FUN(dectpd, BCM63268_BASEMODE_DECTPD),\n\tBCM63268_BASEMODE_FUN(vdsl_phy_override_0,\n\t\t\t      BCM63268_BASEMODE_VDSL_PHY_0),\n\tBCM63268_BASEMODE_FUN(vdsl_phy_override_1,\n\t\t\t      BCM63268_BASEMODE_VDSL_PHY_1),\n\tBCM63268_BASEMODE_FUN(vdsl_phy_override_2,\n\t\t\t      BCM63268_BASEMODE_VDSL_PHY_2),\n\tBCM63268_BASEMODE_FUN(vdsl_phy_override_3,\n\t\t\t      BCM63268_BASEMODE_VDSL_PHY_3),\n};\n\nstatic int bcm63268_pinctrl_get_group_count(struct pinctrl_dev *pctldev)\n{\n\treturn ARRAY_SIZE(bcm63268_groups);\n}\n\nstatic const char *bcm63268_pinctrl_get_group_name(struct pinctrl_dev *pctldev,\n\t\t\t\t\t\t   unsigned group)\n{\n\treturn bcm63268_groups[group].name;\n}\n\nstatic int bcm63268_pinctrl_get_group_pins(struct pinctrl_dev *pctldev,\n\t\t\t\t\t   unsigned group,\n\t\t\t\t\t   const unsigned **pins,\n\t\t\t\t\t   unsigned *npins)\n{\n\t*pins = bcm63268_groups[group].pins;\n\t*npins = bcm63268_groups[group].npins;\n\n\treturn 0;\n}\n\nstatic int bcm63268_pinctrl_get_func_count(struct pinctrl_dev *pctldev)\n{\n\treturn ARRAY_SIZE(bcm63268_funcs);\n}\n\nstatic const char *bcm63268_pinctrl_get_func_name(struct pinctrl_dev *pctldev,\n\t\t\t\t\t\t  unsigned selector)\n{\n\treturn bcm63268_funcs[selector].name;\n}\n\nstatic int bcm63268_pinctrl_get_groups(struct pinctrl_dev *pctldev,\n\t\t\t\t       unsigned selector,\n\t\t\t\t       const char * const **groups,\n\t\t\t\t       unsigned * const num_groups)\n{\n\t*groups = bcm63268_funcs[selector].groups;\n\t*num_groups = bcm63268_funcs[selector].num_groups;\n\n\treturn 0;\n}\n\nstatic void bcm63268_set_gpio(struct bcm63xx_pinctrl *pc, unsigned pin)\n{\n\tconst struct pinctrl_pin_desc *desc = &bcm63268_pins[pin];\n\tunsigned int basemode = (unsigned long) desc->drv_data;\n\tunsigned int mask = BIT(bcm63xx_bank_pin(pin));\n\n\tif (basemode)\n\t\tregmap_update_bits(pc->regs, BCM63268_BASEMODE_REG, basemode,\n\t\t\t\t   0);\n\n\tif (pin < BCM63XX_BANK_GPIOS) {\n\t\t \n\t\tregmap_update_bits(pc->regs, BCM63268_MODE_REG, mask, 0);\n\n\t\t \n\t\tif (pin < BCM63268_NUM_LEDS)\n\t\t\tregmap_update_bits(pc->regs, BCM63268_LED_REG, mask,\n\t\t\t\t\t   0);\n\t} else if (pin < BCM63268_NUM_GPIOS) {\n\t\t \n\t\tregmap_update_bits(pc->regs, BCM63268_CTRL_REG, mask, mask);\n\t}\n}\n\nstatic int bcm63268_pinctrl_set_mux(struct pinctrl_dev *pctldev,\n\t\t\t\t    unsigned selector, unsigned group)\n{\n\tstruct bcm63xx_pinctrl *pc = pinctrl_dev_get_drvdata(pctldev);\n\tconst struct pingroup *pg = &bcm63268_groups[group];\n\tconst struct bcm63268_function *f = &bcm63268_funcs[selector];\n\tunsigned i;\n\tunsigned int reg;\n\tunsigned int val, mask;\n\n\tfor (i = 0; i < pg->npins; i++)\n\t\tbcm63268_set_gpio(pc, pg->pins[i]);\n\n\tswitch (f->reg) {\n\tcase BCM63268_LEDCTRL:\n\t\treg = BCM63268_LED_REG;\n\t\tmask = BIT(pg->pins[0]);\n\t\tval = BIT(pg->pins[0]);\n\t\tbreak;\n\tcase BCM63268_MODE:\n\t\treg = BCM63268_MODE_REG;\n\t\tmask = BIT(pg->pins[0]);\n\t\tval = BIT(pg->pins[0]);\n\t\tbreak;\n\tcase BCM63268_CTRL:\n\t\treg = BCM63268_CTRL_REG;\n\t\tmask = BIT(pg->pins[0]);\n\t\tval = 0;\n\t\tbreak;\n\tcase BCM63268_BASEMODE:\n\t\treg = BCM63268_BASEMODE_REG;\n\t\tmask = f->mask;\n\t\tval = f->mask;\n\t\tbreak;\n\tdefault:\n\t\tWARN_ON(1);\n\t\treturn -EINVAL;\n\t}\n\n\tregmap_update_bits(pc->regs, reg, mask, val);\n\n\treturn 0;\n}\n\nstatic int bcm63268_gpio_request_enable(struct pinctrl_dev *pctldev,\n\t\t\t\t\tstruct pinctrl_gpio_range *range,\n\t\t\t\t\tunsigned offset)\n{\n\tstruct bcm63xx_pinctrl *pc = pinctrl_dev_get_drvdata(pctldev);\n\n\t \n\tbcm63268_set_gpio(pc, offset);\n\n\treturn 0;\n}\n\nstatic const struct pinctrl_ops bcm63268_pctl_ops = {\n\t.dt_free_map = pinctrl_utils_free_map,\n\t.dt_node_to_map = pinconf_generic_dt_node_to_map_pin,\n\t.get_group_name = bcm63268_pinctrl_get_group_name,\n\t.get_group_pins = bcm63268_pinctrl_get_group_pins,\n\t.get_groups_count = bcm63268_pinctrl_get_group_count,\n};\n\nstatic const struct pinmux_ops bcm63268_pmx_ops = {\n\t.get_function_groups = bcm63268_pinctrl_get_groups,\n\t.get_function_name = bcm63268_pinctrl_get_func_name,\n\t.get_functions_count = bcm63268_pinctrl_get_func_count,\n\t.gpio_request_enable = bcm63268_gpio_request_enable,\n\t.set_mux = bcm63268_pinctrl_set_mux,\n\t.strict = true,\n};\n\nstatic const struct bcm63xx_pinctrl_soc bcm63268_soc = {\n\t.ngpios = BCM63268_NUM_GPIOS,\n\t.npins = ARRAY_SIZE(bcm63268_pins),\n\t.pctl_ops = &bcm63268_pctl_ops,\n\t.pins = bcm63268_pins,\n\t.pmx_ops = &bcm63268_pmx_ops,\n};\n\nstatic int bcm63268_pinctrl_probe(struct platform_device *pdev)\n{\n\treturn bcm63xx_pinctrl_probe(pdev, &bcm63268_soc, NULL);\n}\n\nstatic const struct of_device_id bcm63268_pinctrl_match[] = {\n\t{ .compatible = \"brcm,bcm63268-pinctrl\", },\n\t{   }\n};\n\nstatic struct platform_driver bcm63268_pinctrl_driver = {\n\t.probe = bcm63268_pinctrl_probe,\n\t.driver = {\n\t\t.name = \"bcm63268-pinctrl\",\n\t\t.of_match_table = bcm63268_pinctrl_match,\n\t},\n};\n\nbuiltin_platform_driver(bcm63268_pinctrl_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}