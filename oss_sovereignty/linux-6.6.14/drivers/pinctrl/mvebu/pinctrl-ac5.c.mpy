{
  "module_name": "pinctrl-ac5.c",
  "hash_id": "139ceb28dcf33c22d9523c0503128601302d5ef8313cf44d1cce7b65ac964448",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mvebu/pinctrl-ac5.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/platform_device.h>\n#include <linux/of.h>\n#include <linux/pinctrl/pinctrl.h>\n\n#include \"pinctrl-mvebu.h\"\n\nstatic struct mvebu_mpp_mode ac5_mpp_modes[] = {\n\tMPP_MODE(0,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d0\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io4\")),\n\tMPP_MODE(1,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d1\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io3\")),\n\tMPP_MODE(2,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d2\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io2\")),\n\tMPP_MODE(3,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d3\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io7\")),\n\tMPP_MODE(4,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d4\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io6\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"txd\"),\n\t\t MPP_FUNCTION(4, \"uart2\", \"txd\")),\n\tMPP_MODE(5,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d5\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io5\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"rxd\"),\n\t\t MPP_FUNCTION(4, \"uart2\", \"rxd\")),\n\tMPP_MODE(6,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d6\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io0\"),\n\t\t MPP_FUNCTION(3, \"i2c1\",  \"sck\")),\n\tMPP_MODE(7,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"d7\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"io1\"),\n\t\t MPP_FUNCTION(3, \"i2c1\",  \"sda\")),\n\tMPP_MODE(8,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"clk\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"wen\")),\n\tMPP_MODE(9,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"cmd\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"ale\")),\n\tMPP_MODE(10,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"ds\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"cle\")),\n\tMPP_MODE(11,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",  \"rst\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"cen\")),\n\tMPP_MODE(12,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"clk\")),\n\tMPP_MODE(13,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"csn\")),\n\tMPP_MODE(14,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"mosi\")),\n\tMPP_MODE(15,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"miso\")),\n\tMPP_MODE(16,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"wpn\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"ren\"),\n\t\t MPP_FUNCTION(3, \"uart1\", \"txd\")),\n\tMPP_MODE(17,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"spi0\",  \"hold\"),\n\t\t MPP_FUNCTION(2, \"nand\",  \"rb\"),\n\t\t MPP_FUNCTION(3, \"uart1\", \"rxd\")),\n\tMPP_MODE(18,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"tsen_int\", NULL),\n\t\t MPP_FUNCTION(2, \"uart2\", \"rxd\"),\n\t\t MPP_FUNCTION(3, \"wd_int\", NULL)),\n\tMPP_MODE(19,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"dev_init_done\", NULL),\n\t\t MPP_FUNCTION(2, \"uart2\", \"txd\")),\n\tMPP_MODE(20,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(2, \"i2c1\",  \"sck\"),\n\t\t MPP_FUNCTION(3, \"spi1\",  \"clk\"),\n\t\t MPP_FUNCTION(4, \"uart3\", \"txd\")),\n\tMPP_MODE(21,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(2, \"i2c1\",  \"sda\"),\n\t\t MPP_FUNCTION(3, \"spi1\",  \"csn\"),\n\t\t MPP_FUNCTION(4, \"uart3\", \"rxd\")),\n\tMPP_MODE(22,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(3, \"spi1\",  \"mosi\")),\n\tMPP_MODE(23,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(3, \"spi1\",  \"miso\")),\n\tMPP_MODE(24,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"wd_int\", NULL),\n\t\t MPP_FUNCTION(2, \"uart2\", \"txd\"),\n\t\t MPP_FUNCTION(3, \"uartsd\", \"txd\")),\n\tMPP_MODE(25,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"int_out\", NULL),\n\t\t MPP_FUNCTION(2, \"uart2\", \"rxd\"),\n\t\t MPP_FUNCTION(3, \"uartsd\", \"rxd\")),\n\tMPP_MODE(26,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"i2c0\",  \"sck\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"clk1\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"txd\")),\n\tMPP_MODE(27,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"i2c0\",  \"sda\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"pulse\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"rxd\")),\n\tMPP_MODE(28,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"xg\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"txd\")),\n\tMPP_MODE(29,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"xg\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(3, \"uart3\", \"rxd\")),\n\tMPP_MODE(30,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"xg\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(3, \"ge\", \"mdio\")),\n\tMPP_MODE(31,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"xg\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(3, \"ge\", \"mdio\")),\n\tMPP_MODE(32,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"uart0\", \"txd\")),\n\tMPP_MODE(33,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"uart0\", \"rxd\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"clk1\"),\n\t\t MPP_FUNCTION(3, \"ptp\", \"pulse\")),\n\tMPP_MODE(34,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"uart3\", \"rxd\")),\n\tMPP_MODE(35,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ge\", \"mdio\"),\n\t\t MPP_FUNCTION(2, \"uart3\", \"txd\"),\n\t\t MPP_FUNCTION(3, \"pcie\", \"rstoutn\")),\n\tMPP_MODE(36,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ptp\", \"clk0_tp\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"clk1_tp\")),\n\tMPP_MODE(37,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ptp\", \"pulse_tp\"),\n\t\t MPP_FUNCTION(2, \"wd_int\", NULL)),\n\tMPP_MODE(38,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"synce\", \"clk_out0\")),\n\tMPP_MODE(39,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"synce\", \"clk_out1\")),\n\tMPP_MODE(40,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ptp\", \"pclk_out0\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"pclk_out1\")),\n\tMPP_MODE(41,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ptp\", \"ref_clk\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"clk1\"),\n\t\t MPP_FUNCTION(3, \"ptp\", \"pulse\"),\n\t\t MPP_FUNCTION(4, \"uart2\", \"txd\"),\n\t\t MPP_FUNCTION(5, \"i2c1\",  \"sck\")),\n\tMPP_MODE(42,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"ptp\", \"clk0\"),\n\t\t MPP_FUNCTION(2, \"ptp\", \"clk1\"),\n\t\t MPP_FUNCTION(3, \"ptp\", \"pulse\"),\n\t\t MPP_FUNCTION(4, \"uart2\", \"rxd\"),\n\t\t MPP_FUNCTION(5, \"i2c1\",  \"sda\")),\n\tMPP_MODE(43,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"led\", \"clk\")),\n\tMPP_MODE(44,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"led\", \"stb\")),\n\tMPP_MODE(45,\n\t\t MPP_FUNCTION(0, \"gpio\",  NULL),\n\t\t MPP_FUNCTION(1, \"led\", \"data\")),\n};\n\nstatic struct mvebu_pinctrl_soc_info ac5_pinctrl_info;\n\nstatic const struct of_device_id ac5_pinctrl_of_match[] = {\n\t{\n\t\t.compatible = \"marvell,ac5-pinctrl\",\n\t},\n\t{ },\n};\n\nstatic const struct mvebu_mpp_ctrl ac5_mpp_controls[] = {\n\tMPP_FUNC_CTRL(0, 45, NULL, mvebu_mmio_mpp_ctrl), };\n\nstatic struct pinctrl_gpio_range ac5_mpp_gpio_ranges[] = {\n\tMPP_GPIO_RANGE(0,   0,  0, 46), };\n\nstatic int ac5_pinctrl_probe(struct platform_device *pdev)\n{\n\tstruct mvebu_pinctrl_soc_info *soc = &ac5_pinctrl_info;\n\n\tsoc->variant = 0;  \n\tsoc->controls = ac5_mpp_controls;\n\tsoc->ncontrols = ARRAY_SIZE(ac5_mpp_controls);\n\tsoc->gpioranges = ac5_mpp_gpio_ranges;\n\tsoc->ngpioranges = ARRAY_SIZE(ac5_mpp_gpio_ranges);\n\tsoc->modes = ac5_mpp_modes;\n\tsoc->nmodes = ac5_mpp_controls[0].npins;\n\n\tpdev->dev.platform_data = soc;\n\n\treturn mvebu_pinctrl_simple_mmio_probe(pdev);\n}\n\nstatic struct platform_driver ac5_pinctrl_driver = {\n\t.driver = {\n\t\t.name = \"ac5-pinctrl\",\n\t\t.of_match_table = of_match_ptr(ac5_pinctrl_of_match),\n\t},\n\t.probe = ac5_pinctrl_probe,\n};\nbuiltin_platform_driver(ac5_pinctrl_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}