{
  "module_name": "pinctrl-dove.c",
  "hash_id": "47d34f8a369a74ef65a754bc4b9f827da2a16de598328fba951417a334bfb300",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mvebu/pinctrl-dove.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/bitops.h>\n#include <linux/platform_device.h>\n#include <linux/clk.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/mfd/syscon.h>\n#include <linux/pinctrl/pinctrl.h>\n#include <linux/regmap.h>\n\n#include \"pinctrl-mvebu.h\"\n\n \n#define INT_REGS_MASK\t\t~(SZ_1M - 1)\n#define MPP4_REGS_OFFS\t\t0xd0440\n#define PMU_REGS_OFFS\t\t0xd802c\n#define GC_REGS_OFFS\t\t0xe802c\n\n \n#define PMU_MPP_GENERAL_CTRL\t0x10\n#define  AU0_AC97_SEL\t\tBIT(16)\n\n \n#define SPI_GPIO_SEL\t\tBIT(5)\n#define UART1_GPIO_SEL\t\tBIT(4)\n#define AU1_GPIO_SEL\t\tBIT(3)\n#define CAM_GPIO_SEL\t\tBIT(2)\n#define SD1_GPIO_SEL\t\tBIT(1)\n#define SD0_GPIO_SEL\t\tBIT(0)\n\n \n#define PMU_SIGNAL_SELECT_0\t0x00\n#define PMU_SIGNAL_SELECT_1\t0x04\n\n \n#define GLOBAL_CONFIG_1\t\t0x00\n#define  TWSI_ENABLE_OPTION1\tBIT(7)\n#define GLOBAL_CONFIG_2\t\t0x04\n#define  TWSI_ENABLE_OPTION2\tBIT(20)\n#define  TWSI_ENABLE_OPTION3\tBIT(21)\n#define  TWSI_OPTION3_GPIO\tBIT(22)\n#define SSP_CTRL_STATUS_1\t0x08\n#define  SSP_ON_AU1\t\tBIT(0)\n#define MPP_GENERAL_CONFIG\t0x10\n#define  AU1_SPDIFO_GPIO_EN\tBIT(1)\n#define  NAND_GPIO_EN\t\tBIT(0)\n\n#define CONFIG_PMU\tBIT(4)\n\nstatic void __iomem *mpp4_base;\nstatic void __iomem *pmu_base;\nstatic struct regmap *gconfmap;\n\nstatic int dove_pmu_mpp_ctrl_get(struct mvebu_mpp_ctrl_data *data,\n\t\t\t\t unsigned pid, unsigned long *config)\n{\n\tunsigned off = (pid / MVEBU_MPPS_PER_REG) * MVEBU_MPP_BITS;\n\tunsigned shift = (pid % MVEBU_MPPS_PER_REG) * MVEBU_MPP_BITS;\n\tunsigned long pmu = readl(data->base + PMU_MPP_GENERAL_CTRL);\n\tunsigned long func;\n\n\tif ((pmu & BIT(pid)) == 0)\n\t\treturn mvebu_mmio_mpp_ctrl_get(data, pid, config);\n\n\tfunc = readl(pmu_base + PMU_SIGNAL_SELECT_0 + off);\n\t*config = (func >> shift) & MVEBU_MPP_MASK;\n\t*config |= CONFIG_PMU;\n\n\treturn 0;\n}\n\nstatic int dove_pmu_mpp_ctrl_set(struct mvebu_mpp_ctrl_data *data,\n\t\t\t\t unsigned pid, unsigned long config)\n{\n\tunsigned off = (pid / MVEBU_MPPS_PER_REG) * MVEBU_MPP_BITS;\n\tunsigned shift = (pid % MVEBU_MPPS_PER_REG) * MVEBU_MPP_BITS;\n\tunsigned long pmu = readl(data->base + PMU_MPP_GENERAL_CTRL);\n\tunsigned long func;\n\n\tif ((config & CONFIG_PMU) == 0) {\n\t\twritel(pmu & ~BIT(pid), data->base + PMU_MPP_GENERAL_CTRL);\n\t\treturn mvebu_mmio_mpp_ctrl_set(data, pid, config);\n\t}\n\n\twritel(pmu | BIT(pid), data->base + PMU_MPP_GENERAL_CTRL);\n\tfunc = readl(pmu_base + PMU_SIGNAL_SELECT_0 + off);\n\tfunc &= ~(MVEBU_MPP_MASK << shift);\n\tfunc |= (config & MVEBU_MPP_MASK) << shift;\n\twritel(func, pmu_base + PMU_SIGNAL_SELECT_0 + off);\n\n\treturn 0;\n}\n\nstatic int dove_mpp4_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long *config)\n{\n\tunsigned long mpp4 = readl(mpp4_base);\n\tunsigned long mask;\n\n\tswitch (pid) {\n\tcase 24:  \n\t\tmask = CAM_GPIO_SEL;\n\t\tbreak;\n\tcase 40:  \n\t\tmask = SD0_GPIO_SEL;\n\t\tbreak;\n\tcase 46:  \n\t\tmask = SD1_GPIO_SEL;\n\t\tbreak;\n\tcase 58:  \n\t\tmask = SPI_GPIO_SEL;\n\t\tbreak;\n\tcase 62:  \n\t\tmask = UART1_GPIO_SEL;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\t*config = ((mpp4 & mask) != 0);\n\n\treturn 0;\n}\n\nstatic int dove_mpp4_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long config)\n{\n\tunsigned long mpp4 = readl(mpp4_base);\n\tunsigned long mask;\n\n\tswitch (pid) {\n\tcase 24:  \n\t\tmask = CAM_GPIO_SEL;\n\t\tbreak;\n\tcase 40:  \n\t\tmask = SD0_GPIO_SEL;\n\t\tbreak;\n\tcase 46:  \n\t\tmask = SD1_GPIO_SEL;\n\t\tbreak;\n\tcase 58:  \n\t\tmask = SPI_GPIO_SEL;\n\t\tbreak;\n\tcase 62:  \n\t\tmask = UART1_GPIO_SEL;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tmpp4 &= ~mask;\n\tif (config)\n\t\tmpp4 |= mask;\n\n\twritel(mpp4, mpp4_base);\n\n\treturn 0;\n}\n\nstatic int dove_nand_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long *config)\n{\n\tunsigned int gmpp;\n\n\tregmap_read(gconfmap, MPP_GENERAL_CONFIG, &gmpp);\n\t*config = ((gmpp & NAND_GPIO_EN) != 0);\n\n\treturn 0;\n}\n\nstatic int dove_nand_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long config)\n{\n\tregmap_update_bits(gconfmap, MPP_GENERAL_CONFIG,\n\t\t\t   NAND_GPIO_EN,\n\t\t\t   (config) ? NAND_GPIO_EN : 0);\n\treturn 0;\n}\n\nstatic int dove_audio0_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t\tunsigned long *config)\n{\n\tunsigned long pmu = readl(data->base + PMU_MPP_GENERAL_CTRL);\n\n\t*config = ((pmu & AU0_AC97_SEL) != 0);\n\n\treturn 0;\n}\n\nstatic int dove_audio0_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t\tunsigned long config)\n{\n\tunsigned long pmu = readl(data->base + PMU_MPP_GENERAL_CTRL);\n\n\tpmu &= ~AU0_AC97_SEL;\n\tif (config)\n\t\tpmu |= AU0_AC97_SEL;\n\twritel(pmu, data->base + PMU_MPP_GENERAL_CTRL);\n\n\treturn 0;\n}\n\nstatic int dove_audio1_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t\tunsigned long *config)\n{\n\tunsigned int mpp4 = readl(mpp4_base);\n\tunsigned int sspc1;\n\tunsigned int gmpp;\n\tunsigned int gcfg2;\n\n\tregmap_read(gconfmap, SSP_CTRL_STATUS_1, &sspc1);\n\tregmap_read(gconfmap, MPP_GENERAL_CONFIG, &gmpp);\n\tregmap_read(gconfmap, GLOBAL_CONFIG_2, &gcfg2);\n\n\t*config = 0;\n\tif (mpp4 & AU1_GPIO_SEL)\n\t\t*config |= BIT(3);\n\tif (sspc1 & SSP_ON_AU1)\n\t\t*config |= BIT(2);\n\tif (gmpp & AU1_SPDIFO_GPIO_EN)\n\t\t*config |= BIT(1);\n\tif (gcfg2 & TWSI_OPTION3_GPIO)\n\t\t*config |= BIT(0);\n\n\t \n\tif ((*config & BIT(3)) == 0)\n\t\t*config &= ~(BIT(2) | BIT(0));\n\t \n\tif ((*config & BIT(1)) == 0)\n\t\t*config &= ~BIT(0);\n\treturn 0;\n}\n\nstatic int dove_audio1_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t\tunsigned long config)\n{\n\tunsigned int mpp4 = readl(mpp4_base);\n\n\tmpp4 &= ~AU1_GPIO_SEL;\n\tif (config & BIT(3))\n\t\tmpp4 |= AU1_GPIO_SEL;\n\twritel(mpp4, mpp4_base);\n\n\tregmap_update_bits(gconfmap, SSP_CTRL_STATUS_1,\n\t\t\t   SSP_ON_AU1,\n\t\t\t   (config & BIT(2)) ? SSP_ON_AU1 : 0);\n\tregmap_update_bits(gconfmap, MPP_GENERAL_CONFIG,\n\t\t\t   AU1_SPDIFO_GPIO_EN,\n\t\t\t   (config & BIT(1)) ? AU1_SPDIFO_GPIO_EN : 0);\n\tregmap_update_bits(gconfmap, GLOBAL_CONFIG_2,\n\t\t\t   TWSI_OPTION3_GPIO,\n\t\t\t   (config & BIT(0)) ? TWSI_OPTION3_GPIO : 0);\n\n\treturn 0;\n}\n\n \nstatic int dove_audio1_ctrl_gpio_req(struct mvebu_mpp_ctrl_data *data,\n\t\t\t\t     unsigned pid)\n{\n\tunsigned long config;\n\n\tdove_audio1_ctrl_get(data, pid, &config);\n\n\tswitch (config) {\n\tcase 0x02:  \n\tcase 0x0e:  \n\t\tif (pid >= 56)\n\t\t\treturn 0;\n\t\treturn -ENOTSUPP;\n\tcase 0x08:  \n\tcase 0x0b:  \n\t\tif (pid <= 55)\n\t\t\treturn 0;\n\t\treturn -ENOTSUPP;\n\tcase 0x0a:  \n\t\treturn 0;\n\t \n\t \n\t \n\t}\n\treturn -ENOTSUPP;\n}\n\n \nstatic int dove_audio1_ctrl_gpio_dir(struct mvebu_mpp_ctrl_data *data,\n\t\t\t\t     unsigned pid, bool input)\n{\n\tif (pid < 52 || pid > 57)\n\t\treturn -ENOTSUPP;\n\treturn 0;\n}\n\nstatic int dove_twsi_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long *config)\n{\n\tunsigned int gcfg1;\n\tunsigned int gcfg2;\n\n\tregmap_read(gconfmap, GLOBAL_CONFIG_1, &gcfg1);\n\tregmap_read(gconfmap, GLOBAL_CONFIG_2, &gcfg2);\n\n\t*config = 0;\n\tif (gcfg1 & TWSI_ENABLE_OPTION1)\n\t\t*config = 1;\n\telse if (gcfg2 & TWSI_ENABLE_OPTION2)\n\t\t*config = 2;\n\telse if (gcfg2 & TWSI_ENABLE_OPTION3)\n\t\t*config = 3;\n\n\treturn 0;\n}\n\nstatic int dove_twsi_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long config)\n{\n\tunsigned int gcfg1 = 0;\n\tunsigned int gcfg2 = 0;\n\n\tswitch (config) {\n\tcase 1:\n\t\tgcfg1 = TWSI_ENABLE_OPTION1;\n\t\tbreak;\n\tcase 2:\n\t\tgcfg2 = TWSI_ENABLE_OPTION2;\n\t\tbreak;\n\tcase 3:\n\t\tgcfg2 = TWSI_ENABLE_OPTION3;\n\t\tbreak;\n\t}\n\n\tregmap_update_bits(gconfmap, GLOBAL_CONFIG_1,\n\t\t\t   TWSI_ENABLE_OPTION1,\n\t\t\t   gcfg1);\n\tregmap_update_bits(gconfmap, GLOBAL_CONFIG_2,\n\t\t\t   TWSI_ENABLE_OPTION2 | TWSI_ENABLE_OPTION3,\n\t\t\t   gcfg2);\n\n\treturn 0;\n}\n\nstatic const struct mvebu_mpp_ctrl dove_mpp_controls[] = {\n\tMPP_FUNC_CTRL(0, 15, NULL, dove_pmu_mpp_ctrl),\n\tMPP_FUNC_CTRL(16, 23, NULL, mvebu_mmio_mpp_ctrl),\n\tMPP_FUNC_CTRL(24, 39, \"mpp_camera\", dove_mpp4_ctrl),\n\tMPP_FUNC_CTRL(40, 45, \"mpp_sdio0\", dove_mpp4_ctrl),\n\tMPP_FUNC_CTRL(46, 51, \"mpp_sdio1\", dove_mpp4_ctrl),\n\tMPP_FUNC_GPIO_CTRL(52, 57, \"mpp_audio1\", dove_audio1_ctrl),\n\tMPP_FUNC_CTRL(58, 61, \"mpp_spi0\", dove_mpp4_ctrl),\n\tMPP_FUNC_CTRL(62, 63, \"mpp_uart1\", dove_mpp4_ctrl),\n\tMPP_FUNC_CTRL(64, 71, \"mpp_nand\", dove_nand_ctrl),\n\tMPP_FUNC_CTRL(72, 72, \"audio0\", dove_audio0_ctrl),\n\tMPP_FUNC_CTRL(73, 73, \"twsi\", dove_twsi_ctrl),\n};\n\nstatic struct mvebu_mpp_mode dove_mpp_modes[] = {\n\tMPP_MODE(0,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"rts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"cd\"),\n\t\tMPP_FUNCTION(0x0f, \"lcd0\", \"pwm\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(1,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"cts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"wp\"),\n\t\tMPP_FUNCTION(0x0f, \"lcd1\", \"pwm\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(2,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"sata\", \"prsnt\"),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"txd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x04, \"uart1\", \"rts\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(3,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"sata\", \"act\"),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"rxd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x04, \"uart1\", \"cts\"),\n\t\tMPP_FUNCTION(0x0f, \"lcd-spi\", \"cs1\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(4,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"rts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"cd\"),\n\t\tMPP_FUNCTION(0x04, \"spi1\", \"miso\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(5,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"cts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"wp\"),\n\t\tMPP_FUNCTION(0x04, \"spi1\", \"cs\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(6,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"txd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x04, \"spi1\", \"mosi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(7,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"rxd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x04, \"spi1\", \"sck\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"core-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(8,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"watchdog\", \"rstout\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(9,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x05, \"pex1\", \"clkreq\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(10,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x05, \"ssp\", \"sclk\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(11,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"sata\", \"prsnt\"),\n\t\tMPP_FUNCTION(0x02, \"sata-1\", \"act\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x04, \"sdio1\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x05, \"pex0\", \"clkreq\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(12,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"sata\", \"act\"),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"rts\"),\n\t\tMPP_FUNCTION(0x03, \"audio0\", \"extclk\"),\n\t\tMPP_FUNCTION(0x04, \"sdio1\", \"cd\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(13,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"cts\"),\n\t\tMPP_FUNCTION(0x03, \"audio1\", \"extclk\"),\n\t\tMPP_FUNCTION(0x04, \"sdio1\", \"wp\"),\n\t\tMPP_FUNCTION(0x05, \"ssp\", \"extclk\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(14,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"txd\"),\n\t\tMPP_FUNCTION(0x04, \"sdio1\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x05, \"ssp\", \"rxd\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(15,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart2\", \"rxd\"),\n\t\tMPP_FUNCTION(0x04, \"sdio1\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x05, \"ssp\", \"sfrm\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x0, \"pmu-nc\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x1, \"pmu-low\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x2, \"pmu-high\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x3, \"pmic\", \"sdi\"),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x4, \"cpu-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x5, \"standby-pwr-down\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0x8, \"cpu-pwr-good\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xa, \"bat-fault\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xb, \"ext0-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xc, \"ext1-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xd, \"ext2-wakeup\", NULL),\n\t\tMPP_FUNCTION(CONFIG_PMU | 0xe, \"pmu-blink\", NULL)),\n\tMPP_MODE(16,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"rts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"cd\"),\n\t\tMPP_FUNCTION(0x04, \"lcd-spi\", \"cs1\"),\n\t\tMPP_FUNCTION(0x05, \"ac97\", \"sdi1\")),\n\tMPP_MODE(17,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"ac97-1\", \"sysclko\"),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"cts\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"wp\"),\n\t\tMPP_FUNCTION(0x04, \"twsi\", \"sda\"),\n\t\tMPP_FUNCTION(0x05, \"ac97\", \"sdi2\")),\n\tMPP_MODE(18,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"txd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x04, \"lcd0\", \"pwm\"),\n\t\tMPP_FUNCTION(0x05, \"ac97\", \"sdi3\")),\n\tMPP_MODE(19,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"uart3\", \"rxd\"),\n\t\tMPP_FUNCTION(0x03, \"sdio0\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x04, \"twsi\", \"sck\")),\n\tMPP_MODE(20,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"ac97\", \"sysclko\"),\n\t\tMPP_FUNCTION(0x02, \"lcd-spi\", \"miso\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"cd\"),\n\t\tMPP_FUNCTION(0x05, \"sdio0\", \"cd\"),\n\t\tMPP_FUNCTION(0x06, \"spi1\", \"miso\")),\n\tMPP_MODE(21,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"uart1\", \"rts\"),\n\t\tMPP_FUNCTION(0x02, \"lcd-spi\", \"cs0\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"wp\"),\n\t\tMPP_FUNCTION(0x04, \"ssp\", \"sfrm\"),\n\t\tMPP_FUNCTION(0x05, \"sdio0\", \"wp\"),\n\t\tMPP_FUNCTION(0x06, \"spi1\", \"cs\")),\n\tMPP_MODE(22,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x01, \"uart1\", \"cts\"),\n\t\tMPP_FUNCTION(0x02, \"lcd-spi\", \"mosi\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x04, \"ssp\", \"txd\"),\n\t\tMPP_FUNCTION(0x05, \"sdio0\", \"buspwr\"),\n\t\tMPP_FUNCTION(0x06, \"spi1\", \"mosi\")),\n\tMPP_MODE(23,\n\t\tMPP_FUNCTION(0x00, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x02, \"lcd-spi\", \"sck\"),\n\t\tMPP_FUNCTION(0x03, \"sdio1\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x04, \"ssp\", \"sclk\"),\n\t\tMPP_FUNCTION(0x05, \"sdio0\", \"ledctrl\"),\n\t\tMPP_FUNCTION(0x06, \"spi1\", \"sck\")),\n\tMPP_MODE(24,\n\t\tMPP_FUNCTION(0x00, \"camera\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpio\", NULL)),\n\tMPP_MODE(40,\n\t\tMPP_FUNCTION(0x00, \"sdio0\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpio\", NULL)),\n\tMPP_MODE(46,\n\t\tMPP_FUNCTION(0x00, \"sdio1\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpio\", NULL)),\n\tMPP_MODE(52,\n\t\tMPP_FUNCTION(0x00, \"i2s1/spdifo\", NULL),\n\t\tMPP_FUNCTION(0x02, \"i2s1\", NULL),\n\t\tMPP_FUNCTION(0x08, \"spdifo\", NULL),\n\t\tMPP_FUNCTION(0x0a, \"gpio\", NULL),\n\t\tMPP_FUNCTION(0x0b, \"twsi\", NULL),\n\t\tMPP_FUNCTION(0x0c, \"ssp/spdifo\", NULL),\n\t\tMPP_FUNCTION(0x0e, \"ssp\", NULL),\n\t\tMPP_FUNCTION(0x0f, \"ssp/twsi\", NULL)),\n\tMPP_MODE(58,\n\t\tMPP_FUNCTION(0x00, \"spi0\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpio\", NULL)),\n\tMPP_MODE(62,\n\t\tMPP_FUNCTION(0x00, \"uart1\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpio\", NULL)),\n\tMPP_MODE(64,\n\t\tMPP_FUNCTION(0x00, \"nand\", NULL),\n\t\tMPP_FUNCTION(0x01, \"gpo\", NULL)),\n\tMPP_MODE(72,\n\t\tMPP_FUNCTION(0x00, \"i2s\", NULL),\n\t\tMPP_FUNCTION(0x01, \"ac97\", NULL)),\n\tMPP_MODE(73,\n\t\tMPP_FUNCTION(0x00, \"twsi-none\", NULL),\n\t\tMPP_FUNCTION(0x01, \"twsi-opt1\", NULL),\n\t\tMPP_FUNCTION(0x02, \"twsi-opt2\", NULL),\n\t\tMPP_FUNCTION(0x03, \"twsi-opt3\", NULL)),\n};\n\nstatic struct pinctrl_gpio_range dove_mpp_gpio_ranges[] = {\n\tMPP_GPIO_RANGE(0,  0,  0, 32),\n\tMPP_GPIO_RANGE(1, 32, 32, 32),\n\tMPP_GPIO_RANGE(2, 64, 64,  8),\n};\n\nstatic struct mvebu_pinctrl_soc_info dove_pinctrl_info = {\n\t.controls = dove_mpp_controls,\n\t.ncontrols = ARRAY_SIZE(dove_mpp_controls),\n\t.modes = dove_mpp_modes,\n\t.nmodes = ARRAY_SIZE(dove_mpp_modes),\n\t.gpioranges = dove_mpp_gpio_ranges,\n\t.ngpioranges = ARRAY_SIZE(dove_mpp_gpio_ranges),\n\t.variant = 0,\n};\n\nstatic struct clk *clk;\n\nstatic const struct of_device_id dove_pinctrl_of_match[] = {\n\t{ .compatible = \"marvell,dove-pinctrl\", .data = &dove_pinctrl_info },\n\t{ }\n};\n\nstatic const struct regmap_config gc_regmap_config = {\n\t.reg_bits = 32,\n\t.val_bits = 32,\n\t.reg_stride = 4,\n\t.max_register = 5,\n};\n\nstatic int dove_pinctrl_probe(struct platform_device *pdev)\n{\n\tstruct resource *res, *mpp_res;\n\tstruct resource fb_res;\n\tconst struct of_device_id *match =\n\t\tof_match_device(dove_pinctrl_of_match, &pdev->dev);\n\tstruct mvebu_mpp_ctrl_data *mpp_data;\n\tvoid __iomem *base;\n\tint i;\n\n\tpdev->dev.platform_data = (void *)match->data;\n\n\t \n\tclk = devm_clk_get(&pdev->dev, NULL);\n\tif (IS_ERR(clk)) {\n\t\tdev_err(&pdev->dev, \"Unable to get pdma clock\");\n\t\treturn PTR_ERR(clk);\n\t}\n\tclk_prepare_enable(clk);\n\n\tbase = devm_platform_get_and_ioremap_resource(pdev, 0, &mpp_res);\n\tif (IS_ERR(base))\n\t\treturn PTR_ERR(base);\n\n\tmpp_data = devm_kcalloc(&pdev->dev, dove_pinctrl_info.ncontrols,\n\t\t\t\tsizeof(*mpp_data), GFP_KERNEL);\n\tif (!mpp_data)\n\t\treturn -ENOMEM;\n\n\tdove_pinctrl_info.control_data = mpp_data;\n\tfor (i = 0; i < ARRAY_SIZE(dove_mpp_controls); i++)\n\t\tmpp_data[i].base = base;\n\n\t \n\tmemcpy(&fb_res, mpp_res, sizeof(struct resource));\n\tfb_res.start = 0;\n\n\tres = platform_get_resource(pdev, IORESOURCE_MEM, 1);\n\tif (!res) {\n\t\tdev_warn(&pdev->dev, \"falling back to hardcoded MPP4 resource\\n\");\n\t\tadjust_resource(&fb_res,\n\t\t\t(mpp_res->start & INT_REGS_MASK) + MPP4_REGS_OFFS, 0x4);\n\t\tres = &fb_res;\n\t}\n\n\tmpp4_base = devm_ioremap_resource(&pdev->dev, res);\n\tif (IS_ERR(mpp4_base))\n\t\treturn PTR_ERR(mpp4_base);\n\n\tres = platform_get_resource(pdev, IORESOURCE_MEM, 2);\n\tif (!res) {\n\t\tdev_warn(&pdev->dev, \"falling back to hardcoded PMU resource\\n\");\n\t\tadjust_resource(&fb_res,\n\t\t\t(mpp_res->start & INT_REGS_MASK) + PMU_REGS_OFFS, 0x8);\n\t\tres = &fb_res;\n\t}\n\n\tpmu_base = devm_ioremap_resource(&pdev->dev, res);\n\tif (IS_ERR(pmu_base))\n\t\treturn PTR_ERR(pmu_base);\n\n\tgconfmap = syscon_regmap_lookup_by_compatible(\"marvell,dove-global-config\");\n\tif (IS_ERR(gconfmap)) {\n\t\tvoid __iomem *gc_base;\n\n\t\tdev_warn(&pdev->dev, \"falling back to hardcoded global registers\\n\");\n\t\tadjust_resource(&fb_res,\n\t\t\t(mpp_res->start & INT_REGS_MASK) + GC_REGS_OFFS, 0x14);\n\t\tgc_base = devm_ioremap_resource(&pdev->dev, &fb_res);\n\t\tif (IS_ERR(gc_base))\n\t\t\treturn PTR_ERR(gc_base);\n\t\tgconfmap = devm_regmap_init_mmio(&pdev->dev,\n\t\t\t\t\t\t gc_base, &gc_regmap_config);\n\t\tif (IS_ERR(gconfmap))\n\t\t\treturn PTR_ERR(gconfmap);\n\t}\n\n\t \n\tif (fb_res.start)\n\t\tdev_warn(&pdev->dev, FW_BUG \"Missing pinctrl regs in DTB. Please update your firmware.\\n\");\n\n\treturn mvebu_pinctrl_probe(pdev);\n}\n\nstatic struct platform_driver dove_pinctrl_driver = {\n\t.driver = {\n\t\t.name = \"dove-pinctrl\",\n\t\t.suppress_bind_attrs = true,\n\t\t.of_match_table = dove_pinctrl_of_match,\n\t},\n\t.probe = dove_pinctrl_probe,\n};\nbuiltin_platform_driver(dove_pinctrl_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}