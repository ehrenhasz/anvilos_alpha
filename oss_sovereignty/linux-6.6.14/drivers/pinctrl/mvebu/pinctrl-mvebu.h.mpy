{
  "module_name": "pinctrl-mvebu.h",
  "hash_id": "c1fdb0f7796bd552a85cbd0edee57addbe23351c4a1497ba23ed90ca606357ee",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mvebu/pinctrl-mvebu.h",
  "human_readable_source": " \n \n\n#ifndef __PINCTRL_MVEBU_H__\n#define __PINCTRL_MVEBU_H__\n\n \nstruct mvebu_mpp_ctrl_data {\n\tunion {\n\t\tvoid __iomem *base;\n\t\tstruct {\n\t\t\tstruct regmap *map;\n\t\t\tu32 offset;\n\t\t} regmap;\n\t};\n};\n\n \nstruct mvebu_mpp_ctrl {\n\tconst char *name;\n\tu8 pid;\n\tu8 npins;\n\tunsigned *pins;\n\tint (*mpp_get)(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t       unsigned long *config);\n\tint (*mpp_set)(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t       unsigned long config);\n\tint (*mpp_gpio_req)(struct mvebu_mpp_ctrl_data *data, unsigned pid);\n\tint (*mpp_gpio_dir)(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t    bool input);\n};\n\n \nstruct mvebu_mpp_ctrl_setting {\n\tu8 val;\n\tconst char *name;\n\tconst char *subname;\n\tu8 variant;\n\tu8 flags;\n#define  MVEBU_SETTING_GPO\t(1 << 0)\n#define  MVEBU_SETTING_GPI\t(1 << 1)\n};\n\n \nstruct mvebu_mpp_mode {\n\tu8 pid;\n\tstruct mvebu_mpp_ctrl_setting *settings;\n};\n\n \nstruct mvebu_pinctrl_soc_info {\n\tu8 variant;\n\tconst struct mvebu_mpp_ctrl *controls;\n\tstruct mvebu_mpp_ctrl_data *control_data;\n\tint ncontrols;\n\tstruct mvebu_mpp_mode *modes;\n\tint nmodes;\n\tstruct pinctrl_gpio_range *gpioranges;\n\tint ngpioranges;\n};\n\n#define MPP_FUNC_CTRL(_idl, _idh, _name, _func)\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.name = _name,\t\t\t\t\t\\\n\t\t.pid = _idl,\t\t\t\t\t\\\n\t\t.npins = _idh - _idl + 1,\t\t\t\\\n\t\t.pins = (unsigned[_idh - _idl + 1]) { },\t\\\n\t\t.mpp_get = _func ## _get,\t\t\t\\\n\t\t.mpp_set = _func ## _set,\t\t\t\\\n\t\t.mpp_gpio_req = NULL,\t\t\t\t\\\n\t\t.mpp_gpio_dir = NULL,\t\t\t\t\\\n\t}\n\n#define MPP_FUNC_GPIO_CTRL(_idl, _idh, _name, _func)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.name = _name,\t\t\t\t\t\\\n\t\t.pid = _idl,\t\t\t\t\t\\\n\t\t.npins = _idh - _idl + 1,\t\t\t\\\n\t\t.pins = (unsigned[_idh - _idl + 1]) { },\t\\\n\t\t.mpp_get = _func ## _get,\t\t\t\\\n\t\t.mpp_set = _func ## _set,\t\t\t\\\n\t\t.mpp_gpio_req = _func ## _gpio_req,\t\t\\\n\t\t.mpp_gpio_dir = _func ## _gpio_dir,\t\t\\\n\t}\n\n#define _MPP_VAR_FUNCTION(_val, _name, _subname, _mask)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.val = _val,\t\t\t\t\t\\\n\t\t.name = _name,\t\t\t\t\t\\\n\t\t.subname = _subname,\t\t\t\t\\\n\t\t.variant = _mask,\t\t\t\t\\\n\t\t.flags = 0,\t\t\t\t\t\\\n\t}\n\n#if defined(CONFIG_DEBUG_FS)\n#define MPP_VAR_FUNCTION(_val, _name, _subname, _mask)\t\t\\\n\t_MPP_VAR_FUNCTION(_val, _name, _subname, _mask)\n#else\n#define MPP_VAR_FUNCTION(_val, _name, _subname, _mask)\t\t\\\n\t_MPP_VAR_FUNCTION(_val, _name, NULL, _mask)\n#endif\n\n#define MPP_FUNCTION(_val, _name, _subname)\t\t\t\\\n\tMPP_VAR_FUNCTION(_val, _name, _subname, (u8)-1)\n\n#define MPP_MODE(_id, ...)\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.pid = _id,\t\t\t\t\t\\\n\t\t.settings = (struct mvebu_mpp_ctrl_setting[]){\t\\\n\t\t\t__VA_ARGS__, { } },\t\t\t\\\n\t}\n\n#define MPP_GPIO_RANGE(_id, _pinbase, _gpiobase, _npins)\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.name = \"mvebu-gpio\",\t\t\t\t\\\n\t\t.id = _id,\t\t\t\t\t\\\n\t\t.pin_base = _pinbase,\t\t\t\t\\\n\t\t.base = _gpiobase,\t\t\t\t\\\n\t\t.npins = _npins,\t\t\t\t\\\n\t}\n\n#define MVEBU_MPPS_PER_REG\t8\n#define MVEBU_MPP_BITS\t\t4\n#define MVEBU_MPP_MASK\t\t0xf\n\nint mvebu_mmio_mpp_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t       unsigned long *config);\nint mvebu_mmio_mpp_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t       unsigned long config);\nint mvebu_regmap_mpp_ctrl_get(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long *config);\nint mvebu_regmap_mpp_ctrl_set(struct mvebu_mpp_ctrl_data *data, unsigned pid,\n\t\t\t      unsigned long config);\n\nint mvebu_pinctrl_probe(struct platform_device *pdev);\nint mvebu_pinctrl_simple_mmio_probe(struct platform_device *pdev);\nint mvebu_pinctrl_simple_regmap_probe(struct platform_device *pdev,\n\t\t\t\t      struct device *syscon_dev, u32 offset);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}