{
  "module_name": "pinctrl-armada-ap806.c",
  "hash_id": "2e1f322b61a84bf84ea9c41f7b8f4384d0d7cb24020fd9c2c6594c1e276005e2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mvebu/pinctrl-armada-ap806.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/platform_device.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/pinctrl/pinctrl.h>\n\n#include \"pinctrl-mvebu.h\"\n\nstatic struct mvebu_mpp_mode armada_ap806_mpp_modes[] = {\n\tMPP_MODE(0,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"clk\"),\n\t\t MPP_FUNCTION(3, \"spi0\",    \"clk\")),\n\tMPP_MODE(1,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"cmd\"),\n\t\t MPP_FUNCTION(3, \"spi0\",    \"miso\")),\n\tMPP_MODE(2,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d0\"),\n\t\t MPP_FUNCTION(3, \"spi0\",    \"mosi\")),\n\tMPP_MODE(3,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d1\"),\n\t\t MPP_FUNCTION(3, \"spi0\",    \"cs0n\")),\n\tMPP_MODE(4,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d2\"),\n\t\t MPP_FUNCTION(3, \"i2c0\",    \"sda\")),\n\tMPP_MODE(5,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d3\"),\n\t\t MPP_FUNCTION(3, \"i2c0\",    \"sdk\")),\n\tMPP_MODE(6,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"ds\")),\n\tMPP_MODE(7,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d4\"),\n\t\t MPP_FUNCTION(3, \"uart1\",   \"rxd\")),\n\tMPP_MODE(8,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d5\"),\n\t\t MPP_FUNCTION(3, \"uart1\",   \"txd\")),\n\tMPP_MODE(9,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d6\"),\n\t\t MPP_FUNCTION(3, \"spi0\",    \"cs1n\")),\n\tMPP_MODE(10,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"d7\")),\n\tMPP_MODE(11,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(3, \"uart0\",   \"txd\")),\n\tMPP_MODE(12,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(1, \"sdio\",    \"pw_off\"),\n\t\t MPP_FUNCTION(2, \"sdio\",    \"hw_rst\")),\n\tMPP_MODE(13,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(14,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(15,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(16,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(17,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(18,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL)),\n\tMPP_MODE(19,\n\t\t MPP_FUNCTION(0, \"gpio\",    NULL),\n\t\t MPP_FUNCTION(3, \"uart0\",   \"rxd\"),\n\t\t MPP_FUNCTION(4, \"sdio\",    \"pw_off\")),\n};\n\nstatic struct mvebu_pinctrl_soc_info armada_ap806_pinctrl_info;\n\nstatic const struct of_device_id armada_ap806_pinctrl_of_match[] = {\n\t{\n\t\t.compatible = \"marvell,ap806-pinctrl\",\n\t},\n\t{ },\n};\n\nstatic const struct mvebu_mpp_ctrl armada_ap806_mpp_controls[] = {\n\tMPP_FUNC_CTRL(0, 19, NULL, mvebu_regmap_mpp_ctrl),\n};\n\nstatic struct pinctrl_gpio_range armada_ap806_mpp_gpio_ranges[] = {\n\tMPP_GPIO_RANGE(0,   0,  0, 20),\n};\n\nstatic int armada_ap806_pinctrl_probe(struct platform_device *pdev)\n{\n\tstruct mvebu_pinctrl_soc_info *soc = &armada_ap806_pinctrl_info;\n\tconst struct of_device_id *match =\n\t\tof_match_device(armada_ap806_pinctrl_of_match, &pdev->dev);\n\n\tif (!match || !pdev->dev.parent)\n\t\treturn -ENODEV;\n\n\tsoc->variant = 0;  \n\tsoc->controls = armada_ap806_mpp_controls;\n\tsoc->ncontrols = ARRAY_SIZE(armada_ap806_mpp_controls);\n\tsoc->gpioranges = armada_ap806_mpp_gpio_ranges;\n\tsoc->ngpioranges = ARRAY_SIZE(armada_ap806_mpp_gpio_ranges);\n\tsoc->modes = armada_ap806_mpp_modes;\n\tsoc->nmodes = armada_ap806_mpp_controls[0].npins;\n\n\tpdev->dev.platform_data = soc;\n\n\treturn mvebu_pinctrl_simple_regmap_probe(pdev, pdev->dev.parent, 0);\n}\n\nstatic struct platform_driver armada_ap806_pinctrl_driver = {\n\t.driver = {\n\t\t.name = \"armada-ap806-pinctrl\",\n\t\t.of_match_table = of_match_ptr(armada_ap806_pinctrl_of_match),\n\t},\n\t.probe = armada_ap806_pinctrl_probe,\n};\n\nbuiltin_platform_driver(armada_ap806_pinctrl_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}