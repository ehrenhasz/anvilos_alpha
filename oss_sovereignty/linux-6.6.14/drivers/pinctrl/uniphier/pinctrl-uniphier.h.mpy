{
  "module_name": "pinctrl-uniphier.h",
  "hash_id": "03d720b9f591be53b8e31973695834019cf46dafb072e875d316ba427a14f964",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/uniphier/pinctrl-uniphier.h",
  "human_readable_source": " \n \n\n#ifndef __PINCTRL_UNIPHIER_H__\n#define __PINCTRL_UNIPHIER_H__\n\n#include <linux/bits.h>\n#include <linux/build_bug.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n\nstruct platform_device;\n\n \n#define UNIPHIER_PIN_IECTRL_SHIFT\t0\n#define UNIPHIER_PIN_IECTRL_BITS\t3\n#define UNIPHIER_PIN_IECTRL_MASK\t((1UL << (UNIPHIER_PIN_IECTRL_BITS)) \\\n\t\t\t\t\t - 1)\n\n \n#define UNIPHIER_PIN_DRVCTRL_SHIFT\t((UNIPHIER_PIN_IECTRL_SHIFT) + \\\n\t\t\t\t\t(UNIPHIER_PIN_IECTRL_BITS))\n#define UNIPHIER_PIN_DRVCTRL_BITS\t9\n#define UNIPHIER_PIN_DRVCTRL_MASK\t((1UL << (UNIPHIER_PIN_DRVCTRL_BITS)) \\\n\t\t\t\t\t - 1)\n\n \n#define UNIPHIER_PIN_DRV_TYPE_SHIFT\t((UNIPHIER_PIN_DRVCTRL_SHIFT) + \\\n\t\t\t\t\t (UNIPHIER_PIN_DRVCTRL_BITS))\n#define UNIPHIER_PIN_DRV_TYPE_BITS\t3\n#define UNIPHIER_PIN_DRV_TYPE_MASK\t((1UL << (UNIPHIER_PIN_DRV_TYPE_BITS)) \\\n\t\t\t\t\t - 1)\n\n \n#define UNIPHIER_PIN_PUPDCTRL_SHIFT\t((UNIPHIER_PIN_DRV_TYPE_SHIFT) + \\\n\t\t\t\t\t (UNIPHIER_PIN_DRV_TYPE_BITS))\n#define UNIPHIER_PIN_PUPDCTRL_BITS\t9\n#define UNIPHIER_PIN_PUPDCTRL_MASK\t((1UL << (UNIPHIER_PIN_PUPDCTRL_BITS))\\\n\t\t\t\t\t - 1)\n\n \n#define UNIPHIER_PIN_PULL_DIR_SHIFT\t((UNIPHIER_PIN_PUPDCTRL_SHIFT) + \\\n\t\t\t\t\t (UNIPHIER_PIN_PUPDCTRL_BITS))\n#define UNIPHIER_PIN_PULL_DIR_BITS\t3\n#define UNIPHIER_PIN_PULL_DIR_MASK\t((1UL << (UNIPHIER_PIN_PULL_DIR_BITS))\\\n\t\t\t\t\t - 1)\n\n#if UNIPHIER_PIN_PULL_DIR_SHIFT + UNIPHIER_PIN_PULL_DIR_BITS > BITS_PER_LONG\n#error \"unable to pack pin attributes.\"\n#endif\n\n#define UNIPHIER_PIN_IECTRL_NONE\t(UNIPHIER_PIN_IECTRL_MASK)\n#define UNIPHIER_PIN_IECTRL_EXIST\t0\n\n \nenum uniphier_pin_drv_type {\n\tUNIPHIER_PIN_DRV_1BIT,\t\t \n\tUNIPHIER_PIN_DRV_2BIT,\t\t \n\tUNIPHIER_PIN_DRV_3BIT,\t\t \n\tUNIPHIER_PIN_DRV_FIXED4,\t \n\tUNIPHIER_PIN_DRV_FIXED5,\t \n\tUNIPHIER_PIN_DRV_FIXED8,\t \n\tUNIPHIER_PIN_DRV_NONE,\t\t \n};\n\n \nenum uniphier_pin_pull_dir {\n\tUNIPHIER_PIN_PULL_UP,\t\t \n\tUNIPHIER_PIN_PULL_DOWN,\t\t \n\tUNIPHIER_PIN_PULL_UP_FIXED,\t \n\tUNIPHIER_PIN_PULL_DOWN_FIXED,\t \n\tUNIPHIER_PIN_PULL_NONE,\t\t \n};\n\n#define UNIPHIER_PIN_IECTRL(x) \\\n\t(((x) & (UNIPHIER_PIN_IECTRL_MASK)) << (UNIPHIER_PIN_IECTRL_SHIFT))\n#define UNIPHIER_PIN_DRVCTRL(x) \\\n\t(((x) & (UNIPHIER_PIN_DRVCTRL_MASK)) << (UNIPHIER_PIN_DRVCTRL_SHIFT))\n#define UNIPHIER_PIN_DRV_TYPE(x) \\\n\t(((x) & (UNIPHIER_PIN_DRV_TYPE_MASK)) << (UNIPHIER_PIN_DRV_TYPE_SHIFT))\n#define UNIPHIER_PIN_PUPDCTRL(x) \\\n\t(((x) & (UNIPHIER_PIN_PUPDCTRL_MASK)) << (UNIPHIER_PIN_PUPDCTRL_SHIFT))\n#define UNIPHIER_PIN_PULL_DIR(x) \\\n\t(((x) & (UNIPHIER_PIN_PULL_DIR_MASK)) << (UNIPHIER_PIN_PULL_DIR_SHIFT))\n\n#define UNIPHIER_PIN_ATTR_PACKED(iectrl, drvctrl, drv_type, pupdctrl, pull_dir)\\\n\t\t\t\t(UNIPHIER_PIN_IECTRL(iectrl) |\t\t\\\n\t\t\t\t UNIPHIER_PIN_DRVCTRL(drvctrl) |\t\\\n\t\t\t\t UNIPHIER_PIN_DRV_TYPE(drv_type) |\t\\\n\t\t\t\t UNIPHIER_PIN_PUPDCTRL(pupdctrl) |\t\\\n\t\t\t\t UNIPHIER_PIN_PULL_DIR(pull_dir))\n\nstatic inline unsigned int uniphier_pin_get_iectrl(void *drv_data)\n{\n\treturn ((unsigned long)drv_data >> UNIPHIER_PIN_IECTRL_SHIFT) &\n\t\t\t\t\t\tUNIPHIER_PIN_IECTRL_MASK;\n}\n\nstatic inline unsigned int uniphier_pin_get_drvctrl(void *drv_data)\n{\n\treturn ((unsigned long)drv_data >> UNIPHIER_PIN_DRVCTRL_SHIFT) &\n\t\t\t\t\t\tUNIPHIER_PIN_DRVCTRL_MASK;\n}\n\nstatic inline unsigned int uniphier_pin_get_drv_type(void *drv_data)\n{\n\treturn ((unsigned long)drv_data >> UNIPHIER_PIN_DRV_TYPE_SHIFT) &\n\t\t\t\t\t\tUNIPHIER_PIN_DRV_TYPE_MASK;\n}\n\nstatic inline unsigned int uniphier_pin_get_pupdctrl(void *drv_data)\n{\n\treturn ((unsigned long)drv_data >> UNIPHIER_PIN_PUPDCTRL_SHIFT) &\n\t\t\t\t\t\tUNIPHIER_PIN_PUPDCTRL_MASK;\n}\n\nstatic inline unsigned int uniphier_pin_get_pull_dir(void *drv_data)\n{\n\treturn ((unsigned long)drv_data >> UNIPHIER_PIN_PULL_DIR_SHIFT) &\n\t\t\t\t\t\tUNIPHIER_PIN_PULL_DIR_MASK;\n}\n\nstruct uniphier_pinctrl_group {\n\tconst char *name;\n\tconst unsigned *pins;\n\tunsigned num_pins;\n\tconst int *muxvals;\n};\n\nstruct uniphier_pinmux_function {\n\tconst char *name;\n\tconst char * const *groups;\n\tunsigned num_groups;\n};\n\nstruct uniphier_pinctrl_socdata {\n\tconst struct pinctrl_pin_desc *pins;\n\tunsigned int npins;\n\tconst struct uniphier_pinctrl_group *groups;\n\tint groups_count;\n\tconst struct uniphier_pinmux_function *functions;\n\tint functions_count;\n\tint (*get_gpio_muxval)(unsigned int pin, unsigned int gpio_offset);\n\tunsigned int caps;\n#define UNIPHIER_PINCTRL_CAPS_PERPIN_IECTRL\tBIT(1)\n#define UNIPHIER_PINCTRL_CAPS_DBGMUX_SEPARATE\tBIT(0)\n};\n\n#define UNIPHIER_PINCTRL_PIN(a, b, c, d, e, f, g)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t.number = a,\t\t\t\t\t\t\t\\\n\t.name = b,\t\t\t\t\t\t\t\\\n\t.drv_data = (void *)UNIPHIER_PIN_ATTR_PACKED(c, d, e, f, g),\t\\\n}\n\n#define __UNIPHIER_PINCTRL_GROUP(grp, mux)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.name = #grp,\t\t\t\t\t\t\\\n\t\t.pins = grp##_pins,\t\t\t\t\t\\\n\t\t.num_pins = ARRAY_SIZE(grp##_pins),\t\t\t\\\n\t\t.muxvals = mux,\t\t\t\t\t\t\\\n\t}\n\n#define UNIPHIER_PINCTRL_GROUP(grp)\t\t\t\t\t\\\n\t__UNIPHIER_PINCTRL_GROUP(grp,\t\t\t\t\t\\\n\t\t\tgrp##_muxvals +\t\t\t\t\t\\\n\t\t\tBUILD_BUG_ON_ZERO(ARRAY_SIZE(grp##_pins) !=\t\\\n\t\t\t\t\t  ARRAY_SIZE(grp##_muxvals)))\n\n#define UNIPHIER_PINCTRL_GROUP_GPIO(grp)\t\t\t\t\\\n\t__UNIPHIER_PINCTRL_GROUP(grp, NULL)\n\n#define UNIPHIER_PINMUX_FUNCTION(func)\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.name = #func,\t\t\t\t\t\t\\\n\t\t.groups = func##_groups,\t\t\t\t\\\n\t\t.num_groups = ARRAY_SIZE(func##_groups),\t\t\\\n\t}\n\nint uniphier_pinctrl_probe(struct platform_device *pdev,\n\t\t\t   const struct uniphier_pinctrl_socdata *socdata);\n\nextern const struct dev_pm_ops uniphier_pinctrl_pm_ops;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}