{
  "module_name": "pinctrl-intel.h",
  "hash_id": "ec17a75fca62d72ff792ed19666ae2b82f63ab53a2626c6c02fbf1fd8dc79b65",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/intel/pinctrl-intel.h",
  "human_readable_source": " \n \n\n#ifndef PINCTRL_INTEL_H\n#define PINCTRL_INTEL_H\n\n#include <linux/bits.h>\n#include <linux/compiler_types.h>\n#include <linux/gpio/driver.h>\n#include <linux/irq.h>\n#include <linux/kernel.h>\n#include <linux/pm.h>\n#include <linux/pinctrl/pinctrl.h>\n#include <linux/spinlock_types.h>\n\nstruct platform_device;\nstruct device;\n\n \nstruct intel_pingroup {\n\tstruct pingroup grp;\n\tunsigned short mode;\n\tconst unsigned int *modes;\n};\n\n \nstruct intel_function {\n\tstruct pinfunction func;\n};\n\n#define INTEL_PINCTRL_MAX_GPP_SIZE\t32\n\n \nstruct intel_padgroup {\n\tunsigned int reg_num;\n\tunsigned int base;\n\tunsigned int size;\n\tint gpio_base;\n\tunsigned int padown_num;\n};\n\n \nenum {\n\tINTEL_GPIO_BASE_ZERO\t= -2,\n\tINTEL_GPIO_BASE_NOMAP\t= -1,\n\tINTEL_GPIO_BASE_MATCH\t= 0,\n};\n\n \nstruct intel_community {\n\tunsigned int barno;\n\tunsigned int padown_offset;\n\tunsigned int padcfglock_offset;\n\tunsigned int hostown_offset;\n\tunsigned int is_offset;\n\tunsigned int ie_offset;\n\tunsigned int features;\n\tunsigned int pin_base;\n\tsize_t npins;\n\tunsigned int gpp_size;\n\tunsigned int gpp_num_padown_regs;\n\tconst struct intel_padgroup *gpps;\n\tsize_t ngpps;\n\tconst unsigned int *pad_map;\n\tunsigned short nirqs;\n\tunsigned short acpi_space_id;\n\n\t \n\tvoid __iomem *regs;\n\tvoid __iomem *pad_regs;\n};\n\n \n#define PINCTRL_FEATURE_DEBOUNCE\tBIT(0)\n#define PINCTRL_FEATURE_1K_PD\t\tBIT(1)\n#define PINCTRL_FEATURE_GPIO_HW_INFO\tBIT(2)\n#define PINCTRL_FEATURE_PWM\t\tBIT(3)\n#define PINCTRL_FEATURE_BLINK\t\tBIT(4)\n#define PINCTRL_FEATURE_EXP\t\tBIT(5)\n\n#define __INTEL_COMMUNITY(b, s, e, g, n, gs, gn, soc)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.barno = (b),\t\t\t\t\t\\\n\t\t.padown_offset = soc ## _PAD_OWN,\t\t\\\n\t\t.padcfglock_offset = soc ## _PADCFGLOCK,\t\\\n\t\t.hostown_offset = soc ## _HOSTSW_OWN,\t\t\\\n\t\t.is_offset = soc ## _GPI_IS,\t\t\t\\\n\t\t.ie_offset = soc ## _GPI_IE,\t\t\t\\\n\t\t.gpp_size = (gs),\t\t\t\t\\\n\t\t.gpp_num_padown_regs = (gn),\t\t\t\\\n\t\t.pin_base = (s),\t\t\t\t\\\n\t\t.npins = ((e) - (s) + 1),\t\t\t\\\n\t\t.gpps = (g),\t\t\t\t\t\\\n\t\t.ngpps = (n),\t\t\t\t\t\\\n\t}\n\n#define INTEL_COMMUNITY_GPPS(b, s, e, g, soc)\t\t\t\\\n\t__INTEL_COMMUNITY(b, s, e, g, ARRAY_SIZE(g), 0, 0, soc)\n\n#define INTEL_COMMUNITY_SIZE(b, s, e, gs, gn, soc)\t\t\\\n\t__INTEL_COMMUNITY(b, s, e, NULL, 0, gs, gn, soc)\n\n \n#define PIN_GROUP(n, p, m)\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\t\t\\\n\t\t.grp = PINCTRL_PINGROUP((n), (p), ARRAY_SIZE((p))),\t\t\t\\\n\t\t.mode = __builtin_choose_expr(__builtin_constant_p((m)), (m), 0),\t\\\n\t\t.modes = __builtin_choose_expr(__builtin_constant_p((m)), NULL, (m)),\t\\\n\t}\n\n#define FUNCTION(n, g)\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.func = PINCTRL_PINFUNCTION((n), (g), ARRAY_SIZE(g)),\t\\\n\t}\n\n \nstruct intel_pinctrl_soc_data {\n\tconst char *uid;\n\tconst struct pinctrl_pin_desc *pins;\n\tsize_t npins;\n\tconst struct intel_pingroup *groups;\n\tsize_t ngroups;\n\tconst struct intel_function *functions;\n\tsize_t nfunctions;\n\tconst struct intel_community *communities;\n\tsize_t ncommunities;\n};\n\nconst struct intel_pinctrl_soc_data *intel_pinctrl_get_soc_data(struct platform_device *pdev);\n\nstruct intel_pad_context;\nstruct intel_community_context;\n\n \nstruct intel_pinctrl_context {\n\tstruct intel_pad_context *pads;\n\tstruct intel_community_context *communities;\n};\n\n \nstruct intel_pinctrl {\n\tstruct device *dev;\n\traw_spinlock_t lock;\n\tstruct pinctrl_desc pctldesc;\n\tstruct pinctrl_dev *pctldev;\n\tstruct gpio_chip chip;\n\tconst struct intel_pinctrl_soc_data *soc;\n\tstruct intel_community *communities;\n\tsize_t ncommunities;\n\tstruct intel_pinctrl_context context;\n\tint irq;\n};\n\nint intel_pinctrl_probe_by_hid(struct platform_device *pdev);\nint intel_pinctrl_probe_by_uid(struct platform_device *pdev);\n\n#ifdef CONFIG_PM_SLEEP\nint intel_pinctrl_suspend_noirq(struct device *dev);\nint intel_pinctrl_resume_noirq(struct device *dev);\n#endif\n\n#define INTEL_PINCTRL_PM_OPS(_name)\t\t\t\t\t\\\nconst struct dev_pm_ops _name = {\t\t\t\t\t\\\n\tSET_NOIRQ_SYSTEM_SLEEP_PM_OPS(intel_pinctrl_suspend_noirq,\t\\\n\t\t\t\t      intel_pinctrl_resume_noirq)\t\\\n}\n\nstruct intel_community *intel_get_community(struct intel_pinctrl *pctrl, unsigned int pin);\n\nint intel_get_groups_count(struct pinctrl_dev *pctldev);\nconst char *intel_get_group_name(struct pinctrl_dev *pctldev, unsigned int group);\nint intel_get_group_pins(struct pinctrl_dev *pctldev, unsigned int group,\n\t\t\t const unsigned int **pins, unsigned int *npins);\n\nint intel_get_functions_count(struct pinctrl_dev *pctldev);\nconst char *intel_get_function_name(struct pinctrl_dev *pctldev, unsigned int function);\nint intel_get_function_groups(struct pinctrl_dev *pctldev, unsigned int function,\n\t\t\t      const char * const **groups, unsigned int * const ngroups);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}