{
  "module_name": "pinctrl-mt7620.c",
  "hash_id": "5f0ae3e51d29e541d3810b41f35807ce8b510688aabe1f85d856a15f9917fac5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mediatek/pinctrl-mt7620.c",
  "human_readable_source": "\n\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/of.h>\n#include \"pinctrl-mtmips.h\"\n\n#define MT7620_GPIO_MODE_UART0_SHIFT\t2\n#define MT7620_GPIO_MODE_UART0_MASK\t0x7\n#define MT7620_GPIO_MODE_UART0(x)\t((x) << MT7620_GPIO_MODE_UART0_SHIFT)\n#define MT7620_GPIO_MODE_UARTF\t\t0x0\n#define MT7620_GPIO_MODE_PCM_UARTF\t0x1\n#define MT7620_GPIO_MODE_PCM_I2S\t0x2\n#define MT7620_GPIO_MODE_I2S_UARTF\t0x3\n#define MT7620_GPIO_MODE_PCM_GPIO\t0x4\n#define MT7620_GPIO_MODE_GPIO_UARTF\t0x5\n#define MT7620_GPIO_MODE_GPIO_I2S\t0x6\n#define MT7620_GPIO_MODE_GPIO\t\t0x7\n\n#define MT7620_GPIO_MODE_NAND\t\t0\n#define MT7620_GPIO_MODE_SD\t\t1\n#define MT7620_GPIO_MODE_ND_SD_GPIO\t2\n#define MT7620_GPIO_MODE_ND_SD_MASK\t0x3\n#define MT7620_GPIO_MODE_ND_SD_SHIFT\t18\n\n#define MT7620_GPIO_MODE_PCIE_RST\t0\n#define MT7620_GPIO_MODE_PCIE_REF\t1\n#define MT7620_GPIO_MODE_PCIE_GPIO\t2\n#define MT7620_GPIO_MODE_PCIE_MASK\t0x3\n#define MT7620_GPIO_MODE_PCIE_SHIFT\t16\n\n#define MT7620_GPIO_MODE_WDT_RST\t0\n#define MT7620_GPIO_MODE_WDT_REF\t1\n#define MT7620_GPIO_MODE_WDT_GPIO\t2\n#define MT7620_GPIO_MODE_WDT_MASK\t0x3\n#define MT7620_GPIO_MODE_WDT_SHIFT\t21\n\n#define MT7620_GPIO_MODE_MDIO\t\t0\n#define MT7620_GPIO_MODE_MDIO_REFCLK\t1\n#define MT7620_GPIO_MODE_MDIO_GPIO\t2\n#define MT7620_GPIO_MODE_MDIO_MASK\t0x3\n#define MT7620_GPIO_MODE_MDIO_SHIFT\t7\n\n#define MT7620_GPIO_MODE_I2C\t\t0\n#define MT7620_GPIO_MODE_UART1\t\t5\n#define MT7620_GPIO_MODE_RGMII1\t\t9\n#define MT7620_GPIO_MODE_RGMII2\t\t10\n#define MT7620_GPIO_MODE_SPI\t\t11\n#define MT7620_GPIO_MODE_SPI_REF_CLK\t12\n#define MT7620_GPIO_MODE_WLED\t\t13\n#define MT7620_GPIO_MODE_JTAG\t\t15\n#define MT7620_GPIO_MODE_EPHY\t\t15\n#define MT7620_GPIO_MODE_PA\t\t20\n\nstatic struct mtmips_pmx_func i2c_grp[] =  { FUNC(\"i2c\", 0, 1, 2) };\nstatic struct mtmips_pmx_func spi_grp[] = { FUNC(\"spi\", 0, 3, 4) };\nstatic struct mtmips_pmx_func uartlite_grp[] = { FUNC(\"uartlite\", 0, 15, 2) };\nstatic struct mtmips_pmx_func mdio_grp[] = {\n\tFUNC(\"mdio\", MT7620_GPIO_MODE_MDIO, 22, 2),\n\tFUNC(\"refclk\", MT7620_GPIO_MODE_MDIO_REFCLK, 22, 2),\n};\nstatic struct mtmips_pmx_func rgmii1_grp[] = { FUNC(\"rgmii1\", 0, 24, 12) };\nstatic struct mtmips_pmx_func refclk_grp[] = { FUNC(\"spi refclk\", 0, 37, 3) };\nstatic struct mtmips_pmx_func ephy_grp[] = { FUNC(\"ephy\", 0, 40, 5) };\nstatic struct mtmips_pmx_func rgmii2_grp[] = { FUNC(\"rgmii2\", 0, 60, 12) };\nstatic struct mtmips_pmx_func wled_grp[] = { FUNC(\"wled\", 0, 72, 1) };\nstatic struct mtmips_pmx_func pa_grp[] = { FUNC(\"pa\", 0, 18, 4) };\nstatic struct mtmips_pmx_func uartf_grp[] = {\n\tFUNC(\"uartf\", MT7620_GPIO_MODE_UARTF, 7, 8),\n\tFUNC(\"pcm uartf\", MT7620_GPIO_MODE_PCM_UARTF, 7, 8),\n\tFUNC(\"pcm i2s\", MT7620_GPIO_MODE_PCM_I2S, 7, 8),\n\tFUNC(\"i2s uartf\", MT7620_GPIO_MODE_I2S_UARTF, 7, 8),\n\tFUNC(\"pcm gpio\", MT7620_GPIO_MODE_PCM_GPIO, 11, 4),\n\tFUNC(\"gpio uartf\", MT7620_GPIO_MODE_GPIO_UARTF, 7, 4),\n\tFUNC(\"gpio i2s\", MT7620_GPIO_MODE_GPIO_I2S, 7, 4),\n};\nstatic struct mtmips_pmx_func wdt_grp[] = {\n\tFUNC(\"wdt rst\", 0, 17, 1),\n\tFUNC(\"wdt refclk\", 0, 17, 1),\n\t};\nstatic struct mtmips_pmx_func pcie_rst_grp[] = {\n\tFUNC(\"pcie rst\", MT7620_GPIO_MODE_PCIE_RST, 36, 1),\n\tFUNC(\"pcie refclk\", MT7620_GPIO_MODE_PCIE_REF, 36, 1)\n};\nstatic struct mtmips_pmx_func nd_sd_grp[] = {\n\tFUNC(\"nand\", MT7620_GPIO_MODE_NAND, 45, 15),\n\tFUNC(\"sd\", MT7620_GPIO_MODE_SD, 47, 13)\n};\n\nstatic struct mtmips_pmx_group mt7620a_pinmux_data[] = {\n\tGRP(\"i2c\", i2c_grp, 1, MT7620_GPIO_MODE_I2C),\n\tGRP(\"uartf\", uartf_grp, MT7620_GPIO_MODE_UART0_MASK,\n\t\tMT7620_GPIO_MODE_UART0_SHIFT),\n\tGRP(\"spi\", spi_grp, 1, MT7620_GPIO_MODE_SPI),\n\tGRP(\"uartlite\", uartlite_grp, 1, MT7620_GPIO_MODE_UART1),\n\tGRP_G(\"wdt\", wdt_grp, MT7620_GPIO_MODE_WDT_MASK,\n\t\tMT7620_GPIO_MODE_WDT_GPIO, MT7620_GPIO_MODE_WDT_SHIFT),\n\tGRP_G(\"mdio\", mdio_grp, MT7620_GPIO_MODE_MDIO_MASK,\n\t\tMT7620_GPIO_MODE_MDIO_GPIO, MT7620_GPIO_MODE_MDIO_SHIFT),\n\tGRP(\"rgmii1\", rgmii1_grp, 1, MT7620_GPIO_MODE_RGMII1),\n\tGRP(\"spi refclk\", refclk_grp, 1, MT7620_GPIO_MODE_SPI_REF_CLK),\n\tGRP_G(\"pcie\", pcie_rst_grp, MT7620_GPIO_MODE_PCIE_MASK,\n\t\tMT7620_GPIO_MODE_PCIE_GPIO, MT7620_GPIO_MODE_PCIE_SHIFT),\n\tGRP_G(\"nd_sd\", nd_sd_grp, MT7620_GPIO_MODE_ND_SD_MASK,\n\t\tMT7620_GPIO_MODE_ND_SD_GPIO, MT7620_GPIO_MODE_ND_SD_SHIFT),\n\tGRP(\"rgmii2\", rgmii2_grp, 1, MT7620_GPIO_MODE_RGMII2),\n\tGRP(\"wled\", wled_grp, 1, MT7620_GPIO_MODE_WLED),\n\tGRP(\"ephy\", ephy_grp, 1, MT7620_GPIO_MODE_EPHY),\n\tGRP(\"pa\", pa_grp, 1, MT7620_GPIO_MODE_PA),\n\t{ 0 }\n};\n\nstatic int mt7620_pinctrl_probe(struct platform_device *pdev)\n{\n\treturn mtmips_pinctrl_init(pdev, mt7620a_pinmux_data);\n}\n\nstatic const struct of_device_id mt7620_pinctrl_match[] = {\n\t{ .compatible = \"ralink,mt7620-pinctrl\" },\n\t{ .compatible = \"ralink,rt2880-pinmux\" },\n\t{}\n};\nMODULE_DEVICE_TABLE(of, mt7620_pinctrl_match);\n\nstatic struct platform_driver mt7620_pinctrl_driver = {\n\t.probe = mt7620_pinctrl_probe,\n\t.driver = {\n\t\t.name = \"mt7620-pinctrl\",\n\t\t.of_match_table = mt7620_pinctrl_match,\n\t},\n};\n\nstatic int __init mt7620_pinctrl_init(void)\n{\n\treturn platform_driver_register(&mt7620_pinctrl_driver);\n}\ncore_initcall_sync(mt7620_pinctrl_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}