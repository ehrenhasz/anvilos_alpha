{
  "module_name": "pinctrl-mtk-common.h",
  "hash_id": "65f099706573389f8862230f3b5a843eb860edef299893c6085b2cad52429ce3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mediatek/pinctrl-mtk-common.h",
  "human_readable_source": " \n \n\n#ifndef __PINCTRL_MTK_COMMON_H\n#define __PINCTRL_MTK_COMMON_H\n\n#include <linux/pinctrl/pinctrl.h>\n#include <linux/regmap.h>\n#include <linux/pinctrl/pinconf-generic.h>\n\n#include \"mtk-eint.h\"\n\n#define NO_EINT_SUPPORT    255\n#define MT_EDGE_SENSITIVE           0\n#define MT_LEVEL_SENSITIVE          1\n#define EINT_DBNC_SET_DBNC_BITS     4\n#define EINT_DBNC_RST_BIT           (0x1 << 1)\n#define EINT_DBNC_SET_EN            (0x1 << 0)\n\n#define MTK_PINCTRL_NOT_SUPPORT\t(0xffff)\n\nstruct mtk_desc_function {\n\tconst char *name;\n\tunsigned char muxval;\n};\n\nstruct mtk_desc_eint {\n\tunsigned char eintmux;\n\tunsigned char eintnum;\n};\n\nstruct mtk_desc_pin {\n\tstruct pinctrl_pin_desc\tpin;\n\tconst struct mtk_desc_eint eint;\n\tconst struct mtk_desc_function\t*functions;\n};\n\n#define MTK_PIN(_pin, _pad, _chip, _eint, ...)\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.pin = _pin,\t\t\t\t\t\\\n\t\t.eint = _eint,\t\t\t\t\t\\\n\t\t.functions = (struct mtk_desc_function[]){\t\\\n\t\t\t__VA_ARGS__, { } },\t\t\t\\\n\t}\n\n#define MTK_EINT_FUNCTION(_eintmux, _eintnum)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.eintmux = _eintmux,\t\t\t\t\t\\\n\t\t.eintnum = _eintnum,\t\t\t\t\t\\\n\t}\n\n#define MTK_FUNCTION(_val, _name)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.muxval = _val,\t\t\t\t\t\\\n\t\t.name = _name,\t\t\t\t\t\\\n\t}\n\n#define SET_ADDR(x, y)  (x + (y->devdata->port_align))\n#define CLR_ADDR(x, y)  (x + (y->devdata->port_align << 1))\n\nstruct mtk_pinctrl_group {\n\tconst char\t*name;\n\tunsigned long\tconfig;\n\tunsigned\tpin;\n};\n\n \nstruct mtk_drv_group_desc {\n\tunsigned char min_drv;\n\tunsigned char max_drv;\n\tunsigned char low_bit;\n\tunsigned char high_bit;\n\tunsigned char step;\n};\n\n#define MTK_DRV_GRP(_min, _max, _low, _high, _step)\t\\\n\t{\t\\\n\t\t.min_drv = _min,\t\\\n\t\t.max_drv = _max,\t\\\n\t\t.low_bit = _low,\t\\\n\t\t.high_bit = _high,\t\\\n\t\t.step = _step,\t\t\\\n\t}\n\n \nstruct mtk_pin_drv_grp {\n\tunsigned short pin;\n\tunsigned short offset;\n\tunsigned char bit;\n\tunsigned char grp;\n};\n\n#define MTK_PIN_DRV_GRP(_pin, _offset, _bit, _grp)\t\\\n\t{\t\\\n\t\t.pin = _pin,\t\\\n\t\t.offset = _offset,\t\\\n\t\t.bit = _bit,\t\\\n\t\t.grp = _grp,\t\\\n\t}\n\n \nstruct mtk_pin_spec_pupd_set_samereg {\n\tunsigned short pin;\n\tunsigned short offset;\n\tunsigned char pupd_bit;\n\tunsigned char r1_bit;\n\tunsigned char r0_bit;\n};\n\n#define MTK_PIN_PUPD_SPEC_SR(_pin, _offset, _pupd, _r1, _r0)\t\\\n\t{\t\\\n\t\t.pin = _pin,\t\\\n\t\t.offset = _offset,\t\\\n\t\t.pupd_bit = _pupd,\t\\\n\t\t.r1_bit = _r1,\t\t\\\n\t\t.r0_bit = _r0,\t\t\\\n\t}\n\n \nstruct mtk_pin_ies_smt_set {\n\tunsigned short start;\n\tunsigned short end;\n\tunsigned short offset;\n\tunsigned char bit;\n};\n\n#define MTK_PIN_IES_SMT_SPEC(_start, _end, _offset, _bit)\t\\\n\t{\t\\\n\t\t.start = _start,\t\\\n\t\t.end = _end,\t\\\n\t\t.bit = _bit,\t\\\n\t\t.offset = _offset,\t\\\n\t}\n\nstruct mtk_eint_offsets {\n\tconst char *name;\n\tunsigned int  stat;\n\tunsigned int  ack;\n\tunsigned int  mask;\n\tunsigned int  mask_set;\n\tunsigned int  mask_clr;\n\tunsigned int  sens;\n\tunsigned int  sens_set;\n\tunsigned int  sens_clr;\n\tunsigned int  soft;\n\tunsigned int  soft_set;\n\tunsigned int  soft_clr;\n\tunsigned int  pol;\n\tunsigned int  pol_set;\n\tunsigned int  pol_clr;\n\tunsigned int  dom_en;\n\tunsigned int  dbnc_ctrl;\n\tunsigned int  dbnc_set;\n\tunsigned int  dbnc_clr;\n\tu8  port_mask;\n\tu8  ports;\n};\n\n \nstruct mtk_pinctrl_devdata {\n\tconst struct mtk_desc_pin\t*pins;\n\tunsigned int\t\t\t\tnpins;\n\tconst struct mtk_drv_group_desc\t*grp_desc;\n\tunsigned int\tn_grp_cls;\n\tconst struct mtk_pin_drv_grp\t*pin_drv_grp;\n\tunsigned int\tn_pin_drv_grps;\n\tconst struct mtk_pin_ies_smt_set *spec_ies;\n\tunsigned int n_spec_ies;\n\tconst struct mtk_pin_spec_pupd_set_samereg *spec_pupd;\n\tunsigned int n_spec_pupd;\n\tconst struct mtk_pin_ies_smt_set *spec_smt;\n\tunsigned int n_spec_smt;\n\tint (*spec_pull_set)(struct regmap *regmap,\n\t\t\tconst struct mtk_pinctrl_devdata *devdata,\n\t\t\tunsigned int pin, bool isup, unsigned int r1r0);\n\tint (*spec_ies_smt_set)(struct regmap *reg,\n\t\t\tconst struct mtk_pinctrl_devdata *devdata,\n\t\t\tunsigned int pin, int value, enum pin_config_param arg);\n\tvoid (*spec_pinmux_set)(struct regmap *reg, unsigned int pin,\n\t\t\tunsigned int mode);\n\tvoid (*spec_dir_set)(unsigned int *reg_addr, unsigned int pin);\n\tint (*mt8365_set_clr_mode)(struct regmap *regmap,\n\t\t\tunsigned int bit, unsigned int reg_pullen, unsigned int reg_pullsel,\n\t\t\tbool enable, bool isup);\n\tunsigned int dir_offset;\n\tunsigned int ies_offset;\n\tunsigned int smt_offset;\n\tunsigned int pullen_offset;\n\tunsigned int pullsel_offset;\n\tunsigned int drv_offset;\n\tunsigned int dout_offset;\n\tunsigned int din_offset;\n\tunsigned int pinmux_offset;\n\tunsigned short type1_start;\n\tunsigned short type1_end;\n\tunsigned char  port_shf;\n\tunsigned char  port_mask;\n\tunsigned char  port_align;\n\tstruct mtk_eint_hw eint_hw;\n\tstruct mtk_eint_regs *eint_regs;\n\tunsigned int mode_mask;\n\tunsigned int mode_per_reg;\n\tunsigned int mode_shf;\n};\n\nstruct mtk_pinctrl {\n\tstruct regmap\t*regmap1;\n\tstruct regmap\t*regmap2;\n\tstruct pinctrl_desc pctl_desc;\n\tstruct device           *dev;\n\tstruct gpio_chip\t*chip;\n\tstruct mtk_pinctrl_group\t*groups;\n\tunsigned\t\t\tngroups;\n\tconst char          **grp_names;\n\tstruct pinctrl_dev      *pctl_dev;\n\tconst struct mtk_pinctrl_devdata  *devdata;\n\tstruct mtk_eint *eint;\n};\n\nint mtk_pctrl_init(struct platform_device *pdev,\n\t\tconst struct mtk_pinctrl_devdata *data,\n\t\tstruct regmap *regmap);\n\nint mtk_pctrl_common_probe(struct platform_device *pdev);\n\nint mtk_pctrl_spec_pull_set_samereg(struct regmap *regmap,\n\t\tconst struct mtk_pinctrl_devdata *devdata,\n\t\tunsigned int pin, bool isup, unsigned int r1r0);\n\nint mtk_pconf_spec_set_ies_smt_range(struct regmap *regmap,\n\t\tconst struct mtk_pinctrl_devdata *devdata,\n\t\tunsigned int pin, int value, enum pin_config_param arg);\n\nextern const struct dev_pm_ops mtk_eint_pm_ops;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}