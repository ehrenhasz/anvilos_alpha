{
  "module_name": "pinctrl-mtk-common-v2.h",
  "hash_id": "95f3230100fe2c6642f3052267238a8ae72f68986a0b072b78d5276f3569dc56",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mediatek/pinctrl-mtk-common-v2.h",
  "human_readable_source": " \n \n\n#ifndef __PINCTRL_MTK_COMMON_V2_H\n#define __PINCTRL_MTK_COMMON_V2_H\n\n#include <linux/gpio/driver.h>\n\n#define MTK_INPUT      0\n#define MTK_OUTPUT     1\n#define MTK_DISABLE    0\n#define MTK_ENABLE     1\n#define MTK_PULLDOWN   0\n#define MTK_PULLUP     1\n#define MTK_PULL_PU_PD_TYPE\t\tBIT(0)\n#define MTK_PULL_PULLSEL_TYPE\t\tBIT(1)\n#define MTK_PULL_PUPD_R1R0_TYPE\t\tBIT(2)\n \n#define MTK_PULL_RSEL_TYPE\t\tBIT(3)\n \n#define MTK_PULL_PU_PD_RSEL_TYPE\t(MTK_PULL_PU_PD_TYPE \\\n\t\t\t\t\t| MTK_PULL_RSEL_TYPE)\n#define MTK_PULL_TYPE_MASK\t(MTK_PULL_PU_PD_TYPE |\\\n\t\t\t\t MTK_PULL_PULLSEL_TYPE |\\\n\t\t\t\t MTK_PULL_PUPD_R1R0_TYPE |\\\n\t\t\t\t MTK_PULL_RSEL_TYPE)\n\n#define EINT_NA\tU16_MAX\n#define NO_EINT_SUPPORT\tEINT_NA\n\n#define PIN_FIELD_CALC(_s_pin, _e_pin, _i_base, _s_addr, _x_addrs,      \\\n\t\t       _s_bit, _x_bits, _sz_reg, _fixed) {\t\t\\\n\t\t.s_pin = _s_pin,\t\t\t\t\t\\\n\t\t.e_pin = _e_pin,\t\t\t\t\t\\\n\t\t.i_base = _i_base,\t\t\t\t\t\\\n\t\t.s_addr = _s_addr,\t\t\t\t\t\\\n\t\t.x_addrs = _x_addrs,\t\t\t\t\t\\\n\t\t.s_bit = _s_bit,\t\t\t\t\t\\\n\t\t.x_bits = _x_bits,\t\t\t\t\t\\\n\t\t.sz_reg = _sz_reg,\t\t\t\t\t\\\n\t\t.fixed = _fixed,\t\t\t\t\t\\\n\t}\n\n#define PIN_FIELD(_s_pin, _e_pin, _s_addr, _x_addrs, _s_bit, _x_bits)\t\\\n\tPIN_FIELD_CALC(_s_pin, _e_pin, 0, _s_addr, _x_addrs, _s_bit,\t\\\n\t\t       _x_bits, 32, 0)\n\n#define PINS_FIELD(_s_pin, _e_pin, _s_addr, _x_addrs, _s_bit, _x_bits)\t\\\n\tPIN_FIELD_CALC(_s_pin, _e_pin, 0, _s_addr, _x_addrs, _s_bit,\t\\\n\t\t       _x_bits, 32, 1)\n\n#define PIN_RSEL(_s_pin, _e_pin, _rsel_index, _up_resl, _down_rsel) {\t\\\n\t\t.s_pin = _s_pin,\t\t\t\t\t\\\n\t\t.e_pin = _e_pin,\t\t\t\t\t\\\n\t\t.rsel_index = _rsel_index,\t\t\t\t\\\n\t\t.up_rsel = _up_resl,\t\t\t\t\t\\\n\t\t.down_rsel = _down_rsel,\t\t\t\t\\\n\t}\n\n \nenum {\n\tPINCTRL_PIN_REG_MODE,\n\tPINCTRL_PIN_REG_DIR,\n\tPINCTRL_PIN_REG_DI,\n\tPINCTRL_PIN_REG_DO,\n\tPINCTRL_PIN_REG_SR,\n\tPINCTRL_PIN_REG_SMT,\n\tPINCTRL_PIN_REG_PD,\n\tPINCTRL_PIN_REG_PU,\n\tPINCTRL_PIN_REG_E4,\n\tPINCTRL_PIN_REG_E8,\n\tPINCTRL_PIN_REG_TDSEL,\n\tPINCTRL_PIN_REG_RDSEL,\n\tPINCTRL_PIN_REG_DRV,\n\tPINCTRL_PIN_REG_PUPD,\n\tPINCTRL_PIN_REG_R0,\n\tPINCTRL_PIN_REG_R1,\n\tPINCTRL_PIN_REG_IES,\n\tPINCTRL_PIN_REG_PULLEN,\n\tPINCTRL_PIN_REG_PULLSEL,\n\tPINCTRL_PIN_REG_DRV_EN,\n\tPINCTRL_PIN_REG_DRV_E0,\n\tPINCTRL_PIN_REG_DRV_E1,\n\tPINCTRL_PIN_REG_DRV_ADV,\n\tPINCTRL_PIN_REG_RSEL,\n\tPINCTRL_PIN_REG_MAX,\n};\n\n \nenum {\n\tDRV_FIXED,\n\tDRV_GRP0,\n\tDRV_GRP1,\n\tDRV_GRP2,\n\tDRV_GRP3,\n\tDRV_GRP4,\n\tDRV_GRP_MAX,\n};\n\nstatic const char * const mtk_default_register_base_names[] __maybe_unused = {\n\t\"base\",\n};\n\n \nstruct mtk_pin_field {\n\tu8  index;\n\tu32 offset;\n\tu32 mask;\n\tu8  bitpos;\n\tu8  next;\n};\n\n \nstruct mtk_pin_field_calc {\n\tu16 s_pin;\n\tu16 e_pin;\n\tu8  i_base;\n\tu32 s_addr;\n\tu8  x_addrs;\n\tu8  s_bit;\n\tu8  x_bits;\n\tu8  sz_reg;\n\tu8  fixed;\n};\n\n \nstruct mtk_pin_rsel {\n\tu16 s_pin;\n\tu16 e_pin;\n\tu16 rsel_index;\n\tu32 up_rsel;\n\tu32 down_rsel;\n};\n\n \nstruct mtk_pin_reg_calc {\n\tconst struct mtk_pin_field_calc *range;\n\tunsigned int nranges;\n};\n\n \nstruct mtk_func_desc {\n\tconst char *name;\n\tu8 muxval;\n};\n\n \nstruct mtk_eint_desc {\n\tu16 eint_m;\n\tu16 eint_n;\n};\n\n \nstruct mtk_pin_desc {\n\tunsigned int number;\n\tconst char *name;\n\tstruct mtk_eint_desc eint;\n\tu8 drv_n;\n\tstruct mtk_func_desc *funcs;\n};\n\nstruct mtk_pinctrl_group {\n\tconst char\t*name;\n\tunsigned long\tconfig;\n\tunsigned\tpin;\n};\n\nstruct mtk_pinctrl;\n\n \nstruct mtk_pin_soc {\n\tconst struct mtk_pin_reg_calc\t*reg_cal;\n\tconst struct mtk_pin_desc\t*pins;\n\tunsigned int\t\t\tnpins;\n\tconst struct group_desc\t\t*grps;\n\tunsigned int\t\t\tngrps;\n\tconst struct function_desc\t*funcs;\n\tunsigned int\t\t\tnfuncs;\n\tconst struct mtk_eint_regs\t*eint_regs;\n\tconst struct mtk_eint_hw\t*eint_hw;\n\n\t \n\tu8\t\t\t\tgpio_m;\n\tbool\t\t\t\ties_present;\n\tconst char * const\t\t*base_names;\n\tunsigned int\t\t\tnbase_names;\n\tconst unsigned int\t\t*pull_type;\n\tconst struct mtk_pin_rsel\t*pin_rsel;\n\tunsigned int\t\t\tnpin_rsel;\n\n\t \n\tint (*bias_disable_set)(struct mtk_pinctrl *hw,\n\t\t\t\tconst struct mtk_pin_desc *desc);\n\tint (*bias_disable_get)(struct mtk_pinctrl *hw,\n\t\t\t\tconst struct mtk_pin_desc *desc, int *res);\n\tint (*bias_set)(struct mtk_pinctrl *hw,\n\t\t\tconst struct mtk_pin_desc *desc, bool pullup);\n\tint (*bias_get)(struct mtk_pinctrl *hw,\n\t\t\tconst struct mtk_pin_desc *desc, bool pullup, int *res);\n\n\tint (*bias_set_combo)(struct mtk_pinctrl *hw,\n\t\t\tconst struct mtk_pin_desc *desc, u32 pullup, u32 arg);\n\tint (*bias_get_combo)(struct mtk_pinctrl *hw,\n\t\t\tconst struct mtk_pin_desc *desc, u32 *pullup, u32 *arg);\n\n\tint (*drive_set)(struct mtk_pinctrl *hw,\n\t\t\t const struct mtk_pin_desc *desc, u32 arg);\n\tint (*drive_get)(struct mtk_pinctrl *hw,\n\t\t\t const struct mtk_pin_desc *desc, int *val);\n\n\tint (*adv_pull_set)(struct mtk_pinctrl *hw,\n\t\t\t    const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t    u32 arg);\n\tint (*adv_pull_get)(struct mtk_pinctrl *hw,\n\t\t\t    const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t    u32 *val);\n\tint (*adv_drive_set)(struct mtk_pinctrl *hw,\n\t\t\t     const struct mtk_pin_desc *desc, u32 arg);\n\tint (*adv_drive_get)(struct mtk_pinctrl *hw,\n\t\t\t     const struct mtk_pin_desc *desc, u32 *val);\n\n\t \n\tvoid\t\t\t\t*driver_data;\n};\n\nstruct mtk_pinctrl {\n\tstruct pinctrl_dev\t\t*pctrl;\n\tvoid __iomem\t\t\t**base;\n\tu8\t\t\t\tnbase;\n\tstruct device\t\t\t*dev;\n\tstruct gpio_chip\t\tchip;\n\tconst struct mtk_pin_soc        *soc;\n\tstruct mtk_eint\t\t\t*eint;\n\tstruct mtk_pinctrl_group\t*groups;\n\tconst char          **grp_names;\n\t \n\tspinlock_t lock;\n\t \n\tbool rsel_si_unit;\n};\n\nvoid mtk_rmw(struct mtk_pinctrl *pctl, u8 i, u32 reg, u32 mask, u32 set);\n\nint mtk_hw_set_value(struct mtk_pinctrl *hw, const struct mtk_pin_desc *desc,\n\t\t     int field, int value);\nint mtk_hw_get_value(struct mtk_pinctrl *hw, const struct mtk_pin_desc *desc,\n\t\t     int field, int *value);\n\nint mtk_build_eint(struct mtk_pinctrl *hw, struct platform_device *pdev);\n\nint mtk_pinconf_bias_disable_set(struct mtk_pinctrl *hw,\n\t\t\t\t const struct mtk_pin_desc *desc);\nint mtk_pinconf_bias_disable_get(struct mtk_pinctrl *hw,\n\t\t\t\t const struct mtk_pin_desc *desc, int *res);\nint mtk_pinconf_bias_set(struct mtk_pinctrl *hw,\n\t\t\t const struct mtk_pin_desc *desc, bool pullup);\nint mtk_pinconf_bias_get(struct mtk_pinctrl *hw,\n\t\t\t const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t int *res);\n\nint mtk_pinconf_bias_disable_set_rev1(struct mtk_pinctrl *hw,\n\t\t\t\t      const struct mtk_pin_desc *desc);\nint mtk_pinconf_bias_disable_get_rev1(struct mtk_pinctrl *hw,\n\t\t\t\t      const struct mtk_pin_desc *desc,\n\t\t\t\t      int *res);\nint mtk_pinconf_bias_set_rev1(struct mtk_pinctrl *hw,\n\t\t\t      const struct mtk_pin_desc *desc, bool pullup);\nint mtk_pinconf_bias_get_rev1(struct mtk_pinctrl *hw,\n\t\t\t      const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t      int *res);\nint mtk_pinconf_bias_set_combo(struct mtk_pinctrl *hw,\n\t\t\t\tconst struct mtk_pin_desc *desc,\n\t\t\t\tu32 pullup, u32 enable);\nint mtk_pinconf_bias_get_combo(struct mtk_pinctrl *hw,\n\t\t\t      const struct mtk_pin_desc *desc,\n\t\t\t      u32 *pullup, u32 *enable);\n\nint mtk_pinconf_drive_set(struct mtk_pinctrl *hw,\n\t\t\t  const struct mtk_pin_desc *desc, u32 arg);\nint mtk_pinconf_drive_get(struct mtk_pinctrl *hw,\n\t\t\t  const struct mtk_pin_desc *desc, int *val);\n\nint mtk_pinconf_drive_set_rev1(struct mtk_pinctrl *hw,\n\t\t\t       const struct mtk_pin_desc *desc, u32 arg);\nint mtk_pinconf_drive_get_rev1(struct mtk_pinctrl *hw,\n\t\t\t       const struct mtk_pin_desc *desc, int *val);\n\nint mtk_pinconf_drive_set_raw(struct mtk_pinctrl *hw,\n\t\t\t       const struct mtk_pin_desc *desc, u32 arg);\nint mtk_pinconf_drive_get_raw(struct mtk_pinctrl *hw,\n\t\t\t       const struct mtk_pin_desc *desc, int *val);\n\nint mtk_pinconf_adv_pull_set(struct mtk_pinctrl *hw,\n\t\t\t     const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t     u32 arg);\nint mtk_pinconf_adv_pull_get(struct mtk_pinctrl *hw,\n\t\t\t     const struct mtk_pin_desc *desc, bool pullup,\n\t\t\t     u32 *val);\nint mtk_pinconf_adv_drive_set(struct mtk_pinctrl *hw,\n\t\t\t      const struct mtk_pin_desc *desc, u32 arg);\nint mtk_pinconf_adv_drive_get(struct mtk_pinctrl *hw,\n\t\t\t      const struct mtk_pin_desc *desc, u32 *val);\nint mtk_pinconf_adv_drive_set_raw(struct mtk_pinctrl *hw,\n\t\t\t\t  const struct mtk_pin_desc *desc, u32 arg);\nint mtk_pinconf_adv_drive_get_raw(struct mtk_pinctrl *hw,\n\t\t\t\t  const struct mtk_pin_desc *desc, u32 *val);\n\nbool mtk_is_virt_gpio(struct mtk_pinctrl *hw, unsigned int gpio_n);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}