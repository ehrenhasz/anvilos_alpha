{
  "module_name": "pinctrl-rt305x.c",
  "hash_id": "98fa9cce6cf9a916227b8e4a7caaf7691c794d409247c93bfe0500df385e0049",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/mediatek/pinctrl-rt305x.c",
  "human_readable_source": "\n\n#include <asm/mach-ralink/ralink_regs.h>\n#include <asm/mach-ralink/rt305x.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/of.h>\n#include \"pinctrl-mtmips.h\"\n\n#define RT305X_GPIO_MODE_UART0_SHIFT\t2\n#define RT305X_GPIO_MODE_UART0_MASK\t0x7\n#define RT305X_GPIO_MODE_UART0(x)\t((x) << RT305X_GPIO_MODE_UART0_SHIFT)\n#define RT305X_GPIO_MODE_UARTF\t\t0\n#define RT305X_GPIO_MODE_PCM_UARTF\t1\n#define RT305X_GPIO_MODE_PCM_I2S\t2\n#define RT305X_GPIO_MODE_I2S_UARTF\t3\n#define RT305X_GPIO_MODE_PCM_GPIO\t4\n#define RT305X_GPIO_MODE_GPIO_UARTF\t5\n#define RT305X_GPIO_MODE_GPIO_I2S\t6\n#define RT305X_GPIO_MODE_GPIO\t\t7\n\n#define RT305X_GPIO_MODE_I2C\t\t0\n#define RT305X_GPIO_MODE_SPI\t\t1\n#define RT305X_GPIO_MODE_UART1\t\t5\n#define RT305X_GPIO_MODE_JTAG\t\t6\n#define RT305X_GPIO_MODE_MDIO\t\t7\n#define RT305X_GPIO_MODE_SDRAM\t\t8\n#define RT305X_GPIO_MODE_RGMII\t\t9\n#define RT5350_GPIO_MODE_PHY_LED\t14\n#define RT5350_GPIO_MODE_SPI_CS1\t21\n#define RT3352_GPIO_MODE_LNA\t\t18\n#define RT3352_GPIO_MODE_PA\t\t20\n\nstatic struct mtmips_pmx_func i2c_grp[] =  { FUNC(\"i2c\", 0, 1, 2) };\nstatic struct mtmips_pmx_func spi_grp[] = { FUNC(\"spi\", 0, 3, 4) };\nstatic struct mtmips_pmx_func uartf_grp[] = {\n\tFUNC(\"uartf\", RT305X_GPIO_MODE_UARTF, 7, 8),\n\tFUNC(\"pcm uartf\", RT305X_GPIO_MODE_PCM_UARTF, 7, 8),\n\tFUNC(\"pcm i2s\", RT305X_GPIO_MODE_PCM_I2S, 7, 8),\n\tFUNC(\"i2s uartf\", RT305X_GPIO_MODE_I2S_UARTF, 7, 8),\n\tFUNC(\"pcm gpio\", RT305X_GPIO_MODE_PCM_GPIO, 11, 4),\n\tFUNC(\"gpio uartf\", RT305X_GPIO_MODE_GPIO_UARTF, 7, 4),\n\tFUNC(\"gpio i2s\", RT305X_GPIO_MODE_GPIO_I2S, 7, 4),\n};\nstatic struct mtmips_pmx_func uartlite_grp[] = { FUNC(\"uartlite\", 0, 15, 2) };\nstatic struct mtmips_pmx_func jtag_grp[] = { FUNC(\"jtag\", 0, 17, 5) };\nstatic struct mtmips_pmx_func mdio_grp[] = { FUNC(\"mdio\", 0, 22, 2) };\nstatic struct mtmips_pmx_func rt5350_led_grp[] = { FUNC(\"led\", 0, 22, 5) };\nstatic struct mtmips_pmx_func rt5350_cs1_grp[] = {\n\tFUNC(\"spi_cs1\", 0, 27, 1),\n\tFUNC(\"wdg_cs1\", 1, 27, 1),\n};\nstatic struct mtmips_pmx_func sdram_grp[] = { FUNC(\"sdram\", 0, 24, 16) };\nstatic struct mtmips_pmx_func rt3352_rgmii_grp[] = {\n\tFUNC(\"rgmii\", 0, 24, 12)\n};\nstatic struct mtmips_pmx_func rgmii_grp[] = { FUNC(\"rgmii\", 0, 40, 12) };\nstatic struct mtmips_pmx_func rt3352_lna_grp[] = { FUNC(\"lna\", 0, 36, 2) };\nstatic struct mtmips_pmx_func rt3352_pa_grp[] = { FUNC(\"pa\", 0, 38, 2) };\nstatic struct mtmips_pmx_func rt3352_led_grp[] = { FUNC(\"led\", 0, 40, 5) };\nstatic struct mtmips_pmx_func rt3352_cs1_grp[] = {\n\tFUNC(\"spi_cs1\", 0, 45, 1),\n\tFUNC(\"wdg_cs1\", 1, 45, 1),\n};\n\nstatic struct mtmips_pmx_group rt3050_pinmux_data[] = {\n\tGRP(\"i2c\", i2c_grp, 1, RT305X_GPIO_MODE_I2C),\n\tGRP(\"spi\", spi_grp, 1, RT305X_GPIO_MODE_SPI),\n\tGRP(\"uartf\", uartf_grp, RT305X_GPIO_MODE_UART0_MASK,\n\t\tRT305X_GPIO_MODE_UART0_SHIFT),\n\tGRP(\"uartlite\", uartlite_grp, 1, RT305X_GPIO_MODE_UART1),\n\tGRP(\"jtag\", jtag_grp, 1, RT305X_GPIO_MODE_JTAG),\n\tGRP(\"mdio\", mdio_grp, 1, RT305X_GPIO_MODE_MDIO),\n\tGRP(\"rgmii\", rgmii_grp, 1, RT305X_GPIO_MODE_RGMII),\n\tGRP(\"sdram\", sdram_grp, 1, RT305X_GPIO_MODE_SDRAM),\n\t{ 0 }\n};\n\nstatic struct mtmips_pmx_group rt3352_pinmux_data[] = {\n\tGRP(\"i2c\", i2c_grp, 1, RT305X_GPIO_MODE_I2C),\n\tGRP(\"spi\", spi_grp, 1, RT305X_GPIO_MODE_SPI),\n\tGRP(\"uartf\", uartf_grp, RT305X_GPIO_MODE_UART0_MASK,\n\t\tRT305X_GPIO_MODE_UART0_SHIFT),\n\tGRP(\"uartlite\", uartlite_grp, 1, RT305X_GPIO_MODE_UART1),\n\tGRP(\"jtag\", jtag_grp, 1, RT305X_GPIO_MODE_JTAG),\n\tGRP(\"mdio\", mdio_grp, 1, RT305X_GPIO_MODE_MDIO),\n\tGRP(\"rgmii\", rt3352_rgmii_grp, 1, RT305X_GPIO_MODE_RGMII),\n\tGRP(\"lna\", rt3352_lna_grp, 1, RT3352_GPIO_MODE_LNA),\n\tGRP(\"pa\", rt3352_pa_grp, 1, RT3352_GPIO_MODE_PA),\n\tGRP(\"led\", rt3352_led_grp, 1, RT5350_GPIO_MODE_PHY_LED),\n\tGRP(\"spi_cs1\", rt3352_cs1_grp, 2, RT5350_GPIO_MODE_SPI_CS1),\n\t{ 0 }\n};\n\nstatic struct mtmips_pmx_group rt5350_pinmux_data[] = {\n\tGRP(\"i2c\", i2c_grp, 1, RT305X_GPIO_MODE_I2C),\n\tGRP(\"spi\", spi_grp, 1, RT305X_GPIO_MODE_SPI),\n\tGRP(\"uartf\", uartf_grp, RT305X_GPIO_MODE_UART0_MASK,\n\t\tRT305X_GPIO_MODE_UART0_SHIFT),\n\tGRP(\"uartlite\", uartlite_grp, 1, RT305X_GPIO_MODE_UART1),\n\tGRP(\"jtag\", jtag_grp, 1, RT305X_GPIO_MODE_JTAG),\n\tGRP(\"led\", rt5350_led_grp, 1, RT5350_GPIO_MODE_PHY_LED),\n\tGRP(\"spi_cs1\", rt5350_cs1_grp, 2, RT5350_GPIO_MODE_SPI_CS1),\n\t{ 0 }\n};\n\nstatic int rt305x_pinctrl_probe(struct platform_device *pdev)\n{\n\tif (soc_is_rt5350())\n\t\treturn mtmips_pinctrl_init(pdev, rt5350_pinmux_data);\n\telse if (soc_is_rt305x() || soc_is_rt3350())\n\t\treturn mtmips_pinctrl_init(pdev, rt3050_pinmux_data);\n\telse if (soc_is_rt3352())\n\t\treturn mtmips_pinctrl_init(pdev, rt3352_pinmux_data);\n\telse\n\t\treturn -EINVAL;\n}\n\nstatic const struct of_device_id rt305x_pinctrl_match[] = {\n\t{ .compatible = \"ralink,rt305x-pinctrl\" },\n\t{ .compatible = \"ralink,rt3352-pinctrl\" },\n\t{ .compatible = \"ralink,rt5350-pinctrl\" },\n\t{ .compatible = \"ralink,rt2880-pinmux\" },\n\t{}\n};\nMODULE_DEVICE_TABLE(of, rt305x_pinctrl_match);\n\nstatic struct platform_driver rt305x_pinctrl_driver = {\n\t.probe = rt305x_pinctrl_probe,\n\t.driver = {\n\t\t.name = \"rt305x-pinctrl\",\n\t\t.of_match_table = rt305x_pinctrl_match,\n\t},\n};\n\nstatic int __init rt305x_pinctrl_init(void)\n{\n\treturn platform_driver_register(&rt305x_pinctrl_driver);\n}\ncore_initcall_sync(rt305x_pinctrl_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}