{
  "module_name": "pinctrl-imx7ulp.c",
  "hash_id": "2bc4564cdeec1230f0329ad7087785ad9775c682afa97e90e7b5fd461ff3115e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/freescale/pinctrl-imx7ulp.c",
  "human_readable_source": "\n\n\n\n\n\n\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/mod_devicetable.h>\n#include <linux/platform_device.h>\n#include <linux/pinctrl/pinctrl.h>\n\n#include \"pinctrl-imx.h\"\n\nenum imx7ulp_pads {\n\tIMX7ULP_PAD_PTC0 = 0,\n\tIMX7ULP_PAD_PTC1,\n\tIMX7ULP_PAD_PTC2,\n\tIMX7ULP_PAD_PTC3,\n\tIMX7ULP_PAD_PTC4,\n\tIMX7ULP_PAD_PTC5,\n\tIMX7ULP_PAD_PTC6,\n\tIMX7ULP_PAD_PTC7,\n\tIMX7ULP_PAD_PTC8,\n\tIMX7ULP_PAD_PTC9,\n\tIMX7ULP_PAD_PTC10,\n\tIMX7ULP_PAD_PTC11,\n\tIMX7ULP_PAD_PTC12,\n\tIMX7ULP_PAD_PTC13,\n\tIMX7ULP_PAD_PTC14,\n\tIMX7ULP_PAD_PTC15,\n\tIMX7ULP_PAD_PTC16,\n\tIMX7ULP_PAD_PTC17,\n\tIMX7ULP_PAD_PTC18,\n\tIMX7ULP_PAD_PTC19,\n\tIMX7ULP_PAD_RESERVE0,\n\tIMX7ULP_PAD_RESERVE1,\n\tIMX7ULP_PAD_RESERVE2,\n\tIMX7ULP_PAD_RESERVE3,\n\tIMX7ULP_PAD_RESERVE4,\n\tIMX7ULP_PAD_RESERVE5,\n\tIMX7ULP_PAD_RESERVE6,\n\tIMX7ULP_PAD_RESERVE7,\n\tIMX7ULP_PAD_RESERVE8,\n\tIMX7ULP_PAD_RESERVE9,\n\tIMX7ULP_PAD_RESERVE10,\n\tIMX7ULP_PAD_RESERVE11,\n\tIMX7ULP_PAD_PTD0,\n\tIMX7ULP_PAD_PTD1,\n\tIMX7ULP_PAD_PTD2,\n\tIMX7ULP_PAD_PTD3,\n\tIMX7ULP_PAD_PTD4,\n\tIMX7ULP_PAD_PTD5,\n\tIMX7ULP_PAD_PTD6,\n\tIMX7ULP_PAD_PTD7,\n\tIMX7ULP_PAD_PTD8,\n\tIMX7ULP_PAD_PTD9,\n\tIMX7ULP_PAD_PTD10,\n\tIMX7ULP_PAD_PTD11,\n\tIMX7ULP_PAD_RESERVE12,\n\tIMX7ULP_PAD_RESERVE13,\n\tIMX7ULP_PAD_RESERVE14,\n\tIMX7ULP_PAD_RESERVE15,\n\tIMX7ULP_PAD_RESERVE16,\n\tIMX7ULP_PAD_RESERVE17,\n\tIMX7ULP_PAD_RESERVE18,\n\tIMX7ULP_PAD_RESERVE19,\n\tIMX7ULP_PAD_RESERVE20,\n\tIMX7ULP_PAD_RESERVE21,\n\tIMX7ULP_PAD_RESERVE22,\n\tIMX7ULP_PAD_RESERVE23,\n\tIMX7ULP_PAD_RESERVE24,\n\tIMX7ULP_PAD_RESERVE25,\n\tIMX7ULP_PAD_RESERVE26,\n\tIMX7ULP_PAD_RESERVE27,\n\tIMX7ULP_PAD_RESERVE28,\n\tIMX7ULP_PAD_RESERVE29,\n\tIMX7ULP_PAD_RESERVE30,\n\tIMX7ULP_PAD_RESERVE31,\n\tIMX7ULP_PAD_PTE0,\n\tIMX7ULP_PAD_PTE1,\n\tIMX7ULP_PAD_PTE2,\n\tIMX7ULP_PAD_PTE3,\n\tIMX7ULP_PAD_PTE4,\n\tIMX7ULP_PAD_PTE5,\n\tIMX7ULP_PAD_PTE6,\n\tIMX7ULP_PAD_PTE7,\n\tIMX7ULP_PAD_PTE8,\n\tIMX7ULP_PAD_PTE9,\n\tIMX7ULP_PAD_PTE10,\n\tIMX7ULP_PAD_PTE11,\n\tIMX7ULP_PAD_PTE12,\n\tIMX7ULP_PAD_PTE13,\n\tIMX7ULP_PAD_PTE14,\n\tIMX7ULP_PAD_PTE15,\n\tIMX7ULP_PAD_RESERVE32,\n\tIMX7ULP_PAD_RESERVE33,\n\tIMX7ULP_PAD_RESERVE34,\n\tIMX7ULP_PAD_RESERVE35,\n\tIMX7ULP_PAD_RESERVE36,\n\tIMX7ULP_PAD_RESERVE37,\n\tIMX7ULP_PAD_RESERVE38,\n\tIMX7ULP_PAD_RESERVE39,\n\tIMX7ULP_PAD_RESERVE40,\n\tIMX7ULP_PAD_RESERVE41,\n\tIMX7ULP_PAD_RESERVE42,\n\tIMX7ULP_PAD_RESERVE43,\n\tIMX7ULP_PAD_RESERVE44,\n\tIMX7ULP_PAD_RESERVE45,\n\tIMX7ULP_PAD_RESERVE46,\n\tIMX7ULP_PAD_RESERVE47,\n\tIMX7ULP_PAD_PTF0,\n\tIMX7ULP_PAD_PTF1,\n\tIMX7ULP_PAD_PTF2,\n\tIMX7ULP_PAD_PTF3,\n\tIMX7ULP_PAD_PTF4,\n\tIMX7ULP_PAD_PTF5,\n\tIMX7ULP_PAD_PTF6,\n\tIMX7ULP_PAD_PTF7,\n\tIMX7ULP_PAD_PTF8,\n\tIMX7ULP_PAD_PTF9,\n\tIMX7ULP_PAD_PTF10,\n\tIMX7ULP_PAD_PTF11,\n\tIMX7ULP_PAD_PTF12,\n\tIMX7ULP_PAD_PTF13,\n\tIMX7ULP_PAD_PTF14,\n\tIMX7ULP_PAD_PTF15,\n\tIMX7ULP_PAD_PTF16,\n\tIMX7ULP_PAD_PTF17,\n\tIMX7ULP_PAD_PTF18,\n\tIMX7ULP_PAD_PTF19,\n};\n\n \nstatic const struct pinctrl_pin_desc imx7ulp_pinctrl_pads[] = {\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC0),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC1),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC2),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC3),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC4),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC5),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC6),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC7),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC8),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC9),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC10),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC11),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC12),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC13),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC14),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC15),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC16),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC17),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC18),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTC19),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE0),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE1),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE2),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE3),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE4),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE5),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE6),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE7),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE8),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE9),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE10),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE11),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD0),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD1),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD2),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD3),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD4),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD5),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD6),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD7),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD8),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD9),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD10),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTD11),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE12),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE13),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE14),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE15),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE16),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE17),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE18),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE19),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE20),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE21),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE22),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE23),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE24),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE25),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE26),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE27),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE28),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE29),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE30),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE31),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE0),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE1),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE2),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE3),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE4),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE5),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE6),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE7),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE8),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE9),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE10),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE11),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE12),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE13),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE14),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTE15),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE32),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE33),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE34),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE35),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE36),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE37),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE38),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE39),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE40),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE41),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE42),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE43),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE44),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE45),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE46),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_RESERVE47),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF0),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF1),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF2),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF3),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF4),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF5),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF6),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF7),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF8),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF9),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF10),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF11),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF12),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF13),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF14),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF15),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF16),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF17),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF18),\n\tIMX_PINCTRL_PIN(IMX7ULP_PAD_PTF19),\n};\n\n#define BM_OBE_ENABLED\t\tBIT(17)\n#define BM_IBE_ENABLED\t\tBIT(16)\n#define BM_MUX_MODE\t\t0xf00\n#define BP_MUX_MODE\t\t8\n\nstatic int imx7ulp_pmx_gpio_set_direction(struct pinctrl_dev *pctldev,\n\t\t\t\t\t  struct pinctrl_gpio_range *range,\n\t\t\t\t\t  unsigned offset, bool input)\n{\n\tstruct imx_pinctrl *ipctl = pinctrl_dev_get_drvdata(pctldev);\n\tconst struct imx_pin_reg *pin_reg;\n\tu32 reg;\n\n\tpin_reg = &ipctl->pin_regs[offset];\n\tif (pin_reg->mux_reg == -1)\n\t\treturn -EINVAL;\n\n\treg = readl(ipctl->base + pin_reg->mux_reg);\n\tif (input)\n\t\treg = (reg & ~BM_OBE_ENABLED) | BM_IBE_ENABLED;\n\telse\n\t\treg = (reg & ~BM_IBE_ENABLED) | BM_OBE_ENABLED;\n\twritel(reg, ipctl->base + pin_reg->mux_reg);\n\n\treturn 0;\n}\n\nstatic const struct imx_pinctrl_soc_info imx7ulp_pinctrl_info = {\n\t.pins = imx7ulp_pinctrl_pads,\n\t.npins = ARRAY_SIZE(imx7ulp_pinctrl_pads),\n\t.flags = ZERO_OFFSET_VALID | SHARE_MUX_CONF_REG,\n\t.gpio_set_direction = imx7ulp_pmx_gpio_set_direction,\n\t.mux_mask = BM_MUX_MODE,\n\t.mux_shift = BP_MUX_MODE,\n};\n\nstatic const struct of_device_id imx7ulp_pinctrl_of_match[] = {\n\t{ .compatible = \"fsl,imx7ulp-iomuxc1\", },\n\t{   }\n};\n\nstatic int imx7ulp_pinctrl_probe(struct platform_device *pdev)\n{\n\treturn imx_pinctrl_probe(pdev, &imx7ulp_pinctrl_info);\n}\n\nstatic struct platform_driver imx7ulp_pinctrl_driver = {\n\t.driver = {\n\t\t.name = \"imx7ulp-pinctrl\",\n\t\t.of_match_table = imx7ulp_pinctrl_of_match,\n\t\t.suppress_bind_attrs = true,\n\t},\n\t.probe = imx7ulp_pinctrl_probe,\n};\n\nstatic int __init imx7ulp_pinctrl_init(void)\n{\n\treturn platform_driver_register(&imx7ulp_pinctrl_driver);\n}\narch_initcall(imx7ulp_pinctrl_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}