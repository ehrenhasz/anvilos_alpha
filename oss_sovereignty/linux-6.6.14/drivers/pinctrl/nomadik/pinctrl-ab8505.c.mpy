{
  "module_name": "pinctrl-ab8505.c",
  "hash_id": "10cfb901641687358f3031a163777fc3b09dd760089e817c0cfec264d78915e0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/nomadik/pinctrl-ab8505.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/pinctrl/pinctrl.h>\n\n#include <linux/mfd/abx500/ab8500.h>\n\n#include \"pinctrl-abx500.h\"\n\n \n#define ABX500_GPIO(offset)\t(offset)\n\n#define AB8505_PIN_N4\t\tABX500_GPIO(1)\n#define AB8505_PIN_R5\t\tABX500_GPIO(2)\n#define AB8505_PIN_P5\t\tABX500_GPIO(3)\n \n#define AB8505_PIN_B16\t\tABX500_GPIO(10)\n#define AB8505_PIN_B17\t\tABX500_GPIO(11)\n \n#define AB8505_PIN_D17\t\tABX500_GPIO(13)\n#define AB8505_PIN_C16\t\tABX500_GPIO(14)\n \n#define AB8505_PIN_P2\t\tABX500_GPIO(17)\n#define AB8505_PIN_N3\t\tABX500_GPIO(18)\n#define AB8505_PIN_T1\t\tABX500_GPIO(19)\n#define AB8505_PIN_P3\t\tABX500_GPIO(20)\n \n#define AB8505_PIN_H14\t\tABX500_GPIO(34)\n \n#define AB8505_PIN_J15\t\tABX500_GPIO(40)\n#define AB8505_PIN_J14\t\tABX500_GPIO(41)\n \n#define AB8505_PIN_L4\t\tABX500_GPIO(50)\n \n#define AB8505_PIN_D16\t\tABX500_GPIO(52)\n#define AB8505_PIN_D15\t\tABX500_GPIO(53)\n\n \n#define AB8505_GPIO_MAX_NUMBER\t53\n\n \nstatic const struct pinctrl_pin_desc ab8505_pins[] = {\n\tPINCTRL_PIN(AB8505_PIN_N4, \"GPIO1_N4\"),\n\tPINCTRL_PIN(AB8505_PIN_R5, \"GPIO2_R5\"),\n\tPINCTRL_PIN(AB8505_PIN_P5, \"GPIO3_P5\"),\n \n\tPINCTRL_PIN(AB8505_PIN_B16, \"GPIO10_B16\"),\n\tPINCTRL_PIN(AB8505_PIN_B17, \"GPIO11_B17\"),\n \n\tPINCTRL_PIN(AB8505_PIN_D17, \"GPIO13_D17\"),\n\tPINCTRL_PIN(AB8505_PIN_C16, \"GPIO14_C16\"),\n \n\tPINCTRL_PIN(AB8505_PIN_P2, \"GPIO17_P2\"),\n\tPINCTRL_PIN(AB8505_PIN_N3, \"GPIO18_N3\"),\n\tPINCTRL_PIN(AB8505_PIN_T1, \"GPIO19_T1\"),\n\tPINCTRL_PIN(AB8505_PIN_P3, \"GPIO20_P3\"),\n \n\tPINCTRL_PIN(AB8505_PIN_H14, \"GPIO34_H14\"),\n \n\tPINCTRL_PIN(AB8505_PIN_J15, \"GPIO40_J15\"),\n\tPINCTRL_PIN(AB8505_PIN_J14, \"GPIO41_J14\"),\n \n\tPINCTRL_PIN(AB8505_PIN_L4, \"GPIO50_L4\"),\n \n\tPINCTRL_PIN(AB8505_PIN_D16, \"GPIO52_D16\"),\n\tPINCTRL_PIN(AB8505_PIN_D15, \"GPIO53_D15\"),\n};\n\n \nstatic const struct abx500_pinrange ab8505_pinranges[] = {\n\tABX500_PINRANGE(1, 3, ABX500_ALT_A),\n\tABX500_PINRANGE(10, 2, ABX500_DEFAULT),\n\tABX500_PINRANGE(13, 1, ABX500_DEFAULT),\n\tABX500_PINRANGE(14, 1, ABX500_ALT_A),\n\tABX500_PINRANGE(17, 4, ABX500_ALT_A),\n\tABX500_PINRANGE(34, 1, ABX500_ALT_A),\n\tABX500_PINRANGE(40, 2, ABX500_ALT_A),\n\tABX500_PINRANGE(50, 1, ABX500_DEFAULT),\n\tABX500_PINRANGE(52, 2, ABX500_ALT_A),\n};\n\n \n\n \nstatic const unsigned sysclkreq2_d_1_pins[] = { AB8505_PIN_N4 };\nstatic const unsigned sysclkreq3_d_1_pins[] = { AB8505_PIN_R5 };\nstatic const unsigned sysclkreq4_d_1_pins[] = { AB8505_PIN_P5 };\nstatic const unsigned gpio10_d_1_pins[] = { AB8505_PIN_B16 };\nstatic const unsigned gpio11_d_1_pins[] = { AB8505_PIN_B17 };\nstatic const unsigned gpio13_d_1_pins[] = { AB8505_PIN_D17 };\nstatic const unsigned pwmout1_d_1_pins[] = { AB8505_PIN_C16 };\n \nstatic const unsigned adi2_d_1_pins[] = { AB8505_PIN_P2, AB8505_PIN_N3,\n\t\t\t\t\tAB8505_PIN_T1, AB8505_PIN_P3 };\nstatic const unsigned extcpena_d_1_pins[] = { AB8505_PIN_H14 };\n \nstatic const unsigned modsclsda_d_1_pins[] = { AB8505_PIN_J15, AB8505_PIN_J14 };\nstatic const unsigned gpio50_d_1_pins[] = { AB8505_PIN_L4 };\nstatic const unsigned resethw_d_1_pins[] = { AB8505_PIN_D16 };\nstatic const unsigned service_d_1_pins[] = { AB8505_PIN_D15 };\n\n \nstatic const unsigned gpio1_a_1_pins[] = { AB8505_PIN_N4 };\nstatic const unsigned gpio2_a_1_pins[] = { AB8505_PIN_R5 };\nstatic const unsigned gpio3_a_1_pins[] = { AB8505_PIN_P5 };\nstatic const unsigned hiqclkena_a_1_pins[] = { AB8505_PIN_B16 };\nstatic const unsigned pdmclk_a_1_pins[] = { AB8505_PIN_B17 };\nstatic const unsigned uarttxdata_a_1_pins[] = { AB8505_PIN_D17 };\nstatic const unsigned gpio14_a_1_pins[] = { AB8505_PIN_C16 };\nstatic const unsigned gpio17_a_1_pins[] = { AB8505_PIN_P2 };\nstatic const unsigned gpio18_a_1_pins[] = { AB8505_PIN_N3 };\nstatic const unsigned gpio19_a_1_pins[] = { AB8505_PIN_T1 };\nstatic const unsigned gpio20_a_1_pins[] = { AB8505_PIN_P3 };\nstatic const unsigned gpio34_a_1_pins[] = { AB8505_PIN_H14 };\nstatic const unsigned gpio40_a_1_pins[] = { AB8505_PIN_J15 };\nstatic const unsigned gpio41_a_1_pins[] = { AB8505_PIN_J14 };\nstatic const unsigned uartrxdata_a_1_pins[] = { AB8505_PIN_J14 };\nstatic const unsigned gpio50_a_1_pins[] = { AB8505_PIN_L4 };\nstatic const unsigned gpio52_a_1_pins[] = { AB8505_PIN_D16 };\nstatic const unsigned gpio53_a_1_pins[] = { AB8505_PIN_D15 };\n\n \nstatic const unsigned pdmdata_b_1_pins[] = { AB8505_PIN_B16 };\nstatic const unsigned extvibrapwm1_b_1_pins[] = { AB8505_PIN_D17 };\nstatic const unsigned extvibrapwm2_b_1_pins[] = { AB8505_PIN_L4 };\n\n \nstatic const unsigned usbvdat_c_1_pins[] = { AB8505_PIN_D17 };\n\n#define AB8505_PIN_GROUP(a, b) { .name = #a, .pins = a##_pins,\t\t\\\n\t\t\t.npins = ARRAY_SIZE(a##_pins), .altsetting = b }\n\nstatic const struct abx500_pingroup ab8505_groups[] = {\n\tAB8505_PIN_GROUP(sysclkreq2_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(sysclkreq3_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(sysclkreq4_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(gpio10_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(gpio11_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(gpio13_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(pwmout1_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(adi2_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(extcpena_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(modsclsda_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(gpio50_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(resethw_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(service_d_1, ABX500_DEFAULT),\n\tAB8505_PIN_GROUP(gpio1_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio2_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio3_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(hiqclkena_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(pdmclk_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(uarttxdata_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio14_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio17_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio18_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio19_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio20_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio34_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio40_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio41_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(uartrxdata_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio50_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio52_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(gpio53_a_1, ABX500_ALT_A),\n\tAB8505_PIN_GROUP(pdmdata_b_1, ABX500_ALT_B),\n\tAB8505_PIN_GROUP(extvibrapwm1_b_1, ABX500_ALT_B),\n\tAB8505_PIN_GROUP(extvibrapwm2_b_1, ABX500_ALT_B),\n\tAB8505_PIN_GROUP(usbvdat_c_1, ABX500_ALT_C),\n};\n\n \n#define AB8505_FUNC_GROUPS(a, b...)\t   \\\nstatic const char * const a##_groups[] = { b };\n\nAB8505_FUNC_GROUPS(sysclkreq, \"sysclkreq2_d_1\", \"sysclkreq3_d_1\",\n\t\t\"sysclkreq4_d_1\");\nAB8505_FUNC_GROUPS(gpio, \"gpio1_a_1\", \"gpio2_a_1\", \"gpio3_a_1\",\n\t\t\"gpio10_d_1\", \"gpio11_d_1\", \"gpio13_d_1\", \"gpio14_a_1\",\n\t\t\"gpio17_a_1\", \"gpio18_a_1\", \"gpio19_a_1\", \"gpio20_a_1\",\n\t\t\"gpio34_a_1\", \"gpio40_a_1\", \"gpio41_a_1\", \"gpio50_d_1\",\n\t\t\"gpio52_a_1\", \"gpio53_a_1\");\nAB8505_FUNC_GROUPS(pwmout, \"pwmout1_d_1\");\nAB8505_FUNC_GROUPS(adi2, \"adi2_d_1\");\nAB8505_FUNC_GROUPS(extcpena, \"extcpena_d_1\");\nAB8505_FUNC_GROUPS(modsclsda, \"modsclsda_d_1\");\nAB8505_FUNC_GROUPS(resethw, \"resethw_d_1\");\nAB8505_FUNC_GROUPS(service, \"service_d_1\");\nAB8505_FUNC_GROUPS(hiqclkena, \"hiqclkena_a_1\");\nAB8505_FUNC_GROUPS(pdm, \"pdmclk_a_1\", \"pdmdata_b_1\");\nAB8505_FUNC_GROUPS(uartdata, \"uarttxdata_a_1\", \"uartrxdata_a_1\");\nAB8505_FUNC_GROUPS(extvibra, \"extvibrapwm1_b_1\", \"extvibrapwm2_b_1\");\nAB8505_FUNC_GROUPS(usbvdat, \"usbvdat_c_1\");\n\n#define FUNCTION(fname)\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = #fname,\t\t\t\t\\\n\t\t.groups = fname##_groups,\t\t\\\n\t\t.ngroups = ARRAY_SIZE(fname##_groups),\t\\\n\t}\n\nstatic const struct abx500_function ab8505_functions[] = {\n\tFUNCTION(sysclkreq),\n\tFUNCTION(gpio),\n\tFUNCTION(pwmout),\n\tFUNCTION(adi2),\n\tFUNCTION(extcpena),\n\tFUNCTION(modsclsda),\n\tFUNCTION(resethw),\n\tFUNCTION(service),\n\tFUNCTION(hiqclkena),\n\tFUNCTION(pdm),\n\tFUNCTION(uartdata),\n\tFUNCTION(extvibra),\n\tFUNCTION(extvibra),\n\tFUNCTION(usbvdat),\n};\n\n \n\nstatic struct\nalternate_functions ab8505_alternate_functions[AB8505_GPIO_MAX_NUMBER + 1] = {\n\tALTERNATE_FUNCTIONS(0, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(1,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(2,      1, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(3,      2, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(4, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(5, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(6, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(7, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(8, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\n\tALTERNATE_FUNCTIONS(9, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(10,      1,      0, UNUSED, 1, 0, 0),  \n\tALTERNATE_FUNCTIONS(11,      2,      1, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(12, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(13,      4,      3,      4, 1, 0, 2),  \n\tALTERNATE_FUNCTIONS(14,      5, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(15, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(16, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\t \n\tALTERNATE_FUNCTIONS(17,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(18,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(19,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(20,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(21, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(22, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(23, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(24, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\n\tALTERNATE_FUNCTIONS(25, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(26, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(27, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(28, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(29, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(30, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(31, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(32, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\n\tALTERNATE_FUNCTIONS(33, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(34,      1, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(35, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(36, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(37, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(38, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(39, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(40,      7, UNUSED, UNUSED, 0, 0, 0),  \n\n\tALTERNATE_FUNCTIONS(41,      0, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(42, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(43, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(44, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(45, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(46, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(47, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(48, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\n\tALTERNATE_FUNCTIONS(49, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(50,\t     1,      2, UNUSED, 1, 0, 0),  \n\tALTERNATE_FUNCTIONS(51, UNUSED, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(52,\t     3, UNUSED, UNUSED, 0, 0, 0),  \n\tALTERNATE_FUNCTIONS(53,\t     4, UNUSED, UNUSED, 0, 0, 0),  \n};\n\n \nstatic struct abx500_gpio_irq_cluster ab8505_gpio_irq_cluster[] = {\n\tGPIO_IRQ_CLUSTER(10, 11, AB8500_INT_GPIO10R),\n\tGPIO_IRQ_CLUSTER(13, 13, AB8500_INT_GPIO13R),\n\tGPIO_IRQ_CLUSTER(40, 41, AB8500_INT_GPIO40R),\n\tGPIO_IRQ_CLUSTER(50, 50, AB9540_INT_GPIO50R),\n\tGPIO_IRQ_CLUSTER(52, 53, AB9540_INT_GPIO52R),\n};\n\nstatic struct abx500_pinctrl_soc_data ab8505_soc = {\n\t.gpio_ranges = ab8505_pinranges,\n\t.gpio_num_ranges = ARRAY_SIZE(ab8505_pinranges),\n\t.pins = ab8505_pins,\n\t.npins = ARRAY_SIZE(ab8505_pins),\n\t.functions = ab8505_functions,\n\t.nfunctions = ARRAY_SIZE(ab8505_functions),\n\t.groups = ab8505_groups,\n\t.ngroups = ARRAY_SIZE(ab8505_groups),\n\t.alternate_functions = ab8505_alternate_functions,\n\t.gpio_irq_cluster = ab8505_gpio_irq_cluster,\n\t.ngpio_irq_cluster = ARRAY_SIZE(ab8505_gpio_irq_cluster),\n\t.irq_gpio_rising_offset = AB8500_INT_GPIO6R,\n\t.irq_gpio_falling_offset = AB8500_INT_GPIO6F,\n\t.irq_gpio_factor = 1,\n};\n\nvoid\nabx500_pinctrl_ab8505_init(struct abx500_pinctrl_soc_data **soc)\n{\n\t*soc = &ab8505_soc;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}