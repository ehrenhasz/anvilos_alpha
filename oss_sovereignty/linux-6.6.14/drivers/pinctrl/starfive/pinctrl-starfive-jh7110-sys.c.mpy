{
  "module_name": "pinctrl-starfive-jh7110-sys.c",
  "hash_id": "a0ad9de1b17ce03a9da17c6c20231c2459fd01d888d0036cef5bc8f19159aa6a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/starfive/pinctrl-starfive-jh7110-sys.c",
  "human_readable_source": "\n \n\n#include <linux/bits.h>\n#include <linux/clk.h>\n#include <linux/gpio/driver.h>\n#include <linux/io.h>\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/mutex.h>\n#include <linux/platform_device.h>\n#include <linux/reset.h>\n#include <linux/spinlock.h>\n\n#include <linux/pinctrl/pinctrl.h>\n#include <linux/pinctrl/pinmux.h>\n\n#include <dt-bindings/pinctrl/starfive,jh7110-pinctrl.h>\n\n#include \"../core.h\"\n#include \"../pinctrl-utils.h\"\n#include \"../pinmux.h\"\n#include \"../pinconf.h\"\n#include \"pinctrl-starfive-jh7110.h\"\n\n#define JH7110_SYS_NGPIO\t\t64\n#define JH7110_SYS_GC_BASE\t\t0\n\n#define JH7110_SYS_REGS_NUM\t\t174\n\n \n#define JH7110_SYS_DOEN\t\t\t0x000\n#define JH7110_SYS_DOUT\t\t\t0x040\n#define JH7110_SYS_GPI\t\t\t0x080\n#define JH7110_SYS_GPIOIN\t\t0x118\n\n#define JH7110_SYS_GPIOEN\t\t0x0dc\n#define JH7110_SYS_GPIOIS0\t\t0x0e0\n#define JH7110_SYS_GPIOIS1\t\t0x0e4\n#define JH7110_SYS_GPIOIC0\t\t0x0e8\n#define JH7110_SYS_GPIOIC1\t\t0x0ec\n#define JH7110_SYS_GPIOIBE0\t\t0x0f0\n#define JH7110_SYS_GPIOIBE1\t\t0x0f4\n#define JH7110_SYS_GPIOIEV0\t\t0x0f8\n#define JH7110_SYS_GPIOIEV1\t\t0x0fc\n#define JH7110_SYS_GPIOIE0\t\t0x100\n#define JH7110_SYS_GPIOIE1\t\t0x104\n#define JH7110_SYS_GPIORIS0\t\t0x108\n#define JH7110_SYS_GPIORIS1\t\t0x10c\n#define JH7110_SYS_GPIOMIS0\t\t0x110\n#define JH7110_SYS_GPIOMIS1\t\t0x114\n\n#define JH7110_SYS_GPO_PDA_0_74_CFG\t0x120\n#define JH7110_SYS_GPO_PDA_89_94_CFG\t0x284\n\nstatic const struct pinctrl_pin_desc jh7110_sys_pins[] = {\n\tPINCTRL_PIN(PAD_GPIO0,\t\t\"GPIO0\"),\n\tPINCTRL_PIN(PAD_GPIO1,\t\t\"GPIO1\"),\n\tPINCTRL_PIN(PAD_GPIO2,\t\t\"GPIO2\"),\n\tPINCTRL_PIN(PAD_GPIO3,\t\t\"GPIO3\"),\n\tPINCTRL_PIN(PAD_GPIO4,\t\t\"GPIO4\"),\n\tPINCTRL_PIN(PAD_GPIO5,\t\t\"GPIO5\"),\n\tPINCTRL_PIN(PAD_GPIO6,\t\t\"GPIO6\"),\n\tPINCTRL_PIN(PAD_GPIO7,\t\t\"GPIO7\"),\n\tPINCTRL_PIN(PAD_GPIO8,\t\t\"GPIO8\"),\n\tPINCTRL_PIN(PAD_GPIO9,\t\t\"GPIO9\"),\n\tPINCTRL_PIN(PAD_GPIO10,\t\t\"GPIO10\"),\n\tPINCTRL_PIN(PAD_GPIO11,\t\t\"GPIO11\"),\n\tPINCTRL_PIN(PAD_GPIO12,\t\t\"GPIO12\"),\n\tPINCTRL_PIN(PAD_GPIO13,\t\t\"GPIO13\"),\n\tPINCTRL_PIN(PAD_GPIO14,\t\t\"GPIO14\"),\n\tPINCTRL_PIN(PAD_GPIO15,\t\t\"GPIO15\"),\n\tPINCTRL_PIN(PAD_GPIO16,\t\t\"GPIO16\"),\n\tPINCTRL_PIN(PAD_GPIO17,\t\t\"GPIO17\"),\n\tPINCTRL_PIN(PAD_GPIO18,\t\t\"GPIO18\"),\n\tPINCTRL_PIN(PAD_GPIO19,\t\t\"GPIO19\"),\n\tPINCTRL_PIN(PAD_GPIO20,\t\t\"GPIO20\"),\n\tPINCTRL_PIN(PAD_GPIO21,\t\t\"GPIO21\"),\n\tPINCTRL_PIN(PAD_GPIO22,\t\t\"GPIO22\"),\n\tPINCTRL_PIN(PAD_GPIO23,\t\t\"GPIO23\"),\n\tPINCTRL_PIN(PAD_GPIO24,\t\t\"GPIO24\"),\n\tPINCTRL_PIN(PAD_GPIO25,\t\t\"GPIO25\"),\n\tPINCTRL_PIN(PAD_GPIO26,\t\t\"GPIO26\"),\n\tPINCTRL_PIN(PAD_GPIO27,\t\t\"GPIO27\"),\n\tPINCTRL_PIN(PAD_GPIO28,\t\t\"GPIO28\"),\n\tPINCTRL_PIN(PAD_GPIO29,\t\t\"GPIO29\"),\n\tPINCTRL_PIN(PAD_GPIO30,\t\t\"GPIO30\"),\n\tPINCTRL_PIN(PAD_GPIO31,\t\t\"GPIO31\"),\n\tPINCTRL_PIN(PAD_GPIO32,\t\t\"GPIO32\"),\n\tPINCTRL_PIN(PAD_GPIO33,\t\t\"GPIO33\"),\n\tPINCTRL_PIN(PAD_GPIO34,\t\t\"GPIO34\"),\n\tPINCTRL_PIN(PAD_GPIO35,\t\t\"GPIO35\"),\n\tPINCTRL_PIN(PAD_GPIO36,\t\t\"GPIO36\"),\n\tPINCTRL_PIN(PAD_GPIO37,\t\t\"GPIO37\"),\n\tPINCTRL_PIN(PAD_GPIO38,\t\t\"GPIO38\"),\n\tPINCTRL_PIN(PAD_GPIO39,\t\t\"GPIO39\"),\n\tPINCTRL_PIN(PAD_GPIO40,\t\t\"GPIO40\"),\n\tPINCTRL_PIN(PAD_GPIO41,\t\t\"GPIO41\"),\n\tPINCTRL_PIN(PAD_GPIO42,\t\t\"GPIO42\"),\n\tPINCTRL_PIN(PAD_GPIO43,\t\t\"GPIO43\"),\n\tPINCTRL_PIN(PAD_GPIO44,\t\t\"GPIO44\"),\n\tPINCTRL_PIN(PAD_GPIO45,\t\t\"GPIO45\"),\n\tPINCTRL_PIN(PAD_GPIO46,\t\t\"GPIO46\"),\n\tPINCTRL_PIN(PAD_GPIO47,\t\t\"GPIO47\"),\n\tPINCTRL_PIN(PAD_GPIO48,\t\t\"GPIO48\"),\n\tPINCTRL_PIN(PAD_GPIO49,\t\t\"GPIO49\"),\n\tPINCTRL_PIN(PAD_GPIO50,\t\t\"GPIO50\"),\n\tPINCTRL_PIN(PAD_GPIO51,\t\t\"GPIO51\"),\n\tPINCTRL_PIN(PAD_GPIO52,\t\t\"GPIO52\"),\n\tPINCTRL_PIN(PAD_GPIO53,\t\t\"GPIO53\"),\n\tPINCTRL_PIN(PAD_GPIO54,\t\t\"GPIO54\"),\n\tPINCTRL_PIN(PAD_GPIO55,\t\t\"GPIO55\"),\n\tPINCTRL_PIN(PAD_GPIO56,\t\t\"GPIO56\"),\n\tPINCTRL_PIN(PAD_GPIO57,\t\t\"GPIO57\"),\n\tPINCTRL_PIN(PAD_GPIO58,\t\t\"GPIO58\"),\n\tPINCTRL_PIN(PAD_GPIO59,\t\t\"GPIO59\"),\n\tPINCTRL_PIN(PAD_GPIO60,\t\t\"GPIO60\"),\n\tPINCTRL_PIN(PAD_GPIO61,\t\t\"GPIO61\"),\n\tPINCTRL_PIN(PAD_GPIO62,\t\t\"GPIO62\"),\n\tPINCTRL_PIN(PAD_GPIO63,\t\t\"GPIO63\"),\n\tPINCTRL_PIN(PAD_SD0_CLK,\t\"SD0_CLK\"),\n\tPINCTRL_PIN(PAD_SD0_CMD,\t\"SD0_CMD\"),\n\tPINCTRL_PIN(PAD_SD0_DATA0,\t\"SD0_DATA0\"),\n\tPINCTRL_PIN(PAD_SD0_DATA1,\t\"SD0_DATA1\"),\n\tPINCTRL_PIN(PAD_SD0_DATA2,\t\"SD0_DATA2\"),\n\tPINCTRL_PIN(PAD_SD0_DATA3,\t\"SD0_DATA3\"),\n\tPINCTRL_PIN(PAD_SD0_DATA4,\t\"SD0_DATA4\"),\n\tPINCTRL_PIN(PAD_SD0_DATA5,\t\"SD0_DATA5\"),\n\tPINCTRL_PIN(PAD_SD0_DATA6,\t\"SD0_DATA6\"),\n\tPINCTRL_PIN(PAD_SD0_DATA7,\t\"SD0_DATA7\"),\n\tPINCTRL_PIN(PAD_SD0_STRB,\t\"SD0_STRB\"),\n\tPINCTRL_PIN(PAD_GMAC1_MDC,\t\"GMAC1_MDC\"),\n\tPINCTRL_PIN(PAD_GMAC1_MDIO,\t\"GMAC1_MDIO\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXD0,\t\"GMAC1_RXD0\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXD1,\t\"GMAC1_RXD1\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXD2,\t\"GMAC1_RXD2\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXD3,\t\"GMAC1_RXD3\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXDV,\t\"GMAC1_RXDV\"),\n\tPINCTRL_PIN(PAD_GMAC1_RXC,\t\"GMAC1_RXC\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXD0,\t\"GMAC1_TXD0\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXD1,\t\"GMAC1_TXD1\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXD2,\t\"GMAC1_TXD2\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXD3,\t\"GMAC1_TXD3\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXEN,\t\"GMAC1_TXEN\"),\n\tPINCTRL_PIN(PAD_GMAC1_TXC,\t\"GMAC1_TXC\"),\n\tPINCTRL_PIN(PAD_QSPI_SCLK,\t\"QSPI_SCLK\"),\n\tPINCTRL_PIN(PAD_QSPI_CS0,\t\"QSPI_CS0\"),\n\tPINCTRL_PIN(PAD_QSPI_DATA0,\t\"QSPI_DATA0\"),\n\tPINCTRL_PIN(PAD_QSPI_DATA1,\t\"QSPI_DATA1\"),\n\tPINCTRL_PIN(PAD_QSPI_DATA2,\t\"QSPI_DATA2\"),\n\tPINCTRL_PIN(PAD_QSPI_DATA3,\t\"QSPI_DATA3\"),\n};\n\nstruct jh7110_func_sel {\n\tu16 offset;\n\tu8 shift;\n\tu8 max;\n};\n\nstatic const struct jh7110_func_sel\n\tjh7110_sys_func_sel[ARRAY_SIZE(jh7110_sys_pins)] = {\n\t[PAD_GMAC1_RXC] = { 0x29c,  0, 1 },\n\t[PAD_GPIO10]    = { 0x29c,  2, 3 },\n\t[PAD_GPIO11]    = { 0x29c,  5, 3 },\n\t[PAD_GPIO12]    = { 0x29c,  8, 3 },\n\t[PAD_GPIO13]    = { 0x29c, 11, 3 },\n\t[PAD_GPIO14]    = { 0x29c, 14, 3 },\n\t[PAD_GPIO15]    = { 0x29c, 17, 3 },\n\t[PAD_GPIO16]    = { 0x29c, 20, 3 },\n\t[PAD_GPIO17]    = { 0x29c, 23, 3 },\n\t[PAD_GPIO18]    = { 0x29c, 26, 3 },\n\t[PAD_GPIO19]    = { 0x29c, 29, 3 },\n\n\t[PAD_GPIO20]    = { 0x2a0,  0, 3 },\n\t[PAD_GPIO21]    = { 0x2a0,  3, 3 },\n\t[PAD_GPIO22]    = { 0x2a0,  6, 3 },\n\t[PAD_GPIO23]    = { 0x2a0,  9, 3 },\n\t[PAD_GPIO24]    = { 0x2a0, 12, 3 },\n\t[PAD_GPIO25]    = { 0x2a0, 15, 3 },\n\t[PAD_GPIO26]    = { 0x2a0, 18, 3 },\n\t[PAD_GPIO27]    = { 0x2a0, 21, 3 },\n\t[PAD_GPIO28]    = { 0x2a0, 24, 3 },\n\t[PAD_GPIO29]    = { 0x2a0, 27, 3 },\n\n\t[PAD_GPIO30]    = { 0x2a4,  0, 3 },\n\t[PAD_GPIO31]    = { 0x2a4,  3, 3 },\n\t[PAD_GPIO32]    = { 0x2a4,  6, 3 },\n\t[PAD_GPIO33]    = { 0x2a4,  9, 3 },\n\t[PAD_GPIO34]    = { 0x2a4, 12, 3 },\n\t[PAD_GPIO35]    = { 0x2a4, 15, 3 },\n\t[PAD_GPIO36]    = { 0x2a4, 17, 3 },\n\t[PAD_GPIO37]    = { 0x2a4, 20, 3 },\n\t[PAD_GPIO38]    = { 0x2a4, 23, 3 },\n\t[PAD_GPIO39]    = { 0x2a4, 26, 3 },\n\t[PAD_GPIO40]    = { 0x2a4, 29, 3 },\n\n\t[PAD_GPIO41]    = { 0x2a8,  0, 3 },\n\t[PAD_GPIO42]    = { 0x2a8,  3, 3 },\n\t[PAD_GPIO43]    = { 0x2a8,  6, 3 },\n\t[PAD_GPIO44]    = { 0x2a8,  9, 3 },\n\t[PAD_GPIO45]    = { 0x2a8, 12, 3 },\n\t[PAD_GPIO46]    = { 0x2a8, 15, 3 },\n\t[PAD_GPIO47]    = { 0x2a8, 18, 3 },\n\t[PAD_GPIO48]    = { 0x2a8, 21, 3 },\n\t[PAD_GPIO49]    = { 0x2a8, 24, 3 },\n\t[PAD_GPIO50]    = { 0x2a8, 27, 3 },\n\t[PAD_GPIO51]    = { 0x2a8, 30, 3 },\n\n\t[PAD_GPIO52]    = { 0x2ac,  0, 3 },\n\t[PAD_GPIO53]    = { 0x2ac,  2, 3 },\n\t[PAD_GPIO54]    = { 0x2ac,  4, 3 },\n\t[PAD_GPIO55]    = { 0x2ac,  6, 3 },\n\t[PAD_GPIO56]    = { 0x2ac,  9, 3 },\n\t[PAD_GPIO57]    = { 0x2ac, 12, 3 },\n\t[PAD_GPIO58]    = { 0x2ac, 15, 3 },\n\t[PAD_GPIO59]    = { 0x2ac, 18, 3 },\n\t[PAD_GPIO60]    = { 0x2ac, 21, 3 },\n\t[PAD_GPIO61]    = { 0x2ac, 24, 3 },\n\t[PAD_GPIO62]    = { 0x2ac, 27, 3 },\n\t[PAD_GPIO63]    = { 0x2ac, 30, 3 },\n\n\t[PAD_GPIO6]     = { 0x2b0,  0, 3 },\n\t[PAD_GPIO7]     = { 0x2b0,  2, 3 },\n\t[PAD_GPIO8]     = { 0x2b0,  5, 3 },\n\t[PAD_GPIO9]     = { 0x2b0,  8, 3 },\n};\n\nstruct jh7110_vin_group_sel {\n\tu16 offset;\n\tu8 shift;\n\tu8 group;\n};\n\nstatic const struct jh7110_vin_group_sel\n\tjh7110_sys_vin_group_sel[ARRAY_SIZE(jh7110_sys_pins)] = {\n\t[PAD_GPIO6]     = { 0x2b4, 21, 0 },\n\t[PAD_GPIO7]     = { 0x2b4, 18, 0 },\n\t[PAD_GPIO8]     = { 0x2b4, 15, 0 },\n\t[PAD_GPIO9]     = { 0x2b0, 11, 0 },\n\t[PAD_GPIO10]    = { 0x2b0, 20, 0 },\n\t[PAD_GPIO11]    = { 0x2b0, 23, 0 },\n\t[PAD_GPIO12]    = { 0x2b0, 26, 0 },\n\t[PAD_GPIO13]    = { 0x2b0, 29, 0 },\n\t[PAD_GPIO14]    = { 0x2b4,  0, 0 },\n\t[PAD_GPIO15]    = { 0x2b4,  3, 0 },\n\t[PAD_GPIO16]    = { 0x2b4,  6, 0 },\n\t[PAD_GPIO17]    = { 0x2b4,  9, 0 },\n\t[PAD_GPIO18]    = { 0x2b4, 12, 0 },\n\t[PAD_GPIO19]    = { 0x2b0, 14, 0 },\n\t[PAD_GPIO20]    = { 0x2b0, 17, 0 },\n\n\t[PAD_GPIO21]    = { 0x2b4, 21, 1 },\n\t[PAD_GPIO22]    = { 0x2b4, 18, 1 },\n\t[PAD_GPIO23]    = { 0x2b4, 15, 1 },\n\t[PAD_GPIO24]    = { 0x2b0, 11, 1 },\n\t[PAD_GPIO25]    = { 0x2b0, 20, 1 },\n\t[PAD_GPIO26]    = { 0x2b0, 23, 1 },\n\t[PAD_GPIO27]    = { 0x2b0, 26, 1 },\n\t[PAD_GPIO28]    = { 0x2b0, 29, 1 },\n\t[PAD_GPIO29]    = { 0x2b4,  0, 1 },\n\t[PAD_GPIO30]    = { 0x2b4,  3, 1 },\n\t[PAD_GPIO31]    = { 0x2b4,  6, 1 },\n\t[PAD_GPIO32]    = { 0x2b4,  9, 1 },\n\t[PAD_GPIO33]    = { 0x2b4, 12, 1 },\n\t[PAD_GPIO34]    = { 0x2b0, 14, 1 },\n\t[PAD_GPIO35]    = { 0x2b0, 17, 1 },\n\n\t[PAD_GPIO36]    = { 0x2b4, 21, 2 },\n\t[PAD_GPIO37]    = { 0x2b4, 18, 2 },\n\t[PAD_GPIO38]    = { 0x2b4, 15, 2 },\n\t[PAD_GPIO39]    = { 0x2b0, 11, 2 },\n\t[PAD_GPIO40]    = { 0x2b0, 20, 2 },\n\t[PAD_GPIO41]    = { 0x2b0, 23, 2 },\n\t[PAD_GPIO42]    = { 0x2b0, 26, 2 },\n\t[PAD_GPIO43]    = { 0x2b0, 29, 2 },\n\t[PAD_GPIO44]    = { 0x2b4,  0, 2 },\n\t[PAD_GPIO45]    = { 0x2b4,  3, 2 },\n\t[PAD_GPIO46]    = { 0x2b4,  6, 2 },\n\t[PAD_GPIO47]    = { 0x2b4,  9, 2 },\n\t[PAD_GPIO48]    = { 0x2b4, 12, 2 },\n\t[PAD_GPIO49]    = { 0x2b0, 14, 2 },\n\t[PAD_GPIO50]    = { 0x2b0, 17, 2 },\n};\n\nstatic void jh7110_set_function(struct jh7110_pinctrl *sfp,\n\t\t\t\tunsigned int pin, u32 func)\n{\n\tconst struct jh7110_func_sel *fs = &jh7110_sys_func_sel[pin];\n\tunsigned long flags;\n\tvoid __iomem *reg;\n\tu32 mask;\n\n\tif (!fs->offset)\n\t\treturn;\n\n\tif (func > fs->max)\n\t\treturn;\n\n\treg = sfp->base + fs->offset;\n\tfunc = func << fs->shift;\n\tmask = 0x3U << fs->shift;\n\n\traw_spin_lock_irqsave(&sfp->lock, flags);\n\tfunc |= readl_relaxed(reg) & ~mask;\n\twritel_relaxed(func, reg);\n\traw_spin_unlock_irqrestore(&sfp->lock, flags);\n}\n\nstatic void jh7110_set_vin_group(struct jh7110_pinctrl *sfp,\n\t\t\t\t unsigned int pin)\n{\n\tconst struct jh7110_vin_group_sel *gs = &jh7110_sys_vin_group_sel[pin];\n\tunsigned long flags;\n\tvoid __iomem *reg;\n\tu32 mask;\n\tu32 grp;\n\n\tif (!gs->offset)\n\t\treturn;\n\n\treg = sfp->base + gs->offset;\n\tgrp = gs->group << gs->shift;\n\tmask = 0x3U << gs->shift;\n\n\traw_spin_lock_irqsave(&sfp->lock, flags);\n\tgrp |= readl_relaxed(reg) & ~mask;\n\twritel_relaxed(grp, reg);\n\traw_spin_unlock_irqrestore(&sfp->lock, flags);\n}\n\nstatic int jh7110_sys_set_one_pin_mux(struct jh7110_pinctrl *sfp,\n\t\t\t\t      unsigned int pin,\n\t\t\t\t      unsigned int din, u32 dout,\n\t\t\t\t      u32 doen, u32 func)\n{\n\tif (pin < sfp->gc.ngpio && func == 0)\n\t\tjh7110_set_gpiomux(sfp, pin, din, dout, doen);\n\n\tjh7110_set_function(sfp, pin, func);\n\n\tif (pin < sfp->gc.ngpio && func == 2)\n\t\tjh7110_set_vin_group(sfp, pin);\n\n\treturn 0;\n}\n\nstatic int jh7110_sys_get_padcfg_base(struct jh7110_pinctrl *sfp,\n\t\t\t\t      unsigned int pin)\n{\n\tif (pin < PAD_GMAC1_MDC)\n\t\treturn JH7110_SYS_GPO_PDA_0_74_CFG;\n\telse if (pin > PAD_GMAC1_TXC && pin <= PAD_QSPI_DATA3)\n\t\treturn JH7110_SYS_GPO_PDA_89_94_CFG;\n\telse\n\t\treturn -1;\n}\n\nstatic void jh7110_sys_irq_handler(struct irq_desc *desc)\n{\n\tstruct jh7110_pinctrl *sfp = jh7110_from_irq_desc(desc);\n\tstruct irq_chip *chip = irq_desc_get_chip(desc);\n\tunsigned long mis;\n\tunsigned int pin;\n\n\tchained_irq_enter(chip, desc);\n\n\tmis = readl_relaxed(sfp->base + JH7110_SYS_GPIOMIS0);\n\tfor_each_set_bit(pin, &mis, 32)\n\t\tgeneric_handle_domain_irq(sfp->gc.irq.domain, pin);\n\n\tmis = readl_relaxed(sfp->base + JH7110_SYS_GPIOMIS1);\n\tfor_each_set_bit(pin, &mis, 32)\n\t\tgeneric_handle_domain_irq(sfp->gc.irq.domain, pin + 32);\n\n\tchained_irq_exit(chip, desc);\n}\n\nstatic int jh7110_sys_init_hw(struct gpio_chip *gc)\n{\n\tstruct jh7110_pinctrl *sfp = container_of(gc,\n\t\t\tstruct jh7110_pinctrl, gc);\n\n\t \n\twritel(0U, sfp->base + JH7110_SYS_GPIOIE0);\n\twritel(0U, sfp->base + JH7110_SYS_GPIOIE1);\n\t \n\twritel(~0U, sfp->base + JH7110_SYS_GPIOIC0);\n\twritel(~0U, sfp->base + JH7110_SYS_GPIOIC1);\n\t \n\twritel(1U, sfp->base + JH7110_SYS_GPIOEN);\n\treturn 0;\n}\n\nstatic const struct jh7110_gpio_irq_reg jh7110_sys_irq_reg = {\n\t.is_reg_base\t= JH7110_SYS_GPIOIS0,\n\t.ic_reg_base\t= JH7110_SYS_GPIOIC0,\n\t.ibe_reg_base\t= JH7110_SYS_GPIOIBE0,\n\t.iev_reg_base\t= JH7110_SYS_GPIOIEV0,\n\t.ie_reg_base\t= JH7110_SYS_GPIOIE0,\n\t.ris_reg_base\t= JH7110_SYS_GPIORIS0,\n\t.mis_reg_base\t= JH7110_SYS_GPIOMIS0,\n};\n\nstatic const struct jh7110_pinctrl_soc_info jh7110_sys_pinctrl_info = {\n\t.pins\t\t= jh7110_sys_pins,\n\t.npins\t\t= ARRAY_SIZE(jh7110_sys_pins),\n\t.ngpios\t\t= JH7110_SYS_NGPIO,\n\t.gc_base\t= JH7110_SYS_GC_BASE,\n\t.dout_reg_base\t= JH7110_SYS_DOUT,\n\t.dout_mask\t= GENMASK(6, 0),\n\t.doen_reg_base\t= JH7110_SYS_DOEN,\n\t.doen_mask\t= GENMASK(5, 0),\n\t.gpi_reg_base\t= JH7110_SYS_GPI,\n\t.gpi_mask\t= GENMASK(6, 0),\n\t.gpioin_reg_base\t   = JH7110_SYS_GPIOIN,\n\t.irq_reg\t\t   = &jh7110_sys_irq_reg,\n\t.nsaved_regs\t\t   = JH7110_SYS_REGS_NUM,\n\t.jh7110_set_one_pin_mux  = jh7110_sys_set_one_pin_mux,\n\t.jh7110_get_padcfg_base  = jh7110_sys_get_padcfg_base,\n\t.jh7110_gpio_irq_handler = jh7110_sys_irq_handler,\n\t.jh7110_gpio_init_hw\t = jh7110_sys_init_hw,\n};\n\nstatic const struct of_device_id jh7110_sys_pinctrl_of_match[] = {\n\t{\n\t\t.compatible = \"starfive,jh7110-sys-pinctrl\",\n\t\t.data = &jh7110_sys_pinctrl_info,\n\t},\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, jh7110_sys_pinctrl_of_match);\n\nstatic struct platform_driver jh7110_sys_pinctrl_driver = {\n\t.probe = jh7110_pinctrl_probe,\n\t.driver = {\n\t\t.name = \"starfive-jh7110-sys-pinctrl\",\n\t\t.of_match_table = jh7110_sys_pinctrl_of_match,\n\t\t.pm = pm_sleep_ptr(&jh7110_pinctrl_pm_ops),\n\t},\n};\nmodule_platform_driver(jh7110_sys_pinctrl_driver);\n\nMODULE_DESCRIPTION(\"Pinctrl driver for the StarFive JH7110 SoC sys controller\");\nMODULE_AUTHOR(\"Emil Renner Berthing <kernel@esmil.dk>\");\nMODULE_AUTHOR(\"Jianlong Huang <jianlong.huang@starfivetech.com>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}