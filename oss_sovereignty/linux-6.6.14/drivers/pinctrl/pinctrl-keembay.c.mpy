{
  "module_name": "pinctrl-keembay.c",
  "hash_id": "1baddcdf39649213ad578699fa0d098e4630a6b3eef31f075dd7bc338bd4ba03",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pinctrl/pinctrl-keembay.c",
  "human_readable_source": "\n \n\n#include <linux/bitfield.h>\n#include <linux/bitops.h>\n#include <linux/gpio/driver.h>\n#include <linux/interrupt.h>\n#include <linux/io.h>\n#include <linux/module.h>\n\n#include <linux/pinctrl/pinconf.h>\n#include <linux/pinctrl/pinconf-generic.h>\n#include <linux/pinctrl/pinctrl.h>\n#include <linux/pinctrl/pinmux.h>\n\n#include <linux/platform_device.h>\n\n#include \"core.h\"\n#include \"pinmux.h\"\n\n \n#define KEEMBAY_GPIO_DATA_OUT\t\t0x000\n#define KEEMBAY_GPIO_DATA_IN\t\t0x020\n#define KEEMBAY_GPIO_DATA_IN_RAW\t0x040\n#define KEEMBAY_GPIO_DATA_HIGH\t\t0x060\n#define KEEMBAY_GPIO_DATA_LOW\t\t0x080\n\n \n#define KEEMBAY_GPIO_INT_CFG\t\t0x000\n#define KEEMBAY_GPIO_MODE\t\t0x070\n\n \n#define KEEMBAY_GPIO_MODE_PULLUP_MASK\tGENMASK(13, 12)\n#define KEEMBAY_GPIO_MODE_DRIVE_MASK\tGENMASK(8, 7)\n#define KEEMBAY_GPIO_MODE_INV_MASK\tGENMASK(5, 4)\n#define KEEMBAY_GPIO_MODE_SELECT_MASK\tGENMASK(2, 0)\n#define KEEMBAY_GPIO_MODE_DIR_OVR\tBIT(15)\n#define KEEMBAY_GPIO_MODE_REN\t\tBIT(11)\n#define KEEMBAY_GPIO_MODE_SCHMITT_EN\tBIT(10)\n#define KEEMBAY_GPIO_MODE_SLEW_RATE\tBIT(9)\n#define KEEMBAY_GPIO_IRQ_ENABLE\t\tBIT(7)\n#define KEEMBAY_GPIO_MODE_DIR\t\tBIT(3)\n#define KEEMBAY_GPIO_MODE_DEFAULT\t0x7\n#define KEEMBAY_GPIO_MODE_INV_VAL\t0x3\n\n#define KEEMBAY_GPIO_DISABLE\t\t0\n#define KEEMBAY_GPIO_PULL_UP\t\t1\n#define KEEMBAY_GPIO_PULL_DOWN\t\t2\n#define KEEMBAY_GPIO_BUS_HOLD\t\t3\n#define KEEMBAY_GPIO_NUM_IRQ\t\t8\n#define KEEMBAY_GPIO_MAX_PER_IRQ\t4\n#define KEEMBAY_GPIO_MAX_PER_REG\t32\n#define KEEMBAY_GPIO_MIN_STRENGTH\t2\n#define KEEMBAY_GPIO_MAX_STRENGTH\t12\n#define KEEMBAY_GPIO_SENSE_LOW\t\t(IRQ_TYPE_LEVEL_LOW | IRQ_TYPE_EDGE_FALLING)\n\n \n#define KEEMBAY_GPIO_REG_OFFSET(pin)\t((pin) * 4)\n\n \nstruct keembay_mux_desc {\n\tu8 mode;\n\tconst char *name;\n};\n\n#define KEEMBAY_PIN_DESC(pin_number, pin_name, ...) {\t\\\n\t.number = pin_number,\t\t\t\t\\\n\t.name = pin_name,\t\t\t\t\\\n\t.drv_data = &(struct keembay_mux_desc[]) {\t\\\n\t\t    __VA_ARGS__, { } },\t\t\t\\\n}\t\t\t\t\t\t\t\\\n\n#define KEEMBAY_MUX(pin_mode, pin_function) {\t\t\\\n\t.mode = pin_mode,\t\t\t\t\\\n\t.name = pin_function,\t\t\t\t\\\n}\t\t\t\t\t\t\t\\\n\n \nstruct keembay_gpio_irq {\n\tunsigned int source;\n\tunsigned int line;\n\tunsigned int pins[KEEMBAY_GPIO_MAX_PER_IRQ];\n\tunsigned int trigger;\n\tunsigned int num_share;\n};\n\n \nstruct keembay_pinctrl {\n\tstruct pinctrl_dev *pctrl;\n\tvoid __iomem *base0;\n\tvoid __iomem *base1;\n\tstruct device *dev;\n\tstruct gpio_chip chip;\n\tconst struct keembay_pin_soc *soc;\n\traw_spinlock_t lock;\n\tunsigned int ngroups;\n\tunsigned int nfuncs;\n\tunsigned int npins;\n\tstruct keembay_gpio_irq irq[KEEMBAY_GPIO_NUM_IRQ];\n\tint max_gpios_level_type;\n\tint max_gpios_edge_type;\n};\n\n \nstruct keembay_pin_soc {\n\tconst struct pinctrl_pin_desc *pins;\n};\n\nstatic const struct pinctrl_pin_desc keembay_pins[] = {\n\tKEEMBAY_PIN_DESC(0, \"GPIO0\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(1, \"GPIO1\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(2, \"GPIO2\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(3, \"GPIO3\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(4, \"GPIO4\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C2_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(5, \"GPIO5\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C2_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(6, \"GPIO6\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C3_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(7, \"GPIO7\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"I2C3_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(8, \"GPIO8\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(9, \"GPIO9\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(10, \"GPIO10\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(11, \"GPIO11\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(12, \"GPIO12\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SPI0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(13, \"GPIO13\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SPI0_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(14, \"GPIO14\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"PWM_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"ETH_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(15, \"GPIO15\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(16, \"GPIO16\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(17, \"GPIO17\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2S3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(18, \"GPIO18\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2S3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(19, \"GPIO19\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"LCD_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"SD1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"LCD_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(20, \"GPIO20\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"LCD_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"SPI1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(21, \"GPIO21\",\n\t\t\t KEEMBAY_MUX(0x0, \"UART1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"LCD_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(22, \"GPIO22\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"UART2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(23, \"GPIO23\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"UART2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(24, \"GPIO24\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"UART2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"DEBUG_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(25, \"GPIO25\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"UART2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C2_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(26, \"GPIO26\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2C2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DSU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C2_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(27, \"GPIO27\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2C2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DSU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(28, \"GPIO28\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2C3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS0_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(29, \"GPIO29\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2C3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I3C2_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(30, \"GPIO30\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C4_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(31, \"GPIO31\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C4_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"UART1_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(32, \"GPIO32\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"PCIE_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(33, \"GPIO33\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"PWM_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"PCIE_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(34, \"GPIO34\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I2S0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(35, \"GPIO35\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"PCIE_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"UART1_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I2S0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(36, \"GPIO36\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I2S0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(37, \"GPIO37\",\n\t\t\t KEEMBAY_MUX(0x0, \"SD0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"I2S0_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"SLVDS1_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(38, \"GPIO38\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(39, \"GPIO39\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(40, \"GPIO40\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(41, \"GPIO41\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI3_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"DEBUG_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(42, \"GPIO42\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"CAM_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C4_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(43, \"GPIO43\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI3_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2C4_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(44, \"GPIO44\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(45, \"GPIO45\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"CPR_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(46, \"GPIO46\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(47, \"GPIO47\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SD1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(48, \"GPIO48\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART2_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(49, \"GPIO49\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART2_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(50, \"GPIO50\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART2_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(51, \"GPIO51\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"UART2_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(52, \"GPIO52\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(53, \"GPIO53\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(54, \"GPIO54\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(55, \"GPIO55\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(56, \"GPIO56\",\n\t\t\t KEEMBAY_MUX(0x0, \"ETH_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I2S2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(57, \"GPIO57\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2S1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(58, \"GPIO58\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(59, \"GPIO59\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(60, \"GPIO60\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I3C1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(61, \"GPIO61\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(62, \"GPIO62\",\n\t\t\t KEEMBAY_MUX(0x0, \"SPI1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(63, \"GPIO63\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(64, \"GPIO64\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2S2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"ETH_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"UART1_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(65, \"GPIO65\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"SPI1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SD1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SPI0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(66, \"GPIO66\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SPI0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"CAM_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(67, \"GPIO67\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SPI0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2S3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(68, \"GPIO68\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SPI0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2S3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(69, \"GPIO69\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"I2C1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SPI0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2S3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(70, \"GPIO70\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SPI0_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2S3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(71, \"GPIO71\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"I2S3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(72, \"GPIO72\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C1_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(73, \"GPIO73\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(74, \"GPIO74\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(75, \"GPIO75\",\n\t\t\t KEEMBAY_MUX(0x0, \"I3C0_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"ETH_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"SD0_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART2_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(76, \"GPIO76\",\n\t\t\t KEEMBAY_MUX(0x0, \"I2C2_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I3C0_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"ETH_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(77, \"GPIO77\",\n\t\t\t KEEMBAY_MUX(0x0, \"PCIE_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I3C1_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I3C2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(78, \"GPIO78\",\n\t\t\t KEEMBAY_MUX(0x0, \"PCIE_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I3C2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I3C2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n\tKEEMBAY_PIN_DESC(79, \"GPIO79\",\n\t\t\t KEEMBAY_MUX(0x0, \"PCIE_M0\"),\n\t\t\t KEEMBAY_MUX(0x1, \"I2C2_M1\"),\n\t\t\t KEEMBAY_MUX(0x2, \"SLVDS1_M2\"),\n\t\t\t KEEMBAY_MUX(0x3, \"TPIU_M3\"),\n\t\t\t KEEMBAY_MUX(0x4, \"I3C2_M4\"),\n\t\t\t KEEMBAY_MUX(0x5, \"LCD_M5\"),\n\t\t\t KEEMBAY_MUX(0x6, \"UART3_M6\"),\n\t\t\t KEEMBAY_MUX(0x7, \"GPIO_M7\")),\n};\n\nstatic inline u32 keembay_read_reg(void __iomem *base, unsigned int pin)\n{\n\treturn readl(base + KEEMBAY_GPIO_REG_OFFSET(pin));\n}\n\nstatic inline u32 keembay_read_gpio_reg(void __iomem *base, unsigned int pin)\n{\n\treturn keembay_read_reg(base, pin / KEEMBAY_GPIO_MAX_PER_REG);\n}\n\nstatic inline u32 keembay_read_pin(void __iomem *base, unsigned int pin)\n{\n\tu32 val = keembay_read_gpio_reg(base, pin);\n\n\treturn !!(val & BIT(pin % KEEMBAY_GPIO_MAX_PER_REG));\n}\n\nstatic inline void keembay_write_reg(u32 val, void __iomem *base, unsigned int pin)\n{\n\twritel(val, base + KEEMBAY_GPIO_REG_OFFSET(pin));\n}\n\nstatic inline void keembay_write_gpio_reg(u32 val, void __iomem *base, unsigned int pin)\n{\n\tkeembay_write_reg(val, base, pin / KEEMBAY_GPIO_MAX_PER_REG);\n}\n\nstatic void keembay_gpio_invert(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\t \n\n\tval |= FIELD_PREP(KEEMBAY_GPIO_MODE_INV_MASK, KEEMBAY_GPIO_MODE_INV_VAL);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n}\n\nstatic void keembay_gpio_restore_default(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\tval &= FIELD_PREP(KEEMBAY_GPIO_MODE_INV_MASK, 0);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n}\n\nstatic int keembay_request_gpio(struct pinctrl_dev *pctldev,\n\t\t\t\tstruct pinctrl_gpio_range *range, unsigned int pin)\n{\n\tstruct keembay_pinctrl *kpc = pinctrl_dev_get_drvdata(pctldev);\n\tunsigned int val;\n\n\tif (pin >= kpc->npins)\n\t\treturn -EINVAL;\n\n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tval = FIELD_GET(KEEMBAY_GPIO_MODE_SELECT_MASK, val);\n\n\t \n\tif (val != KEEMBAY_GPIO_MODE_DEFAULT)\n\t\treturn -EBUSY;\n\n\treturn 0;\n}\n\nstatic int keembay_set_mux(struct pinctrl_dev *pctldev, unsigned int fun_sel,\n\t\t\t   unsigned int grp_sel)\n{\n\tstruct keembay_pinctrl *kpc = pinctrl_dev_get_drvdata(pctldev);\n\tstruct function_desc *func;\n\tstruct group_desc *grp;\n\tunsigned int val;\n\tu8 pin_mode;\n\tint pin;\n\n\tgrp = pinctrl_generic_get_group(pctldev, grp_sel);\n\tif (!grp)\n\t\treturn -EINVAL;\n\n\tfunc = pinmux_generic_get_function(pctldev, fun_sel);\n\tif (!func)\n\t\treturn -EINVAL;\n\n\t \n\tpin = *grp->pins;\n\tpin_mode = *(u8 *)(func->data);\n\n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tval = u32_replace_bits(val, pin_mode, KEEMBAY_GPIO_MODE_SELECT_MASK);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic u32 keembay_pinconf_get_pull(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn FIELD_GET(KEEMBAY_GPIO_MODE_PULLUP_MASK, val);\n}\n\nstatic int keembay_pinconf_set_pull(struct keembay_pinctrl *kpc, unsigned int pin,\n\t\t\t\t    unsigned int pull)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\tval = u32_replace_bits(val, pull, KEEMBAY_GPIO_MODE_PULLUP_MASK);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic int keembay_pinconf_get_drive(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\tval = FIELD_GET(KEEMBAY_GPIO_MODE_DRIVE_MASK, val) * 4;\n\tif (val)\n\t\treturn val;\n\n\treturn KEEMBAY_GPIO_MIN_STRENGTH;\n}\n\nstatic int keembay_pinconf_set_drive(struct keembay_pinctrl *kpc, unsigned int pin,\n\t\t\t\t     unsigned int drive)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tunsigned int strength = clamp_val(drive, KEEMBAY_GPIO_MIN_STRENGTH,\n\t\t\t\t KEEMBAY_GPIO_MAX_STRENGTH) / 4;\n\n\tval = u32_replace_bits(val, strength, KEEMBAY_GPIO_MODE_DRIVE_MASK);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic int keembay_pinconf_get_slew_rate(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn !!(val & KEEMBAY_GPIO_MODE_SLEW_RATE);\n}\n\nstatic int keembay_pinconf_set_slew_rate(struct keembay_pinctrl *kpc, unsigned int pin,\n\t\t\t\t\t unsigned int slew_rate)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\tif (slew_rate)\n\t\tval |= KEEMBAY_GPIO_MODE_SLEW_RATE;\n\telse\n\t\tval &= ~KEEMBAY_GPIO_MODE_SLEW_RATE;\n\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic int keembay_pinconf_get_schmitt(struct keembay_pinctrl *kpc, unsigned int pin)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn !!(val & KEEMBAY_GPIO_MODE_SCHMITT_EN);\n}\n\nstatic int keembay_pinconf_set_schmitt(struct keembay_pinctrl *kpc, unsigned int pin,\n\t\t\t\t       unsigned int schmitt_en)\n{\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\tif (schmitt_en)\n\t\tval |= KEEMBAY_GPIO_MODE_SCHMITT_EN;\n\telse\n\t\tval &= ~KEEMBAY_GPIO_MODE_SCHMITT_EN;\n\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic int keembay_pinconf_get(struct pinctrl_dev *pctldev, unsigned int pin,\n\t\t\t       unsigned long *cfg)\n{\n\tstruct keembay_pinctrl *kpc = pinctrl_dev_get_drvdata(pctldev);\n\tunsigned int param = pinconf_to_config_param(*cfg);\n\tunsigned int val;\n\n\tif (pin >= kpc->npins)\n\t\treturn -EINVAL;\n\n\tswitch (param) {\n\tcase PIN_CONFIG_BIAS_DISABLE:\n\t\tif (keembay_pinconf_get_pull(kpc, pin) != KEEMBAY_GPIO_DISABLE)\n\t\t\treturn -EINVAL;\n\t\tbreak;\n\n\tcase PIN_CONFIG_BIAS_PULL_UP:\n\t\tif (keembay_pinconf_get_pull(kpc, pin) != KEEMBAY_GPIO_PULL_UP)\n\t\t\treturn -EINVAL;\n\t\tbreak;\n\n\tcase PIN_CONFIG_BIAS_PULL_DOWN:\n\t\tif (keembay_pinconf_get_pull(kpc, pin) != KEEMBAY_GPIO_PULL_DOWN)\n\t\t\treturn -EINVAL;\n\t\tbreak;\n\n\tcase PIN_CONFIG_BIAS_BUS_HOLD:\n\t\tif (keembay_pinconf_get_pull(kpc, pin) != KEEMBAY_GPIO_BUS_HOLD)\n\t\t\treturn -EINVAL;\n\t\tbreak;\n\n\tcase PIN_CONFIG_INPUT_SCHMITT_ENABLE:\n\t\tif (!keembay_pinconf_get_schmitt(kpc, pin))\n\t\t\treturn -EINVAL;\n\t\tbreak;\n\n\tcase PIN_CONFIG_SLEW_RATE:\n\t\tval = keembay_pinconf_get_slew_rate(kpc, pin);\n\t\t*cfg = pinconf_to_config_packed(param, val);\n\t\tbreak;\n\n\tcase PIN_CONFIG_DRIVE_STRENGTH:\n\t\tval = keembay_pinconf_get_drive(kpc, pin);\n\t\t*cfg = pinconf_to_config_packed(param, val);\n\t\tbreak;\n\n\tdefault:\n\t\treturn -ENOTSUPP;\n\t}\n\n\treturn 0;\n}\n\nstatic int keembay_pinconf_set(struct pinctrl_dev *pctldev, unsigned int pin,\n\t\t\t       unsigned long *cfg, unsigned int num_configs)\n{\n\tstruct keembay_pinctrl *kpc = pinctrl_dev_get_drvdata(pctldev);\n\tenum pin_config_param param;\n\tunsigned int arg, i;\n\tint ret = 0;\n\n\tif (pin >= kpc->npins)\n\t\treturn -EINVAL;\n\n\tfor (i = 0; i < num_configs; i++) {\n\t\tparam = pinconf_to_config_param(cfg[i]);\n\t\targ = pinconf_to_config_argument(cfg[i]);\n\n\t\tswitch (param) {\n\t\tcase PIN_CONFIG_BIAS_DISABLE:\n\t\t\tret = keembay_pinconf_set_pull(kpc, pin, KEEMBAY_GPIO_DISABLE);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_BIAS_PULL_UP:\n\t\t\tret = keembay_pinconf_set_pull(kpc, pin, KEEMBAY_GPIO_PULL_UP);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_BIAS_PULL_DOWN:\n\t\t\tret = keembay_pinconf_set_pull(kpc, pin, KEEMBAY_GPIO_PULL_DOWN);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_BIAS_BUS_HOLD:\n\t\t\tret = keembay_pinconf_set_pull(kpc, pin, KEEMBAY_GPIO_BUS_HOLD);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_INPUT_SCHMITT_ENABLE:\n\t\t\tret = keembay_pinconf_set_schmitt(kpc, pin, arg);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_SLEW_RATE:\n\t\t\tret = keembay_pinconf_set_slew_rate(kpc, pin, arg);\n\t\t\tbreak;\n\n\t\tcase PIN_CONFIG_DRIVE_STRENGTH:\n\t\t\tret = keembay_pinconf_set_drive(kpc, pin, arg);\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\treturn -ENOTSUPP;\n\t\t}\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\treturn ret;\n}\n\nstatic const struct pinctrl_ops keembay_pctlops = {\n\t.get_groups_count\t= pinctrl_generic_get_group_count,\n\t.get_group_name\t\t= pinctrl_generic_get_group_name,\n\t.get_group_pins\t\t= pinctrl_generic_get_group_pins,\n\t.dt_node_to_map\t\t= pinconf_generic_dt_node_to_map_all,\n\t.dt_free_map\t\t= pinconf_generic_dt_free_map,\n};\n\nstatic const struct pinmux_ops keembay_pmxops = {\n\t.get_functions_count\t= pinmux_generic_get_function_count,\n\t.get_function_name\t= pinmux_generic_get_function_name,\n\t.get_function_groups\t= pinmux_generic_get_function_groups,\n\t.gpio_request_enable\t= keembay_request_gpio,\n\t.set_mux\t\t= keembay_set_mux,\n};\n\nstatic const struct pinconf_ops keembay_confops = {\n\t.is_generic\t= true,\n\t.pin_config_get\t= keembay_pinconf_get,\n\t.pin_config_set\t= keembay_pinconf_set,\n};\n\nstatic struct pinctrl_desc keembay_pinctrl_desc = {\n\t.name\t\t= \"keembay-pinmux\",\n\t.pctlops\t= &keembay_pctlops,\n\t.pmxops\t\t= &keembay_pmxops,\n\t.confops\t= &keembay_confops,\n\t.owner\t\t= THIS_MODULE,\n};\n\nstatic int keembay_gpio_get(struct gpio_chip *gc, unsigned int pin)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int val, offset;\n\n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\toffset = (val & KEEMBAY_GPIO_MODE_DIR) ? KEEMBAY_GPIO_DATA_IN : KEEMBAY_GPIO_DATA_OUT;\n\n\treturn keembay_read_pin(kpc->base0 + offset, pin);\n}\n\nstatic void keembay_gpio_set(struct gpio_chip *gc, unsigned int pin, int val)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int reg_val;\n\n\treg_val = keembay_read_gpio_reg(kpc->base0 + KEEMBAY_GPIO_DATA_OUT, pin);\n\tif (val)\n\t\tkeembay_write_gpio_reg(reg_val | BIT(pin % KEEMBAY_GPIO_MAX_PER_REG),\n\t\t\t\t       kpc->base0 + KEEMBAY_GPIO_DATA_HIGH, pin);\n\telse\n\t\tkeembay_write_gpio_reg(~reg_val | BIT(pin % KEEMBAY_GPIO_MAX_PER_REG),\n\t\t\t\t       kpc->base0 + KEEMBAY_GPIO_DATA_LOW, pin);\n}\n\nstatic int keembay_gpio_get_direction(struct gpio_chip *gc, unsigned int pin)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn !!(val & KEEMBAY_GPIO_MODE_DIR);\n}\n\nstatic int keembay_gpio_set_direction_in(struct gpio_chip *gc, unsigned int pin)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int val;\n\n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tval |= KEEMBAY_GPIO_MODE_DIR;\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\n\treturn 0;\n}\n\nstatic int keembay_gpio_set_direction_out(struct gpio_chip *gc,\n\t\t\t\t\t  unsigned int pin, int value)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int val;\n\n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tval &= ~KEEMBAY_GPIO_MODE_DIR;\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_MODE, pin);\n\tkeembay_gpio_set(gc, pin, value);\n\n\treturn 0;\n}\n\nstatic void keembay_gpio_irq_handler(struct irq_desc *desc)\n{\n\tstruct gpio_chip *gc = irq_desc_get_handler_data(desc);\n\tunsigned int kmb_irq = irq_desc_get_irq(desc);\n\tunsigned long reg, clump = 0, bit = 0;\n\tstruct irq_chip *parent_chip;\n\tstruct keembay_pinctrl *kpc;\n\tunsigned int src, pin, val;\n\n\t \n\tfor (src = 0; src < KEEMBAY_GPIO_NUM_IRQ; src++) {\n\t\tif (kmb_irq == gc->irq.parents[src])\n\t\t\tbreak;\n\t}\n\n\tif (src == KEEMBAY_GPIO_NUM_IRQ)\n\t\treturn;\n\n\tparent_chip = irq_desc_get_chip(desc);\n\tkpc = gpiochip_get_data(gc);\n\n\tchained_irq_enter(parent_chip, desc);\n\treg = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\n\t \n\tfor_each_set_clump8(bit, clump, &reg, BITS_PER_TYPE(typeof(reg))) {\n\t\tpin = clump & ~KEEMBAY_GPIO_IRQ_ENABLE;\n\t\tval = keembay_read_pin(kpc->base0 + KEEMBAY_GPIO_DATA_IN, pin);\n\t\tkmb_irq = irq_linear_revmap(gc->irq.domain, pin);\n\n\t\t \n\t\tif (val && (clump & KEEMBAY_GPIO_IRQ_ENABLE))\n\t\t\tgeneric_handle_irq(kmb_irq);\n\t}\n\tchained_irq_exit(parent_chip, desc);\n}\n\nstatic void keembay_gpio_clear_irq(struct irq_data *data, unsigned long pos,\n\t\t\t\t   u32 src, irq_hw_number_t pin)\n{\n\tstruct gpio_chip *gc = irq_data_get_irq_chip_data(data);\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned long trig = irqd_get_trigger_type(data);\n\tstruct keembay_gpio_irq *irq = &kpc->irq[src];\n\tunsigned long val;\n\n\t \n\tif ((pos / KEEMBAY_GPIO_NUM_IRQ) >= KEEMBAY_GPIO_MAX_PER_IRQ)\n\t\treturn;\n\n\t \n\tval = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\n\tbitmap_set_value8(&val, 0, pos);\n\tkeembay_write_reg(val, kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\n\tirq->num_share--;\n\tirq->pins[pos / KEEMBAY_GPIO_NUM_IRQ] = 0;\n\n\tif (trig & IRQ_TYPE_LEVEL_MASK)\n\t\tkeembay_gpio_restore_default(kpc, pin);\n\n\tif (irq->trigger == IRQ_TYPE_LEVEL_HIGH)\n\t\tkpc->max_gpios_level_type++;\n\telse if (irq->trigger == IRQ_TYPE_EDGE_RISING)\n\t\tkpc->max_gpios_edge_type++;\n}\n\nstatic int keembay_find_free_slot(struct keembay_pinctrl *kpc, unsigned int src)\n{\n\tunsigned long val = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\n\treturn bitmap_find_free_region(&val, KEEMBAY_GPIO_MAX_PER_REG, 3) / KEEMBAY_GPIO_NUM_IRQ;\n}\n\nstatic int keembay_find_free_src(struct keembay_pinctrl *kpc, unsigned int trig)\n{\n\tint src, type = 0;\n\n\tif (trig & IRQ_TYPE_LEVEL_MASK)\n\t\ttype = IRQ_TYPE_LEVEL_HIGH;\n\telse if (trig & IRQ_TYPE_EDGE_BOTH)\n\t\ttype = IRQ_TYPE_EDGE_RISING;\n\n\tfor (src = 0; src < KEEMBAY_GPIO_NUM_IRQ; src++) {\n\t\tif (kpc->irq[src].trigger != type)\n\t\t\tcontinue;\n\n\t\tif (!keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src) ||\n\t\t    kpc->irq[src].num_share < KEEMBAY_GPIO_MAX_PER_IRQ)\n\t\t\treturn src;\n\t}\n\n\treturn -EBUSY;\n}\n\nstatic void keembay_gpio_set_irq(struct keembay_pinctrl *kpc, int src,\n\t\t\t\t int slot, irq_hw_number_t pin)\n{\n\tunsigned long val = pin | KEEMBAY_GPIO_IRQ_ENABLE;\n\tstruct keembay_gpio_irq *irq = &kpc->irq[src];\n\tunsigned long flags, reg;\n\n\traw_spin_lock_irqsave(&kpc->lock, flags);\n\treg = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\tbitmap_set_value8(&reg, val, slot * 8);\n\tkeembay_write_reg(reg, kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\traw_spin_unlock_irqrestore(&kpc->lock, flags);\n\n\tif (irq->trigger == IRQ_TYPE_LEVEL_HIGH)\n\t\tkpc->max_gpios_level_type--;\n\telse if (irq->trigger == IRQ_TYPE_EDGE_RISING)\n\t\tkpc->max_gpios_edge_type--;\n\n\tirq->source = src;\n\tirq->pins[slot] = pin;\n\tirq->num_share++;\n}\n\nstatic void keembay_gpio_irq_enable(struct irq_data *data)\n{\n\tstruct gpio_chip *gc = irq_data_get_irq_chip_data(data);\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tunsigned int trig = irqd_get_trigger_type(data);\n\tirq_hw_number_t pin = irqd_to_hwirq(data);\n\tint src, slot;\n\n\t \n\tsrc = keembay_find_free_src(kpc, trig);\n\tslot = keembay_find_free_slot(kpc, src);\n\n\tif (src < 0 || slot < 0)\n\t\treturn;\n\n\tif (trig & KEEMBAY_GPIO_SENSE_LOW)\n\t\tkeembay_gpio_invert(kpc, pin);\n\n\tkeembay_gpio_set_irq(kpc, src, slot, pin);\n}\n\nstatic void keembay_gpio_irq_ack(struct irq_data *data)\n{\n\t \n}\n\nstatic void keembay_gpio_irq_disable(struct irq_data *data)\n{\n\tstruct gpio_chip *gc = irq_data_get_irq_chip_data(data);\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\tirq_hw_number_t pin = irqd_to_hwirq(data);\n\tunsigned long reg, clump = 0, pos = 0;\n\tunsigned int src;\n\n\tfor (src = 0; src < KEEMBAY_GPIO_NUM_IRQ; src++) {\n\t\treg = keembay_read_reg(kpc->base1 + KEEMBAY_GPIO_INT_CFG, src);\n\t\tfor_each_set_clump8(pos, clump, &reg, BITS_PER_TYPE(typeof(reg))) {\n\t\t\tif ((clump & ~KEEMBAY_GPIO_IRQ_ENABLE) == pin) {\n\t\t\t\tkeembay_gpio_clear_irq(data, pos, src, pin);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\nstatic int keembay_gpio_irq_set_type(struct irq_data *data, unsigned int type)\n{\n\tstruct gpio_chip *gc = irq_data_get_irq_chip_data(data);\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(gc);\n\n\t \n\tif (!kpc->max_gpios_edge_type && (type & IRQ_TYPE_EDGE_BOTH))\n\t\ttype = IRQ_TYPE_EDGE_RISING;\n\n\tif (!kpc->max_gpios_level_type && (type & IRQ_TYPE_LEVEL_MASK))\n\t\ttype = IRQ_TYPE_NONE;\n\n\tif (type & IRQ_TYPE_EDGE_BOTH)\n\t\tirq_set_handler_locked(data, handle_edge_irq);\n\telse if (type & IRQ_TYPE_LEVEL_MASK)\n\t\tirq_set_handler_locked(data, handle_level_irq);\n\telse\n\t\treturn -EINVAL;\n\n\treturn 0;\n}\n\nstatic int keembay_gpio_add_pin_ranges(struct gpio_chip *chip)\n{\n\tstruct keembay_pinctrl *kpc = gpiochip_get_data(chip);\n\tint ret;\n\n\tret = gpiochip_add_pin_range(chip, dev_name(kpc->dev), 0, 0, chip->ngpio);\n\tif (ret)\n\t\tdev_err_probe(kpc->dev, ret, \"failed to add GPIO pin range\\n\");\n\treturn ret;\n}\n\nstatic struct irq_chip keembay_gpio_irqchip = {\n\t.name = \"keembay-gpio\",\n\t.irq_enable = keembay_gpio_irq_enable,\n\t.irq_disable = keembay_gpio_irq_disable,\n\t.irq_set_type = keembay_gpio_irq_set_type,\n\t.irq_ack = keembay_gpio_irq_ack,\n};\n\nstatic int keembay_gpiochip_probe(struct keembay_pinctrl *kpc,\n\t\t\t\t  struct platform_device *pdev)\n{\n\tunsigned int i, level_line = 0, edge_line = 0;\n\tstruct gpio_chip *gc = &kpc->chip;\n\tstruct gpio_irq_chip *girq;\n\n\t \n\tgirq\t\t\t= &kpc->chip.irq;\n\tgirq->chip\t\t= &keembay_gpio_irqchip;\n\tgirq->parent_handler\t= keembay_gpio_irq_handler;\n\tgirq->num_parents\t= KEEMBAY_GPIO_NUM_IRQ;\n\tgirq->parents\t\t= devm_kcalloc(kpc->dev, girq->num_parents,\n\t\t\t\t\t       sizeof(*girq->parents), GFP_KERNEL);\n\n\tif (!girq->parents)\n\t\treturn -ENOMEM;\n\n\t \n\tgc->label\t\t= dev_name(kpc->dev);\n\tgc->parent\t\t= kpc->dev;\n\tgc->request\t\t= gpiochip_generic_request;\n\tgc->free\t\t= gpiochip_generic_free;\n\tgc->get_direction\t= keembay_gpio_get_direction;\n\tgc->direction_input\t= keembay_gpio_set_direction_in;\n\tgc->direction_output\t= keembay_gpio_set_direction_out;\n\tgc->get\t\t\t= keembay_gpio_get;\n\tgc->set\t\t\t= keembay_gpio_set;\n\tgc->set_config\t\t= gpiochip_generic_config;\n\tgc->base\t\t= -1;\n\tgc->ngpio\t\t= kpc->npins;\n\tgc->add_pin_ranges\t= keembay_gpio_add_pin_ranges;\n\n\tfor (i = 0; i < KEEMBAY_GPIO_NUM_IRQ; i++) {\n\t\tstruct keembay_gpio_irq *kmb_irq = &kpc->irq[i];\n\t\tint irq;\n\n\t\tirq = platform_get_irq_optional(pdev, i);\n\t\tif (irq <= 0)\n\t\t\tcontinue;\n\n\t\tgirq->parents[i]\t= irq;\n\t\tkmb_irq->line\t= girq->parents[i];\n\t\tkmb_irq->source\t= i;\n\t\tkmb_irq->trigger\t= irq_get_trigger_type(girq->parents[i]);\n\t\tkmb_irq->num_share\t= 0;\n\n\t\tif (kmb_irq->trigger == IRQ_TYPE_LEVEL_HIGH)\n\t\t\tlevel_line++;\n\t\telse\n\t\t\tedge_line++;\n\t}\n\n\tkpc->max_gpios_level_type = level_line * KEEMBAY_GPIO_MAX_PER_IRQ;\n\tkpc->max_gpios_edge_type = edge_line * KEEMBAY_GPIO_MAX_PER_IRQ;\n\n\tgirq->default_type = IRQ_TYPE_NONE;\n\tgirq->handler = handle_bad_irq;\n\n\treturn devm_gpiochip_add_data(kpc->dev, gc, kpc);\n}\n\nstatic int keembay_build_groups(struct keembay_pinctrl *kpc)\n{\n\tstruct group_desc *grp;\n\tunsigned int i;\n\n\tkpc->ngroups = kpc->npins;\n\tgrp = devm_kcalloc(kpc->dev, kpc->ngroups, sizeof(*grp), GFP_KERNEL);\n\tif (!grp)\n\t\treturn -ENOMEM;\n\n\t \n\tfor (i = 0; i < kpc->ngroups; i++) {\n\t\tconst struct pinctrl_pin_desc *pdesc = keembay_pins + i;\n\t\tstruct group_desc *kmb_grp = grp + i;\n\n\t\tkmb_grp->name = pdesc->name;\n\t\tkmb_grp->pins = (int *)&pdesc->number;\n\t\tpinctrl_generic_add_group(kpc->pctrl, kmb_grp->name,\n\t\t\t\t\t  kmb_grp->pins, 1, NULL);\n\t}\n\n\treturn 0;\n}\n\nstatic int keembay_pinctrl_reg(struct keembay_pinctrl *kpc,  struct device *dev)\n{\n\tint ret;\n\n\tkeembay_pinctrl_desc.pins = keembay_pins;\n\tret = of_property_read_u32(dev->of_node, \"ngpios\", &kpc->npins);\n\tif (ret < 0)\n\t\treturn ret;\n\tkeembay_pinctrl_desc.npins = kpc->npins;\n\n\tkpc->pctrl = devm_pinctrl_register(kpc->dev, &keembay_pinctrl_desc, kpc);\n\n\treturn PTR_ERR_OR_ZERO(kpc->pctrl);\n}\n\nstatic int keembay_add_functions(struct keembay_pinctrl *kpc,\n\t\t\t\t struct function_desc *functions)\n{\n\tunsigned int i;\n\n\t \n\tfor (i = 0; i < kpc->nfuncs; i++) {\n\t\tstruct function_desc *func = &functions[i];\n\t\tconst char **group_names;\n\t\tunsigned int grp_idx = 0;\n\t\tint j;\n\n\t\tgroup_names = devm_kcalloc(kpc->dev, func->num_group_names,\n\t\t\t\t\t   sizeof(*group_names), GFP_KERNEL);\n\t\tif (!group_names)\n\t\t\treturn -ENOMEM;\n\n\t\tfor (j = 0; j < kpc->npins; j++) {\n\t\t\tconst struct pinctrl_pin_desc *pdesc = &keembay_pins[j];\n\t\t\tstruct keembay_mux_desc *mux;\n\n\t\t\tfor (mux = pdesc->drv_data; mux->name; mux++) {\n\t\t\t\tif (!strcmp(mux->name, func->name))\n\t\t\t\t\tgroup_names[grp_idx++] = pdesc->name;\n\t\t\t}\n\t\t}\n\n\t\tfunc->group_names = group_names;\n\t}\n\n\t \n\tfor (i = 0; i < kpc->nfuncs; i++) {\n\t\tpinmux_generic_add_function(kpc->pctrl,\n\t\t\t\t\t    functions[i].name,\n\t\t\t\t\t    functions[i].group_names,\n\t\t\t\t\t    functions[i].num_group_names,\n\t\t\t\t\t    functions[i].data);\n\t}\n\n\treturn 0;\n}\n\nstatic int keembay_build_functions(struct keembay_pinctrl *kpc)\n{\n\tstruct function_desc *keembay_funcs, *new_funcs;\n\tint i;\n\n\t \n\tkpc->nfuncs = 0;\n\tkeembay_funcs = kcalloc(kpc->npins * 8, sizeof(*keembay_funcs), GFP_KERNEL);\n\tif (!keembay_funcs)\n\t\treturn -ENOMEM;\n\n\t \n\tfor (i = 0; i < kpc->npins; i++) {\n\t\tconst struct pinctrl_pin_desc *pdesc = keembay_pins + i;\n\t\tstruct keembay_mux_desc *mux;\n\n\t\tfor (mux = pdesc->drv_data; mux->name; mux++) {\n\t\t\tstruct function_desc *fdesc;\n\n\t\t\t \n\t\t\tfor (fdesc = keembay_funcs; fdesc->name; fdesc++) {\n\t\t\t\tif (!strcmp(mux->name, fdesc->name)) {\n\t\t\t\t\tfdesc->num_group_names++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t \n\t\t\tif (!fdesc->name) {\n\t\t\t\tfdesc->name = mux->name;\n\t\t\t\tfdesc->num_group_names = 1;\n\t\t\t\tfdesc->data = &mux->mode;\n\t\t\t\tkpc->nfuncs++;\n\t\t\t}\n\t\t}\n\t}\n\n\t \n\tnew_funcs = krealloc(keembay_funcs, kpc->nfuncs * sizeof(*new_funcs), GFP_KERNEL);\n\tif (!new_funcs) {\n\t\tkfree(keembay_funcs);\n\t\treturn -ENOMEM;\n\t}\n\n\treturn keembay_add_functions(kpc, new_funcs);\n}\n\nstatic const struct keembay_pin_soc keembay_data = {\n\t.pins    = keembay_pins,\n};\n\nstatic const struct of_device_id keembay_pinctrl_match[] = {\n\t{ .compatible = \"intel,keembay-pinctrl\", .data = &keembay_data },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, keembay_pinctrl_match);\n\nstatic int keembay_pinctrl_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tstruct keembay_pinctrl *kpc;\n\tint ret;\n\n\tkpc = devm_kzalloc(dev, sizeof(*kpc), GFP_KERNEL);\n\tif (!kpc)\n\t\treturn -ENOMEM;\n\n\tkpc->dev = dev;\n\tkpc->soc = device_get_match_data(dev);\n\n\tkpc->base0 = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(kpc->base0))\n\t\treturn PTR_ERR(kpc->base0);\n\n\tkpc->base1 = devm_platform_ioremap_resource(pdev, 1);\n\tif (IS_ERR(kpc->base1))\n\t\treturn PTR_ERR(kpc->base1);\n\n\traw_spin_lock_init(&kpc->lock);\n\n\tret = keembay_pinctrl_reg(kpc, dev);\n\tif (ret)\n\t\treturn ret;\n\n\tret = keembay_build_groups(kpc);\n\tif (ret)\n\t\treturn ret;\n\n\tret = keembay_build_functions(kpc);\n\tif (ret)\n\t\treturn ret;\n\n\tret = keembay_gpiochip_probe(kpc, pdev);\n\tif (ret)\n\t\treturn ret;\n\n\tplatform_set_drvdata(pdev, kpc);\n\n\treturn 0;\n}\n\nstatic struct platform_driver keembay_pinctrl_driver = {\n\t.probe = keembay_pinctrl_probe,\n\t.driver = {\n\t\t.name = \"keembay-pinctrl\",\n\t\t.of_match_table = keembay_pinctrl_match,\n\t},\n};\nmodule_platform_driver(keembay_pinctrl_driver);\n\nMODULE_AUTHOR(\"Muhammad Husaini Zulkifli <muhammad.husaini.zulkifli@intel.com>\");\nMODULE_AUTHOR(\"Vijayakannan Ayyathurai <vijayakannan.ayyathurai@intel.com>\");\nMODULE_AUTHOR(\"Lakshmi Sowjanya D <lakshmi.sowjanya.d@intel.com>\");\nMODULE_DESCRIPTION(\"Intel Keem Bay SoC pinctrl/GPIO driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}