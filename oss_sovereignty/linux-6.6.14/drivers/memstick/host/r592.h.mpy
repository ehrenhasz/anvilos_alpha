{
  "module_name": "r592.h",
  "hash_id": "4722bbe314fae3115a065a5564f0b49613d3875a6b2abf540034b13c57c8d6cf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/memstick/host/r592.h",
  "human_readable_source": " \n \n\n#ifndef R592_H\n\n#include <linux/memstick.h>\n#include <linux/spinlock.h>\n#include <linux/interrupt.h>\n#include <linux/workqueue.h>\n#include <linux/kfifo.h>\n#include <linux/ctype.h>\n\n \n#define R592_TPC_EXEC\t\t\t0x00\n#define R592_TPC_EXEC_LEN_SHIFT\t\t16\t\t \n#define R592_TPC_EXEC_BIG_FIFO\t\t(1 << 26)\t \n#define R592_TPC_EXEC_TPC_SHIFT\t\t28\t\t \n\n\n \n \n \n#define R592_SFIFO\t\t\t0x08\n\n\n \n#define R592_STATUS\t\t\t0x10\n\t\t\t\t\t\t\t \n#define R592_STATUS_P_CMDNACK\t\t(1 << 16)\t \n#define R592_STATUS_P_BREQ\t\t(1 << 17)\t \n#define R592_STATUS_P_INTERR\t\t(1 << 18)\t \n#define R592_STATUS_P_CED\t\t(1 << 19)\t \n\n\t\t\t\t\t\t\t \n#define R592_STATUS_SFIFO_FULL\t\t(1 << 20)\t \n#define R592_STATUS_SFIFO_EMPTY\t\t(1 << 21)\t \n\n\t\t\t\t\t\t\t \n#define R592_STATUS_SEND_ERR\t\t(1 << 24)\t \n#define R592_STATUS_RECV_ERR\t\t(1 << 25)\t \n\n\t\t\t\t\t\t\t \n#define R592_STATUS_RDY\t\t\t(1 << 28)\t \n#define R592_STATUS_CED\t\t\t(1 << 29)\t \n#define R592_STATUS_SFIFO_INPUT\t\t(1 << 30)\t \n\n#define R592_SFIFO_SIZE\t\t\t32\t\t \n#define R592_SFIFO_PACKET\t\t8\t\t \n\n \n#define R592_IO\t\t\t\t0x18\n#define\tR592_IO_16\t\t\t(1 << 16)\t \n#define\tR592_IO_18\t\t\t(1 << 18)\t \n#define\tR592_IO_SERIAL1\t\t\t(1 << 20)\t \n#define\tR592_IO_22\t\t\t(1 << 22)\t \n#define R592_IO_DIRECTION\t\t(1 << 24)\t \n#define\tR592_IO_26\t\t\t(1 << 26)\t \n#define\tR592_IO_SERIAL2\t\t\t(1 << 30)\t \n#define R592_IO_RESET\t\t\t(1 << 31)\t \n\n\n \n#define R592_POWER\t\t\t0x20\t\t \n#define R592_POWER_0\t\t\t(1 << 0)\t \n#define R592_POWER_1\t\t\t(1 << 1)\t \n#define R592_POWER_3\t\t\t(1 << 3)\t \n#define R592_POWER_20\t\t\t(1 << 5)\t \n\n \n#define R592_IO_MODE\t\t\t0x24\n#define R592_IO_MODE_SERIAL\t\t1\n#define R592_IO_MODE_PARALLEL\t\t3\n\n\n \n \n#define R592_REG_MSC\t\t\t0x28\n#define R592_REG_MSC_PRSNT\t\t(1 << 1)\t \n#define R592_REG_MSC_IRQ_INSERT\t\t(1 << 8)\t \n#define R592_REG_MSC_IRQ_REMOVE\t\t(1 << 9)\t \n#define R592_REG_MSC_FIFO_EMPTY\t\t(1 << 10)\t \n#define R592_REG_MSC_FIFO_DMA_DONE\t(1 << 11)\t \n\n#define R592_REG_MSC_FIFO_USER_ORN\t(1 << 12)\t \n#define R592_REG_MSC_FIFO_MISMATH\t(1 << 13)\t \n#define R592_REG_MSC_FIFO_DMA_ERR\t(1 << 14)\t \n#define R592_REG_MSC_LED\t\t(1 << 15)\t \n\n#define DMA_IRQ_ACK_MASK \\\n\t(R592_REG_MSC_FIFO_DMA_DONE | R592_REG_MSC_FIFO_DMA_ERR)\n\n#define DMA_IRQ_EN_MASK (DMA_IRQ_ACK_MASK << 16)\n\n#define IRQ_ALL_ACK_MASK 0x00007F00\n#define IRQ_ALL_EN_MASK (IRQ_ALL_ACK_MASK << 16)\n\n \n#define R592_FIFO_DMA\t\t\t0x2C\n\n \n#define R592_FIFO_PIO\t\t\t0x30\n#define R592_LFIFO_SIZE\t\t\t512\t\t \n\n\n \n#define R592_FIFO_DMA_SETTINGS\t\t0x34\n#define R592_FIFO_DMA_SETTINGS_EN\t(1 << 0)\t \n#define R592_FIFO_DMA_SETTINGS_DIR\t(1 << 1)\t \n#define R592_FIFO_DMA_SETTINGS_CAP\t(1 << 24)\t \n\n \n \n \n \n \n \n#define R592_REG38\t\t\t0x38\n#define R592_REG38_CHANGE\t\t(1 << 16)\t \n#define R592_REG38_DONE\t\t\t(1 << 20)\t \n#define R592_REG38_SHIFT\t\t17\n\n \n#define R592_REG_3C\t\t\t0x3C\n\nstruct r592_device {\n\tstruct pci_dev *pci_dev;\n\tstruct memstick_host\t*host;\t\t \n\tstruct memstick_request *req;\t\t \n\n\t \n\tvoid __iomem *mmio;\n\tint irq;\n\tspinlock_t irq_lock;\n\tspinlock_t io_thread_lock;\n\tstruct timer_list detect_timer;\n\n\tstruct task_struct *io_thread;\n\tbool parallel_mode;\n\n\tDECLARE_KFIFO(pio_fifo, u8, sizeof(u32));\n\n\t \n\tint dma_capable;\n\tint dma_error;\n\tstruct completion dma_done;\n\tvoid *dummy_dma_page;\n\tdma_addr_t dummy_dma_page_physical_address;\n\n};\n\n#define DRV_NAME \"r592\"\n\n\n#define message(format, ...) \\\n\tprintk(KERN_INFO DRV_NAME \": \" format \"\\n\", ## __VA_ARGS__)\n\n#define __dbg(level, format, ...) \\\n\tdo { \\\n\t\tif (debug >= level) \\\n\t\t\tprintk(KERN_DEBUG DRV_NAME \\\n\t\t\t\t\": \" format \"\\n\", ## __VA_ARGS__); \\\n\t} while (0)\n\n\n#define dbg(format, ...)\t\t__dbg(1, format, ## __VA_ARGS__)\n#define dbg_verbose(format, ...)\t__dbg(2, format, ## __VA_ARGS__)\n#define dbg_reg(format, ...)\t\t__dbg(3, format, ## __VA_ARGS__)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}