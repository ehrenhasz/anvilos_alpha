{
  "module_name": "iwpm_util.h",
  "hash_id": "c62920395d07ff21d92ef1d0b5087477dda69fca21fc11d4d99859bb5d76aad8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/core/iwpm_util.h",
  "human_readable_source": " \n#ifndef _IWPM_UTIL_H\n#define _IWPM_UTIL_H\n\n#include <linux/io.h>\n#include <linux/in.h>\n#include <linux/in6.h>\n#include <linux/spinlock.h>\n#include <linux/kernel.h>\n#include <linux/netdevice.h>\n#include <linux/delay.h>\n#include <linux/workqueue.h>\n#include <linux/mutex.h>\n#include <linux/jhash.h>\n#include <linux/kref.h>\n#include <net/netlink.h>\n#include <linux/errno.h>\n#include <rdma/iw_portmap.h>\n#include <rdma/rdma_netlink.h>\n\n\n#define IWPM_NL_RETRANS\t\t3\n#define IWPM_NL_TIMEOUT\t\t(10*HZ)\n#define IWPM_MAPINFO_SKB_COUNT\t20\n\n#define IWPM_PID_UNDEFINED     -1\n#define IWPM_PID_UNAVAILABLE   -2\n\n#define IWPM_REG_UNDEF          0x01\n#define IWPM_REG_VALID          0x02\n#define IWPM_REG_INCOMPL        0x04\n\nstruct iwpm_nlmsg_request {\n\tstruct list_head    inprocess_list;\n\t__u32               nlmsg_seq;\n\tvoid                *req_buffer;\n\tu8\t            nl_client;\n\tu8                  request_done;\n\tu16                 err_code;\n\tstruct semaphore    sem;\n\tstruct kref         kref;\n};\n\nstruct iwpm_mapping_info {\n\tstruct hlist_node hlist_node;\n\tstruct sockaddr_storage local_sockaddr;\n\tstruct sockaddr_storage mapped_sockaddr;\n\tu8     nl_client;\n\tu32    map_flags;\n};\n\nstruct iwpm_remote_info {\n\tstruct hlist_node hlist_node;\n\tstruct sockaddr_storage remote_sockaddr;\n\tstruct sockaddr_storage mapped_loc_sockaddr;\n\tstruct sockaddr_storage mapped_rem_sockaddr;\n\tu8     nl_client;\n};\n\nstruct iwpm_admin_data {\n\tatomic_t nlmsg_seq;\n\tu32      reg_list[RDMA_NL_NUM_CLIENTS];\n};\n\n \nstruct iwpm_nlmsg_request *iwpm_get_nlmsg_request(__u32 nlmsg_seq,\n\t\t\t\t\t\tu8 nl_client, gfp_t gfp);\n\n \nvoid iwpm_free_nlmsg_request(struct kref *kref);\n\n \nstruct iwpm_nlmsg_request *iwpm_find_nlmsg_request(__u32 echo_seq);\n\n \nint iwpm_wait_complete_req(struct iwpm_nlmsg_request *nlmsg_request);\n\n \nint iwpm_get_nlmsg_seq(void);\n\n \nvoid iwpm_add_remote_info(struct iwpm_remote_info *reminfo);\n\n \nu32 iwpm_check_registration(u8 nl_client, u32 reg);\n\n \nvoid iwpm_set_registration(u8 nl_client, u32 reg);\n\n \nu32 iwpm_get_registration(u8 nl_client);\n\n \nint iwpm_send_mapinfo(u8 nl_client, int iwpm_pid);\n\n \nint iwpm_mapinfo_available(void);\n\n \nint iwpm_compare_sockaddr(struct sockaddr_storage *a_sockaddr,\n\t\t\tstruct sockaddr_storage *b_sockaddr);\n\n \nstatic inline int iwpm_validate_nlmsg_attr(struct nlattr *nltb[],\n\t\t\t\t\t   int nla_count)\n{\n\tint i;\n\tfor (i = 1; i < nla_count; i++) {\n\t\tif (!nltb[i])\n\t\t\treturn -EINVAL;\n\t}\n\treturn 0;\n}\n\n \nstruct sk_buff *iwpm_create_nlmsg(u32 nl_op, struct nlmsghdr **nlh,\n\t\t\t\t\tint nl_client);\n\n \nint iwpm_parse_nlmsg(struct netlink_callback *cb, int policy_max,\n\t\t\t\tconst struct nla_policy *nlmsg_policy,\n\t\t\t\tstruct nlattr *nltb[], const char *msg_type);\n\n \nvoid iwpm_print_sockaddr(struct sockaddr_storage *sockaddr, char *msg);\n\n \nint iwpm_send_hello(u8 nl_client, int iwpm_pid, u16 abi_version);\nextern u16 iwpm_ulib_version;\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}