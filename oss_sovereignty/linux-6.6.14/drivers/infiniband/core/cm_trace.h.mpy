{
  "module_name": "cm_trace.h",
  "hash_id": "af4f41b5852626ac5a195aea8e825b4d313f4b8deeaabf98fb2cf5c852c2e208",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/core/cm_trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ib_cma\n\n#if !defined(_TRACE_IB_CMA_H) || defined(TRACE_HEADER_MULTI_READ)\n\n#define _TRACE_IB_CMA_H\n\n#include <linux/tracepoint.h>\n#include <rdma/ib_cm.h>\n#include <trace/misc/rdma.h>\n\n \n#define IB_CM_STATE_LIST\t\t\t\t\t\\\n\tib_cm_state(IDLE)\t\t\t\t\t\\\n\tib_cm_state(LISTEN)\t\t\t\t\t\\\n\tib_cm_state(REQ_SENT)\t\t\t\t\t\\\n\tib_cm_state(REQ_RCVD)\t\t\t\t\t\\\n\tib_cm_state(MRA_REQ_SENT)\t\t\t\t\\\n\tib_cm_state(MRA_REQ_RCVD)\t\t\t\t\\\n\tib_cm_state(REP_SENT)\t\t\t\t\t\\\n\tib_cm_state(REP_RCVD)\t\t\t\t\t\\\n\tib_cm_state(MRA_REP_SENT)\t\t\t\t\\\n\tib_cm_state(MRA_REP_RCVD)\t\t\t\t\\\n\tib_cm_state(ESTABLISHED)\t\t\t\t\\\n\tib_cm_state(DREQ_SENT)\t\t\t\t\t\\\n\tib_cm_state(DREQ_RCVD)\t\t\t\t\t\\\n\tib_cm_state(TIMEWAIT)\t\t\t\t\t\\\n\tib_cm_state(SIDR_REQ_SENT)\t\t\t\t\\\n\tib_cm_state_end(SIDR_REQ_RCVD)\n\n#undef  ib_cm_state\n#undef  ib_cm_state_end\n#define ib_cm_state(x)\t\tTRACE_DEFINE_ENUM(IB_CM_##x);\n#define ib_cm_state_end(x)\tTRACE_DEFINE_ENUM(IB_CM_##x);\n\nIB_CM_STATE_LIST\n\n#undef  ib_cm_state\n#undef  ib_cm_state_end\n#define ib_cm_state(x)\t\t{ IB_CM_##x, #x },\n#define ib_cm_state_end(x)\t{ IB_CM_##x, #x }\n\n#define show_ib_cm_state(x) \\\n\t\t__print_symbolic(x, IB_CM_STATE_LIST)\n\n \n#define IB_CM_LAP_STATE_LIST\t\t\t\t\t\\\n\tib_cm_lap_state(LAP_UNINIT)\t\t\t\t\\\n\tib_cm_lap_state(LAP_IDLE)\t\t\t\t\\\n\tib_cm_lap_state(LAP_SENT)\t\t\t\t\\\n\tib_cm_lap_state(LAP_RCVD)\t\t\t\t\\\n\tib_cm_lap_state(MRA_LAP_SENT)\t\t\t\t\\\n\tib_cm_lap_state_end(MRA_LAP_RCVD)\n\n#undef  ib_cm_lap_state\n#undef  ib_cm_lap_state_end\n#define ib_cm_lap_state(x)\tTRACE_DEFINE_ENUM(IB_CM_##x);\n#define ib_cm_lap_state_end(x)\tTRACE_DEFINE_ENUM(IB_CM_##x);\n\nIB_CM_LAP_STATE_LIST\n\n#undef  ib_cm_lap_state\n#undef  ib_cm_lap_state_end\n#define ib_cm_lap_state(x)\t{ IB_CM_##x, #x },\n#define ib_cm_lap_state_end(x)\t{ IB_CM_##x, #x }\n\n#define show_ib_cm_lap_state(x) \\\n\t\t__print_symbolic(x, IB_CM_LAP_STATE_LIST)\n\n \n#define IB_CM_REJ_REASON_LIST\t\t\t\t\t\\\n\tib_cm_rej_reason(REJ_NO_QP)\t\t\t\t\\\n\tib_cm_rej_reason(REJ_NO_EEC)\t\t\t\t\\\n\tib_cm_rej_reason(REJ_NO_RESOURCES)\t\t\t\\\n\tib_cm_rej_reason(REJ_TIMEOUT)\t\t\t\t\\\n\tib_cm_rej_reason(REJ_UNSUPPORTED)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_COMM_ID)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_COMM_INSTANCE)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_SERVICE_ID)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_TRANSPORT_TYPE)\t\t\\\n\tib_cm_rej_reason(REJ_STALE_CONN)\t\t\t\\\n\tib_cm_rej_reason(REJ_RDC_NOT_EXIST)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_GID)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_LID)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_SL)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_TRAFFIC_CLASS)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_HOP_LIMIT)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_PACKET_RATE)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_GID)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_LID)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_SL)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_TRAFFIC_CLASS)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_HOP_LIMIT)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_PACKET_RATE)\t\t\\\n\tib_cm_rej_reason(REJ_PORT_CM_REDIRECT)\t\t\t\\\n\tib_cm_rej_reason(REJ_PORT_REDIRECT)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_MTU)\t\t\t\\\n\tib_cm_rej_reason(REJ_INSUFFICIENT_RESP_RESOURCES)\t\\\n\tib_cm_rej_reason(REJ_CONSUMER_DEFINED)\t\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_RNR_RETRY)\t\t\t\\\n\tib_cm_rej_reason(REJ_DUPLICATE_LOCAL_COMM_ID)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_CLASS_VERSION)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_FLOW_LABEL)\t\t\\\n\tib_cm_rej_reason(REJ_INVALID_ALT_FLOW_LABEL)\t\t\\\n\tib_cm_rej_reason_end(REJ_VENDOR_OPTION_NOT_SUPPORTED)\n\n#undef  ib_cm_rej_reason\n#undef  ib_cm_rej_reason_end\n#define ib_cm_rej_reason(x)\tTRACE_DEFINE_ENUM(IB_CM_##x);\n#define ib_cm_rej_reason_end(x)\tTRACE_DEFINE_ENUM(IB_CM_##x);\n\nIB_CM_REJ_REASON_LIST\n\n#undef  ib_cm_rej_reason\n#undef  ib_cm_rej_reason_end\n#define ib_cm_rej_reason(x)\t{ IB_CM_##x, #x },\n#define ib_cm_rej_reason_end(x)\t{ IB_CM_##x, #x }\n\n#define show_ib_cm_rej_reason(x) \\\n\t\t__print_symbolic(x, IB_CM_REJ_REASON_LIST)\n\nDECLARE_EVENT_CLASS(icm_id_class,\n\tTP_PROTO(\n\t\tconst struct ib_cm_id *cm_id\n\t),\n\n\tTP_ARGS(cm_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(const void *, cm_id)\t \n\t\t__field(unsigned int, local_id)\n\t\t__field(unsigned int, remote_id)\n\t\t__field(unsigned long, state)\n\t\t__field(unsigned long, lap_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->cm_id = cm_id;\n\t\t__entry->local_id = be32_to_cpu(cm_id->local_id);\n\t\t__entry->remote_id = be32_to_cpu(cm_id->remote_id);\n\t\t__entry->state = cm_id->state;\n\t\t__entry->lap_state = cm_id->lap_state;\n\t),\n\n\tTP_printk(\"local_id=%u remote_id=%u state=%s lap_state=%s\",\n\t\t__entry->local_id, __entry->remote_id,\n\t\tshow_ib_cm_state(__entry->state),\n\t\tshow_ib_cm_lap_state(__entry->lap_state)\n\t)\n);\n\n#define DEFINE_CM_SEND_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(icm_id_class,\t\t\t\t\\\n\t\t\t\ticm_send_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tconst struct ib_cm_id *cm_id\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(cm_id))\n\nDEFINE_CM_SEND_EVENT(req);\nDEFINE_CM_SEND_EVENT(rep);\nDEFINE_CM_SEND_EVENT(dup_req);\nDEFINE_CM_SEND_EVENT(dup_rep);\nDEFINE_CM_SEND_EVENT(rtu);\nDEFINE_CM_SEND_EVENT(mra);\nDEFINE_CM_SEND_EVENT(sidr_req);\nDEFINE_CM_SEND_EVENT(sidr_rep);\nDEFINE_CM_SEND_EVENT(dreq);\nDEFINE_CM_SEND_EVENT(drep);\n\nTRACE_EVENT(icm_send_rej,\n\tTP_PROTO(\n\t\tconst struct ib_cm_id *cm_id,\n\t\tenum ib_cm_rej_reason reason\n\t),\n\n\tTP_ARGS(cm_id, reason),\n\n\tTP_STRUCT__entry(\n\t\t__field(const void *, cm_id)\n\t\t__field(u32, local_id)\n\t\t__field(u32, remote_id)\n\t\t__field(unsigned long, state)\n\t\t__field(unsigned long, reason)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->cm_id = cm_id;\n\t\t__entry->local_id = be32_to_cpu(cm_id->local_id);\n\t\t__entry->remote_id = be32_to_cpu(cm_id->remote_id);\n\t\t__entry->state = cm_id->state;\n\t\t__entry->reason = reason;\n\t),\n\n\tTP_printk(\"local_id=%u remote_id=%u state=%s reason=%s\",\n\t\t__entry->local_id, __entry->remote_id,\n\t\tshow_ib_cm_state(__entry->state),\n\t\tshow_ib_cm_rej_reason(__entry->reason)\n\t)\n);\n\n#define DEFINE_CM_ERR_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(icm_id_class,\t\t\t\t\\\n\t\t\t\ticm_##name##_err,\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tconst struct ib_cm_id *cm_id\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(cm_id))\n\nDEFINE_CM_ERR_EVENT(send_cm_rtu);\nDEFINE_CM_ERR_EVENT(establish);\nDEFINE_CM_ERR_EVENT(no_listener);\nDEFINE_CM_ERR_EVENT(send_drep);\nDEFINE_CM_ERR_EVENT(dreq_unknown);\nDEFINE_CM_ERR_EVENT(send_unknown_rej);\nDEFINE_CM_ERR_EVENT(rej_unknown);\nDEFINE_CM_ERR_EVENT(send_mra_unknown);\nDEFINE_CM_ERR_EVENT(mra_unknown);\nDEFINE_CM_ERR_EVENT(qp_init);\nDEFINE_CM_ERR_EVENT(qp_rtr);\nDEFINE_CM_ERR_EVENT(qp_rts);\n\nDEFINE_EVENT(icm_id_class,\t\t\t\t\t\t\\\n\ticm_dreq_skipped,\t\t\t\t\t\t\\\n\tTP_PROTO(\t\t\t\t\t\t\t\\\n\t\tconst struct ib_cm_id *cm_id\t\t\t\t\\\n\t),\t\t\t\t\t\t\t\t\\\n\tTP_ARGS(cm_id)\t\t\t\t\t\t\t\\\n);\n\nDECLARE_EVENT_CLASS(icm_local_class,\n\tTP_PROTO(\n\t\tunsigned int local_id,\n\t\tunsigned int remote_id\n\t),\n\n\tTP_ARGS(local_id, remote_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, local_id)\n\t\t__field(unsigned int, remote_id)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->local_id = local_id;\n\t\t__entry->remote_id = remote_id;\n\t),\n\n\tTP_printk(\"local_id=%u remote_id=%u\",\n\t\t__entry->local_id, __entry->remote_id\n\t)\n);\n\n#define DEFINE_CM_LOCAL_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(icm_local_class,\t\t\t\t\\\n\t\t\t\ticm_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tunsigned int local_id,\t\t\t\\\n\t\t\t\t\tunsigned int remote_id\t\t\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(local_id, remote_id))\n\nDEFINE_CM_LOCAL_EVENT(issue_rej);\nDEFINE_CM_LOCAL_EVENT(issue_drep);\nDEFINE_CM_LOCAL_EVENT(staleconn_err);\nDEFINE_CM_LOCAL_EVENT(no_priv_err);\n\nDECLARE_EVENT_CLASS(icm_remote_class,\n\tTP_PROTO(\n\t\tu32 remote_id\n\t),\n\n\tTP_ARGS(remote_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, remote_id)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->remote_id = remote_id;\n\t),\n\n\tTP_printk(\"remote_id=%u\",\n\t\t__entry->remote_id\n\t)\n);\n\n#define DEFINE_CM_REMOTE_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(icm_remote_class,\t\t\t\t\\\n\t\t\t\ticm_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tu32 remote_id\t\t\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(remote_id))\n\nDEFINE_CM_REMOTE_EVENT(remote_no_priv_err);\nDEFINE_CM_REMOTE_EVENT(insert_failed_err);\n\nTRACE_EVENT(icm_send_rep_err,\n\tTP_PROTO(\n\t\t__be32 local_id,\n\t\tenum ib_cm_state state\n\t),\n\n\tTP_ARGS(local_id, state),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, local_id)\n\t\t__field(unsigned long, state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->local_id = be32_to_cpu(local_id);\n\t\t__entry->state = state;\n\t),\n\n\tTP_printk(\"local_id=%u state=%s\",\n\t\t__entry->local_id, show_ib_cm_state(__entry->state)\n\t)\n);\n\nTRACE_EVENT(icm_rep_unknown_err,\n\tTP_PROTO(\n\t\tunsigned int local_id,\n\t\tunsigned int remote_id,\n\t\tenum ib_cm_state state\n\t),\n\n\tTP_ARGS(local_id, remote_id, state),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, local_id)\n\t\t__field(unsigned int, remote_id)\n\t\t__field(unsigned long, state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->local_id = local_id;\n\t\t__entry->remote_id = remote_id;\n\t\t__entry->state = state;\n\t),\n\n\tTP_printk(\"local_id=%u remote_id=%u state=%s\",\n\t\t__entry->local_id, __entry->remote_id,\n\t\tshow_ib_cm_state(__entry->state)\n\t)\n);\n\nTRACE_EVENT(icm_handler_err,\n\tTP_PROTO(\n\t\tenum ib_cm_event_type event\n\t),\n\n\tTP_ARGS(event),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, event)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->event = event;\n\t),\n\n\tTP_printk(\"unhandled event=%s\",\n\t\trdma_show_ib_cm_event(__entry->event)\n\t)\n);\n\nTRACE_EVENT(icm_mad_send_err,\n\tTP_PROTO(\n\t\tenum ib_cm_state state,\n\t\tenum ib_wc_status wc_status\n\t),\n\n\tTP_ARGS(state, wc_status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__field(unsigned long, wc_status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state = state;\n\t\t__entry->wc_status = wc_status;\n\t),\n\n\tTP_printk(\"state=%s completion status=%s\",\n\t\tshow_ib_cm_state(__entry->state),\n\t\trdma_show_wc_status(__entry->wc_status)\n\t)\n);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH ../../drivers/infiniband/core\n#define TRACE_INCLUDE_FILE cm_trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}