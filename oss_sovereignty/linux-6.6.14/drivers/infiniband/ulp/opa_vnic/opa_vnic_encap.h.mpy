{
  "module_name": "opa_vnic_encap.h",
  "hash_id": "096e8431d934d6963311d886c4e4032e796f5c4130d1507344df483f74adf260",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/ulp/opa_vnic/opa_vnic_encap.h",
  "human_readable_source": "#ifndef _OPA_VNIC_ENCAP_H\n#define _OPA_VNIC_ENCAP_H\n \n\n \n\n#include <linux/types.h>\n#include <rdma/ib_mad.h>\n\n \n#define OPA_EMA_CLASS_VERSION               0x80\n\n \n#define OPA_MGMT_CLASS_INTEL_EMA            0x34\n\n \n#define OPA_EM_ATTR_CLASS_PORT_INFO                 0x0001\n#define OPA_EM_ATTR_VESWPORT_INFO                   0x0011\n#define OPA_EM_ATTR_VESWPORT_MAC_ENTRIES            0x0012\n#define OPA_EM_ATTR_IFACE_UCAST_MACS                0x0013\n#define OPA_EM_ATTR_IFACE_MCAST_MACS                0x0014\n#define OPA_EM_ATTR_DELETE_VESW                     0x0015\n#define OPA_EM_ATTR_VESWPORT_SUMMARY_COUNTERS       0x0020\n#define OPA_EM_ATTR_VESWPORT_ERROR_COUNTERS         0x0022\n\n \n#define OPA_VNIC_STATE_DROP_ALL        0x1\n#define OPA_VNIC_STATE_FORWARDING      0x3\n\n#define OPA_VESW_MAX_NUM_DEF_PORT   16\n#define OPA_VNIC_MAX_NUM_PCP        8\n\n#define OPA_VNIC_EMA_DATA    (OPA_MGMT_MAD_SIZE - IB_MGMT_VENDOR_HDR)\n\n \n#define OPA_INTEL_EMA_NOTICE_TYPE_INFO 0x04\n\n \n#define INTEL_OUI_1 0x00\n#define INTEL_OUI_2 0x06\n#define INTEL_OUI_3 0x6a\n\n \n#define OPA_VESWPORT_TRAP_IFACE_UCAST_MAC_CHANGE 0x1\n#define OPA_VESWPORT_TRAP_IFACE_MCAST_MAC_CHANGE 0x2\n#define OPA_VESWPORT_TRAP_ETH_LINK_STATUS_CHANGE 0x3\n\n#define OPA_VNIC_DLID_SD_IS_SRC_MAC(dlid_sd)  (!!((dlid_sd) & 0x20))\n#define OPA_VNIC_DLID_SD_GET_DLID(dlid_sd)    ((dlid_sd) >> 8)\n\n \n#define OPA_VNIC_ETH_LINK_UP     1\n#define OPA_VNIC_ETH_LINK_DOWN   2\n\n \n#define OPA_VNIC_ENCAP_RC_DEFAULT   0\n#define OPA_VNIC_ENCAP_RC_IPV4      4\n#define OPA_VNIC_ENCAP_RC_IPV4_UDP  8\n#define OPA_VNIC_ENCAP_RC_IPV4_TCP  12\n#define OPA_VNIC_ENCAP_RC_IPV6      16\n#define OPA_VNIC_ENCAP_RC_IPV6_TCP  20\n#define OPA_VNIC_ENCAP_RC_IPV6_UDP  24\n\n#define OPA_VNIC_ENCAP_RC_EXT(w, b) (((w) >> OPA_VNIC_ENCAP_RC_ ## b) & 0x7)\n\n \nstruct opa_vesw_info {\n\t__be16  fabric_id;\n\t__be16  vesw_id;\n\n\tu8      rsvd0[6];\n\t__be16  def_port_mask;\n\n\tu8      rsvd1[2];\n\t__be16  pkey;\n\n\tu8      rsvd2[4];\n\t__be32  u_mcast_dlid;\n\t__be32  u_ucast_dlid[OPA_VESW_MAX_NUM_DEF_PORT];\n\n\t__be32  rc;\n\n\tu8      rsvd3[56];\n\t__be16  eth_mtu;\n\tu8      rsvd4[2];\n} __packed;\n\n \nstruct opa_per_veswport_info {\n\t__be32  port_num;\n\n\tu8      eth_link_status;\n\tu8      rsvd0[3];\n\n\tu8      base_mac_addr[ETH_ALEN];\n\tu8      config_state;\n\tu8      oper_state;\n\n\t__be16  max_mac_tbl_ent;\n\t__be16  max_smac_ent;\n\t__be32  mac_tbl_digest;\n\tu8      rsvd1[4];\n\n\t__be32  encap_slid;\n\n\tu8      pcp_to_sc_uc[OPA_VNIC_MAX_NUM_PCP];\n\tu8      pcp_to_vl_uc[OPA_VNIC_MAX_NUM_PCP];\n\tu8      pcp_to_sc_mc[OPA_VNIC_MAX_NUM_PCP];\n\tu8      pcp_to_vl_mc[OPA_VNIC_MAX_NUM_PCP];\n\n\tu8      non_vlan_sc_uc;\n\tu8      non_vlan_vl_uc;\n\tu8      non_vlan_sc_mc;\n\tu8      non_vlan_vl_mc;\n\n\tu8      rsvd2[48];\n\n\t__be16  uc_macs_gen_count;\n\t__be16  mc_macs_gen_count;\n\n\tu8      rsvd3[8];\n} __packed;\n\n \nstruct opa_veswport_info {\n\tstruct opa_vesw_info          vesw;\n\tstruct opa_per_veswport_info  vport;\n};\n\n \nstruct opa_veswport_mactable_entry {\n\tu8      mac_addr[ETH_ALEN];\n\tu8      mac_addr_mask[ETH_ALEN];\n\t__be32  dlid_sd;\n} __packed;\n\n \nstruct opa_veswport_mactable {\n\t__be16                              offset;\n\t__be16                              num_entries;\n\t__be32                              mac_tbl_digest;\n\tstruct opa_veswport_mactable_entry  tbl_entries[];\n} __packed;\n\n \nstruct opa_veswport_summary_counters {\n\t__be16  vp_instance;\n\t__be16  vesw_id;\n\t__be32  veswport_num;\n\n\t__be64  tx_errors;\n\t__be64  rx_errors;\n\t__be64  tx_packets;\n\t__be64  rx_packets;\n\t__be64  tx_bytes;\n\t__be64  rx_bytes;\n\n\t__be64  tx_unicast;\n\t__be64  tx_mcastbcast;\n\n\t__be64  tx_untagged;\n\t__be64  tx_vlan;\n\n\t__be64  tx_64_size;\n\t__be64  tx_65_127;\n\t__be64  tx_128_255;\n\t__be64  tx_256_511;\n\t__be64  tx_512_1023;\n\t__be64  tx_1024_1518;\n\t__be64  tx_1519_max;\n\n\t__be64  rx_unicast;\n\t__be64  rx_mcastbcast;\n\n\t__be64  rx_untagged;\n\t__be64  rx_vlan;\n\n\t__be64  rx_64_size;\n\t__be64  rx_65_127;\n\t__be64  rx_128_255;\n\t__be64  rx_256_511;\n\t__be64  rx_512_1023;\n\t__be64  rx_1024_1518;\n\t__be64  rx_1519_max;\n\n\t__be64  reserved[16];\n} __packed;\n\n \nstruct opa_veswport_error_counters {\n\t__be16  vp_instance;\n\t__be16  vesw_id;\n\t__be32  veswport_num;\n\n\t__be64  tx_errors;\n\t__be64  rx_errors;\n\n\t__be64  rsvd0;\n\t__be64  tx_smac_filt;\n\t__be64  rsvd1;\n\t__be64  rsvd2;\n\t__be64  rsvd3;\n\t__be64  tx_dlid_zero;\n\t__be64  rsvd4;\n\t__be64  tx_logic;\n\t__be64  rsvd5;\n\t__be64  tx_drop_state;\n\n\t__be64  rx_bad_veswid;\n\t__be64  rsvd6;\n\t__be64  rx_runt;\n\t__be64  rx_oversize;\n\t__be64  rsvd7;\n\t__be64  rx_eth_down;\n\t__be64  rx_drop_state;\n\t__be64  rx_logic;\n\t__be64  rsvd8;\n\n\t__be64  rsvd9[16];\n} __packed;\n\n \nstruct opa_veswport_trap {\n\t__be16  fabric_id;\n\t__be16  veswid;\n\t__be32  veswportnum;\n\t__be16  opaportnum;\n\tu8      veswportindex;\n\tu8      opcode;\n\t__be32  reserved;\n} __packed;\n\n \nstruct opa_vnic_iface_mac_entry {\n\tu8 mac_addr[ETH_ALEN];\n};\n\n \nstruct opa_veswport_iface_macs {\n\t__be16 start_idx;\n\t__be16 num_macs_in_msg;\n\t__be16 tot_macs_in_lst;\n\t__be16 gen_count;\n\tstruct opa_vnic_iface_mac_entry entry[];\n} __packed;\n\n \nstruct opa_vnic_vema_mad {\n\tstruct ib_mad_hdr  mad_hdr;\n\tstruct ib_rmpp_hdr rmpp_hdr;\n\tu8                 reserved;\n\tu8                 oui[3];\n\tu8                 data[OPA_VNIC_EMA_DATA];\n};\n\n \nstruct opa_vnic_notice_attr {\n\tu8     gen_type;\n\tu8     oui_1;\n\tu8     oui_2;\n\tu8     oui_3;\n\t__be16 trap_num;\n\t__be16 toggle_count;\n\t__be32 issuer_lid;\n\t__be32 reserved;\n\tu8     issuer_gid[16];\n\tu8     raw_data[64];\n} __packed;\n\n \nstruct opa_vnic_vema_mad_trap {\n\tstruct ib_mad_hdr            mad_hdr;\n\tstruct ib_rmpp_hdr           rmpp_hdr;\n\tu8                           reserved;\n\tu8                           oui[3];\n\tstruct opa_vnic_notice_attr  notice;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}