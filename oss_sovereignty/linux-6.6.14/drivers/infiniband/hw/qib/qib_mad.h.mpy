{
  "module_name": "qib_mad.h",
  "hash_id": "4d2626a0a23bc52adfa5b1a700181fd21739ea4065d17583b73e5c90d22ce969",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/qib/qib_mad.h",
  "human_readable_source": " \n#ifndef _QIB_MAD_H\n#define _QIB_MAD_H\n\n#include <rdma/ib_pma.h>\n\n#define IB_SMP_UNSUP_VERSION \\\ncpu_to_be16(IB_MGMT_MAD_STATUS_BAD_VERSION)\n\n#define IB_SMP_UNSUP_METHOD \\\ncpu_to_be16(IB_MGMT_MAD_STATUS_UNSUPPORTED_METHOD)\n\n#define IB_SMP_UNSUP_METH_ATTR \\\ncpu_to_be16(IB_MGMT_MAD_STATUS_UNSUPPORTED_METHOD_ATTRIB)\n\n#define IB_SMP_INVALID_FIELD \\\ncpu_to_be16(IB_MGMT_MAD_STATUS_INVALID_ATTRIB_VALUE)\n\n#define IB_VLARB_LOWPRI_0_31    1\n#define IB_VLARB_LOWPRI_32_63   2\n#define IB_VLARB_HIGHPRI_0_31   3\n#define IB_VLARB_HIGHPRI_32_63  4\n\n#define IB_PMA_PORT_COUNTERS_CONG       cpu_to_be16(0xFF00)\n\nstruct ib_pma_portcounters_cong {\n\tu8 reserved;\n\tu8 reserved1;\n\t__be16 port_check_rate;\n\t__be16 symbol_error_counter;\n\tu8 link_error_recovery_counter;\n\tu8 link_downed_counter;\n\t__be16 port_rcv_errors;\n\t__be16 port_rcv_remphys_errors;\n\t__be16 port_rcv_switch_relay_errors;\n\t__be16 port_xmit_discards;\n\tu8 port_xmit_constraint_errors;\n\tu8 port_rcv_constraint_errors;\n\tu8 reserved2;\n\tu8 link_overrun_errors;  \n\t__be16 reserved3;\n\t__be16 vl15_dropped;\n\t__be64 port_xmit_data;\n\t__be64 port_rcv_data;\n\t__be64 port_xmit_packets;\n\t__be64 port_rcv_packets;\n\t__be64 port_xmit_wait;\n\t__be64 port_adr_events;\n} __packed;\n\n#define IB_PMA_CONG_HW_CONTROL_TIMER            0x00\n#define IB_PMA_CONG_HW_CONTROL_SAMPLE           0x01\n\n#define QIB_XMIT_RATE_UNSUPPORTED               0x0\n#define QIB_XMIT_RATE_PICO                      0x7\n \n#define QIB_CONG_TIMER_PSINTERVAL               0x1DCD64EC\n\n#define IB_PMA_SEL_CONG_ALL                     0x01\n#define IB_PMA_SEL_CONG_PORT_DATA               0x02\n#define IB_PMA_SEL_CONG_XMIT                    0x04\n#define IB_PMA_SEL_CONG_ROUTING                 0x08\n\n \n#define IB_CC_ATTR_CLASSPORTINFO\t\t\tcpu_to_be16(0x0001)\n#define IB_CC_ATTR_NOTICE\t\t\t\tcpu_to_be16(0x0002)\n#define IB_CC_ATTR_CONGESTION_INFO\t\t\tcpu_to_be16(0x0011)\n#define IB_CC_ATTR_CONGESTION_KEY_INFO\t\t\tcpu_to_be16(0x0012)\n#define IB_CC_ATTR_CONGESTION_LOG\t\t\tcpu_to_be16(0x0013)\n#define IB_CC_ATTR_SWITCH_CONGESTION_SETTING\t\tcpu_to_be16(0x0014)\n#define IB_CC_ATTR_SWITCH_PORT_CONGESTION_SETTING\tcpu_to_be16(0x0015)\n#define IB_CC_ATTR_CA_CONGESTION_SETTING\t\tcpu_to_be16(0x0016)\n#define IB_CC_ATTR_CONGESTION_CONTROL_TABLE\t\tcpu_to_be16(0x0017)\n#define IB_CC_ATTR_TIME_STAMP\t\t\t\tcpu_to_be16(0x0018)\n\n \n#define IB_CC_THRESHOLD_NONE 0x0\n#define IB_CC_THRESHOLD_MIN  0x1\n#define IB_CC_THRESHOLD_MAX  0xf\n\n \n#define IB_CC_MAD_LOGDATA_LEN 32\n#define IB_CC_MAD_MGMTDATA_LEN 192\n\nstruct ib_cc_mad {\n\tu8\tbase_version;\n\tu8\tmgmt_class;\n\tu8\tclass_version;\n\tu8\tmethod;\n\t__be16\tstatus;\n\t__be16\tclass_specific;\n\t__be64\ttid;\n\t__be16\tattr_id;\n\t__be16\tresv;\n\t__be32\tattr_mod;\n\t__be64 cckey;\n\n\t \n\tu8 log_data[IB_CC_MAD_LOGDATA_LEN];\n\n\tu8 mgmt_data[IB_CC_MAD_MGMTDATA_LEN];\n} __packed;\n\n \n#define IB_CC_CPI_CM_TRAP_GEN\t\tcpu_to_be16(1 << 0)\n#define IB_CC_CPI_CM_GET_SET_NOTICE\tcpu_to_be16(1 << 1)\n#define IB_CC_CPI_CM_CAP2\t\tcpu_to_be16(1 << 2)\n#define IB_CC_CPI_CM_ENHANCEDPORT0_CC\tcpu_to_be16(1 << 8)\n\nstruct ib_cc_classportinfo_attr {\n\tu8 base_version;\n\tu8 class_version;\n\t__be16 cap_mask;\n\tu8 reserved[3];\n\tu8 resp_time_value;      \n\tunion ib_gid redirect_gid;\n\t__be32 redirect_tc_sl_fl;        \n\t__be16 redirect_lid;\n\t__be16 redirect_pkey;\n\t__be32 redirect_qp;      \n\t__be32 redirect_qkey;\n\tunion ib_gid trap_gid;\n\t__be32 trap_tc_sl_fl;    \n\t__be16 trap_lid;\n\t__be16 trap_pkey;\n\t__be32 trap_hl_qp;       \n\t__be32 trap_qkey;\n} __packed;\n\n \n#define IB_CC_TRAP_KEY_VIOLATION 0x0000\n\nstruct ib_cc_trap_key_violation_attr {\n\t__be16 source_lid;\n\tu8 method;\n\tu8 reserved1;\n\t__be16 attrib_id;\n\t__be32 attrib_mod;\n\t__be32 qp;\n\t__be64 cckey;\n\tu8 sgid[16];\n\tu8 padding[24];\n} __packed;\n\n \n#define IB_CC_CI_FLAGS_CREDIT_STARVATION 0x1\n#define IB_CC_TABLE_CAP_DEFAULT 31\n\nstruct ib_cc_info_attr {\n\t__be16 congestion_info;\n\tu8  control_table_cap;  \n} __packed;\n\nstruct ib_cc_key_info_attr {\n\t__be64 cckey;\n\tu8  protect;\n\t__be16 lease_period;\n\t__be16 violations;\n} __packed;\n\n#define IB_CC_CL_CA_LOGEVENTS_LEN 208\n\nstruct ib_cc_log_attr {\n\tu8 log_type;\n\tu8 congestion_flags;\n\t__be16 threshold_event_counter;\n\t__be16 threshold_congestion_event_map;\n\t__be16 current_time_stamp;\n\tu8 log_events[IB_CC_CL_CA_LOGEVENTS_LEN];\n} __packed;\n\n#define IB_CC_CLEC_SERVICETYPE_RC 0x0\n#define IB_CC_CLEC_SERVICETYPE_UC 0x1\n#define IB_CC_CLEC_SERVICETYPE_RD 0x2\n#define IB_CC_CLEC_SERVICETYPE_UD 0x3\n\nstruct ib_cc_log_event {\n\tu8 local_qp_cn_entry;\n\tu8 remote_qp_number_cn_entry[3];\n\tu8  sl_cn_entry:4;\n\tu8  service_type_cn_entry:4;\n\t__be32 remote_lid_cn_entry;\n\t__be32 timestamp_cn_entry;\n} __packed;\n\n \n#define IB_CC_CCS_ENTRIES 16\n\n \n#define IB_CC_CCS_PC_SL_BASED 0x01\n\nstruct ib_cc_congestion_entry {\n\tu8 ccti_increase;\n\t__be16 ccti_timer;\n\tu8 trigger_threshold;\n\tu8 ccti_min;  \n} __packed;\n\nstruct ib_cc_congestion_entry_shadow {\n\tu8 ccti_increase;\n\tu16 ccti_timer;\n\tu8 trigger_threshold;\n\tu8 ccti_min;  \n} __packed;\n\nstruct ib_cc_congestion_setting_attr {\n\t__be16 port_control;\n\t__be16 control_map;\n\tstruct ib_cc_congestion_entry entries[IB_CC_CCS_ENTRIES];\n} __packed;\n\nstruct ib_cc_congestion_setting_attr_shadow {\n\tu16 port_control;\n\tu16 control_map;\n\tstruct ib_cc_congestion_entry_shadow entries[IB_CC_CCS_ENTRIES];\n} __packed;\n\n#define IB_CC_TABLE_ENTRY_INCREASE_DEFAULT 1\n#define IB_CC_TABLE_ENTRY_TIMER_DEFAULT 1\n\n \n#define IB_CCT_ENTRIES 64\n#define IB_CCT_MIN_ENTRIES (IB_CCT_ENTRIES * 2)\n\nstruct ib_cc_table_entry {\n\t__be16 entry;  \n};\n\nstruct ib_cc_table_entry_shadow {\n\tu16 entry;  \n};\n\nstruct ib_cc_table_attr {\n\t__be16 ccti_limit;  \n\tstruct ib_cc_table_entry ccti_entries[IB_CCT_ENTRIES];\n} __packed;\n\nstruct ib_cc_table_attr_shadow {\n\tu16 ccti_limit;  \n\tstruct ib_cc_table_entry_shadow ccti_entries[IB_CCT_ENTRIES];\n} __packed;\n\n#define CC_TABLE_SHADOW_MAX \\\n\t(IB_CC_TABLE_CAP_DEFAULT * IB_CCT_ENTRIES)\n\nstruct cc_table_shadow {\n\tu16 ccti_last_entry;\n\tstruct ib_cc_table_entry_shadow entries[CC_TABLE_SHADOW_MAX];\n} __packed;\n\n \n#define COUNTER_MASK(q, n) (q << ((9 - n) * 3))\n#define COUNTER_MASK0_9 \\\n\tcpu_to_be32(COUNTER_MASK(1, 0) | \\\n\t\t    COUNTER_MASK(1, 1) | \\\n\t\t    COUNTER_MASK(1, 2) | \\\n\t\t    COUNTER_MASK(1, 3) | \\\n\t\t    COUNTER_MASK(1, 4))\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}