{
  "module_name": "qp.h",
  "hash_id": "fa4e1592f72fb02502d0242a42107305cfae7bf32b3fd16ecca62a4e2a6d8370",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/hfi1/qp.h",
  "human_readable_source": " \n \n\n#ifndef _QP_H\n#define _QP_H\n#include <linux/hash.h>\n#include <rdma/rdmavt_qp.h>\n#include \"verbs.h\"\n#include \"sdma.h\"\n#include \"verbs_txreq.h\"\n\nextern unsigned int hfi1_qp_table_size;\n\nextern const struct rvt_operation_params hfi1_post_parms[];\n\n \n#define HFI1_S_AHG_VALID         0x80000000\n#define HFI1_S_AHG_CLEAR         0x40000000\n#define HFI1_S_WAIT_PIO_DRAIN    0x20000000\n#define HFI1_S_WAIT_TID_SPACE    0x10000000\n#define HFI1_S_WAIT_TID_RESP     0x08000000\n#define HFI1_S_WAIT_HALT         0x04000000\n#define HFI1_S_MIN_BIT_MASK      0x01000000\n\n \n\n#define HFI1_S_ANY_WAIT_IO (RVT_S_ANY_WAIT_IO | HFI1_S_WAIT_PIO_DRAIN)\n#define HFI1_S_ANY_WAIT (HFI1_S_ANY_WAIT_IO | RVT_S_ANY_WAIT_SEND)\n#define HFI1_S_ANY_TID_WAIT_SEND (RVT_S_WAIT_SSN_CREDIT | RVT_S_WAIT_DMA)\n\n \nstatic inline int hfi1_send_ok(struct rvt_qp *qp)\n{\n\tstruct hfi1_qp_priv *priv = qp->priv;\n\n\treturn !(qp->s_flags & (RVT_S_BUSY | HFI1_S_ANY_WAIT_IO)) &&\n\t\t(verbs_txreq_queued(iowait_get_ib_work(&priv->s_iowait)) ||\n\t\t(qp->s_flags & RVT_S_RESP_PENDING) ||\n\t\t !(qp->s_flags & RVT_S_ANY_WAIT_SEND));\n}\n\n \nstatic inline void clear_ahg(struct rvt_qp *qp)\n{\n\tstruct hfi1_qp_priv *priv = qp->priv;\n\n\tpriv->s_ahg->ahgcount = 0;\n\tqp->s_flags &= ~(HFI1_S_AHG_VALID | HFI1_S_AHG_CLEAR);\n\tif (priv->s_sde && qp->s_ahgidx >= 0)\n\t\tsdma_ahg_free(priv->s_sde, qp->s_ahgidx);\n\tqp->s_ahgidx = -1;\n}\n\n \nvoid hfi1_qp_wakeup(struct rvt_qp *qp, u32 flag);\n\nstruct sdma_engine *qp_to_sdma_engine(struct rvt_qp *qp, u8 sc5);\nstruct send_context *qp_to_send_context(struct rvt_qp *qp, u8 sc5);\n\nvoid qp_iter_print(struct seq_file *s, struct rvt_qp_iter *iter);\n\nbool _hfi1_schedule_send(struct rvt_qp *qp);\nbool hfi1_schedule_send(struct rvt_qp *qp);\n\nvoid hfi1_migrate_qp(struct rvt_qp *qp);\n\n \nvoid *qp_priv_alloc(struct rvt_dev_info *rdi, struct rvt_qp *qp);\nvoid qp_priv_free(struct rvt_dev_info *rdi, struct rvt_qp *qp);\nunsigned free_all_qps(struct rvt_dev_info *rdi);\nvoid notify_qp_reset(struct rvt_qp *qp);\nint get_pmtu_from_attr(struct rvt_dev_info *rdi, struct rvt_qp *qp,\n\t\t       struct ib_qp_attr *attr);\nvoid flush_qp_waiters(struct rvt_qp *qp);\nvoid notify_error_qp(struct rvt_qp *qp);\nvoid stop_send_queue(struct rvt_qp *qp);\nvoid quiesce_qp(struct rvt_qp *qp);\nu32 mtu_from_qp(struct rvt_dev_info *rdi, struct rvt_qp *qp, u32 pmtu);\nint mtu_to_path_mtu(u32 mtu);\nvoid hfi1_error_port_qps(struct hfi1_ibport *ibp, u8 sl);\nvoid hfi1_qp_unbusy(struct rvt_qp *qp, struct iowait_work *wait);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}