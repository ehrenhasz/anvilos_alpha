{
  "module_name": "qsfp.h",
  "hash_id": "f1457977bc7396ef52c0c96bb96973b49d97b51af61dc1d11e2c4e34e82f061f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/hfi1/qsfp.h",
  "human_readable_source": " \n \n \n\n#define QSFP_DEV 0xA0\n#define QSFP_PWR_LAG_MSEC 2000\n#define QSFP_MODPRS_LAG_MSEC 20\n \n#define QSFP_MAX_NUM_PAGES\t5\n\n \n#define QSFP_HFI0_I2CCLK    BIT(0)\n#define QSFP_HFI0_I2CDAT    BIT(1)\n#define QSFP_HFI0_RESET_N   BIT(2)\n#define QSFP_HFI0_INT_N\t    BIT(3)\n#define QSFP_HFI0_MODPRST_N BIT(4)\n\n \n#define QSFP_PAGESIZE 256\n \n#define QSFP_RW_BOUNDARY 128\n\n \n#define __QSFP_OFFSET_SIZE 1                            \n#define QSFP_OFFSET_SIZE (__QSFP_OFFSET_SIZE << 8)      \n\n \n \n \n#define QSFP_MONITOR_VAL_START 22\n#define QSFP_MONITOR_VAL_END 81\n#define QSFP_MONITOR_RANGE (QSFP_MONITOR_VAL_END - QSFP_MONITOR_VAL_START + 1)\n#define QSFP_TX_CTRL_BYTE_OFFS 86\n#define QSFP_PWR_CTRL_BYTE_OFFS 93\n#define QSFP_CDR_CTRL_BYTE_OFFS 98\n\n#define QSFP_PAGE_SELECT_BYTE_OFFS 127\n \n#define QSFP_MOD_ID_OFFS 128\n \n#define QSFP_MOD_PWR_OFFS 129\n \n \n \n \n#define QSFP_NOM_BIT_RATE_100_OFFS 140\n \n \n \n#define QSFP_MOD_LEN_OFFS 146\n \n#define QSFP_MOD_TECH_OFFS 147\nextern const char *const hfi1_qsfp_devtech[16];\n \n#define QSFP_IS_ACTIVE(tech) ((0xA2FF >> ((tech) >> 4)) & 1)\n \n#define QSFP_IS_ACTIVE_FAR(tech) ((0x32FF >> ((tech) >> 4)) & 1)\n \n#define QSFP_HAS_ATTEN(tech) ((0x4D00 >> ((tech) >> 4)) & 1)\n \n#define QSFP_IS_CU(tech) ((0xED00 >> ((tech) >> 4)) & 1)\n#define QSFP_TECH_1490 9\n\n#define QSFP_OUI(oui) (((unsigned)oui[0] << 16) | ((unsigned)oui[1] << 8) | \\\n\t\t\toui[2])\n#define QSFP_OUI_AMPHENOL 0x415048\n#define QSFP_OUI_FINISAR  0x009065\n#define QSFP_OUI_GORE     0x002177\n\n \n#define QSFP_VEND_OFFS 148\n#define QSFP_VEND_LEN 16\n \n#define QSFP_IBXCV_OFFS 164\n \n#define QSFP_VOUI_OFFS 165\n#define QSFP_VOUI_LEN 3\n \n#define QSFP_PN_OFFS 168\n#define QSFP_PN_LEN 16\n \n#define QSFP_REV_OFFS 184\n#define QSFP_REV_LEN 2\n \n#define QSFP_ATTEN_OFFS 186\n#define QSFP_ATTEN_LEN 2\n \n#define QSFP_CU_ATTEN_7G_OFFS 188\n#define QSFP_CU_ATTEN_12G_OFFS 189\n \n \n#define QSFP_CC_OFFS 191\n#define QSFP_EQ_INFO_OFFS 193\n#define QSFP_CDR_INFO_OFFS 194\n \n#define QSFP_SN_OFFS 196\n#define QSFP_SN_LEN 16\n \n#define QSFP_DATE_OFFS 212\n#define QSFP_DATE_LEN 6\n \n#define QSFP_LOT_OFFS 218\n#define QSFP_LOT_LEN 2\n \n \n#define QSFP_NOM_BIT_RATE_250_OFFS 222\n \n#define QSFP_CC_EXT_OFFS 223\n\n \n#define QSFP_DATA_NOT_READY\t\t0x01\n\n#define QSFP_HIGH_TEMP_ALARM\t\t0x80\n#define QSFP_LOW_TEMP_ALARM\t\t0x40\n#define QSFP_HIGH_TEMP_WARNING\t\t0x20\n#define QSFP_LOW_TEMP_WARNING\t\t0x10\n\n#define QSFP_HIGH_VCC_ALARM\t\t0x80\n#define QSFP_LOW_VCC_ALARM\t\t0x40\n#define QSFP_HIGH_VCC_WARNING\t\t0x20\n#define QSFP_LOW_VCC_WARNING\t\t0x10\n\n#define QSFP_HIGH_POWER_ALARM\t\t0x88\n#define QSFP_LOW_POWER_ALARM\t\t0x44\n#define QSFP_HIGH_POWER_WARNING\t\t0x22\n#define QSFP_LOW_POWER_WARNING\t\t0x11\n\n#define QSFP_HIGH_BIAS_ALARM\t\t0x88\n#define QSFP_LOW_BIAS_ALARM\t\t0x44\n#define QSFP_HIGH_BIAS_WARNING\t\t0x22\n#define QSFP_LOW_BIAS_WARNING\t\t0x11\n\n#define QSFP_ATTEN_SDR(attenarray) (attenarray[0])\n#define QSFP_ATTEN_DDR(attenarray) (attenarray[1])\n\n \nstruct qsfp_data {\n\t \n\tstruct hfi1_pportdata *ppd;\n\tstruct work_struct qsfp_work;\n\tu8 cache[QSFP_MAX_NUM_PAGES * 128];\n\t \n\tspinlock_t qsfp_lock;\n\tu8 check_interrupt_flags;\n\tu8 reset_needed;\n\tu8 limiting_active;\n\tu8 cache_valid;\n\tu8 cache_refresh_required;\n};\n\nint refresh_qsfp_cache(struct hfi1_pportdata *ppd,\n\t\t       struct qsfp_data *cp);\nint get_qsfp_power_class(u8 power_byte);\nint qsfp_mod_present(struct hfi1_pportdata *ppd);\nint get_cable_info(struct hfi1_devdata *dd, u32 port_num, u32 addr,\n\t\t   u32 len, u8 *data);\n\nint i2c_write(struct hfi1_pportdata *ppd, u32 target, int i2c_addr,\n\t      int offset, void *bp, int len);\nint i2c_read(struct hfi1_pportdata *ppd, u32 target, int i2c_addr,\n\t     int offset, void *bp, int len);\nint qsfp_write(struct hfi1_pportdata *ppd, u32 target, int addr, void *bp,\n\t       int len);\nint qsfp_read(struct hfi1_pportdata *ppd, u32 target, int addr, void *bp,\n\t      int len);\nint one_qsfp_write(struct hfi1_pportdata *ppd, u32 target, int addr, void *bp,\n\t\t   int len);\nint one_qsfp_read(struct hfi1_pportdata *ppd, u32 target, int addr, void *bp,\n\t\t  int len);\nstruct hfi1_asic_data;\nint set_up_i2c(struct hfi1_devdata *dd, struct hfi1_asic_data *ad);\nvoid clean_up_i2c(struct hfi1_devdata *dd, struct hfi1_asic_data *ad);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}