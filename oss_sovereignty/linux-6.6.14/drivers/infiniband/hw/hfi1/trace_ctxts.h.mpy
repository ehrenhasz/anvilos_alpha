{
  "module_name": "trace_ctxts.h",
  "hash_id": "7533dd827d8b47648e154465af8eaaa8aa3b6c536bd24afacfadc60d940eb438",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/hfi1/trace_ctxts.h",
  "human_readable_source": " \n \n\n#if !defined(__HFI1_TRACE_CTXTS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __HFI1_TRACE_CTXTS_H\n\n#include <linux/tracepoint.h>\n#include <linux/trace_seq.h>\n\n#include \"hfi.h\"\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM hfi1_ctxts\n\n#define UCTXT_FMT \\\n\t\"cred:%u, credaddr:0x%llx, piobase:0x%p, rcvhdr_cnt:%u, \"\t\\\n\t\"rcvbase:0x%llx, rcvegrc:%u, rcvegrb:0x%llx, subctxt_cnt:%u\"\nTRACE_EVENT(hfi1_uctxtdata,\n\t    TP_PROTO(struct hfi1_devdata *dd, struct hfi1_ctxtdata *uctxt,\n\t\t     unsigned int subctxt),\n\t    TP_ARGS(dd, uctxt, subctxt),\n\t    TP_STRUCT__entry(DD_DEV_ENTRY(dd)\n\t\t\t     __field(unsigned int, ctxt)\n\t\t\t     __field(unsigned int, subctxt)\n\t\t\t     __field(u32, credits)\n\t\t\t     __field(u64, hw_free)\n\t\t\t     __field(void __iomem *, piobase)\n\t\t\t     __field(u16, rcvhdrq_cnt)\n\t\t\t     __field(u64, rcvhdrq_dma)\n\t\t\t     __field(u32, eager_cnt)\n\t\t\t     __field(u64, rcvegr_dma)\n\t\t\t     __field(unsigned int, subctxt_cnt)\n\t\t\t     ),\n\t    TP_fast_assign(DD_DEV_ASSIGN(dd);\n\t\t\t   __entry->ctxt = uctxt->ctxt;\n\t\t\t   __entry->subctxt = subctxt;\n\t\t\t   __entry->credits = uctxt->sc->credits;\n\t\t\t   __entry->hw_free = le64_to_cpu(*uctxt->sc->hw_free);\n\t\t\t   __entry->piobase = uctxt->sc->base_addr;\n\t\t\t   __entry->rcvhdrq_cnt = get_hdrq_cnt(uctxt);\n\t\t\t   __entry->rcvhdrq_dma = uctxt->rcvhdrq_dma;\n\t\t\t   __entry->eager_cnt = uctxt->egrbufs.alloced;\n\t\t\t   __entry->rcvegr_dma = uctxt->egrbufs.rcvtids[0].dma;\n\t\t\t   __entry->subctxt_cnt = uctxt->subctxt_cnt;\n\t\t\t   ),\n\t    TP_printk(\"[%s] ctxt %u:%u \" UCTXT_FMT,\n\t\t      __get_str(dev),\n\t\t      __entry->ctxt,\n\t\t      __entry->subctxt,\n\t\t      __entry->credits,\n\t\t      __entry->hw_free,\n\t\t      __entry->piobase,\n\t\t      __entry->rcvhdrq_cnt,\n\t\t      __entry->rcvhdrq_dma,\n\t\t      __entry->eager_cnt,\n\t\t      __entry->rcvegr_dma,\n\t\t      __entry->subctxt_cnt\n\t\t      )\n);\n\n#define CINFO_FMT \\\n\t\"egrtids:%u, egr_size:%u, hdrq_cnt:%u, hdrq_size:%u, sdma_ring_size:%u\"\nTRACE_EVENT(hfi1_ctxt_info,\n\t    TP_PROTO(struct hfi1_devdata *dd, unsigned int ctxt,\n\t\t     unsigned int subctxt,\n\t\t     struct hfi1_ctxt_info *cinfo),\n\t    TP_ARGS(dd, ctxt, subctxt, cinfo),\n\t    TP_STRUCT__entry(DD_DEV_ENTRY(dd)\n\t\t\t     __field(unsigned int, ctxt)\n\t\t\t     __field(unsigned int, subctxt)\n\t\t\t     __field(u16, egrtids)\n\t\t\t     __field(u16, rcvhdrq_cnt)\n\t\t\t     __field(u16, rcvhdrq_size)\n\t\t\t     __field(u16, sdma_ring_size)\n\t\t\t     __field(u32, rcvegr_size)\n\t\t\t     ),\n\t    TP_fast_assign(DD_DEV_ASSIGN(dd);\n\t\t\t    __entry->ctxt = ctxt;\n\t\t\t    __entry->subctxt = subctxt;\n\t\t\t    __entry->egrtids = cinfo->egrtids;\n\t\t\t    __entry->rcvhdrq_cnt = cinfo->rcvhdrq_cnt;\n\t\t\t    __entry->rcvhdrq_size = cinfo->rcvhdrq_entsize;\n\t\t\t    __entry->sdma_ring_size = cinfo->sdma_ring_size;\n\t\t\t    __entry->rcvegr_size = cinfo->rcvegr_size;\n\t\t\t    ),\n\t    TP_printk(\"[%s] ctxt %u:%u \" CINFO_FMT,\n\t\t      __get_str(dev),\n\t\t      __entry->ctxt,\n\t\t      __entry->subctxt,\n\t\t      __entry->egrtids,\n\t\t      __entry->rcvegr_size,\n\t\t      __entry->rcvhdrq_cnt,\n\t\t      __entry->rcvhdrq_size,\n\t\t      __entry->sdma_ring_size\n\t\t      )\n);\n\nconst char *hfi1_trace_print_rsm_hist(struct trace_seq *p, unsigned int ctxt);\nTRACE_EVENT(ctxt_rsm_hist,\n\t    TP_PROTO(unsigned int ctxt),\n\t    TP_ARGS(ctxt),\n\t    TP_STRUCT__entry(__field(unsigned int, ctxt)),\n\t    TP_fast_assign(__entry->ctxt = ctxt;),\n\t    TP_printk(\"%s\", hfi1_trace_print_rsm_hist(p, __entry->ctxt))\n);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE trace_ctxts\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}