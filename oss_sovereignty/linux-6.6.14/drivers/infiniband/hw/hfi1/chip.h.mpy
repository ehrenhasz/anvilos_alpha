{
  "module_name": "chip.h",
  "hash_id": "4c48d4fdc84549b4bc3975b36569cdc68c75df6e41d3e7773dcd925980d33e57",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/hfi1/chip.h",
  "human_readable_source": " \n \n\n#ifndef _CHIP_H\n#define _CHIP_H\n \n\n \n#define BITS_PER_REGISTER (BITS_PER_BYTE * sizeof(u64))\n#define NUM_INTERRUPT_SOURCES 768\n#define RXE_NUM_CONTEXTS 160\n#define RXE_PER_CONTEXT_SIZE 0x1000\t \n#define RXE_NUM_TID_FLOWS 32\n#define RXE_NUM_DATA_VL 8\n#define TXE_NUM_CONTEXTS 160\n#define TXE_NUM_SDMA_ENGINES 16\n#define NUM_CONTEXTS_PER_SET 8\n#define VL_ARB_HIGH_PRIO_TABLE_SIZE 16\n#define VL_ARB_LOW_PRIO_TABLE_SIZE 16\n#define VL_ARB_TABLE_SIZE 16\n#define TXE_NUM_32_BIT_COUNTER 7\n#define TXE_NUM_64_BIT_COUNTER 30\n#define TXE_NUM_DATA_VL 8\n#define TXE_PIO_SIZE (32 * 0x100000)\t \n#define PIO_BLOCK_SIZE 64\t\t\t \n#define SDMA_BLOCK_SIZE 64\t\t\t \n#define RCV_BUF_BLOCK_SIZE 64                \n#define PIO_CMASK 0x7ff\t \n#define MAX_EAGER_ENTRIES    2048\t \n#define MAX_TID_PAIR_ENTRIES 1024\t \n \n#define CM_VAU 3\n \n#define CM_GLOBAL_CREDITS 0x880\n \n#define MAX_PKEY_VALUES 16\n\n#include \"chip_registers.h\"\n\n#define RXE_PER_CONTEXT_USER   (RXE + RXE_PER_CONTEXT_OFFSET)\n#define TXE_PIO_SEND (TXE + TXE_PIO_SEND_OFFSET)\n\n \n#define PBC_INTR\t\tBIT_ULL(31)\n#define PBC_DC_INFO_SHIFT\t(30)\n#define PBC_DC_INFO\t\tBIT_ULL(PBC_DC_INFO_SHIFT)\n#define PBC_TEST_EBP\t\tBIT_ULL(29)\n#define PBC_PACKET_BYPASS\tBIT_ULL(28)\n#define PBC_CREDIT_RETURN\tBIT_ULL(25)\n#define PBC_INSERT_BYPASS_ICRC\tBIT_ULL(24)\n#define PBC_TEST_BAD_ICRC\tBIT_ULL(23)\n#define PBC_FECN\t\tBIT_ULL(22)\n\n \n#define PBC_IHCRC_LKDETH 0x0\t \n#define PBC_IHCRC_GKDETH 0x1\t \n#define PBC_IHCRC_NONE   0x2\t \n\n \n#define PBC_STATIC_RATE_CONTROL_COUNT_SHIFT 32\n#define PBC_STATIC_RATE_CONTROL_COUNT_MASK 0xffffull\n#define PBC_STATIC_RATE_CONTROL_COUNT_SMASK \\\n\t(PBC_STATIC_RATE_CONTROL_COUNT_MASK << \\\n\tPBC_STATIC_RATE_CONTROL_COUNT_SHIFT)\n\n#define PBC_INSERT_HCRC_SHIFT 26\n#define PBC_INSERT_HCRC_MASK 0x3ull\n#define PBC_INSERT_HCRC_SMASK \\\n\t(PBC_INSERT_HCRC_MASK << PBC_INSERT_HCRC_SHIFT)\n\n#define PBC_VL_SHIFT 12\n#define PBC_VL_MASK 0xfull\n#define PBC_VL_SMASK (PBC_VL_MASK << PBC_VL_SHIFT)\n\n#define PBC_LENGTH_DWS_SHIFT 0\n#define PBC_LENGTH_DWS_MASK 0xfffull\n#define PBC_LENGTH_DWS_SMASK \\\n\t(PBC_LENGTH_DWS_MASK << PBC_LENGTH_DWS_SHIFT)\n\n \n#define CR_COUNTER_SHIFT 0\n#define CR_COUNTER_MASK 0x7ffull\n#define CR_COUNTER_SMASK (CR_COUNTER_MASK << CR_COUNTER_SHIFT)\n\n#define CR_STATUS_SHIFT 11\n#define CR_STATUS_MASK 0x1ull\n#define CR_STATUS_SMASK (CR_STATUS_MASK << CR_STATUS_SHIFT)\n\n#define CR_CREDIT_RETURN_DUE_TO_PBC_SHIFT 12\n#define CR_CREDIT_RETURN_DUE_TO_PBC_MASK 0x1ull\n#define CR_CREDIT_RETURN_DUE_TO_PBC_SMASK \\\n\t(CR_CREDIT_RETURN_DUE_TO_PBC_MASK << \\\n\tCR_CREDIT_RETURN_DUE_TO_PBC_SHIFT)\n\n#define CR_CREDIT_RETURN_DUE_TO_THRESHOLD_SHIFT 13\n#define CR_CREDIT_RETURN_DUE_TO_THRESHOLD_MASK 0x1ull\n#define CR_CREDIT_RETURN_DUE_TO_THRESHOLD_SMASK \\\n\t(CR_CREDIT_RETURN_DUE_TO_THRESHOLD_MASK << \\\n\tCR_CREDIT_RETURN_DUE_TO_THRESHOLD_SHIFT)\n\n#define CR_CREDIT_RETURN_DUE_TO_ERR_SHIFT 14\n#define CR_CREDIT_RETURN_DUE_TO_ERR_MASK 0x1ull\n#define CR_CREDIT_RETURN_DUE_TO_ERR_SMASK \\\n\t(CR_CREDIT_RETURN_DUE_TO_ERR_MASK << \\\n\tCR_CREDIT_RETURN_DUE_TO_ERR_SHIFT)\n\n#define CR_CREDIT_RETURN_DUE_TO_FORCE_SHIFT 15\n#define CR_CREDIT_RETURN_DUE_TO_FORCE_MASK 0x1ull\n#define CR_CREDIT_RETURN_DUE_TO_FORCE_SMASK \\\n\t(CR_CREDIT_RETURN_DUE_TO_FORCE_MASK << \\\n\tCR_CREDIT_RETURN_DUE_TO_FORCE_SHIFT)\n\n \n#define CCE_ERR_INT\t\t  0\n#define RXE_ERR_INT\t\t  1\n#define MISC_ERR_INT\t\t  2\n#define PIO_ERR_INT\t\t  4\n#define SDMA_ERR_INT\t\t  5\n#define EGRESS_ERR_INT\t\t  6\n#define TXE_ERR_INT\t\t  7\n#define PBC_INT\t\t\t240\n#define GPIO_ASSERT_INT\t\t241\n#define QSFP1_INT\t\t242\n#define QSFP2_INT\t\t243\n#define TCRIT_INT\t\t244\n\n \n#define IS_FIRST_SOURCE\t\tCCE_ERR_INT\n#define IS_GENERAL_ERR_START\t\t  0\n#define IS_SDMAENG_ERR_START\t\t 16\n#define IS_SENDCTXT_ERR_START\t\t 32\n#define IS_SDMA_START\t\t\t192\n#define IS_SDMA_PROGRESS_START\t\t208\n#define IS_SDMA_IDLE_START\t\t224\n#define IS_VARIOUS_START\t\t240\n#define IS_DC_START\t\t\t248\n#define IS_RCVAVAIL_START\t\t256\n#define IS_RCVURGENT_START\t\t416\n#define IS_SENDCREDIT_START\t\t576\n#define IS_RESERVED_START\t\t736\n#define IS_LAST_SOURCE\t\t\t767\n\n \n#define IS_GENERAL_ERR_END\t\t7\n#define IS_SDMAENG_ERR_END\t\t31\n#define IS_SENDCTXT_ERR_END\t\t191\n#define IS_SDMA_END                     207\n#define IS_SDMA_PROGRESS_END            223\n#define IS_SDMA_IDLE_END\t\t239\n#define IS_VARIOUS_END\t\t\t244\n#define IS_DC_END\t\t\t255\n#define IS_RCVAVAIL_END\t\t\t415\n#define IS_RCVURGENT_END\t\t575\n#define IS_SENDCREDIT_END\t\t735\n#define IS_RESERVED_END\t\t\tIS_LAST_SOURCE\n\n \n#define LSTATE_DOWN    0x1\n#define LSTATE_INIT    0x2\n#define LSTATE_ARMED   0x3\n#define LSTATE_ACTIVE  0x4\n\n \n#define LCB_RX_FPE_TX_FPE_INTO_RESET   (DCC_CFG_RESET_RESET_LCB    | \\\n\t\t\t\t\tDCC_CFG_RESET_RESET_TX_FPE | \\\n\t\t\t\t\tDCC_CFG_RESET_RESET_RX_FPE | \\\n\t\t\t\t\tDCC_CFG_RESET_ENABLE_CCLK_BCC)\n\t\t\t\t\t \n\n#define LCB_RX_FPE_TX_FPE_OUT_OF_RESET  DCC_CFG_RESET_ENABLE_CCLK_BCC  \n\n \n#define PLS_DISABLED\t\t\t   0x30\n#define PLS_OFFLINE\t\t\t\t   0x90\n#define PLS_OFFLINE_QUIET\t\t\t   0x90\n#define PLS_OFFLINE_PLANNED_DOWN_INFORM\t   0x91\n#define PLS_OFFLINE_READY_TO_QUIET_LT\t   0x92\n#define PLS_OFFLINE_REPORT_FAILURE\t\t   0x93\n#define PLS_OFFLINE_READY_TO_QUIET_BCC\t   0x94\n#define PLS_OFFLINE_QUIET_DURATION\t   0x95\n#define PLS_POLLING\t\t\t\t   0x20\n#define PLS_POLLING_QUIET\t\t\t   0x20\n#define PLS_POLLING_ACTIVE\t\t\t   0x21\n#define PLS_CONFIGPHY\t\t\t   0x40\n#define PLS_CONFIGPHY_DEBOUCE\t\t   0x40\n#define PLS_CONFIGPHY_ESTCOMM\t\t   0x41\n#define PLS_CONFIGPHY_ESTCOMM_TXRX_HUNT\t   0x42\n#define PLS_CONFIGPHY_ESTCOMM_LOCAL_COMPLETE   0x43\n#define PLS_CONFIGPHY_OPTEQ\t\t\t   0x44\n#define PLS_CONFIGPHY_OPTEQ_OPTIMIZING\t   0x44\n#define PLS_CONFIGPHY_OPTEQ_LOCAL_COMPLETE\t   0x45\n#define PLS_CONFIGPHY_VERIFYCAP\t\t   0x46\n#define PLS_CONFIGPHY_VERIFYCAP_EXCHANGE\t   0x46\n#define PLS_CONFIGPHY_VERIFYCAP_LOCAL_COMPLETE 0x47\n#define PLS_CONFIGLT\t\t\t   0x48\n#define PLS_CONFIGLT_CONFIGURE\t\t   0x48\n#define PLS_CONFIGLT_LINK_TRANSFER_ACTIVE\t   0x49\n#define PLS_LINKUP\t\t\t\t   0x50\n#define PLS_PHYTEST\t\t\t\t   0xB0\n#define PLS_INTERNAL_SERDES_LOOPBACK\t   0xe1\n#define PLS_QUICK_LINKUP\t\t\t   0xe2\n\n \n#define HCMD_LOAD_CONFIG_DATA  0x01\n#define HCMD_READ_CONFIG_DATA  0x02\n#define HCMD_CHANGE_PHY_STATE  0x03\n#define HCMD_SEND_LCB_IDLE_MSG 0x04\n#define HCMD_MISC\t\t   0x05\n#define HCMD_READ_LCB_IDLE_MSG 0x06\n#define HCMD_READ_LCB_CSR      0x07\n#define HCMD_WRITE_LCB_CSR     0x08\n#define HCMD_INTERFACE_TEST\t   0xff\n\n \n#define HCMD_SUCCESS 2\n\n \n#define SPICO_ROM_FAILED\t\tBIT(0)\n#define UNKNOWN_FRAME\t\t\tBIT(1)\n#define TARGET_BER_NOT_MET\t\tBIT(2)\n#define FAILED_SERDES_INTERNAL_LOOPBACK\tBIT(3)\n#define FAILED_SERDES_INIT\t\tBIT(4)\n#define FAILED_LNI_POLLING\t\tBIT(5)\n#define FAILED_LNI_DEBOUNCE\t\tBIT(6)\n#define FAILED_LNI_ESTBCOMM\t\tBIT(7)\n#define FAILED_LNI_OPTEQ\t\tBIT(8)\n#define FAILED_LNI_VERIFY_CAP1\t\tBIT(9)\n#define FAILED_LNI_VERIFY_CAP2\t\tBIT(10)\n#define FAILED_LNI_CONFIGLT\t\tBIT(11)\n#define HOST_HANDSHAKE_TIMEOUT\t\tBIT(12)\n#define EXTERNAL_DEVICE_REQ_TIMEOUT\tBIT(13)\n\n#define FAILED_LNI (FAILED_LNI_POLLING | FAILED_LNI_DEBOUNCE \\\n\t\t\t| FAILED_LNI_ESTBCOMM | FAILED_LNI_OPTEQ \\\n\t\t\t| FAILED_LNI_VERIFY_CAP1 \\\n\t\t\t| FAILED_LNI_VERIFY_CAP2 \\\n\t\t\t| FAILED_LNI_CONFIGLT | HOST_HANDSHAKE_TIMEOUT \\\n\t\t\t| EXTERNAL_DEVICE_REQ_TIMEOUT)\n\n \n#define HOST_REQ_DONE\t\tBIT(0)\n#define BC_PWR_MGM_MSG\t\tBIT(1)\n#define BC_SMA_MSG\t\tBIT(2)\n#define BC_BCC_UNKNOWN_MSG\tBIT(3)\n#define BC_IDLE_UNKNOWN_MSG\tBIT(4)\n#define EXT_DEVICE_CFG_REQ\tBIT(5)\n#define VERIFY_CAP_FRAME\tBIT(6)\n#define LINKUP_ACHIEVED\t\tBIT(7)\n#define LINK_GOING_DOWN\t\tBIT(8)\n#define LINK_WIDTH_DOWNGRADED\tBIT(9)\n\n \n#define HREQ_LOAD_CONFIG\t0x01\n#define HREQ_SAVE_CONFIG\t0x02\n#define HREQ_READ_CONFIG\t0x03\n#define HREQ_SET_TX_EQ_ABS\t0x04\n#define HREQ_SET_TX_EQ_REL\t0x05\n#define HREQ_ENABLE\t\t0x06\n#define HREQ_LCB_RESET\t\t0x07\n#define HREQ_CONFIG_DONE\t0xfe\n#define HREQ_INTERFACE_TEST\t0xff\n\n \n#define HREQ_INVALID\t\t0x01\n#define HREQ_SUCCESS\t\t0x02\n#define HREQ_NOT_SUPPORTED\t\t0x03\n#define HREQ_FEATURE_NOT_SUPPORTED\t0x04  \n#define HREQ_REQUEST_REJECTED\t0xfe\n#define HREQ_EXECUTION_ONGOING\t0xff\n\n \n#define HCMD_MISC_REQUEST_LCB_ACCESS 0x1\n#define HCMD_MISC_GRANT_LCB_ACCESS   0x2\n\n \n#define IDLE_PHYSICAL_LINK_MGMT 0x1\n#define IDLE_CRU\t\t    0x2\n#define IDLE_SMA\t\t    0x3\n#define IDLE_POWER_MGMT\t    0x4\n\n \n#define IDLE_PAYLOAD_MASK 0xffffffffffull  \n#define IDLE_PAYLOAD_SHIFT 8\n#define IDLE_MSG_TYPE_MASK 0xf\n#define IDLE_MSG_TYPE_SHIFT 0\n\n \n#define READ_IDLE_MSG_TYPE_MASK 0xf\n#define READ_IDLE_MSG_TYPE_SHIFT 0\n\n \n#define SMA_IDLE_ARM\t1\n#define SMA_IDLE_ACTIVE 2\n\n \n#define DISABLE_SELF_GUID_CHECK 0x2\n\n \n#define BAD_L2_ERR      0x6\n\n \n#define MIN_EAGER_BUFFER       (4 * 1024)\n#define MAX_EAGER_BUFFER       (256 * 1024)\n#define MAX_EAGER_BUFFER_TOTAL (64 * (1 << 20))  \n#define MAX_EXPECTED_BUFFER    (2048 * 1024)\n#define HFI1_MIN_HDRQ_EGRBUF_CNT 32\n#define HFI1_MAX_HDRQ_EGRBUF_CNT 16352\n\n \n#define RCV_SHIFT 3\n#define RCV_INCREMENT BIT(RCV_SHIFT)\n\n \n#define HDRQ_SIZE_SHIFT 5\n#define HDRQ_INCREMENT BIT(HDRQ_SIZE_SHIFT)\n\n \n#define FREEZE_ABORT     0x01\t \n#define FREEZE_SELF\t     0x02\t \n#define FREEZE_LINK_DOWN 0x04\t \n\n \n#define ICODE_RTL_SILICON\t\t0x00\n#define ICODE_RTL_VCS_SIMULATION\t0x01\n#define ICODE_FPGA_EMULATION\t0x02\n#define ICODE_FUNCTIONAL_SIMULATOR\t0x03\n\n \n#define DC8051_DATA_MEM_SIZE 0x1000\n\n \n#define NUM_GENERAL_FIELDS 0x17\n#define NUM_LANE_FIELDS    0x8\n\n \n#define LINK_OPTIMIZATION_SETTINGS   0x00\n#define LINK_TUNING_PARAMETERS\t     0x02\n#define DC_HOST_COMM_SETTINGS\t     0x03\n#define TX_SETTINGS\t\t     0x06\n#define VERIFY_CAP_LOCAL_PHY\t     0x07\n#define VERIFY_CAP_LOCAL_FABRIC\t     0x08\n#define VERIFY_CAP_LOCAL_LINK_MODE   0x09\n#define LOCAL_DEVICE_ID\t\t     0x0a\n#define RESERVED_REGISTERS\t     0x0b\n#define LOCAL_LNI_INFO\t\t     0x0c\n#define REMOTE_LNI_INFO              0x0d\n#define MISC_STATUS\t\t     0x0e\n#define VERIFY_CAP_REMOTE_PHY\t     0x0f\n#define VERIFY_CAP_REMOTE_FABRIC     0x10\n#define VERIFY_CAP_REMOTE_LINK_WIDTH 0x11\n#define LAST_LOCAL_STATE_COMPLETE    0x12\n#define LAST_REMOTE_STATE_COMPLETE   0x13\n#define LINK_QUALITY_INFO            0x14\n#define REMOTE_DEVICE_ID\t     0x15\n#define LINK_DOWN_REASON\t     0x16  \n#define VERSION_PATCH\t\t     0x16  \n\n \n#define TX_EQ_SETTINGS\t\t0x00\n#define CHANNEL_LOSS_SETTINGS\t0x05\n\n \n#define GENERAL_CONFIG 4\n\n \n#define TUNING_METHOD_SHIFT 24\n\n \n#define ENABLE_EXT_DEV_CONFIG_SHIFT 24\n\n \n#define LOAD_DATA_FIELD_ID_SHIFT 40\n#define LOAD_DATA_FIELD_ID_MASK 0xfull\n#define LOAD_DATA_LANE_ID_SHIFT 32\n#define LOAD_DATA_LANE_ID_MASK 0xfull\n#define LOAD_DATA_DATA_SHIFT   0x0\n#define LOAD_DATA_DATA_MASK   0xffffffffull\n\n \n#define READ_DATA_FIELD_ID_SHIFT 40\n#define READ_DATA_FIELD_ID_MASK 0xffull\n#define READ_DATA_LANE_ID_SHIFT 32\n#define READ_DATA_LANE_ID_MASK 0xffull\n#define READ_DATA_DATA_SHIFT   0x0\n#define READ_DATA_DATA_MASK   0xffffffffull\n\n \n#define ENABLE_LANE_TX_SHIFT\t\t0\n#define ENABLE_LANE_TX_MASK\t\t0xff\n#define TX_POLARITY_INVERSION_SHIFT\t8\n#define TX_POLARITY_INVERSION_MASK\t0xff\n#define RX_POLARITY_INVERSION_SHIFT\t16\n#define RX_POLARITY_INVERSION_MASK\t0xff\n#define MAX_RATE_SHIFT\t\t\t24\n#define MAX_RATE_MASK\t\t\t0xff\n\n \n#define CONTINIOUS_REMOTE_UPDATE_SUPPORT_SHIFT\t0x4\n#define CONTINIOUS_REMOTE_UPDATE_SUPPORT_MASK\t0x1\n#define POWER_MANAGEMENT_SHIFT\t\t\t0x0\n#define POWER_MANAGEMENT_MASK\t\t\t0xf\n\n \n#define SPICO_FW_VERSION 0x7\t \n\n \n#define SPICO_ROM_VERSION_SHIFT 0\n#define SPICO_ROM_VERSION_MASK 0xffff\n#define SPICO_ROM_PROD_ID_SHIFT 16\n#define SPICO_ROM_PROD_ID_MASK 0xffff\n\n \n#define VAU_SHIFT\t0\n#define VAU_MASK\t0x0007\n#define Z_SHIFT\t\t3\n#define Z_MASK\t\t0x0001\n#define VCU_SHIFT\t4\n#define VCU_MASK\t0x0007\n#define VL15BUF_SHIFT\t8\n#define VL15BUF_MASK\t0x0fff\n#define CRC_SIZES_SHIFT 20\n#define CRC_SIZES_MASK\t0x7\n\n \n#define LINK_WIDTH_SHIFT 0\t\t \n#define LINK_WIDTH_MASK 0xffff\t\t \n#define LOCAL_FLAG_BITS_SHIFT 16\n#define LOCAL_FLAG_BITS_MASK 0xff\n#define MISC_CONFIG_BITS_SHIFT 24\n#define MISC_CONFIG_BITS_MASK 0xff\n\n \n#define REMOTE_TX_RATE_SHIFT 16\n#define REMOTE_TX_RATE_MASK 0xff\n\n \n#define LOCAL_DEVICE_REV_SHIFT 0\n#define LOCAL_DEVICE_REV_MASK 0xff\n#define LOCAL_DEVICE_ID_SHIFT 8\n#define LOCAL_DEVICE_ID_MASK 0xffff\n\n \n#define REMOTE_DEVICE_REV_SHIFT 0\n#define REMOTE_DEVICE_REV_MASK 0xff\n#define REMOTE_DEVICE_ID_SHIFT 8\n#define REMOTE_DEVICE_ID_MASK 0xffff\n\n \n#define ENABLE_LANE_RX_SHIFT 16\n#define ENABLE_LANE_RX_MASK  0xff\n\n \n#define MGMT_ALLOWED_SHIFT 23\n#define MGMT_ALLOWED_MASK 0x1\n\n \n#define LINK_QUALITY_SHIFT 24\n#define LINK_QUALITY_MASK  0x7\n\n \n#define DOWN_REMOTE_REASON_SHIFT 16\n#define DOWN_REMOTE_REASON_MASK  0xff\n\n#define HOST_INTERFACE_VERSION 1\n#define HOST_INTERFACE_VERSION_SHIFT 16\n#define HOST_INTERFACE_VERSION_MASK  0xff\n\n \n#define PWRM_BER_CONTROL\t0x1\n#define PWRM_BANDWIDTH_CONTROL\t0x2\n\n \n#define LDR_LINK_TRANSFER_ACTIVE_LOW   0xa\n#define LDR_RECEIVED_LINKDOWN_IDLE_MSG 0xb\n#define LDR_RECEIVED_HOST_OFFLINE_REQ  0xc\n\n \nenum {\n\tCAP_CRC_14B = (1 << 0),  \n\tCAP_CRC_48B = (1 << 1),  \n\tCAP_CRC_12B_16B_PER_LANE = (1 << 2)  \n};\n\n#define SUPPORTED_CRCS (CAP_CRC_14B | CAP_CRC_48B)\n\n \n#define STS_FM_VERSION_MINOR_SHIFT 16\n#define STS_FM_VERSION_MINOR_MASK  0xff\n#define STS_FM_VERSION_MAJOR_SHIFT 24\n#define STS_FM_VERSION_MAJOR_MASK  0xff\n#define STS_FM_VERSION_PATCH_SHIFT 24\n#define STS_FM_VERSION_PATCH_MASK  0xff\n\n \n#define LCB_CRC_16B\t\t\t0x0\t \n#define LCB_CRC_14B\t\t\t0x1\t \n#define LCB_CRC_48B\t\t\t0x2\t \n#define LCB_CRC_12B_16B_PER_LANE\t0x3\t \n\n \nenum {\n\tPORT_LTP_CRC_MODE_NONE = 0,\n\tPORT_LTP_CRC_MODE_14 = 1,  \n\tPORT_LTP_CRC_MODE_16 = 2,  \n\tPORT_LTP_CRC_MODE_48 = 4,\n\t\t \n\tPORT_LTP_CRC_MODE_PER_LANE = 8\n\t\t \n};\n\n \n#define LINK_RESTART_DELAY 1000\t\t \n#define TIMEOUT_8051_START 5000          \n#define DC8051_COMMAND_TIMEOUT 1000\t \n#define FREEZE_STATUS_TIMEOUT 20\t \n#define VL_STATUS_CLEAR_TIMEOUT 5000\t \n#define CCE_STATUS_TIMEOUT 10\t\t \n\n \n#define ASIC_CCLOCK_PS  1242\t \n#define FPGA_CCLOCK_PS 30300\t \n\n \n#define DRIVER_MISC_MASK \\\n\t(~(MISC_ERR_STATUS_MISC_FW_AUTH_FAILED_ERR_SMASK \\\n\t\t| MISC_ERR_STATUS_MISC_KEY_MISMATCH_ERR_SMASK))\n\n \n#define LOOPBACK_NONE\t0\t \n#define LOOPBACK_SERDES 1\n#define LOOPBACK_LCB\t2\n#define LOOPBACK_CABLE\t3\t \n\n \n#define LOOPBACK_SERDES_CONFIG_BIT_MASK_SHIFT 0\n#define EXT_CFG_LCB_RESET_SUPPORTED_SHIFT     3\n\n \nu64 read_csr(const struct hfi1_devdata *dd, u32 offset);\nvoid write_csr(const struct hfi1_devdata *dd, u32 offset, u64 value);\n\n \nstatic inline u64 read_kctxt_csr(const struct hfi1_devdata *dd, int ctxt,\n\t\t\t\t u32 offset0)\n{\n\t \n\treturn read_csr(dd, offset0 + (0x100 * ctxt));\n}\n\nstatic inline void write_kctxt_csr(struct hfi1_devdata *dd, int ctxt,\n\t\t\t\t   u32 offset0, u64 value)\n{\n\t \n\twrite_csr(dd, offset0 + (0x100 * ctxt), value);\n}\n\nint read_lcb_csr(struct hfi1_devdata *dd, u32 offset, u64 *data);\nint write_lcb_csr(struct hfi1_devdata *dd, u32 offset, u64 data);\n\nvoid __iomem *get_csr_addr(\n\tconst struct hfi1_devdata *dd,\n\tu32 offset);\n\nstatic inline void __iomem *get_kctxt_csr_addr(\n\tconst struct hfi1_devdata *dd,\n\tint ctxt,\n\tu32 offset0)\n{\n\treturn get_csr_addr(dd, offset0 + (0x100 * ctxt));\n}\n\n \nstatic inline u64 read_uctxt_csr(const struct hfi1_devdata *dd, int ctxt,\n\t\t\t\t u32 offset0)\n{\n\t \n\treturn read_csr(dd, offset0 + (0x1000 * ctxt));\n}\n\nstatic inline void write_uctxt_csr(struct hfi1_devdata *dd, int ctxt,\n\t\t\t\t   u32 offset0, u64 value)\n{\n\t \n\twrite_csr(dd, offset0 + (0x1000 * ctxt), value);\n}\n\nstatic inline u32 chip_rcv_contexts(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, RCV_CONTEXTS);\n}\n\nstatic inline u32 chip_send_contexts(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, SEND_CONTEXTS);\n}\n\nstatic inline u32 chip_sdma_engines(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, SEND_DMA_ENGINES);\n}\n\nstatic inline u32 chip_pio_mem_size(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, SEND_PIO_MEM_SIZE);\n}\n\nstatic inline u32 chip_sdma_mem_size(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, SEND_DMA_MEM_SIZE);\n}\n\nstatic inline u32 chip_rcv_array_count(struct hfi1_devdata *dd)\n{\n\treturn read_csr(dd, RCV_ARRAY_CNT);\n}\n\nu8 encode_rcv_header_entry_size(u8 size);\nint hfi1_validate_rcvhdrcnt(struct hfi1_devdata *dd, uint thecnt);\nvoid set_hdrq_regs(struct hfi1_devdata *dd, u8 ctxt, u8 entsize, u16 hdrcnt);\n\nu64 create_pbc(struct hfi1_pportdata *ppd, u64 flags, int srate_mbs, u32 vl,\n\t       u32 dw_len);\n\n \n#define SBUS_MASTER_BROADCAST 0xfd\n#define NUM_PCIE_SERDES 16\t \nextern const u8 pcie_serdes_broadcast[];\nextern const u8 pcie_pcs_addrs[2][NUM_PCIE_SERDES];\n\n \n#define RESET_SBUS_RECEIVER 0x20\n#define WRITE_SBUS_RECEIVER 0x21\n#define READ_SBUS_RECEIVER  0x22\nvoid sbus_request(struct hfi1_devdata *dd,\n\t\t  u8 receiver_addr, u8 data_addr, u8 command, u32 data_in);\nint sbus_request_slow(struct hfi1_devdata *dd,\n\t\t      u8 receiver_addr, u8 data_addr, u8 command, u32 data_in);\nvoid set_sbus_fast_mode(struct hfi1_devdata *dd);\nvoid clear_sbus_fast_mode(struct hfi1_devdata *dd);\nint hfi1_firmware_init(struct hfi1_devdata *dd);\nint load_pcie_firmware(struct hfi1_devdata *dd);\nint load_firmware(struct hfi1_devdata *dd);\nvoid dispose_firmware(void);\nint acquire_hw_mutex(struct hfi1_devdata *dd);\nvoid release_hw_mutex(struct hfi1_devdata *dd);\n\n \n#define CR_SBUS  0x01\t \n#define CR_EPROM 0x02\t \n#define CR_I2C1  0x04\t \n#define CR_I2C2  0x08\t \n#define CR_DYN_SHIFT 8\t \n#define CR_DYN_MASK  ((1ull << CR_DYN_SHIFT) - 1)\n\n \n#define CR_THERM_INIT\t0x010000\n\nint acquire_chip_resource(struct hfi1_devdata *dd, u32 resource, u32 mswait);\nvoid release_chip_resource(struct hfi1_devdata *dd, u32 resource);\nbool check_chip_resource(struct hfi1_devdata *dd, u32 resource,\n\t\t\t const char *func);\nvoid init_chip_resources(struct hfi1_devdata *dd);\nvoid finish_chip_resources(struct hfi1_devdata *dd);\n\n \n#define SBUS_TIMEOUT 4000  \n\n \n#define QSFP_WAIT 20000  \n\nvoid fabric_serdes_reset(struct hfi1_devdata *dd);\nint read_8051_data(struct hfi1_devdata *dd, u32 addr, u32 len, u64 *result);\n\n \nvoid read_misc_status(struct hfi1_devdata *dd, u8 *ver_major, u8 *ver_minor,\n\t\t      u8 *ver_patch);\nint write_host_interface_version(struct hfi1_devdata *dd, u8 version);\nvoid read_guid(struct hfi1_devdata *dd);\nint wait_fm_ready(struct hfi1_devdata *dd, u32 mstimeout);\nvoid set_link_down_reason(struct hfi1_pportdata *ppd, u8 lcl_reason,\n\t\t\t  u8 neigh_reason, u8 rem_reason);\nint set_link_state(struct hfi1_pportdata *, u32 state);\nint port_ltp_to_cap(int port_ltp);\nvoid handle_verify_cap(struct work_struct *work);\nvoid handle_freeze(struct work_struct *work);\nvoid handle_link_up(struct work_struct *work);\nvoid handle_link_down(struct work_struct *work);\nvoid handle_link_downgrade(struct work_struct *work);\nvoid handle_link_bounce(struct work_struct *work);\nvoid handle_start_link(struct work_struct *work);\nvoid handle_sma_message(struct work_struct *work);\nint reset_qsfp(struct hfi1_pportdata *ppd);\nvoid qsfp_event(struct work_struct *work);\nvoid start_freeze_handling(struct hfi1_pportdata *ppd, int flags);\nint send_idle_sma(struct hfi1_devdata *dd, u64 message);\nint load_8051_config(struct hfi1_devdata *, u8, u8, u32);\nint read_8051_config(struct hfi1_devdata *, u8, u8, u32 *);\nint start_link(struct hfi1_pportdata *ppd);\nint bringup_serdes(struct hfi1_pportdata *ppd);\nvoid set_intr_state(struct hfi1_devdata *dd, u32 enable);\nbool apply_link_downgrade_policy(struct hfi1_pportdata *ppd,\n\t\t\t\t bool refresh_widths);\nvoid update_usrhead(struct hfi1_ctxtdata *rcd, u32 hd, u32 updegr, u32 egrhd,\n\t\t    u32 intr_adjust, u32 npkts);\nint stop_drain_data_vls(struct hfi1_devdata *dd);\nint open_fill_data_vls(struct hfi1_devdata *dd);\nu32 ns_to_cclock(struct hfi1_devdata *dd, u32 ns);\nu32 cclock_to_ns(struct hfi1_devdata *dd, u32 cclock);\nvoid get_linkup_link_widths(struct hfi1_pportdata *ppd);\nvoid read_ltp_rtt(struct hfi1_devdata *dd);\nvoid clear_linkup_counters(struct hfi1_devdata *dd);\nu32 hdrqempty(struct hfi1_ctxtdata *rcd);\nint is_ax(struct hfi1_devdata *dd);\nint is_bx(struct hfi1_devdata *dd);\nbool is_urg_masked(struct hfi1_ctxtdata *rcd);\nu32 read_physical_state(struct hfi1_devdata *dd);\nu32 chip_to_opa_pstate(struct hfi1_devdata *dd, u32 chip_pstate);\nconst char *opa_lstate_name(u32 lstate);\nconst char *opa_pstate_name(u32 pstate);\nu32 driver_pstate(struct hfi1_pportdata *ppd);\nu32 driver_lstate(struct hfi1_pportdata *ppd);\n\nint acquire_lcb_access(struct hfi1_devdata *dd, int sleep_ok);\nint release_lcb_access(struct hfi1_devdata *dd, int sleep_ok);\n#define LCB_START DC_LCB_CSRS\n#define LCB_END   DC_8051_CSRS  \nextern uint num_vls;\n\nextern uint disable_integrity;\nu64 read_dev_cntr(struct hfi1_devdata *dd, int index, int vl);\nu64 write_dev_cntr(struct hfi1_devdata *dd, int index, int vl, u64 data);\nu64 read_port_cntr(struct hfi1_pportdata *ppd, int index, int vl);\nu64 write_port_cntr(struct hfi1_pportdata *ppd, int index, int vl, u64 data);\nu32 read_logical_state(struct hfi1_devdata *dd);\nvoid force_recv_intr(struct hfi1_ctxtdata *rcd);\n\n \nenum {\n\tC_VL_0 = 0,\n\tC_VL_1,\n\tC_VL_2,\n\tC_VL_3,\n\tC_VL_4,\n\tC_VL_5,\n\tC_VL_6,\n\tC_VL_7,\n\tC_VL_15,\n\tC_VL_COUNT\n};\n\nstatic inline int vl_from_idx(int idx)\n{\n\treturn (idx == C_VL_15 ? 15 : idx);\n}\n\nstatic inline int idx_from_vl(int vl)\n{\n\treturn (vl == 15 ? C_VL_15 : vl);\n}\n\n \nenum {\n\tC_RCV_OVF = 0,\n\tC_RX_LEN_ERR,\n\tC_RX_SHORT_ERR,\n\tC_RX_ICRC_ERR,\n\tC_RX_EBP,\n\tC_RX_TID_FULL,\n\tC_RX_TID_INVALID,\n\tC_RX_TID_FLGMS,\n\tC_RX_CTX_EGRS,\n\tC_RCV_TID_FLSMS,\n\tC_CCE_PCI_CR_ST,\n\tC_CCE_PCI_TR_ST,\n\tC_CCE_PIO_WR_ST,\n\tC_CCE_ERR_INT,\n\tC_CCE_SDMA_INT,\n\tC_CCE_MISC_INT,\n\tC_CCE_RCV_AV_INT,\n\tC_CCE_RCV_URG_INT,\n\tC_CCE_SEND_CR_INT,\n\tC_DC_UNC_ERR,\n\tC_DC_RCV_ERR,\n\tC_DC_FM_CFG_ERR,\n\tC_DC_RMT_PHY_ERR,\n\tC_DC_DROPPED_PKT,\n\tC_DC_MC_XMIT_PKTS,\n\tC_DC_MC_RCV_PKTS,\n\tC_DC_XMIT_CERR,\n\tC_DC_RCV_CERR,\n\tC_DC_RCV_FCC,\n\tC_DC_XMIT_FCC,\n\tC_DC_XMIT_FLITS,\n\tC_DC_RCV_FLITS,\n\tC_DC_XMIT_PKTS,\n\tC_DC_RCV_PKTS,\n\tC_DC_RX_FLIT_VL,\n\tC_DC_RX_PKT_VL,\n\tC_DC_RCV_FCN,\n\tC_DC_RCV_FCN_VL,\n\tC_DC_RCV_BCN,\n\tC_DC_RCV_BCN_VL,\n\tC_DC_RCV_BBL,\n\tC_DC_RCV_BBL_VL,\n\tC_DC_MARK_FECN,\n\tC_DC_MARK_FECN_VL,\n\tC_DC_TOTAL_CRC,\n\tC_DC_CRC_LN0,\n\tC_DC_CRC_LN1,\n\tC_DC_CRC_LN2,\n\tC_DC_CRC_LN3,\n\tC_DC_CRC_MULT_LN,\n\tC_DC_TX_REPLAY,\n\tC_DC_RX_REPLAY,\n\tC_DC_SEQ_CRC_CNT,\n\tC_DC_ESC0_ONLY_CNT,\n\tC_DC_ESC0_PLUS1_CNT,\n\tC_DC_ESC0_PLUS2_CNT,\n\tC_DC_REINIT_FROM_PEER_CNT,\n\tC_DC_SBE_CNT,\n\tC_DC_MISC_FLG_CNT,\n\tC_DC_PRF_GOOD_LTP_CNT,\n\tC_DC_PRF_ACCEPTED_LTP_CNT,\n\tC_DC_PRF_RX_FLIT_CNT,\n\tC_DC_PRF_TX_FLIT_CNT,\n\tC_DC_PRF_CLK_CNTR,\n\tC_DC_PG_DBG_FLIT_CRDTS_CNT,\n\tC_DC_PG_STS_PAUSE_COMPLETE_CNT,\n\tC_DC_PG_STS_TX_SBE_CNT,\n\tC_DC_PG_STS_TX_MBE_CNT,\n\tC_SW_CPU_INTR,\n\tC_SW_CPU_RCV_LIM,\n\tC_SW_CTX0_SEQ_DROP,\n\tC_SW_VTX_WAIT,\n\tC_SW_PIO_WAIT,\n\tC_SW_PIO_DRAIN,\n\tC_SW_KMEM_WAIT,\n\tC_SW_TID_WAIT,\n\tC_SW_SEND_SCHED,\n\tC_SDMA_DESC_FETCHED_CNT,\n\tC_SDMA_INT_CNT,\n\tC_SDMA_ERR_CNT,\n\tC_SDMA_IDLE_INT_CNT,\n\tC_SDMA_PROGRESS_INT_CNT,\n \n\tC_MISC_PLL_LOCK_FAIL_ERR,\n\tC_MISC_MBIST_FAIL_ERR,\n\tC_MISC_INVALID_EEP_CMD_ERR,\n\tC_MISC_EFUSE_DONE_PARITY_ERR,\n\tC_MISC_EFUSE_WRITE_ERR,\n\tC_MISC_EFUSE_READ_BAD_ADDR_ERR,\n\tC_MISC_EFUSE_CSR_PARITY_ERR,\n\tC_MISC_FW_AUTH_FAILED_ERR,\n\tC_MISC_KEY_MISMATCH_ERR,\n\tC_MISC_SBUS_WRITE_FAILED_ERR,\n\tC_MISC_CSR_WRITE_BAD_ADDR_ERR,\n\tC_MISC_CSR_READ_BAD_ADDR_ERR,\n\tC_MISC_CSR_PARITY_ERR,\n \n\t \n\tC_CCE_ERR_STATUS_AGGREGATED_CNT,\n\tC_CCE_MSIX_CSR_PARITY_ERR,\n\tC_CCE_INT_MAP_UNC_ERR,\n\tC_CCE_INT_MAP_COR_ERR,\n\tC_CCE_MSIX_TABLE_UNC_ERR,\n\tC_CCE_MSIX_TABLE_COR_ERR,\n\tC_CCE_RXDMA_CONV_FIFO_PARITY_ERR,\n\tC_CCE_RCPL_ASYNC_FIFO_PARITY_ERR,\n\tC_CCE_SEG_WRITE_BAD_ADDR_ERR,\n\tC_CCE_SEG_READ_BAD_ADDR_ERR,\n\tC_LA_TRIGGERED,\n\tC_CCE_TRGT_CPL_TIMEOUT_ERR,\n\tC_PCIC_RECEIVE_PARITY_ERR,\n\tC_PCIC_TRANSMIT_BACK_PARITY_ERR,\n\tC_PCIC_TRANSMIT_FRONT_PARITY_ERR,\n\tC_PCIC_CPL_DAT_Q_UNC_ERR,\n\tC_PCIC_CPL_HD_Q_UNC_ERR,\n\tC_PCIC_POST_DAT_Q_UNC_ERR,\n\tC_PCIC_POST_HD_Q_UNC_ERR,\n\tC_PCIC_RETRY_SOT_MEM_UNC_ERR,\n\tC_PCIC_RETRY_MEM_UNC_ERR,\n\tC_PCIC_N_POST_DAT_Q_PARITY_ERR,\n\tC_PCIC_N_POST_H_Q_PARITY_ERR,\n\tC_PCIC_CPL_DAT_Q_COR_ERR,\n\tC_PCIC_CPL_HD_Q_COR_ERR,\n\tC_PCIC_POST_DAT_Q_COR_ERR,\n\tC_PCIC_POST_HD_Q_COR_ERR,\n\tC_PCIC_RETRY_SOT_MEM_COR_ERR,\n\tC_PCIC_RETRY_MEM_COR_ERR,\n\tC_CCE_CLI1_ASYNC_FIFO_DBG_PARITY_ERR,\n\tC_CCE_CLI1_ASYNC_FIFO_RXDMA_PARITY_ERR,\n\tC_CCE_CLI1_ASYNC_FIFO_SDMA_HD_PARITY_ERR,\n\tC_CCE_CLI1_ASYNC_FIFO_PIO_CRDT_PARITY_ERR,\n\tC_CCE_CLI2_ASYNC_FIFO_PARITY_ERR,\n\tC_CCE_CSR_CFG_BUS_PARITY_ERR,\n\tC_CCE_CLI0_ASYNC_FIFO_PARTIY_ERR,\n\tC_CCE_RSPD_DATA_PARITY_ERR,\n\tC_CCE_TRGT_ACCESS_ERR,\n\tC_CCE_TRGT_ASYNC_FIFO_PARITY_ERR,\n\tC_CCE_CSR_WRITE_BAD_ADDR_ERR,\n\tC_CCE_CSR_READ_BAD_ADDR_ERR,\n\tC_CCE_CSR_PARITY_ERR,\n \n\tC_RX_CSR_PARITY_ERR,\n\tC_RX_CSR_WRITE_BAD_ADDR_ERR,\n\tC_RX_CSR_READ_BAD_ADDR_ERR,\n\tC_RX_DMA_CSR_UNC_ERR,\n\tC_RX_DMA_DQ_FSM_ENCODING_ERR,\n\tC_RX_DMA_EQ_FSM_ENCODING_ERR,\n\tC_RX_DMA_CSR_PARITY_ERR,\n\tC_RX_RBUF_DATA_COR_ERR,\n\tC_RX_RBUF_DATA_UNC_ERR,\n\tC_RX_DMA_DATA_FIFO_RD_COR_ERR,\n\tC_RX_DMA_DATA_FIFO_RD_UNC_ERR,\n\tC_RX_DMA_HDR_FIFO_RD_COR_ERR,\n\tC_RX_DMA_HDR_FIFO_RD_UNC_ERR,\n\tC_RX_RBUF_DESC_PART2_COR_ERR,\n\tC_RX_RBUF_DESC_PART2_UNC_ERR,\n\tC_RX_RBUF_DESC_PART1_COR_ERR,\n\tC_RX_RBUF_DESC_PART1_UNC_ERR,\n\tC_RX_HQ_INTR_FSM_ERR,\n\tC_RX_HQ_INTR_CSR_PARITY_ERR,\n\tC_RX_LOOKUP_CSR_PARITY_ERR,\n\tC_RX_LOOKUP_RCV_ARRAY_COR_ERR,\n\tC_RX_LOOKUP_RCV_ARRAY_UNC_ERR,\n\tC_RX_LOOKUP_DES_PART2_PARITY_ERR,\n\tC_RX_LOOKUP_DES_PART1_UNC_COR_ERR,\n\tC_RX_LOOKUP_DES_PART1_UNC_ERR,\n\tC_RX_RBUF_NEXT_FREE_BUF_COR_ERR,\n\tC_RX_RBUF_NEXT_FREE_BUF_UNC_ERR,\n\tC_RX_RBUF_FL_INIT_WR_ADDR_PARITY_ERR,\n\tC_RX_RBUF_FL_INITDONE_PARITY_ERR,\n\tC_RX_RBUF_FL_WRITE_ADDR_PARITY_ERR,\n\tC_RX_RBUF_FL_RD_ADDR_PARITY_ERR,\n\tC_RX_RBUF_EMPTY_ERR,\n\tC_RX_RBUF_FULL_ERR,\n\tC_RX_RBUF_BAD_LOOKUP_ERR,\n\tC_RX_RBUF_CTX_ID_PARITY_ERR,\n\tC_RX_RBUF_CSR_QEOPDW_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_NUM_OF_PKT_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_T1_PTR_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_HD_PTR_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_VLD_BIT_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_NEXT_BUF_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_ENT_CNT_PARITY_ERR,\n\tC_RX_RBUF_CSR_Q_HEAD_BUF_NUM_PARITY_ERR,\n\tC_RX_RBUF_BLOCK_LIST_READ_COR_ERR,\n\tC_RX_RBUF_BLOCK_LIST_READ_UNC_ERR,\n\tC_RX_RBUF_LOOKUP_DES_COR_ERR,\n\tC_RX_RBUF_LOOKUP_DES_UNC_ERR,\n\tC_RX_RBUF_LOOKUP_DES_REG_UNC_COR_ERR,\n\tC_RX_RBUF_LOOKUP_DES_REG_UNC_ERR,\n\tC_RX_RBUF_FREE_LIST_COR_ERR,\n\tC_RX_RBUF_FREE_LIST_UNC_ERR,\n\tC_RX_RCV_FSM_ENCODING_ERR,\n\tC_RX_DMA_FLAG_COR_ERR,\n\tC_RX_DMA_FLAG_UNC_ERR,\n\tC_RX_DC_SOP_EOP_PARITY_ERR,\n\tC_RX_RCV_CSR_PARITY_ERR,\n\tC_RX_RCV_QP_MAP_TABLE_COR_ERR,\n\tC_RX_RCV_QP_MAP_TABLE_UNC_ERR,\n\tC_RX_RCV_DATA_COR_ERR,\n\tC_RX_RCV_DATA_UNC_ERR,\n\tC_RX_RCV_HDR_COR_ERR,\n\tC_RX_RCV_HDR_UNC_ERR,\n\tC_RX_DC_INTF_PARITY_ERR,\n\tC_RX_DMA_CSR_COR_ERR,\n \n\tC_PIO_PEC_SOP_HEAD_PARITY_ERR,\n\tC_PIO_PCC_SOP_HEAD_PARITY_ERR,\n\tC_PIO_LAST_RETURNED_CNT_PARITY_ERR,\n\tC_PIO_CURRENT_FREE_CNT_PARITY_ERR,\n\tC_PIO_RSVD_31_ERR,\n\tC_PIO_RSVD_30_ERR,\n\tC_PIO_PPMC_SOP_LEN_ERR,\n\tC_PIO_PPMC_BQC_MEM_PARITY_ERR,\n\tC_PIO_VL_FIFO_PARITY_ERR,\n\tC_PIO_VLF_SOP_PARITY_ERR,\n\tC_PIO_VLF_V1_LEN_PARITY_ERR,\n\tC_PIO_BLOCK_QW_COUNT_PARITY_ERR,\n\tC_PIO_WRITE_QW_VALID_PARITY_ERR,\n\tC_PIO_STATE_MACHINE_ERR,\n\tC_PIO_WRITE_DATA_PARITY_ERR,\n\tC_PIO_HOST_ADDR_MEM_COR_ERR,\n\tC_PIO_HOST_ADDR_MEM_UNC_ERR,\n\tC_PIO_PKT_EVICT_SM_OR_ARM_SM_ERR,\n\tC_PIO_INIT_SM_IN_ERR,\n\tC_PIO_PPMC_PBL_FIFO_ERR,\n\tC_PIO_CREDIT_RET_FIFO_PARITY_ERR,\n\tC_PIO_V1_LEN_MEM_BANK1_COR_ERR,\n\tC_PIO_V1_LEN_MEM_BANK0_COR_ERR,\n\tC_PIO_V1_LEN_MEM_BANK1_UNC_ERR,\n\tC_PIO_V1_LEN_MEM_BANK0_UNC_ERR,\n\tC_PIO_SM_PKT_RESET_PARITY_ERR,\n\tC_PIO_PKT_EVICT_FIFO_PARITY_ERR,\n\tC_PIO_SBRDCTRL_CRREL_FIFO_PARITY_ERR,\n\tC_PIO_SBRDCTL_CRREL_PARITY_ERR,\n\tC_PIO_PEC_FIFO_PARITY_ERR,\n\tC_PIO_PCC_FIFO_PARITY_ERR,\n\tC_PIO_SB_MEM_FIFO1_ERR,\n\tC_PIO_SB_MEM_FIFO0_ERR,\n\tC_PIO_CSR_PARITY_ERR,\n\tC_PIO_WRITE_ADDR_PARITY_ERR,\n\tC_PIO_WRITE_BAD_CTXT_ERR,\n \n\tC_SDMA_PCIE_REQ_TRACKING_COR_ERR,\n\tC_SDMA_PCIE_REQ_TRACKING_UNC_ERR,\n\tC_SDMA_CSR_PARITY_ERR,\n\tC_SDMA_RPY_TAG_ERR,\n \n\tC_TX_READ_PIO_MEMORY_CSR_UNC_ERR,\n\tC_TX_READ_SDMA_MEMORY_CSR_UNC_ERR,\n\tC_TX_EGRESS_FIFO_COR_ERR,\n\tC_TX_READ_PIO_MEMORY_COR_ERR,\n\tC_TX_READ_SDMA_MEMORY_COR_ERR,\n\tC_TX_SB_HDR_COR_ERR,\n\tC_TX_CREDIT_OVERRUN_ERR,\n\tC_TX_LAUNCH_FIFO8_COR_ERR,\n\tC_TX_LAUNCH_FIFO7_COR_ERR,\n\tC_TX_LAUNCH_FIFO6_COR_ERR,\n\tC_TX_LAUNCH_FIFO5_COR_ERR,\n\tC_TX_LAUNCH_FIFO4_COR_ERR,\n\tC_TX_LAUNCH_FIFO3_COR_ERR,\n\tC_TX_LAUNCH_FIFO2_COR_ERR,\n\tC_TX_LAUNCH_FIFO1_COR_ERR,\n\tC_TX_LAUNCH_FIFO0_COR_ERR,\n\tC_TX_CREDIT_RETURN_VL_ERR,\n\tC_TX_HCRC_INSERTION_ERR,\n\tC_TX_EGRESS_FIFI_UNC_ERR,\n\tC_TX_READ_PIO_MEMORY_UNC_ERR,\n\tC_TX_READ_SDMA_MEMORY_UNC_ERR,\n\tC_TX_SB_HDR_UNC_ERR,\n\tC_TX_CREDIT_RETURN_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO8_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO7_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO6_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO5_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO4_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO3_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO2_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO1_UNC_OR_PARITY_ERR,\n\tC_TX_LAUNCH_FIFO0_UNC_OR_PARITY_ERR,\n\tC_TX_SDMA15_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA14_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA13_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA12_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA11_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA10_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA9_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA8_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA7_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA6_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA5_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA4_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA3_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA2_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA1_DISALLOWED_PACKET_ERR,\n\tC_TX_SDMA0_DISALLOWED_PACKET_ERR,\n\tC_TX_CONFIG_PARITY_ERR,\n\tC_TX_SBRD_CTL_CSR_PARITY_ERR,\n\tC_TX_LAUNCH_CSR_PARITY_ERR,\n\tC_TX_ILLEGAL_CL_ERR,\n\tC_TX_SBRD_CTL_STATE_MACHINE_PARITY_ERR,\n\tC_TX_RESERVED_10,\n\tC_TX_RESERVED_9,\n\tC_TX_SDMA_LAUNCH_INTF_PARITY_ERR,\n\tC_TX_PIO_LAUNCH_INTF_PARITY_ERR,\n\tC_TX_RESERVED_6,\n\tC_TX_INCORRECT_LINK_STATE_ERR,\n\tC_TX_LINK_DOWN_ERR,\n\tC_TX_EGRESS_FIFO_UNDERRUN_OR_PARITY_ERR,\n\tC_TX_RESERVED_2,\n\tC_TX_PKT_INTEGRITY_MEM_UNC_ERR,\n\tC_TX_PKT_INTEGRITY_MEM_COR_ERR,\n \n\tC_SEND_CSR_WRITE_BAD_ADDR_ERR,\n\tC_SEND_CSR_READ_BAD_ADD_ERR,\n\tC_SEND_CSR_PARITY_ERR,\n \n\tC_PIO_WRITE_OUT_OF_BOUNDS_ERR,\n\tC_PIO_WRITE_OVERFLOW_ERR,\n\tC_PIO_WRITE_CROSSES_BOUNDARY_ERR,\n\tC_PIO_DISALLOWED_PACKET_ERR,\n\tC_PIO_INCONSISTENT_SOP_ERR,\n \n\tC_SDMA_HEADER_REQUEST_FIFO_COR_ERR,\n\tC_SDMA_HEADER_STORAGE_COR_ERR,\n\tC_SDMA_PACKET_TRACKING_COR_ERR,\n\tC_SDMA_ASSEMBLY_COR_ERR,\n\tC_SDMA_DESC_TABLE_COR_ERR,\n\tC_SDMA_HEADER_REQUEST_FIFO_UNC_ERR,\n\tC_SDMA_HEADER_STORAGE_UNC_ERR,\n\tC_SDMA_PACKET_TRACKING_UNC_ERR,\n\tC_SDMA_ASSEMBLY_UNC_ERR,\n\tC_SDMA_DESC_TABLE_UNC_ERR,\n\tC_SDMA_TIMEOUT_ERR,\n\tC_SDMA_HEADER_LENGTH_ERR,\n\tC_SDMA_HEADER_ADDRESS_ERR,\n\tC_SDMA_HEADER_SELECT_ERR,\n\tC_SMDA_RESERVED_9,\n\tC_SDMA_PACKET_DESC_OVERFLOW_ERR,\n\tC_SDMA_LENGTH_MISMATCH_ERR,\n\tC_SDMA_HALT_ERR,\n\tC_SDMA_MEM_READ_ERR,\n\tC_SDMA_FIRST_DESC_ERR,\n\tC_SDMA_TAIL_OUT_OF_BOUNDS_ERR,\n\tC_SDMA_TOO_LONG_ERR,\n\tC_SDMA_GEN_MISMATCH_ERR,\n\tC_SDMA_WRONG_DW_ERR,\n\tDEV_CNTR_LAST   \n};\n\n \nenum {\n\tC_TX_UNSUP_VL = 0,\n\tC_TX_INVAL_LEN,\n\tC_TX_MM_LEN_ERR,\n\tC_TX_UNDERRUN,\n\tC_TX_FLOW_STALL,\n\tC_TX_DROPPED,\n\tC_TX_HDR_ERR,\n\tC_TX_PKT,\n\tC_TX_WORDS,\n\tC_TX_WAIT,\n\tC_TX_FLIT_VL,\n\tC_TX_PKT_VL,\n\tC_TX_WAIT_VL,\n\tC_RX_PKT,\n\tC_RX_WORDS,\n\tC_SW_LINK_DOWN,\n\tC_SW_LINK_UP,\n\tC_SW_UNKNOWN_FRAME,\n\tC_SW_XMIT_DSCD,\n\tC_SW_XMIT_DSCD_VL,\n\tC_SW_XMIT_CSTR_ERR,\n\tC_SW_RCV_CSTR_ERR,\n\tC_SW_IBP_LOOP_PKTS,\n\tC_SW_IBP_RC_RESENDS,\n\tC_SW_IBP_RNR_NAKS,\n\tC_SW_IBP_OTHER_NAKS,\n\tC_SW_IBP_RC_TIMEOUTS,\n\tC_SW_IBP_PKT_DROPS,\n\tC_SW_IBP_DMA_WAIT,\n\tC_SW_IBP_RC_SEQNAK,\n\tC_SW_IBP_RC_DUPREQ,\n\tC_SW_IBP_RDMA_SEQ,\n\tC_SW_IBP_UNALIGNED,\n\tC_SW_IBP_SEQ_NAK,\n\tC_SW_IBP_RC_CRWAITS,\n\tC_SW_CPU_RC_ACKS,\n\tC_SW_CPU_RC_QACKS,\n\tC_SW_CPU_RC_DELAYED_COMP,\n\tC_RCV_HDR_OVF_0,\n\tC_RCV_HDR_OVF_1,\n\tC_RCV_HDR_OVF_2,\n\tC_RCV_HDR_OVF_3,\n\tC_RCV_HDR_OVF_4,\n\tC_RCV_HDR_OVF_5,\n\tC_RCV_HDR_OVF_6,\n\tC_RCV_HDR_OVF_7,\n\tC_RCV_HDR_OVF_8,\n\tC_RCV_HDR_OVF_9,\n\tC_RCV_HDR_OVF_10,\n\tC_RCV_HDR_OVF_11,\n\tC_RCV_HDR_OVF_12,\n\tC_RCV_HDR_OVF_13,\n\tC_RCV_HDR_OVF_14,\n\tC_RCV_HDR_OVF_15,\n\tC_RCV_HDR_OVF_16,\n\tC_RCV_HDR_OVF_17,\n\tC_RCV_HDR_OVF_18,\n\tC_RCV_HDR_OVF_19,\n\tC_RCV_HDR_OVF_20,\n\tC_RCV_HDR_OVF_21,\n\tC_RCV_HDR_OVF_22,\n\tC_RCV_HDR_OVF_23,\n\tC_RCV_HDR_OVF_24,\n\tC_RCV_HDR_OVF_25,\n\tC_RCV_HDR_OVF_26,\n\tC_RCV_HDR_OVF_27,\n\tC_RCV_HDR_OVF_28,\n\tC_RCV_HDR_OVF_29,\n\tC_RCV_HDR_OVF_30,\n\tC_RCV_HDR_OVF_31,\n\tC_RCV_HDR_OVF_32,\n\tC_RCV_HDR_OVF_33,\n\tC_RCV_HDR_OVF_34,\n\tC_RCV_HDR_OVF_35,\n\tC_RCV_HDR_OVF_36,\n\tC_RCV_HDR_OVF_37,\n\tC_RCV_HDR_OVF_38,\n\tC_RCV_HDR_OVF_39,\n\tC_RCV_HDR_OVF_40,\n\tC_RCV_HDR_OVF_41,\n\tC_RCV_HDR_OVF_42,\n\tC_RCV_HDR_OVF_43,\n\tC_RCV_HDR_OVF_44,\n\tC_RCV_HDR_OVF_45,\n\tC_RCV_HDR_OVF_46,\n\tC_RCV_HDR_OVF_47,\n\tC_RCV_HDR_OVF_48,\n\tC_RCV_HDR_OVF_49,\n\tC_RCV_HDR_OVF_50,\n\tC_RCV_HDR_OVF_51,\n\tC_RCV_HDR_OVF_52,\n\tC_RCV_HDR_OVF_53,\n\tC_RCV_HDR_OVF_54,\n\tC_RCV_HDR_OVF_55,\n\tC_RCV_HDR_OVF_56,\n\tC_RCV_HDR_OVF_57,\n\tC_RCV_HDR_OVF_58,\n\tC_RCV_HDR_OVF_59,\n\tC_RCV_HDR_OVF_60,\n\tC_RCV_HDR_OVF_61,\n\tC_RCV_HDR_OVF_62,\n\tC_RCV_HDR_OVF_63,\n\tC_RCV_HDR_OVF_64,\n\tC_RCV_HDR_OVF_65,\n\tC_RCV_HDR_OVF_66,\n\tC_RCV_HDR_OVF_67,\n\tC_RCV_HDR_OVF_68,\n\tC_RCV_HDR_OVF_69,\n\tC_RCV_HDR_OVF_70,\n\tC_RCV_HDR_OVF_71,\n\tC_RCV_HDR_OVF_72,\n\tC_RCV_HDR_OVF_73,\n\tC_RCV_HDR_OVF_74,\n\tC_RCV_HDR_OVF_75,\n\tC_RCV_HDR_OVF_76,\n\tC_RCV_HDR_OVF_77,\n\tC_RCV_HDR_OVF_78,\n\tC_RCV_HDR_OVF_79,\n\tC_RCV_HDR_OVF_80,\n\tC_RCV_HDR_OVF_81,\n\tC_RCV_HDR_OVF_82,\n\tC_RCV_HDR_OVF_83,\n\tC_RCV_HDR_OVF_84,\n\tC_RCV_HDR_OVF_85,\n\tC_RCV_HDR_OVF_86,\n\tC_RCV_HDR_OVF_87,\n\tC_RCV_HDR_OVF_88,\n\tC_RCV_HDR_OVF_89,\n\tC_RCV_HDR_OVF_90,\n\tC_RCV_HDR_OVF_91,\n\tC_RCV_HDR_OVF_92,\n\tC_RCV_HDR_OVF_93,\n\tC_RCV_HDR_OVF_94,\n\tC_RCV_HDR_OVF_95,\n\tC_RCV_HDR_OVF_96,\n\tC_RCV_HDR_OVF_97,\n\tC_RCV_HDR_OVF_98,\n\tC_RCV_HDR_OVF_99,\n\tC_RCV_HDR_OVF_100,\n\tC_RCV_HDR_OVF_101,\n\tC_RCV_HDR_OVF_102,\n\tC_RCV_HDR_OVF_103,\n\tC_RCV_HDR_OVF_104,\n\tC_RCV_HDR_OVF_105,\n\tC_RCV_HDR_OVF_106,\n\tC_RCV_HDR_OVF_107,\n\tC_RCV_HDR_OVF_108,\n\tC_RCV_HDR_OVF_109,\n\tC_RCV_HDR_OVF_110,\n\tC_RCV_HDR_OVF_111,\n\tC_RCV_HDR_OVF_112,\n\tC_RCV_HDR_OVF_113,\n\tC_RCV_HDR_OVF_114,\n\tC_RCV_HDR_OVF_115,\n\tC_RCV_HDR_OVF_116,\n\tC_RCV_HDR_OVF_117,\n\tC_RCV_HDR_OVF_118,\n\tC_RCV_HDR_OVF_119,\n\tC_RCV_HDR_OVF_120,\n\tC_RCV_HDR_OVF_121,\n\tC_RCV_HDR_OVF_122,\n\tC_RCV_HDR_OVF_123,\n\tC_RCV_HDR_OVF_124,\n\tC_RCV_HDR_OVF_125,\n\tC_RCV_HDR_OVF_126,\n\tC_RCV_HDR_OVF_127,\n\tC_RCV_HDR_OVF_128,\n\tC_RCV_HDR_OVF_129,\n\tC_RCV_HDR_OVF_130,\n\tC_RCV_HDR_OVF_131,\n\tC_RCV_HDR_OVF_132,\n\tC_RCV_HDR_OVF_133,\n\tC_RCV_HDR_OVF_134,\n\tC_RCV_HDR_OVF_135,\n\tC_RCV_HDR_OVF_136,\n\tC_RCV_HDR_OVF_137,\n\tC_RCV_HDR_OVF_138,\n\tC_RCV_HDR_OVF_139,\n\tC_RCV_HDR_OVF_140,\n\tC_RCV_HDR_OVF_141,\n\tC_RCV_HDR_OVF_142,\n\tC_RCV_HDR_OVF_143,\n\tC_RCV_HDR_OVF_144,\n\tC_RCV_HDR_OVF_145,\n\tC_RCV_HDR_OVF_146,\n\tC_RCV_HDR_OVF_147,\n\tC_RCV_HDR_OVF_148,\n\tC_RCV_HDR_OVF_149,\n\tC_RCV_HDR_OVF_150,\n\tC_RCV_HDR_OVF_151,\n\tC_RCV_HDR_OVF_152,\n\tC_RCV_HDR_OVF_153,\n\tC_RCV_HDR_OVF_154,\n\tC_RCV_HDR_OVF_155,\n\tC_RCV_HDR_OVF_156,\n\tC_RCV_HDR_OVF_157,\n\tC_RCV_HDR_OVF_158,\n\tC_RCV_HDR_OVF_159,\n\tPORT_CNTR_LAST  \n};\n\nu64 get_all_cpu_total(u64 __percpu *cntr);\nvoid hfi1_start_cleanup(struct hfi1_devdata *dd);\nvoid hfi1_clear_tids(struct hfi1_ctxtdata *rcd);\nvoid hfi1_init_ctxt(struct send_context *sc);\nvoid hfi1_put_tid(struct hfi1_devdata *dd, u32 index,\n\t\t  u32 type, unsigned long pa, u16 order);\nvoid hfi1_quiet_serdes(struct hfi1_pportdata *ppd);\nvoid hfi1_rcvctrl(struct hfi1_devdata *dd, unsigned int op,\n\t\t  struct hfi1_ctxtdata *rcd);\nu32 hfi1_read_cntrs(struct hfi1_devdata *dd, char **namep, u64 **cntrp);\nu32 hfi1_read_portcntrs(struct hfi1_pportdata *ppd, char **namep, u64 **cntrp);\nint hfi1_get_ib_cfg(struct hfi1_pportdata *ppd, int which);\nint hfi1_set_ib_cfg(struct hfi1_pportdata *ppd, int which, u32 val);\nint hfi1_set_ctxt_jkey(struct hfi1_devdata *dd, struct hfi1_ctxtdata *rcd,\n\t\t       u16 jkey);\nint hfi1_clear_ctxt_jkey(struct hfi1_devdata *dd, struct hfi1_ctxtdata *ctxt);\nint hfi1_set_ctxt_pkey(struct hfi1_devdata *dd, struct hfi1_ctxtdata *ctxt,\n\t\t       u16 pkey);\nint hfi1_clear_ctxt_pkey(struct hfi1_devdata *dd, struct hfi1_ctxtdata *ctxt);\nvoid hfi1_read_link_quality(struct hfi1_devdata *dd, u8 *link_quality);\nvoid hfi1_init_vnic_rsm(struct hfi1_devdata *dd);\nvoid hfi1_deinit_vnic_rsm(struct hfi1_devdata *dd);\n\nirqreturn_t general_interrupt(int irq, void *data);\nirqreturn_t sdma_interrupt(int irq, void *data);\nirqreturn_t receive_context_interrupt(int irq, void *data);\nirqreturn_t receive_context_thread(int irq, void *data);\nirqreturn_t receive_context_interrupt_napi(int irq, void *data);\n\nint set_intr_bits(struct hfi1_devdata *dd, u16 first, u16 last, bool set);\nvoid init_qsfp_int(struct hfi1_devdata *dd);\nvoid clear_all_interrupts(struct hfi1_devdata *dd);\nvoid remap_intr(struct hfi1_devdata *dd, int isrc, int msix_intr);\nvoid remap_sdma_interrupts(struct hfi1_devdata *dd, int engine, int msix_intr);\nvoid reset_interrupts(struct hfi1_devdata *dd);\nu8 hfi1_get_qp_map(struct hfi1_devdata *dd, u8 idx);\nvoid hfi1_init_aip_rsm(struct hfi1_devdata *dd);\nvoid hfi1_deinit_aip_rsm(struct hfi1_devdata *dd);\n\n \nstruct is_table {\n\tint start;\t  \n\tint end;\t  \n\t \n\tchar *(*is_name)(char *name, size_t size, unsigned int source);\n\t \n\tvoid (*is_int)(struct hfi1_devdata *dd, unsigned int source);\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}