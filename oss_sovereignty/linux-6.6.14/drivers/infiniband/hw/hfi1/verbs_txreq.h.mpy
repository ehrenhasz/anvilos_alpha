{
  "module_name": "verbs_txreq.h",
  "hash_id": "007723f6df82e47a5b2e0a00fbded104be5ef98875720ff97d442271341367d6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/hfi1/verbs_txreq.h",
  "human_readable_source": " \n \n\n#ifndef HFI1_VERBS_TXREQ_H\n#define HFI1_VERBS_TXREQ_H\n\n#include <linux/types.h>\n#include <linux/slab.h>\n\n#include \"verbs.h\"\n#include \"sdma_txreq.h\"\n#include \"iowait.h\"\n\nstruct verbs_txreq {\n\tstruct hfi1_sdma_header\tphdr;\n\tstruct sdma_txreq       txreq;\n\tstruct rvt_qp           *qp;\n\tstruct rvt_swqe         *wqe;\n\tstruct rvt_mregion\t*mr;\n\tstruct rvt_sge_state    *ss;\n\tstruct sdma_engine     *sde;\n\tstruct send_context     *psc;\n\tu16                     hdr_dwords;\n\tu16\t\t\ts_cur_size;\n};\n\nstruct hfi1_ibdev;\nstruct verbs_txreq *__get_txreq(struct hfi1_ibdev *dev,\n\t\t\t\tstruct rvt_qp *qp);\n\n#define VERBS_TXREQ_GFP (GFP_ATOMIC | __GFP_NOWARN)\nstatic inline struct verbs_txreq *get_txreq(struct hfi1_ibdev *dev,\n\t\t\t\t\t    struct rvt_qp *qp)\n\t__must_hold(&qp->slock)\n{\n\tstruct verbs_txreq *tx;\n\tstruct hfi1_qp_priv *priv = qp->priv;\n\n\ttx = kmem_cache_alloc(dev->verbs_txreq_cache, VERBS_TXREQ_GFP);\n\tif (unlikely(!tx)) {\n\t\t \n\t\ttx = __get_txreq(dev, qp);\n\t\tif (!tx)\n\t\t\treturn tx;\n\t}\n\ttx->qp = qp;\n\ttx->mr = NULL;\n\ttx->sde = priv->s_sde;\n\ttx->psc = priv->s_sendcontext;\n\t \n\ttx->txreq.num_desc = 0;\n\t \n\ttx->phdr.hdr.hdr_type = priv->hdr_type;\n\ttx->txreq.flags = 0;\n\treturn tx;\n}\n\nstatic inline struct verbs_txreq *get_waiting_verbs_txreq(struct iowait_work *w)\n{\n\tstruct sdma_txreq *stx;\n\n\tstx = iowait_get_txhead(w);\n\tif (stx)\n\t\treturn container_of(stx, struct verbs_txreq, txreq);\n\treturn NULL;\n}\n\nstatic inline bool verbs_txreq_queued(struct iowait_work *w)\n{\n\treturn iowait_packet_queued(w);\n}\n\nvoid hfi1_put_txreq(struct verbs_txreq *tx);\nint verbs_txreq_init(struct hfi1_ibdev *dev);\nvoid verbs_txreq_exit(struct hfi1_ibdev *dev);\n\n#endif                          \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}