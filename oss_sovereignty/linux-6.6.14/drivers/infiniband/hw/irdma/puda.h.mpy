{
  "module_name": "puda.h",
  "hash_id": "20d1ebc42c196a13ab7d9aceac0066bf3d70902a70f27145268f876b6e320740",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/irdma/puda.h",
  "human_readable_source": " \n \n#ifndef IRDMA_PUDA_H\n#define IRDMA_PUDA_H\n\n#define IRDMA_IEQ_MPA_FRAMING\t6\n#define IRDMA_TCP_OFFSET\t40\n#define IRDMA_IPV4_PAD\t\t20\n#define IRDMA_MRK_BLK_SZ\t512\n\nenum puda_rsrc_type {\n\tIRDMA_PUDA_RSRC_TYPE_ILQ = 1,\n\tIRDMA_PUDA_RSRC_TYPE_IEQ,\n\tIRDMA_PUDA_RSRC_TYPE_MAX,  \n};\n\nenum puda_rsrc_complete {\n\tPUDA_CQ_CREATED = 1,\n\tPUDA_QP_CREATED,\n\tPUDA_TX_COMPLETE,\n\tPUDA_RX_COMPLETE,\n\tPUDA_HASH_CRC_COMPLETE,\n};\n\nstruct irdma_sc_dev;\nstruct irdma_sc_qp;\nstruct irdma_sc_cq;\n\nstruct irdma_puda_cmpl_info {\n\tstruct irdma_qp_uk *qp;\n\tu8 q_type;\n\tu8 l3proto;\n\tu8 l4proto;\n\tu16 vlan;\n\tu32 payload_len;\n\tu32 compl_error;  \n\tu32 qp_id;\n\tu32 wqe_idx;\n\tbool ipv4:1;\n\tbool smac_valid:1;\n\tbool vlan_valid:1;\n\tu8 smac[ETH_ALEN];\n};\n\nstruct irdma_puda_send_info {\n\tu64 paddr;  \n\tu32 len;\n\tu32 ah_id;\n\tu8 tcplen;\n\tu8 maclen;\n\tbool ipv4:1;\n\tbool do_lpb:1;\n\tvoid *scratch;\n};\n\nstruct irdma_puda_buf {\n\tstruct list_head list;  \n\tstruct irdma_dma_mem mem;  \n\tstruct irdma_puda_buf *next;  \n\tstruct irdma_virt_mem buf_mem;  \n\tvoid *scratch;\n\tu8 *iph;\n\tu8 *tcph;\n\tu8 *data;\n\tu16 datalen;\n\tu16 vlan_id;\n\tu8 tcphlen;  \n\tu8 maclen;  \n\tu32 totallen;  \n\trefcount_t refcount;\n\tu8 hdrlen;\n\tbool ipv4:1;\n\tbool vlan_valid:1;\n\tbool do_lpb:1;  \n\tbool smac_valid:1;\n\tu32 seqnum;\n\tu32 ah_id;\n\tu8 smac[ETH_ALEN];\n\tstruct irdma_sc_vsi *vsi;\n};\n\nstruct irdma_puda_rsrc_info {\n\tvoid (*receive)(struct irdma_sc_vsi *vsi, struct irdma_puda_buf *buf);\n\tvoid (*xmit_complete)(struct irdma_sc_vsi *vsi, void *sqwrid);\n\tenum puda_rsrc_type type;  \n\tu32 count;\n\tu32 pd_id;\n\tu32 cq_id;\n\tu32 qp_id;\n\tu32 sq_size;\n\tu32 rq_size;\n\tu32 tx_buf_cnt;  \n\tu16 buf_size;\n\tu8 stats_idx;\n\tbool stats_idx_valid:1;\n\tint abi_ver;\n};\n\nstruct irdma_puda_rsrc {\n\tstruct irdma_sc_cq cq;\n\tstruct irdma_sc_qp qp;\n\tstruct irdma_sc_pd sc_pd;\n\tstruct irdma_sc_dev *dev;\n\tstruct irdma_sc_vsi *vsi;\n\tstruct irdma_dma_mem cqmem;\n\tstruct irdma_dma_mem qpmem;\n\tstruct irdma_virt_mem ilq_mem;\n\tenum puda_rsrc_complete cmpl;\n\tenum puda_rsrc_type type;\n\tu16 buf_size;  \n\tu32 cq_id;\n\tu32 qp_id;\n\tu32 sq_size;\n\tu32 rq_size;\n\tu32 cq_size;\n\tstruct irdma_sq_uk_wr_trk_info *sq_wrtrk_array;\n\tu64 *rq_wrid_array;\n\tu32 compl_rxwqe_idx;\n\tu32 rx_wqe_idx;\n\tu32 rxq_invalid_cnt;\n\tu32 tx_wqe_avail_cnt;\n\tstruct shash_desc *hash_desc;\n\tstruct list_head txpend;\n\tstruct list_head bufpool;  \n\tu32 alloc_buf_count;\n\tu32 avail_buf_count;  \n\tspinlock_t bufpool_lock;\n\tstruct irdma_puda_buf *alloclist;\n\tvoid (*receive)(struct irdma_sc_vsi *vsi, struct irdma_puda_buf *buf);\n\tvoid (*xmit_complete)(struct irdma_sc_vsi *vsi, void *sqwrid);\n\t \n\tu64 stats_buf_alloc_fail;\n\tu64 stats_pkt_rcvd;\n\tu64 stats_pkt_sent;\n\tu64 stats_rcvd_pkt_err;\n\tu64 stats_sent_pkt_q;\n\tu64 stats_bad_qp_id;\n\t \n\tu64 fpdu_processed;\n\tu64 bad_seq_num;\n\tu64 crc_err;\n\tu64 pmode_count;\n\tu64 partials_handled;\n\tu8 stats_idx;\n\tbool check_crc:1;\n\tbool stats_idx_valid:1;\n};\n\nstruct irdma_puda_buf *irdma_puda_get_bufpool(struct irdma_puda_rsrc *rsrc);\nvoid irdma_puda_ret_bufpool(struct irdma_puda_rsrc *rsrc,\n\t\t\t    struct irdma_puda_buf *buf);\nvoid irdma_puda_send_buf(struct irdma_puda_rsrc *rsrc,\n\t\t\t struct irdma_puda_buf *buf);\nint irdma_puda_send(struct irdma_sc_qp *qp, struct irdma_puda_send_info *info);\nint irdma_puda_create_rsrc(struct irdma_sc_vsi *vsi,\n\t\t\t   struct irdma_puda_rsrc_info *info);\nvoid irdma_puda_dele_rsrc(struct irdma_sc_vsi *vsi, enum puda_rsrc_type type,\n\t\t\t  bool reset);\nint irdma_puda_poll_cmpl(struct irdma_sc_dev *dev, struct irdma_sc_cq *cq,\n\t\t\t u32 *compl_err);\n\nstruct irdma_sc_qp *irdma_ieq_get_qp(struct irdma_sc_dev *dev,\n\t\t\t\t     struct irdma_puda_buf *buf);\nint irdma_puda_get_tcpip_info(struct irdma_puda_cmpl_info *info,\n\t\t\t      struct irdma_puda_buf *buf);\nint irdma_ieq_check_mpacrc(struct shash_desc *desc, void *addr, u32 len, u32 val);\nint irdma_init_hash_desc(struct shash_desc **desc);\nvoid irdma_ieq_mpa_crc_ae(struct irdma_sc_dev *dev, struct irdma_sc_qp *qp);\nvoid irdma_free_hash_desc(struct shash_desc *desc);\nvoid irdma_ieq_update_tcpip_info(struct irdma_puda_buf *buf, u16 len, u32 seqnum);\nint irdma_cqp_qp_create_cmd(struct irdma_sc_dev *dev, struct irdma_sc_qp *qp);\nint irdma_cqp_cq_create_cmd(struct irdma_sc_dev *dev, struct irdma_sc_cq *cq);\nint irdma_cqp_qp_destroy_cmd(struct irdma_sc_dev *dev, struct irdma_sc_qp *qp);\nvoid irdma_cqp_cq_destroy_cmd(struct irdma_sc_dev *dev, struct irdma_sc_cq *cq);\nvoid irdma_puda_ieq_get_ah_info(struct irdma_sc_qp *qp,\n\t\t\t\tstruct irdma_ah_info *ah_info);\nint irdma_puda_create_ah(struct irdma_sc_dev *dev,\n\t\t\t struct irdma_ah_info *ah_info, bool wait,\n\t\t\t enum puda_rsrc_type type, void *cb_param,\n\t\t\t struct irdma_sc_ah **ah);\nvoid irdma_puda_free_ah(struct irdma_sc_dev *dev, struct irdma_sc_ah *ah);\nvoid irdma_ieq_process_fpdus(struct irdma_sc_qp *qp,\n\t\t\t     struct irdma_puda_rsrc *ieq);\nvoid irdma_ieq_cleanup_qp(struct irdma_puda_rsrc *ieq, struct irdma_sc_qp *qp);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}