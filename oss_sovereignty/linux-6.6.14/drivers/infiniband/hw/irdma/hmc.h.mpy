{
  "module_name": "hmc.h",
  "hash_id": "01a203e7772c97424da7904ec744f5c82322f3fe3fa606bf463bfde9b69354cf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/irdma/hmc.h",
  "human_readable_source": " \n \n#ifndef IRDMA_HMC_H\n#define IRDMA_HMC_H\n\n#include \"defs.h\"\n\n#define IRDMA_HMC_MAX_BP_COUNT\t\t\t512\n#define IRDMA_MAX_SD_ENTRIES\t\t\t11\n#define IRDMA_HW_DBG_HMC_INVALID_BP_MARK\t0xca\n#define IRDMA_HMC_INFO_SIGNATURE\t\t0x484d5347\n#define IRDMA_HMC_PD_CNT_IN_SD\t\t\t512\n#define IRDMA_HMC_DIRECT_BP_SIZE\t\t0x200000\n#define IRDMA_HMC_MAX_SD_COUNT\t\t\t8192\n#define IRDMA_HMC_PAGED_BP_SIZE\t\t\t4096\n#define IRDMA_HMC_PD_BP_BUF_ALIGNMENT\t\t4096\n#define IRDMA_FIRST_VF_FPM_ID\t\t\t8\n#define FPM_MULTIPLIER\t\t\t\t1024\n\nenum irdma_hmc_rsrc_type {\n\tIRDMA_HMC_IW_QP\t\t = 0,\n\tIRDMA_HMC_IW_CQ\t\t = 1,\n\tIRDMA_HMC_IW_RESERVED\t = 2,\n\tIRDMA_HMC_IW_HTE\t = 3,\n\tIRDMA_HMC_IW_ARP\t = 4,\n\tIRDMA_HMC_IW_APBVT_ENTRY = 5,\n\tIRDMA_HMC_IW_MR\t\t = 6,\n\tIRDMA_HMC_IW_XF\t\t = 7,\n\tIRDMA_HMC_IW_XFFL\t = 8,\n\tIRDMA_HMC_IW_Q1\t\t = 9,\n\tIRDMA_HMC_IW_Q1FL\t = 10,\n\tIRDMA_HMC_IW_TIMER       = 11,\n\tIRDMA_HMC_IW_FSIMC       = 12,\n\tIRDMA_HMC_IW_FSIAV       = 13,\n\tIRDMA_HMC_IW_PBLE\t = 14,\n\tIRDMA_HMC_IW_RRF\t = 15,\n\tIRDMA_HMC_IW_RRFFL       = 16,\n\tIRDMA_HMC_IW_HDR\t = 17,\n\tIRDMA_HMC_IW_MD\t\t = 18,\n\tIRDMA_HMC_IW_OOISC       = 19,\n\tIRDMA_HMC_IW_OOISCFFL    = 20,\n\tIRDMA_HMC_IW_MAX,  \n};\n\nenum irdma_sd_entry_type {\n\tIRDMA_SD_TYPE_INVALID = 0,\n\tIRDMA_SD_TYPE_PAGED   = 1,\n\tIRDMA_SD_TYPE_DIRECT  = 2,\n};\n\nstruct irdma_hmc_obj_info {\n\tu64 base;\n\tu32 max_cnt;\n\tu32 cnt;\n\tu64 size;\n};\n\nstruct irdma_hmc_bp {\n\tenum irdma_sd_entry_type entry_type;\n\tstruct irdma_dma_mem addr;\n\tu32 sd_pd_index;\n\tu32 use_cnt;\n};\n\nstruct irdma_hmc_pd_entry {\n\tstruct irdma_hmc_bp bp;\n\tu32 sd_index;\n\tbool rsrc_pg:1;\n\tbool valid:1;\n};\n\nstruct irdma_hmc_pd_table {\n\tstruct irdma_dma_mem pd_page_addr;\n\tstruct irdma_hmc_pd_entry *pd_entry;\n\tstruct irdma_virt_mem pd_entry_virt_mem;\n\tu32 use_cnt;\n\tu32 sd_index;\n};\n\nstruct irdma_hmc_sd_entry {\n\tenum irdma_sd_entry_type entry_type;\n\tbool valid;\n\tunion {\n\t\tstruct irdma_hmc_pd_table pd_table;\n\t\tstruct irdma_hmc_bp bp;\n\t} u;\n};\n\nstruct irdma_hmc_sd_table {\n\tstruct irdma_virt_mem addr;\n\tu32 sd_cnt;\n\tu32 use_cnt;\n\tstruct irdma_hmc_sd_entry *sd_entry;\n};\n\nstruct irdma_hmc_info {\n\tu32 signature;\n\tu8 hmc_fn_id;\n\tu16 first_sd_index;\n\tstruct irdma_hmc_obj_info *hmc_obj;\n\tstruct irdma_virt_mem hmc_obj_virt_mem;\n\tstruct irdma_hmc_sd_table sd_table;\n\tu16 sd_indexes[IRDMA_HMC_MAX_SD_COUNT];\n};\n\nstruct irdma_update_sd_entry {\n\tu64 cmd;\n\tu64 data;\n};\n\nstruct irdma_update_sds_info {\n\tu32 cnt;\n\tu8 hmc_fn_id;\n\tstruct irdma_update_sd_entry entry[IRDMA_MAX_SD_ENTRIES];\n};\n\nstruct irdma_ccq_cqe_info;\nstruct irdma_hmc_fcn_info {\n\tu32 vf_id;\n\tu8 free_fcn;\n};\n\nstruct irdma_hmc_create_obj_info {\n\tstruct irdma_hmc_info *hmc_info;\n\tstruct irdma_virt_mem add_sd_virt_mem;\n\tu32 rsrc_type;\n\tu32 start_idx;\n\tu32 count;\n\tu32 add_sd_cnt;\n\tenum irdma_sd_entry_type entry_type;\n\tbool privileged;\n};\n\nstruct irdma_hmc_del_obj_info {\n\tstruct irdma_hmc_info *hmc_info;\n\tstruct irdma_virt_mem del_sd_virt_mem;\n\tu32 rsrc_type;\n\tu32 start_idx;\n\tu32 count;\n\tu32 del_sd_cnt;\n\tbool privileged;\n};\n\nint irdma_copy_dma_mem(struct irdma_hw *hw, void *dest_buf,\n\t\t       struct irdma_dma_mem *src_mem, u64 src_offset, u64 size);\nint irdma_sc_create_hmc_obj(struct irdma_sc_dev *dev,\n\t\t\t    struct irdma_hmc_create_obj_info *info);\nint irdma_sc_del_hmc_obj(struct irdma_sc_dev *dev,\n\t\t\t struct irdma_hmc_del_obj_info *info, bool reset);\nint irdma_hmc_sd_one(struct irdma_sc_dev *dev, u8 hmc_fn_id, u64 pa, u32 sd_idx,\n\t\t     enum irdma_sd_entry_type type,\n\t\t     bool setsd);\nint irdma_update_sds_noccq(struct irdma_sc_dev *dev,\n\t\t\t   struct irdma_update_sds_info *info);\nstruct irdma_vfdev *irdma_vfdev_from_fpm(struct irdma_sc_dev *dev,\n\t\t\t\t\t u8 hmc_fn_id);\nstruct irdma_hmc_info *irdma_vf_hmcinfo_from_fpm(struct irdma_sc_dev *dev,\n\t\t\t\t\t\t u8 hmc_fn_id);\nint irdma_add_sd_table_entry(struct irdma_hw *hw,\n\t\t\t     struct irdma_hmc_info *hmc_info, u32 sd_index,\n\t\t\t     enum irdma_sd_entry_type type, u64 direct_mode_sz);\nint irdma_add_pd_table_entry(struct irdma_sc_dev *dev,\n\t\t\t     struct irdma_hmc_info *hmc_info, u32 pd_index,\n\t\t\t     struct irdma_dma_mem *rsrc_pg);\nint irdma_remove_pd_bp(struct irdma_sc_dev *dev,\n\t\t       struct irdma_hmc_info *hmc_info, u32 idx);\nint irdma_prep_remove_sd_bp(struct irdma_hmc_info *hmc_info, u32 idx);\nint irdma_prep_remove_pd_page(struct irdma_hmc_info *hmc_info, u32 idx);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}