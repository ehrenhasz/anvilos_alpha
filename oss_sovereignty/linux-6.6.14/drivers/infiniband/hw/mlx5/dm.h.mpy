{
  "module_name": "dm.h",
  "hash_id": "94c77defb4e89b7c7d1ba5b5d3747de766bc45df554046c6d357242e09ad0181",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/mlx5/dm.h",
  "human_readable_source": " \n \n\n#ifndef _MLX5_IB_DM_H\n#define _MLX5_IB_DM_H\n\n#include \"mlx5_ib.h\"\n\nextern const struct ib_device_ops mlx5_ib_dev_dm_ops;\nextern const struct uapi_definition mlx5_ib_dm_defs[];\n\nstruct mlx5_ib_dm {\n\tstruct ib_dm\t\tibdm;\n\tu32\t\t\ttype;\n\tphys_addr_t\t\tdev_addr;\n\tsize_t\t\t\tsize;\n};\n\nstruct mlx5_ib_dm_op_entry {\n\tstruct mlx5_user_mmap_entry\tmentry;\n\tphys_addr_t\t\t\top_addr;\n\tstruct mlx5_ib_dm_memic\t\t*dm;\n\tu8\t\t\t\top;\n};\n\nstruct mlx5_ib_dm_memic {\n\tstruct mlx5_ib_dm           base;\n\tstruct mlx5_user_mmap_entry mentry;\n\tstruct xarray               ops;\n\tstruct mutex                ops_xa_lock;\n\tstruct kref                 ref;\n\tsize_t                      req_length;\n};\n\nstruct mlx5_ib_dm_icm {\n\tstruct mlx5_ib_dm      base;\n\tu32                    obj_id;\n};\n\nstatic inline struct mlx5_ib_dm *to_mdm(struct ib_dm *ibdm)\n{\n\treturn container_of(ibdm, struct mlx5_ib_dm, ibdm);\n}\n\nstatic inline struct mlx5_ib_dm_memic *to_memic(struct ib_dm *ibdm)\n{\n\treturn container_of(ibdm, struct mlx5_ib_dm_memic, base.ibdm);\n}\n\nstatic inline struct mlx5_ib_dm_icm *to_icm(struct ib_dm *ibdm)\n{\n\treturn container_of(ibdm, struct mlx5_ib_dm_icm, base.ibdm);\n}\n\nstruct ib_dm *mlx5_ib_alloc_dm(struct ib_device *ibdev,\n\t\t\t       struct ib_ucontext *context,\n\t\t\t       struct ib_dm_alloc_attr *attr,\n\t\t\t       struct uverbs_attr_bundle *attrs);\nvoid mlx5_ib_dm_mmap_free(struct mlx5_ib_dev *dev,\n\t\t\t  struct mlx5_user_mmap_entry *mentry);\nvoid mlx5_cmd_dealloc_memic(struct mlx5_dm *dm, phys_addr_t addr,\n\t\t\t    u64 length);\nvoid mlx5_cmd_dealloc_memic_op(struct mlx5_dm *dm, phys_addr_t addr,\n\t\t\t       u8 operation);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}