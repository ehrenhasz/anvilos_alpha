{
  "module_name": "mthca_cmd.h",
  "hash_id": "f20fb5271882614eb4377348594f9ea9a777005f9508852c217f403178bc0cff",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/mthca/mthca_cmd.h",
  "human_readable_source": " \n\n#ifndef MTHCA_CMD_H\n#define MTHCA_CMD_H\n\n#include <rdma/ib_verbs.h>\n\n#define MTHCA_MAILBOX_SIZE 4096\n\nenum {\n\t \n\tMTHCA_CMD_STAT_OK \t      = 0x00,\n\t \n\tMTHCA_CMD_STAT_INTERNAL_ERR   = 0x01,\n\t \n\tMTHCA_CMD_STAT_BAD_OP \t      = 0x02,\n\t \n\tMTHCA_CMD_STAT_BAD_PARAM      = 0x03,\n\t \n\tMTHCA_CMD_STAT_BAD_SYS_STATE  = 0x04,\n\t \n\tMTHCA_CMD_STAT_BAD_RESOURCE   = 0x05,\n\t \n\tMTHCA_CMD_STAT_RESOURCE_BUSY  = 0x06,\n\t \n\tMTHCA_CMD_STAT_DDR_MEM_ERR    = 0x07,\n\t \n\tMTHCA_CMD_STAT_EXCEED_LIM     = 0x08,\n\t \n\tMTHCA_CMD_STAT_BAD_RES_STATE  = 0x09,\n\t \n\tMTHCA_CMD_STAT_BAD_INDEX      = 0x0a,\n\t \n\tMTHCA_CMD_STAT_BAD_NVMEM      = 0x0b,\n\t \n\tMTHCA_CMD_STAT_BAD_QPEE_STATE = 0x10,\n\t \n\tMTHCA_CMD_STAT_BAD_SEG_PARAM  = 0x20,\n\t \n\tMTHCA_CMD_STAT_REG_BOUND      = 0x21,\n\t \n\tMTHCA_CMD_STAT_LAM_NOT_PRE    = 0x22,\n\t \n\tMTHCA_CMD_STAT_BAD_PKT \t      = 0x30,\n\t \n\tMTHCA_CMD_STAT_BAD_SIZE       = 0x40\n};\n\nenum {\n\tMTHCA_TRANS_INVALID = 0,\n\tMTHCA_TRANS_RST2INIT,\n\tMTHCA_TRANS_INIT2INIT,\n\tMTHCA_TRANS_INIT2RTR,\n\tMTHCA_TRANS_RTR2RTS,\n\tMTHCA_TRANS_RTS2RTS,\n\tMTHCA_TRANS_SQERR2RTS,\n\tMTHCA_TRANS_ANY2ERR,\n\tMTHCA_TRANS_RTS2SQD,\n\tMTHCA_TRANS_SQD2SQD,\n\tMTHCA_TRANS_SQD2RTS,\n\tMTHCA_TRANS_ANY2RST,\n};\n\nenum {\n\tDEV_LIM_FLAG_RC                 = 1 << 0,\n\tDEV_LIM_FLAG_UC                 = 1 << 1,\n\tDEV_LIM_FLAG_UD                 = 1 << 2,\n\tDEV_LIM_FLAG_RD                 = 1 << 3,\n\tDEV_LIM_FLAG_RAW_IPV6           = 1 << 4,\n\tDEV_LIM_FLAG_RAW_ETHER          = 1 << 5,\n\tDEV_LIM_FLAG_SRQ                = 1 << 6,\n\tDEV_LIM_FLAG_IPOIB_CSUM\t\t= 1 << 7,\n\tDEV_LIM_FLAG_BAD_PKEY_CNTR      = 1 << 8,\n\tDEV_LIM_FLAG_BAD_QKEY_CNTR      = 1 << 9,\n\tDEV_LIM_FLAG_MW                 = 1 << 16,\n\tDEV_LIM_FLAG_AUTO_PATH_MIG      = 1 << 17,\n\tDEV_LIM_FLAG_ATOMIC             = 1 << 18,\n\tDEV_LIM_FLAG_RAW_MULTI          = 1 << 19,\n\tDEV_LIM_FLAG_UD_AV_PORT_ENFORCE = 1 << 20,\n\tDEV_LIM_FLAG_UD_MULTI           = 1 << 21,\n};\n\nstruct mthca_mailbox {\n\tdma_addr_t dma;\n\tvoid      *buf;\n};\n\nstruct mthca_dev_lim {\n\tint max_srq_sz;\n\tint max_qp_sz;\n\tint reserved_qps;\n\tint max_qps;\n\tint reserved_srqs;\n\tint max_srqs;\n\tint reserved_eecs;\n\tint max_eecs;\n\tint max_cq_sz;\n\tint reserved_cqs;\n\tint max_cqs;\n\tint max_mpts;\n\tint reserved_eqs;\n\tint max_eqs;\n\tint reserved_mtts;\n\tint max_mrw_sz;\n\tint reserved_mrws;\n\tint max_mtt_seg;\n\tint max_requester_per_qp;\n\tint max_responder_per_qp;\n\tint max_rdma_global;\n\tint local_ca_ack_delay;\n\tint max_mtu;\n\tint max_port_width;\n\tint max_vl;\n\tint num_ports;\n\tint max_gids;\n\tu16 stat_rate_support;\n\tint max_pkeys;\n\tu32 flags;\n\tint reserved_uars;\n\tint uar_size;\n\tint min_page_sz;\n\tint max_sg;\n\tint max_desc_sz;\n\tint max_qp_per_mcg;\n\tint reserved_mgms;\n\tint max_mcgs;\n\tint reserved_pds;\n\tint max_pds;\n\tint reserved_rdds;\n\tint max_rdds;\n\tint eec_entry_sz;\n\tint qpc_entry_sz;\n\tint eeec_entry_sz;\n\tint eqpc_entry_sz;\n\tint eqc_entry_sz;\n\tint cqc_entry_sz;\n\tint srq_entry_sz;\n\tint uar_scratch_entry_sz;\n\tint mpt_entry_sz;\n\tunion {\n\t\tstruct {\n\t\t\tint max_avs;\n\t\t} tavor;\n\t\tstruct {\n\t\t\tint resize_srq;\n\t\t\tint max_pbl_sz;\n\t\t\tu8  bmme_flags;\n\t\t\tu32 reserved_lkey;\n\t\t\tint lam_required;\n\t\t\tu64 max_icm_sz;\n\t\t} arbel;\n\t} hca;\n};\n\nstruct mthca_adapter {\n\tu32  vendor_id;\n\tu32  device_id;\n\tu32  revision_id;\n\tchar board_id[MTHCA_BOARD_ID_LEN];\n\tu8   inta_pin;\n};\n\nstruct mthca_init_hca_param {\n\tu64 qpc_base;\n\tu64 eec_base;\n\tu64 srqc_base;\n\tu64 cqc_base;\n\tu64 eqpc_base;\n\tu64 eeec_base;\n\tu64 eqc_base;\n\tu64 rdb_base;\n\tu64 mc_base;\n\tu64 mpt_base;\n\tu64 mtt_base;\n\tu64 uar_scratch_base;\n\tu64 uarc_base;\n\tu16 log_mc_entry_sz;\n\tu16 mc_hash_sz;\n\tu8  log_num_qps;\n\tu8  log_num_eecs;\n\tu8  log_num_srqs;\n\tu8  log_num_cqs;\n\tu8  log_num_eqs;\n\tu8  log_mc_table_sz;\n\tu8  mtt_seg_sz;\n\tu8  log_mpt_sz;\n\tu8  log_uar_sz;\n\tu8  log_uarc_sz;\n};\n\nstruct mthca_init_ib_param {\n\tint port_width;\n\tint vl_cap;\n\tint mtu_cap;\n\tu16 gid_cap;\n\tu16 pkey_cap;\n\tint set_guid0;\n\tu64 guid0;\n\tint set_node_guid;\n\tu64 node_guid;\n\tint set_si_guid;\n\tu64 si_guid;\n};\n\nstruct mthca_set_ib_param {\n\tint set_si_guid;\n\tint reset_qkey_viol;\n\tu64 si_guid;\n\tu32 cap_mask;\n};\n\nint mthca_cmd_init(struct mthca_dev *dev);\nvoid mthca_cmd_cleanup(struct mthca_dev *dev);\nint mthca_cmd_use_events(struct mthca_dev *dev);\nvoid mthca_cmd_use_polling(struct mthca_dev *dev);\nvoid mthca_cmd_event(struct mthca_dev *dev, u16 token,\n\t\t     u8  status, u64 out_param);\n\nstruct mthca_mailbox *mthca_alloc_mailbox(struct mthca_dev *dev,\n\t\t\t\t\t  gfp_t gfp_mask);\nvoid mthca_free_mailbox(struct mthca_dev *dev, struct mthca_mailbox *mailbox);\n\nint mthca_SYS_EN(struct mthca_dev *dev);\nint mthca_SYS_DIS(struct mthca_dev *dev);\nint mthca_MAP_FA(struct mthca_dev *dev, struct mthca_icm *icm);\nint mthca_UNMAP_FA(struct mthca_dev *dev);\nint mthca_RUN_FW(struct mthca_dev *dev);\nint mthca_QUERY_FW(struct mthca_dev *dev);\nint mthca_ENABLE_LAM(struct mthca_dev *dev);\nint mthca_DISABLE_LAM(struct mthca_dev *dev);\nint mthca_QUERY_DDR(struct mthca_dev *dev);\nint mthca_QUERY_DEV_LIM(struct mthca_dev *dev,\n\t\t\tstruct mthca_dev_lim *dev_lim);\nint mthca_QUERY_ADAPTER(struct mthca_dev *dev,\n\t\t\tstruct mthca_adapter *adapter);\nint mthca_INIT_HCA(struct mthca_dev *dev,\n\t\t   struct mthca_init_hca_param *param);\nint mthca_INIT_IB(struct mthca_dev *dev,\n\t\t  struct mthca_init_ib_param *param,\n\t\t  int port);\nint mthca_CLOSE_IB(struct mthca_dev *dev, int port);\nint mthca_CLOSE_HCA(struct mthca_dev *dev, int panic);\nint mthca_SET_IB(struct mthca_dev *dev, struct mthca_set_ib_param *param,\n\t\t int port);\nint mthca_MAP_ICM(struct mthca_dev *dev, struct mthca_icm *icm, u64 virt);\nint mthca_MAP_ICM_page(struct mthca_dev *dev, u64 dma_addr, u64 virt);\nint mthca_UNMAP_ICM(struct mthca_dev *dev, u64 virt, u32 page_count);\nint mthca_MAP_ICM_AUX(struct mthca_dev *dev, struct mthca_icm *icm);\nint mthca_UNMAP_ICM_AUX(struct mthca_dev *dev);\nint mthca_SET_ICM_SIZE(struct mthca_dev *dev, u64 icm_size, u64 *aux_pages);\nint mthca_SW2HW_MPT(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    int mpt_index);\nint mthca_HW2SW_MPT(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    int mpt_index);\nint mthca_WRITE_MTT(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    int num_mtt);\nint mthca_SYNC_TPT(struct mthca_dev *dev);\nint mthca_MAP_EQ(struct mthca_dev *dev, u64 event_mask, int unmap,\n\t\t int eq_num);\nint mthca_SW2HW_EQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t   int eq_num);\nint mthca_HW2SW_EQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t   int eq_num);\nint mthca_SW2HW_CQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t   int cq_num);\nint mthca_HW2SW_CQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t   int cq_num);\nint mthca_RESIZE_CQ(struct mthca_dev *dev, int cq_num, u32 lkey, u8 log_size);\nint mthca_SW2HW_SRQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    int srq_num);\nint mthca_HW2SW_SRQ(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    int srq_num);\nint mthca_QUERY_SRQ(struct mthca_dev *dev, u32 num,\n\t\t    struct mthca_mailbox *mailbox);\nint mthca_ARM_SRQ(struct mthca_dev *dev, int srq_num, int limit);\nint mthca_MODIFY_QP(struct mthca_dev *dev, enum ib_qp_state cur,\n\t\t    enum ib_qp_state next, u32 num, int is_ee,\n\t\t    struct mthca_mailbox *mailbox, u32 optmask);\nint mthca_QUERY_QP(struct mthca_dev *dev, u32 num, int is_ee,\n\t\t   struct mthca_mailbox *mailbox);\nint mthca_CONF_SPECIAL_QP(struct mthca_dev *dev, int type, u32 qpn);\nint mthca_MAD_IFC(struct mthca_dev *dev, int ignore_mkey, int ignore_bkey,\n\t\t  int port, const struct ib_wc *in_wc, const struct ib_grh *in_grh,\n\t\t  const void *in_mad, void *response_mad);\nint mthca_READ_MGM(struct mthca_dev *dev, int index,\n\t\t   struct mthca_mailbox *mailbox);\nint mthca_WRITE_MGM(struct mthca_dev *dev, int index,\n\t\t    struct mthca_mailbox *mailbox);\nint mthca_MGID_HASH(struct mthca_dev *dev, struct mthca_mailbox *mailbox,\n\t\t    u16 *hash);\nint mthca_NOP(struct mthca_dev *dev);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}