{
  "module_name": "bnxt_re.h",
  "hash_id": "4970acce7e8f2943928b56cee752062884e96def7bedfcb8b8826c890a6e102f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/bnxt_re/bnxt_re.h",
  "human_readable_source": " \n\n#ifndef __BNXT_RE_H__\n#define __BNXT_RE_H__\n#include <rdma/uverbs_ioctl.h>\n#include \"hw_counters.h\"\n#define ROCE_DRV_MODULE_NAME\t\t\"bnxt_re\"\n\n#define BNXT_RE_DESC\t\"Broadcom NetXtreme-C/E RoCE Driver\"\n\n#define BNXT_RE_PAGE_SHIFT_1G\t\t(30)\n#define BNXT_RE_PAGE_SIZE_SUPPORTED\t0x7FFFF000  \n\n#define BNXT_RE_MAX_MR_SIZE_LOW\t\tBIT_ULL(BNXT_RE_PAGE_SHIFT_1G)\n#define BNXT_RE_MAX_MR_SIZE_HIGH\tBIT_ULL(39)\n#define BNXT_RE_MAX_MR_SIZE\t\tBNXT_RE_MAX_MR_SIZE_HIGH\n\n#define BNXT_RE_MAX_QPC_COUNT\t\t(64 * 1024)\n#define BNXT_RE_MAX_MRW_COUNT\t\t(64 * 1024)\n#define BNXT_RE_MAX_SRQC_COUNT\t\t(64 * 1024)\n#define BNXT_RE_MAX_CQ_COUNT\t\t(64 * 1024)\n#define BNXT_RE_MAX_MRW_COUNT_64K\t(64 * 1024)\n#define BNXT_RE_MAX_MRW_COUNT_256K\t(256 * 1024)\n\n \n#define BNXT_RE_RESVD_MR_FOR_PF         (32 * 1024)\n#define BNXT_RE_MAX_GID_PER_VF          128\n\n \n#define BNXT_RE_PCT_RSVD_FOR_PF         50\n\n#define BNXT_RE_UD_QP_HW_STALL\t\t0x400000\n\n#define BNXT_RE_RQ_WQE_THRESHOLD\t32\n\n \n\n#define BNXT_RE_DEFAULT_ACK_DELAY\t16\n\nstruct bnxt_re_ring_attr {\n\tdma_addr_t\t*dma_arr;\n\tint\t\tpages;\n\tint\t\ttype;\n\tu32\t\tdepth;\n\tu32\t\tlrid;  \n\tu8\t\tmode;\n};\n\nstruct bnxt_re_sqp_entries {\n\tstruct bnxt_qplib_sge sge;\n\tu64 wrid;\n\t \n\tstruct bnxt_qplib_cqe cqe;\n\tstruct bnxt_re_qp *qp1_qp;\n};\n\n#define BNXT_RE_MAX_GSI_SQP_ENTRIES\t1024\nstruct bnxt_re_gsi_context {\n\tstruct\tbnxt_re_qp *gsi_qp;\n\tstruct\tbnxt_re_qp *gsi_sqp;\n\tstruct\tbnxt_re_ah *gsi_sah;\n\tstruct\tbnxt_re_sqp_entries *sqp_tbl;\n};\n\n#define BNXT_RE_MIN_MSIX\t\t2\n#define BNXT_RE_MAX_MSIX\t\t9\n#define BNXT_RE_AEQ_IDX\t\t\t0\n#define BNXT_RE_NQ_IDX\t\t\t1\n#define BNXT_RE_GEN_P5_MAX_VF\t\t64\n\nstruct bnxt_re_pacing {\n\tu64 dbr_db_fifo_reg_off;\n\tvoid *dbr_page;\n\tu64 dbr_bar_addr;\n\tu32 pacing_algo_th;\n\tu32 do_pacing_save;\n\tu32 dbq_pacing_time;  \n\tu32 dbr_def_do_pacing;\n\tbool dbr_pacing;\n\tstruct mutex dbq_lock;  \n};\n\n#define BNXT_RE_MAX_DBR_DO_PACING 0xFFFF\n#define BNXT_RE_DBR_PACING_TIME 5  \n#define BNXT_RE_PACING_ALGO_THRESHOLD 250  \n#define BNXT_RE_PACING_ALARM_TH_MULTIPLE 2  \n \n#define BNXT_RE_DBR_DO_PACING_NO_CONGESTION 0x7F  \n#define BNXT_RE_DB_FIFO_ROOM_MASK 0x1FFF8000\n#define BNXT_RE_MAX_FIFO_DEPTH 0x2c00\n#define BNXT_RE_DB_FIFO_ROOM_SHIFT 15\n#define BNXT_RE_GRC_FIFO_REG_BASE 0x2000\n\nstruct bnxt_re_dev {\n\tstruct ib_device\t\tibdev;\n\tstruct list_head\t\tlist;\n\tunsigned long\t\t\tflags;\n#define BNXT_RE_FLAG_NETDEV_REGISTERED\t\t0\n#define BNXT_RE_FLAG_HAVE_L2_REF\t\t3\n#define BNXT_RE_FLAG_RCFW_CHANNEL_EN\t\t4\n#define BNXT_RE_FLAG_QOS_WORK_REG\t\t5\n#define BNXT_RE_FLAG_RESOURCES_ALLOCATED\t7\n#define BNXT_RE_FLAG_RESOURCES_INITIALIZED\t8\n#define BNXT_RE_FLAG_ERR_DEVICE_DETACHED       17\n#define BNXT_RE_FLAG_ISSUE_ROCE_STATS          29\n\tstruct net_device\t\t*netdev;\n\tstruct notifier_block\t\tnb;\n\tunsigned int\t\t\tversion, major, minor;\n\tstruct bnxt_qplib_chip_ctx\t*chip_ctx;\n\tstruct bnxt_en_dev\t\t*en_dev;\n\tint\t\t\t\tnum_msix;\n\n\tint\t\t\t\tid;\n\n\tstruct delayed_work\t\tworker;\n\tu8\t\t\t\tcur_prio_map;\n\n\t \n\tstruct tasklet_struct\t\tnq_task;\n\n\t \n\tstruct bnxt_qplib_rcfw\t\trcfw;\n\n\t \n\tstruct bnxt_qplib_nq\t\tnq[BNXT_RE_MAX_MSIX];\n\n\t \n\tstruct bnxt_qplib_dev_attr\tdev_attr;\n\tstruct bnxt_qplib_ctx\t\tqplib_ctx;\n\tstruct bnxt_qplib_res\t\tqplib_res;\n\tstruct bnxt_qplib_dpi\t\tdpi_privileged;\n\n\tstruct mutex\t\t\tqp_lock;\t \n\tstruct list_head\t\tqp_list;\n\n\t \n\tu16\t\t\t\tcosq[2];\n\n\t \n\tstruct bnxt_re_gsi_context\tgsi_ctx;\n\tstruct bnxt_re_stats\t\tstats;\n\tatomic_t nq_alloc_cnt;\n\tu32 is_virtfn;\n\tu32 num_vfs;\n\tstruct bnxt_re_pacing pacing;\n\tstruct work_struct dbq_fifo_check_work;\n\tstruct delayed_work dbq_pacing_work;\n};\n\n#define to_bnxt_re_dev(ptr, member)\t\\\n\tcontainer_of((ptr), struct bnxt_re_dev, member)\n\n#define BNXT_RE_ROCE_V1_PACKET\t\t0\n#define BNXT_RE_ROCEV2_IPV4_PACKET\t2\n#define BNXT_RE_ROCEV2_IPV6_PACKET\t3\n\n#define BNXT_RE_CHECK_RC(x) ((x) && ((x) != -ETIMEDOUT))\nvoid bnxt_re_pacing_alert(struct bnxt_re_dev *rdev);\n\nstatic inline struct device *rdev_to_dev(struct bnxt_re_dev *rdev)\n{\n\tif (rdev)\n\t\treturn  &rdev->ibdev.dev;\n\treturn NULL;\n}\n\nextern const struct uapi_definition bnxt_re_uapi_defs[];\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}