{
  "module_name": "qplib_fp.h",
  "hash_id": "134fcb286b537fb424c17e90b0e015e7bc60829dafdc31c5697f5191bde498f3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/bnxt_re/qplib_fp.h",
  "human_readable_source": " \n\n#ifndef __BNXT_QPLIB_FP_H__\n#define __BNXT_QPLIB_FP_H__\n\n#include <rdma/bnxt_re-abi.h>\n\n \nstruct sq_ud_ext_hdr {\n\t__le32 dst_qp;\n\t__le32 avid;\n\t__le64 rsvd;\n};\n\nstruct sq_raw_ext_hdr {\n\t__le32 cfa_meta;\n\t__le32 rsvd0;\n\t__le64 rsvd1;\n};\n\nstruct sq_rdma_ext_hdr {\n\t__le64 remote_va;\n\t__le32 remote_key;\n\t__le32 rsvd;\n};\n\nstruct sq_atomic_ext_hdr {\n\t__le64 swap_data;\n\t__le64 cmp_data;\n};\n\nstruct sq_fr_pmr_ext_hdr {\n\t__le64 pblptr;\n\t__le64 va;\n};\n\nstruct sq_bind_ext_hdr {\n\t__le64 va;\n\t__le32 length_lo;\n\t__le32 length_hi;\n};\n\nstruct rq_ext_hdr {\n\t__le64 rsvd1;\n\t__le64 rsvd2;\n};\n\n \n\nstruct bnxt_qplib_srq {\n\tstruct bnxt_qplib_pd\t\t*pd;\n\tstruct bnxt_qplib_dpi\t\t*dpi;\n\tstruct bnxt_qplib_db_info\tdbinfo;\n\tu64\t\t\t\tsrq_handle;\n\tu32\t\t\t\tid;\n\tu16\t\t\t\twqe_size;\n\tu32\t\t\t\tmax_wqe;\n\tu32\t\t\t\tmax_sge;\n\tu32\t\t\t\tthreshold;\n\tbool\t\t\t\tarm_req;\n\tstruct bnxt_qplib_cq\t\t*cq;\n\tstruct bnxt_qplib_hwq\t\thwq;\n\tstruct bnxt_qplib_swq\t\t*swq;\n\tint\t\t\t\tstart_idx;\n\tint\t\t\t\tlast_idx;\n\tstruct bnxt_qplib_sg_info\tsg_info;\n\tu16\t\t\t\teventq_hw_ring_id;\n\tspinlock_t\t\t\tlock;  \n};\n\nstruct bnxt_qplib_sge {\n\tu64\t\t\t\taddr;\n\tu32\t\t\t\tlkey;\n\tu32\t\t\t\tsize;\n};\n\n#define BNXT_QPLIB_QP_MAX_SGL\t6\nstruct bnxt_qplib_swq {\n\tu64\t\t\t\twr_id;\n\tint\t\t\t\tnext_idx;\n\tu8\t\t\t\ttype;\n\tu8\t\t\t\tflags;\n\tu32\t\t\t\tstart_psn;\n\tu32\t\t\t\tnext_psn;\n\tu32\t\t\t\tslot_idx;\n\tu8\t\t\t\tslots;\n\tstruct sq_psn_search\t\t*psn_search;\n\tstruct sq_psn_search_ext\t*psn_ext;\n};\n\nstruct bnxt_qplib_swqe {\n\t \n#define\tBNXT_QPLIB_FENCE_WRID\t0x46454E43\t \n\tu64\t\t\t\twr_id;\n\tu8\t\t\t\treqs_type;\n\tu8\t\t\t\ttype;\n#define BNXT_QPLIB_SWQE_TYPE_SEND\t\t\t0\n#define BNXT_QPLIB_SWQE_TYPE_SEND_WITH_IMM\t\t1\n#define BNXT_QPLIB_SWQE_TYPE_SEND_WITH_INV\t\t2\n#define BNXT_QPLIB_SWQE_TYPE_RDMA_WRITE\t\t\t4\n#define BNXT_QPLIB_SWQE_TYPE_RDMA_WRITE_WITH_IMM\t5\n#define BNXT_QPLIB_SWQE_TYPE_RDMA_READ\t\t\t6\n#define BNXT_QPLIB_SWQE_TYPE_ATOMIC_CMP_AND_SWP\t\t8\n#define BNXT_QPLIB_SWQE_TYPE_ATOMIC_FETCH_AND_ADD\t11\n#define BNXT_QPLIB_SWQE_TYPE_LOCAL_INV\t\t\t12\n#define BNXT_QPLIB_SWQE_TYPE_FAST_REG_MR\t\t13\n#define BNXT_QPLIB_SWQE_TYPE_REG_MR\t\t\t13\n#define BNXT_QPLIB_SWQE_TYPE_BIND_MW\t\t\t14\n#define BNXT_QPLIB_SWQE_TYPE_RECV\t\t\t128\n#define BNXT_QPLIB_SWQE_TYPE_RECV_RDMA_IMM\t\t129\n\tu8\t\t\t\tflags;\n#define BNXT_QPLIB_SWQE_FLAGS_SIGNAL_COMP\t\tBIT(0)\n#define BNXT_QPLIB_SWQE_FLAGS_RD_ATOMIC_FENCE\t\tBIT(1)\n#define BNXT_QPLIB_SWQE_FLAGS_UC_FENCE\t\t\tBIT(2)\n#define BNXT_QPLIB_SWQE_FLAGS_SOLICIT_EVENT\t\tBIT(3)\n#define BNXT_QPLIB_SWQE_FLAGS_INLINE\t\t\tBIT(4)\n\tstruct bnxt_qplib_sge\t\tsg_list[BNXT_QPLIB_QP_MAX_SGL];\n\tint\t\t\t\tnum_sge;\n\t \n\tu32\t\t\t\tinline_len;\n#define BNXT_QPLIB_SWQE_MAX_INLINE_LENGTH\t\t96\n\tu8\t\tinline_data[BNXT_QPLIB_SWQE_MAX_INLINE_LENGTH];\n\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\tunion {\n\t\t\t\t__be32\timm_data;\n\t\t\t\tu32\tinv_key;\n\t\t\t};\n\t\t\tu32\t\tq_key;\n\t\t\tu32\t\tdst_qp;\n\t\t\tu16\t\tavid;\n\t\t} send;\n\n\t\t \n\t\tstruct {\n\t\t\tu16\t\tlflags;\n\t\t\tu16\t\tcfa_action;\n\t\t\tu32\t\tcfa_meta;\n\t\t} rawqp1;\n\n\t\t \n\t\tstruct {\n\t\t\tunion {\n\t\t\t\t__be32\timm_data;\n\t\t\t\tu32\tinv_key;\n\t\t\t};\n\t\t\tu64\t\tremote_va;\n\t\t\tu32\t\tr_key;\n\t\t} rdma;\n\n\t\t \n\t\tstruct {\n\t\t\tu64\t\tremote_va;\n\t\t\tu32\t\tr_key;\n\t\t\tu64\t\tswap_data;\n\t\t\tu64\t\tcmp_data;\n\t\t} atomic;\n\n\t\t \n\t\tstruct {\n\t\t\tu32\t\tinv_l_key;\n\t\t} local_inv;\n\n\t\t \n\t\tstruct {\n\t\t\tu8\t\taccess_cntl;\n\t\t\tu8\t\tpg_sz_log;\n\t\t\tbool\t\tzero_based;\n\t\t\tu32\t\tl_key;\n\t\t\tu32\t\tlength;\n\t\t\tu8\t\tpbl_pg_sz_log;\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_4K\t\t\t0\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_8K\t\t\t1\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_64K\t\t\t4\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_256K\t\t\t6\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_1M\t\t\t8\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_2M\t\t\t9\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_4M\t\t\t10\n#define BNXT_QPLIB_SWQE_PAGE_SIZE_1G\t\t\t18\n\t\t\tu8\t\tlevels;\n#define PAGE_SHIFT_4K\t12\n\t\t\t__le64\t\t*pbl_ptr;\n\t\t\tdma_addr_t\tpbl_dma_ptr;\n\t\t\tu64\t\t*page_list;\n\t\t\tu16\t\tpage_list_len;\n\t\t\tu64\t\tva;\n\t\t} frmr;\n\n\t\t \n\t\tstruct {\n\t\t\tu8\t\taccess_cntl;\n#define BNXT_QPLIB_BIND_SWQE_ACCESS_LOCAL_WRITE\t\tBIT(0)\n#define BNXT_QPLIB_BIND_SWQE_ACCESS_REMOTE_READ\t\tBIT(1)\n#define BNXT_QPLIB_BIND_SWQE_ACCESS_REMOTE_WRITE\tBIT(2)\n#define BNXT_QPLIB_BIND_SWQE_ACCESS_REMOTE_ATOMIC\tBIT(3)\n#define BNXT_QPLIB_BIND_SWQE_ACCESS_WINDOW_BIND\t\tBIT(4)\n\t\t\tbool\t\tzero_based;\n\t\t\tu8\t\tmw_type;\n\t\t\tu32\t\tparent_l_key;\n\t\t\tu32\t\tr_key;\n\t\t\tu64\t\tva;\n\t\t\tu32\t\tlength;\n\t\t} bind;\n\t};\n};\n\nstruct bnxt_qplib_q {\n\tstruct bnxt_qplib_hwq\t\thwq;\n\tstruct bnxt_qplib_swq\t\t*swq;\n\tstruct bnxt_qplib_db_info\tdbinfo;\n\tstruct bnxt_qplib_sg_info\tsg_info;\n\tu32\t\t\t\tmax_wqe;\n\tu16\t\t\t\twqe_size;\n\tu16\t\t\t\tq_full_delta;\n\tu16\t\t\t\tmax_sge;\n\tu32\t\t\t\tpsn;\n\tbool\t\t\t\tcondition;\n\tbool\t\t\t\tsingle;\n\tbool\t\t\t\tsend_phantom;\n\tu32\t\t\t\tphantom_wqe_cnt;\n\tu32\t\t\t\tphantom_cqe_cnt;\n\tu32\t\t\t\tnext_cq_cons;\n\tbool\t\t\t\tflushed;\n\tu32\t\t\t\tswq_start;\n\tu32\t\t\t\tswq_last;\n};\n\nstruct bnxt_qplib_qp {\n\tstruct bnxt_qplib_pd\t\t*pd;\n\tstruct bnxt_qplib_dpi\t\t*dpi;\n\tstruct bnxt_qplib_chip_ctx\t*cctx;\n\tu64\t\t\t\tqp_handle;\n#define BNXT_QPLIB_QP_ID_INVALID        0xFFFFFFFF\n\tu32\t\t\t\tid;\n\tu8\t\t\t\ttype;\n\tu8\t\t\t\tsig_type;\n\tu8\t\t\t\twqe_mode;\n\tu8\t\t\t\tstate;\n\tu8\t\t\t\tcur_qp_state;\n\tu64\t\t\t\tmodify_flags;\n\tu32\t\t\t\tmax_inline_data;\n\tu32\t\t\t\tmtu;\n\tu8\t\t\t\tpath_mtu;\n\tbool\t\t\t\ten_sqd_async_notify;\n\tu16\t\t\t\tpkey_index;\n\tu32\t\t\t\tqkey;\n\tu32\t\t\t\tdest_qp_id;\n\tu8\t\t\t\taccess;\n\tu8\t\t\t\ttimeout;\n\tu8\t\t\t\tretry_cnt;\n\tu8\t\t\t\trnr_retry;\n\tu64\t\t\t\twqe_cnt;\n\tu32\t\t\t\tmin_rnr_timer;\n\tu32\t\t\t\tmax_rd_atomic;\n\tu32\t\t\t\tmax_dest_rd_atomic;\n\tu32\t\t\t\tdest_qpn;\n\tu8\t\t\t\tsmac[6];\n\tu16\t\t\t\tvlan_id;\n\tu8\t\t\t\tnw_type;\n\tstruct bnxt_qplib_ah\t\tah;\n\n#define BTH_PSN_MASK\t\t\t((1 << 24) - 1)\n\t \n\tstruct bnxt_qplib_q\t\tsq;\n\t \n\tstruct bnxt_qplib_q\t\trq;\n\t \n\tstruct bnxt_qplib_srq\t\t*srq;\n\t \n\tstruct bnxt_qplib_cq\t\t*scq;\n\tstruct bnxt_qplib_cq\t\t*rcq;\n\t \n\tstruct bnxt_qplib_hwq\t\tirrq;\n\tstruct bnxt_qplib_hwq\t\torrq;\n\t \n\tint\t\t\t\tsq_hdr_buf_size;\n\tint\t\t\t\trq_hdr_buf_size;\n \n#define BNXT_QPLIB_MAX_QP1_SQ_HDR_SIZE_V2\t86\n\t \n\t \n\t \n\t \n\t \n#define BNXT_QPLIB_MAX_QP1_RQ_ETH_HDR_SIZE\t14\n#define BNXT_QPLIB_MAX_QP1_RQ_HDR_SIZE_V2\t512\n#define BNXT_QPLIB_MAX_GRH_HDR_SIZE_IPV4\t20\n#define BNXT_QPLIB_MAX_GRH_HDR_SIZE_IPV6\t40\n#define BNXT_QPLIB_MAX_QP1_RQ_BDETH_HDR_SIZE\t20\n\tvoid\t\t\t\t*sq_hdr_buf;\n\tdma_addr_t\t\t\tsq_hdr_buf_map;\n\tvoid\t\t\t\t*rq_hdr_buf;\n\tdma_addr_t\t\t\trq_hdr_buf_map;\n\tstruct list_head\t\tsq_flush;\n\tstruct list_head\t\trq_flush;\n};\n\n#define BNXT_QPLIB_MAX_CQE_ENTRY_SIZE\tsizeof(struct cq_base)\n\n#define CQE_CNT_PER_PG\t\t(PAGE_SIZE / BNXT_QPLIB_MAX_CQE_ENTRY_SIZE)\n#define CQE_MAX_IDX_PER_PG\t(CQE_CNT_PER_PG - 1)\n#define CQE_PG(x)\t\t(((x) & ~CQE_MAX_IDX_PER_PG) / CQE_CNT_PER_PG)\n#define CQE_IDX(x)\t\t((x) & CQE_MAX_IDX_PER_PG)\n\n#define ROCE_CQE_CMP_V\t\t\t0\n#define CQE_CMP_VALID(hdr, raw_cons, cp_bit)\t\t\t\\\n\t(!!((hdr)->cqe_type_toggle & CQ_BASE_TOGGLE) ==\t\t\\\n\t   !((raw_cons) & (cp_bit)))\n\nstatic inline bool bnxt_qplib_queue_full(struct bnxt_qplib_q *que,\n\t\t\t\t\t u8 slots)\n{\n\tstruct bnxt_qplib_hwq *hwq;\n\tint avail;\n\n\thwq = &que->hwq;\n\t \n\tavail = hwq->cons - hwq->prod;\n\tif (hwq->cons <= hwq->prod)\n\t\tavail += hwq->depth;\n\treturn avail <= slots;\n}\n\nstruct bnxt_qplib_cqe {\n\tu8\t\t\t\tstatus;\n\tu8\t\t\t\ttype;\n\tu8\t\t\t\topcode;\n\tu32\t\t\t\tlength;\n\tu16\t\t\t\tcfa_meta;\n\tu64\t\t\t\twr_id;\n\tunion {\n\t\t__be32\t\t\timmdata;\n\t\tu32\t\t\tinvrkey;\n\t};\n\tu64\t\t\t\tqp_handle;\n\tu64\t\t\t\tmr_handle;\n\tu16\t\t\t\tflags;\n\tu8\t\t\t\tsmac[6];\n\tu32\t\t\t\tsrc_qp;\n\tu16\t\t\t\traweth_qp1_flags;\n\tu16\t\t\t\traweth_qp1_errors;\n\tu16\t\t\t\traweth_qp1_cfa_code;\n\tu32\t\t\t\traweth_qp1_flags2;\n\tu32\t\t\t\traweth_qp1_metadata;\n\tu8\t\t\t\traweth_qp1_payload_offset;\n\tu16\t\t\t\tpkey_index;\n};\n\n#define BNXT_QPLIB_QUEUE_START_PERIOD\t\t0x01\nstruct bnxt_qplib_cq {\n\tstruct bnxt_qplib_dpi\t\t*dpi;\n\tstruct bnxt_qplib_db_info\tdbinfo;\n\tu32\t\t\t\tmax_wqe;\n\tu32\t\t\t\tid;\n\tu16\t\t\t\tcount;\n\tu16\t\t\t\tperiod;\n\tstruct bnxt_qplib_hwq\t\thwq;\n\tstruct bnxt_qplib_hwq\t\tresize_hwq;\n\tu32\t\t\t\tcnq_hw_ring_id;\n\tstruct bnxt_qplib_nq\t\t*nq;\n\tbool\t\t\t\tresize_in_progress;\n\tstruct bnxt_qplib_sg_info\tsg_info;\n\tu64\t\t\t\tcq_handle;\n\n#define CQ_RESIZE_WAIT_TIME_MS\t\t500\n\tunsigned long\t\t\tflags;\n#define CQ_FLAGS_RESIZE_IN_PROG\t\t1\n\twait_queue_head_t\t\twaitq;\n\tstruct list_head\t\tsqf_head, rqf_head;\n\tatomic_t\t\t\tarm_state;\n\tspinlock_t\t\t\tcompl_lock;  \n \n\tspinlock_t\t\t\tflush_lock;  \n\tu16\t\t\t\tcnq_events;\n};\n\n#define BNXT_QPLIB_MAX_IRRQE_ENTRY_SIZE\tsizeof(struct xrrq_irrq)\n#define BNXT_QPLIB_MAX_ORRQE_ENTRY_SIZE\tsizeof(struct xrrq_orrq)\n#define IRD_LIMIT_TO_IRRQ_SLOTS(x)\t(2 * (x) + 2)\n#define IRRQ_SLOTS_TO_IRD_LIMIT(s)\t(((s) >> 1) - 1)\n#define ORD_LIMIT_TO_ORRQ_SLOTS(x)\t((x) + 1)\n#define ORRQ_SLOTS_TO_ORD_LIMIT(s)\t((s) - 1)\n\n#define BNXT_QPLIB_MAX_NQE_ENTRY_SIZE\tsizeof(struct nq_base)\n\n#define NQE_CNT_PER_PG\t\t(PAGE_SIZE / BNXT_QPLIB_MAX_NQE_ENTRY_SIZE)\n#define NQE_MAX_IDX_PER_PG\t(NQE_CNT_PER_PG - 1)\n#define NQE_PG(x)\t\t(((x) & ~NQE_MAX_IDX_PER_PG) / NQE_CNT_PER_PG)\n#define NQE_IDX(x)\t\t((x) & NQE_MAX_IDX_PER_PG)\n\n#define NQE_CMP_VALID(hdr, raw_cons, cp_bit)\t\t\t\\\n\t(!!(le32_to_cpu((hdr)->info63_v[0]) & NQ_BASE_V) ==\t\\\n\t   !((raw_cons) & (cp_bit)))\n\n#define BNXT_QPLIB_NQE_MAX_CNT\t\t(128 * 1024)\n\n#define NQ_CONS_PCI_BAR_REGION\t\t2\n#define NQ_DB_KEY_CP\t\t\t(0x2 << CMPL_DOORBELL_KEY_SFT)\n#define NQ_DB_IDX_VALID\t\t\tCMPL_DOORBELL_IDX_VALID\n#define NQ_DB_IRQ_DIS\t\t\tCMPL_DOORBELL_MASK\n#define NQ_DB_CP_FLAGS_REARM\t\t(NQ_DB_KEY_CP |\t\t\\\n\t\t\t\t\t NQ_DB_IDX_VALID)\n#define NQ_DB_CP_FLAGS\t\t\t(NQ_DB_KEY_CP    |\t\\\n\t\t\t\t\t NQ_DB_IDX_VALID |\t\\\n\t\t\t\t\t NQ_DB_IRQ_DIS)\n\nstruct bnxt_qplib_nq_db {\n\tstruct bnxt_qplib_reg_desc\treg;\n\tstruct bnxt_qplib_db_info\tdbinfo;\n};\n\ntypedef int (*cqn_handler_t)(struct bnxt_qplib_nq *nq,\n\t\tstruct bnxt_qplib_cq *cq);\ntypedef int (*srqn_handler_t)(struct bnxt_qplib_nq *nq,\n\t\tstruct bnxt_qplib_srq *srq, u8 event);\n\nstruct bnxt_qplib_nq {\n\tstruct pci_dev\t\t\t*pdev;\n\tstruct bnxt_qplib_res\t\t*res;\n\tchar\t\t\t\t*name;\n\tstruct bnxt_qplib_hwq\t\thwq;\n\tstruct bnxt_qplib_nq_db\t\tnq_db;\n\tu16\t\t\t\tring_id;\n\tint\t\t\t\tmsix_vec;\n\tcpumask_t\t\t\tmask;\n\tstruct tasklet_struct\t\tnq_tasklet;\n\tbool\t\t\t\trequested;\n\tint\t\t\t\tbudget;\n\n\tcqn_handler_t\t\t\tcqn_handler;\n\tsrqn_handler_t\t\t\tsrqn_handler;\n\tstruct workqueue_struct\t\t*cqn_wq;\n};\n\nstruct bnxt_qplib_nq_work {\n\tstruct work_struct      work;\n\tstruct bnxt_qplib_nq    *nq;\n\tstruct bnxt_qplib_cq    *cq;\n};\n\nvoid bnxt_qplib_nq_stop_irq(struct bnxt_qplib_nq *nq, bool kill);\nvoid bnxt_qplib_disable_nq(struct bnxt_qplib_nq *nq);\nint bnxt_qplib_nq_start_irq(struct bnxt_qplib_nq *nq, int nq_indx,\n\t\t\t    int msix_vector, bool need_init);\nint bnxt_qplib_enable_nq(struct pci_dev *pdev, struct bnxt_qplib_nq *nq,\n\t\t\t int nq_idx, int msix_vector, int bar_reg_offset,\n\t\t\t cqn_handler_t cqn_handler,\n\t\t\t srqn_handler_t srq_handler);\nint bnxt_qplib_create_srq(struct bnxt_qplib_res *res,\n\t\t\t  struct bnxt_qplib_srq *srq);\nint bnxt_qplib_modify_srq(struct bnxt_qplib_res *res,\n\t\t\t  struct bnxt_qplib_srq *srq);\nint bnxt_qplib_query_srq(struct bnxt_qplib_res *res,\n\t\t\t struct bnxt_qplib_srq *srq);\nvoid bnxt_qplib_destroy_srq(struct bnxt_qplib_res *res,\n\t\t\t    struct bnxt_qplib_srq *srq);\nint bnxt_qplib_post_srq_recv(struct bnxt_qplib_srq *srq,\n\t\t\t     struct bnxt_qplib_swqe *wqe);\nint bnxt_qplib_create_qp1(struct bnxt_qplib_res *res, struct bnxt_qplib_qp *qp);\nint bnxt_qplib_create_qp(struct bnxt_qplib_res *res, struct bnxt_qplib_qp *qp);\nint bnxt_qplib_modify_qp(struct bnxt_qplib_res *res, struct bnxt_qplib_qp *qp);\nint bnxt_qplib_query_qp(struct bnxt_qplib_res *res, struct bnxt_qplib_qp *qp);\nint bnxt_qplib_destroy_qp(struct bnxt_qplib_res *res, struct bnxt_qplib_qp *qp);\nvoid bnxt_qplib_clean_qp(struct bnxt_qplib_qp *qp);\nvoid bnxt_qplib_free_qp_res(struct bnxt_qplib_res *res,\n\t\t\t    struct bnxt_qplib_qp *qp);\nvoid *bnxt_qplib_get_qp1_sq_buf(struct bnxt_qplib_qp *qp,\n\t\t\t\tstruct bnxt_qplib_sge *sge);\nvoid *bnxt_qplib_get_qp1_rq_buf(struct bnxt_qplib_qp *qp,\n\t\t\t\tstruct bnxt_qplib_sge *sge);\nu32 bnxt_qplib_get_rq_prod_index(struct bnxt_qplib_qp *qp);\ndma_addr_t bnxt_qplib_get_qp_buf_from_index(struct bnxt_qplib_qp *qp,\n\t\t\t\t\t    u32 index);\nvoid bnxt_qplib_post_send_db(struct bnxt_qplib_qp *qp);\nint bnxt_qplib_post_send(struct bnxt_qplib_qp *qp,\n\t\t\t struct bnxt_qplib_swqe *wqe);\nvoid bnxt_qplib_post_recv_db(struct bnxt_qplib_qp *qp);\nint bnxt_qplib_post_recv(struct bnxt_qplib_qp *qp,\n\t\t\t struct bnxt_qplib_swqe *wqe);\nint bnxt_qplib_create_cq(struct bnxt_qplib_res *res, struct bnxt_qplib_cq *cq);\nint bnxt_qplib_resize_cq(struct bnxt_qplib_res *res, struct bnxt_qplib_cq *cq,\n\t\t\t int new_cqes);\nvoid bnxt_qplib_resize_cq_complete(struct bnxt_qplib_res *res,\n\t\t\t\t   struct bnxt_qplib_cq *cq);\nint bnxt_qplib_destroy_cq(struct bnxt_qplib_res *res, struct bnxt_qplib_cq *cq);\nint bnxt_qplib_poll_cq(struct bnxt_qplib_cq *cq, struct bnxt_qplib_cqe *cqe,\n\t\t       int num, struct bnxt_qplib_qp **qp);\nbool bnxt_qplib_is_cq_empty(struct bnxt_qplib_cq *cq);\nvoid bnxt_qplib_req_notify_cq(struct bnxt_qplib_cq *cq, u32 arm_type);\nvoid bnxt_qplib_free_nq(struct bnxt_qplib_nq *nq);\nint bnxt_qplib_alloc_nq(struct bnxt_qplib_res *res, struct bnxt_qplib_nq *nq);\nvoid bnxt_qplib_add_flush_qp(struct bnxt_qplib_qp *qp);\nvoid bnxt_qplib_acquire_cq_locks(struct bnxt_qplib_qp *qp,\n\t\t\t\t unsigned long *flags);\nvoid bnxt_qplib_release_cq_locks(struct bnxt_qplib_qp *qp,\n\t\t\t\t unsigned long *flags);\nint bnxt_qplib_process_flush_list(struct bnxt_qplib_cq *cq,\n\t\t\t\t  struct bnxt_qplib_cqe *cqe,\n\t\t\t\t  int num_cqes);\nvoid bnxt_qplib_flush_cqn_wq(struct bnxt_qplib_qp *qp);\nvoid bnxt_re_synchronize_nq(struct bnxt_qplib_nq *nq);\n\nstatic inline void *bnxt_qplib_get_swqe(struct bnxt_qplib_q *que, u32 *swq_idx)\n{\n\tu32 idx;\n\n\tidx = que->swq_start;\n\tif (swq_idx)\n\t\t*swq_idx = idx;\n\treturn &que->swq[idx];\n}\n\nstatic inline void bnxt_qplib_swq_mod_start(struct bnxt_qplib_q *que, u32 idx)\n{\n\tque->swq_start = que->swq[idx].next_idx;\n}\n\nstatic inline u32 bnxt_qplib_get_depth(struct bnxt_qplib_q *que)\n{\n\treturn (que->wqe_size * que->max_wqe) / sizeof(struct sq_sge);\n}\n\nstatic inline u32 bnxt_qplib_set_sq_size(struct bnxt_qplib_q *que, u8 wqe_mode)\n{\n\treturn (wqe_mode == BNXT_QPLIB_WQE_MODE_STATIC) ?\n\t\tque->max_wqe : bnxt_qplib_get_depth(que);\n}\n\nstatic inline u32 bnxt_qplib_set_sq_max_slot(u8 wqe_mode)\n{\n\treturn (wqe_mode == BNXT_QPLIB_WQE_MODE_STATIC) ?\n\t\tsizeof(struct sq_send) / sizeof(struct sq_sge) : 1;\n}\n\nstatic inline u32 bnxt_qplib_set_rq_max_slot(u32 wqe_size)\n{\n\treturn (wqe_size / sizeof(struct sq_sge));\n}\n\nstatic inline u16 __xlate_qfd(u16 delta, u16 wqe_bytes)\n{\n\t \n\treturn (delta * wqe_bytes) / sizeof(struct sq_sge);\n}\n\nstatic inline u16 bnxt_qplib_calc_ilsize(struct bnxt_qplib_swqe *wqe, u16 max)\n{\n\tu16 size = 0;\n\tint indx;\n\n\tfor (indx = 0; indx < wqe->num_sge; indx++)\n\t\tsize += wqe->sg_list[indx].size;\n\tif (size > max)\n\t\tsize = max;\n\n\treturn size;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}