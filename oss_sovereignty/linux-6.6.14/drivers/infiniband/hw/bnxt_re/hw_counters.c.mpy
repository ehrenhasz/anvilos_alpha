{
  "module_name": "hw_counters.c",
  "hash_id": "f61e2c73dfbaefe3c5dea7e033b25d960049cf864530f53c97a48576d7f51a00",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/bnxt_re/hw_counters.c",
  "human_readable_source": " \n\n#include <linux/interrupt.h>\n#include <linux/types.h>\n#include <linux/spinlock.h>\n#include <linux/sched.h>\n#include <linux/slab.h>\n#include <linux/pci.h>\n#include <linux/prefetch.h>\n#include <linux/delay.h>\n\n#include <rdma/ib_addr.h>\n\n#include \"bnxt_ulp.h\"\n#include \"roce_hsi.h\"\n#include \"qplib_res.h\"\n#include \"qplib_sp.h\"\n#include \"qplib_fp.h\"\n#include \"qplib_rcfw.h\"\n#include \"bnxt_re.h\"\n#include \"hw_counters.h\"\n\nstatic const struct rdma_stat_desc bnxt_re_stat_descs[] = {\n\t[BNXT_RE_ACTIVE_PD].name\t\t=  \"active_pds\",\n\t[BNXT_RE_ACTIVE_AH].name\t\t=  \"active_ahs\",\n\t[BNXT_RE_ACTIVE_QP].name\t\t=  \"active_qps\",\n\t[BNXT_RE_ACTIVE_RC_QP].name             =  \"active_rc_qps\",\n\t[BNXT_RE_ACTIVE_UD_QP].name             =  \"active_ud_qps\",\n\t[BNXT_RE_ACTIVE_SRQ].name\t\t=  \"active_srqs\",\n\t[BNXT_RE_ACTIVE_CQ].name\t\t=  \"active_cqs\",\n\t[BNXT_RE_ACTIVE_MR].name\t\t=  \"active_mrs\",\n\t[BNXT_RE_ACTIVE_MW].name\t\t=  \"active_mws\",\n\t[BNXT_RE_WATERMARK_PD].name             =  \"watermark_pds\",\n\t[BNXT_RE_WATERMARK_AH].name             =  \"watermark_ahs\",\n\t[BNXT_RE_WATERMARK_QP].name             =  \"watermark_qps\",\n\t[BNXT_RE_WATERMARK_RC_QP].name          =  \"watermark_rc_qps\",\n\t[BNXT_RE_WATERMARK_UD_QP].name          =  \"watermark_ud_qps\",\n\t[BNXT_RE_WATERMARK_SRQ].name            =  \"watermark_srqs\",\n\t[BNXT_RE_WATERMARK_CQ].name             =  \"watermark_cqs\",\n\t[BNXT_RE_WATERMARK_MR].name             =  \"watermark_mrs\",\n\t[BNXT_RE_WATERMARK_MW].name             =  \"watermark_mws\",\n\t[BNXT_RE_RESIZE_CQ_CNT].name            =  \"resize_cq_cnt\",\n\t[BNXT_RE_RX_PKTS].name\t\t=  \"rx_pkts\",\n\t[BNXT_RE_RX_BYTES].name\t\t=  \"rx_bytes\",\n\t[BNXT_RE_TX_PKTS].name\t\t=  \"tx_pkts\",\n\t[BNXT_RE_TX_BYTES].name\t\t=  \"tx_bytes\",\n\t[BNXT_RE_RECOVERABLE_ERRORS].name\t=  \"recoverable_errors\",\n\t[BNXT_RE_TX_ERRORS].name                =  \"tx_roce_errors\",\n\t[BNXT_RE_TX_DISCARDS].name              =  \"tx_roce_discards\",\n\t[BNXT_RE_RX_ERRORS].name\t\t=  \"rx_roce_errors\",\n\t[BNXT_RE_RX_DISCARDS].name\t\t=  \"rx_roce_discards\",\n\t[BNXT_RE_TO_RETRANSMITS].name        = \"to_retransmits\",\n\t[BNXT_RE_SEQ_ERR_NAKS_RCVD].name     = \"seq_err_naks_rcvd\",\n\t[BNXT_RE_MAX_RETRY_EXCEEDED].name    = \"max_retry_exceeded\",\n\t[BNXT_RE_RNR_NAKS_RCVD].name         = \"rnr_naks_rcvd\",\n\t[BNXT_RE_MISSING_RESP].name          = \"missing_resp\",\n\t[BNXT_RE_UNRECOVERABLE_ERR].name     = \"unrecoverable_err\",\n\t[BNXT_RE_BAD_RESP_ERR].name          = \"bad_resp_err\",\n\t[BNXT_RE_LOCAL_QP_OP_ERR].name       = \"local_qp_op_err\",\n\t[BNXT_RE_LOCAL_PROTECTION_ERR].name  = \"local_protection_err\",\n\t[BNXT_RE_MEM_MGMT_OP_ERR].name       = \"mem_mgmt_op_err\",\n\t[BNXT_RE_REMOTE_INVALID_REQ_ERR].name = \"remote_invalid_req_err\",\n\t[BNXT_RE_REMOTE_ACCESS_ERR].name     = \"remote_access_err\",\n\t[BNXT_RE_REMOTE_OP_ERR].name         = \"remote_op_err\",\n\t[BNXT_RE_DUP_REQ].name               = \"dup_req\",\n\t[BNXT_RE_RES_EXCEED_MAX].name        = \"res_exceed_max\",\n\t[BNXT_RE_RES_LENGTH_MISMATCH].name   = \"res_length_mismatch\",\n\t[BNXT_RE_RES_EXCEEDS_WQE].name       = \"res_exceeds_wqe\",\n\t[BNXT_RE_RES_OPCODE_ERR].name        = \"res_opcode_err\",\n\t[BNXT_RE_RES_RX_INVALID_RKEY].name   = \"res_rx_invalid_rkey\",\n\t[BNXT_RE_RES_RX_DOMAIN_ERR].name     = \"res_rx_domain_err\",\n\t[BNXT_RE_RES_RX_NO_PERM].name        = \"res_rx_no_perm\",\n\t[BNXT_RE_RES_RX_RANGE_ERR].name      = \"res_rx_range_err\",\n\t[BNXT_RE_RES_TX_INVALID_RKEY].name   = \"res_tx_invalid_rkey\",\n\t[BNXT_RE_RES_TX_DOMAIN_ERR].name     = \"res_tx_domain_err\",\n\t[BNXT_RE_RES_TX_NO_PERM].name        = \"res_tx_no_perm\",\n\t[BNXT_RE_RES_TX_RANGE_ERR].name      = \"res_tx_range_err\",\n\t[BNXT_RE_RES_IRRQ_OFLOW].name        = \"res_irrq_oflow\",\n\t[BNXT_RE_RES_UNSUP_OPCODE].name      = \"res_unsup_opcode\",\n\t[BNXT_RE_RES_UNALIGNED_ATOMIC].name  = \"res_unaligned_atomic\",\n\t[BNXT_RE_RES_REM_INV_ERR].name       = \"res_rem_inv_err\",\n\t[BNXT_RE_RES_MEM_ERROR].name         = \"res_mem_err\",\n\t[BNXT_RE_RES_SRQ_ERR].name           = \"res_srq_err\",\n\t[BNXT_RE_RES_CMP_ERR].name           = \"res_cmp_err\",\n\t[BNXT_RE_RES_INVALID_DUP_RKEY].name  = \"res_invalid_dup_rkey\",\n\t[BNXT_RE_RES_WQE_FORMAT_ERR].name    = \"res_wqe_format_err\",\n\t[BNXT_RE_RES_CQ_LOAD_ERR].name       = \"res_cq_load_err\",\n\t[BNXT_RE_RES_SRQ_LOAD_ERR].name      = \"res_srq_load_err\",\n\t[BNXT_RE_RES_TX_PCI_ERR].name        = \"res_tx_pci_err\",\n\t[BNXT_RE_RES_RX_PCI_ERR].name        = \"res_rx_pci_err\",\n\t[BNXT_RE_OUT_OF_SEQ_ERR].name        = \"oos_drop_count\",\n\t[BNXT_RE_TX_ATOMIC_REQ].name\t     = \"tx_atomic_req\",\n\t[BNXT_RE_TX_READ_REQ].name\t     = \"tx_read_req\",\n\t[BNXT_RE_TX_READ_RES].name\t     = \"tx_read_resp\",\n\t[BNXT_RE_TX_WRITE_REQ].name\t     = \"tx_write_req\",\n\t[BNXT_RE_TX_SEND_REQ].name\t     = \"tx_send_req\",\n\t[BNXT_RE_TX_ROCE_PKTS].name          = \"tx_roce_only_pkts\",\n\t[BNXT_RE_TX_ROCE_BYTES].name         = \"tx_roce_only_bytes\",\n\t[BNXT_RE_RX_ATOMIC_REQ].name\t     = \"rx_atomic_req\",\n\t[BNXT_RE_RX_READ_REQ].name\t     = \"rx_read_req\",\n\t[BNXT_RE_RX_READ_RESP].name\t     = \"rx_read_resp\",\n\t[BNXT_RE_RX_WRITE_REQ].name\t     = \"rx_write_req\",\n\t[BNXT_RE_RX_SEND_REQ].name\t     = \"rx_send_req\",\n\t[BNXT_RE_RX_ROCE_PKTS].name          = \"rx_roce_only_pkts\",\n\t[BNXT_RE_RX_ROCE_BYTES].name         = \"rx_roce_only_bytes\",\n\t[BNXT_RE_RX_ROCE_GOOD_PKTS].name     = \"rx_roce_good_pkts\",\n\t[BNXT_RE_RX_ROCE_GOOD_BYTES].name    = \"rx_roce_good_bytes\",\n\t[BNXT_RE_OOB].name\t\t     = \"rx_out_of_buffer\",\n\t[BNXT_RE_TX_CNP].name                = \"tx_cnp_pkts\",\n\t[BNXT_RE_RX_CNP].name                = \"rx_cnp_pkts\",\n\t[BNXT_RE_RX_ECN].name                = \"rx_ecn_marked_pkts\",\n\t[BNXT_RE_PACING_RESCHED].name        = \"pacing_reschedule\",\n\t[BNXT_RE_PACING_CMPL].name           = \"pacing_complete\",\n\t[BNXT_RE_PACING_ALERT].name          = \"pacing_alerts\",\n\t[BNXT_RE_DB_FIFO_REG].name           = \"db_fifo_register\",\n};\n\nstatic void bnxt_re_copy_ext_stats(struct bnxt_re_dev *rdev,\n\t\t\t\t   struct rdma_hw_stats *stats,\n\t\t\t\t   struct bnxt_qplib_ext_stat *s)\n{\n\tstats->value[BNXT_RE_TX_ATOMIC_REQ] = s->tx_atomic_req;\n\tstats->value[BNXT_RE_TX_READ_REQ]   = s->tx_read_req;\n\tstats->value[BNXT_RE_TX_READ_RES]   = s->tx_read_res;\n\tstats->value[BNXT_RE_TX_WRITE_REQ]  = s->tx_write_req;\n\tstats->value[BNXT_RE_TX_SEND_REQ]   = s->tx_send_req;\n\tstats->value[BNXT_RE_TX_ROCE_PKTS]  = s->tx_roce_pkts;\n\tstats->value[BNXT_RE_TX_ROCE_BYTES] = s->tx_roce_bytes;\n\tstats->value[BNXT_RE_RX_ATOMIC_REQ] = s->rx_atomic_req;\n\tstats->value[BNXT_RE_RX_READ_REQ]   = s->rx_read_req;\n\tstats->value[BNXT_RE_RX_READ_RESP]  = s->rx_read_res;\n\tstats->value[BNXT_RE_RX_WRITE_REQ]  = s->rx_write_req;\n\tstats->value[BNXT_RE_RX_SEND_REQ]   = s->rx_send_req;\n\tstats->value[BNXT_RE_RX_ROCE_PKTS]  = s->rx_roce_pkts;\n\tstats->value[BNXT_RE_RX_ROCE_BYTES] = s->rx_roce_bytes;\n\tstats->value[BNXT_RE_RX_ROCE_GOOD_PKTS] = s->rx_roce_good_pkts;\n\tstats->value[BNXT_RE_RX_ROCE_GOOD_BYTES] = s->rx_roce_good_bytes;\n\tstats->value[BNXT_RE_OOB] = s->rx_out_of_buffer;\n\tstats->value[BNXT_RE_TX_CNP] = s->tx_cnp;\n\tstats->value[BNXT_RE_RX_CNP] = s->rx_cnp;\n\tstats->value[BNXT_RE_RX_ECN] = s->rx_ecn_marked;\n\tstats->value[BNXT_RE_OUT_OF_SEQ_ERR] = s->rx_out_of_sequence;\n}\n\nstatic int bnxt_re_get_ext_stat(struct bnxt_re_dev *rdev,\n\t\t\t\tstruct rdma_hw_stats *stats)\n{\n\tstruct bnxt_qplib_ext_stat *estat = &rdev->stats.rstat.ext_stat;\n\tu32 fid;\n\tint rc;\n\n\tfid = PCI_FUNC(rdev->en_dev->pdev->devfn);\n\trc = bnxt_qplib_qext_stat(&rdev->rcfw, fid, estat);\n\tif (rc)\n\t\tgoto done;\n\tbnxt_re_copy_ext_stats(rdev, stats, estat);\n\ndone:\n\treturn rc;\n}\n\nstatic void bnxt_re_copy_err_stats(struct bnxt_re_dev *rdev,\n\t\t\t\t   struct rdma_hw_stats *stats,\n\t\t\t\t   struct bnxt_qplib_roce_stats *err_s)\n{\n\tstats->value[BNXT_RE_TO_RETRANSMITS] =\n\t\t\t\terr_s->to_retransmits;\n\tstats->value[BNXT_RE_SEQ_ERR_NAKS_RCVD] =\n\t\t\t\terr_s->seq_err_naks_rcvd;\n\tstats->value[BNXT_RE_MAX_RETRY_EXCEEDED] =\n\t\t\t\terr_s->max_retry_exceeded;\n\tstats->value[BNXT_RE_RNR_NAKS_RCVD] =\n\t\t\t\terr_s->rnr_naks_rcvd;\n\tstats->value[BNXT_RE_MISSING_RESP] =\n\t\t\t\terr_s->missing_resp;\n\tstats->value[BNXT_RE_UNRECOVERABLE_ERR] =\n\t\t\t\terr_s->unrecoverable_err;\n\tstats->value[BNXT_RE_BAD_RESP_ERR] =\n\t\t\t\terr_s->bad_resp_err;\n\tstats->value[BNXT_RE_LOCAL_QP_OP_ERR]\t=\n\t\t\terr_s->local_qp_op_err;\n\tstats->value[BNXT_RE_LOCAL_PROTECTION_ERR] =\n\t\t\terr_s->local_protection_err;\n\tstats->value[BNXT_RE_MEM_MGMT_OP_ERR] =\n\t\t\terr_s->mem_mgmt_op_err;\n\tstats->value[BNXT_RE_REMOTE_INVALID_REQ_ERR] =\n\t\t\terr_s->remote_invalid_req_err;\n\tstats->value[BNXT_RE_REMOTE_ACCESS_ERR] =\n\t\t\terr_s->remote_access_err;\n\tstats->value[BNXT_RE_REMOTE_OP_ERR] =\n\t\t\terr_s->remote_op_err;\n\tstats->value[BNXT_RE_DUP_REQ] =\n\t\t\terr_s->dup_req;\n\tstats->value[BNXT_RE_RES_EXCEED_MAX] =\n\t\t\terr_s->res_exceed_max;\n\tstats->value[BNXT_RE_RES_LENGTH_MISMATCH] =\n\t\t\terr_s->res_length_mismatch;\n\tstats->value[BNXT_RE_RES_EXCEEDS_WQE] =\n\t\t\terr_s->res_exceeds_wqe;\n\tstats->value[BNXT_RE_RES_OPCODE_ERR] =\n\t\t\terr_s->res_opcode_err;\n\tstats->value[BNXT_RE_RES_RX_INVALID_RKEY] =\n\t\t\terr_s->res_rx_invalid_rkey;\n\tstats->value[BNXT_RE_RES_RX_DOMAIN_ERR] =\n\t\t\terr_s->res_rx_domain_err;\n\tstats->value[BNXT_RE_RES_RX_NO_PERM] =\n\t\t\terr_s->res_rx_no_perm;\n\tstats->value[BNXT_RE_RES_RX_RANGE_ERR]  =\n\t\t\terr_s->res_rx_range_err;\n\tstats->value[BNXT_RE_RES_TX_INVALID_RKEY] =\n\t\t\terr_s->res_tx_invalid_rkey;\n\tstats->value[BNXT_RE_RES_TX_DOMAIN_ERR] =\n\t\t\terr_s->res_tx_domain_err;\n\tstats->value[BNXT_RE_RES_TX_NO_PERM] =\n\t\t\terr_s->res_tx_no_perm;\n\tstats->value[BNXT_RE_RES_TX_RANGE_ERR]  =\n\t\t\terr_s->res_tx_range_err;\n\tstats->value[BNXT_RE_RES_IRRQ_OFLOW] =\n\t\t\terr_s->res_irrq_oflow;\n\tstats->value[BNXT_RE_RES_UNSUP_OPCODE]  =\n\t\t\terr_s->res_unsup_opcode;\n\tstats->value[BNXT_RE_RES_UNALIGNED_ATOMIC] =\n\t\t\terr_s->res_unaligned_atomic;\n\tstats->value[BNXT_RE_RES_REM_INV_ERR]   =\n\t\t\terr_s->res_rem_inv_err;\n\tstats->value[BNXT_RE_RES_MEM_ERROR] =\n\t\t\terr_s->res_mem_error;\n\tstats->value[BNXT_RE_RES_SRQ_ERR] =\n\t\t\terr_s->res_srq_err;\n\tstats->value[BNXT_RE_RES_CMP_ERR] =\n\t\t\terr_s->res_cmp_err;\n\tstats->value[BNXT_RE_RES_INVALID_DUP_RKEY] =\n\t\t\terr_s->res_invalid_dup_rkey;\n\tstats->value[BNXT_RE_RES_WQE_FORMAT_ERR] =\n\t\t\terr_s->res_wqe_format_err;\n\tstats->value[BNXT_RE_RES_CQ_LOAD_ERR]   =\n\t\t\terr_s->res_cq_load_err;\n\tstats->value[BNXT_RE_RES_SRQ_LOAD_ERR]  =\n\t\t\terr_s->res_srq_load_err;\n\tstats->value[BNXT_RE_RES_TX_PCI_ERR]    =\n\t\t\terr_s->res_tx_pci_err;\n\tstats->value[BNXT_RE_RES_RX_PCI_ERR]    =\n\t\t\terr_s->res_rx_pci_err;\n\tstats->value[BNXT_RE_OUT_OF_SEQ_ERR]    =\n\t\t\terr_s->res_oos_drop_count;\n}\n\nstatic void bnxt_re_copy_db_pacing_stats(struct bnxt_re_dev *rdev,\n\t\t\t\t\t struct rdma_hw_stats *stats)\n{\n\tstruct bnxt_re_db_pacing_stats *pacing_s =  &rdev->stats.pacing;\n\n\tstats->value[BNXT_RE_PACING_RESCHED] = pacing_s->resched;\n\tstats->value[BNXT_RE_PACING_CMPL] = pacing_s->complete;\n\tstats->value[BNXT_RE_PACING_ALERT] = pacing_s->alerts;\n\tstats->value[BNXT_RE_DB_FIFO_REG] =\n\t\treadl(rdev->en_dev->bar0 + rdev->pacing.dbr_db_fifo_reg_off);\n}\n\nint bnxt_re_ib_get_hw_stats(struct ib_device *ibdev,\n\t\t\t    struct rdma_hw_stats *stats,\n\t\t\t    u32 port, int index)\n{\n\tstruct bnxt_re_dev *rdev = to_bnxt_re_dev(ibdev, ibdev);\n\tstruct bnxt_re_res_cntrs *res_s = &rdev->stats.res;\n\tstruct bnxt_qplib_roce_stats *err_s = NULL;\n\tstruct ctx_hw_stats *hw_stats = NULL;\n\tint rc  = 0;\n\n\thw_stats = rdev->qplib_ctx.stats.dma;\n\tif (!port || !stats)\n\t\treturn -EINVAL;\n\n\tstats->value[BNXT_RE_ACTIVE_QP] = atomic_read(&res_s->qp_count);\n\tstats->value[BNXT_RE_ACTIVE_RC_QP] = atomic_read(&res_s->rc_qp_count);\n\tstats->value[BNXT_RE_ACTIVE_UD_QP] = atomic_read(&res_s->ud_qp_count);\n\tstats->value[BNXT_RE_ACTIVE_SRQ] = atomic_read(&res_s->srq_count);\n\tstats->value[BNXT_RE_ACTIVE_CQ] = atomic_read(&res_s->cq_count);\n\tstats->value[BNXT_RE_ACTIVE_MR] = atomic_read(&res_s->mr_count);\n\tstats->value[BNXT_RE_ACTIVE_MW] = atomic_read(&res_s->mw_count);\n\tstats->value[BNXT_RE_ACTIVE_PD] = atomic_read(&res_s->pd_count);\n\tstats->value[BNXT_RE_ACTIVE_AH] = atomic_read(&res_s->ah_count);\n\tstats->value[BNXT_RE_WATERMARK_QP] = res_s->qp_watermark;\n\tstats->value[BNXT_RE_WATERMARK_RC_QP] = res_s->rc_qp_watermark;\n\tstats->value[BNXT_RE_WATERMARK_UD_QP] = res_s->ud_qp_watermark;\n\tstats->value[BNXT_RE_WATERMARK_SRQ] = res_s->srq_watermark;\n\tstats->value[BNXT_RE_WATERMARK_CQ] = res_s->cq_watermark;\n\tstats->value[BNXT_RE_WATERMARK_MR] = res_s->mr_watermark;\n\tstats->value[BNXT_RE_WATERMARK_MW] = res_s->mw_watermark;\n\tstats->value[BNXT_RE_WATERMARK_PD] = res_s->pd_watermark;\n\tstats->value[BNXT_RE_WATERMARK_AH] = res_s->ah_watermark;\n\tstats->value[BNXT_RE_RESIZE_CQ_CNT] = atomic_read(&res_s->resize_count);\n\n\tif (hw_stats) {\n\t\tstats->value[BNXT_RE_RECOVERABLE_ERRORS] =\n\t\t\tle64_to_cpu(hw_stats->tx_bcast_pkts);\n\t\tstats->value[BNXT_RE_TX_DISCARDS] =\n\t\t\tle64_to_cpu(hw_stats->tx_discard_pkts);\n\t\tstats->value[BNXT_RE_TX_ERRORS] =\n\t\t\tle64_to_cpu(hw_stats->tx_error_pkts);\n\t\tstats->value[BNXT_RE_RX_ERRORS] =\n\t\t\tle64_to_cpu(hw_stats->rx_error_pkts);\n\t\tstats->value[BNXT_RE_RX_DISCARDS] =\n\t\t\tle64_to_cpu(hw_stats->rx_discard_pkts);\n\t\tstats->value[BNXT_RE_RX_PKTS] =\n\t\t\tle64_to_cpu(hw_stats->rx_ucast_pkts);\n\t\tstats->value[BNXT_RE_RX_BYTES] =\n\t\t\tle64_to_cpu(hw_stats->rx_ucast_bytes);\n\t\tstats->value[BNXT_RE_TX_PKTS] =\n\t\t\tle64_to_cpu(hw_stats->tx_ucast_pkts);\n\t\tstats->value[BNXT_RE_TX_BYTES] =\n\t\t\tle64_to_cpu(hw_stats->tx_ucast_bytes);\n\t}\n\terr_s = &rdev->stats.rstat.errs;\n\tif (test_bit(BNXT_RE_FLAG_ISSUE_ROCE_STATS, &rdev->flags)) {\n\t\trc = bnxt_qplib_get_roce_stats(&rdev->rcfw, err_s);\n\t\tif (rc) {\n\t\t\tclear_bit(BNXT_RE_FLAG_ISSUE_ROCE_STATS,\n\t\t\t\t  &rdev->flags);\n\t\t\tgoto done;\n\t\t}\n\t\tbnxt_re_copy_err_stats(rdev, stats, err_s);\n\t\tif (_is_ext_stats_supported(rdev->dev_attr.dev_cap_flags) &&\n\t\t    !rdev->is_virtfn) {\n\t\t\trc = bnxt_re_get_ext_stat(rdev, stats);\n\t\t\tif (rc) {\n\t\t\t\tclear_bit(BNXT_RE_FLAG_ISSUE_ROCE_STATS,\n\t\t\t\t\t  &rdev->flags);\n\t\t\t\tgoto done;\n\t\t\t}\n\t\t}\n\t\tif (rdev->pacing.dbr_pacing)\n\t\t\tbnxt_re_copy_db_pacing_stats(rdev, stats);\n\t}\n\ndone:\n\treturn bnxt_qplib_is_chip_gen_p5(rdev->chip_ctx) ?\n\t\tBNXT_RE_NUM_EXT_COUNTERS : BNXT_RE_NUM_STD_COUNTERS;\n}\n\nstruct rdma_hw_stats *bnxt_re_ib_alloc_hw_port_stats(struct ib_device *ibdev,\n\t\t\t\t\t\t     u32 port_num)\n{\n\tstruct bnxt_re_dev *rdev = to_bnxt_re_dev(ibdev, ibdev);\n\tint num_counters = 0;\n\n\tif (bnxt_qplib_is_chip_gen_p5(rdev->chip_ctx))\n\t\tnum_counters = BNXT_RE_NUM_EXT_COUNTERS;\n\telse\n\t\tnum_counters = BNXT_RE_NUM_STD_COUNTERS;\n\n\treturn rdma_alloc_hw_stats_struct(bnxt_re_stat_descs, num_counters,\n\t\t\t\t\t  RDMA_HW_STATS_DEFAULT_LIFESPAN);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}