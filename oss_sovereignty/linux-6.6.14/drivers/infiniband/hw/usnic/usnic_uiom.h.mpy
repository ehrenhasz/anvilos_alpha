{
  "module_name": "usnic_uiom.h",
  "hash_id": "df6d5429aa1eb0c5a4ebfe2bf25e27134864aed8270b2c4adc145213f0eb29ab",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/usnic/usnic_uiom.h",
  "human_readable_source": " \n\n#ifndef USNIC_UIOM_H_\n#define USNIC_UIOM_H_\n\n#include <linux/list.h>\n#include <linux/scatterlist.h>\n\n#include \"usnic_uiom_interval_tree.h\"\n\nstruct ib_ucontext;\n\n#define USNIC_UIOM_READ\t\t\t(1)\n#define USNIC_UIOM_WRITE\t\t(2)\n\n#define USNIC_UIOM_MAX_PD_CNT\t\t(1000)\n#define USNIC_UIOM_MAX_MR_CNT\t\t(1000000)\n#define USNIC_UIOM_MAX_MR_SIZE\t\t(~0UL)\n#define USNIC_UIOM_PAGE_SIZE\t\t(PAGE_SIZE)\n\nstruct usnic_uiom_dev {\n\tstruct device\t\t\t*dev;\n\tstruct list_head\t\tlink;\n};\n\nstruct usnic_uiom_pd {\n\tstruct iommu_domain\t\t*domain;\n\tspinlock_t\t\t\tlock;\n\tstruct rb_root_cached\t\troot;\n\tstruct list_head\t\tdevs;\n\tint\t\t\t\tdev_cnt;\n};\n\nstruct usnic_uiom_reg {\n\tstruct usnic_uiom_pd\t\t*pd;\n\tunsigned long\t\t\tva;\n\tsize_t\t\t\t\tlength;\n\tint\t\t\t\toffset;\n\tint\t\t\t\tpage_size;\n\tint\t\t\t\twritable;\n\tstruct list_head\t\tchunk_list;\n\tstruct work_struct\t\twork;\n\tstruct mm_struct\t\t*owning_mm;\n};\n\nstruct usnic_uiom_chunk {\n\tstruct list_head\t\tlist;\n\tint\t\t\t\tnents;\n\tstruct scatterlist\t\tpage_list[];\n};\n\nstruct usnic_uiom_pd *usnic_uiom_alloc_pd(struct device *dev);\nvoid usnic_uiom_dealloc_pd(struct usnic_uiom_pd *pd);\nint usnic_uiom_attach_dev_to_pd(struct usnic_uiom_pd *pd, struct device *dev);\nvoid usnic_uiom_detach_dev_from_pd(struct usnic_uiom_pd *pd,\n\t\t\t\t\tstruct device *dev);\nstruct device **usnic_uiom_get_dev_list(struct usnic_uiom_pd *pd);\nvoid usnic_uiom_free_dev_list(struct device **devs);\nstruct usnic_uiom_reg *usnic_uiom_reg_get(struct usnic_uiom_pd *pd,\n\t\t\t\t\t\tunsigned long addr, size_t size,\n\t\t\t\t\t\tint access, int dmasync);\nvoid usnic_uiom_reg_release(struct usnic_uiom_reg *uiomr);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}