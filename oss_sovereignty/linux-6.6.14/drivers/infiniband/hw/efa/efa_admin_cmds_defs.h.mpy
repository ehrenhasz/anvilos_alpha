{
  "module_name": "efa_admin_cmds_defs.h",
  "hash_id": "c5079a6c9d35e431b9e3de5c8fa6b37f50790e842db63bbaec86aba62f7b46de",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/efa/efa_admin_cmds_defs.h",
  "human_readable_source": " \n \n\n#ifndef _EFA_ADMIN_CMDS_H_\n#define _EFA_ADMIN_CMDS_H_\n\n#define EFA_ADMIN_API_VERSION_MAJOR          0\n#define EFA_ADMIN_API_VERSION_MINOR          1\n\n \nenum efa_admin_aq_opcode {\n\tEFA_ADMIN_CREATE_QP                         = 1,\n\tEFA_ADMIN_MODIFY_QP                         = 2,\n\tEFA_ADMIN_QUERY_QP                          = 3,\n\tEFA_ADMIN_DESTROY_QP                        = 4,\n\tEFA_ADMIN_CREATE_AH                         = 5,\n\tEFA_ADMIN_DESTROY_AH                        = 6,\n\tEFA_ADMIN_REG_MR                            = 7,\n\tEFA_ADMIN_DEREG_MR                          = 8,\n\tEFA_ADMIN_CREATE_CQ                         = 9,\n\tEFA_ADMIN_DESTROY_CQ                        = 10,\n\tEFA_ADMIN_GET_FEATURE                       = 11,\n\tEFA_ADMIN_SET_FEATURE                       = 12,\n\tEFA_ADMIN_GET_STATS                         = 13,\n\tEFA_ADMIN_ALLOC_PD                          = 14,\n\tEFA_ADMIN_DEALLOC_PD                        = 15,\n\tEFA_ADMIN_ALLOC_UAR                         = 16,\n\tEFA_ADMIN_DEALLOC_UAR                       = 17,\n\tEFA_ADMIN_CREATE_EQ                         = 18,\n\tEFA_ADMIN_DESTROY_EQ                        = 19,\n\tEFA_ADMIN_MAX_OPCODE                        = 19,\n};\n\nenum efa_admin_aq_feature_id {\n\tEFA_ADMIN_DEVICE_ATTR                       = 1,\n\tEFA_ADMIN_AENQ_CONFIG                       = 2,\n\tEFA_ADMIN_NETWORK_ATTR                      = 3,\n\tEFA_ADMIN_QUEUE_ATTR                        = 4,\n\tEFA_ADMIN_HW_HINTS                          = 5,\n\tEFA_ADMIN_HOST_INFO                         = 6,\n\tEFA_ADMIN_EVENT_QUEUE_ATTR                  = 7,\n};\n\n \nenum efa_admin_qp_type {\n\t \n\tEFA_ADMIN_QP_TYPE_UD                        = 1,\n\t \n\tEFA_ADMIN_QP_TYPE_SRD                       = 2,\n};\n\n \nenum efa_admin_qp_state {\n\tEFA_ADMIN_QP_STATE_RESET                    = 0,\n\tEFA_ADMIN_QP_STATE_INIT                     = 1,\n\tEFA_ADMIN_QP_STATE_RTR                      = 2,\n\tEFA_ADMIN_QP_STATE_RTS                      = 3,\n\tEFA_ADMIN_QP_STATE_SQD                      = 4,\n\tEFA_ADMIN_QP_STATE_SQE                      = 5,\n\tEFA_ADMIN_QP_STATE_ERR                      = 6,\n};\n\nenum efa_admin_get_stats_type {\n\tEFA_ADMIN_GET_STATS_TYPE_BASIC              = 0,\n\tEFA_ADMIN_GET_STATS_TYPE_MESSAGES           = 1,\n\tEFA_ADMIN_GET_STATS_TYPE_RDMA_READ          = 2,\n\tEFA_ADMIN_GET_STATS_TYPE_RDMA_WRITE         = 3,\n};\n\nenum efa_admin_get_stats_scope {\n\tEFA_ADMIN_GET_STATS_SCOPE_ALL               = 0,\n\tEFA_ADMIN_GET_STATS_SCOPE_QUEUE             = 1,\n};\n\n \nstruct efa_admin_qp_alloc_size {\n\t \n\tu32 send_queue_ring_size;\n\n\t \n\tu32 send_queue_depth;\n\n\t \n\tu32 recv_queue_ring_size;\n\n\t \n\tu32 recv_queue_depth;\n};\n\nstruct efa_admin_create_qp_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu16 pd;\n\n\t \n\tu8 qp_type;\n\n\t \n\tu8 flags;\n\n\t \n\tu64 sq_base_addr;\n\n\t \n\tu64 rq_base_addr;\n\n\t \n\tu32 send_cq_idx;\n\n\t \n\tu32 recv_cq_idx;\n\n\t \n\tu32 sq_l_key;\n\n\t \n\tu32 rq_l_key;\n\n\t \n\tstruct efa_admin_qp_alloc_size qp_alloc_size;\n\n\t \n\tu16 uar;\n\n\t \n\tu16 reserved;\n\n\t \n\tu32 reserved2;\n};\n\nstruct efa_admin_create_qp_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu32 qp_handle;\n\n\t \n\tu16 qp_num;\n\n\t \n\tu16 reserved;\n\n\t \n\tu16 send_sub_cq_idx;\n\n\t \n\tu16 recv_sub_cq_idx;\n\n\t \n\tu32 sq_db_offset;\n\n\t \n\tu32 rq_db_offset;\n\n\t \n\tu32 llq_descriptors_offset;\n};\n\nstruct efa_admin_modify_qp_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu32 modify_mask;\n\n\t \n\tu32 qp_handle;\n\n\t \n\tu32 qp_state;\n\n\t \n\tu32 cur_qp_state;\n\n\t \n\tu32 qkey;\n\n\t \n\tu32 sq_psn;\n\n\t \n\tu8 sq_drained_async_notify;\n\n\t \n\tu8 rnr_retry;\n\n\t \n\tu16 reserved2;\n};\n\nstruct efa_admin_modify_qp_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\nstruct efa_admin_query_qp_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu32 qp_handle;\n};\n\nstruct efa_admin_query_qp_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu32 qp_state;\n\n\t \n\tu32 qkey;\n\n\t \n\tu32 sq_psn;\n\n\t \n\tu8 sq_draining;\n\n\t \n\tu8 rnr_retry;\n\n\t \n\tu16 reserved2;\n};\n\nstruct efa_admin_destroy_qp_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu32 qp_handle;\n};\n\nstruct efa_admin_destroy_qp_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\n \nstruct efa_admin_create_ah_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu8 dest_addr[16];\n\n\t \n\tu16 pd;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_create_ah_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu16 ah;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_destroy_ah_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu16 ah;\n\n\t \n\tu16 pd;\n};\n\nstruct efa_admin_destroy_ah_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\n \nstruct efa_admin_reg_mr_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu16 pd;\n\n\t \n\tu16 reserved16_w1;\n\n\t \n\tunion {\n\t\t \n\t\tu64 inline_pbl_array[4];\n\n\t\t \n\t\tstruct efa_admin_ctrl_buff_info pbl;\n\t} pbl;\n\n\t \n\tu64 mr_length;\n\n\t \n\tu8 flags;\n\n\t \n\tu8 permissions;\n\n\t \n\tu16 reserved16_w5;\n\n\t \n\tu32 page_num;\n\n\t \n\tu64 iova;\n};\n\nstruct efa_admin_reg_mr_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu32 l_key;\n\n\t \n\tu32 r_key;\n};\n\nstruct efa_admin_dereg_mr_cmd {\n\t \n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu32 l_key;\n};\n\nstruct efa_admin_dereg_mr_resp {\n\t \n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\nstruct efa_admin_create_cq_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\t \n\tu8 cq_caps_1;\n\n\t \n\tu8 cq_caps_2;\n\n\t \n\tu16 cq_depth;\n\n\t \n\tu16 eqn;\n\n\t \n\tu16 reserved;\n\n\t \n\tstruct efa_common_mem_addr cq_ba;\n\n\t \n\tu32 l_key;\n\n\t \n\tu16 num_sub_cqs;\n\n\t \n\tu16 uar;\n};\n\nstruct efa_admin_create_cq_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\tu16 cq_idx;\n\n\t \n\tu16 cq_actual_depth;\n\n\t \n\tu32 db_offset;\n\n\t \n\tu32 flags;\n};\n\nstruct efa_admin_destroy_cq_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_desc;\n\n\tu16 cq_idx;\n\n\t \n\tu16 reserved1;\n};\n\nstruct efa_admin_destroy_cq_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\n \nstruct efa_admin_aq_get_stats_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\tunion {\n\t\t \n\t\tu32 inline_data_w1[3];\n\n\t\tstruct efa_admin_ctrl_buff_info control_buffer;\n\t} u;\n\n\t \n\tu8 type;\n\n\t \n\tu8 scope;\n\n\tu16 scope_modifier;\n};\n\nstruct efa_admin_basic_stats {\n\tu64 tx_bytes;\n\n\tu64 tx_pkts;\n\n\tu64 rx_bytes;\n\n\tu64 rx_pkts;\n\n\tu64 rx_drops;\n};\n\nstruct efa_admin_messages_stats {\n\tu64 send_bytes;\n\n\tu64 send_wrs;\n\n\tu64 recv_bytes;\n\n\tu64 recv_wrs;\n};\n\nstruct efa_admin_rdma_read_stats {\n\tu64 read_wrs;\n\n\tu64 read_bytes;\n\n\tu64 read_wr_err;\n\n\tu64 read_resp_bytes;\n};\n\nstruct efa_admin_rdma_write_stats {\n\tu64 write_wrs;\n\n\tu64 write_bytes;\n\n\tu64 write_wr_err;\n\n\tu64 write_recv_bytes;\n};\n\nstruct efa_admin_acq_get_stats_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\tunion {\n\t\tstruct efa_admin_basic_stats basic_stats;\n\n\t\tstruct efa_admin_messages_stats messages_stats;\n\n\t\tstruct efa_admin_rdma_read_stats rdma_read_stats;\n\n\t\tstruct efa_admin_rdma_write_stats rdma_write_stats;\n\t} u;\n};\n\nstruct efa_admin_get_set_feature_common_desc {\n\t \n\tu8 reserved0;\n\n\t \n\tu8 feature_id;\n\n\t \n\tu16 reserved16;\n};\n\nstruct efa_admin_feature_device_attr_desc {\n\t \n\tu64 supported_features;\n\n\t \n\tu64 page_size_cap;\n\n\tu32 fw_version;\n\n\tu32 admin_api_version;\n\n\tu32 device_version;\n\n\t \n\tu16 db_bar;\n\n\t \n\tu8 phys_addr_width;\n\n\t \n\tu8 virt_addr_width;\n\n\t \n\tu32 device_caps;\n\n\t \n\tu32 max_rdma_size;\n};\n\nstruct efa_admin_feature_queue_attr_desc {\n\t \n\tu32 max_qp;\n\n\t \n\tu32 max_sq_depth;\n\n\t \n\tu32 inline_buf_size;\n\n\t \n\tu32 max_rq_depth;\n\n\t \n\tu32 max_cq;\n\n\t \n\tu32 max_cq_depth;\n\n\t \n\tu16 sub_cqs_per_cq;\n\n\t \n\tu16 min_sq_depth;\n\n\t \n\tu16 max_wr_send_sges;\n\n\t \n\tu16 max_wr_recv_sges;\n\n\t \n\tu32 max_mr;\n\n\t \n\tu32 max_mr_pages;\n\n\t \n\tu32 max_pd;\n\n\t \n\tu32 max_ah;\n\n\t \n\tu32 max_llq_size;\n\n\t \n\tu16 max_wr_rdma_sges;\n\n\t \n\tu16 max_tx_batch;\n};\n\nstruct efa_admin_event_queue_attr_desc {\n\t \n\tu32 max_eq;\n\n\t \n\tu32 max_eq_depth;\n\n\t \n\tu32 event_bitmask;\n};\n\nstruct efa_admin_feature_aenq_desc {\n\t \n\tu32 supported_groups;\n\n\t \n\tu32 enabled_groups;\n};\n\nstruct efa_admin_feature_network_attr_desc {\n\t \n\tu8 addr[16];\n\n\t \n\tu32 mtu;\n};\n\n \nstruct efa_admin_hw_hints {\n\t \n\tu16 mmio_read_timeout;\n\n\t \n\tu16 driver_watchdog_timeout;\n\n\t \n\tu16 admin_completion_timeout;\n\n\t \n\tu16 poll_interval;\n};\n\nstruct efa_admin_get_feature_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\tstruct efa_admin_ctrl_buff_info control_buffer;\n\n\tstruct efa_admin_get_set_feature_common_desc feature_common;\n\n\tu32 raw[11];\n};\n\nstruct efa_admin_get_feature_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\tunion {\n\t\tu32 raw[14];\n\n\t\tstruct efa_admin_feature_device_attr_desc device_attr;\n\n\t\tstruct efa_admin_feature_aenq_desc aenq;\n\n\t\tstruct efa_admin_feature_network_attr_desc network_attr;\n\n\t\tstruct efa_admin_feature_queue_attr_desc queue_attr;\n\n\t\tstruct efa_admin_event_queue_attr_desc event_queue_attr;\n\n\t\tstruct efa_admin_hw_hints hw_hints;\n\t} u;\n};\n\nstruct efa_admin_set_feature_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\tstruct efa_admin_ctrl_buff_info control_buffer;\n\n\tstruct efa_admin_get_set_feature_common_desc feature_common;\n\n\tunion {\n\t\tu32 raw[11];\n\n\t\t \n\t\tstruct efa_admin_feature_aenq_desc aenq;\n\t} u;\n};\n\nstruct efa_admin_set_feature_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\tunion {\n\t\tu32 raw[14];\n\t} u;\n};\n\nstruct efa_admin_alloc_pd_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n};\n\nstruct efa_admin_alloc_pd_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu16 pd;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_dealloc_pd_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\t \n\tu16 pd;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_dealloc_pd_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\nstruct efa_admin_alloc_uar_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n};\n\nstruct efa_admin_alloc_uar_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu16 uar;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_dealloc_uar_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\t \n\tu16 uar;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_dealloc_uar_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\nstruct efa_admin_create_eq_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\t \n\tu16 depth;\n\n\t \n\tu8 msix_vec;\n\n\t \n\tu8 caps;\n\n\t \n\tstruct efa_common_mem_addr ba;\n\n\t \n\tu32 event_bitmask;\n\n\t \n\tu32 reserved;\n};\n\nstruct efa_admin_create_eq_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n\n\t \n\tu16 eqn;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_destroy_eq_cmd {\n\tstruct efa_admin_aq_common_desc aq_common_descriptor;\n\n\t \n\tu16 eqn;\n\n\t \n\tu16 reserved;\n};\n\nstruct efa_admin_destroy_eq_resp {\n\tstruct efa_admin_acq_common_desc acq_common_desc;\n};\n\n \nenum efa_admin_aenq_group {\n\tEFA_ADMIN_FATAL_ERROR                       = 1,\n\tEFA_ADMIN_WARNING                           = 2,\n\tEFA_ADMIN_NOTIFICATION                      = 3,\n\tEFA_ADMIN_KEEP_ALIVE                        = 4,\n\tEFA_ADMIN_AENQ_GROUPS_NUM                   = 5,\n};\n\nstruct efa_admin_mmio_req_read_less_resp {\n\tu16 req_id;\n\n\tu16 reg_off;\n\n\t \n\tu32 reg_val;\n};\n\nenum efa_admin_os_type {\n\tEFA_ADMIN_OS_LINUX                          = 0,\n};\n\nstruct efa_admin_host_info {\n\t \n\tu8 os_dist_str[128];\n\n\t \n\tu32 os_type;\n\n\t \n\tu8 kernel_ver_str[32];\n\n\t \n\tu32 kernel_ver;\n\n\t \n\tu32 driver_ver;\n\n\t \n\tu16 bdf;\n\n\t \n\tu16 spec_ver;\n\n\t \n\tu32 flags;\n};\n\n \n#define EFA_ADMIN_CREATE_QP_CMD_SQ_VIRT_MASK                BIT(0)\n#define EFA_ADMIN_CREATE_QP_CMD_RQ_VIRT_MASK                BIT(1)\n\n \n#define EFA_ADMIN_MODIFY_QP_CMD_QP_STATE_MASK               BIT(0)\n#define EFA_ADMIN_MODIFY_QP_CMD_CUR_QP_STATE_MASK           BIT(1)\n#define EFA_ADMIN_MODIFY_QP_CMD_QKEY_MASK                   BIT(2)\n#define EFA_ADMIN_MODIFY_QP_CMD_SQ_PSN_MASK                 BIT(3)\n#define EFA_ADMIN_MODIFY_QP_CMD_SQ_DRAINED_ASYNC_NOTIFY_MASK BIT(4)\n#define EFA_ADMIN_MODIFY_QP_CMD_RNR_RETRY_MASK              BIT(5)\n\n \n#define EFA_ADMIN_REG_MR_CMD_PHYS_PAGE_SIZE_SHIFT_MASK      GENMASK(4, 0)\n#define EFA_ADMIN_REG_MR_CMD_MEM_ADDR_PHY_MODE_EN_MASK      BIT(7)\n#define EFA_ADMIN_REG_MR_CMD_LOCAL_WRITE_ENABLE_MASK        BIT(0)\n#define EFA_ADMIN_REG_MR_CMD_REMOTE_WRITE_ENABLE_MASK       BIT(1)\n#define EFA_ADMIN_REG_MR_CMD_REMOTE_READ_ENABLE_MASK        BIT(2)\n\n \n#define EFA_ADMIN_CREATE_CQ_CMD_INTERRUPT_MODE_ENABLED_MASK BIT(5)\n#define EFA_ADMIN_CREATE_CQ_CMD_VIRT_MASK                   BIT(6)\n#define EFA_ADMIN_CREATE_CQ_CMD_CQ_ENTRY_SIZE_WORDS_MASK    GENMASK(4, 0)\n#define EFA_ADMIN_CREATE_CQ_CMD_SET_SRC_ADDR_MASK           BIT(5)\n\n \n#define EFA_ADMIN_CREATE_CQ_RESP_DB_VALID_MASK              BIT(0)\n\n \n#define EFA_ADMIN_FEATURE_DEVICE_ATTR_DESC_RDMA_READ_MASK   BIT(0)\n#define EFA_ADMIN_FEATURE_DEVICE_ATTR_DESC_RNR_RETRY_MASK   BIT(1)\n#define EFA_ADMIN_FEATURE_DEVICE_ATTR_DESC_DATA_POLLING_128_MASK BIT(2)\n#define EFA_ADMIN_FEATURE_DEVICE_ATTR_DESC_RDMA_WRITE_MASK  BIT(3)\n\n \n#define EFA_ADMIN_CREATE_EQ_CMD_ENTRY_SIZE_WORDS_MASK       GENMASK(4, 0)\n#define EFA_ADMIN_CREATE_EQ_CMD_VIRT_MASK                   BIT(6)\n#define EFA_ADMIN_CREATE_EQ_CMD_COMPLETION_EVENTS_MASK      BIT(0)\n\n \n#define EFA_ADMIN_HOST_INFO_DRIVER_MODULE_TYPE_MASK         GENMASK(7, 0)\n#define EFA_ADMIN_HOST_INFO_DRIVER_SUB_MINOR_MASK           GENMASK(15, 8)\n#define EFA_ADMIN_HOST_INFO_DRIVER_MINOR_MASK               GENMASK(23, 16)\n#define EFA_ADMIN_HOST_INFO_DRIVER_MAJOR_MASK               GENMASK(31, 24)\n#define EFA_ADMIN_HOST_INFO_FUNCTION_MASK                   GENMASK(2, 0)\n#define EFA_ADMIN_HOST_INFO_DEVICE_MASK                     GENMASK(7, 3)\n#define EFA_ADMIN_HOST_INFO_BUS_MASK                        GENMASK(15, 8)\n#define EFA_ADMIN_HOST_INFO_SPEC_MINOR_MASK                 GENMASK(7, 0)\n#define EFA_ADMIN_HOST_INFO_SPEC_MAJOR_MASK                 GENMASK(15, 8)\n#define EFA_ADMIN_HOST_INFO_INTREE_MASK                     BIT(0)\n#define EFA_ADMIN_HOST_INFO_GDR_MASK                        BIT(1)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}