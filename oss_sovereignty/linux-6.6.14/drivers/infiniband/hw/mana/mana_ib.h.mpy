{
  "module_name": "mana_ib.h",
  "hash_id": "3fc6abe4d32fdd2756ee7985b4c3361df603b3b396b918720340b93e2d0258ca",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/hw/mana/mana_ib.h",
  "human_readable_source": " \n \n\n#ifndef _MANA_IB_H_\n#define _MANA_IB_H_\n\n#include <rdma/ib_verbs.h>\n#include <rdma/ib_mad.h>\n#include <rdma/ib_umem.h>\n#include <rdma/mana-abi.h>\n#include <rdma/uverbs_ioctl.h>\n\n#include <net/mana/mana.h>\n\n#define PAGE_SZ_BM                                                             \\\n\t(SZ_4K | SZ_8K | SZ_16K | SZ_32K | SZ_64K | SZ_128K | SZ_256K |        \\\n\t SZ_512K | SZ_1M | SZ_2M)\n\n \n#define MANA_IB_MAX_MR_SIZE\tU64_MAX\n\n \n#define MANA_IB_MAX_MR\t\t0xFFFFFFu\n\nstruct mana_ib_dev {\n\tstruct ib_device ib_dev;\n\tstruct gdma_dev *gdma_dev;\n};\n\nstruct mana_ib_wq {\n\tstruct ib_wq ibwq;\n\tstruct ib_umem *umem;\n\tint wqe;\n\tu32 wq_buf_size;\n\tu64 gdma_region;\n\tu64 id;\n\tmana_handle_t rx_object;\n};\n\nstruct mana_ib_pd {\n\tstruct ib_pd ibpd;\n\tu32 pdn;\n\tmana_handle_t pd_handle;\n\n\t \n\tstruct mutex vport_mutex;\n\tint vport_use_count;\n\n\tbool tx_shortform_allowed;\n\tu32 tx_vp_offset;\n};\n\nstruct mana_ib_mr {\n\tstruct ib_mr ibmr;\n\tstruct ib_umem *umem;\n\tmana_handle_t mr_handle;\n};\n\nstruct mana_ib_cq {\n\tstruct ib_cq ibcq;\n\tstruct ib_umem *umem;\n\tint cqe;\n\tu64 gdma_region;\n\tu64 id;\n};\n\nstruct mana_ib_qp {\n\tstruct ib_qp ibqp;\n\n\t \n\tstruct ib_umem *sq_umem;\n\tint sqe;\n\tu64 sq_gdma_region;\n\tu64 sq_id;\n\tmana_handle_t tx_object;\n\n\t \n\tu32 port;\n};\n\nstruct mana_ib_ucontext {\n\tstruct ib_ucontext ibucontext;\n\tu32 doorbell;\n};\n\nstruct mana_ib_rwq_ind_table {\n\tstruct ib_rwq_ind_table ib_ind_table;\n};\n\nint mana_ib_gd_create_dma_region(struct mana_ib_dev *dev, struct ib_umem *umem,\n\t\t\t\t mana_handle_t *gdma_region);\n\nint mana_ib_gd_destroy_dma_region(struct mana_ib_dev *dev,\n\t\t\t\t  mana_handle_t gdma_region);\n\nstruct ib_wq *mana_ib_create_wq(struct ib_pd *pd,\n\t\t\t\tstruct ib_wq_init_attr *init_attr,\n\t\t\t\tstruct ib_udata *udata);\n\nint mana_ib_modify_wq(struct ib_wq *wq, struct ib_wq_attr *wq_attr,\n\t\t      u32 wq_attr_mask, struct ib_udata *udata);\n\nint mana_ib_destroy_wq(struct ib_wq *ibwq, struct ib_udata *udata);\n\nint mana_ib_create_rwq_ind_table(struct ib_rwq_ind_table *ib_rwq_ind_table,\n\t\t\t\t struct ib_rwq_ind_table_init_attr *init_attr,\n\t\t\t\t struct ib_udata *udata);\n\nint mana_ib_destroy_rwq_ind_table(struct ib_rwq_ind_table *ib_rwq_ind_tbl);\n\nstruct ib_mr *mana_ib_get_dma_mr(struct ib_pd *ibpd, int access_flags);\n\nstruct ib_mr *mana_ib_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,\n\t\t\t\t  u64 iova, int access_flags,\n\t\t\t\t  struct ib_udata *udata);\n\nint mana_ib_dereg_mr(struct ib_mr *ibmr, struct ib_udata *udata);\n\nint mana_ib_create_qp(struct ib_qp *qp, struct ib_qp_init_attr *qp_init_attr,\n\t\t      struct ib_udata *udata);\n\nint mana_ib_modify_qp(struct ib_qp *ibqp, struct ib_qp_attr *attr,\n\t\t      int attr_mask, struct ib_udata *udata);\n\nint mana_ib_destroy_qp(struct ib_qp *ibqp, struct ib_udata *udata);\n\nint mana_ib_cfg_vport(struct mana_ib_dev *dev, u32 port_id,\n\t\t      struct mana_ib_pd *pd, u32 doorbell_id);\nvoid mana_ib_uncfg_vport(struct mana_ib_dev *dev, struct mana_ib_pd *pd,\n\t\t\t u32 port);\n\nint mana_ib_create_cq(struct ib_cq *ibcq, const struct ib_cq_init_attr *attr,\n\t\t      struct ib_udata *udata);\n\nint mana_ib_destroy_cq(struct ib_cq *ibcq, struct ib_udata *udata);\n\nint mana_ib_alloc_pd(struct ib_pd *ibpd, struct ib_udata *udata);\nint mana_ib_dealloc_pd(struct ib_pd *ibpd, struct ib_udata *udata);\n\nint mana_ib_alloc_ucontext(struct ib_ucontext *ibcontext,\n\t\t\t   struct ib_udata *udata);\nvoid mana_ib_dealloc_ucontext(struct ib_ucontext *ibcontext);\n\nint mana_ib_mmap(struct ib_ucontext *ibcontext, struct vm_area_struct *vma);\n\nint mana_ib_get_port_immutable(struct ib_device *ibdev, u32 port_num,\n\t\t\t       struct ib_port_immutable *immutable);\nint mana_ib_query_device(struct ib_device *ibdev, struct ib_device_attr *props,\n\t\t\t struct ib_udata *uhw);\nint mana_ib_query_port(struct ib_device *ibdev, u32 port,\n\t\t       struct ib_port_attr *props);\nint mana_ib_query_gid(struct ib_device *ibdev, u32 port, int index,\n\t\t      union ib_gid *gid);\n\nvoid mana_ib_disassociate_ucontext(struct ib_ucontext *ibcontext);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}