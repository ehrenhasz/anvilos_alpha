{
  "module_name": "trace_tx.h",
  "hash_id": "4743ef932320be23236a023e5c2d565ea46b1cc04910684c8cb3ce4c322832f6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/sw/rdmavt/trace_tx.h",
  "human_readable_source": " \n \n#if !defined(__RVT_TRACE_TX_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __RVT_TRACE_TX_H\n\n#include <linux/tracepoint.h>\n#include <linux/trace_seq.h>\n\n#include <rdma/ib_verbs.h>\n#include <rdma/rdmavt_qp.h>\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM rvt_tx\n\n#define wr_opcode_name(opcode) { IB_WR_##opcode, #opcode  }\n#define show_wr_opcode(opcode)                             \\\n__print_symbolic(opcode,                                   \\\n\twr_opcode_name(RDMA_WRITE),                        \\\n\twr_opcode_name(RDMA_WRITE_WITH_IMM),               \\\n\twr_opcode_name(SEND),                              \\\n\twr_opcode_name(SEND_WITH_IMM),                     \\\n\twr_opcode_name(RDMA_READ),                         \\\n\twr_opcode_name(ATOMIC_CMP_AND_SWP),                \\\n\twr_opcode_name(ATOMIC_FETCH_AND_ADD),              \\\n\twr_opcode_name(LSO),                               \\\n\twr_opcode_name(SEND_WITH_INV),                     \\\n\twr_opcode_name(RDMA_READ_WITH_INV),                \\\n\twr_opcode_name(LOCAL_INV),                         \\\n\twr_opcode_name(MASKED_ATOMIC_CMP_AND_SWP),         \\\n\twr_opcode_name(MASKED_ATOMIC_FETCH_AND_ADD),       \\\n\twr_opcode_name(RESERVED1),                         \\\n\twr_opcode_name(RESERVED2),                         \\\n\twr_opcode_name(RESERVED3),                         \\\n\twr_opcode_name(RESERVED4),                         \\\n\twr_opcode_name(RESERVED5),                         \\\n\twr_opcode_name(RESERVED6),                         \\\n\twr_opcode_name(RESERVED7),                         \\\n\twr_opcode_name(RESERVED8),                         \\\n\twr_opcode_name(RESERVED9),                         \\\n\twr_opcode_name(RESERVED10))\n\n#define POS_PRN \\\n\"[%s] wqe %p wr_id %llx send_flags %x qpn %x qpt %u psn %x lpsn %x ssn %x length %u opcode 0x%.2x,%s size %u avail %u head %u last %u pid %u num_sge %u wr_num_sge %u\"\n\nTRACE_EVENT(\n\trvt_post_one_wr,\n\tTP_PROTO(struct rvt_qp *qp, struct rvt_swqe *wqe, int wr_num_sge),\n\tTP_ARGS(qp, wqe, wr_num_sge),\n\tTP_STRUCT__entry(\n\t\tRDI_DEV_ENTRY(ib_to_rvt(qp->ibqp.device))\n\t\t__field(u64, wr_id)\n\t\t__field(struct rvt_swqe *, wqe)\n\t\t__field(u32, qpn)\n\t\t__field(u32, qpt)\n\t\t__field(u32, psn)\n\t\t__field(u32, lpsn)\n\t\t__field(u32, length)\n\t\t__field(u32, opcode)\n\t\t__field(u32, size)\n\t\t__field(u32, avail)\n\t\t__field(u32, head)\n\t\t__field(u32, last)\n\t\t__field(u32, ssn)\n\t\t__field(int, send_flags)\n\t\t__field(pid_t, pid)\n\t\t__field(int, num_sge)\n\t\t__field(int, wr_num_sge)\n\t),\n\tTP_fast_assign(\n\t\tRDI_DEV_ASSIGN(ib_to_rvt(qp->ibqp.device));\n\t\t__entry->wqe = wqe;\n\t\t__entry->wr_id = wqe->wr.wr_id;\n\t\t__entry->qpn = qp->ibqp.qp_num;\n\t\t__entry->qpt = qp->ibqp.qp_type;\n\t\t__entry->psn = wqe->psn;\n\t\t__entry->lpsn = wqe->lpsn;\n\t\t__entry->length = wqe->length;\n\t\t__entry->opcode = wqe->wr.opcode;\n\t\t__entry->size = qp->s_size;\n\t\t__entry->avail = qp->s_avail;\n\t\t__entry->head = qp->s_head;\n\t\t__entry->last = qp->s_last;\n\t\t__entry->pid = qp->pid;\n\t\t__entry->ssn = wqe->ssn;\n\t\t__entry->send_flags = wqe->wr.send_flags;\n\t\t__entry->num_sge = wqe->wr.num_sge;\n\t\t__entry->wr_num_sge = wr_num_sge;\n\t),\n\tTP_printk(\n\t\tPOS_PRN,\n\t\t__get_str(dev),\n\t\t__entry->wqe,\n\t\t__entry->wr_id,\n\t\t__entry->send_flags,\n\t\t__entry->qpn,\n\t\t__entry->qpt,\n\t\t__entry->psn,\n\t\t__entry->lpsn,\n\t\t__entry->ssn,\n\t\t__entry->length,\n\t\t__entry->opcode, show_wr_opcode(__entry->opcode),\n\t\t__entry->size,\n\t\t__entry->avail,\n\t\t__entry->head,\n\t\t__entry->last,\n\t\t__entry->pid,\n\t\t__entry->num_sge,\n\t\t__entry->wr_num_sge\n\t)\n);\n\nTRACE_EVENT(\n\trvt_qp_send_completion,\n\tTP_PROTO(struct rvt_qp *qp, struct rvt_swqe *wqe, u32 idx),\n\tTP_ARGS(qp, wqe, idx),\n\tTP_STRUCT__entry(\n\t\tRDI_DEV_ENTRY(ib_to_rvt(qp->ibqp.device))\n\t\t__field(struct rvt_swqe *, wqe)\n\t\t__field(u64, wr_id)\n\t\t__field(u32, qpn)\n\t\t__field(u32, qpt)\n\t\t__field(u32, length)\n\t\t__field(u32, idx)\n\t\t__field(u32, ssn)\n\t\t__field(enum ib_wr_opcode, opcode)\n\t\t__field(int, send_flags)\n\t),\n\tTP_fast_assign(\n\t\tRDI_DEV_ASSIGN(ib_to_rvt(qp->ibqp.device));\n\t\t__entry->wqe = wqe;\n\t\t__entry->wr_id = wqe->wr.wr_id;\n\t\t__entry->qpn = qp->ibqp.qp_num;\n\t\t__entry->qpt = qp->ibqp.qp_type;\n\t\t__entry->length = wqe->length;\n\t\t__entry->idx = idx;\n\t\t__entry->ssn = wqe->ssn;\n\t\t__entry->opcode = wqe->wr.opcode;\n\t\t__entry->send_flags = wqe->wr.send_flags;\n\t),\n\tTP_printk(\n\t\t\"[%s] qpn 0x%x qpt %u wqe %p idx %u wr_id %llx length %u ssn %u opcode %x send_flags %x\",\n\t\t__get_str(dev),\n\t\t__entry->qpn,\n\t\t__entry->qpt,\n\t\t__entry->wqe,\n\t\t__entry->idx,\n\t\t__entry->wr_id,\n\t\t__entry->length,\n\t\t__entry->ssn,\n\t\t__entry->opcode,\n\t\t__entry->send_flags\n\t)\n);\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE trace_tx\n#include <trace/define_trace.h>\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}