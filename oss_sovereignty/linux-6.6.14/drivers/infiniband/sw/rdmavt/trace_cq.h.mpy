{
  "module_name": "trace_cq.h",
  "hash_id": "3189cebe60278eaf1bb1abe279a3740dfda9b158d823c78ec75df84e43dbab90",
  "original_prompt": "Ingested from linux-6.6.14/drivers/infiniband/sw/rdmavt/trace_cq.h",
  "human_readable_source": " \n \n#if !defined(__RVT_TRACE_CQ_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __RVT_TRACE_CQ_H\n\n#include <linux/tracepoint.h>\n#include <linux/trace_seq.h>\n\n#include <rdma/ib_verbs.h>\n#include <rdma/rdmavt_cq.h>\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM rvt_cq\n\n#define wc_opcode_name(opcode) { IB_WC_##opcode, #opcode  }\n#define show_wc_opcode(opcode)                                \\\n__print_symbolic(opcode,                                      \\\n\twc_opcode_name(SEND),                                 \\\n\twc_opcode_name(RDMA_WRITE),                           \\\n\twc_opcode_name(RDMA_READ),                            \\\n\twc_opcode_name(COMP_SWAP),                            \\\n\twc_opcode_name(FETCH_ADD),                            \\\n\twc_opcode_name(LSO),                                  \\\n\twc_opcode_name(LOCAL_INV),                            \\\n\twc_opcode_name(REG_MR),                               \\\n\twc_opcode_name(MASKED_COMP_SWAP),                     \\\n\twc_opcode_name(RECV),                                 \\\n\twc_opcode_name(RECV_RDMA_WITH_IMM))\n\n#define CQ_ATTR_PRINT \\\n\"[%s] user cq %s cqe %u comp_vector %d comp_vector_cpu %d flags %x\"\n\nDECLARE_EVENT_CLASS(rvt_cq_template,\n\t\t    TP_PROTO(struct rvt_cq *cq,\n\t\t\t     const struct ib_cq_init_attr *attr),\n\t\t    TP_ARGS(cq, attr),\n\t\t    TP_STRUCT__entry(RDI_DEV_ENTRY(cq->rdi)\n\t\t\t\t     __field(struct rvt_mmap_info *, ip)\n\t\t\t\t     __field(unsigned int, cqe)\n\t\t\t\t     __field(int, comp_vector)\n\t\t\t\t     __field(int, comp_vector_cpu)\n\t\t\t\t     __field(u32, flags)\n\t\t\t\t     ),\n\t\t    TP_fast_assign(RDI_DEV_ASSIGN(cq->rdi);\n\t\t\t\t   __entry->ip = cq->ip;\n\t\t\t\t   __entry->cqe = attr->cqe;\n\t\t\t\t   __entry->comp_vector = attr->comp_vector;\n\t\t\t\t   __entry->comp_vector_cpu =\n\t\t\t\t\t\t\tcq->comp_vector_cpu;\n\t\t\t\t   __entry->flags = attr->flags;\n\t\t\t\t   ),\n\t\t    TP_printk(CQ_ATTR_PRINT, __get_str(dev),\n\t\t\t      __entry->ip ? \"true\" : \"false\", __entry->cqe,\n\t\t\t      __entry->comp_vector, __entry->comp_vector_cpu,\n\t\t\t      __entry->flags\n\t\t\t      )\n);\n\nDEFINE_EVENT(rvt_cq_template, rvt_create_cq,\n\t     TP_PROTO(struct rvt_cq *cq, const struct ib_cq_init_attr *attr),\n\t     TP_ARGS(cq, attr));\n\n#define CQ_PRN \\\n\"[%s] idx %u wr_id %llx status %u opcode %u,%s length %u qpn %x flags %x imm %x\"\n\nDECLARE_EVENT_CLASS(\n\trvt_cq_entry_template,\n\tTP_PROTO(struct rvt_cq *cq, struct ib_wc *wc, u32 idx),\n\tTP_ARGS(cq, wc, idx),\n\tTP_STRUCT__entry(\n\t\tRDI_DEV_ENTRY(cq->rdi)\n\t\t__field(u64, wr_id)\n\t\t__field(u32, status)\n\t\t__field(u32, opcode)\n\t\t__field(u32, qpn)\n\t\t__field(u32, length)\n\t\t__field(u32, idx)\n\t\t__field(u32, flags)\n\t\t__field(u32, imm)\n\t),\n\tTP_fast_assign(\n\t\tRDI_DEV_ASSIGN(cq->rdi);\n\t\t__entry->wr_id = wc->wr_id;\n\t\t__entry->status = wc->status;\n\t\t__entry->opcode = wc->opcode;\n\t\t__entry->length = wc->byte_len;\n\t\t__entry->qpn = wc->qp->qp_num;\n\t\t__entry->idx = idx;\n\t\t__entry->flags = wc->wc_flags;\n\t\t__entry->imm = be32_to_cpu(wc->ex.imm_data);\n\t),\n\tTP_printk(\n\t\tCQ_PRN,\n\t\t__get_str(dev),\n\t\t__entry->idx,\n\t\t__entry->wr_id,\n\t\t__entry->status,\n\t\t__entry->opcode, show_wc_opcode(__entry->opcode),\n\t\t__entry->length,\n\t\t__entry->qpn,\n\t\t__entry->flags,\n\t\t__entry->imm\n\t)\n);\n\nDEFINE_EVENT(\n\trvt_cq_entry_template, rvt_cq_enter,\n\tTP_PROTO(struct rvt_cq *cq, struct ib_wc *wc, u32 idx),\n\tTP_ARGS(cq, wc, idx));\n\nDEFINE_EVENT(\n\trvt_cq_entry_template, rvt_cq_poll,\n\tTP_PROTO(struct rvt_cq *cq, struct ib_wc *wc, u32 idx),\n\tTP_ARGS(cq, wc, idx));\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE trace_cq\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}