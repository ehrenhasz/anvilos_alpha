{
  "module_name": "dummycon.c",
  "hash_id": "fa3771d48882cb7845748596dd194b35e57093225210cee2a4e660bb8d48b66e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/console/dummycon.c",
  "human_readable_source": "\n \n\n#include <linux/types.h>\n#include <linux/kdev_t.h>\n#include <linux/console.h>\n#include <linux/vt_kern.h>\n#include <linux/screen_info.h>\n#include <linux/init.h>\n#include <linux/module.h>\n\n \n\n#if defined(__arm__)\n#define DUMMY_COLUMNS\tscreen_info.orig_video_cols\n#define DUMMY_ROWS\tscreen_info.orig_video_lines\n#else\n \n#define DUMMY_COLUMNS\tCONFIG_DUMMY_CONSOLE_COLUMNS\n#define DUMMY_ROWS\tCONFIG_DUMMY_CONSOLE_ROWS\n#endif\n\n#ifdef CONFIG_FRAMEBUFFER_CONSOLE_DEFERRED_TAKEOVER\n \nstatic RAW_NOTIFIER_HEAD(dummycon_output_nh);\nstatic bool dummycon_putc_called;\n\nvoid dummycon_register_output_notifier(struct notifier_block *nb)\n{\n\tWARN_CONSOLE_UNLOCKED();\n\n\traw_notifier_chain_register(&dummycon_output_nh, nb);\n\n\tif (dummycon_putc_called)\n\t\tnb->notifier_call(nb, 0, NULL);\n}\n\nvoid dummycon_unregister_output_notifier(struct notifier_block *nb)\n{\n\tWARN_CONSOLE_UNLOCKED();\n\n\traw_notifier_chain_unregister(&dummycon_output_nh, nb);\n}\n\nstatic void dummycon_putc(struct vc_data *vc, int c, int ypos, int xpos)\n{\n\tWARN_CONSOLE_UNLOCKED();\n\n\tdummycon_putc_called = true;\n\traw_notifier_call_chain(&dummycon_output_nh, 0, NULL);\n}\n\nstatic void dummycon_putcs(struct vc_data *vc, const unsigned short *s,\n\t\t\t   int count, int ypos, int xpos)\n{\n\tint i;\n\n\tif (!dummycon_putc_called) {\n\t\t \n\t\tfor (i = 0 ; i < count; i++) {\n\t\t\tif (s[i] != vc->vc_video_erase_char)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (i == count)\n\t\t\treturn;\n\n\t\tdummycon_putc_called = true;\n\t}\n\n\traw_notifier_call_chain(&dummycon_output_nh, 0, NULL);\n}\n\nstatic int dummycon_blank(struct vc_data *vc, int blank, int mode_switch)\n{\n\t \n\treturn 1;\n}\n#else\nstatic void dummycon_putc(struct vc_data *vc, int c, int ypos, int xpos) { }\nstatic void dummycon_putcs(struct vc_data *vc, const unsigned short *s,\n\t\t\t   int count, int ypos, int xpos) { }\nstatic int dummycon_blank(struct vc_data *vc, int blank, int mode_switch)\n{\n\treturn 0;\n}\n#endif\n\nstatic const char *dummycon_startup(void)\n{\n    return \"dummy device\";\n}\n\nstatic void dummycon_init(struct vc_data *vc, int init)\n{\n    vc->vc_can_do_color = 1;\n    if (init) {\n\tvc->vc_cols = DUMMY_COLUMNS;\n\tvc->vc_rows = DUMMY_ROWS;\n    } else\n\tvc_resize(vc, DUMMY_COLUMNS, DUMMY_ROWS);\n}\n\nstatic void dummycon_deinit(struct vc_data *vc) { }\nstatic void dummycon_clear(struct vc_data *vc, int sy, int sx, int height,\n\t\t\t   int width) { }\nstatic void dummycon_cursor(struct vc_data *vc, int mode) { }\n\nstatic bool dummycon_scroll(struct vc_data *vc, unsigned int top,\n\t\t\t    unsigned int bottom, enum con_scroll dir,\n\t\t\t    unsigned int lines)\n{\n\treturn false;\n}\n\nstatic int dummycon_switch(struct vc_data *vc)\n{\n\treturn 0;\n}\n\n \n\nconst struct consw dummy_con = {\n\t.owner =\t\tTHIS_MODULE,\n\t.con_startup =\tdummycon_startup,\n\t.con_init =\t\tdummycon_init,\n\t.con_deinit =\tdummycon_deinit,\n\t.con_clear =\tdummycon_clear,\n\t.con_putc =\t\tdummycon_putc,\n\t.con_putcs =\tdummycon_putcs,\n\t.con_cursor =\tdummycon_cursor,\n\t.con_scroll =\tdummycon_scroll,\n\t.con_switch =\tdummycon_switch,\n\t.con_blank =\tdummycon_blank,\n};\nEXPORT_SYMBOL_GPL(dummy_con);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}