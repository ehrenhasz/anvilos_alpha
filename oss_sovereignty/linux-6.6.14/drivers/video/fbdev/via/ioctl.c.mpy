{
  "module_name": "ioctl.c",
  "hash_id": "c1513ab2db4aaa4e7b1c02dcdcc37964cc6e1534759fd00eee43203dec1522e4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/via/ioctl.c",
  "human_readable_source": "\n \n\n#include \"global.h\"\n\nint viafb_ioctl_get_viafb_info(u_long arg)\n{\n\tstruct viafb_ioctl_info viainfo;\n\n\tmemset(&viainfo, 0, sizeof(struct viafb_ioctl_info));\n\n\tviainfo.viafb_id = VIAID;\n\tviainfo.vendor_id = PCI_VIA_VENDOR_ID;\n\n\tswitch (viaparinfo->chip_info->gfx_chip_name) {\n\tcase UNICHROME_CLE266:\n\t\tviainfo.device_id = UNICHROME_CLE266_DID;\n\t\tbreak;\n\n\tcase UNICHROME_K400:\n\t\tviainfo.device_id = UNICHROME_K400_DID;\n\t\tbreak;\n\n\tcase UNICHROME_K800:\n\t\tviainfo.device_id = UNICHROME_K800_DID;\n\t\tbreak;\n\n\tcase UNICHROME_PM800:\n\t\tviainfo.device_id = UNICHROME_PM800_DID;\n\t\tbreak;\n\n\tcase UNICHROME_CN700:\n\t\tviainfo.device_id = UNICHROME_CN700_DID;\n\t\tbreak;\n\n\tcase UNICHROME_CX700:\n\t\tviainfo.device_id = UNICHROME_CX700_DID;\n\t\tbreak;\n\n\tcase UNICHROME_K8M890:\n\t\tviainfo.device_id = UNICHROME_K8M890_DID;\n\t\tbreak;\n\n\tcase UNICHROME_P4M890:\n\t\tviainfo.device_id = UNICHROME_P4M890_DID;\n\t\tbreak;\n\n\tcase UNICHROME_P4M900:\n\t\tviainfo.device_id = UNICHROME_P4M900_DID;\n\t\tbreak;\n\t}\n\n\tviainfo.version = VERSION_MAJOR;\n\tviainfo.revision = VERSION_MINOR;\n\n\tif (copy_to_user((void __user *)arg, &viainfo, sizeof(viainfo)))\n\t\treturn -EFAULT;\n\n\treturn 0;\n}\n\n \nint viafb_ioctl_hotplug(int hres, int vres, int bpp)\n{\n\tint DVIsense, status = 0;\n\tDEBUG_MSG(KERN_INFO \"viafb_ioctl_hotplug!!\\n\");\n\n\tif (viaparinfo->chip_info->tmds_chip_info.tmds_chip_name !=\n\t\tNON_TMDS_TRANSMITTER) {\n\t\tDVIsense = viafb_dvi_sense();\n\n\t\tif (DVIsense) {\n\t\t\tDEBUG_MSG(KERN_INFO \"DVI Attached...\\n\");\n\t\t\tif (viafb_DeviceStatus != DVI_Device) {\n\t\t\t\tviafb_DVI_ON = 1;\n\t\t\t\tviafb_CRT_ON = 0;\n\t\t\t\tviafb_LCD_ON = 0;\n\t\t\t\tviafb_DeviceStatus = DVI_Device;\n\t\t\t\tviafb_set_iga_path();\n\t\t\t\treturn viafb_DeviceStatus;\n\t\t\t}\n\t\t\tstatus = 1;\n\t\t} else\n\t\t\tDEBUG_MSG(KERN_INFO \"DVI De-attached...\\n\");\n\t}\n\n\tif ((viafb_DeviceStatus != CRT_Device) && (status == 0)) {\n\t\tviafb_CRT_ON = 1;\n\t\tviafb_DVI_ON = 0;\n\t\tviafb_LCD_ON = 0;\n\n\t\tviafb_DeviceStatus = CRT_Device;\n\t\tviafb_set_iga_path();\n\t\treturn viafb_DeviceStatus;\n\t}\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}