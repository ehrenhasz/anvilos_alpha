{
  "module_name": "intelfb.h",
  "hash_id": "fc097d0d2e823ce9e4ec3dfd9ce2cd7bfe7502e67764ee4e2127141453658744",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/intelfb/intelfb.h",
  "human_readable_source": " \n#ifndef _INTELFB_H\n#define _INTELFB_H\n\n \n\n#include <linux/agp_backend.h>\n#include <linux/fb.h>\n\n#ifdef CONFIG_FB_INTEL_I2C\n#include <linux/i2c.h>\n#include <linux/i2c-algo-bit.h>\n#endif\n\n \n#define INTELFB_VERSION\t\t\t\"0.9.6\"\n#define INTELFB_MODULE_NAME\t\t\"intelfb\"\n#define SUPPORTED_CHIPSETS\t\t\"830M/845G/852GM/855GM/865G/915G/915GM/945G/945GM/945GME/965G/965GM\"\n\n\n \n\n#ifndef DEBUG\n#define DEBUG\t\t\t\t0\n#endif\n\n#ifndef VERBOSE\n#define VERBOSE\t\t\t\t0\n#endif\n\n#ifndef REGDUMP\n#define REGDUMP\t\t\t\t0\n#endif\n\n#ifndef DETECT_VGA_CLASS_ONLY\n#define DETECT_VGA_CLASS_ONLY\t\t1\n#endif\n\n#ifndef ALLOCATE_FOR_PANNING\n#define ALLOCATE_FOR_PANNING\t\t1\n#endif\n\n#ifndef PREFERRED_MODE\n#define PREFERRED_MODE\t\t\t\"1024x768-32@70\"\n#endif\n\n \n\n \n#define INTELFB_FB_ACQUIRED                 1\n#define INTELFB_MMIO_ACQUIRED               2\n\n \n#define PCI_DEVICE_ID_INTEL_830M\t0x3577\n#define PCI_DEVICE_ID_INTEL_845G\t0x2562\n#define PCI_DEVICE_ID_INTEL_85XGM\t0x3582\n#define PCI_DEVICE_ID_INTEL_854\t\t0x358E\n#define PCI_DEVICE_ID_INTEL_865G\t0x2572\n#define PCI_DEVICE_ID_INTEL_915G\t0x2582\n#define PCI_DEVICE_ID_INTEL_915GM\t0x2592\n#define PCI_DEVICE_ID_INTEL_945G\t0x2772\n#define PCI_DEVICE_ID_INTEL_945GM\t0x27A2\n#define PCI_DEVICE_ID_INTEL_945GME\t0x27AE\n#define PCI_DEVICE_ID_INTEL_965G\t0x29A2\n#define PCI_DEVICE_ID_INTEL_965GM\t0x2A02\n\n \n#define INTEL_REG_SIZE\t\t\t0x80000\n\n#define STRIDE_ALIGNMENT\t\t16\n#define STRIDE_ALIGNMENT_I9XX\t\t64\n\n#define PALETTE_8_ENTRIES\t\t256\n\n\n \n\n \n#define KB(x)\t\t\t((x) * 1024)\n#define MB(x)\t\t\t((x) * 1024 * 1024)\n#define BtoKB(x)\t\t((x) / 1024)\n#define BtoMB(x)\t\t((x) / 1024 / 1024)\n\n#define GTT_PAGE_SIZE           KB(4)\n\n#define ROUND_UP_TO(x, y)\t(((x) + (y) - 1) / (y) * (y))\n#define ROUND_DOWN_TO(x, y)\t((x) / (y) * (y))\n#define ROUND_UP_TO_PAGE(x)\tROUND_UP_TO((x), GTT_PAGE_SIZE)\n#define ROUND_DOWN_TO_PAGE(x)\tROUND_DOWN_TO((x), GTT_PAGE_SIZE)\n\n \n#define PFX\t\t\tINTELFB_MODULE_NAME \": \"\n\n#define ERR_MSG(fmt, args...)\tprintk(KERN_ERR PFX fmt, ## args)\n#define WRN_MSG(fmt, args...)\tprintk(KERN_WARNING PFX fmt, ## args)\n#define NOT_MSG(fmt, args...)\tprintk(KERN_NOTICE PFX fmt, ## args)\n#define INF_MSG(fmt, args...)\tprintk(KERN_INFO PFX fmt, ## args)\n#if DEBUG\n#define DBG_MSG(fmt, args...)\tprintk(KERN_DEBUG PFX fmt, ## args)\n#else\n#define DBG_MSG(fmt, args...)\twhile (0) printk(fmt, ## args)\n#endif\n\n \n#define GET_DINFO(info)\t\t(info)->par\n\n \n#define ACCEL(d, i)                                                     \\\n\t((d)->accel && !(d)->ring_lockup &&                             \\\n\t ((i)->var.accel_flags & FB_ACCELF_TEXT))\n\n \n#define NOACCEL_CHIPSET(d)\t\t\t\t\t\t\\\n\t(0)\n\n#define FIXED_MODE(d) ((d)->fixed_mode)\n\n \n\n#define RINGBUFFER_SIZE\t\tKB(64)\n#define HW_CURSOR_SIZE\t\tKB(4)\n\n \n#define AGP_PHYSICAL_MEMORY     2\n\n \n \n \n#define MAX_OUTPUTS 6\n\n \n#define INTELFB_OUTPUT_UNUSED 0\n#define INTELFB_OUTPUT_ANALOG 1\n#define INTELFB_OUTPUT_DVO 2\n#define INTELFB_OUTPUT_SDVO 3\n#define INTELFB_OUTPUT_LVDS 4\n#define INTELFB_OUTPUT_TVOUT 5\n\n#define INTELFB_DVO_CHIP_NONE 0\n#define INTELFB_DVO_CHIP_LVDS 1\n#define INTELFB_DVO_CHIP_TMDS 2\n#define INTELFB_DVO_CHIP_TVOUT 4\n\n#define INTELFB_OUTPUT_PIPE_NC  0\n#define INTELFB_OUTPUT_PIPE_A   1\n#define INTELFB_OUTPUT_PIPE_B   2\n\n \n\n \nenum intel_chips {\n\tINTEL_830M,\n\tINTEL_845G,\n\tINTEL_85XGM,\n\tINTEL_852GM,\n\tINTEL_852GME,\n\tINTEL_854,\n\tINTEL_855GM,\n\tINTEL_855GME,\n\tINTEL_865G,\n\tINTEL_915G,\n\tINTEL_915GM,\n\tINTEL_945G,\n\tINTEL_945GM,\n\tINTEL_945GME,\n\tINTEL_965G,\n\tINTEL_965GM,\n};\n\nstruct intelfb_hwstate {\n\tu32 vga0_divisor;\n\tu32 vga1_divisor;\n\tu32 vga_pd;\n\tu32 dpll_a;\n\tu32 dpll_b;\n\tu32 fpa0;\n\tu32 fpa1;\n\tu32 fpb0;\n\tu32 fpb1;\n\tu32 palette_a[PALETTE_8_ENTRIES];\n\tu32 palette_b[PALETTE_8_ENTRIES];\n\tu32 htotal_a;\n\tu32 hblank_a;\n\tu32 hsync_a;\n\tu32 vtotal_a;\n\tu32 vblank_a;\n\tu32 vsync_a;\n\tu32 src_size_a;\n\tu32 bclrpat_a;\n\tu32 htotal_b;\n\tu32 hblank_b;\n\tu32 hsync_b;\n\tu32 vtotal_b;\n\tu32 vblank_b;\n\tu32 vsync_b;\n\tu32 src_size_b;\n\tu32 bclrpat_b;\n\tu32 adpa;\n\tu32 dvoa;\n\tu32 dvob;\n\tu32 dvoc;\n\tu32 dvoa_srcdim;\n\tu32 dvob_srcdim;\n\tu32 dvoc_srcdim;\n\tu32 lvds;\n\tu32 pipe_a_conf;\n\tu32 pipe_b_conf;\n\tu32 disp_arb;\n\tu32 cursor_a_control;\n\tu32 cursor_b_control;\n\tu32 cursor_a_base;\n\tu32 cursor_b_base;\n\tu32 cursor_size;\n\tu32 disp_a_ctrl;\n\tu32 disp_b_ctrl;\n\tu32 disp_a_base;\n\tu32 disp_b_base;\n\tu32 cursor_a_palette[4];\n\tu32 cursor_b_palette[4];\n\tu32 disp_a_stride;\n\tu32 disp_b_stride;\n\tu32 vgacntrl;\n\tu32 add_id;\n\tu32 swf0x[7];\n\tu32 swf1x[7];\n\tu32 swf3x[3];\n\tu32 fence[8];\n\tu32 instpm;\n\tu32 mem_mode;\n\tu32 fw_blc_0;\n\tu32 fw_blc_1;\n\tu16 hwstam;\n\tu16 ier;\n\tu16 iir;\n\tu16 imr;\n};\n\nstruct intelfb_heap_data {\n\tu32 physical;\n\tu8 __iomem *virtual;\n\tu32 offset;\t\t \n\tu32 size;\t\t \n};\n\n#ifdef CONFIG_FB_INTEL_I2C\nstruct intelfb_i2c_chan {\n    struct intelfb_info *dinfo;\n    u32 reg;\n    struct i2c_adapter adapter;\n    struct i2c_algo_bit_data algo;\n};\n#endif\n\nstruct intelfb_output_rec {\n    int type;\n    int pipe;\n    int flags;\n\n#ifdef CONFIG_FB_INTEL_I2C\n    struct intelfb_i2c_chan i2c_bus;\n    struct intelfb_i2c_chan ddc_bus;\n#endif\n};\n\nstruct intelfb_vsync {\n\twait_queue_head_t wait;\n\tunsigned int count;\n\tint pan_display;\n\tu32 pan_offset;\n};\n\nstruct intelfb_info {\n\tstruct fb_info *info;\n\tconst struct fb_ops *fbops;\n\tstruct pci_dev *pdev;\n\n\tstruct intelfb_hwstate save_state;\n\n\t \n\tstruct agp_memory *gtt_fb_mem;      \n\tstruct agp_memory *gtt_ring_mem;    \n\tstruct agp_memory *gtt_cursor_mem;  \n\n\t \n\tu8 fbmem_gart;\n\n\tint wc_cookie;\n\n\t \n\tstruct intelfb_heap_data aperture;\n\tstruct intelfb_heap_data fb;\n\tstruct intelfb_heap_data ring;\n\tstruct intelfb_heap_data cursor;\n\n\t \n\tu32 mmio_base_phys;\n\tu8 __iomem *mmio_base;\n\n\t \n\tu32 fb_start;\n\n\t \n\tu32 ring_head;\n\tu32 ring_tail;\n\tu32 ring_tail_mask;\n\tu32 ring_space;\n\tu32 ring_lockup;\n\n\t \n\tu32 pseudo_palette[16];\n\n\t \n\tint pci_chipset;\n\tint chipset;\n\tconst char *name;\n\tint mobile;\n\n\t \n\tint bpp, depth;\n\tu32 visual;\n\tint xres, yres, pitch;\n\tint pixclock;\n\n\t \n\tint pipe;\n\n\t \n\tint accel;\n\tint hwcursor;\n\tint fixed_mode;\n\tint ring_active;\n\tint flag;\n\tunsigned long irq_flags;\n\tint open;\n\n\t \n\tstruct intelfb_vsync vsync;\n\tspinlock_t int_lock;\n\n\t \n\tint cursor_on;\n\tint cursor_blanked;\n\tu8  cursor_src[64];\n\n\t \n\tint initial_vga;\n\tstruct fb_var_screeninfo initial_var;\n\tu32 initial_fb_base;\n\tu32 initial_video_ram;\n\tu32 initial_pitch;\n\n\t \n\tint registered;\n\n\t \n\tint pll_index;\n\n\t \n\tint num_outputs;\n\tstruct intelfb_output_rec output[MAX_OUTPUTS];\n};\n\n#define IS_I9XX(dinfo) (((dinfo)->chipset == INTEL_915G) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_915GM) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_945G) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_945GM) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_945GME) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_965G) ||\t\\\n\t\t\t((dinfo)->chipset == INTEL_965GM))\n\n \n\nextern int intelfb_var_to_depth(const struct fb_var_screeninfo *var);\n\n#ifdef CONFIG_FB_INTEL_I2C\nextern void intelfb_create_i2c_busses(struct intelfb_info *dinfo);\nextern void intelfb_delete_i2c_busses(struct intelfb_info *dinfo);\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}