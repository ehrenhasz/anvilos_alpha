{
  "module_name": "omapfb.h",
  "hash_id": "ae0766934b641c3241cc5941401785caf0002e422e69528b8ed36a618ab281b9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/omap/omapfb.h",
  "human_readable_source": " \n \n\n#ifndef __OMAPFB_H\n#define __OMAPFB_H\n\n#include <linux/fb.h>\n#include <linux/mutex.h>\n#include <linux/omapfb.h>\n\n#define OMAPFB_EVENT_READY\t1\n#define OMAPFB_EVENT_DISABLED\t2\n\n#define OMAP_LCDC_INV_VSYNC             0x0001\n#define OMAP_LCDC_INV_HSYNC             0x0002\n#define OMAP_LCDC_INV_PIX_CLOCK         0x0004\n#define OMAP_LCDC_INV_OUTPUT_EN         0x0008\n#define OMAP_LCDC_HSVS_RISING_EDGE      0x0010\n#define OMAP_LCDC_HSVS_OPPOSITE         0x0020\n\n#define OMAP_LCDC_SIGNAL_MASK\t\t0x003f\n\n#define OMAP_LCDC_PANEL_TFT\t\t0x0100\n\n#define OMAPFB_PLANE_XRES_MIN\t\t8\n#define OMAPFB_PLANE_YRES_MIN\t\t8\n\nstruct omapfb_device;\n\n#define OMAPFB_PLANE_NUM\t\t1\n\nstruct omapfb_mem_region {\n\tu32\t\tpaddr;\n\tvoid __iomem\t*vaddr;\n\tunsigned long\tsize;\n\tu8\t\ttype;\t\t \n\tenum omapfb_color_format format; \n\tunsigned\tformat_used:1;\t \n\tunsigned\talloc:1;\t \n\tunsigned\tmap:1;\t\t \n};\n\nstruct omapfb_mem_desc {\n\tint\t\t\t\tregion_cnt;\n\tstruct omapfb_mem_region\tregion[OMAPFB_PLANE_NUM];\n};\n\nstruct lcd_panel {\n\tconst char\t*name;\n\tint\t\tconfig;\t\t \n\tint\t\tbpp;\t\t \n\tint\t\tdata_lines;\t \n\n\tint\t\tx_res, y_res;\n\tint\t\tpixel_clock;\t \n\tint\t\thsw;\t\t \n\tint\t\thfp;\t\t \n\tint\t\thbp;\t\t \n\tint\t\tvsw;\t\t \n\tint\t\tvfp;\t\t \n\tint\t\tvbp;\t\t \n\tint\t\tacb;\t\t \n\tint\t\tpcd;\t\t \n\n\tint\t\t(*init)\t\t(struct lcd_panel *panel,\n\t\t\t\t\t struct omapfb_device *fbdev);\n\tvoid\t\t(*cleanup)\t(struct lcd_panel *panel);\n\tint\t\t(*enable)\t(struct lcd_panel *panel);\n\tvoid\t\t(*disable)\t(struct lcd_panel *panel);\n\tunsigned long\t(*get_caps)\t(struct lcd_panel *panel);\n\tint\t\t(*set_bklight_level)(struct lcd_panel *panel,\n\t\t\t\t\t     unsigned int level);\n\tunsigned int\t(*get_bklight_level)(struct lcd_panel *panel);\n\tunsigned int\t(*get_bklight_max)  (struct lcd_panel *panel);\n\tint\t\t(*run_test)\t(struct lcd_panel *panel, int test_num);\n};\n\nstruct extif_timings {\n\tint cs_on_time;\n\tint cs_off_time;\n\tint we_on_time;\n\tint we_off_time;\n\tint re_on_time;\n\tint re_off_time;\n\tint we_cycle_time;\n\tint re_cycle_time;\n\tint cs_pulse_width;\n\tint access_time;\n\n\tint clk_div;\n\n\tu32 tim[5];\t\t \n\n\tint converted;\n};\n\nstruct lcd_ctrl_extif {\n\tint  (*init)\t\t(struct omapfb_device *fbdev);\n\tvoid (*cleanup)\t\t(void);\n\tvoid (*get_clk_info)\t(u32 *clk_period, u32 *max_clk_div);\n\tunsigned long (*get_max_tx_rate)(void);\n\tint  (*convert_timings)\t(struct extif_timings *timings);\n\tvoid (*set_timings)\t(const struct extif_timings *timings);\n\tvoid (*set_bits_per_cycle)(int bpc);\n\tvoid (*write_command)\t(const void *buf, unsigned int len);\n\tvoid (*read_data)\t(void *buf, unsigned int len);\n\tvoid (*write_data)\t(const void *buf, unsigned int len);\n\tvoid (*transfer_area)\t(int width, int height,\n\t\t\t\t void (callback)(void *data), void *data);\n\tint  (*setup_tearsync)\t(unsigned pin_cnt,\n\t\t\t\t unsigned hs_pulse_time, unsigned vs_pulse_time,\n\t\t\t\t int hs_pol_inv, int vs_pol_inv, int div);\n\tint  (*enable_tearsync) (int enable, unsigned line);\n\n\tunsigned long\t\tmax_transmit_size;\n};\n\nstruct omapfb_notifier_block {\n\tstruct notifier_block\tnb;\n\tvoid\t\t\t*data;\n\tint\t\t\tplane_idx;\n};\n\ntypedef int (*omapfb_notifier_callback_t)(struct notifier_block *,\n\t\t\t\t\t  unsigned long event,\n\t\t\t\t\t  void *fbi);\n\nstruct lcd_ctrl {\n\tconst char\t*name;\n\tvoid\t\t*data;\n\n\tint\t\t(*init)\t\t  (struct omapfb_device *fbdev,\n\t\t\t\t\t   int ext_mode,\n\t\t\t\t\t   struct omapfb_mem_desc *req_md);\n\tvoid\t\t(*cleanup)\t  (void);\n\tvoid\t\t(*bind_client)\t  (struct omapfb_notifier_block *nb);\n\tvoid\t\t(*get_caps)\t  (int plane, struct omapfb_caps *caps);\n\tint\t\t(*set_update_mode)(enum omapfb_update_mode mode);\n\tenum omapfb_update_mode (*get_update_mode)(void);\n\tint\t\t(*setup_plane)\t  (int plane, int channel_out,\n\t\t\t\t\t   unsigned long offset,\n\t\t\t\t\t   int screen_width,\n\t\t\t\t\t   int pos_x, int pos_y, int width,\n\t\t\t\t\t   int height, int color_mode);\n\tint\t\t(*set_rotate)\t  (int angle);\n\tint\t\t(*setup_mem)\t  (int plane, size_t size,\n\t\t\t\t\t   int mem_type, unsigned long *paddr);\n\tint\t\t(*mmap)\t\t  (struct fb_info *info,\n\t\t\t\t\t   struct vm_area_struct *vma);\n\tint\t\t(*set_scale)\t  (int plane,\n\t\t\t\t\t   int orig_width, int orig_height,\n\t\t\t\t\t   int out_width, int out_height);\n\tint\t\t(*enable_plane)\t  (int plane, int enable);\n\tint\t\t(*update_window)  (struct fb_info *fbi,\n\t\t\t\t\t   struct omapfb_update_window *win,\n\t\t\t\t\t   void (*callback)(void *),\n\t\t\t\t\t   void *callback_data);\n\tvoid\t\t(*sync)\t\t  (void);\n\tvoid\t\t(*suspend)\t  (void);\n\tvoid\t\t(*resume)\t  (void);\n\tint\t\t(*run_test)\t  (int test_num);\n\tint\t\t(*setcolreg)\t  (u_int regno, u16 red, u16 green,\n\t\t\t\t\t   u16 blue, u16 transp,\n\t\t\t\t\t   int update_hw_mem);\n\tint\t\t(*set_color_key)  (struct omapfb_color_key *ck);\n\tint\t\t(*get_color_key)  (struct omapfb_color_key *ck);\n};\n\nenum omapfb_state {\n\tOMAPFB_DISABLED\t\t= 0,\n\tOMAPFB_SUSPENDED\t= 99,\n\tOMAPFB_ACTIVE\t\t= 100\n};\n\nstruct omapfb_plane_struct {\n\tint\t\t\t\tidx;\n\tstruct omapfb_plane_info\tinfo;\n\tenum omapfb_color_format\tcolor_mode;\n\tstruct omapfb_device\t\t*fbdev;\n};\n\nstruct omapfb_device {\n\tint\t\t\tstate;\n\tint                     ext_lcdc;\t\t \n\tstruct mutex\t\trqueue_mutex;\n\n\tint\t\t\tpalette_size;\n\tu32\t\t\tpseudo_palette[17];\n\n\tstruct lcd_panel\t*panel;\t\t\t \n\tconst struct lcd_ctrl\t*ctrl;\t\t\t \n\tconst struct lcd_ctrl\t*int_ctrl;\t\t \n\tint\t\t\text_irq;\n\tint\t\t\tint_irq;\n\tstruct lcd_ctrl_extif\t*ext_if;\t\t \n\tstruct device\t\t*dev;\n\tstruct fb_var_screeninfo\tnew_var;\t \n\n\tstruct omapfb_mem_desc\t\tmem_desc;\n\tstruct fb_info\t\t\t*fb_info[OMAPFB_PLANE_NUM];\n\n\tstruct platform_device\t*dssdev;\t \n};\n\nextern struct lcd_ctrl omap1_lcd_ctrl;\n\nextern void omapfb_register_panel(struct lcd_panel *panel);\nextern void omapfb_write_first_pixel(struct omapfb_device *fbdev, u16 pixval);\nextern void omapfb_notify_clients(struct omapfb_device *fbdev,\n\t\t\t\t  unsigned long event);\nextern int  omapfb_register_client(struct omapfb_notifier_block *nb,\n\t\t\t\t   omapfb_notifier_callback_t callback,\n\t\t\t\t   void *callback_data);\nextern int  omapfb_unregister_client(struct omapfb_notifier_block *nb);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}