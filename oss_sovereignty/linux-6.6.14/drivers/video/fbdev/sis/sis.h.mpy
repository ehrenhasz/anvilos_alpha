{
  "module_name": "sis.h",
  "hash_id": "93511042be24df4306065d592221077b0a4bc30468253700837dea7f5189115d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/sis/sis.h",
  "human_readable_source": " \n \n\n#ifndef _SIS_H_\n#define _SIS_H_\n\n#include <video/sisfb.h>\n\n#include \"vgatypes.h\"\n#include \"vstruct.h\"\n\n#define VER_MAJOR\t\t1\n#define VER_MINOR\t\t8\n#define VER_LEVEL\t\t9\n\n#include <linux/spinlock.h>\n\n#ifdef CONFIG_COMPAT\n#define SIS_NEW_CONFIG_COMPAT\n#endif\t \n\n#undef SISFBDEBUG\n\n#ifdef SISFBDEBUG\n#define DPRINTK(fmt, args...) printk(KERN_DEBUG \"%s: \" fmt, __func__ , ## args)\n#define TWDEBUG(x) printk(KERN_INFO x \"\\n\");\n#else\n#define DPRINTK(fmt, args...)\n#define TWDEBUG(x)\n#endif\n\n#define SISFAIL(x) do { printk(x \"\\n\"); return -EINVAL; } while(0)\n\n \n#ifndef PCI_DEVICE_ID_SI_650_VGA\n#define PCI_DEVICE_ID_SI_650_VGA\t0x6325\n#endif\n#ifndef PCI_DEVICE_ID_SI_650\n#define PCI_DEVICE_ID_SI_650\t\t0x0650\n#endif\n#ifndef PCI_DEVICE_ID_SI_651\n#define PCI_DEVICE_ID_SI_651\t\t0x0651\n#endif\n#ifndef PCI_DEVICE_ID_SI_740\n#define PCI_DEVICE_ID_SI_740\t\t0x0740\n#endif\n#ifndef PCI_DEVICE_ID_SI_330\n#define PCI_DEVICE_ID_SI_330\t\t0x0330\n#endif\n#ifndef PCI_DEVICE_ID_SI_660_VGA\n#define PCI_DEVICE_ID_SI_660_VGA\t0x6330\n#endif\n#ifndef PCI_DEVICE_ID_SI_661\n#define PCI_DEVICE_ID_SI_661\t\t0x0661\n#endif\n#ifndef PCI_DEVICE_ID_SI_741\n#define PCI_DEVICE_ID_SI_741\t\t0x0741\n#endif\n#ifndef PCI_DEVICE_ID_SI_660\n#define PCI_DEVICE_ID_SI_660\t\t0x0660\n#endif\n#ifndef PCI_DEVICE_ID_SI_760\n#define PCI_DEVICE_ID_SI_760\t\t0x0760\n#endif\n#ifndef PCI_DEVICE_ID_SI_761\n#define PCI_DEVICE_ID_SI_761\t\t0x0761\n#endif\n\n#ifndef PCI_VENDOR_ID_XGI\n#define PCI_VENDOR_ID_XGI\t\t0x18ca\n#endif\n\n#ifndef PCI_DEVICE_ID_XGI_20\n#define PCI_DEVICE_ID_XGI_20\t\t0x0020\n#endif\n\n#ifndef PCI_DEVICE_ID_XGI_40\n#define PCI_DEVICE_ID_XGI_40\t\t0x0040\n#endif\n\n \n#ifndef FB_ACCEL_SIS_GLAMOUR_2\n#define FB_ACCEL_SIS_GLAMOUR_2\t40\t \n#endif\n#ifndef FB_ACCEL_SIS_XABRE\n#define FB_ACCEL_SIS_XABRE\t41\t \n#endif\n#ifndef FB_ACCEL_XGI_VOLARI_V\n#define FB_ACCEL_XGI_VOLARI_V\t47\t \n#endif\n#ifndef FB_ACCEL_XGI_VOLARI_Z\n#define FB_ACCEL_XGI_VOLARI_Z\t48\t \n#endif\n\n \n#define HW_CURSOR_CAP\t\t0x80\n#define TURBO_QUEUE_CAP\t\t0x40\n#define AGP_CMD_QUEUE_CAP\t0x20\n#define VM_CMD_QUEUE_CAP\t0x10\n#define MMIO_CMD_QUEUE_CAP\t0x08\n\n \n#define TURBO_QUEUE_AREA_SIZE\t(512 * 1024)\t \n#define HW_CURSOR_AREA_SIZE_300\t4096\t\t \n\n \n#define COMMAND_QUEUE_AREA_SIZE\t(512 * 1024)\t \n#define COMMAND_QUEUE_AREA_SIZE_Z7 (128 * 1024)\t \n#define HW_CURSOR_AREA_SIZE_315\t16384\t\t \n#define COMMAND_QUEUE_THRESHOLD\t0x1F\n\n#define SIS_OH_ALLOC_SIZE\t4000\n#define SENTINEL\t\t0x7fffffff\n\n#define SEQ_ADR\t\t\t0x14\n#define SEQ_DATA\t\t0x15\n#define DAC_ADR\t\t\t0x18\n#define DAC_DATA\t\t0x19\n#define CRTC_ADR\t\t0x24\n#define CRTC_DATA\t\t0x25\n#define DAC2_ADR\t\t(0x16-0x30)\n#define DAC2_DATA\t\t(0x17-0x30)\n#define VB_PART1_ADR\t\t(0x04-0x30)\n#define VB_PART1_DATA\t\t(0x05-0x30)\n#define VB_PART2_ADR\t\t(0x10-0x30)\n#define VB_PART2_DATA\t\t(0x11-0x30)\n#define VB_PART3_ADR\t\t(0x12-0x30)\n#define VB_PART3_DATA\t\t(0x13-0x30)\n#define VB_PART4_ADR\t\t(0x14-0x30)\n#define VB_PART4_DATA\t\t(0x15-0x30)\n\n#define SISSR\t\t\tivideo->SiS_Pr.SiS_P3c4\n#define SISCR\t\t\tivideo->SiS_Pr.SiS_P3d4\n#define SISDACA\t\t\tivideo->SiS_Pr.SiS_P3c8\n#define SISDACD\t\t\tivideo->SiS_Pr.SiS_P3c9\n#define SISPART1\t\tivideo->SiS_Pr.SiS_Part1Port\n#define SISPART2\t\tivideo->SiS_Pr.SiS_Part2Port\n#define SISPART3\t\tivideo->SiS_Pr.SiS_Part3Port\n#define SISPART4\t\tivideo->SiS_Pr.SiS_Part4Port\n#define SISPART5\t\tivideo->SiS_Pr.SiS_Part5Port\n#define SISDAC2A\t\tSISPART5\n#define SISDAC2D\t\t(SISPART5 + 1)\n#define SISMISCR\t\t(ivideo->SiS_Pr.RelIO + 0x1c)\n#define SISMISCW\t\tivideo->SiS_Pr.SiS_P3c2\n#define SISINPSTAT\t\t(ivideo->SiS_Pr.RelIO + 0x2a)\n#define SISPEL\t\t\tivideo->SiS_Pr.SiS_P3c6\n#define SISVGAENABLE\t\t(ivideo->SiS_Pr.RelIO + 0x13)\n#define SISVID\t\t\t(ivideo->SiS_Pr.RelIO + 0x02 - 0x30)\n#define SISCAP\t\t\t(ivideo->SiS_Pr.RelIO + 0x00 - 0x30)\n\n#define IND_SIS_PASSWORD\t\t0x05   \n#define IND_SIS_COLOR_MODE\t\t0x06\n#define IND_SIS_RAMDAC_CONTROL\t\t0x07\n#define IND_SIS_DRAM_SIZE\t\t0x14\n#define IND_SIS_MODULE_ENABLE\t\t0x1E\n#define IND_SIS_PCI_ADDRESS_SET\t\t0x20\n#define IND_SIS_TURBOQUEUE_ADR\t\t0x26\n#define IND_SIS_TURBOQUEUE_SET\t\t0x27\n#define IND_SIS_POWER_ON_TRAP\t\t0x38\n#define IND_SIS_POWER_ON_TRAP2\t\t0x39\n#define IND_SIS_CMDQUEUE_SET\t\t0x26\n#define IND_SIS_CMDQUEUE_THRESHOLD\t0x27\n\n#define IND_SIS_AGP_IO_PAD\t0x48\n\n#define SIS_CRT2_WENABLE_300\t0x24   \n#define SIS_CRT2_WENABLE_315\t0x2F\n\n#define SIS_PASSWORD\t\t0x86   \n\n#define SIS_INTERLACED_MODE\t0x20   \n#define SIS_8BPP_COLOR_MODE\t0x0\n#define SIS_15BPP_COLOR_MODE\t0x1\n#define SIS_16BPP_COLOR_MODE\t0x2\n#define SIS_32BPP_COLOR_MODE\t0x4\n\n#define SIS_ENABLE_2D\t\t0x40   \n\n#define SIS_MEM_MAP_IO_ENABLE\t0x01   \n#define SIS_PCI_ADDR_ENABLE\t0x80\n\n#define SIS_AGP_CMDQUEUE_ENABLE\t\t0x80   \n#define SIS_VRAM_CMDQUEUE_ENABLE\t0x40\n#define SIS_MMIO_CMD_ENABLE\t\t0x20\n#define SIS_CMD_QUEUE_SIZE_512k\t\t0x00\n#define SIS_CMD_QUEUE_SIZE_1M\t\t0x04\n#define SIS_CMD_QUEUE_SIZE_2M\t\t0x08\n#define SIS_CMD_QUEUE_SIZE_4M\t\t0x0C\n#define SIS_CMD_QUEUE_RESET\t\t0x01\n#define SIS_CMD_AUTO_CORR\t\t0x02\n\n#define SIS_CMD_QUEUE_SIZE_Z7_64k\t0x00  \n#define SIS_CMD_QUEUE_SIZE_Z7_128k\t0x04\n\n#define SIS_SIMULTANEOUS_VIEW_ENABLE\t0x01   \n#define SIS_MODE_SELECT_CRT2\t\t0x02\n#define SIS_VB_OUTPUT_COMPOSITE\t\t0x04\n#define SIS_VB_OUTPUT_SVIDEO\t\t0x08\n#define SIS_VB_OUTPUT_SCART\t\t0x10\n#define SIS_VB_OUTPUT_LCD\t\t0x20\n#define SIS_VB_OUTPUT_CRT2\t\t0x40\n#define SIS_VB_OUTPUT_HIVISION\t\t0x80\n\n#define SIS_VB_OUTPUT_DISABLE\t0x20   \n#define SIS_DRIVER_MODE\t\t0x40\n\n#define SIS_VB_COMPOSITE\t0x01   \n#define SIS_VB_SVIDEO\t\t0x02\n#define SIS_VB_SCART\t\t0x04\n#define SIS_VB_LCD\t\t0x08\n#define SIS_VB_CRT2\t\t0x10\n#define SIS_CRT1\t\t0x20\n#define SIS_VB_HIVISION\t\t0x40\n#define SIS_VB_YPBPR\t\t0x80\n#define SIS_VB_TV\t\t(SIS_VB_COMPOSITE | SIS_VB_SVIDEO | \\\n\t\t\t\tSIS_VB_SCART | SIS_VB_HIVISION | SIS_VB_YPBPR)\n\n#define SIS_EXTERNAL_CHIP_MASK\t\t\t0x0E   \n#define SIS_EXTERNAL_CHIP_SIS301\t\t0x01   \n#define SIS_EXTERNAL_CHIP_LVDS\t\t\t0x02\n#define SIS_EXTERNAL_CHIP_TRUMPION\t\t0x03\n#define SIS_EXTERNAL_CHIP_LVDS_CHRONTEL\t\t0x04\n#define SIS_EXTERNAL_CHIP_CHRONTEL\t\t0x05\n#define SIS310_EXTERNAL_CHIP_LVDS\t\t0x02\n#define SIS310_EXTERNAL_CHIP_LVDS_CHRONTEL\t0x03\n\n#define SIS_AGP_2X\t\t0x20   \n\n \n#define VB_CONEXANT\t\t0x00000800\t \n#define VB_TRUMPION\t\tVB_CONEXANT\t \n#define VB_302ELV\t\t0x00004000\n#define VB_301\t\t\t0x00100000\t \n#define VB_301B\t\t\t0x00200000\n#define VB_302B\t\t\t0x00400000\n#define VB_30xBDH\t\t0x00800000\t \n#define VB_LVDS\t\t\t0x01000000\n#define VB_CHRONTEL\t\t0x02000000\n#define VB_301LV\t\t0x04000000\n#define VB_302LV\t\t0x08000000\n#define VB_301C\t\t\t0x10000000\n\n#define VB_SISBRIDGE\t\t(VB_301|VB_301B|VB_301C|VB_302B|VB_301LV|VB_302LV|VB_302ELV)\n#define VB_VIDEOBRIDGE\t\t(VB_SISBRIDGE | VB_LVDS | VB_CHRONTEL | VB_CONEXANT)\n\n \n#define VB2_SISUMC\t\t0x00000001\n#define VB2_301\t\t\t0x00000002\t \n#define VB2_301B\t\t0x00000004\n#define VB2_301C\t\t0x00000008\n#define VB2_307T\t\t0x00000010\n#define VB2_302B\t\t0x00000800\n#define VB2_301LV\t\t0x00001000\n#define VB2_302LV\t\t0x00002000\n#define VB2_302ELV\t\t0x00004000\n#define VB2_307LV\t\t0x00008000\n#define VB2_30xBDH\t\t0x08000000       \n#define VB2_CONEXANT\t\t0x10000000\n#define VB2_TRUMPION\t\t0x20000000\n#define VB2_LVDS\t\t0x40000000\n#define VB2_CHRONTEL\t\t0x80000000\n\n#define VB2_SISLVDSBRIDGE\t(VB2_301LV | VB2_302LV | VB2_302ELV | VB2_307LV)\n#define VB2_SISTMDSBRIDGE\t(VB2_301   | VB2_301B  | VB2_301C   | VB2_302B | VB2_307T)\n#define VB2_SISBRIDGE\t\t(VB2_SISLVDSBRIDGE | VB2_SISTMDSBRIDGE)\n\n#define VB2_SISTMDSLCDABRIDGE\t(VB2_301C | VB2_307T)\n#define VB2_SISLCDABRIDGE\t(VB2_SISTMDSLCDABRIDGE | VB2_301LV | VB2_302LV | VB2_302ELV | VB2_307LV)\n\n#define VB2_SISHIVISIONBRIDGE\t(VB2_301  | VB2_301B | VB2_302B)\n#define VB2_SISYPBPRBRIDGE\t(VB2_301C | VB2_307T | VB2_SISLVDSBRIDGE)\n#define VB2_SISYPBPRARBRIDGE\t(VB2_301C | VB2_307T | VB2_307LV)\n#define VB2_SISTAP4SCALER\t(VB2_301C | VB2_307T | VB2_302ELV | VB2_307LV)\n#define VB2_SISTVBRIDGE\t\t(VB2_SISHIVISIONBRIDGE | VB2_SISYPBPRBRIDGE)\n\n#define VB2_SISVGA2BRIDGE\t(VB2_301 | VB2_301B | VB2_301C | VB2_302B | VB2_307T)\n\n#define VB2_VIDEOBRIDGE\t\t(VB2_SISBRIDGE | VB2_LVDS | VB2_CHRONTEL | VB2_CONEXANT)\n\n#define VB2_30xB\t\t(VB2_301B  | VB2_301C   | VB2_302B  | VB2_307T)\n#define VB2_30xBLV\t\t(VB2_30xB  | VB2_SISLVDSBRIDGE)\n#define VB2_30xC\t\t(VB2_301C  | VB2_307T)\n#define VB2_30xCLV\t\t(VB2_301C  | VB2_307T   | VB2_302ELV| VB2_307LV)\n#define VB2_SISEMIBRIDGE\t(VB2_302LV | VB2_302ELV | VB2_307LV)\n#define VB2_LCD162MHZBRIDGE\t(VB2_301C  | VB2_307T)\n#define VB2_LCDOVER1280BRIDGE\t(VB2_301C  | VB2_307T   | VB2_302LV | VB2_302ELV | VB2_307LV)\n#define VB2_LCDOVER1600BRIDGE\t(VB2_307T  | VB2_307LV)\n#define VB2_RAMDAC202MHZBRIDGE\t(VB2_301C  | VB2_307T)\n\n \n\nvoid SiS_SetReg(SISIOADDRESS, u8, u8);\nvoid SiS_SetRegByte(SISIOADDRESS, u8);\nvoid SiS_SetRegShort(SISIOADDRESS, u16);\nvoid SiS_SetRegLong(SISIOADDRESS, u32);\nvoid SiS_SetRegANDOR(SISIOADDRESS, u8, u8, u8);\nvoid SiS_SetRegAND(SISIOADDRESS, u8, u8);\nvoid SiS_SetRegOR(SISIOADDRESS, u8, u8);\nu8 SiS_GetReg(SISIOADDRESS, u8);\nu8 SiS_GetRegByte(SISIOADDRESS);\nu16 SiS_GetRegShort(SISIOADDRESS);\nu32 SiS_GetRegLong(SISIOADDRESS);\n\n \n \nbool\t\tSiSInitPtr(struct SiS_Private *SiS_Pr);\nunsigned short\tSiS_GetModeID_LCD(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, bool FSTN,\n\t\t\t\tunsigned short CustomT, int LCDwith, int LCDheight,\n\t\t\t\tunsigned int VBFlags2);\nunsigned short\tSiS_GetModeID_TV(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, unsigned int VBFlags2);\nunsigned short\tSiS_GetModeID_VGA2(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, unsigned int VBFlags2);\n\nvoid\t\tSiS_DisplayOn(struct SiS_Private *SiS_Pr);\nvoid\t\tSiS_DisplayOff(struct SiS_Private *SiS_Pr);\nvoid\t\tSiSRegInit(struct SiS_Private *SiS_Pr, SISIOADDRESS BaseAddr);\nvoid\t\tSiS_SetEnableDstn(struct SiS_Private *SiS_Pr, int enable);\nvoid\t\tSiS_SetEnableFstn(struct SiS_Private *SiS_Pr, int enable);\nunsigned short\tSiS_GetModeFlag(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nbool\t\tSiSDetermineROMLayout661(struct SiS_Private *SiS_Pr);\n\nbool\t\tSiS_SearchModeID(struct SiS_Private *SiS_Pr, unsigned short *ModeNo,\n\t\t\t\tunsigned short *ModeIdIndex);\nunsigned short\tSiS_GetModePtr(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nunsigned short  SiS_GetRefCRTVCLK(struct SiS_Private *SiS_Pr, unsigned short Index, int UseWide);\nunsigned short  SiS_GetRefCRT1CRTC(struct SiS_Private *SiS_Pr, unsigned short Index, int UseWide);\nunsigned short\tSiS_GetColorDepth(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nunsigned short\tSiS_GetOffset(struct SiS_Private *SiS_Pr,unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex, unsigned short RRTI);\n#ifdef CONFIG_FB_SIS_300\nvoid\t\tSiS_GetFIFOThresholdIndex300(struct SiS_Private *SiS_Pr, unsigned short *idx1,\n\t\t\t\tunsigned short *idx2);\nunsigned short\tSiS_GetFIFOThresholdB300(unsigned short idx1, unsigned short idx2);\nunsigned short\tSiS_GetLatencyFactor630(struct SiS_Private *SiS_Pr, unsigned short index);\n#endif\nvoid\t\tSiS_LoadDAC(struct SiS_Private *SiS_Pr, unsigned short ModeNo, unsigned short ModeIdIndex);\nbool\t\tSiSSetMode(struct SiS_Private *SiS_Pr, unsigned short ModeNo);\nvoid\t\tSiS_CalcCRRegisters(struct SiS_Private *SiS_Pr, int depth);\nvoid\t\tSiS_CalcLCDACRT1Timing(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nvoid\t\tSiS_Generic_ConvertCRData(struct SiS_Private *SiS_Pr, unsigned char *crdata, int xres,\n\t\t\t\tint yres, struct fb_var_screeninfo *var, bool writeres);\n\n \nextern void\t\tSiS_GetVBInfo(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex, int chkcrt2mode);\nextern void\t\tSiS_GetLCDResInfo(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nextern void\t\tSiS_SetYPbPr(struct SiS_Private *SiS_Pr);\nextern void\t\tSiS_SetTVMode(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nextern void\t\tSiS_UnLockCRT2(struct SiS_Private *SiS_Pr);\nextern void\t\tSiS_DisableBridge(struct SiS_Private *);\nextern bool\t\tSiS_SetCRT2Group(struct SiS_Private *, unsigned short);\nextern unsigned short\tSiS_GetRatePtr(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nextern void\t\tSiS_WaitRetrace1(struct SiS_Private *SiS_Pr);\nextern unsigned short\tSiS_GetResInfo(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex);\nextern unsigned short\tSiS_GetCH700x(struct SiS_Private *SiS_Pr, unsigned short tempax);\nextern unsigned short\tSiS_GetVCLK2Ptr(struct SiS_Private *SiS_Pr, unsigned short ModeNo,\n\t\t\t\tunsigned short ModeIdIndex, unsigned short RRTI);\nextern bool\t\tSiS_IsVAMode(struct SiS_Private *);\nextern bool\t\tSiS_IsDualEdge(struct SiS_Private *);\n\n#ifdef CONFIG_FB_SIS_300\nextern unsigned int\tsisfb_read_nbridge_pci_dword(struct SiS_Private *SiS_Pr, int reg);\nextern void\t\tsisfb_write_nbridge_pci_dword(struct SiS_Private *SiS_Pr, int reg,\n\t\t\t\tunsigned int val);\n#endif\n#ifdef CONFIG_FB_SIS_315\nextern void\t\tsisfb_write_nbridge_pci_byte(struct SiS_Private *SiS_Pr, int reg,\n\t\t\t\tunsigned char val);\nextern unsigned int\tsisfb_read_mio_pci_word(struct SiS_Private *SiS_Pr, int reg);\n#endif\n\n\n \n#define MMIO_IN8(base, offset)  readb((base+offset))\n#define MMIO_IN16(base, offset) readw((base+offset))\n#define MMIO_IN32(base, offset) readl((base+offset))\n\n#define MMIO_OUT8(base, offset, val)  writeb(((u8)(val)), (base+offset))\n#define MMIO_OUT16(base, offset, val) writew(((u16)(val)), (base+offset))\n#define MMIO_OUT32(base, offset, val) writel(((u32)(val)), (base+offset))\n\n \n#define Q_BASE_ADDR\t\t0x85C0   \n#define Q_WRITE_PTR\t\t0x85C4   \n#define Q_READ_PTR\t\t0x85C8   \n#define Q_STATUS\t\t0x85CC   \n\n#define MMIO_QUEUE_PHYBASE      Q_BASE_ADDR\n#define MMIO_QUEUE_WRITEPORT    Q_WRITE_PTR\n#define MMIO_QUEUE_READPORT     Q_READ_PTR\n\n#ifndef FB_BLANK_UNBLANK\n#define FB_BLANK_UNBLANK\t0\n#endif\n#ifndef FB_BLANK_NORMAL\n#define FB_BLANK_NORMAL\t\t1\n#endif\n#ifndef FB_BLANK_VSYNC_SUSPEND\n#define FB_BLANK_VSYNC_SUSPEND\t2\n#endif\n#ifndef FB_BLANK_HSYNC_SUSPEND\n#define FB_BLANK_HSYNC_SUSPEND\t3\n#endif\n#ifndef FB_BLANK_POWERDOWN\n#define FB_BLANK_POWERDOWN\t4\n#endif\n\nenum _SIS_LCD_TYPE {\n    LCD_INVALID = 0,\n    LCD_800x600,\n    LCD_1024x768,\n    LCD_1280x1024,\n    LCD_1280x960,\n    LCD_640x480,\n    LCD_1600x1200,\n    LCD_1920x1440,\n    LCD_2048x1536,\n    LCD_320x240,\t \n    LCD_1400x1050,\n    LCD_1152x864,\n    LCD_1152x768,\n    LCD_1280x768,\n    LCD_1024x600,\n    LCD_320x240_2,\t \n    LCD_320x240_3,\t \n    LCD_848x480,\n    LCD_1280x800,\n    LCD_1680x1050,\n    LCD_1280x720,\n    LCD_1280x854,\n    LCD_CUSTOM,\n    LCD_UNKNOWN\n};\n\nenum _SIS_CMDTYPE {\n    MMIO_CMD = 0,\n    AGP_CMD_QUEUE,\n    VM_CMD_QUEUE,\n};\n\nstruct SIS_OH {\n\tstruct SIS_OH *poh_next;\n\tstruct SIS_OH *poh_prev;\n\tu32            offset;\n\tu32            size;\n};\n\nstruct SIS_OHALLOC {\n\tstruct SIS_OHALLOC *poha_next;\n\tstruct SIS_OH aoh[1];\n};\n\nstruct SIS_HEAP {\n\tstruct SIS_OH\toh_free;\n\tstruct SIS_OH\toh_used;\n\tstruct SIS_OH\t*poh_freelist;\n\tstruct SIS_OHALLOC *poha_chain;\n\tu32\t\tmax_freesize;\n\tstruct sis_video_info *vinfo;\n};\n\n \nstruct sis_video_info {\n\tint\t\tcardnumber;\n\tstruct fb_info  *memyselfandi;\n\n\tstruct SiS_Private SiS_Pr;\n\n\tstruct sisfb_info sisfbinfo;\t \n\n\tstruct fb_var_screeninfo default_var;\n\n\tstruct fb_fix_screeninfo sisfb_fix;\n\tu32\t\tpseudo_palette[16];\n\n\tstruct sisfb_monitor {\n\t\tu16 hmin;\n\t\tu16 hmax;\n\t\tu16 vmin;\n\t\tu16 vmax;\n\t\tu32 dclockmax;\n\t\tu8  feature;\n\t\tbool datavalid;\n\t}\t\tsisfb_thismonitor;\n\n\tunsigned short\tchip_id;\t \n\tunsigned short\tchip_vendor;\t \n\tchar\t\tmyid[40];\n\n\tstruct pci_dev  *nbridge;\n\tstruct pci_dev  *lpcdev;\n\n\tint\t\tmni;\t \n\n\tunsigned long\tvideo_size;\n\tunsigned long\tvideo_base;\n\tunsigned long\tmmio_size;\n\tunsigned long\tmmio_base;\n\tunsigned long\tvga_base;\n\n\tunsigned long\tvideo_offset;\n\n\tunsigned long\tUMAsize, LFBsize;\n\n\tvoid __iomem\t*video_vbase;\n\tvoid __iomem\t*mmio_vbase;\n\n\tunsigned char\t*bios_abase;\n\n\tint\t\twc_cookie;\n\n\tu32\t\tsisfb_mem;\n\n\tu32\t\tsisfb_parm_mem;\n\tint\t\tsisfb_accel;\n\tint\t\tsisfb_ypan;\n\tint\t\tsisfb_max;\n\tint\t\tsisfb_userom;\n\tint\t\tsisfb_useoem;\n\tint\t\tsisfb_mode_idx;\n\tint\t\tsisfb_parm_rate;\n\tint\t\tsisfb_crt1off;\n\tint\t\tsisfb_forcecrt1;\n\tint\t\tsisfb_crt2type;\n\tint\t\tsisfb_crt2flags;\n\tint\t\tsisfb_dstn;\n\tint\t\tsisfb_fstn;\n\tint\t\tsisfb_tvplug;\n\tint\t\tsisfb_tvstd;\n\tint\t\tsisfb_nocrt2rate;\n\n\tu32\t\theapstart;\t\t \n\tvoid __iomem\t*sisfb_heap_start;\t \n\tvoid __iomem\t*sisfb_heap_end;\t \n\tu32\t\tsisfb_heap_size;\n\tint\t\thavenoheap;\n\n\tstruct SIS_HEAP\tsisfb_heap;\t\t \n\n\tint\t\tvideo_bpp;\n\tint\t\tvideo_cmap_len;\n\tint\t\tvideo_width;\n\tint\t\tvideo_height;\n\tunsigned int\trefresh_rate;\n\n\tunsigned int\tchip;\n\tunsigned int\tchip_real_id;\n\tu8\t\trevision_id;\n\tint\t\tsisvga_enabled;\t\t \n\n\tint\t\tvideo_linelength;\t \n\tint\t\tscrnpitchCRT1;\t\t \n\n\tu16\t\tDstColor;\t\t \n\tu32\t\tSiS310_AccelDepth;\n\tu32\t\tCommandReg;\n\tint\t\tcmdqueuelength;\t\t \n\tu32\t\tcmdQueueSize;\t\t \n\n\tspinlock_t\tlockaccel;\t\t \n\n\tunsigned int\tpcibus;\n\tunsigned int\tpcislot;\n\tunsigned int\tpcifunc;\n\n\tint\t\taccel;\n\tint\t\tengineok;\n\n\tu16\t\tsubsysvendor;\n\tu16\t\tsubsysdevice;\n\n\tu32\t\tvbflags;\t\t \n\tu32\t\tcurrentvbflags;\n\tu32\t\tvbflags2;\n\n\tint\t\tlcdxres, lcdyres;\n\tint\t\tlcddefmodeidx, tvdefmodeidx, defmodeidx;\n\tu32\t\tCRT2LCDType;\t\t \n\tu32\t\tcurFSTN, curDSTN;\n\n\tint\t\tcurrent_bpp;\n\tint\t\tcurrent_width;\n\tint\t\tcurrent_height;\n\tint\t\tcurrent_htotal;\n\tint\t\tcurrent_vtotal;\n\tint\t\tcurrent_linelength;\n\t__u32\t\tcurrent_pixclock;\n\tint\t\tcurrent_refresh_rate;\n\n\tunsigned int\tcurrent_base;\n\n\tu8\t\tmode_no;\n\tu8\t\trate_idx;\n\tint\t\tmodechanged;\n\tunsigned char\tmodeprechange;\n\n\tu8\t\tsisfb_lastrates[128];\n\n\tint\t\tnewrom;\n\tint\t\thaveXGIROM;\n\tint\t\tregistered;\n\tint\t\twarncount;\n\n\tint\t\tsisvga_engine;\n\tint\t\thwcursor_size;\n\tint\t\tCRT2_write_enable;\n\tu8\t\tcaps;\n\n\tu8\t\tdetectedpdc;\n\tu8\t\tdetectedpdca;\n\tu8\t\tdetectedlcda;\n\n\tvoid __iomem\t*hwcursor_vbase;\n\n\tint\t\tchronteltype;\n\tint\t\ttvxpos, tvypos;\n\tu8\t\tp2_1f,p2_20,p2_2b,p2_42,p2_43,p2_01,p2_02;\n\tint\t\ttvx, tvy;\n\n\tu8\t\tsisfblocked;\n\n\tstruct sisfb_info sisfb_infoblock;\n\n\tstruct sisfb_cmd sisfb_command;\n\n\tu32\t\tsisfb_id;\n\n\tu8\t\tsisfb_can_post;\n\tu8\t\tsisfb_card_posted;\n\tu8\t\tsisfb_was_boot_device;\n\n\tstruct sis_video_info *next;\n};\n\n \nextern void\tfbcon_sis_fillrect(struct fb_info *info,\n\t\t\t\tconst struct fb_fillrect *rect);\nextern void\tfbcon_sis_copyarea(struct fb_info *info,\n\t\t\t\tconst struct fb_copyarea *area);\nextern int\tfbcon_sis_sync(struct fb_info *info);\n\n \nextern int\tsisfb_initaccel(struct sis_video_info *ivideo);\nextern void\tsisfb_syncaccel(struct sis_video_info *ivideo);\n\n \n#ifdef CONFIG_FB_SIS_300\nunsigned int\tsisfb_read_nbridge_pci_dword(struct SiS_Private *SiS_Pr, int reg);\nvoid\t\tsisfb_write_nbridge_pci_dword(struct SiS_Private *SiS_Pr, int reg, unsigned int val);\nunsigned int\tsisfb_read_lpc_pci_dword(struct SiS_Private *SiS_Pr, int reg);\n#endif\n#ifdef CONFIG_FB_SIS_315\nvoid\t\tsisfb_write_nbridge_pci_byte(struct SiS_Private *SiS_Pr, int reg, unsigned char val);\nunsigned int\tsisfb_read_mio_pci_word(struct SiS_Private *SiS_Pr, int reg);\n#endif\n\n \nvoid\t\t\tsis_malloc(struct sis_memreq *req);\nvoid\t\t\tsis_malloc_new(struct pci_dev *pdev, struct sis_memreq *req);\nvoid\t\t\tsis_free(u32 base);\nvoid\t\t\tsis_free_new(struct pci_dev *pdev, u32 base);\n\n \nextern unsigned short\tSiS_GetModeID_LCD(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, bool FSTN, unsigned short CustomT,\n\t\t\t\tint LCDwith, int LCDheight, unsigned int VBFlags2);\nextern unsigned short\tSiS_GetModeID_TV(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, unsigned int VBFlags2);\nextern unsigned short\tSiS_GetModeID_VGA2(int VGAEngine, unsigned int VBFlags, int HDisplay,\n\t\t\t\tint VDisplay, int Depth, unsigned int VBFlags2);\nextern void\t\tSiSRegInit(struct SiS_Private *SiS_Pr, SISIOADDRESS BaseAddr);\nextern bool\t\tSiSSetMode(struct SiS_Private *SiS_Pr, unsigned short ModeNo);\nextern void\t\tSiS_SetEnableDstn(struct SiS_Private *SiS_Pr, int enable);\nextern void\t\tSiS_SetEnableFstn(struct SiS_Private *SiS_Pr, int enable);\n\nextern bool\t\tSiSDetermineROMLayout661(struct SiS_Private *SiS_Pr);\n\nextern bool\t\tsisfb_gettotalfrommode(struct SiS_Private *SiS_Pr, unsigned char modeno,\n\t\t\t\tint *htotal, int *vtotal, unsigned char rateindex);\nextern int\t\tsisfb_mode_rate_to_dclock(struct SiS_Private *SiS_Pr,\n\t\t\t\tunsigned char modeno, unsigned char rateindex);\nextern int\t\tsisfb_mode_rate_to_ddata(struct SiS_Private *SiS_Pr, unsigned char modeno,\n\t\t\t\tunsigned char rateindex, struct fb_var_screeninfo *var);\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}