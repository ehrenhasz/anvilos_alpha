{
  "module_name": "riva_hw.h",
  "hash_id": "c6ec19f6d3912963104675612e7908343f84ad7c9f3e86bf067621172b4cbe9b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/riva/riva_hw.h",
  "human_readable_source": " \n\n \n\n \n#ifndef __RIVA_HW_H__\n#define __RIVA_HW_H__\n#define RIVA_SW_VERSION 0x00010003\n\n#ifndef Bool\ntypedef int Bool;\n#endif\n\n#ifndef TRUE\n#define TRUE 1\n#endif\n#ifndef FALSE\n#define FALSE 0\n#endif\n#ifndef NULL\n#define NULL 0\n#endif\n\n \ntypedef unsigned char  U008;\ntypedef unsigned short U016;\ntypedef unsigned int   U032;\n\n \n#include <asm/io.h>\n\n#define NV_WR08(p,i,d)  (__raw_writeb((d), (void __iomem *)(p) + (i)))\n#define NV_RD08(p,i)    (__raw_readb((void __iomem *)(p) + (i)))\n#define NV_WR16(p,i,d)  (__raw_writew((d), (void __iomem *)(p) + (i)))\n#define NV_RD16(p,i)    (__raw_readw((void __iomem *)(p) + (i)))\n#define NV_WR32(p,i,d)  (__raw_writel((d), (void __iomem *)(p) + (i)))\n#define NV_RD32(p,i)    (__raw_readl((void __iomem *)(p) + (i)))\n\n#define VGA_WR08(p,i,d) (writeb((d), (void __iomem *)(p) + (i)))\n#define VGA_RD08(p,i)   (readb((void __iomem *)(p) + (i)))\n\n \n#define NV_ARCH_03  0x03\n#define NV_ARCH_04  0x04\n#define NV_ARCH_10  0x10\n#define NV_ARCH_20  0x20\n#define NV_ARCH_30  0x30\n#define NV_ARCH_40  0x40\n\n \n\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BB];\n    U032 Rop3;\n} RivaRop;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BD];\n    U032 Shape;\n    U032 reserved03[0x001];\n    U032 Color0;\n    U032 Color1;\n    U032 Monochrome[2];\n} RivaPattern;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BB];\n    U032 TopLeft;\n    U032 WidthHeight;\n} RivaClip;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop[1];\n#endif\n    U032 reserved01[0x0BC];\n    U032 Color;\n    U032 reserved03[0x03E];\n    U032 TopLeft;\n    U032 WidthHeight;\n} RivaRectangle;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BB];\n    U032 TopLeftSrc;\n    U032 TopLeftDst;\n    U032 WidthHeight;\n} RivaScreenBlt;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop[1];\n#endif\n    U032 reserved01[0x0BC];\n    U032 TopLeft;\n    U032 WidthHeight;\n    U032 WidthHeightIn;\n    U032 reserved02[0x03C];\n    U032 Pixels;\n} RivaPixmap;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BB];\n    U032 reserved03[(0x040)-1];\n    U032 Color1A;\n    struct\n    {\n        U032 TopLeft;\n        U032 WidthHeight;\n    } UnclippedRectangle[64];\n    U032 reserved04[(0x080)-3];\n    struct\n    {\n        U032 TopLeft;\n        U032 BottomRight;\n    } ClipB;\n    U032 Color1B;\n    struct\n    {\n        U032 TopLeft;\n        U032 BottomRight;\n    } ClippedRectangle[64];\n    U032 reserved05[(0x080)-5];\n    struct\n    {\n        U032 TopLeft;\n        U032 BottomRight;\n    } ClipC;\n    U032 Color1C;\n    U032 WidthHeightC;\n    U032 PointC;\n    U032 MonochromeData1C;\n    U032 reserved06[(0x080)+121];\n    struct\n    {\n        U032 TopLeft;\n        U032 BottomRight;\n    } ClipD;\n    U032 Color1D;\n    U032 WidthHeightInD;\n    U032 WidthHeightOutD;\n    U032 PointD;\n    U032 MonochromeData1D;\n    U032 reserved07[(0x080)+120];\n    struct\n    {\n        U032 TopLeft;\n        U032 BottomRight;\n    } ClipE;\n    U032 Color0E;\n    U032 Color1E;\n    U032 WidthHeightInE;\n    U032 WidthHeightOutE;\n    U032 PointE;\n    U032 MonochromeData01E;\n} RivaBitmap;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BC];\n    U032 TextureOffset;\n    U032 TextureFormat;\n    U032 TextureFilter;\n    U032 FogColor;\n \n#ifdef Control\n#undef Control\n#endif\n    U032 Control;\n    U032 AlphaTest;\n    U032 reserved02[0x339];\n    U032 FogAndIndex;\n    U032 Color;\n    float ScreenX;\n    float ScreenY;\n    float ScreenZ;\n    float EyeM;\n    float TextureS;\n    float TextureT;\n} RivaTexturedTriangle03;\ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BB];\n    U032 ColorKey;\n    U032 TextureOffset;\n    U032 TextureFormat;\n    U032 TextureFilter;\n    U032 Blend;\n \n#ifdef Control\n#undef Control\n#endif\n    U032 Control;\n    U032 FogColor;\n    U032 reserved02[0x39];\n    struct\n    {\n        float ScreenX;\n        float ScreenY;\n        float ScreenZ;\n        float EyeM;\n        U032 Color;\n        U032 Specular;\n        float TextureS;\n        float TextureT;\n    } Vertex[16];\n    U032 DrawTriangle3D;\n} RivaTexturedTriangle05;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop[1];\n#endif\n    U032 reserved01[0x0BC];\n    U032 Color;              \n    U032 Reserved02[0x03e];\n    struct {                 \n        U032 point0;         \n        U032 point1;         \n    } Lin[16];               \n    struct {                 \n        U032 point0X;        \n        U032 point0Y;        \n        U032 point1X;        \n        U032 point1Y;        \n    } Lin32[8];              \n    U032 PolyLin[32];        \n    struct {                 \n        U032 x;              \n        U032 y;              \n    } PolyLin32[16];         \n    struct {                 \n        U032 color;          \n        U032 point;          \n    } ColorPolyLin[16];      \n} RivaLine;\n \ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BE];\n    U032 Offset;\n} RivaSurface;\ntypedef volatile struct\n{\n    U032 reserved00[4];\n#ifdef __BIG_ENDIAN\n    U032 FifoFree;\n#else\n    U016 FifoFree;\n    U016 Nop;\n#endif\n    U032 reserved01[0x0BD];\n    U032 Pitch;\n    U032 RenderBufferOffset;\n    U032 ZBufferOffset;\n} RivaSurface3D;\n    \n \n\n#define FP_ENABLE  1\n#define FP_DITHER  2\n\nstruct _riva_hw_inst;\nstruct _riva_hw_state;\n \ntypedef struct _riva_hw_inst\n{\n     \n    U032 Architecture;\n    U032 Version;\n    U032 Chipset;\n    U032 CrystalFreqKHz;\n    U032 RamAmountKBytes;\n    U032 MaxVClockFreqKHz;\n    U032 RamBandwidthKBytesPerSec;\n    U032 EnableIRQ;\n    U032 IO;\n    U032 VBlankBit;\n    U032 FifoFreeCount;\n    U032 FifoEmptyCount;\n    U032 CursorStart;\n    U032 flatPanel;\n    Bool twoHeads;\n     \n    volatile U032 __iomem *PCRTC0;\n    volatile U032 __iomem *PCRTC;\n    volatile U032 __iomem *PRAMDAC0;\n    volatile U032 __iomem *PFB;\n    volatile U032 __iomem *PFIFO;\n    volatile U032 __iomem *PGRAPH;\n    volatile U032 __iomem *PEXTDEV;\n    volatile U032 __iomem *PTIMER;\n    volatile U032 __iomem *PMC;\n    volatile U032 __iomem *PRAMIN;\n    volatile U032 __iomem *FIFO;\n    volatile U032 __iomem *CURSOR;\n    volatile U008 __iomem *PCIO0;\n    volatile U008 __iomem *PCIO;\n    volatile U008 __iomem *PVIO;\n    volatile U008 __iomem *PDIO0;\n    volatile U008 __iomem *PDIO;\n    volatile U032 __iomem *PRAMDAC;\n     \n    int  (*Busy)(struct _riva_hw_inst *);\n    void (*LoadStateExt)(struct _riva_hw_inst *,struct _riva_hw_state *);\n    void (*UnloadStateExt)(struct _riva_hw_inst *,struct _riva_hw_state *);\n    void (*SetStartAddress)(struct _riva_hw_inst *,U032);\n    void (*SetSurfaces2D)(struct _riva_hw_inst *,U032,U032);\n    void (*SetSurfaces3D)(struct _riva_hw_inst *,U032,U032);\n    int  (*ShowHideCursor)(struct _riva_hw_inst *,int);\n    void (*LockUnlock)(struct _riva_hw_inst *, int);\n     \n    struct _riva_hw_state *CurrentState;\n     \n    RivaRop                 __iomem *Rop;\n    RivaPattern             __iomem *Patt;\n    RivaClip                __iomem *Clip;\n    RivaPixmap              __iomem *Pixmap;\n    RivaScreenBlt           __iomem *Blt;\n    RivaBitmap              __iomem *Bitmap;\n    RivaLine                __iomem *Line;\n    RivaTexturedTriangle03  __iomem *Tri03;\n    RivaTexturedTriangle05  __iomem *Tri05;\n} RIVA_HW_INST;\n \ntypedef struct _riva_hw_state\n{\n    U032 bpp;\n    U032 width;\n    U032 height;\n    U032 interlace;\n    U032 repaint0;\n    U032 repaint1;\n    U032 screen;\n    U032 scale;\n    U032 dither;\n    U032 extra;\n    U032 pixel;\n    U032 horiz;\n    U032 arbitration0;\n    U032 arbitration1;\n    U032 vpll;\n    U032 vpll2;\n    U032 pllsel;\n    U032 general;\n    U032 crtcOwner;\n    U032 head; \n    U032 head2; \n    U032 config;\n    U032 cursorConfig;\t\n    U032 cursor0;\n    U032 cursor1;\n    U032 cursor2;\n    U032 offset0;\n    U032 offset1;\n    U032 offset2;\n    U032 offset3;\n    U032 pitch0;\n    U032 pitch1;\n    U032 pitch2;\n    U032 pitch3;\n} RIVA_HW_STATE;\n\n \n\nextern int CalcStateExt\n(\n    RIVA_HW_INST  *chip,\n    RIVA_HW_STATE *state,\n    struct pci_dev *pdev,\n    int            bpp,\n    int            width,\n    int            hDisplaySize,\n    int            height,\n    int            dotClock\n);\n\n \nint RivaGetConfig(RIVA_HW_INST *chip, struct pci_dev *pdev, unsigned int c);\n \n\n#define RIVA_FIFO_FREE(hwinst,hwptr,cnt)                            \\\n{                                                                   \\\n    while ((hwinst).FifoFreeCount < (cnt)) {                        \\\n\tmb();mb();\t\t\t\t\t\t    \\\n        (hwinst).FifoFreeCount = NV_RD32(&(hwinst).hwptr->FifoFree, 0) >> 2;     \\\n    }\t\t\t\t\t\t\t\t    \\\n    (hwinst).FifoFreeCount -= (cnt);                                \\\n}\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}