{
  "module_name": "au1100fb.h",
  "hash_id": "715a22affcfe1267f008f8129465dadf4a30d893c4c81c7f17cecc7831aeb387",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/au1100fb.h",
  "human_readable_source": " \n\n#ifndef _AU1100LCD_H\n#define _AU1100LCD_H\n\n#include <asm/mach-au1x00/au1000.h>\n\n#define print_err(f, arg...) printk(KERN_ERR DRIVER_NAME \": \" f \"\\n\", ## arg)\n#define print_warn(f, arg...) printk(KERN_WARNING DRIVER_NAME \": \" f \"\\n\", ## arg)\n#define print_info(f, arg...) printk(KERN_INFO DRIVER_NAME \": \" f \"\\n\", ## arg)\n\n#if DEBUG\n#define print_dbg(f, arg...) printk(__FILE__ \": \" f \"\\n\", ## arg)\n#else\n#define print_dbg(f, arg...) do {} while (0)\n#endif\n\n#if defined(__BIG_ENDIAN)\n#define LCD_CONTROL_DEFAULT_PO LCD_CONTROL_PO_11\n#else\n#define LCD_CONTROL_DEFAULT_PO LCD_CONTROL_PO_00\n#endif\n#define LCD_CONTROL_DEFAULT_SBPPF LCD_CONTROL_SBPPF_565\n\n \n\n \n#define AU1100_LCD_MAX_XRES\t800\n#define AU1100_LCD_MAX_YRES\t600\n#define AU1100_LCD_MAX_BPP\t16\n#define AU1100_LCD_MAX_CLK\t48000000\n#define AU1100_LCD_NBR_PALETTE_ENTRIES 256\n\n \n#define AU1100FB_NBR_VIDEO_BUFFERS 4\n\n \n\nstruct au1100fb_panel\n{\n\tconst char name[25];\t\t \n\n\tu32   \tcontrol_base;\t\t \n\tu32\tclkcontrol_base;\t \n\n\tu32\thorztiming;\n\tu32\tverttiming;\n\n\tu32\txres;\t\t \n\tu32 \tyres;\t\t \n\tu32 \tbpp;\t\t \n};\n\nstruct au1100fb_regs\n{\n\tu32  lcd_control;\n\tu32  lcd_intstatus;\n\tu32  lcd_intenable;\n\tu32  lcd_horztiming;\n\tu32  lcd_verttiming;\n\tu32  lcd_clkcontrol;\n\tu32  lcd_dmaaddr0;\n\tu32  lcd_dmaaddr1;\n\tu32  lcd_words;\n\tu32  lcd_pwmdiv;\n\tu32  lcd_pwmhi;\n\tu32  reserved[(0x0400-0x002C)/4];\n\tu32  lcd_palettebase[256];\n};\n\nstruct au1100fb_device {\n\n\tstruct fb_info info;\t\t\t \n\n\tstruct au1100fb_panel \t*panel;\t\t \n\n\tstruct au1100fb_regs* \tregs;\t\t \n\tsize_t       \t\tregs_len;\n\tunsigned int \t\tregs_phys;\n\n\tunsigned char* \t\tfb_mem;\t\t \n\tsize_t\t      \t\tfb_len;\n\tdma_addr_t    \t\tfb_phys;\n\tint\t\t\tpanel_idx;\n\tstruct clk\t\t*lcdclk;\n\tstruct device\t\t*dev;\n};\n\n \n\n#define LCD_CONTROL                (AU1100_LCD_BASE + 0x0)\n  #define LCD_CONTROL_SBB_BIT      21\n  #define LCD_CONTROL_SBB_MASK     (0x3 << LCD_CONTROL_SBB_BIT)\n    #define LCD_CONTROL_SBB_1        (0 << LCD_CONTROL_SBB_BIT)\n    #define LCD_CONTROL_SBB_2        (1 << LCD_CONTROL_SBB_BIT)\n    #define LCD_CONTROL_SBB_3        (2 << LCD_CONTROL_SBB_BIT)\n    #define LCD_CONTROL_SBB_4        (3 << LCD_CONTROL_SBB_BIT)\n  #define LCD_CONTROL_SBPPF_BIT    18\n  #define LCD_CONTROL_SBPPF_MASK   (0x7 << LCD_CONTROL_SBPPF_BIT)\n    #define LCD_CONTROL_SBPPF_655    (0 << LCD_CONTROL_SBPPF_BIT)\n    #define LCD_CONTROL_SBPPF_565    (1 << LCD_CONTROL_SBPPF_BIT)\n    #define LCD_CONTROL_SBPPF_556    (2 << LCD_CONTROL_SBPPF_BIT)\n    #define LCD_CONTROL_SBPPF_1555   (3 << LCD_CONTROL_SBPPF_BIT)\n    #define LCD_CONTROL_SBPPF_5551   (4 << LCD_CONTROL_SBPPF_BIT)\n  #define LCD_CONTROL_WP           (1<<17)\n  #define LCD_CONTROL_WD           (1<<16)\n  #define LCD_CONTROL_C            (1<<15)\n  #define LCD_CONTROL_SM_BIT       13\n  #define LCD_CONTROL_SM_MASK      (0x3 << LCD_CONTROL_SM_BIT)\n    #define LCD_CONTROL_SM_0         (0 << LCD_CONTROL_SM_BIT)\n    #define LCD_CONTROL_SM_90        (1 << LCD_CONTROL_SM_BIT)\n    #define LCD_CONTROL_SM_180       (2 << LCD_CONTROL_SM_BIT)\n    #define LCD_CONTROL_SM_270       (3 << LCD_CONTROL_SM_BIT)\n  #define LCD_CONTROL_DB           (1<<12)\n  #define LCD_CONTROL_CCO          (1<<11)\n  #define LCD_CONTROL_DP           (1<<10)\n  #define LCD_CONTROL_PO_BIT       8\n  #define LCD_CONTROL_PO_MASK      (0x3 << LCD_CONTROL_PO_BIT)\n    #define LCD_CONTROL_PO_00        (0 << LCD_CONTROL_PO_BIT)\n    #define LCD_CONTROL_PO_01        (1 << LCD_CONTROL_PO_BIT)\n    #define LCD_CONTROL_PO_10        (2 << LCD_CONTROL_PO_BIT)\n    #define LCD_CONTROL_PO_11        (3 << LCD_CONTROL_PO_BIT)\n  #define LCD_CONTROL_MPI          (1<<7)\n  #define LCD_CONTROL_PT           (1<<6)\n  #define LCD_CONTROL_PC           (1<<5)\n  #define LCD_CONTROL_BPP_BIT      1\n  #define LCD_CONTROL_BPP_MASK     (0x7 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_1        (0 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_2        (1 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_4        (2 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_8        (3 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_12       (4 << LCD_CONTROL_BPP_BIT)\n    #define LCD_CONTROL_BPP_16       (5 << LCD_CONTROL_BPP_BIT)\n  #define LCD_CONTROL_GO           (1<<0)\n\n#define LCD_INTSTATUS              (AU1100_LCD_BASE + 0x4)\n#define LCD_INTENABLE              (AU1100_LCD_BASE + 0x8)\n  #define LCD_INT_SD               (1<<7)\n  #define LCD_INT_OF               (1<<6)\n  #define LCD_INT_UF               (1<<5)\n  #define LCD_INT_SA               (1<<3)\n  #define LCD_INT_SS               (1<<2)\n  #define LCD_INT_S1               (1<<1)\n  #define LCD_INT_S0               (1<<0)\n\n#define LCD_HORZTIMING             (AU1100_LCD_BASE + 0xC)\n  #define LCD_HORZTIMING_HN2_BIT   24\n  #define LCD_HORZTIMING_HN2_MASK  (0xFF << LCD_HORZTIMING_HN2_BIT)\n  #define LCD_HORZTIMING_HN2_N(N)  ((((N)-1) << LCD_HORZTIMING_HN2_BIT) & LCD_HORZTIMING_HN2_MASK)\n  #define LCD_HORZTIMING_HN1_BIT   16\n  #define LCD_HORZTIMING_HN1_MASK  (0xFF << LCD_HORZTIMING_HN1_BIT)\n  #define LCD_HORZTIMING_HN1_N(N)  ((((N)-1) << LCD_HORZTIMING_HN1_BIT) & LCD_HORZTIMING_HN1_MASK)\n  #define LCD_HORZTIMING_HPW_BIT   10\n  #define LCD_HORZTIMING_HPW_MASK  (0x3F << LCD_HORZTIMING_HPW_BIT)\n  #define LCD_HORZTIMING_HPW_N(N)  ((((N)-1) << LCD_HORZTIMING_HPW_BIT) & LCD_HORZTIMING_HPW_MASK)\n  #define LCD_HORZTIMING_PPL_BIT   0\n  #define LCD_HORZTIMING_PPL_MASK  (0x3FF << LCD_HORZTIMING_PPL_BIT)\n  #define LCD_HORZTIMING_PPL_N(N)  ((((N)-1) << LCD_HORZTIMING_PPL_BIT) & LCD_HORZTIMING_PPL_MASK)\n\n#define LCD_VERTTIMING             (AU1100_LCD_BASE + 0x10)\n  #define LCD_VERTTIMING_VN2_BIT   24\n  #define LCD_VERTTIMING_VN2_MASK  (0xFF << LCD_VERTTIMING_VN2_BIT)\n  #define LCD_VERTTIMING_VN2_N(N)  ((((N)-1) << LCD_VERTTIMING_VN2_BIT) & LCD_VERTTIMING_VN2_MASK)\n  #define LCD_VERTTIMING_VN1_BIT   16\n  #define LCD_VERTTIMING_VN1_MASK  (0xFF << LCD_VERTTIMING_VN1_BIT)\n  #define LCD_VERTTIMING_VN1_N(N)  ((((N)-1) << LCD_VERTTIMING_VN1_BIT) & LCD_VERTTIMING_VN1_MASK)\n  #define LCD_VERTTIMING_VPW_BIT   10\n  #define LCD_VERTTIMING_VPW_MASK  (0x3F << LCD_VERTTIMING_VPW_BIT)\n  #define LCD_VERTTIMING_VPW_N(N)  ((((N)-1) << LCD_VERTTIMING_VPW_BIT) & LCD_VERTTIMING_VPW_MASK)\n  #define LCD_VERTTIMING_LPP_BIT   0\n  #define LCD_VERTTIMING_LPP_MASK  (0x3FF << LCD_VERTTIMING_LPP_BIT)\n  #define LCD_VERTTIMING_LPP_N(N)  ((((N)-1) << LCD_VERTTIMING_LPP_BIT) & LCD_VERTTIMING_LPP_MASK)\n\n#define LCD_CLKCONTROL             (AU1100_LCD_BASE + 0x14)\n  #define LCD_CLKCONTROL_IB        (1<<18)\n  #define LCD_CLKCONTROL_IC        (1<<17)\n  #define LCD_CLKCONTROL_IH        (1<<16)\n  #define LCD_CLKCONTROL_IV        (1<<15)\n  #define LCD_CLKCONTROL_BF_BIT    10\n  #define LCD_CLKCONTROL_BF_MASK   (0x1F << LCD_CLKCONTROL_BF_BIT)\n  #define LCD_CLKCONTROL_BF_N(N)   ((((N)-1) << LCD_CLKCONTROL_BF_BIT) & LCD_CLKCONTROL_BF_MASK)\n  #define LCD_CLKCONTROL_PCD_BIT   0\n  #define LCD_CLKCONTROL_PCD_MASK  (0x3FF << LCD_CLKCONTROL_PCD_BIT)\n  #define LCD_CLKCONTROL_PCD_N(N)  (((N) << LCD_CLKCONTROL_PCD_BIT) & LCD_CLKCONTROL_PCD_MASK)\n\n#define LCD_DMAADDR0               (AU1100_LCD_BASE + 0x18)\n#define LCD_DMAADDR1               (AU1100_LCD_BASE + 0x1C)\n  #define LCD_DMA_SA_BIT           5\n  #define LCD_DMA_SA_MASK          (0x7FFFFFF << LCD_DMA_SA_BIT)\n  #define LCD_DMA_SA_N(N)          ((N) & LCD_DMA_SA_MASK)\n\n#define LCD_WORDS                  (AU1100_LCD_BASE + 0x20)\n  #define LCD_WRD_WRDS_BIT         0\n  #define LCD_WRD_WRDS_MASK        (0xFFFFFFFF << LCD_WRD_WRDS_BIT)\n  #define LCD_WRD_WRDS_N(N)        ((((N)-1) << LCD_WRD_WRDS_BIT) & LCD_WRD_WRDS_MASK)\n\n#define LCD_PWMDIV                 (AU1100_LCD_BASE + 0x24)\n  #define LCD_PWMDIV_EN            (1<<12)\n  #define LCD_PWMDIV_PWMDIV_BIT    0\n  #define LCD_PWMDIV_PWMDIV_MASK   (0xFFF << LCD_PWMDIV_PWMDIV_BIT)\n  #define LCD_PWMDIV_PWMDIV_N(N)   ((((N)-1) << LCD_PWMDIV_PWMDIV_BIT) & LCD_PWMDIV_PWMDIV_MASK)\n\n#define LCD_PWMHI                  (AU1100_LCD_BASE + 0x28)\n  #define LCD_PWMHI_PWMHI1_BIT     12\n  #define LCD_PWMHI_PWMHI1_MASK    (0xFFF << LCD_PWMHI_PWMHI1_BIT)\n  #define LCD_PWMHI_PWMHI1_N(N)    (((N) << LCD_PWMHI_PWMHI1_BIT) & LCD_PWMHI_PWMHI1_MASK)\n  #define LCD_PWMHI_PWMHI0_BIT     0\n  #define LCD_PWMHI_PWMHI0_MASK    (0xFFF << LCD_PWMHI_PWMHI0_BIT)\n  #define LCD_PWMHI_PWMHI0_N(N)    (((N) << LCD_PWMHI_PWMHI0_BIT) & LCD_PWMHI_PWMHI0_MASK)\n\n#define LCD_PALLETTEBASE                (AU1100_LCD_BASE + 0x400)\n  #define LCD_PALLETTE_MONO_MI_BIT      0\n  #define LCD_PALLETTE_MONO_MI_MASK     (0xF << LCD_PALLETTE_MONO_MI_BIT)\n  #define LCD_PALLETTE_MONO_MI_N(N)     (((N)<< LCD_PALLETTE_MONO_MI_BIT) & LCD_PALLETTE_MONO_MI_MASK)\n\n  #define LCD_PALLETTE_COLOR_RI_BIT     8\n  #define LCD_PALLETTE_COLOR_RI_MASK    (0xF << LCD_PALLETTE_COLOR_RI_BIT)\n  #define LCD_PALLETTE_COLOR_RI_N(N)    (((N)<< LCD_PALLETTE_COLOR_RI_BIT) & LCD_PALLETTE_COLOR_RI_MASK)\n  #define LCD_PALLETTE_COLOR_GI_BIT     4\n  #define LCD_PALLETTE_COLOR_GI_MASK    (0xF << LCD_PALLETTE_COLOR_GI_BIT)\n  #define LCD_PALLETTE_COLOR_GI_N(N)    (((N)<< LCD_PALLETTE_COLOR_GI_BIT) & LCD_PALLETTE_COLOR_GI_MASK)\n  #define LCD_PALLETTE_COLOR_BI_BIT     0\n  #define LCD_PALLETTE_COLOR_BI_MASK    (0xF << LCD_PALLETTE_COLOR_BI_BIT)\n  #define LCD_PALLETTE_COLOR_BI_N(N)    (((N)<< LCD_PALLETTE_COLOR_BI_BIT) & LCD_PALLETTE_COLOR_BI_MASK)\n\n  #define LCD_PALLETTE_TFT_DC_BIT       0\n  #define LCD_PALLETTE_TFT_DC_MASK      (0xFFFF << LCD_PALLETTE_TFT_DC_BIT)\n  #define LCD_PALLETTE_TFT_DC_N(N)      (((N)<< LCD_PALLETTE_TFT_DC_BIT) & LCD_PALLETTE_TFT_DC_MASK)\n\n \n\n \nstatic struct au1100fb_panel known_lcd_panels[] =\n{\n\t \n\t[0] = {\n\t\t.name = \"CRT_800x600_16\",\n\t\t.xres = 800,\n\t\t.yres = 600,\n\t\t.bpp = 16,\n\t\t.control_base =\t0x0004886A |\n\t\t\tLCD_CONTROL_DEFAULT_PO | LCD_CONTROL_DEFAULT_SBPPF |\n\t\t\tLCD_CONTROL_BPP_16 | LCD_CONTROL_SBB_4,\n\t\t.clkcontrol_base = 0x00020000,\n\t\t.horztiming = 0x005aff1f,\n\t\t.verttiming = 0x16000e57,\n\t},\n\t \n\t[1] = {\n\t\t.name = \"WWPC LCD\",\n\t\t.xres = 240,\n\t\t.yres = 320,\n\t\t.bpp = 16,\n\t\t.control_base = 0x0006806A,\n\t\t.horztiming = 0x0A1010EF,\n\t\t.verttiming = 0x0301013F,\n\t\t.clkcontrol_base = 0x00018001,\n\t},\n\t \n\t[2] = {\n\t\t.name = \"Sharp_LQ038Q5DR01\",\n\t\t.xres = 320,\n\t\t.yres = 240,\n\t\t.bpp = 16,\n\t\t.control_base =\n\t\t( LCD_CONTROL_SBPPF_565\n\t\t| LCD_CONTROL_C\n\t\t| LCD_CONTROL_SM_0\n\t\t\t| LCD_CONTROL_DEFAULT_PO\n\t\t| LCD_CONTROL_PT\n\t\t| LCD_CONTROL_PC\n\t\t| LCD_CONTROL_BPP_16 ),\n\t\t.horztiming =\n\t\t( LCD_HORZTIMING_HN2_N(8)\n\t\t| LCD_HORZTIMING_HN1_N(60)\n\t\t| LCD_HORZTIMING_HPW_N(12)\n\t\t| LCD_HORZTIMING_PPL_N(320) ),\n\t\t.verttiming =\n\t\t( LCD_VERTTIMING_VN2_N(5)\n\t\t| LCD_VERTTIMING_VN1_N(17)\n\t\t| LCD_VERTTIMING_VPW_N(1)\n\t\t| LCD_VERTTIMING_LPP_N(240) ),\n\t\t.clkcontrol_base = LCD_CLKCONTROL_PCD_N(1),\n\t},\n\n\t \n\t[3] = {\n\t\t.name = \"Hitachi_SP14Qxxx\",\n\t\t.xres = 320,\n\t\t.yres = 240,\n\t\t.bpp = 4,\n\t\t.control_base =\n\t\t\t( LCD_CONTROL_C\n\t\t\t| LCD_CONTROL_BPP_4 ),\n\t\t.horztiming =\n\t\t\t( LCD_HORZTIMING_HN2_N(1)\n\t\t\t| LCD_HORZTIMING_HN1_N(1)\n\t\t\t| LCD_HORZTIMING_HPW_N(1)\n\t\t\t| LCD_HORZTIMING_PPL_N(320) ),\n\t\t.verttiming =\n\t\t\t( LCD_VERTTIMING_VN2_N(1)\n\t\t\t| LCD_VERTTIMING_VN1_N(1)\n\t\t\t| LCD_VERTTIMING_VPW_N(1)\n\t\t\t| LCD_VERTTIMING_LPP_N(240) ),\n\t\t.clkcontrol_base = LCD_CLKCONTROL_PCD_N(4),\n\t},\n\n\t \n\t[4] = {\n\t\t.name = \"TFT_640x480_16\",\n\t\t.xres = 640,\n\t\t.yres = 480,\n\t\t.bpp = 16,\n\t\t.control_base = 0x004806a | LCD_CONTROL_DEFAULT_PO,\n\t\t.horztiming = 0x3434d67f,\n\t\t.verttiming = 0x0e0e39df,\n\t\t.clkcontrol_base = LCD_CLKCONTROL_PCD_N(1),\n\t},\n\n\t  \n\t[5] = {\n\t\t.name = \"PrimeView_640x480_16\",\n\t\t.xres = 640,\n\t\t.yres = 480,\n\t\t.bpp = 16,\n\t\t.control_base = 0x0004886a | LCD_CONTROL_DEFAULT_PO,\n\t\t.horztiming = 0x0e4bfe7f,\n\t\t.verttiming = 0x210805df,\n\t\t.clkcontrol_base = 0x00038001,\n\t},\n};\n\n \n\n \n\n#define panel_is_dual(panel)  (panel->control_base & LCD_CONTROL_DP)\n#define panel_is_active(panel)(panel->control_base & LCD_CONTROL_PT)\n#define panel_is_color(panel) (panel->control_base & LCD_CONTROL_PC)\n#define panel_swap_rgb(panel) (panel->control_base & LCD_CONTROL_CCO)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}