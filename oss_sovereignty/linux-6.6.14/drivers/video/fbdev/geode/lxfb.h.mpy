{
  "module_name": "lxfb.h",
  "hash_id": "259bad6af45fe16d46589c1f9386d037cc3db3f5b063e32a86f856178f512c95",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/geode/lxfb.h",
  "human_readable_source": " \n \n#ifndef _LXFB_H_\n#define _LXFB_H_\n\n#include <linux/fb.h>\n\n#define GP_REG_COUNT\t(0x7c / 4)\n#define DC_REG_COUNT\t(0xf0 / 4)\n#define VP_REG_COUNT\t(0x158 / 8)\n#define FP_REG_COUNT\t(0x60 / 8)\n\n#define DC_PAL_COUNT\t0x104\n#define DC_HFILT_COUNT\t0x100\n#define DC_VFILT_COUNT\t0x100\n#define VP_COEFF_SIZE\t0x1000\n#define VP_PAL_COUNT\t0x100\n\n#define OUTPUT_CRT   0x01\n#define OUTPUT_PANEL 0x02\n\nstruct lxfb_par {\n\tint output;\n\n\tvoid __iomem *gp_regs;\n\tvoid __iomem *dc_regs;\n\tvoid __iomem *vp_regs;\n\tint powered_down;\n\n\t \n\tstruct {\n\t\tuint64_t padsel;\n\t\tuint64_t dotpll;\n\t\tuint64_t dfglcfg;\n\t\tuint64_t dcspare;\n\t} msr;\n\n\tuint32_t gp[GP_REG_COUNT];\n\tuint32_t dc[DC_REG_COUNT];\n\tuint64_t vp[VP_REG_COUNT];\n\tuint64_t fp[FP_REG_COUNT];\n\n\tuint32_t dc_pal[DC_PAL_COUNT];\n\tuint32_t vp_pal[VP_PAL_COUNT];\n\tuint32_t hcoeff[DC_HFILT_COUNT * 2];\n\tuint32_t vcoeff[DC_VFILT_COUNT];\n\tuint32_t vp_coeff[VP_COEFF_SIZE / 4];\n};\n\nstatic inline unsigned int lx_get_pitch(unsigned int xres, int bpp)\n{\n\treturn (((xres * (bpp >> 3)) + 7) & ~7);\n}\n\nvoid lx_set_mode(struct fb_info *);\nunsigned int lx_framebuffer_size(void);\nint lx_blank_display(struct fb_info *, int);\nvoid lx_set_palette_reg(struct fb_info *, unsigned int, unsigned int,\n\t\t\tunsigned int, unsigned int);\n\nint lx_powerdown(struct fb_info *info);\nint lx_powerup(struct fb_info *info);\n\n \nenum gp_registers {\n\tGP_DST_OFFSET = 0,\n\tGP_SRC_OFFSET,\n\tGP_STRIDE,\n\tGP_WID_HEIGHT,\n\n\tGP_SRC_COLOR_FG,\n\tGP_SRC_COLOR_BG,\n\tGP_PAT_COLOR_0,\n\tGP_PAT_COLOR_1,\n\n\tGP_PAT_COLOR_2,\n\tGP_PAT_COLOR_3,\n\tGP_PAT_COLOR_4,\n\tGP_PAT_COLOR_5,\n\n\tGP_PAT_DATA_0,\n\tGP_PAT_DATA_1,\n\tGP_RASTER_MODE,\n\tGP_VECTOR_MODE,\n\n\tGP_BLT_MODE,\n\tGP_BLT_STATUS,\n\tGP_HST_SRC,\n\tGP_BASE_OFFSET,\n\n\tGP_CMD_TOP,\n\tGP_CMD_BOT,\n\tGP_CMD_READ,\n\tGP_CMD_WRITE,\n\n\tGP_CH3_OFFSET,\n\tGP_CH3_MODE_STR,\n\tGP_CH3_WIDHI,\n\tGP_CH3_HSRC,\n\n\tGP_LUT_INDEX,\n\tGP_LUT_DATA,\n\tGP_INT_CNTRL,  \n};\n\n#define GP_BLT_STATUS_CE\t\t(1 << 4)\t \n#define GP_BLT_STATUS_PB\t\t(1 << 0)\t \n\n\n \nenum dc_registers {\n\tDC_UNLOCK = 0,\n\tDC_GENERAL_CFG,\n\tDC_DISPLAY_CFG,\n\tDC_ARB_CFG,\n\n\tDC_FB_ST_OFFSET,\n\tDC_CB_ST_OFFSET,\n\tDC_CURS_ST_OFFSET,\n\tDC_RSVD_0,\n\n\tDC_VID_Y_ST_OFFSET,\n\tDC_VID_U_ST_OFFSET,\n\tDC_VID_V_ST_OFFSET,\n\tDC_DV_TOP,\n\n\tDC_LINE_SIZE,\n\tDC_GFX_PITCH,\n\tDC_VID_YUV_PITCH,\n\tDC_RSVD_1,\n\n\tDC_H_ACTIVE_TIMING,\n\tDC_H_BLANK_TIMING,\n\tDC_H_SYNC_TIMING,\n\tDC_RSVD_2,\n\n\tDC_V_ACTIVE_TIMING,\n\tDC_V_BLANK_TIMING,\n\tDC_V_SYNC_TIMING,\n\tDC_FB_ACTIVE,\n\n\tDC_CURSOR_X,\n\tDC_CURSOR_Y,\n\tDC_RSVD_3,\n\tDC_LINE_CNT,\n\n\tDC_PAL_ADDRESS,\n\tDC_PAL_DATA,\n\tDC_DFIFO_DIAG,\n\tDC_CFIFO_DIAG,\n\n\tDC_VID_DS_DELTA,\n\tDC_GLIU0_MEM_OFFSET,\n\tDC_DV_CTL,\n\tDC_DV_ACCESS,\n\n\tDC_GFX_SCALE,\n\tDC_IRQ_FILT_CTL,\n\tDC_FILT_COEFF1,\n\tDC_FILT_COEFF2,\n\n\tDC_VBI_EVEN_CTL,\n\tDC_VBI_ODD_CTL,\n\tDC_VBI_HOR,\n\tDC_VBI_LN_ODD,\n\n\tDC_VBI_LN_EVEN,\n\tDC_VBI_PITCH,\n\tDC_CLR_KEY,\n\tDC_CLR_KEY_MASK,\n\n\tDC_CLR_KEY_X,\n\tDC_CLR_KEY_Y,\n\tDC_IRQ,\n\tDC_RSVD_4,\n\n\tDC_RSVD_5,\n\tDC_GENLK_CTL,\n\tDC_VID_EVEN_Y_ST_OFFSET,\n\tDC_VID_EVEN_U_ST_OFFSET,\n\n\tDC_VID_EVEN_V_ST_OFFSET,\n\tDC_V_ACTIVE_EVEN_TIMING,\n\tDC_V_BLANK_EVEN_TIMING,\n\tDC_V_SYNC_EVEN_TIMING,\t \n};\n\n#define DC_UNLOCK_LOCK\t\t\t0x00000000\n#define DC_UNLOCK_UNLOCK\t\t0x00004758\t \n\n#define DC_GENERAL_CFG_FDTY\t\t(1 << 17)\n#define DC_GENERAL_CFG_DFHPEL_SHIFT\t(12)\n#define DC_GENERAL_CFG_DFHPSL_SHIFT\t(8)\n#define DC_GENERAL_CFG_VGAE\t\t(1 << 7)\n#define DC_GENERAL_CFG_DECE\t\t(1 << 6)\n#define DC_GENERAL_CFG_CMPE\t\t(1 << 5)\n#define DC_GENERAL_CFG_VIDE\t\t(1 << 3)\n#define DC_GENERAL_CFG_DFLE\t\t(1 << 0)\n\n#define DC_DISPLAY_CFG_VISL\t\t(1 << 27)\n#define DC_DISPLAY_CFG_PALB\t\t(1 << 25)\n#define DC_DISPLAY_CFG_DCEN\t\t(1 << 24)\n#define DC_DISPLAY_CFG_DISP_MODE_24BPP\t(1 << 9)\n#define DC_DISPLAY_CFG_DISP_MODE_16BPP\t(1 << 8)\n#define DC_DISPLAY_CFG_DISP_MODE_8BPP\t(0)\n#define DC_DISPLAY_CFG_TRUP\t\t(1 << 6)\n#define DC_DISPLAY_CFG_VDEN\t\t(1 << 4)\n#define DC_DISPLAY_CFG_GDEN\t\t(1 << 3)\n#define DC_DISPLAY_CFG_TGEN\t\t(1 << 0)\n\n#define DC_DV_TOP_DV_TOP_EN\t\t(1 << 0)\n\n#define DC_DV_CTL_DV_LINE_SIZE\t\t((1 << 10) | (1 << 11))\n#define DC_DV_CTL_DV_LINE_SIZE_1K\t(0)\n#define DC_DV_CTL_DV_LINE_SIZE_2K\t(1 << 10)\n#define DC_DV_CTL_DV_LINE_SIZE_4K\t(1 << 11)\n#define DC_DV_CTL_DV_LINE_SIZE_8K\t((1 << 10) | (1 << 11))\n#define DC_DV_CTL_CLEAR_DV_RAM\t\t(1 << 0)\n\n#define DC_IRQ_FILT_CTL_H_FILT_SEL\t(1 << 10)\n\n#define DC_CLR_KEY_CLR_KEY_EN\t\t(1 << 24)\n\n#define DC_IRQ_VIP_VSYNC_IRQ_STATUS\t(1 << 21)\t \n#define DC_IRQ_STATUS\t\t\t(1 << 20)\t \n#define DC_IRQ_VIP_VSYNC_LOSS_IRQ_MASK\t(1 << 1)\n#define DC_IRQ_MASK\t\t\t(1 << 0)\n\n#define DC_GENLK_CTL_FLICK_SEL_MASK\t(0x0F << 28)\n#define DC_GENLK_CTL_ALPHA_FLICK_EN\t(1 << 25)\n#define DC_GENLK_CTL_FLICK_EN\t\t(1 << 24)\n#define DC_GENLK_CTL_GENLK_EN\t\t(1 << 18)\n\n\n \nenum vp_registers {\n\tVP_VCFG = 0,\n\tVP_DCFG,\n\n\tVP_VX,\n\tVP_VY,\n\n\tVP_SCL,\n\tVP_VCK,\n\n\tVP_VCM,\n\tVP_PAR,\n\n\tVP_PDR,\n\tVP_SLR,\n\n\tVP_MISC,\n\tVP_CCS,\n\n\tVP_VYS,\n\tVP_VXS,\n\n\tVP_RSVD_0,\n\tVP_VDC,\n\n\tVP_RSVD_1,\n\tVP_CRC,\n\n\tVP_CRC32,\n\tVP_VDE,\n\n\tVP_CCK,\n\tVP_CCM,\n\n\tVP_CC1,\n\tVP_CC2,\n\n\tVP_A1X,\n\tVP_A1Y,\n\n\tVP_A1C,\n\tVP_A1T,\n\n\tVP_A2X,\n\tVP_A2Y,\n\n\tVP_A2C,\n\tVP_A2T,\n\n\tVP_A3X,\n\tVP_A3Y,\n\n\tVP_A3C,\n\tVP_A3T,\n\n\tVP_VRR,\n\tVP_AWT,\n\n\tVP_VTM,\n\tVP_VYE,\n\n\tVP_A1YE,\n\tVP_A2YE,\n\n\tVP_A3YE,\t \n\n\tVP_VCR = 0x1000,  \n};\n\n#define VP_VCFG_VID_EN\t\t\t(1 << 0)\n\n#define VP_DCFG_GV_GAM\t\t\t(1 << 21)\n#define VP_DCFG_PWR_SEQ_DELAY\t\t((1 << 17) | (1 << 18) | (1 << 19))\n#define VP_DCFG_PWR_SEQ_DELAY_DEFAULT\t(1 << 19)\t \n#define VP_DCFG_CRT_SYNC_SKW\t\t((1 << 14) | (1 << 15) | (1 << 16))\n#define VP_DCFG_CRT_SYNC_SKW_DEFAULT\t(1 << 16)\n#define VP_DCFG_CRT_VSYNC_POL\t\t(1 << 9)\n#define VP_DCFG_CRT_HSYNC_POL\t\t(1 << 8)\n#define VP_DCFG_DAC_BL_EN\t\t(1 << 3)\n#define VP_DCFG_VSYNC_EN\t\t(1 << 2)\n#define VP_DCFG_HSYNC_EN\t\t(1 << 1)\n#define VP_DCFG_CRT_EN\t\t\t(1 << 0)\n\n#define VP_MISC_APWRDN\t\t\t(1 << 11)\n#define VP_MISC_DACPWRDN\t\t(1 << 10)\n#define VP_MISC_BYP_BOTH\t\t(1 << 0)\n\n\n \n\n \n#define VP_FP_START\t0x400\n\nenum fp_registers {\n\tFP_PT1 = 0,\n\tFP_PT2,\n\n\tFP_PM,\n\tFP_DFC,\n\n\tFP_RSVD_0,\n\tFP_RSVD_1,\n\n\tFP_RSVD_2,\n\tFP_RSVD_3,\n\n\tFP_RSVD_4,\n\tFP_DCA,\n\n\tFP_DMD,\n\tFP_CRC,  \n};\n\n#define FP_PT2_HSP\t\t\t(1 << 22)\n#define FP_PT2_VSP\t\t\t(1 << 23)\n#define FP_PT2_SCRC\t\t\t(1 << 27)\t \n\n#define FP_PM_P\t\t\t\t(1 << 24)\t \n#define FP_PM_PANEL_PWR_UP\t\t(1 << 3)\t \n#define FP_PM_PANEL_PWR_DOWN\t\t(1 << 2)\t \n#define FP_PM_PANEL_OFF\t\t\t(1 << 1)\t \n#define FP_PM_PANEL_ON\t\t\t(1 << 0)\t \n\n#define FP_DFC_BC\t\t\t((1 << 4) | (1 << 5) | (1 << 6))\n\n\n \n\nstatic inline uint32_t read_gp(struct lxfb_par *par, int reg)\n{\n\treturn readl(par->gp_regs + 4*reg);\n}\n\nstatic inline void write_gp(struct lxfb_par *par, int reg, uint32_t val)\n{\n\twritel(val, par->gp_regs + 4*reg);\n}\n\nstatic inline uint32_t read_dc(struct lxfb_par *par, int reg)\n{\n\treturn readl(par->dc_regs + 4*reg);\n}\n\nstatic inline void write_dc(struct lxfb_par *par, int reg, uint32_t val)\n{\n\twritel(val, par->dc_regs + 4*reg);\n}\n\nstatic inline uint32_t read_vp(struct lxfb_par *par, int reg)\n{\n\treturn readl(par->vp_regs + 8*reg);\n}\n\nstatic inline void write_vp(struct lxfb_par *par, int reg, uint32_t val)\n{\n\twritel(val, par->vp_regs + 8*reg);\n}\n\nstatic inline uint32_t read_fp(struct lxfb_par *par, int reg)\n{\n\treturn readl(par->vp_regs + 8*reg + VP_FP_START);\n}\n\nstatic inline void write_fp(struct lxfb_par *par, int reg, uint32_t val)\n{\n\twritel(val, par->vp_regs + 8*reg + VP_FP_START);\n}\n\n\n \n\n#define MSR_GLCP_DOTPLL_LOCK\t\t(1 << 25)\t \n#define MSR_GLCP_DOTPLL_HALFPIX\t\t(1 << 24)\n#define MSR_GLCP_DOTPLL_BYPASS\t\t(1 << 15)\n#define MSR_GLCP_DOTPLL_DOTRESET\t(1 << 0)\n\n \n#define MSR_LX_GLD_MSR_CONFIG_FMT\t((1 << 3) | (1 << 4) | (1 << 5))\n#define MSR_LX_GLD_MSR_CONFIG_FMT_FP\t(1 << 3)\n#define MSR_LX_GLD_MSR_CONFIG_FMT_CRT\t(0)\n#define MSR_LX_GLD_MSR_CONFIG_FPC\t(1 << 15)\t \n\n#define MSR_LX_MSR_PADSEL_TFT_SEL_LOW\t0xDFFFFFFF\t \n#define MSR_LX_MSR_PADSEL_TFT_SEL_HIGH\t0x0000003F\t \n\n#define MSR_LX_SPARE_MSR_DIS_CFIFO_HGO\t(1 << 11)\t \n#define MSR_LX_SPARE_MSR_VFIFO_ARB_SEL\t(1 << 10)\t \n#define MSR_LX_SPARE_MSR_WM_LPEN_OVRD\t(1 << 9)\t \n#define MSR_LX_SPARE_MSR_LOAD_WM_LPEN_M\t(1 << 8)\t \n#define MSR_LX_SPARE_MSR_DIS_INIT_V_PRI\t(1 << 7)\t \n#define MSR_LX_SPARE_MSR_DIS_VIFO_WM\t(1 << 6)\n#define MSR_LX_SPARE_MSR_DIS_CWD_CHECK\t(1 << 5)\t \n#define MSR_LX_SPARE_MSR_PIX8_PAN_FIX\t(1 << 4)\t \n#define MSR_LX_SPARE_MSR_FIRST_REQ_MASK\t(1 << 1)\t \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}