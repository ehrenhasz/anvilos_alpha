{
  "module_name": "dss_features.c",
  "hash_id": "443ee904f4952a0200598820469ca88f49c111d65f00716afa528f9de2bf4888",
  "original_prompt": "Ingested from linux-6.6.14/drivers/video/fbdev/omap2/omapfb/dss/dss_features.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/types.h>\n#include <linux/err.h>\n#include <linux/slab.h>\n\n#include <video/omapfb_dss.h>\n\n#include \"dss.h\"\n#include \"dss_features.h\"\n\n \nstruct dss_reg_field {\n\tu8 start, end;\n};\n\nstruct dss_param_range {\n\tint min, max;\n};\n\nstruct omap_dss_features {\n\tconst struct dss_reg_field *reg_fields;\n\tconst int num_reg_fields;\n\n\tconst enum dss_feat_id *features;\n\tconst int num_features;\n\n\tconst int num_mgrs;\n\tconst int num_ovls;\n\tconst enum omap_display_type *supported_displays;\n\tconst enum omap_dss_output_id *supported_outputs;\n\tconst enum omap_color_mode *supported_color_modes;\n\tconst enum omap_overlay_caps *overlay_caps;\n\tconst char * const *clksrc_names;\n\tconst struct dss_param_range *dss_params;\n\n\tconst enum omap_dss_rotation_type supported_rotation_types;\n\n\tconst u32 buffer_size_unit;\n\tconst u32 burst_size_unit;\n};\n\n \nstatic const struct omap_dss_features *omap_current_dss_features;\n\nstatic const struct dss_reg_field omap2_dss_reg_fields[] = {\n\t[FEAT_REG_FIRHINC]\t\t\t= { 11, 0 },\n\t[FEAT_REG_FIRVINC]\t\t\t= { 27, 16 },\n\t[FEAT_REG_FIFOLOWTHRESHOLD]\t\t= { 8, 0 },\n\t[FEAT_REG_FIFOHIGHTHRESHOLD]\t\t= { 24, 16 },\n\t[FEAT_REG_FIFOSIZE]\t\t\t= { 8, 0 },\n\t[FEAT_REG_HORIZONTALACCU]\t\t= { 9, 0 },\n\t[FEAT_REG_VERTICALACCU]\t\t\t= { 25, 16 },\n\t[FEAT_REG_DISPC_CLK_SWITCH]\t\t= { 0, 0 },\n};\n\nstatic const struct dss_reg_field omap3_dss_reg_fields[] = {\n\t[FEAT_REG_FIRHINC]\t\t\t= { 12, 0 },\n\t[FEAT_REG_FIRVINC]\t\t\t= { 28, 16 },\n\t[FEAT_REG_FIFOLOWTHRESHOLD]\t\t= { 11, 0 },\n\t[FEAT_REG_FIFOHIGHTHRESHOLD]\t\t= { 27, 16 },\n\t[FEAT_REG_FIFOSIZE]\t\t\t= { 10, 0 },\n\t[FEAT_REG_HORIZONTALACCU]\t\t= { 9, 0 },\n\t[FEAT_REG_VERTICALACCU]\t\t\t= { 25, 16 },\n\t[FEAT_REG_DISPC_CLK_SWITCH]\t\t= { 0, 0 },\n};\n\nstatic const struct dss_reg_field am43xx_dss_reg_fields[] = {\n\t[FEAT_REG_FIRHINC]\t\t\t= { 12, 0 },\n\t[FEAT_REG_FIRVINC]\t\t\t= { 28, 16 },\n\t[FEAT_REG_FIFOLOWTHRESHOLD]\t= { 11, 0 },\n\t[FEAT_REG_FIFOHIGHTHRESHOLD]\t\t= { 27, 16 },\n\t[FEAT_REG_FIFOSIZE]\t\t= { 10, 0 },\n\t[FEAT_REG_HORIZONTALACCU]\t\t= { 9, 0 },\n\t[FEAT_REG_VERTICALACCU]\t\t\t= { 25, 16 },\n\t[FEAT_REG_DISPC_CLK_SWITCH]\t\t= { 0, 0 },\n};\n\nstatic const struct dss_reg_field omap4_dss_reg_fields[] = {\n\t[FEAT_REG_FIRHINC]\t\t\t= { 12, 0 },\n\t[FEAT_REG_FIRVINC]\t\t\t= { 28, 16 },\n\t[FEAT_REG_FIFOLOWTHRESHOLD]\t\t= { 15, 0 },\n\t[FEAT_REG_FIFOHIGHTHRESHOLD]\t\t= { 31, 16 },\n\t[FEAT_REG_FIFOSIZE]\t\t\t= { 15, 0 },\n\t[FEAT_REG_HORIZONTALACCU]\t\t= { 10, 0 },\n\t[FEAT_REG_VERTICALACCU]\t\t\t= { 26, 16 },\n\t[FEAT_REG_DISPC_CLK_SWITCH]\t\t= { 9, 8 },\n};\n\nstatic const struct dss_reg_field omap5_dss_reg_fields[] = {\n\t[FEAT_REG_FIRHINC]\t\t\t= { 12, 0 },\n\t[FEAT_REG_FIRVINC]\t\t\t= { 28, 16 },\n\t[FEAT_REG_FIFOLOWTHRESHOLD]\t\t= { 15, 0 },\n\t[FEAT_REG_FIFOHIGHTHRESHOLD]\t\t= { 31, 16 },\n\t[FEAT_REG_FIFOSIZE]\t\t\t= { 15, 0 },\n\t[FEAT_REG_HORIZONTALACCU]\t\t= { 10, 0 },\n\t[FEAT_REG_VERTICALACCU]\t\t\t= { 26, 16 },\n\t[FEAT_REG_DISPC_CLK_SWITCH]\t\t= { 9, 7 },\n};\n\nstatic const enum omap_display_type omap2_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI,\n\n\t \n\tOMAP_DISPLAY_TYPE_VENC,\n};\n\nstatic const enum omap_display_type omap3430_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI |\n\tOMAP_DISPLAY_TYPE_SDI | OMAP_DISPLAY_TYPE_DSI,\n\n\t \n\tOMAP_DISPLAY_TYPE_VENC,\n};\n\nstatic const enum omap_display_type omap3630_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI |\n\tOMAP_DISPLAY_TYPE_DSI,\n\n\t \n\tOMAP_DISPLAY_TYPE_VENC,\n};\n\nstatic const enum omap_display_type am43xx_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI,\n};\n\nstatic const enum omap_display_type omap4_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DBI | OMAP_DISPLAY_TYPE_DSI,\n\n\t \n\tOMAP_DISPLAY_TYPE_VENC | OMAP_DISPLAY_TYPE_HDMI,\n\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI |\n\tOMAP_DISPLAY_TYPE_DSI,\n};\n\nstatic const enum omap_display_type omap5_dss_supported_displays[] = {\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI |\n\tOMAP_DISPLAY_TYPE_DSI,\n\n\t \n\tOMAP_DISPLAY_TYPE_HDMI | OMAP_DISPLAY_TYPE_DPI,\n\n\t \n\tOMAP_DISPLAY_TYPE_DPI | OMAP_DISPLAY_TYPE_DBI |\n\tOMAP_DISPLAY_TYPE_DSI,\n};\n\nstatic const enum omap_dss_output_id omap2_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI,\n\n\t \n\tOMAP_DSS_OUTPUT_VENC,\n};\n\nstatic const enum omap_dss_output_id omap3430_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_SDI | OMAP_DSS_OUTPUT_DSI1,\n\n\t \n\tOMAP_DSS_OUTPUT_VENC,\n};\n\nstatic const enum omap_dss_output_id omap3630_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_DSI1,\n\n\t \n\tOMAP_DSS_OUTPUT_VENC,\n};\n\nstatic const enum omap_dss_output_id am43xx_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI,\n};\n\nstatic const enum omap_dss_output_id omap4_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DBI | OMAP_DSS_OUTPUT_DSI1,\n\n\t \n\tOMAP_DSS_OUTPUT_VENC | OMAP_DSS_OUTPUT_HDMI,\n\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_DSI2,\n};\n\nstatic const enum omap_dss_output_id omap5_dss_supported_outputs[] = {\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_DSI1 | OMAP_DSS_OUTPUT_DSI2,\n\n\t \n\tOMAP_DSS_OUTPUT_HDMI,\n\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_DSI1,\n\n\t \n\tOMAP_DSS_OUTPUT_DPI | OMAP_DSS_OUTPUT_DBI |\n\tOMAP_DSS_OUTPUT_DSI2,\n};\n\nstatic const enum omap_color_mode omap2_dss_supported_color_modes[] = {\n\t \n\tOMAP_DSS_COLOR_CLUT1 | OMAP_DSS_COLOR_CLUT2 |\n\tOMAP_DSS_COLOR_CLUT4 | OMAP_DSS_COLOR_CLUT8 |\n\tOMAP_DSS_COLOR_RGB12U | OMAP_DSS_COLOR_RGB16 |\n\tOMAP_DSS_COLOR_RGB24U | OMAP_DSS_COLOR_RGB24P,\n\n\t \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_YUV2 |\n\tOMAP_DSS_COLOR_UYVY,\n\n\t \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_YUV2 |\n\tOMAP_DSS_COLOR_UYVY,\n};\n\nstatic const enum omap_color_mode omap3_dss_supported_color_modes[] = {\n\t \n\tOMAP_DSS_COLOR_CLUT1 | OMAP_DSS_COLOR_CLUT2 |\n\tOMAP_DSS_COLOR_CLUT4 | OMAP_DSS_COLOR_CLUT8 |\n\tOMAP_DSS_COLOR_RGB12U | OMAP_DSS_COLOR_ARGB16 |\n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_ARGB32 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_RGBX32,\n\n\t \n\tOMAP_DSS_COLOR_RGB24U | OMAP_DSS_COLOR_RGB24P |\n\tOMAP_DSS_COLOR_RGB12U | OMAP_DSS_COLOR_RGB16 |\n\tOMAP_DSS_COLOR_YUV2 | OMAP_DSS_COLOR_UYVY,\n\n\t \n\tOMAP_DSS_COLOR_RGB12U | OMAP_DSS_COLOR_ARGB16 |\n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_YUV2 |\n\tOMAP_DSS_COLOR_UYVY | OMAP_DSS_COLOR_ARGB32 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_RGBX32,\n};\n\nstatic const enum omap_color_mode omap4_dss_supported_color_modes[] = {\n\t \n\tOMAP_DSS_COLOR_CLUT1 | OMAP_DSS_COLOR_CLUT2 |\n\tOMAP_DSS_COLOR_CLUT4 | OMAP_DSS_COLOR_CLUT8 |\n\tOMAP_DSS_COLOR_RGB12U | OMAP_DSS_COLOR_ARGB16 |\n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_ARGB32 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_RGBX32 |\n\tOMAP_DSS_COLOR_ARGB16_1555 | OMAP_DSS_COLOR_RGBX16 |\n\tOMAP_DSS_COLOR_RGBA16 | OMAP_DSS_COLOR_XRGB16_1555,\n\n\t \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB12U |\n\tOMAP_DSS_COLOR_YUV2 | OMAP_DSS_COLOR_ARGB16_1555 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_NV12 |\n\tOMAP_DSS_COLOR_RGBA16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_UYVY |\n\tOMAP_DSS_COLOR_ARGB16 | OMAP_DSS_COLOR_XRGB16_1555 |\n\tOMAP_DSS_COLOR_ARGB32 | OMAP_DSS_COLOR_RGBX16 |\n\tOMAP_DSS_COLOR_RGBX32,\n\n        \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB12U |\n\tOMAP_DSS_COLOR_YUV2 | OMAP_DSS_COLOR_ARGB16_1555 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_NV12 |\n\tOMAP_DSS_COLOR_RGBA16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_UYVY |\n\tOMAP_DSS_COLOR_ARGB16 | OMAP_DSS_COLOR_XRGB16_1555 |\n\tOMAP_DSS_COLOR_ARGB32 | OMAP_DSS_COLOR_RGBX16 |\n\tOMAP_DSS_COLOR_RGBX32,\n\n\t \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB12U |\n\tOMAP_DSS_COLOR_YUV2 | OMAP_DSS_COLOR_ARGB16_1555 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_NV12 |\n\tOMAP_DSS_COLOR_RGBA16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_UYVY |\n\tOMAP_DSS_COLOR_ARGB16 | OMAP_DSS_COLOR_XRGB16_1555 |\n\tOMAP_DSS_COLOR_ARGB32 | OMAP_DSS_COLOR_RGBX16 |\n\tOMAP_DSS_COLOR_RGBX32,\n\n\t \n\tOMAP_DSS_COLOR_RGB16 | OMAP_DSS_COLOR_RGB12U |\n\tOMAP_DSS_COLOR_YUV2 | OMAP_DSS_COLOR_ARGB16_1555 |\n\tOMAP_DSS_COLOR_RGBA32 | OMAP_DSS_COLOR_NV12 |\n\tOMAP_DSS_COLOR_RGBA16 | OMAP_DSS_COLOR_RGB24U |\n\tOMAP_DSS_COLOR_RGB24P | OMAP_DSS_COLOR_UYVY |\n\tOMAP_DSS_COLOR_ARGB16 | OMAP_DSS_COLOR_XRGB16_1555 |\n\tOMAP_DSS_COLOR_ARGB32 | OMAP_DSS_COLOR_RGBX16 |\n\tOMAP_DSS_COLOR_RGBX32,\n};\n\nstatic const enum omap_overlay_caps omap2_dss_overlay_caps[] = {\n\t \n\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n};\n\nstatic const enum omap_overlay_caps omap3430_dss_overlay_caps[] = {\n\t \n\tOMAP_DSS_OVL_CAP_GLOBAL_ALPHA | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_GLOBAL_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n};\n\nstatic const enum omap_overlay_caps omap3630_dss_overlay_caps[] = {\n\t \n\tOMAP_DSS_OVL_CAP_GLOBAL_ALPHA | OMAP_DSS_OVL_CAP_PRE_MULT_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_GLOBAL_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_PRE_MULT_ALPHA | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n};\n\nstatic const enum omap_overlay_caps omap4_dss_overlay_caps[] = {\n\t \n\tOMAP_DSS_OVL_CAP_GLOBAL_ALPHA | OMAP_DSS_OVL_CAP_PRE_MULT_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_ZORDER | OMAP_DSS_OVL_CAP_POS |\n\t\tOMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_GLOBAL_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_PRE_MULT_ALPHA | OMAP_DSS_OVL_CAP_ZORDER |\n\t\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_GLOBAL_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_PRE_MULT_ALPHA | OMAP_DSS_OVL_CAP_ZORDER |\n\t\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n\n\t \n\tOMAP_DSS_OVL_CAP_SCALE | OMAP_DSS_OVL_CAP_GLOBAL_ALPHA |\n\t\tOMAP_DSS_OVL_CAP_PRE_MULT_ALPHA | OMAP_DSS_OVL_CAP_ZORDER |\n\t\tOMAP_DSS_OVL_CAP_POS | OMAP_DSS_OVL_CAP_REPLICATION,\n};\n\nstatic const char * const omap2_dss_clk_source_names[] = {\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DISPC]\t= \"N/A\",\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DSI]\t= \"N/A\",\n\t[OMAP_DSS_CLK_SRC_FCK]\t\t\t= \"DSS_FCLK1\",\n};\n\nstatic const char * const omap3_dss_clk_source_names[] = {\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DISPC]\t= \"DSI1_PLL_FCLK\",\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DSI]\t= \"DSI2_PLL_FCLK\",\n\t[OMAP_DSS_CLK_SRC_FCK]\t\t\t= \"DSS1_ALWON_FCLK\",\n};\n\nstatic const char * const omap4_dss_clk_source_names[] = {\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DISPC]\t= \"PLL1_CLK1\",\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DSI]\t= \"PLL1_CLK2\",\n\t[OMAP_DSS_CLK_SRC_FCK]\t\t\t= \"DSS_FCLK\",\n\t[OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DISPC]\t= \"PLL2_CLK1\",\n\t[OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DSI]\t= \"PLL2_CLK2\",\n};\n\nstatic const char * const omap5_dss_clk_source_names[] = {\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DISPC]\t= \"DPLL_DSI1_A_CLK1\",\n\t[OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DSI]\t= \"DPLL_DSI1_A_CLK2\",\n\t[OMAP_DSS_CLK_SRC_FCK]\t\t\t= \"DSS_CLK\",\n\t[OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DISPC]\t= \"DPLL_DSI1_C_CLK1\",\n\t[OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DSI]\t= \"DPLL_DSI1_C_CLK2\",\n};\n\nstatic const struct dss_param_range omap2_dss_param_range[] = {\n\t[FEAT_PARAM_DSS_FCK]\t\t\t= { 0, 133000000 },\n\t[FEAT_PARAM_DSS_PCD]\t\t\t= { 2, 255 },\n\t[FEAT_PARAM_DOWNSCALE]\t\t\t= { 1, 2 },\n\t \n\t[FEAT_PARAM_LINEWIDTH]\t\t\t= { 1, 768 },\n};\n\nstatic const struct dss_param_range omap3_dss_param_range[] = {\n\t[FEAT_PARAM_DSS_FCK]\t\t\t= { 0, 173000000 },\n\t[FEAT_PARAM_DSS_PCD]\t\t\t= { 1, 255 },\n\t[FEAT_PARAM_DSIPLL_LPDIV]\t\t= { 1, (1 << 13) - 1},\n\t[FEAT_PARAM_DSI_FCK]\t\t\t= { 0, 173000000 },\n\t[FEAT_PARAM_DOWNSCALE]\t\t\t= { 1, 4 },\n\t[FEAT_PARAM_LINEWIDTH]\t\t\t= { 1, 1024 },\n};\n\nstatic const struct dss_param_range am43xx_dss_param_range[] = {\n\t[FEAT_PARAM_DSS_FCK]\t\t\t= { 0, 200000000 },\n\t[FEAT_PARAM_DSS_PCD]\t\t\t= { 1, 255 },\n\t[FEAT_PARAM_DOWNSCALE]\t\t\t= { 1, 4 },\n\t[FEAT_PARAM_LINEWIDTH]\t\t\t= { 1, 1024 },\n};\n\nstatic const struct dss_param_range omap4_dss_param_range[] = {\n\t[FEAT_PARAM_DSS_FCK]\t\t\t= { 0, 186000000 },\n\t[FEAT_PARAM_DSS_PCD]\t\t\t= { 1, 255 },\n\t[FEAT_PARAM_DSIPLL_LPDIV]\t\t= { 0, (1 << 13) - 1 },\n\t[FEAT_PARAM_DSI_FCK]\t\t\t= { 0, 170000000 },\n\t[FEAT_PARAM_DOWNSCALE]\t\t\t= { 1, 4 },\n\t[FEAT_PARAM_LINEWIDTH]\t\t\t= { 1, 2048 },\n};\n\nstatic const struct dss_param_range omap5_dss_param_range[] = {\n\t[FEAT_PARAM_DSS_FCK]\t\t\t= { 0, 209250000 },\n\t[FEAT_PARAM_DSS_PCD]\t\t\t= { 1, 255 },\n\t[FEAT_PARAM_DSIPLL_LPDIV]\t\t= { 0, (1 << 13) - 1 },\n\t[FEAT_PARAM_DSI_FCK]\t\t\t= { 0, 209250000 },\n\t[FEAT_PARAM_DOWNSCALE]\t\t\t= { 1, 4 },\n\t[FEAT_PARAM_LINEWIDTH]\t\t\t= { 1, 2048 },\n};\n\nstatic const enum dss_feat_id omap2_dss_feat_list[] = {\n\tFEAT_LCDENABLEPOL,\n\tFEAT_LCDENABLESIGNAL,\n\tFEAT_PCKFREEENABLE,\n\tFEAT_FUNCGATED,\n\tFEAT_ROWREPEATENABLE,\n\tFEAT_RESIZECONF,\n};\n\nstatic const enum dss_feat_id omap3430_dss_feat_list[] = {\n\tFEAT_LCDENABLEPOL,\n\tFEAT_LCDENABLESIGNAL,\n\tFEAT_PCKFREEENABLE,\n\tFEAT_FUNCGATED,\n\tFEAT_LINEBUFFERSPLIT,\n\tFEAT_ROWREPEATENABLE,\n\tFEAT_RESIZECONF,\n\tFEAT_DSI_REVERSE_TXCLKESC,\n\tFEAT_VENC_REQUIRES_TV_DAC_CLK,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FIXED_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_OMAP3_DSI_FIFO_BUG,\n\tFEAT_DPI_USES_VDDS_DSI,\n};\n\nstatic const enum dss_feat_id am35xx_dss_feat_list[] = {\n\tFEAT_LCDENABLEPOL,\n\tFEAT_LCDENABLESIGNAL,\n\tFEAT_PCKFREEENABLE,\n\tFEAT_FUNCGATED,\n\tFEAT_LINEBUFFERSPLIT,\n\tFEAT_ROWREPEATENABLE,\n\tFEAT_RESIZECONF,\n\tFEAT_DSI_REVERSE_TXCLKESC,\n\tFEAT_VENC_REQUIRES_TV_DAC_CLK,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FIXED_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_OMAP3_DSI_FIFO_BUG,\n};\n\nstatic const enum dss_feat_id am43xx_dss_feat_list[] = {\n\tFEAT_LCDENABLEPOL,\n\tFEAT_LCDENABLESIGNAL,\n\tFEAT_PCKFREEENABLE,\n\tFEAT_FUNCGATED,\n\tFEAT_LINEBUFFERSPLIT,\n\tFEAT_ROWREPEATENABLE,\n\tFEAT_RESIZECONF,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FIXED_ZORDER,\n\tFEAT_FIFO_MERGE,\n};\n\nstatic const enum dss_feat_id omap3630_dss_feat_list[] = {\n\tFEAT_LCDENABLEPOL,\n\tFEAT_LCDENABLESIGNAL,\n\tFEAT_PCKFREEENABLE,\n\tFEAT_FUNCGATED,\n\tFEAT_LINEBUFFERSPLIT,\n\tFEAT_ROWREPEATENABLE,\n\tFEAT_RESIZECONF,\n\tFEAT_DSI_PLL_PWR_BUG,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FIXED_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_OMAP3_DSI_FIFO_BUG,\n\tFEAT_DPI_USES_VDDS_DSI,\n};\n\nstatic const enum dss_feat_id omap4430_es1_0_dss_feat_list[] = {\n\tFEAT_MGR_LCD2,\n\tFEAT_CORE_CLK_DIV,\n\tFEAT_LCD_CLK_SRC,\n\tFEAT_DSI_DCS_CMD_CONFIG_VC,\n\tFEAT_DSI_VC_OCP_WIDTH,\n\tFEAT_DSI_GNQ,\n\tFEAT_HANDLE_UV_SEPARATE,\n\tFEAT_ATTR2,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FREE_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_BURST_2D,\n};\n\nstatic const enum dss_feat_id omap4430_es2_0_1_2_dss_feat_list[] = {\n\tFEAT_MGR_LCD2,\n\tFEAT_CORE_CLK_DIV,\n\tFEAT_LCD_CLK_SRC,\n\tFEAT_DSI_DCS_CMD_CONFIG_VC,\n\tFEAT_DSI_VC_OCP_WIDTH,\n\tFEAT_DSI_GNQ,\n\tFEAT_HDMI_CTS_SWMODE,\n\tFEAT_HANDLE_UV_SEPARATE,\n\tFEAT_ATTR2,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FREE_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_BURST_2D,\n};\n\nstatic const enum dss_feat_id omap4_dss_feat_list[] = {\n\tFEAT_MGR_LCD2,\n\tFEAT_CORE_CLK_DIV,\n\tFEAT_LCD_CLK_SRC,\n\tFEAT_DSI_DCS_CMD_CONFIG_VC,\n\tFEAT_DSI_VC_OCP_WIDTH,\n\tFEAT_DSI_GNQ,\n\tFEAT_HDMI_CTS_SWMODE,\n\tFEAT_HDMI_AUDIO_USE_MCLK,\n\tFEAT_HANDLE_UV_SEPARATE,\n\tFEAT_ATTR2,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FREE_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_BURST_2D,\n};\n\nstatic const enum dss_feat_id omap5_dss_feat_list[] = {\n\tFEAT_MGR_LCD2,\n\tFEAT_MGR_LCD3,\n\tFEAT_CORE_CLK_DIV,\n\tFEAT_LCD_CLK_SRC,\n\tFEAT_DSI_DCS_CMD_CONFIG_VC,\n\tFEAT_DSI_VC_OCP_WIDTH,\n\tFEAT_DSI_GNQ,\n\tFEAT_HDMI_CTS_SWMODE,\n\tFEAT_HDMI_AUDIO_USE_MCLK,\n\tFEAT_HANDLE_UV_SEPARATE,\n\tFEAT_ATTR2,\n\tFEAT_CPR,\n\tFEAT_PRELOAD,\n\tFEAT_FIR_COEF_V,\n\tFEAT_ALPHA_FREE_ZORDER,\n\tFEAT_FIFO_MERGE,\n\tFEAT_BURST_2D,\n\tFEAT_DSI_PHY_DCC,\n\tFEAT_MFLAG,\n};\n\n \nstatic const struct omap_dss_features omap2_dss_features = {\n\t.reg_fields = omap2_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap2_dss_reg_fields),\n\n\t.features = omap2_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap2_dss_feat_list),\n\n\t.num_mgrs = 2,\n\t.num_ovls = 3,\n\t.supported_displays = omap2_dss_supported_displays,\n\t.supported_outputs = omap2_dss_supported_outputs,\n\t.supported_color_modes = omap2_dss_supported_color_modes,\n\t.overlay_caps = omap2_dss_overlay_caps,\n\t.clksrc_names = omap2_dss_clk_source_names,\n\t.dss_params = omap2_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_VRFB,\n\t.buffer_size_unit = 1,\n\t.burst_size_unit = 8,\n};\n\n \nstatic const struct omap_dss_features omap3430_dss_features = {\n\t.reg_fields = omap3_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap3_dss_reg_fields),\n\n\t.features = omap3430_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap3430_dss_feat_list),\n\n\t.num_mgrs = 2,\n\t.num_ovls = 3,\n\t.supported_displays = omap3430_dss_supported_displays,\n\t.supported_outputs = omap3430_dss_supported_outputs,\n\t.supported_color_modes = omap3_dss_supported_color_modes,\n\t.overlay_caps = omap3430_dss_overlay_caps,\n\t.clksrc_names = omap3_dss_clk_source_names,\n\t.dss_params = omap3_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_VRFB,\n\t.buffer_size_unit = 1,\n\t.burst_size_unit = 8,\n};\n\n \nstatic const struct omap_dss_features am35xx_dss_features = {\n\t.reg_fields = omap3_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap3_dss_reg_fields),\n\n\t.features = am35xx_dss_feat_list,\n\t.num_features = ARRAY_SIZE(am35xx_dss_feat_list),\n\n\t.num_mgrs = 2,\n\t.num_ovls = 3,\n\t.supported_displays = omap3430_dss_supported_displays,\n\t.supported_outputs = omap3430_dss_supported_outputs,\n\t.supported_color_modes = omap3_dss_supported_color_modes,\n\t.overlay_caps = omap3430_dss_overlay_caps,\n\t.clksrc_names = omap3_dss_clk_source_names,\n\t.dss_params = omap3_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_VRFB,\n\t.buffer_size_unit = 1,\n\t.burst_size_unit = 8,\n};\n\nstatic const struct omap_dss_features am43xx_dss_features = {\n\t.reg_fields = am43xx_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(am43xx_dss_reg_fields),\n\n\t.features = am43xx_dss_feat_list,\n\t.num_features = ARRAY_SIZE(am43xx_dss_feat_list),\n\n\t.num_mgrs = 1,\n\t.num_ovls = 3,\n\t.supported_displays = am43xx_dss_supported_displays,\n\t.supported_outputs = am43xx_dss_supported_outputs,\n\t.supported_color_modes = omap3_dss_supported_color_modes,\n\t.overlay_caps = omap3430_dss_overlay_caps,\n\t.clksrc_names = omap2_dss_clk_source_names,\n\t.dss_params = am43xx_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA,\n\t.buffer_size_unit = 1,\n\t.burst_size_unit = 8,\n};\n\nstatic const struct omap_dss_features omap3630_dss_features = {\n\t.reg_fields = omap3_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap3_dss_reg_fields),\n\n\t.features = omap3630_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap3630_dss_feat_list),\n\n\t.num_mgrs = 2,\n\t.num_ovls = 3,\n\t.supported_displays = omap3630_dss_supported_displays,\n\t.supported_outputs = omap3630_dss_supported_outputs,\n\t.supported_color_modes = omap3_dss_supported_color_modes,\n\t.overlay_caps = omap3630_dss_overlay_caps,\n\t.clksrc_names = omap3_dss_clk_source_names,\n\t.dss_params = omap3_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_VRFB,\n\t.buffer_size_unit = 1,\n\t.burst_size_unit = 8,\n};\n\n \n \nstatic const struct omap_dss_features omap4430_es1_0_dss_features  = {\n\t.reg_fields = omap4_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap4_dss_reg_fields),\n\n\t.features = omap4430_es1_0_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap4430_es1_0_dss_feat_list),\n\n\t.num_mgrs = 3,\n\t.num_ovls = 4,\n\t.supported_displays = omap4_dss_supported_displays,\n\t.supported_outputs = omap4_dss_supported_outputs,\n\t.supported_color_modes = omap4_dss_supported_color_modes,\n\t.overlay_caps = omap4_dss_overlay_caps,\n\t.clksrc_names = omap4_dss_clk_source_names,\n\t.dss_params = omap4_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_TILER,\n\t.buffer_size_unit = 16,\n\t.burst_size_unit = 16,\n};\n\n \nstatic const struct omap_dss_features omap4430_es2_0_1_2_dss_features = {\n\t.reg_fields = omap4_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap4_dss_reg_fields),\n\n\t.features = omap4430_es2_0_1_2_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap4430_es2_0_1_2_dss_feat_list),\n\n\t.num_mgrs = 3,\n\t.num_ovls = 4,\n\t.supported_displays = omap4_dss_supported_displays,\n\t.supported_outputs = omap4_dss_supported_outputs,\n\t.supported_color_modes = omap4_dss_supported_color_modes,\n\t.overlay_caps = omap4_dss_overlay_caps,\n\t.clksrc_names = omap4_dss_clk_source_names,\n\t.dss_params = omap4_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_TILER,\n\t.buffer_size_unit = 16,\n\t.burst_size_unit = 16,\n};\n\n \nstatic const struct omap_dss_features omap4_dss_features = {\n\t.reg_fields = omap4_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap4_dss_reg_fields),\n\n\t.features = omap4_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap4_dss_feat_list),\n\n\t.num_mgrs = 3,\n\t.num_ovls = 4,\n\t.supported_displays = omap4_dss_supported_displays,\n\t.supported_outputs = omap4_dss_supported_outputs,\n\t.supported_color_modes = omap4_dss_supported_color_modes,\n\t.overlay_caps = omap4_dss_overlay_caps,\n\t.clksrc_names = omap4_dss_clk_source_names,\n\t.dss_params = omap4_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_TILER,\n\t.buffer_size_unit = 16,\n\t.burst_size_unit = 16,\n};\n\n \nstatic const struct omap_dss_features omap5_dss_features = {\n\t.reg_fields = omap5_dss_reg_fields,\n\t.num_reg_fields = ARRAY_SIZE(omap5_dss_reg_fields),\n\n\t.features = omap5_dss_feat_list,\n\t.num_features = ARRAY_SIZE(omap5_dss_feat_list),\n\n\t.num_mgrs = 4,\n\t.num_ovls = 4,\n\t.supported_displays = omap5_dss_supported_displays,\n\t.supported_outputs = omap5_dss_supported_outputs,\n\t.supported_color_modes = omap4_dss_supported_color_modes,\n\t.overlay_caps = omap4_dss_overlay_caps,\n\t.clksrc_names = omap5_dss_clk_source_names,\n\t.dss_params = omap5_dss_param_range,\n\t.supported_rotation_types = OMAP_DSS_ROT_DMA | OMAP_DSS_ROT_TILER,\n\t.buffer_size_unit = 16,\n\t.burst_size_unit = 16,\n};\n\n \nint dss_feat_get_num_mgrs(void)\n{\n\treturn omap_current_dss_features->num_mgrs;\n}\nEXPORT_SYMBOL(dss_feat_get_num_mgrs);\n\nint dss_feat_get_num_ovls(void)\n{\n\treturn omap_current_dss_features->num_ovls;\n}\nEXPORT_SYMBOL(dss_feat_get_num_ovls);\n\nunsigned long dss_feat_get_param_min(enum dss_range_param param)\n{\n\treturn omap_current_dss_features->dss_params[param].min;\n}\n\nunsigned long dss_feat_get_param_max(enum dss_range_param param)\n{\n\treturn omap_current_dss_features->dss_params[param].max;\n}\n\nenum omap_display_type dss_feat_get_supported_displays(enum omap_channel channel)\n{\n\treturn omap_current_dss_features->supported_displays[channel];\n}\n\nenum omap_dss_output_id dss_feat_get_supported_outputs(enum omap_channel channel)\n{\n\treturn omap_current_dss_features->supported_outputs[channel];\n}\n\nenum omap_color_mode dss_feat_get_supported_color_modes(enum omap_plane plane)\n{\n\treturn omap_current_dss_features->supported_color_modes[plane];\n}\nEXPORT_SYMBOL(dss_feat_get_supported_color_modes);\n\nenum omap_overlay_caps dss_feat_get_overlay_caps(enum omap_plane plane)\n{\n\treturn omap_current_dss_features->overlay_caps[plane];\n}\n\nbool dss_feat_color_mode_supported(enum omap_plane plane,\n\t\tenum omap_color_mode color_mode)\n{\n\treturn omap_current_dss_features->supported_color_modes[plane] &\n\t\t\tcolor_mode;\n}\n\nconst char *dss_feat_get_clk_source_name(enum omap_dss_clk_source id)\n{\n\treturn omap_current_dss_features->clksrc_names[id];\n}\n\nu32 dss_feat_get_buffer_size_unit(void)\n{\n\treturn omap_current_dss_features->buffer_size_unit;\n}\n\nu32 dss_feat_get_burst_size_unit(void)\n{\n\treturn omap_current_dss_features->burst_size_unit;\n}\n\n \nbool dss_has_feature(enum dss_feat_id id)\n{\n\tint i;\n\tconst enum dss_feat_id *features = omap_current_dss_features->features;\n\tconst int num_features = omap_current_dss_features->num_features;\n\n\tfor (i = 0; i < num_features; i++) {\n\t\tif (features[i] == id)\n\t\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nvoid dss_feat_get_reg_field(enum dss_feat_reg_field id, u8 *start, u8 *end)\n{\n\tBUG_ON(id >= omap_current_dss_features->num_reg_fields);\n\n\t*start = omap_current_dss_features->reg_fields[id].start;\n\t*end = omap_current_dss_features->reg_fields[id].end;\n}\n\nbool dss_feat_rotation_type_supported(enum omap_dss_rotation_type rot_type)\n{\n\treturn omap_current_dss_features->supported_rotation_types & rot_type;\n}\n\nvoid dss_features_init(enum omapdss_version version)\n{\n\tswitch (version) {\n\tcase OMAPDSS_VER_OMAP24xx:\n\t\tomap_current_dss_features = &omap2_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP34xx_ES1:\n\tcase OMAPDSS_VER_OMAP34xx_ES3:\n\t\tomap_current_dss_features = &omap3430_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP3630:\n\t\tomap_current_dss_features = &omap3630_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP4430_ES1:\n\t\tomap_current_dss_features = &omap4430_es1_0_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP4430_ES2:\n\t\tomap_current_dss_features = &omap4430_es2_0_1_2_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP4:\n\t\tomap_current_dss_features = &omap4_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_OMAP5:\n\tcase OMAPDSS_VER_DRA7xx:\n\t\tomap_current_dss_features = &omap5_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_AM35xx:\n\t\tomap_current_dss_features = &am35xx_dss_features;\n\t\tbreak;\n\n\tcase OMAPDSS_VER_AM43xx:\n\t\tomap_current_dss_features = &am43xx_dss_features;\n\t\tbreak;\n\n\tdefault:\n\t\tDSSWARN(\"Unsupported OMAP version\");\n\t\tbreak;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}