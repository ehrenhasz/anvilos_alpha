{
  "module_name": "fw_dnld.h",
  "hash_id": "11ad8f911c06a12a2371fbed481d6e18ffae7ca80c3c2347c468affb5871c349",
  "original_prompt": "Ingested from linux-6.6.14/drivers/nfc/nfcmrvl/fw_dnld.h",
  "human_readable_source": " \n \n\n#ifndef __NFCMRVL_FW_DNLD_H__\n#define __NFCMRVL_FW_DNLD_H__\n\n#include <linux/workqueue.h>\n\n#define NFCMRVL_FW_MAGIC\t\t0x88888888\n\n#define NCI_OP_PROP_BOOT_CMD\t\t0x3A\n\n#define NCI_CORE_LC_PROP_FW_DL\t\t0xFD\n#define NCI_CORE_LC_CONNID_PROP_FW_DL\t0x02\n\n#define HELPER_CMD_ENTRY_POINT\t\t0x04\n#define HELPER_CMD_PACKET_FORMAT\t0xA5\n#define HELPER_ACK_PACKET_FORMAT\t0x5A\n#define HELPER_RETRY_REQUESTED\t\t(1 << 15)\n\nstruct nfcmrvl_private;\n\nstruct nfcmrvl_fw_uart_config {\n\tuint8_t flow_control;\n\tuint32_t baudrate;\n} __packed;\n\nstruct nfcmrvl_fw_i2c_config {\n\tuint32_t clk;\n} __packed;\n\nstruct nfcmrvl_fw_spi_config {\n\tuint32_t clk;\n} __packed;\n\nstruct nfcmrvl_fw_binary_config {\n\tuint32_t offset;\n\tunion {\n\t\tvoid *config;\n\t\tstruct nfcmrvl_fw_uart_config uart;\n\t\tstruct nfcmrvl_fw_i2c_config i2c;\n\t\tstruct nfcmrvl_fw_spi_config spi;\n\t\tuint8_t reserved[64];\n\t};\n} __packed;\n\nstruct nfcmrvl_fw {\n\tuint32_t magic;\n\tuint32_t ref_clock;\n\tuint32_t phy;\n\tstruct nfcmrvl_fw_binary_config bootrom;\n\tstruct nfcmrvl_fw_binary_config helper;\n\tstruct nfcmrvl_fw_binary_config firmware;\n\tuint8_t reserved[64];\n} __packed;\n\nstruct nfcmrvl_fw_dnld {\n\tchar name[NFC_FIRMWARE_NAME_MAXSIZE + 1];\n\tconst struct firmware *fw;\n\n\tconst struct nfcmrvl_fw *header;\n\tconst struct nfcmrvl_fw_binary_config *binary_config;\n\n\tint state;\n\tint substate;\n\tint offset;\n\tint chunk_len;\n\n\tstruct workqueue_struct\t*rx_wq;\n\tstruct work_struct rx_work;\n\tstruct sk_buff_head rx_q;\n\n\tstruct timer_list timer;\n};\n\nint nfcmrvl_fw_dnld_init(struct nfcmrvl_private *priv);\nvoid nfcmrvl_fw_dnld_deinit(struct nfcmrvl_private *priv);\nvoid nfcmrvl_fw_dnld_abort(struct nfcmrvl_private *priv);\nint nfcmrvl_fw_dnld_start(struct nci_dev *ndev, const char *firmware_name);\nvoid nfcmrvl_fw_dnld_recv_frame(struct nfcmrvl_private *priv,\n\t\t\t\tstruct sk_buff *skb);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}