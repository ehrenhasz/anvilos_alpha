{
  "module_name": "mei.c",
  "hash_id": "fc63d315bd40d533c22848c99eaa823cb68684d36a190c3e4b58ba918b5529f4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/nfc/pn544/mei.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/mod_devicetable.h>\n#include <linux/nfc.h>\n#include <net/nfc/hci.h>\n#include <net/nfc/llc.h>\n\n#include \"../mei_phy.h\"\n#include \"pn544.h\"\n\n#define PN544_DRIVER_NAME \"pn544\"\n\nstatic int pn544_mei_probe(struct mei_cl_device *cldev,\n\t\t\t       const struct mei_cl_device_id *id)\n{\n\tstruct nfc_mei_phy *phy;\n\tint r;\n\n\tphy = nfc_mei_phy_alloc(cldev);\n\tif (!phy)\n\t\treturn -ENOMEM;\n\n\tr = pn544_hci_probe(phy, &mei_phy_ops, LLC_NOP_NAME,\n\t\t\t    MEI_NFC_HEADER_SIZE, 0, MEI_NFC_MAX_HCI_PAYLOAD,\n\t\t\t    NULL, &phy->hdev);\n\tif (r < 0) {\n\t\tnfc_mei_phy_free(phy);\n\n\t\treturn r;\n\t}\n\n\treturn 0;\n}\n\nstatic void pn544_mei_remove(struct mei_cl_device *cldev)\n{\n\tstruct nfc_mei_phy *phy = mei_cldev_get_drvdata(cldev);\n\n\tpn544_hci_remove(phy->hdev);\n\n\tnfc_mei_phy_free(phy);\n}\n\nstatic struct mei_cl_device_id pn544_mei_tbl[] = {\n\t{ PN544_DRIVER_NAME, MEI_NFC_UUID, MEI_CL_VERSION_ANY},\n\n\t \n\t{ }\n};\nMODULE_DEVICE_TABLE(mei, pn544_mei_tbl);\n\nstatic struct mei_cl_driver pn544_driver = {\n\t.id_table = pn544_mei_tbl,\n\t.name = PN544_DRIVER_NAME,\n\n\t.probe = pn544_mei_probe,\n\t.remove = pn544_mei_remove,\n};\n\nmodule_mei_cl_driver(pn544_driver);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_DESCRIPTION(DRIVER_DESC);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}