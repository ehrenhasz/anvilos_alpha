{
  "module_name": "leds-hp6xx.c",
  "hash_id": "4389162b0f9d16976c6c69e8084241d317e0588d09b9aa1488b0e18535e0e4e4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/leds/leds-hp6xx.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/platform_device.h>\n#include <linux/leds.h>\n#include <asm/hd64461.h>\n#include <mach/hp6xx.h>\n\nstatic void hp6xxled_green_set(struct led_classdev *led_cdev,\n\t\t\t       enum led_brightness value)\n{\n\tu8 v8;\n\n\tv8 = inb(PKDR);\n\tif (value)\n\t\toutb(v8 & (~PKDR_LED_GREEN), PKDR);\n\telse\n\t\toutb(v8 | PKDR_LED_GREEN, PKDR);\n}\n\nstatic void hp6xxled_red_set(struct led_classdev *led_cdev,\n\t\t\t     enum led_brightness value)\n{\n\tu16 v16;\n\n\tv16 = inw(HD64461_GPBDR);\n\tif (value)\n\t\toutw(v16 & (~HD64461_GPBDR_LED_RED), HD64461_GPBDR);\n\telse\n\t\toutw(v16 | HD64461_GPBDR_LED_RED, HD64461_GPBDR);\n}\n\nstatic struct led_classdev hp6xx_red_led = {\n\t.name\t\t\t= \"hp6xx:red\",\n\t.default_trigger\t= \"hp6xx-charge\",\n\t.brightness_set\t\t= hp6xxled_red_set,\n\t.flags\t\t\t= LED_CORE_SUSPENDRESUME,\n};\n\nstatic struct led_classdev hp6xx_green_led = {\n\t.name\t\t\t= \"hp6xx:green\",\n\t.default_trigger\t= \"disk-activity\",\n\t.brightness_set\t\t= hp6xxled_green_set,\n\t.flags\t\t\t= LED_CORE_SUSPENDRESUME,\n};\n\nstatic int hp6xxled_probe(struct platform_device *pdev)\n{\n\tint ret;\n\n\tret = devm_led_classdev_register(&pdev->dev, &hp6xx_red_led);\n\tif (ret < 0)\n\t\treturn ret;\n\n\treturn devm_led_classdev_register(&pdev->dev, &hp6xx_green_led);\n}\n\nstatic struct platform_driver hp6xxled_driver = {\n\t.probe\t\t= hp6xxled_probe,\n\t.driver\t\t= {\n\t\t.name\t\t= \"hp6xx-led\",\n\t},\n};\n\nmodule_platform_driver(hp6xxled_driver);\n\nMODULE_AUTHOR(\"Kristoffer Ericson <kristoffer.ericson@gmail.com>\");\nMODULE_DESCRIPTION(\"HP Jornada 6xx LED driver\");\nMODULE_LICENSE(\"GPL\");\nMODULE_ALIAS(\"platform:hp6xx-led\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}