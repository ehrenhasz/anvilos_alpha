{
  "module_name": "leds-lp55xx-common.h",
  "hash_id": "652553b1db2852295450eaf231f24523c38e3e1f211df837dd62e606639f1786",
  "original_prompt": "Ingested from linux-6.6.14/drivers/leds/leds-lp55xx-common.h",
  "human_readable_source": " \n \n\n#ifndef _LEDS_LP55XX_COMMON_H\n#define _LEDS_LP55XX_COMMON_H\n\n#include <linux/led-class-multicolor.h>\n\nenum lp55xx_engine_index {\n\tLP55XX_ENGINE_INVALID,\n\tLP55XX_ENGINE_1,\n\tLP55XX_ENGINE_2,\n\tLP55XX_ENGINE_3,\n\tLP55XX_ENGINE_MAX = LP55XX_ENGINE_3,\n};\n\nenum lp55xx_engine_mode {\n\tLP55XX_ENGINE_DISABLED,\n\tLP55XX_ENGINE_LOAD,\n\tLP55XX_ENGINE_RUN,\n};\n\n#define LP55XX_DEV_ATTR_RW(name, show, store)\t\\\n\tDEVICE_ATTR(name, S_IRUGO | S_IWUSR, show, store)\n#define LP55XX_DEV_ATTR_RO(name, show)\t\t\\\n\tDEVICE_ATTR(name, S_IRUGO, show, NULL)\n#define LP55XX_DEV_ATTR_WO(name, store)\t\t\\\n\tDEVICE_ATTR(name, S_IWUSR, NULL, store)\n\n#define show_mode(nr)\t\t\t\t\t\t\t\\\nstatic ssize_t show_engine##nr##_mode(struct device *dev,\t\t\\\n\t\t\t\t    struct device_attribute *attr,\t\\\n\t\t\t\t    char *buf)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\treturn show_engine_mode(dev, attr, buf, nr);\t\t\t\\\n}\n\n#define store_mode(nr)\t\t\t\t\t\t\t\\\nstatic ssize_t store_engine##nr##_mode(struct device *dev,\t\t\\\n\t\t\t\t     struct device_attribute *attr,\t\\\n\t\t\t\t     const char *buf, size_t len)\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\treturn store_engine_mode(dev, attr, buf, len, nr);\t\t\\\n}\n\n#define show_leds(nr)\t\t\t\t\t\t\t\\\nstatic ssize_t show_engine##nr##_leds(struct device *dev,\t\t\\\n\t\t\t    struct device_attribute *attr,\t\t\\\n\t\t\t    char *buf)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\treturn show_engine_leds(dev, attr, buf, nr);\t\t\t\\\n}\n\n#define store_leds(nr)\t\t\t\t\t\t\\\nstatic ssize_t store_engine##nr##_leds(struct device *dev,\t\\\n\t\t\t     struct device_attribute *attr,\t\\\n\t\t\t     const char *buf, size_t len)\t\\\n{\t\t\t\t\t\t\t\t\\\n\treturn store_engine_leds(dev, attr, buf, len, nr);\t\\\n}\n\n#define store_load(nr)\t\t\t\t\t\t\t\\\nstatic ssize_t store_engine##nr##_load(struct device *dev,\t\t\\\n\t\t\t\t     struct device_attribute *attr,\t\\\n\t\t\t\t     const char *buf, size_t len)\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\treturn store_engine_load(dev, attr, buf, len, nr);\t\t\\\n}\n\nstruct lp55xx_led;\nstruct lp55xx_chip;\n\n \nstruct lp55xx_reg {\n\tu8 addr;\n\tu8 val;\n};\n\n \nstruct lp55xx_device_config {\n\tconst struct lp55xx_reg reset;\n\tconst struct lp55xx_reg enable;\n\tconst int max_channel;\n\n\t \n\tint (*post_init_device) (struct lp55xx_chip *chip);\n\n\t \n\tint (*brightness_fn)(struct lp55xx_led *led);\n\n\t \n\tint (*multicolor_brightness_fn)(struct lp55xx_led *led);\n\n\t \n\tvoid (*set_led_current) (struct lp55xx_led *led, u8 led_current);\n\n\t \n\tvoid (*firmware_cb)(struct lp55xx_chip *chip);\n\n\t \n\tvoid (*run_engine) (struct lp55xx_chip *chip, bool start);\n\n\t \n\tconst struct attribute_group *dev_attr_group;\n};\n\n \nstruct lp55xx_engine {\n\tenum lp55xx_engine_mode mode;\n\tu16 led_mux;\n};\n\n \nstruct lp55xx_chip {\n\tstruct i2c_client *cl;\n\tstruct clk *clk;\n\tstruct lp55xx_platform_data *pdata;\n\tstruct mutex lock;\t \n\tint num_leds;\n\tstruct lp55xx_device_config *cfg;\n\tenum lp55xx_engine_index engine_idx;\n\tstruct lp55xx_engine engines[LP55XX_ENGINE_MAX];\n\tconst struct firmware *fw;\n};\n\n \nstruct lp55xx_led {\n\tint chan_nr;\n\tstruct led_classdev cdev;\n\tstruct led_classdev_mc mc_cdev;\n\tu8 led_current;\n\tu8 max_current;\n\tu8 brightness;\n\tstruct lp55xx_chip *chip;\n};\n\n \nextern int lp55xx_write(struct lp55xx_chip *chip, u8 reg, u8 val);\nextern int lp55xx_read(struct lp55xx_chip *chip, u8 reg, u8 *val);\nextern int lp55xx_update_bits(struct lp55xx_chip *chip, u8 reg,\n\t\t\tu8 mask, u8 val);\n\n \nextern bool lp55xx_is_extclk_used(struct lp55xx_chip *chip);\n\n \nextern int lp55xx_init_device(struct lp55xx_chip *chip);\nextern void lp55xx_deinit_device(struct lp55xx_chip *chip);\n\n \nextern int lp55xx_register_leds(struct lp55xx_led *led,\n\t\t\t\tstruct lp55xx_chip *chip);\n\n \nextern int lp55xx_register_sysfs(struct lp55xx_chip *chip);\nextern void lp55xx_unregister_sysfs(struct lp55xx_chip *chip);\n\n \nextern struct lp55xx_platform_data\n*lp55xx_of_populate_pdata(struct device *dev, struct device_node *np,\n\t\t\t  struct lp55xx_chip *chip);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}