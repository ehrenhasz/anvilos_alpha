{
  "module_name": "leds-net48xx.c",
  "hash_id": "e3e8d26105c09b05e6ddb815a56964d63764043b732993289160d2ed14308192",
  "original_prompt": "Ingested from linux-6.6.14/drivers/leds/leds-net48xx.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/platform_device.h>\n#include <linux/leds.h>\n#include <linux/err.h>\n#include <linux/io.h>\n#include <linux/nsc_gpio.h>\n#include <linux/scx200_gpio.h>\n#include <linux/module.h>\n\n#define DRVNAME \"net48xx-led\"\n#define NET48XX_ERROR_LED_GPIO\t20\n\nstatic struct platform_device *pdev;\n\nstatic void net48xx_error_led_set(struct led_classdev *led_cdev,\n\t\tenum led_brightness value)\n{\n\tscx200_gpio_ops.gpio_set(NET48XX_ERROR_LED_GPIO, value ? 1 : 0);\n}\n\nstatic struct led_classdev net48xx_error_led = {\n\t.name\t\t= \"net48xx::error\",\n\t.brightness_set\t= net48xx_error_led_set,\n\t.flags\t\t= LED_CORE_SUSPENDRESUME,\n};\n\nstatic int net48xx_led_probe(struct platform_device *pdev)\n{\n\treturn devm_led_classdev_register(&pdev->dev, &net48xx_error_led);\n}\n\nstatic struct platform_driver net48xx_led_driver = {\n\t.probe\t\t= net48xx_led_probe,\n\t.driver\t\t= {\n\t\t.name\t\t= DRVNAME,\n\t},\n};\n\nstatic int __init net48xx_led_init(void)\n{\n\tint ret;\n\n\t \n\tif (!scx200_gpio_ops.dev) {\n\t\tret = -ENODEV;\n\t\tgoto out;\n\t}\n\n\tret = platform_driver_register(&net48xx_led_driver);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tpdev = platform_device_register_simple(DRVNAME, -1, NULL, 0);\n\tif (IS_ERR(pdev)) {\n\t\tret = PTR_ERR(pdev);\n\t\tplatform_driver_unregister(&net48xx_led_driver);\n\t\tgoto out;\n\t}\n\nout:\n\treturn ret;\n}\n\nstatic void __exit net48xx_led_exit(void)\n{\n\tplatform_device_unregister(pdev);\n\tplatform_driver_unregister(&net48xx_led_driver);\n}\n\nmodule_init(net48xx_led_init);\nmodule_exit(net48xx_led_exit);\n\nMODULE_AUTHOR(\"Chris Boot <bootc@bootc.net>\");\nMODULE_DESCRIPTION(\"Soekris net48xx LED driver\");\nMODULE_LICENSE(\"GPL\");\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}