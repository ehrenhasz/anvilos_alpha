{
  "module_name": "wacom.h",
  "hash_id": "9a43975af14ffb40fc28a1dc4ac83c0388051cfba824c99f2edc6a5a9da1cda4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/wacom.h",
  "human_readable_source": " \n \n\n#ifndef WACOM_H\n#define WACOM_H\n\n#include <linux/kernel.h>\n#include <linux/slab.h>\n#include <linux/module.h>\n#include <linux/mod_devicetable.h>\n#include <linux/hid.h>\n#include <linux/kfifo.h>\n#include <linux/leds.h>\n#include <linux/usb/input.h>\n#include <linux/power_supply.h>\n#include <linux/timer.h>\n#include <asm/unaligned.h>\n\n \n#define DRIVER_VERSION \"v2.00\"\n#define DRIVER_AUTHOR \"Vojtech Pavlik <vojtech@ucw.cz>\"\n#define DRIVER_DESC \"USB Wacom tablet driver\"\n\n#define USB_VENDOR_ID_WACOM\t0x056a\n#define USB_VENDOR_ID_LENOVO\t0x17ef\n\nenum wacom_worker {\n\tWACOM_WORKER_WIRELESS,\n\tWACOM_WORKER_BATTERY,\n\tWACOM_WORKER_REMOTE,\n\tWACOM_WORKER_MODE_CHANGE,\n};\n\nstruct wacom;\n\nstruct wacom_led {\n\tstruct led_classdev cdev;\n\tstruct led_trigger trigger;\n\tstruct wacom *wacom;\n\tunsigned int group;\n\tunsigned int id;\n\tu8 llv;\n\tu8 hlv;\n\tbool held;\n};\n\nstruct wacom_group_leds {\n\tu8 select;  \n\tstruct wacom_led *leds;\n\tunsigned int count;\n\tstruct device *dev;\n};\n\nstruct wacom_battery {\n\tstruct wacom *wacom;\n\tstruct power_supply_desc bat_desc;\n\tstruct power_supply *battery;\n\tchar bat_name[WACOM_NAME_MAX];\n\tint bat_status;\n\tint battery_capacity;\n\tint bat_charging;\n\tint bat_connected;\n\tint ps_connected;\n};\n\nstruct wacom_remote {\n\tspinlock_t remote_lock;\n\tstruct kfifo remote_fifo;\n\tstruct kobject *remote_dir;\n\tstruct {\n\t\tstruct attribute_group group;\n\t\tu32 serial;\n\t\tstruct input_dev *input;\n\t\tbool registered;\n\t\tstruct wacom_battery battery;\n\t\tktime_t active_time;\n\t} remotes[WACOM_MAX_REMOTES];\n};\n\nstruct wacom {\n\tstruct usb_device *usbdev;\n\tstruct usb_interface *intf;\n\tstruct wacom_wac wacom_wac;\n\tstruct hid_device *hdev;\n\tstruct mutex lock;\n\tstruct work_struct wireless_work;\n\tstruct work_struct battery_work;\n\tstruct work_struct remote_work;\n\tstruct delayed_work init_work;\n\tstruct wacom_remote *remote;\n\tstruct work_struct mode_change_work;\n\tstruct timer_list idleprox_timer;\n\tbool generic_has_leds;\n\tstruct wacom_leds {\n\t\tstruct wacom_group_leds *groups;\n\t\tunsigned int count;\n\t\tu8 llv;        \n\t\tu8 hlv;        \n\t\tu8 img_lum;    \n\t\tu8 max_llv;    \n\t\tu8 max_hlv;    \n\t} led;\n\tstruct wacom_battery battery;\n\tbool resources;\n};\n\nstatic inline void wacom_schedule_work(struct wacom_wac *wacom_wac,\n\t\t\t\t       enum wacom_worker which)\n{\n\tstruct wacom *wacom = container_of(wacom_wac, struct wacom, wacom_wac);\n\n\tswitch (which) {\n\tcase WACOM_WORKER_WIRELESS:\n\t\tschedule_work(&wacom->wireless_work);\n\t\tbreak;\n\tcase WACOM_WORKER_BATTERY:\n\t\tschedule_work(&wacom->battery_work);\n\t\tbreak;\n\tcase WACOM_WORKER_REMOTE:\n\t\tschedule_work(&wacom->remote_work);\n\t\tbreak;\n\tcase WACOM_WORKER_MODE_CHANGE:\n\t\tschedule_work(&wacom->mode_change_work);\n\t\tbreak;\n\t}\n}\n\n \nstatic inline __u32 wacom_s32tou(s32 value, __u8 n)\n{\n\tswitch (n) {\n\tcase 8:  return ((__u8)value);\n\tcase 16: return ((__u16)value);\n\tcase 32: return ((__u32)value);\n\t}\n\treturn value & (1 << (n - 1)) ? value & (~(~0U << n)) : value;\n}\n\nextern const struct hid_device_id wacom_ids[];\n\nvoid wacom_wac_irq(struct wacom_wac *wacom_wac, size_t len);\nvoid wacom_setup_device_quirks(struct wacom *wacom);\nint wacom_setup_pen_input_capabilities(struct input_dev *input_dev,\n\t\t\t\t   struct wacom_wac *wacom_wac);\nint wacom_setup_touch_input_capabilities(struct input_dev *input_dev,\n\t\t\t\t   struct wacom_wac *wacom_wac);\nint wacom_setup_pad_input_capabilities(struct input_dev *input_dev,\n\t\t\t\t       struct wacom_wac *wacom_wac);\nvoid wacom_wac_usage_mapping(struct hid_device *hdev,\n\t\tstruct hid_field *field, struct hid_usage *usage);\nvoid wacom_wac_event(struct hid_device *hdev, struct hid_field *field,\n\t\tstruct hid_usage *usage, __s32 value);\nvoid wacom_wac_report(struct hid_device *hdev, struct hid_report *report);\nvoid wacom_battery_work(struct work_struct *work);\nenum led_brightness wacom_leds_brightness_get(struct wacom_led *led);\nstruct wacom_led *wacom_led_find(struct wacom *wacom, unsigned int group,\n\t\t\t\t unsigned int id);\nstruct wacom_led *wacom_led_next(struct wacom *wacom, struct wacom_led *cur);\nint wacom_equivalent_usage(int usage);\nint wacom_initialize_leds(struct wacom *wacom);\nvoid wacom_idleprox_timeout(struct timer_list *list);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}