{
  "module_name": "hid-xiaomi.c",
  "hash_id": "00bd1282ee0f9f6a5cff88fe53bb622487d07d512bdd49e0d1ba454a3ee6dc47",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/hid-xiaomi.c",
  "human_readable_source": "\n \n\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/hid.h>\n\n#include \"hid-ids.h\"\n\n \n \n#define MI_SILENT_MOUSE_ORIG_RDESC_LENGTH   87\nstatic __u8 mi_silent_mouse_rdesc_fixed[] = {\n\t0x05, 0x01,          \n\t0x09, 0x02,          \n\t0xA1, 0x01,          \n\t0x85, 0x03,          \n\t0x09, 0x01,          \n\t0xA1, 0x00,          \n\t0x05, 0x09,          \n\t0x19, 0x01,          \n\t0x29, 0x05,    \n\t0x15, 0x00,          \n\t0x25, 0x01,          \n\t0x75, 0x01,          \n\t0x95, 0x05,          \n\t0x81, 0x02,          \n\t0x75, 0x03,          \n\t0x95, 0x01,          \n\t0x81, 0x01,          \n\t0x05, 0x01,          \n\t0x09, 0x30,          \n\t0x09, 0x31,          \n\t0x15, 0x81,          \n\t0x25, 0x7F,          \n\t0x75, 0x08,          \n\t0x95, 0x02,          \n\t0x81, 0x06,          \n\t0x09, 0x38,          \n\t0x15, 0x81,          \n\t0x25, 0x7F,          \n\t0x75, 0x08,          \n\t0x95, 0x01,          \n\t0x81, 0x06,          \n\t0xC0,                \n\t0xC0,                \n\t0x06, 0x01, 0xFF,    \n\t0x09, 0x01,          \n\t0xA1, 0x01,          \n\t0x85, 0x05,          \n\t0x09, 0x05,          \n\t0x15, 0x00,          \n\t0x26, 0xFF, 0x00,    \n\t0x75, 0x08,          \n\t0x95, 0x04,          \n\t0xB1, 0x02,          \n\t0xC0                 \n};\n\nstatic __u8 *xiaomi_report_fixup(struct hid_device *hdev, __u8 *rdesc,\n\t\t\t\t unsigned int *rsize)\n{\n\tswitch (hdev->product) {\n\tcase USB_DEVICE_ID_MI_SILENT_MOUSE:\n\t\tif (*rsize == MI_SILENT_MOUSE_ORIG_RDESC_LENGTH) {\n\t\t\thid_info(hdev, \"fixing up Mi Silent Mouse report descriptor\\n\");\n\t\t\trdesc = mi_silent_mouse_rdesc_fixed;\n\t\t\t*rsize = sizeof(mi_silent_mouse_rdesc_fixed);\n\t\t}\n\t\tbreak;\n\t}\n\treturn rdesc;\n}\n\nstatic const struct hid_device_id xiaomi_devices[] = {\n\t{ HID_BLUETOOTH_DEVICE(USB_VENDOR_ID_XIAOMI, USB_DEVICE_ID_MI_SILENT_MOUSE) },\n\t{ }\n};\nMODULE_DEVICE_TABLE(hid, xiaomi_devices);\n\nstatic struct hid_driver xiaomi_driver = {\n\t.name = \"xiaomi\",\n\t.id_table = xiaomi_devices,\n\t.report_fixup = xiaomi_report_fixup,\n};\nmodule_hid_driver(xiaomi_driver);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Ilya Skriblovsky <IlyaSkriblovsky@gmail.com>\");\nMODULE_DESCRIPTION(\"Fixing side buttons of Xiaomi Mi Silent Mouse\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}