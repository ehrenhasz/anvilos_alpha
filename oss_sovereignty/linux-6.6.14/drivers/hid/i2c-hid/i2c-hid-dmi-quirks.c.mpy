{
  "module_name": "i2c-hid-dmi-quirks.c",
  "hash_id": "4a5012a086fa52bee6c481ce8ce79600791dcee7bf0c57623516caf655a4b423",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/i2c-hid/i2c-hid-dmi-quirks.c",
  "human_readable_source": "\n\n \n\n#include <linux/types.h>\n#include <linux/dmi.h>\n#include <linux/mod_devicetable.h>\n#include <linux/hid.h>\n\n#include \"i2c-hid.h\"\n#include \"../hid-ids.h\"\n\n\nstruct i2c_hid_desc_override {\n\tunion {\n\t\tstruct i2c_hid_desc *i2c_hid_desc;\n\t\tuint8_t             *i2c_hid_desc_buffer;\n\t};\n\tuint8_t              *hid_report_desc;\n\tunsigned int          hid_report_desc_size;\n\tuint8_t              *i2c_name;\n};\n\n\n \n\nstatic const struct i2c_hid_desc_override sipodev_desc = {\n\t.i2c_hid_desc_buffer = (uint8_t [])\n\t{0x1e, 0x00,                   \n\t 0x00, 0x01,                   \n\t 0xdb, 0x01,                   \n\t 0x21, 0x00,                   \n\t 0x24, 0x00,                   \n\t 0x1b, 0x00,                   \n\t 0x25, 0x00,                   \n\t 0x11, 0x00,                   \n\t 0x22, 0x00,                   \n\t 0x23, 0x00,                   \n\t 0x11, 0x09,                   \n\t 0x88, 0x52,                   \n\t 0x06, 0x00,                   \n\t 0x00, 0x00, 0x00, 0x00        \n\t},\n\n\t.hid_report_desc = (uint8_t [])\n\t{0x05, 0x01,                   \n\t 0x09, 0x02,                   \n\t 0xA1, 0x01,                   \n\t 0x85, 0x01,                   \n\t 0x09, 0x01,                   \n\t 0xA1, 0x00,                   \n\t 0x05, 0x09,                   \n\t 0x19, 0x01,                   \n\t 0x29, 0x02,                   \n\t 0x25, 0x01,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x02,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x06,                   \n\t 0x81, 0x01,                   \n\t 0x05, 0x01,                   \n\t 0x09, 0x30,                   \n\t 0x09, 0x31,                   \n\t 0x15, 0x81,                   \n\t 0x25, 0x7F,                   \n\t 0x75, 0x08,                   \n\t 0x95, 0x02,                   \n\t 0x81, 0x06,                   \n\t 0xC0,                         \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x09, 0x05,                   \n\t 0xA1, 0x01,                   \n\t 0x85, 0x04,                   \n\t 0x05, 0x0D,                   \n\t 0x09, 0x22,                   \n\t 0xA1, 0x02,                   \n\t 0x15, 0x00,                   \n\t 0x25, 0x01,                   \n\t 0x09, 0x47,                   \n\t 0x09, 0x42,                   \n\t 0x95, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x01,                   \n\t 0x75, 0x03,                   \n\t 0x25, 0x05,                   \n\t 0x09, 0x51,                   \n\t 0x81, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x03,                   \n\t 0x81, 0x03,                   \n\t 0x05, 0x01,                   \n\t 0x26, 0x44, 0x0A,             \n\t 0x75, 0x10,                   \n\t 0x55, 0x0E,                   \n\t 0x65, 0x11,                   \n\t 0x09, 0x30,                   \n\t 0x46, 0x1A, 0x04,             \n\t 0x95, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x46, 0xBC, 0x02,             \n\t 0x26, 0x34, 0x05,             \n\t 0x09, 0x31,                   \n\t 0x81, 0x02,                   \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x09, 0x22,                   \n\t 0xA1, 0x02,                   \n\t 0x25, 0x01,                   \n\t 0x09, 0x47,                   \n\t 0x09, 0x42,                   \n\t 0x95, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x01,                   \n\t 0x75, 0x03,                   \n\t 0x25, 0x05,                   \n\t 0x09, 0x51,                   \n\t 0x81, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x03,                   \n\t 0x81, 0x03,                   \n\t 0x05, 0x01,                   \n\t 0x26, 0x44, 0x0A,             \n\t 0x75, 0x10,                   \n\t 0x09, 0x30,                   \n\t 0x46, 0x1A, 0x04,             \n\t 0x95, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x46, 0xBC, 0x02,             \n\t 0x26, 0x34, 0x05,             \n\t 0x09, 0x31,                   \n\t 0x81, 0x02,                   \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x09, 0x22,                   \n\t 0xA1, 0x02,                   \n\t 0x25, 0x01,                   \n\t 0x09, 0x47,                   \n\t 0x09, 0x42,                   \n\t 0x95, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x01,                   \n\t 0x75, 0x03,                   \n\t 0x25, 0x05,                   \n\t 0x09, 0x51,                   \n\t 0x81, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x03,                   \n\t 0x81, 0x03,                   \n\t 0x05, 0x01,                   \n\t 0x26, 0x44, 0x0A,             \n\t 0x75, 0x10,                   \n\t 0x09, 0x30,                   \n\t 0x46, 0x1A, 0x04,             \n\t 0x95, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x46, 0xBC, 0x02,             \n\t 0x26, 0x34, 0x05,             \n\t 0x09, 0x31,                   \n\t 0x81, 0x02,                   \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x09, 0x22,                   \n\t 0xA1, 0x02,                   \n\t 0x25, 0x01,                   \n\t 0x09, 0x47,                   \n\t 0x09, 0x42,                   \n\t 0x95, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x01,                   \n\t 0x75, 0x03,                   \n\t 0x25, 0x05,                   \n\t 0x09, 0x51,                   \n\t 0x81, 0x02,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x03,                   \n\t 0x81, 0x03,                   \n\t 0x05, 0x01,                   \n\t 0x26, 0x44, 0x0A,             \n\t 0x75, 0x10,                   \n\t 0x09, 0x30,                   \n\t 0x46, 0x1A, 0x04,             \n\t 0x95, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x46, 0xBC, 0x02,             \n\t 0x26, 0x34, 0x05,             \n\t 0x09, 0x31,                   \n\t 0x81, 0x02,                   \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x55, 0x0C,                   \n\t 0x66, 0x01, 0x10,             \n\t 0x47, 0xFF, 0xFF, 0x00, 0x00, \n\t 0x27, 0xFF, 0xFF, 0x00, 0x00, \n\t 0x75, 0x10,                   \n\t 0x95, 0x01,                   \n\t 0x09, 0x56,                   \n\t 0x81, 0x02,                   \n\t 0x09, 0x54,                   \n\t 0x25, 0x7F,                   \n\t 0x75, 0x08,                   \n\t 0x81, 0x02,                   \n\t 0x05, 0x09,                   \n\t 0x09, 0x01,                   \n\t 0x25, 0x01,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x01,                   \n\t 0x81, 0x02,                   \n\t 0x95, 0x07,                   \n\t 0x81, 0x03,                   \n\t 0x05, 0x0D,                   \n\t 0x85, 0x02,                   \n\t 0x09, 0x55,                   \n\t 0x09, 0x59,                   \n\t 0x75, 0x04,                   \n\t 0x95, 0x02,                   \n\t 0x25, 0x0F,                   \n\t 0xB1, 0x02,                   \n\t 0x05, 0x0D,                   \n\t 0x85, 0x07,                   \n\t 0x09, 0x60,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x01,                   \n\t 0x25, 0x01,                   \n\t 0xB1, 0x02,                   \n\t 0x95, 0x07,                   \n\t 0xB1, 0x03,                   \n\t 0x85, 0x06,                   \n\t 0x06, 0x00, 0xFF,             \n\t 0x09, 0xC5,                   \n\t 0x26, 0xFF, 0x00,             \n\t 0x75, 0x08,                   \n\t 0x96, 0x00, 0x01,             \n\t 0xB1, 0x02,                   \n\t 0xC0,                         \n\t 0x06, 0x00, 0xFF,             \n\t 0x09, 0x01,                   \n\t 0xA1, 0x01,                   \n\t 0x85, 0x0D,                   \n\t 0x26, 0xFF, 0x00,             \n\t 0x19, 0x01,                   \n\t 0x29, 0x02,                   \n\t 0x75, 0x08,                   \n\t 0x95, 0x02,                   \n\t 0xB1, 0x02,                   \n\t 0xC0,                         \n\t 0x05, 0x0D,                   \n\t 0x09, 0x0E,                   \n\t 0xA1, 0x01,                   \n\t 0x85, 0x03,                   \n\t 0x09, 0x22,                   \n\t 0xA1, 0x02,                   \n\t 0x09, 0x52,                   \n\t 0x25, 0x0A,                   \n\t 0x95, 0x01,                   \n\t 0xB1, 0x02,                   \n\t 0xC0,                         \n\t 0x09, 0x22,                   \n\t 0xA1, 0x00,                   \n\t 0x85, 0x05,                   \n\t 0x09, 0x57,                   \n\t 0x09, 0x58,                   \n\t 0x75, 0x01,                   \n\t 0x95, 0x02,                   \n\t 0x25, 0x01,                   \n\t 0xB1, 0x02,                   \n\t 0x95, 0x06,                   \n\t 0xB1, 0x03,                   \n\t 0xC0,                         \n\t 0xC0                          \n\t},\n\t.hid_report_desc_size = 475,\n\t.i2c_name = \"SYNA3602:00\"\n};\n\n\nstatic const struct dmi_system_id i2c_hid_dmi_desc_override_table[] = {\n\t{\n\t\t.ident = \"Teclast F6 Pro\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TECLAST\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"F6 Pro\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Teclast F7\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TECLAST\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"F7\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Trekstor Primebook C13\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TREKSTOR\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Primebook C13\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Trekstor Primebook C11\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TREKSTOR\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Primebook C11\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t \n\t\t.ident = \"Trekstor Primebook C11B\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TREKSTOR\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Primebook C11B\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Trekstor SURFBOOK E11B\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"TREKSTOR\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"SURFBOOK E11B\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Direkt-Tek DTLAPY116-2\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Direkt-Tek\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"DTLAPY116-2\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Direkt-Tek DTLAPY133-1\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Direkt-Tek\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"DTLAPY133-1\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Mediacom Flexbook Edge 11\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"MEDIACOM\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"FlexBook edge11 - M-FBE11\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Mediacom FlexBook edge 13\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"MEDIACOM\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"FlexBook_edge13-M-FBE13\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Odys Winbook 13\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"AXDIA International GmbH\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"WINBOOK 13\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"iBall Aer3\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"iBall\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Aer3\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Schneider SCL142ALM\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"SCHNEIDER\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"SCL142ALM\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{\n\t\t.ident = \"Vero K147\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"VERO\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"K147\"),\n\t\t},\n\t\t.driver_data = (void *)&sipodev_desc\n\t},\n\t{ }\t \n};\n\nstatic const struct hid_device_id i2c_hid_elan_flipped_quirks = {\n\tHID_DEVICE(BUS_I2C, HID_GROUP_MULTITOUCH_WIN_8, USB_VENDOR_ID_ELAN, 0x2dcd),\n\t\tHID_QUIRK_X_INVERT | HID_QUIRK_Y_INVERT\n};\n\n \nstatic const struct dmi_system_id i2c_hid_dmi_quirk_table[] = {\n\t{\n\t\t.ident = \"DynaBook K50/FR\",\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Dynabook Inc.\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"dynabook K50/FR\"),\n\t\t},\n\t\t.driver_data = (void *)&i2c_hid_elan_flipped_quirks,\n\t},\n\t{ }\t \n};\n\n\nstruct i2c_hid_desc *i2c_hid_get_dmi_i2c_hid_desc_override(uint8_t *i2c_name)\n{\n\tstruct i2c_hid_desc_override *override;\n\tconst struct dmi_system_id *system_id;\n\n\tsystem_id = dmi_first_match(i2c_hid_dmi_desc_override_table);\n\tif (!system_id)\n\t\treturn NULL;\n\n\toverride = system_id->driver_data;\n\tif (strcmp(override->i2c_name, i2c_name))\n\t\treturn NULL;\n\n\treturn override->i2c_hid_desc;\n}\n\nchar *i2c_hid_get_dmi_hid_report_desc_override(uint8_t *i2c_name,\n\t\t\t\t\t       unsigned int *size)\n{\n\tstruct i2c_hid_desc_override *override;\n\tconst struct dmi_system_id *system_id;\n\n\tsystem_id = dmi_first_match(i2c_hid_dmi_desc_override_table);\n\tif (!system_id)\n\t\treturn NULL;\n\n\toverride = system_id->driver_data;\n\tif (strcmp(override->i2c_name, i2c_name))\n\t\treturn NULL;\n\n\t*size = override->hid_report_desc_size;\n\treturn override->hid_report_desc;\n}\n\nu32 i2c_hid_get_dmi_quirks(const u16 vendor, const u16 product)\n{\n\tu32 quirks = 0;\n\tconst struct dmi_system_id *system_id =\n\t\t\tdmi_first_match(i2c_hid_dmi_quirk_table);\n\n\tif (system_id) {\n\t\tconst struct hid_device_id *device_id =\n\t\t\t\t(struct hid_device_id *)(system_id->driver_data);\n\n\t\tif (device_id && device_id->vendor == vendor &&\n\t\t    device_id->product == product)\n\t\t\tquirks = device_id->driver_data;\n\t}\n\n\treturn quirks;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}