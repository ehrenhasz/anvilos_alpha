{
  "module_name": "ishtp-hid.h",
  "hash_id": "9d9a58084cae79e50c15139c120f9d8f304b88cd436c4a153367de023fb0376c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/intel-ish-hid/ishtp-hid.h",
  "human_readable_source": " \n \n#ifndef ISHTP_HID__H\n#define\tISHTP_HID__H\n\n \n#define\tISH_HID_VENDOR\t0x8086\n#define\tISH_HID_PRODUCT\t0x22D8\n#define\tISH_HID_VERSION\t0x0200\n\n#define\tCMD_MASK\t0x7F\n#define\tIS_RESPONSE\t0x80\n\n \nextern ishtp_print_log ishtp_hid_print_trace;\n#define hid_ishtp_trace(client, ...) \\\n\t(ishtp_hid_print_trace)(NULL, __VA_ARGS__)\n\n \nstruct hostif_msg_hdr {\n\tuint8_t\tcommand;  \n\tuint8_t\tdevice_id;\n\tuint8_t\tstatus;\n\tuint8_t\tflags;\n\tuint16_t size;\n} __packed;\n\nstruct hostif_msg {\n\tstruct hostif_msg_hdr\thdr;\n} __packed;\n\nstruct hostif_msg_to_sensor {\n\tstruct hostif_msg_hdr\thdr;\n\tuint8_t\treport_id;\n} __packed;\n\nstruct device_info {\n\tuint32_t dev_id;\n\tuint8_t dev_class;\n\tuint16_t pid;\n\tuint16_t vid;\n} __packed;\n\nstruct ishtp_version {\n\tuint8_t\tmajor;\n\tuint8_t\tminor;\n\tuint8_t\thotfix;\n\tuint16_t build;\n} __packed;\n\n \nstruct report_list {\n\tuint16_t total_size;\n\tuint8_t\tnum_of_reports;\n\tuint8_t\tflags;\n\tstruct {\n\t\tuint16_t\tsize_of_report;\n\t\tuint8_t report[1];\n\t} __packed reports[1];\n} __packed;\n\n \n#define\tHOSTIF_HID_COMMAND_BASE\t\t\t0\n#define\tHOSTIF_GET_HID_DESCRIPTOR\t\t0\n#define\tHOSTIF_GET_REPORT_DESCRIPTOR\t\t1\n#define HOSTIF_GET_FEATURE_REPORT\t\t2\n#define\tHOSTIF_SET_FEATURE_REPORT\t\t3\n#define\tHOSTIF_GET_INPUT_REPORT\t\t\t4\n#define\tHOSTIF_PUBLISH_INPUT_REPORT\t\t5\n#define\tHOSTIF_PUBLISH_INPUT_REPORT_LIST\t6\n#define\tHOSTIF_DM_COMMAND_BASE\t\t\t32\n#define\tHOSTIF_DM_ENUM_DEVICES\t\t\t33\n#define\tHOSTIF_DM_ADD_DEVICE\t\t\t34\n\n#define\tMAX_HID_DEVICES\t\t\t\t32\n\n \nstruct ishtp_cl_data {\n\t \n\tbool enum_devices_done;\n\tbool hid_descr_done;\n\tbool report_descr_done;\n\tbool init_done;\n\tbool suspended;\n\n\tunsigned int num_hid_devices;\n\tunsigned int cur_hid_dev;\n\tunsigned int hid_dev_count;\n\n\tstruct device_info *hid_devices;\n\tunsigned char *report_descr[MAX_HID_DEVICES];\n\tint report_descr_size[MAX_HID_DEVICES];\n\tstruct hid_device *hid_sensor_hubs[MAX_HID_DEVICES];\n\tunsigned char *hid_descr[MAX_HID_DEVICES];\n\tint hid_descr_size[MAX_HID_DEVICES];\n\n\twait_queue_head_t init_wait;\n\twait_queue_head_t ishtp_resume_wait;\n\tstruct ishtp_cl *hid_ishtp_cl;\n\n\t \n\tunsigned int bad_recv_cnt;\n\tint multi_packet_cnt;\n\n\tstruct work_struct work;\n\tstruct work_struct resume_work;\n\tstruct ishtp_cl_device *cl_device;\n};\n\n \nstruct ishtp_hid_data {\n\tint index;\n\tbool request_done;\n\tstruct ishtp_cl_data *client_data;\n\twait_queue_head_t hid_wait;\n\n\t \n\tbool raw_get_req;\n\tu8 *raw_buf;\n\tsize_t raw_buf_size;\n};\n\n \nvoid hid_ishtp_set_feature(struct hid_device *hid, char *buf, unsigned int len,\n\t\t\t   int report_id);\nvoid hid_ishtp_get_report(struct hid_device *hid, int report_id,\n\t\t\t  int report_type);\nint ishtp_hid_probe(unsigned int cur_hid_dev,\n\t\t    struct ishtp_cl_data *client_data);\nvoid ishtp_hid_remove(struct ishtp_cl_data *client_data);\nint ishtp_hid_link_ready_wait(struct ishtp_cl_data *client_data);\nvoid ishtp_hid_wakeup(struct hid_device *hid);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}