{
  "module_name": "hid-pxrc.c",
  "hash_id": "994835115712b507e93fbe2508170a496f377ae800ff193ff4a4f2aa3a5dadd0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/hid-pxrc.c",
  "human_readable_source": "\n \n\n#include <linux/device.h>\n#include <linux/hid.h>\n#include <linux/module.h>\n\n#include \"hid-ids.h\"\n\nstruct pxrc_priv {\n\tu8 slider;\n\tu8 dial;\n\tbool alternate;\n};\n\nstatic __u8 pxrc_rdesc_fixed[] = {\n\t0x05, 0x01,        \n\t0x09, 0x04,        \n\t0xA1, 0x01,        \n\t0x09, 0x01,        \n\t0xA1, 0x00,        \n\t0x09, 0x30,        \n\t0x09, 0x36,        \n\t0x09, 0x31,        \n\t0x09, 0x32,        \n\t0x09, 0x33,        \n\t0x09, 0x34,        \n\t0x09, 0x35,        \n\t0x09, 0x37,        \n\t0x15, 0x00,        \n\t0x26, 0xFF, 0x00,  \n\t0x35, 0x00,        \n\t0x46, 0xFF, 0x00,  \n\t0x75, 0x08,        \n\t0x95, 0x08,        \n\t0x81, 0x02,        \n\t0xC0,              \n\t0xC0,              \n};\n\nstatic __u8 *pxrc_report_fixup(struct hid_device *hdev, __u8 *rdesc,\n\t\t\t\tunsigned int *rsize)\n{\n\thid_info(hdev, \"fixing up PXRC report descriptor\\n\");\n\t*rsize = sizeof(pxrc_rdesc_fixed);\n\treturn pxrc_rdesc_fixed;\n}\n\nstatic int pxrc_raw_event(struct hid_device *hdev, struct hid_report *report,\n\t u8 *data, int size)\n{\n\tstruct pxrc_priv *priv = hid_get_drvdata(hdev);\n\n\tif (priv->alternate)\n\t\tpriv->slider = data[7];\n\telse\n\t\tpriv->dial = data[7];\n\n\tdata[1] = priv->slider;\n\tdata[7] = priv->dial;\n\n\tpriv->alternate = !priv->alternate;\n\treturn 0;\n}\n\nstatic int pxrc_probe(struct hid_device *hdev, const struct hid_device_id *id)\n{\n\tint ret;\n\tstruct pxrc_priv *priv;\n\n\tpriv = devm_kzalloc(&hdev->dev, sizeof(*priv), GFP_KERNEL);\n\tif (!priv)\n\t\treturn -ENOMEM;\n\thid_set_drvdata(hdev, priv);\n\n\tret = hid_parse(hdev);\n\tif (ret) {\n\t\thid_err(hdev, \"parse failed\\n\");\n\t\treturn ret;\n\t}\n\n\tret = hid_hw_start(hdev, HID_CONNECT_DEFAULT);\n\tif (ret) {\n\t\thid_err(hdev, \"hw start failed\\n\");\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic const struct hid_device_id pxrc_devices[] = {\n\t{ HID_USB_DEVICE(USB_VENDOR_ID_MULTIPLE_1781, USB_DEVICE_ID_PHOENIXRC) },\n\t{   }\n};\nMODULE_DEVICE_TABLE(hid, pxrc_devices);\n\nstatic struct hid_driver pxrc_driver = {\n\t.name = \"hid-pxrc\",\n\t.id_table = pxrc_devices,\n\t.report_fixup = pxrc_report_fixup,\n\t.probe = pxrc_probe,\n\t.raw_event = pxrc_raw_event,\n};\nmodule_hid_driver(pxrc_driver);\n\nMODULE_AUTHOR(\"Marcus Folkesson <marcus.folkesson@gmail.com>\");\nMODULE_DESCRIPTION(\"HID driver for PXRC 8-axis flight controller\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}