{
  "module_name": "hid-retrode.c",
  "hash_id": "160f5be18840e2eb8aa1c8948fbbc8aedda15ad510e7d7a41f913dae18d668d3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/hid-retrode.c",
  "human_readable_source": "\n \n\n \n\n#include <linux/input.h>\n#include <linux/slab.h>\n#include <linux/hid.h>\n#include <linux/module.h>\n#include \"hid-ids.h\"\n\n#define CONTROLLER_NAME_BASE \"Retrode\"\n\nstatic int retrode_input_configured(struct hid_device *hdev,\n\t\t\t\t\tstruct hid_input *hi)\n{\n\tstruct hid_field *field = hi->report->field[0];\n\tconst char *suffix;\n\tint number = 0;\n\tchar *name;\n\n\tswitch (field->report->id) {\n\tcase 0:\n\t\tsuffix = \"SNES Mouse\";\n\t\tbreak;\n\tcase 1:\n\tcase 2:\n\t\tsuffix = \"SNES / N64\";\n\t\tnumber = field->report->id;\n\t\tbreak;\n\tcase 3:\n\tcase 4:\n\t\tsuffix = \"Mega Drive\";\n\t\tnumber = field->report->id - 2;\n\t\tbreak;\n\tdefault:\n\t\thid_err(hdev, \"Got unhandled report id %d\\n\", field->report->id);\n\t\tsuffix = \"Unknown\";\n\t}\n\n\tif (number)\n\t\tname = devm_kasprintf(&hdev->dev, GFP_KERNEL,\n\t\t\t\t\"%s %s #%d\", CONTROLLER_NAME_BASE,\n\t\t\t\tsuffix, number);\n\telse\n\t\tname = devm_kasprintf(&hdev->dev, GFP_KERNEL,\n\t\t\t\t\"%s %s\", CONTROLLER_NAME_BASE, suffix);\n\n\tif (!name)\n\t\treturn -ENOMEM;\n\n\thi->input->name = name;\n\n\treturn 0;\n}\n\nstatic int retrode_probe(struct hid_device *hdev,\n\t\t\tconst struct hid_device_id *id)\n{\n\n\tint ret;\n\n\t \n\thdev->quirks |= HID_QUIRK_MULTI_INPUT;\n\n\tret = hid_parse(hdev);\n\tif (ret)\n\t\treturn ret;\n\n\tret = hid_hw_start(hdev, HID_CONNECT_DEFAULT);\n\tif (ret)\n\t\treturn ret;\n\n\treturn 0;\n}\n\nstatic const struct hid_device_id retrode_devices[] = {\n\t{ HID_USB_DEVICE(USB_VENDOR_ID_FUTURE_TECHNOLOGY, USB_DEVICE_ID_RETRODE2) },\n\t{ }\n};\nMODULE_DEVICE_TABLE(hid, retrode_devices);\n\nstatic struct hid_driver retrode_driver = {\n\t.name             = \"hid-retrode\",\n\t.id_table         = retrode_devices,\n\t.input_configured = retrode_input_configured,\n\t.probe            = retrode_probe,\n};\n\nmodule_hid_driver(retrode_driver);\n\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}