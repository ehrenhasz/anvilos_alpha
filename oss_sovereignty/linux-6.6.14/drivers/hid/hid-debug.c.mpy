{
  "module_name": "hid-debug.c",
  "hash_id": "00508ca4e30b37f9ef00605fb6168fcba357b19a040c53df09c3008b858e21a3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hid/hid-debug.c",
  "human_readable_source": "\n \n\n \n\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n#include <linux/debugfs.h>\n#include <linux/seq_file.h>\n#include <linux/kfifo.h>\n#include <linux/sched/signal.h>\n#include <linux/export.h>\n#include <linux/slab.h>\n#include <linux/uaccess.h>\n#include <linux/poll.h>\n\n#include <linux/hid.h>\n#include <linux/hid-debug.h>\n\nstatic struct dentry *hid_debug_root;\n\nstruct hid_usage_entry {\n\tunsigned  page;\n\tunsigned  usage;\n\tconst char     *description;\n};\n\nstatic const struct hid_usage_entry hid_usage_table[] = {\n  {  0,      0, \"Undefined\" },\n  {  1,      0, \"GenericDesktop\" },\n    {0, 0x01, \"Pointer\"},\n    {0, 0x02, \"Mouse\"},\n    {0, 0x04, \"Joystick\"},\n    {0, 0x05, \"GamePad\"},\n    {0, 0x06, \"Keyboard\"},\n    {0, 0x07, \"Keypad\"},\n    {0, 0x08, \"MultiAxis\"},\n      {0, 0x30, \"X\"},\n      {0, 0x31, \"Y\"},\n      {0, 0x32, \"Z\"},\n      {0, 0x33, \"Rx\"},\n      {0, 0x34, \"Ry\"},\n      {0, 0x35, \"Rz\"},\n      {0, 0x36, \"Slider\"},\n      {0, 0x37, \"Dial\"},\n      {0, 0x38, \"Wheel\"},\n      {0, 0x39, \"HatSwitch\"},\n    {0, 0x3a, \"CountedBuffer\"},\n      {0, 0x3b, \"ByteCount\"},\n      {0, 0x3c, \"MotionWakeup\"},\n      {0, 0x3d, \"Start\"},\n      {0, 0x3e, \"Select\"},\n      {0, 0x40, \"Vx\"},\n      {0, 0x41, \"Vy\"},\n      {0, 0x42, \"Vz\"},\n      {0, 0x43, \"Vbrx\"},\n      {0, 0x44, \"Vbry\"},\n      {0, 0x45, \"Vbrz\"},\n      {0, 0x46, \"Vno\"},\n    {0, 0x80, \"SystemControl\"},\n      {0, 0x81, \"SystemPowerDown\"},\n      {0, 0x82, \"SystemSleep\"},\n      {0, 0x83, \"SystemWakeUp\"},\n      {0, 0x84, \"SystemContextMenu\"},\n      {0, 0x85, \"SystemMainMenu\"},\n      {0, 0x86, \"SystemAppMenu\"},\n      {0, 0x87, \"SystemMenuHelp\"},\n      {0, 0x88, \"SystemMenuExit\"},\n      {0, 0x89, \"SystemMenuSelect\"},\n      {0, 0x8a, \"SystemMenuRight\"},\n      {0, 0x8b, \"SystemMenuLeft\"},\n      {0, 0x8c, \"SystemMenuUp\"},\n      {0, 0x8d, \"SystemMenuDown\"},\n      {0, 0x90, \"D-PadUp\"},\n      {0, 0x91, \"D-PadDown\"},\n      {0, 0x92, \"D-PadRight\"},\n      {0, 0x93, \"D-PadLeft\"},\n  {  2, 0, \"Simulation\" },\n      {0, 0xb0, \"Aileron\"},\n      {0, 0xb1, \"AileronTrim\"},\n      {0, 0xb2, \"Anti-Torque\"},\n      {0, 0xb3, \"Autopilot\"},\n      {0, 0xb4, \"Chaff\"},\n      {0, 0xb5, \"Collective\"},\n      {0, 0xb6, \"DiveBrake\"},\n      {0, 0xb7, \"ElectronicCountermeasures\"},\n      {0, 0xb8, \"Elevator\"},\n      {0, 0xb9, \"ElevatorTrim\"},\n      {0, 0xba, \"Rudder\"},\n      {0, 0xbb, \"Throttle\"},\n      {0, 0xbc, \"FlightCommunications\"},\n      {0, 0xbd, \"FlareRelease\"},\n      {0, 0xbe, \"LandingGear\"},\n      {0, 0xbf, \"ToeBrake\"},\n  {  6, 0, \"GenericDeviceControls\" },\n      {0, 0x20, \"BatteryStrength\" },\n      {0, 0x21, \"WirelessChannel\" },\n      {0, 0x22, \"WirelessID\" },\n      {0, 0x23, \"DiscoverWirelessControl\" },\n      {0, 0x24, \"SecurityCodeCharacterEntered\" },\n      {0, 0x25, \"SecurityCodeCharactedErased\" },\n      {0, 0x26, \"SecurityCodeCleared\" },\n  {  7, 0, \"Keyboard\" },\n  {  8, 0, \"LED\" },\n      {0, 0x01, \"NumLock\"},\n      {0, 0x02, \"CapsLock\"},\n      {0, 0x03, \"ScrollLock\"},\n      {0, 0x04, \"Compose\"},\n      {0, 0x05, \"Kana\"},\n      {0, 0x4b, \"GenericIndicator\"},\n  {  9, 0, \"Button\" },\n  { 10, 0, \"Ordinal\" },\n  { 12, 0, \"Consumer\" },\n      {0, 0x003, \"ProgrammableButtons\"},\n      {0, 0x238, \"HorizontalWheel\"},\n  { 13, 0, \"Digitizers\" },\n    {0, 0x01, \"Digitizer\"},\n    {0, 0x02, \"Pen\"},\n    {0, 0x03, \"LightPen\"},\n    {0, 0x04, \"TouchScreen\"},\n    {0, 0x05, \"TouchPad\"},\n    {0, 0x0e, \"DeviceConfiguration\"},\n    {0, 0x20, \"Stylus\"},\n    {0, 0x21, \"Puck\"},\n    {0, 0x22, \"Finger\"},\n    {0, 0x23, \"DeviceSettings\"},\n    {0, 0x30, \"TipPressure\"},\n    {0, 0x31, \"BarrelPressure\"},\n    {0, 0x32, \"InRange\"},\n    {0, 0x33, \"Touch\"},\n    {0, 0x34, \"UnTouch\"},\n    {0, 0x35, \"Tap\"},\n    {0, 0x38, \"Transducer Index\"},\n    {0, 0x39, \"TabletFunctionKey\"},\n    {0, 0x3a, \"ProgramChangeKey\"},\n    {0, 0x3B, \"Battery Strength\"},\n    {0, 0x3c, \"Invert\"},\n    {0, 0x42, \"TipSwitch\"},\n    {0, 0x43, \"SecondaryTipSwitch\"},\n    {0, 0x44, \"BarrelSwitch\"},\n    {0, 0x45, \"Eraser\"},\n    {0, 0x46, \"TabletPick\"},\n    {0, 0x47, \"Confidence\"},\n    {0, 0x48, \"Width\"},\n    {0, 0x49, \"Height\"},\n    {0, 0x51, \"ContactID\"},\n    {0, 0x52, \"InputMode\"},\n    {0, 0x53, \"DeviceIndex\"},\n    {0, 0x54, \"ContactCount\"},\n    {0, 0x55, \"ContactMaximumNumber\"},\n    {0, 0x59, \"ButtonType\"},\n    {0, 0x5A, \"SecondaryBarrelSwitch\"},\n    {0, 0x5B, \"TransducerSerialNumber\"},\n    {0, 0x5C, \"Preferred Color\"},\n    {0, 0x5D, \"Preferred Color is Locked\"},\n    {0, 0x5E, \"Preferred Line Width\"},\n    {0, 0x5F, \"Preferred Line Width is Locked\"},\n    {0, 0x6e, \"TransducerSerialNumber2\"},\n    {0, 0x70, \"Preferred Line Style\"},\n      {0, 0x71, \"Preferred Line Style is Locked\"},\n      {0, 0x72, \"Ink\"},\n      {0, 0x73, \"Pencil\"},\n      {0, 0x74, \"Highlighter\"},\n      {0, 0x75, \"Chisel Marker\"},\n      {0, 0x76, \"Brush\"},\n      {0, 0x77, \"No Preference\"},\n    {0, 0x80, \"Digitizer Diagnostic\"},\n    {0, 0x81, \"Digitizer Error\"},\n      {0, 0x82, \"Err Normal Status\"},\n      {0, 0x83, \"Err Transducers Exceeded\"},\n      {0, 0x84, \"Err Full Trans Features Unavailable\"},\n      {0, 0x85, \"Err Charge Low\"},\n    {0, 0x90, \"Transducer Software Info\"},\n      {0, 0x91, \"Transducer Vendor Id\"},\n      {0, 0x92, \"Transducer Product Id\"},\n    {0, 0x93, \"Device Supported Protocols\"},\n    {0, 0x94, \"Transducer Supported Protocols\"},\n      {0, 0x95, \"No Protocol\"},\n      {0, 0x96, \"Wacom AES Protocol\"},\n      {0, 0x97, \"USI Protocol\"},\n      {0, 0x98, \"Microsoft Pen Protocol\"},\n    {0, 0xA0, \"Supported Report Rates\"},\n      {0, 0xA1, \"Report Rate\"},\n      {0, 0xA2, \"Transducer Connected\"},\n      {0, 0xA3, \"Switch Disabled\"},\n      {0, 0xA4, \"Switch Unimplemented\"},\n      {0, 0xA5, \"Transducer Switches\"},\n  { 15, 0, \"PhysicalInterfaceDevice\" },\n    {0, 0x00, \"Undefined\"},\n    {0, 0x01, \"Physical_Interface_Device\"},\n      {0, 0x20, \"Normal\"},\n    {0, 0x21, \"Set_Effect_Report\"},\n      {0, 0x22, \"Effect_Block_Index\"},\n      {0, 0x23, \"Parameter_Block_Offset\"},\n      {0, 0x24, \"ROM_Flag\"},\n      {0, 0x25, \"Effect_Type\"},\n        {0, 0x26, \"ET_Constant_Force\"},\n        {0, 0x27, \"ET_Ramp\"},\n        {0, 0x28, \"ET_Custom_Force_Data\"},\n        {0, 0x30, \"ET_Square\"},\n        {0, 0x31, \"ET_Sine\"},\n        {0, 0x32, \"ET_Triangle\"},\n        {0, 0x33, \"ET_Sawtooth_Up\"},\n        {0, 0x34, \"ET_Sawtooth_Down\"},\n        {0, 0x40, \"ET_Spring\"},\n        {0, 0x41, \"ET_Damper\"},\n        {0, 0x42, \"ET_Inertia\"},\n        {0, 0x43, \"ET_Friction\"},\n      {0, 0x50, \"Duration\"},\n      {0, 0x51, \"Sample_Period\"},\n      {0, 0x52, \"Gain\"},\n      {0, 0x53, \"Trigger_Button\"},\n      {0, 0x54, \"Trigger_Repeat_Interval\"},\n      {0, 0x55, \"Axes_Enable\"},\n        {0, 0x56, \"Direction_Enable\"},\n      {0, 0x57, \"Direction\"},\n      {0, 0x58, \"Type_Specific_Block_Offset\"},\n        {0, 0x59, \"Block_Type\"},\n        {0, 0x5A, \"Set_Envelope_Report\"},\n          {0, 0x5B, \"Attack_Level\"},\n          {0, 0x5C, \"Attack_Time\"},\n          {0, 0x5D, \"Fade_Level\"},\n          {0, 0x5E, \"Fade_Time\"},\n        {0, 0x5F, \"Set_Condition_Report\"},\n        {0, 0x60, \"CP_Offset\"},\n        {0, 0x61, \"Positive_Coefficient\"},\n        {0, 0x62, \"Negative_Coefficient\"},\n        {0, 0x63, \"Positive_Saturation\"},\n        {0, 0x64, \"Negative_Saturation\"},\n        {0, 0x65, \"Dead_Band\"},\n      {0, 0x66, \"Download_Force_Sample\"},\n      {0, 0x67, \"Isoch_Custom_Force_Enable\"},\n      {0, 0x68, \"Custom_Force_Data_Report\"},\n        {0, 0x69, \"Custom_Force_Data\"},\n        {0, 0x6A, \"Custom_Force_Vendor_Defined_Data\"},\n      {0, 0x6B, \"Set_Custom_Force_Report\"},\n        {0, 0x6C, \"Custom_Force_Data_Offset\"},\n        {0, 0x6D, \"Sample_Count\"},\n      {0, 0x6E, \"Set_Periodic_Report\"},\n        {0, 0x6F, \"Offset\"},\n        {0, 0x70, \"Magnitude\"},\n        {0, 0x71, \"Phase\"},\n        {0, 0x72, \"Period\"},\n      {0, 0x73, \"Set_Constant_Force_Report\"},\n        {0, 0x74, \"Set_Ramp_Force_Report\"},\n        {0, 0x75, \"Ramp_Start\"},\n        {0, 0x76, \"Ramp_End\"},\n      {0, 0x77, \"Effect_Operation_Report\"},\n        {0, 0x78, \"Effect_Operation\"},\n          {0, 0x79, \"Op_Effect_Start\"},\n          {0, 0x7A, \"Op_Effect_Start_Solo\"},\n          {0, 0x7B, \"Op_Effect_Stop\"},\n          {0, 0x7C, \"Loop_Count\"},\n      {0, 0x7D, \"Device_Gain_Report\"},\n        {0, 0x7E, \"Device_Gain\"},\n    {0, 0x7F, \"PID_Pool_Report\"},\n      {0, 0x80, \"RAM_Pool_Size\"},\n      {0, 0x81, \"ROM_Pool_Size\"},\n      {0, 0x82, \"ROM_Effect_Block_Count\"},\n      {0, 0x83, \"Simultaneous_Effects_Max\"},\n      {0, 0x84, \"Pool_Alignment\"},\n    {0, 0x85, \"PID_Pool_Move_Report\"},\n      {0, 0x86, \"Move_Source\"},\n      {0, 0x87, \"Move_Destination\"},\n      {0, 0x88, \"Move_Length\"},\n    {0, 0x89, \"PID_Block_Load_Report\"},\n      {0, 0x8B, \"Block_Load_Status\"},\n      {0, 0x8C, \"Block_Load_Success\"},\n      {0, 0x8D, \"Block_Load_Full\"},\n      {0, 0x8E, \"Block_Load_Error\"},\n      {0, 0x8F, \"Block_Handle\"},\n      {0, 0x90, \"PID_Block_Free_Report\"},\n      {0, 0x91, \"Type_Specific_Block_Handle\"},\n    {0, 0x92, \"PID_State_Report\"},\n      {0, 0x94, \"Effect_Playing\"},\n      {0, 0x95, \"PID_Device_Control_Report\"},\n        {0, 0x96, \"PID_Device_Control\"},\n        {0, 0x97, \"DC_Enable_Actuators\"},\n        {0, 0x98, \"DC_Disable_Actuators\"},\n        {0, 0x99, \"DC_Stop_All_Effects\"},\n        {0, 0x9A, \"DC_Device_Reset\"},\n        {0, 0x9B, \"DC_Device_Pause\"},\n        {0, 0x9C, \"DC_Device_Continue\"},\n      {0, 0x9F, \"Device_Paused\"},\n      {0, 0xA0, \"Actuators_Enabled\"},\n      {0, 0xA4, \"Safety_Switch\"},\n      {0, 0xA5, \"Actuator_Override_Switch\"},\n      {0, 0xA6, \"Actuator_Power\"},\n    {0, 0xA7, \"Start_Delay\"},\n    {0, 0xA8, \"Parameter_Block_Size\"},\n    {0, 0xA9, \"Device_Managed_Pool\"},\n    {0, 0xAA, \"Shared_Parameter_Blocks\"},\n    {0, 0xAB, \"Create_New_Effect_Report\"},\n    {0, 0xAC, \"RAM_Pool_Available\"},\n  {  0x20, 0, \"Sensor\" },\n    { 0x20, 0x01, \"Sensor\" },\n    { 0x20, 0x10, \"Biometric\" },\n      { 0x20, 0x11, \"BiometricHumanPresence\" },\n      { 0x20, 0x12, \"BiometricHumanProximity\" },\n      { 0x20, 0x13, \"BiometricHumanTouch\" },\n    { 0x20, 0x20, \"Electrical\" },\n      { 0x20, 0x21, \"ElectricalCapacitance\" },\n      { 0x20, 0x22, \"ElectricalCurrent\" },\n      { 0x20, 0x23, \"ElectricalPower\" },\n      { 0x20, 0x24, \"ElectricalInductance\" },\n      { 0x20, 0x25, \"ElectricalResistance\" },\n      { 0x20, 0x26, \"ElectricalVoltage\" },\n      { 0x20, 0x27, \"ElectricalPoteniometer\" },\n      { 0x20, 0x28, \"ElectricalFrequency\" },\n      { 0x20, 0x29, \"ElectricalPeriod\" },\n    { 0x20, 0x30, \"Environmental\" },\n      { 0x20, 0x31, \"EnvironmentalAtmosphericPressure\" },\n      { 0x20, 0x32, \"EnvironmentalHumidity\" },\n      { 0x20, 0x33, \"EnvironmentalTemperature\" },\n      { 0x20, 0x34, \"EnvironmentalWindDirection\" },\n      { 0x20, 0x35, \"EnvironmentalWindSpeed\" },\n    { 0x20, 0x40, \"Light\" },\n      { 0x20, 0x41, \"LightAmbientLight\" },\n      { 0x20, 0x42, \"LightConsumerInfrared\" },\n    { 0x20, 0x50, \"Location\" },\n      { 0x20, 0x51, \"LocationBroadcast\" },\n      { 0x20, 0x52, \"LocationDeadReckoning\" },\n      { 0x20, 0x53, \"LocationGPS\" },\n      { 0x20, 0x54, \"LocationLookup\" },\n      { 0x20, 0x55, \"LocationOther\" },\n      { 0x20, 0x56, \"LocationStatic\" },\n      { 0x20, 0x57, \"LocationTriangulation\" },\n    { 0x20, 0x60, \"Mechanical\" },\n      { 0x20, 0x61, \"MechanicalBooleanSwitch\" },\n      { 0x20, 0x62, \"MechanicalBooleanSwitchArray\" },\n      { 0x20, 0x63, \"MechanicalMultivalueSwitch\" },\n      { 0x20, 0x64, \"MechanicalForce\" },\n      { 0x20, 0x65, \"MechanicalPressure\" },\n      { 0x20, 0x66, \"MechanicalStrain\" },\n      { 0x20, 0x67, \"MechanicalWeight\" },\n      { 0x20, 0x68, \"MechanicalHapticVibrator\" },\n      { 0x20, 0x69, \"MechanicalHallEffectSwitch\" },\n    { 0x20, 0x70, \"Motion\" },\n      { 0x20, 0x71, \"MotionAccelerometer1D\" },\n      { 0x20, 0x72, \"MotionAccelerometer2D\" },\n      { 0x20, 0x73, \"MotionAccelerometer3D\" },\n      { 0x20, 0x74, \"MotionGyrometer1D\" },\n      { 0x20, 0x75, \"MotionGyrometer2D\" },\n      { 0x20, 0x76, \"MotionGyrometer3D\" },\n      { 0x20, 0x77, \"MotionMotionDetector\" },\n      { 0x20, 0x78, \"MotionSpeedometer\" },\n      { 0x20, 0x79, \"MotionAccelerometer\" },\n      { 0x20, 0x7A, \"MotionGyrometer\" },\n    { 0x20, 0x80, \"Orientation\" },\n      { 0x20, 0x81, \"OrientationCompass1D\" },\n      { 0x20, 0x82, \"OrientationCompass2D\" },\n      { 0x20, 0x83, \"OrientationCompass3D\" },\n      { 0x20, 0x84, \"OrientationInclinometer1D\" },\n      { 0x20, 0x85, \"OrientationInclinometer2D\" },\n      { 0x20, 0x86, \"OrientationInclinometer3D\" },\n      { 0x20, 0x87, \"OrientationDistance1D\" },\n      { 0x20, 0x88, \"OrientationDistance2D\" },\n      { 0x20, 0x89, \"OrientationDistance3D\" },\n      { 0x20, 0x8A, \"OrientationDeviceOrientation\" },\n      { 0x20, 0x8B, \"OrientationCompass\" },\n      { 0x20, 0x8C, \"OrientationInclinometer\" },\n      { 0x20, 0x8D, \"OrientationDistance\" },\n    { 0x20, 0x90, \"Scanner\" },\n      { 0x20, 0x91, \"ScannerBarcode\" },\n      { 0x20, 0x91, \"ScannerRFID\" },\n      { 0x20, 0x91, \"ScannerNFC\" },\n    { 0x20, 0xA0, \"Time\" },\n      { 0x20, 0xA1, \"TimeAlarmTimer\" },\n      { 0x20, 0xA2, \"TimeRealTimeClock\" },\n    { 0x20, 0xE0, \"Other\" },\n      { 0x20, 0xE1, \"OtherCustom\" },\n      { 0x20, 0xE2, \"OtherGeneric\" },\n      { 0x20, 0xE3, \"OtherGenericEnumerator\" },\n  { 0x84, 0, \"Power Device\" },\n    { 0x84, 0x02, \"PresentStatus\" },\n    { 0x84, 0x03, \"ChangeStatus\" },\n    { 0x84, 0x04, \"UPS\" },\n    { 0x84, 0x05, \"PowerSupply\" },\n    { 0x84, 0x10, \"BatterySystem\" },\n    { 0x84, 0x11, \"BatterySystemID\" },\n    { 0x84, 0x12, \"Battery\" },\n    { 0x84, 0x13, \"BatteryID\" },\n    { 0x84, 0x14, \"Charger\" },\n    { 0x84, 0x15, \"ChargerID\" },\n    { 0x84, 0x16, \"PowerConverter\" },\n    { 0x84, 0x17, \"PowerConverterID\" },\n    { 0x84, 0x18, \"OutletSystem\" },\n    { 0x84, 0x19, \"OutletSystemID\" },\n    { 0x84, 0x1a, \"Input\" },\n    { 0x84, 0x1b, \"InputID\" },\n    { 0x84, 0x1c, \"Output\" },\n    { 0x84, 0x1d, \"OutputID\" },\n    { 0x84, 0x1e, \"Flow\" },\n    { 0x84, 0x1f, \"FlowID\" },\n    { 0x84, 0x20, \"Outlet\" },\n    { 0x84, 0x21, \"OutletID\" },\n    { 0x84, 0x22, \"Gang\" },\n    { 0x84, 0x24, \"PowerSummary\" },\n    { 0x84, 0x25, \"PowerSummaryID\" },\n    { 0x84, 0x30, \"Voltage\" },\n    { 0x84, 0x31, \"Current\" },\n    { 0x84, 0x32, \"Frequency\" },\n    { 0x84, 0x33, \"ApparentPower\" },\n    { 0x84, 0x35, \"PercentLoad\" },\n    { 0x84, 0x40, \"ConfigVoltage\" },\n    { 0x84, 0x41, \"ConfigCurrent\" },\n    { 0x84, 0x43, \"ConfigApparentPower\" },\n    { 0x84, 0x53, \"LowVoltageTransfer\" },\n    { 0x84, 0x54, \"HighVoltageTransfer\" },\n    { 0x84, 0x56, \"DelayBeforeStartup\" },\n    { 0x84, 0x57, \"DelayBeforeShutdown\" },\n    { 0x84, 0x58, \"Test\" },\n    { 0x84, 0x5a, \"AudibleAlarmControl\" },\n    { 0x84, 0x60, \"Present\" },\n    { 0x84, 0x61, \"Good\" },\n    { 0x84, 0x62, \"InternalFailure\" },\n    { 0x84, 0x65, \"Overload\" },\n    { 0x84, 0x66, \"OverCharged\" },\n    { 0x84, 0x67, \"OverTemperature\" },\n    { 0x84, 0x68, \"ShutdownRequested\" },\n    { 0x84, 0x69, \"ShutdownImminent\" },\n    { 0x84, 0x6b, \"SwitchOn/Off\" },\n    { 0x84, 0x6c, \"Switchable\" },\n    { 0x84, 0x6d, \"Used\" },\n    { 0x84, 0x6e, \"Boost\" },\n    { 0x84, 0x73, \"CommunicationLost\" },\n    { 0x84, 0xfd, \"iManufacturer\" },\n    { 0x84, 0xfe, \"iProduct\" },\n    { 0x84, 0xff, \"iSerialNumber\" },\n  { 0x85, 0, \"Battery System\" },\n    { 0x85, 0x01, \"SMBBatteryMode\" },\n    { 0x85, 0x02, \"SMBBatteryStatus\" },\n    { 0x85, 0x03, \"SMBAlarmWarning\" },\n    { 0x85, 0x04, \"SMBChargerMode\" },\n    { 0x85, 0x05, \"SMBChargerStatus\" },\n    { 0x85, 0x06, \"SMBChargerSpecInfo\" },\n    { 0x85, 0x07, \"SMBSelectorState\" },\n    { 0x85, 0x08, \"SMBSelectorPresets\" },\n    { 0x85, 0x09, \"SMBSelectorInfo\" },\n    { 0x85, 0x29, \"RemainingCapacityLimit\" },\n    { 0x85, 0x2c, \"CapacityMode\" },\n    { 0x85, 0x42, \"BelowRemainingCapacityLimit\" },\n    { 0x85, 0x44, \"Charging\" },\n    { 0x85, 0x45, \"Discharging\" },\n    { 0x85, 0x4b, \"NeedReplacement\" },\n    { 0x85, 0x65, \"AbsoluteStateOfCharge\" },\n    { 0x85, 0x66, \"RemainingCapacity\" },\n    { 0x85, 0x68, \"RunTimeToEmpty\" },\n    { 0x85, 0x6a, \"AverageTimeToFull\" },\n    { 0x85, 0x83, \"DesignCapacity\" },\n    { 0x85, 0x85, \"ManufacturerDate\" },\n    { 0x85, 0x89, \"iDeviceChemistry\" },\n    { 0x85, 0x8b, \"Rechargeable\" },\n    { 0x85, 0x8f, \"iOEMInformation\" },\n    { 0x85, 0x8d, \"CapacityGranularity1\" },\n    { 0x85, 0xd0, \"ACPresent\" },\n   \n  { 0xffff, 0, \"Vendor-specific-FF\" },\n  { 0, 0, NULL }\n};\n\n \nstatic char *resolv_usage_page(unsigned page, struct seq_file *f) {\n\tconst struct hid_usage_entry *p;\n\tchar *buf = NULL;\n\n\tif (!f) {\n\t\tbuf = kzalloc(HID_DEBUG_BUFSIZE, GFP_ATOMIC);\n\t\tif (!buf)\n\t\t\treturn ERR_PTR(-ENOMEM);\n\t}\n\n\tfor (p = hid_usage_table; p->description; p++)\n\t\tif (p->page == page) {\n\t\t\tif (!f) {\n\t\t\t\tsnprintf(buf, HID_DEBUG_BUFSIZE, \"%s\",\n\t\t\t\t\t\tp->description);\n\t\t\t\treturn buf;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseq_printf(f, \"%s\", p->description);\n\t\t\t\treturn NULL;\n\t\t\t}\n\t\t}\n\tif (!f)\n\t\tsnprintf(buf, HID_DEBUG_BUFSIZE, \"%04x\", page);\n\telse\n\t\tseq_printf(f, \"%04x\", page);\n\treturn buf;\n}\n\nchar *hid_resolv_usage(unsigned usage, struct seq_file *f) {\n\tconst struct hid_usage_entry *p;\n\tchar *buf = NULL;\n\tint len = 0;\n\n\tbuf = resolv_usage_page(usage >> 16, f);\n\tif (IS_ERR(buf)) {\n\t\tpr_err(\"error allocating HID debug buffer\\n\");\n\t\treturn NULL;\n\t}\n\n\n\tif (!f) {\n\t\tlen = strlen(buf);\n\t\tlen += scnprintf(buf + len, HID_DEBUG_BUFSIZE - len, \".\");\n\t}\n\telse {\n\t\tseq_printf(f, \".\");\n\t}\n\tfor (p = hid_usage_table; p->description; p++)\n\t\tif (p->page == (usage >> 16)) {\n\t\t\tfor(++p; p->description && p->usage != 0; p++)\n\t\t\t\tif (p->usage == (usage & 0xffff)) {\n\t\t\t\t\tif (!f)\n\t\t\t\t\t\tsnprintf(buf + len,\n\t\t\t\t\t\t\tHID_DEBUG_BUFSIZE - len,\n\t\t\t\t\t\t\t\"%s\", p->description);\n\t\t\t\t\telse\n\t\t\t\t\t\tseq_printf(f,\n\t\t\t\t\t\t\t\"%s\",\n\t\t\t\t\t\t\tp->description);\n\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\tif (!f)\n\t\tsnprintf(buf + len, HID_DEBUG_BUFSIZE - len, \"%04x\",\n\t\t\t usage & 0xffff);\n\telse\n\t\tseq_printf(f, \"%04x\", usage & 0xffff);\n\treturn buf;\n}\nEXPORT_SYMBOL_GPL(hid_resolv_usage);\n\nstatic void tab(int n, struct seq_file *f) {\n\tseq_printf(f, \"%*s\", n, \"\");\n}\n\nvoid hid_dump_field(struct hid_field *field, int n, struct seq_file *f) {\n\tint j;\n\n\tif (field->physical) {\n\t\ttab(n, f);\n\t\tseq_printf(f, \"Physical(\");\n\t\thid_resolv_usage(field->physical, f); seq_printf(f, \")\\n\");\n\t}\n\tif (field->logical) {\n\t\ttab(n, f);\n\t\tseq_printf(f, \"Logical(\");\n\t\thid_resolv_usage(field->logical, f); seq_printf(f, \")\\n\");\n\t}\n\tif (field->application) {\n\t\ttab(n, f);\n\t\tseq_printf(f, \"Application(\");\n\t\thid_resolv_usage(field->application, f); seq_printf(f, \")\\n\");\n\t}\n\ttab(n, f); seq_printf(f, \"Usage(%d)\\n\", field->maxusage);\n\tfor (j = 0; j < field->maxusage; j++) {\n\t\ttab(n+2, f); hid_resolv_usage(field->usage[j].hid, f); seq_printf(f, \"\\n\");\n\t}\n\tif (field->logical_minimum != field->logical_maximum) {\n\t\ttab(n, f); seq_printf(f, \"Logical Minimum(%d)\\n\", field->logical_minimum);\n\t\ttab(n, f); seq_printf(f, \"Logical Maximum(%d)\\n\", field->logical_maximum);\n\t}\n\tif (field->physical_minimum != field->physical_maximum) {\n\t\ttab(n, f); seq_printf(f, \"Physical Minimum(%d)\\n\", field->physical_minimum);\n\t\ttab(n, f); seq_printf(f, \"Physical Maximum(%d)\\n\", field->physical_maximum);\n\t}\n\tif (field->unit_exponent) {\n\t\ttab(n, f); seq_printf(f, \"Unit Exponent(%d)\\n\", field->unit_exponent);\n\t}\n\tif (field->unit) {\n\t\tstatic const char *systems[5] = { \"None\", \"SI Linear\", \"SI Rotation\", \"English Linear\", \"English Rotation\" };\n\t\tstatic const char *units[5][8] = {\n\t\t\t{ \"None\", \"None\", \"None\", \"None\", \"None\", \"None\", \"None\", \"None\" },\n\t\t\t{ \"None\", \"Centimeter\", \"Gram\", \"Seconds\", \"Kelvin\",     \"Ampere\", \"Candela\", \"None\" },\n\t\t\t{ \"None\", \"Radians\",    \"Gram\", \"Seconds\", \"Kelvin\",     \"Ampere\", \"Candela\", \"None\" },\n\t\t\t{ \"None\", \"Inch\",       \"Slug\", \"Seconds\", \"Fahrenheit\", \"Ampere\", \"Candela\", \"None\" },\n\t\t\t{ \"None\", \"Degrees\",    \"Slug\", \"Seconds\", \"Fahrenheit\", \"Ampere\", \"Candela\", \"None\" }\n\t\t};\n\n\t\tint i;\n\t\tint sys;\n                __u32 data = field->unit;\n\n\t\t \n\t\tsys = data & 0xf;\n\t\tdata >>= 4;\n\n\t\tif(sys > 4) {\n\t\t\ttab(n, f); seq_printf(f, \"Unit(Invalid)\\n\");\n\t\t}\n\t\telse {\n\t\t\tint earlier_unit = 0;\n\n\t\t\ttab(n, f); seq_printf(f, \"Unit(%s : \", systems[sys]);\n\n\t\t\tfor (i=1 ; i<sizeof(__u32)*2 ; i++) {\n\t\t\t\tchar nibble = data & 0xf;\n\t\t\t\tdata >>= 4;\n\t\t\t\tif (nibble != 0) {\n\t\t\t\t\tif(earlier_unit++ > 0)\n\t\t\t\t\t\tseq_printf(f, \"*\");\n\t\t\t\t\tseq_printf(f, \"%s\", units[sys][i]);\n\t\t\t\t\tif(nibble != 1) {\n\t\t\t\t\t\t \n\n\t\t\t\t\t\tint val = nibble & 0x7;\n\t\t\t\t\t\tif(nibble & 0x08)\n\t\t\t\t\t\t\tval = -((0x7 & ~val) +1);\n\t\t\t\t\t\tseq_printf(f, \"^%d\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tseq_printf(f, \")\\n\");\n\t\t}\n\t}\n\ttab(n, f); seq_printf(f, \"Report Size(%u)\\n\", field->report_size);\n\ttab(n, f); seq_printf(f, \"Report Count(%u)\\n\", field->report_count);\n\ttab(n, f); seq_printf(f, \"Report Offset(%u)\\n\", field->report_offset);\n\n\ttab(n, f); seq_printf(f, \"Flags( \");\n\tj = field->flags;\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_CONSTANT & j ? \"Constant \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_VARIABLE & j ? \"Variable \" : \"Array \");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_RELATIVE & j ? \"Relative \" : \"Absolute \");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_WRAP & j ? \"Wrap \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_NONLINEAR & j ? \"NonLinear \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_NO_PREFERRED & j ? \"NoPreferredState \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_NULL_STATE & j ? \"NullState \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_VOLATILE & j ? \"Volatile \" : \"\");\n\tseq_printf(f, \"%s\", HID_MAIN_ITEM_BUFFERED_BYTE & j ? \"BufferedByte \" : \"\");\n\tseq_printf(f, \")\\n\");\n}\nEXPORT_SYMBOL_GPL(hid_dump_field);\n\nvoid hid_dump_device(struct hid_device *device, struct seq_file *f)\n{\n\tstruct hid_report_enum *report_enum;\n\tstruct hid_report *report;\n\tstruct list_head *list;\n\tunsigned i,k;\n\tstatic const char *table[] = {\"INPUT\", \"OUTPUT\", \"FEATURE\"};\n\n\tfor (i = 0; i < HID_REPORT_TYPES; i++) {\n\t\treport_enum = device->report_enum + i;\n\t\tlist = report_enum->report_list.next;\n\t\twhile (list != &report_enum->report_list) {\n\t\t\treport = (struct hid_report *) list;\n\t\t\ttab(2, f);\n\t\t\tseq_printf(f, \"%s\", table[i]);\n\t\t\tif (report->id)\n\t\t\t\tseq_printf(f, \"(%d)\", report->id);\n\t\t\tseq_printf(f, \"[%s]\", table[report->type]);\n\t\t\tseq_printf(f, \"\\n\");\n\t\t\tfor (k = 0; k < report->maxfield; k++) {\n\t\t\t\ttab(4, f);\n\t\t\t\tseq_printf(f, \"Field(%d)\\n\", k);\n\t\t\t\thid_dump_field(report->field[k], 6, f);\n\t\t\t}\n\t\t\tlist = list->next;\n\t\t}\n\t}\n}\nEXPORT_SYMBOL_GPL(hid_dump_device);\n\n \nvoid hid_debug_event(struct hid_device *hdev, char *buf)\n{\n\tstruct hid_debug_list *list;\n\tunsigned long flags;\n\n\tspin_lock_irqsave(&hdev->debug_list_lock, flags);\n\tlist_for_each_entry(list, &hdev->debug_list, node)\n\t\tkfifo_in(&list->hid_debug_fifo, buf, strlen(buf));\n\tspin_unlock_irqrestore(&hdev->debug_list_lock, flags);\n\n\twake_up_interruptible(&hdev->debug_wait);\n}\nEXPORT_SYMBOL_GPL(hid_debug_event);\n\nvoid hid_dump_report(struct hid_device *hid, int type, u8 *data,\n\t\tint size)\n{\n\tstruct hid_report_enum *report_enum;\n\tchar *buf;\n\tunsigned int i;\n\n\tbuf = kmalloc(HID_DEBUG_BUFSIZE, GFP_ATOMIC);\n\n\tif (!buf)\n\t\treturn;\n\n\treport_enum = hid->report_enum + type;\n\n\t \n\tsnprintf(buf, HID_DEBUG_BUFSIZE - 1,\n\t\t\t\"\\nreport (size %u) (%snumbered) = \", size,\n\t\t\treport_enum->numbered ? \"\" : \"un\");\n\thid_debug_event(hid, buf);\n\n\tfor (i = 0; i < size; i++) {\n\t\tsnprintf(buf, HID_DEBUG_BUFSIZE - 1,\n\t\t\t\t\" %02x\", data[i]);\n\t\thid_debug_event(hid, buf);\n\t}\n\thid_debug_event(hid, \"\\n\");\n\tkfree(buf);\n}\nEXPORT_SYMBOL_GPL(hid_dump_report);\n\nvoid hid_dump_input(struct hid_device *hdev, struct hid_usage *usage, __s32 value)\n{\n\tchar *buf;\n\tint len;\n\n\tbuf = hid_resolv_usage(usage->hid, NULL);\n\tif (!buf)\n\t\treturn;\n\tlen = strlen(buf);\n\tsnprintf(buf + len, HID_DEBUG_BUFSIZE - len - 1, \" = %d\\n\", value);\n\n\thid_debug_event(hdev, buf);\n\n\tkfree(buf);\n\twake_up_interruptible(&hdev->debug_wait);\n}\nEXPORT_SYMBOL_GPL(hid_dump_input);\n\nstatic const char *events[EV_MAX + 1] = {\n\t[EV_SYN] = \"Sync\",\t\t\t[EV_KEY] = \"Key\",\n\t[EV_REL] = \"Relative\",\t\t\t[EV_ABS] = \"Absolute\",\n\t[EV_MSC] = \"Misc\",\t\t\t[EV_LED] = \"LED\",\n\t[EV_SND] = \"Sound\",\t\t\t[EV_REP] = \"Repeat\",\n\t[EV_FF] = \"ForceFeedback\",\t\t[EV_PWR] = \"Power\",\n\t[EV_FF_STATUS] = \"ForceFeedbackStatus\",\n};\n\nstatic const char *syncs[3] = {\n\t[SYN_REPORT] = \"Report\",\t\t[SYN_CONFIG] = \"Config\",\n\t[SYN_MT_REPORT] = \"MT Report\",\n};\n\nstatic const char *keys[KEY_MAX + 1] = {\n\t[KEY_RESERVED] = \"Reserved\",\t\t[KEY_ESC] = \"Esc\",\n\t[KEY_1] = \"1\",\t\t\t\t[KEY_2] = \"2\",\n\t[KEY_3] = \"3\",\t\t\t\t[KEY_4] = \"4\",\n\t[KEY_5] = \"5\",\t\t\t\t[KEY_6] = \"6\",\n\t[KEY_7] = \"7\",\t\t\t\t[KEY_8] = \"8\",\n\t[KEY_9] = \"9\",\t\t\t\t[KEY_0] = \"0\",\n\t[KEY_MINUS] = \"Minus\",\t\t\t[KEY_EQUAL] = \"Equal\",\n\t[KEY_BACKSPACE] = \"Backspace\",\t\t[KEY_TAB] = \"Tab\",\n\t[KEY_Q] = \"Q\",\t\t\t\t[KEY_W] = \"W\",\n\t[KEY_E] = \"E\",\t\t\t\t[KEY_R] = \"R\",\n\t[KEY_T] = \"T\",\t\t\t\t[KEY_Y] = \"Y\",\n\t[KEY_U] = \"U\",\t\t\t\t[KEY_I] = \"I\",\n\t[KEY_O] = \"O\",\t\t\t\t[KEY_P] = \"P\",\n\t[KEY_LEFTBRACE] = \"LeftBrace\",\t\t[KEY_RIGHTBRACE] = \"RightBrace\",\n\t[KEY_ENTER] = \"Enter\",\t\t\t[KEY_LEFTCTRL] = \"LeftControl\",\n\t[KEY_A] = \"A\",\t\t\t\t[KEY_S] = \"S\",\n\t[KEY_D] = \"D\",\t\t\t\t[KEY_F] = \"F\",\n\t[KEY_G] = \"G\",\t\t\t\t[KEY_H] = \"H\",\n\t[KEY_J] = \"J\",\t\t\t\t[KEY_K] = \"K\",\n\t[KEY_L] = \"L\",\t\t\t\t[KEY_SEMICOLON] = \"Semicolon\",\n\t[KEY_APOSTROPHE] = \"Apostrophe\",\t[KEY_GRAVE] = \"Grave\",\n\t[KEY_LEFTSHIFT] = \"LeftShift\",\t\t[KEY_BACKSLASH] = \"BackSlash\",\n\t[KEY_Z] = \"Z\",\t\t\t\t[KEY_X] = \"X\",\n\t[KEY_C] = \"C\",\t\t\t\t[KEY_V] = \"V\",\n\t[KEY_B] = \"B\",\t\t\t\t[KEY_N] = \"N\",\n\t[KEY_M] = \"M\",\t\t\t\t[KEY_COMMA] = \"Comma\",\n\t[KEY_DOT] = \"Dot\",\t\t\t[KEY_SLASH] = \"Slash\",\n\t[KEY_RIGHTSHIFT] = \"RightShift\",\t[KEY_KPASTERISK] = \"KPAsterisk\",\n\t[KEY_LEFTALT] = \"LeftAlt\",\t\t[KEY_SPACE] = \"Space\",\n\t[KEY_CAPSLOCK] = \"CapsLock\",\t\t[KEY_F1] = \"F1\",\n\t[KEY_F2] = \"F2\",\t\t\t[KEY_F3] = \"F3\",\n\t[KEY_F4] = \"F4\",\t\t\t[KEY_F5] = \"F5\",\n\t[KEY_F6] = \"F6\",\t\t\t[KEY_F7] = \"F7\",\n\t[KEY_F8] = \"F8\",\t\t\t[KEY_F9] = \"F9\",\n\t[KEY_F10] = \"F10\",\t\t\t[KEY_NUMLOCK] = \"NumLock\",\n\t[KEY_SCROLLLOCK] = \"ScrollLock\",\t[KEY_KP7] = \"KP7\",\n\t[KEY_KP8] = \"KP8\",\t\t\t[KEY_KP9] = \"KP9\",\n\t[KEY_KPMINUS] = \"KPMinus\",\t\t[KEY_KP4] = \"KP4\",\n\t[KEY_KP5] = \"KP5\",\t\t\t[KEY_KP6] = \"KP6\",\n\t[KEY_KPPLUS] = \"KPPlus\",\t\t[KEY_KP1] = \"KP1\",\n\t[KEY_KP2] = \"KP2\",\t\t\t[KEY_KP3] = \"KP3\",\n\t[KEY_KP0] = \"KP0\",\t\t\t[KEY_KPDOT] = \"KPDot\",\n\t[KEY_ZENKAKUHANKAKU] = \"Zenkaku/Hankaku\", [KEY_102ND] = \"102nd\",\n\t[KEY_F11] = \"F11\",\t\t\t[KEY_F12] = \"F12\",\n\t[KEY_RO] = \"RO\",\t\t\t[KEY_KATAKANA] = \"Katakana\",\n\t[KEY_HIRAGANA] = \"HIRAGANA\",\t\t[KEY_HENKAN] = \"Henkan\",\n\t[KEY_KATAKANAHIRAGANA] = \"Katakana/Hiragana\", [KEY_MUHENKAN] = \"Muhenkan\",\n\t[KEY_KPJPCOMMA] = \"KPJpComma\",\t\t[KEY_KPENTER] = \"KPEnter\",\n\t[KEY_RIGHTCTRL] = \"RightCtrl\",\t\t[KEY_KPSLASH] = \"KPSlash\",\n\t[KEY_SYSRQ] = \"SysRq\",\t\t\t[KEY_RIGHTALT] = \"RightAlt\",\n\t[KEY_LINEFEED] = \"LineFeed\",\t\t[KEY_HOME] = \"Home\",\n\t[KEY_UP] = \"Up\",\t\t\t[KEY_PAGEUP] = \"PageUp\",\n\t[KEY_LEFT] = \"Left\",\t\t\t[KEY_RIGHT] = \"Right\",\n\t[KEY_END] = \"End\",\t\t\t[KEY_DOWN] = \"Down\",\n\t[KEY_PAGEDOWN] = \"PageDown\",\t\t[KEY_INSERT] = \"Insert\",\n\t[KEY_DELETE] = \"Delete\",\t\t[KEY_MACRO] = \"Macro\",\n\t[KEY_MUTE] = \"Mute\",\t\t\t[KEY_VOLUMEDOWN] = \"VolumeDown\",\n\t[KEY_VOLUMEUP] = \"VolumeUp\",\t\t[KEY_POWER] = \"Power\",\n\t[KEY_KPEQUAL] = \"KPEqual\",\t\t[KEY_KPPLUSMINUS] = \"KPPlusMinus\",\n\t[KEY_PAUSE] = \"Pause\",\t\t\t[KEY_KPCOMMA] = \"KPComma\",\n\t[KEY_HANGUEL] = \"Hangeul\",\t\t[KEY_HANJA] = \"Hanja\",\n\t[KEY_YEN] = \"Yen\",\t\t\t[KEY_LEFTMETA] = \"LeftMeta\",\n\t[KEY_RIGHTMETA] = \"RightMeta\",\t\t[KEY_COMPOSE] = \"Compose\",\n\t[KEY_STOP] = \"Stop\",\t\t\t[KEY_AGAIN] = \"Again\",\n\t[KEY_PROPS] = \"Props\",\t\t\t[KEY_UNDO] = \"Undo\",\n\t[KEY_FRONT] = \"Front\",\t\t\t[KEY_COPY] = \"Copy\",\n\t[KEY_OPEN] = \"Open\",\t\t\t[KEY_PASTE] = \"Paste\",\n\t[KEY_FIND] = \"Find\",\t\t\t[KEY_CUT] = \"Cut\",\n\t[KEY_HELP] = \"Help\",\t\t\t[KEY_MENU] = \"Menu\",\n\t[KEY_CALC] = \"Calc\",\t\t\t[KEY_SETUP] = \"Setup\",\n\t[KEY_SLEEP] = \"Sleep\",\t\t\t[KEY_WAKEUP] = \"WakeUp\",\n\t[KEY_FILE] = \"File\",\t\t\t[KEY_SENDFILE] = \"SendFile\",\n\t[KEY_DELETEFILE] = \"DeleteFile\",\t[KEY_XFER] = \"X-fer\",\n\t[KEY_PROG1] = \"Prog1\",\t\t\t[KEY_PROG2] = \"Prog2\",\n\t[KEY_WWW] = \"WWW\",\t\t\t[KEY_MSDOS] = \"MSDOS\",\n\t[KEY_COFFEE] = \"Coffee\",\t\t[KEY_ROTATE_DISPLAY] = \"RotateDisplay\",\n\t[KEY_CYCLEWINDOWS] = \"CycleWindows\",\t[KEY_MAIL] = \"Mail\",\n\t[KEY_BOOKMARKS] = \"Bookmarks\",\t\t[KEY_COMPUTER] = \"Computer\",\n\t[KEY_BACK] = \"Back\",\t\t\t[KEY_FORWARD] = \"Forward\",\n\t[KEY_CLOSECD] = \"CloseCD\",\t\t[KEY_EJECTCD] = \"EjectCD\",\n\t[KEY_EJECTCLOSECD] = \"EjectCloseCD\",\t[KEY_NEXTSONG] = \"NextSong\",\n\t[KEY_PLAYPAUSE] = \"PlayPause\",\t\t[KEY_PREVIOUSSONG] = \"PreviousSong\",\n\t[KEY_STOPCD] = \"StopCD\",\t\t[KEY_RECORD] = \"Record\",\n\t[KEY_REWIND] = \"Rewind\",\t\t[KEY_PHONE] = \"Phone\",\n\t[KEY_ISO] = \"ISOKey\",\t\t\t[KEY_CONFIG] = \"Config\",\n\t[KEY_HOMEPAGE] = \"HomePage\",\t\t[KEY_REFRESH] = \"Refresh\",\n\t[KEY_EXIT] = \"Exit\",\t\t\t[KEY_MOVE] = \"Move\",\n\t[KEY_EDIT] = \"Edit\",\t\t\t[KEY_SCROLLUP] = \"ScrollUp\",\n\t[KEY_SCROLLDOWN] = \"ScrollDown\",\t[KEY_KPLEFTPAREN] = \"KPLeftParenthesis\",\n\t[KEY_KPRIGHTPAREN] = \"KPRightParenthesis\", [KEY_NEW] = \"New\",\n\t[KEY_REDO] = \"Redo\",\t\t\t[KEY_F13] = \"F13\",\n\t[KEY_F14] = \"F14\",\t\t\t[KEY_F15] = \"F15\",\n\t[KEY_F16] = \"F16\",\t\t\t[KEY_F17] = \"F17\",\n\t[KEY_F18] = \"F18\",\t\t\t[KEY_F19] = \"F19\",\n\t[KEY_F20] = \"F20\",\t\t\t[KEY_F21] = \"F21\",\n\t[KEY_F22] = \"F22\",\t\t\t[KEY_F23] = \"F23\",\n\t[KEY_F24] = \"F24\",\t\t\t[KEY_PLAYCD] = \"PlayCD\",\n\t[KEY_PAUSECD] = \"PauseCD\",\t\t[KEY_PROG3] = \"Prog3\",\n\t[KEY_PROG4] = \"Prog4\",\n\t[KEY_ALL_APPLICATIONS] = \"AllApplications\",\n\t[KEY_SUSPEND] = \"Suspend\",\n\t[KEY_CLOSE] = \"Close\",\t\t\t[KEY_PLAY] = \"Play\",\n\t[KEY_FASTFORWARD] = \"FastForward\",\t[KEY_BASSBOOST] = \"BassBoost\",\n\t[KEY_PRINT] = \"Print\",\t\t\t[KEY_HP] = \"HP\",\n\t[KEY_CAMERA] = \"Camera\",\t\t[KEY_SOUND] = \"Sound\",\n\t[KEY_QUESTION] = \"Question\",\t\t[KEY_EMAIL] = \"Email\",\n\t[KEY_CHAT] = \"Chat\",\t\t\t[KEY_SEARCH] = \"Search\",\n\t[KEY_CONNECT] = \"Connect\",\t\t[KEY_FINANCE] = \"Finance\",\n\t[KEY_SPORT] = \"Sport\",\t\t\t[KEY_SHOP] = \"Shop\",\n\t[KEY_ALTERASE] = \"AlternateErase\",\t[KEY_CANCEL] = \"Cancel\",\n\t[KEY_BRIGHTNESSDOWN] = \"BrightnessDown\", [KEY_BRIGHTNESSUP] = \"BrightnessUp\",\n\t[KEY_MEDIA] = \"Media\",\t\t\t[KEY_UNKNOWN] = \"Unknown\",\n\t[BTN_DPAD_UP] = \"BtnDPadUp\",\t\t[BTN_DPAD_DOWN] = \"BtnDPadDown\",\n\t[BTN_DPAD_LEFT] = \"BtnDPadLeft\",\t[BTN_DPAD_RIGHT] = \"BtnDPadRight\",\n\t[BTN_0] = \"Btn0\",\t\t\t[BTN_1] = \"Btn1\",\n\t[BTN_2] = \"Btn2\",\t\t\t[BTN_3] = \"Btn3\",\n\t[BTN_4] = \"Btn4\",\t\t\t[BTN_5] = \"Btn5\",\n\t[BTN_6] = \"Btn6\",\t\t\t[BTN_7] = \"Btn7\",\n\t[BTN_8] = \"Btn8\",\t\t\t[BTN_9] = \"Btn9\",\n\t[BTN_LEFT] = \"LeftBtn\",\t\t\t[BTN_RIGHT] = \"RightBtn\",\n\t[BTN_MIDDLE] = \"MiddleBtn\",\t\t[BTN_SIDE] = \"SideBtn\",\n\t[BTN_EXTRA] = \"ExtraBtn\",\t\t[BTN_FORWARD] = \"ForwardBtn\",\n\t[BTN_BACK] = \"BackBtn\",\t\t\t[BTN_TASK] = \"TaskBtn\",\n\t[BTN_TRIGGER] = \"Trigger\",\t\t[BTN_THUMB] = \"ThumbBtn\",\n\t[BTN_THUMB2] = \"ThumbBtn2\",\t\t[BTN_TOP] = \"TopBtn\",\n\t[BTN_TOP2] = \"TopBtn2\",\t\t\t[BTN_PINKIE] = \"PinkieBtn\",\n\t[BTN_BASE] = \"BaseBtn\",\t\t\t[BTN_BASE2] = \"BaseBtn2\",\n\t[BTN_BASE3] = \"BaseBtn3\",\t\t[BTN_BASE4] = \"BaseBtn4\",\n\t[BTN_BASE5] = \"BaseBtn5\",\t\t[BTN_BASE6] = \"BaseBtn6\",\n\t[BTN_DEAD] = \"BtnDead\",\t\t\t[BTN_A] = \"BtnA\",\n\t[BTN_B] = \"BtnB\",\t\t\t[BTN_C] = \"BtnC\",\n\t[BTN_X] = \"BtnX\",\t\t\t[BTN_Y] = \"BtnY\",\n\t[BTN_Z] = \"BtnZ\",\t\t\t[BTN_TL] = \"BtnTL\",\n\t[BTN_TR] = \"BtnTR\",\t\t\t[BTN_TL2] = \"BtnTL2\",\n\t[BTN_TR2] = \"BtnTR2\",\t\t\t[BTN_SELECT] = \"BtnSelect\",\n\t[BTN_START] = \"BtnStart\",\t\t[BTN_MODE] = \"BtnMode\",\n\t[BTN_THUMBL] = \"BtnThumbL\",\t\t[BTN_THUMBR] = \"BtnThumbR\",\n\t[BTN_TOOL_PEN] = \"ToolPen\",\t\t[BTN_TOOL_RUBBER] = \"ToolRubber\",\n\t[BTN_TOOL_BRUSH] = \"ToolBrush\",\t\t[BTN_TOOL_PENCIL] = \"ToolPencil\",\n\t[BTN_TOOL_AIRBRUSH] = \"ToolAirbrush\",\t[BTN_TOOL_FINGER] = \"ToolFinger\",\n\t[BTN_TOOL_MOUSE] = \"ToolMouse\",\t\t[BTN_TOOL_LENS] = \"ToolLens\",\n\t[BTN_TOUCH] = \"Touch\",\t\t\t[BTN_STYLUS] = \"Stylus\",\n\t[BTN_STYLUS2] = \"Stylus2\",\t\t[BTN_TOOL_DOUBLETAP] = \"ToolDoubleTap\",\n\t[BTN_TOOL_TRIPLETAP] = \"ToolTripleTap\",\t[BTN_TOOL_QUADTAP] = \"ToolQuadrupleTap\",\n\t[BTN_GEAR_DOWN] = \"WheelBtn\",\n\t[BTN_GEAR_UP] = \"Gear up\",\t\t[KEY_OK] = \"Ok\",\n\t[KEY_SELECT] = \"Select\",\t\t[KEY_GOTO] = \"Goto\",\n\t[KEY_CLEAR] = \"Clear\",\t\t\t[KEY_POWER2] = \"Power2\",\n\t[KEY_OPTION] = \"Option\",\t\t[KEY_INFO] = \"Info\",\n\t[KEY_TIME] = \"Time\",\t\t\t[KEY_VENDOR] = \"Vendor\",\n\t[KEY_ARCHIVE] = \"Archive\",\t\t[KEY_PROGRAM] = \"Program\",\n\t[KEY_CHANNEL] = \"Channel\",\t\t[KEY_FAVORITES] = \"Favorites\",\n\t[KEY_EPG] = \"EPG\",\t\t\t[KEY_PVR] = \"PVR\",\n\t[KEY_MHP] = \"MHP\",\t\t\t[KEY_LANGUAGE] = \"Language\",\n\t[KEY_TITLE] = \"Title\",\t\t\t[KEY_SUBTITLE] = \"Subtitle\",\n\t[KEY_ANGLE] = \"Angle\",\t\t\t[KEY_ZOOM] = \"Zoom\",\n\t[KEY_MODE] = \"Mode\",\t\t\t[KEY_KEYBOARD] = \"Keyboard\",\n\t[KEY_SCREEN] = \"Screen\",\t\t[KEY_PC] = \"PC\",\n\t[KEY_TV] = \"TV\",\t\t\t[KEY_TV2] = \"TV2\",\n\t[KEY_VCR] = \"VCR\",\t\t\t[KEY_VCR2] = \"VCR2\",\n\t[KEY_SAT] = \"Sat\",\t\t\t[KEY_SAT2] = \"Sat2\",\n\t[KEY_CD] = \"CD\",\t\t\t[KEY_TAPE] = \"Tape\",\n\t[KEY_RADIO] = \"Radio\",\t\t\t[KEY_TUNER] = \"Tuner\",\n\t[KEY_PLAYER] = \"Player\",\t\t[KEY_TEXT] = \"Text\",\n\t[KEY_DVD] = \"DVD\",\t\t\t[KEY_AUX] = \"Aux\",\n\t[KEY_MP3] = \"MP3\",\t\t\t[KEY_AUDIO] = \"Audio\",\n\t[KEY_VIDEO] = \"Video\",\t\t\t[KEY_DIRECTORY] = \"Directory\",\n\t[KEY_LIST] = \"List\",\t\t\t[KEY_MEMO] = \"Memo\",\n\t[KEY_CALENDAR] = \"Calendar\",\t\t[KEY_RED] = \"Red\",\n\t[KEY_GREEN] = \"Green\",\t\t\t[KEY_YELLOW] = \"Yellow\",\n\t[KEY_BLUE] = \"Blue\",\t\t\t[KEY_CHANNELUP] = \"ChannelUp\",\n\t[KEY_CHANNELDOWN] = \"ChannelDown\",\t[KEY_FIRST] = \"First\",\n\t[KEY_LAST] = \"Last\",\t\t\t[KEY_AB] = \"AB\",\n\t[KEY_NEXT] = \"Next\",\t\t\t[KEY_RESTART] = \"Restart\",\n\t[KEY_SLOW] = \"Slow\",\t\t\t[KEY_SHUFFLE] = \"Shuffle\",\n\t[KEY_BREAK] = \"Break\",\t\t\t[KEY_PREVIOUS] = \"Previous\",\n\t[KEY_DIGITS] = \"Digits\",\t\t[KEY_TEEN] = \"TEEN\",\n\t[KEY_TWEN] = \"TWEN\",\t\t\t[KEY_DEL_EOL] = \"DeleteEOL\",\n\t[KEY_DEL_EOS] = \"DeleteEOS\",\t\t[KEY_INS_LINE] = \"InsertLine\",\n\t[KEY_DEL_LINE] = \"DeleteLine\",\n\t[KEY_SEND] = \"Send\",\t\t\t[KEY_REPLY] = \"Reply\",\n\t[KEY_FORWARDMAIL] = \"ForwardMail\",\t[KEY_SAVE] = \"Save\",\n\t[KEY_DOCUMENTS] = \"Documents\",\t\t[KEY_SPELLCHECK] = \"SpellCheck\",\n\t[KEY_LOGOFF] = \"Logoff\",\n\t[KEY_FN] = \"Fn\",\t\t\t[KEY_FN_ESC] = \"Fn+ESC\",\n\t[KEY_FN_1] = \"Fn+1\",\t\t\t[KEY_FN_2] = \"Fn+2\",\n\t[KEY_FN_B] = \"Fn+B\",\t\t\t[KEY_FN_D] = \"Fn+D\",\n\t[KEY_FN_E] = \"Fn+E\",\t\t\t[KEY_FN_F] = \"Fn+F\",\n\t[KEY_FN_S] = \"Fn+S\",\n\t[KEY_FN_F1] = \"Fn+F1\",\t\t\t[KEY_FN_F2] = \"Fn+F2\",\n\t[KEY_FN_F3] = \"Fn+F3\",\t\t\t[KEY_FN_F4] = \"Fn+F4\",\n\t[KEY_FN_F5] = \"Fn+F5\",\t\t\t[KEY_FN_F6] = \"Fn+F6\",\n\t[KEY_FN_F7] = \"Fn+F7\",\t\t\t[KEY_FN_F8] = \"Fn+F8\",\n\t[KEY_FN_F9] = \"Fn+F9\",\t\t\t[KEY_FN_F10] = \"Fn+F10\",\n\t[KEY_FN_F11] = \"Fn+F11\",\t\t[KEY_FN_F12] = \"Fn+F12\",\n\t[KEY_KBDILLUMTOGGLE] = \"KbdIlluminationToggle\",\n\t[KEY_KBDILLUMDOWN] = \"KbdIlluminationDown\",\n\t[KEY_KBDILLUMUP] = \"KbdIlluminationUp\",\n\t[KEY_SWITCHVIDEOMODE] = \"SwitchVideoMode\",\n\t[KEY_BUTTONCONFIG] = \"ButtonConfig\",\n\t[KEY_TASKMANAGER] = \"TaskManager\",\n\t[KEY_JOURNAL] = \"Journal\",\n\t[KEY_CONTROLPANEL] = \"ControlPanel\",\n\t[KEY_APPSELECT] = \"AppSelect\",\n\t[KEY_SCREENSAVER] = \"ScreenSaver\",\n\t[KEY_VOICECOMMAND] = \"VoiceCommand\",\n\t[KEY_ASSISTANT] = \"Assistant\",\n\t[KEY_KBD_LAYOUT_NEXT] = \"KbdLayoutNext\",\n\t[KEY_EMOJI_PICKER] = \"EmojiPicker\",\n\t[KEY_CAMERA_ACCESS_ENABLE] = \"CameraAccessEnable\",\n\t[KEY_CAMERA_ACCESS_DISABLE] = \"CameraAccessDisable\",\n\t[KEY_CAMERA_ACCESS_TOGGLE] = \"CameraAccessToggle\",\n\t[KEY_DICTATE] = \"Dictate\",\n\t[KEY_MICMUTE] = \"MicrophoneMute\",\n\t[KEY_BRIGHTNESS_MIN] = \"BrightnessMin\",\n\t[KEY_BRIGHTNESS_MAX] = \"BrightnessMax\",\n\t[KEY_BRIGHTNESS_AUTO] = \"BrightnessAuto\",\n\t[KEY_KBDINPUTASSIST_PREV] = \"KbdInputAssistPrev\",\n\t[KEY_KBDINPUTASSIST_NEXT] = \"KbdInputAssistNext\",\n\t[KEY_KBDINPUTASSIST_PREVGROUP] = \"KbdInputAssistPrevGroup\",\n\t[KEY_KBDINPUTASSIST_NEXTGROUP] = \"KbdInputAssistNextGroup\",\n\t[KEY_KBDINPUTASSIST_ACCEPT] = \"KbdInputAssistAccept\",\n\t[KEY_KBDINPUTASSIST_CANCEL] = \"KbdInputAssistCancel\",\n\t[KEY_MACRO1] = \"Macro1\", [KEY_MACRO2] = \"Macro2\", [KEY_MACRO3] = \"Macro3\",\n\t[KEY_MACRO4] = \"Macro4\", [KEY_MACRO5] = \"Macro5\", [KEY_MACRO6] = \"Macro6\",\n\t[KEY_MACRO7] = \"Macro7\", [KEY_MACRO8] = \"Macro8\", [KEY_MACRO9] = \"Macro9\",\n\t[KEY_MACRO10] = \"Macro10\", [KEY_MACRO11] = \"Macro11\", [KEY_MACRO12] = \"Macro12\",\n\t[KEY_MACRO13] = \"Macro13\", [KEY_MACRO14] = \"Macro14\", [KEY_MACRO15] = \"Macro15\",\n\t[KEY_MACRO16] = \"Macro16\", [KEY_MACRO17] = \"Macro17\", [KEY_MACRO18] = \"Macro18\",\n\t[KEY_MACRO19] = \"Macro19\", [KEY_MACRO20] = \"Macro20\", [KEY_MACRO21] = \"Macro21\",\n\t[KEY_MACRO22] = \"Macro22\", [KEY_MACRO23] = \"Macro23\", [KEY_MACRO24] = \"Macro24\",\n\t[KEY_MACRO25] = \"Macro25\", [KEY_MACRO26] = \"Macro26\", [KEY_MACRO27] = \"Macro27\",\n\t[KEY_MACRO28] = \"Macro28\", [KEY_MACRO29] = \"Macro29\", [KEY_MACRO30] = \"Macro30\",\n};\n\nstatic const char *relatives[REL_MAX + 1] = {\n\t[REL_X] = \"X\",\t\t\t[REL_Y] = \"Y\",\n\t[REL_Z] = \"Z\",\t\t\t[REL_RX] = \"Rx\",\n\t[REL_RY] = \"Ry\",\t\t[REL_RZ] = \"Rz\",\n\t[REL_HWHEEL] = \"HWheel\",\t[REL_DIAL] = \"Dial\",\n\t[REL_WHEEL] = \"Wheel\",\t\t[REL_MISC] = \"Misc\",\n};\n\nstatic const char *absolutes[ABS_CNT] = {\n\t[ABS_X] = \"X\",\t\t\t[ABS_Y] = \"Y\",\n\t[ABS_Z] = \"Z\",\t\t\t[ABS_RX] = \"Rx\",\n\t[ABS_RY] = \"Ry\",\t\t[ABS_RZ] = \"Rz\",\n\t[ABS_THROTTLE] = \"Throttle\",\t[ABS_RUDDER] = \"Rudder\",\n\t[ABS_WHEEL] = \"Wheel\",\t\t[ABS_GAS] = \"Gas\",\n\t[ABS_BRAKE] = \"Brake\",\t\t[ABS_HAT0X] = \"Hat0X\",\n\t[ABS_HAT0Y] = \"Hat0Y\",\t\t[ABS_HAT1X] = \"Hat1X\",\n\t[ABS_HAT1Y] = \"Hat1Y\",\t\t[ABS_HAT2X] = \"Hat2X\",\n\t[ABS_HAT2Y] = \"Hat2Y\",\t\t[ABS_HAT3X] = \"Hat3X\",\n\t[ABS_HAT3Y] = \"Hat 3Y\",\t\t[ABS_PRESSURE] = \"Pressure\",\n\t[ABS_DISTANCE] = \"Distance\",\t[ABS_TILT_X] = \"XTilt\",\n\t[ABS_TILT_Y] = \"YTilt\",\t\t[ABS_TOOL_WIDTH] = \"ToolWidth\",\n\t[ABS_VOLUME] = \"Volume\",\t[ABS_PROFILE] = \"Profile\",\n\t[ABS_MISC] = \"Misc\",\n\t[ABS_MT_TOUCH_MAJOR] = \"MTMajor\",\n\t[ABS_MT_TOUCH_MINOR] = \"MTMinor\",\n\t[ABS_MT_WIDTH_MAJOR] = \"MTMajorW\",\n\t[ABS_MT_WIDTH_MINOR] = \"MTMinorW\",\n\t[ABS_MT_ORIENTATION] = \"MTOrientation\",\n\t[ABS_MT_POSITION_X] = \"MTPositionX\",\n\t[ABS_MT_POSITION_Y] = \"MTPositionY\",\n\t[ABS_MT_TOOL_TYPE] = \"MTToolType\",\n\t[ABS_MT_BLOB_ID] = \"MTBlobID\",\n};\n\nstatic const char *misc[MSC_MAX + 1] = {\n\t[MSC_SERIAL] = \"Serial\",\t[MSC_PULSELED] = \"Pulseled\",\n\t[MSC_GESTURE] = \"Gesture\",\t[MSC_RAW] = \"RawData\"\n};\n\nstatic const char *leds[LED_MAX + 1] = {\n\t[LED_NUML] = \"NumLock\",\t\t[LED_CAPSL] = \"CapsLock\",\n\t[LED_SCROLLL] = \"ScrollLock\",\t[LED_COMPOSE] = \"Compose\",\n\t[LED_KANA] = \"Kana\",\t\t[LED_SLEEP] = \"Sleep\",\n\t[LED_SUSPEND] = \"Suspend\",\t[LED_MUTE] = \"Mute\",\n\t[LED_MISC] = \"Misc\",\n};\n\nstatic const char *repeats[REP_MAX + 1] = {\n\t[REP_DELAY] = \"Delay\",\t\t[REP_PERIOD] = \"Period\"\n};\n\nstatic const char *sounds[SND_MAX + 1] = {\n\t[SND_CLICK] = \"Click\",\t\t[SND_BELL] = \"Bell\",\n\t[SND_TONE] = \"Tone\"\n};\n\nstatic const char **names[EV_MAX + 1] = {\n\t[EV_SYN] = syncs,\t\t\t[EV_KEY] = keys,\n\t[EV_REL] = relatives,\t\t\t[EV_ABS] = absolutes,\n\t[EV_MSC] = misc,\t\t\t[EV_LED] = leds,\n\t[EV_SND] = sounds,\t\t\t[EV_REP] = repeats,\n};\n\nstatic void hid_resolv_event(__u8 type, __u16 code, struct seq_file *f)\n{\n\tseq_printf(f, \"%s.%s\", events[type] ? events[type] : \"?\",\n\t\tnames[type] ? (names[type][code] ? names[type][code] : \"?\") : \"?\");\n}\n\nstatic void hid_dump_input_mapping(struct hid_device *hid, struct seq_file *f)\n{\n\tint i, j, k;\n\tstruct hid_report *report;\n\tstruct hid_usage *usage;\n\n\tfor (k = HID_INPUT_REPORT; k <= HID_OUTPUT_REPORT; k++) {\n\t\tlist_for_each_entry(report, &hid->report_enum[k].report_list, list) {\n\t\t\tfor (i = 0; i < report->maxfield; i++) {\n\t\t\t\tfor ( j = 0; j < report->field[i]->maxusage; j++) {\n\t\t\t\t\tusage = report->field[i]->usage + j;\n\t\t\t\t\thid_resolv_usage(usage->hid, f);\n\t\t\t\t\tseq_printf(f, \" ---> \");\n\t\t\t\t\thid_resolv_event(usage->type, usage->code, f);\n\t\t\t\t\tseq_printf(f, \"\\n\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nstatic int hid_debug_rdesc_show(struct seq_file *f, void *p)\n{\n\tstruct hid_device *hdev = f->private;\n\tconst __u8 *rdesc = hdev->rdesc;\n\tunsigned rsize = hdev->rsize;\n\tint i;\n\n\tif (!rdesc) {\n\t\trdesc = hdev->dev_rdesc;\n\t\trsize = hdev->dev_rsize;\n\t}\n\n\t \n\tfor (i = 0; i < rsize; i++)\n\t\tseq_printf(f, \"%02x \", rdesc[i]);\n\tseq_printf(f, \"\\n\\n\");\n\n\t \n\tif (down_interruptible(&hdev->driver_input_lock))\n\t\treturn 0;\n\n\thid_dump_device(hdev, f);\n\tseq_printf(f, \"\\n\");\n\thid_dump_input_mapping(hdev, f);\n\n\tup(&hdev->driver_input_lock);\n\n\treturn 0;\n}\n\nstatic int hid_debug_events_open(struct inode *inode, struct file *file)\n{\n\tint err = 0;\n\tstruct hid_debug_list *list;\n\tunsigned long flags;\n\n\tif (!(list = kzalloc(sizeof(struct hid_debug_list), GFP_KERNEL))) {\n\t\terr = -ENOMEM;\n\t\tgoto out;\n\t}\n\n\terr = kfifo_alloc(&list->hid_debug_fifo, HID_DEBUG_FIFOSIZE, GFP_KERNEL);\n\tif (err) {\n\t\tkfree(list);\n\t\tgoto out;\n\t}\n\tlist->hdev = (struct hid_device *) inode->i_private;\n\tkref_get(&list->hdev->ref);\n\tfile->private_data = list;\n\tmutex_init(&list->read_mutex);\n\n\tspin_lock_irqsave(&list->hdev->debug_list_lock, flags);\n\tlist_add_tail(&list->node, &list->hdev->debug_list);\n\tspin_unlock_irqrestore(&list->hdev->debug_list_lock, flags);\n\nout:\n\treturn err;\n}\n\nstatic ssize_t hid_debug_events_read(struct file *file, char __user *buffer,\n\t\tsize_t count, loff_t *ppos)\n{\n\tstruct hid_debug_list *list = file->private_data;\n\tint ret = 0, copied;\n\tDECLARE_WAITQUEUE(wait, current);\n\n\tmutex_lock(&list->read_mutex);\n\tif (kfifo_is_empty(&list->hid_debug_fifo)) {\n\t\tadd_wait_queue(&list->hdev->debug_wait, &wait);\n\t\tset_current_state(TASK_INTERRUPTIBLE);\n\n\t\twhile (kfifo_is_empty(&list->hid_debug_fifo)) {\n\t\t\tif (signal_pending(current)) {\n\t\t\t\tret = -ERESTARTSYS;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t \n\t\t\tif (!list->hdev || !list->hdev->debug) {\n\t\t\t\tret = -EIO;\n\t\t\t\tset_current_state(TASK_RUNNING);\n\t\t\t\tgoto out;\n\t\t\t}\n\n\t\t\tif (file->f_flags & O_NONBLOCK) {\n\t\t\t\tret = -EAGAIN;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t \n\t\t\tmutex_unlock(&list->read_mutex);\n\t\t\tschedule();\n\t\t\tmutex_lock(&list->read_mutex);\n\t\t\tset_current_state(TASK_INTERRUPTIBLE);\n\t\t}\n\n\t\t__set_current_state(TASK_RUNNING);\n\t\tremove_wait_queue(&list->hdev->debug_wait, &wait);\n\n\t\tif (ret)\n\t\t\tgoto out;\n\t}\n\n\t \n\tret = kfifo_to_user(&list->hid_debug_fifo, buffer, count, &copied);\n\tif (ret)\n\t\tgoto out;\n\tret = copied;\nout:\n\tmutex_unlock(&list->read_mutex);\n\treturn ret;\n}\n\nstatic __poll_t hid_debug_events_poll(struct file *file, poll_table *wait)\n{\n\tstruct hid_debug_list *list = file->private_data;\n\n\tpoll_wait(file, &list->hdev->debug_wait, wait);\n\tif (!kfifo_is_empty(&list->hid_debug_fifo))\n\t\treturn EPOLLIN | EPOLLRDNORM;\n\tif (!list->hdev->debug)\n\t\treturn EPOLLERR | EPOLLHUP;\n\treturn 0;\n}\n\nstatic int hid_debug_events_release(struct inode *inode, struct file *file)\n{\n\tstruct hid_debug_list *list = file->private_data;\n\tunsigned long flags;\n\n\tspin_lock_irqsave(&list->hdev->debug_list_lock, flags);\n\tlist_del(&list->node);\n\tspin_unlock_irqrestore(&list->hdev->debug_list_lock, flags);\n\tkfifo_free(&list->hid_debug_fifo);\n\n\tkref_put(&list->hdev->ref, hiddev_free);\n\tkfree(list);\n\n\treturn 0;\n}\n\nDEFINE_SHOW_ATTRIBUTE(hid_debug_rdesc);\n\nstatic const struct file_operations hid_debug_events_fops = {\n\t.owner =        THIS_MODULE,\n\t.open           = hid_debug_events_open,\n\t.read           = hid_debug_events_read,\n\t.poll\t\t= hid_debug_events_poll,\n\t.release        = hid_debug_events_release,\n\t.llseek\t\t= noop_llseek,\n};\n\n\nvoid hid_debug_register(struct hid_device *hdev, const char *name)\n{\n\thdev->debug_dir = debugfs_create_dir(name, hid_debug_root);\n\thdev->debug_rdesc = debugfs_create_file(\"rdesc\", 0400,\n\t\t\thdev->debug_dir, hdev, &hid_debug_rdesc_fops);\n\thdev->debug_events = debugfs_create_file(\"events\", 0400,\n\t\t\thdev->debug_dir, hdev, &hid_debug_events_fops);\n\thdev->debug = 1;\n}\n\nvoid hid_debug_unregister(struct hid_device *hdev)\n{\n\thdev->debug = 0;\n\twake_up_interruptible(&hdev->debug_wait);\n\tdebugfs_remove(hdev->debug_rdesc);\n\tdebugfs_remove(hdev->debug_events);\n\tdebugfs_remove(hdev->debug_dir);\n}\n\nvoid hid_debug_init(void)\n{\n\thid_debug_root = debugfs_create_dir(\"hid\", NULL);\n}\n\nvoid hid_debug_exit(void)\n{\n\tdebugfs_remove_recursive(hid_debug_root);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}