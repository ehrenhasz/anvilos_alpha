{
  "module_name": "cpufreq-dt-platdev.c",
  "hash_id": "65fee14e9fd1b77550736c85abf9a6c117368f64fa451bfac03e615ea871223d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/cpufreq/cpufreq-dt-platdev.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n\n#include \"cpufreq-dt.h\"\n\n \nstatic const struct of_device_id allowlist[] __initconst = {\n\t{ .compatible = \"allwinner,sun4i-a10\", },\n\t{ .compatible = \"allwinner,sun5i-a10s\", },\n\t{ .compatible = \"allwinner,sun5i-a13\", },\n\t{ .compatible = \"allwinner,sun5i-r8\", },\n\t{ .compatible = \"allwinner,sun6i-a31\", },\n\t{ .compatible = \"allwinner,sun6i-a31s\", },\n\t{ .compatible = \"allwinner,sun7i-a20\", },\n\t{ .compatible = \"allwinner,sun8i-a23\", },\n\t{ .compatible = \"allwinner,sun8i-a83t\", },\n\t{ .compatible = \"allwinner,sun8i-h3\", },\n\n\t{ .compatible = \"apm,xgene-shadowcat\", },\n\n\t{ .compatible = \"arm,integrator-ap\", },\n\t{ .compatible = \"arm,integrator-cp\", },\n\n\t{ .compatible = \"hisilicon,hi3660\", },\n\n\t{ .compatible = \"fsl,imx27\", },\n\t{ .compatible = \"fsl,imx51\", },\n\t{ .compatible = \"fsl,imx53\", },\n\n\t{ .compatible = \"marvell,berlin\", },\n\t{ .compatible = \"marvell,pxa250\", },\n\t{ .compatible = \"marvell,pxa270\", },\n\n\t{ .compatible = \"samsung,exynos3250\", },\n\t{ .compatible = \"samsung,exynos4210\", },\n\t{ .compatible = \"samsung,exynos5250\", },\n#ifndef CONFIG_BL_SWITCHER\n\t{ .compatible = \"samsung,exynos5800\", },\n#endif\n\n\t{ .compatible = \"renesas,emev2\", },\n\t{ .compatible = \"renesas,r7s72100\", },\n\t{ .compatible = \"renesas,r8a73a4\", },\n\t{ .compatible = \"renesas,r8a7740\", },\n\t{ .compatible = \"renesas,r8a7742\", },\n\t{ .compatible = \"renesas,r8a7743\", },\n\t{ .compatible = \"renesas,r8a7744\", },\n\t{ .compatible = \"renesas,r8a7745\", },\n\t{ .compatible = \"renesas,r8a7778\", },\n\t{ .compatible = \"renesas,r8a7779\", },\n\t{ .compatible = \"renesas,r8a7790\", },\n\t{ .compatible = \"renesas,r8a7791\", },\n\t{ .compatible = \"renesas,r8a7792\", },\n\t{ .compatible = \"renesas,r8a7793\", },\n\t{ .compatible = \"renesas,r8a7794\", },\n\t{ .compatible = \"renesas,sh73a0\", },\n\n\t{ .compatible = \"rockchip,rk2928\", },\n\t{ .compatible = \"rockchip,rk3036\", },\n\t{ .compatible = \"rockchip,rk3066a\", },\n\t{ .compatible = \"rockchip,rk3066b\", },\n\t{ .compatible = \"rockchip,rk3188\", },\n\t{ .compatible = \"rockchip,rk3228\", },\n\t{ .compatible = \"rockchip,rk3288\", },\n\t{ .compatible = \"rockchip,rk3328\", },\n\t{ .compatible = \"rockchip,rk3366\", },\n\t{ .compatible = \"rockchip,rk3368\", },\n\t{ .compatible = \"rockchip,rk3399\",\n\t  .data = &(struct cpufreq_dt_platform_data)\n\t\t{ .have_governor_per_policy = true, },\n\t},\n\n\t{ .compatible = \"st-ericsson,u8500\", },\n\t{ .compatible = \"st-ericsson,u8540\", },\n\t{ .compatible = \"st-ericsson,u9500\", },\n\t{ .compatible = \"st-ericsson,u9540\", },\n\n\t{ .compatible = \"starfive,jh7110\", },\n\n\t{ .compatible = \"ti,omap2\", },\n\t{ .compatible = \"ti,omap4\", },\n\t{ .compatible = \"ti,omap5\", },\n\n\t{ .compatible = \"xlnx,zynq-7000\", },\n\t{ .compatible = \"xlnx,zynqmp\", },\n\n\t{ }\n};\n\n \nstatic const struct of_device_id blocklist[] __initconst = {\n\t{ .compatible = \"allwinner,sun50i-h6\", },\n\n\t{ .compatible = \"apple,arm-platform\", },\n\n\t{ .compatible = \"arm,vexpress\", },\n\n\t{ .compatible = \"calxeda,highbank\", },\n\t{ .compatible = \"calxeda,ecx-2000\", },\n\n\t{ .compatible = \"fsl,imx7ulp\", },\n\t{ .compatible = \"fsl,imx7d\", },\n\t{ .compatible = \"fsl,imx7s\", },\n\t{ .compatible = \"fsl,imx8mq\", },\n\t{ .compatible = \"fsl,imx8mm\", },\n\t{ .compatible = \"fsl,imx8mn\", },\n\t{ .compatible = \"fsl,imx8mp\", },\n\n\t{ .compatible = \"marvell,armadaxp\", },\n\n\t{ .compatible = \"mediatek,mt2701\", },\n\t{ .compatible = \"mediatek,mt2712\", },\n\t{ .compatible = \"mediatek,mt7622\", },\n\t{ .compatible = \"mediatek,mt7623\", },\n\t{ .compatible = \"mediatek,mt8167\", },\n\t{ .compatible = \"mediatek,mt817x\", },\n\t{ .compatible = \"mediatek,mt8173\", },\n\t{ .compatible = \"mediatek,mt8176\", },\n\t{ .compatible = \"mediatek,mt8183\", },\n\t{ .compatible = \"mediatek,mt8186\", },\n\t{ .compatible = \"mediatek,mt8365\", },\n\t{ .compatible = \"mediatek,mt8516\", },\n\n\t{ .compatible = \"nvidia,tegra20\", },\n\t{ .compatible = \"nvidia,tegra30\", },\n\t{ .compatible = \"nvidia,tegra124\", },\n\t{ .compatible = \"nvidia,tegra210\", },\n\t{ .compatible = \"nvidia,tegra234\", },\n\n\t{ .compatible = \"qcom,apq8096\", },\n\t{ .compatible = \"qcom,msm8996\", },\n\t{ .compatible = \"qcom,msm8998\", },\n\t{ .compatible = \"qcom,qcm2290\", },\n\t{ .compatible = \"qcom,qcs404\", },\n\t{ .compatible = \"qcom,qdu1000\", },\n\t{ .compatible = \"qcom,sa8155p\" },\n\t{ .compatible = \"qcom,sa8540p\" },\n\t{ .compatible = \"qcom,sa8775p\" },\n\t{ .compatible = \"qcom,sc7180\", },\n\t{ .compatible = \"qcom,sc7280\", },\n\t{ .compatible = \"qcom,sc8180x\", },\n\t{ .compatible = \"qcom,sc8280xp\", },\n\t{ .compatible = \"qcom,sdm845\", },\n\t{ .compatible = \"qcom,sdx75\", },\n\t{ .compatible = \"qcom,sm6115\", },\n\t{ .compatible = \"qcom,sm6350\", },\n\t{ .compatible = \"qcom,sm6375\", },\n\t{ .compatible = \"qcom,sm7225\", },\n\t{ .compatible = \"qcom,sm8150\", },\n\t{ .compatible = \"qcom,sm8250\", },\n\t{ .compatible = \"qcom,sm8350\", },\n\t{ .compatible = \"qcom,sm8450\", },\n\t{ .compatible = \"qcom,sm8550\", },\n\n\t{ .compatible = \"st,stih407\", },\n\t{ .compatible = \"st,stih410\", },\n\t{ .compatible = \"st,stih418\", },\n\n\t{ .compatible = \"ti,am33xx\", },\n\t{ .compatible = \"ti,am43\", },\n\t{ .compatible = \"ti,dra7\", },\n\t{ .compatible = \"ti,omap3\", },\n\t{ .compatible = \"ti,am625\", },\n\t{ .compatible = \"ti,am62a7\", },\n\n\t{ .compatible = \"qcom,ipq8064\", },\n\t{ .compatible = \"qcom,apq8064\", },\n\t{ .compatible = \"qcom,msm8974\", },\n\t{ .compatible = \"qcom,msm8960\", },\n\n\t{ }\n};\n\nstatic bool __init cpu0_node_has_opp_v2_prop(void)\n{\n\tstruct device_node *np = of_cpu_device_node_get(0);\n\tbool ret = false;\n\n\tif (of_property_present(np, \"operating-points-v2\"))\n\t\tret = true;\n\n\tof_node_put(np);\n\treturn ret;\n}\n\nstatic int __init cpufreq_dt_platdev_init(void)\n{\n\tstruct device_node *np = of_find_node_by_path(\"/\");\n\tconst struct of_device_id *match;\n\tconst void *data = NULL;\n\n\tif (!np)\n\t\treturn -ENODEV;\n\n\tmatch = of_match_node(allowlist, np);\n\tif (match) {\n\t\tdata = match->data;\n\t\tgoto create_pdev;\n\t}\n\n\tif (cpu0_node_has_opp_v2_prop() && !of_match_node(blocklist, np))\n\t\tgoto create_pdev;\n\n\tof_node_put(np);\n\treturn -ENODEV;\n\ncreate_pdev:\n\tof_node_put(np);\n\treturn PTR_ERR_OR_ZERO(platform_device_register_data(NULL, \"cpufreq-dt\",\n\t\t\t       -1, data,\n\t\t\t       sizeof(struct cpufreq_dt_platform_data)));\n}\ncore_initcall(cpufreq_dt_platdev_init);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}