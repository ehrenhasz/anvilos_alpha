{
  "module_name": "macio_sysfs.c",
  "hash_id": "d3fc583e86f85433365a12f1bb06262237e70533b8d3cab9da50f506ba5a774d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/macintosh/macio_sysfs.c",
  "human_readable_source": "\n#include <linux/kernel.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/stat.h>\n#include <asm/macio.h>\n\nstatic ssize_t\ncompatible_show (struct device *dev, struct device_attribute *attr, char *buf)\n{\n\tstruct platform_device *of;\n\tconst char *compat;\n\tint cplen;\n\tint length = 0;\n\n\tof = &to_macio_device (dev)->ofdev;\n\tcompat = of_get_property(of->dev.of_node, \"compatible\", &cplen);\n\tif (!compat) {\n\t\t*buf = '\\0';\n\t\treturn 0;\n\t}\n\twhile (cplen > 0) {\n\t\tint l;\n\t\tlength += sprintf (buf, \"%s\\n\", compat);\n\t\tbuf += length;\n\t\tl = strlen (compat) + 1;\n\t\tcompat += l;\n\t\tcplen -= l;\n\t}\n\n\treturn length;\n}\nstatic DEVICE_ATTR_RO(compatible);\n\nstatic ssize_t modalias_show (struct device *dev, struct device_attribute *attr,\n\t\t\t      char *buf)\n{\n\treturn of_device_modalias(dev, buf, PAGE_SIZE);\n}\n\nstatic ssize_t devspec_show(struct device *dev,\n\t\t\t\tstruct device_attribute *attr, char *buf)\n{\n\tstruct platform_device *ofdev;\n\n\tofdev = to_platform_device(dev);\n\treturn sprintf(buf, \"%pOF\\n\", ofdev->dev.of_node);\n}\nstatic DEVICE_ATTR_RO(modalias);\nstatic DEVICE_ATTR_RO(devspec);\n\nstatic ssize_t name_show(struct device *dev,\n\t\t\t struct device_attribute *attr, char *buf)\n{\n\treturn sprintf(buf, \"%pOFn\\n\", dev->of_node);\n}\nstatic DEVICE_ATTR_RO(name);\n\nstatic ssize_t type_show(struct device *dev,\n\t\t\t struct device_attribute *attr, char *buf)\n{\n\treturn sprintf(buf, \"%s\\n\", of_node_get_device_type(dev->of_node));\n}\nstatic DEVICE_ATTR_RO(type);\n\nstatic struct attribute *macio_dev_attrs[] = {\n\t&dev_attr_name.attr,\n\t&dev_attr_type.attr,\n\t&dev_attr_compatible.attr,\n\t&dev_attr_modalias.attr,\n\t&dev_attr_devspec.attr,\n\tNULL,\n};\n\nstatic const struct attribute_group macio_dev_group = {\n\t.attrs = macio_dev_attrs,\n};\n\nconst struct attribute_group *macio_dev_groups[] = {\n\t&macio_dev_group,\n\tNULL,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}