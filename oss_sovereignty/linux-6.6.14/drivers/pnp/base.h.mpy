{
  "module_name": "base.h",
  "hash_id": "6aaa42d58e0a5b29f9de3579291e3e521f4122b329517d5686ce0e8619322030",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pnp/base.h",
  "human_readable_source": " \n \n\nextern struct mutex pnp_lock;\nextern const struct attribute_group *pnp_dev_groups[];\n\nint pnp_register_protocol(struct pnp_protocol *protocol);\nvoid pnp_unregister_protocol(struct pnp_protocol *protocol);\n\n#define PNP_EISA_ID_MASK 0x7fffffff\nvoid pnp_eisa_id_to_string(u32 id, char *str);\nstruct pnp_dev *pnp_alloc_dev(struct pnp_protocol *, int id,\n\t\t\t      const char *pnpid);\nstruct pnp_card *pnp_alloc_card(struct pnp_protocol *, int id, char *pnpid);\n\nint pnp_add_device(struct pnp_dev *dev);\nstruct pnp_id *pnp_add_id(struct pnp_dev *dev, const char *id);\n\nint pnp_add_card(struct pnp_card *card);\nvoid pnp_remove_card(struct pnp_card *card);\nint pnp_add_card_device(struct pnp_card *card, struct pnp_dev *dev);\nvoid pnp_remove_card_device(struct pnp_dev *dev);\n\nstruct pnp_port {\n\tresource_size_t min;\t \n\tresource_size_t max;\t \n\tresource_size_t align;\t \n\tresource_size_t size;\t \n\tunsigned char flags;\t \n};\n\n#define PNP_IRQ_NR 256\ntypedef struct { DECLARE_BITMAP(bits, PNP_IRQ_NR); } pnp_irq_mask_t;\n\nstruct pnp_irq {\n\tpnp_irq_mask_t map;\t \n\tunsigned char flags;\t \n};\n\nstruct pnp_dma {\n\tunsigned char map;\t \n\tunsigned char flags;\t \n};\n\nstruct pnp_mem {\n\tresource_size_t min;\t \n\tresource_size_t max;\t \n\tresource_size_t align;\t \n\tresource_size_t size;\t \n\tunsigned char flags;\t \n};\n\n#define PNP_OPTION_DEPENDENT\t\t0x80000000\n#define PNP_OPTION_SET_MASK\t\t0xffff\n#define PNP_OPTION_SET_SHIFT\t\t12\n#define PNP_OPTION_PRIORITY_MASK\t0xfff\n#define PNP_OPTION_PRIORITY_SHIFT\t0\n\n#define PNP_RES_PRIORITY_PREFERRED\t0\n#define PNP_RES_PRIORITY_ACCEPTABLE\t1\n#define PNP_RES_PRIORITY_FUNCTIONAL\t2\n#define PNP_RES_PRIORITY_INVALID\tPNP_OPTION_PRIORITY_MASK\n\nstruct pnp_option {\n\tstruct list_head list;\n\tunsigned int flags;\t \n\n\tunsigned long type;\t \n\tunion {\n\t\tstruct pnp_port port;\n\t\tstruct pnp_irq irq;\n\t\tstruct pnp_dma dma;\n\t\tstruct pnp_mem mem;\n\t} u;\n};\n\nint pnp_register_irq_resource(struct pnp_dev *dev, unsigned int option_flags,\n\t\t\t      pnp_irq_mask_t *map, unsigned char flags);\nint pnp_register_dma_resource(struct pnp_dev *dev, unsigned int option_flags,\n\t\t\t      unsigned char map, unsigned char flags);\nint pnp_register_port_resource(struct pnp_dev *dev, unsigned int option_flags,\n\t\t\t       resource_size_t min, resource_size_t max,\n\t\t\t       resource_size_t align, resource_size_t size,\n\t\t\t       unsigned char flags);\nint pnp_register_mem_resource(struct pnp_dev *dev, unsigned int option_flags,\n\t\t\t      resource_size_t min, resource_size_t max,\n\t\t\t      resource_size_t align, resource_size_t size,\n\t\t\t      unsigned char flags);\n\nstatic inline int pnp_option_is_dependent(struct pnp_option *option)\n{\n\treturn option->flags & PNP_OPTION_DEPENDENT ? 1 : 0;\n}\n\nstatic inline unsigned int pnp_option_set(struct pnp_option *option)\n{\n\treturn (option->flags >> PNP_OPTION_SET_SHIFT) & PNP_OPTION_SET_MASK;\n}\n\nstatic inline unsigned int pnp_option_priority(struct pnp_option *option)\n{\n\treturn (option->flags >> PNP_OPTION_PRIORITY_SHIFT) &\n\t    PNP_OPTION_PRIORITY_MASK;\n}\n\nstatic inline unsigned int pnp_new_dependent_set(struct pnp_dev *dev,\n\t\t\t\t\t\t int priority)\n{\n\tunsigned int flags;\n\n\tif (priority > PNP_RES_PRIORITY_FUNCTIONAL) {\n\t\tdev_warn(&dev->dev, \"invalid dependent option priority %d \"\n\t\t\t \"clipped to %d\", priority,\n\t\t\t PNP_RES_PRIORITY_INVALID);\n\t\tpriority = PNP_RES_PRIORITY_INVALID;\n\t}\n\n\tflags = PNP_OPTION_DEPENDENT |\n\t    ((dev->num_dependent_sets & PNP_OPTION_SET_MASK) <<\n\t\tPNP_OPTION_SET_SHIFT) |\n\t    ((priority & PNP_OPTION_PRIORITY_MASK) <<\n\t\tPNP_OPTION_PRIORITY_SHIFT);\n\n\tdev->num_dependent_sets++;\n\n\treturn flags;\n}\n\nchar *pnp_option_priority_name(struct pnp_option *option);\nvoid dbg_pnp_show_option(struct pnp_dev *dev, struct pnp_option *option);\n\nvoid pnp_init_resources(struct pnp_dev *dev);\n\nvoid pnp_fixup_device(struct pnp_dev *dev);\nvoid pnp_free_options(struct pnp_dev *dev);\nint __pnp_add_device(struct pnp_dev *dev);\nvoid __pnp_remove_device(struct pnp_dev *dev);\n\nint pnp_check_port(struct pnp_dev *dev, struct resource *res);\nint pnp_check_mem(struct pnp_dev *dev, struct resource *res);\nint pnp_check_irq(struct pnp_dev *dev, struct resource *res);\n#ifdef CONFIG_ISA_DMA_API\nint pnp_check_dma(struct pnp_dev *dev, struct resource *res);\n#endif\n\nchar *pnp_resource_type_name(struct resource *res);\nvoid dbg_pnp_show_resources(struct pnp_dev *dev, char *desc);\n\nvoid pnp_free_resources(struct pnp_dev *dev);\nunsigned long pnp_resource_type(struct resource *res);\n\nstruct pnp_resource {\n\tstruct list_head list;\n\tstruct resource res;\n};\n\nvoid pnp_free_resource(struct pnp_resource *pnp_res);\n\nstruct pnp_resource *pnp_add_resource(struct pnp_dev *dev,\n\t\t\t\t      struct resource *res);\nstruct pnp_resource *pnp_add_irq_resource(struct pnp_dev *dev, int irq,\n\t\t\t\t\t  int flags);\nstruct pnp_resource *pnp_add_dma_resource(struct pnp_dev *dev, int dma,\n\t\t\t\t\t  int flags);\nstruct pnp_resource *pnp_add_io_resource(struct pnp_dev *dev,\n\t\t\t\t\t resource_size_t start,\n\t\t\t\t\t resource_size_t end, int flags);\nstruct pnp_resource *pnp_add_mem_resource(struct pnp_dev *dev,\n\t\t\t\t\t  resource_size_t start,\n\t\t\t\t\t  resource_size_t end, int flags);\nstruct pnp_resource *pnp_add_bus_resource(struct pnp_dev *dev,\n\t\t\t\t\t  resource_size_t start,\n\t\t\t\t\t  resource_size_t end);\n\nextern int pnp_debug;\n\n#if defined(CONFIG_PNP_DEBUG_MESSAGES)\n#define pnp_dbg(dev, format, arg...)\t\t\t\t\t\\\n\t({ if (pnp_debug) dev_printk(KERN_DEBUG, dev, format, ## arg); 0; })\n#else\n#define pnp_dbg(dev, format, arg...)\t\t\t\t\t\\\n\t({ if (0) dev_printk(KERN_DEBUG, dev, format, ## arg); 0; })\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}