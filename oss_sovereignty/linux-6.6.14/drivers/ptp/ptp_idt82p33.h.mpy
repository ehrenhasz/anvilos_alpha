{
  "module_name": "ptp_idt82p33.h",
  "hash_id": "b1e51bce0a5e747f4cb45a2675939563ab503ba444886da60a425b9698325efd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/ptp/ptp_idt82p33.h",
  "human_readable_source": " \n \n#ifndef PTP_IDT82P33_H\n#define PTP_IDT82P33_H\n\n#include <linux/ktime.h>\n#include <linux/mfd/idt82p33_reg.h>\n#include <linux/regmap.h>\n\n#define FW_FILENAME\t\"idt82p33xxx.bin\"\n#define MAX_PHC_PLL\t(2)\n#define MAX_TRIG_CLK\t(3)\n#define MAX_PER_OUT\t(11)\n#define TOD_BYTE_COUNT\t(10)\n#define DCO_MAX_PPB     (92000)\n#define MAX_MEASURMENT_COUNT\t(5)\n#define SNAP_THRESHOLD_NS\t(10000)\n#define IMMEDIATE_SNAP_THRESHOLD_NS (50000)\n#define DDCO_THRESHOLD_NS\t(5)\n#define IDT82P33_MAX_WRITE_COUNT\t(512)\n\n#define PLLMASK_ADDR_HI\t0xFF\n#define PLLMASK_ADDR_LO\t0xA5\n\n#define PLL0_OUTMASK_ADDR_HI\t0xFF\n#define PLL0_OUTMASK_ADDR_LO\t0xB0\n\n#define PLL1_OUTMASK_ADDR_HI\t0xFF\n#define PLL1_OUTMASK_ADDR_LO\t0xB2\n\n#define PLL2_OUTMASK_ADDR_HI\t0xFF\n#define PLL2_OUTMASK_ADDR_LO\t0xB4\n\n#define PLL3_OUTMASK_ADDR_HI\t0xFF\n#define PLL3_OUTMASK_ADDR_LO\t0xB6\n\n#define DEFAULT_PLL_MASK\t(0x01)\n#define DEFAULT_OUTPUT_MASK_PLL0\t(0xc0)\n#define DEFAULT_OUTPUT_MASK_PLL1\tDEFAULT_OUTPUT_MASK_PLL0\n\n \n#define WRITE_PHASE_OFFSET_LIMIT (20000l)\n\n \n#define IDT_T0DPLL_PHASE_RESOL 74506\n\n \nstruct idt82p33_channel {\n\tstruct ptp_clock_info\tcaps;\n\tstruct ptp_clock\t*ptp_clock;\n\tstruct idt82p33\t\t*idt82p33;\n\tenum pll_mode\t\tpll_mode;\n\t \n\tstruct delayed_work\tadjtime_work;\n\ts32\t\t\tcurrent_freq;\n\t \n\tbool\t\t\tddco;\n\tu8\t\t\toutput_mask;\n\t \n\tu8\t\t\ttod_trigger;\n\tbool\t\t\tdiscard_next_extts;\n\tu8\t\t\tplln;\n\t \n\tu8\t\t\textts_tod_sts[TOD_BYTE_COUNT];\n\tu16\t\t\tdpll_tod_cnfg;\n\tu16\t\t\tdpll_tod_trigger;\n\tu16\t\t\tdpll_tod_sts;\n\tu16\t\t\tdpll_mode_cnfg;\n\tu16\t\t\tdpll_freq_cnfg;\n\tu16\t\t\tdpll_phase_cnfg;\n\tu16\t\t\tdpll_sync_cnfg;\n\tu16\t\t\tdpll_input_mode_cnfg;\n};\n\nstruct idt82p33 {\n\tstruct idt82p33_channel\tchannel[MAX_PHC_PLL];\n\tstruct device\t\t*dev;\n\tu8\t\t\tpll_mask;\n\t \n\tu8\t\t\textts_mask;\n\tbool\t\t\textts_single_shot;\n\tstruct delayed_work\textts_work;\n\t \n\tstruct idt82p33_channel\t*event_channel[MAX_PHC_PLL];\n\t \n\tstruct mutex\t\t*lock;\n\tstruct regmap\t\t*regmap;\n\tstruct device\t\t*mfd;\n\t \n\tktime_t\t\t\tstart_time;\n\tint\t\t\tcalculate_overhead_flag;\n\ts64\t\t\ttod_write_overhead_ns;\n};\n\n \nstruct idt82p33_fwrc {\n\tu8 hiaddr;\n\tu8 loaddr;\n\tu8 value;\n\tu8 reserved;\n} __packed;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}