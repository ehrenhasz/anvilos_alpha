{
  "module_name": "dm-verity-fec.h",
  "hash_id": "b8dda2ed4ebc95105dcb8a1d08edcf57c03fad6f3a90472ad912f2faaffe17d8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/dm-verity-fec.h",
  "human_readable_source": " \n \n\n#ifndef DM_VERITY_FEC_H\n#define DM_VERITY_FEC_H\n\n#include \"dm-verity.h\"\n#include <linux/rslib.h>\n\n \n#define DM_VERITY_FEC_RSM\t\t255\n#define DM_VERITY_FEC_MAX_RSN\t\t253\n#define DM_VERITY_FEC_MIN_RSN\t\t231\t \n\n \n#define DM_VERITY_FEC_BUF_PREALLOC\t1\t \n#define DM_VERITY_FEC_BUF_RS_BITS\t4\t \n \n#define DM_VERITY_FEC_BUF_MAX \\\n\t(1 << (PAGE_SHIFT - DM_VERITY_FEC_BUF_RS_BITS))\n\n \n#define DM_VERITY_FEC_MAX_RECURSION\t4\n\n#define DM_VERITY_OPT_FEC_DEV\t\t\"use_fec_from_device\"\n#define DM_VERITY_OPT_FEC_BLOCKS\t\"fec_blocks\"\n#define DM_VERITY_OPT_FEC_START\t\t\"fec_start\"\n#define DM_VERITY_OPT_FEC_ROOTS\t\t\"fec_roots\"\n\n \nstruct dm_verity_fec {\n\tstruct dm_dev *dev;\t \n\tstruct dm_bufio_client *data_bufio;\t \n\tstruct dm_bufio_client *bufio;\t\t \n\tsize_t io_size;\t\t \n\tsector_t start;\t\t \n\tsector_t blocks;\t \n\tsector_t rounds;\t \n\tsector_t hash_blocks;\t \n\tunsigned char roots;\t \n\tunsigned char rsn;\t \n\tmempool_t rs_pool;\t \n\tmempool_t prealloc_pool;\t \n\tmempool_t extra_pool;\t \n\tmempool_t output_pool;\t \n\tstruct kmem_cache *cache;\t \n};\n\n \nstruct dm_verity_fec_io {\n\tstruct rs_control *rs;\t \n\tint erasures[DM_VERITY_FEC_MAX_RSN];\t \n\tu8 *bufs[DM_VERITY_FEC_BUF_MAX];\t \n\tunsigned int nbufs;\t\t \n\tu8 *output;\t\t \n\tsize_t output_pos;\n\tunsigned int level;\t\t \n};\n\n#ifdef CONFIG_DM_VERITY_FEC\n\n \n#define DM_VERITY_OPTS_FEC\t8\n\nextern bool verity_fec_is_enabled(struct dm_verity *v);\n\nextern int verity_fec_decode(struct dm_verity *v, struct dm_verity_io *io,\n\t\t\t     enum verity_block_type type, sector_t block,\n\t\t\t     u8 *dest, struct bvec_iter *iter);\n\nextern unsigned int verity_fec_status_table(struct dm_verity *v, unsigned int sz,\n\t\t\t\t\tchar *result, unsigned int maxlen);\n\nextern void verity_fec_finish_io(struct dm_verity_io *io);\nextern void verity_fec_init_io(struct dm_verity_io *io);\n\nextern bool verity_is_fec_opt_arg(const char *arg_name);\nextern int verity_fec_parse_opt_args(struct dm_arg_set *as,\n\t\t\t\t     struct dm_verity *v, unsigned int *argc,\n\t\t\t\t     const char *arg_name);\n\nextern void verity_fec_dtr(struct dm_verity *v);\n\nextern int verity_fec_ctr_alloc(struct dm_verity *v);\nextern int verity_fec_ctr(struct dm_verity *v);\n\n#else  \n\n#define DM_VERITY_OPTS_FEC\t0\n\nstatic inline bool verity_fec_is_enabled(struct dm_verity *v)\n{\n\treturn false;\n}\n\nstatic inline int verity_fec_decode(struct dm_verity *v,\n\t\t\t\t    struct dm_verity_io *io,\n\t\t\t\t    enum verity_block_type type,\n\t\t\t\t    sector_t block, u8 *dest,\n\t\t\t\t    struct bvec_iter *iter)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline unsigned int verity_fec_status_table(struct dm_verity *v,\n\t\t\t\t\t       unsigned int sz, char *result,\n\t\t\t\t\t       unsigned int maxlen)\n{\n\treturn sz;\n}\n\nstatic inline void verity_fec_finish_io(struct dm_verity_io *io)\n{\n}\n\nstatic inline void verity_fec_init_io(struct dm_verity_io *io)\n{\n}\n\nstatic inline bool verity_is_fec_opt_arg(const char *arg_name)\n{\n\treturn false;\n}\n\nstatic inline int verity_fec_parse_opt_args(struct dm_arg_set *as,\n\t\t\t\t\t    struct dm_verity *v,\n\t\t\t\t\t    unsigned int *argc,\n\t\t\t\t\t    const char *arg_name)\n{\n\treturn -EINVAL;\n}\n\nstatic inline void verity_fec_dtr(struct dm_verity *v)\n{\n}\n\nstatic inline int verity_fec_ctr_alloc(struct dm_verity *v)\n{\n\treturn 0;\n}\n\nstatic inline int verity_fec_ctr(struct dm_verity *v)\n{\n\treturn 0;\n}\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}