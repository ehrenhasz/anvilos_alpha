{
  "module_name": "dm-bio-prison-v2.h",
  "hash_id": "636da537e1b83d6a5a0c53c7c0dabe90e41abde2c82d62eca95441475d84ada0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/dm-bio-prison-v2.h",
  "human_readable_source": " \n \n\n#ifndef DM_BIO_PRISON_V2_H\n#define DM_BIO_PRISON_V2_H\n\n#include \"persistent-data/dm-block-manager.h\"  \n#include \"dm-thin-metadata.h\"  \n\n#include <linux/bio.h>\n#include <linux/rbtree.h>\n#include <linux/workqueue.h>\n\n \n\nint dm_bio_prison_init_v2(void);\nvoid dm_bio_prison_exit_v2(void);\n\n \nstruct dm_bio_prison_v2;\n\n \nstruct dm_cell_key_v2 {\n\tint virtual;\n\tdm_thin_id dev;\n\tdm_block_t block_begin, block_end;\n};\n\n \nstruct dm_bio_prison_cell_v2 {\n\t\n\tbool exclusive_lock;\n\tunsigned int exclusive_level;\n\tunsigned int shared_count;\n\tstruct work_struct *quiesce_continuation;\n\n\tstruct rb_node node;\n\tstruct dm_cell_key_v2 key;\n\tstruct bio_list bios;\n};\n\nstruct dm_bio_prison_v2 *dm_bio_prison_create_v2(struct workqueue_struct *wq);\nvoid dm_bio_prison_destroy_v2(struct dm_bio_prison_v2 *prison);\n\n \nstruct dm_bio_prison_cell_v2 *dm_bio_prison_alloc_cell_v2(struct dm_bio_prison_v2 *prison,\n\t\t\t\t\t\t    gfp_t gfp);\nvoid dm_bio_prison_free_cell_v2(struct dm_bio_prison_v2 *prison,\n\t\t\t\tstruct dm_bio_prison_cell_v2 *cell);\n\n \nbool dm_cell_get_v2(struct dm_bio_prison_v2 *prison,\n\t\t    struct dm_cell_key_v2 *key,\n\t\t    unsigned int lock_level,\n\t\t    struct bio *inmate,\n\t\t    struct dm_bio_prison_cell_v2 *cell_prealloc,\n\t\t    struct dm_bio_prison_cell_v2 **cell_result);\n\n \nbool dm_cell_put_v2(struct dm_bio_prison_v2 *prison,\n\t\t    struct dm_bio_prison_cell_v2 *cell);\n\n \nint dm_cell_lock_v2(struct dm_bio_prison_v2 *prison,\n\t\t    struct dm_cell_key_v2 *key,\n\t\t    unsigned int lock_level,\n\t\t    struct dm_bio_prison_cell_v2 *cell_prealloc,\n\t\t    struct dm_bio_prison_cell_v2 **cell_result);\n\nvoid dm_cell_quiesce_v2(struct dm_bio_prison_v2 *prison,\n\t\t\tstruct dm_bio_prison_cell_v2 *cell,\n\t\t\tstruct work_struct *continuation);\n\n \nint dm_cell_lock_promote_v2(struct dm_bio_prison_v2 *prison,\n\t\t\t    struct dm_bio_prison_cell_v2 *cell,\n\t\t\t    unsigned int new_lock_level);\n\n \nbool dm_cell_unlock_v2(struct dm_bio_prison_v2 *prison,\n\t\t       struct dm_bio_prison_cell_v2 *cell,\n\t\t       struct bio_list *bios);\n\n \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}