{
  "module_name": "dm-cache-metadata.h",
  "hash_id": "ddbf3669534e6d063f966d52db1b0a487333f24a34f819c3ee4610f267189b64",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/dm-cache-metadata.h",
  "human_readable_source": " \n \n\n#ifndef DM_CACHE_METADATA_H\n#define DM_CACHE_METADATA_H\n\n#include \"dm-cache-block-types.h\"\n#include \"dm-cache-policy-internal.h\"\n#include \"persistent-data/dm-space-map-metadata.h\"\n\n \n\n#define DM_CACHE_METADATA_BLOCK_SIZE DM_SM_METADATA_BLOCK_SIZE\n\n \n \n#define DM_CACHE_METADATA_MAX_SECTORS DM_SM_METADATA_MAX_SECTORS\n\n \n#define DM_CACHE_METADATA_MAX_SECTORS_WARNING (16 * (1024 * 1024 * 1024 >> SECTOR_SHIFT))\n\n \n\n \n\n#define DM_CACHE_FEATURE_COMPAT_SUPP\t  0UL\n#define DM_CACHE_FEATURE_COMPAT_RO_SUPP\t  0UL\n#define DM_CACHE_FEATURE_INCOMPAT_SUPP\t  0UL\n\nstruct dm_cache_metadata;\n\n \nstruct dm_cache_metadata *dm_cache_metadata_open(struct block_device *bdev,\n\t\t\t\t\t\t sector_t data_block_size,\n\t\t\t\t\t\t bool may_format_device,\n\t\t\t\t\t\t size_t policy_hint_size,\n\t\t\t\t\t\t unsigned int metadata_version);\n\nvoid dm_cache_metadata_close(struct dm_cache_metadata *cmd);\n\n \nint dm_cache_resize(struct dm_cache_metadata *cmd, dm_cblock_t new_cache_size);\nint dm_cache_size(struct dm_cache_metadata *cmd, dm_cblock_t *result);\n\nint dm_cache_discard_bitset_resize(struct dm_cache_metadata *cmd,\n\t\t\t\t   sector_t discard_block_size,\n\t\t\t\t   dm_dblock_t new_nr_entries);\n\ntypedef int (*load_discard_fn)(void *context, sector_t discard_block_size,\n\t\t\t       dm_dblock_t dblock, bool discarded);\nint dm_cache_load_discards(struct dm_cache_metadata *cmd,\n\t\t\t   load_discard_fn fn, void *context);\n\nint dm_cache_set_discard(struct dm_cache_metadata *cmd, dm_dblock_t dblock, bool discard);\n\nint dm_cache_remove_mapping(struct dm_cache_metadata *cmd, dm_cblock_t cblock);\nint dm_cache_insert_mapping(struct dm_cache_metadata *cmd, dm_cblock_t cblock, dm_oblock_t oblock);\nint dm_cache_changed_this_transaction(struct dm_cache_metadata *cmd);\n\ntypedef int (*load_mapping_fn)(void *context, dm_oblock_t oblock,\n\t\t\t       dm_cblock_t cblock, bool dirty,\n\t\t\t       uint32_t hint, bool hint_valid);\nint dm_cache_load_mappings(struct dm_cache_metadata *cmd,\n\t\t\t   struct dm_cache_policy *policy,\n\t\t\t   load_mapping_fn fn,\n\t\t\t   void *context);\n\nint dm_cache_set_dirty_bits(struct dm_cache_metadata *cmd,\n\t\t\t    unsigned int nr_bits, unsigned long *bits);\n\nstruct dm_cache_statistics {\n\tuint32_t read_hits;\n\tuint32_t read_misses;\n\tuint32_t write_hits;\n\tuint32_t write_misses;\n};\n\nvoid dm_cache_metadata_get_stats(struct dm_cache_metadata *cmd,\n\t\t\t\t struct dm_cache_statistics *stats);\n\n \nvoid dm_cache_metadata_set_stats(struct dm_cache_metadata *cmd,\n\t\t\t\t struct dm_cache_statistics *stats);\n\nint dm_cache_commit(struct dm_cache_metadata *cmd, bool clean_shutdown);\n\nint dm_cache_get_free_metadata_block_count(struct dm_cache_metadata *cmd,\n\t\t\t\t\t   dm_block_t *result);\n\nint dm_cache_get_metadata_dev_size(struct dm_cache_metadata *cmd,\n\t\t\t\t   dm_block_t *result);\n\nvoid dm_cache_dump(struct dm_cache_metadata *cmd);\n\n \nint dm_cache_write_hints(struct dm_cache_metadata *cmd, struct dm_cache_policy *p);\n\n \nint dm_cache_metadata_all_clean(struct dm_cache_metadata *cmd, bool *result);\n\nint dm_cache_metadata_needs_check(struct dm_cache_metadata *cmd, bool *result);\nint dm_cache_metadata_set_needs_check(struct dm_cache_metadata *cmd);\nvoid dm_cache_metadata_set_read_only(struct dm_cache_metadata *cmd);\nvoid dm_cache_metadata_set_read_write(struct dm_cache_metadata *cmd);\nint dm_cache_metadata_abort(struct dm_cache_metadata *cmd);\n\n \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}