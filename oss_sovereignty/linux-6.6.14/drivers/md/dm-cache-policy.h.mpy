{
  "module_name": "dm-cache-policy.h",
  "hash_id": "26e9c5f7603680db46a43b6f7795a398af5d811c578c9e3b43912cc915495790",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/dm-cache-policy.h",
  "human_readable_source": " \n \n\n#ifndef DM_CACHE_POLICY_H\n#define DM_CACHE_POLICY_H\n\n#include \"dm-cache-block-types.h\"\n\n#include <linux/device-mapper.h>\n\n \n\n \nenum policy_operation {\n\tPOLICY_PROMOTE,\n\tPOLICY_DEMOTE,\n\tPOLICY_WRITEBACK\n};\n\n \nstruct policy_work {\n\tenum policy_operation op;\n\tdm_oblock_t oblock;\n\tdm_cblock_t cblock;\n};\n\n \nstruct dm_cache_policy {\n\t \n\tvoid (*destroy)(struct dm_cache_policy *p);\n\n\t \n\tint (*lookup)(struct dm_cache_policy *p, dm_oblock_t oblock, dm_cblock_t *cblock,\n\t\t      int data_dir, bool fast_copy, bool *background_queued);\n\n\t \n\tint (*lookup_with_work)(struct dm_cache_policy *p,\n\t\t\t\tdm_oblock_t oblock, dm_cblock_t *cblock,\n\t\t\t\tint data_dir, bool fast_copy,\n\t\t\t\tstruct policy_work **work);\n\n\t \n\tint (*get_background_work)(struct dm_cache_policy *p, bool idle,\n\t\t\t\t   struct policy_work **result);\n\n\t \n\tvoid (*complete_background_work)(struct dm_cache_policy *p,\n\t\t\t\t\t struct policy_work *work,\n\t\t\t\t\t bool success);\n\n\tvoid (*set_dirty)(struct dm_cache_policy *p, dm_cblock_t cblock);\n\tvoid (*clear_dirty)(struct dm_cache_policy *p, dm_cblock_t cblock);\n\n\t \n\tint (*load_mapping)(struct dm_cache_policy *p, dm_oblock_t oblock,\n\t\t\t    dm_cblock_t cblock, bool dirty,\n\t\t\t    uint32_t hint, bool hint_valid);\n\n\t \n\tint (*invalidate_mapping)(struct dm_cache_policy *p, dm_cblock_t cblock);\n\n\t \n\tuint32_t (*get_hint)(struct dm_cache_policy *p, dm_cblock_t cblock);\n\n\t \n\tdm_cblock_t (*residency)(struct dm_cache_policy *p);\n\n\t \n\tvoid (*tick)(struct dm_cache_policy *p, bool can_block);\n\n\t \n\tint (*emit_config_values)(struct dm_cache_policy *p, char *result,\n\t\t\t\t  unsigned int maxlen, ssize_t *sz_ptr);\n\tint (*set_config_value)(struct dm_cache_policy *p,\n\t\t\t\tconst char *key, const char *value);\n\n\tvoid (*allow_migrations)(struct dm_cache_policy *p, bool allow);\n\n\t \n\tvoid *private;\n};\n\n \n\n \n#define CACHE_POLICY_NAME_SIZE 16\n#define CACHE_POLICY_VERSION_SIZE 3\n\nstruct dm_cache_policy_type {\n\t \n\tstruct list_head list;\n\n\t \n\tchar name[CACHE_POLICY_NAME_SIZE];\n\tunsigned int version[CACHE_POLICY_VERSION_SIZE];\n\n\t \n\tstruct dm_cache_policy_type *real;\n\n\t \n\tsize_t hint_size;\n\n\tstruct module *owner;\n\tstruct dm_cache_policy *(*create)(dm_cblock_t cache_size,\n\t\t\t\t\t  sector_t origin_size,\n\t\t\t\t\t  sector_t block_size);\n};\n\nint dm_cache_policy_register(struct dm_cache_policy_type *type);\nvoid dm_cache_policy_unregister(struct dm_cache_policy_type *type);\n\n \n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}