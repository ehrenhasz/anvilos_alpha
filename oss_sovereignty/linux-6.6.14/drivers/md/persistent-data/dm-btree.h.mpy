{
  "module_name": "dm-btree.h",
  "hash_id": "a41bdaf81c15bfa3fb7ceebe47070a79022748195ae04c2a5f21a40b97a35df7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/persistent-data/dm-btree.h",
  "human_readable_source": " \n \n#ifndef _LINUX_DM_BTREE_H\n#define _LINUX_DM_BTREE_H\n\n#include \"dm-block-manager.h\"\n\nstruct dm_transaction_manager;\n\n \n\n \n#ifdef __CHECKER__\n#  define __dm_written_to_disk(x) __releases(x)\n#  define __dm_reads_from_disk(x) __acquires(x)\n#  define __dm_bless_for_disk(x) __acquire(x)\n#  define __dm_unbless_for_disk(x) __release(x)\n#else\n#  define __dm_written_to_disk(x)\n#  define __dm_reads_from_disk(x)\n#  define __dm_bless_for_disk(x)\n#  define __dm_unbless_for_disk(x)\n#endif\n\n \n\n \n\n \nstruct dm_btree_value_type {\n\tvoid *context;\n\n\t \n\tuint32_t size;\n\n\t \n\n\t \n\tvoid (*inc)(void *context, const void *value, unsigned int count);\n\n\t \n\tvoid (*dec)(void *context, const void *value, unsigned int count);\n\n\t \n\tint (*equal)(void *context, const void *value1, const void *value2);\n};\n\n \nstruct dm_btree_info {\n\tstruct dm_transaction_manager *tm;\n\n\t \n\tunsigned int levels;\n\tstruct dm_btree_value_type value_type;\n};\n\n \nint dm_btree_empty(struct dm_btree_info *info, dm_block_t *root);\n\n \nint dm_btree_del(struct dm_btree_info *info, dm_block_t root);\n\n \n\n \nint dm_btree_lookup(struct dm_btree_info *info, dm_block_t root,\n\t\t    uint64_t *keys, void *value_le);\n\n \nint dm_btree_lookup_next(struct dm_btree_info *info, dm_block_t root,\n\t\t\t uint64_t *keys, uint64_t *rkey, void *value_le);\n\n \nint dm_btree_insert(struct dm_btree_info *info, dm_block_t root,\n\t\t    uint64_t *keys, void *value, dm_block_t *new_root)\n\t__dm_written_to_disk(value);\n\n \nint dm_btree_insert_notify(struct dm_btree_info *info, dm_block_t root,\n\t\t\t   uint64_t *keys, void *value, dm_block_t *new_root,\n\t\t\t   int *inserted)\n\t\t\t   __dm_written_to_disk(value);\n\n \nint dm_btree_remove(struct dm_btree_info *info, dm_block_t root,\n\t\t    uint64_t *keys, dm_block_t *new_root);\n\n \nint dm_btree_remove_leaves(struct dm_btree_info *info, dm_block_t root,\n\t\t\t   uint64_t *keys, uint64_t end_key,\n\t\t\t   dm_block_t *new_root, unsigned int *nr_removed);\n\n \nint dm_btree_find_lowest_key(struct dm_btree_info *info, dm_block_t root,\n\t\t\t     uint64_t *result_keys);\n\n \nint dm_btree_find_highest_key(struct dm_btree_info *info, dm_block_t root,\n\t\t\t      uint64_t *result_keys);\n\n \nint dm_btree_walk(struct dm_btree_info *info, dm_block_t root,\n\t\t  int (*fn)(void *context, uint64_t *keys, void *leaf),\n\t\t  void *context);\n\n\n \n\n \n#define DM_BTREE_CURSOR_MAX_DEPTH 16\n\nstruct cursor_node {\n\tstruct dm_block *b;\n\tunsigned int index;\n};\n\nstruct dm_btree_cursor {\n\tstruct dm_btree_info *info;\n\tdm_block_t root;\n\n\tbool prefetch_leaves;\n\tunsigned int depth;\n\tstruct cursor_node nodes[DM_BTREE_CURSOR_MAX_DEPTH];\n};\n\n \nint dm_btree_cursor_begin(struct dm_btree_info *info, dm_block_t root,\n\t\t\t  bool prefetch_leaves, struct dm_btree_cursor *c);\nvoid dm_btree_cursor_end(struct dm_btree_cursor *c);\nint dm_btree_cursor_next(struct dm_btree_cursor *c);\nint dm_btree_cursor_skip(struct dm_btree_cursor *c, uint32_t count);\nint dm_btree_cursor_get_value(struct dm_btree_cursor *c, uint64_t *key, void *value_le);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}