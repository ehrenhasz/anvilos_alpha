{
  "module_name": "dm-space-map.h",
  "hash_id": "506f7407da3c507ffe90471e17bc15b120689ff15a15d914bdf3598635e1e8bf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/persistent-data/dm-space-map.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_DM_SPACE_MAP_H\n#define _LINUX_DM_SPACE_MAP_H\n\n#include \"dm-block-manager.h\"\n\ntypedef void (*dm_sm_threshold_fn)(void *context);\n\n \nstruct dm_space_map {\n\tvoid (*destroy)(struct dm_space_map *sm);\n\n\t \n\tint (*extend)(struct dm_space_map *sm, dm_block_t extra_blocks);\n\n\t \n\tint (*get_nr_blocks)(struct dm_space_map *sm, dm_block_t *count);\n\n\t \n\tint (*get_nr_free)(struct dm_space_map *sm, dm_block_t *count);\n\n\tint (*get_count)(struct dm_space_map *sm, dm_block_t b, uint32_t *result);\n\tint (*count_is_more_than_one)(struct dm_space_map *sm, dm_block_t b,\n\t\t\t\t      int *result);\n\tint (*set_count)(struct dm_space_map *sm, dm_block_t b, uint32_t count);\n\n\tint (*commit)(struct dm_space_map *sm);\n\n\tint (*inc_blocks)(struct dm_space_map *sm, dm_block_t b, dm_block_t e);\n\tint (*dec_blocks)(struct dm_space_map *sm, dm_block_t b, dm_block_t e);\n\n\t \n\tint (*new_block)(struct dm_space_map *sm, dm_block_t *b);\n\n\t \n\tint (*root_size)(struct dm_space_map *sm, size_t *result);\n\tint (*copy_root)(struct dm_space_map *sm, void *copy_to_here_le, size_t len);\n\n\t \n\tint (*register_threshold_callback)(struct dm_space_map *sm,\n\t\t\t\t\t   dm_block_t threshold,\n\t\t\t\t\t   dm_sm_threshold_fn fn,\n\t\t\t\t\t   void *context);\n};\n\n \n\nstatic inline void dm_sm_destroy(struct dm_space_map *sm)\n{\n\tif (sm)\n\t\tsm->destroy(sm);\n}\n\nstatic inline int dm_sm_extend(struct dm_space_map *sm, dm_block_t extra_blocks)\n{\n\treturn sm->extend(sm, extra_blocks);\n}\n\nstatic inline int dm_sm_get_nr_blocks(struct dm_space_map *sm, dm_block_t *count)\n{\n\treturn sm->get_nr_blocks(sm, count);\n}\n\nstatic inline int dm_sm_get_nr_free(struct dm_space_map *sm, dm_block_t *count)\n{\n\treturn sm->get_nr_free(sm, count);\n}\n\nstatic inline int dm_sm_get_count(struct dm_space_map *sm, dm_block_t b,\n\t\t\t\t  uint32_t *result)\n{\n\treturn sm->get_count(sm, b, result);\n}\n\nstatic inline int dm_sm_count_is_more_than_one(struct dm_space_map *sm,\n\t\t\t\t\t       dm_block_t b, int *result)\n{\n\treturn sm->count_is_more_than_one(sm, b, result);\n}\n\nstatic inline int dm_sm_set_count(struct dm_space_map *sm, dm_block_t b,\n\t\t\t\t  uint32_t count)\n{\n\treturn sm->set_count(sm, b, count);\n}\n\nstatic inline int dm_sm_commit(struct dm_space_map *sm)\n{\n\treturn sm->commit(sm);\n}\n\nstatic inline int dm_sm_inc_blocks(struct dm_space_map *sm, dm_block_t b, dm_block_t e)\n{\n\treturn sm->inc_blocks(sm, b, e);\n}\n\nstatic inline int dm_sm_inc_block(struct dm_space_map *sm, dm_block_t b)\n{\n\treturn dm_sm_inc_blocks(sm, b, b + 1);\n}\n\nstatic inline int dm_sm_dec_blocks(struct dm_space_map *sm, dm_block_t b, dm_block_t e)\n{\n\treturn sm->dec_blocks(sm, b, e);\n}\n\nstatic inline int dm_sm_dec_block(struct dm_space_map *sm, dm_block_t b)\n{\n\treturn dm_sm_dec_blocks(sm, b, b + 1);\n}\n\nstatic inline int dm_sm_new_block(struct dm_space_map *sm, dm_block_t *b)\n{\n\treturn sm->new_block(sm, b);\n}\n\nstatic inline int dm_sm_root_size(struct dm_space_map *sm, size_t *result)\n{\n\treturn sm->root_size(sm, result);\n}\n\nstatic inline int dm_sm_copy_root(struct dm_space_map *sm, void *copy_to_here_le, size_t len)\n{\n\treturn sm->copy_root(sm, copy_to_here_le, len);\n}\n\nstatic inline int dm_sm_register_threshold_callback(struct dm_space_map *sm,\n\t\t\t\t\t\t    dm_block_t threshold,\n\t\t\t\t\t\t    dm_sm_threshold_fn fn,\n\t\t\t\t\t\t    void *context)\n{\n\tif (sm->register_threshold_callback)\n\t\treturn sm->register_threshold_callback(sm, threshold, fn, context);\n\n\treturn -EINVAL;\n}\n\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}