{
  "module_name": "dm-bio-prison-v1.h",
  "hash_id": "2afc654084fedcbff1b181f4c70d3973809fe6ff315362587005496f7039d23d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/dm-bio-prison-v1.h",
  "human_readable_source": " \n \n\n#ifndef DM_BIO_PRISON_H\n#define DM_BIO_PRISON_H\n\n#include \"persistent-data/dm-block-manager.h\"  \n#include \"dm-thin-metadata.h\"  \n\n#include <linux/bio.h>\n#include <linux/rbtree.h>\n\n \n\n \nstruct dm_bio_prison;\n\n \nstruct dm_cell_key {\n\tint virtual;\n\tdm_thin_id dev;\n\tdm_block_t block_begin, block_end;\n};\n\n \n#define BIO_PRISON_MAX_RANGE 1024\n#define BIO_PRISON_MAX_RANGE_SHIFT 10\n\n \nstruct dm_bio_prison_cell {\n\tstruct list_head user_list;\t \n\tstruct rb_node node;\n\n\tstruct dm_cell_key key;\n\tstruct bio *holder;\n\tstruct bio_list bios;\n};\n\nstruct dm_bio_prison *dm_bio_prison_create(void);\nvoid dm_bio_prison_destroy(struct dm_bio_prison *prison);\n\n \nstruct dm_bio_prison_cell *dm_bio_prison_alloc_cell(struct dm_bio_prison *prison,\n\t\t\t\t\t\t    gfp_t gfp);\nvoid dm_bio_prison_free_cell(struct dm_bio_prison *prison,\n\t\t\t     struct dm_bio_prison_cell *cell);\n\n \nint dm_get_cell(struct dm_bio_prison *prison,\n\t\tstruct dm_cell_key *key,\n\t\tstruct dm_bio_prison_cell *cell_prealloc,\n\t\tstruct dm_bio_prison_cell **cell_result);\n\n \nbool dm_cell_key_has_valid_range(struct dm_cell_key *key);\n\n \nint dm_bio_detain(struct dm_bio_prison *prison,\n\t\t  struct dm_cell_key *key,\n\t\t  struct bio *inmate,\n\t\t  struct dm_bio_prison_cell *cell_prealloc,\n\t\t  struct dm_bio_prison_cell **cell_result);\n\nvoid dm_cell_release(struct dm_bio_prison *prison,\n\t\t     struct dm_bio_prison_cell *cell,\n\t\t     struct bio_list *bios);\nvoid dm_cell_release_no_holder(struct dm_bio_prison *prison,\n\t\t\t       struct dm_bio_prison_cell *cell,\n\t\t\t       struct bio_list *inmates);\nvoid dm_cell_error(struct dm_bio_prison *prison,\n\t\t   struct dm_bio_prison_cell *cell, blk_status_t error);\n\n \nvoid dm_cell_visit_release(struct dm_bio_prison *prison,\n\t\t\t   void (*visit_fn)(void *, struct dm_bio_prison_cell *),\n\t\t\t   void *context, struct dm_bio_prison_cell *cell);\n\n \nint dm_cell_promote_or_release(struct dm_bio_prison *prison,\n\t\t\t       struct dm_bio_prison_cell *cell);\n\n \n\n \n\nstruct dm_deferred_set;\nstruct dm_deferred_entry;\n\nstruct dm_deferred_set *dm_deferred_set_create(void);\nvoid dm_deferred_set_destroy(struct dm_deferred_set *ds);\n\nstruct dm_deferred_entry *dm_deferred_entry_inc(struct dm_deferred_set *ds);\nvoid dm_deferred_entry_dec(struct dm_deferred_entry *entry, struct list_head *head);\nint dm_deferred_set_add_work(struct dm_deferred_set *ds, struct list_head *work);\n\n \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}