{
  "module_name": "features.h",
  "hash_id": "7e62c971fd920f32db28d65568c09651597900b747ab4114aa9933c206845cee",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/bcache/features.h",
  "human_readable_source": " \n#ifndef _BCACHE_FEATURES_H\n#define _BCACHE_FEATURES_H\n\n#include <linux/kernel.h>\n#include <linux/types.h>\n\n#include \"bcache_ondisk.h\"\n\n#define BCH_FEATURE_COMPAT\t\t0\n#define BCH_FEATURE_RO_COMPAT\t\t1\n#define BCH_FEATURE_INCOMPAT\t\t2\n#define BCH_FEATURE_TYPE_MASK\t\t0x03\n\n \n \n \n#define BCH_FEATURE_INCOMPAT_OBSO_LARGE_BUCKET\t\t0x0001\n \n#define BCH_FEATURE_INCOMPAT_LOG_LARGE_BUCKET_SIZE\t0x0002\n\n#define BCH_FEATURE_COMPAT_SUPP\t\t0\n#define BCH_FEATURE_RO_COMPAT_SUPP\t0\n#define BCH_FEATURE_INCOMPAT_SUPP\t(BCH_FEATURE_INCOMPAT_OBSO_LARGE_BUCKET| \\\n\t\t\t\t\t BCH_FEATURE_INCOMPAT_LOG_LARGE_BUCKET_SIZE)\n\n#define BCH_HAS_COMPAT_FEATURE(sb, mask) \\\n\t\t((sb)->feature_compat & (mask))\n#define BCH_HAS_RO_COMPAT_FEATURE(sb, mask) \\\n\t\t((sb)->feature_ro_compat & (mask))\n#define BCH_HAS_INCOMPAT_FEATURE(sb, mask) \\\n\t\t((sb)->feature_incompat & (mask))\n\n#define BCH_FEATURE_COMPAT_FUNCS(name, flagname) \\\nstatic inline int bch_has_feature_##name(struct cache_sb *sb) \\\n{ \\\n\tif (sb->version < BCACHE_SB_VERSION_CDEV_WITH_FEATURES) \\\n\t\treturn 0; \\\n\treturn (((sb)->feature_compat & \\\n\t\tBCH##_FEATURE_COMPAT_##flagname) != 0); \\\n} \\\nstatic inline void bch_set_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_compat |= \\\n\t\tBCH##_FEATURE_COMPAT_##flagname; \\\n} \\\nstatic inline void bch_clear_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_compat &= \\\n\t\t~BCH##_FEATURE_COMPAT_##flagname; \\\n}\n\n#define BCH_FEATURE_RO_COMPAT_FUNCS(name, flagname) \\\nstatic inline int bch_has_feature_##name(struct cache_sb *sb) \\\n{ \\\n\tif (sb->version < BCACHE_SB_VERSION_CDEV_WITH_FEATURES) \\\n\t\treturn 0; \\\n\treturn (((sb)->feature_ro_compat & \\\n\t\tBCH##_FEATURE_RO_COMPAT_##flagname) != 0); \\\n} \\\nstatic inline void bch_set_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_ro_compat |= \\\n\t\tBCH##_FEATURE_RO_COMPAT_##flagname; \\\n} \\\nstatic inline void bch_clear_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_ro_compat &= \\\n\t\t~BCH##_FEATURE_RO_COMPAT_##flagname; \\\n}\n\n#define BCH_FEATURE_INCOMPAT_FUNCS(name, flagname) \\\nstatic inline int bch_has_feature_##name(struct cache_sb *sb) \\\n{ \\\n\tif (sb->version < BCACHE_SB_VERSION_CDEV_WITH_FEATURES) \\\n\t\treturn 0; \\\n\treturn (((sb)->feature_incompat & \\\n\t\tBCH##_FEATURE_INCOMPAT_##flagname) != 0); \\\n} \\\nstatic inline void bch_set_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_incompat |= \\\n\t\tBCH##_FEATURE_INCOMPAT_##flagname; \\\n} \\\nstatic inline void bch_clear_feature_##name(struct cache_sb *sb) \\\n{ \\\n\t(sb)->feature_incompat &= \\\n\t\t~BCH##_FEATURE_INCOMPAT_##flagname; \\\n}\n\nBCH_FEATURE_INCOMPAT_FUNCS(obso_large_bucket, OBSO_LARGE_BUCKET);\nBCH_FEATURE_INCOMPAT_FUNCS(large_bucket, LOG_LARGE_BUCKET_SIZE);\n\nstatic inline bool bch_has_unknown_compat_features(struct cache_sb *sb)\n{\n\treturn ((sb->feature_compat & ~BCH_FEATURE_COMPAT_SUPP) != 0);\n}\n\nstatic inline bool bch_has_unknown_ro_compat_features(struct cache_sb *sb)\n{\n\treturn ((sb->feature_ro_compat & ~BCH_FEATURE_RO_COMPAT_SUPP) != 0);\n}\n\nstatic inline bool bch_has_unknown_incompat_features(struct cache_sb *sb)\n{\n\treturn ((sb->feature_incompat & ~BCH_FEATURE_INCOMPAT_SUPP) != 0);\n}\n\nint bch_print_cache_set_feature_compat(struct cache_set *c, char *buf, int size);\nint bch_print_cache_set_feature_ro_compat(struct cache_set *c, char *buf, int size);\nint bch_print_cache_set_feature_incompat(struct cache_set *c, char *buf, int size);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}