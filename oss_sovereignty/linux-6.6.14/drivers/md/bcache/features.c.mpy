{
  "module_name": "features.c",
  "hash_id": "aedb11870c0c6cf7633136c1f899cf7389818332741403e4165b623cbffa4f48",
  "original_prompt": "Ingested from linux-6.6.14/drivers/md/bcache/features.c",
  "human_readable_source": "\n \n#include \"bcache_ondisk.h\"\n#include \"bcache.h\"\n#include \"features.h\"\n\nstruct feature {\n\tint\t\tcompat;\n\tunsigned int\tmask;\n\tconst char\t*string;\n};\n\nstatic struct feature feature_list[] = {\n\t{BCH_FEATURE_INCOMPAT, BCH_FEATURE_INCOMPAT_LOG_LARGE_BUCKET_SIZE,\n\t\t\"large_bucket\"},\n\t{0, 0, NULL },\n};\n\n#define compose_feature_string(type)\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tstruct feature *f;\t\t\t\t\t\t\\\n\tbool first = true;\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tfor (f = &feature_list[0]; f->compat != 0; f++) {\t\t\\\n\t\tif (f->compat != BCH_FEATURE_ ## type)\t\t\t\\\n\t\t\tcontinue;\t\t\t\t\t\\\n\t\tif (BCH_HAS_ ## type ## _FEATURE(&c->cache->sb, f->mask)) {\t\\\n\t\t\tif (first) {\t\t\t\t\t\\\n\t\t\t\tout += snprintf(out, buf + size - out,\t\\\n\t\t\t\t\t\t\"[\");\t\\\n\t\t\t} else {\t\t\t\t\t\\\n\t\t\t\tout += snprintf(out, buf + size - out,\t\\\n\t\t\t\t\t\t\" [\");\t\t\t\\\n\t\t\t}\t\t\t\t\t\t\\\n\t\t} else if (!first) {\t\t\t\t\t\\\n\t\t\tout += snprintf(out, buf + size - out, \" \");\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tout += snprintf(out, buf + size - out, \"%s\", f->string);\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tif (BCH_HAS_ ## type ## _FEATURE(&c->cache->sb, f->mask))\t\\\n\t\t\tout += snprintf(out, buf + size - out, \"]\");\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tfirst = false;\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tif (!first)\t\t\t\t\t\t\t\\\n\t\tout += snprintf(out, buf + size - out, \"\\n\");\t\t\\\n})\n\nint bch_print_cache_set_feature_compat(struct cache_set *c, char *buf, int size)\n{\n\tchar *out = buf;\n\tcompose_feature_string(COMPAT);\n\treturn out - buf;\n}\n\nint bch_print_cache_set_feature_ro_compat(struct cache_set *c, char *buf, int size)\n{\n\tchar *out = buf;\n\tcompose_feature_string(RO_COMPAT);\n\treturn out - buf;\n}\n\nint bch_print_cache_set_feature_incompat(struct cache_set *c, char *buf, int size)\n{\n\tchar *out = buf;\n\tcompose_feature_string(INCOMPAT);\n\treturn out - buf;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}