{
  "module_name": "greybus_trace.h",
  "hash_id": "f1fa0ee3055d961704e7dcb94d01cd26d75bb4d00374a08e67dffb8c24c6b05f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/greybus/greybus_trace.h",
  "human_readable_source": " \n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM greybus\n\n#if !defined(_TRACE_GREYBUS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_GREYBUS_H\n\n#include <linux/tracepoint.h>\n\nstruct gb_message;\nstruct gb_operation;\nstruct gb_connection;\nstruct gb_bundle;\nstruct gb_host_device;\n\nDECLARE_EVENT_CLASS(gb_message,\n\n\tTP_PROTO(struct gb_message *message),\n\n\tTP_ARGS(message),\n\n\tTP_STRUCT__entry(\n\t\t__field(u16, size)\n\t\t__field(u16, operation_id)\n\t\t__field(u8, type)\n\t\t__field(u8, result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->size = le16_to_cpu(message->header->size);\n\t\t__entry->operation_id =\n\t\t\tle16_to_cpu(message->header->operation_id);\n\t\t__entry->type = message->header->type;\n\t\t__entry->result = message->header->result;\n\t),\n\n\tTP_printk(\"size=%u operation_id=0x%04x type=0x%02x result=0x%02x\",\n\t\t  __entry->size, __entry->operation_id,\n\t\t  __entry->type, __entry->result)\n);\n\n#define DEFINE_MESSAGE_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_message, name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_message *message),\t\\\n\t\t\t\tTP_ARGS(message))\n\n \nDEFINE_MESSAGE_EVENT(gb_message_send);\n\n \nDEFINE_MESSAGE_EVENT(gb_message_recv_request);\n\n \nDEFINE_MESSAGE_EVENT(gb_message_recv_response);\n\n \nDEFINE_MESSAGE_EVENT(gb_message_cancel_outgoing);\n\n \nDEFINE_MESSAGE_EVENT(gb_message_cancel_incoming);\n\n \nDEFINE_MESSAGE_EVENT(gb_message_submit);\n\n#undef DEFINE_MESSAGE_EVENT\n\nDECLARE_EVENT_CLASS(gb_operation,\n\n\tTP_PROTO(struct gb_operation *operation),\n\n\tTP_ARGS(operation),\n\n\tTP_STRUCT__entry(\n\t\t__field(u16, cport_id)\t \n\t\t__field(u16, id)\t \n\t\t__field(u8, type)\n\t\t__field(unsigned long, flags)\n\t\t__field(int, active)\n\t\t__field(int, waiters)\n\t\t__field(int, errno)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->cport_id = operation->connection->hd_cport_id;\n\t\t__entry->id = operation->id;\n\t\t__entry->type = operation->type;\n\t\t__entry->flags = operation->flags;\n\t\t__entry->active = operation->active;\n\t\t__entry->waiters = atomic_read(&operation->waiters);\n\t\t__entry->errno = operation->errno;\n\t),\n\n\tTP_printk(\"id=%04x type=0x%02x cport_id=%04x flags=0x%lx active=%d waiters=%d errno=%d\",\n\t\t  __entry->id, __entry->cport_id, __entry->type, __entry->flags,\n\t\t  __entry->active, __entry->waiters, __entry->errno)\n);\n\n#define DEFINE_OPERATION_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_operation, name,\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_operation *operation), \\\n\t\t\t\tTP_ARGS(operation))\n\n \nDEFINE_OPERATION_EVENT(gb_operation_create);\n\n \nDEFINE_OPERATION_EVENT(gb_operation_create_core);\n\n \nDEFINE_OPERATION_EVENT(gb_operation_create_incoming);\n\n \nDEFINE_OPERATION_EVENT(gb_operation_destroy);\n\n \nDEFINE_OPERATION_EVENT(gb_operation_get_active);\n\n \nDEFINE_OPERATION_EVENT(gb_operation_put_active);\n\n#undef DEFINE_OPERATION_EVENT\n\nDECLARE_EVENT_CLASS(gb_connection,\n\n\tTP_PROTO(struct gb_connection *connection),\n\n\tTP_ARGS(connection),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, hd_bus_id)\n\t\t__field(u8, bundle_id)\n\t\t \n\t\t__dynamic_array(char, name, sizeof(connection->name))\n\t\t__field(enum gb_connection_state, state)\n\t\t__field(unsigned long, flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->hd_bus_id = connection->hd->bus_id;\n\t\t__entry->bundle_id = connection->bundle ?\n\t\t\t\tconnection->bundle->id : BUNDLE_ID_NONE;\n\t\tmemcpy(__get_str(name), connection->name,\n\t\t\t\t\tsizeof(connection->name));\n\t\t__entry->state = connection->state;\n\t\t__entry->flags = connection->flags;\n\t),\n\n\tTP_printk(\"hd_bus_id=%d bundle_id=0x%02x name=\\\"%s\\\" state=%u flags=0x%lx\",\n\t\t  __entry->hd_bus_id, __entry->bundle_id, __get_str(name),\n\t\t  (unsigned int)__entry->state, __entry->flags)\n);\n\n#define DEFINE_CONNECTION_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_connection, name,\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_connection *connection), \\\n\t\t\t\tTP_ARGS(connection))\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_create);\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_release);\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_get);\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_put);\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_enable);\n\n \nDEFINE_CONNECTION_EVENT(gb_connection_disable);\n\n#undef DEFINE_CONNECTION_EVENT\n\nDECLARE_EVENT_CLASS(gb_bundle,\n\n\tTP_PROTO(struct gb_bundle *bundle),\n\n\tTP_ARGS(bundle),\n\n\tTP_STRUCT__entry(\n\t\t__field(u8, intf_id)\n\t\t__field(u8, id)\n\t\t__field(u8, class)\n\t\t__field(size_t, num_cports)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->intf_id = bundle->intf->interface_id;\n\t\t__entry->id = bundle->id;\n\t\t__entry->class = bundle->class;\n\t\t__entry->num_cports = bundle->num_cports;\n\t),\n\n\tTP_printk(\"intf_id=0x%02x id=%02x class=0x%02x num_cports=%zu\",\n\t\t  __entry->intf_id, __entry->id, __entry->class,\n\t\t  __entry->num_cports)\n);\n\n#define DEFINE_BUNDLE_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_bundle, name,\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_bundle *bundle), \\\n\t\t\t\tTP_ARGS(bundle))\n\n \nDEFINE_BUNDLE_EVENT(gb_bundle_create);\n\n \nDEFINE_BUNDLE_EVENT(gb_bundle_release);\n\n \nDEFINE_BUNDLE_EVENT(gb_bundle_add);\n\n \nDEFINE_BUNDLE_EVENT(gb_bundle_destroy);\n\n#undef DEFINE_BUNDLE_EVENT\n\nDECLARE_EVENT_CLASS(gb_interface,\n\n\tTP_PROTO(struct gb_interface *intf),\n\n\tTP_ARGS(intf),\n\n\tTP_STRUCT__entry(\n\t\t__field(u8, module_id)\n\t\t__field(u8, id)\t\t \n\t\t__field(u8, device_id)\n\t\t__field(int, disconnected)\t \n\t\t__field(int, ejected)\t\t \n\t\t__field(int, active)\t\t \n\t\t__field(int, enabled)\t\t \n\t\t__field(int, mode_switch)\t \n\t),\n\n\tTP_fast_assign(\n\t\t__entry->module_id = intf->module->module_id;\n\t\t__entry->id = intf->interface_id;\n\t\t__entry->device_id = intf->device_id;\n\t\t__entry->disconnected = intf->disconnected;\n\t\t__entry->ejected = intf->ejected;\n\t\t__entry->active = intf->active;\n\t\t__entry->enabled = intf->enabled;\n\t\t__entry->mode_switch = intf->mode_switch;\n\t),\n\n\tTP_printk(\"intf_id=%u device_id=%u module_id=%u D=%d J=%d A=%d E=%d M=%d\",\n\t\t__entry->id, __entry->device_id, __entry->module_id,\n\t\t__entry->disconnected, __entry->ejected, __entry->active,\n\t\t__entry->enabled, __entry->mode_switch)\n);\n\n#define DEFINE_INTERFACE_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_interface, name,\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_interface *intf),\t\\\n\t\t\t\tTP_ARGS(intf))\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_create);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_release);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_add);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_del);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_activate);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_deactivate);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_enable);\n\n \nDEFINE_INTERFACE_EVENT(gb_interface_disable);\n\n#undef DEFINE_INTERFACE_EVENT\n\nDECLARE_EVENT_CLASS(gb_module,\n\n\tTP_PROTO(struct gb_module *module),\n\n\tTP_ARGS(module),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, hd_bus_id)\n\t\t__field(u8, module_id)\n\t\t__field(size_t, num_interfaces)\n\t\t__field(int, disconnected)\t \n\t),\n\n\tTP_fast_assign(\n\t\t__entry->hd_bus_id = module->hd->bus_id;\n\t\t__entry->module_id = module->module_id;\n\t\t__entry->num_interfaces = module->num_interfaces;\n\t\t__entry->disconnected = module->disconnected;\n\t),\n\n\tTP_printk(\"hd_bus_id=%d module_id=%u num_interfaces=%zu disconnected=%d\",\n\t\t__entry->hd_bus_id, __entry->module_id,\n\t\t__entry->num_interfaces, __entry->disconnected)\n);\n\n#define DEFINE_MODULE_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_module, name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_module *module),\t\\\n\t\t\t\tTP_ARGS(module))\n\n \nDEFINE_MODULE_EVENT(gb_module_create);\n\n \nDEFINE_MODULE_EVENT(gb_module_release);\n\n \nDEFINE_MODULE_EVENT(gb_module_add);\n\n \nDEFINE_MODULE_EVENT(gb_module_del);\n\n#undef DEFINE_MODULE_EVENT\n\nDECLARE_EVENT_CLASS(gb_host_device,\n\n\tTP_PROTO(struct gb_host_device *hd),\n\n\tTP_ARGS(hd),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, bus_id)\n\t\t__field(size_t, num_cports)\n\t\t__field(size_t, buffer_size_max)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->bus_id = hd->bus_id;\n\t\t__entry->num_cports = hd->num_cports;\n\t\t__entry->buffer_size_max = hd->buffer_size_max;\n\t),\n\n\tTP_printk(\"bus_id=%d num_cports=%zu mtu=%zu\",\n\t\t__entry->bus_id, __entry->num_cports,\n\t\t__entry->buffer_size_max)\n);\n\n#define DEFINE_HD_EVENT(name)\t\t\t\t\t\t\\\n\t\tDEFINE_EVENT(gb_host_device, name,\t\t\t\\\n\t\t\t\tTP_PROTO(struct gb_host_device *hd),\t\\\n\t\t\t\tTP_ARGS(hd))\n\n \nDEFINE_HD_EVENT(gb_hd_create);\n\n \nDEFINE_HD_EVENT(gb_hd_release);\n\n \nDEFINE_HD_EVENT(gb_hd_add);\n\n \nDEFINE_HD_EVENT(gb_hd_del);\n\n \nDEFINE_HD_EVENT(gb_hd_in);\n\n#undef DEFINE_HD_EVENT\n\n#endif  \n\n \n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n\n \n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE greybus_trace\n#include <trace/define_trace.h>\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}