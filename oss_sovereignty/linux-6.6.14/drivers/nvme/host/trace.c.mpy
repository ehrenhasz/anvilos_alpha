{
  "module_name": "trace.c",
  "hash_id": "916e5706968c7c445b786bd8f9a98a3ba29db73c231bbc01be4d8b3ef639032b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/nvme/host/trace.c",
  "human_readable_source": "\n \n\n#include <asm/unaligned.h>\n#include \"trace.h\"\n\nstatic const char *nvme_trace_delete_sq(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu16 sqid = get_unaligned_le16(cdw10);\n\n\ttrace_seq_printf(p, \"sqid=%u\", sqid);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_create_sq(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu16 sqid = get_unaligned_le16(cdw10);\n\tu16 qsize = get_unaligned_le16(cdw10 + 2);\n\tu16 sq_flags = get_unaligned_le16(cdw10 + 4);\n\tu16 cqid = get_unaligned_le16(cdw10 + 6);\n\n\n\ttrace_seq_printf(p, \"sqid=%u, qsize=%u, sq_flags=0x%x, cqid=%u\",\n\t\t\t sqid, qsize, sq_flags, cqid);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_delete_cq(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu16 cqid = get_unaligned_le16(cdw10);\n\n\ttrace_seq_printf(p, \"cqid=%u\", cqid);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_create_cq(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu16 cqid = get_unaligned_le16(cdw10);\n\tu16 qsize = get_unaligned_le16(cdw10 + 2);\n\tu16 cq_flags = get_unaligned_le16(cdw10 + 4);\n\tu16 irq_vector = get_unaligned_le16(cdw10 + 6);\n\n\ttrace_seq_printf(p, \"cqid=%u, qsize=%u, cq_flags=0x%x, irq_vector=%u\",\n\t\t\t cqid, qsize, cq_flags, irq_vector);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_admin_identify(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 cns = cdw10[0];\n\tu16 ctrlid = get_unaligned_le16(cdw10 + 2);\n\n\ttrace_seq_printf(p, \"cns=%u, ctrlid=%u\", cns, ctrlid);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_admin_set_features(struct trace_seq *p,\n\t\t\t\t\t\t u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 fid = cdw10[0];\n\tu8 sv = cdw10[3] & 0x8;\n\tu32 cdw11 = get_unaligned_le32(cdw10 + 4);\n\n\ttrace_seq_printf(p, \"fid=0x%x, sv=0x%x, cdw11=0x%x\", fid, sv, cdw11);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_admin_get_features(struct trace_seq *p,\n\t\t\t\t\t\t u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 fid = cdw10[0];\n\tu8 sel = cdw10[1] & 0x7;\n\tu32 cdw11 = get_unaligned_le32(cdw10 + 4);\n\n\ttrace_seq_printf(p, \"fid=0x%x, sel=0x%x, cdw11=0x%x\", fid, sel, cdw11);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_get_lba_status(struct trace_seq *p,\n\t\t\t\t\t     u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu64 slba = get_unaligned_le64(cdw10);\n\tu32 mndw = get_unaligned_le32(cdw10 + 8);\n\tu16 rl = get_unaligned_le16(cdw10 + 12);\n\tu8 atype = cdw10[15];\n\n\ttrace_seq_printf(p, \"slba=0x%llx, mndw=0x%x, rl=0x%x, atype=%u\",\n\t\t\tslba, mndw, rl, atype);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_admin_format_nvm(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 lbaf = cdw10[0] & 0xF;\n\tu8 mset = (cdw10[0] >> 4) & 0x1;\n\tu8 pi = (cdw10[0] >> 5) & 0x7;\n\tu8 pil = cdw10[1] & 0x1;\n\tu8 ses = (cdw10[1] >> 1) & 0x7;\n\n\ttrace_seq_printf(p, \"lbaf=%u, mset=%u, pi=%u, pil=%u, ses=%u\",\n\t\t\tlbaf, mset, pi, pil, ses);\n\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_read_write(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu64 slba = get_unaligned_le64(cdw10);\n\tu16 length = get_unaligned_le16(cdw10 + 8);\n\tu16 control = get_unaligned_le16(cdw10 + 10);\n\tu32 dsmgmt = get_unaligned_le32(cdw10 + 12);\n\tu32 reftag = get_unaligned_le32(cdw10 +  16);\n\n\ttrace_seq_printf(p,\n\t\t\t \"slba=%llu, len=%u, ctrl=0x%x, dsmgmt=%u, reftag=%u\",\n\t\t\t slba, length, control, dsmgmt, reftag);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_dsm(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"nr=%u, attributes=%u\",\n\t\t\t get_unaligned_le32(cdw10),\n\t\t\t get_unaligned_le32(cdw10 + 4));\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_zone_mgmt_send(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu64 slba = get_unaligned_le64(cdw10);\n\tu8 zsa = cdw10[12];\n\tu8 all = cdw10[13];\n\n\ttrace_seq_printf(p, \"slba=%llu, zsa=%u, all=%u\", slba, zsa, all);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_zone_mgmt_recv(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu64 slba = get_unaligned_le64(cdw10);\n\tu32 numd = get_unaligned_le32(cdw10 + 8);\n\tu8 zra = cdw10[12];\n\tu8 zrasf = cdw10[13];\n\tu8 pr = cdw10[14];\n\n\ttrace_seq_printf(p, \"slba=%llu, numd=%u, zra=%u, zrasf=%u, pr=%u\",\n\t\t\t slba, numd, zra, zrasf, pr);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nstatic const char *nvme_trace_common(struct trace_seq *p, u8 *cdw10)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"cdw10=%*ph\", 24, cdw10);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nconst char *nvme_trace_parse_admin_cmd(struct trace_seq *p,\n\t\t\t\t       u8 opcode, u8 *cdw10)\n{\n\tswitch (opcode) {\n\tcase nvme_admin_delete_sq:\n\t\treturn nvme_trace_delete_sq(p, cdw10);\n\tcase nvme_admin_create_sq:\n\t\treturn nvme_trace_create_sq(p, cdw10);\n\tcase nvme_admin_delete_cq:\n\t\treturn nvme_trace_delete_cq(p, cdw10);\n\tcase nvme_admin_create_cq:\n\t\treturn nvme_trace_create_cq(p, cdw10);\n\tcase nvme_admin_identify:\n\t\treturn nvme_trace_admin_identify(p, cdw10);\n\tcase nvme_admin_set_features:\n\t\treturn nvme_trace_admin_set_features(p, cdw10);\n\tcase nvme_admin_get_features:\n\t\treturn nvme_trace_admin_get_features(p, cdw10);\n\tcase nvme_admin_get_lba_status:\n\t\treturn nvme_trace_get_lba_status(p, cdw10);\n\tcase nvme_admin_format_nvm:\n\t\treturn nvme_trace_admin_format_nvm(p, cdw10);\n\tdefault:\n\t\treturn nvme_trace_common(p, cdw10);\n\t}\n}\n\nconst char *nvme_trace_parse_nvm_cmd(struct trace_seq *p,\n\t\t\t\t     u8 opcode, u8 *cdw10)\n{\n\tswitch (opcode) {\n\tcase nvme_cmd_read:\n\tcase nvme_cmd_write:\n\tcase nvme_cmd_write_zeroes:\n\tcase nvme_cmd_zone_append:\n\t\treturn nvme_trace_read_write(p, cdw10);\n\tcase nvme_cmd_dsm:\n\t\treturn nvme_trace_dsm(p, cdw10);\n\tcase nvme_cmd_zone_mgmt_send:\n\t\treturn nvme_trace_zone_mgmt_send(p, cdw10);\n\tcase nvme_cmd_zone_mgmt_recv:\n\t\treturn nvme_trace_zone_mgmt_recv(p, cdw10);\n\tdefault:\n\t\treturn nvme_trace_common(p, cdw10);\n\t}\n}\n\nstatic const char *nvme_trace_fabrics_property_set(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 attrib = spc[0];\n\tu32 ofst = get_unaligned_le32(spc + 4);\n\tu64 value = get_unaligned_le64(spc + 8);\n\n\ttrace_seq_printf(p, \"attrib=%u, ofst=0x%x, value=0x%llx\",\n\t\t\t attrib, ofst, value);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nstatic const char *nvme_trace_fabrics_connect(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu16 recfmt = get_unaligned_le16(spc);\n\tu16 qid = get_unaligned_le16(spc + 2);\n\tu16 sqsize = get_unaligned_le16(spc + 4);\n\tu8 cattr = spc[6];\n\tu32 kato = get_unaligned_le32(spc + 8);\n\n\ttrace_seq_printf(p, \"recfmt=%u, qid=%u, sqsize=%u, cattr=%u, kato=%u\",\n\t\t\t recfmt, qid, sqsize, cattr, kato);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nstatic const char *nvme_trace_fabrics_property_get(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 attrib = spc[0];\n\tu32 ofst = get_unaligned_le32(spc + 4);\n\n\ttrace_seq_printf(p, \"attrib=%u, ofst=0x%x\", attrib, ofst);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nstatic const char *nvme_trace_fabrics_auth_send(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 spsp0 = spc[1];\n\tu8 spsp1 = spc[2];\n\tu8 secp = spc[3];\n\tu32 tl = get_unaligned_le32(spc + 4);\n\n\ttrace_seq_printf(p, \"spsp0=%02x, spsp1=%02x, secp=%02x, tl=%u\",\n\t\t\t spsp0, spsp1, secp, tl);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nstatic const char *nvme_trace_fabrics_auth_receive(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\tu8 spsp0 = spc[1];\n\tu8 spsp1 = spc[2];\n\tu8 secp = spc[3];\n\tu32 al = get_unaligned_le32(spc + 4);\n\n\ttrace_seq_printf(p, \"spsp0=%02x, spsp1=%02x, secp=%02x, al=%u\",\n\t\t\t spsp0, spsp1, secp, al);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nstatic const char *nvme_trace_fabrics_common(struct trace_seq *p, u8 *spc)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\ttrace_seq_printf(p, \"specific=%*ph\", 24, spc);\n\ttrace_seq_putc(p, 0);\n\treturn ret;\n}\n\nconst char *nvme_trace_parse_fabrics_cmd(struct trace_seq *p,\n\t\tu8 fctype, u8 *spc)\n{\n\tswitch (fctype) {\n\tcase nvme_fabrics_type_property_set:\n\t\treturn nvme_trace_fabrics_property_set(p, spc);\n\tcase nvme_fabrics_type_connect:\n\t\treturn nvme_trace_fabrics_connect(p, spc);\n\tcase nvme_fabrics_type_property_get:\n\t\treturn nvme_trace_fabrics_property_get(p, spc);\n\tcase nvme_fabrics_type_auth_send:\n\t\treturn nvme_trace_fabrics_auth_send(p, spc);\n\tcase nvme_fabrics_type_auth_receive:\n\t\treturn nvme_trace_fabrics_auth_receive(p, spc);\n\tdefault:\n\t\treturn nvme_trace_fabrics_common(p, spc);\n\t}\n}\n\nconst char *nvme_trace_disk_name(struct trace_seq *p, char *name)\n{\n\tconst char *ret = trace_seq_buffer_ptr(p);\n\n\tif (*name)\n\t\ttrace_seq_printf(p, \"disk=%s, \", name);\n\ttrace_seq_putc(p, 0);\n\n\treturn ret;\n}\n\nEXPORT_TRACEPOINT_SYMBOL_GPL(nvme_sq);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}