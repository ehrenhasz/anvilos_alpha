{
  "module_name": "bbc_i2c.h",
  "hash_id": "dd10221995f636ae4f49455ca7c0dc11af122630873ba30fd927e718a4c25c1f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/sbus/char/bbc_i2c.h",
  "human_readable_source": " \n#ifndef _BBC_I2C_H\n#define _BBC_I2C_H\n\n#include <linux/of.h>\n#include <linux/list.h>\n\nstruct bbc_i2c_client {\n\tstruct bbc_i2c_bus\t\t*bp;\n\tstruct platform_device\t\t*op;\n\tint\t\t\t\tbus;\n\tint\t\t\t\taddress;\n};\n\nenum fan_action { FAN_SLOWER, FAN_SAME, FAN_FASTER, FAN_FULLBLAST, FAN_STATE_MAX };\n\nstruct bbc_cpu_temperature {\n\tstruct list_head\t\tbp_list;\n\tstruct list_head\t\tglob_list;\n\n\tstruct bbc_i2c_client\t\t*client;\n\tint\t\t\t\tindex;\n\n\t \n\ts8\t\t\t\tcurr_cpu_temp;\n\ts8\t\t\t\tcurr_amb_temp;\n\ts8\t\t\t\tprev_cpu_temp;\n\ts8\t\t\t\tprev_amb_temp;\n\ts8\t\t\t\tavg_cpu_temp;\n\ts8\t\t\t\tavg_amb_temp;\n\n\tint\t\t\t\tsample_tick;\n\n\tenum fan_action\t\t\tfan_todo[2];\n#define FAN_AMBIENT\t0\n#define FAN_CPU\t\t1\n};\n\nstruct bbc_fan_control {\n\tstruct list_head\t\tbp_list;\n\tstruct list_head\t\tglob_list;\n\n\tstruct bbc_i2c_client \t\t*client;\n\tint \t\t\t\tindex;\n\n\tint\t\t\t\tpsupply_fan_on;\n\tint\t\t\t\tcpu_fan_speed;\n\tint\t\t\t\tsystem_fan_speed;\n};\n\n#define NUM_CHILDREN\t8\n\nstruct bbc_i2c_bus {\n\tstruct bbc_i2c_bus\t\t*next;\n\tint\t\t\t\tindex;\n\tspinlock_t\t\t\tlock;\n\tvoid\t\t\t\t__iomem *i2c_bussel_reg;\n\tvoid\t\t\t\t__iomem *i2c_control_regs;\n\tunsigned char\t\t\town, clock;\n\n\twait_queue_head_t\t\twq;\n\tvolatile int\t\t\twaiting;\n\n\tstruct list_head\t\ttemps;\n\tstruct list_head\t\tfans;\n\n\tstruct platform_device\t\t*op;\n\tstruct {\n\t\tstruct platform_device\t*device;\n\t\tint\t\t\tclient_claimed;\n\t} devs[NUM_CHILDREN];\n};\n\n \nextern struct platform_device *bbc_i2c_getdev(struct bbc_i2c_bus *, int);\nextern struct bbc_i2c_client *bbc_i2c_attach(struct bbc_i2c_bus *bp, struct platform_device *);\nextern void bbc_i2c_detach(struct bbc_i2c_client *);\n\n \nextern int bbc_i2c_writeb(struct bbc_i2c_client *, unsigned char val, int off);\nextern int bbc_i2c_readb(struct bbc_i2c_client *, unsigned char *byte, int off);\nextern int bbc_i2c_write_buf(struct bbc_i2c_client *, char *buf, int len, int off);\nextern int bbc_i2c_read_buf(struct bbc_i2c_client *, char *buf, int len, int off);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}