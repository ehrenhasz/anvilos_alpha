{
  "module_name": "tunnel.h",
  "hash_id": "6bd1ab6b94b9a2b18e0358fe1195761565f1385219d3b1837dcd19bab545a292",
  "original_prompt": "Ingested from linux-6.6.14/drivers/thunderbolt/tunnel.h",
  "human_readable_source": " \n \n\n#ifndef TB_TUNNEL_H_\n#define TB_TUNNEL_H_\n\n#include \"tb.h\"\n\nenum tb_tunnel_type {\n\tTB_TUNNEL_PCI,\n\tTB_TUNNEL_DP,\n\tTB_TUNNEL_DMA,\n\tTB_TUNNEL_USB3,\n};\n\n \nstruct tb_tunnel {\n\tstruct tb *tb;\n\tstruct tb_port *src_port;\n\tstruct tb_port *dst_port;\n\tstruct tb_path **paths;\n\tsize_t npaths;\n\tint (*init)(struct tb_tunnel *tunnel);\n\tvoid (*deinit)(struct tb_tunnel *tunnel);\n\tint (*activate)(struct tb_tunnel *tunnel, bool activate);\n\tint (*maximum_bandwidth)(struct tb_tunnel *tunnel, int *max_up,\n\t\t\t\t int *max_down);\n\tint (*allocated_bandwidth)(struct tb_tunnel *tunnel, int *allocated_up,\n\t\t\t\t   int *allocated_down);\n\tint (*alloc_bandwidth)(struct tb_tunnel *tunnel, int *alloc_up,\n\t\t\t       int *alloc_down);\n\tint (*consumed_bandwidth)(struct tb_tunnel *tunnel, int *consumed_up,\n\t\t\t\t  int *consumed_down);\n\tint (*release_unused_bandwidth)(struct tb_tunnel *tunnel);\n\tvoid (*reclaim_available_bandwidth)(struct tb_tunnel *tunnel,\n\t\t\t\t\t    int *available_up,\n\t\t\t\t\t    int *available_down);\n\tstruct list_head list;\n\tenum tb_tunnel_type type;\n\tint max_up;\n\tint max_down;\n\tint allocated_up;\n\tint allocated_down;\n\tbool bw_mode;\n};\n\nstruct tb_tunnel *tb_tunnel_discover_pci(struct tb *tb, struct tb_port *down,\n\t\t\t\t\t bool alloc_hopid);\nstruct tb_tunnel *tb_tunnel_alloc_pci(struct tb *tb, struct tb_port *up,\n\t\t\t\t      struct tb_port *down);\nstruct tb_tunnel *tb_tunnel_discover_dp(struct tb *tb, struct tb_port *in,\n\t\t\t\t\tbool alloc_hopid);\nstruct tb_tunnel *tb_tunnel_alloc_dp(struct tb *tb, struct tb_port *in,\n\t\t\t\t     struct tb_port *out, int link_nr,\n\t\t\t\t     int max_up, int max_down);\nstruct tb_tunnel *tb_tunnel_alloc_dma(struct tb *tb, struct tb_port *nhi,\n\t\t\t\t      struct tb_port *dst, int transmit_path,\n\t\t\t\t      int transmit_ring, int receive_path,\n\t\t\t\t      int receive_ring);\nbool tb_tunnel_match_dma(const struct tb_tunnel *tunnel, int transmit_path,\n\t\t\t int transmit_ring, int receive_path, int receive_ring);\nstruct tb_tunnel *tb_tunnel_discover_usb3(struct tb *tb, struct tb_port *down,\n\t\t\t\t\t  bool alloc_hopid);\nstruct tb_tunnel *tb_tunnel_alloc_usb3(struct tb *tb, struct tb_port *up,\n\t\t\t\t       struct tb_port *down, int max_up,\n\t\t\t\t       int max_down);\n\nvoid tb_tunnel_free(struct tb_tunnel *tunnel);\nint tb_tunnel_activate(struct tb_tunnel *tunnel);\nint tb_tunnel_restart(struct tb_tunnel *tunnel);\nvoid tb_tunnel_deactivate(struct tb_tunnel *tunnel);\nbool tb_tunnel_is_invalid(struct tb_tunnel *tunnel);\nbool tb_tunnel_port_on_path(const struct tb_tunnel *tunnel,\n\t\t\t    const struct tb_port *port);\nint tb_tunnel_maximum_bandwidth(struct tb_tunnel *tunnel, int *max_up,\n\t\t\t\tint *max_down);\nint tb_tunnel_allocated_bandwidth(struct tb_tunnel *tunnel, int *allocated_up,\n\t\t\t\t  int *allocated_down);\nint tb_tunnel_alloc_bandwidth(struct tb_tunnel *tunnel, int *alloc_up,\n\t\t\t      int *alloc_down);\nint tb_tunnel_consumed_bandwidth(struct tb_tunnel *tunnel, int *consumed_up,\n\t\t\t\t int *consumed_down);\nint tb_tunnel_release_unused_bandwidth(struct tb_tunnel *tunnel);\nvoid tb_tunnel_reclaim_available_bandwidth(struct tb_tunnel *tunnel,\n\t\t\t\t\t   int *available_up,\n\t\t\t\t\t   int *available_down);\n\nstatic inline bool tb_tunnel_is_pci(const struct tb_tunnel *tunnel)\n{\n\treturn tunnel->type == TB_TUNNEL_PCI;\n}\n\nstatic inline bool tb_tunnel_is_dp(const struct tb_tunnel *tunnel)\n{\n\treturn tunnel->type == TB_TUNNEL_DP;\n}\n\nstatic inline bool tb_tunnel_is_dma(const struct tb_tunnel *tunnel)\n{\n\treturn tunnel->type == TB_TUNNEL_DMA;\n}\n\nstatic inline bool tb_tunnel_is_usb3(const struct tb_tunnel *tunnel)\n{\n\treturn tunnel->type == TB_TUNNEL_USB3;\n}\n\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}