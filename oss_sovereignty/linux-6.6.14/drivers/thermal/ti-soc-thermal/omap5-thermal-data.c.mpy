{
  "module_name": "omap5-thermal-data.c",
  "hash_id": "fd95e32cff008e96676558c2a32e0431187f9fe6700b3fb20cd6bfb28c6267fb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/thermal/ti-soc-thermal/omap5-thermal-data.c",
  "human_readable_source": "\n \n\n#include \"ti-thermal.h\"\n#include \"ti-bandgap.h\"\n#include \"omap5xxx-bandgap.h\"\n\n \n\n \nstatic struct temp_sensor_registers\nomap5430_mpu_temp_sensor_registers = {\n\t.temp_sensor_ctrl = OMAP5430_TEMP_SENSOR_MPU_OFFSET,\n\t.bgap_tempsoff_mask = OMAP5430_BGAP_TEMPSOFF_MASK,\n\t.bgap_eocz_mask = OMAP5430_BGAP_TEMP_SENSOR_EOCZ_MASK,\n\t.bgap_dtemp_mask = OMAP5430_BGAP_TEMP_SENSOR_DTEMP_MASK,\n\n\t.bgap_mask_ctrl = OMAP5430_BGAP_CTRL_OFFSET,\n\t.mask_hot_mask = OMAP5430_MASK_HOT_MPU_MASK,\n\t.mask_cold_mask = OMAP5430_MASK_COLD_MPU_MASK,\n\t.mask_counter_delay_mask = OMAP5430_MASK_COUNTER_DELAY_MASK,\n\t.mask_freeze_mask = OMAP5430_MASK_FREEZE_MPU_MASK,\n\n\t.bgap_counter = OMAP5430_BGAP_CTRL_OFFSET,\n\t.counter_mask = OMAP5430_COUNTER_MASK,\n\n\t.bgap_threshold = OMAP5430_BGAP_THRESHOLD_MPU_OFFSET,\n\t.threshold_thot_mask = OMAP5430_T_HOT_MASK,\n\t.threshold_tcold_mask = OMAP5430_T_COLD_MASK,\n\n\t.tshut_threshold = OMAP5430_BGAP_TSHUT_MPU_OFFSET,\n\t.tshut_hot_mask = OMAP5430_TSHUT_HOT_MASK,\n\t.tshut_cold_mask = OMAP5430_TSHUT_COLD_MASK,\n\n\t.bgap_status = OMAP5430_BGAP_STATUS_OFFSET,\n\t.status_hot_mask = OMAP5430_HOT_MPU_FLAG_MASK,\n\t.status_cold_mask = OMAP5430_COLD_MPU_FLAG_MASK,\n\n\t.ctrl_dtemp_1 = OMAP5430_BGAP_DTEMP_MPU_1_OFFSET,\n\t.ctrl_dtemp_2 = OMAP5430_BGAP_DTEMP_MPU_2_OFFSET,\n\t.bgap_efuse = OMAP5430_FUSE_OPP_BGAP_MPU,\n};\n\n \nstatic struct temp_sensor_registers\nomap5430_gpu_temp_sensor_registers = {\n\t.temp_sensor_ctrl = OMAP5430_TEMP_SENSOR_GPU_OFFSET,\n\t.bgap_tempsoff_mask = OMAP5430_BGAP_TEMPSOFF_MASK,\n\t.bgap_eocz_mask = OMAP5430_BGAP_TEMP_SENSOR_EOCZ_MASK,\n\t.bgap_dtemp_mask = OMAP5430_BGAP_TEMP_SENSOR_DTEMP_MASK,\n\n\t.bgap_mask_ctrl = OMAP5430_BGAP_CTRL_OFFSET,\n\t.mask_hot_mask = OMAP5430_MASK_HOT_GPU_MASK,\n\t.mask_cold_mask = OMAP5430_MASK_COLD_GPU_MASK,\n\t.mask_counter_delay_mask = OMAP5430_MASK_COUNTER_DELAY_MASK,\n\t.mask_freeze_mask = OMAP5430_MASK_FREEZE_GPU_MASK,\n\n\t.bgap_counter = OMAP5430_BGAP_CTRL_OFFSET,\n\t.counter_mask = OMAP5430_COUNTER_MASK,\n\n\t.bgap_threshold = OMAP5430_BGAP_THRESHOLD_GPU_OFFSET,\n\t.threshold_thot_mask = OMAP5430_T_HOT_MASK,\n\t.threshold_tcold_mask = OMAP5430_T_COLD_MASK,\n\n\t.tshut_threshold = OMAP5430_BGAP_TSHUT_GPU_OFFSET,\n\t.tshut_hot_mask = OMAP5430_TSHUT_HOT_MASK,\n\t.tshut_cold_mask = OMAP5430_TSHUT_COLD_MASK,\n\n\t.bgap_status = OMAP5430_BGAP_STATUS_OFFSET,\n\t.status_hot_mask = OMAP5430_HOT_GPU_FLAG_MASK,\n\t.status_cold_mask = OMAP5430_COLD_GPU_FLAG_MASK,\n\n\t.ctrl_dtemp_1 = OMAP5430_BGAP_DTEMP_GPU_1_OFFSET,\n\t.ctrl_dtemp_2 = OMAP5430_BGAP_DTEMP_GPU_2_OFFSET,\n\n\t.bgap_efuse = OMAP5430_FUSE_OPP_BGAP_GPU,\n};\n\n \nstatic struct temp_sensor_registers\nomap5430_core_temp_sensor_registers = {\n\t.temp_sensor_ctrl = OMAP5430_TEMP_SENSOR_CORE_OFFSET,\n\t.bgap_tempsoff_mask = OMAP5430_BGAP_TEMPSOFF_MASK,\n\t.bgap_eocz_mask = OMAP5430_BGAP_TEMP_SENSOR_EOCZ_MASK,\n\t.bgap_dtemp_mask = OMAP5430_BGAP_TEMP_SENSOR_DTEMP_MASK,\n\n\t.bgap_mask_ctrl = OMAP5430_BGAP_CTRL_OFFSET,\n\t.mask_hot_mask = OMAP5430_MASK_HOT_CORE_MASK,\n\t.mask_cold_mask = OMAP5430_MASK_COLD_CORE_MASK,\n\t.mask_counter_delay_mask = OMAP5430_MASK_COUNTER_DELAY_MASK,\n\t.mask_freeze_mask = OMAP5430_MASK_FREEZE_CORE_MASK,\n\n\t.bgap_counter = OMAP5430_BGAP_CTRL_OFFSET,\n\t.counter_mask = OMAP5430_COUNTER_MASK,\n\n\t.bgap_threshold = OMAP5430_BGAP_THRESHOLD_CORE_OFFSET,\n\t.threshold_thot_mask = OMAP5430_T_HOT_MASK,\n\t.threshold_tcold_mask = OMAP5430_T_COLD_MASK,\n\n\t.tshut_threshold = OMAP5430_BGAP_TSHUT_CORE_OFFSET,\n\t.tshut_hot_mask = OMAP5430_TSHUT_HOT_MASK,\n\t.tshut_cold_mask = OMAP5430_TSHUT_COLD_MASK,\n\n\t.bgap_status = OMAP5430_BGAP_STATUS_OFFSET,\n\t.status_hot_mask = OMAP5430_HOT_CORE_FLAG_MASK,\n\t.status_cold_mask = OMAP5430_COLD_CORE_FLAG_MASK,\n\n\t.ctrl_dtemp_1 = OMAP5430_BGAP_DTEMP_CORE_1_OFFSET,\n\t.ctrl_dtemp_2 = OMAP5430_BGAP_DTEMP_CORE_2_OFFSET,\n\n\t.bgap_efuse = OMAP5430_FUSE_OPP_BGAP_CORE,\n};\n\n \nstatic struct temp_sensor_data omap5430_mpu_temp_sensor_data = {\n\t.tshut_hot = OMAP5430_MPU_TSHUT_HOT,\n\t.tshut_cold = OMAP5430_MPU_TSHUT_COLD,\n\t.t_hot = OMAP5430_MPU_T_HOT,\n\t.t_cold = OMAP5430_MPU_T_COLD,\n\t.min_freq = OMAP5430_MPU_MIN_FREQ,\n\t.max_freq = OMAP5430_MPU_MAX_FREQ,\n};\n\n \nstatic struct temp_sensor_data omap5430_gpu_temp_sensor_data = {\n\t.tshut_hot = OMAP5430_GPU_TSHUT_HOT,\n\t.tshut_cold = OMAP5430_GPU_TSHUT_COLD,\n\t.t_hot = OMAP5430_GPU_T_HOT,\n\t.t_cold = OMAP5430_GPU_T_COLD,\n\t.min_freq = OMAP5430_GPU_MIN_FREQ,\n\t.max_freq = OMAP5430_GPU_MAX_FREQ,\n};\n\n \nstatic struct temp_sensor_data omap5430_core_temp_sensor_data = {\n\t.tshut_hot = OMAP5430_CORE_TSHUT_HOT,\n\t.tshut_cold = OMAP5430_CORE_TSHUT_COLD,\n\t.t_hot = OMAP5430_CORE_T_HOT,\n\t.t_cold = OMAP5430_CORE_T_COLD,\n\t.min_freq = OMAP5430_CORE_MIN_FREQ,\n\t.max_freq = OMAP5430_CORE_MAX_FREQ,\n};\n\n \nstatic int\nomap5430_adc_to_temp[\n\tOMAP5430_ADC_END_VALUE - OMAP5430_ADC_START_VALUE + 1] = {\n\t \n\t-40000, -40000, -40000, -40000, -39800, -39400, -39000, -38600, -38200,\n\t-37800,\n\t \n\t-37400, -37000, -36600, -36200, -35800, -35300, -34700, -34200, -33800,\n\t-33400,\n\t \n\t-33000, -32600, -32200, -31800, -31400, -31000, -30600, -30200, -29800,\n\t-29400,\n\t \n\t-29000, -28600, -28200, -27700, -27100, -26600, -26200, -25800, -25400,\n\t-25000,\n\t \n\t-24600, -24200, -23800, -23400, -23000, -22600, -22200, -21600, -21400,\n\t-21000,\n\t \n\t-20500, -19900, -19400, -19000, -18600, -18200, -17800, -17400, -17000,\n\t-16600,\n\t \n\t-16200, -15800, -15400, -15000, -14600, -14200, -13800,\t-13400, -13000,\n\t-12500,\n\t \n\t-11900, -11400, -11000, -10600, -10200, -9800, -9400, -9000, -8600,\n\t-8200,\n\t \n\t-7800, -7400, -7000, -6600, -6200, -5800, -5400, -5000, -4500, -3900,\n\t \n\t-3400, -3000, -2600, -2200, -1800, -1400, -1000, -600, -200, 200,\n\t \n\t600, 1000, 1400, 1800, 2200, 2600, 3000, 3400, 3900, 4500,\n\t \n\t5000, 5400, 5800, 6200, 6600, 7000, 7400, 7800, 8200, 8600,\n\t \n\t9000, 9400, 9800, 10200, 10600, 11000, 11400, 11800, 12200, 12700,\n\t \n\t13300, 13800, 14200, 14600, 15000, 15400, 15800, 16200, 16600, 17000,\n\t \n\t17400, 17800, 18200, 18600, 19000, 19400, 19800, 20200, 20600, 21100,\n\t \n\t21400, 21900, 22500, 23000, 23400, 23800, 24200, 24600, 25000, 25400,\n\t \n\t25800, 26200, 26600, 27000, 27400, 27800, 28200, 28600, 29000, 29400,\n\t \n\t29800, 30200, 30600, 31000, 31400, 31900, 32500, 33000, 33400, 33800,\n\t \n\t34200, 34600, 35000, 35400, 35800, 36200, 36600, 37000, 37400, 37800,\n\t \n\t38200, 38600, 39000, 39400, 39800, 40200, 40600, 41000, 41400, 41800,\n\t \n\t42200, 42600, 43100, 43700, 44200, 44600, 45000, 45400, 45800, 46200,\n\t \n\t46600, 47000, 47400, 47800, 48200, 48600, 49000, 49400, 49800, 50200,\n\t \n\t50600, 51000, 51400, 51800, 52200, 52600, 53000, 53400, 53800, 54200,\n\t \n\t54600, 55000, 55400, 55900, 56500, 57000, 57400, 57800, 58200, 58600,\n\t \n\t59000, 59400, 59800, 60200, 60600, 61000, 61400, 61800, 62200, 62600,\n\t \n\t63000, 63400, 63800, 64200, 64600, 65000, 65400, 65800, 66200, 66600,\n\t \n\t67000, 67400, 67800, 68200, 68600, 69000, 69400, 69800, 70200, 70600,\n\t \n\t71000, 71500, 72100, 72600, 73000, 73400, 73800, 74200, 74600, 75000,\n\t \n\t75400, 75800, 76200, 76600, 77000, 77400, 77800, 78200, 78600, 79000,\n\t \n\t79400, 79800, 80200, 80600, 81000, 81400, 81800, 82200, 82600, 83000,\n\t \n\t83400, 83800, 84200, 84600, 85000, 85400, 85800, 86200, 86600, 87000,\n\t \n\t87400, 87800, 88200, 88600, 89000, 89400, 89800, 90200, 90600, 91000,\n\t \n\t91400, 91800, 92200, 92600, 93000, 93400, 93800, 94200, 94600, 95000,\n\t \n\t95400, 95800, 96200, 96600, 97000, 97500, 98100, 98600, 99000, 99400,\n\t \n\t99800, 100200, 100600, 101000, 101400, 101800, 102200, 102600, 103000,\n\t103400,\n\t \n\t103800, 104200, 104600, 105000, 105400, 105800, 106200, 106600, 107000,\n\t107400,\n\t \n\t107800, 108200, 108600, 109000, 109400, 109800, 110200, 110600, 111000,\n\t111400,\n\t \n\t111800, 112200, 112600, 113000, 113400, 113800, 114200, 114600, 115000,\n\t115400,\n\t \n\t115800, 116200, 116600, 117000, 117400, 117800, 118200, 118600, 119000,\n\t119400,\n\t \n\t119800, 120200, 120600, 121000, 121400, 121800, 122400, 122600, 123000,\n\t123400,\n\t \n\t123800, 124200, 124600, 124900, 125000, 125000,\n};\n\n \nconst struct ti_bandgap_data omap5430_data = {\n\t.features = TI_BANDGAP_FEATURE_TSHUT_CONFIG |\n\t\t\tTI_BANDGAP_FEATURE_FREEZE_BIT |\n\t\t\tTI_BANDGAP_FEATURE_TALERT |\n\t\t\tTI_BANDGAP_FEATURE_COUNTER_DELAY |\n\t\t\tTI_BANDGAP_FEATURE_HISTORY_BUFFER,\n\t.fclock_name = \"l3instr_ts_gclk_div\",\n\t.div_ck_name = \"l3instr_ts_gclk_div\",\n\t.conv_table = omap5430_adc_to_temp,\n\t.adc_start_val = OMAP5430_ADC_START_VALUE,\n\t.adc_end_val = OMAP5430_ADC_END_VALUE,\n\t.expose_sensor = ti_thermal_expose_sensor,\n\t.remove_sensor = ti_thermal_remove_sensor,\n\t.report_temperature = ti_thermal_report_sensor_temperature,\n\t.sensors = {\n\t\t{\n\t\t.registers = &omap5430_mpu_temp_sensor_registers,\n\t\t.ts_data = &omap5430_mpu_temp_sensor_data,\n\t\t.domain = \"cpu\",\n\t\t.register_cooling = ti_thermal_register_cpu_cooling,\n\t\t.unregister_cooling = ti_thermal_unregister_cpu_cooling,\n\t\t.slope_pcb = OMAP_GRADIENT_SLOPE_W_PCB_5430_CPU,\n\t\t.constant_pcb = OMAP_GRADIENT_CONST_W_PCB_5430_CPU,\n\t\t},\n\t\t{\n\t\t.registers = &omap5430_gpu_temp_sensor_registers,\n\t\t.ts_data = &omap5430_gpu_temp_sensor_data,\n\t\t.domain = \"gpu\",\n\t\t.slope_pcb = OMAP_GRADIENT_SLOPE_W_PCB_5430_GPU,\n\t\t.constant_pcb = OMAP_GRADIENT_CONST_W_PCB_5430_GPU,\n\t\t},\n\t\t{\n\t\t.registers = &omap5430_core_temp_sensor_registers,\n\t\t.ts_data = &omap5430_core_temp_sensor_data,\n\t\t.domain = \"core\",\n\t\t},\n\t},\n\t.sensor_count = 3,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}