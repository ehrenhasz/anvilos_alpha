{
  "module_name": "processor_thermal_device.h",
  "hash_id": "5a2e99b7ce37b873610ed15e6030423c8230014903a67be6e55a299b57c8736e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/thermal/intel/int340x_thermal/processor_thermal_device.h",
  "human_readable_source": " \n \n\n#ifndef __PROCESSOR_THERMAL_DEVICE_H__\n#define __PROCESSOR_THERMAL_DEVICE_H__\n\n#include <linux/intel_rapl.h>\n\n#define PCI_DEVICE_ID_INTEL_ADL_THERMAL\t0x461d\n#define PCI_DEVICE_ID_INTEL_BDW_THERMAL\t0x1603\n#define PCI_DEVICE_ID_INTEL_BSW_THERMAL\t0x22DC\n\n#define PCI_DEVICE_ID_INTEL_BXT0_THERMAL\t0x0A8C\n#define PCI_DEVICE_ID_INTEL_BXT1_THERMAL\t0x1A8C\n#define PCI_DEVICE_ID_INTEL_BXTX_THERMAL\t0x4A8C\n#define PCI_DEVICE_ID_INTEL_BXTP_THERMAL\t0x5A8C\n\n#define PCI_DEVICE_ID_INTEL_CNL_THERMAL\t0x5a03\n#define PCI_DEVICE_ID_INTEL_CFL_THERMAL\t0x3E83\n#define PCI_DEVICE_ID_INTEL_GLK_THERMAL\t0x318C\n#define PCI_DEVICE_ID_INTEL_HSB_THERMAL\t0x0A03\n#define PCI_DEVICE_ID_INTEL_ICL_THERMAL\t0x8a03\n#define PCI_DEVICE_ID_INTEL_JSL_THERMAL\t0x4E03\n#define PCI_DEVICE_ID_INTEL_MTLP_THERMAL\t0x7D03\n#define PCI_DEVICE_ID_INTEL_RPL_THERMAL\t0xA71D\n#define PCI_DEVICE_ID_INTEL_SKL_THERMAL\t0x1903\n#define PCI_DEVICE_ID_INTEL_TGL_THERMAL\t0x9A03\n\nstruct power_config {\n\tu32\tindex;\n\tu32\tmin_uw;\n\tu32\tmax_uw;\n\tu32\ttmin_us;\n\tu32\ttmax_us;\n\tu32\tstep_uw;\n};\n\nstruct proc_thermal_device {\n\tstruct device *dev;\n\tstruct acpi_device *adev;\n\tstruct power_config power_limits[2];\n\tstruct int34x_thermal_zone *int340x_zone;\n\tstruct intel_soc_dts_sensors *soc_dts;\n\tu32 mmio_feature_mask;\n\tvoid __iomem *mmio_base;\n\tvoid *priv_data;\n};\n\nstruct rapl_mmio_regs {\n\tu64 reg_unit;\n\tu64 regs[RAPL_DOMAIN_MAX][RAPL_DOMAIN_REG_MAX];\n\tint limits[RAPL_DOMAIN_MAX];\n};\n\n#define PROC_THERMAL_FEATURE_NONE\t0x00\n#define PROC_THERMAL_FEATURE_RAPL\t0x01\n#define PROC_THERMAL_FEATURE_FIVR\t0x02\n#define PROC_THERMAL_FEATURE_DVFS\t0x04\n#define PROC_THERMAL_FEATURE_MBOX\t0x08\n#define PROC_THERMAL_FEATURE_DLVR\t0x10\n\n#if IS_ENABLED(CONFIG_PROC_THERMAL_MMIO_RAPL)\nint proc_thermal_rapl_add(struct pci_dev *pdev, struct proc_thermal_device *proc_priv);\nvoid proc_thermal_rapl_remove(void);\n#else\nstatic int __maybe_unused proc_thermal_rapl_add(struct pci_dev *pdev,\n\t\t\t\t\t\tstruct proc_thermal_device *proc_priv)\n{\n\treturn 0;\n}\n\nstatic void __maybe_unused proc_thermal_rapl_remove(void)\n{\n}\n#endif\n\nint proc_thermal_rfim_add(struct pci_dev *pdev, struct proc_thermal_device *proc_priv);\nvoid proc_thermal_rfim_remove(struct pci_dev *pdev);\n\nint proc_thermal_mbox_add(struct pci_dev *pdev, struct proc_thermal_device *proc_priv);\nvoid proc_thermal_mbox_remove(struct pci_dev *pdev);\n\nint processor_thermal_send_mbox_read_cmd(struct pci_dev *pdev, u16 id, u64 *resp);\nint processor_thermal_send_mbox_write_cmd(struct pci_dev *pdev, u16 id, u32 data);\nint proc_thermal_add(struct device *dev, struct proc_thermal_device *priv);\nvoid proc_thermal_remove(struct proc_thermal_device *proc_priv);\nint proc_thermal_suspend(struct device *dev);\nint proc_thermal_resume(struct device *dev);\nint proc_thermal_mmio_add(struct pci_dev *pdev,\n\t\t\t  struct proc_thermal_device *proc_priv,\n\t\t\t  kernel_ulong_t feature_mask);\nvoid proc_thermal_mmio_remove(struct pci_dev *pdev, struct proc_thermal_device *proc_priv);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}