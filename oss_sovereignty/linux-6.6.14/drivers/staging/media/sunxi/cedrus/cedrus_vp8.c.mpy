{
  "module_name": "cedrus_vp8.c",
  "hash_id": "07ab3baad72cfebc4946ad17b32e302e0ade33c403db6bfbee9de6c64a26d182",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/sunxi/cedrus/cedrus_vp8.c",
  "human_readable_source": "\n \n\n \n\n#include <linux/delay.h>\n#include <linux/types.h>\n\n#include <media/videobuf2-dma-contig.h>\n\n#include \"cedrus.h\"\n#include \"cedrus_hw.h\"\n#include \"cedrus_regs.h\"\n\n#define CEDRUS_ENTROPY_PROBS_SIZE 0x2400\n#define VP8_PROB_HALF 128\n#define QUANT_DELTA_COUNT 5\n\n \nstatic const u8 prob_table_init[] = {\n\t \n\t \n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xB0, 0xF6, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xDF, 0xF1, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF9, 0xFD, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xF4, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEA, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xF6, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEF, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFB, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFB, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFD, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFA, 0xFF, 0xFE, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0xD9, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xE1, 0xFC, 0xF1, 0xFD, 0xFF, 0xFF, 0xFE, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEA, 0xFA, 0xF1, 0xFA, 0xFD, 0xFF, 0xFD, 0xFE,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xDF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEE, 0xFD, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF9, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF7, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFA, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0xBA, 0xFB, 0xFA, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEA, 0xFB, 0xF4, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFB, 0xFB, 0xF3, 0xFD, 0xFE, 0xFF, 0xFE, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xEC, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFB, 0xFD, 0xFD, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFA, 0xFE, 0xFC, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF8, 0xFE, 0xF9, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFD, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF6, 0xFD, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFC, 0xFE, 0xFB, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFE, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF8, 0xFE, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFD, 0xFF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFB, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF5, 0xFB, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFD, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFB, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFC, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xF9, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFA, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n\t0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x91, 0x9C, 0xA3, 0x80, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x6E, 0x6F, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x78, 0x5A, 0x4F, 0x85, 0x57, 0x55, 0x50, 0x6F,\n\t0x97, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x93, 0x88, 0x12, 0x00,\n\t0x6A, 0x91, 0x01, 0x00,\n\t0xB3, 0x79, 0x01, 0x00,\n\t0xDF, 0x01, 0x22, 0x00,\n\t0xD0, 0x01, 0x01, 0x00,\n\t0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x07, 0x01, 0x01, 0x8F,\n\t0x0E, 0x12, 0x0E, 0x6B,\n\t0x87, 0x40, 0x39, 0x44,\n\t0x3C, 0x38, 0x80, 0x41,\n\t0x9F, 0x86, 0x80, 0x22,\n\t0xEA, 0xBC, 0x80, 0x1C,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x84, 0x02, 0x04, 0x06, 0x80, 0x81, 0x82, 0x83,\n\n\t \n\t0x80, 0x02, 0x04, 0x06, 0x81, 0x82, 0x83, 0x84,\n\n\t \n\t0x80, 0x02, 0x81, 0x04, 0x82, 0x83, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00,\n\n\t \n\t0x02, 0x08, 0x04, 0x06, 0x80, 0x81, 0x82, 0x83,\n\t0x0A, 0x0C, 0x84, 0x85, 0x86, 0x87, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x02, 0x08, 0x04, 0x06, 0x80, 0x81, 0x82, 0x83,\n\t0x0A, 0x0C, 0x84, 0x85, 0x86, 0x87, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x83, 0x02, 0x82, 0x04, 0x80, 0x81, 0x00, 0x00,\n\n\t \n\t0x80, 0x02, 0x81, 0x04, 0x82, 0x06, 0x08, 0x0C,\n\t0x83, 0x0A, 0x85, 0x86, 0x84, 0x0E, 0x87, 0x10,\n\t0x88, 0x89, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x8A, 0x02, 0x8B, 0x04, 0x8C, 0x8D, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n\t \n\t0x87, 0x02, 0x85, 0x04, 0x86, 0x06, 0x88, 0x89,\n};\n\n \nstatic const u8 k_mv_entropy_update_probs[2][V4L2_VP8_MV_PROB_CNT] = {\n\t{ 237, 246, 253, 253, 254, 254, 254, 254, 254,\n\t  254, 254, 254, 254, 254, 250, 250, 252, 254, 254 },\n\t{ 231, 243, 245, 253, 254, 254, 254, 254, 254,\n\t  254, 254, 254, 254, 254, 251, 251, 254, 254, 254 }\n};\n\nstatic uint8_t read_bits(struct cedrus_dev *dev, unsigned int bits_count,\n\t\t\t unsigned int probability)\n{\n\tcedrus_write(dev, VE_H264_TRIGGER_TYPE,\n\t\t     VE_H264_TRIGGER_TYPE_VP8_GET_BITS |\n\t\t     VE_H264_TRIGGER_TYPE_BIN_LENS(bits_count) |\n\t\t     VE_H264_TRIGGER_TYPE_PROBABILITY(probability));\n\n\tcedrus_wait_for(dev, VE_H264_STATUS, VE_H264_STATUS_VLD_BUSY);\n\n\treturn cedrus_read(dev, VE_H264_BASIC_BITS);\n}\n\nstatic void get_delta_q(struct cedrus_dev *dev)\n{\n\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\tread_bits(dev, 4, VP8_PROB_HALF);\n\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t}\n}\n\nstatic void process_segmentation_info(struct cedrus_dev *dev)\n{\n\tint update, i;\n\n\tupdate = read_bits(dev, 1, VP8_PROB_HALF);\n\n\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\n\t\tfor (i = 0; i < 4; i++)\n\t\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\t\tread_bits(dev, 7, VP8_PROB_HALF);\n\t\t\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t\t\t}\n\n\t\tfor (i = 0; i < 4; i++)\n\t\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\t\tread_bits(dev, 6, VP8_PROB_HALF);\n\t\t\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t\t\t}\n\t}\n\n\tif (update)\n\t\tfor (i = 0; i < 3; i++)\n\t\t\tif (read_bits(dev, 1, VP8_PROB_HALF))\n\t\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n}\n\nstatic void process_ref_lf_delta_info(struct cedrus_dev *dev)\n{\n\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\tint i;\n\n\t\tfor (i = 0; i < 4; i++)\n\t\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\t\tread_bits(dev, 6, VP8_PROB_HALF);\n\t\t\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t\t\t}\n\n\t\tfor (i = 0; i < 4; i++)\n\t\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\t\tread_bits(dev, 6, VP8_PROB_HALF);\n\t\t\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t\t\t}\n\t}\n}\n\nstatic void process_ref_frame_info(struct cedrus_dev *dev)\n{\n\tu8 refresh_golden_frame = read_bits(dev, 1, VP8_PROB_HALF);\n\tu8 refresh_alt_ref_frame = read_bits(dev, 1, VP8_PROB_HALF);\n\n\tif (!refresh_golden_frame)\n\t\tread_bits(dev, 2, VP8_PROB_HALF);\n\n\tif (!refresh_alt_ref_frame)\n\t\tread_bits(dev, 2, VP8_PROB_HALF);\n\n\tread_bits(dev, 1, VP8_PROB_HALF);\n\tread_bits(dev, 1, VP8_PROB_HALF);\n}\n\nstatic void cedrus_irq_clear(struct cedrus_dev *dev)\n{\n\tcedrus_write(dev, VE_H264_STATUS,\n\t\t     VE_H264_STATUS_INT_MASK);\n}\n\nstatic void cedrus_read_header(struct cedrus_dev *dev,\n\t\t\t       const struct v4l2_ctrl_vp8_frame *slice)\n{\n\tint i, j;\n\n\tif (V4L2_VP8_FRAME_IS_KEY_FRAME(slice)) {\n\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\t}\n\n\tif (read_bits(dev, 1, VP8_PROB_HALF))\n\t\tprocess_segmentation_info(dev);\n\n\tread_bits(dev, 1, VP8_PROB_HALF);\n\tread_bits(dev, 6, VP8_PROB_HALF);\n\tread_bits(dev, 3, VP8_PROB_HALF);\n\n\tif (read_bits(dev, 1, VP8_PROB_HALF))\n\t\tprocess_ref_lf_delta_info(dev);\n\n\tread_bits(dev, 2, VP8_PROB_HALF);\n\n\t \n\tread_bits(dev, 7, VP8_PROB_HALF);\n\n\t \n\tfor (i = 0; i < QUANT_DELTA_COUNT; i++)\n\t\tget_delta_q(dev);\n\n\tif (!V4L2_VP8_FRAME_IS_KEY_FRAME(slice))\n\t\tprocess_ref_frame_info(dev);\n\n\tread_bits(dev, 1, VP8_PROB_HALF);\n\n\tif (!V4L2_VP8_FRAME_IS_KEY_FRAME(slice))\n\t\tread_bits(dev, 1, VP8_PROB_HALF);\n\n\tcedrus_write(dev, VE_H264_TRIGGER_TYPE, VE_H264_TRIGGER_TYPE_VP8_UPDATE_COEF);\n\tcedrus_wait_for(dev, VE_H264_STATUS, VE_H264_STATUS_VP8_UPPROB_BUSY);\n\tcedrus_irq_clear(dev);\n\n\tif (read_bits(dev, 1, VP8_PROB_HALF))\n\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\n\tif (!V4L2_VP8_FRAME_IS_KEY_FRAME(slice)) {\n\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\n\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t}\n\n\t\tif (read_bits(dev, 1, VP8_PROB_HALF)) {\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t\tread_bits(dev, 8, VP8_PROB_HALF);\n\t\t}\n\n\t\tfor (i = 0; i < 2; i++)\n\t\t\tfor (j = 0; j < V4L2_VP8_MV_PROB_CNT; j++)\n\t\t\t\tif (read_bits(dev, 1, k_mv_entropy_update_probs[i][j]))\n\t\t\t\t\tread_bits(dev, 7, VP8_PROB_HALF);\n\t}\n}\n\nstatic void cedrus_vp8_update_probs(const struct v4l2_ctrl_vp8_frame *slice,\n\t\t\t\t    u8 *prob_table)\n{\n\tint i, j, k;\n\n\tmemcpy(&prob_table[0x1008], slice->entropy.y_mode_probs,\n\t       sizeof(slice->entropy.y_mode_probs));\n\tmemcpy(&prob_table[0x1010], slice->entropy.uv_mode_probs,\n\t       sizeof(slice->entropy.uv_mode_probs));\n\n\tmemcpy(&prob_table[0x1018], slice->segment.segment_probs,\n\t       sizeof(slice->segment.segment_probs));\n\n\tprob_table[0x101c] = slice->prob_skip_false;\n\tprob_table[0x101d] = slice->prob_intra;\n\tprob_table[0x101e] = slice->prob_last;\n\tprob_table[0x101f] = slice->prob_gf;\n\n\tmemcpy(&prob_table[0x1020], slice->entropy.mv_probs[0],\n\t       V4L2_VP8_MV_PROB_CNT);\n\tmemcpy(&prob_table[0x1040], slice->entropy.mv_probs[1],\n\t       V4L2_VP8_MV_PROB_CNT);\n\n\tfor (i = 0; i < 4; ++i)\n\t\tfor (j = 0; j < 8; ++j)\n\t\t\tfor (k = 0; k < 3; ++k)\n\t\t\t\tmemcpy(&prob_table[i * 512 + j * 64 + k * 16],\n\t\t\t\t       slice->entropy.coeff_probs[i][j][k], 11);\n}\n\nstatic enum cedrus_irq_status\ncedrus_vp8_irq_status(struct cedrus_ctx *ctx)\n{\n\tstruct cedrus_dev *dev = ctx->dev;\n\tu32 reg = cedrus_read(dev, VE_H264_STATUS);\n\n\tif (reg & (VE_H264_STATUS_DECODE_ERR_INT |\n\t\t   VE_H264_STATUS_VLD_DATA_REQ_INT))\n\t\treturn CEDRUS_IRQ_ERROR;\n\n\tif (reg & VE_H264_CTRL_SLICE_DECODE_INT)\n\t\treturn CEDRUS_IRQ_OK;\n\n\treturn CEDRUS_IRQ_NONE;\n}\n\nstatic void cedrus_vp8_irq_clear(struct cedrus_ctx *ctx)\n{\n\tcedrus_irq_clear(ctx->dev);\n}\n\nstatic void cedrus_vp8_irq_disable(struct cedrus_ctx *ctx)\n{\n\tstruct cedrus_dev *dev = ctx->dev;\n\tu32 reg = cedrus_read(dev, VE_H264_CTRL);\n\n\tcedrus_write(dev, VE_H264_CTRL,\n\t\t     reg & ~VE_H264_CTRL_INT_MASK);\n}\n\nstatic int cedrus_vp8_setup(struct cedrus_ctx *ctx, struct cedrus_run *run)\n{\n\tconst struct v4l2_ctrl_vp8_frame *slice = run->vp8.frame_params;\n\tstruct vb2_queue *cap_q = &ctx->fh.m2m_ctx->cap_q_ctx.q;\n\tstruct vb2_buffer *src_buf = &run->src->vb2_buf;\n\tstruct cedrus_dev *dev = ctx->dev;\n\tdma_addr_t luma_addr, chroma_addr;\n\tdma_addr_t src_buf_addr;\n\tint header_size;\n\tu32 reg;\n\n\tcedrus_engine_enable(ctx);\n\n\tcedrus_write(dev, VE_H264_CTRL, VE_H264_CTRL_VP8);\n\n\tcedrus_vp8_update_probs(slice, ctx->codec.vp8.entropy_probs_buf);\n\n\treg = slice->first_part_size * 8;\n\tcedrus_write(dev, VE_VP8_FIRST_DATA_PART_LEN, reg);\n\n\theader_size = V4L2_VP8_FRAME_IS_KEY_FRAME(slice) ? 10 : 3;\n\n\treg = slice->first_part_size + header_size;\n\tcedrus_write(dev, VE_VP8_PART_SIZE_OFFSET, reg);\n\n\treg = vb2_plane_size(src_buf, 0) * 8;\n\tcedrus_write(dev, VE_H264_VLD_LEN, reg);\n\n\t \n\treg = header_size * 8;\n\tcedrus_write(dev, VE_H264_VLD_OFFSET, reg);\n\n\tsrc_buf_addr = vb2_dma_contig_plane_dma_addr(src_buf, 0);\n\tcedrus_write(dev, VE_H264_VLD_END,\n\t\t     src_buf_addr + vb2_get_plane_payload(src_buf, 0));\n\tcedrus_write(dev, VE_H264_VLD_ADDR,\n\t\t     VE_H264_VLD_ADDR_VAL(src_buf_addr) |\n\t\t     VE_H264_VLD_ADDR_FIRST | VE_H264_VLD_ADDR_VALID |\n\t\t     VE_H264_VLD_ADDR_LAST);\n\n\tcedrus_write(dev, VE_H264_TRIGGER_TYPE,\n\t\t     VE_H264_TRIGGER_TYPE_INIT_SWDEC);\n\n\tcedrus_write(dev, VE_VP8_ENTROPY_PROBS_ADDR,\n\t\t     ctx->codec.vp8.entropy_probs_buf_dma);\n\n\treg = 0;\n\tswitch (slice->version) {\n\tcase 1:\n\t\treg |= VE_VP8_PPS_FILTER_TYPE_SIMPLE;\n\t\treg |= VE_VP8_PPS_BILINEAR_MC_FILTER;\n\t\tbreak;\n\tcase 2:\n\t\treg |= VE_VP8_PPS_LPF_DISABLE;\n\t\treg |= VE_VP8_PPS_BILINEAR_MC_FILTER;\n\t\tbreak;\n\tcase 3:\n\t\treg |= VE_VP8_PPS_LPF_DISABLE;\n\t\treg |= VE_VP8_PPS_FULL_PIXEL;\n\t\tbreak;\n\t}\n\tif (slice->segment.flags & V4L2_VP8_SEGMENT_FLAG_UPDATE_MAP)\n\t\treg |= VE_VP8_PPS_UPDATE_MB_SEGMENTATION_MAP;\n\tif (!(slice->segment.flags & V4L2_VP8_SEGMENT_FLAG_DELTA_VALUE_MODE))\n\t\treg |= VE_VP8_PPS_MB_SEGMENT_ABS_DELTA;\n\tif (slice->segment.flags & V4L2_VP8_SEGMENT_FLAG_ENABLED)\n\t\treg |= VE_VP8_PPS_SEGMENTATION_ENABLE;\n\tif (ctx->codec.vp8.last_filter_type)\n\t\treg |= VE_VP8_PPS_LAST_LOOP_FILTER_SIMPLE;\n\treg |= VE_VP8_PPS_SHARPNESS_LEVEL(slice->lf.sharpness_level);\n\tif (slice->lf.flags & V4L2_VP8_LF_FILTER_TYPE_SIMPLE)\n\t\treg |= VE_VP8_PPS_LOOP_FILTER_SIMPLE;\n\treg |= VE_VP8_PPS_LOOP_FILTER_LEVEL(slice->lf.level);\n\tif (slice->lf.flags & V4L2_VP8_LF_ADJ_ENABLE)\n\t\treg |= VE_VP8_PPS_MODE_REF_LF_DELTA_ENABLE;\n\tif (slice->lf.flags & V4L2_VP8_LF_DELTA_UPDATE)\n\t\treg |= VE_VP8_PPS_MODE_REF_LF_DELTA_UPDATE;\n\treg |= VE_VP8_PPS_TOKEN_PARTITION(ilog2(slice->num_dct_parts));\n\tif (slice->flags & V4L2_VP8_FRAME_FLAG_MB_NO_SKIP_COEFF)\n\t\treg |= VE_VP8_PPS_MB_NO_COEFF_SKIP;\n\treg |= VE_VP8_PPS_RELOAD_ENTROPY_PROBS;\n\tif (slice->flags & V4L2_VP8_FRAME_FLAG_SIGN_BIAS_GOLDEN)\n\t\treg |= VE_VP8_PPS_GOLDEN_SIGN_BIAS;\n\tif (slice->flags & V4L2_VP8_FRAME_FLAG_SIGN_BIAS_ALT)\n\t\treg |= VE_VP8_PPS_ALTREF_SIGN_BIAS;\n\tif (ctx->codec.vp8.last_frame_p_type)\n\t\treg |= VE_VP8_PPS_LAST_PIC_TYPE_P_FRAME;\n\treg |= VE_VP8_PPS_LAST_SHARPNESS_LEVEL(ctx->codec.vp8.last_sharpness_level);\n\tif (!(slice->flags & V4L2_VP8_FRAME_FLAG_KEY_FRAME))\n\t\treg |= VE_VP8_PPS_PIC_TYPE_P_FRAME;\n\tcedrus_write(dev, VE_VP8_PPS, reg);\n\n\tcedrus_read_header(dev, slice);\n\n\t \n\tcedrus_write(dev, VE_H264_CUR_MB_NUM, 0);\n\tcedrus_write(dev, VE_H264_MB_ADDR, 0);\n\tcedrus_write(dev, VE_H264_ERROR_CASE, 0);\n\n\treg = 0;\n\treg |= VE_VP8_QP_INDEX_DELTA_UVAC(slice->quant.uv_ac_delta);\n\treg |= VE_VP8_QP_INDEX_DELTA_UVDC(slice->quant.uv_dc_delta);\n\treg |= VE_VP8_QP_INDEX_DELTA_Y2AC(slice->quant.y2_ac_delta);\n\treg |= VE_VP8_QP_INDEX_DELTA_Y2DC(slice->quant.y2_dc_delta);\n\treg |= VE_VP8_QP_INDEX_DELTA_Y1DC(slice->quant.y_dc_delta);\n\treg |= VE_VP8_QP_INDEX_DELTA_BASE_QINDEX(slice->quant.y_ac_qi);\n\tcedrus_write(dev, VE_VP8_QP_INDEX_DELTA, reg);\n\n\treg = 0;\n\treg |= VE_VP8_FSIZE_WIDTH(slice->width);\n\treg |= VE_VP8_FSIZE_HEIGHT(slice->height);\n\tcedrus_write(dev, VE_VP8_FSIZE, reg);\n\n\treg = 0;\n\treg |= VE_VP8_PICSIZE_WIDTH(slice->width);\n\treg |= VE_VP8_PICSIZE_HEIGHT(slice->height);\n\tcedrus_write(dev, VE_VP8_PICSIZE, reg);\n\n\treg = 0;\n\treg |= VE_VP8_SEGMENT3(slice->segment.quant_update[3]);\n\treg |= VE_VP8_SEGMENT2(slice->segment.quant_update[2]);\n\treg |= VE_VP8_SEGMENT1(slice->segment.quant_update[1]);\n\treg |= VE_VP8_SEGMENT0(slice->segment.quant_update[0]);\n\tcedrus_write(dev, VE_VP8_SEGMENT_FEAT_MB_LV0, reg);\n\n\treg = 0;\n\treg |= VE_VP8_SEGMENT3(slice->segment.lf_update[3]);\n\treg |= VE_VP8_SEGMENT2(slice->segment.lf_update[2]);\n\treg |= VE_VP8_SEGMENT1(slice->segment.lf_update[1]);\n\treg |= VE_VP8_SEGMENT0(slice->segment.lf_update[0]);\n\tcedrus_write(dev, VE_VP8_SEGMENT_FEAT_MB_LV1, reg);\n\n\treg = 0;\n\treg |= VE_VP8_LF_DELTA3(slice->lf.ref_frm_delta[3]);\n\treg |= VE_VP8_LF_DELTA2(slice->lf.ref_frm_delta[2]);\n\treg |= VE_VP8_LF_DELTA1(slice->lf.ref_frm_delta[1]);\n\treg |= VE_VP8_LF_DELTA0(slice->lf.ref_frm_delta[0]);\n\tcedrus_write(dev, VE_VP8_REF_LF_DELTA, reg);\n\n\treg = 0;\n\treg |= VE_VP8_LF_DELTA3(slice->lf.mb_mode_delta[3]);\n\treg |= VE_VP8_LF_DELTA2(slice->lf.mb_mode_delta[2]);\n\treg |= VE_VP8_LF_DELTA1(slice->lf.mb_mode_delta[1]);\n\treg |= VE_VP8_LF_DELTA0(slice->lf.mb_mode_delta[0]);\n\tcedrus_write(dev, VE_VP8_MODE_LF_DELTA, reg);\n\n\tluma_addr = cedrus_dst_buf_addr(ctx, &run->dst->vb2_buf, 0);\n\tchroma_addr = cedrus_dst_buf_addr(ctx, &run->dst->vb2_buf, 1);\n\tcedrus_write(dev, VE_VP8_REC_LUMA, luma_addr);\n\tcedrus_write(dev, VE_VP8_REC_CHROMA, chroma_addr);\n\n\tcedrus_write_ref_buf_addr(ctx, cap_q, slice->last_frame_ts,\n\t\t\t\t  VE_VP8_FWD_LUMA, VE_VP8_FWD_CHROMA);\n\tcedrus_write_ref_buf_addr(ctx, cap_q, slice->golden_frame_ts,\n\t\t\t\t  VE_VP8_BWD_LUMA, VE_VP8_BWD_CHROMA);\n\tcedrus_write_ref_buf_addr(ctx, cap_q, slice->alt_frame_ts,\n\t\t\t\t  VE_VP8_ALT_LUMA, VE_VP8_ALT_CHROMA);\n\n\tcedrus_write(dev, VE_H264_CTRL, VE_H264_CTRL_VP8 |\n\t\t     VE_H264_CTRL_DECODE_ERR_INT |\n\t\t     VE_H264_CTRL_SLICE_DECODE_INT);\n\n\tif (slice->lf.level) {\n\t\tctx->codec.vp8.last_filter_type =\n\t\t\t!!(slice->lf.flags & V4L2_VP8_LF_FILTER_TYPE_SIMPLE);\n\t\tctx->codec.vp8.last_frame_p_type =\n\t\t\t!V4L2_VP8_FRAME_IS_KEY_FRAME(slice);\n\t\tctx->codec.vp8.last_sharpness_level =\n\t\t\tslice->lf.sharpness_level;\n\t}\n\n\treturn 0;\n}\n\nstatic int cedrus_vp8_start(struct cedrus_ctx *ctx)\n{\n\tstruct cedrus_dev *dev = ctx->dev;\n\n\tctx->codec.vp8.entropy_probs_buf =\n\t\tdma_alloc_coherent(dev->dev, CEDRUS_ENTROPY_PROBS_SIZE,\n\t\t\t\t   &ctx->codec.vp8.entropy_probs_buf_dma,\n\t\t\t\t   GFP_KERNEL);\n\tif (!ctx->codec.vp8.entropy_probs_buf)\n\t\treturn -ENOMEM;\n\n\t \n\tmemcpy(&ctx->codec.vp8.entropy_probs_buf[2048],\n\t       prob_table_init, sizeof(prob_table_init));\n\n\treturn 0;\n}\n\nstatic void cedrus_vp8_stop(struct cedrus_ctx *ctx)\n{\n\tstruct cedrus_dev *dev = ctx->dev;\n\n\tcedrus_engine_disable(dev);\n\n\tdma_free_coherent(dev->dev, CEDRUS_ENTROPY_PROBS_SIZE,\n\t\t\t  ctx->codec.vp8.entropy_probs_buf,\n\t\t\t  ctx->codec.vp8.entropy_probs_buf_dma);\n}\n\nstatic void cedrus_vp8_trigger(struct cedrus_ctx *ctx)\n{\n\tstruct cedrus_dev *dev = ctx->dev;\n\n\tcedrus_write(dev, VE_H264_TRIGGER_TYPE,\n\t\t     VE_H264_TRIGGER_TYPE_VP8_SLICE_DECODE);\n}\n\nstruct cedrus_dec_ops cedrus_dec_ops_vp8 = {\n\t.irq_clear\t= cedrus_vp8_irq_clear,\n\t.irq_disable\t= cedrus_vp8_irq_disable,\n\t.irq_status\t= cedrus_vp8_irq_status,\n\t.setup\t\t= cedrus_vp8_setup,\n\t.start\t\t= cedrus_vp8_start,\n\t.stop\t\t= cedrus_vp8_stop,\n\t.trigger\t= cedrus_vp8_trigger,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}