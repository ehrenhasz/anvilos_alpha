{
  "module_name": "ipu3-abi.h",
  "hash_id": "7bd0f9e683efd5cc9be8fa65442cce7d398b87d59a6f411fe51d0f10e1f52104",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/ipu3/ipu3-abi.h",
  "human_readable_source": " \n \n\n#ifndef __IPU3_ABI_H\n#define __IPU3_ABI_H\n\n#include \"include/uapi/intel-ipu3.h\"\n\n \n\ntypedef u32 imgu_addr_t;\n\n#define IMGU_ISP_VMEM_ALIGN\t\t\t128\n#define IMGU_DVS_BLOCK_W\t\t\t64\n#define IMGU_DVS_BLOCK_H\t\t\t32\n#define IMGU_GDC_BUF_X\t\t\t\t(2 * IMGU_DVS_BLOCK_W)\n#define IMGU_GDC_BUF_Y\t\t\t\tIMGU_DVS_BLOCK_H\n \n#define IMGU_SP_PMEM_BASE(n)\t\t\t(0x20000 + (n) * 0x4000)\n#define IMGU_MAX_BQ_GRID_WIDTH\t\t\t80\n#define IMGU_MAX_BQ_GRID_HEIGHT\t\t\t60\n#define IMGU_OBGRID_TILE_SIZE\t\t\t16\n#define IMGU_PIXELS_PER_WORD\t\t\t50\n#define IMGU_BYTES_PER_WORD\t\t\t64\n#define IMGU_STRIPE_FIXED_HALF_OVERLAP\t\t2\n#define IMGU_SHD_SETS\t\t\t\t3\n#define IMGU_BDS_MIN_CLIP_VAL\t\t\t0\n#define IMGU_BDS_MAX_CLIP_VAL\t\t\t2\n\n#define IMGU_ABI_AWB_MAX_CELLS_PER_SET\t\t160\n#define IMGU_ABI_AF_MAX_CELLS_PER_SET\t\t32\n#define IMGU_ABI_AWB_FR_MAX_CELLS_PER_SET\t32\n\n#define IMGU_ABI_ACC_OP_IDLE\t\t\t0\n#define IMGU_ABI_ACC_OP_END_OF_ACK\t\t1\n#define IMGU_ABI_ACC_OP_END_OF_OPS\t\t2\n#define IMGU_ABI_ACC_OP_NO_OPS\t\t\t3\n\n#define IMGU_ABI_ACC_OPTYPE_PROCESS_LINES\t0\n#define IMGU_ABI_ACC_OPTYPE_TRANSFER_DATA\t1\n\n \n\n \n#define IMGU_REG_PM_CTRL\t\t\t0x0\n#define IMGU_PM_CTRL_START\t\t\tBIT(0)\n#define IMGU_PM_CTRL_CFG_DONE\t\t\tBIT(1)\n#define IMGU_PM_CTRL_RACE_TO_HALT\t\tBIT(2)\n#define IMGU_PM_CTRL_NACK_ALL\t\t\tBIT(3)\n#define IMGU_PM_CTRL_CSS_PWRDN\t\t\tBIT(4)\n#define IMGU_PM_CTRL_RST_AT_EOF\t\t\tBIT(5)\n#define IMGU_PM_CTRL_FORCE_HALT\t\t\tBIT(6)\n#define IMGU_PM_CTRL_FORCE_UNHALT\t\tBIT(7)\n#define IMGU_PM_CTRL_FORCE_PWRDN\t\tBIT(8)\n#define IMGU_PM_CTRL_FORCE_RESET\t\tBIT(9)\n\n \n#define IMGU_REG_SYSTEM_REQ\t\t\t0x18\n#define IMGU_SYSTEM_REQ_FREQ_MASK\t\t0x3f\n#define IMGU_SYSTEM_REQ_FREQ_DIVIDER\t\t25\n#define IMGU_REG_INT_STATUS\t\t\t0x30\n#define IMGU_REG_INT_ENABLE\t\t\t0x34\n#define IMGU_REG_INT_CSS_IRQ\t\t\tBIT(31)\n \n#define IMGU_REG_STATE\t\t\t\t0x130\n#define IMGU_STATE_HALT_STS\t\t\tBIT(0)\n#define IMGU_STATE_IDLE_STS\t\t\tBIT(1)\n#define IMGU_STATE_POWER_UP\t\t\tBIT(2)\n#define IMGU_STATE_POWER_DOWN\t\t\tBIT(3)\n#define IMGU_STATE_CSS_BUSY_MASK\t\t0xc0\n#define IMGU_STATE_PM_FSM_MASK\t\t\t0x180\n#define IMGU_STATE_PWRDNM_FSM_MASK\t\t0x1E00000\n \n#define IMGU_REG_PM_STS\t\t\t\t0x140\n\n#define IMGU_REG_BASE\t\t\t\t0x4000\n\n#define IMGU_REG_ISP_CTRL\t\t\t(IMGU_REG_BASE + 0x00)\n#define IMGU_CTRL_RST\t\t\t\tBIT(0)\n#define IMGU_CTRL_START\t\t\t\tBIT(1)\n#define IMGU_CTRL_BREAK\t\t\t\tBIT(2)\n#define IMGU_CTRL_RUN\t\t\t\tBIT(3)\n#define IMGU_CTRL_BROKEN\t\t\tBIT(4)\n#define IMGU_CTRL_IDLE\t\t\t\tBIT(5)\n#define IMGU_CTRL_SLEEPING\t\t\tBIT(6)\n#define IMGU_CTRL_STALLING\t\t\tBIT(7)\n#define IMGU_CTRL_IRQ_CLEAR\t\t\tBIT(8)\n#define IMGU_CTRL_IRQ_READY\t\t\tBIT(10)\n#define IMGU_CTRL_IRQ_SLEEPING\t\t\tBIT(11)\n#define IMGU_CTRL_ICACHE_INV\t\t\tBIT(12)\n#define IMGU_CTRL_IPREFETCH_EN\t\t\tBIT(13)\n#define IMGU_REG_ISP_START_ADDR\t\t\t(IMGU_REG_BASE + 0x04)\n#define IMGU_REG_ISP_ICACHE_ADDR\t\t(IMGU_REG_BASE + 0x10)\n#define IMGU_REG_ISP_PC\t\t\t\t(IMGU_REG_BASE + 0x1c)\n\n \n#define IMGU_REG_SP_CTRL(sp)\t\t(IMGU_REG_BASE + (sp) * 0x100 + 0x100)\n\t \n#define IMGU_REG_SP_START_ADDR(sp)\t(IMGU_REG_BASE + (sp) * 0x100 + 0x104)\n#define IMGU_REG_SP_ICACHE_ADDR(sp)\t(IMGU_REG_BASE + (sp) * 0x100 + 0x11c)\n#define IMGU_REG_SP_CTRL_SINK(sp)\t(IMGU_REG_BASE + (sp) * 0x100 + 0x130)\n#define IMGU_REG_SP_PC(sp)\t\t(IMGU_REG_BASE + (sp) * 0x100 + 0x134)\n\n#define IMGU_REG_TLB_INVALIDATE\t\t(IMGU_REG_BASE + 0x300)\n#define IMGU_TLB_INVALIDATE\t\t\t1\n#define IMGU_REG_L1_PHYS\t\t(IMGU_REG_BASE + 0x304)  \n\n#define IMGU_REG_CIO_GATE_BURST_STATE\t(IMGU_REG_BASE + 0x404)\n#define IMGU_CIO_GATE_BURST_MASK        0x80\n\n#define IMGU_REG_GP_BUSY\t\t(IMGU_REG_BASE + 0x500)\n#define IMGU_REG_GP_STARVING\t\t(IMGU_REG_BASE + 0x504)\n#define IMGU_REG_GP_WORKLOAD\t\t(IMGU_REG_BASE + 0x508)\n#define IMGU_REG_GP_IRQ(n)\t(IMGU_REG_BASE + (n) * 4 + 0x50c)  \n#define IMGU_REG_GP_SP1_STRMON_STAT\t(IMGU_REG_BASE + 0x520)\n#define IMGU_REG_GP_SP2_STRMON_STAT\t(IMGU_REG_BASE + 0x524)\n#define IMGU_REG_GP_ISP_STRMON_STAT\t(IMGU_REG_BASE + 0x528)\n#define IMGU_REG_GP_MOD_STRMON_STAT\t(IMGU_REG_BASE + 0x52c)\n\n \n \n#define IMGU_GP_STRMON_STAT_SP1_PORT_SP12DMA\t\tBIT(0)\n#define IMGU_GP_STRMON_STAT_SP1_PORT_DMA2SP1\t\tBIT(2)\n#define IMGU_GP_STRMON_STAT_SP1_PORT_SP12SP2\t\tBIT(4)\n#define IMGU_GP_STRMON_STAT_SP1_PORT_SP22SP1\t\tBIT(6)\n#define IMGU_GP_STRMON_STAT_SP1_PORT_SP12ISP\t\tBIT(8)\n#define IMGU_GP_STRMON_STAT_SP1_PORT_ISP2SP1\t\tBIT(10)\n\n#define IMGU_GP_STRMON_STAT_SP2_PORT_SP22DMA\t\tBIT(0)\n#define IMGU_GP_STRMON_STAT_SP2_PORT_DMA2SP2\t\tBIT(2)\n#define IMGU_GP_STRMON_STAT_SP2_PORT_SP22SP1\t\tBIT(4)\n#define IMGU_GP_STRMON_STAT_SP2_PORT_SP12SP2\t\tBIT(6)\n\n#define IMGU_GP_STRMON_STAT_ISP_PORT_ISP2DMA\t\tBIT(0)\n#define IMGU_GP_STRMON_STAT_ISP_PORT_DMA2ISP\t\tBIT(2)\n#define IMGU_GP_STRMON_STAT_ISP_PORT_ISP2SP1\t\tBIT(4)\n#define IMGU_GP_STRMON_STAT_ISP_PORT_SP12ISP\t\tBIT(6)\n\n \n#define IMGU_GP_STRMON_STAT_MOD_PORT_SP12DMA\t\tBIT(0)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_DMA2SP1\t\tBIT(2)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_SP22DMA\t\tBIT(4)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_DMA2SP2\t\tBIT(6)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_ISP2DMA\t\tBIT(8)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_DMA2ISP\t\tBIT(10)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_CELLS2GDC\t\tBIT(12)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_GDC2CELLS\t\tBIT(14)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_CELLS2DECOMP\tBIT(16)\n#define IMGU_GP_STRMON_STAT_MOD_PORT_DECOMP2CELLS\tBIT(18)\n \n#define IMGU_GP_STRMON_STAT_MOD_PORT_S2V(n)\t(1 << (((n) - 1) * 2 + 20))\n\n \n#define IMGU_GP_STRMON_STAT_ACCS_PORT_ACC(n)\t\t(1 << (((n) - 1) * 2))\n\n \n#define IMGU_GP_STRMON_STAT_ACCS2SP1_MON_PORT_ACC(n)\t(1 << (((n) - 1) * 2))\n\n \n#define IMGU_GP_STRMON_STAT_ACCS2SP2_MON_PORT_ACC(n)\t(1 << (((n) - 1) * 2))\n\n#define IMGU_REG_GP_HALT\t\t\t\t(IMGU_REG_BASE + 0x5dc)\n\n\t\t\t\t\t \n#define IMGU_REG_IRQCTRL_BASE(n)\t(IMGU_REG_BASE + (n) * 0x100 + 0x700)\n#define IMGU_IRQCTRL_MAIN\t\t\t0\n#define IMGU_IRQCTRL_SP0\t\t\t1\n#define IMGU_IRQCTRL_SP1\t\t\t2\n#define IMGU_IRQCTRL_NUM\t\t\t3\n#define IMGU_IRQCTRL_IRQ_SP1\t\t\tBIT(0)\n#define IMGU_IRQCTRL_IRQ_SP2\t\t\tBIT(1)\n#define IMGU_IRQCTRL_IRQ_ISP\t\t\tBIT(2)\n#define IMGU_IRQCTRL_IRQ_SP1_STREAM_MON\t\tBIT(3)\n#define IMGU_IRQCTRL_IRQ_SP2_STREAM_MON\t\tBIT(4)\n#define IMGU_IRQCTRL_IRQ_ISP_STREAM_MON\t\tBIT(5)\n#define IMGU_IRQCTRL_IRQ_MOD_STREAM_MON\t\tBIT(6)\n#define IMGU_IRQCTRL_IRQ_MOD_ISP_STREAM_MON\tBIT(7)\n#define IMGU_IRQCTRL_IRQ_ACCS_STREAM_MON\tBIT(8)\n#define IMGU_IRQCTRL_IRQ_ACCS_SP1_STREAM_MON\tBIT(9)\n#define IMGU_IRQCTRL_IRQ_ACCS_SP2_STREAM_MON\tBIT(10)\n#define IMGU_IRQCTRL_IRQ_ISP_PMEM_ERROR\t\tBIT(11)\n#define IMGU_IRQCTRL_IRQ_ISP_BAMEM_ERROR\tBIT(12)\n#define IMGU_IRQCTRL_IRQ_ISP_VMEM_ERROR\t\tBIT(13)\n#define IMGU_IRQCTRL_IRQ_ISP_DMEM_ERROR\t\tBIT(14)\n#define IMGU_IRQCTRL_IRQ_SP1_ICACHE_MEM_ERROR\tBIT(15)\n#define IMGU_IRQCTRL_IRQ_SP1_DMEM_ERROR\t\tBIT(16)\n#define IMGU_IRQCTRL_IRQ_SP2_ICACHE_MEM_ERROR\tBIT(17)\n#define IMGU_IRQCTRL_IRQ_SP2_DMEM_ERROR\t\tBIT(18)\n#define IMGU_IRQCTRL_IRQ_ACCS_SCRATCH_MEM_ERROR\tBIT(19)\n#define IMGU_IRQCTRL_IRQ_GP_TIMER(n)\t\tBIT(20 + (n))  \n#define IMGU_IRQCTRL_IRQ_DMA\t\t\tBIT(22)\n#define IMGU_IRQCTRL_IRQ_SW_PIN(n)\t\tBIT(23 + (n))  \n#define IMGU_IRQCTRL_IRQ_ACC_SYS\t\tBIT(28)\n#define IMGU_IRQCTRL_IRQ_OUT_FORM_IRQ_CTRL\tBIT(29)\n#define IMGU_IRQCTRL_IRQ_SP1_IRQ_CTRL\t\tBIT(30)\n#define IMGU_IRQCTRL_IRQ_SP2_IRQ_CTRL\t\tBIT(31)\n#define IMGU_REG_IRQCTRL_EDGE(n)\t(IMGU_REG_IRQCTRL_BASE(n) + 0x00)\n#define IMGU_REG_IRQCTRL_MASK(n)\t(IMGU_REG_IRQCTRL_BASE(n) + 0x04)\n#define IMGU_REG_IRQCTRL_STATUS(n)\t(IMGU_REG_IRQCTRL_BASE(n) + 0x08)\n#define IMGU_REG_IRQCTRL_CLEAR(n)\t(IMGU_REG_IRQCTRL_BASE(n) + 0x0c)\n#define IMGU_REG_IRQCTRL_ENABLE(n)\t(IMGU_REG_IRQCTRL_BASE(n) + 0x10)\n#define IMGU_REG_IRQCTRL_EDGE_NOT_PULSE(n) (IMGU_REG_IRQCTRL_BASE(n) + 0x14)\n#define IMGU_REG_IRQCTRL_STR_OUT_ENABLE(n) (IMGU_REG_IRQCTRL_BASE(n) + 0x18)\n\n#define IMGU_REG_GP_TIMER\t\t(IMGU_REG_BASE + 0xa34)\n\n#define IMGU_REG_SP_DMEM_BASE(n)\t(IMGU_REG_BASE + (n) * 0x4000 + 0x4000)\n#define IMGU_REG_ISP_DMEM_BASE\t\t(IMGU_REG_BASE + 0xc000)\n\n#define IMGU_REG_GDC_BASE\t\t(IMGU_REG_BASE + 0x18000)\n#define IMGU_REG_GDC_LUT_BASE\t\t(IMGU_REG_GDC_BASE + 0x140)\n#define IMGU_GDC_LUT_MASK\t\t((1 << 12) - 1)  \n\n#define IMGU_SCALER_PHASES\t\t\t32\n#define IMGU_SCALER_COEFF_BITS\t\t\t24\n#define IMGU_SCALER_PHASE_COUNTER_PREC_REF\t6\n#define IMGU_SCALER_MAX_EXPONENT_SHIFT\t\t3\n#define IMGU_SCALER_FILTER_TAPS\t\t\t4\n#define IMGU_SCALER_TAPS_Y\t\t\tIMGU_SCALER_FILTER_TAPS\n#define IMGU_SCALER_TAPS_UV\t\t\t(IMGU_SCALER_FILTER_TAPS / 2)\n#define IMGU_SCALER_FIR_PHASES \\\n\t\t(IMGU_SCALER_PHASES << IMGU_SCALER_PHASE_COUNTER_PREC_REF)\n\n \n\n#define IMGU_ABI_SHD_MAX_PROCESS_LINES\t\t31\n#define IMGU_ABI_SHD_MAX_TRANSFERS\t\t31\n#define IMGU_ABI_SHD_MAX_OPERATIONS \\\n\t\t(IMGU_ABI_SHD_MAX_PROCESS_LINES + IMGU_ABI_SHD_MAX_TRANSFERS)\n#define IMGU_ABI_SHD_MAX_CELLS_PER_SET\t\t146\n \n#define IMGU_ABI_SHD_MAX_CFG_SETS\t\t(2 * 28)\n\n#define IMGU_ABI_DVS_STAT_MAX_OPERATIONS\t100\n#define IMGU_ABI_DVS_STAT_MAX_PROCESS_LINES\t52\n#define IMGU_ABI_DVS_STAT_MAX_TRANSFERS\t\t52\n\n#define IMGU_ABI_BDS_SAMPLE_PATTERN_ARRAY_SIZE\t8\n#define IMGU_ABI_BDS_PHASE_COEFFS_ARRAY_SIZE\t32\n\n#define IMGU_ABI_AWB_FR_MAX_TRANSFERS\t\t30\n#define IMGU_ABI_AWB_FR_MAX_PROCESS_LINES\t30\n#define IMGU_ABI_AWB_FR_MAX_OPERATIONS \\\n\t(IMGU_ABI_AWB_FR_MAX_TRANSFERS + IMGU_ABI_AWB_FR_MAX_PROCESS_LINES)\n\n#define IMGU_ABI_AF_MAX_TRANSFERS\t\t30\n#define IMGU_ABI_AF_MAX_PROCESS_LINES\t\t30\n#define IMGU_ABI_AF_MAX_OPERATIONS \\\n\t\t(IMGU_ABI_AF_MAX_TRANSFERS + IMGU_ABI_AF_MAX_PROCESS_LINES)\n\n#define IMGU_ABI_AWB_MAX_PROCESS_LINES\t\t68\n#define IMGU_ABI_AWB_MAX_TRANSFERS\t\t68\n#define IMGU_ABI_AWB_MAX_OPERATIONS \\\n\t\t(IMGU_ABI_AWB_MAX_PROCESS_LINES + IMGU_ABI_AWB_MAX_TRANSFERS)\n\n#define IMGU_ABI_OSYS_PIN_VF\t\t\t0\n#define IMGU_ABI_OSYS_PIN_OUT\t\t\t1\n#define IMGU_ABI_OSYS_PINS\t\t\t2\n\n#define IMGU_ABI_DVS_STAT_LEVELS\t\t3\n#define IMGU_ABI_YUVP2_YTM_LUT_ENTRIES\t\t256\n#define IMGU_ABI_GDC_FRAC_BITS\t\t\t8\n#define IMGU_ABI_BINARY_MAX_OUTPUT_PORTS\t2\n#define IMGU_ABI_MAX_BINARY_NAME\t\t64\n#define IMGU_ABI_ISP_DDR_WORD_BITS\t\t256\n#define IMGU_ABI_ISP_DDR_WORD_BYTES\t(IMGU_ABI_ISP_DDR_WORD_BITS / 8)\n#define IMGU_ABI_MAX_STAGES\t\t\t3\n#define IMGU_ABI_MAX_IF_CONFIGS\t\t\t3\n#define IMGU_ABI_PIPE_CONFIG_ACQUIRE_ISP\tBIT(31)\n#define IMGU_ABI_PORT_CONFIG_TYPE_INPUT_HOST\tBIT(0)\n#define IMGU_ABI_PORT_CONFIG_TYPE_OUTPUT_HOST\tBIT(4)\n#define IMGU_ABI_MAX_SP_THREADS\t\t\t4\n#define IMGU_ABI_FRAMES_REF\t\t\t3\n#define IMGU_ABI_FRAMES_TNR\t\t\t4\n#define IMGU_ABI_BUF_SETS_TNR\t\t\t1\n\n#define IMGU_ABI_EVENT_BUFFER_ENQUEUED(thread, queue)\t\\\n\t\t\t\t(0 << 24 | (thread) << 16 | (queue) << 8)\n#define IMGU_ABI_EVENT_BUFFER_DEQUEUED(queue)\t(1 << 24 | (queue) << 8)\n#define IMGU_ABI_EVENT_EVENT_DEQUEUED\t\t(2 << 24)\n#define IMGU_ABI_EVENT_START_STREAM\t\t(3 << 24)\n#define IMGU_ABI_EVENT_STOP_STREAM\t\t(4 << 24)\n#define IMGU_ABI_EVENT_MIPI_BUFFERS_READY\t(5 << 24)\n#define IMGU_ABI_EVENT_UNLOCK_RAW_BUFFER\t(6 << 24)\n#define IMGU_ABI_EVENT_STAGE_ENABLE_DISABLE\t(7 << 24)\n\n#define IMGU_ABI_HOST2SP_BUFQ_SIZE\t3\n#define IMGU_ABI_SP2HOST_BUFQ_SIZE\t(2 * IMGU_ABI_MAX_SP_THREADS)\n#define IMGU_ABI_HOST2SP_EVTQ_SIZE\t(IMGU_ABI_QUEUE_NUM * \\\n\t\tIMGU_ABI_MAX_SP_THREADS * 2 + IMGU_ABI_MAX_SP_THREADS * 4)\n#define IMGU_ABI_SP2HOST_EVTQ_SIZE\t(6 * IMGU_ABI_MAX_SP_THREADS)\n\n#define IMGU_ABI_EVTTYPE_EVENT_SHIFT\t0\n#define IMGU_ABI_EVTTYPE_EVENT_MASK\t(0xff << IMGU_ABI_EVTTYPE_EVENT_SHIFT)\n#define IMGU_ABI_EVTTYPE_PIPE_SHIFT\t8\n#define IMGU_ABI_EVTTYPE_PIPE_MASK\t(0xff << IMGU_ABI_EVTTYPE_PIPE_SHIFT)\n#define IMGU_ABI_EVTTYPE_PIPEID_SHIFT\t16\n#define IMGU_ABI_EVTTYPE_PIPEID_MASK\t(0xff << IMGU_ABI_EVTTYPE_PIPEID_SHIFT)\n#define IMGU_ABI_EVTTYPE_MODULEID_SHIFT\t8\n#define IMGU_ABI_EVTTYPE_MODULEID_MASK (0xff << IMGU_ABI_EVTTYPE_MODULEID_SHIFT)\n#define IMGU_ABI_EVTTYPE_LINENO_SHIFT\t16\n#define IMGU_ABI_EVTTYPE_LINENO_MASK   (0xffff << IMGU_ABI_EVTTYPE_LINENO_SHIFT)\n\n \n#define IMGU_ABI_EVTTYPE_OUT_FRAME_DONE\t\t\t0\n \n#define IMGU_ABI_EVTTYPE_2ND_OUT_FRAME_DONE\t\t1\n \n#define IMGU_ABI_EVTTYPE_VF_OUT_FRAME_DONE\t\t2\n \n#define IMGU_ABI_EVTTYPE_2ND_VF_OUT_FRAME_DONE\t\t3\n \n#define IMGU_ABI_EVTTYPE_3A_STATS_DONE\t\t\t4\n \n#define IMGU_ABI_EVTTYPE_DIS_STATS_DONE\t\t\t5\n \n#define IMGU_ABI_EVTTYPE_PIPELINE_DONE\t\t\t6\n \n#define IMGU_ABI_EVTTYPE_FRAME_TAGGED\t\t\t7\n \n#define IMGU_ABI_EVTTYPE_INPUT_FRAME_DONE\t\t8\n \n#define IMGU_ABI_EVTTYPE_METADATA_DONE\t\t\t9\n \n#define IMGU_ABI_EVTTYPE_LACE_STATS_DONE\t\t10\n \n#define IMGU_ABI_EVTTYPE_ACC_STAGE_COMPLETE\t\t11\n \n#define IMGU_ABI_EVTTYPE_TIMER\t\t\t\t12\n \n#define IMGU_ABI_EVTTYPE_PORT_EOF\t\t\t13\n \n#define IMGU_ABI_EVTTYPE_FW_WARNING\t\t\t14\n \n#define IMGU_ABI_EVTTYPE_FW_ASSERT\t\t\t15\n\n#define IMGU_ABI_NUM_CONTINUOUS_FRAMES\t\t10\n#define IMGU_ABI_SP_COMM_COMMAND\t\t0x00\n\n \n#define IMGU_ABI_SP_COMM_COMMAND_READY\t\t1\n \n#define IMGU_ABI_SP_COMM_COMMAND_DUMMY\t\t2\t \n#define IMGU_ABI_SP_COMM_COMMAND_START_FLASH\t3\t \n#define IMGU_ABI_SP_COMM_COMMAND_TERMINATE\t4\t \n\n \n#define IMGU_ABI_SP_COMM_EVENT_IRQ_MASK(n)\t\t((n) * 4 + 0x60)\n#define IMGU_ABI_SP_COMM_EVENT_IRQ_MASK_OR_SHIFT\t0\n#define IMGU_ABI_SP_COMM_EVENT_IRQ_MASK_AND_SHIFT\t16\n\n#define IMGU_ABI_BL_DMACMD_TYPE_SP_PMEM\t\t1\t \n\n \n\n#define IMGU_HIVE_OF_SYS_SCALER_TO_FA_OFFSET\t0xC\n#define IMGU_HIVE_OF_SYS_OF_TO_FA_OFFSET\t0x8\n#define IMGU_HIVE_OF_SYS_OF_SYSTEM_NWAYS\t32\n\n#define IMGU_SCALER_ELEMS_PER_VEC\t\t0x10\n#define IMGU_SCALER_FILTER_TAPS_Y\t\t0x4\n#define IMGU_SCALER_OUT_BPP\t\t\t0x8\n\n#define IMGU_SCALER_MS_TO_OUTFORMACC_SL_ADDR\t0x400\n#define IMGU_SCALER_TO_OF_ACK_FA_ADDR \\\n\t(0xC00  + IMGU_HIVE_OF_SYS_SCALER_TO_FA_OFFSET)\n#define IMGU_OF_TO_ACK_FA_ADDR (0xC00 + IMGU_HIVE_OF_SYS_OF_TO_FA_OFFSET)\n#define IMGU_OUTFORMACC_MS_TO_SCALER_SL_ADDR 0\n#define IMGU_SCALER_INTR_BPP\t\t\t10\n\n#define IMGU_PS_SNR_PRESERVE_BITS\t\t3\n#define IMGU_CNTX_BPP\t\t\t\t11\n#define IMGU_SCALER_FILTER_TAPS_UV\t(IMGU_SCALER_FILTER_TAPS_Y / 2)\n\n#define IMGU_VMEM2_ELEMS_PER_VEC\t(IMGU_SCALER_ELEMS_PER_VEC)\n#define IMGU_STRIDE_Y\t\t\t(IMGU_SCALER_FILTER_TAPS_Y + 1)\n#define IMGU_MAX_FRAME_WIDTH\t\t3840\n#define IMGU_VMEM3_ELEMS_PER_VEC\t(IMGU_SCALER_ELEMS_PER_VEC)\n\n#define IMGU_VER_CNTX_WORDS\t\tDIV_ROUND_UP((IMGU_SCALER_OUT_BPP + \\\n\tIMGU_PS_SNR_PRESERVE_BITS), IMGU_CNTX_BPP)\t \n#define IMGU_MAX_INPUT_BLOCK_HEIGHT\t64\n#define IMGU_HOR_CNTX_WORDS\t\tDIV_ROUND_UP((IMGU_SCALER_INTR_BPP + \\\n\tIMGU_PS_SNR_PRESERVE_BITS), IMGU_CNTX_BPP)\t \n#define IMGU_MAX_OUTPUT_BLOCK_WIDTH\t\t128\n#define IMGU_CNTX_STRIDE_UV\t\t(IMGU_SCALER_FILTER_TAPS_UV + 1)\n\n#define IMGU_OSYS_DMA_CROP_W_LIMIT\t\t64\n#define IMGU_OSYS_DMA_CROP_H_LIMIT\t\t4\n#define IMGU_OSYS_BLOCK_WIDTH\t\t\t(2 * IPU3_UAPI_ISP_VEC_ELEMS)\n#define IMGU_OSYS_BLOCK_HEIGHT\t\t\t32\n#define IMGU_OSYS_PHASES\t\t\t0x20\n#define IMGU_OSYS_FILTER_TAPS\t\t\t0x4\n#define IMGU_OSYS_PHASE_COUNTER_PREC_REF\t6\n#define IMGU_OSYS_NUM_INPUT_BUFFERS\t\t2\n#define IMGU_OSYS_FIR_PHASES \\\n\t(IMGU_OSYS_PHASES << IMGU_OSYS_PHASE_COUNTER_PREC_REF)\n#define IMGU_OSYS_TAPS_UV\t\t\t(IMGU_OSYS_FILTER_TAPS / 2)\n#define IMGU_OSYS_TAPS_Y\t\t\t(IMGU_OSYS_FILTER_TAPS)\n#define IMGU_OSYS_NUM_INTERM_BUFFERS\t\t2\n\n#define IMGU_VMEM1_Y_SIZE \\\n\t(IMGU_OSYS_BLOCK_HEIGHT * IMGU_VMEM1_Y_STRIDE)\n#define IMGU_VMEM1_UV_SIZE\t\t\t(IMGU_VMEM1_Y_SIZE / 4)\n#define IMGU_VMEM1_OUT_BUF_ADDR\t\t\t(IMGU_VMEM1_INP_BUF_ADDR + \\\n\t(IMGU_OSYS_NUM_INPUT_BUFFERS * IMGU_VMEM1_BUF_SIZE))\n#define IMGU_OSYS_NUM_OUTPUT_BUFFERS\t\t2\n\n \n#define IMGU_VMEM2_VECS_PER_LINE \\\n\t(DIV_ROUND_UP(IMGU_OSYS_BLOCK_HEIGHT, IMGU_VMEM2_ELEMS_PER_VEC))\n \n#define IMGU_VMEM2_BUF_SIZE \\\n\t(IMGU_VMEM2_VECS_PER_LINE * IMGU_VMEM2_LINES_PER_BLOCK)\n#define IMGU_VMEM3_VER_Y_SIZE\t\\\n\t\t\t((IMGU_STRIDE_Y * IMGU_MAX_FRAME_WIDTH \\\n\t\t\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_VER_CNTX_WORDS)\n#define IMGU_VMEM3_HOR_Y_SIZE \\\n\t((IMGU_STRIDE_Y * IMGU_MAX_INPUT_BLOCK_HEIGHT \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_HOR_CNTX_WORDS)\n#define IMGU_VMEM3_VER_Y_EXTRA \\\n\t((IMGU_STRIDE_Y * IMGU_MAX_OUTPUT_BLOCK_WIDTH \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_VER_CNTX_WORDS)\n#define IMGU_VMEM3_VER_U_SIZE \\\n\t(((IMGU_CNTX_STRIDE_UV * IMGU_MAX_FRAME_WIDTH \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_VER_CNTX_WORDS) / 2)\n#define IMGU_VMEM3_HOR_U_SIZE \\\n\t(((IMGU_STRIDE_Y * IMGU_MAX_INPUT_BLOCK_HEIGHT \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_HOR_CNTX_WORDS) / 2)\n#define IMGU_VMEM3_VER_U_EXTRA \\\n\t(((IMGU_CNTX_STRIDE_UV * IMGU_MAX_OUTPUT_BLOCK_WIDTH \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_VER_CNTX_WORDS) / 2)\n#define IMGU_VMEM3_VER_V_SIZE \\\n\t(((IMGU_CNTX_STRIDE_UV * IMGU_MAX_FRAME_WIDTH \\\n\t / IMGU_VMEM3_ELEMS_PER_VEC) * IMGU_VER_CNTX_WORDS) / 2)\n\n#define IMGU_ISP_VEC_NELEMS\t\t64\n#define IMGU_LUMA_TO_CHROMA_RATIO\t2\n#define IMGU_INPUT_BLOCK_WIDTH\t\t\t(128)\n#define IMGU_FIFO_ADDR_SCALER_TO_FMT \\\n\t(IMGU_SCALER_MS_TO_OUTFORMACC_SL_ADDR >> 2)\n#define IMGU_FIFO_ADDR_SCALER_TO_SP\t(IMGU_SCALER_TO_OF_ACK_FA_ADDR >> 2)\n#define IMGU_VMEM1_INP_BUF_ADDR\t\t0\n#define IMGU_VMEM1_Y_STRIDE \\\n\t(IMGU_OSYS_BLOCK_WIDTH / IMGU_VMEM1_ELEMS_PER_VEC)\n#define IMGU_VMEM1_BUF_SIZE\t(IMGU_VMEM1_V_OFFSET + IMGU_VMEM1_UV_SIZE)\n\n#define IMGU_VMEM1_U_OFFSET\t\t(IMGU_VMEM1_Y_SIZE)\n#define IMGU_VMEM1_V_OFFSET\t(IMGU_VMEM1_U_OFFSET + IMGU_VMEM1_UV_SIZE)\n#define IMGU_VMEM1_UV_STRIDE\t\t(IMGU_VMEM1_Y_STRIDE / 2)\n#define IMGU_VMEM1_INT_BUF_ADDR\t\t(IMGU_VMEM1_OUT_BUF_ADDR + \\\n\t(IMGU_OSYS_NUM_OUTPUT_BUFFERS * IMGU_VMEM1_BUF_SIZE))\n\n#define IMGU_VMEM1_ELEMS_PER_VEC\t(IMGU_HIVE_OF_SYS_OF_SYSTEM_NWAYS)\n#define IMGU_VMEM2_BUF_Y_ADDR\t\t0\n#define IMGU_VMEM2_BUF_Y_STRIDE\t\t(IMGU_VMEM2_VECS_PER_LINE)\n#define IMGU_VMEM2_BUF_U_ADDR \\\n\t(IMGU_VMEM2_BUF_Y_ADDR + IMGU_VMEM2_BUF_SIZE)\n#define IMGU_VMEM2_BUF_V_ADDR \\\n\t(IMGU_VMEM2_BUF_U_ADDR + IMGU_VMEM2_BUF_SIZE / 4)\n#define IMGU_VMEM2_BUF_UV_STRIDE\t(IMGU_VMEM2_VECS_PER_LINE / 2)\n \n#define IMGU_VMEM2_LINES_PER_BLOCK\t192\n#define IMGU_VMEM3_HOR_Y_ADDR \\\n\t(IMGU_VMEM3_VER_Y_ADDR + IMGU_VMEM3_VER_Y_SIZE)\n#define IMGU_VMEM3_HOR_U_ADDR \\\n\t(IMGU_VMEM3_VER_U_ADDR + IMGU_VMEM3_VER_U_SIZE)\n#define IMGU_VMEM3_HOR_V_ADDR \\\n\t(IMGU_VMEM3_VER_V_ADDR + IMGU_VMEM3_VER_V_SIZE)\n#define IMGU_VMEM3_VER_Y_ADDR\t\t0\n#define IMGU_VMEM3_VER_U_ADDR \\\n\t(IMGU_VMEM3_VER_Y_ADDR + IMGU_VMEM3_VER_Y_SIZE + \\\n\tmax(IMGU_VMEM3_HOR_Y_SIZE, IMGU_VMEM3_VER_Y_EXTRA))\n#define IMGU_VMEM3_VER_V_ADDR \\\n\t(IMGU_VMEM3_VER_U_ADDR + IMGU_VMEM3_VER_U_SIZE + \\\n\tmax(IMGU_VMEM3_HOR_U_SIZE, IMGU_VMEM3_VER_U_EXTRA))\n#define IMGU_FIFO_ADDR_FMT_TO_SP\t(IMGU_OF_TO_ACK_FA_ADDR >> 2)\n#define IMGU_FIFO_ADDR_FMT_TO_SCALER (IMGU_OUTFORMACC_MS_TO_SCALER_SL_ADDR >> 2)\n#define IMGU_VMEM1_HST_BUF_ADDR\t\t(IMGU_VMEM1_INT_BUF_ADDR + \\\n\t(IMGU_OSYS_NUM_INTERM_BUFFERS * IMGU_VMEM1_BUF_SIZE))\n#define IMGU_VMEM1_HST_BUF_STRIDE\t120\n#define IMGU_VMEM1_HST_BUF_NLINES\t3\n\nenum imgu_abi_frame_format {\n\tIMGU_ABI_FRAME_FORMAT_NV11,\t \n\tIMGU_ABI_FRAME_FORMAT_NV12,\t \n\tIMGU_ABI_FRAME_FORMAT_NV12_16,\t \n\tIMGU_ABI_FRAME_FORMAT_NV12_TILEY, \n\tIMGU_ABI_FRAME_FORMAT_NV16,\t \n\tIMGU_ABI_FRAME_FORMAT_NV21,\t \n\tIMGU_ABI_FRAME_FORMAT_NV61,\t \n\tIMGU_ABI_FRAME_FORMAT_YV12,\t \n\tIMGU_ABI_FRAME_FORMAT_YV16,\t \n\tIMGU_ABI_FRAME_FORMAT_YUV420,\t \n\tIMGU_ABI_FRAME_FORMAT_YUV420_16, \n\tIMGU_ABI_FRAME_FORMAT_YUV422,\t \n\tIMGU_ABI_FRAME_FORMAT_YUV422_16, \n\tIMGU_ABI_FRAME_FORMAT_UYVY,\t \n\tIMGU_ABI_FRAME_FORMAT_YUYV,\t \n\tIMGU_ABI_FRAME_FORMAT_YUV444,\t \n\tIMGU_ABI_FRAME_FORMAT_YUV_LINE,\t \n\t\t\t\t\t \n\tIMGU_ABI_FRAME_FORMAT_RAW,\t \n\tIMGU_ABI_FRAME_FORMAT_RGB565,\t \n\tIMGU_ABI_FRAME_FORMAT_PLANAR_RGB888,  \n\tIMGU_ABI_FRAME_FORMAT_RGBA888,\t \n\tIMGU_ABI_FRAME_FORMAT_QPLANE6,\t \n\tIMGU_ABI_FRAME_FORMAT_BINARY_8,\t \n\tIMGU_ABI_FRAME_FORMAT_MIPI,\t \n\tIMGU_ABI_FRAME_FORMAT_RAW_PACKED,\t  \n\tIMGU_ABI_FRAME_FORMAT_CSI_MIPI_YUV420_8,  \n\tIMGU_ABI_FRAME_FORMAT_CSI_MIPI_LEGACY_YUV420_8,  \n\tIMGU_ABI_FRAME_FORMAT_CSI_MIPI_YUV420_10, \n\tIMGU_ABI_FRAME_FORMAT_YCGCO444_16,  \n\tIMGU_ABI_FRAME_FORMAT_NUM\n};\n\nenum imgu_abi_bayer_order {\n\tIMGU_ABI_BAYER_ORDER_GRBG,\n\tIMGU_ABI_BAYER_ORDER_RGGB,\n\tIMGU_ABI_BAYER_ORDER_BGGR,\n\tIMGU_ABI_BAYER_ORDER_GBRG\n};\n\nenum imgu_abi_osys_format {\n\tIMGU_ABI_OSYS_FORMAT_YUV420,\n\tIMGU_ABI_OSYS_FORMAT_YV12,\n\tIMGU_ABI_OSYS_FORMAT_NV12,\n\tIMGU_ABI_OSYS_FORMAT_NV21,\n\tIMGU_ABI_OSYS_FORMAT_YUV_LINE,\n\tIMGU_ABI_OSYS_FORMAT_YUY2,\t \n\tIMGU_ABI_OSYS_FORMAT_NV16,\n\tIMGU_ABI_OSYS_FORMAT_RGBA,\n\tIMGU_ABI_OSYS_FORMAT_BGRA\n};\n\nenum imgu_abi_osys_tiling {\n\tIMGU_ABI_OSYS_TILING_NONE,\n\tIMGU_ABI_OSYS_TILING_Y,\n\tIMGU_ABI_OSYS_TILING_YF,\n};\n\nenum imgu_abi_osys_procmode {\n\tIMGU_ABI_OSYS_PROCMODE_BYPASS,\n\tIMGU_ABI_OSYS_PROCMODE_UPSCALE,\n\tIMGU_ABI_OSYS_PROCMODE_DOWNSCALE,\n};\n\nenum imgu_abi_queue_id {\n\tIMGU_ABI_QUEUE_EVENT_ID = -1,\n\tIMGU_ABI_QUEUE_A_ID = 0,\n\tIMGU_ABI_QUEUE_B_ID,\n\tIMGU_ABI_QUEUE_C_ID,\n\tIMGU_ABI_QUEUE_D_ID,\n\tIMGU_ABI_QUEUE_E_ID,\n\tIMGU_ABI_QUEUE_F_ID,\n\tIMGU_ABI_QUEUE_G_ID,\n\tIMGU_ABI_QUEUE_H_ID,\t\t \n\tIMGU_ABI_QUEUE_NUM\n};\n\nenum imgu_abi_buffer_type {\n\tIMGU_ABI_BUFFER_TYPE_INVALID = -1,\n\tIMGU_ABI_BUFFER_TYPE_3A_STATISTICS = 0,\n\tIMGU_ABI_BUFFER_TYPE_DIS_STATISTICS,\n\tIMGU_ABI_BUFFER_TYPE_LACE_STATISTICS,\n\tIMGU_ABI_BUFFER_TYPE_INPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_OUTPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_SEC_OUTPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_VF_OUTPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_SEC_VF_OUTPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_RAW_OUTPUT_FRAME,\n\tIMGU_ABI_BUFFER_TYPE_CUSTOM_INPUT,\n\tIMGU_ABI_BUFFER_TYPE_CUSTOM_OUTPUT,\n\tIMGU_ABI_BUFFER_TYPE_METADATA,\n\tIMGU_ABI_BUFFER_TYPE_PARAMETER_SET,\n\tIMGU_ABI_BUFFER_TYPE_PER_FRAME_PARAMETER_SET,\n\tIMGU_ABI_NUM_DYNAMIC_BUFFER_TYPE,\n\tIMGU_ABI_NUM_BUFFER_TYPE\n};\n\nenum imgu_abi_raw_type {\n\tIMGU_ABI_RAW_TYPE_BAYER,\n\tIMGU_ABI_RAW_TYPE_IR_ON_GR,\n\tIMGU_ABI_RAW_TYPE_IR_ON_GB\n};\n\nenum imgu_abi_memories {\n\tIMGU_ABI_MEM_ISP_PMEM0 = 0,\n\tIMGU_ABI_MEM_ISP_DMEM0,\n\tIMGU_ABI_MEM_ISP_VMEM0,\n\tIMGU_ABI_MEM_ISP_VAMEM0,\n\tIMGU_ABI_MEM_ISP_VAMEM1,\n\tIMGU_ABI_MEM_ISP_VAMEM2,\n\tIMGU_ABI_MEM_ISP_HMEM0,\n\tIMGU_ABI_MEM_SP0_DMEM0,\n\tIMGU_ABI_MEM_SP1_DMEM0,\n\tIMGU_ABI_MEM_DDR,\n\tIMGU_ABI_NUM_MEMORIES\n};\n\nenum imgu_abi_param_class {\n\tIMGU_ABI_PARAM_CLASS_PARAM,\t \n\tIMGU_ABI_PARAM_CLASS_CONFIG,\t \n\tIMGU_ABI_PARAM_CLASS_STATE,\t \n\tIMGU_ABI_PARAM_CLASS_NUM\n};\n\nenum imgu_abi_bin_input_src {\n\tIMGU_ABI_BINARY_INPUT_SOURCE_SENSOR,\n\tIMGU_ABI_BINARY_INPUT_SOURCE_MEMORY,\n\tIMGU_ABI_BINARY_INPUT_SOURCE_VARIABLE,\n};\n\nenum imgu_abi_sp_swstate {\n\tIMGU_ABI_SP_SWSTATE_TERMINATED,\n\tIMGU_ABI_SP_SWSTATE_INITIALIZED,\n\tIMGU_ABI_SP_SWSTATE_CONNECTED,\n\tIMGU_ABI_SP_SWSTATE_RUNNING,\n};\n\nenum imgu_abi_bl_swstate {\n\tIMGU_ABI_BL_SWSTATE_OK = 0x100,\n\tIMGU_ABI_BL_SWSTATE_BUSY,\n\tIMGU_ABI_BL_SWSTATE_ERR,\n};\n\n \nenum imgu_abi_stage_type {\n\tIMGU_ABI_STAGE_TYPE_SP,\n\tIMGU_ABI_STAGE_TYPE_ISP,\n};\n\nstruct imgu_abi_acc_operation {\n\t \n\tu8 op_indicator;\n\tu8 op_type;\n} __packed;\n\nstruct imgu_abi_acc_process_lines_cmd_data {\n\tu16 lines;\n\tu8 cfg_set;\n\tu8 reserved;\t\t \n} __packed;\n\n \n\nstruct imgu_abi_shd_transfer_luts_set_data {\n\tu8 set_number;\n\tu8 padding[3];\n\timgu_addr_t rg_lut_ddr_addr;\n\timgu_addr_t bg_lut_ddr_addr;\n\tu32 align_dummy;\n} __packed;\n\nstruct imgu_abi_shd_grid_config {\n\t \n\tu32 grid_width:8;\n\tu32 grid_height:8;\n\tu32 block_width:3;\n\tu32 reserved0:1;\n\tu32 block_height:3;\n\tu32 reserved1:1;\n\tu32 grid_height_per_slice:8;\n\t \n\ts32 x_start:13;\n\ts32 reserved2:3;\n\ts32 y_start:13;\n\ts32 reserved3:3;\n} __packed;\n\nstruct imgu_abi_shd_general_config {\n\tu32 init_set_vrt_offst_ul:8;\n\tu32 shd_enable:1;\n\t \n\tu32 gain_factor:2;\n\tu32 reserved:21;\n} __packed;\n\nstruct imgu_abi_shd_black_level_config {\n\t \n\ts32 bl_r:12;\n\ts32 reserved0:4;\n\ts32 bl_gr:12;\n\tu32 reserved1:1;\n\t \n\tu32 normalization_shift:3;\n\t \n\ts32 bl_gb:12;\n\ts32 reserved2:4;\n\ts32 bl_b:12;\n\ts32 reserved3:4;\n} __packed;\n\nstruct imgu_abi_shd_intra_frame_operations_data {\n\tstruct imgu_abi_acc_operation\n\t\toperation_list[IMGU_ABI_SHD_MAX_OPERATIONS] __aligned(32);\n\tstruct imgu_abi_acc_process_lines_cmd_data\n\t\tprocess_lines_data[IMGU_ABI_SHD_MAX_PROCESS_LINES] __aligned(32);\n\tstruct imgu_abi_shd_transfer_luts_set_data\n\t\ttransfer_data[IMGU_ABI_SHD_MAX_TRANSFERS] __aligned(32);\n} __packed;\n\nstruct imgu_abi_shd_config {\n\tstruct ipu3_uapi_shd_config_static shd __aligned(32);\n\tstruct imgu_abi_shd_intra_frame_operations_data shd_ops __aligned(32);\n\tstruct ipu3_uapi_shd_lut shd_lut __aligned(32);\n} __packed;\n\nstruct imgu_abi_stripe_input_frame_resolution {\n\tu16 width;\n\tu16 height;\n\tu32 bayer_order;\t\t \n\tu32 raw_bit_depth;\n} __packed;\n\n \n\nstruct imgu_abi_stripes {\n\t \n\tu16 offset;\n\t \n\tu16 width;\n\t \n\tu16 height;\n} __packed;\n\nstruct imgu_abi_stripe_data {\n\t \n\tu16 num_of_stripes;\n\n\tu8 padding[2];\n\n\t \n\n\t \n\tstruct imgu_abi_stripe_input_frame_resolution input_frame;\n\n\t \n\tstruct imgu_abi_stripes effective_stripes[IPU3_UAPI_MAX_STRIPES];\n\n\t \n\tstruct imgu_abi_stripes down_scaled_stripes[IPU3_UAPI_MAX_STRIPES];\n\n\t \n\tstruct imgu_abi_stripes bds_out_stripes[IPU3_UAPI_MAX_STRIPES];\n\n\t \n\tstruct imgu_abi_stripes\n\t\t\tbds_out_stripes_no_overlap[IPU3_UAPI_MAX_STRIPES];\n\n\t \n\tu16 output_system_in_frame_width;\n\t \n\tu16 output_system_in_frame_height;\n\n\t \n\tstruct imgu_abi_stripes output_stripes[IPU3_UAPI_MAX_STRIPES];\n\n\t \n\tstruct imgu_abi_stripes block_stripes[IPU3_UAPI_MAX_STRIPES];\n\n\tu16 effective_frame_width;\t \n\tu16 bds_frame_width;\n\tu16 out_frame_width;\t \n\tu16 out_frame_height;\t \n\n\t \n\tu16 gdc_in_buffer_width;\t \n\tu16 gdc_in_buffer_height;\t \n\t \n\tu16 gdc_in_buffer_offset_x;\n\t \n\tu16 gdc_in_buffer_offset_y;\n\n\t \n\tu16 display_frame_width;\n\t \n\tu16 display_frame_height;\n\tu16 bds_aligned_frame_width;\n\t \n\tu16 half_overlap_vectors;\n\t \n\tu16 ir_ext_decimation;\n\tu8 padding1[2];\n} __packed;\n\n \n\nstruct imgu_abi_input_feeder_data {\n\tu32 row_stride;\t\t\t \n\tu32 start_row_address;\t\t \n\tu32 start_pixel;\t\t \n} __packed;\n\nstruct imgu_abi_input_feeder_data_aligned {\n\tstruct imgu_abi_input_feeder_data data __aligned(32);\n} __packed;\n\nstruct imgu_abi_input_feeder_data_per_stripe {\n\tstruct imgu_abi_input_feeder_data_aligned\n\t\tinput_feeder_data[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\nstruct imgu_abi_input_feeder_config {\n\tstruct imgu_abi_input_feeder_data data;\n\tstruct imgu_abi_input_feeder_data_per_stripe data_per_stripe\n\t\t__aligned(32);\n} __packed;\n\n \n\nstruct imgu_abi_dvs_stat_grd_config {\n\tu8 grid_width;\n\tu8 grid_height;\n\tu8 block_width;\n\tu8 block_height;\n\tu16 x_start;\n\tu16 y_start;\n\tu16 enable;\n\tu16 x_end;\n\tu16 y_end;\n} __packed;\n\nstruct imgu_abi_dvs_stat_cfg {\n\tu8 reserved0[4];\n\tstruct imgu_abi_dvs_stat_grd_config\n\t\t\t\t\tgrd_config[IMGU_ABI_DVS_STAT_LEVELS];\n\tu8 reserved1[18];\n} __packed;\n\nstruct imgu_abi_dvs_stat_transfer_op_data {\n\tu8 set_number;\n} __packed;\n\nstruct imgu_abi_dvs_stat_intra_frame_operations_data {\n\tstruct imgu_abi_acc_operation\n\t\tops[IMGU_ABI_DVS_STAT_MAX_OPERATIONS] __aligned(32);\n\tstruct imgu_abi_acc_process_lines_cmd_data\n\t\tprocess_lines_data[IMGU_ABI_DVS_STAT_MAX_PROCESS_LINES]\n\t\t__aligned(32);\n\tstruct imgu_abi_dvs_stat_transfer_op_data\n\t\ttransfer_data[IMGU_ABI_DVS_STAT_MAX_TRANSFERS] __aligned(32);\n} __packed;\n\nstruct imgu_abi_dvs_stat_config {\n\tstruct imgu_abi_dvs_stat_cfg cfg __aligned(32);\n\tu8 reserved0[128];\n\tstruct imgu_abi_dvs_stat_intra_frame_operations_data operations_data;\n\tu8 reserved1[64];\n} __packed;\n\n \n\nstruct imgu_abi_yuvp2_y_tm_lut_static_config {\n\tu16 entries[IMGU_ABI_YUVP2_YTM_LUT_ENTRIES];\n\tu32 enable;\n} __packed;\n\n \n\nstruct imgu_abi_osys_formatter_params {\n\tu32 format;\n\tu32 flip;\n\tu32 mirror;\n\tu32 tiling;\n\tu32 reduce_range;\n\tu32 alpha_blending;\n\tu32 release_inp_addr;\n\tu32 release_inp_en;\n\tu32 process_out_buf_addr;\n\tu32 image_width_vecs;\n\tu32 image_height_lines;\n\tu32 inp_buff_y_st_addr;\n\tu32 inp_buff_y_line_stride;\n\tu32 inp_buff_y_buffer_stride;\n\tu32 int_buff_u_st_addr;\n\tu32 int_buff_v_st_addr;\n\tu32 inp_buff_uv_line_stride;\n\tu32 inp_buff_uv_buffer_stride;\n\tu32 out_buff_level;\n\tu32 out_buff_nr_y_lines;\n\tu32 out_buff_u_st_offset;\n\tu32 out_buff_v_st_offset;\n\tu32 out_buff_y_line_stride;\n\tu32 out_buff_uv_line_stride;\n\tu32 hist_buff_st_addr;\n\tu32 hist_buff_line_stride;\n\tu32 hist_buff_nr_lines;\n} __packed;\n\nstruct imgu_abi_osys_formatter {\n\tstruct imgu_abi_osys_formatter_params param __aligned(32);\n} __packed;\n\nstruct imgu_abi_osys_scaler_params {\n\tu32 inp_buf_y_st_addr;\n\tu32 inp_buf_y_line_stride;\n\tu32 inp_buf_y_buffer_stride;\n\tu32 inp_buf_u_st_addr;\n\tu32 inp_buf_v_st_addr;\n\tu32 inp_buf_uv_line_stride;\n\tu32 inp_buf_uv_buffer_stride;\n\tu32 inp_buf_chunk_width;\n\tu32 inp_buf_nr_buffers;\n\t \n\tu32 out_buf_y_st_addr;\n\tu32 out_buf_y_line_stride;\n\tu32 out_buf_y_buffer_stride;\n\tu32 out_buf_u_st_addr;\n\tu32 out_buf_v_st_addr;\n\tu32 out_buf_uv_line_stride;\n\tu32 out_buf_uv_buffer_stride;\n\tu32 out_buf_nr_buffers;\n\t \n\tu32 int_buf_y_st_addr;\n\tu32 int_buf_y_line_stride;\n\tu32 int_buf_u_st_addr;\n\tu32 int_buf_v_st_addr;\n\tu32 int_buf_uv_line_stride;\n\tu32 int_buf_height;\n\tu32 int_buf_chunk_width;\n\tu32 int_buf_chunk_height;\n\t \n\tu32 ctx_buf_hor_y_st_addr;\n\tu32 ctx_buf_hor_u_st_addr;\n\tu32 ctx_buf_hor_v_st_addr;\n\tu32 ctx_buf_ver_y_st_addr;\n\tu32 ctx_buf_ver_u_st_addr;\n\tu32 ctx_buf_ver_v_st_addr;\n\t \n\tu32 release_inp_buf_addr;\n\tu32 release_inp_buf_en;\n\tu32 release_out_buf_en;\n\tu32 process_out_buf_addr;\n\t \n\tu32 input_image_y_width;\n\tu32 input_image_y_height;\n\tu32 input_image_y_start_column;\n\tu32 input_image_uv_start_column;\n\tu32 input_image_y_left_pad;\n\tu32 input_image_uv_left_pad;\n\tu32 input_image_y_right_pad;\n\tu32 input_image_uv_right_pad;\n\tu32 input_image_y_top_pad;\n\tu32 input_image_uv_top_pad;\n\tu32 input_image_y_bottom_pad;\n\tu32 input_image_uv_bottom_pad;\n\tu32 processing_mode;\t \n\tu32 scaling_ratio;\n\tu32 y_left_phase_init;\n\tu32 uv_left_phase_init;\n\tu32 y_top_phase_init;\n\tu32 uv_top_phase_init;\n\tu32 coeffs_exp_shift;\n\tu32 out_y_left_crop;\n\tu32 out_uv_left_crop;\n\tu32 out_y_top_crop;\n\tu32 out_uv_top_crop;\n} __packed;\n\nstruct imgu_abi_osys_scaler {\n\tstruct imgu_abi_osys_scaler_params param __aligned(32);\n} __packed;\n\nstruct imgu_abi_osys_frame_params {\n\t \n\tu32 enable;\n\tu32 format;\t\t \n\tu32 flip;\n\tu32 mirror;\n\tu32 tiling;\t\t \n\tu32 width;\n\tu32 height;\n\tu32 stride;\n\tu32 scaled;\n} __packed;\n\nstruct imgu_abi_osys_frame {\n\tstruct imgu_abi_osys_frame_params param __aligned(32);\n} __packed;\n\nstruct imgu_abi_osys_stripe {\n\t \n\tu32 input_width;\n\tu32 input_height;\n\t \n\tu32 output_width[IMGU_ABI_OSYS_PINS];\n\tu32 output_height[IMGU_ABI_OSYS_PINS];\n\tu32 output_offset[IMGU_ABI_OSYS_PINS];\n\tu32 buf_stride[IMGU_ABI_OSYS_PINS];\n\t \n\tu32 block_width;\n\tu32 block_height;\n\t \n\tu32 crop_top[IMGU_ABI_OSYS_PINS];\n\tu32 crop_left[IMGU_ABI_OSYS_PINS];\n} __packed;\n\nstruct imgu_abi_osys_config {\n\tstruct imgu_abi_osys_formatter\n\t\tformatter[IPU3_UAPI_MAX_STRIPES][IMGU_ABI_OSYS_PINS];\n\tstruct imgu_abi_osys_scaler scaler[IPU3_UAPI_MAX_STRIPES];\n\tstruct imgu_abi_osys_frame frame[IMGU_ABI_OSYS_PINS];\n\tstruct imgu_abi_osys_stripe stripe[IPU3_UAPI_MAX_STRIPES];\n\t \n\ts8 scaler_coeffs_chroma[128];\n\ts8 scaler_coeffs_luma[128];\n} __packed;\n\n \n\nstruct imgu_abi_bds_hor_ctrl0 {\n\tu32 sample_patrn_length:9;\n\tu32 reserved0:3;\n\tu32 hor_ds_en:1;\n\tu32 min_clip_val:1;\n\tu32 max_clip_val:2;\n\tu32 out_frame_width:13;\n\tu32 reserved1:3;\n} __packed;\n\nstruct imgu_abi_bds_ptrn_arr {\n\tu32 elems[IMGU_ABI_BDS_SAMPLE_PATTERN_ARRAY_SIZE];\n} __packed;\n\nstruct imgu_abi_bds_phase_entry {\n\ts8 coeff_min2;\n\ts8 coeff_min1;\n\ts8 coeff_0;\n\ts8 nf;\n\ts8 coeff_pls1;\n\ts8 coeff_pls2;\n\ts8 coeff_pls3;\n\tu8 reserved;\n} __packed;\n\nstruct imgu_abi_bds_phase_arr {\n\tstruct imgu_abi_bds_phase_entry\n\t\teven[IMGU_ABI_BDS_PHASE_COEFFS_ARRAY_SIZE];\n\tstruct imgu_abi_bds_phase_entry\n\t\todd[IMGU_ABI_BDS_PHASE_COEFFS_ARRAY_SIZE];\n} __packed;\n\nstruct imgu_abi_bds_hor_ctrl1 {\n\tu32 hor_crop_start:13;\n\tu32 reserved0:3;\n\tu32 hor_crop_end:13;\n\tu32 reserved1:1;\n\tu32 hor_crop_en:1;\n\tu32 reserved2:1;\n} __packed;\n\nstruct imgu_abi_bds_hor_ctrl2 {\n\tu32 input_frame_height:13;\n\tu32 reserved0:19;\n} __packed;\n\nstruct imgu_abi_bds_hor {\n\tstruct imgu_abi_bds_hor_ctrl0 hor_ctrl0;\n\tstruct imgu_abi_bds_ptrn_arr hor_ptrn_arr;\n\tstruct imgu_abi_bds_phase_arr hor_phase_arr;\n\tstruct imgu_abi_bds_hor_ctrl1 hor_ctrl1;\n\tstruct imgu_abi_bds_hor_ctrl2 hor_ctrl2;\n} __packed;\n\nstruct imgu_abi_bds_ver_ctrl0 {\n\tu32 sample_patrn_length:9;\n\tu32 reserved0:3;\n\tu32 ver_ds_en:1;\n\tu32 min_clip_val:1;\n\tu32 max_clip_val:2;\n\tu32 reserved1:16;\n} __packed;\n\nstruct imgu_abi_bds_ver_ctrl1 {\n\tu32 out_frame_width:13;\n\tu32 reserved0:3;\n\tu32 out_frame_height:13;\n\tu32 reserved1:3;\n} __packed;\n\nstruct imgu_abi_bds_ver {\n\tstruct imgu_abi_bds_ver_ctrl0 ver_ctrl0;\n\tstruct imgu_abi_bds_ptrn_arr ver_ptrn_arr;\n\tstruct imgu_abi_bds_phase_arr ver_phase_arr;\n\tstruct imgu_abi_bds_ver_ctrl1 ver_ctrl1;\n} __packed;\n\nstruct imgu_abi_bds_per_stripe_data {\n\tstruct imgu_abi_bds_hor_ctrl0 hor_ctrl0;\n\tstruct imgu_abi_bds_ver_ctrl1 ver_ctrl1;\n\tstruct imgu_abi_bds_hor_ctrl1 crop;\n} __packed;\n\nstruct imgu_abi_bds_per_stripe_data_aligned {\n\tstruct imgu_abi_bds_per_stripe_data data __aligned(32);\n} __packed;\n\nstruct imgu_abi_bds_per_stripe {\n\tstruct imgu_abi_bds_per_stripe_data_aligned\n\t\taligned_data[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\nstruct imgu_abi_bds_config {\n\tstruct imgu_abi_bds_hor hor __aligned(32);\n\tstruct imgu_abi_bds_ver ver __aligned(32);\n\tstruct imgu_abi_bds_per_stripe per_stripe __aligned(32);\n\tu32 enabled;\n} __packed;\n\n \n\nstruct imgu_abi_anr_search_config {\n\tu32 enable;\n\tu16 frame_width;\n\tu16 frame_height;\n} __packed;\n\nstruct imgu_abi_anr_stitch_config {\n\tu32 anr_stitch_en;\n\tu16 frame_width;\n\tu16 frame_height;\n\tu8 reserved[40];\n\tstruct ipu3_uapi_anr_stitch_pyramid pyramid[IPU3_UAPI_ANR_PYRAMID_SIZE];\n} __packed;\n\nstruct imgu_abi_anr_tile2strm_config {\n\tu32 enable;\n\tu16 frame_width;\n\tu16 frame_height;\n} __packed;\n\nstruct imgu_abi_anr_config {\n\tstruct imgu_abi_anr_search_config search __aligned(32);\n\tstruct ipu3_uapi_anr_transform_config transform __aligned(32);\n\tstruct imgu_abi_anr_stitch_config stitch __aligned(32);\n\tstruct imgu_abi_anr_tile2strm_config tile2strm __aligned(32);\n} __packed;\n\n \n\nstruct imgu_abi_af_frame_size {\n\tu16 width;\n\tu16 height;\n} __packed;\n\nstruct imgu_abi_af_config_s {\n\tstruct ipu3_uapi_af_filter_config filter_config __aligned(32);\n\tstruct imgu_abi_af_frame_size frame_size;\n\tstruct ipu3_uapi_grid_config grid_cfg __aligned(32);\n} __packed;\n\nstruct imgu_abi_af_intra_frame_operations_data {\n\tstruct imgu_abi_acc_operation ops[IMGU_ABI_AF_MAX_OPERATIONS]\n\t\t__aligned(32);\n\tstruct imgu_abi_acc_process_lines_cmd_data\n\t\tprocess_lines_data[IMGU_ABI_AF_MAX_PROCESS_LINES] __aligned(32);\n} __packed;\n\nstruct imgu_abi_af_stripe_config {\n\tstruct imgu_abi_af_frame_size frame_size __aligned(32);\n\tstruct ipu3_uapi_grid_config grid_cfg __aligned(32);\n} __packed;\n\nstruct imgu_abi_af_config {\n\tstruct imgu_abi_af_config_s config;\n\tstruct imgu_abi_af_intra_frame_operations_data operations_data;\n\tstruct imgu_abi_af_stripe_config stripes[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\n \n\nstruct imgu_abi_ae_config {\n\tstruct ipu3_uapi_ae_grid_config grid_cfg __aligned(32);\n\tstruct ipu3_uapi_ae_weight_elem weights[IPU3_UAPI_AE_WEIGHTS]\n\t\t\t\t\t\t\t\t__aligned(32);\n\tstruct ipu3_uapi_ae_ccm ae_ccm __aligned(32);\n\tstruct {\n\t\tstruct ipu3_uapi_ae_grid_config grid __aligned(32);\n\t} stripes[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\n \n\nstruct imgu_abi_awb_fr_intra_frame_operations_data {\n\tstruct imgu_abi_acc_operation ops[IMGU_ABI_AWB_FR_MAX_OPERATIONS]\n\t\t\t\t\t\t\t\t__aligned(32);\n\tstruct imgu_abi_acc_process_lines_cmd_data\n\t      process_lines_data[IMGU_ABI_AWB_FR_MAX_PROCESS_LINES] __aligned(32);\n} __packed;\n\nstruct imgu_abi_awb_fr_config {\n\tstruct ipu3_uapi_awb_fr_config_s config;\n\tstruct imgu_abi_awb_fr_intra_frame_operations_data operations_data;\n\tstruct ipu3_uapi_awb_fr_config_s stripes[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\nstruct imgu_abi_acc_transfer_op_data {\n\tu8 set_number;\n} __packed;\n\nstruct imgu_abi_awb_intra_frame_operations_data {\n\tstruct imgu_abi_acc_operation ops[IMGU_ABI_AWB_MAX_OPERATIONS]\n\t\t__aligned(32);\n\tstruct imgu_abi_acc_process_lines_cmd_data\n\t\tprocess_lines_data[IMGU_ABI_AWB_MAX_PROCESS_LINES] __aligned(32);\n\tstruct imgu_abi_acc_transfer_op_data\n\t\ttransfer_data[IMGU_ABI_AWB_MAX_TRANSFERS] __aligned(32);\n} __aligned(32) __packed;\n\nstruct imgu_abi_awb_config {\n\tstruct ipu3_uapi_awb_config_s config __aligned(32);\n\tstruct imgu_abi_awb_intra_frame_operations_data operations_data;\n\tstruct ipu3_uapi_awb_config_s stripes[IPU3_UAPI_MAX_STRIPES];\n} __packed;\n\nstruct imgu_abi_acc_param {\n\tstruct imgu_abi_stripe_data stripe;\n\tu8 padding[8];\n\tstruct imgu_abi_input_feeder_config input_feeder;\n\tstruct ipu3_uapi_bnr_static_config bnr;\n\tstruct ipu3_uapi_bnr_static_config_green_disparity green_disparity\n\t\t__aligned(32);\n\tstruct ipu3_uapi_dm_config dm __aligned(32);\n\tstruct ipu3_uapi_ccm_mat_config ccm __aligned(32);\n\tstruct ipu3_uapi_gamma_config gamma __aligned(32);\n\tstruct ipu3_uapi_csc_mat_config csc __aligned(32);\n\tstruct ipu3_uapi_cds_params cds __aligned(32);\n\tstruct imgu_abi_shd_config shd __aligned(32);\n\tstruct imgu_abi_dvs_stat_config dvs_stat;\n\tu8 padding1[224];\t \n\tstruct ipu3_uapi_yuvp1_iefd_config iefd __aligned(32);\n\tstruct ipu3_uapi_yuvp1_yds_config yds_c0 __aligned(32);\n\tstruct ipu3_uapi_yuvp1_chnr_config chnr_c0 __aligned(32);\n\tstruct ipu3_uapi_yuvp1_y_ee_nr_config y_ee_nr __aligned(32);\n\tstruct ipu3_uapi_yuvp1_yds_config yds __aligned(32);\n\tstruct ipu3_uapi_yuvp1_chnr_config chnr __aligned(32);\n\tstruct imgu_abi_yuvp2_y_tm_lut_static_config ytm __aligned(32);\n\tstruct ipu3_uapi_yuvp1_yds_config yds2 __aligned(32);\n\tstruct ipu3_uapi_yuvp2_tcc_static_config tcc __aligned(32);\n\t \n\tu8 dpc[240832] __aligned(32);\n\tstruct imgu_abi_bds_config bds;\n\tstruct imgu_abi_anr_config anr;\n\tstruct imgu_abi_awb_fr_config awb_fr;\n\tstruct imgu_abi_ae_config ae;\n\tstruct imgu_abi_af_config af;\n\tstruct imgu_abi_awb_config awb;\n\tstruct imgu_abi_osys_config osys;\n} __packed;\n\n \n\nstruct imgu_abi_gdc_warp_param {\n\tu32 origin_x;\n\tu32 origin_y;\n\tu32 in_addr_offset;\n\tu32 in_block_width;\n\tu32 in_block_height;\n\tu32 p0_x;\n\tu32 p0_y;\n\tu32 p1_x;\n\tu32 p1_y;\n\tu32 p2_x;\n\tu32 p2_y;\n\tu32 p3_x;\n\tu32 p3_y;\n\tu32 in_block_width_a;\n\tu32 in_block_width_b;\n\tu32 padding;\t\t \n} __packed;\n\n \n\n \n\nstruct imgu_abi_crop_pos {\n\tu16 x;\n\tu16 y;\n} __packed;\n\nstruct imgu_abi_sp_resolution {\n\tu16 width;\t\t\t \n\tu16 height;\t\t\t \n} __packed;\n\n \nstruct imgu_abi_frame_sp_info {\n\tstruct imgu_abi_sp_resolution res;\n\tu16 padded_width;\t\t \n\tu8 format;\t\t\t \n\tu8 raw_bit_depth;\t\t \n\tu8 raw_bayer_order;\t\t \n\tu8 raw_type;\t\t \n\tu8 padding[2];\t\t\t \n} __packed;\n\nstruct imgu_abi_buffer_sp {\n\tunion {\n\t\timgu_addr_t xmem_addr;\n\t\ts32 queue_id;\t \n\t} buf_src;\n\ts32 buf_type;\t \n} __packed;\n\nstruct imgu_abi_frame_sp_plane {\n\tu32 offset;\t\t \n\t\t\t\t \n} __packed;\n\nstruct imgu_abi_frame_sp_rgb_planes {\n\tstruct imgu_abi_frame_sp_plane r;\n\tstruct imgu_abi_frame_sp_plane g;\n\tstruct imgu_abi_frame_sp_plane b;\n} __packed;\n\nstruct imgu_abi_frame_sp_yuv_planes {\n\tstruct imgu_abi_frame_sp_plane y;\n\tstruct imgu_abi_frame_sp_plane u;\n\tstruct imgu_abi_frame_sp_plane v;\n} __packed;\n\nstruct imgu_abi_frame_sp_nv_planes {\n\tstruct imgu_abi_frame_sp_plane y;\n\tstruct imgu_abi_frame_sp_plane uv;\n} __packed;\n\nstruct imgu_abi_frame_sp_plane6 {\n\tstruct imgu_abi_frame_sp_plane r;\n\tstruct imgu_abi_frame_sp_plane r_at_b;\n\tstruct imgu_abi_frame_sp_plane gr;\n\tstruct imgu_abi_frame_sp_plane gb;\n\tstruct imgu_abi_frame_sp_plane b;\n\tstruct imgu_abi_frame_sp_plane b_at_r;\n} __packed;\n\nstruct imgu_abi_frame_sp_binary_plane {\n\tu32 size;\n\tstruct imgu_abi_frame_sp_plane data;\n} __packed;\n\nstruct imgu_abi_frame_sp {\n\tstruct imgu_abi_frame_sp_info info;\n\tstruct imgu_abi_buffer_sp buf_attr;\n\tunion {\n\t\tstruct imgu_abi_frame_sp_plane raw;\n\t\tstruct imgu_abi_frame_sp_plane rgb;\n\t\tstruct imgu_abi_frame_sp_rgb_planes planar_rgb;\n\t\tstruct imgu_abi_frame_sp_plane yuyv;\n\t\tstruct imgu_abi_frame_sp_yuv_planes yuv;\n\t\tstruct imgu_abi_frame_sp_nv_planes nv;\n\t\tstruct imgu_abi_frame_sp_plane6 plane6;\n\t\tstruct imgu_abi_frame_sp_binary_plane binary;\n\t} planes;\n} __packed;\n\nstruct imgu_abi_resolution {\n\tu32 width;\n\tu32 height;\n} __packed;\n\nstruct imgu_abi_frames_sp {\n\tstruct imgu_abi_frame_sp in;\n\tstruct imgu_abi_frame_sp out[IMGU_ABI_BINARY_MAX_OUTPUT_PORTS];\n\tstruct imgu_abi_resolution effective_in_res;\n\tstruct imgu_abi_frame_sp out_vf;\n\tstruct imgu_abi_frame_sp_info internal_frame_info;\n\tstruct imgu_abi_buffer_sp s3a_buf;\n\tstruct imgu_abi_buffer_sp dvs_buf;\n\tstruct imgu_abi_buffer_sp lace_buf;\n} __packed;\n\nstruct imgu_abi_uds_info {\n\tu16 curr_dx;\n\tu16 curr_dy;\n\tu16 xc;\n\tu16 yc;\n} __packed;\n\n \nstruct imgu_abi_sp_stage {\n\t \n\tu8 num;\t\t\t \n\tu8 isp_online;\n\tu8 isp_copy_vf;\n\tu8 isp_copy_output;\n\tu8 sp_enable_xnr;\n\tu8 isp_deci_log_factor;\n\tu8 isp_vf_downscale_bits;\n\tu8 deinterleaved;\n\t \n\tu8 program_input_circuit;\n\tu8 func;\n\tu8 stage_type;\t\t \n\tu8 num_stripes;\n\tu8 isp_pipe_version;\n\tstruct {\n\t\tu8 vf_output;\n\t\tu8 s3a;\n\t\tu8 sdis;\n\t\tu8 dvs_stats;\n\t\tu8 lace_stats;\n\t} enable;\n\n\tstruct imgu_abi_crop_pos sp_out_crop_pos;\n\tu8 padding[2];\n\tstruct imgu_abi_frames_sp frames;\n\tstruct imgu_abi_resolution dvs_envelope;\n\tstruct imgu_abi_uds_info uds;\n\timgu_addr_t isp_stage_addr;\n\timgu_addr_t xmem_bin_addr;\n\timgu_addr_t xmem_map_addr;\n\n\tu16 top_cropping;\n\tu16 row_stripes_height;\n\tu16 row_stripes_overlap_lines;\n\tu8 if_config_index;\t \n\tu8 padding2;\n} __packed;\n\n \n\nstruct imgu_abi_isp_param_memory_offsets {\n\tu32 offsets[IMGU_ABI_PARAM_CLASS_NUM];\t \n} __packed;\n\n \nstruct imgu_abi_blob_info {\n\t \n\tu32 offset;\t\t\t \n\tstruct imgu_abi_isp_param_memory_offsets memory_offsets;\n\t\t\t\t\t \n\tu32 prog_name_offset;\t\t \n\tu32 size;\t\t\t \n\tu32 padding_size;\t\t \n\tu32 icache_source;\t\t \n\tu32 icache_size;\t\t \n\tu32 icache_padding;\t \n\tu32 text_source;\t\t \n\tu32 text_size;\t\t\t \n\tu32 text_padding;\t \n\tu32 data_source;\t\t \n\tu32 data_target;\t\t \n\tu32 data_size;\t\t\t \n\tu32 data_padding;\t \n\tu32 bss_target;\t\t \n\tu32 bss_size;\t\t\t \n\tu64 code __aligned(8);\t \n\t\t\t\t\t \n\tu64 data __aligned(8);\t \n\t\t\t\t\t \n} __packed;\n\nstruct imgu_abi_binary_pipeline_info {\n\tu32 mode;\n\tu32 isp_pipe_version;\n\tu32 pipelining;\n\tu32 c_subsampling;\n\tu32 top_cropping;\n\tu32 left_cropping;\n\tu32 variable_resolution;\n} __packed;\n\nstruct imgu_abi_binary_input_info {\n\tu32 min_width;\n\tu32 min_height;\n\tu32 max_width;\n\tu32 max_height;\n\tu32 source;\t \n} __packed;\n\nstruct imgu_abi_binary_output_info {\n\tu32 min_width;\n\tu32 min_height;\n\tu32 max_width;\n\tu32 max_height;\n\tu32 num_chunks;\n\tu32 variable_format;\n} __packed;\n\nstruct imgu_abi_binary_internal_info {\n\tu32 max_width;\n\tu32 max_height;\n} __packed;\n\nstruct imgu_abi_binary_bds_info {\n\tu32 supported_bds_factors;\n} __packed;\n\nstruct imgu_abi_binary_dvs_info {\n\tu32 max_envelope_width;\n\tu32 max_envelope_height;\n} __packed;\n\nstruct imgu_abi_binary_vf_dec_info {\n\tu32 is_variable;\n\tu32 max_log_downscale;\n} __packed;\n\nstruct imgu_abi_binary_s3a_info {\n\tu32 s3atbl_use_dmem;\n\tu32 fixed_s3a_deci_log;\n} __packed;\n\nstruct imgu_abi_binary_dpc_info {\n\tu32 bnr_lite;\t\t\t \n} __packed;\n\nstruct imgu_abi_binary_iterator_info {\n\tu32 num_stripes;\n\tu32 row_stripes_height;\n\tu32 row_stripes_overlap_lines;\n} __packed;\n\nstruct imgu_abi_binary_address_info {\n\tu32 isp_addresses;\t\t \n\tu32 main_entry;\t\t\t \n\tu32 in_frame;\t\t\t \n\tu32 out_frame;\t\t\t \n\tu32 in_data;\t\t\t \n\tu32 out_data;\t\t\t \n\tu32 sh_dma_cmd_ptr;\t\t \n} __packed;\n\nstruct imgu_abi_binary_uds_info {\n\tu16 bpp;\n\tu16 use_bci;\n\tu16 use_str;\n\tu16 woix;\n\tu16 woiy;\n\tu16 extra_out_vecs;\n\tu16 vectors_per_line_in;\n\tu16 vectors_per_line_out;\n\tu16 vectors_c_per_line_in;\n\tu16 vectors_c_per_line_out;\n\tu16 vmem_gdc_in_block_height_y;\n\tu16 vmem_gdc_in_block_height_c;\n} __packed;\n\nstruct imgu_abi_binary_block_info {\n\tu32 block_width;\n\tu32 block_height;\n\tu32 output_block_height;\n} __packed;\n\nstruct imgu_abi_isp_data {\n\timgu_addr_t address;\t\t \n\tu32 size;\t\t\t \n} __packed;\n\nstruct imgu_abi_isp_param_segments {\n\tstruct imgu_abi_isp_data\n\t\t\tparams[IMGU_ABI_PARAM_CLASS_NUM][IMGU_ABI_NUM_MEMORIES];\n} __packed;\n\nstruct imgu_abi_binary_info {\n\tu32 id __aligned(8);\t\t \n\tstruct imgu_abi_binary_pipeline_info pipeline;\n\tstruct imgu_abi_binary_input_info input;\n\tstruct imgu_abi_binary_output_info output;\n\tstruct imgu_abi_binary_internal_info internal;\n\tstruct imgu_abi_binary_bds_info bds;\n\tstruct imgu_abi_binary_dvs_info dvs;\n\tstruct imgu_abi_binary_vf_dec_info vf_dec;\n\tstruct imgu_abi_binary_s3a_info s3a;\n\tstruct imgu_abi_binary_dpc_info dpc_bnr;  \n\tstruct imgu_abi_binary_iterator_info iterator;\n\tstruct imgu_abi_binary_address_info addresses;\n\tstruct imgu_abi_binary_uds_info uds;\n\tstruct imgu_abi_binary_block_info block;\n\tstruct imgu_abi_isp_param_segments mem_initializers;\n\tstruct {\n\t\tu8 input_feeder;\n\t\tu8 output_system;\n\t\tu8 obgrid;\n\t\tu8 lin;\n\t\tu8 dpc_acc;\n\t\tu8 bds_acc;\n\t\tu8 shd_acc;\n\t\tu8 shd_ff;\n\t\tu8 stats_3a_raw_buffer;\n\t\tu8 acc_bayer_denoise;\n\t\tu8 bnr_ff;\n\t\tu8 awb_acc;\n\t\tu8 awb_fr_acc;\n\t\tu8 anr_acc;\n\t\tu8 rgbpp_acc;\n\t\tu8 rgbpp_ff;\n\t\tu8 demosaic_acc;\n\t\tu8 demosaic_ff;\n\t\tu8 dvs_stats;\n\t\tu8 lace_stats;\n\t\tu8 yuvp1_b0_acc;\n\t\tu8 yuvp1_c0_acc;\n\t\tu8 yuvp2_acc;\n\t\tu8 ae;\n\t\tu8 af;\n\t\tu8 dergb;\n\t\tu8 rgb2yuv;\n\t\tu8 high_quality;\n\t\tu8 kerneltest;\n\t\tu8 routing_shd_to_bnr;\t\t \n\t\tu8 routing_bnr_to_anr;\t\t \n\t\tu8 routing_anr_to_de;\t\t \n\t\tu8 routing_rgb_to_yuvp1;\t \n\t\tu8 routing_yuvp1_to_yuvp2;\t \n\t\tu8 luma_only;\n\t\tu8 input_yuv;\n\t\tu8 input_raw;\n\t\tu8 reduced_pipe;\n\t\tu8 vf_veceven;\n\t\tu8 dis;\n\t\tu8 dvs_envelope;\n\t\tu8 uds;\n\t\tu8 dvs_6axis;\n\t\tu8 block_output;\n\t\tu8 streaming_dma;\n\t\tu8 ds;\n\t\tu8 bayer_fir_6db;\n\t\tu8 raw_binning;\n\t\tu8 continuous;\n\t\tu8 s3a;\n\t\tu8 fpnr;\n\t\tu8 sc;\n\t\tu8 macc;\n\t\tu8 output;\n\t\tu8 ref_frame;\n\t\tu8 tnr;\n\t\tu8 xnr;\n\t\tu8 params;\n\t\tu8 ca_gdc;\n\t\tu8 isp_addresses;\n\t\tu8 in_frame;\n\t\tu8 out_frame;\n\t\tu8 high_speed;\n\t\tu8 dpc;\n\t\tu8 padding[2];\n\t\tu8 rgbir;\n\t} enable;\n\tstruct {\n\t\tu8 ref_y_channel;\n\t\tu8 ref_c_channel;\n\t\tu8 tnr_channel;\n\t\tu8 tnr_out_channel;\n\t\tu8 dvs_coords_channel;\n\t\tu8 output_channel;\n\t\tu8 c_channel;\n\t\tu8 vfout_channel;\n\t\tu8 vfout_c_channel;\n\t\tu8 vfdec_bits_per_pixel;\n\t\tu8 claimed_by_isp;\n\t\tu8 padding[2];\n\t} dma;\n} __packed;\n\nstruct imgu_abi_isp_stage {\n\tstruct imgu_abi_blob_info blob_info;\n\tstruct imgu_abi_binary_info binary_info;\n\tchar binary_name[IMGU_ABI_MAX_BINARY_NAME];\n\tstruct imgu_abi_isp_param_segments mem_initializers;\n} __packed;\n\n \n\n \nstruct imgu_abi_ddr_address_map {\n\timgu_addr_t isp_mem_param[IMGU_ABI_MAX_STAGES][IMGU_ABI_NUM_MEMORIES];\n\timgu_addr_t obgrid_tbl[IPU3_UAPI_MAX_STRIPES];\n\timgu_addr_t acc_cluster_params_for_sp;\n\timgu_addr_t dvs_6axis_params_y;\n} __packed;\n\nstruct imgu_abi_parameter_set_info {\n\t \n\tstruct imgu_abi_ddr_address_map mem_map;\n\t \n\tu32 isp_parameters_id;\n\t \n\timgu_addr_t output_frame_ptr;\n} __packed;\n\n \n\n \nstruct imgu_abi_sp_config {\n\tu8 no_isp_sync;\t\t \n\tu8 enable_raw_pool_locking;     \n\tu8 lock_all;\n\tu8 disable_cont_vf;\n\tu8 disable_preview_on_capture;\n\tu8 padding[3];\n} __packed;\n\n \nstruct imgu_abi_sp_pipeline {\n\tu32 pipe_id;\t\t\t \n\tu32 pipe_num;\t\t\t \n\tu32 thread_id;\t\t\t \n\tu32 pipe_config;\t\t \n\tu32 pipe_qos_config;\t\t \n\tu32 inout_port_config;\n\tu32 required_bds_factor;\n\tu32 dvs_frame_delay;\n\tu32 num_stages;\t\t \n\tu32 running;\t\t\t \n\timgu_addr_t sp_stage_addr[IMGU_ABI_MAX_STAGES];\n\timgu_addr_t scaler_pp_lut;\t \n\tu32 stage;\t\t\t \n\ts32 num_execs;\t\t\t \n\tunion {\n\t\tstruct {\n\t\t\tu32 bytes_available;\n\t\t} bin;\n\t\tstruct {\n\t\t\tu32 height;\n\t\t\tu32 width;\n\t\t\tu32 padded_width;\n\t\t\tu32 max_input_width;\n\t\t\tu32 raw_bit_depth;\n\t\t} raw;\n\t} copy;\n\n\t \n\tstruct {\n\t\t \n\t\tu32 internal_frame_origin_x_bqs_on_sctbl;\n\t\t \n\t\tu32 internal_frame_origin_y_bqs_on_sctbl;\n\t} shading;\n} __packed;\n\nstruct imgu_abi_sp_debug_command {\n\t \n\tu32 dma_sw_reg;\n} __packed;\n\n \nstruct imgu_abi_sp_group {\n\tstruct imgu_abi_sp_config config;\n\tstruct imgu_abi_sp_pipeline pipe[IMGU_ABI_MAX_SP_THREADS];\n\tstruct imgu_abi_sp_debug_command debug;\n} __packed;\n\n \n\nstruct imgu_abi_isp_iterator_config {\n\tstruct imgu_abi_frame_sp_info input_info;\n\tstruct imgu_abi_frame_sp_info internal_info;\n\tstruct imgu_abi_frame_sp_info output_info;\n\tstruct imgu_abi_frame_sp_info vf_info;\n\tstruct imgu_abi_sp_resolution dvs_envelope;\n} __packed;\n\nstruct imgu_abi_dma_port_config {\n\tu8 crop, elems;\n\tu16 width;\n\tu32 stride;\n} __packed;\n\nstruct imgu_abi_isp_ref_config {\n\tu32 width_a_over_b;\n\tstruct imgu_abi_dma_port_config port_b;\n\tu32 ref_frame_addr_y[IMGU_ABI_FRAMES_REF];\n\tu32 ref_frame_addr_c[IMGU_ABI_FRAMES_REF];\n\tu32 dvs_frame_delay;\n} __packed;\n\nstruct imgu_abi_isp_ref_dmem_state {\n\tu32 ref_in_buf_idx;\n\tu32 ref_out_buf_idx;\n} __packed;\n\nstruct imgu_abi_isp_dvs_config {\n\tu32 num_horizontal_blocks;\n\tu32 num_vertical_blocks;\n} __packed;\n\nstruct imgu_abi_isp_tnr3_config {\n\tu32 width_a_over_b;\n\tu32 frame_height;\n\tstruct imgu_abi_dma_port_config port_b;\n\tu32 delay_frame;\n\tu32 frame_addr[IMGU_ABI_FRAMES_TNR];\n} __packed;\n\nstruct imgu_abi_isp_tnr3_dmem_state {\n\tu32 in_bufidx;\n\tu32 out_bufidx;\n\tu32 total_frame_counter;\n\tu32 buffer_frame_counter[IMGU_ABI_BUF_SETS_TNR];\n\tu32 bypass_filter;\n} __packed;\n\n \n\nstruct imgu_abi_queue_info {\n\tu8 size;\t\t \n\tu8 step;\t\t \n\tu8 start;\t\t \n\tu8 end;\t\t\t \n} __packed;\n\nstruct imgu_abi_queues {\n\t \n\tstruct imgu_abi_queue_info host2sp_bufq_info\n\t\t\t[IMGU_ABI_MAX_SP_THREADS][IMGU_ABI_QUEUE_NUM];\n\tu32 host2sp_bufq[IMGU_ABI_MAX_SP_THREADS][IMGU_ABI_QUEUE_NUM]\n\t\t\t[IMGU_ABI_HOST2SP_BUFQ_SIZE];\n\tstruct imgu_abi_queue_info sp2host_bufq_info[IMGU_ABI_QUEUE_NUM];\n\tu32 sp2host_bufq[IMGU_ABI_QUEUE_NUM][IMGU_ABI_SP2HOST_BUFQ_SIZE];\n\n\t \n\tstruct imgu_abi_queue_info host2sp_evtq_info;\n\tu32 host2sp_evtq[IMGU_ABI_HOST2SP_EVTQ_SIZE];\n\tstruct imgu_abi_queue_info sp2host_evtq_info;\n\tu32 sp2host_evtq[IMGU_ABI_SP2HOST_EVTQ_SIZE];\n} __packed;\n\n \n\nstruct imgu_abi_metadata_info {\n\tstruct imgu_abi_resolution resolution;\t \n\tu32 stride;\t\t\t\t \n\tu32 size;\t\t\t\t \n} __packed;\n\nstruct imgu_abi_isp_3a_statistics {\n\tunion {\n\t\tstruct {\n\t\t\timgu_addr_t s3a_tbl;\n\t\t} dmem;\n\t\tstruct {\n\t\t\timgu_addr_t s3a_tbl_hi;\n\t\t\timgu_addr_t s3a_tbl_lo;\n\t\t} vmem;\n\t} data;\n\tstruct {\n\t\timgu_addr_t rgby_tbl;\n\t} data_hmem;\n\tu32 exp_id;\t \n\tu32 isp_config_id;\t\t \n\timgu_addr_t data_ptr;\t\t \n\tu32 size;\t\t\t \n\tu32 dmem_size;\n\tu32 vmem_size;\t\t\t \n\tu32 hmem_size;\n} __packed;\n\nstruct imgu_abi_metadata {\n\tstruct imgu_abi_metadata_info info;\t \n\timgu_addr_t address;\t\t \n\tu32 exp_id;\t\t\t \n} __packed;\n\nstruct imgu_abi_time_meas {\n\tu32 start_timer_value;\t\t \n\tu32 end_timer_value;\t\t \n} __packed;\n\nstruct imgu_abi_buffer {\n\tunion {\n\t\tstruct imgu_abi_isp_3a_statistics s3a;\n\t\tu8 reserved[28];\n\t\timgu_addr_t skc_dvs_statistics;\n\t\timgu_addr_t lace_stat;\n\t\tstruct imgu_abi_metadata metadata;\n\t\tstruct {\n\t\t\timgu_addr_t frame_data;\n\t\t\tu32 flashed;\n\t\t\tu32 exp_id;\n\t\t\tu32 isp_parameters_id;    \n\t\t\tu32 padded_width;\n\t\t} frame;\n\t\timgu_addr_t ddr_ptrs;\n\t} payload;\n\t \n\tu64 cookie_ptr __aligned(8);\n\tu64 kernel_ptr;\n\tstruct imgu_abi_time_meas timing_data;\n\tu32 isys_eof_clock_tick;\n} __packed;\n\nstruct imgu_abi_bl_dma_cmd_entry {\n\tu32 src_addr;\t\t\t \n\tu32 size;\t\t\t \n\tu32 dst_type;\n\tu32 dst_addr;\t\t\t \n} __packed;\n\nstruct imgu_abi_sp_init_dmem_cfg {\n\tu32 ddr_data_addr;\t\t \n\tu32 dmem_data_addr;\t\t \n\tu32 dmem_bss_addr;\t\t \n\tu32 data_size;\t\t\t \n\tu32 bss_size;\t\t\t \n\tu32 sp_id;\t\t\t \n} __packed;\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}