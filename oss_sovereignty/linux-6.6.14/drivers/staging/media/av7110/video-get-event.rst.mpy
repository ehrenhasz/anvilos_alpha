{
  "module_name": "video-get-event.rst",
  "hash_id": "8801164dec88db134585c8a392503572bcdcb69a4ba5008b7fb9f8d91f737159",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/av7110/video-get-event.rst",
  "human_readable_source": ".. SPDX-License-Identifier: GFDL-1.1-no-invariants-or-later\n.. c:namespace:: DTV.video\n\n.. _VIDEO_GET_EVENT:\n\n===============\nVIDEO_GET_EVENT\n===============\n\nName\n----\n\nVIDEO_GET_EVENT\n\n.. attention:: This ioctl is deprecated.\n\nSynopsis\n--------\n\n.. c:macro:: VIDEO_GET_EVENT\n\n``int ioctl(fd, VIDEO_GET_EVENT, struct video_event *ev)``\n\nArguments\n---------\n\n.. flat-table::\n    :header-rows:  0\n    :stub-columns: 0\n\n    -  .. row 1\n\n       -  int fd\n\n       -  File descriptor returned by a previous call to open().\n\n    -  .. row 2\n\n       -  int request\n\n       -  Equals VIDEO_GET_EVENT for this command.\n\n    -  .. row 3\n\n       -  struct video_event \\*ev\n\n       -  Points to the location where the event, if any, is to be stored.\n\nDescription\n-----------\n\nThis ioctl is for Digital TV devices only. To get events from a V4L2 decoder\nuse the V4L2 :ref:`VIDIOC_DQEVENT` ioctl instead.\n\nThis ioctl call returns an event of type video_event if available. If\nan event is not available, the behavior depends on whether the device is\nin blocking or non-blocking mode. In the latter case, the call fails\nimmediately with errno set to ``EWOULDBLOCK``. In the former case, the call\nblocks until an event becomes available. The standard Linux poll()\nand/or select() system calls can be used with the device file descriptor\nto watch for new events. For select(), the file descriptor should be\nincluded in the exceptfds argument, and for poll(), POLLPRI should be\nspecified as the wake-up condition. Read-only permissions are sufficient\nfor this ioctl call.\n\n.. c:type:: video_event\n\n.. code-block:: c\n\n\tstruct video_event {\n\t\t__s32 type;\n\t#define VIDEO_EVENT_SIZE_CHANGED\t1\n\t#define VIDEO_EVENT_FRAME_RATE_CHANGED\t2\n\t#define VIDEO_EVENT_DECODER_STOPPED \t3\n\t#define VIDEO_EVENT_VSYNC \t\t4\n\t\tlong timestamp;\n\t\tunion {\n\t\t\tvideo_size_t size;\n\t\t\tunsigned int frame_rate;\t/* in frames per 1000sec */\n\t\t\tunsigned char vsync_field;\t/* unknown/odd/even/progressive */\n\t\t} u;\n\t};\n\nReturn Value\n------------\n\nOn success 0 is returned, on error -1 and the ``errno`` variable is set\nappropriately. The generic error codes are described at the\n:ref:`Generic Error Codes <gen-errors>` chapter.\n\n.. flat-table::\n    :header-rows:  0\n    :stub-columns: 0\n\n    -  .. row 1\n\n       -  ``EWOULDBLOCK``\n\n       -  There is no event pending, and the device is in non-blocking mode.\n\n    -  .. row 2\n\n       -  ``EOVERFLOW``\n\n       -  Overflow in event queue - one or more events were lost.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}