{
  "module_name": "av7110_hw.h",
  "hash_id": "fedd7386df378d1ea9780d99779520a91e769cef886584de8d850703cb065d38",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/av7110/av7110_hw.h",
  "human_readable_source": " \n#ifndef _AV7110_HW_H_\n#define _AV7110_HW_H_\n\n#include \"av7110.h\"\n\n \n\n#define DEBINOSWAP 0x000e0000\n#define DEBISWAB   0x001e0000\n#define DEBISWAP   0x002e0000\n\n#define ARM_WAIT_FREE  (HZ)\n#define ARM_WAIT_SHAKE (HZ/5)\n#define ARM_WAIT_OSD (HZ)\n\n\nenum av7110_bootstate\n{\n\tBOOTSTATE_BUFFER_EMPTY\t= 0,\n\tBOOTSTATE_BUFFER_FULL\t= 1,\n\tBOOTSTATE_AV7110_BOOT_COMPLETE\t= 2\n};\n\nenum av7110_type_rec_play_format\n{\tRP_None,\n\tAudioPES,\n\tAudioMp2,\n\tAudioPCM,\n\tVideoPES,\n\tAV_PES\n};\n\nenum av7110_osd_palette_type\n{\n\tNoPalet =  0,\t    \n\tPal1Bit =  2,\t    \n\tPal2Bit =  4,\t    \n\tPal4Bit =  16,\t    \n\tPal8Bit =  256\t    \n};\n\n \n#define SB_GPIO 3\n#define SB_OFF\tSAA7146_GPIO_OUTLO   \n#define SB_ON\tSAA7146_GPIO_INPUT   \n#define SB_WIDE SAA7146_GPIO_OUTHI   \n\n#define FB_GPIO 1\n#define FB_OFF\tSAA7146_GPIO_LO      \n#define FB_ON\tSAA7146_GPIO_OUTHI   \n#define FB_LOOP\tSAA7146_GPIO_INPUT   \n\nenum av7110_video_output_mode\n{\n\tNO_OUT\t     = 0,\t\t \n\tCVBS_RGB_OUT = 1,\n\tCVBS_YC_OUT  = 2,\n\tYC_OUT\t     = 3\n};\n\n \n#define GPMQFull\t0x0001\t\t \n#define GPMQOver\t0x0002\t\t \n#define HPQFull\t\t0x0004\t\t \n#define HPQOver\t\t0x0008\n#define OSDQFull\t0x0010\t\t \n#define OSDQOver\t0x0020\n#define GPMQBusy\t0x0040\t\t \n#define HPQBusy\t\t0x0080\n#define OSDQBusy\t0x0100\n\n \n#define\tSECTION_EIT\t\t0x01\n#define\tSECTION_SINGLE\t\t0x00\n#define\tSECTION_CYCLE\t\t0x02\n#define\tSECTION_CONTINUOS\t0x04\n#define\tSECTION_MODE\t\t0x06\n#define SECTION_IPMPE\t\t0x0C\t \n#define SECTION_HIGH_SPEED\t0x1C\t \n#define DATA_PIPING_FLAG\t0x20\t \n\n#define\tPBUFSIZE_NONE 0x0000\n#define\tPBUFSIZE_1P   0x0100\n#define\tPBUFSIZE_2P   0x0200\n#define\tPBUFSIZE_1K   0x0300\n#define\tPBUFSIZE_2K   0x0400\n#define\tPBUFSIZE_4K   0x0500\n#define\tPBUFSIZE_8K   0x0600\n#define PBUFSIZE_16K  0x0700\n#define PBUFSIZE_32K  0x0800\n\n\n \nenum av7110_osd_command {\n\tWCreate,\n\tWDestroy,\n\tWMoveD,\n\tWMoveA,\n\tWHide,\n\tWTop,\n\tDBox,\n\tDLine,\n\tDText,\n\tSet_Font,\n\tSetColor,\n\tSetBlend,\n\tSetWBlend,\n\tSetCBlend,\n\tSetNonBlend,\n\tLoadBmp,\n\tBlitBmp,\n\tReleaseBmp,\n\tSetWTrans,\n\tSetWNoTrans,\n\tSet_Palette\n};\n\nenum av7110_pid_command {\n\tMultiPID,\n\tVideoPID,\n\tAudioPID,\n\tInitFilt,\n\tFiltError,\n\tNewVersion,\n\tCacheError,\n\tAddPIDFilter,\n\tDelPIDFilter,\n\tScan,\n\tSetDescr,\n\tSetIR,\n\tFlushTSQueue\n};\n\nenum av7110_mpeg_command {\n\tSelAudChannels\n};\n\nenum av7110_audio_command {\n\tAudioDAC,\n\tCabADAC,\n\tON22K,\n\tOFF22K,\n\tMainSwitch,\n\tADSwitch,\n\tSendDiSEqC,\n\tSetRegister,\n\tSpdifSwitch\n};\n\nenum av7110_request_command {\n\tAudioState,\n\tAudioBuffState,\n\tVideoState1,\n\tVideoState2,\n\tVideoState3,\n\tCrashCounter,\n\tReqVersion,\n\tReqVCXO,\n\tReqRegister,\n\tReqSecFilterError,\n\tReqSTC\n};\n\nenum av7110_encoder_command {\n\tSetVidMode,\n\tSetTestMode,\n\tLoadVidCode,\n\tSetMonitorType,\n\tSetPanScanType,\n\tSetFreezeMode,\n\tSetWSSConfig\n};\n\nenum av7110_rec_play_state {\n\t__Record,\n\t__Stop,\n\t__Play,\n\t__Pause,\n\t__Slow,\n\t__FF_IP,\n\t__Scan_I,\n\t__Continue\n};\n\nenum av7110_fw_cmd_misc {\n\tAV7110_FW_VIDEO_ZOOM = 1,\n\tAV7110_FW_VIDEO_COMMAND,\n\tAV7110_FW_AUDIO_COMMAND\n};\n\nenum av7110_command_type {\n\tCOMTYPE_NOCOM,\n\tCOMTYPE_PIDFILTER,\n\tCOMTYPE_MPEGDECODER,\n\tCOMTYPE_OSD,\n\tCOMTYPE_BMP,\n\tCOMTYPE_ENCODER,\n\tCOMTYPE_AUDIODAC,\n\tCOMTYPE_REQUEST,\n\tCOMTYPE_SYSTEM,\n\tCOMTYPE_REC_PLAY,\n\tCOMTYPE_COMMON_IF,\n\tCOMTYPE_PID_FILTER,\n\tCOMTYPE_PES,\n\tCOMTYPE_TS,\n\tCOMTYPE_VIDEO,\n\tCOMTYPE_AUDIO,\n\tCOMTYPE_CI_LL,\n\tCOMTYPE_MISC = 0x80\n};\n\n#define VID_NONE_PREF\t\t0x00\t \n#define VID_PAN_SCAN_PREF\t0x01\t \n#define VID_VERT_COMP_PREF\t0x02\t \n#define VID_VC_AND_PS_PREF\t0x03\t \n#define VID_CENTRE_CUT_PREF\t0x05\t \n\n \n#define AV_VIDEO_CMD_STOP\t0x000e\n#define AV_VIDEO_CMD_PLAY\t0x000d\n#define AV_VIDEO_CMD_FREEZE\t0x0102\n#define AV_VIDEO_CMD_FFWD\t0x0016\n#define AV_VIDEO_CMD_SLOW\t0x0022\n\n \n#define AUDIO_CMD_MUTE\t\t0x0001\n#define AUDIO_CMD_UNMUTE\t0x0002\n#define AUDIO_CMD_PCM16\t\t0x0010\n#define AUDIO_CMD_STEREO\t0x0080\n#define AUDIO_CMD_MONO_L\t0x0100\n#define AUDIO_CMD_MONO_R\t0x0200\n#define AUDIO_CMD_SYNC_OFF\t0x000e\n#define AUDIO_CMD_SYNC_ON\t0x000f\n\n \n#define DATA_NONE\t\t 0x00\n#define DATA_FSECTION\t\t 0x01\n#define DATA_IPMPE\t\t 0x02\n#define DATA_MPEG_RECORD\t 0x03\n#define DATA_DEBUG_MESSAGE\t 0x04\n#define DATA_COMMON_INTERFACE\t 0x05\n#define DATA_MPEG_PLAY\t\t 0x06\n#define DATA_BMP_LOAD\t\t 0x07\n#define DATA_IRCOMMAND\t\t 0x08\n#define DATA_PIPING\t\t 0x09\n#define DATA_STREAMING\t\t 0x0a\n#define DATA_CI_GET\t\t 0x0b\n#define DATA_CI_PUT\t\t 0x0c\n#define DATA_MPEG_VIDEO_EVENT\t 0x0d\n\n#define DATA_PES_RECORD\t\t 0x10\n#define DATA_PES_PLAY\t\t 0x11\n#define DATA_TS_RECORD\t\t 0x12\n#define DATA_TS_PLAY\t\t 0x13\n\n \n#define CI_CMD_ERROR\t\t 0x00\n#define CI_CMD_ACK\t\t 0x01\n#define CI_CMD_SYSTEM_READY\t 0x02\n#define CI_CMD_KEYPRESS\t\t 0x03\n#define CI_CMD_ON_TUNED\t\t 0x04\n#define CI_CMD_ON_SWITCH_PROGRAM 0x05\n#define CI_CMD_SECTION_ARRIVED\t 0x06\n#define CI_CMD_SECTION_TIMEOUT\t 0x07\n#define CI_CMD_TIME\t\t 0x08\n#define CI_CMD_ENTER_MENU\t 0x09\n#define CI_CMD_FAST_PSI\t\t 0x0a\n#define CI_CMD_GET_SLOT_INFO\t 0x0b\n\n#define CI_MSG_NONE\t\t 0x00\n#define CI_MSG_CI_INFO\t\t 0x01\n#define CI_MSG_MENU\t\t 0x02\n#define CI_MSG_LIST\t\t 0x03\n#define CI_MSG_TEXT\t\t 0x04\n#define CI_MSG_REQUEST_INPUT\t 0x05\n#define CI_MSG_INPUT_COMPLETE\t 0x06\n#define CI_MSG_LIST_MORE\t 0x07\n#define CI_MSG_MENU_MORE\t 0x08\n#define CI_MSG_CLOSE_MMI_IMM\t 0x09\n#define CI_MSG_SECTION_REQUEST\t 0x0a\n#define CI_MSG_CLOSE_FILTER\t 0x0b\n#define CI_PSI_COMPLETE\t\t 0x0c\n#define CI_MODULE_READY\t\t 0x0d\n#define CI_SWITCH_PRG_REPLY\t 0x0e\n#define CI_MSG_TEXT_MORE\t 0x0f\n\n#define CI_MSG_CA_PMT\t\t 0xe0\n#define CI_MSG_ERROR\t\t 0xf0\n\n\n \n#define\tDPRAM_BASE 0x4000\n\n \n#define AV7110_BOOT_STATE\t(DPRAM_BASE + 0x3F8)\n#define AV7110_BOOT_SIZE\t(DPRAM_BASE + 0x3FA)\n#define AV7110_BOOT_BASE\t(DPRAM_BASE + 0x3FC)\n#define AV7110_BOOT_BLOCK\t(DPRAM_BASE + 0x400)\n#define AV7110_BOOT_MAX_SIZE\t0xc00\n\n \n#define IRQ_STATE\t(DPRAM_BASE + 0x0F4)\n#define IRQ_STATE_EXT\t(DPRAM_BASE + 0x0F6)\n#define MSGSTATE\t(DPRAM_BASE + 0x0F8)\n#define COMMAND\t\t(DPRAM_BASE + 0x0FC)\n#define COM_BUFF\t(DPRAM_BASE + 0x100)\n#define COM_BUFF_SIZE\t0x20\n\n \n#define BUFF1_BASE\t(DPRAM_BASE + 0x120)\n#define BUFF1_SIZE\t0xE0\n\n#define DATA_BUFF0_BASE\t(DPRAM_BASE + 0x200)\n#define DATA_BUFF0_SIZE\t0x0800\n\n#define DATA_BUFF1_BASE\t(DATA_BUFF0_BASE+DATA_BUFF0_SIZE)\n#define DATA_BUFF1_SIZE\t0x0800\n\n#define DATA_BUFF2_BASE\t(DATA_BUFF1_BASE+DATA_BUFF1_SIZE)\n#define DATA_BUFF2_SIZE\t0x0800\n\n#define DATA_BUFF3_BASE (DATA_BUFF2_BASE+DATA_BUFF2_SIZE)\n#define DATA_BUFF3_SIZE 0x0400\n\n#define Reserved\t(DPRAM_BASE + 0x1E00)\n#define Reserved_SIZE\t0x1C0\n\n\n \n#define STATUS_BASE\t(DPRAM_BASE + 0x1FC0)\n#define STATUS_LOOPS\t(STATUS_BASE + 0x08)\n\n#define STATUS_MPEG_WIDTH     (STATUS_BASE + 0x0C)\n \n#define STATUS_MPEG_HEIGHT_AR (STATUS_BASE + 0x0E)\n\n \n#define RX_TYPE\t\t(DPRAM_BASE + 0x1FE8)\n#define RX_LEN\t\t(DPRAM_BASE + 0x1FEA)\n#define TX_TYPE\t\t(DPRAM_BASE + 0x1FEC)\n#define TX_LEN\t\t(DPRAM_BASE + 0x1FEE)\n\n#define RX_BUFF\t\t(DPRAM_BASE + 0x1FF4)\n#define TX_BUFF\t\t(DPRAM_BASE + 0x1FF6)\n\n#define HANDSHAKE_REG\t(DPRAM_BASE + 0x1FF8)\n#define COM_IF_LOCK\t(DPRAM_BASE + 0x1FFA)\n\n#define IRQ_RX\t\t(DPRAM_BASE + 0x1FFC)\n#define IRQ_TX\t\t(DPRAM_BASE + 0x1FFE)\n\n \n#define DRAM_START_CODE\t\t0x2e000404\n#define DRAM_MAX_CODE_SIZE\t0x00100000\n\n \n#define RESET_LINE\t\t2\n#define DEBI_DONE_LINE\t\t1\n#define ARM_IRQ_LINE\t\t0\n\n\n\nextern int av7110_bootarm(struct av7110 *av7110);\nextern int av7110_firmversion(struct av7110 *av7110);\n#define FW_CI_LL_SUPPORT(arm_app) ((arm_app) & 0x80000000)\n#define FW_4M_SDRAM(arm_app)      ((arm_app) & 0x40000000)\n#define FW_VERSION(arm_app)\t  ((arm_app) & 0x0000FFFF)\n\nextern int av7110_wait_msgstate(struct av7110 *av7110, u16 flags);\nextern int av7110_fw_cmd(struct av7110 *av7110, int type, int com, int num, ...);\nextern int av7110_fw_request(struct av7110 *av7110, u16 *request_buf,\n\t\t\t     int request_buf_len, u16 *reply_buf, int reply_buf_len);\n\n\n \nextern int av7110_debiwrite(struct av7110 *av7110, u32 config,\n\t\t\t    int addr, u32 val, unsigned int count);\nextern u32 av7110_debiread(struct av7110 *av7110, u32 config,\n\t\t\t   int addr, unsigned int count);\n\n\n \n \nstatic inline void iwdebi(struct av7110 *av7110, u32 config, int addr, u32 val, unsigned int count)\n{\n\tav7110_debiwrite(av7110, config, addr, val, count);\n}\n\n \nstatic inline void mwdebi(struct av7110 *av7110, u32 config, int addr,\n\t\t\t  const u8 *val, int count)\n{\n\tmemcpy(av7110->debi_virt, val, count);\n\tav7110_debiwrite(av7110, config, addr, 0, count);\n}\n\nstatic inline u32 irdebi(struct av7110 *av7110, u32 config, int addr, u32 val, unsigned int count)\n{\n\tu32 res;\n\n\tres=av7110_debiread(av7110, config, addr, count);\n\tif (count<=4)\n\t\tmemcpy(av7110->debi_virt, (char *) &res, count);\n\treturn res;\n}\n\n \nstatic inline void wdebi(struct av7110 *av7110, u32 config, int addr, u32 val, unsigned int count)\n{\n\tunsigned long flags;\n\n\tspin_lock_irqsave(&av7110->debilock, flags);\n\tav7110_debiwrite(av7110, config, addr, val, count);\n\tspin_unlock_irqrestore(&av7110->debilock, flags);\n}\n\nstatic inline u32 rdebi(struct av7110 *av7110, u32 config, int addr, u32 val, unsigned int count)\n{\n\tunsigned long flags;\n\tu32 res;\n\n\tspin_lock_irqsave(&av7110->debilock, flags);\n\tres=av7110_debiread(av7110, config, addr, count);\n\tspin_unlock_irqrestore(&av7110->debilock, flags);\n\treturn res;\n}\n\n \nstatic inline void ARM_ResetMailBox(struct av7110 *av7110)\n{\n\tunsigned long flags;\n\n\tspin_lock_irqsave(&av7110->debilock, flags);\n\tav7110_debiread(av7110, DEBINOSWAP, IRQ_RX, 2);\n\tav7110_debiwrite(av7110, DEBINOSWAP, IRQ_RX, 0, 2);\n\tspin_unlock_irqrestore(&av7110->debilock, flags);\n}\n\nstatic inline void ARM_ClearMailBox(struct av7110 *av7110)\n{\n\tiwdebi(av7110, DEBINOSWAP, IRQ_RX, 0, 2);\n}\n\nstatic inline void ARM_ClearIrq(struct av7110 *av7110)\n{\n\tirdebi(av7110, DEBINOSWAP, IRQ_RX, 0, 2);\n}\n\n \n\nstatic inline int SendDAC(struct av7110 *av7110, u8 addr, u8 data)\n{\n\treturn av7110_fw_cmd(av7110, COMTYPE_AUDIODAC, AudioDAC, 2, addr, data);\n}\n\nstatic inline int av7710_set_video_mode(struct av7110 *av7110, int mode)\n{\n\treturn av7110_fw_cmd(av7110, COMTYPE_ENCODER, SetVidMode, 1, mode);\n}\n\nstatic inline int vidcom(struct av7110 *av7110, u32 com, u32 arg)\n{\n\treturn av7110_fw_cmd(av7110, COMTYPE_MISC, AV7110_FW_VIDEO_COMMAND, 4,\n\t\t\t     (com>>16), (com&0xffff),\n\t\t\t     (arg>>16), (arg&0xffff));\n}\n\nstatic inline int audcom(struct av7110 *av7110, u32 com)\n{\n\treturn av7110_fw_cmd(av7110, COMTYPE_MISC, AV7110_FW_AUDIO_COMMAND, 2,\n\t\t\t     (com>>16), (com&0xffff));\n}\n\nstatic inline int Set22K(struct av7110 *av7110, int state)\n{\n\treturn av7110_fw_cmd(av7110, COMTYPE_AUDIODAC, (state ? ON22K : OFF22K), 0);\n}\n\n\nextern int av7110_diseqc_send(struct av7110 *av7110, int len, u8 *msg, unsigned long burst);\n\n\n#ifdef CONFIG_DVB_AV7110_OSD\nextern int av7110_osd_cmd(struct av7110 *av7110, osd_cmd_t *dc);\nextern int av7110_osd_capability(struct av7110 *av7110, osd_cap_t *cap);\n#endif  \n\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}