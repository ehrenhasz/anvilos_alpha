{
  "module_name": "av7110.h",
  "hash_id": "3c269e0eb135d31aead733a362d238a9294205c7125a3a2de7368d57a6602fa7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/av7110/av7110.h",
  "human_readable_source": " \n#ifndef _AV7110_H_\n#define _AV7110_H_\n\n#include <linux/interrupt.h>\n#include <linux/socket.h>\n#include <linux/netdevice.h>\n#include <linux/i2c.h>\n#include <linux/input.h>\n#include <linux/time.h>\n\n#include <linux/dvb/video.h>\n#include <linux/dvb/audio.h>\n#include <linux/dvb/dmx.h>\n#include <linux/dvb/ca.h>\n#include <linux/dvb/osd.h>\n#include <linux/dvb/net.h>\n#include <linux/mutex.h>\n\n#include <media/dvbdev.h>\n#include <media/demux.h>\n#include <media/dvb_demux.h>\n#include <media/dmxdev.h>\n#include \"dvb_filter.h\"\n#include <media/dvb_net.h>\n#include <media/dvb_ringbuffer.h>\n#include <media/dvb_frontend.h>\n#include \"ves1820.h\"\n#include \"ves1x93.h\"\n#include \"stv0299.h\"\n#include \"tda8083.h\"\n#include \"sp8870.h\"\n#include \"stv0297.h\"\n#include \"l64781.h\"\n\n#include <media/drv-intf/saa7146_vv.h>\n\n\n#define ANALOG_TUNER_VES1820 1\n#define ANALOG_TUNER_STV0297 2\n\nextern int av7110_debug;\n\n#define dprintk(level, fmt, arg...) do {\t\t\t\t\\\n\tif (level & av7110_debug)\t\t\t\t\t\\\n\t\tprintk(KERN_DEBUG KBUILD_MODNAME \": %s(): \" fmt,\t\\\n\t\t       __func__, ##arg);\t\t\t\t\\\n} while (0)\n\n#define MAXFILT 32\n\nenum {AV_PES_STREAM, PS_STREAM, TS_STREAM, PES_STREAM};\n\nenum av7110_video_mode {\n\tAV7110_VIDEO_MODE_PAL\t= 0,\n\tAV7110_VIDEO_MODE_NTSC\t= 1\n};\n\nstruct av7110_p2t {\n\tu8\t\t  pes[TS_SIZE];\n\tu8\t\t  counter;\n\tlong int\t  pos;\n\tint\t\t  frags;\n\tstruct dvb_demux_feed *feed;\n};\n\n \n \n#define MAX_VIDEO_EVENT 8\nstruct dvb_video_events {\n\tstruct video_event\t  events[MAX_VIDEO_EVENT];\n\tint\t\t\t  eventw;\n\tint\t\t\t  eventr;\n\tint\t\t\t  overflow;\n\twait_queue_head_t\t  wait_queue;\n\tspinlock_t\t\t  lock;\n};\n\n\nstruct av7110;\n\n \nstruct infrared {\n\tstruct rc_dev\t\t*rcdev;\n\tchar\t\t\tinput_phys[32];\n\tu32\t\t\tir_config;\n};\n\n \nstruct av7110 {\n\n\t \n\n\tstruct dvb_device\tdvb_dev;\n\tstruct dvb_net\t\tdvb_net;\n\n\tstruct video_device\tv4l_dev;\n\tstruct video_device\tvbi_dev;\n\n\tstruct saa7146_dev\t*dev;\n\n\tstruct i2c_adapter\ti2c_adap;\n\n\tchar\t\t\t*card_name;\n\n\t \n\tint\t\t\tanalog_tuner_flags;\n\tint\t\t\tcurrent_input;\n\tu32\t\t\tcurrent_freq;\n\n\tstruct tasklet_struct\tdebi_tasklet;\n\tstruct tasklet_struct\tgpio_tasklet;\n\n\tint adac_type;\t        \n#define DVB_ADAC_TI\t  0\n#define DVB_ADAC_CRYSTAL  1\n#define DVB_ADAC_MSP34x0  2\n#define DVB_ADAC_MSP34x5  3\n#define DVB_ADAC_NONE\t -1\n\n\n\t \n\n\tvoid\t\t       *iobuf;\t  \n\tstruct dvb_ringbuffer\tavout;    \n#define AVOUTLEN (128*1024)\n\tstruct dvb_ringbuffer\taout;     \n#define AOUTLEN (64*1024)\n\tvoid\t\t       *bmpbuf;\n#define BMPLEN (8*32768+1024)\n\n\t \n\n\tint\t\t\tbmpp;\n\tint\t\t\tbmplen;\n\tvolatile int\t\tbmp_state;\n#define BMP_NONE     0\n#define BMP_LOADING  1\n#define BMP_LOADED   2\n\twait_queue_head_t\tbmpq;\n\n\n\t \n\n\tspinlock_t\t\tdebilock;\n\tstruct mutex\t\tdcomlock;\n\tvolatile int\t\tdebitype;\n\tvolatile int\t\tdebilen;\n\n\n\t \n\n\tint\t\t\trec_mode;\n\tint\t\t\tplaying;\n#define RP_NONE  0\n#define RP_VIDEO 1\n#define RP_AUDIO 2\n#define RP_AV\t 3\n\n\n\t \n\n\tint\t\t\tosdwin;       \n\tu16\t\t\tosdbpp[8];\n\tstruct mutex\t\tosd_mutex;\n\n\t \n\n\tstruct ca_slot_info\tci_slot[2];\n\n\tenum av7110_video_mode\tvidmode;\n\tstruct dmxdev\t\tdmxdev;\n\tstruct dvb_demux\tdemux;\n\n\tstruct dmx_frontend\thw_frontend;\n\tstruct dmx_frontend\tmem_frontend;\n\n\t \n\tstruct dmxdev\t\tdmxdev1;\n\tstruct dvb_demux\tdemux1;\n\tstruct dvb_net\t\tdvb_net1;\n\tspinlock_t\t\tfeedlock1;\n\tint\t\t\tfeeding1;\n\tu32\t\t\tttbp;\n\tunsigned char           *grabbing;\n\tstruct saa7146_pgtable  pt;\n\tstruct tasklet_struct   vpe_tasklet;\n\tbool\t\t\tfull_ts;\n\n\tint\t\t\tfe_synced;\n\tstruct mutex\t\tpid_mutex;\n\n\tint\t\t\tvideo_blank;\n\tstruct video_status\tvideostate;\n\tu16\t\t\tdisplay_panscan;\n\tint\t\t\tdisplay_ar;\n\tint\t\t\ttrickmode;\n#define TRICK_NONE   0\n#define TRICK_FAST   1\n#define TRICK_SLOW   2\n#define TRICK_FREEZE 3\n\tstruct audio_status\taudiostate;\n\n\tstruct dvb_demux_filter *handle2filter[32];\n\tstruct av7110_p2t\t p2t_filter[MAXFILT];\n\tstruct dvb_filter_pes2ts p2t[2];\n\tstruct ipack\t\t ipack[2];\n\tu8\t\t\t*kbuf[2];\n\n\tint sinfo;\n\tint feeding;\n\n\tint arm_errors;\n\tint registered;\n\n\n\t \n\n\tu32\t\t    arm_fw;\n\tu32\t\t    arm_rtsl;\n\tu32\t\t    arm_vid;\n\tu32\t\t    arm_app;\n\tu32\t\t    avtype;\n\tint\t\t    arm_ready;\n\tstruct task_struct *arm_thread;\n\twait_queue_head_t   arm_wait;\n\tu16\t\t    arm_loops;\n\n\tvoid\t\t   *debi_virt;\n\tdma_addr_t\t    debi_bus;\n\n\tu16\t\t    pids[DMX_PES_OTHER];\n\n\tstruct dvb_ringbuffer\t ci_rbuffer;\n\tstruct dvb_ringbuffer\t ci_wbuffer;\n\n\tstruct audio_mixer\tmixer;\n\n\tstruct dvb_adapter\t dvb_adapter;\n\tstruct dvb_device\t *video_dev;\n\tstruct dvb_device\t *audio_dev;\n\tstruct dvb_device\t *ca_dev;\n\tstruct dvb_device\t *osd_dev;\n\n\tstruct dvb_video_events  video_events;\n\tvideo_size_t\t\t video_size;\n\n\tu16\t\t\twssMode;\n\tu16\t\t\twssData;\n\n\tstruct infrared\t\tir;\n\n\t \n\tunsigned char *bin_fw;\n\tunsigned long size_fw;\n\n\tunsigned char *bin_dpram;\n\tunsigned long size_dpram;\n\n\tunsigned char *bin_root;\n\tunsigned long size_root;\n\n\tstruct dvb_frontend* fe;\n\tenum fe_status fe_status;\n\n\tstruct mutex ioctl_mutex;\n\n\t \n\tvoid\t\t\t\t(*recover)(struct av7110* av7110);\n\tenum fe_sec_voltage\t\tsaved_voltage;\n\tenum fe_sec_tone_mode\t\tsaved_tone;\n\tstruct dvb_diseqc_master_cmd\tsaved_master_cmd;\n\tenum fe_sec_mini_cmd\t\tsaved_minicmd;\n\n\tint (*fe_init)(struct dvb_frontend* fe);\n\tint (*fe_read_status)(struct dvb_frontend *fe, enum fe_status *status);\n\tint (*fe_diseqc_reset_overload)(struct dvb_frontend *fe);\n\tint (*fe_diseqc_send_master_cmd)(struct dvb_frontend *fe,\n\t\t\t\t\t struct dvb_diseqc_master_cmd *cmd);\n\tint (*fe_diseqc_send_burst)(struct dvb_frontend *fe,\n\t\t\t\t    enum fe_sec_mini_cmd minicmd);\n\tint (*fe_set_tone)(struct dvb_frontend *fe,\n\t\t\t   enum fe_sec_tone_mode tone);\n\tint (*fe_set_voltage)(struct dvb_frontend *fe,\n\t\t\t      enum fe_sec_voltage voltage);\n\tint (*fe_dishnetwork_send_legacy_command)(struct dvb_frontend *fe,\n\t\t\t\t\t\t  unsigned long cmd);\n\tint (*fe_set_frontend)(struct dvb_frontend *fe);\n};\n\n\nextern int ChangePIDs(struct av7110 *av7110, u16 vpid, u16 apid, u16 ttpid,\n\t\t       u16 subpid, u16 pcrpid);\n\nvoid av7110_ir_handler(struct av7110 *av7110, u32 ircom);\nint av7110_set_ir_config(struct av7110 *av7110);\nint av7110_ir_init(struct av7110 *av7110);\nvoid av7110_ir_exit(struct av7110 *av7110);\n\n \n#define MSP_WR_DEM 0x10\n#define MSP_RD_DEM 0x11\n#define MSP_WR_DSP 0x12\n#define MSP_RD_DSP 0x13\n\nextern int i2c_writereg(struct av7110 *av7110, u8 id, u8 reg, u8 val);\nextern u8 i2c_readreg(struct av7110 *av7110, u8 id, u8 reg);\nextern int msp_writereg(struct av7110 *av7110, u8 dev, u16 reg, u16 val);\n\n\nextern int av7110_init_analog_module(struct av7110 *av7110);\nextern int av7110_init_v4l(struct av7110 *av7110);\nextern int av7110_exit_v4l(struct av7110 *av7110);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}