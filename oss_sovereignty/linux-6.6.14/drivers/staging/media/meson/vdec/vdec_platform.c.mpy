{
  "module_name": "vdec_platform.c",
  "hash_id": "0992eb62fb5423b87d245c9d9b88a29e7d27d0229de6ad4bdb41af07fbd3a64a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/meson/vdec/vdec_platform.c",
  "human_readable_source": "\n \n\n#include \"vdec_platform.h\"\n#include \"vdec.h\"\n\n#include \"vdec_1.h\"\n#include \"vdec_hevc.h\"\n#include \"codec_mpeg12.h\"\n#include \"codec_h264.h\"\n#include \"codec_vp9.h\"\n\nstatic const struct amvdec_format vdec_formats_gxbb[] = {\n\t{\n\t\t.pixfmt = V4L2_PIX_FMT_H264,\n\t\t.min_buffers = 2,\n\t\t.max_buffers = 24,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_h264_ops,\n\t\t.firmware_path = \"meson/vdec/gxbb_h264.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG1,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG2,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t},\n};\n\nstatic const struct amvdec_format vdec_formats_gxl[] = {\n\t{\n\t\t.pixfmt = V4L2_PIX_FMT_VP9,\n\t\t.min_buffers = 16,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_hevc_ops,\n\t\t.codec_ops = &codec_vp9_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_vp9.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_H264,\n\t\t.min_buffers = 2,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_h264_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_h264.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG1,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG2,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t},\n};\n\nstatic const struct amvdec_format vdec_formats_gxm[] = {\n\t{\n\t\t.pixfmt = V4L2_PIX_FMT_VP9,\n\t\t.min_buffers = 16,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_hevc_ops,\n\t\t.codec_ops = &codec_vp9_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_vp9.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_H264,\n\t\t.min_buffers = 2,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_h264_ops,\n\t\t.firmware_path = \"meson/vdec/gxm_h264.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG1,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG2,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t},\n};\n\nstatic const struct amvdec_format vdec_formats_g12a[] = {\n\t{\n\t\t.pixfmt = V4L2_PIX_FMT_VP9,\n\t\t.min_buffers = 16,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_hevc_ops,\n\t\t.codec_ops = &codec_vp9_ops,\n\t\t.firmware_path = \"meson/vdec/g12a_vp9.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_H264,\n\t\t.min_buffers = 2,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_h264_ops,\n\t\t.firmware_path = \"meson/vdec/g12a_h264.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG1,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG2,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t},\n};\n\nstatic const struct amvdec_format vdec_formats_sm1[] = {\n\t{\n\t\t.pixfmt = V4L2_PIX_FMT_VP9,\n\t\t.min_buffers = 16,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_hevc_ops,\n\t\t.codec_ops = &codec_vp9_ops,\n\t\t.firmware_path = \"meson/vdec/sm1_vp9_mmu.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_H264,\n\t\t.min_buffers = 2,\n\t\t.max_buffers = 24,\n\t\t.max_width = 3840,\n\t\t.max_height = 2160,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_h264_ops,\n\t\t.firmware_path = \"meson/vdec/g12a_h264.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED |\n\t\t\t V4L2_FMT_FLAG_DYN_RESOLUTION,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG1,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t}, {\n\t\t.pixfmt = V4L2_PIX_FMT_MPEG2,\n\t\t.min_buffers = 8,\n\t\t.max_buffers = 8,\n\t\t.max_width = 1920,\n\t\t.max_height = 1080,\n\t\t.vdec_ops = &vdec_1_ops,\n\t\t.codec_ops = &codec_mpeg12_ops,\n\t\t.firmware_path = \"meson/vdec/gxl_mpeg12.bin\",\n\t\t.pixfmts_cap = { V4L2_PIX_FMT_NV12M, V4L2_PIX_FMT_YUV420M, 0 },\n\t\t.flags = V4L2_FMT_FLAG_COMPRESSED,\n\t},\n};\n\nconst struct vdec_platform vdec_platform_gxbb = {\n\t.formats = vdec_formats_gxbb,\n\t.num_formats = ARRAY_SIZE(vdec_formats_gxbb),\n\t.revision = VDEC_REVISION_GXBB,\n};\n\nconst struct vdec_platform vdec_platform_gxl = {\n\t.formats = vdec_formats_gxl,\n\t.num_formats = ARRAY_SIZE(vdec_formats_gxl),\n\t.revision = VDEC_REVISION_GXL,\n};\n\nconst struct vdec_platform vdec_platform_gxm = {\n\t.formats = vdec_formats_gxm,\n\t.num_formats = ARRAY_SIZE(vdec_formats_gxm),\n\t.revision = VDEC_REVISION_GXM,\n};\n\nconst struct vdec_platform vdec_platform_g12a = {\n\t.formats = vdec_formats_g12a,\n\t.num_formats = ARRAY_SIZE(vdec_formats_g12a),\n\t.revision = VDEC_REVISION_G12A,\n};\n\nconst struct vdec_platform vdec_platform_sm1 = {\n\t.formats = vdec_formats_sm1,\n\t.num_formats = ARRAY_SIZE(vdec_formats_sm1),\n\t.revision = VDEC_REVISION_SM1,\n};\n\nMODULE_FIRMWARE(\"meson/vdec/g12a_h264.bin\");\nMODULE_FIRMWARE(\"meson/vdec/g12a_vp9.bin\");\nMODULE_FIRMWARE(\"meson/vdec/gxbb_h264.bin\");\nMODULE_FIRMWARE(\"meson/vdec/gxl_h264.bin\");\nMODULE_FIRMWARE(\"meson/vdec/gxl_mpeg12.bin\");\nMODULE_FIRMWARE(\"meson/vdec/gxl_vp9.bin\");\nMODULE_FIRMWARE(\"meson/vdec/gxm_h264.bin\");\nMODULE_FIRMWARE(\"meson/vdec/sm1_vp9_mmu.bin\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}