{
  "module_name": "ia_css_fpn.host.c",
  "hash_id": "32e2ae41d87aa295caeca3f01edcd48c79e178757cdbac2844d13388c0d7a662",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/isp/kernels/fpn/fpn_1.0/ia_css_fpn.host.c",
  "human_readable_source": "\n \n\n#include <assert_support.h>\n#include <ia_css_frame_public.h>\n#include <ia_css_frame.h>\n#include <ia_css_binary.h>\n#include <ia_css_types.h>\n#include <sh_css_defs.h>\n#include <ia_css_debug.h>\n\n#define IA_CSS_INCLUDE_CONFIGURATIONS\n#include \"ia_css_isp_configs.h\"\n#include \"isp.h\"\n\n#include \"ia_css_fpn.host.h\"\n\nvoid\nia_css_fpn_encode(\n    struct sh_css_isp_fpn_params *to,\n    const struct ia_css_fpn_table *from,\n    unsigned int size)\n{\n\t(void)size;\n\tto->shift = from->shift;\n\tto->enabled = from->data != NULL;\n}\n\nvoid\nia_css_fpn_dump(\n    const struct sh_css_isp_fpn_params *fpn,\n    unsigned int level)\n{\n\tif (!fpn) return;\n\tia_css_debug_dtrace(level, \"Fixed Pattern Noise Reduction:\\n\");\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"fpn_shift\", fpn->shift);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"fpn_enabled\", fpn->enabled);\n}\n\nint ia_css_fpn_config(struct sh_css_isp_fpn_isp_config *to,\n\t\t      const struct ia_css_fpn_configuration *from,\n\t\t      unsigned int size)\n{\n\tunsigned int elems_a = ISP_VEC_NELEMS;\n\tint ret;\n\n\tret = ia_css_dma_configure_from_info(&to->port_b, from->info);\n\tif (ret)\n\t\treturn ret;\n\n\tto->width_a_over_b = elems_a / to->port_b.elems;\n\n\t \n\tif (elems_a % to->port_b.elems != 0)\n\t\treturn -EINVAL;\n\n\treturn 0;\n}\n\nint ia_css_fpn_configure(const struct ia_css_binary     *binary,\n\t\t\t const struct ia_css_frame_info *info)\n{\n\tstruct ia_css_frame_info my_info = IA_CSS_BINARY_DEFAULT_FRAME_INFO;\n\tconst struct ia_css_fpn_configuration config = {\n\t\t&my_info\n\t};\n\n\tmy_info.res.width       = CEIL_DIV(info->res.width, 2);\t\t \n\tmy_info.res.height      = info->res.height;\n\tmy_info.padded_width    = CEIL_DIV(info->padded_width, 2);\t \n\tmy_info.format          = info->format;\n\tmy_info.raw_bit_depth   = FPN_BITS_PER_PIXEL;\n\tmy_info.raw_bayer_order = info->raw_bayer_order;\n\tmy_info.crop_info       = info->crop_info;\n\n\treturn ia_css_configure_fpn(binary, &config);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}