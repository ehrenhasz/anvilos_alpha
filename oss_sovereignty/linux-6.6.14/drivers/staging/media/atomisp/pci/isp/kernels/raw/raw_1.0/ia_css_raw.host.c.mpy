{
  "module_name": "ia_css_raw.host.c",
  "hash_id": "1f207e64ed55afb88a8fd0be7a0d778e4fc8ec689fceca8cf99761b48b2cfcd1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/isp/kernels/raw/raw_1.0/ia_css_raw.host.c",
  "human_readable_source": "\n \n\n#include \"ia_css_frame.h\"\n#include \"ia_css_types.h\"\n#include \"sh_css_defs.h\"\n#include \"ia_css_debug.h\"\n#include \"assert_support.h\"\n#define IA_CSS_INCLUDE_CONFIGURATIONS\n#include \"ia_css_isp_configs.h\"\n#include \"isp.h\"\n#include \"isp/modes/interface/isp_types.h\"\n\n#include \"ia_css_raw.host.h\"\n\nstatic const struct ia_css_raw_configuration default_config = {\n\t.pipe = (struct sh_css_sp_pipeline *)NULL,\n};\n\n \nstatic enum sh_stream_format\ncss2isp_stream_format(enum atomisp_input_format from) {\n\tswitch (from)\n\t{\n\tcase ATOMISP_INPUT_FORMAT_YUV420_8_LEGACY:\n\t\t\t\treturn sh_stream_format_yuv420_legacy;\n\tcase ATOMISP_INPUT_FORMAT_YUV420_8:\n\tcase ATOMISP_INPUT_FORMAT_YUV420_10:\n\tcase ATOMISP_INPUT_FORMAT_YUV420_16:\n\t\treturn sh_stream_format_yuv420;\n\tcase ATOMISP_INPUT_FORMAT_YUV422_8:\n\tcase ATOMISP_INPUT_FORMAT_YUV422_10:\n\tcase ATOMISP_INPUT_FORMAT_YUV422_16:\n\t\treturn sh_stream_format_yuv422;\n\tcase ATOMISP_INPUT_FORMAT_RGB_444:\n\tcase ATOMISP_INPUT_FORMAT_RGB_555:\n\tcase ATOMISP_INPUT_FORMAT_RGB_565:\n\tcase ATOMISP_INPUT_FORMAT_RGB_666:\n\tcase ATOMISP_INPUT_FORMAT_RGB_888:\n\t\treturn sh_stream_format_rgb;\n\tcase ATOMISP_INPUT_FORMAT_RAW_6:\n\tcase ATOMISP_INPUT_FORMAT_RAW_7:\n\tcase ATOMISP_INPUT_FORMAT_RAW_8:\n\tcase ATOMISP_INPUT_FORMAT_RAW_10:\n\tcase ATOMISP_INPUT_FORMAT_RAW_12:\n\tcase ATOMISP_INPUT_FORMAT_RAW_14:\n\tcase ATOMISP_INPUT_FORMAT_RAW_16:\n\t\treturn sh_stream_format_raw;\n\tcase ATOMISP_INPUT_FORMAT_BINARY_8:\n\tdefault:\n\t\treturn sh_stream_format_raw;\n\t}\n}\n\nint ia_css_raw_config(struct sh_css_isp_raw_isp_config *to,\n\t\t      const struct ia_css_raw_configuration  *from,\n\t\t      unsigned int size)\n{\n\tunsigned int elems_a = ISP_VEC_NELEMS;\n\tconst struct ia_css_frame_info *in_info = from->in_info;\n\tconst struct ia_css_frame_info *internal_info = from->internal_info;\n\tint ret;\n\n#if !defined(ISP2401)\n\t \n\tin_info = internal_info;\n#else\n\t \n\tif (in_info)\n\t\t(void)internal_info;\n\telse\n\t\tin_info = internal_info;\n\n#endif\n\tret = ia_css_dma_configure_from_info(&to->port_b, in_info);\n\tif (ret)\n\t\treturn ret;\n\n\t \n\tassert((in_info->format == IA_CSS_FRAME_FORMAT_RAW_PACKED) ||\n\t       (elems_a % to->port_b.elems == 0));\n\n\tto->width_a_over_b      = elems_a / to->port_b.elems;\n\tto->inout_port_config   = from->pipe->inout_port_config;\n\tto->format              = in_info->format;\n\tto->required_bds_factor = from->pipe->required_bds_factor;\n\tto->two_ppc             = from->two_ppc;\n\tto->stream_format       = css2isp_stream_format(from->stream_format);\n\tto->deinterleaved       = from->deinterleaved;\n#if defined(ISP2401)\n\tto->start_column        = in_info->crop_info.start_column;\n\tto->start_line          = in_info->crop_info.start_line;\n\tto->enable_left_padding = from->enable_left_padding;\n#endif\n\n\treturn 0;\n}\n\nint ia_css_raw_configure(const struct sh_css_sp_pipeline *pipe,\n\t\t\t const struct ia_css_binary      *binary,\n\t\t\t const struct ia_css_frame_info  *in_info,\n\t\t\t const struct ia_css_frame_info  *internal_info,\n\t\t\t bool two_ppc,\n\t\t\t bool deinterleaved)\n{\n\tu8 enable_left_padding = (uint8_t)((binary->left_padding) ? 1 : 0);\n\tstruct ia_css_raw_configuration config = default_config;\n\n\tconfig.pipe                = pipe;\n\tconfig.in_info             = in_info;\n\tconfig.internal_info       = internal_info;\n\tconfig.two_ppc             = two_ppc;\n\tconfig.stream_format       = binary->input_format;\n\tconfig.deinterleaved       = deinterleaved;\n\tconfig.enable_left_padding = enable_left_padding;\n\n\treturn ia_css_configure_raw(binary, &config);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}