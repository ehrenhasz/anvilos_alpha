{
  "module_name": "ia_css_dp.host.c",
  "hash_id": "7fa887453740aafbea5583ee788ae9f04f1b8a416bbe4fefadab09992f0c3e96",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/isp/kernels/dp/dp_1.0/ia_css_dp.host.c",
  "human_readable_source": "\n \n\n#include \"ia_css_types.h\"\n#include \"sh_css_defs.h\"\n#include \"ia_css_debug.h\"\n#include \"sh_css_frac.h\"\n\n#include \"ia_css_dp.host.h\"\n\n \nconst struct ia_css_dp_config default_dp_10bpp_config = {\n\t1024,\n\t2048,\n\t32768,\n\t32768,\n\t32768,\n\t32768\n};\n\nconst struct ia_css_dp_config default_dp_config = {\n\t8192,\n\t2048,\n\t32768,\n\t32768,\n\t32768,\n\t32768\n};\n\nvoid\nia_css_dp_encode(\n    struct sh_css_isp_dp_params *to,\n    const struct ia_css_dp_config *from,\n    unsigned int size)\n{\n\tint gain = from->gain;\n\tint gr   = from->gr;\n\tint r    = from->r;\n\tint b    = from->b;\n\tint gb   = from->gb;\n\n\t(void)size;\n\tto->threshold_single =\n\t    SH_CSS_BAYER_MAXVAL;\n\tto->threshold_2adjacent =\n\t    uDIGIT_FITTING(from->threshold, 16, SH_CSS_BAYER_BITS);\n\tto->gain =\n\t    uDIGIT_FITTING(from->gain, 8, SH_CSS_DP_GAIN_SHIFT);\n\n\tto->coef_rr_gr =\n\t    uDIGIT_FITTING(gain * gr / r, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_rr_gb =\n\t    uDIGIT_FITTING(gain * gb / r, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_bb_gb =\n\t    uDIGIT_FITTING(gain * gb / b, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_bb_gr =\n\t    uDIGIT_FITTING(gain * gr / b, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_gr_rr =\n\t    uDIGIT_FITTING(gain * r / gr, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_gr_bb =\n\t    uDIGIT_FITTING(gain * b / gr, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_gb_bb =\n\t    uDIGIT_FITTING(gain * b / gb, 8, SH_CSS_DP_GAIN_SHIFT);\n\tto->coef_gb_rr =\n\t    uDIGIT_FITTING(gain * r / gb, 8, SH_CSS_DP_GAIN_SHIFT);\n}\n\nvoid\nia_css_dp_dump(\n    const struct sh_css_isp_dp_params *dp,\n    unsigned int level)\n{\n\tif (!dp) return;\n\tia_css_debug_dtrace(level, \"Defect Pixel Correction:\\n\");\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dp_threshold_single_w_2adj_on\",\n\t\t\t    dp->threshold_single);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dp_threshold_2adj_w_2adj_on\",\n\t\t\t    dp->threshold_2adjacent);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dp_gain\", dp->gain);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_rr_gr\", dp->coef_rr_gr);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_rr_gb\", dp->coef_rr_gb);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_bb_gb\", dp->coef_bb_gb);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_bb_gr\", dp->coef_bb_gr);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_gr_rr\", dp->coef_gr_rr);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_gr_bb\", dp->coef_gr_bb);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_gb_bb\", dp->coef_gb_bb);\n\tia_css_debug_dtrace(level, \"\\t%-32s = %d\\n\",\n\t\t\t    \"dpc_coef_gb_rr\", dp->coef_gb_rr);\n}\n\nvoid\nia_css_dp_debug_dtrace(\n    const struct ia_css_dp_config *config,\n    unsigned int level)\n{\n\tia_css_debug_dtrace(level,\n\t\t\t    \"config.threshold=%d, config.gain=%d\\n\",\n\t\t\t    config->threshold, config->gain);\n}\n\nvoid\nia_css_init_dp_state(\n    void  * state,\n    size_t size)\n{\n\tmemset(state, 0, size);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}