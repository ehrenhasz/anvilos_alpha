{
  "module_name": "ia_css_bayer_io.host.c",
  "hash_id": "2c739dd104b8007038a75f7eb2aa2c486e382e6bb7ed5858a8cafa19d6fece78",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/isp/kernels/ipu2_io_ls/bayer_io_ls/ia_css_bayer_io.host.c",
  "human_readable_source": "\n \n\n#include \"ia_css_bayer_io.host.h\"\n#include \"dma.h\"\n#include \"math_support.h\"\n#ifndef IA_CSS_NO_DEBUG\n#include \"ia_css_debug.h\"\n#endif\n#include \"ia_css_isp_params.h\"\n#include \"ia_css_frame.h\"\n\nint ia_css_bayer_io_config(const struct ia_css_binary      *binary,\n\t\t\t   const struct sh_css_binary_args *args)\n{\n\tconst struct ia_css_frame *in_frame = args->in_frame;\n\tconst struct ia_css_frame **out_frames = (const struct ia_css_frame **)\n\t\t&args->out_frame;\n\tconst struct ia_css_frame_info *in_frame_info = ia_css_frame_get_info(in_frame);\n\tconst unsigned int ddr_bits_per_element = sizeof(short) * 8;\n\tconst unsigned int ddr_elems_per_word = ceil_div(HIVE_ISP_DDR_WORD_BITS,\n\t\t\t\t\t\tddr_bits_per_element);\n\tunsigned int size_get = 0, size_put = 0;\n\tunsigned int offset = 0;\n\tint ret;\n\n\tif (binary->info->mem_offsets.offsets.param) {\n\t\tsize_get = binary->info->mem_offsets.offsets.param->dmem.get.size;\n\t\toffset = binary->info->mem_offsets.offsets.param->dmem.get.offset;\n\t}\n\n\tif (size_get) {\n\t\tstruct ia_css_common_io_config *to = (struct ia_css_common_io_config *)\n\t\t\t\t\t\t     &binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset];\n\t\tstruct dma_port_config config;\n#ifndef IA_CSS_NO_DEBUG\n\t\tia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE,\n\t\t\t\t    \"ia_css_bayer_io_config() get part enter:\\n\");\n#endif\n\n\t\tret = ia_css_dma_configure_from_info(&config, in_frame_info);\n\t\tif (ret)\n\t\t\treturn ret;\n\t\t\n\t\tto->width = in_frame_info->res.width;\n\t\tto->height = in_frame_info->res.height;\n\t\tto->stride = config.stride;\n\t\tto->ddr_elems_per_word = ddr_elems_per_word;\n#ifndef IA_CSS_NO_DEBUG\n\t\tia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE,\n\t\t\t\t    \"ia_css_bayer_io_config() get part leave:\\n\");\n#endif\n\t}\n\n\tif (binary->info->mem_offsets.offsets.param) {\n\t\tsize_put = binary->info->mem_offsets.offsets.param->dmem.put.size;\n\t\toffset = binary->info->mem_offsets.offsets.param->dmem.put.offset;\n\t}\n\n\tif (size_put) {\n\t\tstruct ia_css_common_io_config *to = (struct ia_css_common_io_config *)\n\t\t\t\t\t\t     &binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset];\n\t\tstruct dma_port_config config;\n#ifndef IA_CSS_NO_DEBUG\n\t\tia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE,\n\t\t\t\t    \"ia_css_bayer_io_config() put part enter:\\n\");\n#endif\n\n\t\tret = ia_css_dma_configure_from_info(&config, &out_frames[0]->frame_info);\n\t\tif (ret)\n\t\t\treturn ret;\n\t\tto->base_address = out_frames[0]->data;\n\t\tto->width = out_frames[0]->frame_info.res.width;\n\t\tto->height = out_frames[0]->frame_info.res.height;\n\t\tto->stride = config.stride;\n\t\tto->ddr_elems_per_word = ddr_elems_per_word;\n\n#ifndef IA_CSS_NO_DEBUG\n\t\tia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE,\n\t\t\t\t    \"ia_css_bayer_io_config() put part leave:\\n\");\n#endif\n\t}\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}