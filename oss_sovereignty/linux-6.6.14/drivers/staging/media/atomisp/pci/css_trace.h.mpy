{
  "module_name": "css_trace.h",
  "hash_id": "bbe1f71f534fc217fef740321ae9405082d670d75e0fe6e7411a463e7508670b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/css_trace.h",
  "human_readable_source": " \n \n\n#ifndef __CSS_TRACE_H_\n#define __CSS_TRACE_H_\n\n#include <type_support.h>\n#include \"sh_css_internal.h\"\t \n\n \n\n \nstruct trace_item_t {\n\tu8   major;\n\tu8   minor;\n\tu16  counter;\n};\n\n#define MAX_SCRATCH_DATA\t4\n#define MAX_CMD_DATA\t\t2\n\n \nstruct trace_header_t {\n\t \n\tu8   version;\n\tu8   max_threads;\n\tu16  max_tracer_points;\n\t \n\t \n\tu32  command;\n\t \n\tu32  data[MAX_CMD_DATA];\n\t \n\t \n\tu32  debug_ptr_signature;\n\tu32  debug_ptr_value;\n\t \n\tu8   thr_status_byte[SH_CSS_MAX_SP_THREADS];\n\tu16  thr_status_word[SH_CSS_MAX_SP_THREADS];\n\tu32  thr_status_dword[SH_CSS_MAX_SP_THREADS];\n\tu32  scratch_debug[MAX_SCRATCH_DATA];\n};\n\n \n#define HDR_HDR_OFFSET              0\t \n#define HDR_COMMAND_OFFSET          offsetof(struct trace_header_t, command)\n#define HDR_DATA_OFFSET             offsetof(struct trace_header_t, data)\n#define HDR_DEBUG_SIGNATURE_OFFSET  offsetof(struct trace_header_t, debug_ptr_signature)\n#define HDR_DEBUG_POINTER_OFFSET    offsetof(struct trace_header_t, debug_ptr_value)\n#define HDR_STATUS_OFFSET           offsetof(struct trace_header_t, thr_status_byte)\n#define HDR_STATUS_OFFSET_BYTE      offsetof(struct trace_header_t, thr_status_byte)\n#define HDR_STATUS_OFFSET_WORD      offsetof(struct trace_header_t, thr_status_word)\n#define HDR_STATUS_OFFSET_DWORD     offsetof(struct trace_header_t, thr_status_dword)\n#define HDR_STATUS_OFFSET_SCRATCH   offsetof(struct trace_header_t, scratch_debug)\n\n \n#define TRACER_VER\t\t\t4\n\n#define TRACE_BUFF_ADDR       0xA000\n#define TRACE_BUFF_SIZE       0x1000\t \n\n#define TRACE_ENABLE_SP0 0\n#define TRACE_ENABLE_SP1 0\n#define TRACE_ENABLE_ISP 0\n\nenum TRACE_CORE_ID {\n\tTRACE_SP0_ID,\n\tTRACE_SP1_ID,\n\tTRACE_ISP_ID\n};\n\n \nenum TRACE_DUMP_FORMAT {\n\tTRACE_DUMP_FORMAT_POINT_NO_TID,\n\tTRACE_DUMP_FORMAT_VALUE24,\n\tTRACE_DUMP_FORMAT_VALUE24_TIMING,\n\tTRACE_DUMP_FORMAT_VALUE24_TIMING_DELTA,\n\tTRACE_DUMP_FORMAT_POINT\n};\n\n \n#if (TRACE_ENABLE_SP0 + TRACE_ENABLE_SP1 + TRACE_ENABLE_ISP == 3)\n \n#define TRACE_SP0_SIZE (TRACE_BUFF_SIZE / 4)\n#define TRACE_SP1_SIZE (TRACE_BUFF_SIZE / 4)\n#define TRACE_ISP_SIZE (TRACE_BUFF_SIZE / 2)\n#elif (TRACE_ENABLE_SP0 + TRACE_ENABLE_SP1 + TRACE_ENABLE_ISP == 2)\n#if TRACE_ENABLE_SP0\n#define TRACE_SP0_SIZE (TRACE_BUFF_SIZE / 2)\n#else\n#define TRACE_SP0_SIZE (0)\n#endif\n#if TRACE_ENABLE_SP1\n#define TRACE_SP1_SIZE (TRACE_BUFF_SIZE / 2)\n#else\n#define TRACE_SP1_SIZE (0)\n#endif\n#if TRACE_ENABLE_ISP\n#define TRACE_ISP_SIZE (TRACE_BUFF_SIZE / 2)\n#else\n#define TRACE_ISP_SIZE (0)\n#endif\n#elif (TRACE_ENABLE_SP0 + TRACE_ENABLE_SP1 + TRACE_ENABLE_ISP == 1)\n#if TRACE_ENABLE_SP0\n#define TRACE_SP0_SIZE (TRACE_BUFF_SIZE)\n#else\n#define TRACE_SP0_SIZE (0)\n#endif\n#if TRACE_ENABLE_SP1\n#define TRACE_SP1_SIZE (TRACE_BUFF_SIZE)\n#else\n#define TRACE_SP1_SIZE (0)\n#endif\n#if TRACE_ENABLE_ISP\n#define TRACE_ISP_SIZE (TRACE_BUFF_SIZE)\n#else\n#define TRACE_ISP_SIZE (0)\n#endif\n#else\n#define TRACE_SP0_SIZE (0)\n#define TRACE_SP1_SIZE (0)\n#define TRACE_ISP_SIZE (0)\n#endif\n\n#define TRACE_SP0_ADDR (TRACE_BUFF_ADDR)\n#define TRACE_SP1_ADDR (TRACE_SP0_ADDR + TRACE_SP0_SIZE)\n#define TRACE_ISP_ADDR (TRACE_SP1_ADDR + TRACE_SP1_SIZE)\n\n \n#if (TRACE_BUFF_SIZE < TRACE_SP0_SIZE + TRACE_SP1_SIZE + TRACE_ISP_SIZE)\n#error trace sizes are not divided correctly and are above limit\n#endif\n\n#define TRACE_SP0_HEADER_ADDR (TRACE_SP0_ADDR)\n#define TRACE_SP0_HEADER_SIZE (sizeof(struct trace_header_t))\n#define TRACE_SP0_ITEM_SIZE   (sizeof(struct trace_item_t))\n#define TRACE_SP0_DATA_ADDR   (TRACE_SP0_HEADER_ADDR + TRACE_SP0_HEADER_SIZE)\n#define TRACE_SP0_DATA_SIZE   (TRACE_SP0_SIZE - TRACE_SP0_HEADER_SIZE)\n#define TRACE_SP0_MAX_POINTS  (TRACE_SP0_DATA_SIZE / TRACE_SP0_ITEM_SIZE)\n\n#define TRACE_SP1_HEADER_ADDR (TRACE_SP1_ADDR)\n#define TRACE_SP1_HEADER_SIZE (sizeof(struct trace_header_t))\n#define TRACE_SP1_ITEM_SIZE   (sizeof(struct trace_item_t))\n#define TRACE_SP1_DATA_ADDR   (TRACE_SP1_HEADER_ADDR + TRACE_SP1_HEADER_SIZE)\n#define TRACE_SP1_DATA_SIZE   (TRACE_SP1_SIZE - TRACE_SP1_HEADER_SIZE)\n#define TRACE_SP1_MAX_POINTS  (TRACE_SP1_DATA_SIZE / TRACE_SP1_ITEM_SIZE)\n\n#define TRACE_ISP_HEADER_ADDR (TRACE_ISP_ADDR)\n#define TRACE_ISP_HEADER_SIZE (sizeof(struct trace_header_t))\n#define TRACE_ISP_ITEM_SIZE   (sizeof(struct trace_item_t))\n#define TRACE_ISP_DATA_ADDR   (TRACE_ISP_HEADER_ADDR + TRACE_ISP_HEADER_SIZE)\n#define TRACE_ISP_DATA_SIZE   (TRACE_ISP_SIZE - TRACE_ISP_HEADER_SIZE)\n#define TRACE_ISP_MAX_POINTS  (TRACE_ISP_DATA_SIZE / TRACE_ISP_ITEM_SIZE)\n\n \n \n#define MAJOR_MAIN              1\n#define MAJOR_ISP_STAGE_ENTRY   2\n#define MAJOR_DMA_PRXY          3\n#define MAJOR_START_ISP         4\n \n#define MAJOR_OBSERVER_ISP0_EVENT          21\n#define MAJOR_OBSERVER_OUTPUT_FORM_EVENT   22\n#define MAJOR_OBSERVER_OUTPUT_SCAL_EVENT   23\n#define MAJOR_OBSERVER_IF_ACK              24\n#define MAJOR_OBSERVER_SP0_EVENT           25\n#define MAJOR_OBSERVER_SP_TERMINATE_EVENT  26\n#define MAJOR_OBSERVER_DMA_ACK             27\n#define MAJOR_OBSERVER_ACC_ACK             28\n\n#define DEBUG_PTR_SIGNATURE     0xABCD\t \n\n \ntypedef enum {\n\tCMD_SET_ONE_MAJOR = 1,\t\t \n\tCMD_UNSET_ONE_MAJOR = 2,\t \n\tCMD_SET_ALL_MAJORS = 3,\t\t \n\tCMD_SET_VERBOSITY = 4\t\t \n} DBG_commands;\n\n \n#define CMD_SIGNATURE\t0xAABBCC00\n\n \n \n#define DBG_NEXT_ITEM(x, max_items) (((x + 1) >= max_items) ? 0 : x + 1)\n#define DBG_PREV_ITEM(x, max_items) ((x) ? x - 1 : max_items - 1)\n\n#define FIELD_MASK(width) (((1 << (width)) - 1))\n#define FIELD_PACK(value, mask, offset) (((value) & (mask)) << (offset))\n#define FIELD_UNPACK(value, mask, offset) (((value) >> (offset)) & (mask))\n\n#define FIELD_VALUE_OFFSET\t\t(0)\n#define FIELD_VALUE_WIDTH\t\t(16)\n#define FIELD_VALUE_MASK\t\tFIELD_MASK(FIELD_VALUE_WIDTH)\n#define FIELD_VALUE_PACK(f)\t\tFIELD_PACK(f, FIELD_VALUE_MASK, FIELD_VALUE_OFFSET)\n#define FIELD_VALUE_UNPACK(f)\t\tFIELD_UNPACK(f, FIELD_VALUE_MASK, FIELD_VALUE_OFFSET)\n\n#define FIELD_MINOR_OFFSET\t\t(FIELD_VALUE_OFFSET + FIELD_VALUE_WIDTH)\n#define FIELD_MINOR_WIDTH\t\t(8)\n#define FIELD_MINOR_MASK\t\tFIELD_MASK(FIELD_MINOR_WIDTH)\n#define FIELD_MINOR_PACK(f)\t\tFIELD_PACK(f, FIELD_MINOR_MASK, FIELD_MINOR_OFFSET)\n#define FIELD_MINOR_UNPACK(f)\t\tFIELD_UNPACK(f, FIELD_MINOR_MASK, FIELD_MINOR_OFFSET)\n\n#define FIELD_MAJOR_OFFSET\t\t(FIELD_MINOR_OFFSET + FIELD_MINOR_WIDTH)\n#define FIELD_MAJOR_WIDTH\t\t(5)\n#define FIELD_MAJOR_MASK\t\tFIELD_MASK(FIELD_MAJOR_WIDTH)\n#define FIELD_MAJOR_PACK(f)\t\tFIELD_PACK(f, FIELD_MAJOR_MASK, FIELD_MAJOR_OFFSET)\n#define FIELD_MAJOR_UNPACK(f)\t\tFIELD_UNPACK(f, FIELD_MAJOR_MASK, FIELD_MAJOR_OFFSET)\n\n \n#define FIELD_FULL_MAJOR_WIDTH\t\t(8)\n#define FIELD_FULL_MAJOR_MASK\t\tFIELD_MASK(FIELD_FULL_MAJOR_WIDTH)\n#define FIELD_FULL_MAJOR_PACK(f)\tFIELD_PACK(f, FIELD_FULL_MAJOR_MASK, FIELD_MAJOR_OFFSET)\n\n \n#define FIELD_MAJOR_W_FMT_OFFSET\tFIELD_MAJOR_OFFSET\n#define FIELD_MAJOR_W_FMT_WIDTH\t\t(3)\n#define FIELD_MAJOR_W_FMT_MASK\t\tFIELD_MASK(FIELD_MAJOR_W_FMT_WIDTH)\n#define FIELD_MAJOR_W_FMT_PACK(f)\tFIELD_PACK(f, FIELD_MAJOR_W_FMT_MASK, FIELD_MAJOR_W_FMT_OFFSET)\n#define FIELD_MAJOR_W_FMT_UNPACK(f)\tFIELD_UNPACK(f, FIELD_MAJOR_W_FMT_MASK, FIELD_MAJOR_W_FMT_OFFSET)\n\n#define FIELD_FORMAT_OFFSET\t\t(FIELD_MAJOR_OFFSET + FIELD_MAJOR_W_FMT_WIDTH)\n#define FIELD_FORMAT_WIDTH\t\t(2)\n#define FIELD_FORMAT_MASK\t\tFIELD_MASK(FIELD_MAJOR_W_FMT_WIDTH)\n#define FIELD_FORMAT_PACK(f)\t\tFIELD_PACK(f, FIELD_FORMAT_MASK, FIELD_FORMAT_OFFSET)\n#define FIELD_FORMAT_UNPACK(f)\t\tFIELD_UNPACK(f, FIELD_FORMAT_MASK, FIELD_FORMAT_OFFSET)\n\n#define FIELD_TID_SEL_FORMAT_PAT\t(7)\n\n#define FIELD_TID_OFFSET\t\t(FIELD_MAJOR_OFFSET + FIELD_MAJOR_WIDTH)\n#define FIELD_TID_WIDTH\t\t\t(3)\n#define FIELD_TID_MASK\t\t\tFIELD_MASK(FIELD_TID_WIDTH)\n#define FIELD_TID_PACK(f)\t\tFIELD_PACK(f, FIELD_TID_MASK, FIELD_TID_OFFSET)\n#define FIELD_TID_UNPACK(f)\t\tFIELD_UNPACK(f, FIELD_TID_MASK, FIELD_TID_OFFSET)\n\n#define FIELD_VALUE_24_OFFSET\t\t(0)\n#define FIELD_VALUE_24_WIDTH\t\t(24)\n#define FIELD_VALUE_24_MASK\t\tFIELD_MASK(FIELD_VALUE_24_WIDTH)\n#define FIELD_VALUE_24_PACK(f)\t\tFIELD_PACK(f, FIELD_VALUE_24_MASK, FIELD_VALUE_24_OFFSET)\n#define FIELD_VALUE_24_UNPACK(f)\tFIELD_UNPACK(f, FIELD_VALUE_24_MASK, FIELD_VALUE_24_OFFSET)\n\n#define PACK_TRACEPOINT(tid, major, minor, value)\t\\\n\t(FIELD_TID_PACK(tid) | FIELD_MAJOR_PACK(major) | FIELD_MINOR_PACK(minor) | FIELD_VALUE_PACK(value))\n\n#define PACK_QUICK_TRACEPOINT(major, minor)\t\\\n\t(FIELD_FULL_MAJOR_PACK(major) | FIELD_MINOR_PACK(minor))\n\n#define PACK_FORMATTED_TRACEPOINT(format, major, minor, value)\t\\\n\t(FIELD_TID_PACK(FIELD_TID_SEL_FORMAT_PAT) | FIELD_FORMAT_PACK(format) | FIELD_MAJOR_PACK(major) | FIELD_MINOR_PACK(minor) | FIELD_VALUE_PACK(value))\n\n#define PACK_TRACE_VALUE24(major, value)\t\\\n\t(FIELD_TID_PACK(FIELD_TID_SEL_FORMAT_PAT) | FIELD_MAJOR_PACK(major) | FIELD_VALUE_24_PACK(value))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}