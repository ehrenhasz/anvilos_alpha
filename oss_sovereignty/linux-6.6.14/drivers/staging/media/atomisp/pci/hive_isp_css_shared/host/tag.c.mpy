{
  "module_name": "tag.c",
  "hash_id": "7b023561f120bbb00c75516c2e722eeec4416f05bd23c8efadab47045d807601",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/hive_isp_css_shared/host/tag.c",
  "human_readable_source": "\n \n\n#include \"tag.h\"\n#include <platform_support.h>\t \n#include <assert_support.h>\n#include \"tag_local.h\"\n\n \nvoid\nsh_css_create_tag_descr(int num_captures,\n\t\t\tunsigned int skip,\n\t\t\tint offset,\n\t\t\tunsigned int exp_id,\n\t\t\tstruct sh_css_tag_descr *tag_descr)\n{\n\tassert(tag_descr);\n\n\ttag_descr->num_captures = num_captures;\n\ttag_descr->skip\t\t= skip;\n\ttag_descr->offset\t= offset;\n\ttag_descr->exp_id\t= exp_id;\n}\n\n \nunsigned int\nsh_css_encode_tag_descr(struct sh_css_tag_descr *tag)\n{\n\tint num_captures;\n\tunsigned int num_captures_sign;\n\tunsigned int skip;\n\tint offset;\n\tunsigned int offset_sign;\n\tunsigned int exp_id;\n\tunsigned int encoded_tag;\n\n\tassert(tag);\n\n\tif (tag->num_captures < 0) {\n\t\tnum_captures = -tag->num_captures;\n\t\tnum_captures_sign = 1;\n\t} else {\n\t\tnum_captures = tag->num_captures;\n\t\tnum_captures_sign = 0;\n\t}\n\tskip = tag->skip;\n\tif (tag->offset < 0) {\n\t\toffset = -tag->offset;\n\t\toffset_sign = 1;\n\t} else {\n\t\toffset = tag->offset;\n\t\toffset_sign = 0;\n\t}\n\texp_id = tag->exp_id;\n\n\tif (exp_id != 0) {\n\t\t \n\t\tassert((num_captures == 0) && (skip == 0) && (offset == 0));\n\n\t\tencoded_tag = TAG_EXP | (exp_id & 0xFF) << TAG_EXP_ID_SHIFT;\n\t} else {\n\t\tencoded_tag = TAG_CAP\n\t\t\t      | ((num_captures_sign & 0x00000001) << TAG_NUM_CAPTURES_SIGN_SHIFT)\n\t\t\t      | ((offset_sign       & 0x00000001) << TAG_OFFSET_SIGN_SHIFT)\n\t\t\t      | ((num_captures      & 0x000000FF) << TAG_NUM_CAPTURES_SHIFT)\n\t\t\t      | ((skip              & 0x000000FF) << TAG_OFFSET_SHIFT)\n\t\t\t      | ((offset            & 0x000000FF) << TAG_SKIP_SHIFT);\n\t}\n\treturn encoded_tag;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}