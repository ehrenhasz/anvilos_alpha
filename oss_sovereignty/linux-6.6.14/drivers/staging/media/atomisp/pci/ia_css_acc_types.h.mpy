{
  "module_name": "ia_css_acc_types.h",
  "hash_id": "003e2c9f9ba175280a742dce28c2555da0be96d5a851dad8992986218d3637ff",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/ia_css_acc_types.h",
  "human_readable_source": " \n \n\n#ifndef _IA_CSS_ACC_TYPES_H\n#define _IA_CSS_ACC_TYPES_H\n\n \n\n#include <system_local.h>\t \n#include <type_support.h>\n#include <platform_support.h>\n#include <debug_global.h>\n#include <linux/bits.h>\n\n#include \"ia_css_types.h\"\n#include \"ia_css_frame_format.h\"\n\n \n#include \"runtime/isp_param/interface/ia_css_isp_param_types.h\"\n\n \n\n \nenum ia_css_acc_type {\n\tIA_CSS_ACC_NONE,\t \n\tIA_CSS_ACC_OUTPUT,\t \n\tIA_CSS_ACC_VIEWFINDER,\t \n\tIA_CSS_ACC_STANDALONE,\t \n};\n\n \nenum ia_css_cell_type {\n\tIA_CSS_SP0 = 0,\n\tIA_CSS_SP1,\n\tIA_CSS_ISP,\n\tMAX_NUM_OF_CELLS\n};\n\n \nenum ia_css_fw_type {\n\tia_css_sp_firmware,\t\t \n\tia_css_isp_firmware,\t\t \n\tia_css_bootloader_firmware,\t \n\tia_css_acc_firmware\t\t \n};\n\nstruct ia_css_blob_descr;\n\n \nstruct ia_css_blob_info {\n\t \n\tu32 offset;\t\t \n\tstruct ia_css_isp_param_memory_offsets\n\t\tmemory_offsets;   \n\tu32 prog_name_offset;   \n\tu32 size;\t\t\t \n\tu32 padding_size;\t \n\tu32 icache_source;\t \n\tu32 icache_size;\t \n\tu32 icache_padding; \n\tu32 text_source;\t \n\tu32 text_size;\t\t \n\tu32 text_padding;\t \n\tu32 data_source;\t \n\tu32 data_target;\t \n\tu32 data_size;\t\t \n\tu32 data_padding;\t \n\tu32 bss_target;\t \n\tu32 bss_size;\t\t \n\t \n\tCSS_ALIGN(const void  *code,\n\t\t  8);\t\t \n\tCSS_ALIGN(const void  *data,\n\t\t  8);\t\t \n};\n\nstruct ia_css_binary_input_info {\n\tu32\t\tmin_width;\n\tu32\t\tmin_height;\n\tu32\t\tmax_width;\n\tu32\t\tmax_height;\n\tu32\t\tsource;  \n};\n\nstruct ia_css_binary_output_info {\n\tu32\t\tmin_width;\n\tu32\t\tmin_height;\n\tu32\t\tmax_width;\n\tu32\t\tmax_height;\n\tu32\t\tnum_chunks;\n\tu32\t\tvariable_format;\n};\n\nstruct ia_css_binary_internal_info {\n\tu32\t\tmax_width;\n\tu32\t\tmax_height;\n};\n\nstruct ia_css_binary_bds_info {\n\tu32\t\tsupported_bds_factors;\n};\n\nstruct ia_css_binary_dvs_info {\n\tu32\t\tmax_envelope_width;\n\tu32\t\tmax_envelope_height;\n};\n\nstruct ia_css_binary_vf_dec_info {\n\tu32\t\tis_variable;\n\tu32\t\tmax_log_downscale;\n};\n\nstruct ia_css_binary_s3a_info {\n\tu32\t\ts3atbl_use_dmem;\n\tu32\t\tfixed_s3a_deci_log;\n};\n\n \nstruct ia_css_binary_dpc_info {\n\tu32\t\tbnr_lite;  \n};\n\nstruct ia_css_binary_iterator_info {\n\tu32\t\tnum_stripes;\n\tu32\t\trow_stripes_height;\n\tu32\t\trow_stripes_overlap_lines;\n};\n\nstruct ia_css_binary_address_info {\n\tu32\t\tisp_addresses;\t \n\tu32\t\tmain_entry;\t \n\tu32\t\tin_frame;\t \n\tu32\t\tout_frame;\t \n\tu32\t\tin_data;\t \n\tu32\t\tout_data;\t \n\tu32\t\tsh_dma_cmd_ptr;      \n};\n\nstruct ia_css_binary_uds_info {\n\tu16\tbpp;\n\tu16\tuse_bci;\n\tu16\tuse_str;\n\tu16\twoix;\n\tu16\twoiy;\n\tu16\textra_out_vecs;\n\tu16\tvectors_per_line_in;\n\tu16\tvectors_per_line_out;\n\tu16\tvectors_c_per_line_in;\n\tu16\tvectors_c_per_line_out;\n\tu16\tvmem_gdc_in_block_height_y;\n\tu16\tvmem_gdc_in_block_height_c;\n\t \n};\n\nstruct ia_css_binary_pipeline_info {\n\tu32\tmode;\n\tu32\tisp_pipe_version;\n\tu32\tpipelining;\n\tu32\tc_subsampling;\n\tu32\ttop_cropping;\n\tu32\tleft_cropping;\n\tu32\tvariable_resolution;\n};\n\nstruct ia_css_binary_block_info {\n\tu32\tblock_width;\n\tu32\tblock_height;\n\tu32\toutput_block_height;\n};\n\n \nstruct ia_css_binary_info {\n\tCSS_ALIGN(u32\t\t\tid, 8);  \n\tstruct ia_css_binary_pipeline_info\tpipeline;\n\tstruct ia_css_binary_input_info\t\tinput;\n\tstruct ia_css_binary_output_info\toutput;\n\tstruct ia_css_binary_internal_info\tinternal;\n\tstruct ia_css_binary_bds_info\t\tbds;\n\tstruct ia_css_binary_dvs_info\t\tdvs;\n\tstruct ia_css_binary_vf_dec_info\tvf_dec;\n\tstruct ia_css_binary_s3a_info\t\ts3a;\n\tstruct ia_css_binary_dpc_info\t\tdpc_bnr;  \n\tstruct ia_css_binary_iterator_info\titerator;\n\tstruct ia_css_binary_address_info\taddresses;\n\tstruct ia_css_binary_uds_info\t\tuds;\n\tstruct ia_css_binary_block_info\t\tblock;\n\tstruct ia_css_isp_param_isp_segments\tmem_initializers;\n\t \n\tstruct {\n\t\tu8\treduced_pipe;\n\t\tu8\tvf_veceven;\n\t\tu8\tdis;\n\t\tu8\tdvs_envelope;\n\t\tu8\tuds;\n\t\tu8\tdvs_6axis;\n\t\tu8\tblock_output;\n\t\tu8\tstreaming_dma;\n\t\tu8\tds;\n\t\tu8\tbayer_fir_6db;\n\t\tu8\traw_binning;\n\t\tu8\tcontinuous;\n\t\tu8\ts3a;\n\t\tu8\tfpnr;\n\t\tu8\tsc;\n\t\tu8\tmacc;\n\t\tu8\toutput;\n\t\tu8\tref_frame;\n\t\tu8\ttnr;\n\t\tu8\txnr;\n\t\tu8\tparams;\n\t\tu8\tca_gdc;\n\t\tu8\tisp_addresses;\n\t\tu8\tin_frame;\n\t\tu8\tout_frame;\n\t\tu8\thigh_speed;\n\t\tu8\tdpc;\n\t\tu8 padding[2];\n\t} enable;\n\tstruct {\n\t\t \n\t\tu8\tref_y_channel;\n\t\tu8\tref_c_channel;\n\t\tu8\ttnr_channel;\n\t\tu8\ttnr_out_channel;\n\t\tu8\tdvs_coords_channel;\n\t\tu8\toutput_channel;\n\t\tu8\tc_channel;\n\t\tu8\tvfout_channel;\n\t\tu8\tvfout_c_channel;\n\t\tu8\tvfdec_bits_per_pixel;\n\t\tu8\tclaimed_by_isp;\n\t\tu8 padding[2];\n\t} dma;\n};\n\n \nstruct ia_css_binary_xinfo {\n\t \n\tstruct ia_css_binary_info    sp;\n\n\t \n\tenum ia_css_acc_type\t     type;\n\n\tCSS_ALIGN(s32\t     num_output_formats, 8);\n\tenum ia_css_frame_format     output_formats[IA_CSS_FRAME_FORMAT_NUM];\n\n\tCSS_ALIGN(s32\t     num_vf_formats, 8);  \n\tenum ia_css_frame_format\n\tvf_formats[IA_CSS_FRAME_FORMAT_NUM];  \n\tu8\t\t\t     num_output_pins;\n\tia_css_ptr\t\t     xmem_addr;\n\n\tCSS_ALIGN(const struct ia_css_blob_descr *blob, 8);\n\tCSS_ALIGN(u32 blob_index, 8);\n\tCSS_ALIGN(union ia_css_all_memory_offsets mem_offsets, 8);\n\tCSS_ALIGN(struct ia_css_binary_xinfo *next, 8);\n};\n\n \nstruct ia_css_bl_info {\n\tu32 num_dma_cmds;\t \n\tu32 dma_cmd_list;\t \n\tu32 sw_state;\t \n\t \n\tu32 bl_entry;\t \n};\n\n \nstruct ia_css_sp_info {\n\tu32 init_dmem_data;  \n\tu32 per_frame_data;  \n\tu32 group;\t\t \n\tu32 output;\t\t \n\tu32 host_sp_queue;\t \n\tu32 host_sp_com; \n\tu32 isp_started;\t \n\tu32 sw_state;\t \n\tu32 host_sp_queues_initialized;  \n\tu32 sleep_mode;   \n\tu32 invalidate_tlb;\t\t \n\n\t \n\tu32 stop_copy_preview;        \n\n\tu32 debug_buffer_ddr_address;\t \n\tu32 perf_counter_input_system_error;  \n#ifdef HAS_WATCHDOG_SP_THREAD_DEBUG\n\tu32 debug_wait;  \n\tu32 debug_stage;  \n\tu32 debug_stripe;  \n#endif\n\tu32 threads_stack;  \n\tu32 threads_stack_size;  \n\tu32 curr_binary_id;         \n\tu32 raw_copy_line_count;    \n\tu32 ddr_parameter_address;  \n\tu32 ddr_parameter_size;     \n\t \n\tu32 sp_entry;\t \n\tu32 tagger_frames_addr;    \n};\n\n \n\n \nstruct ia_css_acc_info {\n\tu32 per_frame_data;  \n};\n\n \nunion ia_css_fw_union {\n\tstruct ia_css_binary_xinfo\tisp;  \n\tstruct ia_css_sp_info\t\tsp;   \n\tstruct ia_css_bl_info           bl;   \n\tstruct ia_css_acc_info\t\tacc;  \n};\n\n \nstruct ia_css_fw_info {\n\tsize_t\t\t\t header_size;  \n\n\tCSS_ALIGN(u32 type, 8);\n\tunion ia_css_fw_union\t info;  \n\tstruct ia_css_blob_info  blob;  \n\t \n\tstruct ia_css_fw_info   *next;\n\n\tCSS_ALIGN(u32       loaded, 8);\t \n\tCSS_ALIGN(const u8 *isp_code, 8);   \n\t \n\tCSS_ALIGN(u32\thandle, 8);\n\t \n\tstruct ia_css_isp_param_css_segments mem_initializers;\n\t \n};\n\nstruct ia_css_blob_descr {\n\tconst unsigned char  *blob;\n\tstruct ia_css_fw_info header;\n\tconst char\t     *name;\n\tunion ia_css_all_memory_offsets mem_offsets;\n};\n\nstruct ia_css_acc_fw;\n\n \nstruct ia_css_acc_sp {\n\tvoid (*init)(struct ia_css_acc_fw *);\t \n\tu32 sp_prog_name_offset;\t\t \n\tu32 sp_blob_offset;\t\t \n\tvoid\t *entry;\t\t\t \n\tu32 *css_abort;\t\t\t \n\tvoid\t *isp_code;\t\t\t \n\tstruct ia_css_fw_info fw;\t\t \n\tconst u8 *code;\t\t\t \n};\n\n \nstruct ia_css_acc_fw_hdr {\n\tenum ia_css_acc_type type;\t \n\tu32\tisp_prog_name_offset;  \n\tu32\tisp_blob_offset;       \n\tu32\tisp_size;\t       \n\tconst u8  *isp_code;\t       \n\tstruct ia_css_acc_sp  sp;   \n\t \n\tu32\thandle;\n\tstruct ia_css_data parameters;  \n};\n\n \nstruct ia_css_acc_fw {\n\tstruct ia_css_acc_fw_hdr header;  \n\t \n};\n\n \n#define IA_CSS_ACC_OFFSET(t, f, n) ((t)((uint8_t *)(f) + (f->header.n)))\n#define IA_CSS_ACC_SP_PROG_NAME(f) IA_CSS_ACC_OFFSET(const char *, f, \\\n\t\t\t\t\t\t sp.sp_prog_name_offset)\n#define IA_CSS_ACC_ISP_PROG_NAME(f) IA_CSS_ACC_OFFSET(const char *, f, \\\n\t\t\t\t\t\t isp_prog_name_offset)\n#define IA_CSS_ACC_SP_CODE(f)      IA_CSS_ACC_OFFSET(uint8_t *, f, \\\n\t\t\t\t\t\t sp.sp_blob_offset)\n#define IA_CSS_ACC_SP_DATA(f)      (IA_CSS_ACC_SP_CODE(f) + \\\n\t\t\t\t\t(f)->header.sp.fw.blob.data_source)\n#define IA_CSS_ACC_ISP_CODE(f)     IA_CSS_ACC_OFFSET(uint8_t*, f,\\\n\t\t\t\t\t\t isp_blob_offset)\n#define IA_CSS_ACC_ISP_SIZE(f)     ((f)->header.isp_size)\n\n \n#define IA_CSS_EXT_ISP_PROG_NAME(f)   ((const char *)(f) + (f)->blob.prog_name_offset)\n#define IA_CSS_EXT_ISP_MEM_OFFSETS(f) \\\n\t((const struct ia_css_memory_offsets *)((const char *)(f) + (f)->blob.mem_offsets))\n\nenum ia_css_sp_sleep_mode {\n\tSP_DISABLE_SLEEP_MODE = 0,\n\tSP_SLEEP_AFTER_FRAME  = BIT(0),\n\tSP_SLEEP_AFTER_IRQ    = BIT(1),\n};\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}