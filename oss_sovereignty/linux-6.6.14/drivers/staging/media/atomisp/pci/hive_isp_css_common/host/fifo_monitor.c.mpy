{
  "module_name": "fifo_monitor.c",
  "hash_id": "da2a564e2e52ef1024f4ee258dc811eec49505862f425a0a3ae9e61d95d4e077",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/hive_isp_css_common/host/fifo_monitor.c",
  "human_readable_source": "\n \n\n#include \"fifo_monitor.h\"\n\n#include <type_support.h>\n#include \"device_access.h\"\n\n#include <bits.h>\n\n#include \"gp_device.h\"\n\n#include \"assert_support.h\"\n\n#ifndef __INLINE_FIFO_MONITOR__\n#define STORAGE_CLASS_FIFO_MONITOR_DATA static const\n#else\n#define STORAGE_CLASS_FIFO_MONITOR_DATA const\n#endif  \n\nSTORAGE_CLASS_FIFO_MONITOR_DATA unsigned int FIFO_SWITCH_ADDR[N_FIFO_SWITCH] = {\n\t_REG_GP_SWITCH_IF_ADDR,\n\t_REG_GP_SWITCH_GDC1_ADDR,\n\t_REG_GP_SWITCH_GDC2_ADDR\n};\n\n#ifndef __INLINE_FIFO_MONITOR__\n#include \"fifo_monitor_private.h\"\n#endif  \n\nstatic inline bool fifo_monitor_status_valid(\n    const fifo_monitor_ID_t\t\tID,\n    const unsigned int\t\t\treg,\n    const unsigned int\t\t\tport_id);\n\nstatic inline bool fifo_monitor_status_accept(\n    const fifo_monitor_ID_t\t\tID,\n    const unsigned int\t\t\treg,\n    const unsigned int\t\t\tport_id);\n\nvoid fifo_channel_get_state(\n    const fifo_monitor_ID_t\t\tID,\n    const fifo_channel_t\t\tchannel_id,\n    fifo_channel_state_t\t\t*state)\n{\n\tassert(channel_id < N_FIFO_CHANNEL);\n\tassert(state);\n\n\tswitch (channel_id) {\n\tcase FIFO_CHANNEL_ISP0_TO_SP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_SP);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_SP);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_ISP);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_ISP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_ISP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_ISP);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_ISP);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_SP);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_SP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_IF0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_PIF_A);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_PIF_A);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_A);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_A);\n\t\tbreak;\n\tcase FIFO_CHANNEL_IF0_TO_ISP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_A);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_A);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_A);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_A);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_IF1:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_PIF_B);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_PIF_B);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_B);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_B);\n\t\tbreak;\n\tcase FIFO_CHANNEL_IF1_TO_ISP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_B);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_B);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_B);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_B);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_DMA0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_DMA);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_DMA);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_DMA_FR_ISP);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_DMA_FR_ISP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_DMA0_TO_ISP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_DMA2ISP);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_DMA2ISP);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_DMA);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_DMA);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_GDC0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_GDC);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_GDC);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_GDC);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_GDC);\n\t\tbreak;\n\tcase FIFO_CHANNEL_GDC0_TO_ISP0:\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_GDC);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_GDC);\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_GDC);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_GDC);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_GDC1:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_ISP2GDC2);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_ISP2GDC2);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC2);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC2);\n\t\tbreak;\n\tcase FIFO_CHANNEL_GDC1_TO_ISP0:\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC22CELLS);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC22CELLS);\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_GDC22ISP);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_GDC22ISP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_ISP0_TO_HOST0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_GPD);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_SND_GPD);\n\t\t{\n\t\t\thrt_data\tvalue = ia_css_device_load_uint32(0x0000000000380014ULL);\n\n\t\t\tstate->fifo_valid  = !_hrt_get_bit(value, 0);\n\t\t\tstate->sink_accept = false;  \n\t\t}\n\t\tbreak;\n\tcase FIFO_CHANNEL_HOST0_TO_ISP0: {\n\t\thrt_data\tvalue = ia_css_device_load_uint32(0x000000000038001CULL);\n\n\t\tstate->fifo_valid  = false;  \n\t\tstate->sink_accept = !_hrt_get_bit(value, 0);\n\t}\n\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_GPD);  \n\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t     HIVE_GP_REGS_ISP_STREAM_STAT_IDX,\n\t\t\t     ISP_STR_MON_PORT_RCV_GPD);\n\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_IF0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_PIF_A);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_PIF_A);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_A);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_A);\n\t\tbreak;\n\tcase FIFO_CHANNEL_IF0_TO_SP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_A);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_A);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_PIF_A);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_PIF_A);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_IF1:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_PIF_B);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_PIF_B);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_B);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_PIF_B);\n\t\tbreak;\n\tcase FIFO_CHANNEL_IF1_TO_SP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_B);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_PIF_B);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_B);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     ISP_STR_MON_PORT_RCV_PIF_B);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_IF2:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_SIF);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_SIF);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_SIF);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_SIF);\n\t\tbreak;\n\tcase FIFO_CHANNEL_IF2_TO_SP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_SIF);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_SIF);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_SIF);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_SIF);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_DMA0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_DMA);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_DMA);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_DMA_FR_SP);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_DMA_FR_SP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_DMA0_TO_SP0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_DMA2SP);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_DMA2SP);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_DMA);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_DMA);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_GDC0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_SP2GDC1);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_SP2GDC1);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC1);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC1);\n\t\tbreak;\n\tcase FIFO_CHANNEL_GDC0_TO_SP0:\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC12CELLS);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC12CELLS);\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_GDC12SP);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_GDC12SP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_GDC1:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_SP2GDC2);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_SP2GDC2);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC2);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_CELLS2GDC2);\n\t\tbreak;\n\tcase FIFO_CHANNEL_GDC1_TO_SP0:\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC22CELLS);\n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_GDC22CELLS);\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_GDC22SP);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_B_IDX,\n\t\t\t\t     SP_STR_MON_PORT_B_GDC22SP);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_HOST0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_GPD);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_GPD);\n\t\t{\n\t\t\thrt_data\tvalue = ia_css_device_load_uint32(0x0000000000380010ULL);\n\n\t\t\tstate->fifo_valid  = !_hrt_get_bit(value, 0);\n\t\t\tstate->sink_accept = false;  \n\t\t}\n\t\tbreak;\n\tcase FIFO_CHANNEL_HOST0_TO_SP0: {\n\t\thrt_data\tvalue = ia_css_device_load_uint32(0x0000000000380018ULL);\n\n\t\tstate->fifo_valid  = false;  \n\t\tstate->sink_accept = !_hrt_get_bit(value, 0);\n\t}\n\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_GPD);  \n\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t     SP_STR_MON_PORT_RCV_GPD);\n\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_STREAM2MEM0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_MC);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SND_MC);\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_MC);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_RCV_MC);\n\t\tbreak;\n\tcase FIFO_CHANNEL_STREAM2MEM0_TO_SP0:\n\t\tstate->fifo_valid  = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_MC);  \n\t\tstate->sink_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_MOD_STREAM_STAT_IDX,\n\t\t\t\t     MOD_STR_MON_PORT_SND_MC);\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_MC);  \n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_RCV_MC);\n\t\tbreak;\n\tcase FIFO_CHANNEL_SP0_TO_INPUT_SYSTEM0:\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SP2ISYS);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_SP2ISYS);\n\t\tstate->fifo_valid  = false;\n\t\tstate->sink_accept = false;\n\t\tbreak;\n\tcase FIFO_CHANNEL_INPUT_SYSTEM0_TO_SP0:\n\t\tstate->fifo_valid  = false;\n\t\tstate->sink_accept = false;\n\t\tstate->src_valid   = fifo_monitor_status_valid(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_ISYS2SP);\n\t\tstate->fifo_accept = fifo_monitor_status_accept(ID,\n\t\t\t\t     HIVE_GP_REGS_SP_STREAM_STAT_IDX,\n\t\t\t\t     SP_STR_MON_PORT_ISYS2SP);\n\t\tbreak;\n\tdefault:\n\t\tassert(0);\n\t\tbreak;\n\t}\n\n\treturn;\n}\n\nvoid fifo_switch_get_state(\n    const fifo_monitor_ID_t\t\tID,\n    const fifo_switch_t\t\t\tswitch_id,\n    fifo_switch_state_t\t\t\t*state)\n{\n\thrt_data\t\tdata = (hrt_data)-1;\n\n\tassert(ID == FIFO_MONITOR0_ID);\n\tassert(switch_id < N_FIFO_SWITCH);\n\tassert(state);\n\n\t(void)ID;\n\n\tdata = gp_device_reg_load(GP_DEVICE0_ID, FIFO_SWITCH_ADDR[switch_id]);\n\n\tstate->is_none = (data == HIVE_ISP_CSS_STREAM_SWITCH_NONE);\n\tstate->is_sp = (data == HIVE_ISP_CSS_STREAM_SWITCH_SP);\n\tstate->is_isp = (data == HIVE_ISP_CSS_STREAM_SWITCH_ISP);\n\n\treturn;\n}\n\nvoid fifo_monitor_get_state(\n    const fifo_monitor_ID_t\t\tID,\n    fifo_monitor_state_t\t\t*state)\n{\n\tfifo_channel_t\tch_id;\n\tfifo_switch_t\tsw_id;\n\n\tassert(ID < N_FIFO_MONITOR_ID);\n\tassert(state);\n\n\tfor (ch_id = 0; ch_id < N_FIFO_CHANNEL; ch_id++) {\n\t\tfifo_channel_get_state(ID, ch_id,\n\t\t\t\t       &state->fifo_channels[ch_id]);\n\t}\n\n\tfor (sw_id = 0; sw_id < N_FIFO_SWITCH; sw_id++) {\n\t\tfifo_switch_get_state(ID, sw_id,\n\t\t\t\t      &state->fifo_switches[sw_id]);\n\t}\n\treturn;\n}\n\nstatic inline bool fifo_monitor_status_valid(\n    const fifo_monitor_ID_t\t\tID,\n    const unsigned int\t\t\treg,\n    const unsigned int\t\t\tport_id)\n{\n\thrt_data\tdata = fifo_monitor_reg_load(ID, reg);\n\n\treturn (data >> (((port_id * 2) + _hive_str_mon_valid_offset))) & 0x1;\n}\n\nstatic inline bool fifo_monitor_status_accept(\n    const fifo_monitor_ID_t\t\tID,\n    const unsigned int\t\t\treg,\n    const unsigned int\t\t\tport_id)\n{\n\thrt_data\tdata = fifo_monitor_reg_load(ID, reg);\n\n\treturn (data >> (((port_id * 2) + _hive_str_mon_accept_offset))) & 0x1;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}