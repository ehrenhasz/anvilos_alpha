{
  "module_name": "debug_private.h",
  "hash_id": "a9df1f5d674372f6a2b6d34314806487a168d499cab6f8f28b54e81e5cc44d33",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/hive_isp_css_common/host/debug_private.h",
  "human_readable_source": " \n \n\n#ifndef __DEBUG_PRIVATE_H_INCLUDED__\n#define __DEBUG_PRIVATE_H_INCLUDED__\n\n#include \"debug_public.h\"\n\n#include \"sp.h\"\n\n#define __INLINE_ISP__\n#include \"isp.h\"\n\n#include \"assert_support.h\"\n\nSTORAGE_CLASS_DEBUG_C bool is_debug_buffer_empty(void)\n{\n\treturn (debug_data_ptr->head == debug_data_ptr->tail);\n}\n\nSTORAGE_CLASS_DEBUG_C hrt_data debug_dequeue(void)\n{\n\thrt_data value = 0;\n\n\tassert(debug_buffer_address != ((hrt_address) - 1));\n\n\tdebug_synch_queue();\n\n\tif (!is_debug_buffer_empty()) {\n\t\tvalue = debug_data_ptr->buf[debug_data_ptr->head];\n\t\tdebug_data_ptr->head = (debug_data_ptr->head + 1) & DEBUG_BUF_MASK;\n\t\tsp_dmem_store_uint32(SP0_ID, debug_buffer_address + DEBUG_DATA_HEAD_ADDR,\n\t\t\t\t     debug_data_ptr->head);\n\t}\n\n\treturn value;\n}\n\nSTORAGE_CLASS_DEBUG_C void debug_synch_queue(void)\n{\n\tu32 remote_tail = sp_dmem_load_uint32(SP0_ID,\n\t\t\t\t\t      debug_buffer_address + DEBUG_DATA_TAIL_ADDR);\n\t \n\tif (remote_tail > debug_data_ptr->tail) {\n\t\tsize_t\tdelta = remote_tail - debug_data_ptr->tail;\n\n\t\tsp_dmem_load(SP0_ID, debug_buffer_address + DEBUG_DATA_BUF_ADDR +\n\t\t\t     debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t     (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t} else if (remote_tail < debug_data_ptr->tail) {\n\t\tsize_t\tdelta = DEBUG_BUF_SIZE - debug_data_ptr->tail;\n\n\t\tsp_dmem_load(SP0_ID, debug_buffer_address + DEBUG_DATA_BUF_ADDR +\n\t\t\t     debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t     (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t\tsp_dmem_load(SP0_ID, debug_buffer_address + DEBUG_DATA_BUF_ADDR,\n\t\t\t     (void *)&debug_data_ptr->buf[0],\n\t\t\t     remote_tail * sizeof(uint32_t));\n\t}  \n\tdebug_data_ptr->tail = remote_tail;\n}\n\nSTORAGE_CLASS_DEBUG_C void debug_synch_queue_isp(void)\n{\n\tu32 remote_tail = isp_dmem_load_uint32(ISP0_ID,\n\t\t\t\t\t       DEBUG_BUFFER_ISP_DMEM_ADDR + DEBUG_DATA_TAIL_ADDR);\n\t \n\tif (remote_tail > debug_data_ptr->tail) {\n\t\tsize_t\tdelta = remote_tail - debug_data_ptr->tail;\n\n\t\tisp_dmem_load(ISP0_ID, DEBUG_BUFFER_ISP_DMEM_ADDR + DEBUG_DATA_BUF_ADDR +\n\t\t\t      debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t      (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t} else if (remote_tail < debug_data_ptr->tail) {\n\t\tsize_t\tdelta = DEBUG_BUF_SIZE - debug_data_ptr->tail;\n\n\t\tisp_dmem_load(ISP0_ID, DEBUG_BUFFER_ISP_DMEM_ADDR + DEBUG_DATA_BUF_ADDR +\n\t\t\t      debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t      (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t\tisp_dmem_load(ISP0_ID, DEBUG_BUFFER_ISP_DMEM_ADDR + DEBUG_DATA_BUF_ADDR,\n\t\t\t      (void *)&debug_data_ptr->buf[0],\n\t\t\t      remote_tail * sizeof(uint32_t));\n\t}  \n\tdebug_data_ptr->tail = remote_tail;\n}\n\nSTORAGE_CLASS_DEBUG_C void debug_synch_queue_ddr(void)\n{\n\tu32\tremote_tail;\n\n\thmm_load(debug_buffer_ddr_address + DEBUG_DATA_TAIL_DDR_ADDR, &remote_tail,\n\t\t  sizeof(uint32_t));\n\t \n\tif (remote_tail > debug_data_ptr->tail) {\n\t\tsize_t\tdelta = remote_tail - debug_data_ptr->tail;\n\n\t\thmm_load(debug_buffer_ddr_address + DEBUG_DATA_BUF_DDR_ADDR +\n\t\t\t  debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t  (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t} else if (remote_tail < debug_data_ptr->tail) {\n\t\tsize_t\tdelta = DEBUG_BUF_SIZE - debug_data_ptr->tail;\n\n\t\thmm_load(debug_buffer_ddr_address + DEBUG_DATA_BUF_DDR_ADDR +\n\t\t\t  debug_data_ptr->tail * sizeof(uint32_t),\n\t\t\t  (void *)&debug_data_ptr->buf[debug_data_ptr->tail], delta * sizeof(uint32_t));\n\t\thmm_load(debug_buffer_ddr_address + DEBUG_DATA_BUF_DDR_ADDR,\n\t\t\t  (void *)&debug_data_ptr->buf[0],\n\t\t\t  remote_tail * sizeof(uint32_t));\n\t}  \n\tdebug_data_ptr->tail = remote_tail;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}