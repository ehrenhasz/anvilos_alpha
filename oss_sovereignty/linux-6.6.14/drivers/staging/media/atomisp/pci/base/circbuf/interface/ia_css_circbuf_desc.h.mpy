{
  "module_name": "ia_css_circbuf_desc.h",
  "hash_id": "92940b3e54bc16208b61da77df95fc0f6dee179901165ec25a606fc5751d8c34",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/base/circbuf/interface/ia_css_circbuf_desc.h",
  "human_readable_source": " \n \n\n#ifndef _IA_CSS_CIRCBUF_DESC_H_\n#define _IA_CSS_CIRCBUF_DESC_H_\n\n#include <type_support.h>\n#include <math_support.h>\n#include <platform_support.h>\n#include <sp.h>\n#include \"ia_css_circbuf_comm.h\"\n \n \nstatic inline bool ia_css_circbuf_desc_is_empty(\n    ia_css_circbuf_desc_t *cb_desc)\n{\n\tOP___assert(cb_desc);\n\treturn (cb_desc->end == cb_desc->start);\n}\n\n \nstatic inline bool ia_css_circbuf_desc_is_full(\n    ia_css_circbuf_desc_t *cb_desc)\n{\n\tOP___assert(cb_desc);\n\treturn (OP_std_modadd(cb_desc->end, 1, cb_desc->size) == cb_desc->start);\n}\n\n \nstatic inline void ia_css_circbuf_desc_init(\n    ia_css_circbuf_desc_t *cb_desc,\n    int8_t size)\n{\n\tOP___assert(cb_desc);\n\tcb_desc->size = size;\n}\n\n \nstatic inline uint8_t ia_css_circbuf_desc_get_pos_at_offset(\n    ia_css_circbuf_desc_t *cb_desc,\n    u32 base,\n    int offset)\n{\n\tu8 dest;\n\n\tOP___assert(cb_desc);\n\tOP___assert(cb_desc->size > 0);\n\n\t \n\twhile (offset < 0) {\n\t\toffset += cb_desc->size;\n\t}\n\n\t \n\tdest = OP_std_modadd(base, offset, cb_desc->size);\n\n\treturn dest;\n}\n\n \nstatic inline int ia_css_circbuf_desc_get_offset(\n    ia_css_circbuf_desc_t *cb_desc,\n    u32 src_pos,\n    uint32_t dest_pos)\n{\n\tint offset;\n\n\tOP___assert(cb_desc);\n\n\toffset = (int)(dest_pos - src_pos);\n\toffset += (offset < 0) ? cb_desc->size : 0;\n\n\treturn offset;\n}\n\n \nstatic inline uint32_t ia_css_circbuf_desc_get_num_elems(\n    ia_css_circbuf_desc_t *cb_desc)\n{\n\tint num;\n\n\tOP___assert(cb_desc);\n\n\tnum = ia_css_circbuf_desc_get_offset(cb_desc,\n\t\t\t\t\t     cb_desc->start,\n\t\t\t\t\t     cb_desc->end);\n\n\treturn (uint32_t)num;\n}\n\n \nstatic inline uint32_t ia_css_circbuf_desc_get_free_elems(\n    ia_css_circbuf_desc_t *cb_desc)\n{\n\tu32 num;\n\n\tOP___assert(cb_desc);\n\n\tnum = ia_css_circbuf_desc_get_offset(cb_desc,\n\t\t\t\t\t     cb_desc->start,\n\t\t\t\t\t     cb_desc->end);\n\n\treturn (cb_desc->size - num);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}