{
  "module_name": "isp2401_input_system_private.h",
  "hash_id": "2fee4cfb449880f48081777bacb125425ae4b42dccea803e46499b76518587d4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/isp2401_input_system_private.h",
  "human_readable_source": " \n \n\n#ifndef __INPUT_SYSTEM_PRIVATE_H_INCLUDED__\n#define __INPUT_SYSTEM_PRIVATE_H_INCLUDED__\n\n#include \"input_system_public.h\"\n\n#include \"device_access.h\"\t \n\n#include \"assert_support.h\"  \n#include \"print_support.h\"  \n\n \nstatic inline hrt_data ibuf_ctrl_reg_load(const ibuf_ctrl_ID_t ID,\n\t\t\t\t\t  const hrt_address reg)\n{\n\tassert(ID < N_IBUF_CTRL_ID);\n\tassert(IBUF_CTRL_BASE[ID] != (hrt_address)-1);\n\treturn ia_css_device_load_uint32(IBUF_CTRL_BASE[ID] + reg * sizeof(hrt_data));\n}\n\n \nstatic inline void ibuf_ctrl_reg_store(const ibuf_ctrl_ID_t ID,\n\t\t\t\t       const hrt_address reg,\n\t\t\t\t       const hrt_data value)\n{\n\tassert(ID < N_IBUF_CTRL_ID);\n\tassert(IBUF_CTRL_BASE[ID] != (hrt_address)-1);\n\n\tia_css_device_store_uint32(IBUF_CTRL_BASE[ID] + reg * sizeof(hrt_data), value);\n}\n\n \nstatic inline void ibuf_ctrl_get_proc_state(const ibuf_ctrl_ID_t ID,\n\t\t\t\t\t    const u32 proc_id,\n\t\t\t\t\t    ibuf_ctrl_proc_state_t *state)\n{\n\thrt_address reg_bank_offset;\n\n\treg_bank_offset =\n\t    _IBUF_CNTRL_PROC_REG_ALIGN * (1 + proc_id);\n\n\tstate->num_items =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_NUM_ITEMS_PER_STORE);\n\n\tstate->num_stores =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_NUM_STORES_PER_FRAME);\n\n\tstate->dma_channel =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DMA_CHANNEL);\n\n\tstate->dma_command =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DMA_CMD);\n\n\tstate->ibuf_st_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_BUFFER_START_ADDRESS);\n\n\tstate->ibuf_stride =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_BUFFER_STRIDE);\n\n\tstate->ibuf_end_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_BUFFER_END_ADDRESS);\n\n\tstate->dest_st_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DEST_START_ADDRESS);\n\n\tstate->dest_stride =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DEST_STRIDE);\n\n\tstate->dest_end_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DEST_END_ADDRESS);\n\n\tstate->sync_frame =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_SYNC_FRAME);\n\n\tstate->sync_command =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_STR2MMIO_SYNC_CMD);\n\n\tstate->store_command =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_STR2MMIO_STORE_CMD);\n\n\tstate->shift_returned_items =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_SHIFT_ITEMS);\n\n\tstate->elems_ibuf =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_ELEMS_P_WORD_IBUF);\n\n\tstate->elems_dest =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_ELEMS_P_WORD_DEST);\n\n\tstate->cur_stores =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_STORES);\n\n\tstate->cur_acks =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_ACKS);\n\n\tstate->cur_s2m_ibuf_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_S2M_IBUF_ADDR);\n\n\tstate->cur_dma_ibuf_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_DMA_IBUF_ADDR);\n\n\tstate->cur_dma_dest_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_DMA_DEST_ADDR);\n\n\tstate->cur_isp_dest_addr =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_ISP_DEST_ADDR);\n\n\tstate->dma_cmds_send =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_CUR_NR_DMA_CMDS_SEND);\n\n\tstate->main_cntrl_state =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_MAIN_CNTRL_STATE);\n\n\tstate->dma_sync_state =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_DMA_SYNC_STATE);\n\n\tstate->isp_sync_state =\n\t    ibuf_ctrl_reg_load(ID, reg_bank_offset + _IBUF_CNTRL_ISP_SYNC_STATE);\n}\n\n \nstatic inline void ibuf_ctrl_get_state(const ibuf_ctrl_ID_t ID,\n\t\t\t\t       ibuf_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tstate->recalc_words =\n\t    ibuf_ctrl_reg_load(ID, _IBUF_CNTRL_RECALC_WORDS_STATUS);\n\tstate->arbiters =\n\t    ibuf_ctrl_reg_load(ID, _IBUF_CNTRL_ARBITERS_STATUS);\n\n\t \n\tfor (i = 0; i < N_IBUF_CTRL_PROCS[ID]; i++) {\n\t\tibuf_ctrl_get_proc_state(\n\t\t    ID,\n\t\t    i,\n\t\t    &state->proc_state[i]);\n\t}\n}\n\n \nstatic inline void ibuf_ctrl_dump_state(const ibuf_ctrl_ID_t ID,\n\t\t\t\t\tibuf_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tia_css_print(\"IBUF controller ID %d recalculate words 0x%x\\n\", ID,\n\t\t     state->recalc_words);\n\tia_css_print(\"IBUF controller ID %d arbiters 0x%x\\n\", ID, state->arbiters);\n\n\t \n\tfor (i = 0; i < N_IBUF_CTRL_PROCS[ID]; i++) {\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d num_items 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].num_items);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d num_stores 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].num_stores);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dma_channel 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dma_channel);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dma_command 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dma_command);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d ibuf_st_addr 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].ibuf_st_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d ibuf_stride 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].ibuf_stride);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d ibuf_end_addr 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].ibuf_end_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dest_st_addr 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dest_st_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dest_stride 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dest_stride);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dest_end_addr 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dest_end_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d sync_frame 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].sync_frame);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d sync_command 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].sync_command);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d store_command 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].store_command);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d shift_returned_items 0x%x\\n\",\n\t\t\t     ID, i,\n\t\t\t     state->proc_state[i].shift_returned_items);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d elems_ibuf 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].elems_ibuf);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d elems_dest 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].elems_dest);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_stores 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].cur_stores);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_acks 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].cur_acks);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_s2m_ibuf_addr 0x%x\\n\", ID,\n\t\t\t     i,\n\t\t\t     state->proc_state[i].cur_s2m_ibuf_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_dma_ibuf_addr 0x%x\\n\", ID,\n\t\t\t     i,\n\t\t\t     state->proc_state[i].cur_dma_ibuf_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_dma_dest_addr 0x%x\\n\", ID,\n\t\t\t     i,\n\t\t\t     state->proc_state[i].cur_dma_dest_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d cur_isp_dest_addr 0x%x\\n\", ID,\n\t\t\t     i,\n\t\t\t     state->proc_state[i].cur_isp_dest_addr);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dma_cmds_send 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dma_cmds_send);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d main_cntrl_state 0x%x\\n\", ID,\n\t\t\t     i,\n\t\t\t     state->proc_state[i].main_cntrl_state);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d dma_sync_state 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].dma_sync_state);\n\t\tia_css_print(\"IBUF controller ID %d Process ID %d isp_sync_state 0x%x\\n\", ID, i,\n\t\t\t     state->proc_state[i].isp_sync_state);\n\t}\n}\n\nstatic inline input_system_err_t\ninput_system_get_state(const input_system_ID_t ID,\n\t\t       input_system_state_t *state)\n{\n\tu32 i;\n\n\t(void)(ID);\n\n\t \n\tfor (i = 0; i < N_CSI_RX_FRONTEND_ID; i++) {\n\t\tcsi_rx_fe_ctrl_get_state(\n\t\t    (csi_rx_frontend_ID_t)i,\n\t\t    &state->csi_rx_fe_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_CSI_RX_BACKEND_ID; i++) {\n\t\tcsi_rx_be_ctrl_get_state(\n\t\t    (csi_rx_backend_ID_t)i,\n\t\t    &state->csi_rx_be_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_PIXELGEN_ID; i++) {\n\t\tpixelgen_ctrl_get_state(\n\t\t    (pixelgen_ID_t)i,\n\t\t    &state->pixelgen_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_STREAM2MMIO_ID; i++) {\n\t\tstream2mmio_get_state(\n\t\t    (stream2mmio_ID_t)i,\n\t\t    &state->stream2mmio_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_IBUF_CTRL_ID; i++) {\n\t\tibuf_ctrl_get_state(\n\t\t    (ibuf_ctrl_ID_t)i,\n\t\t    &state->ibuf_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_ISYS_IRQ_ID; i++) {\n\t\tisys_irqc_state_get((isys_irq_ID_t)i, &state->isys_irqc_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_ISYS2401_DMA_ID; i++) {\n\t}\n\n\treturn INPUT_SYSTEM_ERR_NO_ERROR;\n}\n\nstatic inline void input_system_dump_state(const input_system_ID_t ID,\n\t\t\t\t\t   input_system_state_t *state)\n{\n\tu32 i;\n\n\t(void)(ID);\n\n\t \n\tfor (i = 0; i < N_CSI_RX_FRONTEND_ID; i++) {\n\t\tcsi_rx_fe_ctrl_dump_state(\n\t\t    (csi_rx_frontend_ID_t)i,\n\t\t    &state->csi_rx_fe_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_CSI_RX_BACKEND_ID; i++) {\n\t\tcsi_rx_be_ctrl_dump_state(\n\t\t    (csi_rx_backend_ID_t)i,\n\t\t    &state->csi_rx_be_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_PIXELGEN_ID; i++) {\n\t\tpixelgen_ctrl_dump_state(\n\t\t    (pixelgen_ID_t)i,\n\t\t    &state->pixelgen_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_STREAM2MMIO_ID; i++) {\n\t\tstream2mmio_dump_state(\n\t\t    (stream2mmio_ID_t)i,\n\t\t    &state->stream2mmio_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_IBUF_CTRL_ID; i++) {\n\t\tibuf_ctrl_dump_state(\n\t\t    (ibuf_ctrl_ID_t)i,\n\t\t    &state->ibuf_ctrl_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_ISYS_IRQ_ID; i++) {\n\t\tisys_irqc_state_dump((isys_irq_ID_t)i, &state->isys_irqc_state[i]);\n\t}\n\n\t \n\tfor (i = 0; i < N_ISYS2401_DMA_ID; i++) {\n\t}\n\n\treturn;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}