{
  "module_name": "ia_css_pipe.h",
  "hash_id": "143ef53f623e77534c8334ed6fbd27e7369babaa5dc6e1bf9de296711093d0c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/ia_css_pipe.h",
  "human_readable_source": " \n \n\n#ifndef __IA_CSS_PIPE_H__\n#define __IA_CSS_PIPE_H__\n\n#include <type_support.h>\n#include \"ia_css_stream.h\"\n#include \"ia_css_frame.h\"\n#include \"ia_css_pipeline.h\"\n#include \"ia_css_binary.h\"\n#include \"sh_css_legacy.h\"\n\n#define PIPE_ENTRY_EMPTY_TOKEN                (~0U)\n#define PIPE_ENTRY_RESERVED_TOKEN             (0x1)\n\nstruct ia_css_preview_settings {\n\tstruct ia_css_binary copy_binary;\n\tstruct ia_css_binary preview_binary;\n\tstruct ia_css_binary vf_pp_binary;\n\n\t \n\tstruct ia_css_frame *delay_frames[MAX_NUM_VIDEO_DELAY_FRAMES];\n\tstruct ia_css_frame *tnr_frames[NUM_VIDEO_TNR_FRAMES];\n\n\tstruct ia_css_pipe *copy_pipe;\n\tstruct ia_css_pipe *capture_pipe;\n};\n\n#define IA_CSS_DEFAULT_PREVIEW_SETTINGS { \\\n\t.copy_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.preview_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.vf_pp_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n}\n\nstruct ia_css_capture_settings {\n\tstruct ia_css_binary copy_binary;\n\t \n\tstruct ia_css_binary primary_binary[MAX_NUM_PRIMARY_STAGES];\n\tunsigned int num_primary_stage;\n\tstruct ia_css_binary pre_isp_binary;\n\tstruct ia_css_binary anr_gdc_binary;\n\tstruct ia_css_binary post_isp_binary;\n\tstruct ia_css_binary capture_pp_binary;\n\tstruct ia_css_binary vf_pp_binary;\n\tstruct ia_css_binary capture_ldc_binary;\n\tstruct ia_css_binary *yuv_scaler_binary;\n\tstruct ia_css_frame *delay_frames[MAX_NUM_VIDEO_DELAY_FRAMES];\n\tbool *is_output_stage;\n\tunsigned int num_yuv_scaler;\n};\n\n#define IA_CSS_DEFAULT_CAPTURE_SETTINGS { \\\n\t.copy_binary\t\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.primary_binary\t\t= {IA_CSS_BINARY_DEFAULT_SETTINGS}, \\\n\t.pre_isp_binary\t\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.anr_gdc_binary\t\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.post_isp_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.capture_pp_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.vf_pp_binary\t\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.capture_ldc_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n}\n\nstruct ia_css_video_settings {\n\tstruct ia_css_binary copy_binary;\n\tstruct ia_css_binary video_binary;\n\tstruct ia_css_binary vf_pp_binary;\n\tstruct ia_css_binary *yuv_scaler_binary;\n\tstruct ia_css_frame *delay_frames[MAX_NUM_VIDEO_DELAY_FRAMES];\n\tstruct ia_css_frame *tnr_frames[NUM_VIDEO_TNR_FRAMES];\n\tstruct ia_css_frame *vf_pp_in_frame;\n\tstruct ia_css_pipe *copy_pipe;\n\tstruct ia_css_pipe *capture_pipe;\n\tbool *is_output_stage;\n\tunsigned int num_yuv_scaler;\n};\n\n#define IA_CSS_DEFAULT_VIDEO_SETTINGS { \\\n\t.copy_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.video_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n\t.vf_pp_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n}\n\nstruct ia_css_yuvpp_settings {\n\tstruct ia_css_binary copy_binary;\n\tstruct ia_css_binary *yuv_scaler_binary;\n\tstruct ia_css_binary *vf_pp_binary;\n\tbool *is_output_stage;\n\tunsigned int num_yuv_scaler;\n\tunsigned int num_vf_pp;\n\tunsigned int num_output;\n};\n\n#define IA_CSS_DEFAULT_YUVPP_SETTINGS { \\\n\t.copy_binary\t= IA_CSS_BINARY_DEFAULT_SETTINGS, \\\n}\n\nstruct osys_object;\n\nstruct ia_css_pipe {\n\t \n\tbool                            stop_requested;\n\tstruct ia_css_pipe_config       config;\n\tstruct ia_css_pipe_extra_config extra_config;\n\tstruct ia_css_pipe_info         info;\n\tenum ia_css_pipe_id\t\tmode;\n\tstruct ia_css_shading_table\t*shading_table;\n\tstruct ia_css_pipeline\t\tpipeline;\n\tstruct ia_css_frame_info\toutput_info[IA_CSS_PIPE_MAX_OUTPUT_STAGE];\n\tstruct ia_css_frame_info\tbds_output_info;\n\tstruct ia_css_frame_info\tvf_output_info[IA_CSS_PIPE_MAX_OUTPUT_STAGE];\n\tstruct ia_css_frame_info\tout_yuv_ds_input_info;\n\tstruct ia_css_frame_info\tvf_yuv_ds_input_info;\n\tstruct ia_css_fw_info\t\t*output_stage;\t \n\tstruct ia_css_fw_info\t\t*vf_stage;\t \n\tunsigned int\t\t\trequired_bds_factor;\n\tunsigned int\t\t\tdvs_frame_delay;\n\tint\t\t\t\tnum_invalid_frames;\n\tbool\t\t\t\tenable_viewfinder[IA_CSS_PIPE_MAX_OUTPUT_STAGE];\n\tstruct ia_css_stream\t\t*stream;\n\tstruct ia_css_frame\t\tin_frame_struct;\n\tstruct ia_css_frame\t\tout_frame_struct;\n\tstruct ia_css_frame\t\tvf_frame_struct;\n\tstruct ia_css_frame\t\t*continuous_frames[NUM_CONTINUOUS_FRAMES];\n\tstruct ia_css_metadata\t*cont_md_buffers[NUM_CONTINUOUS_FRAMES];\n\tunion {\n\t\tstruct ia_css_preview_settings preview;\n\t\tstruct ia_css_video_settings   video;\n\t\tstruct ia_css_capture_settings capture;\n\t\tstruct ia_css_yuvpp_settings yuvpp;\n\t} pipe_settings;\n\tia_css_ptr scaler_pp_lut;\n\tstruct osys_object *osys_obj;\n\n\t \n\tunsigned int pipe_num;\n};\n\n#define IA_CSS_DEFAULT_PIPE { \\\n\t.config\t\t\t= DEFAULT_PIPE_CONFIG, \\\n\t.info\t\t\t= DEFAULT_PIPE_INFO, \\\n\t.mode\t\t\t= IA_CSS_PIPE_ID_VIDEO,   \\\n\t.pipeline\t\t= DEFAULT_PIPELINE, \\\n\t.output_info\t\t= {IA_CSS_BINARY_DEFAULT_FRAME_INFO}, \\\n\t.bds_output_info\t= IA_CSS_BINARY_DEFAULT_FRAME_INFO, \\\n\t.vf_output_info\t\t= {IA_CSS_BINARY_DEFAULT_FRAME_INFO}, \\\n\t.out_yuv_ds_input_info\t= IA_CSS_BINARY_DEFAULT_FRAME_INFO, \\\n\t.vf_yuv_ds_input_info\t= IA_CSS_BINARY_DEFAULT_FRAME_INFO, \\\n\t.required_bds_factor\t= SH_CSS_BDS_FACTOR_1_00, \\\n\t.dvs_frame_delay\t= 1, \\\n\t.enable_viewfinder\t= {true}, \\\n\t.in_frame_struct\t= DEFAULT_FRAME, \\\n\t.out_frame_struct\t= DEFAULT_FRAME, \\\n\t.vf_frame_struct\t= DEFAULT_FRAME, \\\n\t.pipe_settings\t\t= { \\\n\t\t.preview = IA_CSS_DEFAULT_PREVIEW_SETTINGS \\\n\t}, \\\n\t.pipe_num\t\t= PIPE_ENTRY_EMPTY_TOKEN, \\\n}\n\nvoid ia_css_pipe_map_queue(struct ia_css_pipe *pipe, bool map);\n\nint\nsh_css_param_update_isp_params(struct ia_css_pipe *curr_pipe,\n\t\t\t       struct ia_css_isp_parameters *params,\n\t\t\t       bool commit, struct ia_css_pipe *pipe);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}