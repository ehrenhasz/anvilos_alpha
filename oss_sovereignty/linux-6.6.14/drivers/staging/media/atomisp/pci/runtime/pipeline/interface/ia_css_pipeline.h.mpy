{
  "module_name": "ia_css_pipeline.h",
  "hash_id": "179ef956bcfdc13d242c8f733e6396963540cc09e4e94c59cfe56bafc60b4e06",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/runtime/pipeline/interface/ia_css_pipeline.h",
  "human_readable_source": " \n \n\n#ifndef __IA_CSS_PIPELINE_H__\n#define __IA_CSS_PIPELINE_H__\n\n#include \"sh_css_internal.h\"\n#include \"ia_css_pipe_public.h\"\n#include \"ia_css_pipeline_common.h\"\n\n#define IA_CSS_PIPELINE_NUM_MAX\t\t(20)\n\n \nstruct ia_css_pipeline_stage {\n\tunsigned int stage_num;\n\tstruct ia_css_binary *binary;\t \n\tstruct ia_css_binary_info *binary_info;\n\tconst struct ia_css_fw_info *firmware;\t \n\t \n\tenum ia_css_pipeline_stage_sp_func sp_func;\n\tunsigned int max_input_width;\t \n\tstruct sh_css_binary_args args;\n\tint mode;\n\tbool out_frame_allocated[IA_CSS_BINARY_MAX_OUTPUT_PORTS];\n\tbool vf_frame_allocated;\n\tstruct ia_css_pipeline_stage *next;\n\tbool enable_zoom;\n};\n\n \nstruct ia_css_pipeline {\n\tenum ia_css_pipe_id pipe_id;\n\tu8 pipe_num;\n\tbool stop_requested;\n\tstruct ia_css_pipeline_stage *stages;\n\tstruct ia_css_pipeline_stage *current_stage;\n\tunsigned int num_stages;\n\tstruct ia_css_frame in_frame;\n\tstruct ia_css_frame out_frame[IA_CSS_PIPE_MAX_OUTPUT_STAGE];\n\tstruct ia_css_frame vf_frame[IA_CSS_PIPE_MAX_OUTPUT_STAGE];\n\tunsigned int dvs_frame_delay;\n\tunsigned int inout_port_config;\n\tint num_execs;\n\tbool acquire_isp_each_stage;\n};\n\n#define DEFAULT_PIPELINE { \\\n\t.pipe_id\t\t= IA_CSS_PIPE_ID_PREVIEW, \\\n\t.in_frame\t\t= DEFAULT_FRAME, \\\n\t.out_frame\t\t= {DEFAULT_FRAME}, \\\n\t.vf_frame\t\t= {DEFAULT_FRAME}, \\\n\t.dvs_frame_delay\t= IA_CSS_FRAME_DELAY_1, \\\n\t.num_execs\t\t= -1, \\\n\t.acquire_isp_each_stage\t= true, \\\n}\n\n \nstruct ia_css_pipeline_stage_desc {\n\tstruct ia_css_binary *binary;\n\tconst struct ia_css_fw_info *firmware;\n\tenum ia_css_pipeline_stage_sp_func sp_func;\n\tunsigned int max_input_width;\n\tunsigned int mode;\n\tstruct ia_css_frame *in_frame;\n\tstruct ia_css_frame *out_frame[IA_CSS_BINARY_MAX_OUTPUT_PORTS];\n\tstruct ia_css_frame *vf_frame;\n};\n\n \nvoid ia_css_pipeline_init(void);\n\n \nint ia_css_pipeline_create(\n    struct ia_css_pipeline *pipeline,\n    enum ia_css_pipe_id pipe_id,\n    unsigned int pipe_num,\n    unsigned int dvs_frame_delay);\n\n \nvoid ia_css_pipeline_destroy(struct ia_css_pipeline *pipeline);\n\n \nvoid ia_css_pipeline_start(enum ia_css_pipe_id pipe_id,\n\t\t\t   struct ia_css_pipeline *pipeline);\n\n \nint ia_css_pipeline_request_stop(struct ia_css_pipeline *pipeline);\n\n \nbool ia_css_pipeline_has_stopped(struct ia_css_pipeline *pipe);\n\n \nvoid ia_css_pipeline_clean(struct ia_css_pipeline *pipeline);\n\n \nint ia_css_pipeline_create_and_add_stage(\n    struct ia_css_pipeline *pipeline,\n    struct ia_css_pipeline_stage_desc *stage_desc,\n    struct ia_css_pipeline_stage **stage);\n\n \nvoid ia_css_pipeline_finalize_stages(struct ia_css_pipeline *pipeline,\n\t\t\t\t     bool continuous);\n\n \nint ia_css_pipeline_get_stage(struct ia_css_pipeline *pipeline,\n\tint mode,\n\tstruct ia_css_pipeline_stage **stage);\n\n \nint ia_css_pipeline_get_stage_from_fw(struct ia_css_pipeline\n\t*pipeline,\n\tu32 fw_handle,\n\tstruct ia_css_pipeline_stage **stage);\n\n \nint ia_css_pipeline_get_fw_from_stage(struct ia_css_pipeline\n\t*pipeline,\n\tu32 stage_num,\n\tuint32_t *fw_handle);\n\n \nint ia_css_pipeline_get_output_stage(\n    struct ia_css_pipeline *pipeline,\n    int mode,\n    struct ia_css_pipeline_stage **stage);\n\n \nbool ia_css_pipeline_uses_params(struct ia_css_pipeline *pipeline);\n\n \nbool ia_css_pipeline_get_sp_thread_id(unsigned int key, unsigned int *val);\n\n#if defined(ISP2401)\n \nstruct sh_css_sp_pipeline_io_status *ia_css_pipeline_get_pipe_io_status(void);\n#endif\n\n \nvoid ia_css_pipeline_map(unsigned int pipe_num, bool map);\n\n \nbool ia_css_pipeline_is_mapped(unsigned int key);\n\n \nvoid ia_css_pipeline_dump_thread_map_info(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}