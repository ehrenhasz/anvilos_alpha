{
  "module_name": "event.c",
  "hash_id": "a792ad14f3ca7fc7363d52f8ff837f1914dd861d9d3da7ba8c5e92241607e51a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/runtime/event/src/event.c",
  "human_readable_source": "\n \n\n#include \"sh_css_sp.h\"\n\n#include \"dma.h\"\t \n\n#include <type_support.h>\n#include \"ia_css_binary.h\"\n#include \"sh_css_hrt.h\"\n#include \"sh_css_defs.h\"\n#include \"sh_css_internal.h\"\n#include \"ia_css_debug.h\"\n#include \"ia_css_debug_internal.h\"\n#include \"sh_css_legacy.h\"\n\n#include \"gdc_device.h\"\t\t\t\t \n\n \t \n\n#include \"assert_support.h\"\n\n#include \"ia_css_queue.h\"\t \n#include \"ia_css_event.h\"\t \n \nbool ia_css_event_encode(\n    u8\t*in,\n    u8\tnr,\n    uint32_t\t*out)\n{\n\tbool ret;\n\tu32 nr_of_bits;\n\tu32 i;\n\n\tassert(in);\n\tassert(out);\n\tOP___assert(nr > 0 && nr <= MAX_NR_OF_PAYLOADS_PER_SW_EVENT);\n\n\t \n\t*out = 0;\n\n\t \n\tnr_of_bits = sizeof(uint32_t) * 8 / nr;\n\n\t \n\tfor (i = 0; i < nr; i++) {\n\t\t*out <<= nr_of_bits;\n\t\t*out |= in[i];\n\t}\n\n\t \n\tret = (nr > 0 && nr <= MAX_NR_OF_PAYLOADS_PER_SW_EVENT);\n\n\treturn ret;\n}\n\nvoid ia_css_event_decode(\n    u32 event,\n    uint8_t *payload)\n{\n\tassert(payload[1] == 0);\n\tassert(payload[2] == 0);\n\tassert(payload[3] == 0);\n\n\tia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE,\n\t\t\t    \"ia_css_event_decode() enter:\\n\");\n\n\t \n\tpayload[0] = event & 0xff;   \n\tpayload[1] = (event >> 8) & 0xff;\n\tpayload[2] = (event >> 16) & 0xff;\n\tpayload[3] = 0;\n\n\tswitch (payload[0]) {\n\tcase SH_CSS_SP_EVENT_PORT_EOF:\n\t\tpayload[2] = 0;\n\t\tpayload[3] = (event >> 24) & 0xff;\n\t\tbreak;\n\n\tcase SH_CSS_SP_EVENT_ACC_STAGE_COMPLETE:\n\tcase SH_CSS_SP_EVENT_TIMER:\n\tcase SH_CSS_SP_EVENT_FRAME_TAGGED:\n\tcase SH_CSS_SP_EVENT_FW_WARNING:\n\tcase SH_CSS_SP_EVENT_FW_ASSERT:\n\t\tpayload[3] = (event >> 24) & 0xff;\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}