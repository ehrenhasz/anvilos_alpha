{
  "module_name": "util.c",
  "hash_id": "3fb8d2a8ae685ff983c4f373403e54bf1ffa64870b837092619a6bd40c07cee2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/camera/util/src/util.c",
  "human_readable_source": "\n \n\n#include \"ia_css_util.h\"\n#include <ia_css_frame.h>\n#include <assert_support.h>\n#include <math_support.h>\n\n \n#include \"ia_css_binary.h\"\n\n \nunsigned int ia_css_util_input_format_bpp(\n    enum atomisp_input_format format,\n    bool two_ppc)\n{\n\tunsigned int rval = 0;\n\n\tswitch (format) {\n\tcase ATOMISP_INPUT_FORMAT_YUV420_8_LEGACY:\n\tcase ATOMISP_INPUT_FORMAT_YUV420_8:\n\tcase ATOMISP_INPUT_FORMAT_YUV422_8:\n\tcase ATOMISP_INPUT_FORMAT_RGB_888:\n\tcase ATOMISP_INPUT_FORMAT_RAW_8:\n\tcase ATOMISP_INPUT_FORMAT_BINARY_8:\n\tcase ATOMISP_INPUT_FORMAT_EMBEDDED:\n\t\trval = 8;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_YUV420_10:\n\tcase ATOMISP_INPUT_FORMAT_YUV422_10:\n\tcase ATOMISP_INPUT_FORMAT_RAW_10:\n\t\trval = 10;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_YUV420_16:\n\tcase ATOMISP_INPUT_FORMAT_YUV422_16:\n\t\trval = 16;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RGB_444:\n\t\trval = 4;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RGB_555:\n\t\trval = 5;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RGB_565:\n\t\trval = 65;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RGB_666:\n\tcase ATOMISP_INPUT_FORMAT_RAW_6:\n\t\trval = 6;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RAW_7:\n\t\trval = 7;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RAW_12:\n\t\trval = 12;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RAW_14:\n\t\tif (two_ppc)\n\t\t\trval = 14;\n\t\telse\n\t\t\trval = 12;\n\t\tbreak;\n\tcase ATOMISP_INPUT_FORMAT_RAW_16:\n\t\tif (two_ppc)\n\t\t\trval = 16;\n\t\telse\n\t\t\trval = 12;\n\t\tbreak;\n\tdefault:\n\t\trval = 0;\n\t\tbreak;\n\t}\n\treturn rval;\n}\n\nint ia_css_util_check_vf_info(\n    const struct ia_css_frame_info *const info)\n{\n\tint err;\n\tunsigned int max_vf_width;\n\n\tassert(info);\n\terr = ia_css_frame_check_info(info);\n\tif (err)\n\t\treturn err;\n\tmax_vf_width = ia_css_binary_max_vf_width();\n\tif (max_vf_width != 0 && info->res.width > max_vf_width * 2)\n\t\treturn -EINVAL;\n\treturn 0;\n}\n\nint ia_css_util_check_vf_out_info(\n    const struct ia_css_frame_info *const out_info,\n    const struct ia_css_frame_info *const vf_info)\n{\n\tint err;\n\n\tassert(out_info);\n\tassert(vf_info);\n\n\terr = ia_css_frame_check_info(out_info);\n\tif (err)\n\t\treturn err;\n\terr = ia_css_util_check_vf_info(vf_info);\n\tif (err)\n\t\treturn err;\n\treturn 0;\n}\n\nint ia_css_util_check_res(unsigned int width, unsigned int height)\n{\n\t \n\tif (((width  == 0)   ||\n\t     (height == 0)   ||\n\t     IS_ODD(width))) {\n\t\treturn -EINVAL;\n\t}\n\treturn 0;\n}\n\n \nbool ia_css_util_res_leq(struct ia_css_resolution a, struct ia_css_resolution b)\n{\n\treturn a.width <= b.width && a.height <= b.height;\n}\n\n \nbool ia_css_util_resolution_is_zero(const struct ia_css_resolution resolution)\n{\n\treturn (resolution.width == 0) || (resolution.height == 0);\n}\n\n \nbool ia_css_util_resolution_is_even(const struct ia_css_resolution resolution)\n{\n\treturn IS_EVEN(resolution.height) && IS_EVEN(resolution.width);\n}\n\nbool ia_css_util_is_input_format_raw(enum atomisp_input_format format)\n{\n\treturn ((format == ATOMISP_INPUT_FORMAT_RAW_6) ||\n\t\t(format == ATOMISP_INPUT_FORMAT_RAW_7) ||\n\t\t(format == ATOMISP_INPUT_FORMAT_RAW_8) ||\n\t\t(format == ATOMISP_INPUT_FORMAT_RAW_10) ||\n\t\t(format == ATOMISP_INPUT_FORMAT_RAW_12));\n\t \n}\n\nbool ia_css_util_is_input_format_yuv(enum atomisp_input_format format)\n{\n\treturn format == ATOMISP_INPUT_FORMAT_YUV420_8_LEGACY ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV420_8  ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV420_10 ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV420_16 ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV422_8  ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV422_10 ||\n\t       format == ATOMISP_INPUT_FORMAT_YUV422_16;\n}\n\nint ia_css_util_check_input(\n    const struct ia_css_stream_config *const stream_config,\n    bool must_be_raw,\n    bool must_be_yuv)\n{\n\tassert(stream_config);\n\n\tif (!stream_config)\n\t\treturn -EINVAL;\n\n\tif (stream_config->input_config.effective_res.width == 0 ||\n\t    stream_config->input_config.effective_res.height == 0)\n\t\treturn -EINVAL;\n\tif (must_be_raw &&\n\t    !ia_css_util_is_input_format_raw(stream_config->input_config.format))\n\t\treturn -EINVAL;\n\n\tif (must_be_yuv &&\n\t    !ia_css_util_is_input_format_yuv(stream_config->input_config.format))\n\t\treturn -EINVAL;\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}