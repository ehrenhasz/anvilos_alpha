{
  "module_name": "sh_css_internal.h",
  "hash_id": "8bfac6c6a4f34e369a7c5b13c9b9d1db33df76f35096f734ee8a3f3d3fa95da7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/sh_css_internal.h",
  "human_readable_source": " \n \n\n#ifndef _SH_CSS_INTERNAL_H_\n#define _SH_CSS_INTERNAL_H_\n\n#include <system_global.h>\n#include <math_support.h>\n#include <type_support.h>\n#include <platform_support.h>\n#include <linux/stdarg.h>\n\n#if !defined(ISP2401)\n#include \"input_formatter.h\"\n#endif\n#include \"input_system.h\"\n\n#include \"ia_css_types.h\"\n#include \"ia_css_acc_types.h\"\n#include \"ia_css_buffer.h\"\n\n#include \"ia_css_binary.h\"\n#include \"sh_css_firmware.h\"  \n#include \"sh_css_legacy.h\"\n#include \"sh_css_defs.h\"\n#include \"sh_css_uds.h\"\n#include \"dma.h\"\t \n#include \"ia_css_circbuf_comm.h\"  \n#include \"ia_css_frame_comm.h\"\n#include \"ia_css_3a.h\"\n#include \"ia_css_dvs.h\"\n#include \"ia_css_metadata.h\"\n#include \"runtime/bufq/interface/ia_css_bufq.h\"\n#include \"ia_css_timer.h\"\n\n \n#define IA_CSS_NUM_CB_SEM_READ_RESOURCE\t2\n#define IA_CSS_NUM_CB_SEM_WRITE_RESOURCE\t1\n#define IA_CSS_NUM_CBS\t\t\t\t\t\t2\n#define IA_CSS_CB_MAX_ELEMS\t\t\t\t\t2\n\n \n#define IA_CSS_COPYSINK_SEM_INDEX\t0\n#define IA_CSS_TAGGER_SEM_INDEX\t1\n\n \n#define IA_CSS_POST_OUT_EVENT_FORCE\t\t2\n\n#define SH_CSS_MAX_BINARY_NAME\t64\n\n#define SP_DEBUG_NONE\t(0)\n#define SP_DEBUG_DUMP\t(1)\n#define SP_DEBUG_COPY\t(2)\n#define SP_DEBUG_TRACE\t(3)\n#define SP_DEBUG_MINIMAL (4)\n\n#define SP_DEBUG SP_DEBUG_NONE\n#define SP_DEBUG_MINIMAL_OVERWRITE 1\n\n#define SH_CSS_TNR_BIT_DEPTH 8\n#define SH_CSS_REF_BIT_DEPTH 8\n\n \n#define NUM_CONTINUOUS_FRAMES\t15\n#define NUM_MIPI_FRAMES_PER_STREAM\t\t2\n\n#define NUM_ONLINE_INIT_CONTINUOUS_FRAMES      2\n\n#define NR_OF_PIPELINES\t\t\tIA_CSS_PIPE_ID_NUM  \n\n#define SH_CSS_MAX_IF_CONFIGS\t3  \n#define SH_CSS_IF_CONFIG_NOT_NEEDED\t0xFF\n\n \n\n#if !defined(ISP2401)\n#define SH_CSS_SP_INTERNAL_METADATA_THREAD\t1\n#else\n#define SH_CSS_SP_INTERNAL_METADATA_THREAD\t0\n#endif\n\n#define SH_CSS_SP_INTERNAL_SERVICE_THREAD\t\t1\n\n#define SH_CSS_MAX_SP_THREADS\t\t5\n\n#define SH_CSS_MAX_SP_INTERNAL_THREADS\t(\\\n\t SH_CSS_SP_INTERNAL_SERVICE_THREAD +\\\n\t SH_CSS_SP_INTERNAL_METADATA_THREAD)\n\n#define SH_CSS_MAX_PIPELINES\tSH_CSS_MAX_SP_THREADS\n\n \n#define CALC_ALIGNMENT_MEMBER(x, y)\t(CEIL_MUL(x, y) - x)\n#define SIZE_OF_HRT_VADDRESS\t\tsizeof(hive_uint32)\n#define SIZE_OF_IA_CSS_PTR\t\tsizeof(uint32_t)\n\n \n#define NUM_OF_SPS 1\n\n#define NUM_OF_BLS 0\n\n \nenum sh_css_order_binaries {\n\tSP_FIRMWARE = 0,\n\tISP_FIRMWARE\n};\n\n \nenum sh_css_pipe_config_override {\n\tSH_CSS_PIPE_CONFIG_OVRD_NONE     = 0,\n\tSH_CSS_PIPE_CONFIG_OVRD_NO_OVRD  = 0xffff\n};\n\nenum host2sp_commands {\n\thost2sp_cmd_error = 0,\n\t \n\thost2sp_cmd_ready = 1,\n\t \n\thost2sp_cmd_dummy,\t\t \n\thost2sp_cmd_start_flash,\t \n\thost2sp_cmd_terminate,\t\t \n\tN_host2sp_cmd\n};\n\n \nenum sh_css_sp_event_type {\n\tSH_CSS_SP_EVENT_OUTPUT_FRAME_DONE,\n\tSH_CSS_SP_EVENT_SECOND_OUTPUT_FRAME_DONE,\n\tSH_CSS_SP_EVENT_VF_OUTPUT_FRAME_DONE,\n\tSH_CSS_SP_EVENT_SECOND_VF_OUTPUT_FRAME_DONE,\n\tSH_CSS_SP_EVENT_3A_STATISTICS_DONE,\n\tSH_CSS_SP_EVENT_DIS_STATISTICS_DONE,\n\tSH_CSS_SP_EVENT_PIPELINE_DONE,\n\tSH_CSS_SP_EVENT_FRAME_TAGGED,\n\tSH_CSS_SP_EVENT_INPUT_FRAME_DONE,\n\tSH_CSS_SP_EVENT_METADATA_DONE,\n\tSH_CSS_SP_EVENT_LACE_STATISTICS_DONE,\n\tSH_CSS_SP_EVENT_ACC_STAGE_COMPLETE,\n\tSH_CSS_SP_EVENT_TIMER,\n\tSH_CSS_SP_EVENT_PORT_EOF,\n\tSH_CSS_SP_EVENT_FW_WARNING,\n\tSH_CSS_SP_EVENT_FW_ASSERT,\n\tSH_CSS_SP_EVENT_NR_OF_TYPES\t\t \n};\n\n \n \nstruct sh_css_ddr_address_map {\n\tia_css_ptr isp_param;\n\tia_css_ptr isp_mem_param[SH_CSS_MAX_STAGES][IA_CSS_NUM_MEMORIES];\n\tia_css_ptr macc_tbl;\n\tia_css_ptr fpn_tbl;\n\tia_css_ptr sc_tbl;\n\tia_css_ptr tetra_r_x;\n\tia_css_ptr tetra_r_y;\n\tia_css_ptr tetra_gr_x;\n\tia_css_ptr tetra_gr_y;\n\tia_css_ptr tetra_gb_x;\n\tia_css_ptr tetra_gb_y;\n\tia_css_ptr tetra_b_x;\n\tia_css_ptr tetra_b_y;\n\tia_css_ptr tetra_ratb_x;\n\tia_css_ptr tetra_ratb_y;\n\tia_css_ptr tetra_batr_x;\n\tia_css_ptr tetra_batr_y;\n\tia_css_ptr dvs_6axis_params_y;\n};\n\n#define SIZE_OF_SH_CSS_DDR_ADDRESS_MAP_STRUCT\t\t\t\t\t\\\n\t(SIZE_OF_HRT_VADDRESS +\t\t\t\t\t\t\t\\\n\t(SH_CSS_MAX_STAGES * IA_CSS_NUM_MEMORIES * SIZE_OF_HRT_VADDRESS) +\t\\\n\t(16 * SIZE_OF_HRT_VADDRESS))\n\n \nstruct sh_css_ddr_address_map_size {\n\tsize_t isp_param;\n\tsize_t isp_mem_param[SH_CSS_MAX_STAGES][IA_CSS_NUM_MEMORIES];\n\tsize_t macc_tbl;\n\tsize_t fpn_tbl;\n\tsize_t sc_tbl;\n\tsize_t tetra_r_x;\n\tsize_t tetra_r_y;\n\tsize_t tetra_gr_x;\n\tsize_t tetra_gr_y;\n\tsize_t tetra_gb_x;\n\tsize_t tetra_gb_y;\n\tsize_t tetra_b_x;\n\tsize_t tetra_b_y;\n\tsize_t tetra_ratb_x;\n\tsize_t tetra_ratb_y;\n\tsize_t tetra_batr_x;\n\tsize_t tetra_batr_y;\n\tsize_t dvs_6axis_params_y;\n};\n\nstruct sh_css_ddr_address_map_compound {\n\tstruct sh_css_ddr_address_map\t\tmap;\n\tstruct sh_css_ddr_address_map_size\tsize;\n};\n\nstruct ia_css_isp_parameter_set_info {\n\tstruct sh_css_ddr_address_map\n\t\tmem_map; \n\tu32\n\tisp_parameters_id; \n\tia_css_ptr\n\toutput_frame_ptr; \n};\n\n \nstruct sh_css_binary_args {\n\tstruct ia_css_frame *in_frame;\t      \n\tconst struct ia_css_frame\n\t\t*delay_frames[MAX_NUM_VIDEO_DELAY_FRAMES];    \n\tconst struct ia_css_frame *tnr_frames[NUM_VIDEO_TNR_FRAMES];    \n\tstruct ia_css_frame\n\t\t*out_frame[IA_CSS_BINARY_MAX_OUTPUT_PORTS];       \n\tstruct ia_css_frame *out_vf_frame;    \n\tbool                 copy_vf;\n\tbool                 copy_output;\n\tunsigned int vf_downscale_log2;\n};\n\n#if SP_DEBUG == SP_DEBUG_DUMP\n\n#define SH_CSS_NUM_SP_DEBUG 48\n\nstruct sh_css_sp_debug_state {\n\tunsigned int error;\n\tunsigned int debug[SH_CSS_NUM_SP_DEBUG];\n};\n\n#elif SP_DEBUG == SP_DEBUG_COPY\n\n#define SH_CSS_SP_DBG_TRACE_DEPTH\t(40)\n\nstruct sh_css_sp_debug_trace {\n\tu16 frame;\n\tu16 line;\n\tu16 pixel_distance;\n\tu16 mipi_used_dword;\n\tu16 sp_index;\n};\n\nstruct sh_css_sp_debug_state {\n\tu16 if_start_line;\n\tu16 if_start_column;\n\tu16 if_cropped_height;\n\tu16 if_cropped_width;\n\tunsigned int index;\n\tstruct sh_css_sp_debug_trace\n\t\ttrace[SH_CSS_SP_DBG_TRACE_DEPTH];\n};\n\n#elif SP_DEBUG == SP_DEBUG_TRACE\n\n \n#define SH_CSS_SP_DBG_NR_OF_TRACES\t(1)\n#define SH_CSS_SP_DBG_TRACE_DEPTH\t(40)\n\n#define SH_CSS_SP_DBG_TRACE_FILE_ID_BIT_POS (13)\n\nstruct sh_css_sp_debug_trace {\n\tu16 time_stamp;\n\tu16 location;\t \n\tu32 data;\n};\n\nstruct sh_css_sp_debug_state {\n\tstruct sh_css_sp_debug_trace\n\t\ttrace[SH_CSS_SP_DBG_NR_OF_TRACES][SH_CSS_SP_DBG_TRACE_DEPTH];\n\tu16 index_last[SH_CSS_SP_DBG_NR_OF_TRACES];\n\tu8 index[SH_CSS_SP_DBG_NR_OF_TRACES];\n};\n\n#elif SP_DEBUG == SP_DEBUG_MINIMAL\n\n#define SH_CSS_NUM_SP_DEBUG 128\n\nstruct sh_css_sp_debug_state {\n\tunsigned int error;\n\tunsigned int debug[SH_CSS_NUM_SP_DEBUG];\n};\n\n#endif\n\nstruct sh_css_sp_debug_command {\n\t \n\tu32 dma_sw_reg;\n};\n\n#if !defined(ISP2401)\n \nstruct sh_css_sp_input_formatter_set {\n\tu32\t\t\t\tstream_format;\n\tinput_formatter_cfg_t\tconfig_a;\n\tinput_formatter_cfg_t\tconfig_b;\n};\n#endif\n\n#define IA_CSS_MIPI_SIZE_CHECK_MAX_NOF_ENTRIES_PER_PORT (3)\n\n \nstruct sh_css_sp_config {\n\tu8\t\t\tno_isp_sync;  \n\tu8\t\t\tenable_raw_pool_locking;  \n\tu8\t\t\tlock_all;\n\t \n#if !defined(ISP2401)\n\tstruct {\n\t\tu8\t\t\t\t\ta_changed;\n\t\tu8\t\t\t\t\tb_changed;\n\t\tu8\t\t\t\t\tisp_2ppc;\n\t\tstruct sh_css_sp_input_formatter_set\n\t\t\tset[SH_CSS_MAX_IF_CONFIGS];  \n\t} input_formatter;\n#endif\n#if !defined(ISP2401)\n\tsync_generator_cfg_t\tsync_gen;\n\ttpg_cfg_t\t\ttpg;\n\tprbs_cfg_t\t\tprbs;\n\tinput_system_cfg_t\tinput_circuit;\n\tu8\t\t\tinput_circuit_cfg_changed;\n\tu32\t\tmipi_sizes_for_check[N_CSI_PORTS][IA_CSS_MIPI_SIZE_CHECK_MAX_NOF_ENTRIES_PER_PORT];\n#endif\n\tu8                 enable_isys_event_queue;\n\tu8\t\t\tdisable_cont_vf;\n};\n\nenum sh_css_stage_type {\n\tSH_CSS_SP_STAGE_TYPE  = 0,\n\tSH_CSS_ISP_STAGE_TYPE = 1\n};\n\n#define SH_CSS_NUM_STAGE_TYPES 2\n\n#define SH_CSS_PIPE_CONFIG_SAMPLE_PARAMS\tBIT(0)\n#define SH_CSS_PIPE_CONFIG_SAMPLE_PARAMS_MASK \\\n\t((SH_CSS_PIPE_CONFIG_SAMPLE_PARAMS << SH_CSS_MAX_SP_THREADS) - 1)\n\n#if defined(ISP2401)\nstruct sh_css_sp_pipeline_terminal {\n\tunion {\n\t\t \n\t\tvirtual_input_system_stream_t\n\t\tvirtual_input_system_stream[IA_CSS_STREAM_MAX_ISYS_STREAM_PER_CH];\n\t} context;\n\t \n\tunion {\n\t\t \n\t\tvirtual_input_system_stream_cfg_t\n\t\tvirtual_input_system_stream_cfg[IA_CSS_STREAM_MAX_ISYS_STREAM_PER_CH];\n\t} ctrl;\n};\n\nstruct sh_css_sp_pipeline_io {\n\tstruct sh_css_sp_pipeline_terminal\tinput;\n\t \n\t \n};\n\n \nstruct sh_css_sp_pipeline_io_status {\n\tu32\tactive[N_INPUT_SYSTEM_CSI_PORT];\t \n\tu32\trunning[N_INPUT_SYSTEM_CSI_PORT];\t \n};\n\n#endif\nenum sh_css_port_dir {\n\tSH_CSS_PORT_INPUT  = 0,\n\tSH_CSS_PORT_OUTPUT  = 1\n};\n\nenum sh_css_port_type {\n\tSH_CSS_HOST_TYPE  = 0,\n\tSH_CSS_COPYSINK_TYPE  = 1,\n\tSH_CSS_TAGGERSINK_TYPE  = 2\n};\n\n \n#define SH_CSS_PORT_FLD_WIDTH_IN_BITS (4)\n#define SH_CSS_PORT_TYPE_BIT_FLD(pt) (0x1 << (pt))\n#define SH_CSS_PORT_FLD(pd) ((pd) ? SH_CSS_PORT_FLD_WIDTH_IN_BITS : 0)\n#define SH_CSS_PIPE_PORT_CONFIG_ON(p, pd, pt) ((p) |= (SH_CSS_PORT_TYPE_BIT_FLD(pt) << SH_CSS_PORT_FLD(pd)))\n#define SH_CSS_PIPE_PORT_CONFIG_OFF(p, pd, pt) ((p) &= ~(SH_CSS_PORT_TYPE_BIT_FLD(pt) << SH_CSS_PORT_FLD(pd)))\n#define SH_CSS_PIPE_PORT_CONFIG_SET(p, pd, pt, val) ((val) ? \\\n\t\tSH_CSS_PIPE_PORT_CONFIG_ON(p, pd, pt) : SH_CSS_PIPE_PORT_CONFIG_OFF(p, pd, pt))\n#define SH_CSS_PIPE_PORT_CONFIG_GET(p, pd, pt) ((p) & (SH_CSS_PORT_TYPE_BIT_FLD(pt) << SH_CSS_PORT_FLD(pd)))\n#define SH_CSS_PIPE_PORT_CONFIG_IS_CONTINUOUS(p) \\\n\t(!(SH_CSS_PIPE_PORT_CONFIG_GET(p, SH_CSS_PORT_INPUT, SH_CSS_HOST_TYPE) && \\\n\t   SH_CSS_PIPE_PORT_CONFIG_GET(p, SH_CSS_PORT_OUTPUT, SH_CSS_HOST_TYPE)))\n\n#define IA_CSS_ACQUIRE_ISP_POS\t31\n\n \n#define SH_CSS_METADATA_ENABLED        0x01\n#define SH_CSS_METADATA_PROCESSED      0x02\n#define SH_CSS_METADATA_OFFLINE_MODE   0x04\n#define SH_CSS_METADATA_WAIT_INPUT     0x08\n\n \nvoid\nia_css_metadata_free_multiple(unsigned int num_bufs,\n\t\t\t      struct ia_css_metadata **bufs);\n\n \n#define QOS_INVALID                  (~0U)\n\n \nstruct sh_css_sp_pipeline {\n\tu32\tpipe_id;\t \n\tu32\tpipe_num;\t \n\tu32\tthread_id;\t \n\tu32\tpipe_config;\t \n\tu32\tpipe_qos_config;\t \n\tu32\tinout_port_config;\n\tu32\trequired_bds_factor;\n\tu32\tdvs_frame_delay;\n\tu32\tinput_system_mode;\t \n\tu32\tport_id;\t \n\tu32\tnum_stages;\t\t \n\tu32\trunning;\t \n\tia_css_ptr\tsp_stage_addr[SH_CSS_MAX_STAGES];\n\tia_css_ptr\tscaler_pp_lut;  \n\tu32\tdummy;  \n\ts32 num_execs;  \n\tstruct {\n\t\tu32        format;    \n\t\tu32        width;     \n\t\tu32        height;    \n\t\tu32        stride;    \n\t\tu32        size;      \n\t\tia_css_ptr    cont_buf;  \n\t} metadata;\n\tu32\toutput_frame_queue_id;\n\tunion {\n\t\tstruct {\n\t\t\tu32\tbytes_available;\n\t\t} bin;\n\t\tstruct {\n\t\t\tu32\theight;\n\t\t\tu32\twidth;\n\t\t\tu32\tpadded_width;\n\t\t\tu32\tmax_input_width;\n\t\t\tu32\traw_bit_depth;\n\t\t} raw;\n\t} copy;\n};\n\n \n#define SH_CSS_NUM_DYNAMIC_FRAME_IDS (3)\n\nstruct ia_css_frames_sp {\n\tstruct ia_css_frame_sp\tin;\n\tstruct ia_css_frame_sp\tout[IA_CSS_BINARY_MAX_OUTPUT_PORTS];\n\tstruct ia_css_resolution effective_in_res;\n\tstruct ia_css_frame_sp\tout_vf;\n\tstruct ia_css_frame_sp_info internal_frame_info;\n\tstruct ia_css_buffer_sp s3a_buf;\n\tstruct ia_css_buffer_sp dvs_buf;\n\tstruct ia_css_buffer_sp metadata_buf;\n};\n\n \nstruct sh_css_isp_stage {\n\t \n\tstruct ia_css_blob_info\t  blob_info;\n\tstruct ia_css_binary_info binary_info;\n\tchar\t\t\t  binary_name[SH_CSS_MAX_BINARY_NAME];\n\tstruct ia_css_isp_param_css_segments mem_initializers;\n};\n\n \nstruct sh_css_sp_stage {\n\t \n\tu8\t\t\tnum;  \n\tu8\t\t\tisp_online;\n\tu8\t\t\tisp_copy_vf;\n\tu8\t\t\tisp_copy_output;\n\tu8\t\t\tsp_enable_xnr;\n\tu8\t\t\tisp_deci_log_factor;\n\tu8\t\t\tisp_vf_downscale_bits;\n\tu8\t\t\tdeinterleaved;\n\t \n\tu8\t\t\tprogram_input_circuit;\n\t \n\tu8\t\t\tfunc;\n\t \n\t \n\tu8\t\t\tstage_type;\n\tu8\t\t\tnum_stripes;\n\tu8\t\t\tisp_pipe_version;\n\tstruct {\n\t\tu8\t\tvf_output;\n\t\tu8\t\ts3a;\n\t\tu8\t\tsdis;\n\t\tu8\t\tdvs_stats;\n\t\tu8\t\tlace_stats;\n\t} enable;\n\t \n\t \n\n\tstruct sh_css_crop_pos\t\tsp_out_crop_pos;\n\tstruct ia_css_frames_sp\t\tframes;\n\tstruct ia_css_resolution\tdvs_envelope;\n\tstruct sh_css_uds_info\t\tuds;\n\tia_css_ptr\t\t\tisp_stage_addr;\n\tia_css_ptr\t\t\txmem_bin_addr;\n\tia_css_ptr\t\t\txmem_map_addr;\n\n\tu16\t\ttop_cropping;\n\tu16\t\trow_stripes_height;\n\tu16\t\trow_stripes_overlap_lines;\n\tu8\t\t\tif_config_index;  \n};\n\n \nstruct sh_css_sp_group {\n\tstruct sh_css_sp_config\t\tconfig;\n\tstruct sh_css_sp_pipeline\tpipe[SH_CSS_MAX_SP_THREADS];\n#if defined(ISP2401)\n\tstruct sh_css_sp_pipeline_io\tpipe_io[SH_CSS_MAX_SP_THREADS];\n\tstruct sh_css_sp_pipeline_io_status\tpipe_io_status;\n#endif\n\tstruct sh_css_sp_debug_command\tdebug;\n};\n\n \nstruct sh_css_sp_per_frame_data {\n\t \n\tia_css_ptr\t\t\tsp_group_addr;\n};\n\n#define SH_CSS_NUM_SDW_IRQS 3\n\n \nstruct sh_css_sp_output {\n\tunsigned int\t\t\tbin_copy_bytes_copied;\n#if SP_DEBUG != SP_DEBUG_NONE\n\tstruct sh_css_sp_debug_state\tdebug;\n#endif\n\tunsigned int\t\tsw_interrupt_value[SH_CSS_NUM_SDW_IRQS];\n};\n\n \n \n\n#define  IA_CSS_NUM_ELEMS_HOST2SP_BUFFER_QUEUE    6\n#define  IA_CSS_NUM_ELEMS_HOST2SP_PARAM_QUEUE    3\n#define  IA_CSS_NUM_ELEMS_HOST2SP_TAG_CMD_QUEUE  6\n\n \n#define  IA_CSS_NUM_ELEMS_SP2HOST_ISYS_EVENT_QUEUE (2 * N_CSI_PORTS)\n \n#define  IA_CSS_NUM_ELEMS_HOST2SP_ISYS_EVENT_QUEUE (2 * N_CSI_PORTS)\n\n#define  IA_CSS_NUM_ELEMS_HOST2SP_PSYS_EVENT_QUEUE    13\n#define  IA_CSS_NUM_ELEMS_SP2HOST_BUFFER_QUEUE        19\n#define  IA_CSS_NUM_ELEMS_SP2HOST_PSYS_EVENT_QUEUE    26  \n\nstruct sh_css_hmm_buffer {\n\tunion {\n\t\tstruct ia_css_isp_3a_statistics  s3a;\n\t\tstruct ia_css_isp_dvs_statistics dis;\n\t\tia_css_ptr skc_dvs_statistics;\n\t\tia_css_ptr lace_stat;\n\t\tstruct ia_css_metadata\tmetadata;\n\t\tstruct frame_data_wrapper {\n\t\t\tia_css_ptr\tframe_data;\n\t\t\tu32\tflashed;\n\t\t\tu32\texp_id;\n\t\t\tu32\tisp_parameters_id;  \n\t\t} frame;\n\t\tia_css_ptr ddr_ptrs;\n\t} payload;\n\t \n\tCSS_ALIGN(u64 cookie_ptr, 8);  \n\tu64 kernel_ptr;\n\tstruct ia_css_time_meas timing_data;\n\tclock_value_t isys_eof_clock_tick;\n};\n\n#define SIZE_OF_FRAME_STRUCT\t\t\t\t\t\t\\\n\t(SIZE_OF_HRT_VADDRESS +\t\t\t\t\t\t\\\n\t(3 * sizeof(uint32_t)))\n\n#define SIZE_OF_PAYLOAD_UNION\t\t\t\t\t\t\\\n\t(MAX(MAX(MAX(MAX(\t\t\t\t\t\t\\\n\tSIZE_OF_IA_CSS_ISP_3A_STATISTICS_STRUCT,\t\t\t\\\n\tSIZE_OF_IA_CSS_ISP_DVS_STATISTICS_STRUCT),\t\t\t\\\n\tSIZE_OF_IA_CSS_METADATA_STRUCT),\t\t\t\t\\\n\tSIZE_OF_FRAME_STRUCT),\t\t\t\t\t\t\\\n\tSIZE_OF_HRT_VADDRESS))\n\n \n#define SIZE_OF_SH_CSS_HMM_BUFFER_STRUCT\t\t\t\t\\\n\t(SIZE_OF_PAYLOAD_UNION +\t\t\t\t\t\\\n\tCALC_ALIGNMENT_MEMBER(SIZE_OF_PAYLOAD_UNION, 8) +\t\t\\\n\t8 +\t\t\t\t\t\t\\\n\t8 +\t\t\t\t\t\t\\\n\tSIZE_OF_IA_CSS_TIME_MEAS_STRUCT +\t\t\t\t\\\n\tSIZE_OF_IA_CSS_CLOCK_TICK_STRUCT +\t\t\t\\\n\tCALC_ALIGNMENT_MEMBER(SIZE_OF_IA_CSS_CLOCK_TICK_STRUCT, 8))\n\nenum sh_css_queue_type {\n\tsh_css_invalid_queue_type = -1,\n\tsh_css_host2sp_buffer_queue,\n\tsh_css_sp2host_buffer_queue,\n\tsh_css_host2sp_psys_event_queue,\n\tsh_css_sp2host_psys_event_queue,\n\tsh_css_sp2host_isys_event_queue,\n\tsh_css_host2sp_isys_event_queue,\n\tsh_css_host2sp_tag_cmd_queue,\n};\n\nstruct sh_css_event_irq_mask {\n\tu16 or_mask;\n\tu16 and_mask;\n};\n\n#define SIZE_OF_SH_CSS_EVENT_IRQ_MASK_STRUCT\t\t\t\t\\\n\t(2 * sizeof(uint16_t))\n\nstruct host_sp_communication {\n\t \n\tu32 host2sp_command;\n\n\t \n\tia_css_ptr host2sp_offline_frames[NUM_CONTINUOUS_FRAMES];\n\tia_css_ptr host2sp_offline_metadata[NUM_CONTINUOUS_FRAMES];\n\n\tia_css_ptr host2sp_mipi_frames[N_CSI_PORTS][NUM_MIPI_FRAMES_PER_STREAM];\n\tia_css_ptr host2sp_mipi_metadata[N_CSI_PORTS][NUM_MIPI_FRAMES_PER_STREAM];\n\tu32 host2sp_num_mipi_frames[N_CSI_PORTS];\n\tu32 host2sp_cont_avail_num_raw_frames;\n\tu32 host2sp_cont_extra_num_raw_frames;\n\tu32 host2sp_cont_target_num_raw_frames;\n\tstruct sh_css_event_irq_mask host2sp_event_irq_mask[NR_OF_PIPELINES];\n\n};\n\n#define SIZE_OF_HOST_SP_COMMUNICATION_STRUCT\t\t\t\t\\\n\t(sizeof(uint32_t) +\t\t\t\t\t\t\\\n\t(NUM_CONTINUOUS_FRAMES * SIZE_OF_HRT_VADDRESS * 2) +\t\t\\\n\t(N_CSI_PORTS * NUM_MIPI_FRAMES_PER_STREAM * SIZE_OF_HRT_VADDRESS * 2) +\t\t\t\\\n\t((3 + N_CSI_PORTS) * sizeof(uint32_t)) +\t\t\t\t\t\t\\\n\t(NR_OF_PIPELINES * SIZE_OF_SH_CSS_EVENT_IRQ_MASK_STRUCT))\n\nstruct host_sp_queues {\n\t \n\tia_css_circbuf_desc_t host2sp_buffer_queues_desc\n\t[SH_CSS_MAX_SP_THREADS][SH_CSS_MAX_NUM_QUEUES];\n\tia_css_circbuf_elem_t host2sp_buffer_queues_elems\n\t[SH_CSS_MAX_SP_THREADS][SH_CSS_MAX_NUM_QUEUES]\n\t[IA_CSS_NUM_ELEMS_HOST2SP_BUFFER_QUEUE];\n\tia_css_circbuf_desc_t sp2host_buffer_queues_desc\n\t[SH_CSS_MAX_NUM_QUEUES];\n\tia_css_circbuf_elem_t sp2host_buffer_queues_elems\n\t[SH_CSS_MAX_NUM_QUEUES][IA_CSS_NUM_ELEMS_SP2HOST_BUFFER_QUEUE];\n\n\t \n\tia_css_circbuf_desc_t host2sp_psys_event_queue_desc;\n\n\tia_css_circbuf_elem_t host2sp_psys_event_queue_elems\n\t[IA_CSS_NUM_ELEMS_HOST2SP_PSYS_EVENT_QUEUE];\n\tia_css_circbuf_desc_t sp2host_psys_event_queue_desc;\n\n\tia_css_circbuf_elem_t sp2host_psys_event_queue_elems\n\t[IA_CSS_NUM_ELEMS_SP2HOST_PSYS_EVENT_QUEUE];\n\n\t \n\tia_css_circbuf_desc_t host2sp_isys_event_queue_desc;\n\n\tia_css_circbuf_elem_t host2sp_isys_event_queue_elems\n\t[IA_CSS_NUM_ELEMS_HOST2SP_ISYS_EVENT_QUEUE];\n\tia_css_circbuf_desc_t sp2host_isys_event_queue_desc;\n\n\tia_css_circbuf_elem_t sp2host_isys_event_queue_elems\n\t[IA_CSS_NUM_ELEMS_SP2HOST_ISYS_EVENT_QUEUE];\n\t \n\tia_css_circbuf_desc_t host2sp_tag_cmd_queue_desc;\n\n\tia_css_circbuf_elem_t host2sp_tag_cmd_queue_elems\n\t[IA_CSS_NUM_ELEMS_HOST2SP_TAG_CMD_QUEUE];\n};\n\n#define SIZE_OF_QUEUES_ELEMS\t\t\t\t\t\t\t\\\n\t(SIZE_OF_IA_CSS_CIRCBUF_ELEM_S_STRUCT *\t\t\t\t\\\n\t((SH_CSS_MAX_SP_THREADS * SH_CSS_MAX_NUM_QUEUES * IA_CSS_NUM_ELEMS_HOST2SP_BUFFER_QUEUE) + \\\n\t(SH_CSS_MAX_NUM_QUEUES * IA_CSS_NUM_ELEMS_SP2HOST_BUFFER_QUEUE) +\t\\\n\t(IA_CSS_NUM_ELEMS_HOST2SP_PSYS_EVENT_QUEUE) +\t\t\t\t\\\n\t(IA_CSS_NUM_ELEMS_SP2HOST_PSYS_EVENT_QUEUE) +\t\t\t\t\\\n\t(IA_CSS_NUM_ELEMS_HOST2SP_ISYS_EVENT_QUEUE) +\t\t\t\t\\\n\t(IA_CSS_NUM_ELEMS_SP2HOST_ISYS_EVENT_QUEUE) +\t\t\t\t\\\n\t(IA_CSS_NUM_ELEMS_HOST2SP_TAG_CMD_QUEUE)))\n\n#define IA_CSS_NUM_CIRCBUF_DESCS 5\n\n#define SIZE_OF_QUEUES_DESC \\\n\t((SH_CSS_MAX_SP_THREADS * SH_CSS_MAX_NUM_QUEUES * \\\n\t  SIZE_OF_IA_CSS_CIRCBUF_DESC_S_STRUCT) + \\\n\t (SH_CSS_MAX_NUM_QUEUES * SIZE_OF_IA_CSS_CIRCBUF_DESC_S_STRUCT) + \\\n\t (IA_CSS_NUM_CIRCBUF_DESCS * SIZE_OF_IA_CSS_CIRCBUF_DESC_S_STRUCT))\n\n#define SIZE_OF_HOST_SP_QUEUES_STRUCT\t\t\\\n\t(SIZE_OF_QUEUES_ELEMS + SIZE_OF_QUEUES_DESC)\n\nextern int  __printf(1, 0) (*sh_css_printf)(const char *fmt, va_list args);\n\nstatic inline void  __printf(1, 2) sh_css_print(const char *fmt, ...)\n{\n\tva_list ap;\n\n\tif (sh_css_printf) {\n\t\tva_start(ap, fmt);\n\t\tsh_css_printf(fmt, ap);\n\t\tva_end(ap);\n\t}\n}\n\nstatic inline void  __printf(1, 0) sh_css_vprint(const char *fmt, va_list args)\n{\n\tif (sh_css_printf)\n\t\tsh_css_printf(fmt, args);\n}\n\n \nia_css_ptr sh_css_params_ddr_address_map(void);\n\nint\nsh_css_params_init(void);\n\nvoid\nsh_css_params_uninit(void);\n\nvoid\nsh_css_binary_args_reset(struct sh_css_binary_args *args);\n\n \nbool\nsh_css_frame_equal_types(const struct ia_css_frame *frame_a,\n\t\t\t const struct ia_css_frame *frame_b);\n\nbool\nsh_css_frame_info_equal_resolution(const struct ia_css_frame_info *info_a,\n\t\t\t\t   const struct ia_css_frame_info *info_b);\n\nvoid\nsh_css_capture_enable_bayer_downscaling(bool enable);\n\nvoid\nsh_css_binary_print(const struct ia_css_binary *binary);\n\n \nvoid\nsh_css_frame_info_set_width(struct ia_css_frame_info *info,\n\t\t\t    unsigned int width,\n\t\t\t    unsigned int aligned);\n\n#if !defined(ISP2401)\n\nunsigned int\nsh_css_get_mipi_sizes_for_check(const unsigned int port,\n\t\t\t\tconst unsigned int idx);\n\n#endif\n\nia_css_ptr\nsh_css_store_sp_group_to_ddr(void);\n\nia_css_ptr\nsh_css_store_sp_stage_to_ddr(unsigned int pipe, unsigned int stage);\n\nia_css_ptr\nsh_css_store_isp_stage_to_ddr(unsigned int pipe, unsigned int stage);\n\nvoid\nsh_css_update_uds_and_crop_info(\n    const struct ia_css_binary_info *info,\n    const struct ia_css_frame_info *in_frame_info,\n    const struct ia_css_frame_info *out_frame_info,\n    const struct ia_css_resolution *dvs_env,\n    const struct ia_css_dz_config *zoom,\n    const struct ia_css_vector *motion_vector,\n    struct sh_css_uds_info *uds,\t\t \n    struct sh_css_crop_pos *sp_out_crop_pos,\t \n\n    bool enable_zoom\n);\n\nvoid\nsh_css_invalidate_shading_tables(struct ia_css_stream *stream);\n\nstruct ia_css_pipeline *\nia_css_pipe_get_pipeline(const struct ia_css_pipe *pipe);\n\nunsigned int\nia_css_pipe_get_pipe_num(const struct ia_css_pipe *pipe);\n\nunsigned int\nia_css_pipe_get_isp_pipe_version(const struct ia_css_pipe *pipe);\n\nbool\nsh_css_continuous_is_enabled(uint8_t pipe_num);\n\nstruct ia_css_pipe *\nfind_pipe_by_num(uint32_t pipe_num);\n\n#ifdef ISP2401\nvoid\nia_css_get_crop_offsets(\n    struct ia_css_pipe *pipe,\n    struct ia_css_frame_info *in_frame);\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}