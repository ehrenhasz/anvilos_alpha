{
  "module_name": "csi_rx_private.h",
  "hash_id": "a4b77566f2368b749d4594fd55dddc964037655d6831da0ecadce18eaf66b9e6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/css_2401_system/host/csi_rx_private.h",
  "human_readable_source": " \n \n\n#ifndef __CSI_RX_PRIVATE_H_INCLUDED__\n#define __CSI_RX_PRIVATE_H_INCLUDED__\n\n#include \"rx_csi_defs.h\"\n#include \"mipi_backend_defs.h\"\n#include \"csi_rx.h\"\n\n#include \"device_access.h\"\t \n\n#include \"assert_support.h\"  \n#include \"print_support.h\"  \n\n \n \nstatic inline hrt_data csi_rx_fe_ctrl_reg_load(\n    const csi_rx_frontend_ID_t ID,\n    const hrt_address reg)\n{\n\tassert(ID < N_CSI_RX_FRONTEND_ID);\n\tassert(CSI_RX_FE_CTRL_BASE[ID] != (hrt_address)-1);\n\treturn ia_css_device_load_uint32(CSI_RX_FE_CTRL_BASE[ID] + reg * sizeof(\n\t\t\t\t\t     hrt_data));\n}\n\n \nstatic inline void csi_rx_fe_ctrl_reg_store(\n    const csi_rx_frontend_ID_t ID,\n    const hrt_address reg,\n    const hrt_data value)\n{\n\tassert(ID < N_CSI_RX_FRONTEND_ID);\n\tassert(CSI_RX_FE_CTRL_BASE[ID] != (hrt_address)-1);\n\n\tia_css_device_store_uint32(CSI_RX_FE_CTRL_BASE[ID] + reg * sizeof(hrt_data),\n\t\t\t\t   value);\n}\n\n \nstatic inline hrt_data csi_rx_be_ctrl_reg_load(\n    const csi_rx_backend_ID_t ID,\n    const hrt_address reg)\n{\n\tassert(ID < N_CSI_RX_BACKEND_ID);\n\tassert(CSI_RX_BE_CTRL_BASE[ID] != (hrt_address)-1);\n\treturn ia_css_device_load_uint32(CSI_RX_BE_CTRL_BASE[ID] + reg * sizeof(\n\t\t\t\t\t     hrt_data));\n}\n\n \nstatic inline void csi_rx_be_ctrl_reg_store(\n    const csi_rx_backend_ID_t ID,\n    const hrt_address reg,\n    const hrt_data value)\n{\n\tassert(ID < N_CSI_RX_BACKEND_ID);\n\tassert(CSI_RX_BE_CTRL_BASE[ID] != (hrt_address)-1);\n\n\tia_css_device_store_uint32(CSI_RX_BE_CTRL_BASE[ID] + reg * sizeof(hrt_data),\n\t\t\t\t   value);\n}\n\n \n\n \n \nstatic inline void csi_rx_fe_ctrl_get_dlane_state(\n    const csi_rx_frontend_ID_t ID,\n    const u32 lane,\n    csi_rx_fe_ctrl_lane_t *dlane_state)\n{\n\tdlane_state->termen =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_DLY_CNT_TERMEN_DLANE_REG_IDX(lane));\n\tdlane_state->settle =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_DLY_CNT_SETTLE_DLANE_REG_IDX(lane));\n}\n\n \nstatic inline void csi_rx_fe_ctrl_get_state(\n    const csi_rx_frontend_ID_t ID,\n    csi_rx_fe_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tstate->enable =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_ENABLE_REG_IDX);\n\tstate->nof_enable_lanes =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_NOF_ENABLED_LANES_REG_IDX);\n\tstate->error_handling =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_ERROR_HANDLING_REG_IDX);\n\tstate->status =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_STATUS_REG_IDX);\n\tstate->status_dlane_hs =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_STATUS_DLANE_HS_REG_IDX);\n\tstate->status_dlane_lp =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_STATUS_DLANE_LP_REG_IDX);\n\tstate->clane.termen =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_DLY_CNT_TERMEN_CLANE_REG_IDX);\n\tstate->clane.settle =\n\t    csi_rx_fe_ctrl_reg_load(ID, _HRT_CSI_RX_DLY_CNT_SETTLE_CLANE_REG_IDX);\n\n\t \n\tfor (i = 0; i < N_CSI_RX_FE_CTRL_DLANES[ID]; i++) {\n\t\tcsi_rx_fe_ctrl_get_dlane_state(\n\t\t    ID,\n\t\t    i,\n\t\t    &state->dlane[i]);\n\t}\n}\n\n \nstatic inline void csi_rx_fe_ctrl_dump_state(\n    const csi_rx_frontend_ID_t ID,\n    csi_rx_fe_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tia_css_print(\"CSI RX FE STATE Controller %d Enable state 0x%x\\n\", ID,\n\t\t     state->enable);\n\tia_css_print(\"CSI RX FE STATE Controller %d No Of enable lanes 0x%x\\n\", ID,\n\t\t     state->nof_enable_lanes);\n\tia_css_print(\"CSI RX FE STATE Controller %d Error handling 0x%x\\n\", ID,\n\t\t     state->error_handling);\n\tia_css_print(\"CSI RX FE STATE Controller %d Status 0x%x\\n\", ID, state->status);\n\tia_css_print(\"CSI RX FE STATE Controller %d Status Dlane HS 0x%x\\n\", ID,\n\t\t     state->status_dlane_hs);\n\tia_css_print(\"CSI RX FE STATE Controller %d Status Dlane LP 0x%x\\n\", ID,\n\t\t     state->status_dlane_lp);\n\tia_css_print(\"CSI RX FE STATE Controller %d Status term enable LP 0x%x\\n\", ID,\n\t\t     state->clane.termen);\n\tia_css_print(\"CSI RX FE STATE Controller %d Status term settle LP 0x%x\\n\", ID,\n\t\t     state->clane.settle);\n\n\t \n\tfor (i = 0; i < N_CSI_RX_FE_CTRL_DLANES[ID]; i++) {\n\t\tia_css_print(\"CSI RX FE STATE Controller %d DLANE ID %d termen 0x%x\\n\", ID, i,\n\t\t\t     state->dlane[i].termen);\n\t\tia_css_print(\"CSI RX FE STATE Controller %d DLANE ID %d settle 0x%x\\n\", ID, i,\n\t\t\t     state->dlane[i].settle);\n\t}\n}\n\n \nstatic inline void csi_rx_be_ctrl_get_state(\n    const csi_rx_backend_ID_t ID,\n    csi_rx_be_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tstate->enable =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_ENABLE_REG_IDX);\n\n\tstate->status =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_STATUS_REG_IDX);\n\n\tfor (i = 0; i < N_CSI_RX_BE_MIPI_COMP_FMT_REG ; i++) {\n\t\tstate->comp_format_reg[i] =\n\t\t    csi_rx_be_ctrl_reg_load(ID,\n\t\t\t\t\t    _HRT_MIPI_BACKEND_COMP_FORMAT_REG0_IDX + i);\n\t}\n\n\tstate->raw16 =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_RAW16_CONFIG_REG_IDX);\n\n\tstate->raw18 =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_RAW18_CONFIG_REG_IDX);\n\tstate->force_raw8 =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_FORCE_RAW8_REG_IDX);\n\tstate->irq_status =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_IRQ_STATUS_REG_IDX);\n#if 0  \n\t \n\tstate->custom_mode_enable =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_CUST_EN_REG_IDX);\n\n\tstate->custom_mode_data_state =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_CUST_DATA_STATE_REG_IDX);\n\tfor (i = 0; i < N_CSI_RX_BE_MIPI_CUSTOM_PEC ; i++) {\n\t\tstate->pec[i] =\n\t\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_CUST_PIX_EXT_S0P0_REG_IDX + i);\n\t}\n\tstate->custom_mode_valid_eop_config =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_CUST_PIX_VALID_EOP_REG_IDX);\n#endif\n\tstate->global_lut_disregard_reg =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_GLOBAL_LUT_DISREGARD_REG_IDX);\n\tstate->packet_status_stall =\n\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_PKT_STALL_STATUS_REG_IDX);\n\t \n\tfor (i = 0; i < N_SHORT_PACKET_LUT_ENTRIES[ID]; i++) {\n\t\tstate->short_packet_lut_entry[i] =\n\t\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_SP_LUT_ENTRY_0_REG_IDX + i);\n\t}\n\tfor (i = 0; i < N_LONG_PACKET_LUT_ENTRIES[ID]; i++) {\n\t\tstate->long_packet_lut_entry[i] =\n\t\t    csi_rx_be_ctrl_reg_load(ID, _HRT_MIPI_BACKEND_LP_LUT_ENTRY_0_REG_IDX + i);\n\t}\n}\n\n \nstatic inline void csi_rx_be_ctrl_dump_state(\n    const csi_rx_backend_ID_t ID,\n    csi_rx_be_ctrl_state_t *state)\n{\n\tu32 i;\n\n\tia_css_print(\"CSI RX BE STATE Controller %d Enable 0x%x\\n\", ID, state->enable);\n\tia_css_print(\"CSI RX BE STATE Controller %d Status 0x%x\\n\", ID, state->status);\n\n\tfor (i = 0; i < N_CSI_RX_BE_MIPI_COMP_FMT_REG ; i++) {\n\t\tia_css_print(\"CSI RX BE STATE Controller %d comp format reg vc%d value 0x%x\\n\",\n\t\t\t     ID, i, state->status);\n\t}\n\tia_css_print(\"CSI RX BE STATE Controller %d RAW16 0x%x\\n\", ID, state->raw16);\n\tia_css_print(\"CSI RX BE STATE Controller %d RAW18 0x%x\\n\", ID, state->raw18);\n\tia_css_print(\"CSI RX BE STATE Controller %d Force RAW8 0x%x\\n\", ID,\n\t\t     state->force_raw8);\n\tia_css_print(\"CSI RX BE STATE Controller %d IRQ state 0x%x\\n\", ID,\n\t\t     state->irq_status);\n#if 0    \n\tfor (i = 0; i < N_CSI_RX_BE_MIPI_CUSTOM_PEC ; i++) {\n\t\tia_css_print(\"CSI RX BE STATE Controller %d PEC ID %d custom pec 0x%x\\n\", ID, i,\n\t\t\t     state->pec[i]);\n\t}\n#endif\n\tia_css_print(\"CSI RX BE STATE Controller %d Global LUT disregard reg 0x%x\\n\",\n\t\t     ID, state->global_lut_disregard_reg);\n\tia_css_print(\"CSI RX BE STATE Controller %d packet stall reg 0x%x\\n\", ID,\n\t\t     state->packet_status_stall);\n\t \n\tfor (i = 0; i < N_SHORT_PACKET_LUT_ENTRIES[ID]; i++) {\n\t\tia_css_print(\"CSI RX BE STATE Controller ID %d Short packet entry %d short packet lut id 0x%x\\n\",\n\t\t\t     ID, i,\n\t\t\t     state->short_packet_lut_entry[i]);\n\t}\n\tfor (i = 0; i < N_LONG_PACKET_LUT_ENTRIES[ID]; i++) {\n\t\tia_css_print(\"CSI RX BE STATE Controller ID %d Long packet entry %d long packet lut id 0x%x\\n\",\n\t\t\t     ID, i,\n\t\t\t     state->long_packet_lut_entry[i]);\n\t}\n}\n\n \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}