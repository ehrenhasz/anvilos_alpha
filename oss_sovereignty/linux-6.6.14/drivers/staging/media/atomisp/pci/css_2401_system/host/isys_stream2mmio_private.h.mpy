{
  "module_name": "isys_stream2mmio_private.h",
  "hash_id": "c83926882d9daca8da42ac958b22bfdb2c5e516dd34be4ceb2c2f438374e148b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/pci/css_2401_system/host/isys_stream2mmio_private.h",
  "human_readable_source": " \n \n\n#ifndef __ISYS_STREAM2MMIO_PRIVATE_H_INCLUDED__\n#define __ISYS_STREAM2MMIO_PRIVATE_H_INCLUDED__\n\n#include \"isys_stream2mmio_public.h\"\n#include \"device_access.h\"\t \n#include \"assert_support.h\"\t \n#include \"print_support.h\"\t \n\n#define STREAM2MMIO_COMMAND_REG_ID             0\n#define STREAM2MMIO_ACKNOWLEDGE_REG_ID         1\n#define STREAM2MMIO_PIX_WIDTH_ID_REG_ID        2\n#define STREAM2MMIO_START_ADDR_REG_ID          3       \n#define STREAM2MMIO_END_ADDR_REG_ID            4       \n#define STREAM2MMIO_STRIDE_REG_ID              5       \n#define STREAM2MMIO_NUM_ITEMS_REG_ID           6       \n#define STREAM2MMIO_BLOCK_WHEN_NO_CMD_REG_ID   7       \n#define STREAM2MMIO_REGS_PER_SID               8\n\n \n \nSTORAGE_CLASS_STREAM2MMIO_C void stream2mmio_get_state(\n    const stream2mmio_ID_t ID,\n    stream2mmio_state_t *state)\n{\n\tstream2mmio_sid_ID_t i;\n\n\t \n\tfor (i = STREAM2MMIO_SID0_ID; i < N_STREAM2MMIO_SID_PROCS[ID]; i++) {\n\t\tstream2mmio_get_sid_state(ID, i, &state->sid_state[i]);\n\t}\n}\n\n \nSTORAGE_CLASS_STREAM2MMIO_C void stream2mmio_get_sid_state(\n    const stream2mmio_ID_t ID,\n    const stream2mmio_sid_ID_t sid_id,\n    stream2mmio_sid_state_t\t*state)\n{\n\tstate->rcv_ack =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_ACKNOWLEDGE_REG_ID);\n\n\tstate->pix_width_id =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_PIX_WIDTH_ID_REG_ID);\n\n\tstate->start_addr =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_START_ADDR_REG_ID);\n\n\tstate->end_addr =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_END_ADDR_REG_ID);\n\n\tstate->strides =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_STRIDE_REG_ID);\n\n\tstate->num_items =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_NUM_ITEMS_REG_ID);\n\n\tstate->block_when_no_cmd =\n\t    stream2mmio_reg_load(ID, sid_id, STREAM2MMIO_BLOCK_WHEN_NO_CMD_REG_ID);\n}\n\n \nSTORAGE_CLASS_STREAM2MMIO_C void stream2mmio_print_sid_state(\n    stream2mmio_sid_state_t\t*state)\n{\n\tia_css_print(\"\\t \\t Receive acks 0x%x\\n\", state->rcv_ack);\n\tia_css_print(\"\\t \\t Pixel width 0x%x\\n\", state->pix_width_id);\n\tia_css_print(\"\\t \\t Startaddr 0x%x\\n\", state->start_addr);\n\tia_css_print(\"\\t \\t Endaddr 0x%x\\n\", state->end_addr);\n\tia_css_print(\"\\t \\t Strides 0x%x\\n\", state->strides);\n\tia_css_print(\"\\t \\t Num Items 0x%x\\n\", state->num_items);\n\tia_css_print(\"\\t \\t block when no cmd 0x%x\\n\", state->block_when_no_cmd);\n}\n\n \nSTORAGE_CLASS_STREAM2MMIO_C void stream2mmio_dump_state(\n    const stream2mmio_ID_t ID,\n    stream2mmio_state_t *state)\n{\n\tstream2mmio_sid_ID_t i;\n\n\t \n\tfor (i = STREAM2MMIO_SID0_ID; i < N_STREAM2MMIO_SID_PROCS[ID]; i++) {\n\t\tia_css_print(\"StREAM2MMIO ID %d SID %d\\n\", ID, i);\n\t\tstream2mmio_print_sid_state(&state->sid_state[i]);\n\t}\n}\n\n \n\n \n \nSTORAGE_CLASS_STREAM2MMIO_C hrt_data stream2mmio_reg_load(\n    const stream2mmio_ID_t ID,\n    const stream2mmio_sid_ID_t sid_id,\n    const uint32_t reg_idx)\n{\n\tu32 reg_bank_offset;\n\n\tassert(ID < N_STREAM2MMIO_ID);\n\n\treg_bank_offset = STREAM2MMIO_REGS_PER_SID * sid_id;\n\treturn ia_css_device_load_uint32(STREAM2MMIO_CTRL_BASE[ID] +\n\t\t\t\t\t (reg_bank_offset + reg_idx) * sizeof(hrt_data));\n}\n\n \nSTORAGE_CLASS_STREAM2MMIO_C void stream2mmio_reg_store(\n    const stream2mmio_ID_t ID,\n    const hrt_address reg,\n    const hrt_data value)\n{\n\tassert(ID < N_STREAM2MMIO_ID);\n\tassert(STREAM2MMIO_CTRL_BASE[ID] != (hrt_address)-1);\n\n\tia_css_device_store_uint32(STREAM2MMIO_CTRL_BASE[ID] +\n\t\t\t\t   reg * sizeof(hrt_data), value);\n}\n\n \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}