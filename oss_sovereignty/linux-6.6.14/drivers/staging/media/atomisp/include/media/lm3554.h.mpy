{
  "module_name": "lm3554.h",
  "hash_id": "b75cd3ebe6e85ca208f7702ca33f3b9f9b83e3f18ce3640ea36d8ef015b01066",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/media/atomisp/include/media/lm3554.h",
  "human_readable_source": " \n \n#ifndef _LM3554_H_\n#define _LM3554_H_\n\n#include <linux/gpio/consumer.h>\n#include <linux/videodev2.h>\n#include <media/v4l2-subdev.h>\n\n#define LM3554_ID      3554\n\n#define\tv4l2_queryctrl_entry_integer(_id, _name,\\\n\t\t_minimum, _maximum, _step, \\\n\t\t_default_value, _flags)\t\\\n\t{\\\n\t\t.id = (_id), \\\n\t\t.type = V4L2_CTRL_TYPE_INTEGER, \\\n\t\t.name = _name, \\\n\t\t.minimum = (_minimum), \\\n\t\t.maximum = (_maximum), \\\n\t\t.step = (_step), \\\n\t\t.default_value = (_default_value),\\\n\t\t.flags = (_flags),\\\n\t}\n#define\tv4l2_queryctrl_entry_boolean(_id, _name,\\\n\t\t_default_value, _flags)\t\\\n\t{\\\n\t\t.id = (_id), \\\n\t\t.type = V4L2_CTRL_TYPE_BOOLEAN, \\\n\t\t.name = _name, \\\n\t\t.minimum = 0, \\\n\t\t.maximum = 1, \\\n\t\t.step = 1, \\\n\t\t.default_value = (_default_value),\\\n\t\t.flags = (_flags),\\\n\t}\n\n#define\ts_ctrl_id_entry_integer(_id, _name, \\\n\t\t_minimum, _maximum, _step, \\\n\t\t_default_value, _flags, \\\n\t\t_s_ctrl, _g_ctrl)\t\\\n\t{\\\n\t\t.qc = v4l2_queryctrl_entry_integer(_id, _name,\\\n\t\t\t\t_minimum, _maximum, _step,\\\n\t\t\t\t_default_value, _flags), \\\n\t\t.s_ctrl = _s_ctrl, \\\n\t\t.g_ctrl = _g_ctrl, \\\n\t}\n\n#define\ts_ctrl_id_entry_boolean(_id, _name, \\\n\t\t_default_value, _flags, \\\n\t\t_s_ctrl, _g_ctrl)\t\\\n\t{\\\n\t\t.qc = v4l2_queryctrl_entry_boolean(_id, _name,\\\n\t\t\t\t_default_value, _flags), \\\n\t\t.s_ctrl = _s_ctrl, \\\n\t\t.g_ctrl = _g_ctrl, \\\n\t}\n\n \n#define LM3554_DEFAULT_TIMEOUT          512U\n#define LM3554_MIN_TIMEOUT              32U\n#define LM3554_MAX_TIMEOUT              1024U\n#define LM3554_TIMEOUT_STEPSIZE         32U\n\n \n#define LM3554_MODE_SHUTDOWN            0\n#define LM3554_MODE_INDICATOR           1\n#define LM3554_MODE_TORCH               2\n#define LM3554_MODE_FLASH               3\n\n \n#define LM3554_TIMER_DELAY\t\t5\n\n \n#define LM3554_MIN_PERCENT                   0U\n#define LM3554_MAX_PERCENT                   100U\n#define LM3554_CLAMP_PERCENTAGE(val) \\\n\tclamp(val, LM3554_MIN_PERCENT, LM3554_MAX_PERCENT)\n\n#define LM3554_VALUE_TO_PERCENT(v, step)     (((((unsigned long)(v)) * (step)) + 50) / 100)\n#define LM3554_PERCENT_TO_VALUE(p, step)     (((((unsigned long)(p)) * 100) + (step >> 1)) / (step))\n\n \n#define LM3554_FLASH_MAX_LVL   0x0F  \n\n \n#define LM3554_FLASH_STEP\t\\\n\t((100ul * (LM3554_MAX_PERCENT) + ((LM3554_FLASH_MAX_LVL) >> 1)) / ((LM3554_FLASH_MAX_LVL)))\n#define LM3554_FLASH_DEFAULT_BRIGHTNESS \\\n\tLM3554_VALUE_TO_PERCENT(13, LM3554_FLASH_STEP)\n\n \n#define LM3554_TORCH_STEP                    1250\n#define LM3554_TORCH_DEFAULT_BRIGHTNESS \\\n\tLM3554_VALUE_TO_PERCENT(2, LM3554_TORCH_STEP)\n\n \n#define LM3554_INDICATOR_STEP                2500\n#define LM3554_INDICATOR_DEFAULT_BRIGHTNESS \\\n\tLM3554_VALUE_TO_PERCENT(1, LM3554_INDICATOR_STEP)\n\n \nstruct lm3554_platform_data {\n\tstruct gpio_desc *gpio_torch;\n\tstruct gpio_desc *gpio_strobe;\n\tstruct gpio_desc *gpio_reset;\n\n\tunsigned int current_limit;\n\tunsigned int envm_tx2;\n\tunsigned int tx2_polarity;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}