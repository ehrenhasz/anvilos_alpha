{
  "module_name": "emxx_udc.h",
  "hash_id": "349c80b5c7164b43f82ca45f334efcbaa0fc80c011a4c494cd8f2f5e2e9e2e12",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/emxx_udc/emxx_udc.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_EMXX_H\n#define _LINUX_EMXX_H\n\n \n\n \n#define\tUSE_DMA\t1\n#define USE_SUSPEND_WAIT\t1\n\n \n#define\tVBUS_VALUE\t\tGPIO_VBUS\n\n \n#define GPIO_VBUS 0  \n#define INT_VBUS 0  \n\n \n\n \n#define VBUS_CHATTERING_MDELAY\t\t1\n \n#define DMA_DISABLE_TIME\t\t10\n\n \n#define NUM_ENDPOINTS\t\t14\t\t \n#define REG_EP_NUM\t\t15\t\t \n#define DMA_MAX_COUNT\t\t256\t\t \n\n#define EPC_RST_DISABLE_TIME\t\t1\t \n#define EPC_DIRPD_DISABLE_TIME\t\t1\t \n#define EPC_PLL_LOCK_COUNT\t\t1000\t \n#define IN_DATA_EMPTY_COUNT\t\t1000\t \n\n#define CHATGER_TIME\t\t\t700\t \n#define USB_SUSPEND_TIME\t\t2000\t \n\n \n#define U2F_ENABLE\t\t1\n#define U2F_DISABLE\t\t0\n\n#define TEST_FORCE_ENABLE\t\t(BIT(18) | BIT(16))\n\n#define INT_SEL\t\t\t\tBIT(10)\n#define CONSTFS\t\t\t\tBIT(9)\n#define SOF_RCV\t\t\t\tBIT(8)\n#define RSUM_IN\t\t\t\tBIT(7)\n#define SUSPEND\t\t\t\tBIT(6)\n#define CONF\t\t\t\tBIT(5)\n#define DEFAULT\t\t\t\tBIT(4)\n#define CONNECTB\t\t\tBIT(3)\n#define PUE2\t\t\t\tBIT(2)\n\n#define MAX_TEST_MODE_NUM\t\t0x05\n#define TEST_MODE_SHIFT\t\t\t16\n\n \n#define SPEED_MODE\t\t\tBIT(6)\n#define HIGH_SPEED\t\t\tBIT(6)\n\n#define CONF\t\t\t\tBIT(5)\n#define DEFAULT\t\t\t\tBIT(4)\n#define USB_RST\t\t\t\tBIT(3)\n#define SPND_OUT\t\t\tBIT(2)\n#define RSUM_OUT\t\t\tBIT(1)\n\n \n#define USB_ADDR\t\t\t0x007F0000\n#define SOF_STATUS\t\t\tBIT(15)\n#define UFRAME\t\t\t\t(BIT(14) | BIT(13) | BIT(12))\n#define FRAME\t\t\t\t0x000007FF\n\n#define USB_ADRS_SHIFT\t\t\t16\n\n \n#define SQUSET\t\t\t\t(BIT(7) | BIT(6) | BIT(5) | BIT(4))\n\n#define USB_SQUSET\t\t\t(BIT(6) | BIT(5) | BIT(4))\n\n \n#define FORCEHS\t\t\t\tBIT(2)\n#define CS_TESTMODEEN\t\t\tBIT(1)\n#define LOOPBACK\t\t\tBIT(0)\n\n \n \n\n \n#define EPN_INT\t\t\t\t0x00FFFF00\n#define EP15_INT\t\t\tBIT(23)\n#define EP14_INT\t\t\tBIT(22)\n#define EP13_INT\t\t\tBIT(21)\n#define EP12_INT\t\t\tBIT(20)\n#define EP11_INT\t\t\tBIT(19)\n#define EP10_INT\t\t\tBIT(18)\n#define EP9_INT\t\t\t\tBIT(17)\n#define EP8_INT\t\t\t\tBIT(16)\n#define EP7_INT\t\t\t\tBIT(15)\n#define EP6_INT\t\t\t\tBIT(14)\n#define EP5_INT\t\t\t\tBIT(13)\n#define EP4_INT\t\t\t\tBIT(12)\n#define EP3_INT\t\t\t\tBIT(11)\n#define EP2_INT\t\t\t\tBIT(10)\n#define EP1_INT\t\t\t\tBIT(9)\n#define EP0_INT\t\t\t\tBIT(8)\n#define SPEED_MODE_INT\t\t\tBIT(6)\n#define SOF_ERROR_INT\t\t\tBIT(5)\n#define SOF_INT\t\t\t\tBIT(4)\n#define USB_RST_INT\t\t\tBIT(3)\n#define SPND_INT\t\t\tBIT(2)\n#define RSUM_INT\t\t\tBIT(1)\n\n#define USB_INT_STA_RW\t\t\t0x7E\n\n \n#define EP15_0_EN\t\t\t0x00FFFF00\n#define EP15_EN\t\t\t\tBIT(23)\n#define EP14_EN\t\t\t\tBIT(22)\n#define EP13_EN\t\t\t\tBIT(21)\n#define EP12_EN\t\t\t\tBIT(20)\n#define EP11_EN\t\t\t\tBIT(19)\n#define EP10_EN\t\t\t\tBIT(18)\n#define EP9_EN\t\t\t\tBIT(17)\n#define EP8_EN\t\t\t\tBIT(16)\n#define EP7_EN\t\t\t\tBIT(15)\n#define EP6_EN\t\t\t\tBIT(14)\n#define EP5_EN\t\t\t\tBIT(13)\n#define EP4_EN\t\t\t\tBIT(12)\n#define EP3_EN\t\t\t\tBIT(11)\n#define EP2_EN\t\t\t\tBIT(10)\n#define EP1_EN\t\t\t\tBIT(9)\n#define EP0_EN\t\t\t\tBIT(8)\n#define SPEED_MODE_EN\t\t\tBIT(6)\n#define SOF_ERROR_EN\t\t\tBIT(5)\n#define SOF_EN\t\t\t\tBIT(4)\n#define USB_RST_EN\t\t\tBIT(3)\n#define SPND_EN\t\t\t\tBIT(2)\n#define RSUM_EN\t\t\t\tBIT(1)\n\n#define USB_INT_EN_BIT\t\\\n\t(EP0_EN | SPEED_MODE_EN | USB_RST_EN | SPND_EN | RSUM_EN)\n\n \n#define EP0_STGSEL\t\t\tBIT(18)\n#define EP0_OVERSEL\t\t\tBIT(17)\n#define EP0_AUTO\t\t\tBIT(16)\n#define EP0_PIDCLR\t\t\tBIT(9)\n#define EP0_BCLR\t\t\tBIT(8)\n#define EP0_DEND\t\t\tBIT(7)\n#define EP0_DW\t\t\t\t(BIT(6) | BIT(5))\n#define EP0_DW4\t\t\t\t0\n#define EP0_DW3\t\t\t\t(BIT(6) | BIT(5))\n#define EP0_DW2\t\t\t\tBIT(6)\n#define EP0_DW1\t\t\t\tBIT(5)\n\n#define EP0_INAK_EN\t\t\tBIT(4)\n#define EP0_PERR_NAK_CLR\t\tBIT(3)\n#define EP0_STL\t\t\t\tBIT(2)\n#define EP0_INAK\t\t\tBIT(1)\n#define EP0_ONAK\t\t\tBIT(0)\n\n \n#define EP0_PID\t\t\t\tBIT(18)\n#define EP0_PERR_NAK\t\t\tBIT(17)\n#define EP0_PERR_NAK_INT\t\tBIT(16)\n#define EP0_OUT_NAK_INT\t\t\tBIT(15)\n#define EP0_OUT_NULL\t\t\tBIT(14)\n#define EP0_OUT_FULL\t\t\tBIT(13)\n#define EP0_OUT_EMPTY\t\t\tBIT(12)\n#define EP0_IN_NAK_INT\t\t\tBIT(11)\n#define EP0_IN_DATA\t\t\tBIT(10)\n#define EP0_IN_FULL\t\t\tBIT(9)\n#define EP0_IN_EMPTY\t\t\tBIT(8)\n#define EP0_OUT_NULL_INT\t\tBIT(7)\n#define EP0_OUT_OR_INT\t\t\tBIT(6)\n#define EP0_OUT_INT\t\t\tBIT(5)\n#define EP0_IN_INT\t\t\tBIT(4)\n#define EP0_STALL_INT\t\t\tBIT(3)\n#define STG_END_INT\t\t\tBIT(2)\n#define STG_START_INT\t\t\tBIT(1)\n#define SETUP_INT\t\t\tBIT(0)\n\n#define EP0_STATUS_RW_BIT\t(BIT(16) | BIT(15) | BIT(11) | 0xFF)\n\n \n#define EP0_PERR_NAK_EN\t\t\tBIT(16)\n#define EP0_OUT_NAK_EN\t\t\tBIT(15)\n\n#define EP0_IN_NAK_EN\t\t\tBIT(11)\n\n#define EP0_OUT_NULL_EN\t\t\tBIT(7)\n#define EP0_OUT_OR_EN\t\t\tBIT(6)\n#define EP0_OUT_EN\t\t\tBIT(5)\n#define EP0_IN_EN\t\t\tBIT(4)\n#define EP0_STALL_EN\t\t\tBIT(3)\n#define STG_END_EN\t\t\tBIT(2)\n#define STG_START_EN\t\t\tBIT(1)\n#define SETUP_EN\t\t\tBIT(0)\n\n#define EP0_INT_EN_BIT\t\\\n\t(EP0_OUT_OR_EN | EP0_OUT_EN | EP0_IN_EN | STG_END_EN | SETUP_EN)\n\n \n#define EP0_LDATA\t\t\t0x0000007F\n\n \n \n\n \n#define EPN_EN\t\t\t\tBIT(31)\n#define EPN_BUF_TYPE\t\t\tBIT(30)\n#define EPN_BUF_SINGLE\t\t\tBIT(30)\n\n#define EPN_DIR0\t\t\tBIT(26)\n#define EPN_MODE\t\t\t(BIT(25) | BIT(24))\n#define EPN_BULK\t\t\t0\n#define EPN_INTERRUPT\t\t\tBIT(24)\n#define EPN_ISO\t\t\t\tBIT(25)\n\n#define EPN_OVERSEL\t\t\tBIT(17)\n#define EPN_AUTO\t\t\tBIT(16)\n\n#define EPN_IPIDCLR\t\t\tBIT(11)\n#define EPN_OPIDCLR\t\t\tBIT(10)\n#define EPN_BCLR\t\t\tBIT(9)\n#define EPN_CBCLR\t\t\tBIT(8)\n#define EPN_DEND\t\t\tBIT(7)\n#define EPN_DW\t\t\t\t(BIT(6) | BIT(5))\n#define EPN_DW4\t\t\t\t0\n#define EPN_DW3\t\t\t\t(BIT(6) | BIT(5))\n#define EPN_DW2\t\t\t\tBIT(6)\n#define EPN_DW1\t\t\t\tBIT(5)\n\n#define EPN_OSTL_EN\t\t\tBIT(4)\n#define EPN_ISTL\t\t\tBIT(3)\n#define EPN_OSTL\t\t\tBIT(2)\n\n#define EPN_ONAK\t\t\tBIT(0)\n\n \n#define EPN_ISO_PIDERR\t\t\tBIT(29)\t\t \n#define EPN_OPID\t\t\tBIT(28)\t\t \n#define EPN_OUT_NOTKN\t\t\tBIT(27)\t\t \n#define EPN_ISO_OR\t\t\tBIT(26)\t\t \n\n#define EPN_ISO_CRC\t\t\tBIT(24)\t\t \n#define EPN_OUT_END_INT\t\t\tBIT(23)\t\t \n#define EPN_OUT_OR_INT\t\t\tBIT(22)\t\t \n#define EPN_OUT_NAK_ERR_INT\t\tBIT(21)\t\t \n#define EPN_OUT_STALL_INT\t\tBIT(20)\t\t \n#define EPN_OUT_INT\t\t\tBIT(19)\t\t \n#define EPN_OUT_NULL_INT\t\tBIT(18)\t\t \n#define EPN_OUT_FULL\t\t\tBIT(17)\t\t \n#define EPN_OUT_EMPTY\t\t\tBIT(16)\t\t \n\n#define EPN_IPID\t\t\tBIT(10)\t\t \n#define EPN_IN_NOTKN\t\t\tBIT(9)\t\t \n#define EPN_ISO_UR\t\t\tBIT(8)\t\t \n#define EPN_IN_END_INT\t\t\tBIT(7)\t\t \n\n#define EPN_IN_NAK_ERR_INT\t\tBIT(5)\t\t \n#define EPN_IN_STALL_INT\t\tBIT(4)\t\t \n#define EPN_IN_INT\t\t\tBIT(3)\t\t \n#define EPN_IN_DATA\t\t\tBIT(2)\t\t \n#define EPN_IN_FULL\t\t\tBIT(1)\t\t \n#define EPN_IN_EMPTY\t\t\tBIT(0)\t\t \n\n#define EPN_INT_EN\t\\\n\t(EPN_OUT_END_INT | EPN_OUT_INT | EPN_IN_END_INT | EPN_IN_INT)\n\n \n#define EPN_OUT_END_EN\t\t\tBIT(23)\t\t \n#define EPN_OUT_OR_EN\t\t\tBIT(22)\t\t \n#define EPN_OUT_NAK_ERR_EN\t\tBIT(21)\t\t \n#define EPN_OUT_STALL_EN\t\tBIT(20)\t\t \n#define EPN_OUT_EN\t\t\tBIT(19)\t\t \n#define EPN_OUT_NULL_EN\t\t\tBIT(18)\t\t \n\n#define EPN_IN_END_EN\t\t\tBIT(7)\t\t \n\n#define EPN_IN_NAK_ERR_EN\t\tBIT(5)\t\t \n#define EPN_IN_STALL_EN\t\t\tBIT(4)\t\t \n#define EPN_IN_EN\t\t\tBIT(3)\t\t \n\n \n#define EPN_STOP_MODE\t\t\tBIT(11)\n#define EPN_DEND_SET\t\t\tBIT(10)\n#define EPN_BURST_SET\t\t\tBIT(9)\n#define EPN_STOP_SET\t\t\tBIT(8)\n\n#define EPN_DMA_EN\t\t\tBIT(4)\n\n#define EPN_DMAMODE0\t\t\tBIT(0)\n\n \n#define EPN_BASEAD\t\t\t0x1FFF0000\n#define EPN_MPKT\t\t\t0x000007FF\n\n \n#define EPN_DMACNT\t\t\t0x01FF0000\n#define EPN_LDATA\t\t\t0x000007FF\n\n \n \n\n \n#define WAIT_MODE\t\t\tBIT(0)\n\n \n#define ARBITER_CTR\t\t\tBIT(31)\t\t \n#define MCYCLE_RST\t\t\tBIT(12)\t\t \n\n#define ENDIAN_CTR\t\t\t(BIT(9) | BIT(8))\t \n#define ENDIAN_BYTE_SWAP\t\tBIT(9)\n#define ENDIAN_HALF_WORD_SWAP\t\tENDIAN_CTR\n\n#define HBUSREQ_MODE\t\t\tBIT(5)\t\t \n#define HTRANS_MODE\t\t\tBIT(4)\t\t \n\n#define WBURST_TYPE\t\t\tBIT(2)\t\t \n#define BURST_TYPE\t\t\t(BIT(1) | BIT(0))\t \n#define BURST_MAX_16\t\t\t0\n#define BURST_MAX_8\t\t\tBIT(0)\n#define BURST_MAX_4\t\t\tBIT(1)\n#define BURST_SINGLE\t\t\tBURST_TYPE\n\n \n#define DMA_ENDINT\t\t\t0xFFFE0000\t \n\n#define AHB_VBUS_INT\t\t\tBIT(13)\t\t \n\n#define MBUS_ERRINT\t\t\tBIT(6)\t\t \n\n#define SBUS_ERRINT0\t\t\tBIT(4)\t\t \n#define ERR_MASTER\t\t\t0x0000000F\t \n\n \n#define DMA_ENDINTEN\t\t\t0xFFFE0000\t \n\n#define VBUS_INTEN\t\t\tBIT(13)\t\t \n\n#define MBUS_ERRINTEN\t\t\tBIT(6)\t\t \n\n#define SBUS_ERRINT0EN\t\t\tBIT(4)\t\t \n\n \n#define DIRPD\t\t\t\tBIT(12)\t\t \n\n#define VBUS_LEVEL\t\t\tBIT(8)\t\t \n\n#define PLL_RESUME\t\t\tBIT(5)\t\t \n#define PLL_LOCK\t\t\tBIT(4)\t\t \n\n#define EPC_RST\t\t\t\tBIT(0)\t\t \n\n \n#define LINESTATE\t\t\t(BIT(9) | BIT(8))\t \n#define DM_LEVEL\t\t\tBIT(9)\t\t \n#define DP_LEVEL\t\t\tBIT(8)\t\t \n\n#define PHY_TST\t\t\t\tBIT(1)\t\t \n#define PHY_TSTCLK\t\t\tBIT(0)\t\t \n\n \n#define AHBB_VER\t\t\t0x00FF0000\t \n#define EPC_VER\t\t\t\t0x0000FF00\t \n#define SS_VER\t\t\t\t0x000000FF\t \n\n \n#define EP_AVAILABLE\t\t\t0xFFFF0000\t \n#define DMA_AVAILABLE\t\t\t0x0000FFFF\t \n\n \n#define DCR1_EPN_DMACNT\t\t\t0x00FF0000\t \n\n#define DCR1_EPN_DIR0\t\t\tBIT(1)\t\t \n#define DCR1_EPN_REQEN\t\t\tBIT(0)\t\t \n\n \n#define DCR2_EPN_LMPKT\t\t\t0x07FF0000\t \n\n#define DCR2_EPN_MPKT\t\t\t0x000007FF\t \n\n \n#define EPN_TADR\t\t\t0xFFFFFFFF\t \n\n \n \n \nstruct ep_regs {\n\tu32 EP_CONTROL;\t\t\t \n\tu32 EP_STATUS;\t\t\t \n\tu32 EP_INT_ENA;\t\t\t \n\tu32 EP_DMA_CTRL;\t\t \n\tu32 EP_PCKT_ADRS;\t\t \n\tu32 EP_LEN_DCNT;\t\t \n\tu32 EP_READ;\t\t\t \n\tu32 EP_WRITE;\t\t\t \n};\n\n \nstruct ep_dcr {\n\tu32 EP_DCR1;\t\t\t \n\tu32 EP_DCR2;\t\t\t \n\tu32 EP_TADR;\t\t\t \n\tu32 Reserved;\t\t\t \n};\n\n \nstruct fc_regs {\n\tu32 USB_CONTROL;\t\t \n\tu32 USB_STATUS;\t\t\t \n\tu32 USB_ADDRESS;\t\t \n\tu32 UTMI_CHARACTER_1;\t\t \n\tu32 TEST_CONTROL;\t\t \n\tu32 reserved_14;\t\t \n\tu32 SETUP_DATA0;\t\t \n\tu32 SETUP_DATA1;\t\t \n\tu32 USB_INT_STA;\t\t \n\tu32 USB_INT_ENA;\t\t \n\tu32 EP0_CONTROL;\t\t \n\tu32 EP0_STATUS;\t\t\t \n\tu32 EP0_INT_ENA;\t\t \n\tu32 EP0_LENGTH;\t\t\t \n\tu32 EP0_READ;\t\t\t \n\tu32 EP0_WRITE;\t\t\t \n\n\tstruct ep_regs EP_REGS[REG_EP_NUM];\t \n\n\tu8 reserved_220[0x1000 - 0x220];\t \n\n\tu32 AHBSCTR;\t\t\t \n\tu32 AHBMCTR;\t\t\t \n\tu32 AHBBINT;\t\t\t \n\tu32 AHBBINTEN;\t\t\t \n\tu32 EPCTR;\t\t\t \n\tu32 USBF_EPTEST;\t\t \n\n\tu8 reserved_1018[0x20 - 0x18];\t \n\n\tu32 USBSSVER;\t\t\t \n\tu32 USBSSCONF;\t\t\t \n\n\tu8 reserved_1028[0x110 - 0x28];\t \n\n\tstruct ep_dcr EP_DCR[REG_EP_NUM];\t \n\n\tu8 reserved_1200[0x1000 - 0x200];\t \n} __aligned(32);\n\n#define EP0_PACKETSIZE\t\t\t64\n#define EP_PACKETSIZE\t\t\t1024\n\n \n#define D_RAM_SIZE_CTRL\t\t\t64\n\n \n#define D_FS_RAM_SIZE_BULK\t\t64\n#define D_HS_RAM_SIZE_BULK\t\t512\n\nstruct nbu2ss_udc;\n\nenum ep0_state {\n\tEP0_IDLE,\n\tEP0_IN_DATA_PHASE,\n\tEP0_OUT_DATA_PHASE,\n\tEP0_IN_STATUS_PHASE,\n\tEP0_OUT_STATUS_PAHSE,\n\tEP0_END_XFER,\n\tEP0_SUSPEND,\n\tEP0_STALL,\n};\n\nstruct nbu2ss_req {\n\tstruct usb_request\t\treq;\n\tstruct list_head\t\tqueue;\n\n\tu32\t\t\tdiv_len;\n\tbool\t\tdma_flag;\n\tbool\t\tzero;\n\n\tbool\t\tunaligned;\n\n\tunsigned\t\t\tmapped:1;\n};\n\nstruct nbu2ss_ep {\n\tstruct usb_ep\t\t\tep;\n\tstruct list_head\t\tqueue;\n\n\tstruct nbu2ss_udc\t\t*udc;\n\n\tconst struct usb_endpoint_descriptor *desc;\n\n\tu8\t\tepnum;\n\tu8\t\tdirect;\n\tu8\t\tep_type;\n\n\tunsigned\t\twedged:1;\n\tunsigned\t\thalted:1;\n\tunsigned\t\tstalled:1;\n\n\tu8\t\t*virt_buf;\n\tdma_addr_t\tphys_buf;\n};\n\nstruct nbu2ss_udc {\n\tstruct usb_gadget gadget;\n\tstruct usb_gadget_driver *driver;\n\tstruct platform_device *pdev;\n\tstruct device *dev;\n\tspinlock_t lock;  \n\tstruct completion\t\t*pdone;\n\n\tenum ep0_state\t\t\tep0state;\n\tenum usb_device_state\tdevstate;\n\tstruct usb_ctrlrequest\tctrl;\n\tstruct nbu2ss_req\t\tep0_req;\n\tu8\t\tep0_buf[EP0_PACKETSIZE];\n\n\tstruct nbu2ss_ep\tep[NUM_ENDPOINTS];\n\n\tunsigned\t\tsoftconnect:1;\n\tunsigned\t\tvbus_active:1;\n\tunsigned\t\tlinux_suspended:1;\n\tunsigned\t\tlinux_resume:1;\n\tunsigned\t\tusb_suspended:1;\n\tunsigned\t\tremote_wakeup:1;\n\tunsigned\t\tudc_enabled:1;\n\n\tunsigned int\t\tmA;\n\n\tu32\t\tcurr_config;\t \n\n\tstruct fc_regs __iomem *p_regs;\n};\n\n \nunion usb_reg_access {\n\tstruct {\n\t\tunsigned char\tDATA[4];\n\t} byte;\n\tunsigned int\t\tdw;\n};\n\n \n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}