{
  "module_name": "gdm_mux.h",
  "hash_id": "97fbf045ac3d0b97c5149a46b367d0d3e74a9bbac764845fa2a41cae268f6db4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/gdm724x/gdm_mux.h",
  "human_readable_source": " \n \n\n#ifndef _GDM_MUX_H_\n#define _GDM_MUX_H_\n\n#include <linux/types.h>\n#include <linux/usb.h>\n#include <linux/list.h>\n\n#include \"gdm_tty.h\"\n\n#define PM_NORMAL 0\n#define PM_SUSPEND 1\n\n#define USB_RT_ACM          (USB_TYPE_CLASS | USB_RECIP_INTERFACE)\n\n#define START_FLAG 0xA512485A\n#define MUX_HEADER_SIZE 14\n#define MUX_TX_MAX_SIZE (1024 * 10)\n#define MUX_RX_MAX_SIZE (1024 * 30)\n#define AT_PKT_TYPE 0xF011\n#define DM_PKT_TYPE 0xF010\n\n#define RETRY_TIMER 30  \n\nstruct mux_pkt_header {\n\t__le32 start_flag;\n\t__le32 seq_num;\n\t__le32 payload_size;\n\t__le16 packet_type;\n\tunsigned char data[];\n};\n\nstruct mux_tx {\n\tstruct urb *urb;\n\tu8 *buf;\n\tint  len;\n\tvoid (*callback)(void *cb_data);\n\tvoid *cb_data;\n};\n\nstruct mux_rx {\n\tstruct list_head free_list;\n\tstruct list_head rx_submit_list;\n\tstruct list_head to_host_list;\n\tstruct urb *urb;\n\tu8 *buf;\n\tvoid *mux_dev;\n\tu32 offset;\n\tu32 len;\n\tint (*callback)(void *data,\n\t\t\tint len,\n\t\t\tint tty_index,\n\t\t\tstruct tty_dev *tty_dev,\n\t\t\tint complete);\n};\n\nstruct rx_cxt {\n\tstruct list_head to_host_list;\n\tstruct list_head rx_submit_list;\n\tstruct list_head rx_free_list;\n\tspinlock_t to_host_lock;\n\tspinlock_t submit_list_lock;\n\tspinlock_t free_list_lock;\n};\n\nstruct mux_dev {\n\tstruct usb_device *usbdev;\n\tstruct usb_interface *control_intf;\n\tstruct usb_interface *data_intf;\n\tstruct rx_cxt\trx;\n\tstruct delayed_work work_rx;\n\tstruct usb_interface *intf;\n\tint usb_state;\n\tint (*rx_cb)(void *data,\n\t\t     int len,\n\t\t     int tty_index,\n\t\t     struct tty_dev *tty_dev,\n\t\t     int complete);\n\tspinlock_t write_lock;\n\tstruct tty_dev *tty_dev;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}