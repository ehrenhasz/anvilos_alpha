{
  "module_name": "qlge.h",
  "hash_id": "84c447f75b2f62410982dcee26e8576e917e1cd98a31173af41373e8b28fd1a8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/qlge/qlge.h",
  "human_readable_source": " \n \n#ifndef _QLGE_H_\n#define _QLGE_H_\n\n#include <linux/interrupt.h>\n#include <linux/pci.h>\n#include <linux/netdevice.h>\n#include <linux/rtnetlink.h>\n#include <linux/if_vlan.h>\n\n \n#define DRV_NAME\t\"qlge\"\n#define DRV_STRING\t\"QLogic 10 Gigabit PCI-E Ethernet Driver \"\n#define DRV_VERSION\t\"1.00.00.35\"\n\n#define WQ_ADDR_ALIGN\t0x3\t \n\n#define QLGE_VENDOR_ID    0x1077\n#define QLGE_DEVICE_ID_8012\t0x8012\n#define QLGE_DEVICE_ID_8000\t0x8000\n#define QLGE_MEZZ_SSYS_ID_068\t0x0068\n#define QLGE_MEZZ_SSYS_ID_180\t0x0180\n#define MAX_CPUS 8\n#define MAX_TX_RINGS MAX_CPUS\n#define MAX_RX_RINGS ((MAX_CPUS * 2) + 1)\n\n#define NUM_TX_RING_ENTRIES\t256\n#define NUM_RX_RING_ENTRIES\t256\n\n \n#define QLGE_BQ_SHIFT 9\n#define QLGE_BQ_LEN BIT(QLGE_BQ_SHIFT)\n#define QLGE_BQ_SIZE (QLGE_BQ_LEN * sizeof(__le64))\n\n#define DB_PAGE_SIZE 4096\n\n \n#define MAX_DB_PAGES_PER_BQ(x) \\\n\t\t(((x * sizeof(u64)) / DB_PAGE_SIZE) + \\\n\t\t(((x * sizeof(u64)) % DB_PAGE_SIZE) ? 1 : 0))\n\n#define RX_RING_SHADOW_SPACE\t(sizeof(u64) + \\\n\t\tMAX_DB_PAGES_PER_BQ(QLGE_BQ_LEN) * sizeof(u64) + \\\n\t\tMAX_DB_PAGES_PER_BQ(QLGE_BQ_LEN) * sizeof(u64))\n#define LARGE_BUFFER_MAX_SIZE 8192\n#define LARGE_BUFFER_MIN_SIZE 2048\n\n#define MAX_CQ 128\n#define DFLT_COALESCE_WAIT 100\t \n#define MAX_INTER_FRAME_WAIT 10\t \n#define DFLT_INTER_FRAME_WAIT (MAX_INTER_FRAME_WAIT / 2)\n#define UDELAY_COUNT 3\n#define UDELAY_DELAY 100\n\n#define TX_DESC_PER_IOCB 8\n\n#if ((MAX_SKB_FRAGS - TX_DESC_PER_IOCB) + 2) > 0\n#define TX_DESC_PER_OAL ((MAX_SKB_FRAGS - TX_DESC_PER_IOCB) + 2)\n#else  \n#define TX_DESC_PER_OAL 0\n#endif\n\n \n#define LSW(x)  ((u16)(x))\n#define MSW(x)  ((u16)((u32)(x) >> 16))\n#define LSD(x)  ((u32)((u64)(x)))\n#define MSD(x)  ((u32)((((u64)(x)) >> 32)))\n\n \n#define QLGE_FIT16(value) ((u16)(value))\n\n \nenum {\n\tMPI_TEST_FUNC_PORT_CFG = 0x1002,\n\tMPI_TEST_FUNC_PRB_CTL = 0x100e,\n\t\tMPI_TEST_FUNC_PRB_EN = 0x18a20000,\n\tMPI_TEST_FUNC_RST_STS = 0x100a,\n\t\tMPI_TEST_FUNC_RST_FRC = 0x00000003,\n\tMPI_TEST_NIC_FUNC_MASK = 0x00000007,\n\tMPI_TEST_NIC1_FUNCTION_ENABLE = (1 << 0),\n\tMPI_TEST_NIC1_FUNCTION_MASK = 0x0000000e,\n\tMPI_TEST_NIC1_FUNC_SHIFT = 1,\n\tMPI_TEST_NIC2_FUNCTION_ENABLE = (1 << 4),\n\tMPI_TEST_NIC2_FUNCTION_MASK = 0x000000e0,\n\tMPI_TEST_NIC2_FUNC_SHIFT = 5,\n\tMPI_TEST_FC1_FUNCTION_ENABLE = (1 << 8),\n\tMPI_TEST_FC1_FUNCTION_MASK\t= 0x00000e00,\n\tMPI_TEST_FC1_FUNCTION_SHIFT = 9,\n\tMPI_TEST_FC2_FUNCTION_ENABLE = (1 << 12),\n\tMPI_TEST_FC2_FUNCTION_MASK = 0x0000e000,\n\tMPI_TEST_FC2_FUNCTION_SHIFT = 13,\n\n\tMPI_NIC_READ = 0x00000000,\n\tMPI_NIC_REG_BLOCK = 0x00020000,\n\tMPI_NIC_FUNCTION_SHIFT = 6,\n};\n\n \nenum {\n\t \n\tMAILBOX_COUNT = 16,\n\tMAILBOX_TIMEOUT = 5,\n\n\tPROC_ADDR_RDY = (1 << 31),\n\tPROC_ADDR_R = (1 << 30),\n\tPROC_ADDR_ERR = (1 << 29),\n\tPROC_ADDR_DA = (1 << 28),\n\tPROC_ADDR_FUNC0_MBI = 0x00001180,\n\tPROC_ADDR_FUNC0_MBO = (PROC_ADDR_FUNC0_MBI + MAILBOX_COUNT),\n\tPROC_ADDR_FUNC0_CTL = 0x000011a1,\n\tPROC_ADDR_FUNC2_MBI = 0x00001280,\n\tPROC_ADDR_FUNC2_MBO = (PROC_ADDR_FUNC2_MBI + MAILBOX_COUNT),\n\tPROC_ADDR_FUNC2_CTL = 0x000012a1,\n\tPROC_ADDR_MPI_RISC = 0x00000000,\n\tPROC_ADDR_MDE = 0x00010000,\n\tPROC_ADDR_REGBLOCK = 0x00020000,\n\tPROC_ADDR_RISC_REG = 0x00030000,\n};\n\n \nenum {\n\tSYS_EFE = (1 << 0),\n\tSYS_FAE = (1 << 1),\n\tSYS_MDC = (1 << 2),\n\tSYS_DST = (1 << 3),\n\tSYS_DWC = (1 << 4),\n\tSYS_EVW = (1 << 5),\n\tSYS_OMP_DLY_MASK = 0x3f000000,\n\t \n\tSYS_ODI = (1 << 14),\n};\n\n \nenum {\n\tRST_FO_TFO = (1 << 0),\n\tRST_FO_RR_MASK = 0x00060000,\n\tRST_FO_RR_CQ_CAM = 0x00000000,\n\tRST_FO_RR_DROP = 0x00000002,\n\tRST_FO_RR_DQ = 0x00000004,\n\tRST_FO_RR_RCV_FUNC_CQ = 0x00000006,\n\tRST_FO_FRB = (1 << 12),\n\tRST_FO_MOP = (1 << 13),\n\tRST_FO_REG = (1 << 14),\n\tRST_FO_FR = (1 << 15),\n};\n\n \nenum {\n\tFSC_DBRST_MASK = 0x00070000,\n\tFSC_DBRST_256 = 0x00000000,\n\tFSC_DBRST_512 = 0x00000001,\n\tFSC_DBRST_768 = 0x00000002,\n\tFSC_DBRST_1024 = 0x00000003,\n\tFSC_DBL_MASK = 0x00180000,\n\tFSC_DBL_DBRST = 0x00000000,\n\tFSC_DBL_MAX_PLD = 0x00000008,\n\tFSC_DBL_MAX_BRST = 0x00000010,\n\tFSC_DBL_128_BYTES = 0x00000018,\n\tFSC_EC = (1 << 5),\n\tFSC_EPC_MASK = 0x00c00000,\n\tFSC_EPC_INBOUND = (1 << 6),\n\tFSC_EPC_OUTBOUND = (1 << 7),\n\tFSC_VM_PAGESIZE_MASK = 0x07000000,\n\tFSC_VM_PAGE_2K = 0x00000100,\n\tFSC_VM_PAGE_4K = 0x00000200,\n\tFSC_VM_PAGE_8K = 0x00000300,\n\tFSC_VM_PAGE_64K = 0x00000600,\n\tFSC_SH = (1 << 11),\n\tFSC_DSB = (1 << 12),\n\tFSC_STE = (1 << 13),\n\tFSC_FE = (1 << 15),\n};\n\n \nenum {\n\tCSR_ERR_STS_MASK = 0x0000003f,\n\t \n\tCSR_RR = (1 << 8),\n\tCSR_HRI = (1 << 9),\n\tCSR_RP = (1 << 10),\n\tCSR_CMD_PARM_SHIFT = 22,\n\tCSR_CMD_NOP = 0x00000000,\n\tCSR_CMD_SET_RST = 0x10000000,\n\tCSR_CMD_CLR_RST = 0x20000000,\n\tCSR_CMD_SET_PAUSE = 0x30000000,\n\tCSR_CMD_CLR_PAUSE = 0x40000000,\n\tCSR_CMD_SET_H2R_INT = 0x50000000,\n\tCSR_CMD_CLR_H2R_INT = 0x60000000,\n\tCSR_CMD_PAR_EN = 0x70000000,\n\tCSR_CMD_SET_BAD_PAR = 0x80000000,\n\tCSR_CMD_CLR_BAD_PAR = 0x90000000,\n\tCSR_CMD_CLR_R2PCI_INT = 0xa0000000,\n};\n\n \nenum {\n\tCFG_LRQ = (1 << 0),\n\tCFG_DRQ = (1 << 1),\n\tCFG_LR = (1 << 2),\n\tCFG_DR = (1 << 3),\n\tCFG_LE = (1 << 5),\n\tCFG_LCQ = (1 << 6),\n\tCFG_DCQ = (1 << 7),\n\tCFG_Q_SHIFT = 8,\n\tCFG_Q_MASK = 0x7f000000,\n};\n\n \nenum {\n\tSTS_FE = (1 << 0),\n\tSTS_PI = (1 << 1),\n\tSTS_PL0 = (1 << 2),\n\tSTS_PL1 = (1 << 3),\n\tSTS_PI0 = (1 << 4),\n\tSTS_PI1 = (1 << 5),\n\tSTS_FUNC_ID_MASK = 0x000000c0,\n\tSTS_FUNC_ID_SHIFT = 6,\n\tSTS_F0E = (1 << 8),\n\tSTS_F1E = (1 << 9),\n\tSTS_F2E = (1 << 10),\n\tSTS_F3E = (1 << 11),\n\tSTS_NFE = (1 << 12),\n};\n\n \nenum {\n\tINTR_EN_INTR_MASK = 0x007f0000,\n\tINTR_EN_TYPE_MASK = 0x03000000,\n\tINTR_EN_TYPE_ENABLE = 0x00000100,\n\tINTR_EN_TYPE_DISABLE = 0x00000200,\n\tINTR_EN_TYPE_READ = 0x00000300,\n\tINTR_EN_IHD = (1 << 13),\n\tINTR_EN_IHD_MASK = (INTR_EN_IHD << 16),\n\tINTR_EN_EI = (1 << 14),\n\tINTR_EN_EN = (1 << 15),\n};\n\n \nenum {\n\tINTR_MASK_PI = (1 << 0),\n\tINTR_MASK_HL0 = (1 << 1),\n\tINTR_MASK_LH0 = (1 << 2),\n\tINTR_MASK_HL1 = (1 << 3),\n\tINTR_MASK_LH1 = (1 << 4),\n\tINTR_MASK_SE = (1 << 5),\n\tINTR_MASK_LSC = (1 << 6),\n\tINTR_MASK_MC = (1 << 7),\n\tINTR_MASK_LINK_IRQS = INTR_MASK_LSC | INTR_MASK_SE | INTR_MASK_MC,\n};\n\n \nenum {\n\tREV_ID_MASK = 0x0000000f,\n\tREV_ID_NICROLL_SHIFT = 0,\n\tREV_ID_NICREV_SHIFT = 4,\n\tREV_ID_XGROLL_SHIFT = 8,\n\tREV_ID_XGREV_SHIFT = 12,\n\tREV_ID_CHIPREV_SHIFT = 28,\n};\n\n \nenum {\n\tFRC_ECC_ERR_VW = (1 << 12),\n\tFRC_ECC_ERR_VB = (1 << 13),\n\tFRC_ECC_ERR_NI = (1 << 14),\n\tFRC_ECC_ERR_NO = (1 << 15),\n\tFRC_ECC_PFE_SHIFT = 16,\n\tFRC_ECC_ERR_DO = (1 << 18),\n\tFRC_ECC_P14 = (1 << 19),\n};\n\n \nenum {\n\tERR_STS_NOF = (1 << 0),\n\tERR_STS_NIF = (1 << 1),\n\tERR_STS_DRP = (1 << 2),\n\tERR_STS_XGP = (1 << 3),\n\tERR_STS_FOU = (1 << 4),\n\tERR_STS_FOC = (1 << 5),\n\tERR_STS_FOF = (1 << 6),\n\tERR_STS_FIU = (1 << 7),\n\tERR_STS_FIC = (1 << 8),\n\tERR_STS_FIF = (1 << 9),\n\tERR_STS_MOF = (1 << 10),\n\tERR_STS_TA = (1 << 11),\n\tERR_STS_MA = (1 << 12),\n\tERR_STS_MPE = (1 << 13),\n\tERR_STS_SCE = (1 << 14),\n\tERR_STS_STE = (1 << 15),\n\tERR_STS_FOW = (1 << 16),\n\tERR_STS_UE = (1 << 17),\n\tERR_STS_MCH = (1 << 26),\n\tERR_STS_LOC_SHIFT = 27,\n};\n\n \nenum {\n\tRAM_DBG_ADDR_FW = (1 << 30),\n\tRAM_DBG_ADDR_FR = (1 << 31),\n};\n\n \nenum {\n\t \n\tSEM_CLEAR = 0,\n\tSEM_SET = 1,\n\tSEM_FORCE = 3,\n\tSEM_XGMAC0_SHIFT = 0,\n\tSEM_XGMAC1_SHIFT = 2,\n\tSEM_ICB_SHIFT = 4,\n\tSEM_MAC_ADDR_SHIFT = 6,\n\tSEM_FLASH_SHIFT = 8,\n\tSEM_PROBE_SHIFT = 10,\n\tSEM_RT_IDX_SHIFT = 12,\n\tSEM_PROC_REG_SHIFT = 14,\n\tSEM_XGMAC0_MASK = 0x00030000,\n\tSEM_XGMAC1_MASK = 0x000c0000,\n\tSEM_ICB_MASK = 0x00300000,\n\tSEM_MAC_ADDR_MASK = 0x00c00000,\n\tSEM_FLASH_MASK = 0x03000000,\n\tSEM_PROBE_MASK = 0x0c000000,\n\tSEM_RT_IDX_MASK = 0x30000000,\n\tSEM_PROC_REG_MASK = 0xc0000000,\n};\n\n \nenum {\n\tXGMAC_ADDR_RDY = (1 << 31),\n\tXGMAC_ADDR_R = (1 << 30),\n\tXGMAC_ADDR_XME = (1 << 29),\n\n\t \n\tPAUSE_SRC_LO = 0x00000100,\n\tPAUSE_SRC_HI = 0x00000104,\n\tGLOBAL_CFG = 0x00000108,\n\tGLOBAL_CFG_RESET = (1 << 0),\n\tGLOBAL_CFG_JUMBO = (1 << 6),\n\tGLOBAL_CFG_TX_STAT_EN = (1 << 10),\n\tGLOBAL_CFG_RX_STAT_EN = (1 << 11),\n\tTX_CFG = 0x0000010c,\n\tTX_CFG_RESET = (1 << 0),\n\tTX_CFG_EN = (1 << 1),\n\tTX_CFG_PREAM = (1 << 2),\n\tRX_CFG = 0x00000110,\n\tRX_CFG_RESET = (1 << 0),\n\tRX_CFG_EN = (1 << 1),\n\tRX_CFG_PREAM = (1 << 2),\n\tFLOW_CTL = 0x0000011c,\n\tPAUSE_OPCODE = 0x00000120,\n\tPAUSE_TIMER = 0x00000124,\n\tPAUSE_FRM_DEST_LO = 0x00000128,\n\tPAUSE_FRM_DEST_HI = 0x0000012c,\n\tMAC_TX_PARAMS = 0x00000134,\n\tMAC_TX_PARAMS_JUMBO = (1 << 31),\n\tMAC_TX_PARAMS_SIZE_SHIFT = 16,\n\tMAC_RX_PARAMS = 0x00000138,\n\tMAC_SYS_INT = 0x00000144,\n\tMAC_SYS_INT_MASK = 0x00000148,\n\tMAC_MGMT_INT = 0x0000014c,\n\tMAC_MGMT_IN_MASK = 0x00000150,\n\tEXT_ARB_MODE = 0x000001fc,\n\n\t \n\tTX_PKTS = 0x00000200,\n\tTX_BYTES = 0x00000208,\n\tTX_MCAST_PKTS = 0x00000210,\n\tTX_BCAST_PKTS = 0x00000218,\n\tTX_UCAST_PKTS = 0x00000220,\n\tTX_CTL_PKTS = 0x00000228,\n\tTX_PAUSE_PKTS = 0x00000230,\n\tTX_64_PKT = 0x00000238,\n\tTX_65_TO_127_PKT = 0x00000240,\n\tTX_128_TO_255_PKT = 0x00000248,\n\tTX_256_511_PKT = 0x00000250,\n\tTX_512_TO_1023_PKT = 0x00000258,\n\tTX_1024_TO_1518_PKT = 0x00000260,\n\tTX_1519_TO_MAX_PKT = 0x00000268,\n\tTX_UNDERSIZE_PKT = 0x00000270,\n\tTX_OVERSIZE_PKT = 0x00000278,\n\n\t \n\tRX_HALF_FULL_DET = 0x000002a0,\n\tTX_HALF_FULL_DET = 0x000002a4,\n\tRX_OVERFLOW_DET = 0x000002a8,\n\tTX_OVERFLOW_DET = 0x000002ac,\n\tRX_HALF_FULL_MASK = 0x000002b0,\n\tTX_HALF_FULL_MASK = 0x000002b4,\n\tRX_OVERFLOW_MASK = 0x000002b8,\n\tTX_OVERFLOW_MASK = 0x000002bc,\n\tSTAT_CNT_CTL = 0x000002c0,\n\tSTAT_CNT_CTL_CLEAR_TX = (1 << 0),\n\tSTAT_CNT_CTL_CLEAR_RX = (1 << 1),\n\tAUX_RX_HALF_FULL_DET = 0x000002d0,\n\tAUX_TX_HALF_FULL_DET = 0x000002d4,\n\tAUX_RX_OVERFLOW_DET = 0x000002d8,\n\tAUX_TX_OVERFLOW_DET = 0x000002dc,\n\tAUX_RX_HALF_FULL_MASK = 0x000002f0,\n\tAUX_TX_HALF_FULL_MASK = 0x000002f4,\n\tAUX_RX_OVERFLOW_MASK = 0x000002f8,\n\tAUX_TX_OVERFLOW_MASK = 0x000002fc,\n\n\t \n\tRX_BYTES = 0x00000300,\n\tRX_BYTES_OK = 0x00000308,\n\tRX_PKTS = 0x00000310,\n\tRX_PKTS_OK = 0x00000318,\n\tRX_BCAST_PKTS = 0x00000320,\n\tRX_MCAST_PKTS = 0x00000328,\n\tRX_UCAST_PKTS = 0x00000330,\n\tRX_UNDERSIZE_PKTS = 0x00000338,\n\tRX_OVERSIZE_PKTS = 0x00000340,\n\tRX_JABBER_PKTS = 0x00000348,\n\tRX_UNDERSIZE_FCERR_PKTS = 0x00000350,\n\tRX_DROP_EVENTS = 0x00000358,\n\tRX_FCERR_PKTS = 0x00000360,\n\tRX_ALIGN_ERR = 0x00000368,\n\tRX_SYMBOL_ERR = 0x00000370,\n\tRX_MAC_ERR = 0x00000378,\n\tRX_CTL_PKTS = 0x00000380,\n\tRX_PAUSE_PKTS = 0x00000388,\n\tRX_64_PKTS = 0x00000390,\n\tRX_65_TO_127_PKTS = 0x00000398,\n\tRX_128_255_PKTS = 0x000003a0,\n\tRX_256_511_PKTS = 0x000003a8,\n\tRX_512_TO_1023_PKTS = 0x000003b0,\n\tRX_1024_TO_1518_PKTS = 0x000003b8,\n\tRX_1519_TO_MAX_PKTS = 0x000003c0,\n\tRX_LEN_ERR_PKTS = 0x000003c8,\n\n\t \n\tMDIO_TX_DATA = 0x00000400,\n\tMDIO_RX_DATA = 0x00000410,\n\tMDIO_CMD = 0x00000420,\n\tMDIO_PHY_ADDR = 0x00000430,\n\tMDIO_PORT = 0x00000440,\n\tMDIO_STATUS = 0x00000450,\n\n\tXGMAC_REGISTER_END = 0x00000740,\n};\n\n \nenum {\n\tETS_QUEUE_SHIFT = 29,\n\tETS_REF = (1 << 26),\n\tETS_RS = (1 << 27),\n\tETS_P = (1 << 28),\n\tETS_FC_COS_SHIFT = 23,\n};\n\n \nenum {\n\tFLASH_ADDR_RDY = (1 << 31),\n\tFLASH_ADDR_R = (1 << 30),\n\tFLASH_ADDR_ERR = (1 << 29),\n};\n\n \nenum {\n\tCQ_STOP_QUEUE_MASK = (0x007f0000),\n\tCQ_STOP_TYPE_MASK = (0x03000000),\n\tCQ_STOP_TYPE_START = 0x00000100,\n\tCQ_STOP_TYPE_STOP = 0x00000200,\n\tCQ_STOP_TYPE_READ = 0x00000300,\n\tCQ_STOP_EN = (1 << 15),\n};\n\n \nenum {\n\tMAC_ADDR_IDX_SHIFT = 4,\n\tMAC_ADDR_TYPE_SHIFT = 16,\n\tMAC_ADDR_TYPE_COUNT = 10,\n\tMAC_ADDR_TYPE_MASK = 0x000f0000,\n\tMAC_ADDR_TYPE_CAM_MAC = 0x00000000,\n\tMAC_ADDR_TYPE_MULTI_MAC = 0x00010000,\n\tMAC_ADDR_TYPE_VLAN = 0x00020000,\n\tMAC_ADDR_TYPE_MULTI_FLTR = 0x00030000,\n\tMAC_ADDR_TYPE_FC_MAC = 0x00040000,\n\tMAC_ADDR_TYPE_MGMT_MAC = 0x00050000,\n\tMAC_ADDR_TYPE_MGMT_VLAN = 0x00060000,\n\tMAC_ADDR_TYPE_MGMT_V4 = 0x00070000,\n\tMAC_ADDR_TYPE_MGMT_V6 = 0x00080000,\n\tMAC_ADDR_TYPE_MGMT_TU_DP = 0x00090000,\n\tMAC_ADDR_ADR = (1 << 25),\n\tMAC_ADDR_RS = (1 << 26),\n\tMAC_ADDR_E = (1 << 27),\n\tMAC_ADDR_MR = (1 << 30),\n\tMAC_ADDR_MW = (1 << 31),\n\tMAX_MULTICAST_ENTRIES = 32,\n\n\t \n\tMAC_ADDR_MAX_CAM_ENTRIES = 512,\n\tMAC_ADDR_MAX_CAM_WCOUNT = 3,\n\tMAC_ADDR_MAX_MULTICAST_ENTRIES = 32,\n\tMAC_ADDR_MAX_MULTICAST_WCOUNT = 2,\n\tMAC_ADDR_MAX_VLAN_ENTRIES = 4096,\n\tMAC_ADDR_MAX_VLAN_WCOUNT = 1,\n\tMAC_ADDR_MAX_MCAST_FLTR_ENTRIES = 4096,\n\tMAC_ADDR_MAX_MCAST_FLTR_WCOUNT = 1,\n\tMAC_ADDR_MAX_FC_MAC_ENTRIES = 4,\n\tMAC_ADDR_MAX_FC_MAC_WCOUNT = 2,\n\tMAC_ADDR_MAX_MGMT_MAC_ENTRIES = 8,\n\tMAC_ADDR_MAX_MGMT_MAC_WCOUNT = 2,\n\tMAC_ADDR_MAX_MGMT_VLAN_ENTRIES = 16,\n\tMAC_ADDR_MAX_MGMT_VLAN_WCOUNT = 1,\n\tMAC_ADDR_MAX_MGMT_V4_ENTRIES = 4,\n\tMAC_ADDR_MAX_MGMT_V4_WCOUNT = 1,\n\tMAC_ADDR_MAX_MGMT_V6_ENTRIES = 4,\n\tMAC_ADDR_MAX_MGMT_V6_WCOUNT = 4,\n\tMAC_ADDR_MAX_MGMT_TU_DP_ENTRIES = 4,\n\tMAC_ADDR_MAX_MGMT_TU_DP_WCOUNT = 1,\n};\n\n \nenum {\n\tSPLT_HDR_EP = (1 << 31),\n};\n\n \nenum {\n\tFC_RCV_CFG_ECT = (1 << 15),\n\tFC_RCV_CFG_DFH = (1 << 20),\n\tFC_RCV_CFG_DVF = (1 << 21),\n\tFC_RCV_CFG_RCE = (1 << 27),\n\tFC_RCV_CFG_RFE = (1 << 28),\n\tFC_RCV_CFG_TEE = (1 << 29),\n\tFC_RCV_CFG_TCE = (1 << 30),\n\tFC_RCV_CFG_TFE = (1 << 31),\n};\n\n \nenum {\n\tNIC_RCV_CFG_PPE = (1 << 0),\n\tNIC_RCV_CFG_VLAN_MASK = 0x00060000,\n\tNIC_RCV_CFG_VLAN_ALL = 0x00000000,\n\tNIC_RCV_CFG_VLAN_MATCH_ONLY = 0x00000002,\n\tNIC_RCV_CFG_VLAN_MATCH_AND_NON = 0x00000004,\n\tNIC_RCV_CFG_VLAN_NONE_AND_NON = 0x00000006,\n\tNIC_RCV_CFG_RV = (1 << 3),\n\tNIC_RCV_CFG_DFQ_MASK = (0x7f000000),\n\tNIC_RCV_CFG_DFQ_SHIFT = 8,\n\tNIC_RCV_CFG_DFQ = 0,\t \n};\n\n \nenum {\n\tMGMT_RCV_CFG_ARP = (1 << 0),\n\tMGMT_RCV_CFG_DHC = (1 << 1),\n\tMGMT_RCV_CFG_DHS = (1 << 2),\n\tMGMT_RCV_CFG_NP = (1 << 3),\n\tMGMT_RCV_CFG_I6N = (1 << 4),\n\tMGMT_RCV_CFG_I6R = (1 << 5),\n\tMGMT_RCV_CFG_DH6 = (1 << 6),\n\tMGMT_RCV_CFG_UD1 = (1 << 7),\n\tMGMT_RCV_CFG_UD0 = (1 << 8),\n\tMGMT_RCV_CFG_BCT = (1 << 9),\n\tMGMT_RCV_CFG_MCT = (1 << 10),\n\tMGMT_RCV_CFG_DM = (1 << 11),\n\tMGMT_RCV_CFG_RM = (1 << 12),\n\tMGMT_RCV_CFG_STL = (1 << 13),\n\tMGMT_RCV_CFG_VLAN_MASK = 0xc0000000,\n\tMGMT_RCV_CFG_VLAN_ALL = 0x00000000,\n\tMGMT_RCV_CFG_VLAN_MATCH_ONLY = 0x00004000,\n\tMGMT_RCV_CFG_VLAN_MATCH_AND_NON = 0x00008000,\n\tMGMT_RCV_CFG_VLAN_NONE_AND_NON = 0x0000c000,\n};\n\n \nenum {\n\tRT_IDX_IDX_SHIFT = 8,\n\tRT_IDX_TYPE_MASK = 0x000f0000,\n\tRT_IDX_TYPE_SHIFT = 16,\n\tRT_IDX_TYPE_RT = 0x00000000,\n\tRT_IDX_TYPE_RT_INV = 0x00010000,\n\tRT_IDX_TYPE_NICQ = 0x00020000,\n\tRT_IDX_TYPE_NICQ_INV = 0x00030000,\n\tRT_IDX_DST_MASK = 0x00700000,\n\tRT_IDX_DST_RSS = 0x00000000,\n\tRT_IDX_DST_CAM_Q = 0x00100000,\n\tRT_IDX_DST_COS_Q = 0x00200000,\n\tRT_IDX_DST_DFLT_Q = 0x00300000,\n\tRT_IDX_DST_DEST_Q = 0x00400000,\n\tRT_IDX_RS = (1 << 26),\n\tRT_IDX_E = (1 << 27),\n\tRT_IDX_MR = (1 << 30),\n\tRT_IDX_MW = (1 << 31),\n\n\t \n\tRT_IDX_BCAST = (1 << 0),\n\tRT_IDX_MCAST = (1 << 1),\n\tRT_IDX_MCAST_MATCH = (1 << 2),\n\tRT_IDX_MCAST_REG_MATCH = (1 << 3),\n\tRT_IDX_MCAST_HASH_MATCH = (1 << 4),\n\tRT_IDX_FC_MACH = (1 << 5),\n\tRT_IDX_ETH_FCOE = (1 << 6),\n\tRT_IDX_CAM_HIT = (1 << 7),\n\tRT_IDX_CAM_BIT0 = (1 << 8),\n\tRT_IDX_CAM_BIT1 = (1 << 9),\n\tRT_IDX_VLAN_TAG = (1 << 10),\n\tRT_IDX_VLAN_MATCH = (1 << 11),\n\tRT_IDX_VLAN_FILTER = (1 << 12),\n\tRT_IDX_ETH_SKIP1 = (1 << 13),\n\tRT_IDX_ETH_SKIP2 = (1 << 14),\n\tRT_IDX_BCAST_MCAST_MATCH = (1 << 15),\n\tRT_IDX_802_3 = (1 << 16),\n\tRT_IDX_LLDP = (1 << 17),\n\tRT_IDX_UNUSED018 = (1 << 18),\n\tRT_IDX_UNUSED019 = (1 << 19),\n\tRT_IDX_UNUSED20 = (1 << 20),\n\tRT_IDX_UNUSED21 = (1 << 21),\n\tRT_IDX_ERR = (1 << 22),\n\tRT_IDX_VALID = (1 << 23),\n\tRT_IDX_TU_CSUM_ERR = (1 << 24),\n\tRT_IDX_IP_CSUM_ERR = (1 << 25),\n\tRT_IDX_MAC_ERR = (1 << 26),\n\tRT_IDX_RSS_TCP6 = (1 << 27),\n\tRT_IDX_RSS_TCP4 = (1 << 28),\n\tRT_IDX_RSS_IPV6 = (1 << 29),\n\tRT_IDX_RSS_IPV4 = (1 << 30),\n\tRT_IDX_RSS_MATCH = (1 << 31),\n\n\t \n\tRT_IDX_ALL_ERR_SLOT = 0,\n\tRT_IDX_MAC_ERR_SLOT = 0,\n\tRT_IDX_IP_CSUM_ERR_SLOT = 1,\n\tRT_IDX_TCP_UDP_CSUM_ERR_SLOT = 2,\n\tRT_IDX_BCAST_SLOT = 3,\n\tRT_IDX_MCAST_MATCH_SLOT = 4,\n\tRT_IDX_ALLMULTI_SLOT = 5,\n\tRT_IDX_UNUSED6_SLOT = 6,\n\tRT_IDX_UNUSED7_SLOT = 7,\n\tRT_IDX_RSS_MATCH_SLOT = 8,\n\tRT_IDX_RSS_IPV4_SLOT = 8,\n\tRT_IDX_RSS_IPV6_SLOT = 9,\n\tRT_IDX_RSS_TCP4_SLOT = 10,\n\tRT_IDX_RSS_TCP6_SLOT = 11,\n\tRT_IDX_CAM_HIT_SLOT = 12,\n\tRT_IDX_UNUSED013 = 13,\n\tRT_IDX_UNUSED014 = 14,\n\tRT_IDX_PROMISCUOUS_SLOT = 15,\n\tRT_IDX_MAX_RT_SLOTS = 8,\n\tRT_IDX_MAX_NIC_SLOTS = 16,\n};\n\n \nenum {\n\tXG_SERDES_ADDR_RDY = (1 << 31),\n\tXG_SERDES_ADDR_R = (1 << 30),\n\n\tXG_SERDES_ADDR_STS = 0x00001E06,\n\tXG_SERDES_ADDR_XFI1_PWR_UP = 0x00000005,\n\tXG_SERDES_ADDR_XFI2_PWR_UP = 0x0000000a,\n\tXG_SERDES_ADDR_XAUI_PWR_DOWN = 0x00000001,\n\n\t \n\tXG_SERDES_XAUI_AN_START = 0x00000000,\n\tXG_SERDES_XAUI_AN_END = 0x00000034,\n\tXG_SERDES_XAUI_HSS_PCS_START = 0x00000800,\n\tXG_SERDES_XAUI_HSS_PCS_END = 0x0000880,\n\tXG_SERDES_XFI_AN_START = 0x00001000,\n\tXG_SERDES_XFI_AN_END = 0x00001034,\n\tXG_SERDES_XFI_TRAIN_START = 0x10001050,\n\tXG_SERDES_XFI_TRAIN_END = 0x1000107C,\n\tXG_SERDES_XFI_HSS_PCS_START = 0x00001800,\n\tXG_SERDES_XFI_HSS_PCS_END = 0x00001838,\n\tXG_SERDES_XFI_HSS_TX_START = 0x00001c00,\n\tXG_SERDES_XFI_HSS_TX_END = 0x00001c1f,\n\tXG_SERDES_XFI_HSS_RX_START = 0x00001c40,\n\tXG_SERDES_XFI_HSS_RX_END = 0x00001c5f,\n\tXG_SERDES_XFI_HSS_PLL_START = 0x00001e00,\n\tXG_SERDES_XFI_HSS_PLL_END = 0x00001e1f,\n};\n\n \nenum {\n\tPRB_MX_ADDR_ARE = (1 << 16),\n\tPRB_MX_ADDR_UP = (1 << 15),\n\tPRB_MX_ADDR_SWP = (1 << 14),\n\n\t \n\tPRB_MX_ADDR_MAX_MODS = 21,\n\tPRB_MX_ADDR_MOD_SEL_SHIFT = 9,\n\tPRB_MX_ADDR_MOD_SEL_TBD = 0,\n\tPRB_MX_ADDR_MOD_SEL_IDE1 = 1,\n\tPRB_MX_ADDR_MOD_SEL_IDE2 = 2,\n\tPRB_MX_ADDR_MOD_SEL_FRB = 3,\n\tPRB_MX_ADDR_MOD_SEL_ODE1 = 4,\n\tPRB_MX_ADDR_MOD_SEL_ODE2 = 5,\n\tPRB_MX_ADDR_MOD_SEL_DA1 = 6,\n\tPRB_MX_ADDR_MOD_SEL_DA2 = 7,\n\tPRB_MX_ADDR_MOD_SEL_IMP1 = 8,\n\tPRB_MX_ADDR_MOD_SEL_IMP2 = 9,\n\tPRB_MX_ADDR_MOD_SEL_OMP1 = 10,\n\tPRB_MX_ADDR_MOD_SEL_OMP2 = 11,\n\tPRB_MX_ADDR_MOD_SEL_ORS1 = 12,\n\tPRB_MX_ADDR_MOD_SEL_ORS2 = 13,\n\tPRB_MX_ADDR_MOD_SEL_REG = 14,\n\tPRB_MX_ADDR_MOD_SEL_MAC1 = 16,\n\tPRB_MX_ADDR_MOD_SEL_MAC2 = 17,\n\tPRB_MX_ADDR_MOD_SEL_VQM1 = 18,\n\tPRB_MX_ADDR_MOD_SEL_VQM2 = 19,\n\tPRB_MX_ADDR_MOD_SEL_MOP = 20,\n\t \n\tPRB_MX_ADDR_VALID_SYS_MOD = 0x000f7ff7,\n\tPRB_MX_ADDR_VALID_PCI_MOD = 0x000040c1,\n\tPRB_MX_ADDR_VALID_XGM_MOD = 0x00037309,\n\tPRB_MX_ADDR_VALID_FC_MOD = 0x00003001,\n\tPRB_MX_ADDR_VALID_TOTAL = 34,\n\n\t \n\tPRB_MX_ADDR_CLOCK_SHIFT = 6,\n\tPRB_MX_ADDR_SYS_CLOCK = 0,\n\tPRB_MX_ADDR_PCI_CLOCK = 2,\n\tPRB_MX_ADDR_FC_CLOCK = 5,\n\tPRB_MX_ADDR_XGM_CLOCK = 6,\n\n\tPRB_MX_ADDR_MAX_MUX = 64,\n};\n\n \nenum {\n\tPROC_ADDR = 0,\t\t \n\tPROC_DATA = 0x04,\t \n\tSYS = 0x08,\n\tRST_FO = 0x0c,\n\tFSC = 0x10,\n\tCSR = 0x14,\n\tLED = 0x18,\n\tICB_RID = 0x1c,\t\t \n\tICB_L = 0x20,\t\t \n\tICB_H = 0x24,\t\t \n\tCFG = 0x28,\n\tBIOS_ADDR = 0x2c,\n\tSTS = 0x30,\n\tINTR_EN = 0x34,\n\tINTR_MASK = 0x38,\n\tISR1 = 0x3c,\n\tISR2 = 0x40,\n\tISR3 = 0x44,\n\tISR4 = 0x48,\n\tREV_ID = 0x4c,\n\tFRC_ECC_ERR = 0x50,\n\tERR_STS = 0x54,\n\tRAM_DBG_ADDR = 0x58,\n\tRAM_DBG_DATA = 0x5c,\n\tECC_ERR_CNT = 0x60,\n\tSEM = 0x64,\n\tGPIO_1 = 0x68,\t\t \n\tGPIO_2 = 0x6c,\t\t \n\tGPIO_3 = 0x70,\t\t \n\tRSVD2 = 0x74,\n\tXGMAC_ADDR = 0x78,\t \n\tXGMAC_DATA = 0x7c,\t \n\tNIC_ETS = 0x80,\n\tCNA_ETS = 0x84,\n\tFLASH_ADDR = 0x88,\t \n\tFLASH_DATA = 0x8c,\t \n\tCQ_STOP = 0x90,\n\tPAGE_TBL_RID = 0x94,\n\tWQ_PAGE_TBL_LO = 0x98,\n\tWQ_PAGE_TBL_HI = 0x9c,\n\tCQ_PAGE_TBL_LO = 0xa0,\n\tCQ_PAGE_TBL_HI = 0xa4,\n\tMAC_ADDR_IDX = 0xa8,\t \n\tMAC_ADDR_DATA = 0xac,\t \n\tCOS_DFLT_CQ1 = 0xb0,\n\tCOS_DFLT_CQ2 = 0xb4,\n\tETYPE_SKIP1 = 0xb8,\n\tETYPE_SKIP2 = 0xbc,\n\tSPLT_HDR = 0xc0,\n\tFC_PAUSE_THRES = 0xc4,\n\tNIC_PAUSE_THRES = 0xc8,\n\tFC_ETHERTYPE = 0xcc,\n\tFC_RCV_CFG = 0xd0,\n\tNIC_RCV_CFG = 0xd4,\n\tFC_COS_TAGS = 0xd8,\n\tNIC_COS_TAGS = 0xdc,\n\tMGMT_RCV_CFG = 0xe0,\n\tRT_IDX = 0xe4,\n\tRT_DATA = 0xe8,\n\tRSVD7 = 0xec,\n\tXG_SERDES_ADDR = 0xf0,\n\tXG_SERDES_DATA = 0xf4,\n\tPRB_MX_ADDR = 0xf8,\t \n\tPRB_MX_DATA = 0xfc,\t \n};\n\n#ifdef CONFIG_HAVE_EFFICIENT_UNALIGNED_ACCESS\n#define SMALL_BUFFER_SIZE 256\n#define SMALL_BUF_MAP_SIZE SMALL_BUFFER_SIZE\n#define SPLT_SETTING  FSC_DBRST_1024\n#define SPLT_LEN 0\n#define QLGE_SB_PAD 0\n#else\n#define SMALL_BUFFER_SIZE 512\n#define SMALL_BUF_MAP_SIZE (SMALL_BUFFER_SIZE / 2)\n#define SPLT_SETTING  FSC_SH\n#define SPLT_LEN (SPLT_HDR_EP | \\\n\tmin(SMALL_BUF_MAP_SIZE, 1023))\n#define QLGE_SB_PAD 32\n#endif\n\n \nenum {\n\tCAM_OUT_ROUTE_FC = 0,\n\tCAM_OUT_ROUTE_NIC = 1,\n\tCAM_OUT_FUNC_SHIFT = 2,\n\tCAM_OUT_RV = (1 << 4),\n\tCAM_OUT_SH = (1 << 15),\n\tCAM_OUT_CQ_ID_SHIFT = 5,\n};\n\n \nenum {\n\t \n\tAEN_SYS_ERR = 0x00008002,\n\tAEN_LINK_UP = 0x00008011,\n\tAEN_LINK_DOWN = 0x00008012,\n\tAEN_IDC_CMPLT = 0x00008100,\n\tAEN_IDC_REQ = 0x00008101,\n\tAEN_IDC_EXT = 0x00008102,\n\tAEN_DCBX_CHG = 0x00008110,\n\tAEN_AEN_LOST = 0x00008120,\n\tAEN_AEN_SFP_IN = 0x00008130,\n\tAEN_AEN_SFP_OUT = 0x00008131,\n\tAEN_FW_INIT_DONE = 0x00008400,\n\tAEN_FW_INIT_FAIL = 0x00008401,\n\n\t \n\tMB_CMD_NOP = 0x00000000,\n\tMB_CMD_EX_FW = 0x00000002,\n\tMB_CMD_MB_TEST = 0x00000006,\n\tMB_CMD_CSUM_TEST = 0x00000007,\t \n\tMB_CMD_ABOUT_FW = 0x00000008,\n\tMB_CMD_COPY_RISC_RAM = 0x0000000a,\n\tMB_CMD_LOAD_RISC_RAM = 0x0000000b,\n\tMB_CMD_DUMP_RISC_RAM = 0x0000000c,\n\tMB_CMD_WRITE_RAM = 0x0000000d,\n\tMB_CMD_INIT_RISC_RAM = 0x0000000e,\n\tMB_CMD_READ_RAM = 0x0000000f,\n\tMB_CMD_STOP_FW = 0x00000014,\n\tMB_CMD_MAKE_SYS_ERR = 0x0000002a,\n\tMB_CMD_WRITE_SFP = 0x00000030,\n\tMB_CMD_READ_SFP = 0x00000031,\n\tMB_CMD_INIT_FW = 0x00000060,\n\tMB_CMD_GET_IFCB = 0x00000061,\n\tMB_CMD_GET_FW_STATE = 0x00000069,\n\tMB_CMD_IDC_REQ = 0x00000100,\t \n\tMB_CMD_IDC_ACK = 0x00000101,\t \n\tMB_CMD_SET_WOL_MODE = 0x00000110,\t \n\tMB_WOL_DISABLE = 0,\n\tMB_WOL_MAGIC_PKT = (1 << 1),\n\tMB_WOL_FLTR = (1 << 2),\n\tMB_WOL_UCAST = (1 << 3),\n\tMB_WOL_MCAST = (1 << 4),\n\tMB_WOL_BCAST = (1 << 5),\n\tMB_WOL_LINK_UP = (1 << 6),\n\tMB_WOL_LINK_DOWN = (1 << 7),\n\tMB_WOL_MODE_ON = (1 << 16),\t\t \n\tMB_CMD_SET_WOL_FLTR = 0x00000111,\t \n\tMB_CMD_CLEAR_WOL_FLTR = 0x00000112,  \n\tMB_CMD_SET_WOL_MAGIC = 0x00000113,\t \n\tMB_CMD_CLEAR_WOL_MAGIC = 0x00000114, \n\tMB_CMD_SET_WOL_IMMED = 0x00000115,\n\tMB_CMD_PORT_RESET = 0x00000120,\n\tMB_CMD_SET_PORT_CFG = 0x00000122,\n\tMB_CMD_GET_PORT_CFG = 0x00000123,\n\tMB_CMD_GET_LINK_STS = 0x00000124,\n\tMB_CMD_SET_LED_CFG = 0x00000125,  \n\t\tQL_LED_BLINK = 0x03e803e8,\n\tMB_CMD_GET_LED_CFG = 0x00000126,  \n\tMB_CMD_SET_MGMNT_TFK_CTL = 0x00000160,  \n\tMB_SET_MPI_TFK_STOP = (1 << 0),\n\tMB_SET_MPI_TFK_RESUME = (1 << 1),\n\tMB_CMD_GET_MGMNT_TFK_CTL = 0x00000161,  \n\tMB_GET_MPI_TFK_STOPPED = (1 << 0),\n\tMB_GET_MPI_TFK_FIFO_EMPTY = (1 << 1),\n\t \n\tMB_CMD_IOP_NONE = 0x0000,\n\tMB_CMD_IOP_PREP_UPDATE_MPI\t= 0x0001,\n\tMB_CMD_IOP_COMP_UPDATE_MPI\t= 0x0002,\n\tMB_CMD_IOP_PREP_LINK_DOWN\t= 0x0010,\n\tMB_CMD_IOP_DVR_START\t = 0x0100,\n\tMB_CMD_IOP_FLASH_ACC\t = 0x0101,\n\tMB_CMD_IOP_RESTART_MPI\t= 0x0102,\n\tMB_CMD_IOP_CORE_DUMP_MPI\t= 0x0103,\n\n\t \n\tMB_CMD_STS_GOOD = 0x00004000,\t \n\tMB_CMD_STS_INTRMDT = 0x00001000,\t \n\tMB_CMD_STS_INVLD_CMD = 0x00004001,\t \n\tMB_CMD_STS_XFC_ERR = 0x00004002,\t \n\tMB_CMD_STS_CSUM_ERR = 0x00004003,\t \n\tMB_CMD_STS_ERR = 0x00004005,\t \n\tMB_CMD_STS_PARAM_ERR = 0x00004006,\t \n};\n\nstruct mbox_params {\n\tu32 mbox_in[MAILBOX_COUNT];\n\tu32 mbox_out[MAILBOX_COUNT];\n\tint in_count;\n\tint out_count;\n};\n\nstruct flash_params_8012 {\n\tu8 dev_id_str[4];\n\t__le16 size;\n\t__le16 csum;\n\t__le16 ver;\n\t__le16 sub_dev_id;\n\tu8 mac_addr[6];\n\t__le16 res;\n};\n\n \n#define FUNC0_FLASH_OFFSET 0x140200\n#define FUNC1_FLASH_OFFSET 0x140600\n\n \nstruct flash_params_8000 {\n\tu8 dev_id_str[4];\t \n\t__le16 ver;\n\t__le16 size;\n\t__le16 csum;\n\t__le16 reserved0;\n\t__le16 total_size;\n\t__le16 entry_count;\n\tu8 data_type0;\n\tu8 data_size0;\n\tu8 mac_addr[6];\n\tu8 data_type1;\n\tu8 data_size1;\n\tu8 mac_addr1[6];\n\tu8 data_type2;\n\tu8 data_size2;\n\t__le16 vlan_id;\n\tu8 data_type3;\n\tu8 data_size3;\n\t__le16 last;\n\tu8 reserved1[464];\n\t__le16\tsubsys_ven_id;\n\t__le16\tsubsys_dev_id;\n\tu8 reserved2[4];\n};\n\nunion flash_params {\n\tstruct flash_params_8012 flash_params_8012;\n\tstruct flash_params_8000 flash_params_8000;\n};\n\n \nstruct rx_doorbell_context {\n\tu32 cnsmr_idx;\t\t \n\tu32 valid;\t\t \n\tu32 reserved[4];\t \n\tu32 lbq_prod_idx;\t \n\tu32 sbq_prod_idx;\t \n};\n\n \nstruct tx_doorbell_context {\n\tu32 prod_idx;\t\t \n\tu32 valid;\t\t \n\tu32 reserved[4];\t \n\tu32 lbq_prod_idx;\t \n\tu32 sbq_prod_idx;\t \n};\n\n \nstruct tx_buf_desc {\n\t__le64 addr;\n\t__le32 len;\n#define TX_DESC_LEN_MASK\t0x000fffff\n#define TX_DESC_C\t0x40000000\n#define TX_DESC_E\t0x80000000\n} __packed;\n\n \n\n#define OPCODE_OB_MAC_IOCB\t\t0x01\n#define OPCODE_OB_MAC_TSO_IOCB\t\t0x02\n#define OPCODE_IB_MAC_IOCB\t\t0x20\n#define OPCODE_IB_MPI_IOCB\t\t0x21\n#define OPCODE_IB_AE_IOCB\t\t0x3f\n\nstruct qlge_ob_mac_iocb_req {\n\tu8 opcode;\n\tu8 flags1;\n#define OB_MAC_IOCB_REQ_OI\t0x01\n#define OB_MAC_IOCB_REQ_I\t0x02\n#define OB_MAC_IOCB_REQ_D\t0x08\n#define OB_MAC_IOCB_REQ_F\t0x10\n\tu8 flags2;\n\tu8 flags3;\n#define OB_MAC_IOCB_DFP\t0x02\n#define OB_MAC_IOCB_V\t0x04\n\t__le32 reserved1[2];\n\t__le16 frame_len;\n#define OB_MAC_IOCB_LEN_MASK 0x3ffff\n\t__le16 reserved2;\n\tu32 tid;\n\tu32 txq_idx;\n\t__le32 reserved3;\n\t__le16 vlan_tci;\n\t__le16 reserved4;\n\tstruct tx_buf_desc tbd[TX_DESC_PER_IOCB];\n} __packed;\n\nstruct qlge_ob_mac_iocb_rsp {\n\tu8 opcode;\t\t \n\tu8 flags1;\t\t \n#define OB_MAC_IOCB_RSP_OI\t0x01\t \n#define OB_MAC_IOCB_RSP_I\t0x02\t \n#define OB_MAC_IOCB_RSP_E\t0x08\t \n#define OB_MAC_IOCB_RSP_S\t0x10\t \n#define OB_MAC_IOCB_RSP_L\t0x20\t \n#define OB_MAC_IOCB_RSP_P\t0x40\t \n\tu8 flags2;\t\t \n\tu8 flags3;\t\t \n#define OB_MAC_IOCB_RSP_B\t0x80\t \n\tu32 tid;\n\tu32 txq_idx;\n\t__le32 reserved[13];\n} __packed;\n\nstruct qlge_ob_mac_tso_iocb_req {\n\tu8 opcode;\n\tu8 flags1;\n#define OB_MAC_TSO_IOCB_OI\t0x01\n#define OB_MAC_TSO_IOCB_I\t0x02\n#define OB_MAC_TSO_IOCB_D\t0x08\n#define OB_MAC_TSO_IOCB_IP4\t0x40\n#define OB_MAC_TSO_IOCB_IP6\t0x80\n\tu8 flags2;\n#define OB_MAC_TSO_IOCB_LSO\t0x20\n#define OB_MAC_TSO_IOCB_UC\t0x40\n#define OB_MAC_TSO_IOCB_TC\t0x80\n\tu8 flags3;\n#define OB_MAC_TSO_IOCB_IC\t0x01\n#define OB_MAC_TSO_IOCB_DFP\t0x02\n#define OB_MAC_TSO_IOCB_V\t0x04\n\t__le32 reserved1[2];\n\t__le32 frame_len;\n\tu32 tid;\n\tu32 txq_idx;\n\t__le16 total_hdrs_len;\n\t__le16 net_trans_offset;\n#define OB_MAC_TRANSPORT_HDR_SHIFT 6\n\t__le16 vlan_tci;\n\t__le16 mss;\n\tstruct tx_buf_desc tbd[TX_DESC_PER_IOCB];\n} __packed;\n\nstruct qlge_ob_mac_tso_iocb_rsp {\n\tu8 opcode;\n\tu8 flags1;\n#define OB_MAC_TSO_IOCB_RSP_OI\t0x01\n#define OB_MAC_TSO_IOCB_RSP_I\t0x02\n#define OB_MAC_TSO_IOCB_RSP_E\t0x08\n#define OB_MAC_TSO_IOCB_RSP_S\t0x10\n#define OB_MAC_TSO_IOCB_RSP_L\t0x20\n#define OB_MAC_TSO_IOCB_RSP_P\t0x40\n\tu8 flags2;\t\t \n\tu8 flags3;\t\t \n#define OB_MAC_TSO_IOCB_RSP_B\t0x8000\n\tu32 tid;\n\tu32 txq_idx;\n\t__le32 reserved2[13];\n} __packed;\n\nstruct qlge_ib_mac_iocb_rsp {\n\tu8 opcode;\t\t \n\tu8 flags1;\n#define IB_MAC_IOCB_RSP_OI\t0x01\t \n#define IB_MAC_IOCB_RSP_I\t0x02\t \n#define IB_MAC_CSUM_ERR_MASK\t0x1c\t \n#define IB_MAC_IOCB_RSP_TE\t0x04\t \n#define IB_MAC_IOCB_RSP_NU\t0x08\t \n#define IB_MAC_IOCB_RSP_IE\t0x10\t \n#define IB_MAC_IOCB_RSP_M_MASK\t0x60\t \n#define IB_MAC_IOCB_RSP_M_NONE\t0x00\t \n#define IB_MAC_IOCB_RSP_M_HASH\t0x20\t \n#define IB_MAC_IOCB_RSP_M_REG\t0x40\t \n#define IB_MAC_IOCB_RSP_M_PROM\t0x60\t \n#define IB_MAC_IOCB_RSP_B\t0x80\t \n\tu8 flags2;\n#define IB_MAC_IOCB_RSP_P\t0x01\t \n#define IB_MAC_IOCB_RSP_V\t0x02\t \n#define IB_MAC_IOCB_RSP_ERR_MASK\t0x1c\t \n#define IB_MAC_IOCB_RSP_ERR_CODE_ERR\t0x04\n#define IB_MAC_IOCB_RSP_ERR_OVERSIZE\t0x08\n#define IB_MAC_IOCB_RSP_ERR_UNDERSIZE\t0x10\n#define IB_MAC_IOCB_RSP_ERR_PREAMBLE\t0x14\n#define IB_MAC_IOCB_RSP_ERR_FRAME_LEN\t0x18\n#define IB_MAC_IOCB_RSP_ERR_CRC\t\t0x1c\n#define IB_MAC_IOCB_RSP_U\t0x20\t \n#define IB_MAC_IOCB_RSP_T\t0x40\t \n#define IB_MAC_IOCB_RSP_FO\t0x80\t \n\tu8 flags3;\n#define IB_MAC_IOCB_RSP_RSS_MASK\t0x07\t \n#define IB_MAC_IOCB_RSP_M_NONE\t\t0x00\t \n#define IB_MAC_IOCB_RSP_M_IPV4\t\t0x04\t \n#define IB_MAC_IOCB_RSP_M_IPV6\t\t0x02\t \n#define IB_MAC_IOCB_RSP_M_TCP_V4\t0x05\t \n#define IB_MAC_IOCB_RSP_M_TCP_V6\t0x03\t \n#define IB_MAC_IOCB_RSP_V4\t\t0x08\t \n#define IB_MAC_IOCB_RSP_V6\t\t0x10\t \n#define IB_MAC_IOCB_RSP_IH\t\t0x20\t \n#define IB_MAC_IOCB_RSP_DS\t\t0x40\t \n#define IB_MAC_IOCB_RSP_DL\t\t0x80\t \n\t__le32 data_len;\t \n\t__le64 data_addr;\t \n\t__le32 rss;\t\t \n\t__le16 vlan_id;\t\t \n#define IB_MAC_IOCB_RSP_C\t0x1000\t \n#define IB_MAC_IOCB_RSP_COS_SHIFT\t12\t \n#define IB_MAC_IOCB_RSP_VLAN_MASK\t0x0ffff\n\n\t__le16 reserved1;\n\t__le32 reserved2[6];\n\tu8 reserved3[3];\n\tu8 flags4;\n#define IB_MAC_IOCB_RSP_HV\t0x20\n#define IB_MAC_IOCB_RSP_HS\t0x40\n#define IB_MAC_IOCB_RSP_HL\t0x80\n\t__le32 hdr_len;\t\t \n\t__le64 hdr_addr;\t \n} __packed;\n\nstruct qlge_ib_ae_iocb_rsp {\n\tu8 opcode;\n\tu8 flags1;\n#define IB_AE_IOCB_RSP_OI\t\t0x01\n#define IB_AE_IOCB_RSP_I\t\t0x02\n\tu8 event;\n#define LINK_UP_EVENT\t\t\t0x00\n#define LINK_DOWN_EVENT\t\t\t0x01\n#define CAM_LOOKUP_ERR_EVENT\t\t0x06\n#define SOFT_ECC_ERROR_EVENT\t\t0x07\n#define MGMT_ERR_EVENT\t\t\t0x08\n#define TEN_GIG_MAC_EVENT\t\t0x09\n#define GPI0_H2L_EVENT\t\t\t0x10\n#define GPI0_L2H_EVENT\t\t\t0x20\n#define GPI1_H2L_EVENT\t\t\t0x11\n#define GPI1_L2H_EVENT\t\t\t0x21\n#define PCI_ERR_ANON_BUF_RD\t\t0x40\n\tu8 q_id;\n\t__le32 reserved[15];\n} __packed;\n\n \nstruct qlge_net_rsp_iocb {\n\tu8 opcode;\n\tu8 flags0;\n\t__le16 length;\n\t__le32 tid;\n\t__le32 reserved[14];\n} __packed;\n\nstruct qlge_net_req_iocb {\n\tu8 opcode;\n\tu8 flags0;\n\t__le16 flags1;\n\t__le32 tid;\n\t__le32 reserved1[30];\n} __packed;\n\n \nstruct wqicb {\n\t__le16 len;\n#define Q_LEN_V\t\t(1 << 4)\n#define Q_LEN_CPP_CONT\t0x0000\n#define Q_LEN_CPP_16\t0x0001\n#define Q_LEN_CPP_32\t0x0002\n#define Q_LEN_CPP_64\t0x0003\n#define Q_LEN_CPP_512\t0x0006\n\t__le16 flags;\n#define Q_PRI_SHIFT\t1\n#define Q_FLAGS_LC\t0x1000\n#define Q_FLAGS_LB\t0x2000\n#define Q_FLAGS_LI\t0x4000\n#define Q_FLAGS_LO\t0x8000\n\t__le16 cq_id_rss;\n#define Q_CQ_ID_RSS_RV 0x8000\n\t__le16 rid;\n\t__le64 addr;\n\t__le64 cnsmr_idx_addr;\n} __packed;\n\n \nstruct cqicb {\n\tu8 msix_vect;\n\tu8 reserved1;\n\tu8 reserved2;\n\tu8 flags;\n#define FLAGS_LV\t0x08\n#define FLAGS_LS\t0x10\n#define FLAGS_LL\t0x20\n#define FLAGS_LI\t0x40\n#define FLAGS_LC\t0x80\n\t__le16 len;\n#define LEN_V\t\t(1 << 4)\n#define LEN_CPP_CONT\t0x0000\n#define LEN_CPP_32\t0x0001\n#define LEN_CPP_64\t0x0002\n#define LEN_CPP_128\t0x0003\n\t__le16 rid;\n\t__le64 addr;\n\t__le64 prod_idx_addr;\n\t__le16 pkt_delay;\n\t__le16 irq_delay;\n\t__le64 lbq_addr;\n\t__le16 lbq_buf_size;\n\t__le16 lbq_len;\t\t \n\t__le64 sbq_addr;\n\t__le16 sbq_buf_size;\n\t__le16 sbq_len;\t\t \n} __packed;\n\nstruct ricb {\n\tu8 base_cq;\n#define RSS_L4K 0x80\n\tu8 flags;\n#define RSS_L6K 0x01\n#define RSS_LI  0x02\n#define RSS_LB  0x04\n#define RSS_LM  0x08\n#define RSS_RI4 0x10\n#define RSS_RT4 0x20\n#define RSS_RI6 0x40\n#define RSS_RT6 0x80\n\t__le16 mask;\n\tu8 hash_cq_id[1024];\n\t__le32 ipv6_hash_key[10];\n\t__le32 ipv4_hash_key[4];\n} __packed;\n\n \n\nstruct qlge_oal {\n\tstruct tx_buf_desc oal[TX_DESC_PER_OAL];\n};\n\nstruct map_list {\n\tDEFINE_DMA_UNMAP_ADDR(mapaddr);\n\tDEFINE_DMA_UNMAP_LEN(maplen);\n};\n\nstruct tx_ring_desc {\n\tstruct sk_buff *skb;\n\tstruct qlge_ob_mac_iocb_req *queue_entry;\n\tu32 index;\n\tstruct qlge_oal oal;\n\tstruct map_list map[MAX_SKB_FRAGS + 2];\n\tint map_cnt;\n\tstruct tx_ring_desc *next;\n};\n\n#define QL_TXQ_IDX(qdev, skb) (smp_processor_id() % (qdev->tx_ring_count))\n\nstruct tx_ring {\n\t \n\tstruct wqicb wqicb;\t \n\tvoid *wq_base;\t\t \n\tdma_addr_t wq_base_dma;\t \n\t__le32 *cnsmr_idx_sh_reg;\t \n\tdma_addr_t cnsmr_idx_sh_reg_dma;\t \n\tu32 wq_size;\t\t \n\tu32 wq_len;\t\t \n\tvoid __iomem *prod_idx_db_reg;\t \n\tvoid __iomem *valid_db_reg;\t \n\tu16 prod_idx;\t\t \n\tu16 cq_id;\t\t \n\tu8 wq_id;\t\t \n\tu8 reserved1[3];\n\tstruct tx_ring_desc *q;\t \n\tspinlock_t lock;\n\tatomic_t tx_count;\t \n\tstruct delayed_work tx_work;\n\tstruct qlge_adapter *qdev;\n\tu64 tx_packets;\n\tu64 tx_bytes;\n\tu64 tx_errors;\n};\n\nstruct qlge_page_chunk {\n\tstruct page *page;\n\tvoid *va;  \n\tunsigned int offset;\n};\n\nstruct qlge_bq_desc {\n\tunion {\n\t\t \n\t\tstruct qlge_page_chunk pg_chunk;\n\t\t \n\t\tstruct sk_buff *skb;\n\t} p;\n\tdma_addr_t dma_addr;\n\t \n\t__le64 *buf_ptr;\n\tu32 index;\n};\n\n \nstruct qlge_bq {\n\t__le64 *base;\n\tdma_addr_t base_dma;\n\t__le64 *base_indirect;\n\tdma_addr_t base_indirect_dma;\n\tstruct qlge_bq_desc *queue;\n\t \n\tvoid __iomem *prod_idx_db_reg;\n\t \n\tu16 next_to_use;\n\t \n\tu16 next_to_clean;\n\tenum {\n\t\tQLGE_SB,\t\t \n\t\tQLGE_LB,\t\t \n\t} type;\n};\n\n#define QLGE_BQ_CONTAINER(bq) \\\n({ \\\n\ttypeof(bq) _bq = bq; \\\n\t(struct rx_ring *)((char *)_bq - (_bq->type == QLGE_SB ? \\\n\t\t\t\t\t  offsetof(struct rx_ring, sbq) : \\\n\t\t\t\t\t  offsetof(struct rx_ring, lbq))); \\\n})\n\n \n#define QLGE_BQ_ALIGN(index) ALIGN_DOWN(index, 16)\n\n#define QLGE_BQ_WRAP(index) ((index) & (QLGE_BQ_LEN - 1))\n\n#define QLGE_BQ_HW_OWNED(bq) \\\n({ \\\n\ttypeof(bq) _bq = bq; \\\n\tQLGE_BQ_WRAP(QLGE_BQ_ALIGN((_bq)->next_to_use) - \\\n\t\t     (_bq)->next_to_clean); \\\n})\n\nstruct rx_ring {\n\tstruct cqicb cqicb;\t \n\n\t \n\tvoid *cq_base;\n\tdma_addr_t cq_base_dma;\n\tu32 cq_size;\n\tu32 cq_len;\n\tu16 cq_id;\n\t__le32 *prod_idx_sh_reg;\t \n\tdma_addr_t prod_idx_sh_reg_dma;\n\tvoid __iomem *cnsmr_idx_db_reg;\t \n\tu32 cnsmr_idx;\t\t \n\tstruct qlge_net_rsp_iocb *curr_entry;\t \n\tvoid __iomem *valid_db_reg;\t \n\n\t \n\tstruct qlge_bq lbq;\n\tstruct qlge_page_chunk master_chunk;\n\tdma_addr_t chunk_dma_addr;\n\n\t \n\tstruct qlge_bq sbq;\n\n\t \n\tu32 irq;\t\t \n\tu32 cpu;\t\t \n\tstruct delayed_work refill_work;\n\tchar name[IFNAMSIZ + 5];\n\tstruct napi_struct napi;\n\tu8 reserved;\n\tstruct qlge_adapter *qdev;\n\tu64 rx_packets;\n\tu64 rx_multicast;\n\tu64 rx_bytes;\n\tu64 rx_dropped;\n\tu64 rx_errors;\n};\n\n \nstruct hash_id {\n\tu8 value[4];\n};\n\nstruct nic_stats {\n\t \n\tu64 tx_pkts;\n\tu64 tx_bytes;\n\tu64 tx_mcast_pkts;\n\tu64 tx_bcast_pkts;\n\tu64 tx_ucast_pkts;\n\tu64 tx_ctl_pkts;\n\tu64 tx_pause_pkts;\n\tu64 tx_64_pkt;\n\tu64 tx_65_to_127_pkt;\n\tu64 tx_128_to_255_pkt;\n\tu64 tx_256_511_pkt;\n\tu64 tx_512_to_1023_pkt;\n\tu64 tx_1024_to_1518_pkt;\n\tu64 tx_1519_to_max_pkt;\n\tu64 tx_undersize_pkt;\n\tu64 tx_oversize_pkt;\n\n\t \n\tu64 rx_bytes;\n\tu64 rx_bytes_ok;\n\tu64 rx_pkts;\n\tu64 rx_pkts_ok;\n\tu64 rx_bcast_pkts;\n\tu64 rx_mcast_pkts;\n\tu64 rx_ucast_pkts;\n\tu64 rx_undersize_pkts;\n\tu64 rx_oversize_pkts;\n\tu64 rx_jabber_pkts;\n\tu64 rx_undersize_fcerr_pkts;\n\tu64 rx_drop_events;\n\tu64 rx_fcerr_pkts;\n\tu64 rx_align_err;\n\tu64 rx_symbol_err;\n\tu64 rx_mac_err;\n\tu64 rx_ctl_pkts;\n\tu64 rx_pause_pkts;\n\tu64 rx_64_pkts;\n\tu64 rx_65_to_127_pkts;\n\tu64 rx_128_255_pkts;\n\tu64 rx_256_511_pkts;\n\tu64 rx_512_to_1023_pkts;\n\tu64 rx_1024_to_1518_pkts;\n\tu64 rx_1519_to_max_pkts;\n\tu64 rx_len_err_pkts;\n\t \n\tu64 rx_code_err;\n\tu64 rx_oversize_err;\n\tu64 rx_undersize_err;\n\tu64 rx_preamble_err;\n\tu64 rx_frame_len_err;\n\tu64 rx_crc_err;\n\tu64 rx_err_count;\n\t \n\tu64 tx_cbfc_pause_frames0;\n\tu64 tx_cbfc_pause_frames1;\n\tu64 tx_cbfc_pause_frames2;\n\tu64 tx_cbfc_pause_frames3;\n\tu64 tx_cbfc_pause_frames4;\n\tu64 tx_cbfc_pause_frames5;\n\tu64 tx_cbfc_pause_frames6;\n\tu64 tx_cbfc_pause_frames7;\n\tu64 rx_cbfc_pause_frames0;\n\tu64 rx_cbfc_pause_frames1;\n\tu64 rx_cbfc_pause_frames2;\n\tu64 rx_cbfc_pause_frames3;\n\tu64 rx_cbfc_pause_frames4;\n\tu64 rx_cbfc_pause_frames5;\n\tu64 rx_cbfc_pause_frames6;\n\tu64 rx_cbfc_pause_frames7;\n\tu64 rx_nic_fifo_drop;\n};\n\n \nenum {\n\tMPI_CORE_REGS_ADDR = 0x00030000,\n\tMPI_CORE_REGS_CNT = 127,\n\tMPI_CORE_SH_REGS_CNT = 16,\n\tTEST_REGS_ADDR = 0x00001000,\n\tTEST_REGS_CNT = 23,\n\tRMII_REGS_ADDR = 0x00001040,\n\tRMII_REGS_CNT = 64,\n\tFCMAC1_REGS_ADDR = 0x00001080,\n\tFCMAC2_REGS_ADDR = 0x000010c0,\n\tFCMAC_REGS_CNT = 64,\n\tFC1_MBX_REGS_ADDR = 0x00001100,\n\tFC2_MBX_REGS_ADDR = 0x00001240,\n\tFC_MBX_REGS_CNT = 64,\n\tIDE_REGS_ADDR = 0x00001140,\n\tIDE_REGS_CNT = 64,\n\tNIC1_MBX_REGS_ADDR = 0x00001180,\n\tNIC2_MBX_REGS_ADDR = 0x00001280,\n\tNIC_MBX_REGS_CNT = 64,\n\tSMBUS_REGS_ADDR = 0x00001200,\n\tSMBUS_REGS_CNT = 64,\n\tI2C_REGS_ADDR = 0x00001fc0,\n\tI2C_REGS_CNT = 64,\n\tMEMC_REGS_ADDR = 0x00003000,\n\tMEMC_REGS_CNT = 256,\n\tPBUS_REGS_ADDR = 0x00007c00,\n\tPBUS_REGS_CNT = 256,\n\tMDE_REGS_ADDR = 0x00010000,\n\tMDE_REGS_CNT = 6,\n\tCODE_RAM_ADDR = 0x00020000,\n\tCODE_RAM_CNT = 0x2000,\n\tMEMC_RAM_ADDR = 0x00100000,\n\tMEMC_RAM_CNT = 0x2000,\n};\n\n#define MPI_COREDUMP_COOKIE 0x5555aaaa\nstruct mpi_coredump_global_header {\n\tu32\tcookie;\n\tu8\tid_string[16];\n\tu32\ttime_lo;\n\tu32\ttime_hi;\n\tu32\timage_size;\n\tu32\theader_size;\n\tu8\tinfo[220];\n};\n\nstruct mpi_coredump_segment_header {\n\tu32\tcookie;\n\tu32\tseg_num;\n\tu32\tseg_size;\n\tu32\textra;\n\tu8\tdescription[16];\n};\n\n \nenum {\n\tCORE_SEG_NUM = 1,\n\tTEST_LOGIC_SEG_NUM = 2,\n\tRMII_SEG_NUM = 3,\n\tFCMAC1_SEG_NUM = 4,\n\tFCMAC2_SEG_NUM = 5,\n\tFC1_MBOX_SEG_NUM = 6,\n\tIDE_SEG_NUM = 7,\n\tNIC1_MBOX_SEG_NUM = 8,\n\tSMBUS_SEG_NUM = 9,\n\tFC2_MBOX_SEG_NUM = 10,\n\tNIC2_MBOX_SEG_NUM = 11,\n\tI2C_SEG_NUM = 12,\n\tMEMC_SEG_NUM = 13,\n\tPBUS_SEG_NUM = 14,\n\tMDE_SEG_NUM = 15,\n\tNIC1_CONTROL_SEG_NUM = 16,\n\tNIC2_CONTROL_SEG_NUM = 17,\n\tNIC1_XGMAC_SEG_NUM = 18,\n\tNIC2_XGMAC_SEG_NUM = 19,\n\tWCS_RAM_SEG_NUM = 20,\n\tMEMC_RAM_SEG_NUM = 21,\n\tXAUI_AN_SEG_NUM = 22,\n\tXAUI_HSS_PCS_SEG_NUM = 23,\n\tXFI_AN_SEG_NUM = 24,\n\tXFI_TRAIN_SEG_NUM = 25,\n\tXFI_HSS_PCS_SEG_NUM = 26,\n\tXFI_HSS_TX_SEG_NUM = 27,\n\tXFI_HSS_RX_SEG_NUM = 28,\n\tXFI_HSS_PLL_SEG_NUM = 29,\n\tMISC_NIC_INFO_SEG_NUM = 30,\n\tINTR_STATES_SEG_NUM = 31,\n\tCAM_ENTRIES_SEG_NUM = 32,\n\tROUTING_WORDS_SEG_NUM = 33,\n\tETS_SEG_NUM = 34,\n\tPROBE_DUMP_SEG_NUM = 35,\n\tROUTING_INDEX_SEG_NUM = 36,\n\tMAC_PROTOCOL_SEG_NUM = 37,\n\tXAUI2_AN_SEG_NUM = 38,\n\tXAUI2_HSS_PCS_SEG_NUM = 39,\n\tXFI2_AN_SEG_NUM = 40,\n\tXFI2_TRAIN_SEG_NUM = 41,\n\tXFI2_HSS_PCS_SEG_NUM = 42,\n\tXFI2_HSS_TX_SEG_NUM = 43,\n\tXFI2_HSS_RX_SEG_NUM = 44,\n\tXFI2_HSS_PLL_SEG_NUM = 45,\n\tSEM_REGS_SEG_NUM = 50\n\n};\n\n \n#define NIC_REGS_DUMP_WORD_COUNT\t\t64\n \n#define XGMAC_DUMP_WORD_COUNT\t\t(XGMAC_REGISTER_END / 4)\n \n#define XG_SERDES_XAUI_AN_COUNT\t\t14\n#define XG_SERDES_XAUI_HSS_PCS_COUNT\t33\n#define XG_SERDES_XFI_AN_COUNT\t\t14\n#define XG_SERDES_XFI_TRAIN_COUNT\t\t12\n#define XG_SERDES_XFI_HSS_PCS_COUNT\t15\n#define XG_SERDES_XFI_HSS_TX_COUNT\t\t32\n#define XG_SERDES_XFI_HSS_RX_COUNT\t\t32\n#define XG_SERDES_XFI_HSS_PLL_COUNT\t32\n\n \n#define ETS_REGS_DUMP_WORD_COUNT\t\t10\n\n \n#define PRB_MX_ADDR_PRB_WORD_COUNT\t\t(1 + (PRB_MX_ADDR_MAX_MUX * 2))\n#define PRB_MX_DUMP_TOT_COUNT\t\t(PRB_MX_ADDR_PRB_WORD_COUNT * \\\n\t\t\t\t\t\t\tPRB_MX_ADDR_VALID_TOTAL)\n \n#define RT_IDX_DUMP_ENTRIES\t\t\t48\n#define RT_IDX_DUMP_WORDS_PER_ENTRY\t4\n#define RT_IDX_DUMP_TOT_WORDS\t\t(RT_IDX_DUMP_ENTRIES * \\\n\t\t\t\t\t\tRT_IDX_DUMP_WORDS_PER_ENTRY)\n \n#define MAC_ADDR_DUMP_ENTRIES \\\n\t((MAC_ADDR_MAX_CAM_ENTRIES * MAC_ADDR_MAX_CAM_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MULTICAST_ENTRIES * MAC_ADDR_MAX_MULTICAST_WCOUNT) + \\\n\t(MAC_ADDR_MAX_VLAN_ENTRIES * MAC_ADDR_MAX_VLAN_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MCAST_FLTR_ENTRIES * MAC_ADDR_MAX_MCAST_FLTR_WCOUNT) + \\\n\t(MAC_ADDR_MAX_FC_MAC_ENTRIES * MAC_ADDR_MAX_FC_MAC_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MGMT_MAC_ENTRIES * MAC_ADDR_MAX_MGMT_MAC_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MGMT_VLAN_ENTRIES * MAC_ADDR_MAX_MGMT_VLAN_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MGMT_V4_ENTRIES * MAC_ADDR_MAX_MGMT_V4_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MGMT_V6_ENTRIES * MAC_ADDR_MAX_MGMT_V6_WCOUNT) + \\\n\t(MAC_ADDR_MAX_MGMT_TU_DP_ENTRIES * MAC_ADDR_MAX_MGMT_TU_DP_WCOUNT))\n#define MAC_ADDR_DUMP_WORDS_PER_ENTRY\t2\n#define MAC_ADDR_DUMP_TOT_WORDS\t\t(MAC_ADDR_DUMP_ENTRIES * \\\n\t\t\t\t\t\tMAC_ADDR_DUMP_WORDS_PER_ENTRY)\n \n#define MAX_SEMAPHORE_FUNCTIONS\t\t4\n \n#define RISC_124\t\t0x0003007c\n#define RISC_127\t\t0x0003007f\n#define SHADOW_OFFSET\t0xb0000000\n#define SHADOW_REG_SHIFT\t20\n\nstruct qlge_nic_misc {\n\tu32 rx_ring_count;\n\tu32 tx_ring_count;\n\tu32 intr_count;\n\tu32 function;\n};\n\nstruct qlge_reg_dump {\n\t \n\tstruct mpi_coredump_global_header mpi_global_header;\n\n\t \n\tstruct mpi_coredump_segment_header nic_regs_seg_hdr;\n\tu32 nic_regs[64];\n\n\t \n\tstruct mpi_coredump_segment_header misc_nic_seg_hdr;\n\tstruct qlge_nic_misc misc_nic_info;\n\n\t \n\t \n\tstruct mpi_coredump_segment_header intr_states_seg_hdr;\n\tu32 intr_states[MAX_CPUS];\n\n\t \n\t \n\tstruct mpi_coredump_segment_header cam_entries_seg_hdr;\n\tu32 cam_entries[(16 * 3) + (32 * 3)];\n\n\t \n\tstruct mpi_coredump_segment_header nic_routing_words_seg_hdr;\n\tu32 nic_routing_words[16];\n\n\t \n\tstruct mpi_coredump_segment_header ets_seg_hdr;\n\tu32 ets[8 + 2];\n};\n\nstruct qlge_mpi_coredump {\n\t \n\tstruct mpi_coredump_global_header mpi_global_header;\n\n\t \n\tstruct mpi_coredump_segment_header core_regs_seg_hdr;\n\tu32 mpi_core_regs[MPI_CORE_REGS_CNT];\n\tu32 mpi_core_sh_regs[MPI_CORE_SH_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header test_logic_regs_seg_hdr;\n\tu32 test_logic_regs[TEST_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header rmii_regs_seg_hdr;\n\tu32 rmii_regs[RMII_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header fcmac1_regs_seg_hdr;\n\tu32 fcmac1_regs[FCMAC_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header fcmac2_regs_seg_hdr;\n\tu32 fcmac2_regs[FCMAC_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header fc1_mbx_regs_seg_hdr;\n\tu32 fc1_mbx_regs[FC_MBX_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header ide_regs_seg_hdr;\n\tu32 ide_regs[IDE_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header nic1_mbx_regs_seg_hdr;\n\tu32 nic1_mbx_regs[NIC_MBX_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header smbus_regs_seg_hdr;\n\tu32 smbus_regs[SMBUS_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header fc2_mbx_regs_seg_hdr;\n\tu32 fc2_mbx_regs[FC_MBX_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header nic2_mbx_regs_seg_hdr;\n\tu32 nic2_mbx_regs[NIC_MBX_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header i2c_regs_seg_hdr;\n\tu32 i2c_regs[I2C_REGS_CNT];\n\t \n\tstruct mpi_coredump_segment_header memc_regs_seg_hdr;\n\tu32 memc_regs[MEMC_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header pbus_regs_seg_hdr;\n\tu32 pbus_regs[PBUS_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header mde_regs_seg_hdr;\n\tu32 mde_regs[MDE_REGS_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header nic_regs_seg_hdr;\n\tu32 nic_regs[NIC_REGS_DUMP_WORD_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header nic2_regs_seg_hdr;\n\tu32 nic2_regs[NIC_REGS_DUMP_WORD_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xgmac1_seg_hdr;\n\tu32 xgmac1[XGMAC_DUMP_WORD_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xgmac2_seg_hdr;\n\tu32 xgmac2[XGMAC_DUMP_WORD_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header code_ram_seg_hdr;\n\tu32 code_ram[CODE_RAM_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header memc_ram_seg_hdr;\n\tu32 memc_ram[MEMC_RAM_CNT];\n\n\t \n\tstruct mpi_coredump_segment_header xaui_an_hdr;\n\tu32 serdes_xaui_an[XG_SERDES_XAUI_AN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xaui_hss_pcs_hdr;\n\tu32 serdes_xaui_hss_pcs[XG_SERDES_XAUI_HSS_PCS_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_an_hdr;\n\tu32 serdes_xfi_an[XG_SERDES_XFI_AN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_train_hdr;\n\tu32 serdes_xfi_train[XG_SERDES_XFI_TRAIN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_hss_pcs_hdr;\n\tu32 serdes_xfi_hss_pcs[XG_SERDES_XFI_HSS_PCS_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_hss_tx_hdr;\n\tu32 serdes_xfi_hss_tx[XG_SERDES_XFI_HSS_TX_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_hss_rx_hdr;\n\tu32 serdes_xfi_hss_rx[XG_SERDES_XFI_HSS_RX_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi_hss_pll_hdr;\n\tu32 serdes_xfi_hss_pll[XG_SERDES_XFI_HSS_PLL_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header misc_nic_seg_hdr;\n\tstruct qlge_nic_misc misc_nic_info;\n\n\t \n\t \n\tstruct mpi_coredump_segment_header intr_states_seg_hdr;\n\tu32 intr_states[MAX_RX_RINGS];\n\n\t \n\t \n\tstruct mpi_coredump_segment_header cam_entries_seg_hdr;\n\tu32 cam_entries[(16 * 3) + (32 * 3)];\n\n\t \n\tstruct mpi_coredump_segment_header nic_routing_words_seg_hdr;\n\tu32 nic_routing_words[16];\n\t \n\tstruct mpi_coredump_segment_header ets_seg_hdr;\n\tu32 ets[ETS_REGS_DUMP_WORD_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header probe_dump_seg_hdr;\n\tu32 probe_dump[PRB_MX_DUMP_TOT_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header routing_reg_seg_hdr;\n\tu32 routing_regs[RT_IDX_DUMP_TOT_WORDS];\n\n\t \n\tstruct mpi_coredump_segment_header mac_prot_reg_seg_hdr;\n\tu32 mac_prot_regs[MAC_ADDR_DUMP_TOT_WORDS];\n\n\t \n\tstruct mpi_coredump_segment_header xaui2_an_hdr;\n\tu32 serdes2_xaui_an[XG_SERDES_XAUI_AN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xaui2_hss_pcs_hdr;\n\tu32 serdes2_xaui_hss_pcs[XG_SERDES_XAUI_HSS_PCS_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_an_hdr;\n\tu32 serdes2_xfi_an[XG_SERDES_XFI_AN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_train_hdr;\n\tu32 serdes2_xfi_train[XG_SERDES_XFI_TRAIN_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_hss_pcs_hdr;\n\tu32 serdes2_xfi_hss_pcs[XG_SERDES_XFI_HSS_PCS_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_hss_tx_hdr;\n\tu32 serdes2_xfi_hss_tx[XG_SERDES_XFI_HSS_TX_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_hss_rx_hdr;\n\tu32 serdes2_xfi_hss_rx[XG_SERDES_XFI_HSS_RX_COUNT];\n\n\t \n\tstruct mpi_coredump_segment_header xfi2_hss_pll_hdr;\n\tu32 serdes2_xfi_hss_pll[XG_SERDES_XFI_HSS_PLL_COUNT];\n\n\t \n\t \n\tstruct mpi_coredump_segment_header sem_regs_seg_hdr;\n\tu32 sem_regs[MAX_SEMAPHORE_FUNCTIONS];\n};\n\n \nstruct intr_context {\n\tstruct qlge_adapter *qdev;\n\tu32 intr;\n\tu32 irq_mask;\t\t \n\tu32 hooked;\n\tu32 intr_en_mask;\t \n\tu32 intr_dis_mask;\t \n\tu32 intr_read_mask;\t \n\tchar name[IFNAMSIZ * 2];\n\tirq_handler_t handler;\n};\n\n \nenum {\n\tQL_ADAPTER_UP = 0,\t \n\tQL_LEGACY_ENABLED = 1,\n\tQL_MSI_ENABLED = 2,\n\tQL_MSIX_ENABLED = 3,\n\tQL_DMA64 = 4,\n\tQL_PROMISCUOUS = 5,\n\tQL_ALLMULTI = 6,\n\tQL_PORT_CFG = 7,\n\tQL_CAM_RT_SET = 8,\n\tQL_SELFTEST = 9,\n\tQL_LB_LINK_UP = 10,\n\tQL_FRC_COREDUMP = 11,\n\tQL_EEH_FATAL = 12,\n\tQL_ASIC_RECOVERY = 14,  \n};\n\n \nenum {\n\tSTS_LOOPBACK_MASK = 0x00000700,\n\tSTS_LOOPBACK_PCS = 0x00000100,\n\tSTS_LOOPBACK_HSS = 0x00000200,\n\tSTS_LOOPBACK_EXT = 0x00000300,\n\tSTS_PAUSE_MASK = 0x000000c0,\n\tSTS_PAUSE_STD = 0x00000040,\n\tSTS_PAUSE_PRI = 0x00000080,\n\tSTS_SPEED_MASK = 0x00000038,\n\tSTS_SPEED_100Mb = 0x00000000,\n\tSTS_SPEED_1Gb = 0x00000008,\n\tSTS_SPEED_10Gb = 0x00000010,\n\tSTS_LINK_TYPE_MASK = 0x00000007,\n\tSTS_LINK_TYPE_XFI = 0x00000001,\n\tSTS_LINK_TYPE_XAUI = 0x00000002,\n\tSTS_LINK_TYPE_XFI_BP = 0x00000003,\n\tSTS_LINK_TYPE_XAUI_BP = 0x00000004,\n\tSTS_LINK_TYPE_10GBASET = 0x00000005,\n};\n\n \nenum {\n\tCFG_JUMBO_FRAME_SIZE = 0x00010000,\n\tCFG_PAUSE_MASK = 0x00000060,\n\tCFG_PAUSE_STD = 0x00000020,\n\tCFG_PAUSE_PRI = 0x00000040,\n\tCFG_DCBX = 0x00000010,\n\tCFG_LOOPBACK_MASK = 0x00000007,\n\tCFG_LOOPBACK_PCS = 0x00000002,\n\tCFG_LOOPBACK_HSS = 0x00000004,\n\tCFG_LOOPBACK_EXT = 0x00000006,\n\tCFG_DEFAULT_MAX_FRAME_SIZE = 0x00002580,\n};\n\nstruct nic_operations {\n\tint (*get_flash)(struct qlge_adapter *qdev);\n\tint (*port_initialize)(struct qlge_adapter *qdev);\n};\n\nstruct qlge_netdev_priv {\n\tstruct qlge_adapter *qdev;\n\tstruct net_device *ndev;\n};\n\nstatic inline\nstruct qlge_adapter *netdev_to_qdev(struct net_device *ndev)\n{\n\tstruct qlge_netdev_priv *ndev_priv = netdev_priv(ndev);\n\n\treturn ndev_priv->qdev;\n}\n\n \nstruct qlge_adapter {\n\tstruct ricb ricb;\n\tunsigned long flags;\n\tu32 wol;\n\n\tstruct nic_stats nic_stats;\n\n\tunsigned long active_vlans[BITS_TO_LONGS(VLAN_N_VID)];\n\n\t \n\tstruct pci_dev *pdev;\n\tstruct net_device *ndev;\t \n\n\tstruct devlink_health_reporter *reporter;\n\t \n\tu32 chip_rev_id;\n\tu32 fw_rev_id;\n\tu32 func;\t\t \n\tu32 alt_func;\t\t \n\tu32 port;\t\t \n\n\tspinlock_t adapter_lock;\n\tspinlock_t stats_lock;\n\n\t \n\tvoid __iomem *reg_base;\n\tvoid __iomem *doorbell_area;\n\tu32 doorbell_area_size;\n\n\tu32 msg_enable;\n\n\t \n\tvoid *rx_ring_shadow_reg_area;\n\tdma_addr_t rx_ring_shadow_reg_dma;\n\tvoid *tx_ring_shadow_reg_area;\n\tdma_addr_t tx_ring_shadow_reg_dma;\n\n\tu32 mailbox_in;\n\tu32 mailbox_out;\n\tstruct mbox_params idc_mbc;\n\tstruct mutex\tmpi_mutex;\n\n\tint tx_ring_size;\n\tint rx_ring_size;\n\tu32 intr_count;\n\tstruct msix_entry *msi_x_entry;\n\tstruct intr_context intr_context[MAX_RX_RINGS];\n\n\tint tx_ring_count;\t \n\tu32 rss_ring_count;\t \n\t \n\tint rx_ring_count;\n\tint ring_mem_size;\n\tvoid *ring_mem;\n\n\tstruct rx_ring rx_ring[MAX_RX_RINGS];\n\tstruct tx_ring tx_ring[MAX_TX_RINGS];\n\tunsigned int lbq_buf_order;\n\tu32 lbq_buf_size;\n\n\tint rx_csum;\n\tu32 default_rx_queue;\n\n\tu16 rx_coalesce_usecs;\t \n\tu16 rx_max_coalesced_frames;\t \n\tu16 tx_coalesce_usecs;\t \n\tu16 tx_max_coalesced_frames;\t \n\n\tu32 xg_sem_mask;\n\tu32 port_link_up;\n\tu32 port_init;\n\tu32 link_status;\n\tstruct qlge_mpi_coredump *mpi_coredump;\n\tu32 link_config;\n\tu32 led_config;\n\tu32 max_frame_size;\n\n\tunion flash_params flash;\n\n\tstruct workqueue_struct *workqueue;\n\tstruct delayed_work asic_reset_work;\n\tstruct delayed_work mpi_reset_work;\n\tstruct delayed_work mpi_work;\n\tstruct delayed_work mpi_port_cfg_work;\n\tstruct delayed_work mpi_idc_work;\n\tstruct completion ide_completion;\n\tconst struct nic_operations *nic_ops;\n\tu16 device_id;\n\tstruct timer_list timer;\n\tatomic_t lb_count;\n\t \n\tchar current_mac_addr[ETH_ALEN];\n};\n\n \nstatic inline u32 qlge_read32(const struct qlge_adapter *qdev, int reg)\n{\n\treturn readl(qdev->reg_base + reg);\n}\n\n \nstatic inline void qlge_write32(const struct qlge_adapter *qdev, int reg, u32 val)\n{\n\twritel(val, qdev->reg_base + reg);\n}\n\n \nstatic inline void qlge_write_db_reg(u32 val, void __iomem *addr)\n{\n\twritel(val, addr);\n}\n\n \nstatic inline void qlge_write_db_reg_relaxed(u32 val, void __iomem *addr)\n{\n\twritel_relaxed(val, addr);\n}\n\n \nstatic inline u32 qlge_read_sh_reg(__le32  *addr)\n{\n\tu32 reg;\n\n\treg =  le32_to_cpu(*addr);\n\trmb();\n\treturn reg;\n}\n\nextern char qlge_driver_name[];\nextern const char qlge_driver_version[];\nextern const struct ethtool_ops qlge_ethtool_ops;\n\nint qlge_sem_spinlock(struct qlge_adapter *qdev, u32 sem_mask);\nvoid qlge_sem_unlock(struct qlge_adapter *qdev, u32 sem_mask);\nint qlge_read_xgmac_reg(struct qlge_adapter *qdev, u32 reg, u32 *data);\nint qlge_get_mac_addr_reg(struct qlge_adapter *qdev, u32 type, u16 index,\n\t\t\t  u32 *value);\nint qlge_get_routing_reg(struct qlge_adapter *qdev, u32 index, u32 *value);\nint qlge_write_cfg(struct qlge_adapter *qdev, void *ptr, int size, u32 bit,\n\t\t   u16 q_id);\nvoid qlge_queue_fw_error(struct qlge_adapter *qdev);\nvoid qlge_mpi_work(struct work_struct *work);\nvoid qlge_mpi_reset_work(struct work_struct *work);\nint qlge_wait_reg_rdy(struct qlge_adapter *qdev, u32 reg, u32 bit, u32 ebit);\nvoid qlge_queue_asic_error(struct qlge_adapter *qdev);\nvoid qlge_set_ethtool_ops(struct net_device *ndev);\nint qlge_read_xgmac_reg64(struct qlge_adapter *qdev, u32 reg, u64 *data);\nvoid qlge_mpi_idc_work(struct work_struct *work);\nvoid qlge_mpi_port_cfg_work(struct work_struct *work);\nint qlge_mb_get_fw_state(struct qlge_adapter *qdev);\nint qlge_cam_route_initialize(struct qlge_adapter *qdev);\nint qlge_read_mpi_reg(struct qlge_adapter *qdev, u32 reg, u32 *data);\nint qlge_write_mpi_reg(struct qlge_adapter *qdev, u32 reg, u32 data);\nint qlge_unpause_mpi_risc(struct qlge_adapter *qdev);\nint qlge_pause_mpi_risc(struct qlge_adapter *qdev);\nint qlge_hard_reset_mpi_risc(struct qlge_adapter *qdev);\nint qlge_soft_reset_mpi_risc(struct qlge_adapter *qdev);\nint qlge_dump_risc_ram_area(struct qlge_adapter *qdev, void *buf, u32 ram_addr,\n\t\t\t    int word_count);\nint qlge_core_dump(struct qlge_adapter *qdev, struct qlge_mpi_coredump *mpi_coredump);\nint qlge_mb_about_fw(struct qlge_adapter *qdev);\nint qlge_mb_wol_set_magic(struct qlge_adapter *qdev, u32 enable_wol);\nint qlge_mb_wol_mode(struct qlge_adapter *qdev, u32 wol);\nint qlge_mb_set_led_cfg(struct qlge_adapter *qdev, u32 led_config);\nint qlge_mb_get_led_cfg(struct qlge_adapter *qdev);\nvoid qlge_link_on(struct qlge_adapter *qdev);\nvoid qlge_link_off(struct qlge_adapter *qdev);\nint qlge_mb_set_mgmnt_traffic_ctl(struct qlge_adapter *qdev, u32 control);\nint qlge_mb_get_port_cfg(struct qlge_adapter *qdev);\nint qlge_mb_set_port_cfg(struct qlge_adapter *qdev);\nint qlge_wait_fifo_empty(struct qlge_adapter *qdev);\nvoid qlge_get_dump(struct qlge_adapter *qdev, void *buff);\nnetdev_tx_t qlge_lb_send(struct sk_buff *skb, struct net_device *ndev);\nvoid qlge_check_lb_frame(struct qlge_adapter *qdev, struct sk_buff *skb);\nint qlge_own_firmware(struct qlge_adapter *qdev);\nint qlge_clean_lb_rx_ring(struct rx_ring *rx_ring, int budget);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}