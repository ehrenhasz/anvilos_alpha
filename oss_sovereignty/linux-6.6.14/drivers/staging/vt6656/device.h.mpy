{
  "module_name": "device.h",
  "hash_id": "109c8d493d5419831d188c2baaff026ac33cb189553878c1ce621a9bde2bbf27",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/vt6656/device.h",
  "human_readable_source": " \n \n\n#ifndef __DEVICE_H__\n#define __DEVICE_H__\n\n#include <linux/bits.h>\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/slab.h>\n#include <linux/delay.h>\n#include <linux/device.h>\n#include <linux/firmware.h>\n#include <linux/suspend.h>\n#include <linux/if_arp.h>\n#include <linux/wireless.h>\n#include <linux/timer.h>\n#include <linux/usb.h>\n#include <linux/crc32.h>\n#include <net/mac80211.h>\n\n#ifdef SIOCETHTOOL\n#define DEVICE_ETHTOOL_IOCTL_SUPPORT\n#include <linux/ethtool.h>\n#else\n#undef DEVICE_ETHTOOL_IOCTL_SUPPORT\n#endif\n\n#define RATE_1M\t\t0\n#define RATE_2M\t\t1\n#define RATE_5M\t\t2\n#define RATE_11M\t3\n#define RATE_6M\t\t4\n#define RATE_9M\t\t5\n#define RATE_12M\t6\n#define RATE_18M\t7\n#define RATE_24M\t8\n#define RATE_36M\t9\n#define RATE_48M\t10\n#define RATE_54M\t11\n#define RATE_AUTO\t12\n\n#define MAX_RATE\t\t\t12\n#define VNT_B_RATES\t(BIT(RATE_1M) | BIT(RATE_2M) |\\\n\t\t\tBIT(RATE_5M) | BIT(RATE_11M))\n\n \n\n#include \"wcmd.h\"\n#include \"desc.h\"\n#include \"key.h\"\n#include \"card.h\"\n\n#define VNT_USB_VENDOR_ID                     0x160a\n#define VNT_USB_PRODUCT_ID                    0x3184\n\n#define DEVICE_NAME\t\t\t\"vt6656\"\n#define DEVICE_FULL_DRV_NAM\t\t\"VIA Networking Wireless LAN USB Driver\"\n\n#define DEVICE_VERSION\t\t\t\"mac80211\"\n\n#define FIRMWARE_VERSION\t\t0x133\t\t \n#define FIRMWARE_NAME\t\t\t\"vntwusb.fw\"\n#define FIRMWARE_CHUNK_SIZE\t\t0x400\n\n#define MAX_UINTS\t\t\t8\n#define OPTION_DEFAULT\t\t\t{ [0 ... MAX_UINTS - 1] = -1}\n\n#define DUPLICATE_RX_CACHE_LENGTH       5\n\n#define AUTO_FB_NONE            0\n#define AUTO_FB_0               1\n#define AUTO_FB_1               2\n\n#define FB_RATE0                0\n#define FB_RATE1                1\n\n \n#define ANT_A                   0\n#define ANT_B                   1\n#define ANT_DIVERSITY           2\n#define ANT_RXD_TXA             3\n#define ANT_RXD_TXB             4\n#define ANT_UNKNOWN             0xFF\n#define ANT_TXA                 0\n#define ANT_TXB                 1\n#define ANT_RXA                 2\n#define ANT_RXB                 3\n\n#define BB_VGA_LEVEL            4\n#define BB_VGA_CHANGE_THRESHOLD 3\n\n#define EEP_MAX_CONTEXT_SIZE    256\n\n \n#define EEP_OFS_PAR\t\t0x0\n#define EEP_OFS_ANTENNA\t\t0x17\n#define EEP_OFS_RADIOCTL\t0x18\n#define EEP_OFS_RFTYPE\t\t0x1b\n#define EEP_OFS_MINCHANNEL\t0x1c\n#define EEP_OFS_MAXCHANNEL\t0x1d\n#define EEP_OFS_SIGNATURE\t0x1e\n#define EEP_OFS_ZONETYPE\t0x1f\n#define EEP_OFS_RFTABLE\t\t0x20\n#define EEP_OFS_PWR_CCK\t\t0x20\n#define EEP_OFS_SETPT_CCK\t0x21\n#define EEP_OFS_PWR_OFDMG\t0x23\n\n#define EEP_OFS_CALIB_TX_IQ\t0x24\n#define EEP_OFS_CALIB_TX_DC\t0x25\n#define EEP_OFS_CALIB_RX_IQ\t0x26\n\n#define EEP_OFS_MAJOR_VER\t0x2e\n#define EEP_OFS_MINOR_VER\t0x2f\n\n#define EEP_OFS_CCK_PWR_TBL\t0x30\n#define EEP_OFS_OFDM_PWR_TBL\t0x40\n#define EEP_OFS_OFDMA_PWR_TBL\t0x50\n\n \n#define EEP_ANTENNA_MAIN\tBIT(0)\n#define EEP_ANTENNA_AUX\t\tBIT(1)\n#define EEP_ANTINV\t\tBIT(2)\n\n \n#define EEP_RADIOCTL_ENABLE\tBIT(7)\n\n \n#define MESSAGE_TYPE_READ\t\t0x1\n#define MESSAGE_TYPE_WRITE\t\t0x0\n#define MESSAGE_TYPE_LOCK_OR\t\t0x2\n#define MESSAGE_TYPE_LOCK_AND\t\t0x3\n#define MESSAGE_TYPE_WRITE_MASK\t\t0x4\n#define MESSAGE_TYPE_CARDINIT\t\t0x5\n#define MESSAGE_TYPE_INIT_RSP\t\t0x6\n#define MESSAGE_TYPE_MACSHUTDOWN\t0x7\n#define MESSAGE_TYPE_SETKEY\t\t0x8\n#define MESSAGE_TYPE_CLRKEYENTRY\t0x9\n#define MESSAGE_TYPE_WRITE_MISCFF\t0xa\n#define MESSAGE_TYPE_SET_ANTMD\t\t0xb\n#define MESSAGE_TYPE_SELECT_CHANNEL\t0xc\n#define MESSAGE_TYPE_SET_TSFTBTT\t0xd\n#define MESSAGE_TYPE_SET_SSTIFS\t\t0xe\n#define MESSAGE_TYPE_CHANGE_BBTYPE\t0xf\n#define MESSAGE_TYPE_DISABLE_PS\t\t0x10\n#define MESSAGE_TYPE_WRITE_IFRF\t\t0x11\n\n \n#define MESSAGE_REQUEST_MEM\t\t0x1\n#define MESSAGE_REQUEST_BBREG\t\t0x2\n#define MESSAGE_REQUEST_MACREG\t\t0x3\n#define MESSAGE_REQUEST_EEPROM\t\t0x4\n#define MESSAGE_REQUEST_TSF\t\t0x5\n#define MESSAGE_REQUEST_TBTT\t\t0x6\n#define MESSAGE_REQUEST_BBAGC\t\t0x7\n#define MESSAGE_REQUEST_VERSION\t\t0x8\n#define MESSAGE_REQUEST_RF_INIT\t\t0x9\n#define MESSAGE_REQUEST_RF_INIT2\t0xa\n#define MESSAGE_REQUEST_RF_CH0\t\t0xb\n#define MESSAGE_REQUEST_RF_CH1\t\t0xc\n#define MESSAGE_REQUEST_RF_CH2\t\t0xd\n\n \n#define USB_REG4\t\t\t0x604\n\n#define DEVICE_INIT_COLD\t0x0  \n#define DEVICE_INIT_RESET\t0x1  \n#define DEVICE_INIT_DXPL\t0x2  \n\n \nstruct vnt_cmd_card_init {\n\tu8 init_class;\n\tu8 exist_sw_net_addr;\n\tu8 sw_net_addr[6];\n\tu8 short_retry_limit;\n\tu8 long_retry_limit;\n};\n\nstruct vnt_rsp_card_init {\n\tu8 status;\n\tu8 net_addr[6];\n\tu8 rf_type;\n\tu8 min_channel;\n\tu8 max_channel;\n};\n\n \n\n \nenum {\n\tCONTEXT_DATA_PACKET = 0,\n\tCONTEXT_BEACON_PACKET\n};\n\nstruct vnt_rx_header {\n\tu32 wbk_status;\n\tu8 rx_sts;\n\tu8 rx_rate;\n\tu16 pay_load_len;\n} __packed;\n\nstruct vnt_rx_tail {\n\t__le64 tsf_time;\n\tu8 sq;\n\tu8 new_rsr;\n\tu8 rssi;\n\tu8 rsr;\n\tu8 sq_3;\n} __packed;\n\n \nstruct vnt_rcb {\n\tvoid *priv;\n\tstruct urb *urb;\n\tstruct sk_buff *skb;\n};\n\n \nstruct vnt_usb_send_context {\n\tvoid *priv;\n\tstruct sk_buff *skb;\n\tvoid *tx_buffer;\n\tu32 frame_len;\n\tu16 tx_hdr_size;\n\tu16 tx_rate;\n\tu8 type;\n\tu8 pkt_no;\n\tu8 pkt_type;\n\tbool in_use;\n};\n\n \nstruct vnt_interrupt_buffer {\n\tu8 *data_buf;\n};\n\n \n#define DEVICE_FLAGS_UNPLUG\t\t0\n#define DEVICE_FLAGS_DISCONNECTED\t1\n\nstruct vnt_private {\n\t \n\tstruct ieee80211_hw *hw;\n\tstruct ieee80211_vif *vif;\n\tu8 mac_hw;\n\t \n\tstruct usb_device *usb;\n\tstruct usb_interface *intf;\n\n\tu64 tsf_time;\n\n\tu32 rx_buf_sz;\n\tint mc_list_count;\n\n\tspinlock_t lock;\t\t \n\tstruct mutex usb_lock;\t\t \n\n\tunsigned long flags;\n\n\t \n\tstruct urb *interrupt_urb;\n\tu32 int_interval;\n\n\t \n\tstruct vnt_rcb *rcb[CB_MAX_RX_DESC];\n\tu32 num_rcb;\n\n\t \n\tstruct vnt_usb_send_context *tx_context[CB_MAX_TX_DESC];\n\tstruct usb_anchor tx_submitted;\n\tu32 num_tx_context;\n\n\t \n\tstruct vnt_interrupt_buffer int_buf;\n\n\t \n\tu16 firmware_version;\n\tu8 local_id;\n\tu8 rf_type;\n\tu8 bb_rx_conf;\n\n\tstruct vnt_cmd_card_init init_command;\n\tstruct vnt_rsp_card_init init_response;\n\tu8 current_net_addr[ETH_ALEN] __aligned(2);\n\tu8 permanent_net_addr[ETH_ALEN] __aligned(2);\n\n\tu8 exist_sw_net_addr;\n\n\tu64 current_tsf;\n\n\t \n\tu32 current_rssi;\n\n\t \n\tint tx_rx_ant_inv;\n\tu32 rx_antenna_sel;\n\tu8 rx_antenna_mode;\n\tu8 tx_antenna_mode;\n\tu8 radio_ctl;\n\n\t \n\tu32 sifs;   \n\tu32 difs;   \n\tu32 eifs;   \n\tu32 slot;   \n\n\t \n\tu8 bb_type;  \n\tu8 packet_type;  \n\tu32 basic_rates;\n\tu8 top_ofdm_basic_rate;\n\tu8 top_cck_basic_rate;\n\n\tu8 eeprom[EEP_MAX_CONTEXT_SIZE];   \n\n\tu8 preamble_type;\n\n\t \n\tu8 cck_pwr;\n\tu8 ofdm_pwr_g;\n\tu8 ofdm_pwr_a;\n\tu8 power;\n\tu8 cck_pwr_tbl[14];\n\tu8 ofdm_pwr_tbl[14];\n\tu8 ofdm_a_pwr_tbl[42];\n\n\tu16 tx_rate_fb0;\n\tu16 tx_rate_fb1;\n\n\tenum nl80211_iftype op_mode;\n\n\tint short_slot_time;\n\n\t \n\tu16 current_aid;\n\n\t \n\tu16 seq_counter;\n\n\tenum vnt_cmd_state command_state;\n\n\tenum vnt_cmd command;\n\n\t \n\n\tenum vnt_cmd cmd_queue[CMD_Q_SIZE];\n\tu32 cmd_dequeue_idx;\n\tu32 cmd_enqueue_idx;\n\tu32 free_cmd_queue;\n\tint cmd_running;\n\n\tunsigned long key_entry_inuse;\n\n\tu8 auto_fb_ctrl;\n\n\t \n\tu8 bb_vga[BB_VGA_LEVEL];\n\n\tu8 bb_pre_ed_rssi;\n\tu8 bb_pre_ed_index;\n\n\t \n\tstruct delayed_work run_command_work;\n\n\tstruct ieee80211_low_level_stats low_stats;\n};\n\nint vnt_init(struct vnt_private *priv);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}