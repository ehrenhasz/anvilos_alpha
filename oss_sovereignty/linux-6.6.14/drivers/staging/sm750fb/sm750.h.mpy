{
  "module_name": "sm750.h",
  "hash_id": "fb82e2ff0b4d35f35e3847b1143dc5a3e1ec933b08bd71718d72edf2bea66198",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/sm750fb/sm750.h",
  "human_readable_source": " \n#ifndef LYNXDRV_H_\n#define LYNXDRV_H_\n\n#define FB_ACCEL_SMI 0xab\n\n#define MHZ(x) ((x) * 1000000)\n\n#define DEFAULT_SM750_CHIP_CLOCK\t290\n#define DEFAULT_SM750LE_CHIP_CLOCK\t333\n#ifndef SM750LE_REVISION_ID\n#define SM750LE_REVISION_ID ((unsigned char)0xfe)\n#endif\n\nenum sm750_pnltype {\n\tsm750_24TFT = 0,\t \n\tsm750_dualTFT = 2,\t \n\tsm750_doubleTFT = 1,\t \n};\n\n \nenum sm750_dataflow {\n\tsm750_simul_pri,\t \n\tsm750_simul_sec,\t \n\tsm750_dual_normal,\t \n\tsm750_dual_swap,\t \n};\n\nenum sm750_channel {\n\tsm750_primary = 0,\n\t \n\tsm750_secondary = 1,\n};\n\nenum sm750_path {\n\tsm750_panel = 1,\n\tsm750_crt = 2,\n\tsm750_pnc = 3,\t \n};\n\nstruct init_status {\n\tushort powerMode;\n\t \n\tushort chip_clk;\n\tushort mem_clk;\n\tushort master_clk;\n\tushort setAllEngOff;\n\tushort resetMemory;\n};\n\nstruct lynx_accel {\n\t \n\tvolatile unsigned char __iomem *dprBase;\n\t \n\tvolatile unsigned char __iomem *dpPortBase;\n\n\t \n\tvoid (*de_init)(struct lynx_accel *accel);\n\n\tint (*de_wait)(void); \n\n\tint (*de_fillrect)(struct lynx_accel *accel,\n\t\t\t   u32 base, u32 pitch, u32 bpp,\n\t\t\t   u32 x, u32 y, u32 width, u32 height,\n\t\t\t   u32 color, u32 rop);\n\n\tint (*de_copyarea)(struct lynx_accel *accel,\n\t\t\t   u32 s_base, u32 s_pitch,\n\t\t\t   u32 sx, u32 sy,\n\t\t\t   u32 d_base, u32 d_pitch,\n\t\t\t   u32 bpp, u32 dx, u32 dy,\n\t\t\t   u32 width, u32 height,\n\t\t\t   u32 rop2);\n\n\tint (*de_imageblit)(struct lynx_accel *accel, const char *p_srcbuf,\n\t\t\t    u32 src_delta, u32 start_bit, u32 d_base, u32 d_pitch,\n\t\t\t    u32 byte_per_pixel, u32 dx, u32 dy, u32 width,\n\t\t\t    u32 height, u32 f_color, u32 b_color, u32 rop2);\n\n};\n\nstruct sm750_dev {\n\t \n\tu16 devid;\n\tu8 revid;\n\tstruct pci_dev *pdev;\n\tstruct fb_info *fbinfo[2];\n\tstruct lynx_accel accel;\n\tint accel_off;\n\tint fb_count;\n\tint mtrr_off;\n\tstruct{\n\t\tint vram;\n\t} mtrr;\n\t \n\tunsigned long vidmem_start;\n\tunsigned long vidreg_start;\n\t__u32 vidmem_size;\n\t__u32 vidreg_size;\n\tvoid __iomem *pvReg;\n\tunsigned char __iomem *pvMem;\n\t \n\tspinlock_t slock;\n\n\tstruct init_status initParm;\n\tenum sm750_pnltype pnltype;\n\tenum sm750_dataflow dataflow;\n\tint nocrt;\n\n\t \n\tint hwCursor;\n};\n\nstruct lynx_cursor {\n\t \n\tint w;\n\tint h;\n\tint size;\n\t \n\tint max_w;\n\tint max_h;\n\t \n\tchar __iomem *vstart;\n\tint offset;\n\t \n\tvolatile char __iomem *mmio;\n};\n\nstruct lynxfb_crtc {\n\tunsigned char __iomem *v_cursor;  \n\tunsigned char __iomem *v_screen;  \n\tint o_cursor;  \n\tint o_screen;  \n\tint channel; \n\tresource_size_t vidmem_size; \n\n\t \n\tu16 line_pad; \n\tu16 xpanstep;\n\tu16 ypanstep;\n\tu16 ywrapstep;\n\n\tvoid *priv;\n\n\t \n\tstruct lynx_cursor cursor;\n};\n\nstruct lynxfb_output {\n\tint dpms;\n\tint paths;\n\t \n\n\tint *channel;\n\t \n\tvoid *priv;\n\n\tint (*proc_setBLANK)(struct lynxfb_output *output, int blank);\n};\n\nstruct lynxfb_par {\n\t \n\tint index;\n\tunsigned int pseudo_palette[256];\n\tstruct lynxfb_crtc crtc;\n\tstruct lynxfb_output output;\n\tstruct fb_info *info;\n\tstruct sm750_dev *dev;\n};\n\nstatic inline unsigned long ps_to_hz(unsigned int psvalue)\n{\n\tunsigned long long numerator = 1000 * 1000 * 1000 * 1000ULL;\n\t \n\tdo_div(numerator, psvalue);\n\treturn (unsigned long)numerator;\n}\n\nint hw_sm750_map(struct sm750_dev *sm750_dev, struct pci_dev *pdev);\nint hw_sm750_inithw(struct sm750_dev *sm750_dev, struct pci_dev *pdev);\nvoid hw_sm750_initAccel(struct sm750_dev *sm750_dev);\nint hw_sm750_deWait(void);\nint hw_sm750le_deWait(void);\n\nint hw_sm750_output_setMode(struct lynxfb_output *output,\n\t\t\t    struct fb_var_screeninfo *var,\n\t\t\t    struct fb_fix_screeninfo *fix);\n\nint hw_sm750_crtc_checkMode(struct lynxfb_crtc *crtc,\n\t\t\t    struct fb_var_screeninfo *var);\n\nint hw_sm750_crtc_setMode(struct lynxfb_crtc *crtc,\n\t\t\t  struct fb_var_screeninfo *var,\n\t\t\t  struct fb_fix_screeninfo *fix);\n\nint hw_sm750_setColReg(struct lynxfb_crtc *crtc, ushort index,\n\t\t       ushort red, ushort green, ushort blue);\n\nint hw_sm750_setBLANK(struct lynxfb_output *output, int blank);\nint hw_sm750le_setBLANK(struct lynxfb_output *output, int blank);\nint hw_sm750_pan_display(struct lynxfb_crtc *crtc,\n\t\t\t const struct fb_var_screeninfo *var,\n\t\t\t const struct fb_info *info);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}