{
  "module_name": "rtw_cmd.h",
  "hash_id": "0892dcebecff40dfb9d3d40e3dd341a8b4cbf04ca3ab6218dd1ac28de894e1d8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/include/rtw_cmd.h",
  "human_readable_source": " \n \n#ifndef __RTW_CMD_H_\n#define __RTW_CMD_H_\n\n#include <linux/completion.h>\n\n#define C2H_MEM_SZ (16*1024)\n\n\t#define FREE_CMDOBJ_SZ\t128\n\n\t#define MAX_CMDSZ\t1024\n\t#define MAX_RSPSZ\t512\n\t#define MAX_EVTSZ\t1024\n\n\t#define CMDBUFF_ALIGN_SZ 512\n\n\tstruct cmd_obj {\n\t\tstruct adapter *padapter;\n\t\tu16 cmdcode;\n\t\tu8 res;\n\t\tu8 *parmbuf;\n\t\tu32 cmdsz;\n\t\tu8 *rsp;\n\t\tu32 rspsz;\n\t\tstruct submit_ctx *sctx;\n\t\tstruct list_head\tlist;\n\t};\n\n\t \n\tenum {\n\t\tRTW_CMDF_DIRECTLY = BIT0,\n\t\tRTW_CMDF_WAIT_ACK = BIT1,\n\t};\n\n\tstruct cmd_priv {\n\t\tstruct completion cmd_queue_comp;\n\t\tstruct completion terminate_cmdthread_comp;\n\t\tstruct __queue\tcmd_queue;\n\t\tu8 cmd_seq;\n\t\tu8 *cmd_buf;\t \n\t\tu8 *cmd_allocated_buf;\n\t\tu8 *rsp_buf;\t \n\t\tu8 *rsp_allocated_buf;\n\t\tu32 cmd_issued_cnt;\n\t\tu32 cmd_done_cnt;\n\t\tu32 rsp_cnt;\n\t\tatomic_t cmdthd_running;\n\t\t \n\t\tu8 stop_req;\n\t\tstruct adapter *padapter;\n\t\tstruct mutex sctx_mutex;\n\t};\n\n\tstruct\tevt_priv {\n\t\tstruct work_struct c2h_wk;\n\t\tbool c2h_wk_alive;\n\t\tstruct rtw_cbuf *c2h_queue;\n\t\t#define C2H_QUEUE_MAX_LEN 10\n\n\t\tatomic_t event_seq;\n\t\tu8 *evt_buf;\t \n\t\tu8 *evt_allocated_buf;\n\t\tu32 evt_done_cnt;\n\t\tu8 *c2h_mem;\n\t\tu8 *allocated_c2h_mem;\n\t};\n\n#define init_h2fwcmd_w_parm_no_rsp(pcmd, pparm, code) \\\ndo {\\\n\tINIT_LIST_HEAD(&pcmd->list);\\\n\tpcmd->cmdcode = code;\\\n\tpcmd->parmbuf = (u8 *)(pparm);\\\n\tpcmd->cmdsz = sizeof(*pparm);\\\n\tpcmd->rsp = NULL;\\\n\tpcmd->rspsz = 0;\\\n} while (0)\n\n#define init_h2fwcmd_w_parm_no_parm_rsp(pcmd, code) \\\ndo {\\\n\tINIT_LIST_HEAD(&pcmd->list);\\\n\tpcmd->cmdcode = code;\\\n\tpcmd->parmbuf = NULL;\\\n\tpcmd->cmdsz = 0;\\\n\tpcmd->rsp = NULL;\\\n\tpcmd->rspsz = 0;\\\n} while (0)\n\nstruct c2h_evt_hdr {\n\tu8 id:4;\n\tu8 plen:4;\n\tu8 seq;\n\tu8 payload[];\n};\n\nstruct c2h_evt_hdr_88xx {\n\tu8 id;\n\tu8 seq;\n\tu8 payload[12];\n\tu8 plen;\n\tu8 trigger;\n};\n\n#define c2h_evt_valid(c2h_evt) ((c2h_evt)->id || (c2h_evt)->plen)\n\nint rtw_enqueue_cmd(struct cmd_priv *pcmdpriv, struct cmd_obj *obj);\nextern struct cmd_obj *rtw_dequeue_cmd(struct cmd_priv *pcmdpriv);\nextern void rtw_free_cmd_obj(struct cmd_obj *pcmd);\n\nvoid rtw_stop_cmd_thread(struct adapter *adapter);\nint rtw_cmd_thread(void *context);\n\nextern void rtw_free_cmd_priv(struct cmd_priv *pcmdpriv);\n\nextern void rtw_free_evt_priv(struct evt_priv *pevtpriv);\nextern void rtw_evt_notify_isr(struct evt_priv *pevtpriv);\n\nenum {\n\tNONE_WK_CID,\n\tDYNAMIC_CHK_WK_CID,\n\tDM_CTRL_WK_CID,\n\tPBC_POLLING_WK_CID,\n\tPOWER_SAVING_CTRL_WK_CID, \n\tLPS_CTRL_WK_CID,\n\tANT_SELECT_WK_CID,\n\tP2P_PS_WK_CID,\n\tP2P_PROTO_WK_CID,\n\tCHECK_HIQ_WK_CID, \n\tINTEl_WIDI_WK_CID,\n\tC2H_WK_CID,\n\tRTP_TIMER_CFG_WK_CID,\n\tRESET_SECURITYPRIV,  \n\tFREE_ASSOC_RESOURCES,  \n\tDM_IN_LPS_WK_CID,\n\tDM_RA_MSK_WK_CID,  \n\tBEAMFORMING_WK_CID,\n\tLPS_CHANGE_DTIM_CID,\n\tBTINFO_WK_CID,\n\tMAX_WK_CID\n};\n\nenum {\n\tLPS_CTRL_SCAN = 0,\n\tLPS_CTRL_JOINBSS = 1,\n\tLPS_CTRL_CONNECT = 2,\n\tLPS_CTRL_DISCONNECT = 3,\n\tLPS_CTRL_SPECIAL_PACKET = 4,\n\tLPS_CTRL_LEAVE = 5,\n\tLPS_CTRL_TRAFFIC_BUSY = 6,\n};\n\nenum {\n\tSWSI,\n\tHWSI,\n\tHWPI,\n};\n\n \n\n \nstruct joinbss_parm {\n\tstruct wlan_bssid_ex network;\n};\n\n \nstruct disconnect_parm {\n\tu32 deauth_timeout_ms;\n};\n\n \nstruct createbss_parm {\n\tstruct wlan_bssid_ex network;\n};\n\n \nstruct\tsetopmode_parm {\n\tu8 mode;\n\tu8 rsvd[3];\n};\n\n \n\n#define RTW_SSID_SCAN_AMOUNT 9  \n#define RTW_CHANNEL_SCAN_AMOUNT (14+37)\nstruct sitesurvey_parm {\n\tsigned int scan_mode;\t \n\tu8 ssid_num;\n\tu8 ch_num;\n\tstruct ndis_802_11_ssid ssid[RTW_SSID_SCAN_AMOUNT];\n\tstruct rtw_ieee80211_channel ch[RTW_CHANNEL_SCAN_AMOUNT];\n};\n\n \nstruct setauth_parm {\n\tu8 mode;   \n\tu8 _1x;    \n\tu8 rsvd[2];\n};\n\n \nstruct setkey_parm {\n\tu8 algorithm;\t \n\tu8 keyid;\n\tu8 grpkey;\t\t \n\tu8 set_tx;\t\t \n\tu8 key[16];\t \n};\n\n \nstruct set_stakey_parm {\n\tu8 addr[ETH_ALEN];\n\tu8 algorithm;\n\tu8 keyid;\n\tu8 key[16];\n};\n\nstruct set_stakey_rsp {\n\tu8 addr[ETH_ALEN];\n\tu8 keyid;\n\tu8 rsvd;\n};\n\n \nstruct set_assocsta_parm {\n\tu8 addr[ETH_ALEN];\n};\n\nstruct set_assocsta_rsp {\n\tu8 cam_id;\n\tu8 rsvd[3];\n};\n\n \nstruct del_assocsta_parm {\n\tu8 addr[ETH_ALEN];\n};\n\n \nstruct setstapwrstate_parm {\n\tu8 staid;\n\tu8 status;\n\tu8 hwaddr[6];\n};\n\n \nstruct\tsetbasicrate_parm {\n\tu8 basicrates[NumRates];\n};\n\n \nstruct getbasicrate_parm {\n\tu32 rsvd;\n};\n\n \nstruct setdatarate_parm {\n\tu8 mac_id;\n\tu8 datarates[NumRates];\n};\n\n \nstruct getdatarate_parm {\n\tu32 rsvd;\n\n};\n\n \n\nstruct\tsetphyinfo_parm {\n\tstruct regulatory_class class_sets[NUM_REGULATORYS];\n\tu8 status;\n};\n\nstruct\tgetphyinfo_parm {\n\tu32 rsvd;\n};\n\n \nstruct\tsetphy_parm {\n\tu8 rfchannel;\n\tu8 modem;\n};\n\n \nstruct\tgetphy_parm {\n\tu32 rsvd;\n\n};\n\nstruct Tx_Beacon_param {\n\tstruct wlan_bssid_ex network;\n};\n\n \n\n \nstruct drvextra_cmd_parm {\n\tint ec_id;  \n\tint type;  \n\tint size;  \n\tunsigned char *pbuf;\n};\n\n \n\nstruct\tgetcountjudge_rsp {\n\tu8 count_judge[MAX_RATES_LENGTH];\n};\n\nstruct addBaReq_parm {\n\tunsigned int tid;\n\tu8 addr[ETH_ALEN];\n};\n\n \nstruct set_ch_parm {\n\tu8 ch;\n\tu8 bw;\n\tu8 ch_offset;\n};\n\n \nstruct SetChannelPlan_param {\n\tu8 channel_plan;\n};\n\n \nstruct SetChannelSwitch_param {\n\tu8 new_ch_no;\n};\n\n \nstruct TDLSoption_param {\n\tu8 addr[ETH_ALEN];\n\tu8 option;\n};\n\n \nstruct RunInThread_param {\n\tvoid (*func)(void *);\n\tvoid *context;\n};\n\n\n#define GEN_CMD_CODE(cmd)\tcmd ## _CMD_\n\n\n \n\n#define H2C_RSP_OFFSET\t\t\t512\n\n#define H2C_SUCCESS\t\t\t0x00\n#define H2C_SUCCESS_RSP\t\t\t0x01\n#define H2C_DUPLICATED\t\t\t0x02\n#define H2C_DROPPED\t\t\t0x03\n#define H2C_PARAMETERS_ERROR\t\t0x04\n#define H2C_REJECTED\t\t\t0x05\n#define H2C_CMD_OVERFLOW\t\t0x06\n#define H2C_RESERVED\t\t\t0x07\n\nu8 rtw_sitesurvey_cmd(struct adapter  *padapter, struct ndis_802_11_ssid *ssid, int ssid_num, struct rtw_ieee80211_channel *ch, int ch_num);\nextern u8 rtw_createbss_cmd(struct adapter  *padapter);\nint rtw_startbss_cmd(struct adapter  *padapter, int flags);\n\nstruct sta_info;\nextern u8 rtw_setstakey_cmd(struct adapter  *padapter, struct sta_info *sta, u8 unicast_key, bool enqueue);\nextern u8 rtw_clearstakey_cmd(struct adapter *padapter, struct sta_info *sta, u8 enqueue);\n\nextern u8 rtw_joinbss_cmd(struct adapter *padapter, struct wlan_network *pnetwork);\nu8 rtw_disassoc_cmd(struct adapter *padapter, u32 deauth_timeout_ms, bool enqueue);\nextern u8 rtw_setopmode_cmd(struct adapter  *padapter, enum ndis_802_11_network_infrastructure networktype, bool enqueue);\nextern u8 rtw_setrfintfs_cmd(struct adapter  *padapter, u8 mode);\n\nextern u8 rtw_gettssi_cmd(struct adapter  *padapter, u8 offset, u8 *pval);\nextern u8 rtw_setfwdig_cmd(struct adapter *padapter, u8 type);\nextern u8 rtw_setfwra_cmd(struct adapter *padapter, u8 type);\n\nextern u8 rtw_addbareq_cmd(struct adapter *padapter, u8 tid, u8 *addr);\n \nextern u8 rtw_reset_securitypriv_cmd(struct adapter *padapter);\nextern u8 rtw_free_assoc_resources_cmd(struct adapter *padapter);\nextern u8 rtw_dynamic_chk_wk_cmd(struct adapter *adapter);\n\nu8 rtw_lps_ctrl_wk_cmd(struct adapter *padapter, u8 lps_ctrl_type, u8 enqueue);\nu8 rtw_dm_in_lps_wk_cmd(struct adapter *padapter);\n\nu8 rtw_dm_ra_mask_wk_cmd(struct adapter *padapter, u8 *psta);\n\nextern u8 rtw_ps_cmd(struct adapter *padapter);\n\nu8 rtw_chk_hi_queue_cmd(struct adapter *padapter);\n\nextern u8 rtw_c2h_packet_wk_cmd(struct adapter *padapter, u8 *pbuf, u16 length);\nextern u8 rtw_c2h_wk_cmd(struct adapter *padapter, u8 *c2h_evt);\n\nu8 rtw_drvextra_cmd_hdl(struct adapter *padapter, unsigned char *pbuf);\n\nextern void rtw_survey_cmd_callback(struct adapter  *padapter, struct cmd_obj *pcmd);\nextern void rtw_disassoc_cmd_callback(struct adapter  *padapter, struct cmd_obj *pcmd);\nextern void rtw_joinbss_cmd_callback(struct adapter  *padapter, struct cmd_obj *pcmd);\nextern void rtw_createbss_cmd_callback(struct adapter  *padapter, struct cmd_obj *pcmd);\nextern void rtw_getbbrfreg_cmdrsp_callback(struct adapter  *padapter, struct cmd_obj *pcmd);\n\nextern void rtw_setstaKey_cmdrsp_callback(struct adapter  *padapter,  struct cmd_obj *pcmd);\nextern void rtw_setassocsta_cmdrsp_callback(struct adapter  *padapter,  struct cmd_obj *pcmd);\nextern void rtw_getrttbl_cmdrsp_callback(struct adapter  *padapter,  struct cmd_obj *pcmd);\n\n\nstruct _cmd_callback {\n\tu32 cmd_code;\n\tvoid (*callback)(struct adapter  *padapter, struct cmd_obj *cmd);\n};\n\nenum {\n\tGEN_CMD_CODE(_Read_MACREG),\t \n\tGEN_CMD_CODE(_Write_MACREG),\n\tGEN_CMD_CODE(_Read_BBREG),\n\tGEN_CMD_CODE(_Write_BBREG),\n\tGEN_CMD_CODE(_Read_RFREG),\n\tGEN_CMD_CODE(_Write_RFREG),  \n\tGEN_CMD_CODE(_Read_EEPROM),\n\tGEN_CMD_CODE(_Write_EEPROM),\n\tGEN_CMD_CODE(_Read_EFUSE),\n\tGEN_CMD_CODE(_Write_EFUSE),\n\n\tGEN_CMD_CODE(_Read_CAM),\t \n\tGEN_CMD_CODE(_Write_CAM),\n\tGEN_CMD_CODE(_setBCNITV),\n\tGEN_CMD_CODE(_setMBIDCFG),\n\tGEN_CMD_CODE(_JoinBss),    \n\tGEN_CMD_CODE(_DisConnect),  \n\tGEN_CMD_CODE(_CreateBss),\n\tGEN_CMD_CODE(_SetOpMode),\n\tGEN_CMD_CODE(_SiteSurvey),   \n\tGEN_CMD_CODE(_SetAuth),\n\n\tGEN_CMD_CODE(_SetKey),\t \n\tGEN_CMD_CODE(_SetStaKey),\n\tGEN_CMD_CODE(_SetAssocSta),\n\tGEN_CMD_CODE(_DelAssocSta),\n\tGEN_CMD_CODE(_SetStaPwrState),\n\tGEN_CMD_CODE(_SetBasicRate),  \n\tGEN_CMD_CODE(_GetBasicRate),\n\tGEN_CMD_CODE(_SetDataRate),\n\tGEN_CMD_CODE(_GetDataRate),\n\tGEN_CMD_CODE(_SetPhyInfo),\n\n\tGEN_CMD_CODE(_GetPhyInfo),\t \n\tGEN_CMD_CODE(_SetPhy),\n\tGEN_CMD_CODE(_GetPhy),\n\tGEN_CMD_CODE(_readRssi),\n\tGEN_CMD_CODE(_readGain),\n\tGEN_CMD_CODE(_SetAtim),  \n\tGEN_CMD_CODE(_SetPwrMode),\n\tGEN_CMD_CODE(_JoinbssRpt),\n\tGEN_CMD_CODE(_SetRaTable),\n\tGEN_CMD_CODE(_GetRaTable),\n\n\tGEN_CMD_CODE(_GetCCXReport),  \n\tGEN_CMD_CODE(_GetDTMReport),\n\tGEN_CMD_CODE(_GetTXRateStatistics),\n\tGEN_CMD_CODE(_SetUsbSuspend),\n\tGEN_CMD_CODE(_SetH2cLbk),\n\tGEN_CMD_CODE(_AddBAReq),  \n\tGEN_CMD_CODE(_SetChannel),  \n\tGEN_CMD_CODE(_SetTxPower),\n\tGEN_CMD_CODE(_SwitchAntenna),\n\tGEN_CMD_CODE(_SetCrystalCap),\n\tGEN_CMD_CODE(_SetSingleCarrierTx),  \n\n\tGEN_CMD_CODE(_SetSingleToneTx), \n\tGEN_CMD_CODE(_SetCarrierSuppressionTx),\n\tGEN_CMD_CODE(_SetContinuousTx),\n\tGEN_CMD_CODE(_SwitchBandwidth),  \n\tGEN_CMD_CODE(_TX_Beacon),  \n\n\tGEN_CMD_CODE(_Set_MLME_EVT),  \n\tGEN_CMD_CODE(_Set_Drv_Extra),  \n\tGEN_CMD_CODE(_Set_H2C_MSG),  \n\n\tGEN_CMD_CODE(_SetChannelPlan),  \n\n\tGEN_CMD_CODE(_SetChannelSwitch),  \n\tGEN_CMD_CODE(_TDLS),  \n\tGEN_CMD_CODE(_ChkBMCSleepq),  \n\n\tGEN_CMD_CODE(_RunInThreadCMD),  \n\n\tMAX_H2CCMD\n};\n\n#define _GetBBReg_CMD_\t\t_Read_BBREG_CMD_\n#define _SetBBReg_CMD_\t\t_Write_BBREG_CMD_\n#define _GetRFReg_CMD_\t\t_Read_RFREG_CMD_\n#define _SetRFReg_CMD_\t\t_Write_RFREG_CMD_\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}