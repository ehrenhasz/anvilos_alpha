{
  "module_name": "rtw_io.h",
  "hash_id": "228f477268a44cd85bf74ec7a9bd247dcb030b9a1687763b957696a74b0cb4a8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/include/rtw_io.h",
  "human_readable_source": " \n \n\n#ifndef _RTW_IO_H_\n#define _RTW_IO_H_\n\n#define NUM_IOREQ\t\t8\n\n#define MAX_PROT_SZ\t(64-16)\n\n#define _IOREADY\t\t\t0\n#define _IO_WAIT_COMPLETE   1\n#define _IO_WAIT_RSP        2\n\n \n#define _IOSZ_MASK_\t\t(0x7F)\n#define _IO_WRITE_\t\tBIT(7)\n#define _IO_FIXED_\t\tBIT(8)\n#define _IO_BURST_\t\tBIT(9)\n#define _IO_BYTE_\t\tBIT(10)\n#define _IO_HW_\t\t\tBIT(11)\n#define _IO_WORD_\t\tBIT(12)\n#define _IO_SYNC_\t\tBIT(13)\n#define _IO_CMDMASK_\t(0x1F80)\n\n\n \n\n\n\n \n#define _IO_ERR_\t\tBIT(2)\n#define _IO_SUCCESS_\tBIT(1)\n#define _IO_DONE_\t\tBIT(0)\n\n\n#define IO_RD32\t\t\t(_IO_SYNC_ | _IO_WORD_)\n#define IO_RD16\t\t\t(_IO_SYNC_ | _IO_HW_)\n#define IO_RD8\t\t\t(_IO_SYNC_ | _IO_BYTE_)\n\n#define IO_RD32_ASYNC\t(_IO_WORD_)\n#define IO_RD16_ASYNC\t(_IO_HW_)\n#define IO_RD8_ASYNC\t(_IO_BYTE_)\n\n#define IO_WR32\t\t\t(_IO_WRITE_ | _IO_SYNC_ | _IO_WORD_)\n#define IO_WR16\t\t\t(_IO_WRITE_ | _IO_SYNC_ | _IO_HW_)\n#define IO_WR8\t\t\t(_IO_WRITE_ | _IO_SYNC_ | _IO_BYTE_)\n\n#define IO_WR32_ASYNC\t(_IO_WRITE_ | _IO_WORD_)\n#define IO_WR16_ASYNC\t(_IO_WRITE_ | _IO_HW_)\n#define IO_WR8_ASYNC\t(_IO_WRITE_ | _IO_BYTE_)\n\n \n\n#define IO_WR_BURST(x)\t\t(_IO_WRITE_ | _IO_SYNC_ | _IO_BURST_ | ((x) & _IOSZ_MASK_))\n#define IO_RD_BURST(x)\t\t(_IO_SYNC_ | _IO_BURST_ | ((x) & _IOSZ_MASK_))\n\n\n\n \n\n#define _INTF_ASYNC_\tBIT(0)\t \n\nstruct intf_priv;\nstruct intf_hdl;\nstruct io_queue;\n\nstruct _io_ops {\n\t\tu8 (*_read8)(struct intf_hdl *pintfhdl, u32 addr);\n\t\tu16 (*_read16)(struct intf_hdl *pintfhdl, u32 addr);\n\t\tu32 (*_read32)(struct intf_hdl *pintfhdl, u32 addr);\n\n\t\tint (*_write8)(struct intf_hdl *pintfhdl, u32 addr, u8 val);\n\t\tint (*_write16)(struct intf_hdl *pintfhdl, u32 addr, u16 val);\n\t\tint (*_write32)(struct intf_hdl *pintfhdl, u32 addr, u32 val);\n\t\tint (*_writeN)(struct intf_hdl *pintfhdl, u32 addr, u32 length, u8 *pdata);\n\n\t\tint (*_write8_async)(struct intf_hdl *pintfhdl, u32 addr, u8 val);\n\t\tint (*_write16_async)(struct intf_hdl *pintfhdl, u32 addr, u16 val);\n\t\tint (*_write32_async)(struct intf_hdl *pintfhdl, u32 addr, u32 val);\n\n\t\tvoid (*_read_mem)(struct intf_hdl *pintfhdl, u32 addr, u32 cnt, u8 *pmem);\n\t\tvoid (*_write_mem)(struct intf_hdl *pintfhdl, u32 addr, u32 cnt, u8 *pmem);\n\n\t\tvoid (*_sync_irp_protocol_rw)(struct io_queue *pio_q);\n\n\t\tu32 (*_read_interrupt)(struct intf_hdl *pintfhdl, u32 addr);\n\n\t\tu32 (*_read_port)(struct intf_hdl *pintfhdl, u32 addr, u32 cnt, u8 *pmem);\n\t\tu32 (*_write_port)(struct intf_hdl *pintfhdl, u32 addr, u32 cnt, u8 *pmem);\n\n\t\tu32 (*_write_scsi)(struct intf_hdl *pintfhdl, u32 cnt, u8 *pmem);\n\n\t\tvoid (*_read_port_cancel)(struct intf_hdl *pintfhdl);\n\t\tvoid (*_write_port_cancel)(struct intf_hdl *pintfhdl);\n};\n\nstruct io_req {\n\tstruct list_head\tlist;\n\tu32 addr;\n\tvolatile u32 val;\n\tu32 command;\n\tu32 status;\n\tu8 *pbuf;\n\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt);\n\tu8 *cnxt;\n};\n\nstruct\tintf_hdl {\n\tstruct adapter *padapter;\n\tstruct dvobj_priv *pintf_dev; \n\n\tstruct _io_ops\tio_ops;\n};\n\n#define SD_IO_TRY_CNT (8)\n#define MAX_CONTINUAL_IO_ERR SD_IO_TRY_CNT\n\nint rtw_inc_and_chk_continual_io_error(struct dvobj_priv *dvobj);\nvoid rtw_reset_continual_io_error(struct dvobj_priv *dvobj);\n\n \n\nstruct io_queue {\n\tspinlock_t\tlock;\n\tstruct list_head\tfree_ioreqs;\n\tstruct list_head\t\tpending;\t\t \n\tstruct list_head\t\tprocessing;\n\tu8 *free_ioreqs_buf;  \n\tu8 *pallocated_free_ioreqs_buf;\n\tstruct\tintf_hdl\tintf;\n};\n\nstruct io_priv {\n\n\tstruct adapter *padapter;\n\n\tstruct intf_hdl intf;\n\n};\n\nextern uint ioreq_flush(struct adapter *adapter, struct io_queue *ioqueue);\nextern void sync_ioreq_enqueue(struct io_req *preq, struct io_queue *ioqueue);\nextern uint sync_ioreq_flush(struct adapter *adapter, struct io_queue *ioqueue);\n\n\nextern uint free_ioreq(struct io_req *preq, struct io_queue *pio_queue);\nextern struct io_req *alloc_ioreq(struct io_queue *pio_q);\n\nextern uint register_intf_hdl(u8 *dev, struct intf_hdl *pintfhdl);\nextern void unregister_intf_hdl(struct intf_hdl *pintfhdl);\n\nextern void _rtw_attrib_read(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\nextern void _rtw_attrib_write(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\n\nextern u8 rtw_read8(struct adapter *adapter, u32 addr);\nextern u16 rtw_read16(struct adapter *adapter, u32 addr);\nextern u32 rtw_read32(struct adapter *adapter, u32 addr);\n\nextern int rtw_write8(struct adapter *adapter, u32 addr, u8 val);\nextern int rtw_write16(struct adapter *adapter, u32 addr, u16 val);\nextern int rtw_write32(struct adapter *adapter, u32 addr, u32 val);\n\nextern u32 rtw_write_port(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\n\nextern void rtw_write_scsi(struct adapter *adapter, u32 cnt, u8 *pmem);\n\n \nextern void ioreq_read8(struct adapter *adapter, u32 addr, u8 *pval);\nextern void ioreq_read16(struct adapter *adapter, u32 addr, u16 *pval);\nextern void ioreq_read32(struct adapter *adapter, u32 addr, u32 *pval);\nextern void ioreq_write8(struct adapter *adapter, u32 addr, u8 val);\nextern void ioreq_write16(struct adapter *adapter, u32 addr, u16 val);\nextern void ioreq_write32(struct adapter *adapter, u32 addr, u32 val);\n\n\nextern uint async_read8(struct adapter *adapter, u32 addr, u8 *pbuff,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\nextern uint async_read16(struct adapter *adapter, u32 addr,  u8 *pbuff,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\nextern uint async_read32(struct adapter *adapter, u32 addr,  u8 *pbuff,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\n\nextern void async_read_mem(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\nextern void async_read_port(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\n\nextern void async_write8(struct adapter *adapter, u32 addr, u8 val,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\nextern void async_write16(struct adapter *adapter, u32 addr, u16 val,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\nextern void async_write32(struct adapter *adapter, u32 addr, u32 val,\n\tvoid (*_async_io_callback)(struct adapter *padater, struct io_req *pio_req, u8 *cnxt), u8 *cnxt);\n\nextern void async_write_mem(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\nextern void async_write_port(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem);\n\n\nint rtw_init_io_priv(struct adapter *padapter, void (*set_intf_ops)(struct adapter *padapter, struct _io_ops *pops));\n\n\nextern uint alloc_io_queue(struct adapter *adapter);\nextern void free_io_queue(struct adapter *adapter);\nextern void async_bus_io(struct io_queue *pio_q);\nextern void bus_sync_io(struct io_queue *pio_q);\nextern u32 _ioreq2rwmem(struct io_queue *pio_q);\nextern void dev_power_down(struct adapter *Adapter, u8 bpwrup);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}