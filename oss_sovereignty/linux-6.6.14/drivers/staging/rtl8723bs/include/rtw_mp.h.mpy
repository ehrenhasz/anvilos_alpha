{
  "module_name": "rtw_mp.h",
  "hash_id": "2618c195030381807bda6646f8be4266ea8b8e2aed5efd62eee98bb4d3747e76",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/include/rtw_mp.h",
  "human_readable_source": " \n \n#ifndef _RTW_MP_H_\n#define _RTW_MP_H_\n\n#define MAX_MP_XMITBUF_SZ\t2048\n#define NR_MP_XMITFRAME\t\t8\n\nstruct mp_xmit_frame {\n\tstruct list_head\tlist;\n\n\tstruct pkt_attrib attrib;\n\n\tstruct sk_buff *pkt;\n\n\tint frame_tag;\n\n\tstruct adapter *padapter;\n\n\tuint mem[(MAX_MP_XMITBUF_SZ >> 2)];\n};\n\nstruct mp_wiparam {\n\tu32 bcompleted;\n\tu32 act_type;\n\tu32 io_offset;\n\tu32 io_value;\n};\n\nstruct mp_tx {\n\tu8 stop;\n\tu32 count, sended;\n\tu8 payload;\n\tstruct pkt_attrib attrib;\n\t \n\t \n\tu8 desc[TXDESC_SIZE];\n\tu8 *pallocated_buf;\n\tu8 *buf;\n\tu32 buf_size, write_size;\n\tvoid *PktTxThread;\n};\n\n#define MP_MAX_LINES\t\t1000\n#define MP_MAX_LINES_BYTES\t256\n\ntypedef void (*MPT_WORK_ITEM_HANDLER)(void *Adapter);\nstruct mpt_context {\n\t \n\tbool\t\t\tbMassProdTest;\n\n\t \n\tbool\t\t\tbMptDrvUnload;\n\n\tstruct timer_list\t\t\tMPh2c_timeout_timer;\n \n\n\tbool\t\tMptH2cRspEvent;\n\tbool\t\tMptBtC2hEvent;\n\tbool\t\tbMPh2c_timeout;\n\n\t \n\t \n\t \n \n\t \n \n\t \n \n\t \n\tbool\t\t\tbMptWorkItemInProgress;\n\t \n\tMPT_WORK_ITEM_HANDLER\tCurrMptAct;\n\n\t \n\tu32 \t\tMptTestStart;\n\t \n\tu32 \t\tMptTestItem;\n\t \n\tu32 \t\tMptActType;\t \n\t \n\tu32 \t\tMptIoOffset;\n\t \n\tu32 \t\tMptIoValue;\n\t \n\tu32 \t\tMptRfPath;\n\n\tenum wireless_mode\t\tMptWirelessModeToSw;\t \n\tu8 \tMptChannelToSw;\t\t \n\tu8 \tMptInitGainToSet;\t \n\tu32 \t\tMptBandWidth;\t\t \n\tu32 \t\tMptRateIndex;\t\t \n\t \n\tu8 \tbtMpCckTxPower;\n\t \n\tu8 \tbtMpOfdmTxPower;\n\t \n\tu8 \tTxPwrLevel[2];\t \n\tu32 \t\tRegTxPwrLimit;\n\t \n\tu32 \t\tMptRCR;\n\t \n\tbool\t\t\tbMptFilterPattern;\n\t \n\tu32 \t\tMptRxOkCnt;\n\t \n\tu32 \t\tMptRxCrcErrCnt;\n\n\tbool\t\t\tbCckContTx;\t \n\tbool\t\t\tbOfdmContTx;\t \n\tbool\t\t\tbStartContTx;\t \n\t \n\tbool\t\t\tbSingleCarrier;\n\t \n\tbool\t\t\tbCarrierSuppression;\n\t \n\tbool\t\t\tbSingleTone;\n\n\t \n\tbool\t\t\tbMptEnableAckCounter;\n\tu32 \t\tMptAckCounter;\n\n\t \n\t \n\t \n\t \n\n\tu8 APK_bound[2];\t \n\tbool\t\tbMptIndexEven;\n\n\tu8 backup0xc50;\n\tu8 backup0xc58;\n\tu8 backup0xc30;\n\tu8 backup0x52_RF_A;\n\tu8 backup0x52_RF_B;\n\n\tu32 \t\tbackup0x58_RF_A;\n\tu32 \t\tbackup0x58_RF_B;\n\n\tu8 \th2cReqNum;\n\tu8 \tc2hBuf[32];\n\n    u8          btInBuf[100];\n\tu32 \t\tmptOutLen;\n    u8          mptOutBuf[100];\n\n};\n \n\n \n#define EFUSE_MAP_SIZE\t\t512\n\n#define EFUSE_MAX_SIZE\t\t512\n \n\n \nenum {\n\tWRITE_REG = 1,\n\tREAD_REG,\n\tWRITE_RF,\n\tREAD_RF,\n\tMP_START,\n\tMP_STOP,\n\tMP_RATE,\n\tMP_CHANNEL,\n\tMP_BANDWIDTH,\n\tMP_TXPOWER,\n\tMP_ANT_TX,\n\tMP_ANT_RX,\n\tMP_CTX,\n\tMP_QUERY,\n\tMP_ARX,\n\tMP_PSD,\n\tMP_PWRTRK,\n\tMP_THER,\n\tMP_IOCTL,\n\tEFUSE_GET,\n\tEFUSE_SET,\n\tMP_RESET_STATS,\n\tMP_DUMP,\n\tMP_PHYPARA,\n\tMP_SetRFPathSwh,\n\tMP_QueryDrvStats,\n\tMP_SetBT,\n\tCTA_TEST,\n\tMP_DISABLE_BT_COEXIST,\n\tMP_PwrCtlDM,\n\tMP_NULL,\n\tMP_GET_TXPOWER_INX,\n};\n\nstruct mp_priv {\n\tstruct adapter *papdater;\n\n\t \n\tu32 mode; \n\n\tu32 prev_fw_state;\n\n\t \n\tstruct mp_wiparam workparam;\n \n\n\t \n\tu8 TID;\n\tu32 tx_pktcount;\n\tu32 pktInterval;\n\tstruct mp_tx tx;\n\n\t \n\tu32 rx_bssidpktcount;\n\tu32 rx_pktcount;\n\tu32 rx_pktcount_filter_out;\n\tu32 rx_crcerrpktcount;\n\tu32 rx_pktloss;\n\tbool  rx_bindicatePkt;\n\tstruct recv_stat rxstat;\n\n\t \n\tu8 channel;\n\tu8 bandwidth;\n\tu8 prime_channel_offset;\n\tu8 txpoweridx;\n\tu8 txpoweridx_b;\n\tu8 rateidx;\n\tu32 preamble;\n \n\tu32 CrystalCap;\n \n\n\tu16 antenna_tx;\n\tu16 antenna_rx;\n \n\n\tu8 check_mp_pkt;\n\n\tu8 bSetTxPower;\n \n\tu8 mp_dm;\n\tu8 mac_filter[ETH_ALEN];\n\tu8 bmac_filter;\n\n\tstruct wlan_network mp_network;\n\tNDIS_802_11_MAC_ADDRESS network_macaddr;\n\n\tu8 *pallocated_mp_xmitframe_buf;\n\tu8 *pmp_xmtframe_buf;\n\tstruct __queue free_mp_xmitqueue;\n\tu32 free_mp_xmitframe_cnt;\n\tbool bSetRxBssid;\n\tbool bTxBufCkFail;\n\n\tstruct mpt_context MptCtx;\n\n\tu8 *TXradomBuffer;\n};\n\n#define LOWER\ttrue\n#define RAISE\tfalse\n\n \n#define BB_REG_BASE_ADDR\t\t0x800\n\n#define MAX_RF_PATH_NUMS\tRF_PATH_MAX\n\nextern u8 mpdatarate[NumRates];\n\n#define MAX_TX_PWR_INDEX_N_MODE 64\t \n\n#define RX_PKT_BROADCAST\t1\n#define RX_PKT_DEST_ADDR\t2\n#define RX_PKT_PHY_MATCH\t3\n\n#define Mac_OFDM_OK\t\t\t0x00000000\n#define Mac_OFDM_Fail\t\t\t0x10000000\n#define Mac_OFDM_FasleAlarm\t0x20000000\n#define Mac_CCK_OK\t\t\t\t0x30000000\n#define Mac_CCK_Fail\t\t\t0x40000000\n#define Mac_CCK_FasleAlarm\t\t0x50000000\n#define Mac_HT_OK\t\t\t\t0x60000000\n#define Mac_HT_Fail\t\t\t0x70000000\n#define Mac_HT_FasleAlarm\t\t0x90000000\n#define Mac_DropPacket\t\t\t0xA0000000\n\n#define\t\tREG_RF_BB_GAIN_OFFSET\t0x7f\n#define\t\tRF_GAIN_OFFSET_MASK\t0xfffff\n\n \n \n \n\ns32 init_mp_priv(struct adapter *padapter);\nvoid free_mp_priv(struct mp_priv *pmp_priv);\ns32 MPT_InitializeAdapter(struct adapter *padapter, u8 Channel);\nvoid MPT_DeInitAdapter(struct adapter *padapter);\ns32 mp_start_test(struct adapter *padapter);\nvoid mp_stop_test(struct adapter *padapter);\n\nu32 _read_rfreg(struct adapter *padapter, u8 rfpath, u32 addr, u32 bitmask);\nvoid _write_rfreg(struct adapter *padapter, u8 rfpath, u32 addr, u32 bitmask, u32 val);\n\nu32 read_macreg(struct adapter *padapter, u32 addr, u32 sz);\nvoid write_macreg(struct adapter *padapter, u32 addr, u32 val, u32 sz);\nu32 read_bbreg(struct adapter *padapter, u32 addr, u32 bitmask);\nvoid write_bbreg(struct adapter *padapter, u32 addr, u32 bitmask, u32 val);\nu32 read_rfreg(struct adapter *padapter, u8 rfpath, u32 addr);\nvoid write_rfreg(struct adapter *padapter, u8 rfpath, u32 addr, u32 val);\n\nvoid SetChannel(struct adapter *padapter);\nvoid SetBandwidth(struct adapter *padapter);\nint SetTxPower(struct adapter *padapter);\nvoid SetAntennaPathPower(struct adapter *padapter);\nvoid SetDataRate(struct adapter *padapter);\n\nvoid SetAntenna(struct adapter *padapter);\n\ns32 SetThermalMeter(struct adapter *padapter, u8 target_ther);\nvoid GetThermalMeter(struct adapter *padapter, u8 *value);\n\nvoid SetContinuousTx(struct adapter *padapter, u8 bStart);\nvoid SetSingleCarrierTx(struct adapter *padapter, u8 bStart);\nvoid SetSingleToneTx(struct adapter *padapter, u8 bStart);\nvoid SetCarrierSuppressionTx(struct adapter *padapter, u8 bStart);\nvoid PhySetTxPowerLevel(struct adapter *padapter);\n\nvoid fill_txdesc_for_mp(struct adapter *padapter, u8 *ptxdesc);\nvoid SetPacketTx(struct adapter *padapter);\nvoid SetPacketRx(struct adapter *padapter, u8 bStartRx);\n\nvoid ResetPhyRxPktCount(struct adapter *padapter);\nu32 GetPhyRxPktReceived(struct adapter *padapter);\nu32 GetPhyRxPktCRC32Error(struct adapter *padapter);\n\ns32\tSetPowerTracking(struct adapter *padapter, u8 enable);\nvoid GetPowerTracking(struct adapter *padapter, u8 *enable);\n\nu32 mp_query_psd(struct adapter *padapter, u8 *data);\n\nvoid Hal_SetAntenna(struct adapter *padapter);\nvoid Hal_SetBandwidth(struct adapter *padapter);\n\nvoid Hal_SetTxPower(struct adapter *padapter);\nvoid Hal_SetCarrierSuppressionTx(struct adapter *padapter, u8 bStart);\nvoid Hal_SetSingleToneTx(struct adapter *padapter, u8 bStart);\nvoid Hal_SetSingleCarrierTx(struct adapter *padapter, u8 bStart);\nvoid Hal_SetContinuousTx(struct adapter *padapter, u8 bStart);\n\nvoid Hal_SetDataRate(struct adapter *padapter);\nvoid Hal_SetChannel(struct adapter *padapter);\nvoid Hal_SetAntennaPathPower(struct adapter *padapter);\ns32 Hal_SetThermalMeter(struct adapter *padapter, u8 target_ther);\ns32 Hal_SetPowerTracking(struct adapter *padapter, u8 enable);\nvoid Hal_GetPowerTracking(struct adapter *padapter, u8 *enable);\nvoid Hal_GetThermalMeter(struct adapter *padapter, u8 *value);\nvoid Hal_mpt_SwitchRfSetting(struct adapter *padapter);\nvoid Hal_MPT_CCKTxPowerAdjust(struct adapter *Adapter, bool bInCH14);\nvoid Hal_MPT_CCKTxPowerAdjustbyIndex(struct adapter *padapter, bool beven);\nvoid Hal_SetCCKTxPower(struct adapter *padapter, u8 *TxPower);\nvoid Hal_SetOFDMTxPower(struct adapter *padapter, u8 *TxPower);\nvoid Hal_TriggerRFThermalMeter(struct adapter *padapter);\nu8 Hal_ReadRFThermalMeter(struct adapter *padapter);\nvoid Hal_SetCCKContinuousTx(struct adapter *padapter, u8 bStart);\nvoid Hal_SetOFDMContinuousTx(struct adapter *padapter, u8 bStart);\nvoid Hal_ProSetCrystalCap(struct adapter *padapter, u32 CrystalCapVal);\nvoid MP_PHY_SetRFPathSwitch(struct adapter *padapter, bool bMain);\nu32 mpt_ProQueryCalTxPower(struct adapter *padapter, u8 RfPath);\nvoid MPT_PwrCtlDM(struct adapter *padapter, u32 bstart);\nu8 MptToMgntRate(u32 MptRateIdx);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}