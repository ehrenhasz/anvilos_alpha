{
  "module_name": "sta_info.h",
  "hash_id": "cb2158e1f44e269ca605426aa2e4031f93209d6fe257f9d6dd54aa4b851f8019",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/include/sta_info.h",
  "human_readable_source": " \n \n#ifndef __STA_INFO_H_\n#define __STA_INFO_H_\n\n\n#define IBSS_START_MAC_ID\t2\n#define NUM_STA 32\n#define NUM_ACL 16\n\n\n \n \nstruct rtw_wlan_acl_node {\n\tstruct list_head list;\n\tu8\t\t addr[ETH_ALEN];\n\tu8\t\t valid;\n};\n\n \n \n \nstruct wlan_acl_pool {\n\tint mode;\n\tint num;\n\tstruct rtw_wlan_acl_node aclnode[NUM_ACL];\n\tstruct __queue\tacl_node_q;\n};\n\nstruct rssi_sta {\n\ts32\tUndecoratedSmoothedPWDB;\n\ts32\tUndecoratedSmoothedCCK;\n\ts32\tUndecoratedSmoothedOFDM;\n\tu64\tPacketMap;\n\tu8 ValidBit;\n};\n\nstruct\tstainfo_stats\t{\n\n\tu64 rx_mgnt_pkts;\n\t\tu64 rx_beacon_pkts;\n\t\tu64 rx_probereq_pkts;\n\t\tu64 rx_probersp_pkts;\n\t\tu64 rx_probersp_bm_pkts;\n\t\tu64 rx_probersp_uo_pkts;\n\tu64 rx_ctrl_pkts;\n\tu64 rx_data_pkts;\n\n\tu64\tlast_rx_mgnt_pkts;\n\t\tu64 last_rx_beacon_pkts;\n\t\tu64 last_rx_probereq_pkts;\n\t\tu64 last_rx_probersp_pkts;\n\t\tu64 last_rx_probersp_bm_pkts;\n\t\tu64 last_rx_probersp_uo_pkts;\n\tu64\tlast_rx_ctrl_pkts;\n\tu64\tlast_rx_data_pkts;\n\n\tu64\trx_bytes;\n\tu64\trx_drops;\n\n\tu64\ttx_pkts;\n\tu64\ttx_bytes;\n\tu64  tx_drops;\n};\n\nstruct sta_info {\n\n\tspinlock_t\tlock;\n\tstruct list_head\tlist;  \n\tstruct list_head\thash_list;  \n\tstruct adapter *padapter;\n\n\tstruct sta_xmit_priv sta_xmitpriv;\n\tstruct sta_recv_priv sta_recvpriv;\n\n\tstruct __queue sleep_q;\n\tunsigned int sleepq_len;\n\n\tuint state;\n\tuint aid;\n\tuint mac_id;\n\tuint qos_option;\n\tu8 hwaddr[ETH_ALEN];\n\n\tuint\tieee8021x_blocked;\t \n\tuint\tdot118021XPrivacy;  \n\tunion Keytype\tdot11tkiptxmickey;\n\tunion Keytype\tdot11tkiprxmickey;\n\tunion Keytype\tdot118021x_UncstKey;\n\tunion pn48\t\tdot11txpn;\t\t\t \n\tunion pn48\t\tdot11wtxpn;\t\t\t \n\tunion pn48\t\tdot11rxpn;\t\t\t \n\n\n\tu8 bssrateset[16];\n\tu32 bssratelen;\n\ts32  rssi;\n\ts32\tsignal_quality;\n\n\tu8 cts2self;\n\tu8 rtsen;\n\n\tu8 raid;\n\tu8 init_rate;\n\tu32 ra_mask;\n\tu8 wireless_mode;\t \n\tu8 bw_mode;\n\n\tu8 ldpc;\n\tu8 stbc;\n\n\tstruct stainfo_stats sta_stats;\n\n\t \n\tstruct timer_list addba_retry_timer;\n\n\t \n\tstruct recv_reorder_ctrl recvreorder_ctrl[16];\n\n\t \n\t \n\tu16 BA_starting_seqctrl[16];\n\n\n\tstruct ht_priv htpriv;\n\n\t \n\t \n\t \n\t \n\n\t \n\t \n\t \n\n\tstruct list_head asoc_list;\n\tstruct list_head auth_list;\n\n\tunsigned int expire_to;\n\tunsigned int auth_seq;\n\tunsigned int authalg;\n\tunsigned char chg_txt[128];\n\n\tu16 capability;\n\tint flags;\n\n\tint dot8021xalg; \n\tint wpa_psk; \n\tint wpa_group_cipher;\n\tint wpa2_group_cipher;\n\tint wpa_pairwise_cipher;\n\tint wpa2_pairwise_cipher;\n\n\tu8 bpairwise_key_installed;\n\n\tu8 wpa_ie[32];\n\n\tu8 nonerp_set;\n\tu8 no_short_slot_time_set;\n\tu8 no_short_preamble_set;\n\tu8 no_ht_gf_set;\n\tu8 no_ht_set;\n\tu8 ht_20mhz_set;\n\n\tunsigned int tx_ra_bitmap;\n\tu8 qos_info;\n\n\tu8 max_sp_len;\n\tu8 uapsd_bk; \n\tu8 uapsd_be;\n\tu8 uapsd_vi;\n\tu8 uapsd_vo;\n\n\tu8 has_legacy_ac;\n\tunsigned int sleepq_ac_len;\n\n\tu8 under_exist_checking;\n\n\tu8 keep_alive_trycnt;\n\n\tu8 *passoc_req;\n\tu32 assoc_req_len;\n\n\t \n\tstruct rssi_sta\t rssi_stat;\n\n\t \n\t \n\t \n\t \n\t \n\t \n\t \n\t \n\tu8 bValid;\t\t\t\t \n\tu8 IOTPeer;\t\t\t \n\t \n\t \n\tu8 RSSI_Path[4];\t\t \n\tu8 RSSI_Ave;\n\tu8 RXEVM[4];\n\tu8 RXSNR[4];\n\n\tu8 rssi_level;\t\t\t \n\t \n\t \n\t \n\t \n\t \n\t \n\n\t \n\tu16 RxMgmtFrameSeqNum;\n};\n\n#define sta_rx_pkts(sta) \\\n\t(sta->sta_stats.rx_mgnt_pkts \\\n\t+ sta->sta_stats.rx_ctrl_pkts \\\n\t+ sta->sta_stats.rx_data_pkts)\n\n#define sta_last_rx_pkts(sta) \\\n\t(sta->sta_stats.last_rx_mgnt_pkts \\\n\t+ sta->sta_stats.last_rx_ctrl_pkts \\\n\t+ sta->sta_stats.last_rx_data_pkts)\n\n#define sta_rx_data_pkts(sta) \\\n\t(sta->sta_stats.rx_data_pkts)\n\n#define sta_last_rx_data_pkts(sta) \\\n\t(sta->sta_stats.last_rx_data_pkts)\n\n#define sta_rx_mgnt_pkts(sta) \\\n\t(sta->sta_stats.rx_mgnt_pkts)\n\n#define sta_last_rx_mgnt_pkts(sta) \\\n\t(sta->sta_stats.last_rx_mgnt_pkts)\n\n#define sta_rx_beacon_pkts(sta) \\\n\t(sta->sta_stats.rx_beacon_pkts)\n\n#define sta_last_rx_beacon_pkts(sta) \\\n\t(sta->sta_stats.last_rx_beacon_pkts)\n\n#define sta_rx_probereq_pkts(sta) \\\n\t(sta->sta_stats.rx_probereq_pkts)\n\n#define sta_last_rx_probereq_pkts(sta) \\\n\t(sta->sta_stats.last_rx_probereq_pkts)\n\n#define sta_rx_probersp_pkts(sta) \\\n\t(sta->sta_stats.rx_probersp_pkts)\n\n#define sta_last_rx_probersp_pkts(sta) \\\n\t(sta->sta_stats.last_rx_probersp_pkts)\n\n#define sta_rx_probersp_bm_pkts(sta) \\\n\t(sta->sta_stats.rx_probersp_bm_pkts)\n\n#define sta_last_rx_probersp_bm_pkts(sta) \\\n\t(sta->sta_stats.last_rx_probersp_bm_pkts)\n\n#define sta_rx_probersp_uo_pkts(sta) \\\n\t(sta->sta_stats.rx_probersp_uo_pkts)\n\n#define sta_last_rx_probersp_uo_pkts(sta) \\\n\t(sta->sta_stats.last_rx_probersp_uo_pkts)\n\n#define sta_update_last_rx_pkts(sta) \\\n\tdo { \\\n\t\tsta->sta_stats.last_rx_mgnt_pkts = sta->sta_stats.rx_mgnt_pkts; \\\n\t\tsta->sta_stats.last_rx_beacon_pkts = sta->sta_stats.rx_beacon_pkts; \\\n\t\tsta->sta_stats.last_rx_probereq_pkts = sta->sta_stats.rx_probereq_pkts; \\\n\t\tsta->sta_stats.last_rx_probersp_pkts = sta->sta_stats.rx_probersp_pkts; \\\n\t\tsta->sta_stats.last_rx_probersp_bm_pkts = sta->sta_stats.rx_probersp_bm_pkts; \\\n\t\tsta->sta_stats.last_rx_probersp_uo_pkts = sta->sta_stats.rx_probersp_uo_pkts; \\\n\t\tsta->sta_stats.last_rx_ctrl_pkts = sta->sta_stats.rx_ctrl_pkts; \\\n\t\tsta->sta_stats.last_rx_data_pkts = sta->sta_stats.rx_data_pkts; \\\n\t} while (0)\n\n#define STA_RX_PKTS_ARG(sta) \\\n\tsta->sta_stats.rx_mgnt_pkts \\\n\t, sta->sta_stats.rx_ctrl_pkts \\\n\t, sta->sta_stats.rx_data_pkts\n\n#define STA_LAST_RX_PKTS_ARG(sta) \\\n\tsta->sta_stats.last_rx_mgnt_pkts \\\n\t, sta->sta_stats.last_rx_ctrl_pkts \\\n\t, sta->sta_stats.last_rx_data_pkts\n\n#define STA_RX_PKTS_DIFF_ARG(sta) \\\n\tsta->sta_stats.rx_mgnt_pkts - sta->sta_stats.last_rx_mgnt_pkts \\\n\t, sta->sta_stats.rx_ctrl_pkts - sta->sta_stats.last_rx_ctrl_pkts \\\n\t, sta->sta_stats.rx_data_pkts - sta->sta_stats.last_rx_data_pkts\n\n#define STA_PKTS_FMT \"(m:%llu, c:%llu, d:%llu)\"\n\nstruct\tsta_priv {\n\n\tu8 *pallocated_stainfo_buf;\n\tu8 *pstainfo_buf;\n\tstruct __queue\tfree_sta_queue;\n\n\tspinlock_t sta_hash_lock;\n\tstruct list_head   sta_hash[NUM_STA];\n\tint asoc_sta_count;\n\tstruct __queue sleep_q;\n\tstruct __queue wakeup_q;\n\n\tstruct adapter *padapter;\n\n\tstruct list_head asoc_list;\n\tstruct list_head auth_list;\n\tspinlock_t asoc_list_lock;\n\tspinlock_t auth_list_lock;\n\tu8 asoc_list_cnt;\n\tu8 auth_list_cnt;\n\n\tunsigned int auth_to;   \n\tunsigned int assoc_to;  \n\tunsigned int expire_to;  \n\n\t \n\tstruct sta_info *sta_aid[NUM_STA];\n\n\tu16 sta_dz_bitmap; \n\tu16 tim_bitmap; \n\n\tu16 max_num_sta;\n\n\tstruct wlan_acl_pool acl_list;\n};\n\n\nstatic inline u32 wifi_mac_hash(u8 *mac)\n{\n\tu32 x;\n\n\tx = mac[0];\n\tx = (x << 2) ^ mac[1];\n\tx = (x << 2) ^ mac[2];\n\tx = (x << 2) ^ mac[3];\n\tx = (x << 2) ^ mac[4];\n\tx = (x << 2) ^ mac[5];\n\n\tx ^= x >> 8;\n\tx  = x & (NUM_STA - 1);\n\n\treturn x;\n}\n\n\nextern u32 _rtw_init_sta_priv(struct sta_priv *pstapriv);\nextern u32 _rtw_free_sta_priv(struct sta_priv *pstapriv);\n\n#define stainfo_offset_valid(offset) (offset < NUM_STA && offset >= 0)\nint rtw_stainfo_offset(struct sta_priv *stapriv, struct sta_info *sta);\nstruct sta_info *rtw_get_stainfo_by_offset(struct sta_priv *stapriv, int offset);\n\nextern struct sta_info *rtw_alloc_stainfo(struct\tsta_priv *pstapriv, u8 *hwaddr);\nextern u32 rtw_free_stainfo(struct adapter *padapter, struct sta_info *psta);\nextern void rtw_free_all_stainfo(struct adapter *padapter);\nextern struct sta_info *rtw_get_stainfo(struct sta_priv *pstapriv, u8 *hwaddr);\nextern u32 rtw_init_bcmc_stainfo(struct adapter *padapter);\nextern struct sta_info *rtw_get_bcmc_stainfo(struct adapter *padapter);\nextern u8 rtw_access_ctrl(struct adapter *padapter, u8 *mac_addr);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}