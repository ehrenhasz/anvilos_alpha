{
  "module_name": "odm_RegConfig8723B.c",
  "hash_id": "6bd4c714eddf8db252e1ff8562de8bbeebbdf910745905bc1d5801f8c3cf5be3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/hal/odm_RegConfig8723B.c",
  "human_readable_source": "\n \n\n#include \"odm_precomp.h\"\n\nvoid odm_ConfigRFReg_8723B(\n\tstruct dm_odm_t *pDM_Odm,\n\tu32 Addr,\n\tu32 Data,\n\tenum rf_path RF_PATH,\n\tu32 RegAddr\n)\n{\n\tif (Addr == 0xfe || Addr == 0xffe)\n\t\tmsleep(50);\n\telse {\n\t\tPHY_SetRFReg(pDM_Odm->Adapter, RF_PATH, RegAddr, bRFRegOffsetMask, Data);\n\t\t \n\t\tudelay(1);\n\n\t\t \n\t\tif (Addr == 0xb6) {\n\t\t\tu32 getvalue = 0;\n\t\t\tu8 count = 0;\n\n\t\t\tgetvalue = PHY_QueryRFReg(\n\t\t\t\tpDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\n\t\t\t);\n\n\t\t\tudelay(1);\n\n\t\t\twhile ((getvalue>>8) != (Data>>8)) {\n\t\t\t\tcount++;\n\t\t\t\tPHY_SetRFReg(pDM_Odm->Adapter, RF_PATH, RegAddr, bRFRegOffsetMask, Data);\n\t\t\t\tudelay(1);\n\t\t\t\tgetvalue = PHY_QueryRFReg(pDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord);\n\t\t\t\tif (count > 5)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (Addr == 0xb2) {\n\t\t\tu32 getvalue = 0;\n\t\t\tu8 count = 0;\n\n\t\t\tgetvalue = PHY_QueryRFReg(\n\t\t\t\tpDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\n\t\t\t);\n\n\t\t\tudelay(1);\n\n\t\t\twhile (getvalue != Data) {\n\t\t\t\tcount++;\n\t\t\t\tPHY_SetRFReg(\n\t\t\t\t\tpDM_Odm->Adapter,\n\t\t\t\t\tRF_PATH,\n\t\t\t\t\tRegAddr,\n\t\t\t\t\tbRFRegOffsetMask,\n\t\t\t\t\tData\n\t\t\t\t);\n\t\t\t\tudelay(1);\n\t\t\t\t \n\t\t\t\tPHY_SetRFReg(\n\t\t\t\t\tpDM_Odm->Adapter,\n\t\t\t\t\tRF_PATH,\n\t\t\t\t\t0x18,\n\t\t\t\t\tbRFRegOffsetMask,\n\t\t\t\t\t0x0fc07\n\t\t\t\t);\n\t\t\t\tudelay(1);\n\t\t\t\tgetvalue = PHY_QueryRFReg(\n\t\t\t\t\tpDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\n\t\t\t\t);\n\n\t\t\t\tif (count > 5)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nvoid odm_ConfigRF_RadioA_8723B(struct dm_odm_t *pDM_Odm, u32 Addr, u32 Data)\n{\n\tu32  content = 0x1000;  \n\tu32 maskforPhySet = (u32)(content&0xE000);\n\n\todm_ConfigRFReg_8723B(\n\t\tpDM_Odm,\n\t\tAddr,\n\t\tData,\n\t\tRF_PATH_A,\n\t\tAddr|maskforPhySet\n\t);\n}\n\nvoid odm_ConfigMAC_8723B(struct dm_odm_t *pDM_Odm, u32 Addr, u8 Data)\n{\n\trtw_write8(pDM_Odm->Adapter, Addr, Data);\n}\n\nvoid odm_ConfigBB_AGC_8723B(\n\tstruct dm_odm_t *pDM_Odm,\n\tu32 Addr,\n\tu32 Bitmask,\n\tu32 Data\n)\n{\n\tPHY_SetBBReg(pDM_Odm->Adapter, Addr, Bitmask, Data);\n\t \n\tudelay(1);\n}\n\nvoid odm_ConfigBB_PHY_REG_PG_8723B(\n\tstruct dm_odm_t *pDM_Odm,\n\tu32 RfPath,\n\tu32 Addr,\n\tu32 Bitmask,\n\tu32 Data\n)\n{\n\tif (Addr == 0xfe || Addr == 0xffe)\n\t\tmsleep(50);\n\telse {\n\t\tPHY_StoreTxPowerByRate(pDM_Odm->Adapter, RfPath, Addr, Bitmask, Data);\n\t}\n}\n\nvoid odm_ConfigBB_PHY_8723B(\n\tstruct dm_odm_t *pDM_Odm,\n\tu32 Addr,\n\tu32 Bitmask,\n\tu32 Data\n)\n{\n\tif (Addr == 0xfe)\n\t\tmsleep(50);\n\telse if (Addr == 0xfd)\n\t\tmdelay(5);\n\telse if (Addr == 0xfc)\n\t\tmdelay(1);\n\telse if (Addr == 0xfb)\n\t\tudelay(50);\n\telse if (Addr == 0xfa)\n\t\tudelay(5);\n\telse if (Addr == 0xf9)\n\t\tudelay(1);\n\telse {\n\t\tPHY_SetBBReg(pDM_Odm->Adapter, Addr, Bitmask, Data);\n\t}\n\n\t \n\tudelay(1);\n}\n\nvoid odm_ConfigBB_TXPWR_LMT_8723B(\n\tstruct dm_odm_t *pDM_Odm,\n\tu8 *Regulation,\n\tu8 *Bandwidth,\n\tu8 *RateSection,\n\tu8 *RfPath,\n\tu8 *Channel,\n\tu8 *PowerLimit\n)\n{\n\tPHY_SetTxPowerLimit(\n\t\tpDM_Odm->Adapter,\n\t\tRegulation,\n\t\tBandwidth,\n\t\tRateSection,\n\t\tRfPath,\n\t\tChannel,\n\t\tPowerLimit\n\t);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}