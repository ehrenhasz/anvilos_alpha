{
  "module_name": "rtw_btcoex.c",
  "hash_id": "1f06f7402b72b1b7d3497fb95afb9709932bf2af6032f8f174c1d53386af8f1e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8723bs/core/rtw_btcoex.c",
  "human_readable_source": "\n \n#include <drv_types.h>\n#include <rtw_debug.h>\n#include <rtw_btcoex.h>\n#include <hal_btcoex.h>\n\nvoid rtw_btcoex_MediaStatusNotify(struct adapter *padapter, u8 mediaStatus)\n{\n\tif ((mediaStatus == RT_MEDIA_CONNECT)\n\t\t&& (check_fwstate(&padapter->mlmepriv, WIFI_AP_STATE) == true)) {\n\t\trtw_hal_set_hwreg(padapter, HW_VAR_DL_RSVD_PAGE, NULL);\n\t}\n\n\thal_btcoex_MediaStatusNotify(padapter, mediaStatus);\n}\n\nvoid rtw_btcoex_HaltNotify(struct adapter *padapter)\n{\n\tif (!padapter->bup)\n\t\treturn;\n\n\tif (padapter->bSurpriseRemoved)\n\t\treturn;\n\n\thal_btcoex_HaltNotify(padapter);\n}\n\n \n \n \nvoid rtw_btcoex_RejectApAggregatedPacket(struct adapter *padapter, u8 enable)\n{\n\tstruct mlme_ext_info *pmlmeinfo;\n\tstruct sta_info *psta;\n\n\tpmlmeinfo = &padapter->mlmeextpriv.mlmext_info;\n\tpsta = rtw_get_stainfo(&padapter->stapriv, get_bssid(&padapter->mlmepriv));\n\n\tif (enable) {\n\t\tpmlmeinfo->accept_addba_req = false;\n\t\tif (psta)\n\t\t\tsend_delba(padapter, 0, psta->hwaddr);\n\t} else {\n\t\tpmlmeinfo->accept_addba_req = true;\n\t}\n}\n\nvoid rtw_btcoex_LPS_Enter(struct adapter *padapter)\n{\n\tstruct pwrctrl_priv *pwrpriv;\n\tu8 lpsVal;\n\n\n\tpwrpriv = adapter_to_pwrctl(padapter);\n\n\tpwrpriv->bpower_saving = true;\n\tlpsVal = hal_btcoex_LpsVal(padapter);\n\trtw_set_ps_mode(padapter, PS_MODE_MIN, 0, lpsVal, \"BTCOEX\");\n}\n\nvoid rtw_btcoex_LPS_Leave(struct adapter *padapter)\n{\n\tstruct pwrctrl_priv *pwrpriv;\n\n\n\tpwrpriv = adapter_to_pwrctl(padapter);\n\n\tif (pwrpriv->pwr_mode != PS_MODE_ACTIVE) {\n\t\trtw_set_ps_mode(padapter, PS_MODE_ACTIVE, 0, 0, \"BTCOEX\");\n\t\tLPS_RF_ON_check(padapter, 100);\n\t\tpwrpriv->bpower_saving = false;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}