{
  "module_name": "rtl_pci.c",
  "hash_id": "a891b2890706140b7aa1972b88aab7663ad18542816452c50cd33deed53a7600",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8192e/rtl8192e/rtl_pci.c",
  "human_readable_source": "\n \n#include \"rtl_pci.h\"\n#include \"rtl_core.h\"\n\nstatic void _rtl92e_parse_pci_configuration(struct pci_dev *pdev,\n\t\t\t\t\t    struct net_device *dev)\n{\n\tstruct r8192_priv *priv = (struct r8192_priv *)rtllib_priv(dev);\n\n\tu8 tmp;\n\tu16 link_ctrl_reg;\n\n\tpcie_capability_read_word(priv->pdev, PCI_EXP_LNKCTL, &link_ctrl_reg);\n\n\tpci_read_config_byte(pdev, 0x98, &tmp);\n\ttmp |= BIT4;\n\tpci_write_config_byte(pdev, 0x98, tmp);\n\n\ttmp = 0x17;\n\tpci_write_config_byte(pdev, 0x70f, tmp);\n}\n\nbool rtl92e_check_adapter(struct pci_dev *pdev, struct net_device *dev)\n{\n\tstruct r8192_priv *priv = (struct r8192_priv *)rtllib_priv(dev);\n\tu16 device_id;\n\tu8  revision_id;\n\tu16 irq_line;\n\n\tdevice_id = pdev->device;\n\trevision_id = pdev->revision;\n\tpci_read_config_word(pdev, 0x3C, &irq_line);\n\n\tpriv->card_8192 = NIC_8192E;\n\n\tif (device_id == 0x8192) {\n\t\tswitch (revision_id) {\n\t\tcase HAL_HW_PCI_REVISION_ID_8192PCIE:\n\t\t\tdev_info(&pdev->dev,\n\t\t\t\t \"Adapter(8192 PCI-E) is found - DeviceID=%x\\n\",\n\t\t\t\t device_id);\n\t\t\tpriv->card_8192 = NIC_8192E;\n\t\t\tbreak;\n\t\tcase HAL_HW_PCI_REVISION_ID_8192SE:\n\t\t\tdev_info(&pdev->dev,\n\t\t\t\t \"Adapter(8192SE) is found - DeviceID=%x\\n\",\n\t\t\t\t device_id);\n\t\t\tpriv->card_8192 = NIC_8192SE;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_info(&pdev->dev,\n\t\t\t\t \"UNKNOWN nic type(%4x:%4x)\\n\",\n\t\t\t\t pdev->vendor, pdev->device);\n\t\t\tpriv->card_8192 = NIC_UNKNOWN;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (priv->card_8192 != NIC_8192E) {\n\t\tdev_info(&pdev->dev,\n\t\t\t \"Detect info(%x) and hardware info(%x) not match!\\n\",\n\t\t\t NIC_8192E, priv->card_8192);\n\t\tdev_info(&pdev->dev,\n\t\t\t \"Please select proper driver before install!!!!\\n\");\n\t\treturn false;\n\t}\n\n\t_rtl92e_parse_pci_configuration(pdev, dev);\n\n\treturn true;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}