{
  "module_name": "fb_s6d02a1.c",
  "hash_id": "26f92359a25ff6913d78bc2666f505a0cc5aa5b91f22a1ba3de0d8782183661d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/fbtft/fb_s6d02a1.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <video/mipi_display.h>\n\n#include \"fbtft.h\"\n\n#define DRVNAME \"fb_s6d02a1\"\n\nstatic const s16 default_init_sequence[] = {\n\t-1, 0xf0, 0x5a, 0x5a,\n\n\t-1, 0xfc, 0x5a, 0x5a,\n\n\t-1, 0xfa, 0x02, 0x1f, 0x00, 0x10, 0x22, 0x30, 0x38,\n\t0x3A, 0x3A, 0x3A, 0x3A, 0x3A, 0x3d, 0x02, 0x01,\n\n\t-1, 0xfb, 0x21, 0x00, 0x02, 0x04, 0x07, 0x0a, 0x0b,\n\t0x0c, 0x0c, 0x16, 0x1e, 0x30, 0x3f, 0x01, 0x02,\n\n\t \n\t-1, 0xfd, 0x00, 0x00, 0x00, 0x17, 0x10, 0x00, 0x01,\n\t0x01, 0x00, 0x1f, 0x1f,\n\n\t-1, 0xf4, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x3f,\n\t0x07, 0x00, 0x3C, 0x36, 0x00, 0x3C, 0x36, 0x00,\n\n\t-1, 0xf5, 0x00, 0x70, 0x66, 0x00, 0x00, 0x00, 0x00,\n\t0x00, 0x00, 0x00, 0x6d, 0x66, 0x06,\n\n\t-1, 0xf6, 0x02, 0x00, 0x3f, 0x00, 0x00, 0x00, 0x02,\n\t0x00, 0x06, 0x01, 0x00,\n\n\t-1, 0xf2, 0x00, 0x01, 0x03, 0x08, 0x08, 0x04, 0x00,\n\t0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x04, 0x08, 0x08,\n\n\t-1, 0xf8, 0x11,\n\n\t-1, 0xf7, 0xc8, 0x20, 0x00, 0x00,\n\n\t-1, 0xf3, 0x00, 0x00,\n\n\t-1, MIPI_DCS_EXIT_SLEEP_MODE,\n\t-2, 50,\n\n\t-1, 0xf3, 0x00, 0x01,\n\t-2, 50,\n\t-1, 0xf3, 0x00, 0x03,\n\t-2, 50,\n\t-1, 0xf3, 0x00, 0x07,\n\t-2, 50,\n\t-1, 0xf3, 0x00, 0x0f,\n\t-2, 50,\n\n\t-1, 0xf4, 0x00, 0x04, 0x00, 0x00, 0x00, 0x3f, 0x3f,\n\t0x07, 0x00, 0x3C, 0x36, 0x00, 0x3C, 0x36, 0x00,\n\t-2, 50,\n\n\t-1, 0xf3, 0x00, 0x1f,\n\t-2, 50,\n\t-1, 0xf3, 0x00, 0x7f,\n\t-2, 50,\n\n\t-1, 0xf3, 0x00, 0xff,\n\t-2, 50,\n\n\t-1, 0xfd, 0x00, 0x00, 0x00, 0x17, 0x10, 0x00, 0x00,\n\t0x01, 0x00, 0x16, 0x16,\n\n\t-1, 0xf4, 0x00, 0x09, 0x00, 0x00, 0x00, 0x3f, 0x3f,\n\t0x07, 0x00, 0x3C, 0x36, 0x00, 0x3C, 0x36, 0x00,\n\n\t \n\n\t-1, MIPI_DCS_SET_ADDRESS_MODE, 0x08,\n\n\t-1, MIPI_DCS_SET_TEAR_ON, 0x00,\n\n\t-1, MIPI_DCS_SET_PIXEL_FORMAT, 0x05,\n\n\t \n\t-1, MIPI_DCS_SET_GAMMA_CURVE, 0x01,\n\n\t-2, 150,\n\t-1, MIPI_DCS_SET_DISPLAY_ON,\n\t-1, MIPI_DCS_WRITE_MEMORY_START,\n\t \n\t-3\n\n};\n\nstatic void set_addr_win(struct fbtft_par *par, int xs, int ys, int xe, int ye)\n{\n\twrite_reg(par, MIPI_DCS_SET_COLUMN_ADDRESS,\n\t\t  xs >> 8, xs & 0xFF, xe >> 8, xe & 0xFF);\n\n\twrite_reg(par, MIPI_DCS_SET_PAGE_ADDRESS,\n\t\t  ys >> 8, ys & 0xFF, ye >> 8, ye & 0xFF);\n\n\twrite_reg(par, MIPI_DCS_WRITE_MEMORY_START);\n}\n\n#define MY BIT(7)\n#define MX BIT(6)\n#define MV BIT(5)\nstatic int set_var(struct fbtft_par *par)\n{\n\t \n\tswitch (par->info->var.rotate) {\n\tcase 0:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  MX | MY | (par->bgr << 3));\n\t\tbreak;\n\tcase 270:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  MY | MV | (par->bgr << 3));\n\t\tbreak;\n\tcase 180:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  par->bgr << 3);\n\t\tbreak;\n\tcase 90:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  MX | MV | (par->bgr << 3));\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic struct fbtft_display display = {\n\t.regwidth = 8,\n\t.width = 128,\n\t.height = 160,\n\t.init_sequence = default_init_sequence,\n\t.fbtftops = {\n\t\t.set_addr_win = set_addr_win,\n\t\t.set_var = set_var,\n\t},\n};\n\nFBTFT_REGISTER_DRIVER(DRVNAME, \"samsung,s6d02a1\", &display);\n\nMODULE_ALIAS(\"spi:\" DRVNAME);\nMODULE_ALIAS(\"platform:\" DRVNAME);\nMODULE_ALIAS(\"spi:s6d02a1\");\nMODULE_ALIAS(\"platform:s6d02a1\");\n\nMODULE_DESCRIPTION(\"FB driver for the S6D02A1 LCD Controller\");\nMODULE_AUTHOR(\"WOLFGANG BUENING\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}