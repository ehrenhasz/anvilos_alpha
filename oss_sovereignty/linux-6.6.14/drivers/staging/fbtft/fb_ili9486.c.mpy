{
  "module_name": "fb_ili9486.c",
  "hash_id": "f64afbce3b16758db6eba23e3d49745d4a0c843fcfe400aac51e189289be8303",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/fbtft/fb_ili9486.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <video/mipi_display.h>\n\n#include \"fbtft.h\"\n\n#define DRVNAME\t\t\"fb_ili9486\"\n#define WIDTH\t\t320\n#define HEIGHT\t\t480\n\n \nstatic const s16 default_init_sequence[] = {\n\t \n\t-1, 0xb0, 0x0,\n\t-1, MIPI_DCS_EXIT_SLEEP_MODE,\n\t-2, 250,\n\t \n\t-1, MIPI_DCS_SET_PIXEL_FORMAT, 0x55,\n\t \n\t-1, 0xC2, 0x44,\n\t \n\t-1, 0xC5, 0x00, 0x00, 0x00, 0x00,\n\t \n\t-1, 0xE0, 0x0F, 0x1F, 0x1C, 0x0C, 0x0F, 0x08, 0x48, 0x98,\n\t\t  0x37, 0x0A, 0x13, 0x04, 0x11, 0x0D, 0x00,\n\t \n\t-1, 0xE1, 0x0F, 0x32, 0x2E, 0x0B, 0x0D, 0x05, 0x47, 0x75,\n\t\t  0x37, 0x06, 0x10, 0x03, 0x24, 0x20, 0x00,\n\t \n\t-1, 0xE2, 0x0F, 0x32, 0x2E, 0x0B, 0x0D, 0x05, 0x47, 0x75,\n\t\t  0x37, 0x06, 0x10, 0x03, 0x24, 0x20, 0x00,\n\t-1, MIPI_DCS_EXIT_SLEEP_MODE,\n\t-1, MIPI_DCS_SET_DISPLAY_ON,\n\t \n\t-3\n};\n\nstatic void set_addr_win(struct fbtft_par *par, int xs, int ys, int xe, int ye)\n{\n\twrite_reg(par, MIPI_DCS_SET_COLUMN_ADDRESS,\n\t\t  xs >> 8, xs & 0xFF, xe >> 8, xe & 0xFF);\n\n\twrite_reg(par, MIPI_DCS_SET_PAGE_ADDRESS,\n\t\t  ys >> 8, ys & 0xFF, ye >> 8, ye & 0xFF);\n\n\twrite_reg(par, MIPI_DCS_WRITE_MEMORY_START);\n}\n\nstatic int set_var(struct fbtft_par *par)\n{\n\tswitch (par->info->var.rotate) {\n\tcase 0:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  0x80 | (par->bgr << 3));\n\t\tbreak;\n\tcase 90:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  0x20 | (par->bgr << 3));\n\t\tbreak;\n\tcase 180:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  0x40 | (par->bgr << 3));\n\t\tbreak;\n\tcase 270:\n\t\twrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\n\t\t\t  0xE0 | (par->bgr << 3));\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic struct fbtft_display display = {\n\t.regwidth = 8,\n\t.width = WIDTH,\n\t.height = HEIGHT,\n\t.init_sequence = default_init_sequence,\n\t.fbtftops = {\n\t\t.set_addr_win = set_addr_win,\n\t\t.set_var = set_var,\n\t},\n};\n\nFBTFT_REGISTER_DRIVER(DRVNAME, \"ilitek,ili9486\", &display);\n\nMODULE_ALIAS(\"spi:\" DRVNAME);\nMODULE_ALIAS(\"platform:\" DRVNAME);\nMODULE_ALIAS(\"spi:ili9486\");\nMODULE_ALIAS(\"platform:ili9486\");\n\nMODULE_DESCRIPTION(\"FB driver for the ILI9486 LCD Controller\");\nMODULE_AUTHOR(\"Noralf Tronnes\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}