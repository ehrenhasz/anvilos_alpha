{
  "module_name": "vme_bridge.h",
  "hash_id": "fc162d29b943cdd876fd8563d64602bf6b4d7725f5c81de13f3c0a03339b6f2d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/vme_user/vme_bridge.h",
  "human_readable_source": " \n#ifndef _VME_BRIDGE_H_\n#define _VME_BRIDGE_H_\n\n#include \"vme.h\"\n\n#define VME_CRCSR_BUF_SIZE (508 * 1024)\n \nstruct vme_master_resource {\n\tstruct list_head list;\n\tstruct vme_bridge *parent;\n\t \n\tspinlock_t lock;\n\tint locked;\n\tint number;\n\tu32 address_attr;\n\tu32 cycle_attr;\n\tu32 width_attr;\n\tstruct resource bus_resource;\n\tvoid __iomem *kern_base;\n};\n\nstruct vme_slave_resource {\n\tstruct list_head list;\n\tstruct vme_bridge *parent;\n\tstruct mutex mtx;\n\tint locked;\n\tint number;\n\tu32 address_attr;\n\tu32 cycle_attr;\n};\n\nstruct vme_dma_pattern {\n\tu32 pattern;\n\tu32 type;\n};\n\nstruct vme_dma_pci {\n\tdma_addr_t address;\n};\n\nstruct vme_dma_vme {\n\tunsigned long long address;\n\tu32 aspace;\n\tu32 cycle;\n\tu32 dwidth;\n};\n\nstruct vme_dma_list {\n\tstruct list_head list;\n\tstruct vme_dma_resource *parent;\n\tstruct list_head entries;\n\tstruct mutex mtx;\n};\n\nstruct vme_dma_resource {\n\tstruct list_head list;\n\tstruct vme_bridge *parent;\n\tstruct mutex mtx;\n\tint locked;\n\tint number;\n\tstruct list_head pending;\n\tstruct list_head running;\n\tu32 route_attr;\n};\n\nstruct vme_lm_resource {\n\tstruct list_head list;\n\tstruct vme_bridge *parent;\n\tstruct mutex mtx;\n\tint locked;\n\tint number;\n\tint monitors;\n};\n\nstruct vme_error_handler {\n\tstruct list_head list;\n\tunsigned long long start;\t \n\tunsigned long long end;\t\t \n\tunsigned long long first_error;\t \n\tu32 aspace;\t\t\t \n\tunsigned int num_errors;\t \n};\n\nstruct vme_callback {\n\tvoid (*func)(int, int, void*);\n\tvoid *priv_data;\n};\n\nstruct vme_irq {\n\tint count;\n\tstruct vme_callback callback[VME_NUM_STATUSID];\n};\n\n \n#define VMENAMSIZ 16\n\n \nstruct vme_bridge {\n\tchar name[VMENAMSIZ];\n\tint num;\n\tstruct list_head master_resources;\n\tstruct list_head slave_resources;\n\tstruct list_head dma_resources;\n\tstruct list_head lm_resources;\n\n\t \n\tstruct list_head vme_error_handlers;\n\t \n\tstruct list_head devices;\n\n\t \n\tstruct device *parent;\t \n\tvoid *driver_priv;\t \n\tstruct list_head bus_list;  \n\n\t \n\tstruct vme_irq irq[7];\n\t \n\tstruct mutex irq_mtx;\n\n\t \n\tint (*slave_get)(struct vme_slave_resource *, int *, unsigned long long *,\n\t\t\t unsigned long long *, dma_addr_t *, u32 *, u32 *);\n\tint (*slave_set)(struct vme_slave_resource *, int, unsigned long long,\n\t\t\t unsigned long long, dma_addr_t, u32, u32);\n\n\t \n\tint (*master_get)(struct vme_master_resource *, int *, unsigned long long *,\n\t\t\t  unsigned long long *, u32 *, u32 *, u32 *);\n\tint (*master_set)(struct vme_master_resource *, int, unsigned long long,\n\t\t\t  unsigned long long,  u32, u32, u32);\n\tssize_t (*master_read)(struct vme_master_resource *, void *, size_t, loff_t);\n\tssize_t (*master_write)(struct vme_master_resource *, void *, size_t, loff_t);\n\tunsigned int (*master_rmw)(struct vme_master_resource *, unsigned int,\n\t\t\t\t   unsigned int, unsigned int, loff_t);\n\n\t \n\tint (*dma_list_add)(struct vme_dma_list *, struct vme_dma_attr *,\n\t\t\t    struct vme_dma_attr *, size_t);\n\tint (*dma_list_exec)(struct vme_dma_list *);\n\tint (*dma_list_empty)(struct vme_dma_list *);\n\n\t \n\tvoid (*irq_set)(struct vme_bridge *, int, int, int);\n\tint (*irq_generate)(struct vme_bridge *, int, int);\n\n\t \n\tint (*lm_set)(struct vme_lm_resource *, unsigned long long, u32, u32);\n\tint (*lm_get)(struct vme_lm_resource *, unsigned long long *, u32 *, u32 *);\n\tint (*lm_attach)(struct vme_lm_resource *, int, void (*callback)(void *), void *);\n\tint (*lm_detach)(struct vme_lm_resource *, int);\n\n\t \n\tint (*slot_get)(struct vme_bridge *);\n\n\t \n\tvoid *(*alloc_consistent)(struct device *dev, size_t size, dma_addr_t *dma);\n\tvoid (*free_consistent)(struct device *dev, size_t size, void *vaddr, dma_addr_t dma);\n};\n\nvoid vme_bus_error_handler(struct vme_bridge *bridge, unsigned long long address, int am);\nvoid vme_irq_handler(struct vme_bridge *, int, int);\n\nstruct vme_bridge *vme_init_bridge(struct vme_bridge *);\nint vme_register_bridge(struct vme_bridge *);\nvoid vme_unregister_bridge(struct vme_bridge *);\nstruct vme_error_handler *vme_register_error_handler(struct vme_bridge *bridge, u32 aspace,\n\t\t\t\t\t\t     unsigned long long address, size_t len);\nvoid vme_unregister_error_handler(struct vme_error_handler *handler);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}