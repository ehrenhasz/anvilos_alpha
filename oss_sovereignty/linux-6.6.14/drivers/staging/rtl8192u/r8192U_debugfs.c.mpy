{
  "module_name": "r8192U_debugfs.c",
  "hash_id": "6696f01af4bce1e5ead3ad86d60ef8054417ce4493553e4058381db48ed73838",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8192u/r8192U_debugfs.c",
  "human_readable_source": "\n \n#include <linux/debugfs.h>\n#include <linux/seq_file.h>\n#include \"r8192U.h\"\n\n#define KBUILD_MODNAME \"r8192u_usb\"\n\nstatic int rtl8192_usb_stats_ap_show(struct seq_file *m, void *v)\n{\n\tstruct net_device *dev = m->private;\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\tstruct ieee80211_device *ieee = priv->ieee80211;\n\tstruct ieee80211_network *target;\n\n\tlist_for_each_entry(target, &ieee->network_list, list) {\n\t\tconst char *wpa = \"non_WPA\";\n\n\t\tif (target->wpa_ie_len > 0 || target->rsn_ie_len > 0)\n\t\t\twpa = \"WPA\";\n\n\t\tseq_printf(m, \"%s %s\\n\", target->ssid, wpa);\n\t}\n\n\treturn 0;\n}\n\nstatic int rtl8192_usb_registers_show(struct seq_file *m, void *v)\n{\n\tstruct net_device *dev = m->private;\n\tint i, n, max = 0xff;\n\tu8 byte_rd;\n\n\tseq_puts(m, \"\\n####################page 0##################\\n \");\n\n\tfor (n = 0; n <= max;) {\n\t\tseq_printf(m, \"\\nD:  %2x > \", n);\n\n\t\tfor (i = 0; i < 16 && n <= max; i++, n++) {\n\t\t\tread_nic_byte(dev, 0x000 | n, &byte_rd);\n\t\t\tseq_printf(m, \"%2x \", byte_rd);\n\t\t}\n\t}\n\n\tseq_puts(m, \"\\n####################page 1##################\\n \");\n\tfor (n = 0; n <= max;) {\n\t\tseq_printf(m, \"\\nD:  %2x > \", n);\n\n\t\tfor (i = 0; i < 16 && n <= max; i++, n++) {\n\t\t\tread_nic_byte(dev, 0x100 | n, &byte_rd);\n\t\t\tseq_printf(m, \"%2x \", byte_rd);\n\t\t}\n\t}\n\n\tseq_puts(m, \"\\n####################page 3##################\\n \");\n\tfor (n = 0; n <= max;) {\n\t\tseq_printf(m, \"\\nD:  %2x > \", n);\n\n\t\tfor (i = 0; i < 16 && n <= max; i++, n++) {\n\t\t\tread_nic_byte(dev, 0x300 | n, &byte_rd);\n\t\t\tseq_printf(m, \"%2x \", byte_rd);\n\t\t}\n\t}\n\n\tseq_putc(m, '\\n');\n\treturn 0;\n}\n\nstatic int rtl8192_usb_stats_tx_show(struct seq_file *m, void *v)\n{\n\tstruct net_device *dev = m->private;\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\n\tseq_printf(m,\n\t\t   \"TX VI priority ok int: %lu\\n\"\n\t\t   \"TX VI priority error int: %lu\\n\"\n\t\t   \"TX VO priority ok int: %lu\\n\"\n\t\t   \"TX VO priority error int: %lu\\n\"\n\t\t   \"TX BE priority ok int: %lu\\n\"\n\t\t   \"TX BE priority error int: %lu\\n\"\n\t\t   \"TX BK priority ok int: %lu\\n\"\n\t\t   \"TX BK priority error int: %lu\\n\"\n\t\t   \"TX MANAGE priority ok int: %lu\\n\"\n\t\t   \"TX MANAGE priority error int: %lu\\n\"\n\t\t   \"TX BEACON priority ok int: %lu\\n\"\n\t\t   \"TX BEACON priority error int: %lu\\n\"\n\t\t   \"TX queue resume: %lu\\n\"\n\t\t   \"TX queue stopped?: %d\\n\"\n\t\t   \"TX fifo overflow: %lu\\n\"\n\t\t   \"TX VI queue: %d\\n\"\n\t\t   \"TX VO queue: %d\\n\"\n\t\t   \"TX BE queue: %d\\n\"\n\t\t   \"TX BK queue: %d\\n\"\n\t\t   \"TX VI dropped: %lu\\n\"\n\t\t   \"TX VO dropped: %lu\\n\"\n\t\t   \"TX BE dropped: %lu\\n\"\n\t\t   \"TX BK dropped: %lu\\n\"\n\t\t   \"TX total data packets %lu\\n\",\n\t\t   priv->stats.txviokint,\n\t\t   priv->stats.txvierr,\n\t\t   priv->stats.txvookint,\n\t\t   priv->stats.txvoerr,\n\t\t   priv->stats.txbeokint,\n\t\t   priv->stats.txbeerr,\n\t\t   priv->stats.txbkokint,\n\t\t   priv->stats.txbkerr,\n\t\t   priv->stats.txmanageokint,\n\t\t   priv->stats.txmanageerr,\n\t\t   priv->stats.txbeaconokint,\n\t\t   priv->stats.txbeaconerr,\n\t\t   priv->stats.txresumed,\n\t\t   netif_queue_stopped(dev),\n\t\t   priv->stats.txoverflow,\n\t\t   atomic_read(&(priv->tx_pending[VI_PRIORITY])),\n\t\t   atomic_read(&(priv->tx_pending[VO_PRIORITY])),\n\t\t   atomic_read(&(priv->tx_pending[BE_PRIORITY])),\n\t\t   atomic_read(&(priv->tx_pending[BK_PRIORITY])),\n\t\t   priv->stats.txvidrop,\n\t\t   priv->stats.txvodrop,\n\t\t   priv->stats.txbedrop,\n\t\t   priv->stats.txbkdrop,\n\t\t   priv->stats.txdatapkt\n\t\t);\n\n\treturn 0;\n}\n\nstatic int rtl8192_usb_stats_rx_show(struct seq_file *m, void *v)\n{\n\tstruct net_device *dev = m->private;\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\n\tseq_printf(m,\n\t\t   \"RX packets: %lu\\n\"\n\t\t   \"RX urb status error: %lu\\n\"\n\t\t   \"RX invalid urb error: %lu\\n\",\n\t\t   priv->stats.rxoktotal,\n\t\t   priv->stats.rxstaterr,\n\t\t   priv->stats.rxurberr);\n\n\treturn 0;\n}\n\nDEFINE_SHOW_ATTRIBUTE(rtl8192_usb_stats_rx);\nDEFINE_SHOW_ATTRIBUTE(rtl8192_usb_stats_tx);\nDEFINE_SHOW_ATTRIBUTE(rtl8192_usb_stats_ap);\nDEFINE_SHOW_ATTRIBUTE(rtl8192_usb_registers);\n\nvoid rtl8192_debugfs_init_one(struct net_device *dev)\n{\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\tstruct dentry *parent_dir = debugfs_lookup(KBUILD_MODNAME, NULL);\n\tstruct dentry *dir = debugfs_create_dir(dev->name, parent_dir);\n\n\tdebugfs_create_file(\"stats-rx\", 0444, dir, dev, &rtl8192_usb_stats_rx_fops);\n\tdebugfs_create_file(\"stats-tx\", 0444, dir, dev, &rtl8192_usb_stats_tx_fops);\n\tdebugfs_create_file(\"stats-ap\", 0444, dir, dev, &rtl8192_usb_stats_ap_fops);\n\tdebugfs_create_file(\"registers\", 0444, dir, dev, &rtl8192_usb_registers_fops);\n\n\tpriv->debugfs_dir = dir;\n}\n\nvoid rtl8192_debugfs_exit_one(struct net_device *dev)\n{\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\n\tdebugfs_remove_recursive(priv->debugfs_dir);\n}\n\nvoid rtl8192_debugfs_rename_one(struct net_device *dev)\n{\n\tstruct r8192_priv *priv = ieee80211_priv(dev);\n\tstruct dentry *parent_dir = debugfs_lookup(KBUILD_MODNAME, NULL);\n\n\tdebugfs_rename(parent_dir, priv->debugfs_dir, parent_dir, dev->name);\n}\n\nvoid rtl8192_debugfs_init(void)\n{\n\tdebugfs_create_dir(KBUILD_MODNAME, NULL);\n}\n\nvoid rtl8192_debugfs_exit(void)\n{\n\tdebugfs_remove_recursive(debugfs_lookup(KBUILD_MODNAME, NULL));\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}