{
  "module_name": "audio_codec.h",
  "hash_id": "6e590c3dc3817a38134fcea31a976e5270e079d1155ab4cff8e7d1d71375874f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/greybus/audio_codec.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_GBAUDIO_CODEC_H\n#define __LINUX_GBAUDIO_CODEC_H\n\n#include <linux/greybus.h>\n#include <sound/soc.h>\n#include <sound/jack.h>\n\n#define NAME_SIZE\t32\n#define MAX_DAIS\t2\t \n\nenum {\n\tAPB1_PCM = 0,\n\tAPB2_PCM,\n\tNUM_CODEC_DAIS,\n};\n\n \nenum {\n\tGBAUDIO_DEVICE_NONE                     = 0x0,\n\t \n\tGBAUDIO_DEVICE_BIT_IN                   = 0x80000000,\n\tGBAUDIO_DEVICE_BIT_DEFAULT              = 0x40000000,\n\t \n\tGBAUDIO_DEVICE_OUT_SPEAKER              = 0x2,\n\tGBAUDIO_DEVICE_OUT_WIRED_HEADSET        = 0x4,\n\tGBAUDIO_DEVICE_OUT_WIRED_HEADPHONE      = 0x8,\n\t \n\tGBAUDIO_DEVICE_IN_BUILTIN_MIC           = GBAUDIO_DEVICE_BIT_IN | 0x4,\n\tGBAUDIO_DEVICE_IN_WIRED_HEADSET         = GBAUDIO_DEVICE_BIT_IN | 0x10,\n};\n\n#define GBCODEC_JACK_MASK\t\t0x0000FFFF\n#define GBCODEC_JACK_BUTTON_MASK\t0xFFFF0000\n\nenum gbaudio_codec_state {\n\tGBAUDIO_CODEC_SHUTDOWN = 0,\n\tGBAUDIO_CODEC_STARTUP,\n\tGBAUDIO_CODEC_HWPARAMS,\n\tGBAUDIO_CODEC_PREPARE,\n\tGBAUDIO_CODEC_START,\n\tGBAUDIO_CODEC_STOP,\n};\n\nstruct gbaudio_stream_params {\n\tint state;\n\tu8 sig_bits, channels;\n\tu32 format, rate;\n};\n\nstruct gbaudio_codec_dai {\n\tint id;\n\t \n\tstruct gbaudio_stream_params params[2];\n\tstruct list_head list;\n};\n\nstruct gbaudio_codec_info {\n\tstruct device *dev;\n\tstruct snd_soc_component *component;\n\tstruct list_head module_list;\n\t \n\tstruct list_head dai_list;\n\tstruct mutex lock;\n\tstruct mutex register_mutex;\n};\n\nstruct gbaudio_widget {\n\t__u8 id;\n\tconst char *name;\n\tstruct list_head list;\n};\n\nstruct gbaudio_control {\n\t__u8 id;\n\tchar *name;\n\tchar *wname;\n\tconst char * const *texts;\n\tint items;\n\tstruct list_head list;\n};\n\nstruct gbaudio_data_connection {\n\tint id;\n\t__le16 data_cport;\n\tstruct gb_connection *connection;\n\tstruct list_head list;\n\t \n\tint state[2];\n};\n\n \n#define GB_PLAYBACK\tBIT(0)\n#define GB_CAPTURE\tBIT(1)\n\nenum gbaudio_module_state {\n\tGBAUDIO_MODULE_OFF = 0,\n\tGBAUDIO_MODULE_ON,\n};\n\nstruct gbaudio_jack {\n\tstruct snd_soc_jack jack;\n\tstruct list_head list;\n};\n\nstruct gbaudio_module_info {\n\t \n\tstruct device *dev;\n\tint dev_id;\t \n\tint vid;\n\tint pid;\n\tint type;\n\tint set_uevent;\n\tchar vstr[NAME_SIZE];\n\tchar pstr[NAME_SIZE];\n\tstruct list_head list;\n\t \n\tint manager_id;\n\tchar name[NAME_SIZE];\n\tunsigned int ip_devices;\n\tunsigned int op_devices;\n\n\t \n\tchar jack_name[NAME_SIZE];\n\tchar button_name[NAME_SIZE];\n\tint jack_type;\n\tint jack_mask;\n\tint button_mask;\n\tint button_status;\n\tstruct gbaudio_jack headset;\n\tstruct gbaudio_jack button;\n\n\t \n\tstruct gb_connection *mgmt_connection;\n\tsize_t num_data_connections;\n\tstruct list_head data_list;\n\n\t \n\tint num_dais;\n\tint num_controls;\n\tint num_dapm_widgets;\n\tint num_dapm_routes;\n\tunsigned long dai_offset;\n\tunsigned long widget_offset;\n\tunsigned long control_offset;\n\tunsigned long route_offset;\n\tstruct snd_kcontrol_new *controls;\n\tstruct snd_soc_dapm_widget *dapm_widgets;\n\tstruct snd_soc_dapm_route *dapm_routes;\n\tstruct snd_soc_dai_driver *dais;\n\n\tstruct list_head widget_list;\n\tstruct list_head ctl_list;\n\tstruct list_head widget_ctl_list;\n\tstruct list_head jack_list;\n\n\tstruct gb_audio_topology *topology;\n};\n\nint gbaudio_tplg_parse_data(struct gbaudio_module_info *module,\n\t\t\t    struct gb_audio_topology *tplg_data);\nvoid gbaudio_tplg_release(struct gbaudio_module_info *module);\n\nint gbaudio_module_update(struct gbaudio_codec_info *codec,\n\t\t\t  struct snd_soc_dapm_widget *w,\n\t\t\t  struct gbaudio_module_info *module,\n\t\t\t  int enable);\nint gbaudio_register_module(struct gbaudio_module_info *module);\nvoid gbaudio_unregister_module(struct gbaudio_module_info *module);\n\n \nint gb_audio_gb_get_topology(struct gb_connection *connection,\n\t\t\t     struct gb_audio_topology **topology);\nint gb_audio_gb_get_control(struct gb_connection *connection,\n\t\t\t    u8 control_id, u8 index,\n\t\t\t    struct gb_audio_ctl_elem_value *value);\nint gb_audio_gb_set_control(struct gb_connection *connection,\n\t\t\t    u8 control_id, u8 index,\n\t\t\t    struct gb_audio_ctl_elem_value *value);\nint gb_audio_gb_enable_widget(struct gb_connection *connection,\n\t\t\t      u8 widget_id);\nint gb_audio_gb_disable_widget(struct gb_connection *connection,\n\t\t\t       u8 widget_id);\nint gb_audio_gb_get_pcm(struct gb_connection *connection,\n\t\t\tu16 data_cport, u32 *format,\n\t\t\tu32 *rate, u8 *channels,\n\t\t\tu8 *sig_bits);\nint gb_audio_gb_set_pcm(struct gb_connection *connection,\n\t\t\tu16 data_cport, u32 format,\n\t\t\tu32 rate, u8 channels,\n\t\t\tu8 sig_bits);\nint gb_audio_gb_set_tx_data_size(struct gb_connection *connection,\n\t\t\t\t u16 data_cport, u16 size);\nint gb_audio_gb_activate_tx(struct gb_connection *connection,\n\t\t\t    u16 data_cport);\nint gb_audio_gb_deactivate_tx(struct gb_connection *connection,\n\t\t\t      u16 data_cport);\nint gb_audio_gb_set_rx_data_size(struct gb_connection *connection,\n\t\t\t\t u16 data_cport, u16 size);\nint gb_audio_gb_activate_rx(struct gb_connection *connection,\n\t\t\t    u16 data_cport);\nint gb_audio_gb_deactivate_rx(struct gb_connection *connection,\n\t\t\t      u16 data_cport);\nint gb_audio_apbridgea_set_config(struct gb_connection *connection,\n\t\t\t\t  __u16 i2s_port, __u32 format,\n\t\t\t\t  __u32 rate, __u32 mclk_freq);\nint gb_audio_apbridgea_register_cport(struct gb_connection *connection,\n\t\t\t\t      __u16 i2s_port, __u16 cportid,\n\t\t\t\t      __u8 direction);\nint gb_audio_apbridgea_unregister_cport(struct gb_connection *connection,\n\t\t\t\t\t__u16 i2s_port, __u16 cportid,\n\t\t\t\t\t__u8 direction);\nint gb_audio_apbridgea_set_tx_data_size(struct gb_connection *connection,\n\t\t\t\t\t__u16 i2s_port, __u16 size);\nint gb_audio_apbridgea_prepare_tx(struct gb_connection *connection,\n\t\t\t\t  __u16 i2s_port);\nint gb_audio_apbridgea_start_tx(struct gb_connection *connection,\n\t\t\t\t__u16 i2s_port, __u64 timestamp);\nint gb_audio_apbridgea_stop_tx(struct gb_connection *connection,\n\t\t\t       __u16 i2s_port);\nint gb_audio_apbridgea_shutdown_tx(struct gb_connection *connection,\n\t\t\t\t   __u16 i2s_port);\nint gb_audio_apbridgea_set_rx_data_size(struct gb_connection *connection,\n\t\t\t\t\t__u16 i2s_port, __u16 size);\nint gb_audio_apbridgea_prepare_rx(struct gb_connection *connection,\n\t\t\t\t  __u16 i2s_port);\nint gb_audio_apbridgea_start_rx(struct gb_connection *connection,\n\t\t\t\t__u16 i2s_port);\nint gb_audio_apbridgea_stop_rx(struct gb_connection *connection,\n\t\t\t       __u16 i2s_port);\nint gb_audio_apbridgea_shutdown_rx(struct gb_connection *connection,\n\t\t\t\t   __u16 i2s_port);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}