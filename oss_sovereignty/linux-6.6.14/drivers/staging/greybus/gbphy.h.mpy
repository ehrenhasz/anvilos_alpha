{
  "module_name": "gbphy.h",
  "hash_id": "c0b07caaf74463dd6c8a45abd294f34fbb0b6ee3cc62f24a1679ec2a65954443",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/greybus/gbphy.h",
  "human_readable_source": " \n \n\n#ifndef __GBPHY_H\n#define __GBPHY_H\n\nstruct gbphy_device {\n\tu32 id;\n\tstruct greybus_descriptor_cport *cport_desc;\n\tstruct gb_bundle *bundle;\n\tstruct list_head list;\n\tstruct device dev;\n};\n#define to_gbphy_dev(d) container_of(d, struct gbphy_device, dev)\n\nstatic inline void *gb_gbphy_get_data(struct gbphy_device *gdev)\n{\n\treturn dev_get_drvdata(&gdev->dev);\n}\n\nstatic inline void gb_gbphy_set_data(struct gbphy_device *gdev, void *data)\n{\n\tdev_set_drvdata(&gdev->dev, data);\n}\n\nstruct gbphy_device_id {\n\t__u8 protocol_id;\n};\n\n#define GBPHY_PROTOCOL(p)\t\t\\\n\t.protocol_id\t= (p),\n\nstruct gbphy_driver {\n\tconst char *name;\n\tint (*probe)(struct gbphy_device *device,\n\t\t     const struct gbphy_device_id *id);\n\tvoid (*remove)(struct gbphy_device *device);\n\tconst struct gbphy_device_id *id_table;\n\n\tstruct device_driver driver;\n};\n#define to_gbphy_driver(d) container_of(d, struct gbphy_driver, driver)\n\nint gb_gbphy_register_driver(struct gbphy_driver *driver,\n\t\t\t     struct module *owner, const char *mod_name);\nvoid gb_gbphy_deregister_driver(struct gbphy_driver *driver);\n\n#define gb_gbphy_register(driver) \\\n\tgb_gbphy_register_driver(driver, THIS_MODULE, KBUILD_MODNAME)\n#define gb_gbphy_deregister(driver) \\\n\tgb_gbphy_deregister_driver(driver)\n\n \n#define module_gbphy_driver(__gbphy_driver)\t\\\n\tmodule_driver(__gbphy_driver, gb_gbphy_register, gb_gbphy_deregister)\n\n#ifdef CONFIG_PM\nstatic inline int gbphy_runtime_get_sync(struct gbphy_device *gbphy_dev)\n{\n\tstruct device *dev = &gbphy_dev->dev;\n\tint ret;\n\n\tret = pm_runtime_get_sync(dev);\n\tif (ret < 0) {\n\t\tdev_err(dev, \"pm_runtime_get_sync failed: %d\\n\", ret);\n\t\tpm_runtime_put_noidle(dev);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic inline void gbphy_runtime_put_autosuspend(struct gbphy_device *gbphy_dev)\n{\n\tstruct device *dev = &gbphy_dev->dev;\n\n\tpm_runtime_mark_last_busy(dev);\n\tpm_runtime_put_autosuspend(dev);\n}\n\nstatic inline void gbphy_runtime_get_noresume(struct gbphy_device *gbphy_dev)\n{\n\tpm_runtime_get_noresume(&gbphy_dev->dev);\n}\n\nstatic inline void gbphy_runtime_put_noidle(struct gbphy_device *gbphy_dev)\n{\n\tpm_runtime_put_noidle(&gbphy_dev->dev);\n}\n#else\nstatic inline int gbphy_runtime_get_sync(struct gbphy_device *gbphy_dev) { return 0; }\nstatic inline void gbphy_runtime_put_autosuspend(struct gbphy_device *gbphy_dev) {}\nstatic inline void gbphy_runtime_get_noresume(struct gbphy_device *gbphy_dev) {}\nstatic inline void gbphy_runtime_put_noidle(struct gbphy_device *gbphy_dev) {}\n#endif\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}