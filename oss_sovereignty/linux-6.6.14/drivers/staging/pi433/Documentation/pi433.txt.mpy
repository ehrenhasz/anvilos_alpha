{
  "module_name": "pi433.txt",
  "hash_id": "d865461ed633ab689392d7bcf59ea60eb2e97491ff211e081aea8f3644bc0782",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/pi433/Documentation/pi433.txt",
  "human_readable_source": "=====\nPi433\n=====\n\n\nIntroduction\n============\nThis driver is for controlling pi433, a radio module for the Raspberry Pi\n(www.pi433.de). It supports transmission and reception. It can be opened\nby multiple applications for transmission and reception. While transmit\njobs are queued and processed automatically in the background, the first\napplication asking for reception will block out all other applications\nuntil something gets received terminates the read request.\nThe driver supports on the fly reloading of the hardware fifo of the rf\nchip, thus enabling for much longer telegrams than the hardware fifo size.\n\nDescription of driver operation\n===============================\n\na) transmission\n\nEach transmission can take place with a different configuration of the rf\nmodule. Therefore each application can set its own set of parameters. The driver\ntakes care, that each transmission takes place with the parameterset of the\napplication, that requests the transmission. To allow the transmission to take\nplace in the background, a tx thread is introduced.\nThe transfer of data from the main thread to the tx thread is realised by a\nkfifo. With each write request of an application, the passed in data and the\ncorresponding parameter set gets written to the kfifo.\nOn the other \"side\" of the kfifo, the tx thread continuously checks, whether the\nkfifo is empty. If not, it gets one set of config and data from the kfifo. If\nthere is no receive request or the receiver is still waiting for something in\nthe air, the rf module is set to standby, the parameters for transmission gets\nset, the hardware fifo of the rf chip gets preloaded and the transmission gets\nstarted. Upon hardware fifo threshold interrupt it gets reloaded, thus enabling\nmuch longer telegrams than the hardware fifo size. If the telegram is sent and there\nis more data available in the kfifo, the procedure is repeated. If not the\ntransmission cycle ends.\n\nb) reception\n\nSince there is only one application allowed to receive data at a time, for\nreception there is only one configuration set.\nAs soon as an application sets a request for receiving a telegram, the reception\nconfiguration set is written to the rf module and it gets set into receiving mode.\nNow the driver is waiting, that a predefined RSSI level (signal strength at the\nreceiver) is reached. Until this hasn't happened, the reception can be\ninterrupted by the transmission thread at any time to insert a transmission cycle.\nAs soon as the predefined RSSI level is met, a receiving cycle starts. Similar\nas described for the transmission cycle the read out of the hardware fifo is done\ndynamically. Upon each hardware fifo threshold interrupt, a portion of data gets\nread. So also for reception it is possible to receive more data than the hardware\nfifo can hold.\n\n\nDriver API\n==========\n\nThe driver is currently implemented as a character device. Therefore it supports\nthe calls open, ioctl, read, write and close.\n\n\nparams for ioctl\n----------------\n\nThere are four options:\nPI433_IOC_RD_TX_CFG - get the transmission parameters from the driver\nPI433_IOC_WR_TX_CFG - set the transmission parameters\nPI433_IOC_RD_RX_CFG - get the receiving parameters from the driver\nPI433_IOC_WR_RX_CFG - set the receiving parameters\n\nThe tx configuration is transferred via struct pi433_tx_cfg, the parameterset for transmission.\nIt is divided into two sections: rf parameters and packet format.\n\nrf params:\n\tfrequency\n\t\tfrequency used for transmission.\n\t\tAllowed values: 433050000...434790000\n\tbit_rate\n\t\tbit rate used for transmission.\n\t\tAllowed values: #####\n\tdev_frequency\n\t\tfrequency deviation in case of FSK.\n\t\tAllowed values: 600...500000\n\tmodulation\n\t\tFSK - frequency shift key\n\t\tOOK - On-Off-key\n\tmodShaping\n\t\tshapingOff\t- no shaping\n\t\tshaping1_0\t- gauss filter with BT 1 (FSK only)\n\t\tshaping0_5\t- gauss filter with BT 0.5 (FSK only)\n\t\tshaping0_3\t- gauss filter with BT 0.3 (FSK only)\n\t\tshapingBR\t- filter cut off at BR (OOK only)\n\t\tshaping2BR\t- filter cut off at 2*BR (OOK only)\n\tpa_ramp (FSK only)\n\t\tramp3400\t- amp ramps up in 3.4ms\n\t\tramp2000\t- amp ramps up in 2.0ms\n\t\tramp1000\t- amp ramps up in 1ms\n\t\tramp500\t\t- amp ramps up in 500us\n\t\tramp250\t\t- amp ramps up in 250us\n\t\tramp125\t\t- amp ramps up in 125us\n\t\tramp100\t\t- amp ramps up in 100us\n\t\tramp62\t\t- amp ramps up in 62us\n\t\tramp50\t\t- amp ramps up in 50us\n\t\tramp40\t\t- amp ramps up in 40us\n\t\tramp31\t\t- amp ramps up in 31us\n\t\tramp25\t\t- amp ramps up in 25us\n\t\tramp20\t\t- amp ramps up in 20us\n\t\tramp15\t\t- amp ramps up in 15us\n\t\tramp12\t\t- amp ramps up in 12us\n\t\tramp10\t\t- amp ramps up in 10us\n\ttx_start_condition\n\t\tfifo_level\t- transmission starts, if fifo is filled to\n\t\t\t\t  threshold level\n\t\tfifo_not_empty\t- transmission starts, as soon as there is one\n\t\t\t\t  byte in internal fifo\n\trepetitions\n\t\tThis gives the option, to send a telegram multiple times. Default: 1\n\npacket format:\n\tenable_preamble\n\t\toptionOn\t- a preamble will be automatically generated\n\t\toptionOff\t- no preamble will be generated\n\tenable_sync\n\t\toptionOn\t- a sync word will be automatically added to\n\t\t\t\t  the telegram after the preamble\n\t\toptionOff\t- no sync word will be added\n\t\tAttention: While possible to generate sync without preamble, the\n\t\treceiver won't be able to detect the sync without preamble.\n\tenable_length_byte\n\t\toptionOn\t- the length of the telegram will be automatically\n\t\t\t\t  added to the telegram. It's part of the payload\n\t\toptionOff\t- no length information will be automatically added\n\t\t\t\t  to the telegram.\n\t\tAttention: For telegram length over 255 bytes, this option can't be used\n\t\tAttention: should be used in combination with sync, only\n\tenable_address_byte\n\t\toptionOn\t- the address byte will be automatically added to the\n\t\t\t\t  telegram. It's part of the payload\n\t\toptionOff\t- the address byte will not be added to the telegram.\n\t\tThe address byte can be used for address filtering, so the receiver\n\t\twill only receive telegrams with a given address byte.\n\t\tAttention: should be used in combination with sync, only\n\tenable_crc\n\t\toptionOn\t- an crc will be automatically calculated over the\n\t\t\t\t  payload of the telegram and added to the telegram\n\t\t\t\t  after payload.\n\t\toptionOff\t- no crc will be calculated\n\tpreamble_length\n\t\tlength of the preamble. Allowed values: 0...65536\n\tsync_length\n\t\tlength of the sync word. Allowed values: 0...8\n\tfixed_message_length\n\t\tlength of the payload of the telegram. Will override the length\n\t\tgiven by the buffer, passed in with the write command. Will be\n\t\tignored if set to zero.\n\tsync_pattern[8]\n\t\tcontains up to eight values, that are used as the sync pattern\n\t\ton sync option\n\taddress_byte\n\t\tone byte, used as address byte on address byte option.\n\n\nThe rx configuration is transferred via struct pi433_rx_cfg, the parameterset for receiving. It is divided into two sections: rf parameters and packet format.\n\nrf params:\n\tfrequency\n\t\tfrequency used for transmission.\n\t\tAllowed values: 433050000...434790000\n\tbit_rate\n\t\tbit rate used for transmission.\n\t\tAllowed values: #####\n\tdev_frequency\n\t\tfrequency deviation in case of FSK.\n\t\tAllowed values: 600...500000\n\tmodulation\n\t\tFSK - frequency shift key\n\t\tOOK - on off key\n\trssi_threshold\n\t\tthreshold value for the signal strength on the receiver input.\n\t\tIf this value is exceeded, a reception cycle starts\n\t\tAllowed values: 0...255\n\tthreshold_decrement\n\t\tin order to adapt to different levels of singnal strength, over\n\t\ttime the receiver gets more and more sensitive. This value\n\t\tdeterms, how fast the sensitivity increases.\n\t\tstep_0_5db\t- increase in 0,5dB steps\n\t\tstep_1_0db\t- increase in 1 db steps\n\t\tstep_1_5db\t- increase in 1,5dB steps\n\t\tstep_2_0db\t- increase in 2 db steps\n\t\tstep_3_0db\t- increase in 3 db steps\n\t\tstep_4_0db\t- increase in 4 db steps\n\t\tstep_5_0db\t- increase in 5 db steps\n\t\tstep_6_0db\t- increase in 6 db steps\n\tantenna_impedance\n\t\tsets the electrical adoption of the antenna\n\t\tfifty_ohm\t- for antennas with an impedance of 50Ohm\n\t\ttwo_hundred_ohm\t- for antennas with an impedance of 200Ohm\n\tlna_gain\n\t\tsets the gain of the low noise amp\n\t\tautomatic\t- lna gain is determined by an agc\n\t\tmax\t\t- lna gain is set to maximum\n\t\tmax_minus_6\t- lna gain is set to  6db below max\n\t\tmax_minus_12\t- lna gain is set to 12db below max\n\t\tmax_minus_24\t- lna gain is set to 24db below max\n\t\tmax_minus_36\t- lna gain is set to 36db below max\n\t\tmax_minus_48\t- lna gain is set to 48db below max\n\tbw_mantisse\n\t\tsets the bandwidth of the channel filter - part one: mantisse.\n\t\tmantisse16\t- mantisse is set to 16\n\t\tmantisse20\t- mantisse is set to 20\n\t\tmantisse24\t- mantisse is set to 24\n\tbw_exponent\n\t\tsets the bandwidth of the channel filter - part two: exponent.\n\t\tAllowd values: 0...7\n\tdagc;\n\t\toperation mode of the digital automatic gain control\n\t\tnormal_mode\n\t\timprove\n\t\timprove_for_low_modulation_index\n\n packet format:\n\tenable_sync\n\t\toptionOn  - sync detection is enabled. If configured sync pattern\n\t\t\t    isn't found, telegram will be internally discarded\n\t\toptionOff - sync detection is disabled.\n\tenable_length_byte\n\t\toptionOn   - First byte of payload will be used as a length byte,\n\t\t\t     regardless of the amount of bytes that were requested\n\t\t\t     by the read request.\n\t\toptionOff  - Number of bytes to be read will be set according to\n\t\t\t     amount of bytes that were requested by the read request.\n\t\tAttention: should be used in combination with sync, only\n\tenable_address_filtering;\n\t\tfiltering_off\t\t  - no address filtering will take place\n\t\tnode_address\t\t  - all telegrams, not matching the node\n\t\t\t\t\t    address will be internally discarded\n\t\tnode_or_broadcast_address - all telegrams, neither matching the\n\t\t\t\t\t    node, nor the broadcast address will\n\t\t\t\t\t    be internally discarded\n\t\tAttention: Sync option must be enabled in order to use this feature\n\tenable_crc\n\t\toptionOn\t- a crc will be calculated over the payload of\n\t\t\t\t  the telegram, that was received. If the\n\t\t\t\t  calculated crc doesn't match to two bytes,\n\t\t\t\t  that follow the payload, the telegram will be\n\t\t\t\t  internally discarded.\n\t\tAttention: This option is only operational if sync on and fixed length\n\t\tor length byte is used\n\tsync_length\n\t\tGives the length of the payload.\n\t\tAttention: This setting must meet the setting of the transmitter,\n\t\tif sync option is used.\n\tfixed_message_length\n\t\tOverrides the telegram length either given by the first byte of\n\t\tpayload or by the read request.\n\tbytes_to_drop\n\t\tgives the number of bytes, that will be dropped before transferring\n\t\tdata to the read buffer\n\t\tThis option is only useful if all packet helper are switched\n\t\toff and the rf chip is used in raw receiving mode. This may be\n\t\tneeded, if a telegram of a third party device should be received,\n\t\tusing a protocol not compatible with the packet engine of the rf69 chip.\n\tsync_pattern[8]\n\t\tcontains up to eight values, that are used as the sync pattern\n\t\ton sync option.\n\t\tThis setting must meet the configuration of the transmitting device,\n\t\tif sync option is enabled.\n\tnode_address\n\t\tone byte, used as node address byte on address byte option.\n\tbroadcast_address\n\t\tone byte, used as broadcast address byte on address byte option.\n\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}