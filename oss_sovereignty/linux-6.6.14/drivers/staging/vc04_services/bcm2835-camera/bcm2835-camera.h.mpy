{
  "module_name": "bcm2835-camera.h",
  "hash_id": "6543bea1fa3ac78d083f1160fc49572e0bdeca0dd49b431368526870cc0020c6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.h",
  "human_readable_source": " \n \n\n#define V4L2_CTRL_COUNT 29  \n\nenum {\n\tCOMP_CAMERA = 0,\n\tCOMP_PREVIEW,\n\tCOMP_IMAGE_ENCODE,\n\tCOMP_VIDEO_ENCODE,\n\tCOMP_COUNT\n};\n\nenum {\n\tCAM_PORT_PREVIEW = 0,\n\tCAM_PORT_VIDEO,\n\tCAM_PORT_CAPTURE,\n\tCAM_PORT_COUNT\n};\n\nextern int bcm2835_v4l2_debug;\n\nstruct bcm2835_mmal_dev {\n\t \n\tstruct v4l2_device v4l2_dev;\n\tstruct video_device vdev;\n\tstruct mutex mutex;\n\n\t \n\tstruct v4l2_ctrl_handler ctrl_handler;\n\tstruct v4l2_ctrl *ctrls[V4L2_CTRL_COUNT];\n\tenum v4l2_scene_mode scene_mode;\n\tstruct mmal_colourfx colourfx;\n\tint hflip;\n\tint vflip;\n\tint red_gain;\n\tint blue_gain;\n\tenum mmal_parameter_exposuremode exposure_mode_user;\n\tenum v4l2_exposure_auto_type exposure_mode_v4l2_user;\n\t \n\tenum mmal_parameter_exposuremode exposure_mode_active;\n\tenum mmal_parameter_exposuremeteringmode metering_mode;\n\tunsigned int manual_shutter_speed;\n\tbool exp_auto_priority;\n\tbool manual_iso_enabled;\n\tu32 iso;\n\n\t \n\tstruct vchiq_mmal_instance *instance;\n\tstruct vchiq_mmal_component *component[COMP_COUNT];\n\tint camera_use_count;\n\n\tstruct v4l2_window overlay;\n\n\tstruct {\n\t\tunsigned int width;   \n\t\tunsigned int height;   \n\t\tunsigned int stride;   \n\t\tunsigned int buffersize;  \n\t\tstruct mmal_fmt *fmt;\n\t\tstruct v4l2_fract timeperframe;\n\n\t\t \n\t\tint encode_bitrate;\n\t\t \n\t\tint encode_bitrate_mode;\n\t\t \n\t\tenum v4l2_mpeg_video_h264_profile enc_profile;\n\t\t \n\t\tenum v4l2_mpeg_video_h264_level enc_level;\n\t\t \n\t\tint q_factor;\n\n\t\tstruct vb2_queue vb_vidq;\n\n\t\t \n\t\ts64 vc_start_timestamp;\n\t\t \n\t\tktime_t kernel_start_ts;\n\t\t \n\t\tu32 sequence;\n\n\t\tstruct vchiq_mmal_port *port;  \n\t\t \n\t\tstruct vchiq_mmal_port *camera_port;\n\t\t \n\t\tstruct vchiq_mmal_component *encode_component;\n\t\t \n\t\tunsigned int frame_count;\n\t\t \n\t\tstruct completion frame_cmplt;\n\n\t} capture;\n\n\tunsigned int camera_num;\n\tunsigned int max_width;\n\tunsigned int max_height;\n\tunsigned int rgb_bgr_swapped;\n};\n\nint bcm2835_mmal_init_controls(struct bcm2835_mmal_dev *dev, struct v4l2_ctrl_handler *hdl);\n\nint bcm2835_mmal_set_all_camera_controls(struct bcm2835_mmal_dev *dev);\nint set_framerate_params(struct bcm2835_mmal_dev *dev);\n\n \n\n#define v4l2_dump_pix_format(level, debug, dev, pix_fmt, desc)\t\\\n{\t\\\n\tv4l2_dbg(level, debug, dev,\t\\\n\"%s: w %u h %u field %u pfmt 0x%x bpl %u sz_img %u colorspace 0x%x priv %u\\n\", \\\n\t\tdesc,\t\\\n\t\t(pix_fmt)->width, (pix_fmt)->height, (pix_fmt)->field,\t\\\n\t\t(pix_fmt)->pixelformat, (pix_fmt)->bytesperline,\t\\\n\t\t(pix_fmt)->sizeimage, (pix_fmt)->colorspace, (pix_fmt)->priv); \\\n}\n\n#define v4l2_dump_win_format(level, debug, dev, win_fmt, desc)\t\\\n{\t\\\n\tv4l2_dbg(level, debug, dev,\t\\\n\"%s: w %u h %u l %u t %u  field %u chromakey %06X clip %p \" \\\n\"clipcount %u bitmap %p\\n\", \\\n\t\tdesc,\t\\\n\t\t(win_fmt)->w.width, (win_fmt)->w.height, \\\n\t\t(win_fmt)->w.left, (win_fmt)->w.top, \\\n\t\t(win_fmt)->field,\t\\\n\t\t(win_fmt)->chromakey,\t\\\n\t\t(win_fmt)->clips, (win_fmt)->clipcount,\t\\\n\t\t(win_fmt)->bitmap); \\\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}