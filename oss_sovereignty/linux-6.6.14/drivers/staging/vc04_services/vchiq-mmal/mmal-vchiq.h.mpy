{
  "module_name": "mmal-vchiq.h",
  "hash_id": "23552454e396b82b656aca0fbe429b2b9b0cb6e2ac17b2eb5b2925233e57343c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/vc04_services/vchiq-mmal/mmal-vchiq.h",
  "human_readable_source": " \n \n\n#ifndef MMAL_VCHIQ_H\n#define MMAL_VCHIQ_H\n\n#include \"mmal-common.h\"\n#include \"mmal-msg-format.h\"\n\n#define MAX_PORT_COUNT 4\n\n \n#define MMAL_FORMAT_EXTRADATA_MAX_SIZE 128\n\nstruct vchiq_mmal_instance;\n\nenum vchiq_mmal_es_type {\n\tMMAL_ES_TYPE_UNKNOWN,      \n\tMMAL_ES_TYPE_CONTROL,      \n\tMMAL_ES_TYPE_AUDIO,        \n\tMMAL_ES_TYPE_VIDEO,        \n\tMMAL_ES_TYPE_SUBPICTURE    \n};\n\nstruct vchiq_mmal_port_buffer {\n\tunsigned int num;  \n\tu32 size;  \n\tu32 alignment;  \n};\n\nstruct vchiq_mmal_port;\n\ntypedef void (*vchiq_mmal_buffer_cb)(\n\t\tstruct vchiq_mmal_instance  *instance,\n\t\tstruct vchiq_mmal_port *port,\n\t\tint status, struct mmal_buffer *buffer);\n\nstruct vchiq_mmal_port {\n\tbool enabled;\n\tu32 handle;\n\tu32 type;  \n\tu32 index;  \n\n\t \n\tstruct vchiq_mmal_component *component;\n\n\tstruct vchiq_mmal_port *connected;  \n\n\t \n\tstruct vchiq_mmal_port_buffer minimum_buffer;\n\tstruct vchiq_mmal_port_buffer recommended_buffer;\n\tstruct vchiq_mmal_port_buffer current_buffer;\n\n\t \n\tstruct mmal_es_format_local format;\n\t \n\tunion mmal_es_specific_format es;\n\n\t \n\tstruct list_head buffers;\n\t \n\tspinlock_t slock;\n\n\t \n\tatomic_t buffers_with_vpu;\n\t \n\tvchiq_mmal_buffer_cb buffer_cb;\n\t \n\tvoid *cb_ctx;\n};\n\nstruct vchiq_mmal_component {\n\tbool in_use;\n\tbool enabled;\n\tu32 handle;   \n\tu32 inputs;   \n\tu32 outputs;  \n\tu32 clocks;   \n\tstruct vchiq_mmal_port control;  \n\tstruct vchiq_mmal_port input[MAX_PORT_COUNT];  \n\tstruct vchiq_mmal_port output[MAX_PORT_COUNT];  \n\tstruct vchiq_mmal_port clock[MAX_PORT_COUNT];  \n\tu32 client_component;\t \n};\n\nint vchiq_mmal_init(struct vchiq_mmal_instance **out_instance);\nint vchiq_mmal_finalise(struct vchiq_mmal_instance *instance);\n\n \nint vchiq_mmal_component_init(\n\t\tstruct vchiq_mmal_instance *instance,\n\t\tconst char *name,\n\t\tstruct vchiq_mmal_component **component_out);\n\nint vchiq_mmal_component_finalise(\n\t\tstruct vchiq_mmal_instance *instance,\n\t\tstruct vchiq_mmal_component *component);\n\nint vchiq_mmal_component_enable(\n\t\tstruct vchiq_mmal_instance *instance,\n\t\tstruct vchiq_mmal_component *component);\n\nint vchiq_mmal_component_disable(\n\t\tstruct vchiq_mmal_instance *instance,\n\t\tstruct vchiq_mmal_component *component);\n\n \nint vchiq_mmal_port_enable(\n\t\tstruct vchiq_mmal_instance *instance,\n\t\tstruct vchiq_mmal_port *port,\n\t\tvchiq_mmal_buffer_cb buffer_cb);\n\n \nint vchiq_mmal_port_disable(struct vchiq_mmal_instance *instance,\n\t\t\t    struct vchiq_mmal_port *port);\n\nint vchiq_mmal_port_parameter_set(struct vchiq_mmal_instance *instance,\n\t\t\t\t  struct vchiq_mmal_port *port,\n\t\t\t\t  u32 parameter,\n\t\t\t\t  void *value,\n\t\t\t\t  u32 value_size);\n\nint vchiq_mmal_port_parameter_get(struct vchiq_mmal_instance *instance,\n\t\t\t\t  struct vchiq_mmal_port *port,\n\t\t\t\t  u32 parameter,\n\t\t\t\t  void *value,\n\t\t\t\t  u32 *value_size);\n\nint vchiq_mmal_port_set_format(struct vchiq_mmal_instance *instance,\n\t\t\t       struct vchiq_mmal_port *port);\n\nint vchiq_mmal_port_connect_tunnel(struct vchiq_mmal_instance *instance,\n\t\t\t\t   struct vchiq_mmal_port *src,\n\t\t\t\t   struct vchiq_mmal_port *dst);\n\nint vchiq_mmal_version(struct vchiq_mmal_instance *instance,\n\t\t       u32 *major_out,\n\t\t       u32 *minor_out);\n\nint vchiq_mmal_submit_buffer(struct vchiq_mmal_instance *instance,\n\t\t\t     struct vchiq_mmal_port *port,\n\t\t\t     struct mmal_buffer *buf);\n\nint mmal_vchi_buffer_init(struct vchiq_mmal_instance *instance,\n\t\t\t  struct mmal_buffer *buf);\nint mmal_vchi_buffer_cleanup(struct mmal_buffer *buf);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}