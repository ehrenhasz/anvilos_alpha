{
  "module_name": "usb_ops.c",
  "hash_id": "808495f24ae456b921ea5c2c8636973546cbcc71ae26d73531c502f93ba9cffa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8712/usb_ops.c",
  "human_readable_source": "\n \n\n#define _HCI_OPS_C_\n\n#include \"osdep_service.h\"\n#include \"drv_types.h\"\n#include \"osdep_intf.h\"\n#include \"usb_ops.h\"\n#include \"recv_osdep.h\"\n\nstatic u8 usb_read8(struct intf_hdl *intfhdl, u32 addr)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\tint status;\n\t__le32 data = 0;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x01;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 1;\n\tstatus = r8712_usbctrl_vendorreq(intfpriv, request, wvalue, index,\n\t\t\t\t\t &data, len, requesttype);\n\tif (status < 0)\n\t\treturn 0;\n\treturn (u8)(le32_to_cpu(data) & 0x0ff);\n}\n\nstatic u16 usb_read16(struct intf_hdl *intfhdl, u32 addr)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\tint status;\n\t__le32 data = 0;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x01;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 2;\n\tstatus = r8712_usbctrl_vendorreq(intfpriv, request, wvalue, index,\n\t\t\t\t\t &data, len, requesttype);\n\tif (status < 0)\n\t\treturn 0;\n\treturn (u16)(le32_to_cpu(data) & 0xffff);\n}\n\nstatic u32 usb_read32(struct intf_hdl *intfhdl, u32 addr)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\tint status;\n\t__le32 data = 0;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x01;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 4;\n\tstatus = r8712_usbctrl_vendorreq(intfpriv, request, wvalue, index,\n\t\t\t\t\t &data, len, requesttype);\n\tif (status < 0)\n\t\treturn 0;\n\treturn le32_to_cpu(data);\n}\n\nstatic void usb_write8(struct intf_hdl *intfhdl, u32 addr, u8 val)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\t__le32 data;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x00;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 1;\n\tdata = cpu_to_le32((u32)val & 0x000000ff);\n\tr8712_usbctrl_vendorreq(intfpriv, request, wvalue, index, &data, len,\n\t\t\t\trequesttype);\n}\n\nstatic void usb_write16(struct intf_hdl *intfhdl, u32 addr, u16 val)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\t__le32 data;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x00;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 2;\n\tdata = cpu_to_le32((u32)val & 0x0000ffff);\n\tr8712_usbctrl_vendorreq(intfpriv, request, wvalue, index, &data, len,\n\t\t\t\trequesttype);\n}\n\nstatic void usb_write32(struct intf_hdl *intfhdl, u32 addr, u32 val)\n{\n\tu8 request;\n\tu8 requesttype;\n\tu16 wvalue;\n\tu16 index;\n\tu16 len;\n\t__le32 data;\n\tstruct intf_priv *intfpriv = intfhdl->pintfpriv;\n\n\trequest = 0x05;\n\trequesttype = 0x00;  \n\tindex = 0;\n\twvalue = (u16)(addr & 0x0000ffff);\n\tlen = 4;\n\tdata = cpu_to_le32(val);\n\tr8712_usbctrl_vendorreq(intfpriv, request, wvalue, index, &data, len,\n\t\t\t\trequesttype);\n}\n\nvoid r8712_usb_set_intf_option(u32 *option)\n{\n\t*option = ((*option) | _INTF_ASYNC_);\n}\n\nstatic void usb_intf_hdl_init(u8 *priv)\n{\n}\n\nstatic void usb_intf_hdl_unload(u8 *priv)\n{\n}\n\nstatic void usb_intf_hdl_open(u8 *priv)\n{\n}\n\nstatic void usb_intf_hdl_close(u8 *priv)\n{\n}\n\nvoid r8712_usb_set_intf_funs(struct intf_hdl *intfhdl)\n{\n\tintfhdl->intf_hdl_init = usb_intf_hdl_init;\n\tintfhdl->intf_hdl_unload = usb_intf_hdl_unload;\n\tintfhdl->intf_hdl_open = usb_intf_hdl_open;\n\tintfhdl->intf_hdl_close = usb_intf_hdl_close;\n}\n\nvoid r8712_usb_set_intf_ops(struct _io_ops *ops)\n{\n\tmemset((u8 *)ops, 0, sizeof(struct _io_ops));\n\tops->_read8 = usb_read8;\n\tops->_read16 = usb_read16;\n\tops->_read32 = usb_read32;\n\tops->_read_port = r8712_usb_read_port;\n\tops->_write8 = usb_write8;\n\tops->_write16 = usb_write16;\n\tops->_write32 = usb_write32;\n\tops->_write_mem = r8712_usb_write_mem;\n\tops->_write_port = r8712_usb_write_port;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}