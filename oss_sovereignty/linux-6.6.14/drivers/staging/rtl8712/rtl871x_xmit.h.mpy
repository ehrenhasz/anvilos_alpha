{
  "module_name": "rtl871x_xmit.h",
  "hash_id": "8892bebe0464e7e4dc137bde90efb824b81b2b7da62d324dfe4ebfaf4d9910f3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/staging/rtl8712/rtl871x_xmit.h",
  "human_readable_source": " \n \n#ifndef _RTL871X_XMIT_H_\n#define _RTL871X_XMIT_H_\n\n#include \"osdep_service.h\"\n#include \"drv_types.h\"\n#include \"xmit_osdep.h\"\n\n#ifdef CONFIG_R8712_TX_AGGR\n#define MAX_XMITBUF_SZ  (16384)\n#else\n#define MAX_XMITBUF_SZ  (2048)\n#endif\n\n#define NR_XMITBUFF     (4)\n\n#ifdef CONFIG_R8712_TX_AGGR\n#define AGGR_NR_HIGH_BOUND      (4)  \n#define AGGR_NR_LOW_BOUND       (2)\n#endif\n\n#define XMITBUF_ALIGN_SZ 512\n#define TX_GUARD_BAND\t\t5\n#define MAX_NUMBLKS\t\t(1)\n\n \n#define WEP_IV(pattrib_iv, txpn, keyidx)\\\ndo { \\\n\tpattrib_iv[0] = txpn._byte_.TSC0;\\\n\tpattrib_iv[1] = txpn._byte_.TSC1;\\\n\tpattrib_iv[2] = txpn._byte_.TSC2;\\\n\tpattrib_iv[3] = ((keyidx & 0x3) << 6);\\\n\ttxpn.val = (txpn.val == 0xffffff) ? 0 : (txpn.val + 1);\\\n} while (0)\n\n \n#define TKIP_IV(pattrib_iv, txpn, keyidx)\\\ndo { \\\n\tpattrib_iv[0] = txpn._byte_.TSC1;\\\n\tpattrib_iv[1] = (txpn._byte_.TSC1 | 0x20) & 0x7f;\\\n\tpattrib_iv[2] = txpn._byte_.TSC0;\\\n\tpattrib_iv[3] = BIT(5) | ((keyidx & 0x3) << 6);\\\n\tpattrib_iv[4] = txpn._byte_.TSC2;\\\n\tpattrib_iv[5] = txpn._byte_.TSC3;\\\n\tpattrib_iv[6] = txpn._byte_.TSC4;\\\n\tpattrib_iv[7] = txpn._byte_.TSC5;\\\n\ttxpn.val = txpn.val == 0xffffffffffffULL ? 0 : \\\n\t(txpn.val + 1);\\\n} while (0)\n\n#define AES_IV(pattrib_iv, txpn, keyidx)\\\ndo { \\\n\tpattrib_iv[0] = txpn._byte_.TSC0;\\\n\tpattrib_iv[1] = txpn._byte_.TSC1;\\\n\tpattrib_iv[2] = 0;\\\n\tpattrib_iv[3] = BIT(5) | ((keyidx & 0x3) << 6);\\\n\tpattrib_iv[4] = txpn._byte_.TSC2;\\\n\tpattrib_iv[5] = txpn._byte_.TSC3;\\\n\tpattrib_iv[6] = txpn._byte_.TSC4;\\\n\tpattrib_iv[7] = txpn._byte_.TSC5;\\\n\ttxpn.val = txpn.val == 0xffffffffffffULL ? 0 : \\\n\t(txpn.val + 1);\\\n} while (0)\n\nstruct hw_xmit {\n\tspinlock_t xmit_lock;\n\tstruct list_head pending;\n\tstruct  __queue *sta_queue;\n\tstruct hw_txqueue *phwtxqueue;\n\tsint\ttxcmdcnt;\n\tint\taccnt;\n};\n\nstruct pkt_attrib {\n\tu8\ttype;\n\tu8\tsubtype;\n\tu8\tbswenc;\n\tu8\tdhcp_pkt;\n\n\tu16\tseqnum;\n\tu16\tether_type;\n\tu16\tpktlen;\t\t \n\tu16\tlast_txcmdsz;\n\n\tu8\tpkt_hdrlen;\t \n\tu8\thdrlen;\t\t \n\tu8\tnr_frags;\n\tu8\tack_policy;\n\tu8\tmac_id;\n\tu8\tvcs_mode;\t \n\tu8\tpctrl; \n\tu8\tqsel;\n\n\tu8\tpriority;\n\tu8\tencrypt;\t \n\tu8\tiv_len;\n\tu8\ticv_len;\n\tunsigned char iv[8];\n\tunsigned char icv[8];\n\tu8\tdst[ETH_ALEN] __aligned(2);\t \n\tu8\tsrc[ETH_ALEN];\n\tu8\tta[ETH_ALEN];\n\tu8\tra[ETH_ALEN];\n\tstruct sta_info *psta;\n};\n\n#define WLANHDR_OFFSET\t64\n#define DATA_FRAMETAG\t\t0x01\n#define L2_FRAMETAG\t\t0x02\n#define MGNT_FRAMETAG\t\t0x03\n#define AMSDU_FRAMETAG\t0x04\n#define EII_FRAMETAG\t\t0x05\n#define IEEE8023_FRAMETAG  0x06\n#define MP_FRAMETAG\t\t0x07\n#define TXAGG_FRAMETAG\t0x08\n\nstruct xmit_buf {\n\tstruct list_head list;\n\n\tu8 *pallocated_buf;\n\tu8 *pbuf;\n\tvoid *priv_data;\n\tstruct urb *pxmit_urb[8];\n\tu32 aggr_nr;\n};\n\nstruct xmit_frame {\n\tstruct list_head list;\n\tstruct pkt_attrib attrib;\n\t_pkt *pkt;\n\tint frame_tag;\n\tstruct _adapter *padapter;\n\tu8 *buf_addr;\n\tstruct xmit_buf *pxmitbuf;\n\tu8 *mem_addr;\n\tu16 sz[8];\n\tstruct urb *pxmit_urb[8];\n\tu8 bpending[8];\n\tu8 last[8];\n};\n\nstruct tx_servq {\n\tstruct list_head tx_pending;\n\tstruct  __queue\tsta_pending;\n\tint qcnt;\n};\n\nstruct sta_xmit_priv {\n\tspinlock_t lock;\n\tsint\toption;\n\tsint\tapsd_setting;\t \n\tstruct tx_servq\tbe_q;\t \n\tstruct tx_servq\tbk_q;\t \n\tstruct tx_servq\tvi_q;\t \n\tstruct tx_servq\tvo_q;\t \n\tstruct list_head  legacy_dz;\n\tstruct list_head apsd;\n\tu16 txseq_tid[16];\n\tuint\tsta_tx_bytes;\n\tu64\tsta_tx_pkts;\n\tuint\tsta_tx_fail;\n};\n\nstruct\thw_txqueue {\n\tsint\thead;\n\tsint\ttail;\n\tsint\tfree_sz;\t \n\tsint\tfree_cmdsz;\n\tsint\ttxsz[8];\n\tuint\tff_hwaddr;\n\tuint\tcmd_hwaddr;\n\tsint\tac_tag;\n};\n\nstruct\txmit_priv {\n\tspinlock_t lock;\n\tstruct  __queue\tbe_pending;\n\tstruct  __queue\tbk_pending;\n\tstruct  __queue\tvi_pending;\n\tstruct  __queue\tvo_pending;\n\tstruct  __queue\tbm_pending;\n\tstruct  __queue\tlegacy_dz_queue;\n\tstruct  __queue\tapsd_queue;\n\tu8 *pallocated_frame_buf;\n\tu8 *pxmit_frame_buf;\n\tuint free_xmitframe_cnt;\n\tuint mapping_addr;\n\tuint pkt_sz;\n\tstruct  __queue\tfree_xmit_queue;\n\tstruct\thw_txqueue\tbe_txqueue;\n\tstruct\thw_txqueue\tbk_txqueue;\n\tstruct\thw_txqueue\tvi_txqueue;\n\tstruct\thw_txqueue\tvo_txqueue;\n\tstruct\thw_txqueue\tbmc_txqueue;\n\tuint\tfrag_len;\n\tstruct _adapter\t*adapter;\n\tu8   vcs_setting;\n\tu8\tvcs;\n\tu8\tvcs_type;\n\tu16  rts_thresh;\n\tuint\ttx_bytes;\n\tu64\ttx_pkts;\n\tuint\ttx_drop;\n\tstruct hw_xmit *hwxmits;\n\tu8\thwxmit_entry;\n\tu8\ttxirp_cnt;\n\tstruct tasklet_struct xmit_tasklet;\n\tstruct work_struct xmit_pipe4_reset_wi;\n\tstruct work_struct xmit_pipe6_reset_wi;\n\tstruct work_struct xmit_piped_reset_wi;\n\t \n\tint beq_cnt;\n\tint bkq_cnt;\n\tint viq_cnt;\n\tint voq_cnt;\n\tstruct  __queue\tfree_amsdu_xmit_queue;\n\tu8 *pallocated_amsdu_frame_buf;\n\tu8 *pxmit_amsdu_frame_buf;\n\tuint free_amsdu_xmitframe_cnt;\n\tstruct  __queue free_txagg_xmit_queue;\n\tu8 *pallocated_txagg_frame_buf;\n\tu8 *pxmit_txagg_frame_buf;\n\tuint free_txagg_xmitframe_cnt;\n\tint cmdseq;\n\tstruct  __queue free_xmitbuf_queue;\n\tstruct  __queue pending_xmitbuf_queue;\n\tu8 *pallocated_xmitbuf;\n\tu8 *pxmitbuf;\n\tuint free_xmitbuf_cnt;\n};\n\nvoid r8712_free_xmitbuf(struct xmit_priv *pxmitpriv,\n\t\t\tstruct xmit_buf *pxmitbuf);\nstruct xmit_buf *r8712_alloc_xmitbuf(struct xmit_priv *pxmitpriv);\nvoid r8712_update_protection(struct _adapter *padapter, u8 *ie, uint ie_len);\nstruct xmit_frame *r8712_alloc_xmitframe(struct xmit_priv *pxmitpriv);\nvoid r8712_free_xmitframe(struct xmit_priv *pxmitpriv,\n\t\t\t  struct xmit_frame *pxmitframe);\nvoid r8712_free_xmitframe_queue(struct xmit_priv *pxmitpriv,\n\t\t\t\tstruct  __queue *pframequeue);\nint r8712_xmit_classifier(struct _adapter *padapter,\n\t\t\t  struct xmit_frame *pxmitframe);\nsint r8712_xmitframe_coalesce(struct _adapter *padapter, _pkt *pkt,\n\t\t\t      struct xmit_frame *pxmitframe);\nsint _r8712_init_hw_txqueue(struct hw_txqueue *phw_txqueue, u8 ac_tag);\nvoid _r8712_init_sta_xmit_priv(struct sta_xmit_priv *psta_xmitpriv);\nint r8712_update_attrib(struct _adapter *padapter, _pkt *pkt,\n\t\t\tstruct pkt_attrib *pattrib);\nint r8712_txframes_sta_ac_pending(struct _adapter *padapter,\n\t\t\t\t  struct pkt_attrib *pattrib);\nint _r8712_init_xmit_priv(struct xmit_priv *pxmitpriv,\n\t\t\t  struct _adapter *padapter);\nvoid _free_xmit_priv(struct xmit_priv *pxmitpriv);\nvoid r8712_free_xmitframe_ex(struct xmit_priv *pxmitpriv,\n\t\t\t     struct xmit_frame *pxmitframe);\nint r8712_pre_xmit(struct _adapter *padapter, struct xmit_frame *pxmitframe);\nint r8712_xmit_enqueue(struct _adapter *padapter,\n\t\t       struct xmit_frame *pxmitframe);\nvoid r8712_xmit_direct(struct _adapter *padapter, struct xmit_frame *pxmitframe);\nvoid r8712_xmit_bh(struct tasklet_struct *t);\n\nvoid xmitframe_xmitbuf_attach(struct xmit_frame *pxmitframe,\n\t\t\t      struct xmit_buf *pxmitbuf);\n\n#include \"rtl8712_xmit.h\"\n\n#endif\t \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}