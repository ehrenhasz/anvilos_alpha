{
  "module_name": "ax88796b.c",
  "hash_id": "eb0ce81ab1b20c4bcb1c1283f82a59d62f4b87aba7c02de1c0b83e7ca9512062",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/phy/ax88796b.c",
  "human_readable_source": "\n \n#include <linux/kernel.h>\n#include <linux/errno.h>\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/mii.h>\n#include <linux/phy.h>\n\n#define PHY_ID_ASIX_AX88772A\t\t0x003b1861\n#define PHY_ID_ASIX_AX88772C\t\t0x003b1881\n#define PHY_ID_ASIX_AX88796B\t\t0x003b1841\n\nMODULE_DESCRIPTION(\"Asix PHY driver\");\nMODULE_AUTHOR(\"Michael Schmitz <schmitzmic@gmail.com>\");\nMODULE_LICENSE(\"GPL\");\n\n \nstatic int asix_soft_reset(struct phy_device *phydev)\n{\n\tint ret;\n\n\t \n\tret = phy_write(phydev, MII_BMCR, 0);\n\tif (ret < 0)\n\t\treturn ret;\n\n\treturn genphy_soft_reset(phydev);\n}\n\n \nstatic int asix_ax88772a_read_status(struct phy_device *phydev)\n{\n\tint ret, val;\n\n\tret = genphy_update_link(phydev);\n\tif (ret)\n\t\treturn ret;\n\n\tif (!phydev->link)\n\t\treturn 0;\n\n\t \n\tval = phy_read(phydev, MII_BMCR);\n\tif (val < 0)\n\t\treturn val;\n\n\tif (val & BMCR_SPEED100)\n\t\tphydev->speed = SPEED_100;\n\telse\n\t\tphydev->speed = SPEED_10;\n\n\tif (val & BMCR_FULLDPLX)\n\t\tphydev->duplex = DUPLEX_FULL;\n\telse\n\t\tphydev->duplex = DUPLEX_HALF;\n\n\tret = genphy_read_lpa(phydev);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tif (phydev->autoneg == AUTONEG_ENABLE && phydev->autoneg_complete)\n\t\tphy_resolve_aneg_linkmode(phydev);\n\n\treturn 0;\n}\n\nstatic void asix_ax88772a_link_change_notify(struct phy_device *phydev)\n{\n\t \n\tif (phydev->state == PHY_NOLINK) {\n\t\tphy_init_hw(phydev);\n\t\tphy_start_aneg(phydev);\n\t}\n}\n\nstatic struct phy_driver asix_driver[] = {\n{\n\tPHY_ID_MATCH_EXACT(PHY_ID_ASIX_AX88772A),\n\t.name\t\t= \"Asix Electronics AX88772A\",\n\t.flags\t\t= PHY_IS_INTERNAL,\n\t.read_status\t= asix_ax88772a_read_status,\n\t.suspend\t= genphy_suspend,\n\t.resume\t\t= genphy_resume,\n\t.soft_reset\t= asix_soft_reset,\n\t.link_change_notify\t= asix_ax88772a_link_change_notify,\n}, {\n\tPHY_ID_MATCH_EXACT(PHY_ID_ASIX_AX88772C),\n\t.name\t\t= \"Asix Electronics AX88772C\",\n\t.flags\t\t= PHY_IS_INTERNAL,\n\t.suspend\t= genphy_suspend,\n\t.resume\t\t= genphy_resume,\n\t.soft_reset\t= asix_soft_reset,\n}, {\n\t.phy_id\t\t= PHY_ID_ASIX_AX88796B,\n\t.name\t\t= \"Asix Electronics AX88796B\",\n\t.phy_id_mask\t= 0xfffffff0,\n\t \n\t.soft_reset\t= asix_soft_reset,\n} };\n\nmodule_phy_driver(asix_driver);\n\nstatic struct mdio_device_id __maybe_unused asix_tbl[] = {\n\t{ PHY_ID_MATCH_EXACT(PHY_ID_ASIX_AX88772A) },\n\t{ PHY_ID_MATCH_EXACT(PHY_ID_ASIX_AX88772C) },\n\t{ PHY_ID_ASIX_AX88796B, 0xfffffff0 },\n\t{ }\n};\n\nMODULE_DEVICE_TABLE(mdio, asix_tbl);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}