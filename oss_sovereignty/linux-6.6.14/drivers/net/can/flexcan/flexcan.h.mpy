{
  "module_name": "flexcan.h",
  "hash_id": "98442c1941afbf02b87a43f77b81bb60ee3719be4bef9ea5490a301ccca66189",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/can/flexcan/flexcan.h",
  "human_readable_source": " \n\n#ifndef _FLEXCAN_H\n#define _FLEXCAN_H\n\n#include <linux/can/rx-offload.h>\n\n \n\n \n#define FLEXCAN_QUIRK_BROKEN_WERR_STATE BIT(1)\n  \n#define FLEXCAN_QUIRK_DISABLE_RXFG BIT(2)\n \n#define FLEXCAN_QUIRK_ENABLE_EACEN_RRS  BIT(3)\n \n#define FLEXCAN_QUIRK_DISABLE_MECR BIT(4)\n \n#define FLEXCAN_QUIRK_USE_RX_MAILBOX BIT(5)\n \n#define FLEXCAN_QUIRK_BROKEN_PERR_STATE BIT(6)\n \n#define FLEXCAN_QUIRK_DEFAULT_BIG_ENDIAN BIT(7)\n \n#define FLEXCAN_QUIRK_SETUP_STOP_MODE_GPR BIT(8)\n \n#define FLEXCAN_QUIRK_SUPPORT_FD BIT(9)\n \n#define FLEXCAN_QUIRK_SUPPORT_ECC BIT(10)\n \n#define FLEXCAN_QUIRK_SETUP_STOP_MODE_SCFW BIT(11)\n \n#define FLEXCAN_QUIRK_NR_IRQ_3 BIT(12)\n \n#define FLEXCAN_QUIRK_NR_MB_16 BIT(13)\n \n#define FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX BIT(14)\n \n#define FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX_RTR BIT(15)\n \n#define FLEXCAN_QUIRK_SUPPORT_RX_FIFO BIT(16)\n\nstruct flexcan_devtype_data {\n\tu32 quirks;\t\t \n};\n\nstruct flexcan_stop_mode {\n\tstruct regmap *gpr;\n\tu8 req_gpr;\n\tu8 req_bit;\n};\n\nstruct flexcan_priv {\n\tstruct can_priv can;\n\tstruct can_rx_offload offload;\n\tstruct device *dev;\n\n\tstruct flexcan_regs __iomem *regs;\n\tstruct flexcan_mb __iomem *tx_mb;\n\tstruct flexcan_mb __iomem *tx_mb_reserved;\n\tu8 tx_mb_idx;\n\tu8 mb_count;\n\tu8 mb_size;\n\tu8 clk_src;\t \n\tu8 scu_idx;\n\n\tu64 rx_mask;\n\tu64 tx_mask;\n\tu32 reg_ctrl_default;\n\n\tstruct clk *clk_ipg;\n\tstruct clk *clk_per;\n\tstruct flexcan_devtype_data devtype_data;\n\tstruct regulator *reg_xceiver;\n\tstruct flexcan_stop_mode stm;\n\n\tint irq_boff;\n\tint irq_err;\n\n\t \n\tstruct imx_sc_ipc *sc_ipc_handle;\n\n\t \n\tu32 (*read)(void __iomem *addr);\n\tvoid (*write)(u32 val, void __iomem *addr);\n};\n\nextern const struct ethtool_ops flexcan_ethtool_ops;\n\nstatic inline bool\nflexcan_supports_rx_mailbox(const struct flexcan_priv *priv)\n{\n\tconst u32 quirks = priv->devtype_data.quirks;\n\n\treturn quirks & FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX;\n}\n\nstatic inline bool\nflexcan_supports_rx_mailbox_rtr(const struct flexcan_priv *priv)\n{\n\tconst u32 quirks = priv->devtype_data.quirks;\n\n\treturn (quirks & (FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX |\n\t\t\t  FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX_RTR)) ==\n\t\t(FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX |\n\t\t FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX_RTR);\n}\n\nstatic inline bool\nflexcan_supports_rx_fifo(const struct flexcan_priv *priv)\n{\n\tconst u32 quirks = priv->devtype_data.quirks;\n\n\treturn quirks & FLEXCAN_QUIRK_SUPPORT_RX_FIFO;\n}\n\nstatic inline bool\nflexcan_active_rx_rtr(const struct flexcan_priv *priv)\n{\n\tconst u32 quirks = priv->devtype_data.quirks;\n\n\tif (quirks & FLEXCAN_QUIRK_USE_RX_MAILBOX) {\n\t\tif (quirks & FLEXCAN_QUIRK_SUPPORT_RX_MAILBOX_RTR)\n\t\t\treturn true;\n\t} else {\n\t\t \n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}