{
  "module_name": "es58x_fd.h",
  "hash_id": "4edee90cd9192624f6b33ec2b53b60feeef8e57416485b3f23824818957c9bbe",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/can/usb/etas_es58x/es58x_fd.h",
  "human_readable_source": " \n\n \n\n#ifndef __ES58X_FD_H__\n#define __ES58X_FD_H__\n\n#include <linux/types.h>\n\n#define ES582_1_NUM_CAN_CH 2\n#define ES584_1_NUM_CAN_CH 1\n#define ES58X_FD_NUM_CAN_CH 2\n#define ES58X_FD_CHANNEL_IDX_OFFSET 0\n\n#define ES58X_FD_TX_BULK_MAX 100\n#define ES58X_FD_RX_BULK_MAX 100\n#define ES58X_FD_ECHO_BULK_MAX 100\n\nenum es58x_fd_cmd_type {\n\tES58X_FD_CMD_TYPE_CAN = 0x03,\n\tES58X_FD_CMD_TYPE_CANFD = 0x04,\n\tES58X_FD_CMD_TYPE_DEVICE = 0xFF\n};\n\n \nenum es58x_fd_can_cmd_id {\n\tES58X_FD_CAN_CMD_ID_ENABLE_CHANNEL = 0x01,\n\tES58X_FD_CAN_CMD_ID_DISABLE_CHANNEL = 0x02,\n\tES58X_FD_CAN_CMD_ID_TX_MSG = 0x05,\n\tES58X_FD_CAN_CMD_ID_ECHO_MSG = 0x07,\n\tES58X_FD_CAN_CMD_ID_RX_MSG = 0x10,\n\tES58X_FD_CAN_CMD_ID_ERROR_OR_EVENT_MSG = 0x11,\n\tES58X_FD_CAN_CMD_ID_RESET_RX = 0x20,\n\tES58X_FD_CAN_CMD_ID_RESET_TX = 0x21,\n\tES58X_FD_CAN_CMD_ID_TX_MSG_NO_ACK = 0x55\n};\n\n \nenum es58x_fd_dev_cmd_id {\n\tES58X_FD_DEV_CMD_ID_GETTIMETICKS = 0x01,\n\tES58X_FD_DEV_CMD_ID_TIMESTAMP = 0x02\n};\n\n \nenum es58x_fd_ctrlmode {\n\tES58X_FD_CTRLMODE_ACTIVE = 0,\n\tES58X_FD_CTRLMODE_PASSIVE = BIT(0),\n\tES58X_FD_CTRLMODE_FD = BIT(4),\n\tES58X_FD_CTRLMODE_FD_NON_ISO = BIT(5),\n\tES58X_FD_CTRLMODE_DISABLE_PROTOCOL_EXCEPTION_HANDLING = BIT(6),\n\tES58X_FD_CTRLMODE_EDGE_FILTER_DURING_BUS_INTEGRATION = BIT(7)\n};\n\nstruct es58x_fd_bittiming {\n\t__le32 bitrate;\n\t__le16 tseg1;\t\t \n\t__le16 tseg2;\t\t \n\t__le16 brp;\t\t \n\t__le16 sjw;\t\t \n} __packed;\n\n \nstruct es58x_fd_tx_conf_msg {\n\tstruct es58x_fd_bittiming nominal_bittiming;\n\tu8 samples_per_bit;\n\tu8 sync_edge;\n\tu8 physical_layer;\n\tu8 echo_mode;\n\tu8 ctrlmode;\n\tu8 canfd_enabled;\n\tstruct es58x_fd_bittiming data_bittiming;\n\tu8 tdc_enabled;\n\t__le16 tdco;\n\t__le16 tdcf;\n} __packed;\n\n#define ES58X_FD_CAN_CONF_LEN\t\t\t\t\t\\\n\t(offsetof(struct es58x_fd_tx_conf_msg, canfd_enabled))\n#define ES58X_FD_CANFD_CONF_LEN (sizeof(struct es58x_fd_tx_conf_msg))\n\nstruct es58x_fd_tx_can_msg {\n\tu8 packet_idx;\n\t__le32 can_id;\n\tu8 flags;\n\tunion {\n\t\tu8 dlc;\t\t \n\t\tu8 len;\t\t \n\t} __packed;\n\tu8 data[CANFD_MAX_DLEN];\n} __packed;\n\n#define ES58X_FD_CAN_TX_LEN\t\t\t\t\t\t\\\n\t(offsetof(struct es58x_fd_tx_can_msg, data[CAN_MAX_DLEN]))\n#define ES58X_FD_CANFD_TX_LEN (sizeof(struct es58x_fd_tx_can_msg))\n\nstruct es58x_fd_rx_can_msg {\n\t__le64 timestamp;\n\t__le32 can_id;\n\tu8 flags;\n\tunion {\n\t\tu8 dlc;\t\t \n\t\tu8 len;\t\t \n\t} __packed;\n\tu8 data[CANFD_MAX_DLEN];\n} __packed;\n\n#define ES58X_FD_CAN_RX_LEN\t\t\t\t\t\t\\\n\t(offsetof(struct es58x_fd_rx_can_msg, data[CAN_MAX_DLEN]))\n#define ES58X_FD_CANFD_RX_LEN (sizeof(struct es58x_fd_rx_can_msg))\n\nstruct es58x_fd_echo_msg {\n\t__le64 timestamp;\n\tu8 packet_idx;\n} __packed;\n\nstruct es58x_fd_rx_event_msg {\n\t__le64 timestamp;\n\t__le32 can_id;\n\tu8 flags;\t\t \n\tu8 error_type;\t\t \n\tu8 error_code;\n\tu8 event_code;\n} __packed;\n\nstruct es58x_fd_tx_ack_msg {\n\t__le32 rx_cmd_ret_le32;\t \n\t__le16 tx_free_entries;\t \n} __packed;\n\n \nstruct es58x_fd_urb_cmd {\n\t__le16 SOF;\n\tu8 cmd_type;\n\tu8 cmd_id;\n\tu8 channel_idx;\n\t__le16 msg_len;\n\n\tunion {\n\t\tstruct es58x_fd_tx_conf_msg tx_conf_msg;\n\t\tu8 tx_can_msg_buf[ES58X_FD_TX_BULK_MAX * ES58X_FD_CANFD_TX_LEN];\n\t\tu8 rx_can_msg_buf[ES58X_FD_RX_BULK_MAX * ES58X_FD_CANFD_RX_LEN];\n\t\tstruct es58x_fd_echo_msg echo_msg[ES58X_FD_ECHO_BULK_MAX];\n\t\tstruct es58x_fd_rx_event_msg rx_event_msg;\n\t\tstruct es58x_fd_tx_ack_msg tx_ack_msg;\n\t\t__le64 timestamp;\n\t\t__le32 rx_cmd_ret_le32;\n\t\tDECLARE_FLEX_ARRAY(u8, raw_msg);\n\t} __packed;\n\n\t__le16 reserved_for_crc16_do_not_use;\n} __packed;\n\n#define ES58X_FD_URB_CMD_HEADER_LEN (offsetof(struct es58x_fd_urb_cmd, raw_msg))\n#define ES58X_FD_TX_URB_CMD_MAX_LEN\t\t\t\t\t\\\n\tES58X_SIZEOF_URB_CMD(struct es58x_fd_urb_cmd, tx_can_msg_buf)\n#define ES58X_FD_RX_URB_CMD_MAX_LEN\t\t\t\t\t\\\n\tES58X_SIZEOF_URB_CMD(struct es58x_fd_urb_cmd, rx_can_msg_buf)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}