{
  "module_name": "pcan_usb_core.h",
  "hash_id": "f6f9d003e6e9763c623d3561cfbe5d9393801327ebd808926014c5b59eb6dd34",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/can/usb/peak_usb/pcan_usb_core.h",
  "human_readable_source": " \n \n#ifndef PCAN_USB_CORE_H\n#define PCAN_USB_CORE_H\n\n \n#define PCAN_USB_VENDOR_ID\t\t0x0c72\n\n \n#define PCAN_USB_PRODUCT_ID\t\t0x000c\n#define PCAN_USBPRO_PRODUCT_ID\t\t0x000d\n#define PCAN_USBPROFD_PRODUCT_ID\t0x0011\n#define PCAN_USBFD_PRODUCT_ID\t\t0x0012\n#define PCAN_USBCHIP_PRODUCT_ID\t\t0x0013\n#define PCAN_USBX6_PRODUCT_ID\t\t0x0014\n\n#define PCAN_USB_DRIVER_NAME\t\t\"peak_usb\"\n\n \n#define PCAN_USB_MAX_RX_URBS\t\t4\n#define PCAN_USB_MAX_TX_URBS\t\t10\n\n \n#define PCAN_USB_MAX_CHANNEL\t\t2\n\n \n#define PCAN_USB_MAX_CMD_LEN\t\t32\n\nstruct peak_usb_device;\n\n \nstruct peak_usb_adapter {\n\tchar *name;\n\tu32 device_id;\n\tu32 ctrlmode_supported;\n\tstruct can_clock clock;\n\tconst struct can_bittiming_const * const bittiming_const;\n\tconst struct can_bittiming_const * const data_bittiming_const;\n\tunsigned int ctrl_count;\n\n\tconst struct ethtool_ops *ethtool_ops;\n\n\tint (*intf_probe)(struct usb_interface *intf);\n\n\tint (*dev_init)(struct peak_usb_device *dev);\n\tvoid (*dev_exit)(struct peak_usb_device *dev);\n\tvoid (*dev_free)(struct peak_usb_device *dev);\n\tint (*dev_open)(struct peak_usb_device *dev);\n\tint (*dev_close)(struct peak_usb_device *dev);\n\tint (*dev_set_bittiming)(struct peak_usb_device *dev,\n\t\t\t\t\tstruct can_bittiming *bt);\n\tint (*dev_set_data_bittiming)(struct peak_usb_device *dev,\n\t\t\t\t      struct can_bittiming *bt);\n\tint (*dev_set_bus)(struct peak_usb_device *dev, u8 onoff);\n\tint (*dev_get_can_channel_id)(struct peak_usb_device *dev, u32 *can_ch_id);\n\tint (*dev_set_can_channel_id)(struct peak_usb_device *dev, u32 can_ch_id);\n\tint (*dev_decode_buf)(struct peak_usb_device *dev, struct urb *urb);\n\tint (*dev_encode_msg)(struct peak_usb_device *dev, struct sk_buff *skb,\n\t\t\t\t\tu8 *obuf, size_t *size);\n\tint (*dev_start)(struct peak_usb_device *dev);\n\tint (*dev_stop)(struct peak_usb_device *dev);\n\tint (*dev_restart_async)(struct peak_usb_device *dev, struct urb *urb,\n\t\t\t\t\tu8 *buf);\n\tint (*do_get_berr_counter)(const struct net_device *netdev,\n\t\t\t\t   struct can_berr_counter *bec);\n\tu8 ep_msg_in;\n\tu8 ep_msg_out[PCAN_USB_MAX_CHANNEL];\n\tu8 ts_used_bits;\n\tu8 us_per_ts_shift;\n\tu32 us_per_ts_scale;\n\n\tint rx_buffer_size;\n\tint tx_buffer_size;\n\tint sizeof_dev_private;\n};\n\nextern const struct peak_usb_adapter pcan_usb;\nextern const struct peak_usb_adapter pcan_usb_pro;\nextern const struct peak_usb_adapter pcan_usb_fd;\nextern const struct peak_usb_adapter pcan_usb_chip;\nextern const struct peak_usb_adapter pcan_usb_pro_fd;\nextern const struct peak_usb_adapter pcan_usb_x6;\n\nstruct peak_time_ref {\n\tktime_t tv_host_0, tv_host;\n\tu32 ts_dev_1, ts_dev_2;\n\tu64 ts_total;\n\tu32 tick_count;\n\tconst struct peak_usb_adapter *adapter;\n};\n\nstruct peak_tx_urb_context {\n\tstruct peak_usb_device *dev;\n\tu32 echo_index;\n\tstruct urb *urb;\n};\n\n#define PCAN_USB_STATE_CONNECTED\t0x00000001\n#define PCAN_USB_STATE_STARTED\t\t0x00000002\n\n \nstruct peak_usb_device {\n\tstruct can_priv can;\n\tconst struct peak_usb_adapter *adapter;\n\tunsigned int ctrl_idx;\n\tu32 state;\n\n\tstruct usb_device *udev;\n\tstruct net_device *netdev;\n\n\tatomic_t active_tx_urbs;\n\tstruct usb_anchor tx_submitted;\n\tstruct peak_tx_urb_context tx_contexts[PCAN_USB_MAX_TX_URBS];\n\n\tu8 *cmd_buf;\n\tstruct usb_anchor rx_submitted;\n\n\t \n\tu32 can_channel_id;\n\tu8 device_rev;\n\n\tu8 ep_msg_in;\n\tu8 ep_msg_out;\n\n\tstruct peak_usb_device *prev_siblings;\n\tstruct peak_usb_device *next_siblings;\n};\n\nvoid pcan_dump_mem(const char *prompt, const void *p, int l);\n\n \nvoid peak_usb_init_time_ref(struct peak_time_ref *time_ref,\n\t\t\t    const struct peak_usb_adapter *adapter);\nvoid peak_usb_update_ts_now(struct peak_time_ref *time_ref, u32 ts_now);\nvoid peak_usb_set_ts_now(struct peak_time_ref *time_ref, u32 ts_now);\nvoid peak_usb_get_ts_time(struct peak_time_ref *time_ref, u32 ts, ktime_t *tv);\nint peak_usb_netif_rx_64(struct sk_buff *skb, u32 ts_low, u32 ts_high);\nvoid peak_usb_async_complete(struct urb *urb);\nvoid peak_usb_restart_complete(struct peak_usb_device *dev);\nint pcan_get_ts_info(struct net_device *dev, struct ethtool_ts_info *info);\n\n \nint peak_usb_get_eeprom_len(struct net_device *netdev);\nint peak_usb_get_eeprom(struct net_device *netdev,\n\t\t\tstruct ethtool_eeprom *eeprom, u8 *data);\nint peak_usb_set_eeprom(struct net_device *netdev,\n\t\t\tstruct ethtool_eeprom *eeprom, u8 *data);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}