{
  "module_name": "xgbe.h",
  "hash_id": "2ce109ca1122887ca9aab6af42679eb4f00324d773c89e0d6fb138bca1e0b080",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/amd/xgbe/xgbe.h",
  "human_readable_source": " \n\n#ifndef __XGBE_H__\n#define __XGBE_H__\n\n#include <linux/dma-mapping.h>\n#include <linux/netdevice.h>\n#include <linux/workqueue.h>\n#include <linux/phy.h>\n#include <linux/if_vlan.h>\n#include <linux/bitops.h>\n#include <linux/ptp_clock_kernel.h>\n#include <linux/timecounter.h>\n#include <linux/net_tstamp.h>\n#include <net/dcbnl.h>\n#include <linux/completion.h>\n#include <linux/cpumask.h>\n#include <linux/interrupt.h>\n#include <linux/dcache.h>\n#include <linux/ethtool.h>\n#include <linux/list.h>\n\n#define XGBE_DRV_NAME\t\t\"amd-xgbe\"\n#define XGBE_DRV_DESC\t\t\"AMD 10 Gigabit Ethernet Driver\"\n\n \n#define XGBE_TX_DESC_CNT\t512\n#define XGBE_TX_DESC_MIN_FREE\t(XGBE_TX_DESC_CNT >> 3)\n#define XGBE_TX_DESC_MAX_PROC\t(XGBE_TX_DESC_CNT >> 1)\n#define XGBE_RX_DESC_CNT\t512\n\n#define XGBE_TX_DESC_CNT_MIN\t64\n#define XGBE_TX_DESC_CNT_MAX\t4096\n#define XGBE_RX_DESC_CNT_MIN\t64\n#define XGBE_RX_DESC_CNT_MAX\t4096\n\n#define XGBE_TX_MAX_BUF_SIZE\t(0x3fff & ~(64 - 1))\n\n \n#define XGBE_TX_MAX_SPLIT\t\\\n\t((GSO_LEGACY_MAX_SIZE / XGBE_TX_MAX_BUF_SIZE) + 1)\n\n \n#define XGBE_TX_MAX_DESCS\t(MAX_SKB_FRAGS + XGBE_TX_MAX_SPLIT + 2)\n\n#define XGBE_RX_MIN_BUF_SIZE\t(ETH_FRAME_LEN + ETH_FCS_LEN + VLAN_HLEN)\n#define XGBE_RX_BUF_ALIGN\t64\n#define XGBE_SKB_ALLOC_SIZE\t256\n#define XGBE_SPH_HDSMS_SIZE\t2\t \n\n#define XGBE_MAX_DMA_CHANNELS\t16\n#define XGBE_MAX_QUEUES\t\t16\n#define XGBE_PRIORITY_QUEUES\t8\n#define XGBE_DMA_STOP_TIMEOUT\t1\n\n \n#define XGBE_DMA_OS_ARCR\t0x002b2b2b\n#define XGBE_DMA_OS_AWCR\t0x2f2f2f2f\n\n \n#define XGBE_DMA_SYS_ARCR\t0x00303030\n#define XGBE_DMA_SYS_AWCR\t0x30303030\n\n \n#define XGBE_DMA_PCI_ARCR\t0x000f0f0f\n#define XGBE_DMA_PCI_AWCR\t0x0f0f0f0f\n#define XGBE_DMA_PCI_AWARCR\t0x00000f0f\n\n \n#define XGBE_IRQ_MODE_EDGE\t0\n#define XGBE_IRQ_MODE_LEVEL\t1\n\n#define XGMAC_MIN_PACKET\t60\n#define XGMAC_STD_PACKET_MTU\t1500\n#define XGMAC_MAX_STD_PACKET\t1518\n#define XGMAC_JUMBO_PACKET_MTU\t9000\n#define XGMAC_MAX_JUMBO_PACKET\t9018\n#define XGMAC_ETH_PREAMBLE\t(12 + 8)\t \n\n#define XGMAC_PFC_DATA_LEN\t46\n#define XGMAC_PFC_DELAYS\t14000\n\n#define XGMAC_PRIO_QUEUES(_cnt)\t\t\t\t\t\\\n\tmin_t(unsigned int, IEEE_8021QAZ_MAX_TCS, (_cnt))\n\n \n#define XGBE_MAC_ADDR_PROPERTY\t\"mac-address\"\n#define XGBE_PHY_MODE_PROPERTY\t\"phy-mode\"\n#define XGBE_DMA_IRQS_PROPERTY\t\"amd,per-channel-interrupt\"\n#define XGBE_SPEEDSET_PROPERTY\t\"amd,speed-set\"\n\n \n#define XGBE_DMA_CLOCK\t\t\"dma_clk\"\n#define XGBE_PTP_CLOCK\t\t\"ptp_clk\"\n\n \n#define XGBE_ACPI_DMA_FREQ\t\"amd,dma-freq\"\n#define XGBE_ACPI_PTP_FREQ\t\"amd,ptp-freq\"\n\n \n#define XGBE_XGMAC_BAR\t\t0\n#define XGBE_XPCS_BAR\t\t1\n#define XGBE_MAC_PROP_OFFSET\t0x1d000\n#define XGBE_I2C_CTRL_OFFSET\t0x1e000\n\n \n#define XGBE_MSI_BASE_COUNT\t4\n#define XGBE_MSI_MIN_COUNT\t(XGBE_MSI_BASE_COUNT + 1)\n\n \n#define XGBE_V2_DMA_CLOCK_FREQ\t500000000\t \n#define XGBE_V2_PTP_CLOCK_FREQ\t125000000\t \n\n \n#define XGBE_TSTAMP_SSINC\t20\n#define XGBE_TSTAMP_SNSINC\t0\n\n \n#define XGMAC_DRIVER_CONTEXT\t1\n#define XGMAC_IOCTL_CONTEXT\t2\n\n#define XGMAC_FIFO_MIN_ALLOC\t2048\n#define XGMAC_FIFO_UNIT\t\t256\n#define XGMAC_FIFO_ALIGN(_x)\t\t\t\t\\\n\t(((_x) + XGMAC_FIFO_UNIT - 1) & ~(XGMAC_FIFO_UNIT - 1))\n#define XGMAC_FIFO_FC_OFF\t2048\n#define XGMAC_FIFO_FC_MIN\t4096\n\n#define XGBE_TC_MIN_QUANTUM\t10\n\n \n#define XGBE_GET_DESC_DATA(_ring, _idx)\t\t\t\t\\\n\t((_ring)->rdata +\t\t\t\t\t\\\n\t ((_idx) & ((_ring)->rdesc_count - 1)))\n\n \n#define XGMAC_INIT_DMA_TX_USECS\t\t1000\n#define XGMAC_INIT_DMA_TX_FRAMES\t25\n\n#define XGMAC_MAX_DMA_RIWT\t\t0xff\n#define XGMAC_INIT_DMA_RX_USECS\t\t30\n#define XGMAC_INIT_DMA_RX_FRAMES\t25\n\n \n#define XGMAC_MAX_FLOW_CONTROL_QUEUES\t8\n\n \n#define XGMAC_FLOW_CONTROL_UNIT\t\t512\n#define XGMAC_FLOW_CONTROL_ALIGN(_x)\t\t\t\t\\\n\t(((_x) + XGMAC_FLOW_CONTROL_UNIT - 1) & ~(XGMAC_FLOW_CONTROL_UNIT - 1))\n#define XGMAC_FLOW_CONTROL_VALUE(_x)\t\t\t\t\\\n\t(((_x) < 1024) ? 0 : ((_x) / XGMAC_FLOW_CONTROL_UNIT) - 2)\n#define XGMAC_FLOW_CONTROL_MAX\t\t33280\n\n \n#define XGBE_MAC_HASH_TABLE_SIZE\t8\n\n \n#define XGBE_RSS_HASH_KEY_SIZE\t\t40\n#define XGBE_RSS_MAX_TABLE_SIZE\t\t256\n#define XGBE_RSS_LOOKUP_TABLE_TYPE\t0\n#define XGBE_RSS_HASH_KEY_TYPE\t\t1\n\n \n#define XGBE_AN_MS_TIMEOUT\t\t500\n#define XGBE_LINK_TIMEOUT\t\t5\n#define XGBE_KR_TRAINING_WAIT_ITER\t50\n\n#define XGBE_SGMII_AN_LINK_STATUS\tBIT(1)\n#define XGBE_SGMII_AN_LINK_SPEED\t(BIT(2) | BIT(3))\n#define XGBE_SGMII_AN_LINK_SPEED_10\t0x00\n#define XGBE_SGMII_AN_LINK_SPEED_100\t0x04\n#define XGBE_SGMII_AN_LINK_SPEED_1000\t0x08\n#define XGBE_SGMII_AN_LINK_DUPLEX\tBIT(4)\n\n \n#define XGBE_ECC_LIMIT\t\t\t60\n\n \n#define XGMAC_MAX_C22_PORT\t\t3\n\n \n#define XGBE_ZERO_SUP(_ls)\t\t\\\n\tethtool_link_ksettings_zero_link_mode((_ls), supported)\n\n#define XGBE_SET_SUP(_ls, _mode)\t\\\n\tethtool_link_ksettings_add_link_mode((_ls), supported, _mode)\n\n#define XGBE_CLR_SUP(_ls, _mode)\t\\\n\tethtool_link_ksettings_del_link_mode((_ls), supported, _mode)\n\n#define XGBE_IS_SUP(_ls, _mode)\t\\\n\tethtool_link_ksettings_test_link_mode((_ls), supported, _mode)\n\n#define XGBE_ZERO_ADV(_ls)\t\t\\\n\tethtool_link_ksettings_zero_link_mode((_ls), advertising)\n\n#define XGBE_SET_ADV(_ls, _mode)\t\\\n\tethtool_link_ksettings_add_link_mode((_ls), advertising, _mode)\n\n#define XGBE_CLR_ADV(_ls, _mode)\t\\\n\tethtool_link_ksettings_del_link_mode((_ls), advertising, _mode)\n\n#define XGBE_ADV(_ls, _mode)\t\t\\\n\tethtool_link_ksettings_test_link_mode((_ls), advertising, _mode)\n\n#define XGBE_ZERO_LP_ADV(_ls)\t\t\\\n\tethtool_link_ksettings_zero_link_mode((_ls), lp_advertising)\n\n#define XGBE_SET_LP_ADV(_ls, _mode)\t\\\n\tethtool_link_ksettings_add_link_mode((_ls), lp_advertising, _mode)\n\n#define XGBE_CLR_LP_ADV(_ls, _mode)\t\\\n\tethtool_link_ksettings_del_link_mode((_ls), lp_advertising, _mode)\n\n#define XGBE_LP_ADV(_ls, _mode)\t\t\\\n\tethtool_link_ksettings_test_link_mode((_ls), lp_advertising, _mode)\n\n#define XGBE_LM_COPY(_dst, _dname, _src, _sname)\t\\\n\tbitmap_copy((_dst)->link_modes._dname,\t\t\\\n\t\t    (_src)->link_modes._sname,\t\t\\\n\t\t    __ETHTOOL_LINK_MODE_MASK_NBITS)\n\nstruct xgbe_prv_data;\n\nstruct xgbe_packet_data {\n\tstruct sk_buff *skb;\n\n\tunsigned int attributes;\n\n\tunsigned int errors;\n\n\tunsigned int rdesc_count;\n\tunsigned int length;\n\n\tunsigned int header_len;\n\tunsigned int tcp_header_len;\n\tunsigned int tcp_payload_len;\n\tunsigned short mss;\n\n\tunsigned short vlan_ctag;\n\n\tu64 rx_tstamp;\n\n\tu32 rss_hash;\n\tenum pkt_hash_types rss_hash_type;\n\n\tunsigned int tx_packets;\n\tunsigned int tx_bytes;\n};\n\n \nstruct xgbe_ring_desc {\n\t__le32 desc0;\n\t__le32 desc1;\n\t__le32 desc2;\n\t__le32 desc3;\n};\n\n \nstruct xgbe_page_alloc {\n\tstruct page *pages;\n\tunsigned int pages_len;\n\tunsigned int pages_offset;\n\n\tdma_addr_t pages_dma;\n};\n\n \nstruct xgbe_buffer_data {\n\tstruct xgbe_page_alloc pa;\n\tstruct xgbe_page_alloc pa_unmap;\n\n\tdma_addr_t dma_base;\n\tunsigned long dma_off;\n\tunsigned int dma_len;\n};\n\n \nstruct xgbe_tx_ring_data {\n\tunsigned int packets;\t\t \n\tunsigned int bytes;\t\t \n};\n\n \nstruct xgbe_rx_ring_data {\n\tstruct xgbe_buffer_data hdr;\t \n\tstruct xgbe_buffer_data buf;\t \n\n\tunsigned short hdr_len;\t\t \n\tunsigned short len;\t\t \n};\n\n \nstruct xgbe_ring_data {\n\tstruct xgbe_ring_desc *rdesc;\t \n\tdma_addr_t rdesc_dma;\t\t \n\n\tstruct sk_buff *skb;\t\t \n\tdma_addr_t skb_dma;\t\t \n\tunsigned int skb_dma_len;\t \n\n\tstruct xgbe_tx_ring_data tx;\t \n\tstruct xgbe_rx_ring_data rx;\t \n\n\tunsigned int mapped_as_page;\n\n\t \n\tunsigned int state_saved;\n\tstruct {\n\t\tstruct sk_buff *skb;\n\t\tunsigned int len;\n\t\tunsigned int error;\n\t} state;\n};\n\nstruct xgbe_ring {\n\t \n\tspinlock_t lock;\n\n\t \n\tstruct xgbe_packet_data packet_data;\n\n\t \n\tstruct xgbe_ring_desc *rdesc;\n\tdma_addr_t rdesc_dma;\n\tunsigned int rdesc_count;\n\n\t \n\tstruct xgbe_ring_data *rdata;\n\n\t \n\tstruct xgbe_page_alloc rx_hdr_pa;\n\tstruct xgbe_page_alloc rx_buf_pa;\n\tint node;\n\n\t \n\tunsigned int cur;\n\tunsigned int dirty;\n\n\t \n\tunsigned int coalesce_count;\n\n\tunion {\n\t\tstruct {\n\t\t\tunsigned int queue_stopped;\n\t\t\tunsigned int xmit_more;\n\t\t\tunsigned short cur_mss;\n\t\t\tunsigned short cur_vlan_ctag;\n\t\t} tx;\n\t};\n} ____cacheline_aligned;\n\n \nstruct xgbe_channel {\n\tchar name[16];\n\n\t \n\tstruct xgbe_prv_data *pdata;\n\n\t \n\tunsigned int queue_index;\n\tvoid __iomem *dma_regs;\n\n\t \n\tint dma_irq;\n\tchar dma_irq_name[IFNAMSIZ + 32];\n\n\t \n\tstruct napi_struct napi;\n\n\t \n\tunsigned int curr_ier;\n\tunsigned int saved_ier;\n\n\tunsigned int tx_timer_active;\n\tstruct timer_list tx_timer;\n\n\tstruct xgbe_ring *tx_ring;\n\tstruct xgbe_ring *rx_ring;\n\n\tint node;\n\tcpumask_t affinity_mask;\n} ____cacheline_aligned;\n\nenum xgbe_state {\n\tXGBE_DOWN,\n\tXGBE_LINK_INIT,\n\tXGBE_LINK_ERR,\n\tXGBE_STOPPED,\n};\n\nenum xgbe_int {\n\tXGMAC_INT_DMA_CH_SR_TI,\n\tXGMAC_INT_DMA_CH_SR_TPS,\n\tXGMAC_INT_DMA_CH_SR_TBU,\n\tXGMAC_INT_DMA_CH_SR_RI,\n\tXGMAC_INT_DMA_CH_SR_RBU,\n\tXGMAC_INT_DMA_CH_SR_RPS,\n\tXGMAC_INT_DMA_CH_SR_TI_RI,\n\tXGMAC_INT_DMA_CH_SR_FBE,\n\tXGMAC_INT_DMA_ALL,\n};\n\nenum xgbe_int_state {\n\tXGMAC_INT_STATE_SAVE,\n\tXGMAC_INT_STATE_RESTORE,\n};\n\nenum xgbe_ecc_sec {\n\tXGBE_ECC_SEC_TX,\n\tXGBE_ECC_SEC_RX,\n\tXGBE_ECC_SEC_DESC,\n};\n\nenum xgbe_speed {\n\tXGBE_SPEED_1000 = 0,\n\tXGBE_SPEED_2500,\n\tXGBE_SPEED_10000,\n\tXGBE_SPEEDS,\n};\n\nenum xgbe_xpcs_access {\n\tXGBE_XPCS_ACCESS_V1 = 0,\n\tXGBE_XPCS_ACCESS_V2,\n};\n\nenum xgbe_an_mode {\n\tXGBE_AN_MODE_CL73 = 0,\n\tXGBE_AN_MODE_CL73_REDRV,\n\tXGBE_AN_MODE_CL37,\n\tXGBE_AN_MODE_CL37_SGMII,\n\tXGBE_AN_MODE_NONE,\n};\n\nenum xgbe_an {\n\tXGBE_AN_READY = 0,\n\tXGBE_AN_PAGE_RECEIVED,\n\tXGBE_AN_INCOMPAT_LINK,\n\tXGBE_AN_COMPLETE,\n\tXGBE_AN_NO_LINK,\n\tXGBE_AN_ERROR,\n};\n\nenum xgbe_rx {\n\tXGBE_RX_BPA = 0,\n\tXGBE_RX_XNP,\n\tXGBE_RX_COMPLETE,\n\tXGBE_RX_ERROR,\n};\n\nenum xgbe_mode {\n\tXGBE_MODE_KX_1000 = 0,\n\tXGBE_MODE_KX_2500,\n\tXGBE_MODE_KR,\n\tXGBE_MODE_X,\n\tXGBE_MODE_SGMII_10,\n\tXGBE_MODE_SGMII_100,\n\tXGBE_MODE_SGMII_1000,\n\tXGBE_MODE_SFI,\n\tXGBE_MODE_UNKNOWN,\n};\n\nenum xgbe_speedset {\n\tXGBE_SPEEDSET_1000_10000 = 0,\n\tXGBE_SPEEDSET_2500_10000,\n};\n\nenum xgbe_mdio_mode {\n\tXGBE_MDIO_MODE_NONE = 0,\n\tXGBE_MDIO_MODE_CL22,\n\tXGBE_MDIO_MODE_CL45,\n};\n\nenum xgbe_mb_cmd {\n\tXGBE_MB_CMD_POWER_OFF = 0,\n\tXGBE_MB_CMD_SET_1G,\n\tXGBE_MB_CMD_SET_2_5G,\n\tXGBE_MB_CMD_SET_10G_SFI,\n\tXGBE_MB_CMD_SET_10G_KR,\n\tXGBE_MB_CMD_RRC\n};\n\nenum xgbe_mb_subcmd {\n\tXGBE_MB_SUBCMD_NONE = 0,\n\tXGBE_MB_SUBCMD_RX_ADAP,\n\n\t \n\tXGBE_MB_SUBCMD_ACTIVE = 0,\n\tXGBE_MB_SUBCMD_PASSIVE_1M,\n\tXGBE_MB_SUBCMD_PASSIVE_3M,\n\tXGBE_MB_SUBCMD_PASSIVE_OTHER,\n\n\t \n\tXGBE_MB_SUBCMD_10MBITS = 0,\n\tXGBE_MB_SUBCMD_100MBITS,\n\tXGBE_MB_SUBCMD_1G_SGMII,\n\tXGBE_MB_SUBCMD_1G_KX\n};\n\nstruct xgbe_phy {\n\tstruct ethtool_link_ksettings lks;\n\n\tint address;\n\n\tint autoneg;\n\tint speed;\n\tint duplex;\n\n\tint link;\n\n\tint pause_autoneg;\n\tint tx_pause;\n\tint rx_pause;\n};\n\nenum xgbe_i2c_cmd {\n\tXGBE_I2C_CMD_READ = 0,\n\tXGBE_I2C_CMD_WRITE,\n};\n\nstruct xgbe_i2c_op {\n\tenum xgbe_i2c_cmd cmd;\n\n\tunsigned int target;\n\n\tvoid *buf;\n\tunsigned int len;\n};\n\nstruct xgbe_i2c_op_state {\n\tstruct xgbe_i2c_op *op;\n\n\tunsigned int tx_len;\n\tunsigned char *tx_buf;\n\n\tunsigned int rx_len;\n\tunsigned char *rx_buf;\n\n\tunsigned int tx_abort_source;\n\n\tint ret;\n};\n\nstruct xgbe_i2c {\n\tunsigned int started;\n\tunsigned int max_speed_mode;\n\tunsigned int rx_fifo_size;\n\tunsigned int tx_fifo_size;\n\n\tstruct xgbe_i2c_op_state op_state;\n};\n\nstruct xgbe_mmc_stats {\n\t \n\tu64 txoctetcount_gb;\n\tu64 txframecount_gb;\n\tu64 txbroadcastframes_g;\n\tu64 txmulticastframes_g;\n\tu64 tx64octets_gb;\n\tu64 tx65to127octets_gb;\n\tu64 tx128to255octets_gb;\n\tu64 tx256to511octets_gb;\n\tu64 tx512to1023octets_gb;\n\tu64 tx1024tomaxoctets_gb;\n\tu64 txunicastframes_gb;\n\tu64 txmulticastframes_gb;\n\tu64 txbroadcastframes_gb;\n\tu64 txunderflowerror;\n\tu64 txoctetcount_g;\n\tu64 txframecount_g;\n\tu64 txpauseframes;\n\tu64 txvlanframes_g;\n\n\t \n\tu64 rxframecount_gb;\n\tu64 rxoctetcount_gb;\n\tu64 rxoctetcount_g;\n\tu64 rxbroadcastframes_g;\n\tu64 rxmulticastframes_g;\n\tu64 rxcrcerror;\n\tu64 rxrunterror;\n\tu64 rxjabbererror;\n\tu64 rxundersize_g;\n\tu64 rxoversize_g;\n\tu64 rx64octets_gb;\n\tu64 rx65to127octets_gb;\n\tu64 rx128to255octets_gb;\n\tu64 rx256to511octets_gb;\n\tu64 rx512to1023octets_gb;\n\tu64 rx1024tomaxoctets_gb;\n\tu64 rxunicastframes_g;\n\tu64 rxlengtherror;\n\tu64 rxoutofrangetype;\n\tu64 rxpauseframes;\n\tu64 rxfifooverflow;\n\tu64 rxvlanframes_gb;\n\tu64 rxwatchdogerror;\n};\n\nstruct xgbe_ext_stats {\n\tu64 tx_tso_packets;\n\tu64 rx_split_header_packets;\n\tu64 rx_buffer_unavailable;\n\n\tu64 txq_packets[XGBE_MAX_DMA_CHANNELS];\n\tu64 txq_bytes[XGBE_MAX_DMA_CHANNELS];\n\tu64 rxq_packets[XGBE_MAX_DMA_CHANNELS];\n\tu64 rxq_bytes[XGBE_MAX_DMA_CHANNELS];\n\n\tu64 tx_vxlan_packets;\n\tu64 rx_vxlan_packets;\n\tu64 rx_csum_errors;\n\tu64 rx_vxlan_csum_errors;\n};\n\nstruct xgbe_hw_if {\n\tint (*tx_complete)(struct xgbe_ring_desc *);\n\n\tint (*set_mac_address)(struct xgbe_prv_data *, const u8 *addr);\n\tint (*config_rx_mode)(struct xgbe_prv_data *);\n\n\tint (*enable_rx_csum)(struct xgbe_prv_data *);\n\tint (*disable_rx_csum)(struct xgbe_prv_data *);\n\n\tint (*enable_rx_vlan_stripping)(struct xgbe_prv_data *);\n\tint (*disable_rx_vlan_stripping)(struct xgbe_prv_data *);\n\tint (*enable_rx_vlan_filtering)(struct xgbe_prv_data *);\n\tint (*disable_rx_vlan_filtering)(struct xgbe_prv_data *);\n\tint (*update_vlan_hash_table)(struct xgbe_prv_data *);\n\n\tint (*read_mmd_regs)(struct xgbe_prv_data *, int, int);\n\tvoid (*write_mmd_regs)(struct xgbe_prv_data *, int, int, int);\n\tint (*set_speed)(struct xgbe_prv_data *, int);\n\n\tint (*set_ext_mii_mode)(struct xgbe_prv_data *, unsigned int,\n\t\t\t\tenum xgbe_mdio_mode);\n\tint (*read_ext_mii_regs_c22)(struct xgbe_prv_data *, int, int);\n\tint (*write_ext_mii_regs_c22)(struct xgbe_prv_data *, int, int, u16);\n\tint (*read_ext_mii_regs_c45)(struct xgbe_prv_data *, int, int, int);\n\tint (*write_ext_mii_regs_c45)(struct xgbe_prv_data *, int, int, int,\n\t\t\t\t      u16);\n\n\tint (*set_gpio)(struct xgbe_prv_data *, unsigned int);\n\tint (*clr_gpio)(struct xgbe_prv_data *, unsigned int);\n\n\tvoid (*enable_tx)(struct xgbe_prv_data *);\n\tvoid (*disable_tx)(struct xgbe_prv_data *);\n\tvoid (*enable_rx)(struct xgbe_prv_data *);\n\tvoid (*disable_rx)(struct xgbe_prv_data *);\n\n\tvoid (*powerup_tx)(struct xgbe_prv_data *);\n\tvoid (*powerdown_tx)(struct xgbe_prv_data *);\n\tvoid (*powerup_rx)(struct xgbe_prv_data *);\n\tvoid (*powerdown_rx)(struct xgbe_prv_data *);\n\n\tint (*init)(struct xgbe_prv_data *);\n\tint (*exit)(struct xgbe_prv_data *);\n\n\tint (*enable_int)(struct xgbe_channel *, enum xgbe_int);\n\tint (*disable_int)(struct xgbe_channel *, enum xgbe_int);\n\tvoid (*dev_xmit)(struct xgbe_channel *);\n\tint (*dev_read)(struct xgbe_channel *);\n\tvoid (*tx_desc_init)(struct xgbe_channel *);\n\tvoid (*rx_desc_init)(struct xgbe_channel *);\n\tvoid (*tx_desc_reset)(struct xgbe_ring_data *);\n\tvoid (*rx_desc_reset)(struct xgbe_prv_data *, struct xgbe_ring_data *,\n\t\t\t      unsigned int);\n\tint (*is_last_desc)(struct xgbe_ring_desc *);\n\tint (*is_context_desc)(struct xgbe_ring_desc *);\n\tvoid (*tx_start_xmit)(struct xgbe_channel *, struct xgbe_ring *);\n\n\t \n\tint (*config_tx_flow_control)(struct xgbe_prv_data *);\n\tint (*config_rx_flow_control)(struct xgbe_prv_data *);\n\n\t \n\tint (*config_rx_coalesce)(struct xgbe_prv_data *);\n\tint (*config_tx_coalesce)(struct xgbe_prv_data *);\n\tunsigned int (*usec_to_riwt)(struct xgbe_prv_data *, unsigned int);\n\tunsigned int (*riwt_to_usec)(struct xgbe_prv_data *, unsigned int);\n\n\t \n\tint (*config_rx_threshold)(struct xgbe_prv_data *, unsigned int);\n\tint (*config_tx_threshold)(struct xgbe_prv_data *, unsigned int);\n\n\t \n\tint (*config_rsf_mode)(struct xgbe_prv_data *, unsigned int);\n\tint (*config_tsf_mode)(struct xgbe_prv_data *, unsigned int);\n\n\t \n\tint (*config_osp_mode)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*rx_mmc_int)(struct xgbe_prv_data *);\n\tvoid (*tx_mmc_int)(struct xgbe_prv_data *);\n\tvoid (*read_mmc_stats)(struct xgbe_prv_data *);\n\n\t \n\tint (*config_tstamp)(struct xgbe_prv_data *, unsigned int);\n\tvoid (*update_tstamp_addend)(struct xgbe_prv_data *, unsigned int);\n\tvoid (*set_tstamp_time)(struct xgbe_prv_data *, unsigned int sec,\n\t\t\t\tunsigned int nsec);\n\tu64 (*get_tstamp_time)(struct xgbe_prv_data *);\n\tu64 (*get_tx_tstamp)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*config_tc)(struct xgbe_prv_data *);\n\tvoid (*config_dcb_tc)(struct xgbe_prv_data *);\n\tvoid (*config_dcb_pfc)(struct xgbe_prv_data *);\n\n\t \n\tint (*enable_rss)(struct xgbe_prv_data *);\n\tint (*disable_rss)(struct xgbe_prv_data *);\n\tint (*set_rss_hash_key)(struct xgbe_prv_data *, const u8 *);\n\tint (*set_rss_lookup_table)(struct xgbe_prv_data *, const u32 *);\n\n\t \n\tvoid (*disable_ecc_ded)(struct xgbe_prv_data *);\n\tvoid (*disable_ecc_sec)(struct xgbe_prv_data *, enum xgbe_ecc_sec);\n\n\t \n\tvoid (*enable_vxlan)(struct xgbe_prv_data *);\n\tvoid (*disable_vxlan)(struct xgbe_prv_data *);\n\tvoid (*set_vxlan_id)(struct xgbe_prv_data *);\n};\n\n \nstruct xgbe_phy_impl_if {\n\t \n\tint (*init)(struct xgbe_prv_data *);\n\tvoid (*exit)(struct xgbe_prv_data *);\n\n\t \n\tint (*reset)(struct xgbe_prv_data *);\n\tint (*start)(struct xgbe_prv_data *);\n\tvoid (*stop)(struct xgbe_prv_data *);\n\n\t \n\tint (*link_status)(struct xgbe_prv_data *, int *);\n\n\t \n\tbool (*valid_speed)(struct xgbe_prv_data *, int);\n\n\t \n\tbool (*use_mode)(struct xgbe_prv_data *, enum xgbe_mode);\n\t \n\tvoid (*set_mode)(struct xgbe_prv_data *, enum xgbe_mode);\n\t \n\tenum xgbe_mode (*get_mode)(struct xgbe_prv_data *, int);\n\t \n\tenum xgbe_mode (*switch_mode)(struct xgbe_prv_data *);\n\t \n\tenum xgbe_mode (*cur_mode)(struct xgbe_prv_data *);\n\n\t \n\tenum xgbe_an_mode (*an_mode)(struct xgbe_prv_data *);\n\n\t \n\tint (*an_config)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*an_advertising)(struct xgbe_prv_data *,\n\t\t\t       struct ethtool_link_ksettings *);\n\n\t \n\tenum xgbe_mode (*an_outcome)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*an_pre)(struct xgbe_prv_data *);\n\tvoid (*an_post)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*kr_training_pre)(struct xgbe_prv_data *);\n\tvoid (*kr_training_post)(struct xgbe_prv_data *);\n\n\t \n\tint (*module_info)(struct xgbe_prv_data *pdata,\n\t\t\t   struct ethtool_modinfo *modinfo);\n\tint (*module_eeprom)(struct xgbe_prv_data *pdata,\n\t\t\t     struct ethtool_eeprom *eeprom, u8 *data);\n};\n\nstruct xgbe_phy_if {\n\t \n\tint (*phy_init)(struct xgbe_prv_data *);\n\tvoid (*phy_exit)(struct xgbe_prv_data *);\n\n\t \n\tint (*phy_reset)(struct xgbe_prv_data *);\n\tint (*phy_start)(struct xgbe_prv_data *);\n\tvoid (*phy_stop)(struct xgbe_prv_data *);\n\n\t \n\tvoid (*phy_status)(struct xgbe_prv_data *);\n\tint (*phy_config_aneg)(struct xgbe_prv_data *);\n\n\t \n\tbool (*phy_valid_speed)(struct xgbe_prv_data *, int);\n\n\t \n\tirqreturn_t (*an_isr)(struct xgbe_prv_data *);\n\n\t \n\tint (*module_info)(struct xgbe_prv_data *pdata,\n\t\t\t   struct ethtool_modinfo *modinfo);\n\tint (*module_eeprom)(struct xgbe_prv_data *pdata,\n\t\t\t     struct ethtool_eeprom *eeprom, u8 *data);\n\n\t \n\tstruct xgbe_phy_impl_if phy_impl;\n};\n\nstruct xgbe_i2c_if {\n\t \n\tint (*i2c_init)(struct xgbe_prv_data *);\n\n\t \n\tint (*i2c_start)(struct xgbe_prv_data *);\n\tvoid (*i2c_stop)(struct xgbe_prv_data *);\n\n\t \n\tint (*i2c_xfer)(struct xgbe_prv_data *, struct xgbe_i2c_op *);\n\n\t \n\tirqreturn_t (*i2c_isr)(struct xgbe_prv_data *);\n};\n\nstruct xgbe_desc_if {\n\tint (*alloc_ring_resources)(struct xgbe_prv_data *);\n\tvoid (*free_ring_resources)(struct xgbe_prv_data *);\n\tint (*map_tx_skb)(struct xgbe_channel *, struct sk_buff *);\n\tint (*map_rx_buffer)(struct xgbe_prv_data *, struct xgbe_ring *,\n\t\t\t     struct xgbe_ring_data *);\n\tvoid (*unmap_rdata)(struct xgbe_prv_data *, struct xgbe_ring_data *);\n\tvoid (*wrapper_tx_desc_init)(struct xgbe_prv_data *);\n\tvoid (*wrapper_rx_desc_init)(struct xgbe_prv_data *);\n};\n\n \nstruct xgbe_hw_features {\n\t \n\tunsigned int version;\n\n\t \n\tunsigned int gmii;\t\t \n\tunsigned int vlhash;\t\t \n\tunsigned int sma;\t\t \n\tunsigned int rwk;\t\t \n\tunsigned int mgk;\t\t \n\tunsigned int mmc;\t\t \n\tunsigned int aoe;\t\t \n\tunsigned int ts;\t\t \n\tunsigned int eee;\t\t \n\tunsigned int tx_coe;\t\t \n\tunsigned int rx_coe;\t\t \n\tunsigned int addn_mac;\t\t \n\tunsigned int ts_src;\t\t \n\tunsigned int sa_vlan_ins;\t \n\tunsigned int vxn;\t\t \n\n\t \n\tunsigned int rx_fifo_size;\t \n\tunsigned int tx_fifo_size;\t \n\tunsigned int adv_ts_hi;\t\t \n\tunsigned int dma_width;\t\t \n\tunsigned int dcb;\t\t \n\tunsigned int sph;\t\t \n\tunsigned int tso;\t\t \n\tunsigned int dma_debug;\t\t \n\tunsigned int rss;\t\t \n\tunsigned int tc_cnt;\t\t \n\tunsigned int hash_table_size;\t \n\tunsigned int l3l4_filter_num;\t \n\n\t \n\tunsigned int rx_q_cnt;\t\t \n\tunsigned int tx_q_cnt;\t\t \n\tunsigned int rx_ch_cnt;\t\t \n\tunsigned int tx_ch_cnt;\t\t \n\tunsigned int pps_out_num;\t \n\tunsigned int aux_snap_num;\t \n};\n\nstruct xgbe_version_data {\n\tvoid (*init_function_ptrs_phy_impl)(struct xgbe_phy_if *);\n\tenum xgbe_xpcs_access xpcs_access;\n\tunsigned int mmc_64bit;\n\tunsigned int tx_max_fifo_size;\n\tunsigned int rx_max_fifo_size;\n\tunsigned int tx_tstamp_workaround;\n\tunsigned int ecc_support;\n\tunsigned int i2c_support;\n\tunsigned int irq_reissue_support;\n\tunsigned int tx_desc_prefetch;\n\tunsigned int rx_desc_prefetch;\n\tunsigned int an_cdr_workaround;\n\tunsigned int enable_rrc;\n};\n\nstruct xgbe_prv_data {\n\tstruct net_device *netdev;\n\tstruct pci_dev *pcidev;\n\tstruct platform_device *platdev;\n\tstruct acpi_device *adev;\n\tstruct device *dev;\n\tstruct platform_device *phy_platdev;\n\tstruct device *phy_dev;\n\n\t \n\tstruct xgbe_version_data *vdata;\n\n\t \n\tunsigned int use_acpi;\n\n\t \n\tvoid __iomem *xgmac_regs;\t \n\tvoid __iomem *xpcs_regs;\t \n\tvoid __iomem *rxtx_regs;\t \n\tvoid __iomem *sir0_regs;\t \n\tvoid __iomem *sir1_regs;\t \n\tvoid __iomem *xprop_regs;\t \n\tvoid __iomem *xi2c_regs;\t \n\n\t \n\tunsigned int pp0;\n\tunsigned int pp1;\n\tunsigned int pp2;\n\tunsigned int pp3;\n\tunsigned int pp4;\n\n\t \n\tspinlock_t lock;\n\n\t \n\tspinlock_t xpcs_lock;\n\tunsigned int xpcs_window_def_reg;\n\tunsigned int xpcs_window_sel_reg;\n\tunsigned int xpcs_window;\n\tunsigned int xpcs_window_size;\n\tunsigned int xpcs_window_mask;\n\n\t \n\tstruct mutex rss_mutex;\n\n\t \n\tunsigned long dev_state;\n\n\t \n\tunsigned long tx_sec_period;\n\tunsigned long tx_ded_period;\n\tunsigned long rx_sec_period;\n\tunsigned long rx_ded_period;\n\tunsigned long desc_sec_period;\n\tunsigned long desc_ded_period;\n\n\tunsigned int tx_sec_count;\n\tunsigned int tx_ded_count;\n\tunsigned int rx_sec_count;\n\tunsigned int rx_ded_count;\n\tunsigned int desc_ded_count;\n\tunsigned int desc_sec_count;\n\n\tint dev_irq;\n\tint ecc_irq;\n\tint i2c_irq;\n\tint channel_irq[XGBE_MAX_DMA_CHANNELS];\n\n\tunsigned int per_channel_irq;\n\tunsigned int irq_count;\n\tunsigned int channel_irq_count;\n\tunsigned int channel_irq_mode;\n\n\tchar ecc_name[IFNAMSIZ + 32];\n\n\tstruct xgbe_hw_if hw_if;\n\tstruct xgbe_phy_if phy_if;\n\tstruct xgbe_desc_if desc_if;\n\tstruct xgbe_i2c_if i2c_if;\n\n\t \n\tunsigned int coherent;\n\tunsigned int arcr;\n\tunsigned int awcr;\n\tunsigned int awarcr;\n\n\t \n\tstruct workqueue_struct *dev_workqueue;\n\tstruct work_struct service_work;\n\tstruct timer_list service_timer;\n\n\t \n\tstruct xgbe_channel *channel[XGBE_MAX_DMA_CHANNELS];\n\tunsigned int tx_max_channel_count;\n\tunsigned int rx_max_channel_count;\n\tunsigned int channel_count;\n\tunsigned int tx_ring_count;\n\tunsigned int tx_desc_count;\n\tunsigned int rx_ring_count;\n\tunsigned int rx_desc_count;\n\n\tunsigned int new_tx_ring_count;\n\tunsigned int new_rx_ring_count;\n\n\tunsigned int tx_max_q_count;\n\tunsigned int rx_max_q_count;\n\tunsigned int tx_q_count;\n\tunsigned int rx_q_count;\n\n\t \n\tunsigned int blen;\n\tunsigned int pbl;\n\tunsigned int aal;\n\tunsigned int rd_osr_limit;\n\tunsigned int wr_osr_limit;\n\n\t \n\tunsigned int tx_sf_mode;\n\tunsigned int tx_threshold;\n\tunsigned int tx_osp_mode;\n\tunsigned int tx_max_fifo_size;\n\n\t \n\tunsigned int rx_sf_mode;\n\tunsigned int rx_threshold;\n\tunsigned int rx_max_fifo_size;\n\n\t \n\tunsigned int tx_usecs;\n\tunsigned int tx_frames;\n\n\t \n\tunsigned int rx_riwt;\n\tunsigned int rx_usecs;\n\tunsigned int rx_frames;\n\n\t \n\tunsigned int rx_buf_size;\n\n\t \n\tunsigned int pause_autoneg;\n\tunsigned int tx_pause;\n\tunsigned int rx_pause;\n\tunsigned int rx_rfa[XGBE_MAX_QUEUES];\n\tunsigned int rx_rfd[XGBE_MAX_QUEUES];\n\n\t \n\tu8 rss_key[XGBE_RSS_HASH_KEY_SIZE];\n\tu32 rss_table[XGBE_RSS_MAX_TABLE_SIZE];\n\tu32 rss_options;\n\n\t \n\tu16 vxlan_port;\n\n\t \n\tunsigned char mac_addr[ETH_ALEN];\n\tnetdev_features_t netdev_features;\n\tstruct napi_struct napi;\n\tstruct xgbe_mmc_stats mmc_stats;\n\tstruct xgbe_ext_stats ext_stats;\n\n\t \n\tunsigned long active_vlans[BITS_TO_LONGS(VLAN_N_VID)];\n\n\t \n\tstruct clk *sysclk;\n\tunsigned long sysclk_rate;\n\tstruct clk *ptpclk;\n\tunsigned long ptpclk_rate;\n\n\t \n\tspinlock_t tstamp_lock;\n\tstruct ptp_clock_info ptp_clock_info;\n\tstruct ptp_clock *ptp_clock;\n\tstruct hwtstamp_config tstamp_config;\n\tstruct cyclecounter tstamp_cc;\n\tstruct timecounter tstamp_tc;\n\tunsigned int tstamp_addend;\n\tstruct work_struct tx_tstamp_work;\n\tstruct sk_buff *tx_tstamp_skb;\n\tu64 tx_tstamp;\n\n\t \n\tstruct ieee_ets *ets;\n\tstruct ieee_pfc *pfc;\n\tunsigned int q2tc_map[XGBE_MAX_QUEUES];\n\tunsigned int prio2q_map[IEEE_8021QAZ_MAX_TCS];\n\tunsigned int pfcq[XGBE_MAX_QUEUES];\n\tunsigned int pfc_rfa;\n\tu8 num_tcs;\n\n\t \n\tstruct xgbe_hw_features hw_feat;\n\n\t \n\tstruct work_struct restart_work;\n\tstruct work_struct stopdev_work;\n\n\t \n\tunsigned int power_down;\n\n\t \n\tu32 msg_enable;\n\n\t \n\tphy_interface_t phy_mode;\n\tint phy_link;\n\tint phy_speed;\n\n\t \n\tunsigned int phy_started;\n\tvoid *phy_data;\n\tstruct xgbe_phy phy;\n\tint mdio_mmd;\n\tunsigned long link_check;\n\tstruct completion mdio_complete;\n\n\tunsigned int kr_redrv;\n\n\tchar an_name[IFNAMSIZ + 32];\n\tstruct workqueue_struct *an_workqueue;\n\n\tint an_irq;\n\tstruct work_struct an_irq_work;\n\n\t \n\tunsigned int an_int;\n\tunsigned int an_status;\n\tstruct mutex an_mutex;\n\tenum xgbe_an an_result;\n\tenum xgbe_an an_state;\n\tenum xgbe_rx kr_state;\n\tenum xgbe_rx kx_state;\n\tstruct work_struct an_work;\n\tunsigned int an_again;\n\tunsigned int an_supported;\n\tunsigned int parallel_detect;\n\tunsigned int fec_ability;\n\tunsigned long an_start;\n\tunsigned long kr_start_time;\n\tenum xgbe_an_mode an_mode;\n\n\t \n\tstruct xgbe_i2c i2c;\n\tstruct mutex i2c_mutex;\n\tstruct completion i2c_complete;\n\tchar i2c_name[IFNAMSIZ + 32];\n\n\tunsigned int lpm_ctrl;\t\t \n\n\tunsigned int isr_as_tasklet;\n\tstruct tasklet_struct tasklet_dev;\n\tstruct tasklet_struct tasklet_ecc;\n\tstruct tasklet_struct tasklet_i2c;\n\tstruct tasklet_struct tasklet_an;\n\n\tstruct dentry *xgbe_debugfs;\n\n\tunsigned int debugfs_xgmac_reg;\n\n\tunsigned int debugfs_xpcs_mmd;\n\tunsigned int debugfs_xpcs_reg;\n\n\tunsigned int debugfs_xprop_reg;\n\n\tunsigned int debugfs_xi2c_reg;\n\n\tbool debugfs_an_cdr_workaround;\n\tbool debugfs_an_cdr_track_early;\n\tbool en_rx_adap;\n\tint rx_adapt_retries;\n\tbool rx_adapt_done;\n\tbool mode_set;\n};\n\n \nstruct xgbe_prv_data *xgbe_alloc_pdata(struct device *);\nvoid xgbe_free_pdata(struct xgbe_prv_data *);\nvoid xgbe_set_counts(struct xgbe_prv_data *);\nint xgbe_config_netdev(struct xgbe_prv_data *);\nvoid xgbe_deconfig_netdev(struct xgbe_prv_data *);\n\nint xgbe_platform_init(void);\nvoid xgbe_platform_exit(void);\n#ifdef CONFIG_PCI\nint xgbe_pci_init(void);\nvoid xgbe_pci_exit(void);\n#else\nstatic inline int xgbe_pci_init(void) { return 0; }\nstatic inline void xgbe_pci_exit(void) { }\n#endif\n\nvoid xgbe_init_function_ptrs_dev(struct xgbe_hw_if *);\nvoid xgbe_init_function_ptrs_phy(struct xgbe_phy_if *);\nvoid xgbe_init_function_ptrs_phy_v1(struct xgbe_phy_if *);\nvoid xgbe_init_function_ptrs_phy_v2(struct xgbe_phy_if *);\nvoid xgbe_init_function_ptrs_desc(struct xgbe_desc_if *);\nvoid xgbe_init_function_ptrs_i2c(struct xgbe_i2c_if *);\nconst struct net_device_ops *xgbe_get_netdev_ops(void);\nconst struct ethtool_ops *xgbe_get_ethtool_ops(void);\nconst struct udp_tunnel_nic_info *xgbe_get_udp_tunnel_info(void);\n\n#ifdef CONFIG_AMD_XGBE_DCB\nconst struct dcbnl_rtnl_ops *xgbe_get_dcbnl_ops(void);\n#endif\n\nvoid xgbe_ptp_register(struct xgbe_prv_data *);\nvoid xgbe_ptp_unregister(struct xgbe_prv_data *);\nvoid xgbe_dump_tx_desc(struct xgbe_prv_data *, struct xgbe_ring *,\n\t\t       unsigned int, unsigned int, unsigned int);\nvoid xgbe_dump_rx_desc(struct xgbe_prv_data *, struct xgbe_ring *,\n\t\t       unsigned int);\nvoid xgbe_print_pkt(struct net_device *, struct sk_buff *, bool);\nvoid xgbe_get_all_hw_features(struct xgbe_prv_data *);\nint xgbe_powerup(struct net_device *, unsigned int);\nint xgbe_powerdown(struct net_device *, unsigned int);\nvoid xgbe_init_rx_coalesce(struct xgbe_prv_data *);\nvoid xgbe_init_tx_coalesce(struct xgbe_prv_data *);\nvoid xgbe_restart_dev(struct xgbe_prv_data *pdata);\nvoid xgbe_full_restart_dev(struct xgbe_prv_data *pdata);\n\n#ifdef CONFIG_DEBUG_FS\nvoid xgbe_debugfs_init(struct xgbe_prv_data *);\nvoid xgbe_debugfs_exit(struct xgbe_prv_data *);\nvoid xgbe_debugfs_rename(struct xgbe_prv_data *pdata);\n#else\nstatic inline void xgbe_debugfs_init(struct xgbe_prv_data *pdata) {}\nstatic inline void xgbe_debugfs_exit(struct xgbe_prv_data *pdata) {}\nstatic inline void xgbe_debugfs_rename(struct xgbe_prv_data *pdata) {}\n#endif  \n\n \n#if 0\n#define YDEBUG\n#define YDEBUG_MDIO\n#endif\n\n \n#ifdef YDEBUG\n#define DBGPR(x...) pr_alert(x)\n#else\n#define DBGPR(x...) do { } while (0)\n#endif\n\n#ifdef YDEBUG_MDIO\n#define DBGPR_MDIO(x...) pr_alert(x)\n#else\n#define DBGPR_MDIO(x...) do { } while (0)\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}