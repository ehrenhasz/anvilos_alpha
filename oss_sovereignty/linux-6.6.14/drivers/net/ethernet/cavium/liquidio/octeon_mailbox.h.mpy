{
  "module_name": "octeon_mailbox.h",
  "hash_id": "543f8cd2a71bbc2709a44d864219d5032d861cfee6dff86c17cc862b544cc523",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cavium/liquidio/octeon_mailbox.h",
  "human_readable_source": " \n#ifndef __MAILBOX_H__\n#define __MAILBOX_H__\n\n \n\n#define OCTEON_MBOX_DATA_MAX\t\t32\n\n#define OCTEON_VF_ACTIVE\t\t0x1\n#define OCTEON_VF_FLR_REQUEST\t\t0x2\n#define OCTEON_PF_CHANGED_VF_MACADDR\t0x4\n#define OCTEON_GET_VF_STATS\t\t0x8\n\n \n#define OCTEON_PFVFACK\t\t\t0xffffffffffffffffULL\n#define OCTEON_PFVFSIG\t\t\t0x1122334455667788ULL\n#define OCTEON_PFVFERR\t\t\t0xDEADDEADDEADDEADULL\n\n#define LIO_MBOX_WRITE_WAIT_CNT         1000\n#define LIO_MBOX_WRITE_WAIT_TIME        msecs_to_jiffies(1)\n\nenum octeon_mbox_cmd_status {\n\tOCTEON_MBOX_STATUS_SUCCESS = 0,\n\tOCTEON_MBOX_STATUS_FAILED = 1,\n\tOCTEON_MBOX_STATUS_BUSY = 2\n};\n\nenum octeon_mbox_message_type {\n\tOCTEON_MBOX_REQUEST = 0,\n\tOCTEON_MBOX_RESPONSE = 1\n};\n\nunion octeon_mbox_message {\n\tu64 u64;\n\tstruct {\n\t\tu16 type : 1;\n\t\tu16 resp_needed : 1;\n\t\tu16 cmd : 6;\n\t\tu16 len : 8;\n\t\tu8 params[6];\n\t} s;\n};\n\ntypedef void (*octeon_mbox_callback_t)(void *, void *, void *);\n\nstruct octeon_mbox_cmd {\n\tunion octeon_mbox_message msg;\n\tu64 data[OCTEON_MBOX_DATA_MAX];\n\tu32 q_no;\n\tu32 recv_len;\n\tu32 recv_status;\n\tocteon_mbox_callback_t fn;\n\tvoid *fn_arg;\n};\n\nenum octeon_mbox_state {\n\tOCTEON_MBOX_STATE_IDLE = 1,\n\tOCTEON_MBOX_STATE_REQUEST_RECEIVING = 2,\n\tOCTEON_MBOX_STATE_REQUEST_RECEIVED = 4,\n\tOCTEON_MBOX_STATE_RESPONSE_PENDING = 8,\n\tOCTEON_MBOX_STATE_RESPONSE_RECEIVING = 16,\n\tOCTEON_MBOX_STATE_RESPONSE_RECEIVED = 32,\n\tOCTEON_MBOX_STATE_ERROR = 64\n};\n\nstruct octeon_mbox {\n\t \n\tspinlock_t lock;\n\n\tstruct octeon_device *oct_dev;\n\n\tu32 q_no;\n\n\tenum octeon_mbox_state state;\n\n\tstruct cavium_wk mbox_poll_wk;\n\n\t \n\tvoid *mbox_int_reg;\n\n\t \n\tvoid *mbox_write_reg;\n\n\t \n\tvoid *mbox_read_reg;\n\n\tstruct octeon_mbox_cmd mbox_req;\n\n\tstruct octeon_mbox_cmd mbox_resp;\n\n};\n\nstruct oct_vf_stats_ctx {\n\tatomic_t status;\n\tstruct oct_vf_stats *stats;\n};\n\nint octeon_mbox_read(struct octeon_mbox *mbox);\nint octeon_mbox_write(struct octeon_device *oct,\n\t\t      struct octeon_mbox_cmd *mbox_cmd);\nint octeon_mbox_process_message(struct octeon_mbox *mbox);\nint octeon_mbox_cancel(struct octeon_device *oct, int q_no);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}