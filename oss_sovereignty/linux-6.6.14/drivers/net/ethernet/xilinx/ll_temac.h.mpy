{
  "module_name": "ll_temac.h",
  "hash_id": "8d3e333152836e96dc3da98ab18a2ac13d00bc61ddf3ea1d1e0ccc756395cc0f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/xilinx/ll_temac.h",
  "human_readable_source": " \n\n#ifndef XILINX_LL_TEMAC_H\n#define XILINX_LL_TEMAC_H\n\n#include <linux/netdevice.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/spinlock.h>\n\n#ifdef CONFIG_PPC_DCR\n#include <asm/dcr.h>\n#include <asm/dcr-regs.h>\n#endif\n\n \n#define XTE_HDR_SIZE\t\t\t14       \n#define XTE_TRL_SIZE\t\t\t4        \n#define XTE_JUMBO_MTU\t\t\t9000\n#define XTE_MAX_JUMBO_FRAME_SIZE\t(XTE_JUMBO_MTU + XTE_HDR_SIZE + XTE_TRL_SIZE)\n\n \n\n \n#define XTE_OPTION_PROMISC                      (1 << 0)\n \n#define XTE_OPTION_JUMBO                        (1 << 1)\n \n#define XTE_OPTION_VLAN                         (1 << 2)\n \n#define XTE_OPTION_FLOW_CONTROL                 (1 << 4)\n \n#define XTE_OPTION_FCS_STRIP                    (1 << 5)\n \n#define XTE_OPTION_FCS_INSERT                   (1 << 6)\n \n#define XTE_OPTION_LENTYPE_ERR                  (1 << 7)\n \n#define XTE_OPTION_TXEN                         (1 << 11)\n \n#define XTE_OPTION_RXEN                         (1 << 12)\n\n \n#define XTE_OPTION_DEFAULTS                     \\\n\t(XTE_OPTION_TXEN |                          \\\n\t XTE_OPTION_FLOW_CONTROL |                  \\\n\t XTE_OPTION_RXEN)\n\n \n\n#define TX_NXTDESC_PTR      0x00             \n#define TX_CURBUF_ADDR      0x01             \n#define TX_CURBUF_LENGTH    0x02             \n#define TX_CURDESC_PTR      0x03             \n#define TX_TAILDESC_PTR     0x04             \n#define TX_CHNL_CTRL        0x05             \n \n#define CHNL_CTRL_IRQ_IOE       (1 << 9)\n#define CHNL_CTRL_IRQ_EN        (1 << 7)\n#define CHNL_CTRL_IRQ_ERR_EN    (1 << 2)\n#define CHNL_CTRL_IRQ_DLY_EN    (1 << 1)\n#define CHNL_CTRL_IRQ_COAL_EN   (1 << 0)\n#define TX_IRQ_REG          0x06             \n \n#define TX_CHNL_STS         0x07             \n \n\n#define RX_NXTDESC_PTR      0x08             \n#define RX_CURBUF_ADDR      0x09             \n#define RX_CURBUF_LENGTH    0x0a             \n#define RX_CURDESC_PTR      0x0b             \n#define RX_TAILDESC_PTR     0x0c             \n#define RX_CHNL_CTRL        0x0d             \n \n#define RX_IRQ_REG          0x0e             \n#define IRQ_COAL        (1 << 0)\n#define IRQ_DLY         (1 << 1)\n#define IRQ_ERR         (1 << 2)\n#define IRQ_DMAERR      (1 << 7)             \n \n#define RX_CHNL_STS         0x0f         \n#define CHNL_STS_ENGBUSY    (1 << 1)\n#define CHNL_STS_EOP        (1 << 2)\n#define CHNL_STS_SOP        (1 << 3)\n#define CHNL_STS_CMPLT      (1 << 4)\n#define CHNL_STS_SOE        (1 << 5)\n#define CHNL_STS_IOE        (1 << 6)\n#define CHNL_STS_ERR        (1 << 7)\n\n#define CHNL_STS_BSYWR      (1 << 16)\n#define CHNL_STS_CURPERR    (1 << 17)\n#define CHNL_STS_NXTPERR    (1 << 18)\n#define CHNL_STS_ADDRERR    (1 << 19)\n#define CHNL_STS_CMPERR     (1 << 20)\n#define CHNL_STS_TAILERR    (1 << 21)\n \n\n#define DMA_CONTROL_REG             0x10             \n#define DMA_CONTROL_RST                 (1 << 0)\n#define DMA_TAIL_ENABLE                 (1 << 2)\n\n \n\n#define XTE_RAF0_OFFSET              0x00\n#define RAF0_RST                        (1 << 0)\n#define RAF0_MCSTREJ                    (1 << 1)\n#define RAF0_BCSTREJ                    (1 << 2)\n#define XTE_TPF0_OFFSET              0x04\n#define XTE_IFGP0_OFFSET             0x08\n#define XTE_ISR0_OFFSET              0x0c\n#define ISR0_HARDACSCMPLT               (1 << 0)\n#define ISR0_AUTONEG                    (1 << 1)\n#define ISR0_RXCMPLT                    (1 << 2)\n#define ISR0_RXREJ                      (1 << 3)\n#define ISR0_RXFIFOOVR                  (1 << 4)\n#define ISR0_TXCMPLT                    (1 << 5)\n#define ISR0_RXDCMLCK                   (1 << 6)\n\n#define XTE_IPR0_OFFSET              0x10\n#define XTE_IER0_OFFSET              0x14\n\n#define XTE_MSW0_OFFSET              0x20\n#define XTE_LSW0_OFFSET              0x24\n#define XTE_CTL0_OFFSET              0x28\n#define XTE_RDY0_OFFSET              0x2c\n\n#define XTE_RSE_MIIM_RR_MASK      0x0002\n#define XTE_RSE_MIIM_WR_MASK      0x0004\n#define XTE_RSE_CFG_RR_MASK       0x0020\n#define XTE_RSE_CFG_WR_MASK       0x0040\n#define XTE_RDY0_HARD_ACS_RDY_MASK  (0x10000)\n\n \n\n#define\tXTE_RXC0_OFFSET\t\t\t0x00000200  \n#define\tXTE_RXC1_OFFSET\t\t\t0x00000240  \n#define XTE_RXC1_RXRST_MASK\t\t(1 << 31)   \n#define XTE_RXC1_RXJMBO_MASK\t\t(1 << 30)   \n#define XTE_RXC1_RXFCS_MASK\t\t(1 << 29)   \n#define XTE_RXC1_RXEN_MASK\t\t(1 << 28)   \n#define XTE_RXC1_RXVLAN_MASK\t\t(1 << 27)   \n#define XTE_RXC1_RXHD_MASK\t\t(1 << 26)   \n#define XTE_RXC1_RXLT_MASK\t\t(1 << 25)   \n\n#define XTE_TXC_OFFSET\t\t\t0x00000280  \n#define XTE_TXC_TXRST_MASK\t\t(1 << 31)   \n#define XTE_TXC_TXJMBO_MASK\t\t(1 << 30)   \n#define XTE_TXC_TXFCS_MASK\t\t(1 << 29)   \n#define XTE_TXC_TXEN_MASK\t\t(1 << 28)   \n#define XTE_TXC_TXVLAN_MASK\t\t(1 << 27)   \n#define XTE_TXC_TXHD_MASK\t\t(1 << 26)   \n\n#define XTE_FCC_OFFSET\t\t\t0x000002C0  \n#define XTE_FCC_RXFLO_MASK\t\t(1 << 29)   \n#define XTE_FCC_TXFLO_MASK\t\t(1 << 30)   \n\n#define XTE_EMCFG_OFFSET\t\t0x00000300  \n#define XTE_EMCFG_LINKSPD_MASK\t\t0xC0000000  \n#define XTE_EMCFG_HOSTEN_MASK\t\t(1 << 26)   \n#define XTE_EMCFG_LINKSPD_10\t\t0x00000000  \n#define XTE_EMCFG_LINKSPD_100\t\t(1 << 30)   \n#define XTE_EMCFG_LINKSPD_1000\t\t(1 << 31)   \n\n#define XTE_GMIC_OFFSET\t\t\t0x00000320  \n#define XTE_MC_OFFSET\t\t\t0x00000340  \n#define XTE_UAW0_OFFSET\t\t\t0x00000380  \n#define XTE_UAW1_OFFSET\t\t\t0x00000384  \n\n#define XTE_MAW0_OFFSET\t\t\t0x00000388  \n#define XTE_MAW1_OFFSET\t\t\t0x0000038C  \n#define XTE_AFM_OFFSET\t\t\t0x00000390  \n#define XTE_AFM_EPPRM_MASK\t\t(1 << 31)   \n\n \n#define XTE_TIS_OFFSET\t\t\t0x000003A0\n#define TIS_FRIS\t\t\t(1 << 0)\n#define TIS_MRIS\t\t\t(1 << 1)\n#define TIS_MWIS\t\t\t(1 << 2)\n#define TIS_ARIS\t\t\t(1 << 3)\n#define TIS_AWIS\t\t\t(1 << 4)\n#define TIS_CRIS\t\t\t(1 << 5)\n#define TIS_CWIS\t\t\t(1 << 6)\n\n#define XTE_TIE_OFFSET\t\t\t0x000003A4  \n\n \n#define XTE_MGTDR_OFFSET\t\t0x000003B0  \n#define XTE_MIIMAI_OFFSET\t\t0x000003B4  \n\n#define CNTLREG_WRITE_ENABLE_MASK   0x8000\n#define CNTLREG_EMAC1SEL_MASK       0x0400\n#define CNTLREG_ADDRESSCODE_MASK    0x03ff\n\n \n\n#define STS_CTRL_APP0_ERR         (1 << 31)\n#define STS_CTRL_APP0_IRQONEND    (1 << 30)\n \n#define STS_CTRL_APP0_STOPONEND   (1 << 29)\n#define STS_CTRL_APP0_CMPLT       (1 << 28)\n#define STS_CTRL_APP0_SOP         (1 << 27)\n#define STS_CTRL_APP0_EOP         (1 << 26)\n#define STS_CTRL_APP0_ENGBUSY     (1 << 25)\n \n#define STS_CTRL_APP0_ENGRST      (1 << 24)\n\n#define TX_CONTROL_CALC_CSUM_MASK   1\n\n#define MULTICAST_CAM_TABLE_NUM 4\n\n \n#define TEMAC_FEATURE_RX_CSUM  (1 << 0)\n#define TEMAC_FEATURE_TX_CSUM  (1 << 1)\n\n \n \n\n \nstruct cdmac_bd {\n\tu32 next;\t \n\tu32 phys;\n\tu32 len;\n\tu32 app0;\n\tu32 app1;\t \n\tu32 app2;\t \n\tu32 app3;\n\tu32 app4;\t \n};\n\nstruct temac_local {\n\tstruct net_device *ndev;\n\tstruct device *dev;\n\n\t \n\tstruct device_node *phy_node;\n\t \n\tchar phy_name[MII_BUS_ID_SIZE + 3];\n\tphy_interface_t phy_interface;\n\n\t \n\tstruct mii_bus *mii_bus;\t \n\n\t \n\tvoid __iomem *regs;\n\tvoid __iomem *sdma_regs;\n#ifdef CONFIG_PPC_DCR\n\tdcr_host_t sdma_dcrs;\n#endif\n\tu32 (*temac_ior)(struct temac_local *lp, int offset);\n\tvoid (*temac_iow)(struct temac_local *lp, int offset, u32 value);\n\tu32 (*dma_in)(struct temac_local *lp, int reg);\n\tvoid (*dma_out)(struct temac_local *lp, int reg, u32 value);\n\n\tint tx_irq;\n\tint rx_irq;\n\tint emac_num;\n\n\tstruct sk_buff **rx_skb;\n\tspinlock_t rx_lock;\n\t \n\tspinlock_t *indirect_lock;\n\tu32 options;\t\t\t \n\tint last_link;\n\tunsigned int temac_features;\n\n\t \n\tstruct cdmac_bd *tx_bd_v;\n\tdma_addr_t tx_bd_p;\n\tu32 tx_bd_num;\n\tstruct cdmac_bd *rx_bd_v;\n\tdma_addr_t rx_bd_p;\n\tu32 rx_bd_num;\n\tint tx_bd_ci;\n\tint tx_bd_tail;\n\tint rx_bd_ci;\n\tint rx_bd_tail;\n\n\t \n\tu8 coalesce_count_tx;\n\tu8 coalesce_delay_tx;\n\tu8 coalesce_count_rx;\n\tu8 coalesce_delay_rx;\n\n\tstruct delayed_work restart_work;\n};\n\n \n#define temac_ior(lp, o) ((lp)->temac_ior(lp, o))\n#define temac_iow(lp, o, v) ((lp)->temac_iow(lp, o, v))\n\n \nint temac_indirect_busywait(struct temac_local *lp);\nu32 temac_indirect_in32(struct temac_local *lp, int reg);\nu32 temac_indirect_in32_locked(struct temac_local *lp, int reg);\nvoid temac_indirect_out32(struct temac_local *lp, int reg, u32 value);\nvoid temac_indirect_out32_locked(struct temac_local *lp, int reg, u32 value);\n\n \nint temac_mdio_setup(struct temac_local *lp, struct platform_device *pdev);\nvoid temac_mdio_teardown(struct temac_local *lp);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}