{
  "module_name": "slic.h",
  "hash_id": "e555a5a83a68761b75fcdbb79a105a7b81a34f5733844cdd07f09a85db5bc1fe",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/alacritech/slic.h",
  "human_readable_source": " \n\n#ifndef _SLIC_H\n#define _SLIC_H\n\n#include <linux/types.h>\n#include <linux/netdevice.h>\n#include <linux/spinlock_types.h>\n#include <linux/dma-mapping.h>\n#include <linux/pci.h>\n#include <linux/list.h>\n#include <linux/u64_stats_sync.h>\n\n#define SLIC_VGBSTAT_XPERR\t\t0x40000000\n#define SLIC_VGBSTAT_XERRSHFT\t\t25\n#define SLIC_VGBSTAT_XCSERR\t\t0x23\n#define SLIC_VGBSTAT_XUFLOW\t\t0x22\n#define SLIC_VGBSTAT_XHLEN\t\t0x20\n#define SLIC_VGBSTAT_NETERR\t\t0x01000000\n#define SLIC_VGBSTAT_NERRSHFT\t\t16\n#define SLIC_VGBSTAT_NERRMSK\t\t0x1ff\n#define SLIC_VGBSTAT_NCSERR\t\t0x103\n#define SLIC_VGBSTAT_NUFLOW\t\t0x102\n#define SLIC_VGBSTAT_NHLEN\t\t0x100\n#define SLIC_VGBSTAT_LNKERR\t\t0x00000080\n#define SLIC_VGBSTAT_LERRMSK\t\t0xff\n#define SLIC_VGBSTAT_LDEARLY\t\t0x86\n#define SLIC_VGBSTAT_LBOFLO\t\t0x85\n#define SLIC_VGBSTAT_LCODERR\t\t0x84\n#define SLIC_VGBSTAT_LDBLNBL\t\t0x83\n#define SLIC_VGBSTAT_LCRCERR\t\t0x82\n#define SLIC_VGBSTAT_LOFLO\t\t0x81\n#define SLIC_VGBSTAT_LUFLO\t\t0x80\n\n#define SLIC_IRHDDR_FLEN_MSK\t\t0x0000ffff\n#define SLIC_IRHDDR_SVALID\t\t0x80000000\n#define SLIC_IRHDDR_ERR\t\t\t0x10000000\n\n#define SLIC_VRHSTAT_802OE\t\t0x80000000\n#define SLIC_VRHSTAT_TPOFLO\t\t0x10000000\n#define SLIC_VRHSTATB_802UE\t\t0x80000000\n#define SLIC_VRHSTATB_RCVE\t\t0x40000000\n#define SLIC_VRHSTATB_BUFF\t\t0x20000000\n#define SLIC_VRHSTATB_CARRE\t\t0x08000000\n#define SLIC_VRHSTATB_LONGE\t\t0x02000000\n#define SLIC_VRHSTATB_PREA\t\t0x01000000\n#define SLIC_VRHSTATB_CRC\t\t0x00800000\n#define SLIC_VRHSTATB_DRBL\t\t0x00400000\n#define SLIC_VRHSTATB_CODE\t\t0x00200000\n#define SLIC_VRHSTATB_TPCSUM\t\t0x00100000\n#define SLIC_VRHSTATB_TPHLEN\t\t0x00080000\n#define SLIC_VRHSTATB_IPCSUM\t\t0x00040000\n#define SLIC_VRHSTATB_IPLERR\t\t0x00020000\n#define SLIC_VRHSTATB_IPHERR\t\t0x00010000\n\n#define SLIC_CMD_XMT_REQ\t\t0x01\n#define SLIC_CMD_TYPE_DUMB\t\t3\n\n#define SLIC_RESET_MAGIC\t\t0xDEAD\n#define SLIC_ICR_INT_OFF\t\t0\n#define SLIC_ICR_INT_ON\t\t\t1\n#define SLIC_ICR_INT_MASK\t\t2\n\n#define SLIC_ISR_ERR\t\t\t0x80000000\n#define SLIC_ISR_RCV\t\t\t0x40000000\n#define SLIC_ISR_CMD\t\t\t0x20000000\n#define SLIC_ISR_IO\t\t\t0x60000000\n#define SLIC_ISR_UPC\t\t\t0x10000000\n#define SLIC_ISR_LEVENT\t\t\t0x08000000\n#define SLIC_ISR_RMISS\t\t\t0x02000000\n#define SLIC_ISR_UPCERR\t\t\t0x01000000\n#define SLIC_ISR_XDROP\t\t\t0x00800000\n#define SLIC_ISR_UPCBSY\t\t\t0x00020000\n\n#define SLIC_ISR_PING_MASK\t\t0x00700000\n#define SLIC_ISR_UPCERR_MASK\t\t(SLIC_ISR_UPCERR | SLIC_ISR_UPCBSY)\n#define SLIC_ISR_UPC_MASK\t\t(SLIC_ISR_UPC | SLIC_ISR_UPCERR_MASK)\n#define SLIC_WCS_START\t\t\t0x80000000\n#define SLIC_WCS_COMPARE\t\t0x40000000\n#define SLIC_RCVWCS_BEGIN\t\t0x40000000\n#define SLIC_RCVWCS_FINISH\t\t0x80000000\n\n#define SLIC_MIICR_REG_16\t\t0x00100000\n#define SLIC_MRV_REG16_XOVERON\t\t0x0068\n\n#define SLIC_GIG_LINKUP\t\t\t0x0001\n#define SLIC_GIG_FULLDUPLEX\t\t0x0002\n#define SLIC_GIG_SPEED_MASK\t\t0x000C\n#define SLIC_GIG_SPEED_1000\t\t0x0008\n#define SLIC_GIG_SPEED_100\t\t0x0004\n#define SLIC_GIG_SPEED_10\t\t0x0000\n\n#define SLIC_GMCR_RESET\t\t\t0x80000000\n#define SLIC_GMCR_GBIT\t\t\t0x20000000\n#define SLIC_GMCR_FULLD\t\t\t0x10000000\n#define SLIC_GMCR_GAPBB_SHIFT\t\t14\n#define SLIC_GMCR_GAPR1_SHIFT\t\t7\n#define SLIC_GMCR_GAPR2_SHIFT\t\t0\n#define SLIC_GMCR_GAPBB_1000\t\t0x60\n#define SLIC_GMCR_GAPR1_1000\t\t0x2C\n#define SLIC_GMCR_GAPR2_1000\t\t0x40\n#define SLIC_GMCR_GAPBB_100\t\t0x70\n#define SLIC_GMCR_GAPR1_100\t\t0x2C\n#define SLIC_GMCR_GAPR2_100\t\t0x40\n\n#define SLIC_XCR_RESET\t\t\t0x80000000\n#define SLIC_XCR_XMTEN\t\t\t0x40000000\n#define SLIC_XCR_PAUSEEN\t\t0x20000000\n#define SLIC_XCR_LOADRNG\t\t0x10000000\n\n#define SLIC_GXCR_RESET\t\t\t0x80000000\n#define SLIC_GXCR_XMTEN\t\t\t0x40000000\n#define SLIC_GXCR_PAUSEEN\t\t0x20000000\n\n#define SLIC_GRCR_RESET\t\t\t0x80000000\n#define SLIC_GRCR_RCVEN\t\t\t0x40000000\n#define SLIC_GRCR_RCVALL\t\t0x20000000\n#define SLIC_GRCR_RCVBAD\t\t0x10000000\n#define SLIC_GRCR_CTLEN\t\t\t0x08000000\n#define SLIC_GRCR_ADDRAEN\t\t0x02000000\n#define SLIC_GRCR_HASHSIZE_SHIFT\t17\n#define SLIC_GRCR_HASHSIZE\t\t14\n\n \n#define SLIC_REG_RESET\t\t\t0x0000\n \n#define SLIC_REG_ICR\t\t\t0x0008\n \n#define SLIC_REG_ISP\t\t\t0x0010\n \n#define SLIC_REG_ISR\t\t\t0x0018\n \n#define SLIC_REG_HBAR\t\t\t0x0020\n \n#define SLIC_REG_DBAR\t\t\t0x0028\n \n#define SLIC_REG_CBAR\t\t\t0x0030\n \n#define\tSLIC_REG_WCS\t\t\t0x0034\n \n#define\tSLIC_REG_RBAR\t\t\t0x0038\n \n#define\tSLIC_REG_RSTAT\t\t\t0x0040\n \n#define\tSLIC_REG_LSTAT\t\t\t0x0048\n \n#define\tSLIC_REG_WMCFG\t\t\t0x0050\n \n#define SLIC_REG_WPHY\t\t\t0x0058\n \n#define\tSLIC_REG_RCBAR\t\t\t0x0060\n \n#define SLIC_REG_RCONFIG\t\t0x0068\n \n#define SLIC_REG_INTAGG\t\t\t0x0070\n \n#define\tSLIC_REG_WXCFG\t\t\t0x0078\n \n#define\tSLIC_REG_WRCFG\t\t\t0x0080\n \n#define\tSLIC_REG_WRADDRAL\t\t0x0088\n \n#define\tSLIC_REG_WRADDRAH\t\t0x0090\n \n#define\tSLIC_REG_WRADDRBL\t\t0x0098\n \n#define\tSLIC_REG_WRADDRBH\t\t0x00a0\n \n#define\tSLIC_REG_MCASTLOW\t\t0x00a8\n \n#define\tSLIC_REG_MCASTHIGH\t\t0x00b0\n \n#define SLIC_REG_PING\t\t\t0x00b8\n \n#define SLIC_REG_DUMP_CMD\t\t0x00c0\n \n#define SLIC_REG_DUMP_DATA\t\t0x00c8\n \n#define\tSLIC_REG_PCISTATUS\t\t0x00d0\n \n#define SLIC_REG_WRHOSTID\t\t0x00d8\n \n#define SLIC_REG_LOW_POWER\t\t0x00e0\n \n#define SLIC_REG_QUIESCE\t\t0x00e8\n \n#define SLIC_REG_RESET_IFACE\t\t0x00f0\n \n#define SLIC_REG_ADDR_UPPER\t\t0x00f8\n \n#define SLIC_REG_HBAR64\t\t\t0x0100\n \n#define SLIC_REG_DBAR64\t\t\t0x0108\n \n#define SLIC_REG_CBAR64\t\t\t0x0110\n \n#define SLIC_REG_RBAR64\t\t\t0x0118\n \n#define\tSLIC_REG_RCBAR64\t\t0x0120\n \n#define\tSLIC_REG_RSTAT64\t\t0x0128\n \n#define SLIC_REG_RCV_WCS\t\t0x0130\n \n#define SLIC_REG_WRVLANID\t\t0x0138\n \n#define SLIC_REG_READ_XF_INFO\t\t0x0140\n \n#define SLIC_REG_WRITE_XF_INFO\t\t0x0148\n \n#define SLIC_REG_TICKS_PER_SEC\t\t0x0170\n#define SLIC_REG_HOSTID\t\t\t0x1554\n\n#define PCI_VENDOR_ID_ALACRITECH\t\t0x139A\n#define PCI_DEVICE_ID_ALACRITECH_MOJAVE\t\t0x0005\n#define PCI_SUBDEVICE_ID_ALACRITECH_1000X1\t0x0005\n#define PCI_SUBDEVICE_ID_ALACRITECH_1000X1_2\t0x0006\n#define PCI_SUBDEVICE_ID_ALACRITECH_1000X1F\t0x0007\n#define PCI_SUBDEVICE_ID_ALACRITECH_CICADA\t0x0008\n#define PCI_SUBDEVICE_ID_ALACRITECH_SES1001T\t0x2006\n#define PCI_SUBDEVICE_ID_ALACRITECH_SES1001F\t0x2007\n#define PCI_DEVICE_ID_ALACRITECH_OASIS\t\t0x0007\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2002XT\t0x000B\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2002XF\t0x000C\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2001XT\t0x000D\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2001XF\t0x000E\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2104EF\t0x000F\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2104ET\t0x0010\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2102EF\t0x0011\n#define PCI_SUBDEVICE_ID_ALACRITECH_SEN2102ET\t0x0012\n\n \n#define SLIC_NUM_RX_LES\t\t\t256\n#define SLIC_RX_BUFF_SIZE\t\t2048\n#define SLIC_RX_BUFF_ALIGN\t\t256\n#define SLIC_RX_BUFF_HDR_SIZE\t\t34\n#define SLIC_MAX_REQ_RX_DESCS\t\t1\n\n#define SLIC_NUM_TX_DESCS\t\t256\n#define SLIC_TX_DESC_ALIGN\t\t32\n#define SLIC_MIN_TX_WAKEUP_DESCS\t10\n#define SLIC_MAX_REQ_TX_DESCS\t\t1\n#define SLIC_MAX_TX_COMPLETIONS\t\t100\n\n#define SLIC_NUM_STAT_DESCS\t\t128\n#define SLIC_STATS_DESC_ALIGN\t\t256\n\n#define SLIC_NUM_STAT_DESC_ARRAYS\t4\n#define SLIC_INVALID_STAT_DESC_IDX\t0xffffffff\n\n#define SLIC_UPR_LSTAT\t\t\t0\n#define SLIC_UPR_CONFIG\t\t\t1\n\n#define SLIC_EEPROM_SIZE\t\t128\n#define SLIC_EEPROM_MAGIC\t\t0xa5a5\n\n#define SLIC_FIRMWARE_MOJAVE\t\t\"slicoss/gbdownload.sys\"\n#define SLIC_FIRMWARE_OASIS\t\t\"slicoss/oasisdownload.sys\"\n#define SLIC_RCV_FIRMWARE_MOJAVE\t\"slicoss/gbrcvucode.sys\"\n#define SLIC_RCV_FIRMWARE_OASIS\t\t\"slicoss/oasisrcvucode.sys\"\n#define SLIC_FIRMWARE_MIN_SIZE\t\t64\n#define SLIC_FIRMWARE_MAX_SECTIONS\t3\n\n#define SLIC_MODEL_MOJAVE\t\t0\n#define SLIC_MODEL_OASIS\t\t1\n\n#define SLIC_INC_STATS_COUNTER(st, counter)\t\\\ndo {\t\t\t\t\t\t\\\n\tu64_stats_update_begin(&(st)->syncp);\t\\\n\t(st)->counter++;\t\t\t\\\n\tu64_stats_update_end(&(st)->syncp);\t\\\n} while (0)\n\n#define SLIC_GET_STATS_COUNTER(newst, st, counter)\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tunsigned int start;\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\\\n\t\tstart = u64_stats_fetch_begin(&(st)->syncp);\t\\\n\t\tnewst = (st)->counter;\t\t\t\t\\\n\t} while (u64_stats_fetch_retry(&(st)->syncp, start));\t\\\n}\n\nstruct slic_upr {\n\tdma_addr_t paddr;\n\tunsigned int type;\n\tstruct list_head list;\n};\n\nstruct slic_upr_list {\n\tbool pending;\n\tstruct list_head list;\n\t \n\tspinlock_t lock;\n};\n\n \nstruct slic_mojave_eeprom {\n\t__le16 id;\t\t \n\t__le16 eeprom_code_size; \n\t__le16 flash_size;\t \n\t__le16 eeprom_size;\t \n\t__le16 vendor_id;\t \n\t__le16 dev_id;\t\t \n\tu8 rev_id;\t\t \n\tu8 class_code[3];\t \n\tu8 irqpin_dbg;\t\t \n\tu8 irqpin;\t\t \n\tu8 min_grant;\t\t \n\tu8 max_lat;\t\t \n\t__le16 pci_stat;\t \n\t__le16 sub_vendor_id;\t \n\t__le16 sub_id;\t\t \n\t__le16 dev_id_dbg;\t \n\t__le16 ramrom;\t\t \n\t__le16 dram_size2pci;\t \n\t__le16 rom_size2pci;\t \n\tu8 pad[2];\t\t \n\tu8 freetime;\t\t \n\tu8 ifctrl;\t\t \n\t__le16 dram_size;\t \n\tu8 mac[ETH_ALEN];\t \n\tu8 mac2[ETH_ALEN];\n\tu8 pad2[6];\n\tu16 dev_id2;\t\t \n\tu8 irqpin2;\t\t \n\tu8 class_code2[3];\t \n\tu16 cfg_byte6;\t\t \n\tu16 pme_cap;\t\t \n\tu16 nwclk_ctrl;\t\t \n\tu8 fru_format;\t\t \n\tu8 fru_assembly[6];\t \n\tu8 fru_rev[2];\n\tu8 fru_serial[14];\n\tu8 fru_pad[3];\n\tu8 oem_fru[28];\t\t \n\tu8 pad3[4];\t\t \n};\n\n \nstruct slic_oasis_eeprom {\n\t__le16 id;\t\t \n\t__le16 eeprom_code_size; \n\t__le16 spidev0_cfg;\t \n\t__le16 spidev1_cfg;\t \n\t__le16 vendor_id;\t \n\t__le16 dev_id;\t\t \n\tu8 rev_id;\t\t \n\tu8 class_code0[3];\t \n\tu8 irqpin1;\t\t \n\tu8 class_code1[3];\t \n\tu8 irqpin2;\t\t \n\tu8 irqpin0;\t\t \n\tu8 min_grant;\t\t \n\tu8 max_lat;\t\t \n\t__le16 sub_vendor_id;\t \n\t__le16 sub_id;\t\t \n\t__le16 flash_size;\t \n\t__le16 dram_size2pci;\t \n\t__le16 rom_size2pci;\t \n\t__le16 dev_id1;\t\t \n\t__le16 dev_id2;\t\t \n\t__le16 dev_stat_cfg;\t \n\t__le16 pme_cap;\t\t \n\tu8 msi_cap;\t\t \n\tu8 clock_div;\t\t \n\t__le16 pci_stat_lo;\t \n\t__le16 pci_stat_hi;\t \n\t__le16 dram_cfg_lo;\t \n\t__le16 dram_cfg_hi;\t \n\t__le16 dram_size;\t \n\t__le16 gpio_tbi_ctrl;\t \n\t__le16 eeprom_size;\t \n\tu8 mac[ETH_ALEN];\t \n\tu8 mac2[ETH_ALEN];\n\tu8 fru_format;\t\t \n\tu8 fru_assembly[6];\t \n\tu8 fru_rev[2];\n\tu8 fru_serial[14];\n\tu8 fru_pad[3];\n\tu8 oem_fru[28];\t\t \n\tu8 pad[4];\t\t \n};\n\nstruct slic_stats {\n\tu64 rx_packets;\n\tu64 rx_bytes;\n\tu64 rx_mcasts;\n\tu64 rx_errors;\n\tu64 tx_packets;\n\tu64 tx_bytes;\n\t \n\tu64 rx_buff_miss;\n\tu64 tx_dropped;\n\tu64 irq_errs;\n\t \n\tu64 rx_tpcsum;\n\tu64 rx_tpoflow;\n\tu64 rx_tphlen;\n\t \n\tu64 rx_ipcsum;\n\tu64 rx_iplen;\n\tu64 rx_iphlen;\n\t \n\tu64 rx_early;\n\tu64 rx_buffoflow;\n\tu64 rx_lcode;\n\tu64 rx_drbl;\n\tu64 rx_crc;\n\tu64 rx_oflow802;\n\tu64 rx_uflow802;\n\t \n\tu64 tx_carrier;\n\tstruct u64_stats_sync syncp;\n};\n\nstruct slic_shmem_data {\n\t__le32 isr;\n\t__le32 link;\n};\n\nstruct slic_shmem {\n\tdma_addr_t isr_paddr;\n\tdma_addr_t link_paddr;\n\tstruct slic_shmem_data *shmem_data;\n};\n\nstruct slic_rx_info_oasis {\n\t__le32 frame_status;\n\t__le32 frame_status_b;\n\t__le32 time_stamp;\n\t__le32 checksum;\n};\n\nstruct slic_rx_info_mojave {\n\t__le32 frame_status;\n\t__le16 byte_cnt;\n\t__le16 tp_chksum;\n\t__le16 ctx_hash;\n\t__le16 mac_hash;\n\t__le16 buff_lnk;\n};\n\nstruct slic_stat_desc {\n\t__le32 hnd;\n\t__u8 pad[8];\n\t__le32 status;\n\t__u8 pad2[16];\n};\n\nstruct slic_stat_queue {\n\tstruct slic_stat_desc *descs[SLIC_NUM_STAT_DESC_ARRAYS];\n\tdma_addr_t paddr[SLIC_NUM_STAT_DESC_ARRAYS];\n\tunsigned int addr_offset[SLIC_NUM_STAT_DESC_ARRAYS];\n\tunsigned int active_array;\n\tunsigned int len;\n\tunsigned int done_idx;\n\tsize_t mem_size;\n};\n\nstruct slic_tx_desc {\n\t__le32 hnd;\n\t__le32 rsvd;\n\tu8 cmd;\n\tu8 flags;\n\t__le16 rsvd2;\n\t__le32 totlen;\n\t__le32 paddrl;\n\t__le32 paddrh;\n\t__le32 len;\n\t__le32 type;\n};\n\nstruct slic_tx_buffer {\n\tstruct sk_buff *skb;\n\tDEFINE_DMA_UNMAP_ADDR(map_addr);\n\tDEFINE_DMA_UNMAP_LEN(map_len);\n\tstruct slic_tx_desc *desc;\n\tdma_addr_t desc_paddr;\n};\n\nstruct slic_tx_queue {\n\tstruct dma_pool *dma_pool;\n\tstruct slic_tx_buffer *txbuffs;\n\tunsigned int len;\n\tunsigned int put_idx;\n\tunsigned int done_idx;\n};\n\nstruct slic_rx_desc {\n\tu8 pad[16];\n\t__le32 buffer;\n\t__le32 length;\n\t__le32 status;\n};\n\nstruct slic_rx_buffer {\n\tstruct sk_buff *skb;\n\tDEFINE_DMA_UNMAP_ADDR(map_addr);\n\tDEFINE_DMA_UNMAP_LEN(map_len);\n\tunsigned int addr_offset;\n};\n\nstruct slic_rx_queue {\n\tstruct slic_rx_buffer *rxbuffs;\n\tunsigned int len;\n\tunsigned int done_idx;\n\tunsigned int put_idx;\n};\n\nstruct slic_device {\n\tstruct pci_dev *pdev;\n\tstruct net_device *netdev;\n\tvoid __iomem *regs;\n\t \n\tspinlock_t upper_lock;\n\tstruct slic_shmem shmem;\n\tstruct napi_struct napi;\n\tstruct slic_rx_queue rxq;\n\tstruct slic_tx_queue txq;\n\tstruct slic_stat_queue stq;\n\tstruct slic_stats stats;\n\tstruct slic_upr_list upr_list;\n\t \n\tspinlock_t link_lock;\n\tbool promisc;\n\tint speed;\n\tunsigned int duplex;\n\tbool is_fiber;\n\tunsigned char model;\n};\n\nstatic inline u32 slic_read(struct slic_device *sdev, unsigned int reg)\n{\n\treturn ioread32(sdev->regs + reg);\n}\n\nstatic inline void slic_write(struct slic_device *sdev, unsigned int reg,\n\t\t\t      u32 val)\n{\n\tiowrite32(val, sdev->regs + reg);\n}\n\nstatic inline void slic_flush_write(struct slic_device *sdev)\n{\n\t(void)ioread32(sdev->regs + SLIC_REG_HOSTID);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}