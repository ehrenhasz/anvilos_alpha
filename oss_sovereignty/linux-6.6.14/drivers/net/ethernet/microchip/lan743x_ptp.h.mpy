{
  "module_name": "lan743x_ptp.h",
  "hash_id": "a0db88e0452c4711e6b702121b5e4fead84496bbe7bf1ab39e0e5fdd0d6bb687",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/microchip/lan743x_ptp.h",
  "human_readable_source": " \n \n\n#ifndef _LAN743X_PTP_H\n#define _LAN743X_PTP_H\n\n#include \"linux/ptp_clock_kernel.h\"\n#include \"linux/netdevice.h\"\n\n#define LAN7430_N_LED\t\t\t4\n#define LAN7430_N_GPIO\t\t\t4\t \n#define LAN7431_N_GPIO\t\t\t12\n\n#define LAN743X_PTP_N_GPIO\t\tLAN7431_N_GPIO\n\n \n#define LAN743X_PTP_N_EVENT_CHAN\t2\n#define LAN743X_PTP_N_PEROUT\t\tLAN743X_PTP_N_EVENT_CHAN\n#define LAN743X_PTP_N_EXTTS\t\t4\n#define LAN743X_PTP_N_PPS\t\t0\n#define PCI11X1X_PTP_IO_MAX_CHANNELS\t8\n\nstruct lan743x_adapter;\n\n \nstruct lan743x_gpio {\n\t \n\tspinlock_t gpio_lock;\n\n\tint used_bits;\n\tint output_bits;\n\tint ptp_bits;\n\tu32 gpio_cfg0;\n\tu32 gpio_cfg1;\n\tu32 gpio_cfg2;\n\tu32 gpio_cfg3;\n};\n\nint lan743x_gpio_init(struct lan743x_adapter *adapter);\n\nvoid lan743x_ptp_isr(void *context);\nbool lan743x_ptp_request_tx_timestamp(struct lan743x_adapter *adapter);\nvoid lan743x_ptp_unrequest_tx_timestamp(struct lan743x_adapter *adapter);\nvoid lan743x_ptp_tx_timestamp_skb(struct lan743x_adapter *adapter,\n\t\t\t\t  struct sk_buff *skb, bool ignore_sync);\nint lan743x_ptp_init(struct lan743x_adapter *adapter);\nint lan743x_ptp_open(struct lan743x_adapter *adapter);\nvoid lan743x_ptp_close(struct lan743x_adapter *adapter);\nvoid lan743x_ptp_update_latency(struct lan743x_adapter *adapter,\n\t\t\t\tu32 link_speed);\n\nint lan743x_ptp_ioctl(struct net_device *netdev, struct ifreq *ifr, int cmd);\n\n#define LAN743X_PTP_NUMBER_OF_TX_TIMESTAMPS (4)\n\n#define PTP_FLAG_PTP_CLOCK_REGISTERED\t\tBIT(1)\n#define PTP_FLAG_ISR_ENABLED\t\t\tBIT(2)\n\nstruct lan743x_ptp_perout {\n\tint  event_ch;\t \n\tint  gpio_pin;\t \n};\n\nstruct lan743x_extts {\n\tint flags;\n\tstruct timespec64 ts;\n};\n\nstruct lan743x_ptp {\n\tint flags;\n\n\t \n\tstruct mutex\tcommand_lock;\n\n\tstruct ptp_clock *ptp_clock;\n\tstruct ptp_clock_info ptp_clock_info;\n\tstruct ptp_pin_desc pin_config[LAN743X_PTP_N_GPIO];\n\n\tunsigned long used_event_ch;\n\tstruct lan743x_ptp_perout perout[LAN743X_PTP_N_PEROUT];\n\tint ptp_io_perout[LAN743X_PTP_N_PEROUT];  \n\tstruct lan743x_extts extts[LAN743X_PTP_N_EXTTS];\n\n\tbool leds_multiplexed;\n\tbool led_enabled[LAN7430_N_LED];\n\n\t \n\tspinlock_t\ttx_ts_lock;\n\tint pending_tx_timestamps;\n\tstruct sk_buff *tx_ts_skb_queue[LAN743X_PTP_NUMBER_OF_TX_TIMESTAMPS];\n\tunsigned int\ttx_ts_ignore_sync_queue;\n\tint tx_ts_skb_queue_size;\n\tu32 tx_ts_seconds_queue[LAN743X_PTP_NUMBER_OF_TX_TIMESTAMPS];\n\tu32 tx_ts_nseconds_queue[LAN743X_PTP_NUMBER_OF_TX_TIMESTAMPS];\n\tu32 tx_ts_header_queue[LAN743X_PTP_NUMBER_OF_TX_TIMESTAMPS];\n\tint tx_ts_queue_size;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}