{
  "module_name": "dl2k.h",
  "hash_id": "6f4e7ca622aa19fba7fed7117f01be16093443ec713a7691281b5b2722f49ccc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/dlink/dl2k.h",
  "human_readable_source": " \n \n \n\n#ifndef __DL2K_H__\n#define __DL2K_H__\n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/string.h>\n#include <linux/timer.h>\n#include <linux/errno.h>\n#include <linux/ioport.h>\n#include <linux/slab.h>\n#include <linux/interrupt.h>\n#include <linux/pci.h>\n#include <linux/netdevice.h>\n#include <linux/etherdevice.h>\n#include <linux/skbuff.h>\n#include <linux/crc32.h>\n#include <linux/ethtool.h>\n#include <linux/mii.h>\n#include <linux/bitops.h>\n#include <asm/processor.h>\t \n#include <asm/io.h>\n#include <linux/uaccess.h>\n#include <linux/delay.h>\n#include <linux/spinlock.h>\n#include <linux/time.h>\n#define TX_RING_SIZE\t256\n#define TX_QUEUE_LEN\t(TX_RING_SIZE - 1)  \n#define RX_RING_SIZE \t256\n#define TX_TOTAL_SIZE\tTX_RING_SIZE*sizeof(struct netdev_desc)\n#define RX_TOTAL_SIZE\tRX_RING_SIZE*sizeof(struct netdev_desc)\n\n \nenum dl2x_offsets {\n\t \n\tDMACtrl = 0x00,\n\tRxDMAStatus = 0x08,\n\tTFDListPtr0 = 0x10,\n\tTFDListPtr1 = 0x14,\n\tTxDMABurstThresh = 0x18,\n\tTxDMAUrgentThresh = 0x19,\n\tTxDMAPollPeriod = 0x1a,\n\tRFDListPtr0 = 0x1c,\n\tRFDListPtr1 = 0x20,\n\tRxDMABurstThresh = 0x24,\n\tRxDMAUrgentThresh = 0x25,\n\tRxDMAPollPeriod = 0x26,\n\tRxDMAIntCtrl = 0x28,\n\tDebugCtrl = 0x2c,\n\tASICCtrl = 0x30,\n\tFifoCtrl = 0x38,\n\tRxEarlyThresh = 0x3a,\n\tFlowOffThresh = 0x3c,\n\tFlowOnThresh = 0x3e,\n\tTxStartThresh = 0x44,\n\tEepromData = 0x48,\n\tEepromCtrl = 0x4a,\n\tExpromAddr = 0x4c,\n\tExprodata = 0x50,\n\tWakeEvent = 0x51,\n\tCountDown = 0x54,\n\tIntStatusAck = 0x5a,\n\tIntEnable = 0x5c,\n\tIntStatus = 0x5e,\n\tTxStatus = 0x60,\n\tMACCtrl = 0x6c,\n\tVLANTag = 0x70,\n\tPhyCtrl = 0x76,\n\tStationAddr0 = 0x78,\n\tStationAddr1 = 0x7a,\n\tStationAddr2 = 0x7c,\n\tVLANId = 0x80,\n\tMaxFrameSize = 0x86,\n\tReceiveMode = 0x88,\n\tHashTable0 = 0x8c,\n\tHashTable1 = 0x90,\n\tRmonStatMask = 0x98,\n\tStatMask = 0x9c,\n\tRxJumboFrames = 0xbc,\n\tTCPCheckSumErrors = 0xc0,\n\tIPCheckSumErrors = 0xc2,\n\tUDPCheckSumErrors = 0xc4,\n\tTxJumboFrames = 0xf4,\n\t \n\tOctetRcvOk = 0xa8,\n\tMcstOctetRcvOk = 0xac,\n\tBcstOctetRcvOk = 0xb0,\n\tFramesRcvOk = 0xb4,\n\tMcstFramesRcvdOk = 0xb8,\n\tBcstFramesRcvdOk = 0xbe,\n\tMacControlFramesRcvd = 0xc6,\n\tFrameTooLongErrors = 0xc8,\n\tInRangeLengthErrors = 0xca,\n\tFramesCheckSeqErrors = 0xcc,\n\tFramesLostRxErrors = 0xce,\n\tOctetXmtOk = 0xd0,\n\tMcstOctetXmtOk = 0xd4,\n\tBcstOctetXmtOk = 0xd8,\n\tFramesXmtOk = 0xdc,\n\tMcstFramesXmtdOk = 0xe0,\n\tFramesWDeferredXmt = 0xe4,\n\tLateCollisions = 0xe8,\n\tMultiColFrames = 0xec,\n\tSingleColFrames = 0xf0,\n\tBcstFramesXmtdOk = 0xf6,\n\tCarrierSenseErrors = 0xf8,\n\tMacControlFramesXmtd = 0xfa,\n\tFramesAbortXSColls = 0xfc,\n\tFramesWEXDeferal = 0xfe,\n\t \n\tEtherStatsCollisions = 0x100,\n\tEtherStatsOctetsTransmit = 0x104,\n\tEtherStatsPktsTransmit = 0x108,\n\tEtherStatsPkts64OctetTransmit = 0x10c,\n\tEtherStats65to127OctetsTransmit = 0x110,\n\tEtherStatsPkts128to255OctetsTransmit = 0x114,\n\tEtherStatsPkts256to511OctetsTransmit = 0x118,\n\tEtherStatsPkts512to1023OctetsTransmit = 0x11c,\n\tEtherStatsPkts1024to1518OctetsTransmit = 0x120,\n\tEtherStatsCRCAlignErrors = 0x124,\n\tEtherStatsUndersizePkts = 0x128,\n\tEtherStatsFragments = 0x12c,\n\tEtherStatsJabbers = 0x130,\n\tEtherStatsOctets = 0x134,\n\tEtherStatsPkts = 0x138,\n\tEtherStats64Octets = 0x13c,\n\tEtherStatsPkts65to127Octets = 0x140,\n\tEtherStatsPkts128to255Octets = 0x144,\n\tEtherStatsPkts256to511Octets = 0x148,\n\tEtherStatsPkts512to1023Octets = 0x14c,\n\tEtherStatsPkts1024to1518Octets = 0x150,\n};\n\n \nenum IntStatus_bits {\n\tInterruptStatus = 0x0001,\n\tHostError = 0x0002,\n\tMACCtrlFrame = 0x0008,\n\tTxComplete = 0x0004,\n\tRxComplete = 0x0010,\n\tRxEarly = 0x0020,\n\tIntRequested = 0x0040,\n\tUpdateStats = 0x0080,\n\tLinkEvent = 0x0100,\n\tTxDMAComplete = 0x0200,\n\tRxDMAComplete = 0x0400,\n\tRFDListEnd = 0x0800,\n\tRxDMAPriority = 0x1000,\n};\n\n \nenum ReceiveMode_bits {\n\tReceiveUnicast = 0x0001,\n\tReceiveMulticast = 0x0002,\n\tReceiveBroadcast = 0x0004,\n\tReceiveAllFrames = 0x0008,\n\tReceiveMulticastHash = 0x0010,\n\tReceiveIPMulticast = 0x0020,\n\tReceiveVLANMatch = 0x0100,\n\tReceiveVLANHash = 0x0200,\n};\n \nenum MACCtrl_bits {\n\tDuplexSelect = 0x20,\n\tTxFlowControlEnable = 0x80,\n\tRxFlowControlEnable = 0x0100,\n\tRcvFCS = 0x200,\n\tAutoVLANtagging = 0x1000,\n\tAutoVLANuntagging = 0x2000,\n\tStatsEnable = 0x00200000,\n\tStatsDisable = 0x00400000,\n\tStatsEnabled = 0x00800000,\n\tTxEnable = 0x01000000,\n\tTxDisable = 0x02000000,\n\tTxEnabled = 0x04000000,\n\tRxEnable = 0x08000000,\n\tRxDisable = 0x10000000,\n\tRxEnabled = 0x20000000,\n};\n\nenum ASICCtrl_LoWord_bits {\n\tPhyMedia = 0x0080,\n};\n\nenum ASICCtrl_HiWord_bits {\n\tGlobalReset = 0x0001,\n\tRxReset = 0x0002,\n\tTxReset = 0x0004,\n\tDMAReset = 0x0008,\n\tFIFOReset = 0x0010,\n\tNetworkReset = 0x0020,\n\tHostReset = 0x0040,\n\tResetBusy = 0x0400,\n};\n\n#define IPG_AC_LED_MODE\t\tBIT(14)\n#define IPG_AC_LED_SPEED\tBIT(27)\n#define IPG_AC_LED_MODE_BIT_1\tBIT(29)\n\n \nenum TFC_bits {\n\tDwordAlign = 0x00000000,\n\tWordAlignDisable = 0x00030000,\n\tWordAlign = 0x00020000,\n\tTCPChecksumEnable = 0x00040000,\n\tUDPChecksumEnable = 0x00080000,\n\tIPChecksumEnable = 0x00100000,\n\tFCSAppendDisable = 0x00200000,\n\tTxIndicate = 0x00400000,\n\tTxDMAIndicate = 0x00800000,\n\tFragCountShift = 24,\n\tVLANTagInsert = 0x0000000010000000,\n\tTFDDone = 0x80000000,\n\tVIDShift = 32,\n\tUsePriorityShift = 48,\n};\n\n \nenum RFS_bits {\n\tRxFIFOOverrun = 0x00010000,\n\tRxRuntFrame = 0x00020000,\n\tRxAlignmentError = 0x00040000,\n\tRxFCSError = 0x00080000,\n\tRxOverSizedFrame = 0x00100000,\n\tRxLengthError = 0x00200000,\n\tVLANDetected = 0x00400000,\n\tTCPDetected = 0x00800000,\n\tTCPError = 0x01000000,\n\tUDPDetected = 0x02000000,\n\tUDPError = 0x04000000,\n\tIPDetected = 0x08000000,\n\tIPError = 0x10000000,\n\tFrameStart = 0x20000000,\n\tFrameEnd = 0x40000000,\n\tRFDDone = 0x80000000,\n\tTCIShift = 32,\n\tRFS_Errors = 0x003f0000,\n};\n\n#define MII_RESET_TIME_OUT\t\t10000\n \nenum _mii_reg {\n\tMII_PHY_SCR = 16,\n};\n\n \nenum _pcs_reg {\n\tPCS_BMCR = 0,\n\tPCS_BMSR = 1,\n\tPCS_ANAR = 4,\n\tPCS_ANLPAR = 5,\n\tPCS_ANER = 6,\n\tPCS_ANNPT = 7,\n\tPCS_ANLPRNP = 8,\n\tPCS_ESR = 15,\n};\n\n \nenum _mii_esr {\n\tMII_ESR_1000BX_FD = 0x8000,\n\tMII_ESR_1000BX_HD = 0x4000,\n\tMII_ESR_1000BT_FD = 0x2000,\n\tMII_ESR_1000BT_HD = 0x1000,\n};\n \n#if 0\ntypedef union t_MII_PHY_SCR {\n\tu16 image;\n\tstruct {\n\t\tu16 disable_jabber:1;\t\n\t\tu16 polarity_reversal:1;\t\n\t\tu16 SEQ_test:1;\t\n\t\tu16 _bit_3:1;\t\n\t\tu16 disable_CLK125:1;\t\n\t\tu16 mdi_crossover_mode:2;\t\n\t\tu16 enable_ext_dist:1;\t\n\t\tu16 _bit_8_9:2;\t\n\t\tu16 force_link:1;\t\n\t\tu16 assert_CRS:1;\t\n\t\tu16 rcv_fifo_depth:2;\t\n\t\tu16 xmit_fifo_depth:2;\t\n\t} bits;\n} PHY_SCR_t, *PPHY_SCR_t;\n#endif\n\ntypedef enum t_MII_ADMIN_STATUS {\n\tadm_reset,\n\tadm_operational,\n\tadm_loopback,\n\tadm_power_down,\n\tadm_isolate\n} MII_ADMIN_t, *PMII_ADMIN_t;\n\n \n \n \n \nenum _pcs_anar {\n\tPCS_ANAR_NEXT_PAGE = 0x8000,\n\tPCS_ANAR_REMOTE_FAULT = 0x3000,\n\tPCS_ANAR_ASYMMETRIC = 0x0100,\n\tPCS_ANAR_PAUSE = 0x0080,\n\tPCS_ANAR_HALF_DUPLEX = 0x0040,\n\tPCS_ANAR_FULL_DUPLEX = 0x0020,\n};\n \nenum _pcs_anlpar {\n\tPCS_ANLPAR_NEXT_PAGE = PCS_ANAR_NEXT_PAGE,\n\tPCS_ANLPAR_REMOTE_FAULT = PCS_ANAR_REMOTE_FAULT,\n\tPCS_ANLPAR_ASYMMETRIC = PCS_ANAR_ASYMMETRIC,\n\tPCS_ANLPAR_PAUSE = PCS_ANAR_PAUSE,\n\tPCS_ANLPAR_HALF_DUPLEX = PCS_ANAR_HALF_DUPLEX,\n\tPCS_ANLPAR_FULL_DUPLEX = PCS_ANAR_FULL_DUPLEX,\n};\n\ntypedef struct t_SROM {\n\tu16 config_param;\t \n\tu16 asic_ctrl;\t\t \n\tu16 sub_vendor_id;\t \n\tu16 sub_system_id;\t \n\tu16 pci_base_1;\t\t \n\tu16 pci_base_2;\t\t \n\tu16 led_mode;\t\t \n\tu16 reserved1[9];\t \n\tu8 mac_addr[6];\t\t \n\tu8 reserved2[10];\t \n\tu8 sib[204];\t\t \n\tu32 crc;\t\t \n} SROM_t, *PSROM_t;\n\n \nstruct ioctl_data {\n\tchar signature[10];\n\tint cmd;\n\tint len;\n\tchar *data;\n};\n\n \nstruct netdev_desc {\n\t__le64 next_desc;\n\t__le64 status;\n\t__le64 fraginfo;\n};\n\n#define PRIV_ALIGN\t15\t \n \nstruct netdev_private {\n\t \n\tstruct netdev_desc *rx_ring;\n\tstruct netdev_desc *tx_ring;\n\tstruct sk_buff *rx_skbuff[RX_RING_SIZE];\n\tstruct sk_buff *tx_skbuff[TX_RING_SIZE];\n\tdma_addr_t tx_ring_dma;\n\tdma_addr_t rx_ring_dma;\n\tstruct pci_dev *pdev;\n\tvoid __iomem *ioaddr;\n\tvoid __iomem *eeprom_addr;\n\tspinlock_t tx_lock;\n\tspinlock_t rx_lock;\n\tunsigned int rx_buf_sz;\t\t \n\tunsigned int speed;\t\t \n\tunsigned int vlan;\t\t \n\tunsigned int chip_id;\t\t \n\tunsigned int rx_coalesce; \t \n\tunsigned int rx_timeout; \t \n\tunsigned int tx_coalesce;\t \n\tunsigned int full_duplex:1;\t \n\tunsigned int an_enable:2;\t \n\tunsigned int jumbo:1;\t\t \n\tunsigned int coalesce:1;\t \n\tunsigned int tx_flow:1;\t\t \n\tunsigned int rx_flow:1;\t\t \n\tunsigned int phy_media:1;\t \n\tunsigned int link_status:1;\t \n\tstruct netdev_desc *last_tx;\t \n\tunsigned long cur_rx, old_rx;\t \n\tunsigned long cur_tx, old_tx;\n\tstruct timer_list timer;\n\tint wake_polarity;\n\tchar name[256];\t\t \n\tu8 duplex_polarity;\n\tu16 mcast_filter[4];\n\tu16 advertising;\t \n\tu16 negotiate;\t\t \n\tint phy_addr;\t\t \n\tu16 led_mode;\t\t \n};\n\n \n \n#define CHIP_IP1000A\t1\n\nstatic const struct pci_device_id rio_pci_tbl[] = {\n\t{0x1186, 0x4000, PCI_ANY_ID, PCI_ANY_ID, },\n\t{0x13f0, 0x1021, PCI_ANY_ID, PCI_ANY_ID, },\n\t{ PCI_VDEVICE(SUNDANCE,\t0x1023), CHIP_IP1000A },\n\t{ PCI_VDEVICE(SUNDANCE,\t0x2021), CHIP_IP1000A },\n\t{ PCI_VDEVICE(DLINK,\t0x9021), CHIP_IP1000A },\n\t{ PCI_VDEVICE(DLINK,\t0x4020), CHIP_IP1000A },\n\t{ }\n};\nMODULE_DEVICE_TABLE (pci, rio_pci_tbl);\n#define TX_TIMEOUT  (4*HZ)\n#define PACKET_SIZE\t\t1536\n#define MAX_JUMBO\t\t8000\n#define RIO_IO_SIZE             340\n#define DEFAULT_RXC\t\t5\n#define DEFAULT_RXT\t\t750\n#define DEFAULT_TXC\t\t1\n#define MAX_TXC\t\t\t8\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}