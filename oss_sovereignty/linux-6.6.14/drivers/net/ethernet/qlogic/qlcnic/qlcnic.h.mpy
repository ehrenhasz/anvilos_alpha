{
  "module_name": "qlcnic.h",
  "hash_id": "191b8e488971076ce453978ee2fec39e7315971b330953e6a55327ca39bf1274",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/qlogic/qlcnic/qlcnic.h",
  "human_readable_source": " \n \n\n#ifndef _QLCNIC_H_\n#define _QLCNIC_H_\n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/ioport.h>\n#include <linux/pci.h>\n#include <linux/netdevice.h>\n#include <linux/etherdevice.h>\n#include <linux/ip.h>\n#include <linux/in.h>\n#include <linux/tcp.h>\n#include <linux/skbuff.h>\n#include <linux/firmware.h>\n#include <linux/ethtool.h>\n#include <linux/mii.h>\n#include <linux/timer.h>\n#include <linux/irq.h>\n#include <linux/vmalloc.h>\n#include <linux/io.h>\n#include <asm/byteorder.h>\n#include <linux/bitops.h>\n#include <linux/if_vlan.h>\n\n#include \"qlcnic_hdr.h\"\n#include \"qlcnic_hw.h\"\n#include \"qlcnic_83xx_hw.h\"\n#include \"qlcnic_dcb.h\"\n\n#define _QLCNIC_LINUX_MAJOR 5\n#define _QLCNIC_LINUX_MINOR 3\n#define _QLCNIC_LINUX_SUBVERSION 66\n#define QLCNIC_LINUX_VERSIONID  \"5.3.66\"\n#define QLCNIC_DRV_IDC_VER  0x01\n#define QLCNIC_DRIVER_VERSION  ((_QLCNIC_LINUX_MAJOR << 16) |\\\n\t\t (_QLCNIC_LINUX_MINOR << 8) | (_QLCNIC_LINUX_SUBVERSION))\n\n#define QLCNIC_VERSION_CODE(a, b, c)\t(((a) << 24) + ((b) << 16) + (c))\n#define _major(v)\t(((v) >> 24) & 0xff)\n#define _minor(v)\t(((v) >> 16) & 0xff)\n#define _build(v)\t((v) & 0xffff)\n\n \n#define QLCNIC_DECODE_VERSION(v) \\\n\tQLCNIC_VERSION_CODE(((v) & 0xff), (((v) >> 8) & 0xff), ((v) >> 16))\n\n#define QLCNIC_MIN_FW_VERSION     QLCNIC_VERSION_CODE(4, 4, 2)\n#define QLCNIC_NUM_FLASH_SECTORS (64)\n#define QLCNIC_FLASH_SECTOR_SIZE (64 * 1024)\n#define QLCNIC_FLASH_TOTAL_SIZE  (QLCNIC_NUM_FLASH_SECTORS \\\n\t\t\t\t\t* QLCNIC_FLASH_SECTOR_SIZE)\n\n#define RCV_DESC_RINGSIZE(rds_ring)\t\\\n\t(sizeof(struct rcv_desc) * (rds_ring)->num_desc)\n#define RCV_BUFF_RINGSIZE(rds_ring)\t\\\n\t(sizeof(struct qlcnic_rx_buffer) * rds_ring->num_desc)\n#define STATUS_DESC_RINGSIZE(sds_ring)\t\\\n\t(sizeof(struct status_desc) * (sds_ring)->num_desc)\n#define TX_BUFF_RINGSIZE(tx_ring)\t\\\n\t(sizeof(struct qlcnic_cmd_buffer) * tx_ring->num_desc)\n#define TX_DESC_RINGSIZE(tx_ring)\t\\\n\t(sizeof(struct cmd_desc_type0) * tx_ring->num_desc)\n\n#define QLCNIC_P3P_A0\t\t0x50\n#define QLCNIC_P3P_C0\t\t0x58\n\n#define QLCNIC_IS_REVISION_P3P(REVISION)     (REVISION >= QLCNIC_P3P_A0)\n\n#define FIRST_PAGE_GROUP_START\t0\n#define FIRST_PAGE_GROUP_END\t0x100000\n\n#define P3P_MAX_MTU                     (9600)\n#define P3P_MIN_MTU                     (68)\n#define QLCNIC_MAX_ETHERHDR                32  \n\n#define QLCNIC_P3P_RX_BUF_MAX_LEN         (QLCNIC_MAX_ETHERHDR + ETH_DATA_LEN)\n#define QLCNIC_P3P_RX_JUMBO_BUF_MAX_LEN   (QLCNIC_MAX_ETHERHDR + P3P_MAX_MTU)\n#define QLCNIC_CT_DEFAULT_RX_BUF_LEN\t2048\n#define QLCNIC_LRO_BUFFER_EXTRA\t\t2048\n\n \n#define QLCNIC_MAX_FRAGS_PER_TX\t14\n#define MAX_TSO_HEADER_DESC\t2\n#define MGMT_CMD_DESC_RESV\t4\n#define TX_STOP_THRESH\t\t((MAX_SKB_FRAGS >> 2) + MAX_TSO_HEADER_DESC \\\n\t\t\t\t\t\t\t+ MGMT_CMD_DESC_RESV)\n#define QLCNIC_MAX_TX_TIMEOUTS\t2\n\n \n#define QLCNIC_SINGLE_RING\t\t1\n#define QLCNIC_DEF_SDS_RINGS\t\t4\n#define QLCNIC_DEF_TX_RINGS\t\t4\n#define QLCNIC_MAX_VNIC_TX_RINGS\t4\n#define QLCNIC_MAX_VNIC_SDS_RINGS\t4\n#define QLCNIC_83XX_MINIMUM_VECTOR\t3\n#define QLCNIC_82XX_MINIMUM_VECTOR\t2\n\nenum qlcnic_queue_type {\n\tQLCNIC_TX_QUEUE = 1,\n\tQLCNIC_RX_QUEUE,\n};\n\n \n#define QLCNIC_VNIC_MODE\t0xFF\n#define QLCNIC_DEFAULT_MODE\t0x0\n\n \n#define QLC_DEFAULT_VNIC_COUNT\t8\n#define QLC_84XX_VNIC_COUNT\t16\n\n \n#define PHAN_INITIALIZE_FAILED\t\t0xffff\n#define PHAN_INITIALIZE_COMPLETE\t0xff01\n\n \n#define PHAN_INITIALIZE_ACK\t\t0xf00f\n#define PHAN_PEG_RCV_INITIALIZED\t0xff01\n\n#define NUM_RCV_DESC_RINGS\t3\n\n#define RCV_RING_NORMAL 0\n#define RCV_RING_JUMBO\t1\n\n#define MIN_CMD_DESCRIPTORS\t\t64\n#define MIN_RCV_DESCRIPTORS\t\t64\n#define MIN_JUMBO_DESCRIPTORS\t\t32\n\n#define MAX_CMD_DESCRIPTORS\t\t1024\n#define MAX_RCV_DESCRIPTORS_1G\t\t4096\n#define MAX_RCV_DESCRIPTORS_10G \t8192\n#define MAX_RCV_DESCRIPTORS_VF\t\t2048\n#define MAX_JUMBO_RCV_DESCRIPTORS_1G\t512\n#define MAX_JUMBO_RCV_DESCRIPTORS_10G\t1024\n\n#define DEFAULT_RCV_DESCRIPTORS_1G\t2048\n#define DEFAULT_RCV_DESCRIPTORS_10G\t4096\n#define DEFAULT_RCV_DESCRIPTORS_VF\t1024\n#define MAX_RDS_RINGS                   2\n\n#define get_next_index(index, length)\t\\\n\t(((index) + 1) & ((length) - 1))\n\n \nstruct cmd_desc_type0 {\n\tu8 tcp_hdr_offset;\t \n\tu8 ip_hdr_offset;\t \n\t__le16 flags_opcode;\t \n\t__le32 nfrags__length;\t \n\n\t__le64 addr_buffer2;\n\n\t__le16 encap_descr;\t \n\t__le16 mss;\n\tu8 port_ctxid;\t\t \n\tu8 hdr_length;\t\t \n\tu8 outer_hdr_length;\t \n\tu8 rsvd1;\n\n\t__le64 addr_buffer3;\n\t__le64 addr_buffer1;\n\n\t__le16 buffer_length[4];\n\n\t__le64 addr_buffer4;\n\n\tu8 eth_addr[ETH_ALEN];\n\t__le16 vlan_TCI;\t \n\n} __attribute__ ((aligned(64)));\n\n \nstruct rcv_desc {\n\t__le16 reference_handle;\n\t__le16 reserved;\n\t__le32 buffer_length;\t \n\t__le64 addr_buffer;\n} __packed;\n\nstruct status_desc {\n\t__le64 status_desc_data[2];\n} __attribute__ ((aligned(16)));\n\n \n#define QLCNIC_UNI_FW_MIN_SIZE\t\t0xc8000\n#define QLCNIC_UNI_DIR_SECT_PRODUCT_TBL\t0x0\n#define QLCNIC_UNI_DIR_SECT_BOOTLD\t0x6\n#define QLCNIC_UNI_DIR_SECT_FW\t\t0x7\n\n \n#define QLCNIC_UNI_CHIP_REV_OFF\t\t10\n#define QLCNIC_UNI_FLAGS_OFF\t\t11\n#define QLCNIC_UNI_BIOS_VERSION_OFF \t12\n#define QLCNIC_UNI_BOOTLD_IDX_OFF\t27\n#define QLCNIC_UNI_FIRMWARE_IDX_OFF \t29\n\nstruct uni_table_desc{\n\t__le32\tfindex;\n\t__le32\tnum_entries;\n\t__le32\tentry_size;\n\t__le32\treserved[5];\n};\n\nstruct uni_data_desc{\n\t__le32\tfindex;\n\t__le32\tsize;\n\t__le32\treserved[5];\n};\n\n \n#define QLCNIC_FLT_LOCATION\t0x3F1000\n#define QLCNIC_FDT_LOCATION     0x3F0000\n#define QLCNIC_B0_FW_IMAGE_REGION 0x74\n#define QLCNIC_C0_FW_IMAGE_REGION 0x97\n#define QLCNIC_BOOTLD_REGION    0X72\nstruct qlcnic_flt_header {\n\tu16 version;\n\tu16 len;\n\tu16 checksum;\n\tu16 reserved;\n};\n\nstruct qlcnic_flt_entry {\n\tu8 region;\n\tu8 reserved0;\n\tu8 attrib;\n\tu8 reserved1;\n\tu32 size;\n\tu32 start_addr;\n\tu32 end_addr;\n};\n\n \nstruct qlcnic_fdt {\n\tu32\tvalid;\n\tu16\tver;\n\tu16\tlen;\n\tu16\tcksum;\n\tu16\tunused;\n\tu8\tmodel[16];\n\tu8\tmfg_id;\n\tu16\tid;\n\tu8\tflag;\n\tu8\terase_cmd;\n\tu8\talt_erase_cmd;\n\tu8\twrite_enable_cmd;\n\tu8\twrite_enable_bits;\n\tu8\twrite_statusreg_cmd;\n\tu8\tunprotected_sec_cmd;\n\tu8\tread_manuf_cmd;\n\tu32\tblock_size;\n\tu32\talt_block_size;\n\tu32\tflash_size;\n\tu32\twrite_enable_data;\n\tu8\treadid_addr_len;\n\tu8\twrite_disable_bits;\n\tu8\tread_dev_id_len;\n\tu8\tchip_erase_cmd;\n\tu16\tread_timeo;\n\tu8\tprotected_sec_cmd;\n\tu8\tresvd[65];\n};\n \n#define\tQLCNIC_BDINFO_MAGIC 0x12345678\n\n#define QLCNIC_BRDTYPE_P3P_REF_QG\t0x0021\n#define QLCNIC_BRDTYPE_P3P_HMEZ\t\t0x0022\n#define QLCNIC_BRDTYPE_P3P_10G_CX4_LP\t0x0023\n#define QLCNIC_BRDTYPE_P3P_4_GB\t\t0x0024\n#define QLCNIC_BRDTYPE_P3P_IMEZ\t\t0x0025\n#define QLCNIC_BRDTYPE_P3P_10G_SFP_PLUS\t0x0026\n#define QLCNIC_BRDTYPE_P3P_10000_BASE_T\t0x0027\n#define QLCNIC_BRDTYPE_P3P_XG_LOM\t0x0028\n#define QLCNIC_BRDTYPE_P3P_4_GB_MM\t0x0029\n#define QLCNIC_BRDTYPE_P3P_10G_SFP_CT\t0x002a\n#define QLCNIC_BRDTYPE_P3P_10G_SFP_QT\t0x002b\n#define QLCNIC_BRDTYPE_P3P_10G_CX4\t0x0031\n#define QLCNIC_BRDTYPE_P3P_10G_XFP\t0x0032\n#define QLCNIC_BRDTYPE_P3P_10G_TP\t0x0080\n\n#define QLCNIC_MSIX_TABLE_OFFSET\t0x44\n\n \n#define QLCNIC_BRDCFG_START\t0x4000\t\t \n#define QLCNIC_BOOTLD_START\t0x10000\t\t \n#define QLCNIC_IMAGE_START\t0x43000\t\t \n#define QLCNIC_USER_START\t0x3E8000\t \n\n#define QLCNIC_FW_VERSION_OFFSET\t(QLCNIC_USER_START+0x408)\n#define QLCNIC_FW_SIZE_OFFSET\t\t(QLCNIC_USER_START+0x40c)\n#define QLCNIC_FW_SERIAL_NUM_OFFSET\t(QLCNIC_USER_START+0x81c)\n#define QLCNIC_BIOS_VERSION_OFFSET\t(QLCNIC_USER_START+0x83c)\n\n#define QLCNIC_BRDTYPE_OFFSET\t\t(QLCNIC_BRDCFG_START+0x8)\n#define QLCNIC_FW_MAGIC_OFFSET\t\t(QLCNIC_BRDCFG_START+0x128)\n\n#define QLCNIC_FW_MIN_SIZE\t\t(0x3fffff)\n#define QLCNIC_UNIFIED_ROMIMAGE  \t0\n#define QLCNIC_FLASH_ROMIMAGE\t\t1\n#define QLCNIC_UNKNOWN_ROMIMAGE\t\t0xff\n\n#define QLCNIC_UNIFIED_ROMIMAGE_NAME\t\"phanfw.bin\"\n#define QLCNIC_FLASH_ROMIMAGE_NAME\t\"flash\"\n\nextern char qlcnic_driver_name[];\n\nextern int qlcnic_use_msi;\nextern int qlcnic_use_msi_x;\nextern int qlcnic_auto_fw_reset;\nextern int qlcnic_load_fw_file;\n\n \n#define MAX_STATUS_HANDLE\t(64)\n\n \nstruct qlcnic_skb_frag {\n\tu64 dma;\n\tu64 length;\n};\n\n \n#define\tQLCNIC_BUFFER_FREE\t0\n#define\tQLCNIC_BUFFER_BUSY\t1\n\n \nstruct qlcnic_cmd_buffer {\n\tstruct sk_buff *skb;\n\tstruct qlcnic_skb_frag frag_array[MAX_SKB_FRAGS + 1];\n\tu32 frag_count;\n};\n\n \nstruct qlcnic_rx_buffer {\n\tu16 ref_handle;\n\tstruct sk_buff *skb;\n\tstruct list_head list;\n\tu64 dma;\n};\n\n \n#define\tQLCNIC_GBE\t0x01\n#define\tQLCNIC_XGBE\t0x02\n\n \n#define QLCNIC_INTR_COAL_TYPE_RX\t\t1\n#define QLCNIC_INTR_COAL_TYPE_TX\t\t2\n#define QLCNIC_INTR_COAL_TYPE_RX_TX\t\t3\n\n#define QLCNIC_DEF_INTR_COALESCE_RX_TIME_US\t3\n#define QLCNIC_DEF_INTR_COALESCE_RX_PACKETS\t256\n\n#define QLCNIC_DEF_INTR_COALESCE_TX_TIME_US\t64\n#define QLCNIC_DEF_INTR_COALESCE_TX_PACKETS\t64\n\n#define QLCNIC_INTR_DEFAULT\t\t\t0x04\n#define QLCNIC_CONFIG_INTR_COALESCE\t\t3\n#define QLCNIC_DEV_INFO_SIZE\t\t\t2\n\nstruct qlcnic_nic_intr_coalesce {\n\tu8\ttype;\n\tu8\tsts_ring_mask;\n\tu16\trx_packets;\n\tu16\trx_time_us;\n\tu16\ttx_packets;\n\tu16\ttx_time_us;\n\tu16\tflag;\n\tu32\ttimer_out;\n};\n\nstruct qlcnic_83xx_dump_template_hdr {\n\tu32\ttype;\n\tu32\toffset;\n\tu32\tsize;\n\tu32\tcap_mask;\n\tu32\tnum_entries;\n\tu32\tversion;\n\tu32\ttimestamp;\n\tu32\tchecksum;\n\tu32\tdrv_cap_mask;\n\tu32\tsys_info[3];\n\tu32\tsaved_state[16];\n\tu32\tcap_sizes[8];\n\tu32\tocm_wnd_reg[16];\n\tu32\trsvd[];\n};\n\nstruct qlcnic_82xx_dump_template_hdr {\n\tu32\ttype;\n\tu32\toffset;\n\tu32\tsize;\n\tu32\tcap_mask;\n\tu32\tnum_entries;\n\tu32\tversion;\n\tu32\ttimestamp;\n\tu32\tchecksum;\n\tu32\tdrv_cap_mask;\n\tu32\tsys_info[3];\n\tu32\tsaved_state[16];\n\tu32\tcap_sizes[8];\n\tu32\trsvd[7];\n\tu32\tcapabilities;\n\tu32\trsvd1[];\n};\n\n#define QLC_PEX_DMA_READ_SIZE\t(PAGE_SIZE * 16)\n\nstruct qlcnic_fw_dump {\n\tu8\tclr;\t \n\tbool\tenable;  \n\tu32\tsize;\t \n\tu32\tcap_mask;  \n\tvoid\t*data;\t \n\tvoid\t*tmpl_hdr;\n\tdma_addr_t phys_addr;\n\tvoid\t*dma_buffer;\n\tbool\tuse_pex_dma;\n\t \n\tu32\ttmpl_hdr_size;\n\tu32\tversion;\n\tu32\tnum_entries;\n\tu32\toffset;\n};\n\n \nstruct qlcnic_hardware_context {\n\tvoid __iomem *pci_base0;\n\tvoid __iomem *ocm_win_crb;\n\n\tunsigned long pci_len0;\n\n\trwlock_t crb_lock;\n\tstruct mutex mem_lock;\n\n\tu8 revision_id;\n\tu8 pci_func;\n\tu8 linkup;\n\tu8 loopback_state;\n\tu8 beacon_state;\n\tu8 has_link_events;\n\tu8 fw_type;\n\tu8 physical_port;\n\tu8 reset_context;\n\tu8 msix_supported;\n\tu8 max_mac_filters;\n\tu8 mc_enabled;\n\tu8 max_mc_count;\n\tu8 diag_test;\n\tu8 num_msix;\n\tu8 nic_mode;\n\tint diag_cnt;\n\n\tu16 max_uc_count;\n\tu16 port_type;\n\tu16 board_type;\n\tu16 supported_type;\n\n\tu32 link_speed;\n\tu16 link_duplex;\n\tu16 link_autoneg;\n\tu16 module_type;\n\n\tu16 op_mode;\n\tu16 switch_mode;\n\tu16 max_tx_ques;\n\tu16 max_rx_ques;\n\tu16 max_mtu;\n\tu32 msg_enable;\n\tu16 total_nic_func;\n\tu16 max_pci_func;\n\tu32 max_vnic_func;\n\tu32 total_pci_func;\n\n\tu32 capabilities;\n\tu32 extra_capability[3];\n\tu32 temp;\n\tu32 int_vec_bit;\n\tu32 fw_hal_version;\n\tu32 port_config;\n\tstruct qlcnic_hardware_ops *hw_ops;\n\tstruct qlcnic_nic_intr_coalesce coal;\n\tstruct qlcnic_fw_dump fw_dump;\n\tstruct qlcnic_fdt fdt;\n\tstruct qlc_83xx_reset reset;\n\tstruct qlc_83xx_idc idc;\n\tstruct qlc_83xx_fw_info *fw_info;\n\tstruct qlcnic_intrpt_config *intr_tbl;\n\tstruct qlcnic_sriov *sriov;\n\tu32 *reg_tbl;\n\tu32 *ext_reg_tbl;\n\tu32 mbox_aen[QLC_83XX_MBX_AEN_CNT];\n\tu32 mbox_reg[4];\n\tstruct qlcnic_mailbox *mailbox;\n\tu8 extend_lb_time;\n\tu8 phys_port_id[ETH_ALEN];\n\tu8 lb_mode;\n\tstruct device *hwmon_dev;\n\tu32 post_mode;\n\tbool run_post;\n};\n\nstruct qlcnic_adapter_stats {\n\tu64  xmitcalled;\n\tu64  xmitfinished;\n\tu64  rxdropped;\n\tu64  txdropped;\n\tu64  csummed;\n\tu64  rx_pkts;\n\tu64  lro_pkts;\n\tu64  rxbytes;\n\tu64  txbytes;\n\tu64  lrobytes;\n\tu64  lso_frames;\n\tu64  encap_lso_frames;\n\tu64  encap_tx_csummed;\n\tu64  encap_rx_csummed;\n\tu64  xmit_on;\n\tu64  xmit_off;\n\tu64  skb_alloc_failure;\n\tu64  null_rxbuf;\n\tu64  rx_dma_map_error;\n\tu64  tx_dma_map_error;\n\tu64  spurious_intr;\n\tu64  mac_filter_limit_overrun;\n\tu64  mbx_spurious_intr;\n};\n\n \nstruct qlcnic_host_rds_ring {\n\tvoid __iomem *crb_rcv_producer;\n\tstruct rcv_desc *desc_head;\n\tstruct qlcnic_rx_buffer *rx_buf_arr;\n\tu32 num_desc;\n\tu32 producer;\n\tu32 dma_size;\n\tu32 skb_size;\n\tu32 flags;\n\tstruct list_head free_list;\n\tspinlock_t lock;\n\tdma_addr_t phys_addr;\n} ____cacheline_internodealigned_in_smp;\n\nstruct qlcnic_host_sds_ring {\n\tu32 consumer;\n\tu32 num_desc;\n\tvoid __iomem *crb_sts_consumer;\n\n\tstruct qlcnic_host_tx_ring *tx_ring;\n\tstruct status_desc *desc_head;\n\tstruct qlcnic_adapter *adapter;\n\tstruct napi_struct napi;\n\tstruct list_head free_list[NUM_RCV_DESC_RINGS];\n\n\tvoid __iomem *crb_intr_mask;\n\tint irq;\n\n\tdma_addr_t phys_addr;\n\tchar name[IFNAMSIZ + 12];\n} ____cacheline_internodealigned_in_smp;\n\nstruct qlcnic_tx_queue_stats {\n\tu64 xmit_on;\n\tu64 xmit_off;\n\tu64 xmit_called;\n\tu64 xmit_finished;\n\tu64 tx_bytes;\n};\n\nstruct qlcnic_host_tx_ring {\n\tint irq;\n\tvoid __iomem *crb_intr_mask;\n\tchar name[IFNAMSIZ + 12];\n\tu16 ctx_id;\n\n\tu32 state;\n\tu32 producer;\n\tu32 sw_consumer;\n\tu32 num_desc;\n\n\tstruct qlcnic_tx_queue_stats tx_stats;\n\n\tvoid __iomem *crb_cmd_producer;\n\tstruct cmd_desc_type0 *desc_head;\n\tstruct qlcnic_adapter *adapter;\n\tstruct napi_struct napi;\n\tstruct qlcnic_cmd_buffer *cmd_buf_arr;\n\t__le32 *hw_consumer;\n\n\tdma_addr_t phys_addr;\n\tdma_addr_t hw_cons_phys_addr;\n\tstruct netdev_queue *txq;\n\t \n\tspinlock_t tx_clean_lock;\n} ____cacheline_internodealigned_in_smp;\n\n \nstruct qlcnic_recv_context {\n\tstruct qlcnic_host_rds_ring *rds_rings;\n\tstruct qlcnic_host_sds_ring *sds_rings;\n\tu32 state;\n\tu16 context_id;\n\tu16 virt_port;\n};\n\n \n\n#define QLCNIC_OS_CRB_RETRY_COUNT\t4000\n\n#define QLCNIC_CDRP_CMD_BIT\t\t0x80000000\n\n \n#define QLCNIC_CDRP_FORM_RSP(rsp)\t(rsp)\n#define QLCNIC_CDRP_IS_RSP(rsp)\t(((rsp) & QLCNIC_CDRP_CMD_BIT) == 0)\n\n#define QLCNIC_CDRP_RSP_OK\t\t0x00000001\n#define QLCNIC_CDRP_RSP_FAIL\t\t0x00000002\n#define QLCNIC_CDRP_RSP_TIMEOUT \t0x00000003\n\n \n#define QLCNIC_CDRP_FORM_CMD(cmd)\t(QLCNIC_CDRP_CMD_BIT | (cmd))\n\n#define QLCNIC_RCODE_SUCCESS\t\t0\n#define QLCNIC_RCODE_INVALID_ARGS\t6\n#define QLCNIC_RCODE_NOT_SUPPORTED\t9\n#define QLCNIC_RCODE_NOT_PERMITTED\t10\n#define QLCNIC_RCODE_NOT_IMPL\t\t15\n#define QLCNIC_RCODE_INVALID\t\t16\n#define QLCNIC_RCODE_TIMEOUT\t\t17\n#define QLCNIC_DESTROY_CTX_RESET\t0\n\n \n#define QLCNIC_CAP0_LEGACY_CONTEXT\t(1)\n#define QLCNIC_CAP0_LEGACY_MN\t\t(1 << 2)\n#define QLCNIC_CAP0_LSO \t\t(1 << 6)\n#define QLCNIC_CAP0_JUMBO_CONTIGUOUS\t(1 << 7)\n#define QLCNIC_CAP0_LRO_CONTIGUOUS\t(1 << 8)\n#define QLCNIC_CAP0_VALIDOFF\t\t(1 << 11)\n#define QLCNIC_CAP0_LRO_MSS\t\t(1 << 21)\n#define QLCNIC_CAP0_TX_MULTI\t\t(1 << 22)\n\n \n#define QLCNIC_HOST_CTX_STATE_FREED\t0\n#define QLCNIC_HOST_CTX_STATE_ACTIVE\t2\n\n \n\nstruct qlcnic_hostrq_sds_ring {\n\t__le64 host_phys_addr;\t \n\t__le32 ring_size;\t\t \n\t__le16 msi_index;\n\t__le16 rsvd;\t\t \n} __packed;\n\nstruct qlcnic_hostrq_rds_ring {\n\t__le64 host_phys_addr;\t \n\t__le64 buff_size;\t\t \n\t__le32 ring_size;\t\t \n\t__le32 ring_kind;\t\t \n} __packed;\n\nstruct qlcnic_hostrq_rx_ctx {\n\t__le64 host_rsp_dma_addr;\t \n\t__le32 capabilities[4];\t\t \n\t__le32 host_int_crb_mode;\t \n\t__le32 host_rds_crb_mode;\t \n\t \n\t__le32 rds_ring_offset;\t \n\t__le32 sds_ring_offset;\t \n\t__le16 num_rds_rings;\t \n\t__le16 num_sds_rings;\t \n\t__le16 valid_field_offset;\n\tu8  txrx_sds_binding;\n\tu8  msix_handler;\n\tu8  reserved[128];       \n\t \n\tchar data[];\n} __packed;\n\nstruct qlcnic_cardrsp_rds_ring{\n\t__le32 host_producer_crb;\t \n\t__le32 rsvd1;\t\t \n} __packed;\n\nstruct qlcnic_cardrsp_sds_ring {\n\t__le32 host_consumer_crb;\t \n\t__le32 interrupt_crb;\t \n} __packed;\n\nstruct qlcnic_cardrsp_rx_ctx {\n\t \n\t__le32 rds_ring_offset;\t \n\t__le32 sds_ring_offset;\t \n\t__le32 host_ctx_state;\t \n\t__le32 num_fn_per_port;\t \n\t__le16 num_rds_rings;\t \n\t__le16 num_sds_rings;\t \n\t__le16 context_id;\t\t \n\tu8  phys_port;\t\t \n\tu8  virt_port;\t\t \n\tu8  reserved[128];\t \n\t \n\tchar data[];\n} __packed;\n\n#define SIZEOF_HOSTRQ_RX(HOSTRQ_RX, rds_rings, sds_rings)\t\\\n\t(sizeof(HOSTRQ_RX) + \t\t\t\t\t\\\n\t(rds_rings)*(sizeof(struct qlcnic_hostrq_rds_ring)) +\t\t\\\n\t(sds_rings)*(sizeof(struct qlcnic_hostrq_sds_ring)))\n\n#define SIZEOF_CARDRSP_RX(CARDRSP_RX, rds_rings, sds_rings) \t\\\n\t(sizeof(CARDRSP_RX) + \t\t\t\t\t\\\n\t(rds_rings)*(sizeof(struct qlcnic_cardrsp_rds_ring)) + \t\t\\\n\t(sds_rings)*(sizeof(struct qlcnic_cardrsp_sds_ring)))\n\n \n\nstruct qlcnic_hostrq_cds_ring {\n\t__le64 host_phys_addr;\t \n\t__le32 ring_size;\t\t \n\t__le32 rsvd;\t\t \n} __packed;\n\nstruct qlcnic_hostrq_tx_ctx {\n\t__le64 host_rsp_dma_addr;\t \n\t__le64 cmd_cons_dma_addr;\t \n\t__le64 dummy_dma_addr;\t \n\t__le32 capabilities[4];\t \n\t__le32 host_int_crb_mode;\t \n\t__le32 rsvd1;\t\t \n\t__le16 rsvd2;\t\t \n\t__le16 interrupt_ctl;\n\t__le16 msi_index;\n\t__le16 rsvd3;\t\t \n\tstruct qlcnic_hostrq_cds_ring cds_ring;\t \n\tu8  reserved[128];\t \n} __packed;\n\nstruct qlcnic_cardrsp_cds_ring {\n\t__le32 host_producer_crb;\t \n\t__le32 interrupt_crb;\t \n} __packed;\n\nstruct qlcnic_cardrsp_tx_ctx {\n\t__le32 host_ctx_state;\t \n\t__le16 context_id;\t\t \n\tu8  phys_port;\t\t \n\tu8  virt_port;\t\t \n\tstruct qlcnic_cardrsp_cds_ring cds_ring;\t \n\tu8  reserved[128];\t \n} __packed;\n\n#define SIZEOF_HOSTRQ_TX(HOSTRQ_TX)\t(sizeof(HOSTRQ_TX))\n#define SIZEOF_CARDRSP_TX(CARDRSP_TX)\t(sizeof(CARDRSP_TX))\n\n \n\n#define QLCNIC_HOST_RDS_CRB_MODE_UNIQUE\t0\n#define QLCNIC_HOST_RDS_CRB_MODE_SHARED\t1\n#define QLCNIC_HOST_RDS_CRB_MODE_CUSTOM\t2\n#define QLCNIC_HOST_RDS_CRB_MODE_MAX\t3\n\n#define QLCNIC_HOST_INT_CRB_MODE_UNIQUE\t0\n#define QLCNIC_HOST_INT_CRB_MODE_SHARED\t1\n#define QLCNIC_HOST_INT_CRB_MODE_NORX\t2\n#define QLCNIC_HOST_INT_CRB_MODE_NOTX\t3\n#define QLCNIC_HOST_INT_CRB_MODE_NORXTX\t4\n\n\n \n\n#define MC_COUNT_P3P\t38\n\n#define QLCNIC_MAC_NOOP\t0\n#define QLCNIC_MAC_ADD\t1\n#define QLCNIC_MAC_DEL\t2\n#define QLCNIC_MAC_VLAN_ADD\t3\n#define QLCNIC_MAC_VLAN_DEL\t4\n\nenum qlcnic_mac_type {\n\tQLCNIC_UNICAST_MAC,\n\tQLCNIC_MULTICAST_MAC,\n\tQLCNIC_BROADCAST_MAC,\n};\n\nstruct qlcnic_mac_vlan_list {\n\tstruct list_head list;\n\tuint8_t mac_addr[ETH_ALEN+2];\n\tu16 vlan_id;\n\tenum qlcnic_mac_type mac_type;\n};\n\n \n#define NO_MAC_LEARN\t\t0\n#define DRV_MAC_LEARN\t\t1\n#define FDB_MAC_LEARN\t\t2\n\n#define QLCNIC_HOST_REQUEST\t0x13\n#define QLCNIC_REQUEST\t\t0x14\n\n#define QLCNIC_MAC_EVENT\t0x1\n\n#define QLCNIC_IP_UP\t\t2\n#define QLCNIC_IP_DOWN\t\t3\n\n#define QLCNIC_ILB_MODE\t\t0x1\n#define QLCNIC_ELB_MODE\t\t0x2\n#define QLCNIC_LB_MODE_MASK\t0x3\n\n#define QLCNIC_LINKEVENT\t0x1\n#define QLCNIC_LB_RESPONSE\t0x2\n#define QLCNIC_IS_LB_CONFIGURED(VAL)\t\\\n\t\t(VAL == (QLCNIC_LINKEVENT | QLCNIC_LB_RESPONSE))\n\n \n#define QLCNIC_H2C_OPCODE_CONFIG_RSS\t\t\t0x1\n#define QLCNIC_H2C_OPCODE_CONFIG_INTR_COALESCE\t\t0x3\n#define QLCNIC_H2C_OPCODE_CONFIG_LED\t\t\t0x4\n#define QLCNIC_H2C_OPCODE_LRO_REQUEST\t\t\t0x7\n#define QLCNIC_H2C_OPCODE_SET_MAC_RECEIVE_MODE\t\t0xc\n#define QLCNIC_H2C_OPCODE_CONFIG_IPADDR\t\t0x12\n\n#define QLCNIC_H2C_OPCODE_GET_LINKEVENT\t\t0x15\n#define QLCNIC_H2C_OPCODE_CONFIG_BRIDGING\t\t0x17\n#define QLCNIC_H2C_OPCODE_CONFIG_HW_LRO\t\t0x18\n#define QLCNIC_H2C_OPCODE_CONFIG_LOOPBACK\t\t0x13\n\n \n\n#define QLCNIC_C2H_OPCODE_CONFIG_LOOPBACK\t\t0x8f\n#define QLCNIC_C2H_OPCODE_GET_LINKEVENT_RESPONSE\t0x8D\n#define QLCNIC_C2H_OPCODE_GET_DCB_AEN\t\t\t0x90\n\n#define VPORT_MISS_MODE_DROP\t\t0  \n#define VPORT_MISS_MODE_ACCEPT_ALL\t1  \n#define VPORT_MISS_MODE_ACCEPT_MULTI\t2  \n\n#define QLCNIC_LRO_REQUEST_CLEANUP\t4\n\n \n#define QLCNIC_FW_CAPABILITY_TSO\t\tBIT_1\n#define QLCNIC_FW_CAPABILITY_BDG\t\tBIT_8\n#define QLCNIC_FW_CAPABILITY_FVLANTX\t\tBIT_9\n#define QLCNIC_FW_CAPABILITY_HW_LRO\t\tBIT_10\n#define QLCNIC_FW_CAPABILITY_2_MULTI_TX\t\tBIT_4\n#define QLCNIC_FW_CAPABILITY_MULTI_LOOPBACK\tBIT_27\n#define QLCNIC_FW_CAPABILITY_MORE_CAPS\t\tBIT_31\n\n#define QLCNIC_FW_CAPABILITY_2_LRO_MAX_TCP_SEG\tBIT_2\n#define QLCNIC_FW_CAP2_HW_LRO_IPV6\t\tBIT_3\n#define QLCNIC_FW_CAPABILITY_SET_DRV_VER\tBIT_5\n#define QLCNIC_FW_CAPABILITY_2_BEACON\t\tBIT_7\n#define QLCNIC_FW_CAPABILITY_2_PER_PORT_ESWITCH_CFG\tBIT_9\n#define QLCNIC_FW_CAPABILITY_2_EXT_ISCSI_DUMP\tBIT_13\n\n#define QLCNIC_83XX_FW_CAPAB_ENCAP_RX_OFFLOAD\tBIT_0\n#define QLCNIC_83XX_FW_CAPAB_ENCAP_TX_OFFLOAD\tBIT_1\n#define QLCNIC_83XX_FW_CAPAB_ENCAP_CKO_OFFLOAD\tBIT_4\n\n \n#define LINKEVENT_MODULE_NOT_PRESENT\t\t\t1\n#define LINKEVENT_MODULE_OPTICAL_UNKNOWN\t\t2\n#define LINKEVENT_MODULE_OPTICAL_SRLR\t\t\t3\n#define LINKEVENT_MODULE_OPTICAL_LRM\t\t\t4\n#define LINKEVENT_MODULE_OPTICAL_SFP_1G \t\t5\n#define LINKEVENT_MODULE_TWINAX_UNSUPPORTED_CABLE\t6\n#define LINKEVENT_MODULE_TWINAX_UNSUPPORTED_CABLELEN\t7\n#define LINKEVENT_MODULE_TWINAX \t\t\t8\n\n#define LINKSPEED_10GBPS\t10000\n#define LINKSPEED_1GBPS \t1000\n#define LINKSPEED_100MBPS\t100\n#define LINKSPEED_10MBPS\t10\n\n#define LINKSPEED_ENCODED_10MBPS\t0\n#define LINKSPEED_ENCODED_100MBPS\t1\n#define LINKSPEED_ENCODED_1GBPS \t2\n\n#define LINKEVENT_AUTONEG_DISABLED\t0\n#define LINKEVENT_AUTONEG_ENABLED\t1\n\n#define LINKEVENT_HALF_DUPLEX\t\t0\n#define LINKEVENT_FULL_DUPLEX\t\t1\n\n#define LINKEVENT_LINKSPEED_MBPS\t0\n#define LINKEVENT_LINKSPEED_ENCODED\t1\n\n \n#define qlcnic_get_nic_msg_opcode(msg_hdr)\t\\\n\t((msg_hdr >> 32) & 0xFF)\n\nstruct qlcnic_fw_msg {\n\tunion {\n\t\tstruct {\n\t\t\tu64 hdr;\n\t\t\tu64 body[7];\n\t\t};\n\t\tu64 words[8];\n\t};\n};\n\nstruct qlcnic_nic_req {\n\t__le64 qhdr;\n\t__le64 req_hdr;\n\t__le64 words[6];\n} __packed;\n\nstruct qlcnic_mac_req {\n\tu8 op;\n\tu8 tag;\n\tu8 mac_addr[6];\n};\n\nstruct qlcnic_vlan_req {\n\t__le16 vlan_id;\n\t__le16 rsvd[3];\n} __packed;\n\nstruct qlcnic_ipaddr {\n\t__be32 ipv4;\n\t__be32 ipv6[4];\n};\n\n#define QLCNIC_MSI_ENABLED\t\t0x02\n#define QLCNIC_MSIX_ENABLED\t\t0x04\n#define QLCNIC_LRO_ENABLED\t\t0x01\n#define QLCNIC_LRO_DISABLED\t\t0x00\n#define QLCNIC_BRIDGE_ENABLED       \t0X10\n#define QLCNIC_DIAG_ENABLED\t\t0x20\n#define QLCNIC_ESWITCH_ENABLED\t\t0x40\n#define QLCNIC_ADAPTER_INITIALIZED\t0x80\n#define QLCNIC_TAGGING_ENABLED\t\t0x100\n#define QLCNIC_MACSPOOF\t\t\t0x200\n#define QLCNIC_MAC_OVERRIDE_DISABLED\t0x400\n#define QLCNIC_PROMISC_DISABLED\t\t0x800\n#define QLCNIC_NEED_FLR\t\t\t0x1000\n#define QLCNIC_FW_RESET_OWNER\t\t0x2000\n#define QLCNIC_FW_HANG\t\t\t0x4000\n#define QLCNIC_FW_LRO_MSS_CAP\t\t0x8000\n#define QLCNIC_TX_INTR_SHARED\t\t0x10000\n#define QLCNIC_APP_CHANGED_FLAGS\t0x20000\n#define QLCNIC_HAS_PHYS_PORT_ID\t\t0x40000\n#define QLCNIC_TSS_RSS\t\t\t0x80000\n\n#define QLCNIC_VLAN_FILTERING\t\t0x800000\n\n#define QLCNIC_IS_MSI_FAMILY(adapter) \\\n\t((adapter)->flags & (QLCNIC_MSI_ENABLED | QLCNIC_MSIX_ENABLED))\n#define QLCNIC_IS_TSO_CAPABLE(adapter)  \\\n\t((adapter)->ahw->capabilities & QLCNIC_FW_CAPABILITY_TSO)\n\n#define QLCNIC_BEACON_EANBLE\t\t0xC\n#define QLCNIC_BEACON_DISABLE\t\t0xD\n\n#define QLCNIC_BEACON_ON\t\t2\n#define QLCNIC_BEACON_OFF\t\t0\n\n#define QLCNIC_MSIX_TBL_SPACE\t\t8192\n#define QLCNIC_PCI_REG_MSIX_TBL \t0x44\n#define QLCNIC_MSIX_TBL_PGSIZE\t\t4096\n\n#define QLCNIC_ADAPTER_UP_MAGIC 777\n\n#define __QLCNIC_FW_ATTACHED\t\t0\n#define __QLCNIC_DEV_UP \t\t1\n#define __QLCNIC_RESETTING\t\t2\n#define __QLCNIC_START_FW \t\t4\n#define __QLCNIC_AER\t\t\t5\n#define __QLCNIC_DIAG_RES_ALLOC\t\t6\n#define __QLCNIC_LED_ENABLE\t\t7\n#define __QLCNIC_ELB_INPROGRESS\t\t8\n#define __QLCNIC_MULTI_TX_UNIQUE\t9\n#define __QLCNIC_SRIOV_ENABLE\t\t10\n#define __QLCNIC_SRIOV_CAPABLE\t\t11\n#define __QLCNIC_MBX_POLL_ENABLE\t12\n#define __QLCNIC_DIAG_MODE\t\t13\n#define __QLCNIC_MAINTENANCE_MODE\t16\n\n#define QLCNIC_INTERRUPT_TEST\t\t1\n#define QLCNIC_LOOPBACK_TEST\t\t2\n#define QLCNIC_LED_TEST\t\t3\n\n#define QLCNIC_FILTER_AGE\t80\n#define QLCNIC_READD_AGE\t20\n#define QLCNIC_LB_MAX_FILTERS\t64\n#define QLCNIC_LB_BUCKET_SIZE\t32\n#define QLCNIC_ILB_MAX_RCV_LOOP\t10\n\nstruct qlcnic_filter {\n\tstruct hlist_node fnode;\n\tu8 faddr[ETH_ALEN];\n\tu16 vlan_id;\n\tunsigned long ftime;\n};\n\nstruct qlcnic_filter_hash {\n\tstruct hlist_head *fhead;\n\tu8 fnum;\n\tu16 fmax;\n\tu16 fbucket_size;\n};\n\n \nstruct qlcnic_mailbox {\n\tstruct workqueue_struct\t*work_q;\n\tstruct qlcnic_adapter\t*adapter;\n\tconst struct qlcnic_mbx_ops *ops;\n\tstruct work_struct\twork;\n\tstruct completion\tcompletion;\n\tstruct list_head\tcmd_q;\n\tunsigned long\t\tstatus;\n\tspinlock_t\t\tqueue_lock;\t \n\tspinlock_t\t\taen_lock;\t \n\tu32\t\t\trsp_status;\n\tu32\t\t\tnum_cmds;\n};\n\nstruct qlcnic_adapter {\n\tstruct qlcnic_hardware_context *ahw;\n\tstruct qlcnic_recv_context *recv_ctx;\n\tstruct qlcnic_host_tx_ring *tx_ring;\n\tstruct net_device *netdev;\n\tstruct pci_dev *pdev;\n\n\tunsigned long state;\n\tu32 flags;\n\n\tu16 num_txd;\n\tu16 num_rxd;\n\tu16 num_jumbo_rxd;\n\tu16 max_rxd;\n\tu16 max_jumbo_rxd;\n\n\tu8 max_rds_rings;\n\n\tu8 max_sds_rings;  \n\tu8 max_tx_rings;   \n\n\tu8 drv_tx_rings;   \n\tu8 drv_sds_rings;  \n\n\tu8 drv_tss_rings;  \n\tu8 drv_rss_rings;  \n\n\tu8 rx_csum;\n\tu8 portnum;\n\n\tu8 fw_wait_cnt;\n\tu8 fw_fail_cnt;\n\tu8 tx_timeo_cnt;\n\tu8 need_fw_reset;\n\tu8 reset_ctx_cnt;\n\n\tu16 is_up;\n\tu16 rx_pvid;\n\tu16 tx_pvid;\n\n\tu32 irq;\n\tu32 heartbeat;\n\n\tu8 dev_state;\n\tu8 reset_ack_timeo;\n\tu8 dev_init_timeo;\n\n\tu8 mac_addr[ETH_ALEN];\n\n\tu64 dev_rst_time;\n\tbool drv_mac_learn;\n\tbool fdb_mac_learn;\n\tbool rx_mac_learn;\n\tunsigned long vlans[BITS_TO_LONGS(VLAN_N_VID)];\n\tu8 flash_mfg_id;\n\tstruct qlcnic_npar_info *npars;\n\tstruct qlcnic_eswitch *eswitch;\n\tstruct qlcnic_nic_template *nic_ops;\n\n\tstruct qlcnic_adapter_stats stats;\n\tstruct list_head mac_list;\n\n\tvoid __iomem\t*tgt_mask_reg;\n\tvoid __iomem\t*tgt_status_reg;\n\tvoid __iomem\t*crb_int_state_reg;\n\tvoid __iomem\t*isr_int_vec;\n\n\tstruct msix_entry *msix_entries;\n\tstruct workqueue_struct *qlcnic_wq;\n\tstruct delayed_work fw_work;\n\tstruct delayed_work idc_aen_work;\n\tstruct delayed_work mbx_poll_work;\n\tstruct qlcnic_dcb *dcb;\n\n\tstruct qlcnic_filter_hash fhash;\n\tstruct qlcnic_filter_hash rx_fhash;\n\tstruct list_head vf_mc_list;\n\n\tspinlock_t mac_learn_lock;\n\t \n\tspinlock_t rx_mac_learn_lock;\n\tu32 file_prd_off;\t \n\tu32 fw_version;\n\tu32 offload_flags;\n\tconst struct firmware *fw;\n};\n\nstruct qlcnic_info_le {\n\t__le16\tpci_func;\n\t__le16\top_mode;\t \n\t__le16\tphys_port;\n\t__le16\tswitch_mode;\t \n\n\t__le32\tcapabilities;\n\tu8\tmax_mac_filters;\n\tu8\treserved1;\n\t__le16\tmax_mtu;\n\n\t__le16\tmax_tx_ques;\n\t__le16\tmax_rx_ques;\n\t__le16\tmin_tx_bw;\n\t__le16\tmax_tx_bw;\n\t__le32  op_type;\n\t__le16  max_bw_reg_offset;\n\t__le16  max_linkspeed_reg_offset;\n\t__le32  capability1;\n\t__le32  capability2;\n\t__le32  capability3;\n\t__le16  max_tx_mac_filters;\n\t__le16  max_rx_mcast_mac_filters;\n\t__le16  max_rx_ucast_mac_filters;\n\t__le16  max_rx_ip_addr;\n\t__le16  max_rx_lro_flow;\n\t__le16  max_rx_status_rings;\n\t__le16  max_rx_buf_rings;\n\t__le16  max_tx_vlan_keys;\n\tu8      total_pf;\n\tu8      total_rss_engines;\n\t__le16  max_vports;\n\t__le16\tlinkstate_reg_offset;\n\t__le16\tbit_offsets;\n\t__le16  max_local_ipv6_addrs;\n\t__le16  max_remote_ipv6_addrs;\n\tu8\treserved2[56];\n} __packed;\n\nstruct qlcnic_info {\n\tu16\tpci_func;\n\tu16\top_mode;\n\tu16\tphys_port;\n\tu16\tswitch_mode;\n\tu32\tcapabilities;\n\tu8\tmax_mac_filters;\n\tu16\tmax_mtu;\n\tu16\tmax_tx_ques;\n\tu16\tmax_rx_ques;\n\tu16\tmin_tx_bw;\n\tu16\tmax_tx_bw;\n\tu32\top_type;\n\tu16\tmax_bw_reg_offset;\n\tu16\tmax_linkspeed_reg_offset;\n\tu32\tcapability1;\n\tu32\tcapability2;\n\tu32\tcapability3;\n\tu16\tmax_tx_mac_filters;\n\tu16\tmax_rx_mcast_mac_filters;\n\tu16\tmax_rx_ucast_mac_filters;\n\tu16\tmax_rx_ip_addr;\n\tu16\tmax_rx_lro_flow;\n\tu16\tmax_rx_status_rings;\n\tu16\tmax_rx_buf_rings;\n\tu16\tmax_tx_vlan_keys;\n\tu8      total_pf;\n\tu8      total_rss_engines;\n\tu16\tmax_vports;\n\tu16\tlinkstate_reg_offset;\n\tu16\tbit_offsets;\n\tu16\tmax_local_ipv6_addrs;\n\tu16\tmax_remote_ipv6_addrs;\n};\n\nstruct qlcnic_pci_info_le {\n\t__le16\tid;\t\t \n\t__le16\tactive;\t\t \n\t__le16\ttype;\t\t \n\t__le16\tdefault_port;\t \n\n\t__le16\ttx_min_bw;\t \n\t__le16\ttx_max_bw;\n\t__le16\treserved1[2];\n\n\tu8\tmac[ETH_ALEN];\n\t__le16  func_count;\n\tu8      reserved2[104];\n\n} __packed;\n\nstruct qlcnic_pci_info {\n\tu16\tid;\n\tu16\tactive;\n\tu16\ttype;\n\tu16\tdefault_port;\n\tu16\ttx_min_bw;\n\tu16\ttx_max_bw;\n\tu8\tmac[ETH_ALEN];\n\tu16  func_count;\n};\n\nstruct qlcnic_npar_info {\n\tbool\teswitch_status;\n\tu16\tpvid;\n\tu16\tmin_bw;\n\tu16\tmax_bw;\n\tu8\tphy_port;\n\tu8\ttype;\n\tu8\tactive;\n\tu8\tenable_pm;\n\tu8\tdest_npar;\n\tu8\tdiscard_tagged;\n\tu8\tmac_override;\n\tu8\tmac_anti_spoof;\n\tu8\tpromisc_mode;\n\tu8\toffload_flags;\n\tu8      pci_func;\n\tu8      mac[ETH_ALEN];\n};\n\nstruct qlcnic_eswitch {\n\tu8\tport;\n\tu8\tactive_vports;\n\tu8\tactive_vlans;\n\tu8\tactive_ucast_filters;\n\tu8\tmax_ucast_filters;\n\tu8\tmax_active_vlans;\n\n\tu32\tflags;\n#define QLCNIC_SWITCH_ENABLE\t\tBIT_1\n#define QLCNIC_SWITCH_VLAN_FILTERING\tBIT_2\n#define QLCNIC_SWITCH_PROMISC_MODE\tBIT_3\n#define QLCNIC_SWITCH_PORT_MIRRORING\tBIT_4\n};\n\n\n#define MAX_BW\t\t\t100\t \n#define MIN_BW\t\t\t1\t \n#define MAX_VLAN_ID\t\t4095\n#define MIN_VLAN_ID\t\t2\n#define DEFAULT_MAC_LEARN\t1\n\n#define IS_VALID_VLAN(vlan)\t(vlan >= MIN_VLAN_ID && vlan < MAX_VLAN_ID)\n#define IS_VALID_BW(bw)\t\t(bw <= MAX_BW)\n\nstruct qlcnic_pci_func_cfg {\n\tu16\tfunc_type;\n\tu16\tmin_bw;\n\tu16\tmax_bw;\n\tu16\tport_num;\n\tu8\tpci_func;\n\tu8\tfunc_state;\n\tu8\tdef_mac_addr[ETH_ALEN];\n};\n\nstruct qlcnic_npar_func_cfg {\n\tu32\tfw_capab;\n\tu16\tport_num;\n\tu16\tmin_bw;\n\tu16\tmax_bw;\n\tu16\tmax_tx_queues;\n\tu16\tmax_rx_queues;\n\tu8\tpci_func;\n\tu8\top_mode;\n};\n\nstruct qlcnic_pm_func_cfg {\n\tu8\tpci_func;\n\tu8\taction;\n\tu8\tdest_npar;\n\tu8\treserved[5];\n};\n\nstruct qlcnic_esw_func_cfg {\n\tu16\tvlan_id;\n\tu8\top_mode;\n\tu8\top_type;\n\tu8\tpci_func;\n\tu8\thost_vlan_tag;\n\tu8\tpromisc_mode;\n\tu8\tdiscard_tagged;\n\tu8\tmac_override;\n\tu8\tmac_anti_spoof;\n\tu8\toffload_flags;\n\tu8\treserved[5];\n};\n\n#define QLCNIC_STATS_VERSION\t\t1\n#define QLCNIC_STATS_PORT\t\t1\n#define QLCNIC_STATS_ESWITCH\t\t2\n#define QLCNIC_QUERY_RX_COUNTER\t\t0\n#define QLCNIC_QUERY_TX_COUNTER\t\t1\n#define QLCNIC_STATS_NOT_AVAIL\t0xffffffffffffffffULL\n#define QLCNIC_FILL_STATS(VAL1) \\\n\t(((VAL1) == QLCNIC_STATS_NOT_AVAIL) ? 0 : VAL1)\n#define QLCNIC_MAC_STATS 1\n#define QLCNIC_ESW_STATS 2\n\n#define QLCNIC_ADD_ESW_STATS(VAL1, VAL2)\\\ndo {\t\\\n\tif (((VAL1) == QLCNIC_STATS_NOT_AVAIL) && \\\n\t    ((VAL2) != QLCNIC_STATS_NOT_AVAIL)) \\\n\t\t(VAL1) = (VAL2); \\\n\telse if (((VAL1) != QLCNIC_STATS_NOT_AVAIL) && \\\n\t\t ((VAL2) != QLCNIC_STATS_NOT_AVAIL)) \\\n\t\t\t(VAL1) += (VAL2); \\\n} while (0)\n\nstruct qlcnic_mac_statistics_le {\n\t__le64\tmac_tx_frames;\n\t__le64\tmac_tx_bytes;\n\t__le64\tmac_tx_mcast_pkts;\n\t__le64\tmac_tx_bcast_pkts;\n\t__le64\tmac_tx_pause_cnt;\n\t__le64\tmac_tx_ctrl_pkt;\n\t__le64\tmac_tx_lt_64b_pkts;\n\t__le64\tmac_tx_lt_127b_pkts;\n\t__le64\tmac_tx_lt_255b_pkts;\n\t__le64\tmac_tx_lt_511b_pkts;\n\t__le64\tmac_tx_lt_1023b_pkts;\n\t__le64\tmac_tx_lt_1518b_pkts;\n\t__le64\tmac_tx_gt_1518b_pkts;\n\t__le64\trsvd1[3];\n\n\t__le64\tmac_rx_frames;\n\t__le64\tmac_rx_bytes;\n\t__le64\tmac_rx_mcast_pkts;\n\t__le64\tmac_rx_bcast_pkts;\n\t__le64\tmac_rx_pause_cnt;\n\t__le64\tmac_rx_ctrl_pkt;\n\t__le64\tmac_rx_lt_64b_pkts;\n\t__le64\tmac_rx_lt_127b_pkts;\n\t__le64\tmac_rx_lt_255b_pkts;\n\t__le64\tmac_rx_lt_511b_pkts;\n\t__le64\tmac_rx_lt_1023b_pkts;\n\t__le64\tmac_rx_lt_1518b_pkts;\n\t__le64\tmac_rx_gt_1518b_pkts;\n\t__le64\trsvd2[3];\n\n\t__le64\tmac_rx_length_error;\n\t__le64\tmac_rx_length_small;\n\t__le64\tmac_rx_length_large;\n\t__le64\tmac_rx_jabber;\n\t__le64\tmac_rx_dropped;\n\t__le64\tmac_rx_crc_error;\n\t__le64\tmac_align_error;\n} __packed;\n\nstruct qlcnic_mac_statistics {\n\tu64\tmac_tx_frames;\n\tu64\tmac_tx_bytes;\n\tu64\tmac_tx_mcast_pkts;\n\tu64\tmac_tx_bcast_pkts;\n\tu64\tmac_tx_pause_cnt;\n\tu64\tmac_tx_ctrl_pkt;\n\tu64\tmac_tx_lt_64b_pkts;\n\tu64\tmac_tx_lt_127b_pkts;\n\tu64\tmac_tx_lt_255b_pkts;\n\tu64\tmac_tx_lt_511b_pkts;\n\tu64\tmac_tx_lt_1023b_pkts;\n\tu64\tmac_tx_lt_1518b_pkts;\n\tu64\tmac_tx_gt_1518b_pkts;\n\tu64\trsvd1[3];\n\tu64\tmac_rx_frames;\n\tu64\tmac_rx_bytes;\n\tu64\tmac_rx_mcast_pkts;\n\tu64\tmac_rx_bcast_pkts;\n\tu64\tmac_rx_pause_cnt;\n\tu64\tmac_rx_ctrl_pkt;\n\tu64\tmac_rx_lt_64b_pkts;\n\tu64\tmac_rx_lt_127b_pkts;\n\tu64\tmac_rx_lt_255b_pkts;\n\tu64\tmac_rx_lt_511b_pkts;\n\tu64\tmac_rx_lt_1023b_pkts;\n\tu64\tmac_rx_lt_1518b_pkts;\n\tu64\tmac_rx_gt_1518b_pkts;\n\tu64\trsvd2[3];\n\tu64\tmac_rx_length_error;\n\tu64\tmac_rx_length_small;\n\tu64\tmac_rx_length_large;\n\tu64\tmac_rx_jabber;\n\tu64\tmac_rx_dropped;\n\tu64\tmac_rx_crc_error;\n\tu64\tmac_align_error;\n};\n\nstruct qlcnic_esw_stats_le {\n\t__le16 context_id;\n\t__le16 version;\n\t__le16 size;\n\t__le16 unused;\n\t__le64 unicast_frames;\n\t__le64 multicast_frames;\n\t__le64 broadcast_frames;\n\t__le64 dropped_frames;\n\t__le64 errors;\n\t__le64 local_frames;\n\t__le64 numbytes;\n\t__le64 rsvd[3];\n} __packed;\n\nstruct __qlcnic_esw_statistics {\n\tu16\tcontext_id;\n\tu16\tversion;\n\tu16\tsize;\n\tu16\tunused;\n\tu64\tunicast_frames;\n\tu64\tmulticast_frames;\n\tu64\tbroadcast_frames;\n\tu64\tdropped_frames;\n\tu64\terrors;\n\tu64\tlocal_frames;\n\tu64\tnumbytes;\n\tu64\trsvd[3];\n};\n\nstruct qlcnic_esw_statistics {\n\tstruct __qlcnic_esw_statistics rx;\n\tstruct __qlcnic_esw_statistics tx;\n};\n\n#define QLCNIC_FORCE_FW_DUMP_KEY\t0xdeadfeed\n#define QLCNIC_ENABLE_FW_DUMP\t\t0xaddfeed\n#define QLCNIC_DISABLE_FW_DUMP\t\t0xbadfeed\n#define QLCNIC_FORCE_FW_RESET\t\t0xdeaddead\n#define QLCNIC_SET_QUIESCENT\t\t0xadd00010\n#define QLCNIC_RESET_QUIESCENT\t\t0xadd00020\n\nstruct _cdrp_cmd {\n\tu32 num;\n\tu32 *arg;\n};\n\nstruct qlcnic_cmd_args {\n\tstruct completion\tcompletion;\n\tstruct list_head\tlist;\n\tstruct _cdrp_cmd\treq;\n\tstruct _cdrp_cmd\trsp;\n\tatomic_t\t\trsp_status;\n\tint\t\t\tpay_size;\n\tu32\t\t\trsp_opcode;\n\tu32\t\t\ttotal_cmds;\n\tu32\t\t\top_type;\n\tu32\t\t\ttype;\n\tu32\t\t\tcmd_op;\n\tu32\t\t\t*hdr;\t \n\tu32\t\t\t*pay;\t \n\tu8\t\t\tfunc_num;\n};\n\nint qlcnic_fw_cmd_get_minidump_temp(struct qlcnic_adapter *adapter);\nint qlcnic_fw_cmd_set_port(struct qlcnic_adapter *adapter, u32 config);\nint qlcnic_pci_mem_write_2M(struct qlcnic_adapter *, u64 off, u64 data);\nint qlcnic_pci_mem_read_2M(struct qlcnic_adapter *, u64 off, u64 *data);\n\n#define ADDR_IN_RANGE(addr, low, high)\t\\\n\t(((addr) < (high)) && ((addr) >= (low)))\n\n#define QLCRD32(adapter, off, err) \\\n\t(adapter->ahw->hw_ops->read_reg)(adapter, off, err)\n\n#define QLCWR32(adapter, off, val) \\\n\tadapter->ahw->hw_ops->write_reg(adapter, off, val)\n\nint qlcnic_pcie_sem_lock(struct qlcnic_adapter *, int, u32);\nvoid qlcnic_pcie_sem_unlock(struct qlcnic_adapter *, int);\n\n#define qlcnic_rom_lock(a)\t\\\n\tqlcnic_pcie_sem_lock((a), 2, QLCNIC_ROM_LOCK_ID)\n#define qlcnic_rom_unlock(a)\t\\\n\tqlcnic_pcie_sem_unlock((a), 2)\n#define qlcnic_phy_lock(a)\t\\\n\tqlcnic_pcie_sem_lock((a), 3, QLCNIC_PHY_LOCK_ID)\n#define qlcnic_phy_unlock(a)\t\\\n\tqlcnic_pcie_sem_unlock((a), 3)\n#define qlcnic_sw_lock(a)\t\\\n\tqlcnic_pcie_sem_lock((a), 6, 0)\n#define qlcnic_sw_unlock(a)\t\\\n\tqlcnic_pcie_sem_unlock((a), 6)\n#define crb_win_lock(a)\t\\\n\tqlcnic_pcie_sem_lock((a), 7, QLCNIC_CRB_WIN_LOCK_ID)\n#define crb_win_unlock(a)\t\\\n\tqlcnic_pcie_sem_unlock((a), 7)\n\n#define __QLCNIC_MAX_LED_RATE\t0xf\n#define __QLCNIC_MAX_LED_STATE\t0x2\n\n#define MAX_CTL_CHECK 1000\n\nvoid qlcnic_prune_lb_filters(struct qlcnic_adapter *adapter);\nvoid qlcnic_delete_lb_filters(struct qlcnic_adapter *adapter);\nint qlcnic_dump_fw(struct qlcnic_adapter *);\nint qlcnic_enable_fw_dump_state(struct qlcnic_adapter *);\nbool qlcnic_check_fw_dump_state(struct qlcnic_adapter *);\n\n \nvoid qlcnic_schedule_work(struct qlcnic_adapter *, work_func_t, int);\nint qlcnic_load_firmware(struct qlcnic_adapter *adapter);\nint qlcnic_need_fw_reset(struct qlcnic_adapter *adapter);\nvoid qlcnic_request_firmware(struct qlcnic_adapter *adapter);\nvoid qlcnic_release_firmware(struct qlcnic_adapter *adapter);\nint qlcnic_pinit_from_rom(struct qlcnic_adapter *adapter);\nint qlcnic_setup_idc_param(struct qlcnic_adapter *adapter);\nint qlcnic_check_flash_fw_ver(struct qlcnic_adapter *adapter);\n\nint qlcnic_rom_fast_read(struct qlcnic_adapter *adapter, u32 addr, u32 *valp);\nint qlcnic_rom_fast_read_words(struct qlcnic_adapter *adapter, int addr,\n\t\t\t\tu8 *bytes, size_t size);\nint qlcnic_alloc_sw_resources(struct qlcnic_adapter *adapter);\nvoid qlcnic_free_sw_resources(struct qlcnic_adapter *adapter);\n\nvoid __iomem *qlcnic_get_ioaddr(struct qlcnic_hardware_context *, u32);\n\nint qlcnic_alloc_hw_resources(struct qlcnic_adapter *adapter);\nvoid qlcnic_free_hw_resources(struct qlcnic_adapter *adapter);\n\nint qlcnic_fw_create_ctx(struct qlcnic_adapter *adapter);\nvoid qlcnic_fw_destroy_ctx(struct qlcnic_adapter *adapter);\n\nvoid qlcnic_reset_rx_buffers_list(struct qlcnic_adapter *adapter);\nvoid qlcnic_release_rx_buffers(struct qlcnic_adapter *adapter);\nvoid qlcnic_release_tx_buffers(struct qlcnic_adapter *,\n\t\t\t       struct qlcnic_host_tx_ring *);\n\nint qlcnic_check_fw_status(struct qlcnic_adapter *adapter);\nvoid qlcnic_watchdog_task(struct work_struct *work);\nvoid qlcnic_post_rx_buffers(struct qlcnic_adapter *adapter,\n\t\tstruct qlcnic_host_rds_ring *rds_ring, u8 ring_id);\nvoid qlcnic_set_multi(struct net_device *netdev);\nvoid qlcnic_flush_mcast_mac(struct qlcnic_adapter *);\nint qlcnic_nic_add_mac(struct qlcnic_adapter *, const u8 *, u16,\n\t\t       enum qlcnic_mac_type);\nint qlcnic_nic_del_mac(struct qlcnic_adapter *, const u8 *);\nvoid qlcnic_82xx_free_mac_list(struct qlcnic_adapter *adapter);\nint qlcnic_82xx_read_phys_port_id(struct qlcnic_adapter *);\n\nint qlcnic_fw_cmd_set_mtu(struct qlcnic_adapter *adapter, int mtu);\nint qlcnic_fw_cmd_set_drv_version(struct qlcnic_adapter *, u32);\nint qlcnic_change_mtu(struct net_device *netdev, int new_mtu);\nnetdev_features_t qlcnic_fix_features(struct net_device *netdev,\n\tnetdev_features_t features);\nint qlcnic_set_features(struct net_device *netdev, netdev_features_t features);\nint qlcnic_config_bridged_mode(struct qlcnic_adapter *adapter, u32 enable);\nvoid qlcnic_update_cmd_producer(struct qlcnic_host_tx_ring *);\n\n \nint qlcnic_check_loopback_buff(unsigned char *, u8 []);\nint qlcnic_do_lb_test(struct qlcnic_adapter *, u8);\n\n \nint qlcnic_reset_context(struct qlcnic_adapter *);\nvoid qlcnic_diag_free_res(struct net_device *netdev, int);\nint qlcnic_diag_alloc_res(struct net_device *netdev, int);\nnetdev_tx_t qlcnic_xmit_frame(struct sk_buff *, struct net_device *);\nvoid qlcnic_set_tx_ring_count(struct qlcnic_adapter *, u8);\nvoid qlcnic_set_sds_ring_count(struct qlcnic_adapter *, u8);\nint qlcnic_setup_rings(struct qlcnic_adapter *);\nint qlcnic_validate_rings(struct qlcnic_adapter *, __u32, int);\nvoid qlcnic_alloc_lb_filters_mem(struct qlcnic_adapter *adapter);\nint qlcnic_enable_msix(struct qlcnic_adapter *, u32);\nvoid qlcnic_set_drv_version(struct qlcnic_adapter *);\n\n \nint qlcnic_config_switch_port(struct qlcnic_adapter *,\n\t\t\t\tstruct qlcnic_esw_func_cfg *);\n\nint qlcnic_get_eswitch_port_config(struct qlcnic_adapter *,\n\t\t\t\tstruct qlcnic_esw_func_cfg *);\nint qlcnic_config_port_mirroring(struct qlcnic_adapter *, u8, u8, u8);\nint qlcnic_get_port_stats(struct qlcnic_adapter *, const u8, const u8,\n\t\t\t\t\tstruct __qlcnic_esw_statistics *);\nint qlcnic_get_eswitch_stats(struct qlcnic_adapter *, const u8, u8,\n\t\t\t\t\tstruct __qlcnic_esw_statistics *);\nint qlcnic_clear_esw_stats(struct qlcnic_adapter *adapter, u8, u8, u8);\nint qlcnic_get_mac_stats(struct qlcnic_adapter *, struct qlcnic_mac_statistics *);\n\nvoid qlcnic_free_mbx_args(struct qlcnic_cmd_args *cmd);\n\nint qlcnic_alloc_sds_rings(struct qlcnic_recv_context *, int);\nvoid qlcnic_free_sds_rings(struct qlcnic_recv_context *);\nvoid qlcnic_advert_link_change(struct qlcnic_adapter *, int);\nvoid qlcnic_free_tx_rings(struct qlcnic_adapter *);\nint qlcnic_alloc_tx_rings(struct qlcnic_adapter *, struct net_device *);\nvoid qlcnic_dump_mbx(struct qlcnic_adapter *, struct qlcnic_cmd_args *);\n\nvoid qlcnic_create_sysfs_entries(struct qlcnic_adapter *adapter);\nvoid qlcnic_remove_sysfs_entries(struct qlcnic_adapter *adapter);\nvoid qlcnic_82xx_add_sysfs(struct qlcnic_adapter *adapter);\nvoid qlcnic_82xx_remove_sysfs(struct qlcnic_adapter *adapter);\n\nint qlcnicvf_config_bridged_mode(struct qlcnic_adapter *, u32);\nint qlcnicvf_config_led(struct qlcnic_adapter *, u32, u32);\nvoid qlcnic_set_vlan_config(struct qlcnic_adapter *,\n\t\t\t    struct qlcnic_esw_func_cfg *);\nvoid qlcnic_set_eswitch_port_features(struct qlcnic_adapter *,\n\t\t\t\t      struct qlcnic_esw_func_cfg *);\nint qlcnic_setup_tss_rss_intr(struct qlcnic_adapter  *);\nvoid qlcnic_down(struct qlcnic_adapter *, struct net_device *);\nint qlcnic_up(struct qlcnic_adapter *, struct net_device *);\nvoid __qlcnic_down(struct qlcnic_adapter *, struct net_device *);\nvoid qlcnic_detach(struct qlcnic_adapter *);\nvoid qlcnic_teardown_intr(struct qlcnic_adapter *);\nint qlcnic_attach(struct qlcnic_adapter *);\nint __qlcnic_up(struct qlcnic_adapter *, struct net_device *);\nvoid qlcnic_restore_indev_addr(struct net_device *, unsigned long);\n\nint qlcnic_check_temp(struct qlcnic_adapter *);\nint qlcnic_init_pci_info(struct qlcnic_adapter *);\nint qlcnic_set_default_offload_settings(struct qlcnic_adapter *);\nint qlcnic_reset_npar_config(struct qlcnic_adapter *);\nint qlcnic_set_eswitch_port_config(struct qlcnic_adapter *);\nint qlcnic_set_vxlan_port(struct qlcnic_adapter *adapter, u16 port);\nint qlcnic_set_vxlan_parsing(struct qlcnic_adapter *adapter, u16 port);\nint qlcnic_83xx_configure_opmode(struct qlcnic_adapter *adapter);\nint qlcnic_read_mac_addr(struct qlcnic_adapter *);\nint qlcnic_setup_netdev(struct qlcnic_adapter *, struct net_device *);\nvoid qlcnic_set_netdev_features(struct qlcnic_adapter *,\n\t\t\t\tstruct qlcnic_esw_func_cfg *);\nvoid qlcnic_sriov_vf_set_multi(struct net_device *);\nint qlcnic_is_valid_nic_func(struct qlcnic_adapter *, u8);\nint qlcnic_get_pci_func_type(struct qlcnic_adapter *, u16, u16 *, u16 *,\n\t\t\t     u16 *);\n\n \n\n#define QLCNIC_MAX_BOARD_NAME_LEN 100\nstruct qlcnic_board_info {\n\tunsigned short  vendor;\n\tunsigned short  device;\n\tunsigned short  sub_vendor;\n\tunsigned short  sub_device;\n\tchar short_name[QLCNIC_MAX_BOARD_NAME_LEN];\n};\n\nstatic inline u32 qlcnic_tx_avail(struct qlcnic_host_tx_ring *tx_ring)\n{\n\tif (likely(tx_ring->producer < tx_ring->sw_consumer))\n\t\treturn tx_ring->sw_consumer - tx_ring->producer;\n\telse\n\t\treturn tx_ring->sw_consumer + tx_ring->num_desc -\n\t\t\t\ttx_ring->producer;\n}\n\nstruct qlcnic_nic_template {\n\tint (*config_bridged_mode) (struct qlcnic_adapter *, u32);\n\tint (*config_led) (struct qlcnic_adapter *, u32, u32);\n\tint (*start_firmware) (struct qlcnic_adapter *);\n\tint (*init_driver) (struct qlcnic_adapter *);\n\tvoid (*request_reset) (struct qlcnic_adapter *, u32);\n\tvoid (*cancel_idc_work) (struct qlcnic_adapter *);\n\tint (*napi_add)(struct qlcnic_adapter *, struct net_device *);\n\tvoid (*napi_del)(struct qlcnic_adapter *);\n\tvoid (*config_ipaddr)(struct qlcnic_adapter *, __be32, int);\n\tirqreturn_t (*clear_legacy_intr)(struct qlcnic_adapter *);\n\tint (*shutdown)(struct pci_dev *);\n\tint (*resume)(struct qlcnic_adapter *);\n};\n\nstruct qlcnic_mbx_ops {\n\tint (*enqueue_cmd) (struct qlcnic_adapter *,\n\t\t\t    struct qlcnic_cmd_args *, unsigned long *);\n\tvoid (*dequeue_cmd) (struct qlcnic_adapter *, struct qlcnic_cmd_args *);\n\tvoid (*decode_resp) (struct qlcnic_adapter *, struct qlcnic_cmd_args *);\n\tvoid (*encode_cmd) (struct qlcnic_adapter *, struct qlcnic_cmd_args *);\n\tvoid (*nofity_fw) (struct qlcnic_adapter *, u8);\n};\n\nint qlcnic_83xx_init_mailbox_work(struct qlcnic_adapter *);\nvoid qlcnic_83xx_detach_mailbox_work(struct qlcnic_adapter *);\nvoid qlcnic_83xx_reinit_mbx_work(struct qlcnic_mailbox *mbx);\nvoid qlcnic_83xx_free_mailbox(struct qlcnic_mailbox *mbx);\nvoid qlcnic_update_stats(struct qlcnic_adapter *);\n\n \nstruct qlcnic_hardware_ops {\n\tvoid (*read_crb) (struct qlcnic_adapter *, char *, loff_t, size_t);\n\tvoid (*write_crb) (struct qlcnic_adapter *, char *, loff_t, size_t);\n\tint (*read_reg) (struct qlcnic_adapter *, ulong, int *);\n\tint (*write_reg) (struct qlcnic_adapter *, ulong, u32);\n\tvoid (*get_ocm_win) (struct qlcnic_hardware_context *);\n\tint (*get_mac_address) (struct qlcnic_adapter *, u8 *, u8);\n\tint (*setup_intr) (struct qlcnic_adapter *);\n\tint (*alloc_mbx_args)(struct qlcnic_cmd_args *,\n\t\t\t      struct qlcnic_adapter *, u32);\n\tint (*mbx_cmd) (struct qlcnic_adapter *, struct qlcnic_cmd_args *);\n\tvoid (*get_func_no) (struct qlcnic_adapter *);\n\tint (*api_lock) (struct qlcnic_adapter *);\n\tvoid (*api_unlock) (struct qlcnic_adapter *);\n\tvoid (*add_sysfs) (struct qlcnic_adapter *);\n\tvoid (*remove_sysfs) (struct qlcnic_adapter *);\n\tvoid (*process_lb_rcv_ring_diag) (struct qlcnic_host_sds_ring *);\n\tint (*create_rx_ctx) (struct qlcnic_adapter *);\n\tint (*create_tx_ctx) (struct qlcnic_adapter *,\n\tstruct qlcnic_host_tx_ring *, int);\n\tvoid (*del_rx_ctx) (struct qlcnic_adapter *);\n\tvoid (*del_tx_ctx) (struct qlcnic_adapter *,\n\t\t\t    struct qlcnic_host_tx_ring *);\n\tint (*setup_link_event) (struct qlcnic_adapter *, int);\n\tint (*get_nic_info) (struct qlcnic_adapter *, struct qlcnic_info *, u8);\n\tint (*get_pci_info) (struct qlcnic_adapter *, struct qlcnic_pci_info *);\n\tint (*set_nic_info) (struct qlcnic_adapter *, struct qlcnic_info *);\n\tint (*change_macvlan) (struct qlcnic_adapter *, u8*, u16, u8);\n\tvoid (*napi_enable) (struct qlcnic_adapter *);\n\tvoid (*napi_disable) (struct qlcnic_adapter *);\n\tint (*config_intr_coal) (struct qlcnic_adapter *,\n\t\t\t\t struct ethtool_coalesce *);\n\tint (*config_rss) (struct qlcnic_adapter *, int);\n\tint (*config_hw_lro) (struct qlcnic_adapter *, int);\n\tint (*config_loopback) (struct qlcnic_adapter *, u8);\n\tint (*clear_loopback) (struct qlcnic_adapter *, u8);\n\tint (*config_promisc_mode) (struct qlcnic_adapter *, u32);\n\tvoid (*change_l2_filter)(struct qlcnic_adapter *adapter, u64 *addr,\n\t\t\t\t u16 vlan, struct qlcnic_host_tx_ring *tx_ring);\n\tint (*get_board_info) (struct qlcnic_adapter *);\n\tvoid (*set_mac_filter_count) (struct qlcnic_adapter *);\n\tvoid (*free_mac_list) (struct qlcnic_adapter *);\n\tint (*read_phys_port_id) (struct qlcnic_adapter *);\n\tpci_ers_result_t (*io_error_detected) (struct pci_dev *,\n\t\t\t\t\t       pci_channel_state_t);\n\tpci_ers_result_t (*io_slot_reset) (struct pci_dev *);\n\tvoid (*io_resume) (struct pci_dev *);\n\tvoid (*get_beacon_state)(struct qlcnic_adapter *);\n\tvoid (*enable_sds_intr) (struct qlcnic_adapter *,\n\t\t\t\t struct qlcnic_host_sds_ring *);\n\tvoid (*disable_sds_intr) (struct qlcnic_adapter *,\n\t\t\t\t  struct qlcnic_host_sds_ring *);\n\tvoid (*enable_tx_intr) (struct qlcnic_adapter *,\n\t\t\t\tstruct qlcnic_host_tx_ring *);\n\tvoid (*disable_tx_intr) (struct qlcnic_adapter *,\n\t\t\t\t struct qlcnic_host_tx_ring *);\n\tu32 (*get_saved_state)(void *, u32);\n\tvoid (*set_saved_state)(void *, u32, u32);\n\tvoid (*cache_tmpl_hdr_values)(struct qlcnic_fw_dump *);\n\tu32 (*get_cap_size)(void *, int);\n\tvoid (*set_sys_info)(void *, int, u32);\n\tvoid (*store_cap_mask)(void *, u32);\n\tbool (*encap_rx_offload) (struct qlcnic_adapter *adapter);\n\tbool (*encap_tx_offload) (struct qlcnic_adapter *adapter);\n};\n\nextern struct qlcnic_nic_template qlcnic_vf_ops;\n\nstatic inline bool qlcnic_83xx_encap_tx_offload(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->extra_capability[0] &\n\t       QLCNIC_83XX_FW_CAPAB_ENCAP_TX_OFFLOAD;\n}\n\nstatic inline bool qlcnic_83xx_encap_rx_offload(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->extra_capability[0] &\n\t       QLCNIC_83XX_FW_CAPAB_ENCAP_RX_OFFLOAD;\n}\n\nstatic inline bool qlcnic_82xx_encap_tx_offload(struct qlcnic_adapter *adapter)\n{\n\treturn false;\n}\n\nstatic inline bool qlcnic_82xx_encap_rx_offload(struct qlcnic_adapter *adapter)\n{\n        return false;\n}\n\nstatic inline bool qlcnic_encap_rx_offload(struct qlcnic_adapter *adapter)\n{\n        return adapter->ahw->hw_ops->encap_rx_offload(adapter);\n}\n\nstatic inline bool qlcnic_encap_tx_offload(struct qlcnic_adapter *adapter)\n{\n        return adapter->ahw->hw_ops->encap_tx_offload(adapter);\n}\n\nstatic inline int qlcnic_start_firmware(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->nic_ops->start_firmware(adapter);\n}\n\nstatic inline void qlcnic_read_crb(struct qlcnic_adapter *adapter, char *buf,\n\t\t\t\t   loff_t offset, size_t size)\n{\n\tadapter->ahw->hw_ops->read_crb(adapter, buf, offset, size);\n}\n\nstatic inline void qlcnic_write_crb(struct qlcnic_adapter *adapter, char *buf,\n\t\t\t\t    loff_t offset, size_t size)\n{\n\tadapter->ahw->hw_ops->write_crb(adapter, buf, offset, size);\n}\n\nstatic inline int qlcnic_get_mac_address(struct qlcnic_adapter *adapter,\n\t\t\t\t\t u8 *mac, u8 function)\n{\n\treturn adapter->ahw->hw_ops->get_mac_address(adapter, mac, function);\n}\n\nstatic inline int qlcnic_setup_intr(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->setup_intr(adapter);\n}\n\nstatic inline int qlcnic_alloc_mbx_args(struct qlcnic_cmd_args *mbx,\n\t\t\t\t\tstruct qlcnic_adapter *adapter, u32 arg)\n{\n\treturn adapter->ahw->hw_ops->alloc_mbx_args(mbx, adapter, arg);\n}\n\nstatic inline int qlcnic_issue_cmd(struct qlcnic_adapter *adapter,\n\t\t\t\t   struct qlcnic_cmd_args *cmd)\n{\n\tif (adapter->ahw->hw_ops->mbx_cmd)\n\t\treturn adapter->ahw->hw_ops->mbx_cmd(adapter, cmd);\n\n\treturn -EIO;\n}\n\nstatic inline void qlcnic_get_func_no(struct qlcnic_adapter *adapter)\n{\n\tadapter->ahw->hw_ops->get_func_no(adapter);\n}\n\nstatic inline int qlcnic_api_lock(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->api_lock(adapter);\n}\n\nstatic inline void qlcnic_api_unlock(struct qlcnic_adapter *adapter)\n{\n\tadapter->ahw->hw_ops->api_unlock(adapter);\n}\n\nstatic inline void qlcnic_add_sysfs(struct qlcnic_adapter *adapter)\n{\n\tif (adapter->ahw->hw_ops->add_sysfs)\n\t\tadapter->ahw->hw_ops->add_sysfs(adapter);\n}\n\nstatic inline void qlcnic_remove_sysfs(struct qlcnic_adapter *adapter)\n{\n\tif (adapter->ahw->hw_ops->remove_sysfs)\n\t\tadapter->ahw->hw_ops->remove_sysfs(adapter);\n}\n\nstatic inline void\nqlcnic_process_rcv_ring_diag(struct qlcnic_host_sds_ring *sds_ring)\n{\n\tsds_ring->adapter->ahw->hw_ops->process_lb_rcv_ring_diag(sds_ring);\n}\n\nstatic inline int qlcnic_fw_cmd_create_rx_ctx(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->create_rx_ctx(adapter);\n}\n\nstatic inline int qlcnic_fw_cmd_create_tx_ctx(struct qlcnic_adapter *adapter,\n\t\t\t\t\t      struct qlcnic_host_tx_ring *ptr,\n\t\t\t\t\t      int ring)\n{\n\treturn adapter->ahw->hw_ops->create_tx_ctx(adapter, ptr, ring);\n}\n\nstatic inline void qlcnic_fw_cmd_del_rx_ctx(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->del_rx_ctx(adapter);\n}\n\nstatic inline void qlcnic_fw_cmd_del_tx_ctx(struct qlcnic_adapter *adapter,\n\t\t\t\t\t    struct qlcnic_host_tx_ring *ptr)\n{\n\treturn adapter->ahw->hw_ops->del_tx_ctx(adapter, ptr);\n}\n\nstatic inline int qlcnic_linkevent_request(struct qlcnic_adapter *adapter,\n\t\t\t\t\t   int enable)\n{\n\treturn adapter->ahw->hw_ops->setup_link_event(adapter, enable);\n}\n\nstatic inline int qlcnic_get_nic_info(struct qlcnic_adapter *adapter,\n\t\t\t\t      struct qlcnic_info *info, u8 id)\n{\n\treturn adapter->ahw->hw_ops->get_nic_info(adapter, info, id);\n}\n\nstatic inline int qlcnic_get_pci_info(struct qlcnic_adapter *adapter,\n\t\t\t\t      struct qlcnic_pci_info *info)\n{\n\treturn adapter->ahw->hw_ops->get_pci_info(adapter, info);\n}\n\nstatic inline int qlcnic_set_nic_info(struct qlcnic_adapter *adapter,\n\t\t\t\t      struct qlcnic_info *info)\n{\n\treturn adapter->ahw->hw_ops->set_nic_info(adapter, info);\n}\n\nstatic inline int qlcnic_sre_macaddr_change(struct qlcnic_adapter *adapter,\n\t\t\t\t\t    u8 *addr, u16 id, u8 cmd)\n{\n\treturn adapter->ahw->hw_ops->change_macvlan(adapter, addr, id, cmd);\n}\n\nstatic inline int qlcnic_napi_add(struct qlcnic_adapter *adapter,\n\t\t\t\t  struct net_device *netdev)\n{\n\treturn adapter->nic_ops->napi_add(adapter, netdev);\n}\n\nstatic inline void qlcnic_napi_del(struct qlcnic_adapter *adapter)\n{\n\tadapter->nic_ops->napi_del(adapter);\n}\n\nstatic inline void qlcnic_napi_enable(struct qlcnic_adapter *adapter)\n{\n\tadapter->ahw->hw_ops->napi_enable(adapter);\n}\n\nstatic inline int __qlcnic_shutdown(struct pci_dev *pdev)\n{\n\tstruct qlcnic_adapter *adapter = pci_get_drvdata(pdev);\n\n\treturn adapter->nic_ops->shutdown(pdev);\n}\n\nstatic inline int __qlcnic_resume(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->nic_ops->resume(adapter);\n}\n\nstatic inline void qlcnic_napi_disable(struct qlcnic_adapter *adapter)\n{\n\tadapter->ahw->hw_ops->napi_disable(adapter);\n}\n\nstatic inline int qlcnic_config_intr_coalesce(struct qlcnic_adapter *adapter,\n\t\t\t\t\t      struct ethtool_coalesce *ethcoal)\n{\n\treturn adapter->ahw->hw_ops->config_intr_coal(adapter, ethcoal);\n}\n\nstatic inline int qlcnic_config_rss(struct qlcnic_adapter *adapter, int enable)\n{\n\treturn adapter->ahw->hw_ops->config_rss(adapter, enable);\n}\n\nstatic inline int qlcnic_config_hw_lro(struct qlcnic_adapter *adapter,\n\t\t\t\t       int enable)\n{\n\treturn adapter->ahw->hw_ops->config_hw_lro(adapter, enable);\n}\n\nstatic inline int qlcnic_set_lb_mode(struct qlcnic_adapter *adapter, u8 mode)\n{\n\treturn adapter->ahw->hw_ops->config_loopback(adapter, mode);\n}\n\nstatic inline int qlcnic_clear_lb_mode(struct qlcnic_adapter *adapter, u8 mode)\n{\n\treturn adapter->ahw->hw_ops->clear_loopback(adapter, mode);\n}\n\nstatic inline int qlcnic_nic_set_promisc(struct qlcnic_adapter *adapter,\n\t\t\t\t\t u32 mode)\n{\n\treturn adapter->ahw->hw_ops->config_promisc_mode(adapter, mode);\n}\n\nstatic inline void qlcnic_change_filter(struct qlcnic_adapter *adapter,\n\t\t\t\t\tu64 *addr, u16 vlan,\n\t\t\t\t\tstruct qlcnic_host_tx_ring *tx_ring)\n{\n\tadapter->ahw->hw_ops->change_l2_filter(adapter, addr, vlan, tx_ring);\n}\n\nstatic inline int qlcnic_get_board_info(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->get_board_info(adapter);\n}\n\nstatic inline void qlcnic_free_mac_list(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->ahw->hw_ops->free_mac_list(adapter);\n}\n\nstatic inline void qlcnic_set_mac_filter_count(struct qlcnic_adapter *adapter)\n{\n\tif (adapter->ahw->hw_ops->set_mac_filter_count)\n\t\tadapter->ahw->hw_ops->set_mac_filter_count(adapter);\n}\n\nstatic inline void qlcnic_get_beacon_state(struct qlcnic_adapter *adapter)\n{\n\tadapter->ahw->hw_ops->get_beacon_state(adapter);\n}\n\nstatic inline void qlcnic_read_phys_port_id(struct qlcnic_adapter *adapter)\n{\n\tif (adapter->ahw->hw_ops->read_phys_port_id)\n\t\tadapter->ahw->hw_ops->read_phys_port_id(adapter);\n}\n\nstatic inline u32 qlcnic_get_saved_state(struct qlcnic_adapter *adapter,\n\t\t\t\t\t void *t_hdr, u32 index)\n{\n\treturn adapter->ahw->hw_ops->get_saved_state(t_hdr, index);\n}\n\nstatic inline void qlcnic_set_saved_state(struct qlcnic_adapter *adapter,\n\t\t\t\t\t  void *t_hdr, u32 index, u32 value)\n{\n\tadapter->ahw->hw_ops->set_saved_state(t_hdr, index, value);\n}\n\nstatic inline void qlcnic_cache_tmpl_hdr_values(struct qlcnic_adapter *adapter,\n\t\t\t\t\t\tstruct qlcnic_fw_dump *fw_dump)\n{\n\tadapter->ahw->hw_ops->cache_tmpl_hdr_values(fw_dump);\n}\n\nstatic inline u32 qlcnic_get_cap_size(struct qlcnic_adapter *adapter,\n\t\t\t\t      void *tmpl_hdr, int index)\n{\n\treturn adapter->ahw->hw_ops->get_cap_size(tmpl_hdr, index);\n}\n\nstatic inline void qlcnic_set_sys_info(struct qlcnic_adapter *adapter,\n\t\t\t\t       void *tmpl_hdr, int idx, u32 value)\n{\n\tadapter->ahw->hw_ops->set_sys_info(tmpl_hdr, idx, value);\n}\n\nstatic inline void qlcnic_store_cap_mask(struct qlcnic_adapter *adapter,\n\t\t\t\t\t void *tmpl_hdr, u32 mask)\n{\n\tadapter->ahw->hw_ops->store_cap_mask(tmpl_hdr, mask);\n}\n\nstatic inline void qlcnic_dev_request_reset(struct qlcnic_adapter *adapter,\n\t\t\t\t\t    u32 key)\n{\n\tif (adapter->nic_ops->request_reset)\n\t\tadapter->nic_ops->request_reset(adapter, key);\n}\n\nstatic inline void qlcnic_cancel_idc_work(struct qlcnic_adapter *adapter)\n{\n\tif (adapter->nic_ops->cancel_idc_work)\n\t\tadapter->nic_ops->cancel_idc_work(adapter);\n}\n\nstatic inline irqreturn_t\nqlcnic_clear_legacy_intr(struct qlcnic_adapter *adapter)\n{\n\treturn adapter->nic_ops->clear_legacy_intr(adapter);\n}\n\nstatic inline int qlcnic_config_led(struct qlcnic_adapter *adapter, u32 state,\n\t\t\t\t    u32 rate)\n{\n\treturn adapter->nic_ops->config_led(adapter, state, rate);\n}\n\nstatic inline void qlcnic_config_ipaddr(struct qlcnic_adapter *adapter,\n\t\t\t\t\t__be32 ip, int cmd)\n{\n\tadapter->nic_ops->config_ipaddr(adapter, ip, cmd);\n}\n\nstatic inline bool qlcnic_check_multi_tx(struct qlcnic_adapter *adapter)\n{\n\treturn test_bit(__QLCNIC_MULTI_TX_UNIQUE, &adapter->state);\n}\n\nstatic inline void\nqlcnic_82xx_enable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t   struct qlcnic_host_tx_ring *tx_ring)\n{\n\tif (qlcnic_check_multi_tx(adapter) &&\n\t    !adapter->ahw->diag_test)\n\t\twritel(0x0, tx_ring->crb_intr_mask);\n}\n\nstatic inline void\nqlcnic_82xx_disable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t    struct qlcnic_host_tx_ring *tx_ring)\n{\n\tif (qlcnic_check_multi_tx(adapter) &&\n\t    !adapter->ahw->diag_test)\n\t\twritel(1, tx_ring->crb_intr_mask);\n}\n\nstatic inline void\nqlcnic_83xx_enable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t   struct qlcnic_host_tx_ring *tx_ring)\n{\n\twritel(0, tx_ring->crb_intr_mask);\n}\n\nstatic inline void\nqlcnic_83xx_disable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t    struct qlcnic_host_tx_ring *tx_ring)\n{\n\twritel(1, tx_ring->crb_intr_mask);\n}\n\n \nstatic inline void\nqlcnic_83xx_enable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\t    struct qlcnic_host_sds_ring *sds_ring)\n{\n\twritel(0, sds_ring->crb_intr_mask);\n}\n\n \nstatic inline void\nqlcnic_83xx_disable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\t     struct qlcnic_host_sds_ring *sds_ring)\n{\n\twritel(1, sds_ring->crb_intr_mask);\n}\n\nstatic inline void qlcnic_disable_multi_tx(struct qlcnic_adapter *adapter)\n{\n\ttest_and_clear_bit(__QLCNIC_MULTI_TX_UNIQUE, &adapter->state);\n\tadapter->drv_tx_rings = QLCNIC_SINGLE_RING;\n}\n\n \nstatic inline void\nqlcnic_82xx_disable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\t     struct qlcnic_host_sds_ring *sds_ring)\n{\n\tif (qlcnic_check_multi_tx(adapter) &&\n\t    !adapter->ahw->diag_test &&\n\t    (adapter->flags & QLCNIC_MSIX_ENABLED))\n\t\twritel(0x1, sds_ring->crb_intr_mask);\n\telse\n\t\twritel(0, sds_ring->crb_intr_mask);\n}\n\nstatic inline void qlcnic_enable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\t\t\t  struct qlcnic_host_sds_ring *sds_ring)\n{\n\tif (adapter->ahw->hw_ops->enable_sds_intr)\n\t\tadapter->ahw->hw_ops->enable_sds_intr(adapter, sds_ring);\n}\n\nstatic inline void\nqlcnic_disable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\tstruct qlcnic_host_sds_ring *sds_ring)\n{\n\tif (adapter->ahw->hw_ops->disable_sds_intr)\n\t\tadapter->ahw->hw_ops->disable_sds_intr(adapter, sds_ring);\n}\n\nstatic inline void qlcnic_enable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t\t\t struct qlcnic_host_tx_ring *tx_ring)\n{\n\tif (adapter->ahw->hw_ops->enable_tx_intr)\n\t\tadapter->ahw->hw_ops->enable_tx_intr(adapter, tx_ring);\n}\n\nstatic inline void qlcnic_disable_tx_intr(struct qlcnic_adapter *adapter,\n\t\t\t\t\t  struct qlcnic_host_tx_ring *tx_ring)\n{\n\tif (adapter->ahw->hw_ops->disable_tx_intr)\n\t\tadapter->ahw->hw_ops->disable_tx_intr(adapter, tx_ring);\n}\n\n \nstatic inline void\nqlcnic_82xx_enable_sds_intr(struct qlcnic_adapter *adapter,\n\t\t\t    struct qlcnic_host_sds_ring *sds_ring)\n{\n\tif (qlcnic_check_multi_tx(adapter) &&\n\t    !adapter->ahw->diag_test &&\n\t    (adapter->flags & QLCNIC_MSIX_ENABLED))\n\t\twritel(0, sds_ring->crb_intr_mask);\n\telse\n\t\twritel(0x1, sds_ring->crb_intr_mask);\n\n\tif (!QLCNIC_IS_MSI_FAMILY(adapter))\n\t\twritel(0xfbff, adapter->tgt_mask_reg);\n}\n\nstatic inline int qlcnic_get_diag_lock(struct qlcnic_adapter *adapter)\n{\n\treturn test_and_set_bit(__QLCNIC_DIAG_MODE, &adapter->state);\n}\n\nstatic inline void qlcnic_release_diag_lock(struct qlcnic_adapter *adapter)\n{\n\tclear_bit(__QLCNIC_DIAG_MODE, &adapter->state);\n}\n\nstatic inline int qlcnic_check_diag_status(struct qlcnic_adapter *adapter)\n{\n\treturn test_bit(__QLCNIC_DIAG_MODE, &adapter->state);\n}\n\nextern const struct ethtool_ops qlcnic_sriov_vf_ethtool_ops;\nextern const struct ethtool_ops qlcnic_ethtool_ops;\nextern const struct ethtool_ops qlcnic_ethtool_failed_ops;\n\n#define QLCDB(adapter, lvl, _fmt, _args...) do {\t\\\n\tif (NETIF_MSG_##lvl & adapter->ahw->msg_enable)\t\\\n\t\tprintk(KERN_INFO \"%s: %s: \" _fmt,\t\\\n\t\t\t dev_name(&adapter->pdev->dev),\t\\\n\t\t\t__func__, ##_args);\t\t\\\n\t} while (0)\n\n#define PCI_DEVICE_ID_QLOGIC_QLE824X\t\t0x8020\n#define PCI_DEVICE_ID_QLOGIC_QLE834X\t\t0x8030\n#define PCI_DEVICE_ID_QLOGIC_VF_QLE834X\t0x8430\n#define PCI_DEVICE_ID_QLOGIC_QLE8830\t\t0x8830\n#define PCI_DEVICE_ID_QLOGIC_VF_QLE8C30\t\t0x8C30\n#define PCI_DEVICE_ID_QLOGIC_QLE844X\t\t0x8040\n#define PCI_DEVICE_ID_QLOGIC_VF_QLE844X\t0x8440\n\nstatic inline bool qlcnic_82xx_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\treturn (device == PCI_DEVICE_ID_QLOGIC_QLE824X) ? true : false;\n}\n\nstatic inline bool qlcnic_84xx_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\n\treturn ((device == PCI_DEVICE_ID_QLOGIC_QLE844X) ||\n\t\t(device == PCI_DEVICE_ID_QLOGIC_VF_QLE844X)) ? true : false;\n}\n\nstatic inline bool qlcnic_83xx_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\tbool status;\n\n\tstatus = ((device == PCI_DEVICE_ID_QLOGIC_QLE834X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_QLE8830) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_QLE844X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_VF_QLE844X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_VF_QLE834X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_VF_QLE8C30)) ? true : false;\n\n\treturn status;\n}\n\nstatic inline bool qlcnic_sriov_pf_check(struct qlcnic_adapter *adapter)\n{\n\treturn (adapter->ahw->op_mode == QLCNIC_SRIOV_PF_FUNC) ? true : false;\n}\n\nstatic inline bool qlcnic_sriov_vf_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\tbool status;\n\n\tstatus = ((device == PCI_DEVICE_ID_QLOGIC_VF_QLE834X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_VF_QLE844X) ||\n\t\t  (device == PCI_DEVICE_ID_QLOGIC_VF_QLE8C30)) ? true : false;\n\n\treturn status;\n}\n\nstatic inline bool qlcnic_83xx_pf_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\n\treturn (device == PCI_DEVICE_ID_QLOGIC_QLE834X) ? true : false;\n}\n\nstatic inline bool qlcnic_83xx_vf_check(struct qlcnic_adapter *adapter)\n{\n\tunsigned short device = adapter->pdev->device;\n\n\treturn ((device == PCI_DEVICE_ID_QLOGIC_VF_QLE834X) ||\n\t\t(device == PCI_DEVICE_ID_QLOGIC_VF_QLE8C30)) ? true : false;\n}\n\nstatic inline bool qlcnic_sriov_check(struct qlcnic_adapter *adapter)\n{\n\tbool status;\n\n\tstatus = (qlcnic_sriov_pf_check(adapter) ||\n\t\t  qlcnic_sriov_vf_check(adapter)) ? true : false;\n\n\treturn status;\n}\n\nstatic inline u32 qlcnic_get_vnic_func_count(struct qlcnic_adapter *adapter)\n{\n\tif (qlcnic_84xx_check(adapter))\n\t\treturn QLC_84XX_VNIC_COUNT;\n\telse\n\t\treturn QLC_DEFAULT_VNIC_COUNT;\n}\n\nstatic inline void qlcnic_swap32_buffer(u32 *buffer, int count)\n{\n#if defined(__BIG_ENDIAN)\n\tu32 *tmp = buffer;\n\tint i;\n\n\tfor (i = 0; i < count; i++) {\n\t\t*tmp = swab32(*tmp);\n\t\ttmp++;\n\t}\n#endif\n}\n\n#ifdef CONFIG_QLCNIC_HWMON\nvoid qlcnic_register_hwmon_dev(struct qlcnic_adapter *);\nvoid qlcnic_unregister_hwmon_dev(struct qlcnic_adapter *);\n#else\nstatic inline void qlcnic_register_hwmon_dev(struct qlcnic_adapter *adapter)\n{\n\treturn;\n}\nstatic inline void qlcnic_unregister_hwmon_dev(struct qlcnic_adapter *adapter)\n{\n\treturn;\n}\n#endif\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}