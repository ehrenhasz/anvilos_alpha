{
  "module_name": "qed_l2.h",
  "hash_id": "1f8924580cf2851809d7c9f2e035144bd5880096c0c82ee34c8863d6cc0ab5f4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/qlogic/qed/qed_l2.h",
  "human_readable_source": " \n \n\n#ifndef _QED_L2_H\n#define _QED_L2_H\n#include <linux/types.h>\n#include <linux/io.h>\n#include <linux/kernel.h>\n#include <linux/slab.h>\n#include <linux/qed/qed_eth_if.h>\n#include \"qed.h\"\n#include \"qed_hw.h\"\n#include \"qed_sp.h\"\nstruct qed_rss_params {\n\tu8 update_rss_config;\n\tu8 rss_enable;\n\tu8 rss_eng_id;\n\tu8 update_rss_capabilities;\n\tu8 update_rss_ind_table;\n\tu8 update_rss_key;\n\tu8 rss_caps;\n\tu8 rss_table_size_log;\n\n\t \n\tvoid *rss_ind_table[QED_RSS_IND_TABLE_SIZE];\n\tu32 rss_key[QED_RSS_KEY_SIZE];\n};\n\nstruct qed_sge_tpa_params {\n\tu8 max_buffers_per_cqe;\n\n\tu8 update_tpa_en_flg;\n\tu8 tpa_ipv4_en_flg;\n\tu8 tpa_ipv6_en_flg;\n\tu8 tpa_ipv4_tunn_en_flg;\n\tu8 tpa_ipv6_tunn_en_flg;\n\n\tu8 update_tpa_param_flg;\n\tu8 tpa_pkt_split_flg;\n\tu8 tpa_hdr_data_split_flg;\n\tu8 tpa_gro_consistent_flg;\n\tu8 tpa_max_aggs_num;\n\tu16 tpa_max_size;\n\tu16 tpa_min_size_to_start;\n\tu16 tpa_min_size_to_cont;\n};\n\nenum qed_filter_opcode {\n\tQED_FILTER_ADD,\n\tQED_FILTER_REMOVE,\n\tQED_FILTER_MOVE,\n\tQED_FILTER_REPLACE,\t \n\tQED_FILTER_FLUSH,\t \n};\n\nenum qed_filter_ucast_type {\n\tQED_FILTER_MAC,\n\tQED_FILTER_VLAN,\n\tQED_FILTER_MAC_VLAN,\n\tQED_FILTER_INNER_MAC,\n\tQED_FILTER_INNER_VLAN,\n\tQED_FILTER_INNER_PAIR,\n\tQED_FILTER_INNER_MAC_VNI_PAIR,\n\tQED_FILTER_MAC_VNI_PAIR,\n\tQED_FILTER_VNI,\n};\n\nstruct qed_filter_ucast {\n\tenum qed_filter_opcode opcode;\n\tenum qed_filter_ucast_type type;\n\tu8 is_rx_filter;\n\tu8 is_tx_filter;\n\tu8 vport_to_add_to;\n\tu8 vport_to_remove_from;\n\tunsigned char mac[ETH_ALEN];\n\tu8 assert_on_error;\n\tu16 vlan;\n\tu32 vni;\n};\n\nstruct qed_filter_mcast {\n\t \n\tenum qed_filter_opcode opcode;\n\tu8 vport_to_add_to;\n\tu8 vport_to_remove_from;\n\tu8 num_mc_addrs;\n#define QED_MAX_MC_ADDRS        64\n\tunsigned char mac[QED_MAX_MC_ADDRS][ETH_ALEN];\n};\n\n \nint\nqed_eth_rx_queue_stop(struct qed_hwfn *p_hwfn,\n\t\t      void *p_rxq,\n\t\t      bool eq_completion_only, bool cqe_completion);\n\n \nint qed_eth_tx_queue_stop(struct qed_hwfn *p_hwfn, void *p_txq);\n\nenum qed_tpa_mode {\n\tQED_TPA_MODE_NONE,\n\tQED_TPA_MODE_UNUSED,\n\tQED_TPA_MODE_GRO,\n\tQED_TPA_MODE_MAX\n};\n\nstruct qed_sp_vport_start_params {\n\tenum qed_tpa_mode tpa_mode;\n\tbool remove_inner_vlan;\n\tbool tx_switching;\n\tbool handle_ptp_pkts;\n\tbool only_untagged;\n\tbool drop_ttl0;\n\tu8 max_buffers_per_cqe;\n\tu32 concrete_fid;\n\tu16 opaque_fid;\n\tu8 vport_id;\n\tu16 mtu;\n\tbool check_mac;\n\tbool check_ethtype;\n};\n\nint qed_sp_eth_vport_start(struct qed_hwfn *p_hwfn,\n\t\t\t   struct qed_sp_vport_start_params *p_params);\n\nstruct qed_filter_accept_flags {\n\tu8\tupdate_rx_mode_config;\n\tu8\tupdate_tx_mode_config;\n\tu8\trx_accept_filter;\n\tu8\ttx_accept_filter;\n#define QED_ACCEPT_NONE         0x01\n#define QED_ACCEPT_UCAST_MATCHED        0x02\n#define QED_ACCEPT_UCAST_UNMATCHED      0x04\n#define QED_ACCEPT_MCAST_MATCHED        0x08\n#define QED_ACCEPT_MCAST_UNMATCHED      0x10\n#define QED_ACCEPT_BCAST                0x20\n#define QED_ACCEPT_ANY_VNI              0x40\n};\n\nstruct qed_arfs_config_params {\n\tbool tcp;\n\tbool udp;\n\tbool ipv4;\n\tbool ipv6;\n\tenum qed_filter_config_mode mode;\n};\n\nstruct qed_sp_vport_update_params {\n\tu16\t\t\t\topaque_fid;\n\tu8\t\t\t\tvport_id;\n\tu8\t\t\t\tupdate_vport_active_rx_flg;\n\tu8\t\t\t\tvport_active_rx_flg;\n\tu8\t\t\t\tupdate_vport_active_tx_flg;\n\tu8\t\t\t\tvport_active_tx_flg;\n\tu8\t\t\t\tupdate_inner_vlan_removal_flg;\n\tu8\t\t\t\tinner_vlan_removal_flg;\n\tu8\t\t\t\tsilent_vlan_removal_flg;\n\tu8\t\t\t\tupdate_default_vlan_enable_flg;\n\tu8\t\t\t\tdefault_vlan_enable_flg;\n\tu8\t\t\t\tupdate_default_vlan_flg;\n\tu16\t\t\t\tdefault_vlan;\n\tu8\t\t\t\tupdate_tx_switching_flg;\n\tu8\t\t\t\ttx_switching_flg;\n\tu8\t\t\t\tupdate_approx_mcast_flg;\n\tu8\t\t\t\tupdate_anti_spoofing_en_flg;\n\tu8\t\t\t\tanti_spoofing_en;\n\tu8\t\t\t\tupdate_accept_any_vlan_flg;\n\tu8\t\t\t\taccept_any_vlan;\n\tu32\t\t\t\tbins[8];\n\tstruct qed_rss_params\t\t*rss_params;\n\tstruct qed_filter_accept_flags\taccept_flags;\n\tstruct qed_sge_tpa_params\t*sge_tpa_params;\n\tu8\t\t\t\tupdate_ctl_frame_check;\n\tu8\t\t\t\tmac_chk_en;\n\tu8\t\t\t\tethtype_chk_en;\n};\n\nint qed_sp_vport_update(struct qed_hwfn *p_hwfn,\n\t\t\tstruct qed_sp_vport_update_params *p_params,\n\t\t\tenum spq_mode comp_mode,\n\t\t\tstruct qed_spq_comp_cb *p_comp_data);\n\n \nint qed_sp_vport_stop(struct qed_hwfn *p_hwfn, u16 opaque_fid, u8 vport_id);\n\nint qed_sp_eth_filter_ucast(struct qed_hwfn *p_hwfn,\n\t\t\t    u16 opaque_fid,\n\t\t\t    struct qed_filter_ucast *p_filter_cmd,\n\t\t\t    enum spq_mode comp_mode,\n\t\t\t    struct qed_spq_comp_cb *p_comp_data);\n\n \n\nint\nqed_sp_eth_rx_queues_update(struct qed_hwfn *p_hwfn,\n\t\t\t    void **pp_rxq_handlers,\n\t\t\t    u8 num_rxqs,\n\t\t\t    u8 complete_cqe_flg,\n\t\t\t    u8 complete_event_flg,\n\t\t\t    enum spq_mode comp_mode,\n\t\t\t    struct qed_spq_comp_cb *p_comp_data);\n\n \nvoid qed_get_vport_stats(struct qed_dev *cdev, struct qed_eth_stats *stats);\n\n \nvoid qed_get_vport_stats_context(struct qed_dev *cdev,\n\t\t\t\t struct qed_eth_stats *stats,\n\t\t\t\t bool is_atomic);\n\nvoid qed_reset_vport_stats(struct qed_dev *cdev);\n\n \nvoid qed_arfs_mode_configure(struct qed_hwfn *p_hwfn,\n\t\t\t     struct qed_ptt *p_ptt,\n\t\t\t     struct qed_arfs_config_params *p_cfg_params);\n\n \nint\nqed_configure_rfs_ntuple_filter(struct qed_hwfn *p_hwfn,\n\t\t\t\tstruct qed_spq_comp_cb *p_cb,\n\t\t\t\tstruct qed_ntuple_filter_params *p_params);\n\n#define MAX_QUEUES_PER_QZONE    (sizeof(unsigned long) * 8)\n#define QED_QUEUE_CID_SELF\t(0xff)\n\n \nstruct qed_queue_cid_params {\n\tu8 vport_id;\n\tu16 queue_id;\n\tu8 stats_id;\n};\n\n \nstruct qed_queue_cid_vf_params {\n\t \n\tu8 vfid;\n\n\t \n\tu8 vf_qid;\n\n\t \n\tu8 vf_legacy;\n\n\tu8 qid_usage_idx;\n};\n\nstruct qed_queue_cid {\n\t \n\tstruct qed_queue_cid_params rel;\n\tstruct qed_queue_cid_params abs;\n\n\t \n\tu16 sb_igu_id;\n\tu8 sb_idx;\n\n\tu32 cid;\n\tu16 opaque_fid;\n\n\tbool b_is_rx;\n\n\t \n\tu8 vfid;\n\tu8 vf_qid;\n\n\t \n\tu8 qid_usage_idx;\n\n\tu8 vf_legacy;\n#define QED_QCID_LEGACY_VF_RX_PROD\t(BIT(0))\n#define QED_QCID_LEGACY_VF_CID\t\t(BIT(1))\n\n\tstruct qed_hwfn *p_owner;\n};\n\nint qed_l2_alloc(struct qed_hwfn *p_hwfn);\nvoid qed_l2_setup(struct qed_hwfn *p_hwfn);\nvoid qed_l2_free(struct qed_hwfn *p_hwfn);\n\nvoid qed_eth_queue_cid_release(struct qed_hwfn *p_hwfn,\n\t\t\t       struct qed_queue_cid *p_cid);\n\nstruct qed_queue_cid *\nqed_eth_queue_to_cid(struct qed_hwfn *p_hwfn,\n\t\t     u16 opaque_fid,\n\t\t     struct qed_queue_start_common_params *p_params,\n\t\t     bool b_is_rx,\n\t\t     struct qed_queue_cid_vf_params *p_vf_params);\n\nint\nqed_sp_eth_vport_start(struct qed_hwfn *p_hwfn,\n\t\t       struct qed_sp_vport_start_params *p_params);\n\n \nint\nqed_eth_rxq_start_ramrod(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_queue_cid *p_cid,\n\t\t\t u16 bd_max_bytes,\n\t\t\t dma_addr_t bd_chain_phys_addr,\n\t\t\t dma_addr_t cqe_pbl_addr, u16 cqe_pbl_size);\n\n \nint\nqed_eth_txq_start_ramrod(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_queue_cid *p_cid,\n\t\t\t dma_addr_t pbl_addr, u16 pbl_size, u16 pq_id);\n\nu8 qed_mcast_bin_from_mac(u8 *mac);\n\nint qed_set_rxq_coalesce(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_ptt *p_ptt,\n\t\t\t u16 coalesce, struct qed_queue_cid *p_cid);\n\nint qed_set_txq_coalesce(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_ptt *p_ptt,\n\t\t\t u16 coalesce, struct qed_queue_cid *p_cid);\n\nint qed_get_rxq_coalesce(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_ptt *p_ptt,\n\t\t\t struct qed_queue_cid *p_cid, u16 *p_hw_coal);\n\nint qed_get_txq_coalesce(struct qed_hwfn *p_hwfn,\n\t\t\t struct qed_ptt *p_ptt,\n\t\t\t struct qed_queue_cid *p_cid, u16 *p_hw_coal);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}