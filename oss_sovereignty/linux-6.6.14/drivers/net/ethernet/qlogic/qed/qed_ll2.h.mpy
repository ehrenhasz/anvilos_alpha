{
  "module_name": "qed_ll2.h",
  "hash_id": "6c1715ff6e02a12756e4d1100ba54ce178d017b306dd949eb92de052bef8490e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/qlogic/qed/qed_ll2.h",
  "human_readable_source": " \n \n\n#ifndef _QED_LL2_H\n#define _QED_LL2_H\n\n#include <linux/types.h>\n#include <linux/kernel.h>\n#include <linux/list.h>\n#include <linux/mutex.h>\n#include <linux/slab.h>\n#include <linux/spinlock.h>\n#include <linux/qed/qed_chain.h>\n#include <linux/qed/qed_ll2_if.h>\n#include \"qed.h\"\n#include \"qed_hsi.h\"\n#include \"qed_sp.h\"\n\n#define QED_MAX_NUM_OF_LL2_CONNECTIONS                    (4)\n \n#define QED_MAX_NUM_OF_LL2_CONNS_PF            (4)\n#define QED_MAX_NUM_OF_LEGACY_LL2_CONNS_PF   (3)\n\n#define QED_MAX_NUM_OF_CTX_LL2_CONNS_PF\t\\\n\t(QED_MAX_NUM_OF_LL2_CONNS_PF - QED_MAX_NUM_OF_LEGACY_LL2_CONNS_PF)\n\n#define QED_LL2_LEGACY_CONN_BASE_PF     0\n#define QED_LL2_CTX_CONN_BASE_PF        QED_MAX_NUM_OF_LEGACY_LL2_CONNS_PF\n\nstruct qed_ll2_rx_packet {\n\tstruct list_head list_entry;\n\tstruct core_rx_bd_with_buff_len *rxq_bd;\n\tdma_addr_t rx_buf_addr;\n\tu16 buf_length;\n\tvoid *cookie;\n\tu8 placement_offset;\n\tu16 parse_flags;\n\tu16 packet_length;\n\tu16 vlan;\n\tu32 opaque_data[2];\n};\n\nstruct qed_ll2_tx_packet {\n\tstruct list_head list_entry;\n\tu16 bd_used;\n\tbool notify_fw;\n\tvoid *cookie;\n\t \n\tstruct {\n\t\tstruct core_tx_bd *txq_bd;\n\t\tdma_addr_t tx_frag;\n\t\tu16 frag_len;\n\t} bds_set[];\n};\n\nstruct qed_ll2_rx_queue {\n\t \n\tspinlock_t lock;\n\tstruct qed_chain rxq_chain;\n\tstruct qed_chain rcq_chain;\n\tu8 rx_sb_index;\n\tu8 ctx_based;\n\tbool b_cb_registered;\n\t__le16 *p_fw_cons;\n\tstruct list_head active_descq;\n\tstruct list_head free_descq;\n\tstruct list_head posting_descq;\n\tstruct qed_ll2_rx_packet *descq_array;\n\tvoid __iomem *set_prod_addr;\n\tstruct core_pwm_prod_update_data db_data;\n};\n\nstruct qed_ll2_tx_queue {\n\t \n\tspinlock_t lock;\n\tstruct qed_chain txq_chain;\n\tu8 tx_sb_index;\n\tbool b_cb_registered;\n\t__le16 *p_fw_cons;\n\tstruct list_head active_descq;\n\tstruct list_head free_descq;\n\tstruct list_head sending_descq;\n\tu16 cur_completing_bd_idx;\n\tvoid __iomem *doorbell_addr;\n\tstruct core_db_data db_msg;\n\tu16 bds_idx;\n\tu16 cur_send_frag_num;\n\tu16 cur_completing_frag_num;\n\tbool b_completing_packet;\n\tvoid *descq_mem;  \n\tstruct qed_ll2_tx_packet *cur_send_packet;\n\tstruct qed_ll2_tx_packet cur_completing_packet;\n};\n\nstruct qed_ll2_info {\n\t \n\tstruct mutex mutex;\n\n\tstruct qed_ll2_acquire_data_inputs input;\n\tu32 cid;\n\tu8 my_id;\n\tu8 queue_id;\n\tu8 tx_stats_id;\n\tbool b_active;\n\tenum core_tx_dest tx_dest;\n\tu8 tx_stats_en;\n\tbool main_func_queue;\n\tstruct qed_ll2_cbs cbs;\n\tstruct qed_ll2_rx_queue rx_queue;\n\tstruct qed_ll2_tx_queue tx_queue;\n};\n\nextern const struct qed_ll2_ops qed_ll2_ops_pass;\n\n \nint qed_ll2_acquire_connection(void *cxt, struct qed_ll2_acquire_data *data);\n\n \nint qed_ll2_establish_connection(void *cxt, u8 connection_handle);\n\n \nint qed_ll2_post_rx_buffer(void *cxt,\n\t\t\t   u8 connection_handle,\n\t\t\t   dma_addr_t addr,\n\t\t\t   u16 buf_len, void *cookie, u8 notify_fw);\n\n \nint qed_ll2_prepare_tx_packet(void *cxt,\n\t\t\t      u8 connection_handle,\n\t\t\t      struct qed_ll2_tx_pkt_info *pkt,\n\t\t\t      bool notify_fw);\n\n \nvoid qed_ll2_release_connection(void *cxt, u8 connection_handle);\n\n \nint qed_ll2_set_fragment_of_tx_packet(void *cxt,\n\t\t\t\t      u8 connection_handle,\n\t\t\t\t      dma_addr_t addr, u16 nbytes);\n\n \nint qed_ll2_terminate_connection(void *cxt, u8 connection_handle);\n\n \nint qed_ll2_get_stats(void *cxt,\n\t\t      u8 connection_handle, struct qed_ll2_stats *p_stats);\n\n \nint qed_ll2_alloc(struct qed_hwfn *p_hwfn);\n\n \nvoid qed_ll2_setup(struct qed_hwfn *p_hwfn);\n\n \nvoid qed_ll2_free(struct qed_hwfn *p_hwfn);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}