{
  "module_name": "descs_com.h",
  "hash_id": "2a4aded640fcbdc26098708f738985fb4c0ff072f35908169c58cd8a05cda4fd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/stmicro/stmmac/descs_com.h",
  "human_readable_source": " \n \n\n#ifndef __DESC_COM_H__\n#define __DESC_COM_H__\n\n \n\n \nstatic inline void ehn_desc_rx_set_on_ring(struct dma_desc *p, int end,\n\t\t\t\t\t   int bfsize)\n{\n\tif (bfsize == BUF_SIZE_16KiB)\n\t\tp->des1 |= cpu_to_le32((BUF_SIZE_8KiB\n\t\t\t\t<< ERDES1_BUFFER2_SIZE_SHIFT)\n\t\t\t   & ERDES1_BUFFER2_SIZE_MASK);\n\n\tif (end)\n\t\tp->des1 |= cpu_to_le32(ERDES1_END_RING);\n}\n\nstatic inline void enh_desc_end_tx_desc_on_ring(struct dma_desc *p, int end)\n{\n\tif (end)\n\t\tp->des0 |= cpu_to_le32(ETDES0_END_RING);\n\telse\n\t\tp->des0 &= cpu_to_le32(~ETDES0_END_RING);\n}\n\nstatic inline void enh_set_tx_desc_len_on_ring(struct dma_desc *p, int len)\n{\n\tif (unlikely(len > BUF_SIZE_4KiB)) {\n\t\tp->des1 |= cpu_to_le32((((len - BUF_SIZE_4KiB)\n\t\t\t\t\t<< ETDES1_BUFFER2_SIZE_SHIFT)\n\t\t\t    & ETDES1_BUFFER2_SIZE_MASK) | (BUF_SIZE_4KiB\n\t\t\t    & ETDES1_BUFFER1_SIZE_MASK));\n\t} else\n\t\tp->des1 |= cpu_to_le32((len & ETDES1_BUFFER1_SIZE_MASK));\n}\n\n \nstatic inline void ndesc_rx_set_on_ring(struct dma_desc *p, int end, int bfsize)\n{\n\tif (bfsize >= BUF_SIZE_2KiB) {\n\t\tint bfsize2;\n\n\t\tbfsize2 = min(bfsize - BUF_SIZE_2KiB + 1, BUF_SIZE_2KiB - 1);\n\t\tp->des1 |= cpu_to_le32((bfsize2 << RDES1_BUFFER2_SIZE_SHIFT)\n\t\t\t    & RDES1_BUFFER2_SIZE_MASK);\n\t}\n\n\tif (end)\n\t\tp->des1 |= cpu_to_le32(RDES1_END_RING);\n}\n\nstatic inline void ndesc_end_tx_desc_on_ring(struct dma_desc *p, int end)\n{\n\tif (end)\n\t\tp->des1 |= cpu_to_le32(TDES1_END_RING);\n\telse\n\t\tp->des1 &= cpu_to_le32(~TDES1_END_RING);\n}\n\nstatic inline void norm_set_tx_desc_len_on_ring(struct dma_desc *p, int len)\n{\n\tif (unlikely(len > BUF_SIZE_2KiB)) {\n\t\tunsigned int buffer1 = (BUF_SIZE_2KiB - 1)\n\t\t\t\t\t& TDES1_BUFFER1_SIZE_MASK;\n\t\tp->des1 |= cpu_to_le32((((len - buffer1)\n\t\t\t\t\t<< TDES1_BUFFER2_SIZE_SHIFT)\n\t\t\t\t& TDES1_BUFFER2_SIZE_MASK) | buffer1);\n\t} else\n\t\tp->des1 |= cpu_to_le32((len & TDES1_BUFFER1_SIZE_MASK));\n}\n\n \n\n \nstatic inline void ehn_desc_rx_set_on_chain(struct dma_desc *p)\n{\n\tp->des1 |= cpu_to_le32(ERDES1_SECOND_ADDRESS_CHAINED);\n}\n\nstatic inline void enh_desc_end_tx_desc_on_chain(struct dma_desc *p)\n{\n\tp->des0 |= cpu_to_le32(ETDES0_SECOND_ADDRESS_CHAINED);\n}\n\nstatic inline void enh_set_tx_desc_len_on_chain(struct dma_desc *p, int len)\n{\n\tp->des1 |= cpu_to_le32(len & ETDES1_BUFFER1_SIZE_MASK);\n}\n\n \nstatic inline void ndesc_rx_set_on_chain(struct dma_desc *p, int end)\n{\n\tp->des1 |= cpu_to_le32(RDES1_SECOND_ADDRESS_CHAINED);\n}\n\nstatic inline void ndesc_tx_set_on_chain(struct dma_desc *p)\n{\n\tp->des1 |= cpu_to_le32(TDES1_SECOND_ADDRESS_CHAINED);\n}\n\nstatic inline void norm_set_tx_desc_len_on_chain(struct dma_desc *p, int len)\n{\n\tp->des1 |= cpu_to_le32(len & TDES1_BUFFER1_SIZE_MASK);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}