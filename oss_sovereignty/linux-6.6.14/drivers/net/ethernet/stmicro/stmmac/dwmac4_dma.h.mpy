{
  "module_name": "dwmac4_dma.h",
  "hash_id": "c739dd7e09b267410a0322b69509bd972c08f811f5ba6687d2c618b84a2188e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.h",
  "human_readable_source": " \n \n\n#ifndef __DWMAC4_DMA_H__\n#define __DWMAC4_DMA_H__\n\n \n#define DMA_CHANNEL_NB_MAX\t\t1\n\n#define DMA_BUS_MODE\t\t\t0x00001000\n#define DMA_SYS_BUS_MODE\t\t0x00001004\n#define DMA_STATUS\t\t\t0x00001008\n#define DMA_DEBUG_STATUS_0\t\t0x0000100c\n#define DMA_DEBUG_STATUS_1\t\t0x00001010\n#define DMA_DEBUG_STATUS_2\t\t0x00001014\n#define DMA_AXI_BUS_MODE\t\t0x00001028\n#define DMA_TBS_CTRL\t\t\t0x00001050\n\n \n#define DMA_BUS_MODE_DCHE\t\tBIT(19)\n#define DMA_BUS_MODE_INTM_MASK\t\tGENMASK(17, 16)\n#define DMA_BUS_MODE_INTM_SHIFT\t\t16\n#define DMA_BUS_MODE_INTM_MODE1\t\t0x1\n#define DMA_BUS_MODE_SFT_RESET\t\tBIT(0)\n\n \n#define DMA_BUS_MODE_SPH\t\tBIT(24)\n#define DMA_BUS_MODE_PBL\t\tBIT(16)\n#define DMA_BUS_MODE_PBL_SHIFT\t\t16\n#define DMA_BUS_MODE_RPBL_SHIFT\t\t16\n#define DMA_BUS_MODE_MB\t\t\tBIT(14)\n#define DMA_BUS_MODE_FB\t\t\tBIT(0)\n\n \n#define DMA_STATUS_MAC\t\t\tBIT(17)\n#define DMA_STATUS_MTL\t\t\tBIT(16)\n#define DMA_STATUS_CHAN7\t\tBIT(7)\n#define DMA_STATUS_CHAN6\t\tBIT(6)\n#define DMA_STATUS_CHAN5\t\tBIT(5)\n#define DMA_STATUS_CHAN4\t\tBIT(4)\n#define DMA_STATUS_CHAN3\t\tBIT(3)\n#define DMA_STATUS_CHAN2\t\tBIT(2)\n#define DMA_STATUS_CHAN1\t\tBIT(1)\n#define DMA_STATUS_CHAN0\t\tBIT(0)\n\n \n#define DMA_DEBUG_STATUS_TS_MASK\t0xf\n#define DMA_DEBUG_STATUS_RS_MASK\t0xf\n\n \n#define DMA_AXI_EN_LPI\t\t\tBIT(31)\n#define DMA_AXI_LPI_XIT_FRM\t\tBIT(30)\n#define DMA_AXI_WR_OSR_LMT\t\tGENMASK(27, 24)\n#define DMA_AXI_WR_OSR_LMT_SHIFT\t24\n#define DMA_AXI_RD_OSR_LMT\t\tGENMASK(19, 16)\n#define DMA_AXI_RD_OSR_LMT_SHIFT\t16\n\n#define DMA_AXI_OSR_MAX\t\t\t0xf\n#define DMA_AXI_MAX_OSR_LIMIT ((DMA_AXI_OSR_MAX << DMA_AXI_WR_OSR_LMT_SHIFT) | \\\n\t\t\t\t(DMA_AXI_OSR_MAX << DMA_AXI_RD_OSR_LMT_SHIFT))\n\n#define DMA_SYS_BUS_MB\t\t\tBIT(14)\n#define DMA_AXI_1KBBE\t\t\tBIT(13)\n#define DMA_SYS_BUS_AAL\t\t\tBIT(12)\n#define DMA_SYS_BUS_EAME\t\tBIT(11)\n#define DMA_AXI_BLEN256\t\t\tBIT(7)\n#define DMA_AXI_BLEN128\t\t\tBIT(6)\n#define DMA_AXI_BLEN64\t\t\tBIT(5)\n#define DMA_AXI_BLEN32\t\t\tBIT(4)\n#define DMA_AXI_BLEN16\t\t\tBIT(3)\n#define DMA_AXI_BLEN8\t\t\tBIT(2)\n#define DMA_AXI_BLEN4\t\t\tBIT(1)\n#define DMA_SYS_BUS_FB\t\t\tBIT(0)\n\n#define DMA_BURST_LEN_DEFAULT\t\t(DMA_AXI_BLEN256 | DMA_AXI_BLEN128 | \\\n\t\t\t\t\tDMA_AXI_BLEN64 | DMA_AXI_BLEN32 | \\\n\t\t\t\t\tDMA_AXI_BLEN16 | DMA_AXI_BLEN8 | \\\n\t\t\t\t\tDMA_AXI_BLEN4)\n\n#define DMA_AXI_BURST_LEN_MASK\t\t0x000000FE\n\n \n#define DMA_TBS_FTOS\t\t\tGENMASK(31, 8)\n#define DMA_TBS_FTOV\t\t\tBIT(0)\n#define DMA_TBS_DEF_FTOS\t\t(DMA_TBS_FTOS | DMA_TBS_FTOV)\n\n \n#define DMA_CHAN_BASE_ADDR\t\t0x00001100\n#define DMA_CHAN_BASE_OFFSET\t\t0x80\n\nstatic inline u32 dma_chanx_base_addr(const struct dwmac4_addrs *addrs,\n\t\t\t\t      const u32 x)\n{\n\tu32 addr;\n\n\tif (addrs)\n\t\taddr = addrs->dma_chan + (x * addrs->dma_chan_offset);\n\telse\n\t\taddr = DMA_CHAN_BASE_ADDR + (x * DMA_CHAN_BASE_OFFSET);\n\n\treturn addr;\n}\n\n#define DMA_CHAN_REG_NUMBER\t\t17\n\n#define DMA_CHAN_CONTROL(addrs, x)\tdma_chanx_base_addr(addrs, x)\n#define DMA_CHAN_TX_CONTROL(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x4)\n#define DMA_CHAN_RX_CONTROL(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x8)\n#define DMA_CHAN_TX_BASE_ADDR_HI(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x10)\n#define DMA_CHAN_TX_BASE_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x14)\n#define DMA_CHAN_RX_BASE_ADDR_HI(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x18)\n#define DMA_CHAN_RX_BASE_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x1c)\n#define DMA_CHAN_TX_END_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x20)\n#define DMA_CHAN_RX_END_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x28)\n#define DMA_CHAN_TX_RING_LEN(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x2c)\n#define DMA_CHAN_RX_RING_LEN(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x30)\n#define DMA_CHAN_INTR_ENA(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x34)\n#define DMA_CHAN_RX_WATCHDOG(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x38)\n#define DMA_CHAN_SLOT_CTRL_STATUS(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x3c)\n#define DMA_CHAN_CUR_TX_DESC(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x44)\n#define DMA_CHAN_CUR_RX_DESC(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x4c)\n#define DMA_CHAN_CUR_TX_BUF_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x54)\n#define DMA_CHAN_CUR_RX_BUF_ADDR(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x5c)\n#define DMA_CHAN_STATUS(addrs, x)\t(dma_chanx_base_addr(addrs, x) + 0x60)\n\n \n#define DMA_CONTROL_SPH\t\t\tBIT(24)\n#define DMA_CONTROL_MSS_MASK\t\tGENMASK(13, 0)\n\n \n#define DMA_CONTROL_EDSE\t\tBIT(28)\n#define DMA_CONTROL_TSE\t\t\tBIT(12)\n#define DMA_CONTROL_OSP\t\t\tBIT(4)\n#define DMA_CONTROL_ST\t\t\tBIT(0)\n\n \n#define DMA_CONTROL_SR\t\t\tBIT(0)\n#define DMA_RBSZ_MASK\t\t\tGENMASK(14, 1)\n#define DMA_RBSZ_SHIFT\t\t\t1\n\n \n#define DMA_CHAN_STATUS_REB\t\tGENMASK(21, 19)\n#define DMA_CHAN_STATUS_REB_SHIFT\t19\n#define DMA_CHAN_STATUS_TEB\t\tGENMASK(18, 16)\n#define DMA_CHAN_STATUS_TEB_SHIFT\t16\n#define DMA_CHAN_STATUS_NIS\t\tBIT(15)\n#define DMA_CHAN_STATUS_AIS\t\tBIT(14)\n#define DMA_CHAN_STATUS_CDE\t\tBIT(13)\n#define DMA_CHAN_STATUS_FBE\t\tBIT(12)\n#define DMA_CHAN_STATUS_ERI\t\tBIT(11)\n#define DMA_CHAN_STATUS_ETI\t\tBIT(10)\n#define DMA_CHAN_STATUS_RWT\t\tBIT(9)\n#define DMA_CHAN_STATUS_RPS\t\tBIT(8)\n#define DMA_CHAN_STATUS_RBU\t\tBIT(7)\n#define DMA_CHAN_STATUS_RI\t\tBIT(6)\n#define DMA_CHAN_STATUS_TBU\t\tBIT(2)\n#define DMA_CHAN_STATUS_TPS\t\tBIT(1)\n#define DMA_CHAN_STATUS_TI\t\tBIT(0)\n\n#define DMA_CHAN_STATUS_MSK_COMMON\t(DMA_CHAN_STATUS_NIS | \\\n\t\t\t\t\t DMA_CHAN_STATUS_AIS | \\\n\t\t\t\t\t DMA_CHAN_STATUS_CDE | \\\n\t\t\t\t\t DMA_CHAN_STATUS_FBE)\n\n#define DMA_CHAN_STATUS_MSK_RX\t\t(DMA_CHAN_STATUS_REB | \\\n\t\t\t\t\t DMA_CHAN_STATUS_ERI | \\\n\t\t\t\t\t DMA_CHAN_STATUS_RWT | \\\n\t\t\t\t\t DMA_CHAN_STATUS_RPS | \\\n\t\t\t\t\t DMA_CHAN_STATUS_RBU | \\\n\t\t\t\t\t DMA_CHAN_STATUS_RI | \\\n\t\t\t\t\t DMA_CHAN_STATUS_MSK_COMMON)\n\n#define DMA_CHAN_STATUS_MSK_TX\t\t(DMA_CHAN_STATUS_ETI | \\\n\t\t\t\t\t DMA_CHAN_STATUS_TBU | \\\n\t\t\t\t\t DMA_CHAN_STATUS_TPS | \\\n\t\t\t\t\t DMA_CHAN_STATUS_TI | \\\n\t\t\t\t\t DMA_CHAN_STATUS_MSK_COMMON)\n\n \n#define DMA_CHAN_INTR_ENA_NIE\t\tBIT(16)\n#define DMA_CHAN_INTR_ENA_AIE\t\tBIT(15)\n#define DMA_CHAN_INTR_ENA_NIE_4_10\tBIT(15)\n#define DMA_CHAN_INTR_ENA_AIE_4_10\tBIT(14)\n#define DMA_CHAN_INTR_ENA_CDE\t\tBIT(13)\n#define DMA_CHAN_INTR_ENA_FBE\t\tBIT(12)\n#define DMA_CHAN_INTR_ENA_ERE\t\tBIT(11)\n#define DMA_CHAN_INTR_ENA_ETE\t\tBIT(10)\n#define DMA_CHAN_INTR_ENA_RWE\t\tBIT(9)\n#define DMA_CHAN_INTR_ENA_RSE\t\tBIT(8)\n#define DMA_CHAN_INTR_ENA_RBUE\t\tBIT(7)\n#define DMA_CHAN_INTR_ENA_RIE\t\tBIT(6)\n#define DMA_CHAN_INTR_ENA_TBUE\t\tBIT(2)\n#define DMA_CHAN_INTR_ENA_TSE\t\tBIT(1)\n#define DMA_CHAN_INTR_ENA_TIE\t\tBIT(0)\n\n#define DMA_CHAN_INTR_NORMAL\t\t(DMA_CHAN_INTR_ENA_NIE | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_RIE | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_TIE)\n\n#define DMA_CHAN_INTR_ABNORMAL\t\t(DMA_CHAN_INTR_ENA_AIE | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_FBE)\n \n#define DMA_CHAN_INTR_DEFAULT_MASK\t(DMA_CHAN_INTR_NORMAL | \\\n\t\t\t\t\t DMA_CHAN_INTR_ABNORMAL)\n#define DMA_CHAN_INTR_DEFAULT_RX\t(DMA_CHAN_INTR_ENA_RIE)\n#define DMA_CHAN_INTR_DEFAULT_TX\t(DMA_CHAN_INTR_ENA_TIE)\n\n#define DMA_CHAN_INTR_NORMAL_4_10\t(DMA_CHAN_INTR_ENA_NIE_4_10 | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_RIE | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_TIE)\n\n#define DMA_CHAN_INTR_ABNORMAL_4_10\t(DMA_CHAN_INTR_ENA_AIE_4_10 | \\\n\t\t\t\t\t DMA_CHAN_INTR_ENA_FBE)\n \n#define DMA_CHAN_INTR_DEFAULT_MASK_4_10\t(DMA_CHAN_INTR_NORMAL_4_10 | \\\n\t\t\t\t\t DMA_CHAN_INTR_ABNORMAL_4_10)\n#define DMA_CHAN_INTR_DEFAULT_RX_4_10\t(DMA_CHAN_INTR_ENA_RIE)\n#define DMA_CHAN_INTR_DEFAULT_TX_4_10\t(DMA_CHAN_INTR_ENA_TIE)\n\n \n#define DMA_CHAN0_DBG_STAT_TPS\t\tGENMASK(15, 12)\n#define DMA_CHAN0_DBG_STAT_TPS_SHIFT\t12\n#define DMA_CHAN0_DBG_STAT_RPS\t\tGENMASK(11, 8)\n#define DMA_CHAN0_DBG_STAT_RPS_SHIFT\t8\n\nint dwmac4_dma_reset(void __iomem *ioaddr);\nvoid dwmac4_enable_dma_irq(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t   u32 chan, bool rx, bool tx);\nvoid dwmac410_enable_dma_irq(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t     u32 chan, bool rx, bool tx);\nvoid dwmac4_disable_dma_irq(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t    u32 chan, bool rx, bool tx);\nvoid dwmac410_disable_dma_irq(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t      u32 chan, bool rx, bool tx);\nvoid dwmac4_dma_start_tx(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t u32 chan);\nvoid dwmac4_dma_stop_tx(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\tu32 chan);\nvoid dwmac4_dma_start_rx(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t u32 chan);\nvoid dwmac4_dma_stop_rx(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\tu32 chan);\nint dwmac4_dma_interrupt(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t struct stmmac_extra_stats *x, u32 chan, u32 dir);\nvoid dwmac4_set_rx_ring_len(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t    u32 len, u32 chan);\nvoid dwmac4_set_tx_ring_len(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t    u32 len, u32 chan);\nvoid dwmac4_set_rx_tail_ptr(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t    u32 tail_ptr, u32 chan);\nvoid dwmac4_set_tx_tail_ptr(struct stmmac_priv *priv, void __iomem *ioaddr,\n\t\t\t    u32 tail_ptr, u32 chan);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}