{
  "module_name": "dwmac-generic.c",
  "hash_id": "1f76ac0c81f1b09cb45be63230dc2f20bb72a33a6718c9a191debf448f974273",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/stmicro/stmmac/dwmac-generic.c",
  "human_readable_source": " \n\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n\n#include \"stmmac.h\"\n#include \"stmmac_platform.h\"\n\nstatic int dwmac_generic_probe(struct platform_device *pdev)\n{\n\tstruct plat_stmmacenet_data *plat_dat;\n\tstruct stmmac_resources stmmac_res;\n\tint ret;\n\n\tret = stmmac_get_platform_resources(pdev, &stmmac_res);\n\tif (ret)\n\t\treturn ret;\n\n\tif (pdev->dev.of_node) {\n\t\tplat_dat = stmmac_probe_config_dt(pdev, stmmac_res.mac);\n\t\tif (IS_ERR(plat_dat)) {\n\t\t\tdev_err(&pdev->dev, \"dt configuration failed\\n\");\n\t\t\treturn PTR_ERR(plat_dat);\n\t\t}\n\t} else {\n\t\tplat_dat = dev_get_platdata(&pdev->dev);\n\t\tif (!plat_dat) {\n\t\t\tdev_err(&pdev->dev, \"no platform data provided\\n\");\n\t\t\treturn  -EINVAL;\n\t\t}\n\n\t\t \n\t\tplat_dat->multicast_filter_bins = HASH_TABLE_SIZE;\n\n\t\t \n\t\tplat_dat->unicast_filter_entries = 1;\n\t}\n\n\tret = stmmac_pltfr_probe(pdev, plat_dat, &stmmac_res);\n\tif (ret)\n\t\tgoto err_remove_config_dt;\n\n\treturn 0;\n\nerr_remove_config_dt:\n\tif (pdev->dev.of_node)\n\t\tstmmac_remove_config_dt(pdev, plat_dat);\n\n\treturn ret;\n}\n\nstatic const struct of_device_id dwmac_generic_match[] = {\n\t{ .compatible = \"st,spear600-gmac\"},\n\t{ .compatible = \"snps,dwmac-3.40a\"},\n\t{ .compatible = \"snps,dwmac-3.50a\"},\n\t{ .compatible = \"snps,dwmac-3.610\"},\n\t{ .compatible = \"snps,dwmac-3.70a\"},\n\t{ .compatible = \"snps,dwmac-3.710\"},\n\t{ .compatible = \"snps,dwmac-4.00\"},\n\t{ .compatible = \"snps,dwmac-4.10a\"},\n\t{ .compatible = \"snps,dwmac\"},\n\t{ .compatible = \"snps,dwxgmac-2.10\"},\n\t{ .compatible = \"snps,dwxgmac\"},\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, dwmac_generic_match);\n\nstatic struct platform_driver dwmac_generic_driver = {\n\t.probe  = dwmac_generic_probe,\n\t.remove_new = stmmac_pltfr_remove,\n\t.driver = {\n\t\t.name           = STMMAC_RESOURCE_NAME,\n\t\t.pm\t\t= &stmmac_pltfr_pm_ops,\n\t\t.of_match_table = dwmac_generic_match,\n\t},\n};\nmodule_platform_driver(dwmac_generic_driver);\n\nMODULE_DESCRIPTION(\"Generic dwmac driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}