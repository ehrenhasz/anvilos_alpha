{
  "module_name": "mmc_core.c",
  "hash_id": "5de488a24be5633f531ae73cddb61b43bea429015dacf2cdf023a2b7237f0890",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/stmicro/stmmac/mmc_core.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/io.h>\n#include \"hwif.h\"\n#include \"mmc.h\"\n\n \n\n#define MMC_CNTRL\t\t0x00\t \n#define MMC_RX_INTR\t\t0x04\t \n#define MMC_TX_INTR\t\t0x08\t \n#define MMC_RX_INTR_MASK\t0x0c\t \n#define MMC_TX_INTR_MASK\t0x10\t \n#define MMC_DEFAULT_MASK\t0xffffffff\n\n \n\n \n#define MMC_TX_OCTETCOUNT_GB\t\t0x14\n#define MMC_TX_FRAMECOUNT_GB\t\t0x18\n#define MMC_TX_BROADCASTFRAME_G\t\t0x1c\n#define MMC_TX_MULTICASTFRAME_G\t\t0x20\n#define MMC_TX_64_OCTETS_GB\t\t0x24\n#define MMC_TX_65_TO_127_OCTETS_GB\t0x28\n#define MMC_TX_128_TO_255_OCTETS_GB\t0x2c\n#define MMC_TX_256_TO_511_OCTETS_GB\t0x30\n#define MMC_TX_512_TO_1023_OCTETS_GB\t0x34\n#define MMC_TX_1024_TO_MAX_OCTETS_GB\t0x38\n#define MMC_TX_UNICAST_GB\t\t0x3c\n#define MMC_TX_MULTICAST_GB\t\t0x40\n#define MMC_TX_BROADCAST_GB\t\t0x44\n#define MMC_TX_UNDERFLOW_ERROR\t\t0x48\n#define MMC_TX_SINGLECOL_G\t\t0x4c\n#define MMC_TX_MULTICOL_G\t\t0x50\n#define MMC_TX_DEFERRED\t\t\t0x54\n#define MMC_TX_LATECOL\t\t\t0x58\n#define MMC_TX_EXESSCOL\t\t\t0x5c\n#define MMC_TX_CARRIER_ERROR\t\t0x60\n#define MMC_TX_OCTETCOUNT_G\t\t0x64\n#define MMC_TX_FRAMECOUNT_G\t\t0x68\n#define MMC_TX_EXCESSDEF\t\t0x6c\n#define MMC_TX_PAUSE_FRAME\t\t0x70\n#define MMC_TX_VLAN_FRAME_G\t\t0x74\n\n \n#define MMC_RX_FRAMECOUNT_GB\t\t0x80\n#define MMC_RX_OCTETCOUNT_GB\t\t0x84\n#define MMC_RX_OCTETCOUNT_G\t\t0x88\n#define MMC_RX_BROADCASTFRAME_G\t\t0x8c\n#define MMC_RX_MULTICASTFRAME_G\t\t0x90\n#define MMC_RX_CRC_ERROR\t\t0x94\n#define MMC_RX_ALIGN_ERROR\t\t0x98\n#define MMC_RX_RUN_ERROR\t\t0x9C\n#define MMC_RX_JABBER_ERROR\t\t0xA0\n#define MMC_RX_UNDERSIZE_G\t\t0xA4\n#define MMC_RX_OVERSIZE_G\t\t0xA8\n#define MMC_RX_64_OCTETS_GB\t\t0xAC\n#define MMC_RX_65_TO_127_OCTETS_GB\t0xb0\n#define MMC_RX_128_TO_255_OCTETS_GB\t0xb4\n#define MMC_RX_256_TO_511_OCTETS_GB\t0xb8\n#define MMC_RX_512_TO_1023_OCTETS_GB\t0xbc\n#define MMC_RX_1024_TO_MAX_OCTETS_GB\t0xc0\n#define MMC_RX_UNICAST_G\t\t0xc4\n#define MMC_RX_LENGTH_ERROR\t\t0xc8\n#define MMC_RX_AUTOFRANGETYPE\t\t0xcc\n#define MMC_RX_PAUSE_FRAMES\t\t0xd0\n#define MMC_RX_FIFO_OVERFLOW\t\t0xd4\n#define MMC_RX_VLAN_FRAMES_GB\t\t0xd8\n#define MMC_RX_WATCHDOG_ERROR\t\t0xdc\n \n#define MMC_RX_IPC_INTR_MASK\t\t0x100\n#define MMC_RX_IPC_INTR\t\t\t0x108\n \n#define MMC_RX_IPV4_GD\t\t\t0x110\n#define MMC_RX_IPV4_HDERR\t\t0x114\n#define MMC_RX_IPV4_NOPAY\t\t0x118\n#define MMC_RX_IPV4_FRAG\t\t0x11C\n#define MMC_RX_IPV4_UDSBL\t\t0x120\n\n#define MMC_RX_IPV4_GD_OCTETS\t\t0x150\n#define MMC_RX_IPV4_HDERR_OCTETS\t0x154\n#define MMC_RX_IPV4_NOPAY_OCTETS\t0x158\n#define MMC_RX_IPV4_FRAG_OCTETS\t\t0x15c\n#define MMC_RX_IPV4_UDSBL_OCTETS\t0x160\n\n \n#define MMC_RX_IPV6_GD_OCTETS\t\t0x164\n#define MMC_RX_IPV6_HDERR_OCTETS\t0x168\n#define MMC_RX_IPV6_NOPAY_OCTETS\t0x16c\n\n#define MMC_RX_IPV6_GD\t\t\t0x124\n#define MMC_RX_IPV6_HDERR\t\t0x128\n#define MMC_RX_IPV6_NOPAY\t\t0x12c\n\n \n#define MMC_RX_UDP_GD\t\t\t0x130\n#define MMC_RX_UDP_ERR\t\t\t0x134\n#define MMC_RX_TCP_GD\t\t\t0x138\n#define MMC_RX_TCP_ERR\t\t\t0x13c\n#define MMC_RX_ICMP_GD\t\t\t0x140\n#define MMC_RX_ICMP_ERR\t\t\t0x144\n\n#define MMC_RX_UDP_GD_OCTETS\t\t0x170\n#define MMC_RX_UDP_ERR_OCTETS\t\t0x174\n#define MMC_RX_TCP_GD_OCTETS\t\t0x178\n#define MMC_RX_TCP_ERR_OCTETS\t\t0x17c\n#define MMC_RX_ICMP_GD_OCTETS\t\t0x180\n#define MMC_RX_ICMP_ERR_OCTETS\t\t0x184\n\n#define MMC_TX_FPE_FRAG\t\t\t0x1a8\n#define MMC_TX_HOLD_REQ\t\t\t0x1ac\n#define MMC_RX_PKT_ASSEMBLY_ERR\t\t0x1c8\n#define MMC_RX_PKT_SMD_ERR\t\t0x1cc\n#define MMC_RX_PKT_ASSEMBLY_OK\t\t0x1d0\n#define MMC_RX_FPE_FRAG\t\t\t0x1d4\n\n \n#define MMC_XGMAC_TX_OCTET_GB\t\t0x14\n#define MMC_XGMAC_TX_PKT_GB\t\t0x1c\n#define MMC_XGMAC_TX_BROAD_PKT_G\t0x24\n#define MMC_XGMAC_TX_MULTI_PKT_G\t0x2c\n#define MMC_XGMAC_TX_64OCT_GB\t\t0x34\n#define MMC_XGMAC_TX_65OCT_GB\t\t0x3c\n#define MMC_XGMAC_TX_128OCT_GB\t\t0x44\n#define MMC_XGMAC_TX_256OCT_GB\t\t0x4c\n#define MMC_XGMAC_TX_512OCT_GB\t\t0x54\n#define MMC_XGMAC_TX_1024OCT_GB\t\t0x5c\n#define MMC_XGMAC_TX_UNI_PKT_GB\t\t0x64\n#define MMC_XGMAC_TX_MULTI_PKT_GB\t0x6c\n#define MMC_XGMAC_TX_BROAD_PKT_GB\t0x74\n#define MMC_XGMAC_TX_UNDER\t\t0x7c\n#define MMC_XGMAC_TX_OCTET_G\t\t0x84\n#define MMC_XGMAC_TX_PKT_G\t\t0x8c\n#define MMC_XGMAC_TX_PAUSE\t\t0x94\n#define MMC_XGMAC_TX_VLAN_PKT_G\t\t0x9c\n#define MMC_XGMAC_TX_LPI_USEC\t\t0xa4\n#define MMC_XGMAC_TX_LPI_TRAN\t\t0xa8\n\n#define MMC_XGMAC_RX_PKT_GB\t\t0x100\n#define MMC_XGMAC_RX_OCTET_GB\t\t0x108\n#define MMC_XGMAC_RX_OCTET_G\t\t0x110\n#define MMC_XGMAC_RX_BROAD_PKT_G\t0x118\n#define MMC_XGMAC_RX_MULTI_PKT_G\t0x120\n#define MMC_XGMAC_RX_CRC_ERR\t\t0x128\n#define MMC_XGMAC_RX_RUNT_ERR\t\t0x130\n#define MMC_XGMAC_RX_JABBER_ERR\t\t0x134\n#define MMC_XGMAC_RX_UNDER\t\t0x138\n#define MMC_XGMAC_RX_OVER\t\t0x13c\n#define MMC_XGMAC_RX_64OCT_GB\t\t0x140\n#define MMC_XGMAC_RX_65OCT_GB\t\t0x148\n#define MMC_XGMAC_RX_128OCT_GB\t\t0x150\n#define MMC_XGMAC_RX_256OCT_GB\t\t0x158\n#define MMC_XGMAC_RX_512OCT_GB\t\t0x160\n#define MMC_XGMAC_RX_1024OCT_GB\t\t0x168\n#define MMC_XGMAC_RX_UNI_PKT_G\t\t0x170\n#define MMC_XGMAC_RX_LENGTH_ERR\t\t0x178\n#define MMC_XGMAC_RX_RANGE\t\t0x180\n#define MMC_XGMAC_RX_PAUSE\t\t0x188\n#define MMC_XGMAC_RX_FIFOOVER_PKT\t0x190\n#define MMC_XGMAC_RX_VLAN_PKT_GB\t0x198\n#define MMC_XGMAC_RX_WATCHDOG_ERR\t0x1a0\n#define MMC_XGMAC_RX_LPI_USEC\t\t0x1a4\n#define MMC_XGMAC_RX_LPI_TRAN\t\t0x1a8\n#define MMC_XGMAC_RX_DISCARD_PKT_GB\t0x1ac\n#define MMC_XGMAC_RX_DISCARD_OCT_GB\t0x1b4\n#define MMC_XGMAC_RX_ALIGN_ERR_PKT\t0x1bc\n\n#define MMC_XGMAC_TX_FPE_INTR_MASK\t0x204\n#define MMC_XGMAC_TX_FPE_FRAG\t\t0x208\n#define MMC_XGMAC_TX_HOLD_REQ\t\t0x20c\n#define MMC_XGMAC_RX_FPE_INTR_MASK\t0x224\n#define MMC_XGMAC_RX_PKT_ASSEMBLY_ERR\t0x228\n#define MMC_XGMAC_RX_PKT_SMD_ERR\t0x22c\n#define MMC_XGMAC_RX_PKT_ASSEMBLY_OK\t0x230\n#define MMC_XGMAC_RX_FPE_FRAG\t\t0x234\n#define MMC_XGMAC_RX_IPC_INTR_MASK\t0x25c\n\nstatic void dwmac_mmc_ctrl(void __iomem *mmcaddr, unsigned int mode)\n{\n\tu32 value = readl(mmcaddr + MMC_CNTRL);\n\n\tvalue |= (mode & 0x3F);\n\n\twritel(value, mmcaddr + MMC_CNTRL);\n\n\tpr_debug(\"stmmac: MMC ctrl register (offset 0x%x): 0x%08x\\n\",\n\t\t MMC_CNTRL, value);\n}\n\n \nstatic void dwmac_mmc_intr_all_mask(void __iomem *mmcaddr)\n{\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_RX_INTR_MASK);\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_TX_INTR_MASK);\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_RX_IPC_INTR_MASK);\n}\n\n \nstatic void dwmac_mmc_read(void __iomem *mmcaddr, struct stmmac_counters *mmc)\n{\n\tmmc->mmc_tx_octetcount_gb += readl(mmcaddr + MMC_TX_OCTETCOUNT_GB);\n\tmmc->mmc_tx_framecount_gb += readl(mmcaddr + MMC_TX_FRAMECOUNT_GB);\n\tmmc->mmc_tx_broadcastframe_g += readl(mmcaddr +\n\t\t\t\t\t      MMC_TX_BROADCASTFRAME_G);\n\tmmc->mmc_tx_multicastframe_g += readl(mmcaddr +\n\t\t\t\t\t      MMC_TX_MULTICASTFRAME_G);\n\tmmc->mmc_tx_64_octets_gb += readl(mmcaddr + MMC_TX_64_OCTETS_GB);\n\tmmc->mmc_tx_65_to_127_octets_gb +=\n\t    readl(mmcaddr + MMC_TX_65_TO_127_OCTETS_GB);\n\tmmc->mmc_tx_128_to_255_octets_gb +=\n\t    readl(mmcaddr + MMC_TX_128_TO_255_OCTETS_GB);\n\tmmc->mmc_tx_256_to_511_octets_gb +=\n\t    readl(mmcaddr + MMC_TX_256_TO_511_OCTETS_GB);\n\tmmc->mmc_tx_512_to_1023_octets_gb +=\n\t    readl(mmcaddr + MMC_TX_512_TO_1023_OCTETS_GB);\n\tmmc->mmc_tx_1024_to_max_octets_gb +=\n\t    readl(mmcaddr + MMC_TX_1024_TO_MAX_OCTETS_GB);\n\tmmc->mmc_tx_unicast_gb += readl(mmcaddr + MMC_TX_UNICAST_GB);\n\tmmc->mmc_tx_multicast_gb += readl(mmcaddr + MMC_TX_MULTICAST_GB);\n\tmmc->mmc_tx_broadcast_gb += readl(mmcaddr + MMC_TX_BROADCAST_GB);\n\tmmc->mmc_tx_underflow_error += readl(mmcaddr + MMC_TX_UNDERFLOW_ERROR);\n\tmmc->mmc_tx_singlecol_g += readl(mmcaddr + MMC_TX_SINGLECOL_G);\n\tmmc->mmc_tx_multicol_g += readl(mmcaddr + MMC_TX_MULTICOL_G);\n\tmmc->mmc_tx_deferred += readl(mmcaddr + MMC_TX_DEFERRED);\n\tmmc->mmc_tx_latecol += readl(mmcaddr + MMC_TX_LATECOL);\n\tmmc->mmc_tx_exesscol += readl(mmcaddr + MMC_TX_EXESSCOL);\n\tmmc->mmc_tx_carrier_error += readl(mmcaddr + MMC_TX_CARRIER_ERROR);\n\tmmc->mmc_tx_octetcount_g += readl(mmcaddr + MMC_TX_OCTETCOUNT_G);\n\tmmc->mmc_tx_framecount_g += readl(mmcaddr + MMC_TX_FRAMECOUNT_G);\n\tmmc->mmc_tx_excessdef += readl(mmcaddr + MMC_TX_EXCESSDEF);\n\tmmc->mmc_tx_pause_frame += readl(mmcaddr + MMC_TX_PAUSE_FRAME);\n\tmmc->mmc_tx_vlan_frame_g += readl(mmcaddr + MMC_TX_VLAN_FRAME_G);\n\n\t \n\tmmc->mmc_rx_framecount_gb += readl(mmcaddr + MMC_RX_FRAMECOUNT_GB);\n\tmmc->mmc_rx_octetcount_gb += readl(mmcaddr + MMC_RX_OCTETCOUNT_GB);\n\tmmc->mmc_rx_octetcount_g += readl(mmcaddr + MMC_RX_OCTETCOUNT_G);\n\tmmc->mmc_rx_broadcastframe_g += readl(mmcaddr +\n\t\t\t\t\t      MMC_RX_BROADCASTFRAME_G);\n\tmmc->mmc_rx_multicastframe_g += readl(mmcaddr +\n\t\t\t\t\t      MMC_RX_MULTICASTFRAME_G);\n\tmmc->mmc_rx_crc_error += readl(mmcaddr + MMC_RX_CRC_ERROR);\n\tmmc->mmc_rx_align_error += readl(mmcaddr + MMC_RX_ALIGN_ERROR);\n\tmmc->mmc_rx_run_error += readl(mmcaddr + MMC_RX_RUN_ERROR);\n\tmmc->mmc_rx_jabber_error += readl(mmcaddr + MMC_RX_JABBER_ERROR);\n\tmmc->mmc_rx_undersize_g += readl(mmcaddr + MMC_RX_UNDERSIZE_G);\n\tmmc->mmc_rx_oversize_g += readl(mmcaddr + MMC_RX_OVERSIZE_G);\n\tmmc->mmc_rx_64_octets_gb += readl(mmcaddr + MMC_RX_64_OCTETS_GB);\n\tmmc->mmc_rx_65_to_127_octets_gb +=\n\t    readl(mmcaddr + MMC_RX_65_TO_127_OCTETS_GB);\n\tmmc->mmc_rx_128_to_255_octets_gb +=\n\t    readl(mmcaddr + MMC_RX_128_TO_255_OCTETS_GB);\n\tmmc->mmc_rx_256_to_511_octets_gb +=\n\t    readl(mmcaddr + MMC_RX_256_TO_511_OCTETS_GB);\n\tmmc->mmc_rx_512_to_1023_octets_gb +=\n\t    readl(mmcaddr + MMC_RX_512_TO_1023_OCTETS_GB);\n\tmmc->mmc_rx_1024_to_max_octets_gb +=\n\t    readl(mmcaddr + MMC_RX_1024_TO_MAX_OCTETS_GB);\n\tmmc->mmc_rx_unicast_g += readl(mmcaddr + MMC_RX_UNICAST_G);\n\tmmc->mmc_rx_length_error += readl(mmcaddr + MMC_RX_LENGTH_ERROR);\n\tmmc->mmc_rx_autofrangetype += readl(mmcaddr + MMC_RX_AUTOFRANGETYPE);\n\tmmc->mmc_rx_pause_frames += readl(mmcaddr + MMC_RX_PAUSE_FRAMES);\n\tmmc->mmc_rx_fifo_overflow += readl(mmcaddr + MMC_RX_FIFO_OVERFLOW);\n\tmmc->mmc_rx_vlan_frames_gb += readl(mmcaddr + MMC_RX_VLAN_FRAMES_GB);\n\tmmc->mmc_rx_watchdog_error += readl(mmcaddr + MMC_RX_WATCHDOG_ERROR);\n\t \n\tmmc->mmc_rx_ipc_intr_mask += readl(mmcaddr + MMC_RX_IPC_INTR_MASK);\n\tmmc->mmc_rx_ipc_intr += readl(mmcaddr + MMC_RX_IPC_INTR);\n\t \n\tmmc->mmc_rx_ipv4_gd += readl(mmcaddr + MMC_RX_IPV4_GD);\n\tmmc->mmc_rx_ipv4_hderr += readl(mmcaddr + MMC_RX_IPV4_HDERR);\n\tmmc->mmc_rx_ipv4_nopay += readl(mmcaddr + MMC_RX_IPV4_NOPAY);\n\tmmc->mmc_rx_ipv4_frag += readl(mmcaddr + MMC_RX_IPV4_FRAG);\n\tmmc->mmc_rx_ipv4_udsbl += readl(mmcaddr + MMC_RX_IPV4_UDSBL);\n\n\tmmc->mmc_rx_ipv4_gd_octets += readl(mmcaddr + MMC_RX_IPV4_GD_OCTETS);\n\tmmc->mmc_rx_ipv4_hderr_octets +=\n\t    readl(mmcaddr + MMC_RX_IPV4_HDERR_OCTETS);\n\tmmc->mmc_rx_ipv4_nopay_octets +=\n\t    readl(mmcaddr + MMC_RX_IPV4_NOPAY_OCTETS);\n\tmmc->mmc_rx_ipv4_frag_octets += readl(mmcaddr +\n\t\t\t\t\t      MMC_RX_IPV4_FRAG_OCTETS);\n\tmmc->mmc_rx_ipv4_udsbl_octets +=\n\t    readl(mmcaddr + MMC_RX_IPV4_UDSBL_OCTETS);\n\n\t \n\tmmc->mmc_rx_ipv6_gd_octets += readl(mmcaddr + MMC_RX_IPV6_GD_OCTETS);\n\tmmc->mmc_rx_ipv6_hderr_octets +=\n\t    readl(mmcaddr + MMC_RX_IPV6_HDERR_OCTETS);\n\tmmc->mmc_rx_ipv6_nopay_octets +=\n\t    readl(mmcaddr + MMC_RX_IPV6_NOPAY_OCTETS);\n\n\tmmc->mmc_rx_ipv6_gd += readl(mmcaddr + MMC_RX_IPV6_GD);\n\tmmc->mmc_rx_ipv6_hderr += readl(mmcaddr + MMC_RX_IPV6_HDERR);\n\tmmc->mmc_rx_ipv6_nopay += readl(mmcaddr + MMC_RX_IPV6_NOPAY);\n\n\t \n\tmmc->mmc_rx_udp_gd += readl(mmcaddr + MMC_RX_UDP_GD);\n\tmmc->mmc_rx_udp_err += readl(mmcaddr + MMC_RX_UDP_ERR);\n\tmmc->mmc_rx_tcp_gd += readl(mmcaddr + MMC_RX_TCP_GD);\n\tmmc->mmc_rx_tcp_err += readl(mmcaddr + MMC_RX_TCP_ERR);\n\tmmc->mmc_rx_icmp_gd += readl(mmcaddr + MMC_RX_ICMP_GD);\n\tmmc->mmc_rx_icmp_err += readl(mmcaddr + MMC_RX_ICMP_ERR);\n\n\tmmc->mmc_rx_udp_gd_octets += readl(mmcaddr + MMC_RX_UDP_GD_OCTETS);\n\tmmc->mmc_rx_udp_err_octets += readl(mmcaddr + MMC_RX_UDP_ERR_OCTETS);\n\tmmc->mmc_rx_tcp_gd_octets += readl(mmcaddr + MMC_RX_TCP_GD_OCTETS);\n\tmmc->mmc_rx_tcp_err_octets += readl(mmcaddr + MMC_RX_TCP_ERR_OCTETS);\n\tmmc->mmc_rx_icmp_gd_octets += readl(mmcaddr + MMC_RX_ICMP_GD_OCTETS);\n\tmmc->mmc_rx_icmp_err_octets += readl(mmcaddr + MMC_RX_ICMP_ERR_OCTETS);\n\n\tmmc->mmc_tx_fpe_fragment_cntr += readl(mmcaddr + MMC_TX_FPE_FRAG);\n\tmmc->mmc_tx_hold_req_cntr += readl(mmcaddr + MMC_TX_HOLD_REQ);\n\tmmc->mmc_rx_packet_assembly_err_cntr +=\n\t\treadl(mmcaddr + MMC_RX_PKT_ASSEMBLY_ERR);\n\tmmc->mmc_rx_packet_smd_err_cntr += readl(mmcaddr + MMC_RX_PKT_SMD_ERR);\n\tmmc->mmc_rx_packet_assembly_ok_cntr +=\n\t\treadl(mmcaddr + MMC_RX_PKT_ASSEMBLY_OK);\n\tmmc->mmc_rx_fpe_fragment_cntr += readl(mmcaddr + MMC_RX_FPE_FRAG);\n}\n\nconst struct stmmac_mmc_ops dwmac_mmc_ops = {\n\t.ctrl = dwmac_mmc_ctrl,\n\t.intr_all_mask = dwmac_mmc_intr_all_mask,\n\t.read = dwmac_mmc_read,\n};\n\nstatic void dwxgmac_mmc_ctrl(void __iomem *mmcaddr, unsigned int mode)\n{\n\tu32 value = readl(mmcaddr + MMC_CNTRL);\n\n\tvalue |= (mode & 0x3F);\n\n\twritel(value, mmcaddr + MMC_CNTRL);\n}\n\nstatic void dwxgmac_mmc_intr_all_mask(void __iomem *mmcaddr)\n{\n\twritel(0x0, mmcaddr + MMC_RX_INTR_MASK);\n\twritel(0x0, mmcaddr + MMC_TX_INTR_MASK);\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_XGMAC_TX_FPE_INTR_MASK);\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_XGMAC_RX_FPE_INTR_MASK);\n\twritel(MMC_DEFAULT_MASK, mmcaddr + MMC_XGMAC_RX_IPC_INTR_MASK);\n}\n\nstatic void dwxgmac_read_mmc_reg(void __iomem *addr, u32 reg, u32 *dest)\n{\n\tu64 tmp = 0;\n\n\ttmp += readl(addr + reg);\n\ttmp += ((u64 )readl(addr + reg + 0x4)) << 32;\n\tif (tmp > GENMASK(31, 0))\n\t\t*dest = ~0x0;\n\telse\n\t\t*dest = *dest + tmp;\n}\n\n \nstatic void dwxgmac_mmc_read(void __iomem *mmcaddr, struct stmmac_counters *mmc)\n{\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_OCTET_GB,\n\t\t\t     &mmc->mmc_tx_octetcount_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_PKT_GB,\n\t\t\t     &mmc->mmc_tx_framecount_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_BROAD_PKT_G,\n\t\t\t     &mmc->mmc_tx_broadcastframe_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_MULTI_PKT_G,\n\t\t\t     &mmc->mmc_tx_multicastframe_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_64OCT_GB,\n\t\t\t     &mmc->mmc_tx_64_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_65OCT_GB,\n\t\t\t     &mmc->mmc_tx_65_to_127_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_128OCT_GB,\n\t\t\t     &mmc->mmc_tx_128_to_255_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_256OCT_GB,\n\t\t\t     &mmc->mmc_tx_256_to_511_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_512OCT_GB,\n\t\t\t     &mmc->mmc_tx_512_to_1023_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_1024OCT_GB,\n\t\t\t     &mmc->mmc_tx_1024_to_max_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_UNI_PKT_GB,\n\t\t\t     &mmc->mmc_tx_unicast_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_MULTI_PKT_GB,\n\t\t\t     &mmc->mmc_tx_multicast_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_BROAD_PKT_GB,\n\t\t\t     &mmc->mmc_tx_broadcast_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_UNDER,\n\t\t\t     &mmc->mmc_tx_underflow_error);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_OCTET_G,\n\t\t\t     &mmc->mmc_tx_octetcount_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_PKT_G,\n\t\t\t     &mmc->mmc_tx_framecount_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_PAUSE,\n\t\t\t     &mmc->mmc_tx_pause_frame);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_TX_VLAN_PKT_G,\n\t\t\t     &mmc->mmc_tx_vlan_frame_g);\n\n\t \n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_PKT_GB,\n\t\t\t     &mmc->mmc_rx_framecount_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_OCTET_GB,\n\t\t\t     &mmc->mmc_rx_octetcount_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_OCTET_G,\n\t\t\t     &mmc->mmc_rx_octetcount_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_BROAD_PKT_G,\n\t\t\t     &mmc->mmc_rx_broadcastframe_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_MULTI_PKT_G,\n\t\t\t     &mmc->mmc_rx_multicastframe_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_CRC_ERR,\n\t\t\t     &mmc->mmc_rx_crc_error);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_CRC_ERR,\n\t\t\t     &mmc->mmc_rx_crc_error);\n\tmmc->mmc_rx_run_error += readl(mmcaddr + MMC_XGMAC_RX_RUNT_ERR);\n\tmmc->mmc_rx_jabber_error += readl(mmcaddr + MMC_XGMAC_RX_JABBER_ERR);\n\tmmc->mmc_rx_undersize_g += readl(mmcaddr + MMC_XGMAC_RX_UNDER);\n\tmmc->mmc_rx_oversize_g += readl(mmcaddr + MMC_XGMAC_RX_OVER);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_64OCT_GB,\n\t\t\t     &mmc->mmc_rx_64_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_65OCT_GB,\n\t\t\t     &mmc->mmc_rx_65_to_127_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_128OCT_GB,\n\t\t\t     &mmc->mmc_rx_128_to_255_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_256OCT_GB,\n\t\t\t     &mmc->mmc_rx_256_to_511_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_512OCT_GB,\n\t\t\t     &mmc->mmc_rx_512_to_1023_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_1024OCT_GB,\n\t\t\t     &mmc->mmc_rx_1024_to_max_octets_gb);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_UNI_PKT_G,\n\t\t\t     &mmc->mmc_rx_unicast_g);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_LENGTH_ERR,\n\t\t\t     &mmc->mmc_rx_length_error);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_RANGE,\n\t\t\t     &mmc->mmc_rx_autofrangetype);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_PAUSE,\n\t\t\t     &mmc->mmc_rx_pause_frames);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_FIFOOVER_PKT,\n\t\t\t     &mmc->mmc_rx_fifo_overflow);\n\tdwxgmac_read_mmc_reg(mmcaddr, MMC_XGMAC_RX_VLAN_PKT_GB,\n\t\t\t     &mmc->mmc_rx_vlan_frames_gb);\n\tmmc->mmc_rx_watchdog_error += readl(mmcaddr + MMC_XGMAC_RX_WATCHDOG_ERR);\n\n\tmmc->mmc_tx_fpe_fragment_cntr += readl(mmcaddr + MMC_XGMAC_TX_FPE_FRAG);\n\tmmc->mmc_tx_hold_req_cntr += readl(mmcaddr + MMC_XGMAC_TX_HOLD_REQ);\n\tmmc->mmc_rx_packet_assembly_err_cntr +=\n\t\treadl(mmcaddr + MMC_XGMAC_RX_PKT_ASSEMBLY_ERR);\n\tmmc->mmc_rx_packet_smd_err_cntr +=\n\t\treadl(mmcaddr + MMC_XGMAC_RX_PKT_SMD_ERR);\n\tmmc->mmc_rx_packet_assembly_ok_cntr +=\n\t\treadl(mmcaddr + MMC_XGMAC_RX_PKT_ASSEMBLY_OK);\n\tmmc->mmc_rx_fpe_fragment_cntr +=\n\t\treadl(mmcaddr + MMC_XGMAC_RX_FPE_FRAG);\n}\n\nconst struct stmmac_mmc_ops dwxgmac_mmc_ops = {\n\t.ctrl = dwxgmac_mmc_ctrl,\n\t.intr_all_mask = dwxgmac_mmc_intr_all_mask,\n\t.read = dwxgmac_mmc_read,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}