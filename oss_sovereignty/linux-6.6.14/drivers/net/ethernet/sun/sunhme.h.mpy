{
  "module_name": "sunhme.h",
  "hash_id": "3f0c6503e36d40574b95b5c1e9c019e1925095cbfed5b77076ac152e4bdef26d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/sun/sunhme.h",
  "human_readable_source": " \n \n\n#ifndef _SUNHME_H\n#define _SUNHME_H\n\n#include <linux/pci.h>\n\n \n#define GREG_SWRESET\t0x000UL\t \n#define GREG_CFG\t0x004UL\t \n#define GREG_STAT\t0x100UL\t \n#define GREG_IMASK\t0x104UL\t \n#define GREG_REG_SIZE\t0x108UL\n\n \n#define GREG_RESET_ETX         0x01\n#define GREG_RESET_ERX         0x02\n#define GREG_RESET_ALL         0x03\n\n \n#define GREG_CFG_BURSTMSK      0x03\n#define GREG_CFG_BURST16       0x00\n#define GREG_CFG_BURST32       0x01\n#define GREG_CFG_BURST64       0x02\n#define GREG_CFG_64BIT         0x04\n#define GREG_CFG_PARITY        0x08\n#define GREG_CFG_RESV          0x10\n\n \n#define GREG_STAT_GOTFRAME     0x00000001  \n#define GREG_STAT_RCNTEXP      0x00000002  \n#define GREG_STAT_ACNTEXP      0x00000004  \n#define GREG_STAT_CCNTEXP      0x00000008  \n#define GREG_STAT_LCNTEXP      0x00000010  \n#define GREG_STAT_RFIFOVF      0x00000020  \n#define GREG_STAT_CVCNTEXP     0x00000040  \n#define GREG_STAT_STSTERR      0x00000080  \n#define GREG_STAT_SENTFRAME    0x00000100  \n#define GREG_STAT_TFIFO_UND    0x00000200  \n#define GREG_STAT_MAXPKTERR    0x00000400  \n#define GREG_STAT_NCNTEXP      0x00000800  \n#define GREG_STAT_ECNTEXP      0x00001000  \n#define GREG_STAT_LCCNTEXP     0x00002000  \n#define GREG_STAT_FCNTEXP      0x00004000  \n#define GREG_STAT_DTIMEXP      0x00008000  \n#define GREG_STAT_RXTOHOST     0x00010000  \n#define GREG_STAT_NORXD        0x00020000  \n#define GREG_STAT_RXERR        0x00040000  \n#define GREG_STAT_RXLATERR     0x00080000  \n#define GREG_STAT_RXPERR       0x00100000  \n#define GREG_STAT_RXTERR       0x00200000  \n#define GREG_STAT_EOPERR       0x00400000  \n#define GREG_STAT_MIFIRQ       0x00800000  \n#define GREG_STAT_HOSTTOTX     0x01000000  \n#define GREG_STAT_TXALL        0x02000000  \n#define GREG_STAT_TXEACK       0x04000000  \n#define GREG_STAT_TXLERR       0x08000000  \n#define GREG_STAT_TXPERR       0x10000000  \n#define GREG_STAT_TXTERR       0x20000000  \n#define GREG_STAT_SLVERR       0x40000000  \n#define GREG_STAT_SLVPERR      0x80000000  \n\n \n#define GREG_STAT_ERRORS       0xfc7efefc\n\n \n#define GREG_IMASK_GOTFRAME    0x00000001  \n#define GREG_IMASK_RCNTEXP     0x00000002  \n#define GREG_IMASK_ACNTEXP     0x00000004  \n#define GREG_IMASK_CCNTEXP     0x00000008  \n#define GREG_IMASK_LCNTEXP     0x00000010  \n#define GREG_IMASK_RFIFOVF     0x00000020  \n#define GREG_IMASK_CVCNTEXP    0x00000040  \n#define GREG_IMASK_STSTERR     0x00000080  \n#define GREG_IMASK_SENTFRAME   0x00000100  \n#define GREG_IMASK_TFIFO_UND   0x00000200  \n#define GREG_IMASK_MAXPKTERR   0x00000400  \n#define GREG_IMASK_NCNTEXP     0x00000800  \n#define GREG_IMASK_ECNTEXP     0x00001000  \n#define GREG_IMASK_LCCNTEXP    0x00002000  \n#define GREG_IMASK_FCNTEXP     0x00004000  \n#define GREG_IMASK_DTIMEXP     0x00008000  \n#define GREG_IMASK_RXTOHOST    0x00010000  \n#define GREG_IMASK_NORXD       0x00020000  \n#define GREG_IMASK_RXERR       0x00040000  \n#define GREG_IMASK_RXLATERR    0x00080000  \n#define GREG_IMASK_RXPERR      0x00100000  \n#define GREG_IMASK_RXTERR      0x00200000  \n#define GREG_IMASK_EOPERR      0x00400000  \n#define GREG_IMASK_MIFIRQ      0x00800000  \n#define GREG_IMASK_HOSTTOTX    0x01000000  \n#define GREG_IMASK_TXALL       0x02000000  \n#define GREG_IMASK_TXEACK      0x04000000  \n#define GREG_IMASK_TXLERR      0x08000000  \n#define GREG_IMASK_TXPERR      0x10000000  \n#define GREG_IMASK_TXTERR      0x20000000  \n#define GREG_IMASK_SLVERR      0x40000000  \n#define GREG_IMASK_SLVPERR     0x80000000  \n\n \n#define ETX_PENDING\t0x00UL\t \n#define ETX_CFG\t\t0x04UL\t \n#define ETX_RING\t0x08UL\t \n#define ETX_BBASE\t0x0cUL\t \n#define ETX_BDISP\t0x10UL\t \n#define ETX_FIFOWPTR\t0x14UL\t \n#define ETX_FIFOSWPTR\t0x18UL\t \n#define ETX_FIFORPTR\t0x1cUL\t \n#define ETX_FIFOSRPTR\t0x20UL\t \n#define ETX_FIFOPCNT\t0x24UL\t \n#define ETX_SMACHINE\t0x28UL\t \n#define ETX_RSIZE\t0x2cUL\t \n#define ETX_BPTR\t0x30UL\t \n#define ETX_REG_SIZE\t0x34UL\n\n \n#define ETX_TP_DMAWAKEUP         0x00000001  \n\n \n#define ETX_CFG_DMAENABLE        0x00000001  \n#define ETX_CFG_FIFOTHRESH       0x000003fe  \n#define ETX_CFG_IRQDAFTER        0x00000400  \n#define ETX_CFG_IRQDBEFORE       0x00000000  \n\n#define ETX_RSIZE_SHIFT          4\n\n \n#define ERX_CFG\t\t0x00UL\t \n#define ERX_RING\t0x04UL\t \n#define ERX_BPTR\t0x08UL\t \n#define ERX_FIFOWPTR\t0x0cUL\t \n#define ERX_FIFOSWPTR\t0x10UL\t \n#define ERX_FIFORPTR\t0x14UL\t \n#define ERX_FIFOSRPTR\t0x18UL\t \n#define ERX_SMACHINE\t0x1cUL\t \n#define ERX_REG_SIZE\t0x20UL\n\n \n#define ERX_CFG_DMAENABLE    0x00000001  \n#define ERX_CFG_RESV1        0x00000006  \n#define ERX_CFG_BYTEOFFSET   0x00000038  \n#define ERX_CFG_RESV2        0x000001c0  \n#define ERX_CFG_SIZE32       0x00000000  \n#define ERX_CFG_SIZE64       0x00000200  \n#define ERX_CFG_SIZE128      0x00000400  \n#define ERX_CFG_SIZE256      0x00000600  \n#define ERX_CFG_RESV3        0x0000f800  \n#define ERX_CFG_CSUMSTART    0x007f0000  \n\n \n#define BMAC_XIFCFG\t0x0000UL\t \n\t \n#define BMAC_TXSWRESET\t0x208UL\t \n#define BMAC_TXCFG\t0x20cUL\t \n#define BMAC_IGAP1\t0x210UL\t \n#define BMAC_IGAP2\t0x214UL\t \n#define BMAC_ALIMIT\t0x218UL\t \n#define BMAC_STIME\t0x21cUL\t \n#define BMAC_PLEN\t0x220UL\t \n#define BMAC_PPAT\t0x224UL\t \n#define BMAC_TXSDELIM\t0x228UL\t \n#define BMAC_JSIZE\t0x22cUL\t \n#define BMAC_TXMAX\t0x230UL\t \n#define BMAC_TXMIN\t0x234UL\t \n#define BMAC_PATTEMPT\t0x238UL\t \n#define BMAC_DTCTR\t0x23cUL\t \n#define BMAC_NCCTR\t0x240UL\t \n#define BMAC_FCCTR\t0x244UL\t \n#define BMAC_EXCTR\t0x248UL\t \n#define BMAC_LTCTR\t0x24cUL\t \n#define BMAC_RSEED\t0x250UL\t \n#define BMAC_TXSMACHINE\t0x254UL\t \n\t \n#define BMAC_RXSWRESET\t0x308UL\t \n#define BMAC_RXCFG\t0x30cUL\t \n#define BMAC_RXMAX\t0x310UL\t \n#define BMAC_RXMIN\t0x314UL\t \n#define BMAC_MACADDR2\t0x318UL\t \n#define BMAC_MACADDR1\t0x31cUL\t \n#define BMAC_MACADDR0\t0x320UL\t \n#define BMAC_FRCTR\t0x324UL\t \n#define BMAC_GLECTR\t0x328UL\t \n#define BMAC_UNALECTR\t0x32cUL\t \n#define BMAC_RCRCECTR\t0x330UL\t \n#define BMAC_RXSMACHINE\t0x334UL\t \n#define BMAC_RXCVALID\t0x338UL\t \n\t \n#define BMAC_HTABLE3\t0x340UL\t \n#define BMAC_HTABLE2\t0x344UL\t \n#define BMAC_HTABLE1\t0x348UL\t \n#define BMAC_HTABLE0\t0x34cUL\t \n#define BMAC_AFILTER2\t0x350UL\t \n#define BMAC_AFILTER1\t0x354UL\t \n#define BMAC_AFILTER0\t0x358UL\t \n#define BMAC_AFMASK\t0x35cUL\t \n#define BMAC_REG_SIZE\t0x360UL\n\n \n#define BIGMAC_XCFG_ODENABLE  0x00000001  \n#define BIGMAC_XCFG_XLBACK    0x00000002  \n#define BIGMAC_XCFG_MLBACK    0x00000004  \n#define BIGMAC_XCFG_MIIDISAB  0x00000008  \n#define BIGMAC_XCFG_SQENABLE  0x00000010  \n#define BIGMAC_XCFG_SQETWIN   0x000003e0  \n#define BIGMAC_XCFG_LANCE     0x00000010  \n#define BIGMAC_XCFG_LIPG0     0x000003e0  \n\n \n#define BIGMAC_TXCFG_ENABLE   0x00000001  \n#define BIGMAC_TXCFG_SMODE    0x00000020  \n#define BIGMAC_TXCFG_CIGN     0x00000040  \n#define BIGMAC_TXCFG_FCSOFF   0x00000080  \n#define BIGMAC_TXCFG_DBACKOFF 0x00000100  \n#define BIGMAC_TXCFG_FULLDPLX 0x00000200  \n#define BIGMAC_TXCFG_DGIVEUP  0x00000400  \n\n \n#define BIGMAC_RXCFG_ENABLE   0x00000001  \n#define BIGMAC_RXCFG_PSTRIP   0x00000020  \n#define BIGMAC_RXCFG_PMISC    0x00000040  \n#define BIGMAC_RXCFG_DERR     0x00000080  \n#define BIGMAC_RXCFG_DCRCS    0x00000100  \n#define BIGMAC_RXCFG_REJME    0x00000200  \n#define BIGMAC_RXCFG_PGRP     0x00000400  \n#define BIGMAC_RXCFG_HENABLE  0x00000800  \n#define BIGMAC_RXCFG_AENABLE  0x00001000  \n\n \n#define TCVR_BBCLOCK\t0x00UL\t \n#define TCVR_BBDATA\t0x04UL\t \n#define TCVR_BBOENAB\t0x08UL\t \n#define TCVR_FRAME\t0x0cUL\t \n#define TCVR_CFG\t0x10UL\t \n#define TCVR_IMASK\t0x14UL\t \n#define TCVR_STATUS\t0x18UL\t \n#define TCVR_SMACHINE\t0x1cUL\t \n#define TCVR_REG_SIZE\t0x20UL\n\n \n#define FRAME_WRITE           0x50020000\n#define FRAME_READ            0x60020000\n\n \n#define TCV_CFG_PSELECT       0x00000001  \n#define TCV_CFG_PENABLE       0x00000002  \n#define TCV_CFG_BENABLE       0x00000004  \n#define TCV_CFG_PREGADDR      0x000000f8  \n#define TCV_CFG_MDIO0         0x00000100  \n#define TCV_CFG_MDIO1         0x00000200  \n#define TCV_CFG_PDADDR        0x00007c00  \n\n \n#define TCV_PADDR_ETX         0           \n#define TCV_PADDR_ITX         1           \n\n \n#define TCV_STAT_BASIC        0xffff0000  \n#define TCV_STAT_NORMAL       0x0000ffff  \n\n \n\n \n#define DP83840_CSCONFIG        0x17         \n\n \n#define CSCONFIG_RESV1          0x0001   \n#define CSCONFIG_LED4           0x0002   \n#define CSCONFIG_LED1           0x0004   \n#define CSCONFIG_RESV2          0x0008   \n#define CSCONFIG_TCVDISAB       0x0010   \n#define CSCONFIG_DFBYPASS       0x0020   \n#define CSCONFIG_GLFORCE        0x0040   \n#define CSCONFIG_CLKTRISTATE    0x0080   \n#define CSCONFIG_RESV3          0x0700   \n#define CSCONFIG_ENCODE         0x0800   \n#define CSCONFIG_RENABLE        0x1000   \n#define CSCONFIG_TCDISABLE      0x2000   \n#define CSCONFIG_RESV4          0x4000   \n#define CSCONFIG_NDISABLE       0x8000   \n\n \ntypedef u32 __bitwise hme32;\n\nstruct happy_meal_rxd {\n\thme32 rx_flags;\n\thme32 rx_addr;\n};\n\n#define RXFLAG_OWN         0x80000000  \n#define RXFLAG_OVERFLOW    0x40000000  \n#define RXFLAG_SIZE        0x3fff0000  \n#define RXFLAG_CSUM        0x0000ffff  \n\nstruct happy_meal_txd {\n\thme32 tx_flags;\n\thme32 tx_addr;\n};\n\n#define TXFLAG_OWN         0x80000000  \n#define TXFLAG_SOP         0x40000000  \n#define TXFLAG_EOP         0x20000000  \n#define TXFLAG_CSENABLE    0x10000000  \n#define TXFLAG_CSLOCATION  0x0ff00000  \n#define TXFLAG_CSBUFBEGIN  0x000fc000  \n#define TXFLAG_SIZE        0x00003fff  \n\n#define TX_RING_SIZE       32          \n#define RX_RING_SIZE       32          \n\n#if (TX_RING_SIZE < 16 || TX_RING_SIZE > 256 || (TX_RING_SIZE % 16) != 0)\n#error TX_RING_SIZE holds illegal value\n#endif\n\n#define TX_RING_MAXSIZE    256\n#define RX_RING_MAXSIZE    256\n\n \n#if (RX_RING_SIZE == 32)\n#define ERX_CFG_DEFAULT(off) (ERX_CFG_DMAENABLE|((off)<<3)|ERX_CFG_SIZE32|((14/2)<<16))\n#else\n#if (RX_RING_SIZE == 64)\n#define ERX_CFG_DEFAULT(off) (ERX_CFG_DMAENABLE|((off)<<3)|ERX_CFG_SIZE64|((14/2)<<16))\n#else\n#if (RX_RING_SIZE == 128)\n#define ERX_CFG_DEFAULT(off) (ERX_CFG_DMAENABLE|((off)<<3)|ERX_CFG_SIZE128|((14/2)<<16))\n#else\n#if (RX_RING_SIZE == 256)\n#define ERX_CFG_DEFAULT(off) (ERX_CFG_DMAENABLE|((off)<<3)|ERX_CFG_SIZE256|((14/2)<<16))\n#else\n#error RX_RING_SIZE holds illegal value\n#endif\n#endif\n#endif\n#endif\n\n#define NEXT_RX(num)       (((num) + 1) & (RX_RING_SIZE - 1))\n#define NEXT_TX(num)       (((num) + 1) & (TX_RING_SIZE - 1))\n#define PREV_RX(num)       (((num) - 1) & (RX_RING_SIZE - 1))\n#define PREV_TX(num)       (((num) - 1) & (TX_RING_SIZE - 1))\n\n#define TX_BUFFS_AVAIL(hp)                                    \\\n        (((hp)->tx_old <= (hp)->tx_new) ?                     \\\n\t  (hp)->tx_old + (TX_RING_SIZE - 1) - (hp)->tx_new :  \\\n\t\t\t    (hp)->tx_old - (hp)->tx_new - 1)\n\n#define RX_OFFSET          2\n#define RX_BUF_ALLOC_SIZE  (1546 + RX_OFFSET + 64)\n\n#define RX_COPY_THRESHOLD  256\n\nstruct hmeal_init_block {\n\tstruct happy_meal_rxd happy_meal_rxd[RX_RING_MAXSIZE];\n\tstruct happy_meal_txd happy_meal_txd[TX_RING_MAXSIZE];\n};\n\n#define hblock_offset(mem, elem) \\\n((__u32)((unsigned long)(&(((struct hmeal_init_block *)0)->mem[elem]))))\n\n \nenum happy_transceiver {\n\texternal = 0,\n\tinternal = 1,\n\tnone     = 2,\n};\n\n \nenum happy_timer_state {\n\tarbwait  = 0,   \n\tlupwait  = 1,   \n\tltrywait = 2,   \n\tasleep   = 3,   \n};\n\nstruct quattro;\n\n \nstruct happy_meal {\n\tvoid __iomem\t*gregs;\t\t\t \n\tstruct hmeal_init_block  *happy_block;\t \n\n#if defined(CONFIG_SBUS) && defined(CONFIG_PCI)\n\tu32 (*read_desc32)(hme32 *);\n\tvoid (*write_txd)(struct happy_meal_txd *, u32, u32);\n\tvoid (*write_rxd)(struct happy_meal_rxd *, u32, u32);\n#endif\n\n\t \n\tvoid\t\t\t  *happy_dev;\n\tstruct device\t\t  *dma_dev;\n\n\tspinlock_t\t\t  happy_lock;\n\n\tstruct sk_buff           *rx_skbs[RX_RING_SIZE];\n\tstruct sk_buff           *tx_skbs[TX_RING_SIZE];\n\n\tint rx_new, tx_new, rx_old, tx_old;\n\n#if defined(CONFIG_SBUS) && defined(CONFIG_PCI)\n\tu32 (*read32)(void __iomem *);\n\tvoid (*write32)(void __iomem *, u32);\n#endif\n\n\tvoid __iomem\t*etxregs;         \n\tvoid __iomem\t*erxregs;         \n\tvoid __iomem\t*bigmacregs;      \n\tvoid __iomem\t*tcvregs;         \n\n\tdma_addr_t                hblock_dvma;     \n\tunsigned int              happy_flags;     \n\tint                       irq;\n\tenum happy_transceiver    tcvr_type;       \n\tunsigned int              happy_bursts;    \n\tunsigned int              paddr;           \n\tunsigned short            hm_revision;     \n\tunsigned short            sw_bmcr;         \n\tunsigned short            sw_bmsr;         \n\tunsigned short            sw_physid1;      \n\tunsigned short            sw_physid2;      \n\tunsigned short            sw_advertise;    \n\tunsigned short            sw_lpa;          \n\tunsigned short            sw_expansion;    \n\tunsigned short            sw_csconfig;     \n\tunsigned int              auto_speed;      \n        unsigned int              forced_speed;    \n\tunsigned int              poll_data;       \n\tunsigned int              poll_flag;       \n\tunsigned int              linkcheck;       \n\tunsigned int              lnkup;           \n\tunsigned int              lnkdown;         \n\tunsigned int              lnkcnt;          \n\tstruct timer_list         happy_timer;     \n\tenum happy_timer_state    timer_state;     \n\tunsigned int              timer_ticks;     \n\n\tstruct net_device\t *dev;\t\t \n\tstruct quattro\t\t *qfe_parent;\t \n\tint\t\t\t  qfe_ent;\t \n};\n\n \n#define HFLAG_FENABLE             0x00000002       \n#define HFLAG_LANCE               0x00000004       \n#define HFLAG_RXENABLE            0x00000008       \n#define HFLAG_AUTO                0x00000010       \n#define HFLAG_FULL                0x00000020       \n#define HFLAG_MACFULL             0x00000040       \n#define HFLAG_RXCV                0x00000100       \n#define HFLAG_INIT                0x00000200       \n#define HFLAG_LINKUP              0x00000400       \n#define HFLAG_PCI                 0x00000800       \n#define HFLAG_QUATTRO\t\t  0x00001000       \n\n#define HFLAG_20_21  HFLAG_FENABLE\n#define HFLAG_NOT_A0 (HFLAG_FENABLE | HFLAG_LANCE | HFLAG_RXCV)\n\n \nstruct quattro {\n\tstruct net_device\t*happy_meals[4];\n\n\t \n\tvoid\t\t\t*quattro_dev;\n\n\tstruct quattro\t\t*next;\n\n\t \n#ifdef CONFIG_SBUS\n\tstruct linux_prom_ranges  ranges[8];\n#endif\n\tint\t\t\t  nranges;\n};\n\n \n#define ALIGNED_RX_SKB_ADDR(addr) \\\n        ((((unsigned long)(addr) + (64UL - 1UL)) & ~(64UL - 1UL)) - (unsigned long)(addr))\n#define happy_meal_alloc_skb(__length, __gfp_flags) \\\n({\tstruct sk_buff *__skb; \\\n\t__skb = alloc_skb((__length) + 64, (__gfp_flags)); \\\n\tif(__skb) { \\\n\t\tint __offset = (int) ALIGNED_RX_SKB_ADDR(__skb->data); \\\n\t\tif(__offset) \\\n\t\t\tskb_reserve(__skb, __offset); \\\n\t} \\\n\t__skb; \\\n})\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}