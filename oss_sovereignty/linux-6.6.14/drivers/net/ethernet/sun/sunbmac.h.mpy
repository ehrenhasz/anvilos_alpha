{
  "module_name": "sunbmac.h",
  "hash_id": "aef8ad9d97a2f462f6b7807e8ff38e4f401febcadebfe001d7e4c8f664700f5e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/sun/sunbmac.h",
  "human_readable_source": " \n \n\n#ifndef _SUNBMAC_H\n#define _SUNBMAC_H\n\n \n#define GLOB_CTRL\t0x00UL\t \n#define GLOB_STAT\t0x04UL\t \n#define GLOB_PSIZE\t0x08UL\t \n#define GLOB_MSIZE\t0x0cUL\t \n#define GLOB_RSIZE\t0x10UL\t \n#define GLOB_TSIZE\t0x14UL\t \n#define GLOB_REG_SIZE\t0x18UL\n\n#define GLOB_CTRL_MMODE       0x40000000  \n#define GLOB_CTRL_BMODE       0x10000000  \n#define GLOB_CTRL_EPAR        0x00000020  \n#define GLOB_CTRL_ACNTRL      0x00000018  \n#define GLOB_CTRL_B64         0x00000004  \n#define GLOB_CTRL_B32         0x00000002  \n#define GLOB_CTRL_B16         0x00000000  \n#define GLOB_CTRL_RESET       0x00000001  \n\n#define GLOB_STAT_TX          0x00000008  \n#define GLOB_STAT_RX          0x00000004  \n#define GLOB_STAT_BM          0x00000002  \n#define GLOB_STAT_ER          0x00000001  \n\n#define GLOB_PSIZE_2048       0x00        \n#define GLOB_PSIZE_4096       0x01        \n#define GLOB_PSIZE_6144       0x10        \n#define GLOB_PSIZE_8192       0x11        \n\n \n#define CREG_CTRL\t0x00UL\t \n#define CREG_STAT\t0x04UL\t \n#define CREG_RXDS\t0x08UL\t \n#define CREG_TXDS\t0x0cUL\t \n#define CREG_RIMASK\t0x10UL\t \n#define CREG_TIMASK\t0x14UL\t \n#define CREG_QMASK\t0x18UL\t \n#define CREG_BMASK\t0x1cUL\t \n#define CREG_RXWBUFPTR\t0x20UL\t \n#define CREG_RXRBUFPTR\t0x24UL\t \n#define CREG_TXWBUFPTR\t0x28UL\t \n#define CREG_TXRBUFPTR\t0x2cUL\t \n#define CREG_CCNT\t0x30UL\t \n#define CREG_REG_SIZE\t0x34UL\n\n#define CREG_CTRL_TWAKEUP     0x00000001   \n\n#define CREG_STAT_BERROR      0x80000000   \n#define CREG_STAT_TXIRQ       0x00200000   \n#define CREG_STAT_TXDERROR    0x00080000   \n#define CREG_STAT_TXLERR      0x00040000   \n#define CREG_STAT_TXPERR      0x00020000   \n#define CREG_STAT_TXSERR      0x00010000   \n#define CREG_STAT_RXIRQ       0x00000020   \n#define CREG_STAT_RXDROP      0x00000010   \n#define CREG_STAT_RXSMALL     0x00000008   \n#define CREG_STAT_RXLERR      0x00000004   \n#define CREG_STAT_RXPERR      0x00000002   \n#define CREG_STAT_RXSERR      0x00000001   \n\n#define CREG_STAT_ERRORS      (CREG_STAT_BERROR|CREG_STAT_TXDERROR|CREG_STAT_TXLERR|   \\\n                               CREG_STAT_TXPERR|CREG_STAT_TXSERR|CREG_STAT_RXDROP|     \\\n                               CREG_STAT_RXSMALL|CREG_STAT_RXLERR|CREG_STAT_RXPERR|    \\\n                               CREG_STAT_RXSERR)\n\n#define CREG_QMASK_TXDERROR   0x00080000   \n#define CREG_QMASK_TXLERR     0x00040000   \n#define CREG_QMASK_TXPERR     0x00020000   \n#define CREG_QMASK_TXSERR     0x00010000   \n#define CREG_QMASK_RXDROP     0x00000010   \n#define CREG_QMASK_RXBERROR   0x00000008   \n#define CREG_QMASK_RXLEERR    0x00000004   \n#define CREG_QMASK_RXPERR     0x00000002   \n#define CREG_QMASK_RXSERR     0x00000001   \n\n \n#define BMAC_XIFCFG\t0x000UL\t \n\t \n#define BMAC_STATUS\t0x100UL\t \n#define BMAC_IMASK\t0x104UL\t \n\t \n#define BMAC_TXSWRESET\t0x208UL\t \n#define BMAC_TXCFG\t0x20cUL\t \n#define BMAC_IGAP1\t0x210UL\t \n#define BMAC_IGAP2\t0x214UL\t \n#define BMAC_ALIMIT\t0x218UL\t \n#define BMAC_STIME\t0x21cUL\t \n#define BMAC_PLEN\t0x220UL\t \n#define BMAC_PPAT\t0x224UL\t \n#define BMAC_TXDELIM\t0x228UL\t \n#define BMAC_JSIZE\t0x22cUL\t \n#define BMAC_TXPMAX\t0x230UL\t \n#define BMAC_TXPMIN\t0x234UL\t \n#define BMAC_PATTEMPT\t0x238UL\t \n#define BMAC_DTCTR\t0x23cUL\t \n#define BMAC_NCCTR\t0x240UL\t \n#define BMAC_FCCTR\t0x244UL\t \n#define BMAC_EXCTR\t0x248UL\t \n#define BMAC_LTCTR\t0x24cUL\t \n#define BMAC_RSEED\t0x250UL\t \n#define BMAC_TXSMACHINE\t0x254UL  \n\t \n#define BMAC_RXSWRESET\t0x308UL\t \n#define BMAC_RXCFG\t0x30cUL\t \n#define BMAC_RXPMAX\t0x310UL\t \n#define BMAC_RXPMIN\t0x314UL\t \n#define BMAC_MACADDR2\t0x318UL\t \n#define BMAC_MACADDR1\t0x31cUL\t \n#define BMAC_MACADDR0\t0x320UL\t \n#define BMAC_FRCTR\t0x324UL\t \n#define BMAC_GLECTR\t0x328UL\t \n#define BMAC_UNALECTR\t0x32cUL\t \n#define BMAC_RCRCECTR\t0x330UL\t \n#define BMAC_RXSMACHINE\t0x334UL\t \n#define BMAC_RXCVALID\t0x338UL\t \n\t \n#define BMAC_HTABLE3\t0x340UL\t \n#define BMAC_HTABLE2\t0x344UL\t \n#define BMAC_HTABLE1\t0x348UL\t \n#define BMAC_HTABLE0\t0x34cUL\t \n#define BMAC_AFILTER2\t0x350UL\t \n#define BMAC_AFILTER1\t0x354UL\t \n#define BMAC_AFILTER0\t0x358UL\t \n#define BMAC_AFMASK\t0x35cUL\t \n#define BMAC_REG_SIZE\t0x360UL\n\n \n#define BIGMAC_XCFG_ODENABLE   0x00000001  \n#define BIGMAC_XCFG_RESV       0x00000002  \n#define BIGMAC_XCFG_MLBACK     0x00000004  \n#define BIGMAC_XCFG_SMODE      0x00000008  \n\n \n#define BIGMAC_STAT_GOTFRAME   0x00000001  \n#define BIGMAC_STAT_RCNTEXP    0x00000002  \n#define BIGMAC_STAT_ACNTEXP    0x00000004  \n#define BIGMAC_STAT_CCNTEXP    0x00000008  \n#define BIGMAC_STAT_LCNTEXP    0x00000010  \n#define BIGMAC_STAT_RFIFOVF    0x00000020  \n#define BIGMAC_STAT_CVCNTEXP   0x00000040  \n#define BIGMAC_STAT_SENTFRAME  0x00000100  \n#define BIGMAC_STAT_TFIFO_UND  0x00000200  \n#define BIGMAC_STAT_MAXPKTERR  0x00000400  \n#define BIGMAC_STAT_NCNTEXP    0x00000800  \n#define BIGMAC_STAT_ECNTEXP    0x00001000  \n#define BIGMAC_STAT_LCCNTEXP   0x00002000  \n#define BIGMAC_STAT_FCNTEXP    0x00004000  \n#define BIGMAC_STAT_DTIMEXP    0x00008000  \n\n \n#define BIGMAC_IMASK_GOTFRAME  0x00000001  \n#define BIGMAC_IMASK_RCNTEXP   0x00000002  \n#define BIGMAC_IMASK_ACNTEXP   0x00000004  \n#define BIGMAC_IMASK_CCNTEXP   0x00000008  \n#define BIGMAC_IMASK_LCNTEXP   0x00000010  \n#define BIGMAC_IMASK_RFIFOVF   0x00000020  \n#define BIGMAC_IMASK_CVCNTEXP  0x00000040  \n#define BIGMAC_IMASK_SENTFRAME 0x00000100  \n#define BIGMAC_IMASK_TFIFO_UND 0x00000200  \n#define BIGMAC_IMASK_MAXPKTERR 0x00000400  \n#define BIGMAC_IMASK_NCNTEXP   0x00000800  \n#define BIGMAC_IMASK_ECNTEXP   0x00001000  \n#define BIGMAC_IMASK_LCCNTEXP  0x00002000  \n#define BIGMAC_IMASK_FCNTEXP   0x00004000  \n#define BIGMAC_IMASK_DTIMEXP   0x00008000  \n\n \n#define BIGMAC_TXCFG_ENABLE    0x00000001  \n#define BIGMAC_TXCFG_FIFO      0x00000010  \n#define BIGMAC_TXCFG_SMODE     0x00000020  \n#define BIGMAC_TXCFG_CIGN      0x00000040  \n#define BIGMAC_TXCFG_FCSOFF    0x00000080  \n#define BIGMAC_TXCFG_DBACKOFF  0x00000100  \n#define BIGMAC_TXCFG_FULLDPLX  0x00000200  \n\n \n#define BIGMAC_RXCFG_ENABLE    0x00000001  \n#define BIGMAC_RXCFG_FIFO      0x0000000e  \n#define BIGMAC_RXCFG_PSTRIP    0x00000020  \n#define BIGMAC_RXCFG_PMISC     0x00000040  \n#define BIGMAC_RXCFG_DERR      0x00000080  \n#define BIGMAC_RXCFG_DCRCS     0x00000100  \n#define BIGMAC_RXCFG_ME        0x00000200  \n#define BIGMAC_RXCFG_PGRP      0x00000400  \n#define BIGMAC_RXCFG_HENABLE   0x00000800  \n#define BIGMAC_RXCFG_AENABLE   0x00001000  \n\n \n#define TCVR_TPAL\t0x00UL\n#define TCVR_MPAL\t0x04UL\n#define TCVR_REG_SIZE\t0x08UL\n\n \n#define FRAME_WRITE           0x50020000\n#define FRAME_READ            0x60020000\n\n \n#define TCVR_PAL_SERIAL       0x00000001  \n#define TCVR_PAL_EXTLBACK     0x00000002  \n#define TCVR_PAL_MSENSE       0x00000004  \n#define TCVR_PAL_LTENABLE     0x00000008  \n#define TCVR_PAL_LTSTATUS     0x00000010  \n\n \n#define MGMT_PAL_DCLOCK       0x00000001  \n#define MGMT_PAL_OENAB        0x00000002  \n#define MGMT_PAL_MDIO         0x00000004  \n#define MGMT_PAL_TIMEO        0x00000008  \n#define MGMT_PAL_EXT_MDIO     MGMT_PAL_MDIO\n#define MGMT_PAL_INT_MDIO     MGMT_PAL_TIMEO\n\n \n#define BIGMAC_PHY_EXTERNAL   0  \n#define BIGMAC_PHY_INTERNAL   1  \n\n \nstruct be_rxd {\n\tu32 rx_flags;\n\tu32 rx_addr;\n};\n\n#define RXD_OWN      0x80000000  \n#define RXD_UPDATE   0x10000000  \n#define RXD_LENGTH   0x000007ff  \n\nstruct be_txd {\n\tu32 tx_flags;\n\tu32 tx_addr;\n};\n\n#define TXD_OWN      0x80000000  \n#define TXD_SOP      0x40000000  \n#define TXD_EOP      0x20000000  \n#define TXD_UPDATE   0x10000000  \n#define TXD_LENGTH   0x000007ff  \n\n#define TX_RING_MAXSIZE   256\n#define RX_RING_MAXSIZE   256\n\n#define TX_RING_SIZE      256\n#define RX_RING_SIZE      256\n\n#define NEXT_RX(num)       (((num) + 1) & (RX_RING_SIZE - 1))\n#define NEXT_TX(num)       (((num) + 1) & (TX_RING_SIZE - 1))\n#define PREV_RX(num)       (((num) - 1) & (RX_RING_SIZE - 1))\n#define PREV_TX(num)       (((num) - 1) & (TX_RING_SIZE - 1))\n\n#define TX_BUFFS_AVAIL(bp)                                    \\\n        (((bp)->tx_old <= (bp)->tx_new) ?                     \\\n\t  (bp)->tx_old + (TX_RING_SIZE - 1) - (bp)->tx_new :  \\\n\t\t\t    (bp)->tx_old - (bp)->tx_new - 1)\n\n\n#define RX_COPY_THRESHOLD  256\n#define RX_BUF_ALLOC_SIZE  (ETH_FRAME_LEN + (64 * 3))\n\nstruct bmac_init_block {\n\tstruct be_rxd be_rxd[RX_RING_MAXSIZE];\n\tstruct be_txd be_txd[TX_RING_MAXSIZE];\n};\n\n#define bib_offset(mem, elem) \\\n((__u32)((unsigned long)(&(((struct bmac_init_block *)0)->mem[elem]))))\n\n \nenum bigmac_transceiver {\n\texternal = 0,\n\tinternal = 1,\n\tnone     = 2,\n};\n\n \nenum bigmac_timer_state {\n\tltrywait = 1,   \n\tasleep   = 2,   \n};\n\nstruct bigmac {\n\tvoid __iomem\t*gregs;\t \n\tvoid __iomem\t*creg;\t \n\tvoid __iomem\t*bregs;\t \n\tvoid __iomem\t*tregs;\t \n\tstruct bmac_init_block\t*bmac_block;\t \n\tdma_addr_t\t\tbblock_dvma;\t \n\n\tspinlock_t\t\tlock;\n\n\tstruct sk_buff\t\t*rx_skbs[RX_RING_SIZE];\n\tstruct sk_buff\t\t*tx_skbs[TX_RING_SIZE];\n\n\tint rx_new, tx_new, rx_old, tx_old;\n\n\tint board_rev;\t\t\t\t \n\n\tenum bigmac_transceiver\ttcvr_type;\n\tunsigned int\t\tbigmac_bursts;\n\tunsigned int\t\tpaddr;\n\tunsigned short\t\tsw_bmsr;          \n\tunsigned short\t\tsw_bmcr;          \n\tstruct timer_list\tbigmac_timer;\n\tenum bigmac_timer_state\ttimer_state;\n\tunsigned int\t\ttimer_ticks;\n\n\tstruct platform_device\t*qec_op;\n\tstruct platform_device\t*bigmac_op;\n\tstruct net_device\t*dev;\n};\n\n \n#define ALIGNED_RX_SKB_ADDR(addr) \\\n        ((((unsigned long)(addr) + (64 - 1)) & ~(64 - 1)) - (unsigned long)(addr))\n\nstatic inline struct sk_buff *big_mac_alloc_skb(unsigned int length, gfp_t gfp_flags)\n{\n\tstruct sk_buff *skb;\n\n\tskb = alloc_skb(length + 64, gfp_flags);\n\tif(skb) {\n\t\tint offset = ALIGNED_RX_SKB_ADDR(skb->data);\n\n\t\tif(offset)\n\t\t\tskb_reserve(skb, offset);\n\t}\n\treturn skb;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}