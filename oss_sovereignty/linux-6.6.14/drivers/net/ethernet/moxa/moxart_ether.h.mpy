{
  "module_name": "moxart_ether.h",
  "hash_id": "59609acc604bbb04b698319bf057a71223b1f86586120f5ee4e8369ac5b3573c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/moxa/moxart_ether.h",
  "human_readable_source": " \n\n#ifndef _MOXART_ETHERNET_H\n#define _MOXART_ETHERNET_H\n\n#define TX_REG_OFFSET_DESC0\t0\n#define TX_REG_OFFSET_DESC1\t4\n#define TX_REG_OFFSET_DESC2\t8\n#define TX_REG_DESC_SIZE\t16\n\n#define RX_REG_OFFSET_DESC0\t0\n#define RX_REG_OFFSET_DESC1\t4\n#define RX_REG_OFFSET_DESC2\t8\n#define RX_REG_DESC_SIZE\t16\n\n#define TX_DESC0_PKT_LATE_COL\t0x1\t\t \n#define TX_DESC0_RX_PKT_EXS_COL\t0x2\t\t \n#define TX_DESC0_DMA_OWN\t0x80000000\t \n#define TX_DESC1_BUF_SIZE_MASK\t0x7ff\n#define TX_DESC1_LTS\t\t0x8000000\t \n#define TX_DESC1_FTS\t\t0x10000000\t \n#define TX_DESC1_FIFO_COMPLETE\t0x20000000\n#define TX_DESC1_INTR_COMPLETE\t0x40000000\n#define TX_DESC1_END\t\t0x80000000\n#define TX_DESC2_ADDRESS_PHYS\t0\n#define TX_DESC2_ADDRESS_VIRT\t4\n\n#define RX_DESC0_FRAME_LEN\t0\n#define RX_DESC0_FRAME_LEN_MASK\t0x7FF\n#define RX_DESC0_MULTICAST\t0x10000\n#define RX_DESC0_BROADCAST\t0x20000\n#define RX_DESC0_ERR\t\t0x40000\n#define RX_DESC0_CRC_ERR\t0x80000\n#define RX_DESC0_FTL\t\t0x100000\n#define RX_DESC0_RUNT\t\t0x200000\t \n#define RX_DESC0_ODD_NB\t\t0x400000\t \n#define RX_DESC0_LRS\t\t0x10000000\t \n#define RX_DESC0_FRS\t\t0x20000000\t \n#define RX_DESC0_DMA_OWN\t0x80000000\n#define RX_DESC1_BUF_SIZE_MASK\t0x7FF\n#define RX_DESC1_END\t\t0x80000000\n#define RX_DESC2_ADDRESS_PHYS\t0\n#define RX_DESC2_ADDRESS_VIRT\t4\n\n#define TX_DESC_NUM\t\t64\n#define TX_DESC_NUM_MASK\t(TX_DESC_NUM - 1)\n#define TX_NEXT(N)\t\t(((N) + 1) & (TX_DESC_NUM_MASK))\n#define TX_BUF_SIZE\t\t1600\n#define TX_BUF_SIZE_MAX\t\t(TX_DESC1_BUF_SIZE_MASK + 1)\n#define TX_WAKE_THRESHOLD\t16\n\n#define RX_DESC_NUM\t\t64\n#define RX_DESC_NUM_MASK\t(RX_DESC_NUM - 1)\n#define RX_NEXT(N)\t\t(((N) + 1) & (RX_DESC_NUM_MASK))\n#define RX_BUF_SIZE\t\t1600\n#define RX_BUF_SIZE_MAX\t\t(RX_DESC1_BUF_SIZE_MASK + 1)\n\n#define REG_INTERRUPT_STATUS\t0\n#define REG_INTERRUPT_MASK\t4\n#define REG_MAC_MS_ADDRESS\t8\n#define REG_MAC_LS_ADDRESS\t12\n#define REG_MCAST_HASH_TABLE0\t16\n#define REG_MCAST_HASH_TABLE1\t20\n#define REG_TX_POLL_DEMAND\t24\n#define REG_RX_POLL_DEMAND\t28\n#define REG_TXR_BASE_ADDRESS\t32\n#define REG_RXR_BASE_ADDRESS\t36\n#define REG_INT_TIMER_CTRL\t40\n#define REG_APOLL_TIMER_CTRL\t44\n#define REG_DMA_BLEN_CTRL\t48\n#define REG_RESERVED1\t\t52\n#define REG_MAC_CTRL\t\t136\n#define REG_MAC_STATUS\t\t140\n#define REG_PHY_CTRL\t\t144\n#define REG_PHY_WRITE_DATA\t148\n#define REG_FLOW_CTRL\t\t152\n#define REG_BACK_PRESSURE\t156\n#define REG_RESERVED2\t\t160\n#define REG_TEST_SEED\t\t196\n#define REG_DMA_FIFO_STATE\t200\n#define REG_TEST_MODE\t\t204\n#define REG_RESERVED3\t\t208\n#define REG_TX_COL_COUNTER\t212\n#define REG_RPF_AEP_COUNTER\t216\n#define REG_XM_PG_COUNTER\t220\n#define REG_RUNT_TLC_COUNTER\t224\n#define REG_CRC_FTL_COUNTER\t228\n#define REG_RLC_RCC_COUNTER\t232\n#define REG_BROC_COUNTER\t236\n#define REG_MULCA_COUNTER\t240\n#define REG_RP_COUNTER\t\t244\n#define REG_XP_COUNTER\t\t248\n\n#define REG_PHY_CTRL_OFFSET\t0x0\n#define REG_PHY_STATUS\t\t0x1\n#define REG_PHY_ID1\t\t0x2\n#define REG_PHY_ID2\t\t0x3\n#define REG_PHY_ANA\t\t0x4\n#define REG_PHY_ANLPAR\t\t0x5\n#define REG_PHY_ANE\t\t0x6\n#define REG_PHY_ECTRL1\t\t0x10\n#define REG_PHY_QPDS\t\t0x11\n#define REG_PHY_10BOP\t\t0x12\n#define REG_PHY_ECTRL2\t\t0x13\n#define REG_PHY_FTMAC100_WRITE\t0x8000000\n#define REG_PHY_FTMAC100_READ\t0x4000000\n\n \n#define RPKT_FINISH\t\tBIT(0)\t \n#define NORXBUF\t\t\tBIT(1)\t \n#define XPKT_FINISH\t\tBIT(2)\t \n#define NOTXBUF\t\t\tBIT(3)\t \n#define XPKT_OK_INT_STS\t\tBIT(4)\t \n#define XPKT_LOST_INT_STS\tBIT(5)\t \n#define RPKT_SAV\t\tBIT(6)\t \n#define RPKT_LOST_INT_STS\tBIT(7)\t \n#define AHB_ERR\t\t\tBIT(8)\t \n#define PHYSTS_CHG\t\tBIT(9)\t \n\n \n#define RPKT_FINISH_M\t\tBIT(0)\n#define NORXBUF_M\t\tBIT(1)\n#define XPKT_FINISH_M\t\tBIT(2)\n#define NOTXBUF_M\t\tBIT(3)\n#define XPKT_OK_M\t\tBIT(4)\n#define XPKT_LOST_M\t\tBIT(5)\n#define RPKT_SAV_M\t\tBIT(6)\n#define RPKT_LOST_M\t\tBIT(7)\n#define AHB_ERR_M\t\tBIT(8)\n#define PHYSTS_CHG_M\t\tBIT(9)\n\n \n#define MAC_MADR_MASK\t\t0xffff\t \n\n \n#define TXINT_TIME_SEL\t\tBIT(15)\t \n#define TXINT_THR_MASK\t\t0x7000\n#define TXINT_CNT_MASK\t\t0xf00\n#define RXINT_TIME_SEL\t\tBIT(7)\t \n#define RXINT_THR_MASK\t\t0x70\n#define RXINT_CNT_MASK\t\t0xF\n\n \n#define TXPOLL_TIME_SEL\t\tBIT(12)\t \n#define TXPOLL_CNT_MASK\t\t0xf00\n#define TXPOLL_CNT_SHIFT_BIT\t8\n#define RXPOLL_TIME_SEL\t\tBIT(4)\t \n#define RXPOLL_CNT_MASK\t\t0xF\n#define RXPOLL_CNT_SHIFT_BIT\t0\n\n \n#define RX_THR_EN\t\tBIT(9)\t \n#define RXFIFO_HTHR_MASK\t0x1c0\n#define RXFIFO_LTHR_MASK\t0x38\n#define INCR16_EN\t\tBIT(2)\t \n#define INCR8_EN\t\tBIT(1)\t \n#define INCR4_EN\t\tBIT(0)\t \n\n \n#define RX_BROADPKT\t\tBIT(17)\t \n#define RX_MULTIPKT\t\tBIT(16)\t \n#define FULLDUP\t\t\tBIT(15)\t \n#define CRC_APD\t\t\tBIT(14)\t \n#define RCV_ALL\t\t\tBIT(12)\t \n#define RX_FTL\t\t\tBIT(11)\t \n#define RX_RUNT\t\t\tBIT(10)\t \n#define HT_MULTI_EN\t\tBIT(9)\t \n#define RCV_EN\t\t\tBIT(8)\t \n#define ENRX_IN_HALFTX\t\tBIT(6)\t \n#define XMT_EN\t\t\tBIT(5)\t \n#define CRC_DIS\t\t\tBIT(4)\t \n#define LOOP_EN\t\t\tBIT(3)\t \n#define SW_RST\t\t\tBIT(2)\t \n#define RDMA_EN\t\t\tBIT(1)\t \n#define XDMA_EN\t\t\tBIT(0)\t \n\n \n#define COL_EXCEED\t\tBIT(11)\t \n#define LATE_COL\t\tBIT(10)\t \n#define XPKT_LOST\t\tBIT(9)\t \n#define XPKT_OK\t\t\tBIT(8)\t \n#define RUNT_MAC_STS\t\tBIT(7)\t \n#define FTL_MAC_STS\t\tBIT(6)\t \n#define CRC_ERR_MAC_STS\t\tBIT(5)\n#define RPKT_LOST\t\tBIT(4)\t \n#define RPKT_SAVE\t\tBIT(3)\t \n#define COL\t\t\tBIT(2)\t \n#define MCPU_BROADCAST\t\tBIT(1)\n#define MCPU_MULTICAST\t\tBIT(0)\n\n \n#define MIIWR\t\t\tBIT(27)\t \n#define MIIRD\t\t\tBIT(26)\n#define REGAD_MASK\t\t0x3e00000\n#define PHYAD_MASK\t\t0x1f0000\n#define MIIRDATA_MASK\t\t0xffff\n\n \n#define MIIWDATA_MASK\t\t0xffff\n\n \n#define PAUSE_TIME_MASK\t\t0xffff0000\n#define FC_HIGH_MASK\t\t0xf000\n#define FC_LOW_MASK\t\t0xf00\n#define RX_PAUSE\t\tBIT(4)\t \n#define TX_PAUSED\t\tBIT(3)\t \n#define FCTHR_EN\t\tBIT(2)\t \n#define TX_PAUSE\t\tBIT(1)\t \n#define FC_EN\t\t\tBIT(0)\t \n\n \n#define BACKP_LOW_MASK\t\t0xf00\n#define BACKP_JAM_LEN_MASK\t0xf0\n#define BACKP_MODE\t\tBIT(1)\t \n#define BACKP_ENABLE\t\tBIT(0)\n\n \n#define TEST_SEED_MASK\t\t0x3fff\n\n \n#define TX_DMA_REQUEST\t\tBIT(31)\n#define RX_DMA_REQUEST\t\tBIT(30)\n#define TX_DMA_GRANT\t\tBIT(29)\n#define RX_DMA_GRANT\t\tBIT(28)\n#define TX_FIFO_EMPTY\t\tBIT(27)\n#define RX_FIFO_EMPTY\t\tBIT(26)\n#define TX_DMA2_SM_MASK\t\t0x7000\n#define TX_DMA1_SM_MASK\t\t0xf00\n#define RX_DMA2_SM_MASK\t\t0x70\n#define RX_DMA1_SM_MASK\t\t0xF\n\n \n#define SINGLE_PKT\t\tBIT(26)\t \n#define PTIMER_TEST\t\tBIT(25)\t \n#define ITIMER_TEST\t\tBIT(24)\t \n#define TEST_SEED_SELECT\tBIT(22)\n#define SEED_SELECT\t\tBIT(21)\n#define TEST_MODE\t\tBIT(20)\n#define TEST_TIME_MASK\t\t0xffc00\n#define TEST_EXCEL_MASK\t\t0x3e0\n\n \n#define TX_MCOL_MASK\t\t0xffff0000\n#define TX_MCOL_SHIFT_BIT\t16\n#define TX_SCOL_MASK\t\t0xffff\n#define TX_SCOL_SHIFT_BIT\t0\n\n \n#define RPF_MASK\t\t0xffff0000\n#define RPF_SHIFT_BIT\t\t16\n#define AEP_MASK\t\t0xffff\n#define AEP_SHIFT_BIT\t\t0\n\n \n#define XM_MASK\t\t\t0xffff0000\n#define XM_SHIFT_BIT\t\t16\n#define PG_MASK\t\t\t0xffff\n#define PG_SHIFT_BIT\t\t0\n\n \n#define RUNT_CNT_MASK\t\t0xffff0000\n#define RUNT_CNT_SHIFT_BIT\t16\n#define TLCC_MASK\t\t0xffff\n#define TLCC_SHIFT_BIT\t\t0\n\n \n#define CRCER_CNT_MASK\t\t0xffff0000\n#define CRCER_CNT_SHIFT_BIT\t16\n#define FTL_CNT_MASK\t\t0xffff\n#define FTL_CNT_SHIFT_BIT\t0\n\n \n#define RLC_MASK\t\t0xffff0000\n#define RLC_SHIFT_BIT\t\t16\n#define RCC_MASK\t\t0xffff\n#define RCC_SHIFT_BIT\t\t0\n\n \n#define AN_COMPLETE\t\t0x20\n#define LINK_STATUS\t\t0x4\n\nstruct moxart_mac_priv_t {\n\tstruct platform_device *pdev;\n\tvoid __iomem *base;\n\tunsigned int reg_maccr;\n\tunsigned int reg_imr;\n\tstruct napi_struct napi;\n\tstruct net_device *ndev;\n\n\tdma_addr_t rx_base;\n\tdma_addr_t rx_mapping[RX_DESC_NUM];\n\tvoid *rx_desc_base;\n\tunsigned char *rx_buf_base;\n\tunsigned char *rx_buf[RX_DESC_NUM];\n\tunsigned int rx_head;\n\tunsigned int rx_buf_size;\n\n\tdma_addr_t tx_base;\n\tdma_addr_t tx_mapping[TX_DESC_NUM];\n\tvoid *tx_desc_base;\n\tunsigned char *tx_buf_base;\n\tunsigned char *tx_buf[RX_DESC_NUM];\n\tunsigned int tx_head;\n\tunsigned int tx_buf_size;\n\n\tspinlock_t txlock;\n\tunsigned int tx_len[TX_DESC_NUM];\n\tstruct sk_buff *tx_skb[TX_DESC_NUM];\n\tunsigned int tx_tail;\n};\n\n#if TX_BUF_SIZE >= TX_BUF_SIZE_MAX\n#error MOXA ART Ethernet device driver TX buffer is too large!\n#endif\n#if RX_BUF_SIZE >= RX_BUF_SIZE_MAX\n#error MOXA ART Ethernet device driver RX buffer is too large!\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}