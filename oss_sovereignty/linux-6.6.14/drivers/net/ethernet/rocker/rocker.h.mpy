{
  "module_name": "rocker.h",
  "hash_id": "3689e942bf54f1c2b7e68a79c05e926bd22d8f576cc9efd5a24051c344375b1d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/rocker/rocker.h",
  "human_readable_source": " \n \n\n#ifndef _ROCKER_H\n#define _ROCKER_H\n\n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/netdevice.h>\n#include <linux/notifier.h>\n#include <net/neighbour.h>\n#include <net/switchdev.h>\n\n#include \"rocker_hw.h\"\n\nstruct rocker_desc_info {\n\tchar *data;  \n\tsize_t data_size;\n\tsize_t tlv_size;\n\tstruct rocker_desc *desc;\n\tdma_addr_t mapaddr;\n};\n\nstruct rocker_dma_ring_info {\n\tsize_t size;\n\tu32 head;\n\tu32 tail;\n\tstruct rocker_desc *desc;  \n\tdma_addr_t mapaddr;\n\tstruct rocker_desc_info *desc_info;\n\tunsigned int type;\n};\n\nstruct rocker;\n\nstruct rocker_port {\n\tstruct net_device *dev;\n\tstruct rocker *rocker;\n\tvoid *wpriv;\n\tunsigned int port_number;\n\tu32 pport;\n\tstruct napi_struct napi_tx;\n\tstruct napi_struct napi_rx;\n\tstruct rocker_dma_ring_info tx_ring;\n\tstruct rocker_dma_ring_info rx_ring;\n};\n\nstruct rocker_port *rocker_port_dev_lower_find(struct net_device *dev,\n\t\t\t\t\t       struct rocker *rocker);\n\nstruct rocker_world_ops;\n\nstruct rocker {\n\tstruct pci_dev *pdev;\n\tu8 __iomem *hw_addr;\n\tstruct msix_entry *msix_entries;\n\tunsigned int port_count;\n\tstruct rocker_port **ports;\n\tstruct {\n\t\tu64 id;\n\t} hw;\n\tspinlock_t cmd_ring_lock;\t\t \n\tstruct rocker_dma_ring_info cmd_ring;\n\tstruct rocker_dma_ring_info event_ring;\n\tstruct notifier_block fib_nb;\n\tstruct rocker_world_ops *wops;\n\tstruct workqueue_struct *rocker_owq;\n\tvoid *wpriv;\n};\n\ntypedef int (*rocker_cmd_prep_cb_t)(const struct rocker_port *rocker_port,\n\t\t\t\t    struct rocker_desc_info *desc_info,\n\t\t\t\t    void *priv);\n\ntypedef int (*rocker_cmd_proc_cb_t)(const struct rocker_port *rocker_port,\n\t\t\t\t    const struct rocker_desc_info *desc_info,\n\t\t\t\t    void *priv);\n\nint rocker_cmd_exec(struct rocker_port *rocker_port, bool nowait,\n\t\t    rocker_cmd_prep_cb_t prepare, void *prepare_priv,\n\t\t    rocker_cmd_proc_cb_t process, void *process_priv);\n\nint rocker_port_set_learning(struct rocker_port *rocker_port,\n\t\t\t     bool learning);\n\nstruct rocker_world_ops {\n\tconst char *kind;\n\tsize_t priv_size;\n\tsize_t port_priv_size;\n\tu8 mode;\n\tint (*init)(struct rocker *rocker);\n\tvoid (*fini)(struct rocker *rocker);\n\tint (*port_pre_init)(struct rocker_port *rocker_port);\n\tint (*port_init)(struct rocker_port *rocker_port);\n\tvoid (*port_fini)(struct rocker_port *rocker_port);\n\tvoid (*port_post_fini)(struct rocker_port *rocker_port);\n\tint (*port_open)(struct rocker_port *rocker_port);\n\tvoid (*port_stop)(struct rocker_port *rocker_port);\n\tint (*port_attr_stp_state_set)(struct rocker_port *rocker_port,\n\t\t\t\t       u8 state);\n\tint (*port_attr_bridge_flags_set)(struct rocker_port *rocker_port,\n\t\t\t\t\t  unsigned long brport_flags);\n\tint (*port_attr_bridge_flags_support_get)(const struct rocker_port *\n\t\t\t\t\t\t  rocker_port,\n\t\t\t\t\t\t  unsigned long *\n\t\t\t\t\t\t  p_brport_flags);\n\tint (*port_attr_bridge_ageing_time_set)(struct rocker_port *rocker_port,\n\t\t\t\t\t\tu32 ageing_time);\n\tint (*port_obj_vlan_add)(struct rocker_port *rocker_port,\n\t\t\t\t const struct switchdev_obj_port_vlan *vlan);\n\tint (*port_obj_vlan_del)(struct rocker_port *rocker_port,\n\t\t\t\t const struct switchdev_obj_port_vlan *vlan);\n\tint (*port_obj_fdb_add)(struct rocker_port *rocker_port,\n\t\t\t\tu16 vid, const unsigned char *addr);\n\tint (*port_obj_fdb_del)(struct rocker_port *rocker_port,\n\t\t\t\tu16 vid, const unsigned char *addr);\n\tint (*port_master_linked)(struct rocker_port *rocker_port,\n\t\t\t\t  struct net_device *master,\n\t\t\t\t  struct netlink_ext_ack *extack);\n\tint (*port_master_unlinked)(struct rocker_port *rocker_port,\n\t\t\t\t    struct net_device *master);\n\tint (*port_neigh_update)(struct rocker_port *rocker_port,\n\t\t\t\t struct neighbour *n);\n\tint (*port_neigh_destroy)(struct rocker_port *rocker_port,\n\t\t\t\t  struct neighbour *n);\n\tint (*port_ev_mac_vlan_seen)(struct rocker_port *rocker_port,\n\t\t\t\t     const unsigned char *addr,\n\t\t\t\t     __be16 vlan_id);\n\tint (*fib4_add)(struct rocker *rocker,\n\t\t\tconst struct fib_entry_notifier_info *fen_info);\n\tint (*fib4_del)(struct rocker *rocker,\n\t\t\tconst struct fib_entry_notifier_info *fen_info);\n\tvoid (*fib4_abort)(struct rocker *rocker);\n};\n\nextern struct rocker_world_ops rocker_ofdpa_ops;\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}