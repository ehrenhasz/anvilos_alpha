{
  "module_name": "rocker_tlv.h",
  "hash_id": "0e793635e2382fed38adfd6b4e11e74803cff9905e0b9af6b3afa468cdfb8bb8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/rocker/rocker_tlv.h",
  "human_readable_source": " \n \n\n#ifndef _ROCKER_TLV_H\n#define _ROCKER_TLV_H\n\n#include <linux/types.h>\n\n#include \"rocker_hw.h\"\n#include \"rocker.h\"\n\n#define ROCKER_TLV_ALIGNTO 8U\n#define ROCKER_TLV_ALIGN(len) \\\n\t(((len) + ROCKER_TLV_ALIGNTO - 1) & ~(ROCKER_TLV_ALIGNTO - 1))\n#define ROCKER_TLV_HDRLEN ROCKER_TLV_ALIGN(sizeof(struct rocker_tlv))\n\n \n\nstatic inline struct rocker_tlv *rocker_tlv_next(const struct rocker_tlv *tlv,\n\t\t\t\t\t\t int *remaining)\n{\n\tint totlen = ROCKER_TLV_ALIGN(tlv->len);\n\n\t*remaining -= totlen;\n\treturn (struct rocker_tlv *) ((char *) tlv + totlen);\n}\n\nstatic inline int rocker_tlv_ok(const struct rocker_tlv *tlv, int remaining)\n{\n\treturn remaining >= (int) ROCKER_TLV_HDRLEN &&\n\t       tlv->len >= ROCKER_TLV_HDRLEN &&\n\t       tlv->len <= remaining;\n}\n\n#define rocker_tlv_for_each(pos, head, len, rem)\t\\\n\tfor (pos = head, rem = len;\t\t\t\\\n\t     rocker_tlv_ok(pos, rem);\t\t\t\\\n\t     pos = rocker_tlv_next(pos, &(rem)))\n\n#define rocker_tlv_for_each_nested(pos, tlv, rem)\t\\\n\trocker_tlv_for_each(pos, rocker_tlv_data(tlv),\t\\\n\t\t\t    rocker_tlv_len(tlv), rem)\n\nstatic inline int rocker_tlv_attr_size(int payload)\n{\n\treturn ROCKER_TLV_HDRLEN + payload;\n}\n\nstatic inline int rocker_tlv_total_size(int payload)\n{\n\treturn ROCKER_TLV_ALIGN(rocker_tlv_attr_size(payload));\n}\n\nstatic inline int rocker_tlv_padlen(int payload)\n{\n\treturn rocker_tlv_total_size(payload) - rocker_tlv_attr_size(payload);\n}\n\nstatic inline int rocker_tlv_type(const struct rocker_tlv *tlv)\n{\n\treturn tlv->type;\n}\n\nstatic inline void *rocker_tlv_data(const struct rocker_tlv *tlv)\n{\n\treturn (char *) tlv + ROCKER_TLV_HDRLEN;\n}\n\nstatic inline int rocker_tlv_len(const struct rocker_tlv *tlv)\n{\n\treturn tlv->len - ROCKER_TLV_HDRLEN;\n}\n\nstatic inline u8 rocker_tlv_get_u8(const struct rocker_tlv *tlv)\n{\n\treturn *(u8 *) rocker_tlv_data(tlv);\n}\n\nstatic inline u16 rocker_tlv_get_u16(const struct rocker_tlv *tlv)\n{\n\treturn *(u16 *) rocker_tlv_data(tlv);\n}\n\nstatic inline __be16 rocker_tlv_get_be16(const struct rocker_tlv *tlv)\n{\n\treturn *(__be16 *) rocker_tlv_data(tlv);\n}\n\nstatic inline u32 rocker_tlv_get_u32(const struct rocker_tlv *tlv)\n{\n\treturn *(u32 *) rocker_tlv_data(tlv);\n}\n\nstatic inline u64 rocker_tlv_get_u64(const struct rocker_tlv *tlv)\n{\n\treturn *(u64 *) rocker_tlv_data(tlv);\n}\n\nvoid rocker_tlv_parse(const struct rocker_tlv **tb, int maxtype,\n\t\t      const char *buf, int buf_len);\n\nstatic inline void rocker_tlv_parse_nested(const struct rocker_tlv **tb,\n\t\t\t\t\t   int maxtype,\n\t\t\t\t\t   const struct rocker_tlv *tlv)\n{\n\trocker_tlv_parse(tb, maxtype, rocker_tlv_data(tlv),\n\t\t\t rocker_tlv_len(tlv));\n}\n\nstatic inline void\nrocker_tlv_parse_desc(const struct rocker_tlv **tb, int maxtype,\n\t\t      const struct rocker_desc_info *desc_info)\n{\n\trocker_tlv_parse(tb, maxtype, desc_info->data,\n\t\t\t desc_info->desc->tlv_size);\n}\n\nstatic inline struct rocker_tlv *\nrocker_tlv_start(struct rocker_desc_info *desc_info)\n{\n\treturn (struct rocker_tlv *) ((char *) desc_info->data +\n\t\t\t\t\t       desc_info->tlv_size);\n}\n\nint rocker_tlv_put(struct rocker_desc_info *desc_info,\n\t\t   int attrtype, int attrlen, const void *data);\n\nstatic inline int\nrocker_tlv_put_u8(struct rocker_desc_info *desc_info, int attrtype, u8 value)\n{\n\tu8 tmp = value;  \n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(u8), &tmp);\n}\n\nstatic inline int\nrocker_tlv_put_u16(struct rocker_desc_info *desc_info, int attrtype, u16 value)\n{\n\tu16 tmp = value;\n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(u16), &tmp);\n}\n\nstatic inline int\nrocker_tlv_put_be16(struct rocker_desc_info *desc_info, int attrtype, __be16 value)\n{\n\t__be16 tmp = value;\n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(__be16), &tmp);\n}\n\nstatic inline int\nrocker_tlv_put_u32(struct rocker_desc_info *desc_info, int attrtype, u32 value)\n{\n\tu32 tmp = value;\n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(u32), &tmp);\n}\n\nstatic inline int\nrocker_tlv_put_be32(struct rocker_desc_info *desc_info, int attrtype, __be32 value)\n{\n\t__be32 tmp = value;\n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(__be32), &tmp);\n}\n\nstatic inline int\nrocker_tlv_put_u64(struct rocker_desc_info *desc_info, int attrtype, u64 value)\n{\n\tu64 tmp = value;\n\n\treturn rocker_tlv_put(desc_info, attrtype, sizeof(u64), &tmp);\n}\n\nstatic inline struct rocker_tlv *\nrocker_tlv_nest_start(struct rocker_desc_info *desc_info, int attrtype)\n{\n\tstruct rocker_tlv *start = rocker_tlv_start(desc_info);\n\n\tif (rocker_tlv_put(desc_info, attrtype, 0, NULL) < 0)\n\t\treturn NULL;\n\n\treturn start;\n}\n\nstatic inline void rocker_tlv_nest_end(struct rocker_desc_info *desc_info,\n\t\t\t\t       struct rocker_tlv *start)\n{\n\tstart->len = (char *) rocker_tlv_start(desc_info) - (char *) start;\n}\n\nstatic inline void rocker_tlv_nest_cancel(struct rocker_desc_info *desc_info,\n\t\t\t\t\t  const struct rocker_tlv *start)\n{\n\tdesc_info->tlv_size = (const char *) start - desc_info->data;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}