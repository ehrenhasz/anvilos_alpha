{
  "module_name": "pasemi_mac.h",
  "hash_id": "69899cdc4cf68f01f0f3e3aa00a5a6d2b74b2936d697e76d2e5a501eb41ad3fa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/pasemi/pasemi_mac.h",
  "human_readable_source": " \n \n\n#ifndef PASEMI_MAC_H\n#define PASEMI_MAC_H\n\n#include <linux/ethtool.h>\n#include <linux/netdevice.h>\n#include <linux/spinlock.h>\n#include <linux/phy.h>\n\n \n#define RX_RING_SIZE 2048\n#define TX_RING_SIZE 4096\n#define CS_RING_SIZE (TX_RING_SIZE*2)\n\n\n#define MAX_CS\t2\n\nstruct pasemi_mac_txring {\n\tstruct pasemi_dmachan chan;  \n\tspinlock_t\t lock;\n\tunsigned int\t size;\n\tunsigned int\t next_to_fill;\n\tunsigned int\t next_to_clean;\n\tstruct pasemi_mac_buffer *ring_info;\n\tstruct pasemi_mac *mac;\t \n\tstruct timer_list clean_timer;\n};\n\nstruct pasemi_mac_rxring {\n\tstruct pasemi_dmachan chan;  \n\tspinlock_t\t lock;\n\tu64\t\t*buffers;\t \n\tdma_addr_t\t buf_dma;\n\tunsigned int\t size;\n\tunsigned int\t next_to_fill;\n\tunsigned int\t next_to_clean;\n\tstruct pasemi_mac_buffer *ring_info;\n\tstruct pasemi_mac *mac;\t \n};\n\nstruct pasemi_mac_csring {\n\tstruct pasemi_dmachan chan;\n\tunsigned int\tsize;\n\tunsigned int\tnext_to_fill;\n\tint\t\tevents[2];\n\tint\t\tlast_event;\n\tint\t\tfun;\n};\n\nstruct pasemi_mac {\n\tstruct net_device *netdev;\n\tstruct pci_dev *pdev;\n\tstruct pci_dev *dma_pdev;\n\tstruct pci_dev *iob_pdev;\n\tstruct napi_struct napi;\n\n\tint\t\tbufsz;  \n\tint\t\tlast_cs;\n\tint\t\tnum_cs;\n\tu32\t\tdma_if;\n\tu8\t\ttype;\n#define MAC_TYPE_GMAC\t1\n#define MAC_TYPE_XAUI\t2\n\n\tu8\t\tmac_addr[ETH_ALEN];\n\n\tstruct timer_list\trxtimer;\n\n\tstruct pasemi_mac_txring *tx;\n\tstruct pasemi_mac_rxring *rx;\n\tstruct pasemi_mac_csring *cs[MAX_CS];\n\tchar\t\ttx_irq_name[10];\t\t \n\tchar\t\trx_irq_name[10];\t\t \n\tint\tlink;\n\tint\tspeed;\n\tint\tduplex;\n\n\tunsigned int\tmsg_enable;\n};\n\n \nstruct pasemi_mac_buffer {\n\tstruct sk_buff *skb;\n\tdma_addr_t\tdma;\n};\n\n#define TX_DESC(tx, num)\t((tx)->chan.ring_virt[(num) & (TX_RING_SIZE-1)])\n#define TX_DESC_INFO(tx, num)\t((tx)->ring_info[(num) & (TX_RING_SIZE-1)])\n#define RX_DESC(rx, num)\t((rx)->chan.ring_virt[(num) & (RX_RING_SIZE-1)])\n#define RX_DESC_INFO(rx, num)\t((rx)->ring_info[(num) & (RX_RING_SIZE-1)])\n#define RX_BUFF(rx, num)\t((rx)->buffers[(num) & (RX_RING_SIZE-1)])\n#define CS_DESC(cs, num)\t((cs)->chan.ring_virt[(num) & (CS_RING_SIZE-1)])\n\n#define RING_USED(ring)\t(((ring)->next_to_fill - (ring)->next_to_clean) \\\n\t\t\t\t& ((ring)->size - 1))\n#define RING_AVAIL(ring)\t((ring->size) - RING_USED(ring))\n\n \n\n\n \nenum {\n\tPAS_MAC_CFG_PCFG = 0x80,\n\tPAS_MAC_CFG_MACCFG = 0x84,\n\tPAS_MAC_CFG_ADR0 = 0x8c,\n\tPAS_MAC_CFG_ADR1 = 0x90,\n\tPAS_MAC_CFG_TXP = 0x98,\n\tPAS_MAC_CFG_RMON = 0x100,\n\tPAS_MAC_IPC_CHNL = 0x208,\n};\n\n \n#define PAS_MAC_CFG_PCFG_PE\t\t0x80000000\n#define PAS_MAC_CFG_PCFG_CE\t\t0x40000000\n#define PAS_MAC_CFG_PCFG_BU\t\t0x20000000\n#define PAS_MAC_CFG_PCFG_TT\t\t0x10000000\n#define PAS_MAC_CFG_PCFG_TSR_M\t\t0x0c000000\n#define PAS_MAC_CFG_PCFG_TSR_10M\t0x00000000\n#define PAS_MAC_CFG_PCFG_TSR_100M\t0x04000000\n#define PAS_MAC_CFG_PCFG_TSR_1G\t\t0x08000000\n#define PAS_MAC_CFG_PCFG_TSR_10G\t0x0c000000\n#define PAS_MAC_CFG_PCFG_T24\t\t0x02000000\n#define PAS_MAC_CFG_PCFG_PR\t\t0x01000000\n#define PAS_MAC_CFG_PCFG_CRO_M\t\t0x00ff0000\n#define PAS_MAC_CFG_PCFG_CRO_S\t16\n#define PAS_MAC_CFG_PCFG_IPO_M\t\t0x0000ff00\n#define PAS_MAC_CFG_PCFG_IPO_S\t8\n#define PAS_MAC_CFG_PCFG_S1\t\t0x00000080\n#define PAS_MAC_CFG_PCFG_IO_M\t\t0x00000060\n#define PAS_MAC_CFG_PCFG_IO_MAC\t\t0x00000000\n#define PAS_MAC_CFG_PCFG_IO_OFF\t\t0x00000020\n#define PAS_MAC_CFG_PCFG_IO_IND_ETH\t0x00000040\n#define PAS_MAC_CFG_PCFG_IO_IND_IP\t0x00000060\n#define PAS_MAC_CFG_PCFG_LP\t\t0x00000010\n#define PAS_MAC_CFG_PCFG_TS\t\t0x00000008\n#define PAS_MAC_CFG_PCFG_HD\t\t0x00000004\n#define PAS_MAC_CFG_PCFG_SPD_M\t\t0x00000003\n#define PAS_MAC_CFG_PCFG_SPD_10M\t0x00000000\n#define PAS_MAC_CFG_PCFG_SPD_100M\t0x00000001\n#define PAS_MAC_CFG_PCFG_SPD_1G\t\t0x00000002\n#define PAS_MAC_CFG_PCFG_SPD_10G\t0x00000003\n\n#define PAS_MAC_CFG_MACCFG_TXT_M\t0x70000000\n#define PAS_MAC_CFG_MACCFG_TXT_S\t28\n#define PAS_MAC_CFG_MACCFG_PRES_M\t0x0f000000\n#define PAS_MAC_CFG_MACCFG_PRES_S\t24\n#define PAS_MAC_CFG_MACCFG_MAXF_M\t0x00ffff00\n#define PAS_MAC_CFG_MACCFG_MAXF_S\t8\n#define PAS_MAC_CFG_MACCFG_MAXF(x)\t(((x) << PAS_MAC_CFG_MACCFG_MAXF_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_MACCFG_MAXF_M)\n#define PAS_MAC_CFG_MACCFG_MINF_M\t0x000000ff\n#define PAS_MAC_CFG_MACCFG_MINF_S\t0\n\n#define PAS_MAC_CFG_TXP_FCF\t\t0x01000000\n#define PAS_MAC_CFG_TXP_FCE\t\t0x00800000\n#define PAS_MAC_CFG_TXP_FC\t\t0x00400000\n#define PAS_MAC_CFG_TXP_FPC_M\t\t0x00300000\n#define PAS_MAC_CFG_TXP_FPC_S\t\t20\n#define PAS_MAC_CFG_TXP_FPC(x)\t\t(((x) << PAS_MAC_CFG_TXP_FPC_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_TXP_FPC_M)\n#define PAS_MAC_CFG_TXP_RT\t\t0x00080000\n#define PAS_MAC_CFG_TXP_BL\t\t0x00040000\n#define PAS_MAC_CFG_TXP_SL_M\t\t0x00030000\n#define PAS_MAC_CFG_TXP_SL_S\t\t16\n#define PAS_MAC_CFG_TXP_SL(x)\t\t(((x) << PAS_MAC_CFG_TXP_SL_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_TXP_SL_M)\n#define PAS_MAC_CFG_TXP_COB_M\t\t0x0000f000\n#define PAS_MAC_CFG_TXP_COB_S\t\t12\n#define PAS_MAC_CFG_TXP_COB(x)\t\t(((x) << PAS_MAC_CFG_TXP_COB_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_TXP_COB_M)\n#define PAS_MAC_CFG_TXP_TIFT_M\t\t0x00000f00\n#define PAS_MAC_CFG_TXP_TIFT_S\t\t8\n#define PAS_MAC_CFG_TXP_TIFT(x)\t\t(((x) << PAS_MAC_CFG_TXP_TIFT_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_TXP_TIFT_M)\n#define PAS_MAC_CFG_TXP_TIFG_M\t\t0x000000ff\n#define PAS_MAC_CFG_TXP_TIFG_S\t\t0\n#define PAS_MAC_CFG_TXP_TIFG(x)\t\t(((x) << PAS_MAC_CFG_TXP_TIFG_S) & \\\n\t\t\t\t\t PAS_MAC_CFG_TXP_TIFG_M)\n\n#define PAS_MAC_RMON(r)\t\t\t(0x100+(r)*4)\n\n#define PAS_MAC_IPC_CHNL_DCHNO_M\t0x003f0000\n#define PAS_MAC_IPC_CHNL_DCHNO_S\t16\n#define PAS_MAC_IPC_CHNL_DCHNO(x)\t(((x) << PAS_MAC_IPC_CHNL_DCHNO_S) & \\\n\t\t\t\t\t PAS_MAC_IPC_CHNL_DCHNO_M)\n#define PAS_MAC_IPC_CHNL_BCH_M\t\t0x0000003f\n#define PAS_MAC_IPC_CHNL_BCH_S\t\t0\n#define PAS_MAC_IPC_CHNL_BCH(x)\t\t(((x) << PAS_MAC_IPC_CHNL_BCH_S) & \\\n\t\t\t\t\t PAS_MAC_IPC_CHNL_BCH_M)\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}