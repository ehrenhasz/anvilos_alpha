{
  "module_name": "i40e_dcb.h",
  "hash_id": "10126334e9f998574c3d70f4d60b88686a98ac62fda4373650a20daed670b60c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/i40e/i40e_dcb.h",
  "human_readable_source": " \n \n\n#ifndef _I40E_DCB_H_\n#define _I40E_DCB_H_\n\n#include \"i40e_type.h\"\n\n#define I40E_DCBX_STATUS_NOT_STARTED\t0\n#define I40E_DCBX_STATUS_IN_PROGRESS\t1\n#define I40E_DCBX_STATUS_DONE\t\t2\n#define I40E_DCBX_STATUS_MULTIPLE_PEERS\t3\n#define I40E_DCBX_STATUS_DISABLED\t7\n\n#define I40E_TLV_TYPE_END\t\t0\n#define I40E_TLV_TYPE_ORG\t\t127\n\n#define I40E_IEEE_8021QAZ_OUI\t\t0x0080C2\n#define I40E_IEEE_SUBTYPE_ETS_CFG\t9\n#define I40E_IEEE_SUBTYPE_ETS_REC\t10\n#define I40E_IEEE_SUBTYPE_PFC_CFG\t11\n#define I40E_IEEE_SUBTYPE_APP_PRI\t12\n\n#define I40E_CEE_DCBX_OUI\t\t0x001b21\n#define I40E_CEE_DCBX_TYPE\t\t2\n\n#define I40E_CEE_SUBTYPE_CTRL\t\t1\n#define I40E_CEE_SUBTYPE_PG_CFG\t\t2\n#define I40E_CEE_SUBTYPE_PFC_CFG\t3\n#define I40E_CEE_SUBTYPE_APP_PRI\t4\n\n#define I40E_CEE_MAX_FEAT_TYPE\t\t3\n#define I40E_LLDP_CURRENT_STATUS_XL710_OFFSET\t0x2B\n#define I40E_LLDP_CURRENT_STATUS_X722_OFFSET\t0x31\n#define I40E_LLDP_CURRENT_STATUS_OFFSET\t\t1\n#define I40E_LLDP_CURRENT_STATUS_SIZE\t\t1\n\n \n#define I40E_LLDP_TLV_LEN_SHIFT\t\t0\n#define I40E_LLDP_TLV_LEN_MASK\t\t(0x01FF << I40E_LLDP_TLV_LEN_SHIFT)\n#define I40E_LLDP_TLV_TYPE_SHIFT\t9\n#define I40E_LLDP_TLV_TYPE_MASK\t\t(0x7F << I40E_LLDP_TLV_TYPE_SHIFT)\n#define I40E_LLDP_TLV_SUBTYPE_SHIFT\t0\n#define I40E_LLDP_TLV_SUBTYPE_MASK\t(0xFF << I40E_LLDP_TLV_SUBTYPE_SHIFT)\n#define I40E_LLDP_TLV_OUI_SHIFT\t\t8\n#define I40E_LLDP_TLV_OUI_MASK\t\t(0xFFFFFF << I40E_LLDP_TLV_OUI_SHIFT)\n\n \n#define I40E_IEEE_ETS_MAXTC_SHIFT\t0\n#define I40E_IEEE_ETS_MAXTC_MASK\t(0x7 << I40E_IEEE_ETS_MAXTC_SHIFT)\n#define I40E_IEEE_ETS_CBS_SHIFT\t\t6\n#define I40E_IEEE_ETS_CBS_MASK\t\tBIT(I40E_IEEE_ETS_CBS_SHIFT)\n#define I40E_IEEE_ETS_WILLING_SHIFT\t7\n#define I40E_IEEE_ETS_WILLING_MASK\tBIT(I40E_IEEE_ETS_WILLING_SHIFT)\n#define I40E_IEEE_ETS_PRIO_0_SHIFT\t0\n#define I40E_IEEE_ETS_PRIO_0_MASK\t(0x7 << I40E_IEEE_ETS_PRIO_0_SHIFT)\n#define I40E_IEEE_ETS_PRIO_1_SHIFT\t4\n#define I40E_IEEE_ETS_PRIO_1_MASK\t(0x7 << I40E_IEEE_ETS_PRIO_1_SHIFT)\n#define I40E_CEE_PGID_PRIO_0_SHIFT\t0\n#define I40E_CEE_PGID_PRIO_0_MASK\t(0xF << I40E_CEE_PGID_PRIO_0_SHIFT)\n#define I40E_CEE_PGID_PRIO_1_SHIFT\t4\n#define I40E_CEE_PGID_PRIO_1_MASK\t(0xF << I40E_CEE_PGID_PRIO_1_SHIFT)\n#define I40E_CEE_PGID_STRICT\t\t15\n\n \n#define I40E_IEEE_TSA_STRICT\t\t0\n#define I40E_IEEE_TSA_ETS\t\t2\n\n \n#define I40E_DCB_PFC_ENABLED\t\t2\n#define I40E_DCB_PFC_FORCED_NUM_TC\t2\n#define I40E_IEEE_PFC_CAP_SHIFT\t\t0\n#define I40E_IEEE_PFC_CAP_MASK\t\t(0xF << I40E_IEEE_PFC_CAP_SHIFT)\n#define I40E_IEEE_PFC_MBC_SHIFT\t\t6\n#define I40E_IEEE_PFC_MBC_MASK\t\tBIT(I40E_IEEE_PFC_MBC_SHIFT)\n#define I40E_IEEE_PFC_WILLING_SHIFT\t7\n#define I40E_IEEE_PFC_WILLING_MASK\tBIT(I40E_IEEE_PFC_WILLING_SHIFT)\n\n \n#define I40E_IEEE_APP_SEL_SHIFT\t\t0\n#define I40E_IEEE_APP_SEL_MASK\t\t(0x7 << I40E_IEEE_APP_SEL_SHIFT)\n#define I40E_IEEE_APP_PRIO_SHIFT\t5\n#define I40E_IEEE_APP_PRIO_MASK\t\t(0x7 << I40E_IEEE_APP_PRIO_SHIFT)\n\n \n#define I40E_TLV_ID_CHASSIS_ID\t\t0\n#define I40E_TLV_ID_PORT_ID\t\t1\n#define I40E_TLV_ID_TIME_TO_LIVE\t2\n#define I40E_IEEE_TLV_ID_ETS_CFG\t3\n#define I40E_IEEE_TLV_ID_ETS_REC\t4\n#define I40E_IEEE_TLV_ID_PFC_CFG\t5\n#define I40E_IEEE_TLV_ID_APP_PRI\t6\n#define I40E_TLV_ID_END_OF_LLDPPDU\t7\n#define I40E_TLV_ID_START\t\tI40E_IEEE_TLV_ID_ETS_CFG\n\n#define I40E_IEEE_TLV_HEADER_LENGTH\t2\n#define I40E_IEEE_ETS_TLV_LENGTH\t25\n#define I40E_IEEE_PFC_TLV_LENGTH\t6\n#define I40E_IEEE_APP_TLV_LENGTH\t11\n\n \n#define I40E_IEEE_DEFAULT_ETS_TCBW\t100\n#define I40E_IEEE_DEFAULT_ETS_WILLING\t1\n#define I40E_IEEE_DEFAULT_PFC_WILLING\t1\n#define I40E_IEEE_DEFAULT_NUM_APPS\t1\n#define I40E_IEEE_DEFAULT_APP_PRIO\t3\n\n#pragma pack(1)\n \nstruct i40e_lldp_org_tlv {\n\t__be16 typelength;\n\t__be32 ouisubtype;\n\tu8 tlvinfo[1];\n};\n\nstruct i40e_cee_tlv_hdr {\n\t__be16 typelen;\n\tu8 operver;\n\tu8 maxver;\n};\n\nstruct i40e_cee_ctrl_tlv {\n\tstruct i40e_cee_tlv_hdr hdr;\n\t__be32 seqno;\n\t__be32 ackno;\n};\n\nstruct i40e_cee_feat_tlv {\n\tstruct i40e_cee_tlv_hdr hdr;\n\tu8 en_will_err;  \n#define I40E_CEE_FEAT_TLV_ENABLE_MASK\t0x80\n#define I40E_CEE_FEAT_TLV_WILLING_MASK\t0x40\n#define I40E_CEE_FEAT_TLV_ERR_MASK\t0x20\n\tu8 subtype;\n\tu8 tlvinfo[1];\n};\n\nstruct i40e_cee_app_prio {\n\t__be16 protocol;\n\tu8 upper_oui_sel;  \n#define I40E_CEE_APP_SELECTOR_MASK\t0x03\n\t__be16 lower_oui;\n\tu8 prio_map;\n};\n#pragma pack()\n\nenum i40e_get_fw_lldp_status_resp {\n\tI40E_GET_FW_LLDP_STATUS_DISABLED = 0,\n\tI40E_GET_FW_LLDP_STATUS_ENABLED = 1\n};\n\n \nstruct i40e_rx_pb_config {\n\tu32\tshared_pool_size;\n\tu32\tshared_pool_high_wm;\n\tu32\tshared_pool_low_wm;\n\tu32\tshared_pool_high_thresh[I40E_MAX_TRAFFIC_CLASS];\n\tu32\tshared_pool_low_thresh[I40E_MAX_TRAFFIC_CLASS];\n\tu32\ttc_pool_size[I40E_MAX_TRAFFIC_CLASS];\n\tu32\ttc_pool_high_wm[I40E_MAX_TRAFFIC_CLASS];\n\tu32\ttc_pool_low_wm[I40E_MAX_TRAFFIC_CLASS];\n};\n\nenum i40e_dcb_arbiter_mode {\n\tI40E_DCB_ARB_MODE_STRICT_PRIORITY = 0,\n\tI40E_DCB_ARB_MODE_ROUND_ROBIN = 1\n};\n\n#define I40E_DCB_DEFAULT_MAX_EXPONENT\t\t0xB\n#define I40E_DEFAULT_PAUSE_TIME\t\t\t0xffff\n#define I40E_MAX_FRAME_SIZE\t\t\t4608  \n\n#define I40E_DEVICE_RPB_SIZE\t\t\t968000  \n\n \n#define I40E_BT2KB(BT) (((BT) + (8 * 1024 - 1)) / (8 * 1024))\n#define I40E_B2BT(BT) ((BT) * 8)\n#define I40E_BT2B(BT) (((BT) + (8 - 1)) / 8)\n\n \n#define I40E_MAX_FRAME_TC(mfs_max, mfs_tc)\tI40E_B2BT((mfs_max) + (mfs_tc))\n\n \n#define I40E_EEE_TX_LPI_EXIT_TIME\t\t142500\n\n \n#define I40E_PCIRTT_LINK_SPEED_10G\t\t20000\n#define I40E_PCIRTT_BYTE_LINK_SPEED_20G\t\t40000\n#define I40E_PCIRTT_BYTE_LINK_SPEED_40G\t\t80000\n\n \n#define I40E_PFC_FRAME_DELAY\t\t\t672\n\n \n#define I40E_CABLE_DELAY\t\t\t5556\n\n \n#define I40E_HIGHER_LAYER_DELAY_10G\t\t6144\n\n \n \n#define I40E_INTERFACE_DELAY_10G_MAC_CONTROL\t8192\n#define I40E_INTERFACE_DELAY_10G_MAC\t\t8192\n#define I40E_INTERFACE_DELAY_10G_RS\t\t8192\n\n#define I40E_INTERFACE_DELAY_XGXS\t\t2048\n#define I40E_INTERFACE_DELAY_XAUI\t\t2048\n\n#define I40E_INTERFACE_DELAY_10G_BASEX_PCS\t2048\n#define I40E_INTERFACE_DELAY_10G_BASER_PCS\t3584\n#define I40E_INTERFACE_DELAY_LX4_PMD\t\t512\n#define I40E_INTERFACE_DELAY_CX4_PMD\t\t512\n#define I40E_INTERFACE_DELAY_SERIAL_PMA\t\t512\n#define I40E_INTERFACE_DELAY_PMD\t\t512\n\n#define I40E_INTERFACE_DELAY_10G_BASET\t\t25600\n\n \n#define I40E_DCB_1_PORT_THRESHOLD\t\t0xF\n#define I40E_DCB_1_PORT_FIFO_SIZE\t\t0x10\n#define I40E_DCB_2_PORT_THRESHOLD_LOW_NUM_TC\t0xF\n#define I40E_DCB_2_PORT_FIFO_SIZE_LOW_NUM_TC\t0x10\n#define I40E_DCB_2_PORT_THRESHOLD_HIGH_NUM_TC\t0xC\n#define I40E_DCB_2_PORT_FIFO_SIZE_HIGH_NUM_TC\t0x8\n#define I40E_DCB_4_PORT_THRESHOLD_LOW_NUM_TC\t0x9\n#define I40E_DCB_4_PORT_FIFO_SIZE_LOW_NUM_TC\t0x8\n#define I40E_DCB_4_PORT_THRESHOLD_HIGH_NUM_TC\t0x6\n#define I40E_DCB_4_PORT_FIFO_SIZE_HIGH_NUM_TC\t0x4\n#define I40E_DCB_WATERMARK_START_FACTOR\t\t0x2\n\n \n#define I40E_INTERFACE_DELAY_10G_COPPER\t\\\n\t(I40E_INTERFACE_DELAY_10G_MAC + (2 * I40E_INTERFACE_DELAY_XAUI) \\\n\t + I40E_INTERFACE_DELAY_10G_BASET)\n#define I40E_DV_TC(mfs_max, mfs_tc) \\\n\t\t((2 * I40E_MAX_FRAME_TC(mfs_max, mfs_tc)) \\\n\t\t + I40E_PFC_FRAME_DELAY \\\n\t\t + (2 * I40E_CABLE_DELAY) \\\n\t\t + (2 * I40E_INTERFACE_DELAY_10G_COPPER) \\\n\t\t + I40E_HIGHER_LAYER_DELAY_10G)\nstatic inline u32 I40E_STD_DV_TC(u32 mfs_max, u32 mfs_tc)\n{\n\treturn I40E_DV_TC(mfs_max, mfs_tc) + I40E_B2BT(mfs_max);\n}\n\n \nvoid i40e_dcb_hw_rx_fifo_config(struct i40e_hw *hw,\n\t\t\t\tenum i40e_dcb_arbiter_mode ets_mode,\n\t\t\t\tenum i40e_dcb_arbiter_mode non_ets_mode,\n\t\t\t\tu32 max_exponent, u8 lltc_map);\nvoid i40e_dcb_hw_rx_cmd_monitor_config(struct i40e_hw *hw,\n\t\t\t\t       u8 num_tc, u8 num_ports);\nvoid i40e_dcb_hw_pfc_config(struct i40e_hw *hw,\n\t\t\t    u8 pfc_en, u8 *prio_tc);\nvoid i40e_dcb_hw_set_num_tc(struct i40e_hw *hw, u8 num_tc);\nu8 i40e_dcb_hw_get_num_tc(struct i40e_hw *hw);\nvoid i40e_dcb_hw_rx_ets_bw_config(struct i40e_hw *hw, u8 *bw_share,\n\t\t\t\t  u8 *mode, u8 *prio_type);\nvoid i40e_dcb_hw_rx_up2tc_config(struct i40e_hw *hw, u8 *prio_tc);\nvoid i40e_dcb_hw_calculate_pool_sizes(struct i40e_hw *hw,\n\t\t\t\t      u8 num_ports, bool eee_enabled,\n\t\t\t\t      u8 pfc_en, u32 *mfs_tc,\n\t\t\t\t      struct i40e_rx_pb_config *pb_cfg);\nvoid i40e_dcb_hw_rx_pb_config(struct i40e_hw *hw,\n\t\t\t      struct i40e_rx_pb_config *old_pb_cfg,\n\t\t\t      struct i40e_rx_pb_config *new_pb_cfg);\nint i40e_get_dcbx_status(struct i40e_hw *hw,\n\t\t\t u16 *status);\nint i40e_lldp_to_dcb_config(u8 *lldpmib,\n\t\t\t    struct i40e_dcbx_config *dcbcfg);\nint i40e_aq_get_dcb_config(struct i40e_hw *hw, u8 mib_type,\n\t\t\t   u8 bridgetype,\n\t\t\t   struct i40e_dcbx_config *dcbcfg);\nint i40e_get_dcb_config(struct i40e_hw *hw);\nint i40e_init_dcb(struct i40e_hw *hw,\n\t\t  bool enable_mib_change);\nint\ni40e_get_fw_lldp_status(struct i40e_hw *hw,\n\t\t\tenum i40e_get_fw_lldp_status_resp *lldp_status);\nint i40e_set_dcb_config(struct i40e_hw *hw);\nint i40e_dcb_config_to_lldp(u8 *lldpmib, u16 *miblen,\n\t\t\t    struct i40e_dcbx_config *dcbcfg);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}