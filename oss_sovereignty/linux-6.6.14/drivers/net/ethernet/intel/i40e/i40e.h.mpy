{
  "module_name": "i40e.h",
  "hash_id": "42ed06191ee57910b1456e76a6f14f6c0ae42cfead47d6d01e815d6b5dd95f4d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/i40e/i40e.h",
  "human_readable_source": " \n \n\n#ifndef _I40E_H_\n#define _I40E_H_\n\n#include <net/tcp.h>\n#include <net/udp.h>\n#include <linux/types.h>\n#include <linux/errno.h>\n#include <linux/module.h>\n#include <linux/pci.h>\n#include <linux/netdevice.h>\n#include <linux/ioport.h>\n#include <linux/iommu.h>\n#include <linux/slab.h>\n#include <linux/list.h>\n#include <linux/hashtable.h>\n#include <linux/string.h>\n#include <linux/in.h>\n#include <linux/ip.h>\n#include <linux/sctp.h>\n#include <linux/pkt_sched.h>\n#include <linux/ipv6.h>\n#include <net/checksum.h>\n#include <net/ip6_checksum.h>\n#include <linux/ethtool.h>\n#include <linux/if_vlan.h>\n#include <linux/if_macvlan.h>\n#include <linux/if_bridge.h>\n#include <linux/clocksource.h>\n#include <linux/net_tstamp.h>\n#include <linux/ptp_clock_kernel.h>\n#include <net/pkt_cls.h>\n#include <net/pkt_sched.h>\n#include <net/tc_act/tc_gact.h>\n#include <net/tc_act/tc_mirred.h>\n#include <net/udp_tunnel.h>\n#include <net/xdp_sock.h>\n#include <linux/bitfield.h>\n#include \"i40e_type.h\"\n#include \"i40e_prototype.h\"\n#include <linux/net/intel/i40e_client.h>\n#include <linux/avf/virtchnl.h>\n#include \"i40e_virtchnl_pf.h\"\n#include \"i40e_txrx.h\"\n#include \"i40e_dcb.h\"\n\n \n#define I40E_MAX_VEB\t\t\t16\n\n#define I40E_MAX_NUM_DESCRIPTORS\t4096\n#define I40E_MAX_CSR_SPACE\t\t(4 * 1024 * 1024 - 64 * 1024)\n#define I40E_DEFAULT_NUM_DESCRIPTORS\t512\n#define I40E_REQ_DESCRIPTOR_MULTIPLE\t32\n#define I40E_MIN_NUM_DESCRIPTORS\t64\n#define I40E_MIN_MSIX\t\t\t2\n#define I40E_DEFAULT_NUM_VMDQ_VSI\t8  \n#define I40E_MIN_VSI_ALLOC\t\t83  \n \n#define i40e_default_queues_per_vmdq(pf) \\\n\t\t(((pf)->hw_features & I40E_HW_RSS_AQ_CAPABLE) ? 4 : 1)\n#define I40E_DEFAULT_QUEUES_PER_VF\t4\n#define I40E_MAX_VF_QUEUES\t\t16\n#define i40e_pf_get_max_q_per_tc(pf) \\\n\t\t(((pf)->hw_features & I40E_HW_128_QP_RSS_CAPABLE) ? 128 : 64)\n#define I40E_FDIR_RING_COUNT\t\t32\n#define I40E_MAX_AQ_BUF_SIZE\t\t4096\n#define I40E_AQ_LEN\t\t\t256\n#define I40E_MIN_ARQ_LEN\t\t1\n#define I40E_MIN_ASQ_LEN\t\t2\n#define I40E_AQ_WORK_LIMIT\t\t66  \n#define I40E_MAX_USER_PRIORITY\t\t8\n#define I40E_DEFAULT_TRAFFIC_CLASS\tBIT(0)\n#define I40E_QUEUE_WAIT_RETRY_LIMIT\t10\n#define I40E_INT_NAME_STR_LEN\t\t(IFNAMSIZ + 16)\n\n#define I40E_NVM_VERSION_LO_SHIFT\t0\n#define I40E_NVM_VERSION_LO_MASK\t(0xff << I40E_NVM_VERSION_LO_SHIFT)\n#define I40E_NVM_VERSION_HI_SHIFT\t12\n#define I40E_NVM_VERSION_HI_MASK\t(0xf << I40E_NVM_VERSION_HI_SHIFT)\n#define I40E_OEM_VER_BUILD_MASK\t\t0xffff\n#define I40E_OEM_VER_PATCH_MASK\t\t0xff\n#define I40E_OEM_VER_BUILD_SHIFT\t8\n#define I40E_OEM_VER_SHIFT\t\t24\n#define I40E_PHY_DEBUG_ALL \\\n\t(I40E_AQ_PHY_DEBUG_DISABLE_LINK_FW | \\\n\tI40E_AQ_PHY_DEBUG_DISABLE_ALL_LINK_FW)\n\n#define I40E_OEM_EETRACK_ID\t\t0xffffffff\n#define I40E_OEM_GEN_SHIFT\t\t24\n#define I40E_OEM_SNAP_MASK\t\t0x00ff0000\n#define I40E_OEM_SNAP_SHIFT\t\t16\n#define I40E_OEM_RELEASE_MASK\t\t0x0000ffff\n\n#define I40E_RX_DESC(R, i)\t\\\n\t(&(((union i40e_rx_desc *)((R)->desc))[i]))\n#define I40E_TX_DESC(R, i)\t\\\n\t(&(((struct i40e_tx_desc *)((R)->desc))[i]))\n#define I40E_TX_CTXTDESC(R, i)\t\\\n\t(&(((struct i40e_tx_context_desc *)((R)->desc))[i]))\n#define I40E_TX_FDIRDESC(R, i)\t\\\n\t(&(((struct i40e_filter_program_desc *)((R)->desc))[i]))\n\n \n#define I40E_BW_CREDIT_DIVISOR\t\t50  \n#define I40E_BW_MBPS_DIVISOR\t\t125000  \n#define I40E_MAX_BW_INACTIVE_ACCUM\t4  \n\n \nenum i40e_state_t {\n\t__I40E_TESTING,\n\t__I40E_CONFIG_BUSY,\n\t__I40E_CONFIG_DONE,\n\t__I40E_DOWN,\n\t__I40E_SERVICE_SCHED,\n\t__I40E_ADMINQ_EVENT_PENDING,\n\t__I40E_MDD_EVENT_PENDING,\n\t__I40E_VFLR_EVENT_PENDING,\n\t__I40E_RESET_RECOVERY_PENDING,\n\t__I40E_TIMEOUT_RECOVERY_PENDING,\n\t__I40E_MISC_IRQ_REQUESTED,\n\t__I40E_RESET_INTR_RECEIVED,\n\t__I40E_REINIT_REQUESTED,\n\t__I40E_PF_RESET_REQUESTED,\n\t__I40E_PF_RESET_AND_REBUILD_REQUESTED,\n\t__I40E_CORE_RESET_REQUESTED,\n\t__I40E_GLOBAL_RESET_REQUESTED,\n\t__I40E_EMP_RESET_INTR_RECEIVED,\n\t__I40E_SUSPENDED,\n\t__I40E_PTP_TX_IN_PROGRESS,\n\t__I40E_BAD_EEPROM,\n\t__I40E_DOWN_REQUESTED,\n\t__I40E_FD_FLUSH_REQUESTED,\n\t__I40E_FD_ATR_AUTO_DISABLED,\n\t__I40E_FD_SB_AUTO_DISABLED,\n\t__I40E_RESET_FAILED,\n\t__I40E_PORT_SUSPENDED,\n\t__I40E_VF_DISABLE,\n\t__I40E_MACVLAN_SYNC_PENDING,\n\t__I40E_TEMP_LINK_POLLING,\n\t__I40E_CLIENT_SERVICE_REQUESTED,\n\t__I40E_CLIENT_L2_CHANGE,\n\t__I40E_CLIENT_RESET,\n\t__I40E_VIRTCHNL_OP_PENDING,\n\t__I40E_RECOVERY_MODE,\n\t__I40E_VF_RESETS_DISABLED,\t \n\t__I40E_IN_REMOVE,\n\t__I40E_VFS_RELEASING,\n\t \n\t__I40E_STATE_SIZE__,\n};\n\n#define I40E_PF_RESET_FLAG\tBIT_ULL(__I40E_PF_RESET_REQUESTED)\n#define I40E_PF_RESET_AND_REBUILD_FLAG\t\\\n\tBIT_ULL(__I40E_PF_RESET_AND_REBUILD_REQUESTED)\n\n \nenum i40e_vsi_state_t {\n\t__I40E_VSI_DOWN,\n\t__I40E_VSI_NEEDS_RESTART,\n\t__I40E_VSI_SYNCING_FILTERS,\n\t__I40E_VSI_OVERFLOW_PROMISC,\n\t__I40E_VSI_REINIT_REQUESTED,\n\t__I40E_VSI_DOWN_REQUESTED,\n\t__I40E_VSI_RELEASING,\n\t \n\t__I40E_VSI_STATE_SIZE__,\n};\n\nenum i40e_interrupt_policy {\n\tI40E_INTERRUPT_BEST_CASE,\n\tI40E_INTERRUPT_MEDIUM,\n\tI40E_INTERRUPT_LOWEST\n};\n\nstruct i40e_lump_tracking {\n\tu16 num_entries;\n\tu16 list[];\n#define I40E_PILE_VALID_BIT  0x8000\n#define I40E_IWARP_IRQ_PILE_ID  (I40E_PILE_VALID_BIT - 2)\n};\n\n#define I40E_DEFAULT_ATR_SAMPLE_RATE\t20\n#define I40E_FDIR_MAX_RAW_PACKET_SIZE\t512\n#define I40E_FDIR_BUFFER_FULL_MARGIN\t10\n#define I40E_FDIR_BUFFER_HEAD_ROOM\t32\n#define I40E_FDIR_BUFFER_HEAD_ROOM_FOR_ATR (I40E_FDIR_BUFFER_HEAD_ROOM * 4)\n\n#define I40E_HKEY_ARRAY_SIZE\t((I40E_PFQF_HKEY_MAX_INDEX + 1) * 4)\n#define I40E_HLUT_ARRAY_SIZE\t((I40E_PFQF_HLUT_MAX_INDEX + 1) * 4)\n#define I40E_VF_HLUT_ARRAY_SIZE\t((I40E_VFQF_HLUT1_MAX_INDEX + 1) * 4)\n\nenum i40e_fd_stat_idx {\n\tI40E_FD_STAT_ATR,\n\tI40E_FD_STAT_SB,\n\tI40E_FD_STAT_ATR_TUNNEL,\n\tI40E_FD_STAT_PF_COUNT\n};\n#define I40E_FD_STAT_PF_IDX(pf_id) ((pf_id) * I40E_FD_STAT_PF_COUNT)\n#define I40E_FD_ATR_STAT_IDX(pf_id) \\\n\t\t\t(I40E_FD_STAT_PF_IDX(pf_id) + I40E_FD_STAT_ATR)\n#define I40E_FD_SB_STAT_IDX(pf_id)  \\\n\t\t\t(I40E_FD_STAT_PF_IDX(pf_id) + I40E_FD_STAT_SB)\n#define I40E_FD_ATR_TUNNEL_STAT_IDX(pf_id) \\\n\t\t\t(I40E_FD_STAT_PF_IDX(pf_id) + I40E_FD_STAT_ATR_TUNNEL)\n\n \nstruct i40e_rx_flow_userdef {\n\tbool flex_filter;\n\tu16 flex_word;\n\tu16 flex_offset;\n};\n\nstruct i40e_fdir_filter {\n\tstruct hlist_node fdir_node;\n\t \n\tu8 flow_type;\n\tu8 ipl4_proto;\n\t \n\t__be32 dst_ip;\n\t__be32 src_ip;\n\t__be32 dst_ip6[4];\n\t__be32 src_ip6[4];\n\t__be16 src_port;\n\t__be16 dst_port;\n\t__be32 sctp_v_tag;\n\n\t__be16 vlan_etype;\n\t__be16 vlan_tag;\n\t \n\t__be16 flex_word;\n\tu16 flex_offset;\n\tbool flex_filter;\n\n\t \n\tu16 q_index;\n\tu8  flex_off;\n\tu8  pctype;\n\tu16 dest_vsi;\n\tu8  dest_ctl;\n\tu8  fd_status;\n\tu16 cnt_index;\n\tu32 fd_id;\n};\n\n#define I40E_CLOUD_FIELD_OMAC\t\tBIT(0)\n#define I40E_CLOUD_FIELD_IMAC\t\tBIT(1)\n#define I40E_CLOUD_FIELD_IVLAN\t\tBIT(2)\n#define I40E_CLOUD_FIELD_TEN_ID\t\tBIT(3)\n#define I40E_CLOUD_FIELD_IIP\t\tBIT(4)\n\n#define I40E_CLOUD_FILTER_FLAGS_OMAC\tI40E_CLOUD_FIELD_OMAC\n#define I40E_CLOUD_FILTER_FLAGS_IMAC\tI40E_CLOUD_FIELD_IMAC\n#define I40E_CLOUD_FILTER_FLAGS_IMAC_IVLAN\t(I40E_CLOUD_FIELD_IMAC | \\\n\t\t\t\t\t\t I40E_CLOUD_FIELD_IVLAN)\n#define I40E_CLOUD_FILTER_FLAGS_IMAC_TEN_ID\t(I40E_CLOUD_FIELD_IMAC | \\\n\t\t\t\t\t\t I40E_CLOUD_FIELD_TEN_ID)\n#define I40E_CLOUD_FILTER_FLAGS_OMAC_TEN_ID_IMAC (I40E_CLOUD_FIELD_OMAC | \\\n\t\t\t\t\t\t  I40E_CLOUD_FIELD_IMAC | \\\n\t\t\t\t\t\t  I40E_CLOUD_FIELD_TEN_ID)\n#define I40E_CLOUD_FILTER_FLAGS_IMAC_IVLAN_TEN_ID (I40E_CLOUD_FIELD_IMAC | \\\n\t\t\t\t\t\t   I40E_CLOUD_FIELD_IVLAN | \\\n\t\t\t\t\t\t   I40E_CLOUD_FIELD_TEN_ID)\n#define I40E_CLOUD_FILTER_FLAGS_IIP\tI40E_CLOUD_FIELD_IIP\n\nstruct i40e_cloud_filter {\n\tstruct hlist_node cloud_node;\n\tunsigned long cookie;\n\t \n\tu8 dst_mac[ETH_ALEN];\n\tu8 src_mac[ETH_ALEN];\n\t__be16 vlan_id;\n\tu16 seid;        \n\t__be16 dst_port;\n\t__be16 src_port;\n\tu32 tenant_id;\n\tunion {\n\t\tstruct {\n\t\t\tstruct in_addr dst_ip;\n\t\t\tstruct in_addr src_ip;\n\t\t} v4;\n\t\tstruct {\n\t\t\tstruct in6_addr dst_ip6;\n\t\t\tstruct in6_addr src_ip6;\n\t\t} v6;\n\t} ip;\n#define dst_ipv6\tip.v6.dst_ip6.s6_addr32\n#define src_ipv6\tip.v6.src_ip6.s6_addr32\n#define dst_ipv4\tip.v4.dst_ip.s_addr\n#define src_ipv4\tip.v4.src_ip.s_addr\n\tu16 n_proto;     \n\tu8 ip_proto;     \n\tu8 flags;\n#define I40E_CLOUD_TNL_TYPE_NONE        0xff\n\tu8 tunnel_type;\n};\n\n#define I40E_DCB_PRIO_TYPE_STRICT\t0\n#define I40E_DCB_PRIO_TYPE_ETS\t\t1\n#define I40E_DCB_STRICT_PRIO_CREDITS\t127\n \nstruct i40e_tc_info {\n\tu16\tqoffset;\t \n\tu16\tqcount;\t\t \n\tu8\tnetdev_tc;\t \n};\n\n \nstruct i40e_tc_configuration {\n\tu8\tnumtc;\t\t \n\tu8\tenabled_tc;\t \n\tstruct i40e_tc_info tc_info[I40E_MAX_TRAFFIC_CLASS];\n};\n\n#define I40E_UDP_PORT_INDEX_UNUSED\t255\nstruct i40e_udp_port_config {\n\t \n\tu16 port;\n\tu8 type;\n\tu8 filter_index;\n};\n\n#define I40_DDP_FLASH_REGION 100\n#define I40E_PROFILE_INFO_SIZE 48\n#define I40E_MAX_PROFILE_NUM 16\n#define I40E_PROFILE_LIST_SIZE \\\n\t(I40E_PROFILE_INFO_SIZE * I40E_MAX_PROFILE_NUM + 4)\n#define I40E_DDP_PROFILE_PATH \"intel/i40e/ddp/\"\n#define I40E_DDP_PROFILE_NAME_MAX 64\n\nint i40e_ddp_load(struct net_device *netdev, const u8 *data, size_t size,\n\t\t  bool is_add);\nint i40e_ddp_flash(struct net_device *netdev, struct ethtool_flash *flash);\n\nstruct i40e_ddp_profile_list {\n\tu32 p_count;\n\tstruct i40e_profile_info p_info[];\n};\n\nstruct i40e_ddp_old_profile_list {\n\tstruct list_head list;\n\tsize_t old_ddp_size;\n\tu8 old_ddp_buf[];\n};\n\n \n#define I40E_FLEX_SET_FSIZE(fsize) (((fsize) << \\\n\t\t\t\t    I40E_PRTQF_FLX_PIT_FSIZE_SHIFT) & \\\n\t\t\t\t    I40E_PRTQF_FLX_PIT_FSIZE_MASK)\n#define I40E_FLEX_SET_DST_WORD(dst) (((dst) << \\\n\t\t\t\t     I40E_PRTQF_FLX_PIT_DEST_OFF_SHIFT) & \\\n\t\t\t\t     I40E_PRTQF_FLX_PIT_DEST_OFF_MASK)\n#define I40E_FLEX_SET_SRC_WORD(src) (((src) << \\\n\t\t\t\t     I40E_PRTQF_FLX_PIT_SOURCE_OFF_SHIFT) & \\\n\t\t\t\t     I40E_PRTQF_FLX_PIT_SOURCE_OFF_MASK)\n#define I40E_FLEX_PREP_VAL(dst, fsize, src) (I40E_FLEX_SET_DST_WORD(dst) | \\\n\t\t\t\t\t     I40E_FLEX_SET_FSIZE(fsize) | \\\n\t\t\t\t\t     I40E_FLEX_SET_SRC_WORD(src))\n\n\n#define I40E_MAX_FLEX_SRC_OFFSET 0x1F\n\n \n#define I40E_ORT_SET_IDX(idx)\t\t(((idx) << \\\n\t\t\t\t\t  I40E_GLQF_ORT_PIT_INDX_SHIFT) & \\\n\t\t\t\t\t I40E_GLQF_ORT_PIT_INDX_MASK)\n\n#define I40E_ORT_SET_COUNT(count)\t(((count) << \\\n\t\t\t\t\t  I40E_GLQF_ORT_FIELD_CNT_SHIFT) & \\\n\t\t\t\t\t I40E_GLQF_ORT_FIELD_CNT_MASK)\n\n#define I40E_ORT_SET_PAYLOAD(payload)\t(((payload) << \\\n\t\t\t\t\t  I40E_GLQF_ORT_FLX_PAYLOAD_SHIFT) & \\\n\t\t\t\t\t I40E_GLQF_ORT_FLX_PAYLOAD_MASK)\n\n#define I40E_ORT_PREP_VAL(idx, count, payload) (I40E_ORT_SET_IDX(idx) | \\\n\t\t\t\t\t\tI40E_ORT_SET_COUNT(count) | \\\n\t\t\t\t\t\tI40E_ORT_SET_PAYLOAD(payload))\n\n#define I40E_L3_GLQF_ORT_IDX\t\t34\n#define I40E_L4_GLQF_ORT_IDX\t\t35\n\n \n#define I40E_FLEX_PIT_IDX_START_L3\t3\n#define I40E_FLEX_PIT_IDX_START_L4\t6\n\n#define I40E_FLEX_PIT_TABLE_SIZE\t3\n\n#define I40E_FLEX_DEST_UNUSED\t\t63\n\n#define I40E_FLEX_INDEX_ENTRIES\t\t8\n\n \n#define I40E_FLEX_INPUT_MASK\t(I40E_FLEX_50_MASK | I40E_FLEX_51_MASK | \\\n\t\t\t\t I40E_FLEX_52_MASK | I40E_FLEX_53_MASK | \\\n\t\t\t\t I40E_FLEX_54_MASK | I40E_FLEX_55_MASK | \\\n\t\t\t\t I40E_FLEX_56_MASK | I40E_FLEX_57_MASK)\n\n#define I40E_QINT_TQCTL_VAL(qp, vector, nextq_type) \\\n\t(I40E_QINT_TQCTL_CAUSE_ENA_MASK | \\\n\t(I40E_TX_ITR << I40E_QINT_TQCTL_ITR_INDX_SHIFT) | \\\n\t((vector) << I40E_QINT_TQCTL_MSIX_INDX_SHIFT) | \\\n\t((qp) << I40E_QINT_TQCTL_NEXTQ_INDX_SHIFT) | \\\n\t(I40E_QUEUE_TYPE_##nextq_type << I40E_QINT_TQCTL_NEXTQ_TYPE_SHIFT))\n\n#define I40E_QINT_RQCTL_VAL(qp, vector, nextq_type) \\\n\t(I40E_QINT_RQCTL_CAUSE_ENA_MASK | \\\n\t(I40E_RX_ITR << I40E_QINT_RQCTL_ITR_INDX_SHIFT) | \\\n\t((vector) << I40E_QINT_RQCTL_MSIX_INDX_SHIFT) | \\\n\t((qp) << I40E_QINT_RQCTL_NEXTQ_INDX_SHIFT) | \\\n\t(I40E_QUEUE_TYPE_##nextq_type << I40E_QINT_RQCTL_NEXTQ_TYPE_SHIFT))\n\nstruct i40e_flex_pit {\n\tstruct list_head list;\n\tu16 src_offset;\n\tu8 pit_index;\n};\n\nstruct i40e_fwd_adapter {\n\tstruct net_device *netdev;\n\tint bit_no;\n};\n\nstruct i40e_channel {\n\tstruct list_head list;\n\tbool initialized;\n\tu8 type;\n\tu16 vsi_number;  \n\tu16 stat_counter_idx;\n\tu16 base_queue;\n\tu16 num_queue_pairs;  \n\tu16 seid;\n\n\tu8 enabled_tc;\n\tstruct i40e_aqc_vsi_properties_data info;\n\n\tu64 max_tx_rate;\n\tstruct i40e_fwd_adapter *fwd;\n\n\t \n\tstruct i40e_vsi *parent_vsi;\n};\n\nstruct i40e_ptp_pins_settings;\n\nstatic inline bool i40e_is_channel_macvlan(struct i40e_channel *ch)\n{\n\treturn !!ch->fwd;\n}\n\nstatic inline const u8 *i40e_channel_mac(struct i40e_channel *ch)\n{\n\tif (i40e_is_channel_macvlan(ch))\n\t\treturn ch->fwd->netdev->dev_addr;\n\telse\n\t\treturn NULL;\n}\n\n \nstruct i40e_pf {\n\tstruct pci_dev *pdev;\n\tstruct i40e_hw hw;\n\tDECLARE_BITMAP(state, __I40E_STATE_SIZE__);\n\tstruct msix_entry *msix_entries;\n\tbool fc_autoneg_status;\n\n\tu16 eeprom_version;\n\tu16 num_vmdq_vsis;          \n\tu16 num_vmdq_qps;           \n\tu16 num_vmdq_msix;          \n\tu16 num_req_vfs;            \n\tu16 num_vf_qps;             \n\tu16 num_lan_qps;            \n\tu16 num_lan_msix;           \n\tu16 num_fdsb_msix;          \n\tu16 num_iwarp_msix;         \n\tint iwarp_base_vector;\n\tint queues_left;            \n\tu16 alloc_rss_size;         \n\tu16 rss_size_max;           \n\tu16 fdir_pf_filter_count;   \n\tu16 num_alloc_vsi;          \n\tu8 atr_sample_rate;\n\tbool wol_en;\n\n\tstruct hlist_head fdir_filter_list;\n\tu16 fdir_pf_active_filters;\n\tunsigned long fd_flush_timestamp;\n\tu32 fd_flush_cnt;\n\tu32 fd_add_err;\n\tu32 fd_atr_cnt;\n\n\t \n\tu16 fd_tcp4_filter_cnt;\n\tu16 fd_udp4_filter_cnt;\n\tu16 fd_sctp4_filter_cnt;\n\tu16 fd_ip4_filter_cnt;\n\n\tu16 fd_tcp6_filter_cnt;\n\tu16 fd_udp6_filter_cnt;\n\tu16 fd_sctp6_filter_cnt;\n\tu16 fd_ip6_filter_cnt;\n\n\t \n\tstruct list_head l3_flex_pit_list;\n\tstruct list_head l4_flex_pit_list;\n\n\tstruct udp_tunnel_nic_shared udp_tunnel_shared;\n\tstruct udp_tunnel_nic_info udp_tunnel_nic;\n\n\tstruct hlist_head cloud_filter_list;\n\tu16 num_cloud_filters;\n\n\tenum i40e_interrupt_policy int_policy;\n\tu16 rx_itr_default;\n\tu16 tx_itr_default;\n\tu32 msg_enable;\n\tchar int_name[I40E_INT_NAME_STR_LEN];\n\tu16 adminq_work_limit;  \n\tunsigned long service_timer_period;\n\tunsigned long service_timer_previous;\n\tstruct timer_list service_timer;\n\tstruct work_struct service_task;\n\n\tu32 hw_features;\n#define I40E_HW_RSS_AQ_CAPABLE\t\t\tBIT(0)\n#define I40E_HW_128_QP_RSS_CAPABLE\t\tBIT(1)\n#define I40E_HW_ATR_EVICT_CAPABLE\t\tBIT(2)\n#define I40E_HW_WB_ON_ITR_CAPABLE\t\tBIT(3)\n#define I40E_HW_MULTIPLE_TCP_UDP_RSS_PCTYPE\tBIT(4)\n#define I40E_HW_NO_PCI_LINK_CHECK\t\tBIT(5)\n#define I40E_HW_100M_SGMII_CAPABLE\t\tBIT(6)\n#define I40E_HW_NO_DCB_SUPPORT\t\t\tBIT(7)\n#define I40E_HW_USE_SET_LLDP_MIB\t\tBIT(8)\n#define I40E_HW_GENEVE_OFFLOAD_CAPABLE\t\tBIT(9)\n#define I40E_HW_PTP_L4_CAPABLE\t\t\tBIT(10)\n#define I40E_HW_WOL_MC_MAGIC_PKT_WAKE\t\tBIT(11)\n#define I40E_HW_HAVE_CRT_RETIMER\t\tBIT(13)\n#define I40E_HW_OUTER_UDP_CSUM_CAPABLE\t\tBIT(14)\n#define I40E_HW_PHY_CONTROLS_LEDS\t\tBIT(15)\n#define I40E_HW_STOP_FW_LLDP\t\t\tBIT(16)\n#define I40E_HW_PORT_ID_VALID\t\t\tBIT(17)\n#define I40E_HW_RESTART_AUTONEG\t\t\tBIT(18)\n\n\tu32 flags;\n#define I40E_FLAG_RX_CSUM_ENABLED\t\tBIT(0)\n#define I40E_FLAG_MSI_ENABLED\t\t\tBIT(1)\n#define I40E_FLAG_MSIX_ENABLED\t\t\tBIT(2)\n#define I40E_FLAG_RSS_ENABLED\t\t\tBIT(3)\n#define I40E_FLAG_VMDQ_ENABLED\t\t\tBIT(4)\n#define I40E_FLAG_SRIOV_ENABLED\t\t\tBIT(5)\n#define I40E_FLAG_DCB_CAPABLE\t\t\tBIT(6)\n#define I40E_FLAG_DCB_ENABLED\t\t\tBIT(7)\n#define I40E_FLAG_FD_SB_ENABLED\t\t\tBIT(8)\n#define I40E_FLAG_FD_ATR_ENABLED\t\tBIT(9)\n#define I40E_FLAG_MFP_ENABLED\t\t\tBIT(10)\n#define I40E_FLAG_HW_ATR_EVICT_ENABLED\t\tBIT(11)\n#define I40E_FLAG_VEB_MODE_ENABLED\t\tBIT(12)\n#define I40E_FLAG_VEB_STATS_ENABLED\t\tBIT(13)\n#define I40E_FLAG_LINK_POLLING_ENABLED\t\tBIT(14)\n#define I40E_FLAG_TRUE_PROMISC_SUPPORT\t\tBIT(15)\n#define I40E_FLAG_LEGACY_RX\t\t\tBIT(16)\n#define I40E_FLAG_PTP\t\t\t\tBIT(17)\n#define I40E_FLAG_IWARP_ENABLED\t\t\tBIT(18)\n#define I40E_FLAG_LINK_DOWN_ON_CLOSE_ENABLED\tBIT(19)\n#define I40E_FLAG_SOURCE_PRUNING_DISABLED       BIT(20)\n#define I40E_FLAG_TC_MQPRIO\t\t\tBIT(21)\n#define I40E_FLAG_FD_SB_INACTIVE\t\tBIT(22)\n#define I40E_FLAG_FD_SB_TO_CLOUD_FILTER\t\tBIT(23)\n#define I40E_FLAG_DISABLE_FW_LLDP\t\tBIT(24)\n#define I40E_FLAG_RS_FEC\t\t\tBIT(25)\n#define I40E_FLAG_BASE_R_FEC\t\t\tBIT(26)\n \n#define I40E_FLAG_TOTAL_PORT_SHUTDOWN_ENABLED\tBIT(27)\n#define I40E_FLAG_VF_VLAN_PRUNING\t\tBIT(28)\n\n\tstruct i40e_client_instance *cinst;\n\tbool stat_offsets_loaded;\n\tstruct i40e_hw_port_stats stats;\n\tstruct i40e_hw_port_stats stats_offsets;\n\tu32 tx_timeout_count;\n\tu32 tx_timeout_recovery_level;\n\tunsigned long tx_timeout_last_recovery;\n\tu32 tx_sluggish_count;\n\tu32 hw_csum_rx_error;\n\tu32 led_status;\n\tu16 corer_count;  \n\tu16 globr_count;  \n\tu16 empr_count;  \n\tu16 pfr_count;  \n\tu16 sw_int_count;  \n\n\tstruct mutex switch_mutex;\n\tu16 lan_vsi;        \n\tu16 lan_veb;        \n#define I40E_NO_VEB\t0xffff\n#define I40E_NO_VSI\t0xffff\n\tu16 next_vsi;       \n\tstruct i40e_vsi **vsi;\n\tstruct i40e_veb *veb[I40E_MAX_VEB];\n\n\tstruct i40e_lump_tracking *qp_pile;\n\tstruct i40e_lump_tracking *irq_pile;\n\n\t \n\tu16 pf_seid;\n\tu16 main_vsi_seid;\n\tu16 mac_seid;\n\tstruct kobject *switch_kobj;\n#ifdef CONFIG_DEBUG_FS\n\tstruct dentry *i40e_dbg_pf;\n#endif  \n\tbool cur_promisc;\n\n\tu16 instance;  \n\n\t \n\tstruct i40e_vf *vf;\n\tint num_alloc_vfs;\t \n\tu32 vf_aq_requests;\n\tu32 arq_overflows;\t \n\n\t \n\tu16 dcbx_cap;\n\n\tstruct i40e_filter_control_settings filter_settings;\n\tstruct i40e_rx_pb_config pb_cfg;  \n\tstruct i40e_dcbx_config tmp_cfg;\n\n \n#define I40E_SDP3_2\t\t\t18\n#define I40E_SDP3_3\t\t\t19\n#define I40E_GPIO_4\t\t\t20\n#define I40E_LED2_0\t\t\t26\n#define I40E_LED2_1\t\t\t27\n#define I40E_LED3_0\t\t\t28\n#define I40E_LED3_1\t\t\t29\n#define I40E_GLGEN_GPIO_SET_SDP_DATA_HI \\\n\t(1 << I40E_GLGEN_GPIO_SET_SDP_DATA_SHIFT)\n#define I40E_GLGEN_GPIO_SET_DRV_SDP_DATA \\\n\t(1 << I40E_GLGEN_GPIO_SET_DRIVE_SDP_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_PRT_NUM_0 \\\n\t(0 << I40E_GLGEN_GPIO_CTL_PRT_NUM_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_PRT_NUM_1 \\\n\t(1 << I40E_GLGEN_GPIO_CTL_PRT_NUM_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_RESERVED\tBIT(2)\n#define I40E_GLGEN_GPIO_CTL_PRT_NUM_NA_Z \\\n\t(1 << I40E_GLGEN_GPIO_CTL_PRT_NUM_NA_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_DIR_OUT \\\n\t(1 << I40E_GLGEN_GPIO_CTL_PIN_DIR_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_TRI_DRV_HI \\\n\t(1 << I40E_GLGEN_GPIO_CTL_TRI_CTL_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_OUT_HI_RST \\\n\t(1 << I40E_GLGEN_GPIO_CTL_OUT_CTL_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_TIMESYNC_0 \\\n\t(3 << I40E_GLGEN_GPIO_CTL_PIN_FUNC_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_TIMESYNC_1 \\\n\t(4 << I40E_GLGEN_GPIO_CTL_PIN_FUNC_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN \\\n\t(0x3F << I40E_GLGEN_GPIO_CTL_PHY_PIN_NAME_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_OUT_DEFAULT \\\n\t(1 << I40E_GLGEN_GPIO_CTL_OUT_DEFAULT_SHIFT)\n#define I40E_GLGEN_GPIO_CTL_PORT_0_IN_TIMESYNC_0 \\\n\t(I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN | \\\n\t I40E_GLGEN_GPIO_CTL_TIMESYNC_0 | \\\n\t I40E_GLGEN_GPIO_CTL_RESERVED | I40E_GLGEN_GPIO_CTL_PRT_NUM_0)\n#define I40E_GLGEN_GPIO_CTL_PORT_1_IN_TIMESYNC_0 \\\n\t(I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN | \\\n\t I40E_GLGEN_GPIO_CTL_TIMESYNC_0 | \\\n\t I40E_GLGEN_GPIO_CTL_RESERVED | I40E_GLGEN_GPIO_CTL_PRT_NUM_1)\n#define I40E_GLGEN_GPIO_CTL_PORT_0_OUT_TIMESYNC_1 \\\n\t(I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN | \\\n\t I40E_GLGEN_GPIO_CTL_TIMESYNC_1 | I40E_GLGEN_GPIO_CTL_OUT_HI_RST | \\\n\t I40E_GLGEN_GPIO_CTL_TRI_DRV_HI | I40E_GLGEN_GPIO_CTL_DIR_OUT | \\\n\t I40E_GLGEN_GPIO_CTL_RESERVED | I40E_GLGEN_GPIO_CTL_PRT_NUM_0)\n#define I40E_GLGEN_GPIO_CTL_PORT_1_OUT_TIMESYNC_1 \\\n\t(I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN | \\\n\t I40E_GLGEN_GPIO_CTL_TIMESYNC_1 | I40E_GLGEN_GPIO_CTL_OUT_HI_RST | \\\n\t I40E_GLGEN_GPIO_CTL_TRI_DRV_HI | I40E_GLGEN_GPIO_CTL_DIR_OUT | \\\n\t I40E_GLGEN_GPIO_CTL_RESERVED | I40E_GLGEN_GPIO_CTL_PRT_NUM_1)\n#define I40E_GLGEN_GPIO_CTL_LED_INIT \\\n\t(I40E_GLGEN_GPIO_CTL_PRT_NUM_NA_Z | \\\n\t I40E_GLGEN_GPIO_CTL_DIR_OUT | \\\n\t I40E_GLGEN_GPIO_CTL_TRI_DRV_HI | \\\n\t I40E_GLGEN_GPIO_CTL_OUT_HI_RST | \\\n\t I40E_GLGEN_GPIO_CTL_OUT_DEFAULT | \\\n\t I40E_GLGEN_GPIO_CTL_NOT_FOR_PHY_CONN)\n#define I40E_PRTTSYN_AUX_1_INSTNT \\\n\t(1 << I40E_PRTTSYN_AUX_1_INSTNT_SHIFT)\n#define I40E_PRTTSYN_AUX_0_OUT_ENABLE \\\n\t(1 << I40E_PRTTSYN_AUX_0_OUT_ENA_SHIFT)\n#define I40E_PRTTSYN_AUX_0_OUT_CLK_MOD\t(3 << I40E_PRTTSYN_AUX_0_OUTMOD_SHIFT)\n#define I40E_PRTTSYN_AUX_0_OUT_ENABLE_CLK_MOD \\\n\t(I40E_PRTTSYN_AUX_0_OUT_ENABLE | I40E_PRTTSYN_AUX_0_OUT_CLK_MOD)\n#define I40E_PTP_HALF_SECOND\t\t500000000LL  \n#define I40E_PTP_2_SEC_DELAY\t\t2\n\n\tstruct ptp_clock *ptp_clock;\n\tstruct ptp_clock_info ptp_caps;\n\tstruct sk_buff *ptp_tx_skb;\n\tunsigned long ptp_tx_start;\n\tstruct hwtstamp_config tstamp_config;\n\tstruct timespec64 ptp_prev_hw_time;\n\tstruct work_struct ptp_pps_work;\n\tstruct work_struct ptp_extts0_work;\n\tstruct work_struct ptp_extts1_work;\n\tktime_t ptp_reset_start;\n\tstruct mutex tmreg_lock;  \n\tu32 ptp_adj_mult;\n\tu32 tx_hwtstamp_timeouts;\n\tu32 tx_hwtstamp_skipped;\n\tu32 rx_hwtstamp_cleared;\n\tu32 latch_event_flags;\n\tu64 ptp_pps_start;\n\tu32 pps_delay;\n\tspinlock_t ptp_rx_lock;  \n\tstruct ptp_pin_desc ptp_pin[3];\n\tunsigned long latch_events[4];\n\tbool ptp_tx;\n\tbool ptp_rx;\n\tstruct i40e_ptp_pins_settings *ptp_pins;\n\tu16 rss_table_size;  \n\tu32 max_bw;\n\tu32 min_bw;\n\n\tu32 ioremap_len;\n\tu32 fd_inv;\n\tu16 phy_led_val;\n\n\tu16 override_q_count;\n\tu16 last_sw_conf_flags;\n\tu16 last_sw_conf_valid_flags;\n\t \n\tstruct list_head ddp_old_prof;\n};\n\n \nstatic inline u64 i40e_addr_to_hkey(const u8 *macaddr)\n{\n\tu64 key = 0;\n\n\tether_addr_copy((u8 *)&key, macaddr);\n\treturn key;\n}\n\nenum i40e_filter_state {\n\tI40E_FILTER_INVALID = 0,\t \n\tI40E_FILTER_NEW,\t\t \n\tI40E_FILTER_ACTIVE,\t\t \n\tI40E_FILTER_FAILED,\t\t \n\tI40E_FILTER_REMOVE,\t\t \n \n};\nstruct i40e_mac_filter {\n\tstruct hlist_node hlist;\n\tu8 macaddr[ETH_ALEN];\n#define I40E_VLAN_ANY -1\n\ts16 vlan;\n\tenum i40e_filter_state state;\n};\n\n \nstruct i40e_new_mac_filter {\n\tstruct hlist_node hlist;\n\tstruct i40e_mac_filter *f;\n\n\t \n\tenum i40e_filter_state state;\n};\n\nstruct i40e_veb {\n\tstruct i40e_pf *pf;\n\tu16 idx;\n\tu16 veb_idx;\t\t \n\tu16 seid;\n\tu16 uplink_seid;\n\tu16 stats_idx;\t\t \n\tu8  enabled_tc;\n\tu16 bridge_mode;\t \n\tu16 flags;\n\tu16 bw_limit;\n\tu8  bw_max_quanta;\n\tbool is_abs_credits;\n\tu8  bw_tc_share_credits[I40E_MAX_TRAFFIC_CLASS];\n\tu16 bw_tc_limit_credits[I40E_MAX_TRAFFIC_CLASS];\n\tu8  bw_tc_max_quanta[I40E_MAX_TRAFFIC_CLASS];\n\tstruct kobject *kobj;\n\tbool stat_offsets_loaded;\n\tstruct i40e_eth_stats stats;\n\tstruct i40e_eth_stats stats_offsets;\n\tstruct i40e_veb_tc_stats tc_stats;\n\tstruct i40e_veb_tc_stats tc_stats_offsets;\n};\n\n \nstruct i40e_vsi {\n\tstruct net_device *netdev;\n\tunsigned long active_vlans[BITS_TO_LONGS(VLAN_N_VID)];\n\tbool netdev_registered;\n\tbool stat_offsets_loaded;\n\n\tu32 current_netdev_flags;\n\tDECLARE_BITMAP(state, __I40E_VSI_STATE_SIZE__);\n#define I40E_VSI_FLAG_FILTER_CHANGED\tBIT(0)\n#define I40E_VSI_FLAG_VEB_OWNER\t\tBIT(1)\n\tunsigned long flags;\n\n\t \n\tspinlock_t mac_filter_hash_lock;\n\t \n\tDECLARE_HASHTABLE(mac_filter_hash, 8);\n\tbool has_vlan_filter;\n\n\t \n\tstruct rtnl_link_stats64 net_stats;\n\tstruct rtnl_link_stats64 net_stats_offsets;\n\tstruct i40e_eth_stats eth_stats;\n\tstruct i40e_eth_stats eth_stats_offsets;\n\tu64 tx_restart;\n\tu64 tx_busy;\n\tu64 tx_linearize;\n\tu64 tx_force_wb;\n\tu64 tx_stopped;\n\tu64 rx_buf_failed;\n\tu64 rx_page_failed;\n\tu64 rx_page_reuse;\n\tu64 rx_page_alloc;\n\tu64 rx_page_waive;\n\tu64 rx_page_busy;\n\n\t \n\tstruct i40e_ring **rx_rings;\n\tstruct i40e_ring **tx_rings;\n\tstruct i40e_ring **xdp_rings;  \n\n\tu32  active_filters;\n\tu32  promisc_threshold;\n\n\tu16 work_limit;\n\tu16 int_rate_limit;\t \n\n\tu16 rss_table_size;\t \n\tu16 rss_size;\t\t \n\tu8  *rss_hkey_user;\t \n\tu8  *rss_lut_user;\t \n\n\n\tu16 max_frame;\n\tu16 rx_buf_len;\n\n\tstruct bpf_prog *xdp_prog;\n\n\t \n\tstruct i40e_q_vector **q_vectors;\n\tint num_q_vectors;\n\tint base_vector;\n\tbool irqs_ready;\n\n\tu16 seid;\t\t \n\tu16 id;\t\t\t \n\tu16 uplink_seid;\n\n\tu16 base_queue;\t\t \n\tu16 alloc_queue_pairs;\t \n\tu16 req_queue_pairs;\t \n\tu16 num_queue_pairs;\t \n\tu16 num_tx_desc;\n\tu16 num_rx_desc;\n\tenum i40e_vsi_type type;   \n\ts16 vf_id;\t\t \n\n\tstruct tc_mqprio_qopt_offload mqprio_qopt;  \n\tstruct i40e_tc_configuration tc_config;\n\tstruct i40e_aqc_vsi_properties_data info;\n\n\t \n\tu16 bw_limit;\t\t \n\tu8  bw_max_quanta;\t \n\n\t \n\tu8  bw_ets_share_credits[I40E_MAX_TRAFFIC_CLASS];\n\t \n\tu16  bw_ets_limit_credits[I40E_MAX_TRAFFIC_CLASS];\n\t \n\tu8  bw_ets_max_quanta[I40E_MAX_TRAFFIC_CLASS];\n\n\tstruct i40e_pf *back;\t \n\tu16 idx;\t\t \n\tu16 veb_idx;\t\t \n\tstruct kobject *kobj;\t \n\tbool current_isup;\t \n\tenum i40e_aq_link_speed current_speed;\t \n\n\t \n\tu16 cnt_q_avail;\t \n\tu16 orig_rss_size;\n\tu16 current_rss_size;\n\tbool reconfig_rss;\n\n\tu16 next_base_queue;\t \n\n\tstruct list_head ch_list;\n\tu16 tc_seid_map[I40E_MAX_TRAFFIC_CLASS];\n\n\t \n#define I40E_MAX_MACVLANS\t\t128  \n#define I40E_MIN_MACVLAN_VECTORS\t2    \n\tDECLARE_BITMAP(fwd_bitmask, I40E_MAX_MACVLANS);\n\tstruct list_head macvlan_list;\n\tint macvlan_cnt;\n\n\tvoid *priv;\t \n\n\t \n\tirqreturn_t (*irq_handler)(int irq, void *data);\n\n\tunsigned long *af_xdp_zc_qps;  \n} ____cacheline_internodealigned_in_smp;\n\nstruct i40e_netdev_priv {\n\tstruct i40e_vsi *vsi;\n};\n\nextern struct ida i40e_client_ida;\n\n \nstruct i40e_q_vector {\n\tstruct i40e_vsi *vsi;\n\n\tu16 v_idx;\t\t \n\tu16 reg_idx;\t\t \n\n\tstruct napi_struct napi;\n\n\tstruct i40e_ring_container rx;\n\tstruct i40e_ring_container tx;\n\n\tu8 itr_countdown;\t \n\tu8 num_ringpairs;\t \n\n\tcpumask_t affinity_mask;\n\tstruct irq_affinity_notify affinity_notify;\n\n\tstruct rcu_head rcu;\t \n\tchar name[I40E_INT_NAME_STR_LEN];\n\tbool arm_wb_state;\n\tint irq_num;\t\t \n} ____cacheline_internodealigned_in_smp;\n\n \nstruct i40e_device {\n\tstruct list_head list;\n\tstruct i40e_pf *pf;\n};\n\n \nstatic inline char *i40e_nvm_version_str(struct i40e_hw *hw)\n{\n\tstatic char buf[32];\n\tu32 full_ver;\n\n\tfull_ver = hw->nvm.oem_ver;\n\n\tif (hw->nvm.eetrack == I40E_OEM_EETRACK_ID) {\n\t\tu8 gen, snap;\n\t\tu16 release;\n\n\t\tgen = (u8)(full_ver >> I40E_OEM_GEN_SHIFT);\n\t\tsnap = (u8)((full_ver & I40E_OEM_SNAP_MASK) >>\n\t\t\tI40E_OEM_SNAP_SHIFT);\n\t\trelease = (u16)(full_ver & I40E_OEM_RELEASE_MASK);\n\n\t\tsnprintf(buf, sizeof(buf), \"%x.%x.%x\", gen, snap, release);\n\t} else {\n\t\tu8 ver, patch;\n\t\tu16 build;\n\n\t\tver = (u8)(full_ver >> I40E_OEM_VER_SHIFT);\n\t\tbuild = (u16)((full_ver >> I40E_OEM_VER_BUILD_SHIFT) &\n\t\t\t I40E_OEM_VER_BUILD_MASK);\n\t\tpatch = (u8)(full_ver & I40E_OEM_VER_PATCH_MASK);\n\n\t\tsnprintf(buf, sizeof(buf),\n\t\t\t \"%x.%02x 0x%x %d.%d.%d\",\n\t\t\t (hw->nvm.version & I40E_NVM_VERSION_HI_MASK) >>\n\t\t\t\tI40E_NVM_VERSION_HI_SHIFT,\n\t\t\t (hw->nvm.version & I40E_NVM_VERSION_LO_MASK) >>\n\t\t\t\tI40E_NVM_VERSION_LO_SHIFT,\n\t\t\t hw->nvm.eetrack, ver, build, patch);\n\t}\n\n\treturn buf;\n}\n\n \nstatic inline struct i40e_pf *i40e_netdev_to_pf(struct net_device *netdev)\n{\n\tstruct i40e_netdev_priv *np = netdev_priv(netdev);\n\tstruct i40e_vsi *vsi = np->vsi;\n\n\treturn vsi->back;\n}\n\nstatic inline void i40e_vsi_setup_irqhandler(struct i40e_vsi *vsi,\n\t\t\t\tirqreturn_t (*irq_handler)(int, void *))\n{\n\tvsi->irq_handler = irq_handler;\n}\n\n \nstatic inline int i40e_get_fd_cnt_all(struct i40e_pf *pf)\n{\n\treturn pf->hw.fdir_shared_filter_count + pf->fdir_pf_filter_count;\n}\n\n \nstatic inline u64 i40e_read_fd_input_set(struct i40e_pf *pf, u16 addr)\n{\n\tu64 val;\n\n\tval = i40e_read_rx_ctl(&pf->hw, I40E_PRTQF_FD_INSET(addr, 1));\n\tval <<= 32;\n\tval += i40e_read_rx_ctl(&pf->hw, I40E_PRTQF_FD_INSET(addr, 0));\n\n\treturn val;\n}\n\n \nstatic inline void i40e_write_fd_input_set(struct i40e_pf *pf,\n\t\t\t\t\t   u16 addr, u64 val)\n{\n\ti40e_write_rx_ctl(&pf->hw, I40E_PRTQF_FD_INSET(addr, 1),\n\t\t\t  (u32)(val >> 32));\n\ti40e_write_rx_ctl(&pf->hw, I40E_PRTQF_FD_INSET(addr, 0),\n\t\t\t  (u32)(val & 0xFFFFFFFFULL));\n}\n\n \nstatic inline u32 i40e_get_pf_count(struct i40e_hw *hw)\n{\n\treturn FIELD_GET(I40E_GLGEN_PCIFCNCNT_PCIPFCNT_MASK,\n\t\t\t rd32(hw, I40E_GLGEN_PCIFCNCNT));\n}\n\n \nint i40e_up(struct i40e_vsi *vsi);\nvoid i40e_down(struct i40e_vsi *vsi);\nextern const char i40e_driver_name[];\nvoid i40e_do_reset_safe(struct i40e_pf *pf, u32 reset_flags);\nvoid i40e_do_reset(struct i40e_pf *pf, u32 reset_flags, bool lock_acquired);\nint i40e_config_rss(struct i40e_vsi *vsi, u8 *seed, u8 *lut, u16 lut_size);\nint i40e_get_rss(struct i40e_vsi *vsi, u8 *seed, u8 *lut, u16 lut_size);\nvoid i40e_fill_rss_lut(struct i40e_pf *pf, u8 *lut,\n\t\t       u16 rss_table_size, u16 rss_size);\nstruct i40e_vsi *i40e_find_vsi_from_id(struct i40e_pf *pf, u16 id);\n \nstatic inline struct i40e_vsi *\ni40e_find_vsi_by_type(struct i40e_pf *pf, u16 type)\n{\n\tint i;\n\n\tfor (i = 0; i < pf->num_alloc_vsi; i++) {\n\t\tstruct i40e_vsi *vsi = pf->vsi[i];\n\n\t\tif (vsi && vsi->type == type)\n\t\t\treturn vsi;\n\t}\n\n\treturn NULL;\n}\nvoid i40e_update_stats(struct i40e_vsi *vsi);\nvoid i40e_update_veb_stats(struct i40e_veb *veb);\nvoid i40e_update_eth_stats(struct i40e_vsi *vsi);\nstruct rtnl_link_stats64 *i40e_get_vsi_stats_struct(struct i40e_vsi *vsi);\nint i40e_fetch_switch_configuration(struct i40e_pf *pf,\n\t\t\t\t    bool printconfig);\n\nint i40e_add_del_fdir(struct i40e_vsi *vsi,\n\t\t      struct i40e_fdir_filter *input, bool add);\nvoid i40e_fdir_check_and_reenable(struct i40e_pf *pf);\nu32 i40e_get_current_fd_count(struct i40e_pf *pf);\nu32 i40e_get_cur_guaranteed_fd_count(struct i40e_pf *pf);\nu32 i40e_get_current_atr_cnt(struct i40e_pf *pf);\nu32 i40e_get_global_fd_count(struct i40e_pf *pf);\nbool i40e_set_ntuple(struct i40e_pf *pf, netdev_features_t features);\nvoid i40e_set_ethtool_ops(struct net_device *netdev);\nstruct i40e_mac_filter *i40e_add_filter(struct i40e_vsi *vsi,\n\t\t\t\t\tconst u8 *macaddr, s16 vlan);\nvoid __i40e_del_filter(struct i40e_vsi *vsi, struct i40e_mac_filter *f);\nvoid i40e_del_filter(struct i40e_vsi *vsi, const u8 *macaddr, s16 vlan);\nint i40e_sync_vsi_filters(struct i40e_vsi *vsi);\nstruct i40e_vsi *i40e_vsi_setup(struct i40e_pf *pf, u8 type,\n\t\t\t\tu16 uplink, u32 param1);\nint i40e_vsi_release(struct i40e_vsi *vsi);\nvoid i40e_service_event_schedule(struct i40e_pf *pf);\nvoid i40e_notify_client_of_vf_msg(struct i40e_vsi *vsi, u32 vf_id,\n\t\t\t\t  u8 *msg, u16 len);\n\nint i40e_control_wait_tx_q(int seid, struct i40e_pf *pf, int pf_q, bool is_xdp,\n\t\t\t   bool enable);\nint i40e_control_wait_rx_q(struct i40e_pf *pf, int pf_q, bool enable);\nint i40e_vsi_start_rings(struct i40e_vsi *vsi);\nvoid i40e_vsi_stop_rings(struct i40e_vsi *vsi);\nvoid i40e_vsi_stop_rings_no_wait(struct  i40e_vsi *vsi);\nint i40e_vsi_wait_queues_disabled(struct i40e_vsi *vsi);\nint i40e_reconfig_rss_queues(struct i40e_pf *pf, int queue_count);\nstruct i40e_veb *i40e_veb_setup(struct i40e_pf *pf, u16 flags, u16 uplink_seid,\n\t\t\t\tu16 downlink_seid, u8 enabled_tc);\nvoid i40e_veb_release(struct i40e_veb *veb);\n\nint i40e_veb_config_tc(struct i40e_veb *veb, u8 enabled_tc);\nint i40e_vsi_add_pvid(struct i40e_vsi *vsi, u16 vid);\nvoid i40e_vsi_remove_pvid(struct i40e_vsi *vsi);\nvoid i40e_vsi_reset_stats(struct i40e_vsi *vsi);\nvoid i40e_pf_reset_stats(struct i40e_pf *pf);\n#ifdef CONFIG_DEBUG_FS\nvoid i40e_dbg_pf_init(struct i40e_pf *pf);\nvoid i40e_dbg_pf_exit(struct i40e_pf *pf);\nvoid i40e_dbg_init(void);\nvoid i40e_dbg_exit(void);\n#else\nstatic inline void i40e_dbg_pf_init(struct i40e_pf *pf) {}\nstatic inline void i40e_dbg_pf_exit(struct i40e_pf *pf) {}\nstatic inline void i40e_dbg_init(void) {}\nstatic inline void i40e_dbg_exit(void) {}\n#endif  \n \nint i40e_lan_add_device(struct i40e_pf *pf);\nint i40e_lan_del_device(struct i40e_pf *pf);\nvoid i40e_client_subtask(struct i40e_pf *pf);\nvoid i40e_notify_client_of_l2_param_changes(struct i40e_vsi *vsi);\nvoid i40e_notify_client_of_netdev_close(struct i40e_vsi *vsi, bool reset);\nvoid i40e_notify_client_of_vf_enable(struct i40e_pf *pf, u32 num_vfs);\nvoid i40e_notify_client_of_vf_reset(struct i40e_pf *pf, u32 vf_id);\nvoid i40e_client_update_msix_info(struct i40e_pf *pf);\nint i40e_vf_client_capable(struct i40e_pf *pf, u32 vf_id);\n \nstatic inline void i40e_irq_dynamic_enable(struct i40e_vsi *vsi, int vector)\n{\n\tstruct i40e_pf *pf = vsi->back;\n\tstruct i40e_hw *hw = &pf->hw;\n\tu32 val;\n\n\tval = I40E_PFINT_DYN_CTLN_INTENA_MASK |\n\t      I40E_PFINT_DYN_CTLN_CLEARPBA_MASK |\n\t      (I40E_ITR_NONE << I40E_PFINT_DYN_CTLN_ITR_INDX_SHIFT);\n\twr32(hw, I40E_PFINT_DYN_CTLN(vector + vsi->base_vector - 1), val);\n\t \n}\n\nvoid i40e_irq_dynamic_disable_icr0(struct i40e_pf *pf);\nvoid i40e_irq_dynamic_enable_icr0(struct i40e_pf *pf);\nint i40e_ioctl(struct net_device *netdev, struct ifreq *ifr, int cmd);\nint i40e_open(struct net_device *netdev);\nint i40e_close(struct net_device *netdev);\nint i40e_vsi_open(struct i40e_vsi *vsi);\nvoid i40e_vlan_stripping_disable(struct i40e_vsi *vsi);\nint i40e_add_vlan_all_mac(struct i40e_vsi *vsi, s16 vid);\nint i40e_vsi_add_vlan(struct i40e_vsi *vsi, u16 vid);\nvoid i40e_rm_vlan_all_mac(struct i40e_vsi *vsi, s16 vid);\nvoid i40e_vsi_kill_vlan(struct i40e_vsi *vsi, u16 vid);\nstruct i40e_mac_filter *i40e_add_mac_filter(struct i40e_vsi *vsi,\n\t\t\t\t\t    const u8 *macaddr);\nint i40e_del_mac_filter(struct i40e_vsi *vsi, const u8 *macaddr);\nbool i40e_is_vsi_in_vlan(struct i40e_vsi *vsi);\nint i40e_count_filters(struct i40e_vsi *vsi);\nstruct i40e_mac_filter *i40e_find_mac(struct i40e_vsi *vsi, const u8 *macaddr);\nvoid i40e_vlan_stripping_enable(struct i40e_vsi *vsi);\nstatic inline bool i40e_is_sw_dcb(struct i40e_pf *pf)\n{\n\treturn !!(pf->flags & I40E_FLAG_DISABLE_FW_LLDP);\n}\n\n#ifdef CONFIG_I40E_DCB\nvoid i40e_dcbnl_flush_apps(struct i40e_pf *pf,\n\t\t\t   struct i40e_dcbx_config *old_cfg,\n\t\t\t   struct i40e_dcbx_config *new_cfg);\nvoid i40e_dcbnl_set_all(struct i40e_vsi *vsi);\nvoid i40e_dcbnl_setup(struct i40e_vsi *vsi);\nbool i40e_dcb_need_reconfig(struct i40e_pf *pf,\n\t\t\t    struct i40e_dcbx_config *old_cfg,\n\t\t\t    struct i40e_dcbx_config *new_cfg);\nint i40e_hw_dcb_config(struct i40e_pf *pf, struct i40e_dcbx_config *new_cfg);\nint i40e_dcb_sw_default_config(struct i40e_pf *pf);\n#endif  \nvoid i40e_ptp_rx_hang(struct i40e_pf *pf);\nvoid i40e_ptp_tx_hang(struct i40e_pf *pf);\nvoid i40e_ptp_tx_hwtstamp(struct i40e_pf *pf);\nvoid i40e_ptp_rx_hwtstamp(struct i40e_pf *pf, struct sk_buff *skb, u8 index);\nvoid i40e_ptp_set_increment(struct i40e_pf *pf);\nint i40e_ptp_set_ts_config(struct i40e_pf *pf, struct ifreq *ifr);\nint i40e_ptp_get_ts_config(struct i40e_pf *pf, struct ifreq *ifr);\nvoid i40e_ptp_save_hw_time(struct i40e_pf *pf);\nvoid i40e_ptp_restore_hw_time(struct i40e_pf *pf);\nvoid i40e_ptp_init(struct i40e_pf *pf);\nvoid i40e_ptp_stop(struct i40e_pf *pf);\nint i40e_ptp_alloc_pins(struct i40e_pf *pf);\nint i40e_update_adq_vsi_queues(struct i40e_vsi *vsi, int vsi_offset);\nint i40e_is_vsi_uplink_mode_veb(struct i40e_vsi *vsi);\nint i40e_get_partition_bw_setting(struct i40e_pf *pf);\nint i40e_set_partition_bw_setting(struct i40e_pf *pf);\nint i40e_commit_partition_bw_setting(struct i40e_pf *pf);\nvoid i40e_print_link_message(struct i40e_vsi *vsi, bool isup);\n\nvoid i40e_set_fec_in_flags(u8 fec_cfg, u32 *flags);\n\nstatic inline bool i40e_enabled_xdp_vsi(struct i40e_vsi *vsi)\n{\n\treturn !!READ_ONCE(vsi->xdp_prog);\n}\n\nint i40e_create_queue_channel(struct i40e_vsi *vsi, struct i40e_channel *ch);\nint i40e_set_bw_limit(struct i40e_vsi *vsi, u16 seid, u64 max_tx_rate);\nint i40e_add_del_cloud_filter(struct i40e_vsi *vsi,\n\t\t\t      struct i40e_cloud_filter *filter,\n\t\t\t      bool add);\nint i40e_add_del_cloud_filter_big_buf(struct i40e_vsi *vsi,\n\t\t\t\t      struct i40e_cloud_filter *filter,\n\t\t\t\t      bool add);\n\n \nstatic inline u32 i40e_is_tc_mqprio_enabled(struct i40e_pf *pf)\n{\n\treturn pf->flags & I40E_FLAG_TC_MQPRIO;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}