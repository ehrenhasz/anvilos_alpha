{
  "module_name": "e1000.h",
  "hash_id": "7d180ca00823bb2e219aa9d76d65b68631844ca17c1fce8b0c2f702f7ba60443",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/e1000/e1000.h",
  "human_readable_source": " \n \n\n \n\n#ifndef _E1000_H_\n#define _E1000_H_\n\n#include <linux/stddef.h>\n#include <linux/module.h>\n#include <linux/types.h>\n#include <asm/byteorder.h>\n#include <linux/mm.h>\n#include <linux/errno.h>\n#include <linux/ioport.h>\n#include <linux/pci.h>\n#include <linux/kernel.h>\n#include <linux/netdevice.h>\n#include <linux/etherdevice.h>\n#include <linux/skbuff.h>\n#include <linux/delay.h>\n#include <linux/timer.h>\n#include <linux/slab.h>\n#include <linux/vmalloc.h>\n#include <linux/interrupt.h>\n#include <linux/string.h>\n#include <linux/pagemap.h>\n#include <linux/dma-mapping.h>\n#include <linux/bitops.h>\n#include <asm/io.h>\n#include <asm/irq.h>\n#include <linux/capability.h>\n#include <linux/in.h>\n#include <linux/ip.h>\n#include <linux/ipv6.h>\n#include <linux/tcp.h>\n#include <linux/udp.h>\n#include <net/pkt_sched.h>\n#include <linux/list.h>\n#include <linux/reboot.h>\n#include <net/checksum.h>\n#include <linux/mii.h>\n#include <linux/ethtool.h>\n#include <linux/if_vlan.h>\n\n#define BAR_0\t\t0\n#define BAR_1\t\t1\n\n#define INTEL_E1000_ETHERNET_DEVICE(device_id) {\\\n\tPCI_DEVICE(PCI_VENDOR_ID_INTEL, device_id)}\n\nstruct e1000_adapter;\n\n#include \"e1000_hw.h\"\n\n#define E1000_MAX_INTR\t\t\t10\n\n \n#define E1000_CHECK_RESET_COUNT\t50\n\n \n#define E1000_DEFAULT_TXD\t\t256\n#define E1000_MAX_TXD\t\t\t256\n#define E1000_MIN_TXD\t\t\t48\n#define E1000_MAX_82544_TXD\t\t4096\n\n#define E1000_DEFAULT_RXD\t\t256\n#define E1000_MAX_RXD\t\t\t256\n#define E1000_MIN_RXD\t\t\t48\n#define E1000_MAX_82544_RXD\t\t4096\n\n#define E1000_MIN_ITR_USECS\t\t10  \n#define E1000_MAX_ITR_USECS\t\t10000  \n\n \n#define MAXIMUM_ETHERNET_VLAN_SIZE\t1522\n\n \n#define E1000_RXBUFFER_128\t\t128     \n#define E1000_RXBUFFER_256\t\t256     \n#define E1000_RXBUFFER_512\t\t512\n#define E1000_RXBUFFER_1024\t\t1024\n#define E1000_RXBUFFER_2048\t\t2048\n#define E1000_RXBUFFER_4096\t\t4096\n#define E1000_RXBUFFER_8192\t\t8192\n#define E1000_RXBUFFER_16384\t\t16384\n\n \n#define E1000_SMARTSPEED_DOWNSHIFT\t3\n#define E1000_SMARTSPEED_MAX\t\t15\n\n \n#define E1000_PBA_BYTES_SHIFT\t\t0xA\n#define E1000_TX_HEAD_ADDR_SHIFT\t7\n#define E1000_PBA_TX_MASK\t\t0xFFFF0000\n\n \n#define E1000_FC_HIGH_DIFF\t0x1638  \n#define E1000_FC_LOW_DIFF\t0x1640  \n\n#define E1000_FC_PAUSE_TIME\t0xFFFF  \n\n \n#define E1000_TX_QUEUE_WAKE\t16\n \n#define E1000_RX_BUFFER_WRITE\t16  \n\n#define AUTO_ALL_MODES\t\t0\n#define E1000_EEPROM_82544_APM\t0x0004\n#define E1000_EEPROM_APME\t0x0400\n\n#ifndef E1000_MASTER_SLAVE\n \n#define E1000_MASTER_SLAVE\te1000_ms_hw_default\n#endif\n\n#define E1000_MNG_VLAN_NONE\t(-1)\n\n \nstruct e1000_tx_buffer {\n\tstruct sk_buff *skb;\n\tdma_addr_t dma;\n\tunsigned long time_stamp;\n\tu16 length;\n\tu16 next_to_watch;\n\tbool mapped_as_page;\n\tunsigned short segs;\n\tunsigned int bytecount;\n};\n\nstruct e1000_rx_buffer {\n\tunion {\n\t\tstruct page *page;  \n\t\tu8 *data;  \n\t} rxbuf;\n\tdma_addr_t dma;\n};\n\nstruct e1000_tx_ring {\n\t \n\tvoid *desc;\n\t \n\tdma_addr_t dma;\n\t \n\tunsigned int size;\n\t \n\tunsigned int count;\n\t \n\tunsigned int next_to_use;\n\t \n\tunsigned int next_to_clean;\n\t \n\tstruct e1000_tx_buffer *buffer_info;\n\n\tu16 tdh;\n\tu16 tdt;\n\tbool last_tx_tso;\n};\n\nstruct e1000_rx_ring {\n\t \n\tvoid *desc;\n\t \n\tdma_addr_t dma;\n\t \n\tunsigned int size;\n\t \n\tunsigned int count;\n\t \n\tunsigned int next_to_use;\n\t \n\tunsigned int next_to_clean;\n\t \n\tstruct e1000_rx_buffer *buffer_info;\n\tstruct sk_buff *rx_skb_top;\n\n\t \n\tint cpu;\n\n\tu16 rdh;\n\tu16 rdt;\n};\n\n#define E1000_DESC_UNUSED(R)\t\t\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tunsigned int clean = smp_load_acquire(&(R)->next_to_clean);\t\\\n\tunsigned int use = READ_ONCE((R)->next_to_use);\t\t\t\\\n\t(clean > use ? 0 : (R)->count) + clean - use - 1;\t\t\\\n})\n\n#define E1000_RX_DESC_EXT(R, i)\t\t\t\t\t\t\\\n\t(&(((union e1000_rx_desc_extended *)((R).desc))[i]))\n#define E1000_GET_DESC(R, i, type)\t(&(((struct type *)((R).desc))[i]))\n#define E1000_RX_DESC(R, i)\t\tE1000_GET_DESC(R, i, e1000_rx_desc)\n#define E1000_TX_DESC(R, i)\t\tE1000_GET_DESC(R, i, e1000_tx_desc)\n#define E1000_CONTEXT_DESC(R, i)\tE1000_GET_DESC(R, i, e1000_context_desc)\n\n \n\nstruct e1000_adapter {\n\tunsigned long active_vlans[BITS_TO_LONGS(VLAN_N_VID)];\n\tu16 mng_vlan_id;\n\tu32 bd_number;\n\tu32 rx_buffer_len;\n\tu32 wol;\n\tu32 smartspeed;\n\tu32 en_mng_pt;\n\tu16 link_speed;\n\tu16 link_duplex;\n\tspinlock_t stats_lock;\n\tunsigned int total_tx_bytes;\n\tunsigned int total_tx_packets;\n\tunsigned int total_rx_bytes;\n\tunsigned int total_rx_packets;\n\t \n\tu32 itr;\n\tu32 itr_setting;\n\tu16 tx_itr;\n\tu16 rx_itr;\n\n\tu8 fc_autoneg;\n\n\t \n\tstruct e1000_tx_ring *tx_ring;       \n\tunsigned int restart_queue;\n\tu32 txd_cmd;\n\tu32 tx_int_delay;\n\tu32 tx_abs_int_delay;\n\tu32 gotcl;\n\tu64 gotcl_old;\n\tu64 tpt_old;\n\tu64 colc_old;\n\tu32 tx_timeout_count;\n\tu32 tx_fifo_head;\n\tu32 tx_head_addr;\n\tu32 tx_fifo_size;\n\tu8  tx_timeout_factor;\n\tatomic_t tx_fifo_stall;\n\tbool pcix_82544;\n\tbool detect_tx_hung;\n\tbool dump_buffers;\n\n\t \n\tbool (*clean_rx)(struct e1000_adapter *adapter,\n\t\t\t struct e1000_rx_ring *rx_ring,\n\t\t\t int *work_done, int work_to_do);\n\tvoid (*alloc_rx_buf)(struct e1000_adapter *adapter,\n\t\t\t     struct e1000_rx_ring *rx_ring,\n\t\t\t     int cleaned_count);\n\tstruct e1000_rx_ring *rx_ring;       \n\tstruct napi_struct napi;\n\n\tint num_tx_queues;\n\tint num_rx_queues;\n\n\tu64 hw_csum_err;\n\tu64 hw_csum_good;\n\tu32 alloc_rx_buff_failed;\n\tu32 rx_int_delay;\n\tu32 rx_abs_int_delay;\n\tbool rx_csum;\n\tu32 gorcl;\n\tu64 gorcl_old;\n\n\t \n\tstruct net_device *netdev;\n\tstruct pci_dev *pdev;\n\n\t \n\tstruct e1000_hw hw;\n\tstruct e1000_hw_stats stats;\n\tstruct e1000_phy_info phy_info;\n\tstruct e1000_phy_stats phy_stats;\n\n\tu32 test_icr;\n\tstruct e1000_tx_ring test_tx_ring;\n\tstruct e1000_rx_ring test_rx_ring;\n\n\tint msg_enable;\n\n\t \n\tbool tso_force;\n\tbool smart_power_down;\t \n\tbool quad_port_a;\n\tunsigned long flags;\n\tu32 eeprom_wol;\n\n\t \n\tint bars;\n\tint need_ioport;\n\n\tbool discarding;\n\n\tstruct work_struct reset_task;\n\tstruct delayed_work watchdog_task;\n\tstruct delayed_work fifo_stall_task;\n\tstruct delayed_work phy_info_task;\n};\n\nenum e1000_state_t {\n\t__E1000_TESTING,\n\t__E1000_RESETTING,\n\t__E1000_DOWN,\n\t__E1000_DISABLED\n};\n\n#undef pr_fmt\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\nstruct net_device *e1000_get_hw_dev(struct e1000_hw *hw);\n#define e_dbg(format, arg...) \\\n\tnetdev_dbg(e1000_get_hw_dev(hw), format, ## arg)\n#define e_err(msglvl, format, arg...) \\\n\tnetif_err(adapter, msglvl, adapter->netdev, format, ## arg)\n#define e_info(msglvl, format, arg...) \\\n\tnetif_info(adapter, msglvl, adapter->netdev, format, ## arg)\n#define e_warn(msglvl, format, arg...) \\\n\tnetif_warn(adapter, msglvl, adapter->netdev, format, ## arg)\n#define e_notice(msglvl, format, arg...) \\\n\tnetif_notice(adapter, msglvl, adapter->netdev, format, ## arg)\n#define e_dev_info(format, arg...) \\\n\tdev_info(&adapter->pdev->dev, format, ## arg)\n#define e_dev_warn(format, arg...) \\\n\tdev_warn(&adapter->pdev->dev, format, ## arg)\n#define e_dev_err(format, arg...) \\\n\tdev_err(&adapter->pdev->dev, format, ## arg)\n\nextern char e1000_driver_name[];\n\nint e1000_open(struct net_device *netdev);\nint e1000_close(struct net_device *netdev);\nint e1000_up(struct e1000_adapter *adapter);\nvoid e1000_down(struct e1000_adapter *adapter);\nvoid e1000_reinit_locked(struct e1000_adapter *adapter);\nvoid e1000_reset(struct e1000_adapter *adapter);\nint e1000_set_spd_dplx(struct e1000_adapter *adapter, u32 spd, u8 dplx);\nint e1000_setup_all_rx_resources(struct e1000_adapter *adapter);\nint e1000_setup_all_tx_resources(struct e1000_adapter *adapter);\nvoid e1000_free_all_rx_resources(struct e1000_adapter *adapter);\nvoid e1000_free_all_tx_resources(struct e1000_adapter *adapter);\nvoid e1000_update_stats(struct e1000_adapter *adapter);\nbool e1000_has_link(struct e1000_adapter *adapter);\nvoid e1000_power_up_phy(struct e1000_adapter *);\nvoid e1000_set_ethtool_ops(struct net_device *netdev);\nvoid e1000_check_options(struct e1000_adapter *adapter);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}