{
  "module_name": "ice_trace.h",
  "hash_id": "30594439d015eb711ce49e779ac55120f20ebb424f5b0a404f45c2090919442b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_trace.h",
  "human_readable_source": " \n \n\n \n\n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ice\n\n \n#if !defined(_ICE_TRACE_H_) || defined(TRACE_HEADER_MULTI_READ)\n#define _ICE_TRACE_H_\n\n#include <linux/tracepoint.h>\n#include \"ice_eswitch_br.h\"\n\n \n#define _ICE_TRACE_NAME(trace_name) (trace_##ice##_##trace_name)\n#define ICE_TRACE_NAME(trace_name) _ICE_TRACE_NAME(trace_name)\n\n#define ice_trace(trace_name, args...) ICE_TRACE_NAME(trace_name)(args)\n\n#define ice_trace_enabled(trace_name) ICE_TRACE_NAME(trace_name##_enabled)()\n\n \n\n \n\n \n\n \nDECLARE_EVENT_CLASS(ice_rx_dim_template,\n\t\t    TP_PROTO(struct ice_q_vector *q_vector, struct dim *dim),\n\t\t    TP_ARGS(q_vector, dim),\n\t\t    TP_STRUCT__entry(__field(struct ice_q_vector *, q_vector)\n\t\t\t\t     __field(struct dim *, dim)\n\t\t\t\t     __string(devname, q_vector->rx.rx_ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->q_vector = q_vector;\n\t\t\t\t   __entry->dim = dim;\n\t\t\t\t   __assign_str(devname, q_vector->rx.rx_ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s Rx-Q: %d dim-state: %d dim-profile: %d dim-tune: %d dim-st-right: %d dim-st-left: %d dim-tired: %d\",\n\t\t\t      __get_str(devname),\n\t\t\t      __entry->q_vector->rx.rx_ring->q_index,\n\t\t\t      __entry->dim->state,\n\t\t\t      __entry->dim->profile_ix,\n\t\t\t      __entry->dim->tune_state,\n\t\t\t      __entry->dim->steps_right,\n\t\t\t      __entry->dim->steps_left,\n\t\t\t      __entry->dim->tired)\n);\n\nDEFINE_EVENT(ice_rx_dim_template, ice_rx_dim_work,\n\t     TP_PROTO(struct ice_q_vector *q_vector, struct dim *dim),\n\t     TP_ARGS(q_vector, dim)\n);\n\nDECLARE_EVENT_CLASS(ice_tx_dim_template,\n\t\t    TP_PROTO(struct ice_q_vector *q_vector, struct dim *dim),\n\t\t    TP_ARGS(q_vector, dim),\n\t\t    TP_STRUCT__entry(__field(struct ice_q_vector *, q_vector)\n\t\t\t\t     __field(struct dim *, dim)\n\t\t\t\t     __string(devname, q_vector->tx.tx_ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->q_vector = q_vector;\n\t\t\t\t   __entry->dim = dim;\n\t\t\t\t   __assign_str(devname, q_vector->tx.tx_ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s Tx-Q: %d dim-state: %d dim-profile: %d dim-tune: %d dim-st-right: %d dim-st-left: %d dim-tired: %d\",\n\t\t\t      __get_str(devname),\n\t\t\t      __entry->q_vector->tx.tx_ring->q_index,\n\t\t\t      __entry->dim->state,\n\t\t\t      __entry->dim->profile_ix,\n\t\t\t      __entry->dim->tune_state,\n\t\t\t      __entry->dim->steps_right,\n\t\t\t      __entry->dim->steps_left,\n\t\t\t      __entry->dim->tired)\n);\n\nDEFINE_EVENT(ice_tx_dim_template, ice_tx_dim_work,\n\t     TP_PROTO(struct ice_q_vector *q_vector, struct dim *dim),\n\t     TP_ARGS(q_vector, dim)\n);\n\n \nDECLARE_EVENT_CLASS(ice_tx_template,\n\t\t    TP_PROTO(struct ice_tx_ring *ring, struct ice_tx_desc *desc,\n\t\t\t     struct ice_tx_buf *buf),\n\n\t\t    TP_ARGS(ring, desc, buf),\n\t\t    TP_STRUCT__entry(__field(void *, ring)\n\t\t\t\t     __field(void *, desc)\n\t\t\t\t     __field(void *, buf)\n\t\t\t\t     __string(devname, ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->ring = ring;\n\t\t\t\t   __entry->desc = desc;\n\t\t\t\t   __entry->buf = buf;\n\t\t\t\t   __assign_str(devname, ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s ring: %pK desc: %pK buf %pK\", __get_str(devname),\n\t\t\t      __entry->ring, __entry->desc, __entry->buf)\n);\n\n#define DEFINE_TX_TEMPLATE_OP_EVENT(name) \\\nDEFINE_EVENT(ice_tx_template, name, \\\n\t     TP_PROTO(struct ice_tx_ring *ring, \\\n\t\t      struct ice_tx_desc *desc, \\\n\t\t      struct ice_tx_buf *buf), \\\n\t     TP_ARGS(ring, desc, buf))\n\nDEFINE_TX_TEMPLATE_OP_EVENT(ice_clean_tx_irq);\nDEFINE_TX_TEMPLATE_OP_EVENT(ice_clean_tx_irq_unmap);\nDEFINE_TX_TEMPLATE_OP_EVENT(ice_clean_tx_irq_unmap_eop);\n\nDECLARE_EVENT_CLASS(ice_rx_template,\n\t\t    TP_PROTO(struct ice_rx_ring *ring, union ice_32b_rx_flex_desc *desc),\n\n\t\t    TP_ARGS(ring, desc),\n\n\t\t    TP_STRUCT__entry(__field(void *, ring)\n\t\t\t\t     __field(void *, desc)\n\t\t\t\t     __string(devname, ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->ring = ring;\n\t\t\t\t   __entry->desc = desc;\n\t\t\t\t   __assign_str(devname, ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s ring: %pK desc: %pK\", __get_str(devname),\n\t\t\t      __entry->ring, __entry->desc)\n);\nDEFINE_EVENT(ice_rx_template, ice_clean_rx_irq,\n\t     TP_PROTO(struct ice_rx_ring *ring, union ice_32b_rx_flex_desc *desc),\n\t     TP_ARGS(ring, desc)\n);\n\nDECLARE_EVENT_CLASS(ice_rx_indicate_template,\n\t\t    TP_PROTO(struct ice_rx_ring *ring, union ice_32b_rx_flex_desc *desc,\n\t\t\t     struct sk_buff *skb),\n\n\t\t    TP_ARGS(ring, desc, skb),\n\n\t\t    TP_STRUCT__entry(__field(void *, ring)\n\t\t\t\t     __field(void *, desc)\n\t\t\t\t     __field(void *, skb)\n\t\t\t\t     __string(devname, ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->ring = ring;\n\t\t\t\t   __entry->desc = desc;\n\t\t\t\t   __entry->skb = skb;\n\t\t\t\t   __assign_str(devname, ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s ring: %pK desc: %pK skb %pK\", __get_str(devname),\n\t\t\t      __entry->ring, __entry->desc, __entry->skb)\n);\n\nDEFINE_EVENT(ice_rx_indicate_template, ice_clean_rx_irq_indicate,\n\t     TP_PROTO(struct ice_rx_ring *ring, union ice_32b_rx_flex_desc *desc,\n\t\t      struct sk_buff *skb),\n\t     TP_ARGS(ring, desc, skb)\n);\n\nDECLARE_EVENT_CLASS(ice_xmit_template,\n\t\t    TP_PROTO(struct ice_tx_ring *ring, struct sk_buff *skb),\n\n\t\t    TP_ARGS(ring, skb),\n\n\t\t    TP_STRUCT__entry(__field(void *, ring)\n\t\t\t\t     __field(void *, skb)\n\t\t\t\t     __string(devname, ring->netdev->name)),\n\n\t\t    TP_fast_assign(__entry->ring = ring;\n\t\t\t\t   __entry->skb = skb;\n\t\t\t\t   __assign_str(devname, ring->netdev->name);),\n\n\t\t    TP_printk(\"netdev: %s skb: %pK ring: %pK\", __get_str(devname),\n\t\t\t      __entry->skb, __entry->ring)\n);\n\n#define DEFINE_XMIT_TEMPLATE_OP_EVENT(name) \\\nDEFINE_EVENT(ice_xmit_template, name, \\\n\t     TP_PROTO(struct ice_tx_ring *ring, struct sk_buff *skb), \\\n\t     TP_ARGS(ring, skb))\n\nDEFINE_XMIT_TEMPLATE_OP_EVENT(ice_xmit_frame_ring);\nDEFINE_XMIT_TEMPLATE_OP_EVENT(ice_xmit_frame_ring_drop);\n\nDECLARE_EVENT_CLASS(ice_tx_tstamp_template,\n\t\t    TP_PROTO(struct sk_buff *skb, int idx),\n\n\t\t    TP_ARGS(skb, idx),\n\n\t\t    TP_STRUCT__entry(__field(void *, skb)\n\t\t\t\t     __field(int, idx)),\n\n\t\t    TP_fast_assign(__entry->skb = skb;\n\t\t\t\t   __entry->idx = idx;),\n\n\t\t    TP_printk(\"skb %pK idx %d\",\n\t\t\t      __entry->skb, __entry->idx)\n);\n#define DEFINE_TX_TSTAMP_OP_EVENT(name) \\\nDEFINE_EVENT(ice_tx_tstamp_template, name, \\\n\t     TP_PROTO(struct sk_buff *skb, int idx), \\\n\t     TP_ARGS(skb, idx))\n\nDEFINE_TX_TSTAMP_OP_EVENT(ice_tx_tstamp_request);\nDEFINE_TX_TSTAMP_OP_EVENT(ice_tx_tstamp_fw_req);\nDEFINE_TX_TSTAMP_OP_EVENT(ice_tx_tstamp_fw_done);\nDEFINE_TX_TSTAMP_OP_EVENT(ice_tx_tstamp_complete);\n\nDECLARE_EVENT_CLASS(ice_esw_br_fdb_template,\n\t\t    TP_PROTO(struct ice_esw_br_fdb_entry *fdb),\n\t\t    TP_ARGS(fdb),\n\t\t    TP_STRUCT__entry(__array(char, dev_name, IFNAMSIZ)\n\t\t\t\t     __array(unsigned char, addr, ETH_ALEN)\n\t\t\t\t     __field(u16, vid)\n\t\t\t\t     __field(int, flags)),\n\t\t    TP_fast_assign(strscpy(__entry->dev_name,\n\t\t\t\t\t   netdev_name(fdb->dev),\n\t\t\t\t\t   IFNAMSIZ);\n\t\t\t\t   memcpy(__entry->addr, fdb->data.addr, ETH_ALEN);\n\t\t\t\t   __entry->vid = fdb->data.vid;\n\t\t\t\t   __entry->flags = fdb->flags;),\n\t\t    TP_printk(\"net_device=%s addr=%pM vid=%u flags=%x\",\n\t\t\t      __entry->dev_name,\n\t\t\t      __entry->addr,\n\t\t\t      __entry->vid,\n\t\t\t      __entry->flags)\n);\n\nDEFINE_EVENT(ice_esw_br_fdb_template,\n\t     ice_eswitch_br_fdb_entry_create,\n\t     TP_PROTO(struct ice_esw_br_fdb_entry *fdb),\n\t     TP_ARGS(fdb)\n);\n\nDEFINE_EVENT(ice_esw_br_fdb_template,\n\t     ice_eswitch_br_fdb_entry_find_and_delete,\n\t     TP_PROTO(struct ice_esw_br_fdb_entry *fdb),\n\t     TP_ARGS(fdb)\n);\n\nDECLARE_EVENT_CLASS(ice_esw_br_vlan_template,\n\t\t    TP_PROTO(struct ice_esw_br_vlan *vlan),\n\t\t    TP_ARGS(vlan),\n\t\t    TP_STRUCT__entry(__field(u16, vid)\n\t\t\t\t     __field(u16, flags)),\n\t\t    TP_fast_assign(__entry->vid = vlan->vid;\n\t\t\t\t   __entry->flags = vlan->flags;),\n\t\t    TP_printk(\"vid=%u flags=%x\",\n\t\t\t      __entry->vid,\n\t\t\t      __entry->flags)\n);\n\nDEFINE_EVENT(ice_esw_br_vlan_template,\n\t     ice_eswitch_br_vlan_create,\n\t     TP_PROTO(struct ice_esw_br_vlan *vlan),\n\t     TP_ARGS(vlan)\n);\n\nDEFINE_EVENT(ice_esw_br_vlan_template,\n\t     ice_eswitch_br_vlan_cleanup,\n\t     TP_PROTO(struct ice_esw_br_vlan *vlan),\n\t     TP_ARGS(vlan)\n);\n\n#define ICE_ESW_BR_PORT_NAME_L 16\n\nDECLARE_EVENT_CLASS(ice_esw_br_port_template,\n\t\t    TP_PROTO(struct ice_esw_br_port *port),\n\t\t    TP_ARGS(port),\n\t\t    TP_STRUCT__entry(__field(u16, vport_num)\n\t\t\t\t     __array(char, port_type, ICE_ESW_BR_PORT_NAME_L)),\n\t\t    TP_fast_assign(__entry->vport_num = port->vsi_idx;\n\t\t\t\t\tif (port->type == ICE_ESWITCH_BR_UPLINK_PORT)\n\t\t\t\t\t\tstrscpy(__entry->port_type,\n\t\t\t\t\t\t\t\"Uplink\",\n\t\t\t\t\t\t\tICE_ESW_BR_PORT_NAME_L);\n\t\t\t\t\telse\n\t\t\t\t\t\tstrscpy(__entry->port_type,\n\t\t\t\t\t\t\t\"VF Representor\",\n\t\t\t\t\t\t\tICE_ESW_BR_PORT_NAME_L);),\n\t\t    TP_printk(\"vport_num=%u port type=%s\",\n\t\t\t      __entry->vport_num,\n\t\t\t      __entry->port_type)\n);\n\nDEFINE_EVENT(ice_esw_br_port_template,\n\t     ice_eswitch_br_port_link,\n\t     TP_PROTO(struct ice_esw_br_port *port),\n\t     TP_ARGS(port)\n);\n\nDEFINE_EVENT(ice_esw_br_port_template,\n\t     ice_eswitch_br_port_unlink,\n\t     TP_PROTO(struct ice_esw_br_port *port),\n\t     TP_ARGS(port)\n);\n\n \n\n#endif  \n \n\n \n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE ../../drivers/net/ethernet/intel/ice/ice_trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}