{
  "module_name": "ice_type.h",
  "hash_id": "eb23d14bbae6a61569704e3d64106c80f4fe2eddd4da68ea5c559d356b3b67a5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_type.h",
  "human_readable_source": " \n \n\n#ifndef _ICE_TYPE_H_\n#define _ICE_TYPE_H_\n\n#define ICE_BYTES_PER_WORD\t2\n#define ICE_BYTES_PER_DWORD\t4\n#define ICE_CHNL_MAX_TC\t\t16\n\n#include \"ice_hw_autogen.h\"\n#include \"ice_devids.h\"\n#include \"ice_osdep.h\"\n#include \"ice_controlq.h\"\n#include \"ice_lan_tx_rx.h\"\n#include \"ice_flex_type.h\"\n#include \"ice_protocol_type.h\"\n#include \"ice_sbq_cmd.h\"\n#include \"ice_vlan_mode.h\"\n\nstatic inline bool ice_is_tc_ena(unsigned long bitmap, u8 tc)\n{\n\treturn test_bit(tc, &bitmap);\n}\n\nstatic inline u64 round_up_64bit(u64 a, u32 b)\n{\n\treturn div64_long(((a) + (b) / 2), (b));\n}\n\nstatic inline u32 ice_round_to_num(u32 N, u32 R)\n{\n\treturn ((((N) % (R)) < ((R) / 2)) ? (((N) / (R)) * (R)) :\n\t\t((((N) + (R) - 1) / (R)) * (R)));\n}\n\n \n#define ICE_MAIN_VSI_HANDLE\t\t0\n\n \n#define ICE_DBG_INIT\t\tBIT_ULL(1)\n#define ICE_DBG_FW_LOG\t\tBIT_ULL(3)\n#define ICE_DBG_LINK\t\tBIT_ULL(4)\n#define ICE_DBG_PHY\t\tBIT_ULL(5)\n#define ICE_DBG_QCTX\t\tBIT_ULL(6)\n#define ICE_DBG_NVM\t\tBIT_ULL(7)\n#define ICE_DBG_LAN\t\tBIT_ULL(8)\n#define ICE_DBG_FLOW\t\tBIT_ULL(9)\n#define ICE_DBG_SW\t\tBIT_ULL(13)\n#define ICE_DBG_SCHED\t\tBIT_ULL(14)\n#define ICE_DBG_RDMA\t\tBIT_ULL(15)\n#define ICE_DBG_PKG\t\tBIT_ULL(16)\n#define ICE_DBG_RES\t\tBIT_ULL(17)\n#define ICE_DBG_PTP\t\tBIT_ULL(19)\n#define ICE_DBG_AQ_MSG\t\tBIT_ULL(24)\n#define ICE_DBG_AQ_DESC\t\tBIT_ULL(25)\n#define ICE_DBG_AQ_DESC_BUF\tBIT_ULL(26)\n#define ICE_DBG_AQ_CMD\t\tBIT_ULL(27)\n#define ICE_DBG_AQ\t\t(ICE_DBG_AQ_MSG\t\t| \\\n\t\t\t\t ICE_DBG_AQ_DESC\t| \\\n\t\t\t\t ICE_DBG_AQ_DESC_BUF\t| \\\n\t\t\t\t ICE_DBG_AQ_CMD)\n\n#define ICE_DBG_USER\t\tBIT_ULL(31)\n\nenum ice_aq_res_ids {\n\tICE_NVM_RES_ID = 1,\n\tICE_SPD_RES_ID,\n\tICE_CHANGE_LOCK_RES_ID,\n\tICE_GLOBAL_CFG_LOCK_RES_ID\n};\n\n \n#define ICE_NVM_TIMEOUT\t\t\t180000\n#define ICE_CHANGE_LOCK_TIMEOUT\t\t1000\n#define ICE_GLOBAL_CFG_LOCK_TIMEOUT\t5000\n\nenum ice_aq_res_access_type {\n\tICE_RES_READ = 1,\n\tICE_RES_WRITE\n};\n\nstruct ice_driver_ver {\n\tu8 major_ver;\n\tu8 minor_ver;\n\tu8 build_ver;\n\tu8 subbuild_ver;\n\tu8 driver_string[32];\n};\n\nenum ice_fc_mode {\n\tICE_FC_NONE = 0,\n\tICE_FC_RX_PAUSE,\n\tICE_FC_TX_PAUSE,\n\tICE_FC_FULL,\n\tICE_FC_PFC,\n\tICE_FC_DFLT\n};\n\nenum ice_phy_cache_mode {\n\tICE_FC_MODE = 0,\n\tICE_SPEED_MODE,\n\tICE_FEC_MODE\n};\n\nenum ice_fec_mode {\n\tICE_FEC_NONE = 0,\n\tICE_FEC_RS,\n\tICE_FEC_BASER,\n\tICE_FEC_AUTO\n};\n\nstruct ice_phy_cache_mode_data {\n\tunion {\n\t\tenum ice_fec_mode curr_user_fec_req;\n\t\tenum ice_fc_mode curr_user_fc_req;\n\t\tu16 curr_user_speed_req;\n\t} data;\n};\n\nenum ice_set_fc_aq_failures {\n\tICE_SET_FC_AQ_FAIL_NONE = 0,\n\tICE_SET_FC_AQ_FAIL_GET,\n\tICE_SET_FC_AQ_FAIL_SET,\n\tICE_SET_FC_AQ_FAIL_UPDATE\n};\n\n \nenum ice_mac_type {\n\tICE_MAC_UNKNOWN = 0,\n\tICE_MAC_E810,\n\tICE_MAC_GENERIC,\n};\n\n \nenum ice_media_type {\n\tICE_MEDIA_UNKNOWN = 0,\n\tICE_MEDIA_FIBER,\n\tICE_MEDIA_BASET,\n\tICE_MEDIA_BACKPLANE,\n\tICE_MEDIA_DA,\n};\n\nenum ice_vsi_type {\n\tICE_VSI_PF = 0,\n\tICE_VSI_VF = 1,\n\tICE_VSI_CTRL = 3,\t \n\tICE_VSI_CHNL = 4,\n\tICE_VSI_LB = 6,\n\tICE_VSI_SWITCHDEV_CTRL = 7,\n};\n\nstruct ice_link_status {\n\t \n\tu64 phy_type_low;\n\tu64 phy_type_high;\n\tu8 topo_media_conflict;\n\tu16 max_frame_size;\n\tu16 link_speed;\n\tu16 req_speeds;\n\tu8 link_cfg_err;\n\tu8 lse_ena;\t \n\tu8 link_info;\n\tu8 an_info;\n\tu8 ext_info;\n\tu8 fec_info;\n\tu8 pacing;\n\t \n\tu8 module_type[ICE_MODULE_TYPE_TOTAL_BYTE];\n};\n\n \nenum ice_disq_rst_src {\n\tICE_NO_RESET = 0,\n\tICE_VM_RESET,\n\tICE_VF_RESET,\n};\n\n \nstruct ice_phy_info {\n\tstruct ice_link_status link_info;\n\tstruct ice_link_status link_info_old;\n\tu64 phy_type_low;\n\tu64 phy_type_high;\n\tenum ice_media_type media_type;\n\tu8 get_link_info;\n\t \n\tu16 curr_user_speed_req;\n\tenum ice_fec_mode curr_user_fec_req;\n\tenum ice_fc_mode curr_user_fc_req;\n\tstruct ice_aqc_set_phy_cfg_data curr_user_phy_cfg;\n};\n\n \nenum ice_fltr_ptype {\n\t \n\tICE_FLTR_PTYPE_NONF_NONE = 0,\n\tICE_FLTR_PTYPE_NONF_IPV4_UDP,\n\tICE_FLTR_PTYPE_NONF_IPV4_TCP,\n\tICE_FLTR_PTYPE_NONF_IPV4_SCTP,\n\tICE_FLTR_PTYPE_NONF_IPV4_OTHER,\n\tICE_FLTR_PTYPE_NONF_IPV4_GTPU_IPV4_UDP,\n\tICE_FLTR_PTYPE_NONF_IPV4_GTPU_IPV4_TCP,\n\tICE_FLTR_PTYPE_NONF_IPV4_GTPU_IPV4_ICMP,\n\tICE_FLTR_PTYPE_NONF_IPV4_GTPU_IPV4_OTHER,\n\tICE_FLTR_PTYPE_NONF_IPV6_GTPU_IPV6_OTHER,\n\tICE_FLTR_PTYPE_NONF_IPV4_L2TPV3,\n\tICE_FLTR_PTYPE_NONF_IPV6_L2TPV3,\n\tICE_FLTR_PTYPE_NONF_IPV4_ESP,\n\tICE_FLTR_PTYPE_NONF_IPV6_ESP,\n\tICE_FLTR_PTYPE_NONF_IPV4_AH,\n\tICE_FLTR_PTYPE_NONF_IPV6_AH,\n\tICE_FLTR_PTYPE_NONF_IPV4_NAT_T_ESP,\n\tICE_FLTR_PTYPE_NONF_IPV6_NAT_T_ESP,\n\tICE_FLTR_PTYPE_NONF_IPV4_PFCP_NODE,\n\tICE_FLTR_PTYPE_NONF_IPV4_PFCP_SESSION,\n\tICE_FLTR_PTYPE_NONF_IPV6_PFCP_NODE,\n\tICE_FLTR_PTYPE_NONF_IPV6_PFCP_SESSION,\n\tICE_FLTR_PTYPE_NON_IP_L2,\n\tICE_FLTR_PTYPE_FRAG_IPV4,\n\tICE_FLTR_PTYPE_NONF_IPV6_UDP,\n\tICE_FLTR_PTYPE_NONF_IPV6_TCP,\n\tICE_FLTR_PTYPE_NONF_IPV6_SCTP,\n\tICE_FLTR_PTYPE_NONF_IPV6_OTHER,\n\tICE_FLTR_PTYPE_MAX,\n};\n\nenum ice_fd_hw_seg {\n\tICE_FD_HW_SEG_NON_TUN = 0,\n\tICE_FD_HW_SEG_TUN,\n\tICE_FD_HW_SEG_MAX,\n};\n\n \n#define ICE_MAX_FDIR_VSI_PER_FILTER\t(2 + ICE_CHNL_MAX_TC)\n\nstruct ice_fd_hw_prof {\n\tstruct ice_flow_seg_info *fdir_seg[ICE_FD_HW_SEG_MAX];\n\tint cnt;\n\tu64 entry_h[ICE_MAX_FDIR_VSI_PER_FILTER][ICE_FD_HW_SEG_MAX];\n\tu16 vsi_h[ICE_MAX_FDIR_VSI_PER_FILTER];\n};\n\n \nstruct ice_hw_common_caps {\n\tu32 valid_functions;\n\t \n\tu32 active_tc_bitmap;\n\tu32 maxtc;\n\n\t \n\tu16 num_rxq;\t\t \n\tu16 rxq_first_id;\t \n\tu16 num_txq;\t\t \n\tu16 txq_first_id;\t \n\n\t \n\tu16 num_msix_vectors;\n\tu16 msix_vector_first_id;\n\n\t \n\tu16 max_mtu;\n\n\t \n\tu8 sr_iov_1_1;\t\t\t \n\n\t \n\tu16 rss_table_size;\t\t \n\tu8 rss_table_entry_width;\t \n\n\tu8 dcb;\n\tu8 ieee_1588;\n\tu8 rdma;\n\tu8 roce_lag;\n\tu8 sriov_lag;\n\n\tbool nvm_update_pending_nvm;\n\tbool nvm_update_pending_orom;\n\tbool nvm_update_pending_netlist;\n#define ICE_NVM_PENDING_NVM_IMAGE\t\tBIT(0)\n#define ICE_NVM_PENDING_OROM\t\t\tBIT(1)\n#define ICE_NVM_PENDING_NETLIST\t\t\tBIT(2)\n\tbool nvm_unified_update;\n#define ICE_NVM_MGMT_UNIFIED_UPD_SUPPORT\tBIT(3)\n\t \n\tbool pcie_reset_avoidance;\n\t \n\tbool reset_restrict_support;\n};\n\n \n \n#define ICE_TS_FUNC_ENA_M\t\tBIT(0)\n#define ICE_TS_SRC_TMR_OWND_M\t\tBIT(1)\n#define ICE_TS_TMR_ENA_M\t\tBIT(2)\n#define ICE_TS_TMR_IDX_OWND_S\t\t4\n#define ICE_TS_TMR_IDX_OWND_M\t\tBIT(4)\n#define ICE_TS_CLK_FREQ_S\t\t16\n#define ICE_TS_CLK_FREQ_M\t\tICE_M(0x7, ICE_TS_CLK_FREQ_S)\n#define ICE_TS_CLK_SRC_S\t\t20\n#define ICE_TS_CLK_SRC_M\t\tBIT(20)\n#define ICE_TS_TMR_IDX_ASSOC_S\t\t24\n#define ICE_TS_TMR_IDX_ASSOC_M\t\tBIT(24)\n\n \nenum ice_time_ref_freq {\n\tICE_TIME_REF_FREQ_25_000\t= 0,\n\tICE_TIME_REF_FREQ_122_880\t= 1,\n\tICE_TIME_REF_FREQ_125_000\t= 2,\n\tICE_TIME_REF_FREQ_153_600\t= 3,\n\tICE_TIME_REF_FREQ_156_250\t= 4,\n\tICE_TIME_REF_FREQ_245_760\t= 5,\n\n\tNUM_ICE_TIME_REF_FREQ\n};\n\n \nenum ice_clk_src {\n\tICE_CLK_SRC_TCX0\t= 0,  \n\tICE_CLK_SRC_TIME_REF\t= 1,  \n\n\tNUM_ICE_CLK_SRC\n};\n\nstruct ice_ts_func_info {\n\t \n\tenum ice_time_ref_freq time_ref;\n\tu8 clk_freq;\n\tu8 clk_src;\n\tu8 tmr_index_assoc;\n\tu8 ena;\n\tu8 tmr_index_owned;\n\tu8 src_tmr_owned;\n\tu8 tmr_ena;\n};\n\n \n#define ICE_TS_TMR0_OWNR_M\t\t0x7\n#define ICE_TS_TMR0_OWND_M\t\tBIT(3)\n#define ICE_TS_TMR1_OWNR_S\t\t4\n#define ICE_TS_TMR1_OWNR_M\t\tICE_M(0x7, ICE_TS_TMR1_OWNR_S)\n#define ICE_TS_TMR1_OWND_M\t\tBIT(7)\n#define ICE_TS_DEV_ENA_M\t\tBIT(24)\n#define ICE_TS_TMR0_ENA_M\t\tBIT(25)\n#define ICE_TS_TMR1_ENA_M\t\tBIT(26)\n#define ICE_TS_LL_TX_TS_READ_M\t\tBIT(28)\n\nstruct ice_ts_dev_info {\n\t \n\tu32 ena_ports;\n\tu32 tmr_own_map;\n\tu32 tmr0_owner;\n\tu32 tmr1_owner;\n\tu8 tmr0_owned;\n\tu8 tmr1_owned;\n\tu8 ena;\n\tu8 tmr0_ena;\n\tu8 tmr1_ena;\n\tu8 ts_ll_read;\n};\n\n \nstruct ice_hw_func_caps {\n\tstruct ice_hw_common_caps common_cap;\n\tu32 num_allocd_vfs;\t\t \n\tu32 vf_base_id;\t\t\t \n\tu32 guar_num_vsi;\n\tu32 fd_fltr_guar;\t\t \n\tu32 fd_fltr_best_effort;\t \n\tstruct ice_ts_func_info ts_func_info;\n};\n\n \nstruct ice_hw_dev_caps {\n\tstruct ice_hw_common_caps common_cap;\n\tu32 num_vfs_exposed;\t\t \n\tu32 num_vsi_allocd_to_host;\t \n\tu32 num_flow_director_fltr;\t \n\tstruct ice_ts_dev_info ts_dev_info;\n\tu32 num_funcs;\n};\n\n \nstruct ice_mac_info {\n\tu8 lan_addr[ETH_ALEN];\n\tu8 perm_addr[ETH_ALEN];\n};\n\n \nenum ice_reset_req {\n\tICE_RESET_POR\t= 0,\n\tICE_RESET_INVAL\t= 0,\n\tICE_RESET_CORER\t= 1,\n\tICE_RESET_GLOBR\t= 2,\n\tICE_RESET_EMPR\t= 3,\n\tICE_RESET_PFR\t= 4,\n};\n\n \nstruct ice_bus_info {\n\tu16 device;\n\tu8 func;\n};\n\n \nstruct ice_fc_info {\n\tenum ice_fc_mode current_mode;\t \n\tenum ice_fc_mode req_mode;\t \n};\n\n \nstruct ice_orom_info {\n\tu8 major;\t\t\t \n\tu8 patch;\t\t\t \n\tu16 build;\t\t\t \n};\n\n \nstruct ice_nvm_info {\n\tu32 eetrack;\n\tu8 major;\n\tu8 minor;\n};\n\n \nstruct ice_netlist_info {\n\tu32 major;\t\t\t \n\tu32 minor;\t\t\t \n\tu32 type;\t\t\t \n\tu32 rev;\t\t\t \n\tu32 hash;\t\t\t \n\tu16 cust_ver;\t\t\t \n};\n\n \nenum ice_flash_bank {\n\tICE_INVALID_FLASH_BANK,\n\tICE_1ST_FLASH_BANK,\n\tICE_2ND_FLASH_BANK,\n};\n\n \nenum ice_bank_select {\n\tICE_ACTIVE_FLASH_BANK,\n\tICE_INACTIVE_FLASH_BANK,\n};\n\n \nstruct ice_bank_info {\n\tu32 nvm_ptr;\t\t\t\t \n\tu32 nvm_size;\t\t\t\t \n\tu32 orom_ptr;\t\t\t\t \n\tu32 orom_size;\t\t\t\t \n\tu32 netlist_ptr;\t\t\t \n\tu32 netlist_size;\t\t\t \n\tenum ice_flash_bank nvm_bank;\t\t \n\tenum ice_flash_bank orom_bank;\t\t \n\tenum ice_flash_bank netlist_bank;\t \n};\n\n \nstruct ice_flash_info {\n\tstruct ice_orom_info orom;\t \n\tstruct ice_nvm_info nvm;\t \n\tstruct ice_netlist_info netlist; \n\tstruct ice_bank_info banks;\t \n\tu16 sr_words;\t\t\t \n\tu32 flash_size;\t\t\t \n\tu8 blank_nvm_mode;\t\t \n};\n\nstruct ice_link_default_override_tlv {\n\tu8 options;\n#define ICE_LINK_OVERRIDE_OPT_M\t\t0x3F\n#define ICE_LINK_OVERRIDE_STRICT_MODE\tBIT(0)\n#define ICE_LINK_OVERRIDE_EPCT_DIS\tBIT(1)\n#define ICE_LINK_OVERRIDE_PORT_DIS\tBIT(2)\n#define ICE_LINK_OVERRIDE_EN\t\tBIT(3)\n#define ICE_LINK_OVERRIDE_AUTO_LINK_DIS\tBIT(4)\n#define ICE_LINK_OVERRIDE_EEE_EN\tBIT(5)\n\tu8 phy_config;\n#define ICE_LINK_OVERRIDE_PHY_CFG_S\t8\n#define ICE_LINK_OVERRIDE_PHY_CFG_M\t(0xC3 << ICE_LINK_OVERRIDE_PHY_CFG_S)\n#define ICE_LINK_OVERRIDE_PAUSE_M\t0x3\n#define ICE_LINK_OVERRIDE_LESM_EN\tBIT(6)\n#define ICE_LINK_OVERRIDE_AUTO_FEC_EN\tBIT(7)\n\tu8 fec_options;\n#define ICE_LINK_OVERRIDE_FEC_OPT_M\t0xFF\n\tu8 rsvd1;\n\tu64 phy_type_low;\n\tu64 phy_type_high;\n};\n\n#define ICE_NVM_VER_LEN\t32\n\n \n#define ICE_MAX_TRAFFIC_CLASS 8\n#define ICE_TXSCHED_MAX_BRANCHES ICE_MAX_TRAFFIC_CLASS\n\n#define ice_for_each_traffic_class(_i)\t\\\n\tfor ((_i) = 0; (_i) < ICE_MAX_TRAFFIC_CLASS; (_i)++)\n\n \n#define ICE_INVAL_TEID 0xFFFFFFFF\n#define ICE_DFLT_AGG_ID 0\n\nstruct ice_sched_node {\n\tstruct ice_sched_node *parent;\n\tstruct ice_sched_node *sibling;  \n\tstruct ice_sched_node **children;\n\tstruct ice_aqc_txsched_elem_data info;\n\tchar *name;\n\tstruct devlink_rate *rate_node;\n\tu64 tx_max;\n\tu64 tx_share;\n\tu32 agg_id;\t\t\t \n\tu32 id;\n\tu32 tx_priority;\n\tu32 tx_weight;\n\tu16 vsi_handle;\n\tu8 in_use;\t\t\t \n\tu8 tx_sched_layer;\t\t \n\tu8 num_children;\n\tu8 tc_num;\n\tu8 owner;\n#define ICE_SCHED_NODE_OWNER_LAN\t0\n#define ICE_SCHED_NODE_OWNER_RDMA\t2\n};\n\n \n#define ICE_TXSCHED_GET_NODE_TEID(x) le32_to_cpu((x)->info.node_teid)\n\n \nenum ice_agg_type {\n\tICE_AGG_TYPE_UNKNOWN = 0,\n\tICE_AGG_TYPE_VSI,\n\tICE_AGG_TYPE_AGG,  \n\tICE_AGG_TYPE_Q,\n\tICE_AGG_TYPE_QG\n};\n\n \nenum ice_rl_type {\n\tICE_UNKNOWN_BW = 0,\n\tICE_MIN_BW,\t\t \n\tICE_MAX_BW,\t\t \n\tICE_SHARED_BW\t\t \n};\n\n#define ICE_SCHED_MIN_BW\t\t500\t\t \n#define ICE_SCHED_MAX_BW\t\t100000000\t \n#define ICE_SCHED_DFLT_BW\t\t0xFFFFFFFF\t \n#define ICE_SCHED_DFLT_RL_PROF_ID\t0\n#define ICE_SCHED_NO_SHARED_RL_PROF_ID\t0xFFFF\n#define ICE_SCHED_DFLT_BW_WT\t\t4\n#define ICE_SCHED_INVAL_PROF_ID\t\t0xFFFF\n#define ICE_SCHED_DFLT_BURST_SIZE\t(15 * 1024)\t \n\n#define ICE_MAX_PORT_PER_PCI_DEV 8\n\n  \nenum ice_bw_type {\n\tICE_BW_TYPE_PRIO,\n\tICE_BW_TYPE_CIR,\n\tICE_BW_TYPE_CIR_WT,\n\tICE_BW_TYPE_EIR,\n\tICE_BW_TYPE_EIR_WT,\n\tICE_BW_TYPE_SHARED,\n\tICE_BW_TYPE_CNT\t\t \n};\n\nstruct ice_bw {\n\tu32 bw;\n\tu16 bw_alloc;\n};\n\nstruct ice_bw_type_info {\n\tDECLARE_BITMAP(bw_t_bitmap, ICE_BW_TYPE_CNT);\n\tu8 generic;\n\tstruct ice_bw cir_bw;\n\tstruct ice_bw eir_bw;\n\tu32 shared_bw;\n};\n\n \nstruct ice_q_ctx {\n\tu16  q_handle;\n\tu32  q_teid;\n\t \n\tstruct ice_bw_type_info bw_t_info;\n};\n\n \nstruct ice_sched_vsi_info {\n\tstruct ice_sched_node *vsi_node[ICE_MAX_TRAFFIC_CLASS];\n\tstruct ice_sched_node *ag_node[ICE_MAX_TRAFFIC_CLASS];\n\tstruct list_head list_entry;\n\tu16 max_lanq[ICE_MAX_TRAFFIC_CLASS];\n\tu16 max_rdmaq[ICE_MAX_TRAFFIC_CLASS];\n\t \n\tstruct ice_bw_type_info bw_t_info[ICE_MAX_TRAFFIC_CLASS];\n};\n\n \nstruct ice_sched_tx_policy {\n\tu16 max_num_vsis;\n\tu8 max_num_lan_qs_per_tc[ICE_MAX_TRAFFIC_CLASS];\n\tu8 rdma_ena;\n};\n\n \nstruct ice_dcb_ets_cfg {\n\tu8 willing;\n\tu8 cbs;\n\tu8 maxtcs;\n\tu8 prio_table[ICE_MAX_TRAFFIC_CLASS];\n\tu8 tcbwtable[ICE_MAX_TRAFFIC_CLASS];\n\tu8 tsatable[ICE_MAX_TRAFFIC_CLASS];\n};\n\n \nstruct ice_dcb_pfc_cfg {\n\tu8 willing;\n\tu8 mbc;\n\tu8 pfccap;\n\tu8 pfcena;\n};\n\n \nstruct ice_dcb_app_priority_table {\n\tu16 prot_id;\n\tu8 priority;\n\tu8 selector;\n};\n\n#define ICE_MAX_USER_PRIORITY\t8\n#define ICE_DCBX_MAX_APPS\t64\n#define ICE_DSCP_NUM_VAL\t64\n#define ICE_LLDPDU_SIZE\t\t1500\n#define ICE_TLV_STATUS_OPER\t0x1\n#define ICE_TLV_STATUS_SYNC\t0x2\n#define ICE_TLV_STATUS_ERR\t0x4\n#define ICE_APP_PROT_ID_ISCSI_860 0x035c\n#define ICE_APP_SEL_ETHTYPE\t0x1\n#define ICE_APP_SEL_TCPIP\t0x2\n#define ICE_CEE_APP_SEL_ETHTYPE\t0x0\n#define ICE_SR_LINK_DEFAULT_OVERRIDE_PTR\t0x134\n#define ICE_CEE_APP_SEL_TCPIP\t0x1\n\nstruct ice_dcbx_cfg {\n\tu32 numapps;\n\tu32 tlv_status;  \n\tstruct ice_dcb_ets_cfg etscfg;\n\tstruct ice_dcb_ets_cfg etsrec;\n\tstruct ice_dcb_pfc_cfg pfc;\n#define ICE_QOS_MODE_VLAN\t0x0\n#define ICE_QOS_MODE_DSCP\t0x1\n\tu8 pfc_mode;\n\tstruct ice_dcb_app_priority_table app[ICE_DCBX_MAX_APPS];\n\t \n\tDECLARE_BITMAP(dscp_mapped, ICE_DSCP_NUM_VAL);\n\t \n\tu8 dscp_map[ICE_DSCP_NUM_VAL];\n\tu8 dcbx_mode;\n#define ICE_DCBX_MODE_CEE\t0x1\n#define ICE_DCBX_MODE_IEEE\t0x2\n\tu8 app_mode;\n#define ICE_DCBX_APPS_NON_WILLING\t0x1\n};\n\nstruct ice_qos_cfg {\n\tstruct ice_dcbx_cfg local_dcbx_cfg;\t \n\tstruct ice_dcbx_cfg desired_dcbx_cfg;\t \n\tstruct ice_dcbx_cfg remote_dcbx_cfg;\t \n\tu8 dcbx_status : 3;\t\t\t \n\tu8 is_sw_lldp : 1;\n};\n\nstruct ice_port_info {\n\tstruct ice_sched_node *root;\t \n\tstruct ice_hw *hw;\t\t \n\tu32 last_node_teid;\t\t \n\tu16 sw_id;\t\t\t \n\tu16 pf_vf_num;\n\tu8 port_state;\n#define ICE_SCHED_PORT_STATE_INIT\t0x0\n#define ICE_SCHED_PORT_STATE_READY\t0x1\n\tu8 lport;\n#define ICE_LPORT_MASK\t\t\t0xff\n\tstruct ice_fc_info fc;\n\tstruct ice_mac_info mac;\n\tstruct ice_phy_info phy;\n\tstruct mutex sched_lock;\t \n\tstruct ice_sched_node *\n\t\tsib_head[ICE_MAX_TRAFFIC_CLASS][ICE_AQC_TOPO_MAX_LEVEL_NUM];\n\t \n\tstruct list_head rl_prof_list[ICE_AQC_TOPO_MAX_LEVEL_NUM];\n\tstruct ice_qos_cfg qos_cfg;\n\tstruct xarray sched_node_ids;\n\tu8 is_vf:1;\n\tu8 is_custom_tx_enabled:1;\n};\n\nstruct ice_switch_info {\n\tstruct list_head vsi_list_map_head;\n\tstruct ice_sw_recipe *recp_list;\n\tu16 prof_res_bm_init;\n\tu16 max_used_prof_index;\n\n\tDECLARE_BITMAP(prof_res_bm[ICE_MAX_NUM_PROFILES], ICE_MAX_FV_WORDS);\n};\n\n \nstruct ice_fw_log_evnt {\n\tu8 cfg : 4;\t \n\tu8 cur : 4;\t \n};\n\nstruct ice_fw_log_cfg {\n\tu8 cq_en : 1;     \n\tu8 uart_en : 1;   \n\tu8 actv_evnts;    \n\n#define ICE_FW_LOG_EVNT_INFO\t(ICE_AQC_FW_LOG_INFO_EN >> ICE_AQC_FW_LOG_EN_S)\n#define ICE_FW_LOG_EVNT_INIT\t(ICE_AQC_FW_LOG_INIT_EN >> ICE_AQC_FW_LOG_EN_S)\n#define ICE_FW_LOG_EVNT_FLOW\t(ICE_AQC_FW_LOG_FLOW_EN >> ICE_AQC_FW_LOG_EN_S)\n#define ICE_FW_LOG_EVNT_ERR\t(ICE_AQC_FW_LOG_ERR_EN >> ICE_AQC_FW_LOG_EN_S)\n\tstruct ice_fw_log_evnt evnts[ICE_AQC_FW_LOG_ID_MAX];\n};\n\n \nenum ice_mbx_snapshot_state {\n\tICE_MAL_VF_DETECT_STATE_NEW_SNAPSHOT = 0,\n\tICE_MAL_VF_DETECT_STATE_TRAVERSE,\n\tICE_MAL_VF_DETECT_STATE_DETECT,\n\tICE_MAL_VF_DETECT_STATE_INVALID = 0xFFFFFFFF,\n};\n\n \nstruct ice_mbx_snap_buffer_data {\n\tenum ice_mbx_snapshot_state state;\n\tu32 head;\n\tu32 tail;\n\tu32 num_iterations;\n\tu16 num_msg_proc;\n\tu16 num_pending_arq;\n\tu16 max_num_msgs_mbx;\n};\n\n \nstruct ice_mbx_vf_info {\n\tstruct list_head list_entry;\n\tu32 msg_count;\n\tu8 malicious : 1;\n};\n\n \nstruct ice_mbx_snapshot {\n\tstruct ice_mbx_snap_buffer_data mbx_buf;\n\tstruct list_head mbx_vf;\n};\n\n \nstruct ice_mbx_data {\n\tu16 num_msg_proc;\n\tu16 num_pending_arq;\n\tu16 max_num_msgs_mbx;\n\tu16 async_watermark_val;\n};\n\n \nstruct ice_hw {\n\tu8 __iomem *hw_addr;\n\tvoid *back;\n\tstruct ice_aqc_layer_props *layer_info;\n\tstruct ice_port_info *port_info;\n\t \n\tu32 psm_clk_freq;\n\tu64 debug_mask;\t\t \n\tenum ice_mac_type mac_type;\n\n\tu16 fd_ctr_base;\t \n\n\t \n\tu16 device_id;\n\tu16 vendor_id;\n\tu16 subsystem_device_id;\n\tu16 subsystem_vendor_id;\n\tu8 revision_id;\n\n\tu8 pf_id;\t\t \n\n\tu16 max_burst_size;\t \n\n\t \n\tu8 num_tx_sched_layers;\n\tu8 num_tx_sched_phys_layers;\n\tu8 flattened_layers;\n\tu8 max_cgds;\n\tu8 sw_entry_point_layer;\n\tu16 max_children[ICE_AQC_TOPO_MAX_LEVEL_NUM];\n\tstruct list_head agg_list;\t \n\n\tstruct ice_vsi_ctx *vsi_ctx[ICE_MAX_VSI];\n\tu8 evb_veb;\t\t \n\tu8 reset_ongoing;\t \n\tstruct ice_bus_info bus;\n\tstruct ice_flash_info flash;\n\tstruct ice_hw_dev_caps dev_caps;\t \n\tstruct ice_hw_func_caps func_caps;\t \n\n\tstruct ice_switch_info *switch_info;\t \n\n\t \n\tstruct ice_ctl_q_info adminq;\n\tstruct ice_ctl_q_info sbq;\n\tstruct ice_ctl_q_info mailboxq;\n\n\tu8 api_branch;\t\t \n\tu8 api_maj_ver;\t\t \n\tu8 api_min_ver;\t\t \n\tu8 api_patch;\t\t \n\tu8 fw_branch;\t\t \n\tu8 fw_maj_ver;\t\t \n\tu8 fw_min_ver;\t\t \n\tu8 fw_patch;\t\t \n\tu32 fw_build;\t\t \n\n\tstruct ice_fw_log_cfg fw_log;\n\n \n#define ICE_MAX_AGG_BW_200G\t0x0\n#define ICE_MAX_AGG_BW_100G\t0X1\n#define ICE_MAX_AGG_BW_50G\t0x2\n#define ICE_MAX_AGG_BW_25G\t0x3\n\t \n#define ICE_ITR_GRAN_ABOVE_25\t2\n#define ICE_ITR_GRAN_MAX_25\t4\n\t \n\tu8 itr_gran;\n\t \n#define ICE_INTRL_GRAN_ABOVE_25\t4\n#define ICE_INTRL_GRAN_MAX_25\t8\n\t \n\tu8 intrl_gran;\n\n#define ICE_PHY_PER_NAC\t\t1\n#define ICE_MAX_QUAD\t\t2\n#define ICE_NUM_QUAD_TYPE\t2\n#define ICE_PORTS_PER_QUAD\t4\n#define ICE_PHY_0_LAST_QUAD\t1\n#define ICE_PORTS_PER_PHY\t8\n#define ICE_NUM_EXTERNAL_PORTS\t\tICE_PORTS_PER_PHY\n\n\t \n\tstruct ice_pkg_ver active_pkg_ver;\n\tu32 active_track_id;\n\tu8 active_pkg_name[ICE_PKG_NAME_SIZE];\n\tu8 active_pkg_in_nvm;\n\n\t \n\tstruct ice_pkg_ver pkg_ver;\n\tu8 pkg_name[ICE_PKG_NAME_SIZE];\n\n\t \n\tstruct ice_pkg_ver ice_seg_fmt_ver;\n\tu8 ice_seg_id[ICE_SEG_ID_SIZE];\n\n\t \n\tstruct ice_seg *seg;\n\n\t \n\tu8 *pkg_copy;\n\tu32 pkg_size;\n\n\t \n\tstruct mutex tnl_lock;\n\tstruct ice_tunnel_table tnl;\n\n\tstruct udp_tunnel_nic_shared udp_tunnel_shared;\n\tstruct udp_tunnel_nic_info udp_tunnel_nic;\n\n\t \n\tstruct ice_dvm_table dvm_upd;\n\n\t \n\tstruct ice_blk_info blk[ICE_BLK_COUNT];\n\tstruct mutex fl_profs_locks[ICE_BLK_COUNT];\t \n\tstruct list_head fl_profs[ICE_BLK_COUNT];\n\n\t \n\tint fdir_active_fltr;\n\n\tstruct mutex fdir_fltr_lock;\t \n\tstruct list_head fdir_list_head;\n\n\t \n\tu16 fdir_fltr_cnt[ICE_FLTR_PTYPE_MAX];\n\n\tstruct ice_fd_hw_prof **fdir_prof;\n\tDECLARE_BITMAP(fdir_perfect_fltr, ICE_FLTR_PTYPE_MAX);\n\tstruct mutex rss_locks;\t \n\tstruct list_head rss_list_head;\n\tstruct ice_mbx_snapshot mbx_snapshot;\n\tDECLARE_BITMAP(hw_ptype, ICE_FLOW_PTYPE_MAX);\n\tu8 dvm_ena;\n\tu16 io_expander_handle;\n};\n\n \nstruct ice_eth_stats {\n\tu64 rx_bytes;\t\t\t \n\tu64 rx_unicast;\t\t\t \n\tu64 rx_multicast;\t\t \n\tu64 rx_broadcast;\t\t \n\tu64 rx_discards;\t\t \n\tu64 rx_unknown_protocol;\t \n\tu64 tx_bytes;\t\t\t \n\tu64 tx_unicast;\t\t\t \n\tu64 tx_multicast;\t\t \n\tu64 tx_broadcast;\t\t \n\tu64 tx_discards;\t\t \n\tu64 tx_errors;\t\t\t \n};\n\n#define ICE_MAX_UP\t8\n\n \nstruct ice_hw_port_stats {\n\t \n\tstruct ice_eth_stats eth;\n\t \n\tu64 tx_dropped_link_down;\t \n\tu64 crc_errors;\t\t\t \n\tu64 illegal_bytes;\t\t \n\tu64 error_bytes;\t\t \n\tu64 mac_local_faults;\t\t \n\tu64 mac_remote_faults;\t\t \n\tu64 rx_len_errors;\t\t \n\tu64 link_xon_rx;\t\t \n\tu64 link_xoff_rx;\t\t \n\tu64 link_xon_tx;\t\t \n\tu64 link_xoff_tx;\t\t \n\tu64 priority_xon_rx[8];\t\t \n\tu64 priority_xoff_rx[8];\t \n\tu64 priority_xon_tx[8];\t\t \n\tu64 priority_xoff_tx[8];\t \n\tu64 priority_xon_2_xoff[8];\t \n\tu64 rx_size_64;\t\t\t \n\tu64 rx_size_127;\t\t \n\tu64 rx_size_255;\t\t \n\tu64 rx_size_511;\t\t \n\tu64 rx_size_1023;\t\t \n\tu64 rx_size_1522;\t\t \n\tu64 rx_size_big;\t\t \n\tu64 rx_undersize;\t\t \n\tu64 rx_fragments;\t\t \n\tu64 rx_oversize;\t\t \n\tu64 rx_jabber;\t\t\t \n\tu64 tx_size_64;\t\t\t \n\tu64 tx_size_127;\t\t \n\tu64 tx_size_255;\t\t \n\tu64 tx_size_511;\t\t \n\tu64 tx_size_1023;\t\t \n\tu64 tx_size_1522;\t\t \n\tu64 tx_size_big;\t\t \n\t \n\tu32 fd_sb_status;\n\tu64 fd_sb_match;\n};\n\nenum ice_sw_fwd_act_type {\n\tICE_FWD_TO_VSI = 0,\n\tICE_FWD_TO_VSI_LIST,  \n\tICE_FWD_TO_Q,\n\tICE_FWD_TO_QGRP,\n\tICE_DROP_PACKET,\n\tICE_NOP,\n\tICE_INVAL_ACT\n};\n\nstruct ice_aq_get_set_rss_lut_params {\n\tu8 *lut;\t\t \n\tenum ice_lut_size lut_size;  \n\tenum ice_lut_type lut_type;  \n\tu16 vsi_handle;\t\t \n\tu8 global_lut_id;\t \n};\n\n \n#define ICE_SR_NVM_CTRL_WORD\t\t0x00\n#define ICE_SR_BOOT_CFG_PTR\t\t0x132\n#define ICE_SR_NVM_WOL_CFG\t\t0x19\n#define ICE_NVM_OROM_VER_OFF\t\t0x02\n#define ICE_SR_PBA_BLOCK_PTR\t\t0x16\n#define ICE_SR_NVM_DEV_STARTER_VER\t0x18\n#define ICE_SR_NVM_EETRACK_LO\t\t0x2D\n#define ICE_SR_NVM_EETRACK_HI\t\t0x2E\n#define ICE_NVM_VER_LO_SHIFT\t\t0\n#define ICE_NVM_VER_LO_MASK\t\t(0xff << ICE_NVM_VER_LO_SHIFT)\n#define ICE_NVM_VER_HI_SHIFT\t\t12\n#define ICE_NVM_VER_HI_MASK\t\t(0xf << ICE_NVM_VER_HI_SHIFT)\n#define ICE_OROM_VER_PATCH_SHIFT\t0\n#define ICE_OROM_VER_PATCH_MASK\t\t(0xff << ICE_OROM_VER_PATCH_SHIFT)\n#define ICE_OROM_VER_BUILD_SHIFT\t8\n#define ICE_OROM_VER_BUILD_MASK\t\t(0xffff << ICE_OROM_VER_BUILD_SHIFT)\n#define ICE_OROM_VER_SHIFT\t\t24\n#define ICE_OROM_VER_MASK\t\t(0xff << ICE_OROM_VER_SHIFT)\n#define ICE_SR_PFA_PTR\t\t\t0x40\n#define ICE_SR_1ST_NVM_BANK_PTR\t\t0x42\n#define ICE_SR_NVM_BANK_SIZE\t\t0x43\n#define ICE_SR_1ST_OROM_BANK_PTR\t0x44\n#define ICE_SR_OROM_BANK_SIZE\t\t0x45\n#define ICE_SR_NETLIST_BANK_PTR\t\t0x46\n#define ICE_SR_NETLIST_BANK_SIZE\t0x47\n#define ICE_SR_SECTOR_SIZE_IN_WORDS\t0x800\n\n \n#define ICE_NVM_CSS_SREV_L\t\t\t0x14\n#define ICE_NVM_CSS_SREV_H\t\t\t0x15\n\n \n#define ICE_CSS_HEADER_LENGTH\t\t\t330\n\n \n#define ICE_NVM_SR_COPY_WORD_OFFSET\t\troundup(ICE_CSS_HEADER_LENGTH, 32)\n\n \n#define ICE_NVM_OROM_TRAILER_LENGTH\t\t(2 * ICE_CSS_HEADER_LENGTH)\n\n \n#define ICE_NETLIST_LINK_TOPO_MOD_ID\t\t0x011B\n#define ICE_NETLIST_TYPE_OFFSET\t\t\t0x0000\n#define ICE_NETLIST_LEN_OFFSET\t\t\t0x0001\n\n \n#define ICE_NETLIST_LINK_TOPO_OFFSET(n)\t\t((n) + 2)\n\n#define ICE_LINK_TOPO_MODULE_LEN\t\tICE_NETLIST_LINK_TOPO_OFFSET(0x0000)\n#define ICE_LINK_TOPO_NODE_COUNT\t\tICE_NETLIST_LINK_TOPO_OFFSET(0x0001)\n\n#define ICE_LINK_TOPO_NODE_COUNT_M\t\tICE_M(0x3FF, 0)\n\n \n#define ICE_NETLIST_ID_BLK_SIZE\t\t\t0x30\n#define ICE_NETLIST_ID_BLK_OFFSET(n)\t\tICE_NETLIST_LINK_TOPO_OFFSET(0x0004 + 2 * (n))\n\n \n#define ICE_NETLIST_ID_BLK_MAJOR_VER_LOW\t0x02\n#define ICE_NETLIST_ID_BLK_MAJOR_VER_HIGH\t0x03\n#define ICE_NETLIST_ID_BLK_MINOR_VER_LOW\t0x04\n#define ICE_NETLIST_ID_BLK_MINOR_VER_HIGH\t0x05\n#define ICE_NETLIST_ID_BLK_TYPE_LOW\t\t0x06\n#define ICE_NETLIST_ID_BLK_TYPE_HIGH\t\t0x07\n#define ICE_NETLIST_ID_BLK_REV_LOW\t\t0x08\n#define ICE_NETLIST_ID_BLK_REV_HIGH\t\t0x09\n#define ICE_NETLIST_ID_BLK_SHA_HASH_WORD(n)\t(0x0A + (n))\n#define ICE_NETLIST_ID_BLK_CUST_VER\t\t0x2F\n\n \n#define ICE_SR_CTRL_WORD_1_S\t\t0x06\n#define ICE_SR_CTRL_WORD_1_M\t\t(0x03 << ICE_SR_CTRL_WORD_1_S)\n#define ICE_SR_CTRL_WORD_VALID\t\t0x1\n#define ICE_SR_CTRL_WORD_OROM_BANK\tBIT(3)\n#define ICE_SR_CTRL_WORD_NETLIST_BANK\tBIT(4)\n#define ICE_SR_CTRL_WORD_NVM_BANK\tBIT(5)\n\n#define ICE_SR_NVM_PTR_4KB_UNITS\tBIT(15)\n\n \n#define ICE_SR_PFA_LINK_OVERRIDE_WORDS\t\t10\n#define ICE_SR_PFA_LINK_OVERRIDE_PHY_WORDS\t4\n#define ICE_SR_PFA_LINK_OVERRIDE_OFFSET\t\t2\n#define ICE_SR_PFA_LINK_OVERRIDE_FEC_OFFSET\t1\n#define ICE_SR_PFA_LINK_OVERRIDE_PHY_OFFSET\t2\n#define ICE_FW_API_LINK_OVERRIDE_MAJ\t\t1\n#define ICE_FW_API_LINK_OVERRIDE_MIN\t\t5\n#define ICE_FW_API_LINK_OVERRIDE_PATCH\t\t2\n\n#define ICE_SR_WORDS_IN_1KB\t\t512\n\n \n#define ICE_FW_API_LLDP_FLTR_MAJ\t1\n#define ICE_FW_API_LLDP_FLTR_MIN\t7\n#define ICE_FW_API_LLDP_FLTR_PATCH\t1\n\n \n#define ICE_FW_API_REPORT_DFLT_CFG_MAJ\t\t1\n#define ICE_FW_API_REPORT_DFLT_CFG_MIN\t\t7\n#define ICE_FW_API_REPORT_DFLT_CFG_PATCH\t3\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}