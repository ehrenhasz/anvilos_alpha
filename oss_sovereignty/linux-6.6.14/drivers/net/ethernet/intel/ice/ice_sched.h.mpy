{
  "module_name": "ice_sched.h",
  "hash_id": "cf20c24e49610d0a4f55d5d93b465ef548cec7678b83815410cc7e1eb630f014",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_sched.h",
  "human_readable_source": " \n \n\n#ifndef _ICE_SCHED_H_\n#define _ICE_SCHED_H_\n\n#include \"ice_common.h\"\n\n#define SCHED_NODE_NAME_MAX_LEN 32\n\n#define ICE_QGRP_LAYER_OFFSET\t2\n#define ICE_VSI_LAYER_OFFSET\t4\n#define ICE_AGG_LAYER_OFFSET\t6\n#define ICE_SCHED_INVAL_LAYER_NUM\t0xFF\n \n#define ICE_64_BYTE_GRANULARITY\t\t\t0\n#define ICE_KBYTE_GRANULARITY\t\t\tBIT(11)\n#define ICE_MIN_BURST_SIZE_ALLOWED\t\t64  \n#define ICE_MAX_BURST_SIZE_ALLOWED \\\n\t((BIT(11) - 1) * 1024)  \n#define ICE_MAX_BURST_SIZE_64_BYTE_GRANULARITY \\\n\t((BIT(11) - 1) * 64)  \n#define ICE_MAX_BURST_SIZE_KBYTE_GRANULARITY\tICE_MAX_BURST_SIZE_ALLOWED\n\n#define ICE_RL_PROF_ACCURACY_BYTES 128\n#define ICE_RL_PROF_MULTIPLIER 10000\n#define ICE_RL_PROF_TS_MULTIPLIER 32\n#define ICE_RL_PROF_FRACTION 512\n\n#define ICE_PSM_CLK_367MHZ_IN_HZ 367647059\n#define ICE_PSM_CLK_416MHZ_IN_HZ 416666667\n#define ICE_PSM_CLK_446MHZ_IN_HZ 446428571\n#define ICE_PSM_CLK_390MHZ_IN_HZ 390625000\n\n \nstruct ice_aqc_rl_profile_info {\n\tstruct ice_aqc_rl_profile_elem profile;\n\tstruct list_head list_entry;\n\tu32 bw;\t\t\t \n\tu16 prof_id_ref;\t \n};\n\nstruct ice_sched_agg_vsi_info {\n\tstruct list_head list_entry;\n\tDECLARE_BITMAP(tc_bitmap, ICE_MAX_TRAFFIC_CLASS);\n\tu16 vsi_handle;\n\t \n\tDECLARE_BITMAP(replay_tc_bitmap, ICE_MAX_TRAFFIC_CLASS);\n};\n\nstruct ice_sched_agg_info {\n\tstruct list_head agg_vsi_list;\n\tstruct list_head list_entry;\n\tDECLARE_BITMAP(tc_bitmap, ICE_MAX_TRAFFIC_CLASS);\n\tu32 agg_id;\n\tenum ice_agg_type agg_type;\n\t \n\tstruct ice_bw_type_info bw_t_info[ICE_MAX_TRAFFIC_CLASS];\n\t \n\tDECLARE_BITMAP(replay_tc_bitmap, ICE_MAX_TRAFFIC_CLASS);\n};\n\n \nint\nice_aq_query_sched_elems(struct ice_hw *hw, u16 elems_req,\n\t\t\t struct ice_aqc_txsched_elem_data *buf, u16 buf_size,\n\t\t\t u16 *elems_ret, struct ice_sq_cd *cd);\n\nint\nice_sched_set_node_bw_lmt(struct ice_port_info *pi, struct ice_sched_node *node,\n\t\t\t  enum ice_rl_type rl_type, u32 bw);\n\nint\nice_sched_set_node_bw(struct ice_port_info *pi, struct ice_sched_node *node,\n\t\t      enum ice_rl_type rl_type, u32 bw, u8 layer_num);\n\nint\nice_sched_add_elems(struct ice_port_info *pi, struct ice_sched_node *tc_node,\n\t\t    struct ice_sched_node *parent, u8 layer, u16 num_nodes,\n\t\t    u16 *num_nodes_added, u32 *first_node_teid,\n\t\t    struct ice_sched_node **prealloc_node);\n\nint\nice_sched_move_nodes(struct ice_port_info *pi, struct ice_sched_node *parent,\n\t\t     u16 num_items, u32 *list);\n\nint ice_sched_set_node_priority(struct ice_port_info *pi, struct ice_sched_node *node,\n\t\t\t\tu16 priority);\nint ice_sched_set_node_weight(struct ice_port_info *pi, struct ice_sched_node *node, u16 weight);\n\nint ice_sched_init_port(struct ice_port_info *pi);\nint ice_sched_query_res_alloc(struct ice_hw *hw);\nvoid ice_sched_get_psm_clk_freq(struct ice_hw *hw);\n\nvoid ice_sched_clear_port(struct ice_port_info *pi);\nvoid ice_sched_cleanup_all(struct ice_hw *hw);\nvoid ice_sched_clear_agg(struct ice_hw *hw);\n\nstruct ice_sched_node *\nice_sched_find_node_by_teid(struct ice_sched_node *start_node, u32 teid);\nint\nice_sched_add_node(struct ice_port_info *pi, u8 layer,\n\t\t   struct ice_aqc_txsched_elem_data *info,\n\t\t   struct ice_sched_node *prealloc_node);\nvoid\nice_sched_update_parent(struct ice_sched_node *new_parent,\n\t\t\tstruct ice_sched_node *node);\nvoid ice_free_sched_node(struct ice_port_info *pi, struct ice_sched_node *node);\nstruct ice_sched_node *ice_sched_get_tc_node(struct ice_port_info *pi, u8 tc);\nstruct ice_sched_node *\nice_sched_get_free_qparent(struct ice_port_info *pi, u16 vsi_handle, u8 tc,\n\t\t\t   u8 owner);\nint\nice_sched_cfg_vsi(struct ice_port_info *pi, u16 vsi_handle, u8 tc, u16 maxqs,\n\t\t  u8 owner, bool enable);\nint ice_rm_vsi_lan_cfg(struct ice_port_info *pi, u16 vsi_handle);\nint ice_rm_vsi_rdma_cfg(struct ice_port_info *pi, u16 vsi_handle);\n\n \nint\nice_cfg_agg(struct ice_port_info *pi, u32 agg_id,\n\t    enum ice_agg_type agg_type, u8 tc_bitmap);\nint\nice_move_vsi_to_agg(struct ice_port_info *pi, u32 agg_id, u16 vsi_handle,\n\t\t    u8 tc_bitmap);\nint\nice_cfg_q_bw_lmt(struct ice_port_info *pi, u16 vsi_handle, u8 tc,\n\t\t u16 q_handle, enum ice_rl_type rl_type, u32 bw);\nint\nice_cfg_q_bw_dflt_lmt(struct ice_port_info *pi, u16 vsi_handle, u8 tc,\n\t\t      u16 q_handle, enum ice_rl_type rl_type);\nint\nice_cfg_vsi_bw_lmt_per_tc(struct ice_port_info *pi, u16 vsi_handle, u8 tc,\n\t\t\t  enum ice_rl_type rl_type, u32 bw);\nint\nice_cfg_vsi_bw_dflt_lmt_per_tc(struct ice_port_info *pi, u16 vsi_handle, u8 tc,\n\t\t\t       enum ice_rl_type rl_type);\nint ice_cfg_rl_burst_size(struct ice_hw *hw, u32 bytes);\nint\nice_sched_suspend_resume_elems(struct ice_hw *hw, u8 num_nodes, u32 *node_teids,\n\t\t\t       bool suspend);\nstruct ice_sched_node *\nice_sched_get_agg_node(struct ice_port_info *pi, struct ice_sched_node *tc_node,\n\t\t       u32 agg_id);\nu8 ice_sched_get_agg_layer(struct ice_hw *hw);\nu8 ice_sched_get_vsi_layer(struct ice_hw *hw);\nstruct ice_sched_node *\nice_sched_get_free_vsi_parent(struct ice_hw *hw, struct ice_sched_node *node,\n\t\t\t      u16 *num_nodes);\nint\nice_sched_add_nodes_to_layer(struct ice_port_info *pi,\n\t\t\t     struct ice_sched_node *tc_node,\n\t\t\t     struct ice_sched_node *parent, u8 layer,\n\t\t\t     u16 num_nodes, u32 *first_node_teid,\n\t\t\t     u16 *num_nodes_added);\nvoid ice_sched_replay_agg_vsi_preinit(struct ice_hw *hw);\nvoid ice_sched_replay_agg(struct ice_hw *hw);\nint\nice_aq_move_sched_elems(struct ice_hw *hw, u16 grps_req,\n\t\t\tstruct ice_aqc_move_elem *buf, u16 buf_size,\n\t\t\tu16 *grps_movd, struct ice_sq_cd *cd);\nint ice_replay_vsi_agg(struct ice_hw *hw, u16 vsi_handle);\nint ice_sched_replay_q_bw(struct ice_port_info *pi, struct ice_q_ctx *q_ctx);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}