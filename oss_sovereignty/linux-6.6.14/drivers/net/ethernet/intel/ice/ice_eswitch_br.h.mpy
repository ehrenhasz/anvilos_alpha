{
  "module_name": "ice_eswitch_br.h",
  "hash_id": "6bbf6e40ad09f8715a89e0770f88dcce26b17d6de2abbe7a9d32435b5ebc58e2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_eswitch_br.h",
  "human_readable_source": " \n \n\n#ifndef _ICE_ESWITCH_BR_H_\n#define _ICE_ESWITCH_BR_H_\n\n#include <linux/rhashtable.h>\n#include <linux/workqueue.h>\n\nstruct ice_esw_br_fdb_data {\n\tunsigned char addr[ETH_ALEN];\n\tu16 vid;\n};\n\nstruct ice_esw_br_flow {\n\tstruct ice_rule_query_data *fwd_rule;\n\tstruct ice_rule_query_data *guard_rule;\n};\n\nenum {\n\tICE_ESWITCH_BR_FDB_ADDED_BY_USER = BIT(0),\n};\n\nstruct ice_esw_br_fdb_entry {\n\tstruct ice_esw_br_fdb_data data;\n\tstruct rhash_head ht_node;\n\tstruct list_head list;\n\n\tint flags;\n\n\tstruct net_device *dev;\n\tstruct ice_esw_br_port *br_port;\n\tstruct ice_esw_br_flow *flow;\n\n\tunsigned long last_use;\n};\n\nenum ice_esw_br_port_type {\n\tICE_ESWITCH_BR_UPLINK_PORT = 0,\n\tICE_ESWITCH_BR_VF_REPR_PORT = 1,\n};\n\nstruct ice_esw_br_port {\n\tstruct ice_esw_br *bridge;\n\tstruct ice_vsi *vsi;\n\tenum ice_esw_br_port_type type;\n\tu16 vsi_idx;\n\tu16 pvid;\n\tstruct xarray vlans;\n};\n\nenum {\n\tICE_ESWITCH_BR_VLAN_FILTERING = BIT(0),\n};\n\nstruct ice_esw_br {\n\tstruct ice_esw_br_offloads *br_offloads;\n\tstruct xarray ports;\n\n\tstruct rhashtable fdb_ht;\n\tstruct list_head fdb_list;\n\n\tint ifindex;\n\tu32 flags;\n\tunsigned long ageing_time;\n};\n\nstruct ice_esw_br_offloads {\n\tstruct ice_pf *pf;\n\tstruct ice_esw_br *bridge;\n\tstruct notifier_block netdev_nb;\n\tstruct notifier_block switchdev_blk;\n\tstruct notifier_block switchdev_nb;\n\n\tstruct workqueue_struct *wq;\n\tstruct delayed_work update_work;\n};\n\nstruct ice_esw_br_fdb_work {\n\tstruct work_struct work;\n\tstruct switchdev_notifier_fdb_info fdb_info;\n\tstruct net_device *dev;\n\tunsigned long event;\n};\n\nstruct ice_esw_br_vlan {\n\tu16 vid;\n\tu16 flags;\n};\n\n#define ice_nb_to_br_offloads(nb, nb_name) \\\n\tcontainer_of(nb, \\\n\t\t     struct ice_esw_br_offloads, \\\n\t\t     nb_name)\n\n#define ice_work_to_br_offloads(w) \\\n\tcontainer_of(w, \\\n\t\t     struct ice_esw_br_offloads, \\\n\t\t     update_work.work)\n\n#define ice_work_to_fdb_work(w) \\\n\tcontainer_of(w, \\\n\t\t     struct ice_esw_br_fdb_work, \\\n\t\t     work)\n\nstatic inline bool ice_eswitch_br_is_vid_valid(u16 vid)\n{\n\t \n\treturn vid > 1;\n}\n\nvoid\nice_eswitch_br_offloads_deinit(struct ice_pf *pf);\nint\nice_eswitch_br_offloads_init(struct ice_pf *pf);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}