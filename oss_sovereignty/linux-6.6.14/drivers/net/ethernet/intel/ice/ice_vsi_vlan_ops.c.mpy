{
  "module_name": "ice_vsi_vlan_ops.c",
  "hash_id": "49755a5ae897bd78a59b0fc6ef55dafc67fa59daef6a21d4d4b511a0bd0882d3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_vsi_vlan_ops.c",
  "human_readable_source": "\n \n\n#include \"ice_pf_vsi_vlan_ops.h\"\n#include \"ice_vf_vsi_vlan_ops.h\"\n#include \"ice_lib.h\"\n#include \"ice.h\"\n\nstatic int\nop_unsupported_vlan_arg(struct ice_vsi * __always_unused vsi,\n\t\t\tstruct ice_vlan * __always_unused vlan)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic int\nop_unsupported_tpid_arg(struct ice_vsi *__always_unused vsi,\n\t\t\tu16 __always_unused tpid)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic int op_unsupported(struct ice_vsi *__always_unused vsi)\n{\n\treturn -EOPNOTSUPP;\n}\n\n \nstatic struct ice_vsi_vlan_ops ops_unsupported = {\n\t.add_vlan = op_unsupported_vlan_arg,\n\t.del_vlan = op_unsupported_vlan_arg,\n\t.ena_stripping = op_unsupported_tpid_arg,\n\t.dis_stripping = op_unsupported,\n\t.ena_insertion = op_unsupported_tpid_arg,\n\t.dis_insertion = op_unsupported,\n\t.ena_rx_filtering = op_unsupported,\n\t.dis_rx_filtering = op_unsupported,\n\t.ena_tx_filtering = op_unsupported,\n\t.dis_tx_filtering = op_unsupported,\n\t.set_port_vlan = op_unsupported_vlan_arg,\n};\n\n \nstatic void ice_vsi_init_unsupported_vlan_ops(struct ice_vsi *vsi)\n{\n\tvsi->outer_vlan_ops = ops_unsupported;\n\tvsi->inner_vlan_ops = ops_unsupported;\n}\n\n \nvoid ice_vsi_init_vlan_ops(struct ice_vsi *vsi)\n{\n\t \n\tice_vsi_init_unsupported_vlan_ops(vsi);\n\n\tswitch (vsi->type) {\n\tcase ICE_VSI_PF:\n\tcase ICE_VSI_SWITCHDEV_CTRL:\n\t\tice_pf_vsi_init_vlan_ops(vsi);\n\t\tbreak;\n\tcase ICE_VSI_VF:\n\t\tice_vf_vsi_init_vlan_ops(vsi);\n\t\tbreak;\n\tdefault:\n\t\tdev_dbg(ice_pf_to_dev(vsi->back), \"%s does not support VLAN operations\\n\",\n\t\t\tice_vsi_type_str(vsi->type));\n\t\tbreak;\n\t}\n}\n\n \nstruct ice_vsi_vlan_ops *ice_get_compat_vsi_vlan_ops(struct ice_vsi *vsi)\n{\n\tif (ice_is_dvm_ena(&vsi->back->hw))\n\t\treturn &vsi->outer_vlan_ops;\n\telse\n\t\treturn &vsi->inner_vlan_ops;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}