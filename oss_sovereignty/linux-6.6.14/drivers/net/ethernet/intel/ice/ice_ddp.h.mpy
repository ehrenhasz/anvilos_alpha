{
  "module_name": "ice_ddp.h",
  "hash_id": "b61026e2cb04b5faaaabc3aab672d6d083dfd7d701553bcbdc3762d4cd77ddeb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/intel/ice/ice_ddp.h",
  "human_readable_source": " \n \n\n#ifndef _ICE_DDP_H_\n#define _ICE_DDP_H_\n\n#include \"ice_type.h\"\n\n \n#define ICE_PKG_SUPP_VER_MAJ 1\n#define ICE_PKG_SUPP_VER_MNR 3\n\n \n#define ICE_PKG_FMT_VER_MAJ 1\n#define ICE_PKG_FMT_VER_MNR 0\n#define ICE_PKG_FMT_VER_UPD 0\n#define ICE_PKG_FMT_VER_DFT 0\n\n#define ICE_PKG_CNT 4\n\n#define ICE_FV_OFFSET_INVAL 0x1FF\n\n \nstruct ice_fv_word {\n\tu8 prot_id;\n\tu16 off;  \n\tu8 resvrd;\n} __packed;\n\n#define ICE_MAX_NUM_PROFILES 256\n\n#define ICE_MAX_FV_WORDS 48\nstruct ice_fv {\n\tstruct ice_fv_word ew[ICE_MAX_FV_WORDS];\n};\n\nenum ice_ddp_state {\n\t \n\tICE_DDP_PKG_SUCCESS = 0,\n\n\t \n\tICE_DDP_PKG_ALREADY_LOADED = -1,\n\n\t \n\tICE_DDP_PKG_SAME_VERSION_ALREADY_LOADED = -2,\n\n\t \n\tICE_DDP_PKG_ALREADY_LOADED_NOT_SUPPORTED = -3,\n\n\t \n\tICE_DDP_PKG_COMPATIBLE_ALREADY_LOADED = -4,\n\n\t \n\tICE_DDP_PKG_FW_MISMATCH = -5,\n\n\t \n\tICE_DDP_PKG_INVALID_FILE = -6,\n\n\t \n\tICE_DDP_PKG_FILE_VERSION_TOO_HIGH = -7,\n\n\t \n\tICE_DDP_PKG_FILE_VERSION_TOO_LOW = -8,\n\n\t \n\tICE_DDP_PKG_FILE_SIGNATURE_INVALID = -9,\n\n\t \n\tICE_DDP_PKG_FILE_REVISION_TOO_LOW = -10,\n\n\t \n\tICE_DDP_PKG_LOAD_ERROR = -11,\n\n\t \n\tICE_DDP_PKG_ERR = -12\n};\n\n \nstruct ice_pkg_hdr {\n\tstruct ice_pkg_ver pkg_format_ver;\n\t__le32 seg_count;\n\t__le32 seg_offset[];\n};\n\n \nstruct ice_generic_seg_hdr {\n#define SEGMENT_TYPE_METADATA 0x00000001\n#define SEGMENT_TYPE_ICE 0x00000010\n\t__le32 seg_type;\n\tstruct ice_pkg_ver seg_format_ver;\n\t__le32 seg_size;\n\tchar seg_id[ICE_PKG_NAME_SIZE];\n};\n\n \n\nunion ice_device_id {\n\tstruct {\n\t\t__le16 device_id;\n\t\t__le16 vendor_id;\n\t} dev_vend_id;\n\t__le32 id;\n};\n\nstruct ice_device_id_entry {\n\tunion ice_device_id device;\n\tunion ice_device_id sub_device;\n};\n\nstruct ice_seg {\n\tstruct ice_generic_seg_hdr hdr;\n\t__le32 device_table_count;\n\tstruct ice_device_id_entry device_table[];\n};\n\nstruct ice_nvm_table {\n\t__le32 table_count;\n\t__le32 vers[];\n};\n\nstruct ice_buf {\n#define ICE_PKG_BUF_SIZE 4096\n\tu8 buf[ICE_PKG_BUF_SIZE];\n};\n\nstruct ice_buf_table {\n\t__le32 buf_count;\n\tstruct ice_buf buf_array[];\n};\n\nstruct ice_run_time_cfg_seg {\n\tstruct ice_generic_seg_hdr hdr;\n\tu8 rsvd[8];\n\tstruct ice_buf_table buf_table;\n};\n\n \nstruct ice_global_metadata_seg {\n\tstruct ice_generic_seg_hdr hdr;\n\tstruct ice_pkg_ver pkg_ver;\n\t__le32 rsvd;\n\tchar pkg_name[ICE_PKG_NAME_SIZE];\n};\n\n#define ICE_MIN_S_OFF 12\n#define ICE_MAX_S_OFF 4095\n#define ICE_MIN_S_SZ 1\n#define ICE_MAX_S_SZ 4084\n\n \nstruct ice_section_entry {\n\t__le32 type;\n\t__le16 offset;\n\t__le16 size;\n};\n\n#define ICE_MIN_S_COUNT 1\n#define ICE_MAX_S_COUNT 511\n#define ICE_MIN_S_DATA_END 12\n#define ICE_MAX_S_DATA_END 4096\n\n#define ICE_METADATA_BUF 0x80000000\n\nstruct ice_buf_hdr {\n\t__le16 section_count;\n\t__le16 data_end;\n\tstruct ice_section_entry section_entry[];\n};\n\n#define ICE_MAX_ENTRIES_IN_BUF(hd_sz, ent_sz)                                 \\\n\t((ICE_PKG_BUF_SIZE -                                                  \\\n\t  struct_size_t(struct ice_buf_hdr,  section_entry, 1) - (hd_sz)) / \\\n\t (ent_sz))\n\n \n#define ICE_SID_METADATA 1\n#define ICE_SID_XLT0_SW 10\n#define ICE_SID_XLT_KEY_BUILDER_SW 11\n#define ICE_SID_XLT1_SW 12\n#define ICE_SID_XLT2_SW 13\n#define ICE_SID_PROFID_TCAM_SW 14\n#define ICE_SID_PROFID_REDIR_SW 15\n#define ICE_SID_FLD_VEC_SW 16\n#define ICE_SID_CDID_KEY_BUILDER_SW 17\n\nstruct ice_meta_sect {\n\tstruct ice_pkg_ver ver;\n#define ICE_META_SECT_NAME_SIZE 28\n\tchar name[ICE_META_SECT_NAME_SIZE];\n\t__le32 track_id;\n};\n\n#define ICE_SID_CDID_REDIR_SW 18\n\n#define ICE_SID_XLT0_ACL 20\n#define ICE_SID_XLT_KEY_BUILDER_ACL 21\n#define ICE_SID_XLT1_ACL 22\n#define ICE_SID_XLT2_ACL 23\n#define ICE_SID_PROFID_TCAM_ACL 24\n#define ICE_SID_PROFID_REDIR_ACL 25\n#define ICE_SID_FLD_VEC_ACL 26\n#define ICE_SID_CDID_KEY_BUILDER_ACL 27\n#define ICE_SID_CDID_REDIR_ACL 28\n\n#define ICE_SID_XLT0_FD 30\n#define ICE_SID_XLT_KEY_BUILDER_FD 31\n#define ICE_SID_XLT1_FD 32\n#define ICE_SID_XLT2_FD 33\n#define ICE_SID_PROFID_TCAM_FD 34\n#define ICE_SID_PROFID_REDIR_FD 35\n#define ICE_SID_FLD_VEC_FD 36\n#define ICE_SID_CDID_KEY_BUILDER_FD 37\n#define ICE_SID_CDID_REDIR_FD 38\n\n#define ICE_SID_XLT0_RSS 40\n#define ICE_SID_XLT_KEY_BUILDER_RSS 41\n#define ICE_SID_XLT1_RSS 42\n#define ICE_SID_XLT2_RSS 43\n#define ICE_SID_PROFID_TCAM_RSS 44\n#define ICE_SID_PROFID_REDIR_RSS 45\n#define ICE_SID_FLD_VEC_RSS 46\n#define ICE_SID_CDID_KEY_BUILDER_RSS 47\n#define ICE_SID_CDID_REDIR_RSS 48\n\n#define ICE_SID_RXPARSER_MARKER_PTYPE 55\n#define ICE_SID_RXPARSER_BOOST_TCAM 56\n#define ICE_SID_RXPARSER_METADATA_INIT 58\n#define ICE_SID_TXPARSER_BOOST_TCAM 66\n\n#define ICE_SID_XLT0_PE 80\n#define ICE_SID_XLT_KEY_BUILDER_PE 81\n#define ICE_SID_XLT1_PE 82\n#define ICE_SID_XLT2_PE 83\n#define ICE_SID_PROFID_TCAM_PE 84\n#define ICE_SID_PROFID_REDIR_PE 85\n#define ICE_SID_FLD_VEC_PE 86\n#define ICE_SID_CDID_KEY_BUILDER_PE 87\n#define ICE_SID_CDID_REDIR_PE 88\n\n \n#define ICE_SID_LBL_FIRST 0x80000010\n#define ICE_SID_LBL_RXPARSER_TMEM 0x80000018\n \n#define ICE_SID_LBL_LAST 0x80000038\n\n \n#define ICE_SID_TX_5_LAYER_TOPO 0x10\n\nenum ice_block {\n\tICE_BLK_SW = 0,\n\tICE_BLK_ACL,\n\tICE_BLK_FD,\n\tICE_BLK_RSS,\n\tICE_BLK_PE,\n\tICE_BLK_COUNT\n};\n\nenum ice_sect {\n\tICE_XLT0 = 0,\n\tICE_XLT_KB,\n\tICE_XLT1,\n\tICE_XLT2,\n\tICE_PROF_TCAM,\n\tICE_PROF_REDIR,\n\tICE_VEC_TBL,\n\tICE_CDID_KB,\n\tICE_CDID_REDIR,\n\tICE_SECT_COUNT\n};\n\n \nstruct ice_label {\n\t__le16 value;\n#define ICE_PKG_LABEL_SIZE 64\n\tchar name[ICE_PKG_LABEL_SIZE];\n};\n\nstruct ice_label_section {\n\t__le16 count;\n\tstruct ice_label label[];\n};\n\n#define ICE_MAX_LABELS_IN_BUF                                             \\\n\tICE_MAX_ENTRIES_IN_BUF(struct_size_t(struct ice_label_section,  \\\n\t\t\t\t\t   label, 1) -                    \\\n\t\t\t\t       sizeof(struct ice_label),          \\\n\t\t\t       sizeof(struct ice_label))\n\nstruct ice_sw_fv_section {\n\t__le16 count;\n\t__le16 base_offset;\n\tstruct ice_fv fv[];\n};\n\nstruct ice_sw_fv_list_entry {\n\tstruct list_head list_entry;\n\tu32 profile_id;\n\tstruct ice_fv *fv_ptr;\n};\n\n \nstruct ice_boost_key_value {\n#define ICE_BOOST_REMAINING_HV_KEY 15\n\tu8 remaining_hv_key[ICE_BOOST_REMAINING_HV_KEY];\n\t__le16 hv_dst_port_key;\n\t__le16 hv_src_port_key;\n\tu8 tcam_search_key;\n} __packed;\n\nstruct ice_boost_key {\n\tstruct ice_boost_key_value key;\n\tstruct ice_boost_key_value key2;\n};\n\n \nstruct ice_boost_tcam_entry {\n\t__le16 addr;\n\t__le16 reserved;\n\t \n\tstruct ice_boost_key key;\n\tu8 boost_hit_index_group;\n\t \n#define ICE_BOOST_BIT_FIELDS 43\n\tu8 bit_fields[ICE_BOOST_BIT_FIELDS];\n};\n\nstruct ice_boost_tcam_section {\n\t__le16 count;\n\t__le16 reserved;\n\tstruct ice_boost_tcam_entry tcam[];\n};\n\n#define ICE_MAX_BST_TCAMS_IN_BUF                                               \\\n\tICE_MAX_ENTRIES_IN_BUF(struct_size_t(struct ice_boost_tcam_section,  \\\n\t\t\t\t\t   tcam, 1) -                          \\\n\t\t\t\t       sizeof(struct ice_boost_tcam_entry),    \\\n\t\t\t       sizeof(struct ice_boost_tcam_entry))\n\n \nstruct ice_marker_ptype_tcam_entry {\n#define ICE_MARKER_PTYPE_TCAM_ADDR_MAX 1024\n\t__le16 addr;\n\t__le16 ptype;\n\tu8 keys[20];\n};\n\nstruct ice_marker_ptype_tcam_section {\n\t__le16 count;\n\t__le16 reserved;\n\tstruct ice_marker_ptype_tcam_entry tcam[];\n};\n\n#define ICE_MAX_MARKER_PTYPE_TCAMS_IN_BUF                                    \\\n\tICE_MAX_ENTRIES_IN_BUF(struct_size_t(struct ice_marker_ptype_tcam_section,  tcam, \\\n\t\t\t    1) -                                             \\\n\t\t\tsizeof(struct ice_marker_ptype_tcam_entry),          \\\n\t\tsizeof(struct ice_marker_ptype_tcam_entry))\n\nstruct ice_xlt1_section {\n\t__le16 count;\n\t__le16 offset;\n\tu8 value[];\n};\n\nstruct ice_xlt2_section {\n\t__le16 count;\n\t__le16 offset;\n\t__le16 value[];\n};\n\nstruct ice_prof_redir_section {\n\t__le16 count;\n\t__le16 offset;\n\tu8 redir_value[];\n};\n\n \n\nstruct ice_buf_build {\n\tstruct ice_buf buf;\n\tu16 reserved_section_table_entries;\n};\n\nstruct ice_pkg_enum {\n\tstruct ice_buf_table *buf_table;\n\tu32 buf_idx;\n\n\tu32 type;\n\tstruct ice_buf_hdr *buf;\n\tu32 sect_idx;\n\tvoid *sect;\n\tu32 sect_type;\n\n\tu32 entry_idx;\n\tvoid *(*handler)(u32 sect_type, void *section, u32 index, u32 *offset);\n};\n\nint ice_aq_upload_section(struct ice_hw *hw, struct ice_buf_hdr *pkg_buf,\n\t\t\t  u16 buf_size, struct ice_sq_cd *cd);\n\nvoid *ice_pkg_buf_alloc_section(struct ice_buf_build *bld, u32 type, u16 size);\n\nstruct ice_buf_build *ice_pkg_buf_alloc(struct ice_hw *hw);\n\nint ice_update_pkg_no_lock(struct ice_hw *hw, struct ice_buf *bufs, u32 count);\nint ice_update_pkg(struct ice_hw *hw, struct ice_buf *bufs, u32 count);\n\nint ice_pkg_buf_reserve_section(struct ice_buf_build *bld, u16 count);\nu16 ice_pkg_buf_get_active_sections(struct ice_buf_build *bld);\nvoid *ice_pkg_enum_section(struct ice_seg *ice_seg, struct ice_pkg_enum *state,\n\t\t\t   u32 sect_type);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}