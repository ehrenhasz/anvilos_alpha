{
  "module_name": "cq_enet_desc.h",
  "hash_id": "5c4c2b372644f226565a6a3b45903298f2dde995570951f2443e3ed1d6e1a9c7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cisco/enic/cq_enet_desc.h",
  "human_readable_source": " \n \n\n#ifndef _CQ_ENET_DESC_H_\n#define _CQ_ENET_DESC_H_\n\n#include \"cq_desc.h\"\n\n \nstruct cq_enet_wq_desc {\n\t__le16 completed_index;\n\t__le16 q_number;\n\tu8 reserved[11];\n\tu8 type_color;\n};\n\nstatic inline void cq_enet_wq_desc_dec(struct cq_enet_wq_desc *desc,\n\tu8 *type, u8 *color, u16 *q_number, u16 *completed_index)\n{\n\tcq_desc_dec((struct cq_desc *)desc, type,\n\t\tcolor, q_number, completed_index);\n}\n\n \nstruct cq_enet_rq_desc {\n\t__le16 completed_index_flags;\n\t__le16 q_number_rss_type_flags;\n\t__le32 rss_hash;\n\t__le16 bytes_written_flags;\n\t__le16 vlan;\n\t__le16 checksum_fcoe;\n\tu8 flags;\n\tu8 type_color;\n};\n\n#define CQ_ENET_RQ_DESC_FLAGS_INGRESS_PORT          (0x1 << 12)\n#define CQ_ENET_RQ_DESC_FLAGS_FCOE                  (0x1 << 13)\n#define CQ_ENET_RQ_DESC_FLAGS_EOP                   (0x1 << 14)\n#define CQ_ENET_RQ_DESC_FLAGS_SOP                   (0x1 << 15)\n\n#define CQ_ENET_RQ_DESC_RSS_TYPE_BITS               4\n#define CQ_ENET_RQ_DESC_RSS_TYPE_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_RSS_TYPE_BITS) - 1)\n#define CQ_ENET_RQ_DESC_RSS_TYPE_NONE               0\n#define CQ_ENET_RQ_DESC_RSS_TYPE_IPv4               1\n#define CQ_ENET_RQ_DESC_RSS_TYPE_TCP_IPv4           2\n#define CQ_ENET_RQ_DESC_RSS_TYPE_IPv6               3\n#define CQ_ENET_RQ_DESC_RSS_TYPE_TCP_IPv6           4\n#define CQ_ENET_RQ_DESC_RSS_TYPE_IPv6_EX            5\n#define CQ_ENET_RQ_DESC_RSS_TYPE_TCP_IPv6_EX        6\n\n#define CQ_ENET_RQ_DESC_FLAGS_CSUM_NOT_CALC         (0x1 << 14)\n\n#define CQ_ENET_RQ_DESC_BYTES_WRITTEN_BITS          14\n#define CQ_ENET_RQ_DESC_BYTES_WRITTEN_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_BYTES_WRITTEN_BITS) - 1)\n#define CQ_ENET_RQ_DESC_FLAGS_TRUNCATED             (0x1 << 14)\n#define CQ_ENET_RQ_DESC_FLAGS_VLAN_STRIPPED         (0x1 << 15)\n\n#define CQ_ENET_RQ_DESC_VLAN_TCI_VLAN_BITS          12\n#define CQ_ENET_RQ_DESC_VLAN_TCI_VLAN_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_VLAN_TCI_VLAN_BITS) - 1)\n#define CQ_ENET_RQ_DESC_VLAN_TCI_CFI_MASK           (0x1 << 12)\n#define CQ_ENET_RQ_DESC_VLAN_TCI_USER_PRIO_BITS     3\n#define CQ_ENET_RQ_DESC_VLAN_TCI_USER_PRIO_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_VLAN_TCI_USER_PRIO_BITS) - 1)\n#define CQ_ENET_RQ_DESC_VLAN_TCI_USER_PRIO_SHIFT    13\n\n#define CQ_ENET_RQ_DESC_FCOE_SOF_BITS               8\n#define CQ_ENET_RQ_DESC_FCOE_SOF_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_FCOE_SOF_BITS) - 1)\n#define CQ_ENET_RQ_DESC_FCOE_EOF_BITS               8\n#define CQ_ENET_RQ_DESC_FCOE_EOF_MASK \\\n\t((1 << CQ_ENET_RQ_DESC_FCOE_EOF_BITS) - 1)\n#define CQ_ENET_RQ_DESC_FCOE_EOF_SHIFT              8\n\n#define CQ_ENET_RQ_DESC_FLAGS_TCP_UDP_CSUM_OK       (0x1 << 0)\n#define CQ_ENET_RQ_DESC_FCOE_FC_CRC_OK              (0x1 << 0)\n#define CQ_ENET_RQ_DESC_FLAGS_UDP                   (0x1 << 1)\n#define CQ_ENET_RQ_DESC_FCOE_ENC_ERROR              (0x1 << 1)\n#define CQ_ENET_RQ_DESC_FLAGS_TCP                   (0x1 << 2)\n#define CQ_ENET_RQ_DESC_FLAGS_IPV4_CSUM_OK          (0x1 << 3)\n#define CQ_ENET_RQ_DESC_FLAGS_IPV6                  (0x1 << 4)\n#define CQ_ENET_RQ_DESC_FLAGS_IPV4                  (0x1 << 5)\n#define CQ_ENET_RQ_DESC_FLAGS_IPV4_FRAGMENT         (0x1 << 6)\n#define CQ_ENET_RQ_DESC_FLAGS_FCS_OK                (0x1 << 7)\n\nstatic inline void cq_enet_rq_desc_dec(struct cq_enet_rq_desc *desc,\n\tu8 *type, u8 *color, u16 *q_number, u16 *completed_index,\n\tu8 *ingress_port, u8 *fcoe, u8 *eop, u8 *sop, u8 *rss_type,\n\tu8 *csum_not_calc, u32 *rss_hash, u16 *bytes_written, u8 *packet_error,\n\tu8 *vlan_stripped, u16 *vlan_tci, u16 *checksum, u8 *fcoe_sof,\n\tu8 *fcoe_fc_crc_ok, u8 *fcoe_enc_error, u8 *fcoe_eof,\n\tu8 *tcp_udp_csum_ok, u8 *udp, u8 *tcp, u8 *ipv4_csum_ok,\n\tu8 *ipv6, u8 *ipv4, u8 *ipv4_fragment, u8 *fcs_ok)\n{\n\tu16 completed_index_flags;\n\tu16 q_number_rss_type_flags;\n\tu16 bytes_written_flags;\n\n\tcq_desc_dec((struct cq_desc *)desc, type,\n\t\tcolor, q_number, completed_index);\n\n\tcompleted_index_flags = le16_to_cpu(desc->completed_index_flags);\n\tq_number_rss_type_flags =\n\t\tle16_to_cpu(desc->q_number_rss_type_flags);\n\tbytes_written_flags = le16_to_cpu(desc->bytes_written_flags);\n\n\t*ingress_port = (completed_index_flags &\n\t\tCQ_ENET_RQ_DESC_FLAGS_INGRESS_PORT) ? 1 : 0;\n\t*fcoe = (completed_index_flags & CQ_ENET_RQ_DESC_FLAGS_FCOE) ?\n\t\t1 : 0;\n\t*eop = (completed_index_flags & CQ_ENET_RQ_DESC_FLAGS_EOP) ?\n\t\t1 : 0;\n\t*sop = (completed_index_flags & CQ_ENET_RQ_DESC_FLAGS_SOP) ?\n\t\t1 : 0;\n\n\t*rss_type = (u8)((q_number_rss_type_flags >> CQ_DESC_Q_NUM_BITS) &\n\t\tCQ_ENET_RQ_DESC_RSS_TYPE_MASK);\n\t*csum_not_calc = (q_number_rss_type_flags &\n\t\tCQ_ENET_RQ_DESC_FLAGS_CSUM_NOT_CALC) ? 1 : 0;\n\n\t*rss_hash = le32_to_cpu(desc->rss_hash);\n\n\t*bytes_written = bytes_written_flags &\n\t\tCQ_ENET_RQ_DESC_BYTES_WRITTEN_MASK;\n\t*packet_error = (bytes_written_flags &\n\t\tCQ_ENET_RQ_DESC_FLAGS_TRUNCATED) ? 1 : 0;\n\t*vlan_stripped = (bytes_written_flags &\n\t\tCQ_ENET_RQ_DESC_FLAGS_VLAN_STRIPPED) ? 1 : 0;\n\n\t \n\t*vlan_tci = le16_to_cpu(desc->vlan);\n\n\tif (*fcoe) {\n\t\t*fcoe_sof = (u8)(le16_to_cpu(desc->checksum_fcoe) &\n\t\t\tCQ_ENET_RQ_DESC_FCOE_SOF_MASK);\n\t\t*fcoe_fc_crc_ok = (desc->flags &\n\t\t\tCQ_ENET_RQ_DESC_FCOE_FC_CRC_OK) ? 1 : 0;\n\t\t*fcoe_enc_error = (desc->flags &\n\t\t\tCQ_ENET_RQ_DESC_FCOE_ENC_ERROR) ? 1 : 0;\n\t\t*fcoe_eof = (u8)((le16_to_cpu(desc->checksum_fcoe) >>\n\t\t\tCQ_ENET_RQ_DESC_FCOE_EOF_SHIFT) &\n\t\t\tCQ_ENET_RQ_DESC_FCOE_EOF_MASK);\n\t\t*checksum = 0;\n\t} else {\n\t\t*fcoe_sof = 0;\n\t\t*fcoe_fc_crc_ok = 0;\n\t\t*fcoe_enc_error = 0;\n\t\t*fcoe_eof = 0;\n\t\t*checksum = le16_to_cpu(desc->checksum_fcoe);\n\t}\n\n\t*tcp_udp_csum_ok =\n\t\t(desc->flags & CQ_ENET_RQ_DESC_FLAGS_TCP_UDP_CSUM_OK) ? 1 : 0;\n\t*udp = (desc->flags & CQ_ENET_RQ_DESC_FLAGS_UDP) ? 1 : 0;\n\t*tcp = (desc->flags & CQ_ENET_RQ_DESC_FLAGS_TCP) ? 1 : 0;\n\t*ipv4_csum_ok =\n\t\t(desc->flags & CQ_ENET_RQ_DESC_FLAGS_IPV4_CSUM_OK) ? 1 : 0;\n\t*ipv6 = (desc->flags & CQ_ENET_RQ_DESC_FLAGS_IPV6) ? 1 : 0;\n\t*ipv4 = (desc->flags & CQ_ENET_RQ_DESC_FLAGS_IPV4) ? 1 : 0;\n\t*ipv4_fragment =\n\t\t(desc->flags & CQ_ENET_RQ_DESC_FLAGS_IPV4_FRAGMENT) ? 1 : 0;\n\t*fcs_ok = (desc->flags & CQ_ENET_RQ_DESC_FLAGS_FCS_OK) ? 1 : 0;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}