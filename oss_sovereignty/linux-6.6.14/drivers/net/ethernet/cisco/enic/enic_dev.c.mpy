{
  "module_name": "enic_dev.c",
  "hash_id": "00b9613d62aa7eee98e226a00b18180e40963b6bc186517c5fcbc8552aa9826c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cisco/enic/enic_dev.c",
  "human_readable_source": "\n\n\n#include <linux/pci.h>\n#include <linux/etherdevice.h>\n\n#include \"vnic_dev.h\"\n#include \"vnic_vic.h\"\n#include \"enic_res.h\"\n#include \"enic.h\"\n#include \"enic_dev.h\"\n\nint enic_dev_fw_info(struct enic *enic, struct vnic_devcmd_fw_info **fw_info)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_fw_info(enic->vdev, fw_info);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_stats_dump(struct enic *enic, struct vnic_stats **vstats)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_stats_dump(enic->vdev, vstats);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_add_station_addr(struct enic *enic)\n{\n\tint err;\n\n\tif (!is_valid_ether_addr(enic->netdev->dev_addr))\n\t\treturn -EADDRNOTAVAIL;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_add_addr(enic->vdev, enic->netdev->dev_addr);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_del_station_addr(struct enic *enic)\n{\n\tint err;\n\n\tif (!is_valid_ether_addr(enic->netdev->dev_addr))\n\t\treturn -EADDRNOTAVAIL;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_del_addr(enic->vdev, enic->netdev->dev_addr);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_packet_filter(struct enic *enic, int directed, int multicast,\n\tint broadcast, int promisc, int allmulti)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_packet_filter(enic->vdev, directed,\n\t\tmulticast, broadcast, promisc, allmulti);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_add_addr(struct enic *enic, const u8 *addr)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_add_addr(enic->vdev, addr);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_del_addr(struct enic *enic, const u8 *addr)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_del_addr(enic->vdev, addr);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_notify_unset(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_notify_unset(enic->vdev);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_hang_notify(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_hang_notify(enic->vdev);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_set_ig_vlan_rewrite_mode(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_set_ig_vlan_rewrite_mode(enic->vdev,\n\t\tIG_VLAN_REWRITE_MODE_PRIORITY_TAG_DEFAULT_VLAN);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_enable(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_enable_wait(enic->vdev);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_disable(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_disable(enic->vdev);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_intr_coal_timer_info(struct enic *enic)\n{\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = vnic_dev_intr_coal_timer_info(enic->vdev);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\n \nint enic_vlan_rx_add_vid(struct net_device *netdev, __be16 proto, u16 vid)\n{\n\tstruct enic *enic = netdev_priv(netdev);\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = enic_add_vlan(enic, vid);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\n \nint enic_vlan_rx_kill_vid(struct net_device *netdev, __be16 proto, u16 vid)\n{\n\tstruct enic *enic = netdev_priv(netdev);\n\tint err;\n\n\tspin_lock_bh(&enic->devcmd_lock);\n\terr = enic_del_vlan(enic, vid);\n\tspin_unlock_bh(&enic->devcmd_lock);\n\n\treturn err;\n}\n\nint enic_dev_status_to_errno(int devcmd_status)\n{\n\tswitch (devcmd_status) {\n\tcase ERR_SUCCESS:\n\t\treturn 0;\n\tcase ERR_EINVAL:\n\t\treturn -EINVAL;\n\tcase ERR_EFAULT:\n\t\treturn -EFAULT;\n\tcase ERR_EPERM:\n\t\treturn -EPERM;\n\tcase ERR_EBUSY:\n\t\treturn -EBUSY;\n\tcase ERR_ECMDUNKNOWN:\n\tcase ERR_ENOTSUPPORTED:\n\t\treturn -EOPNOTSUPP;\n\tcase ERR_EBADSTATE:\n\t\treturn -EINVAL;\n\tcase ERR_ENOMEM:\n\t\treturn -ENOMEM;\n\tcase ERR_ETIMEDOUT:\n\t\treturn -ETIMEDOUT;\n\tcase ERR_ELINKDOWN:\n\t\treturn -ENETDOWN;\n\tcase ERR_EINPROGRESS:\n\t\treturn -EINPROGRESS;\n\tcase ERR_EMAXRES:\n\tdefault:\n\t\treturn (devcmd_status < 0) ? devcmd_status : -1;\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}