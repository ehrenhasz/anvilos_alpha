{
  "module_name": "vnic_intr.h",
  "hash_id": "eb30654a21230c5faf1aa80925f90e74b907fa2a72e61488d73b8430a8197d41",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cisco/enic/vnic_intr.h",
  "human_readable_source": " \n \n\n#ifndef _VNIC_INTR_H_\n#define _VNIC_INTR_H_\n\n#include <linux/pci.h>\n\n#include \"vnic_dev.h\"\n\n#define VNIC_INTR_TIMER_TYPE_ABS\t0\n#define VNIC_INTR_TIMER_TYPE_QUIET\t1\n\n \nstruct vnic_intr_ctrl {\n\tu32 coalescing_timer;\t\t \n\tu32 pad0;\n\tu32 coalescing_value;\t\t \n\tu32 pad1;\n\tu32 coalescing_type;\t\t \n\tu32 pad2;\n\tu32 mask_on_assertion;\t\t \n\tu32 pad3;\n\tu32 mask;\t\t\t \n\tu32 pad4;\n\tu32 int_credits;\t\t \n\tu32 pad5;\n\tu32 int_credit_return;\t\t \n\tu32 pad6;\n};\n\nstruct vnic_intr {\n\tunsigned int index;\n\tstruct vnic_dev *vdev;\n\tstruct vnic_intr_ctrl __iomem *ctrl;\t\t \n};\n\nstatic inline void vnic_intr_unmask(struct vnic_intr *intr)\n{\n\tiowrite32(0, &intr->ctrl->mask);\n}\n\nstatic inline void vnic_intr_mask(struct vnic_intr *intr)\n{\n\tiowrite32(1, &intr->ctrl->mask);\n}\n\nstatic inline int vnic_intr_masked(struct vnic_intr *intr)\n{\n\treturn ioread32(&intr->ctrl->mask);\n}\n\nstatic inline void vnic_intr_return_credits(struct vnic_intr *intr,\n\tunsigned int credits, int unmask, int reset_timer)\n{\n#define VNIC_INTR_UNMASK_SHIFT\t\t16\n#define VNIC_INTR_RESET_TIMER_SHIFT\t17\n\n\tu32 int_credit_return = (credits & 0xffff) |\n\t\t(unmask ? (1 << VNIC_INTR_UNMASK_SHIFT) : 0) |\n\t\t(reset_timer ? (1 << VNIC_INTR_RESET_TIMER_SHIFT) : 0);\n\n\tiowrite32(int_credit_return, &intr->ctrl->int_credit_return);\n}\n\nstatic inline unsigned int vnic_intr_credits(struct vnic_intr *intr)\n{\n\treturn ioread32(&intr->ctrl->int_credits);\n}\n\nstatic inline void vnic_intr_return_all_credits(struct vnic_intr *intr)\n{\n\tunsigned int credits = vnic_intr_credits(intr);\n\tint unmask = 1;\n\tint reset_timer = 1;\n\n\tvnic_intr_return_credits(intr, credits, unmask, reset_timer);\n}\n\nstatic inline u32 vnic_intr_legacy_pba(u32 __iomem *legacy_pba)\n{\n\t \n\treturn ioread32(legacy_pba);\n}\n\nvoid vnic_intr_free(struct vnic_intr *intr);\nint vnic_intr_alloc(struct vnic_dev *vdev, struct vnic_intr *intr,\n\tunsigned int index);\nvoid vnic_intr_init(struct vnic_intr *intr, u32 coalescing_timer,\n\tunsigned int coalescing_type, unsigned int mask_on_assertion);\nvoid vnic_intr_coalescing_timer_set(struct vnic_intr *intr,\n\tu32 coalescing_timer);\nvoid vnic_intr_clean(struct vnic_intr *intr);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}