{
  "module_name": "vnic_devcmd.h",
  "hash_id": "0a1c4ec02c94937d76d3a92df6eb0bc98510b92c50c0fbfa3a1534e14daa9e28",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cisco/enic/vnic_devcmd.h",
  "human_readable_source": " \n \n\n#ifndef _VNIC_DEVCMD_H_\n#define _VNIC_DEVCMD_H_\n\n#define _CMD_NBITS      14\n#define _CMD_VTYPEBITS\t10\n#define _CMD_FLAGSBITS  6\n#define _CMD_DIRBITS\t2\n\n#define _CMD_NMASK      ((1 << _CMD_NBITS)-1)\n#define _CMD_VTYPEMASK  ((1 << _CMD_VTYPEBITS)-1)\n#define _CMD_FLAGSMASK  ((1 << _CMD_FLAGSBITS)-1)\n#define _CMD_DIRMASK    ((1 << _CMD_DIRBITS)-1)\n\n#define _CMD_NSHIFT     0\n#define _CMD_VTYPESHIFT (_CMD_NSHIFT+_CMD_NBITS)\n#define _CMD_FLAGSSHIFT (_CMD_VTYPESHIFT+_CMD_VTYPEBITS)\n#define _CMD_DIRSHIFT   (_CMD_FLAGSSHIFT+_CMD_FLAGSBITS)\n\n \n#define _CMD_DIR_NONE   0U\n#define _CMD_DIR_WRITE  1U\n#define _CMD_DIR_READ   2U\n#define _CMD_DIR_RW     (_CMD_DIR_WRITE | _CMD_DIR_READ)\n\n \n#define _CMD_FLAGS_NONE 0U\n#define _CMD_FLAGS_NOWAIT 1U\n\n \n#define _CMD_VTYPE_NONE  0U\n#define _CMD_VTYPE_ENET  1U\n#define _CMD_VTYPE_FC    2U\n#define _CMD_VTYPE_SCSI  4U\n#define _CMD_VTYPE_ALL   (_CMD_VTYPE_ENET | _CMD_VTYPE_FC | _CMD_VTYPE_SCSI)\n\n \n#define _CMDCF(dir, flags, vtype, nr)  \\\n\t(((dir)   << _CMD_DIRSHIFT) | \\\n\t((flags) << _CMD_FLAGSSHIFT) | \\\n\t((vtype) << _CMD_VTYPESHIFT) | \\\n\t((nr)    << _CMD_NSHIFT))\n#define _CMDC(dir, vtype, nr)    _CMDCF(dir, 0, vtype, nr)\n#define _CMDCNW(dir, vtype, nr)  _CMDCF(dir, _CMD_FLAGS_NOWAIT, vtype, nr)\n\n \n#define _CMD_DIR(cmd)            (((cmd) >> _CMD_DIRSHIFT) & _CMD_DIRMASK)\n#define _CMD_FLAGS(cmd)          (((cmd) >> _CMD_FLAGSSHIFT) & _CMD_FLAGSMASK)\n#define _CMD_VTYPE(cmd)          (((cmd) >> _CMD_VTYPESHIFT) & _CMD_VTYPEMASK)\n#define _CMD_N(cmd)              (((cmd) >> _CMD_NSHIFT) & _CMD_NMASK)\n\nenum vnic_devcmd_cmd {\n\tCMD_NONE                = _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_NONE, 0),\n\n\t \n\tCMD_MCPU_FW_INFO_OLD    = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 1),\n\n\t \n\tCMD_MCPU_FW_INFO        = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 1),\n\n\t \n\tCMD_DEV_SPEC            = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 2),\n\n\t \n\tCMD_STATS_CLEAR         = _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 3),\n\n\t \n\tCMD_STATS_DUMP          = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 4),\n\n\t \n\tCMD_PACKET_FILTER\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 7),\n\n\t \n\tCMD_PACKET_FILTER_ALL   = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 7),\n\n\t \n\tCMD_HANG_NOTIFY         = _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 8),\n\n\t \n\tCMD_GET_MAC_ADDR        = _CMDC(_CMD_DIR_READ,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 9),\n\n\t \n\tCMD_ADDR_ADD            = _CMDCNW(_CMD_DIR_WRITE,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 12),\n\n\t \n\tCMD_ADDR_DEL            = _CMDCNW(_CMD_DIR_WRITE,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 13),\n\n\t \n\tCMD_VLAN_ADD            = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 14),\n\n\t \n\tCMD_VLAN_DEL            = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 15),\n\n\t \n\tCMD_NIC_CFG             = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 16),\n\t \n\tCMD_NIC_CFG_CHK\t\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 16),\n\n\t \n\tCMD_RSS_KEY             = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 17),\n\n\t \n\tCMD_RSS_CPU             = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 18),\n\n\t \n\tCMD_SOFT_RESET          = _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 19),\n\n\t \n\tCMD_SOFT_RESET_STATUS   = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 20),\n\n\t \n\tCMD_NOTIFY              = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 21),\n\n\t \n\tCMD_UNDI                = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 22),\n\n\t \n\tCMD_OPEN\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 23),\n\n\t \n\tCMD_OPEN_STATUS\t\t= _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 24),\n\n\t \n\tCMD_CLOSE\t\t= _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 25),\n\n\t \n \n\tCMD_INIT_v1\t\t= _CMDCNW(_CMD_DIR_READ, _CMD_VTYPE_ALL, 26),\n\n\t \n\tCMD_INIT_PROV_INFO\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 27),\n\n\t \n\tCMD_ENABLE\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 28),\n\n\t \n\tCMD_ENABLE_WAIT\t\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 28),\n\n\t \n\tCMD_DISABLE\t\t= _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 29),\n\n\t \n\tCMD_STATS_DUMP_ALL\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 30),\n\n\t \n\tCMD_INIT_STATUS\t\t= _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 31),\n\n\t \n\tCMD_INT13               = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_FC, 32),\n\n\t \n\tCMD_LOGICAL_UPLINK      = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 33),\n\n\t \n\tCMD_DEINIT\t\t= _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 34),\n\n\t \n\tCMD_INIT\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 35),\n\n\t \n\tCMD_CAPABILITY\t\t= _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 36),\n\n\t \n\tCMD_PERBI\t\t= _CMDC(_CMD_DIR_RW, _CMD_VTYPE_FC, 37),\n\n\t \n\tCMD_IAR\t\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 38),\n\n\t \n\tCMD_HANG_RESET\t\t= _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 39),\n\n\t \n\tCMD_HANG_RESET_STATUS   = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 40),\n\n\t \n\tCMD_IG_VLAN_REWRITE_MODE = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ENET, 41),\n\n\t \n\tCMD_PROXY_BY_BDF =\t_CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 42),\n\n\t \n\tCMD_PROXY_BY_INDEX =    _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 43),\n\n\t \n\tCMD_CONFIG_INFO_GET     = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 44),\n\n\t \n\tCMD_INT13_ALL = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 45),\n\n\t \n\tCMD_SET_DEFAULT_VLAN = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 46),\n\n\t \n\tCMD_INIT_PROV_INFO2  = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 47),\n\n\t \n\tCMD_ENABLE2 = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 48),\n\n\t \n\tCMD_STATUS = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 49),\n\n\t \n\tCMD_INTR_COAL_CONVERT = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 50),\n\n\t \n\tCMD_SET_MAC_ADDR = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 55),\n\n\t \n\tCMD_PROV_INFO_UPDATE = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 56),\n\n\t \n\tCMD_INITIALIZE_DEVCMD2 = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 57),\n\n\t \n\tCMD_ADD_FILTER = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ENET, 58),\n\n\t \n\tCMD_DEL_FILTER = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 59),\n\n\t \n\tCMD_QP_ENABLE = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 60),\n\n\t \n\tCMD_QP_DISABLE = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 61),\n\n\t \n\tCMD_QP_STATS_DUMP = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 62),\n\n\t \n\tCMD_QP_STATS_CLEAR = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 63),\n\n\t \n\tCMD_GET_SUPP_FEATURE_VER = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ENET, 69),\n\n\t \n\tCMD_OVERLAY_OFFLOAD_CTRL = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 72),\n\n\t \n\tCMD_OVERLAY_OFFLOAD_CFG = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 73),\n};\n\n \n#define CMD_ENABLE2_STANDBY 0x0\n#define CMD_ENABLE2_ACTIVE  0x1\n\n \n#define CMD_OPENF_OPROM\t\t0x1\t \n#define CMD_OPENF_IG_DESCCACHE\t0x2\t \n\n \n#define CMD_INITF_DEFAULT_MAC\t0x1\t \n\n \n#define CMD_PFILTER_DIRECTED\t\t0x01\n#define CMD_PFILTER_MULTICAST\t\t0x02\n#define CMD_PFILTER_BROADCAST\t\t0x04\n#define CMD_PFILTER_PROMISCUOUS\t\t0x08\n#define CMD_PFILTER_ALL_MULTICAST\t0x10\n\n \n#define CMD_QP_RQWQ                     0x0\n\n \n#define IG_VLAN_REWRITE_MODE_DEFAULT_TRUNK              0\n#define IG_VLAN_REWRITE_MODE_UNTAG_DEFAULT_VLAN         1\n#define IG_VLAN_REWRITE_MODE_PRIORITY_TAG_DEFAULT_VLAN  2\n#define IG_VLAN_REWRITE_MODE_PASS_THRU                  3\n\nenum vnic_devcmd_status {\n\tSTAT_NONE = 0,\n\tSTAT_BUSY = 1 << 0,\t \n\tSTAT_ERROR = 1 << 1,\t \n};\n\nenum vnic_devcmd_error {\n\tERR_SUCCESS = 0,\n\tERR_EINVAL = 1,\n\tERR_EFAULT = 2,\n\tERR_EPERM = 3,\n\tERR_EBUSY = 4,\n\tERR_ECMDUNKNOWN = 5,\n\tERR_EBADSTATE = 6,\n\tERR_ENOMEM = 7,\n\tERR_ETIMEDOUT = 8,\n\tERR_ELINKDOWN = 9,\n\tERR_EMAXRES = 10,\n\tERR_ENOTSUPPORTED = 11,\n\tERR_EINPROGRESS = 12,\n\tERR_MAX\n};\n\n \nstruct vnic_devcmd_fw_info {\n\tchar fw_version[32];\n\tchar fw_build[32];\n\tchar hw_version[32];\n\tchar hw_serial_number[32];\n\tu16 asic_type;\n\tu16 asic_rev;\n};\n\nstruct vnic_devcmd_notify {\n\tu32 csum;\t\t \n\n\tu32 link_state;\t\t \n\tu32 port_speed;\t\t \n\tu32 mtu;\t\t \n\tu32 msglvl;\t\t \n\tu32 uif;\t\t \n\tu32 status;\t\t \n\tu32 error;\t\t \n\tu32 link_down_cnt;\t \n\tu32 perbi_rebuild_cnt;\t \n};\n#define VNIC_STF_FATAL_ERR\t0x0001\t \n#define VNIC_STF_STD_PAUSE\t0x0002\t \n#define VNIC_STF_PFC_PAUSE\t0x0004\t \n \n#define VNIC_STF_ALL\t\t(VNIC_STF_FATAL_ERR |\\\n\t\t\t\t VNIC_STF_STD_PAUSE |\\\n\t\t\t\t VNIC_STF_PFC_PAUSE |\\\n\t\t\t\t 0)\n\nstruct vnic_devcmd_provinfo {\n\tu8 oui[3];\n\tu8 type;\n\tu8 data[];\n};\n\n \n#define FILTER_FIELD_VALID(fld) (1 << (fld - 1))\n\n#define FILTER_FIELDS_USNIC ( \\\n\t\t\tFILTER_FIELD_VALID(1) | \\\n\t\t\tFILTER_FIELD_VALID(2) | \\\n\t\t\tFILTER_FIELD_VALID(3) | \\\n\t\t\tFILTER_FIELD_VALID(4))\n\n#define FILTER_FIELDS_IPV4_5TUPLE ( \\\n\t\t\tFILTER_FIELD_VALID(1) | \\\n\t\t\tFILTER_FIELD_VALID(2) | \\\n\t\t\tFILTER_FIELD_VALID(3) | \\\n\t\t\tFILTER_FIELD_VALID(4) | \\\n\t\t\tFILTER_FIELD_VALID(5))\n\n#define FILTER_FIELDS_MAC_VLAN ( \\\n\t\t\tFILTER_FIELD_VALID(1) | \\\n\t\t\tFILTER_FIELD_VALID(2))\n\n#define FILTER_FIELD_USNIC_VLAN    FILTER_FIELD_VALID(1)\n#define FILTER_FIELD_USNIC_ETHTYPE FILTER_FIELD_VALID(2)\n#define FILTER_FIELD_USNIC_PROTO   FILTER_FIELD_VALID(3)\n#define FILTER_FIELD_USNIC_ID      FILTER_FIELD_VALID(4)\n\nstruct filter_usnic_id {\n\tu32 flags;\n\tu16 vlan;\n\tu16 ethtype;\n\tu8 proto_version;\n\tu32 usnic_id;\n} __packed;\n\n#define FILTER_FIELD_5TUP_PROTO  FILTER_FIELD_VALID(1)\n#define FILTER_FIELD_5TUP_SRC_AD FILTER_FIELD_VALID(2)\n#define FILTER_FIELD_5TUP_DST_AD FILTER_FIELD_VALID(3)\n#define FILTER_FIELD_5TUP_SRC_PT FILTER_FIELD_VALID(4)\n#define FILTER_FIELD_5TUP_DST_PT FILTER_FIELD_VALID(5)\n\n \nenum protocol_e {\n\tPROTO_UDP = 0,\n\tPROTO_TCP = 1,\n};\n\nstruct filter_ipv4_5tuple {\n\tu32 flags;\n\tu32 protocol;\n\tu32 src_addr;\n\tu32 dst_addr;\n\tu16 src_port;\n\tu16 dst_port;\n} __packed;\n\n#define FILTER_FIELD_VMQ_VLAN   FILTER_FIELD_VALID(1)\n#define FILTER_FIELD_VMQ_MAC    FILTER_FIELD_VALID(2)\n\nstruct filter_mac_vlan {\n\tu32 flags;\n\tu16 vlan;\n\tu8 mac_addr[6];\n} __packed;\n\n \nenum {\n\tFILTER_ACTION_RQ_STEERING = 0,\n\tFILTER_ACTION_MAX\n};\n\nstruct filter_action {\n\tu32 type;\n\tunion {\n\t\tu32 rq_idx;\n\t} u;\n} __packed;\n\n \nenum filter_type {\n\tFILTER_USNIC_ID = 0,\n\tFILTER_IPV4_5TUPLE = 1,\n\tFILTER_MAC_VLAN = 2,\n\tFILTER_MAX\n};\n\nstruct filter {\n\tu32 type;\n\tunion {\n\t\tstruct filter_usnic_id usnic;\n\t\tstruct filter_ipv4_5tuple ipv4;\n\t\tstruct filter_mac_vlan mac_vlan;\n\t} u;\n} __packed;\n\nenum {\n\tCLSF_TLV_FILTER = 0,\n\tCLSF_TLV_ACTION = 1,\n};\n\n \n#define FILTER_MAX_BUF_SIZE 100\n\nstruct filter_tlv {\n\tu32 type;\n\tu32 length;\n\tu32 val[];\n};\n\nenum {\n\tCLSF_ADD = 0,\n\tCLSF_DEL = 1,\n};\n\n \n\n \n#define VNIC_DEVCMD_NARGS 15\nstruct vnic_devcmd {\n\tu32 status;\t\t\t \n\tu32 cmd;\t\t\t \n\tu64 args[VNIC_DEVCMD_NARGS];\t \n};\n\n#define DEVCMD2_FNORESULT\t0x1\t \n\n#define VNIC_DEVCMD2_NARGS\tVNIC_DEVCMD_NARGS\nstruct vnic_devcmd2 {\n\tu16 pad;\n\tu16 flags;\n\tu32 cmd;\n\tu64 args[VNIC_DEVCMD2_NARGS];\n};\n\n#define VNIC_DEVCMD2_NRESULTS\tVNIC_DEVCMD_NARGS\nstruct devcmd2_result {\n\tu64 results[VNIC_DEVCMD2_NRESULTS];\n\tu32 pad;\n\tu16 completed_index;\n\tu8  error;\n\tu8  color;\n};\n\n#define DEVCMD2_RING_SIZE\t32\n#define DEVCMD2_DESC_SIZE\t128\n\nenum overlay_feature_t {\n\tOVERLAY_FEATURE_NVGRE = 1,\n\tOVERLAY_FEATURE_VXLAN,\n\tOVERLAY_FEATURE_MAX,\n};\n\nenum overlay_ofld_cmd {\n\tOVERLAY_OFFLOAD_ENABLE,\n\tOVERLAY_OFFLOAD_DISABLE,\n\tOVERLAY_OFFLOAD_ENABLE_P2,\n\tOVERLAY_OFFLOAD_MAX,\n};\n\n#define OVERLAY_CFG_VXLAN_PORT_UPDATE\t0\n\n#define ENIC_VXLAN_INNER_IPV6\t\tBIT(0)\n#define ENIC_VXLAN_OUTER_IPV6\t\tBIT(1)\n#define ENIC_VXLAN_MULTI_WQ\t\tBIT(2)\n\n \nenum vic_feature_t {\n\tVIC_FEATURE_VXLAN,\n\tVIC_FEATURE_RDMA,\n\tVIC_FEATURE_VXLAN_PATCH,\n\tVIC_FEATURE_MAX,\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}