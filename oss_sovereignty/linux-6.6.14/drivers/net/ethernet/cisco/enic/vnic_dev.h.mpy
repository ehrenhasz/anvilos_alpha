{
  "module_name": "vnic_dev.h",
  "hash_id": "e2dd280a65e9766155a5e712e1afd94e21fa4c40c21b0b9a5121eb98f72eb97a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/cisco/enic/vnic_dev.h",
  "human_readable_source": " \n \n\n#ifndef _VNIC_DEV_H_\n#define _VNIC_DEV_H_\n\n#include \"vnic_resource.h\"\n#include \"vnic_devcmd.h\"\n\n#ifndef VNIC_PADDR_TARGET\n#define VNIC_PADDR_TARGET\t0x0000000000000000ULL\n#endif\n\n#ifndef readq\nstatic inline u64 readq(void __iomem *reg)\n{\n\treturn (((u64)readl(reg + 0x4UL) << 32) |\n\t\t(u64)readl(reg));\n}\n\nstatic inline void writeq(u64 val, void __iomem *reg)\n{\n\twritel(val & 0xffffffff, reg);\n\twritel(val >> 32, reg + 0x4UL);\n}\n#endif\n\n#undef pr_fmt\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\nenum vnic_dev_intr_mode {\n\tVNIC_DEV_INTR_MODE_UNKNOWN,\n\tVNIC_DEV_INTR_MODE_INTX,\n\tVNIC_DEV_INTR_MODE_MSI,\n\tVNIC_DEV_INTR_MODE_MSIX,\n};\n\nstruct vnic_dev_bar {\n\tvoid __iomem *vaddr;\n\tdma_addr_t bus_addr;\n\tunsigned long len;\n};\n\nstruct vnic_dev_ring {\n\tvoid *descs;\n\tsize_t size;\n\tdma_addr_t base_addr;\n\tsize_t base_align;\n\tvoid *descs_unaligned;\n\tsize_t size_unaligned;\n\tdma_addr_t base_addr_unaligned;\n\tunsigned int desc_size;\n\tunsigned int desc_count;\n\tunsigned int desc_avail;\n};\n\nenum vnic_proxy_type {\n\tPROXY_NONE,\n\tPROXY_BY_BDF,\n\tPROXY_BY_INDEX,\n};\n\nstruct vnic_res {\n\tvoid __iomem *vaddr;\n\tdma_addr_t bus_addr;\n\tunsigned int count;\n};\n\nstruct vnic_intr_coal_timer_info {\n\tu32 mul;\n\tu32 div;\n\tu32 max_usec;\n};\n\nstruct vnic_dev {\n\tvoid *priv;\n\tstruct pci_dev *pdev;\n\tstruct vnic_res res[RES_TYPE_MAX];\n\tenum vnic_dev_intr_mode intr_mode;\n\tstruct vnic_devcmd __iomem *devcmd;\n\tstruct vnic_devcmd_notify *notify;\n\tstruct vnic_devcmd_notify notify_copy;\n\tdma_addr_t notify_pa;\n\tu32 notify_sz;\n\tdma_addr_t linkstatus_pa;\n\tstruct vnic_stats *stats;\n\tdma_addr_t stats_pa;\n\tstruct vnic_devcmd_fw_info *fw_info;\n\tdma_addr_t fw_info_pa;\n\tenum vnic_proxy_type proxy;\n\tu32 proxy_index;\n\tu64 args[VNIC_DEVCMD_NARGS];\n\tstruct vnic_intr_coal_timer_info intr_coal_timer_info;\n\tstruct devcmd2_controller *devcmd2;\n\tint (*devcmd_rtn)(struct vnic_dev *vdev, enum vnic_devcmd_cmd cmd,\n\t\t\t  int wait);\n};\n\nstruct vnic_stats;\n\nvoid *vnic_dev_priv(struct vnic_dev *vdev);\nunsigned int vnic_dev_get_res_count(struct vnic_dev *vdev,\n\tenum vnic_res_type type);\nvoid __iomem *vnic_dev_get_res(struct vnic_dev *vdev, enum vnic_res_type type,\n\tunsigned int index);\nvoid vnic_dev_clear_desc_ring(struct vnic_dev_ring *ring);\nint vnic_dev_alloc_desc_ring(struct vnic_dev *vdev, struct vnic_dev_ring *ring,\n\tunsigned int desc_count, unsigned int desc_size);\nvoid vnic_dev_free_desc_ring(struct vnic_dev *vdev,\n\tstruct vnic_dev_ring *ring);\nint vnic_dev_cmd(struct vnic_dev *vdev, enum vnic_devcmd_cmd cmd,\n\tu64 *a0, u64 *a1, int wait);\nvoid vnic_dev_cmd_proxy_by_index_start(struct vnic_dev *vdev, u16 index);\nvoid vnic_dev_cmd_proxy_end(struct vnic_dev *vdev);\nint vnic_dev_fw_info(struct vnic_dev *vdev,\n\tstruct vnic_devcmd_fw_info **fw_info);\nint vnic_dev_spec(struct vnic_dev *vdev, unsigned int offset, unsigned int size,\n\tvoid *value);\nint vnic_dev_stats_dump(struct vnic_dev *vdev, struct vnic_stats **stats);\nint vnic_dev_hang_notify(struct vnic_dev *vdev);\nint vnic_dev_packet_filter(struct vnic_dev *vdev, int directed, int multicast,\n\tint broadcast, int promisc, int allmulti);\nint vnic_dev_add_addr(struct vnic_dev *vdev, const u8 *addr);\nint vnic_dev_del_addr(struct vnic_dev *vdev, const u8 *addr);\nint vnic_dev_get_mac_addr(struct vnic_dev *vdev, u8 *mac_addr);\nint vnic_dev_notify_set(struct vnic_dev *vdev, u16 intr);\nint vnic_dev_notify_unset(struct vnic_dev *vdev);\nint vnic_dev_link_status(struct vnic_dev *vdev);\nu32 vnic_dev_port_speed(struct vnic_dev *vdev);\nu32 vnic_dev_msg_lvl(struct vnic_dev *vdev);\nu32 vnic_dev_mtu(struct vnic_dev *vdev);\nint vnic_dev_close(struct vnic_dev *vdev);\nint vnic_dev_enable_wait(struct vnic_dev *vdev);\nint vnic_dev_disable(struct vnic_dev *vdev);\nint vnic_dev_open(struct vnic_dev *vdev, int arg);\nint vnic_dev_open_done(struct vnic_dev *vdev, int *done);\nint vnic_dev_init(struct vnic_dev *vdev, int arg);\nint vnic_dev_deinit(struct vnic_dev *vdev);\nvoid vnic_dev_intr_coal_timer_info_default(struct vnic_dev *vdev);\nint vnic_dev_intr_coal_timer_info(struct vnic_dev *vdev);\nint vnic_dev_hang_reset(struct vnic_dev *vdev, int arg);\nint vnic_dev_soft_reset(struct vnic_dev *vdev, int arg);\nint vnic_dev_hang_reset_done(struct vnic_dev *vdev, int *done);\nint vnic_dev_soft_reset_done(struct vnic_dev *vdev, int *done);\nvoid vnic_dev_set_intr_mode(struct vnic_dev *vdev,\n\tenum vnic_dev_intr_mode intr_mode);\nenum vnic_dev_intr_mode vnic_dev_get_intr_mode(struct vnic_dev *vdev);\nu32 vnic_dev_intr_coal_timer_usec_to_hw(struct vnic_dev *vdev, u32 usec);\nu32 vnic_dev_intr_coal_timer_hw_to_usec(struct vnic_dev *vdev, u32 hw_cycles);\nu32 vnic_dev_get_intr_coal_timer_max(struct vnic_dev *vdev);\nvoid vnic_dev_unregister(struct vnic_dev *vdev);\nint vnic_dev_set_ig_vlan_rewrite_mode(struct vnic_dev *vdev,\n\tu8 ig_vlan_rewrite_mode);\nstruct vnic_dev *vnic_dev_register(struct vnic_dev *vdev,\n\tvoid *priv, struct pci_dev *pdev, struct vnic_dev_bar *bar,\n\tunsigned int num_bars);\nstruct pci_dev *vnic_dev_get_pdev(struct vnic_dev *vdev);\nint vnic_dev_init_prov2(struct vnic_dev *vdev, u8 *buf, u32 len);\nint vnic_dev_enable2(struct vnic_dev *vdev, int active);\nint vnic_dev_enable2_done(struct vnic_dev *vdev, int *status);\nint vnic_dev_deinit_done(struct vnic_dev *vdev, int *status);\nint vnic_dev_set_mac_addr(struct vnic_dev *vdev, u8 *mac_addr);\nint vnic_dev_classifier(struct vnic_dev *vdev, u8 cmd, u16 *entry,\n\t\t\tstruct filter *data);\nint vnic_devcmd_init(struct vnic_dev *vdev);\nint vnic_dev_overlay_offload_ctrl(struct vnic_dev *vdev, u8 overlay, u8 config);\nint vnic_dev_overlay_offload_cfg(struct vnic_dev *vdev, u8 overlay,\n\t\t\t\t u16 vxlan_udp_port_number);\nint vnic_dev_get_supported_feature_ver(struct vnic_dev *vdev, u8 feature,\n\t\t\t\t       u64 *supported_versions, u64 *a1);\nint vnic_dev_capable_rss_hash_type(struct vnic_dev *vdev, u8 *rss_hash_type);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}