{
  "module_name": "jme.h",
  "hash_id": "2fa2a8b2335b6f06fd2400bf8473a0af83a80d2de6b551966825c111f4153ea1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/jme.h",
  "human_readable_source": " \n \n\n#ifndef __JME_H_INCLUDED__\n#define __JME_H_INCLUDED__\n#include <linux/interrupt.h>\n\n#define DRV_NAME\t\"jme\"\n#define DRV_VERSION\t\"1.0.8\"\n\n#define PCI_DEVICE_ID_JMICRON_JMC250\t0x0250\n#define PCI_DEVICE_ID_JMICRON_JMC260\t0x0260\n\n \n#define JME_DEF_MSG_ENABLE \\\n\t(NETIF_MSG_PROBE | \\\n\tNETIF_MSG_LINK | \\\n\tNETIF_MSG_RX_ERR | \\\n\tNETIF_MSG_TX_ERR | \\\n\tNETIF_MSG_HW)\n\n#ifdef TX_DEBUG\n#define tx_dbg(priv, fmt, args...)\t\t\t\t\t\\\n\tprintk(KERN_DEBUG \"%s: \" fmt, (priv)->dev->name, ##args)\n#else\n#define tx_dbg(priv, fmt, args...)\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (0)\t\t\t\t\t\t\t\t\\\n\t\tprintk(KERN_DEBUG \"%s: \" fmt, (priv)->dev->name, ##args); \\\n} while (0)\n#endif\n\n \n#define PCI_DCSR_MRRS\t\t0x59\n#define PCI_DCSR_MRRS_MASK\t0x70\n\nenum pci_dcsr_mrrs_vals {\n\tMRRS_128B\t= 0x00,\n\tMRRS_256B\t= 0x10,\n\tMRRS_512B\t= 0x20,\n\tMRRS_1024B\t= 0x30,\n\tMRRS_2048B\t= 0x40,\n\tMRRS_4096B\t= 0x50,\n};\n\n#define PCI_SPI\t\t\t0xB0\n\nenum pci_spi_bits {\n\tSPI_EN\t\t= 0x10,\n\tSPI_MISO\t= 0x08,\n\tSPI_MOSI\t= 0x04,\n\tSPI_SCLK\t= 0x02,\n\tSPI_CS\t\t= 0x01,\n};\n\nstruct jme_spi_op {\n\tvoid __user *uwbuf;\n\tvoid __user *urbuf;\n\t__u8\twn;\t \n\t__u8\trn;\t \n\t__u8\tbitn;\t \n\t__u8\tspd;\t \n\t__u8\tmode;\t \n\n\t \n\tu8\t*kwbuf;\n\tu8\t*krbuf;\n\tu8\tsr;\n\tu16\thalfclk;  \n};\n\nenum jme_spi_op_bits {\n\tSPI_MODE_CPHA\t= 0x01,\n\tSPI_MODE_CPOL\t= 0x02,\n\tSPI_MODE_DUP\t= 0x80,\n};\n\n#define HALF_US 500\t \n\n#define PCI_PRIV_PE1\t\t0xE4\n\nenum pci_priv_pe1_bit_masks {\n\tPE1_ASPMSUPRT\t= 0x00000003,  \n\tPE1_MULTIFUN\t= 0x00000004,  \n\tPE1_RDYDMA\t= 0x00000008,  \n\tPE1_ASPMOPTL\t= 0x00000030,  \n\tPE1_ASPMOPTH\t= 0x000000C0,  \n\tPE1_GPREG0\t= 0x0000FF00,  \n\tPE1_GPREG0_PBG\t= 0x0000C000,  \n\tPE1_GPREG1\t= 0x00FF0000,  \n\tPE1_REVID\t= 0xFF000000,  \n};\n\nenum pci_priv_pe1_values {\n\tPE1_GPREG0_ENBG\t\t= 0x00000000,  \n\tPE1_GPREG0_PDD3COLD\t= 0x00004000,  \n\tPE1_GPREG0_PDPCIESD\t= 0x00008000,  \n\tPE1_GPREG0_PDPCIEIDDQ\t= 0x0000C000,  \n};\n\n \nenum dynamic_pcc_values {\n\tPCC_OFF\t\t= 0,\n\tPCC_P1\t\t= 1,\n\tPCC_P2\t\t= 2,\n\tPCC_P3\t\t= 3,\n\n\tPCC_OFF_TO\t= 0,\n\tPCC_P1_TO\t= 1,\n\tPCC_P2_TO\t= 64,\n\tPCC_P3_TO\t= 128,\n\n\tPCC_OFF_CNT\t= 0,\n\tPCC_P1_CNT\t= 1,\n\tPCC_P2_CNT\t= 16,\n\tPCC_P3_CNT\t= 32,\n};\nstruct dynpcc_info {\n\tunsigned long\tlast_bytes;\n\tunsigned long\tlast_pkts;\n\tunsigned long\tintr_cnt;\n\tunsigned char\tcur;\n\tunsigned char\tattempt;\n\tunsigned char\tcnt;\n};\n#define PCC_INTERVAL_US\t100000\n#define PCC_INTERVAL (HZ / (1000000 / PCC_INTERVAL_US))\n#define PCC_P3_THRESHOLD (2 * 1024 * 1024)\n#define PCC_P2_THRESHOLD 800\n#define PCC_INTR_THRESHOLD 800\n#define PCC_TX_TO 1000\n#define PCC_TX_CNT 8\n\n \n#define RING_DESC_ALIGN\t\t16\t \n#define TX_DESC_SIZE\t\t16\n#define TX_RING_NR\t\t8\n#define TX_RING_ALLOC_SIZE(s)\t((s * TX_DESC_SIZE) + RING_DESC_ALIGN)\n\nstruct txdesc {\n\tunion {\n\t\t__u8\tall[16];\n\t\t__le32\tdw[4];\n\t\tstruct {\n\t\t\t \n\t\t\t__le16\tvlan;\n\t\t\t__u8\trsv1;\n\t\t\t__u8\tflags;\n\n\t\t\t \n\t\t\t__le16\tdatalen;\n\t\t\t__le16\tmss;\n\n\t\t\t \n\t\t\t__le16\tpktsize;\n\t\t\t__le16\trsv2;\n\n\t\t\t \n\t\t\t__le32\tbufaddr;\n\t\t} desc1;\n\t\tstruct {\n\t\t\t \n\t\t\t__le16\trsv1;\n\t\t\t__u8\trsv2;\n\t\t\t__u8\tflags;\n\n\t\t\t \n\t\t\t__le16\tdatalen;\n\t\t\t__le16\trsv3;\n\n\t\t\t \n\t\t\t__le32\tbufaddrh;\n\n\t\t\t \n\t\t\t__le32\tbufaddrl;\n\t\t} desc2;\n\t\tstruct {\n\t\t\t \n\t\t\t__u8\tehdrsz;\n\t\t\t__u8\trsv1;\n\t\t\t__u8\trsv2;\n\t\t\t__u8\tflags;\n\n\t\t\t \n\t\t\t__le16\ttrycnt;\n\t\t\t__le16\tsegcnt;\n\n\t\t\t \n\t\t\t__le16\tpktsz;\n\t\t\t__le16\trsv3;\n\n\t\t\t \n\t\t\t__le32\tbufaddrl;\n\t\t} descwb;\n\t};\n};\n\nenum jme_txdesc_flags_bits {\n\tTXFLAG_OWN\t= 0x80,\n\tTXFLAG_INT\t= 0x40,\n\tTXFLAG_64BIT\t= 0x20,\n\tTXFLAG_TCPCS\t= 0x10,\n\tTXFLAG_UDPCS\t= 0x08,\n\tTXFLAG_IPCS\t= 0x04,\n\tTXFLAG_LSEN\t= 0x02,\n\tTXFLAG_TAGON\t= 0x01,\n};\n\n#define TXDESC_MSS_SHIFT\t2\nenum jme_txwbdesc_flags_bits {\n\tTXWBFLAG_OWN\t= 0x80,\n\tTXWBFLAG_INT\t= 0x40,\n\tTXWBFLAG_TMOUT\t= 0x20,\n\tTXWBFLAG_TRYOUT\t= 0x10,\n\tTXWBFLAG_COL\t= 0x08,\n\n\tTXWBFLAG_ALLERR\t= TXWBFLAG_TMOUT |\n\t\t\t  TXWBFLAG_TRYOUT |\n\t\t\t  TXWBFLAG_COL,\n};\n\n#define RX_DESC_SIZE\t\t16\n#define RX_RING_NR\t\t4\n#define RX_RING_ALLOC_SIZE(s)\t((s * RX_DESC_SIZE) + RING_DESC_ALIGN)\n#define RX_BUF_DMA_ALIGN\t8\n#define RX_PREPAD_SIZE\t\t10\n#define ETH_CRC_LEN\t\t2\n#define RX_VLANHDR_LEN\t\t2\n#define RX_EXTRA_LEN\t\t(RX_PREPAD_SIZE + \\\n\t\t\t\tETH_HLEN + \\\n\t\t\t\tETH_CRC_LEN + \\\n\t\t\t\tRX_VLANHDR_LEN + \\\n\t\t\t\tRX_BUF_DMA_ALIGN)\n\nstruct rxdesc {\n\tunion {\n\t\t__u8\tall[16];\n\t\t__le32\tdw[4];\n\t\tstruct {\n\t\t\t \n\t\t\t__le16\trsv2;\n\t\t\t__u8\trsv1;\n\t\t\t__u8\tflags;\n\n\t\t\t \n\t\t\t__le16\tdatalen;\n\t\t\t__le16\twbcpl;\n\n\t\t\t \n\t\t\t__le32\tbufaddrh;\n\n\t\t\t \n\t\t\t__le32\tbufaddrl;\n\t\t} desc1;\n\t\tstruct {\n\t\t\t \n\t\t\t__le16\tvlan;\n\t\t\t__le16\tflags;\n\n\t\t\t \n\t\t\t__le16\tframesize;\n\t\t\t__u8\terrstat;\n\t\t\t__u8\tdesccnt;\n\n\t\t\t \n\t\t\t__le32\trsshash;\n\n\t\t\t \n\t\t\t__u8\thashfun;\n\t\t\t__u8\thashtype;\n\t\t\t__le16\tresrv;\n\t\t} descwb;\n\t};\n};\n\nenum jme_rxdesc_flags_bits {\n\tRXFLAG_OWN\t= 0x80,\n\tRXFLAG_INT\t= 0x40,\n\tRXFLAG_64BIT\t= 0x20,\n};\n\nenum jme_rxwbdesc_flags_bits {\n\tRXWBFLAG_OWN\t\t= 0x8000,\n\tRXWBFLAG_INT\t\t= 0x4000,\n\tRXWBFLAG_MF\t\t= 0x2000,\n\tRXWBFLAG_64BIT\t\t= 0x2000,\n\tRXWBFLAG_TCPON\t\t= 0x1000,\n\tRXWBFLAG_UDPON\t\t= 0x0800,\n\tRXWBFLAG_IPCS\t\t= 0x0400,\n\tRXWBFLAG_TCPCS\t\t= 0x0200,\n\tRXWBFLAG_UDPCS\t\t= 0x0100,\n\tRXWBFLAG_TAGON\t\t= 0x0080,\n\tRXWBFLAG_IPV4\t\t= 0x0040,\n\tRXWBFLAG_IPV6\t\t= 0x0020,\n\tRXWBFLAG_PAUSE\t\t= 0x0010,\n\tRXWBFLAG_MAGIC\t\t= 0x0008,\n\tRXWBFLAG_WAKEUP\t\t= 0x0004,\n\tRXWBFLAG_DEST\t\t= 0x0003,\n\tRXWBFLAG_DEST_UNI\t= 0x0001,\n\tRXWBFLAG_DEST_MUL\t= 0x0002,\n\tRXWBFLAG_DEST_BRO\t= 0x0003,\n};\n\nenum jme_rxwbdesc_desccnt_mask {\n\tRXWBDCNT_WBCPL\t= 0x80,\n\tRXWBDCNT_DCNT\t= 0x7F,\n};\n\nenum jme_rxwbdesc_errstat_bits {\n\tRXWBERR_LIMIT\t= 0x80,\n\tRXWBERR_MIIER\t= 0x40,\n\tRXWBERR_NIBON\t= 0x20,\n\tRXWBERR_COLON\t= 0x10,\n\tRXWBERR_ABORT\t= 0x08,\n\tRXWBERR_SHORT\t= 0x04,\n\tRXWBERR_OVERUN\t= 0x02,\n\tRXWBERR_CRCERR\t= 0x01,\n\tRXWBERR_ALLERR\t= 0xFF,\n};\n\n \nstruct jme_buffer_info {\n\tstruct sk_buff *skb;\n\tdma_addr_t mapping;\n\tint len;\n\tint nr_desc;\n\tunsigned long start_xmit;\n};\n\n \nstruct jme_ring {\n\tvoid *alloc;\t\t \n\tvoid *desc;\t\t \n\tdma_addr_t dmaalloc;\t \n\tdma_addr_t dma;\t\t \n\n\t \n\tstruct jme_buffer_info *bufinf;\n\n\tint next_to_use;\n\tatomic_t next_to_clean;\n\tatomic_t nr_free;\n};\n\n#define NET_STAT(priv) (priv->dev->stats)\n#define NETDEV_GET_STATS(netdev, fun_ptr)\n#define DECLARE_NET_DEVICE_STATS\n\n#define DECLARE_NAPI_STRUCT struct napi_struct napi;\n#define JME_NAPI_HOLDER(holder) struct napi_struct *holder\n#define JME_NAPI_WEIGHT(w) int w\n#define JME_NAPI_WEIGHT_VAL(w) w\n#define JME_NAPI_WEIGHT_SET(w, r)\n#define JME_RX_COMPLETE(dev, napis) napi_complete(napis)\n#define JME_NAPI_ENABLE(priv) napi_enable(&priv->napi);\n#define JME_NAPI_DISABLE(priv) \\\n\tif (!napi_disable_pending(&priv->napi)) \\\n\t\tnapi_disable(&priv->napi);\n#define JME_RX_SCHEDULE_PREP(priv) \\\n\tnapi_schedule_prep(&priv->napi)\n#define JME_RX_SCHEDULE(priv) \\\n\t__napi_schedule(&priv->napi);\n\n \nstruct jme_adapter {\n\tstruct pci_dev          *pdev;\n\tstruct net_device       *dev;\n\tvoid __iomem            *regs;\n\tstruct mii_if_info\tmii_if;\n\tstruct jme_ring\t\trxring[RX_RING_NR];\n\tstruct jme_ring\t\ttxring[TX_RING_NR];\n\tspinlock_t\t\tphy_lock;\n\tspinlock_t\t\tmacaddr_lock;\n\tspinlock_t\t\trxmcs_lock;\n\tstruct tasklet_struct\trxempty_task;\n\tstruct tasklet_struct\trxclean_task;\n\tstruct tasklet_struct\ttxclean_task;\n\tstruct work_struct\tlinkch_task;\n\tstruct tasklet_struct\tpcc_task;\n\tunsigned long\t\tflags;\n\tu32\t\t\treg_txcs;\n\tu32\t\t\treg_txpfc;\n\tu32\t\t\treg_rxcs;\n\tu32\t\t\treg_rxmcs;\n\tu32\t\t\treg_ghc;\n\tu32\t\t\treg_pmcs;\n\tu32\t\t\treg_gpreg1;\n\tu32\t\t\tphylink;\n\tu32\t\t\ttx_ring_size;\n\tu32\t\t\ttx_ring_mask;\n\tu32\t\t\ttx_wake_threshold;\n\tu32\t\t\trx_ring_size;\n\tu32\t\t\trx_ring_mask;\n\tu8\t\t\tmrrs;\n\tunsigned int\t\tfpgaver;\n\tu8\t\t\tchiprev;\n\tu8\t\t\tchip_main_rev;\n\tu8\t\t\tchip_sub_rev;\n\tu8\t\t\tpcirev;\n\tu32\t\t\tmsg_enable;\n\tstruct ethtool_link_ksettings old_cmd;\n\tunsigned int\t\told_mtu;\n\tstruct dynpcc_info\tdpi;\n\tatomic_t\t\tintr_sem;\n\tatomic_t\t\tlink_changing;\n\tatomic_t\t\ttx_cleaning;\n\tatomic_t\t\trx_cleaning;\n\tatomic_t\t\trx_empty;\n\tint\t\t\t(*jme_rx)(struct sk_buff *skb);\n\tDECLARE_NAPI_STRUCT\n\tDECLARE_NET_DEVICE_STATS\n};\n\nenum jme_flags_bits {\n\tJME_FLAG_MSI\t\t= 1,\n\tJME_FLAG_SSET\t\t= 2,\n\tJME_FLAG_POLL\t\t= 5,\n\tJME_FLAG_SHUTDOWN\t= 6,\n};\n\n#define TX_TIMEOUT\t\t(5 * HZ)\n#define JME_REG_LEN\t\t0x500\n#define MAX_ETHERNET_JUMBO_PACKET_SIZE 9216\n\nstatic inline struct jme_adapter*\njme_napi_priv(struct napi_struct *napi)\n{\n\tstruct jme_adapter *jme;\n\tjme = container_of(napi, struct jme_adapter, napi);\n\treturn jme;\n}\n\n \nenum jme_iomap_offsets {\n\tJME_MAC\t\t= 0x0000,\n\tJME_PHY\t\t= 0x0400,\n\tJME_MISC\t= 0x0800,\n\tJME_RSS\t\t= 0x0C00,\n};\n\nenum jme_iomap_lens {\n\tJME_MAC_LEN\t= 0x80,\n\tJME_PHY_LEN\t= 0x58,\n\tJME_MISC_LEN\t= 0x98,\n\tJME_RSS_LEN\t= 0xFF,\n};\n\nenum jme_iomap_regs {\n\tJME_TXCS\t= JME_MAC | 0x00,  \n\tJME_TXDBA_LO\t= JME_MAC | 0x04,  \n\tJME_TXDBA_HI\t= JME_MAC | 0x08,  \n\tJME_TXQDC\t= JME_MAC | 0x0C,  \n\tJME_TXNDA\t= JME_MAC | 0x10,  \n\tJME_TXMCS\t= JME_MAC | 0x14,  \n\tJME_TXPFC\t= JME_MAC | 0x18,  \n\tJME_TXTRHD\t= JME_MAC | 0x1C,  \n\n\tJME_RXCS\t= JME_MAC | 0x20,  \n\tJME_RXDBA_LO\t= JME_MAC | 0x24,  \n\tJME_RXDBA_HI\t= JME_MAC | 0x28,  \n\tJME_RXQDC\t= JME_MAC | 0x2C,  \n\tJME_RXNDA\t= JME_MAC | 0x30,  \n\tJME_RXMCS\t= JME_MAC | 0x34,  \n\tJME_RXUMA_LO\t= JME_MAC | 0x38,  \n\tJME_RXUMA_HI\t= JME_MAC | 0x3C,  \n\tJME_RXMCHT_LO\t= JME_MAC | 0x40,  \n\tJME_RXMCHT_HI\t= JME_MAC | 0x44,  \n\tJME_WFODP\t= JME_MAC | 0x48,  \n\tJME_WFOI\t= JME_MAC | 0x4C,  \n\n\tJME_SMI\t\t= JME_MAC | 0x50,  \n\tJME_GHC\t\t= JME_MAC | 0x54,  \n\tJME_PMCS\t= JME_MAC | 0x60,  \n\n\n\tJME_PHY_PWR\t= JME_PHY | 0x24,  \n\tJME_PHY_CS\t= JME_PHY | 0x28,  \n\tJME_PHY_LINK\t= JME_PHY | 0x30,  \n\tJME_SMBCSR\t= JME_PHY | 0x40,  \n\tJME_SMBINTF\t= JME_PHY | 0x44,  \n\n\n\tJME_TMCSR\t= JME_MISC | 0x00,  \n\tJME_GPREG0\t= JME_MISC | 0x08,  \n\tJME_GPREG1\t= JME_MISC | 0x0C,  \n\tJME_IEVE\t= JME_MISC | 0x20,  \n\tJME_IREQ\t= JME_MISC | 0x24,  \n\tJME_IENS\t= JME_MISC | 0x28,  \n\tJME_IENC\t= JME_MISC | 0x2C,  \n\tJME_PCCRX0\t= JME_MISC | 0x30,  \n\tJME_PCCTX\t= JME_MISC | 0x40,  \n\tJME_CHIPMODE\t= JME_MISC | 0x44,  \n\tJME_SHBA_HI\t= JME_MISC | 0x48,  \n\tJME_SHBA_LO\t= JME_MISC | 0x4C,  \n\tJME_TIMER1\t= JME_MISC | 0x70,  \n\tJME_TIMER2\t= JME_MISC | 0x74,  \n\tJME_APMC\t= JME_MISC | 0x7C,  \n\tJME_PCCSRX0\t= JME_MISC | 0x80,  \n};\n\n \nenum jme_txcs_bits {\n\tTXCS_QUEUE7S\t= 0x00008000,\n\tTXCS_QUEUE6S\t= 0x00004000,\n\tTXCS_QUEUE5S\t= 0x00002000,\n\tTXCS_QUEUE4S\t= 0x00001000,\n\tTXCS_QUEUE3S\t= 0x00000800,\n\tTXCS_QUEUE2S\t= 0x00000400,\n\tTXCS_QUEUE1S\t= 0x00000200,\n\tTXCS_QUEUE0S\t= 0x00000100,\n\tTXCS_FIFOTH\t= 0x000000C0,\n\tTXCS_DMASIZE\t= 0x00000030,\n\tTXCS_BURST\t= 0x00000004,\n\tTXCS_ENABLE\t= 0x00000001,\n};\n\nenum jme_txcs_value {\n\tTXCS_FIFOTH_16QW\t= 0x000000C0,\n\tTXCS_FIFOTH_12QW\t= 0x00000080,\n\tTXCS_FIFOTH_8QW\t\t= 0x00000040,\n\tTXCS_FIFOTH_4QW\t\t= 0x00000000,\n\n\tTXCS_DMASIZE_64B\t= 0x00000000,\n\tTXCS_DMASIZE_128B\t= 0x00000010,\n\tTXCS_DMASIZE_256B\t= 0x00000020,\n\tTXCS_DMASIZE_512B\t= 0x00000030,\n\n\tTXCS_SELECT_QUEUE0\t= 0x00000000,\n\tTXCS_SELECT_QUEUE1\t= 0x00010000,\n\tTXCS_SELECT_QUEUE2\t= 0x00020000,\n\tTXCS_SELECT_QUEUE3\t= 0x00030000,\n\tTXCS_SELECT_QUEUE4\t= 0x00040000,\n\tTXCS_SELECT_QUEUE5\t= 0x00050000,\n\tTXCS_SELECT_QUEUE6\t= 0x00060000,\n\tTXCS_SELECT_QUEUE7\t= 0x00070000,\n\n\tTXCS_DEFAULT\t\t= TXCS_FIFOTH_4QW |\n\t\t\t\t  TXCS_BURST,\n};\n\n#define JME_TX_DISABLE_TIMEOUT 10  \n\n \nenum jme_txmcs_bit_masks {\n\tTXMCS_IFG2\t\t= 0xC0000000,\n\tTXMCS_IFG1\t\t= 0x30000000,\n\tTXMCS_TTHOLD\t\t= 0x00000300,\n\tTXMCS_FBURST\t\t= 0x00000080,\n\tTXMCS_CARRIEREXT\t= 0x00000040,\n\tTXMCS_DEFER\t\t= 0x00000020,\n\tTXMCS_BACKOFF\t\t= 0x00000010,\n\tTXMCS_CARRIERSENSE\t= 0x00000008,\n\tTXMCS_COLLISION\t\t= 0x00000004,\n\tTXMCS_CRC\t\t= 0x00000002,\n\tTXMCS_PADDING\t\t= 0x00000001,\n};\n\nenum jme_txmcs_values {\n\tTXMCS_IFG2_6_4\t\t= 0x00000000,\n\tTXMCS_IFG2_8_5\t\t= 0x40000000,\n\tTXMCS_IFG2_10_6\t\t= 0x80000000,\n\tTXMCS_IFG2_12_7\t\t= 0xC0000000,\n\n\tTXMCS_IFG1_8_4\t\t= 0x00000000,\n\tTXMCS_IFG1_12_6\t\t= 0x10000000,\n\tTXMCS_IFG1_16_8\t\t= 0x20000000,\n\tTXMCS_IFG1_20_10\t= 0x30000000,\n\n\tTXMCS_TTHOLD_1_8\t= 0x00000000,\n\tTXMCS_TTHOLD_1_4\t= 0x00000100,\n\tTXMCS_TTHOLD_1_2\t= 0x00000200,\n\tTXMCS_TTHOLD_FULL\t= 0x00000300,\n\n\tTXMCS_DEFAULT\t\t= TXMCS_IFG2_8_5 |\n\t\t\t\t  TXMCS_IFG1_16_8 |\n\t\t\t\t  TXMCS_TTHOLD_FULL |\n\t\t\t\t  TXMCS_DEFER |\n\t\t\t\t  TXMCS_CRC |\n\t\t\t\t  TXMCS_PADDING,\n};\n\nenum jme_txpfc_bits_masks {\n\tTXPFC_VLAN_TAG\t\t= 0xFFFF0000,\n\tTXPFC_VLAN_EN\t\t= 0x00008000,\n\tTXPFC_PF_EN\t\t= 0x00000001,\n};\n\nenum jme_txtrhd_bits_masks {\n\tTXTRHD_TXPEN\t\t= 0x80000000,\n\tTXTRHD_TXP\t\t= 0x7FFFFF00,\n\tTXTRHD_TXREN\t\t= 0x00000080,\n\tTXTRHD_TXRL\t\t= 0x0000007F,\n};\n\nenum jme_txtrhd_shifts {\n\tTXTRHD_TXP_SHIFT\t= 8,\n\tTXTRHD_TXRL_SHIFT\t= 0,\n};\n\nenum jme_txtrhd_values {\n\tTXTRHD_FULLDUPLEX\t= 0x00000000,\n\tTXTRHD_HALFDUPLEX\t= TXTRHD_TXPEN |\n\t\t\t\t  ((0x2000 << TXTRHD_TXP_SHIFT) & TXTRHD_TXP) |\n\t\t\t\t  TXTRHD_TXREN |\n\t\t\t\t  ((8 << TXTRHD_TXRL_SHIFT) & TXTRHD_TXRL),\n};\n\n \nenum jme_rxcs_bit_masks {\n\t \n\tRXCS_FIFOTHTP\t= 0x30000000,\n\t \n\tRXCS_FIFOTHNP\t= 0x0C000000,\n\tRXCS_DMAREQSZ\t= 0x03000000,  \n\tRXCS_QUEUESEL\t= 0x00030000,  \n\tRXCS_RETRYGAP\t= 0x0000F000,  \n\tRXCS_RETRYCNT\t= 0x00000F00,  \n\tRXCS_WAKEUP\t= 0x00000040,  \n\tRXCS_MAGIC\t= 0x00000020,  \n\tRXCS_SHORT\t= 0x00000010,  \n\tRXCS_ABORT\t= 0x00000008,  \n\tRXCS_QST\t= 0x00000004,  \n\tRXCS_SUSPEND\t= 0x00000002,\n\tRXCS_ENABLE\t= 0x00000001,\n};\n\nenum jme_rxcs_values {\n\tRXCS_FIFOTHTP_16T\t= 0x00000000,\n\tRXCS_FIFOTHTP_32T\t= 0x10000000,\n\tRXCS_FIFOTHTP_64T\t= 0x20000000,\n\tRXCS_FIFOTHTP_128T\t= 0x30000000,\n\n\tRXCS_FIFOTHNP_16QW\t= 0x00000000,\n\tRXCS_FIFOTHNP_32QW\t= 0x04000000,\n\tRXCS_FIFOTHNP_64QW\t= 0x08000000,\n\tRXCS_FIFOTHNP_128QW\t= 0x0C000000,\n\n\tRXCS_DMAREQSZ_16B\t= 0x00000000,\n\tRXCS_DMAREQSZ_32B\t= 0x01000000,\n\tRXCS_DMAREQSZ_64B\t= 0x02000000,\n\tRXCS_DMAREQSZ_128B\t= 0x03000000,\n\n\tRXCS_QUEUESEL_Q0\t= 0x00000000,\n\tRXCS_QUEUESEL_Q1\t= 0x00010000,\n\tRXCS_QUEUESEL_Q2\t= 0x00020000,\n\tRXCS_QUEUESEL_Q3\t= 0x00030000,\n\n\tRXCS_RETRYGAP_256ns\t= 0x00000000,\n\tRXCS_RETRYGAP_512ns\t= 0x00001000,\n\tRXCS_RETRYGAP_1024ns\t= 0x00002000,\n\tRXCS_RETRYGAP_2048ns\t= 0x00003000,\n\tRXCS_RETRYGAP_4096ns\t= 0x00004000,\n\tRXCS_RETRYGAP_8192ns\t= 0x00005000,\n\tRXCS_RETRYGAP_16384ns\t= 0x00006000,\n\tRXCS_RETRYGAP_32768ns\t= 0x00007000,\n\n\tRXCS_RETRYCNT_0\t\t= 0x00000000,\n\tRXCS_RETRYCNT_4\t\t= 0x00000100,\n\tRXCS_RETRYCNT_8\t\t= 0x00000200,\n\tRXCS_RETRYCNT_12\t= 0x00000300,\n\tRXCS_RETRYCNT_16\t= 0x00000400,\n\tRXCS_RETRYCNT_20\t= 0x00000500,\n\tRXCS_RETRYCNT_24\t= 0x00000600,\n\tRXCS_RETRYCNT_28\t= 0x00000700,\n\tRXCS_RETRYCNT_32\t= 0x00000800,\n\tRXCS_RETRYCNT_36\t= 0x00000900,\n\tRXCS_RETRYCNT_40\t= 0x00000A00,\n\tRXCS_RETRYCNT_44\t= 0x00000B00,\n\tRXCS_RETRYCNT_48\t= 0x00000C00,\n\tRXCS_RETRYCNT_52\t= 0x00000D00,\n\tRXCS_RETRYCNT_56\t= 0x00000E00,\n\tRXCS_RETRYCNT_60\t= 0x00000F00,\n\n\tRXCS_DEFAULT\t\t= RXCS_FIFOTHTP_128T |\n\t\t\t\t  RXCS_FIFOTHNP_16QW |\n\t\t\t\t  RXCS_DMAREQSZ_128B |\n\t\t\t\t  RXCS_RETRYGAP_256ns |\n\t\t\t\t  RXCS_RETRYCNT_32,\n};\n\n#define JME_RX_DISABLE_TIMEOUT 10  \n\n \nenum jme_rxmcs_bits {\n\tRXMCS_ALLFRAME\t\t= 0x00000800,\n\tRXMCS_BRDFRAME\t\t= 0x00000400,\n\tRXMCS_MULFRAME\t\t= 0x00000200,\n\tRXMCS_UNIFRAME\t\t= 0x00000100,\n\tRXMCS_ALLMULFRAME\t= 0x00000080,\n\tRXMCS_MULFILTERED\t= 0x00000040,\n\tRXMCS_RXCOLLDEC\t\t= 0x00000020,\n\tRXMCS_FLOWCTRL\t\t= 0x00000008,\n\tRXMCS_VTAGRM\t\t= 0x00000004,\n\tRXMCS_PREPAD\t\t= 0x00000002,\n\tRXMCS_CHECKSUM\t\t= 0x00000001,\n\n\tRXMCS_DEFAULT\t\t= RXMCS_VTAGRM |\n\t\t\t\t  RXMCS_PREPAD |\n\t\t\t\t  RXMCS_FLOWCTRL |\n\t\t\t\t  RXMCS_CHECKSUM,\n};\n\n \n\n#define PHY_GAD_TEST_MODE_1\t\t\t0x00002000\n#define PHY_GAD_TEST_MODE_MSK\t\t\t0x0000E000\n#define JM_PHY_SPEC_REG_READ\t\t\t0x00004000\n#define JM_PHY_SPEC_REG_WRITE\t\t\t0x00008000\n#define PHY_CALIBRATION_DELAY\t\t\t20\n#define JM_PHY_SPEC_ADDR_REG\t\t\t0x1E\n#define JM_PHY_SPEC_DATA_REG\t\t\t0x1F\n\n#define JM_PHY_EXT_COMM_0_REG\t\t\t0x30\n#define JM_PHY_EXT_COMM_1_REG\t\t\t0x31\n#define JM_PHY_EXT_COMM_2_REG\t\t\t0x32\n#define JM_PHY_EXT_COMM_2_CALI_ENABLE\t\t0x01\n#define JM_PHY_EXT_COMM_2_CALI_MODE_0\t\t0x02\n#define JM_PHY_EXT_COMM_2_CALI_LATCH\t\t0x10\n#define PCI_PRIV_SHARE_NICCTRL\t\t\t0xF5\n#define JME_FLAG_PHYEA_ENABLE\t\t\t0x2\n\n \n#define WAKEUP_FRAME_NR\t8\n#define WAKEUP_FRAME_MASK_DWNR\t4\n\nenum jme_wfoi_bit_masks {\n\tWFOI_MASK_SEL\t\t= 0x00000070,\n\tWFOI_CRC_SEL\t\t= 0x00000008,\n\tWFOI_FRAME_SEL\t\t= 0x00000007,\n};\n\nenum jme_wfoi_shifts {\n\tWFOI_MASK_SHIFT\t\t= 4,\n};\n\n \nenum jme_smi_bit_mask {\n\tSMI_DATA_MASK\t\t= 0xFFFF0000,\n\tSMI_REG_ADDR_MASK\t= 0x0000F800,\n\tSMI_PHY_ADDR_MASK\t= 0x000007C0,\n\tSMI_OP_WRITE\t\t= 0x00000020,\n\t \n\tSMI_OP_REQ\t\t= 0x00000010,\n\tSMI_OP_MDIO\t\t= 0x00000008,  \n\tSMI_OP_MDOE\t\t= 0x00000004,  \n\tSMI_OP_MDC\t\t= 0x00000002,  \n\tSMI_OP_MDEN\t\t= 0x00000001,  \n};\n\nenum jme_smi_bit_shift {\n\tSMI_DATA_SHIFT\t\t= 16,\n\tSMI_REG_ADDR_SHIFT\t= 11,\n\tSMI_PHY_ADDR_SHIFT\t= 6,\n};\n\nstatic inline u32 smi_reg_addr(int x)\n{\n\treturn (x << SMI_REG_ADDR_SHIFT) & SMI_REG_ADDR_MASK;\n}\n\nstatic inline u32 smi_phy_addr(int x)\n{\n\treturn (x << SMI_PHY_ADDR_SHIFT) & SMI_PHY_ADDR_MASK;\n}\n\n#define JME_PHY_TIMEOUT 100  \n#define JME_PHY_REG_NR 32\n\n \nenum jme_ghc_bit_mask {\n\tGHC_SWRST\t\t= 0x40000000,\n\tGHC_TO_CLK_SRC\t\t= 0x00C00000,\n\tGHC_TXMAC_CLK_SRC\t= 0x00300000,\n\tGHC_DPX\t\t\t= 0x00000040,\n\tGHC_SPEED\t\t= 0x00000030,\n\tGHC_LINK_POLL\t\t= 0x00000001,\n};\n\nenum jme_ghc_speed_val {\n\tGHC_SPEED_10M\t\t= 0x00000010,\n\tGHC_SPEED_100M\t\t= 0x00000020,\n\tGHC_SPEED_1000M\t\t= 0x00000030,\n};\n\nenum jme_ghc_to_clk {\n\tGHC_TO_CLK_OFF\t\t= 0x00000000,\n\tGHC_TO_CLK_GPHY\t\t= 0x00400000,\n\tGHC_TO_CLK_PCIE\t\t= 0x00800000,\n\tGHC_TO_CLK_INVALID\t= 0x00C00000,\n};\n\nenum jme_ghc_txmac_clk {\n\tGHC_TXMAC_CLK_OFF\t= 0x00000000,\n\tGHC_TXMAC_CLK_GPHY\t= 0x00100000,\n\tGHC_TXMAC_CLK_PCIE\t= 0x00200000,\n\tGHC_TXMAC_CLK_INVALID\t= 0x00300000,\n};\n\n \nenum jme_pmcs_bit_masks {\n\tPMCS_STMASK\t= 0xFFFF0000,\n\tPMCS_WF7DET\t= 0x80000000,\n\tPMCS_WF6DET\t= 0x40000000,\n\tPMCS_WF5DET\t= 0x20000000,\n\tPMCS_WF4DET\t= 0x10000000,\n\tPMCS_WF3DET\t= 0x08000000,\n\tPMCS_WF2DET\t= 0x04000000,\n\tPMCS_WF1DET\t= 0x02000000,\n\tPMCS_WF0DET\t= 0x01000000,\n\tPMCS_LFDET\t= 0x00040000,\n\tPMCS_LRDET\t= 0x00020000,\n\tPMCS_MFDET\t= 0x00010000,\n\tPMCS_ENMASK\t= 0x0000FFFF,\n\tPMCS_WF7EN\t= 0x00008000,\n\tPMCS_WF6EN\t= 0x00004000,\n\tPMCS_WF5EN\t= 0x00002000,\n\tPMCS_WF4EN\t= 0x00001000,\n\tPMCS_WF3EN\t= 0x00000800,\n\tPMCS_WF2EN\t= 0x00000400,\n\tPMCS_WF1EN\t= 0x00000200,\n\tPMCS_WF0EN\t= 0x00000100,\n\tPMCS_LFEN\t= 0x00000004,\n\tPMCS_LREN\t= 0x00000002,\n\tPMCS_MFEN\t= 0x00000001,\n};\n\n \nenum jme_phy_pwr_bit_masks {\n\tPHY_PWR_DWN1SEL\t= 0x01000000,  \n\tPHY_PWR_DWN1SW\t= 0x02000000,  \n\tPHY_PWR_DWN2\t= 0x04000000,  \n\tPHY_PWR_CLKSEL\t= 0x08000000,  \n};\n\n \nenum jme_phy_link_bit_mask {\n\tPHY_LINK_SPEED_MASK\t\t= 0x0000C000,\n\tPHY_LINK_DUPLEX\t\t\t= 0x00002000,\n\tPHY_LINK_SPEEDDPU_RESOLVED\t= 0x00000800,\n\tPHY_LINK_UP\t\t\t= 0x00000400,\n\tPHY_LINK_AUTONEG_COMPLETE\t= 0x00000200,\n\tPHY_LINK_MDI_STAT\t\t= 0x00000040,\n};\n\nenum jme_phy_link_speed_val {\n\tPHY_LINK_SPEED_10M\t\t= 0x00000000,\n\tPHY_LINK_SPEED_100M\t\t= 0x00004000,\n\tPHY_LINK_SPEED_1000M\t\t= 0x00008000,\n};\n\n#define JME_SPDRSV_TIMEOUT\t500\t \n\n \nenum jme_smbcsr_bit_mask {\n\tSMBCSR_CNACK\t= 0x00020000,\n\tSMBCSR_RELOAD\t= 0x00010000,\n\tSMBCSR_EEPROMD\t= 0x00000020,\n\tSMBCSR_INITDONE\t= 0x00000010,\n\tSMBCSR_BUSY\t= 0x0000000F,\n};\n\nenum jme_smbintf_bit_mask {\n\tSMBINTF_HWDATR\t= 0xFF000000,\n\tSMBINTF_HWDATW\t= 0x00FF0000,\n\tSMBINTF_HWADDR\t= 0x0000FF00,\n\tSMBINTF_HWRWN\t= 0x00000020,\n\tSMBINTF_HWCMD\t= 0x00000010,\n\tSMBINTF_FASTM\t= 0x00000008,\n\tSMBINTF_GPIOSCL\t= 0x00000004,\n\tSMBINTF_GPIOSDA\t= 0x00000002,\n\tSMBINTF_GPIOEN\t= 0x00000001,\n};\n\nenum jme_smbintf_vals {\n\tSMBINTF_HWRWN_READ\t= 0x00000020,\n\tSMBINTF_HWRWN_WRITE\t= 0x00000000,\n};\n\nenum jme_smbintf_shifts {\n\tSMBINTF_HWDATR_SHIFT\t= 24,\n\tSMBINTF_HWDATW_SHIFT\t= 16,\n\tSMBINTF_HWADDR_SHIFT\t= 8,\n};\n\n#define JME_EEPROM_RELOAD_TIMEOUT 2000  \n#define JME_SMB_BUSY_TIMEOUT 20  \n#define JME_SMB_LEN 256\n#define JME_EEPROM_MAGIC 0x250\n\n \nenum jme_tmcsr_bit_masks {\n\tTMCSR_SWIT\t= 0x80000000,\n\tTMCSR_EN\t= 0x01000000,\n\tTMCSR_CNT\t= 0x00FFFFFF,\n};\n\n \nenum jme_gpreg0_masks {\n\tGPREG0_DISSH\t\t= 0xFF000000,\n\tGPREG0_PCIRLMT\t\t= 0x00300000,\n\tGPREG0_PCCNOMUTCLR\t= 0x00040000,\n\tGPREG0_LNKINTPOLL\t= 0x00001000,\n\tGPREG0_PCCTMR\t\t= 0x00000300,\n\tGPREG0_PHYADDR\t\t= 0x0000001F,\n};\n\nenum jme_gpreg0_vals {\n\tGPREG0_DISSH_DW7\t= 0x80000000,\n\tGPREG0_DISSH_DW6\t= 0x40000000,\n\tGPREG0_DISSH_DW5\t= 0x20000000,\n\tGPREG0_DISSH_DW4\t= 0x10000000,\n\tGPREG0_DISSH_DW3\t= 0x08000000,\n\tGPREG0_DISSH_DW2\t= 0x04000000,\n\tGPREG0_DISSH_DW1\t= 0x02000000,\n\tGPREG0_DISSH_DW0\t= 0x01000000,\n\tGPREG0_DISSH_ALL\t= 0xFF000000,\n\n\tGPREG0_PCIRLMT_8\t= 0x00000000,\n\tGPREG0_PCIRLMT_6\t= 0x00100000,\n\tGPREG0_PCIRLMT_5\t= 0x00200000,\n\tGPREG0_PCIRLMT_4\t= 0x00300000,\n\n\tGPREG0_PCCTMR_16ns\t= 0x00000000,\n\tGPREG0_PCCTMR_256ns\t= 0x00000100,\n\tGPREG0_PCCTMR_1us\t= 0x00000200,\n\tGPREG0_PCCTMR_1ms\t= 0x00000300,\n\n\tGPREG0_PHYADDR_1\t= 0x00000001,\n\n\tGPREG0_DEFAULT\t\t= GPREG0_PCIRLMT_4 |\n\t\t\t\t  GPREG0_PCCTMR_1us |\n\t\t\t\t  GPREG0_PHYADDR_1,\n};\n\n \nenum jme_gpreg1_bit_masks {\n\tGPREG1_RXCLKOFF\t\t= 0x04000000,\n\tGPREG1_PCREQN\t\t= 0x00020000,\n\tGPREG1_HALFMODEPATCH\t= 0x00000040,  \n\tGPREG1_RSSPATCH\t\t= 0x00000020,  \n\tGPREG1_INTRDELAYUNIT\t= 0x00000018,\n\tGPREG1_INTRDELAYENABLE\t= 0x00000007,\n};\n\nenum jme_gpreg1_vals {\n\tGPREG1_INTDLYUNIT_16NS\t= 0x00000000,\n\tGPREG1_INTDLYUNIT_256NS\t= 0x00000008,\n\tGPREG1_INTDLYUNIT_1US\t= 0x00000010,\n\tGPREG1_INTDLYUNIT_16US\t= 0x00000018,\n\n\tGPREG1_INTDLYEN_1U\t= 0x00000001,\n\tGPREG1_INTDLYEN_2U\t= 0x00000002,\n\tGPREG1_INTDLYEN_3U\t= 0x00000003,\n\tGPREG1_INTDLYEN_4U\t= 0x00000004,\n\tGPREG1_INTDLYEN_5U\t= 0x00000005,\n\tGPREG1_INTDLYEN_6U\t= 0x00000006,\n\tGPREG1_INTDLYEN_7U\t= 0x00000007,\n\n\tGPREG1_DEFAULT\t\t= GPREG1_PCREQN,\n};\n\n \nenum jme_interrupt_bits {\n\tINTR_SWINTR\t= 0x80000000,\n\tINTR_TMINTR\t= 0x40000000,\n\tINTR_LINKCH\t= 0x20000000,\n\tINTR_PAUSERCV\t= 0x10000000,\n\tINTR_MAGICRCV\t= 0x08000000,\n\tINTR_WAKERCV\t= 0x04000000,\n\tINTR_PCCRX0TO\t= 0x02000000,\n\tINTR_PCCRX1TO\t= 0x01000000,\n\tINTR_PCCRX2TO\t= 0x00800000,\n\tINTR_PCCRX3TO\t= 0x00400000,\n\tINTR_PCCTXTO\t= 0x00200000,\n\tINTR_PCCRX0\t= 0x00100000,\n\tINTR_PCCRX1\t= 0x00080000,\n\tINTR_PCCRX2\t= 0x00040000,\n\tINTR_PCCRX3\t= 0x00020000,\n\tINTR_PCCTX\t= 0x00010000,\n\tINTR_RX3EMP\t= 0x00008000,\n\tINTR_RX2EMP\t= 0x00004000,\n\tINTR_RX1EMP\t= 0x00002000,\n\tINTR_RX0EMP\t= 0x00001000,\n\tINTR_RX3\t= 0x00000800,\n\tINTR_RX2\t= 0x00000400,\n\tINTR_RX1\t= 0x00000200,\n\tINTR_RX0\t= 0x00000100,\n\tINTR_TX7\t= 0x00000080,\n\tINTR_TX6\t= 0x00000040,\n\tINTR_TX5\t= 0x00000020,\n\tINTR_TX4\t= 0x00000010,\n\tINTR_TX3\t= 0x00000008,\n\tINTR_TX2\t= 0x00000004,\n\tINTR_TX1\t= 0x00000002,\n\tINTR_TX0\t= 0x00000001,\n};\n\nstatic const u32 INTR_ENABLE = INTR_SWINTR |\n\t\t\t\t INTR_TMINTR |\n\t\t\t\t INTR_LINKCH |\n\t\t\t\t INTR_PCCRX0TO |\n\t\t\t\t INTR_PCCRX0 |\n\t\t\t\t INTR_PCCTXTO |\n\t\t\t\t INTR_PCCTX |\n\t\t\t\t INTR_RX0EMP;\n\n \nenum jme_pccrx_masks {\n\tPCCRXTO_MASK\t= 0xFFFF0000,\n\tPCCRX_MASK\t= 0x0000FF00,\n};\n\nenum jme_pcctx_masks {\n\tPCCTXTO_MASK\t= 0xFFFF0000,\n\tPCCTX_MASK\t= 0x0000FF00,\n\tPCCTX_QS_MASK\t= 0x000000FF,\n};\n\nenum jme_pccrx_shifts {\n\tPCCRXTO_SHIFT\t= 16,\n\tPCCRX_SHIFT\t= 8,\n};\n\nenum jme_pcctx_shifts {\n\tPCCTXTO_SHIFT\t= 16,\n\tPCCTX_SHIFT\t= 8,\n};\n\nenum jme_pcctx_bits {\n\tPCCTXQ0_EN\t= 0x00000001,\n\tPCCTXQ1_EN\t= 0x00000002,\n\tPCCTXQ2_EN\t= 0x00000004,\n\tPCCTXQ3_EN\t= 0x00000008,\n\tPCCTXQ4_EN\t= 0x00000010,\n\tPCCTXQ5_EN\t= 0x00000020,\n\tPCCTXQ6_EN\t= 0x00000040,\n\tPCCTXQ7_EN\t= 0x00000080,\n};\n\n \nenum jme_chipmode_bit_masks {\n\tCM_FPGAVER_MASK\t\t= 0xFFFF0000,\n\tCM_CHIPREV_MASK\t\t= 0x0000FF00,\n\tCM_CHIPMODE_MASK\t= 0x0000000F,\n};\n\nenum jme_chipmode_shifts {\n\tCM_FPGAVER_SHIFT\t= 16,\n\tCM_CHIPREV_SHIFT\t= 8,\n};\n\n \nenum jme_apmc_bits {\n\tJME_APMC_PCIE_SD_EN\t= 0x40000000,\n\tJME_APMC_PSEUDO_HP_EN\t= 0x20000000,\n\tJME_APMC_EPIEN\t\t= 0x04000000,\n\tJME_APMC_EPIEN_CTRL\t= 0x03000000,\n};\n\nenum jme_apmc_values {\n\tJME_APMC_EPIEN_CTRL_EN\t= 0x02000000,\n\tJME_APMC_EPIEN_CTRL_DIS\t= 0x01000000,\n};\n\n#define APMC_PHP_SHUTDOWN_DELAY\t(10 * 1000 * 1000)\n\n#ifdef REG_DEBUG\nstatic char *MAC_REG_NAME[] = {\n\t\"JME_TXCS\",      \"JME_TXDBA_LO\",  \"JME_TXDBA_HI\", \"JME_TXQDC\",\n\t\"JME_TXNDA\",     \"JME_TXMCS\",     \"JME_TXPFC\",    \"JME_TXTRHD\",\n\t\"JME_RXCS\",      \"JME_RXDBA_LO\",  \"JME_RXDBA_HI\", \"JME_RXQDC\",\n\t\"JME_RXNDA\",     \"JME_RXMCS\",     \"JME_RXUMA_LO\", \"JME_RXUMA_HI\",\n\t\"JME_RXMCHT_LO\", \"JME_RXMCHT_HI\", \"JME_WFODP\",    \"JME_WFOI\",\n\t\"JME_SMI\",       \"JME_GHC\",       \"UNKNOWN\",      \"UNKNOWN\",\n\t\"JME_PMCS\"};\n\nstatic char *PE_REG_NAME[] = {\n\t\"UNKNOWN\",      \"UNKNOWN\",     \"UNKNOWN\",    \"UNKNOWN\",\n\t\"UNKNOWN\",      \"UNKNOWN\",     \"UNKNOWN\",    \"UNKNOWN\",\n\t\"UNKNOWN\",      \"UNKNOWN\",     \"JME_PHY_CS\", \"UNKNOWN\",\n\t\"JME_PHY_LINK\", \"UNKNOWN\",     \"UNKNOWN\",    \"UNKNOWN\",\n\t\"JME_SMBCSR\",   \"JME_SMBINTF\"};\n\nstatic char *MISC_REG_NAME[] = {\n\t\"JME_TMCSR\",  \"JME_GPIO\",     \"JME_GPREG0\",  \"JME_GPREG1\",\n\t\"JME_IEVE\",   \"JME_IREQ\",     \"JME_IENS\",    \"JME_IENC\",\n\t\"JME_PCCRX0\", \"JME_PCCRX1\",   \"JME_PCCRX2\",  \"JME_PCCRX3\",\n\t\"JME_PCCTX0\", \"JME_CHIPMODE\", \"JME_SHBA_HI\", \"JME_SHBA_LO\",\n\t\"UNKNOWN\",    \"UNKNOWN\",      \"UNKNOWN\",     \"UNKNOWN\",\n\t\"UNKNOWN\",    \"UNKNOWN\",      \"UNKNOWN\",     \"UNKNOWN\",\n\t\"UNKNOWN\",    \"UNKNOWN\",      \"UNKNOWN\",     \"UNKNOWN\",\n\t\"JME_TIMER1\", \"JME_TIMER2\",   \"UNKNOWN\",     \"JME_APMC\",\n\t\"JME_PCCSRX0\"};\n\nstatic inline void reg_dbg(const struct jme_adapter *jme,\n\t\tconst char *msg, u32 val, u32 reg)\n{\n\tconst char *regname;\n\tswitch (reg & 0xF00) {\n\tcase 0x000:\n\t\tregname = MAC_REG_NAME[(reg & 0xFF) >> 2];\n\t\tbreak;\n\tcase 0x400:\n\t\tregname = PE_REG_NAME[(reg & 0xFF) >> 2];\n\t\tbreak;\n\tcase 0x800:\n\t\tregname = MISC_REG_NAME[(reg & 0xFF) >> 2];\n\t\tbreak;\n\tdefault:\n\t\tregname = PE_REG_NAME[0];\n\t}\n\tprintk(KERN_DEBUG \"%s: %-20s %08x@%s\\n\", jme->dev->name,\n\t\t\tmsg, val, regname);\n}\n#else\nstatic inline void reg_dbg(const struct jme_adapter *jme,\n\t\tconst char *msg, u32 val, u32 reg) {}\n#endif\n\n \nstatic inline u32 jread32(struct jme_adapter *jme, u32 reg)\n{\n\treturn readl(jme->regs + reg);\n}\n\nstatic inline void jwrite32(struct jme_adapter *jme, u32 reg, u32 val)\n{\n\treg_dbg(jme, \"REG WRITE\", val, reg);\n\twritel(val, jme->regs + reg);\n\treg_dbg(jme, \"VAL AFTER WRITE\", readl(jme->regs + reg), reg);\n}\n\nstatic inline void jwrite32f(struct jme_adapter *jme, u32 reg, u32 val)\n{\n\t \n\treg_dbg(jme, \"REG WRITE FLUSH\", val, reg);\n\twritel(val, jme->regs + reg);\n\treadl(jme->regs + reg);\n\treg_dbg(jme, \"VAL AFTER WRITE\", readl(jme->regs + reg), reg);\n}\n\n \nenum jme_phy_reg17_bit_masks {\n\tPREG17_SPEED\t\t= 0xC000,\n\tPREG17_DUPLEX\t\t= 0x2000,\n\tPREG17_SPDRSV\t\t= 0x0800,\n\tPREG17_LNKUP\t\t= 0x0400,\n\tPREG17_MDI\t\t= 0x0040,\n};\n\nenum jme_phy_reg17_vals {\n\tPREG17_SPEED_10M\t= 0x0000,\n\tPREG17_SPEED_100M\t= 0x4000,\n\tPREG17_SPEED_1000M\t= 0x8000,\n};\n\n#define BMSR_ANCOMP               0x0020\n\n \nstatic inline int is_buggy250(unsigned short device, u8 chiprev)\n{\n\treturn device == PCI_DEVICE_ID_JMICRON_JMC250 && chiprev == 0x11;\n}\n\nstatic inline int new_phy_power_ctrl(u8 chip_main_rev)\n{\n\treturn chip_main_rev >= 5;\n}\n\n \nstatic int jme_set_link_ksettings(struct net_device *netdev,\n\t\t\t\t  const struct ethtool_link_ksettings *cmd);\nstatic void jme_set_unicastaddr(struct net_device *netdev);\nstatic void jme_set_multi(struct net_device *netdev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}