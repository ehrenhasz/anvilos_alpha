{
  "module_name": "dpaa_eth.h",
  "hash_id": "cfd8ba6b9ae3ddf39101dc397dec24aea92db5e607b1c7c8353bef6d476d2ae2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/freescale/dpaa/dpaa_eth.h",
  "human_readable_source": " \n \n\n#ifndef __DPAA_H\n#define __DPAA_H\n\n#include <linux/netdevice.h>\n#include <linux/refcount.h>\n#include <net/xdp.h>\n#include <soc/fsl/qman.h>\n#include <soc/fsl/bman.h>\n\n#include \"fman.h\"\n#include \"mac.h\"\n#include \"dpaa_eth_trace.h\"\n\n \n#define DPAA_TC_NUM\t\t4\n \n#define DPAA_TC_TXQ_NUM\t\tNR_CPUS\n \n#define DPAA_ETH_TXQ_NUM\t(DPAA_TC_NUM * DPAA_TC_TXQ_NUM)\n\n \nenum dpaa_fq_type {\n\tFQ_TYPE_RX_DEFAULT = 1,  \n\tFQ_TYPE_RX_ERROR,\t \n\tFQ_TYPE_RX_PCD,\t\t \n\tFQ_TYPE_TX,\t\t \n\tFQ_TYPE_TX_CONFIRM,\t \n\tFQ_TYPE_TX_CONF_MQ,\t \n\tFQ_TYPE_TX_ERROR,\t \n};\n\nstruct dpaa_fq {\n\tstruct qman_fq fq_base;\n\tstruct list_head list;\n\tstruct net_device *net_dev;\n\tbool init;\n\tu32 fqid;\n\tu32 flags;\n\tu16 channel;\n\tu8 wq;\n\tenum dpaa_fq_type fq_type;\n\tstruct xdp_rxq_info xdp_rxq;\n};\n\nstruct dpaa_fq_cbs {\n\tstruct qman_fq rx_defq;\n\tstruct qman_fq tx_defq;\n\tstruct qman_fq rx_errq;\n\tstruct qman_fq tx_errq;\n\tstruct qman_fq egress_ern;\n};\n\nstruct dpaa_priv;\n\nstruct dpaa_bp {\n\t \n\tstruct dpaa_priv *priv;\n\t \n\tint __percpu *percpu_count;\n\t \n\tsize_t raw_size;\n\t \n\tsize_t size;\n\t \n\tu16 config_count;\n\tu8 bpid;\n\tstruct bman_pool *pool;\n\t \n\tint (*seed_cb)(struct dpaa_bp *);\n\t \n\tvoid (*free_buf_cb)(const struct dpaa_bp *, struct bm_buffer *);\n\trefcount_t refs;\n};\n\nstruct dpaa_rx_errors {\n\tu64 dme;\t\t \n\tu64 fpe;\t\t \n\tu64 fse;\t\t \n\tu64 phe;\t\t \n};\n\n \nstruct dpaa_ern_cnt {\n\tu64 cg_tdrop;\t\t \n\tu64 wred;\t\t \n\tu64 err_cond;\t\t \n\tu64 early_window;\t \n\tu64 late_window;\t \n\tu64 fq_tdrop;\t\t \n\tu64 fq_retired;\t\t \n\tu64 orp_zero;\t\t \n};\n\nstruct dpaa_napi_portal {\n\tstruct napi_struct napi;\n\tstruct qman_portal *p;\n\tbool down;\n\tint xdp_act;\n};\n\nstruct dpaa_percpu_priv {\n\tstruct net_device *net_dev;\n\tstruct dpaa_napi_portal np;\n\tu64 in_interrupt;\n\tu64 tx_confirm;\n\t \n\tu64 tx_frag_skbuffs;\n\tstruct rtnl_link_stats64 stats;\n\tstruct dpaa_rx_errors rx_errors;\n\tstruct dpaa_ern_cnt ern_cnt;\n};\n\nstruct dpaa_buffer_layout {\n\tu16 priv_data_size;\n};\n\n \nstruct dpaa_eth_swbp {\n\tstruct sk_buff *skb;\n\tstruct xdp_frame *xdpf;\n};\n\nstruct dpaa_priv {\n\tstruct dpaa_percpu_priv __percpu *percpu_priv;\n\tstruct dpaa_bp *dpaa_bp;\n\t \n\tu16 tx_headroom;\n\tstruct net_device *net_dev;\n\tstruct mac_device *mac_dev;\n\tstruct device *rx_dma_dev;\n\tstruct device *tx_dma_dev;\n\tstruct qman_fq *egress_fqs[DPAA_ETH_TXQ_NUM];\n\tstruct qman_fq *conf_fqs[DPAA_ETH_TXQ_NUM];\n\n\tu16 channel;\n\tstruct list_head dpaa_fq_list;\n\n\tu8 num_tc;\n\tbool keygen_in_use;\n\tu32 msg_enable;\t \n\n\tstruct {\n\t\t \n\t\tstruct qman_cgr cgr;\n\t\t \n\t\tu32 congestion_start_jiffies;\n\t\t \n\t\tu32 congested_jiffies;\n\t\t \n\t\tu32 cgr_congested_count;\n\t} cgr_data;\n\t \n\tbool use_ingress_cgr;\n\tstruct qman_cgr ingress_cgr;\n\n\tstruct dpaa_buffer_layout buf_layout[2];\n\tu16 rx_headroom;\n\n\tbool tx_tstamp;  \n\tbool rx_tstamp;  \n\n\tstruct bpf_prog *xdp_prog;\n};\n\n \nextern const struct ethtool_ops dpaa_ethtool_ops;\n\n \nvoid dpaa_eth_sysfs_remove(struct device *dev);\nvoid dpaa_eth_sysfs_init(struct device *dev);\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}