{
  "module_name": "dprtc.c",
  "hash_id": "f637ef7c3d9e909a9a641f3ed054d0d4f4dfb12eaac1c82eae26df4b0f76a058",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/freescale/dpaa2/dprtc.c",
  "human_readable_source": "\n \n\n#include <linux/fsl/mc.h>\n\n#include \"dprtc.h\"\n#include \"dprtc-cmd.h\"\n\n \nint dprtc_open(struct fsl_mc_io *mc_io,\n\t       u32 cmd_flags,\n\t       int dprtc_id,\n\t       u16 *token)\n{\n\tstruct dprtc_cmd_open *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_OPEN,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  0);\n\tcmd_params = (struct dprtc_cmd_open *)cmd.params;\n\tcmd_params->dprtc_id = cpu_to_le32(dprtc_id);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t*token = mc_cmd_hdr_read_token(&cmd);\n\n\treturn 0;\n}\n\n \nint dprtc_close(struct fsl_mc_io *mc_io,\n\t\tu32 cmd_flags,\n\t\tu16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_CLOSE, cmd_flags,\n\t\t\t\t\t  token);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dprtc_set_irq_enable(struct fsl_mc_io *mc_io,\n\t\t\t u32 cmd_flags,\n\t\t\t u16 token,\n\t\t\t u8 irq_index,\n\t\t\t u8 en)\n{\n\tstruct dprtc_cmd_set_irq_enable *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_SET_IRQ_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_set_irq_enable *)cmd.params;\n\tcmd_params->irq_index = irq_index;\n\tcmd_params->en = en;\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dprtc_get_irq_enable(struct fsl_mc_io *mc_io,\n\t\t\t u32 cmd_flags,\n\t\t\t u16 token,\n\t\t\t u8 irq_index,\n\t\t\t u8 *en)\n{\n\tstruct dprtc_rsp_get_irq_enable *rsp_params;\n\tstruct dprtc_cmd_get_irq *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_GET_IRQ_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_get_irq *)cmd.params;\n\tcmd_params->irq_index = irq_index;\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dprtc_rsp_get_irq_enable *)cmd.params;\n\t*en = rsp_params->en;\n\n\treturn 0;\n}\n\n \nint dprtc_set_irq_mask(struct fsl_mc_io *mc_io,\n\t\t       u32 cmd_flags,\n\t\t       u16 token,\n\t\t       u8 irq_index,\n\t\t       u32 mask)\n{\n\tstruct dprtc_cmd_set_irq_mask *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_SET_IRQ_MASK,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_set_irq_mask *)cmd.params;\n\tcmd_params->mask = cpu_to_le32(mask);\n\tcmd_params->irq_index = irq_index;\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dprtc_get_irq_mask(struct fsl_mc_io *mc_io,\n\t\t       u32 cmd_flags,\n\t\t       u16 token,\n\t\t       u8 irq_index,\n\t\t       u32 *mask)\n{\n\tstruct dprtc_rsp_get_irq_mask *rsp_params;\n\tstruct dprtc_cmd_get_irq *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_GET_IRQ_MASK,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_get_irq *)cmd.params;\n\tcmd_params->irq_index = irq_index;\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dprtc_rsp_get_irq_mask *)cmd.params;\n\t*mask = le32_to_cpu(rsp_params->mask);\n\n\treturn 0;\n}\n\n \nint dprtc_get_irq_status(struct fsl_mc_io *mc_io,\n\t\t\t u32 cmd_flags,\n\t\t\t u16 token,\n\t\t\t u8 irq_index,\n\t\t\t u32 *status)\n{\n\tstruct dprtc_cmd_get_irq_status *cmd_params;\n\tstruct dprtc_rsp_get_irq_status *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_GET_IRQ_STATUS,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_get_irq_status *)cmd.params;\n\tcmd_params->status = cpu_to_le32(*status);\n\tcmd_params->irq_index = irq_index;\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dprtc_rsp_get_irq_status *)cmd.params;\n\t*status = le32_to_cpu(rsp_params->status);\n\n\treturn 0;\n}\n\n \nint dprtc_clear_irq_status(struct fsl_mc_io *mc_io,\n\t\t\t   u32 cmd_flags,\n\t\t\t   u16 token,\n\t\t\t   u8 irq_index,\n\t\t\t   u32 status)\n{\n\tstruct dprtc_cmd_clear_irq_status *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPRTC_CMDID_CLEAR_IRQ_STATUS,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dprtc_cmd_clear_irq_status *)cmd.params;\n\tcmd_params->irq_index = irq_index;\n\tcmd_params->status = cpu_to_le32(status);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}