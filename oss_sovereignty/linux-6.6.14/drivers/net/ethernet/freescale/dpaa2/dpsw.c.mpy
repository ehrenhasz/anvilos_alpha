{
  "module_name": "dpsw.c",
  "hash_id": "ff910650bda1586cf254fa71b4ef864a3c6f92196a372419bfadfd27a6bf5b08",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/freescale/dpaa2/dpsw.c",
  "human_readable_source": "\n \n\n#include <linux/fsl/mc.h>\n#include \"dpsw.h\"\n#include \"dpsw-cmd.h\"\n\nstatic void build_if_id_bitmap(__le64 *bmap, const u16 *id, const u16 num_ifs)\n{\n\tint i;\n\n\tfor (i = 0; (i < num_ifs) && (i < DPSW_MAX_IF); i++) {\n\t\tif (id[i] < DPSW_MAX_IF)\n\t\t\tbmap[id[i] / 64] |= cpu_to_le64(BIT_MASK(id[i] % 64));\n\t}\n}\n\n \nint dpsw_open(struct fsl_mc_io *mc_io, u32 cmd_flags, int dpsw_id, u16 *token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_open *cmd_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_OPEN,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  0);\n\tcmd_params = (struct dpsw_cmd_open *)cmd.params;\n\tcmd_params->dpsw_id = cpu_to_le32(dpsw_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\t*token = mc_cmd_hdr_read_token(&cmd);\n\n\treturn 0;\n}\n\n \nint dpsw_close(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CLOSE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_enable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_disable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_DISABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_reset(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_RESET,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_set_irq_enable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\tu8 irq_index, u8 en)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_set_irq_enable *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_SET_IRQ_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_set_irq_enable *)cmd.params;\n\tdpsw_set_field(cmd_params->enable_state, ENABLE, en);\n\tcmd_params->irq_index = irq_index;\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_set_irq_mask(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t      u8 irq_index, u32 mask)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_set_irq_mask *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_SET_IRQ_MASK,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_set_irq_mask *)cmd.params;\n\tcmd_params->mask = cpu_to_le32(mask);\n\tcmd_params->irq_index = irq_index;\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_get_irq_status(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\tu8 irq_index, u32 *status)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_get_irq_status *cmd_params;\n\tstruct dpsw_rsp_get_irq_status *rsp_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_GET_IRQ_STATUS,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_get_irq_status *)cmd.params;\n\tcmd_params->status = cpu_to_le32(*status);\n\tcmd_params->irq_index = irq_index;\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_get_irq_status *)cmd.params;\n\t*status = le32_to_cpu(rsp_params->status);\n\n\treturn 0;\n}\n\n \nint dpsw_clear_irq_status(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t  u8 irq_index, u32 status)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_clear_irq_status *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CLEAR_IRQ_STATUS,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_clear_irq_status *)cmd.params;\n\tcmd_params->status = cpu_to_le32(status);\n\tcmd_params->irq_index = irq_index;\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_get_attributes(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\tstruct dpsw_attr *attr)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_rsp_get_attr *rsp_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_GET_ATTR,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_get_attr *)cmd.params;\n\tattr->num_ifs = le16_to_cpu(rsp_params->num_ifs);\n\tattr->max_fdbs = rsp_params->max_fdbs;\n\tattr->num_fdbs = rsp_params->num_fdbs;\n\tattr->max_vlans = le16_to_cpu(rsp_params->max_vlans);\n\tattr->num_vlans = le16_to_cpu(rsp_params->num_vlans);\n\tattr->max_fdb_entries = le16_to_cpu(rsp_params->max_fdb_entries);\n\tattr->fdb_aging_time = le16_to_cpu(rsp_params->fdb_aging_time);\n\tattr->id = le32_to_cpu(rsp_params->dpsw_id);\n\tattr->mem_size = le16_to_cpu(rsp_params->mem_size);\n\tattr->max_fdb_mc_groups = le16_to_cpu(rsp_params->max_fdb_mc_groups);\n\tattr->max_meters_per_if = rsp_params->max_meters_per_if;\n\tattr->options = le64_to_cpu(rsp_params->options);\n\tattr->component_type = dpsw_get_field(rsp_params->component_type, COMPONENT_TYPE);\n\tattr->flooding_cfg = dpsw_get_field(rsp_params->repl_cfg, FLOODING_CFG);\n\tattr->broadcast_cfg = dpsw_get_field(rsp_params->repl_cfg, BROADCAST_CFG);\n\treturn 0;\n}\n\n \nint dpsw_if_set_link_cfg(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id,\n\t\t\t struct dpsw_link_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_set_link_cfg *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_SET_LINK_CFG,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_set_link_cfg *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tcmd_params->rate = cpu_to_le32(cfg->rate);\n\tcmd_params->options = cpu_to_le64(cfg->options);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_get_link_state(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   u16 if_id, struct dpsw_link_state *state)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_get_link_state *cmd_params;\n\tstruct dpsw_rsp_if_get_link_state *rsp_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_GET_LINK_STATE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_get_link_state *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_if_get_link_state *)cmd.params;\n\tstate->rate = le32_to_cpu(rsp_params->rate);\n\tstate->options = le64_to_cpu(rsp_params->options);\n\tstate->up = dpsw_get_field(rsp_params->up, UP);\n\n\treturn 0;\n}\n\n \nint dpsw_if_set_tci(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id,\n\t\t    const struct dpsw_tci_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_set_tci *cmd_params;\n\tu16 tmp_conf = 0;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_SET_TCI,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_set_tci *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tdpsw_set_field(tmp_conf, VLAN_ID, cfg->vlan_id);\n\tdpsw_set_field(tmp_conf, DEI, cfg->dei);\n\tdpsw_set_field(tmp_conf, PCP, cfg->pcp);\n\tcmd_params->conf = cpu_to_le16(tmp_conf);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_get_tci(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id,\n\t\t    struct dpsw_tci_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_get_tci *cmd_params;\n\tstruct dpsw_rsp_if_get_tci *rsp_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_GET_TCI,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_get_tci *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_if_get_tci *)cmd.params;\n\tcfg->pcp = rsp_params->pcp;\n\tcfg->dei = rsp_params->dei;\n\tcfg->vlan_id = le16_to_cpu(rsp_params->vlan_id);\n\n\treturn 0;\n}\n\n \nint dpsw_if_set_stp(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id,\n\t\t    const struct dpsw_stp_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_set_stp *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_SET_STP,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_set_stp *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tcmd_params->vlan_id = cpu_to_le16(cfg->vlan_id);\n\tdpsw_set_field(cmd_params->state, STATE, cfg->state);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_get_counter(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\tu16 if_id, enum dpsw_counter type, u64 *counter)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_get_counter *cmd_params;\n\tstruct dpsw_rsp_if_get_counter *rsp_params;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_GET_COUNTER,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_get_counter *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tdpsw_set_field(cmd_params->type, COUNTER_TYPE, type);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_if_get_counter *)cmd.params;\n\t*counter = le64_to_cpu(rsp_params->counter);\n\n\treturn 0;\n}\n\n \nint dpsw_if_enable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_disable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 if_id)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_DISABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_get_attributes(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   u16 if_id, struct dpsw_if_attr *attr)\n{\n\tstruct dpsw_rsp_if_get_attr *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if *cmd_params;\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_GET_ATTR, cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_if_get_attr *)cmd.params;\n\tattr->num_tcs = rsp_params->num_tcs;\n\tattr->rate = le32_to_cpu(rsp_params->rate);\n\tattr->options = le32_to_cpu(rsp_params->options);\n\tattr->qdid = le16_to_cpu(rsp_params->qdid);\n\tattr->enabled = dpsw_get_field(rsp_params->conf, ENABLED);\n\tattr->accept_all_vlan = dpsw_get_field(rsp_params->conf,\n\t\t\t\t\t       ACCEPT_ALL_VLAN);\n\tattr->admit_untagged = dpsw_get_field(rsp_params->conf,\n\t\t\t\t\t      ADMIT_UNTAGGED);\n\n\treturn 0;\n}\n\n \nint dpsw_if_set_max_frame_length(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t\t u16 if_id, u16 frame_length)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if_set_max_frame_length *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_SET_MAX_FRAME_LENGTH,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_set_max_frame_length *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tcmd_params->frame_length = cpu_to_le16(frame_length);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_add(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t  u16 vlan_id, const struct dpsw_vlan_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_vlan_add *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_ADD,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_vlan_add *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(cfg->fdb_id);\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_add_if(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t     u16 vlan_id, const struct dpsw_vlan_if_cfg *cfg)\n{\n\tstruct dpsw_cmd_vlan_add_if *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_ADD_IF,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_vlan_add_if *)cmd.params;\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\tcmd_params->options = cpu_to_le16(cfg->options);\n\tcmd_params->fdb_id = cpu_to_le16(cfg->fdb_id);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_add_if_untagged(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t      u16 vlan_id, const struct dpsw_vlan_if_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_vlan_manage_if *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_ADD_IF_UNTAGGED,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_vlan_manage_if *)cmd.params;\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_remove_if(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\tu16 vlan_id, const struct dpsw_vlan_if_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_vlan_manage_if *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_REMOVE_IF,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_vlan_manage_if *)cmd.params;\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_remove_if_untagged(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t\t u16 vlan_id, const struct dpsw_vlan_if_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_vlan_manage_if *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_REMOVE_IF_UNTAGGED,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_vlan_manage_if *)cmd.params;\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_vlan_remove(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t     u16 vlan_id)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_vlan_remove *cmd_params;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_VLAN_REMOVE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_vlan_remove *)cmd.params;\n\tcmd_params->vlan_id = cpu_to_le16(vlan_id);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_fdb_add(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 *fdb_id,\n\t\t const struct dpsw_fdb_cfg *cfg)\n{\n\tstruct dpsw_cmd_fdb_add *cmd_params;\n\tstruct dpsw_rsp_fdb_add *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_ADD,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_add *)cmd.params;\n\tcmd_params->fdb_ageing_time = cpu_to_le16(cfg->fdb_ageing_time);\n\tcmd_params->num_fdb_entries = cpu_to_le16(cfg->num_fdb_entries);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_fdb_add *)cmd.params;\n\t*fdb_id = le16_to_cpu(rsp_params->fdb_id);\n\n\treturn 0;\n}\n\n \nint dpsw_fdb_remove(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 fdb_id)\n{\n\tstruct dpsw_cmd_fdb_remove *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_REMOVE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_remove *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_fdb_add_unicast(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t u16 fdb_id, const struct dpsw_fdb_unicast_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_fdb_unicast_op *cmd_params;\n\tint i;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_ADD_UNICAST,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_unicast_op *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\tcmd_params->if_egress = cpu_to_le16(cfg->if_egress);\n\tfor (i = 0; i < 6; i++)\n\t\tcmd_params->mac_addr[i] = cfg->mac_addr[5 - i];\n\tdpsw_set_field(cmd_params->type, ENTRY_TYPE, cfg->type);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_fdb_dump(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 fdb_id,\n\t\t  u64 iova_addr, u32 iova_size, u16 *num_entries)\n{\n\tstruct dpsw_cmd_fdb_dump *cmd_params;\n\tstruct dpsw_rsp_fdb_dump *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_DUMP,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_dump *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\tcmd_params->iova_addr = cpu_to_le64(iova_addr);\n\tcmd_params->iova_size = cpu_to_le32(iova_size);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_fdb_dump *)cmd.params;\n\t*num_entries = le16_to_cpu(rsp_params->num_entries);\n\n\treturn 0;\n}\n\n \nint dpsw_fdb_remove_unicast(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t    u16 fdb_id, const struct dpsw_fdb_unicast_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_fdb_unicast_op *cmd_params;\n\tint i;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_REMOVE_UNICAST,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_unicast_op *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\tfor (i = 0; i < 6; i++)\n\t\tcmd_params->mac_addr[i] = cfg->mac_addr[5 - i];\n\tcmd_params->if_egress = cpu_to_le16(cfg->if_egress);\n\tdpsw_set_field(cmd_params->type, ENTRY_TYPE, cfg->type);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_fdb_add_multicast(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   u16 fdb_id, const struct dpsw_fdb_multicast_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_fdb_multicast_op *cmd_params;\n\tint i;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_ADD_MULTICAST,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_multicast_op *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\tcmd_params->num_ifs = cpu_to_le16(cfg->num_ifs);\n\tdpsw_set_field(cmd_params->type, ENTRY_TYPE, cfg->type);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\tfor (i = 0; i < 6; i++)\n\t\tcmd_params->mac_addr[i] = cfg->mac_addr[5 - i];\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_fdb_remove_multicast(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t      u16 fdb_id, const struct dpsw_fdb_multicast_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_fdb_multicast_op *cmd_params;\n\tint i;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_FDB_REMOVE_MULTICAST,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_fdb_multicast_op *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(fdb_id);\n\tcmd_params->num_ifs = cpu_to_le16(cfg->num_ifs);\n\tdpsw_set_field(cmd_params->type, ENTRY_TYPE, cfg->type);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\tfor (i = 0; i < 6; i++)\n\t\tcmd_params->mac_addr[i] = cfg->mac_addr[5 - i];\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_ctrl_if_get_attributes(struct fsl_mc_io *mc_io, u32 cmd_flags,\n\t\t\t\tu16 token, struct dpsw_ctrl_if_attr *attr)\n{\n\tstruct dpsw_rsp_ctrl_if_get_attr *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CTRL_IF_GET_ATTR,\n\t\t\t\t\t  cmd_flags, token);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_ctrl_if_get_attr *)cmd.params;\n\tattr->rx_fqid = le32_to_cpu(rsp_params->rx_fqid);\n\tattr->rx_err_fqid = le32_to_cpu(rsp_params->rx_err_fqid);\n\tattr->tx_err_conf_fqid = le32_to_cpu(rsp_params->tx_err_conf_fqid);\n\n\treturn 0;\n}\n\n \nint dpsw_ctrl_if_set_pools(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   const struct dpsw_ctrl_if_pools_cfg *cfg)\n{\n\tstruct dpsw_cmd_ctrl_if_set_pools *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint i;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CTRL_IF_SET_POOLS,\n\t\t\t\t\t  cmd_flags, token);\n\tcmd_params = (struct dpsw_cmd_ctrl_if_set_pools *)cmd.params;\n\tcmd_params->num_dpbp = cfg->num_dpbp;\n\tfor (i = 0; i < DPSW_MAX_DPBP; i++) {\n\t\tcmd_params->dpbp_id[i] = cpu_to_le32(cfg->pools[i].dpbp_id);\n\t\tcmd_params->buffer_size[i] =\n\t\t\tcpu_to_le16(cfg->pools[i].buffer_size);\n\t\tcmd_params->backup_pool_mask |=\n\t\t\tDPSW_BACKUP_POOL(cfg->pools[i].backup_pool, i);\n\t}\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_ctrl_if_set_queue(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   enum dpsw_queue_type qtype,\n\t\t\t   const struct dpsw_ctrl_if_queue_cfg *cfg)\n{\n\tstruct dpsw_cmd_ctrl_if_set_queue *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CTRL_IF_SET_QUEUE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_ctrl_if_set_queue *)cmd.params;\n\tcmd_params->dest_id = cpu_to_le32(cfg->dest_cfg.dest_id);\n\tcmd_params->dest_priority = cfg->dest_cfg.priority;\n\tcmd_params->qtype = qtype;\n\tcmd_params->user_ctx = cpu_to_le64(cfg->user_ctx);\n\tcmd_params->options = cpu_to_le32(cfg->options);\n\tdpsw_set_field(cmd_params->dest_type,\n\t\t       DEST_TYPE,\n\t\t       cfg->dest_cfg.dest_type);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_get_api_version(struct fsl_mc_io *mc_io, u32 cmd_flags,\n\t\t\t u16 *major_ver, u16 *minor_ver)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_rsp_get_api_version *rsp_params;\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_GET_API_VERSION,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  0);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_get_api_version *)cmd.params;\n\t*major_ver = le16_to_cpu(rsp_params->version_major);\n\t*minor_ver = le16_to_cpu(rsp_params->version_minor);\n\n\treturn 0;\n}\n\n \nint dpsw_if_get_port_mac_addr(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t      u16 if_id, u8 mac_addr[6])\n{\n\tstruct dpsw_rsp_if_get_mac_addr *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpsw_cmd_if *cmd_params;\n\tint err, i;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_GET_PORT_MAC_ADDR,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\trsp_params = (struct dpsw_rsp_if_get_mac_addr *)cmd.params;\n\tfor (i = 0; i < 6; i++)\n\t\tmac_addr[5 - i] = rsp_params->mac_addr[i];\n\n\treturn 0;\n}\n\n \nint dpsw_ctrl_if_enable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CTRL_IF_ENABLE, cmd_flags,\n\t\t\t\t\t  token);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_ctrl_if_disable(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_CTRL_IF_DISABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_set_egress_flood(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t  const struct dpsw_egress_flood_cfg *cfg)\n{\n\tstruct dpsw_cmd_set_egress_flood *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_SET_EGRESS_FLOOD, cmd_flags, token);\n\tcmd_params = (struct dpsw_cmd_set_egress_flood *)cmd.params;\n\tcmd_params->fdb_id = cpu_to_le16(cfg->fdb_id);\n\tcmd_params->flood_type = cfg->flood_type;\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_set_learning_mode(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t      u16 if_id, enum dpsw_learning_mode mode)\n{\n\tstruct dpsw_cmd_if_set_learning_mode *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_SET_LEARNING_MODE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_set_learning_mode *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tdpsw_set_field(cmd_params->mode, LEARNING_MODE, mode);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_acl_add(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token, u16 *acl_id,\n\t\t const struct dpsw_acl_cfg *cfg)\n{\n\tstruct dpsw_cmd_acl_add *cmd_params;\n\tstruct dpsw_rsp_acl_add *rsp_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\tint err;\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_ADD, cmd_flags, token);\n\tcmd_params = (struct dpsw_cmd_acl_add *)cmd.params;\n\tcmd_params->max_entries = cpu_to_le16(cfg->max_entries);\n\n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\trsp_params = (struct dpsw_rsp_acl_add *)cmd.params;\n\t*acl_id = le16_to_cpu(rsp_params->acl_id);\n\n\treturn 0;\n}\n\n \nint dpsw_acl_remove(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t    u16 acl_id)\n{\n\tstruct dpsw_cmd_acl_remove *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_REMOVE, cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_acl_remove *)cmd.params;\n\tcmd_params->acl_id = cpu_to_le16(acl_id);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_acl_add_if(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t    u16 acl_id, const struct dpsw_acl_if_cfg *cfg)\n{\n\tstruct dpsw_cmd_acl_if *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_ADD_IF, cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_acl_if *)cmd.params;\n\tcmd_params->acl_id = cpu_to_le16(acl_id);\n\tcmd_params->num_ifs = cpu_to_le16(cfg->num_ifs);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_acl_remove_if(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t       u16 acl_id, const struct dpsw_acl_if_cfg *cfg)\n{\n\tstruct dpsw_cmd_acl_if *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_REMOVE_IF, cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_acl_if *)cmd.params;\n\tcmd_params->acl_id = cpu_to_le16(acl_id);\n\tcmd_params->num_ifs = cpu_to_le16(cfg->num_ifs);\n\tbuild_if_id_bitmap(&cmd_params->if_id, cfg->if_id, cfg->num_ifs);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nvoid dpsw_acl_prepare_entry_cfg(const struct dpsw_acl_key *key,\n\t\t\t\tu8 *entry_cfg_buf)\n{\n\tstruct dpsw_prep_acl_entry *ext_params;\n\tint i;\n\n\text_params = (struct dpsw_prep_acl_entry *)entry_cfg_buf;\n\n\tfor (i = 0; i < 6; i++) {\n\t\text_params->match_l2_dest_mac[i] = key->match.l2_dest_mac[5 - i];\n\t\text_params->match_l2_source_mac[i] = key->match.l2_source_mac[5 - i];\n\t\text_params->mask_l2_dest_mac[i] = key->mask.l2_dest_mac[5 - i];\n\t\text_params->mask_l2_source_mac[i] = key->mask.l2_source_mac[5 - i];\n\t}\n\n\text_params->match_l2_tpid = cpu_to_le16(key->match.l2_tpid);\n\text_params->match_l2_vlan_id = cpu_to_le16(key->match.l2_vlan_id);\n\text_params->match_l3_dest_ip = cpu_to_le32(key->match.l3_dest_ip);\n\text_params->match_l3_source_ip = cpu_to_le32(key->match.l3_source_ip);\n\text_params->match_l4_dest_port = cpu_to_le16(key->match.l4_dest_port);\n\text_params->match_l4_source_port = cpu_to_le16(key->match.l4_source_port);\n\text_params->match_l2_ether_type = cpu_to_le16(key->match.l2_ether_type);\n\text_params->match_l2_pcp_dei = key->match.l2_pcp_dei;\n\text_params->match_l3_dscp = key->match.l3_dscp;\n\n\text_params->mask_l2_tpid = cpu_to_le16(key->mask.l2_tpid);\n\text_params->mask_l2_vlan_id = cpu_to_le16(key->mask.l2_vlan_id);\n\text_params->mask_l3_dest_ip = cpu_to_le32(key->mask.l3_dest_ip);\n\text_params->mask_l3_source_ip = cpu_to_le32(key->mask.l3_source_ip);\n\text_params->mask_l4_dest_port = cpu_to_le16(key->mask.l4_dest_port);\n\text_params->mask_l4_source_port = cpu_to_le16(key->mask.l4_source_port);\n\text_params->mask_l2_ether_type = cpu_to_le16(key->mask.l2_ether_type);\n\text_params->mask_l2_pcp_dei = key->mask.l2_pcp_dei;\n\text_params->mask_l3_dscp = key->mask.l3_dscp;\n\text_params->match_l3_protocol = key->match.l3_protocol;\n\text_params->mask_l3_protocol = key->mask.l3_protocol;\n}\n\n \nint dpsw_acl_add_entry(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t       u16 acl_id, const struct dpsw_acl_entry_cfg *cfg)\n{\n\tstruct dpsw_cmd_acl_entry *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_ADD_ENTRY, cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_acl_entry *)cmd.params;\n\tcmd_params->acl_id = cpu_to_le16(acl_id);\n\tcmd_params->result_if_id = cpu_to_le16(cfg->result.if_id);\n\tcmd_params->precedence = cpu_to_le32(cfg->precedence);\n\tcmd_params->key_iova = cpu_to_le64(cfg->key_iova);\n\tdpsw_set_field(cmd_params->result_action,\n\t\t       RESULT_ACTION,\n\t\t       cfg->result.action);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_acl_remove_entry(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t  u16 acl_id, const struct dpsw_acl_entry_cfg *cfg)\n{\n\tstruct dpsw_cmd_acl_entry *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_ACL_REMOVE_ENTRY,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_acl_entry *)cmd.params;\n\tcmd_params->acl_id = cpu_to_le16(acl_id);\n\tcmd_params->result_if_id = cpu_to_le16(cfg->result.if_id);\n\tcmd_params->precedence = cpu_to_le32(cfg->precedence);\n\tcmd_params->key_iova = cpu_to_le64(cfg->key_iova);\n\tdpsw_set_field(cmd_params->result_action,\n\t\t       RESULT_ACTION,\n\t\t       cfg->result.action);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_set_reflection_if(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   u16 if_id)\n{\n\tstruct dpsw_cmd_set_reflection_if *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_SET_REFLECTION_IF,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_set_reflection_if *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_add_reflection(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t   u16 if_id, const struct dpsw_reflection_cfg *cfg)\n{\n\tstruct dpsw_cmd_if_reflection *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_ADD_REFLECTION,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_reflection *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tcmd_params->vlan_id = cpu_to_le16(cfg->vlan_id);\n\tdpsw_set_field(cmd_params->filter, FILTER, cfg->filter);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n\n \nint dpsw_if_remove_reflection(struct fsl_mc_io *mc_io, u32 cmd_flags, u16 token,\n\t\t\t      u16 if_id, const struct dpsw_reflection_cfg *cfg)\n{\n\tstruct dpsw_cmd_if_reflection *cmd_params;\n\tstruct fsl_mc_command cmd = { 0 };\n\n\tcmd.header = mc_encode_cmd_header(DPSW_CMDID_IF_REMOVE_REFLECTION,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tcmd_params = (struct dpsw_cmd_if_reflection *)cmd.params;\n\tcmd_params->if_id = cpu_to_le16(if_id);\n\tcmd_params->vlan_id = cpu_to_le16(cfg->vlan_id);\n\tdpsw_set_field(cmd_params->filter, FILTER, cfg->filter);\n\n\treturn mc_send_command(mc_io, &cmd);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}