{
  "module_name": "enetc_hw.h",
  "hash_id": "5f863f808a59fb3218eecf63fc3c1a0e2e8a074569b741d1c5d1d062bfa45719",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/freescale/enetc/enetc_hw.h",
  "human_readable_source": " \n \n\n#include <linux/bitops.h>\n\n#define ENETC_MM_VERIFY_SLEEP_US\tUSEC_PER_MSEC\n#define ENETC_MM_VERIFY_RETRIES\t\t3\n\n \n#define ENETC_DEV_ID_PF\t\t0xe100\n#define ENETC_DEV_ID_VF\t\t0xef00\n#define ENETC_DEV_ID_PTP\t0xee02\n\n \n#define ENETC_BAR_REGS\t0\n\n \n#define ENETC_SIMR\t0\n#define ENETC_SIMR_EN\tBIT(31)\n#define ENETC_SIMR_RSSE\tBIT(0)\n#define ENETC_SICTR0\t0x18\n#define ENETC_SICTR1\t0x1c\n#define ENETC_SIPCAPR0\t0x20\n#define ENETC_SIPCAPR0_PSFP\tBIT(9)\n#define ENETC_SIPCAPR0_RSS\tBIT(8)\n#define ENETC_SIPCAPR0_QBV\tBIT(4)\n#define ENETC_SIPCAPR0_QBU\tBIT(3)\n#define ENETC_SIPCAPR1\t0x24\n#define ENETC_SITGTGR\t0x30\n#define ENETC_SIRBGCR\t0x38\n \n#define ENETC_SICAR0\t0x40\n#define ENETC_SICAR1\t0x44\n#define ENETC_SICAR2\t0x48\n \n#define ENETC_SICAR_RD_COHERENT\t0x2b2b0000\n#define ENETC_SICAR_WR_COHERENT\t0x00006727\n#define ENETC_SICAR_MSI\t0x00300030  \n\n#define ENETC_SIPMAR0\t0x80\n#define ENETC_SIPMAR1\t0x84\n\n \n#define ENETC_DEFAULT_MSG_SIZE\t1024\t \n \nstatic inline u32 enetc_vsi_set_msize(u32 size)\n{\n\treturn size < ENETC_DEFAULT_MSG_SIZE ? size >> 5 : 0;\n}\n\n#define ENETC_PSIMSGRR\t0x204\n#define ENETC_PSIMSGRR_MR_MASK\tGENMASK(2, 1)\n#define ENETC_PSIMSGRR_MR(n) BIT((n) + 1)  \n#define ENETC_PSIVMSGRCVAR0(n)\t(0x210 + (n) * 0x8)  \n#define ENETC_PSIVMSGRCVAR1(n)\t(0x214 + (n) * 0x8)\n\n#define ENETC_VSIMSGSR\t0x204\t \n#define ENETC_VSIMSGSR_MB\tBIT(0)\n#define ENETC_VSIMSGSR_MS\tBIT(1)\n#define ENETC_VSIMSGSNDAR0\t0x210\n#define ENETC_VSIMSGSNDAR1\t0x214\n\n#define ENETC_SIMSGSR_SET_MC(val) ((val) << 16)\n#define ENETC_SIMSGSR_GET_MC(val) ((val) >> 16)\n\n \n#define ENETC_SIROCT\t0x300\n#define ENETC_SIRFRM\t0x308\n#define ENETC_SIRUCA\t0x310\n#define ENETC_SIRMCA\t0x318\n#define ENETC_SITOCT\t0x320\n#define ENETC_SITFRM\t0x328\n#define ENETC_SITUCA\t0x330\n#define ENETC_SITMCA\t0x338\n#define ENETC_RBDCR(n)\t(0x8180 + (n) * 0x200)\n\n \n#define ENETC_SICBDRMR\t\t0x800\n#define ENETC_SICBDRSR\t\t0x804\t \n#define ENETC_SICBDRBAR0\t0x810\n#define ENETC_SICBDRBAR1\t0x814\n#define ENETC_SICBDRPIR\t\t0x818\n#define ENETC_SICBDRCIR\t\t0x81c\n#define ENETC_SICBDRLENR\t0x820\n\n#define ENETC_SICAPR0\t0x900\n#define ENETC_SICAPR1\t0x904\n\n#define ENETC_PSIIER\t0xa00\n#define ENETC_PSIIER_MR_MASK\tGENMASK(2, 1)\n#define ENETC_PSIIDR\t0xa08\n#define ENETC_SITXIDR\t0xa18\n#define ENETC_SIRXIDR\t0xa28\n#define ENETC_SIMSIVR\t0xa30\n\n#define ENETC_SIMSITRV(n) (0xB00 + (n) * 0x4)\n#define ENETC_SIMSIRRV(n) (0xB80 + (n) * 0x4)\n\n#define ENETC_SIUEFDCR\t0xe28\n\n#define ENETC_SIRFSCAPR\t0x1200\n#define ENETC_SIRFSCAPR_GET_NUM_RFS(val) ((val) & 0x7f)\n#define ENETC_SIRSSCAPR\t0x1600\n#define ENETC_SIRSSCAPR_GET_NUM_RSS(val) (BIT((val) & 0xf) * 32)\n\n \nenum enetc_bdr_type {TX, RX};\n#define ENETC_BDR_OFF(i)\t((i) * 0x200)\n#define ENETC_BDR(t, i, r)\t(0x8000 + (t) * 0x100 + ENETC_BDR_OFF(i) + (r))\n \n#define ENETC_RBMR\t0\n#define ENETC_RBMR_BDS\tBIT(2)\n#define ENETC_RBMR_CM\tBIT(4)\n#define ENETC_RBMR_VTE\tBIT(5)\n#define ENETC_RBMR_EN\tBIT(31)\n#define ENETC_RBSR\t0x4\n#define ENETC_RBBSR\t0x8\n#define ENETC_RBCIR\t0xc\n#define ENETC_RBBAR0\t0x10\n#define ENETC_RBBAR1\t0x14\n#define ENETC_RBPIR\t0x18\n#define ENETC_RBLENR\t0x20\n#define ENETC_RBIER\t0xa0\n#define ENETC_RBIER_RXTIE\tBIT(0)\n#define ENETC_RBIDR\t0xa4\n#define ENETC_RBICR0\t0xa8\n#define ENETC_RBICR0_ICEN\t\tBIT(31)\n#define ENETC_RBICR0_ICPT_MASK\t\t0x1ff\n#define ENETC_RBICR0_SET_ICPT(n)\t((n) & ENETC_RBICR0_ICPT_MASK)\n#define ENETC_RBICR1\t0xac\n\n \n#define ENETC_TBMR\t0\n#define ENETC_TBSR_BUSY\tBIT(0)\n#define ENETC_TBMR_VIH\tBIT(9)\n#define ENETC_TBMR_PRIO_MASK\t\tGENMASK(2, 0)\n#define ENETC_TBMR_SET_PRIO(val)\t((val) & ENETC_TBMR_PRIO_MASK)\n#define ENETC_TBMR_EN\tBIT(31)\n#define ENETC_TBSR\t0x4\n#define ENETC_TBBAR0\t0x10\n#define ENETC_TBBAR1\t0x14\n#define ENETC_TBPIR\t0x18\n#define ENETC_TBCIR\t0x1c\n#define ENETC_TBCIR_IDX_MASK\t0xffff\n#define ENETC_TBLENR\t0x20\n#define ENETC_TBIER\t0xa0\n#define ENETC_TBIER_TXTIE\tBIT(0)\n#define ENETC_TBIDR\t0xa4\n#define ENETC_TBICR0\t0xa8\n#define ENETC_TBICR0_ICEN\t\tBIT(31)\n#define ENETC_TBICR0_ICPT_MASK\t\t0xf\n#define ENETC_TBICR0_SET_ICPT(n) ((ilog2(n) + 1) & ENETC_TBICR0_ICPT_MASK)\n#define ENETC_TBICR1\t0xac\n\n#define ENETC_RTBLENR_LEN(n)\t((n) & ~0x7)\n\n \n#define ENETC_PORT_BASE\t\t0x10000\n#define ENETC_PMR\t\t0x0000\n#define ENETC_PMR_EN\tGENMASK(18, 16)\n#define ENETC_PMR_PSPEED_MASK GENMASK(11, 8)\n#define ENETC_PMR_PSPEED_10M\t0\n#define ENETC_PMR_PSPEED_100M\tBIT(8)\n#define ENETC_PMR_PSPEED_1000M\tBIT(9)\n#define ENETC_PMR_PSPEED_2500M\tBIT(10)\n#define ENETC_PSR\t\t0x0004  \n#define ENETC_PSIPMR\t\t0x0018\n#define ENETC_PSIPMR_SET_UP(n)\tBIT(n)  \n#define ENETC_PSIPMR_SET_MP(n)\tBIT((n) + 16)\n#define ENETC_PSIPVMR\t\t0x001c\n#define ENETC_VLAN_PROMISC_MAP_ALL\t0x7\n#define ENETC_PSIPVMR_SET_VP(simap)\t((simap) & 0x7)\n#define ENETC_PSIPVMR_SET_VUTA(simap)\t(((simap) & 0x7) << 16)\n#define ENETC_PSIPMAR0(n)\t(0x0100 + (n) * 0x8)  \n#define ENETC_PSIPMAR1(n)\t(0x0104 + (n) * 0x8)\n#define ENETC_PVCLCTR\t\t0x0208\n#define ENETC_PCVLANR1\t\t0x0210\n#define ENETC_PCVLANR2\t\t0x0214\n#define ENETC_VLAN_TYPE_C\tBIT(0)\n#define ENETC_VLAN_TYPE_S\tBIT(1)\n#define ENETC_PVCLCTR_OVTPIDL(bmp)\t((bmp) & 0xff)  \n#define ENETC_PSIVLANR(n)\t(0x0240 + (n) * 4)  \n#define ENETC_PSIVLAN_EN\tBIT(31)\n#define ENETC_PSIVLAN_SET_QOS(val)\t((u32)(val) << 12)\n#define ENETC_PPAUONTR\t\t0x0410\n#define ENETC_PPAUOFFTR\t\t0x0414\n#define ENETC_PTXMBAR\t\t0x0608\n#define ENETC_PCAPR0\t\t0x0900\n#define ENETC_PCAPR0_RXBDR(val)\t((val) >> 24)\n#define ENETC_PCAPR0_TXBDR(val)\t(((val) >> 16) & 0xff)\n#define ENETC_PCAPR1\t\t0x0904\n#define ENETC_PSICFGR0(n)\t(0x0940 + (n) * 0xc)   \n#define ENETC_PSICFGR0_SET_TXBDR(val)\t((val) & 0xff)\n#define ENETC_PSICFGR0_SET_RXBDR(val)\t(((val) & 0xff) << 16)\n#define ENETC_PSICFGR0_VTE\tBIT(12)\n#define ENETC_PSICFGR0_SIVIE\tBIT(14)\n#define ENETC_PSICFGR0_ASE\tBIT(15)\n#define ENETC_PSICFGR0_SIVC(bmp)\t(((bmp) & 0xff) << 24)  \n\n#define ENETC_PTCCBSR0(n)\t(0x1110 + (n) * 8)  \n#define ENETC_CBSE\t\tBIT(31)\n#define ENETC_CBS_BW_MASK\tGENMASK(6, 0)\n#define ENETC_PTCCBSR1(n)\t(0x1114 + (n) * 8)  \n#define ENETC_RSSHASH_KEY_SIZE\t40\n#define ENETC_PRSSCAPR\t\t0x1404\n#define ENETC_PRSSCAPR_GET_NUM_RSS(val)\t(BIT((val) & 0xf) * 32)\n#define ENETC_PRSSK(n)\t\t(0x1410 + (n) * 4)  \n#define ENETC_PSIVLANFMR\t0x1700\n#define ENETC_PSIVLANFMR_VS\tBIT(0)\n#define ENETC_PRFSMR\t\t0x1800\n#define ENETC_PRFSMR_RFSE\tBIT(31)\n#define ENETC_PRFSCAPR\t\t0x1804\n#define ENETC_PRFSCAPR_GET_NUM_RFS(val)\t((((val) & 0xf) + 1) * 16)\n#define ENETC_PSIRFSCFGR(n)\t(0x1814 + (n) * 4)  \n#define ENETC_PFPMR\t\t0x1900\n#define ENETC_PFPMR_PMACE\tBIT(1)\n#define ENETC_EMDIO_BASE\t0x1c00\n#define ENETC_PSIUMHFR0(n, err)\t(((err) ? 0x1d08 : 0x1d00) + (n) * 0x10)\n#define ENETC_PSIUMHFR1(n)\t(0x1d04 + (n) * 0x10)\n#define ENETC_PSIMMHFR0(n, err)\t(((err) ? 0x1d00 : 0x1d08) + (n) * 0x10)\n#define ENETC_PSIMMHFR1(n)\t(0x1d0c + (n) * 0x10)\n#define ENETC_PSIVHFR0(n)\t(0x1e00 + (n) * 8)  \n#define ENETC_PSIVHFR1(n)\t(0x1e04 + (n) * 8)  \n#define ENETC_MMCSR\t\t0x1f00\n#define ENETC_MMCSR_LINK_FAIL\tBIT(31)\n#define ENETC_MMCSR_VT_MASK\tGENMASK(29, 23)  \n#define ENETC_MMCSR_VT(x)\t(((x) << 23) & ENETC_MMCSR_VT_MASK)\n#define ENETC_MMCSR_GET_VT(x)\t(((x) & ENETC_MMCSR_VT_MASK) >> 23)\n#define ENETC_MMCSR_TXSTS_MASK\tGENMASK(22, 21)  \n#define ENETC_MMCSR_GET_TXSTS(x) (((x) & ENETC_MMCSR_TXSTS_MASK) >> 21)\n#define ENETC_MMCSR_VSTS_MASK\tGENMASK(20, 18)  \n#define ENETC_MMCSR_GET_VSTS(x) (((x) & ENETC_MMCSR_VSTS_MASK) >> 18)\n#define ENETC_MMCSR_VDIS\tBIT(17)  \n#define ENETC_MMCSR_ME\t\tBIT(16)  \n#define ENETC_MMCSR_RAFS_MASK\tGENMASK(9, 8)  \n#define ENETC_MMCSR_RAFS(x)\t(((x) << 8) & ENETC_MMCSR_RAFS_MASK)\n#define ENETC_MMCSR_GET_RAFS(x)\t(((x) & ENETC_MMCSR_RAFS_MASK) >> 8)\n#define ENETC_MMCSR_LAFS_MASK\tGENMASK(4, 3)  \n#define ENETC_MMCSR_GET_LAFS(x)\t(((x) & ENETC_MMCSR_LAFS_MASK) >> 3)\n#define ENETC_MMCSR_LPA\t\tBIT(2)  \n#define ENETC_MMCSR_LPE\t\tBIT(1)  \n#define ENETC_MMCSR_LPS\t\tBIT(0)  \n#define ENETC_MMFAECR\t\t0x1f08\n#define ENETC_MMFSECR\t\t0x1f0c\n#define ENETC_MMFAOCR\t\t0x1f10\n#define ENETC_MMFCRXR\t\t0x1f14\n#define ENETC_MMFCTXR\t\t0x1f18\n#define ENETC_MMHCR\t\t0x1f1c\n#define ENETC_PTCMSDUR(n)\t(0x2020 + (n) * 4)  \n\n#define ENETC_PMAC_OFFSET\t0x1000\n\n#define ENETC_PM0_CMD_CFG\t0x8008\n#define ENETC_PM0_TX_EN\t\tBIT(0)\n#define ENETC_PM0_RX_EN\t\tBIT(1)\n#define ENETC_PM0_PROMISC\tBIT(4)\n#define ENETC_PM0_PAUSE_IGN\tBIT(8)\n#define ENETC_PM0_CMD_XGLP\tBIT(10)\n#define ENETC_PM0_CMD_TXP\tBIT(11)\n#define ENETC_PM0_CMD_PHY_TX_EN\tBIT(15)\n#define ENETC_PM0_CMD_SFD\tBIT(21)\n#define ENETC_PM0_MAXFRM\t0x8014\n#define ENETC_SET_TX_MTU(val)\t((val) << 16)\n#define ENETC_SET_MAXFRM(val)\t((val) & 0xffff)\n#define ENETC_PM0_RX_FIFO\t0x801c\n#define ENETC_PM0_RX_FIFO_VAL\t1\n\n#define ENETC_PM_IMDIO_BASE\t0x8030\n\n#define ENETC_PM0_PAUSE_QUANTA\t0x8054\n#define ENETC_PM0_PAUSE_THRESH\t0x8064\n\n#define ENETC_PM0_SINGLE_STEP\t\t0x80c0\n#define ENETC_PM0_SINGLE_STEP_CH\tBIT(7)\n#define ENETC_PM0_SINGLE_STEP_EN\tBIT(31)\n#define ENETC_SET_SINGLE_STEP_OFFSET(v)\t(((v) & 0xff) << 8)\n\n#define ENETC_PM0_IF_MODE\t0x8300\n#define ENETC_PM0_IFM_RG\tBIT(2)\n#define ENETC_PM0_IFM_RLP\t(BIT(5) | BIT(11))\n#define ENETC_PM0_IFM_EN_AUTO\tBIT(15)\n#define ENETC_PM0_IFM_SSP_MASK\tGENMASK(14, 13)\n#define ENETC_PM0_IFM_SSP_1000\t(2 << 13)\n#define ENETC_PM0_IFM_SSP_100\t(0 << 13)\n#define ENETC_PM0_IFM_SSP_10\t(1 << 13)\n#define ENETC_PM0_IFM_FULL_DPX\tBIT(12)\n#define ENETC_PM0_IFM_IFMODE_MASK GENMASK(1, 0)\n#define ENETC_PM0_IFM_IFMODE_XGMII 0\n#define ENETC_PM0_IFM_IFMODE_GMII 2\n#define ENETC_PSIDCAPR\t\t0x1b08\n#define ENETC_PSIDCAPR_MSK\tGENMASK(15, 0)\n#define ENETC_PSFCAPR\t\t0x1b18\n#define ENETC_PSFCAPR_MSK\tGENMASK(15, 0)\n#define ENETC_PSGCAPR\t\t0x1b28\n#define ENETC_PSGCAPR_GCL_MSK\tGENMASK(18, 16)\n#define ENETC_PSGCAPR_SGIT_MSK\tGENMASK(15, 0)\n#define ENETC_PFMCAPR\t\t0x1b38\n#define ENETC_PFMCAPR_MSK\tGENMASK(15, 0)\n\n \n#define ENETC_PM_REOCT(mac)\t(0x8100 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RALN(mac)\t(0x8110 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RXPF(mac)\t(0x8118 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RFRM(mac)\t(0x8120 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RFCS(mac)\t(0x8128 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RVLAN(mac)\t(0x8130 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RERR(mac)\t(0x8138 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RUCA(mac)\t(0x8140 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RMCA(mac)\t(0x8148 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RBCA(mac)\t(0x8150 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RDRP(mac)\t(0x8158 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RPKT(mac)\t(0x8160 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RUND(mac)\t(0x8168 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R64(mac)\t(0x8170 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R127(mac)\t(0x8178 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R255(mac)\t(0x8180 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R511(mac)\t(0x8188 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R1023(mac)\t(0x8190 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R1522(mac)\t(0x8198 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_R1523X(mac)\t(0x81A0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_ROVR(mac)\t(0x81A8 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RJBR(mac)\t(0x81B0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RFRG(mac)\t(0x81B8 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RCNP(mac)\t(0x81C0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_RDRNTP(mac)\t(0x81C8 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TEOCT(mac)\t(0x8200 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TOCT(mac)\t(0x8208 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TCRSE(mac)\t(0x8210 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TXPF(mac)\t(0x8218 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TFRM(mac)\t(0x8220 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TFCS(mac)\t(0x8228 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TVLAN(mac)\t(0x8230 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TERR(mac)\t(0x8238 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TUCA(mac)\t(0x8240 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TMCA(mac)\t(0x8248 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TBCA(mac)\t(0x8250 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TPKT(mac)\t(0x8260 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TUND(mac)\t(0x8268 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T64(mac)\t(0x8270 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T127(mac)\t(0x8278 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T255(mac)\t(0x8280 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T511(mac)\t(0x8288 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T1023(mac)\t(0x8290 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T1522(mac)\t(0x8298 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_T1523X(mac)\t(0x82A0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TCNP(mac)\t(0x82C0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TDFR(mac)\t(0x82D0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TMCOL(mac)\t(0x82D8 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TSCOL(mac)\t(0x82E0 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TLCOL(mac)\t(0x82E8 + ENETC_PMAC_OFFSET * (mac))\n#define ENETC_PM_TECOL(mac)\t(0x82F0 + ENETC_PMAC_OFFSET * (mac))\n\n \n#define ENETC_PICDR(n)\t\t(0x0700 + (n) * 8)  \n#define ENETC_PBFDSIR\t\t0x0810\n#define ENETC_PFDMSAPR\t\t0x0814\n#define ENETC_UFDMF\t\t0x1680\n#define ENETC_MFDMF\t\t0x1684\n#define ENETC_PUFDVFR\t\t0x1780\n#define ENETC_PMFDVFR\t\t0x1784\n#define ENETC_PBFDVFR\t\t0x1788\n\n \n#define ENETC_GLOBAL_BASE\t0x20000\n#define ENETC_G_EIPBRR0\t\t0x0bf8\n#define ENETC_G_EIPBRR1\t\t0x0bfc\n#define ENETC_G_EPFBLPR(n)\t(0xd00 + 4 * (n))\n#define ENETC_G_EPFBLPR1_XGMII\t0x80000000\n\n \nstruct enetc_hw {\n\t \n\tvoid __iomem *reg;\n\t \n\tvoid __iomem *port;\n\t \n\tvoid __iomem *global;\n};\n\n \n\n \nextern rwlock_t enetc_mdio_lock;\n\n \nstatic inline void enetc_lock_mdio(void)\n{\n\tread_lock(&enetc_mdio_lock);\n}\n\nstatic inline void enetc_unlock_mdio(void)\n{\n\tread_unlock(&enetc_mdio_lock);\n}\n\n \nstatic inline u32 enetc_rd_reg_hot(void __iomem *reg)\n{\n\tlockdep_assert_held(&enetc_mdio_lock);\n\n\treturn ioread32(reg);\n}\n\nstatic inline void enetc_wr_reg_hot(void __iomem *reg, u32 val)\n{\n\tlockdep_assert_held(&enetc_mdio_lock);\n\n\tiowrite32(val, reg);\n}\n\n \nstatic inline u32 _enetc_rd_reg_wa(void __iomem *reg)\n{\n\tu32 val;\n\n\tenetc_lock_mdio();\n\tval = ioread32(reg);\n\tenetc_unlock_mdio();\n\n\treturn val;\n}\n\nstatic inline void _enetc_wr_reg_wa(void __iomem *reg, u32 val)\n{\n\tenetc_lock_mdio();\n\tiowrite32(val, reg);\n\tenetc_unlock_mdio();\n}\n\nstatic inline u32 _enetc_rd_mdio_reg_wa(void __iomem *reg)\n{\n\tunsigned long flags;\n\tu32 val;\n\n\twrite_lock_irqsave(&enetc_mdio_lock, flags);\n\tval = ioread32(reg);\n\twrite_unlock_irqrestore(&enetc_mdio_lock, flags);\n\n\treturn val;\n}\n\nstatic inline void _enetc_wr_mdio_reg_wa(void __iomem *reg, u32 val)\n{\n\tunsigned long flags;\n\n\twrite_lock_irqsave(&enetc_mdio_lock, flags);\n\tiowrite32(val, reg);\n\twrite_unlock_irqrestore(&enetc_mdio_lock, flags);\n}\n\n#ifdef ioread64\nstatic inline u64 _enetc_rd_reg64(void __iomem *reg)\n{\n\treturn ioread64(reg);\n}\n#else\n \nstatic inline u64 _enetc_rd_reg64(void __iomem *reg)\n{\n\tu32 low, high, tmp;\n\n\tdo {\n\t\thigh = ioread32(reg + 4);\n\t\tlow = ioread32(reg);\n\t\ttmp = ioread32(reg + 4);\n\t} while (high != tmp);\n\n\treturn le64_to_cpu((__le64)high << 32 | low);\n}\n#endif\n\nstatic inline u64 _enetc_rd_reg64_wa(void __iomem *reg)\n{\n\tu64 val;\n\n\tenetc_lock_mdio();\n\tval = _enetc_rd_reg64(reg);\n\tenetc_unlock_mdio();\n\n\treturn val;\n}\n\n \n#define enetc_rd_reg(reg)\t\t_enetc_rd_reg_wa((reg))\n#define enetc_wr_reg(reg, val)\t\t_enetc_wr_reg_wa((reg), (val))\n#define enetc_rd(hw, off)\t\tenetc_rd_reg((hw)->reg + (off))\n#define enetc_wr(hw, off, val)\t\tenetc_wr_reg((hw)->reg + (off), val)\n#define enetc_rd_hot(hw, off)\t\tenetc_rd_reg_hot((hw)->reg + (off))\n#define enetc_wr_hot(hw, off, val)\tenetc_wr_reg_hot((hw)->reg + (off), val)\n#define enetc_rd64(hw, off)\t\t_enetc_rd_reg64_wa((hw)->reg + (off))\n \n#define enetc_port_rd(hw, off)\t\tenetc_rd_reg((hw)->port + (off))\n#define enetc_port_wr(hw, off, val)\tenetc_wr_reg((hw)->port + (off), val)\n#define enetc_port_rd_mdio(hw, off)\t_enetc_rd_mdio_reg_wa((hw)->port + (off))\n#define enetc_port_wr_mdio(hw, off, val)\t_enetc_wr_mdio_reg_wa(\\\n\t\t\t\t\t\t\t(hw)->port + (off), val)\n \n#define enetc_global_rd(hw, off)\tenetc_rd_reg((hw)->global + (off))\n#define enetc_global_wr(hw, off, val)\tenetc_wr_reg((hw)->global + (off), val)\n \n#define enetc_bdr_rd(hw, t, n, off) \\\n\t\t\t\tenetc_rd(hw, ENETC_BDR(t, n, off))\n#define enetc_bdr_wr(hw, t, n, off, val) \\\n\t\t\t\tenetc_wr(hw, ENETC_BDR(t, n, off), val)\n#define enetc_txbdr_rd(hw, n, off) enetc_bdr_rd(hw, TX, n, off)\n#define enetc_rxbdr_rd(hw, n, off) enetc_bdr_rd(hw, RX, n, off)\n#define enetc_txbdr_wr(hw, n, off, val) \\\n\t\t\t\tenetc_bdr_wr(hw, TX, n, off, val)\n#define enetc_rxbdr_wr(hw, n, off, val) \\\n\t\t\t\tenetc_bdr_wr(hw, RX, n, off, val)\n\n \nunion enetc_tx_bd {\n\tstruct {\n\t\t__le64 addr;\n\t\t__le16 buf_len;\n\t\t__le16 frm_len;\n\t\tunion {\n\t\t\tstruct {\n\t\t\t\tu8 reserved[3];\n\t\t\t\tu8 flags;\n\t\t\t};  \n\t\t\t__le32 txstart;\n\t\t\t__le32 lstatus;\n\t\t};\n\t};\n\tstruct {\n\t\t__le32 tstamp;\n\t\t__le16 tpid;\n\t\t__le16 vid;\n\t\tu8 reserved[6];\n\t\tu8 e_flags;\n\t\tu8 flags;\n\t} ext;  \n\tstruct {\n\t\t__le32 tstamp;\n\t\tu8 reserved[10];\n\t\tu8 status;\n\t\tu8 flags;\n\t} wb;  \n};\n\nenum enetc_txbd_flags {\n\tENETC_TXBD_FLAGS_RES0 = BIT(0),  \n\tENETC_TXBD_FLAGS_TSE = BIT(1),\n\tENETC_TXBD_FLAGS_W = BIT(2),\n\tENETC_TXBD_FLAGS_RES3 = BIT(3),  \n\tENETC_TXBD_FLAGS_TXSTART = BIT(4),\n\tENETC_TXBD_FLAGS_EX = BIT(6),\n\tENETC_TXBD_FLAGS_F = BIT(7)\n};\n#define ENETC_TXBD_STATS_WIN\tBIT(7)\n#define ENETC_TXBD_TXSTART_MASK GENMASK(24, 0)\n#define ENETC_TXBD_FLAGS_OFFSET 24\n\nstatic inline __le32 enetc_txbd_set_tx_start(u64 tx_start, u8 flags)\n{\n\tu32 temp;\n\n\ttemp = (tx_start >> 5 & ENETC_TXBD_TXSTART_MASK) |\n\t       (flags << ENETC_TXBD_FLAGS_OFFSET);\n\n\treturn cpu_to_le32(temp);\n}\n\nstatic inline void enetc_clear_tx_bd(union enetc_tx_bd *txbd)\n{\n\tmemset(txbd, 0, sizeof(*txbd));\n}\n\n \n#define ENETC_TXBD_E_FLAGS_VLAN_INS\tBIT(0)\n#define ENETC_TXBD_E_FLAGS_ONE_STEP_PTP\tBIT(1)\n#define ENETC_TXBD_E_FLAGS_TWO_STEP_PTP\tBIT(2)\n\nunion enetc_rx_bd {\n\tstruct {\n\t\t__le64 addr;\n\t\tu8 reserved[8];\n\t} w;\n\tstruct {\n\t\t__le16 inet_csum;\n\t\t__le16 parse_summary;\n\t\t__le32 rss_hash;\n\t\t__le16 buf_len;\n\t\t__le16 vlan_opt;\n\t\tunion {\n\t\t\tstruct {\n\t\t\t\t__le16 flags;\n\t\t\t\t__le16 error;\n\t\t\t};\n\t\t\t__le32 lstatus;\n\t\t};\n\t} r;\n\tstruct {\n\t\t__le32 tstamp;\n\t\tu8 reserved[12];\n\t} ext;\n};\n\n#define ENETC_RXBD_LSTATUS_R\tBIT(30)\n#define ENETC_RXBD_LSTATUS_F\tBIT(31)\n#define ENETC_RXBD_ERR_MASK\t0xff\n#define ENETC_RXBD_LSTATUS(flags)\t((flags) << 16)\n#define ENETC_RXBD_FLAG_VLAN\tBIT(9)\n#define ENETC_RXBD_FLAG_TSTMP\tBIT(10)\n#define ENETC_RXBD_FLAG_TPID\tGENMASK(1, 0)\n\n#define ENETC_MAC_ADDR_FILT_CNT\t8  \n#define EMETC_MAC_ADDR_FILT_RES\t3  \n#define ENETC_MAX_NUM_VFS\t2\n\n#define ENETC_CBD_FLAGS_SF\tBIT(7)  \n#define ENETC_CBD_STATUS_MASK\t0xf\n\nstruct enetc_cmd_rfse {\n\tu8 smac_h[6];\n\tu8 smac_m[6];\n\tu8 dmac_h[6];\n\tu8 dmac_m[6];\n\t__be32 sip_h[4];\n\t__be32 sip_m[4];\n\t__be32 dip_h[4];\n\t__be32 dip_m[4];\n\tu16 ethtype_h;\n\tu16 ethtype_m;\n\tu16 ethtype4_h;\n\tu16 ethtype4_m;\n\tu16 sport_h;\n\tu16 sport_m;\n\tu16 dport_h;\n\tu16 dport_m;\n\tu16 vlan_h;\n\tu16 vlan_m;\n\tu8 proto_h;\n\tu8 proto_m;\n\tu16 flags;\n\tu16 result;\n\tu16 mode;\n};\n\n#define ENETC_RFSE_EN\tBIT(15)\n#define ENETC_RFSE_MODE_BD\t2\n\nstatic inline void enetc_load_primary_mac_addr(struct enetc_hw *hw,\n\t\t\t\t\t       struct net_device *ndev)\n{\n\tu8 addr[ETH_ALEN] __aligned(4);\n\n\t*(u32 *)addr = __raw_readl(hw->reg + ENETC_SIPMAR0);\n\t*(u16 *)(addr + 4) = __raw_readw(hw->reg + ENETC_SIPMAR1);\n\teth_hw_addr_set(ndev, addr);\n}\n\n#define ENETC_SI_INT_IDX\t0\n \n#define ENETC_BDR_INT_BASE_IDX\t1\n\n \n\n \nenum enetc_msg_cmd_status {\n\tENETC_MSG_CMD_STATUS_OK,\n\tENETC_MSG_CMD_STATUS_FAIL\n};\n\n \nenum enetc_msg_cmd_type {\n\tENETC_MSG_CMD_MNG_MAC = 1,  \n\tENETC_MSG_CMD_MNG_RX_MAC_FILTER, \n\tENETC_MSG_CMD_MNG_RX_VLAN_FILTER  \n};\n\n \nenum enetc_msg_cmd_action_type {\n\tENETC_MSG_CMD_MNG_ADD = 1,\n\tENETC_MSG_CMD_MNG_REMOVE\n};\n\n \nstruct enetc_msg_cmd_header {\n\tu16 type;\t \n\tu16 id;\t\t \n};\n\n \n\nstatic inline void enetc_bdr_enable_rxvlan(struct enetc_hw *hw, int idx,\n\t\t\t\t\t   bool en)\n{\n\tu32 val = enetc_rxbdr_rd(hw, idx, ENETC_RBMR);\n\n\tval = (val & ~ENETC_RBMR_VTE) | (en ? ENETC_RBMR_VTE : 0);\n\tenetc_rxbdr_wr(hw, idx, ENETC_RBMR, val);\n}\n\nstatic inline void enetc_bdr_enable_txvlan(struct enetc_hw *hw, int idx,\n\t\t\t\t\t   bool en)\n{\n\tu32 val = enetc_txbdr_rd(hw, idx, ENETC_TBMR);\n\n\tval = (val & ~ENETC_TBMR_VIH) | (en ? ENETC_TBMR_VIH : 0);\n\tenetc_txbdr_wr(hw, idx, ENETC_TBMR, val);\n}\n\nstatic inline void enetc_set_bdr_prio(struct enetc_hw *hw, int bdr_idx,\n\t\t\t\t      int prio)\n{\n\tu32 val = enetc_txbdr_rd(hw, bdr_idx, ENETC_TBMR);\n\n\tval &= ~ENETC_TBMR_PRIO_MASK;\n\tval |= ENETC_TBMR_SET_PRIO(prio);\n\tenetc_txbdr_wr(hw, bdr_idx, ENETC_TBMR, val);\n}\n\nenum bdcr_cmd_class {\n\tBDCR_CMD_UNSPEC = 0,\n\tBDCR_CMD_MAC_FILTER,\n\tBDCR_CMD_VLAN_FILTER,\n\tBDCR_CMD_RSS,\n\tBDCR_CMD_RFS,\n\tBDCR_CMD_PORT_GCL,\n\tBDCR_CMD_RECV_CLASSIFIER,\n\tBDCR_CMD_STREAM_IDENTIFY,\n\tBDCR_CMD_STREAM_FILTER,\n\tBDCR_CMD_STREAM_GCL,\n\tBDCR_CMD_FLOW_METER,\n\t__BDCR_CMD_MAX_LEN,\n\tBDCR_CMD_MAX_LEN = __BDCR_CMD_MAX_LEN - 1,\n};\n\n \nstruct tgs_gcl_conf {\n\tu8\tatc;\t \n\tu8\tres[7];\n\tstruct {\n\t\tu8\tres1[4];\n\t\t__le16\tacl_len;\n\t\tu8\tres2[2];\n\t};\n};\n\n \nstruct gce {\n\t__le32\tperiod;\n\tu8\tgate;\n\tu8\tres[3];\n};\n\n \nstruct tgs_gcl_data {\n\t__le32\t\tbtl;\n\t__le32\t\tbth;\n\t__le32\t\tct;\n\t__le32\t\tcte;\n\tstruct gce\tentry[];\n};\n\n \nstruct streamid_conf {\n\t__le32\tstream_handle;\t \n\t__le32\tiports;\n\t\tu8\tid_type;\n\t\tu8\toui[3];\n\t\tu8\tres[3];\n\t\tu8\ten;\n};\n\n#define ENETC_CBDR_SID_VID_MASK 0xfff\n#define ENETC_CBDR_SID_VIDM BIT(12)\n#define ENETC_CBDR_SID_TG_MASK 0xc000\n \nstruct streamid_data {\n\tunion {\n\t\tu8 dmac[6];\n\t\tu8 smac[6];\n\t};\n\tu16     vid_vidm_tg;\n};\n\n#define ENETC_CBDR_SFI_PRI_MASK 0x7\n#define ENETC_CBDR_SFI_PRIM\t\tBIT(3)\n#define ENETC_CBDR_SFI_BLOV\t\tBIT(4)\n#define ENETC_CBDR_SFI_BLEN\t\tBIT(5)\n#define ENETC_CBDR_SFI_MSDUEN\tBIT(6)\n#define ENETC_CBDR_SFI_FMITEN\tBIT(7)\n#define ENETC_CBDR_SFI_ENABLE\tBIT(7)\n \nstruct sfi_conf {\n\t__le32\tstream_handle;\n\t\tu8\tmulti;\n\t\tu8\tres[2];\n\t\tu8\tsthm;\n\t \n\t__le16\tfm_inst_table_index;\n\t__le16\tmsdu;\n\t__le16\tsg_inst_table_index;\n\t\tu8\tres1[2];\n\t__le32\tinput_ports;\n\t\tu8\tres2[3];\n\t\tu8\ten;\n};\n\n \nstruct sfi_counter_data {\n\tu32 matchl;\n\tu32 matchh;\n\tu32 msdu_dropl;\n\tu32 msdu_droph;\n\tu32 stream_gate_dropl;\n\tu32 stream_gate_droph;\n\tu32 flow_meter_dropl;\n\tu32 flow_meter_droph;\n};\n\n#define ENETC_CBDR_SGI_OIPV_MASK 0x7\n#define ENETC_CBDR_SGI_OIPV_EN\tBIT(3)\n#define ENETC_CBDR_SGI_CGTST\tBIT(6)\n#define ENETC_CBDR_SGI_OGTST\tBIT(7)\n#define ENETC_CBDR_SGI_CFG_CHG  BIT(1)\n#define ENETC_CBDR_SGI_CFG_PND  BIT(2)\n#define ENETC_CBDR_SGI_OEX\t\tBIT(4)\n#define ENETC_CBDR_SGI_OEXEN\tBIT(5)\n#define ENETC_CBDR_SGI_IRX\t\tBIT(6)\n#define ENETC_CBDR_SGI_IRXEN\tBIT(7)\n#define ENETC_CBDR_SGI_ACLLEN_MASK 0x3\n#define ENETC_CBDR_SGI_OCLLEN_MASK 0xc\n#define\tENETC_CBDR_SGI_EN\t\tBIT(7)\n \nstruct sgi_table {\n\tu8\tres[8];\n\tu8\toipv;\n\tu8\tres0[2];\n\tu8\tocgtst;\n\tu8\tres1[7];\n\tu8\tgset;\n\tu8\toacl_len;\n\tu8\tres2[2];\n\tu8\ten;\n};\n\n#define ENETC_CBDR_SGI_AIPV_MASK 0x7\n#define ENETC_CBDR_SGI_AIPV_EN\tBIT(3)\n#define ENETC_CBDR_SGI_AGTST\tBIT(7)\n\n \nstruct sgcl_conf {\n\tu8\taipv;\n\tu8\tres[2];\n\tu8\tagtst;\n\tu8\tres1[4];\n\tunion {\n\t\tstruct {\n\t\t\tu8 res2[4];\n\t\t\tu8 acl_len;\n\t\t\tu8 res3[3];\n\t\t};\n\t\tu8 cct[8];  \n\t};\n};\n\n#define ENETC_CBDR_SGL_IOMEN\tBIT(0)\n#define ENETC_CBDR_SGL_IPVEN\tBIT(3)\n#define ENETC_CBDR_SGL_GTST\t\tBIT(4)\n#define ENETC_CBDR_SGL_IPV_MASK 0xe\n \nstruct sgce {\n\tu32\tinterval;\n\tu8\tmsdu[3];\n\tu8\tmulti;\n};\n\n \nstruct sgcl_data {\n\tu32\t\tbtl;\n\tu32\t\tbth;\n\tu32\t\tct;\n\tu32\t\tcte;\n\tstruct sgce\tsgcl[];\n};\n\n#define ENETC_CBDR_FMI_MR\tBIT(0)\n#define ENETC_CBDR_FMI_MREN\tBIT(1)\n#define ENETC_CBDR_FMI_DOY\tBIT(2)\n#define\tENETC_CBDR_FMI_CM\tBIT(3)\n#define ENETC_CBDR_FMI_CF\tBIT(4)\n#define ENETC_CBDR_FMI_NDOR\tBIT(5)\n#define ENETC_CBDR_FMI_OALEN\tBIT(6)\n#define ENETC_CBDR_FMI_IRFPP_MASK GENMASK(4, 0)\n\n \nstruct fmi_conf {\n\t__le32\tcir;\n\t__le32\tcbs;\n\t__le32\teir;\n\t__le32\tebs;\n\t\tu8\tconf;\n\t\tu8\tres1;\n\t\tu8\tir_fpp;\n\t\tu8\tres2[4];\n\t\tu8\ten;\n};\n\nstruct enetc_cbd {\n\tunion{\n\t\tstruct sfi_conf sfi_conf;\n\t\tstruct sgi_table sgi_table;\n\t\tstruct fmi_conf fmi_conf;\n\t\tstruct {\n\t\t\t__le32\taddr[2];\n\t\t\tunion {\n\t\t\t\t__le32\topt[4];\n\t\t\t\tstruct tgs_gcl_conf\tgcl_conf;\n\t\t\t\tstruct streamid_conf\tsid_set;\n\t\t\t\tstruct sgcl_conf\tsgcl_conf;\n\t\t\t};\n\t\t};\t \n\t\t__le32 data[6];\n\t};\n\t__le16 index;\n\t__le16 length;\n\tu8 cmd;\n\tu8 cls;\n\tu8 _res;\n\tu8 status_flags;\n};\n\n#define ENETC_CLK  400000000ULL\nstatic inline u32 enetc_cycles_to_usecs(u32 cycles)\n{\n\treturn (u32)div_u64(cycles * 1000000ULL, ENETC_CLK);\n}\n\nstatic inline u32 enetc_usecs_to_cycles(u32 usecs)\n{\n\treturn (u32)div_u64(usecs * ENETC_CLK, 1000000ULL);\n}\n\n \n#define ENETC_PTCFPR(n)\t\t\t(0x1910 + (n) * 4)  \n#define ENETC_PTCFPR_FPE\t\tBIT(31)\n\n \n#define ENETC_PTGCR\t\t\t0x11a00\n#define ENETC_PTGCR_TGE\t\t\tBIT(31)\n#define ENETC_PTGCR_TGPE\t\tBIT(30)\n\n \n#define ENETC_PTGCAPR\t\t\t0x11a08\n#define ENETC_PTGCAPR_MAX_GCL_LEN_MASK\tGENMASK(15, 0)\n\n \n#define ENETC_PTCTSDR(n)\t(0x1210 + 4 * (n))\n#define ENETC_TSDE\t\tBIT(31)\n\n \n#define ENETC_PPSFPMR 0x11b00\n#define ENETC_PPSFPMR_PSFPEN BIT(0)\n#define ENETC_PPSFPMR_VS BIT(1)\n#define ENETC_PPSFPMR_PVC BIT(2)\n#define ENETC_PPSFPMR_PVZC BIT(3)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}