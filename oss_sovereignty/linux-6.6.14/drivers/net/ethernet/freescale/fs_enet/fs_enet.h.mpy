{
  "module_name": "fs_enet.h",
  "hash_id": "039f64ebcfe32f0ae58b31a8697efb626e9a06d7bdec9b2044ffb513098f8ca4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/freescale/fs_enet/fs_enet.h",
  "human_readable_source": " \n#ifndef FS_ENET_H\n#define FS_ENET_H\n\n#include <linux/clk.h>\n#include <linux/mii.h>\n#include <linux/netdevice.h>\n#include <linux/types.h>\n#include <linux/list.h>\n#include <linux/phy.h>\n#include <linux/dma-mapping.h>\n\n#ifdef CONFIG_CPM1\n#include <asm/cpm1.h>\n#endif\n\n#if defined(CONFIG_FS_ENET_HAS_FEC)\n#include <asm/cpm.h>\n\n#if defined(CONFIG_FS_ENET_MPC5121_FEC)\n \nstruct fec {\n\tu32 fec_reserved0;\n\tu32 fec_ievent;\t\t\t \n\tu32 fec_imask;\t\t\t \n\tu32 fec_reserved1;\n\tu32 fec_r_des_active;\t\t \n\tu32 fec_x_des_active;\t\t \n\tu32 fec_reserved2[3];\n\tu32 fec_ecntrl;\t\t\t \n\tu32 fec_reserved3[6];\n\tu32 fec_mii_data;\t\t \n\tu32 fec_mii_speed;\t\t \n\tu32 fec_reserved4[7];\n\tu32 fec_mib_ctrlstat;\t\t \n\tu32 fec_reserved5[7];\n\tu32 fec_r_cntrl;\t\t \n\tu32 fec_reserved6[15];\n\tu32 fec_x_cntrl;\t\t \n\tu32 fec_reserved7[7];\n\tu32 fec_addr_low;\t\t \n\tu32 fec_addr_high;\t\t \n\tu32 fec_opd;\t\t\t \n\tu32 fec_reserved8[10];\n\tu32 fec_hash_table_high;\t \n\tu32 fec_hash_table_low;\t\t \n\tu32 fec_grp_hash_table_high;\t \n\tu32 fec_grp_hash_table_low;\t \n\tu32 fec_reserved9[7];\n\tu32 fec_x_wmrk;\t\t\t \n\tu32 fec_reserved10;\n\tu32 fec_r_bound;\t\t \n\tu32 fec_r_fstart;\t\t \n\tu32 fec_reserved11[11];\n\tu32 fec_r_des_start;\t\t \n\tu32 fec_x_des_start;\t\t \n\tu32 fec_r_buff_size;\t\t \n\tu32 fec_reserved12[26];\n\tu32 fec_dma_control;\t\t \n};\n#endif\n\nstruct fec_info {\n\tstruct fec __iomem *fecp;\n\tu32 mii_speed;\n};\n#endif\n\n#ifdef CONFIG_CPM2\n#include <asm/cpm2.h>\n#endif\n\n \nstruct fs_ops {\n\tint (*setup_data)(struct net_device *dev);\n\tint (*allocate_bd)(struct net_device *dev);\n\tvoid (*free_bd)(struct net_device *dev);\n\tvoid (*cleanup_data)(struct net_device *dev);\n\tvoid (*set_multicast_list)(struct net_device *dev);\n\tvoid (*adjust_link)(struct net_device *dev);\n\tvoid (*restart)(struct net_device *dev);\n\tvoid (*stop)(struct net_device *dev);\n\tvoid (*napi_clear_event)(struct net_device *dev);\n\tvoid (*napi_enable)(struct net_device *dev);\n\tvoid (*napi_disable)(struct net_device *dev);\n\tvoid (*rx_bd_done)(struct net_device *dev);\n\tvoid (*tx_kickstart)(struct net_device *dev);\n\tu32 (*get_int_events)(struct net_device *dev);\n\tvoid (*clear_int_events)(struct net_device *dev, u32 int_events);\n\tvoid (*ev_error)(struct net_device *dev, u32 int_events);\n\tint (*get_regs)(struct net_device *dev, void *p, int *sizep);\n\tint (*get_regs_len)(struct net_device *dev);\n\tvoid (*tx_restart)(struct net_device *dev);\n};\n\nstruct phy_info {\n\tunsigned int id;\n\tconst char *name;\n\tvoid (*startup) (struct net_device * dev);\n\tvoid (*shutdown) (struct net_device * dev);\n\tvoid (*ack_int) (struct net_device * dev);\n};\n\n \n#define MAX_MTU 1508\t\t \n#define MIN_MTU 46\t\t \n#define CRC_LEN 4\n\n#define PKT_MAXBUF_SIZE\t\t(MAX_MTU+ETH_HLEN+CRC_LEN)\n#define PKT_MINBUF_SIZE\t\t(MIN_MTU+ETH_HLEN+CRC_LEN)\n\n \n#define PKT_MAXBLR_SIZE\t\t((PKT_MAXBUF_SIZE + 31) & ~31)\n \n#define ENET_RX_ALIGN  16\n#define ENET_RX_FRSIZE L1_CACHE_ALIGN(PKT_MAXBUF_SIZE + ENET_RX_ALIGN - 1)\n\nstruct fs_platform_info {\n\t \n\tu32 cp_command;\t\t \n\n\tu32 dpram_offset;\n\n\tstruct device_node *phy_node;\n\n\tint rx_ring, tx_ring;\t \n\tint rx_copybreak;\t \n\tint napi_weight;\t \n\n\tint use_rmii;\t\t \n\n\tstruct clk *clk_per;\t \n};\n\nstruct fs_enet_private {\n\tstruct napi_struct napi;\n\tstruct device *dev;\t \n\tstruct net_device *ndev;\n\tspinlock_t lock;\t \n\tspinlock_t tx_lock;\t \n\tstruct fs_platform_info *fpi;\n\tstruct work_struct timeout_work;\n\tconst struct fs_ops *ops;\n\tint rx_ring, tx_ring;\n\tdma_addr_t ring_mem_addr;\n\tvoid __iomem *ring_base;\n\tstruct sk_buff **rx_skbuff;\n\tstruct sk_buff **tx_skbuff;\n\tchar *mapped_as_page;\n\tcbd_t __iomem *rx_bd_base;\t \n\tcbd_t __iomem *tx_bd_base;\n\tcbd_t __iomem *dirty_tx;\t \n\tcbd_t __iomem *cur_rx;\n\tcbd_t __iomem *cur_tx;\n\tint tx_free;\n\tconst struct phy_info *phy;\n\tu32 msg_enable;\n\tstruct mii_if_info mii_if;\n\tunsigned int last_mii_status;\n\tint interrupt;\n\n\tint oldduplex, oldspeed, oldlink;\t \n\n\t \n\tu32 ev_napi;\t\t \n\tu32 ev;\t\t\t \n\tu32 ev_err;\t\t \n\n\tu16 bd_rx_empty;\t \n\tu16 bd_rx_err;\t\t \n\n\tunion {\n\t\tstruct {\n\t\t\tint idx;\t\t \n\t\t\tvoid __iomem *fecp;\t \n\t\t\tu32 hthi, htlo;\t\t \n\t\t} fec;\n\n\t\tstruct {\n\t\t\tint idx;\t\t \n\t\t\tvoid __iomem *fccp;\t \n\t\t\tvoid __iomem *ep;\t \n\t\t\tvoid __iomem *fcccp;\t \n\t\t\tvoid __iomem *mem;\t \n\t\t\tu32 gaddrh, gaddrl;\t \n\t\t} fcc;\n\n\t\tstruct {\n\t\t\tint idx;\t\t \n\t\t\tvoid __iomem *sccp;\t \n\t\t\tvoid __iomem *ep;\t \n\t\t\tu32 hthi, htlo;\t\t \n\t\t} scc;\n\n\t};\n};\n\n \n\nvoid fs_init_bds(struct net_device *dev);\nvoid fs_cleanup_bds(struct net_device *dev);\n\n \n\n#define DRV_MODULE_NAME\t\t\"fs_enet\"\n#define PFX DRV_MODULE_NAME\t\": \"\n\n \n \n\n \n#if defined(CONFIG_CPM1)\n \n#define __cbd_out32(addr, x)\t__raw_writel(x, addr)\n#define __cbd_out16(addr, x)\t__raw_writew(x, addr)\n#define __cbd_in32(addr)\t__raw_readl(addr)\n#define __cbd_in16(addr)\t__raw_readw(addr)\n#else\n \n#define __cbd_out32(addr, x)\tout_be32(addr, x)\n#define __cbd_out16(addr, x)\tout_be16(addr, x)\n#define __cbd_in32(addr)\tin_be32(addr)\n#define __cbd_in16(addr)\tin_be16(addr)\n#endif\n\n \n#define CBDW_SC(_cbd, _sc) \t\t__cbd_out16(&(_cbd)->cbd_sc, (_sc))\n#define CBDW_DATLEN(_cbd, _datlen)\t__cbd_out16(&(_cbd)->cbd_datlen, (_datlen))\n#define CBDW_BUFADDR(_cbd, _bufaddr)\t__cbd_out32(&(_cbd)->cbd_bufaddr, (_bufaddr))\n\n \n#define CBDR_SC(_cbd) \t\t\t__cbd_in16(&(_cbd)->cbd_sc)\n#define CBDR_DATLEN(_cbd)\t\t__cbd_in16(&(_cbd)->cbd_datlen)\n#define CBDR_BUFADDR(_cbd)\t\t__cbd_in32(&(_cbd)->cbd_bufaddr)\n\n \n#define CBDS_SC(_cbd, _sc) \t\tCBDW_SC(_cbd, CBDR_SC(_cbd) | (_sc))\n\n \n#define CBDC_SC(_cbd, _sc) \t\tCBDW_SC(_cbd, CBDR_SC(_cbd) & ~(_sc))\n\n \n\nextern const struct fs_ops fs_fec_ops;\nextern const struct fs_ops fs_fcc_ops;\nextern const struct fs_ops fs_scc_ops;\n\n \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}