{
  "module_name": "hw_atl2_llh.c",
  "hash_id": "f3e3d1ba4d1ede052fb92b9872f1d796bdd6b782e126d3c4e3c76971fee6400f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/aquantia/atlantic/hw_atl2/hw_atl2_llh.c",
  "human_readable_source": "\n \n\n#include \"hw_atl2_llh.h\"\n#include \"hw_atl2_llh_internal.h\"\n#include \"aq_hw_utils.h\"\n\nvoid hw_atl2_rpf_redirection_table2_select_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\t       u32 select)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_PIF_RPF_REDIR2_ENI_ADR,\n\t\t\t    HW_ATL2_RPF_PIF_RPF_REDIR2_ENI_MSK,\n\t\t\t    HW_ATL2_RPF_PIF_RPF_REDIR2_ENI_SHIFT, select);\n}\n\nvoid hw_atl2_rpf_rss_hash_type_set(struct aq_hw_s *aq_hw, u32 rss_hash_type)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_PIF_RPF_RSS_HASH_TYPEI_ADR,\n\t\t\t    HW_ATL2_RPF_PIF_RPF_RSS_HASH_TYPEI_MSK,\n\t\t\t    HW_ATL2_RPF_PIF_RPF_RSS_HASH_TYPEI_SHIFT,\n\t\t\t    rss_hash_type);\n}\n\n \n\nvoid hw_atl2_rpf_new_enable_set(struct aq_hw_s *aq_hw, u32 enable)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_NEW_EN_ADR,\n\t\t\t    HW_ATL2_RPF_NEW_EN_MSK,\n\t\t\t    HW_ATL2_RPF_NEW_EN_SHIFT,\n\t\t\t    enable);\n}\n\nvoid hw_atl2_rpfl2_uc_flr_tag_set(struct aq_hw_s *aq_hw, u32 tag, u32 filter)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPFL2UC_TAG_ADR(filter),\n\t\t\t    HW_ATL2_RPFL2UC_TAG_MSK,\n\t\t\t    HW_ATL2_RPFL2UC_TAG_SHIFT,\n\t\t\t    tag);\n}\n\nvoid hw_atl2_rpfl2_bc_flr_tag_set(struct aq_hw_s *aq_hw, u32 tag)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_L2_BC_TAG_ADR,\n\t\t\t    HW_ATL2_RPF_L2_BC_TAG_MSK,\n\t\t\t    HW_ATL2_RPF_L2_BC_TAG_SHIFT,\n\t\t\t    tag);\n}\n\nvoid hw_atl2_new_rpf_rss_redir_set(struct aq_hw_s *aq_hw, u32 tc, u32 index,\n\t\t\t\t   u32 queue)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_RSS_REDIR_ADR(tc, index),\n\t\t\t    HW_ATL2_RPF_RSS_REDIR_MSK(tc),\n\t\t\t    HW_ATL2_RPF_RSS_REDIR_SHIFT(tc),\n\t\t\t    queue);\n}\n\nvoid hw_atl2_rpf_vlan_flr_tag_set(struct aq_hw_s *aq_hw, u32 tag, u32 filter)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_VL_TAG_ADR(filter),\n\t\t\t    HW_ATL2_RPF_VL_TAG_MSK,\n\t\t\t    HW_ATL2_RPF_VL_TAG_SHIFT,\n\t\t\t    tag);\n}\n\n \n\nvoid hw_atl2_tpb_tx_tc_q_rand_map_en_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\t const u32 tc_q_rand_map_en)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_TPB_TX_TC_Q_RAND_MAP_EN_ADR,\n\t\t\t    HW_ATL2_TPB_TX_TC_Q_RAND_MAP_EN_MSK,\n\t\t\t    HW_ATL2_TPB_TX_TC_Q_RAND_MAP_EN_SHIFT,\n\t\t\t    tc_q_rand_map_en);\n}\n\nvoid hw_atl2_tpb_tx_buf_clk_gate_en_set(struct aq_hw_s *aq_hw, u32 clk_gate_en)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_TPB_TX_BUF_CLK_GATE_EN_ADR,\n\t\t\t    HW_ATL2_TPB_TX_BUF_CLK_GATE_EN_MSK,\n\t\t\t    HW_ATL2_TPB_TX_BUF_CLK_GATE_EN_SHIFT,\n\t\t\t    clk_gate_en);\n}\n\nvoid hw_atl2_reg_tx_intr_moder_ctrl_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\tu32 tx_intr_moderation_ctl,\n\t\t\t\t\tu32 queue)\n{\n\taq_hw_write_reg(aq_hw, HW_ATL2_TX_INTR_MODERATION_CTL_ADR(queue),\n\t\t\ttx_intr_moderation_ctl);\n}\n\nvoid hw_atl2_tps_tx_pkt_shed_data_arb_mode_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\t       const u32 data_arb_mode)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_TPS_DATA_TC_ARB_MODE_ADR,\n\t\t\t    HW_ATL2_TPS_DATA_TC_ARB_MODE_MSK,\n\t\t\t    HW_ATL2_TPS_DATA_TC_ARB_MODE_SHIFT,\n\t\t\t    data_arb_mode);\n}\n\nvoid hw_atl2_tps_tx_pkt_shed_tc_data_max_credit_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\t\t    const u32 tc,\n\t\t\t\t\t\t    const u32 max_credit)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_TPS_DATA_TCTCREDIT_MAX_ADR(tc),\n\t\t\t    HW_ATL2_TPS_DATA_TCTCREDIT_MAX_MSK,\n\t\t\t    HW_ATL2_TPS_DATA_TCTCREDIT_MAX_SHIFT,\n\t\t\t    max_credit);\n}\n\nvoid hw_atl2_tps_tx_pkt_shed_tc_data_weight_set(struct aq_hw_s *aq_hw,\n\t\t\t\t\t\tconst u32 tc,\n\t\t\t\t\t\tconst u32 weight)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_TPS_DATA_TCTWEIGHT_ADR(tc),\n\t\t\t    HW_ATL2_TPS_DATA_TCTWEIGHT_MSK,\n\t\t\t    HW_ATL2_TPS_DATA_TCTWEIGHT_SHIFT,\n\t\t\t    weight);\n}\n\nu32 hw_atl2_get_hw_version(struct aq_hw_s *aq_hw)\n{\n\treturn aq_hw_read_reg(aq_hw, HW_ATL2_FPGA_VER_ADR);\n}\n\nvoid hw_atl2_init_launchtime(struct aq_hw_s *aq_hw)\n{\n\tu32 hw_ver = hw_atl2_get_hw_version(aq_hw);\n\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_LT_CTRL_ADR,\n\t\t\t    HW_ATL2_LT_CTRL_CLK_RATIO_MSK,\n\t\t\t    HW_ATL2_LT_CTRL_CLK_RATIO_SHIFT,\n\t\t\t    hw_ver  < HW_ATL2_FPGA_VER_U32(1, 0, 0, 0) ?\n\t\t\t    HW_ATL2_LT_CTRL_CLK_RATIO_FULL_SPEED :\n\t\t\t    hw_ver >= HW_ATL2_FPGA_VER_U32(1, 0, 85, 2) ?\n\t\t\t    HW_ATL2_LT_CTRL_CLK_RATIO_HALF_SPEED :\n\t\t\t    HW_ATL2_LT_CTRL_CLK_RATIO_QUATER_SPEED);\n}\n\n \nvoid hw_atl2_rpf_act_rslvr_record_set(struct aq_hw_s *aq_hw, u8 location,\n\t\t\t\t      u32 tag, u32 mask, u32 action)\n{\n\taq_hw_write_reg(aq_hw,\n\t\t\tHW_ATL2_RPF_ACT_RSLVR_REQ_TAG_ADR(location),\n\t\t\ttag);\n\taq_hw_write_reg(aq_hw,\n\t\t\tHW_ATL2_RPF_ACT_RSLVR_TAG_MASK_ADR(location),\n\t\t\tmask);\n\taq_hw_write_reg(aq_hw,\n\t\t\tHW_ATL2_RPF_ACT_RSLVR_ACTN_ADR(location),\n\t\t\taction);\n}\n\nvoid hw_atl2_rpf_act_rslvr_section_en_set(struct aq_hw_s *aq_hw, u32 sections)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_RPF_REC_TAB_EN_ADR,\n\t\t\t    HW_ATL2_RPF_REC_TAB_EN_MSK,\n\t\t\t    HW_ATL2_RPF_REC_TAB_EN_SHIFT,\n\t\t\t    sections);\n}\n\nvoid hw_atl2_mif_shared_buf_get(struct aq_hw_s *aq_hw, int offset, u32 *data,\n\t\t\t\tint len)\n{\n\tint j = 0;\n\tint i;\n\n\tfor (i = offset; i < offset + len; i++, j++)\n\t\tdata[j] = aq_hw_read_reg(aq_hw,\n\t\t\t\t\t HW_ATL2_MIF_SHARED_BUFFER_IN_ADR(i));\n}\n\nvoid hw_atl2_mif_shared_buf_write(struct aq_hw_s *aq_hw, int offset, u32 *data,\n\t\t\t\t  int len)\n{\n\tint j = 0;\n\tint i;\n\n\tfor (i = offset; i < offset + len; i++, j++)\n\t\taq_hw_write_reg(aq_hw, HW_ATL2_MIF_SHARED_BUFFER_IN_ADR(i),\n\t\t\t\tdata[j]);\n}\n\nvoid hw_atl2_mif_shared_buf_read(struct aq_hw_s *aq_hw, int offset, u32 *data,\n\t\t\t\t int len)\n{\n\tint j = 0;\n\tint i;\n\n\tfor (i = offset; i < offset + len; i++, j++)\n\t\tdata[j] = aq_hw_read_reg(aq_hw,\n\t\t\t\t\t HW_ATL2_MIF_SHARED_BUFFER_OUT_ADR(i));\n}\n\nvoid hw_atl2_mif_host_finished_write_set(struct aq_hw_s *aq_hw, u32 finish)\n{\n\taq_hw_write_reg_bit(aq_hw, HW_ATL2_MIF_HOST_FINISHED_WRITE_ADR,\n\t\t\t    HW_ATL2_MIF_HOST_FINISHED_WRITE_MSK,\n\t\t\t    HW_ATL2_MIF_HOST_FINISHED_WRITE_SHIFT,\n\t\t\t    finish);\n}\n\nu32 hw_atl2_mif_mcp_finished_read_get(struct aq_hw_s *aq_hw)\n{\n\treturn aq_hw_read_reg_bit(aq_hw, HW_ATL2_MIF_MCP_FINISHED_READ_ADR,\n\t\t\t\t  HW_ATL2_MIF_MCP_FINISHED_READ_MSK,\n\t\t\t\t  HW_ATL2_MIF_MCP_FINISHED_READ_SHIFT);\n}\n\nu32 hw_atl2_mif_mcp_boot_reg_get(struct aq_hw_s *aq_hw)\n{\n\treturn aq_hw_read_reg(aq_hw, HW_ATL2_MIF_BOOT_REG_ADR);\n}\n\nvoid hw_atl2_mif_mcp_boot_reg_set(struct aq_hw_s *aq_hw, u32 val)\n{\n\treturn aq_hw_write_reg(aq_hw, HW_ATL2_MIF_BOOT_REG_ADR, val);\n}\n\nu32 hw_atl2_mif_host_req_int_get(struct aq_hw_s *aq_hw)\n{\n\treturn aq_hw_read_reg(aq_hw, HW_ATL2_MCP_HOST_REQ_INT_ADR);\n}\n\nvoid hw_atl2_mif_host_req_int_clr(struct aq_hw_s *aq_hw, u32 val)\n{\n\treturn aq_hw_write_reg(aq_hw, HW_ATL2_MCP_HOST_REQ_INT_CLR_ADR,\n\t\t\t       val);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}