{
  "module_name": "ks8851.h",
  "hash_id": "61f645a42a1c08a3123cc8ec0d42c8089af9bf1fee584d8e51caab46ec60b4c9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/micrel/ks8851.h",
  "human_readable_source": " \n \n\n#ifndef __KS8851_H__\n#define __KS8851_H__\n\n#include <linux/eeprom_93cx6.h>\n\n#define KS_CCR\t\t\t\t\t0x08\n#define CCR_LE\t\t\t\t\t(1 << 10)    \n#define CCR_EEPROM\t\t\t\t(1 << 9)\n#define CCR_SPI\t\t\t\t\t(1 << 8)     \n#define CCR_8BIT\t\t\t\t(1 << 7)     \n#define CCR_16BIT\t\t\t\t(1 << 6)     \n#define CCR_32BIT\t\t\t\t(1 << 5)     \n#define CCR_SHARED\t\t\t\t(1 << 4)     \n#define CCR_48PIN\t\t\t\t(1 << 1)     \n#define CCR_32PIN\t\t\t\t(1 << 0)     \n\n \n#define KS_MAR(_m)\t\t\t\t(0x14 - (_m))\n#define KS_MARL\t\t\t\t\t0x10\n#define KS_MARM\t\t\t\t\t0x12\n#define KS_MARH\t\t\t\t\t0x14\n\n#define KS_OBCR\t\t\t\t\t0x20\n#define OBCR_ODS_16mA\t\t\t\t(1 << 6)\n\n#define KS_EEPCR\t\t\t\t0x22\n#define EEPCR_EESRWA\t\t\t\t(1 << 5)\n#define EEPCR_EESA\t\t\t\t(1 << 4)\n#define EEPCR_EESB\t\t\t\t(1 << 3)\n#define EEPCR_EEDO\t\t\t\t(1 << 2)\n#define EEPCR_EESCK\t\t\t\t(1 << 1)\n#define EEPCR_EECS\t\t\t\t(1 << 0)\n\n#define KS_MBIR\t\t\t\t\t0x24\n#define MBIR_TXMBF\t\t\t\t(1 << 12)\n#define MBIR_TXMBFA\t\t\t\t(1 << 11)\n#define MBIR_RXMBF\t\t\t\t(1 << 4)\n#define MBIR_RXMBFA\t\t\t\t(1 << 3)\n\n#define KS_GRR\t\t\t\t\t0x26\n#define GRR_QMU\t\t\t\t\t(1 << 1)\n#define GRR_GSR\t\t\t\t\t(1 << 0)\n\n#define KS_WFCR\t\t\t\t\t0x2A\n#define WFCR_MPRXE\t\t\t\t(1 << 7)\n#define WFCR_WF3E\t\t\t\t(1 << 3)\n#define WFCR_WF2E\t\t\t\t(1 << 2)\n#define WFCR_WF1E\t\t\t\t(1 << 1)\n#define WFCR_WF0E\t\t\t\t(1 << 0)\n\n#define KS_WF0CRC0\t\t\t\t0x30\n#define KS_WF0CRC1\t\t\t\t0x32\n#define KS_WF0BM0\t\t\t\t0x34\n#define KS_WF0BM1\t\t\t\t0x36\n#define KS_WF0BM2\t\t\t\t0x38\n#define KS_WF0BM3\t\t\t\t0x3A\n\n#define KS_WF1CRC0\t\t\t\t0x40\n#define KS_WF1CRC1\t\t\t\t0x42\n#define KS_WF1BM0\t\t\t\t0x44\n#define KS_WF1BM1\t\t\t\t0x46\n#define KS_WF1BM2\t\t\t\t0x48\n#define KS_WF1BM3\t\t\t\t0x4A\n\n#define KS_WF2CRC0\t\t\t\t0x50\n#define KS_WF2CRC1\t\t\t\t0x52\n#define KS_WF2BM0\t\t\t\t0x54\n#define KS_WF2BM1\t\t\t\t0x56\n#define KS_WF2BM2\t\t\t\t0x58\n#define KS_WF2BM3\t\t\t\t0x5A\n\n#define KS_WF3CRC0\t\t\t\t0x60\n#define KS_WF3CRC1\t\t\t\t0x62\n#define KS_WF3BM0\t\t\t\t0x64\n#define KS_WF3BM1\t\t\t\t0x66\n#define KS_WF3BM2\t\t\t\t0x68\n#define KS_WF3BM3\t\t\t\t0x6A\n\n#define KS_TXCR\t\t\t\t\t0x70\n#define TXCR_TCGICMP\t\t\t\t(1 << 8)\n#define TXCR_TCGUDP\t\t\t\t(1 << 7)\n#define TXCR_TCGTCP\t\t\t\t(1 << 6)\n#define TXCR_TCGIP\t\t\t\t(1 << 5)\n#define TXCR_FTXQ\t\t\t\t(1 << 4)\n#define TXCR_TXFCE\t\t\t\t(1 << 3)\n#define TXCR_TXPE\t\t\t\t(1 << 2)\n#define TXCR_TXCRC\t\t\t\t(1 << 1)\n#define TXCR_TXE\t\t\t\t(1 << 0)\n\n#define KS_TXSR\t\t\t\t\t0x72\n#define TXSR_TXLC\t\t\t\t(1 << 13)\n#define TXSR_TXMC\t\t\t\t(1 << 12)\n#define TXSR_TXFID_MASK\t\t\t\t(0x3f << 0)\n#define TXSR_TXFID_SHIFT\t\t\t(0)\n#define TXSR_TXFID_GET(_v)\t\t\t(((_v) >> 0) & 0x3f)\n\n#define KS_RXCR1\t\t\t\t0x74\n#define RXCR1_FRXQ\t\t\t\t(1 << 15)\n#define RXCR1_RXUDPFCC\t\t\t\t(1 << 14)\n#define RXCR1_RXTCPFCC\t\t\t\t(1 << 13)\n#define RXCR1_RXIPFCC\t\t\t\t(1 << 12)\n#define RXCR1_RXPAFMA\t\t\t\t(1 << 11)\n#define RXCR1_RXFCE\t\t\t\t(1 << 10)\n#define RXCR1_RXEFE\t\t\t\t(1 << 9)\n#define RXCR1_RXMAFMA\t\t\t\t(1 << 8)\n#define RXCR1_RXBE\t\t\t\t(1 << 7)\n#define RXCR1_RXME\t\t\t\t(1 << 6)\n#define RXCR1_RXUE\t\t\t\t(1 << 5)\n#define RXCR1_RXAE\t\t\t\t(1 << 4)\n#define RXCR1_RXINVF\t\t\t\t(1 << 1)\n#define RXCR1_RXE\t\t\t\t(1 << 0)\n\n#define KS_RXCR2\t\t\t\t0x76\n#define RXCR2_SRDBL_MASK\t\t\t(0x7 << 5)   \n#define RXCR2_SRDBL_SHIFT\t\t\t(5)\t     \n#define RXCR2_SRDBL_4B\t\t\t\t(0x0 << 5)   \n#define RXCR2_SRDBL_8B\t\t\t\t(0x1 << 5)   \n#define RXCR2_SRDBL_16B\t\t\t\t(0x2 << 5)   \n#define RXCR2_SRDBL_32B\t\t\t\t(0x3 << 5)   \n#define RXCR2_SRDBL_FRAME\t\t\t(0x4 << 5)   \n#define RXCR2_IUFFP\t\t\t\t(1 << 4)\n#define RXCR2_RXIUFCEZ\t\t\t\t(1 << 3)\n#define RXCR2_UDPLFE\t\t\t\t(1 << 2)\n#define RXCR2_RXICMPFCC\t\t\t\t(1 << 1)\n#define RXCR2_RXSAF\t\t\t\t(1 << 0)\n\n#define KS_TXMIR\t\t\t\t0x78\n\n#define KS_RXFHSR\t\t\t\t0x7C\n#define RXFSHR_RXFV\t\t\t\t(1 << 15)\n#define RXFSHR_RXICMPFCS\t\t\t(1 << 13)\n#define RXFSHR_RXIPFCS\t\t\t\t(1 << 12)\n#define RXFSHR_RXTCPFCS\t\t\t\t(1 << 11)\n#define RXFSHR_RXUDPFCS\t\t\t\t(1 << 10)\n#define RXFSHR_RXBF\t\t\t\t(1 << 7)\n#define RXFSHR_RXMF\t\t\t\t(1 << 6)\n#define RXFSHR_RXUF\t\t\t\t(1 << 5)\n#define RXFSHR_RXMR\t\t\t\t(1 << 4)\n#define RXFSHR_RXFT\t\t\t\t(1 << 3)\n#define RXFSHR_RXFTL\t\t\t\t(1 << 2)\n#define RXFSHR_RXRF\t\t\t\t(1 << 1)\n#define RXFSHR_RXCE\t\t\t\t(1 << 0)\n\n#define KS_RXFHBCR\t\t\t\t0x7E\n#define RXFHBCR_CNT_MASK\t\t\t(0xfff << 0)\n\n#define KS_TXQCR\t\t\t\t0x80\n#define TXQCR_AETFE\t\t\t\t(1 << 2)     \n#define TXQCR_TXQMAM\t\t\t\t(1 << 1)\n#define TXQCR_METFE\t\t\t\t(1 << 0)\n\n#define KS_RXQCR\t\t\t\t0x82\n#define RXQCR_RXDTTS\t\t\t\t(1 << 12)\n#define RXQCR_RXDBCTS\t\t\t\t(1 << 11)\n#define RXQCR_RXFCTS\t\t\t\t(1 << 10)\n#define RXQCR_RXIPHTOE\t\t\t\t(1 << 9)\n#define RXQCR_RXDTTE\t\t\t\t(1 << 7)\n#define RXQCR_RXDBCTE\t\t\t\t(1 << 6)\n#define RXQCR_RXFCTE\t\t\t\t(1 << 5)\n#define RXQCR_ADRFE\t\t\t\t(1 << 4)\n#define RXQCR_SDA\t\t\t\t(1 << 3)\n#define RXQCR_RRXEF\t\t\t\t(1 << 0)\n\n#define KS_TXFDPR\t\t\t\t0x84\n#define TXFDPR_TXFPAI\t\t\t\t(1 << 14)\n#define TXFDPR_TXFP_MASK\t\t\t(0x7ff << 0)\n#define TXFDPR_TXFP_SHIFT\t\t\t(0)\n\n#define KS_RXFDPR\t\t\t\t0x86\n#define RXFDPR_RXFPAI\t\t\t\t(1 << 14)\n#define RXFDPR_WST\t\t\t\t(1 << 12)    \n#define RXFDPR_EMS\t\t\t\t(1 << 11)    \n#define RXFDPR_RXFP_MASK\t\t\t(0x7ff << 0)\n#define RXFDPR_RXFP_SHIFT\t\t\t(0)\n\n#define KS_RXDTTR\t\t\t\t0x8C\n#define KS_RXDBCTR\t\t\t\t0x8E\n\n#define KS_IER\t\t\t\t\t0x90\n#define KS_ISR\t\t\t\t\t0x92\n#define IRQ_LCI\t\t\t\t\t(1 << 15)\n#define IRQ_TXI\t\t\t\t\t(1 << 14)\n#define IRQ_RXI\t\t\t\t\t(1 << 13)\n#define IRQ_RXOI\t\t\t\t(1 << 11)\n#define IRQ_TXPSI\t\t\t\t(1 << 9)\n#define IRQ_RXPSI\t\t\t\t(1 << 8)\n#define IRQ_TXSAI\t\t\t\t(1 << 6)\n#define IRQ_RXWFDI\t\t\t\t(1 << 5)\n#define IRQ_RXMPDI\t\t\t\t(1 << 4)\n#define IRQ_LDI\t\t\t\t\t(1 << 3)\n#define IRQ_EDI\t\t\t\t\t(1 << 2)\n#define IRQ_SPIBEI\t\t\t\t(1 << 1)     \n#define IRQ_DEDI\t\t\t\t(1 << 0)\n\n#define KS_RXFCTR\t\t\t\t0x9C\n#define KS_RXFC\t\t\t\t\t0x9D\n#define RXFCTR_RXFC_MASK\t\t\t(0xff << 8)\n#define RXFCTR_RXFC_SHIFT\t\t\t(8)\n#define RXFCTR_RXFC_GET(_v)\t\t\t(((_v) >> 8) & 0xff)\n#define RXFCTR_RXFCT_MASK\t\t\t(0xff << 0)\n#define RXFCTR_RXFCT_SHIFT\t\t\t(0)\n\n#define KS_TXNTFSR\t\t\t\t0x9E\n\n#define KS_MAHTR0\t\t\t\t0xA0\n#define KS_MAHTR1\t\t\t\t0xA2\n#define KS_MAHTR2\t\t\t\t0xA4\n#define KS_MAHTR3\t\t\t\t0xA6\n\n#define KS_FCLWR\t\t\t\t0xB0\n#define KS_FCHWR\t\t\t\t0xB2\n#define KS_FCOWR\t\t\t\t0xB4\n\n#define KS_CIDER\t\t\t\t0xC0\n#define CIDER_ID\t\t\t\t0x8870\n#define CIDER_REV_MASK\t\t\t\t(0x7 << 1)\n#define CIDER_REV_SHIFT\t\t\t\t(1)\n#define CIDER_REV_GET(_v)\t\t\t(((_v) >> 1) & 0x7)\n\n#define KS_CGCR\t\t\t\t\t0xC6\n\n#define KS_IACR\t\t\t\t\t0xC8\n#define IACR_RDEN\t\t\t\t(1 << 12)\n#define IACR_TSEL_MASK\t\t\t\t(0x3 << 10)\n#define IACR_TSEL_SHIFT\t\t\t\t(10)\n#define IACR_TSEL_MIB\t\t\t\t(0x3 << 10)\n#define IACR_ADDR_MASK\t\t\t\t(0x1f << 0)\n#define IACR_ADDR_SHIFT\t\t\t\t(0)\n\n#define KS_IADLR\t\t\t\t0xD0\n#define KS_IAHDR\t\t\t\t0xD2\n\n#define KS_PMECR\t\t\t\t0xD4\n#define PMECR_PME_DELAY\t\t\t\t(1 << 14)\n#define PMECR_PME_POL\t\t\t\t(1 << 12)\n#define PMECR_WOL_WAKEUP\t\t\t(1 << 11)\n#define PMECR_WOL_MAGICPKT\t\t\t(1 << 10)\n#define PMECR_WOL_LINKUP\t\t\t(1 << 9)\n#define PMECR_WOL_ENERGY\t\t\t(1 << 8)\n#define PMECR_AUTO_WAKE_EN\t\t\t(1 << 7)\n#define PMECR_WAKEUP_NORMAL\t\t\t(1 << 6)\n#define PMECR_WKEVT_MASK\t\t\t(0xf << 2)\n#define PMECR_WKEVT_SHIFT\t\t\t(2)\n#define PMECR_WKEVT_GET(_v)\t\t\t(((_v) >> 2) & 0xf)\n#define PMECR_WKEVT_ENERGY\t\t\t(0x1 << 2)\n#define PMECR_WKEVT_LINK\t\t\t(0x2 << 2)\n#define PMECR_WKEVT_MAGICPKT\t\t\t(0x4 << 2)\n#define PMECR_WKEVT_FRAME\t\t\t(0x8 << 2)\n#define PMECR_PM_MASK\t\t\t\t(0x3 << 0)\n#define PMECR_PM_SHIFT\t\t\t\t(0)\n#define PMECR_PM_NORMAL\t\t\t\t(0x0 << 0)\n#define PMECR_PM_ENERGY\t\t\t\t(0x1 << 0)\n#define PMECR_PM_SOFTDOWN\t\t\t(0x2 << 0)\n#define PMECR_PM_POWERSAVE\t\t\t(0x3 << 0)\n\n \n#define KS_P1MBCR\t\t\t\t0xE4\n#define KS_P1MBSR\t\t\t\t0xE6\n#define KS_PHY1ILR\t\t\t\t0xE8\n#define KS_PHY1IHR\t\t\t\t0xEA\n#define KS_P1ANAR\t\t\t\t0xEC\n#define KS_P1ANLPR\t\t\t\t0xEE\n\n#define KS_P1SCLMD\t\t\t\t0xF4\n\n#define KS_P1CR\t\t\t\t\t0xF6\n#define P1CR_LEDOFF\t\t\t\t(1 << 15)\n#define P1CR_TXIDS\t\t\t\t(1 << 14)\n#define P1CR_RESTARTAN\t\t\t\t(1 << 13)\n#define P1CR_DISAUTOMDIX\t\t\t(1 << 10)\n#define P1CR_FORCEMDIX\t\t\t\t(1 << 9)\n#define P1CR_AUTONEGEN\t\t\t\t(1 << 7)\n#define P1CR_FORCE100\t\t\t\t(1 << 6)\n#define P1CR_FORCEFDX\t\t\t\t(1 << 5)\n#define P1CR_ADV_FLOW\t\t\t\t(1 << 4)\n#define P1CR_ADV_100BT_FDX\t\t\t(1 << 3)\n#define P1CR_ADV_100BT_HDX\t\t\t(1 << 2)\n#define P1CR_ADV_10BT_FDX\t\t\t(1 << 1)\n#define P1CR_ADV_10BT_HDX\t\t\t(1 << 0)\n\n#define KS_P1SR\t\t\t\t\t0xF8\n#define P1SR_HP_MDIX\t\t\t\t(1 << 15)\n#define P1SR_REV_POL\t\t\t\t(1 << 13)\n#define P1SR_OP_100M\t\t\t\t(1 << 10)\n#define P1SR_OP_FDX\t\t\t\t(1 << 9)\n#define P1SR_OP_MDI\t\t\t\t(1 << 7)\n#define P1SR_AN_DONE\t\t\t\t(1 << 6)\n#define P1SR_LINK_GOOD\t\t\t\t(1 << 5)\n#define P1SR_PNTR_FLOW\t\t\t\t(1 << 4)\n#define P1SR_PNTR_100BT_FDX\t\t\t(1 << 3)\n#define P1SR_PNTR_100BT_HDX\t\t\t(1 << 2)\n#define P1SR_PNTR_10BT_FDX\t\t\t(1 << 1)\n#define P1SR_PNTR_10BT_HDX\t\t\t(1 << 0)\n\n \n#define TXFR_TXIC\t\t\t\t(1 << 15)\n#define TXFR_TXFID_MASK\t\t\t\t(0x3f << 0)\n#define TXFR_TXFID_SHIFT\t\t\t(0)\n\n \nstruct ks8851_rxctrl {\n\tu16\tmchash[4];\n\tu16\trxcr1;\n\tu16\trxcr2;\n};\n\n \nunion ks8851_tx_hdr {\n\tu8\ttxb[6];\n\t__le16\ttxw[3];\n};\n\n \nstruct ks8851_net {\n\tstruct net_device\t*netdev;\n\tspinlock_t\t\tstatelock;\n\n\tunion ks8851_tx_hdr\ttxh ____cacheline_aligned;\n\tu8\t\t\trxd[8];\n\tu8\t\t\ttxd[8];\n\n\tu32\t\t\tmsg_enable ____cacheline_aligned;\n\tu16\t\t\ttx_space;\n\tu8\t\t\tfid;\n\n\tu16\t\t\trc_ier;\n\tu16\t\t\trc_rxqcr;\n\tu16\t\t\trc_ccr;\n\n\tstruct mii_if_info\tmii;\n\tstruct ks8851_rxctrl\trxctrl;\n\n\tstruct work_struct\trxctrl_work;\n\n\tstruct sk_buff_head\ttxq;\n\tunsigned int\t\tqueued_len;\n\n\tstruct eeprom_93cx6\teeprom;\n\tstruct regulator\t*vdd_reg;\n\tstruct regulator\t*vdd_io;\n\tstruct gpio_desc\t*gpio;\n\tstruct mii_bus\t\t*mii_bus;\n\n\tvoid\t\t\t(*lock)(struct ks8851_net *ks,\n\t\t\t\t\tunsigned long *flags);\n\tvoid\t\t\t(*unlock)(struct ks8851_net *ks,\n\t\t\t\t\t  unsigned long *flags);\n\tunsigned int\t\t(*rdreg16)(struct ks8851_net *ks,\n\t\t\t\t\t   unsigned int reg);\n\tvoid\t\t\t(*wrreg16)(struct ks8851_net *ks,\n\t\t\t\t\t   unsigned int reg, unsigned int val);\n\tvoid\t\t\t(*rdfifo)(struct ks8851_net *ks, u8 *buff,\n\t\t\t\t\t  unsigned int len);\n\tvoid\t\t\t(*wrfifo)(struct ks8851_net *ks,\n\t\t\t\t\t  struct sk_buff *txp, bool irq);\n\tnetdev_tx_t\t\t(*start_xmit)(struct sk_buff *skb,\n\t\t\t\t\t      struct net_device *dev);\n\tvoid\t\t\t(*rx_skb)(struct ks8851_net *ks,\n\t\t\t\t\t  struct sk_buff *skb);\n\tvoid\t\t\t(*flush_tx_work)(struct ks8851_net *ks);\n};\n\nint ks8851_probe_common(struct net_device *netdev, struct device *dev,\n\t\t\tint msg_en);\nvoid ks8851_remove_common(struct device *dev);\nint ks8851_suspend(struct device *dev);\nint ks8851_resume(struct device *dev);\n\nstatic __maybe_unused SIMPLE_DEV_PM_OPS(ks8851_pm_ops,\n\t\t\t\t\tks8851_suspend, ks8851_resume);\n\n \nstatic void __maybe_unused ks8851_done_tx(struct ks8851_net *ks,\n\t\t\t\t\t  struct sk_buff *txb)\n{\n\tstruct net_device *dev = ks->netdev;\n\n\tdev->stats.tx_bytes += txb->len;\n\tdev->stats.tx_packets++;\n\n\tdev_kfree_skb(txb);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}