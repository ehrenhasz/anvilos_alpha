{
  "module_name": "sriov.c",
  "hash_id": "2c6d68aa0ef0cd3f6cfb04acb67a623022f8d77ec9dc452fbfa3279b6f4efdb5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/sfc/sriov.c",
  "human_readable_source": "\n \n#include <linux/module.h>\n#include \"net_driver.h\"\n#include \"nic.h\"\n#include \"sriov.h\"\n\nint efx_sriov_set_vf_mac(struct net_device *net_dev, int vf_i, u8 *mac)\n{\n\tstruct efx_nic *efx = efx_netdev_priv(net_dev);\n\n\tif (efx->type->sriov_set_vf_mac)\n\t\treturn efx->type->sriov_set_vf_mac(efx, vf_i, mac);\n\telse\n\t\treturn -EOPNOTSUPP;\n}\n\nint efx_sriov_set_vf_vlan(struct net_device *net_dev, int vf_i, u16 vlan,\n\t\t\t  u8 qos, __be16 vlan_proto)\n{\n\tstruct efx_nic *efx = efx_netdev_priv(net_dev);\n\n\tif (efx->type->sriov_set_vf_vlan) {\n\t\tif ((vlan & ~VLAN_VID_MASK) ||\n\t\t    (qos & ~(VLAN_PRIO_MASK >> VLAN_PRIO_SHIFT)))\n\t\t\treturn -EINVAL;\n\n\t\tif (vlan_proto != htons(ETH_P_8021Q))\n\t\t\treturn -EPROTONOSUPPORT;\n\n\t\treturn efx->type->sriov_set_vf_vlan(efx, vf_i, vlan, qos);\n\t} else {\n\t\treturn -EOPNOTSUPP;\n\t}\n}\n\nint efx_sriov_set_vf_spoofchk(struct net_device *net_dev, int vf_i,\n\t\t\t      bool spoofchk)\n{\n\tstruct efx_nic *efx = efx_netdev_priv(net_dev);\n\n\tif (efx->type->sriov_set_vf_spoofchk)\n\t\treturn efx->type->sriov_set_vf_spoofchk(efx, vf_i, spoofchk);\n\telse\n\t\treturn -EOPNOTSUPP;\n}\n\nint efx_sriov_get_vf_config(struct net_device *net_dev, int vf_i,\n\t\t\t    struct ifla_vf_info *ivi)\n{\n\tstruct efx_nic *efx = efx_netdev_priv(net_dev);\n\n\tif (efx->type->sriov_get_vf_config)\n\t\treturn efx->type->sriov_get_vf_config(efx, vf_i, ivi);\n\telse\n\t\treturn -EOPNOTSUPP;\n}\n\nint efx_sriov_set_vf_link_state(struct net_device *net_dev, int vf_i,\n\t\t\t\tint link_state)\n{\n\tstruct efx_nic *efx = efx_netdev_priv(net_dev);\n\n\tif (efx->type->sriov_set_vf_link_state)\n\t\treturn efx->type->sriov_set_vf_link_state(efx, vf_i,\n\t\t\t\t\t\t\t  link_state);\n\telse\n\t\treturn -EOPNOTSUPP;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}