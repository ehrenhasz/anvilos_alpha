{
  "module_name": "mae.h",
  "hash_id": "17a8b504ae42bd4bf370b25994b70b92f5c0f9617e2b2a78ab46be7c22e80da3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/sfc/mae.h",
  "human_readable_source": " \n \n\n#ifndef EF100_MAE_H\n#define EF100_MAE_H\n \n\n#include <net/devlink.h>\n#include \"net_driver.h\"\n#include \"tc.h\"\n#include \"mcdi_pcol.h\"  \n\nint efx_mae_allocate_mport(struct efx_nic *efx, u32 *id, u32 *label);\nint efx_mae_free_mport(struct efx_nic *efx, u32 id);\n\nvoid efx_mae_mport_wire(struct efx_nic *efx, u32 *out);\nvoid efx_mae_mport_uplink(struct efx_nic *efx, u32 *out);\nvoid efx_mae_mport_vf(struct efx_nic *efx, u32 vf_id, u32 *out);\nvoid efx_mae_mport_mport(struct efx_nic *efx, u32 mport_id, u32 *out);\n\nint efx_mae_lookup_mport(struct efx_nic *efx, u32 selector, u32 *id);\n\nstruct mae_mport_desc {\n\tu32 mport_id;\n\tu32 flags;\n\tu32 caller_flags;  \n\tu32 mport_type;  \n\tunion {\n\t\tu32 port_idx;  \n\t\tu32 alias_mport_id;  \n\t\tstruct {  \n\t\t\tu32 vnic_client_type;  \n\t\t\tu32 interface_idx;\n\t\t\tu16 pf_idx;\n\t\t\tu16 vf_idx;\n\t\t};\n\t};\n\tstruct rhash_head linkage;\n\tstruct devlink_port dl_port;\n};\n\nint efx_mae_enumerate_mports(struct efx_nic *efx);\nstruct mae_mport_desc *efx_mae_get_mport(struct efx_nic *efx, u32 mport_id);\nvoid efx_mae_put_mport(struct efx_nic *efx, struct mae_mport_desc *desc);\n\n \nstruct efx_mae {\n\tstruct efx_nic *efx;\n\tstruct rhashtable mports_ht;\n};\n\nint efx_mae_start_counters(struct efx_nic *efx, struct efx_rx_queue *rx_queue);\nint efx_mae_stop_counters(struct efx_nic *efx, struct efx_rx_queue *rx_queue);\nvoid efx_mae_counters_grant_credits(struct work_struct *work);\n\nint efx_mae_get_tables(struct efx_nic *efx);\nvoid efx_mae_free_tables(struct efx_nic *efx);\n\n#define MAE_NUM_FIELDS\t(MAE_FIELD_ENC_VNET_ID + 1)\n\nstruct mae_caps {\n\tu32 match_field_count;\n\tu32 encap_types;\n\tu32 action_prios;\n\tu8 action_rule_fields[MAE_NUM_FIELDS];\n\tu8 outer_rule_fields[MAE_NUM_FIELDS];\n};\n\nint efx_mae_get_caps(struct efx_nic *efx, struct mae_caps *caps);\n\nint efx_mae_match_check_caps(struct efx_nic *efx,\n\t\t\t     const struct efx_tc_match_fields *mask,\n\t\t\t     struct netlink_ext_ack *extack);\nint efx_mae_match_check_caps_lhs(struct efx_nic *efx,\n\t\t\t\t const struct efx_tc_match_fields *mask,\n\t\t\t\t struct netlink_ext_ack *extack);\nint efx_mae_check_encap_match_caps(struct efx_nic *efx, bool ipv6,\n\t\t\t\t   u8 ip_tos_mask, __be16 udp_sport_mask,\n\t\t\t\t   struct netlink_ext_ack *extack);\nint efx_mae_check_encap_type_supported(struct efx_nic *efx,\n\t\t\t\t       enum efx_encap_type typ);\n\nint efx_mae_allocate_counter(struct efx_nic *efx, struct efx_tc_counter *cnt);\nint efx_mae_free_counter(struct efx_nic *efx, struct efx_tc_counter *cnt);\n\nint efx_mae_allocate_encap_md(struct efx_nic *efx,\n\t\t\t      struct efx_tc_encap_action *encap);\nint efx_mae_update_encap_md(struct efx_nic *efx,\n\t\t\t    struct efx_tc_encap_action *encap);\nint efx_mae_free_encap_md(struct efx_nic *efx,\n\t\t\t  struct efx_tc_encap_action *encap);\n\nint efx_mae_allocate_pedit_mac(struct efx_nic *efx,\n\t\t\t       struct efx_tc_mac_pedit_action *ped);\nvoid efx_mae_free_pedit_mac(struct efx_nic *efx,\n\t\t\t    struct efx_tc_mac_pedit_action *ped);\nint efx_mae_alloc_action_set(struct efx_nic *efx, struct efx_tc_action_set *act);\nint efx_mae_free_action_set(struct efx_nic *efx, u32 fw_id);\n\nint efx_mae_alloc_action_set_list(struct efx_nic *efx,\n\t\t\t\t  struct efx_tc_action_set_list *acts);\nint efx_mae_free_action_set_list(struct efx_nic *efx,\n\t\t\t\t struct efx_tc_action_set_list *acts);\n\nint efx_mae_register_encap_match(struct efx_nic *efx,\n\t\t\t\t struct efx_tc_encap_match *encap);\nint efx_mae_unregister_encap_match(struct efx_nic *efx,\n\t\t\t\t   struct efx_tc_encap_match *encap);\nint efx_mae_insert_lhs_rule(struct efx_nic *efx, struct efx_tc_lhs_rule *rule,\n\t\t\t    u32 prio);\nint efx_mae_remove_lhs_rule(struct efx_nic *efx, struct efx_tc_lhs_rule *rule);\nstruct efx_tc_ct_entry;  \nint efx_mae_insert_ct(struct efx_nic *efx, struct efx_tc_ct_entry *conn);\nint efx_mae_remove_ct(struct efx_nic *efx, struct efx_tc_ct_entry *conn);\n\nint efx_mae_insert_rule(struct efx_nic *efx, const struct efx_tc_match *match,\n\t\t\tu32 prio, u32 acts_id, u32 *id);\nint efx_mae_update_rule(struct efx_nic *efx, u32 acts_id, u32 id);\nint efx_mae_delete_rule(struct efx_nic *efx, u32 id);\n\nint efx_init_mae(struct efx_nic *efx);\nvoid efx_fini_mae(struct efx_nic *efx);\nvoid efx_mae_remove_mport(void *desc, void *arg);\nint efx_mae_fw_lookup_mport(struct efx_nic *efx, u32 selector, u32 *id);\nint efx_mae_lookup_mport(struct efx_nic *efx, u32 vf, u32 *id);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}