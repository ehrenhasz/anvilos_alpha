{
  "module_name": "hns_enet.h",
  "hash_id": "5e93f8f0c8e1b6039ba04d70e6d5d8f71c6477b1423f5c5e5cacfdb17a22e465",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/hisilicon/hns/hns_enet.h",
  "human_readable_source": " \n \n\n#ifndef __HNS_ENET_H\n#define __HNS_ENET_H\n\n#include <linux/netdevice.h>\n#include <linux/of_net.h>\n#include <linux/of_mdio.h>\n#include <linux/timer.h>\n#include <linux/workqueue.h>\n\n#include \"hnae.h\"\n\n#define HNS_DEBUG_OFFSET\t6\n#define HNS_SRV_OFFSET\t\t2\n\nenum hns_nic_state {\n\tNIC_STATE_TESTING = 0,\n\tNIC_STATE_RESETTING,\n\tNIC_STATE_REINITING,\n\tNIC_STATE_DOWN,\n\tNIC_STATE_DISABLED,\n\tNIC_STATE_REMOVING,\n\tNIC_STATE_SERVICE_INITED,\n\tNIC_STATE_SERVICE_SCHED,\n\tNIC_STATE2_RESET_REQUESTED,\n\tNIC_STATE_MAX\n};\n\nstruct hns_nic_ring_data {\n\tstruct hnae_ring *ring;\n\tstruct napi_struct napi;\n\tcpumask_t mask;  \n\tu32 queue_index;\n\tint (*poll_one)(struct hns_nic_ring_data *, int, void *);\n\tvoid (*ex_process)(struct hns_nic_ring_data *, struct sk_buff *);\n\tbool (*fini_process)(struct hns_nic_ring_data *);\n};\n\n \nstruct hns_nic_ops {\n\tvoid (*fill_desc)(struct hnae_ring *ring, void *priv,\n\t\t\t  int size, dma_addr_t dma, int frag_end,\n\t\t\t  int buf_num, enum hns_desc_type type, int mtu,\n\t\t\t  bool is_gso);\n\tint (*maybe_stop_tx)(struct sk_buff **out_skb,\n\t\t\t     int *bnum, struct hnae_ring *ring);\n\tvoid (*get_rxd_bnum)(u32 bnum_flag, int *out_bnum);\n};\n\nstruct hns_nic_priv {\n\tconst struct fwnode_handle      *fwnode;\n\tu32 enet_ver;\n\tu32 port_id;\n\tint phy_mode;\n\tint phy_led_val;\n\tstruct net_device *netdev;\n\tstruct device *dev;\n\tstruct hnae_handle *ae_handle;\n\n\tstruct hns_nic_ops ops;\n\n\t \n\tstruct hns_nic_ring_data *ring_data;\n\n\t \n\tint link;\n\tu64 tx_timeout_count;\n\n\tunsigned long state;\n\n\tstruct timer_list service_timer;\n\n\tstruct work_struct service_task;\n\n\tstruct notifier_block notifier_block;\n};\n\n#define tx_ring_data(priv, idx) ((priv)->ring_data[idx])\n#define rx_ring_data(priv, idx) \\\n\t((priv)->ring_data[(priv)->ae_handle->q_num + (idx)])\n\nvoid hns_ethtool_set_ops(struct net_device *ndev);\nvoid hns_nic_net_reset(struct net_device *ndev);\nvoid hns_nic_net_reinit(struct net_device *netdev);\nint hns_nic_init_phy(struct net_device *ndev, struct hnae_handle *h);\nnetdev_tx_t hns_nic_net_xmit_hw(struct net_device *ndev,\n\t\t\t\tstruct sk_buff *skb,\n\t\t\t\tstruct hns_nic_ring_data *ring_data);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}