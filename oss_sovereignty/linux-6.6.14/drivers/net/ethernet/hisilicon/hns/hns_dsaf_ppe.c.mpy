{
  "module_name": "hns_dsaf_ppe.c",
  "hash_id": "f604a658e208331d0373a14a9da83d956a8dc8619e68c9c8246ba0cdab65c993",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/hisilicon/hns/hns_dsaf_ppe.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/netdevice.h>\n#include <linux/etherdevice.h>\n#include <linux/platform_device.h>\n\n#include \"hns_dsaf_ppe.h\"\n\nvoid hns_ppe_set_tso_enable(struct hns_ppe_cb *ppe_cb, u32 value)\n{\n\tdsaf_set_dev_bit(ppe_cb, PPEV2_CFG_TSO_EN_REG, 0, !!value);\n}\n\nvoid hns_ppe_set_rss_key(struct hns_ppe_cb *ppe_cb,\n\t\t\t const u32 rss_key[HNS_PPEV2_RSS_KEY_NUM])\n{\n\tu32 key_item;\n\n\tfor (key_item = 0; key_item < HNS_PPEV2_RSS_KEY_NUM; key_item++)\n\t\tdsaf_write_dev(ppe_cb, PPEV2_RSS_KEY_REG + key_item * 0x4,\n\t\t\t       rss_key[key_item]);\n}\n\nvoid hns_ppe_set_indir_table(struct hns_ppe_cb *ppe_cb,\n\t\t\t     const u32 rss_tab[HNS_PPEV2_RSS_IND_TBL_SIZE])\n{\n\tint i;\n\tint reg_value;\n\n\tfor (i = 0; i < (HNS_PPEV2_RSS_IND_TBL_SIZE / 4); i++) {\n\t\treg_value = dsaf_read_dev(ppe_cb,\n\t\t\t\t\t  PPEV2_INDRECTION_TBL_REG + i * 0x4);\n\n\t\tdsaf_set_field(reg_value, PPEV2_CFG_RSS_TBL_4N0_M,\n\t\t\t       PPEV2_CFG_RSS_TBL_4N0_S,\n\t\t\t       rss_tab[i * 4 + 0] & 0x1F);\n\t\tdsaf_set_field(reg_value, PPEV2_CFG_RSS_TBL_4N1_M,\n\t\t\t       PPEV2_CFG_RSS_TBL_4N1_S,\n\t\t\t\trss_tab[i * 4 + 1] & 0x1F);\n\t\tdsaf_set_field(reg_value, PPEV2_CFG_RSS_TBL_4N2_M,\n\t\t\t       PPEV2_CFG_RSS_TBL_4N2_S,\n\t\t\t\trss_tab[i * 4 + 2] & 0x1F);\n\t\tdsaf_set_field(reg_value, PPEV2_CFG_RSS_TBL_4N3_M,\n\t\t\t       PPEV2_CFG_RSS_TBL_4N3_S,\n\t\t\t\trss_tab[i * 4 + 3] & 0x1F);\n\t\tdsaf_write_dev(\n\t\t\tppe_cb, PPEV2_INDRECTION_TBL_REG + i * 0x4, reg_value);\n\t}\n}\n\nstatic u8 __iomem *\nhns_ppe_common_get_ioaddr(struct ppe_common_cb *ppe_common)\n{\n\treturn ppe_common->dsaf_dev->ppe_base + PPE_COMMON_REG_OFFSET;\n}\n\n \nstatic int hns_ppe_common_get_cfg(struct dsaf_device *dsaf_dev, int comm_index)\n{\n\tstruct ppe_common_cb *ppe_common;\n\tint ppe_num;\n\n\tif (!HNS_DSAF_IS_DEBUG(dsaf_dev))\n\t\tppe_num = HNS_PPE_SERVICE_NW_ENGINE_NUM;\n\telse\n\t\tppe_num = HNS_PPE_DEBUG_NW_ENGINE_NUM;\n\n\tppe_common = devm_kzalloc(dsaf_dev->dev,\n\t\t\t\t  struct_size(ppe_common, ppe_cb, ppe_num),\n\t\t\t\t  GFP_KERNEL);\n\tif (!ppe_common)\n\t\treturn -ENOMEM;\n\n\tppe_common->ppe_num = ppe_num;\n\tppe_common->dsaf_dev = dsaf_dev;\n\tppe_common->comm_index = comm_index;\n\tif (!HNS_DSAF_IS_DEBUG(dsaf_dev))\n\t\tppe_common->ppe_mode = PPE_COMMON_MODE_SERVICE;\n\telse\n\t\tppe_common->ppe_mode = PPE_COMMON_MODE_DEBUG;\n\tppe_common->dev = dsaf_dev->dev;\n\n\tppe_common->io_base = hns_ppe_common_get_ioaddr(ppe_common);\n\n\tdsaf_dev->ppe_common[comm_index] = ppe_common;\n\n\treturn 0;\n}\n\nstatic void\nhns_ppe_common_free_cfg(struct dsaf_device *dsaf_dev, u32 comm_index)\n{\n\tdsaf_dev->ppe_common[comm_index] = NULL;\n}\n\nstatic u8 __iomem *hns_ppe_get_iobase(struct ppe_common_cb *ppe_common,\n\t\t\t\t      int ppe_idx)\n{\n\treturn ppe_common->dsaf_dev->ppe_base + ppe_idx * PPE_REG_OFFSET;\n}\n\nstatic void hns_ppe_get_cfg(struct ppe_common_cb *ppe_common)\n{\n\tu32 i;\n\tstruct hns_ppe_cb *ppe_cb;\n\tu32 ppe_num = ppe_common->ppe_num;\n\n\tfor (i = 0; i < ppe_num; i++) {\n\t\tppe_cb = &ppe_common->ppe_cb[i];\n\t\tppe_cb->dev = ppe_common->dev;\n\t\tppe_cb->next = NULL;\n\t\tppe_cb->ppe_common_cb = ppe_common;\n\t\tppe_cb->index = i;\n\t\tppe_cb->io_base = hns_ppe_get_iobase(ppe_common, i);\n\t\tppe_cb->virq = 0;\n\t}\n}\n\nstatic void hns_ppe_cnt_clr_ce(struct hns_ppe_cb *ppe_cb)\n{\n\tdsaf_set_dev_bit(ppe_cb, PPE_TNL_0_5_CNT_CLR_CE_REG,\n\t\t\t PPE_CNT_CLR_CE_B, 1);\n}\n\nstatic void hns_ppe_set_vlan_strip(struct hns_ppe_cb *ppe_cb, int en)\n{\n\tdsaf_write_dev(ppe_cb, PPEV2_VLAN_STRIP_EN_REG, en);\n}\n\n \nstatic void hns_ppe_checksum_hw(struct hns_ppe_cb *ppe_cb, u32 value)\n{\n\tdsaf_set_dev_field(ppe_cb, PPE_CFG_PRO_CHECK_EN_REG,\n\t\t\t   0xfffffff, 0, value);\n}\n\nstatic void hns_ppe_set_qid_mode(struct ppe_common_cb *ppe_common,\n\t\t\t\t enum ppe_qid_mode qid_mdoe)\n{\n\tdsaf_set_dev_field(ppe_common, PPE_COM_CFG_QID_MODE_REG,\n\t\t\t   PPE_CFG_QID_MODE_CF_QID_MODE_M,\n\t\t\t   PPE_CFG_QID_MODE_CF_QID_MODE_S, qid_mdoe);\n}\n\n \nstatic void hns_ppe_set_qid(struct ppe_common_cb *ppe_common, u32 qid)\n{\n\tu32 qid_mod = dsaf_read_dev(ppe_common, PPE_COM_CFG_QID_MODE_REG);\n\n\tif (!dsaf_get_field(qid_mod, PPE_CFG_QID_MODE_DEF_QID_M,\n\t\t\t    PPE_CFG_QID_MODE_DEF_QID_S)) {\n\t\tdsaf_set_field(qid_mod, PPE_CFG_QID_MODE_DEF_QID_M,\n\t\t\t       PPE_CFG_QID_MODE_DEF_QID_S, qid);\n\t\tdsaf_write_dev(ppe_common, PPE_COM_CFG_QID_MODE_REG, qid_mod);\n\t}\n}\n\n \nstatic void hns_ppe_set_port_mode(struct hns_ppe_cb *ppe_cb,\n\t\t\t\t  enum ppe_port_mode mode)\n{\n\tdsaf_write_dev(ppe_cb, PPE_CFG_XGE_MODE_REG, mode);\n}\n\n \nstatic int hns_ppe_common_init_hw(struct ppe_common_cb *ppe_common)\n{\n\tenum ppe_qid_mode qid_mode;\n\tstruct dsaf_device *dsaf_dev = ppe_common->dsaf_dev;\n\tenum dsaf_mode dsaf_mode = dsaf_dev->dsaf_mode;\n\n\tdsaf_dev->misc_op->ppe_comm_srst(dsaf_dev, 0);\n\tmsleep(100);\n\tdsaf_dev->misc_op->ppe_comm_srst(dsaf_dev, 1);\n\tmsleep(100);\n\n\tif (ppe_common->ppe_mode == PPE_COMMON_MODE_SERVICE) {\n\t\tswitch (dsaf_mode) {\n\t\tcase DSAF_MODE_ENABLE_FIX:\n\t\tcase DSAF_MODE_DISABLE_FIX:\n\t\t\tqid_mode = PPE_QID_MODE0;\n\t\t\thns_ppe_set_qid(ppe_common, 0);\n\t\t\tbreak;\n\t\tcase DSAF_MODE_ENABLE_0VM:\n\t\tcase DSAF_MODE_DISABLE_2PORT_64VM:\n\t\t\tqid_mode = PPE_QID_MODE3;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_ENABLE_8VM:\n\t\tcase DSAF_MODE_DISABLE_2PORT_16VM:\n\t\t\tqid_mode = PPE_QID_MODE4;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_ENABLE_16VM:\n\t\tcase DSAF_MODE_DISABLE_6PORT_0VM:\n\t\t\tqid_mode = PPE_QID_MODE5;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_ENABLE_32VM:\n\t\tcase DSAF_MODE_DISABLE_6PORT_16VM:\n\t\t\tqid_mode = PPE_QID_MODE2;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_ENABLE_128VM:\n\t\tcase DSAF_MODE_DISABLE_6PORT_4VM:\n\t\t\tqid_mode = PPE_QID_MODE1;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_DISABLE_2PORT_8VM:\n\t\t\tqid_mode = PPE_QID_MODE7;\n\t\t\tbreak;\n\t\tcase DSAF_MODE_DISABLE_6PORT_2VM:\n\t\t\tqid_mode = PPE_QID_MODE6;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(ppe_common->dev,\n\t\t\t\t\"get ppe queue mode failed! dsaf_mode=%d\\n\",\n\t\t\t\tdsaf_mode);\n\t\t\treturn -EINVAL;\n\t\t}\n\t\thns_ppe_set_qid_mode(ppe_common, qid_mode);\n\t}\n\n\tdsaf_set_dev_bit(ppe_common, PPE_COM_COMMON_CNT_CLR_CE_REG,\n\t\t\t PPE_COMMON_CNT_CLR_CE_B, 1);\n\n\treturn 0;\n}\n\n \nstatic void hns_ppe_exc_irq_en(struct hns_ppe_cb *ppe_cb, int en)\n{\n\tu32 clr_vlue = 0xfffffffful;\n\tu32 msk_vlue = en ? 0xfffffffful : 0;  \n\tu32 vld_msk = 0;\n\n\t \n\tdsaf_set_bit(vld_msk, 0, 1);\n\tdsaf_set_bit(vld_msk, 1, 1);\n\tdsaf_set_bit(vld_msk, 7, 1);\n\n\t \n\tdsaf_write_dev(ppe_cb, PPE_RINT_REG, clr_vlue);\n\n\t \n\tdsaf_write_dev(ppe_cb, PPE_INTEN_REG, msk_vlue & vld_msk);\n}\n\nint hns_ppe_wait_tx_fifo_clean(struct hns_ppe_cb *ppe_cb)\n{\n\tint wait_cnt;\n\tu32 val;\n\n\twait_cnt = 0;\n\twhile (wait_cnt++ < HNS_MAX_WAIT_CNT) {\n\t\tval = dsaf_read_dev(ppe_cb, PPE_CURR_TX_FIFO0_REG) & 0x3ffU;\n\t\tif (!val)\n\t\t\tbreak;\n\n\t\tusleep_range(100, 200);\n\t}\n\n\tif (wait_cnt >= HNS_MAX_WAIT_CNT) {\n\t\tdev_err(ppe_cb->dev, \"hns ppe tx fifo clean wait timeout, still has %u pkt.\\n\",\n\t\t\tval);\n\t\treturn -EBUSY;\n\t}\n\n\treturn 0;\n}\n\n \nstatic void hns_ppe_init_hw(struct hns_ppe_cb *ppe_cb)\n{\n\tstruct ppe_common_cb *ppe_common_cb = ppe_cb->ppe_common_cb;\n\tu32 port = ppe_cb->index;\n\tstruct dsaf_device *dsaf_dev = ppe_common_cb->dsaf_dev;\n\tint i;\n\n\t \n\tnetdev_rss_key_fill(ppe_cb->rss_key, HNS_PPEV2_RSS_KEY_SIZE);\n\n\tdsaf_dev->misc_op->ppe_srst(dsaf_dev, port, 0);\n\tmdelay(10);\n\tdsaf_dev->misc_op->ppe_srst(dsaf_dev, port, 1);\n\n\t \n\thns_ppe_exc_irq_en(ppe_cb, 0);\n\n\tif (ppe_common_cb->ppe_mode == PPE_COMMON_MODE_DEBUG) {\n\t\thns_ppe_set_port_mode(ppe_cb, PPE_MODE_GE);\n\t\tdsaf_write_dev(ppe_cb, PPE_CFG_PAUSE_IDLE_CNT_REG, 0);\n\t} else {\n\t\thns_ppe_set_port_mode(ppe_cb, PPE_MODE_XGE);\n\t}\n\n\thns_ppe_checksum_hw(ppe_cb, 0xffffffff);\n\thns_ppe_cnt_clr_ce(ppe_cb);\n\n\tif (!AE_IS_VER1(dsaf_dev->dsaf_ver)) {\n\t\thns_ppe_set_vlan_strip(ppe_cb, 0);\n\n\t\tdsaf_write_dev(ppe_cb, PPE_CFG_MAX_FRAME_LEN_REG,\n\t\t\t       HNS_PPEV2_MAX_FRAME_LEN);\n\n\t\t \n\t\thns_ppe_set_rss_key(ppe_cb, ppe_cb->rss_key);\n\n\t\t \n\t\tfor (i = 0; i < HNS_PPEV2_RSS_IND_TBL_SIZE; i++)\n\t\t\tppe_cb->rss_indir_table[i] = i;\n\t\thns_ppe_set_indir_table(ppe_cb, ppe_cb->rss_indir_table);\n\t}\n}\n\n \nstatic void hns_ppe_uninit_hw(struct hns_ppe_cb *ppe_cb)\n{\n\tu32 port;\n\n\tif (ppe_cb->ppe_common_cb) {\n\t\tstruct dsaf_device *dsaf_dev = ppe_cb->ppe_common_cb->dsaf_dev;\n\n\t\tport = ppe_cb->index;\n\t\tdsaf_dev->misc_op->ppe_srst(dsaf_dev, port, 0);\n\t}\n}\n\nstatic void hns_ppe_uninit_ex(struct ppe_common_cb *ppe_common)\n{\n\tu32 i;\n\n\tfor (i = 0; i < ppe_common->ppe_num; i++) {\n\t\tif (ppe_common->dsaf_dev->mac_cb[i])\n\t\t\thns_ppe_uninit_hw(&ppe_common->ppe_cb[i]);\n\t\tmemset(&ppe_common->ppe_cb[i], 0, sizeof(struct hns_ppe_cb));\n\t}\n}\n\nvoid hns_ppe_uninit(struct dsaf_device *dsaf_dev)\n{\n\tu32 i;\n\n\tfor (i = 0; i < HNS_PPE_COM_NUM; i++) {\n\t\tif (dsaf_dev->ppe_common[i])\n\t\t\thns_ppe_uninit_ex(dsaf_dev->ppe_common[i]);\n\t\thns_rcb_common_free_cfg(dsaf_dev, i);\n\t\thns_ppe_common_free_cfg(dsaf_dev, i);\n\t}\n}\n\n \nvoid hns_ppe_reset_common(struct dsaf_device *dsaf_dev, u8 ppe_common_index)\n{\n\tu32 i;\n\tint ret;\n\tstruct ppe_common_cb *ppe_common;\n\n\tppe_common = dsaf_dev->ppe_common[ppe_common_index];\n\tret = hns_ppe_common_init_hw(ppe_common);\n\tif (ret)\n\t\treturn;\n\n\tfor (i = 0; i < ppe_common->ppe_num; i++) {\n\t\t \n\t\tif (dsaf_dev->mac_cb[i])\n\t\t\thns_ppe_init_hw(&ppe_common->ppe_cb[i]);\n\t}\n\n\tret = hns_rcb_common_init_hw(dsaf_dev->rcb_common[ppe_common_index]);\n\tif (ret)\n\t\treturn;\n\n\thns_rcb_common_init_commit_hw(dsaf_dev->rcb_common[ppe_common_index]);\n}\n\nvoid hns_ppe_update_stats(struct hns_ppe_cb *ppe_cb)\n{\n\tstruct hns_ppe_hw_stats *hw_stats = &ppe_cb->hw_stats;\n\n\thw_stats->rx_pkts_from_sw\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_SW_PKT_CNT_REG);\n\thw_stats->rx_pkts\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_WR_BD_OK_PKT_CNT_REG);\n\thw_stats->rx_drop_no_bd\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_NO_BUF_CNT_REG);\n\thw_stats->rx_alloc_buf_fail\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_APP_BUF_FAIL_CNT_REG);\n\thw_stats->rx_alloc_buf_wait\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_APP_BUF_WAIT_CNT_REG);\n\thw_stats->rx_drop_no_buf\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_DROP_FUL_CNT_REG);\n\thw_stats->rx_err_fifo_full\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_DROP_PRT_CNT_REG);\n\n\thw_stats->tx_bd_form_rcb\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_TX_BD_CNT_REG);\n\thw_stats->tx_pkts_from_rcb\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_CNT_REG);\n\thw_stats->tx_pkts\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_OK_CNT_REG);\n\thw_stats->tx_err_fifo_empty\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_EPT_CNT_REG);\n\thw_stats->tx_err_checksum\n\t\t+= dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_CS_FAIL_CNT_REG);\n}\n\nint hns_ppe_get_sset_count(int stringset)\n{\n\tif (stringset == ETH_SS_STATS)\n\t\treturn ETH_PPE_STATIC_NUM;\n\treturn 0;\n}\n\nint hns_ppe_get_regs_count(void)\n{\n\treturn ETH_PPE_DUMP_NUM;\n}\n\n \nvoid hns_ppe_get_strings(struct hns_ppe_cb *ppe_cb, int stringset, u8 *data)\n{\n\tint index = ppe_cb->index;\n\tu8 *buff = data;\n\n\tethtool_sprintf(&buff, \"ppe%d_rx_sw_pkt\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_pkt_ok\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_drop_pkt_no_bd\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_alloc_buf_fail\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_alloc_buf_wait\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_pkt_drop_no_buf\", index);\n\tethtool_sprintf(&buff, \"ppe%d_rx_pkt_err_fifo_full\", index);\n\n\tethtool_sprintf(&buff, \"ppe%d_tx_bd\", index);\n\tethtool_sprintf(&buff, \"ppe%d_tx_pkt\", index);\n\tethtool_sprintf(&buff, \"ppe%d_tx_pkt_ok\", index);\n\tethtool_sprintf(&buff, \"ppe%d_tx_pkt_err_fifo_empty\", index);\n\tethtool_sprintf(&buff, \"ppe%d_tx_pkt_err_csum_fail\", index);\n}\n\nvoid hns_ppe_get_stats(struct hns_ppe_cb *ppe_cb, u64 *data)\n{\n\tu64 *regs_buff = data;\n\tstruct hns_ppe_hw_stats *hw_stats = &ppe_cb->hw_stats;\n\n\tregs_buff[0] = hw_stats->rx_pkts_from_sw;\n\tregs_buff[1] = hw_stats->rx_pkts;\n\tregs_buff[2] = hw_stats->rx_drop_no_bd;\n\tregs_buff[3] = hw_stats->rx_alloc_buf_fail;\n\tregs_buff[4] = hw_stats->rx_alloc_buf_wait;\n\tregs_buff[5] = hw_stats->rx_drop_no_buf;\n\tregs_buff[6] = hw_stats->rx_err_fifo_full;\n\n\tregs_buff[7] = hw_stats->tx_bd_form_rcb;\n\tregs_buff[8] = hw_stats->tx_pkts_from_rcb;\n\tregs_buff[9] = hw_stats->tx_pkts;\n\tregs_buff[10] = hw_stats->tx_err_fifo_empty;\n\tregs_buff[11] = hw_stats->tx_err_checksum;\n}\n\n \nint hns_ppe_init(struct dsaf_device *dsaf_dev)\n{\n\tint ret;\n\tint i;\n\n\tfor (i = 0; i < HNS_PPE_COM_NUM; i++) {\n\t\tret = hns_ppe_common_get_cfg(dsaf_dev, i);\n\t\tif (ret)\n\t\t\tgoto get_cfg_fail;\n\n\t\tret = hns_rcb_common_get_cfg(dsaf_dev, i);\n\t\tif (ret)\n\t\t\tgoto get_cfg_fail;\n\n\t\thns_ppe_get_cfg(dsaf_dev->ppe_common[i]);\n\n\t\tret = hns_rcb_get_cfg(dsaf_dev->rcb_common[i]);\n\t\tif (ret)\n\t\t\tgoto get_cfg_fail;\n\t}\n\n\tfor (i = 0; i < HNS_PPE_COM_NUM; i++)\n\t\thns_ppe_reset_common(dsaf_dev, i);\n\n\treturn 0;\n\nget_cfg_fail:\n\tfor (i = 0; i < HNS_PPE_COM_NUM; i++) {\n\t\thns_rcb_common_free_cfg(dsaf_dev, i);\n\t\thns_ppe_common_free_cfg(dsaf_dev, i);\n\t}\n\n\treturn ret;\n}\n\nvoid hns_ppe_get_regs(struct hns_ppe_cb *ppe_cb, void *data)\n{\n\tstruct ppe_common_cb *ppe_common = ppe_cb->ppe_common_cb;\n\tu32 *regs = data;\n\tu32 i;\n\tu32 offset;\n\n\t \n\tregs[0] = dsaf_read_dev(ppe_common, PPE_COM_CFG_QID_MODE_REG);\n\tregs[1] = dsaf_read_dev(ppe_common, PPE_COM_INTEN_REG);\n\tregs[2] = dsaf_read_dev(ppe_common, PPE_COM_RINT_REG);\n\tregs[3] = dsaf_read_dev(ppe_common, PPE_COM_INTSTS_REG);\n\tregs[4] = dsaf_read_dev(ppe_common, PPE_COM_COMMON_CNT_CLR_CE_REG);\n\n\tfor (i = 0; i < DSAF_TOTAL_QUEUE_NUM; i++) {\n\t\toffset = PPE_COM_HIS_RX_PKT_QID_DROP_CNT_REG + 0x4 * i;\n\t\tregs[5 + i] = dsaf_read_dev(ppe_common, offset);\n\t\toffset = PPE_COM_HIS_RX_PKT_QID_OK_CNT_REG + 0x4 * i;\n\t\tregs[5 + i + DSAF_TOTAL_QUEUE_NUM]\n\t\t\t\t= dsaf_read_dev(ppe_common, offset);\n\t\toffset = PPE_COM_HIS_TX_PKT_QID_ERR_CNT_REG + 0x4 * i;\n\t\tregs[5 + i + DSAF_TOTAL_QUEUE_NUM * 2]\n\t\t\t\t= dsaf_read_dev(ppe_common, offset);\n\t\toffset = PPE_COM_HIS_TX_PKT_QID_OK_CNT_REG + 0x4 * i;\n\t\tregs[5 + i + DSAF_TOTAL_QUEUE_NUM * 3]\n\t\t\t\t= dsaf_read_dev(ppe_common, offset);\n\t}\n\n\t \n\tfor (i = 521; i < 524; i++)\n\t\tregs[i] = 0xeeeeeeee;\n\n\t \n\tregs[525] = dsaf_read_dev(ppe_cb, PPE_CFG_TX_FIFO_THRSLD_REG);\n\tregs[526] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_FIFO_THRSLD_REG);\n\tregs[527] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_FIFO_PAUSE_THRSLD_REG);\n\tregs[528] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_FIFO_SW_BP_THRSLD_REG);\n\tregs[529] = dsaf_read_dev(ppe_cb, PPE_CFG_PAUSE_IDLE_CNT_REG);\n\tregs[530] = dsaf_read_dev(ppe_cb, PPE_CFG_BUS_CTRL_REG);\n\tregs[531] = dsaf_read_dev(ppe_cb, PPE_CFG_TNL_TO_BE_RST_REG);\n\tregs[532] = dsaf_read_dev(ppe_cb, PPE_CURR_TNL_CAN_RST_REG);\n\n\tregs[533] = dsaf_read_dev(ppe_cb, PPE_CFG_XGE_MODE_REG);\n\tregs[534] = dsaf_read_dev(ppe_cb, PPE_CFG_MAX_FRAME_LEN_REG);\n\tregs[535] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_PKT_MODE_REG);\n\tregs[536] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_VLAN_TAG_REG);\n\tregs[537] = dsaf_read_dev(ppe_cb, PPE_CFG_TAG_GEN_REG);\n\tregs[538] = dsaf_read_dev(ppe_cb, PPE_CFG_PARSE_TAG_REG);\n\tregs[539] = dsaf_read_dev(ppe_cb, PPE_CFG_PRO_CHECK_EN_REG);\n\n\tregs[540] = dsaf_read_dev(ppe_cb, PPE_INTEN_REG);\n\tregs[541] = dsaf_read_dev(ppe_cb, PPE_RINT_REG);\n\tregs[542] = dsaf_read_dev(ppe_cb, PPE_INTSTS_REG);\n\tregs[543] = dsaf_read_dev(ppe_cb, PPE_CFG_RX_PKT_INT_REG);\n\n\tregs[544] = dsaf_read_dev(ppe_cb, PPE_CFG_HEAT_DECT_TIME0_REG);\n\tregs[545] = dsaf_read_dev(ppe_cb, PPE_CFG_HEAT_DECT_TIME1_REG);\n\n\t \n\tregs[546] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_SW_PKT_CNT_REG);\n\tregs[547] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_WR_BD_OK_PKT_CNT_REG);\n\tregs[548] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_NO_BUF_CNT_REG);\n\tregs[549] = dsaf_read_dev(ppe_cb, PPE_HIS_TX_BD_CNT_REG);\n\tregs[550] = dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_CNT_REG);\n\tregs[551] = dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_OK_CNT_REG);\n\tregs[552] = dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_EPT_CNT_REG);\n\tregs[553] = dsaf_read_dev(ppe_cb, PPE_HIS_TX_PKT_CS_FAIL_CNT_REG);\n\tregs[554] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_APP_BUF_FAIL_CNT_REG);\n\tregs[555] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_APP_BUF_WAIT_CNT_REG);\n\tregs[556] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_DROP_FUL_CNT_REG);\n\tregs[557] = dsaf_read_dev(ppe_cb, PPE_HIS_RX_PKT_DROP_PRT_CNT_REG);\n\n\tregs[558] = dsaf_read_dev(ppe_cb, PPE_TNL_0_5_CNT_CLR_CE_REG);\n\tregs[559] = dsaf_read_dev(ppe_cb, PPE_CFG_AXI_DBG_REG);\n\tregs[560] = dsaf_read_dev(ppe_cb, PPE_HIS_PRO_ERR_REG);\n\tregs[561] = dsaf_read_dev(ppe_cb, PPE_HIS_TNL_FIFO_ERR_REG);\n\tregs[562] = dsaf_read_dev(ppe_cb, PPE_CURR_CFF_DATA_NUM_REG);\n\tregs[563] = dsaf_read_dev(ppe_cb, PPE_CURR_RX_ST_REG);\n\tregs[564] = dsaf_read_dev(ppe_cb, PPE_CURR_TX_ST_REG);\n\tregs[565] = dsaf_read_dev(ppe_cb, PPE_CURR_RX_FIFO0_REG);\n\tregs[566] = dsaf_read_dev(ppe_cb, PPE_CURR_RX_FIFO1_REG);\n\tregs[567] = dsaf_read_dev(ppe_cb, PPE_CURR_TX_FIFO0_REG);\n\tregs[568] = dsaf_read_dev(ppe_cb, PPE_CURR_TX_FIFO1_REG);\n\tregs[569] = dsaf_read_dev(ppe_cb, PPE_ECO0_REG);\n\tregs[570] = dsaf_read_dev(ppe_cb, PPE_ECO1_REG);\n\tregs[571] = dsaf_read_dev(ppe_cb, PPE_ECO2_REG);\n\n\t \n\tfor (i = 572; i < 576; i++)\n\t\tregs[i] = 0xeeeeeeee;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}