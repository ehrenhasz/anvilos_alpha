{
  "module_name": "hns3_trace.h",
  "hash_id": "bb489b045e21308caeee4d66d1b9491836311830002bdbb704a77549bd03e062",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/hisilicon/hns3/hns3_trace.h",
  "human_readable_source": " \n \n\n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM hns3\n\n#if !defined(_HNS3_TRACE_H_) || defined(TRACE_HEADER_MULTI_READ)\n#define _HNS3_TRACE_H_\n\n#include <linux/tracepoint.h>\n\n#define DESC_NR\t\t(sizeof(struct hns3_desc) / sizeof(u32))\n\nDECLARE_EVENT_CLASS(hns3_skb_template,\n\tTP_PROTO(struct sk_buff *skb),\n\tTP_ARGS(skb),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, headlen)\n\t\t__field(unsigned int, len)\n\t\t__field(__u8, nr_frags)\n\t\t__field(__u8, ip_summed)\n\t\t__field(unsigned int, hdr_len)\n\t\t__field(unsigned short, gso_size)\n\t\t__field(unsigned short, gso_segs)\n\t\t__field(unsigned int, gso_type)\n\t\t__field(bool, fraglist)\n\t\t__array(__u32, size, MAX_SKB_FRAGS)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->headlen = skb_headlen(skb);\n\t\t__entry->len = skb->len;\n\t\t__entry->nr_frags = skb_shinfo(skb)->nr_frags;\n\t\t__entry->gso_size = skb_shinfo(skb)->gso_size;\n\t\t__entry->gso_segs = skb_shinfo(skb)->gso_segs;\n\t\t__entry->gso_type = skb_shinfo(skb)->gso_type;\n\t\t__entry->hdr_len = skb->encapsulation ?\n\t\tskb_inner_tcp_all_headers(skb) : skb_tcp_all_headers(skb);\n\t\t__entry->ip_summed = skb->ip_summed;\n\t\t__entry->fraglist = skb_has_frag_list(skb);\n\t\thns3_shinfo_pack(skb_shinfo(skb), __entry->size);\n\t),\n\n\tTP_printk(\n\t\t\"len: %u, %u, %u, cs: %u, gso: %u, %u, %x, frag(%d %u): %s\",\n\t\t__entry->headlen, __entry->len, __entry->hdr_len,\n\t\t__entry->ip_summed, __entry->gso_size, __entry->gso_segs,\n\t\t__entry->gso_type, __entry->fraglist, __entry->nr_frags,\n\t\t__print_array(__entry->size, MAX_SKB_FRAGS, sizeof(__u32))\n\t)\n);\n\nDEFINE_EVENT(hns3_skb_template, hns3_over_max_bd,\n\tTP_PROTO(struct sk_buff *skb),\n\tTP_ARGS(skb));\n\nDEFINE_EVENT(hns3_skb_template, hns3_gro,\n\tTP_PROTO(struct sk_buff *skb),\n\tTP_ARGS(skb));\n\nDEFINE_EVENT(hns3_skb_template, hns3_tso,\n\tTP_PROTO(struct sk_buff *skb),\n\tTP_ARGS(skb));\n\nTRACE_EVENT(hns3_tx_desc,\n\tTP_PROTO(struct hns3_enet_ring *ring, int cur_ntu),\n\tTP_ARGS(ring, cur_ntu),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, index)\n\t\t__field(int, ntu)\n\t\t__field(int, ntc)\n\t\t__field(dma_addr_t, desc_dma)\n\t\t__array(u32, desc, DESC_NR)\n\t\t__string(devname, ring->tqp->handle->kinfo.netdev->name)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->index = ring->tqp->tqp_index;\n\t\t__entry->ntu = ring->next_to_use;\n\t\t__entry->ntc = ring->next_to_clean;\n\t\t__entry->desc_dma = ring->desc_dma_addr,\n\t\tmemcpy(__entry->desc, &ring->desc[cur_ntu],\n\t\t       sizeof(struct hns3_desc));\n\t\t__assign_str(devname, ring->tqp->handle->kinfo.netdev->name);\n\t),\n\n\tTP_printk(\n\t\t\"%s-%d-%d/%d desc(%pad): %s\",\n\t\t__get_str(devname), __entry->index, __entry->ntu,\n\t\t__entry->ntc, &__entry->desc_dma,\n\t\t__print_array(__entry->desc, DESC_NR, sizeof(u32))\n\t)\n);\n\nTRACE_EVENT(hns3_rx_desc,\n\tTP_PROTO(struct hns3_enet_ring *ring),\n\tTP_ARGS(ring),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, index)\n\t\t__field(int, ntu)\n\t\t__field(int, ntc)\n\t\t__field(dma_addr_t, desc_dma)\n\t\t__field(dma_addr_t, buf_dma)\n\t\t__array(u32, desc, DESC_NR)\n\t\t__string(devname, ring->tqp->handle->kinfo.netdev->name)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->index = ring->tqp->tqp_index;\n\t\t__entry->ntu = ring->next_to_use;\n\t\t__entry->ntc = ring->next_to_clean;\n\t\t__entry->desc_dma = ring->desc_dma_addr;\n\t\t__entry->buf_dma = ring->desc_cb[ring->next_to_clean].dma;\n\t\tmemcpy(__entry->desc, &ring->desc[ring->next_to_clean],\n\t\t       sizeof(struct hns3_desc));\n\t\t__assign_str(devname, ring->tqp->handle->kinfo.netdev->name);\n\t),\n\n\tTP_printk(\n\t\t\"%s-%d-%d/%d desc(%pad) buf(%pad): %s\",\n\t\t__get_str(devname), __entry->index, __entry->ntu,\n\t\t__entry->ntc, &__entry->desc_dma, &__entry->buf_dma,\n\t\t__print_array(__entry->desc, DESC_NR, sizeof(u32))\n\t)\n);\n\n#endif  \n\n \n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE hns3_trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}