{
  "module_name": "hclge_comm_rss.h",
  "hash_id": "0e0cdaa2d86142cedfdc8b4e625ab0114914194633e06c72e8d4469d23ab9217",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_rss.h",
  "human_readable_source": " \n\n\n#ifndef __HCLGE_COMM_RSS_H\n#define __HCLGE_COMM_RSS_H\n#include <linux/types.h>\n\n#include \"hnae3.h\"\n#include \"hclge_comm_cmd.h\"\n\n#define HCLGE_COMM_RSS_HASH_ALGO_TOEPLITZ\t0\n#define HCLGE_COMM_RSS_HASH_ALGO_SIMPLE\t\t1\n#define HCLGE_COMM_RSS_HASH_ALGO_SYMMETRIC\t2\n\n#define HCLGE_COMM_RSS_INPUT_TUPLE_OTHER\tGENMASK(3, 0)\n#define HCLGE_COMM_RSS_INPUT_TUPLE_SCTP\t\tGENMASK(4, 0)\n\n#define HCLGE_COMM_D_PORT_BIT\t\tBIT(0)\n#define HCLGE_COMM_S_PORT_BIT\t\tBIT(1)\n#define HCLGE_COMM_D_IP_BIT\t\tBIT(2)\n#define HCLGE_COMM_S_IP_BIT\t\tBIT(3)\n#define HCLGE_COMM_V_TAG_BIT\t\tBIT(4)\n#define HCLGE_COMM_RSS_INPUT_TUPLE_SCTP_NO_PORT\t\\\n\t(HCLGE_COMM_D_IP_BIT | HCLGE_COMM_S_IP_BIT | HCLGE_COMM_V_TAG_BIT)\n#define HCLGE_COMM_MAX_TC_NUM\t\t8\n\n#define HCLGE_COMM_RSS_TC_OFFSET_S\t\t0\n#define HCLGE_COMM_RSS_TC_OFFSET_M\t\tGENMASK(10, 0)\n#define HCLGE_COMM_RSS_TC_SIZE_MSB_B\t11\n#define HCLGE_COMM_RSS_TC_SIZE_S\t\t12\n#define HCLGE_COMM_RSS_TC_SIZE_M\t\tGENMASK(14, 12)\n#define HCLGE_COMM_RSS_TC_VALID_B\t\t15\n#define HCLGE_COMM_RSS_TC_SIZE_MSB_OFFSET\t3\n\nstruct hclge_comm_rss_tuple_cfg {\n\tu8 ipv4_tcp_en;\n\tu8 ipv4_udp_en;\n\tu8 ipv4_sctp_en;\n\tu8 ipv4_fragment_en;\n\tu8 ipv6_tcp_en;\n\tu8 ipv6_udp_en;\n\tu8 ipv6_sctp_en;\n\tu8 ipv6_fragment_en;\n};\n\n#define HCLGE_COMM_RSS_KEY_SIZE\t\t40\n#define HCLGE_COMM_RSS_CFG_TBL_SIZE\t16\n#define HCLGE_COMM_RSS_CFG_TBL_BW_H\t2U\n#define HCLGE_COMM_RSS_CFG_TBL_BW_L\t8U\n#define HCLGE_COMM_RSS_CFG_TBL_SIZE_H\t4\n#define HCLGE_COMM_RSS_SET_BITMAP_MSK\tGENMASK(15, 0)\n#define HCLGE_COMM_RSS_HASH_ALGO_MASK\tGENMASK(3, 0)\n#define HCLGE_COMM_RSS_HASH_KEY_OFFSET_B\t4\n\n#define HCLGE_COMM_RSS_HASH_KEY_NUM\t16\nstruct hclge_comm_rss_config_cmd {\n\tu8 hash_config;\n\tu8 rsv[7];\n\tu8 hash_key[HCLGE_COMM_RSS_HASH_KEY_NUM];\n};\n\nstruct hclge_comm_rss_cfg {\n\tu8 rss_hash_key[HCLGE_COMM_RSS_KEY_SIZE];  \n\n\t \n\tu16 *rss_indirection_tbl;\n\tu32 rss_algo;\n\n\tstruct hclge_comm_rss_tuple_cfg rss_tuple_sets;\n\tu32 rss_size;\n};\n\nstruct hclge_comm_rss_input_tuple_cmd {\n\tu8 ipv4_tcp_en;\n\tu8 ipv4_udp_en;\n\tu8 ipv4_sctp_en;\n\tu8 ipv4_fragment_en;\n\tu8 ipv6_tcp_en;\n\tu8 ipv6_udp_en;\n\tu8 ipv6_sctp_en;\n\tu8 ipv6_fragment_en;\n\tu8 rsv[16];\n};\n\nstruct hclge_comm_rss_ind_tbl_cmd {\n\t__le16 start_table_index;\n\t__le16 rss_set_bitmap;\n\tu8 rss_qid_h[HCLGE_COMM_RSS_CFG_TBL_SIZE_H];\n\tu8 rss_qid_l[HCLGE_COMM_RSS_CFG_TBL_SIZE];\n};\n\nstruct hclge_comm_rss_tc_mode_cmd {\n\t__le16 rss_tc_mode[HCLGE_COMM_MAX_TC_NUM];\n\tu8 rsv[8];\n};\n\nu32 hclge_comm_get_rss_key_size(struct hnae3_handle *handle);\nvoid hclge_comm_rss_indir_init_cfg(struct hnae3_ae_dev *ae_dev,\n\t\t\t\t   struct hclge_comm_rss_cfg *rss_cfg);\nint hclge_comm_get_rss_tuple(struct hclge_comm_rss_cfg *rss_cfg, int flow_type,\n\t\t\t     u8 *tuple_sets);\nint hclge_comm_parse_rss_hfunc(struct hclge_comm_rss_cfg *rss_cfg,\n\t\t\t       const u8 hfunc, u8 *hash_algo);\nvoid hclge_comm_get_rss_hash_info(struct hclge_comm_rss_cfg *rss_cfg, u8 *key,\n\t\t\t\t  u8 *hfunc);\nvoid hclge_comm_get_rss_indir_tbl(struct hclge_comm_rss_cfg *rss_cfg,\n\t\t\t\t  u32 *indir, u16 rss_ind_tbl_size);\nint hclge_comm_set_rss_algo_key(struct hclge_comm_hw *hw, const u8 hfunc,\n\t\t\t\tconst u8 *key);\nint hclge_comm_init_rss_tuple_cmd(struct hclge_comm_rss_cfg *rss_cfg,\n\t\t\t\t  struct ethtool_rxnfc *nfc,\n\t\t\t\t  struct hnae3_ae_dev *ae_dev,\n\t\t\t\t  struct hclge_comm_rss_input_tuple_cmd *req);\nu64 hclge_comm_convert_rss_tuple(u8 tuple_sets);\nint hclge_comm_set_rss_input_tuple(struct hclge_comm_hw *hw,\n\t\t\t\t   struct hclge_comm_rss_cfg *rss_cfg);\nint hclge_comm_set_rss_indir_table(struct hnae3_ae_dev *ae_dev,\n\t\t\t\t   struct hclge_comm_hw *hw, const u16 *indir);\nint hclge_comm_rss_init_cfg(struct hnae3_handle *nic,\n\t\t\t    struct hnae3_ae_dev *ae_dev,\n\t\t\t    struct hclge_comm_rss_cfg *rss_cfg);\nvoid hclge_comm_get_rss_tc_info(u16 rss_size, u8 hw_tc_map, u16 *tc_offset,\n\t\t\t\tu16 *tc_valid, u16 *tc_size);\nint hclge_comm_set_rss_tc_mode(struct hclge_comm_hw *hw, u16 *tc_offset,\n\t\t\t       u16 *tc_valid, u16 *tc_size);\nint hclge_comm_set_rss_hash_key(struct hclge_comm_rss_cfg *rss_cfg,\n\t\t\t\tstruct hclge_comm_hw *hw, const u8 *key,\n\t\t\t\tconst u8 hfunc);\nint hclge_comm_set_rss_tuple(struct hnae3_ae_dev *ae_dev,\n\t\t\t     struct hclge_comm_hw *hw,\n\t\t\t     struct hclge_comm_rss_cfg *rss_cfg,\n\t\t\t     struct ethtool_rxnfc *nfc);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}