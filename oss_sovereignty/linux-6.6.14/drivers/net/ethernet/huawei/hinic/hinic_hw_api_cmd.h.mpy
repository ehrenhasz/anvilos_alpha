{
  "module_name": "hinic_hw_api_cmd.h",
  "hash_id": "ac920fc0b18dbd87945346f09ce84374c5e5aee41d6ac78d46a6551ac3209338",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/huawei/hinic/hinic_hw_api_cmd.h",
  "human_readable_source": " \n \n\n#ifndef HINIC_HW_API_CMD_H\n#define HINIC_HW_API_CMD_H\n\n#include <linux/types.h>\n#include <linux/semaphore.h>\n\n#include \"hinic_hw_if.h\"\n\n#define HINIC_API_CMD_PI_IDX_SHIFT                              0\n\n#define HINIC_API_CMD_PI_IDX_MASK                               0xFFFFFF\n\n#define HINIC_API_CMD_PI_SET(val, member)                       \\\n\t(((u32)(val) & HINIC_API_CMD_PI_##member##_MASK) <<     \\\n\t HINIC_API_CMD_PI_##member##_SHIFT)\n\n#define HINIC_API_CMD_PI_CLEAR(val, member)                     \\\n\t((val) & (~(HINIC_API_CMD_PI_##member##_MASK            \\\n\t << HINIC_API_CMD_PI_##member##_SHIFT)))\n\n#define HINIC_API_CMD_CHAIN_REQ_RESTART_SHIFT                   1\n\n#define HINIC_API_CMD_CHAIN_REQ_RESTART_MASK                    0x1\n\n#define HINIC_API_CMD_CHAIN_REQ_SET(val, member)                \\\n\t(((u32)(val) & HINIC_API_CMD_CHAIN_REQ_##member##_MASK) << \\\n\t HINIC_API_CMD_CHAIN_REQ_##member##_SHIFT)\n\n#define HINIC_API_CMD_CHAIN_REQ_GET(val, member)                \\\n\t(((val) >> HINIC_API_CMD_CHAIN_REQ_##member##_SHIFT) &  \\\n\t HINIC_API_CMD_CHAIN_REQ_##member##_MASK)\n\n#define HINIC_API_CMD_CHAIN_REQ_CLEAR(val, member)              \\\n\t((val) & (~(HINIC_API_CMD_CHAIN_REQ_##member##_MASK     \\\n\t << HINIC_API_CMD_CHAIN_REQ_##member##_SHIFT)))\n\n#define HINIC_API_CMD_CHAIN_CTRL_RESTART_WB_STAT_SHIFT          1\n#define HINIC_API_CMD_CHAIN_CTRL_XOR_ERR_SHIFT                  2\n#define HINIC_API_CMD_CHAIN_CTRL_AEQE_EN_SHIFT                  4\n#define HINIC_API_CMD_CHAIN_CTRL_AEQ_ID_SHIFT                   8\n#define HINIC_API_CMD_CHAIN_CTRL_XOR_CHK_EN_SHIFT               28\n#define HINIC_API_CMD_CHAIN_CTRL_CELL_SIZE_SHIFT                30\n\n#define HINIC_API_CMD_CHAIN_CTRL_RESTART_WB_STAT_MASK           0x1\n#define HINIC_API_CMD_CHAIN_CTRL_XOR_ERR_MASK                   0x1\n#define HINIC_API_CMD_CHAIN_CTRL_AEQE_EN_MASK                   0x1\n#define HINIC_API_CMD_CHAIN_CTRL_AEQ_ID_MASK                    0x3\n#define HINIC_API_CMD_CHAIN_CTRL_XOR_CHK_EN_MASK                0x3\n#define HINIC_API_CMD_CHAIN_CTRL_CELL_SIZE_MASK                 0x3\n\n#define HINIC_API_CMD_CHAIN_CTRL_SET(val, member)               \\\n\t(((u32)(val) & HINIC_API_CMD_CHAIN_CTRL_##member##_MASK) << \\\n\t HINIC_API_CMD_CHAIN_CTRL_##member##_SHIFT)\n\n#define HINIC_API_CMD_CHAIN_CTRL_CLEAR(val, member)             \\\n\t((val) & (~(HINIC_API_CMD_CHAIN_CTRL_##member##_MASK    \\\n\t << HINIC_API_CMD_CHAIN_CTRL_##member##_SHIFT)))\n\n#define HINIC_API_CMD_CELL_CTRL_DATA_SZ_SHIFT                   0\n#define HINIC_API_CMD_CELL_CTRL_RD_DMA_ATTR_SHIFT               16\n#define HINIC_API_CMD_CELL_CTRL_WR_DMA_ATTR_SHIFT               24\n#define HINIC_API_CMD_CELL_CTRL_XOR_CHKSUM_SHIFT                56\n\n#define HINIC_API_CMD_CELL_CTRL_DATA_SZ_MASK                    0x3F\n#define HINIC_API_CMD_CELL_CTRL_RD_DMA_ATTR_MASK                0x3F\n#define HINIC_API_CMD_CELL_CTRL_WR_DMA_ATTR_MASK                0x3F\n#define HINIC_API_CMD_CELL_CTRL_XOR_CHKSUM_MASK                 0xFF\n\n#define HINIC_API_CMD_CELL_CTRL_SET(val, member)                \\\n\t((((u64)val) & HINIC_API_CMD_CELL_CTRL_##member##_MASK) << \\\n\t HINIC_API_CMD_CELL_CTRL_##member##_SHIFT)\n\n#define HINIC_API_CMD_DESC_API_TYPE_SHIFT                       0\n#define HINIC_API_CMD_DESC_RD_WR_SHIFT                          1\n#define HINIC_API_CMD_DESC_MGMT_BYPASS_SHIFT                    2\n#define HINIC_API_CMD_DESC_DEST_SHIFT                           32\n#define HINIC_API_CMD_DESC_SIZE_SHIFT                           40\n#define HINIC_API_CMD_DESC_XOR_CHKSUM_SHIFT                     56\n\n#define HINIC_API_CMD_DESC_API_TYPE_MASK                        0x1\n#define HINIC_API_CMD_DESC_RD_WR_MASK                           0x1\n#define HINIC_API_CMD_DESC_MGMT_BYPASS_MASK                     0x1\n#define HINIC_API_CMD_DESC_DEST_MASK                            0x1F\n#define HINIC_API_CMD_DESC_SIZE_MASK                            0x7FF\n#define HINIC_API_CMD_DESC_XOR_CHKSUM_MASK                      0xFF\n\n#define HINIC_API_CMD_DESC_SET(val, member)                     \\\n\t((((u64)val) & HINIC_API_CMD_DESC_##member##_MASK) <<   \\\n\t HINIC_API_CMD_DESC_##member##_SHIFT)\n\n#define HINIC_API_CMD_STATUS_HEADER_CHAIN_ID_SHIFT              16\n\n#define HINIC_API_CMD_STATUS_HEADER_CHAIN_ID_MASK               0xFF\n\n#define HINIC_API_CMD_STATUS_HEADER_GET(val, member)            \\\n\t(((val) >> HINIC_API_CMD_STATUS_HEADER_##member##_SHIFT) & \\\n\t HINIC_API_CMD_STATUS_HEADER_##member##_MASK)\n\n#define HINIC_API_CMD_STATUS_CONS_IDX_SHIFT                     0\n#define HINIC_API_CMD_STATUS_FSM_SHIFT\t\t\t\t24\n#define HINIC_API_CMD_STATUS_CHKSUM_ERR_SHIFT                   28\n#define HINIC_API_CMD_STATUS_CPLD_ERR_SHIFT\t\t\t30\n\n#define HINIC_API_CMD_STATUS_CONS_IDX_MASK                      0xFFFFFF\n#define HINIC_API_CMD_STATUS_FSM_MASK\t\t\t\t0xFU\n#define HINIC_API_CMD_STATUS_CHKSUM_ERR_MASK                    0x3\n#define HINIC_API_CMD_STATUS_CPLD_ERR_MASK\t\t\t0x1U\n\n#define HINIC_API_CMD_STATUS_GET(val, member)                   \\\n\t(((val) >> HINIC_API_CMD_STATUS_##member##_SHIFT) &     \\\n\t HINIC_API_CMD_STATUS_##member##_MASK)\n\nenum hinic_api_cmd_chain_type {\n\tHINIC_API_CMD_WRITE_TO_MGMT_CPU = 2,\n\n\tHINIC_API_CMD_MAX,\n};\n\nstruct hinic_api_cmd_chain_attr {\n\tstruct hinic_hwif               *hwif;\n\tenum hinic_api_cmd_chain_type   chain_type;\n\n\tu32                             num_cells;\n\tu16                             cell_size;\n};\n\nstruct hinic_api_cmd_status {\n\tu64     header;\n\tu32     status;\n\tu32     rsvd0;\n\tu32     rsvd1;\n\tu32     rsvd2;\n\tu64     rsvd3;\n};\n\n \nstruct hinic_api_cmd_cell {\n\tu64 ctrl;\n\n\t \n\tu64 next_cell_paddr;\n\n\tu64 desc;\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tu64 hw_cmd_paddr;\n\t\t} write;\n\n\t\tstruct {\n\t\t\tu64 hw_wb_resp_paddr;\n\t\t\tu64 hw_cmd_paddr;\n\t\t} read;\n\t};\n};\n\nstruct hinic_api_cmd_cell_ctxt {\n\tdma_addr_t                      cell_paddr;\n\tstruct hinic_api_cmd_cell       *cell_vaddr;\n\n\tdma_addr_t                      api_cmd_paddr;\n\tu8                              *api_cmd_vaddr;\n};\n\nstruct hinic_api_cmd_chain {\n\tstruct hinic_hwif               *hwif;\n\tenum hinic_api_cmd_chain_type   chain_type;\n\n\tu32                             num_cells;\n\tu16                             cell_size;\n\n\t \n\tu32                             prod_idx;\n\tu32                             cons_idx;\n\n\tstruct semaphore                sem;\n\n\tstruct hinic_api_cmd_cell_ctxt  *cell_ctxt;\n\n\tdma_addr_t                      wb_status_paddr;\n\tstruct hinic_api_cmd_status     *wb_status;\n\n\tdma_addr_t                      head_cell_paddr;\n\tstruct hinic_api_cmd_cell       *head_node;\n\tstruct hinic_api_cmd_cell       *curr_node;\n};\n\nint hinic_api_cmd_write(struct hinic_api_cmd_chain *chain,\n\t\t\tenum hinic_node_id dest, u8 *cmd, u16 size);\n\nint hinic_api_cmd_init(struct hinic_api_cmd_chain **chain,\n\t\t       struct hinic_hwif *hwif);\n\nvoid hinic_api_cmd_free(struct hinic_api_cmd_chain **chain);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}