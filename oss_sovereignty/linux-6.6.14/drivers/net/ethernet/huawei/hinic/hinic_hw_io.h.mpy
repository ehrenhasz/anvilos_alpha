{
  "module_name": "hinic_hw_io.h",
  "hash_id": "9de2d49ffafa01b9d304414d9f8f3578adfd708a0fe75a7191de313dd65fcba0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/huawei/hinic/hinic_hw_io.h",
  "human_readable_source": " \n \n\n#ifndef HINIC_HW_IO_H\n#define HINIC_HW_IO_H\n\n#include <linux/types.h>\n#include <linux/pci.h>\n#include <linux/semaphore.h>\n#include <linux/sizes.h>\n\n#include \"hinic_hw_if.h\"\n#include \"hinic_hw_eqs.h\"\n#include \"hinic_hw_wq.h\"\n#include \"hinic_hw_cmdq.h\"\n#include \"hinic_hw_qp.h\"\n\n#define HINIC_DB_PAGE_SIZE      SZ_4K\n#define HINIC_DB_SIZE           SZ_4M\n#define HINIC_HW_WQ_PAGE_SIZE\tSZ_4K\n#define HINIC_DEFAULT_WQ_PAGE_SIZE SZ_256K\n\n#define HINIC_DB_MAX_AREAS      (HINIC_DB_SIZE / HINIC_DB_PAGE_SIZE)\n\nenum hinic_db_type {\n\tHINIC_DB_CMDQ_TYPE,\n\tHINIC_DB_SQ_TYPE,\n};\n\nenum hinic_io_path {\n\tHINIC_CTRL_PATH,\n\tHINIC_DATA_PATH,\n};\n\nstruct hinic_free_db_area {\n\tint             db_idx[HINIC_DB_MAX_AREAS];\n\n\tint             alloc_pos;\n\tint             return_pos;\n\n\tint             num_free;\n\n\t \n\tstruct semaphore        idx_lock;\n};\n\nstruct hinic_nic_cfg {\n\t \n\tstruct mutex\t\tcfg_mutex;\n\tbool\t\t\tpause_set;\n\tu32\t\t\tauto_neg;\n\tu32\t\t\trx_pause;\n\tu32\t\t\ttx_pause;\n};\n\nstruct hinic_func_to_io {\n\tstruct hinic_hwif       *hwif;\n\tstruct hinic_hwdev      *hwdev;\n\tu16\t\t\tglobal_qpn;\n\tstruct hinic_ceqs       ceqs;\n\n\tstruct hinic_wqs        wqs;\n\n\tstruct hinic_wq         *sq_wq;\n\tstruct hinic_wq         *rq_wq;\n\n\tstruct hinic_qp         *qps;\n\tu16                     max_qps;\n\n\tu16\t\t\tsq_depth;\n\tu16\t\t\trq_depth;\n\n\tvoid __iomem            **sq_db;\n\tvoid __iomem            *db_base;\n\n\tvoid                    *ci_addr_base;\n\tdma_addr_t              ci_dma_base;\n\n\tstruct hinic_free_db_area       free_db_area;\n\n\tvoid __iomem                    *cmdq_db_area[HINIC_MAX_CMDQ_TYPES];\n\n\tstruct hinic_cmdqs              cmdqs;\n\n\tu16\t\t\tmax_vfs;\n\tstruct vf_data_storage\t*vf_infos;\n\tu8\t\t\tlink_status;\n\tstruct hinic_nic_cfg\tnic_cfg;\n};\n\nstruct hinic_wq_page_size {\n\tu8\tstatus;\n\tu8\tversion;\n\tu8\trsvd0[6];\n\n\tu16\tfunc_idx;\n\tu8\tppf_idx;\n\tu8\tpage_size;\n\n\tu32\trsvd1;\n};\n\nint hinic_set_wq_page_size(struct hinic_hwdev *hwdev, u16 func_idx,\n\t\t\t   u32 page_size);\n\nint hinic_io_create_qps(struct hinic_func_to_io *func_to_io,\n\t\t\tu16 base_qpn, int num_qps,\n\t\t\tstruct msix_entry *sq_msix_entries,\n\t\t\tstruct msix_entry *rq_msix_entries);\n\nvoid hinic_io_destroy_qps(struct hinic_func_to_io *func_to_io,\n\t\t\t  int num_qps);\n\nint hinic_io_init(struct hinic_func_to_io *func_to_io,\n\t\t  struct hinic_hwif *hwif, u16 max_qps, int num_ceqs,\n\t\t  struct msix_entry *ceq_msix_entries);\n\nvoid hinic_io_free(struct hinic_func_to_io *func_to_io);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}