{
  "module_name": "hinic_devlink.h",
  "hash_id": "a2fdc6721c13260f2d41a4dfa5e4b34bb32d6d04d7e3028876e56e676b263d14",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/huawei/hinic/hinic_devlink.h",
  "human_readable_source": " \n \n\n#ifndef __HINIC_DEVLINK_H__\n#define __HINIC_DEVLINK_H__\n\n#include <net/devlink.h>\n#include \"hinic_dev.h\"\n\n#define MAX_FW_TYPE_NUM 30\n#define HINIC_MAGIC_NUM 0x18221100\n#define UPDATEFW_IMAGE_HEAD_SIZE 1024\n#define FW_UPDATE_COLD 0\n#define FW_UPDATE_HOT  1\n\n#define UP_TYPE_A 0x0\n#define UP_TYPE_B 0x1\n\n#define MAX_FW_FRAGMENT_LEN 1536\n#define HINIC_FW_DISMATCH_ERROR 10\n\nenum hinic_fw_type {\n\tUP_FW_UPDATE_UP_TEXT_A = 0x0,\n\tUP_FW_UPDATE_UP_DATA_A,\n\tUP_FW_UPDATE_UP_TEXT_B,\n\tUP_FW_UPDATE_UP_DATA_B,\n\tUP_FW_UPDATE_UP_DICT,\n\n\tUP_FW_UPDATE_HLINK_ONE = 0x5,\n\tUP_FW_UPDATE_HLINK_TWO,\n\tUP_FW_UPDATE_HLINK_THR,\n\tUP_FW_UPDATE_PHY,\n\tUP_FW_UPDATE_TILE_TEXT,\n\n\tUP_FW_UPDATE_TILE_DATA = 0xa,\n\tUP_FW_UPDATE_TILE_DICT,\n\tUP_FW_UPDATE_PPE_STATE,\n\tUP_FW_UPDATE_PPE_BRANCH,\n\tUP_FW_UPDATE_PPE_EXTACT,\n\n\tUP_FW_UPDATE_CLP_LEGACY = 0xf,\n\tUP_FW_UPDATE_PXE_LEGACY,\n\tUP_FW_UPDATE_ISCSI_LEGACY,\n\tUP_FW_UPDATE_CLP_EFI,\n\tUP_FW_UPDATE_PXE_EFI,\n\n\tUP_FW_UPDATE_ISCSI_EFI = 0x14,\n\tUP_FW_UPDATE_CFG,\n\tUP_FW_UPDATE_BOOT,\n\tUP_FW_UPDATE_VPD,\n\tFILE_TYPE_TOTAL_NUM\n};\n\n#define _IMAGE_UP_ALL_IN ((1 << UP_FW_UPDATE_UP_TEXT_A) | \\\n\t\t\t  (1 << UP_FW_UPDATE_UP_DATA_A) | \\\n\t\t\t  (1 << UP_FW_UPDATE_UP_TEXT_B) | \\\n\t\t\t  (1 << UP_FW_UPDATE_UP_DATA_B) | \\\n\t\t\t  (1 << UP_FW_UPDATE_UP_DICT) | \\\n\t\t\t  (1 << UP_FW_UPDATE_BOOT) | \\\n\t\t\t  (1 << UP_FW_UPDATE_HLINK_ONE) | \\\n\t\t\t  (1 << UP_FW_UPDATE_HLINK_TWO) | \\\n\t\t\t  (1 << UP_FW_UPDATE_HLINK_THR))\n\n#define _IMAGE_UCODE_ALL_IN ((1 << UP_FW_UPDATE_TILE_TEXT) | \\\n\t\t\t     (1 << UP_FW_UPDATE_TILE_DICT) | \\\n\t\t\t     (1 << UP_FW_UPDATE_PPE_STATE) | \\\n\t\t\t     (1 << UP_FW_UPDATE_PPE_BRANCH) | \\\n\t\t\t     (1 << UP_FW_UPDATE_PPE_EXTACT))\n\n#define _IMAGE_COLD_SUB_MODULES_MUST_IN (_IMAGE_UP_ALL_IN | _IMAGE_UCODE_ALL_IN)\n#define _IMAGE_HOT_SUB_MODULES_MUST_IN (_IMAGE_UP_ALL_IN | _IMAGE_UCODE_ALL_IN)\n#define _IMAGE_CFG_SUB_MODULES_MUST_IN BIT(UP_FW_UPDATE_CFG)\n#define UP_FW_UPDATE_UP_TEXT  0x0\n#define UP_FW_UPDATE_UP_DATA  0x1\n#define UP_FW_UPDATE_VPD_B    0x15\n\nstruct fw_section_info_st {\n\tu32 fw_section_len;\n\tu32 fw_section_offset;\n\tu32 fw_section_version;\n\tu32 fw_section_type;\n\tu32 fw_section_crc;\n};\n\nstruct fw_image_st {\n\tu32 fw_version;\n\tu32 fw_len;\n\tu32 fw_magic;\n\tstruct {\n\t\tu32 fw_section_cnt:16;\n\t\tu32 resd:16;\n\t} fw_info;\n\tstruct fw_section_info_st fw_section_info[MAX_FW_TYPE_NUM];\n\tu32 device_id;\n\tu32 res[101];\n\tvoid *bin_data;\n};\n\nstruct host_image_st {\n\tstruct fw_section_info_st image_section_info[MAX_FW_TYPE_NUM];\n\tstruct {\n\t\tu32 up_total_len;\n\t\tu32 fw_version;\n\t} image_info;\n\tu32 section_type_num;\n\tu32 device_id;\n};\n\nstruct devlink *hinic_devlink_alloc(struct device *dev);\nvoid hinic_devlink_free(struct devlink *devlink);\nvoid hinic_devlink_register(struct hinic_devlink_priv *priv);\nvoid hinic_devlink_unregister(struct hinic_devlink_priv *priv);\n\nint hinic_health_reporters_create(struct hinic_devlink_priv *priv);\nvoid hinic_health_reporters_destroy(struct hinic_devlink_priv *priv);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}