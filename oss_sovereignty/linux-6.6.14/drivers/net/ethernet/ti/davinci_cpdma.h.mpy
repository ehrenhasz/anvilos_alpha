{
  "module_name": "davinci_cpdma.h",
  "hash_id": "079d6afabb0c9a429e4bef50ce41d538da2a1a9838c0540d89d18c6a0b393f96",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/ti/davinci_cpdma.h",
  "human_readable_source": " \n \n#ifndef __DAVINCI_CPDMA_H__\n#define __DAVINCI_CPDMA_H__\n\n#define CPDMA_MAX_CHANNELS\tBITS_PER_LONG\n\n#define CPDMA_RX_SOURCE_PORT(__status__)\t((__status__ >> 16) & 0x7)\n\n#define CPDMA_RX_VLAN_ENCAP BIT(19)\n\n#define CPDMA_EOI_RX_THRESH\t0x0\n#define CPDMA_EOI_RX\t\t0x1\n#define CPDMA_EOI_TX\t\t0x2\n#define CPDMA_EOI_MISC\t\t0x3\n\nstruct cpdma_params {\n\tstruct device\t\t*dev;\n\tvoid __iomem\t\t*dmaregs;\n\tvoid __iomem\t\t*txhdp, *rxhdp, *txcp, *rxcp;\n\tvoid __iomem\t\t*rxthresh, *rxfree;\n\tint\t\t\tnum_chan;\n\tbool\t\t\thas_soft_reset;\n\tint\t\t\tmin_packet_size;\n\tdma_addr_t\t\tdesc_mem_phys;\n\tdma_addr_t\t\tdesc_hw_addr;\n\tint\t\t\tdesc_mem_size;\n\tint\t\t\tdesc_align;\n\tu32\t\t\tbus_freq_mhz;\n\tu32\t\t\tdescs_pool_size;\n\n\t \n\tbool\t\t\thas_ext_regs;\n};\n\nstruct cpdma_chan_stats {\n\tu32\t\t\thead_enqueue;\n\tu32\t\t\ttail_enqueue;\n\tu32\t\t\tpad_enqueue;\n\tu32\t\t\tmisqueued;\n\tu32\t\t\tdesc_alloc_fail;\n\tu32\t\t\tpad_alloc_fail;\n\tu32\t\t\trunt_receive_buff;\n\tu32\t\t\trunt_transmit_buff;\n\tu32\t\t\tempty_dequeue;\n\tu32\t\t\tbusy_dequeue;\n\tu32\t\t\tgood_dequeue;\n\tu32\t\t\trequeue;\n\tu32\t\t\tteardown_dequeue;\n};\n\nstruct cpdma_ctlr;\nstruct cpdma_chan;\n\ntypedef void (*cpdma_handler_fn)(void *token, int len, int status);\n\nstruct cpdma_ctlr *cpdma_ctlr_create(struct cpdma_params *params);\nint cpdma_ctlr_destroy(struct cpdma_ctlr *ctlr);\nint cpdma_ctlr_start(struct cpdma_ctlr *ctlr);\nint cpdma_ctlr_stop(struct cpdma_ctlr *ctlr);\n\nstruct cpdma_chan *cpdma_chan_create(struct cpdma_ctlr *ctlr, int chan_num,\n\t\t\t\t     cpdma_handler_fn handler, int rx_type);\nint cpdma_chan_get_rx_buf_num(struct cpdma_chan *chan);\nint cpdma_chan_destroy(struct cpdma_chan *chan);\nint cpdma_chan_start(struct cpdma_chan *chan);\nint cpdma_chan_stop(struct cpdma_chan *chan);\n\nint cpdma_chan_get_stats(struct cpdma_chan *chan,\n\t\t\t struct cpdma_chan_stats *stats);\nint cpdma_chan_submit_mapped(struct cpdma_chan *chan, void *token,\n\t\t\t     dma_addr_t data, int len, int directed);\nint cpdma_chan_submit(struct cpdma_chan *chan, void *token, void *data,\n\t\t      int len, int directed);\nint cpdma_chan_idle_submit_mapped(struct cpdma_chan *chan, void *token,\n\t\t\t\t  dma_addr_t data, int len, int directed);\nint cpdma_chan_idle_submit(struct cpdma_chan *chan, void *token, void *data,\n\t\t\t   int len, int directed);\nint cpdma_chan_process(struct cpdma_chan *chan, int quota);\n\nint cpdma_ctlr_int_ctrl(struct cpdma_ctlr *ctlr, bool enable);\nvoid cpdma_ctlr_eoi(struct cpdma_ctlr *ctlr, u32 value);\nint cpdma_chan_int_ctrl(struct cpdma_chan *chan, bool enable);\nu32 cpdma_ctrl_rxchs_state(struct cpdma_ctlr *ctlr);\nu32 cpdma_ctrl_txchs_state(struct cpdma_ctlr *ctlr);\nbool cpdma_check_free_tx_desc(struct cpdma_chan *chan);\nint cpdma_chan_set_weight(struct cpdma_chan *ch, int weight);\nint cpdma_chan_set_rate(struct cpdma_chan *ch, u32 rate);\nu32 cpdma_chan_get_rate(struct cpdma_chan *ch);\nu32 cpdma_chan_get_min_rate(struct cpdma_ctlr *ctlr);\n\nenum cpdma_control {\n\tCPDMA_TX_RLIM,\t\t\t \n\tCPDMA_CMD_IDLE,\t\t\t \n\tCPDMA_COPY_ERROR_FRAMES,\t \n\tCPDMA_RX_OFF_LEN_UPDATE,\t \n\tCPDMA_RX_OWNERSHIP_FLIP,\t \n\tCPDMA_TX_PRIO_FIXED,\t\t \n\tCPDMA_STAT_IDLE,\t\t \n\tCPDMA_STAT_TX_ERR_CHAN,\t\t \n\tCPDMA_STAT_TX_ERR_CODE,\t\t \n\tCPDMA_STAT_RX_ERR_CHAN,\t\t \n\tCPDMA_STAT_RX_ERR_CODE,\t\t \n\tCPDMA_RX_BUFFER_OFFSET,\t\t \n};\n\nint cpdma_control_get(struct cpdma_ctlr *ctlr, int control);\nint cpdma_control_set(struct cpdma_ctlr *ctlr, int control, int value);\nint cpdma_get_num_rx_descs(struct cpdma_ctlr *ctlr);\nint cpdma_set_num_rx_descs(struct cpdma_ctlr *ctlr, int num_rx_desc);\nint cpdma_get_num_tx_descs(struct cpdma_ctlr *ctlr);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}