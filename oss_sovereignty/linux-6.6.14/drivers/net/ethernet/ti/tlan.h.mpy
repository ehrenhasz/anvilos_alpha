{
  "module_name": "tlan.h",
  "hash_id": "528a21dcb6d29119336cb734ae57a6caa06c177e73edea548cb3cfb2135ed1f3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/ti/tlan.h",
  "human_readable_source": "#ifndef TLAN_H\n#define TLAN_H\n \n\n\n#include <linux/io.h>\n#include <linux/types.h>\n#include <linux/netdevice.h>\n\n\n\n\t \n\n#define TLAN_MIN_FRAME_SIZE\t64\n#define TLAN_MAX_FRAME_SIZE\t1600\n\n#define TLAN_NUM_RX_LISTS\t32\n#define TLAN_NUM_TX_LISTS\t64\n\n#define TLAN_IGNORE\t\t0\n#define TLAN_RECORD\t\t1\n\n#define TLAN_DBG(lvl, format, args...)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (debug&lvl)\t\t\t\t\t\t\\\n\t\t\tprintk(KERN_DEBUG \"TLAN: \" format, ##args);\t\\\n\t} while (0)\n\n#define TLAN_DEBUG_GNRL\t\t0x0001\n#define TLAN_DEBUG_TX\t\t0x0002\n#define TLAN_DEBUG_RX\t\t0x0004\n#define TLAN_DEBUG_LIST\t\t0x0008\n#define TLAN_DEBUG_PROBE\t0x0010\n\n#define TX_TIMEOUT\t\t(10*HZ)\t  \n#define MAX_TLAN_BOARDS\t\t8\t  \n\n\n\t \n\n#define PCI_DEVICE_ID_NETELLIGENT_10_T2\t\t\t0xB012\n#define PCI_DEVICE_ID_NETELLIGENT_10_100_WS_5100\t0xB030\n#ifndef PCI_DEVICE_ID_OLICOM_OC2183\n#define PCI_DEVICE_ID_OLICOM_OC2183\t\t\t0x0013\n#endif\n#ifndef PCI_DEVICE_ID_OLICOM_OC2325\n#define PCI_DEVICE_ID_OLICOM_OC2325\t\t\t0x0012\n#endif\n#ifndef PCI_DEVICE_ID_OLICOM_OC2326\n#define PCI_DEVICE_ID_OLICOM_OC2326\t\t\t0x0014\n#endif\n\nstruct tlan_adapter_entry {\n\tu16\tvendor_id;\n\tu16\tdevice_id;\n\tchar\t*device_label;\n\tu32\tflags;\n\tu16\taddr_ofs;\n};\n\n#define TLAN_ADAPTER_NONE\t\t0x00000000\n#define TLAN_ADAPTER_UNMANAGED_PHY\t0x00000001\n#define TLAN_ADAPTER_BIT_RATE_PHY\t0x00000002\n#define TLAN_ADAPTER_USE_INTERN_10\t0x00000004\n#define TLAN_ADAPTER_ACTIVITY_LED\t0x00000008\n\n#define TLAN_SPEED_DEFAULT\t0\n#define TLAN_SPEED_10\t\t10\n#define TLAN_SPEED_100\t\t100\n\n#define TLAN_DUPLEX_DEFAULT\t0\n#define TLAN_DUPLEX_HALF\t1\n#define TLAN_DUPLEX_FULL\t2\n\n\n\n\t \n\n#define EISA_ID      0xc80    \n#define EISA_ID0     0xc80    \n#define EISA_ID1     0xc81    \n#define EISA_ID2     0xc82    \n#define EISA_ID3     0xc83    \n#define EISA_CR      0xc84    \n#define EISA_REG0    0xc88    \n#define EISA_REG1    0xc89    \n#define EISA_REG2    0xc8a    \n#define EISA_REG3    0xc8f    \n#define EISA_APROM   0xc90    \n\n\n\n\t \n\n#define TLAN_BUFFERS_PER_LIST\t10\n#define TLAN_LAST_BUFFER\t0x80000000\n#define TLAN_CSTAT_UNUSED\t0x8000\n#define TLAN_CSTAT_FRM_CMP\t0x4000\n#define TLAN_CSTAT_READY\t0x3000\n#define TLAN_CSTAT_EOC\t\t0x0800\n#define TLAN_CSTAT_RX_ERROR\t0x0400\n#define TLAN_CSTAT_PASS_CRC\t0x0200\n#define TLAN_CSTAT_DP_PR\t0x0100\n\n\nstruct tlan_buffer {\n\tu32\tcount;\n\tu32\taddress;\n};\n\n\nstruct tlan_list {\n\tu32\t\tforward;\n\tu16\t\tc_stat;\n\tu16\t\tframe_size;\n\tstruct tlan_buffer buffer[TLAN_BUFFERS_PER_LIST];\n};\n\n\ntypedef u8 TLanBuffer[TLAN_MAX_FRAME_SIZE];\n\n\n\n\n\t \n\n#define TLAN_PHY_MAX_ADDR\t0x1F\n#define TLAN_PHY_NONE\t\t0x20\n\n\n\n\n\t \n\nstruct tlan_priv {\n\tstruct net_device       *next_device;\n\tstruct pci_dev\t\t*pci_dev;\n\tstruct net_device       *dev;\n\tvoid\t\t\t*dma_storage;\n\tdma_addr_t\t\tdma_storage_dma;\n\tunsigned int\t\tdma_size;\n\tu8\t\t\t*pad_buffer;\n\tstruct tlan_list\t*rx_list;\n\tdma_addr_t\t\trx_list_dma;\n\tu8\t\t\t*rx_buffer;\n\tdma_addr_t\t\trx_buffer_dma;\n\tu32\t\t\trx_head;\n\tu32\t\t\trx_tail;\n\tu32\t\t\trx_eoc_count;\n\tstruct tlan_list\t*tx_list;\n\tdma_addr_t\t\ttx_list_dma;\n\tu8\t\t\t*tx_buffer;\n\tdma_addr_t\t\ttx_buffer_dma;\n\tu32\t\t\ttx_head;\n\tu32\t\t\ttx_in_progress;\n\tu32\t\t\ttx_tail;\n\tu32\t\t\ttx_busy_count;\n\tu32\t\t\tphy_online;\n\tu32\t\t\ttimer_set_at;\n\tu32\t\t\ttimer_type;\n\tstruct timer_list\ttimer;\n\tstruct timer_list\tmedia_timer;\n\tstruct board\t\t*adapter;\n\tu32\t\t\tadapter_rev;\n\tu32\t\t\taui;\n\tu32\t\t\tdebug;\n\tu32\t\t\tduplex;\n\tu32\t\t\tphy[2];\n\tu32\t\t\tphy_num;\n\tu32\t\t\tspeed;\n\tu8\t\t\ttlan_rev;\n\tu8\t\t\ttlan_full_duplex;\n\tspinlock_t\t\tlock;\n\tstruct work_struct\t\t\ttlan_tqueue;\n};\n\n\n\n\n\t \n\n#define TLAN_TIMER_ACTIVITY\t\t2\n#define TLAN_TIMER_PHY_PDOWN\t\t3\n#define TLAN_TIMER_PHY_PUP\t\t4\n#define TLAN_TIMER_PHY_RESET\t\t5\n#define TLAN_TIMER_PHY_START_LINK\t6\n#define TLAN_TIMER_PHY_FINISH_AN\t7\n#define TLAN_TIMER_FINISH_RESET\t\t8\n\n#define TLAN_TIMER_ACT_DELAY\t\t(HZ/10)\n\n\n\n\n\t \n\n#define TLAN_EEPROM_ACK\t\t0\n#define TLAN_EEPROM_STOP\t1\n\n#define TLAN_EEPROM_SIZE\t256\n\n\n\n\t \n\n#define TLAN_HOST_CMD\t\t\t0x00\n#define\tTLAN_HC_GO\t\t0x80000000\n#define\t\tTLAN_HC_STOP\t\t0x40000000\n#define\t\tTLAN_HC_ACK\t\t0x20000000\n#define\t\tTLAN_HC_CS_MASK\t\t0x1FE00000\n#define\t\tTLAN_HC_EOC\t\t0x00100000\n#define\t\tTLAN_HC_RT\t\t0x00080000\n#define\t\tTLAN_HC_NES\t\t0x00040000\n#define\t\tTLAN_HC_AD_RST\t\t0x00008000\n#define\t\tTLAN_HC_LD_TMR\t\t0x00004000\n#define\t\tTLAN_HC_LD_THR\t\t0x00002000\n#define\t\tTLAN_HC_REQ_INT\t\t0x00001000\n#define\t\tTLAN_HC_INT_OFF\t\t0x00000800\n#define\t\tTLAN_HC_INT_ON\t\t0x00000400\n#define\t\tTLAN_HC_AC_MASK\t\t0x000000FF\n#define TLAN_CH_PARM\t\t\t0x04\n#define TLAN_DIO_ADR\t\t\t0x08\n#define\t\tTLAN_DA_ADR_INC\t\t0x8000\n#define\t\tTLAN_DA_RAM_ADR\t\t0x4000\n#define TLAN_HOST_INT\t\t\t0x0A\n#define\t\tTLAN_HI_IV_MASK\t\t0x1FE0\n#define\t\tTLAN_HI_IT_MASK\t\t0x001C\n#define TLAN_DIO_DATA\t\t\t0x0C\n\n\n \n\n#define TLAN_NET_CMD\t\t\t0x00\n#define\t\tTLAN_NET_CMD_NRESET\t0x80\n#define\t\tTLAN_NET_CMD_NWRAP\t0x40\n#define\t\tTLAN_NET_CMD_CSF\t0x20\n#define\t\tTLAN_NET_CMD_CAF\t0x10\n#define\t\tTLAN_NET_CMD_NOBRX\t0x08\n#define\t\tTLAN_NET_CMD_DUPLEX\t0x04\n#define\t\tTLAN_NET_CMD_TRFRAM\t0x02\n#define\t\tTLAN_NET_CMD_TXPACE\t0x01\n#define TLAN_NET_SIO\t\t\t0x01\n#define\tTLAN_NET_SIO_MINTEN\t0x80\n#define\t\tTLAN_NET_SIO_ECLOK\t0x40\n#define\t\tTLAN_NET_SIO_ETXEN\t0x20\n#define\t\tTLAN_NET_SIO_EDATA\t0x10\n#define\t\tTLAN_NET_SIO_NMRST\t0x08\n#define\t\tTLAN_NET_SIO_MCLK\t0x04\n#define\t\tTLAN_NET_SIO_MTXEN\t0x02\n#define\t\tTLAN_NET_SIO_MDATA\t0x01\n#define TLAN_NET_STS\t\t\t0x02\n#define\t\tTLAN_NET_STS_MIRQ\t0x80\n#define\t\tTLAN_NET_STS_HBEAT\t0x40\n#define\t\tTLAN_NET_STS_TXSTOP\t0x20\n#define\t\tTLAN_NET_STS_RXSTOP\t0x10\n#define\t\tTLAN_NET_STS_RSRVD\t0x0F\n#define TLAN_NET_MASK\t\t\t0x03\n#define\t\tTLAN_NET_MASK_MASK7\t0x80\n#define\t\tTLAN_NET_MASK_MASK6\t0x40\n#define\t\tTLAN_NET_MASK_MASK5\t0x20\n#define\t\tTLAN_NET_MASK_MASK4\t0x10\n#define\t\tTLAN_NET_MASK_RSRVD\t0x0F\n#define TLAN_NET_CONFIG\t\t\t0x04\n#define\tTLAN_NET_CFG_RCLK\t0x8000\n#define\t\tTLAN_NET_CFG_TCLK\t0x4000\n#define\t\tTLAN_NET_CFG_BIT\t0x2000\n#define\t\tTLAN_NET_CFG_RXCRC\t0x1000\n#define\t\tTLAN_NET_CFG_PEF\t0x0800\n#define\t\tTLAN_NET_CFG_1FRAG\t0x0400\n#define\t\tTLAN_NET_CFG_1CHAN\t0x0200\n#define\t\tTLAN_NET_CFG_MTEST\t0x0100\n#define\t\tTLAN_NET_CFG_PHY_EN\t0x0080\n#define\t\tTLAN_NET_CFG_MSMASK\t0x007F\n#define TLAN_MAN_TEST\t\t\t0x06\n#define TLAN_DEF_VENDOR_ID\t\t0x08\n#define TLAN_DEF_DEVICE_ID\t\t0x0A\n#define TLAN_DEF_REVISION\t\t0x0C\n#define TLAN_DEF_SUBCLASS\t\t0x0D\n#define TLAN_DEF_MIN_LAT\t\t0x0E\n#define TLAN_DEF_MAX_LAT\t\t0x0F\n#define TLAN_AREG_0\t\t\t0x10\n#define TLAN_AREG_1\t\t\t0x16\n#define TLAN_AREG_2\t\t\t0x1C\n#define TLAN_AREG_3\t\t\t0x22\n#define TLAN_HASH_1\t\t\t0x28\n#define TLAN_HASH_2\t\t\t0x2C\n#define TLAN_GOOD_TX_FRMS\t\t0x30\n#define TLAN_TX_UNDERUNS\t\t0x33\n#define TLAN_GOOD_RX_FRMS\t\t0x34\n#define TLAN_RX_OVERRUNS\t\t0x37\n#define TLAN_DEFERRED_TX\t\t0x38\n#define TLAN_CRC_ERRORS\t\t\t0x3A\n#define TLAN_CODE_ERRORS\t\t0x3B\n#define TLAN_MULTICOL_FRMS\t\t0x3C\n#define TLAN_SINGLECOL_FRMS\t\t0x3E\n#define TLAN_EXCESSCOL_FRMS\t\t0x40\n#define TLAN_LATE_COLS\t\t\t0x41\n#define TLAN_CARRIER_LOSS\t\t0x42\n#define TLAN_ACOMMIT\t\t\t0x43\n#define TLAN_LED_REG\t\t\t0x44\n#define\t\tTLAN_LED_ACT\t\t0x10\n#define\t\tTLAN_LED_LINK\t\t0x01\n#define TLAN_BSIZE_REG\t\t\t0x45\n#define TLAN_MAX_RX\t\t\t0x46\n#define TLAN_INT_DIS\t\t\t0x48\n#define\t\tTLAN_ID_TX_EOC\t\t0x04\n#define\t\tTLAN_ID_RX_EOF\t\t0x02\n#define\t\tTLAN_ID_RX_EOC\t\t0x01\n\n\n\n \n\n#define TLAN_INT_NUMBER_OF_INTS\t8\n\n#define TLAN_INT_NONE\t\t\t0x0000\n#define TLAN_INT_TX_EOF\t\t\t0x0001\n#define TLAN_INT_STAT_OVERFLOW\t\t0x0002\n#define TLAN_INT_RX_EOF\t\t\t0x0003\n#define TLAN_INT_DUMMY\t\t\t0x0004\n#define TLAN_INT_TX_EOC\t\t\t0x0005\n#define TLAN_INT_STATUS_CHECK\t\t0x0006\n#define TLAN_INT_RX_EOC\t\t\t0x0007\n\n\n\n \n\n \n\n#define MII_GEN_CTL\t\t\t0x00\n#define\tMII_GC_RESET\t\t0x8000\n#define\t\tMII_GC_LOOPBK\t\t0x4000\n#define\t\tMII_GC_SPEEDSEL\t\t0x2000\n#define\t\tMII_GC_AUTOENB\t\t0x1000\n#define\t\tMII_GC_PDOWN\t\t0x0800\n#define\t\tMII_GC_ISOLATE\t\t0x0400\n#define\t\tMII_GC_AUTORSRT\t\t0x0200\n#define\t\tMII_GC_DUPLEX\t\t0x0100\n#define\t\tMII_GC_COLTEST\t\t0x0080\n#define\t\tMII_GC_RESERVED\t\t0x007F\n#define MII_GEN_STS\t\t\t0x01\n#define\t\tMII_GS_100BT4\t\t0x8000\n#define\t\tMII_GS_100BTXFD\t\t0x4000\n#define\t\tMII_GS_100BTXHD\t\t0x2000\n#define\t\tMII_GS_10BTFD\t\t0x1000\n#define\t\tMII_GS_10BTHD\t\t0x0800\n#define\t\tMII_GS_RESERVED\t\t0x07C0\n#define\t\tMII_GS_AUTOCMPLT\t0x0020\n#define\t\tMII_GS_RFLT\t\t0x0010\n#define\t\tMII_GS_AUTONEG\t\t0x0008\n#define\t\tMII_GS_LINK\t\t0x0004\n#define\t\tMII_GS_JABBER\t\t0x0002\n#define\t\tMII_GS_EXTCAP\t\t0x0001\n#define MII_GEN_ID_HI\t\t\t0x02\n#define MII_GEN_ID_LO\t\t\t0x03\n#define\tMII_GIL_OUI\t\t0xFC00\n#define\tMII_GIL_MODEL\t\t0x03F0\n#define\tMII_GIL_REVISION\t0x000F\n#define MII_AN_ADV\t\t\t0x04\n#define MII_AN_LPA\t\t\t0x05\n#define MII_AN_EXP\t\t\t0x06\n\n \n\n#define TLAN_TLPHY_ID\t\t\t0x10\n#define TLAN_TLPHY_CTL\t\t\t0x11\n#define\tTLAN_TC_IGLINK\t\t0x8000\n#define\t\tTLAN_TC_SWAPOL\t\t0x4000\n#define\t\tTLAN_TC_AUISEL\t\t0x2000\n#define\t\tTLAN_TC_SQEEN\t\t0x1000\n#define\t\tTLAN_TC_MTEST\t\t0x0800\n#define\t\tTLAN_TC_RESERVED\t0x07F8\n#define\t\tTLAN_TC_NFEW\t\t0x0004\n#define\t\tTLAN_TC_INTEN\t\t0x0002\n#define\t\tTLAN_TC_TINT\t\t0x0001\n#define TLAN_TLPHY_STS\t\t\t0x12\n#define\t\tTLAN_TS_MINT\t\t0x8000\n#define\t\tTLAN_TS_PHOK\t\t0x4000\n#define\t\tTLAN_TS_POLOK\t\t0x2000\n#define\t\tTLAN_TS_TPENERGY\t0x1000\n#define\t\tTLAN_TS_RESERVED\t0x0FFF\n#define TLAN_TLPHY_PAR\t\t\t0x19\n#define\t\tTLAN_PHY_CIM_STAT\t0x0020\n#define\t\tTLAN_PHY_SPEED_100\t0x0040\n#define\t\tTLAN_PHY_DUPLEX_FULL\t0x0080\n#define\t\tTLAN_PHY_AN_EN_STAT     0x0400\n\n \n#define NAT_SEM_ID1\t\t\t0x2000\n#define NAT_SEM_ID2\t\t\t0x5C01\n#define LEVEL1_ID1\t\t\t0x7810\n#define LEVEL1_ID2\t\t\t0x0000\n\n#define CIRC_INC(a, b) if (++a >= b) a = 0\n\n \n\nstatic inline u8 tlan_dio_read8(u16 base_addr, u16 internal_addr)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\treturn inb((base_addr + TLAN_DIO_DATA) + (internal_addr & 0x3));\n\n}\n\n\n\n\nstatic inline u16 tlan_dio_read16(u16 base_addr, u16 internal_addr)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\treturn inw((base_addr + TLAN_DIO_DATA) + (internal_addr & 0x2));\n\n}\n\n\n\n\nstatic inline u32 tlan_dio_read32(u16 base_addr, u16 internal_addr)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\treturn inl(base_addr + TLAN_DIO_DATA);\n\n}\n\n\n\n\nstatic inline void tlan_dio_write8(u16 base_addr, u16 internal_addr, u8 data)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\toutb(data, base_addr + TLAN_DIO_DATA + (internal_addr & 0x3));\n\n}\n\n\n\n\nstatic inline void tlan_dio_write16(u16 base_addr, u16 internal_addr, u16 data)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\toutw(data, base_addr + TLAN_DIO_DATA + (internal_addr & 0x2));\n\n}\n\n\n\n\nstatic inline void tlan_dio_write32(u16 base_addr, u16 internal_addr, u32 data)\n{\n\toutw(internal_addr, base_addr + TLAN_DIO_ADR);\n\toutl(data, base_addr + TLAN_DIO_DATA + (internal_addr & 0x2));\n\n}\n\n#define tlan_clear_bit(bit, port)\toutb_p(inb_p(port) & ~bit, port)\n#define tlan_get_bit(bit, port)\t((int) (inb_p(port) & bit))\n#define tlan_set_bit(bit, port)\toutb_p(inb_p(port) | bit, port)\n\n \nstatic inline u32 tlan_hash_func(const u8 *a)\n{\n\tu8     hash;\n\n\thash = (a[0]^a[3]);\t\t \n\thash ^= ((a[0]^a[3])>>6);\t \n\thash ^= ((a[1]^a[4])<<2);\t \n\thash ^= ((a[1]^a[4])>>4);\t \n\thash ^= ((a[2]^a[5])<<4);\t \n\thash ^= ((a[2]^a[5])>>2);\t \n\n\treturn hash & 077;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}