{
  "module_name": "mlxbf_gige_intr.c",
  "hash_id": "895139f60e8af01d6174fded7a0a095db22f3555444912c871d6a59e3e806cbb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_intr.c",
  "human_readable_source": "\n\n \n\n#include <linux/interrupt.h>\n\n#include \"mlxbf_gige.h\"\n#include \"mlxbf_gige_regs.h\"\n\nstatic irqreturn_t mlxbf_gige_error_intr(int irq, void *dev_id)\n{\n\tstruct mlxbf_gige *priv;\n\tu64 int_status;\n\n\tpriv = dev_id;\n\n\tint_status = readq(priv->base + MLXBF_GIGE_INT_STATUS);\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_HW_ACCESS_ERROR)\n\t\tpriv->stats.hw_access_errors++;\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_TX_CHECKSUM_INPUTS) {\n\t\tpriv->stats.tx_invalid_checksums++;\n\t\t \n\t}\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_TX_SMALL_FRAME_SIZE) {\n\t\tpriv->stats.tx_small_frames++;\n\t\t \n\t}\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_TX_PI_CI_EXCEED_WQ_SIZE)\n\t\tpriv->stats.tx_index_errors++;\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_SW_CONFIG_ERROR)\n\t\tpriv->stats.sw_config_errors++;\n\n\tif (int_status & MLXBF_GIGE_INT_STATUS_SW_ACCESS_ERROR)\n\t\tpriv->stats.sw_access_errors++;\n\n\t \n\n\tint_status &= ~MLXBF_GIGE_INT_STATUS_RX_RECEIVE_PACKET;\n\n\twriteq(int_status, priv->base + MLXBF_GIGE_INT_STATUS);\n\n\treturn IRQ_HANDLED;\n}\n\nstatic irqreturn_t mlxbf_gige_rx_intr(int irq, void *dev_id)\n{\n\tstruct mlxbf_gige *priv;\n\n\tpriv = dev_id;\n\n\t \n\n\tnapi_schedule(&priv->napi);\n\n\treturn IRQ_HANDLED;\n}\n\nstatic irqreturn_t mlxbf_gige_llu_plu_intr(int irq, void *dev_id)\n{\n\treturn IRQ_HANDLED;\n}\n\nint mlxbf_gige_request_irqs(struct mlxbf_gige *priv)\n{\n\tint err;\n\n\terr = request_irq(priv->error_irq, mlxbf_gige_error_intr, 0,\n\t\t\t  \"mlxbf_gige_error\", priv);\n\tif (err) {\n\t\tdev_err(priv->dev, \"Request error_irq failure\\n\");\n\t\treturn err;\n\t}\n\n\terr = request_irq(priv->rx_irq, mlxbf_gige_rx_intr, 0,\n\t\t\t  \"mlxbf_gige_rx\", priv);\n\tif (err) {\n\t\tdev_err(priv->dev, \"Request rx_irq failure\\n\");\n\t\tgoto free_error_irq;\n\t}\n\n\terr = request_irq(priv->llu_plu_irq, mlxbf_gige_llu_plu_intr, 0,\n\t\t\t  \"mlxbf_gige_llu_plu\", priv);\n\tif (err) {\n\t\tdev_err(priv->dev, \"Request llu_plu_irq failure\\n\");\n\t\tgoto free_rx_irq;\n\t}\n\n\treturn 0;\n\nfree_rx_irq:\n\tfree_irq(priv->rx_irq, priv);\n\nfree_error_irq:\n\tfree_irq(priv->error_irq, priv);\n\n\treturn err;\n}\n\nvoid mlxbf_gige_free_irqs(struct mlxbf_gige *priv)\n{\n\tfree_irq(priv->error_irq, priv);\n\tfree_irq(priv->rx_irq, priv);\n\tfree_irq(priv->llu_plu_irq, priv);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}