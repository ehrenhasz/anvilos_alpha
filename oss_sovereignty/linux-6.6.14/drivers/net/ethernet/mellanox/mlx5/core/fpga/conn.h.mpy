{
  "module_name": "conn.h",
  "hash_id": "c3b03b33ec77209ab42dcda3379651eecf74f765b95c4086dd267cecb992008e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.h",
  "human_readable_source": " \n\n#ifndef __MLX5_FPGA_CONN_H__\n#define __MLX5_FPGA_CONN_H__\n\n#include <linux/mlx5/cq.h>\n#include <linux/mlx5/qp.h>\n\n#include \"fpga/core.h\"\n#include \"fpga/sdk.h\"\n#include \"wq.h\"\n\nstruct mlx5_fpga_conn {\n\tstruct mlx5_fpga_device *fdev;\n\n\tvoid (*recv_cb)(void *cb_arg, struct mlx5_fpga_dma_buf *buf);\n\tvoid *cb_arg;\n\n\t \n\tu32 fpga_qpc[MLX5_ST_SZ_DW(fpga_qpc)];\n\tu32 fpga_qpn;\n\n\t \n\tstruct {\n\t\tstruct mlx5_cqwq wq;\n\t\tstruct mlx5_wq_ctrl wq_ctrl;\n\t\tstruct mlx5_core_cq mcq;\n\t\tstruct tasklet_struct tasklet;\n\t} cq;\n\n\t \n\tstruct {\n\t\tbool active;\n\t\tint sgid_index;\n\t\tstruct mlx5_wq_qp wq;\n\t\tstruct mlx5_wq_ctrl wq_ctrl;\n\t\tu32 qpn;\n\t\tstruct {\n\t\t\tspinlock_t lock;  \n\t\t\tunsigned int pc;\n\t\t\tunsigned int cc;\n\t\t\tunsigned int size;\n\t\t\tstruct mlx5_fpga_dma_buf **bufs;\n\t\t\tstruct list_head backlog;\n\t\t} sq;\n\t\tstruct {\n\t\t\tunsigned int pc;\n\t\t\tunsigned int cc;\n\t\t\tunsigned int size;\n\t\t\tstruct mlx5_fpga_dma_buf **bufs;\n\t\t} rq;\n\t} qp;\n};\n\nint mlx5_fpga_conn_device_init(struct mlx5_fpga_device *fdev);\nvoid mlx5_fpga_conn_device_cleanup(struct mlx5_fpga_device *fdev);\nstruct mlx5_fpga_conn *\nmlx5_fpga_conn_create(struct mlx5_fpga_device *fdev,\n\t\t      struct mlx5_fpga_conn_attr *attr,\n\t\t      enum mlx5_ifc_fpga_qp_type qp_type);\nvoid mlx5_fpga_conn_destroy(struct mlx5_fpga_conn *conn);\nint mlx5_fpga_conn_send(struct mlx5_fpga_conn *conn,\n\t\t\tstruct mlx5_fpga_dma_buf *buf);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}