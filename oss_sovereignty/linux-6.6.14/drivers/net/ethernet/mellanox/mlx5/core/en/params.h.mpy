{
  "module_name": "params.h",
  "hash_id": "57fcd20298f9b164e0f027f66910dde6d20a7c0e91312c48c65281e7f01a8963",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/en/params.h",
  "human_readable_source": " \n \n\n#ifndef __MLX5_EN_PARAMS_H__\n#define __MLX5_EN_PARAMS_H__\n\n#include \"en.h\"\n\nstruct mlx5e_xsk_param {\n\tu16 headroom;\n\tu16 chunk_size;\n\tbool unaligned;\n};\n\nstruct mlx5e_cq_param {\n\tu32                        cqc[MLX5_ST_SZ_DW(cqc)];\n\tstruct mlx5_wq_param       wq;\n\tu16                        eq_ix;\n\tu8                         cq_period_mode;\n};\n\nstruct mlx5e_rq_param {\n\tstruct mlx5e_cq_param      cqp;\n\tu32                        rqc[MLX5_ST_SZ_DW(rqc)];\n\tstruct mlx5_wq_param       wq;\n\tstruct mlx5e_rq_frags_info frags_info;\n\tu32                        xdp_frag_size;\n};\n\nstruct mlx5e_sq_param {\n\tstruct mlx5e_cq_param      cqp;\n\tu32                        sqc[MLX5_ST_SZ_DW(sqc)];\n\tstruct mlx5_wq_param       wq;\n\tbool                       is_mpw;\n\tbool                       is_tls;\n\tbool                       is_xdp_mb;\n\tu16                        stop_room;\n};\n\nstruct mlx5e_channel_param {\n\tstruct mlx5e_rq_param      rq;\n\tstruct mlx5e_sq_param      txq_sq;\n\tstruct mlx5e_sq_param      xdp_sq;\n\tstruct mlx5e_sq_param      icosq;\n\tstruct mlx5e_sq_param      async_icosq;\n};\n\nstruct mlx5e_create_sq_param {\n\tstruct mlx5_wq_ctrl        *wq_ctrl;\n\tu32                         cqn;\n\tu32                         ts_cqe_to_dest_cqn;\n\tu32                         tisn;\n\tu8                          tis_lst_sz;\n\tu8                          min_inline_mode;\n};\n\n \n\nu8 mlx5e_mpwrq_page_shift(struct mlx5_core_dev *mdev, struct mlx5e_xsk_param *xsk);\nenum mlx5e_mpwrq_umr_mode\nmlx5e_mpwrq_umr_mode(struct mlx5_core_dev *mdev, struct mlx5e_xsk_param *xsk);\nu8 mlx5e_mpwrq_umr_entry_size(enum mlx5e_mpwrq_umr_mode mode);\nu8 mlx5e_mpwrq_log_wqe_sz(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t  enum mlx5e_mpwrq_umr_mode umr_mode);\nu8 mlx5e_mpwrq_pages_per_wqe(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t     enum mlx5e_mpwrq_umr_mode umr_mode);\nu16 mlx5e_mpwrq_umr_wqe_sz(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t   enum mlx5e_mpwrq_umr_mode umr_mode);\nu8 mlx5e_mpwrq_umr_wqebbs(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t  enum mlx5e_mpwrq_umr_mode umr_mode);\nu8 mlx5e_mpwrq_mtts_per_wqe(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t    enum mlx5e_mpwrq_umr_mode umr_mode);\nu32 mlx5e_mpwrq_max_num_entries(struct mlx5_core_dev *mdev,\n\t\t\t\tenum mlx5e_mpwrq_umr_mode umr_mode);\nu8 mlx5e_mpwrq_max_log_rq_pkts(struct mlx5_core_dev *mdev, u8 page_shift,\n\t\t\t       enum mlx5e_mpwrq_umr_mode umr_mode);\n\n \n\nvoid mlx5e_reset_tx_moderation(struct mlx5e_params *params, u8 cq_period_mode);\nvoid mlx5e_reset_rx_moderation(struct mlx5e_params *params, u8 cq_period_mode);\nvoid mlx5e_set_tx_cq_mode_params(struct mlx5e_params *params, u8 cq_period_mode);\nvoid mlx5e_set_rx_cq_mode_params(struct mlx5e_params *params, u8 cq_period_mode);\n\nbool slow_pci_heuristic(struct mlx5_core_dev *mdev);\nint mlx5e_mpwrq_validate_regular(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\nint mlx5e_mpwrq_validate_xsk(struct mlx5_core_dev *mdev, struct mlx5e_params *params,\n\t\t\t     struct mlx5e_xsk_param *xsk);\nvoid mlx5e_build_rq_params(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\nvoid mlx5e_set_rq_type(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\nvoid mlx5e_init_rq_type_params(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\n\nu16 mlx5e_get_linear_rq_headroom(struct mlx5e_params *params,\n\t\t\t\t struct mlx5e_xsk_param *xsk);\nbool mlx5e_rx_is_linear_skb(struct mlx5_core_dev *mdev,\n\t\t\t    struct mlx5e_params *params,\n\t\t\t    struct mlx5e_xsk_param *xsk);\nbool mlx5e_rx_mpwqe_is_linear_skb(struct mlx5_core_dev *mdev,\n\t\t\t\t  struct mlx5e_params *params,\n\t\t\t\t  struct mlx5e_xsk_param *xsk);\nu8 mlx5e_mpwqe_get_log_rq_size(struct mlx5_core_dev *mdev,\n\t\t\t       struct mlx5e_params *params,\n\t\t\t       struct mlx5e_xsk_param *xsk);\nu8 mlx5e_shampo_get_log_hd_entry_size(struct mlx5_core_dev *mdev,\n\t\t\t\t      struct mlx5e_params *params);\nu8 mlx5e_shampo_get_log_rsrv_size(struct mlx5_core_dev *mdev,\n\t\t\t\t  struct mlx5e_params *params);\nu8 mlx5e_shampo_get_log_pkt_per_rsrv(struct mlx5_core_dev *mdev,\n\t\t\t\t     struct mlx5e_params *params);\nu32 mlx5e_shampo_hd_per_wqe(struct mlx5_core_dev *mdev,\n\t\t\t    struct mlx5e_params *params,\n\t\t\t    struct mlx5e_rq_param *rq_param);\nu32 mlx5e_shampo_hd_per_wq(struct mlx5_core_dev *mdev,\n\t\t\t   struct mlx5e_params *params,\n\t\t\t   struct mlx5e_rq_param *rq_param);\nu8 mlx5e_mpwqe_get_log_stride_size(struct mlx5_core_dev *mdev,\n\t\t\t\t   struct mlx5e_params *params,\n\t\t\t\t   struct mlx5e_xsk_param *xsk);\nu8 mlx5e_mpwqe_get_log_num_strides(struct mlx5_core_dev *mdev,\n\t\t\t\t   struct mlx5e_params *params,\n\t\t\t\t   struct mlx5e_xsk_param *xsk);\nu8 mlx5e_mpwqe_get_min_wqe_bulk(unsigned int wq_sz);\nu16 mlx5e_get_rq_headroom(struct mlx5_core_dev *mdev,\n\t\t\t  struct mlx5e_params *params,\n\t\t\t  struct mlx5e_xsk_param *xsk);\n\n \n\nvoid mlx5e_build_create_cq_param(struct mlx5e_create_cq_param *ccp, struct mlx5e_channel *c);\nint mlx5e_build_rq_param(struct mlx5_core_dev *mdev,\n\t\t\t struct mlx5e_params *params,\n\t\t\t struct mlx5e_xsk_param *xsk,\n\t\t\t u16 q_counter,\n\t\t\t struct mlx5e_rq_param *param);\nvoid mlx5e_build_drop_rq_param(struct mlx5_core_dev *mdev,\n\t\t\t       u16 q_counter,\n\t\t\t       struct mlx5e_rq_param *param);\nvoid mlx5e_build_sq_param_common(struct mlx5_core_dev *mdev,\n\t\t\t\t struct mlx5e_sq_param *param);\nvoid mlx5e_build_sq_param(struct mlx5_core_dev *mdev,\n\t\t\t  struct mlx5e_params *params,\n\t\t\t  struct mlx5e_sq_param *param);\nvoid mlx5e_build_tx_cq_param(struct mlx5_core_dev *mdev,\n\t\t\t     struct mlx5e_params *params,\n\t\t\t     struct mlx5e_cq_param *param);\nvoid mlx5e_build_xdpsq_param(struct mlx5_core_dev *mdev,\n\t\t\t     struct mlx5e_params *params,\n\t\t\t     struct mlx5e_xsk_param *xsk,\n\t\t\t     struct mlx5e_sq_param *param);\nint mlx5e_build_channel_param(struct mlx5_core_dev *mdev,\n\t\t\t      struct mlx5e_params *params,\n\t\t\t      u16 q_counter,\n\t\t\t      struct mlx5e_channel_param *cparam);\n\nu16 mlx5e_calc_sq_stop_room(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\nint mlx5e_validate_params(struct mlx5_core_dev *mdev, struct mlx5e_params *params);\nbool mlx5e_verify_params_rx_mpwqe_strides(struct mlx5_core_dev *mdev,\n\t\t\t\t\t  struct mlx5e_params *params,\n\t\t\t\t\t  struct mlx5e_xsk_param *xsk);\n\nstatic inline void mlx5e_params_print_info(struct mlx5_core_dev *mdev,\n\t\t\t\t\t   struct mlx5e_params *params)\n{\n\tmlx5_core_info(mdev, \"MLX5E: StrdRq(%d) RqSz(%ld) StrdSz(%ld) RxCqeCmprss(%d %s)\\n\",\n\t\t       params->rq_wq_type == MLX5_WQ_TYPE_LINKED_LIST_STRIDING_RQ,\n\t\t       params->rq_wq_type == MLX5_WQ_TYPE_LINKED_LIST_STRIDING_RQ ?\n\t\t       BIT(mlx5e_mpwqe_get_log_rq_size(mdev, params, NULL)) :\n\t\t       BIT(params->log_rq_mtu_frames),\n\t\t       BIT(mlx5e_mpwqe_get_log_stride_size(mdev, params, NULL)),\n\t\t       MLX5E_GET_PFLAG(params, MLX5E_PFLAG_RX_CQE_COMPRESS),\n\t\t       MLX5_CAP_GEN(mdev, enhanced_cqe_compression) ?\n\t\t\t\t       \"enhanced\" : \"basic\");\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}