{
  "module_name": "act.h",
  "hash_id": "e2c2ba52938dc62fe09ec5a47152af78f037fa1b2201a14e71c9e5b213d2e876",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/act.h",
  "human_readable_source": " \n \n\n#ifndef __MLX5_EN_TC_ACT_H__\n#define __MLX5_EN_TC_ACT_H__\n\n#include <net/tc_act/tc_pedit.h>\n#include <net/flow_offload.h>\n#include <linux/netlink.h>\n#include \"eswitch.h\"\n#include \"pedit.h\"\n\nstruct mlx5_flow_attr;\n\nstruct mlx5e_tc_act_parse_state {\n\tstruct flow_action *flow_action;\n\tstruct mlx5e_tc_flow *flow;\n\tstruct netlink_ext_ack *extack;\n\tu32 actions;\n\tbool encap;\n\tbool decap;\n\tbool mpls_push;\n\tbool eth_push;\n\tbool eth_pop;\n\tbool ptype_host;\n\tconst struct ip_tunnel_info *tun_info;\n\tstruct mlx5e_mpls_info mpls_info;\n\tint ifindexes[MLX5_MAX_FLOW_FWD_VPORTS];\n\tint if_count;\n\tstruct mlx5_tc_ct_priv *ct_priv;\n};\n\nstruct mlx5e_tc_act_branch_ctrl {\n\tenum flow_action_id act_id;\n\tu32 extval;\n};\n\nstruct mlx5e_tc_act {\n\tbool (*can_offload)(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\t    const struct flow_action_entry *act,\n\t\t\t    int act_index,\n\t\t\t    struct mlx5_flow_attr *attr);\n\n\tint (*parse_action)(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\t    const struct flow_action_entry *act,\n\t\t\t    struct mlx5e_priv *priv,\n\t\t\t    struct mlx5_flow_attr *attr);\n\n\tint (*post_parse)(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\t  struct mlx5e_priv *priv,\n\t\t\t  struct mlx5_flow_attr *attr);\n\n\tbool (*is_multi_table_act)(struct mlx5e_priv *priv,\n\t\t\t\t   const struct flow_action_entry *act,\n\t\t\t\t   struct mlx5_flow_attr *attr);\n\n\tbool (*is_missable)(const struct flow_action_entry *act);\n\n\tint (*offload_action)(struct mlx5e_priv *priv,\n\t\t\t      struct flow_offload_action *fl_act,\n\t\t\t      struct flow_action_entry *act);\n\n\tint (*destroy_action)(struct mlx5e_priv *priv,\n\t\t\t      struct flow_offload_action *fl_act);\n\n\tint (*stats_action)(struct mlx5e_priv *priv,\n\t\t\t    struct flow_offload_action *fl_act);\n\n\tbool (*get_branch_ctrl)(const struct flow_action_entry *act,\n\t\t\t\tstruct mlx5e_tc_act_branch_ctrl *cond_true,\n\t\t\t\tstruct mlx5e_tc_act_branch_ctrl *cond_false);\n\n\tbool is_terminating_action;\n};\n\nstruct mlx5e_tc_flow_action {\n\tunsigned int num_entries;\n\tstruct flow_action_entry **entries;\n};\n\nextern struct mlx5e_tc_act mlx5e_tc_act_drop;\nextern struct mlx5e_tc_act mlx5e_tc_act_trap;\nextern struct mlx5e_tc_act mlx5e_tc_act_accept;\nextern struct mlx5e_tc_act mlx5e_tc_act_mark;\nextern struct mlx5e_tc_act mlx5e_tc_act_goto;\nextern struct mlx5e_tc_act mlx5e_tc_act_tun_encap;\nextern struct mlx5e_tc_act mlx5e_tc_act_tun_decap;\nextern struct mlx5e_tc_act mlx5e_tc_act_csum;\nextern struct mlx5e_tc_act mlx5e_tc_act_pedit;\nextern struct mlx5e_tc_act mlx5e_tc_act_vlan;\nextern struct mlx5e_tc_act mlx5e_tc_act_vlan_mangle;\nextern struct mlx5e_tc_act mlx5e_tc_act_mpls_push;\nextern struct mlx5e_tc_act mlx5e_tc_act_mpls_pop;\nextern struct mlx5e_tc_act mlx5e_tc_act_mirred;\nextern struct mlx5e_tc_act mlx5e_tc_act_redirect;\nextern struct mlx5e_tc_act mlx5e_tc_act_mirred_nic;\nextern struct mlx5e_tc_act mlx5e_tc_act_ct;\nextern struct mlx5e_tc_act mlx5e_tc_act_sample;\nextern struct mlx5e_tc_act mlx5e_tc_act_ptype;\nextern struct mlx5e_tc_act mlx5e_tc_act_redirect_ingress;\nextern struct mlx5e_tc_act mlx5e_tc_act_police;\n\nstruct mlx5e_tc_act *\nmlx5e_tc_act_get(enum flow_action_id act_id,\n\t\t enum mlx5_flow_namespace_type ns_type);\n\nvoid\nmlx5e_tc_act_init_parse_state(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\t      struct mlx5e_tc_flow *flow,\n\t\t\t      struct flow_action *flow_action,\n\t\t\t      struct netlink_ext_ack *extack);\n\nint\nmlx5e_tc_act_post_parse(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\tstruct flow_action *flow_action, int from, int to,\n\t\t\tstruct mlx5_flow_attr *attr,\n\t\t\tenum mlx5_flow_namespace_type ns_type);\n\nint\nmlx5e_tc_act_set_next_post_act(struct mlx5e_tc_flow *flow,\n\t\t\t       struct mlx5_flow_attr *attr,\n\t\t\t       struct mlx5_flow_attr *next_attr);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}