{
  "module_name": "mod_hdr.h",
  "hash_id": "171c9cbdb889d83cc6b71877504d7a771a933bd3296e63b78029704bc803f81a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.h",
  "human_readable_source": " \n \n\n#ifndef __MLX5E_EN_MOD_HDR_H__\n#define __MLX5E_EN_MOD_HDR_H__\n\n#include <linux/hashtable.h>\n#include <linux/mlx5/fs.h>\n\n#define MLX5_MH_ACT_SZ MLX5_UN_SZ_BYTES(set_add_copy_action_in_auto)\n\nstruct mlx5e_mod_hdr_handle;\n\nstruct mlx5e_tc_mod_hdr_acts {\n\tint num_actions;\n\tint max_actions;\n\tbool is_static;\n\tvoid *actions;\n};\n\n#define DECLARE_MOD_HDR_ACTS_ACTIONS(name, len) \\\n\tu8 name[len][MLX5_MH_ACT_SZ] = {}\n\n#define DECLARE_MOD_HDR_ACTS(name, acts_arr) \\\n\tstruct mlx5e_tc_mod_hdr_acts name = { \\\n\t\t.max_actions = ARRAY_SIZE(acts_arr), \\\n\t\t.is_static = true, \\\n\t\t.actions = acts_arr, \\\n\t}\n\nchar *mlx5e_mod_hdr_alloc(struct mlx5_core_dev *mdev, int namespace,\n\t\t\t  struct mlx5e_tc_mod_hdr_acts *mod_hdr_acts);\nvoid mlx5e_mod_hdr_dealloc(struct mlx5e_tc_mod_hdr_acts *mod_hdr_acts);\nchar *mlx5e_mod_hdr_get_item(struct mlx5e_tc_mod_hdr_acts *mod_hdr_acts, int pos);\n\nstruct mlx5e_mod_hdr_handle *\nmlx5e_mod_hdr_attach(struct mlx5_core_dev *mdev,\n\t\t     struct mod_hdr_tbl *tbl,\n\t\t     enum mlx5_flow_namespace_type namespace,\n\t\t     struct mlx5e_tc_mod_hdr_acts *mod_hdr_acts);\nvoid mlx5e_mod_hdr_detach(struct mlx5_core_dev *mdev,\n\t\t\t  struct mod_hdr_tbl *tbl,\n\t\t\t  struct mlx5e_mod_hdr_handle *mh);\nstruct mlx5_modify_hdr *mlx5e_mod_hdr_get(struct mlx5e_mod_hdr_handle *mh);\n\nvoid mlx5e_mod_hdr_tbl_init(struct mod_hdr_tbl *tbl);\nvoid mlx5e_mod_hdr_tbl_destroy(struct mod_hdr_tbl *tbl);\n\nstatic inline int mlx5e_mod_hdr_max_actions(struct mlx5_core_dev *mdev, int namespace)\n{\n\tif (namespace == MLX5_FLOW_NAMESPACE_FDB)  \n\t\treturn MLX5_CAP_ESW_FLOWTABLE_FDB(mdev, max_modify_header_actions);\n\telse  \n\t\treturn MLX5_CAP_FLOWTABLE_NIC_RX(mdev, max_modify_header_actions);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}