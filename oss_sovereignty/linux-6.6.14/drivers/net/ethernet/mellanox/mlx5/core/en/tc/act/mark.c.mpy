{
  "module_name": "mark.c",
  "hash_id": "5640983421392eea1e189c126198fc216fb8fde27a64f44c54ff0ea8926c787d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/mark.c",
  "human_readable_source": "\n\n\n#include \"act.h\"\n#include \"en_tc.h\"\n\nstatic bool\ntc_act_can_offload_mark(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t\tconst struct flow_action_entry *act,\n\t\t\tint act_index,\n\t\t\tstruct mlx5_flow_attr *attr)\n{\n\tif (act->mark & ~MLX5E_TC_FLOW_ID_MASK) {\n\t\tNL_SET_ERR_MSG_MOD(parse_state->extack, \"Bad flow mark, only 16 bit supported\");\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nstatic int\ntc_act_parse_mark(struct mlx5e_tc_act_parse_state *parse_state,\n\t\t  const struct flow_action_entry *act,\n\t\t  struct mlx5e_priv *priv,\n\t\t  struct mlx5_flow_attr *attr)\n{\n\tattr->nic_attr->flow_tag = act->mark;\n\tattr->action |= MLX5_FLOW_CONTEXT_ACTION_FWD_DEST;\n\n\treturn 0;\n}\n\nstruct mlx5e_tc_act mlx5e_tc_act_mark = {\n\t.can_offload = tc_act_can_offload_mark,\n\t.parse_action = tc_act_parse_mark,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}