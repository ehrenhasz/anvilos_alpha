{
  "module_name": "health.h",
  "hash_id": "7108f8360ce6a692c73d311f5c625dee082fcd54745ae1ab6a73c1e5c7da3087",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/en/health.h",
  "human_readable_source": " \n \n\n#ifndef __MLX5E_EN_HEALTH_H\n#define __MLX5E_EN_HEALTH_H\n\n#include \"en.h\"\n#include \"diag/rsc_dump.h\"\n\nstatic inline bool cqe_syndrome_needs_recover(u8 syndrome)\n{\n\treturn syndrome == MLX5_CQE_SYNDROME_LOCAL_QP_OP_ERR ||\n\t       syndrome == MLX5_CQE_SYNDROME_LOCAL_PROT_ERR ||\n\t       syndrome == MLX5_CQE_SYNDROME_WR_FLUSH_ERR;\n}\n\nvoid mlx5e_reporter_tx_create(struct mlx5e_priv *priv);\nvoid mlx5e_reporter_tx_destroy(struct mlx5e_priv *priv);\nvoid mlx5e_reporter_tx_err_cqe(struct mlx5e_txqsq *sq);\nint mlx5e_reporter_tx_timeout(struct mlx5e_txqsq *sq);\nvoid mlx5e_reporter_tx_ptpsq_unhealthy(struct mlx5e_ptpsq *ptpsq);\n\nint mlx5e_health_cq_diag_fmsg(struct mlx5e_cq *cq, struct devlink_fmsg *fmsg);\nint mlx5e_health_cq_common_diag_fmsg(struct mlx5e_cq *cq, struct devlink_fmsg *fmsg);\nint mlx5e_health_eq_diag_fmsg(struct mlx5_eq_comp *eq, struct devlink_fmsg *fmsg);\nint mlx5e_health_fmsg_named_obj_nest_start(struct devlink_fmsg *fmsg, char *name);\nint mlx5e_health_fmsg_named_obj_nest_end(struct devlink_fmsg *fmsg);\n\nvoid mlx5e_reporter_rx_create(struct mlx5e_priv *priv);\nvoid mlx5e_reporter_rx_destroy(struct mlx5e_priv *priv);\nvoid mlx5e_reporter_icosq_cqe_err(struct mlx5e_icosq *icosq);\nvoid mlx5e_reporter_rq_cqe_err(struct mlx5e_rq *rq);\nvoid mlx5e_reporter_rx_timeout(struct mlx5e_rq *rq);\nvoid mlx5e_reporter_icosq_suspend_recovery(struct mlx5e_channel *c);\nvoid mlx5e_reporter_icosq_resume_recovery(struct mlx5e_channel *c);\n\n#define MLX5E_REPORTER_PER_Q_MAX_LEN 256\n\nstruct mlx5e_err_ctx {\n\tint (*recover)(void *ctx);\n\tint (*dump)(struct mlx5e_priv *priv, struct devlink_fmsg *fmsg, void *ctx);\n\tvoid *ctx;\n};\n\nint mlx5e_health_sq_to_ready(struct mlx5_core_dev *mdev, struct net_device *dev, u32 sqn);\nint mlx5e_health_channel_eq_recover(struct net_device *dev, struct mlx5_eq_comp *eq,\n\t\t\t\t    struct mlx5e_ch_stats *stats);\nint mlx5e_health_recover_channels(struct mlx5e_priv *priv);\nint mlx5e_health_report(struct mlx5e_priv *priv,\n\t\t\tstruct devlink_health_reporter *reporter, char *err_str,\n\t\t\tstruct mlx5e_err_ctx *err_ctx);\nvoid mlx5e_health_create_reporters(struct mlx5e_priv *priv);\nvoid mlx5e_health_destroy_reporters(struct mlx5e_priv *priv);\nvoid mlx5e_health_channels_update(struct mlx5e_priv *priv);\nint mlx5e_health_rsc_fmsg_dump(struct mlx5e_priv *priv, struct mlx5_rsc_key *key,\n\t\t\t       struct devlink_fmsg *fmsg);\nint mlx5e_health_queue_dump(struct mlx5e_priv *priv, struct devlink_fmsg *fmsg,\n\t\t\t    int queue_idx, char *lbl);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}