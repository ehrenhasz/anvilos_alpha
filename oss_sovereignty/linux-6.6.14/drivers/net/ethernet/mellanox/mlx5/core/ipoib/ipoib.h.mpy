{
  "module_name": "ipoib.h",
  "hash_id": "5d14418fda6b4a916fb6f64810b2274f61e706ffcc9afd783d2d7c5a0921ba03",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.h",
  "human_readable_source": " \n\n#ifndef __MLX5E_IPOB_H__\n#define __MLX5E_IPOB_H__\n\n#ifdef CONFIG_MLX5_CORE_IPOIB\n\n#include <linux/mlx5/fs.h>\n#include \"en.h\"\n\n#define MLX5I_MAX_NUM_TC 1\n\nextern const struct ethtool_ops mlx5i_ethtool_ops;\nextern const struct ethtool_ops mlx5i_pkey_ethtool_ops;\nextern const struct mlx5e_rx_handlers mlx5i_rx_handlers;\n\n#define MLX5_IB_GRH_BYTES       40\n#define MLX5_IPOIB_ENCAP_LEN    4\n#define MLX5_IPOIB_PSEUDO_LEN   20\n#define MLX5_IPOIB_HARD_LEN     (MLX5_IPOIB_PSEUDO_LEN + MLX5_IPOIB_ENCAP_LEN)\n\n \nstruct mlx5i_priv {\n\tstruct rdma_netdev rn;  \n\tu32 qpn;\n\tbool   sub_interface;\n\tu32    num_sub_interfaces;\n\tu32    qkey;\n\tu16    pkey_index;\n\tstruct mlx5i_pkey_qpn_ht *qpn_htbl;\n\tstruct net_device *parent_dev;\n\tchar  *mlx5e_priv[];\n};\n\nint mlx5i_create_tis(struct mlx5_core_dev *mdev, u32 underlay_qpn, u32 *tisn);\n\n \nint mlx5i_create_underlay_qp(struct mlx5e_priv *priv);\nvoid mlx5i_destroy_underlay_qp(struct mlx5_core_dev *mdev, u32 qpn);\n\n \nint mlx5i_init_underlay_qp(struct mlx5e_priv *priv);\nvoid mlx5i_uninit_underlay_qp(struct mlx5e_priv *priv);\n\n \nint mlx5i_pkey_qpn_ht_init(struct net_device *netdev);\nvoid mlx5i_pkey_qpn_ht_cleanup(struct net_device *netdev);\n\n \nint mlx5i_pkey_add_qpn(struct net_device *netdev, u32 qpn);\nint mlx5i_pkey_del_qpn(struct net_device *netdev, u32 qpn);\n\n \nstruct net_device *mlx5i_pkey_get_netdev(struct net_device *netdev, u32 qpn);\n\n \nint mlx5i_dev_init(struct net_device *dev);\nvoid mlx5i_dev_cleanup(struct net_device *dev);\nint mlx5i_ioctl(struct net_device *dev, struct ifreq *ifr, int cmd);\n\n \nint mlx5i_init(struct mlx5_core_dev *mdev, struct net_device *netdev);\nvoid mlx5i_cleanup(struct mlx5e_priv *priv);\n\nint mlx5i_update_nic_rx(struct mlx5e_priv *priv);\n\n \nconst struct mlx5e_profile *mlx5i_pkey_get_profile(void);\n\n \n#define mlx5i_epriv(netdev) ((void *)(((struct mlx5i_priv *)netdev_priv(netdev))->mlx5e_priv))\n\nstruct mlx5_wqe_eth_pad {\n\tu8 rsvd0[16];\n};\n\nstruct mlx5i_tx_wqe {\n\tstruct mlx5_wqe_ctrl_seg     ctrl;\n\tstruct mlx5_wqe_datagram_seg datagram;\n\tstruct mlx5_wqe_eth_pad      pad;\n\tstruct mlx5_wqe_eth_seg      eth;\n\tstruct mlx5_wqe_data_seg     data[];\n};\n\n#define MLX5I_SQ_FETCH_WQE(sq, pi) \\\n\t((struct mlx5i_tx_wqe *)mlx5e_fetch_wqe(&(sq)->wq, pi, sizeof(struct mlx5i_tx_wqe)))\n\nvoid mlx5i_sq_xmit(struct mlx5e_txqsq *sq, struct sk_buff *skb,\n\t\t   struct mlx5_av *av, u32 dqpn, u32 dqkey, bool xmit_more);\nvoid mlx5i_get_stats(struct net_device *dev, struct rtnl_link_stats64 *stats);\n\n \nstruct net_device *mlx5i_parent_get(struct net_device *netdev);\nvoid mlx5i_parent_put(struct net_device *netdev);\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}