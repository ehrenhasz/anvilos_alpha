{
  "module_name": "spectrum_mr.h",
  "hash_id": "cbb7b0fd1c0e4c8b61581f9737e8c46feb6644351a5ed1c4216ed80a9c38ad9d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/mellanox/mlxsw/spectrum_mr.h",
  "human_readable_source": " \n \n\n#ifndef _MLXSW_SPECTRUM_MCROUTER_H\n#define _MLXSW_SPECTRUM_MCROUTER_H\n\n#include <linux/mroute.h>\n#include <linux/mroute6.h>\n#include \"spectrum_router.h\"\n#include \"spectrum.h\"\n\nenum mlxsw_sp_mr_route_action {\n\tMLXSW_SP_MR_ROUTE_ACTION_FORWARD,\n\tMLXSW_SP_MR_ROUTE_ACTION_TRAP,\n\tMLXSW_SP_MR_ROUTE_ACTION_TRAP_AND_FORWARD,\n};\n\nstruct mlxsw_sp_mr_route_key {\n\tint vrid;\n\tenum mlxsw_sp_l3proto proto;\n\tunion mlxsw_sp_l3addr group;\n\tunion mlxsw_sp_l3addr group_mask;\n\tunion mlxsw_sp_l3addr source;\n\tunion mlxsw_sp_l3addr source_mask;\n};\n\nstruct mlxsw_sp_mr_route_info {\n\tenum mlxsw_sp_mr_route_action route_action;\n\tu16 irif_index;\n\tu16 *erif_indices;\n\tsize_t erif_num;\n\tu16 min_mtu;\n};\n\nstruct mlxsw_sp_mr_route_params {\n\tstruct mlxsw_sp_mr_route_key key;\n\tstruct mlxsw_sp_mr_route_info value;\n\tenum mlxsw_sp_mr_route_prio prio;\n};\n\nstruct mlxsw_sp_mr_ops {\n\tint priv_size;\n\tint route_priv_size;\n\tint (*init)(struct mlxsw_sp *mlxsw_sp, void *priv);\n\tint (*route_create)(struct mlxsw_sp *mlxsw_sp, void *priv,\n\t\t\t    void *route_priv,\n\t\t\t    struct mlxsw_sp_mr_route_params *route_params);\n\tint (*route_update)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t    struct mlxsw_sp_mr_route_info *route_info);\n\tint (*route_stats)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t   u64 *packets, u64 *bytes);\n\tint (*route_action_update)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t\t   enum mlxsw_sp_mr_route_action route_action);\n\tint (*route_min_mtu_update)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t\t    u16 min_mtu);\n\tint (*route_irif_update)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t\t u16 irif_index);\n\tint (*route_erif_add)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t      u16 erif_index);\n\tint (*route_erif_del)(struct mlxsw_sp *mlxsw_sp, void *route_priv,\n\t\t\t      u16 erif_index);\n\tvoid (*route_destroy)(struct mlxsw_sp *mlxsw_sp, void *priv,\n\t\t\t      void *route_priv);\n\tvoid (*fini)(struct mlxsw_sp *mlxsw_sp, void *priv);\n};\n\nstruct mlxsw_sp_mr;\nstruct mlxsw_sp_mr_table;\n\nint mlxsw_sp_mr_init(struct mlxsw_sp *mlxsw_sp,\n\t\t     const struct mlxsw_sp_mr_ops *mr_ops);\nvoid mlxsw_sp_mr_fini(struct mlxsw_sp *mlxsw_sp);\nint mlxsw_sp_mr_route_add(struct mlxsw_sp_mr_table *mr_table,\n\t\t\t  struct mr_mfc *mfc, bool replace);\nvoid mlxsw_sp_mr_route_del(struct mlxsw_sp_mr_table *mr_table,\n\t\t\t   struct mr_mfc *mfc);\nint mlxsw_sp_mr_vif_add(struct mlxsw_sp_mr_table *mr_table,\n\t\t\tstruct net_device *dev, vifi_t vif_index,\n\t\t\tunsigned long vif_flags,\n\t\t\tconst struct mlxsw_sp_rif *rif);\nvoid mlxsw_sp_mr_vif_del(struct mlxsw_sp_mr_table *mr_table, vifi_t vif_index);\nint mlxsw_sp_mr_rif_add(struct mlxsw_sp_mr_table *mr_table,\n\t\t\tconst struct mlxsw_sp_rif *rif);\nvoid mlxsw_sp_mr_rif_del(struct mlxsw_sp_mr_table *mr_table,\n\t\t\t const struct mlxsw_sp_rif *rif);\nvoid mlxsw_sp_mr_rif_mtu_update(struct mlxsw_sp_mr_table *mr_table,\n\t\t\t\tconst struct mlxsw_sp_rif *rif, int mtu);\nstruct mlxsw_sp_mr_table *mlxsw_sp_mr_table_create(struct mlxsw_sp *mlxsw_sp,\n\t\t\t\t\t\t   u32 tb_id,\n\t\t\t\t\t\t   enum mlxsw_sp_l3proto proto);\nvoid mlxsw_sp_mr_table_destroy(struct mlxsw_sp_mr_table *mr_table);\nvoid mlxsw_sp_mr_table_flush(struct mlxsw_sp_mr_table *mr_table);\nbool mlxsw_sp_mr_table_empty(const struct mlxsw_sp_mr_table *mr_table);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}