{
  "module_name": "mvpp2.h",
  "hash_id": "3702cb430c33551d357069247318582bf83fbd3d1dab74fcb900f2368187410b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/marvell/mvpp2/mvpp2.h",
  "human_readable_source": " \n \n#ifndef _MVPP2_H_\n#define _MVPP2_H_\n\n#include <linux/interrupt.h>\n#include <linux/kernel.h>\n#include <linux/netdevice.h>\n#include <linux/net_tstamp.h>\n#include <linux/phy.h>\n#include <linux/phylink.h>\n#include <net/flow_offload.h>\n#include <net/page_pool/types.h>\n#include <linux/bpf.h>\n#include <net/xdp.h>\n\n \n#define MVPP2_SKB_HEADROOM\tmin(max(XDP_PACKET_HEADROOM, NET_SKB_PAD), 224)\n\n#define MVPP2_XDP_PASS\t\t0\n#define MVPP2_XDP_DROPPED\tBIT(0)\n#define MVPP2_XDP_TX\t\tBIT(1)\n#define MVPP2_XDP_REDIR\t\tBIT(2)\n\n \n#define MVPP2_RX_DATA_FIFO_SIZE_REG(port)\t(0x00 + 4 * (port))\n#define MVPP2_RX_ATTR_FIFO_SIZE_REG(port)\t(0x20 + 4 * (port))\n#define MVPP2_RX_MIN_PKT_SIZE_REG\t\t0x60\n#define MVPP2_RX_FIFO_INIT_REG\t\t\t0x64\n#define MVPP22_TX_FIFO_THRESH_REG(port)\t\t(0x8840 + 4 * (port))\n#define MVPP22_TX_FIFO_SIZE_REG(port)\t\t(0x8860 + 4 * (port))\n\n \n#define MVPP2_RX_CTRL_REG(port)\t\t\t(0x140 + 4 * (port))\n#define     MVPP2_RX_LOW_LATENCY_PKT_SIZE(s)\t(((s) & 0xfff) << 16)\n#define     MVPP2_RX_USE_PSEUDO_FOR_CSUM_MASK\tBIT(31)\n#define MVPP2_POOL_BUF_SIZE_REG(pool)\t\t(0x180 + 4 * (pool))\n#define     MVPP2_POOL_BUF_SIZE_OFFSET\t\t5\n#define MVPP2_RXQ_CONFIG_REG(rxq)\t\t(0x800 + 4 * (rxq))\n#define     MVPP2_SNOOP_PKT_SIZE_MASK\t\t0x1ff\n#define     MVPP2_SNOOP_BUF_HDR_MASK\t\tBIT(9)\n#define     MVPP2_RXQ_POOL_SHORT_OFFS\t\t20\n#define     MVPP21_RXQ_POOL_SHORT_MASK\t\t0x700000\n#define     MVPP22_RXQ_POOL_SHORT_MASK\t\t0xf00000\n#define     MVPP2_RXQ_POOL_LONG_OFFS\t\t24\n#define     MVPP21_RXQ_POOL_LONG_MASK\t\t0x7000000\n#define     MVPP22_RXQ_POOL_LONG_MASK\t\t0xf000000\n#define     MVPP2_RXQ_PACKET_OFFSET_OFFS\t28\n#define     MVPP2_RXQ_PACKET_OFFSET_MASK\t0x70000000\n#define     MVPP2_RXQ_DISABLE_MASK\t\tBIT(31)\n\n \n#define MVPP2_MH_REG(port)\t\t\t(0x5040 + 4 * (port))\n#define MVPP2_DSA_EXTENDED\t\t\tBIT(5)\n#define MVPP2_VER_ID_REG\t\t\t0x50b0\n#define MVPP2_VER_PP22\t\t\t\t0x10\n#define MVPP2_VER_PP23\t\t\t\t0x11\n\n \n#define MVPP2_PRS_INIT_LOOKUP_REG\t\t0x1000\n#define     MVPP2_PRS_PORT_LU_MAX\t\t0xf\n#define     MVPP2_PRS_PORT_LU_MASK(port)\t(0xff << ((port) * 4))\n#define     MVPP2_PRS_PORT_LU_VAL(port, val)\t((val) << ((port) * 4))\n#define MVPP2_PRS_INIT_OFFS_REG(port)\t\t(0x1004 + ((port) & 4))\n#define     MVPP2_PRS_INIT_OFF_MASK(port)\t(0x3f << (((port) % 4) * 8))\n#define     MVPP2_PRS_INIT_OFF_VAL(port, val)\t((val) << (((port) % 4) * 8))\n#define MVPP2_PRS_MAX_LOOP_REG(port)\t\t(0x100c + ((port) & 4))\n#define     MVPP2_PRS_MAX_LOOP_MASK(port)\t(0xff << (((port) % 4) * 8))\n#define     MVPP2_PRS_MAX_LOOP_VAL(port, val)\t((val) << (((port) % 4) * 8))\n#define MVPP2_PRS_TCAM_IDX_REG\t\t\t0x1100\n#define MVPP2_PRS_TCAM_DATA_REG(idx)\t\t(0x1104 + (idx) * 4)\n#define     MVPP2_PRS_TCAM_INV_MASK\t\tBIT(31)\n#define MVPP2_PRS_SRAM_IDX_REG\t\t\t0x1200\n#define MVPP2_PRS_SRAM_DATA_REG(idx)\t\t(0x1204 + (idx) * 4)\n#define MVPP2_PRS_TCAM_CTRL_REG\t\t\t0x1230\n#define     MVPP2_PRS_TCAM_EN_MASK\t\tBIT(0)\n#define MVPP2_PRS_TCAM_HIT_IDX_REG\t\t0x1240\n#define MVPP2_PRS_TCAM_HIT_CNT_REG\t\t0x1244\n#define     MVPP2_PRS_TCAM_HIT_CNT_MASK\t\tGENMASK(15, 0)\n\n \n#define MVPP22_RSS_INDEX\t\t\t0x1500\n#define     MVPP22_RSS_INDEX_TABLE_ENTRY(idx)\t(idx)\n#define     MVPP22_RSS_INDEX_TABLE(idx)\t\t((idx) << 8)\n#define     MVPP22_RSS_INDEX_QUEUE(idx)\t\t((idx) << 16)\n#define MVPP22_RXQ2RSS_TABLE\t\t\t0x1504\n#define     MVPP22_RSS_TABLE_POINTER(p)\t\t(p)\n#define MVPP22_RSS_TABLE_ENTRY\t\t\t0x1508\n#define MVPP22_RSS_WIDTH\t\t\t0x150c\n\n \n#define MVPP2_CLS_MODE_REG\t\t\t0x1800\n#define     MVPP2_CLS_MODE_ACTIVE_MASK\t\tBIT(0)\n#define MVPP2_CLS_PORT_WAY_REG\t\t\t0x1810\n#define     MVPP2_CLS_PORT_WAY_MASK(port)\t(1 << (port))\n#define MVPP2_CLS_LKP_INDEX_REG\t\t\t0x1814\n#define     MVPP2_CLS_LKP_INDEX_WAY_OFFS\t6\n#define MVPP2_CLS_LKP_TBL_REG\t\t\t0x1818\n#define     MVPP2_CLS_LKP_TBL_RXQ_MASK\t\t0xff\n#define     MVPP2_CLS_LKP_FLOW_PTR(flow)\t((flow) << 16)\n#define     MVPP2_CLS_LKP_TBL_LOOKUP_EN_MASK\tBIT(25)\n#define MVPP2_CLS_FLOW_INDEX_REG\t\t0x1820\n#define MVPP2_CLS_FLOW_TBL0_REG\t\t\t0x1824\n#define     MVPP2_CLS_FLOW_TBL0_LAST\t\tBIT(0)\n#define     MVPP2_CLS_FLOW_TBL0_ENG_MASK\t0x7\n#define     MVPP2_CLS_FLOW_TBL0_OFFS\t\t1\n#define     MVPP2_CLS_FLOW_TBL0_ENG(x)\t\t((x) << 1)\n#define     MVPP2_CLS_FLOW_TBL0_PORT_ID_MASK\t0xff\n#define     MVPP2_CLS_FLOW_TBL0_PORT_ID(port)\t((port) << 4)\n#define     MVPP2_CLS_FLOW_TBL0_PORT_ID_SEL\tBIT(23)\n#define MVPP2_CLS_FLOW_TBL1_REG\t\t\t0x1828\n#define     MVPP2_CLS_FLOW_TBL1_N_FIELDS_MASK\t0x7\n#define     MVPP2_CLS_FLOW_TBL1_N_FIELDS(x)\t(x)\n#define     MVPP2_CLS_FLOW_TBL1_LU_TYPE(lu)\t(((lu) & 0x3f) << 3)\n#define     MVPP2_CLS_FLOW_TBL1_PRIO_MASK\t0x3f\n#define     MVPP2_CLS_FLOW_TBL1_PRIO(x)\t\t((x) << 9)\n#define     MVPP2_CLS_FLOW_TBL1_SEQ_MASK\t0x7\n#define     MVPP2_CLS_FLOW_TBL1_SEQ(x)\t\t((x) << 15)\n#define MVPP2_CLS_FLOW_TBL2_REG\t\t\t0x182c\n#define     MVPP2_CLS_FLOW_TBL2_FLD_MASK\t0x3f\n#define     MVPP2_CLS_FLOW_TBL2_FLD_OFFS(n)\t((n) * 6)\n#define     MVPP2_CLS_FLOW_TBL2_FLD(n, x)\t((x) << ((n) * 6))\n#define MVPP2_CLS_OVERSIZE_RXQ_LOW_REG(port)\t(0x1980 + ((port) * 4))\n#define     MVPP2_CLS_OVERSIZE_RXQ_LOW_BITS\t3\n#define     MVPP2_CLS_OVERSIZE_RXQ_LOW_MASK\t0x7\n#define MVPP2_CLS_SWFWD_P2HQ_REG(port)\t\t(0x19b0 + ((port) * 4))\n#define MVPP2_CLS_SWFWD_PCTRL_REG\t\t0x19d0\n#define     MVPP2_CLS_SWFWD_PCTRL_MASK(port)\t(1 << (port))\n\n \n#define MVPP22_CLS_C2_TCAM_IDX\t\t\t0x1b00\n#define MVPP22_CLS_C2_TCAM_DATA0\t\t0x1b10\n#define MVPP22_CLS_C2_TCAM_DATA1\t\t0x1b14\n#define MVPP22_CLS_C2_TCAM_DATA2\t\t0x1b18\n#define MVPP22_CLS_C2_TCAM_DATA3\t\t0x1b1c\n#define MVPP22_CLS_C2_TCAM_DATA4\t\t0x1b20\n#define     MVPP22_CLS_C2_LU_TYPE(lu)\t\t((lu) & 0x3f)\n#define     MVPP22_CLS_C2_PORT_ID(port)\t\t((port) << 8)\n#define     MVPP22_CLS_C2_PORT_MASK\t\t(0xff << 8)\n#define MVPP22_CLS_C2_TCAM_INV\t\t\t0x1b24\n#define     MVPP22_CLS_C2_TCAM_INV_BIT\t\tBIT(31)\n#define MVPP22_CLS_C2_HIT_CTR\t\t\t0x1b50\n#define MVPP22_CLS_C2_ACT\t\t\t0x1b60\n#define     MVPP22_CLS_C2_ACT_RSS_EN(act)\t(((act) & 0x3) << 19)\n#define     MVPP22_CLS_C2_ACT_FWD(act)\t\t(((act) & 0x7) << 13)\n#define     MVPP22_CLS_C2_ACT_QHIGH(act)\t(((act) & 0x3) << 11)\n#define     MVPP22_CLS_C2_ACT_QLOW(act)\t\t(((act) & 0x3) << 9)\n#define     MVPP22_CLS_C2_ACT_COLOR(act)\t((act) & 0x7)\n#define MVPP22_CLS_C2_ATTR0\t\t\t0x1b64\n#define     MVPP22_CLS_C2_ATTR0_QHIGH(qh)\t(((qh) & 0x1f) << 24)\n#define     MVPP22_CLS_C2_ATTR0_QHIGH_MASK\t0x1f\n#define     MVPP22_CLS_C2_ATTR0_QHIGH_OFFS\t24\n#define     MVPP22_CLS_C2_ATTR0_QLOW(ql)\t(((ql) & 0x7) << 21)\n#define     MVPP22_CLS_C2_ATTR0_QLOW_MASK\t0x7\n#define     MVPP22_CLS_C2_ATTR0_QLOW_OFFS\t21\n#define MVPP22_CLS_C2_ATTR1\t\t\t0x1b68\n#define MVPP22_CLS_C2_ATTR2\t\t\t0x1b6c\n#define     MVPP22_CLS_C2_ATTR2_RSS_EN\t\tBIT(30)\n#define MVPP22_CLS_C2_ATTR3\t\t\t0x1b70\n#define MVPP22_CLS_C2_TCAM_CTRL\t\t\t0x1b90\n#define     MVPP22_CLS_C2_TCAM_BYPASS_FIFO\tBIT(0)\n\n \n#define MVPP2_RXQ_NUM_REG\t\t\t0x2040\n#define MVPP2_RXQ_DESC_ADDR_REG\t\t\t0x2044\n#define     MVPP22_DESC_ADDR_OFFS\t\t8\n#define MVPP2_RXQ_DESC_SIZE_REG\t\t\t0x2048\n#define     MVPP2_RXQ_DESC_SIZE_MASK\t\t0x3ff0\n#define MVPP2_RXQ_STATUS_UPDATE_REG(rxq)\t(0x3000 + 4 * (rxq))\n#define     MVPP2_RXQ_NUM_PROCESSED_OFFSET\t0\n#define     MVPP2_RXQ_NUM_NEW_OFFSET\t\t16\n#define MVPP2_RXQ_STATUS_REG(rxq)\t\t(0x3400 + 4 * (rxq))\n#define     MVPP2_RXQ_OCCUPIED_MASK\t\t0x3fff\n#define     MVPP2_RXQ_NON_OCCUPIED_OFFSET\t16\n#define     MVPP2_RXQ_NON_OCCUPIED_MASK\t\t0x3fff0000\n#define MVPP2_RXQ_THRESH_REG\t\t\t0x204c\n#define     MVPP2_OCCUPIED_THRESH_OFFSET\t0\n#define     MVPP2_OCCUPIED_THRESH_MASK\t\t0x3fff\n#define MVPP2_RXQ_INDEX_REG\t\t\t0x2050\n#define MVPP2_TXQ_NUM_REG\t\t\t0x2080\n#define MVPP2_TXQ_DESC_ADDR_REG\t\t\t0x2084\n#define MVPP2_TXQ_DESC_SIZE_REG\t\t\t0x2088\n#define     MVPP2_TXQ_DESC_SIZE_MASK\t\t0x3ff0\n#define MVPP2_TXQ_THRESH_REG\t\t\t0x2094\n#define\t    MVPP2_TXQ_THRESH_OFFSET\t\t16\n#define\t    MVPP2_TXQ_THRESH_MASK\t\t0x3fff\n#define MVPP2_AGGR_TXQ_UPDATE_REG\t\t0x2090\n#define MVPP2_TXQ_INDEX_REG\t\t\t0x2098\n#define MVPP2_TXQ_PREF_BUF_REG\t\t\t0x209c\n#define     MVPP2_PREF_BUF_PTR(desc)\t\t((desc) & 0xfff)\n#define     MVPP2_PREF_BUF_SIZE_4\t\t(BIT(12) | BIT(13))\n#define     MVPP2_PREF_BUF_SIZE_16\t\t(BIT(12) | BIT(14))\n#define     MVPP2_PREF_BUF_THRESH(val)\t\t((val) << 17)\n#define     MVPP2_TXQ_DRAIN_EN_MASK\t\tBIT(31)\n#define MVPP2_TXQ_PENDING_REG\t\t\t0x20a0\n#define     MVPP2_TXQ_PENDING_MASK\t\t0x3fff\n#define MVPP2_TXQ_INT_STATUS_REG\t\t0x20a4\n#define MVPP2_TXQ_SENT_REG(txq)\t\t\t(0x3c00 + 4 * (txq))\n#define     MVPP2_TRANSMITTED_COUNT_OFFSET\t16\n#define     MVPP2_TRANSMITTED_COUNT_MASK\t0x3fff0000\n#define MVPP2_TXQ_RSVD_REQ_REG\t\t\t0x20b0\n#define     MVPP2_TXQ_RSVD_REQ_Q_OFFSET\t\t16\n#define MVPP2_TXQ_RSVD_RSLT_REG\t\t\t0x20b4\n#define     MVPP2_TXQ_RSVD_RSLT_MASK\t\t0x3fff\n#define MVPP2_TXQ_RSVD_CLR_REG\t\t\t0x20b8\n#define     MVPP2_TXQ_RSVD_CLR_OFFSET\t\t16\n#define MVPP2_AGGR_TXQ_DESC_ADDR_REG(cpu)\t(0x2100 + 4 * (cpu))\n#define     MVPP22_AGGR_TXQ_DESC_ADDR_OFFS\t8\n#define MVPP2_AGGR_TXQ_DESC_SIZE_REG(cpu)\t(0x2140 + 4 * (cpu))\n#define     MVPP2_AGGR_TXQ_DESC_SIZE_MASK\t0x3ff0\n#define MVPP2_AGGR_TXQ_STATUS_REG(cpu)\t\t(0x2180 + 4 * (cpu))\n#define     MVPP2_AGGR_TXQ_PENDING_MASK\t\t0x3fff\n#define MVPP2_AGGR_TXQ_INDEX_REG(cpu)\t\t(0x21c0 + 4 * (cpu))\n\n \n#define MVPP2_WIN_BASE(w)\t\t\t(0x4000 + ((w) << 2))\n#define MVPP2_WIN_SIZE(w)\t\t\t(0x4020 + ((w) << 2))\n#define MVPP2_WIN_REMAP(w)\t\t\t(0x4040 + ((w) << 2))\n#define MVPP2_BASE_ADDR_ENABLE\t\t\t0x4060\n\n \n#define MVPP22_AXI_BM_WR_ATTR_REG\t\t0x4100\n#define MVPP22_AXI_BM_RD_ATTR_REG\t\t0x4104\n#define MVPP22_AXI_AGGRQ_DESCR_RD_ATTR_REG\t0x4110\n#define MVPP22_AXI_TXQ_DESCR_WR_ATTR_REG\t0x4114\n#define MVPP22_AXI_TXQ_DESCR_RD_ATTR_REG\t0x4118\n#define MVPP22_AXI_RXQ_DESCR_WR_ATTR_REG\t0x411c\n#define MVPP22_AXI_RX_DATA_WR_ATTR_REG\t\t0x4120\n#define MVPP22_AXI_TX_DATA_RD_ATTR_REG\t\t0x4130\n#define MVPP22_AXI_RD_NORMAL_CODE_REG\t\t0x4150\n#define MVPP22_AXI_RD_SNOOP_CODE_REG\t\t0x4154\n#define MVPP22_AXI_WR_NORMAL_CODE_REG\t\t0x4160\n#define MVPP22_AXI_WR_SNOOP_CODE_REG\t\t0x4164\n\n \n#define MVPP22_AXI_ATTR_CACHE_OFFS\t\t0\n#define MVPP22_AXI_ATTR_DOMAIN_OFFS\t\t12\n\n#define MVPP22_AXI_CODE_CACHE_OFFS\t\t0\n#define MVPP22_AXI_CODE_DOMAIN_OFFS\t\t4\n\n#define MVPP22_AXI_CODE_CACHE_NON_CACHE\t\t0x3\n#define MVPP22_AXI_CODE_CACHE_WR_CACHE\t\t0x7\n#define MVPP22_AXI_CODE_CACHE_RD_CACHE\t\t0xb\n\n#define MVPP22_AXI_CODE_DOMAIN_OUTER_DOM\t2\n#define MVPP22_AXI_CODE_DOMAIN_SYSTEM\t\t3\n\n \n#define MVPP2_ISR_TX_THRESHOLD_REG(port)\t(0x5140 + 4 * (port))\n#define     MVPP2_MAX_ISR_TX_THRESHOLD\t\t0xfffff0\n\n#define MVPP2_ISR_RX_THRESHOLD_REG(rxq)\t\t(0x5200 + 4 * (rxq))\n#define     MVPP2_MAX_ISR_RX_THRESHOLD\t\t0xfffff0\n#define MVPP21_ISR_RXQ_GROUP_REG(port)\t\t(0x5400 + 4 * (port))\n\n#define MVPP22_ISR_RXQ_GROUP_INDEX_REG\t\t0x5400\n#define MVPP22_ISR_RXQ_GROUP_INDEX_SUBGROUP_MASK 0xf\n#define MVPP22_ISR_RXQ_GROUP_INDEX_GROUP_MASK\t0x380\n#define MVPP22_ISR_RXQ_GROUP_INDEX_GROUP_OFFSET\t7\n\n#define MVPP22_ISR_RXQ_GROUP_INDEX_SUBGROUP_MASK 0xf\n#define MVPP22_ISR_RXQ_GROUP_INDEX_GROUP_MASK\t0x380\n\n#define MVPP22_ISR_RXQ_SUB_GROUP_CONFIG_REG\t0x5404\n#define MVPP22_ISR_RXQ_SUB_GROUP_STARTQ_MASK\t0x1f\n#define MVPP22_ISR_RXQ_SUB_GROUP_SIZE_MASK\t0xf00\n#define MVPP22_ISR_RXQ_SUB_GROUP_SIZE_OFFSET\t8\n\n#define MVPP2_ISR_ENABLE_REG(port)\t\t(0x5420 + 4 * (port))\n#define     MVPP2_ISR_ENABLE_INTERRUPT(mask)\t((mask) & 0xffff)\n#define     MVPP2_ISR_DISABLE_INTERRUPT(mask)\t(((mask) << 16) & 0xffff0000)\n#define MVPP2_ISR_RX_TX_CAUSE_REG(port)\t\t(0x5480 + 4 * (port))\n#define     MVPP2_CAUSE_RXQ_OCCUP_DESC_ALL_MASK(version) \\\n\t\t\t\t\t((version) == MVPP21 ? 0xffff : 0xff)\n#define     MVPP2_CAUSE_TXQ_OCCUP_DESC_ALL_MASK\t0xff0000\n#define     MVPP2_CAUSE_TXQ_OCCUP_DESC_ALL_OFFSET\t16\n#define     MVPP2_CAUSE_RX_FIFO_OVERRUN_MASK\tBIT(24)\n#define     MVPP2_CAUSE_FCS_ERR_MASK\t\tBIT(25)\n#define     MVPP2_CAUSE_TX_FIFO_UNDERRUN_MASK\tBIT(26)\n#define     MVPP2_CAUSE_TX_EXCEPTION_SUM_MASK\tBIT(29)\n#define     MVPP2_CAUSE_RX_EXCEPTION_SUM_MASK\tBIT(30)\n#define     MVPP2_CAUSE_MISC_SUM_MASK\t\tBIT(31)\n#define MVPP2_ISR_RX_TX_MASK_REG(port)\t\t(0x54a0 + 4 * (port))\n#define MVPP2_ISR_PON_RX_TX_MASK_REG\t\t0x54bc\n#define     MVPP2_PON_CAUSE_RXQ_OCCUP_DESC_ALL_MASK\t0xffff\n#define     MVPP2_PON_CAUSE_TXP_OCCUP_DESC_ALL_MASK\t0x3fc00000\n#define     MVPP2_PON_CAUSE_MISC_SUM_MASK\t\tBIT(31)\n#define MVPP2_ISR_MISC_CAUSE_REG\t\t0x55b0\n#define MVPP2_ISR_RX_ERR_CAUSE_REG(port)\t(0x5520 + 4 * (port))\n#define     MVPP2_ISR_RX_ERR_CAUSE_NONOCC_MASK\t0x00ff\n\n \n#define MVPP2_BM_POOL_BASE_REG(pool)\t\t(0x6000 + ((pool) * 4))\n#define     MVPP2_BM_POOL_BASE_ADDR_MASK\t0xfffff80\n#define MVPP2_BM_POOL_SIZE_REG(pool)\t\t(0x6040 + ((pool) * 4))\n#define     MVPP2_BM_POOL_SIZE_MASK\t\t0xfff0\n#define MVPP2_BM_POOL_READ_PTR_REG(pool)\t(0x6080 + ((pool) * 4))\n#define     MVPP2_BM_POOL_GET_READ_PTR_MASK\t0xfff0\n#define MVPP2_BM_POOL_PTRS_NUM_REG(pool)\t(0x60c0 + ((pool) * 4))\n#define     MVPP2_BM_POOL_PTRS_NUM_MASK\t\t0xfff0\n#define MVPP2_BM_BPPI_READ_PTR_REG(pool)\t(0x6100 + ((pool) * 4))\n#define MVPP2_BM_BPPI_PTRS_NUM_REG(pool)\t(0x6140 + ((pool) * 4))\n#define     MVPP2_BM_BPPI_PTR_NUM_MASK\t\t0x7ff\n#define MVPP22_BM_POOL_PTRS_NUM_MASK\t\t0xfff8\n#define     MVPP2_BM_BPPI_PREFETCH_FULL_MASK\tBIT(16)\n#define MVPP2_BM_POOL_CTRL_REG(pool)\t\t(0x6200 + ((pool) * 4))\n#define     MVPP2_BM_START_MASK\t\t\tBIT(0)\n#define     MVPP2_BM_STOP_MASK\t\t\tBIT(1)\n#define     MVPP2_BM_STATE_MASK\t\t\tBIT(4)\n#define     MVPP2_BM_LOW_THRESH_OFFS\t\t8\n#define     MVPP2_BM_LOW_THRESH_MASK\t\t0x7f00\n#define     MVPP2_BM_LOW_THRESH_VALUE(val)\t((val) << \\\n\t\t\t\t\t\tMVPP2_BM_LOW_THRESH_OFFS)\n#define     MVPP2_BM_HIGH_THRESH_OFFS\t\t16\n#define     MVPP2_BM_HIGH_THRESH_MASK\t\t0x7f0000\n#define     MVPP2_BM_HIGH_THRESH_VALUE(val)\t((val) << \\\n\t\t\t\t\t\tMVPP2_BM_HIGH_THRESH_OFFS)\n#define     MVPP2_BM_BPPI_HIGH_THRESH\t\t0x1E\n#define     MVPP2_BM_BPPI_LOW_THRESH\t\t0x1C\n#define     MVPP23_BM_BPPI_HIGH_THRESH\t\t0x34\n#define     MVPP23_BM_BPPI_LOW_THRESH\t\t0x28\n#define MVPP2_BM_INTR_CAUSE_REG(pool)\t\t(0x6240 + ((pool) * 4))\n#define     MVPP2_BM_RELEASED_DELAY_MASK\tBIT(0)\n#define     MVPP2_BM_ALLOC_FAILED_MASK\t\tBIT(1)\n#define     MVPP2_BM_BPPE_EMPTY_MASK\t\tBIT(2)\n#define     MVPP2_BM_BPPE_FULL_MASK\t\tBIT(3)\n#define     MVPP2_BM_AVAILABLE_BP_LOW_MASK\tBIT(4)\n#define MVPP2_BM_INTR_MASK_REG(pool)\t\t(0x6280 + ((pool) * 4))\n#define MVPP2_BM_PHY_ALLOC_REG(pool)\t\t(0x6400 + ((pool) * 4))\n#define     MVPP2_BM_PHY_ALLOC_GRNTD_MASK\tBIT(0)\n#define MVPP2_BM_VIRT_ALLOC_REG\t\t\t0x6440\n#define MVPP22_BM_ADDR_HIGH_ALLOC\t\t0x6444\n#define     MVPP22_BM_ADDR_HIGH_PHYS_MASK\t0xff\n#define     MVPP22_BM_ADDR_HIGH_VIRT_MASK\t0xff00\n#define     MVPP22_BM_ADDR_HIGH_VIRT_SHIFT\t8\n#define MVPP2_BM_PHY_RLS_REG(pool)\t\t(0x6480 + ((pool) * 4))\n#define     MVPP2_BM_PHY_RLS_MC_BUFF_MASK\tBIT(0)\n#define     MVPP2_BM_PHY_RLS_PRIO_EN_MASK\tBIT(1)\n#define     MVPP2_BM_PHY_RLS_GRNTD_MASK\t\tBIT(2)\n#define MVPP2_BM_VIRT_RLS_REG\t\t\t0x64c0\n#define MVPP22_BM_ADDR_HIGH_RLS_REG\t\t0x64c4\n#define     MVPP22_BM_ADDR_HIGH_PHYS_RLS_MASK\t0xff\n#define     MVPP22_BM_ADDR_HIGH_VIRT_RLS_MASK\t0xff00\n#define     MVPP22_BM_ADDR_HIGH_VIRT_RLS_SHIFT\t8\n\n \n#define MVPP2_OVERRUN_ETH_DROP\t\t\t0x7000\n#define MVPP2_CLS_ETH_DROP\t\t\t0x7020\n\n#define MVPP22_BM_POOL_BASE_ADDR_HIGH_REG\t0x6310\n#define     MVPP22_BM_POOL_BASE_ADDR_HIGH_MASK\t0xff\n#define     MVPP23_BM_8POOL_MODE\t\tBIT(8)\n\n \n#define MVPP2_CTRS_IDX\t\t\t\t0x7040\n#define     MVPP22_CTRS_TX_CTR(port, txq)\t((txq) | ((port) << 3) | BIT(7))\n#define MVPP2_TX_DESC_ENQ_CTR\t\t\t0x7100\n#define MVPP2_TX_DESC_ENQ_TO_DDR_CTR\t\t0x7104\n#define MVPP2_TX_BUFF_ENQ_TO_DDR_CTR\t\t0x7108\n#define MVPP2_TX_DESC_ENQ_HW_FWD_CTR\t\t0x710c\n#define MVPP2_RX_DESC_ENQ_CTR\t\t\t0x7120\n#define MVPP2_TX_PKTS_DEQ_CTR\t\t\t0x7130\n#define MVPP2_TX_PKTS_FULL_QUEUE_DROP_CTR\t0x7200\n#define MVPP2_TX_PKTS_EARLY_DROP_CTR\t\t0x7204\n#define MVPP2_TX_PKTS_BM_DROP_CTR\t\t0x7208\n#define MVPP2_TX_PKTS_BM_MC_DROP_CTR\t\t0x720c\n#define MVPP2_RX_PKTS_FULL_QUEUE_DROP_CTR\t0x7220\n#define MVPP2_RX_PKTS_EARLY_DROP_CTR\t\t0x7224\n#define MVPP2_RX_PKTS_BM_DROP_CTR\t\t0x7228\n#define MVPP2_CLS_DEC_TBL_HIT_CTR\t\t0x7700\n#define MVPP2_CLS_FLOW_TBL_HIT_CTR\t\t0x7704\n\n \n#define MVPP2_TXP_SCHED_PORT_INDEX_REG\t\t0x8000\n#define MVPP2_TXP_SCHED_Q_CMD_REG\t\t0x8004\n#define     MVPP2_TXP_SCHED_ENQ_MASK\t\t0xff\n#define     MVPP2_TXP_SCHED_DISQ_OFFSET\t\t8\n#define MVPP2_TXP_SCHED_CMD_1_REG\t\t0x8010\n#define MVPP2_TXP_SCHED_FIXED_PRIO_REG\t\t0x8014\n#define MVPP2_TXP_SCHED_PERIOD_REG\t\t0x8018\n#define MVPP2_TXP_SCHED_MTU_REG\t\t\t0x801c\n#define     MVPP2_TXP_MTU_MAX\t\t\t0x7FFFF\n#define MVPP2_TXP_SCHED_REFILL_REG\t\t0x8020\n#define     MVPP2_TXP_REFILL_TOKENS_ALL_MASK\t0x7ffff\n#define     MVPP2_TXP_REFILL_PERIOD_ALL_MASK\t0x3ff00000\n#define     MVPP2_TXP_REFILL_PERIOD_MASK(v)\t((v) << 20)\n#define MVPP2_TXP_SCHED_TOKEN_SIZE_REG\t\t0x8024\n#define     MVPP2_TXP_TOKEN_SIZE_MAX\t\t0xffffffff\n#define MVPP2_TXQ_SCHED_REFILL_REG(q)\t\t(0x8040 + ((q) << 2))\n#define     MVPP2_TXQ_REFILL_TOKENS_ALL_MASK\t0x7ffff\n#define     MVPP2_TXQ_REFILL_PERIOD_ALL_MASK\t0x3ff00000\n#define     MVPP2_TXQ_REFILL_PERIOD_MASK(v)\t((v) << 20)\n#define MVPP2_TXQ_SCHED_TOKEN_SIZE_REG(q)\t(0x8060 + ((q) << 2))\n#define     MVPP2_TXQ_TOKEN_SIZE_MAX\t\t0x7fffffff\n#define MVPP2_TXQ_SCHED_TOKEN_CNTR_REG(q)\t(0x8080 + ((q) << 2))\n#define     MVPP2_TXQ_TOKEN_CNTR_MAX\t\t0xffffffff\n\n \n#define MVPP2_TX_SNOOP_REG\t\t\t0x8800\n#define MVPP2_TX_PORT_FLUSH_REG\t\t\t0x8810\n#define     MVPP2_TX_PORT_FLUSH_MASK(port)\t(1 << (port))\n\n \n#define MVPP2_SRC_ADDR_MIDDLE\t\t\t0x24\n#define MVPP2_SRC_ADDR_HIGH\t\t\t0x28\n#define MVPP2_PHY_AN_CFG0_REG\t\t\t0x34\n#define     MVPP2_PHY_AN_STOP_SMI0_MASK\t\tBIT(7)\n#define MVPP2_MNG_EXTENDED_GLOBAL_CTRL_REG\t0x305c\n#define     MVPP2_EXT_GLOBAL_CTRL_DEFAULT\t0x27\n\n \n#define MVPP2_GMAC_CTRL_0_REG\t\t\t0x0\n#define     MVPP2_GMAC_PORT_EN_MASK\t\tBIT(0)\n#define     MVPP2_GMAC_PORT_TYPE_MASK\t\tBIT(1)\n#define     MVPP2_GMAC_MAX_RX_SIZE_OFFS\t\t2\n#define     MVPP2_GMAC_MAX_RX_SIZE_MASK\t\t0x7ffc\n#define     MVPP2_GMAC_MIB_CNTR_EN_MASK\t\tBIT(15)\n#define MVPP2_GMAC_CTRL_1_REG\t\t\t0x4\n#define     MVPP2_GMAC_PERIODIC_XON_EN_MASK\tBIT(1)\n#define     MVPP2_GMAC_GMII_LB_EN_MASK\t\tBIT(5)\n#define     MVPP2_GMAC_PCS_LB_EN_BIT\t\t6\n#define     MVPP2_GMAC_PCS_LB_EN_MASK\t\tBIT(6)\n#define     MVPP2_GMAC_SA_LOW_OFFS\t\t7\n#define MVPP2_GMAC_CTRL_2_REG\t\t\t0x8\n#define     MVPP2_GMAC_INBAND_AN_MASK\t\tBIT(0)\n#define     MVPP2_GMAC_FLOW_CTRL_MASK\t\tGENMASK(2, 1)\n#define     MVPP2_GMAC_PCS_ENABLE_MASK\t\tBIT(3)\n#define     MVPP2_GMAC_INTERNAL_CLK_MASK\tBIT(4)\n#define     MVPP2_GMAC_DISABLE_PADDING\t\tBIT(5)\n#define     MVPP2_GMAC_PORT_RESET_MASK\t\tBIT(6)\n#define MVPP2_GMAC_AUTONEG_CONFIG\t\t0xc\n#define     MVPP2_GMAC_FORCE_LINK_DOWN\t\tBIT(0)\n#define     MVPP2_GMAC_FORCE_LINK_PASS\t\tBIT(1)\n#define     MVPP2_GMAC_IN_BAND_AUTONEG\t\tBIT(2)\n#define     MVPP2_GMAC_IN_BAND_AUTONEG_BYPASS\tBIT(3)\n#define     MVPP2_GMAC_IN_BAND_RESTART_AN\tBIT(4)\n#define     MVPP2_GMAC_CONFIG_MII_SPEED\t\tBIT(5)\n#define     MVPP2_GMAC_CONFIG_GMII_SPEED\tBIT(6)\n#define     MVPP2_GMAC_AN_SPEED_EN\t\tBIT(7)\n#define     MVPP2_GMAC_FC_ADV_EN\t\tBIT(9)\n#define     MVPP2_GMAC_FC_ADV_ASM_EN\t\tBIT(10)\n#define     MVPP2_GMAC_FLOW_CTRL_AUTONEG\tBIT(11)\n#define     MVPP2_GMAC_CONFIG_FULL_DUPLEX\tBIT(12)\n#define     MVPP2_GMAC_AN_DUPLEX_EN\t\tBIT(13)\n#define MVPP2_GMAC_STATUS0\t\t\t0x10\n#define     MVPP2_GMAC_STATUS0_LINK_UP\t\tBIT(0)\n#define     MVPP2_GMAC_STATUS0_GMII_SPEED\tBIT(1)\n#define     MVPP2_GMAC_STATUS0_MII_SPEED\tBIT(2)\n#define     MVPP2_GMAC_STATUS0_FULL_DUPLEX\tBIT(3)\n#define     MVPP2_GMAC_STATUS0_RX_PAUSE\t\tBIT(4)\n#define     MVPP2_GMAC_STATUS0_TX_PAUSE\t\tBIT(5)\n#define     MVPP2_GMAC_STATUS0_AN_COMPLETE\tBIT(11)\n#define MVPP2_GMAC_PORT_FIFO_CFG_1_REG\t\t0x1c\n#define     MVPP2_GMAC_TX_FIFO_MIN_TH_OFFS\t6\n#define     MVPP2_GMAC_TX_FIFO_MIN_TH_ALL_MASK\t0x1fc0\n#define     MVPP2_GMAC_TX_FIFO_MIN_TH_MASK(v)\t(((v) << 6) & \\\n\t\t\t\t\tMVPP2_GMAC_TX_FIFO_MIN_TH_ALL_MASK)\n#define MVPP22_GMAC_INT_STAT\t\t\t0x20\n#define     MVPP22_GMAC_INT_STAT_LINK\t\tBIT(1)\n#define MVPP22_GMAC_INT_MASK\t\t\t0x24\n#define     MVPP22_GMAC_INT_MASK_LINK_STAT\tBIT(1)\n#define MVPP22_GMAC_CTRL_4_REG\t\t\t0x90\n#define     MVPP22_CTRL4_EXT_PIN_GMII_SEL\tBIT(0)\n#define     MVPP22_CTRL4_RX_FC_EN\t\tBIT(3)\n#define     MVPP22_CTRL4_TX_FC_EN\t\tBIT(4)\n#define     MVPP22_CTRL4_DP_CLK_SEL\t\tBIT(5)\n#define     MVPP22_CTRL4_SYNC_BYPASS_DIS\tBIT(6)\n#define     MVPP22_CTRL4_QSGMII_BYPASS_ACTIVE\tBIT(7)\n#define MVPP22_GMAC_INT_SUM_STAT\t\t0xa0\n#define\t    MVPP22_GMAC_INT_SUM_STAT_INTERNAL\tBIT(1)\n#define\t    MVPP22_GMAC_INT_SUM_STAT_PTP\tBIT(2)\n#define MVPP22_GMAC_INT_SUM_MASK\t\t0xa4\n#define     MVPP22_GMAC_INT_SUM_MASK_LINK_STAT\tBIT(1)\n#define\t    MVPP22_GMAC_INT_SUM_MASK_PTP\tBIT(2)\n\n \n#define MVPP22_XLG_CTRL0_REG\t\t\t0x100\n#define     MVPP22_XLG_CTRL0_PORT_EN\t\tBIT(0)\n#define     MVPP22_XLG_CTRL0_MAC_RESET_DIS\tBIT(1)\n#define     MVPP22_XLG_CTRL0_FORCE_LINK_DOWN\tBIT(2)\n#define     MVPP22_XLG_CTRL0_FORCE_LINK_PASS\tBIT(3)\n#define     MVPP22_XLG_CTRL0_RX_FLOW_CTRL_EN\tBIT(7)\n#define     MVPP22_XLG_CTRL0_TX_FLOW_CTRL_EN\tBIT(8)\n#define     MVPP22_XLG_CTRL0_MIB_CNT_DIS\tBIT(14)\n#define MVPP22_XLG_CTRL1_REG\t\t\t0x104\n#define     MVPP22_XLG_CTRL1_FRAMESIZELIMIT_OFFS\t0\n#define     MVPP22_XLG_CTRL1_FRAMESIZELIMIT_MASK\t0x1fff\n#define MVPP22_XLG_STATUS\t\t\t0x10c\n#define     MVPP22_XLG_STATUS_LINK_UP\t\tBIT(0)\n#define MVPP22_XLG_INT_STAT\t\t\t0x114\n#define     MVPP22_XLG_INT_STAT_LINK\t\tBIT(1)\n#define MVPP22_XLG_INT_MASK\t\t\t0x118\n#define     MVPP22_XLG_INT_MASK_LINK\t\tBIT(1)\n#define MVPP22_XLG_CTRL3_REG\t\t\t0x11c\n#define     MVPP22_XLG_CTRL3_MACMODESELECT_MASK\t(7 << 13)\n#define     MVPP22_XLG_CTRL3_MACMODESELECT_GMAC\t(0 << 13)\n#define     MVPP22_XLG_CTRL3_MACMODESELECT_10G\t(1 << 13)\n#define MVPP22_XLG_EXT_INT_STAT\t\t\t0x158\n#define     MVPP22_XLG_EXT_INT_STAT_XLG\t\tBIT(1)\n#define     MVPP22_XLG_EXT_INT_STAT_PTP\t\tBIT(7)\n#define MVPP22_XLG_EXT_INT_MASK\t\t\t0x15c\n#define     MVPP22_XLG_EXT_INT_MASK_XLG\t\tBIT(1)\n#define     MVPP22_XLG_EXT_INT_MASK_GIG\t\tBIT(2)\n#define     MVPP22_XLG_EXT_INT_MASK_PTP\t\tBIT(7)\n#define MVPP22_XLG_CTRL4_REG\t\t\t0x184\n#define     MVPP22_XLG_CTRL4_FWD_FC\t\tBIT(5)\n#define     MVPP22_XLG_CTRL4_FWD_PFC\t\tBIT(6)\n#define     MVPP22_XLG_CTRL4_MACMODSELECT_GMAC\tBIT(12)\n#define     MVPP22_XLG_CTRL4_EN_IDLE_CHECK\tBIT(14)\n\n \n#define MVPP22_SMI_MISC_CFG_REG\t\t\t0x1204\n#define     MVPP22_SMI_POLLING_EN\t\tBIT(10)\n\n \n#define MVPP22_TAI_INT_CAUSE\t\t\t0x1400\n#define MVPP22_TAI_INT_MASK\t\t\t0x1404\n#define MVPP22_TAI_CR0\t\t\t\t0x1408\n#define MVPP22_TAI_CR1\t\t\t\t0x140c\n#define MVPP22_TAI_TCFCR0\t\t\t0x1410\n#define MVPP22_TAI_TCFCR1\t\t\t0x1414\n#define MVPP22_TAI_TCFCR2\t\t\t0x1418\n#define MVPP22_TAI_FATWR\t\t\t0x141c\n#define MVPP22_TAI_TOD_STEP_NANO_CR\t\t0x1420\n#define MVPP22_TAI_TOD_STEP_FRAC_HIGH\t\t0x1424\n#define MVPP22_TAI_TOD_STEP_FRAC_LOW\t\t0x1428\n#define MVPP22_TAI_TAPDC_HIGH\t\t\t0x142c\n#define MVPP22_TAI_TAPDC_LOW\t\t\t0x1430\n#define MVPP22_TAI_TGTOD_SEC_HIGH\t\t0x1434\n#define MVPP22_TAI_TGTOD_SEC_MED\t\t0x1438\n#define MVPP22_TAI_TGTOD_SEC_LOW\t\t0x143c\n#define MVPP22_TAI_TGTOD_NANO_HIGH\t\t0x1440\n#define MVPP22_TAI_TGTOD_NANO_LOW\t\t0x1444\n#define MVPP22_TAI_TGTOD_FRAC_HIGH\t\t0x1448\n#define MVPP22_TAI_TGTOD_FRAC_LOW\t\t0x144c\n#define MVPP22_TAI_TLV_SEC_HIGH\t\t\t0x1450\n#define MVPP22_TAI_TLV_SEC_MED\t\t\t0x1454\n#define MVPP22_TAI_TLV_SEC_LOW\t\t\t0x1458\n#define MVPP22_TAI_TLV_NANO_HIGH\t\t0x145c\n#define MVPP22_TAI_TLV_NANO_LOW\t\t\t0x1460\n#define MVPP22_TAI_TLV_FRAC_HIGH\t\t0x1464\n#define MVPP22_TAI_TLV_FRAC_LOW\t\t\t0x1468\n#define MVPP22_TAI_TCV0_SEC_HIGH\t\t0x146c\n#define MVPP22_TAI_TCV0_SEC_MED\t\t\t0x1470\n#define MVPP22_TAI_TCV0_SEC_LOW\t\t\t0x1474\n#define MVPP22_TAI_TCV0_NANO_HIGH\t\t0x1478\n#define MVPP22_TAI_TCV0_NANO_LOW\t\t0x147c\n#define MVPP22_TAI_TCV0_FRAC_HIGH\t\t0x1480\n#define MVPP22_TAI_TCV0_FRAC_LOW\t\t0x1484\n#define MVPP22_TAI_TCV1_SEC_HIGH\t\t0x1488\n#define MVPP22_TAI_TCV1_SEC_MED\t\t\t0x148c\n#define MVPP22_TAI_TCV1_SEC_LOW\t\t\t0x1490\n#define MVPP22_TAI_TCV1_NANO_HIGH\t\t0x1494\n#define MVPP22_TAI_TCV1_NANO_LOW\t\t0x1498\n#define MVPP22_TAI_TCV1_FRAC_HIGH\t\t0x149c\n#define MVPP22_TAI_TCV1_FRAC_LOW\t\t0x14a0\n#define MVPP22_TAI_TCSR\t\t\t\t0x14a4\n#define MVPP22_TAI_TUC_LSB\t\t\t0x14a8\n#define MVPP22_TAI_GFM_SEC_HIGH\t\t\t0x14ac\n#define MVPP22_TAI_GFM_SEC_MED\t\t\t0x14b0\n#define MVPP22_TAI_GFM_SEC_LOW\t\t\t0x14b4\n#define MVPP22_TAI_GFM_NANO_HIGH\t\t0x14b8\n#define MVPP22_TAI_GFM_NANO_LOW\t\t\t0x14bc\n#define MVPP22_TAI_GFM_FRAC_HIGH\t\t0x14c0\n#define MVPP22_TAI_GFM_FRAC_LOW\t\t\t0x14c4\n#define MVPP22_TAI_PCLK_DA_HIGH\t\t\t0x14c8\n#define MVPP22_TAI_PCLK_DA_LOW\t\t\t0x14cc\n#define MVPP22_TAI_CTCR\t\t\t\t0x14d0\n#define MVPP22_TAI_PCLK_CCC_HIGH\t\t0x14d4\n#define MVPP22_TAI_PCLK_CCC_LOW\t\t\t0x14d8\n#define MVPP22_TAI_DTC_HIGH\t\t\t0x14dc\n#define MVPP22_TAI_DTC_LOW\t\t\t0x14e0\n#define MVPP22_TAI_CCC_HIGH\t\t\t0x14e4\n#define MVPP22_TAI_CCC_LOW\t\t\t0x14e8\n#define MVPP22_TAI_ICICE\t\t\t0x14f4\n#define MVPP22_TAI_ICICC_LOW\t\t\t0x14f8\n#define MVPP22_TAI_TUC_MSB\t\t\t0x14fc\n\n#define MVPP22_GMAC_BASE(port)\t\t(0x7000 + (port) * 0x1000 + 0xe00)\n\n#define MVPP2_CAUSE_TXQ_SENT_DESC_ALL_MASK\t0xff\n\n \n#define MVPP2_QUEUE_NEXT_DESC(q, index) \\\n\t(((index) < (q)->last_desc) ? ((index) + 1) : 0)\n\n \n#define MVPP22_MPCS_BASE(port)\t\t\t(0x7000 + (port) * 0x1000)\n#define MVPP22_MPCS_CTRL\t\t\t0x14\n#define     MVPP22_MPCS_CTRL_FWD_ERR_CONN\tBIT(10)\n#define MVPP22_MPCS_CLK_RESET\t\t\t0x14c\n#define     MAC_CLK_RESET_SD_TX\t\t\tBIT(0)\n#define     MAC_CLK_RESET_SD_RX\t\t\tBIT(1)\n#define     MAC_CLK_RESET_MAC\t\t\tBIT(2)\n#define     MVPP22_MPCS_CLK_RESET_DIV_RATIO(n)\t((n) << 4)\n#define     MVPP22_MPCS_CLK_RESET_DIV_SET\tBIT(11)\n\n \n#define MVPP22_FCA_BASE(port)\t\t\t(0x7600 + (port) * 0x1000)\n#define MVPP22_FCA_REG_SIZE\t\t\t16\n#define MVPP22_FCA_REG_MASK\t\t\t0xFFFF\n#define MVPP22_FCA_CONTROL_REG\t\t\t0x0\n#define MVPP22_FCA_ENABLE_PERIODIC\t\tBIT(11)\n#define MVPP22_PERIODIC_COUNTER_LSB_REG\t\t(0x110)\n#define MVPP22_PERIODIC_COUNTER_MSB_REG\t\t(0x114)\n\n \n#define MVPP22_XPCS_BASE(port)\t\t\t(0x7400 + (port) * 0x1000)\n#define MVPP22_XPCS_CFG0\t\t\t0x0\n#define     MVPP22_XPCS_CFG0_RESET_DIS\t\tBIT(0)\n#define     MVPP22_XPCS_CFG0_PCS_MODE(n)\t((n) << 3)\n#define     MVPP22_XPCS_CFG0_ACTIVE_LANE(n)\t((n) << 5)\n\n \n#define MVPP22_PTP_BASE(port)\t\t\t(0x7800 + (port * 0x1000))\n#define MVPP22_PTP_INT_CAUSE\t\t\t0x00\n#define     MVPP22_PTP_INT_CAUSE_QUEUE1\t\tBIT(6)\n#define     MVPP22_PTP_INT_CAUSE_QUEUE0\t\tBIT(5)\n#define MVPP22_PTP_INT_MASK\t\t\t0x04\n#define     MVPP22_PTP_INT_MASK_QUEUE1\t\tBIT(6)\n#define     MVPP22_PTP_INT_MASK_QUEUE0\t\tBIT(5)\n#define MVPP22_PTP_GCR\t\t\t\t0x08\n#define     MVPP22_PTP_GCR_RX_RESET\t\tBIT(13)\n#define     MVPP22_PTP_GCR_TX_RESET\t\tBIT(1)\n#define     MVPP22_PTP_GCR_TSU_ENABLE\t\tBIT(0)\n#define MVPP22_PTP_TX_Q0_R0\t\t\t0x0c\n#define MVPP22_PTP_TX_Q0_R1\t\t\t0x10\n#define MVPP22_PTP_TX_Q0_R2\t\t\t0x14\n#define MVPP22_PTP_TX_Q1_R0\t\t\t0x18\n#define MVPP22_PTP_TX_Q1_R1\t\t\t0x1c\n#define MVPP22_PTP_TX_Q1_R2\t\t\t0x20\n#define MVPP22_PTP_TPCR\t\t\t\t0x24\n#define MVPP22_PTP_V1PCR\t\t\t0x28\n#define MVPP22_PTP_V2PCR\t\t\t0x2c\n#define MVPP22_PTP_Y1731PCR\t\t\t0x30\n#define MVPP22_PTP_NTPTSPCR\t\t\t0x34\n#define MVPP22_PTP_NTPRXPCR\t\t\t0x38\n#define MVPP22_PTP_NTPTXPCR\t\t\t0x3c\n#define MVPP22_PTP_WAMPPCR\t\t\t0x40\n#define MVPP22_PTP_NAPCR\t\t\t0x44\n#define MVPP22_PTP_FAPCR\t\t\t0x48\n#define MVPP22_PTP_CAPCR\t\t\t0x50\n#define MVPP22_PTP_ATAPCR\t\t\t0x54\n#define MVPP22_PTP_ACTAPCR\t\t\t0x58\n#define MVPP22_PTP_CATAPCR\t\t\t0x5c\n#define MVPP22_PTP_CACTAPCR\t\t\t0x60\n#define MVPP22_PTP_AITAPCR\t\t\t0x64\n#define MVPP22_PTP_CAITAPCR\t\t\t0x68\n#define MVPP22_PTP_CITAPCR\t\t\t0x6c\n#define MVPP22_PTP_NTP_OFF_HIGH\t\t\t0x70\n#define MVPP22_PTP_NTP_OFF_LOW\t\t\t0x74\n#define MVPP22_PTP_TX_PIPE_STATUS_DELAY\t\t0x78\n\n \n#define GENCONF_SOFT_RESET1\t\t\t\t0x1108\n#define     GENCONF_SOFT_RESET1_GOP\t\t\tBIT(6)\n#define GENCONF_PORT_CTRL0\t\t\t\t0x1110\n#define     GENCONF_PORT_CTRL0_BUS_WIDTH_SELECT\t\tBIT(1)\n#define     GENCONF_PORT_CTRL0_RX_DATA_SAMPLE\t\tBIT(29)\n#define     GENCONF_PORT_CTRL0_CLK_DIV_PHASE_CLR\tBIT(31)\n#define GENCONF_PORT_CTRL1\t\t\t\t0x1114\n#define     GENCONF_PORT_CTRL1_EN(p)\t\t\tBIT(p)\n#define     GENCONF_PORT_CTRL1_RESET(p)\t\t\t(BIT(p) << 28)\n#define GENCONF_CTRL0\t\t\t\t\t0x1120\n#define     GENCONF_CTRL0_PORT2_RGMII\t\t\tBIT(0)\n#define     GENCONF_CTRL0_PORT3_RGMII_MII\t\tBIT(1)\n#define     GENCONF_CTRL0_PORT3_RGMII\t\t\tBIT(2)\n\n \n\n \n#define MVPP2_TXDONE_COAL_PKTS_THRESH\t64\n#define MVPP2_TXDONE_HRTIMER_PERIOD_NS\t1000000UL\n#define MVPP2_TXDONE_COAL_USEC\t\t1000\n#define MVPP2_RX_COAL_PKTS\t\t32\n#define MVPP2_RX_COAL_USEC\t\t64\n\n \n#define MVPP2_MH_SIZE\t\t\t2\n#define MVPP2_ETH_TYPE_LEN\t\t2\n#define MVPP2_PPPOE_HDR_SIZE\t\t8\n#define MVPP2_VLAN_TAG_LEN\t\t4\n#define MVPP2_VLAN_TAG_EDSA_LEN\t\t8\n\n \n#define MVPP2_IP_LBDT_TYPE\t\t0xfffa\n\n#define MVPP2_TX_CSUM_MAX_SIZE\t\t9800\n\n \n#define MVPP2_TX_DISABLE_TIMEOUT_MSEC\t1000\n#define MVPP2_TX_PENDING_TIMEOUT_MSEC\t1000\n\n#define MVPP2_TX_MTU_MAX\t\t0x7ffff\n\n \n#define MVPP2_MAX_TCONT\t\t\t16\n\n \n#define MVPP2_MAX_PORTS\t\t\t4\n\n \n#define MVPP2_LOOPBACK_PORT_INDEX\t3\n\n \n#define MVPP2_MAX_TXQ\t\t\t8\n\n \n#define MVPP2_MAX_TSO_SEGS\t\t300\n#define MVPP2_MAX_SKB_DESCS\t\t(MVPP2_MAX_TSO_SEGS * 2 + MAX_SKB_FRAGS)\n\n \n#define MVPP2_PORT_MAX_RXQ\t\t32\n\n \n#define MVPP2_MAX_RXD_MAX\t\t2048\n#define MVPP2_MAX_RXD_DFLT\t\t1024\n\n \n#define MVPP2_MAX_TXD_MAX\t\t2048\n#define MVPP2_MAX_TXD_DFLT\t\t1024\n\n \n#define MVPP2_CPU_DESC_CHUNK\t\t64\n\n \n#define MVPP2_AGGR_TXQ_SIZE\t\t256\n\n \n#define MVPP2_DESC_ALIGNED_SIZE\t\t32\n\n \n#define MVPP2_TX_DESC_ALIGN\t\t(MVPP2_DESC_ALIGNED_SIZE - 1)\n\n \n#define MVPP2_RX_FIFO_PORT_DATA_SIZE_44KB\t0xb000\n#define MVPP2_RX_FIFO_PORT_DATA_SIZE_32KB\t0x8000\n#define MVPP2_RX_FIFO_PORT_DATA_SIZE_8KB\t0x2000\n#define MVPP2_RX_FIFO_PORT_DATA_SIZE_4KB\t0x1000\n#define MVPP2_RX_FIFO_PORT_ATTR_SIZE(data_size)\t((data_size) >> 6)\n#define MVPP2_RX_FIFO_PORT_ATTR_SIZE_4KB\t0x40\n#define MVPP2_RX_FIFO_PORT_MIN_PKT\t\t0x80\n\n \n#define MVPP22_TX_FIFO_DATA_SIZE_18KB\t\t18\n#define MVPP22_TX_FIFO_DATA_SIZE_10KB\t\t10\n#define MVPP22_TX_FIFO_DATA_SIZE_1KB\t\t1\n#define MVPP2_TX_FIFO_THRESHOLD_MIN\t\t256  \n#define MVPP2_TX_FIFO_THRESHOLD(kb)\t\\\n\t\t((kb) * 1024 - MVPP2_TX_FIFO_THRESHOLD_MIN)\n\n \n#define MVPP23_PORT0_FIFO_TRSH\t(9 * 1024)\n#define MVPP23_PORT1_FIFO_TRSH\t(4 * 1024)\n#define MVPP23_PORT2_FIFO_TRSH\t(2 * 1024)\n\n \n#define MVPP2_RX_FC_REG(port)\t\t(0x150 + 4 * (port))\n#define     MVPP2_RX_FC_EN\t\tBIT(24)\n#define     MVPP2_RX_FC_TRSH_OFFS\t16\n#define     MVPP2_RX_FC_TRSH_MASK\t(0xFF << MVPP2_RX_FC_TRSH_OFFS)\n#define     MVPP2_RX_FC_TRSH_UNIT\t256\n\n \n#define MSS_FC_COM_REG\t\t\t0\n#define FLOW_CONTROL_ENABLE_BIT\t\tBIT(0)\n#define FLOW_CONTROL_UPDATE_COMMAND_BIT\tBIT(31)\n#define FC_QUANTA\t\t\t0xFFFF\n#define FC_CLK_DIVIDER\t\t\t100\n\n#define MSS_RXQ_TRESH_BASE\t\t0x200\n#define MSS_RXQ_TRESH_OFFS\t\t4\n#define MSS_RXQ_TRESH_REG(q, fq)\t(MSS_RXQ_TRESH_BASE + (((q) + (fq)) \\\n\t\t\t\t\t* MSS_RXQ_TRESH_OFFS))\n\n#define MSS_BUF_POOL_BASE\t\t0x40\n#define MSS_BUF_POOL_OFFS\t\t4\n#define MSS_BUF_POOL_REG(id)\t\t(MSS_BUF_POOL_BASE\t\t\\\n\t\t\t\t\t+ (id) * MSS_BUF_POOL_OFFS)\n\n#define MSS_BUF_POOL_STOP_MASK\t\t0xFFF\n#define MSS_BUF_POOL_START_MASK\t\t(0xFFF << MSS_BUF_POOL_START_OFFS)\n#define MSS_BUF_POOL_START_OFFS\t\t12\n#define MSS_BUF_POOL_PORTS_MASK\t\t(0xF << MSS_BUF_POOL_PORTS_OFFS)\n#define MSS_BUF_POOL_PORTS_OFFS\t\t24\n#define MSS_BUF_POOL_PORT_OFFS(id)\t(0x1 <<\t\t\t\t\\\n\t\t\t\t\t((id) + MSS_BUF_POOL_PORTS_OFFS))\n\n#define MSS_RXQ_TRESH_START_MASK\t0xFFFF\n#define MSS_RXQ_TRESH_STOP_MASK\t\t(0xFFFF << MSS_RXQ_TRESH_STOP_OFFS)\n#define MSS_RXQ_TRESH_STOP_OFFS\t\t16\n\n#define MSS_RXQ_ASS_BASE\t0x80\n#define MSS_RXQ_ASS_OFFS\t4\n#define MSS_RXQ_ASS_PER_REG\t4\n#define MSS_RXQ_ASS_PER_OFFS\t8\n#define MSS_RXQ_ASS_PORTID_OFFS\t0\n#define MSS_RXQ_ASS_PORTID_MASK\t0x3\n#define MSS_RXQ_ASS_HOSTID_OFFS\t2\n#define MSS_RXQ_ASS_HOSTID_MASK\t0x3F\n\n#define MSS_RXQ_ASS_Q_BASE(q, fq) ((((q) + (fq)) % MSS_RXQ_ASS_PER_REG)\t \\\n\t\t\t\t  * MSS_RXQ_ASS_PER_OFFS)\n#define MSS_RXQ_ASS_PQ_BASE(q, fq) ((((q) + (fq)) / MSS_RXQ_ASS_PER_REG) \\\n\t\t\t\t   * MSS_RXQ_ASS_OFFS)\n#define MSS_RXQ_ASS_REG(q, fq) (MSS_RXQ_ASS_BASE + MSS_RXQ_ASS_PQ_BASE(q, fq))\n\n#define MSS_THRESHOLD_STOP\t768\n#define MSS_THRESHOLD_START\t1024\n#define MSS_FC_MAX_TIMEOUT\t5000\n\n \n#define MVPP2_SKB_SHINFO_SIZE \\\n\tSKB_DATA_ALIGN(sizeof(struct skb_shared_info))\n\n#define MVPP2_RX_PKT_SIZE(mtu) \\\n\tALIGN((mtu) + MVPP2_MH_SIZE + MVPP2_VLAN_TAG_LEN + \\\n\t      ETH_HLEN + ETH_FCS_LEN, cache_line_size())\n\n#define MVPP2_RX_BUF_SIZE(pkt_size)\t((pkt_size) + MVPP2_SKB_HEADROOM)\n#define MVPP2_RX_TOTAL_SIZE(buf_size)\t((buf_size) + MVPP2_SKB_SHINFO_SIZE)\n#define MVPP2_RX_MAX_PKT_SIZE(total_size) \\\n\t((total_size) - MVPP2_SKB_HEADROOM - MVPP2_SKB_SHINFO_SIZE)\n\n#define MVPP2_MAX_RX_BUF_SIZE\t(PAGE_SIZE - MVPP2_SKB_SHINFO_SIZE - MVPP2_SKB_HEADROOM)\n\n#define MVPP2_BIT_TO_BYTE(bit)\t\t((bit) / 8)\n#define MVPP2_BIT_TO_WORD(bit)\t\t((bit) / 32)\n#define MVPP2_BIT_IN_WORD(bit)\t\t((bit) % 32)\n\n#define MVPP2_N_PRS_FLOWS\t\t52\n#define MVPP2_N_RFS_ENTRIES_PER_FLOW\t4\n\n \n#define MVPP2_N_RFS_RULES\t\t(MVPP2_N_RFS_ENTRIES_PER_FLOW * 7)\n\n \n#define MVPP22_N_RSS_TABLES\t\t8\n#define MVPP22_RSS_TABLE_ENTRIES\t32\n\n \n#define MVPP2_MAX_L3_ADDR_SIZE\t\t16\n\n \n#define MVPP2_F_LOOPBACK\t\tBIT(0)\n#define MVPP2_F_DT_COMPAT\t\tBIT(1)\n\n \nenum mvpp2_tag_type {\n\tMVPP2_TAG_TYPE_NONE = 0,\n\tMVPP2_TAG_TYPE_MH   = 1,\n\tMVPP2_TAG_TYPE_DSA  = 2,\n\tMVPP2_TAG_TYPE_EDSA = 3,\n\tMVPP2_TAG_TYPE_VLAN = 4,\n\tMVPP2_TAG_TYPE_LAST = 5\n};\n\n \nenum mvpp2_prs_l2_cast {\n\tMVPP2_PRS_L2_UNI_CAST,\n\tMVPP2_PRS_L2_MULTI_CAST,\n};\n\n \nenum mvpp2_prs_l3_cast {\n\tMVPP2_PRS_L3_UNI_CAST,\n\tMVPP2_PRS_L3_MULTI_CAST,\n\tMVPP2_PRS_L3_BROAD_CAST\n};\n\n \n#define MVPP22_PTP_DESC_MASK_LOW\t0xfff\n\n \nenum mvpp22_ptp_action {\n\tMVPP22_PTP_ACTION_NONE = 0,\n\tMVPP22_PTP_ACTION_FORWARD = 1,\n\tMVPP22_PTP_ACTION_CAPTURE = 3,\n\t \n\tMVPP22_PTP_ACTION_ADDTIME = 4,\n\tMVPP22_PTP_ACTION_ADDCORRECTEDTIME = 5,\n\tMVPP22_PTP_ACTION_CAPTUREADDTIME = 6,\n\tMVPP22_PTP_ACTION_CAPTUREADDCORRECTEDTIME = 7,\n\tMVPP22_PTP_ACTION_ADDINGRESSTIME = 8,\n\tMVPP22_PTP_ACTION_CAPTUREADDINGRESSTIME = 9,\n\tMVPP22_PTP_ACTION_CAPTUREINGRESSTIME = 10,\n};\n\n \nenum mvpp22_ptp_packet_format {\n\tMVPP22_PTP_PKT_FMT_PTPV2 = 0,\n\tMVPP22_PTP_PKT_FMT_PTPV1 = 1,\n\tMVPP22_PTP_PKT_FMT_Y1731 = 2,\n\tMVPP22_PTP_PKT_FMT_NTPTS = 3,\n\tMVPP22_PTP_PKT_FMT_NTPRX = 4,\n\tMVPP22_PTP_PKT_FMT_NTPTX = 5,\n\tMVPP22_PTP_PKT_FMT_TWAMP = 6,\n};\n\n#define MVPP22_PTP_ACTION(x)\t\t(((x) & 15) << 0)\n#define MVPP22_PTP_PACKETFORMAT(x)\t(((x) & 7) << 4)\n#define MVPP22_PTP_MACTIMESTAMPINGEN\tBIT(11)\n#define MVPP22_PTP_TIMESTAMPENTRYID(x)\t(((x) & 31) << 12)\n#define MVPP22_PTP_TIMESTAMPQUEUESELECT\tBIT(18)\n\n \n#define MVPP2_BM_JUMBO_BUF_NUM\t\t2048\n#define MVPP2_BM_LONG_BUF_NUM\t\t2048\n#define MVPP2_BM_SHORT_BUF_NUM\t\t2048\n#define MVPP2_BM_POOL_SIZE_MAX\t\t(16*1024 - MVPP2_BM_POOL_PTR_ALIGN/4)\n#define MVPP2_BM_POOL_PTR_ALIGN\t\t128\n#define MVPP2_BM_MAX_POOLS\t\t8\n\n \n#define MVPP2_BM_COOKIE_POOL_OFFS\t8\n#define MVPP2_BM_COOKIE_CPU_OFFS\t24\n\n#define MVPP2_BM_SHORT_FRAME_SIZE\t736\t \n#define MVPP2_BM_LONG_FRAME_SIZE\t2240\t \n#define MVPP2_BM_JUMBO_FRAME_SIZE\t10432\t \n \n#define MVPP2_BM_SHORT_PKT_SIZE\tMVPP2_RX_MAX_PKT_SIZE(MVPP2_BM_SHORT_FRAME_SIZE)\n#define MVPP2_BM_LONG_PKT_SIZE\tMVPP2_RX_MAX_PKT_SIZE(MVPP2_BM_LONG_FRAME_SIZE)\n#define MVPP2_BM_JUMBO_PKT_SIZE\tMVPP2_RX_MAX_PKT_SIZE(MVPP2_BM_JUMBO_FRAME_SIZE)\n\n#define MVPP21_ADDR_SPACE_SZ\t\t0\n#define MVPP22_ADDR_SPACE_SZ\t\tSZ_64K\n\n#define MVPP2_MAX_THREADS\t\t9\n#define MVPP2_MAX_QVECS\t\t\tMVPP2_MAX_THREADS\n\n \n#define MVPP21_MIB_COUNTERS_OFFSET\t\t0x1000\n#define MVPP21_MIB_COUNTERS_PORT_SZ\t\t0x400\n#define MVPP22_MIB_COUNTERS_OFFSET\t\t0x0\n#define MVPP22_MIB_COUNTERS_PORT_SZ\t\t0x100\n\n#define MVPP2_MIB_GOOD_OCTETS_RCVD\t\t0x0\n#define MVPP2_MIB_BAD_OCTETS_RCVD\t\t0x8\n#define MVPP2_MIB_CRC_ERRORS_SENT\t\t0xc\n#define MVPP2_MIB_UNICAST_FRAMES_RCVD\t\t0x10\n#define MVPP2_MIB_BROADCAST_FRAMES_RCVD\t\t0x18\n#define MVPP2_MIB_MULTICAST_FRAMES_RCVD\t\t0x1c\n#define MVPP2_MIB_FRAMES_64_OCTETS\t\t0x20\n#define MVPP2_MIB_FRAMES_65_TO_127_OCTETS\t0x24\n#define MVPP2_MIB_FRAMES_128_TO_255_OCTETS\t0x28\n#define MVPP2_MIB_FRAMES_256_TO_511_OCTETS\t0x2c\n#define MVPP2_MIB_FRAMES_512_TO_1023_OCTETS\t0x30\n#define MVPP2_MIB_FRAMES_1024_TO_MAX_OCTETS\t0x34\n#define MVPP2_MIB_GOOD_OCTETS_SENT\t\t0x38\n#define MVPP2_MIB_UNICAST_FRAMES_SENT\t\t0x40\n#define MVPP2_MIB_MULTICAST_FRAMES_SENT\t\t0x48\n#define MVPP2_MIB_BROADCAST_FRAMES_SENT\t\t0x4c\n#define MVPP2_MIB_FC_SENT\t\t\t0x54\n#define MVPP2_MIB_FC_RCVD\t\t\t0x58\n#define MVPP2_MIB_RX_FIFO_OVERRUN\t\t0x5c\n#define MVPP2_MIB_UNDERSIZE_RCVD\t\t0x60\n#define MVPP2_MIB_FRAGMENTS_RCVD\t\t0x64\n#define MVPP2_MIB_OVERSIZE_RCVD\t\t\t0x68\n#define MVPP2_MIB_JABBER_RCVD\t\t\t0x6c\n#define MVPP2_MIB_MAC_RCV_ERROR\t\t\t0x70\n#define MVPP2_MIB_BAD_CRC_EVENT\t\t\t0x74\n#define MVPP2_MIB_COLLISION\t\t\t0x78\n#define MVPP2_MIB_LATE_COLLISION\t\t0x7c\n\n#define MVPP2_MIB_COUNTERS_STATS_DELAY\t\t(1 * HZ)\n\n#define MVPP2_DESC_DMA_MASK\tDMA_BIT_MASK(40)\n\n \n#define MVPP2_B_HDR_INFO_MC_ID_MASK\t0xfff\n#define MVPP2_B_HDR_INFO_MC_ID(info)\t((info) & MVPP2_B_HDR_INFO_MC_ID_MASK)\n#define MVPP2_B_HDR_INFO_LAST_OFFS\t12\n#define MVPP2_B_HDR_INFO_LAST_MASK\tBIT(12)\n#define MVPP2_B_HDR_INFO_IS_LAST(info) \\\n\t   (((info) & MVPP2_B_HDR_INFO_LAST_MASK) >> MVPP2_B_HDR_INFO_LAST_OFFS)\n\nstruct mvpp2_tai;\n\n \nstruct mvpp2_dbgfs_entries;\n\nstruct mvpp2_rss_table {\n\tu32 indir[MVPP22_RSS_TABLE_ENTRIES];\n};\n\nstruct mvpp2_buff_hdr {\n\t__le32 next_phys_addr;\n\t__le32 next_dma_addr;\n\t__le16 byte_count;\n\t__le16 info;\n\t__le16 reserved1;\t \n\tu8 next_phys_addr_high;\n\tu8 next_dma_addr_high;\n\t__le16 reserved2;\n\t__le16 reserved3;\n\t__le16 reserved4;\n\t__le16 reserved5;\n};\n\n \nstruct mvpp2 {\n\t \n\tvoid __iomem *lms_base;\n\tvoid __iomem *iface_base;\n\tvoid __iomem *cm3_base;\n\n\t \n\tvoid __iomem *swth_base[MVPP2_MAX_THREADS];\n\n\t \n\tstruct regmap *sysctrl_base;\n\n\t \n\tstruct clk *pp_clk;\n\tstruct clk *gop_clk;\n\tstruct clk *mg_clk;\n\tstruct clk *mg_core_clk;\n\tstruct clk *axi_clk;\n\n\t \n\tint port_count;\n\tstruct mvpp2_port *port_list[MVPP2_MAX_PORTS];\n\t \n\tunsigned long port_map;\n\n\tstruct mvpp2_tai *tai;\n\n\t \n\tunsigned int nthreads;\n\t \n\tunsigned long lock_map;\n\n\t \n\tstruct mvpp2_tx_queue *aggr_txqs;\n\n\t \n\tint percpu_pools;\n\n\t \n\tstruct mvpp2_bm_pool *bm_pools;\n\n\t \n\tstruct mvpp2_prs_shadow *prs_shadow;\n\t \n\tbool *prs_double_vlans;\n\n\t \n\tu32 tclk;\n\n\t \n\tenum { MVPP21, MVPP22, MVPP23 } hw_version;\n\n\t \n\tunsigned int max_port_rxqs;\n\n\t \n\tchar queue_name[30];\n\tstruct workqueue_struct *stats_queue;\n\n\t \n\tstruct dentry *dbgfs_dir;\n\n\t \n\tstruct mvpp2_dbgfs_entries *dbgfs_entries;\n\n\t \n\tstruct mvpp2_rss_table *rss_tables[MVPP22_N_RSS_TABLES];\n\n\t \n\tstruct page_pool *page_pool[MVPP2_PORT_MAX_RXQ];\n\n\t \n\tbool global_tx_fc;\n\n\t \n\tspinlock_t mss_spinlock;\n};\n\nstruct mvpp2_pcpu_stats {\n\tstruct\tu64_stats_sync syncp;\n\tu64\trx_packets;\n\tu64\trx_bytes;\n\tu64\ttx_packets;\n\tu64\ttx_bytes;\n\t \n\tu64\txdp_redirect;\n\tu64\txdp_pass;\n\tu64\txdp_drop;\n\tu64\txdp_xmit;\n\tu64\txdp_xmit_err;\n\tu64\txdp_tx;\n\tu64\txdp_tx_err;\n};\n\n \nstruct mvpp2_port_pcpu {\n\tstruct hrtimer tx_done_timer;\n\tstruct net_device *dev;\n\tbool timer_scheduled;\n};\n\nstruct mvpp2_queue_vector {\n\tint irq;\n\tstruct napi_struct napi;\n\tenum { MVPP2_QUEUE_VECTOR_SHARED, MVPP2_QUEUE_VECTOR_PRIVATE } type;\n\tint sw_thread_id;\n\tu16 sw_thread_mask;\n\tint first_rxq;\n\tint nrxqs;\n\tu32 pending_cause_rx;\n\tstruct mvpp2_port *port;\n\tstruct cpumask *mask;\n};\n\n \nstruct mvpp2_rfs_rule {\n\t \n\tint loc;\n\n\t \n\tint flow_type;\n\n\t \n\tint c2_index;\n\n\t \n\tu16 hek_fields;\n\n\t \n\tu8 engine;\n\n\t \n\tu64 c2_tcam;\n\tu64 c2_tcam_mask;\n\n\tstruct flow_rule *flow;\n};\n\nstruct mvpp2_ethtool_fs {\n\tstruct mvpp2_rfs_rule rule;\n\tstruct ethtool_rxnfc rxnfc;\n};\n\nstruct mvpp2_hwtstamp_queue {\n\tstruct sk_buff *skb[32];\n\tu8 next;\n};\n\nstruct mvpp2_port {\n\tu8 id;\n\n\t \n\tint gop_id;\n\n\tint port_irq;\n\n\tstruct mvpp2 *priv;\n\n\t \n\tstruct fwnode_handle *fwnode;\n\n\t \n\tvoid __iomem *base;\n\tvoid __iomem *stats_base;\n\n\tstruct mvpp2_rx_queue **rxqs;\n\tunsigned int nrxqs;\n\tstruct mvpp2_tx_queue **txqs;\n\tunsigned int ntxqs;\n\tstruct net_device *dev;\n\n\tstruct bpf_prog *xdp_prog;\n\n\tint pkt_size;\n\n\t \n\tstruct mvpp2_port_pcpu __percpu *pcpu;\n\n\t \n\tspinlock_t bm_lock[MVPP2_MAX_THREADS];\n\tspinlock_t tx_lock[MVPP2_MAX_THREADS];\n\n\t \n\tunsigned long flags;\n\n\tu16 tx_ring_size;\n\tu16 rx_ring_size;\n\tstruct mvpp2_pcpu_stats __percpu *stats;\n\tu64 *ethtool_stats;\n\n\tunsigned long state;\n\n\t \n\tstruct mutex gather_stats_lock;\n\tstruct delayed_work stats_work;\n\n\tstruct device_node *of_node;\n\n\tphy_interface_t phy_interface;\n\tstruct phylink *phylink;\n\tstruct phylink_config phylink_config;\n\tstruct phylink_pcs pcs_gmac;\n\tstruct phylink_pcs pcs_xlg;\n\tstruct phy *comphy;\n\n\tstruct mvpp2_bm_pool *pool_long;\n\tstruct mvpp2_bm_pool *pool_short;\n\n\t \n\tu8 first_rxq;\n\n\tstruct mvpp2_queue_vector qvecs[MVPP2_MAX_QVECS];\n\tunsigned int nqvecs;\n\tbool has_tx_irqs;\n\n\tu32 tx_time_coal;\n\n\t \n\tstruct mvpp2_ethtool_fs *rfs_rules[MVPP2_N_RFS_ENTRIES_PER_FLOW];\n\tint n_rfs_rules;\n\n\t \n\tint rss_ctx[MVPP22_N_RSS_TABLES];\n\n\tbool hwtstamp;\n\tbool rx_hwtstamp;\n\tenum hwtstamp_tx_types tx_hwtstamp_type;\n\tstruct mvpp2_hwtstamp_queue tx_hwtstamp_queue[2];\n\n\t \n\tbool tx_fc;\n};\n\n \n\n#define MVPP2_TXD_L3_OFF_SHIFT\t\t0\n#define MVPP2_TXD_IP_HLEN_SHIFT\t\t8\n#define MVPP2_TXD_L4_CSUM_FRAG\t\tBIT(13)\n#define MVPP2_TXD_L4_CSUM_NOT\t\tBIT(14)\n#define MVPP2_TXD_IP_CSUM_DISABLE\tBIT(15)\n#define MVPP2_TXD_PADDING_DISABLE\tBIT(23)\n#define MVPP2_TXD_L4_UDP\t\tBIT(24)\n#define MVPP2_TXD_L3_IP6\t\tBIT(26)\n#define MVPP2_TXD_L_DESC\t\tBIT(28)\n#define MVPP2_TXD_F_DESC\t\tBIT(29)\n\n#define MVPP2_RXD_ERR_SUMMARY\t\tBIT(15)\n#define MVPP2_RXD_ERR_CODE_MASK\t\t(BIT(13) | BIT(14))\n#define MVPP2_RXD_ERR_CRC\t\t0x0\n#define MVPP2_RXD_ERR_OVERRUN\t\tBIT(13)\n#define MVPP2_RXD_ERR_RESOURCE\t\t(BIT(13) | BIT(14))\n#define MVPP2_RXD_BM_POOL_ID_OFFS\t16\n#define MVPP2_RXD_BM_POOL_ID_MASK\t(BIT(16) | BIT(17) | BIT(18))\n#define MVPP2_RXD_HWF_SYNC\t\tBIT(21)\n#define MVPP2_RXD_L4_CSUM_OK\t\tBIT(22)\n#define MVPP2_RXD_IP4_HEADER_ERR\tBIT(24)\n#define MVPP2_RXD_L4_TCP\t\tBIT(25)\n#define MVPP2_RXD_L4_UDP\t\tBIT(26)\n#define MVPP2_RXD_L3_IP4\t\tBIT(28)\n#define MVPP2_RXD_L3_IP6\t\tBIT(30)\n#define MVPP2_RXD_BUF_HDR\t\tBIT(31)\n\n \nstruct mvpp21_tx_desc {\n\t__le32 command;\t\t \n\tu8  packet_offset;\t \n\tu8  phys_txq;\t\t \n\t__le16 data_size;\t \n\t__le32 buf_dma_addr;\t \n\t__le32 buf_cookie;\t \n\t__le32 reserved1[3];\t \n\t__le32 reserved2;\t \n};\n\n \nstruct mvpp21_rx_desc {\n\t__le32 status;\t\t \n\t__le16 reserved1;\t \n\t__le16 data_size;\t \n\t__le32 buf_dma_addr;\t \n\t__le32 buf_cookie;\t \n\t__le16 reserved2;\t \n\t__le16 reserved3;\t \n\tu8  reserved4;\t\t \n\tu8  reserved5;\n\t__le16 reserved6;\t \n\t__le32 reserved7;\t \n\t__le32 reserved8;\n};\n\n \nstruct mvpp22_tx_desc {\n\t__le32 command;\n\tu8  packet_offset;\n\tu8  phys_txq;\n\t__le16 data_size;\n\t__le32 ptp_descriptor;\n\t__le32 reserved2;\n\t__le64 buf_dma_addr_ptp;\n\t__le64 buf_cookie_misc;\n};\n\n \nstruct mvpp22_rx_desc {\n\t__le32 status;\n\t__le16 reserved1;\n\t__le16 data_size;\n\t__le32 reserved2;\n\t__le32 timestamp;\n\t__le64 buf_dma_addr_key_hash;\n\t__le64 buf_cookie_misc;\n};\n\n \nstruct mvpp2_tx_desc {\n\tunion {\n\t\tstruct mvpp21_tx_desc pp21;\n\t\tstruct mvpp22_tx_desc pp22;\n\t};\n};\n\nstruct mvpp2_rx_desc {\n\tunion {\n\t\tstruct mvpp21_rx_desc pp21;\n\t\tstruct mvpp22_rx_desc pp22;\n\t};\n};\n\nenum mvpp2_tx_buf_type {\n\tMVPP2_TYPE_SKB,\n\tMVPP2_TYPE_XDP_TX,\n\tMVPP2_TYPE_XDP_NDO,\n};\n\nstruct mvpp2_txq_pcpu_buf {\n\tenum mvpp2_tx_buf_type type;\n\n\t \n\tunion {\n\t\tstruct xdp_frame *xdpf;\n\t\tstruct sk_buff *skb;\n\t};\n\n\t \n\tdma_addr_t dma;\n\n\t \n\tsize_t size;\n};\n\n \nstruct mvpp2_txq_pcpu {\n\tunsigned int thread;\n\n\t \n\tint size;\n\n\t \n\tint count;\n\n\tint wake_threshold;\n\tint stop_threshold;\n\n\t \n\tint reserved_num;\n\n\t \n\tstruct mvpp2_txq_pcpu_buf *buffs;\n\n\t \n\tint txq_put_index;\n\n\t \n\tint txq_get_index;\n\n\t \n\tchar *tso_headers;\n\tdma_addr_t tso_headers_dma;\n};\n\nstruct mvpp2_tx_queue {\n\t \n\tu8 id;\n\n\t \n\tu8 log_id;\n\n\t \n\tint size;\n\n\t \n\tint count;\n\n\t \n\tstruct mvpp2_txq_pcpu __percpu *pcpu;\n\n\tu32 done_pkts_coal;\n\n\t \n\tstruct mvpp2_tx_desc *descs;\n\n\t \n\tdma_addr_t descs_dma;\n\n\t \n\tint last_desc;\n\n\t \n\tint next_desc_to_proc;\n};\n\nstruct mvpp2_rx_queue {\n\t \n\tu8 id;\n\n\t \n\tint size;\n\n\tu32 pkts_coal;\n\tu32 time_coal;\n\n\t \n\tstruct mvpp2_rx_desc *descs;\n\n\t \n\tdma_addr_t descs_dma;\n\n\t \n\tint last_desc;\n\n\t \n\tint next_desc_to_proc;\n\n\t \n\tint port;\n\n\t \n\tint logic_rxq;\n\n\t \n\tstruct xdp_rxq_info xdp_rxq_short;\n\tstruct xdp_rxq_info xdp_rxq_long;\n};\n\nstruct mvpp2_bm_pool {\n\t \n\tint id;\n\n\t \n\tint size;\n\t \n\tint size_bytes;\n\t \n\tint buf_num;\n\t \n\tint buf_size;\n\t \n\tint pkt_size;\n\tint frag_size;\n\n\t \n\tu32 *virt_addr;\n\t \n\tdma_addr_t dma_addr;\n\n\t \n\tu32 port_map;\n};\n\n#define IS_TSO_HEADER(txq_pcpu, addr) \\\n\t((addr) >= (txq_pcpu)->tso_headers_dma && \\\n\t (addr) < (txq_pcpu)->tso_headers_dma + \\\n\t (txq_pcpu)->size * TSO_HEADER_SIZE)\n\n#define MVPP2_DRIVER_NAME \"mvpp2\"\n#define MVPP2_DRIVER_VERSION \"1.0\"\n\nvoid mvpp2_write(struct mvpp2 *priv, u32 offset, u32 data);\nu32 mvpp2_read(struct mvpp2 *priv, u32 offset);\n\nvoid mvpp2_dbgfs_init(struct mvpp2 *priv, const char *name);\n\nvoid mvpp2_dbgfs_cleanup(struct mvpp2 *priv);\nvoid mvpp2_dbgfs_exit(void);\n\nvoid mvpp23_rx_fifo_fc_en(struct mvpp2 *priv, int port, bool en);\n\n#ifdef CONFIG_MVPP2_PTP\nint mvpp22_tai_probe(struct device *dev, struct mvpp2 *priv);\nvoid mvpp22_tai_tstamp(struct mvpp2_tai *tai, u32 tstamp,\n\t\t       struct skb_shared_hwtstamps *hwtstamp);\nvoid mvpp22_tai_start(struct mvpp2_tai *tai);\nvoid mvpp22_tai_stop(struct mvpp2_tai *tai);\nint mvpp22_tai_ptp_clock_index(struct mvpp2_tai *tai);\n#else\nstatic inline int mvpp22_tai_probe(struct device *dev, struct mvpp2 *priv)\n{\n\treturn 0;\n}\nstatic inline void mvpp22_tai_tstamp(struct mvpp2_tai *tai, u32 tstamp,\n\t\t\t\t     struct skb_shared_hwtstamps *hwtstamp)\n{\n}\nstatic inline void mvpp22_tai_start(struct mvpp2_tai *tai)\n{\n}\nstatic inline void mvpp22_tai_stop(struct mvpp2_tai *tai)\n{\n}\nstatic inline int mvpp22_tai_ptp_clock_index(struct mvpp2_tai *tai)\n{\n\treturn -1;\n}\n#endif\n\nstatic inline bool mvpp22_rx_hwtstamping(struct mvpp2_port *port)\n{\n\treturn IS_ENABLED(CONFIG_MVPP2_PTP) && port->rx_hwtstamp;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}