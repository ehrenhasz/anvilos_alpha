{
  "module_name": "lmac_common.h",
  "hash_id": "182a9bcfe02ec119ce8faddaf87a6443475c2e5224d942864f12077553f1e6fc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/marvell/octeontx2/af/lmac_common.h",
  "human_readable_source": " \n \n\n#ifndef LMAC_COMMON_H\n#define LMAC_COMMON_H\n\n#include \"rvu.h\"\n#include \"cgx.h\"\n \nstruct lmac {\n\twait_queue_head_t wq_cmd_cmplt;\n\t \n\tstruct mutex cmd_lock;\n\tu64 resp;\n\tstruct cgx_link_user_info link_info;\n\tstruct rsrc_bmap mac_to_index_bmap;\n\tstruct rsrc_bmap rx_fc_pfvf_bmap;\n\tstruct rsrc_bmap tx_fc_pfvf_bmap;\n\tstruct cgx_event_cb event_cb;\n\t \n\tspinlock_t event_cb_lock;\n\tstruct cgx *cgx;\n\tu8 mcast_filters_count;\n\tu8 lmac_id;\n\tu8 lmac_type;\n\tbool cmd_pend;\n\tchar *name;\n};\n\n \nstruct mac_ops {\n\tchar\t\t       *name;\n\t \n\tu64\t\t\tcsr_offset;\n\t \n\tu64\t\t\tint_register;\n\tu64\t\t\tint_set_reg;\n\t \n\tu8\t\t\tlmac_offset;\n\tu8\t\t\tirq_offset;\n\tu8\t\t\tint_ena_bit;\n\tu8\t\t\tlmac_fwi;\n\tu32\t\t\tfifo_len;\n\tbool\t\t\tnon_contiguous_serdes_lane;\n\t \n\tu8\t\t\trx_stats_cnt;\n\tu8\t\t\ttx_stats_cnt;\n\t \n\tu64\t\t\trxid_map_offset;\n\tu8\t\t\tdmac_filter_count;\n\t \n\tint\t\t\t(*get_nr_lmacs)(void *cgx);\n\tu8                      (*get_lmac_type)(void *cgx, int lmac_id);\n\tu32                     (*lmac_fifo_len)(void *cgx, int lmac_id);\n\tint                     (*mac_lmac_intl_lbk)(void *cgx, int lmac_id,\n\t\t\t\t\t\t     bool enable);\n\t \n\tint\t\t\t(*mac_get_rx_stats)(void *cgx, int lmac_id,\n\t\t\t\t\t\t    int idx, u64 *rx_stat);\n\tint\t\t\t(*mac_get_tx_stats)(void *cgx, int lmac_id,\n\t\t\t\t\t\t    int idx, u64 *tx_stat);\n\n\t \n\tvoid\t\t\t(*mac_enadis_rx_pause_fwding)(void *cgxd,\n\t\t\t\t\t\t\t      int lmac_id,\n\t\t\t\t\t\t\t      bool enable);\n\n\tint\t\t\t(*mac_get_pause_frm_status)(void *cgxd,\n\t\t\t\t\t\t\t    int lmac_id,\n\t\t\t\t\t\t\t    u8 *tx_pause,\n\t\t\t\t\t\t\t    u8 *rx_pause);\n\n\tint\t\t\t(*mac_enadis_pause_frm)(void *cgxd,\n\t\t\t\t\t\t\tint lmac_id,\n\t\t\t\t\t\t\tu8 tx_pause,\n\t\t\t\t\t\t\tu8 rx_pause);\n\n\tvoid\t\t\t(*mac_pause_frm_config)(void  *cgxd,\n\t\t\t\t\t\t\tint lmac_id,\n\t\t\t\t\t\t\tbool enable);\n\n\t \n\tvoid\t\t\t(*mac_enadis_ptp_config)(void  *cgxd,\n\t\t\t\t\t\t\t int lmac_id,\n\t\t\t\t\t\t\t bool enable);\n\n\tint\t\t\t(*mac_rx_tx_enable)(void *cgxd, int lmac_id, bool enable);\n\tint\t\t\t(*mac_tx_enable)(void *cgxd, int lmac_id, bool enable);\n\tint                     (*pfc_config)(void *cgxd, int lmac_id,\n\t\t\t\t\t      u8 tx_pause, u8 rx_pause, u16 pfc_en);\n\n\tint                     (*mac_get_pfc_frm_cfg)(void *cgxd, int lmac_id,\n\t\t\t\t\t\t       u8 *tx_pause, u8 *rx_pause);\n\tint\t\t\t(*mac_reset)(void *cgxd, int lmac_id, u8 pf_req_flr);\n\n\t \n\tint\t\t\t(*get_fec_stats)(void *cgxd, int lmac_id,\n\t\t\t\t\t\t struct cgx_fec_stats_rsp *rsp);\n};\n\nstruct cgx {\n\tvoid __iomem\t\t*reg_base;\n\tstruct pci_dev\t\t*pdev;\n\tu8\t\t\tcgx_id;\n\tu8\t\t\tlmac_count;\n\t \n\tu8\t\t\tmax_lmac_per_mac;\n#define MAX_LMAC_COUNT\t\t8\n\tstruct lmac             *lmac_idmap[MAX_LMAC_COUNT];\n\tstruct\t\t\twork_struct cgx_cmd_work;\n\tstruct\t\t\tworkqueue_struct *cgx_cmd_workq;\n\tstruct list_head\tcgx_list;\n\tu64\t\t\thw_features;\n\tstruct mac_ops\t\t*mac_ops;\n\tunsigned long\t\tlmac_bmap;  \n\t \n\tstruct mutex\t\tlock;\n};\n\ntypedef struct cgx rpm_t;\n\n \nvoid cgx_write(struct cgx *cgx, u64 lmac, u64 offset, u64 val);\nu64 cgx_read(struct cgx *cgx, u64 lmac, u64 offset);\nstruct lmac *lmac_pdata(u8 lmac_id, struct cgx *cgx);\nint cgx_fwi_cmd_send(u64 req, u64 *resp, struct lmac *lmac);\nint cgx_fwi_cmd_generic(u64 req, u64 *resp, struct cgx *cgx, int lmac_id);\nbool is_lmac_valid(struct cgx *cgx, int lmac_id);\nstruct mac_ops *rpm_get_mac_ops(struct cgx *cgx);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}