{
  "module_name": "qos.h",
  "hash_id": "b304acf97c0e66774e2b1e8d19dfc8348a945a103bcc423c62cc2043194b71c6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/marvell/octeontx2/nic/qos.h",
  "human_readable_source": " \n \n#ifndef OTX2_QOS_H\n#define OTX2_QOS_H\n\n#include <linux/types.h>\n#include <linux/netdevice.h>\n#include <linux/rhashtable.h>\n\n#define OTX2_QOS_MAX_LVL\t\t4\n#define OTX2_QOS_MAX_PRIO\t\t7\n#define OTX2_QOS_MAX_LEAF_NODES                16\n\nenum qos_smq_operations {\n\tQOS_CFG_SQ,\n\tQOS_SMQ_FLUSH,\n};\n\nu64 otx2_get_txschq_rate_regval(struct otx2_nic *nic, u64 maxrate, u32 burst);\n\nint otx2_setup_tc_htb(struct net_device *ndev, struct tc_htb_qopt_offload *htb);\nint otx2_qos_get_qid(struct otx2_nic *pfvf);\nvoid otx2_qos_free_qid(struct otx2_nic *pfvf, int qidx);\nint otx2_qos_enable_sq(struct otx2_nic *pfvf, int qidx);\nvoid otx2_qos_disable_sq(struct otx2_nic *pfvf, int qidx);\n\nstruct otx2_qos_cfg {\n\tu16 schq[NIX_TXSCH_LVL_CNT];\n\tu16 schq_contig[NIX_TXSCH_LVL_CNT];\n\tint static_node_pos[NIX_TXSCH_LVL_CNT];\n\tint dwrr_node_pos[NIX_TXSCH_LVL_CNT];\n\tu16 schq_contig_list[NIX_TXSCH_LVL_CNT][MAX_TXSCHQ_PER_FUNC];\n\tu16 schq_list[NIX_TXSCH_LVL_CNT][MAX_TXSCHQ_PER_FUNC];\n\tbool schq_index_used[NIX_TXSCH_LVL_CNT][MAX_TXSCHQ_PER_FUNC];\n};\n\nstruct otx2_qos {\n\tDECLARE_HASHTABLE(qos_hlist, order_base_2(OTX2_QOS_MAX_LEAF_NODES));\n\tstruct mutex qos_lock;  \n\tu16 qid_to_sqmap[OTX2_QOS_MAX_LEAF_NODES];\n\tstruct list_head qos_tree;\n\tDECLARE_BITMAP(qos_sq_bmap, OTX2_QOS_MAX_LEAF_NODES);\n\tu16 maj_id;\n\tu16 defcls;\n\tu8  link_cfg_lvl;  \n};\n\nstruct otx2_qos_node {\n\tstruct list_head list;  \n\tstruct list_head child_list;\n\tstruct list_head child_schq_list;\n\tstruct hlist_node hlist;\n\tDECLARE_BITMAP(prio_bmap, OTX2_QOS_MAX_PRIO + 1);\n\tstruct otx2_qos_node *parent;\t \n\tu64 rate;  \n\tu64 ceil;\n\tu32 classid;\n\tu32 prio;\n\tu32 quantum;\n\t \n\tu16 schq;\n\tu16 qid;\n\tu16 prio_anchor;\n\tu16 max_static_prio;\n\tu16 child_dwrr_cnt;\n\tu16 child_static_cnt;\n\tu16 child_dwrr_prio;\n\tu16 txschq_idx;\t\t\t \n\tu8 level;\n\tbool is_static;\n};\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}