{
  "module_name": "gve_adminq.h",
  "hash_id": "c791e11b45875594ff7609097168648ea6ac13658f0f600d1de2f324744f9551",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/google/gve/gve_adminq.h",
  "human_readable_source": " \n\n#ifndef _GVE_ADMINQ_H\n#define _GVE_ADMINQ_H\n\n#include <linux/build_bug.h>\n\n \nenum gve_adminq_opcodes {\n\tGVE_ADMINQ_DESCRIBE_DEVICE\t\t= 0x1,\n\tGVE_ADMINQ_CONFIGURE_DEVICE_RESOURCES\t= 0x2,\n\tGVE_ADMINQ_REGISTER_PAGE_LIST\t\t= 0x3,\n\tGVE_ADMINQ_UNREGISTER_PAGE_LIST\t\t= 0x4,\n\tGVE_ADMINQ_CREATE_TX_QUEUE\t\t= 0x5,\n\tGVE_ADMINQ_CREATE_RX_QUEUE\t\t= 0x6,\n\tGVE_ADMINQ_DESTROY_TX_QUEUE\t\t= 0x7,\n\tGVE_ADMINQ_DESTROY_RX_QUEUE\t\t= 0x8,\n\tGVE_ADMINQ_DECONFIGURE_DEVICE_RESOURCES\t= 0x9,\n\tGVE_ADMINQ_SET_DRIVER_PARAMETER\t\t= 0xB,\n\tGVE_ADMINQ_REPORT_STATS\t\t\t= 0xC,\n\tGVE_ADMINQ_REPORT_LINK_SPEED\t\t= 0xD,\n\tGVE_ADMINQ_GET_PTYPE_MAP\t\t= 0xE,\n\tGVE_ADMINQ_VERIFY_DRIVER_COMPATIBILITY\t= 0xF,\n};\n\n \nenum gve_adminq_statuses {\n\tGVE_ADMINQ_COMMAND_UNSET\t\t\t= 0x0,\n\tGVE_ADMINQ_COMMAND_PASSED\t\t\t= 0x1,\n\tGVE_ADMINQ_COMMAND_ERROR_ABORTED\t\t= 0xFFFFFFF0,\n\tGVE_ADMINQ_COMMAND_ERROR_ALREADY_EXISTS\t\t= 0xFFFFFFF1,\n\tGVE_ADMINQ_COMMAND_ERROR_CANCELLED\t\t= 0xFFFFFFF2,\n\tGVE_ADMINQ_COMMAND_ERROR_DATALOSS\t\t= 0xFFFFFFF3,\n\tGVE_ADMINQ_COMMAND_ERROR_DEADLINE_EXCEEDED\t= 0xFFFFFFF4,\n\tGVE_ADMINQ_COMMAND_ERROR_FAILED_PRECONDITION\t= 0xFFFFFFF5,\n\tGVE_ADMINQ_COMMAND_ERROR_INTERNAL_ERROR\t\t= 0xFFFFFFF6,\n\tGVE_ADMINQ_COMMAND_ERROR_INVALID_ARGUMENT\t= 0xFFFFFFF7,\n\tGVE_ADMINQ_COMMAND_ERROR_NOT_FOUND\t\t= 0xFFFFFFF8,\n\tGVE_ADMINQ_COMMAND_ERROR_OUT_OF_RANGE\t\t= 0xFFFFFFF9,\n\tGVE_ADMINQ_COMMAND_ERROR_PERMISSION_DENIED\t= 0xFFFFFFFA,\n\tGVE_ADMINQ_COMMAND_ERROR_UNAUTHENTICATED\t= 0xFFFFFFFB,\n\tGVE_ADMINQ_COMMAND_ERROR_RESOURCE_EXHAUSTED\t= 0xFFFFFFFC,\n\tGVE_ADMINQ_COMMAND_ERROR_UNAVAILABLE\t\t= 0xFFFFFFFD,\n\tGVE_ADMINQ_COMMAND_ERROR_UNIMPLEMENTED\t\t= 0xFFFFFFFE,\n\tGVE_ADMINQ_COMMAND_ERROR_UNKNOWN_ERROR\t\t= 0xFFFFFFFF,\n};\n\n#define GVE_ADMINQ_DEVICE_DESCRIPTOR_VERSION 1\n\n \n\nstruct gve_adminq_describe_device {\n\t__be64 device_descriptor_addr;\n\t__be32 device_descriptor_version;\n\t__be32 available_length;\n};\n\nstatic_assert(sizeof(struct gve_adminq_describe_device) == 16);\n\nstruct gve_device_descriptor {\n\t__be64 max_registered_pages;\n\t__be16 reserved1;\n\t__be16 tx_queue_entries;\n\t__be16 rx_queue_entries;\n\t__be16 default_num_queues;\n\t__be16 mtu;\n\t__be16 counters;\n\t__be16 tx_pages_per_qpl;\n\t__be16 rx_pages_per_qpl;\n\tu8  mac[ETH_ALEN];\n\t__be16 num_device_options;\n\t__be16 total_length;\n\tu8  reserved2[6];\n};\n\nstatic_assert(sizeof(struct gve_device_descriptor) == 40);\n\nstruct gve_device_option {\n\t__be16 option_id;\n\t__be16 option_length;\n\t__be32 required_features_mask;\n};\n\nstatic_assert(sizeof(struct gve_device_option) == 8);\n\nstruct gve_device_option_gqi_rda {\n\t__be32 supported_features_mask;\n};\n\nstatic_assert(sizeof(struct gve_device_option_gqi_rda) == 4);\n\nstruct gve_device_option_gqi_qpl {\n\t__be32 supported_features_mask;\n};\n\nstatic_assert(sizeof(struct gve_device_option_gqi_qpl) == 4);\n\nstruct gve_device_option_dqo_rda {\n\t__be32 supported_features_mask;\n\t__be16 tx_comp_ring_entries;\n\t__be16 rx_buff_ring_entries;\n};\n\nstatic_assert(sizeof(struct gve_device_option_dqo_rda) == 8);\n\nstruct gve_device_option_dqo_qpl {\n\t__be32 supported_features_mask;\n\t__be16 tx_pages_per_qpl;\n\t__be16 rx_pages_per_qpl;\n};\n\nstatic_assert(sizeof(struct gve_device_option_dqo_qpl) == 8);\n\nstruct gve_device_option_jumbo_frames {\n\t__be32 supported_features_mask;\n\t__be16 max_mtu;\n\tu8 padding[2];\n};\n\nstatic_assert(sizeof(struct gve_device_option_jumbo_frames) == 8);\n\n \nenum gve_dev_opt_id {\n\tGVE_DEV_OPT_ID_GQI_RAW_ADDRESSING = 0x1,\n\tGVE_DEV_OPT_ID_GQI_RDA = 0x2,\n\tGVE_DEV_OPT_ID_GQI_QPL = 0x3,\n\tGVE_DEV_OPT_ID_DQO_RDA = 0x4,\n\tGVE_DEV_OPT_ID_DQO_QPL = 0x7,\n\tGVE_DEV_OPT_ID_JUMBO_FRAMES = 0x8,\n};\n\nenum gve_dev_opt_req_feat_mask {\n\tGVE_DEV_OPT_REQ_FEAT_MASK_GQI_RAW_ADDRESSING = 0x0,\n\tGVE_DEV_OPT_REQ_FEAT_MASK_GQI_RDA = 0x0,\n\tGVE_DEV_OPT_REQ_FEAT_MASK_GQI_QPL = 0x0,\n\tGVE_DEV_OPT_REQ_FEAT_MASK_DQO_RDA = 0x0,\n\tGVE_DEV_OPT_REQ_FEAT_MASK_JUMBO_FRAMES = 0x0,\n\tGVE_DEV_OPT_REQ_FEAT_MASK_DQO_QPL = 0x0,\n};\n\nenum gve_sup_feature_mask {\n\tGVE_SUP_JUMBO_FRAMES_MASK = 1 << 2,\n};\n\n#define GVE_DEV_OPT_LEN_GQI_RAW_ADDRESSING 0x0\n\n#define GVE_VERSION_STR_LEN 128\n\nenum gve_driver_capbility {\n\tgve_driver_capability_gqi_qpl = 0,\n\tgve_driver_capability_gqi_rda = 1,\n\tgve_driver_capability_dqo_qpl = 2,  \n\tgve_driver_capability_dqo_rda = 3,\n\tgve_driver_capability_alt_miss_compl = 4,\n};\n\n#define GVE_CAP1(a) BIT((int)a)\n#define GVE_CAP2(a) BIT(((int)a) - 64)\n#define GVE_CAP3(a) BIT(((int)a) - 128)\n#define GVE_CAP4(a) BIT(((int)a) - 192)\n\n#define GVE_DRIVER_CAPABILITY_FLAGS1 \\\n\t(GVE_CAP1(gve_driver_capability_gqi_qpl) | \\\n\t GVE_CAP1(gve_driver_capability_gqi_rda) | \\\n\t GVE_CAP1(gve_driver_capability_dqo_rda) | \\\n\t GVE_CAP1(gve_driver_capability_alt_miss_compl))\n\n#define GVE_DRIVER_CAPABILITY_FLAGS2 0x0\n#define GVE_DRIVER_CAPABILITY_FLAGS3 0x0\n#define GVE_DRIVER_CAPABILITY_FLAGS4 0x0\n\nstruct gve_driver_info {\n\tu8 os_type;\t \n\tu8 driver_major;\n\tu8 driver_minor;\n\tu8 driver_sub;\n\t__be32 os_version_major;\n\t__be32 os_version_minor;\n\t__be32 os_version_sub;\n\t__be64 driver_capability_flags[4];\n\tu8 os_version_str1[GVE_VERSION_STR_LEN];\n\tu8 os_version_str2[GVE_VERSION_STR_LEN];\n};\n\nstruct gve_adminq_verify_driver_compatibility {\n\t__be64 driver_info_len;\n\t__be64 driver_info_addr;\n};\n\nstatic_assert(sizeof(struct gve_adminq_verify_driver_compatibility) == 16);\n\nstruct gve_adminq_configure_device_resources {\n\t__be64 counter_array;\n\t__be64 irq_db_addr;\n\t__be32 num_counters;\n\t__be32 num_irq_dbs;\n\t__be32 irq_db_stride;\n\t__be32 ntfy_blk_msix_base_idx;\n\tu8 queue_format;\n\tu8 padding[7];\n};\n\nstatic_assert(sizeof(struct gve_adminq_configure_device_resources) == 40);\n\nstruct gve_adminq_register_page_list {\n\t__be32 page_list_id;\n\t__be32 num_pages;\n\t__be64 page_address_list_addr;\n};\n\nstatic_assert(sizeof(struct gve_adminq_register_page_list) == 16);\n\nstruct gve_adminq_unregister_page_list {\n\t__be32 page_list_id;\n};\n\nstatic_assert(sizeof(struct gve_adminq_unregister_page_list) == 4);\n\n#define GVE_RAW_ADDRESSING_QPL_ID 0xFFFFFFFF\n\nstruct gve_adminq_create_tx_queue {\n\t__be32 queue_id;\n\t__be32 reserved;\n\t__be64 queue_resources_addr;\n\t__be64 tx_ring_addr;\n\t__be32 queue_page_list_id;\n\t__be32 ntfy_id;\n\t__be64 tx_comp_ring_addr;\n\t__be16 tx_ring_size;\n\t__be16 tx_comp_ring_size;\n\tu8 padding[4];\n};\n\nstatic_assert(sizeof(struct gve_adminq_create_tx_queue) == 48);\n\nstruct gve_adminq_create_rx_queue {\n\t__be32 queue_id;\n\t__be32 index;\n\t__be32 reserved;\n\t__be32 ntfy_id;\n\t__be64 queue_resources_addr;\n\t__be64 rx_desc_ring_addr;\n\t__be64 rx_data_ring_addr;\n\t__be32 queue_page_list_id;\n\t__be16 rx_ring_size;\n\t__be16 packet_buffer_size;\n\t__be16 rx_buff_ring_size;\n\tu8 enable_rsc;\n\tu8 padding[5];\n};\n\nstatic_assert(sizeof(struct gve_adminq_create_rx_queue) == 56);\n\n \nstruct gve_queue_resources {\n\tunion {\n\t\tstruct {\n\t\t\t__be32 db_index;\t \n\t\t\t__be32 counter_index;\t \n\t\t};\n\t\tu8 reserved[64];\n\t};\n};\n\nstatic_assert(sizeof(struct gve_queue_resources) == 64);\n\nstruct gve_adminq_destroy_tx_queue {\n\t__be32 queue_id;\n};\n\nstatic_assert(sizeof(struct gve_adminq_destroy_tx_queue) == 4);\n\nstruct gve_adminq_destroy_rx_queue {\n\t__be32 queue_id;\n};\n\nstatic_assert(sizeof(struct gve_adminq_destroy_rx_queue) == 4);\n\n \nenum gve_set_driver_param_types {\n\tGVE_SET_PARAM_MTU\t= 0x1,\n};\n\nstruct gve_adminq_set_driver_parameter {\n\t__be32 parameter_type;\n\tu8 reserved[4];\n\t__be64 parameter_value;\n};\n\nstatic_assert(sizeof(struct gve_adminq_set_driver_parameter) == 16);\n\nstruct gve_adminq_report_stats {\n\t__be64 stats_report_len;\n\t__be64 stats_report_addr;\n\t__be64 interval;\n};\n\nstatic_assert(sizeof(struct gve_adminq_report_stats) == 24);\n\nstruct gve_adminq_report_link_speed {\n\t__be64 link_speed_address;\n};\n\nstatic_assert(sizeof(struct gve_adminq_report_link_speed) == 8);\n\nstruct stats {\n\t__be32 stat_name;\n\t__be32 queue_id;\n\t__be64 value;\n};\n\nstatic_assert(sizeof(struct stats) == 16);\n\nstruct gve_stats_report {\n\t__be64 written_count;\n\tstruct stats stats[];\n};\n\nstatic_assert(sizeof(struct gve_stats_report) == 8);\n\nenum gve_stat_names {\n\t\n\tTX_WAKE_CNT\t\t\t= 1,\n\tTX_STOP_CNT\t\t\t= 2,\n\tTX_FRAMES_SENT\t\t\t= 3,\n\tTX_BYTES_SENT\t\t\t= 4,\n\tTX_LAST_COMPLETION_PROCESSED\t= 5,\n\tRX_NEXT_EXPECTED_SEQUENCE\t= 6,\n\tRX_BUFFERS_POSTED\t\t= 7,\n\tTX_TIMEOUT_CNT\t\t\t= 8,\n\t\n\tRX_QUEUE_DROP_CNT\t\t= 65,\n\tRX_NO_BUFFERS_POSTED\t\t= 66,\n\tRX_DROPS_PACKET_OVER_MRU\t= 67,\n\tRX_DROPS_INVALID_CHECKSUM\t= 68,\n};\n\nenum gve_l3_type {\n\t \n\tGVE_L3_TYPE_UNKNOWN = 0,\n\tGVE_L3_TYPE_OTHER,\n\tGVE_L3_TYPE_IPV4,\n\tGVE_L3_TYPE_IPV6,\n};\n\nenum gve_l4_type {\n\t \n\tGVE_L4_TYPE_UNKNOWN = 0,\n\tGVE_L4_TYPE_OTHER,\n\tGVE_L4_TYPE_TCP,\n\tGVE_L4_TYPE_UDP,\n\tGVE_L4_TYPE_ICMP,\n\tGVE_L4_TYPE_SCTP,\n};\n\n \nstruct gve_ptype_entry {\n\tu8 l3_type;\n\tu8 l4_type;\n};\n\nstruct gve_ptype_map {\n\tstruct gve_ptype_entry ptypes[1 << 10];  \n};\n\nstruct gve_adminq_get_ptype_map {\n\t__be64 ptype_map_len;\n\t__be64 ptype_map_addr;\n};\n\nunion gve_adminq_command {\n\tstruct {\n\t\t__be32 opcode;\n\t\t__be32 status;\n\t\tunion {\n\t\t\tstruct gve_adminq_configure_device_resources\n\t\t\t\t\t\tconfigure_device_resources;\n\t\t\tstruct gve_adminq_create_tx_queue create_tx_queue;\n\t\t\tstruct gve_adminq_create_rx_queue create_rx_queue;\n\t\t\tstruct gve_adminq_destroy_tx_queue destroy_tx_queue;\n\t\t\tstruct gve_adminq_destroy_rx_queue destroy_rx_queue;\n\t\t\tstruct gve_adminq_describe_device describe_device;\n\t\t\tstruct gve_adminq_register_page_list reg_page_list;\n\t\t\tstruct gve_adminq_unregister_page_list unreg_page_list;\n\t\t\tstruct gve_adminq_set_driver_parameter set_driver_param;\n\t\t\tstruct gve_adminq_report_stats report_stats;\n\t\t\tstruct gve_adminq_report_link_speed report_link_speed;\n\t\t\tstruct gve_adminq_get_ptype_map get_ptype_map;\n\t\t\tstruct gve_adminq_verify_driver_compatibility\n\t\t\t\t\t\tverify_driver_compatibility;\n\t\t};\n\t};\n\tu8 reserved[64];\n};\n\nstatic_assert(sizeof(union gve_adminq_command) == 64);\n\nint gve_adminq_alloc(struct device *dev, struct gve_priv *priv);\nvoid gve_adminq_free(struct device *dev, struct gve_priv *priv);\nvoid gve_adminq_release(struct gve_priv *priv);\nint gve_adminq_describe_device(struct gve_priv *priv);\nint gve_adminq_configure_device_resources(struct gve_priv *priv,\n\t\t\t\t\t  dma_addr_t counter_array_bus_addr,\n\t\t\t\t\t  u32 num_counters,\n\t\t\t\t\t  dma_addr_t db_array_bus_addr,\n\t\t\t\t\t  u32 num_ntfy_blks);\nint gve_adminq_deconfigure_device_resources(struct gve_priv *priv);\nint gve_adminq_create_tx_queues(struct gve_priv *priv, u32 start_id, u32 num_queues);\nint gve_adminq_destroy_tx_queues(struct gve_priv *priv, u32 start_id, u32 num_queues);\nint gve_adminq_create_rx_queues(struct gve_priv *priv, u32 num_queues);\nint gve_adminq_destroy_rx_queues(struct gve_priv *priv, u32 queue_id);\nint gve_adminq_register_page_list(struct gve_priv *priv,\n\t\t\t\t  struct gve_queue_page_list *qpl);\nint gve_adminq_unregister_page_list(struct gve_priv *priv, u32 page_list_id);\nint gve_adminq_set_mtu(struct gve_priv *priv, u64 mtu);\nint gve_adminq_report_stats(struct gve_priv *priv, u64 stats_report_len,\n\t\t\t    dma_addr_t stats_report_addr, u64 interval);\nint gve_adminq_verify_driver_compatibility(struct gve_priv *priv,\n\t\t\t\t\t   u64 driver_info_len,\n\t\t\t\t\t   dma_addr_t driver_info_addr);\nint gve_adminq_report_link_speed(struct gve_priv *priv);\n\nstruct gve_ptype_lut;\nint gve_adminq_get_ptype_map_dqo(struct gve_priv *priv,\n\t\t\t\t struct gve_ptype_lut *ptype_lut);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}