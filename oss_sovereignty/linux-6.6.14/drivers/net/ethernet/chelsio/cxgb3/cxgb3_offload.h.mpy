{
  "module_name": "cxgb3_offload.h",
  "hash_id": "5a7eddf59517930e573d1a680275ea8484eb7904164902a0b332d7c1ca48d5d1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.h",
  "human_readable_source": " \n#ifndef _CXGB3_OFFLOAD_H\n#define _CXGB3_OFFLOAD_H\n\n#include <linux/list.h>\n#include <linux/skbuff.h>\n\n#include \"l2t.h\"\n\n#include \"t3cdev.h\"\n#include \"t3_cpl.h\"\n\nstruct adapter;\n\nvoid cxgb3_offload_init(void);\n\nvoid cxgb3_adapter_ofld(struct adapter *adapter);\nvoid cxgb3_adapter_unofld(struct adapter *adapter);\nint cxgb3_offload_activate(struct adapter *adapter);\nvoid cxgb3_offload_deactivate(struct adapter *adapter);\n\nvoid cxgb3_set_dummy_ops(struct t3cdev *dev);\n\nstruct t3cdev *dev2t3cdev(struct net_device *dev);\n\n \n\nvoid cxgb3_register_client(struct cxgb3_client *client);\nvoid cxgb3_unregister_client(struct cxgb3_client *client);\nvoid cxgb3_add_clients(struct t3cdev *tdev);\nvoid cxgb3_remove_clients(struct t3cdev *tdev);\nvoid cxgb3_event_notify(struct t3cdev *tdev, u32 event, u32 port);\n\ntypedef int (*cxgb3_cpl_handler_func)(struct t3cdev *dev,\n\t\t\t\t      struct sk_buff *skb, void *ctx);\n\nenum {\n\tOFFLOAD_STATUS_UP,\n\tOFFLOAD_STATUS_DOWN,\n\tOFFLOAD_PORT_DOWN,\n\tOFFLOAD_PORT_UP,\n\tOFFLOAD_DB_FULL,\n\tOFFLOAD_DB_EMPTY,\n\tOFFLOAD_DB_DROP\n};\n\nstruct cxgb3_client {\n\tchar *name;\n\tvoid (*add) (struct t3cdev *);\n\tvoid (*remove) (struct t3cdev *);\n\tcxgb3_cpl_handler_func *handlers;\n\tint (*redirect)(void *ctx, struct dst_entry *old,\n\t\t\tstruct dst_entry *new, struct l2t_entry *l2t);\n\tstruct list_head client_list;\n\tvoid (*event_handler)(struct t3cdev *tdev, u32 event, u32 port);\n};\n\n \nint cxgb3_alloc_atid(struct t3cdev *dev, struct cxgb3_client *client,\n\t\t     void *ctx);\nint cxgb3_alloc_stid(struct t3cdev *dev, struct cxgb3_client *client,\n\t\t     void *ctx);\nvoid *cxgb3_free_atid(struct t3cdev *dev, int atid);\nvoid cxgb3_free_stid(struct t3cdev *dev, int stid);\nvoid cxgb3_insert_tid(struct t3cdev *dev, struct cxgb3_client *client,\n\t\t      void *ctx, unsigned int tid);\nvoid cxgb3_queue_tid_release(struct t3cdev *dev, unsigned int tid);\nvoid cxgb3_remove_tid(struct t3cdev *dev, void *ctx, unsigned int tid);\n\nstruct t3c_tid_entry {\n\tstruct cxgb3_client *client;\n\tvoid *ctx;\n};\n\n \nenum {\n\tCPL_PRIORITY_DATA = 0,\t \n\tCPL_PRIORITY_SETUP = 1,\t \n\tCPL_PRIORITY_TEARDOWN = 0,\t \n\tCPL_PRIORITY_LISTEN = 1,\t \n\tCPL_PRIORITY_ACK = 1,\t \n\tCPL_PRIORITY_CONTROL = 1\t \n};\n\n \nenum {\n\tCPL_RET_BUF_DONE = 1,  \n\tCPL_RET_BAD_MSG = 2,   \n\tCPL_RET_UNKNOWN_TID = 4\t \n};\n\ntypedef int (*cpl_handler_func)(struct t3cdev *dev, struct sk_buff *skb);\n\n \nstatic inline void *cplhdr(struct sk_buff *skb)\n{\n\treturn skb->data;\n}\n\nvoid t3_register_cpl_handler(unsigned int opcode, cpl_handler_func h);\n\nunion listen_entry {\n\tstruct t3c_tid_entry t3c_tid;\n\tunion listen_entry *next;\n};\n\nunion active_open_entry {\n\tstruct t3c_tid_entry t3c_tid;\n\tunion active_open_entry *next;\n};\n\n \nstruct tid_info {\n\tstruct t3c_tid_entry *tid_tab;\n\tunsigned int ntids;\n\tatomic_t tids_in_use;\n\n\tunion listen_entry *stid_tab;\n\tunsigned int nstids;\n\tunsigned int stid_base;\n\n\tunion active_open_entry *atid_tab;\n\tunsigned int natids;\n\tunsigned int atid_base;\n\n\t \n\tspinlock_t atid_lock ____cacheline_aligned_in_smp;\n\tunion active_open_entry *afree;\n\tunsigned int atids_in_use;\n\n\tspinlock_t stid_lock ____cacheline_aligned;\n\tunion listen_entry *sfree;\n\tunsigned int stids_in_use;\n};\n\nstruct t3c_data {\n\tstruct list_head list_node;\n\tstruct t3cdev *dev;\n\tunsigned int tx_max_chunk;\t \n\tunsigned int max_wrs;\t \n\tunsigned int nmtus;\n\tconst unsigned short *mtus;\n\tstruct tid_info tid_maps;\n\n\tstruct t3c_tid_entry *tid_release_list;\n\tspinlock_t tid_release_lock;\n\tstruct work_struct tid_release_task;\n\n\tstruct sk_buff *nofail_skb;\n\tunsigned int release_list_incomplete;\n};\n\n \n#define T3C_DATA(dev) (*(struct t3c_data **)&(dev)->l4opt)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}