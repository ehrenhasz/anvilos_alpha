{
  "module_name": "cxgb4_dcb.h",
  "hash_id": "a552a0938d5f897ff2a5f5292e8d6df2a2466fbc97ed7dba0f652cc96db4f1ee",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/chelsio/cxgb4/cxgb4_dcb.h",
  "human_readable_source": " \n \n\n#ifndef __CXGB4_DCB_H\n#define __CXGB4_DCB_H\n\n#include <linux/netdevice.h>\n#include <linux/dcbnl.h>\n#include <net/dcbnl.h>\n\n#ifdef CONFIG_CHELSIO_T4_DCB\n\n#define CXGB4_DCBX_FW_SUPPORT \\\n\t(DCB_CAP_DCBX_VER_CEE | \\\n\t DCB_CAP_DCBX_VER_IEEE | \\\n\t DCB_CAP_DCBX_LLD_MANAGED)\n#define CXGB4_DCBX_HOST_SUPPORT \\\n\t(DCB_CAP_DCBX_VER_CEE | \\\n\t DCB_CAP_DCBX_VER_IEEE | \\\n\t DCB_CAP_DCBX_HOST)\n\n#define CXGB4_MAX_PRIORITY      CXGB4_MAX_DCBX_APP_SUPPORTED\n#define CXGB4_MAX_TCS           CXGB4_MAX_DCBX_APP_SUPPORTED\n\n#define INIT_PORT_DCB_CMD(__pcmd, __port, __op, __action) \\\n\tdo { \\\n\t\tmemset(&(__pcmd), 0, sizeof(__pcmd)); \\\n\t\t(__pcmd).op_to_portid = \\\n\t\t\tcpu_to_be32(FW_CMD_OP_V(FW_PORT_CMD) | \\\n\t\t\t\t    FW_CMD_REQUEST_F | \\\n\t\t\t\t    FW_CMD_##__op##_F | \\\n\t\t\t\t    FW_PORT_CMD_PORTID_V(__port)); \\\n\t\t(__pcmd).action_to_len16 = \\\n\t\t\tcpu_to_be32(FW_PORT_CMD_ACTION_V(__action) | \\\n\t\t\t\t    FW_LEN16(pcmd)); \\\n\t} while (0)\n\n#define INIT_PORT_DCB_READ_PEER_CMD(__pcmd, __port) \\\n\tINIT_PORT_DCB_CMD(__pcmd, __port, READ, FW_PORT_ACTION_DCB_READ_RECV)\n\n#define INIT_PORT_DCB_READ_LOCAL_CMD(__pcmd, __port) \\\n\tINIT_PORT_DCB_CMD(__pcmd, __port, READ, FW_PORT_ACTION_DCB_READ_TRANS)\n\n#define INIT_PORT_DCB_READ_SYNC_CMD(__pcmd, __port) \\\n\tINIT_PORT_DCB_CMD(__pcmd, __port, READ, FW_PORT_ACTION_DCB_READ_DET)\n\n#define INIT_PORT_DCB_WRITE_CMD(__pcmd, __port) \\\n\tINIT_PORT_DCB_CMD(__pcmd, __port, EXEC, FW_PORT_ACTION_L2_DCB_CFG)\n\n#define IEEE_FAUX_SYNC(__dev, __dcb) \\\n\tdo { \\\n\t\tif ((__dcb)->dcb_version == FW_PORT_DCB_VER_IEEE) \\\n\t\t\tcxgb4_dcb_state_fsm((__dev), \\\n\t\t\t\t\t    CXGB4_DCB_INPUT_FW_ALLSYNCED); \\\n\t} while (0)\n\n \nenum cxgb4_dcb_state {\n\tCXGB4_DCB_STATE_START,\t\t \n\tCXGB4_DCB_STATE_HOST,\t\t \n\tCXGB4_DCB_STATE_FW_INCOMPLETE,\t \n\tCXGB4_DCB_STATE_FW_ALLSYNCED,\t \n};\n\n \nenum cxgb4_dcb_state_input {\n\t \n\tCXGB4_DCB_INPUT_FW_DISABLED,\t \n\tCXGB4_DCB_INPUT_FW_ENABLED,\t \n\tCXGB4_DCB_INPUT_FW_INCOMPLETE,\t \n\tCXGB4_DCB_INPUT_FW_ALLSYNCED,\t \n\n};\n\n \nenum cxgb4_dcb_fw_msgs {\n\tCXGB4_DCB_FW_PGID\t= 0x01,\n\tCXGB4_DCB_FW_PGRATE\t= 0x02,\n\tCXGB4_DCB_FW_PRIORATE\t= 0x04,\n\tCXGB4_DCB_FW_PFC\t= 0x08,\n\tCXGB4_DCB_FW_APP_ID\t= 0x10,\n};\n\n#define CXGB4_MAX_DCBX_APP_SUPPORTED 8\n\n \nstruct port_dcb_info {\n\tenum cxgb4_dcb_state state;\t \n\tenum cxgb4_dcb_fw_msgs msgs;\t \n\tunsigned int supported;\t\t \n\tbool enabled;\t\t\t \n\n\t \n\tu32\tpgid;\t\t\t \n\tu8\tdcb_version;\t\t \n\tu8\tpfcen;\t\t\t \n\tu8\tpg_num_tcs_supported;\t \n\tu8\tpfc_num_tcs_supported;\t \n\tu8\tpgrate[8];\t\t \n\tu8\tpriorate[8];\t\t \n\tu8\ttsa[8];\t\t\t \n\tstruct app_priority {  \n\t\tu8\tuser_prio_map;\t \n\t\tu8\tsel_field;\t \n\t\tu16\tprotocolid;\t \n\t} app_priority[CXGB4_MAX_DCBX_APP_SUPPORTED];\n};\n\nvoid cxgb4_dcb_state_init(struct net_device *);\nvoid cxgb4_dcb_version_init(struct net_device *);\nvoid cxgb4_dcb_reset(struct net_device *dev);\nvoid cxgb4_dcb_state_fsm(struct net_device *, enum cxgb4_dcb_state_input);\nvoid cxgb4_dcb_handle_fw_update(struct adapter *, const struct fw_port_cmd *);\nvoid cxgb4_dcb_set_caps(struct adapter *, const struct fw_port_cmd *);\nextern const struct dcbnl_rtnl_ops cxgb4_dcb_ops;\n\nstatic inline __u8 bitswap_1(unsigned char val)\n{\n\treturn ((val & 0x80) >> 7) |\n\t       ((val & 0x40) >> 5) |\n\t       ((val & 0x20) >> 3) |\n\t       ((val & 0x10) >> 1) |\n\t       ((val & 0x08) << 1) |\n\t       ((val & 0x04) << 3) |\n\t       ((val & 0x02) << 5) |\n\t       ((val & 0x01) << 7);\n}\n\nextern const char * const dcb_ver_array[];\n\n#define CXGB4_DCB_ENABLED true\n\n#else  \n\nstatic inline void cxgb4_dcb_state_init(struct net_device *dev)\n{\n}\n\n#define CXGB4_DCB_ENABLED false\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}