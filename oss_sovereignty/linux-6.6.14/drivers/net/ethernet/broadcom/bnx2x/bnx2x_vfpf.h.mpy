{
  "module_name": "bnx2x_vfpf.h",
  "hash_id": "b84e6e1487cf7f78ee60e78108cd34e7b5536bdfe61fa793377158a5f8affe5d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/broadcom/bnx2x/bnx2x_vfpf.h",
  "human_readable_source": " \n#ifndef VF_PF_IF_H\n#define VF_PF_IF_H\n\n#ifdef CONFIG_BNX2X_SRIOV\n\n \nstruct vf_pf_resc_request {\n\tu8  num_rxqs;\n\tu8  num_txqs;\n\tu8  num_sbs;\n\tu8  num_mac_filters;\n\tu8  num_vlan_filters;\n\tu8  num_mc_filters;  \n};\n\nstruct hw_sb_info {\n\tu8 hw_sb_id;\t \n\tu8 sb_qid;\t \n};\n\n \n#define TLV_BUFFER_SIZE\t\t\t1024\n#define PF_VF_BULLETIN_SIZE\t\t512\n\n#define VFPF_QUEUE_FLG_TPA\t\t0x0001\n#define VFPF_QUEUE_FLG_TPA_IPV6\t\t0x0002\n#define VFPF_QUEUE_FLG_TPA_GRO\t\t0x0004\n#define VFPF_QUEUE_FLG_CACHE_ALIGN\t0x0008\n#define VFPF_QUEUE_FLG_STATS\t\t0x0010\n#define VFPF_QUEUE_FLG_OV\t\t0x0020\n#define VFPF_QUEUE_FLG_VLAN\t\t0x0040\n#define VFPF_QUEUE_FLG_COS\t\t0x0080\n#define VFPF_QUEUE_FLG_HC\t\t0x0100\n#define VFPF_QUEUE_FLG_DHC\t\t0x0200\n#define VFPF_QUEUE_FLG_LEADING_RSS\t0x0400\n\n#define VFPF_QUEUE_DROP_IP_CS_ERR\t(1 << 0)\n#define VFPF_QUEUE_DROP_TCP_CS_ERR\t(1 << 1)\n#define VFPF_QUEUE_DROP_TTL0\t\t(1 << 2)\n#define VFPF_QUEUE_DROP_UDP_CS_ERR\t(1 << 3)\n\n#define VFPF_RX_MASK_ACCEPT_NONE\t\t0x00000000\n#define VFPF_RX_MASK_ACCEPT_MATCHED_UNICAST\t0x00000001\n#define VFPF_RX_MASK_ACCEPT_MATCHED_MULTICAST\t0x00000002\n#define VFPF_RX_MASK_ACCEPT_ALL_UNICAST\t\t0x00000004\n#define VFPF_RX_MASK_ACCEPT_ALL_MULTICAST\t0x00000008\n#define VFPF_RX_MASK_ACCEPT_BROADCAST\t\t0x00000010\n#define VFPF_RX_MASK_ACCEPT_ANY_VLAN\t\t0x00000020\n\n#define BULLETIN_CONTENT_SIZE\t\t(sizeof(struct pf_vf_bulletin_content))\n#define BULLETIN_CONTENT_LEGACY_SIZE\t(32)\n#define BULLETIN_ATTEMPTS\t5  \n#define BULLETIN_CRC_SEED\t0\n\nenum {\n\tPFVF_STATUS_WAITING = 0,\n\tPFVF_STATUS_SUCCESS,\n\tPFVF_STATUS_FAILURE,\n\tPFVF_STATUS_NOT_SUPPORTED,\n\tPFVF_STATUS_NO_RESOURCE\n};\n\n \n \nstruct channel_tlv {\n\tu16 type;\n\tu16 length;\n};\n\n \nstruct vfpf_first_tlv {\n\tstruct channel_tlv tl;\n\tu32 resp_msg_offset;\n};\n\n \nstruct pfvf_tlv {\n\tstruct channel_tlv tl;\n\tu8 status;\n\tu8 padding[3];\n};\n\n \nstruct pfvf_general_resp_tlv {\n\tstruct pfvf_tlv hdr;\n};\n\n \nstruct channel_list_end_tlv {\n\tstruct channel_tlv tl;\n\tu8 padding[4];\n};\n\n \nstruct vfpf_acquire_tlv {\n\tstruct vfpf_first_tlv first_tlv;\n\n\tstruct vf_pf_vfdev_info {\n\t\t \n\t\tu8  vf_id;\t\t \n\t\tu8  vf_os;\t\t \n#define VF_OS_SUBVERSION_MASK\t(0x1f)\n#define VF_OS_MASK\t\t(0xe0)\n#define VF_OS_SHIFT\t\t(5)\n#define VF_OS_UNDEFINED\t\t(0 << VF_OS_SHIFT)\n#define VF_OS_WINDOWS\t\t(1 << VF_OS_SHIFT)\n\n\t\tu8 fp_hsi_ver;\n\t\tu8 caps;\n#define VF_CAP_SUPPORT_EXT_BULLETIN\t(1 << 0)\n#define VF_CAP_SUPPORT_VLAN_FILTER\t(1 << 1)\n\t} vfdev_info;\n\n\tstruct vf_pf_resc_request resc_request;\n\n\taligned_u64 bulletin_addr;\n};\n\n \nstruct vfpf_q_op_tlv {\n\tstruct vfpf_first_tlv\tfirst_tlv;\n\tu8 vf_qid;\n\tu8 padding[3];\n};\n\n \nstruct vfpf_rss_tlv {\n\tstruct vfpf_first_tlv\tfirst_tlv;\n\tu32\t\t\trss_flags;\n#define VFPF_RSS_MODE_DISABLED\t(1 << 0)\n#define VFPF_RSS_MODE_REGULAR\t(1 << 1)\n#define VFPF_RSS_SET_SRCH\t(1 << 2)\n#define VFPF_RSS_IPV4\t\t(1 << 3)\n#define VFPF_RSS_IPV4_TCP\t(1 << 4)\n#define VFPF_RSS_IPV4_UDP\t(1 << 5)\n#define VFPF_RSS_IPV6\t\t(1 << 6)\n#define VFPF_RSS_IPV6_TCP\t(1 << 7)\n#define VFPF_RSS_IPV6_UDP\t(1 << 8)\n\tu8\t\t\trss_result_mask;\n\tu8\t\t\tind_table_size;\n\tu8\t\t\trss_key_size;\n\tu8\t\t\tpadding;\n\tu8\t\t\tind_table[T_ETH_INDIRECTION_TABLE_SIZE];\n\tu32\t\t\trss_key[T_ETH_RSS_KEY];\t \n};\n\n \nstruct pfvf_acquire_resp_tlv {\n\tstruct pfvf_tlv hdr;\n\tstruct pf_vf_pfdev_info {\n\t\tu32 chip_num;\n\t\tu32 pf_cap;\n#define PFVF_CAP_RSS          0x00000001\n#define PFVF_CAP_DHC          0x00000002\n#define PFVF_CAP_TPA          0x00000004\n#define PFVF_CAP_TPA_UPDATE   0x00000008\n#define PFVF_CAP_VLAN_FILTER  0x00000010\n\n\t\tchar fw_ver[32];\n\t\tu16 db_size;\n\t\tu8  indices_per_sb;\n\t\tu8  padding;\n\t} pfdev_info;\n\tstruct pf_vf_resc {\n\t\t \n#define PFVF_MAX_QUEUES_PER_VF         16\n#define PFVF_MAX_SBS_PER_VF            16\n\t\tstruct hw_sb_info hw_sbs[PFVF_MAX_SBS_PER_VF];\n\t\tu8\thw_qid[PFVF_MAX_QUEUES_PER_VF];\n\t\tu8\tnum_rxqs;\n\t\tu8\tnum_txqs;\n\t\tu8\tnum_sbs;\n\t\tu8\tnum_mac_filters;\n\t\tu8\tnum_vlan_filters;\n\t\tu8\tnum_mc_filters;\n\t\tu8\tpermanent_mac_addr[ETH_ALEN];\n\t\tu8\tcurrent_mac_addr[ETH_ALEN];\n\t\tu8\tpadding[2];\n\t} resc;\n};\n\nstruct vfpf_port_phys_id_resp_tlv {\n\tstruct channel_tlv tl;\n\tu8 id[ETH_ALEN];\n\tu8 padding[2];\n};\n\nstruct vfpf_fp_hsi_resp_tlv {\n\tstruct channel_tlv tl;\n\tu8 is_supported;\n\tu8 padding[3];\n};\n\n#define VFPF_INIT_FLG_STATS_COALESCE\t(1 << 0)  \n\n \nstruct vfpf_init_tlv {\n\tstruct vfpf_first_tlv first_tlv;\n\taligned_u64 sb_addr[PFVF_MAX_SBS_PER_VF];  \n\taligned_u64 spq_addr;\n\taligned_u64 stats_addr;\n\tu16 stats_stride;\n\tu32 flags;\n\tu32 padding[2];\n};\n\n \nstruct vfpf_setup_q_tlv {\n\tstruct vfpf_first_tlv first_tlv;\n\n\tstruct vf_pf_rxq_params {\n\t\t \n\t\taligned_u64 rcq_addr;\n\t\taligned_u64 rcq_np_addr;\n\t\taligned_u64 rxq_addr;\n\t\taligned_u64 sge_addr;\n\n\t\t \n\t\tu8  vf_sb;\t\t \n\t\tu8  sb_index;\t\t \n\t\tu16 hc_rate;\t\t \n\t\t\t\t\t \n\t\t \n\t\tu16 mtu;\n\t\tu16 buf_sz;\n\t\tu16 flags;\t\t \n\t\tu16 stat_id;\t\t \n\n\t\t \n\t\tu16 sge_buf_sz;\n\t\tu16 tpa_agg_sz;\n\t\tu8 max_sge_pkt;\n\n\t\tu8 drop_flags;\t\t \n\n\t\tu8 cache_line_log;\t \n\t\tu8 padding;\n\t} rxq;\n\n\tstruct vf_pf_txq_params {\n\t\t \n\t\taligned_u64 txq_addr;\n\n\t\t \n\t\tu8  vf_sb;\t\t \n\t\tu8  sb_index;\t\t \n\t\tu16 hc_rate;\t\t \n\t\t\t\t\t \n\t\tu32 flags;\t\t \n\t\tu16 stat_id;\t\t \n\t\tu8  traffic_type;\t \n\t\tu8  padding;\n\t} txq;\n\n\tu8 vf_qid;\t\t\t \n\tu8 param_valid;\n#define VFPF_RXQ_VALID\t\t0x01\n#define VFPF_TXQ_VALID\t\t0x02\n\tu8 padding[2];\n};\n\n \nstruct vfpf_q_mac_vlan_filter {\n\tu32 flags;\n#define VFPF_Q_FILTER_DEST_MAC_VALID\t0x01\n#define VFPF_Q_FILTER_VLAN_TAG_VALID\t0x02\n#define VFPF_Q_FILTER_SET\t\t0x100\t \n\tu8  mac[ETH_ALEN];\n\tu16 vlan_tag;\n};\n\n \nstruct vfpf_set_q_filters_tlv {\n\tstruct vfpf_first_tlv first_tlv;\n\n\tu32 flags;\n#define VFPF_SET_Q_FILTERS_MAC_VLAN_CHANGED\t0x01\n#define VFPF_SET_Q_FILTERS_MULTICAST_CHANGED\t0x02\n#define VFPF_SET_Q_FILTERS_RX_MASK_CHANGED\t0x04\n\n\tu8 vf_qid;\t\t\t \n\tu8 n_mac_vlan_filters;\n\tu8 n_multicast;\n\tu8 padding;\n\n#define PFVF_MAX_MAC_FILTERS                   16\n#define PFVF_MAX_VLAN_FILTERS                  16\n#define PFVF_MAX_FILTERS               (PFVF_MAX_MAC_FILTERS +\\\n\t\t\t\t\t PFVF_MAX_VLAN_FILTERS)\n\tstruct vfpf_q_mac_vlan_filter filters[PFVF_MAX_FILTERS];\n\n#define PFVF_MAX_MULTICAST_PER_VF              32\n\tu8  multicast[PFVF_MAX_MULTICAST_PER_VF][ETH_ALEN];\n\n\tu32 rx_mask;\t \n};\n\nstruct vfpf_tpa_tlv {\n\tstruct vfpf_first_tlv\tfirst_tlv;\n\n\tstruct vf_pf_tpa_client_info {\n\t\taligned_u64 sge_addr[PFVF_MAX_QUEUES_PER_VF];\n\t\tu8 update_ipv4;\n\t\tu8 update_ipv6;\n\t\tu8 max_tpa_queues;\n\t\tu8 max_sges_for_packet;\n\t\tu8 complete_on_both_clients;\n\t\tu8 dont_verify_thr;\n\t\tu8 tpa_mode;\n\t\tu16 sge_buff_size;\n\t\tu16 max_agg_size;\n\t\tu16 sge_pause_thr_low;\n\t\tu16 sge_pause_thr_high;\n\t} tpa_client_info;\n};\n\n \nstruct vfpf_close_tlv {\n\tstruct vfpf_first_tlv   first_tlv;\n\tu16\t\t\tvf_id;   \n\tu8 padding[2];\n};\n\n \nstruct vfpf_release_tlv {\n\tstruct vfpf_first_tlv\tfirst_tlv;\n\tu16\t\t\tvf_id;\n\tu8 padding[2];\n};\n\nstruct tlv_buffer_size {\n\tu8 tlv_buffer[TLV_BUFFER_SIZE];\n};\n\nunion vfpf_tlvs {\n\tstruct vfpf_first_tlv\t\tfirst_tlv;\n\tstruct vfpf_acquire_tlv\t\tacquire;\n\tstruct vfpf_init_tlv\t\tinit;\n\tstruct vfpf_close_tlv\t\tclose;\n\tstruct vfpf_q_op_tlv\t\tq_op;\n\tstruct vfpf_setup_q_tlv\t\tsetup_q;\n\tstruct vfpf_set_q_filters_tlv\tset_q_filters;\n\tstruct vfpf_release_tlv\t\trelease;\n\tstruct vfpf_rss_tlv\t\tupdate_rss;\n\tstruct vfpf_tpa_tlv\t\tupdate_tpa;\n\tstruct channel_list_end_tlv\tlist_end;\n\tstruct tlv_buffer_size\t\ttlv_buf_size;\n};\n\nunion pfvf_tlvs {\n\tstruct pfvf_general_resp_tlv\tgeneral_resp;\n\tstruct pfvf_acquire_resp_tlv\tacquire_resp;\n\tstruct channel_list_end_tlv\tlist_end;\n\tstruct tlv_buffer_size\t\ttlv_buf_size;\n};\n\n \nstruct pf_vf_bulletin_size {\n\tu8 size[PF_VF_BULLETIN_SIZE];\n};\n\nstruct pf_vf_bulletin_content {\n\tu32 crc;\t\t\t \n\tu16 version;\n\tu16 length;\n\n\taligned_u64 valid_bitmap;\t \n\n#define MAC_ADDR_VALID\t\t0\t \n#define VLAN_VALID\t\t1\t \n#define CHANNEL_DOWN\t\t2\t \n#define LINK_VALID\t\t3\t \n\tu8 mac[ETH_ALEN];\n\tu8 mac_padding[2];\n\n\tu16 vlan;\n\tu8 vlan_padding[6];\n\n\tu16 link_speed;\t\t\t  \n\tu8 link_speed_padding[6];\n\tu32 link_flags;\t\t\t  \n#define VFPF_LINK_REPORT_LINK_DOWN\t (1 << 0)\n#define VFPF_LINK_REPORT_FULL_DUPLEX\t (1 << 1)\n#define VFPF_LINK_REPORT_RX_FC_ON\t (1 << 2)\n#define VFPF_LINK_REPORT_TX_FC_ON\t (1 << 3)\n\tu8 link_flags_padding[4];\n};\n\nunion pf_vf_bulletin {\n\tstruct pf_vf_bulletin_content content;\n\tstruct pf_vf_bulletin_size size;\n};\n\n#define MAX_TLVS_IN_LIST 50\n\nenum channel_tlvs {\n\tCHANNEL_TLV_NONE,\n\tCHANNEL_TLV_ACQUIRE,\n\tCHANNEL_TLV_INIT,\n\tCHANNEL_TLV_SETUP_Q,\n\tCHANNEL_TLV_SET_Q_FILTERS,\n\tCHANNEL_TLV_ACTIVATE_Q,\n\tCHANNEL_TLV_DEACTIVATE_Q,\n\tCHANNEL_TLV_TEARDOWN_Q,\n\tCHANNEL_TLV_CLOSE,\n\tCHANNEL_TLV_RELEASE,\n\tCHANNEL_TLV_UPDATE_RSS_DEPRECATED,\n\tCHANNEL_TLV_PF_RELEASE_VF,\n\tCHANNEL_TLV_LIST_END,\n\tCHANNEL_TLV_FLR,\n\tCHANNEL_TLV_PF_SET_MAC,\n\tCHANNEL_TLV_PF_SET_VLAN,\n\tCHANNEL_TLV_UPDATE_RSS,\n\tCHANNEL_TLV_PHYS_PORT_ID,\n\tCHANNEL_TLV_UPDATE_TPA,\n\tCHANNEL_TLV_FP_HSI_SUPPORT,\n\tCHANNEL_TLV_MAX\n};\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}