{
  "module_name": "bnx2x_dcb.h",
  "hash_id": "6a30ad14148c65448f6081157acb71fbc99dc348e77d0bc750b83ddd56f8c7f8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/broadcom/bnx2x/bnx2x_dcb.h",
  "human_readable_source": " \n#ifndef BNX2X_DCB_H\n#define BNX2X_DCB_H\n\n#include \"bnx2x_hsi.h\"\n\n#define LLFC_DRIVER_TRAFFIC_TYPE_MAX 3  \nstruct bnx2x_dcbx_app_params {\n\tu32 enabled;\n\tu32 traffic_type_priority[LLFC_DRIVER_TRAFFIC_TYPE_MAX];\n};\n\n#define DCBX_COS_MAX_NUM_E2\tDCBX_E2E3_MAX_NUM_COS\n \n#define BNX2X_MAX_COS_SUPPORT\t3\n#define DCBX_COS_MAX_NUM_E3B0\tBNX2X_MAX_COS_SUPPORT\n#define DCBX_COS_MAX_NUM\tBNX2X_MAX_COS_SUPPORT\n\nstruct bnx2x_dcbx_cos_params {\n\tu32\tbw_tbl;\n\tu32\tpri_bitmask;\n\t \n\tu8\tstrict;\n#define BNX2X_DCBX_STRICT_INVALID\t\t\tDCBX_COS_MAX_NUM\n#define BNX2X_DCBX_STRICT_COS_HIGHEST\t\t\t0\n#define BNX2X_DCBX_STRICT_COS_NEXT_LOWER_PRI(sp)\t((sp) + 1)\n\tu8\tpauseable;\n};\n\nstruct bnx2x_dcbx_pg_params {\n\tu32 enabled;\n\tu8 num_of_cos;  \n\tstruct bnx2x_dcbx_cos_params\tcos_params[DCBX_COS_MAX_NUM];\n};\n\nstruct bnx2x_dcbx_pfc_params {\n\tu32 enabled;\n\tu32 priority_non_pauseable_mask;\n};\n\nstruct bnx2x_dcbx_port_params {\n\tstruct bnx2x_dcbx_pfc_params pfc;\n\tstruct bnx2x_dcbx_pg_params  ets;\n\tstruct bnx2x_dcbx_app_params app;\n};\n\n#define BNX2X_DCBX_CONFIG_INV_VALUE\t\t\t(0xFFFFFFFF)\n#define BNX2X_DCBX_OVERWRITE_SETTINGS_DISABLE\t\t0\n#define BNX2X_DCBX_OVERWRITE_SETTINGS_ENABLE\t\t1\n#define BNX2X_DCBX_OVERWRITE_SETTINGS_INVALID\t(BNX2X_DCBX_CONFIG_INV_VALUE)\n#define BNX2X_IS_ETS_ENABLED(bp) ((bp)->dcb_state == BNX2X_DCB_STATE_ON &&\\\n\t\t\t\t  (bp)->dcbx_port_params.ets.enabled)\n\nstruct bnx2x_config_lldp_params {\n\tu32 overwrite_settings;\n\tu32 msg_tx_hold;\n\tu32 msg_fast_tx;\n\tu32 tx_credit_max;\n\tu32 msg_tx_interval;\n\tu32 tx_fast;\n};\n\nstruct bnx2x_admin_priority_app_table {\n\t\tu32 valid;\n\t\tu32 priority;\n#define INVALID_TRAFFIC_TYPE_PRIORITY\t(0xFFFFFFFF)\n\t\tu32 traffic_type;\n#define TRAFFIC_TYPE_ETH\t\t0\n#define TRAFFIC_TYPE_PORT\t\t1\n\t\tu32 app_id;\n};\n\n#define DCBX_CONFIG_MAX_APP_PROTOCOL 4\nstruct bnx2x_config_dcbx_params {\n\tu32 overwrite_settings;\n\tu32 admin_dcbx_version;\n\tu32 admin_ets_enable;\n\tu32 admin_pfc_enable;\n\tu32 admin_tc_supported_tx_enable;\n\tu32 admin_ets_configuration_tx_enable;\n\tu32 admin_ets_recommendation_tx_enable;\n\tu32 admin_pfc_tx_enable;\n\tu32 admin_application_priority_tx_enable;\n\tu32 admin_ets_willing;\n\tu32 admin_ets_reco_valid;\n\tu32 admin_pfc_willing;\n\tu32 admin_app_priority_willing;\n\tu32 admin_configuration_bw_precentage[8];\n\tu32 admin_configuration_ets_pg[8];\n\tu32 admin_recommendation_bw_precentage[8];\n\tu32 admin_recommendation_ets_pg[8];\n\tu32 admin_pfc_bitmap;\n\tstruct bnx2x_admin_priority_app_table\n\t\tadmin_priority_app_table[DCBX_CONFIG_MAX_APP_PROTOCOL];\n\tu32 admin_default_priority;\n};\n\n#define GET_FLAGS(flags, bits)\t\t((flags) & (bits))\n#define SET_FLAGS(flags, bits)\t\t((flags) |= (bits))\n#define RESET_FLAGS(flags, bits)\t((flags) &= ~(bits))\n\nenum {\n\tDCBX_READ_LOCAL_MIB,\n\tDCBX_READ_REMOTE_MIB\n};\n\n#define ETH_TYPE_FCOE\t\t(0x8906)\n#define TCP_PORT_ISCSI\t\t(0xCBC)\n\n#define PFC_VALUE_FRAME_SIZE\t\t\t\t(512)\n#define PFC_QUANTA_IN_NANOSEC_FROM_SPEED_MEGA(mega_speed)  \\\n\t\t\t\t((1000 * PFC_VALUE_FRAME_SIZE)/(mega_speed))\n\n#define PFC_BRB1_REG_HIGH_LLFC_LOW_THRESHOLD\t\t\t130\n#define PFC_BRB1_REG_HIGH_LLFC_HIGH_THRESHOLD\t\t\t170\n\nstruct cos_entry_help_data {\n\tu32\t\t\tpri_join_mask;\n\tu32\t\t\tcos_bw;\n\tu8\t\t\tstrict;\n\tbool\t\t\tpausable;\n};\n\nstruct cos_help_data {\n\tstruct cos_entry_help_data\tdata[DCBX_COS_MAX_NUM];\n\tu8\t\t\t\tnum_of_cos;\n};\n\n#define DCBX_ILLEGAL_PG\t\t\t\t(0xFF)\n#define DCBX_PFC_PRI_MASK\t\t\t(0xFF)\n#define DCBX_STRICT_PRIORITY\t\t\t(15)\n#define DCBX_INVALID_COS_BW\t\t\t(0xFFFFFFFF)\n#define DCBX_PFC_PRI_NON_PAUSE_MASK(bp)\t\t\\\n\t\t\t((bp)->dcbx_port_params.pfc.priority_non_pauseable_mask)\n#define DCBX_PFC_PRI_PAUSE_MASK(bp)\t\t\\\n\t\t\t\t\t((u8)~DCBX_PFC_PRI_NON_PAUSE_MASK(bp))\n#define DCBX_PFC_PRI_GET_PAUSE(bp, pg_pri)\t\\\n\t\t\t\t((pg_pri) & (DCBX_PFC_PRI_PAUSE_MASK(bp)))\n#define DCBX_PFC_PRI_GET_NON_PAUSE(bp, pg_pri)\t\\\n\t\t\t(DCBX_PFC_PRI_NON_PAUSE_MASK(bp) & (pg_pri))\n#define DCBX_IS_PFC_PRI_SOME_PAUSE(bp, pg_pri)\t\\\n\t\t\t(0 != DCBX_PFC_PRI_GET_PAUSE(bp, pg_pri))\n#define IS_DCBX_PFC_PRI_ONLY_PAUSE(bp, pg_pri)\t\\\n\t\t\t(pg_pri == DCBX_PFC_PRI_GET_PAUSE((bp), (pg_pri)))\n#define IS_DCBX_PFC_PRI_ONLY_NON_PAUSE(bp, pg_pri)\\\n\t\t\t((pg_pri) == DCBX_PFC_PRI_GET_NON_PAUSE((bp), (pg_pri)))\n#define IS_DCBX_PFC_PRI_MIX_PAUSE(bp, pg_pri)\t\\\n\t\t\t(!(IS_DCBX_PFC_PRI_ONLY_NON_PAUSE((bp), (pg_pri)) || \\\n\t\t\t IS_DCBX_PFC_PRI_ONLY_PAUSE((bp), (pg_pri))))\n\nstruct pg_entry_help_data {\n\tu8\tnum_of_dif_pri;\n\tu8\tpg;\n\tu32\tpg_priority;\n};\n\nstruct pg_help_data {\n\tstruct pg_entry_help_data\tdata[LLFC_DRIVER_TRAFFIC_TYPE_MAX];\n\tu8\t\t\t\tnum_of_pg;\n};\n\n \nstruct bnx2x;\nvoid bnx2x_dcbx_update(struct work_struct *work);\nvoid bnx2x_dcbx_init_params(struct bnx2x *bp);\nvoid bnx2x_dcbx_set_state(struct bnx2x *bp, bool dcb_on, u32 dcbx_enabled);\n\nenum {\n\tBNX2X_DCBX_STATE_NEG_RECEIVED = 0x1,\n\tBNX2X_DCBX_STATE_TX_PAUSED,\n\tBNX2X_DCBX_STATE_TX_RELEASED\n};\n\nvoid bnx2x_dcbx_set_params(struct bnx2x *bp, u32 state);\nvoid bnx2x_dcbx_pmf_update(struct bnx2x *bp);\n \n#ifdef BCM_DCBNL\nextern const struct dcbnl_rtnl_ops bnx2x_dcbnl_ops;\nint bnx2x_dcbnl_update_applist(struct bnx2x *bp, bool delall);\n#endif  \n\nint bnx2x_dcbx_stop_hw_tx(struct bnx2x *bp);\nint bnx2x_dcbx_resume_hw_tx(struct bnx2x *bp);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}