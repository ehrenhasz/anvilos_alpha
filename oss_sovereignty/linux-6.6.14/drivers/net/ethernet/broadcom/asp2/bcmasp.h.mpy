{
  "module_name": "bcmasp.h",
  "hash_id": "1a23354b26fcac3dfdd68667ee85e1f793f053f8b988d6bf74817cec512283f2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/broadcom/asp2/bcmasp.h",
  "human_readable_source": " \n#ifndef __BCMASP_H\n#define __BCMASP_H\n\n#include <linux/netdevice.h>\n#include <linux/phy.h>\n#include <linux/io-64-nonatomic-hi-lo.h>\n#include <uapi/linux/ethtool.h>\n\n#define ASP_INTR2_OFFSET\t\t\t0x1000\n#define  ASP_INTR2_STATUS\t\t\t0x0\n#define  ASP_INTR2_SET\t\t\t\t0x4\n#define  ASP_INTR2_CLEAR\t\t\t0x8\n#define  ASP_INTR2_MASK_STATUS\t\t\t0xc\n#define  ASP_INTR2_MASK_SET\t\t\t0x10\n#define  ASP_INTR2_MASK_CLEAR\t\t\t0x14\n\n#define ASP_INTR2_RX_ECH(intr)\t\t\tBIT(intr)\n#define ASP_INTR2_TX_DESC(intr)\t\t\tBIT((intr) + 14)\n#define ASP_INTR2_UMC0_WAKE\t\t\tBIT(22)\n#define ASP_INTR2_UMC1_WAKE\t\t\tBIT(28)\n\n#define ASP_WAKEUP_INTR2_OFFSET\t\t\t0x1200\n#define  ASP_WAKEUP_INTR2_STATUS\t\t0x0\n#define  ASP_WAKEUP_INTR2_SET\t\t\t0x4\n#define  ASP_WAKEUP_INTR2_CLEAR\t\t\t0x8\n#define  ASP_WAKEUP_INTR2_MASK_STATUS\t\t0xc\n#define  ASP_WAKEUP_INTR2_MASK_SET\t\t0x10\n#define  ASP_WAKEUP_INTR2_MASK_CLEAR\t\t0x14\n#define ASP_WAKEUP_INTR2_MPD_0\t\t\tBIT(0)\n#define ASP_WAKEUP_INTR2_MPD_1\t\t\tBIT(1)\n#define ASP_WAKEUP_INTR2_FILT_0\t\t\tBIT(2)\n#define ASP_WAKEUP_INTR2_FILT_1\t\t\tBIT(3)\n#define ASP_WAKEUP_INTR2_FW\t\t\tBIT(4)\n\n#define ASP_TX_ANALYTICS_OFFSET\t\t\t0x4c000\n#define  ASP_TX_ANALYTICS_CTRL\t\t\t0x0\n\n#define ASP_RX_ANALYTICS_OFFSET\t\t\t0x98000\n#define  ASP_RX_ANALYTICS_CTRL\t\t\t0x0\n\n#define ASP_RX_CTRL_OFFSET\t\t\t0x9f000\n#define ASP_RX_CTRL_UMAC_0_FRAME_COUNT\t\t0x8\n#define ASP_RX_CTRL_UMAC_1_FRAME_COUNT\t\t0xc\n#define ASP_RX_CTRL_FB_0_FRAME_COUNT\t\t0x14\n#define ASP_RX_CTRL_FB_1_FRAME_COUNT\t\t0x18\n#define ASP_RX_CTRL_FB_8_FRAME_COUNT\t\t0x1c\n \n \n#define ASP_RX_CTRL_FB_OUT_FRAME_COUNT\t\t0x20\n#define ASP_RX_CTRL_FB_FILT_OUT_FRAME_COUNT\t0x24\n#define ASP_RX_CTRL_FLUSH\t\t\t0x28\n#define  ASP_CTRL_UMAC0_FLUSH_MASK\t\t(BIT(0) | BIT(12))\n#define  ASP_CTRL_UMAC1_FLUSH_MASK\t\t(BIT(1) | BIT(13))\n#define  ASP_CTRL_SPB_FLUSH_MASK\t\t(BIT(8) | BIT(20))\n#define ASP_RX_CTRL_FB_RX_FIFO_DEPTH\t\t0x30\n \n#define ASP_RX_CTRL_FB_9_FRAME_COUNT_2_1\t0x20\n#define ASP_RX_CTRL_FB_10_FRAME_COUNT_2_1\t0x24\n#define ASP_RX_CTRL_FB_OUT_FRAME_COUNT_2_1\t0x28\n#define ASP_RX_CTRL_FB_FILT_OUT_FRAME_COUNT_2_1\t0x2c\n#define ASP_RX_CTRL_FLUSH_2_1\t\t\t0x30\n#define ASP_RX_CTRL_FB_RX_FIFO_DEPTH_2_1\t0x38\n\n#define ASP_RX_FILTER_OFFSET\t\t\t0x80000\n#define  ASP_RX_FILTER_BLK_CTRL\t\t\t0x0\n#define   ASP_RX_FILTER_OPUT_EN\t\t\tBIT(0)\n#define   ASP_RX_FILTER_MDA_EN\t\t\tBIT(1)\n#define   ASP_RX_FILTER_LNR_MD\t\t\tBIT(2)\n#define   ASP_RX_FILTER_GEN_WK_EN\t\tBIT(3)\n#define   ASP_RX_FILTER_GEN_WK_CLR\t\tBIT(4)\n#define   ASP_RX_FILTER_NT_FLT_EN\t\tBIT(5)\n#define  ASP_RX_FILTER_MDA_CFG(sel)\t\t(((sel) * 0x14) + 0x100)\n#define   ASP_RX_FILTER_MDA_CFG_EN_SHIFT\t8\n#define   ASP_RX_FILTER_MDA_CFG_UMC_SEL(sel)\t((sel) > 1 ? BIT(17) : \\\n\t\t\t\t\t\t BIT((sel) + 9))\n#define  ASP_RX_FILTER_MDA_PAT_H(sel)\t\t(((sel) * 0x14) + 0x104)\n#define  ASP_RX_FILTER_MDA_PAT_L(sel)\t\t(((sel) * 0x14) + 0x108)\n#define  ASP_RX_FILTER_MDA_MSK_H(sel)\t\t(((sel) * 0x14) + 0x10c)\n#define  ASP_RX_FILTER_MDA_MSK_L(sel)\t\t(((sel) * 0x14) + 0x110)\n#define  ASP_RX_FILTER_MDA_CFG(sel)\t\t(((sel) * 0x14) + 0x100)\n#define  ASP_RX_FILTER_MDA_PAT_H(sel)\t\t(((sel) * 0x14) + 0x104)\n#define  ASP_RX_FILTER_MDA_PAT_L(sel)\t\t(((sel) * 0x14) + 0x108)\n#define  ASP_RX_FILTER_MDA_MSK_H(sel)\t\t(((sel) * 0x14) + 0x10c)\n#define  ASP_RX_FILTER_MDA_MSK_L(sel)\t\t(((sel) * 0x14) + 0x110)\n#define  ASP_RX_FILTER_NET_CFG(sel)\t\t(((sel) * 0xa04) + 0x400)\n#define   ASP_RX_FILTER_NET_CFG_CH(sel)\t\t((sel) << 0)\n#define   ASP_RX_FILTER_NET_CFG_EN\t\tBIT(9)\n#define   ASP_RX_FILTER_NET_CFG_L2_EN\t\tBIT(10)\n#define   ASP_RX_FILTER_NET_CFG_L3_EN\t\tBIT(11)\n#define   ASP_RX_FILTER_NET_CFG_L4_EN\t\tBIT(12)\n#define   ASP_RX_FILTER_NET_CFG_L3_FRM(sel)\t((sel) << 13)\n#define   ASP_RX_FILTER_NET_CFG_L4_FRM(sel)\t((sel) << 15)\n#define   ASP_RX_FILTER_NET_CFG_UMC(sel)\tBIT((sel) + 19)\n#define   ASP_RX_FILTER_NET_CFG_DMA_EN\t\tBIT(27)\n\n#define  ASP_RX_FILTER_NET_OFFSET_MAX\t\t32\n#define  ASP_RX_FILTER_NET_PAT(sel, block, off) \\\n\t\t(((sel) * 0xa04) + ((block) * 0x200) + (off) + 0x600)\n#define  ASP_RX_FILTER_NET_MASK(sel, block, off) \\\n\t\t(((sel) * 0xa04) + ((block) * 0x200) + (off) + 0x700)\n\n#define  ASP_RX_FILTER_NET_OFFSET(sel)\t\t(((sel) * 0xa04) + 0xe00)\n#define   ASP_RX_FILTER_NET_OFFSET_L2(val)\t((val) << 0)\n#define   ASP_RX_FILTER_NET_OFFSET_L3_0(val)\t((val) << 8)\n#define   ASP_RX_FILTER_NET_OFFSET_L3_1(val)\t((val) << 16)\n#define   ASP_RX_FILTER_NET_OFFSET_L4(val)\t((val) << 24)\n\nenum asp_rx_net_filter_block {\n\tASP_RX_FILTER_NET_L2 = 0,\n\tASP_RX_FILTER_NET_L3_0,\n\tASP_RX_FILTER_NET_L3_1,\n\tASP_RX_FILTER_NET_L4,\n\tASP_RX_FILTER_NET_BLOCK_MAX\n};\n\n#define ASP_EDPKT_OFFSET\t\t\t0x9c000\n#define  ASP_EDPKT_ENABLE\t\t\t0x4\n#define   ASP_EDPKT_ENABLE_EN\t\t\tBIT(0)\n#define  ASP_EDPKT_HDR_CFG\t\t\t0xc\n#define   ASP_EDPKT_HDR_SZ_SHIFT\t\t2\n#define   ASP_EDPKT_HDR_SZ_32\t\t\t0\n#define   ASP_EDPKT_HDR_SZ_64\t\t\t1\n#define   ASP_EDPKT_HDR_SZ_96\t\t\t2\n#define   ASP_EDPKT_HDR_SZ_128\t\t\t3\n#define ASP_EDPKT_BURST_BUF_PSCAL_TOUT\t\t0x10\n#define ASP_EDPKT_BURST_BUF_WRITE_TOUT\t\t0x14\n#define ASP_EDPKT_BURST_BUF_READ_TOUT\t\t0x18\n#define ASP_EDPKT_RX_TS_COUNTER\t\t\t0x38\n#define  ASP_EDPKT_ENDI\t\t\t\t0x48\n#define   ASP_EDPKT_ENDI_DESC_SHIFT\t\t8\n#define   ASP_EDPKT_ENDI_NO_BT_SWP\t\t0\n#define   ASP_EDPKT_ENDI_BT_SWP_WD\t\t1\n#define ASP_EDPKT_RX_PKT_CNT\t\t\t0x138\n#define ASP_EDPKT_HDR_EXTR_CNT\t\t\t0x13c\n#define ASP_EDPKT_HDR_OUT_CNT\t\t\t0x140\n\n#define ASP_CTRL\t\t\t\t0x101000\n#define  ASP_CTRL_ASP_SW_INIT\t\t\t0x04\n#define   ASP_CTRL_ASP_SW_INIT_ACPUSS_CORE\tBIT(0)\n#define   ASP_CTRL_ASP_SW_INIT_ASP_TX\t\tBIT(1)\n#define   ASP_CTRL_ASP_SW_INIT_AS_RX\t\tBIT(2)\n#define   ASP_CTRL_ASP_SW_INIT_ASP_RGMII_UMAC0\tBIT(3)\n#define   ASP_CTRL_ASP_SW_INIT_ASP_RGMII_UMAC1\tBIT(4)\n#define   ASP_CTRL_ASP_SW_INIT_ASP_XMEMIF\tBIT(5)\n#define  ASP_CTRL_CLOCK_CTRL\t\t\t0x04\n#define   ASP_CTRL_CLOCK_CTRL_ASP_TX_DISABLE\tBIT(0)\n#define   ASP_CTRL_CLOCK_CTRL_ASP_RX_DISABLE\tBIT(1)\n#define   ASP_CTRL_CLOCK_CTRL_ASP_RGMII_SHIFT\t2\n#define   ASP_CTRL_CLOCK_CTRL_ASP_RGMII_MASK\t(0x7 << ASP_CTRL_CLOCK_CTRL_ASP_RGMII_SHIFT)\n#define   ASP_CTRL_CLOCK_CTRL_ASP_RGMII_DIS(x)\tBIT(ASP_CTRL_CLOCK_CTRL_ASP_RGMII_SHIFT + (x))\n#define   ASP_CTRL_CLOCK_CTRL_ASP_ALL_DISABLE\tGENMASK(4, 0)\n#define  ASP_CTRL_CORE_CLOCK_SELECT\t\t0x08\n#define   ASP_CTRL_CORE_CLOCK_SELECT_MAIN\tBIT(0)\n#define  ASP_CTRL_SCRATCH_0\t\t\t0x0c\n\nstruct bcmasp_tx_cb {\n\tstruct sk_buff\t\t*skb;\n\tunsigned int\t\tbytes_sent;\n\tbool\t\t\tlast;\n\n\tDEFINE_DMA_UNMAP_ADDR(dma_addr);\n\tDEFINE_DMA_UNMAP_LEN(dma_len);\n};\n\nstruct bcmasp_res {\n\t \n\t \n\tvoid __iomem\t\t*umac;\n\tvoid __iomem\t\t*umac2fb;\n\tvoid __iomem\t\t*rgmii;\n\n\t \n\tvoid __iomem\t\t*tx_spb_ctrl;\n\tvoid __iomem\t\t*tx_spb_top;\n\tvoid __iomem\t\t*tx_epkt_core;\n\tvoid __iomem\t\t*tx_pause_ctrl;\n};\n\n#define DESC_ADDR(x)\t\t((x) & GENMASK_ULL(39, 0))\n#define DESC_FLAGS(x)\t\t((x) & GENMASK_ULL(63, 40))\n\nstruct bcmasp_desc {\n\tu64\t\tbuf;\n\t#define DESC_CHKSUM\tBIT_ULL(40)\n\t#define DESC_CRC_ERR\tBIT_ULL(41)\n\t#define DESC_RX_SYM_ERR\tBIT_ULL(42)\n\t#define DESC_NO_OCT_ALN BIT_ULL(43)\n\t#define DESC_PKT_TRUC\tBIT_ULL(44)\n\t \n\tu32\t\tsize;\n\tu32\t\tflags;\n\t#define DESC_INT_EN     BIT(0)\n\t#define DESC_SOF\tBIT(1)\n\t#define DESC_EOF\tBIT(2)\n\t#define DESC_EPKT_CMD   BIT(3)\n\t#define DESC_SCRAM_ST   BIT(8)\n\t#define DESC_SCRAM_END  BIT(9)\n\t#define DESC_PCPP       BIT(10)\n\t#define DESC_PPPP       BIT(11)\n\t \n};\n\nstruct bcmasp_intf;\n\nstruct bcmasp_intf_stats64 {\n\t \n\tu64_stats_t\trx_packets;\n\tu64_stats_t\trx_bytes;\n\tu64_stats_t\trx_errors;\n\tu64_stats_t\trx_dropped;\n\tu64_stats_t\trx_crc_errs;\n\tu64_stats_t\trx_sym_errs;\n\n\t \n\tu64_stats_t\ttx_packets;\n\tu64_stats_t\ttx_bytes;\n\n\tstruct u64_stats_sync\t\tsyncp;\n};\n\nstruct bcmasp_mib_counters {\n\tu32\tedpkt_ts;\n\tu32\tedpkt_rx_pkt_cnt;\n\tu32\tedpkt_hdr_ext_cnt;\n\tu32\tedpkt_hdr_out_cnt;\n\tu32\tumac_frm_cnt;\n\tu32\tfb_frm_cnt;\n\tu32\tfb_rx_fifo_depth;\n\tu32\tfb_out_frm_cnt;\n\tu32\tfb_filt_out_frm_cnt;\n\tu32\talloc_rx_skb_failed;\n\tu32\ttx_dma_failed;\n\tu32\tmc_filters_full_cnt;\n\tu32\tuc_filters_full_cnt;\n\tu32\tfilters_combine_cnt;\n\tu32\tpromisc_filters_cnt;\n\tu32\ttx_realloc_offload_failed;\n\tu32\ttx_timeout_cnt;\n};\n\nstruct bcmasp_intf_ops {\n\tunsigned long (*rx_desc_read)(struct bcmasp_intf *intf);\n\tvoid (*rx_buffer_write)(struct bcmasp_intf *intf, dma_addr_t addr);\n\tvoid (*rx_desc_write)(struct bcmasp_intf *intf, dma_addr_t addr);\n\tunsigned long (*tx_read)(struct bcmasp_intf *intf);\n\tvoid (*tx_write)(struct bcmasp_intf *intf, dma_addr_t addr);\n};\n\nstruct bcmasp_priv;\n\nstruct bcmasp_intf {\n\tstruct list_head\t\tlist;\n\tstruct net_device\t\t*ndev;\n\tstruct bcmasp_priv\t\t*parent;\n\n\t \n\tint\t\t\t\tchannel;\n\tint\t\t\t\tport;\n\tconst struct bcmasp_intf_ops\t*ops;\n\n\t \n\tint\t\t\t\tindex;\n\n\tstruct napi_struct\t\ttx_napi;\n\t \n\tvoid __iomem\t\t\t*tx_spb_dma;\n\tint\t\t\t\ttx_spb_index;\n\tint\t\t\t\ttx_spb_clean_index;\n\tstruct bcmasp_desc\t\t*tx_spb_cpu;\n\tdma_addr_t\t\t\ttx_spb_dma_addr;\n\tdma_addr_t\t\t\ttx_spb_dma_valid;\n\tdma_addr_t\t\t\ttx_spb_dma_read;\n\tstruct bcmasp_tx_cb\t\t*tx_cbs;\n\n\t \n\tvoid __iomem\t\t\t*rx_edpkt_cfg;\n\tvoid __iomem\t\t\t*rx_edpkt_dma;\n\tint\t\t\t\trx_edpkt_index;\n\tint\t\t\t\trx_buf_order;\n\tstruct bcmasp_desc\t\t*rx_edpkt_cpu;\n\tdma_addr_t\t\t\trx_edpkt_dma_addr;\n\tdma_addr_t\t\t\trx_edpkt_dma_read;\n\n\t \n\tvoid\t\t\t\t*rx_ring_cpu;\n\tdma_addr_t\t\t\trx_ring_dma;\n\tdma_addr_t\t\t\trx_ring_dma_valid;\n\tstruct napi_struct\t\trx_napi;\n\n\tstruct bcmasp_res\t\tres;\n\tunsigned int\t\t\tcrc_fwd;\n\n\t \n\tstruct device_node\t\t*phy_dn;\n\tstruct device_node\t\t*ndev_dn;\n\tphy_interface_t\t\t\tphy_interface;\n\tbool\t\t\t\tinternal_phy;\n\tint\t\t\t\told_pause;\n\tint\t\t\t\told_link;\n\tint\t\t\t\told_duplex;\n\n\tu32\t\t\t\tmsg_enable;\n\n\t \n\tstruct bcmasp_intf_stats64\tstats64;\n\tstruct bcmasp_mib_counters\tmib;\n\n\tu32\t\t\t\twolopts;\n\tu8\t\t\t\tsopass[SOPASS_MAX];\n\t \n\tint\t\t\t\twol_irq;\n\tunsigned int\t\t\twol_irq_enabled:1;\n\n\tstruct ethtool_eee\t\teee;\n};\n\n#define NUM_NET_FILTERS\t\t\t\t32\nstruct bcmasp_net_filter {\n\tstruct ethtool_rx_flow_spec\tfs;\n\n\tbool\t\t\t\tclaimed;\n\tbool\t\t\t\twake_filter;\n\n\tint\t\t\t\tport;\n\tunsigned int\t\t\thw_index;\n};\n\n#define NUM_MDA_FILTERS\t\t\t\t32\nstruct bcmasp_mda_filter {\n\t \n\tint\t\tport;\n\tbool\t\ten;\n\tu8\t\taddr[ETH_ALEN];\n\tu8\t\tmask[ETH_ALEN];\n};\n\nstruct bcmasp_hw_info {\n\tu32\t\trx_ctrl_flush;\n\tu32\t\tumac2fb;\n\tu32\t\trx_ctrl_fb_out_frame_count;\n\tu32\t\trx_ctrl_fb_filt_out_frame_count;\n\tu32\t\trx_ctrl_fb_rx_fifo_depth;\n};\n\nstruct bcmasp_plat_data {\n\tvoid (*init_wol)(struct bcmasp_priv *priv);\n\tvoid (*enable_wol)(struct bcmasp_intf *intf, bool en);\n\tvoid (*destroy_wol)(struct bcmasp_priv *priv);\n\tstruct bcmasp_hw_info\t\t*hw_info;\n};\n\nstruct bcmasp_priv {\n\tstruct platform_device\t\t*pdev;\n\tstruct clk\t\t\t*clk;\n\n\tint\t\t\t\tirq;\n\tu32\t\t\t\tirq_mask;\n\n\t \n\tstruct mutex\t\t\twol_lock;\n\tint\t\t\t\twol_irq;\n\tunsigned long\t\t\twol_irq_enabled_mask;\n\n\tvoid (*init_wol)(struct bcmasp_priv *priv);\n\tvoid (*enable_wol)(struct bcmasp_intf *intf, bool en);\n\tvoid (*destroy_wol)(struct bcmasp_priv *priv);\n\n\tvoid __iomem\t\t\t*base;\n\tstruct\tbcmasp_hw_info\t\t*hw_info;\n\n\tstruct list_head\t\tintfs;\n\n\tstruct bcmasp_mda_filter\tmda_filters[NUM_MDA_FILTERS];\n\n\t \n\tspinlock_t\t\t\tmda_lock;\n\n\t \n\tspinlock_t\t\t\tclk_lock;\n\n\tstruct bcmasp_net_filter\tnet_filters[NUM_NET_FILTERS];\n\n\t \n\tstruct mutex\t\t\tnet_lock;\n};\n\nstatic inline unsigned long bcmasp_intf_rx_desc_read(struct bcmasp_intf *intf)\n{\n\treturn intf->ops->rx_desc_read(intf);\n}\n\nstatic inline void bcmasp_intf_rx_buffer_write(struct bcmasp_intf *intf,\n\t\t\t\t\t       dma_addr_t addr)\n{\n\tintf->ops->rx_buffer_write(intf, addr);\n}\n\nstatic inline void bcmasp_intf_rx_desc_write(struct bcmasp_intf *intf,\n\t\t\t\t\t     dma_addr_t addr)\n{\n\tintf->ops->rx_desc_write(intf, addr);\n}\n\nstatic inline unsigned long bcmasp_intf_tx_read(struct bcmasp_intf *intf)\n{\n\treturn intf->ops->tx_read(intf);\n}\n\nstatic inline void bcmasp_intf_tx_write(struct bcmasp_intf *intf,\n\t\t\t\t\tdma_addr_t addr)\n{\n\tintf->ops->tx_write(intf, addr);\n}\n\n#define __BCMASP_IO_MACRO(name, m)\t\t\t\t\t\\\nstatic inline u32 name##_rl(struct bcmasp_intf *intf, u32 off)\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tu32 reg = readl_relaxed(intf->m + off);\t\t\t\t\\\n\treturn reg;\t\t\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\nstatic inline void name##_wl(struct bcmasp_intf *intf, u32 val, u32 off)\\\n{\t\t\t\t\t\t\t\t\t\\\n\twritel_relaxed(val, intf->m + off);\t\t\t\t\\\n}\n\n#define BCMASP_IO_MACRO(name)\t\t__BCMASP_IO_MACRO(name, res.name)\n#define BCMASP_FP_IO_MACRO(name)\t__BCMASP_IO_MACRO(name, name)\n\nBCMASP_IO_MACRO(umac);\nBCMASP_IO_MACRO(umac2fb);\nBCMASP_IO_MACRO(rgmii);\nBCMASP_FP_IO_MACRO(tx_spb_dma);\nBCMASP_IO_MACRO(tx_spb_ctrl);\nBCMASP_IO_MACRO(tx_spb_top);\nBCMASP_IO_MACRO(tx_epkt_core);\nBCMASP_IO_MACRO(tx_pause_ctrl);\nBCMASP_FP_IO_MACRO(rx_edpkt_dma);\nBCMASP_FP_IO_MACRO(rx_edpkt_cfg);\n\n#define __BCMASP_FP_IO_MACRO_Q(name, m)\t\t\t\t\t\\\nstatic inline u64 name##_rq(struct bcmasp_intf *intf, u32 off)\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tu64 reg = readq_relaxed(intf->m + off);\t\t\t\t\\\n\treturn reg;\t\t\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\nstatic inline void name##_wq(struct bcmasp_intf *intf, u64 val, u32 off)\\\n{\t\t\t\t\t\t\t\t\t\\\n\twriteq_relaxed(val, intf->m + off);\t\t\t\t\\\n}\n\n#define BCMASP_FP_IO_MACRO_Q(name)\t__BCMASP_FP_IO_MACRO_Q(name, name)\n\nBCMASP_FP_IO_MACRO_Q(tx_spb_dma);\nBCMASP_FP_IO_MACRO_Q(rx_edpkt_dma);\nBCMASP_FP_IO_MACRO_Q(rx_edpkt_cfg);\n\n#define PKT_OFFLOAD_NOP\t\t\t(0 << 28)\n#define PKT_OFFLOAD_HDR_OP\t\t(1 << 28)\n#define  PKT_OFFLOAD_HDR_WRBACK\t\tBIT(19)\n#define  PKT_OFFLOAD_HDR_COUNT(x)\t((x) << 16)\n#define  PKT_OFFLOAD_HDR_SIZE_1(x)\t((x) << 4)\n#define  PKT_OFFLOAD_HDR_SIZE_2(x)\t(x)\n#define  PKT_OFFLOAD_HDR2_SIZE_2(x)\t((x) << 24)\n#define  PKT_OFFLOAD_HDR2_SIZE_3(x)\t((x) << 12)\n#define  PKT_OFFLOAD_HDR2_SIZE_4(x)\t(x)\n#define PKT_OFFLOAD_EPKT_OP\t\t(2 << 28)\n#define  PKT_OFFLOAD_EPKT_WRBACK\tBIT(23)\n#define  PKT_OFFLOAD_EPKT_IP(x)\t\t((x) << 21)\n#define  PKT_OFFLOAD_EPKT_TP(x)\t\t((x) << 19)\n#define  PKT_OFFLOAD_EPKT_LEN(x)\t((x) << 16)\n#define  PKT_OFFLOAD_EPKT_CSUM_L3\tBIT(15)\n#define  PKT_OFFLOAD_EPKT_CSUM_L2\tBIT(14)\n#define  PKT_OFFLOAD_EPKT_ID(x)\t\t((x) << 12)\n#define  PKT_OFFLOAD_EPKT_SEQ(x)\t((x) << 10)\n#define  PKT_OFFLOAD_EPKT_TS(x)\t\t((x) << 8)\n#define  PKT_OFFLOAD_EPKT_BLOC(x)\t(x)\n#define PKT_OFFLOAD_END_OP\t\t(7 << 28)\n\nstruct bcmasp_pkt_offload {\n\t__be32\t\tnop;\n\t__be32\t\theader;\n\t__be32\t\theader2;\n\t__be32\t\tepkt;\n\t__be32\t\tend;\n};\n\n#define BCMASP_CORE_IO_MACRO(name, offset)\t\t\t\t\\\nstatic inline u32 name##_core_rl(struct bcmasp_priv *priv,\t\t\\\n\t\t\t\t u32 off)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tu32 reg = readl_relaxed(priv->base + (offset) + off);\t\t\\\n\treturn reg;\t\t\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\nstatic inline void name##_core_wl(struct bcmasp_priv *priv,\t\t\\\n\t\t\t\t  u32 val, u32 off)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\twritel_relaxed(val, priv->base + (offset) + off);\t\t\\\n}\n\nBCMASP_CORE_IO_MACRO(intr2, ASP_INTR2_OFFSET);\nBCMASP_CORE_IO_MACRO(wakeup_intr2, ASP_WAKEUP_INTR2_OFFSET);\nBCMASP_CORE_IO_MACRO(tx_analytics, ASP_TX_ANALYTICS_OFFSET);\nBCMASP_CORE_IO_MACRO(rx_analytics, ASP_RX_ANALYTICS_OFFSET);\nBCMASP_CORE_IO_MACRO(rx_ctrl, ASP_RX_CTRL_OFFSET);\nBCMASP_CORE_IO_MACRO(rx_filter, ASP_RX_FILTER_OFFSET);\nBCMASP_CORE_IO_MACRO(rx_edpkt, ASP_EDPKT_OFFSET);\nBCMASP_CORE_IO_MACRO(ctrl, ASP_CTRL);\n\nstruct bcmasp_intf *bcmasp_interface_create(struct bcmasp_priv *priv,\n\t\t\t\t\t    struct device_node *ndev_dn, int i);\n\nvoid bcmasp_interface_destroy(struct bcmasp_intf *intf);\n\nvoid bcmasp_enable_tx_irq(struct bcmasp_intf *intf, int en);\n\nvoid bcmasp_enable_rx_irq(struct bcmasp_intf *intf, int en);\n\nvoid bcmasp_flush_rx_port(struct bcmasp_intf *intf);\n\nextern const struct ethtool_ops bcmasp_ethtool_ops;\n\nint bcmasp_interface_suspend(struct bcmasp_intf *intf);\n\nint bcmasp_interface_resume(struct bcmasp_intf *intf);\n\nvoid bcmasp_set_promisc(struct bcmasp_intf *intf, bool en);\n\nvoid bcmasp_set_allmulti(struct bcmasp_intf *intf, bool en);\n\nvoid bcmasp_set_broad(struct bcmasp_intf *intf, bool en);\n\nvoid bcmasp_set_oaddr(struct bcmasp_intf *intf, const unsigned char *addr,\n\t\t      bool en);\n\nint bcmasp_set_en_mda_filter(struct bcmasp_intf *intf, unsigned char *addr,\n\t\t\t     unsigned char *mask);\n\nvoid bcmasp_disable_all_filters(struct bcmasp_intf *intf);\n\nvoid bcmasp_core_clock_set_intf(struct bcmasp_intf *intf, bool en);\n\nstruct bcmasp_net_filter *bcmasp_netfilt_get_init(struct bcmasp_intf *intf,\n\t\t\t\t\t\t  u32 loc, bool wake_filter,\n\t\t\t\t\t\t  bool init);\n\nbool bcmasp_netfilt_check_dup(struct bcmasp_intf *intf,\n\t\t\t      struct ethtool_rx_flow_spec *fs);\n\nvoid bcmasp_netfilt_release(struct bcmasp_intf *intf,\n\t\t\t    struct bcmasp_net_filter *nfilt);\n\nint bcmasp_netfilt_get_active(struct bcmasp_intf *intf);\n\nint bcmasp_netfilt_get_all_active(struct bcmasp_intf *intf, u32 *rule_locs,\n\t\t\t\t  u32 *rule_cnt);\n\nvoid bcmasp_netfilt_suspend(struct bcmasp_intf *intf);\n\nvoid bcmasp_eee_enable_set(struct bcmasp_intf *intf, bool enable);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}