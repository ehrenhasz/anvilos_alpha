{
  "module_name": "bcmsysport.h",
  "hash_id": "13b5846609d0fa9a768185f471ff28b5fa50581627258d1fed978308f144aaa4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/broadcom/bcmsysport.h",
  "human_readable_source": " \n \n\n#ifndef __BCM_SYSPORT_H\n#define __BCM_SYSPORT_H\n\n#include <linux/bitmap.h>\n#include <linux/ethtool.h>\n#include <linux/if_vlan.h>\n#include <linux/dim.h>\n\n#include \"unimac.h\"\n\n \n#define DESC_ADDR_HI_STATUS_LEN\t0x00\n#define  DESC_ADDR_HI_SHIFT\t0\n#define  DESC_ADDR_HI_MASK\t0xff\n#define  DESC_STATUS_SHIFT\t8\n#define  DESC_STATUS_MASK\t0x3ff\n#define  DESC_LEN_SHIFT\t\t18\n#define  DESC_LEN_MASK\t\t0x7fff\n#define DESC_ADDR_LO\t\t0x04\n\n \n#define DESC_SIZE\t\t(WORDS_PER_DESC * sizeof(u32))\n\n \n#define RX_BUF_LENGTH\t\t2048\n\n \n#define ENET_BRCM_TAG_LEN\t4\n#define ENET_PAD\t\t10\n#define UMAC_MAX_MTU_SIZE\t(ETH_DATA_LEN + ETH_HLEN + VLAN_HLEN + \\\n\t\t\t\t ENET_BRCM_TAG_LEN + ETH_FCS_LEN + ENET_PAD)\n\n \nstruct bcm_tsb {\n\tu32 pcp_dei_vid;\n#define PCP_DEI_MASK\t\t0xf\n#define VID_SHIFT\t\t4\n#define VID_MASK\t\t0xfff\n\tu32 l4_ptr_dest_map;\n#define L4_CSUM_PTR_MASK\t0x1ff\n#define L4_PTR_SHIFT\t\t9\n#define L4_PTR_MASK\t\t0x1ff\n#define L4_UDP\t\t\t(1 << 18)\n#define L4_LENGTH_VALID\t\t(1 << 19)\n#define DEST_MAP_SHIFT\t\t20\n#define DEST_MAP_MASK\t\t0x1ff\n};\n\n \nstruct bcm_rsb {\n\tu32 rx_status_len;\n\tu32 brcm_egress_tag;\n};\n\n \n#define DESC_L4_CSUM\t\t(1 << 7)\n#define DESC_SOP\t\t(1 << 8)\n#define DESC_EOP\t\t(1 << 9)\n\n \n#define RX_STATUS_UCAST\t\t\t0\n#define RX_STATUS_BCAST\t\t\t0x04\n#define RX_STATUS_MCAST\t\t\t0x08\n#define RX_STATUS_L2_MCAST\t\t0x0c\n#define RX_STATUS_ERR\t\t\t(1 << 4)\n#define RX_STATUS_OVFLOW\t\t(1 << 5)\n#define RX_STATUS_PARSE_FAIL\t\t(1 << 6)\n\n \n#define TX_STATUS_VLAN_NO_ACT\t\t0x00\n#define TX_STATUS_VLAN_PCP_TSB\t\t0x01\n#define TX_STATUS_VLAN_QUEUE\t\t0x02\n#define TX_STATUS_VLAN_VID_TSB\t\t0x03\n#define TX_STATUS_OWR_CRC\t\t(1 << 2)\n#define TX_STATUS_APP_CRC\t\t(1 << 3)\n#define TX_STATUS_BRCM_TAG_NO_ACT\t0\n#define TX_STATUS_BRCM_TAG_ZERO\t\t0x10\n#define TX_STATUS_BRCM_TAG_ONE_QUEUE\t0x20\n#define TX_STATUS_BRCM_TAG_ONE_TSB\t0x30\n#define TX_STATUS_SKIP_BYTES\t\t(1 << 6)\n\n \n#define SYS_PORT_TOPCTRL_OFFSET\t\t0\n#define REV_CNTL\t\t\t0x00\n#define  REV_MASK\t\t\t0xffff\n\n#define RX_FLUSH_CNTL\t\t\t0x04\n#define  RX_FLUSH\t\t\t(1 << 0)\n\n#define TX_FLUSH_CNTL\t\t\t0x08\n#define  TX_FLUSH\t\t\t(1 << 0)\n\n#define MISC_CNTL\t\t\t0x0c\n#define  SYS_CLK_SEL\t\t\t(1 << 0)\n#define  TDMA_EOP_SEL\t\t\t(1 << 1)\n\n \n#define SYS_PORT_INTRL2_0_OFFSET\t0x200\n#define SYS_PORT_INTRL2_1_OFFSET\t0x240\n#define INTRL2_CPU_STATUS\t\t0x00\n#define INTRL2_CPU_SET\t\t\t0x04\n#define INTRL2_CPU_CLEAR\t\t0x08\n#define INTRL2_CPU_MASK_STATUS\t\t0x0c\n#define INTRL2_CPU_MASK_SET\t\t0x10\n#define INTRL2_CPU_MASK_CLEAR\t\t0x14\n\n \n#define INTRL2_0_GISB_ERR\t\t(1 << 0)\n#define INTRL2_0_RBUF_OVFLOW\t\t(1 << 1)\n#define INTRL2_0_TBUF_UNDFLOW\t\t(1 << 2)\n#define INTRL2_0_MPD\t\t\t(1 << 3)\n#define INTRL2_0_BRCM_MATCH_TAG\t\t(1 << 4)\n#define INTRL2_0_RDMA_MBDONE\t\t(1 << 5)\n#define INTRL2_0_OVER_MAX_THRESH\t(1 << 6)\n#define INTRL2_0_BELOW_HYST_THRESH\t(1 << 7)\n#define INTRL2_0_FREE_LIST_EMPTY\t(1 << 8)\n#define INTRL2_0_TX_RING_FULL\t\t(1 << 9)\n#define INTRL2_0_DESC_ALLOC_ERR\t\t(1 << 10)\n#define INTRL2_0_UNEXP_PKTSIZE_ACK\t(1 << 11)\n\n \n#define INTRL2_0_TDMA_MBDONE_SHIFT\t12\n#define INTRL2_0_TDMA_MBDONE_MASK\t(0xffff << INTRL2_0_TDMA_MBDONE_SHIFT)\n\n \n#define SYS_PORT_RXCHK_OFFSET\t\t0x300\n\n#define RXCHK_CONTROL\t\t\t0x00\n#define  RXCHK_EN\t\t\t(1 << 0)\n#define  RXCHK_SKIP_FCS\t\t\t(1 << 1)\n#define  RXCHK_BAD_CSUM_DIS\t\t(1 << 2)\n#define  RXCHK_BRCM_TAG_EN\t\t(1 << 3)\n#define  RXCHK_BRCM_TAG_MATCH_SHIFT\t4\n#define  RXCHK_BRCM_TAG_MATCH_MASK\t0xff\n#define  RXCHK_PARSE_TNL\t\t(1 << 12)\n#define  RXCHK_VIOL_EN\t\t\t(1 << 13)\n#define  RXCHK_VIOL_DIS\t\t\t(1 << 14)\n#define  RXCHK_INCOM_PKT\t\t(1 << 15)\n#define  RXCHK_V6_DUPEXT_EN\t\t(1 << 16)\n#define  RXCHK_V6_DUPEXT_DIS\t\t(1 << 17)\n#define  RXCHK_ETHERTYPE_DIS\t\t(1 << 18)\n#define  RXCHK_L2_HDR_DIS\t\t(1 << 19)\n#define  RXCHK_L3_HDR_DIS\t\t(1 << 20)\n#define  RXCHK_MAC_RX_ERR_DIS\t\t(1 << 21)\n#define  RXCHK_PARSE_AUTH\t\t(1 << 22)\n\n#define RXCHK_BRCM_TAG0\t\t\t0x04\n#define RXCHK_BRCM_TAG(i)\t\t((i) * 0x4 + RXCHK_BRCM_TAG0)\n#define RXCHK_BRCM_TAG0_MASK\t\t0x24\n#define RXCHK_BRCM_TAG_MASK(i)\t\t((i) * 0x4 + RXCHK_BRCM_TAG0_MASK)\n#define RXCHK_BRCM_TAG_MATCH_STATUS\t0x44\n#define RXCHK_ETHERTYPE\t\t\t0x48\n#define RXCHK_BAD_CSUM_CNTR\t\t0x4C\n#define RXCHK_OTHER_DISC_CNTR\t\t0x50\n\n#define RXCHK_BRCM_TAG_MAX\t\t8\n#define RXCHK_BRCM_TAG_CID_SHIFT\t16\n#define RXCHK_BRCM_TAG_CID_MASK\t\t0xff\n\n \n#define SYS_PORT_TXCHK_OFFSET\t\t0x380\n#define TXCHK_PKT_RDY_THRESH\t\t0x00\n\n \n#define SYS_PORT_RBUF_OFFSET\t\t0x400\n\n#define RBUF_CONTROL\t\t\t0x00\n#define  RBUF_RSB_EN\t\t\t(1 << 0)\n#define  RBUF_4B_ALGN\t\t\t(1 << 1)\n#define  RBUF_BRCM_TAG_STRIP\t\t(1 << 2)\n#define  RBUF_BAD_PKT_DISC\t\t(1 << 3)\n#define  RBUF_RESUME_THRESH_SHIFT\t4\n#define  RBUF_RESUME_THRESH_MASK\t0xff\n#define  RBUF_OK_TO_SEND_SHIFT\t\t12\n#define  RBUF_OK_TO_SEND_MASK\t\t0xff\n#define  RBUF_CRC_REPLACE\t\t(1 << 20)\n#define  RBUF_OK_TO_SEND_MODE\t\t(1 << 21)\n \n#define  RBUF_RSB_SWAP0\t\t\t(1 << 22)\n#define  RBUF_RSB_SWAP1\t\t\t(1 << 23)\n#define  RBUF_ACPI_EN\t\t\t(1 << 23)\n#define  RBUF_ACPI_EN_LITE\t\t(1 << 24)\n\n#define RBUF_PKT_RDY_THRESH\t\t0x04\n\n#define RBUF_STATUS\t\t\t0x08\n#define  RBUF_WOL_MODE\t\t\t(1 << 0)\n#define  RBUF_MPD\t\t\t(1 << 1)\n#define  RBUF_ACPI\t\t\t(1 << 2)\n\n#define RBUF_OVFL_DISC_CNTR\t\t0x0c\n#define RBUF_ERR_PKT_CNTR\t\t0x10\n\n \n#define SYS_PORT_TBUF_OFFSET\t\t0x600\n\n#define TBUF_CONTROL\t\t\t0x00\n#define  TBUF_BP_EN\t\t\t(1 << 0)\n#define  TBUF_MAX_PKT_THRESH_SHIFT\t1\n#define  TBUF_MAX_PKT_THRESH_MASK\t0x1f\n#define  TBUF_FULL_THRESH_SHIFT\t\t8\n#define  TBUF_FULL_THRESH_MASK\t\t0x1f\n\n \n#define SYS_PORT_UMAC_OFFSET\t\t0x800\n\n#define UMAC_MIB_START\t\t\t0x400\n\n \n#define UMAC_MIB_STAT_OFFSET\t\t0xc\n\n#define UMAC_MIB_CTRL\t\t\t0x580\n#define  MIB_RX_CNT_RST\t\t\t(1 << 0)\n#define  MIB_RUNT_CNT_RST\t\t(1 << 1)\n#define  MIB_TX_CNT_RST\t\t\t(1 << 2)\n\n \n#define UMAC_MPD_CTRL\t\t\t0x620\n#define  MPD_EN\t\t\t\t(1 << 0)\n#define  MSEQ_LEN_SHIFT\t\t\t16\n#define  MSEQ_LEN_MASK\t\t\t0xff\n#define  PSW_EN\t\t\t\t(1 << 27)\n\n#define UMAC_PSW_MS\t\t\t0x624\n#define UMAC_PSW_LS\t\t\t0x628\n#define UMAC_MDF_CTRL\t\t\t0x650\n#define UMAC_MDF_ADDR\t\t\t0x654\n\n \n#define SYS_PORT_GIB_OFFSET\t\t0x1000\n\n#define GIB_CONTROL\t\t\t0x00\n#define  GIB_TX_EN\t\t\t(1 << 0)\n#define  GIB_RX_EN\t\t\t(1 << 1)\n#define  GIB_TX_FLUSH\t\t\t(1 << 2)\n#define  GIB_RX_FLUSH\t\t\t(1 << 3)\n#define  GIB_GTX_CLK_SEL_SHIFT\t\t4\n#define  GIB_GTX_CLK_EXT_CLK\t\t(0 << GIB_GTX_CLK_SEL_SHIFT)\n#define  GIB_GTX_CLK_125MHZ\t\t(1 << GIB_GTX_CLK_SEL_SHIFT)\n#define  GIB_GTX_CLK_250MHZ\t\t(2 << GIB_GTX_CLK_SEL_SHIFT)\n#define  GIB_FCS_STRIP_SHIFT\t\t6\n#define  GIB_FCS_STRIP\t\t\t(1 << GIB_FCS_STRIP_SHIFT)\n#define  GIB_LCL_LOOP_EN\t\t(1 << 7)\n#define  GIB_LCL_LOOP_TXEN\t\t(1 << 8)\n#define  GIB_RMT_LOOP_EN\t\t(1 << 9)\n#define  GIB_RMT_LOOP_RXEN\t\t(1 << 10)\n#define  GIB_RX_PAUSE_EN\t\t(1 << 11)\n#define  GIB_PREAMBLE_LEN_SHIFT\t\t12\n#define  GIB_PREAMBLE_LEN_MASK\t\t0xf\n#define  GIB_IPG_LEN_SHIFT\t\t16\n#define  GIB_IPG_LEN_MASK\t\t0x3f\n#define  GIB_PAD_EXTENSION_SHIFT\t22\n#define  GIB_PAD_EXTENSION_MASK\t\t0x3f\n\n#define GIB_MAC1\t\t\t0x08\n#define GIB_MAC0\t\t\t0x0c\n\n \n#define SYS_PORT_RDMA_OFFSET\t\t0x2000\n\n#define RDMA_CONTROL\t\t\t0x1000\n#define  RDMA_EN\t\t\t(1 << 0)\n#define  RDMA_RING_CFG\t\t\t(1 << 1)\n#define  RDMA_DISC_EN\t\t\t(1 << 2)\n#define  RDMA_BUF_DATA_OFFSET_SHIFT\t4\n#define  RDMA_BUF_DATA_OFFSET_MASK\t0x3ff\n\n#define RDMA_STATUS\t\t\t0x1004\n#define  RDMA_DISABLED\t\t\t(1 << 0)\n#define  RDMA_DESC_RAM_INIT_BUSY\t(1 << 1)\n#define  RDMA_BP_STATUS\t\t\t(1 << 2)\n\n#define RDMA_SCB_BURST_SIZE\t\t0x1008\n\n#define RDMA_RING_BUF_SIZE\t\t0x100c\n#define  RDMA_RING_SIZE_SHIFT\t\t16\n\n#define RDMA_WRITE_PTR_HI\t\t0x1010\n#define RDMA_WRITE_PTR_LO\t\t0x1014\n#define RDMA_OVFL_DISC_CNTR\t\t0x1018\n#define RDMA_PROD_INDEX\t\t\t0x1018\n#define  RDMA_PROD_INDEX_MASK\t\t0xffff\n\n#define RDMA_CONS_INDEX\t\t\t0x101c\n#define  RDMA_CONS_INDEX_MASK\t\t0xffff\n\n#define RDMA_START_ADDR_HI\t\t0x1020\n#define RDMA_START_ADDR_LO\t\t0x1024\n#define RDMA_END_ADDR_HI\t\t0x1028\n#define RDMA_END_ADDR_LO\t\t0x102c\n\n#define RDMA_MBDONE_INTR\t\t0x1030\n#define  RDMA_INTR_THRESH_MASK\t\t0x1ff\n#define  RDMA_TIMEOUT_SHIFT\t\t16\n#define  RDMA_TIMEOUT_MASK\t\t0xffff\n\n#define RDMA_XON_XOFF_THRESH\t\t0x1034\n#define  RDMA_XON_XOFF_THRESH_MASK\t0xffff\n#define  RDMA_XOFF_THRESH_SHIFT\t\t16\n\n#define RDMA_READ_PTR_HI\t\t0x1038\n#define RDMA_READ_PTR_LO\t\t0x103c\n\n#define RDMA_OVERRIDE\t\t\t0x1040\n#define  RDMA_LE_MODE\t\t\t(1 << 0)\n#define  RDMA_REG_MODE\t\t\t(1 << 1)\n\n#define RDMA_TEST\t\t\t0x1044\n#define  RDMA_TP_OUT_SEL\t\t(1 << 0)\n#define  RDMA_MEM_SEL\t\t\t(1 << 1)\n\n#define RDMA_DEBUG\t\t\t0x1048\n\n \n#define TDMA_NUM_RINGS\t\t\t32\t \n#define TDMA_PORT_SIZE\t\t\tDESC_SIZE  \n\n#define SYS_PORT_TDMA_OFFSET\t\t0x4000\n#define TDMA_WRITE_PORT_OFFSET\t\t0x0000\n#define TDMA_WRITE_PORT_HI(i)\t\t(TDMA_WRITE_PORT_OFFSET + \\\n\t\t\t\t\t(i) * TDMA_PORT_SIZE)\n#define TDMA_WRITE_PORT_LO(i)\t\t(TDMA_WRITE_PORT_OFFSET + \\\n\t\t\t\t\tsizeof(u32) + (i) * TDMA_PORT_SIZE)\n\n#define TDMA_READ_PORT_OFFSET\t\t(TDMA_WRITE_PORT_OFFSET + \\\n\t\t\t\t\t(TDMA_NUM_RINGS * TDMA_PORT_SIZE))\n#define TDMA_READ_PORT_HI(i)\t\t(TDMA_READ_PORT_OFFSET + \\\n\t\t\t\t\t(i) * TDMA_PORT_SIZE)\n#define TDMA_READ_PORT_LO(i)\t\t(TDMA_READ_PORT_OFFSET + \\\n\t\t\t\t\tsizeof(u32) + (i) * TDMA_PORT_SIZE)\n\n#define TDMA_READ_PORT_CMD_OFFSET\t(TDMA_READ_PORT_OFFSET + \\\n\t\t\t\t\t(TDMA_NUM_RINGS * TDMA_PORT_SIZE))\n#define TDMA_READ_PORT_CMD(i)\t\t(TDMA_READ_PORT_CMD_OFFSET + \\\n\t\t\t\t\t(i) * sizeof(u32))\n\n#define TDMA_DESC_RING_00_BASE\t\t(TDMA_READ_PORT_CMD_OFFSET + \\\n\t\t\t\t\t(TDMA_NUM_RINGS * sizeof(u32)))\n\n \n#define RING_HEAD_TAIL_PTR\t\t0x00\n#define  RING_HEAD_MASK\t\t\t0x7ff\n#define  RING_TAIL_SHIFT\t\t11\n#define  RING_TAIL_MASK\t\t\t0x7ff\n#define  RING_FLUSH\t\t\t(1 << 24)\n#define  RING_EN\t\t\t(1 << 25)\n\n#define RING_COUNT\t\t\t0x04\n#define  RING_COUNT_MASK\t\t0x7ff\n#define  RING_BUFF_DONE_SHIFT\t\t11\n#define  RING_BUFF_DONE_MASK\t\t0x7ff\n\n#define RING_MAX_HYST\t\t\t0x08\n#define  RING_MAX_THRESH_MASK\t\t0x7ff\n#define  RING_HYST_THRESH_SHIFT\t\t11\n#define  RING_HYST_THRESH_MASK\t\t0x7ff\n\n#define RING_INTR_CONTROL\t\t0x0c\n#define  RING_INTR_THRESH_MASK\t\t0x7ff\n#define  RING_EMPTY_INTR_EN\t\t(1 << 15)\n#define  RING_TIMEOUT_SHIFT\t\t16\n#define  RING_TIMEOUT_MASK\t\t0xffff\n\n#define RING_PROD_CONS_INDEX\t\t0x10\n#define  RING_PROD_INDEX_MASK\t\t0xffff\n#define  RING_CONS_INDEX_SHIFT\t\t16\n#define  RING_CONS_INDEX_MASK\t\t0xffff\n\n#define RING_MAPPING\t\t\t0x14\n#define  RING_QID_MASK\t\t\t0x7\n#define  RING_PORT_ID_SHIFT\t\t3\n#define  RING_PORT_ID_MASK\t\t0x7\n#define  RING_IGNORE_STATUS\t\t(1 << 6)\n#define  RING_FAILOVER_EN\t\t(1 << 7)\n#define  RING_CREDIT_SHIFT\t\t8\n#define  RING_CREDIT_MASK\t\t0xffff\n\n#define RING_PCP_DEI_VID\t\t0x18\n#define  RING_VID_MASK\t\t\t0x7ff\n#define  RING_DEI\t\t\t(1 << 12)\n#define  RING_PCP_SHIFT\t\t\t13\n#define  RING_PCP_MASK\t\t\t0x7\n#define  RING_PKT_SIZE_ADJ_SHIFT\t16\n#define  RING_PKT_SIZE_ADJ_MASK\t\t0xf\n\n#define TDMA_DESC_RING_SIZE\t\t28\n\n \n#define TDMA_DESC_RING_BASE(i)\t\t(TDMA_DESC_RING_00_BASE + \\\n\t\t\t\t\t((i) * TDMA_DESC_RING_SIZE))\n\n \n#define TDMA_DESC_RING_HEAD_TAIL_PTR(i)\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_HEAD_TAIL_PTR)\n#define TDMA_DESC_RING_COUNT(i)\t\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_COUNT)\n#define TDMA_DESC_RING_MAX_HYST(i)\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_MAX_HYST)\n#define TDMA_DESC_RING_INTR_CONTROL(i)\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_INTR_CONTROL)\n#define TDMA_DESC_RING_PROD_CONS_INDEX(i) \\\n\t\t\t\t\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_PROD_CONS_INDEX)\n#define TDMA_DESC_RING_MAPPING(i)\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_MAPPING)\n#define TDMA_DESC_RING_PCP_DEI_VID(i)\t(TDMA_DESC_RING_BASE(i) + \\\n\t\t\t\t\tRING_PCP_DEI_VID)\n\n#define TDMA_CONTROL\t\t\t0x600\n#define  TDMA_EN\t\t\t0\n#define  TSB_EN\t\t\t\t1\n \n#define  TSB_SWAP0\t\t\t2\n#define  TSB_SWAP1\t\t\t3\n#define  ACB_ALGO\t\t\t3\n#define  BUF_DATA_OFFSET_SHIFT\t\t4\n#define  BUF_DATA_OFFSET_MASK\t\t0x3ff\n#define  VLAN_EN\t\t\t14\n#define  SW_BRCM_TAG\t\t\t15\n#define  WNC_KPT_SIZE_UPDATE\t\t16\n#define  SYNC_PKT_SIZE\t\t\t17\n#define  ACH_TXDONE_DELAY_SHIFT\t\t18\n#define  ACH_TXDONE_DELAY_MASK\t\t0xff\n\n#define TDMA_STATUS\t\t\t0x604\n#define  TDMA_DISABLED\t\t\t(1 << 0)\n#define  TDMA_LL_RAM_INIT_BUSY\t\t(1 << 1)\n\n#define TDMA_SCB_BURST_SIZE\t\t0x608\n#define TDMA_OVER_MAX_THRESH_STATUS\t0x60c\n#define TDMA_OVER_HYST_THRESH_STATUS\t0x610\n#define TDMA_TPID\t\t\t0x614\n\n#define TDMA_FREE_LIST_HEAD_TAIL_PTR\t0x618\n#define  TDMA_FREE_HEAD_MASK\t\t0x7ff\n#define  TDMA_FREE_TAIL_SHIFT\t\t11\n#define  TDMA_FREE_TAIL_MASK\t\t0x7ff\n\n#define TDMA_FREE_LIST_COUNT\t\t0x61c\n#define  TDMA_FREE_LIST_COUNT_MASK\t0x7ff\n\n#define TDMA_TIER2_ARB_CTRL\t\t0x620\n#define  TDMA_ARB_MODE_RR\t\t0\n#define  TDMA_ARB_MODE_WEIGHT_RR\t0x1\n#define  TDMA_ARB_MODE_STRICT\t\t0x2\n#define  TDMA_ARB_MODE_DEFICIT_RR\t0x3\n#define  TDMA_CREDIT_SHIFT\t\t4\n#define  TDMA_CREDIT_MASK\t\t0xffff\n\n#define TDMA_TIER1_ARB_0_CTRL\t\t0x624\n#define  TDMA_ARB_EN\t\t\t(1 << 0)\n\n#define TDMA_TIER1_ARB_0_QUEUE_EN\t0x628\n#define TDMA_TIER1_ARB_1_CTRL\t\t0x62c\n#define TDMA_TIER1_ARB_1_QUEUE_EN\t0x630\n#define TDMA_TIER1_ARB_2_CTRL\t\t0x634\n#define TDMA_TIER1_ARB_2_QUEUE_EN\t0x638\n#define TDMA_TIER1_ARB_3_CTRL\t\t0x63c\n#define TDMA_TIER1_ARB_3_QUEUE_EN\t0x640\n\n#define TDMA_SCB_ENDIAN_OVERRIDE\t0x644\n#define  TDMA_LE_MODE\t\t\t(1 << 0)\n#define  TDMA_REG_MODE\t\t\t(1 << 1)\n\n#define TDMA_TEST\t\t\t0x648\n#define  TDMA_TP_OUT_SEL\t\t(1 << 0)\n#define  TDMA_MEM_TM\t\t\t(1 << 1)\n\n#define TDMA_DEBUG\t\t\t0x64c\n\n \n#define SP_NUM_HW_RX_DESC_WORDS\t\t1024\n#define SP_LT_NUM_HW_RX_DESC_WORDS\t512\n\n \n#define SP_NUM_TX_DESC\t\t\t1536\n#define SP_LT_NUM_TX_DESC\t\t256\n\n#define WORDS_PER_DESC\t\t\t2\n\n \nstruct bcm_sysport_pkt_counters {\n\tu32\tcnt_64;\t\t \n\tu32\tcnt_127;\t \n\tu32\tcnt_255;\t \n\tu32\tcnt_511;\t \n\tu32\tcnt_1023;\t \n\tu32\tcnt_1518;\t \n\tu32\tcnt_mgv;\t \n\tu32\tcnt_2047;\t \n\tu32\tcnt_4095;\t \n\tu32\tcnt_9216;\t \n};\n\n \nstruct bcm_sysport_rx_counters {\n\tstruct  bcm_sysport_pkt_counters pkt_cnt;\n\tu32\tpkt;\t\t \n\tu32\tbytes;\t\t \n\tu32\tmca;\t\t \n\tu32\tbca;\t\t \n\tu32\tfcs;\t\t \n\tu32\tcf;\t\t \n\tu32\tpf;\t\t \n\tu32\tuo;\t\t \n\tu32\taln;\t\t \n\tu32\tflr;\t\t \n\tu32\tcde;\t\t \n\tu32\tfcr;\t\t \n\tu32\tovr;\t\t \n\tu32\tjbr;\t\t \n\tu32\tmtue;\t\t \n\tu32\tpok;\t\t \n\tu32\tuc;\t\t \n\tu32\tppp;\t\t \n\tu32\trcrc;\t\t \n};\n\n \nstruct bcm_sysport_tx_counters {\n\tstruct bcm_sysport_pkt_counters pkt_cnt;\n\tu32\tpkts;\t\t \n\tu32\tmca;\t\t \n\tu32\tbca;\t\t \n\tu32\tpf;\t\t \n\tu32\tcf;\t\t \n\tu32\tfcs;\t\t \n\tu32\tovr;\t\t \n\tu32\tdrf;\t\t \n\tu32\tedf;\t\t \n\tu32\tscl;\t\t \n\tu32\tmcl;\t\t \n\tu32\tlcl;\t\t \n\tu32\tecl;\t\t \n\tu32\tfrg;\t\t \n\tu32\tncl;\t\t \n\tu32\tjbr;\t\t \n\tu32\tbytes;\t\t \n\tu32\tpok;\t\t \n\tu32\tuc;\t\t \n};\n\nstruct bcm_sysport_mib {\n\tstruct bcm_sysport_rx_counters rx;\n\tstruct bcm_sysport_tx_counters tx;\n\tu32 rx_runt_cnt;\n\tu32 rx_runt_fcs;\n\tu32 rx_runt_fcs_align;\n\tu32 rx_runt_bytes;\n\tu32 rxchk_bad_csum;\n\tu32 rxchk_other_pkt_disc;\n\tu32 rbuf_ovflow_cnt;\n\tu32 rbuf_err_cnt;\n\tu32 rdma_ovflow_cnt;\n\tu32 alloc_rx_buff_failed;\n\tu32 rx_dma_failed;\n\tu32 tx_dma_failed;\n\tu32 tx_realloc_tsb;\n\tu32 tx_realloc_tsb_failed;\n};\n\n \nenum bcm_sysport_stat_type {\n\tBCM_SYSPORT_STAT_NETDEV = -1,\n\tBCM_SYSPORT_STAT_NETDEV64,\n\tBCM_SYSPORT_STAT_MIB_RX,\n\tBCM_SYSPORT_STAT_MIB_TX,\n\tBCM_SYSPORT_STAT_RUNT,\n\tBCM_SYSPORT_STAT_RXCHK,\n\tBCM_SYSPORT_STAT_RBUF,\n\tBCM_SYSPORT_STAT_RDMA,\n\tBCM_SYSPORT_STAT_SOFT,\n};\n\n \n#define STAT_NETDEV(m) { \\\n\t.stat_string = __stringify(m), \\\n\t.stat_sizeof = sizeof(((struct net_device_stats *)0)->m), \\\n\t.stat_offset = offsetof(struct net_device_stats, m), \\\n\t.type = BCM_SYSPORT_STAT_NETDEV, \\\n}\n\n#define STAT_NETDEV64(m) { \\\n\t.stat_string = __stringify(m), \\\n\t.stat_sizeof = sizeof(((struct bcm_sysport_stats64 *)0)->m), \\\n\t.stat_offset = offsetof(struct bcm_sysport_stats64, m), \\\n\t.type = BCM_SYSPORT_STAT_NETDEV64, \\\n}\n\n#define STAT_MIB(str, m, _type) { \\\n\t.stat_string = str, \\\n\t.stat_sizeof = sizeof(((struct bcm_sysport_priv *)0)->m), \\\n\t.stat_offset = offsetof(struct bcm_sysport_priv, m), \\\n\t.type = _type, \\\n}\n\n#define STAT_MIB_RX(str, m) STAT_MIB(str, m, BCM_SYSPORT_STAT_MIB_RX)\n#define STAT_MIB_TX(str, m) STAT_MIB(str, m, BCM_SYSPORT_STAT_MIB_TX)\n#define STAT_RUNT(str, m) STAT_MIB(str, m, BCM_SYSPORT_STAT_RUNT)\n#define STAT_MIB_SOFT(str, m) STAT_MIB(str, m, BCM_SYSPORT_STAT_SOFT)\n\n#define STAT_RXCHK(str, m, ofs) { \\\n\t.stat_string = str, \\\n\t.stat_sizeof = sizeof(((struct bcm_sysport_priv *)0)->m), \\\n\t.stat_offset = offsetof(struct bcm_sysport_priv, m), \\\n\t.type = BCM_SYSPORT_STAT_RXCHK, \\\n\t.reg_offset = ofs, \\\n}\n\n#define STAT_RBUF(str, m, ofs) { \\\n\t.stat_string = str, \\\n\t.stat_sizeof = sizeof(((struct bcm_sysport_priv *)0)->m), \\\n\t.stat_offset = offsetof(struct bcm_sysport_priv, m), \\\n\t.type = BCM_SYSPORT_STAT_RBUF, \\\n\t.reg_offset = ofs, \\\n}\n\n#define STAT_RDMA(str, m, ofs) { \\\n\t.stat_string = str, \\\n\t.stat_sizeof = sizeof(((struct bcm_sysport_priv *)0)->m), \\\n\t.stat_offset = offsetof(struct bcm_sysport_priv, m), \\\n\t.type = BCM_SYSPORT_STAT_RDMA, \\\n\t.reg_offset = ofs, \\\n}\n\n \n#define NUM_SYSPORT_TXQ_STAT\t2\n\nstruct bcm_sysport_stats {\n\tchar stat_string[ETH_GSTRING_LEN];\n\tint stat_sizeof;\n\tint stat_offset;\n\tenum bcm_sysport_stat_type type;\n\t \n\tu16 reg_offset;\n};\n\nstruct bcm_sysport_stats64 {\n\t \n\tu64\trx_packets;\n\tu64\trx_bytes;\n\tu64\ttx_packets;\n\tu64\ttx_bytes;\n};\n\n \nstruct bcm_sysport_cb {\n\tstruct sk_buff\t*skb;\t\t \n\tvoid __iomem\t*bd_addr;\t \n\n\tDEFINE_DMA_UNMAP_ADDR(dma_addr);\n\tDEFINE_DMA_UNMAP_LEN(dma_len);\n};\n\nenum bcm_sysport_type {\n\tSYSTEMPORT = 0,\n\tSYSTEMPORT_LITE,\n};\n\nstruct bcm_sysport_hw_params {\n\tbool\t\tis_lite;\n\tunsigned int\tnum_rx_desc_words;\n};\n\nstruct bcm_sysport_net_dim {\n\tu16\t\t\tuse_dim;\n\tu16\t\t\tevent_ctr;\n\tunsigned long\t\tpackets;\n\tunsigned long\t\tbytes;\n\tstruct dim\t\tdim;\n};\n\n \nstruct bcm_sysport_tx_ring {\n\tspinlock_t\tlock;\t\t \n\tstruct napi_struct napi;\t \n\tunsigned int\tindex;\t\t \n\tunsigned int\tsize;\t\t \n\tunsigned int\talloc_size;\t \n\tunsigned int\tdesc_count;\t \n\tunsigned int\tcurr_desc;\t \n\tunsigned int\tc_index;\t \n\tunsigned int\tclean_index;\t \n\tstruct bcm_sysport_cb *cbs;\t \n\tstruct bcm_sysport_priv *priv;\t \n\tunsigned long\tpackets;\t \n\tunsigned long\tbytes;\t\t \n\tunsigned int\tswitch_queue;\t \n\tunsigned int\tswitch_port;\t \n\tbool\t\tinspect;\t \n};\n\n \nstruct bcm_sysport_priv {\n\tvoid __iomem\t\t*base;\n\tu32\t\t\tirq0_stat;\n\tu32\t\t\tirq0_mask;\n\tu32\t\t\tirq1_stat;\n\tu32\t\t\tirq1_mask;\n\tbool\t\t\tis_lite;\n\tunsigned int\t\tnum_rx_desc_words;\n\tstruct napi_struct\tnapi ____cacheline_aligned;\n\tstruct net_device\t*netdev;\n\tstruct platform_device\t*pdev;\n\tint\t\t\tirq0;\n\tint\t\t\tirq1;\n\tint\t\t\twol_irq;\n\n\t \n\tspinlock_t\t\tdesc_lock;\n\tstruct bcm_sysport_tx_ring *tx_rings;\n\n\t \n\tvoid __iomem\t\t*rx_bds;\n\tstruct bcm_sysport_cb\t*rx_cbs;\n\tunsigned int\t\tnum_rx_bds;\n\tunsigned int\t\trx_read_ptr;\n\tunsigned int\t\trx_c_index;\n\n\tstruct bcm_sysport_net_dim\tdim;\n\tu32\t\t\trx_max_coalesced_frames;\n\tu32\t\t\trx_coalesce_usecs;\n\n\t \n\tstruct device_node\t*phy_dn;\n\tphy_interface_t\t\tphy_interface;\n\tint\t\t\told_pause;\n\tint\t\t\told_link;\n\tint\t\t\told_duplex;\n\n\t \n\tunsigned int\t\trx_chk_en:1;\n\tunsigned int\t\ttsb_en:1;\n\tunsigned int\t\tcrc_fwd:1;\n\tu16\t\t\trev;\n\tu32\t\t\twolopts;\n\tu8\t\t\tsopass[SOPASS_MAX];\n\tunsigned int\t\twol_irq_disabled:1;\n\tstruct clk\t\t*clk;\n\tstruct clk\t\t*wol_clk;\n\n\t \n\tstruct bcm_sysport_mib\tmib;\n\n\t \n\tu32\t\t\tmsg_enable;\n\tDECLARE_BITMAP(filters, RXCHK_BRCM_TAG_MAX);\n\tu32\t\t\tfilters_loc[RXCHK_BRCM_TAG_MAX];\n\n\tstruct bcm_sysport_stats64\tstats64;\n\n\t \n\tstruct u64_stats_sync\tsyncp;\n\n\t \n\tstruct notifier_block\tnetdev_notifier;\n\tunsigned int\t\tper_port_num_tx_queues;\n\tstruct bcm_sysport_tx_ring *ring_map[DSA_MAX_PORTS * 8];\n\n};\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}