{
  "module_name": "emac.h",
  "hash_id": "e971b6098c7ccc219b68d793406cfab58557c9528fabb236f5ffa281efe0e96d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/qualcomm/emac/emac.h",
  "human_readable_source": " \n \n\n#ifndef _EMAC_H_\n#define _EMAC_H_\n\n#include <linux/irqreturn.h>\n#include <linux/netdevice.h>\n#include <linux/clk.h>\n#include <linux/platform_device.h>\n#include \"emac-mac.h\"\n#include \"emac-phy.h\"\n#include \"emac-sgmii.h\"\n\n \n#define EMAC_DMA_MAS_CTRL\t\t0x1400\n#define EMAC_IRQ_MOD_TIM_INIT\t\t0x1408\n#define EMAC_BLK_IDLE_STS\t\t0x140c\n#define EMAC_PHY_LINK_DELAY\t\t0x141c\n#define EMAC_SYS_ALIV_CTRL\t\t0x1434\n#define EMAC_MAC_CTRL\t\t\t0x1480\n#define EMAC_MAC_IPGIFG_CTRL\t\t0x1484\n#define EMAC_MAC_STA_ADDR0\t\t0x1488\n#define EMAC_MAC_STA_ADDR1\t\t0x148c\n#define EMAC_HASH_TAB_REG0\t\t0x1490\n#define EMAC_HASH_TAB_REG1\t\t0x1494\n#define EMAC_MAC_HALF_DPLX_CTRL\t\t0x1498\n#define EMAC_MAX_FRAM_LEN_CTRL\t\t0x149c\n#define EMAC_WOL_CTRL0\t\t\t0x14a0\n#define EMAC_RSS_KEY0\t\t\t0x14b0\n#define EMAC_H1TPD_BASE_ADDR_LO\t\t0x14e0\n#define EMAC_H2TPD_BASE_ADDR_LO\t\t0x14e4\n#define EMAC_H3TPD_BASE_ADDR_LO\t\t0x14e8\n#define EMAC_INTER_SRAM_PART9\t\t0x1534\n#define EMAC_DESC_CTRL_0\t\t0x1540\n#define EMAC_DESC_CTRL_1\t\t0x1544\n#define EMAC_DESC_CTRL_2\t\t0x1550\n#define EMAC_DESC_CTRL_10\t\t0x1554\n#define EMAC_DESC_CTRL_12\t\t0x1558\n#define EMAC_DESC_CTRL_13\t\t0x155c\n#define EMAC_DESC_CTRL_3\t\t0x1560\n#define EMAC_DESC_CTRL_4\t\t0x1564\n#define EMAC_DESC_CTRL_5\t\t0x1568\n#define EMAC_DESC_CTRL_14\t\t0x156c\n#define EMAC_DESC_CTRL_15\t\t0x1570\n#define EMAC_DESC_CTRL_16\t\t0x1574\n#define EMAC_DESC_CTRL_6\t\t0x1578\n#define EMAC_DESC_CTRL_8\t\t0x1580\n#define EMAC_DESC_CTRL_9\t\t0x1584\n#define EMAC_DESC_CTRL_11\t\t0x1588\n#define EMAC_TXQ_CTRL_0\t\t\t0x1590\n#define EMAC_TXQ_CTRL_1\t\t\t0x1594\n#define EMAC_TXQ_CTRL_2\t\t\t0x1598\n#define EMAC_RXQ_CTRL_0\t\t\t0x15a0\n#define EMAC_RXQ_CTRL_1\t\t\t0x15a4\n#define EMAC_RXQ_CTRL_2\t\t\t0x15a8\n#define EMAC_RXQ_CTRL_3\t\t\t0x15ac\n#define EMAC_BASE_CPU_NUMBER\t\t0x15b8\n#define EMAC_DMA_CTRL\t\t\t0x15c0\n#define EMAC_MAILBOX_0\t\t\t0x15e0\n#define EMAC_MAILBOX_5\t\t\t0x15e4\n#define EMAC_MAILBOX_6\t\t\t0x15e8\n#define EMAC_MAILBOX_13\t\t\t0x15ec\n#define EMAC_MAILBOX_2\t\t\t0x15f4\n#define EMAC_MAILBOX_3\t\t\t0x15f8\n#define EMAC_INT_STATUS\t\t\t0x1600\n#define EMAC_INT_MASK\t\t\t0x1604\n#define EMAC_MAILBOX_11\t\t\t0x160c\n#define EMAC_AXI_MAST_CTRL\t\t0x1610\n#define EMAC_MAILBOX_12\t\t\t0x1614\n#define EMAC_MAILBOX_9\t\t\t0x1618\n#define EMAC_MAILBOX_10\t\t\t0x161c\n#define EMAC_ATHR_HEADER_CTRL\t\t0x1620\n#define EMAC_RXMAC_STATC_REG0\t\t0x1700\n#define EMAC_RXMAC_STATC_REG22\t\t0x1758\n#define EMAC_TXMAC_STATC_REG0\t\t0x1760\n#define EMAC_TXMAC_STATC_REG24\t\t0x17c0\n#define EMAC_CLK_GATE_CTRL\t\t0x1814\n#define EMAC_CORE_HW_VERSION\t\t0x1974\n#define EMAC_MISC_CTRL\t\t\t0x1990\n#define EMAC_MAILBOX_7\t\t\t0x19e0\n#define EMAC_MAILBOX_8\t\t\t0x19e4\n#define EMAC_IDT_TABLE0\t\t\t0x1b00\n#define EMAC_RXMAC_STATC_REG23\t\t0x1bc8\n#define EMAC_RXMAC_STATC_REG24\t\t0x1bcc\n#define EMAC_TXMAC_STATC_REG25\t\t0x1bd0\n#define EMAC_MAILBOX_15\t\t\t0x1bd4\n#define EMAC_MAILBOX_16\t\t\t0x1bd8\n#define EMAC_INT1_MASK\t\t\t0x1bf0\n#define EMAC_INT1_STATUS\t\t0x1bf4\n#define EMAC_INT2_MASK\t\t\t0x1bf8\n#define EMAC_INT2_STATUS\t\t0x1bfc\n#define EMAC_INT3_MASK\t\t\t0x1c00\n#define EMAC_INT3_STATUS\t\t0x1c04\n\n \n#define DEV_ID_NUM_BMSK                                     0x7f000000\n#define DEV_ID_NUM_SHFT                                             24\n#define DEV_REV_NUM_BMSK                                      0xff0000\n#define DEV_REV_NUM_SHFT                                            16\n#define INT_RD_CLR_EN                                           0x4000\n#define IRQ_MODERATOR2_EN                                        0x800\n#define IRQ_MODERATOR_EN                                         0x400\n#define LPW_CLK_SEL                                               0x80\n#define LPW_STATE                                                 0x20\n#define LPW_MODE                                                  0x10\n#define SOFT_RST                                                   0x1\n\n \n#define IRQ_MODERATOR2_INIT_BMSK                            0xffff0000\n#define IRQ_MODERATOR2_INIT_SHFT                                    16\n#define IRQ_MODERATOR_INIT_BMSK                                 0xffff\n#define IRQ_MODERATOR_INIT_SHFT                                      0\n\n \n#define DIS_INT                                                BIT(31)\n#define PTP_INT                                                BIT(30)\n#define RFD4_UR_INT                                            BIT(29)\n#define TX_PKT_INT3                                            BIT(26)\n#define TX_PKT_INT2                                            BIT(25)\n#define TX_PKT_INT1                                            BIT(24)\n#define RX_PKT_INT3                                            BIT(19)\n#define RX_PKT_INT2                                            BIT(18)\n#define RX_PKT_INT1                                            BIT(17)\n#define RX_PKT_INT0                                            BIT(16)\n#define TX_PKT_INT                                             BIT(15)\n#define TXQ_TO_INT                                             BIT(14)\n#define GPHY_WAKEUP_INT                                        BIT(13)\n#define GPHY_LINK_DOWN_INT                                     BIT(12)\n#define GPHY_LINK_UP_INT                                       BIT(11)\n#define DMAW_TO_INT                                            BIT(10)\n#define DMAR_TO_INT                                             BIT(9)\n#define TXF_UR_INT                                              BIT(8)\n#define RFD3_UR_INT                                             BIT(7)\n#define RFD2_UR_INT                                             BIT(6)\n#define RFD1_UR_INT                                             BIT(5)\n#define RFD0_UR_INT                                             BIT(4)\n#define RXF_OF_INT                                              BIT(3)\n#define SW_MAN_INT                                              BIT(2)\n\n \n#define RFD2_PROC_IDX_BMSK                                   0xfff0000\n#define RFD2_PROC_IDX_SHFT                                          16\n#define RFD2_PROD_IDX_BMSK                                       0xfff\n#define RFD2_PROD_IDX_SHFT                                           0\n\n \n#define MAJOR_BMSK                                          0xf0000000\n#define MAJOR_SHFT                                                  28\n#define MINOR_BMSK                                           0xfff0000\n#define MINOR_SHFT                                                  16\n#define STEP_BMSK                                               0xffff\n#define STEP_SHFT                                                    0\n\n \n#define TX_INDX_FIFO_SYNC_RST                                  BIT(23)\n#define TX_TS_FIFO_SYNC_RST                                    BIT(22)\n#define RX_TS_FIFO2_SYNC_RST                                   BIT(21)\n#define RX_TS_FIFO1_SYNC_RST                                   BIT(20)\n#define TX_TS_ENABLE                                           BIT(16)\n#define DIS_1588_CLKS                                          BIT(11)\n#define FREQ_MODE                                               BIT(9)\n#define ENABLE_RRD_TIMESTAMP                                    BIT(3)\n\n \n#define HDRIVE_BMSK                                             0x3000\n#define HDRIVE_SHFT                                                 12\n#define SLB_EN                                                  BIT(9)\n#define PLB_EN                                                  BIT(8)\n#define WOL_EN                                                  BIT(3)\n#define PHY_RESET                                               BIT(0)\n\n#define EMAC_DEV_ID                                             0x0040\n\n \n#define SGMII_LN_RSM_START             0x029C\n\n \n#define SGMII_PHY_CMN_CTRL            0x0408\n#define SGMII_PHY_CMN_RESET_CTRL      0x0410\n\n \n#define SGMII_PHY_LN_OFFSET          0x0400\n#define SGMII_PHY_LN_LANE_STATUS     0x00DC\n#define SGMII_PHY_LN_BIST_GEN0       0x008C\n#define SGMII_PHY_LN_BIST_GEN1       0x0090\n#define SGMII_PHY_LN_BIST_GEN2       0x0094\n#define SGMII_PHY_LN_BIST_GEN3       0x0098\n#define SGMII_PHY_LN_CDR_CTRL1       0x005C\n\nenum emac_clk_id {\n\tEMAC_CLK_AXI,\n\tEMAC_CLK_CFG_AHB,\n\tEMAC_CLK_HIGH_SPEED,\n\tEMAC_CLK_MDIO,\n\tEMAC_CLK_TX,\n\tEMAC_CLK_RX,\n\tEMAC_CLK_SYS,\n\tEMAC_CLK_CNT\n};\n\n#define EMAC_LINK_SPEED_UNKNOWN                                    0x0\n#define EMAC_LINK_SPEED_10_HALF                                 BIT(0)\n#define EMAC_LINK_SPEED_10_FULL                                 BIT(1)\n#define EMAC_LINK_SPEED_100_HALF                                BIT(2)\n#define EMAC_LINK_SPEED_100_FULL                                BIT(3)\n#define EMAC_LINK_SPEED_1GB_FULL                                BIT(5)\n\n#define EMAC_MAX_SETUP_LNK_CYCLE                                   100\n\nstruct emac_stats {\n\t \n\tu64 rx_ok;               \n\tu64 rx_bcast;            \n\tu64 rx_mcast;            \n\tu64 rx_pause;            \n\tu64 rx_ctrl;             \n\tu64 rx_fcs_err;          \n\tu64 rx_len_err;          \n\tu64 rx_byte_cnt;         \n\tu64 rx_runt;             \n\tu64 rx_frag;             \n\tu64 rx_sz_64;\t         \n\tu64 rx_sz_65_127;        \n\tu64 rx_sz_128_255;       \n\tu64 rx_sz_256_511;       \n\tu64 rx_sz_512_1023;      \n\tu64 rx_sz_1024_1518;     \n\tu64 rx_sz_1519_max;      \n\tu64 rx_sz_ov;            \n\tu64 rx_rxf_ov;           \n\tu64 rx_align_err;        \n\tu64 rx_bcast_byte_cnt;   \n\tu64 rx_mcast_byte_cnt;   \n\tu64 rx_err_addr;         \n\tu64 rx_crc_align;        \n\tu64 rx_jabbers;          \n\n\t \n\tu64 tx_ok;               \n\tu64 tx_bcast;            \n\tu64 tx_mcast;            \n\tu64 tx_pause;            \n\tu64 tx_exc_defer;        \n\tu64 tx_ctrl;             \n\tu64 tx_defer;            \n\tu64 tx_byte_cnt;         \n\tu64 tx_sz_64;            \n\tu64 tx_sz_65_127;        \n\tu64 tx_sz_128_255;       \n\tu64 tx_sz_256_511;       \n\tu64 tx_sz_512_1023;      \n\tu64 tx_sz_1024_1518;     \n\tu64 tx_sz_1519_max;      \n\tu64 tx_1_col;            \n\tu64 tx_2_col;            \n\tu64 tx_late_col;         \n\tu64 tx_abort_col;        \n\tu64 tx_underrun;         \n\tu64 tx_rd_eop;           \n\tu64 tx_len_err;          \n\tu64 tx_trunc;            \n\tu64 tx_bcast_byte;       \n\tu64 tx_mcast_byte;       \n\tu64 tx_col;              \n\n\tspinlock_t lock;\t \n};\n\n \n#define EMAC_RSS_HSTYP_IPV4_EN\t\t\t\t    0x00000001\n#define EMAC_RSS_HSTYP_TCP4_EN\t\t\t\t    0x00000002\n#define EMAC_RSS_HSTYP_IPV6_EN\t\t\t\t    0x00000004\n#define EMAC_RSS_HSTYP_TCP6_EN\t\t\t\t    0x00000008\n#define EMAC_RSS_HSTYP_ALL_EN (\\\n\t\tEMAC_RSS_HSTYP_IPV4_EN   |\\\n\t\tEMAC_RSS_HSTYP_TCP4_EN   |\\\n\t\tEMAC_RSS_HSTYP_IPV6_EN   |\\\n\t\tEMAC_RSS_HSTYP_TCP6_EN)\n\n#define EMAC_VLAN_TO_TAG(_vlan, _tag) \\\n\t\t(_tag =  ((((_vlan) >> 8) & 0xFF) | (((_vlan) & 0xFF) << 8)))\n\n#define EMAC_TAG_TO_VLAN(_tag, _vlan) \\\n\t\t(_vlan = ((((_tag) >> 8) & 0xFF) | (((_tag) & 0xFF) << 8)))\n\n#define EMAC_DEF_RX_BUF_SIZE\t\t\t\t\t  1536\n#define EMAC_MAX_JUMBO_PKT_SIZE\t\t\t\t    (9 * 1024)\n#define EMAC_MAX_TX_OFFLOAD_THRESH\t\t\t    (9 * 1024)\n\n#define EMAC_MAX_ETH_FRAME_SIZE\t\t       EMAC_MAX_JUMBO_PKT_SIZE\n#define EMAC_MIN_ETH_FRAME_SIZE\t\t\t\t\t    68\n\n#define EMAC_DEF_TX_QUEUES\t\t\t\t\t     1\n#define EMAC_DEF_RX_QUEUES\t\t\t\t\t     1\n\n#define EMAC_MIN_TX_DESCS\t\t\t\t\t   128\n#define EMAC_MIN_RX_DESCS\t\t\t\t\t   128\n\n#define EMAC_MAX_TX_DESCS\t\t\t\t\t 16383\n#define EMAC_MAX_RX_DESCS\t\t\t\t\t  2047\n\n#define EMAC_DEF_TX_DESCS\t\t\t\t\t   512\n#define EMAC_DEF_RX_DESCS\t\t\t\t\t   256\n\n#define EMAC_DEF_RX_IRQ_MOD\t\t\t\t\t   250\n#define EMAC_DEF_TX_IRQ_MOD\t\t\t\t\t   250\n\n#define EMAC_WATCHDOG_TIME\t\t\t\t      (5 * HZ)\n\n \n#define EMAC_TRY_LINK_TIMEOUT\t\t\t\t      (4 * HZ)\n\n \nstruct emac_irq {\n\tunsigned int\tirq;\n\tu32\t\tmask;\n};\n\n \nstruct emac_adapter {\n\tstruct net_device\t\t*netdev;\n\tstruct mii_bus\t\t\t*mii_bus;\n\tstruct phy_device\t\t*phydev;\n\n\tvoid __iomem\t\t\t*base;\n\tvoid __iomem\t\t\t*csr;\n\n\tstruct emac_sgmii\t\tphy;\n\tstruct emac_stats\t\tstats;\n\n\tstruct emac_irq\t\t\tirq;\n\tstruct clk\t\t\t*clk[EMAC_CLK_CNT];\n\n\t \n\tstruct emac_ring_header\t\tring_header;\n\tstruct emac_tx_queue\t\ttx_q;\n\tstruct emac_rx_queue\t\trx_q;\n\tunsigned int\t\t\ttx_desc_cnt;\n\tunsigned int\t\t\trx_desc_cnt;\n\tunsigned int\t\t\trrd_size;  \n\tunsigned int\t\t\trfd_size;  \n\tunsigned int\t\t\ttpd_size;  \n\n\tunsigned int\t\t\trxbuf_size;\n\n\t \n\tbool\t\t\t\tautomatic;\n\tbool\t\t\t\ttx_flow_control;\n\tbool\t\t\t\trx_flow_control;\n\n\t \n\tbool\t\t\t\tsingle_pause_mode;\n\n\t \n\tu8\t\t\t\ttpd_burst;\n\tu8\t\t\t\trfd_burst;\n\tunsigned int\t\t\tdmaw_dly_cnt;\n\tunsigned int\t\t\tdmar_dly_cnt;\n\tenum emac_dma_req_block\t\tdmar_block;\n\tenum emac_dma_req_block\t\tdmaw_block;\n\tenum emac_dma_order\t\tdma_order;\n\n\tu32\t\t\t\tirq_mod;\n\tu32\t\t\t\tpreamble;\n\n\tstruct work_struct\t\twork_thread;\n\n\tu16\t\t\t\tmsg_enable;\n\n\tstruct mutex\t\t\treset_lock;\n};\n\nint emac_reinit_locked(struct emac_adapter *adpt);\nvoid emac_reg_update32(void __iomem *addr, u32 mask, u32 val);\n\nvoid emac_set_ethtool_ops(struct net_device *netdev);\nvoid emac_update_hw_stats(struct emac_adapter *adpt);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}