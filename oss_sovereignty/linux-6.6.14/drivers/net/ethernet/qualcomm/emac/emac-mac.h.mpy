{
  "module_name": "emac-mac.h",
  "hash_id": "75174e094e7b6bf2a49aceefdcfa9774e6dff5a1f37ab498666d903ca88a2aef",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/qualcomm/emac/emac-mac.h",
  "human_readable_source": " \n \n\n \n\n#ifndef _EMAC_HW_H_\n#define _EMAC_HW_H_\n\n \n#define EMAC_EMAC_WRAPPER_CSR1                                0x000000\n#define EMAC_EMAC_WRAPPER_CSR2                                0x000004\n#define EMAC_EMAC_WRAPPER_TX_TS_LO                            0x000104\n#define EMAC_EMAC_WRAPPER_TX_TS_HI                            0x000108\n#define EMAC_EMAC_WRAPPER_TX_TS_INX                           0x00010c\n\n \nenum emac_dma_order {\n\temac_dma_ord_in = 1,\n\temac_dma_ord_enh = 2,\n\temac_dma_ord_out = 4\n};\n\nenum emac_dma_req_block {\n\temac_dma_req_128 = 0,\n\temac_dma_req_256 = 1,\n\temac_dma_req_512 = 2,\n\temac_dma_req_1024 = 3,\n\temac_dma_req_2048 = 4,\n\temac_dma_req_4096 = 5\n};\n\n \n#define BITS_GET(val, lo, hi) ((le32_to_cpu(val) & GENMASK((hi), (lo))) >> lo)\n#define BITS_SET(val, lo, hi, new_val) \\\n\tval = cpu_to_le32((le32_to_cpu(val) & (~GENMASK((hi), (lo)))) |\t\\\n\t\t(((new_val) << (lo)) & GENMASK((hi), (lo))))\n\n \nstruct emac_rrd {\n\tu32\tword[6];\n\n \n#define RRD_NOR(rrd)\t\t\tBITS_GET((rrd)->word[0], 16, 19)\n \n#define RRD_SI(rrd)\t\t\tBITS_GET((rrd)->word[0], 20, 31)\n \n#define RRD_CVALN_TAG(rrd)\t\tBITS_GET((rrd)->word[2], 0, 15)\n \n#define RRD_PKT_SIZE(rrd)\t\tBITS_GET((rrd)->word[3], 0, 13)\n \n#define RRD_L4F(rrd)\t\t\tBITS_GET((rrd)->word[3], 14, 14)\n \n#define RRD_CVTAG(rrd)\t\t\tBITS_GET((rrd)->word[3], 16, 16)\n \n#define RRD_UPDT(rrd)\t\t\tBITS_GET((rrd)->word[3], 31, 31)\n#define RRD_UPDT_SET(rrd, val)\t\tBITS_SET((rrd)->word[3], 31, 31, val)\n \n#define RRD_TS_LOW(rrd)\t\t\tBITS_GET((rrd)->word[4], 0, 29)\n \n#define RRD_TS_HI(rrd)\t\t\tle32_to_cpu((rrd)->word[5])\n};\n\n \nstruct emac_tpd {\n\tu32\t\t\t\tword[4];\n\n \n#define TPD_BUF_LEN_SET(tpd, val)\tBITS_SET((tpd)->word[0], 0, 15, val)\n \n#define TPD_CSX_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 8, 8, val)\n \n#define TPD_LSO(tpd)\t\t\tBITS_GET((tpd)->word[1], 12, 12)\n#define TPD_LSO_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 12, 12, val)\n \n#define TPD_LSOV_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 13, 13, val)\n \n#define TPD_IPV4_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 16, 16, val)\n \n#define TPD_TYP_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 17, 17, val)\n \n#define TPD_BUFFER_ADDR_L_SET(tpd, val)\t((tpd)->word[2] = cpu_to_le32(val))\n \n#define TPD_CVLAN_TAG_SET(tpd, val)\tBITS_SET((tpd)->word[3], 0, 15, val)\n \n#define TPD_INSTC_SET(tpd, val)\t\tBITS_SET((tpd)->word[3], 17, 17, val)\n \n#define TPD_BUFFER_ADDR_H_SET(tpd, val)\tBITS_SET((tpd)->word[3], 18, 31, val)\n \n#define TPD_PAYLOAD_OFFSET_SET(tpd, val) BITS_SET((tpd)->word[1], 0, 7, val)\n \n#define TPD_CXSUM_OFFSET_SET(tpd, val)\tBITS_SET((tpd)->word[1], 18, 25, val)\n\n \n#define TPD_TCPHDR_OFFSET_SET(tpd, val)\tBITS_SET((tpd)->word[1], 0, 7, val)\n \n#define TPD_MSS_SET(tpd, val)\t\tBITS_SET((tpd)->word[1], 18, 30, val)\n \n#define TPD_PKT_LEN_SET(tpd, val)\t((tpd)->word[2] = cpu_to_le32(val))\n};\n\n \nstruct emac_ring_header {\n\tvoid\t\t\t*v_addr;\t \n\tdma_addr_t\t\tdma_addr;\t \n\tsize_t\t\t\tsize;\t\t \n\tsize_t\t\t\tused;\n};\n\n \nstruct emac_buffer {\n\tstruct sk_buff\t\t*skb;\t\t \n\tu16\t\t\tlength;\t\t \n\tdma_addr_t\t\tdma_addr;\t \n};\n\n \nstruct emac_rfd_ring {\n\tstruct emac_buffer\t*rfbuff;\n\tu32\t\t\t*v_addr;\t \n\tdma_addr_t\t\tdma_addr;\t \n\tsize_t\t\t\tsize;\t\t \n\tunsigned int\t\tcount;\t\t \n\tunsigned int\t\tproduce_idx;\n\tunsigned int\t\tprocess_idx;\n\tunsigned int\t\tconsume_idx;\t \n};\n\n \nstruct emac_rrd_ring {\n\tu32\t\t\t*v_addr;\t \n\tdma_addr_t\t\tdma_addr;\t \n\tsize_t\t\t\tsize;\t\t \n\tunsigned int\t\tcount;\t\t \n\tunsigned int\t\tproduce_idx;\t \n\tunsigned int\t\tconsume_idx;\n};\n\n \nstruct emac_rx_queue {\n\tstruct net_device\t*netdev;\t \n\tstruct emac_rrd_ring\trrd;\n\tstruct emac_rfd_ring\trfd;\n\tstruct napi_struct\tnapi;\n\tstruct emac_irq\t\t*irq;\n\n\tu32\t\t\tintr;\n\tu32\t\t\tproduce_mask;\n\tu32\t\t\tprocess_mask;\n\tu32\t\t\tconsume_mask;\n\n\tu16\t\t\tproduce_reg;\n\tu16\t\t\tprocess_reg;\n\tu16\t\t\tconsume_reg;\n\n\tu8\t\t\tproduce_shift;\n\tu8\t\t\tprocess_shft;\n\tu8\t\t\tconsume_shift;\n};\n\n \nstruct emac_tpd_ring {\n\tstruct emac_buffer\t*tpbuff;\n\tu32\t\t\t*v_addr;\t \n\tdma_addr_t\t\tdma_addr;\t \n\n\tsize_t\t\t\tsize;\t\t \n\tunsigned int\t\tcount;\t\t \n\tunsigned int\t\tproduce_idx;\n\tunsigned int\t\tconsume_idx;\n\tunsigned int\t\tlast_produce_idx;\n};\n\n \nstruct emac_tx_queue {\n\tstruct emac_tpd_ring\ttpd;\n\n\tu32\t\t\tproduce_mask;\n\tu32\t\t\tconsume_mask;\n\n\tu16\t\t\tmax_packets;\t \n\tu16\t\t\tproduce_reg;\n\tu16\t\t\tconsume_reg;\n\n\tu8\t\t\tproduce_shift;\n\tu8\t\t\tconsume_shift;\n};\n\nstruct emac_adapter;\n\nint  emac_mac_up(struct emac_adapter *adpt);\nvoid emac_mac_down(struct emac_adapter *adpt);\nvoid emac_mac_reset(struct emac_adapter *adpt);\nvoid emac_mac_stop(struct emac_adapter *adpt);\nvoid emac_mac_mode_config(struct emac_adapter *adpt);\nvoid emac_mac_rx_process(struct emac_adapter *adpt, struct emac_rx_queue *rx_q,\n\t\t\t int *num_pkts, int max_pkts);\nnetdev_tx_t emac_mac_tx_buf_send(struct emac_adapter *adpt,\n\t\t\t\t struct emac_tx_queue *tx_q,\n\t\t\t\t struct sk_buff *skb);\nvoid emac_mac_tx_process(struct emac_adapter *adpt, struct emac_tx_queue *tx_q);\nvoid emac_mac_rx_tx_ring_init_all(struct platform_device *pdev,\n\t\t\t\t  struct emac_adapter *adpt);\nint  emac_mac_rx_tx_rings_alloc_all(struct emac_adapter *adpt);\nvoid emac_mac_rx_tx_rings_free_all(struct emac_adapter *adpt);\nvoid emac_mac_multicast_addr_clear(struct emac_adapter *adpt);\nvoid emac_mac_multicast_addr_set(struct emac_adapter *adpt, u8 *addr);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}