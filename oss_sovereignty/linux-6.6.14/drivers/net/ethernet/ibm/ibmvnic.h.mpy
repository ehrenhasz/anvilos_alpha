{
  "module_name": "ibmvnic.h",
  "hash_id": "b7b9d4498cba780d37d7c0c0e12652d90b22408542dea9b9edbd89861871eab0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/ibm/ibmvnic.h",
  "human_readable_source": " \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n#define IBMVNIC_NAME\t\t\"ibmvnic\"\n#define IBMVNIC_DRIVER_VERSION\t\"1.0.1\"\n#define IBMVNIC_INVALID_MAP\t-1\n#define IBMVNIC_OPEN_FAILED\t3\n\n \n#define IBMVNIC_IO_ENTITLEMENT_DEFAULT\t610305\n\n \n#define IBMVNIC_RX_WEIGHT\t\t16\n \n#define IBMVNIC_BUFFS_PER_POOL\t100\n#define IBMVNIC_MAX_QUEUES\t16\n#define IBMVNIC_MAX_QUEUE_SZ   4096\n#define IBMVNIC_MAX_IND_DESCS  16\n#define IBMVNIC_IND_ARR_SZ\t(IBMVNIC_MAX_IND_DESCS * 32)\n\n#define IBMVNIC_TSO_BUF_SZ\t65536\n#define IBMVNIC_TSO_BUFS\t64\n#define IBMVNIC_TSO_POOL_MASK\t0x80000000\n\n \n#define IBMVNIC_ONE_LTB_MAX\t((u32)((1 << MAX_ORDER) * PAGE_SIZE))\n#define IBMVNIC_ONE_LTB_SIZE\tmin((u32)(8 << 20), IBMVNIC_ONE_LTB_MAX)\n#define IBMVNIC_LTB_SET_SIZE\t(38 << 20)\n\n#define IBMVNIC_BUFFER_HLEN\t\t500\n#define IBMVNIC_RESET_DELAY 100\n\nstruct ibmvnic_login_buffer {\n\t__be32 len;\n\t__be32 version;\n#define INITIAL_VERSION_LB 1\n\t__be32 num_txcomp_subcrqs;\n\t__be32 off_txcomp_subcrqs;\n\t__be32 num_rxcomp_subcrqs;\n\t__be32 off_rxcomp_subcrqs;\n\t__be32 login_rsp_ioba;\n\t__be32 login_rsp_len;\n\t__be32 client_data_offset;\n\t__be32 client_data_len;\n} __packed __aligned(8);\n\nstruct ibmvnic_login_rsp_buffer {\n\t__be32 len;\n\t__be32 version;\n#define INITIAL_VERSION_LRB 1\n\t__be32 num_txsubm_subcrqs;\n\t__be32 off_txsubm_subcrqs;\n\t__be32 num_rxadd_subcrqs;\n\t__be32 off_rxadd_subcrqs;\n\t__be32 off_rxadd_buff_size;\n\t__be32 num_supp_tx_desc;\n\t__be32 off_supp_tx_desc;\n} __packed __aligned(8);\n\nstruct ibmvnic_query_ip_offload_buffer {\n\t__be32 len;\n\t__be32 version;\n#define INITIAL_VERSION_IOB 1\n\tu8 ipv4_chksum;\n\tu8 ipv6_chksum;\n\tu8 tcp_ipv4_chksum;\n\tu8 tcp_ipv6_chksum;\n\tu8 udp_ipv4_chksum;\n\tu8 udp_ipv6_chksum;\n\tu8 large_tx_ipv4;\n\tu8 large_tx_ipv6;\n\tu8 large_rx_ipv4;\n\tu8 large_rx_ipv6;\n\tu8 reserved1[14];\n\t__be16 max_ipv4_header_size;\n\t__be16 max_ipv6_header_size;\n\t__be16 max_tcp_header_size;\n\t__be16 max_udp_header_size;\n\t__be32 max_large_tx_size;\n\t__be32 max_large_rx_size;\n\tu8 reserved2[16];\n\tu8 ipv6_extension_header;\n#define IPV6_EH_NOT_SUPPORTED\t0x00\n#define IPV6_EH_SUPPORTED_LIM\t0x01\n#define IPV6_EH_SUPPORTED\t0xFF\n\tu8 tcp_pseudosum_req;\n#define TCP_PS_NOT_REQUIRED\t0x00\n#define TCP_PS_REQUIRED\t\t0x01\n\tu8 reserved3[30];\n\t__be16 num_ipv6_ext_headers;\n\t__be32 off_ipv6_ext_headers;\n\tu8 reserved4[154];\n} __packed __aligned(8);\n\nstruct ibmvnic_control_ip_offload_buffer {\n\t__be32 len;\n\t__be32 version;\n#define INITIAL_VERSION_IOB 1\n\tu8 ipv4_chksum;\n\tu8 ipv6_chksum;\n\tu8 tcp_ipv4_chksum;\n\tu8 tcp_ipv6_chksum;\n\tu8 udp_ipv4_chksum;\n\tu8 udp_ipv6_chksum;\n\tu8 large_tx_ipv4;\n\tu8 large_tx_ipv6;\n\tu8 bad_packet_rx;\n\tu8 large_rx_ipv4;\n\tu8 large_rx_ipv6;\n\tu8 reserved4[111];\n} __packed __aligned(8);\n\nstruct ibmvnic_fw_component {\n\tu8 name[48];\n\t__be32 trace_buff_size;\n\tu8 correlator;\n\tu8 trace_level;\n\tu8 parent_correlator;\n\tu8 error_check_level;\n\tu8 trace_on;\n\tu8 reserved[7];\n\tu8 description[192];\n} __packed __aligned(8);\n\nstruct ibmvnic_fw_trace_entry {\n\t__be32 trace_id;\n\tu8 num_valid_data;\n\tu8 reserved[3];\n\t__be64 pmc_registers;\n\t__be64 timebase;\n\t__be64 trace_data[5];\n} __packed __aligned(8);\n\nstruct ibmvnic_statistics {\n\t__be32 version;\n\t__be32 promiscuous;\n\t__be64 rx_packets;\n\t__be64 rx_bytes;\n\t__be64 tx_packets;\n\t__be64 tx_bytes;\n\t__be64 ucast_tx_packets;\n\t__be64 ucast_rx_packets;\n\t__be64 mcast_tx_packets;\n\t__be64 mcast_rx_packets;\n\t__be64 bcast_tx_packets;\n\t__be64 bcast_rx_packets;\n\t__be64 align_errors;\n\t__be64 fcs_errors;\n\t__be64 single_collision_frames;\n\t__be64 multi_collision_frames;\n\t__be64 sqe_test_errors;\n\t__be64 deferred_tx;\n\t__be64 late_collisions;\n\t__be64 excess_collisions;\n\t__be64 internal_mac_tx_errors;\n\t__be64 carrier_sense;\n\t__be64 too_long_frames;\n\t__be64 internal_mac_rx_errors;\n\tu8 reserved[72];\n} __packed __aligned(8);\n\n#define NUM_TX_STATS 3\nstruct ibmvnic_tx_queue_stats {\n\tu64 packets;\n\tu64 bytes;\n\tu64 dropped_packets;\n};\n\n#define NUM_RX_STATS 3\nstruct ibmvnic_rx_queue_stats {\n\tu64 packets;\n\tu64 bytes;\n\tu64 interrupts;\n};\n\nstruct ibmvnic_acl_buffer {\n\t__be32 len;\n\t__be32 version;\n#define INITIAL_VERSION_IOB 1\n\tu8 mac_acls_restrict;\n\tu8 vlan_acls_restrict;\n\tu8 reserved1[22];\n\t__be32 num_mac_addrs;\n\t__be32 offset_mac_addrs;\n\t__be32 num_vlan_ids;\n\t__be32 offset_vlan_ids;\n\tu8 reserved2[80];\n} __packed __aligned(8);\n\n \n\n#define IBMVNIC_TX_DESC_VERSIONS 3\n\n \nstruct ibmvnic_tx_comp_desc {\n\tu8 first;\n\tu8 num_comps;\n\t__be16 rcs[5];\n\t__be32 correlators[5];\n} __packed __aligned(8);\n\n \n\n#define IBMVNIC_TCP_CHKSUM\t\t0x20\n#define IBMVNIC_UDP_CHKSUM\t\t0x08\n\nstruct ibmvnic_tx_desc {\n\tu8 first;\n\tu8 type;\n\n#define IBMVNIC_TX_DESC 0x10\n\tu8 n_crq_elem;\n\tu8 n_sge;\n\tu8 flags1;\n#define IBMVNIC_TX_COMP_NEEDED\t\t0x80\n#define IBMVNIC_TX_CHKSUM_OFFLOAD\t0x40\n#define IBMVNIC_TX_LSO\t\t\t0x20\n#define IBMVNIC_TX_PROT_TCP\t\t0x10\n#define IBMVNIC_TX_PROT_UDP\t\t0x08\n#define IBMVNIC_TX_PROT_IPV4\t\t0x04\n#define IBMVNIC_TX_PROT_IPV6\t\t0x02\n#define IBMVNIC_TX_VLAN_PRESENT\t\t0x01\n\tu8 flags2;\n#define IBMVNIC_TX_VLAN_INSERT\t\t0x80\n\t__be16 mss;\n\tu8 reserved[4];\n\t__be32 correlator;\n\t__be16 vlan_id;\n\t__be16 dma_reg;\n\t__be32 sge_len;\n\t__be64 ioba;\n} __packed __aligned(8);\n\nstruct ibmvnic_hdr_desc {\n\tu8 first;\n\tu8 type;\n#define IBMVNIC_HDR_DESC\t\t0x11\n\tu8 len;\n\tu8 l2_len;\n\t__be16 l3_len;\n\tu8 l4_len;\n\tu8 flag;\n\tu8 data[24];\n} __packed __aligned(8);\n\nstruct ibmvnic_hdr_ext_desc {\n\tu8 first;\n\tu8 type;\n#define IBMVNIC_HDR_EXT_DESC\t\t0x12\n\tu8 len;\n\tu8 data[29];\n} __packed __aligned(8);\n\nstruct ibmvnic_sge_desc {\n\tu8 first;\n\tu8 type;\n#define IBMVNIC_SGE_DESC\t\t0x30\n\t__be16 sge1_dma_reg;\n\t__be32 sge1_len;\n\t__be64 sge1_ioba;\n\t__be16 reserved;\n\t__be16 sge2_dma_reg;\n\t__be32 sge2_len;\n\t__be64 sge2_ioba;\n} __packed __aligned(8);\n\nstruct ibmvnic_rx_comp_desc {\n\tu8 first;\n\tu8 flags;\n#define IBMVNIC_IP_CHKSUM_GOOD\t\t0x80\n#define IBMVNIC_TCP_UDP_CHKSUM_GOOD\t0x40\n#define IBMVNIC_END_FRAME\t\t\t0x20\n#define IBMVNIC_EXACT_MC\t\t\t0x10\n#define IBMVNIC_VLAN_STRIPPED\t\t\t0x08\n\t__be16 off_frame_data;\n\t__be32 len;\n\t__be64 correlator;\n\t__be16 vlan_tci;\n\t__be16 rc;\n\tu8 reserved[12];\n} __packed __aligned(8);\n\nstruct ibmvnic_generic_scrq {\n\tu8 first;\n\tu8 reserved[31];\n} __packed __aligned(8);\n\nstruct ibmvnic_rx_buff_add_desc {\n\tu8 first;\n\tu8 reserved[7];\n\t__be64 correlator;\n\t__be32 ioba;\n\tu8 map_id;\n\t__be32 len:24;\n\tu8 reserved2[8];\n} __packed __aligned(8);\n\nstruct ibmvnic_rc {\n\tu8 code;  \n\tu8 detailed_data[3];\n} __packed __aligned(4);\n\nstruct ibmvnic_generic_crq {\n\tu8 first;\n\tu8 cmd;\n\tu8 params[10];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_version_exchange {\n\tu8 first;\n\tu8 cmd;\n\t__be16 version;\n#define IBMVNIC_INITIAL_VERSION 1\n\tu8 reserved[8];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_capability {\n\tu8 first;\n\tu8 cmd;\n\t__be16 capability;  \n\t__be64 number;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_login {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[6];\n\t__be32 ioba;\n\t__be32 len;\n} __packed __aligned(8);\n\nstruct ibmvnic_phys_parms {\n\tu8 first;\n\tu8 cmd;\n\tu8 flags1;\n#define IBMVNIC_EXTERNAL_LOOPBACK\t0x80\n#define IBMVNIC_INTERNAL_LOOPBACK\t0x40\n#define IBMVNIC_PROMISC\t\t0x20\n#define IBMVNIC_PHYS_LINK_ACTIVE\t0x10\n#define IBMVNIC_AUTONEG_DUPLEX\t0x08\n#define IBMVNIC_FULL_DUPLEX\t0x04\n#define IBMVNIC_HALF_DUPLEX\t0x02\n#define IBMVNIC_CAN_CHG_PHYS_PARMS\t0x01\n\tu8 flags2;\n#define IBMVNIC_LOGICAL_LNK_ACTIVE 0x80\n\t__be32 speed;\n#define IBMVNIC_AUTONEG\t\t0x80000000\n#define IBMVNIC_10MBPS\t\t0x40000000\n#define IBMVNIC_100MBPS\t\t0x20000000\n#define IBMVNIC_1GBPS\t\t0x10000000\n#define IBMVNIC_10GBPS\t\t0x08000000\n#define IBMVNIC_40GBPS\t\t0x04000000\n#define IBMVNIC_100GBPS\t\t0x02000000\n#define IBMVNIC_25GBPS\t\t0x01000000\n#define IBMVNIC_50GBPS\t\t0x00800000\n#define IBMVNIC_200GBPS\t\t0x00400000\n\t__be32 mtu;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_logical_link_state {\n\tu8 first;\n\tu8 cmd;\n\tu8 link_state;\n#define IBMVNIC_LOGICAL_LNK_DN 0x00\n#define IBMVNIC_LOGICAL_LNK_UP 0x01\n#define IBMVNIC_LOGICAL_LNK_QUERY 0xff\n\tu8 reserved[9];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_query_ip_offload {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[2];\n\t__be32 len;\n\t__be32 ioba;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_control_ip_offload {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[2];\n\t__be32 ioba;\n\t__be32 len;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_request_statistics {\n\tu8 first;\n\tu8 cmd;\n\tu8 flags;\n#define IBMVNIC_PHYSICAL_PORT\t0x80\n\tu8 reserved1;\n\t__be32 ioba;\n\t__be32 len;\n\tu8 reserved[4];\n} __packed __aligned(8);\n\nstruct ibmvnic_error_indication {\n\tu8 first;\n\tu8 cmd;\n\tu8 flags;\n#define IBMVNIC_FATAL_ERROR\t0x80\n\tu8 reserved1;\n\t__be32 error_id;\n\t__be32 detail_error_sz;\n\t__be16 error_cause;\n\tu8 reserved2[2];\n} __packed __aligned(8);\n\nstruct ibmvnic_link_state_indication {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1[2];\n\tu8 phys_link_state;\n\tu8 logical_link_state;\n\tu8 reserved2[10];\n} __packed __aligned(8);\n\nstruct ibmvnic_change_mac_addr {\n\tu8 first;\n\tu8 cmd;\n\tu8 mac_addr[6];\n\tu8 reserved[4];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_multicast_ctrl {\n\tu8 first;\n\tu8 cmd;\n\tu8 mac_addr[6];\n\tu8 flags;\n#define IBMVNIC_ENABLE_MC\t\t0x80\n#define IBMVNIC_DISABLE_MC\t\t0x40\n#define IBMVNIC_ENABLE_ALL\t\t0x20\n#define IBMVNIC_DISABLE_ALL\t0x10\n\tu8 reserved1;\n\t__be16 reserved2;  \n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_get_vpd_size {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[14];\n} __packed __aligned(8);\n\nstruct ibmvnic_get_vpd_size_rsp {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[2];\n\t__be64 len;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_get_vpd {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1[2];\n\t__be32 ioba;\n\t__be32 len;\n\tu8 reserved[4];\n} __packed __aligned(8);\n\nstruct ibmvnic_get_vpd_rsp {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[10];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_acl_change_indication {\n\tu8 first;\n\tu8 cmd;\n\t__be16 change_type;\n#define IBMVNIC_MAC_ACL 0\n#define IBMVNIC_VLAN_ACL 1\n\tu8 reserved[12];\n} __packed __aligned(8);\n\nstruct ibmvnic_acl_query {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1[2];\n\t__be32 ioba;\n\t__be32 len;\n\tu8 reserved2[4];\n} __packed __aligned(8);\n\nstruct ibmvnic_tune {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1[2];\n\t__be32 ioba;\n\t__be32 len;\n\tu8 reserved2[4];\n} __packed __aligned(8);\n\nstruct ibmvnic_request_map {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1;\n\tu8 map_id;\n\t__be32 ioba;\n\t__be32 len;\n\tu8 reserved2[4];\n} __packed __aligned(8);\n\nstruct ibmvnic_request_map_rsp {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1;\n\tu8 map_id;\n\tu8 reserved2[8];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_request_unmap {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1;\n\tu8 map_id;\n\tu8 reserved2[12];\n} __packed __aligned(8);\n\nstruct ibmvnic_request_unmap_rsp {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved1;\n\tu8 map_id;\n\tu8 reserved2[8];\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nstruct ibmvnic_query_map {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved[14];\n} __packed __aligned(8);\n\nstruct ibmvnic_query_map_rsp {\n\tu8 first;\n\tu8 cmd;\n\tu8 reserved;\n\tu8 page_size;\n\t__be32 tot_pages;\n\t__be32 free_pages;\n\tstruct ibmvnic_rc rc;\n} __packed __aligned(8);\n\nunion ibmvnic_crq {\n\tstruct ibmvnic_generic_crq generic;\n\tstruct ibmvnic_version_exchange version_exchange;\n\tstruct ibmvnic_version_exchange version_exchange_rsp;\n\tstruct ibmvnic_capability query_capability;\n\tstruct ibmvnic_capability query_capability_rsp;\n\tstruct ibmvnic_capability request_capability;\n\tstruct ibmvnic_capability request_capability_rsp;\n\tstruct ibmvnic_login login;\n\tstruct ibmvnic_generic_crq login_rsp;\n\tstruct ibmvnic_phys_parms query_phys_parms;\n\tstruct ibmvnic_phys_parms query_phys_parms_rsp;\n\tstruct ibmvnic_phys_parms query_phys_capabilities;\n\tstruct ibmvnic_phys_parms query_phys_capabilities_rsp;\n\tstruct ibmvnic_phys_parms set_phys_parms;\n\tstruct ibmvnic_phys_parms set_phys_parms_rsp;\n\tstruct ibmvnic_logical_link_state logical_link_state;\n\tstruct ibmvnic_logical_link_state logical_link_state_rsp;\n\tstruct ibmvnic_query_ip_offload query_ip_offload;\n\tstruct ibmvnic_query_ip_offload query_ip_offload_rsp;\n\tstruct ibmvnic_control_ip_offload control_ip_offload;\n\tstruct ibmvnic_control_ip_offload control_ip_offload_rsp;\n\tstruct ibmvnic_request_statistics request_statistics;\n\tstruct ibmvnic_generic_crq request_statistics_rsp;\n\tstruct ibmvnic_error_indication error_indication;\n\tstruct ibmvnic_link_state_indication link_state_indication;\n\tstruct ibmvnic_change_mac_addr change_mac_addr;\n\tstruct ibmvnic_change_mac_addr change_mac_addr_rsp;\n\tstruct ibmvnic_multicast_ctrl multicast_ctrl;\n\tstruct ibmvnic_multicast_ctrl multicast_ctrl_rsp;\n\tstruct ibmvnic_get_vpd_size get_vpd_size;\n\tstruct ibmvnic_get_vpd_size_rsp get_vpd_size_rsp;\n\tstruct ibmvnic_get_vpd get_vpd;\n\tstruct ibmvnic_get_vpd_rsp get_vpd_rsp;\n\tstruct ibmvnic_acl_change_indication acl_change_indication;\n\tstruct ibmvnic_acl_query acl_query;\n\tstruct ibmvnic_generic_crq acl_query_rsp;\n\tstruct ibmvnic_tune tune;\n\tstruct ibmvnic_generic_crq tune_rsp;\n\tstruct ibmvnic_request_map request_map;\n\tstruct ibmvnic_request_map_rsp request_map_rsp;\n\tstruct ibmvnic_request_unmap request_unmap;\n\tstruct ibmvnic_request_unmap_rsp request_unmap_rsp;\n\tstruct ibmvnic_query_map query_map;\n\tstruct ibmvnic_query_map_rsp query_map_rsp;\n};\n\nenum ibmvnic_rc_codes {\n\tSUCCESS = 0,\n\tPARTIALSUCCESS = 1,\n\tPERMISSION = 2,\n\tNOMEMORY = 3,\n\tPARAMETER = 4,\n\tUNKNOWNCOMMAND = 5,\n\tABORTED = 6,\n\tINVALIDSTATE = 7,\n\tINVALIDIOBA = 8,\n\tINVALIDLENGTH = 9,\n\tUNSUPPORTEDOPTION = 10,\n};\n\nenum ibmvnic_capabilities {\n\tMIN_TX_QUEUES = 1,\n\tMIN_RX_QUEUES = 2,\n\tMIN_RX_ADD_QUEUES = 3,\n\tMAX_TX_QUEUES = 4,\n\tMAX_RX_QUEUES = 5,\n\tMAX_RX_ADD_QUEUES = 6,\n\tREQ_TX_QUEUES = 7,\n\tREQ_RX_QUEUES = 8,\n\tREQ_RX_ADD_QUEUES = 9,\n\tMIN_TX_ENTRIES_PER_SUBCRQ = 10,\n\tMIN_RX_ADD_ENTRIES_PER_SUBCRQ = 11,\n\tMAX_TX_ENTRIES_PER_SUBCRQ = 12,\n\tMAX_RX_ADD_ENTRIES_PER_SUBCRQ = 13,\n\tREQ_TX_ENTRIES_PER_SUBCRQ = 14,\n\tREQ_RX_ADD_ENTRIES_PER_SUBCRQ = 15,\n\tTCP_IP_OFFLOAD = 16,\n\tPROMISC_REQUESTED = 17,\n\tPROMISC_SUPPORTED = 18,\n\tMIN_MTU = 19,\n\tMAX_MTU = 20,\n\tREQ_MTU = 21,\n\tMAX_MULTICAST_FILTERS = 22,\n\tVLAN_HEADER_INSERTION = 23,\n\tRX_VLAN_HEADER_INSERTION = 24,\n\tMAX_TX_SG_ENTRIES = 25,\n\tRX_SG_SUPPORTED = 26,\n\tRX_SG_REQUESTED = 27,\n\tOPT_TX_COMP_SUB_QUEUES = 28,\n\tOPT_RX_COMP_QUEUES = 29,\n\tOPT_RX_BUFADD_Q_PER_RX_COMP_Q = 30,\n\tOPT_TX_ENTRIES_PER_SUBCRQ = 31,\n\tOPT_RXBA_ENTRIES_PER_SUBCRQ = 32,\n\tTX_RX_DESC_REQ = 33,\n};\n\nenum ibmvnic_error_cause {\n\tADAPTER_PROBLEM = 0,\n\tBUS_PROBLEM = 1,\n\tFW_PROBLEM = 2,\n\tDD_PROBLEM = 3,\n\tEEH_RECOVERY = 4,\n\tFW_UPDATED = 5,\n\tLOW_MEMORY = 6,\n};\n\nenum ibmvnic_commands {\n\tVERSION_EXCHANGE = 0x01,\n\tVERSION_EXCHANGE_RSP = 0x81,\n\tQUERY_CAPABILITY = 0x02,\n\tQUERY_CAPABILITY_RSP = 0x82,\n\tREQUEST_CAPABILITY = 0x03,\n\tREQUEST_CAPABILITY_RSP = 0x83,\n\tLOGIN = 0x04,\n\tLOGIN_RSP = 0x84,\n\tQUERY_PHYS_PARMS = 0x05,\n\tQUERY_PHYS_PARMS_RSP = 0x85,\n\tQUERY_PHYS_CAPABILITIES = 0x06,\n\tQUERY_PHYS_CAPABILITIES_RSP = 0x86,\n\tSET_PHYS_PARMS = 0x07,\n\tSET_PHYS_PARMS_RSP = 0x87,\n\tERROR_INDICATION = 0x08,\n\tLOGICAL_LINK_STATE = 0x0C,\n\tLOGICAL_LINK_STATE_RSP = 0x8C,\n\tREQUEST_STATISTICS = 0x0D,\n\tREQUEST_STATISTICS_RSP = 0x8D,\n\tCOLLECT_FW_TRACE = 0x11,\n\tCOLLECT_FW_TRACE_RSP = 0x91,\n\tLINK_STATE_INDICATION = 0x12,\n\tCHANGE_MAC_ADDR = 0x13,\n\tCHANGE_MAC_ADDR_RSP = 0x93,\n\tMULTICAST_CTRL = 0x14,\n\tMULTICAST_CTRL_RSP = 0x94,\n\tGET_VPD_SIZE = 0x15,\n\tGET_VPD_SIZE_RSP = 0x95,\n\tGET_VPD = 0x16,\n\tGET_VPD_RSP = 0x96,\n\tTUNE = 0x17,\n\tTUNE_RSP = 0x97,\n\tQUERY_IP_OFFLOAD = 0x18,\n\tQUERY_IP_OFFLOAD_RSP = 0x98,\n\tCONTROL_IP_OFFLOAD = 0x19,\n\tCONTROL_IP_OFFLOAD_RSP = 0x99,\n\tACL_CHANGE_INDICATION = 0x1A,\n\tACL_QUERY = 0x1B,\n\tACL_QUERY_RSP = 0x9B,\n\tQUERY_MAP = 0x1D,\n\tQUERY_MAP_RSP = 0x9D,\n\tREQUEST_MAP = 0x1E,\n\tREQUEST_MAP_RSP = 0x9E,\n\tREQUEST_UNMAP = 0x1F,\n\tREQUEST_UNMAP_RSP = 0x9F,\n\tVLAN_CTRL = 0x20,\n\tVLAN_CTRL_RSP = 0xA0,\n};\n\nenum ibmvnic_crq_type {\n\tIBMVNIC_CRQ_CMD\t\t\t= 0x80,\n\tIBMVNIC_CRQ_CMD_RSP\t\t= 0x80,\n\tIBMVNIC_CRQ_INIT_CMD\t\t= 0xC0,\n\tIBMVNIC_CRQ_INIT_RSP\t\t= 0xC0,\n\tIBMVNIC_CRQ_XPORT_EVENT\t\t= 0xFF,\n};\n\nenum ibmvfc_crq_format {\n\tIBMVNIC_CRQ_INIT                 = 0x01,\n\tIBMVNIC_CRQ_INIT_COMPLETE        = 0x02,\n\tIBMVNIC_PARTITION_MIGRATED       = 0x06,\n\tIBMVNIC_DEVICE_FAILOVER          = 0x08,\n};\n\nstruct ibmvnic_crq_queue {\n\tunion ibmvnic_crq *msgs;\n\tint size, cur;\n\tdma_addr_t msg_token;\n\t \n\tspinlock_t lock;\n\tbool active;\n\tchar name[32];\n};\n\nunion sub_crq {\n\tstruct ibmvnic_generic_scrq generic;\n\tstruct ibmvnic_tx_comp_desc tx_comp;\n\tstruct ibmvnic_tx_desc v1;\n\tstruct ibmvnic_hdr_desc hdr;\n\tstruct ibmvnic_hdr_ext_desc hdr_ext;\n\tstruct ibmvnic_sge_desc sge;\n\tstruct ibmvnic_rx_comp_desc rx_comp;\n\tstruct ibmvnic_rx_buff_add_desc rx_add;\n};\n\nstruct ibmvnic_ind_xmit_queue {\n\tunion sub_crq *indir_arr;\n\tdma_addr_t indir_dma;\n\tint index;\n};\n\nstruct ibmvnic_sub_crq_queue {\n\tunion sub_crq *msgs;\n\tint size, cur;\n\tdma_addr_t msg_token;\n\tunsigned long crq_num;\n\tunsigned long hw_irq;\n\tunsigned int irq;\n\tunsigned int pool_index;\n\tint scrq_num;\n\t \n\tspinlock_t lock;\n\tstruct sk_buff *rx_skb_top;\n\tstruct ibmvnic_adapter *adapter;\n\tstruct ibmvnic_ind_xmit_queue ind_buf;\n\tatomic_t used;\n\tchar name[32];\n\tu64 handle;\n\tcpumask_var_t affinity_mask;\n} ____cacheline_aligned;\n\nstruct ibmvnic_long_term_buff {\n\tunsigned char *buff;\n\tdma_addr_t addr;\n\tu64 size;\n\tu8 map_id;\n};\n\nstruct ibmvnic_ltb_set {\n\tint num_ltbs;\n\tstruct ibmvnic_long_term_buff *ltbs;\n};\n\nstruct ibmvnic_tx_buff {\n\tstruct sk_buff *skb;\n\tint index;\n\tint pool_index;\n\tint num_entries;\n};\n\nstruct ibmvnic_tx_pool {\n\tstruct ibmvnic_tx_buff *tx_buff;\n\tint *free_map;\n\tint consumer_index;\n\tint producer_index;\n\tstruct ibmvnic_ltb_set ltb_set;\n\tint num_buffers;\n\tint buf_size;\n} ____cacheline_aligned;\n\nstruct ibmvnic_rx_buff {\n\tstruct sk_buff *skb;\n\tdma_addr_t dma;\n\tunsigned char *data;\n\tint size;\n\tint pool_index;\n};\n\nstruct ibmvnic_rx_pool {\n\tstruct ibmvnic_rx_buff *rx_buff;\n\tint size;\t\t\t \n\tint index;\n\tint buff_size;\n\tatomic_t available;\n\tint *free_map;\n\tint next_free;\n\tint next_alloc;\n\tint active;\n\tstruct ibmvnic_ltb_set ltb_set;\n} ____cacheline_aligned;\n\nstruct ibmvnic_vpd {\n\tunsigned char *buff;\n\tdma_addr_t dma_addr;\n\tu64 len;\n};\n\nenum vnic_state {VNIC_PROBING = 1,\n\t\t VNIC_PROBED,\n\t\t VNIC_OPENING,\n\t\t VNIC_OPEN,\n\t\t VNIC_CLOSING,\n\t\t VNIC_CLOSED,\n\t\t VNIC_REMOVING,\n\t\t VNIC_REMOVED,\n\t\t VNIC_DOWN};\n\nenum ibmvnic_reset_reason {VNIC_RESET_FAILOVER = 1,\n\t\t\t   VNIC_RESET_MOBILITY,\n\t\t\t   VNIC_RESET_FATAL,\n\t\t\t   VNIC_RESET_NON_FATAL,\n\t\t\t   VNIC_RESET_TIMEOUT,\n\t\t\t   VNIC_RESET_CHANGE_PARAM,\n\t\t\t   VNIC_RESET_PASSIVE_INIT};\n\nstruct ibmvnic_rwi {\n\tenum ibmvnic_reset_reason reset_reason;\n\tstruct list_head list;\n};\n\nstruct ibmvnic_tunables {\n\tu64 rx_queues;\n\tu64 tx_queues;\n\tu64 rx_entries;\n\tu64 tx_entries;\n\tu64 mtu;\n};\n\nstruct ibmvnic_adapter {\n\tstruct vio_dev *vdev;\n\tstruct net_device *netdev;\n\tstruct ibmvnic_crq_queue crq;\n\tu8 mac_addr[ETH_ALEN];\n\tstruct ibmvnic_query_ip_offload_buffer ip_offload_buf;\n\tdma_addr_t ip_offload_tok;\n\tstruct ibmvnic_control_ip_offload_buffer ip_offload_ctrl;\n\tdma_addr_t ip_offload_ctrl_tok;\n\tu32 msg_enable;\n\n\t \n\tstruct ibmvnic_vpd *vpd;\n\tchar fw_version[32];\n\n\t \n\tstruct ibmvnic_statistics stats;\n\tdma_addr_t stats_token;\n\tstruct completion stats_done;\n\tint replenish_no_mem;\n\tint replenish_add_buff_success;\n\tint replenish_add_buff_failure;\n\tint replenish_task_cycles;\n\tint tx_send_failed;\n\tint tx_map_failed;\n\n\tstruct ibmvnic_tx_queue_stats *tx_stats_buffers;\n\tstruct ibmvnic_rx_queue_stats *rx_stats_buffers;\n\n\tint phys_link_state;\n\tint logical_link_state;\n\n\tu32 speed;\n\tu8 duplex;\n\n\t \n\tstruct ibmvnic_login_buffer *login_buf;\n\tdma_addr_t login_buf_token;\n\tint login_buf_sz;\n\n\tstruct ibmvnic_login_rsp_buffer *login_rsp_buf;\n\tdma_addr_t login_rsp_buf_token;\n\tint login_rsp_buf_sz;\n\n\tatomic_t running_cap_crqs;\n\n\tstruct ibmvnic_sub_crq_queue **tx_scrq ____cacheline_aligned;\n\tstruct ibmvnic_sub_crq_queue **rx_scrq ____cacheline_aligned;\n\n\t \n\tstruct napi_struct *napi;\n\tstruct ibmvnic_rx_pool *rx_pool;\n\tu64 promisc;\n\n\tstruct ibmvnic_tx_pool *tx_pool;\n\tstruct ibmvnic_tx_pool *tso_pool;\n\tstruct completion probe_done;\n\tstruct completion init_done;\n\tint init_done_rc;\n\n\tstruct completion fw_done;\n\t \n\tstruct mutex fw_lock;\n\tint fw_done_rc;\n\n\tstruct completion reset_done;\n\tint reset_done_rc;\n\tbool wait_for_reset;\n\n\t \n\tstruct hlist_node node;\n\tstruct hlist_node node_dead;\n\n\t \n\tu64 min_tx_queues;\n\tu64 min_rx_queues;\n\tu64 min_rx_add_queues;\n\tu64 max_tx_queues;\n\tu64 max_rx_queues;\n\tu64 max_rx_add_queues;\n\tu64 req_tx_queues;\n\tu64 req_rx_queues;\n\tu64 req_rx_add_queues;\n\tu64 min_tx_entries_per_subcrq;\n\tu64 min_rx_add_entries_per_subcrq;\n\tu64 max_tx_entries_per_subcrq;\n\tu64 max_rx_add_entries_per_subcrq;\n\tu64 req_tx_entries_per_subcrq;\n\tu64 req_rx_add_entries_per_subcrq;\n\tu64 tcp_ip_offload;\n\tu64 promisc_requested;\n\tu64 promisc_supported;\n\tu64 min_mtu;\n\tu64 max_mtu;\n\tu64 req_mtu;\n\tu64 prev_mtu;\n\tu64 max_multicast_filters;\n\tu64 vlan_header_insertion;\n\tu64 rx_vlan_header_insertion;\n\tu64 max_tx_sg_entries;\n\tu64 rx_sg_supported;\n\tu64 rx_sg_requested;\n\tu64 opt_tx_comp_sub_queues;\n\tu64 opt_rx_comp_queues;\n\tu64 opt_rx_bufadd_q_per_rx_comp_q;\n\tu64 opt_tx_entries_per_subcrq;\n\tu64 opt_rxba_entries_per_subcrq;\n\t__be64 tx_rx_desc_req;\n#define MAX_MAP_ID\t255\n\tDECLARE_BITMAP(map_ids, MAX_MAP_ID);\n\tu32 num_active_rx_scrqs;\n\tu32 num_active_rx_pools;\n\tu32 num_active_rx_napi;\n\tu32 num_active_tx_scrqs;\n\tu32 num_active_tx_pools;\n\n\tu32 prev_rx_pool_size;\n\tu32 prev_tx_pool_size;\n\tu32 cur_rx_buf_sz;\n\tu32 prev_rx_buf_sz;\n\n\tstruct tasklet_struct tasklet;\n\tenum vnic_state state;\n\t \n\tspinlock_t state_lock;\n\tenum ibmvnic_reset_reason reset_reason;\n\tstruct list_head rwi_list;\n\t \n\tspinlock_t rwi_lock;\n\tstruct work_struct ibmvnic_reset;\n\tstruct delayed_work ibmvnic_delayed_reset;\n\tunsigned long resetting;\n\t \n\tunsigned long last_reset_time;\n\n\tbool napi_enabled;\n\tbool from_passive_init;\n\tbool login_pending;\n\t \n\tbool tx_queues_active;\n\tbool failover_pending;\n\tbool force_reset_recovery;\n\n\tstruct ibmvnic_tunables desired;\n\tstruct ibmvnic_tunables fallback;\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}