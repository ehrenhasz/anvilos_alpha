{
  "module_name": "ehea_phyp.h",
  "hash_id": "b4fcae07256b06c29440d94b3cb9317718ac9d11cc3f9e3246b5a6d8a0eeb54c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/ibm/ehea/ehea_phyp.h",
  "human_readable_source": " \n \n\n#ifndef __EHEA_PHYP_H__\n#define __EHEA_PHYP_H__\n\n#include <linux/delay.h>\n#include <asm/hvcall.h>\n#include \"ehea.h\"\n#include \"ehea_hw.h\"\n\n \n\n \n#define EHEA_MAX_RPAGE 512\n\n \n#define NEQE_EVENT_CODE\t\tEHEA_BMASK_IBM(2, 7)\n#define NEQE_PORTNUM  \t\tEHEA_BMASK_IBM(32, 47)\n#define NEQE_PORT_UP\t\tEHEA_BMASK_IBM(16, 16)\n#define NEQE_EXTSWITCH_PORT_UP\tEHEA_BMASK_IBM(17, 17)\n#define NEQE_EXTSWITCH_PRIMARY\tEHEA_BMASK_IBM(18, 18)\n#define NEQE_PLID\t\tEHEA_BMASK_IBM(16, 47)\n\n \n#define EHEA_EC_PORTSTATE_CHG\t0x30\n#define EHEA_EC_ADAPTER_MALFUNC\t0x32\n#define EHEA_EC_PORT_MALFUNC\t0x33\n\n \n#define NELR_PORT_MALFUNC\tEHEA_BMASK_IBM(61, 61)\n#define NELR_ADAPTER_MALFUNC\tEHEA_BMASK_IBM(62, 62)\n#define NELR_PORTSTATE_CHG\tEHEA_BMASK_IBM(63, 63)\n\nstatic inline void hcp_epas_ctor(struct h_epas *epas, u64 paddr_kernel,\n\t\t\t\t u64 paddr_user)\n{\n\t \n\tepas->kernel.addr = ioremap((paddr_kernel & PAGE_MASK), PAGE_SIZE) +\n\t\t\t    (paddr_kernel & ~PAGE_MASK);\n\tepas->user.addr = paddr_user;\n}\n\nstatic inline void hcp_epas_dtor(struct h_epas *epas)\n{\n\tif (epas->kernel.addr)\n\t\tiounmap((void __iomem *)((u64)epas->kernel.addr & PAGE_MASK));\n\n\tepas->user.addr = 0;\n\tepas->kernel.addr = 0;\n}\n\nstruct hcp_modify_qp_cb0 {\n\tu64 qp_ctl_reg;\t\t \n\tu32 max_swqe;\t\t \n\tu32 max_rwqe;\t\t \n\tu32 port_nb;\t\t \n\tu32 reserved0;\t\t \n\tu64 qp_aer;\t\t \n\tu64 qp_tenure;\t\t \n};\n\n \n#define H_QPCB0_ALL             EHEA_BMASK_IBM(0, 5)\n#define H_QPCB0_QP_CTL_REG      EHEA_BMASK_IBM(0, 0)\n#define H_QPCB0_MAX_SWQE        EHEA_BMASK_IBM(1, 1)\n#define H_QPCB0_MAX_RWQE        EHEA_BMASK_IBM(2, 2)\n#define H_QPCB0_PORT_NB         EHEA_BMASK_IBM(3, 3)\n#define H_QPCB0_QP_AER          EHEA_BMASK_IBM(4, 4)\n#define H_QPCB0_QP_TENURE       EHEA_BMASK_IBM(5, 5)\n\n \n#define H_QP_CR_ENABLED\t\t    0x8000000000000000ULL  \n\t\t\t\t\t\t\t   \n#define H_QP_CR_STATE_RESET\t    0x0000010000000000ULL  \n#define H_QP_CR_STATE_INITIALIZED   0x0000020000000000ULL  \n#define H_QP_CR_STATE_RDY2RCV\t    0x0000030000000000ULL  \n#define H_QP_CR_STATE_RDY2SND\t    0x0000050000000000ULL  \n#define H_QP_CR_STATE_ERROR\t    0x0000800000000000ULL  \n#define H_QP_CR_RES_STATE \t    0x0000007F00000000ULL  \n\nstruct hcp_modify_qp_cb1 {\n\tu32 qpn;\t\t \n\tu32 qp_asyn_ev_eq_nb;\t \n\tu64 sq_cq_handle;\t \n\tu64 rq_cq_handle;\t \n\t \n\tu32 sgel_nb_sq;\t\t \n\tu32 sgel_nb_rq1;\t \n\tu32 sgel_nb_rq2;\t \n\tu32 sgel_nb_rq3;\t \n};\n\n \n#define H_QPCB1_ALL             EHEA_BMASK_IBM(0, 7)\n#define H_QPCB1_QPN             EHEA_BMASK_IBM(0, 0)\n#define H_QPCB1_ASYN_EV_EQ_NB   EHEA_BMASK_IBM(1, 1)\n#define H_QPCB1_SQ_CQ_HANDLE    EHEA_BMASK_IBM(2, 2)\n#define H_QPCB1_RQ_CQ_HANDLE    EHEA_BMASK_IBM(3, 3)\n#define H_QPCB1_SGEL_NB_SQ      EHEA_BMASK_IBM(4, 4)\n#define H_QPCB1_SGEL_NB_RQ1     EHEA_BMASK_IBM(5, 5)\n#define H_QPCB1_SGEL_NB_RQ2     EHEA_BMASK_IBM(6, 6)\n#define H_QPCB1_SGEL_NB_RQ3     EHEA_BMASK_IBM(7, 7)\n\nstruct hcp_query_ehea {\n\tu32 cur_num_qps;\t\t \n\tu32 cur_num_cqs;\t\t \n\tu32 cur_num_eqs;\t\t \n\tu32 cur_num_mrs;\t\t \n\tu32 auth_level;\t\t\t \n\tu32 max_num_qps;\t\t \n\tu32 max_num_cqs;\t\t \n\tu32 max_num_eqs;\t\t \n\tu32 max_num_mrs;\t\t \n\tu32 reserved0;\t\t\t \n\tu32 int_clock_freq;\t\t \n\tu32 max_num_pds;\t\t \n\tu32 max_num_addr_handles;\t \n\tu32 max_num_cqes;\t\t \n\tu32 max_num_wqes;\t\t \n\tu32 max_num_sgel_rq1wqe;\t \n\tu32 max_num_sgel_rq2wqe;\t \n\tu32 max_num_sgel_rq3wqe;\t \n\tu32 mr_page_size;\t\t \n\tu32 reserved1;\t\t\t \n\tu64 max_mr_size;\t\t \n\tu64 reserved2;\t\t\t \n\tu32 num_ports;\t\t\t \n\tu32 reserved3;\t\t\t \n\tu32 reserved4;\t\t\t \n\tu32 reserved5;\t\t\t \n\tu64 max_mc_mac;\t\t\t \n\tu64 ehea_cap;\t\t\t \n\tu32 max_isn_per_eq;\t\t \n\tu32 max_num_neq;\t\t \n\tu64 max_num_vlan_ids;\t\t \n\tu32 max_num_port_group;\t\t \n\tu32 max_num_phys_port;\t\t \n\n};\n\n \n#define H_PORT_CB0\t 0\n#define H_PORT_CB1\t 1\n#define H_PORT_CB2\t 2\n#define H_PORT_CB3\t 3\n#define H_PORT_CB4\t 4\n#define H_PORT_CB5\t 5\n#define H_PORT_CB6\t 6\n#define H_PORT_CB7\t 7\n\nstruct hcp_ehea_port_cb0 {\n\tu64 port_mac_addr;\n\tu64 port_rc;\n\tu64 reserved0;\n\tu32 port_op_state;\n\tu32 port_speed;\n\tu32 ext_swport_op_state;\n\tu32 neg_tpf_prpf;\n\tu32 num_default_qps;\n\tu32 reserved1;\n\tu64 default_qpn_arr[16];\n};\n\n \n#define H_PORT_CB0_ALL\t\tEHEA_BMASK_IBM(0, 7)     \n#define H_PORT_CB0_MAC\t\tEHEA_BMASK_IBM(0, 0)     \n#define H_PORT_CB0_PRC\t\tEHEA_BMASK_IBM(1, 1)     \n#define H_PORT_CB0_DEFQPNARRAY\tEHEA_BMASK_IBM(7, 7)     \n\n \n#define H_SPEED_10M_H\t1\t \n#define H_SPEED_10M_F\t2\t \n#define H_SPEED_100M_H\t3\t \n#define H_SPEED_100M_F\t4\t \n#define H_SPEED_1G_F\t6\t \n#define H_SPEED_10G_F\t8\t \n\n \n#define PXLY_RC_VALID           EHEA_BMASK_IBM(49, 49)\n#define PXLY_RC_VLAN_XTRACT     EHEA_BMASK_IBM(50, 50)\n#define PXLY_RC_TCP_6_TUPLE     EHEA_BMASK_IBM(51, 51)\n#define PXLY_RC_UDP_6_TUPLE     EHEA_BMASK_IBM(52, 52)\n#define PXLY_RC_TCP_3_TUPLE     EHEA_BMASK_IBM(53, 53)\n#define PXLY_RC_TCP_2_TUPLE     EHEA_BMASK_IBM(54, 54)\n#define PXLY_RC_LLC_SNAP        EHEA_BMASK_IBM(55, 55)\n#define PXLY_RC_JUMBO_FRAME     EHEA_BMASK_IBM(56, 56)\n#define PXLY_RC_FRAG_IP_PKT     EHEA_BMASK_IBM(57, 57)\n#define PXLY_RC_TCP_UDP_CHKSUM  EHEA_BMASK_IBM(58, 58)\n#define PXLY_RC_IP_CHKSUM       EHEA_BMASK_IBM(59, 59)\n#define PXLY_RC_MAC_FILTER      EHEA_BMASK_IBM(60, 60)\n#define PXLY_RC_UNTAG_FILTER    EHEA_BMASK_IBM(61, 61)\n#define PXLY_RC_VLAN_TAG_FILTER EHEA_BMASK_IBM(62, 63)\n\n#define PXLY_RC_VLAN_FILTER     2\n#define PXLY_RC_VLAN_PERM       0\n\n\n#define H_PORT_CB1_ALL          0x8000000000000000ULL\n\nstruct hcp_ehea_port_cb1 {\n\tu64 vlan_filter[64];\n};\n\n#define H_PORT_CB2_ALL          0xFFE0000000000000ULL\n\nstruct hcp_ehea_port_cb2 {\n\tu64 rxo;\n\tu64 rxucp;\n\tu64 rxufd;\n\tu64 rxuerr;\n\tu64 rxftl;\n\tu64 rxmcp;\n\tu64 rxbcp;\n\tu64 txo;\n\tu64 txucp;\n\tu64 txmcp;\n\tu64 txbcp;\n};\n\nstruct hcp_ehea_port_cb3 {\n\tu64 vlan_bc_filter[64];\n\tu64 vlan_mc_filter[64];\n\tu64 vlan_un_filter[64];\n\tu64 port_mac_hash_array[64];\n};\n\n#define H_PORT_CB4_ALL          0xF000000000000000ULL\n#define H_PORT_CB4_JUMBO        0x1000000000000000ULL\n#define H_PORT_CB4_SPEED        0x8000000000000000ULL\n\nstruct hcp_ehea_port_cb4 {\n\tu32 port_speed;\n\tu32 pause_frame;\n\tu32 ens_port_op_state;\n\tu32 jumbo_frame;\n\tu32 ens_port_wrap;\n};\n\n \n#define H_PORT_CB5_RCU\t\t0x0001000000000000ULL\n#define PXS_RCU\t\t\tEHEA_BMASK_IBM(61, 63)\n\nstruct hcp_ehea_port_cb5 {\n\tu64 prc;\t         \n\tu64 uaa;\t\t \n\tu64 macvc;\t\t \n\tu64 xpcsc;\t\t \n\tu64 xpcsp;\t\t \n\tu64 pcsid;\t\t \n\tu64 xpcsst;\t\t \n\tu64 pthlb;\t\t \n\tu64 pthrb;\t\t \n\tu64 pqu;\t\t \n\tu64 pqd;\t\t \n\tu64 prt;\t\t \n\tu64 wsth;\t\t \n\tu64 rcb;\t\t \n\tu64 rcm;\t\t \n\tu64 rcu;\t\t \n\tu64 macc;\t\t \n\tu64 pc;\t\t\t \n\tu64 pst;\t\t \n\tu64 ducqpn;\t\t \n\tu64 mcqpn;\t\t \n\tu64 mma;\t\t \n\tu64 pmc0h;\t\t \n\tu64 pmc0l;\t\t \n\tu64 lbc;\t\t \n};\n\n#define H_PORT_CB6_ALL  0xFFFFFE7FFFFF8000ULL\n\nstruct hcp_ehea_port_cb6 {\n\tu64 rxo;\t\t \n\tu64 rx64;\t\t \n\tu64 rx65;\t\t \n\tu64 rx128;\t\t \n\tu64 rx256;\t\t \n\tu64 rx512;\t\t \n\tu64 rx1024;\t\t \n\tu64 rxbfcs;\t\t \n\tu64 rxime;\t\t \n\tu64 rxrle;\t\t \n\tu64 rxorle;\t\t \n\tu64 rxftl;\t\t \n\tu64 rxjab;\t\t \n\tu64 rxse;\t\t \n\tu64 rxce;\t\t \n\tu64 rxrf;\t\t \n\tu64 rxfrag;\t\t \n\tu64 rxuoc;\t\t \n\tu64 rxcpf;\t\t \n\tu64 rxsb;\t\t \n\tu64 rxfd;\t\t \n\tu64 rxoerr;\t\t \n\tu64 rxaln;\t\t \n\tu64 ducqpn;\t\t \n\tu64 reserved0;\t\t \n\tu64 rxmcp;\t\t \n\tu64 rxbcp;\t\t \n\tu64 txmcp;\t\t \n\tu64 txbcp;\t\t \n\tu64 txo;\t\t \n\tu64 tx64;\t\t \n\tu64 tx65;\t\t \n\tu64 tx128;\t\t \n\tu64 tx256;\t\t \n\tu64 tx512;\t\t \n\tu64 tx1024;\t\t \n\tu64 txbfcs;\t\t \n\tu64 txcpf;\t\t \n\tu64 txlf;\t\t \n\tu64 txrf;\t\t \n\tu64 txime;\t\t \n\tu64 txsc;\t\t \n\tu64 txmc;\t\t \n\tu64 txsqe;\t\t \n\tu64 txdef;\t\t \n\tu64 txlcol;\t\t \n\tu64 txexcol;\t\t \n\tu64 txcse;\t\t \n\tu64 txbor;\t\t \n};\n\n#define H_PORT_CB7_DUCQPN 0x8000000000000000ULL\n\nstruct hcp_ehea_port_cb7 {\n\tu64 def_uc_qpn;\n};\n\nu64 ehea_h_query_ehea_qp(const u64 adapter_handle,\n\t\t\t const u8 qp_category,\n\t\t\t const u64 qp_handle, const u64 sel_mask,\n\t\t\t void *cb_addr);\n\nu64 ehea_h_modify_ehea_qp(const u64 adapter_handle,\n\t\t\t  const u8 cat,\n\t\t\t  const u64 qp_handle,\n\t\t\t  const u64 sel_mask,\n\t\t\t  void *cb_addr,\n\t\t\t  u64 *inv_attr_id,\n\t\t\t  u64 *proc_mask, u16 *out_swr, u16 *out_rwr);\n\nu64 ehea_h_alloc_resource_eq(const u64 adapter_handle,\n\t\t\t     struct ehea_eq_attr *eq_attr, u64 *eq_handle);\n\nu64 ehea_h_alloc_resource_cq(const u64 adapter_handle,\n\t\t\t     struct ehea_cq_attr *cq_attr,\n\t\t\t     u64 *cq_handle, struct h_epas *epas);\n\nu64 ehea_h_alloc_resource_qp(const u64 adapter_handle,\n\t\t\t     struct ehea_qp_init_attr *init_attr,\n\t\t\t     const u32 pd,\n\t\t\t     u64 *qp_handle, struct h_epas *h_epas);\n\n#define H_REG_RPAGE_PAGE_SIZE          EHEA_BMASK_IBM(48, 55)\n#define H_REG_RPAGE_QT                 EHEA_BMASK_IBM(62, 63)\n\nu64 ehea_h_register_rpage(const u64 adapter_handle,\n\t\t\t  const u8 pagesize,\n\t\t\t  const u8 queue_type,\n\t\t\t  const u64 resource_handle,\n\t\t\t  const u64 log_pageaddr, u64 count);\n\n#define H_DISABLE_GET_EHEA_WQE_P  1\n#define H_DISABLE_GET_SQ_WQE_P    2\n#define H_DISABLE_GET_RQC         3\n\nu64 ehea_h_disable_and_get_hea(const u64 adapter_handle, const u64 qp_handle);\n\n#define FORCE_FREE 1\n#define NORMAL_FREE 0\n\nu64 ehea_h_free_resource(const u64 adapter_handle, const u64 res_handle,\n\t\t\t u64 force_bit);\n\nu64 ehea_h_alloc_resource_mr(const u64 adapter_handle, const u64 vaddr,\n\t\t\t     const u64 length, const u32 access_ctrl,\n\t\t\t     const u32 pd, u64 *mr_handle, u32 *lkey);\n\nu64 ehea_h_register_rpage_mr(const u64 adapter_handle, const u64 mr_handle,\n\t\t\t     const u8 pagesize, const u8 queue_type,\n\t\t\t     const u64 log_pageaddr, const u64 count);\n\nu64 ehea_h_register_smr(const u64 adapter_handle, const u64 orig_mr_handle,\n\t\t\tconst u64 vaddr_in, const u32 access_ctrl, const u32 pd,\n\t\t\tstruct ehea_mr *mr);\n\nu64 ehea_h_query_ehea(const u64 adapter_handle, void *cb_addr);\n\n \n#define H_MEHEAPORT_CAT\t\tEHEA_BMASK_IBM(40, 47)\n#define H_MEHEAPORT_PN\t\tEHEA_BMASK_IBM(48, 63)\n\nu64 ehea_h_query_ehea_port(const u64 adapter_handle, const u16 port_num,\n\t\t\t   const u8 cb_cat, const u64 select_mask,\n\t\t\t   void *cb_addr);\n\nu64 ehea_h_modify_ehea_port(const u64 adapter_handle, const u16 port_num,\n\t\t\t    const u8 cb_cat, const u64 select_mask,\n\t\t\t    void *cb_addr);\n\n#define H_REGBCMC_PN            EHEA_BMASK_IBM(48, 63)\n#define H_REGBCMC_REGTYPE       EHEA_BMASK_IBM(60, 63)\n#define H_REGBCMC_MACADDR       EHEA_BMASK_IBM(16, 63)\n#define H_REGBCMC_VLANID        EHEA_BMASK_IBM(52, 63)\n\nu64 ehea_h_reg_dereg_bcmc(const u64 adapter_handle, const u16 port_num,\n\t\t\t  const u8 reg_type, const u64 mc_mac_addr,\n\t\t\t  const u16 vlan_id, const u32 hcall_id);\n\nu64 ehea_h_reset_events(const u64 adapter_handle, const u64 neq_handle,\n\t\t\tconst u64 event_mask);\n\nu64 ehea_h_error_data(const u64 adapter_handle, const u64 ressource_handle,\n\t\t      void *rblock);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}