{
  "module_name": "ehea_hw.h",
  "hash_id": "07a0f5d3c17ab6d76adcbb984b957fb25a4e725224c283e6f2a6c24fdcab6130",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/ibm/ehea/ehea_hw.h",
  "human_readable_source": " \n \n\n#ifndef __EHEA_HW_H__\n#define __EHEA_HW_H__\n\n#define QPX_SQA_VALUE   EHEA_BMASK_IBM(48, 63)\n#define QPX_RQ1A_VALUE  EHEA_BMASK_IBM(48, 63)\n#define QPX_RQ2A_VALUE  EHEA_BMASK_IBM(48, 63)\n#define QPX_RQ3A_VALUE  EHEA_BMASK_IBM(48, 63)\n\n#define QPTEMM_OFFSET(x) offsetof(struct ehea_qptemm, x)\n\nstruct ehea_qptemm {\n\tu64 qpx_hcr;\n\tu64 qpx_c;\n\tu64 qpx_herr;\n\tu64 qpx_aer;\n\tu64 qpx_sqa;\n\tu64 qpx_sqc;\n\tu64 qpx_rq1a;\n\tu64 qpx_rq1c;\n\tu64 qpx_st;\n\tu64 qpx_aerr;\n\tu64 qpx_tenure;\n\tu64 qpx_reserved1[(0x098 - 0x058) / 8];\n\tu64 qpx_portp;\n\tu64 qpx_reserved2[(0x100 - 0x0A0) / 8];\n\tu64 qpx_t;\n\tu64 qpx_sqhp;\n\tu64 qpx_sqptp;\n\tu64 qpx_reserved3[(0x140 - 0x118) / 8];\n\tu64 qpx_sqwsize;\n\tu64 qpx_reserved4[(0x170 - 0x148) / 8];\n\tu64 qpx_sqsize;\n\tu64 qpx_reserved5[(0x1B0 - 0x178) / 8];\n\tu64 qpx_sigt;\n\tu64 qpx_wqecnt;\n\tu64 qpx_rq1hp;\n\tu64 qpx_rq1ptp;\n\tu64 qpx_rq1size;\n\tu64 qpx_reserved6[(0x220 - 0x1D8) / 8];\n\tu64 qpx_rq1wsize;\n\tu64 qpx_reserved7[(0x240 - 0x228) / 8];\n\tu64 qpx_pd;\n\tu64 qpx_scqn;\n\tu64 qpx_rcqn;\n\tu64 qpx_aeqn;\n\tu64 reserved49;\n\tu64 qpx_ram;\n\tu64 qpx_reserved8[(0x300 - 0x270) / 8];\n\tu64 qpx_rq2a;\n\tu64 qpx_rq2c;\n\tu64 qpx_rq2hp;\n\tu64 qpx_rq2ptp;\n\tu64 qpx_rq2size;\n\tu64 qpx_rq2wsize;\n\tu64 qpx_rq2th;\n\tu64 qpx_rq3a;\n\tu64 qpx_rq3c;\n\tu64 qpx_rq3hp;\n\tu64 qpx_rq3ptp;\n\tu64 qpx_rq3size;\n\tu64 qpx_rq3wsize;\n\tu64 qpx_rq3th;\n\tu64 qpx_lpn;\n\tu64 qpx_reserved9[(0x400 - 0x378) / 8];\n\tu64 reserved_ext[(0x500 - 0x400) / 8];\n\tu64 reserved2[(0x1000 - 0x500) / 8];\n};\n\n#define MRx_HCR_LPARID_VALID EHEA_BMASK_IBM(0, 0)\n\n#define MRMWMM_OFFSET(x) offsetof(struct ehea_mrmwmm, x)\n\nstruct ehea_mrmwmm {\n\tu64 mrx_hcr;\n\tu64 mrx_c;\n\tu64 mrx_herr;\n\tu64 mrx_aer;\n\tu64 mrx_pp;\n\tu64 reserved1;\n\tu64 reserved2;\n\tu64 reserved3;\n\tu64 reserved4[(0x200 - 0x40) / 8];\n\tu64 mrx_ctl[64];\n};\n\n#define QPEDMM_OFFSET(x) offsetof(struct ehea_qpedmm, x)\n\nstruct ehea_qpedmm {\n\n\tu64 reserved0[(0x400) / 8];\n\tu64 qpedx_phh;\n\tu64 qpedx_ppsgp;\n\tu64 qpedx_ppsgu;\n\tu64 qpedx_ppdgp;\n\tu64 qpedx_ppdgu;\n\tu64 qpedx_aph;\n\tu64 qpedx_apsgp;\n\tu64 qpedx_apsgu;\n\tu64 qpedx_apdgp;\n\tu64 qpedx_apdgu;\n\tu64 qpedx_apav;\n\tu64 qpedx_apsav;\n\tu64 qpedx_hcr;\n\tu64 reserved1[4];\n\tu64 qpedx_rrl0;\n\tu64 qpedx_rrrkey0;\n\tu64 qpedx_rrva0;\n\tu64 reserved2;\n\tu64 qpedx_rrl1;\n\tu64 qpedx_rrrkey1;\n\tu64 qpedx_rrva1;\n\tu64 reserved3;\n\tu64 qpedx_rrl2;\n\tu64 qpedx_rrrkey2;\n\tu64 qpedx_rrva2;\n\tu64 reserved4;\n\tu64 qpedx_rrl3;\n\tu64 qpedx_rrrkey3;\n\tu64 qpedx_rrva3;\n};\n\n#define CQX_FECADDER EHEA_BMASK_IBM(32, 63)\n#define CQX_FEC_CQE_CNT EHEA_BMASK_IBM(32, 63)\n#define CQX_N1_GENERATE_COMP_EVENT EHEA_BMASK_IBM(0, 0)\n#define CQX_EP_EVENT_PENDING EHEA_BMASK_IBM(0, 0)\n\n#define CQTEMM_OFFSET(x) offsetof(struct ehea_cqtemm, x)\n\nstruct ehea_cqtemm {\n\tu64 cqx_hcr;\n\tu64 cqx_c;\n\tu64 cqx_herr;\n\tu64 cqx_aer;\n\tu64 cqx_ptp;\n\tu64 cqx_tp;\n\tu64 cqx_fec;\n\tu64 cqx_feca;\n\tu64 cqx_ep;\n\tu64 cqx_eq;\n\tu64 reserved1;\n\tu64 cqx_n0;\n\tu64 cqx_n1;\n\tu64 reserved2[(0x1000 - 0x60) / 8];\n};\n\n#define EQTEMM_OFFSET(x) offsetof(struct ehea_eqtemm, x)\n\nstruct ehea_eqtemm {\n\tu64 eqx_hcr;\n\tu64 eqx_c;\n\tu64 eqx_herr;\n\tu64 eqx_aer;\n\tu64 eqx_ptp;\n\tu64 eqx_tp;\n\tu64 eqx_ssba;\n\tu64 eqx_psba;\n\tu64 eqx_cec;\n\tu64 eqx_meql;\n\tu64 eqx_xisbi;\n\tu64 eqx_xisc;\n\tu64 eqx_it;\n};\n\n \n\nstatic inline u64 epa_load(struct h_epa epa, u32 offset)\n{\n\treturn __raw_readq((void __iomem *)(epa.addr + offset));\n}\n\nstatic inline void epa_store(struct h_epa epa, u32 offset, u64 value)\n{\n\t__raw_writeq(value, (void __iomem *)(epa.addr + offset));\n\tepa_load(epa, offset);\t \n}\n\nstatic inline void epa_store_acc(struct h_epa epa, u32 offset, u64 value)\n{\n\t__raw_writeq(value, (void __iomem *)(epa.addr + offset));\n}\n\n#define epa_store_cq(epa, offset, value)\\\n\tepa_store(epa, CQTEMM_OFFSET(offset), value)\n#define epa_load_cq(epa, offset)\\\n\tepa_load(epa, CQTEMM_OFFSET(offset))\n\nstatic inline void ehea_update_sqa(struct ehea_qp *qp, u16 nr_wqes)\n{\n\tstruct h_epa epa = qp->epas.kernel;\n\tepa_store_acc(epa, QPTEMM_OFFSET(qpx_sqa),\n\t\t      EHEA_BMASK_SET(QPX_SQA_VALUE, nr_wqes));\n}\n\nstatic inline void ehea_update_rq3a(struct ehea_qp *qp, u16 nr_wqes)\n{\n\tstruct h_epa epa = qp->epas.kernel;\n\tepa_store_acc(epa, QPTEMM_OFFSET(qpx_rq3a),\n\t\t      EHEA_BMASK_SET(QPX_RQ1A_VALUE, nr_wqes));\n}\n\nstatic inline void ehea_update_rq2a(struct ehea_qp *qp, u16 nr_wqes)\n{\n\tstruct h_epa epa = qp->epas.kernel;\n\tepa_store_acc(epa, QPTEMM_OFFSET(qpx_rq2a),\n\t\t      EHEA_BMASK_SET(QPX_RQ2A_VALUE, nr_wqes));\n}\n\nstatic inline void ehea_update_rq1a(struct ehea_qp *qp, u16 nr_wqes)\n{\n\tstruct h_epa epa = qp->epas.kernel;\n\tepa_store_acc(epa, QPTEMM_OFFSET(qpx_rq1a),\n\t\t      EHEA_BMASK_SET(QPX_RQ3A_VALUE, nr_wqes));\n}\n\nstatic inline void ehea_update_feca(struct ehea_cq *cq, u32 nr_cqes)\n{\n\tstruct h_epa epa = cq->epas.kernel;\n\tepa_store_acc(epa, CQTEMM_OFFSET(cqx_feca),\n\t\t      EHEA_BMASK_SET(CQX_FECADDER, nr_cqes));\n}\n\nstatic inline void ehea_reset_cq_n1(struct ehea_cq *cq)\n{\n\tstruct h_epa epa = cq->epas.kernel;\n\tepa_store_cq(epa, cqx_n1,\n\t\t     EHEA_BMASK_SET(CQX_N1_GENERATE_COMP_EVENT, 1));\n}\n\nstatic inline void ehea_reset_cq_ep(struct ehea_cq *my_cq)\n{\n\tstruct h_epa epa = my_cq->epas.kernel;\n\tepa_store_acc(epa, CQTEMM_OFFSET(cqx_ep),\n\t\t      EHEA_BMASK_SET(CQX_EP_EVENT_PENDING, 0));\n}\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}