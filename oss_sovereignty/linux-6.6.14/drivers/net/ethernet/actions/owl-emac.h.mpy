{
  "module_name": "owl-emac.h",
  "hash_id": "88df0ee26baf2b78a81cb7f5bd7579290ce96bc3a30128e5335ef4da24df69cb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/actions/owl-emac.h",
  "human_readable_source": " \n \n\n#ifndef __OWL_EMAC_H__\n#define __OWL_EMAC_H__\n\n#define OWL_EMAC_DRVNAME\t\t\t\"owl-emac\"\n\n#define OWL_EMAC_POLL_DELAY_USEC\t\t5\n#define OWL_EMAC_MDIO_POLL_TIMEOUT_USEC\t\t1000\n#define OWL_EMAC_RESET_POLL_TIMEOUT_USEC\t2000\n#define OWL_EMAC_TX_TIMEOUT\t\t\t(2 * HZ)\n\n#define OWL_EMAC_MTU_MIN\t\t\tETH_MIN_MTU\n#define OWL_EMAC_MTU_MAX\t\t\tETH_DATA_LEN\n#define OWL_EMAC_RX_FRAME_MAX_LEN\t\t(ETH_FRAME_LEN + ETH_FCS_LEN)\n#define OWL_EMAC_SKB_ALIGN\t\t\t4\n#define OWL_EMAC_SKB_RESERVE\t\t\t18\n\n#define OWL_EMAC_MAX_MULTICAST_ADDRS\t\t14\n#define OWL_EMAC_SETUP_FRAME_LEN\t\t192\n\n#define OWL_EMAC_RX_RING_SIZE\t\t\t64\n#define OWL_EMAC_TX_RING_SIZE\t\t\t32\n\n \n#define OWL_EMAC_REG_MAC_CSR0\t\t\t0x0000\n#define OWL_EMAC_BIT_MAC_CSR0_SWR\t\tBIT(0)\t \n\n \n#define OWL_EMAC_REG_MAC_CSR1\t\t\t0x0008\n#define OWL_EMAC_VAL_MAC_CSR1_TPD\t\t0x01\n#define OWL_EMAC_REG_MAC_CSR2\t\t\t0x0010\n#define OWL_EMAC_VAL_MAC_CSR2_RPD\t\t0x01\n\n \n#define OWL_EMAC_REG_MAC_CSR3\t\t\t0x0018\n#define OWL_EMAC_REG_MAC_CSR4\t\t\t0x0020\n\n \n#define OWL_EMAC_REG_MAC_CSR5\t\t\t0x0028\n#define OWL_EMAC_MSK_MAC_CSR5_TS\t\tGENMASK(22, 20)\t \n#define OWL_EMAC_OFF_MAC_CSR5_TS\t\t20\n#define OWL_EMAC_VAL_MAC_CSR5_TS_DATA\t\t0x03\t \n#define OWL_EMAC_VAL_MAC_CSR5_TS_CDES\t\t0x07\t \n#define OWL_EMAC_MSK_MAC_CSR5_RS\t\tGENMASK(19, 17)\t \n#define OWL_EMAC_OFF_MAC_CSR5_RS\t\t17\n#define OWL_EMAC_VAL_MAC_CSR5_RS_FDES\t\t0x01\t \n#define OWL_EMAC_VAL_MAC_CSR5_RS_CDES\t\t0x05\t \n#define OWL_EMAC_VAL_MAC_CSR5_RS_DATA\t\t0x07\t \n#define OWL_EMAC_BIT_MAC_CSR5_NIS\t\tBIT(16)\t \n#define OWL_EMAC_BIT_MAC_CSR5_AIS\t\tBIT(15)\t \n#define OWL_EMAC_BIT_MAC_CSR5_ERI\t\tBIT(14)\t \n#define OWL_EMAC_BIT_MAC_CSR5_GTE\t\tBIT(11)\t \n#define OWL_EMAC_BIT_MAC_CSR5_ETI\t\tBIT(10)\t \n#define OWL_EMAC_BIT_MAC_CSR5_RPS\t\tBIT(8)\t \n#define OWL_EMAC_BIT_MAC_CSR5_RU\t\tBIT(7)\t \n#define OWL_EMAC_BIT_MAC_CSR5_RI\t\tBIT(6)\t \n#define OWL_EMAC_BIT_MAC_CSR5_UNF\t\tBIT(5)\t \n#define OWL_EMAC_BIT_MAC_CSR5_LCIS\t\tBIT(4)\t \n#define OWL_EMAC_BIT_MAC_CSR5_LCIQ\t\tBIT(3)\t \n#define OWL_EMAC_BIT_MAC_CSR5_TU\t\tBIT(2)\t \n#define OWL_EMAC_BIT_MAC_CSR5_TPS\t\tBIT(1)\t \n#define OWL_EMAC_BIT_MAC_CSR5_TI\t\tBIT(0)\t \n\n \n#define OWL_EMAC_REG_MAC_CSR6\t\t\t0x0030\n#define OWL_EMAC_BIT_MAC_CSR6_RA\t\tBIT(30)\t \n#define OWL_EMAC_BIT_MAC_CSR6_TTM\t\tBIT(22)\t \n#define OWL_EMAC_BIT_MAC_CSR6_SF\t\tBIT(21)\t \n#define OWL_EMAC_MSK_MAC_CSR6_SPEED\t\tGENMASK(17, 16)\t \n#define OWL_EMAC_OFF_MAC_CSR6_SPEED\t\t16\n#define OWL_EMAC_VAL_MAC_CSR6_SPEED_100M\t0x00\n#define OWL_EMAC_VAL_MAC_CSR6_SPEED_10M\t\t0x02\n#define OWL_EMAC_BIT_MAC_CSR6_ST\t\tBIT(13)\t \n#define OWL_EMAC_BIT_MAC_CSR6_LP\t\tBIT(10)\t \n#define OWL_EMAC_BIT_MAC_CSR6_FD\t\tBIT(9)\t \n#define OWL_EMAC_BIT_MAC_CSR6_PM\t\tBIT(7)\t \n#define OWL_EMAC_BIT_MAC_CSR6_PR\t\tBIT(6)\t \n#define OWL_EMAC_BIT_MAC_CSR6_IF\t\tBIT(4)\t \n#define OWL_EMAC_BIT_MAC_CSR6_PB\t\tBIT(3)\t \n#define OWL_EMAC_BIT_MAC_CSR6_HO\t\tBIT(2)\t \n#define OWL_EMAC_BIT_MAC_CSR6_SR\t\tBIT(1)\t \n#define OWL_EMAC_BIT_MAC_CSR6_HP\t\tBIT(0)\t \n#define OWL_EMAC_MSK_MAC_CSR6_STSR\t       (OWL_EMAC_BIT_MAC_CSR6_ST | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR6_SR)\n\n \n#define OWL_EMAC_REG_MAC_CSR7\t\t\t0x0038\n#define OWL_EMAC_BIT_MAC_CSR7_NIE\t\tBIT(16)\t \n#define OWL_EMAC_BIT_MAC_CSR7_AIE\t\tBIT(15)\t \n#define OWL_EMAC_BIT_MAC_CSR7_ERE\t\tBIT(14)\t \n#define OWL_EMAC_BIT_MAC_CSR7_GTE\t\tBIT(11)\t \n#define OWL_EMAC_BIT_MAC_CSR7_ETE\t\tBIT(10)\t \n#define OWL_EMAC_BIT_MAC_CSR7_RSE\t\tBIT(8)\t \n#define OWL_EMAC_BIT_MAC_CSR7_RUE\t\tBIT(7)\t \n#define OWL_EMAC_BIT_MAC_CSR7_RIE\t\tBIT(6)\t \n#define OWL_EMAC_BIT_MAC_CSR7_UNE\t\tBIT(5)\t \n#define OWL_EMAC_BIT_MAC_CSR7_TUE\t\tBIT(2)\t \n#define OWL_EMAC_BIT_MAC_CSR7_TSE\t\tBIT(1)\t \n#define OWL_EMAC_BIT_MAC_CSR7_TIE\t\tBIT(0)\t \n#define OWL_EMAC_BIT_MAC_CSR7_ALL_NOT_TUE      (OWL_EMAC_BIT_MAC_CSR7_ERE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_GTE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_ETE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_RSE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_RUE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_RIE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_UNE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_TSE | \\\n\t\t\t\t\t\tOWL_EMAC_BIT_MAC_CSR7_TIE)\n\n \n#define OWL_EMAC_REG_MAC_CSR8\t\t\t0x0040\n \n#define OWL_EMAC_REG_MAC_CSR9\t\t\t0x0048\n\n \n#define OWL_EMAC_REG_MAC_CSR10\t\t\t0x0050\n#define OWL_EMAC_BIT_MAC_CSR10_SB\t\tBIT(31)\t \n#define OWL_EMAC_MSK_MAC_CSR10_CLKDIV\t\tGENMASK(30, 28)\t \n#define OWL_EMAC_OFF_MAC_CSR10_CLKDIV\t\t28\n#define OWL_EMAC_VAL_MAC_CSR10_CLKDIV_128\t0x04\n#define OWL_EMAC_VAL_MAC_CSR10_OPCODE_WR\t0x01\t \n#define OWL_EMAC_OFF_MAC_CSR10_OPCODE\t\t26\t \n#define OWL_EMAC_VAL_MAC_CSR10_OPCODE_DCG\t0x00\t \n#define OWL_EMAC_VAL_MAC_CSR10_OPCODE_WR\t0x01\t \n#define OWL_EMAC_VAL_MAC_CSR10_OPCODE_RD\t0x02\t \n#define OWL_EMAC_VAL_MAC_CSR10_OPCODE_CDS\t0x03\t \n#define OWL_EMAC_MSK_MAC_CSR10_PHYADD\t\tGENMASK(25, 21)\t \n#define OWL_EMAC_OFF_MAC_CSR10_PHYADD\t\t21\n#define OWL_EMAC_MSK_MAC_CSR10_REGADD\t\tGENMASK(20, 16)\t \n#define OWL_EMAC_OFF_MAC_CSR10_REGADD\t\t16\n#define OWL_EMAC_MSK_MAC_CSR10_DATA\t\tGENMASK(15, 0)\t \n\n \n#define OWL_EMAC_REG_MAC_CSR11\t\t\t0x0058\n#define OWL_EMAC_OFF_MAC_CSR11_TT\t\t27\t \n#define OWL_EMAC_OFF_MAC_CSR11_NTP\t\t24\t \n#define OWL_EMAC_OFF_MAC_CSR11_RT\t\t20\t \n#define OWL_EMAC_OFF_MAC_CSR11_NRP\t\t17\t \n\n \n#define OWL_EMAC_REG_MAC_CSR16\t\t\t0x0080\n#define OWL_EMAC_REG_MAC_CSR17\t\t\t0x0088\n\n \n#define OWL_EMAC_REG_MAC_CSR18\t\t\t0x0090\n#define OWL_EMAC_OFF_MAC_CSR18_CPTL\t\t24\t \n#define OWL_EMAC_OFF_MAC_CSR18_CRTL\t\t16\t \n#define OWL_EMAC_OFF_MAC_CSR18_PQT\t\t0\t \n\n \n#define OWL_EMAC_REG_MAC_CSR19\t\t\t0x0098\n#define OWL_EMAC_OFF_MAC_CSR19_FPTL\t\t16\t \n#define OWL_EMAC_OFF_MAC_CSR19_FRTL\t\t0\t \n\n \n#define OWL_EMAC_REG_MAC_CSR20\t\t\t0x00A0\n#define OWL_EMAC_BIT_MAC_CSR20_FCE\t\tBIT(31)\t \n#define OWL_EMAC_BIT_MAC_CSR20_TUE\t\tBIT(30)\t \n#define OWL_EMAC_BIT_MAC_CSR20_TPE\t\tBIT(29)\t \n#define OWL_EMAC_BIT_MAC_CSR20_RPE\t\tBIT(28)\t \n#define OWL_EMAC_BIT_MAC_CSR20_BPE\t\tBIT(27)\t \n\n \n#define OWL_EMAC_REG_MAC_CTRL\t\t\t0x00B0\n#define OWL_EMAC_BIT_MAC_CTRL_RRSB\t\tBIT(8)\t \n#define OWL_EMAC_OFF_MAC_CTRL_SSDC\t\t4\t \n#define OWL_EMAC_BIT_MAC_CTRL_RCPS\t\tBIT(1)\t \n#define OWL_EMAC_BIT_MAC_CTRL_RSIS\t\tBIT(0)\t \n\n \n#define OWL_EMAC_BIT_RDES0_OWN\t\t\tBIT(31)\t \n#define OWL_EMAC_BIT_RDES0_FF\t\t\tBIT(30)\t \n#define OWL_EMAC_MSK_RDES0_FL\t\t\tGENMASK(29, 16)\t \n#define OWL_EMAC_OFF_RDES0_FL\t\t\t16\n#define OWL_EMAC_BIT_RDES0_ES\t\t\tBIT(15)\t \n#define OWL_EMAC_BIT_RDES0_DE\t\t\tBIT(14)\t \n#define OWL_EMAC_BIT_RDES0_RF\t\t\tBIT(11)\t \n#define OWL_EMAC_BIT_RDES0_MF\t\t\tBIT(10)\t \n#define OWL_EMAC_BIT_RDES0_FS\t\t\tBIT(9)\t \n#define OWL_EMAC_BIT_RDES0_LS\t\t\tBIT(8)\t \n#define OWL_EMAC_BIT_RDES0_TL\t\t\tBIT(7)\t \n#define OWL_EMAC_BIT_RDES0_CS\t\t\tBIT(6)\t \n#define OWL_EMAC_BIT_RDES0_FT\t\t\tBIT(5)\t \n#define OWL_EMAC_BIT_RDES0_RE\t\t\tBIT(3)\t \n#define OWL_EMAC_BIT_RDES0_DB\t\t\tBIT(2)\t \n#define OWL_EMAC_BIT_RDES0_CE\t\t\tBIT(1)\t \n#define OWL_EMAC_BIT_RDES0_ZERO\t\t\tBIT(0)\t \n\n \n#define OWL_EMAC_BIT_RDES1_RER\t\t\tBIT(25)\t \n#define OWL_EMAC_MSK_RDES1_RBS1\t\t\tGENMASK(10, 0)  \n\n \n#define OWL_EMAC_BIT_TDES0_OWN\t\t\tBIT(31)\t \n#define OWL_EMAC_BIT_TDES0_ES\t\t\tBIT(15)\t \n#define OWL_EMAC_BIT_TDES0_LO\t\t\tBIT(11)\t \n#define OWL_EMAC_BIT_TDES0_NC\t\t\tBIT(10)\t \n#define OWL_EMAC_BIT_TDES0_LC\t\t\tBIT(9)\t \n#define OWL_EMAC_BIT_TDES0_EC\t\t\tBIT(8)\t \n#define OWL_EMAC_MSK_TDES0_CC\t\t\tGENMASK(6, 3)  \n#define OWL_EMAC_BIT_TDES0_UF\t\t\tBIT(1)\t \n#define OWL_EMAC_BIT_TDES0_DE\t\t\tBIT(0)\t \n\n \n#define OWL_EMAC_BIT_TDES1_IC\t\t\tBIT(31)\t \n#define OWL_EMAC_BIT_TDES1_LS\t\t\tBIT(30)\t \n#define OWL_EMAC_BIT_TDES1_FS\t\t\tBIT(29)\t \n#define OWL_EMAC_BIT_TDES1_FT1\t\t\tBIT(28)\t \n#define OWL_EMAC_BIT_TDES1_SET\t\t\tBIT(27)\t \n#define OWL_EMAC_BIT_TDES1_AC\t\t\tBIT(26)\t \n#define OWL_EMAC_BIT_TDES1_TER\t\t\tBIT(25)\t \n#define OWL_EMAC_BIT_TDES1_DPD\t\t\tBIT(23)\t \n#define OWL_EMAC_BIT_TDES1_FT0\t\t\tBIT(22)\t \n#define OWL_EMAC_MSK_TDES1_TBS1\t\t\tGENMASK(10, 0)  \n\nstatic const char *const owl_emac_clk_names[] = { \"eth\", \"rmii\" };\n#define OWL_EMAC_NCLKS ARRAY_SIZE(owl_emac_clk_names)\n\nenum owl_emac_clk_map {\n\tOWL_EMAC_CLK_ETH = 0,\n\tOWL_EMAC_CLK_RMII\n};\n\nstruct owl_emac_addr_list {\n\tu8 addrs[OWL_EMAC_MAX_MULTICAST_ADDRS][ETH_ALEN];\n\tint count;\n};\n\n \nstruct owl_emac_ring_desc {\n\tu32 status;\n\tu32 control;\n\tu32 buf_addr;\n\tu32 reserved;\t\t \n};\n\nstruct owl_emac_ring {\n\tstruct owl_emac_ring_desc *descs;\n\tdma_addr_t descs_dma;\n\tstruct sk_buff **skbs;\n\tdma_addr_t *skbs_dma;\n\tunsigned int size;\n\tunsigned int head;\n\tunsigned int tail;\n};\n\nstruct owl_emac_priv {\n\tstruct net_device *netdev;\n\tvoid __iomem *base;\n\n\tstruct clk_bulk_data clks[OWL_EMAC_NCLKS];\n\tstruct reset_control *reset;\n\n\tstruct owl_emac_ring rx_ring;\n\tstruct owl_emac_ring tx_ring;\n\n\tstruct mii_bus *mii;\n\tstruct napi_struct napi;\n\n\tphy_interface_t phy_mode;\n\tunsigned int link;\n\tint speed;\n\tint duplex;\n\tint pause;\n\tstruct owl_emac_addr_list mcaddr_list;\n\n\tstruct work_struct mac_reset_task;\n\n\tu32 msg_enable;\t\t \n\tspinlock_t lock;\t \n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}