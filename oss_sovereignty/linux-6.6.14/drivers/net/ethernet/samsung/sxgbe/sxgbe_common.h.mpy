{
  "module_name": "sxgbe_common.h",
  "hash_id": "64bbe0ad051fbdd2219db7af5a5ae12b2f345f28ca69c50f3cd71368d19d2cda",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/samsung/sxgbe/sxgbe_common.h",
  "human_readable_source": " \n \n\n#ifndef __SXGBE_COMMON_H__\n#define __SXGBE_COMMON_H__\n\n \nstruct sxgbe_desc_ops;\nstruct sxgbe_dma_ops;\nstruct sxgbe_mtl_ops;\n\n#define SXGBE_RESOURCE_NAME\t\"sam_sxgbeeth\"\n#define DRV_MODULE_VERSION\t\"November_2013\"\n\n \n#define SXGBE_HW_WORDS 3\n\n#define SXGBE_RX_COE_NONE\t0\n\n \n#define SXGBE_CSR_F_150M\t150000000\n#define SXGBE_CSR_F_250M\t250000000\n#define SXGBE_CSR_F_300M\t300000000\n#define SXGBE_CSR_F_350M\t350000000\n#define SXGBE_CSR_F_400M\t400000000\n#define SXGBE_CSR_F_500M\t500000000\n\n \n#define SXGBE_PAUSE_TIME 0x200\n\n \n#define SXGBE_TX_QUEUES   8\n#define SXGBE_RX_QUEUES   16\n\n \n#define SXGBE_MAX_DMA_RIWT\t0x70\n#define SXGBE_MIN_DMA_RIWT\t0x01\n\n \n#define SXGBE_COAL_TX_TIMER\t40000\n#define SXGBE_MAX_COAL_TX_TICK\t100000\n#define SXGBE_TX_MAX_FRAMES\t512\n#define SXGBE_TX_FRAMES\t128\n\n \n#define BUF_SIZE_16KiB 16384\n#define BUF_SIZE_8KiB 8192\n#define BUF_SIZE_4KiB 4096\n#define BUF_SIZE_2KiB 2048\n\n#define SXGBE_DEFAULT_LIT_LS\t0x3E8\n#define SXGBE_DEFAULT_TWT_LS\t0x0\n\n \n#define SXGBE_FLOW_OFF\t\t0\n#define SXGBE_FLOW_RX\t\t1\n#define SXGBE_FLOW_TX\t\t2\n#define SXGBE_FLOW_AUTO\t\t(SXGBE_FLOW_TX | SXGBE_FLOW_RX)\n\n#define SF_DMA_MODE 1\t\t \n\n \n#define RX_GMII_ERR\t\t0x01\n#define RX_WATCHDOG_ERR\t\t0x02\n#define RX_CRC_ERR\t\t0x03\n#define RX_GAINT_ERR\t\t0x04\n#define RX_IP_HDR_ERR\t\t0x05\n#define RX_PAYLOAD_ERR\t\t0x06\n#define RX_OVERFLOW_ERR\t\t0x07\n\n \n#define RX_LEN_PKT\t\t0x00\n#define RX_MACCTL_PKT\t\t0x01\n#define RX_DCBCTL_PKT\t\t0x02\n#define RX_ARP_PKT\t\t0x03\n#define RX_OAM_PKT\t\t0x04\n#define RX_UNTAG_PKT\t\t0x05\n#define RX_OTHER_PKT\t\t0x07\n#define RX_SVLAN_PKT\t\t0x08\n#define RX_CVLAN_PKT\t\t0x09\n#define RX_DVLAN_OCVLAN_ICVLAN_PKT\t\t0x0A\n#define RX_DVLAN_OSVLAN_ISVLAN_PKT\t\t0x0B\n#define RX_DVLAN_OSVLAN_ICVLAN_PKT\t\t0x0C\n#define RX_DVLAN_OCVLAN_ISVLAN_PKT\t\t0x0D\n\n#define RX_NOT_IP_PKT\t\t0x00\n#define RX_IPV4_TCP_PKT\t\t0x01\n#define RX_IPV4_UDP_PKT\t\t0x02\n#define RX_IPV4_ICMP_PKT\t0x03\n#define RX_IPV4_UNKNOWN_PKT\t0x07\n#define RX_IPV6_TCP_PKT\t\t0x09\n#define RX_IPV6_UDP_PKT\t\t0x0A\n#define RX_IPV6_ICMP_PKT\t0x0B\n#define RX_IPV6_UNKNOWN_PKT\t0x0F\n\n#define RX_NO_PTP\t\t0x00\n#define RX_PTP_SYNC\t\t0x01\n#define RX_PTP_FOLLOW_UP\t0x02\n#define RX_PTP_DELAY_REQ\t0x03\n#define RX_PTP_DELAY_RESP\t0x04\n#define RX_PTP_PDELAY_REQ\t0x05\n#define RX_PTP_PDELAY_RESP\t0x06\n#define RX_PTP_PDELAY_FOLLOW_UP\t0x07\n#define RX_PTP_ANNOUNCE\t\t0x08\n#define RX_PTP_MGMT\t\t0x09\n#define RX_PTP_SIGNAL\t\t0x0A\n#define RX_PTP_RESV_MSG\t\t0x0F\n\n \n#define TX_ENTRY_LPI_MODE\t0x10\n#define TX_EXIT_LPI_MODE\t0x20\n#define RX_ENTRY_LPI_MODE\t0x40\n#define RX_EXIT_LPI_MODE\t0x80\n\n \n#define LPI_INT_STATUS\t\tBIT(5)\n\n \n#define LPI_LINK_STATUS_TIMER\t0x3E8\n#define LPI_MAC_WAIT_TIMER\t0x00\n\n \n#define LPI_CTRL_STATUS_TXA\tBIT(19)\n#define LPI_CTRL_STATUS_PLSDIS\tBIT(18)\n#define LPI_CTRL_STATUS_PLS\tBIT(17)\n#define LPI_CTRL_STATUS_LPIEN\tBIT(16)\n#define LPI_CTRL_STATUS_TXRSTP\tBIT(11)\n#define LPI_CTRL_STATUS_RXRSTP\tBIT(10)\n#define LPI_CTRL_STATUS_RLPIST\tBIT(9)\n#define LPI_CTRL_STATUS_TLPIST\tBIT(8)\n#define LPI_CTRL_STATUS_RLPIEX\tBIT(3)\n#define LPI_CTRL_STATUS_RLPIEN\tBIT(2)\n#define LPI_CTRL_STATUS_TLPIEX\tBIT(1)\n#define LPI_CTRL_STATUS_TLPIEN\tBIT(0)\n\nenum dma_irq_status {\n\ttx_hard_error\t= BIT(0),\n\ttx_bump_tc\t= BIT(1),\n\thandle_tx\t= BIT(2),\n\trx_hard_error\t= BIT(3),\n\trx_bump_tc\t= BIT(4),\n\thandle_rx\t= BIT(5),\n};\n\n#define NETIF_F_HW_VLAN_ALL     (NETIF_F_HW_VLAN_CTAG_RX |\t\\\n\t\t\t\t NETIF_F_HW_VLAN_STAG_RX |\t\\\n\t\t\t\t NETIF_F_HW_VLAN_CTAG_TX |\t\\\n\t\t\t\t NETIF_F_HW_VLAN_STAG_TX |\t\\\n\t\t\t\t NETIF_F_HW_VLAN_CTAG_FILTER |\t\\\n\t\t\t\t NETIF_F_HW_VLAN_STAG_FILTER)\n\n \n#define SXGBE_MMC_CTRL_CNT_FRZ  0x00000008\n\n \n#define SXGBE_ADDR_HIGH(reg)    (((reg > 15) ? 0x00000800 : 0x00000040) + \\\n\t\t\t\t (reg * 8))\n#define SXGBE_ADDR_LOW(reg)     (((reg > 15) ? 0x00000804 : 0x00000044) + \\\n\t\t\t\t (reg * 8))\n#define SXGBE_MAX_PERFECT_ADDRESSES 32  \n#define SXGBE_FRAME_FILTER       0x00000004       \n\n \n#define SXGBE_FRAME_FILTER_PR    0x00000001       \n#define SXGBE_FRAME_FILTER_HUC   0x00000002       \n#define SXGBE_FRAME_FILTER_HMC   0x00000004       \n#define SXGBE_FRAME_FILTER_DAIF  0x00000008       \n#define SXGBE_FRAME_FILTER_PM    0x00000010       \n#define SXGBE_FRAME_FILTER_DBF   0x00000020       \n#define SXGBE_FRAME_FILTER_SAIF  0x00000100       \n#define SXGBE_FRAME_FILTER_SAF   0x00000200       \n#define SXGBE_FRAME_FILTER_HPF   0x00000400       \n#define SXGBE_FRAME_FILTER_RA    0x80000000       \n\n#define SXGBE_HASH_TABLE_SIZE    64\n#define SXGBE_HASH_HIGH          0x00000008       \n#define SXGBE_HASH_LOW           0x0000000c       \n\n#define SXGBE_HI_REG_AE          0x80000000\n\n \n#define MIN_MTU         68\n#define MAX_MTU         9000\n\n#define SXGBE_FOR_EACH_QUEUE(max_queues, queue_num)\t\t\t\\\n\tfor (queue_num = 0; queue_num < max_queues; queue_num++)\n\n#define DRV_VERSION \"1.0.0\"\n\n#define SXGBE_MAX_RX_CHANNELS\t16\n#define SXGBE_MAX_TX_CHANNELS\t16\n\n#define START_MAC_REG_OFFSET\t0x0000\n#define MAX_MAC_REG_OFFSET\t0x0DFC\n#define START_MTL_REG_OFFSET\t0x1000\n#define MAX_MTL_REG_OFFSET\t0x18FC\n#define START_DMA_REG_OFFSET\t0x3000\n#define MAX_DMA_REG_OFFSET\t0x38FC\n\n#define REG_SPACE_SIZE\t\t0x2000\n\n \nstruct sxgbe_extra_stats {\n\t \n\tunsigned long tx_underflow_irq;\n\tunsigned long tx_process_stopped_irq;\n\tunsigned long tx_ctxt_desc_err;\n\tunsigned long tx_threshold;\n\tunsigned long rx_threshold;\n\tunsigned long tx_pkt_n;\n\tunsigned long rx_pkt_n;\n\tunsigned long normal_irq_n;\n\tunsigned long tx_normal_irq_n;\n\tunsigned long rx_normal_irq_n;\n\tunsigned long napi_poll;\n\tunsigned long tx_clean;\n\tunsigned long tx_reset_ic_bit;\n\tunsigned long rx_process_stopped_irq;\n\tunsigned long rx_underflow_irq;\n\n\t \n\tunsigned long fatal_bus_error_irq;\n\tunsigned long tx_read_transfer_err;\n\tunsigned long tx_write_transfer_err;\n\tunsigned long tx_desc_access_err;\n\tunsigned long tx_buffer_access_err;\n\tunsigned long tx_data_transfer_err;\n\tunsigned long rx_read_transfer_err;\n\tunsigned long rx_write_transfer_err;\n\tunsigned long rx_desc_access_err;\n\tunsigned long rx_buffer_access_err;\n\tunsigned long rx_data_transfer_err;\n\n\t \n\tunsigned long tx_lpi_entry_n;\n\tunsigned long tx_lpi_exit_n;\n\tunsigned long rx_lpi_entry_n;\n\tunsigned long rx_lpi_exit_n;\n\tunsigned long eee_wakeup_error_n;\n\n\t \n\t \n\tunsigned long rx_code_gmii_err;\n\tunsigned long rx_watchdog_err;\n\tunsigned long rx_crc_err;\n\tunsigned long rx_gaint_pkt_err;\n\tunsigned long ip_hdr_err;\n\tunsigned long ip_payload_err;\n\tunsigned long overflow_error;\n\n\t \n\tunsigned long len_pkt;\n\tunsigned long mac_ctl_pkt;\n\tunsigned long dcb_ctl_pkt;\n\tunsigned long arp_pkt;\n\tunsigned long oam_pkt;\n\tunsigned long untag_okt;\n\tunsigned long other_pkt;\n\tunsigned long svlan_tag_pkt;\n\tunsigned long cvlan_tag_pkt;\n\tunsigned long dvlan_ocvlan_icvlan_pkt;\n\tunsigned long dvlan_osvlan_isvlan_pkt;\n\tunsigned long dvlan_osvlan_icvlan_pkt;\n\tunsigned long dvan_ocvlan_icvlan_pkt;\n\n\t \n\tunsigned long not_ip_pkt;\n\tunsigned long ip4_tcp_pkt;\n\tunsigned long ip4_udp_pkt;\n\tunsigned long ip4_icmp_pkt;\n\tunsigned long ip4_unknown_pkt;\n\tunsigned long ip6_tcp_pkt;\n\tunsigned long ip6_udp_pkt;\n\tunsigned long ip6_icmp_pkt;\n\tunsigned long ip6_unknown_pkt;\n\n\t \n\tunsigned long vlan_filter_match;\n\tunsigned long sa_filter_fail;\n\tunsigned long da_filter_fail;\n\tunsigned long hash_filter_pass;\n\tunsigned long l3_filter_match;\n\tunsigned long l4_filter_match;\n\n\t \n\tunsigned long timestamp_dropped;\n\tunsigned long rx_msg_type_no_ptp;\n\tunsigned long rx_ptp_type_sync;\n\tunsigned long rx_ptp_type_follow_up;\n\tunsigned long rx_ptp_type_delay_req;\n\tunsigned long rx_ptp_type_delay_resp;\n\tunsigned long rx_ptp_type_pdelay_req;\n\tunsigned long rx_ptp_type_pdelay_resp;\n\tunsigned long rx_ptp_type_pdelay_follow_up;\n\tunsigned long rx_ptp_announce;\n\tunsigned long rx_ptp_mgmt;\n\tunsigned long rx_ptp_signal;\n\tunsigned long rx_ptp_resv_msg_type;\n};\n\nstruct mac_link {\n\tint port;\n\tint duplex;\n\tint speed;\n};\n\nstruct mii_regs {\n\tunsigned int addr;\t \n\tunsigned int data;\t \n};\n\nstruct sxgbe_core_ops {\n\t \n\tvoid (*core_init)(void __iomem *ioaddr);\n\t \n\tvoid (*dump_regs)(void __iomem *ioaddr);\n\t \n\tint (*host_irq_status)(void __iomem *ioaddr,\n\t\t\t       struct sxgbe_extra_stats *x);\n\t \n\tvoid (*pmt)(void __iomem *ioaddr, unsigned long mode);\n\t \n\tvoid (*set_umac_addr)(void __iomem *ioaddr, const unsigned char *addr,\n\t\t\t      unsigned int reg_n);\n\tvoid (*get_umac_addr)(void __iomem *ioaddr, unsigned char *addr,\n\t\t\t      unsigned int reg_n);\n\tvoid (*enable_rx)(void __iomem *ioaddr, bool enable);\n\tvoid (*enable_tx)(void __iomem *ioaddr, bool enable);\n\n\t \n\tint (*get_controller_version)(void __iomem *ioaddr);\n\n\t \n\tunsigned int (*get_hw_feature)(void __iomem *ioaddr,\n\t\t\t\t       unsigned char feature_index);\n\t \n\tvoid (*set_speed)(void __iomem *ioaddr, unsigned char speed);\n\n\t \n\tvoid (*set_eee_mode)(void __iomem *ioaddr);\n\tvoid (*reset_eee_mode)(void __iomem *ioaddr);\n\tvoid (*set_eee_timer)(void __iomem *ioaddr, const int ls,\n\t\t\t      const int tw);\n\tvoid (*set_eee_pls)(void __iomem *ioaddr, const int link);\n\n\t \n\tvoid (*enable_rx_csum)(void __iomem *ioaddr);\n\tvoid (*disable_rx_csum)(void __iomem *ioaddr);\n\tvoid (*enable_rxqueue)(void __iomem *ioaddr, int queue_num);\n\tvoid (*disable_rxqueue)(void __iomem *ioaddr, int queue_num);\n};\n\nconst struct sxgbe_core_ops *sxgbe_get_core_ops(void);\n\nstruct sxgbe_ops {\n\tconst struct sxgbe_core_ops *mac;\n\tconst struct sxgbe_desc_ops *desc;\n\tconst struct sxgbe_dma_ops *dma;\n\tconst struct sxgbe_mtl_ops *mtl;\n\tstruct mii_regs mii;\t \n\tstruct mac_link link;\n\tunsigned int ctrl_uid;\n\tunsigned int ctrl_id;\n};\n\n \nstruct sxgbe_tx_queue {\n\tunsigned int irq_no;\n\tstruct sxgbe_priv_data *priv_ptr;\n\tstruct sxgbe_tx_norm_desc *dma_tx;\n\tdma_addr_t dma_tx_phy;\n\tdma_addr_t *tx_skbuff_dma;\n\tstruct sk_buff **tx_skbuff;\n\tstruct timer_list txtimer;\n\tunsigned int cur_tx;\n\tunsigned int dirty_tx;\n\tu32 tx_count_frames;\n\tu32 tx_coal_frames;\n\tu32 tx_coal_timer;\n\tint hwts_tx_en;\n\tu16 prev_mss;\n\tu8 queue_no;\n};\n\nstruct sxgbe_rx_queue {\n\tstruct sxgbe_priv_data *priv_ptr;\n\tstruct sxgbe_rx_norm_desc *dma_rx;\n\tstruct sk_buff **rx_skbuff;\n\tunsigned int cur_rx;\n\tunsigned int dirty_rx;\n\tunsigned int irq_no;\n\tu32 rx_riwt;\n\tdma_addr_t *rx_skbuff_dma;\n\tdma_addr_t dma_rx_phy;\n\tu8 queue_no;\n};\n\n \nstruct sxgbe_hw_features {\n\t \n\tunsigned int pmt_remote_wake_up;\n\tunsigned int pmt_magic_frame;\n\t \n\tunsigned int atime_stamp;\n\n\tunsigned int eee;\n\n\tunsigned int tx_csum_offload;\n\tunsigned int rx_csum_offload;\n\tunsigned int multi_macaddr;\n\tunsigned int tstamp_srcselect;\n\tunsigned int sa_vlan_insert;\n\n\t \n\tunsigned int rxfifo_size;\n\tunsigned int txfifo_size;\n\tunsigned int atstmap_hword;\n\tunsigned int dcb_enable;\n\tunsigned int splithead_enable;\n\tunsigned int tcpseg_offload;\n\tunsigned int debug_mem;\n\tunsigned int rss_enable;\n\tunsigned int hash_tsize;\n\tunsigned int l3l4_filer_size;\n\n\t \n\tunsigned int rx_mtl_qsize;\n\tunsigned int tx_mtl_qsize;\n\n\t \n\t \n\tunsigned int rx_mtl_queues;\n\tunsigned int tx_mtl_queues;\n\tunsigned int rx_dma_channels;\n\tunsigned int tx_dma_channels;\n\tunsigned int pps_output_count;\n\tunsigned int aux_input_count;\n};\n\nstruct sxgbe_priv_data {\n\t \n\tstruct sxgbe_tx_queue *txq[SXGBE_TX_QUEUES];\n\tstruct sxgbe_rx_queue *rxq[SXGBE_RX_QUEUES];\n\tu8 cur_rx_qnum;\n\n\tunsigned int dma_tx_size;\n\tunsigned int dma_rx_size;\n\tunsigned int dma_buf_sz;\n\tu32 rx_riwt;\n\n\tstruct napi_struct napi;\n\n\tvoid __iomem *ioaddr;\n\tstruct net_device *dev;\n\tstruct device *device;\n\tstruct sxgbe_ops *hw;\t \n\tint no_csum_insertion;\n\tint irq;\n\tint rxcsum_insertion;\n\tspinlock_t stats_lock;\t \n\n\tint oldlink;\n\tint speed;\n\tint oldduplex;\n\tstruct mii_bus *mii;\n\tint mii_irq[PHY_MAX_ADDR];\n\tu8 rx_pause;\n\tu8 tx_pause;\n\n\tstruct sxgbe_extra_stats xstats;\n\tstruct sxgbe_plat_data *plat;\n\tstruct sxgbe_hw_features hw_cap;\n\n\tu32 msg_enable;\n\n\tstruct clk *sxgbe_clk;\n\tint clk_csr;\n\tunsigned int mode;\n\tunsigned int default_addend;\n\n\t \n\tu32 adv_ts;\n\tint use_riwt;\n\tstruct ptp_clock *ptp_clock;\n\n\t \n\tint tx_tc;\n\tint rx_tc;\n\t \n\tstruct timer_list eee_ctrl_timer;\n\tbool tx_path_in_lpi_mode;\n\tint lpi_irq;\n\tint eee_enabled;\n\tint eee_active;\n\tint tx_lpi_timer;\n};\n\n \nstruct sxgbe_priv_data *sxgbe_drv_probe(struct device *device,\n\t\t\t\t\tstruct sxgbe_plat_data *plat_dat,\n\t\t\t\t\tvoid __iomem *addr);\nvoid sxgbe_drv_remove(struct net_device *ndev);\nvoid sxgbe_set_ethtool_ops(struct net_device *netdev);\nint sxgbe_mdio_unregister(struct net_device *ndev);\nint sxgbe_mdio_register(struct net_device *ndev);\nint sxgbe_register_platform(void);\nvoid sxgbe_unregister_platform(void);\n\n#ifdef CONFIG_PM\nint sxgbe_suspend(struct net_device *ndev);\nint sxgbe_resume(struct net_device *ndev);\nint sxgbe_freeze(struct net_device *ndev);\nint sxgbe_restore(struct net_device *ndev);\n#endif  \n\nconst struct sxgbe_mtl_ops *sxgbe_get_mtl_ops(void);\n\nvoid sxgbe_disable_eee_mode(struct sxgbe_priv_data * const priv);\nbool sxgbe_eee_init(struct sxgbe_priv_data * const priv);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}