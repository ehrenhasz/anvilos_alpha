{
  "module_name": "spider_net.h",
  "hash_id": "5d5238582eb5b3323df97c591dfb278b1dd636711ed764ed63a6dc9ce8e904dc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/toshiba/spider_net.h",
  "human_readable_source": " \n \n\n#ifndef _SPIDER_NET_H\n#define _SPIDER_NET_H\n\n#define VERSION \"2.0 B\"\n\n#include <linux/sungem_phy.h>\n\nint spider_net_stop(struct net_device *netdev);\nint spider_net_open(struct net_device *netdev);\n\nextern const struct ethtool_ops spider_net_ethtool_ops;\n\nextern char spider_net_driver_name[];\n\n#define SPIDER_NET_MAX_FRAME\t\t\t2312\n#define SPIDER_NET_MAX_MTU\t\t\t2294\n#define SPIDER_NET_MIN_MTU\t\t\t64\n\n#define SPIDER_NET_RXBUF_ALIGN\t\t\t128\n\n#define SPIDER_NET_RX_DESCRIPTORS_DEFAULT\t256\n#define SPIDER_NET_RX_DESCRIPTORS_MIN\t\t16\n#define SPIDER_NET_RX_DESCRIPTORS_MAX\t\t512\n\n#define SPIDER_NET_TX_DESCRIPTORS_DEFAULT\t256\n#define SPIDER_NET_TX_DESCRIPTORS_MIN\t\t16\n#define SPIDER_NET_TX_DESCRIPTORS_MAX\t\t512\n\n#define SPIDER_NET_TX_TIMER\t\t\t(HZ/5)\n#define SPIDER_NET_ANEG_TIMER\t\t\t(HZ)\n#define SPIDER_NET_ANEG_TIMEOUT\t\t\t5\n\n#define SPIDER_NET_RX_CSUM_DEFAULT\t\t1\n\n#define SPIDER_NET_WATCHDOG_TIMEOUT\t\t50*HZ\n\n#define SPIDER_NET_FIRMWARE_SEQS\t6\n#define SPIDER_NET_FIRMWARE_SEQWORDS\t1024\n#define SPIDER_NET_FIRMWARE_LEN\t\t(SPIDER_NET_FIRMWARE_SEQS * \\\n\t\t\t\t\t SPIDER_NET_FIRMWARE_SEQWORDS * \\\n\t\t\t\t\t sizeof(u32))\n#define SPIDER_NET_FIRMWARE_NAME\t\"spider_fw.bin\"\n\n \n#define SPIDER_NET_GHIINT0STS\t\t0x00000000\n#define SPIDER_NET_GHIINT1STS\t\t0x00000004\n#define SPIDER_NET_GHIINT2STS\t\t0x00000008\n#define SPIDER_NET_GHIINT0MSK\t\t0x00000010\n#define SPIDER_NET_GHIINT1MSK\t\t0x00000014\n#define SPIDER_NET_GHIINT2MSK\t\t0x00000018\n\n#define SPIDER_NET_GRESUMINTNUM\t\t0x00000020\n#define SPIDER_NET_GREINTNUM\t\t0x00000024\n\n#define SPIDER_NET_GFFRMNUM\t\t0x00000028\n#define SPIDER_NET_GFAFRMNUM\t\t0x0000002c\n#define SPIDER_NET_GFBFRMNUM\t\t0x00000030\n#define SPIDER_NET_GFCFRMNUM\t\t0x00000034\n#define SPIDER_NET_GFDFRMNUM\t\t0x00000038\n\n \n#define SPIDER_NET_GFREECNNUM\t\t0x0000003c\n#define SPIDER_NET_GONETIMENUM\t\t0x00000040\n\n#define SPIDER_NET_GTOUTFRMNUM\t\t0x00000044\n\n#define SPIDER_NET_GTXMDSET\t\t0x00000050\n#define SPIDER_NET_GPCCTRL\t\t0x00000054\n#define SPIDER_NET_GRXMDSET\t\t0x00000058\n#define SPIDER_NET_GIPSECINIT\t\t0x0000005c\n#define SPIDER_NET_GFTRESTRT\t\t0x00000060\n#define SPIDER_NET_GRXDMAEN\t\t0x00000064\n#define SPIDER_NET_GMRWOLCTRL\t\t0x00000068\n#define SPIDER_NET_GPCWOPCMD\t\t0x0000006c\n#define SPIDER_NET_GPCROPCMD\t\t0x00000070\n#define SPIDER_NET_GTTFRMCNT\t\t0x00000078\n#define SPIDER_NET_GTESTMD\t\t0x0000007c\n\n#define SPIDER_NET_GSINIT\t\t0x00000080\n#define SPIDER_NET_GSnPRGADR\t\t0x00000084\n#define SPIDER_NET_GSnPRGDAT\t\t0x00000088\n\n#define SPIDER_NET_GMACOPEMD\t\t0x00000100\n#define SPIDER_NET_GMACLENLMT\t\t0x00000108\n#define SPIDER_NET_GMACST\t\t0x00000110\n#define SPIDER_NET_GMACINTEN\t\t0x00000118\n#define SPIDER_NET_GMACPHYCTRL\t\t0x00000120\n\n#define SPIDER_NET_GMACAPAUSE\t\t0x00000154\n#define SPIDER_NET_GMACTXPAUSE\t\t0x00000164\n\n#define SPIDER_NET_GMACMODE\t\t0x000001b0\n#define SPIDER_NET_GMACBSTLMT\t\t0x000001b4\n\n#define SPIDER_NET_GMACUNIMACU\t\t0x000001c0\n#define SPIDER_NET_GMACUNIMACL\t\t0x000001c8\n\n#define SPIDER_NET_GMRMHFILnR\t\t0x00000400\n#define SPIDER_NET_MULTICAST_HASHES\t256\n\n#define SPIDER_NET_GMRUAFILnR\t\t0x00000500\n#define SPIDER_NET_GMRUA0FIL15R\t\t0x00000578\n\n#define SPIDER_NET_GTTQMSK\t\t0x00000934\n\n \n#define SPIDER_NET_GDADCHA\t\t0x00000a00\n#define SPIDER_NET_GDADMACCNTR\t\t0x00000a04\n#define SPIDER_NET_GDACTDPA\t\t0x00000a08\n#define SPIDER_NET_GDACTDCNT\t\t0x00000a0c\n#define SPIDER_NET_GDACDBADDR\t\t0x00000a20\n#define SPIDER_NET_GDACDBSIZE\t\t0x00000a24\n#define SPIDER_NET_GDACNEXTDA\t\t0x00000a28\n#define SPIDER_NET_GDACCOMST\t\t0x00000a2c\n#define SPIDER_NET_GDAWBCOMST\t\t0x00000a30\n#define SPIDER_NET_GDAWBRSIZE\t\t0x00000a34\n#define SPIDER_NET_GDAWBVSIZE\t\t0x00000a38\n#define SPIDER_NET_GDAWBTRST\t\t0x00000a3c\n#define SPIDER_NET_GDAWBTRERR\t\t0x00000a40\n\n \n#define SPIDER_NET_GDTDCHA\t\t0x00000e00\n#define SPIDER_NET_GDTDMACCNTR\t\t0x00000e04\n#define SPIDER_NET_GDTCDPA\t\t0x00000e08\n#define SPIDER_NET_GDTDMASEL\t\t0x00000e14\n\n#define SPIDER_NET_ECMODE\t\t0x00000f00\n \n#define SPIDER_NET_CKRCTRL\t\t0x00000ff0\n\n \n#define SPIDER_NET_SCONFIG_IOACTE\t0x00002810\n\n \n#define SPIDER_NET_INT0_MASK_VALUE\t0x3f7fe2c7\n#define SPIDER_NET_INT1_MASK_VALUE\t0x0000fff2\n#define SPIDER_NET_INT2_MASK_VALUE\t0x000003f1\n\n \n#define SPIDER_NET_FRAMENUM_VALUE\t0x00000000\n \n#define SPIDER_NET_GFXFRAMES_VALUE\t0x00000000\n\n#define SPIDER_NET_STOP_SEQ_VALUE\t0x00000000\n#define SPIDER_NET_RUN_SEQ_VALUE\t0x0000007e\n\n#define SPIDER_NET_PHY_CTRL_VALUE\t0x00040040\n \n#define SPIDER_NET_RXMODE_VALUE\t\t0x00000011\n \n#define SPIDER_NET_TXMODE_VALUE\t\t0x00010000\n#define SPIDER_NET_RESTART_VALUE\t0x00000000\n#define SPIDER_NET_WOL_VALUE\t\t0x00001111\n#if 0\n#define SPIDER_NET_WOL_VALUE\t\t0x00000000\n#endif\n#define SPIDER_NET_IPSECINIT_VALUE\t0x6f716f71\n\n \n \n \n#define SPIDER_NET_OPMODE_VALUE\t\t0x00000067\n \n#define SPIDER_NET_LENLMT_VALUE\t\t0x00000908\n\n#define SPIDER_NET_MACAPAUSE_VALUE\t0x00000800  \n#define SPIDER_NET_TXPAUSE_VALUE\t0x00000000\n\n#define SPIDER_NET_MACMODE_VALUE\t0x00000001\n#define SPIDER_NET_BURSTLMT_VALUE\t0x00000200  \n\n \n\n \n#define SPIDER_NET_DMA_RX_VALUE\t\t0x80000000\n#define SPIDER_NET_DMA_RX_FEND_VALUE\t0x00030003\n \n#define SPIDER_NET_TX_DMA_EN           0x80000000\n#define SPIDER_NET_GDTBSTA             0x00000300\n#define SPIDER_NET_GDTDCEIDIS          0x00000002\n#define SPIDER_NET_DMA_TX_VALUE        SPIDER_NET_TX_DMA_EN | \\\n                                       SPIDER_NET_GDTDCEIDIS | \\\n                                       SPIDER_NET_GDTBSTA\n\n#define SPIDER_NET_DMA_TX_FEND_VALUE\t0x00030003\n\n \n#define SPIDER_NET_UA_DESCR_VALUE\t0x00080000\n#define SPIDER_NET_PROMISC_VALUE\t0x00080000\n#define SPIDER_NET_NONPROMISC_VALUE\t0x00000000\n\n#define SPIDER_NET_DMASEL_VALUE\t\t0x00000001\n\n#define SPIDER_NET_ECMODE_VALUE\t\t0x00000000\n\n#define SPIDER_NET_CKRCTRL_RUN_VALUE\t0x1fff010f\n#define SPIDER_NET_CKRCTRL_STOP_VALUE\t0x0000010f\n\n#define SPIDER_NET_SBIMSTATE_VALUE\t0x00000000\n#define SPIDER_NET_SBTMSTATE_VALUE\t0x00000000\n\n \nenum spider_net_int0_status {\n\tSPIDER_NET_GPHYINT = 0,\n\tSPIDER_NET_GMAC2INT,\n\tSPIDER_NET_GMAC1INT,\n\tSPIDER_NET_GIPSINT,\n\tSPIDER_NET_GFIFOINT,\n\tSPIDER_NET_GDMACINT,\n\tSPIDER_NET_GSYSINT,\n\tSPIDER_NET_GPWOPCMPINT,\n\tSPIDER_NET_GPROPCMPINT,\n\tSPIDER_NET_GPWFFINT,\n\tSPIDER_NET_GRMDADRINT,\n\tSPIDER_NET_GRMARPINT,\n\tSPIDER_NET_GRMMPINT,\n\tSPIDER_NET_GDTDEN0INT,\n\tSPIDER_NET_GDDDEN0INT,\n\tSPIDER_NET_GDCDEN0INT,\n\tSPIDER_NET_GDBDEN0INT,\n\tSPIDER_NET_GDADEN0INT,\n\tSPIDER_NET_GDTFDCINT,\n\tSPIDER_NET_GDDFDCINT,\n\tSPIDER_NET_GDCFDCINT,\n\tSPIDER_NET_GDBFDCINT,\n\tSPIDER_NET_GDAFDCINT,\n\tSPIDER_NET_GTTEDINT,\n\tSPIDER_NET_GDTDCEINT,\n\tSPIDER_NET_GRFDNMINT,\n\tSPIDER_NET_GRFCNMINT,\n\tSPIDER_NET_GRFBNMINT,\n\tSPIDER_NET_GRFANMINT,\n\tSPIDER_NET_GRFNMINT,\n\tSPIDER_NET_G1TMCNTINT,\n\tSPIDER_NET_GFREECNTINT\n};\n \nenum spider_net_int1_status {\n\tSPIDER_NET_GTMFLLINT = 0,\n\tSPIDER_NET_GRMFLLINT,\n\tSPIDER_NET_GTMSHTINT,\n\tSPIDER_NET_GDTINVDINT,\n\tSPIDER_NET_GRFDFLLINT,\n\tSPIDER_NET_GDDDCEINT,\n\tSPIDER_NET_GDDINVDINT,\n\tSPIDER_NET_GRFCFLLINT,\n\tSPIDER_NET_GDCDCEINT,\n\tSPIDER_NET_GDCINVDINT,\n\tSPIDER_NET_GRFBFLLINT,\n\tSPIDER_NET_GDBDCEINT,\n\tSPIDER_NET_GDBINVDINT,\n\tSPIDER_NET_GRFAFLLINT,\n\tSPIDER_NET_GDADCEINT,\n\tSPIDER_NET_GDAINVDINT,\n\tSPIDER_NET_GDTRSERINT,\n\tSPIDER_NET_GDDRSERINT,\n\tSPIDER_NET_GDCRSERINT,\n\tSPIDER_NET_GDBRSERINT,\n\tSPIDER_NET_GDARSERINT,\n\tSPIDER_NET_GDSERINT,\n\tSPIDER_NET_GDTPTERINT,\n\tSPIDER_NET_GDDPTERINT,\n\tSPIDER_NET_GDCPTERINT,\n\tSPIDER_NET_GDBPTERINT,\n\tSPIDER_NET_GDAPTERINT\n};\n \nenum spider_net_int2_status {\n\tSPIDER_NET_GPROPERINT = 0,\n\tSPIDER_NET_GMCTCRSNGINT,\n\tSPIDER_NET_GMCTLCOLINT,\n\tSPIDER_NET_GMCTTMOTINT,\n\tSPIDER_NET_GMCRCAERINT,\n\tSPIDER_NET_GMCRCALERINT,\n\tSPIDER_NET_GMCRALNERINT,\n\tSPIDER_NET_GMCROVRINT,\n\tSPIDER_NET_GMCRRNTINT,\n\tSPIDER_NET_GMCRRXERINT,\n\tSPIDER_NET_GTITCSERINT,\n\tSPIDER_NET_GTIFMTERINT,\n\tSPIDER_NET_GTIPKTRVKINT,\n\tSPIDER_NET_GTISPINGINT,\n\tSPIDER_NET_GTISADNGINT,\n\tSPIDER_NET_GTISPDNGINT,\n\tSPIDER_NET_GRIFMTERINT,\n\tSPIDER_NET_GRIPKTRVKINT,\n\tSPIDER_NET_GRISPINGINT,\n\tSPIDER_NET_GRISADNGINT,\n\tSPIDER_NET_GRISPDNGINT\n};\n\n#define SPIDER_NET_TXINT\t(1 << SPIDER_NET_GDTFDCINT)\n\n \n#define SPIDER_NET_RXINT\t( (1 << SPIDER_NET_GDAFDCINT) )\n\n#define SPIDER_NET_LINKINT\t( 1 << SPIDER_NET_GMAC2INT )\n\n#define SPIDER_NET_ERRINT\t( 0xffffffff & \\\n\t\t\t\t  (~SPIDER_NET_TXINT) & \\\n\t\t\t\t  (~SPIDER_NET_RXINT) & \\\n\t\t\t\t  (~SPIDER_NET_LINKINT) )\n\n#define SPIDER_NET_GPREXEC\t\t\t0x80000000\n#define SPIDER_NET_GPRDAT_MASK\t\t\t0x0000ffff\n\n#define SPIDER_NET_DMAC_NOINTR_COMPLETE\t\t0x00800000\n#define SPIDER_NET_DMAC_TXFRMTL\t\t0x00040000\n#define SPIDER_NET_DMAC_TCP\t\t\t0x00020000\n#define SPIDER_NET_DMAC_UDP\t\t\t0x00030000\n#define SPIDER_NET_TXDCEST\t\t\t0x08000000\n\n#define SPIDER_NET_DESCR_RXFDIS        0x00000001\n#define SPIDER_NET_DESCR_RXDCEIS       0x00000002\n#define SPIDER_NET_DESCR_RXDEN0IS      0x00000004\n#define SPIDER_NET_DESCR_RXINVDIS      0x00000008\n#define SPIDER_NET_DESCR_RXRERRIS      0x00000010\n#define SPIDER_NET_DESCR_RXFDCIMS      0x00000100\n#define SPIDER_NET_DESCR_RXDCEIMS      0x00000200\n#define SPIDER_NET_DESCR_RXDEN0IMS     0x00000400\n#define SPIDER_NET_DESCR_RXINVDIMS     0x00000800\n#define SPIDER_NET_DESCR_RXRERRMIS     0x00001000\n#define SPIDER_NET_DESCR_UNUSED        0x077fe0e0\n\n#define SPIDER_NET_DESCR_IND_PROC_MASK\t\t0xF0000000\n#define SPIDER_NET_DESCR_COMPLETE\t\t0x00000000  \n#define SPIDER_NET_DESCR_RESPONSE_ERROR\t\t0x10000000  \n#define SPIDER_NET_DESCR_PROTECTION_ERROR\t0x20000000  \n#define SPIDER_NET_DESCR_FRAME_END\t\t0x40000000  \n#define SPIDER_NET_DESCR_FORCE_END\t\t0x50000000  \n#define SPIDER_NET_DESCR_CARDOWNED\t\t0xA0000000  \n#define SPIDER_NET_DESCR_NOT_IN_USE\t\t0xF0000000\n#define SPIDER_NET_DESCR_TXDESFLG\t\t0x00800000\n\n#define SPIDER_NET_DESCR_BAD_STATUS   (SPIDER_NET_DESCR_RXDEN0IS | \\\n                                       SPIDER_NET_DESCR_RXRERRIS | \\\n                                       SPIDER_NET_DESCR_RXDEN0IMS | \\\n                                       SPIDER_NET_DESCR_RXINVDIMS | \\\n                                       SPIDER_NET_DESCR_RXRERRMIS | \\\n                                       SPIDER_NET_DESCR_UNUSED)\n\n \nstruct spider_net_hw_descr {\n\tu32 buf_addr;\n\tu32 buf_size;\n\tu32 next_descr_addr;\n\tu32 dmac_cmd_status;\n\tu32 result_size;\n\tu32 valid_size;\t \n\tu32 data_status;\n\tu32 data_error;\t \n} __attribute__((aligned(32)));\n\nstruct spider_net_descr {\n\tstruct spider_net_hw_descr *hwdescr;\n\tstruct sk_buff *skb;\n\tu32 bus_addr;\n\tstruct spider_net_descr *next;\n\tstruct spider_net_descr *prev;\n};\n\nstruct spider_net_descr_chain {\n\tspinlock_t lock;\n\tstruct spider_net_descr *head;\n\tstruct spider_net_descr *tail;\n\tstruct spider_net_descr *ring;\n\tint num_desc;\n\tstruct spider_net_hw_descr *hwring;\n\tdma_addr_t dma_addr;\n};\n\n \n#define SPIDER_NET_RX_IPCHK\t\t29\n#define SPIDER_NET_RX_TCPCHK\t\t28\n#define SPIDER_NET_VLAN_PACKET\t\t21\n#define SPIDER_NET_DATA_STATUS_CKSUM_MASK ( (1 << SPIDER_NET_RX_IPCHK) | \\\n\t\t\t\t\t  (1 << SPIDER_NET_RX_TCPCHK) )\n\n \n#define SPIDER_NET_RX_IPCHKERR\t\t27\n#define SPIDER_NET_RX_RXTCPCHKERR\t28\n\n#define SPIDER_NET_DATA_ERR_CKSUM_MASK\t(1 << SPIDER_NET_RX_IPCHKERR)\n\n \n#define SPIDER_NET_DESTROY_RX_FLAGS\t0x700b8000\n\n#define SPIDER_NET_DEFAULT_MSG\t\t( NETIF_MSG_DRV | \\\n\t\t\t\t\t  NETIF_MSG_PROBE | \\\n\t\t\t\t\t  NETIF_MSG_LINK | \\\n\t\t\t\t\t  NETIF_MSG_TIMER | \\\n\t\t\t\t\t  NETIF_MSG_IFDOWN | \\\n\t\t\t\t\t  NETIF_MSG_IFUP | \\\n\t\t\t\t\t  NETIF_MSG_RX_ERR | \\\n\t\t\t\t\t  NETIF_MSG_TX_ERR | \\\n\t\t\t\t\t  NETIF_MSG_TX_QUEUED | \\\n\t\t\t\t\t  NETIF_MSG_INTR | \\\n\t\t\t\t\t  NETIF_MSG_TX_DONE | \\\n\t\t\t\t\t  NETIF_MSG_RX_STATUS | \\\n\t\t\t\t\t  NETIF_MSG_PKTDATA | \\\n\t\t\t\t\t  NETIF_MSG_HW | \\\n\t\t\t\t\t  NETIF_MSG_WOL )\n\nstruct spider_net_extra_stats {\n\tunsigned long rx_desc_error;\n\tunsigned long tx_timeouts;\n\tunsigned long alloc_rx_skb_error;\n\tunsigned long rx_iommu_map_error;\n\tunsigned long tx_iommu_map_error;\n\tunsigned long rx_desc_unk_state;\n};\n\nstruct spider_net_card {\n\tstruct net_device *netdev;\n\tstruct pci_dev *pdev;\n\tstruct mii_phy phy;\n\n\tstruct napi_struct napi;\n\n\tint medium;\n\n\tvoid __iomem *regs;\n\n\tstruct spider_net_descr_chain tx_chain;\n\tstruct spider_net_descr_chain rx_chain;\n\tstruct spider_net_descr *low_watermark;\n\n\tint aneg_count;\n\tstruct timer_list aneg_timer;\n\tstruct timer_list tx_timer;\n\tstruct work_struct tx_timeout_task;\n\tatomic_t tx_timeout_task_counter;\n\twait_queue_head_t waitq;\n\tint num_rx_ints;\n\tint ignore_rx_ramfull;\n\n\t \n\tint msg_enable;\n\tstruct spider_net_extra_stats spider_stats;\n\n\t \n\tstruct spider_net_descr darray[];\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}