{
  "module_name": "main.c",
  "hash_id": "d68389a2bb1f7ac12ad03b5c92970faebdc0d954b9f840319f6e3cbe5a70c042",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/ethernet/netronome/nfp/nic/main.c",
  "human_readable_source": "\n \n\n#include \"../nfpcore/nfp_cpp.h\"\n#include \"../nfpcore/nfp_nsp.h\"\n#include \"../nfp_app.h\"\n#include \"../nfp_main.h\"\n#include \"../nfp_net.h\"\n#include \"main.h\"\n\nstatic int nfp_nic_init(struct nfp_app *app)\n{\n\tstruct nfp_pf *pf = app->pf;\n\n\tif (pf->eth_tbl && pf->max_data_vnics != pf->eth_tbl->count) {\n\t\tnfp_err(pf->cpp, \"ETH entries don't match vNICs (%d vs %d)\\n\",\n\t\t\tpf->max_data_vnics, pf->eth_tbl->count);\n\t\treturn -EINVAL;\n\t}\n\n\treturn 0;\n}\n\nstatic int nfp_nic_sriov_enable(struct nfp_app *app, int num_vfs)\n{\n\treturn 0;\n}\n\nstatic void nfp_nic_sriov_disable(struct nfp_app *app)\n{\n}\n\nstatic int nfp_nic_vnic_init(struct nfp_app *app, struct nfp_net *nn)\n{\n\treturn nfp_nic_dcb_init(nn);\n}\n\nstatic void nfp_nic_vnic_clean(struct nfp_app *app, struct nfp_net *nn)\n{\n\tnfp_nic_dcb_clean(nn);\n}\n\nstatic int nfp_nic_vnic_alloc(struct nfp_app *app, struct nfp_net *nn,\n\t\t\t      unsigned int id)\n{\n\tstruct nfp_app_nic_private *app_pri = nn->app_priv;\n\tint err;\n\n\terr = nfp_app_nic_vnic_alloc(app, nn, id);\n\tif (err)\n\t\treturn err;\n\n\tif (sizeof(*app_pri)) {\n\t\tnn->app_priv = kzalloc(sizeof(*app_pri), GFP_KERNEL);\n\t\tif (!nn->app_priv)\n\t\t\treturn -ENOMEM;\n\t}\n\n\treturn 0;\n}\n\nstatic void nfp_nic_vnic_free(struct nfp_app *app, struct nfp_net *nn)\n{\n\tkfree(nn->app_priv);\n}\n\nconst struct nfp_app_type app_nic = {\n\t.id\t\t= NFP_APP_CORE_NIC,\n\t.name\t\t= \"nic\",\n\n\t.init\t\t= nfp_nic_init,\n\t.vnic_alloc\t= nfp_nic_vnic_alloc,\n\t.vnic_free\t= nfp_nic_vnic_free,\n\t.sriov_enable\t= nfp_nic_sriov_enable,\n\t.sriov_disable\t= nfp_nic_sriov_disable,\n\n\t.vnic_init      = nfp_nic_vnic_init,\n\t.vnic_clean     = nfp_nic_vnic_clean,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}