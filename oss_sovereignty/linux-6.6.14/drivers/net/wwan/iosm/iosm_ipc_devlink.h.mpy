{
  "module_name": "iosm_ipc_devlink.h",
  "hash_id": "234ea44941b1510c27c0cd57c7850aab163a851890e27d10845affaf3e73384d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wwan/iosm/iosm_ipc_devlink.h",
  "human_readable_source": " \n\n#ifndef _IOSM_IPC_DEVLINK_H_\n#define _IOSM_IPC_DEVLINK_H_\n\n#include <net/devlink.h>\n\n#include \"iosm_ipc_imem.h\"\n#include \"iosm_ipc_imem_ops.h\"\n#include \"iosm_ipc_pcie.h\"\n\n \n#define IOSM_DEVLINK_MAX_IMG_LEN 3\n \n#define IOSM_DEVLINK_MAGIC_HEADER \"IOSM_DEVLINK_HEADER\"\n \n#define IOSM_DEVLINK_MAGIC_HEADER_LEN 20\n \n#define IOSM_DEVLINK_IMG_TYPE 4\n \n#define IOSM_DEVLINK_RESERVED 34\n \n#define IOSM_DEVLINK_HDR_SIZE sizeof(struct iosm_devlink_image)\n \n#define IOSM_MAX_FILENAME_LEN 32\n \n#define IOSM_EBL_RSP_SIZE 76\n \n#define IOSM_NOF_CD_REGION 6\n \n#define MAX_SNAPSHOTS 1\n \n#define REPORT_JSON_SIZE 0x800\n#define COREDUMP_FCD_SIZE 0x10E00000\n#define CDD_LOG_SIZE 0x30000\n#define EEPROM_BIN_SIZE 0x10000\n#define BOOTCORE_TRC_BIN_SIZE 0x8000\n#define BOOTCORE_PREV_TRC_BIN_SIZE 0x20000\n\n \n\nenum iosm_devlink_param_id {\n\tIOSM_DEVLINK_PARAM_ID_BASE = DEVLINK_PARAM_GENERIC_ID_MAX,\n\tIOSM_DEVLINK_PARAM_ID_ERASE_FULL_FLASH,\n};\n\n \nenum iosm_rpsi_cmd_code {\n\trpsi_cmd_code_ebl = 0x02,\n\trpsi_cmd_coredump_start = 0x10,\n\trpsi_cmd_coredump_get   = 0x11,\n\trpsi_cmd_coredump_end   = 0x12,\n};\n\n \nenum iosm_flash_comp_type {\n\tFLASH_COMP_TYPE_PSI,\n\tFLASH_COMP_TYPE_EBL,\n\tFLASH_COMP_TYPE_FLS,\n\tFLASH_COMP_TYPE_INVAL,\n};\n\n \nstruct iosm_devlink_sio {\n\tstruct sk_buff_head rx_list;\n\tstruct completion read_sem;\n\tint channel_id;\n\tstruct ipc_mem_channel *channel;\n\tu32 devlink_read_pend;\n};\n\n \nstruct iosm_flash_params {\n\tu8 erase_full_flash;\n\tu8 erase_full_flash_done;\n};\n\n \nstruct iosm_devlink_image {\n\tchar magic_header[IOSM_DEVLINK_MAGIC_HEADER_LEN];\n\tchar image_type[IOSM_DEVLINK_IMG_TYPE];\n\t__le32 region_address;\n\tu8 download_region;\n\tu8 last_region;\n\tu8 reserved[IOSM_DEVLINK_RESERVED];\n} __packed;\n\n \nstruct iosm_ebl_ctx_data {\n\tu8 ebl_sw_info_version;\n\tu8 m_ebl_resp[IOSM_EBL_RSP_SIZE];\n};\n\n \nstruct iosm_coredump_file_info {\n\tchar filename[IOSM_MAX_FILENAME_LEN];\n\tu32 default_size;\n\tu32 actual_size;\n\tu32 entry;\n};\n\n \nstruct iosm_devlink {\n\tstruct iosm_devlink_sio devlink_sio;\n\tstruct iosm_pcie *pcie;\n\tstruct device *dev;\n\tstruct devlink *devlink_ctx;\n\tstruct iosm_flash_params param;\n\tstruct iosm_ebl_ctx_data ebl_ctx;\n\tstruct iosm_coredump_file_info *cd_file_info;\n\tstruct devlink_region_ops iosm_devlink_mdm_coredump[IOSM_NOF_CD_REGION];\n\tstruct devlink_region *cd_regions[IOSM_NOF_CD_REGION];\n};\n\n \nunion iosm_rpsi_param_u {\n\t__le16 word[2];\n\t__le32 dword;\n};\n\n \nstruct iosm_rpsi_cmd {\n\tunion iosm_rpsi_param_u param;\n\t__le16\tcmd;\n\t__le16\tcrc;\n};\n\nstruct iosm_devlink *ipc_devlink_init(struct iosm_imem *ipc_imem);\n\nvoid ipc_devlink_deinit(struct iosm_devlink *ipc_devlink);\n\nint ipc_devlink_send_cmd(struct iosm_devlink *ipc_devlink, u16 cmd, u32 entry);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}