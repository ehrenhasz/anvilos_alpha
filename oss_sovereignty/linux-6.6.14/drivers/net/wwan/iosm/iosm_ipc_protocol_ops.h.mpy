{
  "module_name": "iosm_ipc_protocol_ops.h",
  "hash_id": "5063062be4f57ff502fbe4b8f64c74c24b60b04e6e0b292a14dba30c1d9d327e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wwan/iosm/iosm_ipc_protocol_ops.h",
  "human_readable_source": " \n\n#ifndef IOSM_IPC_PROTOCOL_OPS_H\n#define IOSM_IPC_PROTOCOL_OPS_H\n\n#define SIZE_MASK 0x00FFFFFF\n#define COMPLETION_STATUS 24\n#define RESET_BIT 7\n\n \nenum ipc_mem_td_cs {\n\tIPC_MEM_TD_CS_INVALID,\n\tIPC_MEM_TD_CS_PARTIAL_TRANSFER,\n\tIPC_MEM_TD_CS_END_TRANSFER,\n\tIPC_MEM_TD_CS_OVERFLOW,\n\tIPC_MEM_TD_CS_ABORT,\n\tIPC_MEM_TD_CS_ERROR,\n};\n\n \nenum ipc_mem_msg_cs {\n\tIPC_MEM_MSG_CS_INVALID,\n\tIPC_MEM_MSG_CS_SUCCESS,\n\tIPC_MEM_MSG_CS_ERROR,\n};\n\n \nstruct ipc_msg_prep_args_pipe {\n\tstruct ipc_pipe *pipe;\n};\n\n \nstruct ipc_msg_prep_args_sleep {\n\tunsigned int target;\n\tunsigned int state;\n};\n\n \nstruct ipc_msg_prep_feature_set {\n\tu8 reset_enable;\n};\n\n \nstruct ipc_msg_prep_map {\n\tunsigned int region_id;\n\tunsigned long addr;\n\tsize_t size;\n};\n\n \nstruct ipc_msg_prep_unmap {\n\tunsigned int region_id;\n};\n\n \nunion ipc_msg_prep_args {\n\tstruct ipc_msg_prep_args_pipe pipe_open;\n\tstruct ipc_msg_prep_args_pipe pipe_close;\n\tstruct ipc_msg_prep_args_sleep sleep;\n\tstruct ipc_msg_prep_feature_set feature_set;\n\tstruct ipc_msg_prep_map map;\n\tstruct ipc_msg_prep_unmap unmap;\n};\n\n \nenum ipc_msg_prep_type {\n\tIPC_MSG_PREP_SLEEP,\n\tIPC_MSG_PREP_PIPE_OPEN,\n\tIPC_MSG_PREP_PIPE_CLOSE,\n\tIPC_MSG_PREP_FEATURE_SET,\n\tIPC_MSG_PREP_MAP,\n\tIPC_MSG_PREP_UNMAP,\n};\n\n \nstruct ipc_rsp {\n\tstruct completion completion;\n\tenum ipc_mem_msg_cs status;\n};\n\n \nenum ipc_mem_msg {\n\tIPC_MEM_MSG_OPEN_PIPE = 0x01,\n\tIPC_MEM_MSG_CLOSE_PIPE = 0x02,\n\tIPC_MEM_MSG_ABORT_PIPE = 0x03,\n\tIPC_MEM_MSG_SLEEP = 0x04,\n\tIPC_MEM_MSG_FEATURE_SET = 0xF0,\n};\n\n \nstruct ipc_mem_msg_open_pipe {\n\t__le64 tdr_addr;\n\t__le16 tdr_entries;\n\tu8 pipe_nr;\n\tu8 type_of_message;\n\t__le32 irq_vector;\n\t__le32 accumulation_backoff;\n\t__le32 completion_status;\n};\n\n \nstruct ipc_mem_msg_close_pipe {\n\t__le32 reserved1[2];\n\t__le16 reserved2;\n\tu8 pipe_nr;\n\tu8 type_of_message;\n\t__le32  reserved3;\n\t__le32 reserved4;\n\t__le32 completion_status;\n};\n\n \nstruct ipc_mem_msg_abort_pipe {\n\t__le32  reserved1[2];\n\t__le16 reserved2;\n\tu8 pipe_nr;\n\tu8 type_of_message;\n\t__le32 reserved3;\n\t__le32 reserved4;\n\t__le32 completion_status;\n};\n\n \nstruct ipc_mem_msg_host_sleep {\n\t__le32 reserved1[2];\n\tu8 target;\n\tu8 state;\n\tu8 reserved2;\n\tu8 type_of_message;\n\t__le32 reserved3;\n\t__le32 reserved4;\n\t__le32 completion_status;\n};\n\n \nstruct ipc_mem_msg_feature_set {\n\t__le32 reserved1[2];\n\t__le16 reserved2;\n\tu8 reset_enable;\n\tu8 type_of_message;\n\t__le32 reserved3;\n\t__le32 reserved4;\n\t__le32 completion_status;\n};\n\n \nstruct ipc_mem_msg_common {\n\t__le32 reserved1[2];\n\tu8 reserved2[3];\n\tu8 type_of_message;\n\t__le32 reserved3;\n\t__le32 reserved4;\n\t__le32 completion_status;\n};\n\n \nunion ipc_mem_msg_entry {\n\tstruct ipc_mem_msg_open_pipe open_pipe;\n\tstruct ipc_mem_msg_close_pipe close_pipe;\n\tstruct ipc_mem_msg_abort_pipe abort_pipe;\n\tstruct ipc_mem_msg_host_sleep host_sleep;\n\tstruct ipc_mem_msg_feature_set feature_set;\n\tstruct ipc_mem_msg_common common;\n};\n\n \nstruct ipc_protocol_td {\n\tunion {\n\t\t \n\t\tdma_addr_t address;\n\t\tstruct {\n\t\t\t \n\t\t\t__le32 address;\n\t\t\t \n\t\t\t__le32 desc;\n\t\t} __packed shm;\n\t} buffer;\n\n\t \n\t__le32 scs;\n\n\t \n\t__le32 next;\n} __packed;\n\n \nint ipc_protocol_msg_prep(struct iosm_imem *ipc_imem,\n\t\t\t  enum ipc_msg_prep_type msg_type,\n\t\t\t  union ipc_msg_prep_args *args);\n\n \nvoid ipc_protocol_msg_hp_update(struct iosm_imem *ipc_imem);\n\n \nbool ipc_protocol_msg_process(struct iosm_imem *ipc_imem, int irq);\n\n \nbool ipc_protocol_ul_td_send(struct iosm_protocol *ipc_protocol,\n\t\t\t     struct ipc_pipe *pipe,\n\t\t\t     struct sk_buff_head *p_ul_list);\n\n \nstruct sk_buff *ipc_protocol_ul_td_process(struct iosm_protocol *ipc_protocol,\n\t\t\t\t\t   struct ipc_pipe *pipe);\n\n \nbool ipc_protocol_dl_td_prepare(struct iosm_protocol *ipc_protocol,\n\t\t\t\tstruct ipc_pipe *pipe);\n\n \nstruct sk_buff *ipc_protocol_dl_td_process(struct iosm_protocol *ipc_protocol,\n\t\t\t\t\t   struct ipc_pipe *pipe);\n\n \nvoid ipc_protocol_get_head_tail_index(struct iosm_protocol *ipc_protocol,\n\t\t\t\t      struct ipc_pipe *pipe, u32 *head,\n\t\t\t\t      u32 *tail);\n \nenum ipc_mem_device_ipc_state ipc_protocol_get_ipc_status(struct iosm_protocol\n\t\t\t\t\t\t\t  *ipc_protocol);\n\n \nvoid ipc_protocol_pipe_cleanup(struct iosm_protocol *ipc_protocol,\n\t\t\t       struct ipc_pipe *pipe);\n\n \nenum ipc_mem_exec_stage\nipc_protocol_get_ap_exec_stage(struct iosm_protocol *ipc_protocol);\n\n \nu32 ipc_protocol_pm_dev_get_sleep_notification(struct iosm_protocol\n\t\t\t\t\t       *ipc_protocol);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}