{
  "module_name": "iosm_ipc_flash.h",
  "hash_id": "4440aba058ebc216afe605c27f8ceb2be426862104b1439428aa4e7dbe1100b4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wwan/iosm/iosm_ipc_flash.h",
  "human_readable_source": " \n\n#ifndef _IOSM_IPC_FLASH_H\n#define _IOSM_IPC_FLASH_H\n\n \n#define IOSM_FLS_BUF_SIZE 0x00100000\n \n#define IOSM_ERASE_START_ADDR 0x00000000\n \n#define IOSM_ERASE_LEN 0xFFFFFFFF\n \n#define IOSM_EBL_HEAD_SIZE  8\n \n#define IOSM_EBL_W_PAYL_SIZE  2048\n \n#define IOSM_EBL_W_PACK_SIZE  (IOSM_EBL_HEAD_SIZE + IOSM_EBL_W_PAYL_SIZE)\n \n#define IOSM_EBL_DW_PAYL_SIZE  16384\n \n#define IOSM_EBL_DW_PACK_SIZE  (IOSM_EBL_HEAD_SIZE + IOSM_EBL_DW_PAYL_SIZE)\n \n#define IOSM_EBL_NAME  32\n \n#define IOSM_MAX_ERRORS 8\n \n#define IOSM_READ_SIZE 2\n \n#define IOSM_LER_ACK_SIZE 2\n \n#define IOSM_PSI_ACK 8\n \n#define IOSM_EXT_CAP_SWID_OOS_PACK     0x02\n \n#define IOSM_EBL_RSP_BUFF 0x0041\n \n#define IOSM_SWID_STR 64\n \n#define IOSM_RPSI_LOAD_SIZE 0\n \n#define IOSM_EBL_CKSM 0x0000FFFF\n \n#define IOSM_MSG_LEN_ARG 0\n \n#define IOSM_MDM_SEND_DATA 0x0000\n \n#define IOSM_MDM_ERASE_RSP 0x0001\n \n#define IOSM_EBL_PAYL_SHIFT 16\n \n#define IOSM_SET_FLAG 1\n \n#define IOSM_FLASH_ERASE_CHECK_TIMEOUT 100\n \n#define IOSM_FLASH_ERASE_CHECK_INTERVAL 20\n \n#define IOSM_LER_RSP_SIZE 60\n\n \nenum iosm_flash_package_type {\n\tFLASH_SET_PROT_CONF = 0x0086,\n\tFLASH_SEC_START = 0x0204,\n\tFLASH_SEC_END,\n\tFLASH_SET_ADDRESS = 0x0802,\n\tFLASH_ERASE_START = 0x0805,\n\tFLASH_ERASE_CHECK,\n\tFLASH_OOS_CONTROL = 0x080C,\n\tFLASH_OOS_DATA_READ = 0x080E,\n\tFLASH_WRITE_IMAGE_RAW,\n};\n\n \nenum iosm_out_of_session_action {\n\tFLASH_OOSC_ACTION_READ = 2,\n\tFLASH_OOSC_ACTION_ERASE = 3,\n};\n\n \nenum iosm_out_of_session_type {\n\tFLASH_OOSC_TYPE_ALL_FLASH = 8,\n\tFLASH_OOSC_TYPE_SWID_TABLE = 16,\n};\n\n \nenum iosm_ebl_caps {\n\tIOSM_CAP_NOT_ENHANCED = 0x00,\n\tIOSM_CAP_USE_EXT_CAP = 0x01,\n\tIOSM_EXT_CAP_ERASE_ALL = 0x08,\n\tIOSM_EXT_CAP_COMMIT_ALL = 0x20,\n};\n\n \nenum iosm_ebl_rsp {\n\tEBL_CAPS_FLAG = 50,\n\tEBL_SKIP_ERASE = 54,\n\tEBL_SKIP_CRC = 55,\n\tEBL_EXT_CAPS_HANDLED = 57,\n\tEBL_OOS_CONFIG = 64,\n\tEBL_RSP_SW_INFO_VER = 70,\n};\n\n \nenum iosm_mdm_send_recv_data {\n\tIOSM_MDM_SEND_2 = 2,\n\tIOSM_MDM_SEND_4 = 4,\n\tIOSM_MDM_SEND_8 = 8,\n\tIOSM_MDM_SEND_16 = 16,\n};\n\n \nstruct iosm_ebl_one_error {\n\tu16 error_class;\n\tu16 error_code;\n};\n\n \nstruct iosm_ebl_error {\n\tstruct iosm_ebl_one_error error[IOSM_MAX_ERRORS];\n};\n\n \nstruct iosm_swid_table {\n\tu32 number_of_data_sets;\n\tchar sw_id_type[IOSM_EBL_NAME];\n\tu32 sw_id_val;\n\tchar rf_engine_id_type[IOSM_EBL_NAME];\n\tu32 rf_engine_id_val;\n};\n\n \nstruct iosm_flash_msg_control {\n\t__le32 action;\n\t__le32 type;\n\t__le32 length;\n\t__le32 arguments;\n};\n\n \nstruct iosm_flash_data {\n\t__le16  checksum;\n\t__le16  pack_id;\n\t__le32  msg_length;\n};\n\nint ipc_flash_boot_psi(struct iosm_devlink *ipc_devlink,\n\t\t       const struct firmware *fw);\n\nint ipc_flash_boot_ebl(struct iosm_devlink *ipc_devlink,\n\t\t       const struct firmware *fw);\n\nint ipc_flash_boot_set_capabilities(struct iosm_devlink *ipc_devlink,\n\t\t\t\t    u8 *mdm_rsp);\n\nint ipc_flash_link_establish(struct iosm_imem *ipc_imem);\n\nint ipc_flash_read_swid(struct iosm_devlink *ipc_devlink, u8 *mdm_rsp);\n\nint ipc_flash_send_fls(struct iosm_devlink *ipc_devlink,\n\t\t       const struct firmware *fw, u8 *mdm_rsp);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}