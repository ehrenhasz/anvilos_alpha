{
  "module_name": "t7xx_cldma.h",
  "hash_id": "3337dc28eff10c5c394aee514d341996b2005599b93807eae6c933b29bc4a35b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wwan/t7xx/t7xx_cldma.h",
  "human_readable_source": " \n\n#ifndef __T7XX_CLDMA_H__\n#define __T7XX_CLDMA_H__\n\n#include <linux/bits.h>\n#include <linux/types.h>\n\n#define CLDMA_TXQ_NUM\t\t\t8\n#define CLDMA_RXQ_NUM\t\t\t8\n#define CLDMA_ALL_Q\t\t\tGENMASK(7, 0)\n\n \n#define EMPTY_STATUS_BITMASK\t\tGENMASK(15, 8)\n#define TXRX_STATUS_BITMASK\t\tGENMASK(7, 0)\n#define EQ_STA_BIT_OFFSET\t\t8\n#define L2_INT_BIT_COUNT\t\t16\n#define EQ_STA_BIT(index)\t\t(BIT((index) + EQ_STA_BIT_OFFSET) & EMPTY_STATUS_BITMASK)\n\n#define TQ_ERR_INT_BITMASK\t\tGENMASK(23, 16)\n#define TQ_ACTIVE_START_ERR_INT_BITMASK\tGENMASK(31, 24)\n\n#define RQ_ERR_INT_BITMASK\t\tGENMASK(23, 16)\n#define RQ_ACTIVE_START_ERR_INT_BITMASK\tGENMASK(31, 24)\n\n#define CLDMA0_AO_BASE\t\t\t0x10049000\n#define CLDMA0_PD_BASE\t\t\t0x1021d000\n#define CLDMA1_AO_BASE\t\t\t0x1004b000\n#define CLDMA1_PD_BASE\t\t\t0x1021f000\n\n#define CLDMA_R_AO_BASE\t\t\t0x10023000\n#define CLDMA_R_PD_BASE\t\t\t0x1023d000\n\n \n#define REG_CLDMA_UL_START_ADDRL_0\t0x0004\n#define REG_CLDMA_UL_START_ADDRH_0\t0x0008\n#define REG_CLDMA_UL_CURRENT_ADDRL_0\t0x0044\n#define REG_CLDMA_UL_CURRENT_ADDRH_0\t0x0048\n#define REG_CLDMA_UL_STATUS\t\t0x0084\n#define REG_CLDMA_UL_START_CMD\t\t0x0088\n#define REG_CLDMA_UL_RESUME_CMD\t\t0x008c\n#define REG_CLDMA_UL_STOP_CMD\t\t0x0090\n#define REG_CLDMA_UL_ERROR\t\t0x0094\n#define REG_CLDMA_UL_CFG\t\t0x0098\n#define UL_CFG_BIT_MODE_36\t\tBIT(5)\n#define UL_CFG_BIT_MODE_40\t\tBIT(6)\n#define UL_CFG_BIT_MODE_64\t\tBIT(7)\n#define UL_CFG_BIT_MODE_MASK\t\tGENMASK(7, 5)\n\n#define REG_CLDMA_UL_MEM\t\t0x009c\n#define UL_MEM_CHECK_DIS\t\tBIT(0)\n\n \n#define REG_CLDMA_DL_START_CMD\t\t0x05bc\n#define REG_CLDMA_DL_RESUME_CMD\t\t0x05c0\n#define REG_CLDMA_DL_STOP_CMD\t\t0x05c4\n#define REG_CLDMA_DL_MEM\t\t0x0508\n#define DL_MEM_CHECK_DIS\t\tBIT(0)\n\n#define REG_CLDMA_DL_CFG\t\t0x0404\n#define DL_CFG_UP_HW_LAST\t\tBIT(2)\n#define DL_CFG_BIT_MODE_36\t\tBIT(10)\n#define DL_CFG_BIT_MODE_40\t\tBIT(11)\n#define DL_CFG_BIT_MODE_64\t\tBIT(12)\n#define DL_CFG_BIT_MODE_MASK\t\tGENMASK(12, 10)\n\n#define REG_CLDMA_DL_START_ADDRL_0\t0x0478\n#define REG_CLDMA_DL_START_ADDRH_0\t0x047c\n#define REG_CLDMA_DL_CURRENT_ADDRL_0\t0x04b8\n#define REG_CLDMA_DL_CURRENT_ADDRH_0\t0x04bc\n#define REG_CLDMA_DL_STATUS\t\t0x04f8\n\n \n#define REG_CLDMA_L2TISAR0\t\t0x0810\n#define REG_CLDMA_L2TISAR1\t\t0x0814\n#define REG_CLDMA_L2TIMR0\t\t0x0818\n#define REG_CLDMA_L2TIMR1\t\t0x081c\n#define REG_CLDMA_L2TIMCR0\t\t0x0820\n#define REG_CLDMA_L2TIMCR1\t\t0x0824\n#define REG_CLDMA_L2TIMSR0\t\t0x0828\n#define REG_CLDMA_L2TIMSR1\t\t0x082c\n#define REG_CLDMA_L3TISAR0\t\t0x0830\n#define REG_CLDMA_L3TISAR1\t\t0x0834\n#define REG_CLDMA_L2RISAR0\t\t0x0850\n#define REG_CLDMA_L2RISAR1\t\t0x0854\n#define REG_CLDMA_L3RISAR0\t\t0x0870\n#define REG_CLDMA_L3RISAR1\t\t0x0874\n#define REG_CLDMA_IP_BUSY\t\t0x08b4\n#define IP_BUSY_WAKEUP\t\t\tBIT(0)\n#define CLDMA_L2TISAR0_ALL_INT_MASK\tGENMASK(15, 0)\n#define CLDMA_L2RISAR0_ALL_INT_MASK\tGENMASK(15, 0)\n\n \n#define REG_CLDMA_L2RIMR0\t\t0x0858\n#define REG_CLDMA_L2RIMR1\t\t0x085c\n#define REG_CLDMA_L2RIMCR0\t\t0x0860\n#define REG_CLDMA_L2RIMCR1\t\t0x0864\n#define REG_CLDMA_L2RIMSR0\t\t0x0868\n#define REG_CLDMA_L2RIMSR1\t\t0x086c\n#define REG_CLDMA_BUSY_MASK\t\t0x0954\n#define BUSY_MASK_PCIE\t\t\tBIT(0)\n#define BUSY_MASK_AP\t\t\tBIT(1)\n#define BUSY_MASK_MD\t\t\tBIT(2)\n\n#define REG_CLDMA_INT_MASK\t\t0x0960\n\n \n#define REG_INFRA_RST4_SET\t\t0x0730\n#define RST4_CLDMA1_SW_RST_SET\t\tBIT(20)\n\n#define REG_INFRA_RST4_CLR\t\t0x0734\n#define RST4_CLDMA1_SW_RST_CLR\t\tBIT(20)\n\n#define REG_INFRA_RST2_SET\t\t0x0140\n#define RST2_PMIC_SW_RST_SET\t\tBIT(18)\n\n#define REG_INFRA_RST2_CLR\t\t0x0144\n#define RST2_PMIC_SW_RST_CLR\t\tBIT(18)\n\nenum mtk_txrx {\n\tMTK_TX,\n\tMTK_RX,\n};\n\nenum t7xx_hw_mode {\n\tMODE_BIT_32,\n\tMODE_BIT_36,\n\tMODE_BIT_40,\n\tMODE_BIT_64,\n};\n\nstruct t7xx_cldma_hw {\n\tenum t7xx_hw_mode\t\thw_mode;\n\tvoid __iomem\t\t\t*ap_ao_base;\n\tvoid __iomem\t\t\t*ap_pdn_base;\n\tu32\t\t\t\tphy_interrupt_id;\n};\n\nvoid t7xx_cldma_hw_irq_dis_txrx(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t\tenum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_irq_dis_eq(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t      enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_irq_en_txrx(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t       enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_irq_en_eq(struct t7xx_cldma_hw *hw_info, unsigned int qno, enum mtk_txrx tx_rx);\nunsigned int t7xx_cldma_hw_queue_status(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t\t\tenum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_init(struct t7xx_cldma_hw *hw_info);\nvoid t7xx_cldma_hw_resume_queue(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t\tenum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_start(struct t7xx_cldma_hw *hw_info);\nvoid t7xx_cldma_hw_start_queue(struct t7xx_cldma_hw *hw_info, unsigned int qno,\n\t\t\t       enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_tx_done(struct t7xx_cldma_hw *hw_info, unsigned int bitmask);\nvoid t7xx_cldma_hw_rx_done(struct t7xx_cldma_hw *hw_info, unsigned int bitmask);\nvoid t7xx_cldma_hw_stop_all_qs(struct t7xx_cldma_hw *hw_info, enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_set_start_addr(struct t7xx_cldma_hw *hw_info,\n\t\t\t\t  unsigned int qno, u64 address, enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_reset(void __iomem *ao_base);\nvoid t7xx_cldma_hw_stop(struct t7xx_cldma_hw *hw_info, enum mtk_txrx tx_rx);\nunsigned int t7xx_cldma_hw_int_status(struct t7xx_cldma_hw *hw_info, unsigned int bitmask,\n\t\t\t\t      enum mtk_txrx tx_rx);\nvoid t7xx_cldma_hw_restore(struct t7xx_cldma_hw *hw_info);\nvoid t7xx_cldma_clear_ip_busy(struct t7xx_cldma_hw *hw_info);\nbool t7xx_cldma_tx_addr_is_set(struct t7xx_cldma_hw *hw_info, unsigned int qno);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}