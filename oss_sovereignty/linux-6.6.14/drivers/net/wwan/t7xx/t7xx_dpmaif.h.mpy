{
  "module_name": "t7xx_dpmaif.h",
  "hash_id": "b3a82c9a02b7f97486fd37b6edca7b8719b56eaadf658340b9b0629c09033f10",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wwan/t7xx/t7xx_dpmaif.h",
  "human_readable_source": " \n\n#ifndef __T7XX_DPMAIF_H__\n#define __T7XX_DPMAIF_H__\n\n#include <linux/bits.h>\n#include <linux/types.h>\n\n#define DPMAIF_DL_PIT_SEQ_VALUE\t\t251\n#define DPMAIF_UL_DRB_SIZE_WORD\t\t4\n\n#define DPMAIF_MAX_CHECK_COUNT\t\t1000000\n#define DPMAIF_CHECK_TIMEOUT_US\t\t10000\n#define DPMAIF_CHECK_INIT_TIMEOUT_US\t100000\n#define DPMAIF_CHECK_DELAY_US\t\t10\n\n#define DPMAIF_RXQ_NUM\t\t\t2\n#define DPMAIF_TXQ_NUM\t\t\t5\n\nstruct dpmaif_isr_en_mask {\n\tunsigned int\t\t\tap_ul_l2intr_en_msk;\n\tunsigned int\t\t\tap_dl_l2intr_en_msk;\n\tunsigned int\t\t\tap_udl_ip_busy_en_msk;\n\tunsigned int\t\t\tap_dl_l2intr_err_en_msk;\n};\n\nstruct dpmaif_ul {\n\tbool\t\t\t\tque_started;\n\tunsigned char\t\t\treserved[3];\n\tdma_addr_t\t\t\tdrb_base;\n\tunsigned int\t\t\tdrb_size_cnt;\n};\n\nstruct dpmaif_dl {\n\tbool\t\t\t\tque_started;\n\tunsigned char\t\t\treserved[3];\n\tdma_addr_t\t\t\tpit_base;\n\tunsigned int\t\t\tpit_size_cnt;\n\tdma_addr_t\t\t\tbat_base;\n\tunsigned int\t\t\tbat_size_cnt;\n\tdma_addr_t\t\t\tfrg_base;\n\tunsigned int\t\t\tfrg_size_cnt;\n\tunsigned int\t\t\tpit_seq;\n};\n\nstruct dpmaif_hw_info {\n\tstruct device\t\t\t*dev;\n\tvoid __iomem\t\t\t*pcie_base;\n\tstruct dpmaif_dl\t\tdl_que[DPMAIF_RXQ_NUM];\n\tstruct dpmaif_ul\t\tul_que[DPMAIF_TXQ_NUM];\n\tstruct dpmaif_isr_en_mask\tisr_en_mask;\n};\n\n \nstruct dpmaif_hw_params {\n\t \n\tdma_addr_t\t\t\tdrb_base_addr[DPMAIF_TXQ_NUM];\n\tunsigned int\t\t\tdrb_size_cnt[DPMAIF_TXQ_NUM];\n\t \n\tdma_addr_t\t\t\tpkt_bat_base_addr[DPMAIF_RXQ_NUM];\n\tunsigned int\t\t\tpkt_bat_size_cnt[DPMAIF_RXQ_NUM];\n\tdma_addr_t\t\t\tfrg_bat_base_addr[DPMAIF_RXQ_NUM];\n\tunsigned int\t\t\tfrg_bat_size_cnt[DPMAIF_RXQ_NUM];\n\tdma_addr_t\t\t\tpit_base_addr[DPMAIF_RXQ_NUM];\n\tunsigned int\t\t\tpit_size_cnt[DPMAIF_RXQ_NUM];\n};\n\nenum dpmaif_hw_intr_type {\n\tDPF_INTR_INVALID_MIN,\n\tDPF_INTR_UL_DONE,\n\tDPF_INTR_UL_DRB_EMPTY,\n\tDPF_INTR_UL_MD_NOTREADY,\n\tDPF_INTR_UL_MD_PWR_NOTREADY,\n\tDPF_INTR_UL_LEN_ERR,\n\tDPF_INTR_DL_DONE,\n\tDPF_INTR_DL_SKB_LEN_ERR,\n\tDPF_INTR_DL_BATCNT_LEN_ERR,\n\tDPF_INTR_DL_PITCNT_LEN_ERR,\n\tDPF_INTR_DL_PKT_EMPTY_SET,\n\tDPF_INTR_DL_FRG_EMPTY_SET,\n\tDPF_INTR_DL_MTU_ERR,\n\tDPF_INTR_DL_FRGCNT_LEN_ERR,\n\tDPF_INTR_DL_Q0_PITCNT_LEN_ERR,\n\tDPF_INTR_DL_Q1_PITCNT_LEN_ERR,\n\tDPF_INTR_DL_HPC_ENT_TYPE_ERR,\n\tDPF_INTR_DL_Q0_DONE,\n\tDPF_INTR_DL_Q1_DONE,\n\tDPF_INTR_INVALID_MAX\n};\n\n#define DPF_RX_QNO0\t\t\t0\n#define DPF_RX_QNO1\t\t\t1\n#define DPF_RX_QNO_DFT\t\t\tDPF_RX_QNO0\n\nstruct dpmaif_hw_intr_st_para {\n\tunsigned int intr_cnt;\n\tenum dpmaif_hw_intr_type intr_types[DPF_INTR_INVALID_MAX - 1];\n\tunsigned int intr_queues[DPF_INTR_INVALID_MAX - 1];\n};\n\n#define DPMAIF_HW_BAT_REMAIN\t\t64\n#define DPMAIF_HW_BAT_PKTBUF\t\t(128 * 28)\n#define DPMAIF_HW_FRG_PKTBUF\t\t128\n#define DPMAIF_HW_BAT_RSVLEN\t\t64\n#define DPMAIF_HW_PKT_BIDCNT\t\t1\n#define DPMAIF_HW_MTU_SIZE\t\t(3 * 1024 + 8)\n#define DPMAIF_HW_CHK_BAT_NUM\t\t62\n#define DPMAIF_HW_CHK_FRG_NUM\t\t3\n#define DPMAIF_HW_CHK_PIT_NUM\t\t(2 * DPMAIF_HW_CHK_BAT_NUM)\n\n#define DP_UL_INT_DONE_OFFSET\t\t0\n#define DP_UL_INT_QDONE_MSK\t\tGENMASK(4, 0)\n#define DP_UL_INT_EMPTY_MSK\t\tGENMASK(9, 5)\n#define DP_UL_INT_MD_NOTREADY_MSK\tGENMASK(14, 10)\n#define DP_UL_INT_MD_PWR_NOTREADY_MSK\tGENMASK(19, 15)\n#define DP_UL_INT_ERR_MSK\t\tGENMASK(24, 20)\n\n#define DP_DL_INT_QDONE_MSK\t\tBIT(0)\n#define DP_DL_INT_SKB_LEN_ERR\t\tBIT(1)\n#define DP_DL_INT_BATCNT_LEN_ERR\tBIT(2)\n#define DP_DL_INT_PITCNT_LEN_ERR\tBIT(3)\n#define DP_DL_INT_PKT_EMPTY_MSK\t\tBIT(4)\n#define DP_DL_INT_FRG_EMPTY_MSK\t\tBIT(5)\n#define DP_DL_INT_MTU_ERR_MSK\t\tBIT(6)\n#define DP_DL_INT_FRG_LEN_ERR_MSK\tBIT(7)\n#define DP_DL_INT_Q0_PITCNT_LEN_ERR\tBIT(8)\n#define DP_DL_INT_Q1_PITCNT_LEN_ERR\tBIT(9)\n#define DP_DL_INT_HPC_ENT_TYPE_ERR\tBIT(10)\n#define DP_DL_INT_Q0_DONE\t\tBIT(13)\n#define DP_DL_INT_Q1_DONE\t\tBIT(14)\n\n#define DP_DL_Q0_STATUS_MASK\t\t(DP_DL_INT_Q0_PITCNT_LEN_ERR | DP_DL_INT_Q0_DONE)\n#define DP_DL_Q1_STATUS_MASK\t\t(DP_DL_INT_Q1_PITCNT_LEN_ERR | DP_DL_INT_Q1_DONE)\n\nint t7xx_dpmaif_hw_init(struct dpmaif_hw_info *hw_info, struct dpmaif_hw_params *init_param);\nint t7xx_dpmaif_hw_stop_all_txq(struct dpmaif_hw_info *hw_info);\nint t7xx_dpmaif_hw_stop_all_rxq(struct dpmaif_hw_info *hw_info);\nvoid t7xx_dpmaif_start_hw(struct dpmaif_hw_info *hw_info);\nint t7xx_dpmaif_hw_get_intr_cnt(struct dpmaif_hw_info *hw_info,\n\t\t\t\tstruct dpmaif_hw_intr_st_para *para, int qno);\nvoid t7xx_dpmaif_unmask_ulq_intr(struct dpmaif_hw_info *hw_info, unsigned int q_num);\nvoid t7xx_dpmaif_ul_update_hw_drb_cnt(struct dpmaif_hw_info *hw_info, unsigned int q_num,\n\t\t\t\t      unsigned int drb_entry_cnt);\nint t7xx_dpmaif_dl_snd_hw_bat_cnt(struct dpmaif_hw_info *hw_info, unsigned int bat_entry_cnt);\nint t7xx_dpmaif_dl_snd_hw_frg_cnt(struct dpmaif_hw_info *hw_info, unsigned int frg_entry_cnt);\nint t7xx_dpmaif_dlq_add_pit_remain_cnt(struct dpmaif_hw_info *hw_info, unsigned int dlq_pit_idx,\n\t\t\t\t       unsigned int pit_remain_cnt);\nvoid t7xx_dpmaif_dlq_unmask_pitcnt_len_err_intr(struct dpmaif_hw_info *hw_info,\n\t\t\t\t\t\tunsigned int qno);\nvoid t7xx_dpmaif_dlq_unmask_rx_done(struct dpmaif_hw_info *hw_info, unsigned int qno);\nbool t7xx_dpmaif_ul_clr_done(struct dpmaif_hw_info *hw_info, unsigned int qno);\nvoid t7xx_dpmaif_ul_clr_all_intr(struct dpmaif_hw_info *hw_info);\nvoid t7xx_dpmaif_dl_clr_all_intr(struct dpmaif_hw_info *hw_info);\nvoid t7xx_dpmaif_clr_ip_busy_sts(struct dpmaif_hw_info *hw_info);\nvoid t7xx_dpmaif_dl_unmask_batcnt_len_err_intr(struct dpmaif_hw_info *hw_info);\nvoid t7xx_dpmaif_dl_unmask_pitcnt_len_err_intr(struct dpmaif_hw_info *hw_info);\nunsigned int t7xx_dpmaif_ul_get_rd_idx(struct dpmaif_hw_info *hw_info, unsigned int q_num);\nunsigned int t7xx_dpmaif_dl_get_bat_rd_idx(struct dpmaif_hw_info *hw_info, unsigned int q_num);\nunsigned int t7xx_dpmaif_dl_get_bat_wr_idx(struct dpmaif_hw_info *hw_info, unsigned int q_num);\nunsigned int t7xx_dpmaif_dl_get_frg_rd_idx(struct dpmaif_hw_info *hw_info, unsigned int q_num);\nunsigned int t7xx_dpmaif_dl_dlq_pit_get_wr_idx(struct dpmaif_hw_info *hw_info,\n\t\t\t\t\t       unsigned int dlq_pit_idx);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}