{
  "module_name": "realtek.h",
  "hash_id": "49e84075c8c9e384b4d15b0df6b73877f3729331f2f27abb24b3a81e5e4952f7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/realtek/realtek.h",
  "human_readable_source": " \n \n\n#ifndef _REALTEK_H\n#define _REALTEK_H\n\n#include <linux/phy.h>\n#include <linux/platform_device.h>\n#include <linux/gpio/consumer.h>\n#include <net/dsa.h>\n\n#define REALTEK_HW_STOP_DELAY\t\t25\t \n#define REALTEK_HW_START_DELAY\t\t100\t \n\nstruct realtek_ops;\nstruct dentry;\nstruct inode;\nstruct file;\n\nstruct rtl8366_mib_counter {\n\tunsigned int\tbase;\n\tunsigned int\toffset;\n\tunsigned int\tlength;\n\tconst char\t*name;\n};\n\n \nstruct rtl8366_vlan_mc {\n\tu16\tvid;\n\tu16\tuntag;\n\tu16\tmember;\n\tu8\tfid;\n\tu8\tpriority;\n};\n\nstruct rtl8366_vlan_4k {\n\tu16\tvid;\n\tu16\tuntag;\n\tu16\tmember;\n\tu8\tfid;\n};\n\nstruct realtek_priv {\n\tstruct device\t\t*dev;\n\tstruct gpio_desc\t*reset;\n\tstruct gpio_desc\t*mdc;\n\tstruct gpio_desc\t*mdio;\n\tstruct regmap\t\t*map;\n\tstruct regmap\t\t*map_nolock;\n\tstruct mutex\t\tmap_lock;\n\tstruct mii_bus\t\t*slave_mii_bus;\n\tstruct mii_bus\t\t*bus;\n\tint\t\t\tmdio_addr;\n\n\tunsigned int\t\tclk_delay;\n\tu8\t\t\tcmd_read;\n\tu8\t\t\tcmd_write;\n\tspinlock_t\t\tlock;  \n\tstruct dsa_switch\t*ds;\n\tstruct irq_domain\t*irqdomain;\n\tbool\t\t\tleds_disabled;\n\n\tunsigned int\t\tcpu_port;\n\tunsigned int\t\tnum_ports;\n\tunsigned int\t\tnum_vlan_mc;\n\tunsigned int\t\tnum_mib_counters;\n\tstruct rtl8366_mib_counter *mib_counters;\n\n\tconst struct realtek_ops *ops;\n\tint\t\t\t(*setup_interface)(struct dsa_switch *ds);\n\tint\t\t\t(*write_reg_noack)(void *ctx, u32 addr, u32 data);\n\n\tint\t\t\tvlan_enabled;\n\tint\t\t\tvlan4k_enabled;\n\n\tchar\t\t\tbuf[4096];\n\tvoid\t\t\t*chip_data;  \n};\n\n \nstruct realtek_ops {\n\tint\t(*detect)(struct realtek_priv *priv);\n\tint\t(*reset_chip)(struct realtek_priv *priv);\n\tint\t(*setup)(struct realtek_priv *priv);\n\tvoid\t(*cleanup)(struct realtek_priv *priv);\n\tint\t(*get_mib_counter)(struct realtek_priv *priv,\n\t\t\t\t   int port,\n\t\t\t\t   struct rtl8366_mib_counter *mib,\n\t\t\t\t   u64 *mibvalue);\n\tint\t(*get_vlan_mc)(struct realtek_priv *priv, u32 index,\n\t\t\t       struct rtl8366_vlan_mc *vlanmc);\n\tint\t(*set_vlan_mc)(struct realtek_priv *priv, u32 index,\n\t\t\t       const struct rtl8366_vlan_mc *vlanmc);\n\tint\t(*get_vlan_4k)(struct realtek_priv *priv, u32 vid,\n\t\t\t       struct rtl8366_vlan_4k *vlan4k);\n\tint\t(*set_vlan_4k)(struct realtek_priv *priv,\n\t\t\t       const struct rtl8366_vlan_4k *vlan4k);\n\tint\t(*get_mc_index)(struct realtek_priv *priv, int port, int *val);\n\tint\t(*set_mc_index)(struct realtek_priv *priv, int port, int index);\n\tbool\t(*is_vlan_valid)(struct realtek_priv *priv, unsigned int vlan);\n\tint\t(*enable_vlan)(struct realtek_priv *priv, bool enable);\n\tint\t(*enable_vlan4k)(struct realtek_priv *priv, bool enable);\n\tint\t(*enable_port)(struct realtek_priv *priv, int port, bool enable);\n\tint\t(*phy_read)(struct realtek_priv *priv, int phy, int regnum);\n\tint\t(*phy_write)(struct realtek_priv *priv, int phy, int regnum,\n\t\t\t     u16 val);\n};\n\nstruct realtek_variant {\n\tconst struct dsa_switch_ops *ds_ops_smi;\n\tconst struct dsa_switch_ops *ds_ops_mdio;\n\tconst struct realtek_ops *ops;\n\tunsigned int clk_delay;\n\tu8 cmd_read;\n\tu8 cmd_write;\n\tsize_t chip_data_sz;\n};\n\n \nint rtl8366_mc_is_used(struct realtek_priv *priv, int mc_index, int *used);\nint rtl8366_set_vlan(struct realtek_priv *priv, int vid, u32 member,\n\t\t     u32 untag, u32 fid);\nint rtl8366_set_pvid(struct realtek_priv *priv, unsigned int port,\n\t\t     unsigned int vid);\nint rtl8366_enable_vlan4k(struct realtek_priv *priv, bool enable);\nint rtl8366_enable_vlan(struct realtek_priv *priv, bool enable);\nint rtl8366_reset_vlan(struct realtek_priv *priv);\nint rtl8366_vlan_add(struct dsa_switch *ds, int port,\n\t\t     const struct switchdev_obj_port_vlan *vlan,\n\t\t     struct netlink_ext_ack *extack);\nint rtl8366_vlan_del(struct dsa_switch *ds, int port,\n\t\t     const struct switchdev_obj_port_vlan *vlan);\nvoid rtl8366_get_strings(struct dsa_switch *ds, int port, u32 stringset,\n\t\t\t uint8_t *data);\nint rtl8366_get_sset_count(struct dsa_switch *ds, int port, int sset);\nvoid rtl8366_get_ethtool_stats(struct dsa_switch *ds, int port, uint64_t *data);\n\nextern const struct realtek_variant rtl8366rb_variant;\nextern const struct realtek_variant rtl8365mb_variant;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}