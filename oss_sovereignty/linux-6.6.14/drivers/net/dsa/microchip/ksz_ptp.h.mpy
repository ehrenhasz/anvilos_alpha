{
  "module_name": "ksz_ptp.h",
  "hash_id": "727102d2968beed100aed0723b1eceda4f646bfd6586bc418973a04478a95d5d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/microchip/ksz_ptp.h",
  "human_readable_source": " \n \n\n#ifndef _NET_DSA_DRIVERS_KSZ_PTP_H\n#define _NET_DSA_DRIVERS_KSZ_PTP_H\n\n#if IS_ENABLED(CONFIG_NET_DSA_MICROCHIP_KSZ_PTP)\n\n#include <linux/ptp_clock_kernel.h>\n\n#define KSZ_PTP_N_GPIO\t\t2\n\nenum ksz_ptp_tou_mode {\n\tKSZ_PTP_TOU_IDLE,\n\tKSZ_PTP_TOU_PEROUT,\n};\n\nstruct ksz_ptp_data {\n\tstruct ptp_clock_info caps;\n\tstruct ptp_clock *clock;\n\tstruct ptp_pin_desc pin_config[KSZ_PTP_N_GPIO];\n\t \n\tstruct mutex lock;\n\t \n\tspinlock_t clock_lock;\n\tstruct timespec64 clock_time;\n\tenum ksz_ptp_tou_mode tou_mode;\n\tstruct timespec64 perout_target_time_first;   \n\tstruct timespec64 perout_period;\n};\n\nint ksz_ptp_clock_register(struct dsa_switch *ds);\n\nvoid ksz_ptp_clock_unregister(struct dsa_switch *ds);\n\nint ksz_get_ts_info(struct dsa_switch *ds, int port,\n\t\t    struct ethtool_ts_info *ts);\nint ksz_hwtstamp_get(struct dsa_switch *ds, int port, struct ifreq *ifr);\nint ksz_hwtstamp_set(struct dsa_switch *ds, int port, struct ifreq *ifr);\nvoid ksz_port_txtstamp(struct dsa_switch *ds, int port, struct sk_buff *skb);\nvoid ksz_port_deferred_xmit(struct kthread_work *work);\nbool ksz_port_rxtstamp(struct dsa_switch *ds, int port, struct sk_buff *skb,\n\t\t       unsigned int type);\nint ksz_ptp_irq_setup(struct dsa_switch *ds, u8 p);\nvoid ksz_ptp_irq_free(struct dsa_switch *ds, u8 p);\n\n#else\n\nstruct ksz_ptp_data {\n\t \n\tstruct mutex lock;\n};\n\nstatic inline int ksz_ptp_clock_register(struct dsa_switch *ds)\n{\n\treturn 0;\n}\n\nstatic inline void ksz_ptp_clock_unregister(struct dsa_switch *ds) { }\n\nstatic inline int ksz_ptp_irq_setup(struct dsa_switch *ds, u8 p)\n{\n\treturn 0;\n}\n\nstatic inline void ksz_ptp_irq_free(struct dsa_switch *ds, u8 p) {}\n\n#define ksz_get_ts_info NULL\n\n#define ksz_hwtstamp_get NULL\n\n#define ksz_hwtstamp_set NULL\n\n#define ksz_port_rxtstamp NULL\n\n#define ksz_port_txtstamp NULL\n\n#define ksz_port_deferred_xmit NULL\n\n#endif\t \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}