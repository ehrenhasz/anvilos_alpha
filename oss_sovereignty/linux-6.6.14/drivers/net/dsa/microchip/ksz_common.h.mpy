{
  "module_name": "ksz_common.h",
  "hash_id": "a31cbea8b64a07a0dc5a61877167050545ba69c75f29ac463d00590a27bfa526",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/microchip/ksz_common.h",
  "human_readable_source": " \n \n\n#ifndef __KSZ_COMMON_H\n#define __KSZ_COMMON_H\n\n#include <linux/etherdevice.h>\n#include <linux/kernel.h>\n#include <linux/mutex.h>\n#include <linux/phy.h>\n#include <linux/regmap.h>\n#include <net/dsa.h>\n#include <linux/irq.h>\n\n#include \"ksz_ptp.h\"\n\n#define KSZ_MAX_NUM_PORTS 8\n\nstruct ksz_device;\nstruct ksz_port;\n\nenum ksz_regmap_width {\n\tKSZ_REGMAP_8,\n\tKSZ_REGMAP_16,\n\tKSZ_REGMAP_32,\n\t__KSZ_NUM_REGMAPS,\n};\n\nstruct vlan_table {\n\tu32 table[3];\n};\n\nstruct ksz_port_mib {\n\tstruct mutex cnt_mutex;\t\t \n\tu8 cnt_ptr;\n\tu64 *counters;\n\tstruct rtnl_link_stats64 stats64;\n\tstruct ethtool_pause_stats pause_stats;\n\tstruct spinlock stats64_lock;\n};\n\nstruct ksz_mib_names {\n\tint index;\n\tchar string[ETH_GSTRING_LEN];\n};\n\nstruct ksz_chip_data {\n\tu32 chip_id;\n\tconst char *dev_name;\n\tint num_vlans;\n\tint num_alus;\n\tint num_statics;\n\tint cpu_ports;\n\tint port_cnt;\n\tu8 port_nirqs;\n\tu8 num_tx_queues;\n\tbool tc_cbs_supported;\n\tbool tc_ets_supported;\n\tconst struct ksz_dev_ops *ops;\n\tbool ksz87xx_eee_link_erratum;\n\tconst struct ksz_mib_names *mib_names;\n\tint mib_cnt;\n\tu8 reg_mib_cnt;\n\tconst u16 *regs;\n\tconst u32 *masks;\n\tconst u8 *shifts;\n\tconst u8 *xmii_ctrl0;\n\tconst u8 *xmii_ctrl1;\n\tint stp_ctrl_reg;\n\tint broadcast_ctrl_reg;\n\tint multicast_ctrl_reg;\n\tint start_ctrl_reg;\n\tbool supports_mii[KSZ_MAX_NUM_PORTS];\n\tbool supports_rmii[KSZ_MAX_NUM_PORTS];\n\tbool supports_rgmii[KSZ_MAX_NUM_PORTS];\n\tbool internal_phy[KSZ_MAX_NUM_PORTS];\n\tbool gbit_capable[KSZ_MAX_NUM_PORTS];\n\tconst struct regmap_access_table *wr_table;\n\tconst struct regmap_access_table *rd_table;\n};\n\nstruct ksz_irq {\n\tu16 masked;\n\tu16 reg_mask;\n\tu16 reg_status;\n\tstruct irq_domain *domain;\n\tint nirqs;\n\tint irq_num;\n\tchar name[16];\n\tstruct ksz_device *dev;\n};\n\nstruct ksz_ptp_irq {\n\tstruct ksz_port *port;\n\tu16 ts_reg;\n\tbool ts_en;\n\tchar name[16];\n\tint num;\n};\n\nstruct ksz_port {\n\tbool remove_tag;\t\t \n\tbool learning;\n\tint stp_state;\n\tstruct phy_device phydev;\n\n\tu32 fiber:1;\t\t\t \n\tu32 force:1;\n\tu32 read:1;\t\t\t \n\tu32 freeze:1;\t\t\t \n\n\tstruct ksz_port_mib mib;\n\tphy_interface_t interface;\n\tu32 rgmii_tx_val;\n\tu32 rgmii_rx_val;\n\tstruct ksz_device *ksz_dev;\n\tstruct ksz_irq pirq;\n\tu8 num;\n#if IS_ENABLED(CONFIG_NET_DSA_MICROCHIP_KSZ_PTP)\n\tstruct hwtstamp_config tstamp_config;\n\tbool hwts_tx_en;\n\tbool hwts_rx_en;\n\tstruct ksz_irq ptpirq;\n\tstruct ksz_ptp_irq ptpmsg_irq[3];\n\tktime_t tstamp_msg;\n\tstruct completion tstamp_msg_comp;\n#endif\n};\n\nstruct ksz_device {\n\tstruct dsa_switch *ds;\n\tstruct ksz_platform_data *pdata;\n\tconst struct ksz_chip_data *info;\n\n\tstruct mutex dev_mutex;\t\t \n\tstruct mutex regmap_mutex;\t \n\tstruct mutex alu_mutex;\t\t \n\tstruct mutex vlan_mutex;\t \n\tconst struct ksz_dev_ops *dev_ops;\n\n\tstruct device *dev;\n\tstruct regmap *regmap[__KSZ_NUM_REGMAPS];\n\n\tvoid *priv;\n\tint irq;\n\n\tstruct gpio_desc *reset_gpio;\t \n\n\t \n\tu32 chip_id;\n\tu8 chip_rev;\n\tint cpu_port;\t\t\t \n\tint phy_port_cnt;\n\tphy_interface_t compat_interface;\n\tbool synclko_125;\n\tbool synclko_disable;\n\n\tstruct vlan_table *vlan_cache;\n\n\tstruct ksz_port *ports;\n\tstruct delayed_work mib_read;\n\tunsigned long mib_read_interval;\n\tu16 mirror_rx;\n\tu16 mirror_tx;\n\tu16 port_mask;\n\tstruct mutex lock_irq;\t\t \n\tstruct ksz_irq girq;\n\tstruct ksz_ptp_data ptp_data;\n};\n\n \nenum ksz_model {\n\tKSZ8563,\n\tKSZ8795,\n\tKSZ8794,\n\tKSZ8765,\n\tKSZ8830,\n\tKSZ9477,\n\tKSZ9896,\n\tKSZ9897,\n\tKSZ9893,\n\tKSZ9563,\n\tKSZ9567,\n\tLAN9370,\n\tLAN9371,\n\tLAN9372,\n\tLAN9373,\n\tLAN9374,\n};\n\nenum ksz_chip_id {\n\tKSZ8563_CHIP_ID = 0x8563,\n\tKSZ8795_CHIP_ID = 0x8795,\n\tKSZ8794_CHIP_ID = 0x8794,\n\tKSZ8765_CHIP_ID = 0x8765,\n\tKSZ8830_CHIP_ID = 0x8830,\n\tKSZ9477_CHIP_ID = 0x00947700,\n\tKSZ9896_CHIP_ID = 0x00989600,\n\tKSZ9897_CHIP_ID = 0x00989700,\n\tKSZ9893_CHIP_ID = 0x00989300,\n\tKSZ9563_CHIP_ID = 0x00956300,\n\tKSZ9567_CHIP_ID = 0x00956700,\n\tLAN9370_CHIP_ID = 0x00937000,\n\tLAN9371_CHIP_ID = 0x00937100,\n\tLAN9372_CHIP_ID = 0x00937200,\n\tLAN9373_CHIP_ID = 0x00937300,\n\tLAN9374_CHIP_ID = 0x00937400,\n};\n\nenum ksz_regs {\n\tREG_IND_CTRL_0,\n\tREG_IND_DATA_8,\n\tREG_IND_DATA_CHECK,\n\tREG_IND_DATA_HI,\n\tREG_IND_DATA_LO,\n\tREG_IND_MIB_CHECK,\n\tREG_IND_BYTE,\n\tP_FORCE_CTRL,\n\tP_LINK_STATUS,\n\tP_LOCAL_CTRL,\n\tP_NEG_RESTART_CTRL,\n\tP_REMOTE_STATUS,\n\tP_SPEED_STATUS,\n\tS_TAIL_TAG_CTRL,\n\tP_STP_CTRL,\n\tS_START_CTRL,\n\tS_BROADCAST_CTRL,\n\tS_MULTICAST_CTRL,\n\tP_XMII_CTRL_0,\n\tP_XMII_CTRL_1,\n};\n\nenum ksz_masks {\n\tPORT_802_1P_REMAPPING,\n\tSW_TAIL_TAG_ENABLE,\n\tMIB_COUNTER_OVERFLOW,\n\tMIB_COUNTER_VALID,\n\tVLAN_TABLE_FID,\n\tVLAN_TABLE_MEMBERSHIP,\n\tVLAN_TABLE_VALID,\n\tSTATIC_MAC_TABLE_VALID,\n\tSTATIC_MAC_TABLE_USE_FID,\n\tSTATIC_MAC_TABLE_FID,\n\tSTATIC_MAC_TABLE_OVERRIDE,\n\tSTATIC_MAC_TABLE_FWD_PORTS,\n\tDYNAMIC_MAC_TABLE_ENTRIES_H,\n\tDYNAMIC_MAC_TABLE_MAC_EMPTY,\n\tDYNAMIC_MAC_TABLE_NOT_READY,\n\tDYNAMIC_MAC_TABLE_ENTRIES,\n\tDYNAMIC_MAC_TABLE_FID,\n\tDYNAMIC_MAC_TABLE_SRC_PORT,\n\tDYNAMIC_MAC_TABLE_TIMESTAMP,\n\tALU_STAT_WRITE,\n\tALU_STAT_READ,\n\tP_MII_TX_FLOW_CTRL,\n\tP_MII_RX_FLOW_CTRL,\n};\n\nenum ksz_shifts {\n\tVLAN_TABLE_MEMBERSHIP_S,\n\tVLAN_TABLE,\n\tSTATIC_MAC_FWD_PORTS,\n\tSTATIC_MAC_FID,\n\tDYNAMIC_MAC_ENTRIES_H,\n\tDYNAMIC_MAC_ENTRIES,\n\tDYNAMIC_MAC_FID,\n\tDYNAMIC_MAC_TIMESTAMP,\n\tDYNAMIC_MAC_SRC_PORT,\n\tALU_STAT_INDEX,\n};\n\nenum ksz_xmii_ctrl0 {\n\tP_MII_100MBIT,\n\tP_MII_10MBIT,\n\tP_MII_FULL_DUPLEX,\n\tP_MII_HALF_DUPLEX,\n};\n\nenum ksz_xmii_ctrl1 {\n\tP_RGMII_SEL,\n\tP_RMII_SEL,\n\tP_GMII_SEL,\n\tP_MII_SEL,\n\tP_GMII_1GBIT,\n\tP_GMII_NOT_1GBIT,\n};\n\nstruct alu_struct {\n\t \n\tu8\tis_static:1;\n\tu8\tis_src_filter:1;\n\tu8\tis_dst_filter:1;\n\tu8\tprio_age:3;\n\tu32\t_reserv_0_1:23;\n\tu8\tmstp:3;\n\t \n\tu8\tis_override:1;\n\tu8\tis_use_fid:1;\n\tu32\t_reserv_1_1:23;\n\tu8\tport_forward:7;\n\t \n\tu32\t_reserv_2_1:9;\n\tu8\tfid:7;\n\tu8\tmac[ETH_ALEN];\n};\n\nstruct ksz_dev_ops {\n\tint (*setup)(struct dsa_switch *ds);\n\tvoid (*teardown)(struct dsa_switch *ds);\n\tu32 (*get_port_addr)(int port, int offset);\n\tvoid (*cfg_port_member)(struct ksz_device *dev, int port, u8 member);\n\tvoid (*flush_dyn_mac_table)(struct ksz_device *dev, int port);\n\tvoid (*port_cleanup)(struct ksz_device *dev, int port);\n\tvoid (*port_setup)(struct ksz_device *dev, int port, bool cpu_port);\n\tint (*set_ageing_time)(struct ksz_device *dev, unsigned int msecs);\n\tint (*r_phy)(struct ksz_device *dev, u16 phy, u16 reg, u16 *val);\n\tint (*w_phy)(struct ksz_device *dev, u16 phy, u16 reg, u16 val);\n\tvoid (*r_mib_cnt)(struct ksz_device *dev, int port, u16 addr,\n\t\t\t  u64 *cnt);\n\tvoid (*r_mib_pkt)(struct ksz_device *dev, int port, u16 addr,\n\t\t\t  u64 *dropped, u64 *cnt);\n\tvoid (*r_mib_stat64)(struct ksz_device *dev, int port);\n\tint  (*vlan_filtering)(struct ksz_device *dev, int port,\n\t\t\t       bool flag, struct netlink_ext_ack *extack);\n\tint  (*vlan_add)(struct ksz_device *dev, int port,\n\t\t\t const struct switchdev_obj_port_vlan *vlan,\n\t\t\t struct netlink_ext_ack *extack);\n\tint  (*vlan_del)(struct ksz_device *dev, int port,\n\t\t\t const struct switchdev_obj_port_vlan *vlan);\n\tint (*mirror_add)(struct ksz_device *dev, int port,\n\t\t\t  struct dsa_mall_mirror_tc_entry *mirror,\n\t\t\t  bool ingress, struct netlink_ext_ack *extack);\n\tvoid (*mirror_del)(struct ksz_device *dev, int port,\n\t\t\t   struct dsa_mall_mirror_tc_entry *mirror);\n\tint (*fdb_add)(struct ksz_device *dev, int port,\n\t\t       const unsigned char *addr, u16 vid, struct dsa_db db);\n\tint (*fdb_del)(struct ksz_device *dev, int port,\n\t\t       const unsigned char *addr, u16 vid, struct dsa_db db);\n\tint (*fdb_dump)(struct ksz_device *dev, int port,\n\t\t\tdsa_fdb_dump_cb_t *cb, void *data);\n\tint (*mdb_add)(struct ksz_device *dev, int port,\n\t\t       const struct switchdev_obj_port_mdb *mdb,\n\t\t       struct dsa_db db);\n\tint (*mdb_del)(struct ksz_device *dev, int port,\n\t\t       const struct switchdev_obj_port_mdb *mdb,\n\t\t       struct dsa_db db);\n\tvoid (*get_caps)(struct ksz_device *dev, int port,\n\t\t\t struct phylink_config *config);\n\tint (*change_mtu)(struct ksz_device *dev, int port, int mtu);\n\tvoid (*freeze_mib)(struct ksz_device *dev, int port, bool freeze);\n\tvoid (*port_init_cnt)(struct ksz_device *dev, int port);\n\tvoid (*phylink_mac_config)(struct ksz_device *dev, int port,\n\t\t\t\t   unsigned int mode,\n\t\t\t\t   const struct phylink_link_state *state);\n\tvoid (*phylink_mac_link_up)(struct ksz_device *dev, int port,\n\t\t\t\t    unsigned int mode,\n\t\t\t\t    phy_interface_t interface,\n\t\t\t\t    struct phy_device *phydev, int speed,\n\t\t\t\t    int duplex, bool tx_pause, bool rx_pause);\n\tvoid (*setup_rgmii_delay)(struct ksz_device *dev, int port);\n\tint (*tc_cbs_set_cinc)(struct ksz_device *dev, int port, u32 val);\n\tvoid (*config_cpu_port)(struct dsa_switch *ds);\n\tint (*enable_stp_addr)(struct ksz_device *dev);\n\tint (*reset)(struct ksz_device *dev);\n\tint (*init)(struct ksz_device *dev);\n\tvoid (*exit)(struct ksz_device *dev);\n};\n\nstruct ksz_device *ksz_switch_alloc(struct device *base, void *priv);\nint ksz_switch_register(struct ksz_device *dev);\nvoid ksz_switch_remove(struct ksz_device *dev);\n\nvoid ksz_init_mib_timer(struct ksz_device *dev);\nvoid ksz_r_mib_stats64(struct ksz_device *dev, int port);\nvoid ksz88xx_r_mib_stats64(struct ksz_device *dev, int port);\nvoid ksz_port_stp_state_set(struct dsa_switch *ds, int port, u8 state);\nbool ksz_get_gbit(struct ksz_device *dev, int port);\nphy_interface_t ksz_get_xmii(struct ksz_device *dev, int port, bool gbit);\nextern const struct ksz_chip_data ksz_switch_chips[];\n\n \nstatic inline struct regmap *ksz_regmap_8(struct ksz_device *dev)\n{\n\treturn dev->regmap[KSZ_REGMAP_8];\n}\n\nstatic inline struct regmap *ksz_regmap_16(struct ksz_device *dev)\n{\n\treturn dev->regmap[KSZ_REGMAP_16];\n}\n\nstatic inline struct regmap *ksz_regmap_32(struct ksz_device *dev)\n{\n\treturn dev->regmap[KSZ_REGMAP_32];\n}\n\nstatic inline int ksz_read8(struct ksz_device *dev, u32 reg, u8 *val)\n{\n\tunsigned int value;\n\tint ret = regmap_read(ksz_regmap_8(dev), reg, &value);\n\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't read 8bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\t*val = value;\n\treturn ret;\n}\n\nstatic inline int ksz_read16(struct ksz_device *dev, u32 reg, u16 *val)\n{\n\tunsigned int value;\n\tint ret = regmap_read(ksz_regmap_16(dev), reg, &value);\n\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't read 16bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\t*val = value;\n\treturn ret;\n}\n\nstatic inline int ksz_read32(struct ksz_device *dev, u32 reg, u32 *val)\n{\n\tunsigned int value;\n\tint ret = regmap_read(ksz_regmap_32(dev), reg, &value);\n\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't read 32bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\t*val = value;\n\treturn ret;\n}\n\nstatic inline int ksz_read64(struct ksz_device *dev, u32 reg, u64 *val)\n{\n\tu32 value[2];\n\tint ret;\n\n\tret = regmap_bulk_read(ksz_regmap_32(dev), reg, value, 2);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't read 64bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\telse\n\t\t*val = (u64)value[0] << 32 | value[1];\n\n\treturn ret;\n}\n\nstatic inline int ksz_write8(struct ksz_device *dev, u32 reg, u8 value)\n{\n\tint ret;\n\n\tret = regmap_write(ksz_regmap_8(dev), reg, value);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't write 8bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_write16(struct ksz_device *dev, u32 reg, u16 value)\n{\n\tint ret;\n\n\tret = regmap_write(ksz_regmap_16(dev), reg, value);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't write 16bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_write32(struct ksz_device *dev, u32 reg, u32 value)\n{\n\tint ret;\n\n\tret = regmap_write(ksz_regmap_32(dev), reg, value);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't write 32bit reg: 0x%x %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_rmw16(struct ksz_device *dev, u32 reg, u16 mask,\n\t\t\t    u16 value)\n{\n\tint ret;\n\n\tret = regmap_update_bits(ksz_regmap_16(dev), reg, mask, value);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't rmw 16bit reg 0x%x: %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_rmw32(struct ksz_device *dev, u32 reg, u32 mask,\n\t\t\t    u32 value)\n{\n\tint ret;\n\n\tret = regmap_update_bits(ksz_regmap_32(dev), reg, mask, value);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't rmw 32bit reg 0x%x: %pe\\n\", reg,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_write64(struct ksz_device *dev, u32 reg, u64 value)\n{\n\tu32 val[2];\n\n\t \n\tvalue = swab64(value);\n\tval[0] = swab32(value & 0xffffffffULL);\n\tval[1] = swab32(value >> 32ULL);\n\n\treturn regmap_bulk_write(ksz_regmap_32(dev), reg, val, 2);\n}\n\nstatic inline int ksz_rmw8(struct ksz_device *dev, int offset, u8 mask, u8 val)\n{\n\tint ret;\n\n\tret = regmap_update_bits(ksz_regmap_8(dev), offset, mask, val);\n\tif (ret)\n\t\tdev_err(dev->dev, \"can't rmw 8bit reg 0x%x: %pe\\n\", offset,\n\t\t\tERR_PTR(ret));\n\n\treturn ret;\n}\n\nstatic inline int ksz_pread8(struct ksz_device *dev, int port, int offset,\n\t\t\t     u8 *data)\n{\n\treturn ksz_read8(dev, dev->dev_ops->get_port_addr(port, offset), data);\n}\n\nstatic inline int ksz_pread16(struct ksz_device *dev, int port, int offset,\n\t\t\t      u16 *data)\n{\n\treturn ksz_read16(dev, dev->dev_ops->get_port_addr(port, offset), data);\n}\n\nstatic inline int ksz_pread32(struct ksz_device *dev, int port, int offset,\n\t\t\t      u32 *data)\n{\n\treturn ksz_read32(dev, dev->dev_ops->get_port_addr(port, offset), data);\n}\n\nstatic inline int ksz_pwrite8(struct ksz_device *dev, int port, int offset,\n\t\t\t      u8 data)\n{\n\treturn ksz_write8(dev, dev->dev_ops->get_port_addr(port, offset), data);\n}\n\nstatic inline int ksz_pwrite16(struct ksz_device *dev, int port, int offset,\n\t\t\t       u16 data)\n{\n\treturn ksz_write16(dev, dev->dev_ops->get_port_addr(port, offset),\n\t\t\t   data);\n}\n\nstatic inline int ksz_pwrite32(struct ksz_device *dev, int port, int offset,\n\t\t\t       u32 data)\n{\n\treturn ksz_write32(dev, dev->dev_ops->get_port_addr(port, offset),\n\t\t\t   data);\n}\n\nstatic inline int ksz_prmw8(struct ksz_device *dev, int port, int offset,\n\t\t\t    u8 mask, u8 val)\n{\n\treturn ksz_rmw8(dev, dev->dev_ops->get_port_addr(port, offset),\n\t\t\tmask, val);\n}\n\nstatic inline int ksz_prmw32(struct ksz_device *dev, int port, int offset,\n\t\t\t     u32 mask, u32 val)\n{\n\treturn ksz_rmw32(dev, dev->dev_ops->get_port_addr(port, offset),\n\t\t\t mask, val);\n}\n\nstatic inline void ksz_regmap_lock(void *__mtx)\n{\n\tstruct mutex *mtx = __mtx;\n\tmutex_lock(mtx);\n}\n\nstatic inline void ksz_regmap_unlock(void *__mtx)\n{\n\tstruct mutex *mtx = __mtx;\n\tmutex_unlock(mtx);\n}\n\nstatic inline bool ksz_is_ksz87xx(struct ksz_device *dev)\n{\n\treturn dev->chip_id == KSZ8795_CHIP_ID ||\n\t       dev->chip_id == KSZ8794_CHIP_ID ||\n\t       dev->chip_id == KSZ8765_CHIP_ID;\n}\n\nstatic inline bool ksz_is_ksz88x3(struct ksz_device *dev)\n{\n\treturn dev->chip_id == KSZ8830_CHIP_ID;\n}\n\nstatic inline int is_lan937x(struct ksz_device *dev)\n{\n\treturn dev->chip_id == LAN9370_CHIP_ID ||\n\t\tdev->chip_id == LAN9371_CHIP_ID ||\n\t\tdev->chip_id == LAN9372_CHIP_ID ||\n\t\tdev->chip_id == LAN9373_CHIP_ID ||\n\t\tdev->chip_id == LAN9374_CHIP_ID;\n}\n\n \n#define PORT_TX_ENABLE\t\t\tBIT(2)\n#define PORT_RX_ENABLE\t\t\tBIT(1)\n#define PORT_LEARN_DISABLE\t\tBIT(0)\n\n \n#define REG_CHIP_ID0\t\t\t0x00\n\n#define SW_FAMILY_ID_M\t\t\tGENMASK(15, 8)\n#define KSZ87_FAMILY_ID\t\t\t0x87\n#define KSZ88_FAMILY_ID\t\t\t0x88\n\n#define KSZ8_PORT_STATUS_0\t\t0x08\n#define KSZ8_PORT_FIBER_MODE\t\tBIT(7)\n\n#define SW_CHIP_ID_M\t\t\tGENMASK(7, 4)\n#define KSZ87_CHIP_ID_94\t\t0x6\n#define KSZ87_CHIP_ID_95\t\t0x9\n#define KSZ88_CHIP_ID_63\t\t0x3\n\n#define SW_REV_ID_M\t\t\tGENMASK(7, 4)\n\n \n#define REG_CHIP_ID4\t\t\t0x0f\n#define SKU_ID_KSZ8563\t\t\t0x3c\n#define SKU_ID_KSZ9563\t\t\t0x1c\n\n \n#define BROADCAST_STORM_PROT_RATE\t10\n\n \n#define BROADCAST_STORM_VALUE\t\t9969\n\n#define BROADCAST_STORM_RATE_HI\t\t0x07\n#define BROADCAST_STORM_RATE_LO\t\t0xFF\n#define BROADCAST_STORM_RATE\t\t0x07FF\n\n#define MULTICAST_STORM_DISABLE\t\tBIT(6)\n\n#define SW_START\t\t\t0x01\n\n \n#define P_MII_DUPLEX_M\t\t\tBIT(6)\n#define P_MII_100MBIT_M\t\t\tBIT(4)\n\n#define P_GMII_1GBIT_M\t\t\tBIT(6)\n#define P_RGMII_ID_IG_ENABLE\t\tBIT(4)\n#define P_RGMII_ID_EG_ENABLE\t\tBIT(3)\n#define P_MII_MAC_MODE\t\t\tBIT(2)\n#define P_MII_SEL_M\t\t\t0x3\n\n \n#define REG_SW_PORT_INT_STATUS__1\t0x001B\n#define REG_SW_PORT_INT_MASK__1\t\t0x001F\n\n#define REG_PORT_INT_STATUS\t\t0x001B\n#define REG_PORT_INT_MASK\t\t0x001F\n\n#define PORT_SRC_PHY_INT\t\t1\n#define PORT_SRC_PTP_INT\t\t2\n\n#define KSZ8795_HUGE_PACKET_SIZE\t2000\n#define KSZ8863_HUGE_PACKET_SIZE\t1916\n#define KSZ8863_NORMAL_PACKET_SIZE\t1536\n#define KSZ8_LEGAL_PACKET_SIZE\t\t1518\n#define KSZ9477_MAX_FRAME_SIZE\t\t9000\n\n#define KSZ9477_REG_PORT_OUT_RATE_0\t0x0420\n#define KSZ9477_OUT_RATE_NO_LIMIT\t0\n\n#define KSZ9477_PORT_MRI_TC_MAP__4\t0x0808\n\n#define KSZ9477_PORT_TC_MAP_S\t\t4\n#define KSZ9477_MAX_TC_PRIO\t\t7\n\n \n#define REG_PORT_MTI_QUEUE_INDEX__4\t0x0900\n\n#define REG_PORT_MTI_QUEUE_CTRL_0\t0x0914\n\n#define MTI_SCHEDULE_MODE_M\t\tGENMASK(7, 6)\n#define MTI_SCHEDULE_STRICT_PRIO\t0\n#define MTI_SCHEDULE_WRR\t\t2\n#define MTI_SHAPING_M\t\t\tGENMASK(5, 4)\n#define MTI_SHAPING_OFF\t\t\t0\n#define MTI_SHAPING_SRP\t\t\t1\n#define MTI_SHAPING_TIME_AWARE\t\t2\n\n#define KSZ9477_PORT_MTI_QUEUE_CTRL_1\t0x0915\n#define KSZ9477_DEFAULT_WRR_WEIGHT\t1\n\n#define REG_PORT_MTI_HI_WATER_MARK\t0x0916\n#define REG_PORT_MTI_LO_WATER_MARK\t0x0918\n\n \n#define KSZ_SPI_OP_RD\t\t3\n#define KSZ_SPI_OP_WR\t\t2\n\n#define swabnot_used(x)\t\t0\n\n#define KSZ_SPI_OP_FLAG_MASK(opcode, swp, regbits, regpad)\t\t\\\n\tswab##swp((opcode) << ((regbits) + (regpad)))\n\n#define KSZ_REGMAP_ENTRY(width, swp, regbits, regpad, regalign)\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.name = #width,\t\t\t\t\t\t\\\n\t\t.val_bits = (width),\t\t\t\t\t\\\n\t\t.reg_stride = 1,\t\t\t\t\t\\\n\t\t.reg_bits = (regbits) + (regalign),\t\t\t\\\n\t\t.pad_bits = (regpad),\t\t\t\t\t\\\n\t\t.max_register = BIT(regbits) - 1,\t\t\t\\\n\t\t.cache_type = REGCACHE_NONE,\t\t\t\t\\\n\t\t.read_flag_mask =\t\t\t\t\t\\\n\t\t\tKSZ_SPI_OP_FLAG_MASK(KSZ_SPI_OP_RD, swp,\t\\\n\t\t\t\t\t     regbits, regpad),\t\t\\\n\t\t.write_flag_mask =\t\t\t\t\t\\\n\t\t\tKSZ_SPI_OP_FLAG_MASK(KSZ_SPI_OP_WR, swp,\t\\\n\t\t\t\t\t     regbits, regpad),\t\t\\\n\t\t.lock = ksz_regmap_lock,\t\t\t\t\\\n\t\t.unlock = ksz_regmap_unlock,\t\t\t\t\\\n\t\t.reg_format_endian = REGMAP_ENDIAN_BIG,\t\t\t\\\n\t\t.val_format_endian = REGMAP_ENDIAN_BIG\t\t\t\\\n\t}\n\n#define KSZ_REGMAP_TABLE(ksz, swp, regbits, regpad, regalign)\t\t\\\n\tstatic const struct regmap_config ksz##_regmap_config[] = {\t\\\n\t\t[KSZ_REGMAP_8] = KSZ_REGMAP_ENTRY(8, swp, (regbits), (regpad), (regalign)), \\\n\t\t[KSZ_REGMAP_16] = KSZ_REGMAP_ENTRY(16, swp, (regbits), (regpad), (regalign)), \\\n\t\t[KSZ_REGMAP_32] = KSZ_REGMAP_ENTRY(32, swp, (regbits), (regpad), (regalign)), \\\n\t}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}