{
  "module_name": "sja1105_tas.h",
  "hash_id": "d12fcecd7f0af76afc02c904f809b754aae99df65a0e1f4cd045e785743a3bbf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/sja1105/sja1105_tas.h",
  "human_readable_source": " \n \n#ifndef _SJA1105_TAS_H\n#define _SJA1105_TAS_H\n\n#include <net/pkt_sched.h>\n\n#define SJA1105_TAS_MAX_DELTA\t\tBIT(18)\n\nstruct sja1105_private;\n\n#if IS_ENABLED(CONFIG_NET_DSA_SJA1105_TAS)\n\nenum sja1105_tas_state {\n\tSJA1105_TAS_STATE_DISABLED,\n\tSJA1105_TAS_STATE_ENABLED_NOT_RUNNING,\n\tSJA1105_TAS_STATE_RUNNING,\n};\n\nenum sja1105_ptp_op {\n\tSJA1105_PTP_NONE,\n\tSJA1105_PTP_CLOCKSTEP,\n\tSJA1105_PTP_ADJUSTFREQ,\n};\n\nstruct sja1105_gate_entry {\n\tstruct list_head list;\n\tstruct sja1105_rule *rule;\n\ts64 interval;\n\tu8 gate_state;\n};\n\nstruct sja1105_gating_config {\n\tu64 cycle_time;\n\ts64 base_time;\n\tint num_entries;\n\tstruct list_head entries;\n};\n\nstruct sja1105_tas_data {\n\tstruct tc_taprio_qopt_offload *offload[SJA1105_MAX_NUM_PORTS];\n\tstruct sja1105_gating_config gating_cfg;\n\tenum sja1105_tas_state state;\n\tenum sja1105_ptp_op last_op;\n\tstruct work_struct tas_work;\n\ts64 earliest_base_time;\n\ts64 oper_base_time;\n\tu64 max_cycle_time;\n\tbool enabled;\n};\n\nint sja1105_setup_tc_taprio(struct dsa_switch *ds, int port,\n\t\t\t    struct tc_taprio_qopt_offload *admin);\n\nvoid sja1105_tas_setup(struct dsa_switch *ds);\n\nvoid sja1105_tas_teardown(struct dsa_switch *ds);\n\nvoid sja1105_tas_clockstep(struct dsa_switch *ds);\n\nvoid sja1105_tas_adjfreq(struct dsa_switch *ds);\n\nbool sja1105_gating_check_conflicts(struct sja1105_private *priv, int port,\n\t\t\t\t    struct netlink_ext_ack *extack);\n\nint sja1105_init_scheduling(struct sja1105_private *priv);\n\n#else\n\n \nstruct sja1105_tas_data {\n\tu8 dummy;\n};\n\nstatic inline int sja1105_setup_tc_taprio(struct dsa_switch *ds, int port,\n\t\t\t\t\t  struct tc_taprio_qopt_offload *admin)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void sja1105_tas_setup(struct dsa_switch *ds) { }\n\nstatic inline void sja1105_tas_teardown(struct dsa_switch *ds) { }\n\nstatic inline void sja1105_tas_clockstep(struct dsa_switch *ds) { }\n\nstatic inline void sja1105_tas_adjfreq(struct dsa_switch *ds) { }\n\nstatic inline bool\nsja1105_gating_check_conflicts(struct dsa_switch *ds, int port,\n\t\t\t       struct netlink_ext_ack *extack)\n{\n\treturn true;\n}\n\nstatic inline int sja1105_init_scheduling(struct sja1105_private *priv)\n{\n\treturn 0;\n}\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}