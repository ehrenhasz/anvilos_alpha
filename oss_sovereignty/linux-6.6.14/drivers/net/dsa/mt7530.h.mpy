{
  "module_name": "mt7530.h",
  "hash_id": "417614b0e9f3f27874d8131b582a42e24bd461913c751ffd0acb99c0fcd19139",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/mt7530.h",
  "human_readable_source": " \n \n\n#ifndef __MT7530_H\n#define __MT7530_H\n\n#define MT7530_NUM_PORTS\t\t7\n#define MT7530_NUM_PHYS\t\t\t5\n#define MT7530_NUM_FDB_RECORDS\t\t2048\n#define MT7530_ALL_MEMBERS\t\t0xff\n\n#define MTK_HDR_LEN\t4\n#define MT7530_MAX_MTU\t(15 * 1024 - ETH_HLEN - ETH_FCS_LEN - MTK_HDR_LEN)\n\nenum mt753x_id {\n\tID_MT7530 = 0,\n\tID_MT7621 = 1,\n\tID_MT7531 = 2,\n\tID_MT7988 = 3,\n};\n\n#define\tNUM_TRGMII_CTRL\t\t\t5\n\n#define TRGMII_BASE(x)\t\t\t(0x10000 + (x))\n\n \n#define ETHSYS_CLKCFG0\t\t\t0x2c\n#define  ETHSYS_TRGMII_CLK_SEL362_5\tBIT(11)\n\n#define SYSC_REG_RSTCTRL\t\t0x34\n#define  RESET_MCM\t\t\tBIT(2)\n\n \n#define MT7530_MFC\t\t\t0x10\n#define  BC_FFP(x)\t\t\t(((x) & 0xff) << 24)\n#define  BC_FFP_MASK\t\t\tBC_FFP(~0)\n#define  UNM_FFP(x)\t\t\t(((x) & 0xff) << 16)\n#define  UNM_FFP_MASK\t\t\tUNM_FFP(~0)\n#define  UNU_FFP(x)\t\t\t(((x) & 0xff) << 8)\n#define  UNU_FFP_MASK\t\t\tUNU_FFP(~0)\n#define  CPU_EN\t\t\t\tBIT(7)\n#define  CPU_PORT(x)\t\t\t((x) << 4)\n#define  CPU_MASK\t\t\t(0xf << 4)\n#define  MIRROR_EN\t\t\tBIT(3)\n#define  MIRROR_PORT(x)\t\t\t((x) & 0x7)\n#define  MIRROR_MASK\t\t\t0x7\n\n \n#define MT7531_CFC\t\t\t0x4\n#define  MT7531_MIRROR_EN\t\tBIT(19)\n#define  MT7531_MIRROR_MASK\t\t(MIRROR_MASK << 16)\n#define  MT7531_MIRROR_PORT_GET(x)\t(((x) >> 16) & MIRROR_MASK)\n#define  MT7531_MIRROR_PORT_SET(x)\t(((x) & MIRROR_MASK) << 16)\n#define  MT7531_CPU_PMAP_MASK\t\tGENMASK(7, 0)\n#define  MT7531_CPU_PMAP(x)\t\tFIELD_PREP(MT7531_CPU_PMAP_MASK, x)\n\n#define MT753X_MIRROR_REG(id)\t\t((((id) == ID_MT7531) || ((id) == ID_MT7988)) ?\t\\\n\t\t\t\t\t MT7531_CFC : MT7530_MFC)\n#define MT753X_MIRROR_EN(id)\t\t((((id) == ID_MT7531) || ((id) == ID_MT7988)) ?\t\\\n\t\t\t\t\t MT7531_MIRROR_EN : MIRROR_EN)\n#define MT753X_MIRROR_MASK(id)\t\t((((id) == ID_MT7531) || ((id) == ID_MT7988)) ?\t\\\n\t\t\t\t\t MT7531_MIRROR_MASK : MIRROR_MASK)\n\n \n#define MT753X_BPC\t\t\t0x24\n#define  MT753X_BPDU_PORT_FW_MASK\tGENMASK(2, 0)\n#define  MT753X_PAE_PORT_FW_MASK\tGENMASK(18, 16)\n#define  MT753X_PAE_PORT_FW(x)\t\tFIELD_PREP(MT753X_PAE_PORT_FW_MASK, x)\n\n \n#define MT753X_RGAC2\t\t\t0x2c\n#define  MT753X_R0E_PORT_FW_MASK\tGENMASK(18, 16)\n#define  MT753X_R0E_PORT_FW(x)\t\tFIELD_PREP(MT753X_R0E_PORT_FW_MASK, x)\n\nenum mt753x_bpdu_port_fw {\n\tMT753X_BPDU_FOLLOW_MFC,\n\tMT753X_BPDU_CPU_EXCLUDE = 4,\n\tMT753X_BPDU_CPU_INCLUDE = 5,\n\tMT753X_BPDU_CPU_ONLY = 6,\n\tMT753X_BPDU_DROP = 7,\n};\n\n \n#define MT7530_ATA1\t\t\t0x74\n#define  STATIC_EMP\t\t\t0\n#define  STATIC_ENT\t\t\t3\n#define MT7530_ATA2\t\t\t0x78\n#define  ATA2_IVL\t\t\tBIT(15)\n#define  ATA2_FID(x)\t\t\t(((x) & 0x7) << 12)\n\n \n#define MT7530_ATWD\t\t\t0x7c\n\n \n#define MT7530_ATC\t\t\t0x80\n#define  ATC_HASH\t\t\t(((x) & 0xfff) << 16)\n#define  ATC_BUSY\t\t\tBIT(15)\n#define  ATC_SRCH_END\t\t\tBIT(14)\n#define  ATC_SRCH_HIT\t\t\tBIT(13)\n#define  ATC_INVALID\t\t\tBIT(12)\n#define  ATC_MAT(x)\t\t\t(((x) & 0xf) << 8)\n#define  ATC_MAT_MACTAB\t\t\tATC_MAT(0)\n\nenum mt7530_fdb_cmd {\n\tMT7530_FDB_READ\t= 0,\n\tMT7530_FDB_WRITE = 1,\n\tMT7530_FDB_FLUSH = 2,\n\tMT7530_FDB_START = 4,\n\tMT7530_FDB_NEXT = 5,\n};\n\n \n#define MT7530_TSRA1\t\t\t0x84\n#define  MAC_BYTE_0\t\t\t24\n#define  MAC_BYTE_1\t\t\t16\n#define  MAC_BYTE_2\t\t\t8\n#define  MAC_BYTE_3\t\t\t0\n#define  MAC_BYTE_MASK\t\t\t0xff\n\n#define MT7530_TSRA2\t\t\t0x88\n#define  MAC_BYTE_4\t\t\t24\n#define  MAC_BYTE_5\t\t\t16\n#define  CVID\t\t\t\t0\n#define  CVID_MASK\t\t\t0xfff\n\n#define MT7530_ATRD\t\t\t0x8C\n#define\t AGE_TIMER\t\t\t24\n#define  AGE_TIMER_MASK\t\t\t0xff\n#define  PORT_MAP\t\t\t4\n#define  PORT_MAP_MASK\t\t\t0xff\n#define  ENT_STATUS\t\t\t2\n#define  ENT_STATUS_MASK\t\t0x3\n\n \n#define MT7530_VTCR\t\t\t0x90\n#define  VTCR_BUSY\t\t\tBIT(31)\n#define  VTCR_INVALID\t\t\tBIT(16)\n#define  VTCR_FUNC(x)\t\t\t(((x) & 0xf) << 12)\n#define  VTCR_VID\t\t\t((x) & 0xfff)\n\nenum mt7530_vlan_cmd {\n\t \n\tMT7530_VTCR_RD_VID = 0,\n\tMT7530_VTCR_WR_VID = 1,\n};\n\n \n#define MT7530_VAWD1\t\t\t0x94\n#define  PORT_STAG\t\t\tBIT(31)\n \n#define  IVL_MAC\t\t\tBIT(30)\n \n#define  EG_CON\t\t\t\tBIT(29)\n \n#define  VTAG_EN\t\t\tBIT(28)\n \n#define  PORT_MEM(x)\t\t\t(((x) & 0xff) << 16)\n \n#define  FID(x)\t\t\t\t(((x) & 0x7) << 1)\n \n#define  VLAN_VALID\t\t\tBIT(0)\n#define  PORT_MEM_SHFT\t\t\t16\n#define  PORT_MEM_MASK\t\t\t0xff\n\nenum mt7530_fid {\n\tFID_STANDALONE = 0,\n\tFID_BRIDGED = 1,\n};\n\n#define MT7530_VAWD2\t\t\t0x98\n \n#define  ETAG_CTRL_P(p, x)\t\t(((x) & 0x3) << ((p) << 1))\n#define  ETAG_CTRL_P_MASK(p)\t\tETAG_CTRL_P(p, 3)\n\nenum mt7530_vlan_egress_attr {\n\tMT7530_VLAN_EGRESS_UNTAG = 0,\n\tMT7530_VLAN_EGRESS_TAG = 2,\n\tMT7530_VLAN_EGRESS_STACK = 3,\n};\n\n \n#define MT7530_AAC\t\t\t0xa0\n \n#define  AGE_DIS\t\t\tBIT(20)\n \n#define  AGE_CNT_MASK\t\t\tGENMASK(19, 12)\n#define  AGE_CNT_MAX\t\t\t0xff\n#define  AGE_CNT(x)\t\t\t(AGE_CNT_MASK & ((x) << 12))\n \n#define  AGE_UNIT_MASK\t\t\tGENMASK(11, 0)\n#define  AGE_UNIT_MAX\t\t\t0xfff\n#define  AGE_UNIT(x)\t\t\t(AGE_UNIT_MASK & (x))\n\n \n#define MT7530_SSP_P(x)\t\t\t(0x2000 + ((x) * 0x100))\n#define  FID_PST(fid, state)\t\t(((state) & 0x3) << ((fid) * 2))\n#define  FID_PST_MASK(fid)\t\tFID_PST(fid, 0x3)\n\nenum mt7530_stp_state {\n\tMT7530_STP_DISABLED = 0,\n\tMT7530_STP_BLOCKING = 1,\n\tMT7530_STP_LISTENING = 1,\n\tMT7530_STP_LEARNING = 2,\n\tMT7530_STP_FORWARDING  = 3\n};\n\n \n#define MT7530_PCR_P(x)\t\t\t(0x2004 + ((x) * 0x100))\n#define  PORT_TX_MIR\t\t\tBIT(9)\n#define  PORT_RX_MIR\t\t\tBIT(8)\n#define  PORT_VLAN(x)\t\t\t((x) & 0x3)\n\nenum mt7530_port_mode {\n\t \n\tMT7530_PORT_MATRIX_MODE = PORT_VLAN(0),\n\n\t \n\tMT7530_PORT_FALLBACK_MODE = PORT_VLAN(1),\n\n\t \n\tMT7530_PORT_SECURITY_MODE = PORT_VLAN(3),\n};\n\n#define  PCR_MATRIX(x)\t\t\t(((x) & 0xff) << 16)\n#define  PORT_PRI(x)\t\t\t(((x) & 0x7) << 24)\n#define  EG_TAG(x)\t\t\t(((x) & 0x3) << 28)\n#define  PCR_MATRIX_MASK\t\tPCR_MATRIX(0xff)\n#define  PCR_MATRIX_CLR\t\t\tPCR_MATRIX(0)\n#define  PCR_PORT_VLAN_MASK\t\tPORT_VLAN(3)\n\n \n#define MT7530_PSC_P(x)\t\t\t(0x200c + ((x) * 0x100))\n#define  SA_DIS\t\t\t\tBIT(4)\n\n \n#define MT7530_PVC_P(x)\t\t\t(0x2010 + ((x) * 0x100))\n#define  PORT_SPEC_TAG\t\t\tBIT(5)\n#define  PVC_EG_TAG(x)\t\t\t(((x) & 0x7) << 8)\n#define  PVC_EG_TAG_MASK\t\tPVC_EG_TAG(7)\n#define  VLAN_ATTR(x)\t\t\t(((x) & 0x3) << 6)\n#define  VLAN_ATTR_MASK\t\t\tVLAN_ATTR(3)\n#define  ACC_FRM_MASK\t\t\tGENMASK(1, 0)\n\nenum mt7530_vlan_port_eg_tag {\n\tMT7530_VLAN_EG_DISABLED = 0,\n\tMT7530_VLAN_EG_CONSISTENT = 1,\n};\n\nenum mt7530_vlan_port_attr {\n\tMT7530_VLAN_USER = 0,\n\tMT7530_VLAN_TRANSPARENT = 3,\n};\n\nenum mt7530_vlan_port_acc_frm {\n\tMT7530_VLAN_ACC_ALL = 0,\n\tMT7530_VLAN_ACC_TAGGED = 1,\n\tMT7530_VLAN_ACC_UNTAGGED = 2,\n};\n\n#define  STAG_VPID\t\t\t(((x) & 0xffff) << 16)\n\n \n#define MT7530_PPBV1_P(x)\t\t(0x2014 + ((x) * 0x100))\n#define  G0_PORT_VID(x)\t\t\t(((x) & 0xfff) << 0)\n#define  G0_PORT_VID_MASK\t\tG0_PORT_VID(0xfff)\n#define  G0_PORT_VID_DEF\t\tG0_PORT_VID(0)\n\n \n#define MT7530_PMCR_P(x)\t\t(0x3000 + ((x) * 0x100))\n#define  PMCR_IFG_XMIT(x)\t\t(((x) & 0x3) << 18)\n#define  PMCR_EXT_PHY\t\t\tBIT(17)\n#define  PMCR_MAC_MODE\t\t\tBIT(16)\n#define  PMCR_FORCE_MODE\t\tBIT(15)\n#define  PMCR_TX_EN\t\t\tBIT(14)\n#define  PMCR_RX_EN\t\t\tBIT(13)\n#define  PMCR_BACKOFF_EN\t\tBIT(9)\n#define  PMCR_BACKPR_EN\t\t\tBIT(8)\n#define  PMCR_FORCE_EEE1G\t\tBIT(7)\n#define  PMCR_FORCE_EEE100\t\tBIT(6)\n#define  PMCR_TX_FC_EN\t\t\tBIT(5)\n#define  PMCR_RX_FC_EN\t\t\tBIT(4)\n#define  PMCR_FORCE_SPEED_1000\t\tBIT(3)\n#define  PMCR_FORCE_SPEED_100\t\tBIT(2)\n#define  PMCR_FORCE_FDX\t\t\tBIT(1)\n#define  PMCR_FORCE_LNK\t\t\tBIT(0)\n#define  PMCR_SPEED_MASK\t\t(PMCR_FORCE_SPEED_100 | \\\n\t\t\t\t\t PMCR_FORCE_SPEED_1000)\n#define  MT7531_FORCE_LNK\t\tBIT(31)\n#define  MT7531_FORCE_SPD\t\tBIT(30)\n#define  MT7531_FORCE_DPX\t\tBIT(29)\n#define  MT7531_FORCE_RX_FC\t\tBIT(28)\n#define  MT7531_FORCE_TX_FC\t\tBIT(27)\n#define  MT7531_FORCE_MODE\t\t(MT7531_FORCE_LNK | \\\n\t\t\t\t\t MT7531_FORCE_SPD | \\\n\t\t\t\t\t MT7531_FORCE_DPX | \\\n\t\t\t\t\t MT7531_FORCE_RX_FC | \\\n\t\t\t\t\t MT7531_FORCE_TX_FC)\n#define  PMCR_FORCE_MODE_ID(id)\t\t((((id) == ID_MT7531) || ((id) == ID_MT7988)) ?\t\\\n\t\t\t\t\t MT7531_FORCE_MODE : PMCR_FORCE_MODE)\n#define  PMCR_LINK_SETTINGS_MASK\t(PMCR_TX_EN | PMCR_FORCE_SPEED_1000 | \\\n\t\t\t\t\t PMCR_RX_EN | PMCR_FORCE_SPEED_100 | \\\n\t\t\t\t\t PMCR_TX_FC_EN | PMCR_RX_FC_EN | \\\n\t\t\t\t\t PMCR_FORCE_FDX | PMCR_FORCE_LNK | \\\n\t\t\t\t\t PMCR_FORCE_EEE1G | PMCR_FORCE_EEE100)\n#define  PMCR_CPU_PORT_SETTING(id)\t(PMCR_FORCE_MODE_ID((id)) | \\\n\t\t\t\t\t PMCR_IFG_XMIT(1) | PMCR_MAC_MODE | \\\n\t\t\t\t\t PMCR_BACKOFF_EN | PMCR_BACKPR_EN | \\\n\t\t\t\t\t PMCR_TX_EN | PMCR_RX_EN | \\\n\t\t\t\t\t PMCR_TX_FC_EN | PMCR_RX_FC_EN | \\\n\t\t\t\t\t PMCR_FORCE_SPEED_1000 | \\\n\t\t\t\t\t PMCR_FORCE_FDX | PMCR_FORCE_LNK)\n\n#define MT7530_PMEEECR_P(x)\t\t(0x3004 + (x) * 0x100)\n#define  WAKEUP_TIME_1000(x)\t\t(((x) & 0xFF) << 24)\n#define  WAKEUP_TIME_100(x)\t\t(((x) & 0xFF) << 16)\n#define  LPI_THRESH_MASK\t\tGENMASK(15, 4)\n#define  LPI_THRESH_SHT\t\t\t4\n#define  SET_LPI_THRESH(x)\t\t(((x) << LPI_THRESH_SHT) & LPI_THRESH_MASK)\n#define  GET_LPI_THRESH(x)\t\t(((x) & LPI_THRESH_MASK) >> LPI_THRESH_SHT)\n#define  LPI_MODE_EN\t\t\tBIT(0)\n\n#define MT7530_PMSR_P(x)\t\t(0x3008 + (x) * 0x100)\n#define  PMSR_EEE1G\t\t\tBIT(7)\n#define  PMSR_EEE100M\t\t\tBIT(6)\n#define  PMSR_RX_FC\t\t\tBIT(5)\n#define  PMSR_TX_FC\t\t\tBIT(4)\n#define  PMSR_SPEED_1000\t\tBIT(3)\n#define  PMSR_SPEED_100\t\t\tBIT(2)\n#define  PMSR_SPEED_10\t\t\t0x00\n#define  PMSR_SPEED_MASK\t\t(PMSR_SPEED_100 | PMSR_SPEED_1000)\n#define  PMSR_DPX\t\t\tBIT(1)\n#define  PMSR_LINK\t\t\tBIT(0)\n\n \n#define MT7531_DBG_CNT(x)\t\t(0x3018 + (x) * 0x100)\n#define  MT7531_DIS_CLR\t\t\tBIT(31)\n\n#define MT7530_GMACCR\t\t\t0x30e0\n#define  MAX_RX_JUMBO(x)\t\t((x) << 2)\n#define  MAX_RX_JUMBO_MASK\t\tGENMASK(5, 2)\n#define  MAX_RX_PKT_LEN_MASK\t\tGENMASK(1, 0)\n#define  MAX_RX_PKT_LEN_1522\t\t0x0\n#define  MAX_RX_PKT_LEN_1536\t\t0x1\n#define  MAX_RX_PKT_LEN_1552\t\t0x2\n#define  MAX_RX_PKT_LEN_JUMBO\t\t0x3\n\n \n#define MT7530_PORT_MIB_COUNTER(x)\t(0x4000 + (x) * 0x100)\n#define MT7530_MIB_CCR\t\t\t0x4fe0\n#define  CCR_MIB_ENABLE\t\t\tBIT(31)\n#define  CCR_RX_OCT_CNT_GOOD\t\tBIT(7)\n#define  CCR_RX_OCT_CNT_BAD\t\tBIT(6)\n#define  CCR_TX_OCT_CNT_GOOD\t\tBIT(5)\n#define  CCR_TX_OCT_CNT_BAD\t\tBIT(4)\n#define  CCR_MIB_FLUSH\t\t\t(CCR_RX_OCT_CNT_GOOD | \\\n\t\t\t\t\t CCR_RX_OCT_CNT_BAD | \\\n\t\t\t\t\t CCR_TX_OCT_CNT_GOOD | \\\n\t\t\t\t\t CCR_TX_OCT_CNT_BAD)\n#define  CCR_MIB_ACTIVATE\t\t(CCR_MIB_ENABLE | \\\n\t\t\t\t\t CCR_RX_OCT_CNT_GOOD | \\\n\t\t\t\t\t CCR_RX_OCT_CNT_BAD | \\\n\t\t\t\t\t CCR_TX_OCT_CNT_GOOD | \\\n\t\t\t\t\t CCR_TX_OCT_CNT_BAD)\n\n \n#define MT7531_SGMII_REG_BASE(p)\t(0x5000 + ((p) - 5) * 0x1000)\n#define MT7531_PHYA_CTRL_SIGNAL3\t0x128\n\n \n#define MT7530_SYS_CTRL\t\t\t0x7000\n#define  SYS_CTRL_PHY_RST\t\tBIT(2)\n#define  SYS_CTRL_SW_RST\t\tBIT(1)\n#define  SYS_CTRL_REG_RST\t\tBIT(0)\n\n \n#define MT7530_SYS_INT_EN\t\t0x7008\n\n \n#define MT7530_SYS_INT_STS\t\t0x700c\n\n \n#define MT7531_PHY_IAC\t\t\t0x701C\n#define  MT7531_PHY_ACS_ST\t\tBIT(31)\n#define  MT7531_MDIO_REG_ADDR_MASK\t(0x1f << 25)\n#define  MT7531_MDIO_PHY_ADDR_MASK\t(0x1f << 20)\n#define  MT7531_MDIO_CMD_MASK\t\t(0x3 << 18)\n#define  MT7531_MDIO_ST_MASK\t\t(0x3 << 16)\n#define  MT7531_MDIO_RW_DATA_MASK\t(0xffff)\n#define  MT7531_MDIO_REG_ADDR(x)\t(((x) & 0x1f) << 25)\n#define  MT7531_MDIO_DEV_ADDR(x)\t(((x) & 0x1f) << 25)\n#define  MT7531_MDIO_PHY_ADDR(x)\t(((x) & 0x1f) << 20)\n#define  MT7531_MDIO_CMD(x)\t\t(((x) & 0x3) << 18)\n#define  MT7531_MDIO_ST(x)\t\t(((x) & 0x3) << 16)\n\nenum mt7531_phy_iac_cmd {\n\tMT7531_MDIO_ADDR = 0,\n\tMT7531_MDIO_WRITE = 1,\n\tMT7531_MDIO_READ = 2,\n\tMT7531_MDIO_READ_CL45 = 3,\n};\n\n \nenum mt7531_mdio_st {\n\tMT7531_MDIO_ST_CL45 = 0,\n\tMT7531_MDIO_ST_CL22 = 1,\n};\n\n#define  MT7531_MDIO_CL22_READ\t\t(MT7531_MDIO_ST(MT7531_MDIO_ST_CL22) | \\\n\t\t\t\t\t MT7531_MDIO_CMD(MT7531_MDIO_READ))\n#define  MT7531_MDIO_CL22_WRITE\t\t(MT7531_MDIO_ST(MT7531_MDIO_ST_CL22) | \\\n\t\t\t\t\t MT7531_MDIO_CMD(MT7531_MDIO_WRITE))\n#define  MT7531_MDIO_CL45_ADDR\t\t(MT7531_MDIO_ST(MT7531_MDIO_ST_CL45) | \\\n\t\t\t\t\t MT7531_MDIO_CMD(MT7531_MDIO_ADDR))\n#define  MT7531_MDIO_CL45_READ\t\t(MT7531_MDIO_ST(MT7531_MDIO_ST_CL45) | \\\n\t\t\t\t\t MT7531_MDIO_CMD(MT7531_MDIO_READ))\n#define  MT7531_MDIO_CL45_WRITE\t\t(MT7531_MDIO_ST(MT7531_MDIO_ST_CL45) | \\\n\t\t\t\t\t MT7531_MDIO_CMD(MT7531_MDIO_WRITE))\n\n \n#define MT7531_CLKGEN_CTRL\t\t0x7500\n#define  CLK_SKEW_OUT(x)\t\t(((x) & 0x3) << 8)\n#define  CLK_SKEW_OUT_MASK\t\tGENMASK(9, 8)\n#define  CLK_SKEW_IN(x)\t\t\t(((x) & 0x3) << 6)\n#define  CLK_SKEW_IN_MASK\t\tGENMASK(7, 6)\n#define  RXCLK_NO_DELAY\t\t\tBIT(5)\n#define  TXCLK_NO_REVERSE\t\tBIT(4)\n#define  GP_MODE(x)\t\t\t(((x) & 0x3) << 1)\n#define  GP_MODE_MASK\t\t\tGENMASK(2, 1)\n#define  GP_CLK_EN\t\t\tBIT(0)\n\nenum mt7531_gp_mode {\n\tMT7531_GP_MODE_RGMII = 0,\n\tMT7531_GP_MODE_MII = 1,\n\tMT7531_GP_MODE_REV_MII = 2\n};\n\nenum mt7531_clk_skew {\n\tMT7531_CLK_SKEW_NO_CHG = 0,\n\tMT7531_CLK_SKEW_DLY_100PPS = 1,\n\tMT7531_CLK_SKEW_DLY_200PPS = 2,\n\tMT7531_CLK_SKEW_REVERSE = 3,\n};\n\n \n#define MT7530_HWTRAP\t\t\t0x7800\n#define  HWTRAP_XTAL_MASK\t\t(BIT(10) | BIT(9))\n#define  HWTRAP_XTAL_25MHZ\t\t(BIT(10) | BIT(9))\n#define  HWTRAP_XTAL_40MHZ\t\t(BIT(10))\n#define  HWTRAP_XTAL_20MHZ\t\t(BIT(9))\n\n#define MT7531_HWTRAP\t\t\t0x7800\n#define  HWTRAP_XTAL_FSEL_MASK\t\tBIT(7)\n#define  HWTRAP_XTAL_FSEL_25MHZ\t\tBIT(7)\n#define  HWTRAP_XTAL_FSEL_40MHZ\t\t0\n \n#define  XTAL_FSEL_S\t\t\t7\n#define  XTAL_FSEL_M\t\t\tBIT(7)\n#define  PHY_EN\t\t\t\tBIT(6)\n#define  CHG_STRAP\t\t\tBIT(8)\n\n \n#define MT7530_MHWTRAP\t\t\t0x7804\n#define  MHWTRAP_PHY0_SEL\t\tBIT(20)\n#define  MHWTRAP_MANUAL\t\t\tBIT(16)\n#define  MHWTRAP_P5_MAC_SEL\t\tBIT(13)\n#define  MHWTRAP_P6_DIS\t\t\tBIT(8)\n#define  MHWTRAP_P5_RGMII_MODE\t\tBIT(7)\n#define  MHWTRAP_P5_DIS\t\t\tBIT(6)\n#define  MHWTRAP_PHY_ACCESS\t\tBIT(5)\n\n \n#define MT7530_TOP_SIG_CTRL\t\t0x7808\n#define  TOP_SIG_CTRL_NORMAL\t\t(BIT(17) | BIT(16))\n\n#define MT7531_TOP_SIG_SR\t\t0x780c\n#define  PAD_DUAL_SGMII_EN\t\tBIT(1)\n#define  PAD_MCM_SMI_EN\t\t\tBIT(0)\n\n#define MT7530_IO_DRV_CR\t\t0x7810\n#define  P5_IO_CLK_DRV(x)\t\t((x) & 0x3)\n#define  P5_IO_DATA_DRV(x)\t\t(((x) & 0x3) << 4)\n\n#define MT7531_CHIP_REV\t\t\t0x781C\n\n#define MT7531_PLLGP_EN\t\t\t0x7820\n#define  EN_COREPLL\t\t\tBIT(2)\n#define  SW_CLKSW\t\t\tBIT(1)\n#define  SW_PLLGP\t\t\tBIT(0)\n\n#define MT7530_P6ECR\t\t\t0x7830\n#define  P6_INTF_MODE_MASK\t\t0x3\n#define  P6_INTF_MODE(x)\t\t((x) & 0x3)\n\n#define MT7531_PLLGP_CR0\t\t0x78a8\n#define  RG_COREPLL_EN\t\t\tBIT(22)\n#define  RG_COREPLL_POSDIV_S\t\t23\n#define  RG_COREPLL_POSDIV_M\t\t0x3800000\n#define  RG_COREPLL_SDM_PCW_S\t\t1\n#define  RG_COREPLL_SDM_PCW_M\t\t0x3ffffe\n#define  RG_COREPLL_SDM_PCW_CHG\t\tBIT(0)\n\n \n#define MT7531_ANA_PLLGP_CR2\t\t0x78b0\n#define MT7531_ANA_PLLGP_CR5\t\t0x78bc\n\n \n#define MT7530_TRGMII_RCK_CTRL\t\t0x7a00\n#define  RX_RST\t\t\t\tBIT(31)\n#define  RXC_DQSISEL\t\t\tBIT(30)\n#define  DQSI1_TAP_MASK\t\t\t(0x7f << 8)\n#define  DQSI0_TAP_MASK\t\t\t0x7f\n#define  DQSI1_TAP(x)\t\t\t(((x) & 0x7f) << 8)\n#define  DQSI0_TAP(x)\t\t\t((x) & 0x7f)\n\n#define MT7530_TRGMII_RCK_RTT\t\t0x7a04\n#define  DQS1_GATE\t\t\tBIT(31)\n#define  DQS0_GATE\t\t\tBIT(30)\n\n#define MT7530_TRGMII_RD(x)\t\t(0x7a10 + (x) * 8)\n#define  BSLIP_EN\t\t\tBIT(31)\n#define  EDGE_CHK\t\t\tBIT(30)\n#define  RD_TAP_MASK\t\t\t0x7f\n#define  RD_TAP(x)\t\t\t((x) & 0x7f)\n\n#define MT7530_TRGMII_TXCTRL\t\t0x7a40\n#define  TRAIN_TXEN\t\t\tBIT(31)\n#define  TXC_INV\t\t\tBIT(30)\n#define  TX_RST\t\t\t\tBIT(28)\n\n#define MT7530_TRGMII_TD_ODT(i)\t\t(0x7a54 + 8 * (i))\n#define  TD_DM_DRVP(x)\t\t\t((x) & 0xf)\n#define  TD_DM_DRVN(x)\t\t\t(((x) & 0xf) << 4)\n\n#define MT7530_TRGMII_TCK_CTRL\t\t0x7a78\n#define  TCK_TAP(x)\t\t\t(((x) & 0xf) << 8)\n\n#define MT7530_P5RGMIIRXCR\t\t0x7b00\n#define  CSR_RGMII_EDGE_ALIGN\t\tBIT(8)\n#define  CSR_RGMII_RXC_0DEG_CFG(x)\t((x) & 0xf)\n\n#define MT7530_P5RGMIITXCR\t\t0x7b04\n#define  CSR_RGMII_TXC_CFG(x)\t\t((x) & 0x1f)\n\n \n#define MT7531_GPIO_MODE0\t\t0x7c0c\n#define  MT7531_GPIO0_MASK\t\tGENMASK(3, 0)\n#define  MT7531_GPIO0_INTERRUPT\t\t1\n\n#define MT7531_GPIO_MODE1\t\t0x7c10\n#define  MT7531_GPIO11_RG_RXD2_MASK\tGENMASK(15, 12)\n#define  MT7531_EXT_P_MDC_11\t\t(2 << 12)\n#define  MT7531_GPIO12_RG_RXD3_MASK\tGENMASK(19, 16)\n#define  MT7531_EXT_P_MDIO_12\t\t(2 << 16)\n\n \n\n \n#define MT7530_LED_EN\t\t\t0x7d00\n \n#define MT7530_LED_IO_MODE\t\t0x7d04\n \n#define MT7530_LED_GPIO_DIR\t\t0x7d10\n \n#define MT7530_LED_GPIO_OE\t\t0x7d14\n \n#define MT7530_LED_GPIO_DATA\t\t0x7d18\n\n#define MT7530_CREV\t\t\t0x7ffc\n#define  CHIP_NAME_SHIFT\t\t16\n#define  MT7530_ID\t\t\t0x7530\n\n#define MT7531_CREV\t\t\t0x781C\n#define  CHIP_REV_M\t\t\t0x0f\n#define  MT7531_ID\t\t\t0x7531\n\n \n#define CORE_PLL_GROUP2\t\t\t0x401\n#define  RG_SYSPLL_EN_NORMAL\t\tBIT(15)\n#define  RG_SYSPLL_VODEN\t\tBIT(14)\n#define  RG_SYSPLL_LF\t\t\tBIT(13)\n#define  RG_SYSPLL_RST_DLY(x)\t\t(((x) & 0x3) << 12)\n#define  RG_SYSPLL_LVROD_EN\t\tBIT(10)\n#define  RG_SYSPLL_PREDIV(x)\t\t(((x) & 0x3) << 8)\n#define  RG_SYSPLL_POSDIV(x)\t\t(((x) & 0x3) << 5)\n#define  RG_SYSPLL_FBKSEL\t\tBIT(4)\n#define  RT_SYSPLL_EN_AFE_OLT\t\tBIT(0)\n\n#define CORE_PLL_GROUP4\t\t\t0x403\n#define  RG_SYSPLL_DDSFBK_EN\t\tBIT(12)\n#define  RG_SYSPLL_BIAS_EN\t\tBIT(11)\n#define  RG_SYSPLL_BIAS_LPF_EN\t\tBIT(10)\n#define  MT7531_PHY_PLL_OFF\t\tBIT(5)\n#define  MT7531_PHY_PLL_BYPASS_MODE\tBIT(4)\n\n#define MT753X_CTRL_PHY_ADDR\t\t0\n\n#define CORE_PLL_GROUP5\t\t\t0x404\n#define  RG_LCDDS_PCW_NCPO1(x)\t\t((x) & 0xffff)\n\n#define CORE_PLL_GROUP6\t\t\t0x405\n#define  RG_LCDDS_PCW_NCPO0(x)\t\t((x) & 0xffff)\n\n#define CORE_PLL_GROUP7\t\t\t0x406\n#define  RG_LCDDS_PWDB\t\t\tBIT(15)\n#define  RG_LCDDS_ISO_EN\t\tBIT(13)\n#define  RG_LCCDS_C(x)\t\t\t(((x) & 0x7) << 4)\n#define  RG_LCDDS_PCW_NCPO_CHG\t\tBIT(3)\n\n#define CORE_PLL_GROUP10\t\t0x409\n#define  RG_LCDDS_SSC_DELTA(x)\t\t((x) & 0xfff)\n\n#define CORE_PLL_GROUP11\t\t0x40a\n#define  RG_LCDDS_SSC_DELTA1(x)\t\t((x) & 0xfff)\n\n#define CORE_GSWPLL_GRP1\t\t0x40d\n#define  RG_GSWPLL_PREDIV(x)\t\t(((x) & 0x3) << 14)\n#define  RG_GSWPLL_POSDIV_200M(x)\t(((x) & 0x3) << 12)\n#define  RG_GSWPLL_EN_PRE\t\tBIT(11)\n#define  RG_GSWPLL_FBKSEL\t\tBIT(10)\n#define  RG_GSWPLL_BP\t\t\tBIT(9)\n#define  RG_GSWPLL_BR\t\t\tBIT(8)\n#define  RG_GSWPLL_FBKDIV_200M(x)\t((x) & 0xff)\n\n#define CORE_GSWPLL_GRP2\t\t0x40e\n#define  RG_GSWPLL_POSDIV_500M(x)\t(((x) & 0x3) << 8)\n#define  RG_GSWPLL_FBKDIV_500M(x)\t((x) & 0xff)\n\n#define CORE_TRGMII_GSW_CLK_CG\t\t0x410\n#define  REG_GSWCK_EN\t\t\tBIT(0)\n#define  REG_TRGMIICK_EN\t\tBIT(1)\n\n#define MIB_DESC(_s, _o, _n)\t\\\n\t{\t\t\t\\\n\t\t.size = (_s),\t\\\n\t\t.offset = (_o),\t\\\n\t\t.name = (_n),\t\\\n\t}\n\nstruct mt7530_mib_desc {\n\tunsigned int size;\n\tunsigned int offset;\n\tconst char *name;\n};\n\nstruct mt7530_fdb {\n\tu16 vid;\n\tu8 port_mask;\n\tu8 aging;\n\tu8 mac[6];\n\tbool noarp;\n};\n\n \nstruct mt7530_port {\n\tbool enable;\n\tu32 pm;\n\tu16 pvid;\n\tstruct phylink_pcs *sgmii_pcs;\n};\n\n \nenum p5_interface_select {\n\tP5_DISABLED = 0,\n\tP5_INTF_SEL_PHY_P0,\n\tP5_INTF_SEL_PHY_P4,\n\tP5_INTF_SEL_GMAC5,\n\tP5_INTF_SEL_GMAC5_SGMII,\n};\n\nstruct mt7530_priv;\n\nstruct mt753x_pcs {\n\tstruct phylink_pcs pcs;\n\tstruct mt7530_priv *priv;\n\tint port;\n};\n\n \nstruct mt753x_info {\n\tenum mt753x_id id;\n\n\tconst struct phylink_pcs_ops *pcs_ops;\n\n\tint (*sw_setup)(struct dsa_switch *ds);\n\tint (*phy_read_c22)(struct mt7530_priv *priv, int port, int regnum);\n\tint (*phy_write_c22)(struct mt7530_priv *priv, int port, int regnum,\n\t\t\t     u16 val);\n\tint (*phy_read_c45)(struct mt7530_priv *priv, int port, int devad,\n\t\t\t    int regnum);\n\tint (*phy_write_c45)(struct mt7530_priv *priv, int port, int devad,\n\t\t\t     int regnum, u16 val);\n\tint (*pad_setup)(struct dsa_switch *ds, phy_interface_t interface);\n\tint (*cpu_port_config)(struct dsa_switch *ds, int port);\n\tvoid (*mac_port_get_caps)(struct dsa_switch *ds, int port,\n\t\t\t\t  struct phylink_config *config);\n\tvoid (*mac_port_validate)(struct dsa_switch *ds, int port,\n\t\t\t\t  phy_interface_t interface,\n\t\t\t\t  unsigned long *supported);\n\tint (*mac_port_config)(struct dsa_switch *ds, int port,\n\t\t\t       unsigned int mode,\n\t\t\t       phy_interface_t interface);\n};\n\n \nstruct mt7530_priv {\n\tstruct device\t\t*dev;\n\tstruct dsa_switch\t*ds;\n\tstruct mii_bus\t\t*bus;\n\tstruct regmap\t\t*regmap;\n\tstruct reset_control\t*rstc;\n\tstruct regulator\t*core_pwr;\n\tstruct regulator\t*io_pwr;\n\tstruct gpio_desc\t*reset;\n\tconst struct mt753x_info *info;\n\tunsigned int\t\tid;\n\tbool\t\t\tmcm;\n\tphy_interface_t\t\tp6_interface;\n\tphy_interface_t\t\tp5_interface;\n\tunsigned int\t\tp5_intf_sel;\n\tu8\t\t\tmirror_rx;\n\tu8\t\t\tmirror_tx;\n\tstruct mt7530_port\tports[MT7530_NUM_PORTS];\n\tstruct mt753x_pcs\tpcs[MT7530_NUM_PORTS];\n\t \n\tstruct mutex reg_mutex;\n\tint irq;\n\tstruct irq_domain *irq_domain;\n\tu32 irq_enable;\n\tint (*create_sgmii)(struct mt7530_priv *priv, bool dual_sgmii);\n};\n\nstruct mt7530_hw_vlan_entry {\n\tint port;\n\tu8  old_members;\n\tbool untagged;\n};\n\nstatic inline void mt7530_hw_vlan_entry_init(struct mt7530_hw_vlan_entry *e,\n\t\t\t\t\t     int port, bool untagged)\n{\n\te->port = port;\n\te->untagged = untagged;\n}\n\ntypedef void (*mt7530_vlan_op)(struct mt7530_priv *,\n\t\t\t       struct mt7530_hw_vlan_entry *);\n\nstruct mt7530_hw_stats {\n\tconst char\t*string;\n\tu16\t\treg;\n\tu8\t\tsizeof_stat;\n};\n\nstruct mt7530_dummy_poll {\n\tstruct mt7530_priv *priv;\n\tu32 reg;\n};\n\nstatic inline void INIT_MT7530_DUMMY_POLL(struct mt7530_dummy_poll *p,\n\t\t\t\t\t  struct mt7530_priv *priv, u32 reg)\n{\n\tp->priv = priv;\n\tp->reg = reg;\n}\n\nint mt7530_probe_common(struct mt7530_priv *priv);\nvoid mt7530_remove_common(struct mt7530_priv *priv);\n\nextern const struct dsa_switch_ops mt7530_switch_ops;\nextern const struct mt753x_info mt753x_table[];\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}