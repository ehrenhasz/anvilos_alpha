{
  "module_name": "rzn1_a5psw.h",
  "hash_id": "627cf28386030cd32da43c2d099ac236d0ebdd596777ad2e47488150b630547e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/rzn1_a5psw.h",
  "human_readable_source": " \n \n\n#include <linux/clk.h>\n#include <linux/debugfs.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/of_mdio.h>\n#include <linux/platform_device.h>\n#include <linux/pcs-rzn1-miic.h>\n#include <net/dsa.h>\n\n#define A5PSW_REVISION\t\t\t0x0\n#define A5PSW_PORT_OFFSET(port)\t\t(0x400 * (port))\n\n#define A5PSW_PORT_ENA\t\t\t0x8\n#define A5PSW_PORT_ENA_TX(port)\t\tBIT(port)\n#define A5PSW_PORT_ENA_RX_SHIFT\t\t16\n#define A5PSW_PORT_ENA_TX_RX(port)\t(BIT((port) + A5PSW_PORT_ENA_RX_SHIFT) | \\\n\t\t\t\t\t BIT(port))\n#define A5PSW_UCAST_DEF_MASK\t\t0xC\n\n#define A5PSW_VLAN_VERIFY\t\t0x10\n#define A5PSW_VLAN_VERI_SHIFT\t\t0\n#define A5PSW_VLAN_DISC_SHIFT\t\t16\n\n#define A5PSW_BCAST_DEF_MASK\t\t0x14\n#define A5PSW_MCAST_DEF_MASK\t\t0x18\n\n#define A5PSW_INPUT_LEARN\t\t0x1C\n#define A5PSW_INPUT_LEARN_DIS(p)\tBIT((p) + 16)\n#define A5PSW_INPUT_LEARN_BLOCK(p)\tBIT(p)\n\n#define A5PSW_MGMT_CFG\t\t\t0x20\n#define A5PSW_MGMT_CFG_ENABLE\t\tBIT(6)\n\n#define A5PSW_MODE_CFG\t\t\t0x24\n#define A5PSW_MODE_STATS_RESET\t\tBIT(31)\n\n#define A5PSW_VLAN_IN_MODE\t\t0x28\n#define A5PSW_VLAN_IN_MODE_PORT_SHIFT(port)\t((port) * 2)\n#define A5PSW_VLAN_IN_MODE_PORT(port)\t\t(GENMASK(1, 0) << \\\n\t\t\t\t\tA5PSW_VLAN_IN_MODE_PORT_SHIFT(port))\n#define A5PSW_VLAN_IN_MODE_SINGLE_PASSTHROUGH\t0x0\n#define A5PSW_VLAN_IN_MODE_SINGLE_REPLACE\t0x1\n#define A5PSW_VLAN_IN_MODE_TAG_ALWAYS\t\t0x2\n\n#define A5PSW_VLAN_OUT_MODE\t\t0x2C\n#define A5PSW_VLAN_OUT_MODE_PORT_SHIFT(port)\t((port) * 2)\n#define A5PSW_VLAN_OUT_MODE_PORT(port)\t(GENMASK(1, 0) << \\\n\t\t\t\t\tA5PSW_VLAN_OUT_MODE_PORT_SHIFT(port))\n#define A5PSW_VLAN_OUT_MODE_DIS\t\t0x0\n#define A5PSW_VLAN_OUT_MODE_STRIP\t0x1\n#define A5PSW_VLAN_OUT_MODE_TAG_THROUGH\t0x2\n#define A5PSW_VLAN_OUT_MODE_TRANSPARENT\t0x3\n\n#define A5PSW_VLAN_IN_MODE_ENA\t\t0x30\n#define A5PSW_VLAN_TAG_ID\t\t0x34\n\n#define A5PSW_SYSTEM_TAGINFO(port)\t(0x200 + 4 * (port))\n\n#define A5PSW_AUTH_PORT(port)\t\t(0x240 + 4 * (port))\n#define A5PSW_AUTH_PORT_AUTHORIZED\tBIT(0)\n\n#define A5PSW_VLAN_RES(entry)\t\t(0x280 + 4 * (entry))\n#define A5PSW_VLAN_RES_WR_PORTMASK\tBIT(30)\n#define A5PSW_VLAN_RES_WR_TAGMASK\tBIT(29)\n#define A5PSW_VLAN_RES_RD_TAGMASK\tBIT(28)\n#define A5PSW_VLAN_RES_VLANID\t\tGENMASK(16, 5)\n#define A5PSW_VLAN_RES_PORTMASK\t\tGENMASK(4, 0)\n\n#define A5PSW_RXMATCH_CONFIG(port)\t(0x3e80 + 4 * (port))\n#define A5PSW_RXMATCH_CONFIG_PATTERN(p)\tBIT(p)\n\n#define A5PSW_PATTERN_CTRL(p)\t\t(0x3eb0 + 4  * (p))\n#define A5PSW_PATTERN_CTRL_MGMTFWD\tBIT(1)\n\n#define A5PSW_LK_CTRL\t\t0x400\n#define A5PSW_LK_ADDR_CTRL_BLOCKING\tBIT(0)\n#define A5PSW_LK_ADDR_CTRL_LEARNING\tBIT(1)\n#define A5PSW_LK_ADDR_CTRL_AGEING\tBIT(2)\n#define A5PSW_LK_ADDR_CTRL_ALLOW_MIGR\tBIT(3)\n#define A5PSW_LK_ADDR_CTRL_CLEAR_TABLE\tBIT(6)\n\n#define A5PSW_LK_ADDR_CTRL\t\t0x408\n#define A5PSW_LK_ADDR_CTRL_BUSY\t\tBIT(31)\n#define A5PSW_LK_ADDR_CTRL_DELETE_PORT\tBIT(30)\n#define A5PSW_LK_ADDR_CTRL_CLEAR\tBIT(29)\n#define A5PSW_LK_ADDR_CTRL_LOOKUP\tBIT(28)\n#define A5PSW_LK_ADDR_CTRL_WAIT\t\tBIT(27)\n#define A5PSW_LK_ADDR_CTRL_READ\t\tBIT(26)\n#define A5PSW_LK_ADDR_CTRL_WRITE\tBIT(25)\n#define A5PSW_LK_ADDR_CTRL_ADDRESS\tGENMASK(12, 0)\n\n#define A5PSW_LK_DATA_LO\t\t0x40C\n#define A5PSW_LK_DATA_HI\t\t0x410\n#define A5PSW_LK_DATA_HI_VALID\t\tBIT(16)\n#define A5PSW_LK_DATA_HI_PORT\t\tBIT(16)\n\n#define A5PSW_LK_LEARNCOUNT\t\t0x418\n#define A5PSW_LK_LEARNCOUNT_COUNT\tGENMASK(13, 0)\n#define A5PSW_LK_LEARNCOUNT_MODE\tGENMASK(31, 30)\n#define A5PSW_LK_LEARNCOUNT_MODE_SET\t0x0\n#define A5PSW_LK_LEARNCOUNT_MODE_INC\t0x1\n#define A5PSW_LK_LEARNCOUNT_MODE_DEC\t0x2\n\n#define A5PSW_MGMT_TAG_CFG\t\t0x480\n#define A5PSW_MGMT_TAG_CFG_TAGFIELD\tGENMASK(31, 16)\n#define A5PSW_MGMT_TAG_CFG_ALL_FRAMES\tBIT(1)\n#define A5PSW_MGMT_TAG_CFG_ENABLE\tBIT(0)\n\n#define A5PSW_LK_AGETIME\t\t0x41C\n#define A5PSW_LK_AGETIME_MASK\t\tGENMASK(23, 0)\n\n#define A5PSW_MDIO_CFG_STATUS\t\t0x700\n#define A5PSW_MDIO_CFG_STATUS_CLKDIV\tGENMASK(15, 7)\n#define A5PSW_MDIO_CFG_STATUS_READERR\tBIT(1)\n#define A5PSW_MDIO_CFG_STATUS_BUSY\tBIT(0)\n\n#define A5PSW_MDIO_COMMAND\t\t0x704\n \n#define A5PSW_MDIO_COMMAND_READ\t\tBIT(15)\n#define A5PSW_MDIO_COMMAND_PHY_ADDR\tGENMASK(9, 5)\n#define A5PSW_MDIO_COMMAND_REG_ADDR\tGENMASK(4, 0)\n\n#define A5PSW_MDIO_DATA\t\t\t0x708\n#define A5PSW_MDIO_DATA_MASK\t\tGENMASK(15, 0)\n\n#define A5PSW_CMD_CFG(port)\t\t(0x808 + A5PSW_PORT_OFFSET(port))\n#define A5PSW_CMD_CFG_CNTL_FRM_ENA\tBIT(23)\n#define A5PSW_CMD_CFG_SW_RESET\t\tBIT(13)\n#define A5PSW_CMD_CFG_TX_CRC_APPEND\tBIT(11)\n#define A5PSW_CMD_CFG_HD_ENA\t\tBIT(10)\n#define A5PSW_CMD_CFG_PAUSE_IGNORE\tBIT(8)\n#define A5PSW_CMD_CFG_CRC_FWD\t\tBIT(6)\n#define A5PSW_CMD_CFG_ETH_SPEED\t\tBIT(3)\n#define A5PSW_CMD_CFG_RX_ENA\t\tBIT(1)\n#define A5PSW_CMD_CFG_TX_ENA\t\tBIT(0)\n\n#define A5PSW_FRM_LENGTH(port)\t\t(0x814 + A5PSW_PORT_OFFSET(port))\n#define A5PSW_FRM_LENGTH_MASK\t\tGENMASK(13, 0)\n\n#define A5PSW_STATUS(port)\t\t(0x840 + A5PSW_PORT_OFFSET(port))\n\n#define A5PSW_STATS_HIWORD\t\t0x900\n\n \n#define A5PSW_aFramesTransmittedOK\t\t0x868\n#define A5PSW_aFramesReceivedOK\t\t\t0x86C\n#define A5PSW_aFrameCheckSequenceErrors\t\t0x870\n#define A5PSW_aAlignmentErrors\t\t\t0x874\n#define A5PSW_aOctetsTransmittedOK\t\t0x878\n#define A5PSW_aOctetsReceivedOK\t\t\t0x87C\n#define A5PSW_aTxPAUSEMACCtrlFrames\t\t0x880\n#define A5PSW_aRxPAUSEMACCtrlFrames\t\t0x884\n \n#define A5PSW_ifInErrors\t\t\t0x888\n#define A5PSW_ifOutErrors\t\t\t0x88C\n#define A5PSW_ifInUcastPkts\t\t\t0x890\n#define A5PSW_ifInMulticastPkts\t\t\t0x894\n#define A5PSW_ifInBroadcastPkts\t\t\t0x898\n#define A5PSW_ifOutDiscards\t\t\t0x89C\n#define A5PSW_ifOutUcastPkts\t\t\t0x8A0\n#define A5PSW_ifOutMulticastPkts\t\t0x8A4\n#define A5PSW_ifOutBroadcastPkts\t\t0x8A8\n \n#define A5PSW_etherStatsDropEvents\t\t0x8AC\n#define A5PSW_etherStatsOctets\t\t\t0x8B0\n#define A5PSW_etherStatsPkts\t\t\t0x8B4\n#define A5PSW_etherStatsUndersizePkts\t\t0x8B8\n#define A5PSW_etherStatsOversizePkts\t\t0x8BC\n#define A5PSW_etherStatsPkts64Octets\t\t0x8C0\n#define A5PSW_etherStatsPkts65to127Octets\t0x8C4\n#define A5PSW_etherStatsPkts128to255Octets\t0x8C8\n#define A5PSW_etherStatsPkts256to511Octets\t0x8CC\n#define A5PSW_etherStatsPkts512to1023Octets\t0x8D0\n#define A5PSW_etherStatsPkts1024to1518Octets\t0x8D4\n#define A5PSW_etherStatsPkts1519toXOctets\t0x8D8\n#define A5PSW_etherStatsJabbers\t\t\t0x8DC\n#define A5PSW_etherStatsFragments\t\t0x8E0\n\n#define A5PSW_VLANReceived\t\t\t0x8E8\n#define A5PSW_VLANTransmitted\t\t\t0x8EC\n\n#define A5PSW_aDeferred\t\t\t\t0x910\n#define A5PSW_aMultipleCollisions\t\t0x914\n#define A5PSW_aSingleCollisions\t\t\t0x918\n#define A5PSW_aLateCollisions\t\t\t0x91C\n#define A5PSW_aExcessiveCollisions\t\t0x920\n#define A5PSW_aCarrierSenseErrors\t\t0x924\n\n#define A5PSW_VLAN_TAG(prio, id)\t(((prio) << 12) | (id))\n#define A5PSW_PORTS_NUM\t\t\t5\n#define A5PSW_CPU_PORT\t\t\t(A5PSW_PORTS_NUM - 1)\n#define A5PSW_MDIO_DEF_FREQ\t\t2500000\n#define A5PSW_MDIO_TIMEOUT\t\t100\n#define A5PSW_JUMBO_LEN\t\t\t(10 * SZ_1K)\n#define A5PSW_MDIO_CLK_DIV_MIN\t\t5\n#define A5PSW_TAG_LEN\t\t\t8\n#define A5PSW_VLAN_COUNT\t\t32\n\n \n#define A5PSW_EXTRA_MTU_LEN\t\t(A5PSW_TAG_LEN + 8)\n#define A5PSW_MAX_MTU\t\t\t(A5PSW_JUMBO_LEN - A5PSW_EXTRA_MTU_LEN)\n\n#define A5PSW_PATTERN_MGMTFWD\t\t0\n\n#define A5PSW_LK_BUSY_USEC_POLL\t\t10\n#define A5PSW_CTRL_TIMEOUT\t\t1000\n#define A5PSW_TABLE_ENTRIES\t\t8192\n\nstruct fdb_entry {\n\tu8 mac[ETH_ALEN];\n\tu16 valid:1;\n\tu16 is_static:1;\n\tu16 prio:3;\n\tu16 port_mask:5;\n\tu16 reserved:6;\n} __packed;\n\nunion lk_data {\n\tstruct {\n\t\tu32 lo;\n\t\tu32 hi;\n\t};\n\tstruct fdb_entry entry;\n};\n\n \nstruct a5psw {\n\tvoid __iomem *base;\n\tstruct clk *hclk;\n\tstruct clk *clk;\n\tstruct device *dev;\n\tstruct mii_bus\t*mii_bus;\n\tstruct phylink_pcs *pcs[A5PSW_PORTS_NUM - 1];\n\tstruct dsa_switch ds;\n\tstruct mutex lk_lock;\n\tspinlock_t reg_lock;\n\tu32 bridged_ports;\n\tstruct net_device *br_dev;\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}