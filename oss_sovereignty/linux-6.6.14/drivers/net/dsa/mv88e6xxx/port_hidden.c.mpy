{
  "module_name": "port_hidden.c",
  "hash_id": "fba92414307d9a1949c5aa957d67eb75a1214cd8b1001a85589b1980f03d1616",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/mv88e6xxx/port_hidden.c",
  "human_readable_source": "\n \n\n#include <linux/bitfield.h>\n\n#include \"chip.h\"\n#include \"port.h\"\n\n \nint mv88e6xxx_port_hidden_write(struct mv88e6xxx_chip *chip, int block,\n\t\t\t\tint port, int reg, u16 val)\n{\n\tu16 ctrl;\n\tint err;\n\n\terr = mv88e6xxx_port_write(chip, MV88E6XXX_PORT_RESERVED_1A_DATA_PORT,\n\t\t\t\t   MV88E6XXX_PORT_RESERVED_1A, val);\n\tif (err)\n\t\treturn err;\n\n\tctrl = MV88E6XXX_PORT_RESERVED_1A_BUSY |\n\t       MV88E6XXX_PORT_RESERVED_1A_WRITE |\n\t       block << MV88E6XXX_PORT_RESERVED_1A_BLOCK_SHIFT |\n\t       port << MV88E6XXX_PORT_RESERVED_1A_PORT_SHIFT |\n\t       reg;\n\n\treturn mv88e6xxx_port_write(chip, MV88E6XXX_PORT_RESERVED_1A_CTRL_PORT,\n\t\t\t\t    MV88E6XXX_PORT_RESERVED_1A, ctrl);\n}\n\nint mv88e6xxx_port_hidden_wait(struct mv88e6xxx_chip *chip)\n{\n\tint bit = __bf_shf(MV88E6XXX_PORT_RESERVED_1A_BUSY);\n\n\treturn mv88e6xxx_port_wait_bit(chip,\n\t\t\t\t       MV88E6XXX_PORT_RESERVED_1A_CTRL_PORT,\n\t\t\t\t       MV88E6XXX_PORT_RESERVED_1A, bit, 0);\n}\n\nint mv88e6xxx_port_hidden_read(struct mv88e6xxx_chip *chip, int block, int port,\n\t\t\t       int reg, u16 *val)\n{\n\tu16 ctrl;\n\tint err;\n\n\tctrl = MV88E6XXX_PORT_RESERVED_1A_BUSY |\n\t       MV88E6XXX_PORT_RESERVED_1A_READ |\n\t       block << MV88E6XXX_PORT_RESERVED_1A_BLOCK_SHIFT |\n\t       port << MV88E6XXX_PORT_RESERVED_1A_PORT_SHIFT |\n\t       reg;\n\n\terr = mv88e6xxx_port_write(chip, MV88E6XXX_PORT_RESERVED_1A_CTRL_PORT,\n\t\t\t\t   MV88E6XXX_PORT_RESERVED_1A, ctrl);\n\tif (err)\n\t\treturn err;\n\n\terr = mv88e6xxx_port_hidden_wait(chip);\n\tif (err)\n\t\treturn err;\n\n\treturn mv88e6xxx_port_read(chip, MV88E6XXX_PORT_RESERVED_1A_DATA_PORT,\n\t\t\t\t   MV88E6XXX_PORT_RESERVED_1A, val);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}