{
  "module_name": "qca8k.h",
  "hash_id": "5d2c33b32247cb3e587a0462264e5e8a4e0dfb37eec41ea3018e8e2fcdd260e5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/dsa/qca/qca8k.h",
  "human_readable_source": " \n \n\n#ifndef __QCA8K_H\n#define __QCA8K_H\n\n#include <linux/delay.h>\n#include <linux/regmap.h>\n#include <linux/gpio.h>\n#include <linux/leds.h>\n#include <linux/dsa/tag_qca.h>\n\n#define QCA8K_ETHERNET_MDIO_PRIORITY\t\t\t7\n#define QCA8K_ETHERNET_PHY_PRIORITY\t\t\t6\n#define QCA8K_ETHERNET_TIMEOUT\t\t\t\t5\n\n#define QCA8K_NUM_PORTS\t\t\t\t\t7\n#define QCA8K_NUM_CPU_PORTS\t\t\t\t2\n#define QCA8K_MAX_MTU\t\t\t\t\t9000\n#define QCA8K_NUM_LAGS\t\t\t\t\t4\n#define QCA8K_NUM_PORTS_FOR_LAG\t\t\t\t4\n\n#define PHY_ID_QCA8327\t\t\t\t\t0x004dd034\n#define QCA8K_ID_QCA8327\t\t\t\t0x12\n#define PHY_ID_QCA8337\t\t\t\t\t0x004dd036\n#define QCA8K_ID_QCA8337\t\t\t\t0x13\n\n#define QCA8K_QCA832X_MIB_COUNT\t\t\t\t39\n#define QCA8K_QCA833X_MIB_COUNT\t\t\t\t41\n\n#define QCA8K_BUSY_WAIT_TIMEOUT\t\t\t\t2000\n\n#define QCA8K_NUM_FDB_RECORDS\t\t\t\t2048\n\n#define QCA8K_PORT_VID_DEF\t\t\t\t1\n\n \n#define QCA8K_REG_MASK_CTRL\t\t\t\t0x000\n#define   QCA8K_MASK_CTRL_REV_ID_MASK\t\t\tGENMASK(7, 0)\n#define   QCA8K_MASK_CTRL_REV_ID(x)\t\t\tFIELD_GET(QCA8K_MASK_CTRL_REV_ID_MASK, x)\n#define   QCA8K_MASK_CTRL_DEVICE_ID_MASK\t\tGENMASK(15, 8)\n#define   QCA8K_MASK_CTRL_DEVICE_ID(x)\t\t\tFIELD_GET(QCA8K_MASK_CTRL_DEVICE_ID_MASK, x)\n#define QCA8K_REG_PORT0_PAD_CTRL\t\t\t0x004\n#define   QCA8K_PORT0_PAD_MAC06_EXCHANGE_EN\t\tBIT(31)\n#define   QCA8K_PORT0_PAD_SGMII_RXCLK_FALLING_EDGE\tBIT(19)\n#define   QCA8K_PORT0_PAD_SGMII_TXCLK_FALLING_EDGE\tBIT(18)\n#define QCA8K_REG_PORT5_PAD_CTRL\t\t\t0x008\n#define QCA8K_REG_PORT6_PAD_CTRL\t\t\t0x00c\n#define   QCA8K_PORT_PAD_RGMII_EN\t\t\tBIT(26)\n#define   QCA8K_PORT_PAD_RGMII_TX_DELAY_MASK\t\tGENMASK(23, 22)\n#define   QCA8K_PORT_PAD_RGMII_TX_DELAY(x)\t\tFIELD_PREP(QCA8K_PORT_PAD_RGMII_TX_DELAY_MASK, x)\n#define   QCA8K_PORT_PAD_RGMII_RX_DELAY_MASK\t\tGENMASK(21, 20)\n#define   QCA8K_PORT_PAD_RGMII_RX_DELAY(x)\t\tFIELD_PREP(QCA8K_PORT_PAD_RGMII_RX_DELAY_MASK, x)\n#define\t  QCA8K_PORT_PAD_RGMII_TX_DELAY_EN\t\tBIT(25)\n#define   QCA8K_PORT_PAD_RGMII_RX_DELAY_EN\t\tBIT(24)\n#define   QCA8K_PORT_PAD_SGMII_EN\t\t\tBIT(7)\n#define QCA8K_REG_PWS\t\t\t\t\t0x010\n#define   QCA8K_PWS_POWER_ON_SEL\t\t\tBIT(31)\n \n#define   QCA8327_PWS_PACKAGE148_EN\t\t\tBIT(30)\n#define   QCA8K_PWS_LED_OPEN_EN_CSR\t\t\tBIT(24)\n#define   QCA8K_PWS_SERDES_AEN_DIS\t\t\tBIT(7)\n#define QCA8K_REG_MODULE_EN\t\t\t\t0x030\n#define   QCA8K_MODULE_EN_MIB\t\t\t\tBIT(0)\n#define QCA8K_REG_MIB\t\t\t\t\t0x034\n#define   QCA8K_MIB_FUNC\t\t\t\tGENMASK(26, 24)\n#define   QCA8K_MIB_CPU_KEEP\t\t\t\tBIT(20)\n#define   QCA8K_MIB_BUSY\t\t\t\tBIT(17)\n#define QCA8K_MDIO_MASTER_CTRL\t\t\t\t0x3c\n#define   QCA8K_MDIO_MASTER_BUSY\t\t\tBIT(31)\n#define   QCA8K_MDIO_MASTER_EN\t\t\t\tBIT(30)\n#define   QCA8K_MDIO_MASTER_READ\t\t\tBIT(27)\n#define   QCA8K_MDIO_MASTER_WRITE\t\t\t0\n#define   QCA8K_MDIO_MASTER_SUP_PRE\t\t\tBIT(26)\n#define   QCA8K_MDIO_MASTER_PHY_ADDR_MASK\t\tGENMASK(25, 21)\n#define   QCA8K_MDIO_MASTER_PHY_ADDR(x)\t\t\tFIELD_PREP(QCA8K_MDIO_MASTER_PHY_ADDR_MASK, x)\n#define   QCA8K_MDIO_MASTER_REG_ADDR_MASK\t\tGENMASK(20, 16)\n#define   QCA8K_MDIO_MASTER_REG_ADDR(x)\t\t\tFIELD_PREP(QCA8K_MDIO_MASTER_REG_ADDR_MASK, x)\n#define   QCA8K_MDIO_MASTER_DATA_MASK\t\t\tGENMASK(15, 0)\n#define   QCA8K_MDIO_MASTER_DATA(x)\t\t\tFIELD_PREP(QCA8K_MDIO_MASTER_DATA_MASK, x)\n#define   QCA8K_MDIO_MASTER_MAX_PORTS\t\t\t5\n#define   QCA8K_MDIO_MASTER_MAX_REG\t\t\t32\n\n \n#define QCA8K_LED_PORT_COUNT\t\t\t\t3\n#define QCA8K_LED_COUNT\t\t\t\t\t((QCA8K_NUM_PORTS - QCA8K_NUM_CPU_PORTS) * QCA8K_LED_PORT_COUNT)\n#define QCA8K_LED_RULE_COUNT\t\t\t\t6\n#define QCA8K_LED_RULE_MAX\t\t\t\t11\n#define QCA8K_LED_PORT_INDEX(_phy, _led)\t\t(((_phy) * QCA8K_LED_PORT_COUNT) + (_led))\n\n#define QCA8K_LED_PHY123_PATTERN_EN_SHIFT(_phy, _led)\t((((_phy) - 1) * 6) + 8 + (2 * (_led)))\n#define QCA8K_LED_PHY123_PATTERN_EN_MASK\t\tGENMASK(1, 0)\n\n#define QCA8K_LED_PHY0123_CONTROL_RULE_SHIFT\t\t0\n#define QCA8K_LED_PHY4_CONTROL_RULE_SHIFT\t\t16\n\n#define QCA8K_LED_CTRL_REG(_i)\t\t\t\t(0x050 + (_i) * 4)\n#define QCA8K_LED_CTRL0_REG\t\t\t\t0x50\n#define QCA8K_LED_CTRL1_REG\t\t\t\t0x54\n#define QCA8K_LED_CTRL2_REG\t\t\t\t0x58\n#define QCA8K_LED_CTRL3_REG\t\t\t\t0x5C\n#define   QCA8K_LED_CTRL_SHIFT(_i)\t\t\t(((_i) % 2) * 16)\n#define   QCA8K_LED_CTRL_MASK\t\t\t\tGENMASK(15, 0)\n#define QCA8K_LED_RULE_MASK\t\t\t\tGENMASK(13, 0)\n#define QCA8K_LED_BLINK_FREQ_MASK\t\t\tGENMASK(1, 0)\n#define QCA8K_LED_BLINK_FREQ_SHITF\t\t\t0\n#define   QCA8K_LED_BLINK_2HZ\t\t\t\t0\n#define   QCA8K_LED_BLINK_4HZ\t\t\t\t1\n#define   QCA8K_LED_BLINK_8HZ\t\t\t\t2\n#define   QCA8K_LED_BLINK_AUTO\t\t\t\t3\n#define QCA8K_LED_LINKUP_OVER_MASK\t\t\tBIT(2)\n#define QCA8K_LED_TX_BLINK_MASK\t\t\t\tBIT(4)\n#define QCA8K_LED_RX_BLINK_MASK\t\t\t\tBIT(5)\n#define QCA8K_LED_COL_BLINK_MASK\t\t\tBIT(7)\n#define QCA8K_LED_LINK_10M_EN_MASK\t\t\tBIT(8)\n#define QCA8K_LED_LINK_100M_EN_MASK\t\t\tBIT(9)\n#define QCA8K_LED_LINK_1000M_EN_MASK\t\t\tBIT(10)\n#define QCA8K_LED_POWER_ON_LIGHT_MASK\t\t\tBIT(11)\n#define QCA8K_LED_HALF_DUPLEX_MASK\t\t\tBIT(12)\n#define QCA8K_LED_FULL_DUPLEX_MASK\t\t\tBIT(13)\n#define QCA8K_LED_PATTERN_EN_MASK\t\t\tGENMASK(15, 14)\n#define QCA8K_LED_PATTERN_EN_SHIFT\t\t\t14\n#define   QCA8K_LED_ALWAYS_OFF\t\t\t\t0\n#define   QCA8K_LED_ALWAYS_BLINK_4HZ\t\t\t1\n#define   QCA8K_LED_ALWAYS_ON\t\t\t\t2\n#define   QCA8K_LED_RULE_CONTROLLED\t\t\t3\n\n#define QCA8K_GOL_MAC_ADDR0\t\t\t\t0x60\n#define QCA8K_GOL_MAC_ADDR1\t\t\t\t0x64\n#define QCA8K_MAX_FRAME_SIZE\t\t\t\t0x78\n#define QCA8K_REG_PORT_STATUS(_i)\t\t\t(0x07c + (_i) * 4)\n#define   QCA8K_PORT_STATUS_SPEED\t\t\tGENMASK(1, 0)\n#define   QCA8K_PORT_STATUS_SPEED_10\t\t\t0\n#define   QCA8K_PORT_STATUS_SPEED_100\t\t\t0x1\n#define   QCA8K_PORT_STATUS_SPEED_1000\t\t\t0x2\n#define   QCA8K_PORT_STATUS_TXMAC\t\t\tBIT(2)\n#define   QCA8K_PORT_STATUS_RXMAC\t\t\tBIT(3)\n#define   QCA8K_PORT_STATUS_TXFLOW\t\t\tBIT(4)\n#define   QCA8K_PORT_STATUS_RXFLOW\t\t\tBIT(5)\n#define   QCA8K_PORT_STATUS_DUPLEX\t\t\tBIT(6)\n#define   QCA8K_PORT_STATUS_LINK_UP\t\t\tBIT(8)\n#define   QCA8K_PORT_STATUS_LINK_AUTO\t\t\tBIT(9)\n#define   QCA8K_PORT_STATUS_LINK_PAUSE\t\t\tBIT(10)\n#define   QCA8K_PORT_STATUS_FLOW_AUTO\t\t\tBIT(12)\n#define QCA8K_REG_PORT_HDR_CTRL(_i)\t\t\t(0x9c + (_i * 4))\n#define   QCA8K_PORT_HDR_CTRL_RX_MASK\t\t\tGENMASK(3, 2)\n#define   QCA8K_PORT_HDR_CTRL_TX_MASK\t\t\tGENMASK(1, 0)\n#define   QCA8K_PORT_HDR_CTRL_ALL\t\t\t2\n#define   QCA8K_PORT_HDR_CTRL_MGMT\t\t\t1\n#define   QCA8K_PORT_HDR_CTRL_NONE\t\t\t0\n#define QCA8K_REG_SGMII_CTRL\t\t\t\t0x0e0\n#define   QCA8K_SGMII_EN_PLL\t\t\t\tBIT(1)\n#define   QCA8K_SGMII_EN_RX\t\t\t\tBIT(2)\n#define   QCA8K_SGMII_EN_TX\t\t\t\tBIT(3)\n#define   QCA8K_SGMII_EN_SD\t\t\t\tBIT(4)\n#define   QCA8K_SGMII_CLK125M_DELAY\t\t\tBIT(7)\n#define   QCA8K_SGMII_MODE_CTRL_MASK\t\t\tGENMASK(23, 22)\n#define   QCA8K_SGMII_MODE_CTRL(x)\t\t\tFIELD_PREP(QCA8K_SGMII_MODE_CTRL_MASK, x)\n#define   QCA8K_SGMII_MODE_CTRL_BASEX\t\t\tQCA8K_SGMII_MODE_CTRL(0x0)\n#define   QCA8K_SGMII_MODE_CTRL_PHY\t\t\tQCA8K_SGMII_MODE_CTRL(0x1)\n#define   QCA8K_SGMII_MODE_CTRL_MAC\t\t\tQCA8K_SGMII_MODE_CTRL(0x2)\n\n \n#define QCA8K_REG_MAC_PWR_SEL\t\t\t\t0x0e4\n#define   QCA8K_MAC_PWR_RGMII1_1_8V\t\t\tBIT(18)\n#define   QCA8K_MAC_PWR_RGMII0_1_8V\t\t\tBIT(19)\n\n \n#define QCA8K_REG_EEE_CTRL\t\t\t\t0x100\n#define  QCA8K_REG_EEE_CTRL_LPI_EN(_i)\t\t\t((_i + 1) * 2)\n\n \n#define QCA8K_TRUNK_HASH_EN_CTRL\t\t\t0x270\n#define   QCA8K_TRUNK_HASH_SIP_EN\t\t\tBIT(3)\n#define   QCA8K_TRUNK_HASH_DIP_EN\t\t\tBIT(2)\n#define   QCA8K_TRUNK_HASH_SA_EN\t\t\tBIT(1)\n#define   QCA8K_TRUNK_HASH_DA_EN\t\t\tBIT(0)\n#define   QCA8K_TRUNK_HASH_MASK\t\t\t\tGENMASK(3, 0)\n\n \n#define QCA8K_REG_PORT_VLAN_CTRL0(_i)\t\t\t(0x420 + (_i * 8))\n#define   QCA8K_PORT_VLAN_CVID_MASK\t\t\tGENMASK(27, 16)\n#define   QCA8K_PORT_VLAN_CVID(x)\t\t\tFIELD_PREP(QCA8K_PORT_VLAN_CVID_MASK, x)\n#define   QCA8K_PORT_VLAN_SVID_MASK\t\t\tGENMASK(11, 0)\n#define   QCA8K_PORT_VLAN_SVID(x)\t\t\tFIELD_PREP(QCA8K_PORT_VLAN_SVID_MASK, x)\n#define QCA8K_REG_PORT_VLAN_CTRL1(_i)\t\t\t(0x424 + (_i * 8))\n#define QCA8K_REG_IPV4_PRI_BASE_ADDR\t\t\t0x470\n#define QCA8K_REG_IPV4_PRI_ADDR_MASK\t\t\t0x474\n\n \n#define QCA8K_ATU_TABLE_SIZE\t\t\t\t3  \n\n#define QCA8K_REG_ATU_DATA0\t\t\t\t0x600\n#define   QCA8K_ATU_ADDR2_MASK\t\t\t\tGENMASK(31, 24)\n#define   QCA8K_ATU_ADDR3_MASK\t\t\t\tGENMASK(23, 16)\n#define   QCA8K_ATU_ADDR4_MASK\t\t\t\tGENMASK(15, 8)\n#define   QCA8K_ATU_ADDR5_MASK\t\t\t\tGENMASK(7, 0)\n#define QCA8K_REG_ATU_DATA1\t\t\t\t0x604\n#define   QCA8K_ATU_PORT_MASK\t\t\t\tGENMASK(22, 16)\n#define   QCA8K_ATU_ADDR0_MASK\t\t\t\tGENMASK(15, 8)\n#define   QCA8K_ATU_ADDR1_MASK\t\t\t\tGENMASK(7, 0)\n#define QCA8K_REG_ATU_DATA2\t\t\t\t0x608\n#define   QCA8K_ATU_VID_MASK\t\t\t\tGENMASK(19, 8)\n#define   QCA8K_ATU_STATUS_MASK\t\t\t\tGENMASK(3, 0)\n#define   QCA8K_ATU_STATUS_STATIC\t\t\t0xf\n#define QCA8K_REG_ATU_FUNC\t\t\t\t0x60c\n#define   QCA8K_ATU_FUNC_BUSY\t\t\t\tBIT(31)\n#define   QCA8K_ATU_FUNC_PORT_EN\t\t\tBIT(14)\n#define   QCA8K_ATU_FUNC_MULTI_EN\t\t\tBIT(13)\n#define   QCA8K_ATU_FUNC_FULL\t\t\t\tBIT(12)\n#define   QCA8K_ATU_FUNC_PORT_MASK\t\t\tGENMASK(11, 8)\n#define QCA8K_REG_VTU_FUNC0\t\t\t\t0x610\n#define   QCA8K_VTU_FUNC0_VALID\t\t\t\tBIT(20)\n#define   QCA8K_VTU_FUNC0_IVL_EN\t\t\tBIT(19)\n \n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i)\t(4 + (_i) * 2)\n#define   QCA8K_VTU_FUNC0_EG_MODE_MASK\t\t\tGENMASK(1, 0)\n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_MASK(_i)\t\t(GENMASK(1, 0) << QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i))\n#define   QCA8K_VTU_FUNC0_EG_MODE_UNMOD\t\t\tFIELD_PREP(QCA8K_VTU_FUNC0_EG_MODE_MASK, 0x0)\n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_UNMOD(_i)\t(QCA8K_VTU_FUNC0_EG_MODE_UNMOD << QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i))\n#define   QCA8K_VTU_FUNC0_EG_MODE_UNTAG\t\t\tFIELD_PREP(QCA8K_VTU_FUNC0_EG_MODE_MASK, 0x1)\n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_UNTAG(_i)\t(QCA8K_VTU_FUNC0_EG_MODE_UNTAG << QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i))\n#define   QCA8K_VTU_FUNC0_EG_MODE_TAG\t\t\tFIELD_PREP(QCA8K_VTU_FUNC0_EG_MODE_MASK, 0x2)\n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_TAG(_i)\t\t(QCA8K_VTU_FUNC0_EG_MODE_TAG << QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i))\n#define   QCA8K_VTU_FUNC0_EG_MODE_NOT\t\t\tFIELD_PREP(QCA8K_VTU_FUNC0_EG_MODE_MASK, 0x3)\n#define   QCA8K_VTU_FUNC0_EG_MODE_PORT_NOT(_i)\t\t(QCA8K_VTU_FUNC0_EG_MODE_NOT << QCA8K_VTU_FUNC0_EG_MODE_PORT_SHIFT(_i))\n#define QCA8K_REG_VTU_FUNC1\t\t\t\t0x614\n#define   QCA8K_VTU_FUNC1_BUSY\t\t\t\tBIT(31)\n#define   QCA8K_VTU_FUNC1_VID_MASK\t\t\tGENMASK(27, 16)\n#define   QCA8K_VTU_FUNC1_FULL\t\t\t\tBIT(4)\n#define QCA8K_REG_ATU_CTRL\t\t\t\t0x618\n#define   QCA8K_ATU_AGE_TIME_MASK\t\t\tGENMASK(15, 0)\n#define   QCA8K_ATU_AGE_TIME(x)\t\t\t\tFIELD_PREP(QCA8K_ATU_AGE_TIME_MASK, (x))\n#define QCA8K_REG_GLOBAL_FW_CTRL0\t\t\t0x620\n#define   QCA8K_GLOBAL_FW_CTRL0_CPU_PORT_EN\t\tBIT(10)\n#define   QCA8K_GLOBAL_FW_CTRL0_MIRROR_PORT_NUM\t\tGENMASK(7, 4)\n#define QCA8K_REG_GLOBAL_FW_CTRL1\t\t\t0x624\n#define   QCA8K_GLOBAL_FW_CTRL1_IGMP_DP_MASK\t\tGENMASK(30, 24)\n#define   QCA8K_GLOBAL_FW_CTRL1_BC_DP_MASK\t\tGENMASK(22, 16)\n#define   QCA8K_GLOBAL_FW_CTRL1_MC_DP_MASK\t\tGENMASK(14, 8)\n#define   QCA8K_GLOBAL_FW_CTRL1_UC_DP_MASK\t\tGENMASK(6, 0)\n#define QCA8K_PORT_LOOKUP_CTRL(_i)\t\t\t(0x660 + (_i) * 0xc)\n#define   QCA8K_PORT_LOOKUP_MEMBER\t\t\tGENMASK(6, 0)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE_MASK\t\tGENMASK(9, 8)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE(x)\t\tFIELD_PREP(QCA8K_PORT_LOOKUP_VLAN_MODE_MASK, x)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE_NONE\t\tQCA8K_PORT_LOOKUP_VLAN_MODE(0x0)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE_FALLBACK\t\tQCA8K_PORT_LOOKUP_VLAN_MODE(0x1)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE_CHECK\t\tQCA8K_PORT_LOOKUP_VLAN_MODE(0x2)\n#define   QCA8K_PORT_LOOKUP_VLAN_MODE_SECURE\t\tQCA8K_PORT_LOOKUP_VLAN_MODE(0x3)\n#define   QCA8K_PORT_LOOKUP_STATE_MASK\t\t\tGENMASK(18, 16)\n#define   QCA8K_PORT_LOOKUP_STATE(x)\t\t\tFIELD_PREP(QCA8K_PORT_LOOKUP_STATE_MASK, x)\n#define   QCA8K_PORT_LOOKUP_STATE_DISABLED\t\tQCA8K_PORT_LOOKUP_STATE(0x0)\n#define   QCA8K_PORT_LOOKUP_STATE_BLOCKING\t\tQCA8K_PORT_LOOKUP_STATE(0x1)\n#define   QCA8K_PORT_LOOKUP_STATE_LISTENING\t\tQCA8K_PORT_LOOKUP_STATE(0x2)\n#define   QCA8K_PORT_LOOKUP_STATE_LEARNING\t\tQCA8K_PORT_LOOKUP_STATE(0x3)\n#define   QCA8K_PORT_LOOKUP_STATE_FORWARD\t\tQCA8K_PORT_LOOKUP_STATE(0x4)\n#define   QCA8K_PORT_LOOKUP_LEARN\t\t\tBIT(20)\n#define   QCA8K_PORT_LOOKUP_ING_MIRROR_EN\t\tBIT(25)\n\n#define QCA8K_REG_GOL_TRUNK_CTRL0\t\t\t0x700\n \n#define QCA8K_REG_GOL_TRUNK_SHIFT(_i)\t\t\t((_i) * 8)\n#define QCA8K_REG_GOL_TRUNK_EN_MASK\t\t\tBIT(7)\n#define QCA8K_REG_GOL_TRUNK_EN(_i)\t\t\t(QCA8K_REG_GOL_TRUNK_EN_MASK << QCA8K_REG_GOL_TRUNK_SHIFT(_i))\n#define QCA8K_REG_GOL_TRUNK_MEMBER_MASK\t\t\tGENMASK(6, 0)\n#define QCA8K_REG_GOL_TRUNK_MEMBER(_i)\t\t\t(QCA8K_REG_GOL_TRUNK_MEMBER_MASK << QCA8K_REG_GOL_TRUNK_SHIFT(_i))\n \n#define QCA8K_REG_GOL_TRUNK_CTRL(_i)\t\t\t(0x704 + (((_i) / 2) * 4))\n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_MASK\t\tGENMASK(3, 0)\n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_EN_MASK\t\tBIT(3)\n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_PORT_MASK\t\tGENMASK(2, 0)\n#define QCA8K_REG_GOL_TRUNK_ID_SHIFT(_i)\t\t(((_i) / 2) * 16)\n#define QCA8K_REG_GOL_MEM_ID_SHIFT(_i)\t\t\t((_i) * 4)\n \n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_SHIFT(_i, _j)\t(QCA8K_REG_GOL_MEM_ID_SHIFT(_j) + QCA8K_REG_GOL_TRUNK_ID_SHIFT(_i))\n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_EN(_i, _j)\t(QCA8K_REG_GOL_TRUNK_ID_MEM_ID_EN_MASK << QCA8K_REG_GOL_TRUNK_ID_MEM_ID_SHIFT(_i, _j))\n#define QCA8K_REG_GOL_TRUNK_ID_MEM_ID_PORT(_i, _j)\t(QCA8K_REG_GOL_TRUNK_ID_MEM_ID_PORT_MASK << QCA8K_REG_GOL_TRUNK_ID_MEM_ID_SHIFT(_i, _j))\n\n#define QCA8K_REG_GLOBAL_FC_THRESH\t\t\t0x800\n#define   QCA8K_GLOBAL_FC_GOL_XON_THRES_MASK\t\tGENMASK(24, 16)\n#define   QCA8K_GLOBAL_FC_GOL_XON_THRES(x)\t\tFIELD_PREP(QCA8K_GLOBAL_FC_GOL_XON_THRES_MASK, x)\n#define   QCA8K_GLOBAL_FC_GOL_XOFF_THRES_MASK\t\tGENMASK(8, 0)\n#define   QCA8K_GLOBAL_FC_GOL_XOFF_THRES(x)\t\tFIELD_PREP(QCA8K_GLOBAL_FC_GOL_XOFF_THRES_MASK, x)\n\n#define QCA8K_REG_PORT_HOL_CTRL0(_i)\t\t\t(0x970 + (_i) * 0x8)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI0_BUF_MASK\t\tGENMASK(3, 0)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI0(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI0_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI1_BUF_MASK\t\tGENMASK(7, 4)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI1(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI1_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI2_BUF_MASK\t\tGENMASK(11, 8)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI2(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI2_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI3_BUF_MASK\t\tGENMASK(15, 12)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI3(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI3_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI4_BUF_MASK\t\tGENMASK(19, 16)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI4(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI4_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI5_BUF_MASK\t\tGENMASK(23, 20)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PRI5(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PRI5_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PORT_BUF_MASK\t\tGENMASK(29, 24)\n#define   QCA8K_PORT_HOL_CTRL0_EG_PORT(x)\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL0_EG_PORT_BUF_MASK, x)\n\n#define QCA8K_REG_PORT_HOL_CTRL1(_i)\t\t\t(0x974 + (_i) * 0x8)\n#define   QCA8K_PORT_HOL_CTRL1_ING_BUF_MASK\t\tGENMASK(3, 0)\n#define   QCA8K_PORT_HOL_CTRL1_ING(x)\t\t\tFIELD_PREP(QCA8K_PORT_HOL_CTRL1_ING_BUF_MASK, x)\n#define   QCA8K_PORT_HOL_CTRL1_EG_PRI_BUF_EN\t\tBIT(6)\n#define   QCA8K_PORT_HOL_CTRL1_EG_PORT_BUF_EN\t\tBIT(7)\n#define   QCA8K_PORT_HOL_CTRL1_WRED_EN\t\t\tBIT(8)\n#define   QCA8K_PORT_HOL_CTRL1_EG_MIRROR_EN\t\tBIT(16)\n\n \n#define QCA8K_EGREES_VLAN_PORT_SHIFT(_i)\t\t(16 * ((_i) % 2))\n#define QCA8K_EGREES_VLAN_PORT_MASK(_i)\t\t\t(GENMASK(11, 0) << QCA8K_EGREES_VLAN_PORT_SHIFT(_i))\n#define QCA8K_EGREES_VLAN_PORT(_i, x)\t\t\t((x) << QCA8K_EGREES_VLAN_PORT_SHIFT(_i))\n#define QCA8K_EGRESS_VLAN(x)\t\t\t\t(0x0c70 + (4 * (x / 2)))\n\n \n#define QCA8K_HROUTER_CONTROL\t\t\t\t0xe00\n#define   QCA8K_HROUTER_CONTROL_GLB_LOCKTIME_M\t\tGENMASK(17, 16)\n#define   QCA8K_HROUTER_CONTROL_GLB_LOCKTIME_S\t\t16\n#define   QCA8K_HROUTER_CONTROL_ARP_AGE_MODE\t\t1\n#define QCA8K_HROUTER_PBASED_CONTROL1\t\t\t0xe08\n#define QCA8K_HROUTER_PBASED_CONTROL2\t\t\t0xe0c\n#define QCA8K_HNAT_CONTROL\t\t\t\t0xe38\n\n \n#define QCA8K_PORT_MIB_COUNTER(_i)\t\t\t(0x1000 + (_i) * 0x100)\n\n \n#define MII_ATH_MMD_ADDR\t\t\t\t0x0d\n#define MII_ATH_MMD_DATA\t\t\t\t0x0e\n\nenum {\n\tQCA8K_PORT_SPEED_10M = 0,\n\tQCA8K_PORT_SPEED_100M = 1,\n\tQCA8K_PORT_SPEED_1000M = 2,\n\tQCA8K_PORT_SPEED_ERR = 3,\n};\n\nenum qca8k_fdb_cmd {\n\tQCA8K_FDB_FLUSH\t= 1,\n\tQCA8K_FDB_LOAD = 2,\n\tQCA8K_FDB_PURGE = 3,\n\tQCA8K_FDB_FLUSH_PORT = 5,\n\tQCA8K_FDB_NEXT = 6,\n\tQCA8K_FDB_SEARCH = 7,\n};\n\nenum qca8k_vlan_cmd {\n\tQCA8K_VLAN_FLUSH = 1,\n\tQCA8K_VLAN_LOAD = 2,\n\tQCA8K_VLAN_PURGE = 3,\n\tQCA8K_VLAN_REMOVE_PORT = 4,\n\tQCA8K_VLAN_NEXT = 5,\n\tQCA8K_VLAN_READ = 6,\n};\n\nenum qca8k_mid_cmd {\n\tQCA8K_MIB_FLUSH = 1,\n\tQCA8K_MIB_FLUSH_PORT = 2,\n\tQCA8K_MIB_CAST = 3,\n};\n\nstruct qca8k_priv;\n\nstruct qca8k_info_ops {\n\tint (*autocast_mib)(struct dsa_switch *ds, int port, u64 *data);\n};\n\nstruct qca8k_match_data {\n\tu8 id;\n\tbool reduced_package;\n\tu8 mib_count;\n\tconst struct qca8k_info_ops *ops;\n};\n\nenum {\n\tQCA8K_CPU_PORT0,\n\tQCA8K_CPU_PORT6,\n};\n\nstruct qca8k_mgmt_eth_data {\n\tstruct completion rw_done;\n\tstruct mutex mutex;  \n\tbool ack;\n\tu32 seq;\n\tu32 data[4];\n};\n\nstruct qca8k_mib_eth_data {\n\tstruct completion rw_done;\n\tstruct mutex mutex;  \n\trefcount_t port_parsed;  \n\tu8 req_port;\n\tu64 *data;  \n};\n\nstruct qca8k_ports_config {\n\tbool sgmii_rx_clk_falling_edge;\n\tbool sgmii_tx_clk_falling_edge;\n\tbool sgmii_enable_pll;\n\tu8 rgmii_rx_delay[QCA8K_NUM_CPU_PORTS];  \n\tu8 rgmii_tx_delay[QCA8K_NUM_CPU_PORTS];  \n};\n\nstruct qca8k_mdio_cache {\n \n\tu16 page;\n};\n\nstruct qca8k_pcs {\n\tstruct phylink_pcs pcs;\n\tstruct qca8k_priv *priv;\n\tint port;\n};\n\nstruct qca8k_led_pattern_en {\n\tu32 reg;\n\tu8 shift;\n};\n\nstruct qca8k_led {\n\tu8 port_num;\n\tu8 led_num;\n\tu16 old_rule;\n\tstruct qca8k_priv *priv;\n\tstruct led_classdev cdev;\n};\n\nstruct qca8k_priv {\n\tu8 switch_id;\n\tu8 switch_revision;\n\tu8 mirror_rx;\n\tu8 mirror_tx;\n\tu8 lag_hash_mode;\n\t \n\tu8 port_enabled_map;\n\tstruct qca8k_ports_config ports_config;\n\tstruct regmap *regmap;\n\tstruct mii_bus *bus;\n\tstruct dsa_switch *ds;\n\tstruct mutex reg_mutex;\n\tstruct device *dev;\n\tstruct gpio_desc *reset_gpio;\n\tstruct net_device *mgmt_master;  \n\tstruct qca8k_mgmt_eth_data mgmt_eth_data;\n\tstruct qca8k_mib_eth_data mib_eth_data;\n\tstruct qca8k_mdio_cache mdio_cache;\n\tstruct qca8k_pcs pcs_port_0;\n\tstruct qca8k_pcs pcs_port_6;\n\tconst struct qca8k_match_data *info;\n\tstruct qca8k_led ports_led[QCA8K_LED_COUNT];\n};\n\nstruct qca8k_mib_desc {\n\tunsigned int size;\n\tunsigned int offset;\n\tconst char *name;\n};\n\nstruct qca8k_fdb {\n\tu16 vid;\n\tu8 port_mask;\n\tu8 aging;\n\tu8 mac[6];\n};\n\nstatic inline u32 qca8k_port_to_phy(int port)\n{\n\t \n\n\treturn port - 1;\n}\n\n \nextern const struct qca8k_mib_desc ar8327_mib[];\nextern const struct regmap_access_table qca8k_readable_table;\nint qca8k_mib_init(struct qca8k_priv *priv);\nvoid qca8k_port_set_status(struct qca8k_priv *priv, int port, int enable);\nint qca8k_read_switch_id(struct qca8k_priv *priv);\n\n \nint qca8k_read(struct qca8k_priv *priv, u32 reg, u32 *val);\nint qca8k_write(struct qca8k_priv *priv, u32 reg, u32 val);\nint qca8k_rmw(struct qca8k_priv *priv, u32 reg, u32 mask, u32 write_val);\n\n \nvoid qca8k_fdb_flush(struct qca8k_priv *priv);\n\n \nvoid qca8k_get_strings(struct dsa_switch *ds, int port, u32 stringset, uint8_t *data);\nvoid qca8k_get_ethtool_stats(struct dsa_switch *ds, int port,\n\t\t\t     uint64_t *data);\nint qca8k_get_sset_count(struct dsa_switch *ds, int port, int sset);\n\n \nint qca8k_set_mac_eee(struct dsa_switch *ds, int port, struct ethtool_eee *eee);\nint qca8k_get_mac_eee(struct dsa_switch *ds, int port, struct ethtool_eee *e);\n\n \nvoid qca8k_port_stp_state_set(struct dsa_switch *ds, int port, u8 state);\nint qca8k_port_pre_bridge_flags(struct dsa_switch *ds, int port,\n\t\t\t\tstruct switchdev_brport_flags flags,\n\t\t\t\tstruct netlink_ext_ack *extack);\nint qca8k_port_bridge_flags(struct dsa_switch *ds, int port,\n\t\t\t    struct switchdev_brport_flags flags,\n\t\t\t    struct netlink_ext_ack *extack);\nint qca8k_port_bridge_join(struct dsa_switch *ds, int port,\n\t\t\t   struct dsa_bridge bridge,\n\t\t\t   bool *tx_fwd_offload,\n\t\t\t   struct netlink_ext_ack *extack);\nvoid qca8k_port_bridge_leave(struct dsa_switch *ds, int port,\n\t\t\t     struct dsa_bridge bridge);\n\n \nint qca8k_port_enable(struct dsa_switch *ds, int port,\n\t\t      struct phy_device *phy);\nvoid qca8k_port_disable(struct dsa_switch *ds, int port);\n\n \nint qca8k_port_change_mtu(struct dsa_switch *ds, int port, int new_mtu);\nint qca8k_port_max_mtu(struct dsa_switch *ds, int port);\n\n \nvoid qca8k_port_fast_age(struct dsa_switch *ds, int port);\nint qca8k_set_ageing_time(struct dsa_switch *ds, unsigned int msecs);\n\n \nint qca8k_port_fdb_insert(struct qca8k_priv *priv, const u8 *addr,\n\t\t\t  u16 port_mask, u16 vid);\nint qca8k_port_fdb_add(struct dsa_switch *ds, int port,\n\t\t       const unsigned char *addr, u16 vid,\n\t\t       struct dsa_db db);\nint qca8k_port_fdb_del(struct dsa_switch *ds, int port,\n\t\t       const unsigned char *addr, u16 vid,\n\t\t       struct dsa_db db);\nint qca8k_port_fdb_dump(struct dsa_switch *ds, int port,\n\t\t\tdsa_fdb_dump_cb_t *cb, void *data);\n\n \nint qca8k_port_mdb_add(struct dsa_switch *ds, int port,\n\t\t       const struct switchdev_obj_port_mdb *mdb,\n\t\t       struct dsa_db db);\nint qca8k_port_mdb_del(struct dsa_switch *ds, int port,\n\t\t       const struct switchdev_obj_port_mdb *mdb,\n\t\t       struct dsa_db db);\n\n \nint qca8k_port_mirror_add(struct dsa_switch *ds, int port,\n\t\t\t  struct dsa_mall_mirror_tc_entry *mirror,\n\t\t\t  bool ingress, struct netlink_ext_ack *extack);\nvoid qca8k_port_mirror_del(struct dsa_switch *ds, int port,\n\t\t\t   struct dsa_mall_mirror_tc_entry *mirror);\n\n \nint qca8k_port_vlan_filtering(struct dsa_switch *ds, int port, bool vlan_filtering,\n\t\t\t      struct netlink_ext_ack *extack);\nint qca8k_port_vlan_add(struct dsa_switch *ds, int port,\n\t\t\tconst struct switchdev_obj_port_vlan *vlan,\n\t\t\tstruct netlink_ext_ack *extack);\nint qca8k_port_vlan_del(struct dsa_switch *ds, int port,\n\t\t\tconst struct switchdev_obj_port_vlan *vlan);\n\n \nint qca8k_port_lag_join(struct dsa_switch *ds, int port, struct dsa_lag lag,\n\t\t\tstruct netdev_lag_upper_info *info,\n\t\t\tstruct netlink_ext_ack *extack);\nint qca8k_port_lag_leave(struct dsa_switch *ds, int port,\n\t\t\t struct dsa_lag lag);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}