{
  "module_name": "chip.c",
  "hash_id": "902b245beef55f6aebd8142442e6e71630e83135f0f091037a93c6c71a1fbe68",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/purelifi/plfxlc/chip.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/errno.h>\n\n#include \"chip.h\"\n#include \"mac.h\"\n#include \"usb.h\"\n\nvoid plfxlc_chip_init(struct plfxlc_chip *chip,\n\t\t      struct ieee80211_hw *hw,\n\t\t      struct usb_interface *intf)\n{\n\tmemset(chip, 0, sizeof(*chip));\n\tmutex_init(&chip->mutex);\n\tplfxlc_usb_init(&chip->usb, hw, intf);\n}\n\nvoid plfxlc_chip_release(struct plfxlc_chip *chip)\n{\n\tplfxlc_usb_release(&chip->usb);\n\tmutex_destroy(&chip->mutex);\n}\n\nint plfxlc_set_beacon_interval(struct plfxlc_chip *chip, u16 interval,\n\t\t\t       u8 dtim_period, int type)\n{\n\tif (!interval ||\n\t    (chip->beacon_set && chip->beacon_interval == interval))\n\t\treturn 0;\n\n\tchip->beacon_interval = interval;\n\tchip->beacon_set = true;\n\treturn plfxlc_usb_wreq(chip->usb.ez_usb,\n\t\t\t       &chip->beacon_interval,\n\t\t\t       sizeof(chip->beacon_interval),\n\t\t\t       USB_REQ_BEACON_INTERVAL_WR);\n}\n\nint plfxlc_chip_init_hw(struct plfxlc_chip *chip)\n{\n\tunsigned char *addr = plfxlc_mac_get_perm_addr(plfxlc_chip_to_mac(chip));\n\tstruct usb_device *udev = interface_to_usbdev(chip->usb.intf);\n\n\tpr_info(\"plfxlc chip %04x:%04x v%02x %pM %s\\n\",\n\t\tle16_to_cpu(udev->descriptor.idVendor),\n\t\tle16_to_cpu(udev->descriptor.idProduct),\n\t\tle16_to_cpu(udev->descriptor.bcdDevice),\n\t\taddr,\n\t\tplfxlc_speed(udev->speed));\n\n\treturn plfxlc_set_beacon_interval(chip, 100, 0, 0);\n}\n\nint plfxlc_chip_switch_radio(struct plfxlc_chip *chip, u16 value)\n{\n\tint r;\n\t__le16 radio_on = cpu_to_le16(value);\n\n\tr = plfxlc_usb_wreq(chip->usb.ez_usb, &radio_on,\n\t\t\t    sizeof(value), USB_REQ_POWER_WR);\n\tif (r)\n\t\tdev_err(plfxlc_chip_dev(chip), \"POWER_WR failed (%d)\\n\", r);\n\treturn r;\n}\n\nint plfxlc_chip_enable_rxtx(struct plfxlc_chip *chip)\n{\n\tplfxlc_usb_enable_tx(&chip->usb);\n\treturn plfxlc_usb_enable_rx(&chip->usb);\n}\n\nvoid plfxlc_chip_disable_rxtx(struct plfxlc_chip *chip)\n{\n\tu8 value = 0;\n\n\tplfxlc_usb_wreq(chip->usb.ez_usb,\n\t\t\t&value, sizeof(value), USB_REQ_RXTX_WR);\n\tplfxlc_usb_disable_rx(&chip->usb);\n\tplfxlc_usb_disable_tx(&chip->usb);\n}\n\nint plfxlc_chip_set_rate(struct plfxlc_chip *chip, u8 rate)\n{\n\tint r;\n\n\tif (!chip)\n\t\treturn -EINVAL;\n\n\tr = plfxlc_usb_wreq(chip->usb.ez_usb,\n\t\t\t    &rate, sizeof(rate), USB_REQ_RATE_WR);\n\tif (r)\n\t\tdev_err(plfxlc_chip_dev(chip), \"RATE_WR failed (%d)\\n\", r);\n\treturn r;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}