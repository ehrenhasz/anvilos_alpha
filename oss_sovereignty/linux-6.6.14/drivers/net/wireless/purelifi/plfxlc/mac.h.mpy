{
  "module_name": "mac.h",
  "hash_id": "686d01f18cb044372de3b70bf02f4a3010990e50ccfe6393b8370dc6d6da265f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/purelifi/plfxlc/mac.h",
  "human_readable_source": " \n \n\n#ifndef PLFXLC_MAC_H\n#define PLFXLC_MAC_H\n\n#include <linux/kernel.h>\n#include <net/mac80211.h>\n\n#include \"chip.h\"\n\n#define PURELIFI_CCK                  0x00\n#define PURELIFI_OFDM                 0x10\n#define PURELIFI_CCK_PREA_SHORT       0x20\n\n#define PURELIFI_OFDM_PLCP_RATE_6M\t0xb\n#define PURELIFI_OFDM_PLCP_RATE_9M\t0xf\n#define PURELIFI_OFDM_PLCP_RATE_12M\t0xa\n#define PURELIFI_OFDM_PLCP_RATE_18M\t0xe\n#define PURELIFI_OFDM_PLCP_RATE_24M\t0x9\n#define PURELIFI_OFDM_PLCP_RATE_36M\t0xd\n#define PURELIFI_OFDM_PLCP_RATE_48M\t0x8\n#define PURELIFI_OFDM_PLCP_RATE_54M\t0xc\n\n#define PURELIFI_CCK_RATE_1M\t(PURELIFI_CCK | 0x00)\n#define PURELIFI_CCK_RATE_2M\t(PURELIFI_CCK | 0x01)\n#define PURELIFI_CCK_RATE_5_5M\t(PURELIFI_CCK | 0x02)\n#define PURELIFI_CCK_RATE_11M\t(PURELIFI_CCK | 0x03)\n#define PURELIFI_OFDM_RATE_6M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_6M)\n#define PURELIFI_OFDM_RATE_9M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_9M)\n#define PURELIFI_OFDM_RATE_12M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_12M)\n#define PURELIFI_OFDM_RATE_18M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_18M)\n#define PURELIFI_OFDM_RATE_24M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_24M)\n#define PURELIFI_OFDM_RATE_36M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_36M)\n#define PURELIFI_OFDM_RATE_48M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_48M)\n#define PURELIFI_OFDM_RATE_54M\t(PURELIFI_OFDM | PURELIFI_OFDM_PLCP_RATE_54M)\n\n#define PURELIFI_RX_ERROR\t\t0x80\n#define PURELIFI_RX_CRC32_ERROR\t\t0x10\n\n#define PLF_REGDOMAIN_FCC\t0x10\n#define PLF_REGDOMAIN_IC\t0x20\n#define PLF_REGDOMAIN_ETSI\t0x30\n#define PLF_REGDOMAIN_SPAIN\t0x31\n#define PLF_REGDOMAIN_FRANCE\t0x32\n#define PLF_REGDOMAIN_JAPAN_2\t0x40\n#define PLF_REGDOMAIN_JAPAN\t0x41\n#define PLF_REGDOMAIN_JAPAN_3\t0x49\n\n#define PLF_RX_ERROR\t\t0x80\n#define PLF_RX_CRC32_ERROR\t0x10\n\nenum {\n\tMODULATION_RATE_BPSK_1_2 = 0,\n\tMODULATION_RATE_BPSK_3_4,\n\tMODULATION_RATE_QPSK_1_2,\n\tMODULATION_RATE_QPSK_3_4,\n\tMODULATION_RATE_QAM16_1_2,\n\tMODULATION_RATE_QAM16_3_4,\n\tMODULATION_RATE_QAM64_1_2,\n\tMODULATION_RATE_QAM64_3_4,\n\tMODULATION_RATE_AUTO,\n\tMODULATION_RATE_NUM\n};\n\n#define plfxlc_mac_dev(mac) plfxlc_chip_dev(&(mac)->chip)\n\n#define PURELIFI_MAC_STATS_BUFFER_SIZE 16\n#define PURELIFI_MAC_MAX_ACK_WAITERS 50\n\nstruct plfxlc_ctrlset {\n\t \n\t__be32\t\tid;\n\t__be32\t\tlen;\n\tu8\t\tmodulation;\n\tu8\t\tcontrol;\n\tu8\t\tservice;\n\tu8\t\tpad;\n\t__le16\t\tpacket_length;\n\t__le16\t\tcurrent_length;\n\t__le16\t\tnext_frame_length;\n\t__le16\t\ttx_length;\n\t__be32\t\tpayload_len_nw;\n} __packed;\n\n \nstruct plfxlc_header {\n\tstruct plfxlc_ctrlset plf_ctrl;\n\tu32    frametype;\n\tu8    *dmac;\n} __packed;\n\nstruct tx_status {\n\tu8 type;\n\tu8 id;\n\tu8 rate;\n\tu8 pad;\n\tu8 mac[ETH_ALEN];\n\tu8 retry;\n\tu8 failure;\n} __packed;\n\nstruct beacon {\n\tstruct delayed_work watchdog_work;\n\tstruct sk_buff *cur_beacon;\n\tunsigned long last_update;\n\tu16 interval;\n\tu8 period;\n};\n\nenum plfxlc_device_flags {\n\tPURELIFI_DEVICE_RUNNING,\n};\n\nstruct plfxlc_mac {\n\tstruct ieee80211_hw *hw;\n\tstruct ieee80211_vif *vif;\n\tstruct beacon beacon;\n\tstruct work_struct set_rts_cts_work;\n\tstruct work_struct process_intr;\n\tstruct plfxlc_mc_hash multicast_hash;\n\tstruct sk_buff_head ack_wait_queue;\n\tstruct ieee80211_channel channels[14];\n\tstruct ieee80211_rate rates[12];\n\tstruct ieee80211_supported_band band;\n\tstruct plfxlc_chip chip;\n\tspinlock_t lock;  \n\tu8 intr_buffer[USB_MAX_EP_INT_BUFFER];\n\tchar serial_number[PURELIFI_SERIAL_LEN];\n\tunsigned char hw_address[ETH_ALEN];\n\tu8 default_regdomain;\n\tunsigned long flags;\n\tbool pass_failed_fcs;\n\tbool pass_ctrl;\n\tbool ack_pending;\n\tint ack_signal;\n\tint associated;\n\tu8 regdomain;\n\tu8 channel;\n\tint type;\n\tu64 crc_errors;\n\tu64 rssi;\n};\n\nstatic inline struct plfxlc_mac *\nplfxlc_hw_mac(struct ieee80211_hw *hw)\n{\n\treturn hw->priv;\n}\n\nstatic inline struct plfxlc_mac *\nplfxlc_chip_to_mac(struct plfxlc_chip *chip)\n{\n\treturn container_of(chip, struct plfxlc_mac, chip);\n}\n\nstatic inline struct plfxlc_mac *\nplfxlc_usb_to_mac(struct plfxlc_usb *usb)\n{\n\treturn plfxlc_chip_to_mac(plfxlc_usb_to_chip(usb));\n}\n\nstatic inline u8 *plfxlc_mac_get_perm_addr(struct plfxlc_mac *mac)\n{\n\treturn mac->hw->wiphy->perm_addr;\n}\n\nstruct ieee80211_hw *plfxlc_mac_alloc_hw(struct usb_interface *intf);\nvoid plfxlc_mac_release(struct plfxlc_mac *mac);\n\nint plfxlc_mac_preinit_hw(struct ieee80211_hw *hw, const u8 *hw_address);\nint plfxlc_mac_init_hw(struct ieee80211_hw *hw);\n\nint plfxlc_mac_rx(struct ieee80211_hw *hw, const u8 *buffer,\n\t\t  unsigned int length);\nvoid plfxlc_mac_tx_failed(struct urb *urb);\nvoid plfxlc_mac_tx_to_dev(struct sk_buff *skb, int error);\nint plfxlc_op_start(struct ieee80211_hw *hw);\nvoid plfxlc_op_stop(struct ieee80211_hw *hw);\nint plfxlc_restore_settings(struct plfxlc_mac *mac);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}