{
  "module_name": "event.c",
  "hash_id": "5bfb60a1a40605fa9fd307914acbc196aa4b980ea693c8d990bab61f8e87c45a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ti/wl12xx/event.c",
  "human_readable_source": "\n \n\n#include \"event.h\"\n#include \"scan.h\"\n#include \"../wlcore/cmd.h\"\n#include \"../wlcore/debug.h\"\n\nint wl12xx_wait_for_event(struct wl1271 *wl, enum wlcore_wait_event event,\n\t\t\t  bool *timeout)\n{\n\tu32 local_event;\n\n\tswitch (event) {\n\tcase WLCORE_EVENT_ROLE_STOP_COMPLETE:\n\t\tlocal_event = ROLE_STOP_COMPLETE_EVENT_ID;\n\t\tbreak;\n\n\tcase WLCORE_EVENT_PEER_REMOVE_COMPLETE:\n\t\tlocal_event = PEER_REMOVE_COMPLETE_EVENT_ID;\n\t\tbreak;\n\n\tdefault:\n\t\t \n\t\treturn 0;\n\t}\n\treturn wlcore_cmd_wait_for_event_or_timeout(wl, local_event, timeout);\n}\n\nint wl12xx_process_mailbox_events(struct wl1271 *wl)\n{\n\tstruct wl12xx_event_mailbox *mbox = wl->mbox;\n\tu32 vector;\n\n\n\tvector = le32_to_cpu(mbox->events_vector);\n\tvector &= ~(le32_to_cpu(mbox->events_mask));\n\n\twl1271_debug(DEBUG_EVENT, \"MBOX vector: 0x%x\", vector);\n\n\tif (vector & SCAN_COMPLETE_EVENT_ID) {\n\t\twl1271_debug(DEBUG_EVENT, \"status: 0x%x\",\n\t\t\t     mbox->scheduled_scan_status);\n\n\t\tif (wl->scan_wlvif)\n\t\t\twl12xx_scan_completed(wl, wl->scan_wlvif);\n\t}\n\n\tif (vector & PERIODIC_SCAN_REPORT_EVENT_ID) {\n\t\twl1271_debug(DEBUG_EVENT,\n\t\t\t     \"PERIODIC_SCAN_REPORT_EVENT (status 0x%0x)\",\n\t\t\t     mbox->scheduled_scan_status);\n\n\t\twlcore_scan_sched_scan_results(wl);\n\t}\n\n\tif (vector & PERIODIC_SCAN_COMPLETE_EVENT_ID)\n\t\twlcore_event_sched_scan_completed(wl,\n\t\t\t\t\t\t  mbox->scheduled_scan_status);\n\tif (vector & SOFT_GEMINI_SENSE_EVENT_ID)\n\t\twlcore_event_soft_gemini_sense(wl,\n\t\t\t\t\t       mbox->soft_gemini_sense_info);\n\n\tif (vector & BSS_LOSE_EVENT_ID)\n\t\twlcore_event_beacon_loss(wl, 0xff);\n\n\tif (vector & RSSI_SNR_TRIGGER_0_EVENT_ID)\n\t\twlcore_event_rssi_trigger(wl, mbox->rssi_snr_trigger_metric);\n\n\tif (vector & BA_SESSION_RX_CONSTRAINT_EVENT_ID)\n\t\twlcore_event_ba_rx_constraint(wl,\n\t\t\t\t\t      BIT(mbox->role_id),\n\t\t\t\t\t      mbox->rx_ba_allowed);\n\n\tif (vector & CHANNEL_SWITCH_COMPLETE_EVENT_ID)\n\t\twlcore_event_channel_switch(wl, 0xff,\n\t\t\t\t\t    mbox->channel_switch_status);\n\n\tif (vector & DUMMY_PACKET_EVENT_ID)\n\t\twlcore_event_dummy_packet(wl);\n\n\t \n\tif (vector & MAX_TX_RETRY_EVENT_ID)\n\t\twlcore_event_max_tx_failure(wl,\n\t\t\t\tle16_to_cpu(mbox->sta_tx_retry_exceeded));\n\n\tif (vector & INACTIVE_STA_EVENT_ID)\n\t\twlcore_event_inactive_sta(wl,\n\t\t\t\t\t  le16_to_cpu(mbox->sta_aging_status));\n\n\tif (vector & REMAIN_ON_CHANNEL_COMPLETE_EVENT_ID)\n\t\twlcore_event_roc_complete(wl);\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}