{
  "module_name": "io.h",
  "hash_id": "e2560332a786c4533cbd94a92953a8a00ce5446ac4b8c800389f17a053705aae",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ti/wlcore/io.h",
  "human_readable_source": " \n \n\n#ifndef __IO_H__\n#define __IO_H__\n\n#include <linux/irqreturn.h>\n\n#define HW_ACCESS_MEMORY_MAX_RANGE\t0x1FFC0\n\n#define HW_PARTITION_REGISTERS_ADDR     0x1FFC0\n#define HW_PART0_SIZE_ADDR              (HW_PARTITION_REGISTERS_ADDR)\n#define HW_PART0_START_ADDR             (HW_PARTITION_REGISTERS_ADDR + 4)\n#define HW_PART1_SIZE_ADDR              (HW_PARTITION_REGISTERS_ADDR + 8)\n#define HW_PART1_START_ADDR             (HW_PARTITION_REGISTERS_ADDR + 12)\n#define HW_PART2_SIZE_ADDR              (HW_PARTITION_REGISTERS_ADDR + 16)\n#define HW_PART2_START_ADDR             (HW_PARTITION_REGISTERS_ADDR + 20)\n#define HW_PART3_SIZE_ADDR              (HW_PARTITION_REGISTERS_ADDR + 24)\n#define HW_PART3_START_ADDR             (HW_PARTITION_REGISTERS_ADDR + 28)\n\n#define HW_ACCESS_REGISTER_SIZE         4\n\n#define HW_ACCESS_PRAM_MAX_RANGE\t0x3c000\n\nstruct wl1271;\n\nvoid wlcore_disable_interrupts(struct wl1271 *wl);\nvoid wlcore_disable_interrupts_nosync(struct wl1271 *wl);\nvoid wlcore_enable_interrupts(struct wl1271 *wl);\nvoid wlcore_synchronize_interrupts(struct wl1271 *wl);\n\nvoid wl1271_io_reset(struct wl1271 *wl);\nvoid wl1271_io_init(struct wl1271 *wl);\nint wlcore_translate_addr(struct wl1271 *wl, int addr);\n\n \nstatic inline int __must_check wlcore_raw_write(struct wl1271 *wl, int addr,\n\t\t\t\t\t\tvoid *buf, size_t len,\n\t\t\t\t\t\tbool fixed)\n{\n\tint ret;\n\n\tif (test_bit(WL1271_FLAG_IO_FAILED, &wl->flags) ||\n\t    WARN_ON((test_bit(WL1271_FLAG_IN_ELP, &wl->flags) &&\n\t\t     addr != HW_ACCESS_ELP_CTRL_REG)))\n\t\treturn -EIO;\n\n\tret = wl->if_ops->write(wl->dev, addr, buf, len, fixed);\n\tif (ret && wl->state != WLCORE_STATE_OFF)\n\t\tset_bit(WL1271_FLAG_IO_FAILED, &wl->flags);\n\n\treturn ret;\n}\n\nstatic inline int __must_check wlcore_raw_read(struct wl1271 *wl, int addr,\n\t\t\t\t\t       void *buf, size_t len,\n\t\t\t\t\t       bool fixed)\n{\n\tint ret;\n\n\tif (test_bit(WL1271_FLAG_IO_FAILED, &wl->flags) ||\n\t    WARN_ON((test_bit(WL1271_FLAG_IN_ELP, &wl->flags) &&\n\t\t     addr != HW_ACCESS_ELP_CTRL_REG)))\n\t\treturn -EIO;\n\n\tret = wl->if_ops->read(wl->dev, addr, buf, len, fixed);\n\tif (ret && wl->state != WLCORE_STATE_OFF)\n\t\tset_bit(WL1271_FLAG_IO_FAILED, &wl->flags);\n\n\treturn ret;\n}\n\nstatic inline int __must_check wlcore_raw_read_data(struct wl1271 *wl, int reg,\n\t\t\t\t\t\t    void *buf, size_t len,\n\t\t\t\t\t\t    bool fixed)\n{\n\treturn wlcore_raw_read(wl, wl->rtable[reg], buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_raw_write_data(struct wl1271 *wl, int reg,\n\t\t\t\t\t\t     void *buf, size_t len,\n\t\t\t\t\t\t     bool fixed)\n{\n\treturn wlcore_raw_write(wl, wl->rtable[reg], buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_raw_read32(struct wl1271 *wl, int addr,\n\t\t\t\t\t\t u32 *val)\n{\n\tint ret;\n\n\tret = wlcore_raw_read(wl, addr, wl->buffer_32,\n\t\t\t      sizeof(*wl->buffer_32), false);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tif (val)\n\t\t*val = le32_to_cpu(*wl->buffer_32);\n\n\treturn 0;\n}\n\nstatic inline int __must_check wlcore_raw_write32(struct wl1271 *wl, int addr,\n\t\t\t\t\t\t  u32 val)\n{\n\t*wl->buffer_32 = cpu_to_le32(val);\n\treturn wlcore_raw_write(wl, addr, wl->buffer_32,\n\t\t\t\tsizeof(*wl->buffer_32), false);\n}\n\nstatic inline int __must_check wlcore_read(struct wl1271 *wl, int addr,\n\t\t\t\t\t   void *buf, size_t len, bool fixed)\n{\n\tint physical;\n\n\tphysical = wlcore_translate_addr(wl, addr);\n\n\treturn wlcore_raw_read(wl, physical, buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_write(struct wl1271 *wl, int addr,\n\t\t\t\t\t    void *buf, size_t len, bool fixed)\n{\n\tint physical;\n\n\tphysical = wlcore_translate_addr(wl, addr);\n\n\treturn wlcore_raw_write(wl, physical, buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_write_data(struct wl1271 *wl, int reg,\n\t\t\t\t\t\t void *buf, size_t len,\n\t\t\t\t\t\t bool fixed)\n{\n\treturn wlcore_write(wl, wl->rtable[reg], buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_read_data(struct wl1271 *wl, int reg,\n\t\t\t\t\t\tvoid *buf, size_t len,\n\t\t\t\t\t\tbool fixed)\n{\n\treturn wlcore_read(wl, wl->rtable[reg], buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_read_hwaddr(struct wl1271 *wl, int hwaddr,\n\t\t\t\t\t\t  void *buf, size_t len,\n\t\t\t\t\t\t  bool fixed)\n{\n\tint physical;\n\tint addr;\n\n\t \n\taddr = wl->ops->convert_hwaddr(wl, hwaddr);\n\n\tphysical = wlcore_translate_addr(wl, addr);\n\n\treturn wlcore_raw_read(wl, physical, buf, len, fixed);\n}\n\nstatic inline int __must_check wlcore_read32(struct wl1271 *wl, int addr,\n\t\t\t\t\t     u32 *val)\n{\n\treturn wlcore_raw_read32(wl, wlcore_translate_addr(wl, addr), val);\n}\n\nstatic inline int __must_check wlcore_write32(struct wl1271 *wl, int addr,\n\t\t\t\t\t      u32 val)\n{\n\treturn wlcore_raw_write32(wl, wlcore_translate_addr(wl, addr), val);\n}\n\nstatic inline int __must_check wlcore_read_reg(struct wl1271 *wl, int reg,\n\t\t\t\t\t       u32 *val)\n{\n\treturn wlcore_raw_read32(wl,\n\t\t\t\t wlcore_translate_addr(wl, wl->rtable[reg]),\n\t\t\t\t val);\n}\n\nstatic inline int __must_check wlcore_write_reg(struct wl1271 *wl, int reg,\n\t\t\t\t\t\tu32 val)\n{\n\treturn wlcore_raw_write32(wl,\n\t\t\t\t  wlcore_translate_addr(wl, wl->rtable[reg]),\n\t\t\t\t  val);\n}\n\nstatic inline void wl1271_power_off(struct wl1271 *wl)\n{\n\tint ret = 0;\n\n\tif (!test_bit(WL1271_FLAG_GPIO_POWER, &wl->flags))\n\t\treturn;\n\n\tif (wl->if_ops->power)\n\t\tret = wl->if_ops->power(wl->dev, false);\n\tif (!ret)\n\t\tclear_bit(WL1271_FLAG_GPIO_POWER, &wl->flags);\n}\n\nstatic inline int wl1271_power_on(struct wl1271 *wl)\n{\n\tint ret = 0;\n\n\tif (wl->if_ops->power)\n\t\tret = wl->if_ops->power(wl->dev, true);\n\tif (ret == 0)\n\t\tset_bit(WL1271_FLAG_GPIO_POWER, &wl->flags);\n\n\treturn ret;\n}\n\nint wlcore_set_partition(struct wl1271 *wl,\n\t\t\t const struct wlcore_partition_set *p);\n\nbool wl1271_set_block_size(struct wl1271 *wl);\n\n \n\nint wl1271_tx_dummy_packet(struct wl1271 *wl);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}