{
  "module_name": "wl1251.h",
  "hash_id": "24784fe2b1793a6a052c78c5098f38ef65a4b956d11722e66d9218de2d5c6138",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ti/wl1251/wl1251.h",
  "human_readable_source": " \n \n\n#ifndef __WL1251_H__\n#define __WL1251_H__\n\n#include <linux/mutex.h>\n#include <linux/list.h>\n#include <linux/bitops.h>\n#include <net/mac80211.h>\n\n#define DRIVER_NAME \"wl1251\"\n#define DRIVER_PREFIX DRIVER_NAME \": \"\n\nenum {\n\tDEBUG_NONE\t= 0,\n\tDEBUG_IRQ\t= BIT(0),\n\tDEBUG_SPI\t= BIT(1),\n\tDEBUG_BOOT\t= BIT(2),\n\tDEBUG_MAILBOX\t= BIT(3),\n\tDEBUG_NETLINK\t= BIT(4),\n\tDEBUG_EVENT\t= BIT(5),\n\tDEBUG_TX\t= BIT(6),\n\tDEBUG_RX\t= BIT(7),\n\tDEBUG_SCAN\t= BIT(8),\n\tDEBUG_CRYPT\t= BIT(9),\n\tDEBUG_PSM\t= BIT(10),\n\tDEBUG_MAC80211\t= BIT(11),\n\tDEBUG_CMD\t= BIT(12),\n\tDEBUG_ACX\t= BIT(13),\n\tDEBUG_ALL\t= ~0,\n};\n\n#define DEBUG_LEVEL (DEBUG_NONE)\n\n#define DEBUG_DUMP_LIMIT 1024\n\n#define wl1251_error(fmt, arg...) \\\n\tprintk(KERN_ERR DRIVER_PREFIX \"ERROR \" fmt \"\\n\", ##arg)\n\n#define wl1251_warning(fmt, arg...) \\\n\tprintk(KERN_WARNING DRIVER_PREFIX \"WARNING \" fmt \"\\n\", ##arg)\n\n#define wl1251_notice(fmt, arg...) \\\n\tprintk(KERN_INFO DRIVER_PREFIX fmt \"\\n\", ##arg)\n\n#define wl1251_info(fmt, arg...) \\\n\tprintk(KERN_DEBUG DRIVER_PREFIX fmt \"\\n\", ##arg)\n\n#define wl1251_debug(level, fmt, arg...) \\\n\tdo { \\\n\t\tif (level & DEBUG_LEVEL) \\\n\t\t\tprintk(KERN_DEBUG DRIVER_PREFIX fmt \"\\n\", ##arg); \\\n\t} while (0)\n\n#define wl1251_dump(level, prefix, buf, len)\t\\\n\tdo { \\\n\t\tif (level & DEBUG_LEVEL) \\\n\t\t\tprint_hex_dump(KERN_DEBUG, DRIVER_PREFIX prefix, \\\n\t\t\t\t       DUMP_PREFIX_OFFSET, 16, 1,\t\\\n\t\t\t\t       buf,\t\t\t\t\\\n\t\t\t\t       min_t(size_t, len, DEBUG_DUMP_LIMIT), \\\n\t\t\t\t       0);\t\t\t\t\\\n\t} while (0)\n\n#define wl1251_dump_ascii(level, prefix, buf, len)\t\\\n\tdo { \\\n\t\tif (level & DEBUG_LEVEL) \\\n\t\t\tprint_hex_dump(KERN_DEBUG, DRIVER_PREFIX prefix, \\\n\t\t\t\t       DUMP_PREFIX_OFFSET, 16, 1,\t\\\n\t\t\t\t       buf,\t\t\t\t\\\n\t\t\t\t       min_t(size_t, len, DEBUG_DUMP_LIMIT), \\\n\t\t\t\t       true);\t\t\t\t\\\n\t} while (0)\n\n#define WL1251_DEFAULT_RX_CONFIG (CFG_UNI_FILTER_EN |\t\\\n\t\t\t\t  CFG_MC_FILTER_EN |\t\\\n\t\t\t\t  CFG_BSSID_FILTER_EN)\n\n#define WL1251_DEFAULT_RX_FILTER (CFG_RX_PRSP_EN |  \\\n\t\t\t\t  CFG_RX_MGMT_EN |  \\\n\t\t\t\t  CFG_RX_DATA_EN |  \\\n\t\t\t\t  CFG_RX_CTL_EN |   \\\n\t\t\t\t  CFG_RX_BCN_EN |   \\\n\t\t\t\t  CFG_RX_AUTH_EN |  \\\n\t\t\t\t  CFG_RX_ASSOC_EN)\n\n#define WL1251_BUSY_WORD_LEN 8\n\nstruct boot_attr {\n\tu32 radio_type;\n\tu8 mac_clock;\n\tu8 arm_clock;\n\tint firmware_debug;\n\tu32 minor;\n\tu32 major;\n\tu32 bugfix;\n};\n\nenum wl1251_state {\n\tWL1251_STATE_OFF,\n\tWL1251_STATE_ON,\n\tWL1251_STATE_PLT,\n};\n\nenum wl1251_partition_type {\n\tPART_DOWN,\n\tPART_WORK,\n\tPART_DRPW,\n\n\tPART_TABLE_LEN\n};\n\nenum wl1251_station_mode {\n\tSTATION_ACTIVE_MODE,\n\tSTATION_POWER_SAVE_MODE,\n\tSTATION_IDLE,\n};\n\nstruct wl1251_partition {\n\tu32 size;\n\tu32 start;\n};\n\nstruct wl1251_partition_set {\n\tstruct wl1251_partition mem;\n\tstruct wl1251_partition reg;\n};\n\nstruct wl1251;\n\nstruct wl1251_stats {\n\tstruct acx_statistics *fw_stats;\n\tunsigned long fw_stats_update;\n\n\tunsigned int retry_count;\n\tunsigned int excessive_retries;\n};\n\nstruct wl1251_debugfs {\n\tstruct dentry *rootdir;\n\tstruct dentry *fw_statistics;\n\n\tstruct dentry *tx_internal_desc_overflow;\n\n\tstruct dentry *rx_out_of_mem;\n\tstruct dentry *rx_hdr_overflow;\n\tstruct dentry *rx_hw_stuck;\n\tstruct dentry *rx_dropped;\n\tstruct dentry *rx_fcs_err;\n\tstruct dentry *rx_xfr_hint_trig;\n\tstruct dentry *rx_path_reset;\n\tstruct dentry *rx_reset_counter;\n\n\tstruct dentry *dma_rx_requested;\n\tstruct dentry *dma_rx_errors;\n\tstruct dentry *dma_tx_requested;\n\tstruct dentry *dma_tx_errors;\n\n\tstruct dentry *isr_cmd_cmplt;\n\tstruct dentry *isr_fiqs;\n\tstruct dentry *isr_rx_headers;\n\tstruct dentry *isr_rx_mem_overflow;\n\tstruct dentry *isr_rx_rdys;\n\tstruct dentry *isr_irqs;\n\tstruct dentry *isr_tx_procs;\n\tstruct dentry *isr_decrypt_done;\n\tstruct dentry *isr_dma0_done;\n\tstruct dentry *isr_dma1_done;\n\tstruct dentry *isr_tx_exch_complete;\n\tstruct dentry *isr_commands;\n\tstruct dentry *isr_rx_procs;\n\tstruct dentry *isr_hw_pm_mode_changes;\n\tstruct dentry *isr_host_acknowledges;\n\tstruct dentry *isr_pci_pm;\n\tstruct dentry *isr_wakeups;\n\tstruct dentry *isr_low_rssi;\n\n\tstruct dentry *wep_addr_key_count;\n\tstruct dentry *wep_default_key_count;\n\t \n\tstruct dentry *wep_key_not_found;\n\tstruct dentry *wep_decrypt_fail;\n\tstruct dentry *wep_packets;\n\tstruct dentry *wep_interrupt;\n\n\tstruct dentry *pwr_ps_enter;\n\tstruct dentry *pwr_elp_enter;\n\tstruct dentry *pwr_missing_bcns;\n\tstruct dentry *pwr_wake_on_host;\n\tstruct dentry *pwr_wake_on_timer_exp;\n\tstruct dentry *pwr_tx_with_ps;\n\tstruct dentry *pwr_tx_without_ps;\n\tstruct dentry *pwr_rcvd_beacons;\n\tstruct dentry *pwr_power_save_off;\n\tstruct dentry *pwr_enable_ps;\n\tstruct dentry *pwr_disable_ps;\n\tstruct dentry *pwr_fix_tsf_ps;\n\t \n\tstruct dentry *pwr_rcvd_awake_beacons;\n\n\tstruct dentry *mic_rx_pkts;\n\tstruct dentry *mic_calc_failure;\n\n\tstruct dentry *aes_encrypt_fail;\n\tstruct dentry *aes_decrypt_fail;\n\tstruct dentry *aes_encrypt_packets;\n\tstruct dentry *aes_decrypt_packets;\n\tstruct dentry *aes_encrypt_interrupt;\n\tstruct dentry *aes_decrypt_interrupt;\n\n\tstruct dentry *event_heart_beat;\n\tstruct dentry *event_calibration;\n\tstruct dentry *event_rx_mismatch;\n\tstruct dentry *event_rx_mem_empty;\n\tstruct dentry *event_rx_pool;\n\tstruct dentry *event_oom_late;\n\tstruct dentry *event_phy_transmit_error;\n\tstruct dentry *event_tx_stuck;\n\n\tstruct dentry *ps_pspoll_timeouts;\n\tstruct dentry *ps_upsd_timeouts;\n\tstruct dentry *ps_upsd_max_sptime;\n\tstruct dentry *ps_upsd_max_apturn;\n\tstruct dentry *ps_pspoll_max_apturn;\n\tstruct dentry *ps_pspoll_utilization;\n\tstruct dentry *ps_upsd_utilization;\n\n\tstruct dentry *rxpipe_rx_prep_beacon_drop;\n\tstruct dentry *rxpipe_descr_host_int_trig_rx_data;\n\tstruct dentry *rxpipe_beacon_buffer_thres_host_int_trig_rx_data;\n\tstruct dentry *rxpipe_missed_beacon_host_int_trig_rx_data;\n\tstruct dentry *rxpipe_tx_xfr_host_int_trig_rx_data;\n\n\tstruct dentry *tx_queue_len;\n\tstruct dentry *tx_queue_status;\n\n\tstruct dentry *retry_count;\n\tstruct dentry *excessive_retries;\n};\n\nstruct wl1251_if_operations {\n\tvoid (*read)(struct wl1251 *wl, int addr, void *buf, size_t len);\n\tvoid (*write)(struct wl1251 *wl, int addr, void *buf, size_t len);\n\tvoid (*read_elp)(struct wl1251 *wl, int addr, u32 *val);\n\tvoid (*write_elp)(struct wl1251 *wl, int addr, u32 val);\n\tint  (*power)(struct wl1251 *wl, bool enable);\n\tvoid (*reset)(struct wl1251 *wl);\n\tvoid (*enable_irq)(struct wl1251 *wl);\n\tvoid (*disable_irq)(struct wl1251 *wl);\n};\n\nstruct wl1251 {\n\tstruct ieee80211_hw *hw;\n\tbool mac80211_registered;\n\n\tvoid *if_priv;\n\tconst struct wl1251_if_operations *if_ops;\n\n\tint irq;\n\tbool use_eeprom;\n\n\tstruct regulator *vio;\n\n\tspinlock_t wl_lock;\n\n\tenum wl1251_state state;\n\tstruct mutex mutex;\n\n\tint physical_mem_addr;\n\tint physical_reg_addr;\n\tint virtual_mem_addr;\n\tint virtual_reg_addr;\n\n\tint cmd_box_addr;\n\tint event_box_addr;\n\tstruct boot_attr boot_attr;\n\n\tu8 *fw;\n\tsize_t fw_len;\n\tu8 *nvs;\n\tsize_t nvs_len;\n\n\tu8 bssid[ETH_ALEN];\n\tu8 mac_addr[ETH_ALEN];\n\tu8 bss_type;\n\tu8 listen_int;\n\tint channel;\n\tbool monitor_present;\n\tbool joined;\n\n\tvoid *target_mem_map;\n\tstruct acx_data_path_params_resp *data_path;\n\n\t \n\tu32 data_in_count;\n\n\t \n\tstruct sk_buff_head tx_queue;\n\tbool tx_queue_stopped;\n\n\tstruct work_struct tx_work;\n\n\t \n\tstruct sk_buff *tx_frames[16];\n\n\t \n\tu32 next_tx_complete;\n\n\t \n\tu32 rx_counter;\n\n\t \n\tu32 rx_handled;\n\n\t \n\tu32 rx_current_buffer;\n\tu32 rx_last_id;\n\n\t \n\tu32 intr_mask;\n\tstruct work_struct irq_work;\n\n\t \n\tu32 event_mask;\n\n\t \n\tu32 mbox_ptr[2];\n\n\t \n\tbool scanning;\n\n\t \n\tu32 default_key;\n\n\tunsigned int tx_mgmt_frm_rate;\n\tunsigned int tx_mgmt_frm_mod;\n\n\tunsigned int rx_config;\n\tunsigned int rx_filter;\n\n\t \n\tbool elp;\n\n\tstruct delayed_work elp_work;\n\n\tenum wl1251_station_mode station_mode;\n\n\t \n\tbool psm_requested;\n\n\t \n\tu8 psm_entry_retry;\n\n\tu16 beacon_int;\n\tu8 dtim_period;\n\n\t \n\tint power_level;\n\n\tint rssi_thold;\n\n\tstruct wl1251_stats stats;\n\tstruct wl1251_debugfs debugfs;\n\n\t__le32 buffer_32;\n\tu32 buffer_cmd;\n\tu8 buffer_busyword[WL1251_BUSY_WORD_LEN];\n\tstruct wl1251_rx_descriptor *rx_descriptor;\n\n\tstruct ieee80211_vif *vif;\n\n\tu32 chip_id;\n\tchar fw_ver[21];\n\n\t \n\ts8 noise;\n};\n\nint wl1251_plt_start(struct wl1251 *wl);\nint wl1251_plt_stop(struct wl1251 *wl);\n\nstruct ieee80211_hw *wl1251_alloc_hw(void);\nint wl1251_free_hw(struct wl1251 *wl);\nint wl1251_init_ieee80211(struct wl1251 *wl);\nvoid wl1251_enable_interrupts(struct wl1251 *wl);\nvoid wl1251_disable_interrupts(struct wl1251 *wl);\n\n#define DEFAULT_HW_GEN_MODULATION_TYPE    CCK_LONG  \n#define DEFAULT_HW_GEN_TX_RATE          RATE_2MBPS\n#define JOIN_TIMEOUT 5000  \n\n#define WL1251_DEFAULT_POWER_LEVEL 20\n\n#define WL1251_TX_QUEUE_LOW_WATERMARK  10\n#define WL1251_TX_QUEUE_HIGH_WATERMARK 25\n\n#define WL1251_DEFAULT_BEACON_INT 100\n#define WL1251_DEFAULT_DTIM_PERIOD 1\n\n#define WL1251_DEFAULT_CHANNEL 0\n\n#define WL1251_DEFAULT_BET_CONSECUTIVE 10\n\n#define CHIP_ID_1251_PG10\t           (0x7010101)\n#define CHIP_ID_1251_PG11\t           (0x7020101)\n#define CHIP_ID_1251_PG12\t           (0x7030101)\n#define CHIP_ID_1271_PG10\t           (0x4030101)\n#define CHIP_ID_1271_PG20\t           (0x4030111)\n\n#define WL1251_FW_NAME \"ti-connectivity/wl1251-fw.bin\"\n#define WL1251_NVS_NAME \"ti-connectivity/wl1251-nvs.bin\"\n\n#define WL1251_POWER_ON_SLEEP 10  \n\n#define WL1251_PART_DOWN_MEM_START\t0x0\n#define WL1251_PART_DOWN_MEM_SIZE\t0x16800\n#define WL1251_PART_DOWN_REG_START\tREGISTERS_BASE\n#define WL1251_PART_DOWN_REG_SIZE\tREGISTERS_DOWN_SIZE\n\n#define WL1251_PART_WORK_MEM_START\t0x28000\n#define WL1251_PART_WORK_MEM_SIZE\t0x14000\n#define WL1251_PART_WORK_REG_START\tREGISTERS_BASE\n#define WL1251_PART_WORK_REG_SIZE\tREGISTERS_WORK_SIZE\n\n#define WL1251_DEFAULT_LOW_RSSI_WEIGHT          10\n#define WL1251_DEFAULT_LOW_RSSI_DEPTH           10\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}