{
  "module_name": "lmac.h",
  "hash_id": "e680df5a99e0a2eae35179d1c555f6d5f146d57b6446c72217a412d06684c639",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intersil/p54/lmac.h",
  "human_readable_source": " \n \n\n#ifndef LMAC_H\n#define LMAC_H\n\nenum p54_control_frame_types {\n\tP54_CONTROL_TYPE_SETUP = 0,\n\tP54_CONTROL_TYPE_SCAN,\n\tP54_CONTROL_TYPE_TRAP,\n\tP54_CONTROL_TYPE_DCFINIT,\n\tP54_CONTROL_TYPE_RX_KEYCACHE,\n\tP54_CONTROL_TYPE_TIM,\n\tP54_CONTROL_TYPE_PSM,\n\tP54_CONTROL_TYPE_TXCANCEL,\n\tP54_CONTROL_TYPE_TXDONE,\n\tP54_CONTROL_TYPE_BURST,\n\tP54_CONTROL_TYPE_STAT_READBACK,\n\tP54_CONTROL_TYPE_BBP,\n\tP54_CONTROL_TYPE_EEPROM_READBACK,\n\tP54_CONTROL_TYPE_LED,\n\tP54_CONTROL_TYPE_GPIO,\n\tP54_CONTROL_TYPE_TIMER,\n\tP54_CONTROL_TYPE_MODULATION,\n\tP54_CONTROL_TYPE_SYNTH_CONFIG,\n\tP54_CONTROL_TYPE_DETECTOR_VALUE,\n\tP54_CONTROL_TYPE_XBOW_SYNTH_CFG,\n\tP54_CONTROL_TYPE_CCE_QUIET,\n\tP54_CONTROL_TYPE_PSM_STA_UNLOCK,\n\tP54_CONTROL_TYPE_PCS,\n\tP54_CONTROL_TYPE_BT_BALANCER = 28,\n\tP54_CONTROL_TYPE_GROUP_ADDRESS_TABLE = 30,\n\tP54_CONTROL_TYPE_ARPTABLE = 31,\n\tP54_CONTROL_TYPE_BT_OPTIONS = 35,\n};\n\n#define P54_HDR_FLAG_CONTROL\t\tBIT(15)\n#define P54_HDR_FLAG_CONTROL_OPSET\t(BIT(15) + BIT(0))\n#define P54_HDR_FLAG_DATA_ALIGN\t\tBIT(14)\n\n#define P54_HDR_FLAG_DATA_OUT_PROMISC\t\tBIT(0)\n#define P54_HDR_FLAG_DATA_OUT_TIMESTAMP\t\tBIT(1)\n#define P54_HDR_FLAG_DATA_OUT_SEQNR\t\tBIT(2)\n#define P54_HDR_FLAG_DATA_OUT_BIT3\t\tBIT(3)\n#define P54_HDR_FLAG_DATA_OUT_BURST\t\tBIT(4)\n#define P54_HDR_FLAG_DATA_OUT_NOCANCEL\t\tBIT(5)\n#define P54_HDR_FLAG_DATA_OUT_CLEARTIM\t\tBIT(6)\n#define P54_HDR_FLAG_DATA_OUT_HITCHHIKE\t\tBIT(7)\n#define P54_HDR_FLAG_DATA_OUT_COMPRESS\t\tBIT(8)\n#define P54_HDR_FLAG_DATA_OUT_CONCAT\t\tBIT(9)\n#define P54_HDR_FLAG_DATA_OUT_PCS_ACCEPT\tBIT(10)\n#define P54_HDR_FLAG_DATA_OUT_WAITEOSP\t\tBIT(11)\n\n#define P54_HDR_FLAG_DATA_IN_FCS_GOOD\t\tBIT(0)\n#define P54_HDR_FLAG_DATA_IN_MATCH_MAC\t\tBIT(1)\n#define P54_HDR_FLAG_DATA_IN_MCBC\t\tBIT(2)\n#define P54_HDR_FLAG_DATA_IN_BEACON\t\tBIT(3)\n#define P54_HDR_FLAG_DATA_IN_MATCH_BSS\t\tBIT(4)\n#define P54_HDR_FLAG_DATA_IN_BCAST_BSS\t\tBIT(5)\n#define P54_HDR_FLAG_DATA_IN_DATA\t\tBIT(6)\n#define P54_HDR_FLAG_DATA_IN_TRUNCATED\t\tBIT(7)\n#define P54_HDR_FLAG_DATA_IN_BIT8\t\tBIT(8)\n#define P54_HDR_FLAG_DATA_IN_TRANSPARENT\tBIT(9)\n\nstruct p54_hdr {\n\t__le16 flags;\n\t__le16 len;\n\t__le32 req_id;\n\t__le16 type;\t \n\tu8 rts_tries;\n\tu8 tries;\n\tu8 data[];\n} __packed;\n\n#define GET_REQ_ID(skb)\t\t\t\t\t\t\t\\\n\t(((struct p54_hdr *) ((struct sk_buff *) skb)->data)->req_id)\t\\\n\n#define FREE_AFTER_TX(skb)\t\t\t\t\t\t\\\n\t((((struct p54_hdr *) ((struct sk_buff *) skb)->data)->\t\t\\\n\tflags) == cpu_to_le16(P54_HDR_FLAG_CONTROL_OPSET))\n\n#define IS_DATA_FRAME(skb)\t\t\t\t\t\t\\\n\t(!((((struct p54_hdr *) ((struct sk_buff *) skb)->data)->\t\\\n\tflags) & cpu_to_le16(P54_HDR_FLAG_CONTROL)))\n\n#define GET_HW_QUEUE(skb)\t\t\t\t\t\t\\\n\t(((struct p54_tx_data *)((struct p54_hdr *)\t\t\t\\\n\tskb->data)->data)->hw_queue)\n\n \n#define IF_ID_ISL36356A\t\t\t0x0001\t \n#define IF_ID_MVC\t\t\t0x0003\t \n#define IF_ID_DEBUG\t\t\t0x0008\t \n#define IF_ID_PRODUCT\t\t\t0x0009\n#define IF_ID_OEM\t\t\t0x000a\n#define IF_ID_PCI3877\t\t\t0x000b\t \n#define IF_ID_ISL37704C\t\t\t0x000c\t \n#define IF_ID_ISL39000\t\t\t0x000f\t \n#define IF_ID_ISL39300A\t\t\t0x0010\t \n#define IF_ID_ISL37700_UAP\t\t0x0016\t \n#define IF_ID_ISL39000_UAP\t\t0x0017\t \n#define IF_ID_LMAC\t\t\t0x001a\t \n\nstruct exp_if {\n\t__le16 role;\n\t__le16 if_id;\n\t__le16 variant;\n\t__le16 btm_compat;\n\t__le16 top_compat;\n} __packed;\n\nstruct dep_if {\n\t__le16 role;\n\t__le16 if_id;\n\t__le16 variant;\n} __packed;\n\n \nstruct p54_eeprom_lm86 {\n\tunion {\n\t\tstruct {\n\t\t\t__le16 offset;\n\t\t\t__le16 len;\n\t\t\tu8 data[0];\n\t\t} __packed v1;\n\t\tstruct {\n\t\t\t__le32 offset;\n\t\t\t__le16 len;\n\t\t\tu8 magic2;\n\t\t\tu8 pad;\n\t\t\tu8 magic[4];\n\t\t\tu8 data[0];\n\t\t} __packed v2;\n\t}  __packed;\n} __packed;\n\nenum p54_rx_decrypt_status {\n\tP54_DECRYPT_NONE = 0,\n\tP54_DECRYPT_OK,\n\tP54_DECRYPT_NOKEY,\n\tP54_DECRYPT_NOMICHAEL,\n\tP54_DECRYPT_NOCKIPMIC,\n\tP54_DECRYPT_FAIL_WEP,\n\tP54_DECRYPT_FAIL_TKIP,\n\tP54_DECRYPT_FAIL_MICHAEL,\n\tP54_DECRYPT_FAIL_CKIPKP,\n\tP54_DECRYPT_FAIL_CKIPMIC,\n\tP54_DECRYPT_FAIL_AESCCMP\n};\n\nstruct p54_rx_data {\n\t__le16 flags;\n\t__le16 len;\n\t__le16 freq;\n\tu8 antenna;\n\tu8 rate;\n\tu8 rssi;\n\tu8 quality;\n\tu8 decrypt_status;\n\tu8 rssi_raw;\n\t__le32 tsf32;\n\t__le32 unalloc0;\n\tu8 align[];\n} __packed;\n\nenum p54_trap_type {\n\tP54_TRAP_SCAN = 0,\n\tP54_TRAP_TIMER,\n\tP54_TRAP_BEACON_TX,\n\tP54_TRAP_FAA_RADIO_ON,\n\tP54_TRAP_FAA_RADIO_OFF,\n\tP54_TRAP_RADAR,\n\tP54_TRAP_NO_BEACON,\n\tP54_TRAP_TBTT,\n\tP54_TRAP_SCO_ENTER,\n\tP54_TRAP_SCO_EXIT\n};\n\nstruct p54_trap {\n\t__le16 event;\n\t__le16 frequency;\n} __packed;\n\nenum p54_frame_sent_status {\n\tP54_TX_OK = 0,\n\tP54_TX_FAILED,\n\tP54_TX_PSM,\n\tP54_TX_PSM_CANCELLED = 4\n};\n\nstruct p54_frame_sent {\n\tu8 status;\n\tu8 tries;\n\tu8 ack_rssi;\n\tu8 quality;\n\t__le16 seq;\n\tu8 antenna;\n\tu8 padding;\n} __packed;\n\nenum p54_tx_data_crypt {\n\tP54_CRYPTO_NONE = 0,\n\tP54_CRYPTO_WEP,\n\tP54_CRYPTO_TKIP,\n\tP54_CRYPTO_TKIPMICHAEL,\n\tP54_CRYPTO_CCX_WEPMIC,\n\tP54_CRYPTO_CCX_KPMIC,\n\tP54_CRYPTO_CCX_KP,\n\tP54_CRYPTO_AESCCMP\n};\n\nenum p54_tx_data_queue {\n\tP54_QUEUE_BEACON\t= 0,\n\tP54_QUEUE_FWSCAN\t= 1,\n\tP54_QUEUE_MGMT\t\t= 2,\n\tP54_QUEUE_CAB\t\t= 3,\n\tP54_QUEUE_DATA\t\t= 4,\n\n\tP54_QUEUE_AC_NUM\t= 4,\n\tP54_QUEUE_AC_VO\t\t= 4,\n\tP54_QUEUE_AC_VI\t\t= 5,\n\tP54_QUEUE_AC_BE\t\t= 6,\n\tP54_QUEUE_AC_BK\t\t= 7,\n\n\t \n\tP54_QUEUE_NUM\t\t= 8,\n};\n\n#define IS_QOS_QUEUE(n)\t(n >= P54_QUEUE_DATA)\n\nstruct p54_tx_data {\n\tu8 rateset[8];\n\tu8 rts_rate_idx;\n\tu8 crypt_offset;\n\tu8 key_type;\n\tu8 key_len;\n\tu8 key[16];\n\tu8 hw_queue;\n\tu8 backlog;\n\t__le16 durations[4];\n\tu8 tx_antenna;\n\tunion {\n\t\tstruct {\n\t\t\tu8 cts_rate;\n\t\t\t__le16 output_power;\n\t\t} __packed longbow;\n\t\tstruct {\n\t\t\tu8 output_power;\n\t\t\tu8 cts_rate;\n\t\t\tu8 unalloc;\n\t\t} __packed normal;\n\t} __packed;\n\tu8 unalloc2[2];\n\tu8 align[];\n} __packed;\n\n \n#define P54_TX_FRAME_LIFETIME 2000\n#define P54_TX_TIMEOUT 4000\n#define P54_STATISTICS_UPDATE 5000\n\n#define P54_FILTER_TYPE_NONE\t\t0\n#define P54_FILTER_TYPE_STATION\t\tBIT(0)\n#define P54_FILTER_TYPE_IBSS\t\tBIT(1)\n#define P54_FILTER_TYPE_AP\t\tBIT(2)\n#define P54_FILTER_TYPE_TRANSPARENT\tBIT(3)\n#define P54_FILTER_TYPE_PROMISCUOUS\tBIT(4)\n#define P54_FILTER_TYPE_HIBERNATE\tBIT(5)\n#define P54_FILTER_TYPE_NOACK\t\tBIT(6)\n#define P54_FILTER_TYPE_RX_DISABLED\tBIT(7)\n\nstruct p54_setup_mac {\n\t__le16 mac_mode;\n\tu8 mac_addr[ETH_ALEN];\n\tu8 bssid[ETH_ALEN];\n\tu8 rx_antenna;\n\tu8 rx_align;\n\tunion {\n\t\tstruct {\n\t\t\t__le32 basic_rate_mask;\n\t\t\tu8 rts_rates[8];\n\t\t\t__le32 rx_addr;\n\t\t\t__le16 max_rx;\n\t\t\t__le16 rxhw;\n\t\t\t__le16 wakeup_timer;\n\t\t\t__le16 unalloc0;\n\t\t} __packed v1;\n\t\tstruct {\n\t\t\t__le32 rx_addr;\n\t\t\t__le16 max_rx;\n\t\t\t__le16 rxhw;\n\t\t\t__le16 timer;\n\t\t\t__le16 truncate;\n\t\t\t__le32 basic_rate_mask;\n\t\t\tu8 sbss_offset;\n\t\t\tu8 mcast_window;\n\t\t\tu8 rx_rssi_threshold;\n\t\t\tu8 rx_ed_threshold;\n\t\t\t__le32 ref_clock;\n\t\t\t__le16 lpf_bandwidth;\n\t\t\t__le16 osc_start_delay;\n\t\t} __packed v2;\n\t} __packed;\n} __packed;\n\n#define P54_SETUP_V1_LEN 40\n#define P54_SETUP_V2_LEN (sizeof(struct p54_setup_mac))\n\n#define P54_SCAN_EXIT\tBIT(0)\n#define P54_SCAN_TRAP\tBIT(1)\n#define P54_SCAN_ACTIVE BIT(2)\n#define P54_SCAN_FILTER BIT(3)\n\nstruct p54_scan_head {\n\t__le16 mode;\n\t__le16 dwell;\n\tu8 scan_params[20];\n\t__le16 freq;\n} __packed;\n\nstruct p54_pa_curve_data_sample {\n\tu8 rf_power;\n\tu8 pa_detector;\n\tu8 data_barker;\n\tu8 data_bpsk;\n\tu8 data_qpsk;\n\tu8 data_16qam;\n\tu8 data_64qam;\n\tu8 padding;\n} __packed;\n\nstruct p54_scan_body {\n\tu8 pa_points_per_curve;\n\tu8 val_barker;\n\tu8 val_bpsk;\n\tu8 val_qpsk;\n\tu8 val_16qam;\n\tu8 val_64qam;\n\tstruct p54_pa_curve_data_sample curve_data[8];\n\tu8 dup_bpsk;\n\tu8 dup_qpsk;\n\tu8 dup_16qam;\n\tu8 dup_64qam;\n} __packed;\n\n \nstruct p54_channel_output_limit_longbow {\n\t__le16 rf_power_points[12];\n} __packed;\n\nstruct p54_pa_curve_data_sample_longbow {\n\t__le16 rf_power;\n\t__le16 pa_detector;\n\tstruct {\n\t\t__le16 data[4];\n\t} points[3] __packed;\n} __packed;\n\nstruct p54_scan_body_longbow {\n\tstruct p54_channel_output_limit_longbow power_limits;\n\tstruct p54_pa_curve_data_sample_longbow curve_data[8];\n\t__le16 unkn[6];\t\t \n} __packed;\n\nunion p54_scan_body_union {\n\tstruct p54_scan_body normal;\n\tstruct p54_scan_body_longbow longbow;\n} __packed;\n\nstruct p54_scan_tail_rate {\n\t__le32 basic_rate_mask;\n\tu8 rts_rates[8];\n} __packed;\n\nstruct p54_led {\n\t__le16 flags;\n\t__le16 mask[2];\n\t__le16 delay[2];\n} __packed;\n\nstruct p54_edcf {\n\tu8 flags;\n\tu8 slottime;\n\tu8 sifs;\n\tu8 eofpad;\n\tstruct p54_edcf_queue_param queue[8];\n\tu8 mapping[4];\n\t__le16 frameburst;\n\t__le16 round_trip_delay;\n} __packed;\n\nstruct p54_statistics {\n\t__le32 rx_success;\n\t__le32 rx_bad_fcs;\n\t__le32 rx_abort;\n\t__le32 rx_abort_phy;\n\t__le32 rts_success;\n\t__le32 rts_fail;\n\t__le32 tsf32;\n\t__le32 airtime;\n\t__le32 noise;\n\t__le32 sample_noise[8];\n\t__le32 sample_cca;\n\t__le32 sample_tx;\n} __packed;\n\nstruct p54_xbow_synth {\n\t__le16 magic1;\n\t__le16 magic2;\n\t__le16 freq;\n\tu32 padding[5];\n} __packed;\n\nstruct p54_timer {\n\t__le32 interval;\n} __packed;\n\nstruct p54_keycache {\n\tu8 entry;\n\tu8 key_id;\n\tu8 mac[ETH_ALEN];\n\tu8 padding[2];\n\tu8 key_type;\n\tu8 key_len;\n\tu8 key[24];\n} __packed;\n\nstruct p54_burst {\n\tu8 flags;\n\tu8 queue;\n\tu8 backlog;\n\tu8 pad;\n\t__le16 durations[32];\n} __packed;\n\nstruct p54_psm_interval {\n\t__le16 interval;\n\t__le16 periods;\n} __packed;\n\n#define P54_PSM_CAM\t\t\t0\n#define P54_PSM\t\t\t\tBIT(0)\n#define P54_PSM_DTIM\t\t\tBIT(1)\n#define P54_PSM_MCBC\t\t\tBIT(2)\n#define P54_PSM_CHECKSUM\t\tBIT(3)\n#define P54_PSM_SKIP_MORE_DATA\t\tBIT(4)\n#define P54_PSM_BEACON_TIMEOUT\t\tBIT(5)\n#define P54_PSM_HFOSLEEP\t\tBIT(6)\n#define P54_PSM_AUTOSWITCH_SLEEP\tBIT(7)\n#define P54_PSM_LPIT\t\t\tBIT(8)\n#define P54_PSM_BF_UCAST_SKIP\t\tBIT(9)\n#define P54_PSM_BF_MCAST_SKIP\t\tBIT(10)\n\nstruct p54_psm {\n\t__le16 mode;\n\t__le16 aid;\n\tstruct p54_psm_interval intervals[4];\n\tu8 beacon_rssi_skip_max;\n\tu8 rssi_delta_threshold;\n\tu8 nr;\n\tu8 exclude[1];\n} __packed;\n\n#define MC_FILTER_ADDRESS_NUM 4\n\nstruct p54_group_address_table {\n\t__le16 filter_enable;\n\t__le16 num_address;\n\tu8 mac_list[MC_FILTER_ADDRESS_NUM][ETH_ALEN];\n} __packed;\n\nstruct p54_txcancel {\n\t__le32 req_id;\n} __packed;\n\nstruct p54_sta_unlock {\n\tu8 addr[ETH_ALEN];\n\tu16 padding;\n} __packed;\n\n#define P54_TIM_CLEAR BIT(15)\nstruct p54_tim {\n\tu8 count;\n\tu8 padding[3];\n\t__le16 entry[8];\n} __packed;\n\nstruct p54_cce_quiet {\n\t__le32 period;\n} __packed;\n\nstruct p54_bt_balancer {\n\t__le16 prio_thresh;\n\t__le16 acl_thresh;\n} __packed;\n\nstruct p54_arp_table {\n\t__le16 filter_enable;\n\tu8 ipv4_addr[4];\n} __packed;\n\n \nint p54_set_leds(struct p54_common *priv);\nint p54_init_leds(struct p54_common *priv);\nvoid p54_unregister_leds(struct p54_common *priv);\n\n \nvoid p54_tx_80211(struct ieee80211_hw *dev,\n\t\t  struct ieee80211_tx_control *control,\n\t\t  struct sk_buff *skb);\nint p54_tx_cancel(struct p54_common *priv, __le32 req_id);\nvoid p54_tx(struct p54_common *priv, struct sk_buff *skb);\n\n \nint p54_init_xbow_synth(struct p54_common *priv);\nint p54_scan(struct p54_common *priv, u16 mode, u16 dwell);\n\n \nint p54_sta_unlock(struct p54_common *priv, u8 *addr);\nint p54_update_beacon_tim(struct p54_common *priv, u16 aid, bool set);\nint p54_setup_mac(struct p54_common *priv);\nint p54_set_ps(struct p54_common *priv);\nint p54_fetch_statistics(struct p54_common *priv);\nint p54_set_groupfilter(struct p54_common *priv);\n\n \nint p54_set_edcf(struct p54_common *priv);\n\n \nint p54_upload_key(struct p54_common *priv, u8 algo, int slot,\n\t\t   u8 idx, u8 len, u8 *addr, u8* key);\n\n \nint p54_download_eeprom(struct p54_common *priv, void *buf,\n\t\t\tu16 offset, u16 len);\nstruct p54_rssi_db_entry *p54_rssi_find(struct p54_common *p, const u16 freq);\n\n \nu8 *p54_find_ie(struct sk_buff *skb, u8 ie);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}