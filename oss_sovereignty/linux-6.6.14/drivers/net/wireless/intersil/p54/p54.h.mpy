{
  "module_name": "p54.h",
  "hash_id": "5aae693fa971085d76494af1e5d9bba1d162d5adedd5ebdcdb8cef998b1abf0e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intersil/p54/p54.h",
  "human_readable_source": " \n \n\n#ifndef P54_H\n#define P54_H\n\n#ifdef CONFIG_P54_LEDS\n#include <linux/leds.h>\n#endif  \n\n#define ISL38XX_DEV_FIRMWARE_ADDR 0x20000\n\n#define BR_CODE_MIN\t\t\t0x80000000\n#define BR_CODE_COMPONENT_ID\t\t0x80000001\n#define BR_CODE_COMPONENT_VERSION\t0x80000002\n#define BR_CODE_DEPENDENT_IF\t\t0x80000003\n#define BR_CODE_EXPOSED_IF\t\t0x80000004\n#define BR_CODE_DESCR\t\t\t0x80000101\n#define BR_CODE_MAX\t\t\t0x8FFFFFFF\n#define BR_CODE_END_OF_BRA\t\t0xFF0000FF\n#define LEGACY_BR_CODE_END_OF_BRA\t0xFFFFFFFF\n\nstruct bootrec {\n\t__le32 code;\n\t__le32 len;\n\tu32 data[10];\n} __packed;\n\n \n#define BR_INTERFACE_ROLE_SERVER\t0x0000\n#define BR_INTERFACE_ROLE_CLIENT\t0x8000\n\n#define BR_DESC_PRIV_CAP_WEP\t\tBIT(0)\n#define BR_DESC_PRIV_CAP_TKIP\t\tBIT(1)\n#define BR_DESC_PRIV_CAP_MICHAEL\tBIT(2)\n#define BR_DESC_PRIV_CAP_CCX_CP\t\tBIT(3)\n#define BR_DESC_PRIV_CAP_CCX_MIC\tBIT(4)\n#define BR_DESC_PRIV_CAP_AESCCMP\tBIT(5)\n\nstruct bootrec_desc {\n\t__le16 modes;\n\t__le16 flags;\n\t__le32 rx_start;\n\t__le32 rx_end;\n\tu8 headroom;\n\tu8 tailroom;\n\tu8 tx_queues;\n\tu8 tx_depth;\n\tu8 privacy_caps;\n\tu8 rx_keycache_size;\n\tu8 time_size;\n\tu8 padding;\n\tu8 rates[16];\n\tu8 padding2[4];\n\t__le16 rx_mtu;\n} __packed;\n\n#define FW_FMAC 0x464d4143\n#define FW_LM86 0x4c4d3836\n#define FW_LM87 0x4c4d3837\n#define FW_LM20 0x4c4d3230\n\nstruct bootrec_comp_id {\n\t__le32 fw_variant;\n} __packed;\n\nstruct bootrec_comp_ver {\n\tchar fw_version[24];\n} __packed;\n\nstruct bootrec_end {\n\t__le16 crc;\n\tu8 padding[2];\n\tu8 md5[16];\n} __packed;\n\n \n#define P54_TX_INFO_DATA_SIZE\t\t16\n\n \nstruct p54_tx_info {\n\tu32 start_addr;\n\tu32 end_addr;\n\tunion {\n\t\tvoid *data[P54_TX_INFO_DATA_SIZE / sizeof(void *)];\n\t\tstruct {\n\t\t\tu32 extra_len;\n\t\t};\n\t};\n};\n\n#define P54_MAX_CTRL_FRAME_LEN\t\t0x1000\n\n#define P54_SET_QUEUE(queue, ai_fs, cw_min, cw_max, _txop)\t\\\ndo {\t\t\t\t\t\t\t\t\\\n\tqueue.aifs = cpu_to_le16(ai_fs);\t\t\t\\\n\tqueue.cwmin = cpu_to_le16(cw_min);\t\t\t\\\n\tqueue.cwmax = cpu_to_le16(cw_max);\t\t\t\\\n\tqueue.txop = cpu_to_le16(_txop);\t\t\t\\\n} while (0)\n\nstruct p54_edcf_queue_param {\n\t__le16 aifs;\n\t__le16 cwmin;\n\t__le16 cwmax;\n\t__le16 txop;\n} __packed;\n\nstruct p54_rssi_db_entry {\n\tu16 freq;\n\ts16 mul;\n\ts16 add;\n\ts16 longbow_unkn;\n\ts16 longbow_unk2;\n};\n\nstruct p54_cal_database {\n\tsize_t entries;\n\tsize_t entry_size;\n\tsize_t offset;\n\tsize_t len;\n\tu8 data[];\n};\n\n#define EEPROM_READBACK_LEN 0x3fc\n\nenum fw_state {\n\tFW_STATE_OFF,\n\tFW_STATE_BOOTING,\n\tFW_STATE_READY,\n\tFW_STATE_RESET,\n\tFW_STATE_RESETTING,\n};\n\n#ifdef CONFIG_P54_LEDS\n\n#define P54_LED_MAX_NAME_LEN 31\n\nstruct p54_led_dev {\n\tstruct ieee80211_hw *hw_dev;\n\tstruct led_classdev led_dev;\n\tchar name[P54_LED_MAX_NAME_LEN + 1];\n\n\tunsigned int toggled;\n\tunsigned int index;\n\tunsigned int registered;\n};\n\n#endif  \n\nstruct p54_tx_queue_stats {\n\tunsigned int len;\n\tunsigned int limit;\n\tunsigned int count;\n};\n\nstruct p54_common {\n\tstruct ieee80211_hw *hw;\n\tstruct ieee80211_vif *vif;\n\tvoid (*tx)(struct ieee80211_hw *dev, struct sk_buff *skb);\n\tint (*open)(struct ieee80211_hw *dev);\n\tvoid (*stop)(struct ieee80211_hw *dev);\n\tstruct sk_buff_head tx_pending;\n\tstruct sk_buff_head tx_queue;\n\tstruct mutex conf_mutex;\n\tbool registered;\n\n\t \n\tu32 rx_start;\n\tu32 rx_end;\n\tu16 rx_mtu;\n\tu8 headroom;\n\tu8 tailroom;\n\n\t \n\tunsigned int tx_hdr_len;\n\tunsigned int fw_var;\n\tunsigned int fw_interface;\n\tu8 version;\n\n\t \n\tbool use_short_slot;\n\tspinlock_t tx_stats_lock;\n\tstruct p54_tx_queue_stats tx_stats[8];\n\tstruct p54_edcf_queue_param qos_params[8];\n\n\t \n\tu16 rxhw;\n\tu8 rx_diversity_mask;\n\tu8 tx_diversity_mask;\n\tunsigned int output_power;\n\tstruct p54_rssi_db_entry *cur_rssi;\n\tstruct ieee80211_channel *curchan;\n\tstruct survey_info *survey;\n\tunsigned int chan_num;\n\tstruct completion stat_comp;\n\tbool update_stats;\n\tstruct {\n\t\tunsigned int timestamp;\n\t\tunsigned int cached_cca;\n\t\tunsigned int cached_tx;\n\t\tunsigned int cached_rssi;\n\t\tu64 active;\n\t\tu64 cca;\n\t\tu64 tx;\n\t\tu64 rssi;\n\t} survey_raw;\n\n\tint noise;\n\t \n\tstruct pda_iq_autocal_entry *iq_autocal;\n\tunsigned int iq_autocal_len;\n\tstruct p54_cal_database *curve_data;\n\tstruct p54_cal_database *output_limit;\n\tstruct p54_cal_database *rssi_db;\n\tstruct ieee80211_supported_band *band_table[NUM_NL80211_BANDS];\n\n\t \n\tu8 mac_addr[ETH_ALEN];\n\tu8 bssid[ETH_ALEN];\n\tu8 mc_maclist[4][ETH_ALEN];\n\tu16 wakeup_timer;\n\tunsigned int filter_flags;\n\tint mc_maclist_num;\n\tint mode;\n\tu32 tsf_low32, tsf_high32;\n\tu32 basic_rate_mask;\n\tu16 aid;\n\tu8 coverage_class;\n\tbool phy_idle;\n\tbool phy_ps;\n\tbool powersave_override;\n\t__le32 beacon_req_id;\n\tstruct completion beacon_comp;\n\n\t \n\tu8 privacy_caps;\n\tu8 rx_keycache_size;\n\tunsigned long *used_rxkeys;\n\n\t \n#ifdef CONFIG_P54_LEDS\n\tstruct p54_led_dev leds[4];\n\tstruct delayed_work led_work;\n#endif  \n\tu16 softled_state;\t\t \n\n\t \n\tstruct ieee80211_low_level_stats stats;\n\tstruct delayed_work work;\n\n\t \n\tvoid *eeprom;\n\tstruct completion eeprom_comp;\n\tstruct mutex eeprom_mutex;\n};\n\n \nint p54_rx(struct ieee80211_hw *dev, struct sk_buff *skb);\nvoid p54_free_skb(struct ieee80211_hw *dev, struct sk_buff *skb);\nint p54_parse_firmware(struct ieee80211_hw *dev, const struct firmware *fw);\nint p54_parse_eeprom(struct ieee80211_hw *dev, void *eeprom, int len);\nint p54_read_eeprom(struct ieee80211_hw *dev);\n\nstruct ieee80211_hw *p54_init_common(size_t priv_data_len);\nint p54_register_common(struct ieee80211_hw *dev, struct device *pdev);\nvoid p54_free_common(struct ieee80211_hw *dev);\n\nvoid p54_unregister_common(struct ieee80211_hw *dev);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}