{
  "module_name": "rf.c",
  "hash_id": "665e8676c31d9d4a3d42ae7274b3bd7bb5631d974c05e376b45fe7c41009dd0d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtlwifi/rtl8192ee/rf.c",
  "human_readable_source": "\n \n\n#include \"../wifi.h\"\n#include \"reg.h\"\n#include \"def.h\"\n#include \"phy.h\"\n#include \"rf.h\"\n#include \"dm.h\"\n\nstatic bool _rtl92ee_phy_rf6052_config_parafile(struct ieee80211_hw *hw);\n\nvoid rtl92ee_phy_rf6052_set_bandwidth(struct ieee80211_hw *hw, u8 bandwidth)\n{\n\tstruct rtl_priv *rtlpriv = rtl_priv(hw);\n\tstruct rtl_phy *rtlphy = &rtlpriv->phy;\n\n\tswitch (bandwidth) {\n\tcase HT_CHANNEL_WIDTH_20:\n\t\trtlphy->rfreg_chnlval[0] = ((rtlphy->rfreg_chnlval[0] &\n\t\t\t\t\t     0xfffff3ff) | BIT(10) | BIT(11));\n\t\trtl_set_rfreg(hw, RF90_PATH_A, RF_CHNLBW, RFREG_OFFSET_MASK,\n\t\t\t      rtlphy->rfreg_chnlval[0]);\n\t\trtl_set_rfreg(hw, RF90_PATH_B, RF_CHNLBW, RFREG_OFFSET_MASK,\n\t\t\t      rtlphy->rfreg_chnlval[0]);\n\t\tbreak;\n\tcase HT_CHANNEL_WIDTH_20_40:\n\t\trtlphy->rfreg_chnlval[0] = ((rtlphy->rfreg_chnlval[0] &\n\t\t\t\t\t     0xfffff3ff) | BIT(10));\n\t\trtl_set_rfreg(hw, RF90_PATH_A, RF_CHNLBW, RFREG_OFFSET_MASK,\n\t\t\t      rtlphy->rfreg_chnlval[0]);\n\t\trtl_set_rfreg(hw, RF90_PATH_B, RF_CHNLBW, RFREG_OFFSET_MASK,\n\t\t\t      rtlphy->rfreg_chnlval[0]);\n\t\tbreak;\n\tdefault:\n\t\tpr_err(\"unknown bandwidth: %#X\\n\", bandwidth);\n\t\tbreak;\n\t}\n}\n\nbool rtl92ee_phy_rf6052_config(struct ieee80211_hw *hw)\n{\n\tstruct rtl_priv *rtlpriv = rtl_priv(hw);\n\tstruct rtl_phy *rtlphy = &rtlpriv->phy;\n\n\tif (rtlphy->rf_type == RF_1T1R)\n\t\trtlphy->num_total_rfpath = 1;\n\telse\n\t\trtlphy->num_total_rfpath = 2;\n\n\treturn _rtl92ee_phy_rf6052_config_parafile(hw);\n}\n\nstatic bool _rtl92ee_phy_rf6052_config_parafile(struct ieee80211_hw *hw)\n{\n\tstruct rtl_priv *rtlpriv = rtl_priv(hw);\n\tstruct rtl_phy *rtlphy = &rtlpriv->phy;\n\tu32 u4_regvalue = 0;\n\tu8 rfpath;\n\tbool rtstatus = true;\n\tstruct bb_reg_def *pphyreg;\n\n\tfor (rfpath = 0; rfpath < rtlphy->num_total_rfpath; rfpath++) {\n\t\tpphyreg = &rtlphy->phyreg_def[rfpath];\n\n\t\tswitch (rfpath) {\n\t\tcase RF90_PATH_A:\n\t\tcase RF90_PATH_C:\n\t\t\tu4_regvalue = rtl_get_bbreg(hw, pphyreg->rfintfs,\n\t\t\t\t\t\t    BRFSI_RFENV);\n\t\t\tbreak;\n\t\tcase RF90_PATH_B:\n\t\tcase RF90_PATH_D:\n\t\t\tu4_regvalue = rtl_get_bbreg(hw, pphyreg->rfintfs,\n\t\t\t\t\t\t    BRFSI_RFENV << 16);\n\t\t\tbreak;\n\t\t}\n\n\t\trtl_set_bbreg(hw, pphyreg->rfintfe, BRFSI_RFENV << 16, 0x1);\n\t\tudelay(1);\n\n\t\trtl_set_bbreg(hw, pphyreg->rfintfo, BRFSI_RFENV, 0x1);\n\t\tudelay(1);\n\n\t\trtl_set_bbreg(hw, pphyreg->rfhssi_para2,\n\t\t\t      B3WIREADDREAALENGTH, 0x0);\n\t\tudelay(1);\n\n\t\trtl_set_bbreg(hw, pphyreg->rfhssi_para2, B3WIREDATALENGTH, 0x0);\n\t\tudelay(1);\n\n\t\tswitch (rfpath) {\n\t\tcase RF90_PATH_A:\n\t\t\trtstatus = rtl92ee_phy_config_rf_with_headerfile(hw,\n\t\t\t\t\t\t       (enum radio_path)rfpath);\n\t\t\tbreak;\n\t\tcase RF90_PATH_B:\n\t\t\trtstatus = rtl92ee_phy_config_rf_with_headerfile(hw,\n\t\t\t\t\t\t       (enum radio_path)rfpath);\n\t\t\tbreak;\n\t\tcase RF90_PATH_C:\n\t\t\tbreak;\n\t\tcase RF90_PATH_D:\n\t\t\tbreak;\n\t\t}\n\n\t\tswitch (rfpath) {\n\t\tcase RF90_PATH_A:\n\t\tcase RF90_PATH_C:\n\t\t\trtl_set_bbreg(hw, pphyreg->rfintfs,\n\t\t\t\t      BRFSI_RFENV, u4_regvalue);\n\t\t\tbreak;\n\t\tcase RF90_PATH_B:\n\t\tcase RF90_PATH_D:\n\t\t\trtl_set_bbreg(hw, pphyreg->rfintfs,\n\t\t\t\t      BRFSI_RFENV << 16, u4_regvalue);\n\t\t\tbreak;\n\t\t}\n\n\t\tif (!rtstatus) {\n\t\t\trtl_dbg(rtlpriv, COMP_INIT, DBG_TRACE,\n\t\t\t\t\"Radio[%d] Fail!!\\n\", rfpath);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\trtl_dbg(rtlpriv, COMP_INIT, DBG_TRACE, \"\\n\");\n\treturn rtstatus;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}