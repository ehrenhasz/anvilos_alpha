{
  "module_name": "trx.h",
  "hash_id": "2ee7054aaa1db931b08994ebe83d0fee2cb1faa686f34fda723d4361fb8b0b7a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtlwifi/rtl8723be/trx.h",
  "human_readable_source": " \n \n\n#ifndef __RTL8723BE_TRX_H__\n#define __RTL8723BE_TRX_H__\n\n#define TX_DESC_SIZE\t\t\t\t40\n#define TX_DESC_AGGR_SUBFRAME_SIZE\t\t32\n\n#define RX_DESC_SIZE\t\t\t\t32\n#define RX_DRV_INFO_SIZE_UNIT\t\t\t8\n\n#define\tTX_DESC_NEXT_DESC_OFFSET\t\t40\n#define USB_HWDESC_HEADER_LEN\t\t\t40\n#define CRCLENGTH\t\t\t\t4\n\nstatic inline void set_tx_desc_pkt_size(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, GENMASK(15, 0));\n}\n\nstatic inline void set_tx_desc_offset(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, GENMASK(23, 16));\n}\n\nstatic inline void set_tx_desc_bmc(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(24));\n}\n\nstatic inline void set_tx_desc_htc(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(25));\n}\n\nstatic inline void set_tx_desc_last_seg(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(26));\n}\n\nstatic inline void set_tx_desc_first_seg(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(27));\n}\n\nstatic inline void set_tx_desc_linip(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(28));\n}\n\nstatic inline void set_tx_desc_own(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(31));\n}\n\nstatic inline u32 get_tx_desc_own(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(31));\n}\n\nstatic inline void set_tx_desc_macid(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 1), __val, GENMASK(6, 0));\n}\n\nstatic inline void set_tx_desc_queue_sel(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 1), __val, GENMASK(12, 8));\n}\n\nstatic inline void set_tx_desc_rate_id(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 1), __val, GENMASK(20, 16));\n}\n\nstatic inline void set_tx_desc_sec_type(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 1), __val, GENMASK(23, 22));\n}\n\nstatic inline void set_tx_desc_pkt_offset(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 1), __val, GENMASK(28, 24));\n}\n\nstatic inline void set_tx_desc_agg_enable(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 2), __val, BIT(12));\n}\n\nstatic inline void set_tx_desc_rdg_enable(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 2), __val, BIT(13));\n}\n\nstatic inline void set_tx_desc_more_frag(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 2), __val, BIT(17));\n}\n\nstatic inline void set_tx_desc_ampdu_density(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 2), __val, GENMASK(22, 20));\n}\n\nstatic inline void set_tx_desc_hwseq_sel(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, GENMASK(7, 6));\n}\n\nstatic inline void set_tx_desc_use_rate(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(8));\n}\n\nstatic inline void set_tx_desc_disable_fb(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(10));\n}\n\nstatic inline void set_tx_desc_cts2self(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(11));\n}\n\nstatic inline void set_tx_desc_rts_enable(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(12));\n}\n\nstatic inline void set_tx_desc_hw_rts_enable(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(13));\n}\n\nstatic inline void set_tx_desc_nav_use_hdr(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, BIT(15));\n}\n\nstatic inline void set_tx_desc_max_agg_num(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 3), __val, GENMASK(21, 17));\n}\n\nstatic inline void set_tx_desc_tx_rate(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 4), __val, GENMASK(6, 0));\n}\n\nstatic inline void set_tx_desc_data_rate_fb_limit(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 4), __val, GENMASK(12, 8));\n}\n\nstatic inline void set_tx_desc_rts_rate_fb_limit(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 4), __val, GENMASK(16, 13));\n}\n\nstatic inline void set_tx_desc_rts_rate(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 4), __val, GENMASK(28, 24));\n}\n\nstatic inline void set_tx_desc_tx_sub_carrier(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 5), __val, GENMASK(3, 0));\n}\n\nstatic inline void set_tx_desc_data_shortgi(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 5), __val, BIT(4));\n}\n\nstatic inline void set_tx_desc_data_bw(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 5), __val, GENMASK(6, 5));\n}\n\nstatic inline void set_tx_desc_rts_short(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 5), __val, BIT(12));\n}\n\nstatic inline void set_tx_desc_rts_sc(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 5), __val, GENMASK(16, 13));\n}\n\nstatic inline void set_tx_desc_tx_buffer_size(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 7), __val, GENMASK(15, 0));\n}\n\nstatic inline void set_tx_desc_hwseq_en(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 8), __val, BIT(15));\n}\n\nstatic inline void set_tx_desc_seq(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits((__pdesc + 9), __val, GENMASK(23, 12));\n}\n\nstatic inline void set_tx_desc_tx_buffer_address(__le32 *__pdesc, u32 __val)\n{\n\t*(__pdesc + 10) = cpu_to_le32(__val);\n}\n\nstatic inline u32 get_tx_desc_tx_buffer_address(__le32 *__pdesc)\n{\n\treturn le32_to_cpu(*((__pdesc + 10)));\n}\n\nstatic inline void set_tx_desc_next_desc_address(__le32 *__pdesc, u32 __val)\n{\n\t*(__pdesc + 12) = cpu_to_le32(__val);\n}\n\nstatic inline u32 get_rx_desc_pkt_len(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, GENMASK(13, 0));\n}\n\nstatic inline u32 get_rx_desc_crc32(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(14));\n}\n\nstatic inline u32 get_rx_desc_icv(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(15));\n}\n\nstatic inline u32 get_rx_desc_drv_info_size(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, GENMASK(19, 16));\n}\n\nstatic inline u32 get_rx_desc_shift(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, GENMASK(25, 24));\n}\n\nstatic inline u32 get_rx_desc_physt(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(26));\n}\n\nstatic inline u32 get_rx_desc_swdec(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(27));\n}\n\nstatic inline u32 get_rx_desc_own(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*__pdesc, BIT(31));\n}\n\nstatic inline void set_rx_desc_pkt_len(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, GENMASK(13, 0));\n}\n\nstatic inline void set_rx_desc_eor(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(30));\n}\n\nstatic inline void set_rx_desc_own(__le32 *__pdesc, u32 __val)\n{\n\tle32p_replace_bits(__pdesc, __val, BIT(31));\n}\n\nstatic inline u32 get_rx_desc_macid(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 1), GENMASK(6, 0));\n}\n\nstatic inline u32 get_rx_desc_paggr(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 1), BIT(15));\n}\n\nstatic inline u32 get_rx_status_desc_rpt_sel(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 2), BIT(28));\n}\n\nstatic inline u32 get_rx_desc_rxmcs(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 3), GENMASK(6, 0));\n}\n\nstatic inline u32 get_rx_desc_rxht(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 3), BIT(6));\n}\n\nstatic inline u32 get_rx_status_desc_pattern_match(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 3), BIT(29));\n}\n\nstatic inline u32 get_rx_status_desc_unicast_match(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 3), BIT(30));\n}\n\nstatic inline u32 get_rx_status_desc_magic_match(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 3), BIT(31));\n}\n\nstatic inline u32 get_rx_desc_splcp(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 4), BIT(0));\n}\n\nstatic inline u32 get_rx_desc_bw(__le32 *__pdesc)\n{\n\treturn le32_get_bits(*(__pdesc + 4), GENMASK(5, 4));\n}\n\nstatic inline u32 get_rx_desc_tsfl(__le32 *__pdesc)\n{\n\treturn le32_to_cpu(*((__pdesc + 5)));\n}\n\nstatic inline u32 get_rx_desc_buff_addr(__le32 *__pdesc)\n{\n\treturn le32_to_cpu(*((__pdesc + 6)));\n}\n\nstatic inline void set_rx_desc_buff_addr(__le32 *__pdesc, u32 __val)\n{\n\t*(__pdesc + 6) = cpu_to_le32(__val);\n}\n\n \n\nstatic inline u32 get_rx_rpt2_desc_macid_valid_1(__le32 *__rxstatusdesc)\n{\n\treturn le32_to_cpu(*((__rxstatusdesc + 4)));\n}\n\nstatic inline u32 get_rx_rpt2_desc_macid_valid_2(__le32 *__rxstatusdesc)\n{\n\treturn le32_to_cpu(*((__rxstatusdesc + 5)));\n}\n\nstatic inline void set_earlymode_pktnum(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits(__paddr, __value, GENMASK(3, 0));\n}\n\nstatic inline void set_earlymode_len0(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits(__paddr, __value, GENMASK(15, 4));\n}\n\nstatic inline void set_earlymode_len1(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits(__paddr, __value, GENMASK(27, 16));\n}\n\nstatic inline void set_earlymode_len2_1(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits(__paddr, __value, GENMASK(31, 28));\n}\n\nstatic inline void set_earlymode_len2_2(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits((__paddr + 1), __value, GENMASK(7, 0));\n}\n\nstatic inline void set_earlymode_len3(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits((__paddr + 1), __value, GENMASK(19, 8));\n}\n\nstatic inline void set_earlymode_len4(__le32 *__paddr, u32 __value)\n{\n\tle32p_replace_bits((__paddr + 1), __value, GENMASK(31, 20));\n}\n\nstatic inline void clear_pci_tx_desc_content(__le32 *__pdesc, u32 _size)\n{\n\tif (_size > TX_DESC_NEXT_DESC_OFFSET)\n\t\tmemset(__pdesc, 0, TX_DESC_NEXT_DESC_OFFSET);\n\telse\n\t\tmemset(__pdesc, 0, _size);\n}\n\nstruct phy_rx_agc_info_t {\n\t#ifdef __LITTLE_ENDIAN\n\t\tu8 gain:7, trsw:1;\n\t#else\n\t\tu8 trsw:1, gain:7;\n\t#endif\n};\nstruct phy_status_rpt {\n\tstruct phy_rx_agc_info_t path_agc[2];\n\tu8 ch_corr[2];\n\tu8 cck_sig_qual_ofdm_pwdb_all;\n\tu8 cck_agc_rpt_ofdm_cfosho_a;\n\tu8 cck_rpt_b_ofdm_cfosho_b;\n\tu8 rsvd_1; \n\tu8 noise_power_db_msb;\n\ts8 path_cfotail[2];\n\tu8 pcts_mask[2];\n\ts8 stream_rxevm[2];\n\tu8 path_rxsnr[2];\n\tu8 noise_power_db_lsb;\n\tu8 rsvd_2[3];\n\tu8 stream_csi[2];\n\tu8 stream_target_csi[2];\n\tu8 sig_evm;\n\tu8 rsvd_3;\n#ifdef __LITTLE_ENDIAN\n\tu8 antsel_rx_keep_2:1;\t \n\tu8 sgi_en:1;\n\tu8 rxsc:2;\n\tu8 idle_long:1;\n\tu8 r_ant_train_en:1;\n\tu8 ant_sel_b:1;\n\tu8 ant_sel:1;\n#else\t \n\tu8 ant_sel:1;\n\tu8 ant_sel_b:1;\n\tu8 r_ant_train_en:1;\n\tu8 idle_long:1;\n\tu8 rxsc:2;\n\tu8 sgi_en:1;\n\tu8 antsel_rx_keep_2:1;\t \n#endif\n} __packed;\n\nstruct rx_fwinfo_8723be {\n\tu8 gain_trsw[2];\n\tu16 chl_num:10;\n\tu16 sub_chnl:4;\n\tu16 r_rfmod:2;\n\tu8 pwdb_all;\n\tu8 cfosho[4];\n\tu8 cfotail[4];\n\ts8 rxevm[2];\n\ts8 rxsnr[2];\n\tu8 pcts_msk_rpt[2];\n\tu8 pdsnr[2];\n\tu8 csi_current[2];\n\tu8 rx_gain_c;\n\tu8 rx_gain_d;\n\tu8 sigevm;\n\tu8 resvd_0;\n\tu8 antidx_anta:3;\n\tu8 antidx_antb:3;\n\tu8 resvd_1:2;\n} __packed;\n\nstruct tx_desc_8723be {\n\tu32 pktsize:16;\n\tu32 offset:8;\n\tu32 bmc:1;\n\tu32 htc:1;\n\tu32 lastseg:1;\n\tu32 firstseg:1;\n\tu32 linip:1;\n\tu32 noacm:1;\n\tu32 gf:1;\n\tu32 own:1;\n\n\tu32 macid:6;\n\tu32 rsvd0:2;\n\tu32 queuesel:5;\n\tu32 rd_nav_ext:1;\n\tu32 lsig_txop_en:1;\n\tu32 pifs:1;\n\tu32 rateid:4;\n\tu32 nav_usehdr:1;\n\tu32 en_descid:1;\n\tu32 sectype:2;\n\tu32 pktoffset:8;\n\n\tu32 rts_rc:6;\n\tu32 data_rc:6;\n\tu32 agg_en:1;\n\tu32 rdg_en:1;\n\tu32 bar_retryht:2;\n\tu32 agg_break:1;\n\tu32 morefrag:1;\n\tu32 raw:1;\n\tu32 ccx:1;\n\tu32 ampdudensity:3;\n\tu32 bt_int:1;\n\tu32 ant_sela:1;\n\tu32 ant_selb:1;\n\tu32 txant_cck:2;\n\tu32 txant_l:2;\n\tu32 txant_ht:2;\n\n\tu32 nextheadpage:8;\n\tu32 tailpage:8;\n\tu32 seq:12;\n\tu32 cpu_handle:1;\n\tu32 tag1:1;\n\tu32 trigger_int:1;\n\tu32 hwseq_en:1;\n\n\tu32 rtsrate:5;\n\tu32 apdcfe:1;\n\tu32 qos:1;\n\tu32 hwseq_ssn:1;\n\tu32 userrate:1;\n\tu32 dis_rtsfb:1;\n\tu32 dis_datafb:1;\n\tu32 cts2self:1;\n\tu32 rts_en:1;\n\tu32 hwrts_en:1;\n\tu32 portid:1;\n\tu32 pwr_status:3;\n\tu32 waitdcts:1;\n\tu32 cts2ap_en:1;\n\tu32 txsc:2;\n\tu32 stbc:2;\n\tu32 txshort:1;\n\tu32 txbw:1;\n\tu32 rtsshort:1;\n\tu32 rtsbw:1;\n\tu32 rtssc:2;\n\tu32 rtsstbc:2;\n\n\tu32 txrate:6;\n\tu32 shortgi:1;\n\tu32 ccxt:1;\n\tu32 txrate_fb_lmt:5;\n\tu32 rtsrate_fb_lmt:4;\n\tu32 retrylmt_en:1;\n\tu32 txretrylmt:6;\n\tu32 usb_txaggnum:8;\n\n\tu32 txagca:5;\n\tu32 txagcb:5;\n\tu32 usemaxlen:1;\n\tu32 maxaggnum:5;\n\tu32 mcsg1maxlen:4;\n\tu32 mcsg2maxlen:4;\n\tu32 mcsg3maxlen:4;\n\tu32 mcs7sgimaxlen:4;\n\n\tu32 txbuffersize:16;\n\tu32 sw_offset30:8;\n\tu32 sw_offset31:4;\n\tu32 rsvd1:1;\n\tu32 antsel_c:1;\n\tu32 null_0:1;\n\tu32 null_1:1;\n\n\tu32 txbuffaddr;\n\tu32 txbufferaddr64;\n\tu32 nextdescaddress;\n\tu32 nextdescaddress64;\n\n\tu32 reserve_pass_pcie_mm_limit[4];\n} __packed;\n\nstruct rx_desc_8723be {\n\tu32 length:14;\n\tu32 crc32:1;\n\tu32 icverror:1;\n\tu32 drv_infosize:4;\n\tu32 security:3;\n\tu32 qos:1;\n\tu32 shift:2;\n\tu32 phystatus:1;\n\tu32 swdec:1;\n\tu32 lastseg:1;\n\tu32 firstseg:1;\n\tu32 eor:1;\n\tu32 own:1;\n\n\tu32 macid:6;\n\tu32 tid:4;\n\tu32 hwrsvd:5;\n\tu32 paggr:1;\n\tu32 faggr:1;\n\tu32 a1_fit:4;\n\tu32 a2_fit:4;\n\tu32 pam:1;\n\tu32 pwr:1;\n\tu32 moredata:1;\n\tu32 morefrag:1;\n\tu32 type:2;\n\tu32 mc:1;\n\tu32 bc:1;\n\n\tu32 seq:12;\n\tu32 frag:4;\n\tu32 nextpktlen:14;\n\tu32 nextind:1;\n\tu32 rsvd:1;\n\n\tu32 rxmcs:6;\n\tu32 rxht:1;\n\tu32 amsdu:1;\n\tu32 splcp:1;\n\tu32 bandwidth:1;\n\tu32 htc:1;\n\tu32 tcpchk_rpt:1;\n\tu32 ipcchk_rpt:1;\n\tu32 tcpchk_valid:1;\n\tu32 hwpcerr:1;\n\tu32 hwpcind:1;\n\tu32 iv0:16;\n\n\tu32 iv1;\n\n\tu32 tsfl;\n\n\tu32 bufferaddress;\n\tu32 bufferaddress64;\n\n} __packed;\n\nvoid rtl8723be_tx_fill_desc(struct ieee80211_hw *hw,\n\t\t\t    struct ieee80211_hdr *hdr,\n\t\t\t    u8 *pdesc_tx, u8 *txbd,\n\t\t\t    struct ieee80211_tx_info *info,\n\t\t\t    struct ieee80211_sta *sta, struct sk_buff *skb,\n\t\t\t    u8 hw_queue, struct rtl_tcb_desc *ptcb_desc);\nbool rtl8723be_rx_query_desc(struct ieee80211_hw *hw,\n\t\t\t     struct rtl_stats *status,\n\t\t\t     struct ieee80211_rx_status *rx_status,\n\t\t\t     u8 *pdesc, struct sk_buff *skb);\nvoid rtl8723be_set_desc(struct ieee80211_hw *hw, u8 *pdesc,\n\t\t\tbool istx, u8 desc_name, u8 *val);\nu64 rtl8723be_get_desc(struct ieee80211_hw *hw,\n\t\t       u8 *pdesc, bool istx, u8 desc_name);\nbool rtl8723be_is_tx_desc_closed(struct ieee80211_hw *hw,\n\t\t\t\t u8 hw_queue, u16 index);\nvoid rtl8723be_tx_polling(struct ieee80211_hw *hw, u8 hw_queue);\nvoid rtl8723be_tx_fill_cmddesc(struct ieee80211_hw *hw, u8 *pdesc,\n\t\t\t       bool firstseg, bool lastseg,\n\t\t\t       struct sk_buff *skb);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}