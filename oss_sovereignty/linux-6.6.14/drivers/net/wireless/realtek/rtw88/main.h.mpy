{
  "module_name": "main.h",
  "hash_id": "55059847fead47c791d603513a087f1ce8faefe2b65965566a625df150ab10c4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw88/main.h",
  "human_readable_source": " \n \n\n#ifndef __RTK_MAIN_H_\n#define __RTK_MAIN_H_\n\n#include <net/mac80211.h>\n#include <linux/vmalloc.h>\n#include <linux/firmware.h>\n#include <linux/average.h>\n#include <linux/bitops.h>\n#include <linux/bitfield.h>\n#include <linux/iopoll.h>\n#include <linux/interrupt.h>\n#include <linux/workqueue.h>\n\n#include \"util.h\"\n\n#define RTW_MAX_MAC_ID_NUM\t\t32\n#define RTW_MAX_SEC_CAM_NUM\t\t32\n#define MAX_PG_CAM_BACKUP_NUM\t\t8\n\n#define RTW_SCAN_MAX_SSIDS\t\t4\n\n#define RTW_MAX_PATTERN_NUM\t\t12\n#define RTW_MAX_PATTERN_MASK_SIZE\t16\n#define RTW_MAX_PATTERN_SIZE\t\t128\n\n#define RTW_WATCH_DOG_DELAY_TIME\tround_jiffies_relative(HZ * 2)\n\n#define RFREG_MASK\t\t\t0xfffff\n#define INV_RF_DATA\t\t\t0xffffffff\n#define TX_PAGE_SIZE_SHIFT\t\t7\n#define TX_PAGE_SIZE\t\t\t(1 << TX_PAGE_SIZE_SHIFT)\n\n#define RTW_CHANNEL_WIDTH_MAX\t\t3\n#define RTW_RF_PATH_MAX\t\t\t4\n#define HW_FEATURE_LEN\t\t\t13\n\n#define RTW_TP_SHIFT\t\t\t18  \n\nextern bool rtw_bf_support;\nextern bool rtw_disable_lps_deep_mode;\nextern unsigned int rtw_debug_mask;\nextern bool rtw_edcca_enabled;\nextern const struct ieee80211_ops rtw_ops;\n\n#define RTW_MAX_CHANNEL_NUM_2G 14\n#define RTW_MAX_CHANNEL_NUM_5G 49\n\nstruct rtw_dev;\n\nenum rtw_hci_type {\n\tRTW_HCI_TYPE_PCIE,\n\tRTW_HCI_TYPE_USB,\n\tRTW_HCI_TYPE_SDIO,\n\n\tRTW_HCI_TYPE_UNDEFINE,\n};\n\nstruct rtw_hci {\n\tstruct rtw_hci_ops *ops;\n\tenum rtw_hci_type type;\n\n\tu32 rpwm_addr;\n\tu32 cpwm_addr;\n\n\tu8 bulkout_num;\n};\n\n#define IS_CH_5G_BAND_1(channel) ((channel) >= 36 && (channel <= 48))\n#define IS_CH_5G_BAND_2(channel) ((channel) >= 52 && (channel <= 64))\n#define IS_CH_5G_BAND_3(channel) ((channel) >= 100 && (channel <= 144))\n#define IS_CH_5G_BAND_4(channel) ((channel) >= 149 && (channel <= 177))\n\n#define IS_CH_5G_BAND_MID(channel) \\\n\t(IS_CH_5G_BAND_2(channel) || IS_CH_5G_BAND_3(channel))\n\n#define IS_CH_2G_BAND(channel) ((channel) <= 14)\n#define IS_CH_5G_BAND(channel) \\\n\t(IS_CH_5G_BAND_1(channel) || IS_CH_5G_BAND_2(channel) || \\\n\t IS_CH_5G_BAND_3(channel) || IS_CH_5G_BAND_4(channel))\n\nenum rtw_supported_band {\n\tRTW_BAND_2G = BIT(NL80211_BAND_2GHZ),\n\tRTW_BAND_5G = BIT(NL80211_BAND_5GHZ),\n\tRTW_BAND_60G = BIT(NL80211_BAND_60GHZ),\n};\n\n \n#define RTW_MAX_CHANNEL_WIDTH RTW_CHANNEL_WIDTH_80\n\nenum rtw_bandwidth {\n\tRTW_CHANNEL_WIDTH_20\t= 0,\n\tRTW_CHANNEL_WIDTH_40\t= 1,\n\tRTW_CHANNEL_WIDTH_80\t= 2,\n\tRTW_CHANNEL_WIDTH_160\t= 3,\n\tRTW_CHANNEL_WIDTH_80_80\t= 4,\n\tRTW_CHANNEL_WIDTH_5\t= 5,\n\tRTW_CHANNEL_WIDTH_10\t= 6,\n};\n\nenum rtw_sc_offset {\n\tRTW_SC_DONT_CARE\t= 0,\n\tRTW_SC_20_UPPER\t\t= 1,\n\tRTW_SC_20_LOWER\t\t= 2,\n\tRTW_SC_20_UPMOST\t= 3,\n\tRTW_SC_20_LOWEST\t= 4,\n\tRTW_SC_40_UPPER\t\t= 9,\n\tRTW_SC_40_LOWER\t\t= 10,\n};\n\nenum rtw_net_type {\n\tRTW_NET_NO_LINK\t\t= 0,\n\tRTW_NET_AD_HOC\t\t= 1,\n\tRTW_NET_MGD_LINKED\t= 2,\n\tRTW_NET_AP_MODE\t\t= 3,\n};\n\nenum rtw_rf_type {\n\tRF_1T1R\t\t\t= 0,\n\tRF_1T2R\t\t\t= 1,\n\tRF_2T2R\t\t\t= 2,\n\tRF_2T3R\t\t\t= 3,\n\tRF_2T4R\t\t\t= 4,\n\tRF_3T3R\t\t\t= 5,\n\tRF_3T4R\t\t\t= 6,\n\tRF_4T4R\t\t\t= 7,\n\tRF_TYPE_MAX,\n};\n\nenum rtw_rf_path {\n\tRF_PATH_A = 0,\n\tRF_PATH_B = 1,\n\tRF_PATH_C = 2,\n\tRF_PATH_D = 3,\n};\n\nenum rtw_bb_path {\n\tBB_PATH_A = BIT(0),\n\tBB_PATH_B = BIT(1),\n\tBB_PATH_C = BIT(2),\n\tBB_PATH_D = BIT(3),\n\n\tBB_PATH_AB = (BB_PATH_A | BB_PATH_B),\n\tBB_PATH_AC = (BB_PATH_A | BB_PATH_C),\n\tBB_PATH_AD = (BB_PATH_A | BB_PATH_D),\n\tBB_PATH_BC = (BB_PATH_B | BB_PATH_C),\n\tBB_PATH_BD = (BB_PATH_B | BB_PATH_D),\n\tBB_PATH_CD = (BB_PATH_C | BB_PATH_D),\n\n\tBB_PATH_ABC = (BB_PATH_A | BB_PATH_B | BB_PATH_C),\n\tBB_PATH_ABD = (BB_PATH_A | BB_PATH_B | BB_PATH_D),\n\tBB_PATH_ACD = (BB_PATH_A | BB_PATH_C | BB_PATH_D),\n\tBB_PATH_BCD = (BB_PATH_B | BB_PATH_C | BB_PATH_D),\n\n\tBB_PATH_ABCD = (BB_PATH_A | BB_PATH_B | BB_PATH_C | BB_PATH_D),\n};\n\nenum rtw_rate_section {\n\tRTW_RATE_SECTION_CCK = 0,\n\tRTW_RATE_SECTION_OFDM,\n\tRTW_RATE_SECTION_HT_1S,\n\tRTW_RATE_SECTION_HT_2S,\n\tRTW_RATE_SECTION_VHT_1S,\n\tRTW_RATE_SECTION_VHT_2S,\n\n\t \n\tRTW_RATE_SECTION_MAX,\n};\n\nenum rtw_wireless_set {\n\tWIRELESS_CCK\t= 0x00000001,\n\tWIRELESS_OFDM\t= 0x00000002,\n\tWIRELESS_HT\t= 0x00000004,\n\tWIRELESS_VHT\t= 0x00000008,\n};\n\n#define HT_STBC_EN\tBIT(0)\n#define VHT_STBC_EN\tBIT(1)\n#define HT_LDPC_EN\tBIT(0)\n#define VHT_LDPC_EN\tBIT(1)\n\nenum rtw_chip_type {\n\tRTW_CHIP_TYPE_8822B,\n\tRTW_CHIP_TYPE_8822C,\n\tRTW_CHIP_TYPE_8723D,\n\tRTW_CHIP_TYPE_8821C,\n};\n\nenum rtw_tx_queue_type {\n\t \n\tRTW_TX_QUEUE_BK = 0x0,\n\tRTW_TX_QUEUE_BE = 0x1,\n\tRTW_TX_QUEUE_VI = 0x2,\n\tRTW_TX_QUEUE_VO = 0x3,\n\n\tRTW_TX_QUEUE_BCN = 0x4,\n\tRTW_TX_QUEUE_MGMT = 0x5,\n\tRTW_TX_QUEUE_HI0 = 0x6,\n\tRTW_TX_QUEUE_H2C = 0x7,\n\t \n\tRTK_MAX_TX_QUEUE_NUM\n};\n\nenum rtw_rx_queue_type {\n\tRTW_RX_QUEUE_MPDU = 0x0,\n\tRTW_RX_QUEUE_C2H = 0x1,\n\t \n\tRTK_MAX_RX_QUEUE_NUM\n};\n\nenum rtw_fw_type {\n\tRTW_NORMAL_FW = 0x0,\n\tRTW_WOWLAN_FW = 0x1,\n};\n\nenum rtw_rate_index {\n\tRTW_RATEID_BGN_40M_2SS\t= 0,\n\tRTW_RATEID_BGN_40M_1SS\t= 1,\n\tRTW_RATEID_BGN_20M_2SS\t= 2,\n\tRTW_RATEID_BGN_20M_1SS\t= 3,\n\tRTW_RATEID_GN_N2SS\t= 4,\n\tRTW_RATEID_GN_N1SS\t= 5,\n\tRTW_RATEID_BG\t\t= 6,\n\tRTW_RATEID_G\t\t= 7,\n\tRTW_RATEID_B_20M\t= 8,\n\tRTW_RATEID_ARFR0_AC_2SS\t= 9,\n\tRTW_RATEID_ARFR1_AC_1SS\t= 10,\n\tRTW_RATEID_ARFR2_AC_2G_1SS = 11,\n\tRTW_RATEID_ARFR3_AC_2G_2SS = 12,\n\tRTW_RATEID_ARFR4_AC_3SS\t= 13,\n\tRTW_RATEID_ARFR5_N_3SS\t= 14,\n\tRTW_RATEID_ARFR7_N_4SS\t= 15,\n\tRTW_RATEID_ARFR6_AC_4SS\t= 16\n};\n\nenum rtw_trx_desc_rate {\n\tDESC_RATE1M\t= 0x00,\n\tDESC_RATE2M\t= 0x01,\n\tDESC_RATE5_5M\t= 0x02,\n\tDESC_RATE11M\t= 0x03,\n\n\tDESC_RATE6M\t= 0x04,\n\tDESC_RATE9M\t= 0x05,\n\tDESC_RATE12M\t= 0x06,\n\tDESC_RATE18M\t= 0x07,\n\tDESC_RATE24M\t= 0x08,\n\tDESC_RATE36M\t= 0x09,\n\tDESC_RATE48M\t= 0x0a,\n\tDESC_RATE54M\t= 0x0b,\n\n\tDESC_RATEMCS0\t= 0x0c,\n\tDESC_RATEMCS1\t= 0x0d,\n\tDESC_RATEMCS2\t= 0x0e,\n\tDESC_RATEMCS3\t= 0x0f,\n\tDESC_RATEMCS4\t= 0x10,\n\tDESC_RATEMCS5\t= 0x11,\n\tDESC_RATEMCS6\t= 0x12,\n\tDESC_RATEMCS7\t= 0x13,\n\tDESC_RATEMCS8\t= 0x14,\n\tDESC_RATEMCS9\t= 0x15,\n\tDESC_RATEMCS10\t= 0x16,\n\tDESC_RATEMCS11\t= 0x17,\n\tDESC_RATEMCS12\t= 0x18,\n\tDESC_RATEMCS13\t= 0x19,\n\tDESC_RATEMCS14\t= 0x1a,\n\tDESC_RATEMCS15\t= 0x1b,\n\tDESC_RATEMCS16\t= 0x1c,\n\tDESC_RATEMCS17\t= 0x1d,\n\tDESC_RATEMCS18\t= 0x1e,\n\tDESC_RATEMCS19\t= 0x1f,\n\tDESC_RATEMCS20\t= 0x20,\n\tDESC_RATEMCS21\t= 0x21,\n\tDESC_RATEMCS22\t= 0x22,\n\tDESC_RATEMCS23\t= 0x23,\n\tDESC_RATEMCS24\t= 0x24,\n\tDESC_RATEMCS25\t= 0x25,\n\tDESC_RATEMCS26\t= 0x26,\n\tDESC_RATEMCS27\t= 0x27,\n\tDESC_RATEMCS28\t= 0x28,\n\tDESC_RATEMCS29\t= 0x29,\n\tDESC_RATEMCS30\t= 0x2a,\n\tDESC_RATEMCS31\t= 0x2b,\n\n\tDESC_RATEVHT1SS_MCS0\t= 0x2c,\n\tDESC_RATEVHT1SS_MCS1\t= 0x2d,\n\tDESC_RATEVHT1SS_MCS2\t= 0x2e,\n\tDESC_RATEVHT1SS_MCS3\t= 0x2f,\n\tDESC_RATEVHT1SS_MCS4\t= 0x30,\n\tDESC_RATEVHT1SS_MCS5\t= 0x31,\n\tDESC_RATEVHT1SS_MCS6\t= 0x32,\n\tDESC_RATEVHT1SS_MCS7\t= 0x33,\n\tDESC_RATEVHT1SS_MCS8\t= 0x34,\n\tDESC_RATEVHT1SS_MCS9\t= 0x35,\n\n\tDESC_RATEVHT2SS_MCS0\t= 0x36,\n\tDESC_RATEVHT2SS_MCS1\t= 0x37,\n\tDESC_RATEVHT2SS_MCS2\t= 0x38,\n\tDESC_RATEVHT2SS_MCS3\t= 0x39,\n\tDESC_RATEVHT2SS_MCS4\t= 0x3a,\n\tDESC_RATEVHT2SS_MCS5\t= 0x3b,\n\tDESC_RATEVHT2SS_MCS6\t= 0x3c,\n\tDESC_RATEVHT2SS_MCS7\t= 0x3d,\n\tDESC_RATEVHT2SS_MCS8\t= 0x3e,\n\tDESC_RATEVHT2SS_MCS9\t= 0x3f,\n\n\tDESC_RATEVHT3SS_MCS0\t= 0x40,\n\tDESC_RATEVHT3SS_MCS1\t= 0x41,\n\tDESC_RATEVHT3SS_MCS2\t= 0x42,\n\tDESC_RATEVHT3SS_MCS3\t= 0x43,\n\tDESC_RATEVHT3SS_MCS4\t= 0x44,\n\tDESC_RATEVHT3SS_MCS5\t= 0x45,\n\tDESC_RATEVHT3SS_MCS6\t= 0x46,\n\tDESC_RATEVHT3SS_MCS7\t= 0x47,\n\tDESC_RATEVHT3SS_MCS8\t= 0x48,\n\tDESC_RATEVHT3SS_MCS9\t= 0x49,\n\n\tDESC_RATEVHT4SS_MCS0\t= 0x4a,\n\tDESC_RATEVHT4SS_MCS1\t= 0x4b,\n\tDESC_RATEVHT4SS_MCS2\t= 0x4c,\n\tDESC_RATEVHT4SS_MCS3\t= 0x4d,\n\tDESC_RATEVHT4SS_MCS4\t= 0x4e,\n\tDESC_RATEVHT4SS_MCS5\t= 0x4f,\n\tDESC_RATEVHT4SS_MCS6\t= 0x50,\n\tDESC_RATEVHT4SS_MCS7\t= 0x51,\n\tDESC_RATEVHT4SS_MCS8\t= 0x52,\n\tDESC_RATEVHT4SS_MCS9\t= 0x53,\n\n\tDESC_RATE_MAX,\n};\n\nenum rtw_regulatory_domains {\n\tRTW_REGD_FCC\t\t= 0,\n\tRTW_REGD_MKK\t\t= 1,\n\tRTW_REGD_ETSI\t\t= 2,\n\tRTW_REGD_IC\t\t= 3,\n\tRTW_REGD_KCC\t\t= 4,\n\tRTW_REGD_ACMA\t\t= 5,\n\tRTW_REGD_CHILE\t\t= 6,\n\tRTW_REGD_UKRAINE\t= 7,\n\tRTW_REGD_MEXICO\t\t= 8,\n\tRTW_REGD_CN\t\t= 9,\n\tRTW_REGD_WW,\n\n\tRTW_REGD_MAX\n};\n\nenum rtw_txq_flags {\n\tRTW_TXQ_AMPDU,\n\tRTW_TXQ_BLOCK_BA,\n};\n\nenum rtw_flags {\n\tRTW_FLAG_RUNNING,\n\tRTW_FLAG_FW_RUNNING,\n\tRTW_FLAG_SCANNING,\n\tRTW_FLAG_POWERON,\n\tRTW_FLAG_LEISURE_PS,\n\tRTW_FLAG_LEISURE_PS_DEEP,\n\tRTW_FLAG_DIG_DISABLE,\n\tRTW_FLAG_BUSY_TRAFFIC,\n\tRTW_FLAG_WOWLAN,\n\tRTW_FLAG_RESTARTING,\n\tRTW_FLAG_RESTART_TRIGGERING,\n\tRTW_FLAG_FORCE_LOWEST_RATE,\n\n\tNUM_OF_RTW_FLAGS,\n};\n\nenum rtw_evm {\n\tRTW_EVM_OFDM = 0,\n\tRTW_EVM_1SS,\n\tRTW_EVM_2SS_A,\n\tRTW_EVM_2SS_B,\n\t \n\tRTW_EVM_NUM\n};\n\nenum rtw_snr {\n\tRTW_SNR_OFDM_A = 0,\n\tRTW_SNR_OFDM_B,\n\tRTW_SNR_OFDM_C,\n\tRTW_SNR_OFDM_D,\n\tRTW_SNR_1SS_A,\n\tRTW_SNR_1SS_B,\n\tRTW_SNR_1SS_C,\n\tRTW_SNR_1SS_D,\n\tRTW_SNR_2SS_A,\n\tRTW_SNR_2SS_B,\n\tRTW_SNR_2SS_C,\n\tRTW_SNR_2SS_D,\n\t \n\tRTW_SNR_NUM\n};\n\nenum rtw_port {\n\tRTW_PORT_0 = 0,\n\tRTW_PORT_1 = 1,\n\tRTW_PORT_2 = 2,\n\tRTW_PORT_3 = 3,\n\tRTW_PORT_4 = 4,\n\tRTW_PORT_NUM\n};\n\nenum rtw_wow_flags {\n\tRTW_WOW_FLAG_EN_MAGIC_PKT,\n\tRTW_WOW_FLAG_EN_REKEY_PKT,\n\tRTW_WOW_FLAG_EN_DISCONNECT,\n\n\t \n\tRTW_WOW_FLAG_MAX,\n};\n\n \nstruct rtw_2g_1s_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 ofdm:4;\n\ts8 bw20:4;\n#else\n\ts8 bw20:4;\n\ts8 ofdm:4;\n#endif\n} __packed;\n\nstruct rtw_2g_ns_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 bw20:4;\n\ts8 bw40:4;\n\ts8 cck:4;\n\ts8 ofdm:4;\n#else\n\ts8 ofdm:4;\n\ts8 cck:4;\n\ts8 bw40:4;\n\ts8 bw20:4;\n#endif\n} __packed;\n\nstruct rtw_2g_txpwr_idx {\n\tu8 cck_base[6];\n\tu8 bw40_base[5];\n\tstruct rtw_2g_1s_pwr_idx_diff ht_1s_diff;\n\tstruct rtw_2g_ns_pwr_idx_diff ht_2s_diff;\n\tstruct rtw_2g_ns_pwr_idx_diff ht_3s_diff;\n\tstruct rtw_2g_ns_pwr_idx_diff ht_4s_diff;\n};\n\nstruct rtw_5g_ht_1s_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 ofdm:4;\n\ts8 bw20:4;\n#else\n\ts8 bw20:4;\n\ts8 ofdm:4;\n#endif\n} __packed;\n\nstruct rtw_5g_ht_ns_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 bw20:4;\n\ts8 bw40:4;\n#else\n\ts8 bw40:4;\n\ts8 bw20:4;\n#endif\n} __packed;\n\nstruct rtw_5g_ofdm_ns_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 ofdm_3s:4;\n\ts8 ofdm_2s:4;\n\ts8 ofdm_4s:4;\n\ts8 res:4;\n#else\n\ts8 res:4;\n\ts8 ofdm_4s:4;\n\ts8 ofdm_2s:4;\n\ts8 ofdm_3s:4;\n#endif\n} __packed;\n\nstruct rtw_5g_vht_ns_pwr_idx_diff {\n#ifdef __LITTLE_ENDIAN\n\ts8 bw160:4;\n\ts8 bw80:4;\n#else\n\ts8 bw80:4;\n\ts8 bw160:4;\n#endif\n} __packed;\n\nstruct rtw_5g_txpwr_idx {\n\tu8 bw40_base[14];\n\tstruct rtw_5g_ht_1s_pwr_idx_diff ht_1s_diff;\n\tstruct rtw_5g_ht_ns_pwr_idx_diff ht_2s_diff;\n\tstruct rtw_5g_ht_ns_pwr_idx_diff ht_3s_diff;\n\tstruct rtw_5g_ht_ns_pwr_idx_diff ht_4s_diff;\n\tstruct rtw_5g_ofdm_ns_pwr_idx_diff ofdm_diff;\n\tstruct rtw_5g_vht_ns_pwr_idx_diff vht_1s_diff;\n\tstruct rtw_5g_vht_ns_pwr_idx_diff vht_2s_diff;\n\tstruct rtw_5g_vht_ns_pwr_idx_diff vht_3s_diff;\n\tstruct rtw_5g_vht_ns_pwr_idx_diff vht_4s_diff;\n};\n\nstruct rtw_txpwr_idx {\n\tstruct rtw_2g_txpwr_idx pwr_idx_2g;\n\tstruct rtw_5g_txpwr_idx pwr_idx_5g;\n};\n\nstruct rtw_channel_params {\n\tu8 center_chan;\n\tu8 primary_chan;\n\tu8 bandwidth;\n};\n\nstruct rtw_hw_reg {\n\tu32 addr;\n\tu32 mask;\n};\n\nstruct rtw_ltecoex_addr {\n\tu32 ctrl;\n\tu32 wdata;\n\tu32 rdata;\n};\n\nstruct rtw_reg_domain {\n\tu32 addr;\n\tu32 mask;\n#define RTW_REG_DOMAIN_MAC32\t0\n#define RTW_REG_DOMAIN_MAC16\t1\n#define RTW_REG_DOMAIN_MAC8\t2\n#define RTW_REG_DOMAIN_RF_A\t3\n#define RTW_REG_DOMAIN_RF_B\t4\n#define RTW_REG_DOMAIN_NL\t0xFF\n\tu8 domain;\n};\n\nstruct rtw_rf_sipi_addr {\n\tu32 hssi_1;\n\tu32 hssi_2;\n\tu32 lssi_read;\n\tu32 lssi_read_pi;\n};\n\nstruct rtw_hw_reg_offset {\n\tstruct rtw_hw_reg hw_reg;\n\tu8 offset;\n};\n\nstruct rtw_backup_info {\n\tu8 len;\n\tu32 reg;\n\tu32 val;\n};\n\nenum rtw_vif_port_set {\n\tPORT_SET_MAC_ADDR\t= BIT(0),\n\tPORT_SET_BSSID\t\t= BIT(1),\n\tPORT_SET_NET_TYPE\t= BIT(2),\n\tPORT_SET_AID\t\t= BIT(3),\n\tPORT_SET_BCN_CTRL\t= BIT(4),\n};\n\nstruct rtw_vif_port {\n\tstruct rtw_hw_reg mac_addr;\n\tstruct rtw_hw_reg bssid;\n\tstruct rtw_hw_reg net_type;\n\tstruct rtw_hw_reg aid;\n\tstruct rtw_hw_reg bcn_ctrl;\n};\n\nstruct rtw_tx_pkt_info {\n\tu32 tx_pkt_size;\n\tu8 offset;\n\tu8 pkt_offset;\n\tu8 tim_offset;\n\tu8 mac_id;\n\tu8 rate_id;\n\tu8 rate;\n\tu8 qsel;\n\tu8 bw;\n\tu8 sec_type;\n\tu8 sn;\n\tbool ampdu_en;\n\tu8 ampdu_factor;\n\tu8 ampdu_density;\n\tu16 seq;\n\tbool stbc;\n\tbool ldpc;\n\tbool dis_rate_fallback;\n\tbool bmc;\n\tbool use_rate;\n\tbool ls;\n\tbool fs;\n\tbool short_gi;\n\tbool report;\n\tbool rts;\n\tbool dis_qselseq;\n\tbool en_hwseq;\n\tu8 hw_ssn_sel;\n\tbool nav_use_hdr;\n\tbool bt_null;\n};\n\nstruct rtw_rx_pkt_stat {\n\tbool phy_status;\n\tbool icv_err;\n\tbool crc_err;\n\tbool decrypted;\n\tbool is_c2h;\n\n\ts32 signal_power;\n\tu16 pkt_len;\n\tu8 bw;\n\tu8 drv_info_sz;\n\tu8 shift;\n\tu8 rate;\n\tu8 mac_id;\n\tu8 cam_id;\n\tu8 ppdu_cnt;\n\tu32 tsf_low;\n\ts8 rx_power[RTW_RF_PATH_MAX];\n\tu8 rssi;\n\tu8 rxsc;\n\ts8 rx_snr[RTW_RF_PATH_MAX];\n\tu8 rx_evm[RTW_RF_PATH_MAX];\n\ts8 cfo_tail[RTW_RF_PATH_MAX];\n\tu16 freq;\n\tu8 band;\n\n\tstruct rtw_sta_info *si;\n\tstruct ieee80211_vif *vif;\n\tstruct ieee80211_hdr *hdr;\n};\n\nDECLARE_EWMA(tp, 10, 2);\n\nstruct rtw_traffic_stats {\n\t \n\tu64 tx_unicast;\n\tu64 rx_unicast;\n\n\t \n\tu64 tx_cnt;\n\tu64 rx_cnt;\n\n\t \n\tu32 tx_throughput;\n\tu32 rx_throughput;\n\tstruct ewma_tp tx_ewma_tp;\n\tstruct ewma_tp rx_ewma_tp;\n};\n\nenum rtw_lps_mode {\n\tRTW_MODE_ACTIVE\t= 0,\n\tRTW_MODE_LPS\t= 1,\n\tRTW_MODE_WMM_PS\t= 2,\n};\n\nenum rtw_lps_deep_mode {\n\tLPS_DEEP_MODE_NONE\t= 0,\n\tLPS_DEEP_MODE_LCLK\t= 1,\n\tLPS_DEEP_MODE_PG\t= 2,\n};\n\nenum rtw_pwr_state {\n\tRTW_RF_OFF\t= 0x0,\n\tRTW_RF_ON\t= 0x4,\n\tRTW_ALL_ON\t= 0xc,\n};\n\nstruct rtw_lps_conf {\n\tenum rtw_lps_mode mode;\n\tenum rtw_lps_deep_mode deep_mode;\n\tenum rtw_lps_deep_mode wow_deep_mode;\n\tenum rtw_pwr_state state;\n\tu8 awake_interval;\n\tu8 rlbm;\n\tu8 smart_ps;\n\tu8 port_id;\n\tbool sec_cam_backup;\n\tbool pattern_cam_backup;\n};\n\nenum rtw_hw_key_type {\n\tRTW_CAM_NONE\t= 0,\n\tRTW_CAM_WEP40\t= 1,\n\tRTW_CAM_TKIP\t= 2,\n\tRTW_CAM_AES\t= 4,\n\tRTW_CAM_WEP104\t= 5,\n};\n\nstruct rtw_cam_entry {\n\tbool valid;\n\tbool group;\n\tu8 addr[ETH_ALEN];\n\tu8 hw_key_type;\n\tstruct ieee80211_key_conf *key;\n};\n\nstruct rtw_sec_desc {\n\t \n\tbool default_key_search;\n\n\tu32 total_cam_num;\n\tstruct rtw_cam_entry cam_table[RTW_MAX_SEC_CAM_NUM];\n\tDECLARE_BITMAP(cam_map, RTW_MAX_SEC_CAM_NUM);\n};\n\nstruct rtw_tx_report {\n\t \n\tspinlock_t q_lock;\n\tstruct sk_buff_head queue;\n\tatomic_t sn;\n\tstruct timer_list purge_timer;\n};\n\nstruct rtw_ra_report {\n\tstruct rate_info txrate;\n\tu32 bit_rate;\n\tu8 desc_rate;\n};\n\nstruct rtw_txq {\n\tstruct list_head list;\n\tunsigned long flags;\n};\n\n#define RTW_BC_MC_MACID 1\nDECLARE_EWMA(rssi, 10, 16);\n\nstruct rtw_sta_info {\n\tstruct rtw_dev *rtwdev;\n\tstruct ieee80211_sta *sta;\n\tstruct ieee80211_vif *vif;\n\n\tstruct ewma_rssi avg_rssi;\n\tu8 rssi_level;\n\n\tu8 mac_id;\n\tu8 rate_id;\n\tenum rtw_bandwidth bw_mode;\n\tenum rtw_rf_type rf_type;\n\tu8 stbc_en:2;\n\tu8 ldpc_en:2;\n\tbool sgi_enable;\n\tbool vht_enable;\n\tu8 init_ra_lv;\n\tu64 ra_mask;\n\n\tDECLARE_BITMAP(tid_ba, IEEE80211_NUM_TIDS);\n\n\tstruct rtw_ra_report ra_report;\n\n\tbool use_cfg_mask;\n\tstruct cfg80211_bitrate_mask *mask;\n\n\tstruct work_struct rc_work;\n};\n\nenum rtw_bfee_role {\n\tRTW_BFEE_NONE,\n\tRTW_BFEE_SU,\n\tRTW_BFEE_MU\n};\n\nstruct rtw_bfee {\n\tenum rtw_bfee_role role;\n\n\tu16 p_aid;\n\tu8 g_id;\n\tu8 mac_addr[ETH_ALEN];\n\tu8 sound_dim;\n\n\t \n\tu8 su_reg_index;\n\n\t \n\tu16 aid;\n};\n\nstruct rtw_bf_info {\n\tu8 bfer_mu_cnt;\n\tu8 bfer_su_cnt;\n\tDECLARE_BITMAP(bfer_su_reg_maping, 2);\n\tu8 cur_csi_rpt_rate;\n};\n\nstruct rtw_vif {\n\tenum rtw_net_type net_type;\n\tu16 aid;\n\tu8 mac_id;  \n\tu8 mac_addr[ETH_ALEN];\n\tu8 bssid[ETH_ALEN];\n\tu8 port;\n\tu8 bcn_ctrl;\n\tstruct list_head rsvd_page_list;\n\tstruct ieee80211_tx_queue_params tx_params[IEEE80211_NUM_ACS];\n\tconst struct rtw_vif_port *conf;\n\tstruct cfg80211_scan_request *scan_req;\n\tstruct ieee80211_scan_ies *scan_ies;\n\n\tstruct rtw_traffic_stats stats;\n\n\tstruct rtw_bfee bfee;\n};\n\nstruct rtw_regulatory {\n\tchar alpha2[2];\n\tu8 txpwr_regd_2g;\n\tu8 txpwr_regd_5g;\n};\n\nenum rtw_regd_state {\n\tRTW_REGD_STATE_WORLDWIDE,\n\tRTW_REGD_STATE_PROGRAMMED,\n\tRTW_REGD_STATE_SETTING,\n\n\tRTW_REGD_STATE_NR,\n};\n\nstruct rtw_regd {\n\tenum rtw_regd_state state;\n\tconst struct rtw_regulatory *regulatory;\n\tenum nl80211_dfs_regions dfs_region;\n};\n\nstruct rtw_chip_ops {\n\tint (*mac_init)(struct rtw_dev *rtwdev);\n\tint (*dump_fw_crash)(struct rtw_dev *rtwdev);\n\tvoid (*shutdown)(struct rtw_dev *rtwdev);\n\tint (*read_efuse)(struct rtw_dev *rtwdev, u8 *map);\n\tvoid (*phy_set_param)(struct rtw_dev *rtwdev);\n\tvoid (*set_channel)(struct rtw_dev *rtwdev, u8 channel,\n\t\t\t    u8 bandwidth, u8 primary_chan_idx);\n\tvoid (*query_rx_desc)(struct rtw_dev *rtwdev, u8 *rx_desc,\n\t\t\t      struct rtw_rx_pkt_stat *pkt_stat,\n\t\t\t      struct ieee80211_rx_status *rx_status);\n\tu32 (*read_rf)(struct rtw_dev *rtwdev, enum rtw_rf_path rf_path,\n\t\t       u32 addr, u32 mask);\n\tbool (*write_rf)(struct rtw_dev *rtwdev, enum rtw_rf_path rf_path,\n\t\t\t u32 addr, u32 mask, u32 data);\n\tvoid (*set_tx_power_index)(struct rtw_dev *rtwdev);\n\tint (*rsvd_page_dump)(struct rtw_dev *rtwdev, u8 *buf, u32 offset,\n\t\t\t      u32 size);\n\tint (*set_antenna)(struct rtw_dev *rtwdev,\n\t\t\t   u32 antenna_tx,\n\t\t\t   u32 antenna_rx);\n\tvoid (*cfg_ldo25)(struct rtw_dev *rtwdev, bool enable);\n\tvoid (*efuse_grant)(struct rtw_dev *rtwdev, bool enable);\n\tvoid (*false_alarm_statistics)(struct rtw_dev *rtwdev);\n\tvoid (*phy_calibration)(struct rtw_dev *rtwdev);\n\tvoid (*dpk_track)(struct rtw_dev *rtwdev);\n\tvoid (*cck_pd_set)(struct rtw_dev *rtwdev, u8 level);\n\tvoid (*pwr_track)(struct rtw_dev *rtwdev);\n\tvoid (*config_bfee)(struct rtw_dev *rtwdev, struct rtw_vif *vif,\n\t\t\t    struct rtw_bfee *bfee, bool enable);\n\tvoid (*set_gid_table)(struct rtw_dev *rtwdev,\n\t\t\t      struct ieee80211_vif *vif,\n\t\t\t      struct ieee80211_bss_conf *conf);\n\tvoid (*cfg_csi_rate)(struct rtw_dev *rtwdev, u8 rssi, u8 cur_rate,\n\t\t\t     u8 fixrate_en, u8 *new_rate);\n\tvoid (*adaptivity_init)(struct rtw_dev *rtwdev);\n\tvoid (*adaptivity)(struct rtw_dev *rtwdev);\n\tvoid (*cfo_init)(struct rtw_dev *rtwdev);\n\tvoid (*cfo_track)(struct rtw_dev *rtwdev);\n\tvoid (*config_tx_path)(struct rtw_dev *rtwdev, u8 tx_path,\n\t\t\t       enum rtw_bb_path tx_path_1ss,\n\t\t\t       enum rtw_bb_path tx_path_cck,\n\t\t\t       bool is_tx2_path);\n\tvoid (*config_txrx_mode)(struct rtw_dev *rtwdev, u8 tx_path,\n\t\t\t\t u8 rx_path, bool is_tx2_path);\n\t \n\tvoid (*fill_txdesc_checksum)(struct rtw_dev *rtwdev,\n\t\t\t\t     struct rtw_tx_pkt_info *pkt_info,\n\t\t\t\t     u8 *txdesc);\n\n\t \n\tvoid (*coex_set_init)(struct rtw_dev *rtwdev);\n\tvoid (*coex_set_ant_switch)(struct rtw_dev *rtwdev,\n\t\t\t\t    u8 ctrl_type, u8 pos_type);\n\tvoid (*coex_set_gnt_fix)(struct rtw_dev *rtwdev);\n\tvoid (*coex_set_gnt_debug)(struct rtw_dev *rtwdev);\n\tvoid (*coex_set_rfe_type)(struct rtw_dev *rtwdev);\n\tvoid (*coex_set_wl_tx_power)(struct rtw_dev *rtwdev, u8 wl_pwr);\n\tvoid (*coex_set_wl_rx_gain)(struct rtw_dev *rtwdev, bool low_gain);\n};\n\n#define RTW_PWR_POLLING_CNT\t20000\n\n#define RTW_PWR_CMD_READ\t0x00\n#define RTW_PWR_CMD_WRITE\t0x01\n#define RTW_PWR_CMD_POLLING\t0x02\n#define RTW_PWR_CMD_DELAY\t0x03\n#define RTW_PWR_CMD_END\t\t0x04\n\n \n#define RTW_PWR_ADDR_MAC\t0x00\n#define RTW_PWR_ADDR_USB\t0x01\n#define RTW_PWR_ADDR_PCIE\t0x02\n#define RTW_PWR_ADDR_SDIO\t0x03\n\n#define RTW_PWR_INTF_SDIO_MSK\tBIT(0)\n#define RTW_PWR_INTF_USB_MSK\tBIT(1)\n#define RTW_PWR_INTF_PCI_MSK\tBIT(2)\n#define RTW_PWR_INTF_ALL_MSK\t(BIT(0) | BIT(1) | BIT(2) | BIT(3))\n\n#define RTW_PWR_CUT_TEST_MSK\tBIT(0)\n#define RTW_PWR_CUT_A_MSK\tBIT(1)\n#define RTW_PWR_CUT_B_MSK\tBIT(2)\n#define RTW_PWR_CUT_C_MSK\tBIT(3)\n#define RTW_PWR_CUT_D_MSK\tBIT(4)\n#define RTW_PWR_CUT_E_MSK\tBIT(5)\n#define RTW_PWR_CUT_F_MSK\tBIT(6)\n#define RTW_PWR_CUT_G_MSK\tBIT(7)\n#define RTW_PWR_CUT_ALL_MSK\t0xFF\n\nenum rtw_pwr_seq_cmd_delay_unit {\n\tRTW_PWR_DELAY_US,\n\tRTW_PWR_DELAY_MS,\n};\n\nstruct rtw_pwr_seq_cmd {\n\tu16 offset;\n\tu8 cut_mask;\n\tu8 intf_mask;\n\tu8 base:4;\n\tu8 cmd:4;\n\tu8 mask;\n\tu8 value;\n};\n\nenum rtw_chip_ver {\n\tRTW_CHIP_VER_CUT_A = 0x00,\n\tRTW_CHIP_VER_CUT_B = 0x01,\n\tRTW_CHIP_VER_CUT_C = 0x02,\n\tRTW_CHIP_VER_CUT_D = 0x03,\n\tRTW_CHIP_VER_CUT_E = 0x04,\n\tRTW_CHIP_VER_CUT_F = 0x05,\n\tRTW_CHIP_VER_CUT_G = 0x06,\n};\n\n#define RTW_INTF_PHY_PLATFORM_ALL 0\n\nenum rtw_intf_phy_cut {\n\tRTW_INTF_PHY_CUT_A = BIT(0),\n\tRTW_INTF_PHY_CUT_B = BIT(1),\n\tRTW_INTF_PHY_CUT_C = BIT(2),\n\tRTW_INTF_PHY_CUT_D = BIT(3),\n\tRTW_INTF_PHY_CUT_E = BIT(4),\n\tRTW_INTF_PHY_CUT_F = BIT(5),\n\tRTW_INTF_PHY_CUT_G = BIT(6),\n\tRTW_INTF_PHY_CUT_ALL = 0xFFFF,\n};\n\nenum rtw_ip_sel {\n\tRTW_IP_SEL_PHY = 0,\n\tRTW_IP_SEL_MAC = 1,\n\tRTW_IP_SEL_DBI = 2,\n\n\tRTW_IP_SEL_UNDEF = 0xFFFF\n};\n\nenum rtw_pq_map_id {\n\tRTW_PQ_MAP_VO = 0x0,\n\tRTW_PQ_MAP_VI = 0x1,\n\tRTW_PQ_MAP_BE = 0x2,\n\tRTW_PQ_MAP_BK = 0x3,\n\tRTW_PQ_MAP_MG = 0x4,\n\tRTW_PQ_MAP_HI = 0x5,\n\tRTW_PQ_MAP_NUM = 0x6,\n\n\tRTW_PQ_MAP_UNDEF,\n};\n\nenum rtw_dma_mapping {\n\tRTW_DMA_MAPPING_EXTRA\t= 0,\n\tRTW_DMA_MAPPING_LOW\t= 1,\n\tRTW_DMA_MAPPING_NORMAL\t= 2,\n\tRTW_DMA_MAPPING_HIGH\t= 3,\n\n\tRTW_DMA_MAPPING_MAX,\n\tRTW_DMA_MAPPING_UNDEF,\n};\n\nstruct rtw_rqpn {\n\tenum rtw_dma_mapping dma_map_vo;\n\tenum rtw_dma_mapping dma_map_vi;\n\tenum rtw_dma_mapping dma_map_be;\n\tenum rtw_dma_mapping dma_map_bk;\n\tenum rtw_dma_mapping dma_map_mg;\n\tenum rtw_dma_mapping dma_map_hi;\n};\n\nstruct rtw_prioq_addr {\n\tu32 rsvd;\n\tu32 avail;\n};\n\nstruct rtw_prioq_addrs {\n\tstruct rtw_prioq_addr prio[RTW_DMA_MAPPING_MAX];\n\tbool wsize;\n};\n\nstruct rtw_page_table {\n\tu16 hq_num;\n\tu16 nq_num;\n\tu16 lq_num;\n\tu16 exq_num;\n\tu16 gapq_num;\n};\n\nstruct rtw_intf_phy_para {\n\tu16 offset;\n\tu16 value;\n\tu16 ip_sel;\n\tu16 cut_mask;\n\tu16 platform;\n};\n\nstruct rtw_wow_pattern {\n\tu16 crc;\n\tu8 type;\n\tu8 valid;\n\tu8 mask[RTW_MAX_PATTERN_MASK_SIZE];\n};\n\nstruct rtw_pno_request {\n\tbool inited;\n\tu32 match_set_cnt;\n\tstruct cfg80211_match_set *match_sets;\n\tu8 channel_cnt;\n\tstruct ieee80211_channel *channels;\n\tstruct cfg80211_sched_scan_plan scan_plan;\n};\n\nstruct rtw_wow_param {\n\tstruct ieee80211_vif *wow_vif;\n\tDECLARE_BITMAP(flags, RTW_WOW_FLAG_MAX);\n\tu8 txpause;\n\tu8 pattern_cnt;\n\tstruct rtw_wow_pattern patterns[RTW_MAX_PATTERN_NUM];\n\n\tbool ips_enabled;\n\tstruct rtw_pno_request pno_req;\n};\n\nstruct rtw_intf_phy_para_table {\n\tconst struct rtw_intf_phy_para *usb2_para;\n\tconst struct rtw_intf_phy_para *usb3_para;\n\tconst struct rtw_intf_phy_para *gen1_para;\n\tconst struct rtw_intf_phy_para *gen2_para;\n\tu8 n_usb2_para;\n\tu8 n_usb3_para;\n\tu8 n_gen1_para;\n\tu8 n_gen2_para;\n};\n\nstruct rtw_table {\n\tconst void *data;\n\tconst u32 size;\n\tvoid (*parse)(struct rtw_dev *rtwdev, const struct rtw_table *tbl);\n\tvoid (*do_cfg)(struct rtw_dev *rtwdev, const struct rtw_table *tbl,\n\t\t       u32 addr, u32 data);\n\tenum rtw_rf_path rf_path;\n};\n\nstatic inline void rtw_load_table(struct rtw_dev *rtwdev,\n\t\t\t\t  const struct rtw_table *tbl)\n{\n\t(*tbl->parse)(rtwdev, tbl);\n}\n\nenum rtw_rfe_fem {\n\tRTW_RFE_IFEM,\n\tRTW_RFE_EFEM,\n\tRTW_RFE_IFEM2G_EFEM5G,\n\tRTW_RFE_NUM,\n};\n\nstruct rtw_rfe_def {\n\tconst struct rtw_table *phy_pg_tbl;\n\tconst struct rtw_table *txpwr_lmt_tbl;\n\tconst struct rtw_table *agc_btg_tbl;\n};\n\n#define RTW_DEF_RFE(chip, bb_pg, pwrlmt) {\t\t\t\t  \\\n\t.phy_pg_tbl = &rtw ## chip ## _bb_pg_type ## bb_pg ## _tbl,\t  \\\n\t.txpwr_lmt_tbl = &rtw ## chip ## _txpwr_lmt_type ## pwrlmt ## _tbl, \\\n\t}\n\n#define RTW_DEF_RFE_EXT(chip, bb_pg, pwrlmt, btg) {\t\t\t  \\\n\t.phy_pg_tbl = &rtw ## chip ## _bb_pg_type ## bb_pg ## _tbl,\t  \\\n\t.txpwr_lmt_tbl = &rtw ## chip ## _txpwr_lmt_type ## pwrlmt ## _tbl, \\\n\t.agc_btg_tbl = &rtw ## chip ## _agc_btg_type ## btg ## _tbl, \\\n\t}\n\n#define RTW_PWR_TRK_5G_1\t\t0\n#define RTW_PWR_TRK_5G_2\t\t1\n#define RTW_PWR_TRK_5G_3\t\t2\n#define RTW_PWR_TRK_5G_NUM\t\t3\n\n#define RTW_PWR_TRK_TBL_SZ\t\t30\n\n \nstruct rtw_pwr_track_tbl {\n\tconst u8 *pwrtrk_5gb_n[RTW_PWR_TRK_5G_NUM];\n\tconst u8 *pwrtrk_5gb_p[RTW_PWR_TRK_5G_NUM];\n\tconst u8 *pwrtrk_5ga_n[RTW_PWR_TRK_5G_NUM];\n\tconst u8 *pwrtrk_5ga_p[RTW_PWR_TRK_5G_NUM];\n\tconst u8 *pwrtrk_2gb_n;\n\tconst u8 *pwrtrk_2gb_p;\n\tconst u8 *pwrtrk_2ga_n;\n\tconst u8 *pwrtrk_2ga_p;\n\tconst u8 *pwrtrk_2g_cckb_n;\n\tconst u8 *pwrtrk_2g_cckb_p;\n\tconst u8 *pwrtrk_2g_ccka_n;\n\tconst u8 *pwrtrk_2g_ccka_p;\n\tconst s8 *pwrtrk_xtal_n;\n\tconst s8 *pwrtrk_xtal_p;\n};\n\nenum rtw_wlan_cpu {\n\tRTW_WCPU_11AC,\n\tRTW_WCPU_11N,\n};\n\nenum rtw_fw_fifo_sel {\n\tRTW_FW_FIFO_SEL_TX,\n\tRTW_FW_FIFO_SEL_RX,\n\tRTW_FW_FIFO_SEL_RSVD_PAGE,\n\tRTW_FW_FIFO_SEL_REPORT,\n\tRTW_FW_FIFO_SEL_LLT,\n\tRTW_FW_FIFO_SEL_RXBUF_FW,\n\n\tRTW_FW_FIFO_MAX,\n};\n\nenum rtw_fwcd_item {\n\tRTW_FWCD_TLV,\n\tRTW_FWCD_REG,\n\tRTW_FWCD_ROM,\n\tRTW_FWCD_IMEM,\n\tRTW_FWCD_DMEM,\n\tRTW_FWCD_EMEM,\n};\n\n \nstruct rtw_chip_info {\n\tstruct rtw_chip_ops *ops;\n\tu8 id;\n\n\tconst char *fw_name;\n\tenum rtw_wlan_cpu wlan_cpu;\n\tu8 tx_pkt_desc_sz;\n\tu8 tx_buf_desc_sz;\n\tu8 rx_pkt_desc_sz;\n\tu8 rx_buf_desc_sz;\n\tu32 phy_efuse_size;\n\tu32 log_efuse_size;\n\tu32 ptct_efuse_size;\n\tu32 txff_size;\n\tu32 rxff_size;\n\tu32 fw_rxff_size;\n\tu16 rsvd_drv_pg_num;\n\tu8 band;\n\tu8 page_size;\n\tu8 csi_buf_pg_num;\n\tu8 dig_max;\n\tu8 dig_min;\n\tu8 txgi_factor;\n\tbool is_pwr_by_rate_dec;\n\tbool rx_ldpc;\n\tbool tx_stbc;\n\tu8 max_power_index;\n\tu8 ampdu_density;\n\n\tu16 fw_fifo_addr[RTW_FW_FIFO_MAX];\n\tconst struct rtw_fwcd_segs *fwcd_segs;\n\n\tu8 default_1ss_tx_path;\n\n\tbool path_div_supported;\n\tbool ht_supported;\n\tbool vht_supported;\n\tu8 lps_deep_mode_supported;\n\n\t \n\tu8 sys_func_en;\n\tconst struct rtw_pwr_seq_cmd **pwr_on_seq;\n\tconst struct rtw_pwr_seq_cmd **pwr_off_seq;\n\tconst struct rtw_rqpn *rqpn_table;\n\tconst struct rtw_prioq_addrs *prioq_addrs;\n\tconst struct rtw_page_table *page_table;\n\tconst struct rtw_intf_phy_para_table *intf_table;\n\n\tconst struct rtw_hw_reg *dig;\n\tconst struct rtw_hw_reg *dig_cck;\n\tu32 rf_base_addr[2];\n\tu32 rf_sipi_addr[2];\n\tconst struct rtw_rf_sipi_addr *rf_sipi_read_addr;\n\tu8 fix_rf_phy_num;\n\tconst struct rtw_ltecoex_addr *ltecoex_addr;\n\n\tconst struct rtw_table *mac_tbl;\n\tconst struct rtw_table *agc_tbl;\n\tconst struct rtw_table *bb_tbl;\n\tconst struct rtw_table *rf_tbl[RTW_RF_PATH_MAX];\n\tconst struct rtw_table *rfk_init_tbl;\n\n\tconst struct rtw_rfe_def *rfe_defs;\n\tu32 rfe_defs_size;\n\n\tbool en_dis_dpd;\n\tu16 dpd_ratemask;\n\tu8 iqk_threshold;\n\tu8 lck_threshold;\n\tconst struct rtw_pwr_track_tbl *pwr_track_tbl;\n\n\tu8 bfer_su_max_num;\n\tu8 bfer_mu_max_num;\n\n\tstruct rtw_hw_reg_offset *edcca_th;\n\ts8 l2h_th_ini_cs;\n\ts8 l2h_th_ini_ad;\n\n\tconst char *wow_fw_name;\n\tconst struct wiphy_wowlan_support *wowlan_stub;\n\tconst u8 max_sched_scan_ssids;\n\tconst u16 max_scan_ie_len;\n\n\t \n\tu32 coex_para_ver;\n\tu8 bt_desired_ver;\n\tbool scbd_support;\n\tbool new_scbd10_def;  \n\tbool ble_hid_profile_support;\n\tbool wl_mimo_ps_support;\n\tu8 pstdma_type;  \n\tu8 bt_rssi_type;\n\tu8 ant_isolation;\n\tu8 rssi_tolerance;\n\tu8 table_sant_num;\n\tu8 table_nsant_num;\n\tu8 tdma_sant_num;\n\tu8 tdma_nsant_num;\n\tu8 bt_afh_span_bw20;\n\tu8 bt_afh_span_bw40;\n\tu8 afh_5g_num;\n\tu8 wl_rf_para_num;\n\tu8 coex_info_hw_regs_num;\n\tconst u8 *bt_rssi_step;\n\tconst u8 *wl_rssi_step;\n\tconst struct coex_table_para *table_nsant;\n\tconst struct coex_table_para *table_sant;\n\tconst struct coex_tdma_para *tdma_sant;\n\tconst struct coex_tdma_para *tdma_nsant;\n\tconst struct coex_rf_para *wl_rf_para_tx;\n\tconst struct coex_rf_para *wl_rf_para_rx;\n\tconst struct coex_5g_afh_map *afh_5g;\n\tconst struct rtw_hw_reg *btg_reg;\n\tconst struct rtw_reg_domain *coex_info_hw_regs;\n\tu32 wl_fw_desired_ver;\n};\n\nenum rtw_coex_bt_state_cnt {\n\tCOEX_CNT_BT_RETRY,\n\tCOEX_CNT_BT_REINIT,\n\tCOEX_CNT_BT_REENABLE,\n\tCOEX_CNT_BT_POPEVENT,\n\tCOEX_CNT_BT_SETUPLINK,\n\tCOEX_CNT_BT_IGNWLANACT,\n\tCOEX_CNT_BT_INQ,\n\tCOEX_CNT_BT_PAGE,\n\tCOEX_CNT_BT_ROLESWITCH,\n\tCOEX_CNT_BT_AFHUPDATE,\n\tCOEX_CNT_BT_INFOUPDATE,\n\tCOEX_CNT_BT_IQK,\n\tCOEX_CNT_BT_IQKFAIL,\n\n\tCOEX_CNT_BT_MAX\n};\n\nenum rtw_coex_wl_state_cnt {\n\tCOEX_CNT_WL_SCANAP,\n\tCOEX_CNT_WL_CONNPKT,\n\tCOEX_CNT_WL_COEXRUN,\n\tCOEX_CNT_WL_NOISY0,\n\tCOEX_CNT_WL_NOISY1,\n\tCOEX_CNT_WL_NOISY2,\n\tCOEX_CNT_WL_5MS_NOEXTEND,\n\tCOEX_CNT_WL_FW_NOTIFY,\n\n\tCOEX_CNT_WL_MAX\n};\n\nstruct rtw_coex_rfe {\n\tbool ant_switch_exist;\n\tbool ant_switch_diversity;\n\tbool ant_switch_with_bt;\n\tu8 rfe_module_type;\n\tu8 ant_switch_polarity;\n\n\t \n\tbool wlg_at_btg;\n};\n\n#define COEX_WL_TDMA_PARA_LENGTH\t5\n\nstruct rtw_coex_dm {\n\tbool cur_ps_tdma_on;\n\tbool cur_wl_rx_low_gain_en;\n\tbool ignore_wl_act;\n\n\tu8 reason;\n\tu8 bt_rssi_state[4];\n\tu8 wl_rssi_state[4];\n\tu8 wl_ch_info[3];\n\tu8 cur_ps_tdma;\n\tu8 cur_table;\n\tu8 ps_tdma_para[5];\n\tu8 cur_bt_pwr_lvl;\n\tu8 cur_bt_lna_lvl;\n\tu8 cur_wl_pwr_lvl;\n\tu8 bt_status;\n\tu32 cur_ant_pos_type;\n\tu32 cur_switch_status;\n\tu32 setting_tdma;\n\tu8 fw_tdma_para[COEX_WL_TDMA_PARA_LENGTH];\n};\n\n#define COEX_BTINFO_SRC_WL_FW\t0x0\n#define COEX_BTINFO_SRC_BT_RSP\t0x1\n#define COEX_BTINFO_SRC_BT_ACT\t0x2\n#define COEX_BTINFO_SRC_BT_IQK\t0x3\n#define COEX_BTINFO_SRC_BT_SCBD\t0x4\n#define COEX_BTINFO_SRC_H2C60\t0x5\n#define COEX_BTINFO_SRC_MAX\t0x6\n\n#define COEX_INFO_FTP\t\tBIT(7)\n#define COEX_INFO_A2DP\t\tBIT(6)\n#define COEX_INFO_HID\t\tBIT(5)\n#define COEX_INFO_SCO_BUSY\tBIT(4)\n#define COEX_INFO_ACL_BUSY\tBIT(3)\n#define COEX_INFO_INQ_PAGE\tBIT(2)\n#define COEX_INFO_SCO_ESCO\tBIT(1)\n#define COEX_INFO_CONNECTION\tBIT(0)\n#define COEX_BTINFO_LENGTH_MAX\t10\n#define COEX_BTINFO_LENGTH\t7\n\n#define COEX_BT_HIDINFO_LIST\t0x0\n#define COEX_BT_HIDINFO_A\t0x1\n#define COEX_BT_HIDINFO_NAME\t3\n\n#define COEX_BT_HIDINFO_LENGTH\t6\n#define COEX_BT_HIDINFO_HANDLE_NUM\t4\n#define COEX_BT_HIDINFO_C2H_HANDLE\t0\n#define COEX_BT_HIDINFO_C2H_VENDOR\t1\n#define COEX_BT_BLE_HANDLE_THRS\t0x10\n#define COEX_BT_HIDINFO_NOTCON\t0xff\n\nstruct rtw_coex_hid {\n\tu8 hid_handle;\n\tu8 hid_vendor;\n\tu8 hid_name[COEX_BT_HIDINFO_NAME];\n\tbool hid_info_completed;\n\tbool is_game_hid;\n};\n\nstruct rtw_coex_hid_handle_list {\n\tu8 cmd_id;\n\tu8 len;\n\tu8 subid;\n\tu8 handle_cnt;\n\tu8 handle[COEX_BT_HIDINFO_HANDLE_NUM];\n} __packed;\n\nstruct rtw_coex_hid_info_a {\n\tu8 cmd_id;\n\tu8 len;\n\tu8 subid;\n\tu8 handle;\n\tu8 vendor;\n\tu8 name[COEX_BT_HIDINFO_NAME];\n} __packed;\n\nstruct rtw_coex_stat {\n\tbool bt_disabled;\n\tbool bt_disabled_pre;\n\tbool bt_link_exist;\n\tbool bt_whck_test;\n\tbool bt_inq_page;\n\tbool bt_inq_remain;\n\tbool bt_inq;\n\tbool bt_page;\n\tbool bt_ble_voice;\n\tbool bt_ble_exist;\n\tbool bt_hfp_exist;\n\tbool bt_a2dp_exist;\n\tbool bt_hid_exist;\n\tbool bt_pan_exist;  \n\tbool bt_opp_exist;  \n\tbool bt_acl_busy;\n\tbool bt_fix_2M;\n\tbool bt_setup_link;\n\tbool bt_multi_link;\n\tbool bt_multi_link_pre;\n\tbool bt_multi_link_remain;\n\tbool bt_a2dp_sink;\n\tbool bt_a2dp_active;\n\tbool bt_reenable;\n\tbool bt_ble_scan_en;\n\tbool bt_init_scan;\n\tbool bt_slave;\n\tbool bt_418_hid_exist;\n\tbool bt_ble_hid_exist;\n\tbool bt_game_hid_exist;\n\tbool bt_hid_handle_cnt;\n\tbool bt_mailbox_reply;\n\n\tbool wl_under_lps;\n\tbool wl_under_ips;\n\tbool wl_hi_pri_task1;\n\tbool wl_hi_pri_task2;\n\tbool wl_force_lps_ctrl;\n\tbool wl_gl_busy;\n\tbool wl_linkscan_proc;\n\tbool wl_ps_state_fail;\n\tbool wl_tx_limit_en;\n\tbool wl_ampdu_limit_en;\n\tbool wl_connected;\n\tbool wl_slot_extend;\n\tbool wl_cck_lock;\n\tbool wl_cck_lock_pre;\n\tbool wl_cck_lock_ever;\n\tbool wl_connecting;\n\tbool wl_slot_toggle;\n\tbool wl_slot_toggle_change;  \n\tbool wl_mimo_ps;\n\n\tu32 bt_supported_version;\n\tu32 bt_supported_feature;\n\tu32 hi_pri_tx;\n\tu32 hi_pri_rx;\n\tu32 lo_pri_tx;\n\tu32 lo_pri_rx;\n\tu32 patch_ver;\n\tu16 bt_reg_vendor_ae;\n\tu16 bt_reg_vendor_ac;\n\ts8 bt_rssi;\n\tu8 kt_ver;\n\tu8 gnt_workaround_state;\n\tu8 tdma_timer_base;\n\tu8 bt_profile_num;\n\tu8 bt_info_c2h[COEX_BTINFO_SRC_MAX][COEX_BTINFO_LENGTH_MAX];\n\tu8 bt_info_lb2;\n\tu8 bt_info_lb3;\n\tu8 bt_info_hb0;\n\tu8 bt_info_hb1;\n\tu8 bt_info_hb2;\n\tu8 bt_info_hb3;\n\tu8 bt_ble_scan_type;\n\tu8 bt_hid_pair_num;\n\tu8 bt_hid_slot;\n\tu8 bt_a2dp_bitpool;\n\tu8 bt_iqk_state;\n\n\tu16 wl_beacon_interval;\n\tu8 wl_noisy_level;\n\tu8 wl_fw_dbg_info[10];\n\tu8 wl_fw_dbg_info_pre[10];\n\tu8 wl_rx_rate;\n\tu8 wl_tx_rate;\n\tu8 wl_rts_rx_rate;\n\tu8 wl_coex_mode;\n\tu8 wl_iot_peer;\n\tu8 ampdu_max_time;\n\tu8 wl_tput_dir;\n\n\tu8 wl_toggle_para[6];\n\tu8 wl_toggle_interval;\n\n\tu16 score_board;\n\tu16 retry_limit;\n\n\t \n\tu32 cnt_bt[COEX_CNT_BT_MAX];\n\n\t \n\tu32 cnt_wl[COEX_CNT_WL_MAX];\n\n\t \n\tu32 cnt_bt_info_c2h[COEX_BTINFO_SRC_MAX];\n\n\tu32 darfrc;\n\tu32 darfrch;\n\n\tstruct rtw_coex_hid hid_info[COEX_BT_HIDINFO_HANDLE_NUM];\n\tstruct rtw_coex_hid_handle_list hid_handle_list;\n};\n\nstruct rtw_coex {\n\tstruct sk_buff_head queue;\n\twait_queue_head_t wait;\n\n\tbool under_5g;\n\tbool stop_dm;\n\tbool freeze;\n\tbool freerun;\n\tbool wl_rf_off;\n\tbool manual_control;\n\n\tstruct rtw_coex_stat stat;\n\tstruct rtw_coex_dm dm;\n\tstruct rtw_coex_rfe rfe;\n\n\tstruct delayed_work bt_relink_work;\n\tstruct delayed_work bt_reenable_work;\n\tstruct delayed_work defreeze_work;\n\tstruct delayed_work wl_remain_work;\n\tstruct delayed_work bt_remain_work;\n\tstruct delayed_work wl_connecting_work;\n\tstruct delayed_work bt_multi_link_remain_work;\n\tstruct delayed_work wl_ccklock_work;\n\n};\n\n#define DPK_RF_REG_NUM 7\n#define DPK_RF_PATH_NUM 2\n#define DPK_BB_REG_NUM 18\n#define DPK_CHANNEL_WIDTH_80 1\n\nDECLARE_EWMA(thermal, 10, 4);\n\nstruct rtw_dpk_info {\n\tbool is_dpk_pwr_on;\n\tbool is_reload;\n\n\tDECLARE_BITMAP(dpk_path_ok, DPK_RF_PATH_NUM);\n\n\tu8 thermal_dpk[DPK_RF_PATH_NUM];\n\tstruct ewma_thermal avg_thermal[DPK_RF_PATH_NUM];\n\n\tu32 gnt_control;\n\tu32 gnt_value;\n\n\tu8 result[RTW_RF_PATH_MAX];\n\tu8 dpk_txagc[RTW_RF_PATH_MAX];\n\tu32 coef[RTW_RF_PATH_MAX][20];\n\tu16 dpk_gs[RTW_RF_PATH_MAX];\n\tu8 thermal_dpk_delta[RTW_RF_PATH_MAX];\n\tu8 pre_pwsf[RTW_RF_PATH_MAX];\n\n\tu8 dpk_band;\n\tu8 dpk_ch;\n\tu8 dpk_bw;\n};\n\nstruct rtw_phy_cck_pd_reg {\n\tu32 reg_pd;\n\tu32 mask_pd;\n\tu32 reg_cs;\n\tu32 mask_cs;\n};\n\n#define DACK_MSBK_BACKUP_NUM\t0xf\n#define DACK_DCK_BACKUP_NUM\t0x2\n\nstruct rtw_swing_table {\n\tconst u8 *p[RTW_RF_PATH_MAX];\n\tconst u8 *n[RTW_RF_PATH_MAX];\n};\n\nstruct rtw_pkt_count {\n\tu16 num_bcn_pkt;\n\tu16 num_qry_pkt[DESC_RATE_MAX];\n};\n\nDECLARE_EWMA(evm, 10, 4);\nDECLARE_EWMA(snr, 10, 4);\n\nstruct rtw_iqk_info {\n\tbool done;\n\tstruct {\n\t\tu32 s1_x;\n\t\tu32 s1_y;\n\t\tu32 s0_x;\n\t\tu32 s0_y;\n\t} result;\n};\n\nenum rtw_rf_band {\n\tRF_BAND_2G_CCK,\n\tRF_BAND_2G_OFDM,\n\tRF_BAND_5G_L,\n\tRF_BAND_5G_M,\n\tRF_BAND_5G_H,\n\tRF_BAND_MAX\n};\n\n#define RF_GAIN_NUM 11\n#define RF_HW_OFFSET_NUM 10\n\nstruct rtw_gapk_info {\n\tu32 rf3f_bp[RF_BAND_MAX][RF_GAIN_NUM][RTW_RF_PATH_MAX];\n\tu32 rf3f_fs[RTW_RF_PATH_MAX][RF_GAIN_NUM];\n\tbool txgapk_bp_done;\n\ts8 offset[RF_GAIN_NUM][RTW_RF_PATH_MAX];\n\ts8 fianl_offset[RF_GAIN_NUM][RTW_RF_PATH_MAX];\n\tu8 read_txgain;\n\tu8 channel;\n};\n\n#define EDCCA_TH_L2H_IDX 0\n#define EDCCA_TH_H2L_IDX 1\n#define EDCCA_TH_L2H_LB 48\n#define EDCCA_ADC_BACKOFF 12\n#define EDCCA_IGI_BASE 50\n#define EDCCA_IGI_L2H_DIFF 8\n#define EDCCA_L2H_H2L_DIFF 7\n#define EDCCA_L2H_H2L_DIFF_NORMAL 8\n\nenum rtw_edcca_mode {\n\tRTW_EDCCA_NORMAL\t= 0,\n\tRTW_EDCCA_ADAPTIVITY\t= 1,\n};\n\nstruct rtw_cfo_track {\n\tbool is_adjust;\n\tu8 crystal_cap;\n\ts32 cfo_tail[RTW_RF_PATH_MAX];\n\ts32 cfo_cnt[RTW_RF_PATH_MAX];\n\tu32 packet_count;\n\tu32 packet_count_pre;\n};\n\n#define RRSR_INIT_2G 0x15f\n#define RRSR_INIT_5G 0x150\n\nenum rtw_dm_cap {\n\tRTW_DM_CAP_NA,\n\tRTW_DM_CAP_TXGAPK,\n\tRTW_DM_CAP_NUM\n};\n\nstruct rtw_dm_info {\n\tu32 cck_fa_cnt;\n\tu32 ofdm_fa_cnt;\n\tu32 total_fa_cnt;\n\tu32 cck_cca_cnt;\n\tu32 ofdm_cca_cnt;\n\tu32 total_cca_cnt;\n\n\tu32 cck_ok_cnt;\n\tu32 cck_err_cnt;\n\tu32 ofdm_ok_cnt;\n\tu32 ofdm_err_cnt;\n\tu32 ht_ok_cnt;\n\tu32 ht_err_cnt;\n\tu32 vht_ok_cnt;\n\tu32 vht_err_cnt;\n\n\tu8 min_rssi;\n\tu8 pre_min_rssi;\n\tu16 fa_history[4];\n\tu8 igi_history[4];\n\tu8 igi_bitmap;\n\tbool damping;\n\tu8 damping_cnt;\n\tu8 damping_rssi;\n\n\tu8 cck_gi_u_bnd;\n\tu8 cck_gi_l_bnd;\n\n\tu8 fix_rate;\n\tu8 tx_rate;\n\tu32 rrsr_val_init;\n\tu32 rrsr_mask_min;\n\tu8 thermal_avg[RTW_RF_PATH_MAX];\n\tu8 thermal_meter_k;\n\tu8 thermal_meter_lck;\n\ts8 delta_power_index[RTW_RF_PATH_MAX];\n\ts8 delta_power_index_last[RTW_RF_PATH_MAX];\n\tu8 default_ofdm_index;\n\tbool pwr_trk_triggered;\n\tbool pwr_trk_init_trigger;\n\tstruct ewma_thermal avg_thermal[RTW_RF_PATH_MAX];\n\ts8 txagc_remnant_cck;\n\ts8 txagc_remnant_ofdm;\n\n\t \n\tu32 dack_adck[RTW_RF_PATH_MAX];\n\tu16 dack_msbk[RTW_RF_PATH_MAX][2][DACK_MSBK_BACKUP_NUM];\n\tu8 dack_dck[RTW_RF_PATH_MAX][2][DACK_DCK_BACKUP_NUM];\n\n\tstruct rtw_dpk_info dpk_info;\n\tstruct rtw_cfo_track cfo_track;\n\n\t \n\tu8 cck_pd_lv[2][RTW_RF_PATH_MAX];\n\tu32 cck_fa_avg;\n\tu8 cck_pd_default;\n\n\t \n\ts8 rx_snr[RTW_RF_PATH_MAX];\n\tu8 rx_evm_dbm[RTW_RF_PATH_MAX];\n\ts16 cfo_tail[RTW_RF_PATH_MAX];\n\tu8 rssi[RTW_RF_PATH_MAX];\n\tu8 curr_rx_rate;\n\tstruct rtw_pkt_count cur_pkt_count;\n\tstruct rtw_pkt_count last_pkt_count;\n\tstruct ewma_evm ewma_evm[RTW_EVM_NUM];\n\tstruct ewma_snr ewma_snr[RTW_SNR_NUM];\n\n\tu32 dm_flags;  \n\tstruct rtw_iqk_info iqk;\n\tstruct rtw_gapk_info gapk;\n\tbool is_bt_iqk_timeout;\n\n\ts8 l2h_th_ini;\n\tenum rtw_edcca_mode edcca_mode;\n\tu8 scan_density;\n};\n\nstruct rtw_efuse {\n\tu32 size;\n\tu32 physical_size;\n\tu32 logical_size;\n\tu32 protect_size;\n\n\tu8 addr[ETH_ALEN];\n\tu8 channel_plan;\n\tu8 country_code[2];\n\tu8 rf_board_option;\n\tu8 rfe_option;\n\tu8 power_track_type;\n\tu8 thermal_meter[RTW_RF_PATH_MAX];\n\tu8 thermal_meter_k;\n\tu8 crystal_cap;\n\tu8 ant_div_cfg;\n\tu8 ant_div_type;\n\tu8 regd;\n\tu8 afe;\n\n\tu8 lna_type_2g;\n\tu8 lna_type_5g;\n\tu8 glna_type;\n\tu8 alna_type;\n\tbool ext_lna_2g;\n\tbool ext_lna_5g;\n\tu8 pa_type_2g;\n\tu8 pa_type_5g;\n\tu8 gpa_type;\n\tu8 apa_type;\n\tbool ext_pa_2g;\n\tbool ext_pa_5g;\n\tu8 tx_bb_swing_setting_2g;\n\tu8 tx_bb_swing_setting_5g;\n\n\tbool btcoex;\n\t \n\tbool share_ant;\n\tu8 bt_setting;\n\n\tstruct {\n\t\tu8 hci;\n\t\tu8 bw;\n\t\tu8 ptcl;\n\t\tu8 nss;\n\t\tu8 ant_num;\n\t} hw_cap;\n\n\tstruct rtw_txpwr_idx txpwr_idx_table[4];\n};\n\nstruct rtw_phy_cond {\n#ifdef __LITTLE_ENDIAN\n\tu32 rfe:8;\n\tu32 intf:4;\n\tu32 pkg:4;\n\tu32 plat:4;\n\tu32 intf_rsvd:4;\n\tu32 cut:4;\n\tu32 branch:2;\n\tu32 neg:1;\n\tu32 pos:1;\n#else\n\tu32 pos:1;\n\tu32 neg:1;\n\tu32 branch:2;\n\tu32 cut:4;\n\tu32 intf_rsvd:4;\n\tu32 plat:4;\n\tu32 pkg:4;\n\tu32 intf:4;\n\tu32 rfe:8;\n#endif\n\t \n\t#define INTF_PCIE\tBIT(0)\n\t#define INTF_USB\tBIT(1)\n\t#define INTF_SDIO\tBIT(2)\n\t \n\t#define BRANCH_IF\t0\n\t#define BRANCH_ELIF\t1\n\t#define BRANCH_ELSE\t2\n\t#define BRANCH_ENDIF\t3\n};\n\nstruct rtw_fifo_conf {\n\t \n\tu16 rsvd_boundary;\n\tu16 rsvd_pg_num;\n\tu16 rsvd_drv_pg_num;\n\tu16 txff_pg_num;\n\tu16 acq_pg_num;\n\tu16 rsvd_drv_addr;\n\tu16 rsvd_h2c_info_addr;\n\tu16 rsvd_h2c_sta_info_addr;\n\tu16 rsvd_h2cq_addr;\n\tu16 rsvd_cpu_instr_addr;\n\tu16 rsvd_fw_txbuf_addr;\n\tu16 rsvd_csibuf_addr;\n\tconst struct rtw_rqpn *rqpn;\n};\n\nstruct rtw_fwcd_desc {\n\tu32 size;\n\tu8 *next;\n\tu8 *data;\n};\n\nstruct rtw_fwcd_segs {\n\tconst u32 *segs;\n\tu8 num;\n};\n\n#define FW_CD_TYPE 0xffff\n#define FW_CD_LEN 4\n#define FW_CD_VAL 0xaabbccdd\nstruct rtw_fw_state {\n\tconst struct firmware *firmware;\n\tstruct rtw_dev *rtwdev;\n\tstruct completion completion;\n\tstruct rtw_fwcd_desc fwcd_desc;\n\tu16 version;\n\tu8 sub_version;\n\tu8 sub_index;\n\tu16 h2c_version;\n\tu32 feature;\n\tu32 feature_ext;\n\tenum rtw_fw_type type;\n};\n\nenum rtw_sar_sources {\n\tRTW_SAR_SOURCE_NONE,\n\tRTW_SAR_SOURCE_COMMON,\n};\n\nenum rtw_sar_bands {\n\tRTW_SAR_BAND_0,\n\tRTW_SAR_BAND_1,\n\t \n\tRTW_SAR_BAND_3,\n\tRTW_SAR_BAND_4,\n\n\tRTW_SAR_BAND_NR,\n};\n\n \nunion rtw_sar_cfg {\n\ts8 common[RTW_SAR_BAND_NR];\n};\n\nstruct rtw_sar {\n\tenum rtw_sar_sources src;\n\tunion rtw_sar_cfg cfg[RTW_RF_PATH_MAX][RTW_RATE_SECTION_MAX];\n};\n\nstruct rtw_hal {\n\tu32 rcr;\n\n\tu32 chip_version;\n\tu8 cut_version;\n\tu8 mp_chip;\n\tu8 oem_id;\n\tu8 pkg_type;\n\tstruct rtw_phy_cond phy_cond;\n\tbool rfe_btg;\n\n\tu8 ps_mode;\n\tu8 current_channel;\n\tu8 current_primary_channel_index;\n\tu8 current_band_width;\n\tu8 current_band_type;\n\tu8 primary_channel;\n\n\t \n\tu8 cch_by_bw[RTW_MAX_CHANNEL_WIDTH + 1];\n\n\tu8 sec_ch_offset;\n\tu8 rf_type;\n\tu8 rf_path_num;\n\tu8 rf_phy_num;\n\tu32 antenna_tx;\n\tu32 antenna_rx;\n\tu8 bfee_sts_cap;\n\tbool txrx_1ss;\n\n\t \n\tstruct mutex tx_power_mutex;\n\ts8 tx_pwr_by_rate_offset_2g[RTW_RF_PATH_MAX]\n\t\t\t\t   [DESC_RATE_MAX];\n\ts8 tx_pwr_by_rate_offset_5g[RTW_RF_PATH_MAX]\n\t\t\t\t   [DESC_RATE_MAX];\n\ts8 tx_pwr_by_rate_base_2g[RTW_RF_PATH_MAX]\n\t\t\t\t [RTW_RATE_SECTION_MAX];\n\ts8 tx_pwr_by_rate_base_5g[RTW_RF_PATH_MAX]\n\t\t\t\t [RTW_RATE_SECTION_MAX];\n\ts8 tx_pwr_limit_2g[RTW_REGD_MAX]\n\t\t\t  [RTW_CHANNEL_WIDTH_MAX]\n\t\t\t  [RTW_RATE_SECTION_MAX]\n\t\t\t  [RTW_MAX_CHANNEL_NUM_2G];\n\ts8 tx_pwr_limit_5g[RTW_REGD_MAX]\n\t\t\t  [RTW_CHANNEL_WIDTH_MAX]\n\t\t\t  [RTW_RATE_SECTION_MAX]\n\t\t\t  [RTW_MAX_CHANNEL_NUM_5G];\n\ts8 tx_pwr_tbl[RTW_RF_PATH_MAX]\n\t\t     [DESC_RATE_MAX];\n\n\tenum rtw_sar_bands sar_band;\n\tstruct rtw_sar sar;\n\n\t \n\tu32 ch_param[3];\n};\n\nstruct rtw_path_div {\n\tenum rtw_bb_path current_tx_path;\n\tu32 path_a_sum;\n\tu32 path_b_sum;\n\tu16 path_a_cnt;\n\tu16 path_b_cnt;\n};\n\nstruct rtw_chan_info {\n\tint pri_ch_idx;\n\tint action_id;\n\tint bw;\n\tu8 extra_info;\n\tu8 channel;\n\tu16 timeout;\n};\n\nstruct rtw_chan_list {\n\tu32 buf_size;\n\tu32 ch_num;\n\tu32 size;\n\tu16 addr;\n};\n\nstruct rtw_hw_scan_info {\n\tstruct ieee80211_vif *scanning_vif;\n\tu8 probe_pg_size;\n\tu8 op_pri_ch_idx;\n\tu8 op_pri_ch;\n\tu8 op_chan;\n\tu8 op_bw;\n};\n\nstruct rtw_dev {\n\tstruct ieee80211_hw *hw;\n\tstruct device *dev;\n\n\tstruct rtw_hci hci;\n\n\tstruct rtw_hw_scan_info scan_info;\n\tconst struct rtw_chip_info *chip;\n\tstruct rtw_hal hal;\n\tstruct rtw_fifo_conf fifo;\n\tstruct rtw_fw_state fw;\n\tstruct rtw_efuse efuse;\n\tstruct rtw_sec_desc sec;\n\tstruct rtw_traffic_stats stats;\n\tstruct rtw_regd regd;\n\tstruct rtw_bf_info bf_info;\n\n\tstruct rtw_dm_info dm_info;\n\tstruct rtw_coex coex;\n\n\t \n\tstruct mutex mutex;\n\n\t \n\tstruct delayed_work watch_dog_work;\n\tu32 watch_dog_cnt;\n\n\tstruct list_head rsvd_page_list;\n\n\t \n\tstruct sk_buff_head c2h_queue;\n\tstruct work_struct c2h_work;\n\tstruct work_struct ips_work;\n\tstruct work_struct fw_recovery_work;\n\tstruct work_struct update_beacon_work;\n\n\t \n\tspinlock_t txq_lock;\n\tstruct list_head txqs;\n\tstruct workqueue_struct *tx_wq;\n\tstruct work_struct tx_work;\n\tstruct work_struct ba_work;\n\n\tstruct rtw_tx_report tx_report;\n\n\tstruct {\n\t\t \n\t\tu8 last_box_num;\n\t\tu32 seq;\n\t} h2c;\n\n\t \n\tstruct rtw_lps_conf lps_conf;\n\tbool ps_enabled;\n\tbool beacon_loss;\n\tstruct completion lps_leave_check;\n\n\tstruct dentry *debugfs;\n\n\tu8 sta_cnt;\n\tu32 rts_threshold;\n\n\tDECLARE_BITMAP(hw_port, RTW_PORT_NUM);\n\tDECLARE_BITMAP(mac_id_map, RTW_MAX_MAC_ID_NUM);\n\tDECLARE_BITMAP(flags, NUM_OF_RTW_FLAGS);\n\n\tu8 mp_mode;\n\tstruct rtw_path_div dm_path_div;\n\n\tstruct rtw_fw_state wow_fw;\n\tstruct rtw_wow_param wow;\n\n\tbool need_rfk;\n\tstruct completion fw_scan_density;\n\tbool ap_active;\n\n\t \n\tu8 priv[] __aligned(sizeof(void *));\n};\n\n#include \"hci.h\"\n\nstatic inline bool rtw_is_assoc(struct rtw_dev *rtwdev)\n{\n\treturn !!rtwdev->sta_cnt;\n}\n\nstatic inline struct ieee80211_txq *rtwtxq_to_txq(struct rtw_txq *rtwtxq)\n{\n\tvoid *p = rtwtxq;\n\n\treturn container_of(p, struct ieee80211_txq, drv_priv);\n}\n\nstatic inline struct ieee80211_vif *rtwvif_to_vif(struct rtw_vif *rtwvif)\n{\n\tvoid *p = rtwvif;\n\n\treturn container_of(p, struct ieee80211_vif, drv_priv);\n}\n\nstatic inline bool rtw_ssid_equal(struct cfg80211_ssid *a,\n\t\t\t\t  struct cfg80211_ssid *b)\n{\n\tif (!a || !b || a->ssid_len != b->ssid_len)\n\t\treturn false;\n\n\tif (memcmp(a->ssid, b->ssid, a->ssid_len))\n\t\treturn false;\n\n\treturn true;\n}\n\nstatic inline void rtw_chip_efuse_grant_on(struct rtw_dev *rtwdev)\n{\n\tif (rtwdev->chip->ops->efuse_grant)\n\t\trtwdev->chip->ops->efuse_grant(rtwdev, true);\n}\n\nstatic inline void rtw_chip_efuse_grant_off(struct rtw_dev *rtwdev)\n{\n\tif (rtwdev->chip->ops->efuse_grant)\n\t\trtwdev->chip->ops->efuse_grant(rtwdev, false);\n}\n\nstatic inline bool rtw_chip_wcpu_11n(struct rtw_dev *rtwdev)\n{\n\treturn rtwdev->chip->wlan_cpu == RTW_WCPU_11N;\n}\n\nstatic inline bool rtw_chip_wcpu_11ac(struct rtw_dev *rtwdev)\n{\n\treturn rtwdev->chip->wlan_cpu == RTW_WCPU_11AC;\n}\n\nstatic inline bool rtw_chip_has_rx_ldpc(struct rtw_dev *rtwdev)\n{\n\treturn rtwdev->chip->rx_ldpc;\n}\n\nstatic inline bool rtw_chip_has_tx_stbc(struct rtw_dev *rtwdev)\n{\n\treturn rtwdev->chip->tx_stbc;\n}\n\nstatic inline void rtw_release_macid(struct rtw_dev *rtwdev, u8 mac_id)\n{\n\tclear_bit(mac_id, rtwdev->mac_id_map);\n}\n\nstatic inline int rtw_chip_dump_fw_crash(struct rtw_dev *rtwdev)\n{\n\tif (rtwdev->chip->ops->dump_fw_crash)\n\t\treturn rtwdev->chip->ops->dump_fw_crash(rtwdev);\n\n\treturn 0;\n}\n\nstatic inline\nenum nl80211_band rtw_hw_to_nl80211_band(enum rtw_supported_band hw_band)\n{\n\tswitch (hw_band) {\n\tdefault:\n\tcase RTW_BAND_2G:\n\t\treturn NL80211_BAND_2GHZ;\n\tcase RTW_BAND_5G:\n\t\treturn NL80211_BAND_5GHZ;\n\tcase RTW_BAND_60G:\n\t\treturn NL80211_BAND_60GHZ;\n\t}\n}\n\nvoid rtw_set_rx_freq_band(struct rtw_rx_pkt_stat *pkt_stat, u8 channel);\nvoid rtw_set_dtim_period(struct rtw_dev *rtwdev, int dtim_period);\nvoid rtw_get_channel_params(struct cfg80211_chan_def *chandef,\n\t\t\t    struct rtw_channel_params *ch_param);\nbool check_hw_ready(struct rtw_dev *rtwdev, u32 addr, u32 mask, u32 target);\nbool ltecoex_read_reg(struct rtw_dev *rtwdev, u16 offset, u32 *val);\nbool ltecoex_reg_write(struct rtw_dev *rtwdev, u16 offset, u32 value);\nvoid rtw_restore_reg(struct rtw_dev *rtwdev,\n\t\t     struct rtw_backup_info *bckp, u32 num);\nvoid rtw_desc_to_mcsrate(u16 rate, u8 *mcs, u8 *nss);\nvoid rtw_set_channel(struct rtw_dev *rtwdev);\nvoid rtw_chip_prepare_tx(struct rtw_dev *rtwdev);\nvoid rtw_vif_port_config(struct rtw_dev *rtwdev, struct rtw_vif *rtwvif,\n\t\t\t u32 config);\nvoid rtw_tx_report_purge_timer(struct timer_list *t);\nvoid rtw_update_sta_info(struct rtw_dev *rtwdev, struct rtw_sta_info *si,\n\t\t\t bool reset_ra_mask);\nvoid rtw_core_scan_start(struct rtw_dev *rtwdev, struct rtw_vif *rtwvif,\n\t\t\t const u8 *mac_addr, bool hw_scan);\nvoid rtw_core_scan_complete(struct rtw_dev *rtwdev, struct ieee80211_vif *vif,\n\t\t\t    bool hw_scan);\nint rtw_core_start(struct rtw_dev *rtwdev);\nvoid rtw_core_stop(struct rtw_dev *rtwdev);\nint rtw_chip_info_setup(struct rtw_dev *rtwdev);\nint rtw_core_init(struct rtw_dev *rtwdev);\nvoid rtw_core_deinit(struct rtw_dev *rtwdev);\nint rtw_register_hw(struct rtw_dev *rtwdev, struct ieee80211_hw *hw);\nvoid rtw_unregister_hw(struct rtw_dev *rtwdev, struct ieee80211_hw *hw);\nu16 rtw_desc_to_bitrate(u8 desc_rate);\nvoid rtw_vif_assoc_changed(struct rtw_vif *rtwvif,\n\t\t\t   struct ieee80211_bss_conf *conf);\nint rtw_sta_add(struct rtw_dev *rtwdev, struct ieee80211_sta *sta,\n\t\tstruct ieee80211_vif *vif);\nvoid rtw_sta_remove(struct rtw_dev *rtwdev, struct ieee80211_sta *sta,\n\t\t    bool fw_exist);\nvoid rtw_fw_recovery(struct rtw_dev *rtwdev);\nvoid rtw_core_fw_scan_notify(struct rtw_dev *rtwdev, bool start);\nint rtw_dump_fw(struct rtw_dev *rtwdev, const u32 ocp_src, u32 size,\n\t\tu32 fwcd_item);\nint rtw_dump_reg(struct rtw_dev *rtwdev, const u32 addr, const u32 size);\nvoid rtw_set_txrx_1ss(struct rtw_dev *rtwdev, bool config_1ss);\nvoid rtw_update_channel(struct rtw_dev *rtwdev, u8 center_channel,\n\t\t\tu8 primary_channel, enum rtw_supported_band band,\n\t\t\tenum rtw_bandwidth bandwidth);\nvoid rtw_core_port_switch(struct rtw_dev *rtwdev, struct ieee80211_vif *vif);\nbool rtw_core_check_sta_active(struct rtw_dev *rtwdev);\nvoid rtw_core_enable_beacon(struct rtw_dev *rtwdev, bool enable);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}