{
  "module_name": "coex.h",
  "hash_id": "10727af6708473d21defeb24f901c94d86bf09581c6241bbf001ad82250d04b6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw88/coex.h",
  "human_readable_source": " \n \n\n#ifndef __RTW_COEX_H__\n#define __RTW_COEX_H__\n\n#define COEX_CCK_2\t0x1\n#define COEX_RESP_ACK_BY_WL_FW\t0x1\n#define COEX_REQUEST_TIMEOUT\tmsecs_to_jiffies(10)\n\n#define COEX_MIN_DELAY\t\t10  \n#define COEX_RFK_TIMEOUT\t600  \n#define COEX_BT_GAMEHID_CNT\t800\n\n#define COEX_RF_OFF\t0x0\n#define COEX_RF_ON\t0x1\n\n#define COEX_H2C69_WL_LEAKAP\t0xc\n#define PARA1_H2C69_DIS_5MS\t0x1\n#define PARA1_H2C69_EN_5MS\t0x0\n\n#define COEX_H2C69_TDMA_SLOT\t0xb\n#define PARA1_H2C69_TDMA_4SLOT\t0xc1\n#define PARA1_H2C69_TDMA_2SLOT\t0x1\n#define PARA1_H2C69_TBTT_TIMES\tGENMASK(5, 0)\n#define PARA1_H2C69_TBTT_DIV100\tBIT(7)\n\n#define COEX_H2C69_TOGGLE_TABLE_A 0xd\n#define COEX_H2C69_TOGGLE_TABLE_B 0x7\n\n#define TDMA_4SLOT\tBIT(8)\n\n#define TDMA_TIMER_TYPE_2SLOT 0\n#define TDMA_TIMER_TYPE_4SLOT 3\n\n#define COEX_RSSI_STEP\t\t4\n\n#define COEX_RSSI_HIGH(rssi) \\\n\t({ typeof(rssi) __rssi__ = rssi; \\\n\t   (__rssi__ == COEX_RSSI_STATE_HIGH || \\\n\t    __rssi__ == COEX_RSSI_STATE_STAY_HIGH ? true : false); })\n\n#define COEX_RSSI_MEDIUM(rssi) \\\n\t({ typeof(rssi) __rssi__ = rssi; \\\n\t   (__rssi__ == COEX_RSSI_STATE_MEDIUM || \\\n\t    __rssi__ == COEX_RSSI_STATE_STAY_MEDIUM ? true : false); })\n\n#define COEX_RSSI_LOW(rssi) \\\n\t({ typeof(rssi) __rssi__ = rssi; \\\n\t   (__rssi__ == COEX_RSSI_STATE_LOW || \\\n\t    __rssi__ == COEX_RSSI_STATE_STAY_LOW ? true : false); })\n\n#define GET_COEX_RESP_BT_SUPP_VER(payload)\t\t\t\t\\\n\tle64_get_bits(*((__le64 *)(payload)), GENMASK_ULL(39, 32))\n#define GET_COEX_RESP_BT_SUPP_FEAT(payload)\t\t\t\t\\\n\tle64_get_bits(*((__le64 *)(payload)), GENMASK_ULL(39, 24))\n#define GET_COEX_RESP_BT_PATCH_VER(payload)\t\t\t\t\\\n\tle64_get_bits(*((__le64 *)(payload)), GENMASK_ULL(55, 24))\n#define GET_COEX_RESP_BT_REG_VAL(payload)\t\t\t\t\\\n\tle64_get_bits(*((__le64 *)(payload)), GENMASK_ULL(39, 24))\n#define GET_COEX_RESP_BT_SCAN_TYPE(payload)\t\t\t\t\\\n\tle64_get_bits(*((__le64 *)(payload)), GENMASK(31, 24))\n\nenum coex_mp_info_op {\n\tBT_MP_INFO_OP_PATCH_VER\t= 0x00,\n\tBT_MP_INFO_OP_READ_REG\t= 0x11,\n\tBT_MP_INFO_OP_SUPP_FEAT\t= 0x2a,\n\tBT_MP_INFO_OP_SUPP_VER\t= 0x2b,\n\tBT_MP_INFO_OP_SCAN_TYPE\t= 0x2d,\n\tBT_MP_INFO_OP_LNA_CONSTRAINT\t= 0x32,\n};\n\nenum coex_set_ant_phase {\n\tCOEX_SET_ANT_INIT,\n\tCOEX_SET_ANT_WONLY,\n\tCOEX_SET_ANT_WOFF,\n\tCOEX_SET_ANT_2G,\n\tCOEX_SET_ANT_5G,\n\tCOEX_SET_ANT_POWERON,\n\tCOEX_SET_ANT_2G_WLBT,\n\tCOEX_SET_ANT_2G_FREERUN,\n\n\tCOEX_SET_ANT_MAX\n};\n\nenum coex_runreason {\n\tCOEX_RSN_2GSCANSTART\t= 0,\n\tCOEX_RSN_5GSCANSTART\t= 1,\n\tCOEX_RSN_SCANFINISH\t= 2,\n\tCOEX_RSN_2GSWITCHBAND\t= 3,\n\tCOEX_RSN_5GSWITCHBAND\t= 4,\n\tCOEX_RSN_2GCONSTART\t= 5,\n\tCOEX_RSN_5GCONSTART\t= 6,\n\tCOEX_RSN_2GCONFINISH\t= 7,\n\tCOEX_RSN_5GCONFINISH\t= 8,\n\tCOEX_RSN_2GMEDIA\t= 9,\n\tCOEX_RSN_5GMEDIA\t= 10,\n\tCOEX_RSN_MEDIADISCON\t= 11,\n\tCOEX_RSN_BTINFO\t\t= 12,\n\tCOEX_RSN_LPS\t\t= 13,\n\tCOEX_RSN_WLSTATUS\t= 14,\n\tCOEX_RSN_BTSTATUS\t= 15,\n\n\tCOEX_RSN_MAX\n};\n\nenum coex_lte_coex_table_type {\n\tCOEX_CTT_WL_VS_LTE,\n\tCOEX_CTT_BT_VS_LTE,\n};\n\nenum coex_gnt_setup_state {\n\tCOEX_GNT_SET_HW_PTA\t= 0x0,\n\tCOEX_GNT_SET_SW_LOW\t= 0x1,\n\tCOEX_GNT_SET_SW_HIGH\t= 0x3,\n};\n\nenum coex_ext_ant_switch_pos_type {\n\tCOEX_SWITCH_TO_BT,\n\tCOEX_SWITCH_TO_WLG,\n\tCOEX_SWITCH_TO_WLA,\n\tCOEX_SWITCH_TO_NOCARE,\n\tCOEX_SWITCH_TO_WLG_BT,\n\n\tCOEX_SWITCH_TO_MAX\n};\n\nenum coex_ext_ant_switch_ctrl_type {\n\tCOEX_SWITCH_CTRL_BY_BBSW,\n\tCOEX_SWITCH_CTRL_BY_PTA,\n\tCOEX_SWITCH_CTRL_BY_ANTDIV,\n\tCOEX_SWITCH_CTRL_BY_MAC,\n\tCOEX_SWITCH_CTRL_BY_BT,\n\tCOEX_SWITCH_CTRL_BY_FW,\n\n\tCOEX_SWITCH_CTRL_MAX\n};\n\nenum coex_algorithm {\n\tCOEX_ALGO_NOPROFILE\t= 0,\n\tCOEX_ALGO_HFP\t\t= 1,\n\tCOEX_ALGO_HID\t\t= 2,\n\tCOEX_ALGO_A2DP\t\t= 3,\n\tCOEX_ALGO_PAN\t\t= 4,\n\tCOEX_ALGO_A2DP_HID\t= 5,\n\tCOEX_ALGO_A2DP_PAN\t= 6,\n\tCOEX_ALGO_PAN_HID\t= 7,\n\tCOEX_ALGO_A2DP_PAN_HID\t= 8,\n\n\tCOEX_ALGO_MAX\n};\n\nenum coex_bt_profile {\n\tBPM_NOPROFILE\t\t= 0,\n\tBPM_HFP\t\t\t= BIT(0),\n\tBPM_HID\t\t\t= BIT(1),\n\tBPM_A2DP\t\t= BIT(2),\n\tBPM_PAN\t\t\t= BIT(3),\n\tBPM_HID_HFP\t\t= BPM_HID | BPM_HFP,\n\tBPM_A2DP_HFP\t\t= BPM_A2DP | BPM_HFP,\n\tBPM_A2DP_HID\t\t= BPM_A2DP | BPM_HID,\n\tBPM_A2DP_HID_HFP\t= BPM_A2DP | BPM_HID | BPM_HFP,\n\tBPM_PAN_HFP\t\t= BPM_PAN | BPM_HFP,\n\tBPM_PAN_HID\t\t= BPM_PAN | BPM_HID,\n\tBPM_PAN_HID_HFP\t\t= BPM_PAN | BPM_HID | BPM_HFP,\n\tBPM_PAN_A2DP\t\t= BPM_PAN | BPM_A2DP,\n\tBPM_PAN_A2DP_HFP\t= BPM_PAN | BPM_A2DP | BPM_HFP,\n\tBPM_PAN_A2DP_HID\t= BPM_PAN | BPM_A2DP | BPM_HID,\n\tBPM_PAN_A2DP_HID_HFP\t= BPM_PAN | BPM_A2DP | BPM_HID | BPM_HFP,\n};\n\nenum coex_wl_link_mode {\n\tCOEX_WLINK_2G1PORT\t= 0x0,\n\tCOEX_WLINK_5G\t\t= 0x3,\n\tCOEX_WLINK_2GFREE\t= 0x7,\n\tCOEX_WLINK_MAX\n};\n\nenum coex_wl2bt_scoreboard {\n\tCOEX_SCBD_ACTIVE\t= BIT(0),\n\tCOEX_SCBD_ONOFF\t\t= BIT(1),\n\tCOEX_SCBD_SCAN\t\t= BIT(2),\n\tCOEX_SCBD_UNDERTEST\t= BIT(3),\n\tCOEX_SCBD_RXGAIN\t= BIT(4),\n\tCOEX_SCBD_BT_RFK\t= BIT(5),\n\tCOEX_SCBD_WLBUSY\t= BIT(6),\n\tCOEX_SCBD_EXTFEM\t= BIT(8),\n\tCOEX_SCBD_TDMA\t\t= BIT(9),\n\tCOEX_SCBD_FIX2M\t\t= BIT(10),\n\tCOEX_SCBD_ALL\t\t= GENMASK(15, 0),\n};\n\nenum coex_power_save_type {\n\tCOEX_PS_WIFI_NATIVE\t= 0,\n\tCOEX_PS_LPS_ON\t\t= 1,\n\tCOEX_PS_LPS_OFF\t\t= 2,\n};\n\nenum coex_rssi_state {\n\tCOEX_RSSI_STATE_HIGH,\n\tCOEX_RSSI_STATE_MEDIUM,\n\tCOEX_RSSI_STATE_LOW,\n\tCOEX_RSSI_STATE_STAY_HIGH,\n\tCOEX_RSSI_STATE_STAY_MEDIUM,\n\tCOEX_RSSI_STATE_STAY_LOW,\n};\n\nenum coex_notify_type_ips {\n\tCOEX_IPS_LEAVE\t\t= 0x0,\n\tCOEX_IPS_ENTER\t\t= 0x1,\n};\n\nenum coex_notify_type_lps {\n\tCOEX_LPS_DISABLE\t= 0x0,\n\tCOEX_LPS_ENABLE\t\t= 0x1,\n};\n\nenum coex_notify_type_scan {\n\tCOEX_SCAN_FINISH,\n\tCOEX_SCAN_START,\n\tCOEX_SCAN_START_2G,\n\tCOEX_SCAN_START_5G,\n};\n\nenum coex_notify_type_switchband {\n\tCOEX_NOT_SWITCH,\n\tCOEX_SWITCH_TO_24G,\n\tCOEX_SWITCH_TO_5G,\n\tCOEX_SWITCH_TO_24G_NOFORSCAN,\n};\n\nenum coex_notify_type_associate {\n\tCOEX_ASSOCIATE_FINISH,\n\tCOEX_ASSOCIATE_START,\n\tCOEX_ASSOCIATE_5G_FINISH,\n\tCOEX_ASSOCIATE_5G_START,\n};\n\nenum coex_notify_type_media_status {\n\tCOEX_MEDIA_DISCONNECT,\n\tCOEX_MEDIA_CONNECT,\n\tCOEX_MEDIA_CONNECT_5G,\n};\n\nenum coex_bt_status {\n\tCOEX_BTSTATUS_NCON_IDLE\t\t= 0,\n\tCOEX_BTSTATUS_CON_IDLE\t\t= 1,\n\tCOEX_BTSTATUS_INQ_PAGE\t\t= 2,\n\tCOEX_BTSTATUS_ACL_BUSY\t\t= 3,\n\tCOEX_BTSTATUS_SCO_BUSY\t\t= 4,\n\tCOEX_BTSTATUS_ACL_SCO_BUSY\t= 5,\n\n\tCOEX_BTSTATUS_MAX\n};\n\nenum coex_wl_tput_dir {\n\tCOEX_WL_TPUT_TX\t\t\t= 0x0,\n\tCOEX_WL_TPUT_RX\t\t\t= 0x1,\n\tCOEX_WL_TPUT_MAX\n};\n\nenum coex_wl_priority_mask {\n\tCOEX_WLPRI_RX_RSP\t= 2,\n\tCOEX_WLPRI_TX_RSP\t= 3,\n\tCOEX_WLPRI_TX_BEACON\t= 4,\n\tCOEX_WLPRI_TX_OFDM\t= 11,\n\tCOEX_WLPRI_TX_CCK\t= 12,\n\tCOEX_WLPRI_TX_BEACONQ\t= 27,\n\tCOEX_WLPRI_RX_CCK\t= 28,\n\tCOEX_WLPRI_RX_OFDM\t= 29,\n\tCOEX_WLPRI_MAX\n};\n\nenum coex_commom_chip_setup {\n\tCOEX_CSETUP_INIT_HW\t\t= 0x0,\n\tCOEX_CSETUP_ANT_SWITCH\t\t= 0x1,\n\tCOEX_CSETUP_GNT_FIX\t\t= 0x2,\n\tCOEX_CSETUP_GNT_DEBUG\t\t= 0x3,\n\tCOEX_CSETUP_RFE_TYPE\t\t= 0x4,\n\tCOEX_CSETUP_COEXINFO_HW\t\t= 0x5,\n\tCOEX_CSETUP_WL_TX_POWER\t\t= 0x6,\n\tCOEX_CSETUP_WL_RX_GAIN\t\t= 0x7,\n\tCOEX_CSETUP_WLAN_ACT_IPS\t= 0x8,\n\tCOEX_CSETUP_MAX\n};\n\nenum coex_indirect_reg_type {\n\tCOEX_INDIRECT_1700\t\t= 0x0,\n\tCOEX_INDIRECT_7C0\t\t= 0x1,\n\tCOEX_INDIRECT_MAX\n};\n\nenum coex_pstdma_type {\n\tCOEX_PSTDMA_FORCE_LPSOFF\t= 0x0,\n\tCOEX_PSTDMA_FORCE_LPSON\t\t= 0x1,\n\tCOEX_PSTDMA_MAX\n};\n\nenum coex_btrssi_type {\n\tCOEX_BTRSSI_RATIO\t\t= 0x0,\n\tCOEX_BTRSSI_DBM\t\t\t= 0x1,\n\tCOEX_BTRSSI_MAX\n};\n\nstruct coex_table_para {\n\tu32 bt;\n\tu32 wl;\n};\n\nstruct coex_tdma_para {\n\tu8 para[5];\n};\n\nstruct coex_5g_afh_map {\n\tu32 wl_5g_ch;\n\tu8 bt_skip_ch;\n\tu8 bt_skip_span;\n};\n\nstruct coex_rf_para {\n\tu8 wl_pwr_dec_lvl;\n\tu8 bt_pwr_dec_lvl;\n\tbool wl_low_gain_en;\n\tu8 bt_lna_lvl;\n};\n\nstatic inline void rtw_coex_set_init(struct rtw_dev *rtwdev)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_init(rtwdev);\n}\n\nstatic inline\nvoid rtw_coex_set_ant_switch(struct rtw_dev *rtwdev, u8 ctrl_type, u8 pos_type)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tif (!chip->ops->coex_set_ant_switch)\n\t\treturn;\n\n\tchip->ops->coex_set_ant_switch(rtwdev, ctrl_type, pos_type);\n}\n\nstatic inline void rtw_coex_set_gnt_fix(struct rtw_dev *rtwdev)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_gnt_fix(rtwdev);\n}\n\nstatic inline void rtw_coex_set_gnt_debug(struct rtw_dev *rtwdev)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_gnt_debug(rtwdev);\n}\n\nstatic inline  void rtw_coex_set_rfe_type(struct rtw_dev *rtwdev)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_rfe_type(rtwdev);\n}\n\nstatic inline void rtw_coex_set_wl_tx_power(struct rtw_dev *rtwdev, u8 wl_pwr)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_wl_tx_power(rtwdev, wl_pwr);\n}\n\nstatic inline\nvoid rtw_coex_set_wl_rx_gain(struct rtw_dev *rtwdev, bool low_gain)\n{\n\tconst struct rtw_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->coex_set_wl_rx_gain(rtwdev, low_gain);\n}\n\nvoid rtw_coex_info_response(struct rtw_dev *rtwdev, struct sk_buff *skb);\nu32 rtw_coex_read_indirect_reg(struct rtw_dev *rtwdev, u16 addr);\nvoid rtw_coex_write_indirect_reg(struct rtw_dev *rtwdev, u16 addr,\n\t\t\t\t u32 mask, u32 val);\nvoid rtw_coex_write_scbd(struct rtw_dev *rtwdev, u16 bitpos, bool set);\n\nvoid rtw_coex_bt_relink_work(struct work_struct *work);\nvoid rtw_coex_bt_reenable_work(struct work_struct *work);\nvoid rtw_coex_defreeze_work(struct work_struct *work);\nvoid rtw_coex_wl_remain_work(struct work_struct *work);\nvoid rtw_coex_bt_remain_work(struct work_struct *work);\nvoid rtw_coex_wl_connecting_work(struct work_struct *work);\nvoid rtw_coex_bt_multi_link_remain_work(struct work_struct *work);\nvoid rtw_coex_wl_ccklock_work(struct work_struct *work);\n\nvoid rtw_coex_power_on_setting(struct rtw_dev *rtwdev);\nvoid rtw_coex_power_off_setting(struct rtw_dev *rtwdev);\nvoid rtw_coex_init_hw_config(struct rtw_dev *rtwdev, bool wifi_only);\nvoid rtw_coex_ips_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_lps_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_scan_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_connect_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_media_status_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_bt_info_notify(struct rtw_dev *rtwdev, u8 *buf, u8 length);\nvoid rtw_coex_bt_hid_info_notify(struct rtw_dev *rtwdev, u8 *buf, u8 length);\nvoid rtw_coex_wl_fwdbginfo_notify(struct rtw_dev *rtwdev, u8 *buf, u8 length);\nvoid rtw_coex_switchband_notify(struct rtw_dev *rtwdev, u8 type);\nvoid rtw_coex_wl_status_change_notify(struct rtw_dev *rtwdev, u32 type);\nvoid rtw_coex_wl_status_check(struct rtw_dev *rtwdev);\nvoid rtw_coex_query_bt_hid_list(struct rtw_dev *rtwdev);\nvoid rtw_coex_display_coex_info(struct rtw_dev *rtwdev, struct seq_file *m);\n\nstatic inline bool rtw_coex_disabled(struct rtw_dev *rtwdev)\n{\n\tstruct rtw_coex *coex = &rtwdev->coex;\n\tstruct rtw_coex_stat *coex_stat = &coex->stat;\n\n\treturn coex_stat->bt_disabled;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}