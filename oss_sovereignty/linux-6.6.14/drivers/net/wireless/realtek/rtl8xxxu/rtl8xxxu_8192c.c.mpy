{
  "module_name": "rtl8xxxu_8192c.c",
  "hash_id": "fe7b45d9d09f541f617fcc0dc69e9704503af67ae0f7eca975e6f34e07cdd8c0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8192c.c",
  "human_readable_source": "\n \n\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/sched.h>\n#include <linux/errno.h>\n#include <linux/slab.h>\n#include <linux/module.h>\n#include <linux/spinlock.h>\n#include <linux/list.h>\n#include <linux/usb.h>\n#include <linux/netdevice.h>\n#include <linux/etherdevice.h>\n#include <linux/ethtool.h>\n#include <linux/wireless.h>\n#include <linux/firmware.h>\n#include <linux/moduleparam.h>\n#include <net/mac80211.h>\n#include \"rtl8xxxu.h\"\n#include \"rtl8xxxu_regs.h\"\n\n#ifdef CONFIG_RTL8XXXU_UNTESTED\nstatic struct rtl8xxxu_power_base rtl8192c_power_base = {\n\t.reg_0e00 = 0x07090c0c,\n\t.reg_0e04 = 0x01020405,\n\t.reg_0e08 = 0x00000000,\n\t.reg_086c = 0x00000000,\n\n\t.reg_0e10 = 0x0b0c0c0e,\n\t.reg_0e14 = 0x01030506,\n\t.reg_0e18 = 0x0b0c0d0e,\n\t.reg_0e1c = 0x01030509,\n\n\t.reg_0830 = 0x07090c0c,\n\t.reg_0834 = 0x01020405,\n\t.reg_0838 = 0x00000000,\n\t.reg_086c_2 = 0x00000000,\n\n\t.reg_083c = 0x0b0c0d0e,\n\t.reg_0848 = 0x01030509,\n\t.reg_084c = 0x0b0c0d0e,\n\t.reg_0868 = 0x01030509,\n};\n\nstatic struct rtl8xxxu_power_base rtl8188r_power_base = {\n\t.reg_0e00 = 0x06080808,\n\t.reg_0e04 = 0x00040406,\n\t.reg_0e08 = 0x00000000,\n\t.reg_086c = 0x00000000,\n\n\t.reg_0e10 = 0x04060608,\n\t.reg_0e14 = 0x00020204,\n\t.reg_0e18 = 0x04060608,\n\t.reg_0e1c = 0x00020204,\n\n\t.reg_0830 = 0x06080808,\n\t.reg_0834 = 0x00040406,\n\t.reg_0838 = 0x00000000,\n\t.reg_086c_2 = 0x00000000,\n\n\t.reg_083c = 0x04060608,\n\t.reg_0848 = 0x00020204,\n\t.reg_084c = 0x04060608,\n\t.reg_0868 = 0x00020204,\n};\n\nstatic const struct rtl8xxxu_rfregval rtl8192cu_radioa_2t_init_table[] = {\n\t{0x00, 0x00030159}, {0x01, 0x00031284},\n\t{0x02, 0x00098000}, {0x03, 0x00018c63},\n\t{0x04, 0x000210e7}, {0x09, 0x0002044f},\n\t{0x0a, 0x0001adb1}, {0x0b, 0x00054867},\n\t{0x0c, 0x0008992e}, {0x0d, 0x0000e52c},\n\t{0x0e, 0x00039ce7}, {0x0f, 0x00000451},\n\t{0x19, 0x00000000}, {0x1a, 0x00010255},\n\t{0x1b, 0x00060a00}, {0x1c, 0x000fc378},\n\t{0x1d, 0x000a1250}, {0x1e, 0x0004445f},\n\t{0x1f, 0x00080001}, {0x20, 0x0000b614},\n\t{0x21, 0x0006c000}, {0x22, 0x00000000},\n\t{0x23, 0x00001558}, {0x24, 0x00000060},\n\t{0x25, 0x00000483}, {0x26, 0x0004f000},\n\t{0x27, 0x000ec7d9}, {0x28, 0x000577c0},\n\t{0x29, 0x00004783}, {0x2a, 0x00000001},\n\t{0x2b, 0x00021334}, {0x2a, 0x00000000},\n\t{0x2b, 0x00000054}, {0x2a, 0x00000001},\n\t{0x2b, 0x00000808}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000c}, {0x2a, 0x00000002},\n\t{0x2b, 0x00000808}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000003},\n\t{0x2b, 0x00000808}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000004},\n\t{0x2b, 0x00000808}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000005},\n\t{0x2b, 0x00000808}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000006},\n\t{0x2b, 0x00000709}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000007},\n\t{0x2b, 0x00000709}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000008},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0004b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000009},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000a},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000b},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000c},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000d},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000e},\n\t{0x2b, 0x0000050b}, {0x2b, 0x00066666},\n\t{0x2c, 0x0000001a}, {0x2a, 0x000e0000},\n\t{0x10, 0x0004000f}, {0x11, 0x000e31fc},\n\t{0x10, 0x0006000f}, {0x11, 0x000ff9f8},\n\t{0x10, 0x0002000f}, {0x11, 0x000203f9},\n\t{0x10, 0x0003000f}, {0x11, 0x000ff500},\n\t{0x10, 0x00000000}, {0x11, 0x00000000},\n\t{0x10, 0x0008000f}, {0x11, 0x0003f100},\n\t{0x10, 0x0009000f}, {0x11, 0x00023100},\n\t{0x12, 0x00032000}, {0x12, 0x00071000},\n\t{0x12, 0x000b0000}, {0x12, 0x000fc000},\n\t{0x13, 0x000287b3}, {0x13, 0x000244b7},\n\t{0x13, 0x000204ab}, {0x13, 0x0001c49f},\n\t{0x13, 0x00018493}, {0x13, 0x0001429b},\n\t{0x13, 0x00010299}, {0x13, 0x0000c29c},\n\t{0x13, 0x000081a0}, {0x13, 0x000040ac},\n\t{0x13, 0x00000020}, {0x14, 0x0001944c},\n\t{0x14, 0x00059444}, {0x14, 0x0009944c},\n\t{0x14, 0x000d9444}, {0x15, 0x0000f424},\n\t{0x15, 0x0004f424}, {0x15, 0x0008f424},\n\t{0x15, 0x000cf424}, {0x16, 0x000e0330},\n\t{0x16, 0x000a0330}, {0x16, 0x00060330},\n\t{0x16, 0x00020330}, {0x00, 0x00010159},\n\t{0x18, 0x0000f401}, {0xfe, 0x00000000},\n\t{0xfe, 0x00000000}, {0x1f, 0x00080003},\n\t{0xfe, 0x00000000}, {0xfe, 0x00000000},\n\t{0x1e, 0x00044457}, {0x1f, 0x00080000},\n\t{0x00, 0x00030159},\n\t{0xff, 0xffffffff}\n};\n\nstatic const struct rtl8xxxu_rfregval rtl8192cu_radiob_2t_init_table[] = {\n\t{0x00, 0x00030159}, {0x01, 0x00031284},\n\t{0x02, 0x00098000}, {0x03, 0x00018c63},\n\t{0x04, 0x000210e7}, {0x09, 0x0002044f},\n\t{0x0a, 0x0001adb1}, {0x0b, 0x00054867},\n\t{0x0c, 0x0008992e}, {0x0d, 0x0000e52c},\n\t{0x0e, 0x00039ce7}, {0x0f, 0x00000451},\n\t{0x12, 0x00032000}, {0x12, 0x00071000},\n\t{0x12, 0x000b0000}, {0x12, 0x000fc000},\n\t{0x13, 0x000287af}, {0x13, 0x000244b7},\n\t{0x13, 0x000204ab}, {0x13, 0x0001c49f},\n\t{0x13, 0x00018493}, {0x13, 0x00014297},\n\t{0x13, 0x00010295}, {0x13, 0x0000c298},\n\t{0x13, 0x0000819c}, {0x13, 0x000040a8},\n\t{0x13, 0x0000001c}, {0x14, 0x0001944c},\n\t{0x14, 0x00059444}, {0x14, 0x0009944c},\n\t{0x14, 0x000d9444}, {0x15, 0x0000f424},\n\t{0x15, 0x0004f424}, {0x15, 0x0008f424},\n\t{0x15, 0x000cf424}, {0x16, 0x000e0330},\n\t{0x16, 0x000a0330}, {0x16, 0x00060330},\n\t{0x16, 0x00020330},\n\t{0xff, 0xffffffff}\n};\n\nstatic const struct rtl8xxxu_rfregval rtl8192cu_radioa_1t_init_table[] = {\n\t{0x00, 0x00030159}, {0x01, 0x00031284},\n\t{0x02, 0x00098000}, {0x03, 0x00018c63},\n\t{0x04, 0x000210e7}, {0x09, 0x0002044f},\n\t{0x0a, 0x0001adb1}, {0x0b, 0x00054867},\n\t{0x0c, 0x0008992e}, {0x0d, 0x0000e52c},\n\t{0x0e, 0x00039ce7}, {0x0f, 0x00000451},\n\t{0x19, 0x00000000}, {0x1a, 0x00010255},\n\t{0x1b, 0x00060a00}, {0x1c, 0x000fc378},\n\t{0x1d, 0x000a1250}, {0x1e, 0x0004445f},\n\t{0x1f, 0x00080001}, {0x20, 0x0000b614},\n\t{0x21, 0x0006c000}, {0x22, 0x00000000},\n\t{0x23, 0x00001558}, {0x24, 0x00000060},\n\t{0x25, 0x00000483}, {0x26, 0x0004f000},\n\t{0x27, 0x000ec7d9}, {0x28, 0x000577c0},\n\t{0x29, 0x00004783}, {0x2a, 0x00000001},\n\t{0x2b, 0x00021334}, {0x2a, 0x00000000},\n\t{0x2b, 0x00000054}, {0x2a, 0x00000001},\n\t{0x2b, 0x00000808}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000c}, {0x2a, 0x00000002},\n\t{0x2b, 0x00000808}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000003},\n\t{0x2b, 0x00000808}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000004},\n\t{0x2b, 0x00000808}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000005},\n\t{0x2b, 0x00000808}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000006},\n\t{0x2b, 0x00000709}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000007},\n\t{0x2b, 0x00000709}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000008},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0004b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000009},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000a},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000b},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000c},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000d},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000e},\n\t{0x2b, 0x0000050b}, {0x2b, 0x00066666},\n\t{0x2c, 0x0000001a}, {0x2a, 0x000e0000},\n\t{0x10, 0x0004000f}, {0x11, 0x000e31fc},\n\t{0x10, 0x0006000f}, {0x11, 0x000ff9f8},\n\t{0x10, 0x0002000f}, {0x11, 0x000203f9},\n\t{0x10, 0x0003000f}, {0x11, 0x000ff500},\n\t{0x10, 0x00000000}, {0x11, 0x00000000},\n\t{0x10, 0x0008000f}, {0x11, 0x0003f100},\n\t{0x10, 0x0009000f}, {0x11, 0x00023100},\n\t{0x12, 0x00032000}, {0x12, 0x00071000},\n\t{0x12, 0x000b0000}, {0x12, 0x000fc000},\n\t{0x13, 0x000287b3}, {0x13, 0x000244b7},\n\t{0x13, 0x000204ab}, {0x13, 0x0001c49f},\n\t{0x13, 0x00018493}, {0x13, 0x0001429b},\n\t{0x13, 0x00010299}, {0x13, 0x0000c29c},\n\t{0x13, 0x000081a0}, {0x13, 0x000040ac},\n\t{0x13, 0x00000020}, {0x14, 0x0001944c},\n\t{0x14, 0x00059444}, {0x14, 0x0009944c},\n\t{0x14, 0x000d9444}, {0x15, 0x0000f405},\n\t{0x15, 0x0004f405}, {0x15, 0x0008f405},\n\t{0x15, 0x000cf405}, {0x16, 0x000e0330},\n\t{0x16, 0x000a0330}, {0x16, 0x00060330},\n\t{0x16, 0x00020330}, {0x00, 0x00010159},\n\t{0x18, 0x0000f401}, {0xfe, 0x00000000},\n\t{0xfe, 0x00000000}, {0x1f, 0x00080003},\n\t{0xfe, 0x00000000}, {0xfe, 0x00000000},\n\t{0x1e, 0x00044457}, {0x1f, 0x00080000},\n\t{0x00, 0x00030159},\n\t{0xff, 0xffffffff}\n};\n\nstatic const struct rtl8xxxu_rfregval rtl8188ru_radioa_1t_highpa_table[] = {\n\t{0x00, 0x00030159}, {0x01, 0x00031284},\n\t{0x02, 0x00098000}, {0x03, 0x00018c63},\n\t{0x04, 0x000210e7}, {0x09, 0x0002044f},\n\t{0x0a, 0x0001adb0}, {0x0b, 0x00054867},\n\t{0x0c, 0x0008992e}, {0x0d, 0x0000e529},\n\t{0x0e, 0x00039ce7}, {0x0f, 0x00000451},\n\t{0x19, 0x00000000}, {0x1a, 0x00000255},\n\t{0x1b, 0x00060a00}, {0x1c, 0x000fc378},\n\t{0x1d, 0x000a1250}, {0x1e, 0x0004445f},\n\t{0x1f, 0x00080001}, {0x20, 0x0000b614},\n\t{0x21, 0x0006c000}, {0x22, 0x0000083c},\n\t{0x23, 0x00001558}, {0x24, 0x00000060},\n\t{0x25, 0x00000483}, {0x26, 0x0004f000},\n\t{0x27, 0x000ec7d9}, {0x28, 0x000977c0},\n\t{0x29, 0x00004783}, {0x2a, 0x00000001},\n\t{0x2b, 0x00021334}, {0x2a, 0x00000000},\n\t{0x2b, 0x00000054}, {0x2a, 0x00000001},\n\t{0x2b, 0x00000808}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000c}, {0x2a, 0x00000002},\n\t{0x2b, 0x00000808}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000003},\n\t{0x2b, 0x00000808}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000004},\n\t{0x2b, 0x00000808}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000005},\n\t{0x2b, 0x00000808}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000006},\n\t{0x2b, 0x00000709}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000007},\n\t{0x2b, 0x00000709}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000008},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0004b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x00000009},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00053333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000a},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0005b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000b},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00063333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000c},\n\t{0x2b, 0x0000060a}, {0x2b, 0x0006b333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000d},\n\t{0x2b, 0x0000060a}, {0x2b, 0x00073333},\n\t{0x2c, 0x0000000d}, {0x2a, 0x0000000e},\n\t{0x2b, 0x0000050b}, {0x2b, 0x00066666},\n\t{0x2c, 0x0000001a}, {0x2a, 0x000e0000},\n\t{0x10, 0x0004000f}, {0x11, 0x000e31fc},\n\t{0x10, 0x0006000f}, {0x11, 0x000ff9f8},\n\t{0x10, 0x0002000f}, {0x11, 0x000203f9},\n\t{0x10, 0x0003000f}, {0x11, 0x000ff500},\n\t{0x10, 0x00000000}, {0x11, 0x00000000},\n\t{0x10, 0x0008000f}, {0x11, 0x0003f100},\n\t{0x10, 0x0009000f}, {0x11, 0x00023100},\n\t{0x12, 0x000d8000}, {0x12, 0x00090000},\n\t{0x12, 0x00051000}, {0x12, 0x00012000},\n\t{0x13, 0x00028fb4}, {0x13, 0x00024fa8},\n\t{0x13, 0x000207a4}, {0x13, 0x0001c3b0},\n\t{0x13, 0x000183a4}, {0x13, 0x00014398},\n\t{0x13, 0x000101a4}, {0x13, 0x0000c198},\n\t{0x13, 0x000080a4}, {0x13, 0x00004098},\n\t{0x13, 0x00000000}, {0x14, 0x0001944c},\n\t{0x14, 0x00059444}, {0x14, 0x0009944c},\n\t{0x14, 0x000d9444}, {0x15, 0x0000f405},\n\t{0x15, 0x0004f405}, {0x15, 0x0008f405},\n\t{0x15, 0x000cf405}, {0x16, 0x000e0330},\n\t{0x16, 0x000a0330}, {0x16, 0x00060330},\n\t{0x16, 0x00020330}, {0x00, 0x00010159},\n\t{0x18, 0x0000f401}, {0xfe, 0x00000000},\n\t{0xfe, 0x00000000}, {0x1f, 0x00080003},\n\t{0xfe, 0x00000000}, {0xfe, 0x00000000},\n\t{0x1e, 0x00044457}, {0x1f, 0x00080000},\n\t{0x00, 0x00030159},\n\t{0xff, 0xffffffff}\n};\n\nstatic int rtl8192cu_identify_chip(struct rtl8xxxu_priv *priv)\n{\n\tstruct device *dev = &priv->udev->dev;\n\tu32 val32, bonding, sys_cfg, vendor;\n\tint ret = 0;\n\n\tsys_cfg = rtl8xxxu_read32(priv, REG_SYS_CFG);\n\tpriv->chip_cut = u32_get_bits(sys_cfg, SYS_CFG_CHIP_VERSION_MASK);\n\tif (sys_cfg & SYS_CFG_TRP_VAUX_EN) {\n\t\tdev_info(dev, \"Unsupported test chip\\n\");\n\t\tret = -ENOTSUPP;\n\t\tgoto out;\n\t}\n\n\tif (sys_cfg & SYS_CFG_TYPE_ID) {\n\t\tbonding = rtl8xxxu_read32(priv, REG_HPON_FSM);\n\t\tbonding &= HPON_FSM_BONDING_MASK;\n\t\tif (bonding == HPON_FSM_BONDING_1T2R) {\n\t\t\tstrscpy(priv->chip_name, \"8191CU\", sizeof(priv->chip_name));\n\t\t\tpriv->tx_paths = 1;\n\t\t\tpriv->usb_interrupts = 1;\n\t\t\tpriv->rtl_chip = RTL8191C;\n\t\t} else {\n\t\t\tstrscpy(priv->chip_name, \"8192CU\", sizeof(priv->chip_name));\n\t\t\tpriv->tx_paths = 2;\n\t\t\tpriv->usb_interrupts = 0;\n\t\t\tpriv->rtl_chip = RTL8192C;\n\t\t}\n\t\tpriv->rf_paths = 2;\n\t\tpriv->rx_paths = 2;\n\t} else {\n\t\tstrscpy(priv->chip_name, \"8188CU\", sizeof(priv->chip_name));\n\t\tpriv->rf_paths = 1;\n\t\tpriv->rx_paths = 1;\n\t\tpriv->tx_paths = 1;\n\t\tpriv->rtl_chip = RTL8188C;\n\t\tpriv->usb_interrupts = 0;\n\t}\n\tpriv->has_wifi = 1;\n\n\tvendor = sys_cfg & SYS_CFG_VENDOR_ID;\n\trtl8xxxu_identify_vendor_1bit(priv, vendor);\n\n\tval32 = rtl8xxxu_read32(priv, REG_GPIO_OUTSTS);\n\tpriv->rom_rev = u32_get_bits(val32, GPIO_RF_RL_ID);\n\n\trtl8xxxu_config_endpoints_sie(priv);\n\n\t \n\tif (!priv->ep_tx_count)\n\t\tret = rtl8xxxu_config_endpoints_no_sie(priv);\n\nout:\n\treturn ret;\n}\n\nstatic int rtl8192cu_load_firmware(struct rtl8xxxu_priv *priv)\n{\n\tconst char *fw_name;\n\tint ret;\n\n\tif (!priv->vendor_umc)\n\t\tfw_name = \"rtlwifi/rtl8192cufw_TMSC.bin\";\n\telse if (priv->chip_cut || priv->rtl_chip == RTL8192C)\n\t\tfw_name = \"rtlwifi/rtl8192cufw_B.bin\";\n\telse\n\t\tfw_name = \"rtlwifi/rtl8192cufw_A.bin\";\n\n\tret = rtl8xxxu_load_firmware(priv, fw_name);\n\n\treturn ret;\n}\n\nstatic int rtl8192cu_parse_efuse(struct rtl8xxxu_priv *priv)\n{\n\tstruct rtl8192cu_efuse *efuse = &priv->efuse_wifi.efuse8192;\n\n\tif (efuse->rtl_id != cpu_to_le16(0x8129))\n\t\treturn -EINVAL;\n\n\tether_addr_copy(priv->mac_addr, efuse->mac_addr);\n\n\tmemcpy(priv->cck_tx_power_index_A,\n\t       efuse->cck_tx_power_index_A,\n\t       sizeof(efuse->cck_tx_power_index_A));\n\tmemcpy(priv->cck_tx_power_index_B,\n\t       efuse->cck_tx_power_index_B,\n\t       sizeof(efuse->cck_tx_power_index_B));\n\n\tmemcpy(priv->ht40_1s_tx_power_index_A,\n\t       efuse->ht40_1s_tx_power_index_A,\n\t       sizeof(efuse->ht40_1s_tx_power_index_A));\n\tmemcpy(priv->ht40_1s_tx_power_index_B,\n\t       efuse->ht40_1s_tx_power_index_B,\n\t       sizeof(efuse->ht40_1s_tx_power_index_B));\n\tmemcpy(priv->ht40_2s_tx_power_index_diff,\n\t       efuse->ht40_2s_tx_power_index_diff,\n\t       sizeof(efuse->ht40_2s_tx_power_index_diff));\n\n\tmemcpy(priv->ht20_tx_power_index_diff,\n\t       efuse->ht20_tx_power_index_diff,\n\t       sizeof(efuse->ht20_tx_power_index_diff));\n\tmemcpy(priv->ofdm_tx_power_index_diff,\n\t       efuse->ofdm_tx_power_index_diff,\n\t       sizeof(efuse->ofdm_tx_power_index_diff));\n\n\tmemcpy(priv->ht40_max_power_offset,\n\t       efuse->ht40_max_power_offset,\n\t       sizeof(efuse->ht40_max_power_offset));\n\tmemcpy(priv->ht20_max_power_offset,\n\t       efuse->ht20_max_power_offset,\n\t       sizeof(efuse->ht20_max_power_offset));\n\n\tpriv->power_base = &rtl8192c_power_base;\n\n\tif (efuse->rf_regulatory & 0x20) {\n\t\tstrscpy(priv->chip_name, \"8188RU\", sizeof(priv->chip_name));\n\t\tpriv->rtl_chip = RTL8188R;\n\t\tpriv->hi_pa = 1;\n\t\tpriv->no_pape = 1;\n\t\tpriv->power_base = &rtl8188r_power_base;\n\t}\n\n\treturn 0;\n}\n\nstatic int rtl8192cu_init_phy_rf(struct rtl8xxxu_priv *priv)\n{\n\tconst struct rtl8xxxu_rfregval *rftable;\n\tint ret;\n\n\tif (priv->rtl_chip == RTL8188R) {\n\t\trftable = rtl8188ru_radioa_1t_highpa_table;\n\t\tret = rtl8xxxu_init_phy_rf(priv, rftable, RF_A);\n\t} else if (priv->rf_paths == 1) {\n\t\trftable = rtl8192cu_radioa_1t_init_table;\n\t\tret = rtl8xxxu_init_phy_rf(priv, rftable, RF_A);\n\t} else {\n\t\trftable = rtl8192cu_radioa_2t_init_table;\n\t\tret = rtl8xxxu_init_phy_rf(priv, rftable, RF_A);\n\t\tif (ret)\n\t\t\tgoto exit;\n\t\trftable = rtl8192cu_radiob_2t_init_table;\n\t\tret = rtl8xxxu_init_phy_rf(priv, rftable, RF_B);\n\t}\n\nexit:\n\treturn ret;\n}\n\nstatic int rtl8192cu_power_on(struct rtl8xxxu_priv *priv)\n{\n\tu8 val8;\n\tu16 val16;\n\tu32 val32;\n\tint i;\n\n\tfor (i = 100; i; i--) {\n\t\tval8 = rtl8xxxu_read8(priv, REG_APS_FSMCO);\n\t\tif (val8 & APS_FSMCO_PFM_ALDN)\n\t\t\tbreak;\n\t}\n\n\tif (!i) {\n\t\tpr_info(\"%s: Poll failed\\n\", __func__);\n\t\treturn -ENODEV;\n\t}\n\n\t \n\trtl8xxxu_write8(priv, REG_RSV_CTRL, 0x0);\n\trtl8xxxu_write8(priv, REG_SPS0_CTRL, 0x2b);\n\tudelay(100);\n\n\tval8 = rtl8xxxu_read8(priv, REG_LDOV12D_CTRL);\n\tif (!(val8 & LDOV12D_ENABLE)) {\n\t\tpr_info(\"%s: Enabling LDOV12D (%02x)\\n\", __func__, val8);\n\t\tval8 |= LDOV12D_ENABLE;\n\t\trtl8xxxu_write8(priv, REG_LDOV12D_CTRL, val8);\n\n\t\tudelay(100);\n\n\t\tval8 = rtl8xxxu_read8(priv, REG_SYS_ISO_CTRL);\n\t\tval8 &= ~SYS_ISO_MD2PP;\n\t\trtl8xxxu_write8(priv, REG_SYS_ISO_CTRL, val8);\n\t}\n\n\t \n\tval16 = rtl8xxxu_read16(priv, REG_APS_FSMCO);\n\tval16 |= APS_FSMCO_MAC_ENABLE;\n\trtl8xxxu_write16(priv, REG_APS_FSMCO, val16);\n\n\tfor (i = 1000; i; i--) {\n\t\tval16 = rtl8xxxu_read16(priv, REG_APS_FSMCO);\n\t\tif (!(val16 & APS_FSMCO_MAC_ENABLE))\n\t\t\tbreak;\n\t}\n\tif (!i) {\n\t\tpr_info(\"%s: FSMCO_MAC_ENABLE poll failed\\n\", __func__);\n\t\treturn -EBUSY;\n\t}\n\n\t \n\tval16 = APS_FSMCO_HW_SUSPEND | APS_FSMCO_ENABLE_POWERDOWN |\n\t\tAPS_FSMCO_PFM_ALDN;\n\trtl8xxxu_write16(priv, REG_APS_FSMCO, val16);\n\n\t \n\tval16 = rtl8xxxu_read16(priv, REG_SYS_ISO_CTRL);\n\tval16 &= ~SYS_ISO_DIOR;\n\trtl8xxxu_write16(priv, REG_SYS_ISO_CTRL, val16);\n\n\tval8 = rtl8xxxu_read8(priv, REG_APSD_CTRL);\n\tval8 &= ~APSD_CTRL_OFF;\n\trtl8xxxu_write8(priv, REG_APSD_CTRL, val8);\n\tfor (i = 200; i; i--) {\n\t\tval8 = rtl8xxxu_read8(priv, REG_APSD_CTRL);\n\t\tif (!(val8 & APSD_CTRL_OFF_STATUS))\n\t\t\tbreak;\n\t}\n\n\tif (!i) {\n\t\tpr_info(\"%s: APSD_CTRL poll failed\\n\", __func__);\n\t\treturn -EBUSY;\n\t}\n\n\t \n\tval16 = rtl8xxxu_read16(priv, REG_CR);\n\tval16 |= CR_HCI_TXDMA_ENABLE | CR_HCI_RXDMA_ENABLE |\n\t\tCR_TXDMA_ENABLE | CR_RXDMA_ENABLE | CR_PROTOCOL_ENABLE |\n\t\tCR_SCHEDULE_ENABLE | CR_MAC_TX_ENABLE | CR_MAC_RX_ENABLE;\n\trtl8xxxu_write16(priv, REG_CR, val16);\n\n\trtl8xxxu_write8(priv, 0xfe10, 0x19);\n\n\t \n\tif (priv->rtl_chip == RTL8188R) {\n\t\tval32 = rtl8xxxu_read32(priv, REG_FPGA0_XCD_RF_PARM);\n\t\tval32 &= ~BIT(1);\n\t\trtl8xxxu_write32(priv, REG_FPGA0_XCD_RF_PARM, val32);\n\t}\n\treturn 0;\n}\n\nstruct rtl8xxxu_fileops rtl8192cu_fops = {\n\t.identify_chip = rtl8192cu_identify_chip,\n\t.parse_efuse = rtl8192cu_parse_efuse,\n\t.load_firmware = rtl8192cu_load_firmware,\n\t.power_on = rtl8192cu_power_on,\n\t.power_off = rtl8xxxu_power_off,\n\t.read_efuse = rtl8xxxu_read_efuse,\n\t.reset_8051 = rtl8xxxu_reset_8051,\n\t.llt_init = rtl8xxxu_init_llt_table,\n\t.init_phy_bb = rtl8xxxu_gen1_init_phy_bb,\n\t.init_phy_rf = rtl8192cu_init_phy_rf,\n\t.phy_lc_calibrate = rtl8723a_phy_lc_calibrate,\n\t.phy_iq_calibrate = rtl8xxxu_gen1_phy_iq_calibrate,\n\t.config_channel = rtl8xxxu_gen1_config_channel,\n\t.parse_rx_desc = rtl8xxxu_parse_rxdesc16,\n\t.parse_phystats = rtl8723au_rx_parse_phystats,\n\t.init_aggregation = rtl8xxxu_gen1_init_aggregation,\n\t.enable_rf = rtl8xxxu_gen1_enable_rf,\n\t.disable_rf = rtl8xxxu_gen1_disable_rf,\n\t.usb_quirks = rtl8xxxu_gen1_usb_quirks,\n\t.set_tx_power = rtl8xxxu_gen1_set_tx_power,\n\t.update_rate_mask = rtl8xxxu_update_rate_mask,\n\t.report_connect = rtl8xxxu_gen1_report_connect,\n\t.report_rssi = rtl8xxxu_gen1_report_rssi,\n\t.fill_txdesc = rtl8xxxu_fill_txdesc_v1,\n\t.cck_rssi = rtl8723a_cck_rssi,\n\t.writeN_block_size = 128,\n\t.rx_agg_buf_size = 16000,\n\t.tx_desc_size = sizeof(struct rtl8xxxu_txdesc32),\n\t.rx_desc_size = sizeof(struct rtl8xxxu_rxdesc16),\n\t.adda_1t_init = 0x0b1b25a0,\n\t.adda_1t_path_on = 0x0bdb25a0,\n\t.adda_2t_path_on_a = 0x04db25a4,\n\t.adda_2t_path_on_b = 0x0b1b25a4,\n\t.trxff_boundary = 0x27ff,\n\t.pbp_rx = PBP_PAGE_SIZE_128,\n\t.pbp_tx = PBP_PAGE_SIZE_128,\n\t.mactable = rtl8xxxu_gen1_mac_init_table,\n\t.total_page_num = TX_TOTAL_PAGE_NUM,\n\t.page_num_hi = TX_PAGE_NUM_HI_PQ,\n\t.page_num_lo = TX_PAGE_NUM_LO_PQ,\n\t.page_num_norm = TX_PAGE_NUM_NORM_PQ,\n};\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}