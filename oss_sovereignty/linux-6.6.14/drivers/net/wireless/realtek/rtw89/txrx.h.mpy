{
  "module_name": "txrx.h",
  "hash_id": "521a86b4ebe998ecbb1e6886cf8a70c22dd01d392bb73dc029ac7214a5aa1d43",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/txrx.h",
  "human_readable_source": " \n \n\n#ifndef __RTW89_TXRX_H__\n#define __RTW89_TXRX_H__\n\n#include \"debug.h\"\n\n#define DATA_RATE_MODE_CTRL_MASK\tGENMASK(8, 7)\n#define DATA_RATE_MODE_CTRL_MASK_V1\tGENMASK(10, 8)\n#define DATA_RATE_NOT_HT_IDX_MASK\tGENMASK(3, 0)\n#define DATA_RATE_MODE_NON_HT\t\t0x0\n#define DATA_RATE_HT_IDX_MASK\t\tGENMASK(4, 0)\n#define DATA_RATE_HT_IDX_MASK_V1\tGENMASK(4, 0)\n#define DATA_RATE_MODE_HT\t\t0x1\n#define DATA_RATE_VHT_HE_NSS_MASK\tGENMASK(6, 4)\n#define DATA_RATE_VHT_HE_IDX_MASK\tGENMASK(3, 0)\n#define DATA_RATE_NSS_MASK_V1\t\tGENMASK(7, 5)\n#define DATA_RATE_MCS_MASK_V1\t\tGENMASK(4, 0)\n#define DATA_RATE_MODE_VHT\t\t0x2\n#define DATA_RATE_MODE_HE\t\t0x3\n#define DATA_RATE_MODE_EHT\t\t0x4\n\nstatic inline u8 rtw89_get_data_rate_mode(struct rtw89_dev *rtwdev, u16 hw_rate)\n{\n\tif (rtwdev->chip->chip_gen == RTW89_CHIP_BE)\n\t\treturn u16_get_bits(hw_rate, DATA_RATE_MODE_CTRL_MASK_V1);\n\n\treturn u16_get_bits(hw_rate, DATA_RATE_MODE_CTRL_MASK);\n}\n\nstatic inline u8 rtw89_get_data_not_ht_idx(struct rtw89_dev *rtwdev, u16 hw_rate)\n{\n\treturn u16_get_bits(hw_rate, DATA_RATE_NOT_HT_IDX_MASK);\n}\n\nstatic inline u8 rtw89_get_data_ht_mcs(struct rtw89_dev *rtwdev, u16 hw_rate)\n{\n\tif (rtwdev->chip->chip_gen == RTW89_CHIP_BE)\n\t\treturn u16_get_bits(hw_rate, DATA_RATE_HT_IDX_MASK_V1);\n\n\treturn u16_get_bits(hw_rate, DATA_RATE_HT_IDX_MASK);\n}\n\nstatic inline u8 rtw89_get_data_mcs(struct rtw89_dev *rtwdev, u16 hw_rate)\n{\n\tif (rtwdev->chip->chip_gen == RTW89_CHIP_BE)\n\t\treturn u16_get_bits(hw_rate, DATA_RATE_MCS_MASK_V1);\n\n\treturn u16_get_bits(hw_rate, DATA_RATE_VHT_HE_IDX_MASK);\n}\n\nstatic inline u8 rtw89_get_data_nss(struct rtw89_dev *rtwdev, u16 hw_rate)\n{\n\tif (rtwdev->chip->chip_gen == RTW89_CHIP_BE)\n\t\treturn u16_get_bits(hw_rate, DATA_RATE_NSS_MASK_V1);\n\n\treturn u16_get_bits(hw_rate, DATA_RATE_VHT_HE_NSS_MASK);\n}\n\n \n#define RTW89_TXWD_BODY0_WP_OFFSET GENMASK(31, 24)\n#define RTW89_TXWD_BODY0_WP_OFFSET_V1 GENMASK(28, 24)\n#define RTW89_TXWD_BODY0_MORE_DATA BIT(23)\n#define RTW89_TXWD_BODY0_WD_INFO_EN BIT(22)\n#define RTW89_TXWD_BODY0_FW_DL BIT(20)\n#define RTW89_TXWD_BODY0_CHANNEL_DMA GENMASK(19, 16)\n#define RTW89_TXWD_BODY0_HDR_LLC_LEN GENMASK(15, 11)\n#define RTW89_TXWD_BODY0_WD_PAGE BIT(7)\n#define RTW89_TXWD_BODY0_HW_AMSDU BIT(5)\n#define RTW89_TXWD_BODY0_HW_SSN_SEL GENMASK(3, 2)\n#define RTW89_TXWD_BODY0_HW_SSN_MODE GENMASK(1, 0)\n\n \n#define RTW89_TXWD_BODY1_ADDR_INFO_NUM GENMASK(31, 26)\n#define RTW89_TXWD_BODY1_PAYLOAD_ID GENMASK(31, 16)\n#define RTW89_TXWD_BODY1_SEC_KEYID GENMASK(5, 4)\n#define RTW89_TXWD_BODY1_SEC_TYPE GENMASK(3, 0)\n\n \n#define RTW89_TXWD_BODY2_MACID GENMASK(30, 24)\n#define RTW89_TXWD_BODY2_TID_INDICATE BIT(23)\n#define RTW89_TXWD_BODY2_QSEL GENMASK(22, 17)\n#define RTW89_TXWD_BODY2_TXPKT_SIZE GENMASK(13, 0)\n\n \n#define RTW89_TXWD_BODY3_BK BIT(13)\n#define RTW89_TXWD_BODY3_AGG_EN BIT(12)\n#define RTW89_TXWD_BODY3_SW_SEQ GENMASK(11, 0)\n\n \n#define RTW89_TXWD_BODY4_SEC_IV_L1 GENMASK(31, 24)\n#define RTW89_TXWD_BODY4_SEC_IV_L0 GENMASK(23, 16)\n\n \n#define RTW89_TXWD_BODY5_SEC_IV_H5 GENMASK(31, 24)\n#define RTW89_TXWD_BODY5_SEC_IV_H4 GENMASK(23, 16)\n#define RTW89_TXWD_BODY5_SEC_IV_H3 GENMASK(15, 8)\n#define RTW89_TXWD_BODY5_SEC_IV_H2 GENMASK(7, 0)\n\n \n\n \n#define RTW89_TXWD_BODY7_USE_RATE_V1 BIT(31)\n#define RTW89_TXWD_BODY7_DATA_BW GENMASK(29, 28)\n#define RTW89_TXWD_BODY7_GI_LTF GENMASK(27, 25)\n#define RTW89_TXWD_BODY7_DATA_RATE GENMASK(24, 16)\n\n \n#define RTW89_TXWD_INFO0_USE_RATE BIT(30)\n#define RTW89_TXWD_INFO0_DATA_BW GENMASK(29, 28)\n#define RTW89_TXWD_INFO0_GI_LTF GENMASK(27, 25)\n#define RTW89_TXWD_INFO0_DATA_RATE GENMASK(24, 16)\n#define RTW89_TXWD_INFO0_DATA_ER BIT(15)\n#define RTW89_TXWD_INFO0_DISDATAFB BIT(10)\n#define RTW89_TXWD_INFO0_DATA_BW_ER BIT(8)\n#define RTW89_TXWD_INFO0_MULTIPORT_ID GENMASK(6, 4)\n\n \n#define RTW89_TXWD_INFO1_DATA_RTY_LOWEST_RATE GENMASK(24, 16)\n#define RTW89_TXWD_INFO1_A_CTRL_BSR BIT(14)\n#define RTW89_TXWD_INFO1_MAX_AGGNUM GENMASK(7, 0)\n\n \n#define RTW89_TXWD_INFO2_AMPDU_DENSITY GENMASK(20, 18)\n#define RTW89_TXWD_INFO2_SEC_TYPE GENMASK(12, 9)\n#define RTW89_TXWD_INFO2_SEC_HW_ENC BIT(8)\n#define RTW89_TXWD_INFO2_FORCE_KEY_EN BIT(8)\n#define RTW89_TXWD_INFO2_SEC_CAM_IDX GENMASK(7, 0)\n\n \n\n \n#define RTW89_TXWD_INFO4_RTS_EN BIT(27)\n#define RTW89_TXWD_INFO4_HW_RTS_EN BIT(31)\n\n \n\n \n#define AX_RXD_RPKT_LEN_MASK GENMASK(13, 0)\n#define AX_RXD_SHIFT_MASK GENMASK(15, 14)\n#define AX_RXD_WL_HD_IV_LEN_MASK GENMASK(21, 16)\n#define AX_RXD_BB_SEL BIT(22)\n#define AX_RXD_MAC_INFO_VLD BIT(23)\n#define AX_RXD_RPKT_TYPE_MASK GENMASK(27, 24)\n#define AX_RXD_DRV_INFO_SIZE_MASK GENMASK(30, 28)\n#define AX_RXD_LONG_RXD BIT(31)\n\n \n#define AX_RXD_PPDU_TYPE_MASK GENMASK(3, 0)\n#define AX_RXD_PPDU_CNT_MASK GENMASK(6, 4)\n#define AX_RXD_SR_EN BIT(7)\n#define AX_RXD_USER_ID_MASK GENMASK(15, 8)\n#define AX_RXD_USER_ID_v1_MASK GENMASK(13, 8)\n#define AX_RXD_RX_DATARATE_MASK GENMASK(24, 16)\n#define AX_RXD_RX_GI_LTF_MASK GENMASK(27, 25)\n#define AX_RXD_NON_SRG_PPDU BIT(28)\n#define AX_RXD_INTER_PPDU BIT(29)\n#define AX_RXD_NON_SRG_PPDU_v1 BIT(14)\n#define AX_RXD_INTER_PPDU_v1 BIT(15)\n#define AX_RXD_BW_MASK GENMASK(31, 30)\n#define AX_RXD_BW_v1_MASK GENMASK(31, 29)\n\n \n#define AX_RXD_FREERUN_CNT_MASK GENMASK(31, 0)\n\n \n#define AX_RXD_A1_MATCH BIT(0)\n#define AX_RXD_SW_DEC BIT(1)\n#define AX_RXD_HW_DEC BIT(2)\n#define AX_RXD_AMPDU BIT(3)\n#define AX_RXD_AMPDU_END_PKT BIT(4)\n#define AX_RXD_AMSDU BIT(5)\n#define AX_RXD_AMSDU_CUT BIT(6)\n#define AX_RXD_LAST_MSDU BIT(7)\n#define AX_RXD_BYPASS BIT(8)\n#define AX_RXD_CRC32_ERR BIT(9)\n#define AX_RXD_ICV_ERR BIT(10)\n#define AX_RXD_MAGIC_WAKE BIT(11)\n#define AX_RXD_UNICAST_WAKE BIT(12)\n#define AX_RXD_PATTERN_WAKE BIT(13)\n#define AX_RXD_GET_CH_INFO_MASK GENMASK(15, 14)\n#define AX_RXD_PATTERN_IDX_MASK GENMASK(20, 16)\n#define AX_RXD_TARGET_IDC_MASK GENMASK(23, 21)\n#define AX_RXD_CHKSUM_OFFLOAD_EN BIT(24)\n#define AX_RXD_WITH_LLC BIT(25)\n#define AX_RXD_RX_STATISTICS BIT(26)\n\n \n#define AX_RXD_TYPE_MASK GENMASK(1, 0)\n#define AX_RXD_MC BIT(2)\n#define AX_RXD_BC BIT(3)\n#define AX_RXD_MD BIT(4)\n#define AX_RXD_MF BIT(5)\n#define AX_RXD_PWR BIT(6)\n#define AX_RXD_QOS BIT(7)\n#define AX_RXD_TID_MASK GENMASK(11, 8)\n#define AX_RXD_EOSP BIT(12)\n#define AX_RXD_HTC BIT(13)\n#define AX_RXD_QNULL BIT(14)\n#define AX_RXD_SEQ_MASK GENMASK(27, 16)\n#define AX_RXD_FRAG_MASK GENMASK(31, 28)\n\n \n#define AX_RXD_SEC_CAM_IDX_MASK GENMASK(7, 0)\n#define AX_RXD_ADDR_CAM_MASK GENMASK(15, 8)\n#define AX_RXD_MAC_ID_MASK GENMASK(23, 16)\n#define AX_RXD_RX_PL_ID_MASK GENMASK(27, 24)\n#define AX_RXD_ADDR_CAM_VLD BIT(28)\n#define AX_RXD_ADDR_FWD_EN BIT(29)\n#define AX_RXD_RX_PL_MATCH BIT(30)\n\n \n#define AX_RXD_MAC_ADDR_MASK GENMASK(31, 0)\n\n \n#define AX_RXD_MAC_ADDR_H_MASK GENMASK(15, 0)\n#define AX_RXD_SMART_ANT BIT(16)\n#define AX_RXD_SEC_TYPE_MASK GENMASK(20, 17)\n#define AX_RXD_HDR_CNV BIT(21)\n#define AX_RXD_HDR_OFFSET_MASK GENMASK(26, 22)\n#define AX_RXD_BIP_KEYID BIT(27)\n#define AX_RXD_BIP_ENC BIT(28)\n\nstruct rtw89_rxinfo_user {\n\t__le32 w0;\n};\n\n#define RTW89_RXINFO_USER_MAC_ID_VALID BIT(0)\n#define RTW89_RXINFO_USER_DATA BIT(1)\n#define RTW89_RXINFO_USER_CTRL BIT(2)\n#define RTW89_RXINFO_USER_MGMT BIT(3)\n#define RTW89_RXINFO_USER_BCM BIT(4)\n#define RTW89_RXINFO_USER_MACID GENMASK(15, 8)\n\nstruct rtw89_rxinfo {\n\t__le32 w0;\n\t__le32 w1;\n\tstruct rtw89_rxinfo_user user[];\n} __packed;\n\n#define RTW89_RXINFO_W0_USR_NUM GENMASK(3, 0)\n#define RTW89_RXINFO_W0_FW_DEFINE GENMASK(15, 8)\n#define RTW89_RXINFO_W0_LSIG_LEN GENMASK(27, 16)\n#define RTW89_RXINFO_W0_IS_TO_SELF BIT(28)\n#define RTW89_RXINFO_W0_RX_CNT_VLD BIT(29)\n#define RTW89_RXINFO_W0_LONG_RXD GENMASK(31, 30)\n#define RTW89_RXINFO_W1_SERVICE GENMASK(15, 0)\n#define RTW89_RXINFO_W1_PLCP_LEN GENMASK(23, 16)\n\nstruct rtw89_phy_sts_hdr {\n\t__le32 w0;\n\t__le32 w1;\n} __packed;\n\n#define RTW89_PHY_STS_HDR_W0_IE_MAP GENMASK(4, 0)\n#define RTW89_PHY_STS_HDR_W0_LEN GENMASK(15, 8)\n#define RTW89_PHY_STS_HDR_W0_RSSI_AVG GENMASK(31, 24)\n#define RTW89_PHY_STS_HDR_W1_RSSI_A GENMASK(7, 0)\n#define RTW89_PHY_STS_HDR_W1_RSSI_B GENMASK(15, 8)\n#define RTW89_PHY_STS_HDR_W1_RSSI_C GENMASK(23, 16)\n#define RTW89_PHY_STS_HDR_W1_RSSI_D GENMASK(31, 24)\n\nstruct rtw89_phy_sts_iehdr {\n\t__le32 w0;\n};\n\n#define RTW89_PHY_STS_IEHDR_TYPE GENMASK(4, 0)\n#define RTW89_PHY_STS_IEHDR_LEN GENMASK(11, 5)\n\nstruct rtw89_phy_sts_ie0 {\n\t__le32 w0;\n\t__le32 w1;\n\t__le32 w2;\n} __packed;\n\n#define RTW89_PHY_STS_IE01_W0_CH_IDX GENMASK(23, 16)\n#define RTW89_PHY_STS_IE01_W1_FD_CFO GENMASK(19, 8)\n#define RTW89_PHY_STS_IE01_W1_PREMB_CFO GENMASK(31, 20)\n#define RTW89_PHY_STS_IE01_W2_AVG_SNR GENMASK(5, 0)\n#define RTW89_PHY_STS_IE01_W2_EVM_MAX GENMASK(15, 8)\n#define RTW89_PHY_STS_IE01_W2_EVM_MIN GENMASK(23, 16)\n\nenum rtw89_tx_channel {\n\tRTW89_TXCH_ACH0\t= 0,\n\tRTW89_TXCH_ACH1\t= 1,\n\tRTW89_TXCH_ACH2\t= 2,\n\tRTW89_TXCH_ACH3\t= 3,\n\tRTW89_TXCH_ACH4\t= 4,\n\tRTW89_TXCH_ACH5\t= 5,\n\tRTW89_TXCH_ACH6\t= 6,\n\tRTW89_TXCH_ACH7\t= 7,\n\tRTW89_TXCH_CH8\t= 8,   \n\tRTW89_TXCH_CH9\t= 9,   \n\tRTW89_TXCH_CH10\t= 10,  \n\tRTW89_TXCH_CH11\t= 11,  \n\tRTW89_TXCH_CH12\t= 12,  \n\n\t \n\tRTW89_TXCH_NUM,\n\tRTW89_TXCH_MAX = RTW89_TXCH_NUM - 1\n};\n\nenum rtw89_rx_channel {\n\tRTW89_RXCH_RXQ\t= 0,\n\tRTW89_RXCH_RPQ\t= 1,\n\n\t \n\tRTW89_RXCH_NUM,\n\tRTW89_RXCH_MAX = RTW89_RXCH_NUM - 1\n};\n\nenum rtw89_tx_qsel {\n\tRTW89_TX_QSEL_BE_0\t\t= 0x00,\n\tRTW89_TX_QSEL_BK_0\t\t= 0x01,\n\tRTW89_TX_QSEL_VI_0\t\t= 0x02,\n\tRTW89_TX_QSEL_VO_0\t\t= 0x03,\n\tRTW89_TX_QSEL_BE_1\t\t= 0x04,\n\tRTW89_TX_QSEL_BK_1\t\t= 0x05,\n\tRTW89_TX_QSEL_VI_1\t\t= 0x06,\n\tRTW89_TX_QSEL_VO_1\t\t= 0x07,\n\tRTW89_TX_QSEL_BE_2\t\t= 0x08,\n\tRTW89_TX_QSEL_BK_2\t\t= 0x09,\n\tRTW89_TX_QSEL_VI_2\t\t= 0x0a,\n\tRTW89_TX_QSEL_VO_2\t\t= 0x0b,\n\tRTW89_TX_QSEL_BE_3\t\t= 0x0c,\n\tRTW89_TX_QSEL_BK_3\t\t= 0x0d,\n\tRTW89_TX_QSEL_VI_3\t\t= 0x0e,\n\tRTW89_TX_QSEL_VO_3\t\t= 0x0f,\n\tRTW89_TX_QSEL_B0_BCN\t\t= 0x10,\n\tRTW89_TX_QSEL_B0_HI\t\t= 0x11,\n\tRTW89_TX_QSEL_B0_MGMT\t\t= 0x12,\n\tRTW89_TX_QSEL_B0_NOPS\t\t= 0x13,\n\tRTW89_TX_QSEL_B0_MGMT_FAST\t= 0x14,\n\t \n\t \n\t \n\tRTW89_TX_QSEL_B1_BCN\t\t= 0x18,\n\tRTW89_TX_QSEL_B1_HI\t\t= 0x19,\n\tRTW89_TX_QSEL_B1_MGMT\t\t= 0x1a,\n\tRTW89_TX_QSEL_B1_NOPS\t\t= 0x1b,\n\tRTW89_TX_QSEL_B1_MGMT_FAST\t= 0x1c,\n\t \n\t \n\t \n};\n\nstatic inline u8 rtw89_core_get_qsel(struct rtw89_dev *rtwdev, u8 tid)\n{\n\tswitch (tid) {\n\tdefault:\n\t\trtw89_warn(rtwdev, \"Should use tag 1d: %d\\n\", tid);\n\t\tfallthrough;\n\tcase 0:\n\tcase 3:\n\t\treturn RTW89_TX_QSEL_BE_0;\n\tcase 1:\n\tcase 2:\n\t\treturn RTW89_TX_QSEL_BK_0;\n\tcase 4:\n\tcase 5:\n\t\treturn RTW89_TX_QSEL_VI_0;\n\tcase 6:\n\tcase 7:\n\t\treturn RTW89_TX_QSEL_VO_0;\n\t}\n}\n\nstatic inline u8 rtw89_core_get_ch_dma(struct rtw89_dev *rtwdev, u8 qsel)\n{\n\tswitch (qsel) {\n\tdefault:\n\t\trtw89_warn(rtwdev, \"Cannot map qsel to dma: %d\\n\", qsel);\n\t\tfallthrough;\n\tcase RTW89_TX_QSEL_BE_0:\n\t\treturn RTW89_TXCH_ACH0;\n\tcase RTW89_TX_QSEL_BK_0:\n\t\treturn RTW89_TXCH_ACH1;\n\tcase RTW89_TX_QSEL_VI_0:\n\t\treturn RTW89_TXCH_ACH2;\n\tcase RTW89_TX_QSEL_VO_0:\n\t\treturn RTW89_TXCH_ACH3;\n\tcase RTW89_TX_QSEL_B0_MGMT:\n\t\treturn RTW89_TXCH_CH8;\n\tcase RTW89_TX_QSEL_B0_HI:\n\t\treturn RTW89_TXCH_CH9;\n\tcase RTW89_TX_QSEL_B1_MGMT:\n\t\treturn RTW89_TXCH_CH10;\n\tcase RTW89_TX_QSEL_B1_HI:\n\t\treturn RTW89_TXCH_CH11;\n\t}\n}\n\nstatic inline u8 rtw89_core_get_tid_indicate(struct rtw89_dev *rtwdev, u8 tid)\n{\n\tswitch (tid) {\n\tcase 3:\n\tcase 2:\n\tcase 5:\n\tcase 7:\n\t\treturn 1;\n\tdefault:\n\t\trtw89_warn(rtwdev, \"Should use tag 1d: %d\\n\", tid);\n\t\tfallthrough;\n\tcase 0:\n\tcase 1:\n\tcase 4:\n\tcase 6:\n\t\treturn 0;\n\t}\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}