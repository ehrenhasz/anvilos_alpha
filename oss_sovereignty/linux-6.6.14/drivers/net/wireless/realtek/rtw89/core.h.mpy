{
  "module_name": "core.h",
  "hash_id": "e1b9a80b4eb0f6ba7dd9c44417823d27e33eb721f8ce33783d6d216c05895cec",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/core.h",
  "human_readable_source": " \n \n\n#ifndef __RTW89_CORE_H__\n#define __RTW89_CORE_H__\n\n#include <linux/average.h>\n#include <linux/bitfield.h>\n#include <linux/firmware.h>\n#include <linux/iopoll.h>\n#include <linux/workqueue.h>\n#include <net/mac80211.h>\n\nstruct rtw89_dev;\nstruct rtw89_pci_info;\nstruct rtw89_mac_gen_def;\nstruct rtw89_phy_gen_def;\n\nextern const struct ieee80211_ops rtw89_ops;\n\n#define MASKBYTE0 0xff\n#define MASKBYTE1 0xff00\n#define MASKBYTE2 0xff0000\n#define MASKBYTE3 0xff000000\n#define MASKBYTE4 0xff00000000ULL\n#define MASKHWORD 0xffff0000\n#define MASKLWORD 0x0000ffff\n#define MASKDWORD 0xffffffff\n#define RFREG_MASK 0xfffff\n#define INV_RF_DATA 0xffffffff\n\n#define RTW89_TRACK_WORK_PERIOD\tround_jiffies_relative(HZ * 2)\n#define RTW89_FORBID_BA_TIMER round_jiffies_relative(HZ * 4)\n#define CFO_TRACK_MAX_USER 64\n#define MAX_RSSI 110\n#define RSSI_FACTOR 1\n#define RTW89_RSSI_RAW_TO_DBM(rssi) ((s8)((rssi) >> RSSI_FACTOR) - MAX_RSSI)\n#define RTW89_TX_DIV_RSSI_RAW_TH (2 << RSSI_FACTOR)\n#define RTW89_RADIOTAP_ROOM ALIGN(sizeof(struct ieee80211_radiotap_he), 64)\n\n#define RTW89_HTC_MASK_VARIANT GENMASK(1, 0)\n#define RTW89_HTC_VARIANT_HE 3\n#define RTW89_HTC_MASK_CTL_ID GENMASK(5, 2)\n#define RTW89_HTC_VARIANT_HE_CID_OM 1\n#define RTW89_HTC_VARIANT_HE_CID_CAS 6\n#define RTW89_HTC_MASK_CTL_INFO GENMASK(31, 6)\n\n#define RTW89_HTC_MASK_HTC_OM_RX_NSS GENMASK(8, 6)\nenum htc_om_channel_width {\n\tHTC_OM_CHANNEL_WIDTH_20 = 0,\n\tHTC_OM_CHANNEL_WIDTH_40 = 1,\n\tHTC_OM_CHANNEL_WIDTH_80 = 2,\n\tHTC_OM_CHANNEL_WIDTH_160_OR_80_80 = 3,\n};\n#define RTW89_HTC_MASK_HTC_OM_CH_WIDTH GENMASK(10, 9)\n#define RTW89_HTC_MASK_HTC_OM_UL_MU_DIS BIT(11)\n#define RTW89_HTC_MASK_HTC_OM_TX_NSTS GENMASK(14, 12)\n#define RTW89_HTC_MASK_HTC_OM_ER_SU_DIS BIT(15)\n#define RTW89_HTC_MASK_HTC_OM_DL_MU_MIMO_RR BIT(16)\n#define RTW89_HTC_MASK_HTC_OM_UL_MU_DATA_DIS BIT(17)\n\n#define RTW89_TF_PAD GENMASK(11, 0)\n#define RTW89_TF_BASIC_USER_INFO_SZ 6\n\n#define RTW89_GET_TF_USER_INFO_AID12(data)\t\\\n\tle32_get_bits(*((const __le32 *)(data)), GENMASK(11, 0))\n#define RTW89_GET_TF_USER_INFO_RUA(data)\t\\\n\tle32_get_bits(*((const __le32 *)(data)), GENMASK(19, 12))\n#define RTW89_GET_TF_USER_INFO_UL_MCS(data)\t\\\n\tle32_get_bits(*((const __le32 *)(data)), GENMASK(24, 21))\n\nenum rtw89_subband {\n\tRTW89_CH_2G = 0,\n\tRTW89_CH_5G_BAND_1 = 1,\n\t \n\tRTW89_CH_5G_BAND_3 = 3,\n\tRTW89_CH_5G_BAND_4 = 4,\n\n\tRTW89_CH_6G_BAND_IDX0,  \n\tRTW89_CH_6G_BAND_IDX1,  \n\tRTW89_CH_6G_BAND_IDX2,  \n\tRTW89_CH_6G_BAND_IDX3,  \n\tRTW89_CH_6G_BAND_IDX4,  \n\tRTW89_CH_6G_BAND_IDX5,  \n\tRTW89_CH_6G_BAND_IDX6,  \n\tRTW89_CH_6G_BAND_IDX7,  \n\n\tRTW89_SUBBAND_NR,\n\tRTW89_SUBBAND_2GHZ_5GHZ_NR = RTW89_CH_5G_BAND_4 + 1,\n};\n\nenum rtw89_gain_offset {\n\tRTW89_GAIN_OFFSET_2G_CCK,\n\tRTW89_GAIN_OFFSET_2G_OFDM,\n\tRTW89_GAIN_OFFSET_5G_LOW,\n\tRTW89_GAIN_OFFSET_5G_MID,\n\tRTW89_GAIN_OFFSET_5G_HIGH,\n\n\tRTW89_GAIN_OFFSET_NR,\n};\n\nenum rtw89_hci_type {\n\tRTW89_HCI_TYPE_PCIE,\n\tRTW89_HCI_TYPE_USB,\n\tRTW89_HCI_TYPE_SDIO,\n};\n\nenum rtw89_core_chip_id {\n\tRTL8852A,\n\tRTL8852B,\n\tRTL8852C,\n\tRTL8851B,\n\tRTL8922A,\n};\n\nenum rtw89_chip_gen {\n\tRTW89_CHIP_AX,\n\tRTW89_CHIP_BE,\n\n\tRTW89_CHIP_GEN_NUM,\n};\n\nenum rtw89_cv {\n\tCHIP_CAV,\n\tCHIP_CBV,\n\tCHIP_CCV,\n\tCHIP_CDV,\n\tCHIP_CEV,\n\tCHIP_CFV,\n\tCHIP_CV_MAX,\n\tCHIP_CV_INVALID = CHIP_CV_MAX,\n};\n\nenum rtw89_bacam_ver {\n\tRTW89_BACAM_V0,\n\tRTW89_BACAM_V1,\n\n\tRTW89_BACAM_V0_EXT = 99,\n};\n\nenum rtw89_core_tx_type {\n\tRTW89_CORE_TX_TYPE_DATA,\n\tRTW89_CORE_TX_TYPE_MGMT,\n\tRTW89_CORE_TX_TYPE_FWCMD,\n};\n\nenum rtw89_core_rx_type {\n\tRTW89_CORE_RX_TYPE_WIFI\t\t= 0,\n\tRTW89_CORE_RX_TYPE_PPDU_STAT\t= 1,\n\tRTW89_CORE_RX_TYPE_CHAN_INFO\t= 2,\n\tRTW89_CORE_RX_TYPE_BB_SCOPE\t= 3,\n\tRTW89_CORE_RX_TYPE_F2P_TXCMD\t= 4,\n\tRTW89_CORE_RX_TYPE_SS2FW\t= 5,\n\tRTW89_CORE_RX_TYPE_TX_REPORT\t= 6,\n\tRTW89_CORE_RX_TYPE_TX_REL_HOST\t= 7,\n\tRTW89_CORE_RX_TYPE_DFS_REPORT\t= 8,\n\tRTW89_CORE_RX_TYPE_TX_REL_CPU\t= 9,\n\tRTW89_CORE_RX_TYPE_C2H\t\t= 10,\n\tRTW89_CORE_RX_TYPE_CSI\t\t= 11,\n\tRTW89_CORE_RX_TYPE_CQI\t\t= 12,\n\tRTW89_CORE_RX_TYPE_H2C\t\t= 13,\n\tRTW89_CORE_RX_TYPE_FWDL\t\t= 14,\n};\n\nenum rtw89_txq_flags {\n\tRTW89_TXQ_F_AMPDU\t\t= 0,\n\tRTW89_TXQ_F_BLOCK_BA\t\t= 1,\n\tRTW89_TXQ_F_FORBID_BA\t\t= 2,\n};\n\nenum rtw89_net_type {\n\tRTW89_NET_TYPE_NO_LINK\t\t= 0,\n\tRTW89_NET_TYPE_AD_HOC\t\t= 1,\n\tRTW89_NET_TYPE_INFRA\t\t= 2,\n\tRTW89_NET_TYPE_AP_MODE\t\t= 3,\n};\n\nenum rtw89_wifi_role {\n\tRTW89_WIFI_ROLE_NONE,\n\tRTW89_WIFI_ROLE_STATION,\n\tRTW89_WIFI_ROLE_AP,\n\tRTW89_WIFI_ROLE_AP_VLAN,\n\tRTW89_WIFI_ROLE_ADHOC,\n\tRTW89_WIFI_ROLE_ADHOC_MASTER,\n\tRTW89_WIFI_ROLE_MESH_POINT,\n\tRTW89_WIFI_ROLE_MONITOR,\n\tRTW89_WIFI_ROLE_P2P_DEVICE,\n\tRTW89_WIFI_ROLE_P2P_CLIENT,\n\tRTW89_WIFI_ROLE_P2P_GO,\n\tRTW89_WIFI_ROLE_NAN,\n\tRTW89_WIFI_ROLE_MLME_MAX\n};\n\nenum rtw89_upd_mode {\n\tRTW89_ROLE_CREATE,\n\tRTW89_ROLE_REMOVE,\n\tRTW89_ROLE_TYPE_CHANGE,\n\tRTW89_ROLE_INFO_CHANGE,\n\tRTW89_ROLE_CON_DISCONN,\n\tRTW89_ROLE_BAND_SW,\n\tRTW89_ROLE_FW_RESTORE,\n};\n\nenum rtw89_self_role {\n\tRTW89_SELF_ROLE_CLIENT,\n\tRTW89_SELF_ROLE_AP,\n\tRTW89_SELF_ROLE_AP_CLIENT\n};\n\nenum rtw89_msk_sO_el {\n\tRTW89_NO_MSK,\n\tRTW89_SMA,\n\tRTW89_TMA,\n\tRTW89_BSSID\n};\n\nenum rtw89_sch_tx_sel {\n\tRTW89_SCH_TX_SEL_ALL,\n\tRTW89_SCH_TX_SEL_HIQ,\n\tRTW89_SCH_TX_SEL_MG0,\n\tRTW89_SCH_TX_SEL_MACID,\n};\n\n \nenum rtw89_add_cam_sec_mode {\n\tRTW89_ADDR_CAM_SEC_NONE\t\t= 0,\n\tRTW89_ADDR_CAM_SEC_ALL_UNI\t= 1,\n\tRTW89_ADDR_CAM_SEC_NORMAL\t= 2,\n\tRTW89_ADDR_CAM_SEC_4GROUP\t= 3,\n};\n\nenum rtw89_sec_key_type {\n\tRTW89_SEC_KEY_TYPE_NONE\t\t= 0,\n\tRTW89_SEC_KEY_TYPE_WEP40\t= 1,\n\tRTW89_SEC_KEY_TYPE_WEP104\t= 2,\n\tRTW89_SEC_KEY_TYPE_TKIP\t\t= 3,\n\tRTW89_SEC_KEY_TYPE_WAPI\t\t= 4,\n\tRTW89_SEC_KEY_TYPE_GCMSMS4\t= 5,\n\tRTW89_SEC_KEY_TYPE_CCMP128\t= 6,\n\tRTW89_SEC_KEY_TYPE_CCMP256\t= 7,\n\tRTW89_SEC_KEY_TYPE_GCMP128\t= 8,\n\tRTW89_SEC_KEY_TYPE_GCMP256\t= 9,\n\tRTW89_SEC_KEY_TYPE_BIP_CCMP128\t= 10,\n};\n\nenum rtw89_port {\n\tRTW89_PORT_0 = 0,\n\tRTW89_PORT_1 = 1,\n\tRTW89_PORT_2 = 2,\n\tRTW89_PORT_3 = 3,\n\tRTW89_PORT_4 = 4,\n\tRTW89_PORT_NUM\n};\n\nenum rtw89_band {\n\tRTW89_BAND_2G = 0,\n\tRTW89_BAND_5G = 1,\n\tRTW89_BAND_6G = 2,\n\tRTW89_BAND_NUM,\n};\n\nenum rtw89_hw_rate {\n\tRTW89_HW_RATE_CCK1\t= 0x0,\n\tRTW89_HW_RATE_CCK2\t= 0x1,\n\tRTW89_HW_RATE_CCK5_5\t= 0x2,\n\tRTW89_HW_RATE_CCK11\t= 0x3,\n\tRTW89_HW_RATE_OFDM6\t= 0x4,\n\tRTW89_HW_RATE_OFDM9\t= 0x5,\n\tRTW89_HW_RATE_OFDM12\t= 0x6,\n\tRTW89_HW_RATE_OFDM18\t= 0x7,\n\tRTW89_HW_RATE_OFDM24\t= 0x8,\n\tRTW89_HW_RATE_OFDM36\t= 0x9,\n\tRTW89_HW_RATE_OFDM48\t= 0xA,\n\tRTW89_HW_RATE_OFDM54\t= 0xB,\n\tRTW89_HW_RATE_MCS0\t= 0x80,\n\tRTW89_HW_RATE_MCS1\t= 0x81,\n\tRTW89_HW_RATE_MCS2\t= 0x82,\n\tRTW89_HW_RATE_MCS3\t= 0x83,\n\tRTW89_HW_RATE_MCS4\t= 0x84,\n\tRTW89_HW_RATE_MCS5\t= 0x85,\n\tRTW89_HW_RATE_MCS6\t= 0x86,\n\tRTW89_HW_RATE_MCS7\t= 0x87,\n\tRTW89_HW_RATE_MCS8\t= 0x88,\n\tRTW89_HW_RATE_MCS9\t= 0x89,\n\tRTW89_HW_RATE_MCS10\t= 0x8A,\n\tRTW89_HW_RATE_MCS11\t= 0x8B,\n\tRTW89_HW_RATE_MCS12\t= 0x8C,\n\tRTW89_HW_RATE_MCS13\t= 0x8D,\n\tRTW89_HW_RATE_MCS14\t= 0x8E,\n\tRTW89_HW_RATE_MCS15\t= 0x8F,\n\tRTW89_HW_RATE_MCS16\t= 0x90,\n\tRTW89_HW_RATE_MCS17\t= 0x91,\n\tRTW89_HW_RATE_MCS18\t= 0x92,\n\tRTW89_HW_RATE_MCS19\t= 0x93,\n\tRTW89_HW_RATE_MCS20\t= 0x94,\n\tRTW89_HW_RATE_MCS21\t= 0x95,\n\tRTW89_HW_RATE_MCS22\t= 0x96,\n\tRTW89_HW_RATE_MCS23\t= 0x97,\n\tRTW89_HW_RATE_MCS24\t= 0x98,\n\tRTW89_HW_RATE_MCS25\t= 0x99,\n\tRTW89_HW_RATE_MCS26\t= 0x9A,\n\tRTW89_HW_RATE_MCS27\t= 0x9B,\n\tRTW89_HW_RATE_MCS28\t= 0x9C,\n\tRTW89_HW_RATE_MCS29\t= 0x9D,\n\tRTW89_HW_RATE_MCS30\t= 0x9E,\n\tRTW89_HW_RATE_MCS31\t= 0x9F,\n\tRTW89_HW_RATE_VHT_NSS1_MCS0\t= 0x100,\n\tRTW89_HW_RATE_VHT_NSS1_MCS1\t= 0x101,\n\tRTW89_HW_RATE_VHT_NSS1_MCS2\t= 0x102,\n\tRTW89_HW_RATE_VHT_NSS1_MCS3\t= 0x103,\n\tRTW89_HW_RATE_VHT_NSS1_MCS4\t= 0x104,\n\tRTW89_HW_RATE_VHT_NSS1_MCS5\t= 0x105,\n\tRTW89_HW_RATE_VHT_NSS1_MCS6\t= 0x106,\n\tRTW89_HW_RATE_VHT_NSS1_MCS7\t= 0x107,\n\tRTW89_HW_RATE_VHT_NSS1_MCS8\t= 0x108,\n\tRTW89_HW_RATE_VHT_NSS1_MCS9\t= 0x109,\n\tRTW89_HW_RATE_VHT_NSS2_MCS0\t= 0x110,\n\tRTW89_HW_RATE_VHT_NSS2_MCS1\t= 0x111,\n\tRTW89_HW_RATE_VHT_NSS2_MCS2\t= 0x112,\n\tRTW89_HW_RATE_VHT_NSS2_MCS3\t= 0x113,\n\tRTW89_HW_RATE_VHT_NSS2_MCS4\t= 0x114,\n\tRTW89_HW_RATE_VHT_NSS2_MCS5\t= 0x115,\n\tRTW89_HW_RATE_VHT_NSS2_MCS6\t= 0x116,\n\tRTW89_HW_RATE_VHT_NSS2_MCS7\t= 0x117,\n\tRTW89_HW_RATE_VHT_NSS2_MCS8\t= 0x118,\n\tRTW89_HW_RATE_VHT_NSS2_MCS9\t= 0x119,\n\tRTW89_HW_RATE_VHT_NSS3_MCS0\t= 0x120,\n\tRTW89_HW_RATE_VHT_NSS3_MCS1\t= 0x121,\n\tRTW89_HW_RATE_VHT_NSS3_MCS2\t= 0x122,\n\tRTW89_HW_RATE_VHT_NSS3_MCS3\t= 0x123,\n\tRTW89_HW_RATE_VHT_NSS3_MCS4\t= 0x124,\n\tRTW89_HW_RATE_VHT_NSS3_MCS5\t= 0x125,\n\tRTW89_HW_RATE_VHT_NSS3_MCS6\t= 0x126,\n\tRTW89_HW_RATE_VHT_NSS3_MCS7\t= 0x127,\n\tRTW89_HW_RATE_VHT_NSS3_MCS8\t= 0x128,\n\tRTW89_HW_RATE_VHT_NSS3_MCS9\t= 0x129,\n\tRTW89_HW_RATE_VHT_NSS4_MCS0\t= 0x130,\n\tRTW89_HW_RATE_VHT_NSS4_MCS1\t= 0x131,\n\tRTW89_HW_RATE_VHT_NSS4_MCS2\t= 0x132,\n\tRTW89_HW_RATE_VHT_NSS4_MCS3\t= 0x133,\n\tRTW89_HW_RATE_VHT_NSS4_MCS4\t= 0x134,\n\tRTW89_HW_RATE_VHT_NSS4_MCS5\t= 0x135,\n\tRTW89_HW_RATE_VHT_NSS4_MCS6\t= 0x136,\n\tRTW89_HW_RATE_VHT_NSS4_MCS7\t= 0x137,\n\tRTW89_HW_RATE_VHT_NSS4_MCS8\t= 0x138,\n\tRTW89_HW_RATE_VHT_NSS4_MCS9\t= 0x139,\n\tRTW89_HW_RATE_HE_NSS1_MCS0\t= 0x180,\n\tRTW89_HW_RATE_HE_NSS1_MCS1\t= 0x181,\n\tRTW89_HW_RATE_HE_NSS1_MCS2\t= 0x182,\n\tRTW89_HW_RATE_HE_NSS1_MCS3\t= 0x183,\n\tRTW89_HW_RATE_HE_NSS1_MCS4\t= 0x184,\n\tRTW89_HW_RATE_HE_NSS1_MCS5\t= 0x185,\n\tRTW89_HW_RATE_HE_NSS1_MCS6\t= 0x186,\n\tRTW89_HW_RATE_HE_NSS1_MCS7\t= 0x187,\n\tRTW89_HW_RATE_HE_NSS1_MCS8\t= 0x188,\n\tRTW89_HW_RATE_HE_NSS1_MCS9\t= 0x189,\n\tRTW89_HW_RATE_HE_NSS1_MCS10\t= 0x18A,\n\tRTW89_HW_RATE_HE_NSS1_MCS11\t= 0x18B,\n\tRTW89_HW_RATE_HE_NSS2_MCS0\t= 0x190,\n\tRTW89_HW_RATE_HE_NSS2_MCS1\t= 0x191,\n\tRTW89_HW_RATE_HE_NSS2_MCS2\t= 0x192,\n\tRTW89_HW_RATE_HE_NSS2_MCS3\t= 0x193,\n\tRTW89_HW_RATE_HE_NSS2_MCS4\t= 0x194,\n\tRTW89_HW_RATE_HE_NSS2_MCS5\t= 0x195,\n\tRTW89_HW_RATE_HE_NSS2_MCS6\t= 0x196,\n\tRTW89_HW_RATE_HE_NSS2_MCS7\t= 0x197,\n\tRTW89_HW_RATE_HE_NSS2_MCS8\t= 0x198,\n\tRTW89_HW_RATE_HE_NSS2_MCS9\t= 0x199,\n\tRTW89_HW_RATE_HE_NSS2_MCS10\t= 0x19A,\n\tRTW89_HW_RATE_HE_NSS2_MCS11\t= 0x19B,\n\tRTW89_HW_RATE_HE_NSS3_MCS0\t= 0x1A0,\n\tRTW89_HW_RATE_HE_NSS3_MCS1\t= 0x1A1,\n\tRTW89_HW_RATE_HE_NSS3_MCS2\t= 0x1A2,\n\tRTW89_HW_RATE_HE_NSS3_MCS3\t= 0x1A3,\n\tRTW89_HW_RATE_HE_NSS3_MCS4\t= 0x1A4,\n\tRTW89_HW_RATE_HE_NSS3_MCS5\t= 0x1A5,\n\tRTW89_HW_RATE_HE_NSS3_MCS6\t= 0x1A6,\n\tRTW89_HW_RATE_HE_NSS3_MCS7\t= 0x1A7,\n\tRTW89_HW_RATE_HE_NSS3_MCS8\t= 0x1A8,\n\tRTW89_HW_RATE_HE_NSS3_MCS9\t= 0x1A9,\n\tRTW89_HW_RATE_HE_NSS3_MCS10\t= 0x1AA,\n\tRTW89_HW_RATE_HE_NSS3_MCS11\t= 0x1AB,\n\tRTW89_HW_RATE_HE_NSS4_MCS0\t= 0x1B0,\n\tRTW89_HW_RATE_HE_NSS4_MCS1\t= 0x1B1,\n\tRTW89_HW_RATE_HE_NSS4_MCS2\t= 0x1B2,\n\tRTW89_HW_RATE_HE_NSS4_MCS3\t= 0x1B3,\n\tRTW89_HW_RATE_HE_NSS4_MCS4\t= 0x1B4,\n\tRTW89_HW_RATE_HE_NSS4_MCS5\t= 0x1B5,\n\tRTW89_HW_RATE_HE_NSS4_MCS6\t= 0x1B6,\n\tRTW89_HW_RATE_HE_NSS4_MCS7\t= 0x1B7,\n\tRTW89_HW_RATE_HE_NSS4_MCS8\t= 0x1B8,\n\tRTW89_HW_RATE_HE_NSS4_MCS9\t= 0x1B9,\n\tRTW89_HW_RATE_HE_NSS4_MCS10\t= 0x1BA,\n\tRTW89_HW_RATE_HE_NSS4_MCS11\t= 0x1BB,\n\n\tRTW89_HW_RATE_V1_MCS0\t\t= 0x100,\n\tRTW89_HW_RATE_V1_MCS1\t\t= 0x101,\n\tRTW89_HW_RATE_V1_MCS2\t\t= 0x102,\n\tRTW89_HW_RATE_V1_MCS3\t\t= 0x103,\n\tRTW89_HW_RATE_V1_MCS4\t\t= 0x104,\n\tRTW89_HW_RATE_V1_MCS5\t\t= 0x105,\n\tRTW89_HW_RATE_V1_MCS6\t\t= 0x106,\n\tRTW89_HW_RATE_V1_MCS7\t\t= 0x107,\n\tRTW89_HW_RATE_V1_MCS8\t\t= 0x108,\n\tRTW89_HW_RATE_V1_MCS9\t\t= 0x109,\n\tRTW89_HW_RATE_V1_MCS10\t\t= 0x10A,\n\tRTW89_HW_RATE_V1_MCS11\t\t= 0x10B,\n\tRTW89_HW_RATE_V1_MCS12\t\t= 0x10C,\n\tRTW89_HW_RATE_V1_MCS13\t\t= 0x10D,\n\tRTW89_HW_RATE_V1_MCS14\t\t= 0x10E,\n\tRTW89_HW_RATE_V1_MCS15\t\t= 0x10F,\n\tRTW89_HW_RATE_V1_MCS16\t\t= 0x110,\n\tRTW89_HW_RATE_V1_MCS17\t\t= 0x111,\n\tRTW89_HW_RATE_V1_MCS18\t\t= 0x112,\n\tRTW89_HW_RATE_V1_MCS19\t\t= 0x113,\n\tRTW89_HW_RATE_V1_MCS20\t\t= 0x114,\n\tRTW89_HW_RATE_V1_MCS21\t\t= 0x115,\n\tRTW89_HW_RATE_V1_MCS22\t\t= 0x116,\n\tRTW89_HW_RATE_V1_MCS23\t\t= 0x117,\n\tRTW89_HW_RATE_V1_MCS24\t\t= 0x118,\n\tRTW89_HW_RATE_V1_MCS25\t\t= 0x119,\n\tRTW89_HW_RATE_V1_MCS26\t\t= 0x11A,\n\tRTW89_HW_RATE_V1_MCS27\t\t= 0x11B,\n\tRTW89_HW_RATE_V1_MCS28\t\t= 0x11C,\n\tRTW89_HW_RATE_V1_MCS29\t\t= 0x11D,\n\tRTW89_HW_RATE_V1_MCS30\t\t= 0x11E,\n\tRTW89_HW_RATE_V1_MCS31\t\t= 0x11F,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS0\t= 0x200,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS1\t= 0x201,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS2\t= 0x202,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS3\t= 0x203,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS4\t= 0x204,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS5\t= 0x205,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS6\t= 0x206,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS7\t= 0x207,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS8\t= 0x208,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS9\t= 0x209,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS10\t= 0x20A,\n\tRTW89_HW_RATE_V1_VHT_NSS1_MCS11\t= 0x20B,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS0\t= 0x220,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS1\t= 0x221,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS2\t= 0x222,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS3\t= 0x223,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS4\t= 0x224,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS5\t= 0x225,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS6\t= 0x226,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS7\t= 0x227,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS8\t= 0x228,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS9\t= 0x229,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS10\t= 0x22A,\n\tRTW89_HW_RATE_V1_VHT_NSS2_MCS11\t= 0x22B,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS0\t= 0x240,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS1\t= 0x241,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS2\t= 0x242,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS3\t= 0x243,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS4\t= 0x244,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS5\t= 0x245,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS6\t= 0x246,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS7\t= 0x247,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS8\t= 0x248,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS9\t= 0x249,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS10\t= 0x24A,\n\tRTW89_HW_RATE_V1_VHT_NSS3_MCS11\t= 0x24B,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS0\t= 0x260,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS1\t= 0x261,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS2\t= 0x262,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS3\t= 0x263,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS4\t= 0x264,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS5\t= 0x265,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS6\t= 0x266,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS7\t= 0x267,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS8\t= 0x268,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS9\t= 0x269,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS10\t= 0x26A,\n\tRTW89_HW_RATE_V1_VHT_NSS4_MCS11\t= 0x26B,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS0\t= 0x300,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS1\t= 0x301,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS2\t= 0x302,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS3\t= 0x303,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS4\t= 0x304,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS5\t= 0x305,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS6\t= 0x306,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS7\t= 0x307,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS8\t= 0x308,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS9\t= 0x309,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS10\t= 0x30A,\n\tRTW89_HW_RATE_V1_HE_NSS1_MCS11\t= 0x30B,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS0\t= 0x320,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS1\t= 0x321,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS2\t= 0x322,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS3\t= 0x323,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS4\t= 0x324,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS5\t= 0x325,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS6\t= 0x326,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS7\t= 0x327,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS8\t= 0x328,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS9\t= 0x329,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS10\t= 0x32A,\n\tRTW89_HW_RATE_V1_HE_NSS2_MCS11\t= 0x32B,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS0\t= 0x340,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS1\t= 0x341,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS2\t= 0x342,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS3\t= 0x343,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS4\t= 0x344,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS5\t= 0x345,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS6\t= 0x346,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS7\t= 0x347,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS8\t= 0x348,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS9\t= 0x349,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS10\t= 0x34A,\n\tRTW89_HW_RATE_V1_HE_NSS3_MCS11\t= 0x34B,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS0\t= 0x360,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS1\t= 0x361,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS2\t= 0x362,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS3\t= 0x363,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS4\t= 0x364,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS5\t= 0x365,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS6\t= 0x366,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS7\t= 0x367,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS8\t= 0x368,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS9\t= 0x369,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS10\t= 0x36A,\n\tRTW89_HW_RATE_V1_HE_NSS4_MCS11\t= 0x36B,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS0\t= 0x400,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS1\t= 0x401,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS2\t= 0x402,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS3\t= 0x403,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS4\t= 0x404,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS5\t= 0x405,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS6\t= 0x406,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS7\t= 0x407,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS8\t= 0x408,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS9\t= 0x409,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS10\t= 0x40A,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS11\t= 0x40B,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS12\t= 0x40C,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS13\t= 0x40D,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS14\t= 0x40E,\n\tRTW89_HW_RATE_V1_EHT_NSS1_MCS15\t= 0x40F,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS0\t= 0x420,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS1\t= 0x421,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS2\t= 0x422,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS3\t= 0x423,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS4\t= 0x424,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS5\t= 0x425,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS6\t= 0x426,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS7\t= 0x427,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS8\t= 0x428,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS9\t= 0x429,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS10\t= 0x42A,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS11\t= 0x42B,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS12\t= 0x42C,\n\tRTW89_HW_RATE_V1_EHT_NSS2_MCS13\t= 0x42D,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS0\t= 0x440,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS1\t= 0x441,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS2\t= 0x442,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS3\t= 0x443,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS4\t= 0x444,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS5\t= 0x445,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS6\t= 0x446,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS7\t= 0x447,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS8\t= 0x448,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS9\t= 0x449,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS10\t= 0x44A,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS11\t= 0x44B,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS12\t= 0x44C,\n\tRTW89_HW_RATE_V1_EHT_NSS3_MCS13\t= 0x44D,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS0\t= 0x460,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS1\t= 0x461,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS2\t= 0x462,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS3\t= 0x463,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS4\t= 0x464,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS5\t= 0x465,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS6\t= 0x466,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS7\t= 0x467,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS8\t= 0x468,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS9\t= 0x469,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS10\t= 0x46A,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS11\t= 0x46B,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS12\t= 0x46C,\n\tRTW89_HW_RATE_V1_EHT_NSS4_MCS13\t= 0x46D,\n\n\tRTW89_HW_RATE_NR,\n\tRTW89_HW_RATE_INVAL,\n\n\tRTW89_HW_RATE_MASK_MOD = GENMASK(8, 7),\n\tRTW89_HW_RATE_MASK_VAL = GENMASK(6, 0),\n\tRTW89_HW_RATE_V1_MASK_MOD = GENMASK(10, 8),\n\tRTW89_HW_RATE_V1_MASK_VAL = GENMASK(7, 0),\n};\n\n \n#define RTW89_2G_CH_NUM 14\n\n \n#define RTW89_5G_CH_NUM 53\n\n \n#define RTW89_6G_CH_NUM 120\n\nenum rtw89_rate_section {\n\tRTW89_RS_CCK,\n\tRTW89_RS_OFDM,\n\tRTW89_RS_MCS,  \n\tRTW89_RS_HEDCM,\n\tRTW89_RS_OFFSET,\n\tRTW89_RS_NUM,\n\tRTW89_RS_LMT_NUM = RTW89_RS_MCS + 1,\n\tRTW89_RS_TX_SHAPE_NUM = RTW89_RS_OFDM + 1,\n};\n\nenum rtw89_rate_num {\n\tRTW89_RATE_CCK_NUM\t= 4,\n\tRTW89_RATE_OFDM_NUM\t= 8,\n\tRTW89_RATE_MCS_NUM\t= 12,\n\tRTW89_RATE_HEDCM_NUM\t= 4,  \n\tRTW89_RATE_OFFSET_NUM\t= 5,  \n};\n\nenum rtw89_nss {\n\tRTW89_NSS_1\t\t= 0,\n\tRTW89_NSS_2\t\t= 1,\n\t \n\tRTW89_NSS_HEDCM_NUM\t= RTW89_NSS_2 + 1,\n\tRTW89_NSS_3\t\t= 2,\n\tRTW89_NSS_4\t\t= 3,\n\tRTW89_NSS_NUM,\n};\n\nenum rtw89_ntx {\n\tRTW89_1TX\t= 0,\n\tRTW89_2TX\t= 1,\n\tRTW89_NTX_NUM,\n};\n\nenum rtw89_beamforming_type {\n\tRTW89_NONBF\t= 0,\n\tRTW89_BF\t= 1,\n\tRTW89_BF_NUM,\n};\n\nenum rtw89_regulation_type {\n\tRTW89_WW\t= 0,\n\tRTW89_ETSI\t= 1,\n\tRTW89_FCC\t= 2,\n\tRTW89_MKK\t= 3,\n\tRTW89_NA\t= 4,\n\tRTW89_IC\t= 5,\n\tRTW89_KCC\t= 6,\n\tRTW89_ACMA\t= 7,\n\tRTW89_NCC\t= 8,\n\tRTW89_MEXICO\t= 9,\n\tRTW89_CHILE\t= 10,\n\tRTW89_UKRAINE\t= 11,\n\tRTW89_CN\t= 12,\n\tRTW89_QATAR\t= 13,\n\tRTW89_UK\t= 14,\n\tRTW89_REGD_NUM,\n};\n\nenum rtw89_reg_6ghz_power {\n\tRTW89_REG_6GHZ_POWER_VLP = 0,\n\tRTW89_REG_6GHZ_POWER_LPI = 1,\n\tRTW89_REG_6GHZ_POWER_STD = 2,\n\n\tNUM_OF_RTW89_REG_6GHZ_POWER,\n\tRTW89_REG_6GHZ_POWER_DFLT = RTW89_REG_6GHZ_POWER_VLP,\n};\n\nenum rtw89_fw_pkt_ofld_type {\n\tRTW89_PKT_OFLD_TYPE_PROBE_RSP = 0,\n\tRTW89_PKT_OFLD_TYPE_PS_POLL = 1,\n\tRTW89_PKT_OFLD_TYPE_NULL_DATA = 2,\n\tRTW89_PKT_OFLD_TYPE_QOS_NULL = 3,\n\tRTW89_PKT_OFLD_TYPE_CTS2SELF = 4,\n\tRTW89_PKT_OFLD_TYPE_ARP_RSP = 5,\n\tRTW89_PKT_OFLD_TYPE_NDP = 6,\n\tRTW89_PKT_OFLD_TYPE_EAPOL_KEY = 7,\n\tRTW89_PKT_OFLD_TYPE_SA_QUERY = 8,\n\tRTW89_PKT_OFLD_TYPE_PROBE_REQ = 12,\n\tRTW89_PKT_OFLD_TYPE_NUM,\n};\n\nstruct rtw89_txpwr_byrate {\n\ts8 cck[RTW89_RATE_CCK_NUM];\n\ts8 ofdm[RTW89_RATE_OFDM_NUM];\n\ts8 mcs[RTW89_NSS_NUM][RTW89_RATE_MCS_NUM];\n\ts8 hedcm[RTW89_NSS_HEDCM_NUM][RTW89_RATE_HEDCM_NUM];\n\ts8 offset[RTW89_RATE_OFFSET_NUM];\n};\n\nenum rtw89_bandwidth_section_num {\n\tRTW89_BW20_SEC_NUM = 8,\n\tRTW89_BW40_SEC_NUM = 4,\n\tRTW89_BW80_SEC_NUM = 2,\n};\n\n#define RTW89_TXPWR_LMT_PAGE_SIZE 40\n\nstruct rtw89_txpwr_limit {\n\ts8 cck_20m[RTW89_BF_NUM];\n\ts8 cck_40m[RTW89_BF_NUM];\n\ts8 ofdm[RTW89_BF_NUM];\n\ts8 mcs_20m[RTW89_BW20_SEC_NUM][RTW89_BF_NUM];\n\ts8 mcs_40m[RTW89_BW40_SEC_NUM][RTW89_BF_NUM];\n\ts8 mcs_80m[RTW89_BW80_SEC_NUM][RTW89_BF_NUM];\n\ts8 mcs_160m[RTW89_BF_NUM];\n\ts8 mcs_40m_0p5[RTW89_BF_NUM];\n\ts8 mcs_40m_2p5[RTW89_BF_NUM];\n};\n\n#define RTW89_RU_SEC_NUM 8\n\n#define RTW89_TXPWR_LMT_RU_PAGE_SIZE 24\n\nstruct rtw89_txpwr_limit_ru {\n\ts8 ru26[RTW89_RU_SEC_NUM];\n\ts8 ru52[RTW89_RU_SEC_NUM];\n\ts8 ru106[RTW89_RU_SEC_NUM];\n};\n\nstruct rtw89_rate_desc {\n\tenum rtw89_nss nss;\n\tenum rtw89_rate_section rs;\n\tu8 idx;\n};\n\n#define PHY_STS_HDR_LEN 8\n#define RF_PATH_MAX 4\n#define RTW89_MAX_PPDU_CNT 8\nstruct rtw89_rx_phy_ppdu {\n\tvoid *buf;\n\tu32 len;\n\tu8 rssi_avg;\n\tu8 rssi[RF_PATH_MAX];\n\tu8 mac_id;\n\tu8 chan_idx;\n\tu8 ie;\n\tu16 rate;\n\tstruct {\n\t\tbool has;\n\t\tu8 avg_snr;\n\t\tu8 evm_max;\n\t\tu8 evm_min;\n\t} ofdm;\n\tbool to_self;\n\tbool valid;\n};\n\nenum rtw89_mac_idx {\n\tRTW89_MAC_0 = 0,\n\tRTW89_MAC_1 = 1,\n};\n\nenum rtw89_phy_idx {\n\tRTW89_PHY_0 = 0,\n\tRTW89_PHY_1 = 1,\n\tRTW89_PHY_MAX\n};\n\nenum rtw89_sub_entity_idx {\n\tRTW89_SUB_ENTITY_0 = 0,\n\tRTW89_SUB_ENTITY_1 = 1,\n\n\tNUM_OF_RTW89_SUB_ENTITY,\n\tRTW89_SUB_ENTITY_IDLE = NUM_OF_RTW89_SUB_ENTITY,\n};\n\nenum rtw89_rf_path {\n\tRF_PATH_A = 0,\n\tRF_PATH_B = 1,\n\tRF_PATH_C = 2,\n\tRF_PATH_D = 3,\n\tRF_PATH_AB,\n\tRF_PATH_AC,\n\tRF_PATH_AD,\n\tRF_PATH_BC,\n\tRF_PATH_BD,\n\tRF_PATH_CD,\n\tRF_PATH_ABC,\n\tRF_PATH_ABD,\n\tRF_PATH_ACD,\n\tRF_PATH_BCD,\n\tRF_PATH_ABCD,\n};\n\nenum rtw89_rf_path_bit {\n\tRF_A\t= BIT(0),\n\tRF_B\t= BIT(1),\n\tRF_C\t= BIT(2),\n\tRF_D\t= BIT(3),\n\n\tRF_AB\t= (RF_A | RF_B),\n\tRF_AC\t= (RF_A | RF_C),\n\tRF_AD\t= (RF_A | RF_D),\n\tRF_BC\t= (RF_B | RF_C),\n\tRF_BD\t= (RF_B | RF_D),\n\tRF_CD\t= (RF_C | RF_D),\n\n\tRF_ABC\t= (RF_A | RF_B | RF_C),\n\tRF_ABD\t= (RF_A | RF_B | RF_D),\n\tRF_ACD\t= (RF_A | RF_C | RF_D),\n\tRF_BCD\t= (RF_B | RF_C | RF_D),\n\n\tRF_ABCD\t= (RF_A | RF_B | RF_C | RF_D),\n};\n\nenum rtw89_bandwidth {\n\tRTW89_CHANNEL_WIDTH_20\t= 0,\n\tRTW89_CHANNEL_WIDTH_40\t= 1,\n\tRTW89_CHANNEL_WIDTH_80\t= 2,\n\tRTW89_CHANNEL_WIDTH_160\t= 3,\n\tRTW89_CHANNEL_WIDTH_80_80\t= 4,\n\tRTW89_CHANNEL_WIDTH_5\t= 5,\n\tRTW89_CHANNEL_WIDTH_10\t= 6,\n};\n\nenum rtw89_ps_mode {\n\tRTW89_PS_MODE_NONE\t= 0,\n\tRTW89_PS_MODE_RFOFF\t= 1,\n\tRTW89_PS_MODE_CLK_GATED\t= 2,\n\tRTW89_PS_MODE_PWR_GATED\t= 3,\n};\n\n#define RTW89_2G_BW_NUM (RTW89_CHANNEL_WIDTH_40 + 1)\n#define RTW89_5G_BW_NUM (RTW89_CHANNEL_WIDTH_160 + 1)\n#define RTW89_6G_BW_NUM (RTW89_CHANNEL_WIDTH_160 + 1)\n#define RTW89_PPE_BW_NUM (RTW89_CHANNEL_WIDTH_160 + 1)\n\nenum rtw89_ru_bandwidth {\n\tRTW89_RU26 = 0,\n\tRTW89_RU52 = 1,\n\tRTW89_RU106 = 2,\n\tRTW89_RU_NUM,\n};\n\nenum rtw89_sc_offset {\n\tRTW89_SC_DONT_CARE\t= 0,\n\tRTW89_SC_20_UPPER\t= 1,\n\tRTW89_SC_20_LOWER\t= 2,\n\tRTW89_SC_20_UPMOST\t= 3,\n\tRTW89_SC_20_LOWEST\t= 4,\n\tRTW89_SC_20_UP2X\t= 5,\n\tRTW89_SC_20_LOW2X\t= 6,\n\tRTW89_SC_20_UP3X\t= 7,\n\tRTW89_SC_20_LOW3X\t= 8,\n\tRTW89_SC_40_UPPER\t= 9,\n\tRTW89_SC_40_LOWER\t= 10,\n};\n\nenum rtw89_wow_flags {\n\tRTW89_WOW_FLAG_EN_MAGIC_PKT,\n\tRTW89_WOW_FLAG_EN_REKEY_PKT,\n\tRTW89_WOW_FLAG_EN_DISCONNECT,\n\tRTW89_WOW_FLAG_NUM,\n};\n\nstruct rtw89_chan {\n\tu8 channel;\n\tu8 primary_channel;\n\tenum rtw89_band band_type;\n\tenum rtw89_bandwidth band_width;\n\n\t \n\tu32 freq;\n\tenum rtw89_subband subband_type;\n\tenum rtw89_sc_offset pri_ch_idx;\n};\n\nstruct rtw89_chan_rcd {\n\tu8 prev_primary_channel;\n\tenum rtw89_band prev_band_type;\n\tbool band_changed;\n};\n\nstruct rtw89_channel_help_params {\n\tu32 tx_en;\n};\n\nstruct rtw89_port_reg {\n\tu32 port_cfg;\n\tu32 tbtt_prohib;\n\tu32 bcn_area;\n\tu32 bcn_early;\n\tu32 tbtt_early;\n\tu32 tbtt_agg;\n\tu32 bcn_space;\n\tu32 bcn_forcetx;\n\tu32 bcn_err_cnt;\n\tu32 bcn_err_flag;\n\tu32 dtim_ctrl;\n\tu32 tbtt_shift;\n\tu32 bcn_cnt_tmr;\n\tu32 tsftr_l;\n\tu32 tsftr_h;\n};\n\nstruct rtw89_txwd_body {\n\t__le32 dword0;\n\t__le32 dword1;\n\t__le32 dword2;\n\t__le32 dword3;\n\t__le32 dword4;\n\t__le32 dword5;\n} __packed;\n\nstruct rtw89_txwd_body_v1 {\n\t__le32 dword0;\n\t__le32 dword1;\n\t__le32 dword2;\n\t__le32 dword3;\n\t__le32 dword4;\n\t__le32 dword5;\n\t__le32 dword6;\n\t__le32 dword7;\n} __packed;\n\nstruct rtw89_txwd_info {\n\t__le32 dword0;\n\t__le32 dword1;\n\t__le32 dword2;\n\t__le32 dword3;\n\t__le32 dword4;\n\t__le32 dword5;\n} __packed;\n\nstruct rtw89_rx_desc_info {\n\tu16 pkt_size;\n\tu8 pkt_type;\n\tu8 drv_info_size;\n\tu8 shift;\n\tu8 wl_hd_iv_len;\n\tbool long_rxdesc;\n\tbool bb_sel;\n\tbool mac_info_valid;\n\tu16 data_rate;\n\tu8 gi_ltf;\n\tu8 bw;\n\tu32 free_run_cnt;\n\tu8 user_id;\n\tbool sr_en;\n\tu8 ppdu_cnt;\n\tu8 ppdu_type;\n\tbool icv_err;\n\tbool crc32_err;\n\tbool hw_dec;\n\tbool sw_dec;\n\tbool addr1_match;\n\tu8 frag;\n\tu16 seq;\n\tu8 frame_type;\n\tu8 rx_pl_id;\n\tbool addr_cam_valid;\n\tu8 addr_cam_id;\n\tu8 sec_cam_id;\n\tu8 mac_id;\n\tu16 offset;\n\tu16 rxd_len;\n\tbool ready;\n};\n\nstruct rtw89_rxdesc_short {\n\t__le32 dword0;\n\t__le32 dword1;\n\t__le32 dword2;\n\t__le32 dword3;\n} __packed;\n\nstruct rtw89_rxdesc_long {\n\t__le32 dword0;\n\t__le32 dword1;\n\t__le32 dword2;\n\t__le32 dword3;\n\t__le32 dword4;\n\t__le32 dword5;\n\t__le32 dword6;\n\t__le32 dword7;\n} __packed;\n\nstruct rtw89_tx_desc_info {\n\tu16 pkt_size;\n\tu8 wp_offset;\n\tu8 mac_id;\n\tu8 qsel;\n\tu8 ch_dma;\n\tu8 hdr_llc_len;\n\tbool is_bmc;\n\tbool en_wd_info;\n\tbool wd_page;\n\tbool use_rate;\n\tbool dis_data_fb;\n\tbool tid_indicate;\n\tbool agg_en;\n\tbool bk;\n\tu8 ampdu_density;\n\tu8 ampdu_num;\n\tbool sec_en;\n\tu8 addr_info_nr;\n\tu8 sec_keyid;\n\tu8 sec_type;\n\tu8 sec_cam_idx;\n\tu8 sec_seq[6];\n\tu16 data_rate;\n\tu16 data_retry_lowest_rate;\n\tbool fw_dl;\n\tu16 seq;\n\tbool a_ctrl_bsr;\n\tu8 hw_ssn_sel;\n#define RTW89_MGMT_HW_SSN_SEL\t1\n\tu8 hw_seq_mode;\n#define RTW89_MGMT_HW_SEQ_MODE\t1\n\tbool hiq;\n\tu8 port;\n\tbool er_cap;\n};\n\nstruct rtw89_core_tx_request {\n\tenum rtw89_core_tx_type tx_type;\n\n\tstruct sk_buff *skb;\n\tstruct ieee80211_vif *vif;\n\tstruct ieee80211_sta *sta;\n\tstruct rtw89_tx_desc_info desc_info;\n};\n\nstruct rtw89_txq {\n\tstruct list_head list;\n\tunsigned long flags;\n\tint wait_cnt;\n};\n\nstruct rtw89_mac_ax_gnt {\n\tu8 gnt_bt_sw_en;\n\tu8 gnt_bt;\n\tu8 gnt_wl_sw_en;\n\tu8 gnt_wl;\n} __packed;\n\n#define RTW89_MAC_AX_COEX_GNT_NR 2\nstruct rtw89_mac_ax_coex_gnt {\n\tstruct rtw89_mac_ax_gnt band[RTW89_MAC_AX_COEX_GNT_NR];\n};\n\nenum rtw89_btc_ncnt {\n\tBTC_NCNT_POWER_ON = 0x0,\n\tBTC_NCNT_POWER_OFF,\n\tBTC_NCNT_INIT_COEX,\n\tBTC_NCNT_SCAN_START,\n\tBTC_NCNT_SCAN_FINISH,\n\tBTC_NCNT_SPECIAL_PACKET,\n\tBTC_NCNT_SWITCH_BAND,\n\tBTC_NCNT_RFK_TIMEOUT,\n\tBTC_NCNT_SHOW_COEX_INFO,\n\tBTC_NCNT_ROLE_INFO,\n\tBTC_NCNT_CONTROL,\n\tBTC_NCNT_RADIO_STATE,\n\tBTC_NCNT_CUSTOMERIZE,\n\tBTC_NCNT_WL_RFK,\n\tBTC_NCNT_WL_STA,\n\tBTC_NCNT_FWINFO,\n\tBTC_NCNT_TIMER,\n\tBTC_NCNT_NUM\n};\n\nenum rtw89_btc_btinfo {\n\tBTC_BTINFO_L0 = 0,\n\tBTC_BTINFO_L1,\n\tBTC_BTINFO_L2,\n\tBTC_BTINFO_L3,\n\tBTC_BTINFO_H0,\n\tBTC_BTINFO_H1,\n\tBTC_BTINFO_H2,\n\tBTC_BTINFO_H3,\n\tBTC_BTINFO_MAX\n};\n\nenum rtw89_btc_dcnt {\n\tBTC_DCNT_RUN = 0x0,\n\tBTC_DCNT_CX_RUNINFO,\n\tBTC_DCNT_RPT,\n\tBTC_DCNT_RPT_HANG,\n\tBTC_DCNT_CYCLE,\n\tBTC_DCNT_CYCLE_HANG,\n\tBTC_DCNT_W1,\n\tBTC_DCNT_W1_HANG,\n\tBTC_DCNT_B1,\n\tBTC_DCNT_B1_HANG,\n\tBTC_DCNT_TDMA_NONSYNC,\n\tBTC_DCNT_SLOT_NONSYNC,\n\tBTC_DCNT_BTCNT_HANG,\n\tBTC_DCNT_WL_SLOT_DRIFT,\n\tBTC_DCNT_WL_STA_LAST,\n\tBTC_DCNT_BT_SLOT_DRIFT,\n\tBTC_DCNT_BT_SLOT_FLOOD,\n\tBTC_DCNT_FDDT_TRIG,\n\tBTC_DCNT_E2G,\n\tBTC_DCNT_E2G_HANG,\n\tBTC_DCNT_NUM\n};\n\nenum rtw89_btc_wl_state_cnt {\n\tBTC_WCNT_SCANAP = 0x0,\n\tBTC_WCNT_DHCP,\n\tBTC_WCNT_EAPOL,\n\tBTC_WCNT_ARP,\n\tBTC_WCNT_SCBDUPDATE,\n\tBTC_WCNT_RFK_REQ,\n\tBTC_WCNT_RFK_GO,\n\tBTC_WCNT_RFK_REJECT,\n\tBTC_WCNT_RFK_TIMEOUT,\n\tBTC_WCNT_CH_UPDATE,\n\tBTC_WCNT_NUM\n};\n\nenum rtw89_btc_bt_state_cnt {\n\tBTC_BCNT_RETRY = 0x0,\n\tBTC_BCNT_REINIT,\n\tBTC_BCNT_REENABLE,\n\tBTC_BCNT_SCBDREAD,\n\tBTC_BCNT_RELINK,\n\tBTC_BCNT_IGNOWL,\n\tBTC_BCNT_INQPAG,\n\tBTC_BCNT_INQ,\n\tBTC_BCNT_PAGE,\n\tBTC_BCNT_ROLESW,\n\tBTC_BCNT_AFH,\n\tBTC_BCNT_INFOUPDATE,\n\tBTC_BCNT_INFOSAME,\n\tBTC_BCNT_SCBDUPDATE,\n\tBTC_BCNT_HIPRI_TX,\n\tBTC_BCNT_HIPRI_RX,\n\tBTC_BCNT_LOPRI_TX,\n\tBTC_BCNT_LOPRI_RX,\n\tBTC_BCNT_POLUT,\n\tBTC_BCNT_RATECHG,\n\tBTC_BCNT_NUM\n};\n\nenum rtw89_btc_bt_profile {\n\tBTC_BT_NOPROFILE = 0,\n\tBTC_BT_HFP = BIT(0),\n\tBTC_BT_HID = BIT(1),\n\tBTC_BT_A2DP = BIT(2),\n\tBTC_BT_PAN = BIT(3),\n\tBTC_PROFILE_MAX = 4,\n};\n\nstruct rtw89_btc_ant_info {\n\tu8 type;   \n\tu8 num;\n\tu8 isolation;\n\n\tu8 single_pos: 1; \n\tu8 diversity: 1;\n\tu8 btg_pos: 2;\n\tu8 stream_cnt: 4;\n};\n\nenum rtw89_tfc_dir {\n\tRTW89_TFC_UL,\n\tRTW89_TFC_DL,\n};\n\nstruct rtw89_btc_wl_smap {\n\tu32 busy: 1;\n\tu32 scan: 1;\n\tu32 connecting: 1;\n\tu32 roaming: 1;\n\tu32 _4way: 1;\n\tu32 rf_off: 1;\n\tu32 lps: 2;\n\tu32 ips: 1;\n\tu32 init_ok: 1;\n\tu32 traffic_dir : 2;\n\tu32 rf_off_pre: 1;\n\tu32 lps_pre: 2;\n};\n\nenum rtw89_tfc_lv {\n\tRTW89_TFC_IDLE,\n\tRTW89_TFC_ULTRA_LOW,\n\tRTW89_TFC_LOW,\n\tRTW89_TFC_MID,\n\tRTW89_TFC_HIGH,\n};\n\n#define RTW89_TP_SHIFT 18  \nDECLARE_EWMA(tp, 10, 2);\n\nstruct rtw89_traffic_stats {\n\t \n\tu64 tx_unicast;\n\tu64 rx_unicast;\n\tu32 tx_avg_len;\n\tu32 rx_avg_len;\n\n\t \n\tu64 tx_cnt;\n\tu64 rx_cnt;\n\n\t \n\tu32 tx_throughput;\n\tu32 rx_throughput;\n\tu32 tx_throughput_raw;\n\tu32 rx_throughput_raw;\n\n\tu32 rx_tf_acc;\n\tu32 rx_tf_periodic;\n\n\tenum rtw89_tfc_lv tx_tfc_lv;\n\tenum rtw89_tfc_lv rx_tfc_lv;\n\tstruct ewma_tp tx_ewma_tp;\n\tstruct ewma_tp rx_ewma_tp;\n\n\tu16 tx_rate;\n\tu16 rx_rate;\n};\n\nstruct rtw89_btc_statistic {\n\tu8 rssi;  \n\tstruct rtw89_traffic_stats traffic;\n};\n\n#define BTC_WL_RSSI_THMAX 4\n\nstruct rtw89_btc_wl_link_info {\n\tstruct rtw89_btc_statistic stat;\n\tenum rtw89_tfc_dir dir;\n\tu8 rssi_state[BTC_WL_RSSI_THMAX];\n\tu8 mac_addr[ETH_ALEN];\n\tu8 busy;\n\tu8 ch;\n\tu8 bw;\n\tu8 band;\n\tu8 role;\n\tu8 pid;\n\tu8 phy;\n\tu8 dtim_period;\n\tu8 mode;\n\n\tu8 mac_id;\n\tu8 tx_retry;\n\n\tu32 bcn_period;\n\tu32 busy_t;\n\tu32 tx_time;\n\tu32 client_cnt;\n\tu32 rx_rate_drop_cnt;\n\n\tu32 active: 1;\n\tu32 noa: 1;\n\tu32 client_ps: 1;\n\tu32 connected: 2;\n};\n\nunion rtw89_btc_wl_state_map {\n\tu32 val;\n\tstruct rtw89_btc_wl_smap map;\n};\n\nstruct rtw89_btc_bt_hfp_desc {\n\tu32 exist: 1;\n\tu32 type: 2;\n\tu32 rsvd: 29;\n};\n\nstruct rtw89_btc_bt_hid_desc {\n\tu32 exist: 1;\n\tu32 slot_info: 2;\n\tu32 pair_cnt: 2;\n\tu32 type: 8;\n\tu32 rsvd: 19;\n};\n\nstruct rtw89_btc_bt_a2dp_desc {\n\tu8 exist: 1;\n\tu8 exist_last: 1;\n\tu8 play_latency: 1;\n\tu8 type: 3;\n\tu8 active: 1;\n\tu8 sink: 1;\n\n\tu8 bitpool;\n\tu16 vendor_id;\n\tu32 device_name;\n\tu32 flush_time;\n};\n\nstruct rtw89_btc_bt_pan_desc {\n\tu32 exist: 1;\n\tu32 type: 1;\n\tu32 active: 1;\n\tu32 rsvd: 29;\n};\n\nstruct rtw89_btc_bt_rfk_info {\n\tu32 run: 1;\n\tu32 req: 1;\n\tu32 timeout: 1;\n\tu32 rsvd: 29;\n};\n\nunion rtw89_btc_bt_rfk_info_map {\n\tu32 val;\n\tstruct rtw89_btc_bt_rfk_info map;\n};\n\nstruct rtw89_btc_bt_ver_info {\n\tu32 fw_coex;  \n\tu32 fw;\n};\n\nstruct rtw89_btc_bool_sta_chg {\n\tu32 now: 1;\n\tu32 last: 1;\n\tu32 remain: 1;\n\tu32 srvd: 29;\n};\n\nstruct rtw89_btc_u8_sta_chg {\n\tu8 now;\n\tu8 last;\n\tu8 remain;\n\tu8 rsvd;\n};\n\nstruct rtw89_btc_wl_scan_info {\n\tu8 band[RTW89_PHY_MAX];\n\tu8 phy_map;\n\tu8 rsvd;\n};\n\nstruct rtw89_btc_wl_dbcc_info {\n\tu8 op_band[RTW89_PHY_MAX];  \n\tu8 scan_band[RTW89_PHY_MAX];  \n\tu8 real_band[RTW89_PHY_MAX];\n\tu8 role[RTW89_PHY_MAX];  \n};\n\nstruct rtw89_btc_wl_active_role {\n\tu8 connected: 1;\n\tu8 pid: 3;\n\tu8 phy: 1;\n\tu8 noa: 1;\n\tu8 band: 2;\n\n\tu8 client_ps: 1;\n\tu8 bw: 7;\n\n\tu8 role;\n\tu8 ch;\n\n\tu16 tx_lvl;\n\tu16 rx_lvl;\n\tu16 tx_rate;\n\tu16 rx_rate;\n};\n\nstruct rtw89_btc_wl_active_role_v1 {\n\tu8 connected: 1;\n\tu8 pid: 3;\n\tu8 phy: 1;\n\tu8 noa: 1;\n\tu8 band: 2;\n\n\tu8 client_ps: 1;\n\tu8 bw: 7;\n\n\tu8 role;\n\tu8 ch;\n\n\tu16 tx_lvl;\n\tu16 rx_lvl;\n\tu16 tx_rate;\n\tu16 rx_rate;\n\n\tu32 noa_duration;  \n};\n\nstruct rtw89_btc_wl_active_role_v2 {\n\tu8 connected: 1;\n\tu8 pid: 3;\n\tu8 phy: 1;\n\tu8 noa: 1;\n\tu8 band: 2;\n\n\tu8 client_ps: 1;\n\tu8 bw: 7;\n\n\tu8 role;\n\tu8 ch;\n\n\tu32 noa_duration;  \n};\n\nstruct rtw89_btc_wl_role_info_bpos {\n\tu16 none: 1;\n\tu16 station: 1;\n\tu16 ap: 1;\n\tu16 vap: 1;\n\tu16 adhoc: 1;\n\tu16 adhoc_master: 1;\n\tu16 mesh: 1;\n\tu16 moniter: 1;\n\tu16 p2p_device: 1;\n\tu16 p2p_gc: 1;\n\tu16 p2p_go: 1;\n\tu16 nan: 1;\n};\n\nstruct rtw89_btc_wl_scc_ctrl {\n\tu8 null_role1;\n\tu8 null_role2;\n\tu8 ebt_null;  \n};\n\nunion rtw89_btc_wl_role_info_map {\n\tu16 val;\n\tstruct rtw89_btc_wl_role_info_bpos role;\n};\n\nstruct rtw89_btc_wl_role_info {  \n\tu8 connect_cnt;\n\tu8 link_mode;\n\tunion rtw89_btc_wl_role_info_map role_map;\n\tstruct rtw89_btc_wl_active_role active_role[RTW89_PORT_NUM];\n};\n\nstruct rtw89_btc_wl_role_info_v1 {  \n\tu8 connect_cnt;\n\tu8 link_mode;\n\tunion rtw89_btc_wl_role_info_map role_map;\n\tstruct rtw89_btc_wl_active_role_v1 active_role_v1[RTW89_PORT_NUM];\n\tu32 mrole_type;  \n\tu32 mrole_noa_duration;  \n\n\tu32 dbcc_en: 1;\n\tu32 dbcc_chg: 1;\n\tu32 dbcc_2g_phy: 2;  \n\tu32 link_mode_chg: 1;\n\tu32 rsvd: 27;\n};\n\nstruct rtw89_btc_wl_role_info_v2 {  \n\tu8 connect_cnt;\n\tu8 link_mode;\n\tunion rtw89_btc_wl_role_info_map role_map;\n\tstruct rtw89_btc_wl_active_role_v2 active_role_v2[RTW89_PORT_NUM];\n\tu32 mrole_type;  \n\tu32 mrole_noa_duration;  \n\n\tu32 dbcc_en: 1;\n\tu32 dbcc_chg: 1;\n\tu32 dbcc_2g_phy: 2;  \n\tu32 link_mode_chg: 1;\n\tu32 rsvd: 27;\n};\n\nstruct rtw89_btc_wl_ver_info {\n\tu32 fw_coex;  \n\tu32 fw;\n\tu32 mac;\n\tu32 bb;\n\tu32 rf;\n};\n\nstruct rtw89_btc_wl_afh_info {\n\tu8 en;\n\tu8 ch;\n\tu8 bw;\n\tu8 rsvd;\n} __packed;\n\nstruct rtw89_btc_wl_rfk_info {\n\tu32 state: 2;\n\tu32 path_map: 4;\n\tu32 phy_map: 2;\n\tu32 band: 2;\n\tu32 type: 8;\n\tu32 rsvd: 14;\n};\n\nstruct rtw89_btc_bt_smap {\n\tu32 connect: 1;\n\tu32 ble_connect: 1;\n\tu32 acl_busy: 1;\n\tu32 sco_busy: 1;\n\tu32 mesh_busy: 1;\n\tu32 inq_pag: 1;\n};\n\nunion rtw89_btc_bt_state_map {\n\tu32 val;\n\tstruct rtw89_btc_bt_smap map;\n};\n\n#define BTC_BT_RSSI_THMAX 4\n#define BTC_BT_AFH_GROUP 12\n#define BTC_BT_AFH_LE_GROUP 5\n\nstruct rtw89_btc_bt_link_info {\n\tstruct rtw89_btc_u8_sta_chg profile_cnt;\n\tstruct rtw89_btc_bool_sta_chg multi_link;\n\tstruct rtw89_btc_bool_sta_chg relink;\n\tstruct rtw89_btc_bt_hfp_desc hfp_desc;\n\tstruct rtw89_btc_bt_hid_desc hid_desc;\n\tstruct rtw89_btc_bt_a2dp_desc a2dp_desc;\n\tstruct rtw89_btc_bt_pan_desc pan_desc;\n\tunion rtw89_btc_bt_state_map status;\n\n\tu8 sut_pwr_level[BTC_PROFILE_MAX];\n\tu8 golden_rx_shift[BTC_PROFILE_MAX];\n\tu8 rssi_state[BTC_BT_RSSI_THMAX];\n\tu8 afh_map[BTC_BT_AFH_GROUP];\n\tu8 afh_map_le[BTC_BT_AFH_LE_GROUP];\n\n\tu32 role_sw: 1;\n\tu32 slave_role: 1;\n\tu32 afh_update: 1;\n\tu32 cqddr: 1;\n\tu32 rssi: 8;\n\tu32 tx_3m: 1;\n\tu32 rsvd: 19;\n};\n\nstruct rtw89_btc_3rdcx_info {\n\tu8 type;    \n\tu8 hw_coex;\n\tu16 rsvd;\n};\n\nstruct rtw89_btc_dm_emap {\n\tu32 init: 1;\n\tu32 pta_owner: 1;\n\tu32 wl_rfk_timeout: 1;\n\tu32 bt_rfk_timeout: 1;\n\tu32 wl_fw_hang: 1;\n\tu32 cycle_hang: 1;\n\tu32 w1_hang: 1;\n\tu32 b1_hang: 1;\n\tu32 tdma_no_sync: 1;\n\tu32 slot_no_sync: 1;\n\tu32 wl_slot_drift: 1;\n\tu32 bt_slot_drift: 1;\n\tu32 role_num_mismatch: 1;\n\tu32 null1_tx_late: 1;\n\tu32 bt_afh_conflict: 1;\n\tu32 bt_leafh_conflict: 1;\n\tu32 bt_slot_flood: 1;\n\tu32 wl_e2g_hang: 1;\n\tu32 wl_ver_mismatch: 1;\n\tu32 bt_ver_mismatch: 1;\n};\n\nunion rtw89_btc_dm_error_map {\n\tu32 val;\n\tstruct rtw89_btc_dm_emap map;\n};\n\nstruct rtw89_btc_rf_para {\n\tu32 tx_pwr_freerun;\n\tu32 rx_gain_freerun;\n\tu32 tx_pwr_perpkt;\n\tu32 rx_gain_perpkt;\n};\n\nstruct rtw89_btc_wl_nhm {\n\tu8 instant_wl_nhm_dbm;\n\tu8 instant_wl_nhm_per_mhz;\n\tu16 valid_record_times;\n\ts8 record_pwr[16];\n\tu8 record_ratio[16];\n\ts8 pwr;  \n\tu8 ratio;\n\tu8 current_status;\n\tu8 refresh;\n\tbool start_flag;\n\ts8 pwr_max;\n\ts8 pwr_min;\n};\n\nstruct rtw89_btc_wl_info {\n\tstruct rtw89_btc_wl_link_info link_info[RTW89_PORT_NUM];\n\tstruct rtw89_btc_wl_rfk_info rfk_info;\n\tstruct rtw89_btc_wl_ver_info  ver_info;\n\tstruct rtw89_btc_wl_afh_info afh_info;\n\tstruct rtw89_btc_wl_role_info role_info;\n\tstruct rtw89_btc_wl_role_info_v1 role_info_v1;\n\tstruct rtw89_btc_wl_role_info_v2 role_info_v2;\n\tstruct rtw89_btc_wl_scan_info scan_info;\n\tstruct rtw89_btc_wl_dbcc_info dbcc_info;\n\tstruct rtw89_btc_rf_para rf_para;\n\tstruct rtw89_btc_wl_nhm nhm;\n\tunion rtw89_btc_wl_state_map status;\n\n\tu8 port_id[RTW89_WIFI_ROLE_MLME_MAX];\n\tu8 rssi_level;\n\tu8 cn_report;\n\n\tbool scbd_change;\n\tu32 scbd;\n};\n\nstruct rtw89_btc_module {\n\tstruct rtw89_btc_ant_info ant;\n\tu8 rfe_type;\n\tu8 cv;\n\n\tu8 bt_solo: 1;\n\tu8 bt_pos: 1;\n\tu8 switch_type: 1;\n\tu8 wa_type: 3;\n\n\tu8 kt_ver_adie;\n};\n\n#define RTW89_BTC_DM_MAXSTEP 30\n#define RTW89_BTC_DM_CNT_MAX (RTW89_BTC_DM_MAXSTEP * 8)\n\nstruct rtw89_btc_dm_step {\n\tu16 step[RTW89_BTC_DM_MAXSTEP];\n\tu8 step_pos;\n\tbool step_ov;\n};\n\nstruct rtw89_btc_init_info {\n\tstruct rtw89_btc_module module;\n\tu8 wl_guard_ch;\n\n\tu8 wl_only: 1;\n\tu8 wl_init_ok: 1;\n\tu8 dbcc_en: 1;\n\tu8 cx_other: 1;\n\tu8 bt_only: 1;\n\n\tu16 rsvd;\n};\n\nstruct rtw89_btc_wl_tx_limit_para {\n\tu16 enable;\n\tu32 tx_time;\t \n\tu16 tx_retry;\n};\n\nenum rtw89_btc_bt_scan_type {\n\tBTC_SCAN_INQ\t= 0,\n\tBTC_SCAN_PAGE,\n\tBTC_SCAN_BLE,\n\tBTC_SCAN_INIT,\n\tBTC_SCAN_TV,\n\tBTC_SCAN_ADV,\n\tBTC_SCAN_MAX1,\n};\n\nenum rtw89_btc_ble_scan_type {\n\tCXSCAN_BG = 0,\n\tCXSCAN_INIT,\n\tCXSCAN_LE,\n\tCXSCAN_MAX\n};\n\n#define RTW89_BTC_BTC_SCAN_V1_FLAG_ENABLE BIT(0)\n#define RTW89_BTC_BTC_SCAN_V1_FLAG_INTERLACE BIT(1)\n\nstruct rtw89_btc_bt_scan_info_v1 {\n\t__le16 win;\n\t__le16 intvl;\n\t__le32 flags;\n} __packed;\n\nstruct rtw89_btc_bt_scan_info_v2 {\n\t__le16 win;\n\t__le16 intvl;\n} __packed;\n\nstruct rtw89_btc_fbtc_btscan_v1 {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd2;\n\tstruct rtw89_btc_bt_scan_info_v1 scan[BTC_SCAN_MAX1];\n} __packed;\n\nstruct rtw89_btc_fbtc_btscan_v2 {\n\tu8 fver;  \n\tu8 type;\n\t__le16 rsvd2;\n\tstruct rtw89_btc_bt_scan_info_v2 para[CXSCAN_MAX];\n} __packed;\n\nunion rtw89_btc_fbtc_btscan {\n\tstruct rtw89_btc_fbtc_btscan_v1 v1;\n\tstruct rtw89_btc_fbtc_btscan_v2 v2;\n};\n\nstruct rtw89_btc_bt_info {\n\tstruct rtw89_btc_bt_link_info link_info;\n\tstruct rtw89_btc_bt_scan_info_v1 scan_info_v1[BTC_SCAN_MAX1];\n\tstruct rtw89_btc_bt_scan_info_v2 scan_info_v2[CXSCAN_MAX];\n\tstruct rtw89_btc_bt_ver_info ver_info;\n\tstruct rtw89_btc_bool_sta_chg enable;\n\tstruct rtw89_btc_bool_sta_chg inq_pag;\n\tstruct rtw89_btc_rf_para rf_para;\n\tunion rtw89_btc_bt_rfk_info_map rfk_info;\n\n\tu8 raw_info[BTC_BTINFO_MAX];  \n\n\tu32 scbd;\n\tu32 feature;\n\n\tu32 mbx_avl: 1;\n\tu32 whql_test: 1;\n\tu32 igno_wl: 1;\n\tu32 reinit: 1;\n\tu32 ble_scan_en: 1;\n\tu32 btg_type: 1;\n\tu32 inq: 1;\n\tu32 pag: 1;\n\tu32 run_patch_code: 1;\n\tu32 hi_lna_rx: 1;\n\tu32 scan_rx_low_pri: 1;\n\tu32 scan_info_update: 1;\n\tu32 rsvd: 20;\n};\n\nstruct rtw89_btc_cx {\n\tstruct rtw89_btc_wl_info wl;\n\tstruct rtw89_btc_bt_info bt;\n\tstruct rtw89_btc_3rdcx_info other;\n\tu32 state_map;\n\tu32 cnt_bt[BTC_BCNT_NUM];\n\tu32 cnt_wl[BTC_WCNT_NUM];\n};\n\nstruct rtw89_btc_fbtc_tdma {\n\tu8 type;  \n\tu8 rxflctrl;\n\tu8 txpause;\n\tu8 wtgle_n;\n\tu8 leak_n;\n\tu8 ext_ctrl;\n\tu8 rxflctrl_role;\n\tu8 option_ctrl;\n} __packed;\n\nstruct rtw89_btc_fbtc_tdma_v3 {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd1;\n\tstruct rtw89_btc_fbtc_tdma tdma;\n} __packed;\n\nunion rtw89_btc_fbtc_tdma_le32 {\n\tstruct rtw89_btc_fbtc_tdma v1;\n\tstruct rtw89_btc_fbtc_tdma_v3 v3;\n};\n\n#define CXMREG_MAX 30\n#define CXMREG_MAX_V2 20\n#define FCXMAX_STEP 255  \n#define BTC_CYCLE_SLOT_MAX 48  \n\nenum rtw89_btc_bt_sta_counter {\n\tBTC_BCNT_RFK_REQ = 0,\n\tBTC_BCNT_RFK_GO = 1,\n\tBTC_BCNT_RFK_REJECT = 2,\n\tBTC_BCNT_RFK_FAIL = 3,\n\tBTC_BCNT_RFK_TIMEOUT = 4,\n\tBTC_BCNT_HI_TX = 5,\n\tBTC_BCNT_HI_RX = 6,\n\tBTC_BCNT_LO_TX = 7,\n\tBTC_BCNT_LO_RX = 8,\n\tBTC_BCNT_POLLUTED = 9,\n\tBTC_BCNT_STA_MAX\n};\n\nenum rtw89_btc_bt_sta_counter_v105 {\n\tBTC_BCNT_RFK_REQ_V105 = 0,\n\tBTC_BCNT_HI_TX_V105 = 1,\n\tBTC_BCNT_HI_RX_V105 = 2,\n\tBTC_BCNT_LO_TX_V105 = 3,\n\tBTC_BCNT_LO_RX_V105 = 4,\n\tBTC_BCNT_POLLUTED_V105 = 5,\n\tBTC_BCNT_STA_MAX_V105\n};\n\nstruct rtw89_btc_fbtc_rpt_ctrl_v1 {\n\tu16 fver;  \n\tu16 rpt_cnt;  \n\tu32 wl_fw_coex_ver;  \n\tu32 wl_fw_cx_offload;\n\tu32 wl_fw_ver;\n\tu32 rpt_enable;\n\tu32 rpt_para;  \n\tu32 mb_send_fail_cnt;  \n\tu32 mb_send_ok_cnt;  \n\tu32 mb_recv_cnt;  \n\tu32 mb_a2dp_empty_cnt;  \n\tu32 mb_a2dp_flct_cnt;  \n\tu32 mb_a2dp_full_cnt;  \n\tu32 bt_rfk_cnt[BTC_BCNT_HI_TX];\n\tu32 c2h_cnt;  \n\tu32 h2c_cnt;  \n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_info {\n\t__le32 cnt;  \n\t__le32 en;  \n\t__le32 para;  \n\n\t__le32 cnt_c2h;  \n\t__le32 cnt_h2c;  \n\t__le32 len_c2h;  \n\n\t__le32 cnt_aoac_rf_on;   \n\t__le32 cnt_aoac_rf_off;  \n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_info_v5 {\n\t__le32 cx_ver;  \n\t__le32 fw_ver;\n\t__le32 en;  \n\n\t__le16 cnt;  \n\t__le16 cnt_c2h;  \n\t__le16 cnt_h2c;  \n\t__le16 len_c2h;  \n\n\t__le16 cnt_aoac_rf_on;   \n\t__le16 cnt_aoac_rf_off;  \n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_wl_fw_info {\n\t__le32 cx_ver;  \n\t__le32 cx_offload;\n\t__le32 fw_ver;\n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_a2dp_empty {\n\t__le32 cnt_empty;  \n\t__le32 cnt_flowctrl;  \n\t__le32 cnt_tx;\n\t__le32 cnt_ack;\n\t__le32 cnt_nack;\n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_bt_mailbox {\n\t__le32 cnt_send_ok;  \n\t__le32 cnt_send_fail;  \n\t__le32 cnt_recv;  \n\tstruct rtw89_btc_fbtc_rpt_ctrl_a2dp_empty a2dp;\n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_v4 {\n\tu8 fver;\n\tu8 rsvd;\n\t__le16 rsvd1;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_info rpt_info;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_wl_fw_info wl_fw_info;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_bt_mailbox bt_mbx_info;\n\t__le32 bt_cnt[BTC_BCNT_STA_MAX];\n\tstruct rtw89_mac_ax_gnt gnt_val[RTW89_PHY_MAX];\n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_v5 {\n\tu8 fver;\n\tu8 rsvd;\n\t__le16 rsvd1;\n\n\tu8 gnt_val[RTW89_PHY_MAX][4];\n\t__le16 bt_cnt[BTC_BCNT_STA_MAX];\n\n\tstruct rtw89_btc_fbtc_rpt_ctrl_info_v5 rpt_info;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_bt_mailbox bt_mbx_info;\n} __packed;\n\nstruct rtw89_btc_fbtc_rpt_ctrl_v105 {\n\tu8 fver;\n\tu8 rsvd;\n\t__le16 rsvd1;\n\n\tu8 gnt_val[RTW89_PHY_MAX][4];\n\t__le16 bt_cnt[BTC_BCNT_STA_MAX_V105];\n\n\tstruct rtw89_btc_fbtc_rpt_ctrl_info_v5 rpt_info;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_bt_mailbox bt_mbx_info;\n} __packed;\n\nunion rtw89_btc_fbtc_rpt_ctrl_ver_info {\n\tstruct rtw89_btc_fbtc_rpt_ctrl_v1 v1;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_v4 v4;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_v5 v5;\n\tstruct rtw89_btc_fbtc_rpt_ctrl_v105 v105;\n};\n\nenum rtw89_fbtc_ext_ctrl_type {\n\tCXECTL_OFF = 0x0,  \n\tCXECTL_B2 = 0x1,  \n\tCXECTL_EXT = 0x2,\n\tCXECTL_MAX\n};\n\nunion rtw89_btc_fbtc_rxflct {\n\tu8 val;\n\tu8 type: 3;\n\tu8 tgln_n: 5;\n};\n\nenum rtw89_btc_cxst_state {\n\tCXST_OFF = 0x0,\n\tCXST_B2W = 0x1,\n\tCXST_W1 = 0x2,\n\tCXST_W2 = 0x3,\n\tCXST_W2B = 0x4,\n\tCXST_B1 = 0x5,\n\tCXST_B2 = 0x6,\n\tCXST_B3 = 0x7,\n\tCXST_B4 = 0x8,\n\tCXST_LK = 0x9,\n\tCXST_BLK = 0xa,\n\tCXST_E2G = 0xb,\n\tCXST_E5G = 0xc,\n\tCXST_EBT = 0xd,\n\tCXST_ENULL = 0xe,\n\tCXST_WLK = 0xf,\n\tCXST_W1FDD = 0x10,\n\tCXST_B1FDD = 0x11,\n\tCXST_MAX = 0x12,\n};\n\nenum rtw89_btc_cxevnt {\n\tCXEVNT_TDMA_ENTRY = 0x0,\n\tCXEVNT_WL_TMR,\n\tCXEVNT_B1_TMR,\n\tCXEVNT_B2_TMR,\n\tCXEVNT_B3_TMR,\n\tCXEVNT_B4_TMR,\n\tCXEVNT_W2B_TMR,\n\tCXEVNT_B2W_TMR,\n\tCXEVNT_BCN_EARLY,\n\tCXEVNT_A2DP_EMPTY,\n\tCXEVNT_LK_END,\n\tCXEVNT_RX_ISR,\n\tCXEVNT_RX_FC0,\n\tCXEVNT_RX_FC1,\n\tCXEVNT_BT_RELINK,\n\tCXEVNT_BT_RETRY,\n\tCXEVNT_E2G,\n\tCXEVNT_E5G,\n\tCXEVNT_EBT,\n\tCXEVNT_ENULL,\n\tCXEVNT_DRV_WLK,\n\tCXEVNT_BCN_OK,\n\tCXEVNT_BT_CHANGE,\n\tCXEVNT_EBT_EXTEND,\n\tCXEVNT_E2G_NULL1,\n\tCXEVNT_B1FDD_TMR,\n\tCXEVNT_MAX\n};\n\nenum {\n\tCXBCN_ALL = 0x0,\n\tCXBCN_ALL_OK,\n\tCXBCN_BT_SLOT,\n\tCXBCN_BT_OK,\n\tCXBCN_MAX\n};\n\nenum btc_slot_type {\n\tSLOT_MIX = 0x0,  \n\tSLOT_ISO = 0x1,  \n\tCXSTYPE_NUM,\n};\n\nenum {  \n\tCXT_BT = 0x0,\n\tCXT_WL = 0x1,\n\tCXT_MAX\n};\n\nenum {  \n\tCXT_FLCTRL_OFF = 0x0,\n\tCXT_FLCTRL_ON = 0x1,\n\tCXT_FLCTRL_MAX\n};\n\nenum {  \n\tCXSTEP_NONE = 0x0,\n\tCXSTEP_EVNT = 0x1,\n\tCXSTEP_SLOT = 0x2,\n\tCXSTEP_MAX,\n};\n\nenum rtw89_btc_afh_map_type {  \n\tRPT_BT_AFH_SEQ_LEGACY = 0x10,\n\tRPT_BT_AFH_SEQ_LE = 0x20\n};\n\n#define BTC_DBG_MAX1  32\nstruct rtw89_btc_fbtc_gpio_dbg {\n\tu8 fver;  \n\tu8 rsvd;\n\tu16 rsvd2;\n\tu32 en_map;  \n\tu32 pre_state;  \n\tu8 gpio_map[BTC_DBG_MAX1];  \n} __packed;\n\nstruct rtw89_btc_fbtc_mreg_val_v1 {\n\tu8 fver;  \n\tu8 reg_num;\n\t__le16 rsvd;\n\t__le32 mreg_val[CXMREG_MAX];\n} __packed;\n\nstruct rtw89_btc_fbtc_mreg_val_v2 {\n\tu8 fver;  \n\tu8 reg_num;\n\t__le16 rsvd;\n\t__le32 mreg_val[CXMREG_MAX_V2];\n} __packed;\n\nunion rtw89_btc_fbtc_mreg_val {\n\tstruct rtw89_btc_fbtc_mreg_val_v1 v1;\n\tstruct rtw89_btc_fbtc_mreg_val_v2 v2;\n};\n\n#define RTW89_DEF_FBTC_MREG(__type, __bytes, __offset) \\\n\t{ .type = cpu_to_le16(__type), .bytes = cpu_to_le16(__bytes), \\\n\t  .offset = cpu_to_le32(__offset), }\n\nstruct rtw89_btc_fbtc_mreg {\n\t__le16 type;\n\t__le16 bytes;\n\t__le32 offset;\n} __packed;\n\nstruct rtw89_btc_fbtc_slot {\n\t__le16 dur;\n\t__le32 cxtbl;\n\t__le16 cxtype;\n} __packed;\n\nstruct rtw89_btc_fbtc_slots {\n\tu8 fver;  \n\tu8 tbl_num;\n\t__le16 rsvd;\n\t__le32 update_map;\n\tstruct rtw89_btc_fbtc_slot slot[CXST_MAX];\n} __packed;\n\nstruct rtw89_btc_fbtc_step {\n\tu8 type;\n\tu8 val;\n\t__le16 difft;\n} __packed;\n\nstruct rtw89_btc_fbtc_steps_v2 {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 cnt;\n\t__le16 pos_old;\n\t__le16 pos_new;\n\tstruct rtw89_btc_fbtc_step step[FCXMAX_STEP];\n} __packed;\n\nstruct rtw89_btc_fbtc_steps_v3 {\n\tu8 fver;\n\tu8 en;\n\t__le16 rsvd;\n\t__le32 cnt;\n\tstruct rtw89_btc_fbtc_step step[FCXMAX_STEP];\n} __packed;\n\nunion rtw89_btc_fbtc_steps_info {\n\tstruct rtw89_btc_fbtc_steps_v2 v2;\n\tstruct rtw89_btc_fbtc_steps_v3 v3;\n};\n\nstruct rtw89_btc_fbtc_cysta_v2 {  \n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 cycles;  \n\t__le16 cycles_a2dp[CXT_FLCTRL_MAX];\n\t__le16 a2dpept;  \n\t__le16 a2dpeptto;  \n\t__le16 tavg_cycle[CXT_MAX];  \n\t__le16 tmax_cycle[CXT_MAX];  \n\t__le16 tmaxdiff_cycle[CXT_MAX];  \n\t__le16 tavg_a2dp[CXT_FLCTRL_MAX];  \n\t__le16 tmax_a2dp[CXT_FLCTRL_MAX];  \n\t__le16 tavg_a2dpept;  \n\t__le16 tmax_a2dpept;  \n\t__le16 tavg_lk;  \n\t__le16 tmax_lk;  \n\t__le32 slot_cnt[CXST_MAX];  \n\t__le32 bcn_cnt[CXBCN_MAX];\n\t__le32 leakrx_cnt;  \n\t__le32 collision_cnt;  \n\t__le32 skip_cnt;\n\t__le32 exception;\n\t__le32 except_cnt;\n\t__le16 tslot_cycle[BTC_CYCLE_SLOT_MAX];\n} __packed;\n\nstruct rtw89_btc_fbtc_fdd_try_info {\n\t__le16 cycles[CXT_FLCTRL_MAX];\n\t__le16 tavg[CXT_FLCTRL_MAX];  \n\t__le16 tmax[CXT_FLCTRL_MAX];  \n} __packed;\n\nstruct rtw89_btc_fbtc_cycle_time_info {\n\t__le16 tavg[CXT_MAX];  \n\t__le16 tmax[CXT_MAX];  \n\t__le16 tmaxdiff[CXT_MAX];  \n} __packed;\n\nstruct rtw89_btc_fbtc_cycle_time_info_v5 {\n\t__le16 tavg[CXT_MAX];  \n\t__le16 tmax[CXT_MAX];  \n} __packed;\n\nstruct rtw89_btc_fbtc_a2dp_trx_stat {\n\tu8 empty_cnt;\n\tu8 retry_cnt;\n\tu8 tx_rate;\n\tu8 tx_cnt;\n\tu8 ack_cnt;\n\tu8 nack_cnt;\n\tu8 rsvd1;\n\tu8 rsvd2;\n} __packed;\n\nstruct rtw89_btc_fbtc_a2dp_trx_stat_v4 {\n\tu8 empty_cnt;\n\tu8 retry_cnt;\n\tu8 tx_rate;\n\tu8 tx_cnt;\n\tu8 ack_cnt;\n\tu8 nack_cnt;\n\tu8 no_empty_cnt;\n\tu8 rsvd;\n} __packed;\n\nstruct rtw89_btc_fbtc_cycle_a2dp_empty_info {\n\t__le16 cnt;  \n\t__le16 cnt_timeout;  \n\t__le16 tavg;  \n\t__le16 tmax;  \n} __packed;\n\nstruct rtw89_btc_fbtc_cycle_leak_info {\n\t__le32 cnt_rximr;  \n\t__le16 tavg;  \n\t__le16 tmax;  \n} __packed;\n\n#define RTW89_BTC_FDDT_PHASE_CYCLE GENMASK(9, 0)\n#define RTW89_BTC_FDDT_TRAIN_STEP GENMASK(15, 10)\n\nstruct rtw89_btc_fbtc_cycle_fddt_info {\n\t__le16 train_cycle;\n\t__le16 tp;\n\n\ts8 tx_power;  \n\ts8 bt_tx_power;  \n\ts8 bt_rx_gain;   \n\tu8 no_empty_cnt;\n\n\tu8 rssi;  \n\tu8 cn;  \n\tu8 train_status;  \n\tu8 train_result;  \n} __packed;\n\n#define RTW89_BTC_FDDT_CELL_TRAIN_STATE GENMASK(3, 0)\n#define RTW89_BTC_FDDT_CELL_TRAIN_PHASE GENMASK(7, 4)\n\nstruct rtw89_btc_fbtc_cycle_fddt_info_v5 {\n\t__le16 train_cycle;\n\t__le16 tp;\n\n\ts8 tx_power;  \n\ts8 bt_tx_power;  \n\ts8 bt_rx_gain;   \n\tu8 no_empty_cnt;\n\n\tu8 rssi;  \n\tu8 cn;  \n\tu8 train_status;  \n\tu8 train_result;  \n} __packed;\n\nstruct rtw89_btc_fbtc_fddt_cell_status {\n\ts8 wl_tx_pwr;\n\ts8 bt_tx_pwr;\n\ts8 bt_rx_gain;\n\tu8 state_phase;  \n} __packed;\n\nstruct rtw89_btc_fbtc_fddt_cell_status_v5 {\n\ts8 wl_tx_pwr;\n\ts8 bt_tx_pwr;\n\ts8 bt_rx_gain;\n} __packed;\n\nstruct rtw89_btc_fbtc_cysta_v3 {  \n\tu8 fver;\n\tu8 rsvd;\n\t__le16 cycles;  \n\t__le16 slot_step_time[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_cycle_time_info cycle_time;\n\tstruct rtw89_btc_fbtc_fdd_try_info fdd_try;\n\tstruct rtw89_btc_fbtc_cycle_a2dp_empty_info a2dp_ept;\n\tstruct rtw89_btc_fbtc_a2dp_trx_stat a2dp_trx[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_cycle_leak_info leak_slot;\n\t__le32 slot_cnt[CXST_MAX];  \n\t__le32 bcn_cnt[CXBCN_MAX];\n\t__le32 collision_cnt;  \n\t__le32 skip_cnt;\n\t__le32 except_cnt;\n\t__le32 except_map;\n} __packed;\n\n#define FDD_TRAIN_WL_DIRECTION 2\n#define FDD_TRAIN_WL_RSSI_LEVEL 5\n#define FDD_TRAIN_BT_RSSI_LEVEL 5\n\nstruct rtw89_btc_fbtc_cysta_v4 {  \n\tu8 fver;\n\tu8 rsvd;\n\tu8 collision_cnt;  \n\tu8 except_cnt;\n\n\t__le16 skip_cnt;\n\t__le16 cycles;  \n\n\t__le16 slot_step_time[BTC_CYCLE_SLOT_MAX];  \n\t__le16 slot_cnt[CXST_MAX];  \n\t__le16 bcn_cnt[CXBCN_MAX];\n\tstruct rtw89_btc_fbtc_cycle_time_info cycle_time;\n\tstruct rtw89_btc_fbtc_cycle_leak_info leak_slot;\n\tstruct rtw89_btc_fbtc_cycle_a2dp_empty_info a2dp_ept;\n\tstruct rtw89_btc_fbtc_a2dp_trx_stat_v4 a2dp_trx[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_cycle_fddt_info fddt_trx[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_fddt_cell_status fddt_cells[FDD_TRAIN_WL_DIRECTION]\n\t\t\t\t\t\t\t [FDD_TRAIN_WL_RSSI_LEVEL]\n\t\t\t\t\t\t\t [FDD_TRAIN_BT_RSSI_LEVEL];\n\t__le32 except_map;\n} __packed;\n\nstruct rtw89_btc_fbtc_cysta_v5 {  \n\tu8 fver;\n\tu8 rsvd;\n\tu8 collision_cnt;  \n\tu8 except_cnt;\n\tu8 wl_rx_err_ratio[BTC_CYCLE_SLOT_MAX];\n\n\t__le16 skip_cnt;\n\t__le16 cycles;  \n\n\t__le16 slot_step_time[BTC_CYCLE_SLOT_MAX];  \n\t__le16 slot_cnt[CXST_MAX];  \n\t__le16 bcn_cnt[CXBCN_MAX];\n\tstruct rtw89_btc_fbtc_cycle_time_info_v5 cycle_time;\n\tstruct rtw89_btc_fbtc_cycle_leak_info leak_slot;\n\tstruct rtw89_btc_fbtc_cycle_a2dp_empty_info a2dp_ept;\n\tstruct rtw89_btc_fbtc_a2dp_trx_stat_v4 a2dp_trx[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_cycle_fddt_info_v5 fddt_trx[BTC_CYCLE_SLOT_MAX];\n\tstruct rtw89_btc_fbtc_fddt_cell_status_v5 fddt_cells[FDD_TRAIN_WL_DIRECTION]\n\t\t\t\t\t\t\t    [FDD_TRAIN_WL_RSSI_LEVEL]\n\t\t\t\t\t\t\t    [FDD_TRAIN_BT_RSSI_LEVEL];\n\t__le32 except_map;\n} __packed;\n\nunion rtw89_btc_fbtc_cysta_info {\n\tstruct rtw89_btc_fbtc_cysta_v2 v2;\n\tstruct rtw89_btc_fbtc_cysta_v3 v3;\n\tstruct rtw89_btc_fbtc_cysta_v4 v4;\n\tstruct rtw89_btc_fbtc_cysta_v5 v5;\n};\n\nstruct rtw89_btc_fbtc_cynullsta_v1 {  \n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd2;\n\t__le32 max_t[2];  \n\t__le32 avg_t[2];  \n\t__le32 result[2][4];  \n} __packed;\n\nstruct rtw89_btc_fbtc_cynullsta_v2 {  \n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd2;\n\t__le32 max_t[2];  \n\t__le32 avg_t[2];  \n\t__le32 result[2][5];  \n} __packed;\n\nunion rtw89_btc_fbtc_cynullsta_info {\n\tstruct rtw89_btc_fbtc_cynullsta_v1 v1;  \n\tstruct rtw89_btc_fbtc_cynullsta_v2 v2;\n};\n\nstruct rtw89_btc_fbtc_btver {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd2;\n\t__le32 coex_ver;  \n\t__le32 fw_ver;\n\t__le32 feature;\n} __packed;\n\nstruct rtw89_btc_fbtc_btafh {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 rsvd2;\n\tu8 afh_l[4];  \n\tu8 afh_m[4];  \n\tu8 afh_h[4];  \n} __packed;\n\nstruct rtw89_btc_fbtc_btafh_v2 {\n\tu8 fver;  \n\tu8 rsvd;\n\tu8 rsvd2;\n\tu8 map_type;\n\tu8 afh_l[4];\n\tu8 afh_m[4];\n\tu8 afh_h[4];\n\tu8 afh_le_a[4];\n\tu8 afh_le_b[4];\n} __packed;\n\nstruct rtw89_btc_fbtc_btdevinfo {\n\tu8 fver;  \n\tu8 rsvd;\n\t__le16 vendor_id;\n\t__le32 dev_name;  \n\t__le32 flush_time;\n} __packed;\n\n#define RTW89_BTC_WL_DEF_TX_PWR GENMASK(7, 0)\nstruct rtw89_btc_rf_trx_para {\n\tu32 wl_tx_power;  \n\tu32 wl_rx_gain;   \n\tu8 bt_tx_power;  \n\tu8 bt_rx_gain;   \n};\n\nstruct rtw89_btc_trx_info {\n\tu8 tx_lvl;\n\tu8 rx_lvl;\n\tu8 wl_rssi;\n\tu8 bt_rssi;\n\n\ts8 tx_power;  \n\ts8 rx_gain;   \n\ts8 bt_tx_power;  \n\ts8 bt_rx_gain;   \n\n\tu8 cn;  \n\ts8 nhm;\n\tu8 bt_profile;\n\tu8 rsvd2;\n\n\tu16 tx_rate;\n\tu16 rx_rate;\n\n\tu32 tx_tp;\n\tu32 rx_tp;\n\tu32 rx_err_ratio;\n};\n\nstruct rtw89_btc_dm {\n\tstruct rtw89_btc_fbtc_slot slot[CXST_MAX];\n\tstruct rtw89_btc_fbtc_slot slot_now[CXST_MAX];\n\tstruct rtw89_btc_fbtc_tdma tdma;\n\tstruct rtw89_btc_fbtc_tdma tdma_now;\n\tstruct rtw89_mac_ax_coex_gnt gnt;\n\tstruct rtw89_btc_init_info init_info;  \n\tstruct rtw89_btc_rf_trx_para rf_trx_para;\n\tstruct rtw89_btc_wl_tx_limit_para wl_tx_limit;\n\tstruct rtw89_btc_dm_step dm_step;\n\tstruct rtw89_btc_wl_scc_ctrl wl_scc;\n\tstruct rtw89_btc_trx_info trx_info;\n\tunion rtw89_btc_dm_error_map error;\n\tu32 cnt_dm[BTC_DCNT_NUM];\n\tu32 cnt_notify[BTC_NCNT_NUM];\n\n\tu32 update_slot_map;\n\tu32 set_ant_path;\n\n\tu32 wl_only: 1;\n\tu32 wl_fw_cx_offload: 1;\n\tu32 freerun: 1;\n\tu32 fddt_train: 1;\n\tu32 wl_ps_ctrl: 2;\n\tu32 wl_mimo_ps: 1;\n\tu32 leak_ap: 1;\n\tu32 noisy_level: 3;\n\tu32 coex_info_map: 8;\n\tu32 bt_only: 1;\n\tu32 wl_btg_rx: 1;\n\tu32 trx_para_level: 8;\n\tu32 wl_stb_chg: 1;\n\tu32 pta_owner: 1;\n\tu32 tdma_instant_excute: 1;\n\n\tu16 slot_dur[CXST_MAX];\n\n\tu8 run_reason;\n\tu8 run_action;\n\n\tu8 wl_lna2: 1;\n};\n\nstruct rtw89_btc_ctrl {\n\tu32 manual: 1;\n\tu32 igno_bt: 1;\n\tu32 always_freerun: 1;\n\tu32 trace_step: 16;\n\tu32 rsvd: 12;\n};\n\nstruct rtw89_btc_dbg {\n\t \n\tbool rb_done;\n\tu32 rb_val;\n};\n\nenum rtw89_btc_btf_fw_event {\n\tBTF_EVNT_RPT = 0,\n\tBTF_EVNT_BT_INFO = 1,\n\tBTF_EVNT_BT_SCBD = 2,\n\tBTF_EVNT_BT_REG = 3,\n\tBTF_EVNT_CX_RUNINFO = 4,\n\tBTF_EVNT_BT_PSD = 5,\n\tBTF_EVNT_BUF_OVERFLOW,\n\tBTF_EVNT_C2H_LOOPBACK,\n\tBTF_EVNT_MAX,\n};\n\nenum btf_fw_event_report {\n\tBTC_RPT_TYPE_CTRL = 0x0,\n\tBTC_RPT_TYPE_TDMA,\n\tBTC_RPT_TYPE_SLOT,\n\tBTC_RPT_TYPE_CYSTA,\n\tBTC_RPT_TYPE_STEP,\n\tBTC_RPT_TYPE_NULLSTA,\n\tBTC_RPT_TYPE_MREG,\n\tBTC_RPT_TYPE_GPIO_DBG,\n\tBTC_RPT_TYPE_BT_VER,\n\tBTC_RPT_TYPE_BT_SCAN,\n\tBTC_RPT_TYPE_BT_AFH,\n\tBTC_RPT_TYPE_BT_DEVICE,\n\tBTC_RPT_TYPE_TEST,\n\tBTC_RPT_TYPE_MAX = 31\n};\n\nenum rtw_btc_btf_reg_type {\n\tREG_MAC = 0x0,\n\tREG_BB = 0x1,\n\tREG_RF = 0x2,\n\tREG_BT_RF = 0x3,\n\tREG_BT_MODEM = 0x4,\n\tREG_BT_BLUEWIZE = 0x5,\n\tREG_BT_VENDOR = 0x6,\n\tREG_BT_LE = 0x7,\n\tREG_MAX_TYPE,\n};\n\nstruct rtw89_btc_rpt_cmn_info {\n\tu32 rx_cnt;\n\tu32 rx_len;\n\tu32 req_len;  \n\tu8 req_fver;  \n\tu8 rsp_fver;  \n\tu8 valid;\n} __packed;\n\nunion rtw89_btc_fbtc_btafh_info {\n\tstruct rtw89_btc_fbtc_btafh v1;\n\tstruct rtw89_btc_fbtc_btafh_v2 v2;\n};\n\nstruct rtw89_btc_report_ctrl_state {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_rpt_ctrl_ver_info finfo;\n};\n\nstruct rtw89_btc_rpt_fbtc_tdma {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_tdma_le32 finfo;\n};\n\nstruct rtw89_btc_rpt_fbtc_slots {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tstruct rtw89_btc_fbtc_slots finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_cysta {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_cysta_info finfo;\n};\n\nstruct rtw89_btc_rpt_fbtc_step {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_steps_info finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_nullsta {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_cynullsta_info finfo;\n};\n\nstruct rtw89_btc_rpt_fbtc_mreg {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_mreg_val finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_gpio_dbg {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tstruct rtw89_btc_fbtc_gpio_dbg finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_btver {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tstruct rtw89_btc_fbtc_btver finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_btscan {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_btscan finfo;  \n};\n\nstruct rtw89_btc_rpt_fbtc_btafh {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tunion rtw89_btc_fbtc_btafh_info finfo;\n};\n\nstruct rtw89_btc_rpt_fbtc_btdev {\n\tstruct rtw89_btc_rpt_cmn_info cinfo;  \n\tstruct rtw89_btc_fbtc_btdevinfo finfo;  \n};\n\nenum rtw89_btc_btfre_type {\n\tBTFRE_INVALID_INPUT = 0x0,  \n\tBTFRE_UNDEF_TYPE,\n\tBTFRE_EXCEPTION,\n\tBTFRE_MAX,\n};\n\nstruct rtw89_btc_btf_fwinfo {\n\tu32 cnt_c2h;\n\tu32 cnt_h2c;\n\tu32 cnt_h2c_fail;\n\tu32 event[BTF_EVNT_MAX];\n\n\tu32 err[BTFRE_MAX];\n\tu32 len_mismch;\n\tu32 fver_mismch;\n\tu32 rpt_en_map;\n\n\tstruct rtw89_btc_report_ctrl_state rpt_ctrl;\n\tstruct rtw89_btc_rpt_fbtc_tdma rpt_fbtc_tdma;\n\tstruct rtw89_btc_rpt_fbtc_slots rpt_fbtc_slots;\n\tstruct rtw89_btc_rpt_fbtc_cysta rpt_fbtc_cysta;\n\tstruct rtw89_btc_rpt_fbtc_step rpt_fbtc_step;\n\tstruct rtw89_btc_rpt_fbtc_nullsta rpt_fbtc_nullsta;\n\tstruct rtw89_btc_rpt_fbtc_mreg rpt_fbtc_mregval;\n\tstruct rtw89_btc_rpt_fbtc_gpio_dbg rpt_fbtc_gpio_dbg;\n\tstruct rtw89_btc_rpt_fbtc_btver rpt_fbtc_btver;\n\tstruct rtw89_btc_rpt_fbtc_btscan rpt_fbtc_btscan;\n\tstruct rtw89_btc_rpt_fbtc_btafh rpt_fbtc_btafh;\n\tstruct rtw89_btc_rpt_fbtc_btdev rpt_fbtc_btdev;\n};\n\nstruct rtw89_btc_ver {\n\tenum rtw89_core_chip_id chip_id;\n\tu32 fw_ver_code;\n\n\tu8 fcxbtcrpt;\n\tu8 fcxtdma;\n\tu8 fcxslots;\n\tu8 fcxcysta;\n\tu8 fcxstep;\n\tu8 fcxnullsta;\n\tu8 fcxmreg;\n\tu8 fcxgpiodbg;\n\tu8 fcxbtver;\n\tu8 fcxbtscan;\n\tu8 fcxbtafh;\n\tu8 fcxbtdevinfo;\n\tu8 fwlrole;\n\tu8 frptmap;\n\tu8 fcxctrl;\n\n\tu16 info_buf;\n\tu8 max_role_num;\n};\n\n#define RTW89_BTC_POLICY_MAXLEN 512\n\nstruct rtw89_btc {\n\tconst struct rtw89_btc_ver *ver;\n\n\tstruct rtw89_btc_cx cx;\n\tstruct rtw89_btc_dm dm;\n\tstruct rtw89_btc_ctrl ctrl;\n\tstruct rtw89_btc_module mdinfo;\n\tstruct rtw89_btc_btf_fwinfo fwinfo;\n\tstruct rtw89_btc_dbg dbg;\n\n\tstruct work_struct eapol_notify_work;\n\tstruct work_struct arp_notify_work;\n\tstruct work_struct dhcp_notify_work;\n\tstruct work_struct icmp_notify_work;\n\n\tu32 bt_req_len;\n\n\tu8 policy[RTW89_BTC_POLICY_MAXLEN];\n\tu16 policy_len;\n\tu16 policy_type;\n\tbool bt_req_en;\n\tbool update_policy_force;\n\tbool lps;\n};\n\nenum rtw89_btc_hmsg {\n\tRTW89_BTC_HMSG_TMR_EN = 0x0,\n\tRTW89_BTC_HMSG_BT_REG_READBACK = 0x1,\n\tRTW89_BTC_HMSG_SET_BT_REQ_SLOT = 0x2,\n\tRTW89_BTC_HMSG_FW_EV = 0x3,\n\tRTW89_BTC_HMSG_BT_LINK_CHG = 0x4,\n\tRTW89_BTC_HMSG_SET_BT_REQ_STBC = 0x5,\n\n\tNUM_OF_RTW89_BTC_HMSG,\n};\n\nenum rtw89_ra_mode {\n\tRTW89_RA_MODE_CCK = BIT(0),\n\tRTW89_RA_MODE_OFDM = BIT(1),\n\tRTW89_RA_MODE_HT = BIT(2),\n\tRTW89_RA_MODE_VHT = BIT(3),\n\tRTW89_RA_MODE_HE = BIT(4),\n};\n\nenum rtw89_ra_report_mode {\n\tRTW89_RA_RPT_MODE_LEGACY,\n\tRTW89_RA_RPT_MODE_HT,\n\tRTW89_RA_RPT_MODE_VHT,\n\tRTW89_RA_RPT_MODE_HE,\n};\n\nenum rtw89_dig_noisy_level {\n\tRTW89_DIG_NOISY_LEVEL0 = -1,\n\tRTW89_DIG_NOISY_LEVEL1 = 0,\n\tRTW89_DIG_NOISY_LEVEL2 = 1,\n\tRTW89_DIG_NOISY_LEVEL3 = 2,\n\tRTW89_DIG_NOISY_LEVEL_MAX = 3,\n};\n\nenum rtw89_gi_ltf {\n\tRTW89_GILTF_LGI_4XHE32 = 0,\n\tRTW89_GILTF_SGI_4XHE08 = 1,\n\tRTW89_GILTF_2XHE16 = 2,\n\tRTW89_GILTF_2XHE08 = 3,\n\tRTW89_GILTF_1XHE16 = 4,\n\tRTW89_GILTF_1XHE08 = 5,\n\tRTW89_GILTF_MAX\n};\n\nenum rtw89_rx_frame_type {\n\tRTW89_RX_TYPE_MGNT = 0,\n\tRTW89_RX_TYPE_CTRL = 1,\n\tRTW89_RX_TYPE_DATA = 2,\n\tRTW89_RX_TYPE_RSVD = 3,\n};\n\nstruct rtw89_ra_info {\n\tu8 is_dis_ra:1;\n\t \n\tu8 mode_ctrl:6;\n\tu8 bw_cap:3;  \n\tu8 macid;\n\tu8 dcm_cap:1;\n\tu8 er_cap:1;\n\tu8 init_rate_lv:2;\n\tu8 upd_all:1;\n\tu8 en_sgi:1;\n\tu8 ldpc_cap:1;\n\tu8 stbc_cap:1;\n\tu8 ss_num:3;\n\tu8 giltf:3;\n\tu8 upd_bw_nss_mask:1;\n\tu8 upd_mask:1;\n\tu64 ra_mask;  \n\t \n\tu8 band_num;\n\tu8 ra_csi_rate_en:1;\n\tu8 fixed_csi_rate_en:1;\n\tu8 cr_tbl_sel:1;\n\tu8 fix_giltf_en:1;\n\tu8 fix_giltf:3;\n\tu8 rsvd2:1;\n\tu8 csi_mcs_ss_idx;\n\tu8 csi_mode:2;\n\tu8 csi_gi_ltf:3;\n\tu8 csi_bw:3;\n};\n\n#define RTW89_PPDU_MAX_USR 4\n#define RTW89_PPDU_MAC_INFO_USR_SIZE 4\n#define RTW89_PPDU_MAC_INFO_SIZE 8\n#define RTW89_PPDU_MAC_RX_CNT_SIZE 96\n\n#define RTW89_MAX_RX_AGG_NUM 64\n#define RTW89_MAX_TX_AGG_NUM 128\n\nstruct rtw89_ampdu_params {\n\tu16 agg_num;\n\tbool amsdu;\n};\n\nstruct rtw89_ra_report {\n\tstruct rate_info txrate;\n\tu32 bit_rate;\n\tu16 hw_rate;\n\tbool might_fallback_legacy;\n};\n\nDECLARE_EWMA(rssi, 10, 16);\nDECLARE_EWMA(evm, 10, 16);\nDECLARE_EWMA(snr, 10, 16);\n\nstruct rtw89_ba_cam_entry {\n\tstruct list_head list;\n\tu8 tid;\n};\n\n#define RTW89_MAX_ADDR_CAM_NUM\t\t128\n#define RTW89_MAX_BSSID_CAM_NUM\t\t20\n#define RTW89_MAX_SEC_CAM_NUM\t\t128\n#define RTW89_MAX_BA_CAM_NUM\t\t8\n#define RTW89_SEC_CAM_IN_ADDR_CAM\t7\n\nstruct rtw89_addr_cam_entry {\n\tu8 addr_cam_idx;\n\tu8 offset;\n\tu8 len;\n\tu8 valid\t: 1;\n\tu8 addr_mask\t: 6;\n\tu8 wapi\t\t: 1;\n\tu8 mask_sel\t: 2;\n\tu8 bssid_cam_idx: 6;\n\n\tu8 sec_ent_mode;\n\tDECLARE_BITMAP(sec_cam_map, RTW89_SEC_CAM_IN_ADDR_CAM);\n\tu8 sec_ent_keyid[RTW89_SEC_CAM_IN_ADDR_CAM];\n\tu8 sec_ent[RTW89_SEC_CAM_IN_ADDR_CAM];\n\tstruct rtw89_sec_cam_entry *sec_entries[RTW89_SEC_CAM_IN_ADDR_CAM];\n};\n\nstruct rtw89_bssid_cam_entry {\n\tu8 bssid[ETH_ALEN];\n\tu8 phy_idx;\n\tu8 bssid_cam_idx;\n\tu8 offset;\n\tu8 len;\n\tu8 valid : 1;\n\tu8 num;\n};\n\nstruct rtw89_sec_cam_entry {\n\tu8 sec_cam_idx;\n\tu8 offset;\n\tu8 len;\n\tu8 type : 4;\n\tu8 ext_key : 1;\n\tu8 spp_mode : 1;\n\t \n\tu8 key[32];\n};\n\nstruct rtw89_sta {\n\tu8 mac_id;\n\tbool disassoc;\n\tbool er_cap;\n\tstruct rtw89_dev *rtwdev;\n\tstruct rtw89_vif *rtwvif;\n\tstruct rtw89_ra_info ra;\n\tstruct rtw89_ra_report ra_report;\n\tint max_agg_wait;\n\tu8 prev_rssi;\n\tstruct ewma_rssi avg_rssi;\n\tstruct ewma_rssi rssi[RF_PATH_MAX];\n\tstruct ewma_snr avg_snr;\n\tstruct ewma_evm evm_min[RF_PATH_MAX];\n\tstruct ewma_evm evm_max[RF_PATH_MAX];\n\tstruct rtw89_ampdu_params ampdu_params[IEEE80211_NUM_TIDS];\n\tstruct ieee80211_rx_status rx_status;\n\tu16 rx_hw_rate;\n\t__le32 htc_template;\n\tstruct rtw89_addr_cam_entry addr_cam;  \n\tstruct rtw89_bssid_cam_entry bssid_cam;  \n\tstruct list_head ba_cam_list;\n\tstruct sk_buff_head roc_queue;\n\n\tbool use_cfg_mask;\n\tstruct cfg80211_bitrate_mask mask;\n\n\tbool cctl_tx_time;\n\tu32 ampdu_max_time:4;\n\tbool cctl_tx_retry_limit;\n\tu32 data_tx_cnt_lmt:6;\n};\n\nstruct rtw89_efuse {\n\tbool valid;\n\tbool power_k_valid;\n\tu8 xtal_cap;\n\tu8 addr[ETH_ALEN];\n\tu8 rfe_type;\n\tchar country_code[2];\n};\n\nstruct rtw89_phy_rate_pattern {\n\tu64 ra_mask;\n\tu16 rate;\n\tu8 ra_mode;\n\tbool enable;\n};\n\nstruct rtw89_tx_wait_info {\n\tstruct rcu_head rcu_head;\n\tstruct completion completion;\n\tbool tx_done;\n};\n\nstruct rtw89_tx_skb_data {\n\tstruct rtw89_tx_wait_info __rcu *wait;\n\tu8 hci_priv[];\n};\n\n#define RTW89_ROC_IDLE_TIMEOUT 500\n#define RTW89_ROC_TX_TIMEOUT 30\nenum rtw89_roc_state {\n\tRTW89_ROC_IDLE,\n\tRTW89_ROC_NORMAL,\n\tRTW89_ROC_MGMT,\n};\n\nstruct rtw89_roc {\n\tstruct ieee80211_channel chan;\n\tstruct delayed_work roc_work;\n\tenum ieee80211_roc_type type;\n\tenum rtw89_roc_state state;\n\tint duration;\n};\n\n#define RTW89_P2P_MAX_NOA_NUM 2\n\nstruct rtw89_p2p_ie_head {\n\tu8 eid;\n\tu8 ie_len;\n\tu8 oui[3];\n\tu8 oui_type;\n} __packed;\n\nstruct rtw89_noa_attr_head {\n\tu8 attr_type;\n\t__le16 attr_len;\n\tu8 index;\n\tu8 oppps_ctwindow;\n} __packed;\n\nstruct rtw89_p2p_noa_ie {\n\tstruct rtw89_p2p_ie_head p2p_head;\n\tstruct rtw89_noa_attr_head noa_head;\n\tstruct ieee80211_p2p_noa_desc noa_desc[RTW89_P2P_MAX_NOA_NUM];\n} __packed;\n\nstruct rtw89_p2p_noa_setter {\n\tstruct rtw89_p2p_noa_ie ie;\n\tu8 noa_count;\n\tu8 noa_index;\n};\n\nstruct rtw89_vif {\n\tstruct list_head list;\n\tstruct rtw89_dev *rtwdev;\n\tstruct rtw89_roc roc;\n\tenum rtw89_sub_entity_idx sub_entity_idx;\n\tenum rtw89_reg_6ghz_power reg_6ghz_power;\n\n\tu8 mac_id;\n\tu8 port;\n\tu8 mac_addr[ETH_ALEN];\n\tu8 bssid[ETH_ALEN];\n\tu8 phy_idx;\n\tu8 mac_idx;\n\tu8 net_type;\n\tu8 wifi_role;\n\tu8 self_role;\n\tu8 wmm;\n\tu8 bcn_hit_cond;\n\tu8 hit_rule;\n\tu8 last_noa_nr;\n\tbool offchan;\n\tbool trigger;\n\tbool lsig_txop;\n\tu8 tgt_ind;\n\tu8 frm_tgt_ind;\n\tbool wowlan_pattern;\n\tbool wowlan_uc;\n\tbool wowlan_magic;\n\tbool is_hesta;\n\tbool last_a_ctrl;\n\tbool dyn_tb_bedge_en;\n\tu8 def_tri_idx;\n\tu32 tdls_peer;\n\tstruct work_struct update_beacon_work;\n\tstruct rtw89_addr_cam_entry addr_cam;\n\tstruct rtw89_bssid_cam_entry bssid_cam;\n\tstruct ieee80211_tx_queue_params tx_params[IEEE80211_NUM_ACS];\n\tstruct rtw89_traffic_stats stats;\n\tstruct rtw89_phy_rate_pattern rate_pattern;\n\tstruct cfg80211_scan_request *scan_req;\n\tstruct ieee80211_scan_ies *scan_ies;\n\tstruct list_head general_pkt_list;\n\tstruct rtw89_p2p_noa_setter p2p_noa;\n};\n\nenum rtw89_lv1_rcvy_step {\n\tRTW89_LV1_RCVY_STEP_1,\n\tRTW89_LV1_RCVY_STEP_2,\n};\n\nstruct rtw89_hci_ops {\n\tint (*tx_write)(struct rtw89_dev *rtwdev, struct rtw89_core_tx_request *tx_req);\n\tvoid (*tx_kick_off)(struct rtw89_dev *rtwdev, u8 txch);\n\tvoid (*flush_queues)(struct rtw89_dev *rtwdev, u32 queues, bool drop);\n\tvoid (*reset)(struct rtw89_dev *rtwdev);\n\tint (*start)(struct rtw89_dev *rtwdev);\n\tvoid (*stop)(struct rtw89_dev *rtwdev);\n\tvoid (*pause)(struct rtw89_dev *rtwdev, bool pause);\n\tvoid (*switch_mode)(struct rtw89_dev *rtwdev, bool low_power);\n\tvoid (*recalc_int_mit)(struct rtw89_dev *rtwdev);\n\n\tu8 (*read8)(struct rtw89_dev *rtwdev, u32 addr);\n\tu16 (*read16)(struct rtw89_dev *rtwdev, u32 addr);\n\tu32 (*read32)(struct rtw89_dev *rtwdev, u32 addr);\n\tvoid (*write8)(struct rtw89_dev *rtwdev, u32 addr, u8 data);\n\tvoid (*write16)(struct rtw89_dev *rtwdev, u32 addr, u16 data);\n\tvoid (*write32)(struct rtw89_dev *rtwdev, u32 addr, u32 data);\n\n\tint (*mac_pre_init)(struct rtw89_dev *rtwdev);\n\tint (*mac_post_init)(struct rtw89_dev *rtwdev);\n\tint (*deinit)(struct rtw89_dev *rtwdev);\n\n\tu32 (*check_and_reclaim_tx_resource)(struct rtw89_dev *rtwdev, u8 txch);\n\tint (*mac_lv1_rcvy)(struct rtw89_dev *rtwdev, enum rtw89_lv1_rcvy_step step);\n\tvoid (*dump_err_status)(struct rtw89_dev *rtwdev);\n\tint (*napi_poll)(struct napi_struct *napi, int budget);\n\n\t \n\tvoid (*recovery_start)(struct rtw89_dev *rtwdev);\n\tvoid (*recovery_complete)(struct rtw89_dev *rtwdev);\n\n\tvoid (*ctrl_txdma_ch)(struct rtw89_dev *rtwdev, bool enable);\n\tvoid (*ctrl_txdma_fw_ch)(struct rtw89_dev *rtwdev, bool enable);\n\tvoid (*ctrl_trxhci)(struct rtw89_dev *rtwdev, bool enable);\n\tint (*poll_txdma_ch)(struct rtw89_dev *rtwdev);\n\tvoid (*clr_idx_all)(struct rtw89_dev *rtwdev);\n\tvoid (*clear)(struct rtw89_dev *rtwdev, struct pci_dev *pdev);\n\tvoid (*disable_intr)(struct rtw89_dev *rtwdev);\n\tvoid (*enable_intr)(struct rtw89_dev *rtwdev);\n\tint (*rst_bdram)(struct rtw89_dev *rtwdev);\n};\n\nstruct rtw89_hci_info {\n\tconst struct rtw89_hci_ops *ops;\n\tenum rtw89_hci_type type;\n\tu32 rpwm_addr;\n\tu32 cpwm_addr;\n\tbool paused;\n};\n\nstruct rtw89_chip_ops {\n\tint (*enable_bb_rf)(struct rtw89_dev *rtwdev);\n\tint (*disable_bb_rf)(struct rtw89_dev *rtwdev);\n\tvoid (*bb_reset)(struct rtw89_dev *rtwdev,\n\t\t\t enum rtw89_phy_idx phy_idx);\n\tvoid (*bb_sethw)(struct rtw89_dev *rtwdev);\n\tu32 (*read_rf)(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t       u32 addr, u32 mask);\n\tbool (*write_rf)(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t\t u32 addr, u32 mask, u32 data);\n\tvoid (*set_channel)(struct rtw89_dev *rtwdev,\n\t\t\t    const struct rtw89_chan *chan,\n\t\t\t    enum rtw89_mac_idx mac_idx,\n\t\t\t    enum rtw89_phy_idx phy_idx);\n\tvoid (*set_channel_help)(struct rtw89_dev *rtwdev, bool enter,\n\t\t\t\t struct rtw89_channel_help_params *p,\n\t\t\t\t const struct rtw89_chan *chan,\n\t\t\t\t enum rtw89_mac_idx mac_idx,\n\t\t\t\t enum rtw89_phy_idx phy_idx);\n\tint (*read_efuse)(struct rtw89_dev *rtwdev, u8 *log_map);\n\tint (*read_phycap)(struct rtw89_dev *rtwdev, u8 *phycap_map);\n\tvoid (*fem_setup)(struct rtw89_dev *rtwdev);\n\tvoid (*rfe_gpio)(struct rtw89_dev *rtwdev);\n\tvoid (*rfk_init)(struct rtw89_dev *rtwdev);\n\tvoid (*rfk_channel)(struct rtw89_dev *rtwdev);\n\tvoid (*rfk_band_changed)(struct rtw89_dev *rtwdev,\n\t\t\t\t enum rtw89_phy_idx phy_idx);\n\tvoid (*rfk_scan)(struct rtw89_dev *rtwdev, bool start);\n\tvoid (*rfk_track)(struct rtw89_dev *rtwdev);\n\tvoid (*power_trim)(struct rtw89_dev *rtwdev);\n\tvoid (*set_txpwr)(struct rtw89_dev *rtwdev,\n\t\t\t  const struct rtw89_chan *chan,\n\t\t\t  enum rtw89_phy_idx phy_idx);\n\tvoid (*set_txpwr_ctrl)(struct rtw89_dev *rtwdev,\n\t\t\t       enum rtw89_phy_idx phy_idx);\n\tint (*init_txpwr_unit)(struct rtw89_dev *rtwdev, enum rtw89_phy_idx phy_idx);\n\tu8 (*get_thermal)(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path);\n\tvoid (*ctrl_btg)(struct rtw89_dev *rtwdev, bool btg);\n\tvoid (*query_ppdu)(struct rtw89_dev *rtwdev,\n\t\t\t   struct rtw89_rx_phy_ppdu *phy_ppdu,\n\t\t\t   struct ieee80211_rx_status *status);\n\tvoid (*bb_ctrl_btc_preagc)(struct rtw89_dev *rtwdev, bool bt_en);\n\tvoid (*cfg_txrx_path)(struct rtw89_dev *rtwdev);\n\tvoid (*set_txpwr_ul_tb_offset)(struct rtw89_dev *rtwdev,\n\t\t\t\t       s8 pw_ofst, enum rtw89_mac_idx mac_idx);\n\tint (*pwr_on_func)(struct rtw89_dev *rtwdev);\n\tint (*pwr_off_func)(struct rtw89_dev *rtwdev);\n\tvoid (*query_rxdesc)(struct rtw89_dev *rtwdev,\n\t\t\t     struct rtw89_rx_desc_info *desc_info,\n\t\t\t     u8 *data, u32 data_offset);\n\tvoid (*fill_txdesc)(struct rtw89_dev *rtwdev,\n\t\t\t    struct rtw89_tx_desc_info *desc_info,\n\t\t\t    void *txdesc);\n\tvoid (*fill_txdesc_fwcmd)(struct rtw89_dev *rtwdev,\n\t\t\t\t  struct rtw89_tx_desc_info *desc_info,\n\t\t\t\t  void *txdesc);\n\tint (*cfg_ctrl_path)(struct rtw89_dev *rtwdev, bool wl);\n\tint (*mac_cfg_gnt)(struct rtw89_dev *rtwdev,\n\t\t\t   const struct rtw89_mac_ax_coex_gnt *gnt_cfg);\n\tint (*stop_sch_tx)(struct rtw89_dev *rtwdev, u8 mac_idx,\n\t\t\t   u32 *tx_en, enum rtw89_sch_tx_sel sel);\n\tint (*resume_sch_tx)(struct rtw89_dev *rtwdev, u8 mac_idx, u32 tx_en);\n\tint (*h2c_dctl_sec_cam)(struct rtw89_dev *rtwdev,\n\t\t\t\tstruct rtw89_vif *rtwvif,\n\t\t\t\tstruct rtw89_sta *rtwsta);\n\n\tvoid (*btc_set_rfe)(struct rtw89_dev *rtwdev);\n\tvoid (*btc_init_cfg)(struct rtw89_dev *rtwdev);\n\tvoid (*btc_set_wl_pri)(struct rtw89_dev *rtwdev, u8 map, bool state);\n\tvoid (*btc_set_wl_txpwr_ctrl)(struct rtw89_dev *rtwdev, u32 txpwr_val);\n\ts8 (*btc_get_bt_rssi)(struct rtw89_dev *rtwdev, s8 val);\n\tvoid (*btc_update_bt_cnt)(struct rtw89_dev *rtwdev);\n\tvoid (*btc_wl_s1_standby)(struct rtw89_dev *rtwdev, bool state);\n\tvoid (*btc_set_policy)(struct rtw89_dev *rtwdev, u16 policy_type);\n\tvoid (*btc_set_wl_rx_gain)(struct rtw89_dev *rtwdev, u32 level);\n};\n\nenum rtw89_dma_ch {\n\tRTW89_DMA_ACH0 = 0,\n\tRTW89_DMA_ACH1 = 1,\n\tRTW89_DMA_ACH2 = 2,\n\tRTW89_DMA_ACH3 = 3,\n\tRTW89_DMA_ACH4 = 4,\n\tRTW89_DMA_ACH5 = 5,\n\tRTW89_DMA_ACH6 = 6,\n\tRTW89_DMA_ACH7 = 7,\n\tRTW89_DMA_B0MG = 8,\n\tRTW89_DMA_B0HI = 9,\n\tRTW89_DMA_B1MG = 10,\n\tRTW89_DMA_B1HI = 11,\n\tRTW89_DMA_H2C = 12,\n\tRTW89_DMA_CH_NUM = 13\n};\n\nenum rtw89_qta_mode {\n\tRTW89_QTA_SCC,\n\tRTW89_QTA_DLFW,\n\tRTW89_QTA_WOW,\n\n\t \n\tRTW89_QTA_INVALID,\n};\n\nstruct rtw89_hfc_ch_cfg {\n\tu16 min;\n\tu16 max;\n#define grp_0 0\n#define grp_1 1\n#define grp_num 2\n\tu8 grp;\n};\n\nstruct rtw89_hfc_ch_info {\n\tu16 aval;\n\tu16 used;\n};\n\nstruct rtw89_hfc_pub_cfg {\n\tu16 grp0;\n\tu16 grp1;\n\tu16 pub_max;\n\tu16 wp_thrd;\n};\n\nstruct rtw89_hfc_pub_info {\n\tu16 g0_used;\n\tu16 g1_used;\n\tu16 g0_aval;\n\tu16 g1_aval;\n\tu16 pub_aval;\n\tu16 wp_aval;\n};\n\nstruct rtw89_hfc_prec_cfg {\n\tu16 ch011_prec;\n\tu16 h2c_prec;\n\tu16 wp_ch07_prec;\n\tu16 wp_ch811_prec;\n\tu8 ch011_full_cond;\n\tu8 h2c_full_cond;\n\tu8 wp_ch07_full_cond;\n\tu8 wp_ch811_full_cond;\n};\n\nstruct rtw89_hfc_param {\n\tbool en;\n\tbool h2c_en;\n\tu8 mode;\n\tconst struct rtw89_hfc_ch_cfg *ch_cfg;\n\tstruct rtw89_hfc_ch_info ch_info[RTW89_DMA_CH_NUM];\n\tstruct rtw89_hfc_pub_cfg pub_cfg;\n\tstruct rtw89_hfc_pub_info pub_info;\n\tstruct rtw89_hfc_prec_cfg prec_cfg;\n};\n\nstruct rtw89_hfc_param_ini {\n\tconst struct rtw89_hfc_ch_cfg *ch_cfg;\n\tconst struct rtw89_hfc_pub_cfg *pub_cfg;\n\tconst struct rtw89_hfc_prec_cfg *prec_cfg;\n\tu8 mode;\n};\n\nstruct rtw89_dle_size {\n\tu16 pge_size;\n\tu16 lnk_pge_num;\n\tu16 unlnk_pge_num;\n};\n\nstruct rtw89_wde_quota {\n\tu16 hif;\n\tu16 wcpu;\n\tu16 pkt_in;\n\tu16 cpu_io;\n};\n\nstruct rtw89_ple_quota {\n\tu16 cma0_tx;\n\tu16 cma1_tx;\n\tu16 c2h;\n\tu16 h2c;\n\tu16 wcpu;\n\tu16 mpdu_proc;\n\tu16 cma0_dma;\n\tu16 cma1_dma;\n\tu16 bb_rpt;\n\tu16 wd_rel;\n\tu16 cpu_io;\n\tu16 tx_rpt;\n};\n\nstruct rtw89_dle_mem {\n\tenum rtw89_qta_mode mode;\n\tconst struct rtw89_dle_size *wde_size;\n\tconst struct rtw89_dle_size *ple_size;\n\tconst struct rtw89_wde_quota *wde_min_qt;\n\tconst struct rtw89_wde_quota *wde_max_qt;\n\tconst struct rtw89_ple_quota *ple_min_qt;\n\tconst struct rtw89_ple_quota *ple_max_qt;\n};\n\nstruct rtw89_reg_def {\n\tu32 addr;\n\tu32 mask;\n};\n\nstruct rtw89_reg2_def {\n\tu32 addr;\n\tu32 data;\n};\n\nstruct rtw89_reg3_def {\n\tu32 addr;\n\tu32 mask;\n\tu32 data;\n};\n\nstruct rtw89_reg5_def {\n\tu8 flag;  \n\tu8 path;\n\tu32 addr;\n\tu32 mask;\n\tu32 data;\n};\n\nstruct rtw89_phy_table {\n\tconst struct rtw89_reg2_def *regs;\n\tu32 n_regs;\n\tenum rtw89_rf_path rf_path;\n\tvoid (*config)(struct rtw89_dev *rtwdev, const struct rtw89_reg2_def *reg,\n\t\t       enum rtw89_rf_path rf_path, void *data);\n};\n\nstruct rtw89_txpwr_table {\n\tconst void *data;\n\tu32 size;\n\tvoid (*load)(struct rtw89_dev *rtwdev,\n\t\t     const struct rtw89_txpwr_table *tbl);\n};\n\nstruct rtw89_txpwr_rule_2ghz {\n\tconst s8 (*lmt)[RTW89_2G_BW_NUM][RTW89_NTX_NUM]\n\t\t       [RTW89_RS_LMT_NUM][RTW89_BF_NUM]\n\t\t       [RTW89_REGD_NUM][RTW89_2G_CH_NUM];\n\tconst s8 (*lmt_ru)[RTW89_RU_NUM][RTW89_NTX_NUM]\n\t\t\t  [RTW89_REGD_NUM][RTW89_2G_CH_NUM];\n};\n\nstruct rtw89_txpwr_rule_5ghz {\n\tconst s8 (*lmt)[RTW89_5G_BW_NUM][RTW89_NTX_NUM]\n\t\t       [RTW89_RS_LMT_NUM][RTW89_BF_NUM]\n\t\t       [RTW89_REGD_NUM][RTW89_5G_CH_NUM];\n\tconst s8 (*lmt_ru)[RTW89_RU_NUM][RTW89_NTX_NUM]\n\t\t\t  [RTW89_REGD_NUM][RTW89_5G_CH_NUM];\n};\n\nstruct rtw89_txpwr_rule_6ghz {\n\tconst s8 (*lmt)[RTW89_6G_BW_NUM][RTW89_NTX_NUM]\n\t\t       [RTW89_RS_LMT_NUM][RTW89_BF_NUM]\n\t\t       [RTW89_REGD_NUM][NUM_OF_RTW89_REG_6GHZ_POWER]\n\t\t       [RTW89_6G_CH_NUM];\n\tconst s8 (*lmt_ru)[RTW89_RU_NUM][RTW89_NTX_NUM]\n\t\t\t  [RTW89_REGD_NUM][NUM_OF_RTW89_REG_6GHZ_POWER]\n\t\t\t  [RTW89_6G_CH_NUM];\n};\n\nstruct rtw89_rfe_parms {\n\tstruct rtw89_txpwr_rule_2ghz rule_2ghz;\n\tstruct rtw89_txpwr_rule_5ghz rule_5ghz;\n\tstruct rtw89_txpwr_rule_6ghz rule_6ghz;\n};\n\nstruct rtw89_rfe_parms_conf {\n\tconst struct rtw89_rfe_parms *rfe_parms;\n\tu8 rfe_type;\n};\n\nstruct rtw89_page_regs {\n\tu32 hci_fc_ctrl;\n\tu32 ch_page_ctrl;\n\tu32 ach_page_ctrl;\n\tu32 ach_page_info;\n\tu32 pub_page_info3;\n\tu32 pub_page_ctrl1;\n\tu32 pub_page_ctrl2;\n\tu32 pub_page_info1;\n\tu32 pub_page_info2;\n\tu32 wp_page_ctrl1;\n\tu32 wp_page_ctrl2;\n\tu32 wp_page_info1;\n};\n\nstruct rtw89_imr_info {\n\tu32 wdrls_imr_set;\n\tu32 wsec_imr_reg;\n\tu32 wsec_imr_set;\n\tu32 mpdu_tx_imr_set;\n\tu32 mpdu_rx_imr_set;\n\tu32 sta_sch_imr_set;\n\tu32 txpktctl_imr_b0_reg;\n\tu32 txpktctl_imr_b0_clr;\n\tu32 txpktctl_imr_b0_set;\n\tu32 txpktctl_imr_b1_reg;\n\tu32 txpktctl_imr_b1_clr;\n\tu32 txpktctl_imr_b1_set;\n\tu32 wde_imr_clr;\n\tu32 wde_imr_set;\n\tu32 ple_imr_clr;\n\tu32 ple_imr_set;\n\tu32 host_disp_imr_clr;\n\tu32 host_disp_imr_set;\n\tu32 cpu_disp_imr_clr;\n\tu32 cpu_disp_imr_set;\n\tu32 other_disp_imr_clr;\n\tu32 other_disp_imr_set;\n\tu32 bbrpt_com_err_imr_reg;\n\tu32 bbrpt_chinfo_err_imr_reg;\n\tu32 bbrpt_err_imr_set;\n\tu32 bbrpt_dfs_err_imr_reg;\n\tu32 ptcl_imr_clr;\n\tu32 ptcl_imr_set;\n\tu32 cdma_imr_0_reg;\n\tu32 cdma_imr_0_clr;\n\tu32 cdma_imr_0_set;\n\tu32 cdma_imr_1_reg;\n\tu32 cdma_imr_1_clr;\n\tu32 cdma_imr_1_set;\n\tu32 phy_intf_imr_reg;\n\tu32 phy_intf_imr_clr;\n\tu32 phy_intf_imr_set;\n\tu32 rmac_imr_reg;\n\tu32 rmac_imr_clr;\n\tu32 rmac_imr_set;\n\tu32 tmac_imr_reg;\n\tu32 tmac_imr_clr;\n\tu32 tmac_imr_set;\n};\n\nstruct rtw89_xtal_info {\n\tu32 xcap_reg;\n\tu32 sc_xo_mask;\n\tu32 sc_xi_mask;\n};\n\nstruct rtw89_rrsr_cfgs {\n\tstruct rtw89_reg3_def ref_rate;\n\tstruct rtw89_reg3_def rsc;\n};\n\nstruct rtw89_dig_regs {\n\tu32 seg0_pd_reg;\n\tu32 pd_lower_bound_mask;\n\tu32 pd_spatial_reuse_en;\n\tu32 bmode_pd_reg;\n\tu32 bmode_cca_rssi_limit_en;\n\tu32 bmode_pd_lower_bound_reg;\n\tu32 bmode_rssi_nocca_low_th_mask;\n\tstruct rtw89_reg_def p0_lna_init;\n\tstruct rtw89_reg_def p1_lna_init;\n\tstruct rtw89_reg_def p0_tia_init;\n\tstruct rtw89_reg_def p1_tia_init;\n\tstruct rtw89_reg_def p0_rxb_init;\n\tstruct rtw89_reg_def p1_rxb_init;\n\tstruct rtw89_reg_def p0_p20_pagcugc_en;\n\tstruct rtw89_reg_def p0_s20_pagcugc_en;\n\tstruct rtw89_reg_def p1_p20_pagcugc_en;\n\tstruct rtw89_reg_def p1_s20_pagcugc_en;\n};\n\nstruct rtw89_phy_ul_tb_info {\n\tbool dyn_tb_tri_en;\n\tu8 def_if_bandedge;\n};\n\nstruct rtw89_antdiv_stats {\n\tstruct ewma_rssi cck_rssi_avg;\n\tstruct ewma_rssi ofdm_rssi_avg;\n\tstruct ewma_rssi non_legacy_rssi_avg;\n\tu16 pkt_cnt_cck;\n\tu16 pkt_cnt_ofdm;\n\tu16 pkt_cnt_non_legacy;\n\tu32 evm;\n};\n\nstruct rtw89_antdiv_info {\n\tstruct rtw89_antdiv_stats target_stats;\n\tstruct rtw89_antdiv_stats main_stats;\n\tstruct rtw89_antdiv_stats aux_stats;\n\tu8 training_count;\n\tu8 rssi_pre;\n\tbool get_stats;\n};\n\nenum rtw89_chanctx_state {\n\tRTW89_CHANCTX_STATE_MCC_START,\n\tRTW89_CHANCTX_STATE_MCC_STOP,\n};\n\nenum rtw89_chanctx_callbacks {\n\tRTW89_CHANCTX_CALLBACK_PLACEHOLDER,\n\n\tNUM_OF_RTW89_CHANCTX_CALLBACKS,\n};\n\nstruct rtw89_chanctx_listener {\n\tvoid (*callbacks[NUM_OF_RTW89_CHANCTX_CALLBACKS])\n\t\t(struct rtw89_dev *rtwdev, enum rtw89_chanctx_state state);\n};\n\nstruct rtw89_chip_info {\n\tenum rtw89_core_chip_id chip_id;\n\tenum rtw89_chip_gen chip_gen;\n\tconst struct rtw89_chip_ops *ops;\n\tconst struct rtw89_mac_gen_def *mac_def;\n\tconst struct rtw89_phy_gen_def *phy_def;\n\tconst char *fw_basename;\n\tu8 fw_format_max;\n\tbool try_ce_fw;\n\tu32 needed_fw_elms;\n\tu32 fifo_size;\n\tbool small_fifo_size;\n\tu32 dle_scc_rsvd_size;\n\tu16 max_amsdu_limit;\n\tbool dis_2g_40m_ul_ofdma;\n\tu32 rsvd_ple_ofst;\n\tconst struct rtw89_hfc_param_ini *hfc_param_ini;\n\tconst struct rtw89_dle_mem *dle_mem;\n\tu8 wde_qempty_acq_num;\n\tu8 wde_qempty_mgq_sel;\n\tu32 rf_base_addr[2];\n\tu8 support_chanctx_num;\n\tu8 support_bands;\n\tbool support_bw160;\n\tbool support_unii4;\n\tbool support_ul_tb_ctrl;\n\tbool hw_sec_hdr;\n\tu8 rf_path_num;\n\tu8 tx_nss;\n\tu8 rx_nss;\n\tu8 acam_num;\n\tu8 bcam_num;\n\tu8 scam_num;\n\tu8 bacam_num;\n\tu8 bacam_dynamic_num;\n\tenum rtw89_bacam_ver bacam_ver;\n\n\tu8 sec_ctrl_efuse_size;\n\tu32 physical_efuse_size;\n\tu32 logical_efuse_size;\n\tu32 limit_efuse_size;\n\tu32 dav_phy_efuse_size;\n\tu32 dav_log_efuse_size;\n\tu32 phycap_addr;\n\tu32 phycap_size;\n\n\tconst struct rtw89_pwr_cfg * const *pwr_on_seq;\n\tconst struct rtw89_pwr_cfg * const *pwr_off_seq;\n\tconst struct rtw89_phy_table *bb_table;\n\tconst struct rtw89_phy_table *bb_gain_table;\n\tconst struct rtw89_phy_table *rf_table[RF_PATH_MAX];\n\tconst struct rtw89_phy_table *nctl_table;\n\tconst struct rtw89_rfk_tbl *nctl_post_table;\n\tconst struct rtw89_txpwr_table *byr_table;\n\tconst struct rtw89_phy_dig_gain_table *dig_table;\n\tconst struct rtw89_dig_regs *dig_regs;\n\tconst struct rtw89_phy_tssi_dbw_table *tssi_dbw_table;\n\n\t \n\tconst struct rtw89_rfe_parms_conf *rfe_parms_conf;\n\tconst struct rtw89_rfe_parms *dflt_parms;\n\tconst struct rtw89_chanctx_listener *chanctx_listener;\n\n\tu8 txpwr_factor_rf;\n\tu8 txpwr_factor_mac;\n\n\tu32 para_ver;\n\tu32 wlcx_desired;\n\tu8 btcx_desired;\n\tu8 scbd;\n\tu8 mailbox;\n\n\tu8 afh_guard_ch;\n\tconst u8 *wl_rssi_thres;\n\tconst u8 *bt_rssi_thres;\n\tu8 rssi_tol;\n\n\tu8 mon_reg_num;\n\tconst struct rtw89_btc_fbtc_mreg *mon_reg;\n\tu8 rf_para_ulink_num;\n\tconst struct rtw89_btc_rf_trx_para *rf_para_ulink;\n\tu8 rf_para_dlink_num;\n\tconst struct rtw89_btc_rf_trx_para *rf_para_dlink;\n\tu8 ps_mode_supported;\n\tu8 low_power_hci_modes;\n\n\tu32 h2c_cctl_func_id;\n\tu32 hci_func_en_addr;\n\tu32 h2c_desc_size;\n\tu32 txwd_body_size;\n\tu32 h2c_ctrl_reg;\n\tconst u32 *h2c_regs;\n\tstruct rtw89_reg_def h2c_counter_reg;\n\tu32 c2h_ctrl_reg;\n\tconst u32 *c2h_regs;\n\tstruct rtw89_reg_def c2h_counter_reg;\n\tconst struct rtw89_page_regs *page_regs;\n\tbool cfo_src_fd;\n\tbool cfo_hw_comp;\n\tconst struct rtw89_reg_def *dcfo_comp;\n\tu8 dcfo_comp_sft;\n\tconst struct rtw89_imr_info *imr_info;\n\tconst struct rtw89_rrsr_cfgs *rrsr_cfgs;\n\tu32 bss_clr_map_reg;\n\tu32 dma_ch_mask;\n\tu32 edcca_lvl_reg;\n\tconst struct wiphy_wowlan_support *wowlan_stub;\n\tconst struct rtw89_xtal_info *xtal_info;\n};\n\nunion rtw89_bus_info {\n\tconst struct rtw89_pci_info *pci;\n};\n\nstruct rtw89_driver_info {\n\tconst struct rtw89_chip_info *chip;\n\tunion rtw89_bus_info bus;\n};\n\nenum rtw89_hcifc_mode {\n\tRTW89_HCIFC_POH = 0,\n\tRTW89_HCIFC_STF = 1,\n\tRTW89_HCIFC_SDIO = 2,\n\n\t \n\tRTW89_HCIFC_MODE_INVALID,\n};\n\nstruct rtw89_dle_info {\n\tenum rtw89_qta_mode qta_mode;\n\tu16 ple_pg_size;\n\tu16 c0_rx_qta;\n\tu16 c1_rx_qta;\n};\n\nenum rtw89_host_rpr_mode {\n\tRTW89_RPR_MODE_POH = 0,\n\tRTW89_RPR_MODE_STF\n};\n\n#define RTW89_COMPLETION_BUF_SIZE 24\n#define RTW89_WAIT_COND_IDLE UINT_MAX\n\nstruct rtw89_completion_data {\n\tbool err;\n\tu8 buf[RTW89_COMPLETION_BUF_SIZE];\n};\n\nstruct rtw89_wait_info {\n\tatomic_t cond;\n\tstruct completion completion;\n\tstruct rtw89_completion_data data;\n};\n\n#define RTW89_WAIT_FOR_COND_TIMEOUT msecs_to_jiffies(100)\n\nstatic inline void rtw89_init_wait(struct rtw89_wait_info *wait)\n{\n\tinit_completion(&wait->completion);\n\tatomic_set(&wait->cond, RTW89_WAIT_COND_IDLE);\n}\n\nstruct rtw89_mac_info {\n\tstruct rtw89_dle_info dle_info;\n\tstruct rtw89_hfc_param hfc_param;\n\tenum rtw89_qta_mode qta_mode;\n\tu8 rpwm_seq_num;\n\tu8 cpwm_seq_num;\n\n\t \n\tstruct rtw89_wait_info fw_ofld_wait;\n};\n\nenum rtw89_fw_type {\n\tRTW89_FW_NORMAL = 1,\n\tRTW89_FW_WOWLAN = 3,\n\tRTW89_FW_NORMAL_CE = 5,\n\tRTW89_FW_BBMCU0 = 64,\n\tRTW89_FW_BBMCU1 = 65,\n\tRTW89_FW_LOGFMT = 255,\n};\n\nenum rtw89_fw_feature {\n\tRTW89_FW_FEATURE_OLD_HT_RA_FORMAT,\n\tRTW89_FW_FEATURE_SCAN_OFFLOAD,\n\tRTW89_FW_FEATURE_TX_WAKE,\n\tRTW89_FW_FEATURE_CRASH_TRIGGER,\n\tRTW89_FW_FEATURE_NO_PACKET_DROP,\n\tRTW89_FW_FEATURE_NO_DEEP_PS,\n\tRTW89_FW_FEATURE_NO_LPS_PG,\n\tRTW89_FW_FEATURE_BEACON_FILTER,\n};\n\nstruct rtw89_fw_suit {\n\tenum rtw89_fw_type type;\n\tconst u8 *data;\n\tu32 size;\n\tu8 major_ver;\n\tu8 minor_ver;\n\tu8 sub_ver;\n\tu8 sub_idex;\n\tu16 build_year;\n\tu16 build_mon;\n\tu16 build_date;\n\tu16 build_hour;\n\tu16 build_min;\n\tu8 cmd_ver;\n\tu8 hdr_ver;\n\tu32 commitid;\n};\n\n#define RTW89_FW_VER_CODE(major, minor, sub, idx)\t\\\n\t(((major) << 24) | ((minor) << 16) | ((sub) << 8) | (idx))\n#define RTW89_FW_SUIT_VER_CODE(s)\t\\\n\tRTW89_FW_VER_CODE((s)->major_ver, (s)->minor_ver, (s)->sub_ver, (s)->sub_idex)\n\n#define RTW89_MFW_HDR_VER_CODE(mfw_hdr)\t\t\\\n\tRTW89_FW_VER_CODE((mfw_hdr)->ver.major,\t\\\n\t\t\t  (mfw_hdr)->ver.minor,\t\\\n\t\t\t  (mfw_hdr)->ver.sub,\t\\\n\t\t\t  (mfw_hdr)->ver.idx)\n\n#define RTW89_FW_HDR_VER_CODE(fw_hdr)\t\t\t\t\\\n\tRTW89_FW_VER_CODE(le32_get_bits((fw_hdr)->w1, FW_HDR_W1_MAJOR_VERSION),\t\\\n\t\t\t  le32_get_bits((fw_hdr)->w1, FW_HDR_W1_MINOR_VERSION),\t\\\n\t\t\t  le32_get_bits((fw_hdr)->w1, FW_HDR_W1_SUBVERSION),\t\\\n\t\t\t  le32_get_bits((fw_hdr)->w1, FW_HDR_W1_SUBINDEX))\n\nstruct rtw89_fw_req_info {\n\tconst struct firmware *firmware;\n\tstruct completion completion;\n};\n\nstruct rtw89_fw_log {\n\tstruct rtw89_fw_suit suit;\n\tbool enable;\n\tu32 last_fmt_id;\n\tu32 fmt_count;\n\tconst __le32 *fmt_ids;\n\tconst char *(*fmts)[];\n};\n\nstruct rtw89_fw_elm_info {\n\tstruct rtw89_phy_table *bb_tbl;\n\tstruct rtw89_phy_table *bb_gain;\n\tstruct rtw89_phy_table *rf_radio[RF_PATH_MAX];\n\tstruct rtw89_phy_table *rf_nctl;\n};\n\nstruct rtw89_fw_info {\n\tstruct rtw89_fw_req_info req;\n\tint fw_format;\n\tu8 h2c_seq;\n\tu8 rec_seq;\n\tu8 h2c_counter;\n\tu8 c2h_counter;\n\tstruct rtw89_fw_suit normal;\n\tstruct rtw89_fw_suit wowlan;\n\tstruct rtw89_fw_suit bbmcu0;\n\tstruct rtw89_fw_suit bbmcu1;\n\tstruct rtw89_fw_log log;\n\tu32 feature_map;\n\tstruct rtw89_fw_elm_info elm_info;\n};\n\n#define RTW89_CHK_FW_FEATURE(_feat, _fw) \\\n\t(!!((_fw)->feature_map & BIT(RTW89_FW_FEATURE_ ## _feat)))\n\n#define RTW89_SET_FW_FEATURE(_fw_feature, _fw) \\\n\t((_fw)->feature_map |= BIT(_fw_feature))\n\nstruct rtw89_cam_info {\n\tDECLARE_BITMAP(addr_cam_map, RTW89_MAX_ADDR_CAM_NUM);\n\tDECLARE_BITMAP(bssid_cam_map, RTW89_MAX_BSSID_CAM_NUM);\n\tDECLARE_BITMAP(sec_cam_map, RTW89_MAX_SEC_CAM_NUM);\n\tDECLARE_BITMAP(ba_cam_map, RTW89_MAX_BA_CAM_NUM);\n\tstruct rtw89_ba_cam_entry ba_cam_entry[RTW89_MAX_BA_CAM_NUM];\n};\n\nenum rtw89_sar_sources {\n\tRTW89_SAR_SOURCE_NONE,\n\tRTW89_SAR_SOURCE_COMMON,\n\n\tRTW89_SAR_SOURCE_NR,\n};\n\nenum rtw89_sar_subband {\n\tRTW89_SAR_2GHZ_SUBBAND,\n\tRTW89_SAR_5GHZ_SUBBAND_1_2,  \n\tRTW89_SAR_5GHZ_SUBBAND_2_E,  \n\tRTW89_SAR_5GHZ_SUBBAND_3,    \n\tRTW89_SAR_6GHZ_SUBBAND_5_L,  \n\tRTW89_SAR_6GHZ_SUBBAND_5_H,  \n\tRTW89_SAR_6GHZ_SUBBAND_6,    \n\tRTW89_SAR_6GHZ_SUBBAND_7_L,  \n\tRTW89_SAR_6GHZ_SUBBAND_7_H,  \n\tRTW89_SAR_6GHZ_SUBBAND_8,    \n\n\tRTW89_SAR_SUBBAND_NR,\n};\n\nstruct rtw89_sar_cfg_common {\n\tbool set[RTW89_SAR_SUBBAND_NR];\n\ts32 cfg[RTW89_SAR_SUBBAND_NR];\n};\n\nstruct rtw89_sar_info {\n\t \n\tenum rtw89_sar_sources src;\n\n\t \n\tunion {\n\t\tstruct rtw89_sar_cfg_common cfg_common;\n\t};\n};\n\nenum rtw89_tas_state {\n\tRTW89_TAS_STATE_DPR_OFF,\n\tRTW89_TAS_STATE_DPR_ON,\n\tRTW89_TAS_STATE_DPR_FORBID,\n};\n\n#define RTW89_TAS_MAX_WINDOW 50\nstruct rtw89_tas_info {\n\ts16 txpwr_history[RTW89_TAS_MAX_WINDOW];\n\ts32 total_txpwr;\n\tu8 cur_idx;\n\ts8 dpr_gap;\n\ts8 delta;\n\tenum rtw89_tas_state state;\n\tbool enable;\n};\n\nstruct rtw89_chanctx_cfg {\n\tenum rtw89_sub_entity_idx idx;\n};\n\nenum rtw89_entity_mode {\n\tRTW89_ENTITY_MODE_SCC,\n\tRTW89_ENTITY_MODE_MCC_PREPARE,\n\tRTW89_ENTITY_MODE_MCC,\n\n\tNUM_OF_RTW89_ENTITY_MODE,\n\tRTW89_ENTITY_MODE_INVALID = NUM_OF_RTW89_ENTITY_MODE,\n};\n\nstruct rtw89_sub_entity {\n\tstruct cfg80211_chan_def chandef;\n\tstruct rtw89_chan chan;\n\tstruct rtw89_chan_rcd rcd;\n\tstruct rtw89_chanctx_cfg *cfg;\n};\n\nstruct rtw89_hal {\n\tu32 rx_fltr;\n\tu8 cv;\n\tu8 acv;\n\tu32 antenna_tx;\n\tu32 antenna_rx;\n\tu8 tx_nss;\n\tu8 rx_nss;\n\tbool tx_path_diversity;\n\tbool ant_diversity;\n\tbool ant_diversity_fixed;\n\tbool support_cckpd;\n\tbool support_igi;\n\tatomic_t roc_entity_idx;\n\n\tDECLARE_BITMAP(entity_map, NUM_OF_RTW89_SUB_ENTITY);\n\tstruct rtw89_sub_entity sub[NUM_OF_RTW89_SUB_ENTITY];\n\tstruct cfg80211_chan_def roc_chandef;\n\n\tbool entity_active;\n\tenum rtw89_entity_mode entity_mode;\n\n\tu32 edcca_bak;\n};\n\n#define RTW89_MAX_MAC_ID_NUM 128\n#define RTW89_MAX_PKT_OFLD_NUM 255\n\nenum rtw89_flags {\n\tRTW89_FLAG_POWERON,\n\tRTW89_FLAG_FW_RDY,\n\tRTW89_FLAG_RUNNING,\n\tRTW89_FLAG_BFEE_MON,\n\tRTW89_FLAG_BFEE_EN,\n\tRTW89_FLAG_BFEE_TIMER_KEEP,\n\tRTW89_FLAG_NAPI_RUNNING,\n\tRTW89_FLAG_LEISURE_PS,\n\tRTW89_FLAG_LOW_POWER_MODE,\n\tRTW89_FLAG_INACTIVE_PS,\n\tRTW89_FLAG_CRASH_SIMULATING,\n\tRTW89_FLAG_SER_HANDLING,\n\tRTW89_FLAG_WOWLAN,\n\tRTW89_FLAG_FORBIDDEN_TRACK_WROK,\n\tRTW89_FLAG_CHANGING_INTERFACE,\n\n\tNUM_OF_RTW89_FLAGS,\n};\n\nenum rtw89_pkt_drop_sel {\n\tRTW89_PKT_DROP_SEL_MACID_BE_ONCE,\n\tRTW89_PKT_DROP_SEL_MACID_BK_ONCE,\n\tRTW89_PKT_DROP_SEL_MACID_VI_ONCE,\n\tRTW89_PKT_DROP_SEL_MACID_VO_ONCE,\n\tRTW89_PKT_DROP_SEL_MACID_ALL,\n\tRTW89_PKT_DROP_SEL_MG0_ONCE,\n\tRTW89_PKT_DROP_SEL_HIQ_ONCE,\n\tRTW89_PKT_DROP_SEL_HIQ_PORT,\n\tRTW89_PKT_DROP_SEL_HIQ_MBSSID,\n\tRTW89_PKT_DROP_SEL_BAND,\n\tRTW89_PKT_DROP_SEL_BAND_ONCE,\n\tRTW89_PKT_DROP_SEL_REL_MACID,\n\tRTW89_PKT_DROP_SEL_REL_HIQ_PORT,\n\tRTW89_PKT_DROP_SEL_REL_HIQ_MBSSID,\n};\n\nstruct rtw89_pkt_drop_params {\n\tenum rtw89_pkt_drop_sel sel;\n\tenum rtw89_mac_idx mac_band;\n\tu8 macid;\n\tu8 port;\n\tu8 mbssid;\n\tbool tf_trs;\n\tu32 macid_band_sel[4];\n};\n\nstruct rtw89_pkt_stat {\n\tu16 beacon_nr;\n\tu32 rx_rate_cnt[RTW89_HW_RATE_NR];\n};\n\nDECLARE_EWMA(thermal, 4, 4);\n\nstruct rtw89_phy_stat {\n\tstruct ewma_thermal avg_thermal[RF_PATH_MAX];\n\tstruct rtw89_pkt_stat cur_pkt_stat;\n\tstruct rtw89_pkt_stat last_pkt_stat;\n};\n\n#define RTW89_DACK_PATH_NR 2\n#define RTW89_DACK_IDX_NR 2\n#define RTW89_DACK_MSBK_NR 16\nstruct rtw89_dack_info {\n\tbool dack_done;\n\tu8 msbk_d[RTW89_DACK_PATH_NR][RTW89_DACK_IDX_NR][RTW89_DACK_MSBK_NR];\n\tu8 dadck_d[RTW89_DACK_PATH_NR][RTW89_DACK_IDX_NR];\n\tu16 addck_d[RTW89_DACK_PATH_NR][RTW89_DACK_IDX_NR];\n\tu16 biask_d[RTW89_DACK_PATH_NR][RTW89_DACK_IDX_NR];\n\tu32 dack_cnt;\n\tbool addck_timeout[RTW89_DACK_PATH_NR];\n\tbool dadck_timeout[RTW89_DACK_PATH_NR];\n\tbool msbk_timeout[RTW89_DACK_PATH_NR];\n};\n\n#define RTW89_IQK_CHS_NR 2\n#define RTW89_IQK_PATH_NR 4\n\nstruct rtw89_rfk_mcc_info {\n\tu8 ch[RTW89_IQK_CHS_NR];\n\tu8 band[RTW89_IQK_CHS_NR];\n\tu8 table_idx;\n};\n\nstruct rtw89_lck_info {\n\tu8 thermal[RF_PATH_MAX];\n};\n\nstruct rtw89_rx_dck_info {\n\tu8 thermal[RF_PATH_MAX];\n};\n\nstruct rtw89_iqk_info {\n\tbool lok_cor_fail[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tbool lok_fin_fail[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tbool lok_fail[RTW89_IQK_PATH_NR];\n\tbool iqk_tx_fail[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tbool iqk_rx_fail[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tu32 iqk_fail_cnt;\n\tbool is_iqk_init;\n\tu32 iqk_channel[RTW89_IQK_CHS_NR];\n\tu8 iqk_band[RTW89_IQK_PATH_NR];\n\tu8 iqk_ch[RTW89_IQK_PATH_NR];\n\tu8 iqk_bw[RTW89_IQK_PATH_NR];\n\tu8 iqk_times;\n\tu8 version;\n\tu32 nb_txcfir[RTW89_IQK_PATH_NR];\n\tu32 nb_rxcfir[RTW89_IQK_PATH_NR];\n\tu32 bp_txkresult[RTW89_IQK_PATH_NR];\n\tu32 bp_rxkresult[RTW89_IQK_PATH_NR];\n\tu32 bp_iqkenable[RTW89_IQK_PATH_NR];\n\tbool is_wb_txiqk[RTW89_IQK_PATH_NR];\n\tbool is_wb_rxiqk[RTW89_IQK_PATH_NR];\n\tbool is_nbiqk;\n\tbool iqk_fft_en;\n\tbool iqk_xym_en;\n\tbool iqk_sram_en;\n\tbool iqk_cfir_en;\n\tu32 syn1to2;\n\tu8 iqk_mcc_ch[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tu8 iqk_table_idx[RTW89_IQK_PATH_NR];\n\tu32 lok_idac[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n\tu32 lok_vbuf[RTW89_IQK_CHS_NR][RTW89_IQK_PATH_NR];\n};\n\n#define RTW89_DPK_RF_PATH 2\n#define RTW89_DPK_AVG_THERMAL_NUM 8\n#define RTW89_DPK_BKUP_NUM 2\nstruct rtw89_dpk_bkup_para {\n\tenum rtw89_band band;\n\tenum rtw89_bandwidth bw;\n\tu8 ch;\n\tbool path_ok;\n\tu8 mdpd_en;\n\tu8 txagc_dpk;\n\tu8 ther_dpk;\n\tu8 gs;\n\tu16 pwsf;\n};\n\nstruct rtw89_dpk_info {\n\tbool is_dpk_enable;\n\tbool is_dpk_reload_en;\n\tu8 dpk_gs[RTW89_PHY_MAX];\n\tu16 dc_i[RTW89_DPK_RF_PATH][RTW89_DPK_BKUP_NUM];\n\tu16 dc_q[RTW89_DPK_RF_PATH][RTW89_DPK_BKUP_NUM];\n\tu8 corr_val[RTW89_DPK_RF_PATH][RTW89_DPK_BKUP_NUM];\n\tu8 corr_idx[RTW89_DPK_RF_PATH][RTW89_DPK_BKUP_NUM];\n\tu8 cur_idx[RTW89_DPK_RF_PATH];\n\tu8 cur_k_set;\n\tstruct rtw89_dpk_bkup_para bp[RTW89_DPK_RF_PATH][RTW89_DPK_BKUP_NUM];\n};\n\nstruct rtw89_fem_info {\n\tbool elna_2g;\n\tbool elna_5g;\n\tbool epa_2g;\n\tbool epa_5g;\n\tbool epa_6g;\n};\n\nstruct rtw89_phy_ch_info {\n\tu8 rssi_min;\n\tu16 rssi_min_macid;\n\tu8 pre_rssi_min;\n\tu8 rssi_max;\n\tu16 rssi_max_macid;\n\tu8 rxsc_160;\n\tu8 rxsc_80;\n\tu8 rxsc_40;\n\tu8 rxsc_20;\n\tu8 rxsc_l;\n\tu8 is_noisy;\n};\n\nstruct rtw89_agc_gaincode_set {\n\tu8 lna_idx;\n\tu8 tia_idx;\n\tu8 rxb_idx;\n};\n\n#define IGI_RSSI_TH_NUM 5\n#define FA_TH_NUM 4\n#define LNA_GAIN_NUM 7\n#define TIA_GAIN_NUM 2\nstruct rtw89_dig_info {\n\tstruct rtw89_agc_gaincode_set cur_gaincode;\n\tbool force_gaincode_idx_en;\n\tstruct rtw89_agc_gaincode_set force_gaincode;\n\tu8 igi_rssi_th[IGI_RSSI_TH_NUM];\n\tu16 fa_th[FA_TH_NUM];\n\tu8 igi_rssi;\n\tu8 igi_fa_rssi;\n\tu8 fa_rssi_ofst;\n\tu8 dyn_igi_max;\n\tu8 dyn_igi_min;\n\tbool dyn_pd_th_en;\n\tu8 dyn_pd_th_max;\n\tu8 pd_low_th_ofst;\n\tu8 ib_pbk;\n\ts8 ib_pkpwr;\n\ts8 lna_gain_a[LNA_GAIN_NUM];\n\ts8 lna_gain_g[LNA_GAIN_NUM];\n\ts8 *lna_gain;\n\ts8 tia_gain_a[TIA_GAIN_NUM];\n\ts8 tia_gain_g[TIA_GAIN_NUM];\n\ts8 *tia_gain;\n\tbool is_linked_pre;\n\tbool bypass_dig;\n};\n\nenum rtw89_multi_cfo_mode {\n\tRTW89_PKT_BASED_AVG_MODE = 0,\n\tRTW89_ENTRY_BASED_AVG_MODE = 1,\n\tRTW89_TP_BASED_AVG_MODE = 2,\n};\n\nenum rtw89_phy_cfo_status {\n\tRTW89_PHY_DCFO_STATE_NORMAL = 0,\n\tRTW89_PHY_DCFO_STATE_ENHANCE = 1,\n\tRTW89_PHY_DCFO_STATE_HOLD = 2,\n\tRTW89_PHY_DCFO_STATE_MAX\n};\n\nenum rtw89_phy_cfo_ul_ofdma_acc_mode {\n\tRTW89_CFO_UL_OFDMA_ACC_DISABLE = 0,\n\tRTW89_CFO_UL_OFDMA_ACC_ENABLE = 1\n};\n\nstruct rtw89_cfo_tracking_info {\n\tu16 cfo_timer_ms;\n\tbool cfo_trig_by_timer_en;\n\tenum rtw89_phy_cfo_status phy_cfo_status;\n\tenum rtw89_phy_cfo_ul_ofdma_acc_mode cfo_ul_ofdma_acc_mode;\n\tu8 phy_cfo_trk_cnt;\n\tbool is_adjust;\n\tenum rtw89_multi_cfo_mode rtw89_multi_cfo_mode;\n\tbool apply_compensation;\n\tu8 crystal_cap;\n\tu8 crystal_cap_default;\n\tu8 def_x_cap;\n\ts8 x_cap_ofst;\n\tu32 sta_cfo_tolerance;\n\ts32 cfo_tail[CFO_TRACK_MAX_USER];\n\tu16 cfo_cnt[CFO_TRACK_MAX_USER];\n\ts32 cfo_avg_pre;\n\ts32 cfo_avg[CFO_TRACK_MAX_USER];\n\ts32 pre_cfo_avg[CFO_TRACK_MAX_USER];\n\ts32 dcfo_avg;\n\ts32 dcfo_avg_pre;\n\tu32 packet_count;\n\tu32 packet_count_pre;\n\ts32 residual_cfo_acc;\n\tu8 phy_cfotrk_state;\n\tu8 phy_cfotrk_cnt;\n\tbool divergence_lock_en;\n\tu8 x_cap_lb;\n\tu8 x_cap_ub;\n\tu8 lock_cnt;\n};\n\nenum rtw89_tssi_alimk_band {\n\tTSSI_ALIMK_2G = 0,\n\tTSSI_ALIMK_5GL,\n\tTSSI_ALIMK_5GM,\n\tTSSI_ALIMK_5GH,\n\tTSSI_ALIMK_MAX\n};\n\n \n#define TSSI_TRIM_CH_GROUP_NUM 8\n#define TSSI_TRIM_CH_GROUP_NUM_6G 16\n\n#define TSSI_CCK_CH_GROUP_NUM 6\n#define TSSI_MCS_2G_CH_GROUP_NUM 5\n#define TSSI_MCS_5G_CH_GROUP_NUM 14\n#define TSSI_MCS_6G_CH_GROUP_NUM 32\n#define TSSI_MCS_CH_GROUP_NUM \\\n\t(TSSI_MCS_2G_CH_GROUP_NUM + TSSI_MCS_5G_CH_GROUP_NUM)\n#define TSSI_MAX_CH_NUM 67\n#define TSSI_ALIMK_VALUE_NUM 8\n\nstruct rtw89_tssi_info {\n\tu8 thermal[RF_PATH_MAX];\n\ts8 tssi_trim[RF_PATH_MAX][TSSI_TRIM_CH_GROUP_NUM];\n\ts8 tssi_trim_6g[RF_PATH_MAX][TSSI_TRIM_CH_GROUP_NUM_6G];\n\ts8 tssi_cck[RF_PATH_MAX][TSSI_CCK_CH_GROUP_NUM];\n\ts8 tssi_mcs[RF_PATH_MAX][TSSI_MCS_CH_GROUP_NUM];\n\ts8 tssi_6g_mcs[RF_PATH_MAX][TSSI_MCS_6G_CH_GROUP_NUM];\n\ts8 extra_ofst[RF_PATH_MAX];\n\tbool tssi_tracking_check[RF_PATH_MAX];\n\tu8 default_txagc_offset[RF_PATH_MAX];\n\tu32 base_thermal[RF_PATH_MAX];\n\tbool check_backup_aligmk[RF_PATH_MAX][TSSI_MAX_CH_NUM];\n\tu32 alignment_backup_by_ch[RF_PATH_MAX][TSSI_MAX_CH_NUM][TSSI_ALIMK_VALUE_NUM];\n\tu32 alignment_value[RF_PATH_MAX][TSSI_ALIMK_MAX][TSSI_ALIMK_VALUE_NUM];\n\tbool alignment_done[RF_PATH_MAX][TSSI_ALIMK_MAX];\n\tu32 tssi_alimk_time;\n};\n\nstruct rtw89_power_trim_info {\n\tbool pg_thermal_trim;\n\tbool pg_pa_bias_trim;\n\tu8 thermal_trim[RF_PATH_MAX];\n\tu8 pa_bias_trim[RF_PATH_MAX];\n};\n\nstruct rtw89_regd {\n\tchar alpha2[3];\n\tu8 txpwr_regd[RTW89_BAND_NUM];\n};\n\nstruct rtw89_regulatory_info {\n\tconst struct rtw89_regd *regd;\n\tenum rtw89_reg_6ghz_power reg_6ghz_power;\n};\n\nenum rtw89_ifs_clm_application {\n\tRTW89_IFS_CLM_INIT = 0,\n\tRTW89_IFS_CLM_BACKGROUND = 1,\n\tRTW89_IFS_CLM_ACS = 2,\n\tRTW89_IFS_CLM_DIG = 3,\n\tRTW89_IFS_CLM_TDMA_DIG = 4,\n\tRTW89_IFS_CLM_DBG = 5,\n\tRTW89_IFS_CLM_DBG_MANUAL = 6\n};\n\nenum rtw89_env_racing_lv {\n\tRTW89_RAC_RELEASE = 0,\n\tRTW89_RAC_LV_1 = 1,\n\tRTW89_RAC_LV_2 = 2,\n\tRTW89_RAC_LV_3 = 3,\n\tRTW89_RAC_LV_4 = 4,\n\tRTW89_RAC_MAX_NUM = 5\n};\n\nstruct rtw89_ccx_para_info {\n\tenum rtw89_env_racing_lv rac_lv;\n\tu16 mntr_time;\n\tu8 nhm_manual_th_ofst;\n\tu8 nhm_manual_th0;\n\tenum rtw89_ifs_clm_application ifs_clm_app;\n\tu32 ifs_clm_manual_th_times;\n\tu32 ifs_clm_manual_th0;\n\tu8 fahm_manual_th_ofst;\n\tu8 fahm_manual_th0;\n\tu8 fahm_numer_opt;\n\tu8 fahm_denom_opt;\n};\n\nenum rtw89_ccx_edcca_opt_sc_idx {\n\tRTW89_CCX_EDCCA_SEG0_P0 = 0,\n\tRTW89_CCX_EDCCA_SEG0_S1 = 1,\n\tRTW89_CCX_EDCCA_SEG0_S2 = 2,\n\tRTW89_CCX_EDCCA_SEG0_S3 = 3,\n\tRTW89_CCX_EDCCA_SEG1_P0 = 4,\n\tRTW89_CCX_EDCCA_SEG1_S1 = 5,\n\tRTW89_CCX_EDCCA_SEG1_S2 = 6,\n\tRTW89_CCX_EDCCA_SEG1_S3 = 7\n};\n\nenum rtw89_ccx_edcca_opt_bw_idx {\n\tRTW89_CCX_EDCCA_BW20_0 = 0,\n\tRTW89_CCX_EDCCA_BW20_1 = 1,\n\tRTW89_CCX_EDCCA_BW20_2 = 2,\n\tRTW89_CCX_EDCCA_BW20_3 = 3,\n\tRTW89_CCX_EDCCA_BW20_4 = 4,\n\tRTW89_CCX_EDCCA_BW20_5 = 5,\n\tRTW89_CCX_EDCCA_BW20_6 = 6,\n\tRTW89_CCX_EDCCA_BW20_7 = 7\n};\n\n#define RTW89_NHM_TH_NUM 11\n#define RTW89_FAHM_TH_NUM 11\n#define RTW89_NHM_RPT_NUM 12\n#define RTW89_FAHM_RPT_NUM 12\n#define RTW89_IFS_CLM_NUM 4\nstruct rtw89_env_monitor_info {\n\tu8 ccx_watchdog_result;\n\tbool ccx_ongoing;\n\tu8 ccx_rac_lv;\n\tbool ccx_manual_ctrl;\n\tu16 ifs_clm_mntr_time;\n\tenum rtw89_ifs_clm_application ifs_clm_app;\n\tu16 ccx_period;\n\tu8 ccx_unit_idx;\n\tu16 ifs_clm_th_l[RTW89_IFS_CLM_NUM];\n\tu16 ifs_clm_th_h[RTW89_IFS_CLM_NUM];\n\tu16 ifs_clm_tx;\n\tu16 ifs_clm_edcca_excl_cca;\n\tu16 ifs_clm_ofdmfa;\n\tu16 ifs_clm_ofdmcca_excl_fa;\n\tu16 ifs_clm_cckfa;\n\tu16 ifs_clm_cckcca_excl_fa;\n\tu16 ifs_clm_total_ifs;\n\tu8 ifs_clm_his[RTW89_IFS_CLM_NUM];\n\tu16 ifs_clm_avg[RTW89_IFS_CLM_NUM];\n\tu16 ifs_clm_cca[RTW89_IFS_CLM_NUM];\n\tu8 ifs_clm_tx_ratio;\n\tu8 ifs_clm_edcca_excl_cca_ratio;\n\tu8 ifs_clm_cck_fa_ratio;\n\tu8 ifs_clm_ofdm_fa_ratio;\n\tu8 ifs_clm_cck_cca_excl_fa_ratio;\n\tu8 ifs_clm_ofdm_cca_excl_fa_ratio;\n\tu16 ifs_clm_cck_fa_permil;\n\tu16 ifs_clm_ofdm_fa_permil;\n\tu32 ifs_clm_ifs_avg[RTW89_IFS_CLM_NUM];\n\tu32 ifs_clm_cca_avg[RTW89_IFS_CLM_NUM];\n};\n\nenum rtw89_ser_rcvy_step {\n\tRTW89_SER_DRV_STOP_TX,\n\tRTW89_SER_DRV_STOP_RX,\n\tRTW89_SER_DRV_STOP_RUN,\n\tRTW89_SER_HAL_STOP_DMA,\n\tRTW89_SER_SUPPRESS_LOG,\n\tRTW89_NUM_OF_SER_FLAGS\n};\n\nstruct rtw89_ser {\n\tu8 state;\n\tu8 alarm_event;\n\tbool prehandle_l1;\n\n\tstruct work_struct ser_hdl_work;\n\tstruct delayed_work ser_alarm_work;\n\tconst struct state_ent *st_tbl;\n\tconst struct event_ent *ev_tbl;\n\tstruct list_head msg_q;\n\tspinlock_t msg_q_lock;  \n\tDECLARE_BITMAP(flags, RTW89_NUM_OF_SER_FLAGS);\n};\n\nenum rtw89_mac_ax_ps_mode {\n\tRTW89_MAC_AX_PS_MODE_ACTIVE = 0,\n\tRTW89_MAC_AX_PS_MODE_LEGACY = 1,\n\tRTW89_MAC_AX_PS_MODE_WMMPS  = 2,\n\tRTW89_MAC_AX_PS_MODE_MAX    = 3,\n};\n\nenum rtw89_last_rpwm_mode {\n\tRTW89_LAST_RPWM_PS        = 0x0,\n\tRTW89_LAST_RPWM_ACTIVE    = 0x6,\n};\n\nstruct rtw89_lps_parm {\n\tu8 macid;\n\tu8 psmode;  \n\tu8 lastrpwm;  \n};\n\nstruct rtw89_ppdu_sts_info {\n\tstruct sk_buff_head rx_queue[RTW89_PHY_MAX];\n\tu8 curr_rx_ppdu_cnt[RTW89_PHY_MAX];\n};\n\nstruct rtw89_early_h2c {\n\tstruct list_head list;\n\tu8 *h2c;\n\tu16 h2c_len;\n};\n\nstruct rtw89_hw_scan_info {\n\tstruct ieee80211_vif *scanning_vif;\n\tstruct list_head pkt_list[NUM_NL80211_BANDS];\n\tstruct rtw89_chan op_chan;\n\tu32 last_chan_idx;\n};\n\nenum rtw89_phy_bb_gain_band {\n\tRTW89_BB_GAIN_BAND_2G = 0,\n\tRTW89_BB_GAIN_BAND_5G_L = 1,\n\tRTW89_BB_GAIN_BAND_5G_M = 2,\n\tRTW89_BB_GAIN_BAND_5G_H = 3,\n\tRTW89_BB_GAIN_BAND_6G_L = 4,\n\tRTW89_BB_GAIN_BAND_6G_M = 5,\n\tRTW89_BB_GAIN_BAND_6G_H = 6,\n\tRTW89_BB_GAIN_BAND_6G_UH = 7,\n\n\tRTW89_BB_GAIN_BAND_NR,\n};\n\nenum rtw89_phy_bb_rxsc_num {\n\tRTW89_BB_RXSC_NUM_40 = 9,  \n\tRTW89_BB_RXSC_NUM_80 = 13,  \n\tRTW89_BB_RXSC_NUM_160 = 15,  \n};\n\nstruct rtw89_phy_bb_gain_info {\n\ts8 lna_gain[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX][LNA_GAIN_NUM];\n\ts8 tia_gain[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX][TIA_GAIN_NUM];\n\ts8 lna_gain_bypass[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX][LNA_GAIN_NUM];\n\ts8 lna_op1db[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX][LNA_GAIN_NUM];\n\ts8 tia_lna_op1db[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX]\n\t\t\t[LNA_GAIN_NUM + 1];  \n\ts8 rpl_ofst_20[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX];\n\ts8 rpl_ofst_40[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX]\n\t\t      [RTW89_BB_RXSC_NUM_40];\n\ts8 rpl_ofst_80[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX]\n\t\t      [RTW89_BB_RXSC_NUM_80];\n\ts8 rpl_ofst_160[RTW89_BB_GAIN_BAND_NR][RF_PATH_MAX]\n\t\t       [RTW89_BB_RXSC_NUM_160];\n};\n\nstruct rtw89_phy_efuse_gain {\n\tbool offset_valid;\n\tbool comp_valid;\n\ts8 offset[RF_PATH_MAX][RTW89_GAIN_OFFSET_NR];  \n\ts8 offset_base[RTW89_PHY_MAX];  \n\ts8 rssi_base[RTW89_PHY_MAX];  \n\ts8 comp[RF_PATH_MAX][RTW89_SUBBAND_NR];  \n};\n\n#define RTW89_MAX_PATTERN_NUM             18\n#define RTW89_MAX_PATTERN_MASK_SIZE       4\n#define RTW89_MAX_PATTERN_SIZE            128\n\nstruct rtw89_wow_cam_info {\n\tbool r_w;\n\tu8 idx;\n\tu32 mask[RTW89_MAX_PATTERN_MASK_SIZE];\n\tu16 crc;\n\tbool negative_pattern_match;\n\tbool skip_mac_hdr;\n\tbool uc;\n\tbool mc;\n\tbool bc;\n\tbool valid;\n};\n\nstruct rtw89_wow_param {\n\tstruct ieee80211_vif *wow_vif;\n\tDECLARE_BITMAP(flags, RTW89_WOW_FLAG_NUM);\n\tstruct rtw89_wow_cam_info patterns[RTW89_MAX_PATTERN_NUM];\n\tu8 pattern_cnt;\n};\n\nstruct rtw89_mcc_info {\n\tstruct rtw89_wait_info wait;\n};\n\nstruct rtw89_dev {\n\tstruct ieee80211_hw *hw;\n\tstruct device *dev;\n\tconst struct ieee80211_ops *ops;\n\n\tbool dbcc_en;\n\tstruct rtw89_hw_scan_info scan_info;\n\tconst struct rtw89_chip_info *chip;\n\tconst struct rtw89_pci_info *pci_info;\n\tconst struct rtw89_rfe_parms *rfe_parms;\n\tstruct rtw89_hal hal;\n\tstruct rtw89_mcc_info mcc;\n\tstruct rtw89_mac_info mac;\n\tstruct rtw89_fw_info fw;\n\tstruct rtw89_hci_info hci;\n\tstruct rtw89_efuse efuse;\n\tstruct rtw89_traffic_stats stats;\n\n\t \n\tstruct mutex mutex;\n\tstruct list_head rtwvifs_list;\n\t \n\tstruct mutex rf_mutex;\n\tstruct workqueue_struct *txq_wq;\n\tstruct work_struct txq_work;\n\tstruct delayed_work txq_reinvoke_work;\n\t \n\tspinlock_t ba_lock;\n\t \n\tstruct list_head ba_list;\n\t \n\tstruct list_head forbid_ba_list;\n\tstruct work_struct ba_work;\n\t \n\tspinlock_t rpwm_lock;\n\n\tstruct rtw89_cam_info cam_info;\n\n\tstruct sk_buff_head c2h_queue;\n\tstruct work_struct c2h_work;\n\tstruct work_struct ips_work;\n\tstruct work_struct load_firmware_work;\n\tstruct work_struct cancel_6ghz_probe_work;\n\n\tstruct list_head early_h2c_list;\n\n\tstruct rtw89_ser ser;\n\n\tDECLARE_BITMAP(hw_port, RTW89_PORT_NUM);\n\tDECLARE_BITMAP(mac_id_map, RTW89_MAX_MAC_ID_NUM);\n\tDECLARE_BITMAP(flags, NUM_OF_RTW89_FLAGS);\n\tDECLARE_BITMAP(pkt_offload, RTW89_MAX_PKT_OFLD_NUM);\n\n\tstruct rtw89_phy_stat phystat;\n\tstruct rtw89_dack_info dack;\n\tstruct rtw89_iqk_info iqk;\n\tstruct rtw89_dpk_info dpk;\n\tstruct rtw89_rfk_mcc_info rfk_mcc;\n\tstruct rtw89_lck_info lck;\n\tstruct rtw89_rx_dck_info rx_dck;\n\tbool is_tssi_mode[RF_PATH_MAX];\n\tbool is_bt_iqk_timeout;\n\n\tstruct rtw89_fem_info fem;\n\tstruct rtw89_txpwr_byrate byr[RTW89_BAND_NUM];\n\tstruct rtw89_tssi_info tssi;\n\tstruct rtw89_power_trim_info pwr_trim;\n\n\tstruct rtw89_cfo_tracking_info cfo_tracking;\n\tstruct rtw89_env_monitor_info env_monitor;\n\tstruct rtw89_dig_info dig;\n\tstruct rtw89_phy_ch_info ch_info;\n\tstruct rtw89_phy_bb_gain_info bb_gain;\n\tstruct rtw89_phy_efuse_gain efuse_gain;\n\tstruct rtw89_phy_ul_tb_info ul_tb_info;\n\tstruct rtw89_antdiv_info antdiv;\n\n\tstruct delayed_work track_work;\n\tstruct delayed_work chanctx_work;\n\tstruct delayed_work coex_act1_work;\n\tstruct delayed_work coex_bt_devinfo_work;\n\tstruct delayed_work coex_rfk_chk_work;\n\tstruct delayed_work cfo_track_work;\n\tstruct delayed_work forbid_ba_work;\n\tstruct delayed_work roc_work;\n\tstruct delayed_work antdiv_work;\n\tstruct rtw89_ppdu_sts_info ppdu_sts;\n\tu8 total_sta_assoc;\n\tbool scanning;\n\n\tstruct rtw89_regulatory_info regulatory;\n\tstruct rtw89_sar_info sar;\n\tstruct rtw89_tas_info tas;\n\n\tstruct rtw89_btc btc;\n\tenum rtw89_ps_mode ps_mode;\n\tbool lps_enabled;\n\n\tstruct rtw89_wow_param wow;\n\n\t \n\tstruct net_device netdev;\n\tstruct napi_struct napi;\n\tint napi_budget_countdown;\n\n\t \n\tu8 priv[] __aligned(sizeof(void *));\n};\n\nstatic inline int rtw89_hci_tx_write(struct rtw89_dev *rtwdev,\n\t\t\t\t     struct rtw89_core_tx_request *tx_req)\n{\n\treturn rtwdev->hci.ops->tx_write(rtwdev, tx_req);\n}\n\nstatic inline void rtw89_hci_reset(struct rtw89_dev *rtwdev)\n{\n\trtwdev->hci.ops->reset(rtwdev);\n}\n\nstatic inline int rtw89_hci_start(struct rtw89_dev *rtwdev)\n{\n\treturn rtwdev->hci.ops->start(rtwdev);\n}\n\nstatic inline void rtw89_hci_stop(struct rtw89_dev *rtwdev)\n{\n\trtwdev->hci.ops->stop(rtwdev);\n}\n\nstatic inline int rtw89_hci_deinit(struct rtw89_dev *rtwdev)\n{\n\treturn rtwdev->hci.ops->deinit(rtwdev);\n}\n\nstatic inline void rtw89_hci_pause(struct rtw89_dev *rtwdev, bool pause)\n{\n\trtwdev->hci.ops->pause(rtwdev, pause);\n}\n\nstatic inline void rtw89_hci_switch_mode(struct rtw89_dev *rtwdev, bool low_power)\n{\n\trtwdev->hci.ops->switch_mode(rtwdev, low_power);\n}\n\nstatic inline void rtw89_hci_recalc_int_mit(struct rtw89_dev *rtwdev)\n{\n\trtwdev->hci.ops->recalc_int_mit(rtwdev);\n}\n\nstatic inline u32 rtw89_hci_check_and_reclaim_tx_resource(struct rtw89_dev *rtwdev, u8 txch)\n{\n\treturn rtwdev->hci.ops->check_and_reclaim_tx_resource(rtwdev, txch);\n}\n\nstatic inline void rtw89_hci_tx_kick_off(struct rtw89_dev *rtwdev, u8 txch)\n{\n\treturn rtwdev->hci.ops->tx_kick_off(rtwdev, txch);\n}\n\nstatic inline void rtw89_hci_flush_queues(struct rtw89_dev *rtwdev, u32 queues,\n\t\t\t\t\t  bool drop)\n{\n\tif (!test_bit(RTW89_FLAG_POWERON, rtwdev->flags))\n\t\treturn;\n\n\tif (rtwdev->hci.ops->flush_queues)\n\t\treturn rtwdev->hci.ops->flush_queues(rtwdev, queues, drop);\n}\n\nstatic inline void rtw89_hci_recovery_start(struct rtw89_dev *rtwdev)\n{\n\tif (rtwdev->hci.ops->recovery_start)\n\t\trtwdev->hci.ops->recovery_start(rtwdev);\n}\n\nstatic inline void rtw89_hci_recovery_complete(struct rtw89_dev *rtwdev)\n{\n\tif (rtwdev->hci.ops->recovery_complete)\n\t\trtwdev->hci.ops->recovery_complete(rtwdev);\n}\n\nstatic inline void rtw89_hci_enable_intr(struct rtw89_dev *rtwdev)\n{\n\tif (rtwdev->hci.ops->enable_intr)\n\t\trtwdev->hci.ops->enable_intr(rtwdev);\n}\n\nstatic inline void rtw89_hci_disable_intr(struct rtw89_dev *rtwdev)\n{\n\tif (rtwdev->hci.ops->disable_intr)\n\t\trtwdev->hci.ops->disable_intr(rtwdev);\n}\n\nstatic inline void rtw89_hci_ctrl_txdma_ch(struct rtw89_dev *rtwdev, bool enable)\n{\n\tif (rtwdev->hci.ops->ctrl_txdma_ch)\n\t\trtwdev->hci.ops->ctrl_txdma_ch(rtwdev, enable);\n}\n\nstatic inline void rtw89_hci_ctrl_txdma_fw_ch(struct rtw89_dev *rtwdev, bool enable)\n{\n\tif (rtwdev->hci.ops->ctrl_txdma_fw_ch)\n\t\trtwdev->hci.ops->ctrl_txdma_fw_ch(rtwdev, enable);\n}\n\nstatic inline void rtw89_hci_ctrl_trxhci(struct rtw89_dev *rtwdev, bool enable)\n{\n\tif (rtwdev->hci.ops->ctrl_trxhci)\n\t\trtwdev->hci.ops->ctrl_trxhci(rtwdev, enable);\n}\n\nstatic inline int rtw89_hci_poll_txdma_ch(struct rtw89_dev *rtwdev)\n{\n\tint ret = 0;\n\n\tif (rtwdev->hci.ops->poll_txdma_ch)\n\t\tret = rtwdev->hci.ops->poll_txdma_ch(rtwdev);\n\treturn ret;\n}\n\nstatic inline void rtw89_hci_clr_idx_all(struct rtw89_dev *rtwdev)\n{\n\tif (rtwdev->hci.ops->clr_idx_all)\n\t\trtwdev->hci.ops->clr_idx_all(rtwdev);\n}\n\nstatic inline int rtw89_hci_rst_bdram(struct rtw89_dev *rtwdev)\n{\n\tint ret = 0;\n\n\tif (rtwdev->hci.ops->rst_bdram)\n\t\tret = rtwdev->hci.ops->rst_bdram(rtwdev);\n\treturn ret;\n}\n\nstatic inline void rtw89_hci_clear(struct rtw89_dev *rtwdev, struct pci_dev *pdev)\n{\n\tif (rtwdev->hci.ops->clear)\n\t\trtwdev->hci.ops->clear(rtwdev, pdev);\n}\n\nstatic inline\nstruct rtw89_tx_skb_data *RTW89_TX_SKB_CB(struct sk_buff *skb)\n{\n\tstruct ieee80211_tx_info *info = IEEE80211_SKB_CB(skb);\n\n\treturn (struct rtw89_tx_skb_data *)info->status.status_driver_data;\n}\n\nstatic inline u8 rtw89_read8(struct rtw89_dev *rtwdev, u32 addr)\n{\n\treturn rtwdev->hci.ops->read8(rtwdev, addr);\n}\n\nstatic inline u16 rtw89_read16(struct rtw89_dev *rtwdev, u32 addr)\n{\n\treturn rtwdev->hci.ops->read16(rtwdev, addr);\n}\n\nstatic inline u32 rtw89_read32(struct rtw89_dev *rtwdev, u32 addr)\n{\n\treturn rtwdev->hci.ops->read32(rtwdev, addr);\n}\n\nstatic inline void rtw89_write8(struct rtw89_dev *rtwdev, u32 addr, u8 data)\n{\n\trtwdev->hci.ops->write8(rtwdev, addr, data);\n}\n\nstatic inline void rtw89_write16(struct rtw89_dev *rtwdev, u32 addr, u16 data)\n{\n\trtwdev->hci.ops->write16(rtwdev, addr, data);\n}\n\nstatic inline void rtw89_write32(struct rtw89_dev *rtwdev, u32 addr, u32 data)\n{\n\trtwdev->hci.ops->write32(rtwdev, addr, data);\n}\n\nstatic inline void\nrtw89_write8_set(struct rtw89_dev *rtwdev, u32 addr, u8 bit)\n{\n\tu8 val;\n\n\tval = rtw89_read8(rtwdev, addr);\n\trtw89_write8(rtwdev, addr, val | bit);\n}\n\nstatic inline void\nrtw89_write16_set(struct rtw89_dev *rtwdev, u32 addr, u16 bit)\n{\n\tu16 val;\n\n\tval = rtw89_read16(rtwdev, addr);\n\trtw89_write16(rtwdev, addr, val | bit);\n}\n\nstatic inline void\nrtw89_write32_set(struct rtw89_dev *rtwdev, u32 addr, u32 bit)\n{\n\tu32 val;\n\n\tval = rtw89_read32(rtwdev, addr);\n\trtw89_write32(rtwdev, addr, val | bit);\n}\n\nstatic inline void\nrtw89_write8_clr(struct rtw89_dev *rtwdev, u32 addr, u8 bit)\n{\n\tu8 val;\n\n\tval = rtw89_read8(rtwdev, addr);\n\trtw89_write8(rtwdev, addr, val & ~bit);\n}\n\nstatic inline void\nrtw89_write16_clr(struct rtw89_dev *rtwdev, u32 addr, u16 bit)\n{\n\tu16 val;\n\n\tval = rtw89_read16(rtwdev, addr);\n\trtw89_write16(rtwdev, addr, val & ~bit);\n}\n\nstatic inline void\nrtw89_write32_clr(struct rtw89_dev *rtwdev, u32 addr, u32 bit)\n{\n\tu32 val;\n\n\tval = rtw89_read32(rtwdev, addr);\n\trtw89_write32(rtwdev, addr, val & ~bit);\n}\n\nstatic inline u32\nrtw89_read32_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask)\n{\n\tu32 shift = __ffs(mask);\n\tu32 orig;\n\tu32 ret;\n\n\torig = rtw89_read32(rtwdev, addr);\n\tret = (orig & mask) >> shift;\n\n\treturn ret;\n}\n\nstatic inline u16\nrtw89_read16_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask)\n{\n\tu32 shift = __ffs(mask);\n\tu32 orig;\n\tu32 ret;\n\n\torig = rtw89_read16(rtwdev, addr);\n\tret = (orig & mask) >> shift;\n\n\treturn ret;\n}\n\nstatic inline u8\nrtw89_read8_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask)\n{\n\tu32 shift = __ffs(mask);\n\tu32 orig;\n\tu32 ret;\n\n\torig = rtw89_read8(rtwdev, addr);\n\tret = (orig & mask) >> shift;\n\n\treturn ret;\n}\n\nstatic inline void\nrtw89_write32_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask, u32 data)\n{\n\tu32 shift = __ffs(mask);\n\tu32 orig;\n\tu32 set;\n\n\tWARN(addr & 0x3, \"should be 4-byte aligned, addr = 0x%08x\\n\", addr);\n\n\torig = rtw89_read32(rtwdev, addr);\n\tset = (orig & ~mask) | ((data << shift) & mask);\n\trtw89_write32(rtwdev, addr, set);\n}\n\nstatic inline void\nrtw89_write16_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask, u16 data)\n{\n\tu32 shift;\n\tu16 orig, set;\n\n\tmask &= 0xffff;\n\tshift = __ffs(mask);\n\n\torig = rtw89_read16(rtwdev, addr);\n\tset = (orig & ~mask) | ((data << shift) & mask);\n\trtw89_write16(rtwdev, addr, set);\n}\n\nstatic inline void\nrtw89_write8_mask(struct rtw89_dev *rtwdev, u32 addr, u32 mask, u8 data)\n{\n\tu32 shift;\n\tu8 orig, set;\n\n\tmask &= 0xff;\n\tshift = __ffs(mask);\n\n\torig = rtw89_read8(rtwdev, addr);\n\tset = (orig & ~mask) | ((data << shift) & mask);\n\trtw89_write8(rtwdev, addr, set);\n}\n\nstatic inline u32\nrtw89_read_rf(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t      u32 addr, u32 mask)\n{\n\tu32 val;\n\n\tmutex_lock(&rtwdev->rf_mutex);\n\tval = rtwdev->chip->ops->read_rf(rtwdev, rf_path, addr, mask);\n\tmutex_unlock(&rtwdev->rf_mutex);\n\n\treturn val;\n}\n\nstatic inline void\nrtw89_write_rf(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t       u32 addr, u32 mask, u32 data)\n{\n\tmutex_lock(&rtwdev->rf_mutex);\n\trtwdev->chip->ops->write_rf(rtwdev, rf_path, addr, mask, data);\n\tmutex_unlock(&rtwdev->rf_mutex);\n}\n\nstatic inline struct ieee80211_txq *rtw89_txq_to_txq(struct rtw89_txq *rtwtxq)\n{\n\tvoid *p = rtwtxq;\n\n\treturn container_of(p, struct ieee80211_txq, drv_priv);\n}\n\nstatic inline void rtw89_core_txq_init(struct rtw89_dev *rtwdev,\n\t\t\t\t       struct ieee80211_txq *txq)\n{\n\tstruct rtw89_txq *rtwtxq;\n\n\tif (!txq)\n\t\treturn;\n\n\trtwtxq = (struct rtw89_txq *)txq->drv_priv;\n\tINIT_LIST_HEAD(&rtwtxq->list);\n}\n\nstatic inline struct ieee80211_vif *rtwvif_to_vif(struct rtw89_vif *rtwvif)\n{\n\tvoid *p = rtwvif;\n\n\treturn container_of(p, struct ieee80211_vif, drv_priv);\n}\n\nstatic inline struct ieee80211_vif *rtwvif_to_vif_safe(struct rtw89_vif *rtwvif)\n{\n\treturn rtwvif ? rtwvif_to_vif(rtwvif) : NULL;\n}\n\nstatic inline struct rtw89_vif *vif_to_rtwvif_safe(struct ieee80211_vif *vif)\n{\n\treturn vif ? (struct rtw89_vif *)vif->drv_priv : NULL;\n}\n\nstatic inline struct ieee80211_sta *rtwsta_to_sta(struct rtw89_sta *rtwsta)\n{\n\tvoid *p = rtwsta;\n\n\treturn container_of(p, struct ieee80211_sta, drv_priv);\n}\n\nstatic inline struct ieee80211_sta *rtwsta_to_sta_safe(struct rtw89_sta *rtwsta)\n{\n\treturn rtwsta ? rtwsta_to_sta(rtwsta) : NULL;\n}\n\nstatic inline struct rtw89_sta *sta_to_rtwsta_safe(struct ieee80211_sta *sta)\n{\n\treturn sta ? (struct rtw89_sta *)sta->drv_priv : NULL;\n}\n\nstatic inline u8 rtw89_hw_to_rate_info_bw(enum rtw89_bandwidth hw_bw)\n{\n\tif (hw_bw == RTW89_CHANNEL_WIDTH_160)\n\t\treturn RATE_INFO_BW_160;\n\telse if (hw_bw == RTW89_CHANNEL_WIDTH_80)\n\t\treturn RATE_INFO_BW_80;\n\telse if (hw_bw == RTW89_CHANNEL_WIDTH_40)\n\t\treturn RATE_INFO_BW_40;\n\telse\n\t\treturn RATE_INFO_BW_20;\n}\n\nstatic inline\nenum nl80211_band rtw89_hw_to_nl80211_band(enum rtw89_band hw_band)\n{\n\tswitch (hw_band) {\n\tdefault:\n\tcase RTW89_BAND_2G:\n\t\treturn NL80211_BAND_2GHZ;\n\tcase RTW89_BAND_5G:\n\t\treturn NL80211_BAND_5GHZ;\n\tcase RTW89_BAND_6G:\n\t\treturn NL80211_BAND_6GHZ;\n\t}\n}\n\nstatic inline\nenum rtw89_band rtw89_nl80211_to_hw_band(enum nl80211_band nl_band)\n{\n\tswitch (nl_band) {\n\tdefault:\n\tcase NL80211_BAND_2GHZ:\n\t\treturn RTW89_BAND_2G;\n\tcase NL80211_BAND_5GHZ:\n\t\treturn RTW89_BAND_5G;\n\tcase NL80211_BAND_6GHZ:\n\t\treturn RTW89_BAND_6G;\n\t}\n}\n\nstatic inline\nenum rtw89_bandwidth nl_to_rtw89_bandwidth(enum nl80211_chan_width width)\n{\n\tswitch (width) {\n\tdefault:\n\t\tWARN(1, \"Not support bandwidth %d\\n\", width);\n\t\tfallthrough;\n\tcase NL80211_CHAN_WIDTH_20_NOHT:\n\tcase NL80211_CHAN_WIDTH_20:\n\t\treturn RTW89_CHANNEL_WIDTH_20;\n\tcase NL80211_CHAN_WIDTH_40:\n\t\treturn RTW89_CHANNEL_WIDTH_40;\n\tcase NL80211_CHAN_WIDTH_80:\n\t\treturn RTW89_CHANNEL_WIDTH_80;\n\tcase NL80211_CHAN_WIDTH_160:\n\t\treturn RTW89_CHANNEL_WIDTH_160;\n\t}\n}\n\nstatic inline\nstruct rtw89_addr_cam_entry *rtw89_get_addr_cam_of(struct rtw89_vif *rtwvif,\n\t\t\t\t\t\t   struct rtw89_sta *rtwsta)\n{\n\tif (rtwsta) {\n\t\tstruct ieee80211_sta *sta = rtwsta_to_sta(rtwsta);\n\n\t\tif (rtwvif->net_type == RTW89_NET_TYPE_AP_MODE || sta->tdls)\n\t\t\treturn &rtwsta->addr_cam;\n\t}\n\treturn &rtwvif->addr_cam;\n}\n\nstatic inline\nstruct rtw89_bssid_cam_entry *rtw89_get_bssid_cam_of(struct rtw89_vif *rtwvif,\n\t\t\t\t\t\t     struct rtw89_sta *rtwsta)\n{\n\tif (rtwsta) {\n\t\tstruct ieee80211_sta *sta = rtwsta_to_sta(rtwsta);\n\n\t\tif (sta->tdls)\n\t\t\treturn &rtwsta->bssid_cam;\n\t}\n\treturn &rtwvif->bssid_cam;\n}\n\nstatic inline\nvoid rtw89_chip_set_channel_prepare(struct rtw89_dev *rtwdev,\n\t\t\t\t    struct rtw89_channel_help_params *p,\n\t\t\t\t    const struct rtw89_chan *chan,\n\t\t\t\t    enum rtw89_mac_idx mac_idx,\n\t\t\t\t    enum rtw89_phy_idx phy_idx)\n{\n\trtwdev->chip->ops->set_channel_help(rtwdev, true, p, chan,\n\t\t\t\t\t    mac_idx, phy_idx);\n}\n\nstatic inline\nvoid rtw89_chip_set_channel_done(struct rtw89_dev *rtwdev,\n\t\t\t\t struct rtw89_channel_help_params *p,\n\t\t\t\t const struct rtw89_chan *chan,\n\t\t\t\t enum rtw89_mac_idx mac_idx,\n\t\t\t\t enum rtw89_phy_idx phy_idx)\n{\n\trtwdev->chip->ops->set_channel_help(rtwdev, false, p, chan,\n\t\t\t\t\t    mac_idx, phy_idx);\n}\n\nstatic inline\nconst struct cfg80211_chan_def *rtw89_chandef_get(struct rtw89_dev *rtwdev,\n\t\t\t\t\t\t  enum rtw89_sub_entity_idx idx)\n{\n\tstruct rtw89_hal *hal = &rtwdev->hal;\n\tenum rtw89_sub_entity_idx roc_idx = atomic_read(&hal->roc_entity_idx);\n\n\tif (roc_idx == idx)\n\t\treturn &hal->roc_chandef;\n\n\treturn &hal->sub[idx].chandef;\n}\n\nstatic inline\nconst struct rtw89_chan *rtw89_chan_get(struct rtw89_dev *rtwdev,\n\t\t\t\t\tenum rtw89_sub_entity_idx idx)\n{\n\tstruct rtw89_hal *hal = &rtwdev->hal;\n\n\treturn &hal->sub[idx].chan;\n}\n\nstatic inline\nconst struct rtw89_chan_rcd *rtw89_chan_rcd_get(struct rtw89_dev *rtwdev,\n\t\t\t\t\t\tenum rtw89_sub_entity_idx idx)\n{\n\tstruct rtw89_hal *hal = &rtwdev->hal;\n\n\treturn &hal->sub[idx].rcd;\n}\n\nstatic inline\nconst struct rtw89_chan *rtw89_scan_chan_get(struct rtw89_dev *rtwdev)\n{\n\tstruct ieee80211_vif *vif = rtwdev->scan_info.scanning_vif;\n\tstruct rtw89_vif *rtwvif = vif_to_rtwvif_safe(vif);\n\n\tif (rtwvif)\n\t\treturn rtw89_chan_get(rtwdev, rtwvif->sub_entity_idx);\n\telse\n\t\treturn rtw89_chan_get(rtwdev, RTW89_SUB_ENTITY_0);\n}\n\nstatic inline void rtw89_chip_fem_setup(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->fem_setup)\n\t\tchip->ops->fem_setup(rtwdev);\n}\n\nstatic inline void rtw89_chip_rfe_gpio(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfe_gpio)\n\t\tchip->ops->rfe_gpio(rtwdev);\n}\n\nstatic inline void rtw89_chip_bb_sethw(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->bb_sethw)\n\t\tchip->ops->bb_sethw(rtwdev);\n}\n\nstatic inline void rtw89_chip_rfk_init(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfk_init)\n\t\tchip->ops->rfk_init(rtwdev);\n}\n\nstatic inline void rtw89_chip_rfk_channel(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfk_channel)\n\t\tchip->ops->rfk_channel(rtwdev);\n}\n\nstatic inline void rtw89_chip_rfk_band_changed(struct rtw89_dev *rtwdev,\n\t\t\t\t\t       enum rtw89_phy_idx phy_idx)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfk_band_changed)\n\t\tchip->ops->rfk_band_changed(rtwdev, phy_idx);\n}\n\nstatic inline void rtw89_chip_rfk_scan(struct rtw89_dev *rtwdev, bool start)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfk_scan)\n\t\tchip->ops->rfk_scan(rtwdev, start);\n}\n\nstatic inline void rtw89_chip_rfk_track(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->rfk_track)\n\t\tchip->ops->rfk_track(rtwdev);\n}\n\nstatic inline void rtw89_chip_set_txpwr_ctrl(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->set_txpwr_ctrl)\n\t\tchip->ops->set_txpwr_ctrl(rtwdev,  RTW89_PHY_0);\n}\n\nstatic inline void rtw89_chip_power_trim(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->power_trim)\n\t\tchip->ops->power_trim(rtwdev);\n}\n\nstatic inline void rtw89_chip_init_txpwr_unit(struct rtw89_dev *rtwdev,\n\t\t\t\t\t      enum rtw89_phy_idx phy_idx)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->init_txpwr_unit)\n\t\tchip->ops->init_txpwr_unit(rtwdev, phy_idx);\n}\n\nstatic inline u8 rtw89_chip_get_thermal(struct rtw89_dev *rtwdev,\n\t\t\t\t\tenum rtw89_rf_path rf_path)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (!chip->ops->get_thermal)\n\t\treturn 0x10;\n\n\treturn chip->ops->get_thermal(rtwdev, rf_path);\n}\n\nstatic inline void rtw89_chip_query_ppdu(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct rtw89_rx_phy_ppdu *phy_ppdu,\n\t\t\t\t\t struct ieee80211_rx_status *status)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->query_ppdu)\n\t\tchip->ops->query_ppdu(rtwdev, phy_ppdu, status);\n}\n\nstatic inline void rtw89_chip_bb_ctrl_btc_preagc(struct rtw89_dev *rtwdev,\n\t\t\t\t\t\t bool bt_en)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->bb_ctrl_btc_preagc)\n\t\tchip->ops->bb_ctrl_btc_preagc(rtwdev, bt_en);\n}\n\nstatic inline void rtw89_chip_cfg_txrx_path(struct rtw89_dev *rtwdev)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->cfg_txrx_path)\n\t\tchip->ops->cfg_txrx_path(rtwdev);\n}\n\nstatic inline\nvoid rtw89_chip_cfg_txpwr_ul_tb_offset(struct rtw89_dev *rtwdev,\n\t\t\t\t       struct ieee80211_vif *vif)\n{\n\tstruct rtw89_vif *rtwvif = (struct rtw89_vif *)vif->drv_priv;\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (!vif->bss_conf.he_support || !vif->cfg.assoc)\n\t\treturn;\n\n\tif (chip->ops->set_txpwr_ul_tb_offset)\n\t\tchip->ops->set_txpwr_ul_tb_offset(rtwdev, 0, rtwvif->mac_idx);\n}\n\nstatic inline void rtw89_load_txpwr_table(struct rtw89_dev *rtwdev,\n\t\t\t\t\t  const struct rtw89_txpwr_table *tbl)\n{\n\ttbl->load(rtwdev, tbl);\n}\n\nstatic inline u8 rtw89_regd_get(struct rtw89_dev *rtwdev, u8 band)\n{\n\tconst struct rtw89_regd *regd = rtwdev->regulatory.regd;\n\n\treturn regd->txpwr_regd[band];\n}\n\nstatic inline void rtw89_ctrl_btg(struct rtw89_dev *rtwdev, bool btg)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (chip->ops->ctrl_btg)\n\t\tchip->ops->ctrl_btg(rtwdev, btg);\n}\n\nstatic inline\nvoid rtw89_chip_query_rxdesc(struct rtw89_dev *rtwdev,\n\t\t\t     struct rtw89_rx_desc_info *desc_info,\n\t\t\t     u8 *data, u32 data_offset)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->query_rxdesc(rtwdev, desc_info, data, data_offset);\n}\n\nstatic inline\nvoid rtw89_chip_fill_txdesc(struct rtw89_dev *rtwdev,\n\t\t\t    struct rtw89_tx_desc_info *desc_info,\n\t\t\t    void *txdesc)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->fill_txdesc(rtwdev, desc_info, txdesc);\n}\n\nstatic inline\nvoid rtw89_chip_fill_txdesc_fwcmd(struct rtw89_dev *rtwdev,\n\t\t\t\t  struct rtw89_tx_desc_info *desc_info,\n\t\t\t\t  void *txdesc)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->fill_txdesc_fwcmd(rtwdev, desc_info, txdesc);\n}\n\nstatic inline\nvoid rtw89_chip_mac_cfg_gnt(struct rtw89_dev *rtwdev,\n\t\t\t    const struct rtw89_mac_ax_coex_gnt *gnt_cfg)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->mac_cfg_gnt(rtwdev, gnt_cfg);\n}\n\nstatic inline void rtw89_chip_cfg_ctrl_path(struct rtw89_dev *rtwdev, bool wl)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tchip->ops->cfg_ctrl_path(rtwdev, wl);\n}\n\nstatic inline\nint rtw89_chip_stop_sch_tx(struct rtw89_dev *rtwdev, u8 mac_idx,\n\t\t\t   u32 *tx_en, enum rtw89_sch_tx_sel sel)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\treturn chip->ops->stop_sch_tx(rtwdev, mac_idx, tx_en, sel);\n}\n\nstatic inline\nint rtw89_chip_resume_sch_tx(struct rtw89_dev *rtwdev, u8 mac_idx, u32 tx_en)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\treturn chip->ops->resume_sch_tx(rtwdev, mac_idx, tx_en);\n}\n\nstatic inline\nint rtw89_chip_h2c_dctl_sec_cam(struct rtw89_dev *rtwdev,\n\t\t\t\tstruct rtw89_vif *rtwvif,\n\t\t\t\tstruct rtw89_sta *rtwsta)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\n\tif (!chip->ops->h2c_dctl_sec_cam)\n\t\treturn 0;\n\treturn chip->ops->h2c_dctl_sec_cam(rtwdev, rtwvif, rtwsta);\n}\n\nstatic inline u8 *get_hdr_bssid(struct ieee80211_hdr *hdr)\n{\n\t__le16 fc = hdr->frame_control;\n\n\tif (ieee80211_has_tods(fc))\n\t\treturn hdr->addr1;\n\telse if (ieee80211_has_fromds(fc))\n\t\treturn hdr->addr2;\n\telse\n\t\treturn hdr->addr3;\n}\n\nstatic inline bool rtw89_sta_has_beamformer_cap(struct ieee80211_sta *sta)\n{\n\tif ((sta->deflink.vht_cap.cap & IEEE80211_VHT_CAP_MU_BEAMFORMER_CAPABLE) ||\n\t    (sta->deflink.vht_cap.cap & IEEE80211_VHT_CAP_SU_BEAMFORMER_CAPABLE) ||\n\t    (sta->deflink.he_cap.he_cap_elem.phy_cap_info[3] &\n\t\t\tIEEE80211_HE_PHY_CAP3_SU_BEAMFORMER) ||\n\t    (sta->deflink.he_cap.he_cap_elem.phy_cap_info[4] &\n\t\t\tIEEE80211_HE_PHY_CAP4_MU_BEAMFORMER))\n\t\treturn true;\n\treturn false;\n}\n\nstatic inline struct rtw89_fw_suit *rtw89_fw_suit_get(struct rtw89_dev *rtwdev,\n\t\t\t\t\t\t      enum rtw89_fw_type type)\n{\n\tstruct rtw89_fw_info *fw_info = &rtwdev->fw;\n\n\tswitch (type) {\n\tcase RTW89_FW_WOWLAN:\n\t\treturn &fw_info->wowlan;\n\tcase RTW89_FW_LOGFMT:\n\t\treturn &fw_info->log.suit;\n\tcase RTW89_FW_BBMCU0:\n\t\treturn &fw_info->bbmcu0;\n\tcase RTW89_FW_BBMCU1:\n\t\treturn &fw_info->bbmcu1;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn &fw_info->normal;\n}\n\nstatic inline struct sk_buff *rtw89_alloc_skb_for_rx(struct rtw89_dev *rtwdev,\n\t\t\t\t\t\t     unsigned int length)\n{\n\tstruct sk_buff *skb;\n\n\tif (rtwdev->hw->conf.flags & IEEE80211_CONF_MONITOR) {\n\t\tskb = dev_alloc_skb(length + RTW89_RADIOTAP_ROOM);\n\t\tif (!skb)\n\t\t\treturn NULL;\n\n\t\tskb_reserve(skb, RTW89_RADIOTAP_ROOM);\n\t\treturn skb;\n\t}\n\n\treturn dev_alloc_skb(length);\n}\n\nstatic inline void rtw89_core_tx_wait_complete(struct rtw89_dev *rtwdev,\n\t\t\t\t\t       struct rtw89_tx_skb_data *skb_data,\n\t\t\t\t\t       bool tx_done)\n{\n\tstruct rtw89_tx_wait_info *wait;\n\n\trcu_read_lock();\n\n\twait = rcu_dereference(skb_data->wait);\n\tif (!wait)\n\t\tgoto out;\n\n\twait->tx_done = tx_done;\n\tcomplete(&wait->completion);\n\nout:\n\trcu_read_unlock();\n}\n\nint rtw89_core_tx_write(struct rtw89_dev *rtwdev, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, struct sk_buff *skb, int *qsel);\nint rtw89_h2c_tx(struct rtw89_dev *rtwdev,\n\t\t struct sk_buff *skb, bool fwdl);\nvoid rtw89_core_tx_kick_off(struct rtw89_dev *rtwdev, u8 qsel);\nint rtw89_core_tx_kick_off_and_wait(struct rtw89_dev *rtwdev, struct sk_buff *skb,\n\t\t\t\t    int qsel, unsigned int timeout);\nvoid rtw89_core_fill_txdesc(struct rtw89_dev *rtwdev,\n\t\t\t    struct rtw89_tx_desc_info *desc_info,\n\t\t\t    void *txdesc);\nvoid rtw89_core_fill_txdesc_v1(struct rtw89_dev *rtwdev,\n\t\t\t       struct rtw89_tx_desc_info *desc_info,\n\t\t\t       void *txdesc);\nvoid rtw89_core_fill_txdesc_fwcmd_v1(struct rtw89_dev *rtwdev,\n\t\t\t\t     struct rtw89_tx_desc_info *desc_info,\n\t\t\t\t     void *txdesc);\nvoid rtw89_core_rx(struct rtw89_dev *rtwdev,\n\t\t   struct rtw89_rx_desc_info *desc_info,\n\t\t   struct sk_buff *skb);\nvoid rtw89_core_query_rxdesc(struct rtw89_dev *rtwdev,\n\t\t\t     struct rtw89_rx_desc_info *desc_info,\n\t\t\t     u8 *data, u32 data_offset);\nvoid rtw89_core_napi_start(struct rtw89_dev *rtwdev);\nvoid rtw89_core_napi_stop(struct rtw89_dev *rtwdev);\nvoid rtw89_core_napi_init(struct rtw89_dev *rtwdev);\nvoid rtw89_core_napi_deinit(struct rtw89_dev *rtwdev);\nint rtw89_core_sta_add(struct rtw89_dev *rtwdev,\n\t\t       struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta);\nint rtw89_core_sta_assoc(struct rtw89_dev *rtwdev,\n\t\t\t struct ieee80211_vif *vif,\n\t\t\t struct ieee80211_sta *sta);\nint rtw89_core_sta_disassoc(struct rtw89_dev *rtwdev,\n\t\t\t    struct ieee80211_vif *vif,\n\t\t\t    struct ieee80211_sta *sta);\nint rtw89_core_sta_disconnect(struct rtw89_dev *rtwdev,\n\t\t\t      struct ieee80211_vif *vif,\n\t\t\t      struct ieee80211_sta *sta);\nint rtw89_core_sta_remove(struct rtw89_dev *rtwdev,\n\t\t\t  struct ieee80211_vif *vif,\n\t\t\t  struct ieee80211_sta *sta);\nvoid rtw89_core_set_tid_config(struct rtw89_dev *rtwdev,\n\t\t\t       struct ieee80211_sta *sta,\n\t\t\t       struct cfg80211_tid_config *tid_config);\nint rtw89_core_init(struct rtw89_dev *rtwdev);\nvoid rtw89_core_deinit(struct rtw89_dev *rtwdev);\nint rtw89_core_register(struct rtw89_dev *rtwdev);\nvoid rtw89_core_unregister(struct rtw89_dev *rtwdev);\nstruct rtw89_dev *rtw89_alloc_ieee80211_hw(struct device *device,\n\t\t\t\t\t   u32 bus_data_size,\n\t\t\t\t\t   const struct rtw89_chip_info *chip);\nvoid rtw89_free_ieee80211_hw(struct rtw89_dev *rtwdev);\nvoid rtw89_core_set_chip_txpwr(struct rtw89_dev *rtwdev);\nvoid rtw89_get_default_chandef(struct cfg80211_chan_def *chandef);\nvoid rtw89_get_channel_params(const struct cfg80211_chan_def *chandef,\n\t\t\t      struct rtw89_chan *chan);\nvoid rtw89_set_channel(struct rtw89_dev *rtwdev);\nvoid rtw89_get_channel(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif,\n\t\t       struct rtw89_chan *chan);\nu8 rtw89_core_acquire_bit_map(unsigned long *addr, unsigned long size);\nvoid rtw89_core_release_bit_map(unsigned long *addr, u8 bit);\nvoid rtw89_core_release_all_bits_map(unsigned long *addr, unsigned int nbits);\nint rtw89_core_acquire_sta_ba_entry(struct rtw89_dev *rtwdev,\n\t\t\t\t    struct rtw89_sta *rtwsta, u8 tid, u8 *cam_idx);\nint rtw89_core_release_sta_ba_entry(struct rtw89_dev *rtwdev,\n\t\t\t\t    struct rtw89_sta *rtwsta, u8 tid, u8 *cam_idx);\nvoid rtw89_vif_type_mapping(struct ieee80211_vif *vif, bool assoc);\nint rtw89_chip_info_setup(struct rtw89_dev *rtwdev);\nbool rtw89_ra_report_to_bitrate(struct rtw89_dev *rtwdev, u8 rpt_rate, u16 *bitrate);\nint rtw89_regd_setup(struct rtw89_dev *rtwdev);\nint rtw89_regd_init(struct rtw89_dev *rtwdev,\n\t\t    void (*reg_notifier)(struct wiphy *wiphy, struct regulatory_request *request));\nvoid rtw89_regd_notifier(struct wiphy *wiphy, struct regulatory_request *request);\nvoid rtw89_traffic_stats_init(struct rtw89_dev *rtwdev,\n\t\t\t      struct rtw89_traffic_stats *stats);\nint rtw89_wait_for_cond(struct rtw89_wait_info *wait, unsigned int cond);\nvoid rtw89_complete_cond(struct rtw89_wait_info *wait, unsigned int cond,\n\t\t\t const struct rtw89_completion_data *data);\nint rtw89_core_start(struct rtw89_dev *rtwdev);\nvoid rtw89_core_stop(struct rtw89_dev *rtwdev);\nvoid rtw89_core_update_beacon_work(struct work_struct *work);\nvoid rtw89_roc_work(struct work_struct *work);\nvoid rtw89_roc_start(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif);\nvoid rtw89_roc_end(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif);\nvoid rtw89_core_scan_start(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif,\n\t\t\t   const u8 *mac_addr, bool hw_scan);\nvoid rtw89_core_scan_complete(struct rtw89_dev *rtwdev,\n\t\t\t      struct ieee80211_vif *vif, bool hw_scan);\nvoid rtw89_reg_6ghz_power_recalc(struct rtw89_dev *rtwdev,\n\t\t\t\t struct rtw89_vif *rtwvif, bool active);\nvoid rtw89_core_ntfy_btc_event(struct rtw89_dev *rtwdev, enum rtw89_btc_hmsg event);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}