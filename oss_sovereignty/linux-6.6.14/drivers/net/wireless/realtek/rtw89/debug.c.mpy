{
  "module_name": "debug.c",
  "hash_id": "799e94a4aeb8dc60e4ea8a5e67b5b8ab60585488bb2856b405e0e2bf0132f040",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/debug.c",
  "human_readable_source": "\n \n\n#include <linux/vmalloc.h>\n\n#include \"coex.h\"\n#include \"debug.h\"\n#include \"fw.h\"\n#include \"mac.h\"\n#include \"pci.h\"\n#include \"ps.h\"\n#include \"reg.h\"\n#include \"sar.h\"\n\n#ifdef CONFIG_RTW89_DEBUGMSG\nunsigned int rtw89_debug_mask;\nEXPORT_SYMBOL(rtw89_debug_mask);\nmodule_param_named(debug_mask, rtw89_debug_mask, uint, 0644);\nMODULE_PARM_DESC(debug_mask, \"Debugging mask\");\n#endif\n\n#ifdef CONFIG_RTW89_DEBUGFS\nstruct rtw89_debugfs_priv {\n\tstruct rtw89_dev *rtwdev;\n\tint (*cb_read)(struct seq_file *m, void *v);\n\tssize_t (*cb_write)(struct file *filp, const char __user *buffer,\n\t\t\t    size_t count, loff_t *loff);\n\tunion {\n\t\tu32 cb_data;\n\t\tstruct {\n\t\t\tu32 addr;\n\t\t\tu32 len;\n\t\t} read_reg;\n\t\tstruct {\n\t\t\tu32 addr;\n\t\t\tu32 mask;\n\t\t\tu8 path;\n\t\t} read_rf;\n\t\tstruct {\n\t\t\tu8 ss_dbg:1;\n\t\t\tu8 dle_dbg:1;\n\t\t\tu8 dmac_dbg:1;\n\t\t\tu8 cmac_dbg:1;\n\t\t\tu8 dbg_port:1;\n\t\t} dbgpkg_en;\n\t\tstruct {\n\t\t\tu32 start;\n\t\t\tu32 len;\n\t\t\tu8 sel;\n\t\t} mac_mem;\n\t};\n};\n\nstatic const u16 rtw89_rate_info_bw_to_mhz_map[] = {\n\t[RATE_INFO_BW_20] = 20,\n\t[RATE_INFO_BW_40] = 40,\n\t[RATE_INFO_BW_80] = 80,\n\t[RATE_INFO_BW_160] = 160,\n\t[RATE_INFO_BW_320] = 320,\n};\n\nstatic u16 rtw89_rate_info_bw_to_mhz(enum rate_info_bw bw)\n{\n\tif (bw < ARRAY_SIZE(rtw89_rate_info_bw_to_mhz_map))\n\t\treturn rtw89_rate_info_bw_to_mhz_map[bw];\n\n\treturn 0;\n}\n\nstatic int rtw89_debugfs_single_show(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\n\treturn debugfs_priv->cb_read(m, v);\n}\n\nstatic ssize_t rtw89_debugfs_single_write(struct file *filp,\n\t\t\t\t\t  const char __user *buffer,\n\t\t\t\t\t  size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\n\treturn debugfs_priv->cb_write(filp, buffer, count, loff);\n}\n\nstatic ssize_t rtw89_debugfs_seq_file_write(struct file *filp,\n\t\t\t\t\t    const char __user *buffer,\n\t\t\t\t\t    size_t count, loff_t *loff)\n{\n\tstruct seq_file *seqpriv = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = seqpriv->private;\n\n\treturn debugfs_priv->cb_write(filp, buffer, count, loff);\n}\n\nstatic int rtw89_debugfs_single_open(struct inode *inode, struct file *filp)\n{\n\treturn single_open(filp, rtw89_debugfs_single_show, inode->i_private);\n}\n\nstatic int rtw89_debugfs_close(struct inode *inode, struct file *filp)\n{\n\treturn 0;\n}\n\nstatic const struct file_operations file_ops_single_r = {\n\t.owner = THIS_MODULE,\n\t.open = rtw89_debugfs_single_open,\n\t.read = seq_read,\n\t.llseek = seq_lseek,\n\t.release = single_release,\n};\n\nstatic const struct file_operations file_ops_common_rw = {\n\t.owner = THIS_MODULE,\n\t.open = rtw89_debugfs_single_open,\n\t.release = single_release,\n\t.read = seq_read,\n\t.llseek = seq_lseek,\n\t.write = rtw89_debugfs_seq_file_write,\n};\n\nstatic const struct file_operations file_ops_single_w = {\n\t.owner = THIS_MODULE,\n\t.write = rtw89_debugfs_single_write,\n\t.open = simple_open,\n\t.release = rtw89_debugfs_close,\n};\n\nstatic ssize_t\nrtw89_debug_priv_read_reg_select(struct file *filp,\n\t\t\t\t const char __user *user_buf,\n\t\t\t\t size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tu32 addr, len;\n\tint num;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%x %x\", &addr, &len);\n\tif (num != 2) {\n\t\trtw89_info(rtwdev, \"invalid format: <addr> <len>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tdebugfs_priv->read_reg.addr = addr;\n\tdebugfs_priv->read_reg.len = len;\n\n\trtw89_info(rtwdev, \"select read %d bytes from 0x%08x\\n\", len, addr);\n\n\treturn count;\n}\n\nstatic int rtw89_debug_priv_read_reg_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tu32 addr, end, data, k;\n\tu32 len;\n\n\tlen = debugfs_priv->read_reg.len;\n\taddr = debugfs_priv->read_reg.addr;\n\n\tif (len > 4)\n\t\tgoto ndata;\n\n\tswitch (len) {\n\tcase 1:\n\t\tdata = rtw89_read8(rtwdev, addr);\n\t\tbreak;\n\tcase 2:\n\t\tdata = rtw89_read16(rtwdev, addr);\n\t\tbreak;\n\tcase 4:\n\t\tdata = rtw89_read32(rtwdev, addr);\n\t\tbreak;\n\tdefault:\n\t\trtw89_info(rtwdev, \"invalid read reg len %d\\n\", len);\n\t\treturn -EINVAL;\n\t}\n\n\tseq_printf(m, \"get %d bytes at 0x%08x=0x%08x\\n\", len, addr, data);\n\n\treturn 0;\n\nndata:\n\tend = addr + len;\n\n\tfor (; addr < end; addr += 16) {\n\t\tseq_printf(m, \"%08xh : \", 0x18600000 + addr);\n\t\tfor (k = 0; k < 16; k += 4) {\n\t\t\tdata = rtw89_read32(rtwdev, addr + k);\n\t\t\tseq_printf(m, \"%08x \", data);\n\t\t}\n\t\tseq_puts(m, \"\\n\");\n\t}\n\n\treturn 0;\n}\n\nstatic ssize_t rtw89_debug_priv_write_reg_set(struct file *filp,\n\t\t\t\t\t      const char __user *user_buf,\n\t\t\t\t\t      size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tu32 addr, val, len;\n\tint num;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%x %x %x\", &addr, &val, &len);\n\tif (num !=  3) {\n\t\trtw89_info(rtwdev, \"invalid format: <addr> <val> <len>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (len) {\n\tcase 1:\n\t\trtw89_info(rtwdev, \"reg write8 0x%08x: 0x%02x\\n\", addr, val);\n\t\trtw89_write8(rtwdev, addr, (u8)val);\n\t\tbreak;\n\tcase 2:\n\t\trtw89_info(rtwdev, \"reg write16 0x%08x: 0x%04x\\n\", addr, val);\n\t\trtw89_write16(rtwdev, addr, (u16)val);\n\t\tbreak;\n\tcase 4:\n\t\trtw89_info(rtwdev, \"reg write32 0x%08x: 0x%08x\\n\", addr, val);\n\t\trtw89_write32(rtwdev, addr, (u32)val);\n\t\tbreak;\n\tdefault:\n\t\trtw89_info(rtwdev, \"invalid read write len %d\\n\", len);\n\t\tbreak;\n\t}\n\n\treturn count;\n}\n\nstatic ssize_t\nrtw89_debug_priv_read_rf_select(struct file *filp,\n\t\t\t\tconst char __user *user_buf,\n\t\t\t\tsize_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tu32 addr, mask;\n\tu8 path;\n\tint num;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%hhd %x %x\", &path, &addr, &mask);\n\tif (num != 3) {\n\t\trtw89_info(rtwdev, \"invalid format: <path> <addr> <mask>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tif (path >= rtwdev->chip->rf_path_num) {\n\t\trtw89_info(rtwdev, \"wrong rf path\\n\");\n\t\treturn -EINVAL;\n\t}\n\tdebugfs_priv->read_rf.addr = addr;\n\tdebugfs_priv->read_rf.mask = mask;\n\tdebugfs_priv->read_rf.path = path;\n\n\trtw89_info(rtwdev, \"select read rf path %d from 0x%08x\\n\", path, addr);\n\n\treturn count;\n}\n\nstatic int rtw89_debug_priv_read_rf_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tu32 addr, data, mask;\n\tu8 path;\n\n\taddr = debugfs_priv->read_rf.addr;\n\tmask = debugfs_priv->read_rf.mask;\n\tpath = debugfs_priv->read_rf.path;\n\n\tdata = rtw89_read_rf(rtwdev, path, addr, mask);\n\n\tseq_printf(m, \"path %d, rf register 0x%08x=0x%08x\\n\", path, addr, data);\n\n\treturn 0;\n}\n\nstatic ssize_t rtw89_debug_priv_write_rf_set(struct file *filp,\n\t\t\t\t\t     const char __user *user_buf,\n\t\t\t\t\t     size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tu32 addr, val, mask;\n\tu8 path;\n\tint num;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%hhd %x %x %x\", &path, &addr, &mask, &val);\n\tif (num != 4) {\n\t\trtw89_info(rtwdev, \"invalid format: <path> <addr> <mask> <val>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tif (path >= rtwdev->chip->rf_path_num) {\n\t\trtw89_info(rtwdev, \"wrong rf path\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\trtw89_info(rtwdev, \"path %d, rf register write 0x%08x=0x%08x (mask = 0x%08x)\\n\",\n\t\t   path, addr, val, mask);\n\trtw89_write_rf(rtwdev, path, addr, mask, val);\n\n\treturn count;\n}\n\nstatic int rtw89_debug_priv_rf_reg_dump_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\tu32 addr, offset, data;\n\tu8 path;\n\n\tfor (path = 0; path < chip->rf_path_num; path++) {\n\t\tseq_printf(m, \"RF path %d:\\n\\n\", path);\n\t\tfor (addr = 0; addr < 0x100; addr += 4) {\n\t\t\tseq_printf(m, \"0x%08x: \", addr);\n\t\t\tfor (offset = 0; offset < 4; offset++) {\n\t\t\t\tdata = rtw89_read_rf(rtwdev, path,\n\t\t\t\t\t\t     addr + offset, RFREG_MASK);\n\t\t\t\tseq_printf(m, \"0x%05x  \", data);\n\t\t\t}\n\t\t\tseq_puts(m, \"\\n\");\n\t\t}\n\t\tseq_puts(m, \"\\n\");\n\t}\n\n\treturn 0;\n}\n\nstruct txpwr_ent {\n\tconst char *txt;\n\tu8 len;\n};\n\nstruct txpwr_map {\n\tconst struct txpwr_ent *ent;\n\tu8 size;\n\tu32 addr_from;\n\tu32 addr_to;\n\tu32 addr_to_1ss;\n};\n\n#define __GEN_TXPWR_ENT2(_t, _e0, _e1) \\\n\t{ .len = 2, .txt = _t \"\\t-  \" _e0 \"  \" _e1 }\n\n#define __GEN_TXPWR_ENT4(_t, _e0, _e1, _e2, _e3) \\\n\t{ .len = 4, .txt = _t \"\\t-  \" _e0 \"  \" _e1 \"  \" _e2 \"  \" _e3 }\n\n#define __GEN_TXPWR_ENT8(_t, _e0, _e1, _e2, _e3, _e4, _e5, _e6, _e7) \\\n\t{ .len = 8, .txt = _t \"\\t-  \" \\\n\t  _e0 \"  \" _e1 \"  \" _e2 \"  \" _e3 \"  \" \\\n\t  _e4 \"  \" _e5 \"  \" _e6 \"  \" _e7 }\n\nstatic const struct txpwr_ent __txpwr_ent_byr[] = {\n\t__GEN_TXPWR_ENT4(\"CCK       \", \"1M   \", \"2M   \", \"5.5M \", \"11M  \"),\n\t__GEN_TXPWR_ENT4(\"LEGACY    \", \"6M   \", \"9M   \", \"12M  \", \"18M  \"),\n\t__GEN_TXPWR_ENT4(\"LEGACY    \", \"24M  \", \"36M  \", \"48M  \", \"54M  \"),\n\t \n\t__GEN_TXPWR_ENT4(\"MCS_1NSS  \", \"MCS0 \", \"MCS1 \", \"MCS2 \", \"MCS3 \"),\n\t__GEN_TXPWR_ENT4(\"MCS_1NSS  \", \"MCS4 \", \"MCS5 \", \"MCS6 \", \"MCS7 \"),\n\t__GEN_TXPWR_ENT4(\"MCS_1NSS  \", \"MCS8 \", \"MCS9 \", \"MCS10\", \"MCS11\"),\n\t__GEN_TXPWR_ENT4(\"HEDCM_1NSS\", \"MCS0 \", \"MCS1 \", \"MCS3 \", \"MCS4 \"),\n\t \n\t__GEN_TXPWR_ENT4(\"MCS_2NSS  \", \"MCS0 \", \"MCS1 \", \"MCS2 \", \"MCS3 \"),\n\t__GEN_TXPWR_ENT4(\"MCS_2NSS  \", \"MCS4 \", \"MCS5 \", \"MCS6 \", \"MCS7 \"),\n\t__GEN_TXPWR_ENT4(\"MCS_2NSS  \", \"MCS8 \", \"MCS9 \", \"MCS10\", \"MCS11\"),\n\t__GEN_TXPWR_ENT4(\"HEDCM_2NSS\", \"MCS0 \", \"MCS1 \", \"MCS3 \", \"MCS4 \"),\n};\n\nstatic_assert((ARRAY_SIZE(__txpwr_ent_byr) * 4) ==\n\t(R_AX_PWR_BY_RATE_MAX - R_AX_PWR_BY_RATE + 4));\n\nstatic const struct txpwr_map __txpwr_map_byr = {\n\t.ent = __txpwr_ent_byr,\n\t.size = ARRAY_SIZE(__txpwr_ent_byr),\n\t.addr_from = R_AX_PWR_BY_RATE,\n\t.addr_to = R_AX_PWR_BY_RATE_MAX,\n\t.addr_to_1ss = R_AX_PWR_BY_RATE_1SS_MAX,\n};\n\nstatic const struct txpwr_ent __txpwr_ent_lmt[] = {\n\t \n\t__GEN_TXPWR_ENT2(\"CCK_1TX_20M    \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"CCK_1TX_40M    \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"OFDM_1TX       \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_2  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_3  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_4  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_5  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_6  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_20M_7  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_2  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_3  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_80M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_80M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_160M   \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_0p5\", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_1TX_40M_2p5\", \"NON_BF\", \"BF\"),\n\t \n\t__GEN_TXPWR_ENT2(\"CCK_2TX_20M    \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"CCK_2TX_40M    \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"OFDM_2TX       \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_2  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_3  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_4  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_5  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_6  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_20M_7  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_2  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_3  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_80M_0  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_80M_1  \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_160M   \", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_0p5\", \"NON_BF\", \"BF\"),\n\t__GEN_TXPWR_ENT2(\"MCS_2TX_40M_2p5\", \"NON_BF\", \"BF\"),\n};\n\nstatic_assert((ARRAY_SIZE(__txpwr_ent_lmt) * 2) ==\n\t(R_AX_PWR_LMT_MAX - R_AX_PWR_LMT + 4));\n\nstatic const struct txpwr_map __txpwr_map_lmt = {\n\t.ent = __txpwr_ent_lmt,\n\t.size = ARRAY_SIZE(__txpwr_ent_lmt),\n\t.addr_from = R_AX_PWR_LMT,\n\t.addr_to = R_AX_PWR_LMT_MAX,\n\t.addr_to_1ss = R_AX_PWR_LMT_1SS_MAX,\n};\n\nstatic const struct txpwr_ent __txpwr_ent_lmt_ru[] = {\n\t \n\t__GEN_TXPWR_ENT8(\"1TX\", \"RU26__0\", \"RU26__1\", \"RU26__2\", \"RU26__3\",\n\t\t\t \"RU26__4\", \"RU26__5\", \"RU26__6\", \"RU26__7\"),\n\t__GEN_TXPWR_ENT8(\"1TX\", \"RU52__0\", \"RU52__1\", \"RU52__2\", \"RU52__3\",\n\t\t\t \"RU52__4\", \"RU52__5\", \"RU52__6\", \"RU52__7\"),\n\t__GEN_TXPWR_ENT8(\"1TX\", \"RU106_0\", \"RU106_1\", \"RU106_2\", \"RU106_3\",\n\t\t\t \"RU106_4\", \"RU106_5\", \"RU106_6\", \"RU106_7\"),\n\t \n\t__GEN_TXPWR_ENT8(\"2TX\", \"RU26__0\", \"RU26__1\", \"RU26__2\", \"RU26__3\",\n\t\t\t \"RU26__4\", \"RU26__5\", \"RU26__6\", \"RU26__7\"),\n\t__GEN_TXPWR_ENT8(\"2TX\", \"RU52__0\", \"RU52__1\", \"RU52__2\", \"RU52__3\",\n\t\t\t \"RU52__4\", \"RU52__5\", \"RU52__6\", \"RU52__7\"),\n\t__GEN_TXPWR_ENT8(\"2TX\", \"RU106_0\", \"RU106_1\", \"RU106_2\", \"RU106_3\",\n\t\t\t \"RU106_4\", \"RU106_5\", \"RU106_6\", \"RU106_7\"),\n};\n\nstatic_assert((ARRAY_SIZE(__txpwr_ent_lmt_ru) * 8) ==\n\t(R_AX_PWR_RU_LMT_MAX - R_AX_PWR_RU_LMT + 4));\n\nstatic const struct txpwr_map __txpwr_map_lmt_ru = {\n\t.ent = __txpwr_ent_lmt_ru,\n\t.size = ARRAY_SIZE(__txpwr_ent_lmt_ru),\n\t.addr_from = R_AX_PWR_RU_LMT,\n\t.addr_to = R_AX_PWR_RU_LMT_MAX,\n\t.addr_to_1ss = R_AX_PWR_RU_LMT_1SS_MAX,\n};\n\nstatic u8 __print_txpwr_ent(struct seq_file *m, const struct txpwr_ent *ent,\n\t\t\t    const s8 *buf, const u8 cur)\n{\n\tchar *fmt;\n\n\tswitch (ent->len) {\n\tcase 2:\n\t\tfmt = \"%s\\t| %3d, %3d,\\tdBm\\n\";\n\t\tseq_printf(m, fmt, ent->txt, buf[cur], buf[cur + 1]);\n\t\treturn 2;\n\tcase 4:\n\t\tfmt = \"%s\\t| %3d, %3d, %3d, %3d,\\tdBm\\n\";\n\t\tseq_printf(m, fmt, ent->txt, buf[cur], buf[cur + 1],\n\t\t\t   buf[cur + 2], buf[cur + 3]);\n\t\treturn 4;\n\tcase 8:\n\t\tfmt = \"%s\\t| %3d, %3d, %3d, %3d, %3d, %3d, %3d, %3d,\\tdBm\\n\";\n\t\tseq_printf(m, fmt, ent->txt, buf[cur], buf[cur + 1],\n\t\t\t   buf[cur + 2], buf[cur + 3], buf[cur + 4],\n\t\t\t   buf[cur + 5], buf[cur + 6], buf[cur + 7]);\n\t\treturn 8;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\nstatic int __print_txpwr_map(struct seq_file *m, struct rtw89_dev *rtwdev,\n\t\t\t     const struct txpwr_map *map)\n{\n\tu8 fct = rtwdev->chip->txpwr_factor_mac;\n\tu8 path_num = rtwdev->chip->rf_path_num;\n\tu32 max_valid_addr;\n\tu32 val, addr;\n\ts8 *buf, tmp;\n\tu8 cur, i;\n\tint ret;\n\n\tbuf = vzalloc(map->addr_to - map->addr_from + 4);\n\tif (!buf)\n\t\treturn -ENOMEM;\n\n\tif (path_num == 1)\n\t\tmax_valid_addr = map->addr_to_1ss;\n\telse\n\t\tmax_valid_addr = map->addr_to;\n\n\tfor (addr = map->addr_from; addr <= max_valid_addr; addr += 4) {\n\t\tret = rtw89_mac_txpwr_read32(rtwdev, RTW89_PHY_0, addr, &val);\n\t\tif (ret)\n\t\t\tval = MASKDWORD;\n\n\t\tcur = addr - map->addr_from;\n\t\tfor (i = 0; i < 4; i++, val >>= 8) {\n\t\t\t \n\t\t\ttmp = sign_extend32(val, 6);\n\t\t\tbuf[cur + i] = tmp >> fct;\n\t\t}\n\t}\n\n\tfor (cur = 0, i = 0; i < map->size; i++)\n\t\tcur += __print_txpwr_ent(m, &map->ent[i], buf, cur);\n\n\tvfree(buf);\n\treturn 0;\n}\n\n#define case_REGD(_regd) \\\n\tcase RTW89_ ## _regd: \\\n\t\tseq_puts(m, #_regd \"\\n\"); \\\n\t\tbreak\n\nstatic void __print_regd(struct seq_file *m, struct rtw89_dev *rtwdev,\n\t\t\t const struct rtw89_chan *chan)\n{\n\tu8 band = chan->band_type;\n\tu8 regd = rtw89_regd_get(rtwdev, band);\n\n\tswitch (regd) {\n\tdefault:\n\t\tseq_printf(m, \"UNKNOWN: %d\\n\", regd);\n\t\tbreak;\n\tcase_REGD(WW);\n\tcase_REGD(ETSI);\n\tcase_REGD(FCC);\n\tcase_REGD(MKK);\n\tcase_REGD(NA);\n\tcase_REGD(IC);\n\tcase_REGD(KCC);\n\tcase_REGD(NCC);\n\tcase_REGD(CHILE);\n\tcase_REGD(ACMA);\n\tcase_REGD(MEXICO);\n\tcase_REGD(UKRAINE);\n\tcase_REGD(CN);\n\t}\n}\n\n#undef case_REGD\n\nstatic int rtw89_debug_priv_txpwr_table_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tconst struct rtw89_chan *chan;\n\tint ret = 0;\n\n\tmutex_lock(&rtwdev->mutex);\n\trtw89_leave_ps_mode(rtwdev);\n\tchan = rtw89_chan_get(rtwdev, RTW89_SUB_ENTITY_0);\n\n\tseq_puts(m, \"[Regulatory] \");\n\t__print_regd(m, rtwdev, chan);\n\n\tseq_puts(m, \"[SAR]\\n\");\n\trtw89_print_sar(m, rtwdev, chan->freq);\n\n\tseq_puts(m, \"[TAS]\\n\");\n\trtw89_print_tas(m, rtwdev);\n\n\tseq_puts(m, \"\\n[TX power byrate]\\n\");\n\tret = __print_txpwr_map(m, rtwdev, &__txpwr_map_byr);\n\tif (ret)\n\t\tgoto err;\n\n\tseq_puts(m, \"\\n[TX power limit]\\n\");\n\tret = __print_txpwr_map(m, rtwdev, &__txpwr_map_lmt);\n\tif (ret)\n\t\tgoto err;\n\n\tseq_puts(m, \"\\n[TX power limit_ru]\\n\");\n\tret = __print_txpwr_map(m, rtwdev, &__txpwr_map_lmt_ru);\n\tif (ret)\n\t\tgoto err;\n\nerr:\n\tmutex_unlock(&rtwdev->mutex);\n\treturn ret;\n}\n\nstatic ssize_t\nrtw89_debug_priv_mac_reg_dump_select(struct file *filp,\n\t\t\t\t     const char __user *user_buf,\n\t\t\t\t     size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\tchar buf[32];\n\tsize_t buf_size;\n\tint sel;\n\tint ret;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tret = kstrtoint(buf, 0, &sel);\n\tif (ret)\n\t\treturn ret;\n\n\tif (sel < RTW89_DBG_SEL_MAC_00 || sel > RTW89_DBG_SEL_RFC) {\n\t\trtw89_info(rtwdev, \"invalid args: %d\\n\", sel);\n\t\treturn -EINVAL;\n\t}\n\n\tif (sel == RTW89_DBG_SEL_MAC_30 && chip->chip_id != RTL8852C) {\n\t\trtw89_info(rtwdev, \"sel %d is address hole on chip %d\\n\", sel,\n\t\t\t   chip->chip_id);\n\t\treturn -EINVAL;\n\t}\n\n\tdebugfs_priv->cb_data = sel;\n\trtw89_info(rtwdev, \"select mac page dump %d\\n\", debugfs_priv->cb_data);\n\n\treturn count;\n}\n\n#define RTW89_MAC_PAGE_SIZE\t\t0x100\n\nstatic int rtw89_debug_priv_mac_reg_dump_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tenum rtw89_debug_mac_reg_sel reg_sel = debugfs_priv->cb_data;\n\tu32 start, end;\n\tu32 i, j, k, page;\n\tu32 val;\n\n\tswitch (reg_sel) {\n\tcase RTW89_DBG_SEL_MAC_00:\n\t\tseq_puts(m, \"Debug selected MAC page 0x00\\n\");\n\t\tstart = 0x000;\n\t\tend = 0x014;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_MAC_30:\n\t\tseq_puts(m, \"Debug selected MAC page 0x30\\n\");\n\t\tstart = 0x030;\n\t\tend = 0x033;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_MAC_40:\n\t\tseq_puts(m, \"Debug selected MAC page 0x40\\n\");\n\t\tstart = 0x040;\n\t\tend = 0x07f;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_MAC_80:\n\t\tseq_puts(m, \"Debug selected MAC page 0x80\\n\");\n\t\tstart = 0x080;\n\t\tend = 0x09f;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_MAC_C0:\n\t\tseq_puts(m, \"Debug selected MAC page 0xc0\\n\");\n\t\tstart = 0x0c0;\n\t\tend = 0x0df;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_MAC_E0:\n\t\tseq_puts(m, \"Debug selected MAC page 0xe0\\n\");\n\t\tstart = 0x0e0;\n\t\tend = 0x0ff;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_BB:\n\t\tseq_puts(m, \"Debug selected BB register\\n\");\n\t\tstart = 0x100;\n\t\tend = 0x17f;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_IQK:\n\t\tseq_puts(m, \"Debug selected IQK register\\n\");\n\t\tstart = 0x180;\n\t\tend = 0x1bf;\n\t\tbreak;\n\tcase RTW89_DBG_SEL_RFC:\n\t\tseq_puts(m, \"Debug selected RFC register\\n\");\n\t\tstart = 0x1c0;\n\t\tend = 0x1ff;\n\t\tbreak;\n\tdefault:\n\t\tseq_puts(m, \"Selected invalid register page\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tfor (i = start; i <= end; i++) {\n\t\tpage = i << 8;\n\t\tfor (j = page; j < page + RTW89_MAC_PAGE_SIZE; j += 16) {\n\t\t\tseq_printf(m, \"%08xh : \", 0x18600000 + j);\n\t\t\tfor (k = 0; k < 4; k++) {\n\t\t\t\tval = rtw89_read32(rtwdev, j + (k << 2));\n\t\t\t\tseq_printf(m, \"%08x \", val);\n\t\t\t}\n\t\t\tseq_puts(m, \"\\n\");\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic ssize_t\nrtw89_debug_priv_mac_mem_dump_select(struct file *filp,\n\t\t\t\t     const char __user *user_buf,\n\t\t\t\t     size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tu32 sel, start_addr, len;\n\tint num;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%x %x %x\", &sel, &start_addr, &len);\n\tif (num != 3) {\n\t\trtw89_info(rtwdev, \"invalid format: <sel> <start> <len>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tdebugfs_priv->mac_mem.sel = sel;\n\tdebugfs_priv->mac_mem.start = start_addr;\n\tdebugfs_priv->mac_mem.len = len;\n\n\trtw89_info(rtwdev, \"select mem %d start %d len %d\\n\",\n\t\t   sel, start_addr, len);\n\n\treturn count;\n}\n\nstatic void rtw89_debug_dump_mac_mem(struct seq_file *m,\n\t\t\t\t     struct rtw89_dev *rtwdev,\n\t\t\t\t     u8 sel, u32 start_addr, u32 len)\n{\n\tconst struct rtw89_mac_gen_def *mac = rtwdev->chip->mac_def;\n\tu32 filter_model_addr = mac->filter_model_addr;\n\tu32 indir_access_addr = mac->indir_access_addr;\n\tu32 base_addr, start_page, residue;\n\tu32 i, j, p, pages;\n\tu32 dump_len, remain;\n\tu32 val;\n\n\tremain = len;\n\tpages = len / MAC_MEM_DUMP_PAGE_SIZE + 1;\n\tstart_page = start_addr / MAC_MEM_DUMP_PAGE_SIZE;\n\tresidue = start_addr % MAC_MEM_DUMP_PAGE_SIZE;\n\tbase_addr = mac->mem_base_addrs[sel];\n\tbase_addr += start_page * MAC_MEM_DUMP_PAGE_SIZE;\n\n\tfor (p = 0; p < pages; p++) {\n\t\tdump_len = min_t(u32, remain, MAC_MEM_DUMP_PAGE_SIZE);\n\t\trtw89_write32(rtwdev, filter_model_addr, base_addr);\n\t\tfor (i = indir_access_addr + residue;\n\t\t     i < indir_access_addr + dump_len;) {\n\t\t\tseq_printf(m, \"%08xh:\", i);\n\t\t\tfor (j = 0;\n\t\t\t     j < 4 && i < indir_access_addr + dump_len;\n\t\t\t     j++, i += 4) {\n\t\t\t\tval = rtw89_read32(rtwdev, i);\n\t\t\t\tseq_printf(m, \"  %08x\", val);\n\t\t\t\tremain -= 4;\n\t\t\t}\n\t\t\tseq_puts(m, \"\\n\");\n\t\t}\n\t\tbase_addr += MAC_MEM_DUMP_PAGE_SIZE;\n\t}\n}\n\nstatic int\nrtw89_debug_priv_mac_mem_dump_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tbool grant_read = false;\n\n\tif (debugfs_priv->mac_mem.sel >= RTW89_MAC_MEM_NUM)\n\t\treturn -ENOENT;\n\n\tif (rtwdev->chip->chip_id == RTL8852C) {\n\t\tswitch (debugfs_priv->mac_mem.sel) {\n\t\tcase RTW89_MAC_MEM_TXD_FIFO_0_V1:\n\t\tcase RTW89_MAC_MEM_TXD_FIFO_1_V1:\n\t\tcase RTW89_MAC_MEM_TXDATA_FIFO_0:\n\t\tcase RTW89_MAC_MEM_TXDATA_FIFO_1:\n\t\t\tgrant_read = true;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tmutex_lock(&rtwdev->mutex);\n\trtw89_leave_ps_mode(rtwdev);\n\tif (grant_read)\n\t\trtw89_write32_set(rtwdev, R_AX_TCR1, B_AX_TCR_FORCE_READ_TXDFIFO);\n\trtw89_debug_dump_mac_mem(m, rtwdev,\n\t\t\t\t debugfs_priv->mac_mem.sel,\n\t\t\t\t debugfs_priv->mac_mem.start,\n\t\t\t\t debugfs_priv->mac_mem.len);\n\tif (grant_read)\n\t\trtw89_write32_clr(rtwdev, R_AX_TCR1, B_AX_TCR_FORCE_READ_TXDFIFO);\n\tmutex_unlock(&rtwdev->mutex);\n\n\treturn 0;\n}\n\nstatic ssize_t\nrtw89_debug_priv_mac_dbg_port_dump_select(struct file *filp,\n\t\t\t\t\t  const char __user *user_buf,\n\t\t\t\t\t  size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tchar buf[32];\n\tsize_t buf_size;\n\tint sel, set;\n\tint num;\n\tbool enable;\n\n\tbuf_size = min(count, sizeof(buf) - 1);\n\tif (copy_from_user(buf, user_buf, buf_size))\n\t\treturn -EFAULT;\n\n\tbuf[buf_size] = '\\0';\n\tnum = sscanf(buf, \"%d %d\", &sel, &set);\n\tif (num != 2) {\n\t\trtw89_info(rtwdev, \"invalid format: <sel> <set>\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tenable = set != 0;\n\tswitch (sel) {\n\tcase 0:\n\t\tdebugfs_priv->dbgpkg_en.ss_dbg = enable;\n\t\tbreak;\n\tcase 1:\n\t\tdebugfs_priv->dbgpkg_en.dle_dbg = enable;\n\t\tbreak;\n\tcase 2:\n\t\tdebugfs_priv->dbgpkg_en.dmac_dbg = enable;\n\t\tbreak;\n\tcase 3:\n\t\tdebugfs_priv->dbgpkg_en.cmac_dbg = enable;\n\t\tbreak;\n\tcase 4:\n\t\tdebugfs_priv->dbgpkg_en.dbg_port = enable;\n\t\tbreak;\n\tdefault:\n\t\trtw89_info(rtwdev, \"invalid args: sel %d set %d\\n\", sel, set);\n\t\treturn -EINVAL;\n\t}\n\n\trtw89_info(rtwdev, \"%s debug port dump %d\\n\",\n\t\t   enable ? \"Enable\" : \"Disable\", sel);\n\n\treturn count;\n}\n\nstatic int rtw89_debug_mac_dump_ss_dbg(struct rtw89_dev *rtwdev,\n\t\t\t\t       struct seq_file *m)\n{\n\treturn 0;\n}\n\nstatic int rtw89_debug_mac_dump_dle_dbg(struct rtw89_dev *rtwdev,\n\t\t\t\t\tstruct seq_file *m)\n{\n#define DLE_DFI_DUMP(__type, __target, __sel)\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tu32 __ctrl;\t\t\t\t\t\t\t\\\n\tu32 __reg_ctrl = R_AX_##__type##_DBG_FUN_INTF_CTL;\t\t\\\n\tu32 __reg_data = R_AX_##__type##_DBG_FUN_INTF_DATA;\t\t\\\n\tu32 __data, __val32;\t\t\t\t\t\t\\\n\tint __ret;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t__ctrl = FIELD_PREP(B_AX_##__type##_DFI_TRGSEL_MASK,\t\t\\\n\t\t\t    DLE_DFI_TYPE_##__target) |\t\t\t\\\n\t\t FIELD_PREP(B_AX_##__type##_DFI_ADDR_MASK, __sel) |\t\\\n\t\t B_AX_WDE_DFI_ACTIVE;\t\t\t\t\t\\\n\trtw89_write32(rtwdev, __reg_ctrl, __ctrl);\t\t\t\\\n\t__ret = read_poll_timeout(rtw89_read32, __val32,\t\t\\\n\t\t\t!(__val32 & B_AX_##__type##_DFI_ACTIVE),\t\\\n\t\t\t1000, 50000, false,\t\t\t\t\\\n\t\t\trtwdev, __reg_ctrl);\t\t\t\t\\\n\tif (__ret) {\t\t\t\t\t\t\t\\\n\t\trtw89_err(rtwdev, \"failed to dump DLE %s %s %d\\n\",\t\\\n\t\t\t  #__type, #__target, __sel);\t\t\t\\\n\t\treturn __ret;\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t__data = rtw89_read32(rtwdev, __reg_data);\t\t\t\\\n\t__data;\t\t\t\t\t\t\t\t\\\n})\n\n#define DLE_DFI_FREE_PAGE_DUMP(__m, __type)\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tu32 __freepg, __pubpg;\t\t\t\t\t\t\\\n\tu32 __freepg_head, __freepg_tail, __pubpg_num;\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t__freepg = DLE_DFI_DUMP(__type, FREEPG, 0);\t\t\t\\\n\t__pubpg = DLE_DFI_DUMP(__type, FREEPG, 1);\t\t\t\\\n\t__freepg_head = FIELD_GET(B_AX_DLE_FREE_HEADPG, __freepg);\t\\\n\t__freepg_tail = FIELD_GET(B_AX_DLE_FREE_TAILPG, __freepg);\t\\\n\t__pubpg_num = FIELD_GET(B_AX_DLE_PUB_PGNUM, __pubpg);\t\t\\\n\tseq_printf(__m, \"[%s] freepg head: %d\\n\",\t\t\t\\\n\t\t   #__type, __freepg_head);\t\t\t\t\\\n\tseq_printf(__m, \"[%s] freepg tail: %d\\n\",\t\t\t\\\n\t\t   #__type, __freepg_tail);\t\t\t\t\\\n\tseq_printf(__m, \"[%s] pubpg num  : %d\\n\",\t\t\t\\\n\t\t  #__type, __pubpg_num);\t\t\t\t\\\n})\n\n#define case_QUOTA(__m, __type, __id)\t\t\t\t\t\\\n\tcase __type##_QTAID_##__id:\t\t\t\t\t\\\n\t\tval32 = DLE_DFI_DUMP(__type, QUOTA, __type##_QTAID_##__id);\t\\\n\t\trsv_pgnum = FIELD_GET(B_AX_DLE_RSV_PGNUM, val32);\t\\\n\t\tuse_pgnum = FIELD_GET(B_AX_DLE_USE_PGNUM, val32);\t\\\n\t\tseq_printf(__m, \"[%s][%s] rsv_pgnum: %d\\n\",\t\t\\\n\t\t\t   #__type, #__id, rsv_pgnum);\t\t\t\\\n\t\tseq_printf(__m, \"[%s][%s] use_pgnum: %d\\n\",\t\t\\\n\t\t\t   #__type, #__id, use_pgnum);\t\t\t\\\n\t\tbreak\n\tu32 quota_id;\n\tu32 val32;\n\tu16 rsv_pgnum, use_pgnum;\n\tint ret;\n\n\tret = rtw89_mac_check_mac_en(rtwdev, 0, RTW89_DMAC_SEL);\n\tif (ret) {\n\t\tseq_puts(m, \"[DLE]  : DMAC not enabled\\n\");\n\t\treturn ret;\n\t}\n\n\tDLE_DFI_FREE_PAGE_DUMP(m, WDE);\n\tDLE_DFI_FREE_PAGE_DUMP(m, PLE);\n\tfor (quota_id = 0; quota_id <= WDE_QTAID_CPUIO; quota_id++) {\n\t\tswitch (quota_id) {\n\t\tcase_QUOTA(m, WDE, HOST_IF);\n\t\tcase_QUOTA(m, WDE, WLAN_CPU);\n\t\tcase_QUOTA(m, WDE, DATA_CPU);\n\t\tcase_QUOTA(m, WDE, PKTIN);\n\t\tcase_QUOTA(m, WDE, CPUIO);\n\t\t}\n\t}\n\tfor (quota_id = 0; quota_id <= PLE_QTAID_CPUIO; quota_id++) {\n\t\tswitch (quota_id) {\n\t\tcase_QUOTA(m, PLE, B0_TXPL);\n\t\tcase_QUOTA(m, PLE, B1_TXPL);\n\t\tcase_QUOTA(m, PLE, C2H);\n\t\tcase_QUOTA(m, PLE, H2C);\n\t\tcase_QUOTA(m, PLE, WLAN_CPU);\n\t\tcase_QUOTA(m, PLE, MPDU);\n\t\tcase_QUOTA(m, PLE, CMAC0_RX);\n\t\tcase_QUOTA(m, PLE, CMAC1_RX);\n\t\tcase_QUOTA(m, PLE, CMAC1_BBRPT);\n\t\tcase_QUOTA(m, PLE, WDRLS);\n\t\tcase_QUOTA(m, PLE, CPUIO);\n\t\t}\n\t}\n\n\treturn 0;\n\n#undef case_QUOTA\n#undef DLE_DFI_DUMP\n#undef DLE_DFI_FREE_PAGE_DUMP\n}\n\nstatic int rtw89_debug_mac_dump_dmac_dbg(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct seq_file *m)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\tu32 dmac_err;\n\tint i, ret;\n\n\tret = rtw89_mac_check_mac_en(rtwdev, 0, RTW89_DMAC_SEL);\n\tif (ret) {\n\t\tseq_puts(m, \"[DMAC] : DMAC not enabled\\n\");\n\t\treturn ret;\n\t}\n\n\tdmac_err = rtw89_read32(rtwdev, R_AX_DMAC_ERR_ISR);\n\tseq_printf(m, \"R_AX_DMAC_ERR_ISR=0x%08x\\n\", dmac_err);\n\tseq_printf(m, \"R_AX_DMAC_ERR_IMR=0x%08x\\n\",\n\t\t   rtw89_read32(rtwdev, R_AX_DMAC_ERR_IMR));\n\n\tif (dmac_err) {\n\t\tseq_printf(m, \"R_AX_WDE_ERR_FLAG_CFG=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERR_FLAG_CFG_NUM1));\n\t\tseq_printf(m, \"R_AX_PLE_ERR_FLAG_CFG=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERR_FLAG_CFG_NUM1));\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_PLE_ERRFLAG_MSG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERRFLAG_MSG));\n\t\t\tseq_printf(m, \"R_AX_WDE_ERRFLAG_MSG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERRFLAG_MSG));\n\t\t\tseq_printf(m, \"R_AX_PLE_DBGERR_LOCKEN=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_DBGERR_LOCKEN));\n\t\t\tseq_printf(m, \"R_AX_PLE_DBGERR_STS=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_DBGERR_STS));\n\t\t}\n\t}\n\n\tif (dmac_err & B_AX_WDRLS_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_WDRLS_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDRLS_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_WDRLS_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDRLS_ERR_ISR));\n\t\tif (chip->chip_id == RTL8852C)\n\t\t\tseq_printf(m, \"R_AX_RPQ_RXBD_IDX=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RPQ_RXBD_IDX_V1));\n\t\telse\n\t\t\tseq_printf(m, \"R_AX_RPQ_RXBD_IDX=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RPQ_RXBD_IDX));\n\t}\n\n\tif (dmac_err & B_AX_WSEC_ERR_FLAG) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_SEC_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_ERROR_FLAG_IMR));\n\t\t\tseq_printf(m, \"R_AX_SEC_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_ERROR_FLAG));\n\t\t\tseq_printf(m, \"R_AX_SEC_ENG_CTRL=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_ENG_CTRL));\n\t\t\tseq_printf(m, \"R_AX_SEC_MPDU_PROC=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_MPDU_PROC));\n\t\t\tseq_printf(m, \"R_AX_SEC_CAM_ACCESS=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_CAM_ACCESS));\n\t\t\tseq_printf(m, \"R_AX_SEC_CAM_RDATA=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_CAM_RDATA));\n\t\t\tseq_printf(m, \"R_AX_SEC_DEBUG1=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_DEBUG1));\n\t\t\tseq_printf(m, \"R_AX_SEC_TX_DEBUG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_TX_DEBUG));\n\t\t\tseq_printf(m, \"R_AX_SEC_RX_DEBUG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_RX_DEBUG));\n\n\t\t\trtw89_write32_mask(rtwdev, R_AX_DBG_CTRL,\n\t\t\t\t\t   B_AX_DBG_SEL0, 0x8B);\n\t\t\trtw89_write32_mask(rtwdev, R_AX_DBG_CTRL,\n\t\t\t\t\t   B_AX_DBG_SEL1, 0x8B);\n\t\t\trtw89_write32_mask(rtwdev, R_AX_SYS_STATUS1,\n\t\t\t\t\t   B_AX_SEL_0XC0_MASK, 1);\n\t\t\tfor (i = 0; i < 0x10; i++) {\n\t\t\t\trtw89_write32_mask(rtwdev, R_AX_SEC_ENG_CTRL,\n\t\t\t\t\t\t   B_AX_SEC_DBG_PORT_FIELD_MASK, i);\n\t\t\t\tseq_printf(m, \"sel=%x,R_AX_SEC_DEBUG2=0x%08x\\n\",\n\t\t\t\t\t   i, rtw89_read32(rtwdev, R_AX_SEC_DEBUG2));\n\t\t\t}\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_SEC_ERR_IMR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_DEBUG));\n\t\t\tseq_printf(m, \"R_AX_SEC_ENG_CTRL=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_ENG_CTRL));\n\t\t\tseq_printf(m, \"R_AX_SEC_MPDU_PROC=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_MPDU_PROC));\n\t\t\tseq_printf(m, \"R_AX_SEC_CAM_ACCESS=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_CAM_ACCESS));\n\t\t\tseq_printf(m, \"R_AX_SEC_CAM_RDATA=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_CAM_RDATA));\n\t\t\tseq_printf(m, \"R_AX_SEC_CAM_WDATA=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_CAM_WDATA));\n\t\t\tseq_printf(m, \"R_AX_SEC_TX_DEBUG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_TX_DEBUG));\n\t\t\tseq_printf(m, \"R_AX_SEC_RX_DEBUG=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_RX_DEBUG));\n\t\t\tseq_printf(m, \"R_AX_SEC_TRX_PKT_CNT=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_TRX_PKT_CNT));\n\t\t\tseq_printf(m, \"R_AX_SEC_TRX_BLK_CNT=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_SEC_TRX_BLK_CNT));\n\t\t}\n\t}\n\n\tif (dmac_err & B_AX_MPDU_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_MPDU_TX_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_MPDU_TX_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_MPDU_TX_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_MPDU_TX_ERR_ISR));\n\t\tseq_printf(m, \"R_AX_MPDU_RX_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_MPDU_RX_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_MPDU_RX_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_MPDU_RX_ERR_ISR));\n\t}\n\n\tif (dmac_err & B_AX_STA_SCHEDULER_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_STA_SCHEDULER_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_STA_SCHEDULER_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_STA_SCHEDULER_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_STA_SCHEDULER_ERR_ISR));\n\t}\n\n\tif (dmac_err & B_AX_WDE_DLE_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_WDE_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_WDE_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERR_ISR));\n\t\tseq_printf(m, \"R_AX_PLE_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_PLE_ERR_FLAG_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERR_FLAG_ISR));\n\t}\n\n\tif (dmac_err & B_AX_TXPKTCTRL_ERR_FLAG) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_B0_ERRFLAG_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_B0_ERRFLAG_IMR));\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_B0_ERRFLAG_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_B0_ERRFLAG_ISR));\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_B1_ERRFLAG_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_B1_ERRFLAG_IMR));\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_B1_ERRFLAG_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_B1_ERRFLAG_ISR));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_ERR_IMR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_ERR_IMR_ISR));\n\t\t\tseq_printf(m, \"R_AX_TXPKTCTL_ERR_IMR_ISR_B1=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TXPKTCTL_ERR_IMR_ISR_B1));\n\t\t}\n\t}\n\n\tif (dmac_err & B_AX_PLE_DLE_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_WDE_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_WDE_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WDE_ERR_ISR));\n\t\tseq_printf(m, \"R_AX_PLE_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_PLE_ERR_FLAG_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PLE_ERR_FLAG_ISR));\n\t\tseq_printf(m, \"R_AX_WD_CPUQ_OP_0=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WD_CPUQ_OP_0));\n\t\tseq_printf(m, \"R_AX_WD_CPUQ_OP_1=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WD_CPUQ_OP_1));\n\t\tseq_printf(m, \"R_AX_WD_CPUQ_OP_2=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WD_CPUQ_OP_2));\n\t\tseq_printf(m, \"R_AX_WD_CPUQ_OP_STATUS=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_WD_CPUQ_OP_STATUS));\n\t\tseq_printf(m, \"R_AX_PL_CPUQ_OP_0=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PL_CPUQ_OP_0));\n\t\tseq_printf(m, \"R_AX_PL_CPUQ_OP_1=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PL_CPUQ_OP_1));\n\t\tseq_printf(m, \"R_AX_PL_CPUQ_OP_2=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PL_CPUQ_OP_2));\n\t\tseq_printf(m, \"R_AX_PL_CPUQ_OP_STATUS=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PL_CPUQ_OP_STATUS));\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_RX_CTRL0=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RX_CTRL0));\n\t\t\tseq_printf(m, \"R_AX_RX_CTRL1=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RX_CTRL1));\n\t\t\tseq_printf(m, \"R_AX_RX_CTRL2=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RX_CTRL2));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_RXDMA_PKT_INFO_0=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RXDMA_PKT_INFO_0));\n\t\t\tseq_printf(m, \"R_AX_RXDMA_PKT_INFO_1=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RXDMA_PKT_INFO_1));\n\t\t\tseq_printf(m, \"R_AX_RXDMA_PKT_INFO_2=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RXDMA_PKT_INFO_2));\n\t\t}\n\t}\n\n\tif (dmac_err & B_AX_PKTIN_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_PKTIN_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PKTIN_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_PKTIN_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_PKTIN_ERR_ISR));\n\t}\n\n\tif (dmac_err & B_AX_DISPATCH_ERR_FLAG) {\n\t\tseq_printf(m, \"R_AX_HOST_DISPATCHER_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_HOST_DISPATCHER_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_HOST_DISPATCHER_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_HOST_DISPATCHER_ERR_ISR));\n\t\tseq_printf(m, \"R_AX_CPU_DISPATCHER_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_CPU_DISPATCHER_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_CPU_DISPATCHER_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_CPU_DISPATCHER_ERR_ISR));\n\t\tseq_printf(m, \"R_AX_OTHER_DISPATCHER_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_OTHER_DISPATCHER_ERR_IMR));\n\t\tseq_printf(m, \"R_AX_OTHER_DISPATCHER_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_OTHER_DISPATCHER_ERR_ISR));\n\t}\n\n\tif (dmac_err & B_AX_BBRPT_ERR_FLAG) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_BBRPT_COM_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_COM_ERR_IMR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_COM_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_COM_ERR_ISR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_CHINFO_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_CHINFO_ERR_ISR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_CHINFO_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_CHINFO_ERR_IMR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_DFS_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_DFS_ERR_IMR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_DFS_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_DFS_ERR_ISR));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_BBRPT_COM_ERR_IMR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_COM_ERR_IMR_ISR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_CHINFO_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_CHINFO_ERR_ISR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_CHINFO_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_CHINFO_ERR_IMR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_DFS_ERR_IMR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_DFS_ERR_IMR));\n\t\t\tseq_printf(m, \"R_AX_BBRPT_DFS_ERR_ISR=0x%08x\\n\",\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_BBRPT_DFS_ERR_ISR));\n\t\t}\n\t}\n\n\tif (dmac_err & B_AX_HAXIDMA_ERR_FLAG && chip->chip_id == RTL8852C) {\n\t\tseq_printf(m, \"R_AX_HAXIDMA_ERR_IMR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_HAXI_IDCT_MSK));\n\t\tseq_printf(m, \"R_AX_HAXIDMA_ERR_ISR=0x%08x\\n\",\n\t\t\t   rtw89_read32(rtwdev, R_AX_HAXI_IDCT));\n\t}\n\n\treturn 0;\n}\n\nstatic int rtw89_debug_mac_dump_cmac_err(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct seq_file *m,\n\t\t\t\t\t enum rtw89_mac_idx band)\n{\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\tu32 offset = 0;\n\tu32 cmac_err;\n\tint ret;\n\n\tret = rtw89_mac_check_mac_en(rtwdev, band, RTW89_CMAC_SEL);\n\tif (ret) {\n\t\tif (band)\n\t\t\tseq_puts(m, \"[CMAC] : CMAC1 not enabled\\n\");\n\t\telse\n\t\t\tseq_puts(m, \"[CMAC] : CMAC0 not enabled\\n\");\n\t\treturn ret;\n\t}\n\n\tif (band)\n\t\toffset = RTW89_MAC_AX_BAND_REG_OFFSET;\n\n\tcmac_err = rtw89_read32(rtwdev, R_AX_CMAC_ERR_ISR + offset);\n\tseq_printf(m, \"R_AX_CMAC_ERR_ISR [%d]=0x%08x\\n\", band,\n\t\t   rtw89_read32(rtwdev, R_AX_CMAC_ERR_ISR + offset));\n\tseq_printf(m, \"R_AX_CMAC_FUNC_EN [%d]=0x%08x\\n\", band,\n\t\t   rtw89_read32(rtwdev, R_AX_CMAC_FUNC_EN + offset));\n\tseq_printf(m, \"R_AX_CK_EN [%d]=0x%08x\\n\", band,\n\t\t   rtw89_read32(rtwdev, R_AX_CK_EN + offset));\n\n\tif (cmac_err & B_AX_SCHEDULE_TOP_ERR_IND) {\n\t\tseq_printf(m, \"R_AX_SCHEDULE_ERR_IMR [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_SCHEDULE_ERR_IMR + offset));\n\t\tseq_printf(m, \"R_AX_SCHEDULE_ERR_ISR [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_SCHEDULE_ERR_ISR + offset));\n\t}\n\n\tif (cmac_err & B_AX_PTCL_TOP_ERR_IND) {\n\t\tseq_printf(m, \"R_AX_PTCL_IMR0 [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_PTCL_IMR0 + offset));\n\t\tseq_printf(m, \"R_AX_PTCL_ISR0 [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_PTCL_ISR0 + offset));\n\t}\n\n\tif (cmac_err & B_AX_DMA_TOP_ERR_IND) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_RX_ERR_FLAG [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RX_ERR_FLAG + offset));\n\t\t\tseq_printf(m, \"R_AX_RX_ERR_FLAG_IMR [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_RX_ERR_FLAG_IMR + offset));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_DLE_CTRL [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_DLE_CTRL + offset));\n\t\t}\n\t}\n\n\tif (cmac_err & B_AX_DMA_TOP_ERR_IND || cmac_err & B_AX_WMAC_RX_ERR_IND) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_PHYINFO_ERR_ISR [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PHYINFO_ERR_ISR + offset));\n\t\t\tseq_printf(m, \"R_AX_PHYINFO_ERR_IMR [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PHYINFO_ERR_IMR + offset));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_PHYINFO_ERR_IMR [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_PHYINFO_ERR_IMR + offset));\n\t\t}\n\t}\n\n\tif (cmac_err & B_AX_TXPWR_CTRL_ERR_IND) {\n\t\tseq_printf(m, \"R_AX_TXPWR_IMR [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_TXPWR_IMR + offset));\n\t\tseq_printf(m, \"R_AX_TXPWR_ISR [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_TXPWR_ISR + offset));\n\t}\n\n\tif (cmac_err & B_AX_WMAC_TX_ERR_IND) {\n\t\tif (chip->chip_id == RTL8852C) {\n\t\t\tseq_printf(m, \"R_AX_TRXPTCL_ERROR_INDICA [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TRXPTCL_ERROR_INDICA + offset));\n\t\t\tseq_printf(m, \"R_AX_TRXPTCL_ERROR_INDICA_MASK [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TRXPTCL_ERROR_INDICA_MASK + offset));\n\t\t} else {\n\t\t\tseq_printf(m, \"R_AX_TMAC_ERR_IMR_ISR [%d]=0x%08x\\n\", band,\n\t\t\t\t   rtw89_read32(rtwdev, R_AX_TMAC_ERR_IMR_ISR + offset));\n\t\t}\n\t\tseq_printf(m, \"R_AX_DBGSEL_TRXPTCL [%d]=0x%08x\\n\", band,\n\t\t\t   rtw89_read32(rtwdev, R_AX_DBGSEL_TRXPTCL + offset));\n\t}\n\n\tseq_printf(m, \"R_AX_CMAC_ERR_IMR [%d]=0x%08x\\n\", band,\n\t\t   rtw89_read32(rtwdev, R_AX_CMAC_ERR_IMR + offset));\n\n\treturn 0;\n}\n\nstatic int rtw89_debug_mac_dump_cmac_dbg(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct seq_file *m)\n{\n\trtw89_debug_mac_dump_cmac_err(rtwdev, m, RTW89_MAC_0);\n\tif (rtwdev->dbcc_en)\n\t\trtw89_debug_mac_dump_cmac_err(rtwdev, m, RTW89_MAC_1);\n\n\treturn 0;\n}\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ptcl_c0 = {\n\t.sel_addr = R_AX_PTCL_DBG,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_PTCL_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x3F,\n\t.rd_addr = R_AX_PTCL_DBG_INFO,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PTCL_DBG_INFO_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ptcl_c1 = {\n\t.sel_addr = R_AX_PTCL_DBG_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_PTCL_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x3F,\n\t.rd_addr = R_AX_PTCL_DBG_INFO_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PTCL_DBG_INFO_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_tx0_5 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0xD,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_tx6 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x5,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_tx7 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x9,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_tx8 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x3,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_tx9_C = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x1,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_txD = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx0 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0xB,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx1 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x4,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx3 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x8,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx4 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x7,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx5_8 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x1,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_tx9 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x3,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_txA_C = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_rx0 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x8,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_rx1_2 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_rx3 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x6,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_rx4 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_hdt_rx5 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_DISPATCHER_DBG_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_rx_p0_0 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x3,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_rx_p0_1 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x6,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_rx_p0_2 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x0,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_cdt_rx_p1 = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x8,\n\t.end = 0xE,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_stf_ctrl = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x5,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_addr_ctrl = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x6,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_wde_intf = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0xF,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_ple_intf = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x9,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_dspt_flow_ctrl = {\n\t.sel_addr = R_AX_DISPATCHER_DBG_PORT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DISPATCHER_CH_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0x3,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_sch_c0 = {\n\t.sel_addr = R_AX_SCH_DBG_SEL,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_SCH_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x2F,\n\t.rd_addr = R_AX_SCH_DBG,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_SCHEDULER_DBG_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_sch_c1 = {\n\t.sel_addr = R_AX_SCH_DBG_SEL_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_SCH_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x2F,\n\t.rd_addr = R_AX_SCH_DBG_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_SCHEDULER_DBG_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tmac_c0 = {\n\t.sel_addr = R_AX_MACTX_DBG_SEL_CNT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DBGSEL_MACTX_MASK,\n\t.srt = 0x00,\n\t.end = 0x19,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tmac_c1 = {\n\t.sel_addr = R_AX_MACTX_DBG_SEL_CNT_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DBGSEL_MACTX_MASK,\n\t.srt = 0x00,\n\t.end = 0x19,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmac_c0 = {\n\t.sel_addr = R_AX_RX_DEBUG_SELECT,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x58,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmac_c1 = {\n\t.sel_addr = R_AX_RX_DEBUG_SELECT_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x58,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmacst_c0 = {\n\t.sel_addr = R_AX_RX_STATE_MONITOR,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_STATE_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x17,\n\t.rd_addr = R_AX_RX_STATE_MONITOR,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_RX_STATE_MONITOR_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmacst_c1 = {\n\t.sel_addr = R_AX_RX_STATE_MONITOR_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_STATE_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x17,\n\t.rd_addr = R_AX_RX_STATE_MONITOR_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_RX_STATE_MONITOR_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmac_plcp_c0 = {\n\t.sel_addr = R_AX_RMAC_PLCP_MON,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PCLP_MON_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0xF,\n\t.rd_addr = R_AX_RMAC_PLCP_MON,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_RMAC_PLCP_MON_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_rmac_plcp_c1 = {\n\t.sel_addr = R_AX_RMAC_PLCP_MON_C1,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PCLP_MON_SEL_MASK,\n\t.srt = 0x0,\n\t.end = 0xF,\n\t.rd_addr = R_AX_RMAC_PLCP_MON_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_RMAC_PLCP_MON_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_trxptcl_c0 = {\n\t.sel_addr = R_AX_DBGSEL_TRXPTCL,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DBGSEL_TRXPTCL_MASK,\n\t.srt = 0x08,\n\t.end = 0x10,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_trxptcl_c1 = {\n\t.sel_addr = R_AX_DBGSEL_TRXPTCL_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DBGSEL_TRXPTCL_MASK,\n\t.srt = 0x08,\n\t.end = 0x10,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tx_infol_c0 = {\n\t.sel_addr = R_AX_WMAC_TX_CTRL_DEBUG,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_TX_CTRL_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x07,\n\t.rd_addr = R_AX_WMAC_TX_INFO0_DEBUG,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_TX_CTRL_INFO_P0_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tx_infoh_c0 = {\n\t.sel_addr = R_AX_WMAC_TX_CTRL_DEBUG,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_TX_CTRL_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x07,\n\t.rd_addr = R_AX_WMAC_TX_INFO1_DEBUG,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_TX_CTRL_INFO_P1_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tx_infol_c1 = {\n\t.sel_addr = R_AX_WMAC_TX_CTRL_DEBUG_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_TX_CTRL_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x07,\n\t.rd_addr = R_AX_WMAC_TX_INFO0_DEBUG_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_TX_CTRL_INFO_P0_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_tx_infoh_c1 = {\n\t.sel_addr = R_AX_WMAC_TX_CTRL_DEBUG_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_TX_CTRL_DEBUG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x07,\n\t.rd_addr = R_AX_WMAC_TX_INFO1_DEBUG_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_TX_CTRL_INFO_P1_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_txtf_infol_c0 = {\n\t.sel_addr = R_AX_WMAC_TX_TF_INFO_0,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_WMAC_TX_TF_INFO_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x04,\n\t.rd_addr = R_AX_WMAC_TX_TF_INFO_1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WMAC_TX_TF_INFO_P0_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_txtf_infoh_c0 = {\n\t.sel_addr = R_AX_WMAC_TX_TF_INFO_0,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_WMAC_TX_TF_INFO_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x04,\n\t.rd_addr = R_AX_WMAC_TX_TF_INFO_2,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WMAC_TX_TF_INFO_P1_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_txtf_infol_c1 = {\n\t.sel_addr = R_AX_WMAC_TX_TF_INFO_0_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_WMAC_TX_TF_INFO_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x04,\n\t.rd_addr = R_AX_WMAC_TX_TF_INFO_1_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WMAC_TX_TF_INFO_P0_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_txtf_infoh_c1 = {\n\t.sel_addr = R_AX_WMAC_TX_TF_INFO_0_C1,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_WMAC_TX_TF_INFO_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x04,\n\t.rd_addr = R_AX_WMAC_TX_TF_INFO_2_C1,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WMAC_TX_TF_INFO_P1_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_bufmgn_freepg = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80000000,\n\t.end = 0x80000001,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_bufmgn_quota = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80010000,\n\t.end = 0x80010004,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_bufmgn_pagellt = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80020000,\n\t.end = 0x80020FFF,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_bufmgn_pktinfo = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80030000,\n\t.end = 0x80030FFF,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_quemgn_prepkt = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80040000,\n\t.end = 0x80040FFF,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_quemgn_nxtpkt = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80050000,\n\t.end = 0x80050FFF,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_quemgn_qlnktbl = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80060000,\n\t.end = 0x80060453,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_wde_quemgn_qempty = {\n\t.sel_addr = R_AX_WDE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_WDE_DFI_DATA_MASK,\n\t.srt = 0x80070000,\n\t.end = 0x80070011,\n\t.rd_addr = R_AX_WDE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_WDE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_bufmgn_freepg = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80000000,\n\t.end = 0x80000001,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_bufmgn_quota = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80010000,\n\t.end = 0x8001000A,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_bufmgn_pagellt = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80020000,\n\t.end = 0x80020DBF,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_bufmgn_pktinfo = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80030000,\n\t.end = 0x80030DBF,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_quemgn_prepkt = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80040000,\n\t.end = 0x80040DBF,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_quemgn_nxtpkt = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80050000,\n\t.end = 0x80050DBF,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_quemgn_qlnktbl = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80060000,\n\t.end = 0x80060041,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_ple_quemgn_qempty = {\n\t.sel_addr = R_AX_PLE_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_PLE_DFI_DATA_MASK,\n\t.srt = 0x80070000,\n\t.end = 0x80070001,\n\t.rd_addr = R_AX_PLE_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_PLE_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pktinfo = {\n\t.sel_addr = R_AX_DBG_FUN_INTF_CTL,\n\t.sel_byte = 4,\n\t.sel_msk = B_AX_DFI_DATA_MASK,\n\t.srt = 0x80000000,\n\t.end = 0x8000017f,\n\t.rd_addr = R_AX_DBG_FUN_INTF_DATA,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DFI_DATA_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_txdma = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x03,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_rxdma = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x04,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_cvt = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x01,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_cxpl = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x05,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_io = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x05,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_misc = {\n\t.sel_addr = R_AX_PCIE_DBG_CTRL,\n\t.sel_byte = 2,\n\t.sel_msk = B_AX_PCIE_DBG_SEL_MASK,\n\t.srt = 0x00,\n\t.end = 0x06,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info dbg_port_pcie_misc2 = {\n\t.sel_addr = R_AX_DBG_CTRL,\n\t.sel_byte = 1,\n\t.sel_msk = B_AX_DBG_SEL0,\n\t.srt = 0x34,\n\t.end = 0x3C,\n\t.rd_addr = R_AX_DBG_PORT_SEL,\n\t.rd_byte = 4,\n\t.rd_msk = B_AX_DEBUG_ST_MASK\n};\n\nstatic const struct rtw89_mac_dbg_port_info *\nrtw89_debug_mac_dbg_port_sel(struct seq_file *m,\n\t\t\t     struct rtw89_dev *rtwdev, u32 sel)\n{\n\tconst struct rtw89_mac_dbg_port_info *info;\n\tu32 index;\n\tu32 val32;\n\tu16 val16;\n\tu8 val8;\n\n\tswitch (sel) {\n\tcase RTW89_DBG_PORT_SEL_PTCL_C0:\n\t\tinfo = &dbg_port_ptcl_c0;\n\t\tval16 = rtw89_read16(rtwdev, R_AX_PTCL_DBG);\n\t\tval16 |= B_AX_PTCL_DBG_EN;\n\t\trtw89_write16(rtwdev, R_AX_PTCL_DBG, val16);\n\t\tseq_puts(m, \"Enable PTCL C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PTCL_C1:\n\t\tinfo = &dbg_port_ptcl_c1;\n\t\tval16 = rtw89_read16(rtwdev, R_AX_PTCL_DBG_C1);\n\t\tval16 |= B_AX_PTCL_DBG_EN;\n\t\trtw89_write16(rtwdev, R_AX_PTCL_DBG_C1, val16);\n\t\tseq_puts(m, \"Enable PTCL C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_SCH_C0:\n\t\tinfo = &dbg_port_sch_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SCH_DBG_SEL);\n\t\tval32 |= B_AX_SCH_DBG_EN;\n\t\trtw89_write32(rtwdev, R_AX_SCH_DBG_SEL, val32);\n\t\tseq_puts(m, \"Enable SCH C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_SCH_C1:\n\t\tinfo = &dbg_port_sch_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SCH_DBG_SEL_C1);\n\t\tval32 |= B_AX_SCH_DBG_EN;\n\t\trtw89_write32(rtwdev, R_AX_SCH_DBG_SEL_C1, val32);\n\t\tseq_puts(m, \"Enable SCH C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TMAC_C0:\n\t\tinfo = &dbg_port_tmac_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBGSEL_TRXPTCL);\n\t\tval32 = u32_replace_bits(val32, TRXPTRL_DBG_SEL_TMAC,\n\t\t\t\t\t B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write32(rtwdev, R_AX_DBGSEL_TRXPTCL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, TMAC_DBG_SEL_C0, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, TMAC_DBG_SEL_C0, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\t\tseq_puts(m, \"Enable TMAC C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TMAC_C1:\n\t\tinfo = &dbg_port_tmac_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBGSEL_TRXPTCL_C1);\n\t\tval32 = u32_replace_bits(val32, TRXPTRL_DBG_SEL_TMAC,\n\t\t\t\t\t B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write32(rtwdev, R_AX_DBGSEL_TRXPTCL_C1, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, TMAC_DBG_SEL_C1, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, TMAC_DBG_SEL_C1, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\t\tseq_puts(m, \"Enable TMAC C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMAC_C0:\n\t\tinfo = &dbg_port_rmac_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBGSEL_TRXPTCL);\n\t\tval32 = u32_replace_bits(val32, TRXPTRL_DBG_SEL_RMAC,\n\t\t\t\t\t B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write32(rtwdev, R_AX_DBGSEL_TRXPTCL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, RMAC_DBG_SEL_C0, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, RMAC_DBG_SEL_C0, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\n\t\tval8 = rtw89_read8(rtwdev, R_AX_DBGSEL_TRXPTCL);\n\t\tval8 = u8_replace_bits(val8, RMAC_CMAC_DBG_SEL,\n\t\t\t\t       B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write8(rtwdev, R_AX_DBGSEL_TRXPTCL, val8);\n\t\tseq_puts(m, \"Enable RMAC C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMAC_C1:\n\t\tinfo = &dbg_port_rmac_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBGSEL_TRXPTCL_C1);\n\t\tval32 = u32_replace_bits(val32, TRXPTRL_DBG_SEL_RMAC,\n\t\t\t\t\t B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write32(rtwdev, R_AX_DBGSEL_TRXPTCL_C1, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, RMAC_DBG_SEL_C1, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, RMAC_DBG_SEL_C1, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\n\t\tval8 = rtw89_read8(rtwdev, R_AX_DBGSEL_TRXPTCL_C1);\n\t\tval8 = u8_replace_bits(val8, RMAC_CMAC_DBG_SEL,\n\t\t\t\t       B_AX_DBGSEL_TRXPTCL_MASK);\n\t\trtw89_write8(rtwdev, R_AX_DBGSEL_TRXPTCL_C1, val8);\n\t\tseq_puts(m, \"Enable RMAC C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMACST_C0:\n\t\tinfo = &dbg_port_rmacst_c0;\n\t\tseq_puts(m, \"Enable RMAC state C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMACST_C1:\n\t\tinfo = &dbg_port_rmacst_c1;\n\t\tseq_puts(m, \"Enable RMAC state C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMAC_PLCP_C0:\n\t\tinfo = &dbg_port_rmac_plcp_c0;\n\t\tseq_puts(m, \"Enable RMAC PLCP C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_RMAC_PLCP_C1:\n\t\tinfo = &dbg_port_rmac_plcp_c1;\n\t\tseq_puts(m, \"Enable RMAC PLCP C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TRXPTCL_C0:\n\t\tinfo = &dbg_port_trxptcl_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, TRXPTCL_DBG_SEL_C0, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, TRXPTCL_DBG_SEL_C0, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\t\tseq_puts(m, \"Enable TRXPTCL C0 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TRXPTCL_C1:\n\t\tinfo = &dbg_port_trxptcl_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, TRXPTCL_DBG_SEL_C1, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, TRXPTCL_DBG_SEL_C1, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\n\t\tval32 = rtw89_read32(rtwdev, R_AX_SYS_STATUS1);\n\t\tval32 = u32_replace_bits(val32, MAC_DBG_SEL, B_AX_SEL_0XC0_MASK);\n\t\trtw89_write32(rtwdev, R_AX_SYS_STATUS1, val32);\n\t\tseq_puts(m, \"Enable TRXPTCL C1 dbgport.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TX_INFOL_C0:\n\t\tinfo = &dbg_port_tx_infol_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1, val32);\n\t\tseq_puts(m, \"Enable tx infol dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TX_INFOH_C0:\n\t\tinfo = &dbg_port_tx_infoh_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1, val32);\n\t\tseq_puts(m, \"Enable tx infoh dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TX_INFOL_C1:\n\t\tinfo = &dbg_port_tx_infol_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1_C1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1_C1, val32);\n\t\tseq_puts(m, \"Enable tx infol dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TX_INFOH_C1:\n\t\tinfo = &dbg_port_tx_infoh_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1_C1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1_C1, val32);\n\t\tseq_puts(m, \"Enable tx infoh dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TXTF_INFOL_C0:\n\t\tinfo = &dbg_port_txtf_infol_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1, val32);\n\t\tseq_puts(m, \"Enable tx tf infol dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TXTF_INFOH_C0:\n\t\tinfo = &dbg_port_txtf_infoh_c0;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1, val32);\n\t\tseq_puts(m, \"Enable tx tf infoh dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TXTF_INFOL_C1:\n\t\tinfo = &dbg_port_txtf_infol_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1_C1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1_C1, val32);\n\t\tseq_puts(m, \"Enable tx tf infol dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_TXTF_INFOH_C1:\n\t\tinfo = &dbg_port_txtf_infoh_c1;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_TCR1_C1);\n\t\tval32 |= B_AX_TCR_FORCE_READ_TXDFIFO;\n\t\trtw89_write32(rtwdev, R_AX_TCR1_C1, val32);\n\t\tseq_puts(m, \"Enable tx tf infoh dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_BUFMGN_FREEPG:\n\t\tinfo = &dbg_port_wde_bufmgn_freepg;\n\t\tseq_puts(m, \"Enable wde bufmgn freepg dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_BUFMGN_QUOTA:\n\t\tinfo = &dbg_port_wde_bufmgn_quota;\n\t\tseq_puts(m, \"Enable wde bufmgn quota dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_BUFMGN_PAGELLT:\n\t\tinfo = &dbg_port_wde_bufmgn_pagellt;\n\t\tseq_puts(m, \"Enable wde bufmgn pagellt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_BUFMGN_PKTINFO:\n\t\tinfo = &dbg_port_wde_bufmgn_pktinfo;\n\t\tseq_puts(m, \"Enable wde bufmgn pktinfo dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_QUEMGN_PREPKT:\n\t\tinfo = &dbg_port_wde_quemgn_prepkt;\n\t\tseq_puts(m, \"Enable wde quemgn prepkt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_QUEMGN_NXTPKT:\n\t\tinfo = &dbg_port_wde_quemgn_nxtpkt;\n\t\tseq_puts(m, \"Enable wde quemgn nxtpkt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_QUEMGN_QLNKTBL:\n\t\tinfo = &dbg_port_wde_quemgn_qlnktbl;\n\t\tseq_puts(m, \"Enable wde quemgn qlnktbl dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_WDE_QUEMGN_QEMPTY:\n\t\tinfo = &dbg_port_wde_quemgn_qempty;\n\t\tseq_puts(m, \"Enable wde quemgn qempty dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_BUFMGN_FREEPG:\n\t\tinfo = &dbg_port_ple_bufmgn_freepg;\n\t\tseq_puts(m, \"Enable ple bufmgn freepg dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_BUFMGN_QUOTA:\n\t\tinfo = &dbg_port_ple_bufmgn_quota;\n\t\tseq_puts(m, \"Enable ple bufmgn quota dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_BUFMGN_PAGELLT:\n\t\tinfo = &dbg_port_ple_bufmgn_pagellt;\n\t\tseq_puts(m, \"Enable ple bufmgn pagellt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_BUFMGN_PKTINFO:\n\t\tinfo = &dbg_port_ple_bufmgn_pktinfo;\n\t\tseq_puts(m, \"Enable ple bufmgn pktinfo dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_QUEMGN_PREPKT:\n\t\tinfo = &dbg_port_ple_quemgn_prepkt;\n\t\tseq_puts(m, \"Enable ple quemgn prepkt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_QUEMGN_NXTPKT:\n\t\tinfo = &dbg_port_ple_quemgn_nxtpkt;\n\t\tseq_puts(m, \"Enable ple quemgn nxtpkt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_QUEMGN_QLNKTBL:\n\t\tinfo = &dbg_port_ple_quemgn_qlnktbl;\n\t\tseq_puts(m, \"Enable ple quemgn qlnktbl dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PLE_QUEMGN_QEMPTY:\n\t\tinfo = &dbg_port_ple_quemgn_qempty;\n\t\tseq_puts(m, \"Enable ple quemgn qempty dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PKTINFO:\n\t\tinfo = &dbg_port_pktinfo;\n\t\tseq_puts(m, \"Enable pktinfo dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX0:\n\t\trtw89_write32_mask(rtwdev, R_AX_DBG_CTRL,\n\t\t\t\t   B_AX_DBG_SEL0, 0x80);\n\t\trtw89_write32_mask(rtwdev, R_AX_SYS_STATUS1,\n\t\t\t\t   B_AX_SEL_0XC0_MASK, 1);\n\t\tfallthrough;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX1:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX2:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX3:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX4:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX5:\n\t\tinfo = &dbg_port_dspt_hdt_tx0_5;\n\t\tindex = sel - RTW89_DBG_PORT_SEL_DSPT_HDT_TX0;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, index);\n\t\tseq_printf(m, \"Enable Dispatcher hdt tx%x dump.\\n\", index);\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX6:\n\t\tinfo = &dbg_port_dspt_hdt_tx6;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 6);\n\t\tseq_puts(m, \"Enable Dispatcher hdt tx6 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX7:\n\t\tinfo = &dbg_port_dspt_hdt_tx7;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 7);\n\t\tseq_puts(m, \"Enable Dispatcher hdt tx7 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX8:\n\t\tinfo = &dbg_port_dspt_hdt_tx8;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 8);\n\t\tseq_puts(m, \"Enable Dispatcher hdt tx8 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TX9:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TXA:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TXB:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TXC:\n\t\tinfo = &dbg_port_dspt_hdt_tx9_C;\n\t\tindex = sel + 9 - RTW89_DBG_PORT_SEL_DSPT_HDT_TX9;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, index);\n\t\tseq_printf(m, \"Enable Dispatcher hdt tx%x dump.\\n\", index);\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_TXD:\n\t\tinfo = &dbg_port_dspt_hdt_txD;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 0);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 0xD);\n\t\tseq_puts(m, \"Enable Dispatcher hdt txD dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX0:\n\t\tinfo = &dbg_port_dspt_cdt_tx0;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 0);\n\t\tseq_puts(m, \"Enable Dispatcher cdt tx0 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX1:\n\t\tinfo = &dbg_port_dspt_cdt_tx1;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 1);\n\t\tseq_puts(m, \"Enable Dispatcher cdt tx1 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX3:\n\t\tinfo = &dbg_port_dspt_cdt_tx3;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 3);\n\t\tseq_puts(m, \"Enable Dispatcher cdt tx3 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX4:\n\t\tinfo = &dbg_port_dspt_cdt_tx4;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 4);\n\t\tseq_puts(m, \"Enable Dispatcher cdt tx4 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX5:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX6:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX7:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX8:\n\t\tinfo = &dbg_port_dspt_cdt_tx5_8;\n\t\tindex = sel + 5 - RTW89_DBG_PORT_SEL_DSPT_CDT_TX5;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, index);\n\t\tseq_printf(m, \"Enable Dispatcher cdt tx%x dump.\\n\", index);\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TX9:\n\t\tinfo = &dbg_port_dspt_cdt_tx9;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 9);\n\t\tseq_puts(m, \"Enable Dispatcher cdt tx9 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TXA:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TXB:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_TXC:\n\t\tinfo = &dbg_port_dspt_cdt_txA_C;\n\t\tindex = sel + 0xA - RTW89_DBG_PORT_SEL_DSPT_CDT_TXA;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 1);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, index);\n\t\tseq_printf(m, \"Enable Dispatcher cdt tx%x dump.\\n\", index);\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX0:\n\t\tinfo = &dbg_port_dspt_hdt_rx0;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 2);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 0);\n\t\tseq_puts(m, \"Enable Dispatcher hdt rx0 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX1:\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX2:\n\t\tinfo = &dbg_port_dspt_hdt_rx1_2;\n\t\tindex = sel + 1 - RTW89_DBG_PORT_SEL_DSPT_HDT_RX1;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 2);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, index);\n\t\tseq_printf(m, \"Enable Dispatcher hdt rx%x dump.\\n\", index);\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX3:\n\t\tinfo = &dbg_port_dspt_hdt_rx3;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 2);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 3);\n\t\tseq_puts(m, \"Enable Dispatcher hdt rx3 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX4:\n\t\tinfo = &dbg_port_dspt_hdt_rx4;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 2);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 4);\n\t\tseq_puts(m, \"Enable Dispatcher hdt rx4 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_HDT_RX5:\n\t\tinfo = &dbg_port_dspt_hdt_rx5;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 2);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 5);\n\t\tseq_puts(m, \"Enable Dispatcher hdt rx5 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_RX_P0_0:\n\t\tinfo = &dbg_port_dspt_cdt_rx_p0_0;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 3);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 0);\n\t\tseq_puts(m, \"Enable Dispatcher cdt rx part0 0 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_RX_P0:\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_RX_P0_1:\n\t\tinfo = &dbg_port_dspt_cdt_rx_p0_1;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 3);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 1);\n\t\tseq_puts(m, \"Enable Dispatcher cdt rx part0 1 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_RX_P0_2:\n\t\tinfo = &dbg_port_dspt_cdt_rx_p0_2;\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_INTN_SEL_MASK, 3);\n\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t   B_AX_DISPATCHER_CH_SEL_MASK, 2);\n\t\tseq_puts(m, \"Enable Dispatcher cdt rx part0 2 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_CDT_RX_P1:\n\t\tinfo = &dbg_port_dspt_cdt_rx_p1;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 3);\n\t\tseq_puts(m, \"Enable Dispatcher cdt rx part1 dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_STF_CTRL:\n\t\tinfo = &dbg_port_dspt_stf_ctrl;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 4);\n\t\tseq_puts(m, \"Enable Dispatcher stf control dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_ADDR_CTRL:\n\t\tinfo = &dbg_port_dspt_addr_ctrl;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 5);\n\t\tseq_puts(m, \"Enable Dispatcher addr control dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_WDE_INTF:\n\t\tinfo = &dbg_port_dspt_wde_intf;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 6);\n\t\tseq_puts(m, \"Enable Dispatcher wde interface dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_PLE_INTF:\n\t\tinfo = &dbg_port_dspt_ple_intf;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 7);\n\t\tseq_puts(m, \"Enable Dispatcher ple interface dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_DSPT_FLOW_CTRL:\n\t\tinfo = &dbg_port_dspt_flow_ctrl;\n\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t  B_AX_DISPATCHER_INTN_SEL_MASK, 8);\n\t\tseq_puts(m, \"Enable Dispatcher flow control dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_TXDMA:\n\t\tinfo = &dbg_port_pcie_txdma;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_TXDMA_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_TXDMA_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie txdma dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_RXDMA:\n\t\tinfo = &dbg_port_pcie_rxdma;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_RXDMA_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_RXDMA_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie rxdma dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_CVT:\n\t\tinfo = &dbg_port_pcie_cvt;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_CVT_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_CVT_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie cvt dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_CXPL:\n\t\tinfo = &dbg_port_pcie_cxpl;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_CXPL_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_CXPL_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie cxpl dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_IO:\n\t\tinfo = &dbg_port_pcie_io;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_IO_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_IO_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie io dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_MISC:\n\t\tinfo = &dbg_port_pcie_misc;\n\t\tval32 = rtw89_read32(rtwdev, R_AX_DBG_CTRL);\n\t\tval32 = u32_replace_bits(val32, PCIE_MISC_DBG_SEL, B_AX_DBG_SEL0);\n\t\tval32 = u32_replace_bits(val32, PCIE_MISC_DBG_SEL, B_AX_DBG_SEL1);\n\t\trtw89_write32(rtwdev, R_AX_DBG_CTRL, val32);\n\t\tseq_puts(m, \"Enable pcie misc dump.\\n\");\n\t\tbreak;\n\tcase RTW89_DBG_PORT_SEL_PCIE_MISC2:\n\t\tinfo = &dbg_port_pcie_misc2;\n\t\tval16 = rtw89_read16(rtwdev, R_AX_PCIE_DBG_CTRL);\n\t\tval16 = u16_replace_bits(val16, PCIE_MISC2_DBG_SEL,\n\t\t\t\t\t B_AX_PCIE_DBG_SEL_MASK);\n\t\trtw89_write16(rtwdev, R_AX_PCIE_DBG_CTRL, val16);\n\t\tseq_puts(m, \"Enable pcie misc2 dump.\\n\");\n\t\tbreak;\n\tdefault:\n\t\tseq_puts(m, \"Dbg port select err\\n\");\n\t\treturn NULL;\n\t}\n\n\treturn info;\n}\n\nstatic bool is_dbg_port_valid(struct rtw89_dev *rtwdev, u32 sel)\n{\n\tif (rtwdev->hci.type != RTW89_HCI_TYPE_PCIE &&\n\t    sel >= RTW89_DBG_PORT_SEL_PCIE_TXDMA &&\n\t    sel <= RTW89_DBG_PORT_SEL_PCIE_MISC2)\n\t\treturn false;\n\tif (rtwdev->chip->chip_id == RTL8852B &&\n\t    sel >= RTW89_DBG_PORT_SEL_PTCL_C1 &&\n\t    sel <= RTW89_DBG_PORT_SEL_TXTF_INFOH_C1)\n\t\treturn false;\n\tif (rtw89_mac_check_mac_en(rtwdev, 0, RTW89_DMAC_SEL) &&\n\t    sel >= RTW89_DBG_PORT_SEL_WDE_BUFMGN_FREEPG &&\n\t    sel <= RTW89_DBG_PORT_SEL_PKTINFO)\n\t\treturn false;\n\tif (rtw89_mac_check_mac_en(rtwdev, 0, RTW89_DMAC_SEL) &&\n\t    sel >= RTW89_DBG_PORT_SEL_DSPT_HDT_TX0 &&\n\t    sel <= RTW89_DBG_PORT_SEL_DSPT_FLOW_CTRL)\n\t\treturn false;\n\tif (rtw89_mac_check_mac_en(rtwdev, 0, RTW89_CMAC_SEL) &&\n\t    sel >= RTW89_DBG_PORT_SEL_PTCL_C0 &&\n\t    sel <= RTW89_DBG_PORT_SEL_TXTF_INFOH_C0)\n\t\treturn false;\n\tif (rtw89_mac_check_mac_en(rtwdev, 1, RTW89_CMAC_SEL) &&\n\t    sel >= RTW89_DBG_PORT_SEL_PTCL_C1 &&\n\t    sel <= RTW89_DBG_PORT_SEL_TXTF_INFOH_C1)\n\t\treturn false;\n\n\treturn true;\n}\n\nstatic int rtw89_debug_mac_dbg_port_dump(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct seq_file *m, u32 sel)\n{\n\tconst struct rtw89_mac_dbg_port_info *info;\n\tu8 val8;\n\tu16 val16;\n\tu32 val32;\n\tu32 i;\n\n\tinfo = rtw89_debug_mac_dbg_port_sel(m, rtwdev, sel);\n\tif (!info) {\n\t\trtw89_err(rtwdev, \"failed to select debug port %d\\n\", sel);\n\t\treturn -EINVAL;\n\t}\n\n#define case_DBG_SEL(__sel) \\\n\tcase RTW89_DBG_PORT_SEL_##__sel: \\\n\t\tseq_puts(m, \"Dump debug port \" #__sel \":\\n\"); \\\n\t\tbreak\n\n\tswitch (sel) {\n\tcase_DBG_SEL(PTCL_C0);\n\tcase_DBG_SEL(PTCL_C1);\n\tcase_DBG_SEL(SCH_C0);\n\tcase_DBG_SEL(SCH_C1);\n\tcase_DBG_SEL(TMAC_C0);\n\tcase_DBG_SEL(TMAC_C1);\n\tcase_DBG_SEL(RMAC_C0);\n\tcase_DBG_SEL(RMAC_C1);\n\tcase_DBG_SEL(RMACST_C0);\n\tcase_DBG_SEL(RMACST_C1);\n\tcase_DBG_SEL(TRXPTCL_C0);\n\tcase_DBG_SEL(TRXPTCL_C1);\n\tcase_DBG_SEL(TX_INFOL_C0);\n\tcase_DBG_SEL(TX_INFOH_C0);\n\tcase_DBG_SEL(TX_INFOL_C1);\n\tcase_DBG_SEL(TX_INFOH_C1);\n\tcase_DBG_SEL(TXTF_INFOL_C0);\n\tcase_DBG_SEL(TXTF_INFOH_C0);\n\tcase_DBG_SEL(TXTF_INFOL_C1);\n\tcase_DBG_SEL(TXTF_INFOH_C1);\n\tcase_DBG_SEL(WDE_BUFMGN_FREEPG);\n\tcase_DBG_SEL(WDE_BUFMGN_QUOTA);\n\tcase_DBG_SEL(WDE_BUFMGN_PAGELLT);\n\tcase_DBG_SEL(WDE_BUFMGN_PKTINFO);\n\tcase_DBG_SEL(WDE_QUEMGN_PREPKT);\n\tcase_DBG_SEL(WDE_QUEMGN_NXTPKT);\n\tcase_DBG_SEL(WDE_QUEMGN_QLNKTBL);\n\tcase_DBG_SEL(WDE_QUEMGN_QEMPTY);\n\tcase_DBG_SEL(PLE_BUFMGN_FREEPG);\n\tcase_DBG_SEL(PLE_BUFMGN_QUOTA);\n\tcase_DBG_SEL(PLE_BUFMGN_PAGELLT);\n\tcase_DBG_SEL(PLE_BUFMGN_PKTINFO);\n\tcase_DBG_SEL(PLE_QUEMGN_PREPKT);\n\tcase_DBG_SEL(PLE_QUEMGN_NXTPKT);\n\tcase_DBG_SEL(PLE_QUEMGN_QLNKTBL);\n\tcase_DBG_SEL(PLE_QUEMGN_QEMPTY);\n\tcase_DBG_SEL(PKTINFO);\n\tcase_DBG_SEL(DSPT_HDT_TX0);\n\tcase_DBG_SEL(DSPT_HDT_TX1);\n\tcase_DBG_SEL(DSPT_HDT_TX2);\n\tcase_DBG_SEL(DSPT_HDT_TX3);\n\tcase_DBG_SEL(DSPT_HDT_TX4);\n\tcase_DBG_SEL(DSPT_HDT_TX5);\n\tcase_DBG_SEL(DSPT_HDT_TX6);\n\tcase_DBG_SEL(DSPT_HDT_TX7);\n\tcase_DBG_SEL(DSPT_HDT_TX8);\n\tcase_DBG_SEL(DSPT_HDT_TX9);\n\tcase_DBG_SEL(DSPT_HDT_TXA);\n\tcase_DBG_SEL(DSPT_HDT_TXB);\n\tcase_DBG_SEL(DSPT_HDT_TXC);\n\tcase_DBG_SEL(DSPT_HDT_TXD);\n\tcase_DBG_SEL(DSPT_HDT_TXE);\n\tcase_DBG_SEL(DSPT_HDT_TXF);\n\tcase_DBG_SEL(DSPT_CDT_TX0);\n\tcase_DBG_SEL(DSPT_CDT_TX1);\n\tcase_DBG_SEL(DSPT_CDT_TX3);\n\tcase_DBG_SEL(DSPT_CDT_TX4);\n\tcase_DBG_SEL(DSPT_CDT_TX5);\n\tcase_DBG_SEL(DSPT_CDT_TX6);\n\tcase_DBG_SEL(DSPT_CDT_TX7);\n\tcase_DBG_SEL(DSPT_CDT_TX8);\n\tcase_DBG_SEL(DSPT_CDT_TX9);\n\tcase_DBG_SEL(DSPT_CDT_TXA);\n\tcase_DBG_SEL(DSPT_CDT_TXB);\n\tcase_DBG_SEL(DSPT_CDT_TXC);\n\tcase_DBG_SEL(DSPT_HDT_RX0);\n\tcase_DBG_SEL(DSPT_HDT_RX1);\n\tcase_DBG_SEL(DSPT_HDT_RX2);\n\tcase_DBG_SEL(DSPT_HDT_RX3);\n\tcase_DBG_SEL(DSPT_HDT_RX4);\n\tcase_DBG_SEL(DSPT_HDT_RX5);\n\tcase_DBG_SEL(DSPT_CDT_RX_P0);\n\tcase_DBG_SEL(DSPT_CDT_RX_P0_0);\n\tcase_DBG_SEL(DSPT_CDT_RX_P0_1);\n\tcase_DBG_SEL(DSPT_CDT_RX_P0_2);\n\tcase_DBG_SEL(DSPT_CDT_RX_P1);\n\tcase_DBG_SEL(DSPT_STF_CTRL);\n\tcase_DBG_SEL(DSPT_ADDR_CTRL);\n\tcase_DBG_SEL(DSPT_WDE_INTF);\n\tcase_DBG_SEL(DSPT_PLE_INTF);\n\tcase_DBG_SEL(DSPT_FLOW_CTRL);\n\tcase_DBG_SEL(PCIE_TXDMA);\n\tcase_DBG_SEL(PCIE_RXDMA);\n\tcase_DBG_SEL(PCIE_CVT);\n\tcase_DBG_SEL(PCIE_CXPL);\n\tcase_DBG_SEL(PCIE_IO);\n\tcase_DBG_SEL(PCIE_MISC);\n\tcase_DBG_SEL(PCIE_MISC2);\n\t}\n\n#undef case_DBG_SEL\n\n\tseq_printf(m, \"Sel addr = 0x%X\\n\", info->sel_addr);\n\tseq_printf(m, \"Read addr = 0x%X\\n\", info->rd_addr);\n\n\tfor (i = info->srt; i <= info->end; i++) {\n\t\tswitch (info->sel_byte) {\n\t\tcase 1:\n\t\tdefault:\n\t\t\trtw89_write8_mask(rtwdev, info->sel_addr,\n\t\t\t\t\t  info->sel_msk, i);\n\t\t\tseq_printf(m, \"0x%02X: \", i);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\trtw89_write16_mask(rtwdev, info->sel_addr,\n\t\t\t\t\t   info->sel_msk, i);\n\t\t\tseq_printf(m, \"0x%04X: \", i);\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\trtw89_write32_mask(rtwdev, info->sel_addr,\n\t\t\t\t\t   info->sel_msk, i);\n\t\t\tseq_printf(m, \"0x%04X: \", i);\n\t\t\tbreak;\n\t\t}\n\n\t\tudelay(10);\n\n\t\tswitch (info->rd_byte) {\n\t\tcase 1:\n\t\tdefault:\n\t\t\tval8 = rtw89_read8_mask(rtwdev,\n\t\t\t\t\t\tinfo->rd_addr, info->rd_msk);\n\t\t\tseq_printf(m, \"0x%02X\\n\", val8);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tval16 = rtw89_read16_mask(rtwdev,\n\t\t\t\t\t\t  info->rd_addr, info->rd_msk);\n\t\t\tseq_printf(m, \"0x%04X\\n\", val16);\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tval32 = rtw89_read32_mask(rtwdev,\n\t\t\t\t\t\t  info->rd_addr, info->rd_msk);\n\t\t\tseq_printf(m, \"0x%08X\\n\", val32);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int rtw89_debug_mac_dump_dbg_port(struct rtw89_dev *rtwdev,\n\t\t\t\t\t struct seq_file *m)\n{\n\tu32 sel;\n\tint ret = 0;\n\n\tfor (sel = RTW89_DBG_PORT_SEL_PTCL_C0;\n\t     sel < RTW89_DBG_PORT_SEL_LAST; sel++) {\n\t\tif (!is_dbg_port_valid(rtwdev, sel))\n\t\t\tcontinue;\n\t\tret = rtw89_debug_mac_dbg_port_dump(rtwdev, m, sel);\n\t\tif (ret) {\n\t\t\trtw89_err(rtwdev,\n\t\t\t\t  \"failed to dump debug port %d\\n\", sel);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn ret;\n}\n\nstatic int\nrtw89_debug_priv_mac_dbg_port_dump_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\n\tif (debugfs_priv->dbgpkg_en.ss_dbg)\n\t\trtw89_debug_mac_dump_ss_dbg(rtwdev, m);\n\tif (debugfs_priv->dbgpkg_en.dle_dbg)\n\t\trtw89_debug_mac_dump_dle_dbg(rtwdev, m);\n\tif (debugfs_priv->dbgpkg_en.dmac_dbg)\n\t\trtw89_debug_mac_dump_dmac_dbg(rtwdev, m);\n\tif (debugfs_priv->dbgpkg_en.cmac_dbg)\n\t\trtw89_debug_mac_dump_cmac_dbg(rtwdev, m);\n\tif (debugfs_priv->dbgpkg_en.dbg_port)\n\t\trtw89_debug_mac_dump_dbg_port(rtwdev, m);\n\n\treturn 0;\n};\n\nstatic u8 *rtw89_hex2bin_user(struct rtw89_dev *rtwdev,\n\t\t\t      const char __user *user_buf, size_t count)\n{\n\tchar *buf;\n\tu8 *bin;\n\tint num;\n\tint err = 0;\n\n\tbuf = memdup_user(user_buf, count);\n\tif (IS_ERR(buf))\n\t\treturn buf;\n\n\tnum = count / 2;\n\tbin = kmalloc(num, GFP_KERNEL);\n\tif (!bin) {\n\t\terr = -EFAULT;\n\t\tgoto out;\n\t}\n\n\tif (hex2bin(bin, buf, num)) {\n\t\trtw89_info(rtwdev, \"valid format: H1H2H3...\\n\");\n\t\tkfree(bin);\n\t\terr = -EINVAL;\n\t}\n\nout:\n\tkfree(buf);\n\n\treturn err ? ERR_PTR(err) : bin;\n}\n\nstatic ssize_t rtw89_debug_priv_send_h2c_set(struct file *filp,\n\t\t\t\t\t     const char __user *user_buf,\n\t\t\t\t\t     size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tu8 *h2c;\n\tint ret;\n\tu16 h2c_len = count / 2;\n\n\th2c = rtw89_hex2bin_user(rtwdev, user_buf, count);\n\tif (IS_ERR(h2c))\n\t\treturn -EFAULT;\n\n\tret = rtw89_fw_h2c_raw(rtwdev, h2c, h2c_len);\n\n\tkfree(h2c);\n\n\treturn ret ? ret : count;\n}\n\nstatic int\nrtw89_debug_priv_early_h2c_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_early_h2c *early_h2c;\n\tint seq = 0;\n\n\tmutex_lock(&rtwdev->mutex);\n\tlist_for_each_entry(early_h2c, &rtwdev->early_h2c_list, list)\n\t\tseq_printf(m, \"%d: %*ph\\n\", ++seq, early_h2c->h2c_len, early_h2c->h2c);\n\tmutex_unlock(&rtwdev->mutex);\n\n\treturn 0;\n}\n\nstatic ssize_t\nrtw89_debug_priv_early_h2c_set(struct file *filp, const char __user *user_buf,\n\t\t\t       size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_early_h2c *early_h2c;\n\tu8 *h2c;\n\tu16 h2c_len = count / 2;\n\n\th2c = rtw89_hex2bin_user(rtwdev, user_buf, count);\n\tif (IS_ERR(h2c))\n\t\treturn -EFAULT;\n\n\tif (h2c_len >= 2 && h2c[0] == 0x00 && h2c[1] == 0x00) {\n\t\tkfree(h2c);\n\t\trtw89_fw_free_all_early_h2c(rtwdev);\n\t\tgoto out;\n\t}\n\n\tearly_h2c = kmalloc(sizeof(*early_h2c), GFP_KERNEL);\n\tif (!early_h2c) {\n\t\tkfree(h2c);\n\t\treturn -EFAULT;\n\t}\n\n\tearly_h2c->h2c = h2c;\n\tearly_h2c->h2c_len = h2c_len;\n\n\tmutex_lock(&rtwdev->mutex);\n\tlist_add_tail(&early_h2c->list, &rtwdev->early_h2c_list);\n\tmutex_unlock(&rtwdev->mutex);\n\nout:\n\treturn count;\n}\n\nstatic int rtw89_dbg_trigger_ctrl_error(struct rtw89_dev *rtwdev)\n{\n\tstruct rtw89_cpuio_ctrl ctrl_para = {0};\n\tu16 pkt_id;\n\tint ret;\n\n\trtw89_leave_ps_mode(rtwdev);\n\n\tret = rtw89_mac_dle_buf_req(rtwdev, 0x20, true, &pkt_id);\n\tif (ret)\n\t\treturn ret;\n\n\t \n\tctrl_para.cmd_type = CPUIO_OP_CMD_ENQ_TO_HEAD;\n\tctrl_para.start_pktid = pkt_id;\n\tctrl_para.end_pktid = pkt_id;\n\tctrl_para.pkt_num = 1;  \n\tctrl_para.dst_pid = WDE_DLE_PORT_ID_WDRLS;\n\tctrl_para.dst_qid = WDE_DLE_QUEID_NO_REPORT;\n\n\tif (rtw89_mac_set_cpuio(rtwdev, &ctrl_para, true))\n\t\treturn -EFAULT;\n\n\treturn 0;\n}\n\nstatic int\nrtw89_debug_priv_fw_crash_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\n\tseq_printf(m, \"%d\\n\",\n\t\t   test_bit(RTW89_FLAG_CRASH_SIMULATING, rtwdev->flags));\n\treturn 0;\n}\n\nenum rtw89_dbg_crash_simulation_type {\n\tRTW89_DBG_SIM_CPU_EXCEPTION = 1,\n\tRTW89_DBG_SIM_CTRL_ERROR = 2,\n};\n\nstatic ssize_t\nrtw89_debug_priv_fw_crash_set(struct file *filp, const char __user *user_buf,\n\t\t\t      size_t count, loff_t *loff)\n{\n\tstruct seq_file *m = (struct seq_file *)filp->private_data;\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tint (*sim)(struct rtw89_dev *rtwdev);\n\tu8 crash_type;\n\tint ret;\n\n\tret = kstrtou8_from_user(user_buf, count, 0, &crash_type);\n\tif (ret)\n\t\treturn -EINVAL;\n\n\tswitch (crash_type) {\n\tcase RTW89_DBG_SIM_CPU_EXCEPTION:\n\t\tif (!RTW89_CHK_FW_FEATURE(CRASH_TRIGGER, &rtwdev->fw))\n\t\t\treturn -EOPNOTSUPP;\n\t\tsim = rtw89_fw_h2c_trigger_cpu_exception;\n\t\tbreak;\n\tcase RTW89_DBG_SIM_CTRL_ERROR:\n\t\tsim = rtw89_dbg_trigger_ctrl_error;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tmutex_lock(&rtwdev->mutex);\n\tset_bit(RTW89_FLAG_CRASH_SIMULATING, rtwdev->flags);\n\tret = sim(rtwdev);\n\tmutex_unlock(&rtwdev->mutex);\n\n\tif (ret)\n\t\treturn ret;\n\n\treturn count;\n}\n\nstatic int rtw89_debug_priv_btc_info_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\n\trtw89_btc_dump_info(rtwdev, m);\n\n\treturn 0;\n}\n\nstatic ssize_t rtw89_debug_priv_btc_manual_set(struct file *filp,\n\t\t\t\t\t       const char __user *user_buf,\n\t\t\t\t\t       size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_btc *btc = &rtwdev->btc;\n\tbool btc_manual;\n\tint ret;\n\n\tret = kstrtobool_from_user(user_buf, count, &btc_manual);\n\tif (ret)\n\t\treturn ret;\n\n\tbtc->ctrl.manual = btc_manual;\n\n\treturn count;\n}\n\nstatic ssize_t rtw89_debug_fw_log_manual_set(struct file *filp,\n\t\t\t\t\t     const char __user *user_buf,\n\t\t\t\t\t     size_t count, loff_t *loff)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = filp->private_data;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_fw_log *log = &rtwdev->fw.log;\n\tbool fw_log_manual;\n\n\tif (kstrtobool_from_user(user_buf, count, &fw_log_manual))\n\t\tgoto out;\n\n\tmutex_lock(&rtwdev->mutex);\n\tlog->enable = fw_log_manual;\n\tif (log->enable)\n\t\trtw89_fw_log_prepare(rtwdev);\n\trtw89_fw_h2c_fw_log(rtwdev, fw_log_manual);\n\tmutex_unlock(&rtwdev->mutex);\nout:\n\treturn count;\n}\n\nstatic void rtw89_sta_info_get_iter(void *data, struct ieee80211_sta *sta)\n{\n\tstatic const char * const he_gi_str[] = {\n\t\t[NL80211_RATE_INFO_HE_GI_0_8] = \"0.8\",\n\t\t[NL80211_RATE_INFO_HE_GI_1_6] = \"1.6\",\n\t\t[NL80211_RATE_INFO_HE_GI_3_2] = \"3.2\",\n\t};\n\tstruct rtw89_sta *rtwsta = (struct rtw89_sta *)sta->drv_priv;\n\tstruct rate_info *rate = &rtwsta->ra_report.txrate;\n\tstruct ieee80211_rx_status *status = &rtwsta->rx_status;\n\tstruct seq_file *m = (struct seq_file *)data;\n\tstruct rtw89_dev *rtwdev = rtwsta->rtwdev;\n\tstruct rtw89_hal *hal = &rtwdev->hal;\n\tu8 ant_num = hal->ant_diversity ? 2 : rtwdev->chip->rf_path_num;\n\tbool ant_asterisk = hal->tx_path_diversity || hal->ant_diversity;\n\tu8 evm_min, evm_max;\n\tu8 rssi;\n\tu8 snr;\n\tint i;\n\n\tseq_printf(m, \"TX rate [%d]: \", rtwsta->mac_id);\n\n\tif (rate->flags & RATE_INFO_FLAGS_MCS)\n\t\tseq_printf(m, \"HT MCS-%d%s\", rate->mcs,\n\t\t\t   rate->flags & RATE_INFO_FLAGS_SHORT_GI ? \" SGI\" : \"\");\n\telse if (rate->flags & RATE_INFO_FLAGS_VHT_MCS)\n\t\tseq_printf(m, \"VHT %dSS MCS-%d%s\", rate->nss, rate->mcs,\n\t\t\t   rate->flags & RATE_INFO_FLAGS_SHORT_GI ? \" SGI\" : \"\");\n\telse if (rate->flags & RATE_INFO_FLAGS_HE_MCS)\n\t\tseq_printf(m, \"HE %dSS MCS-%d GI:%s\", rate->nss, rate->mcs,\n\t\t\t   rate->he_gi <= NL80211_RATE_INFO_HE_GI_3_2 ?\n\t\t\t   he_gi_str[rate->he_gi] : \"N/A\");\n\telse\n\t\tseq_printf(m, \"Legacy %d\", rate->legacy);\n\tseq_printf(m, \"%s\", rtwsta->ra_report.might_fallback_legacy ? \" FB_G\" : \"\");\n\tseq_printf(m, \" BW:%u\", rtw89_rate_info_bw_to_mhz(rate->bw));\n\tseq_printf(m, \"\\t(hw_rate=0x%x)\", rtwsta->ra_report.hw_rate);\n\tseq_printf(m, \"\\t==> agg_wait=%d (%d)\\n\", rtwsta->max_agg_wait,\n\t\t   sta->deflink.agg.max_rc_amsdu_len);\n\n\tseq_printf(m, \"RX rate [%d]: \", rtwsta->mac_id);\n\n\tswitch (status->encoding) {\n\tcase RX_ENC_LEGACY:\n\t\tseq_printf(m, \"Legacy %d\", status->rate_idx +\n\t\t\t   (status->band != NL80211_BAND_2GHZ ? 4 : 0));\n\t\tbreak;\n\tcase RX_ENC_HT:\n\t\tseq_printf(m, \"HT MCS-%d%s\", status->rate_idx,\n\t\t\t   status->enc_flags & RX_ENC_FLAG_SHORT_GI ? \" SGI\" : \"\");\n\t\tbreak;\n\tcase RX_ENC_VHT:\n\t\tseq_printf(m, \"VHT %dSS MCS-%d%s\", status->nss, status->rate_idx,\n\t\t\t   status->enc_flags & RX_ENC_FLAG_SHORT_GI ? \" SGI\" : \"\");\n\t\tbreak;\n\tcase RX_ENC_HE:\n\t\tseq_printf(m, \"HE %dSS MCS-%d GI:%s\", status->nss, status->rate_idx,\n\t\t\t   status->he_gi <= NL80211_RATE_INFO_HE_GI_3_2 ?\n\t\t\t   he_gi_str[rate->he_gi] : \"N/A\");\n\t\tbreak;\n\t}\n\tseq_printf(m, \" BW:%u\", rtw89_rate_info_bw_to_mhz(status->bw));\n\tseq_printf(m, \"\\t(hw_rate=0x%x)\\n\", rtwsta->rx_hw_rate);\n\n\trssi = ewma_rssi_read(&rtwsta->avg_rssi);\n\tseq_printf(m, \"RSSI: %d dBm (raw=%d, prev=%d) [\",\n\t\t   RTW89_RSSI_RAW_TO_DBM(rssi), rssi, rtwsta->prev_rssi);\n\tfor (i = 0; i < ant_num; i++) {\n\t\trssi = ewma_rssi_read(&rtwsta->rssi[i]);\n\t\tseq_printf(m, \"%d%s%s\", RTW89_RSSI_RAW_TO_DBM(rssi),\n\t\t\t   ant_asterisk && (hal->antenna_tx & BIT(i)) ? \"*\" : \"\",\n\t\t\t   i + 1 == ant_num ? \"\" : \", \");\n\t}\n\tseq_puts(m, \"]\\n\");\n\n\tseq_puts(m, \"EVM: [\");\n\tfor (i = 0; i < (hal->ant_diversity ? 2 : 1); i++) {\n\t\tevm_min = ewma_evm_read(&rtwsta->evm_min[i]);\n\t\tevm_max = ewma_evm_read(&rtwsta->evm_max[i]);\n\n\t\tseq_printf(m, \"%s(%2u.%02u, %2u.%02u)\", i == 0 ? \"\" : \" \",\n\t\t\t   evm_min >> 2, (evm_min & 0x3) * 25,\n\t\t\t   evm_max >> 2, (evm_max & 0x3) * 25);\n\t}\n\tseq_puts(m, \"]\\t\");\n\n\tsnr = ewma_snr_read(&rtwsta->avg_snr);\n\tseq_printf(m, \"SNR: %u\\n\", snr);\n}\n\nstatic void\nrtw89_debug_append_rx_rate(struct seq_file *m, struct rtw89_pkt_stat *pkt_stat,\n\t\t\t   enum rtw89_hw_rate first_rate, int len)\n{\n\tint i;\n\n\tfor (i = 0; i < len; i++)\n\t\tseq_printf(m, \"%s%u\", i == 0 ? \"\" : \", \",\n\t\t\t   pkt_stat->rx_rate_cnt[first_rate + i]);\n}\n\n#define FIRST_RATE_SAME(rate) {RTW89_HW_RATE_ ## rate, RTW89_HW_RATE_ ## rate}\n#define FIRST_RATE_ENUM(rate) {RTW89_HW_RATE_ ## rate, RTW89_HW_RATE_V1_ ## rate}\n#define FIRST_RATE_GEV1(rate) {RTW89_HW_RATE_INVAL, RTW89_HW_RATE_V1_ ## rate}\n\nstatic const struct rtw89_rx_rate_cnt_info {\n\tenum rtw89_hw_rate first_rate[RTW89_CHIP_GEN_NUM];\n\tint len;\n\tint ext;\n\tconst char *rate_mode;\n} rtw89_rx_rate_cnt_infos[] = {\n\t{FIRST_RATE_SAME(CCK1), 4, 0, \"Legacy:\"},\n\t{FIRST_RATE_SAME(OFDM6), 8, 0, \"OFDM:\"},\n\t{FIRST_RATE_ENUM(MCS0), 8, 0, \"HT 0:\"},\n\t{FIRST_RATE_ENUM(MCS8), 8, 0, \"HT 1:\"},\n\t{FIRST_RATE_ENUM(VHT_NSS1_MCS0), 10, 2, \"VHT 1SS:\"},\n\t{FIRST_RATE_ENUM(VHT_NSS2_MCS0), 10, 2, \"VHT 2SS:\"},\n\t{FIRST_RATE_ENUM(HE_NSS1_MCS0), 12, 0, \"HE 1SS:\"},\n\t{FIRST_RATE_ENUM(HE_NSS2_MCS0), 12, 0, \"HE 2SS:\"},\n\t{FIRST_RATE_GEV1(EHT_NSS1_MCS0), 14, 2, \"EHT 1SS:\"},\n\t{FIRST_RATE_GEV1(EHT_NSS2_MCS0), 14, 0, \"EHT 2SS:\"},\n};\n\nstatic int rtw89_debug_priv_phy_info_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_traffic_stats *stats = &rtwdev->stats;\n\tstruct rtw89_pkt_stat *pkt_stat = &rtwdev->phystat.last_pkt_stat;\n\tconst struct rtw89_chip_info *chip = rtwdev->chip;\n\tconst struct rtw89_rx_rate_cnt_info *info;\n\tenum rtw89_hw_rate first_rate;\n\tint i;\n\n\tseq_printf(m, \"TP TX: %u [%u] Mbps (lv: %d), RX: %u [%u] Mbps (lv: %d)\\n\",\n\t\t   stats->tx_throughput, stats->tx_throughput_raw, stats->tx_tfc_lv,\n\t\t   stats->rx_throughput, stats->rx_throughput_raw, stats->rx_tfc_lv);\n\tseq_printf(m, \"Beacon: %u, TF: %u\\n\", pkt_stat->beacon_nr,\n\t\t   stats->rx_tf_periodic);\n\tseq_printf(m, \"Avg packet length: TX=%u, RX=%u\\n\", stats->tx_avg_len,\n\t\t   stats->rx_avg_len);\n\n\tseq_puts(m, \"RX count:\\n\");\n\n\tfor (i = 0; i < ARRAY_SIZE(rtw89_rx_rate_cnt_infos); i++) {\n\t\tinfo = &rtw89_rx_rate_cnt_infos[i];\n\t\tfirst_rate = info->first_rate[chip->chip_gen];\n\t\tif (first_rate >= RTW89_HW_RATE_NR)\n\t\t\tcontinue;\n\n\t\tseq_printf(m, \"%10s [\", info->rate_mode);\n\t\trtw89_debug_append_rx_rate(m, pkt_stat,\n\t\t\t\t\t   first_rate, info->len);\n\t\tif (info->ext) {\n\t\t\tseq_puts(m, \"][\");\n\t\t\trtw89_debug_append_rx_rate(m, pkt_stat,\n\t\t\t\t\t\t   first_rate + info->len, info->ext);\n\t\t}\n\t\tseq_puts(m, \"]\\n\");\n\t}\n\n\tieee80211_iterate_stations_atomic(rtwdev->hw, rtw89_sta_info_get_iter, m);\n\n\treturn 0;\n}\n\nstatic void rtw89_dump_addr_cam(struct seq_file *m,\n\t\t\t\tstruct rtw89_addr_cam_entry *addr_cam)\n{\n\tstruct rtw89_sec_cam_entry *sec_entry;\n\tint i;\n\n\tseq_printf(m, \"\\taddr_cam_idx=%u\\n\", addr_cam->addr_cam_idx);\n\tseq_printf(m, \"\\t-> bssid_cam_idx=%u\\n\", addr_cam->bssid_cam_idx);\n\tseq_printf(m, \"\\tsec_cam_bitmap=%*ph\\n\", (int)sizeof(addr_cam->sec_cam_map),\n\t\t   addr_cam->sec_cam_map);\n\tfor (i = 0; i < RTW89_SEC_CAM_IN_ADDR_CAM; i++) {\n\t\tsec_entry = addr_cam->sec_entries[i];\n\t\tif (!sec_entry)\n\t\t\tcontinue;\n\t\tseq_printf(m, \"\\tsec[%d]: sec_cam_idx %u\", i, sec_entry->sec_cam_idx);\n\t\tif (sec_entry->ext_key)\n\t\t\tseq_printf(m, \", %u\", sec_entry->sec_cam_idx + 1);\n\t\tseq_puts(m, \"\\n\");\n\t}\n}\n\n__printf(3, 4)\nstatic void rtw89_dump_pkt_offload(struct seq_file *m, struct list_head *pkt_list,\n\t\t\t\t   const char *fmt, ...)\n{\n\tstruct rtw89_pktofld_info *info;\n\tstruct va_format vaf;\n\tva_list args;\n\n\tif (list_empty(pkt_list))\n\t\treturn;\n\n\tva_start(args, fmt);\n\tvaf.va = &args;\n\tvaf.fmt = fmt;\n\n\tseq_printf(m, \"%pV\", &vaf);\n\n\tva_end(args);\n\n\tlist_for_each_entry(info, pkt_list, list)\n\t\tseq_printf(m, \"%d \", info->id);\n\n\tseq_puts(m, \"\\n\");\n}\n\nstatic\nvoid rtw89_vif_ids_get_iter(void *data, u8 *mac, struct ieee80211_vif *vif)\n{\n\tstruct rtw89_vif *rtwvif = (struct rtw89_vif *)vif->drv_priv;\n\tstruct seq_file *m = (struct seq_file *)data;\n\tstruct rtw89_bssid_cam_entry *bssid_cam = &rtwvif->bssid_cam;\n\n\tseq_printf(m, \"VIF [%d] %pM\\n\", rtwvif->mac_id, rtwvif->mac_addr);\n\tseq_printf(m, \"\\tbssid_cam_idx=%u\\n\", bssid_cam->bssid_cam_idx);\n\trtw89_dump_addr_cam(m, &rtwvif->addr_cam);\n\trtw89_dump_pkt_offload(m, &rtwvif->general_pkt_list, \"\\tpkt_ofld[GENERAL]: \");\n}\n\nstatic void rtw89_dump_ba_cam(struct seq_file *m, struct rtw89_sta *rtwsta)\n{\n\tstruct rtw89_vif *rtwvif = rtwsta->rtwvif;\n\tstruct rtw89_dev *rtwdev = rtwvif->rtwdev;\n\tstruct rtw89_ba_cam_entry *entry;\n\tbool first = true;\n\n\tlist_for_each_entry(entry, &rtwsta->ba_cam_list, list) {\n\t\tif (first) {\n\t\t\tseq_puts(m, \"\\tba_cam \");\n\t\t\tfirst = false;\n\t\t} else {\n\t\t\tseq_puts(m, \", \");\n\t\t}\n\t\tseq_printf(m, \"tid[%u]=%d\", entry->tid,\n\t\t\t   (int)(entry - rtwdev->cam_info.ba_cam_entry));\n\t}\n\tseq_puts(m, \"\\n\");\n}\n\nstatic void rtw89_sta_ids_get_iter(void *data, struct ieee80211_sta *sta)\n{\n\tstruct rtw89_sta *rtwsta = (struct rtw89_sta *)sta->drv_priv;\n\tstruct seq_file *m = (struct seq_file *)data;\n\n\tseq_printf(m, \"STA [%d] %pM %s\\n\", rtwsta->mac_id, sta->addr,\n\t\t   sta->tdls ? \"(TDLS)\" : \"\");\n\trtw89_dump_addr_cam(m, &rtwsta->addr_cam);\n\trtw89_dump_ba_cam(m, rtwsta);\n}\n\nstatic int rtw89_debug_priv_stations_get(struct seq_file *m, void *v)\n{\n\tstruct rtw89_debugfs_priv *debugfs_priv = m->private;\n\tstruct rtw89_dev *rtwdev = debugfs_priv->rtwdev;\n\tstruct rtw89_cam_info *cam_info = &rtwdev->cam_info;\n\tu8 idx;\n\n\tmutex_lock(&rtwdev->mutex);\n\n\tseq_puts(m, \"map:\\n\");\n\tseq_printf(m, \"\\tmac_id:    %*ph\\n\", (int)sizeof(rtwdev->mac_id_map),\n\t\t   rtwdev->mac_id_map);\n\tseq_printf(m, \"\\taddr_cam:  %*ph\\n\", (int)sizeof(cam_info->addr_cam_map),\n\t\t   cam_info->addr_cam_map);\n\tseq_printf(m, \"\\tbssid_cam: %*ph\\n\", (int)sizeof(cam_info->bssid_cam_map),\n\t\t   cam_info->bssid_cam_map);\n\tseq_printf(m, \"\\tsec_cam:   %*ph\\n\", (int)sizeof(cam_info->sec_cam_map),\n\t\t   cam_info->sec_cam_map);\n\tseq_printf(m, \"\\tba_cam:    %*ph\\n\", (int)sizeof(cam_info->ba_cam_map),\n\t\t   cam_info->ba_cam_map);\n\tseq_printf(m, \"\\tpkt_ofld:  %*ph\\n\", (int)sizeof(rtwdev->pkt_offload),\n\t\t   rtwdev->pkt_offload);\n\n\tfor (idx = NL80211_BAND_2GHZ; idx < NUM_NL80211_BANDS; idx++) {\n\t\tif (!(rtwdev->chip->support_bands & BIT(idx)))\n\t\t\tcontinue;\n\t\trtw89_dump_pkt_offload(m, &rtwdev->scan_info.pkt_list[idx],\n\t\t\t\t       \"\\t\\t[SCAN %u]: \", idx);\n\t}\n\n\tieee80211_iterate_active_interfaces_atomic(rtwdev->hw,\n\t\tIEEE80211_IFACE_ITER_NORMAL, rtw89_vif_ids_get_iter, m);\n\n\tieee80211_iterate_stations_atomic(rtwdev->hw, rtw89_sta_ids_get_iter, m);\n\n\tmutex_unlock(&rtwdev->mutex);\n\n\treturn 0;\n}\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_read_reg = {\n\t.cb_read = rtw89_debug_priv_read_reg_get,\n\t.cb_write = rtw89_debug_priv_read_reg_select,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_write_reg = {\n\t.cb_write = rtw89_debug_priv_write_reg_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_read_rf = {\n\t.cb_read = rtw89_debug_priv_read_rf_get,\n\t.cb_write = rtw89_debug_priv_read_rf_select,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_write_rf = {\n\t.cb_write = rtw89_debug_priv_write_rf_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_rf_reg_dump = {\n\t.cb_read = rtw89_debug_priv_rf_reg_dump_get,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_txpwr_table = {\n\t.cb_read = rtw89_debug_priv_txpwr_table_get,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_mac_reg_dump = {\n\t.cb_read = rtw89_debug_priv_mac_reg_dump_get,\n\t.cb_write = rtw89_debug_priv_mac_reg_dump_select,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_mac_mem_dump = {\n\t.cb_read = rtw89_debug_priv_mac_mem_dump_get,\n\t.cb_write = rtw89_debug_priv_mac_mem_dump_select,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_mac_dbg_port_dump = {\n\t.cb_read = rtw89_debug_priv_mac_dbg_port_dump_get,\n\t.cb_write = rtw89_debug_priv_mac_dbg_port_dump_select,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_send_h2c = {\n\t.cb_write = rtw89_debug_priv_send_h2c_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_early_h2c = {\n\t.cb_read = rtw89_debug_priv_early_h2c_get,\n\t.cb_write = rtw89_debug_priv_early_h2c_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_fw_crash = {\n\t.cb_read = rtw89_debug_priv_fw_crash_get,\n\t.cb_write = rtw89_debug_priv_fw_crash_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_btc_info = {\n\t.cb_read = rtw89_debug_priv_btc_info_get,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_btc_manual = {\n\t.cb_write = rtw89_debug_priv_btc_manual_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_fw_log_manual = {\n\t.cb_write = rtw89_debug_fw_log_manual_set,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_phy_info = {\n\t.cb_read = rtw89_debug_priv_phy_info_get,\n};\n\nstatic struct rtw89_debugfs_priv rtw89_debug_priv_stations = {\n\t.cb_read = rtw89_debug_priv_stations_get,\n};\n\n#define rtw89_debugfs_add(name, mode, fopname, parent)\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\t\\\n\t\trtw89_debug_priv_ ##name.rtwdev = rtwdev;\t\t\t\\\n\t\tif (!debugfs_create_file(#name, mode,\t\t\t\t\\\n\t\t\t\t\t parent, &rtw89_debug_priv_ ##name,\t\\\n\t\t\t\t\t &file_ops_ ##fopname))\t\t\t\\\n\t\t\tpr_debug(\"Unable to initialize debugfs:%s\\n\", #name);\t\\\n\t} while (0)\n\n#define rtw89_debugfs_add_w(name)\t\t\t\t\t\t\\\n\trtw89_debugfs_add(name, S_IFREG | 0222, single_w, debugfs_topdir)\n#define rtw89_debugfs_add_rw(name)\t\t\t\t\t\t\\\n\trtw89_debugfs_add(name, S_IFREG | 0666, common_rw, debugfs_topdir)\n#define rtw89_debugfs_add_r(name)\t\t\t\t\t\t\\\n\trtw89_debugfs_add(name, S_IFREG | 0444, single_r, debugfs_topdir)\n\nvoid rtw89_debugfs_init(struct rtw89_dev *rtwdev)\n{\n\tstruct dentry *debugfs_topdir;\n\n\tdebugfs_topdir = debugfs_create_dir(\"rtw89\",\n\t\t\t\t\t    rtwdev->hw->wiphy->debugfsdir);\n\n\trtw89_debugfs_add_rw(read_reg);\n\trtw89_debugfs_add_w(write_reg);\n\trtw89_debugfs_add_rw(read_rf);\n\trtw89_debugfs_add_w(write_rf);\n\trtw89_debugfs_add_r(rf_reg_dump);\n\trtw89_debugfs_add_r(txpwr_table);\n\trtw89_debugfs_add_rw(mac_reg_dump);\n\trtw89_debugfs_add_rw(mac_mem_dump);\n\trtw89_debugfs_add_rw(mac_dbg_port_dump);\n\trtw89_debugfs_add_w(send_h2c);\n\trtw89_debugfs_add_rw(early_h2c);\n\trtw89_debugfs_add_rw(fw_crash);\n\trtw89_debugfs_add_r(btc_info);\n\trtw89_debugfs_add_w(btc_manual);\n\trtw89_debugfs_add_w(fw_log_manual);\n\trtw89_debugfs_add_r(phy_info);\n\trtw89_debugfs_add_r(stations);\n}\n#endif\n\n#ifdef CONFIG_RTW89_DEBUGMSG\nvoid __rtw89_debug(struct rtw89_dev *rtwdev,\n\t\t   enum rtw89_debug_mask mask,\n\t\t   const char *fmt, ...)\n{\n\tstruct va_format vaf = {\n\t.fmt = fmt,\n\t};\n\n\tva_list args;\n\n\tva_start(args, fmt);\n\tvaf.va = &args;\n\n\tif (rtw89_debug_mask & mask)\n\t\tdev_printk(KERN_DEBUG, rtwdev->dev, \"%pV\", &vaf);\n\n\tva_end(args);\n}\nEXPORT_SYMBOL(__rtw89_debug);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}