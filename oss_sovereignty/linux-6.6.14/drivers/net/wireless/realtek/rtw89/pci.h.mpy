{
  "module_name": "pci.h",
  "hash_id": "fe5e1f56b32aa06025272c722a0b7bfab5ccd69e0ee33b4907f5374c32c909b0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/pci.h",
  "human_readable_source": " \n \n\n#ifndef __RTW89_PCI_H__\n#define __RTW89_PCI_H__\n\n#include \"txrx.h\"\n\n#define MDIO_PG0_G1 0\n#define MDIO_PG1_G1 1\n#define MDIO_PG0_G2 2\n#define MDIO_PG1_G2 3\n#define RAC_CTRL_PPR\t\t\t0x00\n#define RAC_ANA0A\t\t\t0x0A\n#define B_BAC_EQ_SEL\t\t\tBIT(5)\n#define RAC_ANA0C\t\t\t0x0C\n#define B_PCIE_BIT_PSAVE\t\tBIT(15)\n#define RAC_ANA10\t\t\t0x10\n#define B_PCIE_BIT_PINOUT_DIS\t\tBIT(3)\n#define RAC_REG_REV2\t\t\t0x1B\n#define BAC_CMU_EN_DLY_MASK\t\tGENMASK(15, 12)\n#define PCIE_DPHY_DLY_25US\t\t0x1\n#define RAC_ANA19\t\t\t0x19\n#define B_PCIE_BIT_RD_SEL\t\tBIT(2)\n#define RAC_REG_FLD_0\t\t\t0x1D\n#define BAC_AUTOK_N_MASK\t\tGENMASK(3, 2)\n#define PCIE_AUTOK_4\t\t\t0x3\n#define RAC_ANA1F\t\t\t0x1F\n#define RAC_ANA24\t\t\t0x24\n#define B_AX_DEGLITCH\t\t\tGENMASK(11, 8)\n#define RAC_ANA26\t\t\t0x26\n#define B_AX_RXEN\t\t\tGENMASK(15, 14)\n#define RAC_CTRL_PPR_V1\t\t\t0x30\n#define B_AX_CLK_CALIB_EN\t\tBIT(12)\n#define B_AX_CALIB_EN\t\t\tBIT(13)\n#define B_AX_DIV\t\t\tGENMASK(15, 14)\n#define RAC_SET_PPR_V1\t\t\t0x31\n\n#define R_AX_DBI_FLAG\t\t\t0x1090\n#define B_AX_DBI_RFLAG\t\t\tBIT(17)\n#define B_AX_DBI_WFLAG\t\t\tBIT(16)\n#define B_AX_DBI_WREN_MSK\t\tGENMASK(15, 12)\n#define B_AX_DBI_ADDR_MSK\t\tGENMASK(11, 2)\n#define R_AX_DBI_WDATA\t\t\t0x1094\n#define R_AX_DBI_RDATA\t\t\t0x1098\n\n#define R_AX_MDIO_WDATA\t\t\t0x10A4\n#define R_AX_MDIO_RDATA\t\t\t0x10A6\n\n#define R_AX_PCIE_PS_CTRL_V1\t\t0x3008\n#define B_AX_CMAC_EXIT_L1_EN\t\tBIT(7)\n#define B_AX_DMAC0_EXIT_L1_EN\t\tBIT(6)\n#define B_AX_SEL_XFER_PENDING\t\tBIT(3)\n#define B_AX_SEL_REQ_ENTR_L1\t\tBIT(2)\n#define B_AX_SEL_REQ_EXIT_L1\t\tBIT(0)\n\n#define R_AX_PCIE_MIX_CFG_V1\t\t0x300C\n#define B_AX_ASPM_CTRL_L1\t\tBIT(17)\n#define B_AX_ASPM_CTRL_L0\t\tBIT(16)\n#define B_AX_ASPM_CTRL_MASK\t\tGENMASK(17, 16)\n#define B_AX_XFER_PENDING_FW\t\tBIT(11)\n#define B_AX_XFER_PENDING\t\tBIT(10)\n#define B_AX_REQ_EXIT_L1\t\tBIT(9)\n#define B_AX_REQ_ENTR_L1\t\tBIT(8)\n#define B_AX_L1SUB_DISABLE\t\tBIT(0)\n\n#define R_AX_L1_CLK_CTRL\t\t0x3010\n#define B_AX_CLK_REQ_N\t\t\tBIT(1)\n\n#define R_AX_PCIE_BG_CLR\t\t0x303C\n#define B_AX_BG_CLR_ASYNC_M3\t\tBIT(4)\n\n#define R_AX_PCIE_LAT_CTRL\t\t0x3044\n#define B_AX_CLK_REQ_SEL_OPT\t\tBIT(1)\n#define B_AX_CLK_REQ_SEL\t\tBIT(0)\n\n#define R_AX_PCIE_IO_RCY_M1 0x3100\n#define B_AX_PCIE_IO_RCY_P_M1 BIT(5)\n#define B_AX_PCIE_IO_RCY_WDT_P_M1 BIT(4)\n#define B_AX_PCIE_IO_RCY_WDT_MODE_M1 BIT(3)\n#define B_AX_PCIE_IO_RCY_TRIG_M1 BIT(0)\n\n#define R_AX_PCIE_WDT_TIMER_M1 0x3104\n#define B_AX_PCIE_WDT_TIMER_M1_MASK GENMASK(31, 0)\n\n#define R_AX_PCIE_IO_RCY_M2 0x310C\n#define B_AX_PCIE_IO_RCY_P_M2 BIT(5)\n#define B_AX_PCIE_IO_RCY_WDT_P_M2 BIT(4)\n#define B_AX_PCIE_IO_RCY_WDT_MODE_M2 BIT(3)\n#define B_AX_PCIE_IO_RCY_TRIG_M2 BIT(0)\n\n#define R_AX_PCIE_WDT_TIMER_M2 0x3110\n#define B_AX_PCIE_WDT_TIMER_M2_MASK GENMASK(31, 0)\n\n#define R_AX_PCIE_IO_RCY_E0 0x3118\n#define B_AX_PCIE_IO_RCY_P_E0 BIT(5)\n#define B_AX_PCIE_IO_RCY_WDT_P_E0 BIT(4)\n#define B_AX_PCIE_IO_RCY_WDT_MODE_E0 BIT(3)\n#define B_AX_PCIE_IO_RCY_TRIG_E0 BIT(0)\n\n#define R_AX_PCIE_WDT_TIMER_E0 0x311C\n#define B_AX_PCIE_WDT_TIMER_E0_MASK GENMASK(31, 0)\n\n#define R_AX_PCIE_IO_RCY_S1 0x3124\n#define B_AX_PCIE_IO_RCY_RP_S1 BIT(7)\n#define B_AX_PCIE_IO_RCY_WP_S1 BIT(6)\n#define B_AX_PCIE_IO_RCY_WDT_RP_S1 BIT(5)\n#define B_AX_PCIE_IO_RCY_WDT_WP_S1 BIT(4)\n#define B_AX_PCIE_IO_RCY_WDT_MODE_S1 BIT(3)\n#define B_AX_PCIE_IO_RCY_RTRIG_S1 BIT(1)\n#define B_AX_PCIE_IO_RCY_WTRIG_S1 BIT(0)\n\n#define R_AX_PCIE_WDT_TIMER_S1 0x3128\n#define B_AX_PCIE_WDT_TIMER_S1_MASK GENMASK(31, 0)\n\n#define R_RAC_DIRECT_OFFSET_G1 0x3800\n#define FILTER_OUT_EQ_MASK GENMASK(14, 10)\n#define R_RAC_DIRECT_OFFSET_G2 0x3880\n#define REG_FILTER_OUT_MASK GENMASK(6, 2)\n#define RAC_MULT 2\n\n#define RTW89_PCI_WR_RETRY_CNT\t\t20\n\n \n#define R_AX_HIMR0 0x01A0\n#define B_AX_WDT_TIMEOUT_INT_EN BIT(22)\n#define B_AX_HALT_C2H_INT_EN BIT(21)\n#define R_AX_HISR0 0x01A4\n\n#define R_AX_HIMR1 0x01A8\n#define B_AX_GPIO18_INT_EN BIT(2)\n#define B_AX_GPIO17_INT_EN BIT(1)\n#define B_AX_GPIO16_INT_EN BIT(0)\n\n#define R_AX_HISR1 0x01AC\n#define B_AX_GPIO18_INT BIT(2)\n#define B_AX_GPIO17_INT BIT(1)\n#define B_AX_GPIO16_INT BIT(0)\n\n#define R_AX_MDIO_CFG\t\t\t0x10A0\n#define B_AX_MDIO_PHY_ADDR_MASK\t\tGENMASK(13, 12)\n#define B_AX_MDIO_RFLAG\t\t\tBIT(9)\n#define B_AX_MDIO_WFLAG\t\t\tBIT(8)\n#define B_AX_MDIO_ADDR_MASK\t\tGENMASK(4, 0)\n\n#define R_AX_PCIE_HIMR00\t0x10B0\n#define R_AX_HAXI_HIMR00 0x10B0\n#define B_AX_HC00ISR_IND_INT_EN\t\tBIT(27)\n#define B_AX_HD1ISR_IND_INT_EN\t\tBIT(26)\n#define B_AX_HD0ISR_IND_INT_EN\t\tBIT(25)\n#define B_AX_HS0ISR_IND_INT_EN\t\tBIT(24)\n#define B_AX_HS0ISR_IND_INT_EN_WKARND\tBIT(23)\n#define B_AX_RETRAIN_INT_EN\t\tBIT(21)\n#define B_AX_RPQBD_FULL_INT_EN\t\tBIT(20)\n#define B_AX_RDU_INT_EN\t\t\tBIT(19)\n#define B_AX_RXDMA_STUCK_INT_EN\t\tBIT(18)\n#define B_AX_TXDMA_STUCK_INT_EN\t\tBIT(17)\n#define B_AX_PCIE_HOTRST_INT_EN\t\tBIT(16)\n#define B_AX_PCIE_FLR_INT_EN\t\tBIT(15)\n#define B_AX_PCIE_PERST_INT_EN\t\tBIT(14)\n#define B_AX_TXDMA_CH12_INT_EN\t\tBIT(13)\n#define B_AX_TXDMA_CH9_INT_EN\t\tBIT(12)\n#define B_AX_TXDMA_CH8_INT_EN\t\tBIT(11)\n#define B_AX_TXDMA_ACH7_INT_EN\t\tBIT(10)\n#define B_AX_TXDMA_ACH6_INT_EN\t\tBIT(9)\n#define B_AX_TXDMA_ACH5_INT_EN\t\tBIT(8)\n#define B_AX_TXDMA_ACH4_INT_EN\t\tBIT(7)\n#define B_AX_TXDMA_ACH3_INT_EN\t\tBIT(6)\n#define B_AX_TXDMA_ACH2_INT_EN\t\tBIT(5)\n#define B_AX_TXDMA_ACH1_INT_EN\t\tBIT(4)\n#define B_AX_TXDMA_ACH0_INT_EN\t\tBIT(3)\n#define B_AX_RPQDMA_INT_EN\t\tBIT(2)\n#define B_AX_RXP1DMA_INT_EN\t\tBIT(1)\n#define B_AX_RXDMA_INT_EN\t\tBIT(0)\n\n#define R_AX_PCIE_HISR00\t0x10B4\n#define R_AX_HAXI_HISR00 0x10B4\n#define B_AX_HC00ISR_IND_INT\t\tBIT(27)\n#define B_AX_HD1ISR_IND_INT\t\tBIT(26)\n#define B_AX_HD0ISR_IND_INT\t\tBIT(25)\n#define B_AX_HS0ISR_IND_INT\t\tBIT(24)\n#define B_AX_RETRAIN_INT\t\tBIT(21)\n#define B_AX_RPQBD_FULL_INT\t\tBIT(20)\n#define B_AX_RDU_INT\t\t\tBIT(19)\n#define B_AX_RXDMA_STUCK_INT\t\tBIT(18)\n#define B_AX_TXDMA_STUCK_INT\t\tBIT(17)\n#define B_AX_PCIE_HOTRST_INT\t\tBIT(16)\n#define B_AX_PCIE_FLR_INT\t\tBIT(15)\n#define B_AX_PCIE_PERST_INT\t\tBIT(14)\n#define B_AX_TXDMA_CH12_INT\t\tBIT(13)\n#define B_AX_TXDMA_CH9_INT\t\tBIT(12)\n#define B_AX_TXDMA_CH8_INT\t\tBIT(11)\n#define B_AX_TXDMA_ACH7_INT\t\tBIT(10)\n#define B_AX_TXDMA_ACH6_INT\t\tBIT(9)\n#define B_AX_TXDMA_ACH5_INT\t\tBIT(8)\n#define B_AX_TXDMA_ACH4_INT\t\tBIT(7)\n#define B_AX_TXDMA_ACH3_INT\t\tBIT(6)\n#define B_AX_TXDMA_ACH2_INT\t\tBIT(5)\n#define B_AX_TXDMA_ACH1_INT\t\tBIT(4)\n#define B_AX_TXDMA_ACH0_INT\t\tBIT(3)\n#define B_AX_RPQDMA_INT\t\t\tBIT(2)\n#define B_AX_RXP1DMA_INT\t\tBIT(1)\n#define B_AX_RXDMA_INT\t\t\tBIT(0)\n\n#define R_AX_HAXI_IDCT_MSK 0x10B8\n#define B_AX_TXBD_LEN0_ERR_IDCT_MSK BIT(3)\n#define B_AX_TXBD_4KBOUND_ERR_IDCT_MSK BIT(2)\n#define B_AX_RXMDA_STUCK_IDCT_MSK BIT(1)\n#define B_AX_TXMDA_STUCK_IDCT_MSK BIT(0)\n\n#define R_AX_HAXI_IDCT 0x10BC\n#define B_AX_TXBD_LEN0_ERR_IDCT BIT(3)\n#define B_AX_TXBD_4KBOUND_ERR_IDCT BIT(2)\n#define B_AX_RXMDA_STUCK_IDCT BIT(1)\n#define B_AX_TXMDA_STUCK_IDCT BIT(0)\n\n#define R_AX_HAXI_HIMR10 0x11E0\n#define B_AX_TXDMA_CH11_INT_EN_V1 BIT(1)\n#define B_AX_TXDMA_CH10_INT_EN_V1 BIT(0)\n\n#define R_AX_PCIE_HIMR10\t0x13B0\n#define B_AX_HC10ISR_IND_INT_EN\t\tBIT(28)\n#define B_AX_TXDMA_CH11_INT_EN\t\tBIT(12)\n#define B_AX_TXDMA_CH10_INT_EN\t\tBIT(11)\n\n#define R_AX_PCIE_HISR10\t0x13B4\n#define B_AX_HC10ISR_IND_INT\t\tBIT(28)\n#define B_AX_TXDMA_CH11_INT\t\tBIT(12)\n#define B_AX_TXDMA_CH10_INT\t\tBIT(11)\n\n#define R_AX_PCIE_HIMR00_V1 0x30B0\n#define B_AX_HCI_AXIDMA_INT_EN BIT(29)\n#define B_AX_HC00ISR_IND_INT_EN_V1 BIT(28)\n#define B_AX_HD1ISR_IND_INT_EN_V1 BIT(27)\n#define B_AX_HD0ISR_IND_INT_EN_V1 BIT(26)\n#define B_AX_HS1ISR_IND_INT_EN BIT(25)\n#define B_AX_PCIE_DBG_STE_INT_EN BIT(13)\n\n#define R_AX_PCIE_HISR00_V1 0x30B4\n#define B_AX_HCI_AXIDMA_INT BIT(29)\n#define B_AX_HC00ISR_IND_INT_V1 BIT(28)\n#define B_AX_HD1ISR_IND_INT_V1 BIT(27)\n#define B_AX_HD0ISR_IND_INT_V1 BIT(26)\n#define B_AX_HS1ISR_IND_INT BIT(25)\n#define B_AX_PCIE_DBG_STE_INT BIT(13)\n\n \n#define R_AX_DRV_FW_HSK_0\t0x01B0\n#define R_AX_DRV_FW_HSK_1\t0x01B4\n#define R_AX_DRV_FW_HSK_2\t0x01B8\n#define R_AX_DRV_FW_HSK_3\t0x01BC\n#define R_AX_DRV_FW_HSK_4\t0x01C0\n#define R_AX_DRV_FW_HSK_5\t0x01C4\n#define R_AX_DRV_FW_HSK_6\t0x01C8\n#define R_AX_DRV_FW_HSK_7\t0x01CC\n\n#define R_AX_RXQ_RXBD_IDX\t0x1050\n#define R_AX_RPQ_RXBD_IDX\t0x1054\n#define R_AX_ACH0_TXBD_IDX\t0x1058\n#define R_AX_ACH1_TXBD_IDX\t0x105C\n#define R_AX_ACH2_TXBD_IDX\t0x1060\n#define R_AX_ACH3_TXBD_IDX\t0x1064\n#define R_AX_ACH4_TXBD_IDX\t0x1068\n#define R_AX_ACH5_TXBD_IDX\t0x106C\n#define R_AX_ACH6_TXBD_IDX\t0x1070\n#define R_AX_ACH7_TXBD_IDX\t0x1074\n#define R_AX_CH8_TXBD_IDX\t0x1078  \n#define R_AX_CH9_TXBD_IDX\t0x107C  \n#define R_AX_CH10_TXBD_IDX\t0x137C  \n#define R_AX_CH11_TXBD_IDX\t0x1380  \n#define R_AX_CH12_TXBD_IDX\t0x1080  \n#define R_AX_CH10_TXBD_IDX_V1\t0x11D0\n#define R_AX_CH11_TXBD_IDX_V1\t0x11D4\n#define R_AX_RXQ_RXBD_IDX_V1\t0x1218\n#define R_AX_RPQ_RXBD_IDX_V1\t0x121C\n#define TXBD_HW_IDX_MASK\tGENMASK(27, 16)\n#define TXBD_HOST_IDX_MASK\tGENMASK(11, 0)\n\n#define R_AX_ACH0_TXBD_DESA_L\t0x1110\n#define R_AX_ACH0_TXBD_DESA_H\t0x1114\n#define R_AX_ACH1_TXBD_DESA_L\t0x1118\n#define R_AX_ACH1_TXBD_DESA_H\t0x111C\n#define R_AX_ACH2_TXBD_DESA_L\t0x1120\n#define R_AX_ACH2_TXBD_DESA_H\t0x1124\n#define R_AX_ACH3_TXBD_DESA_L\t0x1128\n#define R_AX_ACH3_TXBD_DESA_H\t0x112C\n#define R_AX_ACH4_TXBD_DESA_L\t0x1130\n#define R_AX_ACH4_TXBD_DESA_H\t0x1134\n#define R_AX_ACH5_TXBD_DESA_L\t0x1138\n#define R_AX_ACH5_TXBD_DESA_H\t0x113C\n#define R_AX_ACH6_TXBD_DESA_L\t0x1140\n#define R_AX_ACH6_TXBD_DESA_H\t0x1144\n#define R_AX_ACH7_TXBD_DESA_L\t0x1148\n#define R_AX_ACH7_TXBD_DESA_H\t0x114C\n#define R_AX_CH8_TXBD_DESA_L\t0x1150\n#define R_AX_CH8_TXBD_DESA_H\t0x1154\n#define R_AX_CH9_TXBD_DESA_L\t0x1158\n#define R_AX_CH9_TXBD_DESA_H\t0x115C\n#define R_AX_CH10_TXBD_DESA_L\t0x1358\n#define R_AX_CH10_TXBD_DESA_H\t0x135C\n#define R_AX_CH11_TXBD_DESA_L\t0x1360\n#define R_AX_CH11_TXBD_DESA_H\t0x1364\n#define R_AX_CH12_TXBD_DESA_L\t0x1160\n#define R_AX_CH12_TXBD_DESA_H\t0x1164\n#define R_AX_RXQ_RXBD_DESA_L\t0x1100\n#define R_AX_RXQ_RXBD_DESA_H\t0x1104\n#define R_AX_RPQ_RXBD_DESA_L\t0x1108\n#define R_AX_RPQ_RXBD_DESA_H\t0x110C\n#define R_AX_RXQ_RXBD_DESA_L_V1 0x1220\n#define R_AX_RXQ_RXBD_DESA_H_V1 0x1224\n#define R_AX_RPQ_RXBD_DESA_L_V1 0x1228\n#define R_AX_RPQ_RXBD_DESA_H_V1 0x122C\n#define R_AX_ACH0_TXBD_DESA_L_V1 0x1230\n#define R_AX_ACH0_TXBD_DESA_H_V1 0x1234\n#define R_AX_ACH1_TXBD_DESA_L_V1 0x1238\n#define R_AX_ACH1_TXBD_DESA_H_V1 0x123C\n#define R_AX_ACH2_TXBD_DESA_L_V1 0x1240\n#define R_AX_ACH2_TXBD_DESA_H_V1 0x1244\n#define R_AX_ACH3_TXBD_DESA_L_V1 0x1248\n#define R_AX_ACH3_TXBD_DESA_H_V1 0x124C\n#define R_AX_ACH4_TXBD_DESA_L_V1 0x1250\n#define R_AX_ACH4_TXBD_DESA_H_V1 0x1254\n#define R_AX_ACH5_TXBD_DESA_L_V1 0x1258\n#define R_AX_ACH5_TXBD_DESA_H_V1 0x125C\n#define R_AX_ACH6_TXBD_DESA_L_V1 0x1260\n#define R_AX_ACH6_TXBD_DESA_H_V1 0x1264\n#define R_AX_ACH7_TXBD_DESA_L_V1 0x1268\n#define R_AX_ACH7_TXBD_DESA_H_V1 0x126C\n#define R_AX_CH8_TXBD_DESA_L_V1 0x1270\n#define R_AX_CH8_TXBD_DESA_H_V1 0x1274\n#define R_AX_CH9_TXBD_DESA_L_V1 0x1278\n#define R_AX_CH9_TXBD_DESA_H_V1 0x127C\n#define R_AX_CH12_TXBD_DESA_L_V1 0x1280\n#define R_AX_CH12_TXBD_DESA_H_V1 0x1284\n#define R_AX_CH10_TXBD_DESA_L_V1 0x1458\n#define R_AX_CH10_TXBD_DESA_H_V1 0x145C\n#define R_AX_CH11_TXBD_DESA_L_V1 0x1460\n#define R_AX_CH11_TXBD_DESA_H_V1 0x1464\n#define B_AX_DESC_NUM_MSK\t\tGENMASK(11, 0)\n\n#define R_AX_RXQ_RXBD_NUM\t0x1020\n#define R_AX_RPQ_RXBD_NUM\t0x1022\n#define R_AX_ACH0_TXBD_NUM\t0x1024\n#define R_AX_ACH1_TXBD_NUM\t0x1026\n#define R_AX_ACH2_TXBD_NUM\t0x1028\n#define R_AX_ACH3_TXBD_NUM\t0x102A\n#define R_AX_ACH4_TXBD_NUM\t0x102C\n#define R_AX_ACH5_TXBD_NUM\t0x102E\n#define R_AX_ACH6_TXBD_NUM\t0x1030\n#define R_AX_ACH7_TXBD_NUM\t0x1032\n#define R_AX_CH8_TXBD_NUM\t0x1034\n#define R_AX_CH9_TXBD_NUM\t0x1036\n#define R_AX_CH10_TXBD_NUM\t0x1338\n#define R_AX_CH11_TXBD_NUM\t0x133A\n#define R_AX_CH12_TXBD_NUM\t0x1038\n#define R_AX_RXQ_RXBD_NUM_V1\t0x1210\n#define R_AX_RPQ_RXBD_NUM_V1\t0x1212\n#define R_AX_CH10_TXBD_NUM_V1\t0x1438\n#define R_AX_CH11_TXBD_NUM_V1\t0x143A\n\n#define R_AX_ACH0_BDRAM_CTRL\t0x1200\n#define R_AX_ACH1_BDRAM_CTRL\t0x1204\n#define R_AX_ACH2_BDRAM_CTRL\t0x1208\n#define R_AX_ACH3_BDRAM_CTRL\t0x120C\n#define R_AX_ACH4_BDRAM_CTRL\t0x1210\n#define R_AX_ACH5_BDRAM_CTRL\t0x1214\n#define R_AX_ACH6_BDRAM_CTRL\t0x1218\n#define R_AX_ACH7_BDRAM_CTRL\t0x121C\n#define R_AX_CH8_BDRAM_CTRL\t0x1220\n#define R_AX_CH9_BDRAM_CTRL\t0x1224\n#define R_AX_CH10_BDRAM_CTRL\t0x1320\n#define R_AX_CH11_BDRAM_CTRL\t0x1324\n#define R_AX_CH12_BDRAM_CTRL\t0x1228\n#define R_AX_ACH0_BDRAM_CTRL_V1 0x1300\n#define R_AX_ACH1_BDRAM_CTRL_V1 0x1304\n#define R_AX_ACH2_BDRAM_CTRL_V1 0x1308\n#define R_AX_ACH3_BDRAM_CTRL_V1 0x130C\n#define R_AX_ACH4_BDRAM_CTRL_V1 0x1310\n#define R_AX_ACH5_BDRAM_CTRL_V1 0x1314\n#define R_AX_ACH6_BDRAM_CTRL_V1 0x1318\n#define R_AX_ACH7_BDRAM_CTRL_V1 0x131C\n#define R_AX_CH8_BDRAM_CTRL_V1 0x1320\n#define R_AX_CH9_BDRAM_CTRL_V1 0x1324\n#define R_AX_CH12_BDRAM_CTRL_V1 0x1328\n#define R_AX_CH10_BDRAM_CTRL_V1 0x1420\n#define R_AX_CH11_BDRAM_CTRL_V1 0x1424\n#define BDRAM_SIDX_MASK\t\tGENMASK(7, 0)\n#define BDRAM_MAX_MASK\t\tGENMASK(15, 8)\n#define BDRAM_MIN_MASK\t\tGENMASK(23, 16)\n\n#define R_AX_PCIE_INIT_CFG1\t0x1000\n#define B_AX_PCIE_RXRST_KEEP_REG\tBIT(23)\n#define B_AX_PCIE_TXRST_KEEP_REG\tBIT(22)\n#define B_AX_PCIE_PERST_KEEP_REG\tBIT(21)\n#define B_AX_PCIE_FLR_KEEP_REG\t\tBIT(20)\n#define B_AX_PCIE_TRAIN_KEEP_REG\tBIT(19)\n#define B_AX_RXBD_MODE\t\t\tBIT(18)\n#define B_AX_PCIE_MAX_RXDMA_MASK\tGENMASK(16, 14)\n#define B_AX_RXHCI_EN\t\t\tBIT(13)\n#define B_AX_LATENCY_CONTROL\t\tBIT(12)\n#define B_AX_TXHCI_EN\t\t\tBIT(11)\n#define B_AX_PCIE_MAX_TXDMA_MASK\tGENMASK(10, 8)\n#define B_AX_TX_TRUNC_MODE\t\tBIT(5)\n#define B_AX_RX_TRUNC_MODE\t\tBIT(4)\n#define B_AX_RST_BDRAM\t\t\tBIT(3)\n#define B_AX_DIS_RXDMA_PRE\t\tBIT(2)\n\n#define R_AX_TXDMA_ADDR_H\t0x10F0\n#define R_AX_RXDMA_ADDR_H\t0x10F4\n\n#define R_AX_PCIE_DMA_STOP1\t0x1010\n#define B_AX_STOP_PCIEIO\t\tBIT(20)\n#define B_AX_STOP_WPDMA\t\t\tBIT(19)\n#define B_AX_STOP_CH12\t\t\tBIT(18)\n#define B_AX_STOP_CH9\t\t\tBIT(17)\n#define B_AX_STOP_CH8\t\t\tBIT(16)\n#define B_AX_STOP_ACH7\t\t\tBIT(15)\n#define B_AX_STOP_ACH6\t\t\tBIT(14)\n#define B_AX_STOP_ACH5\t\t\tBIT(13)\n#define B_AX_STOP_ACH4\t\t\tBIT(12)\n#define B_AX_STOP_ACH3\t\t\tBIT(11)\n#define B_AX_STOP_ACH2\t\t\tBIT(10)\n#define B_AX_STOP_ACH1\t\t\tBIT(9)\n#define B_AX_STOP_ACH0\t\t\tBIT(8)\n#define B_AX_STOP_RPQ\t\t\tBIT(1)\n#define B_AX_STOP_RXQ\t\t\tBIT(0)\n#define B_AX_TX_STOP1_ALL\t\tGENMASK(18, 8)\n#define B_AX_TX_STOP1_MASK\t\t(B_AX_STOP_ACH0 | B_AX_STOP_ACH1 | \\\n\t\t\t\t\t B_AX_STOP_ACH2 | B_AX_STOP_ACH3 | \\\n\t\t\t\t\t B_AX_STOP_ACH4 | B_AX_STOP_ACH5 | \\\n\t\t\t\t\t B_AX_STOP_ACH6 | B_AX_STOP_ACH7 | \\\n\t\t\t\t\t B_AX_STOP_CH8 | B_AX_STOP_CH9 | \\\n\t\t\t\t\t B_AX_STOP_CH12)\n#define B_AX_TX_STOP1_MASK_V1\t\t(B_AX_STOP_ACH0 | B_AX_STOP_ACH1 | \\\n\t\t\t\t\t B_AX_STOP_ACH2 | B_AX_STOP_ACH3 | \\\n\t\t\t\t\t B_AX_STOP_CH8 | B_AX_STOP_CH9 | \\\n\t\t\t\t\t B_AX_STOP_CH12)\n\n#define R_AX_PCIE_DMA_STOP2\t0x1310\n#define B_AX_STOP_CH11\t\t\tBIT(1)\n#define B_AX_STOP_CH10\t\t\tBIT(0)\n#define B_AX_TX_STOP2_ALL\t\tGENMASK(1, 0)\n\n#define R_AX_TXBD_RWPTR_CLR1\t0x1014\n#define B_AX_CLR_CH12_IDX\t\tBIT(10)\n#define B_AX_CLR_CH9_IDX\t\tBIT(9)\n#define B_AX_CLR_CH8_IDX\t\tBIT(8)\n#define B_AX_CLR_ACH7_IDX\t\tBIT(7)\n#define B_AX_CLR_ACH6_IDX\t\tBIT(6)\n#define B_AX_CLR_ACH5_IDX\t\tBIT(5)\n#define B_AX_CLR_ACH4_IDX\t\tBIT(4)\n#define B_AX_CLR_ACH3_IDX\t\tBIT(3)\n#define B_AX_CLR_ACH2_IDX\t\tBIT(2)\n#define B_AX_CLR_ACH1_IDX\t\tBIT(1)\n#define B_AX_CLR_ACH0_IDX\t\tBIT(0)\n#define B_AX_TXBD_CLR1_ALL\t\tGENMASK(10, 0)\n\n#define R_AX_RXBD_RWPTR_CLR\t0x1018\n#define B_AX_CLR_RPQ_IDX\t\tBIT(1)\n#define B_AX_CLR_RXQ_IDX\t\tBIT(0)\n#define B_AX_RXBD_CLR_ALL\t\tGENMASK(1, 0)\n\n#define R_AX_TXBD_RWPTR_CLR2\t0x1314\n#define B_AX_CLR_CH11_IDX\t\tBIT(1)\n#define B_AX_CLR_CH10_IDX\t\tBIT(0)\n#define B_AX_TXBD_CLR2_ALL\t\tGENMASK(1, 0)\n\n#define R_AX_PCIE_DMA_BUSY1\t0x101C\n#define B_AX_PCIEIO_RX_BUSY\t\tBIT(22)\n#define B_AX_PCIEIO_TX_BUSY\t\tBIT(21)\n#define B_AX_PCIEIO_BUSY\t\tBIT(20)\n#define B_AX_WPDMA_BUSY\t\t\tBIT(19)\n#define B_AX_CH12_BUSY\t\t\tBIT(18)\n#define B_AX_CH9_BUSY\t\t\tBIT(17)\n#define B_AX_CH8_BUSY\t\t\tBIT(16)\n#define B_AX_ACH7_BUSY\t\t\tBIT(15)\n#define B_AX_ACH6_BUSY\t\t\tBIT(14)\n#define B_AX_ACH5_BUSY\t\t\tBIT(13)\n#define B_AX_ACH4_BUSY\t\t\tBIT(12)\n#define B_AX_ACH3_BUSY\t\t\tBIT(11)\n#define B_AX_ACH2_BUSY\t\t\tBIT(10)\n#define B_AX_ACH1_BUSY\t\t\tBIT(9)\n#define B_AX_ACH0_BUSY\t\t\tBIT(8)\n#define B_AX_RPQ_BUSY\t\t\tBIT(1)\n#define B_AX_RXQ_BUSY\t\t\tBIT(0)\n#define DMA_BUSY1_CHECK\t\t(B_AX_ACH0_BUSY | B_AX_ACH1_BUSY | B_AX_ACH2_BUSY | \\\n\t\t\t\t B_AX_ACH3_BUSY | B_AX_ACH4_BUSY | B_AX_ACH5_BUSY | \\\n\t\t\t\t B_AX_ACH6_BUSY | B_AX_ACH7_BUSY | B_AX_CH8_BUSY | \\\n\t\t\t\t B_AX_CH9_BUSY | B_AX_CH12_BUSY)\n#define DMA_BUSY1_CHECK_V1\t(B_AX_ACH0_BUSY | B_AX_ACH1_BUSY | B_AX_ACH2_BUSY | \\\n\t\t\t\t B_AX_ACH3_BUSY | B_AX_CH8_BUSY | B_AX_CH9_BUSY | \\\n\t\t\t\t B_AX_CH12_BUSY)\n\n#define R_AX_PCIE_DMA_BUSY2\t0x131C\n#define B_AX_CH11_BUSY\t\t\tBIT(1)\n#define B_AX_CH10_BUSY\t\t\tBIT(0)\n\n \n#define R_AX_PCIE_INIT_CFG2\t\t0x1004\n#define B_AX_WD_ITVL_IDLE\t\tGENMASK(27, 24)\n#define B_AX_WD_ITVL_ACT\t\tGENMASK(19, 16)\n#define B_AX_PCIE_RX_APPLEN_MASK\tGENMASK(13, 0)\n\n#define R_AX_PCIE_PS_CTRL\t\t0x1008\n#define B_AX_L1OFF_PWR_OFF_EN\t\tBIT(5)\n\n#define R_AX_INT_MIT_RX\t\t\t0x10D4\n#define B_AX_RXMIT_RXP2_SEL\t\tBIT(19)\n#define B_AX_RXMIT_RXP1_SEL\t\tBIT(18)\n#define B_AX_RXTIMER_UNIT_MASK\t\tGENMASK(17, 16)\n#define AX_RXTIMER_UNIT_64US\t\t0\n#define AX_RXTIMER_UNIT_128US\t\t1\n#define AX_RXTIMER_UNIT_256US\t\t2\n#define AX_RXTIMER_UNIT_512US\t\t3\n#define B_AX_RXCOUNTER_MATCH_MASK\tGENMASK(15, 8)\n#define B_AX_RXTIMER_MATCH_MASK\t\tGENMASK(7, 0)\n\n#define R_AX_DBG_ERR_FLAG\t\t0x11C4\n#define B_AX_PCIE_RPQ_FULL\t\tBIT(29)\n#define B_AX_PCIE_RXQ_FULL\t\tBIT(28)\n#define B_AX_CPL_STATUS_MASK\t\tGENMASK(27, 25)\n#define B_AX_RX_STUCK\t\t\tBIT(22)\n#define B_AX_TX_STUCK\t\t\tBIT(21)\n#define B_AX_PCIEDBG_TXERR0\t\tBIT(16)\n#define B_AX_PCIE_RXP1_ERR0\t\tBIT(4)\n#define B_AX_PCIE_TXBD_LEN0\t\tBIT(1)\n#define B_AX_PCIE_TXBD_4KBOUD_LENERR\tBIT(0)\n\n#define R_AX_TXBD_RWPTR_CLR2_V1\t\t0x11C4\n#define B_AX_CLR_CH11_IDX\t\tBIT(1)\n#define B_AX_CLR_CH10_IDX\t\tBIT(0)\n\n#define R_AX_LBC_WATCHDOG\t\t0x11D8\n#define B_AX_LBC_TIMER\t\t\tGENMASK(7, 4)\n#define B_AX_LBC_FLAG\t\t\tBIT(1)\n#define B_AX_LBC_EN\t\t\tBIT(0)\n\n#define R_AX_RXBD_RWPTR_CLR_V1\t\t0x1200\n#define B_AX_CLR_RPQ_IDX\t\tBIT(1)\n#define B_AX_CLR_RXQ_IDX\t\tBIT(0)\n\n#define R_AX_HAXI_EXP_CTRL\t\t0x1204\n#define B_AX_MAX_TAG_NUM_V1_MASK\tGENMASK(2, 0)\n\n#define R_AX_PCIE_EXP_CTRL\t\t0x13F0\n#define B_AX_EN_CHKDSC_NO_RX_STUCK\tBIT(20)\n#define B_AX_MAX_TAG_NUM\t\tGENMASK(18, 16)\n#define B_AX_SIC_EN_FORCE_CLKREQ\tBIT(4)\n\n#define R_AX_PCIE_RX_PREF_ADV\t\t0x13F4\n#define B_AX_RXDMA_PREF_ADV_EN\t\tBIT(0)\n\n#define R_AX_PCIE_HRPWM_V1\t\t0x30C0\n#define R_AX_PCIE_CRPWM\t\t\t0x30C4\n\n#define RTW89_PCI_TXBD_NUM_MAX\t\t256\n#define RTW89_PCI_RXBD_NUM_MAX\t\t256\n#define RTW89_PCI_TXWD_NUM_MAX\t\t512\n#define RTW89_PCI_TXWD_PAGE_SIZE\t128\n#define RTW89_PCI_ADDRINFO_MAX\t\t4\n#define RTW89_PCI_RX_BUF_SIZE\t\t11460\n\n#define RTW89_PCI_POLL_BDRAM_RST_CNT\t100\n#define RTW89_PCI_MULTITAG\t\t8\n\n \n#define RTW89_PCIE_L1_STS_V1\t\t0x80\n#define RTW89_BCFG_LINK_SPEED_MASK\tGENMASK(19, 16)\n#define RTW89_PCIE_GEN1_SPEED\t\t0x01\n#define RTW89_PCIE_GEN2_SPEED\t\t0x02\n#define RTW89_PCIE_PHY_RATE\t\t0x82\n#define RTW89_PCIE_PHY_RATE_MASK\tGENMASK(1, 0)\n#define RTW89_PCIE_L1SS_STS_V1\t\t0x0168\n#define RTW89_PCIE_BIT_ASPM_L11\t\tBIT(3)\n#define RTW89_PCIE_BIT_ASPM_L12\t\tBIT(2)\n#define RTW89_PCIE_BIT_PCI_L11\t\tBIT(1)\n#define RTW89_PCIE_BIT_PCI_L12\t\tBIT(0)\n#define RTW89_PCIE_ASPM_CTRL\t\t0x070F\n#define RTW89_L1DLY_MASK\t\tGENMASK(5, 3)\n#define RTW89_L0DLY_MASK\t\tGENMASK(2, 0)\n#define RTW89_PCIE_TIMER_CTRL\t\t0x0718\n#define RTW89_PCIE_BIT_L1SUB\t\tBIT(5)\n#define RTW89_PCIE_L1_CTRL\t\t0x0719\n#define RTW89_PCIE_BIT_CLK\t\tBIT(4)\n#define RTW89_PCIE_BIT_L1\t\tBIT(3)\n#define RTW89_PCIE_CLK_CTRL\t\t0x0725\n#define RTW89_PCIE_RST_MSTATE\t\t0x0B48\n#define RTW89_PCIE_BIT_CFG_RST_MSTATE\tBIT(0)\n\n#define INTF_INTGRA_MINREF_V1\t90\n#define INTF_INTGRA_HOSTREF_V1\t100\n\nenum rtw89_pcie_phy {\n\tPCIE_PHY_GEN1,\n\tPCIE_PHY_GEN2,\n\tPCIE_PHY_GEN1_UNDEFINE = 0x7F,\n};\n\nenum rtw89_pcie_l0sdly {\n\tPCIE_L0SDLY_1US = 0,\n\tPCIE_L0SDLY_2US = 1,\n\tPCIE_L0SDLY_3US = 2,\n\tPCIE_L0SDLY_4US = 3,\n\tPCIE_L0SDLY_5US = 4,\n\tPCIE_L0SDLY_6US = 5,\n\tPCIE_L0SDLY_7US = 6,\n};\n\nenum rtw89_pcie_l1dly {\n\tPCIE_L1DLY_16US = 4,\n\tPCIE_L1DLY_32US = 5,\n\tPCIE_L1DLY_64US = 6,\n\tPCIE_L1DLY_HW_INFI = 7,\n};\n\nenum rtw89_pcie_clkdly_hw {\n\tPCIE_CLKDLY_HW_0 = 0,\n\tPCIE_CLKDLY_HW_30US = 0x1,\n\tPCIE_CLKDLY_HW_50US = 0x2,\n\tPCIE_CLKDLY_HW_100US = 0x3,\n\tPCIE_CLKDLY_HW_150US = 0x4,\n\tPCIE_CLKDLY_HW_200US = 0x5,\n};\n\nenum mac_ax_bd_trunc_mode {\n\tMAC_AX_BD_NORM,\n\tMAC_AX_BD_TRUNC,\n\tMAC_AX_BD_DEF = 0xFE\n};\n\nenum mac_ax_rxbd_mode {\n\tMAC_AX_RXBD_PKT,\n\tMAC_AX_RXBD_SEP,\n\tMAC_AX_RXBD_DEF = 0xFE\n};\n\nenum mac_ax_tag_mode {\n\tMAC_AX_TAG_SGL,\n\tMAC_AX_TAG_MULTI,\n\tMAC_AX_TAG_DEF = 0xFE\n};\n\nenum mac_ax_tx_burst {\n\tMAC_AX_TX_BURST_16B = 0,\n\tMAC_AX_TX_BURST_32B = 1,\n\tMAC_AX_TX_BURST_64B = 2,\n\tMAC_AX_TX_BURST_V1_64B = 0,\n\tMAC_AX_TX_BURST_128B = 3,\n\tMAC_AX_TX_BURST_V1_128B = 1,\n\tMAC_AX_TX_BURST_256B = 4,\n\tMAC_AX_TX_BURST_V1_256B = 2,\n\tMAC_AX_TX_BURST_512B = 5,\n\tMAC_AX_TX_BURST_1024B = 6,\n\tMAC_AX_TX_BURST_2048B = 7,\n\tMAC_AX_TX_BURST_DEF = 0xFE\n};\n\nenum mac_ax_rx_burst {\n\tMAC_AX_RX_BURST_16B = 0,\n\tMAC_AX_RX_BURST_32B = 1,\n\tMAC_AX_RX_BURST_64B = 2,\n\tMAC_AX_RX_BURST_V1_64B = 0,\n\tMAC_AX_RX_BURST_128B = 3,\n\tMAC_AX_RX_BURST_V1_128B = 1,\n\tMAC_AX_RX_BURST_V1_256B = 0,\n\tMAC_AX_RX_BURST_DEF = 0xFE\n};\n\nenum mac_ax_wd_dma_intvl {\n\tMAC_AX_WD_DMA_INTVL_0S,\n\tMAC_AX_WD_DMA_INTVL_256NS,\n\tMAC_AX_WD_DMA_INTVL_512NS,\n\tMAC_AX_WD_DMA_INTVL_768NS,\n\tMAC_AX_WD_DMA_INTVL_1US,\n\tMAC_AX_WD_DMA_INTVL_1_5US,\n\tMAC_AX_WD_DMA_INTVL_2US,\n\tMAC_AX_WD_DMA_INTVL_4US,\n\tMAC_AX_WD_DMA_INTVL_8US,\n\tMAC_AX_WD_DMA_INTVL_16US,\n\tMAC_AX_WD_DMA_INTVL_DEF = 0xFE\n};\n\nenum mac_ax_multi_tag_num {\n\tMAC_AX_TAG_NUM_1,\n\tMAC_AX_TAG_NUM_2,\n\tMAC_AX_TAG_NUM_3,\n\tMAC_AX_TAG_NUM_4,\n\tMAC_AX_TAG_NUM_5,\n\tMAC_AX_TAG_NUM_6,\n\tMAC_AX_TAG_NUM_7,\n\tMAC_AX_TAG_NUM_8,\n\tMAC_AX_TAG_NUM_DEF = 0xFE\n};\n\nenum mac_ax_lbc_tmr {\n\tMAC_AX_LBC_TMR_8US = 0,\n\tMAC_AX_LBC_TMR_16US,\n\tMAC_AX_LBC_TMR_32US,\n\tMAC_AX_LBC_TMR_64US,\n\tMAC_AX_LBC_TMR_128US,\n\tMAC_AX_LBC_TMR_256US,\n\tMAC_AX_LBC_TMR_512US,\n\tMAC_AX_LBC_TMR_1MS,\n\tMAC_AX_LBC_TMR_2MS,\n\tMAC_AX_LBC_TMR_4MS,\n\tMAC_AX_LBC_TMR_8MS,\n\tMAC_AX_LBC_TMR_DEF = 0xFE\n};\n\nenum mac_ax_pcie_func_ctrl {\n\tMAC_AX_PCIE_DISABLE = 0,\n\tMAC_AX_PCIE_ENABLE = 1,\n\tMAC_AX_PCIE_DEFAULT = 0xFE,\n\tMAC_AX_PCIE_IGNORE = 0xFF\n};\n\nenum mac_ax_io_rcy_tmr {\n\tMAC_AX_IO_RCY_ANA_TMR_2MS = 24000,\n\tMAC_AX_IO_RCY_ANA_TMR_4MS = 48000,\n\tMAC_AX_IO_RCY_ANA_TMR_6MS = 72000,\n\tMAC_AX_IO_RCY_ANA_TMR_DEF = 0xFE\n};\n\nenum rtw89_pci_intr_mask_cfg {\n\tRTW89_PCI_INTR_MASK_RESET,\n\tRTW89_PCI_INTR_MASK_NORMAL,\n\tRTW89_PCI_INTR_MASK_LOW_POWER,\n\tRTW89_PCI_INTR_MASK_RECOVERY_START,\n\tRTW89_PCI_INTR_MASK_RECOVERY_COMPLETE,\n};\n\nstruct rtw89_pci_isrs;\nstruct rtw89_pci;\n\nstruct rtw89_pci_bd_idx_addr {\n\tu32 tx_bd_addrs[RTW89_TXCH_NUM];\n\tu32 rx_bd_addrs[RTW89_RXCH_NUM];\n};\n\nstruct rtw89_pci_ch_dma_addr {\n\tu32 num;\n\tu32 idx;\n\tu32 bdram;\n\tu32 desa_l;\n\tu32 desa_h;\n};\n\nstruct rtw89_pci_ch_dma_addr_set {\n\tstruct rtw89_pci_ch_dma_addr tx[RTW89_TXCH_NUM];\n\tstruct rtw89_pci_ch_dma_addr rx[RTW89_RXCH_NUM];\n};\n\nstruct rtw89_pci_bd_ram {\n\tu8 start_idx;\n\tu8 max_num;\n\tu8 min_num;\n};\n\nstruct rtw89_pci_info {\n\tenum mac_ax_bd_trunc_mode txbd_trunc_mode;\n\tenum mac_ax_bd_trunc_mode rxbd_trunc_mode;\n\tenum mac_ax_rxbd_mode rxbd_mode;\n\tenum mac_ax_tag_mode tag_mode;\n\tenum mac_ax_tx_burst tx_burst;\n\tenum mac_ax_rx_burst rx_burst;\n\tenum mac_ax_wd_dma_intvl wd_dma_idle_intvl;\n\tenum mac_ax_wd_dma_intvl wd_dma_act_intvl;\n\tenum mac_ax_multi_tag_num multi_tag_num;\n\tenum mac_ax_pcie_func_ctrl lbc_en;\n\tenum mac_ax_lbc_tmr lbc_tmr;\n\tenum mac_ax_pcie_func_ctrl autok_en;\n\tenum mac_ax_pcie_func_ctrl io_rcy_en;\n\tenum mac_ax_io_rcy_tmr io_rcy_tmr;\n\n\tu32 init_cfg_reg;\n\tu32 txhci_en_bit;\n\tu32 rxhci_en_bit;\n\tu32 rxbd_mode_bit;\n\tu32 exp_ctrl_reg;\n\tu32 max_tag_num_mask;\n\tu32 rxbd_rwptr_clr_reg;\n\tu32 txbd_rwptr_clr2_reg;\n\tstruct rtw89_reg_def dma_stop1;\n\tstruct rtw89_reg_def dma_stop2;\n\tstruct rtw89_reg_def dma_busy1;\n\tu32 dma_busy2_reg;\n\tu32 dma_busy3_reg;\n\n\tu32 rpwm_addr;\n\tu32 cpwm_addr;\n\tu32 tx_dma_ch_mask;\n\tconst struct rtw89_pci_bd_idx_addr *bd_idx_addr_low_power;\n\tconst struct rtw89_pci_ch_dma_addr_set *dma_addr_set;\n\tconst struct rtw89_pci_bd_ram (*bd_ram_table)[RTW89_TXCH_NUM];\n\n\tint (*ltr_set)(struct rtw89_dev *rtwdev, bool en);\n\tu32 (*fill_txaddr_info)(struct rtw89_dev *rtwdev,\n\t\t\t\tvoid *txaddr_info_addr, u32 total_len,\n\t\t\t\tdma_addr_t dma, u8 *add_info_nr);\n\tvoid (*config_intr_mask)(struct rtw89_dev *rtwdev);\n\tvoid (*enable_intr)(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\n\tvoid (*disable_intr)(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\n\tvoid (*recognize_intrs)(struct rtw89_dev *rtwdev,\n\t\t\t\tstruct rtw89_pci *rtwpci,\n\t\t\t\tstruct rtw89_pci_isrs *isrs);\n};\n\nstruct rtw89_pci_tx_data {\n\tdma_addr_t dma;\n};\n\nstruct rtw89_pci_rx_info {\n\tdma_addr_t dma;\n\tu32 fs:1, ls:1, tag:11, len:14;\n};\n\n#define RTW89_PCI_TXBD_OPTION_LS\tBIT(14)\n\nstruct rtw89_pci_tx_bd_32 {\n\t__le16 length;\n\t__le16 option;\n\t__le32 dma;\n} __packed;\n\n#define RTW89_PCI_TXWP_VALID\t\tBIT(15)\n\nstruct rtw89_pci_tx_wp_info {\n\t__le16 seq0;\n\t__le16 seq1;\n\t__le16 seq2;\n\t__le16 seq3;\n} __packed;\n\n#define RTW89_PCI_ADDR_MSDU_LS\t\tBIT(15)\n#define RTW89_PCI_ADDR_LS\t\tBIT(14)\n#define RTW89_PCI_ADDR_HIGH(a)\t\t(((a) << 6) & GENMASK(13, 6))\n#define RTW89_PCI_ADDR_NUM(x)\t\t((x) & GENMASK(5, 0))\n\nstruct rtw89_pci_tx_addr_info_32 {\n\t__le16 length;\n\t__le16 option;\n\t__le32 dma;\n} __packed;\n\n#define RTW89_TXADDR_INFO_NR_V1\t\t10\n\nstruct rtw89_pci_tx_addr_info_32_v1 {\n\t__le16 length_opt;\n#define B_PCIADDR_LEN_V1_MASK\t\tGENMASK(10, 0)\n#define B_PCIADDR_HIGH_SEL_V1_MASK\tGENMASK(14, 11)\n#define B_PCIADDR_LS_V1_MASK\t\tBIT(15)\n#define TXADDR_INFO_LENTHG_V1_MAX\tALIGN_DOWN(BIT(11) - 1, 4)\n\t__le16 dma_low_lsb;\n\t__le16 dma_low_msb;\n} __packed;\n\n#define RTW89_PCI_RPP_POLLUTED\t\tBIT(31)\n#define RTW89_PCI_RPP_SEQ\t\tGENMASK(30, 16)\n#define RTW89_PCI_RPP_TX_STATUS\t\tGENMASK(15, 13)\n#define RTW89_TX_DONE\t\t\t0x0\n#define RTW89_TX_RETRY_LIMIT\t\t0x1\n#define RTW89_TX_LIFE_TIME\t\t0x2\n#define RTW89_TX_MACID_DROP\t\t0x3\n#define RTW89_PCI_RPP_QSEL\t\tGENMASK(12, 8)\n#define RTW89_PCI_RPP_MACID\t\tGENMASK(7, 0)\n\nstruct rtw89_pci_rpp_fmt {\n\t__le32 dword;\n} __packed;\n\nstruct rtw89_pci_rx_bd_32 {\n\t__le16 buf_size;\n\t__le16 rsvd;\n\t__le32 dma;\n} __packed;\n\n#define RTW89_PCI_RXBD_FS\t\tBIT(15)\n#define RTW89_PCI_RXBD_LS\t\tBIT(14)\n#define RTW89_PCI_RXBD_WRITE_SIZE\tGENMASK(13, 0)\n#define RTW89_PCI_RXBD_TAG\t\tGENMASK(28, 16)\n\nstruct rtw89_pci_rxbd_info {\n\t__le32 dword;\n};\n\nstruct rtw89_pci_tx_wd {\n\tstruct list_head list;\n\tstruct sk_buff_head queue;\n\n\tvoid *vaddr;\n\tdma_addr_t paddr;\n\tu32 len;\n\tu32 seq;\n};\n\nstruct rtw89_pci_dma_ring {\n\tvoid *head;\n\tu8 desc_size;\n\tdma_addr_t dma;\n\n\tstruct rtw89_pci_ch_dma_addr addr;\n\n\tu32 len;\n\tu32 wp;  \n\tu32 rp;  \n};\n\nstruct rtw89_pci_tx_wd_ring {\n\tvoid *head;\n\tdma_addr_t dma;\n\n\tstruct rtw89_pci_tx_wd pages[RTW89_PCI_TXWD_NUM_MAX];\n\tstruct list_head free_pages;\n\n\tu32 page_size;\n\tu32 page_num;\n\tu32 curr_num;\n};\n\n#define RTW89_RX_TAG_MAX\t\t0x1fff\n\nstruct rtw89_pci_tx_ring {\n\tstruct rtw89_pci_tx_wd_ring wd_ring;\n\tstruct rtw89_pci_dma_ring bd_ring;\n\tstruct list_head busy_pages;\n\tu8 txch;\n\tbool dma_enabled;\n\tu16 tag;  \n\n\tu64 tx_cnt;\n\tu64 tx_acked;\n\tu64 tx_retry_lmt;\n\tu64 tx_life_time;\n\tu64 tx_mac_id_drop;\n};\n\nstruct rtw89_pci_rx_ring {\n\tstruct rtw89_pci_dma_ring bd_ring;\n\tstruct sk_buff *buf[RTW89_PCI_RXBD_NUM_MAX];\n\tu32 buf_sz;\n\tstruct sk_buff *diliver_skb;\n\tstruct rtw89_rx_desc_info diliver_desc;\n};\n\nstruct rtw89_pci_isrs {\n\tu32 ind_isrs;\n\tu32 halt_c2h_isrs;\n\tu32 isrs[2];\n};\n\nstruct rtw89_pci {\n\tstruct pci_dev *pdev;\n\n\t \n\tspinlock_t irq_lock;\n\t \n\tspinlock_t trx_lock;\n\tbool running;\n\tbool low_power;\n\tbool under_recovery;\n\tstruct rtw89_pci_tx_ring tx_rings[RTW89_TXCH_NUM];\n\tstruct rtw89_pci_rx_ring rx_rings[RTW89_RXCH_NUM];\n\tstruct sk_buff_head h2c_queue;\n\tstruct sk_buff_head h2c_release_queue;\n\tDECLARE_BITMAP(kick_map, RTW89_TXCH_NUM);\n\n\tu32 ind_intrs;\n\tu32 halt_c2h_intrs;\n\tu32 intrs[2];\n\tvoid __iomem *mmap;\n};\n\nstatic inline struct rtw89_pci_rx_info *RTW89_PCI_RX_SKB_CB(struct sk_buff *skb)\n{\n\tstruct ieee80211_tx_info *info = IEEE80211_SKB_CB(skb);\n\n\tBUILD_BUG_ON(sizeof(struct rtw89_pci_tx_data) >\n\t\t     sizeof(info->status.status_driver_data));\n\n\treturn (struct rtw89_pci_rx_info *)skb->cb;\n}\n\nstatic inline struct rtw89_pci_rx_bd_32 *\nRTW89_PCI_RX_BD(struct rtw89_pci_rx_ring *rx_ring, u32 idx)\n{\n\tstruct rtw89_pci_dma_ring *bd_ring = &rx_ring->bd_ring;\n\tu8 *head = bd_ring->head;\n\tu32 desc_size = bd_ring->desc_size;\n\tu32 offset = idx * desc_size;\n\n\treturn (struct rtw89_pci_rx_bd_32 *)(head + offset);\n}\n\nstatic inline void\nrtw89_pci_rxbd_increase(struct rtw89_pci_rx_ring *rx_ring, u32 cnt)\n{\n\tstruct rtw89_pci_dma_ring *bd_ring = &rx_ring->bd_ring;\n\n\tbd_ring->wp += cnt;\n\n\tif (bd_ring->wp >= bd_ring->len)\n\t\tbd_ring->wp -= bd_ring->len;\n}\n\nstatic inline struct rtw89_pci_tx_data *RTW89_PCI_TX_SKB_CB(struct sk_buff *skb)\n{\n\tstruct rtw89_tx_skb_data *data = RTW89_TX_SKB_CB(skb);\n\n\treturn (struct rtw89_pci_tx_data *)data->hci_priv;\n}\n\nstatic inline struct rtw89_pci_tx_bd_32 *\nrtw89_pci_get_next_txbd(struct rtw89_pci_tx_ring *tx_ring)\n{\n\tstruct rtw89_pci_dma_ring *bd_ring = &tx_ring->bd_ring;\n\tstruct rtw89_pci_tx_bd_32 *tx_bd, *head;\n\n\thead = bd_ring->head;\n\ttx_bd = head + bd_ring->wp;\n\n\treturn tx_bd;\n}\n\nstatic inline struct rtw89_pci_tx_wd *\nrtw89_pci_dequeue_txwd(struct rtw89_pci_tx_ring *tx_ring)\n{\n\tstruct rtw89_pci_tx_wd_ring *wd_ring = &tx_ring->wd_ring;\n\tstruct rtw89_pci_tx_wd *txwd;\n\n\ttxwd = list_first_entry_or_null(&wd_ring->free_pages,\n\t\t\t\t\tstruct rtw89_pci_tx_wd, list);\n\tif (!txwd)\n\t\treturn NULL;\n\n\tlist_del_init(&txwd->list);\n\ttxwd->len = 0;\n\twd_ring->curr_num--;\n\n\treturn txwd;\n}\n\nstatic inline void\nrtw89_pci_enqueue_txwd(struct rtw89_pci_tx_ring *tx_ring,\n\t\t       struct rtw89_pci_tx_wd *txwd)\n{\n\tstruct rtw89_pci_tx_wd_ring *wd_ring = &tx_ring->wd_ring;\n\n\tmemset(txwd->vaddr, 0, wd_ring->page_size);\n\tlist_add_tail(&txwd->list, &wd_ring->free_pages);\n\twd_ring->curr_num++;\n}\n\nstatic inline bool rtw89_pci_ltr_is_err_reg_val(u32 val)\n{\n\treturn val == 0xffffffff || val == 0xeaeaeaea;\n}\n\nextern const struct dev_pm_ops rtw89_pm_ops;\nextern const struct rtw89_pci_ch_dma_addr_set rtw89_pci_ch_dma_addr_set;\nextern const struct rtw89_pci_ch_dma_addr_set rtw89_pci_ch_dma_addr_set_v1;\nextern const struct rtw89_pci_bd_ram rtw89_bd_ram_table_dual[RTW89_TXCH_NUM];\nextern const struct rtw89_pci_bd_ram rtw89_bd_ram_table_single[RTW89_TXCH_NUM];\n\nstruct pci_device_id;\n\nint rtw89_pci_probe(struct pci_dev *pdev, const struct pci_device_id *id);\nvoid rtw89_pci_remove(struct pci_dev *pdev);\nint rtw89_pci_ltr_set(struct rtw89_dev *rtwdev, bool en);\nint rtw89_pci_ltr_set_v1(struct rtw89_dev *rtwdev, bool en);\nu32 rtw89_pci_fill_txaddr_info(struct rtw89_dev *rtwdev,\n\t\t\t       void *txaddr_info_addr, u32 total_len,\n\t\t\t       dma_addr_t dma, u8 *add_info_nr);\nu32 rtw89_pci_fill_txaddr_info_v1(struct rtw89_dev *rtwdev,\n\t\t\t\t  void *txaddr_info_addr, u32 total_len,\n\t\t\t\t  dma_addr_t dma, u8 *add_info_nr);\nvoid rtw89_pci_config_intr_mask(struct rtw89_dev *rtwdev);\nvoid rtw89_pci_config_intr_mask_v1(struct rtw89_dev *rtwdev);\nvoid rtw89_pci_enable_intr(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\nvoid rtw89_pci_disable_intr(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\nvoid rtw89_pci_enable_intr_v1(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\nvoid rtw89_pci_disable_intr_v1(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci);\nvoid rtw89_pci_recognize_intrs(struct rtw89_dev *rtwdev,\n\t\t\t       struct rtw89_pci *rtwpci,\n\t\t\t       struct rtw89_pci_isrs *isrs);\nvoid rtw89_pci_recognize_intrs_v1(struct rtw89_dev *rtwdev,\n\t\t\t\t  struct rtw89_pci *rtwpci,\n\t\t\t\t  struct rtw89_pci_isrs *isrs);\n\nstatic inline\nu32 rtw89_chip_fill_txaddr_info(struct rtw89_dev *rtwdev,\n\t\t\t\tvoid *txaddr_info_addr, u32 total_len,\n\t\t\t\tdma_addr_t dma, u8 *add_info_nr)\n{\n\tconst struct rtw89_pci_info *info = rtwdev->pci_info;\n\n\treturn info->fill_txaddr_info(rtwdev, txaddr_info_addr, total_len,\n\t\t\t\t      dma, add_info_nr);\n}\n\nstatic inline void rtw89_chip_config_intr_mask(struct rtw89_dev *rtwdev,\n\t\t\t\t\t       enum rtw89_pci_intr_mask_cfg cfg)\n{\n\tstruct rtw89_pci *rtwpci = (struct rtw89_pci *)rtwdev->priv;\n\tconst struct rtw89_pci_info *info = rtwdev->pci_info;\n\n\tswitch (cfg) {\n\tdefault:\n\tcase RTW89_PCI_INTR_MASK_RESET:\n\t\trtwpci->low_power = false;\n\t\trtwpci->under_recovery = false;\n\t\tbreak;\n\tcase RTW89_PCI_INTR_MASK_NORMAL:\n\t\trtwpci->low_power = false;\n\t\tbreak;\n\tcase RTW89_PCI_INTR_MASK_LOW_POWER:\n\t\trtwpci->low_power = true;\n\t\tbreak;\n\tcase RTW89_PCI_INTR_MASK_RECOVERY_START:\n\t\trtwpci->under_recovery = true;\n\t\tbreak;\n\tcase RTW89_PCI_INTR_MASK_RECOVERY_COMPLETE:\n\t\trtwpci->under_recovery = false;\n\t\tbreak;\n\t}\n\n\trtw89_debug(rtwdev, RTW89_DBG_HCI,\n\t\t    \"Configure PCI interrupt mask mode low_power=%d under_recovery=%d\\n\",\n\t\t    rtwpci->low_power, rtwpci->under_recovery);\n\n\tinfo->config_intr_mask(rtwdev);\n}\n\nstatic inline\nvoid rtw89_chip_enable_intr(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci)\n{\n\tconst struct rtw89_pci_info *info = rtwdev->pci_info;\n\n\tinfo->enable_intr(rtwdev, rtwpci);\n}\n\nstatic inline\nvoid rtw89_chip_disable_intr(struct rtw89_dev *rtwdev, struct rtw89_pci *rtwpci)\n{\n\tconst struct rtw89_pci_info *info = rtwdev->pci_info;\n\n\tinfo->disable_intr(rtwdev, rtwpci);\n}\n\nstatic inline\nvoid rtw89_chip_recognize_intrs(struct rtw89_dev *rtwdev,\n\t\t\t\tstruct rtw89_pci *rtwpci,\n\t\t\t\tstruct rtw89_pci_isrs *isrs)\n{\n\tconst struct rtw89_pci_info *info = rtwdev->pci_info;\n\n\tinfo->recognize_intrs(rtwdev, rtwpci, isrs);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}