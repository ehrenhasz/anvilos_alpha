{
  "module_name": "coex.h",
  "hash_id": "8e2e0de645269d025a3c2cc2217f7a150bb8eeed85008864c90ee0ca78654d35",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/coex.h",
  "human_readable_source": " \n \n\n#ifndef __RTW89_COEX_H__\n#define __RTW89_COEX_H__\n\n#include \"core.h\"\n\nenum btc_mode {\n\tBTC_MODE_NORMAL,\n\tBTC_MODE_WL,\n\tBTC_MODE_BT,\n\tBTC_MODE_WLOFF,\n\tBTC_MODE_MAX\n};\n\nenum btc_wl_rfk_type {\n\tBTC_WRFKT_IQK = 0,\n\tBTC_WRFKT_LCK = 1,\n\tBTC_WRFKT_DPK = 2,\n\tBTC_WRFKT_TXGAPK = 3,\n\tBTC_WRFKT_DACK = 4,\n\tBTC_WRFKT_RXDCK = 5,\n\tBTC_WRFKT_TSSI = 6,\n};\n\n#define NM_EXEC false\n#define FC_EXEC true\n\n#define RTW89_COEX_ACT1_WORK_PERIOD\tround_jiffies_relative(HZ * 4)\n#define RTW89_COEX_BT_DEVINFO_WORK_PERIOD\tround_jiffies_relative(HZ * 16)\n#define RTW89_COEX_RFK_CHK_WORK_PERIOD\tmsecs_to_jiffies(300)\n#define BTC_RFK_PATH_MAP GENMASK(3, 0)\n#define BTC_RFK_PHY_MAP GENMASK(5, 4)\n#define BTC_RFK_BAND_MAP GENMASK(7, 6)\n\nenum btc_wl_rfk_state {\n\tBTC_WRFK_STOP = 0,\n\tBTC_WRFK_START = 1,\n\tBTC_WRFK_ONESHOT_START = 2,\n\tBTC_WRFK_ONESHOT_STOP = 3,\n};\n\nenum btc_pri {\n\tBTC_PRI_MASK_RX_RESP = 0,\n\tBTC_PRI_MASK_TX_RESP,\n\tBTC_PRI_MASK_BEACON,\n\tBTC_PRI_MASK_RX_CCK,\n\tBTC_PRI_MASK_TX_MNGQ,\n\tBTC_PRI_MASK_MAX,\n};\n\nenum btc_bt_trs {\n\tBTC_BT_SS_GROUP = 0x0,\n\tBTC_BT_TX_GROUP = 0x2,\n\tBTC_BT_RX_GROUP = 0x3,\n\tBTC_BT_MAX_GROUP,\n};\n\nenum btc_rssi_st {\n\tBTC_RSSI_ST_LOW = 0x0,\n\tBTC_RSSI_ST_HIGH,\n\tBTC_RSSI_ST_STAY_LOW,\n\tBTC_RSSI_ST_STAY_HIGH,\n\tBTC_RSSI_ST_MAX\n};\n\nenum btc_fddt_en {\n\tBTC_FDDT_DISABLE,\n\tBTC_FDDT_ENABLE,\n};\n\n#define\tBTC_RSSI_HIGH(_rssi_) \\\n\t({typeof(_rssi_) __rssi = (_rssi_); \\\n\t  ((__rssi == BTC_RSSI_ST_HIGH || \\\n\t    __rssi == BTC_RSSI_ST_STAY_HIGH) ? 1 : 0); })\n\n#define\tBTC_RSSI_LOW(_rssi_) \\\n\t({typeof(_rssi_) __rssi = (_rssi_); \\\n\t  ((__rssi == BTC_RSSI_ST_LOW || \\\n\t    __rssi == BTC_RSSI_ST_STAY_LOW) ? 1 : 0); })\n\n#define BTC_RSSI_CHANGE(_rssi_) \\\n\t({typeof(_rssi_) __rssi = (_rssi_); \\\n\t  ((__rssi == BTC_RSSI_ST_LOW || \\\n\t    __rssi == BTC_RSSI_ST_HIGH) ? 1 : 0); })\n\nenum btc_ant {\n\tBTC_ANT_SHARED = 0,\n\tBTC_ANT_DEDICATED,\n\tBTC_ANTTYPE_MAX\n};\n\nenum btc_bt_btg {\n\tBTC_BT_ALONE = 0,\n\tBTC_BT_BTG\n};\n\nenum btc_switch {\n\tBTC_SWITCH_INTERNAL = 0,\n\tBTC_SWITCH_EXTERNAL\n};\n\nenum btc_pkt_type {\n\tPACKET_DHCP,\n\tPACKET_ARP,\n\tPACKET_EAPOL,\n\tPACKET_EAPOL_END,\n\tPACKET_ICMP,\n\tPACKET_MAX\n};\n\nenum btc_bt_mailbox_id {\n\tBTC_BTINFO_REPLY = 0x23,\n\tBTC_BTINFO_AUTO = 0x27\n};\n\nenum btc_role_state {\n\tBTC_ROLE_START,\n\tBTC_ROLE_STOP,\n\tBTC_ROLE_CHG_TYPE,\n\tBTC_ROLE_MSTS_STA_CONN_START,\n\tBTC_ROLE_MSTS_STA_CONN_END,\n\tBTC_ROLE_MSTS_STA_DIS_CONN,\n\tBTC_ROLE_MSTS_AP_START,\n\tBTC_ROLE_MSTS_AP_STOP,\n\tBTC_ROLE_STATE_UNKNOWN\n};\n\nenum btc_rfctrl {\n\tBTC_RFCTRL_WL_OFF,\n\tBTC_RFCTRL_WL_ON,\n\tBTC_RFCTRL_LPS_WL_ON,\n\tBTC_RFCTRL_FW_CTRL,\n\tBTC_RFCTRL_MAX\n};\n\nenum btc_lps_state {\n\tBTC_LPS_OFF = 0,\n\tBTC_LPS_RF_OFF = 1,\n\tBTC_LPS_RF_ON = 2\n};\n\nvoid rtw89_btc_ntfy_poweron(struct rtw89_dev *rtwdev);\nvoid rtw89_btc_ntfy_poweroff(struct rtw89_dev *rtwdev);\nvoid rtw89_btc_ntfy_init(struct rtw89_dev *rtwdev, u8 mode);\nvoid rtw89_btc_ntfy_scan_start(struct rtw89_dev *rtwdev, u8 phy_idx, u8 band);\nvoid rtw89_btc_ntfy_scan_finish(struct rtw89_dev *rtwdev, u8 phy_idx);\nvoid rtw89_btc_ntfy_switch_band(struct rtw89_dev *rtwdev, u8 phy_idx, u8 band);\nvoid rtw89_btc_ntfy_specific_packet(struct rtw89_dev *rtwdev,\n\t\t\t\t    enum btc_pkt_type pkt_type);\nvoid rtw89_btc_ntfy_eapol_packet_work(struct work_struct *work);\nvoid rtw89_btc_ntfy_arp_packet_work(struct work_struct *work);\nvoid rtw89_btc_ntfy_dhcp_packet_work(struct work_struct *work);\nvoid rtw89_btc_ntfy_icmp_packet_work(struct work_struct *work);\nvoid rtw89_btc_ntfy_role_info(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif,\n\t\t\t      struct rtw89_sta *rtwsta, enum btc_role_state state);\nvoid rtw89_btc_ntfy_radio_state(struct rtw89_dev *rtwdev, enum btc_rfctrl rf_state);\nvoid rtw89_btc_ntfy_wl_rfk(struct rtw89_dev *rtwdev, u8 phy_map,\n\t\t\t   enum btc_wl_rfk_type type,\n\t\t\t   enum btc_wl_rfk_state state);\nvoid rtw89_btc_ntfy_wl_sta(struct rtw89_dev *rtwdev);\nvoid rtw89_btc_c2h_handle(struct rtw89_dev *rtwdev, struct sk_buff *skb,\n\t\t\t  u32 len, u8 class, u8 func);\nvoid rtw89_btc_dump_info(struct rtw89_dev *rtwdev, struct seq_file *m);\nvoid rtw89_coex_act1_work(struct work_struct *work);\nvoid rtw89_coex_bt_devinfo_work(struct work_struct *work);\nvoid rtw89_coex_rfk_chk_work(struct work_struct *work);\nvoid rtw89_coex_power_on(struct rtw89_dev *rtwdev);\nvoid rtw89_btc_set_policy(struct rtw89_dev *rtwdev, u16 policy_type);\nvoid rtw89_btc_set_policy_v1(struct rtw89_dev *rtwdev, u16 policy_type);\nvoid rtw89_coex_recognize_ver(struct rtw89_dev *rtwdev);\n\nstatic inline u8 rtw89_btc_phymap(struct rtw89_dev *rtwdev,\n\t\t\t\t  enum rtw89_phy_idx phy_idx,\n\t\t\t\t  enum rtw89_rf_path_bit paths)\n{\n\tconst struct rtw89_chan *chan = rtw89_chan_get(rtwdev, RTW89_SUB_ENTITY_0);\n\tu8 phy_map;\n\n\tphy_map = FIELD_PREP(BTC_RFK_PATH_MAP, paths) |\n\t\t  FIELD_PREP(BTC_RFK_PHY_MAP, BIT(phy_idx)) |\n\t\t  FIELD_PREP(BTC_RFK_BAND_MAP, chan->band_type);\n\n\treturn phy_map;\n}\n\nstatic inline u8 rtw89_btc_path_phymap(struct rtw89_dev *rtwdev,\n\t\t\t\t       enum rtw89_phy_idx phy_idx,\n\t\t\t\t       enum rtw89_rf_path path)\n{\n\treturn rtw89_btc_phymap(rtwdev, phy_idx, BIT(path));\n}\n\n \nstatic inline u16 rtw89_coex_query_bt_req_len(struct rtw89_dev *rtwdev,\n\t\t\t\t\t      enum rtw89_phy_idx phy_idx)\n{\n\tstruct rtw89_btc *btc = &rtwdev->btc;\n\n\treturn btc->bt_req_len;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}