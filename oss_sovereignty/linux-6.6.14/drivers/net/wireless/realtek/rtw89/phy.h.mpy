{
  "module_name": "phy.h",
  "hash_id": "5c37de44749d9bec3693f5b0e546f241f489fe3a5ffbb2a90874436dea4ee227",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/realtek/rtw89/phy.h",
  "human_readable_source": " \n \n\n#ifndef __RTW89_PHY_H__\n#define __RTW89_PHY_H__\n\n#include \"core.h\"\n\n#define RTW89_RF_ADDR_ADSEL_MASK  BIT(16)\n\n#define get_phy_headline(addr)\t\tFIELD_GET(GENMASK(31, 28), addr)\n#define PHY_HEADLINE_VALID\t0xf\n#define get_phy_target(addr)\t\tFIELD_GET(GENMASK(27, 0), addr)\n#define get_phy_compare(rfe, cv)\t(FIELD_PREP(GENMASK(23, 16), rfe) | \\\n\t\t\t\t\t FIELD_PREP(GENMASK(7, 0), cv))\n\n#define get_phy_cond(addr)\t\tFIELD_GET(GENMASK(31, 28), addr)\n#define get_phy_cond_rfe(addr)\t\tFIELD_GET(GENMASK(23, 16), addr)\n#define get_phy_cond_pkg(addr)\t\tFIELD_GET(GENMASK(15, 8), addr)\n#define get_phy_cond_cv(addr)\t\tFIELD_GET(GENMASK(7, 0), addr)\n#define phy_div(a, b) ({typeof(b) _b = (b); (_b) ? ((a) / (_b)) : 0; })\n#define PHY_COND_BRANCH_IF\t0x8\n#define PHY_COND_BRANCH_ELIF\t0x9\n#define PHY_COND_BRANCH_ELSE\t0xa\n#define PHY_COND_BRANCH_END\t0xb\n#define PHY_COND_CHECK\t\t0x4\n#define PHY_COND_DONT_CARE\t0xff\n\n#define RA_MASK_CCK_RATES\tGENMASK_ULL(3, 0)\n#define RA_MASK_OFDM_RATES\tGENMASK_ULL(11, 4)\n#define RA_MASK_SUBCCK_RATES\t0x5ULL\n#define RA_MASK_SUBOFDM_RATES\t0x10ULL\n#define RA_MASK_HT_1SS_RATES\tGENMASK_ULL(19, 12)\n#define RA_MASK_HT_2SS_RATES\tGENMASK_ULL(31, 24)\n#define RA_MASK_HT_3SS_RATES\tGENMASK_ULL(43, 36)\n#define RA_MASK_HT_4SS_RATES\tGENMASK_ULL(55, 48)\n#define RA_MASK_HT_RATES\tGENMASK_ULL(55, 12)\n#define RA_MASK_VHT_1SS_RATES\tGENMASK_ULL(21, 12)\n#define RA_MASK_VHT_2SS_RATES\tGENMASK_ULL(33, 24)\n#define RA_MASK_VHT_3SS_RATES\tGENMASK_ULL(45, 36)\n#define RA_MASK_VHT_4SS_RATES\tGENMASK_ULL(57, 48)\n#define RA_MASK_VHT_RATES\tGENMASK_ULL(57, 12)\n#define RA_MASK_HE_1SS_RATES\tGENMASK_ULL(23, 12)\n#define RA_MASK_HE_2SS_RATES\tGENMASK_ULL(35, 24)\n#define RA_MASK_HE_3SS_RATES\tGENMASK_ULL(47, 36)\n#define RA_MASK_HE_4SS_RATES\tGENMASK_ULL(59, 48)\n#define RA_MASK_HE_RATES\tGENMASK_ULL(59, 12)\n\n#define CFO_TRK_ENABLE_TH (2 << 2)\n#define CFO_TRK_STOP_TH_4 (30 << 2)\n#define CFO_TRK_STOP_TH_3 (20 << 2)\n#define CFO_TRK_STOP_TH_2 (10 << 2)\n#define CFO_TRK_STOP_TH_1 (00 << 2)\n#define CFO_TRK_STOP_TH (2 << 2)\n#define CFO_SW_COMP_FINE_TUNE (2 << 2)\n#define CFO_PERIOD_CNT 15\n#define CFO_BOUND 64\n#define CFO_TP_UPPER 100\n#define CFO_TP_LOWER 50\n#define CFO_COMP_PERIOD 250\n#define CFO_COMP_WEIGHT 8\n#define MAX_CFO_TOLERANCE 30\n#define CFO_TF_CNT_TH 300\n\n#define UL_TB_TF_CNT_L2H_TH 100\n#define UL_TB_TF_CNT_H2L_TH 70\n\n#define ANTDIV_TRAINNING_CNT 2\n#define ANTDIV_TRAINNING_INTVL 30\n#define ANTDIV_DELAY 110\n#define ANTDIV_TP_DIFF_TH_HIGH 100\n#define ANTDIV_TP_DIFF_TH_LOW 5\n#define ANTDIV_EVM_DIFF_TH 8\n#define ANTDIV_RSSI_DIFF_TH 3\n\n#define CCX_MAX_PERIOD 2097\n#define CCX_MAX_PERIOD_UNIT 32\n#define MS_TO_4US_RATIO 250\n#define ENV_MNTR_FAIL_DWORD 0xffffffff\n#define ENV_MNTR_IFSCLM_HIS_MAX 127\n#define PERMIL 1000\n#define PERCENT 100\n#define IFS_CLM_TH0_UPPER 64\n#define IFS_CLM_TH_MUL 4\n#define IFS_CLM_TH_START_IDX 0\n\n#define TIA0_GAIN_A 12\n#define TIA0_GAIN_G 16\n#define LNA0_GAIN (-24)\n#define U4_MAX_BIT 3\n#define U8_MAX_BIT 7\n#define DIG_GAIN_SHIFT 2\n#define DIG_GAIN 8\n\n#define LNA_IDX_MAX 6\n#define LNA_IDX_MIN 0\n#define TIA_IDX_MAX 1\n#define TIA_IDX_MIN 0\n#define RXB_IDX_MAX 31\n#define RXB_IDX_MIN 0\n\n#define IGI_RSSI_MAX 110\n#define PD_TH_MAX_RSSI 70\n#define PD_TH_MIN_RSSI 8\n#define CCKPD_TH_MIN_RSSI (-18)\n#define PD_TH_BW160_CMP_VAL 9\n#define PD_TH_BW80_CMP_VAL 6\n#define PD_TH_BW40_CMP_VAL 3\n#define PD_TH_BW20_CMP_VAL 0\n#define PD_TH_CMP_VAL 3\n#define PD_TH_SB_FLTR_CMP_VAL 7\n\n#define PHYSTS_MGNT BIT(RTW89_RX_TYPE_MGNT)\n#define PHYSTS_CTRL BIT(RTW89_RX_TYPE_CTRL)\n#define PHYSTS_DATA BIT(RTW89_RX_TYPE_DATA)\n#define PHYSTS_RSVD BIT(RTW89_RX_TYPE_RSVD)\n#define PPDU_FILTER_BITMAP (PHYSTS_MGNT | PHYSTS_DATA)\n\nenum rtw89_phy_c2h_ra_func {\n\tRTW89_PHY_C2H_FUNC_STS_RPT,\n\tRTW89_PHY_C2H_FUNC_MU_GPTBL_RPT,\n\tRTW89_PHY_C2H_FUNC_TXSTS,\n\tRTW89_PHY_C2H_FUNC_RA_MAX,\n};\n\nenum rtw89_phy_c2h_dm_func {\n\tRTW89_PHY_C2H_DM_FUNC_FW_TEST,\n\tRTW89_PHY_C2H_DM_FUNC_FW_TRIG_TX_RPT,\n\tRTW89_PHY_C2H_DM_FUNC_SIGB,\n\tRTW89_PHY_C2H_DM_FUNC_LOWRT_RTY,\n\tRTW89_PHY_C2H_DM_FUNC_MCC_DIG,\n\tRTW89_PHY_C2H_DM_FUNC_NUM,\n};\n\nenum rtw89_phy_c2h_class {\n\tRTW89_PHY_C2H_CLASS_RUA,\n\tRTW89_PHY_C2H_CLASS_RA,\n\tRTW89_PHY_C2H_CLASS_DM,\n\tRTW89_PHY_C2H_CLASS_BTC_MIN = 0x10,\n\tRTW89_PHY_C2H_CLASS_BTC_MAX = 0x17,\n\tRTW89_PHY_C2H_CLASS_MAX,\n};\n\nenum rtw89_env_monitor_result_level {\n\tRTW89_PHY_ENV_MON_CCX_FAIL = 0,\n\tRTW89_PHY_ENV_MON_NHM = BIT(0),\n\tRTW89_PHY_ENV_MON_CLM = BIT(1),\n\tRTW89_PHY_ENV_MON_FAHM = BIT(2),\n\tRTW89_PHY_ENV_MON_IFS_CLM = BIT(3),\n\tRTW89_PHY_ENV_MON_EDCCA_CLM = BIT(4),\n};\n\n#define CCX_US_BASE_RATIO 4\nenum rtw89_ccx_unit {\n\tRTW89_CCX_4_US = 0,\n\tRTW89_CCX_8_US = 1,\n\tRTW89_CCX_16_US = 2,\n\tRTW89_CCX_32_US = 3\n};\n\nenum rtw89_phy_status_ie_type {\n\tRTW89_PHYSTS_IE00_CMN_CCK\t\t\t= 0,\n\tRTW89_PHYSTS_IE01_CMN_OFDM\t\t\t= 1,\n\tRTW89_PHYSTS_IE02_CMN_EXT_AX\t\t\t= 2,\n\tRTW89_PHYSTS_IE03_CMN_EXT_SEG_1\t\t\t= 3,\n\tRTW89_PHYSTS_IE04_CMN_EXT_PATH_A\t\t= 4,\n\tRTW89_PHYSTS_IE05_CMN_EXT_PATH_B\t\t= 5,\n\tRTW89_PHYSTS_IE06_CMN_EXT_PATH_C\t\t= 6,\n\tRTW89_PHYSTS_IE07_CMN_EXT_PATH_D\t\t= 7,\n\tRTW89_PHYSTS_IE08_FTR_CH\t\t\t= 8,\n\tRTW89_PHYSTS_IE09_FTR_0\t\t\t\t= 9,\n\tRTW89_PHYSTS_IE10_FTR_PLCP_EXT\t\t\t= 10,\n\tRTW89_PHYSTS_IE11_FTR_PLCP_HISTOGRAM\t\t= 11,\n\tRTW89_PHYSTS_IE12_MU_EIGEN_INFO\t\t\t= 12,\n\tRTW89_PHYSTS_IE13_DL_MU_DEF\t\t\t= 13,\n\tRTW89_PHYSTS_IE14_TB_UL_CQI\t\t\t= 14,\n\tRTW89_PHYSTS_IE15_TB_UL_DEF\t\t\t= 15,\n\tRTW89_PHYSTS_IE16_RSVD16\t\t\t= 16,\n\tRTW89_PHYSTS_IE17_TB_UL_CTRL\t\t\t= 17,\n\tRTW89_PHYSTS_IE18_DBG_OFDM_FD_CMN\t\t= 18,\n\tRTW89_PHYSTS_IE19_DBG_OFDM_TD_CMN\t\t= 19,\n\tRTW89_PHYSTS_IE20_DBG_OFDM_FD_USER_SEG_0\t= 20,\n\tRTW89_PHYSTS_IE21_DBG_OFDM_FD_USER_SEG_1\t= 21,\n\tRTW89_PHYSTS_IE22_DBG_OFDM_FD_USER_AGC\t\t= 22,\n\tRTW89_PHYSTS_IE23_RSVD23\t\t\t= 23,\n\tRTW89_PHYSTS_IE24_OFDM_TD_PATH_A\t\t= 24,\n\tRTW89_PHYSTS_IE25_OFDM_TD_PATH_B\t\t= 25,\n\tRTW89_PHYSTS_IE26_OFDM_TD_PATH_C\t\t= 26,\n\tRTW89_PHYSTS_IE27_OFDM_TD_PATH_D\t\t= 27,\n\tRTW89_PHYSTS_IE28_DBG_CCK_PATH_A\t\t= 28,\n\tRTW89_PHYSTS_IE29_DBG_CCK_PATH_B\t\t= 29,\n\tRTW89_PHYSTS_IE30_DBG_CCK_PATH_C\t\t= 30,\n\tRTW89_PHYSTS_IE31_DBG_CCK_PATH_D\t\t= 31,\n\n\t \n\tRTW89_PHYSTS_IE_NUM,\n\tRTW89_PHYSTS_IE_MAX = RTW89_PHYSTS_IE_NUM - 1\n};\n\nenum rtw89_phy_status_bitmap {\n\tRTW89_TD_SEARCH_FAIL  = 0,\n\tRTW89_BRK_BY_TX_PKT   = 1,\n\tRTW89_CCA_SPOOF       = 2,\n\tRTW89_OFDM_BRK        = 3,\n\tRTW89_CCK_BRK         = 4,\n\tRTW89_DL_MU_SPOOFING  = 5,\n\tRTW89_HE_MU           = 6,\n\tRTW89_VHT_MU          = 7,\n\tRTW89_UL_TB_SPOOFING  = 8,\n\tRTW89_RSVD_9          = 9,\n\tRTW89_TRIG_BASE_PPDU  = 10,\n\tRTW89_CCK_PKT         = 11,\n\tRTW89_LEGACY_OFDM_PKT = 12,\n\tRTW89_HT_PKT          = 13,\n\tRTW89_VHT_PKT         = 14,\n\tRTW89_HE_PKT          = 15,\n\n\tRTW89_PHYSTS_BITMAP_NUM\n};\n\nenum rtw89_dig_gain_type {\n\tRTW89_DIG_GAIN_LNA_G = 0,\n\tRTW89_DIG_GAIN_TIA_G = 1,\n\tRTW89_DIG_GAIN_LNA_A = 2,\n\tRTW89_DIG_GAIN_TIA_A = 3,\n\tRTW89_DIG_GAIN_MAX = 4\n};\n\nenum rtw89_dig_gain_lna_idx {\n\tRTW89_DIG_GAIN_LNA_IDX1 = 1,\n\tRTW89_DIG_GAIN_LNA_IDX2 = 2,\n\tRTW89_DIG_GAIN_LNA_IDX3 = 3,\n\tRTW89_DIG_GAIN_LNA_IDX4 = 4,\n\tRTW89_DIG_GAIN_LNA_IDX5 = 5,\n\tRTW89_DIG_GAIN_LNA_IDX6 = 6\n};\n\nenum rtw89_dig_gain_tia_idx {\n\tRTW89_DIG_GAIN_TIA_IDX0 = 0,\n\tRTW89_DIG_GAIN_TIA_IDX1 = 1\n};\n\nenum rtw89_tssi_bandedge_cfg {\n\tRTW89_TSSI_BANDEDGE_FLAT,\n\tRTW89_TSSI_BANDEDGE_LOW,\n\tRTW89_TSSI_BANDEDGE_MID,\n\tRTW89_TSSI_BANDEDGE_HIGH,\n\n\tRTW89_TSSI_CFG_NUM,\n};\n\nenum rtw89_tssi_sbw_idx {\n\tRTW89_TSSI_SBW20,\n\tRTW89_TSSI_SBW40_0,\n\tRTW89_TSSI_SBW40_1,\n\tRTW89_TSSI_SBW80_0,\n\tRTW89_TSSI_SBW80_1,\n\tRTW89_TSSI_SBW80_2,\n\tRTW89_TSSI_SBW80_3,\n\tRTW89_TSSI_SBW160_0,\n\tRTW89_TSSI_SBW160_1,\n\tRTW89_TSSI_SBW160_2,\n\tRTW89_TSSI_SBW160_3,\n\tRTW89_TSSI_SBW160_4,\n\tRTW89_TSSI_SBW160_5,\n\tRTW89_TSSI_SBW160_6,\n\tRTW89_TSSI_SBW160_7,\n\n\tRTW89_TSSI_SBW_NUM,\n};\n\nstruct rtw89_txpwr_byrate_cfg {\n\tenum rtw89_band band;\n\tenum rtw89_nss nss;\n\tenum rtw89_rate_section rs;\n\tu8 shf;\n\tu8 len;\n\tu32 data;\n};\n\n#define DELTA_SWINGIDX_SIZE 30\n\nstruct rtw89_txpwr_track_cfg {\n\tconst s8 (*delta_swingidx_6gb_n)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_6gb_p)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_6ga_n)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_6ga_p)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_5gb_n)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_5gb_p)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_5ga_n)[DELTA_SWINGIDX_SIZE];\n\tconst s8 (*delta_swingidx_5ga_p)[DELTA_SWINGIDX_SIZE];\n\tconst s8 *delta_swingidx_2gb_n;\n\tconst s8 *delta_swingidx_2gb_p;\n\tconst s8 *delta_swingidx_2ga_n;\n\tconst s8 *delta_swingidx_2ga_p;\n\tconst s8 *delta_swingidx_2g_cck_b_n;\n\tconst s8 *delta_swingidx_2g_cck_b_p;\n\tconst s8 *delta_swingidx_2g_cck_a_n;\n\tconst s8 *delta_swingidx_2g_cck_a_p;\n};\n\nstruct rtw89_phy_dig_gain_cfg {\n\tconst struct rtw89_reg_def *table;\n\tu8 size;\n};\n\nstruct rtw89_phy_dig_gain_table {\n\tconst struct rtw89_phy_dig_gain_cfg *cfg_lna_g;\n\tconst struct rtw89_phy_dig_gain_cfg *cfg_tia_g;\n\tconst struct rtw89_phy_dig_gain_cfg *cfg_lna_a;\n\tconst struct rtw89_phy_dig_gain_cfg *cfg_tia_a;\n};\n\nstruct rtw89_phy_tssi_dbw_table {\n\tu32 data[RTW89_TSSI_CFG_NUM][RTW89_TSSI_SBW_NUM];\n};\n\nstruct rtw89_phy_reg3_tbl {\n\tconst struct rtw89_reg3_def *reg3;\n\tint size;\n};\n\n#define DECLARE_PHY_REG3_TBL(_name)\t\t\t\\\nconst struct rtw89_phy_reg3_tbl _name ## _tbl = {\t\\\n\t.reg3 = _name,\t\t\t\t\t\\\n\t.size = ARRAY_SIZE(_name),\t\t\t\\\n}\n\nstruct rtw89_nbi_reg_def {\n\tstruct rtw89_reg_def notch1_idx;\n\tstruct rtw89_reg_def notch1_frac_idx;\n\tstruct rtw89_reg_def notch1_en;\n\tstruct rtw89_reg_def notch2_idx;\n\tstruct rtw89_reg_def notch2_frac_idx;\n\tstruct rtw89_reg_def notch2_en;\n};\n\nstruct rtw89_ccx_regs {\n\tu32 setting_addr;\n\tu32 edcca_opt_mask;\n\tu32 measurement_trig_mask;\n\tu32 trig_opt_mask;\n\tu32 en_mask;\n\tu32 ifs_cnt_addr;\n\tu32 ifs_clm_period_mask;\n\tu32 ifs_clm_cnt_unit_mask;\n\tu32 ifs_clm_cnt_clear_mask;\n\tu32 ifs_collect_en_mask;\n\tu32 ifs_t1_addr;\n\tu32 ifs_t1_th_h_mask;\n\tu32 ifs_t1_en_mask;\n\tu32 ifs_t1_th_l_mask;\n\tu32 ifs_t2_addr;\n\tu32 ifs_t2_th_h_mask;\n\tu32 ifs_t2_en_mask;\n\tu32 ifs_t2_th_l_mask;\n\tu32 ifs_t3_addr;\n\tu32 ifs_t3_th_h_mask;\n\tu32 ifs_t3_en_mask;\n\tu32 ifs_t3_th_l_mask;\n\tu32 ifs_t4_addr;\n\tu32 ifs_t4_th_h_mask;\n\tu32 ifs_t4_en_mask;\n\tu32 ifs_t4_th_l_mask;\n\tu32 ifs_clm_tx_cnt_addr;\n\tu32 ifs_clm_edcca_excl_cca_fa_mask;\n\tu32 ifs_clm_tx_cnt_msk;\n\tu32 ifs_clm_cca_addr;\n\tu32 ifs_clm_ofdmcca_excl_fa_mask;\n\tu32 ifs_clm_cckcca_excl_fa_mask;\n\tu32 ifs_clm_fa_addr;\n\tu32 ifs_clm_ofdm_fa_mask;\n\tu32 ifs_clm_cck_fa_mask;\n\tu32 ifs_his_addr;\n\tu32 ifs_t4_his_mask;\n\tu32 ifs_t3_his_mask;\n\tu32 ifs_t2_his_mask;\n\tu32 ifs_t1_his_mask;\n\tu32 ifs_avg_l_addr;\n\tu32 ifs_t2_avg_mask;\n\tu32 ifs_t1_avg_mask;\n\tu32 ifs_avg_h_addr;\n\tu32 ifs_t4_avg_mask;\n\tu32 ifs_t3_avg_mask;\n\tu32 ifs_cca_l_addr;\n\tu32 ifs_t2_cca_mask;\n\tu32 ifs_t1_cca_mask;\n\tu32 ifs_cca_h_addr;\n\tu32 ifs_t4_cca_mask;\n\tu32 ifs_t3_cca_mask;\n\tu32 ifs_total_addr;\n\tu32 ifs_cnt_done_mask;\n\tu32 ifs_total_mask;\n};\n\nstruct rtw89_physts_regs {\n\tu32 setting_addr;\n\tu32 dis_trigger_fail_mask;\n\tu32 dis_trigger_brk_mask;\n};\n\nstruct rtw89_phy_gen_def {\n\tu32 cr_base;\n\tconst struct rtw89_ccx_regs *ccx;\n\tconst struct rtw89_physts_regs *physts;\n};\n\nextern const struct rtw89_phy_gen_def rtw89_phy_gen_ax;\nextern const struct rtw89_phy_gen_def rtw89_phy_gen_be;\n\nstatic inline void rtw89_phy_write8(struct rtw89_dev *rtwdev,\n\t\t\t\t    u32 addr, u8 data)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write8(rtwdev, addr + phy->cr_base, data);\n}\n\nstatic inline void rtw89_phy_write16(struct rtw89_dev *rtwdev,\n\t\t\t\t     u32 addr, u16 data)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write16(rtwdev, addr + phy->cr_base, data);\n}\n\nstatic inline void rtw89_phy_write32(struct rtw89_dev *rtwdev,\n\t\t\t\t     u32 addr, u32 data)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write32(rtwdev, addr + phy->cr_base, data);\n}\n\nstatic inline void rtw89_phy_write32_set(struct rtw89_dev *rtwdev,\n\t\t\t\t\t u32 addr, u32 bits)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write32_set(rtwdev, addr + phy->cr_base, bits);\n}\n\nstatic inline void rtw89_phy_write32_clr(struct rtw89_dev *rtwdev,\n\t\t\t\t\t u32 addr, u32 bits)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write32_clr(rtwdev, addr + phy->cr_base, bits);\n}\n\nstatic inline void rtw89_phy_write32_mask(struct rtw89_dev *rtwdev,\n\t\t\t\t\t  u32 addr, u32 mask, u32 data)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\trtw89_write32_mask(rtwdev, addr + phy->cr_base, mask, data);\n}\n\nstatic inline u8 rtw89_phy_read8(struct rtw89_dev *rtwdev, u32 addr)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\treturn rtw89_read8(rtwdev, addr + phy->cr_base);\n}\n\nstatic inline u16 rtw89_phy_read16(struct rtw89_dev *rtwdev, u32 addr)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\treturn rtw89_read16(rtwdev, addr + phy->cr_base);\n}\n\nstatic inline u32 rtw89_phy_read32(struct rtw89_dev *rtwdev, u32 addr)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\treturn rtw89_read32(rtwdev, addr + phy->cr_base);\n}\n\nstatic inline u32 rtw89_phy_read32_mask(struct rtw89_dev *rtwdev,\n\t\t\t\t\tu32 addr, u32 mask)\n{\n\tconst struct rtw89_phy_gen_def *phy = rtwdev->chip->phy_def;\n\n\treturn rtw89_read32_mask(rtwdev, addr + phy->cr_base, mask);\n}\n\nstatic inline\nenum rtw89_gain_offset rtw89_subband_to_gain_offset_band_of_ofdm(enum rtw89_subband subband)\n{\n\tswitch (subband) {\n\tdefault:\n\tcase RTW89_CH_2G:\n\t\treturn RTW89_GAIN_OFFSET_2G_OFDM;\n\tcase RTW89_CH_5G_BAND_1:\n\t\treturn RTW89_GAIN_OFFSET_5G_LOW;\n\tcase RTW89_CH_5G_BAND_3:\n\t\treturn RTW89_GAIN_OFFSET_5G_MID;\n\tcase RTW89_CH_5G_BAND_4:\n\t\treturn RTW89_GAIN_OFFSET_5G_HIGH;\n\t}\n}\n\nstatic inline\nenum rtw89_phy_bb_gain_band rtw89_subband_to_bb_gain_band(enum rtw89_subband subband)\n{\n\tswitch (subband) {\n\tdefault:\n\tcase RTW89_CH_2G:\n\t\treturn RTW89_BB_GAIN_BAND_2G;\n\tcase RTW89_CH_5G_BAND_1:\n\t\treturn RTW89_BB_GAIN_BAND_5G_L;\n\tcase RTW89_CH_5G_BAND_3:\n\t\treturn RTW89_BB_GAIN_BAND_5G_M;\n\tcase RTW89_CH_5G_BAND_4:\n\t\treturn RTW89_BB_GAIN_BAND_5G_H;\n\tcase RTW89_CH_6G_BAND_IDX0:\n\tcase RTW89_CH_6G_BAND_IDX1:\n\t\treturn RTW89_BB_GAIN_BAND_6G_L;\n\tcase RTW89_CH_6G_BAND_IDX2:\n\tcase RTW89_CH_6G_BAND_IDX3:\n\t\treturn RTW89_BB_GAIN_BAND_6G_M;\n\tcase RTW89_CH_6G_BAND_IDX4:\n\tcase RTW89_CH_6G_BAND_IDX5:\n\t\treturn RTW89_BB_GAIN_BAND_6G_H;\n\tcase RTW89_CH_6G_BAND_IDX6:\n\tcase RTW89_CH_6G_BAND_IDX7:\n\t\treturn RTW89_BB_GAIN_BAND_6G_UH;\n\t}\n}\n\nenum rtw89_rfk_flag {\n\tRTW89_RFK_F_WRF = 0,\n\tRTW89_RFK_F_WM = 1,\n\tRTW89_RFK_F_WS = 2,\n\tRTW89_RFK_F_WC = 3,\n\tRTW89_RFK_F_DELAY = 4,\n\tRTW89_RFK_F_NUM,\n};\n\nstruct rtw89_rfk_tbl {\n\tconst struct rtw89_reg5_def *defs;\n\tu32 size;\n};\n\n#define RTW89_DECLARE_RFK_TBL(_name)\t\t\\\nconst struct rtw89_rfk_tbl _name ## _tbl = {\t\\\n\t.defs = _name,\t\t\t\t\\\n\t.size = ARRAY_SIZE(_name),\t\t\\\n}\n\n#define RTW89_DECL_RFK_WRF(_path, _addr, _mask, _data)\t\\\n\t{.flag = RTW89_RFK_F_WRF,\t\t\t\\\n\t .path = _path,\t\t\t\t\t\\\n\t .addr = _addr,\t\t\t\t\t\\\n\t .mask = _mask,\t\t\t\t\t\\\n\t .data = _data,}\n\n#define RTW89_DECL_RFK_WM(_addr, _mask, _data)\t\\\n\t{.flag = RTW89_RFK_F_WM,\t\t\\\n\t .addr = _addr,\t\t\t\t\\\n\t .mask = _mask,\t\t\t\t\\\n\t .data = _data,}\n\n#define RTW89_DECL_RFK_WS(_addr, _mask)\t\\\n\t{.flag = RTW89_RFK_F_WS,\t\\\n\t .addr = _addr,\t\t\t\\\n\t .mask = _mask,}\n\n#define RTW89_DECL_RFK_WC(_addr, _mask)\t\\\n\t{.flag = RTW89_RFK_F_WC,\t\\\n\t .addr = _addr,\t\t\t\\\n\t .mask = _mask,}\n\n#define RTW89_DECL_RFK_DELAY(_data)\t\\\n\t{.flag = RTW89_RFK_F_DELAY,\t\\\n\t .data = _data,}\n\nvoid\nrtw89_rfk_parser(struct rtw89_dev *rtwdev, const struct rtw89_rfk_tbl *tbl);\n\n#define rtw89_rfk_parser_by_cond(dev, cond, tbl_t, tbl_f)\t\\\n\tdo {\t\t\t\t\t\t\t\\\n\t\ttypeof(dev) __dev = (dev);\t\t\t\\\n\t\tif (cond)\t\t\t\t\t\\\n\t\t\trtw89_rfk_parser(__dev, (tbl_t));\t\\\n\t\telse\t\t\t\t\t\t\\\n\t\t\trtw89_rfk_parser(__dev, (tbl_f));\t\\\n\t} while (0)\n\nvoid rtw89_phy_write_reg3_tbl(struct rtw89_dev *rtwdev,\n\t\t\t      const struct rtw89_phy_reg3_tbl *tbl);\nu8 rtw89_phy_get_txsc(struct rtw89_dev *rtwdev,\n\t\t      const struct rtw89_chan *chan,\n\t\t      enum rtw89_bandwidth dbw);\nu32 rtw89_phy_read_rf(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t      u32 addr, u32 mask);\nu32 rtw89_phy_read_rf_v1(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t\t u32 addr, u32 mask);\nbool rtw89_phy_write_rf(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t\tu32 addr, u32 mask, u32 data);\nbool rtw89_phy_write_rf_v1(struct rtw89_dev *rtwdev, enum rtw89_rf_path rf_path,\n\t\t\t   u32 addr, u32 mask, u32 data);\nvoid rtw89_phy_init_bb_reg(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_init_rf_reg(struct rtw89_dev *rtwdev, bool noio);\nvoid rtw89_phy_config_rf_reg_v1(struct rtw89_dev *rtwdev,\n\t\t\t\tconst struct rtw89_reg2_def *reg,\n\t\t\t\tenum rtw89_rf_path rf_path,\n\t\t\t\tvoid *extra_data);\nvoid rtw89_phy_dm_init(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_write32_idx(struct rtw89_dev *rtwdev, u32 addr, u32 mask,\n\t\t\t   u32 data, enum rtw89_phy_idx phy_idx);\nu32 rtw89_phy_read32_idx(struct rtw89_dev *rtwdev, u32 addr, u32 mask,\n\t\t\t enum rtw89_phy_idx phy_idx);\nvoid rtw89_phy_load_txpwr_byrate(struct rtw89_dev *rtwdev,\n\t\t\t\t const struct rtw89_txpwr_table *tbl);\ns8 rtw89_phy_read_txpwr_limit(struct rtw89_dev *rtwdev, u8 band,\n\t\t\t      u8 bw, u8 ntx, u8 rs, u8 bf, u8 ch);\nvoid rtw89_phy_set_txpwr_byrate(struct rtw89_dev *rtwdev,\n\t\t\t\tconst struct rtw89_chan *chan,\n\t\t\t\tenum rtw89_phy_idx phy_idx);\nvoid rtw89_phy_set_txpwr_offset(struct rtw89_dev *rtwdev,\n\t\t\t\tconst struct rtw89_chan *chan,\n\t\t\t\tenum rtw89_phy_idx phy_idx);\nvoid rtw89_phy_set_txpwr_limit(struct rtw89_dev *rtwdev,\n\t\t\t       const struct rtw89_chan *chan,\n\t\t\t       enum rtw89_phy_idx phy_idx);\nvoid rtw89_phy_set_txpwr_limit_ru(struct rtw89_dev *rtwdev,\n\t\t\t\t  const struct rtw89_chan *chan,\n\t\t\t\t  enum rtw89_phy_idx phy_idx);\nvoid rtw89_phy_ra_assoc(struct rtw89_dev *rtwdev, struct ieee80211_sta *sta);\nvoid rtw89_phy_ra_update(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_ra_updata_sta(struct rtw89_dev *rtwdev, struct ieee80211_sta *sta,\n\t\t\t     u32 changed);\nvoid rtw89_phy_rate_pattern_vif(struct rtw89_dev *rtwdev,\n\t\t\t\tstruct ieee80211_vif *vif,\n\t\t\t\tconst struct cfg80211_bitrate_mask *mask);\nvoid rtw89_phy_c2h_handle(struct rtw89_dev *rtwdev, struct sk_buff *skb,\n\t\t\t  u32 len, u8 class, u8 func);\nvoid rtw89_phy_cfo_track(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_cfo_track_work(struct work_struct *work);\nvoid rtw89_phy_cfo_parse(struct rtw89_dev *rtwdev, s16 cfo_val,\n\t\t\t struct rtw89_rx_phy_ppdu *phy_ppdu);\nvoid rtw89_phy_stat_track(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_env_monitor_track(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_set_phy_regs(struct rtw89_dev *rtwdev, u32 addr, u32 mask,\n\t\t\t    u32 val);\nvoid rtw89_phy_dig_reset(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_dig(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_tx_path_div_track(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_antdiv_parse(struct rtw89_dev *rtwdev,\n\t\t\t    struct rtw89_rx_phy_ppdu *phy_ppdu);\nvoid rtw89_phy_antdiv_track(struct rtw89_dev *rtwdev);\nvoid rtw89_phy_antdiv_work(struct work_struct *work);\nvoid rtw89_phy_set_bss_color(struct rtw89_dev *rtwdev, struct ieee80211_vif *vif);\nvoid rtw89_phy_tssi_ctrl_set_bandedge_cfg(struct rtw89_dev *rtwdev,\n\t\t\t\t\t  enum rtw89_mac_idx mac_idx,\n\t\t\t\t\t  enum rtw89_tssi_bandedge_cfg bandedge_cfg);\nvoid rtw89_phy_ul_tb_assoc(struct rtw89_dev *rtwdev, struct rtw89_vif *rtwvif);\nvoid rtw89_phy_ul_tb_ctrl_track(struct rtw89_dev *rtwdev);\nu8 rtw89_encode_chan_idx(struct rtw89_dev *rtwdev, u8 central_ch, u8 band);\nvoid rtw89_decode_chan_idx(struct rtw89_dev *rtwdev, u8 chan_idx,\n\t\t\t   u8 *ch, enum nl80211_band *band);\nvoid rtw89_phy_config_edcca(struct rtw89_dev *rtwdev, bool scan);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}