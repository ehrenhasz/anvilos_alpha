{
  "module_name": "eeprom.h",
  "hash_id": "216a5691743b6f08a31c80716f3bbd1f5103196453a3326788f403cfe3fa101d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt7601u/eeprom.h",
  "human_readable_source": " \n \n\n#ifndef __MT7601U_EEPROM_H\n#define __MT7601U_EEPROM_H\n\nstruct mt7601u_dev;\n\n#define MT7601U_EE_MAX_VER\t\t\t0x0d\n#define MT7601U_EEPROM_SIZE\t\t\t256\n\n#define MT7601U_DEFAULT_TX_POWER\t\t6\n\nenum mt76_eeprom_field {\n\tMT_EE_CHIP_ID =\t\t\t\t0x00,\n\tMT_EE_VERSION_FAE =\t\t\t0x02,\n\tMT_EE_VERSION_EE =\t\t\t0x03,\n\tMT_EE_MAC_ADDR =\t\t\t0x04,\n\tMT_EE_NIC_CONF_0 =\t\t\t0x34,\n\tMT_EE_NIC_CONF_1 =\t\t\t0x36,\n\tMT_EE_COUNTRY_REGION =\t\t\t0x39,\n\tMT_EE_FREQ_OFFSET =\t\t\t0x3a,\n\tMT_EE_NIC_CONF_2 =\t\t\t0x42,\n\n\tMT_EE_LNA_GAIN =\t\t\t0x44,\n\tMT_EE_RSSI_OFFSET =\t\t\t0x46,\n\n\tMT_EE_TX_POWER_DELTA_BW40 =\t\t0x50,\n\tMT_EE_TX_POWER_OFFSET =\t\t\t0x52,\n\n\tMT_EE_TX_TSSI_SLOPE =\t\t\t0x6e,\n\tMT_EE_TX_TSSI_OFFSET_GROUP =\t\t0x6f,\n\tMT_EE_TX_TSSI_OFFSET =\t\t\t0x76,\n\n\tMT_EE_TX_TSSI_TARGET_POWER =\t\t0xd0,\n\tMT_EE_REF_TEMP =\t\t\t0xd1,\n\tMT_EE_FREQ_OFFSET_COMPENSATION =\t0xdb,\n\tMT_EE_TX_POWER_BYRATE_BASE =\t\t0xde,\n\n\tMT_EE_USAGE_MAP_START =\t\t\t0x1e0,\n\tMT_EE_USAGE_MAP_END =\t\t\t0x1fc,\n};\n\n#define MT_EE_NIC_CONF_0_RX_PATH\t\tGENMASK(3, 0)\n#define MT_EE_NIC_CONF_0_TX_PATH\t\tGENMASK(7, 4)\n#define MT_EE_NIC_CONF_0_BOARD_TYPE\t\tGENMASK(13, 12)\n\n#define MT_EE_NIC_CONF_1_HW_RF_CTRL\t\tBIT(0)\n#define MT_EE_NIC_CONF_1_TEMP_TX_ALC\t\tBIT(1)\n#define MT_EE_NIC_CONF_1_LNA_EXT_2G\t\tBIT(2)\n#define MT_EE_NIC_CONF_1_LNA_EXT_5G\t\tBIT(3)\n#define MT_EE_NIC_CONF_1_TX_ALC_EN\t\tBIT(13)\n\n#define MT_EE_NIC_CONF_2_RX_STREAM\t\tGENMASK(3, 0)\n#define MT_EE_NIC_CONF_2_TX_STREAM\t\tGENMASK(7, 4)\n#define MT_EE_NIC_CONF_2_HW_ANTDIV\t\tBIT(8)\n#define MT_EE_NIC_CONF_2_XTAL_OPTION\t\tGENMASK(10, 9)\n#define MT_EE_NIC_CONF_2_TEMP_DISABLE\t\tBIT(11)\n#define MT_EE_NIC_CONF_2_COEX_METHOD\t\tGENMASK(15, 13)\n\n#define MT_EE_TX_POWER_BYRATE(i)\t\t(MT_EE_TX_POWER_BYRATE_BASE + \\\n\t\t\t\t\t\t (i) * 4)\n\n#define MT_EFUSE_USAGE_MAP_SIZE\t\t\t(MT_EE_USAGE_MAP_END -\t\\\n\t\t\t\t\t\t MT_EE_USAGE_MAP_START + 1)\n\nenum mt7601u_eeprom_access_modes {\n\tMT_EE_READ = 0,\n\tMT_EE_PHYSICAL_READ = 1,\n};\n\nstruct power_per_rate  {\n\tu8 raw;   \n\ts8 bw20;  \n\ts8 bw40;  \n};\n\n \nstruct mt7601u_rate_power {\n\tstruct power_per_rate cck[2];\n\tstruct power_per_rate ofdm[4];\n\tstruct power_per_rate ht[4];\n};\n\nstruct reg_channel_bounds {\n\tu8 start;\n\tu8 num;\n};\n\nstruct mt7601u_eeprom_params {\n\tbool tssi_enabled;\n\tu8 rf_freq_off;\n\ts8 rssi_offset[2];\n\ts8 ref_temp;\n\ts8 lna_gain;\n\n\tu8 chan_pwr[14];\n\tstruct mt7601u_rate_power power_rate_table;\n\ts8 real_cck_bw20[2];\n\n\t \n\tstruct tssi_data {\n\t\tint tx0_delta_offset;\n\t\tu8 slope;\n\t\tu8 offset[3];\n\t} tssi_data;\n\n\tstruct reg_channel_bounds reg;\n};\n\nint mt7601u_eeprom_init(struct mt7601u_dev *dev);\n\nstatic inline u32 s6_validate(u32 reg)\n{\n\tWARN_ON(reg & ~GENMASK(5, 0));\n\treturn reg & GENMASK(5, 0);\n}\n\nstatic inline int s6_to_int(u32 reg)\n{\n\tint s6;\n\n\ts6 = s6_validate(reg);\n\tif (s6 & BIT(5))\n\t\ts6 -= BIT(6);\n\n\treturn s6;\n}\n\nstatic inline u32 int_to_s6(int val)\n{\n\tif (val < -0x20)\n\t\treturn 0x20;\n\tif (val > 0x1f)\n\t\treturn 0x1f;\n\n\treturn val & 0x3f;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}