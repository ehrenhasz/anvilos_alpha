{
  "module_name": "dma.h",
  "hash_id": "3a706f362b677bf27256eee871f6c356ccae727b38808c0ab50f79ab721d9d05",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt7601u/dma.h",
  "human_readable_source": " \n \n\n#ifndef __MT7601U_DMA_H\n#define __MT7601U_DMA_H\n\n#include <asm/unaligned.h>\n#include <linux/skbuff.h>\n\n#define MT_DMA_HDR_LEN\t\t\t4\n#define MT_RX_INFO_LEN\t\t\t4\n#define MT_FCE_INFO_LEN\t\t\t4\n#define MT_DMA_HDRS\t\t\t(MT_DMA_HDR_LEN + MT_RX_INFO_LEN)\n\n \n#define MT_TXD_INFO_LEN\t\t\tGENMASK(15, 0)\n#define MT_TXD_INFO_D_PORT\t\tGENMASK(29, 27)\n#define MT_TXD_INFO_TYPE\t\tGENMASK(31, 30)\n\nenum mt76_msg_port {\n\tWLAN_PORT,\n\tCPU_RX_PORT,\n\tCPU_TX_PORT,\n\tHOST_PORT,\n\tVIRTUAL_CPU_RX_PORT,\n\tVIRTUAL_CPU_TX_PORT,\n\tDISCARD,\n};\n\nenum mt76_info_type {\n\tDMA_PACKET,\n\tDMA_COMMAND,\n};\n\n \n#define MT_TXD_PKT_INFO_NEXT_VLD\tBIT(16)\n#define MT_TXD_PKT_INFO_TX_BURST\tBIT(17)\n#define MT_TXD_PKT_INFO_80211\t\tBIT(19)\n#define MT_TXD_PKT_INFO_TSO\t\tBIT(20)\n#define MT_TXD_PKT_INFO_CSO\t\tBIT(21)\n#define MT_TXD_PKT_INFO_WIV\t\tBIT(24)\n#define MT_TXD_PKT_INFO_QSEL\t\tGENMASK(26, 25)\n\nenum mt76_qsel {\n\tMT_QSEL_MGMT,\n\tMT_QSEL_HCCA,\n\tMT_QSEL_EDCA,\n\tMT_QSEL_EDCA_2,\n};\n\n \n#define MT_TXD_CMD_INFO_SEQ\t\tGENMASK(19, 16)\n#define MT_TXD_CMD_INFO_TYPE\t\tGENMASK(26, 20)\n\nstatic inline int mt7601u_dma_skb_wrap(struct sk_buff *skb,\n\t\t\t\t       enum mt76_msg_port d_port,\n\t\t\t\t       enum mt76_info_type type, u32 flags)\n{\n\tu32 info;\n\n\t \n\n\tinfo = flags |\n\t\tFIELD_PREP(MT_TXD_INFO_LEN, round_up(skb->len, 4)) |\n\t\tFIELD_PREP(MT_TXD_INFO_D_PORT, d_port) |\n\t\tFIELD_PREP(MT_TXD_INFO_TYPE, type);\n\n\tput_unaligned_le32(info, skb_push(skb, sizeof(info)));\n\treturn skb_put_padto(skb, round_up(skb->len, 4) + 4);\n}\n\nstatic inline int\nmt7601u_dma_skb_wrap_pkt(struct sk_buff *skb, enum mt76_qsel qsel, u32 flags)\n{\n\tflags |= FIELD_PREP(MT_TXD_PKT_INFO_QSEL, qsel);\n\treturn mt7601u_dma_skb_wrap(skb, WLAN_PORT, DMA_PACKET, flags);\n}\n\n \n#define MT_RXD_INFO_LEN\t\t\tGENMASK(13, 0)\n#define MT_RXD_INFO_PCIE_INTR\t\tBIT(24)\n#define MT_RXD_INFO_QSEL\t\tGENMASK(26, 25)\n#define MT_RXD_INFO_PORT\t\tGENMASK(29, 27)\n#define MT_RXD_INFO_TYPE\t\tGENMASK(31, 30)\n\n \n#define MT_RXD_PKT_INFO_UDP_ERR\t\tBIT(16)\n#define MT_RXD_PKT_INFO_TCP_ERR\t\tBIT(17)\n#define MT_RXD_PKT_INFO_IP_ERR\t\tBIT(18)\n#define MT_RXD_PKT_INFO_PKT_80211\tBIT(19)\n#define MT_RXD_PKT_INFO_L3L4_DONE\tBIT(20)\n#define MT_RXD_PKT_INFO_MAC_LEN\t\tGENMASK(23, 21)\n\n \n#define MT_RXD_CMD_INFO_SELF_GEN\tBIT(15)\n#define MT_RXD_CMD_INFO_CMD_SEQ\t\tGENMASK(19, 16)\n#define MT_RXD_CMD_INFO_EVT_TYPE\tGENMASK(23, 20)\n\nenum mt76_evt_type {\n\tCMD_DONE,\n\tCMD_ERROR,\n\tCMD_RETRY,\n\tEVENT_PWR_RSP,\n\tEVENT_WOW_RSP,\n\tEVENT_CARRIER_DETECT_RSP,\n\tEVENT_DFS_DETECT_RSP,\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}