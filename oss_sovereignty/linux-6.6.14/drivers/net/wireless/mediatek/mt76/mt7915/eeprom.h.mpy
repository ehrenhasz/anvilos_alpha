{
  "module_name": "eeprom.h",
  "hash_id": "a43d1beed325de6c9e997c7df86356d57f1332c8f3f0ead33bc902d7bdfba7d7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt76/mt7915/eeprom.h",
  "human_readable_source": " \n \n\n#ifndef __MT7915_EEPROM_H\n#define __MT7915_EEPROM_H\n\n#include \"mt7915.h\"\n\nstruct cal_data {\n\tu8 count;\n\tu16 offset[60];\n};\n\nenum mt7915_eeprom_field {\n\tMT_EE_CHIP_ID =\t\t0x000,\n\tMT_EE_VERSION =\t\t0x002,\n\tMT_EE_MAC_ADDR =\t0x004,\n\tMT_EE_MAC_ADDR2 =\t0x00a,\n\tMT_EE_DDIE_FT_VERSION =\t0x050,\n\tMT_EE_DO_PRE_CAL =\t0x062,\n\tMT_EE_WIFI_CONF =\t0x190,\n\tMT_EE_RATE_DELTA_2G =\t0x252,\n\tMT_EE_RATE_DELTA_5G =\t0x29d,\n\tMT_EE_TX0_POWER_2G =\t0x2fc,\n\tMT_EE_TX0_POWER_5G =\t0x34b,\n\tMT_EE_RATE_DELTA_2G_V2 = 0x7d3,\n\tMT_EE_RATE_DELTA_5G_V2 = 0x81e,\n\tMT_EE_RATE_DELTA_6G_V2 = 0x884,  \n\tMT_EE_TX0_POWER_2G_V2 =\t0x441,\n\tMT_EE_TX0_POWER_5G_V2 =\t0x445,\n\tMT_EE_TX0_POWER_6G_V2 =\t0x465,\n\tMT_EE_ADIE_FT_VERSION =\t0x9a0,\n\n\t__MT_EE_MAX =\t\t0xe00,\n\t__MT_EE_MAX_V2 =\t0x1000,\n\t \n\tMT_EE_PRECAL =\t\t0xe10,\n\tMT_EE_PRECAL_V2 =\t0x1010\n};\n\n#define MT_EE_WIFI_CAL_GROUP\t\t\tBIT(0)\n#define MT_EE_WIFI_CAL_DPD\t\t\tGENMASK(2, 1)\n#define MT_EE_CAL_UNIT\t\t\t\t1024\n#define MT_EE_CAL_GROUP_SIZE\t\t\t(49 * MT_EE_CAL_UNIT + 16)\n#define MT_EE_CAL_DPD_SIZE\t\t\t(54 * MT_EE_CAL_UNIT)\n\n#define MT_EE_WIFI_CONF0_TX_PATH\t\tGENMASK(2, 0)\n#define MT_EE_WIFI_CONF0_BAND_SEL\t\tGENMASK(7, 6)\n#define MT_EE_WIFI_CONF1_BAND_SEL\t\tGENMASK(7, 6)\n#define MT_EE_WIFI_CONF_STREAM_NUM\t\tGENMASK(7, 5)\n#define MT_EE_WIFI_CONF3_TX_PATH_B0\t\tGENMASK(1, 0)\n#define MT_EE_WIFI_CONF3_TX_PATH_B1\t\tGENMASK(5, 4)\n#define MT_EE_WIFI_CONF7_TSSI0_2G\t\tBIT(0)\n#define MT_EE_WIFI_CONF7_TSSI0_5G\t\tBIT(2)\n#define MT_EE_WIFI_CONF7_TSSI1_5G\t\tBIT(4)\n\n#define MT_EE_RATE_DELTA_MASK\t\t\tGENMASK(5, 0)\n#define MT_EE_RATE_DELTA_SIGN\t\t\tBIT(6)\n#define MT_EE_RATE_DELTA_EN\t\t\tBIT(7)\n\nenum mt7915_adie_sku {\n\tMT7976_ONE_ADIE_DBDC = 0x7,\n\tMT7975_ONE_ADIE\t= 0x8,\n\tMT7976_ONE_ADIE\t= 0xa,\n\tMT7975_DUAL_ADIE = 0xd,\n\tMT7976_DUAL_ADIE = 0xf,\n};\n\nenum mt7915_eeprom_band {\n\tMT_EE_BAND_SEL_DEFAULT,\n\tMT_EE_BAND_SEL_5GHZ,\n\tMT_EE_BAND_SEL_2GHZ,\n\tMT_EE_BAND_SEL_DUAL,\n};\n\nenum {\n\tMT_EE_V2_BAND_SEL_2GHZ,\n\tMT_EE_V2_BAND_SEL_5GHZ,\n\tMT_EE_V2_BAND_SEL_6GHZ,\n\tMT_EE_V2_BAND_SEL_5GHZ_6GHZ,\n};\n\nenum mt7915_sku_rate_group {\n\tSKU_CCK,\n\tSKU_OFDM,\n\tSKU_HT_BW20,\n\tSKU_HT_BW40,\n\tSKU_VHT_BW20,\n\tSKU_VHT_BW40,\n\tSKU_VHT_BW80,\n\tSKU_VHT_BW160,\n\tSKU_HE_RU26,\n\tSKU_HE_RU52,\n\tSKU_HE_RU106,\n\tSKU_HE_RU242,\n\tSKU_HE_RU484,\n\tSKU_HE_RU996,\n\tSKU_HE_RU2x996,\n\tMAX_SKU_RATE_GROUP_NUM,\n};\n\nstatic inline int\nmt7915_get_channel_group_5g(int channel, bool is_7976)\n{\n\tif (is_7976) {\n\t\tif (channel <= 64)\n\t\t\treturn 0;\n\t\tif (channel <= 96)\n\t\t\treturn 1;\n\t\tif (channel <= 128)\n\t\t\treturn 2;\n\t\tif (channel <= 144)\n\t\t\treturn 3;\n\t\treturn 4;\n\t}\n\n\tif (channel >= 184 && channel <= 196)\n\t\treturn 0;\n\tif (channel <= 48)\n\t\treturn 1;\n\tif (channel <= 64)\n\t\treturn 2;\n\tif (channel <= 96)\n\t\treturn 3;\n\tif (channel <= 112)\n\t\treturn 4;\n\tif (channel <= 128)\n\t\treturn 5;\n\tif (channel <= 144)\n\t\treturn 6;\n\treturn 7;\n}\n\nstatic inline int\nmt7915_get_channel_group_6g(int channel)\n{\n\tif (channel <= 29)\n\t\treturn 0;\n\n\treturn DIV_ROUND_UP(channel - 29, 32);\n}\n\nstatic inline bool\nmt7915_tssi_enabled(struct mt7915_dev *dev, enum nl80211_band band)\n{\n\tu8 *eep = dev->mt76.eeprom.data;\n\tu8 offs = is_mt7981(&dev->mt76) ? 8 : 7;\n\tu8 val = eep[MT_EE_WIFI_CONF + offs];\n\n\tif (band == NL80211_BAND_2GHZ)\n\t\treturn val & MT_EE_WIFI_CONF7_TSSI0_2G;\n\n\tif (dev->dbdc_support)\n\t\treturn val & MT_EE_WIFI_CONF7_TSSI1_5G;\n\telse\n\t\treturn val & MT_EE_WIFI_CONF7_TSSI0_5G;\n}\n\nextern const u8 mt7915_sku_group_len[MAX_SKU_RATE_GROUP_NUM];\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}