{
  "module_name": "mt7603.h",
  "hash_id": "ea8401ab2498ab22310f8fbbaf604038db8f9d2f00d77a7a961653a29f1d29c1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h",
  "human_readable_source": " \n\n#ifndef __MT7603_H\n#define __MT7603_H\n\n#include <linux/interrupt.h>\n#include <linux/ktime.h>\n#include \"../mt76.h\"\n#include \"regs.h\"\n\n#define MT7603_MAX_INTERFACES\t4\n#define MT7603_WTBL_SIZE\t128\n#define MT7603_WTBL_RESERVED\t(MT7603_WTBL_SIZE - 1)\n#define MT7603_WTBL_STA\t\t(MT7603_WTBL_RESERVED - MT7603_MAX_INTERFACES)\n\n#define MT7603_RATE_RETRY\t2\n\n#define MT7603_MCU_RX_RING_SIZE\t64\n#define MT7603_RX_RING_SIZE     128\n#define MT7603_TX_RING_SIZE\t256\n#define MT7603_PSD_RING_SIZE\t128\n\n#define MT7603_FIRMWARE_E1\t\"mt7603_e1.bin\"\n#define MT7603_FIRMWARE_E2\t\"mt7603_e2.bin\"\n#define MT7628_FIRMWARE_E1\t\"mt7628_e1.bin\"\n#define MT7628_FIRMWARE_E2\t\"mt7628_e2.bin\"\n\n#define MT7603_EEPROM_SIZE\t1024\n\n#define MT_AGG_SIZE_LIMIT(_n)\t(((_n) + 1) * 4)\n\n#define MT7603_PRE_TBTT_TIME\t5000  \n\n#define MT7603_WATCHDOG_TIME\t100  \n#define MT7603_WATCHDOG_TIMEOUT\t10  \n\n#define MT7603_EDCCA_BLOCK_TH\t10\n\n#define MT7603_CFEND_RATE_DEFAULT\t0x69  \n#define MT7603_CFEND_RATE_11B\t\t0x03  \n\nstruct mt7603_vif;\nstruct mt7603_sta;\n\nenum {\n\tMT7603_REV_E1 = 0x00,\n\tMT7603_REV_E2 = 0x10,\n\tMT7628_REV_E1 = 0x8a00,\n};\n\nenum mt7603_bw {\n\tMT_BW_20,\n\tMT_BW_40,\n\tMT_BW_80,\n};\n\nstruct mt7603_rate_set {\n\tstruct ieee80211_tx_rate probe_rate;\n\tstruct ieee80211_tx_rate rates[4];\n};\n\nstruct mt7603_sta {\n\tstruct mt76_wcid wcid;  \n\n\tstruct mt7603_vif *vif;\n\n\tu32 tx_airtime_ac[4];\n\n\tstruct sk_buff_head psq;\n\n\tstruct ieee80211_tx_rate rates[4];\n\n\tstruct mt7603_rate_set rateset[2];\n\tu32 rate_set_tsf;\n\n\tu8 rate_count;\n\tu8 n_rates;\n\n\tu8 rate_probe;\n\tu8 smps;\n\n\tu8 ps;\n};\n\nstruct mt7603_vif {\n\tstruct mt7603_sta sta;  \n\n\tu8 idx;\n};\n\nenum mt7603_reset_cause {\n\tRESET_CAUSE_TX_HANG,\n\tRESET_CAUSE_TX_BUSY,\n\tRESET_CAUSE_RX_BUSY,\n\tRESET_CAUSE_BEACON_STUCK,\n\tRESET_CAUSE_RX_PSE_BUSY,\n\tRESET_CAUSE_MCU_HANG,\n\tRESET_CAUSE_RESET_FAILED,\n\t__RESET_CAUSE_MAX\n};\n\nstruct mt7603_dev {\n\tunion {  \n\t\tstruct mt76_dev mt76;\n\t\tstruct mt76_phy mphy;\n\t};\n\n\tconst struct mt76_bus_ops *bus_ops;\n\n\tu32 rxfilter;\n\n\tstruct mt7603_sta global_sta;\n\n\tu32 agc0, agc3;\n\tu32 false_cca_ofdm, false_cca_cck;\n\tunsigned long last_cca_adj;\n\n\tu32 ampdu_ref;\n\tu32 rx_ampdu_ts;\n\tu8 rssi_offset[3];\n\n\tu8 slottime;\n\ts16 coverage_class;\n\n\ts8 tx_power_limit;\n\n\tktime_t ed_time;\n\n\tspinlock_t ps_lock;\n\n\tu8 mcu_running;\n\n\tu8 ed_monitor_enabled;\n\tu8 ed_monitor;\n\ts8 ed_trigger;\n\tu8 ed_strict_mode;\n\tu8 ed_strong_signal;\n\n\tbool dynamic_sensitivity;\n\ts8 sensitivity;\n\tu8 sensitivity_limit;\n\n\tu8 beacon_check;\n\tu8 tx_hang_check;\n\tu8 tx_dma_check;\n\tu8 rx_dma_check;\n\tu8 rx_pse_check;\n\tu8 mcu_hang;\n\n\tenum mt7603_reset_cause cur_reset_cause;\n\n\tu16 tx_dma_idx[4];\n\tu16 rx_dma_idx;\n\n\tu32 reset_test;\n\n\tunsigned int reset_cause[__RESET_CAUSE_MAX];\n};\n\nextern const struct mt76_driver_ops mt7603_drv_ops;\nextern const struct ieee80211_ops mt7603_ops;\nextern struct pci_driver mt7603_pci_driver;\nextern struct platform_driver mt76_wmac_driver;\n\nstatic inline bool is_mt7603(struct mt7603_dev *dev)\n{\n\treturn mt76xx_chip(dev) == 0x7603;\n}\n\nstatic inline bool is_mt7628(struct mt7603_dev *dev)\n{\n\treturn mt76xx_chip(dev) == 0x7628;\n}\n\n \n#define MT_RATE_DRIVER_DATA_OFFSET\t4\n\nu32 mt7603_reg_map(struct mt7603_dev *dev, u32 addr);\n\nirqreturn_t mt7603_irq_handler(int irq, void *dev_instance);\n\nint mt7603_register_device(struct mt7603_dev *dev);\nvoid mt7603_unregister_device(struct mt7603_dev *dev);\nint mt7603_eeprom_init(struct mt7603_dev *dev);\nint mt7603_dma_init(struct mt7603_dev *dev);\nvoid mt7603_dma_cleanup(struct mt7603_dev *dev);\nint mt7603_mcu_init(struct mt7603_dev *dev);\nvoid mt7603_init_debugfs(struct mt7603_dev *dev);\n\nstatic inline void mt7603_irq_enable(struct mt7603_dev *dev, u32 mask)\n{\n\tmt76_set_irq_mask(&dev->mt76, MT_INT_MASK_CSR, 0, mask);\n}\n\nstatic inline void mt7603_irq_disable(struct mt7603_dev *dev, u32 mask)\n{\n\tmt76_set_irq_mask(&dev->mt76, MT_INT_MASK_CSR, mask, 0);\n}\n\nvoid mt7603_mac_reset_counters(struct mt7603_dev *dev);\nvoid mt7603_mac_dma_start(struct mt7603_dev *dev);\nvoid mt7603_mac_start(struct mt7603_dev *dev);\nvoid mt7603_mac_stop(struct mt7603_dev *dev);\nvoid mt7603_mac_work(struct work_struct *work);\nvoid mt7603_mac_set_timing(struct mt7603_dev *dev);\nvoid mt7603_beacon_set_timer(struct mt7603_dev *dev, int idx, int intval);\nint mt7603_mac_fill_rx(struct mt7603_dev *dev, struct sk_buff *skb);\nvoid mt7603_mac_add_txs(struct mt7603_dev *dev, void *data);\nvoid mt7603_mac_rx_ba_reset(struct mt7603_dev *dev, void *addr, u8 tid);\nvoid mt7603_mac_tx_ba_reset(struct mt7603_dev *dev, int wcid, int tid,\n\t\t\t    int ba_size);\nvoid mt7603_mac_sta_poll(struct mt7603_dev *dev);\n\nvoid mt7603_pse_client_reset(struct mt7603_dev *dev);\n\nint mt7603_mcu_set_channel(struct mt7603_dev *dev);\nint mt7603_mcu_set_eeprom(struct mt7603_dev *dev);\nvoid mt7603_mcu_exit(struct mt7603_dev *dev);\n\nvoid mt7603_wtbl_init(struct mt7603_dev *dev, int idx, int vif,\n\t\t      const u8 *mac_addr);\nvoid mt7603_wtbl_clear(struct mt7603_dev *dev, int idx);\nvoid mt7603_wtbl_update_cap(struct mt7603_dev *dev, struct ieee80211_sta *sta);\nvoid mt7603_wtbl_set_rates(struct mt7603_dev *dev, struct mt7603_sta *sta,\n\t\t\t   struct ieee80211_tx_rate *probe_rate,\n\t\t\t   struct ieee80211_tx_rate *rates);\nint mt7603_wtbl_set_key(struct mt7603_dev *dev, int wcid,\n\t\t\tstruct ieee80211_key_conf *key);\nvoid mt7603_wtbl_set_ps(struct mt7603_dev *dev, struct mt7603_sta *sta,\n\t\t\tbool enabled);\nvoid mt7603_wtbl_set_smps(struct mt7603_dev *dev, struct mt7603_sta *sta,\n\t\t\t  bool enabled);\nvoid mt7603_filter_tx(struct mt7603_dev *dev, int mac_idx, int idx, bool abort);\n\nint mt7603_tx_prepare_skb(struct mt76_dev *mdev, void *txwi_ptr,\n\t\t\t  enum mt76_txq_id qid, struct mt76_wcid *wcid,\n\t\t\t  struct ieee80211_sta *sta,\n\t\t\t  struct mt76_tx_info *tx_info);\n\nvoid mt7603_tx_complete_skb(struct mt76_dev *mdev, struct mt76_queue_entry *e);\n\nvoid mt7603_queue_rx_skb(struct mt76_dev *mdev, enum mt76_rxq_id q,\n\t\t\t struct sk_buff *skb, u32 *info);\nvoid mt7603_rx_poll_complete(struct mt76_dev *mdev, enum mt76_rxq_id q);\nvoid mt7603_sta_ps(struct mt76_dev *mdev, struct ieee80211_sta *sta, bool ps);\nint mt7603_sta_add(struct mt76_dev *mdev, struct ieee80211_vif *vif,\n\t\t   struct ieee80211_sta *sta);\nvoid mt7603_sta_assoc(struct mt76_dev *mdev, struct ieee80211_vif *vif,\n\t\t      struct ieee80211_sta *sta);\nvoid mt7603_sta_remove(struct mt76_dev *mdev, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta);\n\nvoid mt7603_pre_tbtt_tasklet(struct tasklet_struct *t);\n\nvoid mt7603_update_channel(struct mt76_phy *mphy);\n\nvoid mt7603_edcca_set_strict(struct mt7603_dev *dev, bool val);\nvoid mt7603_cca_stats_reset(struct mt7603_dev *dev);\n\nvoid mt7603_init_edcca(struct mt7603_dev *dev);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}