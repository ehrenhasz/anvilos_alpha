{
  "module_name": "core.c",
  "hash_id": "87330efaafbff9d7b37af7ede4311484e0545a023461081472005af85289f9b1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt76/mt7603/core.c",
  "human_readable_source": "\n\n#include \"mt7603.h\"\n#include \"../trace.h\"\n\nvoid mt7603_rx_poll_complete(struct mt76_dev *mdev, enum mt76_rxq_id q)\n{\n\tstruct mt7603_dev *dev = container_of(mdev, struct mt7603_dev, mt76);\n\n\tmt7603_irq_enable(dev, MT_INT_RX_DONE(q));\n}\n\nirqreturn_t mt7603_irq_handler(int irq, void *dev_instance)\n{\n\tstruct mt7603_dev *dev = dev_instance;\n\tu32 intr;\n\n\tintr = mt76_rr(dev, MT_INT_SOURCE_CSR);\n\tmt76_wr(dev, MT_INT_SOURCE_CSR, intr);\n\n\tif (!test_bit(MT76_STATE_INITIALIZED, &dev->mphy.state))\n\t\treturn IRQ_NONE;\n\n\ttrace_dev_irq(&dev->mt76, intr, dev->mt76.mmio.irqmask);\n\n\tintr &= dev->mt76.mmio.irqmask;\n\n\tif (intr & MT_INT_MAC_IRQ3) {\n\t\tu32 hwintr = mt76_rr(dev, MT_HW_INT_STATUS(3));\n\n\t\tmt76_wr(dev, MT_HW_INT_STATUS(3), hwintr);\n\t\tif (hwintr & MT_HW_INT3_PRE_TBTT0)\n\t\t\ttasklet_schedule(&dev->mt76.pre_tbtt_tasklet);\n\n\t\tif ((hwintr & MT_HW_INT3_TBTT0) && dev->mt76.csa_complete)\n\t\t\tmt76_csa_finish(&dev->mt76);\n\t}\n\n\tif (intr & MT_INT_TX_DONE_ALL) {\n\t\tmt7603_irq_disable(dev, MT_INT_TX_DONE_ALL);\n\t\tnapi_schedule(&dev->mt76.tx_napi);\n\t}\n\n\tif (intr & MT_INT_RX_DONE(0)) {\n\t\tdev->rx_pse_check = 0;\n\t\tmt7603_irq_disable(dev, MT_INT_RX_DONE(0));\n\t\tnapi_schedule(&dev->mt76.napi[0]);\n\t}\n\n\tif (intr & MT_INT_RX_DONE(1)) {\n\t\tdev->rx_pse_check = 0;\n\t\tmt7603_irq_disable(dev, MT_INT_RX_DONE(1));\n\t\tnapi_schedule(&dev->mt76.napi[1]);\n\t}\n\n\treturn IRQ_HANDLED;\n}\n\nu32 mt7603_reg_map(struct mt7603_dev *dev, u32 addr)\n{\n\tu32 base = addr & MT_MCU_PCIE_REMAP_2_BASE;\n\tu32 offset = addr & MT_MCU_PCIE_REMAP_2_OFFSET;\n\n\tdev->bus_ops->wr(&dev->mt76, MT_MCU_PCIE_REMAP_2, base);\n\n\treturn MT_PCIE_REMAP_BASE_2 + offset;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}