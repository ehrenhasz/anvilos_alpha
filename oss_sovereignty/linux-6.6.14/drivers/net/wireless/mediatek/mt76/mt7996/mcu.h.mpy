{
  "module_name": "mcu.h",
  "hash_id": "5b322db8a62cf91333eb7d357e8a94f378394f77fc9d1504b9b981145c62084d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/mediatek/mt76/mt7996/mcu.h",
  "human_readable_source": " \n \n\n#ifndef __MT7996_MCU_H\n#define __MT7996_MCU_H\n\n#include \"../mt76_connac_mcu.h\"\n\nstruct mt7996_mcu_rxd {\n\t__le32 rxd[8];\n\n\t__le16 len;\n\t__le16 pkt_type_id;\n\n\tu8 eid;\n\tu8 seq;\n\tu8 option;\n\tu8 __rsv;\n\n\tu8 ext_eid;\n\tu8 __rsv1[2];\n\tu8 s2d_index;\n};\n\nstruct mt7996_mcu_uni_event {\n\tu8 cid;\n\tu8 __rsv[3];\n\t__le32 status;  \n} __packed;\n\nstruct mt7996_mcu_csa_notify {\n\tstruct mt7996_mcu_rxd rxd;\n\n\tu8 omac_idx;\n\tu8 csa_count;\n\tu8 band_idx;\n\tu8 rsv;\n} __packed;\n\nstruct mt7996_mcu_rdd_report {\n\tstruct mt7996_mcu_rxd rxd;\n\n\tu8 __rsv1[4];\n\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 band_idx;\n\tu8 long_detected;\n\tu8 constant_prf_detected;\n\tu8 staggered_prf_detected;\n\tu8 radar_type_idx;\n\tu8 periodic_pulse_num;\n\tu8 long_pulse_num;\n\tu8 hw_pulse_num;\n\n\tu8 out_lpn;\n\tu8 out_spn;\n\tu8 out_crpn;\n\tu8 out_crpw;\n\tu8 out_crbn;\n\tu8 out_stgpn;\n\tu8 out_stgpw;\n\n\tu8 __rsv2;\n\n\t__le32 out_pri_const;\n\t__le32 out_pri_stg[3];\n\t__le32 out_pri_stg_dmin;\n\n\tstruct {\n\t\t__le32 start;\n\t\t__le16 pulse_width;\n\t\t__le16 pulse_power;\n\t\tu8 mdrdy_flag;\n\t\tu8 rsv[3];\n\t} long_pulse[32];\n\n\tstruct {\n\t\t__le32 start;\n\t\t__le16 pulse_width;\n\t\t__le16 pulse_power;\n\t\tu8 mdrdy_flag;\n\t\tu8 rsv[3];\n\t} periodic_pulse[32];\n\n\tstruct {\n\t\t__le32 start;\n\t\t__le16 pulse_width;\n\t\t__le16 pulse_power;\n\t\tu8 sc_pass;\n\t\tu8 sw_reset;\n\t\tu8 mdrdy_flag;\n\t\tu8 tx_active;\n\t} hw_pulse[32];\n} __packed;\n\nstruct mt7996_mcu_background_chain_ctrl {\n\tu8 _rsv[4];\n\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 chan;\t\t \n\tu8 central_chan;\t \n\tu8 bw;\n\tu8 tx_stream;\n\tu8 rx_stream;\n\n\tu8 monitor_chan;\t \n\tu8 monitor_central_chan; \n\tu8 monitor_bw;\n\tu8 monitor_tx_stream;\n\tu8 monitor_rx_stream;\n\n\tu8 scan_mode;\t\t \n\tu8 band_idx;\t\t \n\tu8 monitor_scan_type;\n\tu8 band;\t\t \n\tu8 rsv[2];\n} __packed;\n\nstruct mt7996_mcu_eeprom {\n\tu8 _rsv[4];\n\n\t__le16 tag;\n\t__le16 len;\n\tu8 buffer_mode;\n\tu8 format;\n\t__le16 buf_len;\n} __packed;\n\nstruct mt7996_mcu_phy_rx_info {\n\tu8 category;\n\tu8 rate;\n\tu8 mode;\n\tu8 nsts;\n\tu8 gi;\n\tu8 coding;\n\tu8 stbc;\n\tu8 bw;\n};\n\nstruct mt7996_mcu_mib {\n\t__le16 tag;\n\t__le16 len;\n\t__le32 offs;\n\t__le64 data;\n} __packed;\n\nenum mt7996_chan_mib_offs {\n\tUNI_MIB_OBSS_AIRTIME = 26,\n\tUNI_MIB_NON_WIFI_TIME = 27,\n\tUNI_MIB_TX_TIME = 28,\n\tUNI_MIB_RX_TIME = 29\n};\n\nstruct edca {\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 queue;\n\tu8 set;\n\tu8 cw_min;\n\tu8 cw_max;\n\t__le16 txop;\n\tu8 aifs;\n\tu8 __rsv;\n};\n\n#define MCU_PQ_ID(p, q)\t\t\t(((p) << 15) | ((q) << 10))\n#define MCU_PKT_ID\t\t\t0xa0\n\nenum {\n\tMCU_FW_LOG_WM,\n\tMCU_FW_LOG_WA,\n\tMCU_FW_LOG_TO_HOST,\n\tMCU_FW_LOG_RELAY = 16\n};\n\nenum {\n\tMCU_TWT_AGRT_ADD,\n\tMCU_TWT_AGRT_MODIFY,\n\tMCU_TWT_AGRT_DELETE,\n\tMCU_TWT_AGRT_TEARDOWN,\n\tMCU_TWT_AGRT_GET_TSF,\n};\n\nenum {\n\tMCU_WA_PARAM_CMD_QUERY,\n\tMCU_WA_PARAM_CMD_SET,\n\tMCU_WA_PARAM_CMD_CAPABILITY,\n\tMCU_WA_PARAM_CMD_DEBUG,\n};\n\nenum {\n\tMCU_WA_PARAM_PDMA_RX = 0x04,\n\tMCU_WA_PARAM_CPU_UTIL = 0x0b,\n\tMCU_WA_PARAM_RED = 0x0e,\n\tMCU_WA_PARAM_HW_PATH_HIF_VER = 0x2f,\n};\n\nenum mcu_mmps_mode {\n\tMCU_MMPS_STATIC,\n\tMCU_MMPS_DYNAMIC,\n\tMCU_MMPS_RSV,\n\tMCU_MMPS_DISABLE,\n};\n\nstruct bss_rate_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 __rsv1[4];\n\t__le16 bc_trans;\n\t__le16 mc_trans;\n\tu8 short_preamble;\n\tu8 bc_fixed_rate;\n\tu8 mc_fixed_rate;\n\tu8 __rsv2[9];\n} __packed;\n\nstruct bss_ra_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 short_preamble;\n\tu8 force_sgi;\n\tu8 force_gf;\n\tu8 ht_mode;\n\tu8 se_off;\n\tu8 antenna_idx;\n\t__le16 max_phyrate;\n\tu8 force_tx_streams;\n\tu8 __rsv[3];\n} __packed;\n\nstruct bss_rlm_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 control_channel;\n\tu8 center_chan;\n\tu8 center_chan2;\n\tu8 bw;\n\tu8 tx_streams;\n\tu8 rx_streams;\n\tu8 ht_op_info;\n\tu8 sco;\n\tu8 band;\n\tu8 __rsv[3];\n} __packed;\n\nstruct bss_color_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 enable;\n\tu8 color;\n\tu8 rsv[2];\n} __packed;\n\nstruct bss_inband_discovery_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 tx_type;\n\tu8 tx_mode;\n\tu8 tx_interval;\n\tu8 enable;\n\t__le16 wcid;\n\t__le16 prob_rsp_len;\n} __packed;\n\nstruct bss_bcn_content_tlv {\n\t__le16 tag;\n\t__le16 len;\n\t__le16 tim_ie_pos;\n\t__le16 csa_ie_pos;\n\t__le16 bcc_ie_pos;\n\tu8 enable;\n\tu8 type;\n\t__le16 pkt_len;\n} __packed;\n\nstruct bss_bcn_cntdwn_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 cnt;\n\tu8 rsv[3];\n} __packed;\n\nstruct bss_bcn_mbss_tlv {\n\t__le16 tag;\n\t__le16 len;\n\t__le32 bitmap;\n#define MAX_BEACON_NUM\t32\n\t__le16 offset[MAX_BEACON_NUM];\n} __packed __aligned(4);\n\nstruct bss_txcmd_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 txcmd_mode;\n\tu8 __rsv[3];\n} __packed;\n\nstruct bss_sec_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 __rsv1[2];\n\tu8 cipher;\n\tu8 __rsv2[1];\n} __packed;\n\nstruct bss_ifs_time_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 slot_valid;\n\tu8 sifs_valid;\n\tu8 rifs_valid;\n\tu8 eifs_valid;\n\t__le16 slot_time;\n\t__le16 sifs_time;\n\t__le16 rifs_time;\n\t__le16 eifs_time;\n\tu8 eifs_cck_valid;\n\tu8 rsv;\n\t__le16 eifs_cck_time;\n} __packed;\n\nstruct bss_power_save {\n\t__le16 tag;\n\t__le16 len;\n\tu8 profile;\n\tu8 _rsv[3];\n} __packed;\n\nstruct bss_mld_tlv {\n\t__le16 tag;\n\t__le16 len;\n\tu8 group_mld_id;\n\tu8 own_mld_id;\n\tu8 mac_addr[ETH_ALEN];\n\tu8 remap_idx;\n\tu8 __rsv[3];\n} __packed;\n\nstruct sta_rec_ba_uni {\n\t__le16 tag;\n\t__le16 len;\n\tu8 tid;\n\tu8 ba_type;\n\tu8 amsdu;\n\tu8 ba_en;\n\t__le16 ssn;\n\t__le16 winsize;\n\tu8 ba_rdd_rro;\n\tu8 __rsv[3];\n} __packed;\n\nstruct sta_rec_eht {\n\t__le16 tag;\n\t__le16 len;\n\tu8 tid_bitmap;\n\tu8 _rsv;\n\t__le16 mac_cap;\n\t__le64 phy_cap;\n\t__le64 phy_cap_ext;\n\tu8 mcs_map_bw20[4];\n\tu8 mcs_map_bw80[3];\n\tu8 mcs_map_bw160[3];\n\tu8 mcs_map_bw320[3];\n\tu8 _rsv2[3];\n} __packed;\n\nstruct sec_key_uni {\n\t__le16 wlan_idx;\n\tu8 mgmt_prot;\n\tu8 cipher_id;\n\tu8 cipher_len;\n\tu8 key_id;\n\tu8 key_len;\n\tu8 need_resp;\n\tu8 key[32];\n} __packed;\n\nstruct sta_rec_sec_uni {\n\t__le16 tag;\n\t__le16 len;\n\tu8 add;\n\tu8 n_cipher;\n\tu8 rsv[2];\n\n\tstruct sec_key_uni key[2];\n} __packed;\n\nstruct sta_rec_hdrt {\n\t__le16 tag;\n\t__le16 len;\n\tu8 hdrt_mode;\n\tu8 rsv[3];\n} __packed;\n\nstruct sta_rec_hdr_trans {\n\t__le16 tag;\n\t__le16 len;\n\tu8 from_ds;\n\tu8 to_ds;\n\tu8 dis_rx_hdr_tran;\n\tu8 mesh;\n} __packed;\n\nstruct hdr_trans_en {\n\t__le16 tag;\n\t__le16 len;\n\tu8 enable;\n\tu8 check_bssid;\n\tu8 mode;\n\tu8 __rsv;\n} __packed;\n\nstruct hdr_trans_vlan {\n\t__le16 tag;\n\t__le16 len;\n\tu8 insert_vlan;\n\tu8 remove_vlan;\n\tu8 tid;\n\tu8 __rsv;\n} __packed;\n\nstruct hdr_trans_blacklist {\n\t__le16 tag;\n\t__le16 len;\n\tu8 idx;\n\tu8 enable;\n\t__le16 type;\n} __packed;\n\nstruct uni_header {\n\tu8 __rsv[4];\n} __packed;\n\nstruct vow_rx_airtime {\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 enable;\n\tu8 band;\n\tu8 __rsv[2];\n} __packed;\n\nstruct bf_sounding_on {\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 snd_mode;\n\tu8 sta_num;\n\tu8 __rsv[2];\n\t__le16 wlan_id[4];\n\t__le32 snd_period;\n} __packed;\n\nstruct bf_hw_en_status_update {\n\t__le16 tag;\n\t__le16 len;\n\n\tbool ebf;\n\tbool ibf;\n\tu8 __rsv[2];\n} __packed;\n\nstruct bf_mod_en_ctrl {\n\t__le16 tag;\n\t__le16 len;\n\n\tu8 bf_num;\n\tu8 bf_bitmap;\n\tu8 bf_sel[8];\n\tu8 __rsv[2];\n} __packed;\n\nunion bf_tag_tlv {\n\tstruct bf_sounding_on bf_snd;\n\tstruct bf_hw_en_status_update bf_hw_en;\n\tstruct bf_mod_en_ctrl bf_mod_en;\n};\n\nstruct ra_rate {\n\t__le16 wlan_idx;\n\tu8 mode;\n\tu8 stbc;\n\t__le16 gi;\n\tu8 bw;\n\tu8 ldpc;\n\tu8 mcs;\n\tu8 nss;\n\t__le16 ltf;\n\tu8 spe;\n\tu8 preamble;\n\tu8 __rsv[2];\n} __packed;\n\nstruct ra_fixed_rate {\n\t__le16 tag;\n\t__le16 len;\n\n\t__le16 version;\n\tstruct ra_rate rate;\n} __packed;\n\nenum {\n\tUNI_RA_FIXED_RATE = 0xf,\n};\n\n#define MT7996_HDR_TRANS_MAX_SIZE\t(sizeof(struct hdr_trans_en) +\t \\\n\t\t\t\t\t sizeof(struct hdr_trans_vlan) + \\\n\t\t\t\t\t sizeof(struct hdr_trans_blacklist))\n\nenum {\n\tUNI_HDR_TRANS_EN,\n\tUNI_HDR_TRANS_VLAN,\n\tUNI_HDR_TRANS_BLACKLIST,\n};\n\nenum {\n\tRATE_PARAM_FIXED = 3,\n\tRATE_PARAM_MMPS_UPDATE = 5,\n\tRATE_PARAM_FIXED_HE_LTF = 7,\n\tRATE_PARAM_FIXED_MCS,\n\tRATE_PARAM_FIXED_GI = 11,\n\tRATE_PARAM_AUTO = 20,\n};\n\nenum {\n\tBF_SOUNDING_ON = 1,\n\tBF_HW_EN_UPDATE = 17,\n\tBF_MOD_EN_CTRL = 20,\n};\n\nenum {\n\tCMD_BAND_NONE,\n\tCMD_BAND_24G,\n\tCMD_BAND_5G,\n\tCMD_BAND_6G,\n};\n\nstruct bss_req_hdr {\n\tu8 bss_idx;\n\tu8 __rsv[3];\n} __packed;\n\nenum {\n\tUNI_CHANNEL_SWITCH,\n\tUNI_CHANNEL_RX_PATH,\n};\n\n#define MT7996_BSS_UPDATE_MAX_SIZE\t(sizeof(struct bss_req_hdr) +\t\t\\\n\t\t\t\t\t sizeof(struct mt76_connac_bss_basic_tlv) +\t\\\n\t\t\t\t\t sizeof(struct bss_rlm_tlv) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_ra_tlv) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_info_uni_he) +\t\\\n\t\t\t\t\t sizeof(struct bss_rate_tlv) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_txcmd_tlv) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_power_save) +\t\\\n\t\t\t\t\t sizeof(struct bss_sec_tlv) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_ifs_time_tlv) +\t\\\n\t\t\t\t\t sizeof(struct bss_mld_tlv))\n\n#define MT7996_STA_UPDATE_MAX_SIZE\t(sizeof(struct sta_req_hdr) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_basic) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_bf) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_ht) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_he_v2) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_ba_uni) +\t\\\n\t\t\t\t\t sizeof(struct sta_rec_vht) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_uapsd) + \t\\\n\t\t\t\t\t sizeof(struct sta_rec_amsdu) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_bfee) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_phy) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_ra) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_sec) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_ra_fixed) +\t\\\n\t\t\t\t\t sizeof(struct sta_rec_he_6g_capa) +\t\\\n\t\t\t\t\t sizeof(struct sta_rec_eht) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_hdrt) +\t\t\\\n\t\t\t\t\t sizeof(struct sta_rec_hdr_trans) +\t\\\n\t\t\t\t\t sizeof(struct tlv))\n\n#define MT7996_MAX_BEACON_SIZE\t\t1342\n#define MT7996_BEACON_UPDATE_SIZE\t(sizeof(struct bss_req_hdr) +\t\t\\\n\t\t\t\t\t sizeof(struct bss_bcn_content_tlv) +\t\\\n\t\t\t\t\t MT_TXD_SIZE +\t\t\t\t\\\n\t\t\t\t\t sizeof(struct bss_bcn_cntdwn_tlv) +\t\\\n\t\t\t\t\t sizeof(struct bss_bcn_mbss_tlv))\n#define MT7996_MAX_BSS_OFFLOAD_SIZE\t(MT7996_MAX_BEACON_SIZE +\t\t\\\n\t\t\t\t\t MT7996_BEACON_UPDATE_SIZE)\n\nenum {\n\tUNI_BAND_CONFIG_RADIO_ENABLE,\n\tUNI_BAND_CONFIG_RTS_THRESHOLD = 0x08,\n};\n\nenum {\n\tUNI_WSYS_CONFIG_FW_LOG_CTRL,\n\tUNI_WSYS_CONFIG_FW_DBG_CTRL,\n};\n\nenum {\n\tUNI_RDD_CTRL_PARM,\n\tUNI_RDD_CTRL_SET_TH = 0x3,\n};\n\nenum {\n\tUNI_EFUSE_ACCESS = 1,\n\tUNI_EFUSE_BUFFER_MODE,\n\tUNI_EFUSE_FREE_BLOCK,\n\tUNI_EFUSE_BUFFER_RD,\n};\n\nenum {\n\tUNI_VOW_DRR_CTRL,\n\tUNI_VOW_RX_AT_AIRTIME_EN = 0x0b,\n\tUNI_VOW_RX_AT_AIRTIME_CLR_EN = 0x0e,\n};\n\nenum {\n\tUNI_CMD_MIB_DATA,\n};\n\nenum {\n\tUNI_POWER_OFF,\n};\n\nenum {\n\tUNI_CMD_TWT_ARGT_UPDATE = 0x0,\n\tUNI_CMD_TWT_MGMT_OFFLOAD,\n};\n\nenum {\n\tUNI_RRO_DEL_ENTRY = 0x1,\n\tUNI_RRO_SET_PLATFORM_TYPE,\n\tUNI_RRO_GET_BA_SESSION_TABLE,\n\tUNI_RRO_SET_BYPASS_MODE,\n\tUNI_RRO_SET_TXFREE_PATH,\n};\n\nenum{\n\tUNI_CMD_SR_ENABLE = 0x1,\n\tUNI_CMD_SR_ENABLE_SD,\n\tUNI_CMD_SR_ENABLE_MODE,\n\tUNI_CMD_SR_ENABLE_DPD = 0x12,\n\tUNI_CMD_SR_ENABLE_TX,\n\tUNI_CMD_SR_SET_SRG_BITMAP = 0x80,\n\tUNI_CMD_SR_SET_PARAM = 0xc1,\n\tUNI_CMD_SR_SET_SIGA = 0xd0,\n};\n\nenum {\n\tUNI_CMD_ACCESS_REG_BASIC = 0x0,\n\tUNI_CMD_ACCESS_RF_REG_BASIC,\n};\n\nenum {\n\tUNI_CMD_SER_QUERY,\n\t \n\tUNI_CMD_SER_SET_RECOVER_L1,\n\tUNI_CMD_SER_SET_RECOVER_L2,\n\tUNI_CMD_SER_SET_RECOVER_L3_RX_ABORT,\n\tUNI_CMD_SER_SET_RECOVER_L3_TX_ABORT,\n\tUNI_CMD_SER_SET_RECOVER_L3_TX_DISABLE,\n\tUNI_CMD_SER_SET_RECOVER_L3_BF,\n\tUNI_CMD_SER_SET_RECOVER_L4_MDP,\n\tUNI_CMD_SER_SET_RECOVER_FULL,\n\tUNI_CMD_SER_SET_SYSTEM_ASSERT,\n\t \n\tUNI_CMD_SER_ENABLE = 1,\n\tUNI_CMD_SER_SET,\n\tUNI_CMD_SER_TRIGGER\n};\n\nenum {\n\tMT7996_SEC_MODE_PLAIN,\n\tMT7996_SEC_MODE_AES,\n\tMT7996_SEC_MODE_SCRAMBLE,\n\tMT7996_SEC_MODE_MAX,\n};\n\n#define MT7996_PATCH_SEC\t\tGENMASK(31, 24)\n#define MT7996_PATCH_SCRAMBLE_KEY\tGENMASK(15, 8)\n#define MT7996_PATCH_AES_KEY\t\tGENMASK(7, 0)\n\n#define MT7996_SEC_ENCRYPT\t\tBIT(0)\n#define MT7996_SEC_KEY_IDX\t\tGENMASK(2, 1)\n#define MT7996_SEC_IV\t\t\tBIT(3)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}