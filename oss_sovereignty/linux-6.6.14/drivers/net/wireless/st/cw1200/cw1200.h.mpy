{
  "module_name": "cw1200.h",
  "hash_id": "63c9f3cafd8c4c1f58a7fa798c70e255b8e0de82a39a7e824acefbef508b0769",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/st/cw1200/cw1200.h",
  "human_readable_source": " \n \n\n#ifndef CW1200_H\n#define CW1200_H\n\n#include <linux/wait.h>\n#include <linux/mutex.h>\n#include <linux/workqueue.h>\n#include <net/mac80211.h>\n\n#include \"queue.h\"\n#include \"wsm.h\"\n#include \"scan.h\"\n#include \"txrx.h\"\n#include \"pm.h\"\n\n \nstruct hwbus_ops;\nstruct task_struct;\nstruct cw1200_debug_priv;\nstruct firmware;\n\n#define CW1200_MAX_CTRL_FRAME_LEN\t(0x1000)\n\n#define CW1200_MAX_STA_IN_AP_MODE\t(5)\n#define CW1200_LINK_ID_AFTER_DTIM\t(CW1200_MAX_STA_IN_AP_MODE + 1)\n#define CW1200_LINK_ID_UAPSD\t\t(CW1200_MAX_STA_IN_AP_MODE + 2)\n#define CW1200_LINK_ID_MAX\t\t(CW1200_MAX_STA_IN_AP_MODE + 3)\n#define CW1200_MAX_REQUEUE_ATTEMPTS\t(5)\n\n#define CW1200_MAX_TID\t\t\t(8)\n\n#define CW1200_BLOCK_ACK_CNT\t\t(30)\n#define CW1200_BLOCK_ACK_THLD\t\t(800)\n#define CW1200_BLOCK_ACK_HIST\t\t(3)\n#define CW1200_BLOCK_ACK_INTERVAL\t(1 * HZ / CW1200_BLOCK_ACK_HIST)\n\n#define CW1200_JOIN_TIMEOUT\t\t(1 * HZ)\n#define CW1200_AUTH_TIMEOUT\t\t(5 * HZ)\n\nstruct cw1200_ht_info {\n\tstruct ieee80211_sta_ht_cap     ht_cap;\n\tenum nl80211_channel_type       channel_type;\n\tu16                             operation_mode;\n};\n\n \nenum cw1200_join_status {\n\tCW1200_JOIN_STATUS_PASSIVE = 0,\n\tCW1200_JOIN_STATUS_MONITOR,\n\tCW1200_JOIN_STATUS_JOINING,\n\tCW1200_JOIN_STATUS_PRE_STA,\n\tCW1200_JOIN_STATUS_STA,\n\tCW1200_JOIN_STATUS_IBSS,\n\tCW1200_JOIN_STATUS_AP,\n};\n\nenum cw1200_link_status {\n\tCW1200_LINK_OFF,\n\tCW1200_LINK_RESERVE,\n\tCW1200_LINK_SOFT,\n\tCW1200_LINK_HARD,\n\tCW1200_LINK_RESET,\n\tCW1200_LINK_RESET_REMAP,\n};\n\nextern int cw1200_power_mode;\nextern const char * const cw1200_fw_types[];\n\nstruct cw1200_link_entry {\n\tunsigned long\t\t\ttimestamp;\n\tenum cw1200_link_status\t\tstatus;\n\tenum cw1200_link_status\t\tprev_status;\n\tu8\t\t\t\tmac[ETH_ALEN];\n\tu8\t\t\t\tbuffered[CW1200_MAX_TID];\n\tstruct sk_buff_head\t\trx_queue;\n};\n\nstruct cw1200_common {\n\t \n\tstruct ieee80211_hw\t\t*hw;\n\tstruct ieee80211_vif\t\t*vif;\n\tstruct device\t\t\t*pdev;\n\n\t \n\tstruct ieee80211_low_level_stats stats;\n\n\t \n\tu8 mac_addr[ETH_ALEN];\n\n\t \n\tconst struct hwbus_ops\t\t*hwbus_ops;\n\tstruct hwbus_priv\t\t*hwbus_priv;\n\n\t \n\tenum {\n\t\tHIF_9000_SILICON_VERSATILE = 0,\n\t\tHIF_8601_VERSATILE,\n\t\tHIF_8601_SILICON,\n\t} hw_type;\n\tenum {\n\t\tCW1200_HW_REV_CUT10 = 10,\n\t\tCW1200_HW_REV_CUT11 = 11,\n\t\tCW1200_HW_REV_CUT20 = 20,\n\t\tCW1200_HW_REV_CUT22 = 22,\n\t\tCW1X60_HW_REV       = 40,\n\t} hw_revision;\n\tint                             hw_refclk;\n\tbool\t\t\t\thw_have_5ghz;\n\tconst struct firmware\t\t*sdd;\n\tchar                            *sdd_path;\n\n\tstruct cw1200_debug_priv\t*debug;\n\n\tstruct workqueue_struct\t\t*workqueue;\n\tstruct mutex\t\t\tconf_mutex;\n\n\tstruct cw1200_queue\t\ttx_queue[4];\n\tstruct cw1200_queue_stats\ttx_queue_stats;\n\tint\t\t\t\ttx_burst_idx;\n\n\t \n\tunsigned int tx_hdr_len;\n\n\t \n\tint output_power;\n\n\t \n\tstruct ieee80211_rate\t\t*rates;\n\tstruct ieee80211_rate\t\t*mcs_rates;\n\tstruct ieee80211_channel\t*channel;\n\tstruct wsm_edca_params\t\tedca;\n\tstruct wsm_tx_queue_params\ttx_queue_params;\n\tstruct wsm_mib_association_mode\tassociation_mode;\n\tstruct wsm_set_bss_params\tbss_params;\n\tstruct cw1200_ht_info\t\tht_info;\n\tstruct wsm_set_pm\t\tpowersave_mode;\n\tstruct wsm_set_pm\t\tfirmware_ps_mode;\n\tint\t\t\t\tcqm_rssi_thold;\n\tunsigned\t\t\tcqm_rssi_hyst;\n\tbool\t\t\t\tcqm_use_rssi;\n\tint\t\t\t\tcqm_beacon_loss_count;\n\tint\t\t\t\tchannel_switch_in_progress;\n\twait_queue_head_t\t\tchannel_switch_done;\n\tu8\t\t\t\tlong_frame_max_tx_count;\n\tu8\t\t\t\tshort_frame_max_tx_count;\n\tint\t\t\t\tmode;\n\tbool\t\t\t\tenable_beacon;\n\tint\t\t\t\tbeacon_int;\n\tbool\t\t\t\tlistening;\n\tstruct wsm_rx_filter\t\trx_filter;\n\tstruct wsm_mib_multicast_filter multicast_filter;\n\tbool\t\t\t\thas_multicast_subscription;\n\tbool\t\t\t\tdisable_beacon_filter;\n\tstruct work_struct\t\tupdate_filtering_work;\n\tstruct work_struct\t\tset_beacon_wakeup_period_work;\n\n\tu8\t\t\t\tba_rx_tid_mask;\n\tu8\t\t\t\tba_tx_tid_mask;\n\n\tstruct cw1200_pm_state\t\tpm_state;\n\n\tstruct wsm_p2p_ps_modeinfo\tp2p_ps_modeinfo;\n\tstruct wsm_uapsd_info\t\tuapsd_info;\n\tbool\t\t\t\tsetbssparams_done;\n\tbool\t\t\t\tbt_present;\n\tu8\t\t\t\tconf_listen_interval;\n\tu32\t\t\t\tlisten_interval;\n\tu32\t\t\t\terp_info;\n\tu32\t\t\t\trts_threshold;\n\n\t \n\tatomic_t\t\t\tbh_rx;\n\tatomic_t\t\t\tbh_tx;\n\tatomic_t\t\t\tbh_term;\n\tatomic_t\t\t\tbh_suspend;\n\n\tstruct workqueue_struct         *bh_workqueue;\n\tstruct work_struct              bh_work;\n\n\tint\t\t\t\tbh_error;\n\twait_queue_head_t\t\tbh_wq;\n\twait_queue_head_t\t\tbh_evt_wq;\n\tu8\t\t\t\tbuf_id_tx;\n\tu8\t\t\t\tbuf_id_rx;\n\tu8\t\t\t\twsm_rx_seq;\n\tu8\t\t\t\twsm_tx_seq;\n\tint\t\t\t\thw_bufs_used;\n\tbool\t\t\t\tpowersave_enabled;\n\tbool\t\t\t\tdevice_can_sleep;\n\n\t \n\tstruct cw1200_scan scan;\n\t \n\tatomic_t\t\t\trecent_scan;\n\tstruct delayed_work\t\tclear_recent_scan_work;\n\n\t \n\tstruct wsm_startup_ind\t\twsm_caps;\n\tstruct mutex\t\t\twsm_cmd_mux;\n\tstruct wsm_buf\t\t\twsm_cmd_buf;\n\tstruct wsm_cmd\t\t\twsm_cmd;\n\twait_queue_head_t\t\twsm_cmd_wq;\n\twait_queue_head_t\t\twsm_startup_done;\n\tint                             firmware_ready;\n\tatomic_t\t\t\ttx_lock;\n\n\t \n\tint\t\t\t\twsm_enable_wsm_dumps;\n\n\t \n\tenum cw1200_join_status\tjoin_status;\n\tu32\t\t\tpending_frame_id;\n\tbool\t\t\tjoin_pending;\n\tstruct delayed_work\tjoin_timeout;\n\tstruct work_struct\tunjoin_work;\n\tstruct work_struct\tjoin_complete_work;\n\tint\t\t\tjoin_complete_status;\n\tint\t\t\tjoin_dtim_period;\n\tbool\t\t\tdelayed_unjoin;\n\n\t \n\ts8\t\t\twep_default_key_id;\n\tstruct work_struct\twep_key_work;\n\tu32\t\t\tkey_map;\n\tstruct wsm_add_key\tkeys[WSM_KEY_MAX_INDEX + 1];\n\n\t \n\tu32\t\t\tlink_id_map;\n\tstruct cw1200_link_entry link_id_db[CW1200_MAX_STA_IN_AP_MODE];\n\tstruct work_struct\tlink_id_work;\n\tstruct delayed_work\tlink_id_gc_work;\n\tu32\t\t\tsta_asleep_mask;\n\tu32\t\t\tpspoll_mask;\n\tbool\t\t\taid0_bit_set;\n\tspinlock_t\t\tps_state_lock;  \n\tbool\t\t\tbuffered_multicasts;\n\tbool\t\t\ttx_multicast;\n\tstruct work_struct\tset_tim_work;\n\tstruct work_struct\tset_cts_work;\n\tstruct work_struct\tmulticast_start_work;\n\tstruct work_struct\tmulticast_stop_work;\n\tstruct timer_list\tmcast_timeout;\n\n\t \n\tspinlock_t\t\tevent_queue_lock;  \n\tstruct list_head\tevent_queue;\n\tstruct work_struct\tevent_handler;\n\n\tstruct delayed_work\tbss_loss_work;\n\tspinlock_t\t\tbss_loss_lock;  \n\tint                     bss_loss_state;\n\tu32                     bss_loss_confirm_id;\n\tint\t\t\tdelayed_link_loss;\n\tstruct work_struct\tbss_params_work;\n\n\t \n\tstruct tx_policy_cache tx_policy_cache;\n\tstruct work_struct tx_policy_upload_work;\n\n\t \n\tint\t\t\tps_mode_switch_in_progress;\n\twait_queue_head_t\tps_mode_switch_done;\n\n\t \n\tstruct work_struct\tlinkid_reset_work;\n\tu8\t\t\taction_frame_sa[ETH_ALEN];\n\tu8\t\t\taction_linkid;\n};\n\nstruct cw1200_sta_priv {\n\tint link_id;\n};\n\n \nint cw1200_core_probe(const struct hwbus_ops *hwbus_ops,\n\t\t      struct hwbus_priv *hwbus,\n\t\t      struct device *pdev,\n\t\t      struct cw1200_common **pself,\n\t\t      int ref_clk, const u8 *macaddr,\n\t\t      const char *sdd_path, bool have_5ghz);\nvoid cw1200_core_release(struct cw1200_common *self);\n\n#define FWLOAD_BLOCK_SIZE (1024)\n\nstatic inline int cw1200_is_ht(const struct cw1200_ht_info *ht_info)\n{\n\treturn ht_info->channel_type != NL80211_CHAN_NO_HT;\n}\n\nstatic inline int cw1200_ht_greenfield(const struct cw1200_ht_info *ht_info)\n{\n\treturn cw1200_is_ht(ht_info) &&\n\t\t(ht_info->ht_cap.cap & IEEE80211_HT_CAP_GRN_FLD) &&\n\t\t!(ht_info->operation_mode &\n\t\t  IEEE80211_HT_OP_MODE_NON_GF_STA_PRSNT);\n}\n\nstatic inline int cw1200_ht_ampdu_density(const struct cw1200_ht_info *ht_info)\n{\n\tif (!cw1200_is_ht(ht_info))\n\t\treturn 0;\n\treturn ht_info->ht_cap.ampdu_density;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}