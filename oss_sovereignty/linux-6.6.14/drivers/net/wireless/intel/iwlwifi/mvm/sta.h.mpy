{
  "module_name": "sta.h",
  "hash_id": "53ff3bf1aa8ca0253396e2e7ac49917dd6f8c5acca4bd7e187b475cf5ed7cc9b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/mvm/sta.h",
  "human_readable_source": " \n \n#ifndef __sta_h__\n#define __sta_h__\n\n#include <linux/spinlock.h>\n#include <net/mac80211.h>\n#include <linux/wait.h>\n\n#include \"iwl-trans.h\"  \n#include \"fw-api.h\"  \n#include \"rs.h\"\n\nstruct iwl_mvm;\nstruct iwl_mvm_vif;\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \nenum iwl_mvm_agg_state {\n\tIWL_AGG_OFF = 0,\n\tIWL_AGG_QUEUED,\n\tIWL_AGG_STARTING,\n\tIWL_AGG_ON,\n\tIWL_EMPTYING_HW_QUEUE_ADDBA,\n\tIWL_EMPTYING_HW_QUEUE_DELBA,\n};\n\n \nstruct iwl_mvm_tid_data {\n\tu16 seq_number;\n\tu16 next_reclaimed;\n\t \n\tu32 rate_n_flags;\n\tu8 lq_color;\n\tbool amsdu_in_ampdu_allowed;\n\tenum iwl_mvm_agg_state state;\n\tu16 txq_id;\n\tu16 ssn;\n\tu16 tx_time;\n\tunsigned long tpt_meas_start;\n\tu32 tx_count_last;\n\tu32 tx_count;\n};\n\nstruct iwl_mvm_key_pn {\n\tstruct rcu_head rcu_head;\n\tstruct {\n\t\tu8 pn[IWL_MAX_TID_COUNT][IEEE80211_CCMP_PN_LEN];\n\t} ____cacheline_aligned_in_smp q[];\n};\n\n \nenum iwl_mvm_rxq_notif_type {\n\tIWL_MVM_RXQ_EMPTY,\n\tIWL_MVM_RXQ_NOTIF_DEL_BA,\n\tIWL_MVM_RXQ_NSSN_SYNC,\n};\n\n \nstruct iwl_mvm_internal_rxq_notif {\n\tu16 type;\n\tu16 sync;\n\tu32 cookie;\n\tu8 data[];\n} __packed;\n\nstruct iwl_mvm_delba_data {\n\tu32 baid;\n} __packed;\n\nstruct iwl_mvm_nssn_sync_data {\n\tu32 baid;\n\tu32 nssn;\n} __packed;\n\n \nstruct iwl_mvm_rxq_dup_data {\n\t__le16 last_seq[IWL_MAX_TID_COUNT + 1];\n\tu8 last_sub_frame[IWL_MAX_TID_COUNT + 1];\n} ____cacheline_aligned_in_smp;\n\n \nstruct iwl_mvm_link_sta {\n\tstruct rcu_head rcu_head;\n\tu32 sta_id;\n\tunion {\n\t\tstruct iwl_lq_sta_rs_fw rs_fw;\n\t\tstruct iwl_lq_sta rs_drv;\n\t} lq_sta;\n\n\tu16 orig_amsdu_len;\n\n\tu8 avg_energy;\n};\n\n \nstruct iwl_mvm_sta {\n\tu32 tfd_queue_msk;\n\tu32 mac_id_n_color;\n\tu16 tid_disable_agg;\n\tu8 sta_type;\n\tenum ieee80211_sta_state sta_state;\n\tbool bt_reduced_txpower;\n\tbool next_status_eosp;\n\tbool authorized;\n\tspinlock_t lock;\n\tstruct iwl_mvm_tid_data tid_data[IWL_MAX_TID_COUNT + 1];\n\tu8 tid_to_baid[IWL_MAX_TID_COUNT];\n\tstruct ieee80211_vif *vif;\n\tstruct iwl_mvm_key_pn __rcu *ptk_pn[4];\n\tstruct iwl_mvm_rxq_dup_data *dup_data;\n\n\tu8 reserved_queue;\n\n\t \n\ts8 tx_protection;\n\tbool tt_tx_protection;\n\n\tbool disable_tx;\n\tu16 amsdu_enabled;\n\tu16 max_amsdu_len;\n\tbool sleeping;\n\tu8 agg_tids;\n\tu8 sleep_tx_count;\n\tu8 tx_ant;\n\tu32 pairwise_cipher;\n\n\tstruct iwl_mvm_link_sta deflink;\n\tstruct iwl_mvm_link_sta __rcu *link[IEEE80211_MLD_MAX_NUM_LINKS];\n};\n\nu16 iwl_mvm_tid_queued(struct iwl_mvm *mvm, struct iwl_mvm_tid_data *tid_data);\n\nstatic inline struct iwl_mvm_sta *\niwl_mvm_sta_from_mac80211(struct ieee80211_sta *sta)\n{\n\treturn (void *)sta->drv_priv;\n}\n\n \nstruct iwl_mvm_int_sta {\n\tu32 sta_id;\n\tu8 type;\n\tu32 tfd_queue_msk;\n};\n\n \nint iwl_mvm_sta_send_to_fw(struct iwl_mvm *mvm, struct ieee80211_sta *sta,\n\t\t\t   bool update, unsigned int flags);\nint iwl_mvm_find_free_sta_id(struct iwl_mvm *mvm, enum nl80211_iftype iftype);\nint iwl_mvm_sta_init(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t     struct ieee80211_sta *sta, int sta_id, u8 sta_type);\nint iwl_mvm_add_sta(struct iwl_mvm *mvm,\n\t\t    struct ieee80211_vif *vif,\n\t\t    struct ieee80211_sta *sta);\n\nstatic inline int iwl_mvm_update_sta(struct iwl_mvm *mvm,\n\t\t\t\t     struct ieee80211_vif *vif,\n\t\t\t\t     struct ieee80211_sta *sta)\n{\n\treturn iwl_mvm_sta_send_to_fw(mvm, sta, true, 0);\n}\n\nvoid iwl_mvm_realloc_queues_after_restart(struct iwl_mvm *mvm,\n\t\t\t\t\t  struct ieee80211_sta *sta);\nint iwl_mvm_wait_sta_queues_empty(struct iwl_mvm *mvm,\n\t\t\t\t  struct iwl_mvm_sta *mvm_sta);\nbool iwl_mvm_sta_del(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t     struct ieee80211_sta *sta,\n\t\t     struct ieee80211_link_sta *link_sta, int *ret);\nint iwl_mvm_rm_sta(struct iwl_mvm *mvm,\n\t\t   struct ieee80211_vif *vif,\n\t\t   struct ieee80211_sta *sta);\nint iwl_mvm_rm_sta_id(struct iwl_mvm *mvm,\n\t\t      struct ieee80211_vif *vif,\n\t\t      u8 sta_id);\nint iwl_mvm_set_sta_key(struct iwl_mvm *mvm,\n\t\t\tstruct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta,\n\t\t\tstruct ieee80211_key_conf *keyconf,\n\t\t\tu8 key_offset);\nint iwl_mvm_remove_sta_key(struct iwl_mvm *mvm,\n\t\t\t   struct ieee80211_vif *vif,\n\t\t\t   struct ieee80211_sta *sta,\n\t\t\t   struct ieee80211_key_conf *keyconf);\n\nvoid iwl_mvm_update_tkip_key(struct iwl_mvm *mvm,\n\t\t\t     struct ieee80211_vif *vif,\n\t\t\t     struct ieee80211_key_conf *keyconf,\n\t\t\t     struct ieee80211_sta *sta, u32 iv32,\n\t\t\t     u16 *phase1key);\n\nvoid iwl_mvm_rx_eosp_notif(struct iwl_mvm *mvm,\n\t\t\t   struct iwl_rx_cmd_buffer *rxb);\n\n \nint iwl_mvm_sta_rx_agg(struct iwl_mvm *mvm, struct ieee80211_sta *sta,\n\t\t       int tid, u16 ssn, bool start, u16 buf_size, u16 timeout);\nint iwl_mvm_sta_tx_agg_start(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, u16 tid, u16 *ssn);\nint iwl_mvm_sta_tx_agg_oper(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t    struct ieee80211_sta *sta, u16 tid, u16 buf_size,\n\t\t\t    bool amsdu);\nint iwl_mvm_sta_tx_agg_stop(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t    struct ieee80211_sta *sta, u16 tid);\nint iwl_mvm_sta_tx_agg_flush(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t    struct ieee80211_sta *sta, u16 tid);\n\nint iwl_mvm_sta_tx_agg(struct iwl_mvm *mvm, struct ieee80211_sta *sta,\n\t\t       int tid, u8 queue, bool start);\n\nint iwl_mvm_add_aux_sta(struct iwl_mvm *mvm, u32 lmac_id);\nint iwl_mvm_rm_aux_sta(struct iwl_mvm *mvm);\n\nint iwl_mvm_alloc_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nvoid iwl_mvm_free_bcast_sta_queues(struct iwl_mvm *mvm,\n\t\t\t\t   struct ieee80211_vif *vif);\nint iwl_mvm_send_add_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_add_p2p_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_send_rm_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_rm_p2p_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_add_mcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_rm_mcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_allocate_int_sta(struct iwl_mvm *mvm,\n\t\t\t     struct iwl_mvm_int_sta *sta,\n\t\t\t\t    u32 qmask, enum nl80211_iftype iftype,\n\t\t\t\t    u8 type);\nvoid iwl_mvm_dealloc_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nvoid iwl_mvm_dealloc_int_sta(struct iwl_mvm *mvm, struct iwl_mvm_int_sta *sta);\nint iwl_mvm_add_snif_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_rm_snif_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nvoid iwl_mvm_dealloc_snif_sta(struct iwl_mvm *mvm);\n\nvoid iwl_mvm_sta_modify_ps_wake(struct iwl_mvm *mvm,\n\t\t\t\tstruct ieee80211_sta *sta);\nvoid iwl_mvm_sta_modify_sleep_tx_count(struct iwl_mvm *mvm,\n\t\t\t\t       struct ieee80211_sta *sta,\n\t\t\t\t       enum ieee80211_frame_release_type reason,\n\t\t\t\t       u16 cnt, u16 tids, bool more_data,\n\t\t\t\t       bool single_sta_queue);\nint iwl_mvm_drain_sta(struct iwl_mvm *mvm, struct iwl_mvm_sta *mvmsta,\n\t\t      bool drain);\nvoid iwl_mvm_sta_modify_disable_tx(struct iwl_mvm *mvm,\n\t\t\t\t   struct iwl_mvm_sta *mvmsta, bool disable);\nvoid iwl_mvm_sta_modify_disable_tx_ap(struct iwl_mvm *mvm,\n\t\t\t\t      struct ieee80211_sta *sta,\n\t\t\t\t      bool disable);\nvoid iwl_mvm_modify_all_sta_disable_tx(struct iwl_mvm *mvm,\n\t\t\t\t       struct iwl_mvm_vif *mvmvif,\n\t\t\t\t       bool disable);\n\nvoid iwl_mvm_csa_client_absent(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nvoid iwl_mvm_add_new_dqa_stream_wk(struct work_struct *wk);\nint iwl_mvm_add_pasn_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t struct iwl_mvm_int_sta *sta, u8 *addr, u32 cipher,\n\t\t\t u8 *key, u32 key_len);\nvoid iwl_mvm_cancel_channel_switch(struct iwl_mvm *mvm,\n\t\t\t\t   struct ieee80211_vif *vif,\n\t\t\t\t   u32 id);\n \nint iwl_mvm_tvqm_enable_txq(struct iwl_mvm *mvm,\n\t\t\t    struct ieee80211_sta *sta,\n\t\t\t    u8 sta_id, u8 tid, unsigned int timeout);\n\n \n \nstruct iwl_mvm_sta_state_ops {\n\tint (*add_sta)(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta);\n\tint (*update_sta)(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t  struct ieee80211_sta *sta);\n\tint (*rm_sta)(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t      struct ieee80211_sta *sta);\n\tint (*mac_ctxt_changed)(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t\tbool force_assoc_off);\n};\n\nint iwl_mvm_mac_sta_state_common(struct ieee80211_hw *hw,\n\t\t\t\t struct ieee80211_vif *vif,\n\t\t\t\t struct ieee80211_sta *sta,\n\t\t\t\t enum ieee80211_sta_state old_state,\n\t\t\t\t enum ieee80211_sta_state new_state,\n\t\t\t\t const struct iwl_mvm_sta_state_ops *callbacks);\n\n \n \nint iwl_mvm_mld_add_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t      struct ieee80211_bss_conf *link_conf);\nint iwl_mvm_mld_add_snif_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t     struct ieee80211_bss_conf *link_conf);\nint iwl_mvm_mld_add_mcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t      struct ieee80211_bss_conf *link_conf);\nint iwl_mvm_mld_add_aux_sta(struct iwl_mvm *mvm, u32 lmac_id);\nint iwl_mvm_mld_rm_bcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t     struct ieee80211_bss_conf *link_conf);\nint iwl_mvm_mld_rm_snif_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif);\nint iwl_mvm_mld_rm_mcast_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t     struct ieee80211_bss_conf *link_conf);\nint iwl_mvm_mld_rm_aux_sta(struct iwl_mvm *mvm);\nint iwl_mvm_mld_add_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta);\nint iwl_mvm_mld_update_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t\t   struct ieee80211_sta *sta);\nint iwl_mvm_mld_rm_sta(struct iwl_mvm *mvm, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta);\nint iwl_mvm_mld_rm_sta_id(struct iwl_mvm *mvm, u8 sta_id);\nint iwl_mvm_mld_update_sta_links(struct iwl_mvm *mvm,\n\t\t\t\t struct ieee80211_vif *vif,\n\t\t\t\t struct ieee80211_sta *sta,\n\t\t\t\t u16 old_links, u16 new_links);\nu32 iwl_mvm_sta_fw_id_mask(struct iwl_mvm *mvm, struct ieee80211_sta *sta,\n\t\t\t   int filter_link_id);\nint iwl_mvm_mld_add_int_sta_with_queue(struct iwl_mvm *mvm,\n\t\t\t\t       struct iwl_mvm_int_sta *sta,\n\t\t\t\t       const u8 *addr, int link_id,\n\t\t\t\t       u16 *queue, u8 tid,\n\t\t\t\t       unsigned int *_wdg_timeout);\n\n \nvoid iwl_mvm_mld_modify_all_sta_disable_tx(struct iwl_mvm *mvm,\n\t\t\t\t\t   struct iwl_mvm_vif *mvmvif,\n\t\t\t\t\t   bool disable);\nvoid iwl_mvm_mld_sta_modify_disable_tx(struct iwl_mvm *mvm,\n\t\t\t\t       struct iwl_mvm_sta *mvm_sta,\n\t\t\t\t       bool disable);\nvoid iwl_mvm_mld_sta_modify_disable_tx_ap(struct iwl_mvm *mvm,\n\t\t\t\t\t  struct ieee80211_sta *sta,\n\t\t\t\t\t  bool disable);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}