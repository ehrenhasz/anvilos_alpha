{
  "module_name": "agn.h",
  "hash_id": "db3d6343b1bac93c48271a1a5991b24666ea5354225c6f830979e763d6b3e1c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/dvm/agn.h",
  "human_readable_source": " \n \n#ifndef __iwl_agn_h__\n#define __iwl_agn_h__\n\n#include \"iwl-config.h\"\n\n#include \"dev.h\"\n\n \n#define IWLAGN_FIRST_AMPDU_QUEUE\t11\n\n \n#define IWL_AUX_QUEUE\t\t10\n\n#define IWL_INVALID_STATION\t255\n\n \nextern const struct iwl_dvm_cfg iwl_dvm_1000_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_2000_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_105_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_2030_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_5000_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_5150_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_6000_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_6005_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_6050_cfg;\nextern const struct iwl_dvm_cfg iwl_dvm_6030_cfg;\n\n\n#define TIME_UNIT\t\t1024\n\n \n#define STATUS_RF_KILL_HW\t0\n#define STATUS_CT_KILL\t\t1\n#define STATUS_ALIVE\t\t2\n#define STATUS_READY\t\t3\n#define STATUS_EXIT_PENDING\t5\n#define STATUS_STATISTICS\t6\n#define STATUS_SCANNING\t\t7\n#define STATUS_SCAN_ABORTING\t8\n#define STATUS_SCAN_HW\t\t9\n#define STATUS_FW_ERROR\t\t10\n#define STATUS_CHANNEL_SWITCH_PENDING 11\n#define STATUS_SCAN_COMPLETE\t12\n#define STATUS_POWER_PMI\t13\n\nstruct iwl_ucode_capabilities;\n\nextern const struct ieee80211_ops iwlagn_hw_ops;\n\nstatic inline void iwl_set_calib_hdr(struct iwl_calib_hdr *hdr, u8 cmd)\n{\n\thdr->op_code = cmd;\n\thdr->first_group = 0;\n\thdr->groups_num = 1;\n\thdr->data_valid = 1;\n}\n\nvoid iwl_down(struct iwl_priv *priv);\nvoid iwl_cancel_deferred_work(struct iwl_priv *priv);\nvoid iwlagn_prepare_restart(struct iwl_priv *priv);\nvoid iwl_rx_dispatch(struct iwl_op_mode *op_mode, struct napi_struct *napi,\n\t\t     struct iwl_rx_cmd_buffer *rxb);\n\nbool iwl_check_for_ct_kill(struct iwl_priv *priv);\n\nvoid iwlagn_lift_passive_no_rx(struct iwl_priv *priv);\n\n \nstruct ieee80211_hw *iwl_alloc_all(void);\nint iwlagn_mac_setup_register(struct iwl_priv *priv,\n\t\t\t      const struct iwl_ucode_capabilities *capa);\nvoid iwlagn_mac_unregister(struct iwl_priv *priv);\n\n \nint iwl_dvm_send_cmd(struct iwl_priv *priv, struct iwl_host_cmd *cmd);\nint iwl_dvm_send_cmd_pdu(struct iwl_priv *priv, u8 id,\n\t\t\t u32 flags, u16 len, const void *data);\n\n \nvoid iwl_connection_init_rx_config(struct iwl_priv *priv,\n\t\t\t\t   struct iwl_rxon_context *ctx);\nint iwlagn_set_pan_params(struct iwl_priv *priv);\nint iwlagn_commit_rxon(struct iwl_priv *priv, struct iwl_rxon_context *ctx);\nvoid iwlagn_set_rxon_chain(struct iwl_priv *priv, struct iwl_rxon_context *ctx);\nint iwlagn_mac_config(struct ieee80211_hw *hw, u32 changed);\nvoid iwlagn_bss_info_changed(struct ieee80211_hw *hw,\n\t\t\t     struct ieee80211_vif *vif,\n\t\t\t     struct ieee80211_bss_conf *bss_conf,\n\t\t\t     u64 changes);\nvoid iwlagn_config_ht40(struct ieee80211_conf *conf,\n\t\t\tstruct iwl_rxon_context *ctx);\nvoid iwl_set_rxon_ht(struct iwl_priv *priv, struct iwl_ht_config *ht_conf);\nvoid iwl_set_rxon_channel(struct iwl_priv *priv, struct ieee80211_channel *ch,\n\t\t\t struct iwl_rxon_context *ctx);\nvoid iwl_set_flags_for_band(struct iwl_priv *priv,\n\t\t\t    struct iwl_rxon_context *ctx,\n\t\t\t    enum nl80211_band band,\n\t\t\t    struct ieee80211_vif *vif);\n\n \nint iwl_send_bt_env(struct iwl_priv *priv, u8 action, u8 type);\nvoid iwl_send_prio_tbl(struct iwl_priv *priv);\nint iwl_init_alive_start(struct iwl_priv *priv);\nint iwl_run_init_ucode(struct iwl_priv *priv);\nint iwl_load_ucode_wait_alive(struct iwl_priv *priv,\n\t\t\t      enum iwl_ucode_type ucode_type);\nint iwl_send_calib_results(struct iwl_priv *priv);\nint iwl_calib_set(struct iwl_priv *priv,\n\t\t  const struct iwl_calib_cmd *cmd, size_t len);\nvoid iwl_calib_free_results(struct iwl_priv *priv);\nint iwl_dump_nic_event_log(struct iwl_priv *priv, bool full_log,\n\t\t\t    char **buf);\nint iwlagn_hw_valid_rtc_data_addr(u32 addr);\n\n \nint iwlagn_send_tx_power(struct iwl_priv *priv);\nvoid iwlagn_temperature(struct iwl_priv *priv);\nint iwlagn_txfifo_flush(struct iwl_priv *priv, u32 scd_q_msk);\nvoid iwlagn_dev_txfifo_flush(struct iwl_priv *priv);\nint iwlagn_send_beacon_cmd(struct iwl_priv *priv);\nint iwl_send_statistics_request(struct iwl_priv *priv,\n\t\t\t\tu8 flags, bool clear);\n\nstatic inline const struct ieee80211_supported_band *iwl_get_hw_mode(\n\t\t\tstruct iwl_priv *priv, enum nl80211_band band)\n{\n\treturn priv->hw->wiphy->bands[band];\n}\n\n#ifdef CONFIG_PM_SLEEP\nint iwlagn_send_patterns(struct iwl_priv *priv,\n\t\t\t struct cfg80211_wowlan *wowlan);\nint iwlagn_suspend(struct iwl_priv *priv, struct cfg80211_wowlan *wowlan);\n#endif\n\n \nint iwlagn_hwrate_to_mac80211_idx(u32 rate_n_flags, enum nl80211_band band);\nvoid iwl_setup_rx_handlers(struct iwl_priv *priv);\nvoid iwl_chswitch_done(struct iwl_priv *priv, bool is_success);\n\n\n \nint iwlagn_tx_skb(struct iwl_priv *priv,\n\t\t  struct ieee80211_sta *sta,\n\t\t  struct sk_buff *skb);\nint iwlagn_tx_agg_start(struct iwl_priv *priv, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, u16 tid, u16 *ssn);\nint iwlagn_tx_agg_oper(struct iwl_priv *priv, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, u16 tid, u8 buf_size);\nint iwlagn_tx_agg_stop(struct iwl_priv *priv, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta, u16 tid);\nint iwlagn_tx_agg_flush(struct iwl_priv *priv, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, u16 tid);\nvoid iwlagn_rx_reply_compressed_ba(struct iwl_priv *priv,\n\t\t\t\t   struct iwl_rx_cmd_buffer *rxb);\nvoid iwlagn_rx_reply_tx(struct iwl_priv *priv, struct iwl_rx_cmd_buffer *rxb);\n\nstatic inline u32 iwl_tx_status_to_mac80211(u32 status)\n{\n\tstatus &= TX_STATUS_MSK;\n\n\tswitch (status) {\n\tcase TX_STATUS_SUCCESS:\n\tcase TX_STATUS_DIRECT_DONE:\n\t\treturn IEEE80211_TX_STAT_ACK;\n\tcase TX_STATUS_FAIL_DEST_PS:\n\tcase TX_STATUS_FAIL_PASSIVE_NO_RX:\n\t\treturn IEEE80211_TX_STAT_TX_FILTERED;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\nstatic inline bool iwl_is_tx_success(u32 status)\n{\n\tstatus &= TX_STATUS_MSK;\n\treturn (status == TX_STATUS_SUCCESS) ||\n\t       (status == TX_STATUS_DIRECT_DONE);\n}\n\nu8 iwl_toggle_tx_ant(struct iwl_priv *priv, u8 ant_idx, u8 valid);\n\n \nvoid iwlagn_post_scan(struct iwl_priv *priv);\nint iwl_force_rf_reset(struct iwl_priv *priv, bool external);\nvoid iwl_init_scan_params(struct iwl_priv *priv);\nint iwl_scan_cancel(struct iwl_priv *priv);\nvoid iwl_scan_cancel_timeout(struct iwl_priv *priv, unsigned long ms);\nvoid iwl_force_scan_end(struct iwl_priv *priv);\nvoid iwl_internal_short_hw_scan(struct iwl_priv *priv);\nvoid iwl_setup_rx_scan_handlers(struct iwl_priv *priv);\nvoid iwl_setup_scan_deferred_work(struct iwl_priv *priv);\nvoid iwl_cancel_scan_deferred_work(struct iwl_priv *priv);\nint __must_check iwl_scan_initiate(struct iwl_priv *priv,\n\t\t\t\t   struct ieee80211_vif *vif,\n\t\t\t\t   enum iwl_scan_type scan_type,\n\t\t\t\t   enum nl80211_band band);\n\n \n#define IWL_ACTIVE_QUIET_TIME       cpu_to_le16(10)   \n#define IWL_PLCP_QUIET_THRESH       cpu_to_le16(1)   \n\n#define IWL_SCAN_CHECK_WATCHDOG\t\t(HZ * 15)\n\n\n \nvoid iwlagn_send_advance_bt_config(struct iwl_priv *priv);\nvoid iwlagn_bt_rx_handler_setup(struct iwl_priv *priv);\nvoid iwlagn_bt_setup_deferred_work(struct iwl_priv *priv);\nvoid iwlagn_bt_cancel_deferred_work(struct iwl_priv *priv);\nvoid iwlagn_bt_coex_rssi_monitor(struct iwl_priv *priv);\nvoid iwlagn_bt_adjust_rssi_monitor(struct iwl_priv *priv, bool rssi_ena);\n\nstatic inline bool iwl_advanced_bt_coexist(struct iwl_priv *priv)\n{\n\treturn priv->lib->bt_params &&\n\t       priv->lib->bt_params->advanced_bt_coexist;\n}\n\n#ifdef CONFIG_IWLWIFI_DEBUG\nconst char *iwl_get_tx_fail_reason(u32 status);\nconst char *iwl_get_agg_tx_fail_reason(u16 status);\n#else\nstatic inline const char *iwl_get_tx_fail_reason(u32 status) { return \"\"; }\nstatic inline const char *iwl_get_agg_tx_fail_reason(u16 status) { return \"\"; }\n#endif\n\n\n \nint iwlagn_manage_ibss_station(struct iwl_priv *priv,\n\t\t\t       struct ieee80211_vif *vif, bool add);\n#define IWL_STA_DRIVER_ACTIVE BIT(0)  \n#define IWL_STA_UCODE_ACTIVE  BIT(1)  \n#define IWL_STA_UCODE_INPROGRESS  BIT(2)  \n#define IWL_STA_LOCAL BIT(3)  \n#define IWL_STA_BCAST BIT(4)  \n\n\nvoid iwl_restore_stations(struct iwl_priv *priv, struct iwl_rxon_context *ctx);\nvoid iwl_clear_ucode_stations(struct iwl_priv *priv,\n\t\t\t      struct iwl_rxon_context *ctx);\nvoid iwl_dealloc_bcast_stations(struct iwl_priv *priv);\nint iwl_get_free_ucode_key_offset(struct iwl_priv *priv);\nint iwl_send_add_sta(struct iwl_priv *priv,\n\t\t     struct iwl_addsta_cmd *sta, u8 flags);\nint iwl_add_station_common(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t\t   const u8 *addr, bool is_ap,\n\t\t\t   struct ieee80211_sta *sta, u8 *sta_id_r);\nint iwl_remove_station(struct iwl_priv *priv, const u8 sta_id,\n\t\t       const u8 *addr);\nvoid iwl_deactivate_station(struct iwl_priv *priv, const u8 sta_id,\n\t\t\t    const u8 *addr);\nu8 iwl_prep_station(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t    const u8 *addr, bool is_ap, struct ieee80211_sta *sta);\n\nint iwl_send_lq_cmd(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t    struct iwl_link_quality_cmd *lq, u8 flags, bool init);\nvoid iwl_add_sta_callback(struct iwl_priv *priv, struct iwl_rx_cmd_buffer *rxb);\nint iwl_sta_update_ht(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t      struct ieee80211_sta *sta);\n\nbool iwl_is_ht40_tx_allowed(struct iwl_priv *priv,\n\t\t\t    struct iwl_rxon_context *ctx,\n\t\t\t    struct ieee80211_sta *sta);\n\nstatic inline int iwl_sta_id(struct ieee80211_sta *sta)\n{\n\tif (WARN_ON(!sta))\n\t\treturn IWL_INVALID_STATION;\n\n\treturn ((struct iwl_station_priv *)sta->drv_priv)->sta_id;\n}\n\nint iwlagn_alloc_bcast_station(struct iwl_priv *priv,\n\t\t\t       struct iwl_rxon_context *ctx);\nint iwlagn_add_bssid_station(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t\t     const u8 *addr, u8 *sta_id_r);\nint iwl_remove_default_wep_key(struct iwl_priv *priv,\n\t\t\t       struct iwl_rxon_context *ctx,\n\t\t\t       struct ieee80211_key_conf *key);\nint iwl_set_default_wep_key(struct iwl_priv *priv,\n\t\t\t    struct iwl_rxon_context *ctx,\n\t\t\t    struct ieee80211_key_conf *key);\nint iwl_restore_default_wep_keys(struct iwl_priv *priv,\n\t\t\t\t struct iwl_rxon_context *ctx);\nint iwl_set_dynamic_key(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t\tstruct ieee80211_key_conf *key,\n\t\t\tstruct ieee80211_sta *sta);\nint iwl_remove_dynamic_key(struct iwl_priv *priv, struct iwl_rxon_context *ctx,\n\t\t\t   struct ieee80211_key_conf *key,\n\t\t\t   struct ieee80211_sta *sta);\nvoid iwl_update_tkip_key(struct iwl_priv *priv,\n\t\t\t struct ieee80211_vif *vif,\n\t\t\t struct ieee80211_key_conf *keyconf,\n\t\t\t struct ieee80211_sta *sta, u32 iv32, u16 *phase1key);\nint iwl_sta_tx_modify_enable_tid(struct iwl_priv *priv, int sta_id, int tid);\nint iwl_sta_rx_agg_start(struct iwl_priv *priv, struct ieee80211_sta *sta,\n\t\t\t int tid, u16 ssn);\nint iwl_sta_rx_agg_stop(struct iwl_priv *priv, struct ieee80211_sta *sta,\n\t\t\tint tid);\nvoid iwl_sta_modify_sleep_tx_count(struct iwl_priv *priv, int sta_id, int cnt);\nint iwl_update_bcast_station(struct iwl_priv *priv,\n\t\t\t     struct iwl_rxon_context *ctx);\nint iwl_update_bcast_stations(struct iwl_priv *priv);\n\n \nstatic inline u32 iwl_ant_idx_to_flags(u8 ant_idx)\n{\n\treturn BIT(ant_idx) << RATE_MCS_ANT_POS;\n}\n\nstatic inline u8 iwl_hw_get_rate(__le32 rate_n_flags)\n{\n\treturn le32_to_cpu(rate_n_flags) & RATE_MCS_RATE_MSK;\n}\n\nstatic inline __le32 iwl_hw_set_rate_n_flags(u8 rate, u32 flags)\n{\n\treturn cpu_to_le32(flags|(u32)rate);\n}\n\nint iwl_alive_start(struct iwl_priv *priv);\n\n#ifdef CONFIG_IWLWIFI_DEBUG\nvoid iwl_print_rx_config_cmd(struct iwl_priv *priv,\n\t\t\t     enum iwl_rxon_context_id ctxid);\n#else\nstatic inline void iwl_print_rx_config_cmd(struct iwl_priv *priv,\n\t\t\t\t\t   enum iwl_rxon_context_id ctxid)\n{\n}\n#endif\n\n \n\nstatic inline int iwl_is_ready(struct iwl_priv *priv)\n{\n\t \n\treturn test_bit(STATUS_READY, &priv->status) &&\n\t       !test_bit(STATUS_EXIT_PENDING, &priv->status);\n}\n\nstatic inline int iwl_is_alive(struct iwl_priv *priv)\n{\n\treturn test_bit(STATUS_ALIVE, &priv->status);\n}\n\nstatic inline int iwl_is_rfkill(struct iwl_priv *priv)\n{\n\treturn test_bit(STATUS_RF_KILL_HW, &priv->status);\n}\n\nstatic inline int iwl_is_ctkill(struct iwl_priv *priv)\n{\n\treturn test_bit(STATUS_CT_KILL, &priv->status);\n}\n\nstatic inline int iwl_is_ready_rf(struct iwl_priv *priv)\n{\n\tif (iwl_is_rfkill(priv))\n\t\treturn 0;\n\n\treturn iwl_is_ready(priv);\n}\n\nstatic inline void iwl_dvm_set_pmi(struct iwl_priv *priv, bool state)\n{\n\tif (state)\n\t\tset_bit(STATUS_POWER_PMI, &priv->status);\n\telse\n\t\tclear_bit(STATUS_POWER_PMI, &priv->status);\n\tiwl_trans_set_pmi(priv->trans, state);\n}\n\n#ifdef CONFIG_IWLWIFI_DEBUGFS\nvoid iwl_dbgfs_register(struct iwl_priv *priv, struct dentry *dbgfs_dir);\n#else\nstatic inline void iwl_dbgfs_register(struct iwl_priv *priv,\n\t\t\t\t      struct dentry *dbgfs_dir) { }\n#endif  \n\n#ifdef CONFIG_IWLWIFI_DEBUG\n#define IWL_DEBUG_QUIET_RFKILL(m, fmt, args...)\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (!iwl_is_rfkill((m)))\t\t\t\t\t\\\n\t\tIWL_ERR(m, fmt, ##args);\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\t__iwl_err((m)->dev,\t\t\t\t\t\\\n\t\t\t  iwl_have_debug_level(IWL_DL_RADIO) ?\t\t\\\n\t\t\t\tIWL_ERR_MODE_RFKILL :\t\t\t\\\n\t\t\t\tIWL_ERR_MODE_TRACE_ONLY,\t\t\\\n\t\t\t  fmt, ##args);\t\t\t\t\t\\\n} while (0)\n#else\n#define IWL_DEBUG_QUIET_RFKILL(m, fmt, args...)\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (!iwl_is_rfkill((m)))\t\t\t\t\t\\\n\t\tIWL_ERR(m, fmt, ##args);\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\t__iwl_err((m)->dev, IWL_ERR_MODE_TRACE_ONLY,\t\t\\\n\t\t\t  fmt, ##args);\t\t\t\t\t\\\n} while (0)\n#endif\t\t\t\t \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}