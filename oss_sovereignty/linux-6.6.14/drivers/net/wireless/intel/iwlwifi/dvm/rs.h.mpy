{
  "module_name": "rs.h",
  "hash_id": "a5e85f960c149233a3e47fdc49c856a6f4fc363f62bdd200535188b2d5fe29e7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/dvm/rs.h",
  "human_readable_source": " \n \n\n#ifndef __iwl_agn_rs_h__\n#define __iwl_agn_rs_h__\n\n#include <net/mac80211.h>\n\n#include \"iwl-config.h\"\n\n#include \"commands.h\"\n\nstruct iwl_rate_info {\n\tu8 plcp;\t \n\tu8 plcp_siso;\t \n\tu8 plcp_mimo2;\t \n\tu8 plcp_mimo3;   \n\tu8 ieee;\t \n\tu8 prev_ieee;     \n\tu8 next_ieee;     \n\tu8 prev_rs;       \n\tu8 next_rs;       \n\tu8 prev_rs_tgg;   \n\tu8 next_rs_tgg;   \n};\n\n \nenum {\n\tIWL_RATE_1M_INDEX = 0,\n\tIWL_RATE_2M_INDEX,\n\tIWL_RATE_5M_INDEX,\n\tIWL_RATE_11M_INDEX,\n\tIWL_RATE_6M_INDEX,\n\tIWL_RATE_9M_INDEX,\n\tIWL_RATE_12M_INDEX,\n\tIWL_RATE_18M_INDEX,\n\tIWL_RATE_24M_INDEX,\n\tIWL_RATE_36M_INDEX,\n\tIWL_RATE_48M_INDEX,\n\tIWL_RATE_54M_INDEX,\n\tIWL_RATE_60M_INDEX,\n\tIWL_RATE_COUNT,  \n\tIWL_RATE_COUNT_LEGACY = IWL_RATE_COUNT - 1,\t \n\tIWL_RATE_INVM_INDEX = IWL_RATE_COUNT,\n\tIWL_RATE_INVALID = IWL_RATE_COUNT,\n};\n\nenum {\n\tIWL_RATE_6M_INDEX_TABLE = 0,\n\tIWL_RATE_9M_INDEX_TABLE,\n\tIWL_RATE_12M_INDEX_TABLE,\n\tIWL_RATE_18M_INDEX_TABLE,\n\tIWL_RATE_24M_INDEX_TABLE,\n\tIWL_RATE_36M_INDEX_TABLE,\n\tIWL_RATE_48M_INDEX_TABLE,\n\tIWL_RATE_54M_INDEX_TABLE,\n\tIWL_RATE_1M_INDEX_TABLE,\n\tIWL_RATE_2M_INDEX_TABLE,\n\tIWL_RATE_5M_INDEX_TABLE,\n\tIWL_RATE_11M_INDEX_TABLE,\n\tIWL_RATE_INVM_INDEX_TABLE = IWL_RATE_INVM_INDEX - 1,\n};\n\nenum {\n\tIWL_FIRST_OFDM_RATE = IWL_RATE_6M_INDEX,\n\tIWL_LAST_OFDM_RATE = IWL_RATE_60M_INDEX,\n\tIWL_FIRST_CCK_RATE = IWL_RATE_1M_INDEX,\n\tIWL_LAST_CCK_RATE = IWL_RATE_11M_INDEX,\n};\n\n \n#define\tIWL_RATE_6M_MASK   (1 << IWL_RATE_6M_INDEX)\n#define\tIWL_RATE_9M_MASK   (1 << IWL_RATE_9M_INDEX)\n#define\tIWL_RATE_12M_MASK  (1 << IWL_RATE_12M_INDEX)\n#define\tIWL_RATE_18M_MASK  (1 << IWL_RATE_18M_INDEX)\n#define\tIWL_RATE_24M_MASK  (1 << IWL_RATE_24M_INDEX)\n#define\tIWL_RATE_36M_MASK  (1 << IWL_RATE_36M_INDEX)\n#define\tIWL_RATE_48M_MASK  (1 << IWL_RATE_48M_INDEX)\n#define\tIWL_RATE_54M_MASK  (1 << IWL_RATE_54M_INDEX)\n#define IWL_RATE_60M_MASK  (1 << IWL_RATE_60M_INDEX)\n#define\tIWL_RATE_1M_MASK   (1 << IWL_RATE_1M_INDEX)\n#define\tIWL_RATE_2M_MASK   (1 << IWL_RATE_2M_INDEX)\n#define\tIWL_RATE_5M_MASK   (1 << IWL_RATE_5M_INDEX)\n#define\tIWL_RATE_11M_MASK  (1 << IWL_RATE_11M_INDEX)\n\n \nenum {\n\tIWL_RATE_6M_PLCP  = 13,\n\tIWL_RATE_9M_PLCP  = 15,\n\tIWL_RATE_12M_PLCP = 5,\n\tIWL_RATE_18M_PLCP = 7,\n\tIWL_RATE_24M_PLCP = 9,\n\tIWL_RATE_36M_PLCP = 11,\n\tIWL_RATE_48M_PLCP = 1,\n\tIWL_RATE_54M_PLCP = 3,\n\tIWL_RATE_60M_PLCP = 3, \n\tIWL_RATE_1M_PLCP  = 10,\n\tIWL_RATE_2M_PLCP  = 20,\n\tIWL_RATE_5M_PLCP  = 55,\n\tIWL_RATE_11M_PLCP = 110,\n\t \n\t \n};\n\n \nenum {\n\tIWL_RATE_SISO_6M_PLCP = 0,\n\tIWL_RATE_SISO_12M_PLCP = 1,\n\tIWL_RATE_SISO_18M_PLCP = 2,\n\tIWL_RATE_SISO_24M_PLCP = 3,\n\tIWL_RATE_SISO_36M_PLCP = 4,\n\tIWL_RATE_SISO_48M_PLCP = 5,\n\tIWL_RATE_SISO_54M_PLCP = 6,\n\tIWL_RATE_SISO_60M_PLCP = 7,\n\tIWL_RATE_MIMO2_6M_PLCP  = 0x8,\n\tIWL_RATE_MIMO2_12M_PLCP = 0x9,\n\tIWL_RATE_MIMO2_18M_PLCP = 0xa,\n\tIWL_RATE_MIMO2_24M_PLCP = 0xb,\n\tIWL_RATE_MIMO2_36M_PLCP = 0xc,\n\tIWL_RATE_MIMO2_48M_PLCP = 0xd,\n\tIWL_RATE_MIMO2_54M_PLCP = 0xe,\n\tIWL_RATE_MIMO2_60M_PLCP = 0xf,\n\tIWL_RATE_MIMO3_6M_PLCP  = 0x10,\n\tIWL_RATE_MIMO3_12M_PLCP = 0x11,\n\tIWL_RATE_MIMO3_18M_PLCP = 0x12,\n\tIWL_RATE_MIMO3_24M_PLCP = 0x13,\n\tIWL_RATE_MIMO3_36M_PLCP = 0x14,\n\tIWL_RATE_MIMO3_48M_PLCP = 0x15,\n\tIWL_RATE_MIMO3_54M_PLCP = 0x16,\n\tIWL_RATE_MIMO3_60M_PLCP = 0x17,\n\tIWL_RATE_SISO_INVM_PLCP,\n\tIWL_RATE_MIMO2_INVM_PLCP = IWL_RATE_SISO_INVM_PLCP,\n\tIWL_RATE_MIMO3_INVM_PLCP = IWL_RATE_SISO_INVM_PLCP,\n};\n\n \nenum {\n\tIWL_RATE_6M_IEEE  = 12,\n\tIWL_RATE_9M_IEEE  = 18,\n\tIWL_RATE_12M_IEEE = 24,\n\tIWL_RATE_18M_IEEE = 36,\n\tIWL_RATE_24M_IEEE = 48,\n\tIWL_RATE_36M_IEEE = 72,\n\tIWL_RATE_48M_IEEE = 96,\n\tIWL_RATE_54M_IEEE = 108,\n\tIWL_RATE_60M_IEEE = 120,\n\tIWL_RATE_1M_IEEE  = 2,\n\tIWL_RATE_2M_IEEE  = 4,\n\tIWL_RATE_5M_IEEE  = 11,\n\tIWL_RATE_11M_IEEE = 22,\n};\n\n#define IWL_RATES_MASK ((1 << IWL_RATE_COUNT) - 1)\n\n#define IWL_INVALID_VALUE    -1\n\n#define IWL_MIN_RSSI_VAL                 -100\n#define IWL_MAX_RSSI_VAL                    0\n\n \n#define IWL_LEGACY_FAILURE_LIMIT\t160\n#define IWL_LEGACY_SUCCESS_LIMIT\t480\n#define IWL_LEGACY_TABLE_COUNT\t\t160\n\n#define IWL_NONE_LEGACY_FAILURE_LIMIT\t400\n#define IWL_NONE_LEGACY_SUCCESS_LIMIT\t4500\n#define IWL_NONE_LEGACY_TABLE_COUNT\t1500\n\n \n#define IWL_RS_GOOD_RATIO\t\t12800\t \n#define IWL_RATE_SCALE_SWITCH\t\t10880\t \n#define IWL_RATE_HIGH_TH\t\t10880\t \n#define IWL_RATE_INCREASE_TH\t\t6400\t \n#define IWL_RATE_DECREASE_TH\t\t1920\t \n\n \n#define IWL_LEGACY_SWITCH_ANTENNA1      0\n#define IWL_LEGACY_SWITCH_ANTENNA2      1\n#define IWL_LEGACY_SWITCH_SISO          2\n#define IWL_LEGACY_SWITCH_MIMO2_AB      3\n#define IWL_LEGACY_SWITCH_MIMO2_AC      4\n#define IWL_LEGACY_SWITCH_MIMO2_BC      5\n#define IWL_LEGACY_SWITCH_MIMO3_ABC     6\n\n \n#define IWL_SISO_SWITCH_ANTENNA1        0\n#define IWL_SISO_SWITCH_ANTENNA2        1\n#define IWL_SISO_SWITCH_MIMO2_AB        2\n#define IWL_SISO_SWITCH_MIMO2_AC        3\n#define IWL_SISO_SWITCH_MIMO2_BC        4\n#define IWL_SISO_SWITCH_GI              5\n#define IWL_SISO_SWITCH_MIMO3_ABC       6\n\n\n \n#define IWL_MIMO2_SWITCH_ANTENNA1       0\n#define IWL_MIMO2_SWITCH_ANTENNA2       1\n#define IWL_MIMO2_SWITCH_SISO_A         2\n#define IWL_MIMO2_SWITCH_SISO_B         3\n#define IWL_MIMO2_SWITCH_SISO_C         4\n#define IWL_MIMO2_SWITCH_GI             5\n#define IWL_MIMO2_SWITCH_MIMO3_ABC      6\n\n\n \n#define IWL_MIMO3_SWITCH_ANTENNA1       0\n#define IWL_MIMO3_SWITCH_ANTENNA2       1\n#define IWL_MIMO3_SWITCH_SISO_A         2\n#define IWL_MIMO3_SWITCH_SISO_B         3\n#define IWL_MIMO3_SWITCH_SISO_C         4\n#define IWL_MIMO3_SWITCH_MIMO2_AB       5\n#define IWL_MIMO3_SWITCH_MIMO2_AC       6\n#define IWL_MIMO3_SWITCH_MIMO2_BC       7\n#define IWL_MIMO3_SWITCH_GI             8\n\n\n#define IWL_MAX_11N_MIMO3_SEARCH IWL_MIMO3_SWITCH_GI\n#define IWL_MAX_SEARCH IWL_MIMO2_SWITCH_MIMO3_ABC\n\n \n\n#define IWL_ACTION_LIMIT\t\t3\t \n\n#define LQ_SIZE\t\t2\t \n\n \n#define IWL_AGG_TPT_THREHOLD\t0\n#define IWL_AGG_LOAD_THRESHOLD\t10\n#define IWL_AGG_ALL_TID\t\t0xff\n#define TID_QUEUE_CELL_SPACING\t50\t \n#define TID_QUEUE_MAX_SIZE\t20\n#define TID_ROUND_VALUE\t\t5\t \n\n#define TID_MAX_TIME_DIFF ((TID_QUEUE_MAX_SIZE - 1) * TID_QUEUE_CELL_SPACING)\n#define TIME_WRAP_AROUND(x, y) (((y) > (x)) ? (y) - (x) : (0-(x)) + (y))\n\nextern const struct iwl_rate_info iwl_rates[IWL_RATE_COUNT];\n\nenum iwl_table_type {\n\tLQ_NONE,\n\tLQ_G,\t\t \n\tLQ_A,\n\tLQ_SISO,\t \n\tLQ_MIMO2,\n\tLQ_MIMO3,\n\tLQ_MAX,\n};\n\n#define is_legacy(tbl) (((tbl) == LQ_G) || ((tbl) == LQ_A))\n#define is_siso(tbl) ((tbl) == LQ_SISO)\n#define is_mimo2(tbl) ((tbl) == LQ_MIMO2)\n#define is_mimo3(tbl) ((tbl) == LQ_MIMO3)\n#define is_mimo(tbl) (is_mimo2(tbl) || is_mimo3(tbl))\n#define is_Ht(tbl) (is_siso(tbl) || is_mimo(tbl))\n#define is_a_band(tbl) ((tbl) == LQ_A)\n#define is_g_and(tbl) ((tbl) == LQ_G)\n\n#define IWL_MAX_MCS_DISPLAY_SIZE\t12\n\nstruct iwl_rate_mcs_info {\n\tchar\tmbps[IWL_MAX_MCS_DISPLAY_SIZE];\n\tchar\tmcs[IWL_MAX_MCS_DISPLAY_SIZE];\n};\n\n \nstruct iwl_rate_scale_data {\n\tu64 data;\t\t \n\ts32 success_counter;\t \n\ts32 success_ratio;\t \n\ts32 counter;\t\t \n\ts32 average_tpt;\t \n\tunsigned long stamp;\n};\n\n \nstruct iwl_scale_tbl_info {\n\tenum iwl_table_type lq_type;\n\tu8 ant_type;\n\tu8 is_SGI;\t \n\tu8 is_ht40;\t \n\tu8 is_dup;\t \n\tu8 action;\t \n\tu8 max_search;\t \n\tconst u16 *expected_tpt;\t \n\tu32 current_rate;   \n\tstruct iwl_rate_scale_data win[IWL_RATE_COUNT];  \n};\n\nstruct iwl_traffic_load {\n\tunsigned long time_stamp;\t \n\tu32 packet_count[TID_QUEUE_MAX_SIZE];    \n\tu32 total;\t\t\t \n\tu8 queue_count;\t\t\t \n\tu8 head;\t\t\t \n};\n\n \nstruct iwl_lq_sta {\n\tu8 active_tbl;\t\t \n\tu8 enable_counter;\t \n\tu8 stay_in_tbl;\t\t \n\tu8 search_better_tbl;\t \n\ts32 last_tpt;\n\n\t \n\tu32 table_count_limit;\n\tu32 max_failure_limit;\t \n\tu32 max_success_limit;\t \n\tu32 table_count;\n\tu32 total_failed;\t \n\tu32 total_success;\t \n\tu64 flush_timer;\t \n\n\tu8 action_counter;\t \n\tu8 is_green;\n\tu8 is_dup;\n\tenum nl80211_band band;\n\n\t \n\tu32 supp_rates;\n\tu16 active_legacy_rate;\n\tu16 active_siso_rate;\n\tu16 active_mimo2_rate;\n\tu16 active_mimo3_rate;\n\ts8 max_rate_idx;      \n\tu8 missed_rate_counter;\n\n\tstruct iwl_link_quality_cmd lq;\n\tstruct iwl_scale_tbl_info lq_info[LQ_SIZE];  \n\tstruct iwl_traffic_load load[IWL_MAX_TID_COUNT];\n\tu8 tx_agg_tid_en;\n#ifdef CONFIG_MAC80211_DEBUGFS\n\tu32 dbg_fixed_rate;\n#endif\n\tstruct iwl_priv *drv;\n\n\t \n\tint last_txrate_idx;\n\t \n\tu32 last_rate_n_flags;\n\t \n\tu8 is_agg;\n\t \n\tu8 last_bt_traffic;\n};\n\nstatic inline u8 first_antenna(u8 mask)\n{\n\tif (mask & ANT_A)\n\t\treturn ANT_A;\n\tif (mask & ANT_B)\n\t\treturn ANT_B;\n\treturn ANT_C;\n}\n\n\n \nvoid iwl_rs_rate_init(struct iwl_priv *priv, struct ieee80211_sta *sta,\n\t\t      u8 sta_id);\n\n \nint iwlagn_rate_control_register(void);\n\n \nvoid iwlagn_rate_control_unregister(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}