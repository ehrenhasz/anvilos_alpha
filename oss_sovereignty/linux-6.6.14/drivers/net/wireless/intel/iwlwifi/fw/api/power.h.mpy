{
  "module_name": "power.h",
  "hash_id": "4dff4ea576b59e0206b8e5fbab26890bfc49d6a42e4f03e479f5e4dc13e754aa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/fw/api/power.h",
  "human_readable_source": " \n \n#ifndef __iwl_fw_api_power_h__\n#define __iwl_fw_api_power_h__\n\n \n\n \nenum iwl_ltr_config_flags {\n\tLTR_CFG_FLAG_FEATURE_ENABLE = BIT(0),\n\tLTR_CFG_FLAG_HW_DIS_ON_SHADOW_REG_ACCESS = BIT(1),\n\tLTR_CFG_FLAG_HW_EN_SHRT_WR_THROUGH = BIT(2),\n\tLTR_CFG_FLAG_HW_DIS_ON_D0_2_D3 = BIT(3),\n\tLTR_CFG_FLAG_SW_SET_SHORT = BIT(4),\n\tLTR_CFG_FLAG_SW_SET_LONG = BIT(5),\n\tLTR_CFG_FLAG_DENIE_C10_ON_PD = BIT(6),\n\tLTR_CFG_FLAG_UPDATE_VALUES = BIT(7),\n};\n\n \nstruct iwl_ltr_config_cmd_v1 {\n\t__le32 flags;\n\t__le32 static_long;\n\t__le32 static_short;\n} __packed;  \n\n#define LTR_VALID_STATES_NUM 4\n\n \nstruct iwl_ltr_config_cmd {\n\t__le32 flags;\n\t__le32 static_long;\n\t__le32 static_short;\n\t__le32 ltr_cfg_values[LTR_VALID_STATES_NUM];\n\t__le32 ltr_short_idle_timeout;\n} __packed;  \n\n \n#define POWER_LPRX_RSSI_THRESHOLD\t75\n#define POWER_LPRX_RSSI_THRESHOLD_MAX\t94\n#define POWER_LPRX_RSSI_THRESHOLD_MIN\t30\n\n \nenum iwl_power_flags {\n\tPOWER_FLAGS_POWER_SAVE_ENA_MSK\t\t= BIT(0),\n\tPOWER_FLAGS_POWER_MANAGEMENT_ENA_MSK\t= BIT(1),\n\tPOWER_FLAGS_SKIP_OVER_DTIM_MSK\t\t= BIT(2),\n\tPOWER_FLAGS_SNOOZE_ENA_MSK\t\t= BIT(5),\n\tPOWER_FLAGS_BT_SCO_ENA\t\t\t= BIT(8),\n\tPOWER_FLAGS_ADVANCE_PM_ENA_MSK\t\t= BIT(9),\n\tPOWER_FLAGS_LPRX_ENA_MSK\t\t= BIT(11),\n\tPOWER_FLAGS_UAPSD_MISBEHAVING_ENA_MSK\t= BIT(12),\n};\n\n#define IWL_POWER_VEC_SIZE 5\n\n \nstruct iwl_powertable_cmd {\n\t \n\t__le16 flags;\n\tu8 keep_alive_seconds;\n\tu8 debug_flags;\n\t__le32 rx_data_timeout;\n\t__le32 tx_data_timeout;\n\t__le32 sleep_interval[IWL_POWER_VEC_SIZE];\n\t__le32 skip_dtim_periods;\n\t__le32 lprx_rssi_threshold;\n} __packed;\n\n \nenum iwl_device_power_flags {\n\tDEVICE_POWER_FLAGS_POWER_SAVE_ENA_MSK\t\t= BIT(0),\n\tDEVICE_POWER_FLAGS_ALLOW_MEM_RETENTION_MSK\t= BIT(1),\n\tDEVICE_POWER_FLAGS_32K_CLK_VALID_MSK\t\t= BIT(12),\n};\n\n \nstruct iwl_device_power_cmd {\n\t \n\t__le16 flags;\n\t__le16 reserved;\n} __packed;\n\n \nstruct iwl_mac_power_cmd {\n\t \n\t__le32 id_and_color;\n\n\t \n\t__le16 flags;\n\t__le16 keep_alive_seconds;\n\t__le32 rx_data_timeout;\n\t__le32 tx_data_timeout;\n\t__le32 rx_data_timeout_uapsd;\n\t__le32 tx_data_timeout_uapsd;\n\tu8 lprx_rssi_threshold;\n\tu8 skip_dtim_periods;\n\t__le16 snooze_interval;\n\t__le16 snooze_window;\n\tu8 snooze_step;\n\tu8 qndp_tid;\n\tu8 uapsd_ac_flags;\n\tu8 uapsd_max_sp;\n\tu8 heavy_tx_thld_packets;\n\tu8 heavy_rx_thld_packets;\n\tu8 heavy_tx_thld_percentage;\n\tu8 heavy_rx_thld_percentage;\n\tu8 limited_ps_threshold;\n\tu8 reserved;\n} __packed;\n\n \nstruct iwl_uapsd_misbehaving_ap_notif {\n\t__le32 sta_id;\n\tu8 mac_id;\n\tu8 reserved[3];\n} __packed;\n\n \nstruct iwl_reduce_tx_power_cmd {\n\tu8 flags;\n\tu8 mac_context_id;\n\t__le16 pwr_restriction;\n} __packed;  \n\nenum iwl_dev_tx_power_cmd_mode {\n\tIWL_TX_POWER_MODE_SET_MAC = 0,\n\tIWL_TX_POWER_MODE_SET_DEVICE = 1,\n\tIWL_TX_POWER_MODE_SET_CHAINS = 2,\n\tIWL_TX_POWER_MODE_SET_ACK = 3,\n\tIWL_TX_POWER_MODE_SET_SAR_TIMER = 4,\n\tIWL_TX_POWER_MODE_SET_SAR_TIMER_DEFAULT_TABLE = 5,\n};  ;\n\n#define IWL_NUM_CHAIN_TABLES\t1\n#define IWL_NUM_CHAIN_TABLES_V2\t2\n#define IWL_NUM_CHAIN_LIMITS\t2\n#define IWL_NUM_SUB_BANDS_V1\t5\n#define IWL_NUM_SUB_BANDS_V2\t11\n\n \nstruct iwl_dev_tx_power_common {\n\t__le32 set_mode;\n\t__le32 mac_context_id;\n\t__le16 pwr_restriction;\n\t__le16 dev_24;\n\t__le16 dev_52_low;\n\t__le16 dev_52_high;\n};\n\n \nstruct iwl_dev_tx_power_cmd_v3 {\n\t__le16 per_chain[IWL_NUM_CHAIN_TABLES][IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V1];\n} __packed;  \n\n#define IWL_DEV_MAX_TX_POWER 0x7FFF\n\n \nstruct iwl_dev_tx_power_cmd_v4 {\n\t__le16 per_chain[IWL_NUM_CHAIN_TABLES][IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V1];\n\tu8 enable_ack_reduction;\n\tu8 reserved[3];\n} __packed;  \n\n \nstruct iwl_dev_tx_power_cmd_v5 {\n\t__le16 per_chain[IWL_NUM_CHAIN_TABLES][IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V1];\n\tu8 enable_ack_reduction;\n\tu8 per_chain_restriction_changed;\n\tu8 reserved[2];\n\t__le32 timer_period;\n} __packed;  \n\n \nstruct iwl_dev_tx_power_cmd_v6 {\n\t__le16 per_chain[IWL_NUM_CHAIN_TABLES_V2][IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V2];\n\tu8 enable_ack_reduction;\n\tu8 per_chain_restriction_changed;\n\tu8 reserved[2];\n\t__le32 timer_period;\n} __packed;  \n\n \nstruct iwl_dev_tx_power_cmd_v7 {\n\t__le16 per_chain[IWL_NUM_CHAIN_TABLES_V2][IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V2];\n\tu8 enable_ack_reduction;\n\tu8 per_chain_restriction_changed;\n\tu8 reserved[2];\n\t__le32 timer_period;\n\t__le32 flags;\n} __packed;  \n \nstruct iwl_dev_tx_power_cmd {\n\tstruct iwl_dev_tx_power_common common;\n\tunion {\n\t\tstruct iwl_dev_tx_power_cmd_v3 v3;\n\t\tstruct iwl_dev_tx_power_cmd_v4 v4;\n\t\tstruct iwl_dev_tx_power_cmd_v5 v5;\n\t\tstruct iwl_dev_tx_power_cmd_v6 v6;\n\t\tstruct iwl_dev_tx_power_cmd_v7 v7;\n\t};\n};\n\n#define IWL_NUM_GEO_PROFILES\t\t3\n#define IWL_NUM_GEO_PROFILES_V3\t\t8\n#define IWL_NUM_BANDS_PER_CHAIN_V1\t2\n#define IWL_NUM_BANDS_PER_CHAIN_V2\t3\n\n \nenum iwl_geo_per_chain_offset_operation {\n\tIWL_PER_CHAIN_OFFSET_SET_TABLES,\n\tIWL_PER_CHAIN_OFFSET_GET_CURRENT_TABLE,\n};   \n\n \nstruct iwl_per_chain_offset {\n\t__le16 max_tx_power;\n\tu8 chain_a;\n\tu8 chain_b;\n} __packed;  \n\n \nstruct iwl_geo_tx_power_profiles_cmd_v1 {\n\t__le32 ops;\n\tstruct iwl_per_chain_offset table[IWL_NUM_GEO_PROFILES][IWL_NUM_BANDS_PER_CHAIN_V1];\n} __packed;  \n\n \nstruct iwl_geo_tx_power_profiles_cmd_v2 {\n\t__le32 ops;\n\tstruct iwl_per_chain_offset table[IWL_NUM_GEO_PROFILES][IWL_NUM_BANDS_PER_CHAIN_V1];\n\t__le32 table_revision;\n} __packed;  \n\n \nstruct iwl_geo_tx_power_profiles_cmd_v3 {\n\t__le32 ops;\n\tstruct iwl_per_chain_offset table[IWL_NUM_GEO_PROFILES][IWL_NUM_BANDS_PER_CHAIN_V2];\n\t__le32 table_revision;\n} __packed;  \n\n \nstruct iwl_geo_tx_power_profiles_cmd_v4 {\n\t__le32 ops;\n\tstruct iwl_per_chain_offset table[IWL_NUM_GEO_PROFILES_V3][IWL_NUM_BANDS_PER_CHAIN_V1];\n\t__le32 table_revision;\n} __packed;  \n\n \nstruct iwl_geo_tx_power_profiles_cmd_v5 {\n\t__le32 ops;\n\tstruct iwl_per_chain_offset table[IWL_NUM_GEO_PROFILES_V3][IWL_NUM_BANDS_PER_CHAIN_V2];\n\t__le32 table_revision;\n} __packed;  \n\nunion iwl_geo_tx_power_profiles_cmd {\n\tstruct iwl_geo_tx_power_profiles_cmd_v1 v1;\n\tstruct iwl_geo_tx_power_profiles_cmd_v2 v2;\n\tstruct iwl_geo_tx_power_profiles_cmd_v3 v3;\n\tstruct iwl_geo_tx_power_profiles_cmd_v4 v4;\n\tstruct iwl_geo_tx_power_profiles_cmd_v5 v5;\n};\n\n \nstruct iwl_geo_tx_power_profiles_resp {\n\t__le32 profile_idx;\n} __packed;  \n\n \nunion iwl_ppag_table_cmd {\n\tstruct {\n\t\t__le32 flags;\n\t\ts8 gain[IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V1];\n\t\ts8 reserved[2];\n\t} v1;\n\tstruct {\n\t\t__le32 flags;\n\t\ts8 gain[IWL_NUM_CHAIN_LIMITS][IWL_NUM_SUB_BANDS_V2];\n\t\ts8 reserved[2];\n\t} v2;\n} __packed;\n\n#define MCC_TO_SAR_OFFSET_TABLE_ROW_SIZE\t26\n#define MCC_TO_SAR_OFFSET_TABLE_COL_SIZE\t13\n\n \nstruct iwl_sar_offset_mapping_cmd {\n\tu8 offset_map[MCC_TO_SAR_OFFSET_TABLE_ROW_SIZE]\n\t\t[MCC_TO_SAR_OFFSET_TABLE_COL_SIZE];\n\t__le16 reserved;\n} __packed;  \n\n \nstruct iwl_beacon_filter_cmd {\n\t__le32 bf_energy_delta;\n\t__le32 bf_roaming_energy_delta;\n\t__le32 bf_roaming_state;\n\t__le32 bf_temp_threshold;\n\t__le32 bf_temp_fast_filter;\n\t__le32 bf_temp_slow_filter;\n\t__le32 bf_enable_beacon_filter;\n\t__le32 bf_debug_flag;\n\t__le32 bf_escape_timer;\n\t__le32 ba_escape_timer;\n\t__le32 ba_enable_beacon_abort;\n\t__le32 bf_threshold_absolute_low[2];\n\t__le32 bf_threshold_absolute_high[2];\n} __packed;  \n\n \n#define IWL_BF_ENERGY_DELTA_DEFAULT 5\n#define IWL_BF_ENERGY_DELTA_D0I3 20\n#define IWL_BF_ENERGY_DELTA_MAX 255\n#define IWL_BF_ENERGY_DELTA_MIN 0\n\n#define IWL_BF_ROAMING_ENERGY_DELTA_DEFAULT 1\n#define IWL_BF_ROAMING_ENERGY_DELTA_D0I3 20\n#define IWL_BF_ROAMING_ENERGY_DELTA_MAX 255\n#define IWL_BF_ROAMING_ENERGY_DELTA_MIN 0\n\n#define IWL_BF_ROAMING_STATE_DEFAULT 72\n#define IWL_BF_ROAMING_STATE_D0I3 72\n#define IWL_BF_ROAMING_STATE_MAX 255\n#define IWL_BF_ROAMING_STATE_MIN 0\n\n#define IWL_BF_TEMP_THRESHOLD_DEFAULT 112\n#define IWL_BF_TEMP_THRESHOLD_D0I3 112\n#define IWL_BF_TEMP_THRESHOLD_MAX 255\n#define IWL_BF_TEMP_THRESHOLD_MIN 0\n\n#define IWL_BF_TEMP_FAST_FILTER_DEFAULT 1\n#define IWL_BF_TEMP_FAST_FILTER_D0I3 1\n#define IWL_BF_TEMP_FAST_FILTER_MAX 255\n#define IWL_BF_TEMP_FAST_FILTER_MIN 0\n\n#define IWL_BF_TEMP_SLOW_FILTER_DEFAULT 5\n#define IWL_BF_TEMP_SLOW_FILTER_D0I3 20\n#define IWL_BF_TEMP_SLOW_FILTER_MAX 255\n#define IWL_BF_TEMP_SLOW_FILTER_MIN 0\n\n#define IWL_BF_ENABLE_BEACON_FILTER_DEFAULT 1\n\n#define IWL_BF_DEBUG_FLAG_DEFAULT 0\n#define IWL_BF_DEBUG_FLAG_D0I3 0\n\n#define IWL_BF_ESCAPE_TIMER_DEFAULT 0\n#define IWL_BF_ESCAPE_TIMER_D0I3 0\n#define IWL_BF_ESCAPE_TIMER_MAX 1024\n#define IWL_BF_ESCAPE_TIMER_MIN 0\n\n#define IWL_BA_ESCAPE_TIMER_DEFAULT 6\n#define IWL_BA_ESCAPE_TIMER_D0I3 6\n#define IWL_BA_ESCAPE_TIMER_D3 9\n#define IWL_BA_ESCAPE_TIMER_MAX 1024\n#define IWL_BA_ESCAPE_TIMER_MIN 0\n\n#define IWL_BA_ENABLE_BEACON_ABORT_DEFAULT 1\n\n#define IWL_BF_CMD_CONFIG(mode)\t\t\t\t\t     \\\n\t.bf_energy_delta = cpu_to_le32(IWL_BF_ENERGY_DELTA ## mode),\t      \\\n\t.bf_roaming_energy_delta =\t\t\t\t\t      \\\n\t\tcpu_to_le32(IWL_BF_ROAMING_ENERGY_DELTA ## mode),\t      \\\n\t.bf_roaming_state = cpu_to_le32(IWL_BF_ROAMING_STATE ## mode),\t      \\\n\t.bf_temp_threshold = cpu_to_le32(IWL_BF_TEMP_THRESHOLD ## mode),      \\\n\t.bf_temp_fast_filter = cpu_to_le32(IWL_BF_TEMP_FAST_FILTER ## mode),  \\\n\t.bf_temp_slow_filter = cpu_to_le32(IWL_BF_TEMP_SLOW_FILTER ## mode),  \\\n\t.bf_debug_flag = cpu_to_le32(IWL_BF_DEBUG_FLAG ## mode),\t      \\\n\t.bf_escape_timer = cpu_to_le32(IWL_BF_ESCAPE_TIMER ## mode),\t      \\\n\t.ba_escape_timer = cpu_to_le32(IWL_BA_ESCAPE_TIMER ## mode)\n\n#define IWL_BF_CMD_CONFIG_DEFAULTS IWL_BF_CMD_CONFIG(_DEFAULT)\n#define IWL_BF_CMD_CONFIG_D0I3 IWL_BF_CMD_CONFIG(_D0I3)\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}