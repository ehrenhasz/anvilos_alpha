{
  "module_name": "img.h",
  "hash_id": "e325d2055a5c19feddbdecee06fef2f10551c64746ed2620c63802964dce37e3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/fw/img.h",
  "human_readable_source": " \n \n#ifndef __iwl_fw_img_h__\n#define __iwl_fw_img_h__\n#include <linux/types.h>\n\n#include \"api/dbg-tlv.h\"\n\n#include \"file.h\"\n#include \"error-dump.h\"\n\n \nenum iwl_ucode_type {\n\tIWL_UCODE_REGULAR,\n\tIWL_UCODE_INIT,\n\tIWL_UCODE_WOWLAN,\n\tIWL_UCODE_REGULAR_USNIFFER,\n\tIWL_UCODE_TYPE_MAX,\n};\n\n \nenum iwl_ucode_sec {\n\tIWL_UCODE_SECTION_DATA,\n\tIWL_UCODE_SECTION_INST,\n};\n\nstruct iwl_ucode_capabilities {\n\tu32 max_probe_length;\n\tu32 n_scan_channels;\n\tu32 standard_phy_calibration_size;\n\tu32 flags;\n\tu32 error_log_addr;\n\tu32 error_log_size;\n\tu32 num_stations;\n\tu32 num_beacons;\n\tunsigned long _api[BITS_TO_LONGS(NUM_IWL_UCODE_TLV_API)];\n\tunsigned long _capa[BITS_TO_LONGS(NUM_IWL_UCODE_TLV_CAPA)];\n\n\tconst struct iwl_fw_cmd_version *cmd_versions;\n\tu32 n_cmd_versions;\n};\n\nstatic inline bool\nfw_has_api(const struct iwl_ucode_capabilities *capabilities,\n\t   iwl_ucode_tlv_api_t api)\n{\n\treturn test_bit((__force long)api, capabilities->_api);\n}\n\nstatic inline bool\nfw_has_capa(const struct iwl_ucode_capabilities *capabilities,\n\t    iwl_ucode_tlv_capa_t capa)\n{\n\treturn test_bit((__force long)capa, capabilities->_capa);\n}\n\n \nstruct fw_desc {\n\tconst void *data;\t \n\tu32 len;\t\t \n\tu32 offset;\t\t \n};\n\nstruct fw_img {\n\tstruct fw_desc *sec;\n\tint num_sec;\n\tbool is_dual_cpus;\n\tu32 paging_mem_size;\n};\n\n \n#define PAGE_2_EXP_SIZE 12  \n#define FW_PAGING_SIZE BIT(PAGE_2_EXP_SIZE)  \n#define PAGE_PER_GROUP_2_EXP_SIZE 3\n \n#define NUM_OF_PAGE_PER_GROUP BIT(PAGE_PER_GROUP_2_EXP_SIZE)\n \n#define PAGING_BLOCK_SIZE (NUM_OF_PAGE_PER_GROUP * FW_PAGING_SIZE)\n \n#define BLOCK_2_EXP_SIZE (PAGE_2_EXP_SIZE + PAGE_PER_GROUP_2_EXP_SIZE)\n\n \n#define BLOCK_PER_IMAGE_2_EXP_SIZE 5\n \n#define NUM_OF_BLOCK_PER_IMAGE BIT(BLOCK_PER_IMAGE_2_EXP_SIZE)\n \n#define MAX_PAGING_IMAGE_SIZE (NUM_OF_BLOCK_PER_IMAGE * PAGING_BLOCK_SIZE)\n\n \n#define PAGING_ADDR_SIG 0xAA000000\n\n#define PAGING_CMD_IS_SECURED BIT(9)\n#define PAGING_CMD_IS_ENABLED BIT(8)\n#define PAGING_CMD_NUM_OF_PAGES_IN_LAST_GRP_POS\t0\n#define PAGING_TLV_SECURE_MASK 1\n\n \n#define FW_ADDR_CACHE_CONTROL 0xC0000000UL\n\n \nstruct iwl_fw_paging {\n\tdma_addr_t fw_paging_phys;\n\tstruct page *fw_paging_block;\n\tu32 fw_paging_size;\n\tu32 fw_offs;\n};\n\n \nenum iwl_fw_type {\n\tIWL_FW_DVM,\n\tIWL_FW_MVM,\n};\n\n \nstruct iwl_fw_dbg {\n\tstruct iwl_fw_dbg_dest_tlv_v1 *dest_tlv;\n\tu8 n_dest_reg;\n\tstruct iwl_fw_dbg_conf_tlv *conf_tlv[FW_DBG_CONF_MAX];\n\tstruct iwl_fw_dbg_trigger_tlv *trigger_tlv[FW_DBG_TRIGGER_MAX];\n\tsize_t trigger_tlv_len[FW_DBG_TRIGGER_MAX];\n\tstruct iwl_fw_dbg_mem_seg_tlv *mem_tlv;\n\tsize_t n_mem_tlv;\n\tu32 dump_mask;\n};\n\nstruct iwl_dump_exclude {\n\tu32 addr, size;\n};\n\n \nstruct iwl_fw {\n\tu32 ucode_ver;\n\n\tchar fw_version[64];\n\n\t \n\tstruct fw_img img[IWL_UCODE_TYPE_MAX];\n\tsize_t iml_len;\n\tu8 *iml;\n\n\tstruct iwl_ucode_capabilities ucode_capa;\n\tbool enhance_sensitivity_table;\n\n\tu32 init_evtlog_ptr, init_evtlog_size, init_errlog_ptr;\n\tu32 inst_evtlog_ptr, inst_evtlog_size, inst_errlog_ptr;\n\n\tstruct iwl_tlv_calib_ctrl default_calib[IWL_UCODE_TYPE_MAX];\n\tu32 phy_config;\n\tu8 valid_tx_ant;\n\tu8 valid_rx_ant;\n\n\tenum iwl_fw_type type;\n\n\tu8 human_readable[FW_VER_HUMAN_READABLE_SZ];\n\n\tstruct iwl_fw_dbg dbg;\n\n\tu8 *phy_integration_ver;\n\tu32 phy_integration_ver_len;\n\n\tstruct iwl_dump_exclude dump_excl[2], dump_excl_wowlan[2];\n};\n\nstatic inline const char *get_fw_dbg_mode_string(int mode)\n{\n\tswitch (mode) {\n\tcase SMEM_MODE:\n\t\treturn \"SMEM\";\n\tcase EXTERNAL_MODE:\n\t\treturn \"EXTERNAL_DRAM\";\n\tcase MARBH_MODE:\n\t\treturn \"MARBH\";\n\tcase MIPI_MODE:\n\t\treturn \"MIPI\";\n\tdefault:\n\t\treturn \"UNKNOWN\";\n\t}\n}\n\nstatic inline bool\niwl_fw_dbg_conf_usniffer(const struct iwl_fw *fw, u8 id)\n{\n\tconst struct iwl_fw_dbg_conf_tlv *conf_tlv = fw->dbg.conf_tlv[id];\n\n\tif (!conf_tlv)\n\t\treturn false;\n\n\treturn conf_tlv->usniffer;\n}\n\nstatic inline const struct fw_img *\niwl_get_ucode_image(const struct iwl_fw *fw, enum iwl_ucode_type ucode_type)\n{\n\tif (ucode_type >= IWL_UCODE_TYPE_MAX)\n\t\treturn NULL;\n\n\treturn &fw->img[ucode_type];\n}\n\nu8 iwl_fw_lookup_cmd_ver(const struct iwl_fw *fw, u32 cmd_id, u8 def);\n\nu8 iwl_fw_lookup_notif_ver(const struct iwl_fw *fw, u8 grp, u8 cmd, u8 def);\nconst char *iwl_fw_lookup_assert_desc(u32 num);\n\n#define FW_SYSASSERT_CPU_MASK\t\t0xf0000000\n#define FW_SYSASSERT_PNVM_MISSING\t0x0010070d\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}