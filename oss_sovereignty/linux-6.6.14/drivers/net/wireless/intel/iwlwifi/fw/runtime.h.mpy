{
  "module_name": "runtime.h",
  "hash_id": "c08d9cbf5ef1770c079e5490bc7247cb64f4b6ff7b255f4c7f977f1f5399fd9f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/fw/runtime.h",
  "human_readable_source": " \n \n#ifndef __iwl_fw_runtime_h__\n#define __iwl_fw_runtime_h__\n\n#include \"iwl-config.h\"\n#include \"iwl-trans.h\"\n#include \"img.h\"\n#include \"fw/api/debug.h\"\n#include \"fw/api/paging.h\"\n#include \"fw/api/power.h\"\n#include \"iwl-eeprom-parse.h\"\n#include \"fw/acpi.h\"\n\nstruct iwl_fw_runtime_ops {\n\tvoid (*dump_start)(void *ctx);\n\tvoid (*dump_end)(void *ctx);\n\tbool (*fw_running)(void *ctx);\n\tint (*send_hcmd)(void *ctx, struct iwl_host_cmd *host_cmd);\n\tbool (*d3_debug_enable)(void *ctx);\n};\n\n#define MAX_NUM_LMAC 2\n#define MAX_NUM_TCM 2\n#define MAX_NUM_RCM 2\nstruct iwl_fwrt_shared_mem_cfg {\n\tint num_lmacs;\n\tint num_txfifo_entries;\n\tstruct {\n\t\tu32 txfifo_size[TX_FIFO_MAX_NUM];\n\t\tu32 rxfifo1_size;\n\t} lmac[MAX_NUM_LMAC];\n\tu32 rxfifo2_size;\n\tu32 rxfifo2_control_size;\n\tu32 internal_txfifo_addr;\n\tu32 internal_txfifo_size[TX_FIFO_INTERNAL_MAX_NUM];\n};\n\n#define IWL_FW_RUNTIME_DUMP_WK_NUM 5\n\n \nstruct iwl_fwrt_dump_data {\n\tunion {\n\t\tstruct {\n\t\t\tstruct iwl_fw_ini_trigger_tlv *trig;\n\t\t\tstruct iwl_rx_packet *fw_pkt;\n\t\t};\n\t\tstruct {\n\t\t\tconst struct iwl_fw_dump_desc *desc;\n\t\t\tbool monitor_only;\n\t\t};\n\t};\n};\n\n \nstruct iwl_fwrt_wk_data  {\n\tu8 idx;\n\tstruct delayed_work wk;\n\tstruct iwl_fwrt_dump_data dump_data;\n};\n\n \nstruct iwl_txf_iter_data {\n\tint fifo;\n\tint lmac;\n\tu32 fifo_size;\n\tu8 internal_txf;\n};\n\n \nstruct iwl_fw_runtime {\n\tstruct iwl_trans *trans;\n\tconst struct iwl_fw *fw;\n\tstruct device *dev;\n\n\tconst struct iwl_fw_runtime_ops *ops;\n\tvoid *ops_ctx;\n\n\tconst struct iwl_dump_sanitize_ops *sanitize_ops;\n\tvoid *sanitize_ctx;\n\n\t \n\tstruct iwl_fw_paging fw_paging_db[NUM_OF_FW_PAGING_BLOCKS];\n\tu16 num_of_paging_blk;\n\tu16 num_of_pages_in_last_blk;\n\n\tenum iwl_ucode_type cur_fw_img;\n\n\t \n\tstruct iwl_fwrt_shared_mem_cfg smem_cfg;\n\n\t \n\tstruct {\n\t\tstruct iwl_fwrt_wk_data wks[IWL_FW_RUNTIME_DUMP_WK_NUM];\n\t\tunsigned long active_wks;\n\n\t\tu8 conf;\n\n\t\t \n\t\tunsigned long non_collect_ts_start[IWL_FW_INI_TIME_POINT_NUM];\n\t\tu32 *d3_debug_data;\n\t\tu32 lmac_err_id[MAX_NUM_LMAC];\n\t\tu32 tcm_err_id[MAX_NUM_TCM];\n\t\tu32 rcm_err_id[MAX_NUM_RCM];\n\t\tu32 umac_err_id;\n\n\t\tstruct iwl_txf_iter_data txf_iter_data;\n\n\t\tstruct {\n\t\t\tu8 type;\n\t\t\tu8 subtype;\n\t\t\tu32 lmac_major;\n\t\t\tu32 lmac_minor;\n\t\t\tu32 umac_major;\n\t\t\tu32 umac_minor;\n\t\t} fw_ver;\n\t} dump;\n\tstruct {\n#ifdef CONFIG_IWLWIFI_DEBUGFS\n\t\tstruct delayed_work wk;\n\t\tu32 delay;\n#endif\n\t\tu64 seq;\n\t} timestamp;\n#ifdef CONFIG_IWLWIFI_DEBUGFS\n\tbool tpc_enabled;\n#endif  \n#ifdef CONFIG_ACPI\n\tstruct iwl_sar_profile sar_profiles[ACPI_SAR_PROFILE_NUM];\n\tu8 sar_chain_a_profile;\n\tu8 sar_chain_b_profile;\n\tstruct iwl_geo_profile geo_profiles[ACPI_NUM_GEO_PROFILES_REV3];\n\tu32 geo_rev;\n\tu32 geo_num_profiles;\n\tbool geo_enabled;\n\tstruct iwl_ppag_chain ppag_chains[IWL_NUM_CHAIN_LIMITS];\n\tu32 ppag_flags;\n\tu32 ppag_ver;\n\tbool ppag_table_valid;\n\tstruct iwl_sar_offset_mapping_cmd sgom_table;\n\tbool sgom_enabled;\n\tu8 reduced_power_flags;\n#endif\n};\n\nvoid iwl_fw_runtime_init(struct iwl_fw_runtime *fwrt, struct iwl_trans *trans,\n\t\t\tconst struct iwl_fw *fw,\n\t\t\tconst struct iwl_fw_runtime_ops *ops, void *ops_ctx,\n\t\t\tconst struct iwl_dump_sanitize_ops *sanitize_ops,\n\t\t\tvoid *sanitize_ctx,\n\t\t\tstruct dentry *dbgfs_dir);\n\nstatic inline void iwl_fw_runtime_free(struct iwl_fw_runtime *fwrt)\n{\n\tint i;\n\n\tkfree(fwrt->dump.d3_debug_data);\n\tfwrt->dump.d3_debug_data = NULL;\n\n\tiwl_dbg_tlv_del_timers(fwrt->trans);\n\tfor (i = 0; i < IWL_FW_RUNTIME_DUMP_WK_NUM; i++)\n\t\tcancel_delayed_work_sync(&fwrt->dump.wks[i].wk);\n}\n\nvoid iwl_fw_runtime_suspend(struct iwl_fw_runtime *fwrt);\n\nvoid iwl_fw_runtime_resume(struct iwl_fw_runtime *fwrt);\n\nstatic inline void iwl_fw_set_current_image(struct iwl_fw_runtime *fwrt,\n\t\t\t\t\t    enum iwl_ucode_type cur_fw_img)\n{\n\tfwrt->cur_fw_img = cur_fw_img;\n}\n\nint iwl_init_paging(struct iwl_fw_runtime *fwrt, enum iwl_ucode_type type);\nvoid iwl_free_fw_paging(struct iwl_fw_runtime *fwrt);\n\nvoid iwl_get_shared_mem_conf(struct iwl_fw_runtime *fwrt);\nint iwl_set_soc_latency(struct iwl_fw_runtime *fwrt);\nint iwl_configure_rxq(struct iwl_fw_runtime *fwrt);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}