{
  "module_name": "iwl-devtrace-iwlwifi.h",
  "hash_id": "5c355552e61df90f96f034ea1bb9c612f7c8ee382bb8e1f8dda544af3444bda7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlwifi/iwl-devtrace-iwlwifi.h",
  "human_readable_source": " \n \n\n#if !defined(__IWLWIFI_DEVICE_TRACE_IWLWIFI) || defined(TRACE_HEADER_MULTI_READ)\n#define __IWLWIFI_DEVICE_TRACE_IWLWIFI\n\n#include <linux/tracepoint.h>\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM iwlwifi\n\nTRACE_EVENT(iwlwifi_dev_hcmd,\n\tTP_PROTO(const struct device *dev,\n\t\t struct iwl_host_cmd *cmd, u16 total_size,\n\t\t struct iwl_cmd_header_wide *hdr),\n\tTP_ARGS(dev, cmd, total_size, hdr),\n\tTP_STRUCT__entry(\n\t\tDEV_ENTRY\n\t\t__dynamic_array(u8, hcmd, total_size)\n\t\t__field(u32, flags)\n\t),\n\tTP_fast_assign(\n\t\tint i, offset = sizeof(struct iwl_cmd_header);\n\n\t\tif (hdr->group_id)\n\t\t\toffset = sizeof(struct iwl_cmd_header_wide);\n\n\t\tDEV_ASSIGN;\n\t\t__entry->flags = cmd->flags;\n\t\tmemcpy(__get_dynamic_array(hcmd), hdr, offset);\n\n\t\tfor (i = 0; i < IWL_MAX_CMD_TBS_PER_TFD; i++) {\n\t\t\tif (!cmd->len[i])\n\t\t\t\tcontinue;\n\t\t\tmemcpy((u8 *)__get_dynamic_array(hcmd) + offset,\n\t\t\t       cmd->data[i], cmd->len[i]);\n\t\t\toffset += cmd->len[i];\n\t\t}\n\t),\n\tTP_printk(\"[%s] hcmd %#.2x.%#.2x (%ssync)\",\n\t\t  __get_str(dev), ((u8 *)__get_dynamic_array(hcmd))[1],\n\t\t  ((u8 *)__get_dynamic_array(hcmd))[0],\n\t\t  __entry->flags & CMD_ASYNC ? \"a\" : \"\")\n);\n\nTRACE_EVENT(iwlwifi_dev_rx,\n\tTP_PROTO(const struct device *dev, const struct iwl_trans *trans,\n\t\t struct iwl_rx_packet *pkt, size_t len),\n\tTP_ARGS(dev, trans, pkt, len),\n\tTP_STRUCT__entry(\n\t\tDEV_ENTRY\n\t\t__field(u16, cmd)\n\t\t__field(u8, hdr_offset)\n\t\t__dynamic_array(u8, rxbuf,\n\t\t\t\tiwl_rx_trace_len(trans, pkt, len, NULL))\n\t),\n\tTP_fast_assign(\n\t\tsize_t hdr_offset = 0;\n\n\t\tDEV_ASSIGN;\n\t\t__entry->cmd = WIDE_ID(pkt->hdr.group_id, pkt->hdr.cmd);\n\t\tmemcpy(__get_dynamic_array(rxbuf), pkt,\n\t\t       iwl_rx_trace_len(trans, pkt, len, &hdr_offset));\n\t\t__entry->hdr_offset = hdr_offset;\n\t),\n\tTP_printk(\"[%s] RX cmd %#.2x\",\n\t\t  __get_str(dev), __entry->cmd)\n);\n\nTRACE_EVENT(iwlwifi_dev_tx,\n\tTP_PROTO(const struct device *dev, struct sk_buff *skb,\n\t\t void *tfd, size_t tfdlen,\n\t\t void *buf0, size_t buf0_len,\n\t\t int hdr_len),\n\tTP_ARGS(dev, skb, tfd, tfdlen, buf0, buf0_len, hdr_len),\n\tTP_STRUCT__entry(\n\t\tDEV_ENTRY\n\t\t__field(void *, skbaddr)\n\t\t__field(size_t, framelen)\n\t\t__dynamic_array(u8, tfd, tfdlen)\n\n\t\t \n\t\t__dynamic_array(u8, buf0, buf0_len)\n\t\t__dynamic_array(u8, buf1, hdr_len > 0 && iwl_trace_data(skb) ?\n\t\t\t\t\t\t0 : skb->len - hdr_len)\n\t),\n\tTP_fast_assign(\n\t\tDEV_ASSIGN;\n\t\t__entry->skbaddr = skb;\n\t\t__entry->framelen = buf0_len;\n\t\tif (hdr_len > 0)\n\t\t\t__entry->framelen += skb->len - hdr_len;\n\t\tmemcpy(__get_dynamic_array(tfd), tfd, tfdlen);\n\t\tmemcpy(__get_dynamic_array(buf0), buf0, buf0_len);\n\t\tif (hdr_len > 0 && !iwl_trace_data(skb))\n\t\t\tskb_copy_bits(skb, hdr_len,\n\t\t\t\t      __get_dynamic_array(buf1),\n\t\t\t\t      skb->len - hdr_len);\n\t),\n\tTP_printk(\"[%s] TX %.2x (%zu bytes) skbaddr=%p\",\n\t\t  __get_str(dev), ((u8 *)__get_dynamic_array(buf0))[0],\n\t\t  __entry->framelen, __entry->skbaddr)\n);\n\nTRACE_EVENT(iwlwifi_dev_ucode_event,\n\tTP_PROTO(const struct device *dev, u32 time, u32 data, u32 ev),\n\tTP_ARGS(dev, time, data, ev),\n\tTP_STRUCT__entry(\n\t\tDEV_ENTRY\n\n\t\t__field(u32, time)\n\t\t__field(u32, data)\n\t\t__field(u32, ev)\n\t),\n\tTP_fast_assign(\n\t\tDEV_ASSIGN;\n\t\t__entry->time = time;\n\t\t__entry->data = data;\n\t\t__entry->ev = ev;\n\t),\n\tTP_printk(\"[%s] EVT_LOGT:%010u:0x%08x:%04u\",\n\t\t  __get_str(dev), __entry->time, __entry->data, __entry->ev)\n);\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE iwl-devtrace-iwlwifi\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}