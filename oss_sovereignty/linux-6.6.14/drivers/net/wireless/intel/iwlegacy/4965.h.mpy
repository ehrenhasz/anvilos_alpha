{
  "module_name": "4965.h",
  "hash_id": "9810443a96cf961946288c11636fef7e6462371408d724b0ca4ec09495a5a72c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlegacy/4965.h",
  "human_readable_source": " \n \n\n#ifndef __il_4965_h__\n#define __il_4965_h__\n\nstruct il_rx_queue;\nstruct il_rx_buf;\nstruct il_rx_pkt;\nstruct il_tx_queue;\nstruct il_rxon_context;\n\n \nextern struct il_cfg il4965_cfg;\nextern const struct il_ops il4965_ops;\n\nextern struct il_mod_params il4965_mod_params;\n\n \nvoid il4965_free_tfds_in_queue(struct il_priv *il, int sta_id, int tid,\n\t\t\t       int freed);\n\n \nvoid il4965_set_rxon_chain(struct il_priv *il);\n\n \nint il4965_verify_ucode(struct il_priv *il);\n\n \nvoid il4965_check_abort_status(struct il_priv *il, u8 frame_count, u32 status);\n\nvoid il4965_rx_queue_reset(struct il_priv *il, struct il_rx_queue *rxq);\nint il4965_rx_init(struct il_priv *il, struct il_rx_queue *rxq);\nint il4965_hw_nic_init(struct il_priv *il);\nint il4965_dump_fh(struct il_priv *il, char **buf, bool display);\n\nvoid il4965_nic_config(struct il_priv *il);\n\n \nvoid il4965_rx_queue_restock(struct il_priv *il);\nvoid il4965_rx_replenish(struct il_priv *il);\nvoid il4965_rx_replenish_now(struct il_priv *il);\nvoid il4965_rx_queue_free(struct il_priv *il, struct il_rx_queue *rxq);\nint il4965_rxq_stop(struct il_priv *il);\nint il4965_hwrate_to_mac80211_idx(u32 rate_n_flags, enum nl80211_band band);\nvoid il4965_rx_handle(struct il_priv *il);\n\n \nvoid il4965_hw_txq_free_tfd(struct il_priv *il, struct il_tx_queue *txq);\nint il4965_hw_txq_attach_buf_to_tfd(struct il_priv *il, struct il_tx_queue *txq,\n\t\t\t\t    dma_addr_t addr, u16 len, u8 reset, u8 pad);\nint il4965_hw_tx_queue_init(struct il_priv *il, struct il_tx_queue *txq);\nvoid il4965_hwrate_to_tx_control(struct il_priv *il, u32 rate_n_flags,\n\t\t\t\t struct ieee80211_tx_info *info);\nint il4965_tx_skb(struct il_priv *il,\n\t\t  struct ieee80211_sta *sta,\n\t\t  struct sk_buff *skb);\nint il4965_tx_agg_start(struct il_priv *il, struct ieee80211_vif *vif,\n\t\t\tstruct ieee80211_sta *sta, u16 tid, u16 * ssn);\nint il4965_tx_agg_stop(struct il_priv *il, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta, u16 tid);\nint il4965_txq_check_empty(struct il_priv *il, int sta_id, u8 tid, int txq_id);\nint il4965_tx_queue_reclaim(struct il_priv *il, int txq_id, int idx);\nvoid il4965_hw_txq_ctx_free(struct il_priv *il);\nint il4965_txq_ctx_alloc(struct il_priv *il);\nvoid il4965_txq_ctx_reset(struct il_priv *il);\nvoid il4965_txq_ctx_stop(struct il_priv *il);\nvoid il4965_txq_set_sched(struct il_priv *il, u32 mask);\n\n \nvoid il4965_set_wr_ptrs(struct il_priv *il, int txq_id, u32 idx);\n \nvoid il4965_tx_queue_set_status(struct il_priv *il, struct il_tx_queue *txq,\n\t\t\t\tint tx_fifo_id, int scd_retry);\n\n \nint il4965_request_scan(struct il_priv *il, struct ieee80211_vif *vif);\n\n \nint il4965_manage_ibss_station(struct il_priv *il, struct ieee80211_vif *vif,\n\t\t\t       bool add);\n\n \nint il4965_send_beacon_cmd(struct il_priv *il);\n\n#ifdef CONFIG_IWLEGACY_DEBUG\nconst char *il4965_get_tx_fail_reason(u32 status);\n#else\nstatic inline const char *\nil4965_get_tx_fail_reason(u32 status)\n{\n\treturn \"\";\n}\n#endif\n\n \nint il4965_alloc_bcast_station(struct il_priv *il);\nint il4965_add_bssid_station(struct il_priv *il, const u8 *addr, u8 *sta_id_r);\nint il4965_remove_default_wep_key(struct il_priv *il,\n\t\t\t\t  struct ieee80211_key_conf *key);\nint il4965_set_default_wep_key(struct il_priv *il,\n\t\t\t       struct ieee80211_key_conf *key);\nint il4965_restore_default_wep_keys(struct il_priv *il);\nint il4965_set_dynamic_key(struct il_priv *il,\n\t\t\t   struct ieee80211_key_conf *key, u8 sta_id);\nint il4965_remove_dynamic_key(struct il_priv *il,\n\t\t\t      struct ieee80211_key_conf *key, u8 sta_id);\nvoid il4965_update_tkip_key(struct il_priv *il,\n\t\t\t    struct ieee80211_key_conf *keyconf,\n\t\t\t    struct ieee80211_sta *sta, u32 iv32,\n\t\t\t    u16 *phase1key);\nint il4965_sta_tx_modify_enable_tid(struct il_priv *il, int sta_id, int tid);\nint il4965_sta_rx_agg_start(struct il_priv *il, struct ieee80211_sta *sta,\n\t\t\t    int tid, u16 ssn);\nint il4965_sta_rx_agg_stop(struct il_priv *il, struct ieee80211_sta *sta,\n\t\t\t   int tid);\nvoid il4965_sta_modify_sleep_tx_count(struct il_priv *il, int sta_id, int cnt);\nint il4965_update_bcast_stations(struct il_priv *il);\n\n \nstatic inline u8\nil4965_hw_get_rate(__le32 rate_n_flags)\n{\n\treturn le32_to_cpu(rate_n_flags) & 0xFF;\n}\n\n \nvoid il4965_eeprom_get_mac(const struct il_priv *il, u8 * mac);\nint il4965_eeprom_acquire_semaphore(struct il_priv *il);\nvoid il4965_eeprom_release_semaphore(struct il_priv *il);\nint il4965_eeprom_check_version(struct il_priv *il);\n\n \nvoid il4965_mac_tx(struct ieee80211_hw *hw,\n\t\t   struct ieee80211_tx_control *control,\n\t\t   struct sk_buff *skb);\nint il4965_mac_start(struct ieee80211_hw *hw);\nvoid il4965_mac_stop(struct ieee80211_hw *hw);\nvoid il4965_configure_filter(struct ieee80211_hw *hw,\n\t\t\t     unsigned int changed_flags,\n\t\t\t     unsigned int *total_flags, u64 multicast);\nint il4965_mac_set_key(struct ieee80211_hw *hw, enum set_key_cmd cmd,\n\t\t       struct ieee80211_vif *vif, struct ieee80211_sta *sta,\n\t\t       struct ieee80211_key_conf *key);\nvoid il4965_mac_update_tkip_key(struct ieee80211_hw *hw,\n\t\t\t\tstruct ieee80211_vif *vif,\n\t\t\t\tstruct ieee80211_key_conf *keyconf,\n\t\t\t\tstruct ieee80211_sta *sta, u32 iv32,\n\t\t\t\tu16 *phase1key);\nint il4965_mac_ampdu_action(struct ieee80211_hw *hw, struct ieee80211_vif *vif,\n\t\t\t    struct ieee80211_ampdu_params *params);\nint il4965_mac_sta_add(struct ieee80211_hw *hw, struct ieee80211_vif *vif,\n\t\t       struct ieee80211_sta *sta);\nvoid\nil4965_mac_channel_switch(struct ieee80211_hw *hw, struct ieee80211_vif *vif,\n\t\t\t  struct ieee80211_channel_switch *ch_switch);\n\nvoid il4965_led_enable(struct il_priv *il);\n\n \n#define IL4965_EEPROM_IMG_SIZE\t\t\t1024\n\n \n#define IL49_FIRST_AMPDU_QUEUE\t7\n\n \n#define IL49_RTC_INST_LOWER_BOUND\t\t(0x000000)\n#define IL49_RTC_INST_UPPER_BOUND\t\t(0x018000)\n\n#define IL49_RTC_DATA_LOWER_BOUND\t\t(0x800000)\n#define IL49_RTC_DATA_UPPER_BOUND\t\t(0x80A000)\n\n#define IL49_RTC_INST_SIZE  (IL49_RTC_INST_UPPER_BOUND - \\\n\t\t\t\tIL49_RTC_INST_LOWER_BOUND)\n#define IL49_RTC_DATA_SIZE  (IL49_RTC_DATA_UPPER_BOUND - \\\n\t\t\t\tIL49_RTC_DATA_LOWER_BOUND)\n\n#define IL49_MAX_INST_SIZE IL49_RTC_INST_SIZE\n#define IL49_MAX_DATA_SIZE IL49_RTC_DATA_SIZE\n\n \n#define IL49_MAX_BSM_SIZE BSM_SRAM_SIZE\n\nstatic inline int\nil4965_hw_valid_rtc_data_addr(u32 addr)\n{\n\treturn (addr >= IL49_RTC_DATA_LOWER_BOUND &&\n\t\taddr < IL49_RTC_DATA_UPPER_BOUND);\n}\n\n \n\n \n#define TEMPERATURE_CALIB_KELVIN_OFFSET 8\n#define TEMPERATURE_CALIB_A_VAL 259\n\n \n#define IL_TX_POWER_TEMPERATURE_MIN  (263)\n#define IL_TX_POWER_TEMPERATURE_MAX  (410)\n\n#define IL_TX_POWER_TEMPERATURE_OUT_OF_RANGE(t) \\\n\t((t) < IL_TX_POWER_TEMPERATURE_MIN || \\\n\t (t) > IL_TX_POWER_TEMPERATURE_MAX)\n\nvoid il4965_temperature_calib(struct il_priv *il);\n \n\n \n\n \n\n \n\n \n#define IL_TX_POWER_MIMO_REGULATORY_COMPENSATION (6)\n\n \n#define IL_TX_POWER_CCK_COMPENSATION_B_STEP (9)\n#define IL_TX_POWER_CCK_COMPENSATION_C_STEP (5)\n\n \n#define TX_POWER_IL_VOLTAGE_CODES_PER_03V   (7)\n\n \n#define MIN_TX_GAIN_IDX\t\t(0)\t \n#define MIN_TX_GAIN_IDX_52GHZ_EXT\t(-9)\t \n\n \n\n \n\n \n#define IL_TX_POWER_DEFAULT_REGULATORY_24   (34)\n#define IL_TX_POWER_DEFAULT_REGULATORY_52   (34)\n#define IL_TX_POWER_REGULATORY_MIN          (0)\n#define IL_TX_POWER_REGULATORY_MAX          (34)\n\n \n#define IL_TX_POWER_DEFAULT_SATURATION_24   (38)\n#define IL_TX_POWER_DEFAULT_SATURATION_52   (38)\n#define IL_TX_POWER_SATURATION_MIN          (20)\n#define IL_TX_POWER_SATURATION_MAX          (50)\n\n \n \n#define CALIB_IL_TX_ATTEN_GR1_FCH 34\n#define CALIB_IL_TX_ATTEN_GR1_LCH 43\n\n \n#define CALIB_IL_TX_ATTEN_GR2_FCH 44\n#define CALIB_IL_TX_ATTEN_GR2_LCH 70\n\n \n#define CALIB_IL_TX_ATTEN_GR3_FCH 71\n#define CALIB_IL_TX_ATTEN_GR3_LCH 124\n\n \n#define CALIB_IL_TX_ATTEN_GR4_FCH 125\n#define CALIB_IL_TX_ATTEN_GR4_LCH 200\n\n \n#define CALIB_IL_TX_ATTEN_GR5_FCH 1\n#define CALIB_IL_TX_ATTEN_GR5_LCH 20\n\nenum {\n\tCALIB_CH_GROUP_1 = 0,\n\tCALIB_CH_GROUP_2 = 1,\n\tCALIB_CH_GROUP_3 = 2,\n\tCALIB_CH_GROUP_4 = 3,\n\tCALIB_CH_GROUP_5 = 4,\n\tCALIB_CH_GROUP_MAX\n};\n\n \n\n \n#define IL49_NUM_FIFOS\t7\n#define IL49_CMD_FIFO_NUM\t4\n#define IL49_NUM_QUEUES\t16\n#define IL49_NUM_AMPDU_QUEUES\t8\n\n \nstruct il4965_scd_bc_tbl {\n\t__le16 tfd_offset[TFD_QUEUE_BC_SIZE];\n\tu8 pad[1024 - (TFD_QUEUE_BC_SIZE) * sizeof(__le16)];\n} __packed;\n\n#define IL4965_RTC_INST_LOWER_BOUND\t\t(0x000000)\n\n \n#define IL4965_RSSI_OFFSET\t44\n\n \n#define PCI_CFG_RETRY_TIMEOUT\t0x041\n\n#define IL4965_DEFAULT_TX_RETRY  15\n\n \n#define IL4965_FIRST_AMPDU_QUEUE\t10\n\n \nvoid il4965_chain_noise_calibration(struct il_priv *il, void *stat_resp);\nvoid il4965_sensitivity_calibration(struct il_priv *il, void *resp);\nvoid il4965_init_sensitivity(struct il_priv *il);\nvoid il4965_reset_run_time_calib(struct il_priv *il);\n\n \n#ifdef CONFIG_IWLEGACY_DEBUGFS\nextern const struct il_debugfs_ops il4965_debugfs_ops;\n#endif\n\n \n \n \n\n \n#define FH49_MEM_LOWER_BOUND                   (0x1000)\n#define FH49_MEM_UPPER_BOUND                   (0x2000)\n\n \n#define FH49_KW_MEM_ADDR_REG\t\t     (FH49_MEM_LOWER_BOUND + 0x97C)\n\n \n#define FH49_MEM_CBBC_LOWER_BOUND          (FH49_MEM_LOWER_BOUND + 0x9D0)\n#define FH49_MEM_CBBC_UPPER_BOUND          (FH49_MEM_LOWER_BOUND + 0xA10)\n\n \n#define FH49_MEM_CBBC_QUEUE(x)  (FH49_MEM_CBBC_LOWER_BOUND + (x) * 0x4)\n\n \n#define FH49_MEM_RSCSR_LOWER_BOUND\t(FH49_MEM_LOWER_BOUND + 0xBC0)\n#define FH49_MEM_RSCSR_UPPER_BOUND\t(FH49_MEM_LOWER_BOUND + 0xC00)\n#define FH49_MEM_RSCSR_CHNL0\t\t(FH49_MEM_RSCSR_LOWER_BOUND)\n\n \n#define FH49_RSCSR_CHNL0_STTS_WPTR_REG\t(FH49_MEM_RSCSR_CHNL0)\n\n \n#define FH49_RSCSR_CHNL0_RBDCB_BASE_REG\t(FH49_MEM_RSCSR_CHNL0 + 0x004)\n\n \n#define FH49_RSCSR_CHNL0_RBDCB_WPTR_REG\t(FH49_MEM_RSCSR_CHNL0 + 0x008)\n#define FH49_RSCSR_CHNL0_WPTR        (FH49_RSCSR_CHNL0_RBDCB_WPTR_REG)\n\n \n#define FH49_MEM_RCSR_LOWER_BOUND      (FH49_MEM_LOWER_BOUND + 0xC00)\n#define FH49_MEM_RCSR_UPPER_BOUND      (FH49_MEM_LOWER_BOUND + 0xCC0)\n#define FH49_MEM_RCSR_CHNL0            (FH49_MEM_RCSR_LOWER_BOUND)\n\n#define FH49_MEM_RCSR_CHNL0_CONFIG_REG\t(FH49_MEM_RCSR_CHNL0)\n\n#define FH49_RCSR_CHNL0_RX_CONFIG_RB_TIMEOUT_MSK (0x00000FF0)\t \n#define FH49_RCSR_CHNL0_RX_CONFIG_IRQ_DEST_MSK   (0x00001000)\t \n#define FH49_RCSR_CHNL0_RX_CONFIG_SINGLE_FRAME_MSK (0x00008000)\t \n#define FH49_RCSR_CHNL0_RX_CONFIG_RB_SIZE_MSK   (0x00030000)\t \n#define FH49_RCSR_CHNL0_RX_CONFIG_RBDBC_SIZE_MSK (0x00F00000)\t \n#define FH49_RCSR_CHNL0_RX_CONFIG_DMA_CHNL_EN_MSK (0xC0000000)\t \n\n#define FH49_RCSR_RX_CONFIG_RBDCB_SIZE_POS\t(20)\n#define FH49_RCSR_RX_CONFIG_REG_IRQ_RBTH_POS\t(4)\n#define RX_RB_TIMEOUT\t(0x10)\n\n#define FH49_RCSR_RX_CONFIG_CHNL_EN_PAUSE_VAL         (0x00000000)\n#define FH49_RCSR_RX_CONFIG_CHNL_EN_PAUSE_EOF_VAL     (0x40000000)\n#define FH49_RCSR_RX_CONFIG_CHNL_EN_ENABLE_VAL        (0x80000000)\n\n#define FH49_RCSR_RX_CONFIG_REG_VAL_RB_SIZE_4K    (0x00000000)\n#define FH49_RCSR_RX_CONFIG_REG_VAL_RB_SIZE_8K    (0x00010000)\n#define FH49_RCSR_RX_CONFIG_REG_VAL_RB_SIZE_12K   (0x00020000)\n#define FH49_RCSR_RX_CONFIG_REG_VAL_RB_SIZE_16K   (0x00030000)\n\n#define FH49_RCSR_CHNL0_RX_IGNORE_RXF_EMPTY              (0x00000004)\n#define FH49_RCSR_CHNL0_RX_CONFIG_IRQ_DEST_NO_INT_VAL    (0x00000000)\n#define FH49_RCSR_CHNL0_RX_CONFIG_IRQ_DEST_INT_HOST_VAL  (0x00001000)\n\n \n#define FH49_MEM_RSSR_LOWER_BOUND           (FH49_MEM_LOWER_BOUND + 0xC40)\n#define FH49_MEM_RSSR_UPPER_BOUND           (FH49_MEM_LOWER_BOUND + 0xD00)\n\n#define FH49_MEM_RSSR_SHARED_CTRL_REG       (FH49_MEM_RSSR_LOWER_BOUND)\n#define FH49_MEM_RSSR_RX_STATUS_REG\t(FH49_MEM_RSSR_LOWER_BOUND + 0x004)\n#define FH49_MEM_RSSR_RX_ENABLE_ERR_IRQ2DRV\\\n\t\t\t\t\t(FH49_MEM_RSSR_LOWER_BOUND + 0x008)\n\n#define FH49_RSSR_CHNL0_RX_STATUS_CHNL_IDLE\t(0x01000000)\n\n#define FH49_MEM_TFDIB_REG1_ADDR_BITSHIFT\t28\n\n \n#define FH49_MEM_TFDIB_DRAM_ADDR_LSB_MSK      (0xFFFFFFFF)\n#define FH49_TFDIB_LOWER_BOUND       (FH49_MEM_LOWER_BOUND + 0x900)\n#define FH49_TFDIB_UPPER_BOUND       (FH49_MEM_LOWER_BOUND + 0x958)\n#define FH49_TFDIB_CTRL0_REG(_chnl)  (FH49_TFDIB_LOWER_BOUND + 0x8 * (_chnl))\n#define FH49_TFDIB_CTRL1_REG(_chnl)  (FH49_TFDIB_LOWER_BOUND + 0x8 * (_chnl) + 0x4)\n\n \n#define FH49_TCSR_LOWER_BOUND  (FH49_MEM_LOWER_BOUND + 0xD00)\n#define FH49_TCSR_UPPER_BOUND  (FH49_MEM_LOWER_BOUND + 0xE60)\n\n \n#define FH49_TCSR_CHNL_NUM                            (7)\n#define FH50_TCSR_CHNL_NUM                            (8)\n\n \n#define FH49_TCSR_CHNL_TX_CONFIG_REG(_chnl)\t\\\n\t\t(FH49_TCSR_LOWER_BOUND + 0x20 * (_chnl))\n#define FH49_TCSR_CHNL_TX_CREDIT_REG(_chnl)\t\\\n\t\t(FH49_TCSR_LOWER_BOUND + 0x20 * (_chnl) + 0x4)\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG(_chnl)\t\\\n\t\t(FH49_TCSR_LOWER_BOUND + 0x20 * (_chnl) + 0x8)\n\n#define FH49_TCSR_TX_CONFIG_REG_VAL_MSG_MODE_TXF\t\t(0x00000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_MSG_MODE_DRV\t\t(0x00000001)\n\n#define FH49_TCSR_TX_CONFIG_REG_VAL_DMA_CREDIT_DISABLE\t(0x00000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_DMA_CREDIT_ENABLE\t(0x00000008)\n\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_HOST_NOINT\t(0x00000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_HOST_ENDTFD\t(0x00100000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_HOST_IFTFD\t(0x00200000)\n\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_RTC_NOINT\t(0x00000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_RTC_ENDTFD\t(0x00400000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_CIRQ_RTC_IFTFD\t(0x00800000)\n\n#define FH49_TCSR_TX_CONFIG_REG_VAL_DMA_CHNL_PAUSE\t(0x00000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_DMA_CHNL_PAUSE_EOF\t(0x40000000)\n#define FH49_TCSR_TX_CONFIG_REG_VAL_DMA_CHNL_ENABLE\t(0x80000000)\n\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG_VAL_TFDB_EMPTY\t(0x00000000)\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG_VAL_TFDB_WAIT\t(0x00002000)\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG_VAL_TFDB_VALID\t(0x00000003)\n\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG_POS_TB_NUM\t\t(20)\n#define FH49_TCSR_CHNL_TX_BUF_STS_REG_POS_TB_IDX\t\t(12)\n\n \n#define FH49_TSSR_LOWER_BOUND\t\t(FH49_MEM_LOWER_BOUND + 0xEA0)\n#define FH49_TSSR_UPPER_BOUND\t\t(FH49_MEM_LOWER_BOUND + 0xEC0)\n\n#define FH49_TSSR_TX_STATUS_REG\t\t(FH49_TSSR_LOWER_BOUND + 0x010)\n\n \n#define FH49_TSSR_TX_ERROR_REG\t\t(FH49_TSSR_LOWER_BOUND + 0x018)\n\n#define FH49_TSSR_TX_STATUS_REG_MSK_CHNL_IDLE(_chnl) ((1 << (_chnl)) << 16)\n\n \n#define FH49_SRVC_CHNL\t\t(9)\n#define FH49_SRVC_LOWER_BOUND\t(FH49_MEM_LOWER_BOUND + 0x9C8)\n#define FH49_SRVC_UPPER_BOUND\t(FH49_MEM_LOWER_BOUND + 0x9D0)\n#define FH49_SRVC_CHNL_SRAM_ADDR_REG(_chnl) \\\n\t\t(FH49_SRVC_LOWER_BOUND + ((_chnl) - 9) * 0x4)\n\n#define FH49_TX_CHICKEN_BITS_REG\t(FH49_MEM_LOWER_BOUND + 0xE98)\n \n#define FH49_TX_CHICKEN_BITS_SCD_AUTO_RETRY_EN\t(0x00000002)\n\n \n#define IL_KW_SIZE 0x1000\t \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}