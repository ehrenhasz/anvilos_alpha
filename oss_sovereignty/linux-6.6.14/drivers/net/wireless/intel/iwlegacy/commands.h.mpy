{
  "module_name": "commands.h",
  "hash_id": "88b351dfcd1109f1049811a389297022f3e8bb347934b6db3d782015c451d7dc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/intel/iwlegacy/commands.h",
  "human_readable_source": " \n\n#ifndef __il_commands_h__\n#define __il_commands_h__\n\n#include <linux/ieee80211.h>\n\nstruct il_priv;\n\n \n#define IL_UCODE_MAJOR(ver)\t(((ver) & 0xFF000000) >> 24)\n#define IL_UCODE_MINOR(ver)\t(((ver) & 0x00FF0000) >> 16)\n#define IL_UCODE_API(ver)\t(((ver) & 0x0000FF00) >> 8)\n#define IL_UCODE_SERIAL(ver)\t((ver) & 0x000000FF)\n\n \n#define IL_CCK_RATES\t4\n#define IL_OFDM_RATES\t8\n#define IL_MAX_RATES\t(IL_CCK_RATES + IL_OFDM_RATES)\n\nenum {\n\tN_ALIVE = 0x1,\n\tN_ERROR = 0x2,\n\n\t \n\tC_RXON = 0x10,\n\tC_RXON_ASSOC = 0x11,\n\tC_QOS_PARAM = 0x13,\n\tC_RXON_TIMING = 0x14,\n\n\t \n\tC_ADD_STA = 0x18,\n\tC_REM_STA = 0x19,\n\n\t \n\tC_WEPKEY = 0x20,\n\n\t \n\tN_3945_RX = 0x1b,\t \n\tC_TX = 0x1c,\n\tC_RATE_SCALE = 0x47,\t \n\tC_LEDS = 0x48,\n\tC_TX_LINK_QUALITY_CMD = 0x4e,\t \n\n\t \n\tC_CHANNEL_SWITCH = 0x72,\n\tN_CHANNEL_SWITCH = 0x73,\n\tC_SPECTRUM_MEASUREMENT = 0x74,\n\tN_SPECTRUM_MEASUREMENT = 0x75,\n\n\t \n\tC_POWER_TBL = 0x77,\n\tN_PM_SLEEP = 0x7A,\n\tN_PM_DEBUG_STATS = 0x7B,\n\n\t \n\tC_SCAN = 0x80,\n\tC_SCAN_ABORT = 0x81,\n\tN_SCAN_START = 0x82,\n\tN_SCAN_RESULTS = 0x83,\n\tN_SCAN_COMPLETE = 0x84,\n\n\t \n\tN_BEACON = 0x90,\n\tC_TX_BEACON = 0x91,\n\n\t \n\tC_TX_PWR_TBL = 0x97,\n\n\t \n\tC_BT_CONFIG = 0x9b,\n\n\t \n\tC_STATS = 0x9c,\n\tN_STATS = 0x9d,\n\n\t \n\tN_CARD_STATE = 0xa1,\n\n\t \n\tN_MISSED_BEACONS = 0xa2,\n\n\tC_CT_KILL_CONFIG = 0xa4,\n\tC_SENSITIVITY = 0xa8,\n\tC_PHY_CALIBRATION = 0xb0,\n\tN_RX_PHY = 0xc0,\n\tN_RX_MPDU = 0xc1,\n\tN_RX = 0xc3,\n\tN_COMPRESSED_BA = 0xc5,\n\n\tIL_CN_MAX = 0xff\n};\n\n \n\n \n#define IL_CMD_FAILED_MSK 0x40\n\n#define SEQ_TO_QUEUE(s)\t(((s) >> 8) & 0x1f)\n#define QUEUE_TO_SEQ(q)\t(((q) & 0x1f) << 8)\n#define SEQ_TO_IDX(s)\t((s) & 0xff)\n#define IDX_TO_SEQ(i)\t((i) & 0xff)\n#define SEQ_HUGE_FRAME\tcpu_to_le16(0x4000)\n#define SEQ_RX_FRAME\tcpu_to_le16(0x8000)\n\n \nstruct il_cmd_header {\n\tu8 cmd;\t\t\t \n\tu8 flags;\t\t \n\t \n\t__le16 sequence;\n\n\t \n\tu8 data[];\n} __packed;\n\n \nstruct il3945_tx_power {\n\tu8 tx_gain;\t\t \n\tu8 dsp_atten;\t\t \n} __packed;\n\n \nstruct il3945_power_per_rate {\n\tu8 rate;\t\t \n\tstruct il3945_tx_power tpc;\n\tu8 reserved;\n} __packed;\n\n \n#define RATE_MCS_CODE_MSK 0x7\n#define RATE_MCS_SPATIAL_POS 3\n#define RATE_MCS_SPATIAL_MSK 0x18\n#define RATE_MCS_HT_DUP_POS 5\n#define RATE_MCS_HT_DUP_MSK 0x20\n\n \n#define RATE_MCS_FLAGS_POS 8\n#define RATE_MCS_HT_POS 8\n#define RATE_MCS_HT_MSK 0x100\n\n \n#define RATE_MCS_CCK_POS 9\n#define RATE_MCS_CCK_MSK 0x200\n\n \n#define RATE_MCS_GF_POS 10\n#define RATE_MCS_GF_MSK 0x400\n\n \n#define RATE_MCS_HT40_POS 11\n#define RATE_MCS_HT40_MSK 0x800\n\n \n#define RATE_MCS_DUP_POS 12\n#define RATE_MCS_DUP_MSK 0x1000\n\n \n#define RATE_MCS_SGI_POS 13\n#define RATE_MCS_SGI_MSK 0x2000\n\n \n#define RATE_MCS_ANT_POS\t14\n#define RATE_MCS_ANT_A_MSK\t0x04000\n#define RATE_MCS_ANT_B_MSK\t0x08000\n#define RATE_MCS_ANT_C_MSK\t0x10000\n#define RATE_MCS_ANT_AB_MSK\t(RATE_MCS_ANT_A_MSK | RATE_MCS_ANT_B_MSK)\n#define RATE_MCS_ANT_ABC_MSK\t(RATE_MCS_ANT_AB_MSK | RATE_MCS_ANT_C_MSK)\n#define RATE_ANT_NUM 3\n\n#define POWER_TBL_NUM_ENTRIES\t\t\t33\n#define POWER_TBL_NUM_HT_OFDM_ENTRIES\t\t32\n#define POWER_TBL_CCK_ENTRY\t\t\t32\n\n#define IL_PWR_NUM_HT_OFDM_ENTRIES\t\t24\n#define IL_PWR_CCK_ENTRIES\t\t\t2\n\n \nunion il4965_tx_power_dual_stream {\n\tstruct {\n\t\tu8 radio_tx_gain[2];\n\t\tu8 dsp_predis_atten[2];\n\t} s;\n\tu32 dw;\n};\n\n \nstruct tx_power_dual_stream {\n\t__le32 dw;\n} __packed;\n\n \nstruct il4965_tx_power_db {\n\tstruct tx_power_dual_stream power_tbl[POWER_TBL_NUM_ENTRIES];\n} __packed;\n\n \n\n#define UCODE_VALID_OK\tcpu_to_le32(0x1)\n#define INITIALIZE_SUBTYPE    (9)\n\n \nstruct il_init_alive_resp {\n\tu8 ucode_minor;\n\tu8 ucode_major;\n\t__le16 reserved1;\n\tu8 sw_rev[8];\n\tu8 ver_type;\n\tu8 ver_subtype;\t\t \n\t__le16 reserved2;\n\t__le32 log_event_table_ptr;\n\t__le32 error_event_table_ptr;\n\t__le32 timestamp;\n\t__le32 is_valid;\n\n\t \n\t__le32 voltage;\t\t \n\t__le32 therm_r1[2];\t \n\t__le32 therm_r2[2];\t \n\t__le32 therm_r3[2];\t \n\t__le32 therm_r4[2];\t \n\t__le32 tx_atten[5][2];\t \n} __packed;\n\n \nstruct il_alive_resp {\n\tu8 ucode_minor;\n\tu8 ucode_major;\n\t__le16 reserved1;\n\tu8 sw_rev[8];\n\tu8 ver_type;\n\tu8 ver_subtype;\t\t \n\t__le16 reserved2;\n\t__le32 log_event_table_ptr;\t \n\t__le32 error_event_table_ptr;\t \n\t__le32 timestamp;\n\t__le32 is_valid;\n} __packed;\n\n \nstruct il_error_resp {\n\t__le32 error_type;\n\tu8 cmd_id;\n\tu8 reserved1;\n\t__le16 bad_cmd_seq_num;\n\t__le32 error_info;\n\t__le64 timestamp;\n} __packed;\n\n \n\n \n \nenum {\n\tRXON_DEV_TYPE_AP = 1,\n\tRXON_DEV_TYPE_ESS = 3,\n\tRXON_DEV_TYPE_IBSS = 4,\n\tRXON_DEV_TYPE_SNIFFER = 6,\n};\n\n#define RXON_RX_CHAIN_DRIVER_FORCE_MSK\t\tcpu_to_le16(0x1 << 0)\n#define RXON_RX_CHAIN_DRIVER_FORCE_POS\t\t(0)\n#define RXON_RX_CHAIN_VALID_MSK\t\t\tcpu_to_le16(0x7 << 1)\n#define RXON_RX_CHAIN_VALID_POS\t\t\t(1)\n#define RXON_RX_CHAIN_FORCE_SEL_MSK\t\tcpu_to_le16(0x7 << 4)\n#define RXON_RX_CHAIN_FORCE_SEL_POS\t\t(4)\n#define RXON_RX_CHAIN_FORCE_MIMO_SEL_MSK\tcpu_to_le16(0x7 << 7)\n#define RXON_RX_CHAIN_FORCE_MIMO_SEL_POS\t(7)\n#define RXON_RX_CHAIN_CNT_MSK\t\t\tcpu_to_le16(0x3 << 10)\n#define RXON_RX_CHAIN_CNT_POS\t\t\t(10)\n#define RXON_RX_CHAIN_MIMO_CNT_MSK\t\tcpu_to_le16(0x3 << 12)\n#define RXON_RX_CHAIN_MIMO_CNT_POS\t\t(12)\n#define RXON_RX_CHAIN_MIMO_FORCE_MSK\t\tcpu_to_le16(0x1 << 14)\n#define RXON_RX_CHAIN_MIMO_FORCE_POS\t\t(14)\n\n \n \n#define RXON_FLG_BAND_24G_MSK           cpu_to_le32(1 << 0)\n#define RXON_FLG_CCK_MSK                cpu_to_le32(1 << 1)\n \n#define RXON_FLG_AUTO_DETECT_MSK        cpu_to_le32(1 << 2)\n \n#define RXON_FLG_TGG_PROTECT_MSK        cpu_to_le32(1 << 3)\n \n#define RXON_FLG_SHORT_SLOT_MSK          cpu_to_le32(1 << 4)\n#define RXON_FLG_SHORT_PREAMBLE_MSK     cpu_to_le32(1 << 5)\n \n#define RXON_FLG_DIS_DIV_MSK            cpu_to_le32(1 << 7)\n#define RXON_FLG_ANT_SEL_MSK            cpu_to_le32(0x0f00)\n#define RXON_FLG_ANT_A_MSK              cpu_to_le32(1 << 8)\n#define RXON_FLG_ANT_B_MSK              cpu_to_le32(1 << 9)\n \n#define RXON_FLG_RADAR_DETECT_MSK       cpu_to_le32(1 << 12)\n#define RXON_FLG_TGJ_NARROW_BAND_MSK    cpu_to_le32(1 << 13)\n \n#define RXON_FLG_TSF2HOST_MSK           cpu_to_le32(1 << 15)\n\n \n#define RXON_FLG_CTRL_CHANNEL_LOC_POS\t\t(22)\n#define RXON_FLG_CTRL_CHANNEL_LOC_HI_MSK\tcpu_to_le32(0x1 << 22)\n\n#define RXON_FLG_HT_OPERATING_MODE_POS\t\t(23)\n\n#define RXON_FLG_HT_PROT_MSK\t\t\tcpu_to_le32(0x1 << 23)\n#define RXON_FLG_HT40_PROT_MSK\t\t\tcpu_to_le32(0x2 << 23)\n\n#define RXON_FLG_CHANNEL_MODE_POS\t\t(25)\n#define RXON_FLG_CHANNEL_MODE_MSK\t\tcpu_to_le32(0x3 << 25)\n\n \nenum {\n\tCHANNEL_MODE_LEGACY = 0,\n\tCHANNEL_MODE_PURE_40 = 1,\n\tCHANNEL_MODE_MIXED = 2,\n\tCHANNEL_MODE_RESERVED = 3,\n};\n#define RXON_FLG_CHANNEL_MODE_LEGACY\t\t\t\\\n\tcpu_to_le32(CHANNEL_MODE_LEGACY << RXON_FLG_CHANNEL_MODE_POS)\n#define RXON_FLG_CHANNEL_MODE_PURE_40\t\t\t\\\n\tcpu_to_le32(CHANNEL_MODE_PURE_40 << RXON_FLG_CHANNEL_MODE_POS)\n#define RXON_FLG_CHANNEL_MODE_MIXED\t\t\t\\\n\tcpu_to_le32(CHANNEL_MODE_MIXED << RXON_FLG_CHANNEL_MODE_POS)\n\n \n#define RXON_FLG_SELF_CTS_EN\t\t\tcpu_to_le32(0x1<<30)\n\n \n \n#define RXON_FILTER_PROMISC_MSK         cpu_to_le32(1 << 0)\n \n#define RXON_FILTER_CTL2HOST_MSK        cpu_to_le32(1 << 1)\n \n#define RXON_FILTER_ACCEPT_GRP_MSK      cpu_to_le32(1 << 2)\n \n#define RXON_FILTER_DIS_DECRYPT_MSK     cpu_to_le32(1 << 3)\n \n#define RXON_FILTER_DIS_GRP_DECRYPT_MSK cpu_to_le32(1 << 4)\n \n#define RXON_FILTER_ASSOC_MSK           cpu_to_le32(1 << 5)\n \n#define RXON_FILTER_BCON_AWARE_MSK      cpu_to_le32(1 << 6)\n\n \n\nstruct il3945_rxon_cmd {\n\tu8 node_addr[6];\n\t__le16 reserved1;\n\tu8 bssid_addr[6];\n\t__le16 reserved2;\n\tu8 wlap_bssid_addr[6];\n\t__le16 reserved3;\n\tu8 dev_type;\n\tu8 air_propagation;\n\t__le16 reserved4;\n\tu8 ofdm_basic_rates;\n\tu8 cck_basic_rates;\n\t__le16 assoc_id;\n\t__le32 flags;\n\t__le32 filter_flags;\n\t__le16 channel;\n\t__le16 reserved5;\n} __packed;\n\nstruct il4965_rxon_cmd {\n\tu8 node_addr[6];\n\t__le16 reserved1;\n\tu8 bssid_addr[6];\n\t__le16 reserved2;\n\tu8 wlap_bssid_addr[6];\n\t__le16 reserved3;\n\tu8 dev_type;\n\tu8 air_propagation;\n\t__le16 rx_chain;\n\tu8 ofdm_basic_rates;\n\tu8 cck_basic_rates;\n\t__le16 assoc_id;\n\t__le32 flags;\n\t__le32 filter_flags;\n\t__le16 channel;\n\tu8 ofdm_ht_single_stream_basic_rates;\n\tu8 ofdm_ht_dual_stream_basic_rates;\n} __packed;\n\n \nstruct il_rxon_cmd {\n\tu8 node_addr[6];\n\t__le16 reserved1;\n\tu8 bssid_addr[6];\n\t__le16 reserved2;\n\tu8 wlap_bssid_addr[6];\n\t__le16 reserved3;\n\tu8 dev_type;\n\tu8 air_propagation;\n\t__le16 rx_chain;\n\tu8 ofdm_basic_rates;\n\tu8 cck_basic_rates;\n\t__le16 assoc_id;\n\t__le32 flags;\n\t__le32 filter_flags;\n\t__le16 channel;\n\tu8 ofdm_ht_single_stream_basic_rates;\n\tu8 ofdm_ht_dual_stream_basic_rates;\n\tu8 reserved4;\n\tu8 reserved5;\n} __packed;\n\n \nstruct il3945_rxon_assoc_cmd {\n\t__le32 flags;\n\t__le32 filter_flags;\n\tu8 ofdm_basic_rates;\n\tu8 cck_basic_rates;\n\t__le16 reserved;\n} __packed;\n\nstruct il4965_rxon_assoc_cmd {\n\t__le32 flags;\n\t__le32 filter_flags;\n\tu8 ofdm_basic_rates;\n\tu8 cck_basic_rates;\n\tu8 ofdm_ht_single_stream_basic_rates;\n\tu8 ofdm_ht_dual_stream_basic_rates;\n\t__le16 rx_chain_select_flags;\n\t__le16 reserved;\n} __packed;\n\n#define IL_CONN_MAX_LISTEN_INTERVAL\t10\n#define IL_MAX_UCODE_BEACON_INTERVAL\t4\t \n#define IL39_MAX_UCODE_BEACON_INTERVAL\t1\t \n\n \nstruct il_rxon_time_cmd {\n\t__le64 timestamp;\n\t__le16 beacon_interval;\n\t__le16 atim_win;\n\t__le32 beacon_init_val;\n\t__le16 listen_interval;\n\tu8 dtim_period;\n\tu8 delta_cp_bss_tbtts;\n} __packed;\n\n \nstruct il3945_channel_switch_cmd {\n\tu8 band;\n\tu8 expect_beacon;\n\t__le16 channel;\n\t__le32 rxon_flags;\n\t__le32 rxon_filter_flags;\n\t__le32 switch_time;\n\tstruct il3945_power_per_rate power[IL_MAX_RATES];\n} __packed;\n\nstruct il4965_channel_switch_cmd {\n\tu8 band;\n\tu8 expect_beacon;\n\t__le16 channel;\n\t__le32 rxon_flags;\n\t__le32 rxon_filter_flags;\n\t__le32 switch_time;\n\tstruct il4965_tx_power_db tx_power;\n} __packed;\n\n \nstruct il_csa_notification {\n\t__le16 band;\n\t__le16 channel;\n\t__le32 status;\t\t \n} __packed;\n\n \n\n \nstruct il_ac_qos {\n\t__le16 cw_min;\n\t__le16 cw_max;\n\tu8 aifsn;\n\tu8 reserved1;\n\t__le16 edca_txop;\n} __packed;\n\n \n#define QOS_PARAM_FLG_UPDATE_EDCA_MSK\tcpu_to_le32(0x01)\n#define QOS_PARAM_FLG_TGN_MSK\t\tcpu_to_le32(0x02)\n#define QOS_PARAM_FLG_TXOP_TYPE_MSK\tcpu_to_le32(0x10)\n\n \n#define AC_NUM                4\n\n \nstruct il_qosparam_cmd {\n\t__le32 qos_flags;\n\tstruct il_ac_qos ac[AC_NUM];\n} __packed;\n\n \n \n\n \n#define\tIL_AP_ID\t\t0\n#define\tIL_STA_ID\t\t2\n#define\tIL3945_BROADCAST_ID\t24\n#define IL3945_STATION_COUNT\t25\n#define IL4965_BROADCAST_ID\t31\n#define\tIL4965_STATION_COUNT\t32\n\n#define\tIL_STATION_COUNT\t32\t \n#define\tIL_INVALID_STATION\t255\n\n#define STA_FLG_TX_RATE_MSK\t\tcpu_to_le32(1 << 2)\n#define STA_FLG_PWR_SAVE_MSK\t\tcpu_to_le32(1 << 8)\n#define STA_FLG_RTS_MIMO_PROT_MSK\tcpu_to_le32(1 << 17)\n#define STA_FLG_AGG_MPDU_8US_MSK\tcpu_to_le32(1 << 18)\n#define STA_FLG_MAX_AGG_SIZE_POS\t(19)\n#define STA_FLG_MAX_AGG_SIZE_MSK\tcpu_to_le32(3 << 19)\n#define STA_FLG_HT40_EN_MSK\t\tcpu_to_le32(1 << 21)\n#define STA_FLG_MIMO_DIS_MSK\t\tcpu_to_le32(1 << 22)\n#define STA_FLG_AGG_MPDU_DENSITY_POS\t(23)\n#define STA_FLG_AGG_MPDU_DENSITY_MSK\tcpu_to_le32(7 << 23)\n\n \n#define STA_CONTROL_MODIFY_MSK\t\t0x01\n\n \n#define STA_KEY_FLG_ENCRYPT_MSK\tcpu_to_le16(0x0007)\n#define STA_KEY_FLG_NO_ENC\tcpu_to_le16(0x0000)\n#define STA_KEY_FLG_WEP\t\tcpu_to_le16(0x0001)\n#define STA_KEY_FLG_CCMP\tcpu_to_le16(0x0002)\n#define STA_KEY_FLG_TKIP\tcpu_to_le16(0x0003)\n\n#define STA_KEY_FLG_KEYID_POS\t8\n#define STA_KEY_FLG_INVALID\tcpu_to_le16(0x0800)\n \n#define STA_KEY_FLG_MAP_KEY_MSK\tcpu_to_le16(0x0008)\n\n \n#define STA_KEY_FLG_KEY_SIZE_MSK\tcpu_to_le16(0x1000)\n#define STA_KEY_MULTICAST_MSK\t\tcpu_to_le16(0x4000)\n#define STA_KEY_MAX_NUM\t\t8\n\n \n#define\tSTA_MODIFY_KEY_MASK\t\t0x01\n#define\tSTA_MODIFY_TID_DISABLE_TX\t0x02\n#define\tSTA_MODIFY_TX_RATE_MSK\t\t0x04\n#define STA_MODIFY_ADDBA_TID_MSK\t0x08\n#define STA_MODIFY_DELBA_TID_MSK\t0x10\n#define STA_MODIFY_SLEEP_TX_COUNT_MSK\t0x20\n\n \n#define BUILD_RAxTID(sta_id, tid)\t(((sta_id) << 4) + (tid))\n\nstruct il4965_keyinfo {\n\t__le16 key_flags;\n\tu8 tkip_rx_tsc_byte2;\t \n\tu8 reserved1;\n\t__le16 tkip_rx_ttak[5];\t \n\tu8 key_offset;\n\tu8 reserved2;\n\tu8 key[16];\t\t \n} __packed;\n\n \nstruct sta_id_modify {\n\tu8 addr[ETH_ALEN];\n\t__le16 reserved1;\n\tu8 sta_id;\n\tu8 modify_mask;\n\t__le16 reserved2;\n} __packed;\n\n \n\nstruct il3945_addsta_cmd {\n\tu8 mode;\t\t \n\tu8 reserved[3];\n\tstruct sta_id_modify sta;\n\tstruct il4965_keyinfo key;\n\t__le32 station_flags;\t \n\t__le32 station_flags_msk;\t \n\n\t \n\t__le16 tid_disable_tx;\n\n\t__le16 rate_n_flags;\n\n\t \n\tu8 add_immediate_ba_tid;\n\n\t \n\tu8 remove_immediate_ba_tid;\n\n\t \n\t__le16 add_immediate_ba_ssn;\n} __packed;\n\nstruct il4965_addsta_cmd {\n\tu8 mode;\t\t \n\tu8 reserved[3];\n\tstruct sta_id_modify sta;\n\tstruct il4965_keyinfo key;\n\t__le32 station_flags;\t \n\t__le32 station_flags_msk;\t \n\n\t \n\t__le16 tid_disable_tx;\n\n\t__le16 reserved1;\n\n\t \n\tu8 add_immediate_ba_tid;\n\n\t \n\tu8 remove_immediate_ba_tid;\n\n\t \n\t__le16 add_immediate_ba_ssn;\n\n\t \n\t__le16 sleep_tx_count;\n\n\t__le16 reserved2;\n} __packed;\n\n \nstruct il_addsta_cmd {\n\tu8 mode;\t\t \n\tu8 reserved[3];\n\tstruct sta_id_modify sta;\n\tstruct il4965_keyinfo key;\n\t__le32 station_flags;\t \n\t__le32 station_flags_msk;\t \n\n\t \n\t__le16 tid_disable_tx;\n\n\t__le16 rate_n_flags;\t \n\n\t \n\tu8 add_immediate_ba_tid;\n\n\t \n\tu8 remove_immediate_ba_tid;\n\n\t \n\t__le16 add_immediate_ba_ssn;\n\n\t \n\t__le16 sleep_tx_count;\n\n\t__le16 reserved2;\n} __packed;\n\n#define ADD_STA_SUCCESS_MSK\t\t0x1\n#define ADD_STA_NO_ROOM_IN_TBL\t0x2\n#define ADD_STA_NO_BLOCK_ACK_RESOURCE\t0x4\n#define ADD_STA_MODIFY_NON_EXIST_STA\t0x8\n \nstruct il_add_sta_resp {\n\tu8 status;\t\t \n} __packed;\n\n#define REM_STA_SUCCESS_MSK              0x1\n \nstruct il_rem_sta_resp {\n\tu8 status;\n} __packed;\n\n \nstruct il_rem_sta_cmd {\n\tu8 num_sta;\t\t \n\tu8 reserved[3];\n\tu8 addr[ETH_ALEN];\t \n\tu8 reserved2[2];\n} __packed;\n\n#define IL_TX_FIFO_BK_MSK\t\tcpu_to_le32(BIT(0))\n#define IL_TX_FIFO_BE_MSK\t\tcpu_to_le32(BIT(1))\n#define IL_TX_FIFO_VI_MSK\t\tcpu_to_le32(BIT(2))\n#define IL_TX_FIFO_VO_MSK\t\tcpu_to_le32(BIT(3))\n#define IL_AGG_TX_QUEUE_MSK\t\tcpu_to_le32(0xffc00)\n\n#define IL_DROP_SINGLE\t\t0\n#define IL_DROP_SELECTED\t1\n#define IL_DROP_ALL\t\t2\n\n \nstruct il_wep_key {\n\tu8 key_idx;\n\tu8 key_offset;\n\tu8 reserved1[2];\n\tu8 key_size;\n\tu8 reserved2[3];\n\tu8 key[16];\n} __packed;\n\nstruct il_wep_cmd {\n\tu8 num_keys;\n\tu8 global_key_type;\n\tu8 flags;\n\tu8 reserved;\n\tstruct il_wep_key key[];\n} __packed;\n\n#define WEP_KEY_WEP_TYPE 1\n#define WEP_KEYS_MAX 4\n#define WEP_INVALID_OFFSET 0xff\n#define WEP_KEY_LEN_64 5\n#define WEP_KEY_LEN_128 13\n\n \n\n#define RX_RES_STATUS_NO_CRC32_ERROR\tcpu_to_le32(1 << 0)\n#define RX_RES_STATUS_NO_RXE_OVERFLOW\tcpu_to_le32(1 << 1)\n\n#define RX_RES_PHY_FLAGS_BAND_24_MSK\tcpu_to_le16(1 << 0)\n#define RX_RES_PHY_FLAGS_MOD_CCK_MSK\t\tcpu_to_le16(1 << 1)\n#define RX_RES_PHY_FLAGS_SHORT_PREAMBLE_MSK\tcpu_to_le16(1 << 2)\n#define RX_RES_PHY_FLAGS_NARROW_BAND_MSK\tcpu_to_le16(1 << 3)\n#define RX_RES_PHY_FLAGS_ANTENNA_MSK\t\t0x70\n#define RX_RES_PHY_FLAGS_ANTENNA_POS\t\t4\n#define RX_RES_PHY_FLAGS_AGG_MSK\tcpu_to_le16(1 << 7)\n\n#define RX_RES_STATUS_SEC_TYPE_MSK\t(0x7 << 8)\n#define RX_RES_STATUS_SEC_TYPE_NONE\t(0x0 << 8)\n#define RX_RES_STATUS_SEC_TYPE_WEP\t(0x1 << 8)\n#define RX_RES_STATUS_SEC_TYPE_CCMP\t(0x2 << 8)\n#define RX_RES_STATUS_SEC_TYPE_TKIP\t(0x3 << 8)\n#define\tRX_RES_STATUS_SEC_TYPE_ERR\t(0x7 << 8)\n\n#define RX_RES_STATUS_STATION_FOUND\t(1<<6)\n#define RX_RES_STATUS_NO_STATION_INFO_MISMATCH\t(1<<7)\n\n#define RX_RES_STATUS_DECRYPT_TYPE_MSK\t(0x3 << 11)\n#define RX_RES_STATUS_NOT_DECRYPT\t(0x0 << 11)\n#define RX_RES_STATUS_DECRYPT_OK\t(0x3 << 11)\n#define RX_RES_STATUS_BAD_ICV_MIC\t(0x1 << 11)\n#define RX_RES_STATUS_BAD_KEY_TTAK\t(0x2 << 11)\n\n#define RX_MPDU_RES_STATUS_ICV_OK\t(0x20)\n#define RX_MPDU_RES_STATUS_MIC_OK\t(0x40)\n#define RX_MPDU_RES_STATUS_TTAK_OK\t(1 << 7)\n#define RX_MPDU_RES_STATUS_DEC_DONE_MSK\t(0x800)\n\nstruct il3945_rx_frame_stats {\n\tu8 phy_count;\n\tu8 id;\n\tu8 rssi;\n\tu8 agc;\n\t__le16 sig_avg;\n\t__le16 noise_diff;\n\tu8 payload[];\n} __packed;\n\nstruct il3945_rx_frame_hdr {\n\t__le16 channel;\n\t__le16 phy_flags;\n\tu8 reserved1;\n\tu8 rate;\n\t__le16 len;\n\tu8 payload[];\n} __packed;\n\nstruct il3945_rx_frame_end {\n\t__le32 status;\n\t__le64 timestamp;\n\t__le32 beacon_timestamp;\n} __packed;\n\n \nstruct il3945_rx_frame {\n\tstruct il3945_rx_frame_stats stats;\n\tstruct il3945_rx_frame_hdr hdr;\n\tstruct il3945_rx_frame_end end;\n} __packed;\n\n#define IL39_RX_FRAME_SIZE\t(4 + sizeof(struct il3945_rx_frame))\n\n \n\n#define IL49_RX_RES_PHY_CNT 14\n#define IL49_RX_PHY_FLAGS_ANTENNAE_OFFSET\t(4)\n#define IL49_RX_PHY_FLAGS_ANTENNAE_MASK\t(0x70)\n#define IL49_AGC_DB_MASK\t\t\t(0x3f80)\t \n#define IL49_AGC_DB_POS\t\t\t(7)\nstruct il4965_rx_non_cfg_phy {\n\t__le16 ant_selection;\t \n\t__le16 agc_info;\t \n\tu8 rssi_info[6];\t \n\tu8 pad[];\n} __packed;\n\n \nstruct il_rx_phy_res {\n\tu8 non_cfg_phy_cnt;\t \n\tu8 cfg_phy_cnt;\t\t \n\tu8 stat_id;\t\t \n\tu8 reserved1;\n\t__le64 timestamp;\t \n\t__le32 beacon_time_stamp;\t \n\t__le16 phy_flags;\t \n\t__le16 channel;\t\t \n\tu8 non_cfg_phy_buf[32];\t \n\t__le32 rate_n_flags;\t \n\t__le16 byte_count;\t \n\t__le16 frame_time;\t \n} __packed;\n\nstruct il_rx_mpdu_res_start {\n\t__le16 byte_count;\n\t__le16 reserved;\n} __packed;\n\n \n\n \n\n \n#define TX_CMD_FLG_RTS_MSK cpu_to_le32(1 << 1)\n\n \n#define TX_CMD_FLG_CTS_MSK cpu_to_le32(1 << 2)\n\n \n#define TX_CMD_FLG_ACK_MSK cpu_to_le32(1 << 3)\n\n \n#define TX_CMD_FLG_STA_RATE_MSK cpu_to_le32(1 << 4)\n\n \n#define TX_CMD_FLG_IMM_BA_RSP_MASK  cpu_to_le32(1 << 6)\n\n \n#define TX_CMD_FLG_FULL_TXOP_PROT_MSK cpu_to_le32(1 << 7)\n\n \n#define TX_CMD_FLG_ANT_SEL_MSK cpu_to_le32(0xf00)\n#define TX_CMD_FLG_ANT_A_MSK cpu_to_le32(1 << 8)\n#define TX_CMD_FLG_ANT_B_MSK cpu_to_le32(1 << 9)\n\n \n#define TX_CMD_FLG_SEQ_CTL_MSK cpu_to_le32(1 << 13)\n\n \n#define TX_CMD_FLG_MORE_FRAG_MSK cpu_to_le32(1 << 14)\n\n \n#define TX_CMD_FLG_TSF_MSK cpu_to_le32(1 << 16)\n\n \n#define TX_CMD_FLG_MH_PAD_MSK cpu_to_le32(1 << 20)\n\n \n#define TX_CMD_FLG_AGG_CCMP_MSK cpu_to_le32(1 << 22)\n\n \n#define TX_CMD_FLG_DUR_MSK cpu_to_le32(1 << 25)\n\n \n#define TX_CMD_SEC_WEP\t\t0x01\n#define TX_CMD_SEC_CCM\t\t0x02\n#define TX_CMD_SEC_TKIP\t\t0x03\n#define TX_CMD_SEC_MSK\t\t0x03\n#define TX_CMD_SEC_SHIFT\t6\n#define TX_CMD_SEC_KEY128\t0x08\n\n \n\nstruct il3945_tx_cmd {\n\t \n\t__le16 len;\n\n\t \n\t__le16 next_frame_len;\n\n\t__le32 tx_flags;\t \n\n\tu8 rate;\n\n\t \n\tu8 sta_id;\n\tu8 tid_tspec;\n\tu8 sec_ctl;\n\tu8 key[16];\n\tunion {\n\t\tu8 byte[8];\n\t\t__le16 word[4];\n\t\t__le32 dw[2];\n\t} tkip_mic;\n\t__le32 next_frame_info;\n\tunion {\n\t\t__le32 life_time;\n\t\t__le32 attempt;\n\t} stop_time;\n\tu8 supp_rates[2];\n\tu8 rts_retry_limit;\t \n\tu8 data_retry_limit;\t \n\tunion {\n\t\t__le16 pm_frame_timeout;\n\t\t__le16 attempt_duration;\n\t} timeout;\n\n\t \n\t__le16 driver_txop;\n\n\t \n\tunion {\n\t\tDECLARE_FLEX_ARRAY(u8, payload);\n\t\tDECLARE_FLEX_ARRAY(struct ieee80211_hdr, hdr);\n\t};\n} __packed;\n\n \nstruct il3945_tx_resp {\n\tu8 failure_rts;\n\tu8 failure_frame;\n\tu8 bt_kill_count;\n\tu8 rate;\n\t__le32 wireless_media_time;\n\t__le32 status;\t\t \n} __packed;\n\n \nstruct il_dram_scratch {\n\tu8 try_cnt;\t\t \n\tu8 bt_kill_cnt;\t\t \n\t__le16 reserved;\n} __packed;\n\nstruct il_tx_cmd {\n\t \n\t__le16 len;\n\n\t \n\t__le16 next_frame_len;\n\n\t__le32 tx_flags;\t \n\n\t \n\tstruct il_dram_scratch scratch;\n\n\t \n\t__le32 rate_n_flags;\t \n\n\t \n\tu8 sta_id;\n\n\t \n\tu8 sec_ctl;\t\t \n\n\t \n\tu8 initial_rate_idx;\n\tu8 reserved;\n\tu8 key[16];\n\t__le16 next_frame_flags;\n\t__le16 reserved2;\n\tunion {\n\t\t__le32 life_time;\n\t\t__le32 attempt;\n\t} stop_time;\n\n\t \n\t__le32 dram_lsb_ptr;\n\tu8 dram_msb_ptr;\n\n\tu8 rts_retry_limit;\t \n\tu8 data_retry_limit;\t \n\tu8 tid_tspec;\n\tunion {\n\t\t__le16 pm_frame_timeout;\n\t\t__le16 attempt_duration;\n\t} timeout;\n\n\t \n\t__le16 driver_txop;\n\n\t \n\tu8 payload[0];\n\tstruct ieee80211_hdr hdr[];\n} __packed;\n\n \nenum {\n\tTX_3945_STATUS_SUCCESS = 0x01,\n\tTX_3945_STATUS_DIRECT_DONE = 0x02,\n\tTX_3945_STATUS_FAIL_SHORT_LIMIT = 0x82,\n\tTX_3945_STATUS_FAIL_LONG_LIMIT = 0x83,\n\tTX_3945_STATUS_FAIL_FIFO_UNDERRUN = 0x84,\n\tTX_3945_STATUS_FAIL_MGMNT_ABORT = 0x85,\n\tTX_3945_STATUS_FAIL_NEXT_FRAG = 0x86,\n\tTX_3945_STATUS_FAIL_LIFE_EXPIRE = 0x87,\n\tTX_3945_STATUS_FAIL_DEST_PS = 0x88,\n\tTX_3945_STATUS_FAIL_ABORTED = 0x89,\n\tTX_3945_STATUS_FAIL_BT_RETRY = 0x8a,\n\tTX_3945_STATUS_FAIL_STA_INVALID = 0x8b,\n\tTX_3945_STATUS_FAIL_FRAG_DROPPED = 0x8c,\n\tTX_3945_STATUS_FAIL_TID_DISABLE = 0x8d,\n\tTX_3945_STATUS_FAIL_FRAME_FLUSHED = 0x8e,\n\tTX_3945_STATUS_FAIL_INSUFFICIENT_CF_POLL = 0x8f,\n\tTX_3945_STATUS_FAIL_TX_LOCKED = 0x90,\n\tTX_3945_STATUS_FAIL_NO_BEACON_ON_RADAR = 0x91,\n};\n\n \nenum {\n\tTX_STATUS_SUCCESS = 0x01,\n\tTX_STATUS_DIRECT_DONE = 0x02,\n\t \n\tTX_STATUS_POSTPONE_DELAY = 0x40,\n\tTX_STATUS_POSTPONE_FEW_BYTES = 0x41,\n\tTX_STATUS_POSTPONE_QUIET_PERIOD = 0x43,\n\tTX_STATUS_POSTPONE_CALC_TTAK = 0x44,\n\t \n\tTX_STATUS_FAIL_INTERNAL_CROSSED_RETRY = 0x81,\n\tTX_STATUS_FAIL_SHORT_LIMIT = 0x82,\n\tTX_STATUS_FAIL_LONG_LIMIT = 0x83,\n\tTX_STATUS_FAIL_FIFO_UNDERRUN = 0x84,\n\tTX_STATUS_FAIL_DRAIN_FLOW = 0x85,\n\tTX_STATUS_FAIL_RFKILL_FLUSH = 0x86,\n\tTX_STATUS_FAIL_LIFE_EXPIRE = 0x87,\n\tTX_STATUS_FAIL_DEST_PS = 0x88,\n\tTX_STATUS_FAIL_HOST_ABORTED = 0x89,\n\tTX_STATUS_FAIL_BT_RETRY = 0x8a,\n\tTX_STATUS_FAIL_STA_INVALID = 0x8b,\n\tTX_STATUS_FAIL_FRAG_DROPPED = 0x8c,\n\tTX_STATUS_FAIL_TID_DISABLE = 0x8d,\n\tTX_STATUS_FAIL_FIFO_FLUSHED = 0x8e,\n\tTX_STATUS_FAIL_INSUFFICIENT_CF_POLL = 0x8f,\n\tTX_STATUS_FAIL_PASSIVE_NO_RX = 0x90,\n\tTX_STATUS_FAIL_NO_BEACON_ON_RADAR = 0x91,\n};\n\n#define\tTX_PACKET_MODE_REGULAR\t\t0x0000\n#define\tTX_PACKET_MODE_BURST_SEQ\t0x0100\n#define\tTX_PACKET_MODE_BURST_FIRST\t0x0200\n\nenum {\n\tTX_POWER_PA_NOT_ACTIVE = 0x0,\n};\n\nenum {\n\tTX_STATUS_MSK = 0x000000ff,\t \n\tTX_STATUS_DELAY_MSK = 0x00000040,\n\tTX_STATUS_ABORT_MSK = 0x00000080,\n\tTX_PACKET_MODE_MSK = 0x0000ff00,\t \n\tTX_FIFO_NUMBER_MSK = 0x00070000,\t \n\tTX_RESERVED = 0x00780000,\t \n\tTX_POWER_PA_DETECT_MSK = 0x7f800000,\t \n\tTX_ABORT_REQUIRED_MSK = 0x80000000,\t \n};\n\n \n\nenum {\n\tAGG_TX_STATE_TRANSMITTED = 0x00,\n\tAGG_TX_STATE_UNDERRUN_MSK = 0x01,\n\tAGG_TX_STATE_FEW_BYTES_MSK = 0x04,\n\tAGG_TX_STATE_ABORT_MSK = 0x08,\n\tAGG_TX_STATE_LAST_SENT_TTL_MSK = 0x10,\n\tAGG_TX_STATE_LAST_SENT_TRY_CNT_MSK = 0x20,\n\tAGG_TX_STATE_SCD_QUERY_MSK = 0x80,\n\tAGG_TX_STATE_TEST_BAD_CRC32_MSK = 0x100,\n\tAGG_TX_STATE_RESPONSE_MSK = 0x1ff,\n\tAGG_TX_STATE_DUMP_TX_MSK = 0x200,\n\tAGG_TX_STATE_DELAY_TX_MSK = 0x400\n};\n\n#define AGG_TX_STATUS_MSK\t0x00000fff\t \n#define AGG_TX_TRY_MSK\t\t0x0000f000\t \n\n#define AGG_TX_STATE_LAST_SENT_MSK  (AGG_TX_STATE_LAST_SENT_TTL_MSK | \\\n\t\t\t\t     AGG_TX_STATE_LAST_SENT_TRY_CNT_MSK)\n\n \n#define AGG_TX_STATE_TRY_CNT_POS 12\n#define AGG_TX_STATE_TRY_CNT_MSK 0xf000\n\n \n#define AGG_TX_STATE_SEQ_NUM_POS 16\n#define AGG_TX_STATE_SEQ_NUM_MSK 0xffff0000\n\n \nstruct agg_tx_status {\n\t__le16 status;\n\t__le16 sequence;\n} __packed;\n\nstruct il4965_tx_resp {\n\tu8 frame_count;\t\t \n\tu8 bt_kill_count;\t \n\tu8 failure_rts;\t\t \n\tu8 failure_frame;\t \n\n\t \n\t__le32 rate_n_flags;\t \n\n\t \n\t__le16 wireless_media_time;\t \n\n\t__le16 reserved;\n\t__le32 pa_power1;\t \n\t__le32 pa_power2;\n\n\t \n\tunion {\n\t\t__le32 status;\n\t\tDECLARE_FLEX_ARRAY(struct agg_tx_status, agg_status);\t \n\t} u;\n} __packed;\n\n \nstruct il_compressed_ba_resp {\n\t__le32 sta_addr_lo32;\n\t__le16 sta_addr_hi16;\n\t__le16 reserved;\n\n\t \n\tu8 sta_id;\n\tu8 tid;\n\t__le16 seq_ctl;\n\t__le64 bitmap;\n\t__le16 scd_flow;\n\t__le16 scd_ssn;\n} __packed;\n\n \n\nstruct il3945_txpowertable_cmd {\n\tu8 band;\t\t \n\tu8 reserved;\n\t__le16 channel;\n\tstruct il3945_power_per_rate power[IL_MAX_RATES];\n} __packed;\n\nstruct il4965_txpowertable_cmd {\n\tu8 band;\t\t \n\tu8 reserved;\n\t__le16 channel;\n\tstruct il4965_tx_power_db tx_power;\n} __packed;\n\n \nstruct il3945_rate_scaling_info {\n\t__le16 rate_n_flags;\n\tu8 try_cnt;\n\tu8 next_rate_idx;\n} __packed;\n\nstruct il3945_rate_scaling_cmd {\n\tu8 table_id;\n\tu8 reserved[3];\n\tstruct il3945_rate_scaling_info table[IL_MAX_RATES];\n} __packed;\n\n \n#define  LINK_QUAL_FLAGS_SET_STA_TLC_RTS_MSK\t(1 << 0)\n\n \n#define  LINK_QUAL_AC_NUM AC_NUM\n\n \n#define  LINK_QUAL_MAX_RETRY_NUM 16\n\n \n#define  LINK_QUAL_ANT_A_MSK (1 << 0)\n#define  LINK_QUAL_ANT_B_MSK (1 << 1)\n#define  LINK_QUAL_ANT_MSK   (LINK_QUAL_ANT_A_MSK|LINK_QUAL_ANT_B_MSK)\n\n \nstruct il_link_qual_general_params {\n\tu8 flags;\n\n\t \n\tu8 mimo_delimiter;\n\n\t \n\tu8 single_stream_ant_msk;\t \n\n\t \n\tu8 dual_stream_ant_msk;\t \n\n\t \n\tu8 start_rate_idx[LINK_QUAL_AC_NUM];\n} __packed;\n\n#define LINK_QUAL_AGG_TIME_LIMIT_DEF\t(4000)\t \n#define LINK_QUAL_AGG_TIME_LIMIT_MAX\t(8000)\n#define LINK_QUAL_AGG_TIME_LIMIT_MIN\t(100)\n\n#define LINK_QUAL_AGG_DISABLE_START_DEF\t(3)\n#define LINK_QUAL_AGG_DISABLE_START_MAX\t(255)\n#define LINK_QUAL_AGG_DISABLE_START_MIN\t(0)\n\n#define LINK_QUAL_AGG_FRAME_LIMIT_DEF\t(31)\n#define LINK_QUAL_AGG_FRAME_LIMIT_MAX\t(63)\n#define LINK_QUAL_AGG_FRAME_LIMIT_MIN\t(0)\n\n \nstruct il_link_qual_agg_params {\n\n\t \n\t__le16 agg_time_limit;\n\n\t \n\tu8 agg_dis_start_th;\n\n\t \n\tu8 agg_frame_cnt_limit;\n\n\t__le32 reserved;\n} __packed;\n\n \nstruct il_link_quality_cmd {\n\n\t \n\tu8 sta_id;\n\tu8 reserved1;\n\t__le16 control;\t\t \n\tstruct il_link_qual_general_params general_params;\n\tstruct il_link_qual_agg_params agg_params;\n\n\t \n\tstruct {\n\t\t__le32 rate_n_flags;\t \n\t} rs_table[LINK_QUAL_MAX_RETRY_NUM];\n\t__le32 reserved2;\n} __packed;\n\n \n#define BT_COEX_DISABLE (0x0)\n#define BT_ENABLE_CHANNEL_ANNOUNCE BIT(0)\n#define BT_ENABLE_PRIORITY\t   BIT(1)\n\n#define BT_COEX_ENABLE  (BT_ENABLE_CHANNEL_ANNOUNCE | BT_ENABLE_PRIORITY)\n\n#define BT_LEAD_TIME_DEF (0x1E)\n\n#define BT_MAX_KILL_DEF (0x5)\n\n \nstruct il_bt_cmd {\n\tu8 flags;\n\tu8 lead_time;\n\tu8 max_kill;\n\tu8 reserved;\n\t__le32 kill_ack_mask;\n\t__le32 kill_cts_mask;\n} __packed;\n\n \n\n \n#define MEASUREMENT_FILTER_FLAG (RXON_FILTER_PROMISC_MSK         | \\\n\t\t\t\t RXON_FILTER_CTL2HOST_MSK        | \\\n\t\t\t\t RXON_FILTER_ACCEPT_GRP_MSK      | \\\n\t\t\t\t RXON_FILTER_DIS_DECRYPT_MSK     | \\\n\t\t\t\t RXON_FILTER_DIS_GRP_DECRYPT_MSK | \\\n\t\t\t\t RXON_FILTER_ASSOC_MSK           | \\\n\t\t\t\t RXON_FILTER_BCON_AWARE_MSK)\n\nstruct il_measure_channel {\n\t__le32 duration;\t \n\tu8 channel;\t\t \n\tu8 type;\t\t \n\t__le16 reserved;\n} __packed;\n\n \nstruct il_spectrum_cmd {\n\t__le16 len;\t\t \n\tu8 token;\t\t \n\tu8 id;\t\t\t \n\tu8 origin;\t\t \n\tu8 periodic;\t\t \n\t__le16 path_loss_timeout;\n\t__le32 start_time;\t \n\t__le32 reserved2;\n\t__le32 flags;\t\t \n\t__le32 filter_flags;\t \n\t__le16 channel_count;\t \n\t__le16 reserved3;\n\tstruct il_measure_channel channels[10];\n} __packed;\n\n \nstruct il_spectrum_resp {\n\tu8 token;\n\tu8 id;\t\t\t \n\t__le16 status;\t\t \n} __packed;\n\nenum il_measurement_state {\n\tIL_MEASUREMENT_START = 0,\n\tIL_MEASUREMENT_STOP = 1,\n};\n\nenum il_measurement_status {\n\tIL_MEASUREMENT_OK = 0,\n\tIL_MEASUREMENT_CONCURRENT = 1,\n\tIL_MEASUREMENT_CSA_CONFLICT = 2,\n\tIL_MEASUREMENT_TGH_CONFLICT = 3,\n\t \n\tIL_MEASUREMENT_STOPPED = 6,\n\tIL_MEASUREMENT_TIMEOUT = 7,\n\tIL_MEASUREMENT_PERIODIC_FAILED = 8,\n};\n\n#define NUM_ELEMENTS_IN_HISTOGRAM 8\n\nstruct il_measurement_histogram {\n\t__le32 ofdm[NUM_ELEMENTS_IN_HISTOGRAM];\t \n\t__le32 cck[NUM_ELEMENTS_IN_HISTOGRAM];\t \n} __packed;\n\n \nstruct il_measurement_cca_counters {\n\t__le32 ofdm;\n\t__le32 cck;\n} __packed;\n\nenum il_measure_type {\n\tIL_MEASURE_BASIC = (1 << 0),\n\tIL_MEASURE_CHANNEL_LOAD = (1 << 1),\n\tIL_MEASURE_HISTOGRAM_RPI = (1 << 2),\n\tIL_MEASURE_HISTOGRAM_NOISE = (1 << 3),\n\tIL_MEASURE_FRAME = (1 << 4),\n\t \n\tIL_MEASURE_IDLE = (1 << 7),\n};\n\n \nstruct il_spectrum_notification {\n\tu8 id;\t\t\t \n\tu8 token;\n\tu8 channel_idx;\t\t \n\tu8 state;\t\t \n\t__le32 start_time;\t \n\tu8 band;\t\t \n\tu8 channel;\n\tu8 type;\t\t \n\tu8 reserved1;\n\t \n\t__le32 cca_ofdm;\t \n\t__le32 cca_cck;\t\t \n\t__le32 cca_time;\t \n\tu8 basic_type;\t\t \n\tu8 reserved2[3];\n\tstruct il_measurement_histogram histogram;\n\t__le32 stop_time;\t \n\t__le32 status;\t\t \n} __packed;\n\n \n\n \n#define IL_POWER_VEC_SIZE 5\n\n#define IL_POWER_DRIVER_ALLOW_SLEEP_MSK\t\tcpu_to_le16(BIT(0))\n#define IL_POWER_SLEEP_OVER_DTIM_MSK\t\tcpu_to_le16(BIT(2))\n#define IL_POWER_PCI_PM_MSK\t\t\tcpu_to_le16(BIT(3))\n\nstruct il3945_powertable_cmd {\n\t__le16 flags;\n\tu8 reserved[2];\n\t__le32 rx_data_timeout;\n\t__le32 tx_data_timeout;\n\t__le32 sleep_interval[IL_POWER_VEC_SIZE];\n} __packed;\n\nstruct il_powertable_cmd {\n\t__le16 flags;\n\tu8 keep_alive_seconds;\t \n\tu8 debug_flags;\t\t \n\t__le32 rx_data_timeout;\n\t__le32 tx_data_timeout;\n\t__le32 sleep_interval[IL_POWER_VEC_SIZE];\n\t__le32 keep_alive_beacons;\n} __packed;\n\n \nstruct il_sleep_notification {\n\tu8 pm_sleep_mode;\n\tu8 pm_wakeup_src;\n\t__le16 reserved;\n\t__le32 sleep_time;\n\t__le32 tsf_low;\n\t__le32 bcon_timer;\n} __packed;\n\n \nenum {\n\tIL_PM_NO_SLEEP = 0,\n\tIL_PM_SLP_MAC = 1,\n\tIL_PM_SLP_FULL_MAC_UNASSOCIATE = 2,\n\tIL_PM_SLP_FULL_MAC_CARD_STATE = 3,\n\tIL_PM_SLP_PHY = 4,\n\tIL_PM_SLP_REPENT = 5,\n\tIL_PM_WAKEUP_BY_TIMER = 6,\n\tIL_PM_WAKEUP_BY_DRIVER = 7,\n\tIL_PM_WAKEUP_BY_RFKILL = 8,\n\t \n\tIL_PM_NUM_OF_MODES = 12,\n};\n\n \nstruct il_card_state_notif {\n\t__le32 flags;\n} __packed;\n\n#define HW_CARD_DISABLED   0x01\n#define SW_CARD_DISABLED   0x02\n#define CT_CARD_DISABLED   0x04\n#define RXON_CARD_DISABLED 0x10\n\nstruct il_ct_kill_config {\n\t__le32 reserved;\n\t__le32 critical_temperature_M;\n\t__le32 critical_temperature_R;\n} __packed;\n\n \n\n#define SCAN_CHANNEL_TYPE_PASSIVE cpu_to_le32(0)\n#define SCAN_CHANNEL_TYPE_ACTIVE  cpu_to_le32(1)\n\n \nstruct il3945_scan_channel {\n\t \n\tu8 type;\n\tu8 channel;\t\t \n\tstruct il3945_tx_power tpc;\n\t__le16 active_dwell;\t \n\t__le16 passive_dwell;\t \n} __packed;\n\n \n#define IL39_SCAN_PROBE_MASK(n) ((BIT(n) | (BIT(n) - BIT(1))))\n\nstruct il_scan_channel {\n\t \n\t__le32 type;\n\t__le16 channel;\t\t \n\tu8 tx_gain;\t\t \n\tu8 dsp_atten;\t\t \n\t__le16 active_dwell;\t \n\t__le16 passive_dwell;\t \n} __packed;\n\n \n#define IL_SCAN_PROBE_MASK(n)\tcpu_to_le32((BIT(n) | (BIT(n) - BIT(1))))\n\n \nstruct il_ssid_ie {\n\tu8 id;\n\tu8 len;\n\tu8 ssid[32];\n} __packed;\n\n#define PROBE_OPTION_MAX_3945\t\t4\n#define PROBE_OPTION_MAX\t\t20\n#define TX_CMD_LIFE_TIME_INFINITE\tcpu_to_le32(0xFFFFFFFF)\n#define IL_GOOD_CRC_TH_DISABLED\t0\n#define IL_GOOD_CRC_TH_DEFAULT\t\tcpu_to_le16(1)\n#define IL_GOOD_CRC_TH_NEVER\t\tcpu_to_le16(0xffff)\n#define IL_MAX_SCAN_SIZE 1024\n#define IL_MAX_CMD_SIZE 4096\n\n \n\nstruct il3945_scan_cmd {\n\t__le16 len;\n\tu8 reserved0;\n\tu8 channel_count;\t \n\t__le16 quiet_time;\t \n\t__le16 quiet_plcp_th;\t \n\t__le16 good_CRC_th;\t \n\t__le16 reserved1;\n\t__le32 max_out_time;\t \n\t__le32 suspend_time;\t \n\t__le32 flags;\t\t \n\t__le32 filter_flags;\t \n\n\t \n\tstruct il3945_tx_cmd tx_cmd;\n\n\t \n\tstruct il_ssid_ie direct_scan[PROBE_OPTION_MAX_3945];\n\n\t \n\tu8 data[];\n} __packed;\n\nstruct il_scan_cmd {\n\t__le16 len;\n\tu8 reserved0;\n\tu8 channel_count;\t \n\t__le16 quiet_time;\t \n\t__le16 quiet_plcp_th;\t \n\t__le16 good_CRC_th;\t \n\t__le16 rx_chain;\t \n\t__le32 max_out_time;\t \n\t__le32 suspend_time;\t \n\t__le32 flags;\t\t \n\t__le32 filter_flags;\t \n\n\t \n\tstruct il_tx_cmd tx_cmd;\n\n\t \n\tstruct il_ssid_ie direct_scan[PROBE_OPTION_MAX];\n\n\t \n\tu8 data[];\n} __packed;\n\n \n#define CAN_ABORT_STATUS\tcpu_to_le32(0x1)\n \n#define ABORT_STATUS            0x2\n\n \nstruct il_scanreq_notification {\n\t__le32 status;\t\t \n} __packed;\n\n \nstruct il_scanstart_notification {\n\t__le32 tsf_low;\n\t__le32 tsf_high;\n\t__le32 beacon_timer;\n\tu8 channel;\n\tu8 band;\n\tu8 reserved[2];\n\t__le32 status;\n} __packed;\n\n#define  SCAN_OWNER_STATUS 0x1\n#define  MEASURE_OWNER_STATUS 0x2\n\n#define IL_PROBE_STATUS_OK\t\t0\n#define IL_PROBE_STATUS_TX_FAILED\tBIT(0)\n \n#define IL_PROBE_STATUS_FAIL_TTL\tBIT(1)\n#define IL_PROBE_STATUS_FAIL_BT\tBIT(2)\n\n#define NUMBER_OF_STATS 1\t \n \nstruct il_scanresults_notification {\n\tu8 channel;\n\tu8 band;\n\tu8 probe_status;\n\tu8 num_probe_not_sent;\t \n\t__le32 tsf_low;\n\t__le32 tsf_high;\n\t__le32 stats[NUMBER_OF_STATS];\n} __packed;\n\n \nstruct il_scancomplete_notification {\n\tu8 scanned_channels;\n\tu8 status;\n\tu8 last_channel;\n\t__le32 tsf_low;\n\t__le32 tsf_high;\n} __packed;\n\n \n\nenum il_ibss_manager {\n\tIL_NOT_IBSS_MANAGER = 0,\n\tIL_IBSS_MANAGER = 1,\n};\n\n \n\nstruct il3945_beacon_notif {\n\tstruct il3945_tx_resp beacon_notify_hdr;\n\t__le32 low_tsf;\n\t__le32 high_tsf;\n\t__le32 ibss_mgr_status;\n} __packed;\n\nstruct il4965_beacon_notif {\n\tstruct il4965_tx_resp beacon_notify_hdr;\n\t__le32 low_tsf;\n\t__le32 high_tsf;\n\t__le32 ibss_mgr_status;\n} __packed;\n\n \n\nstruct il3945_tx_beacon_cmd {\n\tstruct il3945_tx_cmd tx;\n\t__le16 tim_idx;\n\tu8 tim_size;\n\tu8 reserved1;\n\tstruct ieee80211_hdr frame[];\t \n} __packed;\n\nstruct il_tx_beacon_cmd {\n\tstruct il_tx_cmd tx;\n\t__le16 tim_idx;\n\tu8 tim_size;\n\tu8 reserved1;\n\tstruct ieee80211_hdr frame[];\t \n} __packed;\n\n \n\n#define IL_TEMP_CONVERT 260\n\n#define SUP_RATE_11A_MAX_NUM_CHANNELS  8\n#define SUP_RATE_11B_MAX_NUM_CHANNELS  4\n#define SUP_RATE_11G_MAX_NUM_CHANNELS  12\n\n \nstruct rate_histogram {\n\tunion {\n\t\t__le32 a[SUP_RATE_11A_MAX_NUM_CHANNELS];\n\t\t__le32 b[SUP_RATE_11B_MAX_NUM_CHANNELS];\n\t\t__le32 g[SUP_RATE_11G_MAX_NUM_CHANNELS];\n\t} success;\n\tunion {\n\t\t__le32 a[SUP_RATE_11A_MAX_NUM_CHANNELS];\n\t\t__le32 b[SUP_RATE_11B_MAX_NUM_CHANNELS];\n\t\t__le32 g[SUP_RATE_11G_MAX_NUM_CHANNELS];\n\t} failed;\n} __packed;\n\n \n\nstruct iwl39_stats_rx_phy {\n\t__le32 ina_cnt;\n\t__le32 fina_cnt;\n\t__le32 plcp_err;\n\t__le32 crc32_err;\n\t__le32 overrun_err;\n\t__le32 early_overrun_err;\n\t__le32 crc32_good;\n\t__le32 false_alarm_cnt;\n\t__le32 fina_sync_err_cnt;\n\t__le32 sfd_timeout;\n\t__le32 fina_timeout;\n\t__le32 unresponded_rts;\n\t__le32 rxe_frame_limit_overrun;\n\t__le32 sent_ack_cnt;\n\t__le32 sent_cts_cnt;\n} __packed;\n\nstruct iwl39_stats_rx_non_phy {\n\t__le32 bogus_cts;\t \n\t__le32 bogus_ack;\t \n\t__le32 non_bssid_frames;\t \n\t__le32 filtered_frames;\t \n\t__le32 non_channel_beacons;\t \n} __packed;\n\nstruct iwl39_stats_rx {\n\tstruct iwl39_stats_rx_phy ofdm;\n\tstruct iwl39_stats_rx_phy cck;\n\tstruct iwl39_stats_rx_non_phy general;\n} __packed;\n\nstruct iwl39_stats_tx {\n\t__le32 preamble_cnt;\n\t__le32 rx_detected_cnt;\n\t__le32 bt_prio_defer_cnt;\n\t__le32 bt_prio_kill_cnt;\n\t__le32 few_bytes_cnt;\n\t__le32 cts_timeout;\n\t__le32 ack_timeout;\n\t__le32 expected_ack_cnt;\n\t__le32 actual_ack_cnt;\n} __packed;\n\nstruct stats_dbg {\n\t__le32 burst_check;\n\t__le32 burst_count;\n\t__le32 wait_for_silence_timeout_cnt;\n\t__le32 reserved[3];\n} __packed;\n\nstruct iwl39_stats_div {\n\t__le32 tx_on_a;\n\t__le32 tx_on_b;\n\t__le32 exec_time;\n\t__le32 probe_time;\n} __packed;\n\nstruct iwl39_stats_general {\n\t__le32 temperature;\n\tstruct stats_dbg dbg;\n\t__le32 sleep_time;\n\t__le32 slots_out;\n\t__le32 slots_idle;\n\t__le32 ttl_timestamp;\n\tstruct iwl39_stats_div div;\n} __packed;\n\nstruct stats_rx_phy {\n\t__le32 ina_cnt;\n\t__le32 fina_cnt;\n\t__le32 plcp_err;\n\t__le32 crc32_err;\n\t__le32 overrun_err;\n\t__le32 early_overrun_err;\n\t__le32 crc32_good;\n\t__le32 false_alarm_cnt;\n\t__le32 fina_sync_err_cnt;\n\t__le32 sfd_timeout;\n\t__le32 fina_timeout;\n\t__le32 unresponded_rts;\n\t__le32 rxe_frame_limit_overrun;\n\t__le32 sent_ack_cnt;\n\t__le32 sent_cts_cnt;\n\t__le32 sent_ba_rsp_cnt;\n\t__le32 dsp_self_kill;\n\t__le32 mh_format_err;\n\t__le32 re_acq_main_rssi_sum;\n\t__le32 reserved3;\n} __packed;\n\nstruct stats_rx_ht_phy {\n\t__le32 plcp_err;\n\t__le32 overrun_err;\n\t__le32 early_overrun_err;\n\t__le32 crc32_good;\n\t__le32 crc32_err;\n\t__le32 mh_format_err;\n\t__le32 agg_crc32_good;\n\t__le32 agg_mpdu_cnt;\n\t__le32 agg_cnt;\n\t__le32 unsupport_mcs;\n} __packed;\n\n#define INTERFERENCE_DATA_AVAILABLE      cpu_to_le32(1)\n\nstruct stats_rx_non_phy {\n\t__le32 bogus_cts;\t \n\t__le32 bogus_ack;\t \n\t__le32 non_bssid_frames;\t \n\t__le32 filtered_frames;\t \n\t__le32 non_channel_beacons;\t \n\t__le32 channel_beacons;\t \n\t__le32 num_missed_bcon;\t \n\t__le32 adc_rx_saturation_time;\t \n\t__le32 ina_detection_search_time;\t \n\t__le32 beacon_silence_rssi_a;\t \n\t__le32 beacon_silence_rssi_b;\t \n\t__le32 beacon_silence_rssi_c;\t \n\t__le32 interference_data_flag;\t \n\t__le32 channel_load;\t \n\t__le32 dsp_false_alarms;\t \n\t__le32 beacon_rssi_a;\n\t__le32 beacon_rssi_b;\n\t__le32 beacon_rssi_c;\n\t__le32 beacon_energy_a;\n\t__le32 beacon_energy_b;\n\t__le32 beacon_energy_c;\n} __packed;\n\nstruct stats_rx {\n\tstruct stats_rx_phy ofdm;\n\tstruct stats_rx_phy cck;\n\tstruct stats_rx_non_phy general;\n\tstruct stats_rx_ht_phy ofdm_ht;\n} __packed;\n\n \nstruct stats_tx_power {\n\tu8 ant_a;\n\tu8 ant_b;\n\tu8 ant_c;\n\tu8 reserved;\n} __packed;\n\nstruct stats_tx_non_phy_agg {\n\t__le32 ba_timeout;\n\t__le32 ba_reschedule_frames;\n\t__le32 scd_query_agg_frame_cnt;\n\t__le32 scd_query_no_agg;\n\t__le32 scd_query_agg;\n\t__le32 scd_query_mismatch;\n\t__le32 frame_not_ready;\n\t__le32 underrun;\n\t__le32 bt_prio_kill;\n\t__le32 rx_ba_rsp_cnt;\n} __packed;\n\nstruct stats_tx {\n\t__le32 preamble_cnt;\n\t__le32 rx_detected_cnt;\n\t__le32 bt_prio_defer_cnt;\n\t__le32 bt_prio_kill_cnt;\n\t__le32 few_bytes_cnt;\n\t__le32 cts_timeout;\n\t__le32 ack_timeout;\n\t__le32 expected_ack_cnt;\n\t__le32 actual_ack_cnt;\n\t__le32 dump_msdu_cnt;\n\t__le32 burst_abort_next_frame_mismatch_cnt;\n\t__le32 burst_abort_missing_next_frame_cnt;\n\t__le32 cts_timeout_collision;\n\t__le32 ack_or_ba_timeout_collision;\n\tstruct stats_tx_non_phy_agg agg;\n\n\t__le32 reserved1;\n} __packed;\n\nstruct stats_div {\n\t__le32 tx_on_a;\n\t__le32 tx_on_b;\n\t__le32 exec_time;\n\t__le32 probe_time;\n\t__le32 reserved1;\n\t__le32 reserved2;\n} __packed;\n\nstruct stats_general_common {\n\t__le32 temperature;\t \n\tstruct stats_dbg dbg;\n\t__le32 sleep_time;\n\t__le32 slots_out;\n\t__le32 slots_idle;\n\t__le32 ttl_timestamp;\n\tstruct stats_div div;\n\t__le32 rx_enable_counter;\n\t \n\t__le32 num_of_sos_states;\n} __packed;\n\nstruct stats_general {\n\tstruct stats_general_common common;\n\t__le32 reserved2;\n\t__le32 reserved3;\n} __packed;\n\n#define UCODE_STATS_CLEAR_MSK\t\t(0x1 << 0)\n#define UCODE_STATS_FREQUENCY_MSK\t\t(0x1 << 1)\n#define UCODE_STATS_NARROW_BAND_MSK\t(0x1 << 2)\n\n \n#define IL_STATS_CONF_CLEAR_STATS cpu_to_le32(0x1)\t \n#define IL_STATS_CONF_DISABLE_NOTIF cpu_to_le32(0x2)\t \nstruct il_stats_cmd {\n\t__le32 configuration_flags;\t \n} __packed;\n\n \n#define STATS_REPLY_FLG_BAND_24G_MSK         cpu_to_le32(0x2)\n#define STATS_REPLY_FLG_HT40_MODE_MSK        cpu_to_le32(0x8)\n\nstruct il3945_notif_stats {\n\t__le32 flag;\n\tstruct iwl39_stats_rx rx;\n\tstruct iwl39_stats_tx tx;\n\tstruct iwl39_stats_general general;\n} __packed;\n\nstruct il_notif_stats {\n\t__le32 flag;\n\tstruct stats_rx rx;\n\tstruct stats_tx tx;\n\tstruct stats_general general;\n} __packed;\n\n \n\n#define IL_MISSED_BEACON_THRESHOLD_MIN\t(1)\n#define IL_MISSED_BEACON_THRESHOLD_DEF\t(5)\n#define IL_MISSED_BEACON_THRESHOLD_MAX\tIL_MISSED_BEACON_THRESHOLD_DEF\n\nstruct il_missed_beacon_notif {\n\t__le32 consecutive_missed_beacons;\n\t__le32 total_missed_becons;\n\t__le32 num_expected_beacons;\n\t__le32 num_recvd_beacons;\n} __packed;\n\n \n\n \n\n \n#define HD_TBL_SIZE  (11)\t \n#define HD_MIN_ENERGY_CCK_DET_IDX                 (0)\t \n#define HD_MIN_ENERGY_OFDM_DET_IDX                (1)\n#define HD_AUTO_CORR32_X1_TH_ADD_MIN_IDX          (2)\n#define HD_AUTO_CORR32_X1_TH_ADD_MIN_MRC_IDX      (3)\n#define HD_AUTO_CORR40_X4_TH_ADD_MIN_MRC_IDX      (4)\n#define HD_AUTO_CORR32_X4_TH_ADD_MIN_IDX          (5)\n#define HD_AUTO_CORR32_X4_TH_ADD_MIN_MRC_IDX      (6)\n#define HD_BARKER_CORR_TH_ADD_MIN_IDX             (7)\n#define HD_BARKER_CORR_TH_ADD_MIN_MRC_IDX         (8)\n#define HD_AUTO_CORR40_X4_TH_ADD_MIN_IDX          (9)\n#define HD_OFDM_ENERGY_TH_IN_IDX                  (10)\n\n \n#define C_SENSITIVITY_CONTROL_DEFAULT_TBL\tcpu_to_le16(0)\n#define C_SENSITIVITY_CONTROL_WORK_TBL\tcpu_to_le16(1)\n\n \nstruct il_sensitivity_cmd {\n\t__le16 control;\t\t \n\t__le16 table[HD_TBL_SIZE];\t \n} __packed;\n\n \n\n \n \n#define IL_DEFAULT_STANDARD_PHY_CALIBRATE_TBL_SIZE\t18\nenum {\n\tIL_PHY_CALIBRATE_DIFF_GAIN_CMD = 7,\n\tIL_MAX_STANDARD_PHY_CALIBRATE_TBL_SIZE = 19,\n};\n\n#define IL_MAX_PHY_CALIBRATE_TBL_SIZE\t\t(253)\n\nstruct il_calib_hdr {\n\tu8 op_code;\n\tu8 first_group;\n\tu8 groups_num;\n\tu8 data_valid;\n} __packed;\n\n \nstruct il_calib_diff_gain_cmd {\n\tstruct il_calib_hdr hdr;\n\ts8 diff_gain_a;\t\t \n\ts8 diff_gain_b;\n\ts8 diff_gain_c;\n\tu8 reserved1;\n} __packed;\n\n \n\n \nstruct il_led_cmd {\n\t__le32 interval;\t \n\tu8 id;\t\t\t \n\tu8 off;\t\t\t \n\tu8 on;\t\t\t \n\tu8 reserved;\n} __packed;\n\n \n\n#define IL_RX_FRAME_SIZE_MSK\t0x00003fff\n\nstruct il_rx_pkt {\n\t \n\t__le32 len_n_flags;\n\tstruct il_cmd_header hdr;\n\tunion {\n\t\tstruct il3945_rx_frame rx_frame;\n\t\tstruct il3945_tx_resp tx_resp;\n\t\tstruct il3945_beacon_notif beacon_status;\n\n\t\tstruct il_alive_resp alive_frame;\n\t\tstruct il_spectrum_notification spectrum_notif;\n\t\tstruct il_csa_notification csa_notif;\n\t\tstruct il_error_resp err_resp;\n\t\tstruct il_card_state_notif card_state_notif;\n\t\tstruct il_add_sta_resp add_sta;\n\t\tstruct il_rem_sta_resp rem_sta;\n\t\tstruct il_sleep_notification sleep_notif;\n\t\tstruct il_spectrum_resp spectrum;\n\t\tstruct il_notif_stats stats;\n\t\tstruct il_compressed_ba_resp compressed_ba;\n\t\tstruct il_missed_beacon_notif missed_beacon;\n\t\t__le32 status;\n\t\tDECLARE_FLEX_ARRAY(u8, raw);\n\t} u;\n} __packed;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}