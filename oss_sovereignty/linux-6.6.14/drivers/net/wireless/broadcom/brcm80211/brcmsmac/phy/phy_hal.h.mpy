{
  "module_name": "phy_hal.h",
  "hash_id": "c1b707c92ea4bcb3d0e8840cccbd310dd2f8aa6d6db1368ce1ed8f565032b620",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/broadcom/brcm80211/brcmsmac/phy/phy_hal.h",
  "human_readable_source": "\n \n\n \n\n#ifndef _BRCM_PHY_HAL_H_\n#define _BRCM_PHY_HAL_H_\n\n#include <brcmu_utils.h>\n#include <brcmu_wifi.h>\n#include <phy_shim.h>\n\n#define\tIDCODE_VER_MASK\t\t0x0000000f\n#define\tIDCODE_VER_SHIFT\t0\n#define\tIDCODE_MFG_MASK\t\t0x00000fff\n#define\tIDCODE_MFG_SHIFT\t0\n#define\tIDCODE_ID_MASK\t\t0x0ffff000\n#define\tIDCODE_ID_SHIFT\t\t12\n#define\tIDCODE_REV_MASK\t\t0xf0000000\n#define\tIDCODE_REV_SHIFT\t28\n\n#define\tNORADIO_ID\t\t0xe4f5\n#define\tNORADIO_IDCODE\t\t0x4e4f5246\n\n#define BCM2055_ID\t\t0x2055\n#define BCM2055_IDCODE\t\t0x02055000\n#define BCM2055A0_IDCODE\t0x1205517f\n\n#define BCM2056_ID\t\t0x2056\n#define BCM2056_IDCODE\t\t0x02056000\n#define BCM2056A0_IDCODE\t0x1205617f\n\n#define BCM2057_ID\t\t0x2057\n#define BCM2057_IDCODE\t\t0x02057000\n#define BCM2057A0_IDCODE\t0x1205717f\n\n#define BCM2064_ID\t\t0x2064\n#define BCM2064_IDCODE\t\t0x02064000\n#define BCM2064A0_IDCODE\t0x0206417f\n\n#define PHY_TPC_HW_OFF\t\tfalse\n#define PHY_TPC_HW_ON\t\ttrue\n\n#define PHY_PERICAL_DRIVERUP\t1\n#define PHY_PERICAL_WATCHDOG\t2\n#define PHY_PERICAL_PHYINIT\t3\n#define PHY_PERICAL_JOIN_BSS\t4\n#define PHY_PERICAL_START_IBSS\t5\n#define PHY_PERICAL_UP_BSS\t6\n#define PHY_PERICAL_CHAN\t7\n#define PHY_FULLCAL\t8\n\n#define PHY_PERICAL_DISABLE\t0\n#define PHY_PERICAL_SPHASE\t1\n#define PHY_PERICAL_MPHASE\t2\n#define PHY_PERICAL_MANUAL\t3\n\n#define PHY_HOLD_FOR_ASSOC\t1\n#define PHY_HOLD_FOR_SCAN\t2\n#define PHY_HOLD_FOR_RM\t\t4\n#define PHY_HOLD_FOR_PLT\t8\n#define PHY_HOLD_FOR_MUTE\t16\n#define PHY_HOLD_FOR_NOT_ASSOC 0x20\n\n#define PHY_MUTE_FOR_PREISM\t1\n#define PHY_MUTE_ALL\t\t0xffffffff\n\n#define PHY_NOISE_FIXED_VAL\t\t(-95)\n#define PHY_NOISE_FIXED_VAL_NPHY\t(-92)\n#define PHY_NOISE_FIXED_VAL_LCNPHY\t(-92)\n\n#define PHY_MODE_CAL\t\t0x0002\n#define PHY_MODE_NOISEM\t\t0x0004\n\n#define BRCMS_TXPWR_DB_FACTOR\t4\n\n \n#define BRCMS_TXPWR_MAX\t\t(127)\t \n\n#define BRCMS_NUM_RATES_CCK           4\n#define BRCMS_NUM_RATES_OFDM          8\n#define BRCMS_NUM_RATES_MCS_1_STREAM  8\n#define BRCMS_NUM_RATES_MCS_2_STREAM  8\n#define BRCMS_NUM_RATES_MCS_3_STREAM  8\n#define BRCMS_NUM_RATES_MCS_4_STREAM  8\n\n#define\tBRCMS_RSSI_INVALID\t 0\t \n\nstruct d11regs;\nstruct phy_shim_info;\n\nstruct txpwr_limits {\n\tu8 cck[BRCMS_NUM_RATES_CCK];\n\tu8 ofdm[BRCMS_NUM_RATES_OFDM];\n\n\tu8 ofdm_cdd[BRCMS_NUM_RATES_OFDM];\n\n\tu8 ofdm_40_siso[BRCMS_NUM_RATES_OFDM];\n\tu8 ofdm_40_cdd[BRCMS_NUM_RATES_OFDM];\n\n\tu8 mcs_20_siso[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_20_cdd[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_20_stbc[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_20_mimo[BRCMS_NUM_RATES_MCS_2_STREAM];\n\n\tu8 mcs_40_siso[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_40_cdd[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_40_stbc[BRCMS_NUM_RATES_MCS_1_STREAM];\n\tu8 mcs_40_mimo[BRCMS_NUM_RATES_MCS_2_STREAM];\n\tu8 mcs32;\n};\n\nstruct tx_power {\n\tu32 flags;\n\tu16 chanspec;    \n\tu16 local_chanspec;      \n\tu8 local_max;    \n\tu8 local_constraint;     \n\ts8 antgain[2];   \n\tu8 rf_cores;             \n\tu8 est_Pout[4];  \n\tu8 est_Pout_act[4];      \n\tu8 est_Pout_cck;         \n\tu8 tx_power_max[4];      \n\t \n\tu8 tx_power_max_rate_ind[4];\n\t \n\tu8 user_limit[WL_TX_POWER_RATES];\n\t \n\tu8 reg_limit[WL_TX_POWER_RATES];\n\t \n\tu8 board_limit[WL_TX_POWER_RATES];\n\t \n\tu8 target[WL_TX_POWER_RATES];\n};\n\nstruct brcms_chanvec {\n\tu8 vec[MAXCHANNEL / NBBY];\n};\n\nstruct shared_phy_params {\n\tstruct si_pub *sih;\n\tstruct phy_shim_info *physhim;\n\tuint unit;\n\tuint corerev;\n\tu16 vid;\n\tu16 did;\n\tuint chip;\n\tuint chiprev;\n\tuint chippkg;\n\tuint sromrev;\n\tuint boardtype;\n\tuint boardrev;\n\tu32 boardflags;\n\tu32 boardflags2;\n};\n\n\nstruct shared_phy *wlc_phy_shared_attach(struct shared_phy_params *shp);\nstruct brcms_phy_pub *wlc_phy_attach(struct shared_phy *sh,\n\t\t\t\t     struct bcma_device *d11core, int bandtype,\n\t\t\t\t     struct wiphy *wiphy);\nvoid wlc_phy_detach(struct brcms_phy_pub *ppi);\n\nbool wlc_phy_get_phyversion(struct brcms_phy_pub *pih, u16 *phytype,\n\t\t\t    u16 *phyrev, u16 *radioid, u16 *radiover);\nbool wlc_phy_get_encore(struct brcms_phy_pub *pih);\nu32 wlc_phy_get_coreflags(struct brcms_phy_pub *pih);\n\nvoid wlc_phy_hw_clk_state_upd(struct brcms_phy_pub *ppi, bool newstate);\nvoid wlc_phy_hw_state_upd(struct brcms_phy_pub *ppi, bool newstate);\nvoid wlc_phy_init(struct brcms_phy_pub *ppi, u16 chanspec);\nvoid wlc_phy_watchdog(struct brcms_phy_pub *ppi);\nint wlc_phy_down(struct brcms_phy_pub *ppi);\nu32 wlc_phy_clk_bwbits(struct brcms_phy_pub *pih);\nvoid wlc_phy_cal_init(struct brcms_phy_pub *ppi);\nvoid wlc_phy_antsel_init(struct brcms_phy_pub *ppi, bool lut_init);\n\nvoid wlc_phy_chanspec_set(struct brcms_phy_pub *ppi, u16 chanspec);\nu16 wlc_phy_chanspec_get(struct brcms_phy_pub *ppi);\nvoid wlc_phy_chanspec_radio_set(struct brcms_phy_pub *ppi, u16 newch);\nu16 wlc_phy_bw_state_get(struct brcms_phy_pub *ppi);\nvoid wlc_phy_bw_state_set(struct brcms_phy_pub *ppi, u16 bw);\n\nint wlc_phy_rssi_compute(struct brcms_phy_pub *pih, struct d11rxhdr *rxh);\nvoid wlc_phy_por_inform(struct brcms_phy_pub *ppi);\nvoid wlc_phy_noise_sample_intr(struct brcms_phy_pub *ppi);\nbool wlc_phy_bist_check_phy(struct brcms_phy_pub *ppi);\n\nvoid wlc_phy_set_deaf(struct brcms_phy_pub *ppi, bool user_flag);\n\nvoid wlc_phy_switch_radio(struct brcms_phy_pub *ppi, bool on);\nvoid wlc_phy_anacore(struct brcms_phy_pub *ppi, bool on);\n\n\nvoid wlc_phy_BSSinit(struct brcms_phy_pub *ppi, bool bonlyap, int rssi);\n\nvoid wlc_phy_chanspec_ch14_widefilter_set(struct brcms_phy_pub *ppi,\n\t\t\t\t\t  bool wide_filter);\nvoid wlc_phy_chanspec_band_validch(struct brcms_phy_pub *ppi, uint band,\n\t\t\t\t   struct brcms_chanvec *channels);\nu16 wlc_phy_chanspec_band_firstch(struct brcms_phy_pub *ppi, uint band);\n\nvoid wlc_phy_txpower_sromlimit(struct brcms_phy_pub *ppi, uint chan, u8 *_min_,\n\t\t\t       u8 *_max_, int rate);\nvoid wlc_phy_txpower_sromlimit_max_get(struct brcms_phy_pub *ppi, uint chan,\n\t\t\t\t       u8 *_max_, u8 *_min_);\nvoid wlc_phy_txpower_boardlimit_band(struct brcms_phy_pub *ppi, uint band,\n\t\t\t\t     s32 *, s32 *, u32 *);\nvoid wlc_phy_txpower_limit_set(struct brcms_phy_pub *ppi, struct txpwr_limits *,\n\t\t\t       u16 chanspec);\nint wlc_phy_txpower_get(struct brcms_phy_pub *ppi, uint *qdbm, bool *override);\nint wlc_phy_txpower_set(struct brcms_phy_pub *ppi, uint qdbm, bool override);\nvoid wlc_phy_txpower_target_set(struct brcms_phy_pub *ppi,\n\t\t\t\tstruct txpwr_limits *);\nbool wlc_phy_txpower_hw_ctrl_get(struct brcms_phy_pub *ppi);\nvoid wlc_phy_txpower_hw_ctrl_set(struct brcms_phy_pub *ppi, bool hwpwrctrl);\nu8 wlc_phy_txpower_get_target_min(struct brcms_phy_pub *ppi);\nu8 wlc_phy_txpower_get_target_max(struct brcms_phy_pub *ppi);\nbool wlc_phy_txpower_ipa_ison(struct brcms_phy_pub *pih);\n\nvoid wlc_phy_stf_chain_init(struct brcms_phy_pub *pih, u8 txchain, u8 rxchain);\nvoid wlc_phy_stf_chain_set(struct brcms_phy_pub *pih, u8 txchain, u8 rxchain);\nvoid wlc_phy_stf_chain_get(struct brcms_phy_pub *pih, u8 *txchain, u8 *rxchain);\nu8 wlc_phy_stf_chain_active_get(struct brcms_phy_pub *pih);\ns8 wlc_phy_stf_ssmode_get(struct brcms_phy_pub *pih, u16 chanspec);\nvoid wlc_phy_ldpc_override_set(struct brcms_phy_pub *ppi, bool val);\n\nvoid wlc_phy_cal_perical(struct brcms_phy_pub *ppi, u8 reason);\nvoid wlc_phy_noise_sample_request_external(struct brcms_phy_pub *ppi);\nvoid wlc_phy_edcrs_lock(struct brcms_phy_pub *pih, bool lock);\nvoid wlc_phy_cal_papd_recal(struct brcms_phy_pub *ppi);\n\nvoid wlc_phy_ant_rxdiv_set(struct brcms_phy_pub *ppi, u8 val);\nvoid wlc_phy_clear_tssi(struct brcms_phy_pub *ppi);\nvoid wlc_phy_hold_upd(struct brcms_phy_pub *ppi, u32 id, bool val);\nvoid wlc_phy_mute_upd(struct brcms_phy_pub *ppi, bool val, u32 flags);\n\nvoid wlc_phy_antsel_type_set(struct brcms_phy_pub *ppi, u8 antsel_type);\n\nvoid wlc_phy_txpower_get_current(struct brcms_phy_pub *ppi,\n\t\t\t\t struct tx_power *power, uint channel);\n\nvoid wlc_phy_initcal_enable(struct brcms_phy_pub *pih, bool initcal);\nbool wlc_phy_test_ison(struct brcms_phy_pub *ppi);\nvoid wlc_phy_txpwr_percent_set(struct brcms_phy_pub *ppi, u8 txpwr_percent);\nvoid wlc_phy_ofdm_rateset_war(struct brcms_phy_pub *pih, bool war);\nvoid wlc_phy_bf_preempt_enable(struct brcms_phy_pub *pih, bool bf_preempt);\nvoid wlc_phy_machwcap_set(struct brcms_phy_pub *ppi, u32 machwcap);\n\nvoid wlc_phy_runbist_config(struct brcms_phy_pub *ppi, bool start_end);\n\nvoid wlc_phy_freqtrack_start(struct brcms_phy_pub *ppi);\nvoid wlc_phy_freqtrack_end(struct brcms_phy_pub *ppi);\n\nconst u8 *wlc_phy_get_ofdm_rate_lookup(void);\n\ns8 wlc_phy_get_tx_power_offset_by_mcs(struct brcms_phy_pub *ppi,\n\t\t\t\t      u8 mcs_offset);\ns8 wlc_phy_get_tx_power_offset(struct brcms_phy_pub *ppi, u8 tbl_offset);\n#endif                           \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}