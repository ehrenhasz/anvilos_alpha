{
  "module_name": "phy_shim.c",
  "hash_id": "d59e5f0df1f44a3e3670c0091460f34bd415052d2a1803328f3f965d85af39f3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/broadcom/brcm80211/brcmsmac/phy_shim.c",
  "human_readable_source": " \n\n \n#include <linux/slab.h>\n#include <net/mac80211.h>\n\n#include \"main.h\"\n#include \"mac80211_if.h\"\n#include \"phy_shim.h\"\n\n \nstruct phy_shim_info {\n\tstruct brcms_hardware *wlc_hw;\t \n\tstruct brcms_c_info *wlc;\t \n\tstruct brcms_info *wl;  \n};\n\nstruct phy_shim_info *wlc_phy_shim_attach(struct brcms_hardware *wlc_hw,\n\t\t\t\t\t  struct brcms_info *wl,\n\t\t\t\t\t  struct brcms_c_info *wlc) {\n\tstruct phy_shim_info *physhim = NULL;\n\n\tphyshim = kzalloc(sizeof(struct phy_shim_info), GFP_ATOMIC);\n\tif (!physhim)\n\t\treturn NULL;\n\n\tphyshim->wlc_hw = wlc_hw;\n\tphyshim->wlc = wlc;\n\tphyshim->wl = wl;\n\n\treturn physhim;\n}\n\nvoid wlc_phy_shim_detach(struct phy_shim_info *physhim)\n{\n\tkfree(physhim);\n}\n\nstruct wlapi_timer *wlapi_init_timer(struct phy_shim_info *physhim,\n\t\t\t\t     void (*fn)(struct brcms_phy *pi),\n\t\t\t\t     void *arg, const char *name)\n{\n\treturn (struct wlapi_timer *)\n\t\t\tbrcms_init_timer(physhim->wl, (void (*)(void *))fn,\n\t\t\t\t\t arg, name);\n}\n\nvoid wlapi_free_timer(struct wlapi_timer *t)\n{\n\tbrcms_free_timer((struct brcms_timer *)t);\n}\n\nvoid\nwlapi_add_timer(struct wlapi_timer *t, uint ms, int periodic)\n{\n\tbrcms_add_timer((struct brcms_timer *)t, ms, periodic);\n}\n\nbool wlapi_del_timer(struct wlapi_timer *t)\n{\n\treturn brcms_del_timer((struct brcms_timer *)t);\n}\n\nvoid wlapi_intrson(struct phy_shim_info *physhim)\n{\n\tbrcms_intrson(physhim->wl);\n}\n\nu32 wlapi_intrsoff(struct phy_shim_info *physhim)\n{\n\treturn brcms_intrsoff(physhim->wl);\n}\n\nvoid wlapi_intrsrestore(struct phy_shim_info *physhim, u32 macintmask)\n{\n\tbrcms_intrsrestore(physhim->wl, macintmask);\n}\n\nvoid wlapi_bmac_write_shm(struct phy_shim_info *physhim, uint offset, u16 v)\n{\n\tbrcms_b_write_shm(physhim->wlc_hw, offset, v);\n}\n\nu16 wlapi_bmac_read_shm(struct phy_shim_info *physhim, uint offset)\n{\n\treturn brcms_b_read_shm(physhim->wlc_hw, offset);\n}\n\nvoid\nwlapi_bmac_mhf(struct phy_shim_info *physhim, u8 idx, u16 mask,\n\t       u16 val, int bands)\n{\n\tbrcms_b_mhf(physhim->wlc_hw, idx, mask, val, bands);\n}\n\nvoid wlapi_bmac_corereset(struct phy_shim_info *physhim, u32 flags)\n{\n\tbrcms_b_corereset(physhim->wlc_hw, flags);\n}\n\nvoid wlapi_suspend_mac_and_wait(struct phy_shim_info *physhim)\n{\n\tbrcms_c_suspend_mac_and_wait(physhim->wlc);\n}\n\nvoid wlapi_switch_macfreq(struct phy_shim_info *physhim, u8 spurmode)\n{\n\tbrcms_b_switch_macfreq(physhim->wlc_hw, spurmode);\n}\n\nvoid wlapi_enable_mac(struct phy_shim_info *physhim)\n{\n\tbrcms_c_enable_mac(physhim->wlc);\n}\n\nvoid wlapi_bmac_mctrl(struct phy_shim_info *physhim, u32 mask, u32 val)\n{\n\tbrcms_b_mctrl(physhim->wlc_hw, mask, val);\n}\n\nvoid wlapi_bmac_phy_reset(struct phy_shim_info *physhim)\n{\n\tbrcms_b_phy_reset(physhim->wlc_hw);\n}\n\nvoid wlapi_bmac_bw_set(struct phy_shim_info *physhim, u16 bw)\n{\n\tbrcms_b_bw_set(physhim->wlc_hw, bw);\n}\n\nu16 wlapi_bmac_get_txant(struct phy_shim_info *physhim)\n{\n\treturn brcms_b_get_txant(physhim->wlc_hw);\n}\n\nvoid wlapi_bmac_phyclk_fgc(struct phy_shim_info *physhim, bool clk)\n{\n\tbrcms_b_phyclk_fgc(physhim->wlc_hw, clk);\n}\n\nvoid wlapi_bmac_macphyclk_set(struct phy_shim_info *physhim, bool clk)\n{\n\tbrcms_b_macphyclk_set(physhim->wlc_hw, clk);\n}\n\nvoid wlapi_bmac_core_phypll_ctl(struct phy_shim_info *physhim, bool on)\n{\n\tbrcms_b_core_phypll_ctl(physhim->wlc_hw, on);\n}\n\nvoid wlapi_bmac_core_phypll_reset(struct phy_shim_info *physhim)\n{\n\tbrcms_b_core_phypll_reset(physhim->wlc_hw);\n}\n\nvoid wlapi_bmac_ucode_wake_override_phyreg_set(struct phy_shim_info *physhim)\n{\n\tbrcms_c_ucode_wake_override_set(physhim->wlc_hw,\n\t\t\t\t\tBRCMS_WAKE_OVERRIDE_PHYREG);\n}\n\nvoid wlapi_bmac_ucode_wake_override_phyreg_clear(struct phy_shim_info *physhim)\n{\n\tbrcms_c_ucode_wake_override_clear(physhim->wlc_hw,\n\t\t\t\t\t  BRCMS_WAKE_OVERRIDE_PHYREG);\n}\n\nvoid\nwlapi_bmac_write_template_ram(struct phy_shim_info *physhim, int offset,\n\t\t\t      int len, void *buf)\n{\n\tbrcms_b_write_template_ram(physhim->wlc_hw, offset, len, buf);\n}\n\nu16 wlapi_bmac_rate_shm_offset(struct phy_shim_info *physhim, u8 rate)\n{\n\treturn brcms_b_rate_shm_offset(physhim->wlc_hw, rate);\n}\n\nvoid wlapi_ucode_sample_init(struct phy_shim_info *physhim)\n{\n}\n\nvoid\nwlapi_copyfrom_objmem(struct phy_shim_info *physhim, uint offset, void *buf,\n\t\t      int len, u32 sel)\n{\n\tbrcms_b_copyfrom_objmem(physhim->wlc_hw, offset, buf, len, sel);\n}\n\nvoid\nwlapi_copyto_objmem(struct phy_shim_info *physhim, uint offset, const void *buf,\n\t\t    int l, u32 sel)\n{\n\tbrcms_b_copyto_objmem(physhim->wlc_hw, offset, buf, l, sel);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}