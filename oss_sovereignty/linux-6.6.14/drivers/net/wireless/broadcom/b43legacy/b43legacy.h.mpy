{
  "module_name": "b43legacy.h",
  "hash_id": "c470172b49acc1b17b215cc0f6a84d137bb44e80075498983cb6864ec1041b99",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/broadcom/b43legacy/b43legacy.h",
  "human_readable_source": " \n#ifndef B43legacy_H_\n#define B43legacy_H_\n\n#include <linux/hw_random.h>\n#include <linux/kernel.h>\n#include <linux/spinlock.h>\n#include <linux/interrupt.h>\n#include <linux/stringify.h>\n#include <linux/netdevice.h>\n#include <linux/pci.h>\n#include <linux/atomic.h>\n#include <linux/io.h>\n\n#include <linux/ssb/ssb.h>\n#include <linux/ssb/ssb_driver_chipcommon.h>\n#include <linux/completion.h>\n\n#include <net/mac80211.h>\n\n#include \"debugfs.h\"\n#include \"leds.h\"\n#include \"rfkill.h\"\n#include \"phy.h\"\n\n\n#define B43legacy_IRQWAIT_MAX_RETRIES\t20\n\n \n#define B43legacy_MMIO_DMA0_REASON\t0x20\n#define B43legacy_MMIO_DMA0_IRQ_MASK\t0x24\n#define B43legacy_MMIO_DMA1_REASON\t0x28\n#define B43legacy_MMIO_DMA1_IRQ_MASK\t0x2C\n#define B43legacy_MMIO_DMA2_REASON\t0x30\n#define B43legacy_MMIO_DMA2_IRQ_MASK\t0x34\n#define B43legacy_MMIO_DMA3_REASON\t0x38\n#define B43legacy_MMIO_DMA3_IRQ_MASK\t0x3C\n#define B43legacy_MMIO_DMA4_REASON\t0x40\n#define B43legacy_MMIO_DMA4_IRQ_MASK\t0x44\n#define B43legacy_MMIO_DMA5_REASON\t0x48\n#define B43legacy_MMIO_DMA5_IRQ_MASK\t0x4C\n#define B43legacy_MMIO_MACCTL\t\t0x120\t \n#define B43legacy_MMIO_MACCMD\t\t0x124\t \n#define B43legacy_MMIO_GEN_IRQ_REASON\t0x128\n#define B43legacy_MMIO_GEN_IRQ_MASK\t0x12C\n#define B43legacy_MMIO_RAM_CONTROL\t0x130\n#define B43legacy_MMIO_RAM_DATA\t\t0x134\n#define B43legacy_MMIO_PS_STATUS\t\t0x140\n#define B43legacy_MMIO_RADIO_HWENABLED_HI\t0x158\n#define B43legacy_MMIO_SHM_CONTROL\t0x160\n#define B43legacy_MMIO_SHM_DATA\t\t0x164\n#define B43legacy_MMIO_SHM_DATA_UNALIGNED\t0x166\n#define B43legacy_MMIO_XMITSTAT_0\t\t0x170\n#define B43legacy_MMIO_XMITSTAT_1\t\t0x174\n#define B43legacy_MMIO_REV3PLUS_TSF_LOW\t0x180  \n#define B43legacy_MMIO_REV3PLUS_TSF_HIGH\t0x184  \n#define B43legacy_MMIO_TSF_CFP_REP\t0x188\n#define B43legacy_MMIO_TSF_CFP_START\t0x18C\n \n#define B43legacy_MMIO_DMA32_BASE0\t0x200\n#define B43legacy_MMIO_DMA32_BASE1\t0x220\n#define B43legacy_MMIO_DMA32_BASE2\t0x240\n#define B43legacy_MMIO_DMA32_BASE3\t0x260\n#define B43legacy_MMIO_DMA32_BASE4\t0x280\n#define B43legacy_MMIO_DMA32_BASE5\t0x2A0\n \n#define B43legacy_MMIO_DMA64_BASE0\t0x200\n#define B43legacy_MMIO_DMA64_BASE1\t0x240\n#define B43legacy_MMIO_DMA64_BASE2\t0x280\n#define B43legacy_MMIO_DMA64_BASE3\t0x2C0\n#define B43legacy_MMIO_DMA64_BASE4\t0x300\n#define B43legacy_MMIO_DMA64_BASE5\t0x340\n \n#define B43legacy_MMIO_PIO1_BASE\t\t0x300\n#define B43legacy_MMIO_PIO2_BASE\t\t0x310\n#define B43legacy_MMIO_PIO3_BASE\t\t0x320\n#define B43legacy_MMIO_PIO4_BASE\t\t0x330\n\n#define B43legacy_MMIO_PHY_VER\t\t0x3E0\n#define B43legacy_MMIO_PHY_RADIO\t\t0x3E2\n#define B43legacy_MMIO_PHY0\t\t0x3E6\n#define B43legacy_MMIO_ANTENNA\t\t0x3E8\n#define B43legacy_MMIO_CHANNEL\t\t0x3F0\n#define B43legacy_MMIO_CHANNEL_EXT\t0x3F4\n#define B43legacy_MMIO_RADIO_CONTROL\t0x3F6\n#define B43legacy_MMIO_RADIO_DATA_HIGH\t0x3F8\n#define B43legacy_MMIO_RADIO_DATA_LOW\t0x3FA\n#define B43legacy_MMIO_PHY_CONTROL\t0x3FC\n#define B43legacy_MMIO_PHY_DATA\t\t0x3FE\n#define B43legacy_MMIO_MACFILTER_CONTROL\t0x420\n#define B43legacy_MMIO_MACFILTER_DATA\t0x422\n#define B43legacy_MMIO_RCMTA_COUNT\t0x43C  \n#define B43legacy_MMIO_RADIO_HWENABLED_LO\t0x49A\n#define B43legacy_MMIO_GPIO_CONTROL\t0x49C\n#define B43legacy_MMIO_GPIO_MASK\t\t0x49E\n#define B43legacy_MMIO_TSF_CFP_PRETBTT\t0x612\n#define B43legacy_MMIO_TSF_0\t\t0x632  \n#define B43legacy_MMIO_TSF_1\t\t0x634  \n#define B43legacy_MMIO_TSF_2\t\t0x636  \n#define B43legacy_MMIO_TSF_3\t\t0x638  \n#define B43legacy_MMIO_RNG\t\t0x65A\n#define B43legacy_MMIO_POWERUP_DELAY\t0x6A8\n\n \n#define B43legacy_BFL_PACTRL\t\t0x0002\n#define B43legacy_BFL_RSSI\t\t0x0008\n#define B43legacy_BFL_EXTLNA\t\t0x1000\n\n \n#define B43legacy_GPIO_CONTROL\t\t0x6c\n\n \n#define\tB43legacy_SHM_SHARED\t\t0x0001\n#define\tB43legacy_SHM_WIRELESS\t\t0x0002\n#define\tB43legacy_SHM_HW\t\t0x0004\n#define\tB43legacy_SHM_UCODE\t\t0x0300\n\n \n#define B43legacy_SHM_AUTOINC_R\t\t0x0200  \n#define B43legacy_SHM_AUTOINC_W\t\t0x0100  \n#define B43legacy_SHM_AUTOINC_RW\t(B43legacy_SHM_AUTOINC_R | \\\n\t\t\t\t\t B43legacy_SHM_AUTOINC_W)\n\n \n#define B43legacy_SHM_SH_WLCOREREV\t0x0016  \n#define B43legacy_SHM_SH_HOSTFLO\t0x005E  \n#define B43legacy_SHM_SH_HOSTFHI\t0x0060  \n \n#define B43legacy_SHM_SH_KEYIDXBLOCK\t0x05D4  \n \n#define B43legacy_SHM_SH_DTIMP\t\t0x0012  \n#define B43legacy_SHM_SH_BTL0\t\t0x0018  \n#define B43legacy_SHM_SH_BTL1\t\t0x001A  \n#define B43legacy_SHM_SH_BTSFOFF\t0x001C  \n#define B43legacy_SHM_SH_TIMPOS\t\t0x001E  \n#define B43legacy_SHM_SH_BEACPHYCTL\t0x0054  \n \n#define B43legacy_SHM_SH_ACKCTSPHYCTL\t0x0022  \n \n#define B43legacy_SHM_SH_PRTLEN\t\t0x004A  \n#define B43legacy_SHM_SH_PRMAXTIME\t0x0074  \n#define B43legacy_SHM_SH_PRPHYCTL\t0x0188  \n \n#define B43legacy_SHM_SH_OFDMDIRECT\t0x0480  \n#define B43legacy_SHM_SH_OFDMBASIC\t0x04A0  \n#define B43legacy_SHM_SH_CCKDIRECT\t0x04C0  \n#define B43legacy_SHM_SH_CCKBASIC\t0x04E0  \n \n#define B43legacy_SHM_SH_UCODEREV\t0x0000  \n#define B43legacy_SHM_SH_UCODEPATCH\t0x0002  \n#define B43legacy_SHM_SH_UCODEDATE\t0x0004  \n#define B43legacy_SHM_SH_UCODETIME\t0x0006  \n#define B43legacy_SHM_SH_SPUWKUP\t0x0094  \n#define B43legacy_SHM_SH_PRETBTT\t0x0096  \n\n#define B43legacy_UCODEFLAGS_OFFSET     0x005E\n\n \n#define B43legacy_MMIO_RADIO_HWENABLED_HI_MASK (1 << 16)\n#define B43legacy_MMIO_RADIO_HWENABLED_LO_MASK (1 << 4)\n\n \n#define B43legacy_HF_SYMW\t\t0x00000002  \n#define B43legacy_HF_GDCW\t\t0x00000020  \n#define B43legacy_HF_OFDMPABOOST\t0x00000040  \n#define B43legacy_HF_EDCF\t\t0x00000100  \n\n \n#define B43legacy_MACFILTER_SELF\t0x0000\n#define B43legacy_MACFILTER_BSSID\t0x0003\n#define B43legacy_MACFILTER_MAC\t\t0x0010\n\n \n#define B43legacy_PHYTYPE_B\t\t0x01\n#define B43legacy_PHYTYPE_G\t\t0x02\n\n \n#define B43legacy_PHY_G_LO_CONTROL\t0x0810\n#define B43legacy_PHY_ILT_G_CTRL\t0x0472\n#define B43legacy_PHY_ILT_G_DATA1\t0x0473\n#define B43legacy_PHY_ILT_G_DATA2\t0x0474\n#define B43legacy_PHY_G_PCTL\t\t0x0029\n#define B43legacy_PHY_RADIO_BITFIELD\t0x0401\n#define B43legacy_PHY_G_CRS\t\t0x0429\n#define B43legacy_PHY_NRSSILT_CTRL\t0x0803\n#define B43legacy_PHY_NRSSILT_DATA\t0x0804\n\n \n#define B43legacy_RADIOCTL_ID\t\t0x01\n\n \n#define B43legacy_MACCTL_ENABLED\t0x00000001  \n#define B43legacy_MACCTL_PSM_RUN\t0x00000002  \n#define B43legacy_MACCTL_PSM_JMP0\t0x00000004  \n#define B43legacy_MACCTL_SHM_ENABLED\t0x00000100  \n#define B43legacy_MACCTL_IHR_ENABLED\t0x00000400  \n#define B43legacy_MACCTL_BE\t\t0x00010000  \n#define B43legacy_MACCTL_INFRA\t\t0x00020000  \n#define B43legacy_MACCTL_AP\t\t0x00040000  \n#define B43legacy_MACCTL_RADIOLOCK\t0x00080000  \n#define B43legacy_MACCTL_BEACPROMISC\t0x00100000  \n#define B43legacy_MACCTL_KEEP_BADPLCP\t0x00200000  \n#define B43legacy_MACCTL_KEEP_CTL\t0x00400000  \n#define B43legacy_MACCTL_KEEP_BAD\t0x00800000  \n#define B43legacy_MACCTL_PROMISC\t0x01000000  \n#define B43legacy_MACCTL_HWPS\t\t0x02000000  \n#define B43legacy_MACCTL_AWAKE\t\t0x04000000  \n#define B43legacy_MACCTL_TBTTHOLD\t0x10000000  \n#define B43legacy_MACCTL_GMODE\t\t0x80000000  \n\n \n#define B43legacy_MACCMD_BEACON0_VALID\t0x00000001  \n#define B43legacy_MACCMD_BEACON1_VALID\t0x00000002  \n#define B43legacy_MACCMD_DFQ_VALID\t0x00000004  \n#define B43legacy_MACCMD_CCA\t\t0x00000008  \n#define B43legacy_MACCMD_BGNOISE\t0x00000010  \n\n \n#define B43legacy_TMSLOW_GMODE\t\t0x20000000  \n#define B43legacy_TMSLOW_PLLREFSEL\t0x00200000  \n#define B43legacy_TMSLOW_MACPHYCLKEN\t0x00100000  \n#define B43legacy_TMSLOW_PHYRESET\t0x00080000  \n#define B43legacy_TMSLOW_PHYCLKEN\t0x00040000  \n\n \n#define B43legacy_TMSHIGH_FCLOCK\t0x00040000  \n#define B43legacy_TMSHIGH_GPHY\t\t0x00010000  \n\n#define B43legacy_UCODEFLAG_AUTODIV       0x0001\n\n \n#define B43legacy_IRQ_MAC_SUSPENDED\t0x00000001\n#define B43legacy_IRQ_BEACON\t\t0x00000002\n#define B43legacy_IRQ_TBTT_INDI\t\t0x00000004  \n#define B43legacy_IRQ_BEACON_TX_OK\t0x00000008\n#define B43legacy_IRQ_BEACON_CANCEL\t0x00000010\n#define B43legacy_IRQ_ATIM_END\t\t0x00000020\n#define B43legacy_IRQ_PMQ\t\t0x00000040\n#define B43legacy_IRQ_PIO_WORKAROUND\t0x00000100\n#define B43legacy_IRQ_MAC_TXERR\t\t0x00000200\n#define B43legacy_IRQ_PHY_TXERR\t\t0x00000800\n#define B43legacy_IRQ_PMEVENT\t\t0x00001000\n#define B43legacy_IRQ_TIMER0\t\t0x00002000\n#define B43legacy_IRQ_TIMER1\t\t0x00004000\n#define B43legacy_IRQ_DMA\t\t0x00008000\n#define B43legacy_IRQ_TXFIFO_FLUSH_OK\t0x00010000\n#define B43legacy_IRQ_CCA_MEASURE_OK\t0x00020000\n#define B43legacy_IRQ_NOISESAMPLE_OK\t0x00040000\n#define B43legacy_IRQ_UCODE_DEBUG\t0x08000000\n#define B43legacy_IRQ_RFKILL\t\t0x10000000\n#define B43legacy_IRQ_TX_OK\t\t0x20000000\n#define B43legacy_IRQ_PHY_G_CHANGED\t0x40000000\n#define B43legacy_IRQ_TIMEOUT\t\t0x80000000\n\n#define B43legacy_IRQ_ALL\t\t0xFFFFFFFF\n#define B43legacy_IRQ_MASKTEMPLATE\t(B43legacy_IRQ_MAC_SUSPENDED |\t\\\n\t\t\t\t\t B43legacy_IRQ_TBTT_INDI |\t\\\n\t\t\t\t\t B43legacy_IRQ_ATIM_END |\t\\\n\t\t\t\t\t B43legacy_IRQ_PMQ |\t\t\\\n\t\t\t\t\t B43legacy_IRQ_MAC_TXERR |\t\\\n\t\t\t\t\t B43legacy_IRQ_PHY_TXERR |\t\\\n\t\t\t\t\t B43legacy_IRQ_DMA |\t\t\\\n\t\t\t\t\t B43legacy_IRQ_TXFIFO_FLUSH_OK | \\\n\t\t\t\t\t B43legacy_IRQ_NOISESAMPLE_OK | \\\n\t\t\t\t\t B43legacy_IRQ_UCODE_DEBUG |\t\\\n\t\t\t\t\t B43legacy_IRQ_RFKILL |\t\t\\\n\t\t\t\t\t B43legacy_IRQ_TX_OK)\n\n \n#define B43legacy_CCK_RATE_1MB\t\t2\n#define B43legacy_CCK_RATE_2MB\t\t4\n#define B43legacy_CCK_RATE_5MB\t\t11\n#define B43legacy_CCK_RATE_11MB\t\t22\n#define B43legacy_OFDM_RATE_6MB\t\t12\n#define B43legacy_OFDM_RATE_9MB\t\t18\n#define B43legacy_OFDM_RATE_12MB\t24\n#define B43legacy_OFDM_RATE_18MB\t36\n#define B43legacy_OFDM_RATE_24MB\t48\n#define B43legacy_OFDM_RATE_36MB\t72\n#define B43legacy_OFDM_RATE_48MB\t96\n#define B43legacy_OFDM_RATE_54MB\t108\n \n#define B43legacy_RATE_TO_100KBPS(rate)\t(((rate) * 10) / 2)\n\n\n#define B43legacy_DEFAULT_SHORT_RETRY_LIMIT\t7\n#define B43legacy_DEFAULT_LONG_RETRY_LIMIT\t4\n\n#define B43legacy_PHY_TX_BADNESS_LIMIT\t\t1000\n\n \n#define B43legacy_SEC_KEYSIZE\t\t16\n \nenum {\n\tB43legacy_SEC_ALGO_NONE = 0,  \n\tB43legacy_SEC_ALGO_WEP40,\n\tB43legacy_SEC_ALGO_TKIP,\n\tB43legacy_SEC_ALGO_AES,\n\tB43legacy_SEC_ALGO_WEP104,\n\tB43legacy_SEC_ALGO_AES_LEGACY,\n};\n\n \n#define B43legacy_CIR_BASE                0xf00\n#define B43legacy_CIR_SBTPSFLAG           (B43legacy_CIR_BASE + 0x18)\n#define B43legacy_CIR_SBIMSTATE           (B43legacy_CIR_BASE + 0x90)\n#define B43legacy_CIR_SBINTVEC            (B43legacy_CIR_BASE + 0x94)\n#define B43legacy_CIR_SBTMSTATELOW        (B43legacy_CIR_BASE + 0x98)\n#define B43legacy_CIR_SBTMSTATEHIGH       (B43legacy_CIR_BASE + 0x9c)\n#define B43legacy_CIR_SBIMCONFIGLOW       (B43legacy_CIR_BASE + 0xa8)\n#define B43legacy_CIR_SB_ID_HI            (B43legacy_CIR_BASE + 0xfc)\n\n \n#define B43legacy_SBTMSTATEHIGH_SERROR\t\t0x00000001\n#define B43legacy_SBTMSTATEHIGH_BUSY\t\t0x00000004\n#define B43legacy_SBTMSTATEHIGH_TIMEOUT\t\t0x00000020\n#define B43legacy_SBTMSTATEHIGH_G_PHY_AVAIL\t0x00010000\n#define B43legacy_SBTMSTATEHIGH_COREFLAGS\t0x1FFF0000\n#define B43legacy_SBTMSTATEHIGH_DMA64BIT\t0x10000000\n#define B43legacy_SBTMSTATEHIGH_GATEDCLK\t0x20000000\n#define B43legacy_SBTMSTATEHIGH_BISTFAILED\t0x40000000\n#define B43legacy_SBTMSTATEHIGH_BISTCOMPLETE\t0x80000000\n\n \n#define B43legacy_SBIMSTATE_IB_ERROR\t\t0x20000\n#define B43legacy_SBIMSTATE_TIMEOUT\t\t0x40000\n\n#define PFX\t\tKBUILD_MODNAME \": \"\n#ifdef assert\n# undef assert\n#endif\n#ifdef CONFIG_B43LEGACY_DEBUG\n# define B43legacy_WARN_ON(x)\tWARN_ON(x)\n# define B43legacy_BUG_ON(expr)\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (unlikely((expr))) {\t\t\t\t\t\\\n\t\t\tprintk(KERN_INFO PFX \"Test (%s) failed\\n\",\t\\\n\t\t\t\t\t      #expr);\t\t\t\\\n\t\t\tBUG_ON(expr);\t\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t} while (0)\n# define B43legacy_DEBUG\t1\n#else\n \nstatic inline bool __b43legacy_warn_on_dummy(bool x) { return x; }\n# define B43legacy_WARN_ON(x)\t__b43legacy_warn_on_dummy(unlikely(!!(x)))\n# define B43legacy_BUG_ON(x)\tdo {   } while (0)\n# define B43legacy_DEBUG\t0\n#endif\n\n\nstruct net_device;\nstruct pci_dev;\nstruct b43legacy_dmaring;\nstruct b43legacy_pioqueue;\n\n \n#define B43legacy_FW_TYPE_UCODE\t'u'\n#define B43legacy_FW_TYPE_PCM\t'p'\n#define B43legacy_FW_TYPE_IV\t'i'\nstruct b43legacy_fw_header {\n\t \n\tu8 type;\n\t \n\tu8 ver;\n\tu8 __padding[2];\n\t \n\t__be32 size;\n} __packed;\n\n \n#define B43legacy_IV_OFFSET_MASK\t0x7FFF\n#define B43legacy_IV_32BIT\t\t0x8000\nstruct b43legacy_iv {\n\t__be16 offset_size;\n\tunion {\n\t\t__be16 d16;\n\t\t__be32 d32;\n\t} __packed data;\n} __packed;\n\n#define B43legacy_PHYMODE(phytype)\t(1 << (phytype))\n#define B43legacy_PHYMODE_B\t\tB43legacy_PHYMODE\t\\\n\t\t\t\t\t((B43legacy_PHYTYPE_B))\n#define B43legacy_PHYMODE_G\t\tB43legacy_PHYMODE\t\\\n\t\t\t\t\t((B43legacy_PHYTYPE_G))\n\n \nstruct b43legacy_lopair {\n\ts8 low;\n\ts8 high;\n\tu8 used:1;\n};\n#define B43legacy_LO_COUNT\t(14*4)\n\nstruct b43legacy_phy {\n\t \n\tu8 possible_phymodes;\n\t \n\tbool gmode;\n\n\t \n\tu8 analog;\n\t \n\tu8 type;\n\t \n\tu8 rev;\n\n\tu16 antenna_diversity;\n\tu16 savedpctlreg;\n\t \n\tu16 radio_manuf;\t \n\tu16 radio_ver;\t\t \n\tu8 calibrated:1;\n\tu8 radio_rev;\t\t \n\n\tbool dyn_tssi_tbl;\t \n\n\t \n\tbool aci_enable;\n\tbool aci_wlan_automatic;\n\tbool aci_hw_rssi;\n\n\t \n\tbool radio_on;\n\tstruct {\n\t\t \n\t\tbool valid;\n\t\tu16 rfover;\n\t\tu16 rfoverval;\n\t} radio_off_context;\n\n\tu16 minlowsig[2];\n\tu16 minlowsigpos[2];\n\n\t \n\tstruct b43legacy_lopair *_lo_pairs;\n\t \n\tconst s8 *tssi2dbm;\n\t \n\ts8 idle_tssi;\n\t \n\tint tgt_idle_tssi;\n\t \n\tint cur_idle_tssi;\n\n\t \n\tstruct b43legacy_txpower_lo_control *lo_control;\n\t \n\ts16 max_lb_gain;\t \n\ts16 trsw_rx_gain;\t \n\ts16 lna_lod_gain;\t \n\ts16 lna_gain;\t\t \n\ts16 pga_gain;\t\t \n\n\t \n\tu8 power_level;\n\n\t \n\tu16 loopback_gain[2];\n\n\t \n\t \n\tstruct {\n\t\t \n\t\tu16 rfatt;\n\t\t \n\t\tu16 bbatt;\n\t\t \n\t\tu16 txctl1;\n\t\tu16 txctl2;\n\t};\n\t \n\tstruct {\n\t\tu16 txpwr_offset;\n\t};\n\n\t \n\tint interfmode;\n\t \n#define B43legacy_INTERFSTACK_SIZE\t26\n\tu32 interfstack[B43legacy_INTERFSTACK_SIZE];\n\n\t \n\ts16 nrssi[2];\n\ts32 nrssislope;\n\t \n\ts8 nrssi_lt[64];\n\n\t \n\tu8 channel;\n\n\tu16 lofcal;\n\n\tu16 initval;\n\n\t \n\tatomic_t txerr_cnt;\n\n#if B43legacy_DEBUG\n\t \n\tbool manual_txpower_control;\n\t \n\tbool phy_locked;\n#endif  \n};\n\n \nstruct b43legacy_dma {\n\tstruct b43legacy_dmaring *tx_ring0;\n\tstruct b43legacy_dmaring *tx_ring1;\n\tstruct b43legacy_dmaring *tx_ring2;\n\tstruct b43legacy_dmaring *tx_ring3;\n\tstruct b43legacy_dmaring *tx_ring4;\n\tstruct b43legacy_dmaring *tx_ring5;\n\n\tstruct b43legacy_dmaring *rx_ring0;\n\tstruct b43legacy_dmaring *rx_ring3;  \n\n\tu32 translation;  \n};\n\n \nstruct b43legacy_pio {\n\tstruct b43legacy_pioqueue *queue0;\n\tstruct b43legacy_pioqueue *queue1;\n\tstruct b43legacy_pioqueue *queue2;\n\tstruct b43legacy_pioqueue *queue3;\n};\n\n \nstruct b43legacy_noise_calculation {\n\tu8 channel_at_start;\n\tbool calculation_running;\n\tu8 nr_samples;\n\ts8 samples[8][4];\n};\n\nstruct b43legacy_stats {\n\tu8 link_noise;\n\t \n\tunsigned long last_tx;\n\tunsigned long last_rx;\n};\n\nstruct b43legacy_key {\n\tvoid *keyconf;\n\tbool enabled;\n\tu8 algorithm;\n};\n\n#define B43legacy_QOS_QUEUE_NUM\t4\n\nstruct b43legacy_wldev;\n\n \nstruct b43legacy_qos_params {\n\t \n\tstruct ieee80211_tx_queue_params p;\n};\n\n \nstruct b43legacy_wl {\n\t \n\tstruct b43legacy_wldev *current_dev;\n\t \n\tstruct ieee80211_hw *hw;\n\n\tspinlock_t irq_lock;\t\t \n\tstruct mutex mutex;\t\t \n\tspinlock_t leds_lock;\t\t \n\n\t \n\tstruct work_struct firmware_load;\n\n\t \n\n\tstruct ieee80211_vif *vif;\n\t \n\tu8 mac_addr[ETH_ALEN];\n\t \n\tu8 bssid[ETH_ALEN];\n\t \n\tint if_type;\n\t \n\tbool operating;\n\t \n\tunsigned int filter_flags;\n\t \n\tstruct ieee80211_low_level_stats ieee_stats;\n\n#ifdef CONFIG_B43LEGACY_HWRNG\n\tstruct hwrng rng;\n\tu8 rng_initialized;\n\tchar rng_name[30 + 1];\n#endif\n\n\t \n\tstruct list_head devlist;\n\tu8 nr_devs;\n\n\tbool radiotap_enabled;\n\tbool radio_enabled;\n\n\t \n\tstruct sk_buff *current_beacon;\n\tbool beacon0_uploaded;\n\tbool beacon1_uploaded;\n\tbool beacon_templates_virgin;  \n\tstruct work_struct beacon_update_trigger;\n\t \n\tstruct b43legacy_qos_params qos_params[B43legacy_QOS_QUEUE_NUM];\n\n\t \n\tstruct work_struct tx_work;\n\n\t \n\tstruct sk_buff_head tx_queue[B43legacy_QOS_QUEUE_NUM];\n\n\t \n\tbool tx_queue_stopped[B43legacy_QOS_QUEUE_NUM];\n\n};\n\n \nstruct b43legacy_firmware {\n\t \n\tconst struct firmware *ucode;\n\t \n\tconst struct firmware *pcm;\n\t \n\tconst struct firmware *initvals;\n\t \n\tconst struct firmware *initvals_band;\n\t \n\tu16 rev;\n\t \n\tu16 patch;\n};\n\n \nenum {\n\tB43legacy_STAT_UNINIT\t\t= 0,  \n\tB43legacy_STAT_INITIALIZED\t= 1,  \n\tB43legacy_STAT_STARTED\t= 2,  \n};\n#define b43legacy_status(wldev)\tatomic_read(&(wldev)->__init_status)\n#define b43legacy_set_status(wldev, stat)\tdo {\t\t\\\n\t\tatomic_set(&(wldev)->__init_status, (stat));\t\\\n\t\tsmp_wmb();\t\t\t\t\t\\\n\t\t\t\t\t} while (0)\n\n \n\n \nstruct b43legacy_wldev {\n\tstruct ssb_device *dev;\n\tstruct b43legacy_wl *wl;\n\n\t \n\tatomic_t __init_status;\n\t \n\tint suspend_init_status;\n\n\tbool __using_pio;\t \n\tbool bad_frames_preempt; \n\tbool dfq_valid;\t\t \n\tbool short_preamble;\t \n\tbool radio_hw_enable;\t \n\n\t \n\tstruct b43legacy_phy phy;\n\tunion {\n\t\t \n\t\tstruct b43legacy_dma dma;\n\t\t \n\t\tstruct b43legacy_pio pio;\n\t};\n\n\t \n\tstruct b43legacy_stats stats;\n\n\t \n\tstruct b43legacy_led led_tx;\n\tstruct b43legacy_led led_rx;\n\tstruct b43legacy_led led_assoc;\n\tstruct b43legacy_led led_radio;\n\n\t \n\tu32 irq_reason;\n\tu32 dma_reason[6];\n\t \n\tu32 irq_mask;\n\t \n\tstruct b43legacy_noise_calculation noisecalc;\n\t \n\tint mac_suspended;\n\n\t \n\tstruct tasklet_struct isr_tasklet;\n\n\t \n\tstruct delayed_work periodic_work;\n\tunsigned int periodic_state;\n\n\tstruct work_struct restart_work;\n\n\t \n\tu16 ktp;  \n\tu8 max_nr_keys;\n\tstruct b43legacy_key key[58];\n\n\t \n\tstruct b43legacy_firmware fw;\n\tconst struct firmware *fwp;\t \n\n\t \n\tstruct completion fw_load_complete;\n\n\t \n\tstruct list_head list;\n\n\t \n#ifdef CONFIG_B43LEGACY_DEBUG\n\tstruct b43legacy_dfsentry *dfsentry;\n#endif\n};\n\n\nstatic inline\nstruct b43legacy_wl *hw_to_b43legacy_wl(struct ieee80211_hw *hw)\n{\n\treturn hw->priv;\n}\n\n \n#if defined(CONFIG_B43LEGACY_DMA) && defined(CONFIG_B43LEGACY_PIO)\nstatic inline\nint b43legacy_using_pio(struct b43legacy_wldev *dev)\n{\n\treturn dev->__using_pio;\n}\n#elif defined(CONFIG_B43LEGACY_DMA)\nstatic inline\nint b43legacy_using_pio(struct b43legacy_wldev *dev)\n{\n\treturn 0;\n}\n#elif defined(CONFIG_B43LEGACY_PIO)\nstatic inline\nint b43legacy_using_pio(struct b43legacy_wldev *dev)\n{\n\treturn 1;\n}\n#else\n# error \"Using neither DMA nor PIO? Confused...\"\n#endif\n\n\nstatic inline\nstruct b43legacy_wldev *dev_to_b43legacy_wldev(struct device *dev)\n{\n\tstruct ssb_device *ssb_dev = dev_to_ssb_dev(dev);\n\treturn ssb_get_drvdata(ssb_dev);\n}\n\n \nstatic inline\nint b43legacy_is_mode(struct b43legacy_wl *wl, int type)\n{\n\treturn (wl->operating &&\n\t\twl->if_type == type);\n}\n\nstatic inline\nbool is_bcm_board_vendor(struct b43legacy_wldev *dev)\n{\n\treturn  (dev->dev->bus->boardinfo.vendor == PCI_VENDOR_ID_BROADCOM);\n}\n\nstatic inline\nu16 b43legacy_read16(struct b43legacy_wldev *dev, u16 offset)\n{\n\treturn ssb_read16(dev->dev, offset);\n}\n\nstatic inline\nvoid b43legacy_write16(struct b43legacy_wldev *dev, u16 offset, u16 value)\n{\n\tssb_write16(dev->dev, offset, value);\n}\n\nstatic inline\nu32 b43legacy_read32(struct b43legacy_wldev *dev, u16 offset)\n{\n\treturn ssb_read32(dev->dev, offset);\n}\n\nstatic inline\nvoid b43legacy_write32(struct b43legacy_wldev *dev, u16 offset, u32 value)\n{\n\tssb_write32(dev->dev, offset, value);\n}\n\nstatic inline\nstruct b43legacy_lopair *b43legacy_get_lopair(struct b43legacy_phy *phy,\n\t\t\t\t\t      u16 radio_attenuation,\n\t\t\t\t\t      u16 baseband_attenuation)\n{\n\treturn phy->_lo_pairs + (radio_attenuation\n\t\t\t+ 14 * (baseband_attenuation / 2));\n}\n\n\n\n \n__printf(2, 3)\nvoid b43legacyinfo(struct b43legacy_wl *wl, const char *fmt, ...);\n__printf(2, 3)\nvoid b43legacyerr(struct b43legacy_wl *wl, const char *fmt, ...);\n__printf(2, 3)\nvoid b43legacywarn(struct b43legacy_wl *wl, const char *fmt, ...);\n#if B43legacy_DEBUG\n__printf(2, 3)\nvoid b43legacydbg(struct b43legacy_wl *wl, const char *fmt, ...);\n#else  \n# define b43legacydbg(wl, fmt...) do {   } while (0)\n#endif  \n\n \n#define Q52_FMT\t\t\"%u.%u\"\n#define Q52_ARG(q52)\t((q52) / 4), (((q52) & 3) * 100 / 4)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}