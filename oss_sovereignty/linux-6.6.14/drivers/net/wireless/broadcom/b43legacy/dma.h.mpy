{
  "module_name": "dma.h",
  "hash_id": "e23f181ab5e11776cbb9182ef77c36286bb958c8d599215c8a703df5ee89a0cc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/broadcom/b43legacy/dma.h",
  "human_readable_source": " \n#ifndef B43legacy_DMA_H_\n#define B43legacy_DMA_H_\n\n#include <linux/list.h>\n#include <linux/spinlock.h>\n#include <linux/workqueue.h>\n#include <linux/linkage.h>\n#include <linux/atomic.h>\n\n#include \"b43legacy.h\"\n\n\n \n#define B43legacy_DMAIRQ_FATALMASK\t((1 << 10) | (1 << 11) | (1 << 12) \\\n\t\t\t\t\t | (1 << 14) | (1 << 15))\n#define B43legacy_DMAIRQ_NONFATALMASK\t(1 << 13)\n#define B43legacy_DMAIRQ_RX_DONE\t\t(1 << 16)\n\n\n \n\n \n#define B43legacy_DMA32_TXCTL\t\t\t\t0x00\n#define\t\tB43legacy_DMA32_TXENABLE\t\t0x00000001\n#define\t\tB43legacy_DMA32_TXSUSPEND\t\t0x00000002\n#define\t\tB43legacy_DMA32_TXLOOPBACK\t\t0x00000004\n#define\t\tB43legacy_DMA32_TXFLUSH\t\t\t0x00000010\n#define\t\tB43legacy_DMA32_TXADDREXT_MASK\t\t0x00030000\n#define\t\tB43legacy_DMA32_TXADDREXT_SHIFT\t\t16\n#define B43legacy_DMA32_TXRING\t\t\t\t0x04\n#define B43legacy_DMA32_TXINDEX\t\t\t\t0x08\n#define B43legacy_DMA32_TXSTATUS\t\t\t0x0C\n#define\t\tB43legacy_DMA32_TXDPTR\t\t\t0x00000FFF\n#define\t\tB43legacy_DMA32_TXSTATE\t\t\t0x0000F000\n#define\t\t\tB43legacy_DMA32_TXSTAT_DISABLED\t0x00000000\n#define\t\t\tB43legacy_DMA32_TXSTAT_ACTIVE\t0x00001000\n#define\t\t\tB43legacy_DMA32_TXSTAT_IDLEWAIT\t0x00002000\n#define\t\t\tB43legacy_DMA32_TXSTAT_STOPPED\t0x00003000\n#define\t\t\tB43legacy_DMA32_TXSTAT_SUSP\t0x00004000\n#define\t\tB43legacy_DMA32_TXERROR\t\t\t0x000F0000\n#define\t\t\tB43legacy_DMA32_TXERR_NOERR\t0x00000000\n#define\t\t\tB43legacy_DMA32_TXERR_PROT\t0x00010000\n#define\t\t\tB43legacy_DMA32_TXERR_UNDERRUN\t0x00020000\n#define\t\t\tB43legacy_DMA32_TXERR_BUFREAD\t0x00030000\n#define\t\t\tB43legacy_DMA32_TXERR_DESCREAD\t0x00040000\n#define\t\tB43legacy_DMA32_TXACTIVE\t\t0xFFF00000\n#define B43legacy_DMA32_RXCTL\t\t\t\t0x10\n#define\t\tB43legacy_DMA32_RXENABLE\t\t0x00000001\n#define\t\tB43legacy_DMA32_RXFROFF_MASK\t\t0x000000FE\n#define\t\tB43legacy_DMA32_RXFROFF_SHIFT\t\t1\n#define\t\tB43legacy_DMA32_RXDIRECTFIFO\t\t0x00000100\n#define\t\tB43legacy_DMA32_RXADDREXT_MASK\t\t0x00030000\n#define\t\tB43legacy_DMA32_RXADDREXT_SHIFT\t\t16\n#define B43legacy_DMA32_RXRING\t\t\t\t0x14\n#define B43legacy_DMA32_RXINDEX\t\t\t\t0x18\n#define B43legacy_DMA32_RXSTATUS\t\t\t0x1C\n#define\t\tB43legacy_DMA32_RXDPTR\t\t\t0x00000FFF\n#define\t\tB43legacy_DMA32_RXSTATE\t\t\t0x0000F000\n#define\t\t\tB43legacy_DMA32_RXSTAT_DISABLED\t0x00000000\n#define\t\t\tB43legacy_DMA32_RXSTAT_ACTIVE\t0x00001000\n#define\t\t\tB43legacy_DMA32_RXSTAT_IDLEWAIT\t0x00002000\n#define\t\t\tB43legacy_DMA32_RXSTAT_STOPPED\t0x00003000\n#define\t\tB43legacy_DMA32_RXERROR\t\t\t0x000F0000\n#define\t\t\tB43legacy_DMA32_RXERR_NOERR\t0x00000000\n#define\t\t\tB43legacy_DMA32_RXERR_PROT\t0x00010000\n#define\t\t\tB43legacy_DMA32_RXERR_OVERFLOW\t0x00020000\n#define\t\t\tB43legacy_DMA32_RXERR_BUFWRITE\t0x00030000\n#define\t\t\tB43legacy_DMA32_RXERR_DESCREAD\t0x00040000\n#define\t\tB43legacy_DMA32_RXACTIVE\t\t0xFFF00000\n\n \nstruct b43legacy_dmadesc32 {\n\t__le32 control;\n\t__le32 address;\n} __packed;\n#define B43legacy_DMA32_DCTL_BYTECNT\t\t0x00001FFF\n#define B43legacy_DMA32_DCTL_ADDREXT_MASK\t0x00030000\n#define B43legacy_DMA32_DCTL_ADDREXT_SHIFT\t16\n#define B43legacy_DMA32_DCTL_DTABLEEND\t\t0x10000000\n#define B43legacy_DMA32_DCTL_IRQ\t\t0x20000000\n#define B43legacy_DMA32_DCTL_FRAMEEND\t\t0x40000000\n#define B43legacy_DMA32_DCTL_FRAMESTART\t\t0x80000000\n\n\n \n#define B43legacy_DMA_RINGMEMSIZE\tPAGE_SIZE\n#define B43legacy_DMA0_RX_FRAMEOFFSET\t30\n#define B43legacy_DMA3_RX_FRAMEOFFSET\t0\n\n\n \n#define B43legacy_TXRING_SLOTS\t\t128\n#define B43legacy_RXRING_SLOTS\t\t64\n#define B43legacy_DMA0_RX_BUFFERSIZE\t(2304 + 100)\n#define B43legacy_DMA3_RX_BUFFERSIZE\t16\n\n\n\n#ifdef CONFIG_B43LEGACY_DMA\n\n\nstruct sk_buff;\nstruct b43legacy_private;\nstruct b43legacy_txstatus;\n\n\nstruct b43legacy_dmadesc_meta {\n\t \n\tstruct sk_buff *skb;\n\t \n\tdma_addr_t dmaaddr;\n\t \n\tbool is_last_fragment;\n};\n\nenum b43legacy_dmatype {\n\tB43legacy_DMA_30BIT = 30,\n\tB43legacy_DMA_32BIT = 32,\n};\n\nstruct b43legacy_dmaring {\n\t \n\tvoid *descbase;\n\t \n\tstruct b43legacy_dmadesc_meta *meta;\n\t \n\tu8 *txhdr_cache;\n\t \n\tdma_addr_t dmabase;\n\t \n\tint nr_slots;\n\t \n\tint used_slots;\n\t \n\tint current_slot;\n\t \n\tu32 frameoffset;\n\t \n\tu16 rx_buffersize;\n\t \n\tu16 mmio_base;\n\t \n\tint index;\n\t \n\tbool tx;\n\t \n\tenum b43legacy_dmatype type;\n\t \n\tbool stopped;\n\t \n\tu8 queue_prio;\n\tstruct b43legacy_wldev *dev;\n#ifdef CONFIG_B43LEGACY_DEBUG\n\t \n\tint max_used_slots;\n\t \n\tunsigned long last_injected_overflow;\n#endif  \n};\n\n\nstatic inline\nu32 b43legacy_dma_read(struct b43legacy_dmaring *ring,\n\t\t       u16 offset)\n{\n\treturn b43legacy_read32(ring->dev, ring->mmio_base + offset);\n}\n\nstatic inline\nvoid b43legacy_dma_write(struct b43legacy_dmaring *ring,\n\t\t\t u16 offset, u32 value)\n{\n\tb43legacy_write32(ring->dev, ring->mmio_base + offset, value);\n}\n\n\nint b43legacy_dma_init(struct b43legacy_wldev *dev);\nvoid b43legacy_dma_free(struct b43legacy_wldev *dev);\n\nvoid b43legacy_dma_tx_suspend(struct b43legacy_wldev *dev);\nvoid b43legacy_dma_tx_resume(struct b43legacy_wldev *dev);\n\nint b43legacy_dma_tx(struct b43legacy_wldev *dev,\n\t\t     struct sk_buff *skb);\nvoid b43legacy_dma_handle_txstatus(struct b43legacy_wldev *dev,\n\t\t\t\t   const struct b43legacy_txstatus *status);\n\nvoid b43legacy_dma_rx(struct b43legacy_dmaring *ring);\n\n#else  \n\n\nstatic inline\nint b43legacy_dma_init(struct b43legacy_wldev *dev)\n{\n\treturn 0;\n}\nstatic inline\nvoid b43legacy_dma_free(struct b43legacy_wldev *dev)\n{\n}\nstatic inline\nint b43legacy_dma_tx(struct b43legacy_wldev *dev,\n\t\t     struct sk_buff *skb)\n{\n\treturn 0;\n}\nstatic inline\nvoid b43legacy_dma_handle_txstatus(struct b43legacy_wldev *dev,\n\t\t\t\t   const struct b43legacy_txstatus *status)\n{\n}\nstatic inline\nvoid b43legacy_dma_rx(struct b43legacy_dmaring *ring)\n{\n}\nstatic inline\nvoid b43legacy_dma_tx_suspend(struct b43legacy_wldev *dev)\n{\n}\nstatic inline\nvoid b43legacy_dma_tx_resume(struct b43legacy_wldev *dev)\n{\n}\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}