{
  "module_name": "xmit.h",
  "hash_id": "c509271b0f72ac9eeee28bc761fed4ed25230ebc608c26fbda2f22eb62f0259d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/broadcom/b43/xmit.h",
  "human_readable_source": " \n#ifndef B43_XMIT_H_\n#define B43_XMIT_H_\n\n#include \"main.h\"\n#include <net/mac80211.h>\n\n\n#define _b43_declare_plcp_hdr(size) \\\n\tstruct b43_plcp_hdr##size {\t\t\\\n\t\tunion {\t\t\t\t\\\n\t\t\t__le32 data;\t\t\\\n\t\t\t__u8 raw[size];\t\t\\\n\t\t} __packed;\t\\\n\t} __packed\n\n \n_b43_declare_plcp_hdr(4);\n \n_b43_declare_plcp_hdr(6);\n\n#undef _b43_declare_plcp_hdr\n\n \nstruct b43_txhdr {\n\t__le32 mac_ctl;\t\t\t \n\t__le16 mac_frame_ctl;\t\t \n\t__le16 tx_fes_time_norm;\t \n\t__le16 phy_ctl;\t\t\t \n\t__le16 phy_ctl1;\t\t \n\t__le16 phy_ctl1_fb;\t\t \n\t__le16 phy_ctl1_rts;\t\t \n\t__le16 phy_ctl1_rts_fb;\t\t \n\t__u8 phy_rate;\t\t\t \n\t__u8 phy_rate_rts;\t\t \n\t__u8 extra_ft;\t\t\t \n\t__u8 chan_radio_code;\t\t \n\t__u8 iv[16];\t\t\t \n\t__u8 tx_receiver[6];\t\t \n\t__le16 tx_fes_time_fb;\t\t \n\tstruct b43_plcp_hdr6 rts_plcp_fb;  \n\t__le16 rts_dur_fb;\t\t \n\tstruct b43_plcp_hdr6 plcp_fb;\t \n\t__le16 dur_fb;\t\t\t \n\t__le16 mimo_modelen;\t\t \n\t__le16 mimo_ratelen_fb;\t\t \n\t__le32 timeout;\t\t\t \n\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\t__le16 mimo_antenna;             \n\t\t\t__le16 preload_size;             \n\t\t\tPAD_BYTES(2);\n\t\t\t__le16 cookie;                   \n\t\t\t__le16 tx_status;                \n\t\t\t__le16 max_n_mpdus;\n\t\t\t__le16 max_a_bytes_mrt;\n\t\t\t__le16 max_a_bytes_fbr;\n\t\t\t__le16 min_m_bytes;\n\t\t\tstruct b43_plcp_hdr6 rts_plcp;   \n\t\t\t__u8 rts_frame[16];              \n\t\t\tPAD_BYTES(2);\n\t\t\tstruct b43_plcp_hdr6 plcp;       \n\t\t} format_598 __packed;\n\n\t\t \n\t\tstruct {\n\t\t\t__le16 mimo_antenna;\t\t \n\t\t\t__le16 preload_size;\t\t \n\t\t\tPAD_BYTES(2);\n\t\t\t__le16 cookie;\t\t\t \n\t\t\t__le16 tx_status;\t\t \n\t\t\tstruct b43_plcp_hdr6 rts_plcp;\t \n\t\t\t__u8 rts_frame[16];\t\t \n\t\t\tPAD_BYTES(2);\n\t\t\tstruct b43_plcp_hdr6 plcp;\t \n\t\t} format_410 __packed;\n\n\t\t \n\t\tstruct {\n\t\t\tPAD_BYTES(2);\n\t\t\t__le16 cookie;\t\t\t \n\t\t\t__le16 tx_status;\t\t \n\t\t\tstruct b43_plcp_hdr6 rts_plcp;\t \n\t\t\t__u8 rts_frame[16];\t\t \n\t\t\tPAD_BYTES(2);\n\t\t\tstruct b43_plcp_hdr6 plcp;\t \n\t\t} format_351 __packed;\n\n\t} __packed;\n} __packed;\n\nstruct b43_tx_legacy_rate_phy_ctl_entry {\n\tu8 bitrate;\n\tu16 coding_rate;\n\tu16 modulation;\n};\n\n \n#define B43_TXH_MAC_RTS_FB_SHORTPRMBL\t0x80000000  \n#define B43_TXH_MAC_RTS_SHORTPRMBL\t0x40000000  \n#define B43_TXH_MAC_FB_SHORTPRMBL\t0x20000000  \n#define B43_TXH_MAC_USEFBR\t\t0x10000000  \n#define B43_TXH_MAC_KEYIDX\t\t0x0FF00000  \n#define B43_TXH_MAC_KEYIDX_SHIFT\t20\n#define B43_TXH_MAC_ALT_TXPWR\t\t0x00080000  \n#define B43_TXH_MAC_KEYALG\t\t0x00070000  \n#define B43_TXH_MAC_KEYALG_SHIFT\t16\n#define B43_TXH_MAC_AMIC\t\t0x00008000  \n#define B43_TXH_MAC_RIFS\t\t0x00004000  \n#define B43_TXH_MAC_LIFETIME\t\t0x00002000  \n#define B43_TXH_MAC_FRAMEBURST\t\t0x00001000  \n#define B43_TXH_MAC_SENDCTS\t\t0x00000800  \n#define B43_TXH_MAC_AMPDU\t\t0x00000600  \n#define  B43_TXH_MAC_AMPDU_MPDU\t\t0x00000000  \n#define  B43_TXH_MAC_AMPDU_FIRST\t0x00000200  \n#define  B43_TXH_MAC_AMPDU_INTER\t0x00000400  \n#define  B43_TXH_MAC_AMPDU_LAST\t\t0x00000600  \n#define B43_TXH_MAC_40MHZ\t\t0x00000100  \n#define B43_TXH_MAC_5GHZ\t\t0x00000080  \n#define B43_TXH_MAC_DFCS\t\t0x00000040  \n#define B43_TXH_MAC_IGNPMQ\t\t0x00000020  \n#define B43_TXH_MAC_HWSEQ\t\t0x00000010  \n#define B43_TXH_MAC_STMSDU\t\t0x00000008  \n#define B43_TXH_MAC_SENDRTS\t\t0x00000004  \n#define B43_TXH_MAC_LONGFRAME\t\t0x00000002  \n#define B43_TXH_MAC_ACK\t\t\t0x00000001  \n\n \n#define B43_TXH_EFT_FB\t\t\t0x03  \n#define  B43_TXH_EFT_FB_CCK\t\t0x00  \n#define  B43_TXH_EFT_FB_OFDM\t\t0x01  \n#define  B43_TXH_EFT_FB_HT\t\t0x02  \n#define  B43_TXH_EFT_FB_VHT\t\t0x03  \n#define B43_TXH_EFT_RTS\t\t\t0x0C  \n#define  B43_TXH_EFT_RTS_CCK\t\t0x00  \n#define  B43_TXH_EFT_RTS_OFDM\t\t0x04  \n#define  B43_TXH_EFT_RTS_HT\t\t0x08  \n#define  B43_TXH_EFT_RTS_VHT\t\t0x0C  \n#define B43_TXH_EFT_RTSFB\t\t0x30  \n#define  B43_TXH_EFT_RTSFB_CCK\t\t0x00  \n#define  B43_TXH_EFT_RTSFB_OFDM\t\t0x10  \n#define  B43_TXH_EFT_RTSFB_HT\t\t0x20  \n#define  B43_TXH_EFT_RTSFB_VHT\t\t0x30  \n\n \n#define B43_TXH_PHY_ENC\t\t\t0x0003  \n#define  B43_TXH_PHY_ENC_CCK\t\t0x0000  \n#define  B43_TXH_PHY_ENC_OFDM\t\t0x0001  \n#define  B43_TXH_PHY_ENC_HT\t\t0x0002  \n#define  B43_TXH_PHY_ENC_VHT\t\t0x0003  \n#define B43_TXH_PHY_SHORTPRMBL\t\t0x0010  \n#define B43_TXH_PHY_ANT\t\t\t0x03C0  \n#define  B43_TXH_PHY_ANT0\t\t0x0000  \n#define  B43_TXH_PHY_ANT1\t\t0x0040  \n#define  B43_TXH_PHY_ANT01AUTO\t\t0x00C0  \n#define  B43_TXH_PHY_ANT2\t\t0x0100  \n#define  B43_TXH_PHY_ANT3\t\t0x0200  \n#define B43_TXH_PHY_TXPWR\t\t0xFC00  \n#define B43_TXH_PHY_TXPWR_SHIFT\t\t10\n\n \n#define B43_TXH_PHY1_BW\t\t\t0x0007  \n#define  B43_TXH_PHY1_BW_10\t\t0x0000  \n#define  B43_TXH_PHY1_BW_10U\t\t0x0001  \n#define  B43_TXH_PHY1_BW_20\t\t0x0002  \n#define  B43_TXH_PHY1_BW_20U\t\t0x0003  \n#define  B43_TXH_PHY1_BW_40\t\t0x0004  \n#define  B43_TXH_PHY1_BW_40DUP\t\t0x0005  \n#define B43_TXH_PHY1_MODE\t\t0x0038  \n#define  B43_TXH_PHY1_MODE_SISO\t\t0x0000  \n#define  B43_TXH_PHY1_MODE_CDD\t\t0x0008  \n#define  B43_TXH_PHY1_MODE_STBC\t\t0x0010  \n#define  B43_TXH_PHY1_MODE_SDM\t\t0x0018  \n#define B43_TXH_PHY1_CRATE\t\t0x0700  \n#define  B43_TXH_PHY1_CRATE_1_2\t\t0x0000  \n#define  B43_TXH_PHY1_CRATE_2_3\t\t0x0100  \n#define  B43_TXH_PHY1_CRATE_3_4\t\t0x0200  \n#define  B43_TXH_PHY1_CRATE_4_5\t\t0x0300  \n#define  B43_TXH_PHY1_CRATE_5_6\t\t0x0400  \n#define  B43_TXH_PHY1_CRATE_7_8\t\t0x0600  \n#define B43_TXH_PHY1_MODUL\t\t0x3800  \n#define  B43_TXH_PHY1_MODUL_BPSK\t0x0000  \n#define  B43_TXH_PHY1_MODUL_QPSK\t0x0800  \n#define  B43_TXH_PHY1_MODUL_QAM16\t0x1000  \n#define  B43_TXH_PHY1_MODUL_QAM64\t0x1800  \n#define  B43_TXH_PHY1_MODUL_QAM256\t0x2000  \n\n\nstatic inline\nsize_t b43_txhdr_size(struct b43_wldev *dev)\n{\n\tswitch (dev->fw.hdr_format) {\n\tcase B43_FW_HDR_598:\n\t\treturn 112 + sizeof(struct b43_plcp_hdr6);\n\tcase B43_FW_HDR_410:\n\t\treturn 104 + sizeof(struct b43_plcp_hdr6);\n\tcase B43_FW_HDR_351:\n\t\treturn 100 + sizeof(struct b43_plcp_hdr6);\n\t}\n\treturn 0;\n}\n\n\nint b43_generate_txhdr(struct b43_wldev *dev,\n\t\t       u8 * txhdr,\n\t\t       struct sk_buff *skb_frag,\n\t\t       struct ieee80211_tx_info *txctl, u16 cookie);\n\n \nstruct b43_txstatus {\n\tu16 cookie;\t\t \n\tu16 seq;\t\t \n\tu8 phy_stat;\t\t \n\tu8 frame_count;\t\t \n\tu8 rts_count;\t\t \n\tu8 supp_reason;\t\t \n\t \n\tu8 pm_indicated;\t \n\tu8 intermediate;\t \n\tu8 for_ampdu;\t\t \n\tu8 acked;\t\t \n};\n\n \nenum {\n\tB43_TXST_SUPP_NONE,\t \n\tB43_TXST_SUPP_PMQ,\t \n\tB43_TXST_SUPP_FLUSH,\t \n\tB43_TXST_SUPP_PREV,\t \n\tB43_TXST_SUPP_CHAN,\t \n\tB43_TXST_SUPP_LIFE,\t \n\tB43_TXST_SUPP_UNDER,\t \n\tB43_TXST_SUPP_ABNACK,\t \n};\n\n \nstruct b43_rxhdr_fw4 {\n\t__le16 frame_len;\t \n\t PAD_BYTES(2);\n\t__le16 phy_status0;\t \n\tunion {\n\t\t \n\t\tstruct {\n\t\t\t__u8 jssi;\t \n\t\t\t__u8 sig_qual;\t \n\t\t} __packed;\n\n\t\t \n\t\tstruct {\n\t\t\t__s8 power0;\t \n\t\t\t__s8 power1;\t \n\t\t} __packed;\n\t} __packed;\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\tPAD_BYTES(1);\n\t\t\t__s8 phy_ht_power0;\n\t\t} __packed;\n\n\t\t \n\t\tstruct {\n\t\t\t__s8 power2;\n\t\t\tPAD_BYTES(1);\n\t\t} __packed;\n\n\t\t__le16 phy_status2;\t \n\t} __packed;\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\t__s8 phy_ht_power1;\n\t\t\t__s8 phy_ht_power2;\n\t\t} __packed;\n\n\t\t__le16 phy_status3;\t \n\t} __packed;\n\tunion {\n\t\t \n\t\tstruct {\n\t\t\t__le16 phy_status4;\t \n\t\t\t__le16 phy_status5;\t \n\t\t\t__le32 mac_status;\t \n\t\t\t__le16 mac_time;\n\t\t\t__le16 channel;\n\t\t} format_598 __packed;\n\n\t\t \n\t\tstruct {\n\t\t\t__le32 mac_status;\t \n\t\t\t__le16 mac_time;\n\t\t\t__le16 channel;\n\t\t} format_351 __packed;\n\t} __packed;\n} __packed;\n\n \n#define B43_RX_PHYST0_GAINCTL\t\t0x4000  \n#define B43_RX_PHYST0_PLCPHCF\t\t0x0200\n#define B43_RX_PHYST0_PLCPFV\t\t0x0100\n#define B43_RX_PHYST0_SHORTPRMBL\t0x0080  \n#define B43_RX_PHYST0_LCRS\t\t0x0040\n#define B43_RX_PHYST0_ANT\t\t0x0020  \n#define B43_RX_PHYST0_UNSRATE\t\t0x0010\n#define B43_RX_PHYST0_CLIP\t\t0x000C\n#define B43_RX_PHYST0_CLIP_SHIFT\t2\n#define B43_RX_PHYST0_FTYPE\t\t0x0003  \n#define  B43_RX_PHYST0_CCK\t\t0x0000  \n#define  B43_RX_PHYST0_OFDM\t\t0x0001  \n#define  B43_RX_PHYST0_PRE_N\t\t0x0002  \n#define  B43_RX_PHYST0_STD_N\t\t0x0003  \n\n \n#define B43_RX_PHYST2_LNAG\t\t0xC000  \n#define B43_RX_PHYST2_LNAG_SHIFT\t14\n#define B43_RX_PHYST2_PNAG\t\t0x3C00  \n#define B43_RX_PHYST2_PNAG_SHIFT\t10\n#define B43_RX_PHYST2_FOFF\t\t0x03FF  \n\n \n#define B43_RX_PHYST3_DIGG\t\t0x1800  \n#define B43_RX_PHYST3_DIGG_SHIFT\t11\n#define B43_RX_PHYST3_TRSTATE\t\t0x0400  \n\n \n#define B43_RX_MAC_RXST_VALID\t\t0x01000000  \n#define B43_RX_MAC_TKIP_MICERR\t\t0x00100000  \n#define B43_RX_MAC_TKIP_MICATT\t\t0x00080000  \n#define B43_RX_MAC_AGGTYPE\t\t0x00060000  \n#define B43_RX_MAC_AGGTYPE_SHIFT\t17\n#define B43_RX_MAC_AMSDU\t\t0x00010000  \n#define B43_RX_MAC_BEACONSENT\t\t0x00008000  \n#define B43_RX_MAC_KEYIDX\t\t0x000007E0  \n#define B43_RX_MAC_KEYIDX_SHIFT\t\t5\n#define B43_RX_MAC_DECERR\t\t0x00000010  \n#define B43_RX_MAC_DEC\t\t\t0x00000008  \n#define B43_RX_MAC_PADDING\t\t0x00000004  \n#define B43_RX_MAC_RESP\t\t\t0x00000002  \n#define B43_RX_MAC_FCSERR\t\t0x00000001  \n\n \n#define B43_RX_CHAN_40MHZ\t\t0x1000  \n#define B43_RX_CHAN_5GHZ\t\t0x0800  \n#define B43_RX_CHAN_ID\t\t\t0x07F8  \n#define B43_RX_CHAN_ID_SHIFT\t\t3\n#define B43_RX_CHAN_PHYTYPE\t\t0x0007  \n\n\nu8 b43_plcp_get_ratecode_cck(const u8 bitrate);\nu8 b43_plcp_get_ratecode_ofdm(const u8 bitrate);\n\nvoid b43_generate_plcp_hdr(struct b43_plcp_hdr4 *plcp,\n\t\t\t   const u16 octets, const u8 bitrate);\n\nvoid b43_rx(struct b43_wldev *dev, struct sk_buff *skb, const void *_rxhdr);\n\nvoid b43_handle_txstatus(struct b43_wldev *dev,\n\t\t\t const struct b43_txstatus *status);\nbool b43_fill_txstatus_report(struct b43_wldev *dev,\n\t\t\t      struct ieee80211_tx_info *report,\n\t\t\t      const struct b43_txstatus *status);\n\nvoid b43_tx_suspend(struct b43_wldev *dev);\nvoid b43_tx_resume(struct b43_wldev *dev);\n\n\n \nstatic inline int b43_new_kidx_api(struct b43_wldev *dev)\n{\n\t \n\treturn (dev->fw.rev >= 351);\n}\nstatic inline u8 b43_kidx_to_fw(struct b43_wldev *dev, u8 raw_kidx)\n{\n\tu8 firmware_kidx;\n\tif (b43_new_kidx_api(dev)) {\n\t\tfirmware_kidx = raw_kidx;\n\t} else {\n\t\tif (raw_kidx >= 4)\t \n\t\t\tfirmware_kidx = raw_kidx - 4;\n\t\telse\n\t\t\tfirmware_kidx = raw_kidx;\t \n\t}\n\treturn firmware_kidx;\n}\nstatic inline u8 b43_kidx_to_raw(struct b43_wldev *dev, u8 firmware_kidx)\n{\n\tu8 raw_kidx;\n\tif (b43_new_kidx_api(dev))\n\t\traw_kidx = firmware_kidx;\n\telse\n\t\traw_kidx = firmware_kidx + 4;\t \n\treturn raw_kidx;\n}\n\n \nstruct b43_private_tx_info {\n\tvoid *bouncebuffer;\n};\n\nstatic inline struct b43_private_tx_info *\nb43_get_priv_tx_info(struct ieee80211_tx_info *info)\n{\n\tBUILD_BUG_ON(sizeof(struct b43_private_tx_info) >\n\t\t     sizeof(info->rate_driver_data));\n\treturn (struct b43_private_tx_info *)info->rate_driver_data;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}