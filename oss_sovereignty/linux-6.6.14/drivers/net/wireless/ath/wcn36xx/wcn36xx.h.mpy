{
  "module_name": "wcn36xx.h",
  "hash_id": "34054bc7fdef5cc5f3ca64c1a740974c12ca38472df1b5d3f001d40d20efe1e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/wcn36xx/wcn36xx.h",
  "human_readable_source": " \n\n#ifndef _WCN36XX_H_\n#define _WCN36XX_H_\n\n#include <linux/completion.h>\n#include <linux/in6.h>\n#include <linux/printk.h>\n#include <linux/spinlock.h>\n#include <net/mac80211.h>\n\n#include \"hal.h\"\n#include \"smd.h\"\n#include \"txrx.h\"\n#include \"dxe.h\"\n#include \"pmc.h\"\n#include \"debug.h\"\n\n#define WLAN_NV_FILE               \"wlan/prima/WCNSS_qcom_wlan_nv.bin\"\n#define WCN36XX_AGGR_BUFFER_SIZE 64\n\nextern unsigned int wcn36xx_dbg_mask;\n\nenum wcn36xx_debug_mask {\n\tWCN36XX_DBG_DXE\t\t= 0x00000001,\n\tWCN36XX_DBG_DXE_DUMP\t= 0x00000002,\n\tWCN36XX_DBG_SMD\t\t= 0x00000004,\n\tWCN36XX_DBG_SMD_DUMP\t= 0x00000008,\n\tWCN36XX_DBG_RX\t\t= 0x00000010,\n\tWCN36XX_DBG_RX_DUMP\t= 0x00000020,\n\tWCN36XX_DBG_TX\t\t= 0x00000040,\n\tWCN36XX_DBG_TX_DUMP\t= 0x00000080,\n\tWCN36XX_DBG_HAL\t\t= 0x00000100,\n\tWCN36XX_DBG_HAL_DUMP\t= 0x00000200,\n\tWCN36XX_DBG_MAC\t\t= 0x00000400,\n\tWCN36XX_DBG_BEACON\t= 0x00000800,\n\tWCN36XX_DBG_BEACON_DUMP\t= 0x00001000,\n\tWCN36XX_DBG_PMC\t\t= 0x00002000,\n\tWCN36XX_DBG_PMC_DUMP\t= 0x00004000,\n\tWCN36XX_DBG_TESTMODE\t\t= 0x00008000,\n\tWCN36XX_DBG_TESTMODE_DUMP\t= 0x00010000,\n\tWCN36XX_DBG_ANY\t\t= 0xffffffff,\n};\n\n#define wcn36xx_err(fmt, arg...)\t\t\t\t\\\n\tprintk(KERN_ERR pr_fmt(\"ERROR \" fmt), ##arg)\n\n#define wcn36xx_warn(fmt, arg...)\t\t\t\t\\\n\tprintk(KERN_WARNING pr_fmt(\"WARNING \" fmt), ##arg)\n\n#define wcn36xx_info(fmt, arg...)\t\t\\\n\tprintk(KERN_INFO pr_fmt(fmt), ##arg)\n\n#define wcn36xx_dbg(mask, fmt, arg...) do {\t\t\t\\\n\tif (wcn36xx_dbg_mask & mask)\t\t\t\t\t\\\n\t\tprintk(KERN_DEBUG pr_fmt(fmt), ##arg);\t\\\n} while (0)\n\n#define wcn36xx_dbg_dump(mask, prefix_str, buf, len) do {\t\\\n\tif (wcn36xx_dbg_mask & mask)\t\t\t\t\t\\\n\t\tprint_hex_dump(KERN_DEBUG, pr_fmt(prefix_str),\t\\\n\t\t\t       DUMP_PREFIX_OFFSET, 32, 1,\t\\\n\t\t\t       buf, len, false);\t\t\\\n} while (0)\n\nenum wcn36xx_ampdu_state {\n\tWCN36XX_AMPDU_NONE,\n\tWCN36XX_AMPDU_INIT,\n\tWCN36XX_AMPDU_START,\n\tWCN36XX_AMPDU_OPERATIONAL,\n};\n\n#define HW_VALUE_PHY_SHIFT 8\n#define HW_VALUE_PHY(hw_value) ((hw_value) >> HW_VALUE_PHY_SHIFT)\n#define HW_VALUE_CHANNEL(hw_value) ((hw_value) & 0xFF)\n#define WCN36XX_HW_CHANNEL(__wcn)\\\n\tHW_VALUE_CHANNEL(__wcn->hw->conf.chandef.chan->hw_value)\n#define WCN36XX_BAND(__wcn) (__wcn->hw->conf.chandef.chan->band)\n#define WCN36XX_CENTER_FREQ(__wcn) (__wcn->hw->conf.chandef.chan->center_freq)\n#define WCN36XX_LISTEN_INTERVAL(__wcn) (__wcn->hw->conf.listen_interval)\n#define WCN36XX_FLAGS(__wcn) (__wcn->hw->flags)\n#define WCN36XX_MAX_POWER(__wcn) (__wcn->hw->conf.chandef.chan->max_power)\n\n#define RF_UNKNOWN\t0x0000\n#define RF_IRIS_WCN3620\t0x3620\n#define RF_IRIS_WCN3660\t0x3660\n#define RF_IRIS_WCN3680\t0x3680\n\nstatic inline void buff_to_be(u32 *buf, size_t len)\n{\n\tint i;\n\tfor (i = 0; i < len; i++)\n\t\tbuf[i] = cpu_to_be32(buf[i]);\n}\n\nstruct nv_data {\n\tint\tis_valid;\n\tu8\ttable;\n};\n\n \nstruct wcn36xx_vif {\n\tstruct list_head list;\n\tu8 dtim_period;\n\tenum ani_ed_type encrypt_type;\n\tbool is_joining;\n\tbool sta_assoc;\n\tstruct wcn36xx_hal_mac_ssid ssid;\n\tenum wcn36xx_hal_bss_type bss_type;\n\n\t \n\tenum wcn36xx_power_state pw_state;\n\n\tu8 bss_index;\n\t \n\tu8 self_sta_index;\n\tu8 self_dpu_desc_index;\n\tu8 self_ucast_dpu_sign;\n\n#if IS_ENABLED(CONFIG_IPV6)\n\t \n\tstruct in6_addr target_ipv6_addrs[WCN36XX_HAL_IPV6_OFFLOAD_ADDR_MAX];\n\tunsigned long tentative_addrs[BITS_TO_LONGS(WCN36XX_HAL_IPV6_OFFLOAD_ADDR_MAX)];\n\tint num_target_ipv6_addrs;\n#endif\n\t \n\tstruct {\n\t\tu8 kck[NL80211_KCK_LEN], kek[NL80211_KEK_LEN];\n\t\t__le64 replay_ctr;\n\t\tbool valid;\n\t} rekey_data;\n\n\tstruct list_head sta_list;\n\n\tint bmps_fail_ct;\n};\n\n \nstruct wcn36xx_sta {\n\tstruct list_head list;\n\tstruct wcn36xx_vif *vif;\n\tu16 aid;\n\tu16 tid;\n\tu8 sta_index;\n\tu8 dpu_desc_index;\n\tu8 ucast_dpu_sign;\n\tu8 bss_sta_index;\n\tu8 bss_dpu_desc_index;\n\tbool is_data_encrypted;\n\t \n\tstruct wcn36xx_hal_supported_rates_v1 supported_rates;\n\n\tspinlock_t ampdu_lock;\t\t \n\tenum wcn36xx_ampdu_state ampdu_state[16];\n\tint non_agg_frame_ct;\n};\n\nstruct wcn36xx_dxe_ch;\n\nstruct wcn36xx_chan_survey {\n\ts8\trssi;\n\tu8\tsnr;\n};\n\nstruct wcn36xx {\n\tstruct ieee80211_hw\t*hw;\n\tstruct device\t\t*dev;\n\tstruct list_head\tvif_list;\n\n\tconst char\t\t*nv_file;\n\tconst struct firmware\t*nv;\n\n\tu8\t\t\tfw_revision;\n\tu8\t\t\tfw_version;\n\tu8\t\t\tfw_minor;\n\tu8\t\t\tfw_major;\n\tu32\t\t\tfw_feat_caps[WCN36XX_HAL_CAPS_SIZE];\n\tbool\t\t\tis_pronto;\n\tbool\t\t\tis_pronto_v3;\n\n\t \n\tu8\t\t\tcrm_version[WCN36XX_HAL_VERSION_LENGTH + 1];\n\tu8\t\t\twlan_version[WCN36XX_HAL_VERSION_LENGTH + 1];\n\n\tbool\t\tfirst_boot;\n\n\t \n\tint\t\t\ttx_irq;\n\tint\t\t\trx_irq;\n\tvoid __iomem\t\t*ccu_base;\n\tvoid __iomem\t\t*dxe_base;\n\n\tstruct rpmsg_endpoint\t*smd_channel;\n\n\tstruct qcom_smem_state  *tx_enable_state;\n\tunsigned\t\ttx_enable_state_bit;\n\tstruct qcom_smem_state\t*tx_rings_empty_state;\n\tunsigned\t\ttx_rings_empty_state_bit;\n\n\t \n\tstruct mutex\t\tconf_mutex;\n\n\t \n\tu8\t\t\t*hal_buf;\n\tsize_t\t\t\thal_rsp_len;\n\tstruct mutex\t\thal_mutex;\n\tstruct completion\thal_rsp_compl;\n\tstruct workqueue_struct\t*hal_ind_wq;\n\tstruct work_struct\thal_ind_work;\n\tspinlock_t\t\thal_ind_lock;\n\tstruct list_head\thal_ind_queue;\n\n\tstruct cfg80211_scan_request *scan_req;\n\tbool\t\t\tsw_scan;\n\tu8\t\t\tsw_scan_opchannel;\n\tbool\t\t\tsw_scan_init;\n\tu8\t\t\tsw_scan_channel;\n\tstruct ieee80211_vif\t*sw_scan_vif;\n\tstruct mutex\t\tscan_lock;\n\tbool\t\t\tscan_aborted;\n\n\t \n\tstruct wcn36xx_dxe_ch\tdxe_tx_l_ch;\t \n\tstruct wcn36xx_dxe_ch\tdxe_tx_h_ch;\t \n\tstruct wcn36xx_dxe_ch\tdxe_rx_l_ch;\t \n\tstruct wcn36xx_dxe_ch\tdxe_rx_h_ch;\t \n\n\t \n\tspinlock_t\tdxe_lock;\n\tbool                    queues_stopped;\n\n\t \n\tstruct wcn36xx_dxe_mem_pool mgmt_mem_pool;\n\tstruct wcn36xx_dxe_mem_pool data_mem_pool;\n\n\tstruct sk_buff\t\t*tx_ack_skb;\n\tstruct timer_list\ttx_ack_timer;\n\n\t \n\tstruct sk_buff_head amsdu;\n\n\t \n\tunsigned\t\trf_id;\n\n#ifdef CONFIG_WCN36XX_DEBUGFS\n\t \n\tstruct wcn36xx_dfs_entry    dfs;\n#endif  \n\n\tstruct ieee80211_supported_band *band;\n\tstruct ieee80211_channel *channel;\n\n\tspinlock_t survey_lock;\t\t \n\tstruct wcn36xx_chan_survey\t*chan_survey;\n};\n\nstatic inline bool wcn36xx_is_fw_version(struct wcn36xx *wcn,\n\t\t\t\t\t u8 major,\n\t\t\t\t\t u8 minor,\n\t\t\t\t\t u8 version,\n\t\t\t\t\t u8 revision)\n{\n\treturn (wcn->fw_major == major &&\n\t\twcn->fw_minor == minor &&\n\t\twcn->fw_version == version &&\n\t\twcn->fw_revision == revision);\n}\nvoid wcn36xx_set_default_rates(struct wcn36xx_hal_supported_rates *rates);\nvoid wcn36xx_set_default_rates_v1(struct wcn36xx_hal_supported_rates_v1 *rates);\n\nstatic inline\nstruct ieee80211_sta *wcn36xx_priv_to_sta(struct wcn36xx_sta *sta_priv)\n{\n\treturn container_of((void *)sta_priv, struct ieee80211_sta, drv_priv);\n}\n\nstatic inline\nstruct wcn36xx_vif *wcn36xx_vif_to_priv(struct ieee80211_vif *vif)\n{\n\treturn (struct wcn36xx_vif *) vif->drv_priv;\n}\n\nstatic inline\nstruct ieee80211_vif *wcn36xx_priv_to_vif(struct wcn36xx_vif *vif_priv)\n{\n\treturn container_of((void *) vif_priv, struct ieee80211_vif, drv_priv);\n}\n\nstatic inline\nstruct wcn36xx_sta *wcn36xx_sta_to_priv(struct ieee80211_sta *sta)\n{\n\treturn (struct wcn36xx_sta *)sta->drv_priv;\n}\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}