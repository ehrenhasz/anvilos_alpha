{
  "module_name": "ath5k.h",
  "hash_id": "be3f46f45b50324939634a5f91176702f588fc11ccb7a50adb46dacbd4b6615a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath5k/ath5k.h",
  "human_readable_source": " \n\n#ifndef _ATH5K_H\n#define _ATH5K_H\n\n \n#define CHAN_DEBUG\t0\n\n#include <linux/io.h>\n#include <linux/interrupt.h>\n#include <linux/types.h>\n#include <linux/average.h>\n#include <linux/leds.h>\n#include <net/mac80211.h>\n#include <net/cfg80211.h>\n\n \n#include \"desc.h\"\n\n \n#include \"eeprom.h\"\n#include \"debug.h\"\n#include \"../ath.h\"\n#include \"ani.h\"\n\n \n#define PCI_DEVICE_ID_ATHEROS_AR5210\t\t0x0007  \n#define PCI_DEVICE_ID_ATHEROS_AR5311\t\t0x0011  \n#define PCI_DEVICE_ID_ATHEROS_AR5211\t\t0x0012  \n#define PCI_DEVICE_ID_ATHEROS_AR5212\t\t0x0013  \n#define PCI_DEVICE_ID_3COM_3CRDAG675\t\t0x0013  \n#define PCI_DEVICE_ID_3COM_2_3CRPAG175\t\t0x0013  \n#define PCI_DEVICE_ID_ATHEROS_AR5210_AP\t\t0x0207  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_IBM\t0x1014  \n#define PCI_DEVICE_ID_ATHEROS_AR5210_DEFAULT\t0x1107  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_DEFAULT\t0x1113  \n#define PCI_DEVICE_ID_ATHEROS_AR5211_DEFAULT\t0x1112  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_FPGA\t0xf013  \n#define PCI_DEVICE_ID_ATHEROS_AR5211_LEGACY\t0xff12  \n#define PCI_DEVICE_ID_ATHEROS_AR5211_FPGA11B\t0xf11b  \n#define PCI_DEVICE_ID_ATHEROS_AR5312_REV2\t0x0052  \n#define PCI_DEVICE_ID_ATHEROS_AR5312_REV7\t0x0057  \n#define PCI_DEVICE_ID_ATHEROS_AR5312_REV8\t0x0058  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0014\t0x0014  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0015\t0x0015  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0016\t0x0016  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0017\t0x0017  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0018\t0x0018  \n#define PCI_DEVICE_ID_ATHEROS_AR5212_0019\t0x0019  \n#define PCI_DEVICE_ID_ATHEROS_AR2413\t\t0x001a  \n#define PCI_DEVICE_ID_ATHEROS_AR5413\t\t0x001b  \n#define PCI_DEVICE_ID_ATHEROS_AR5424\t\t0x001c  \n#define PCI_DEVICE_ID_ATHEROS_AR5416\t\t0x0023  \n#define PCI_DEVICE_ID_ATHEROS_AR5418\t\t0x0024  \n\n \n\n#define ATH5K_PRINTF(fmt, ...)\t\t\t\t\t\t\\\n\tpr_warn(\"%s: \" fmt, __func__, ##__VA_ARGS__)\n\nvoid __printf(3, 4)\n_ath5k_printk(const struct ath5k_hw *ah, const char *level,\n\t      const char *fmt, ...);\n\n#define ATH5K_PRINTK(_sc, _level, _fmt, ...)\t\t\t\t\\\n\t_ath5k_printk(_sc, _level, _fmt, ##__VA_ARGS__)\n\n#define ATH5K_PRINTK_LIMIT(_sc, _level, _fmt, ...)\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (net_ratelimit())\t\t\t\t\t\t\\\n\t\tATH5K_PRINTK(_sc, _level, _fmt, ##__VA_ARGS__); \t\\\n} while (0)\n\n#define ATH5K_INFO(_sc, _fmt, ...)\t\t\t\t\t\\\n\tATH5K_PRINTK(_sc, KERN_INFO, _fmt, ##__VA_ARGS__)\n\n#define ATH5K_WARN(_sc, _fmt, ...)\t\t\t\t\t\\\n\tATH5K_PRINTK_LIMIT(_sc, KERN_WARNING, _fmt, ##__VA_ARGS__)\n\n#define ATH5K_ERR(_sc, _fmt, ...)\t\t\t\t\t\\\n\tATH5K_PRINTK_LIMIT(_sc, KERN_ERR, _fmt, ##__VA_ARGS__)\n\n \n\n \n\n \n#define AR5K_REG_SM(_val, _flags)\t\t\t\t\t\\\n\t(((_val) << _flags##_S) & (_flags))\n\n \n#define AR5K_REG_MS(_val, _flags)\t\t\t\t\t\\\n\t(((_val) & (_flags)) >> _flags##_S)\n\n \n#define AR5K_REG_WRITE_BITS(ah, _reg, _flags, _val)\t\t\t\\\n\tath5k_hw_reg_write(ah, (ath5k_hw_reg_read(ah, _reg) & ~(_flags)) | \\\n\t    (((_val) << _flags##_S) & (_flags)), _reg)\n\n#define AR5K_REG_MASKED_BITS(ah, _reg, _flags, _mask)\t\t\t\\\n\tath5k_hw_reg_write(ah, (ath5k_hw_reg_read(ah, _reg) &\t\t\\\n\t\t\t(_mask)) | (_flags), _reg)\n\n#define AR5K_REG_ENABLE_BITS(ah, _reg, _flags)\t\t\t\t\\\n\tath5k_hw_reg_write(ah, ath5k_hw_reg_read(ah, _reg) | (_flags), _reg)\n\n#define AR5K_REG_DISABLE_BITS(ah, _reg, _flags)\t\t\t\\\n\tath5k_hw_reg_write(ah, ath5k_hw_reg_read(ah, _reg) & ~(_flags), _reg)\n\n \n#define AR5K_REG_READ_Q(ah, _reg, _queue)\t\t\t\t\\\n\t(ath5k_hw_reg_read(ah, _reg) & (1 << _queue))\t\t\t\\\n\n#define AR5K_REG_WRITE_Q(ah, _reg, _queue)\t\t\t\t\\\n\tath5k_hw_reg_write(ah, (1 << _queue), _reg)\n\n#define AR5K_Q_ENABLE_BITS(_reg, _queue) do {\t\t\t\t\\\n\t_reg |= 1 << _queue;\t\t\t\t\t\t\\\n} while (0)\n\n#define AR5K_Q_DISABLE_BITS(_reg, _queue) do {\t\t\t\t\\\n\t_reg &= ~(1 << _queue);\t\t\t\t\t\t\\\n} while (0)\n\n \n#define AR5K_REG_WAIT(_i) do {\t\t\t\t\t\t\\\n\tif (_i % 64)\t\t\t\t\t\t\t\\\n\t\tudelay(1);\t\t\t\t\t\t\\\n} while (0)\n\n \n#define AR5K_TUNE_DMA_BEACON_RESP\t\t2\n#define AR5K_TUNE_SW_BEACON_RESP\t\t10\n#define AR5K_TUNE_ADDITIONAL_SWBA_BACKOFF\t0\n#define AR5K_TUNE_MIN_TX_FIFO_THRES\t\t1\n#define AR5K_TUNE_MAX_TX_FIFO_THRES\t((IEEE80211_MAX_FRAME_LEN / 64) + 1)\n#define AR5K_TUNE_REGISTER_TIMEOUT\t\t20000\n \n#define AR5K_TUNE_RSSI_THRES\t\t\t129\n \n#define AR5K_TUNE_BMISS_THRES\t\t\t7\n#define AR5K_TUNE_REGISTER_DWELL_TIME\t\t20000\n#define AR5K_TUNE_BEACON_INTERVAL\t\t100\n#define AR5K_TUNE_AIFS\t\t\t\t2\n#define AR5K_TUNE_AIFS_11B\t\t\t2\n#define AR5K_TUNE_AIFS_XR\t\t\t0\n#define AR5K_TUNE_CWMIN\t\t\t\t15\n#define AR5K_TUNE_CWMIN_11B\t\t\t31\n#define AR5K_TUNE_CWMIN_XR\t\t\t3\n#define AR5K_TUNE_CWMAX\t\t\t\t1023\n#define AR5K_TUNE_CWMAX_11B\t\t\t1023\n#define AR5K_TUNE_CWMAX_XR\t\t\t7\n#define AR5K_TUNE_NOISE_FLOOR\t\t\t-72\n#define AR5K_TUNE_CCA_MAX_GOOD_VALUE\t\t-95\n#define AR5K_TUNE_MAX_TXPOWER\t\t\t63\n#define AR5K_TUNE_DEFAULT_TXPOWER\t\t25\n#define AR5K_TUNE_TPC_TXPOWER\t\t\tfalse\n#define ATH5K_TUNE_CALIBRATION_INTERVAL_FULL    60000    \n#define\tATH5K_TUNE_CALIBRATION_INTERVAL_SHORT\t10000\t \n#define ATH5K_TUNE_CALIBRATION_INTERVAL_ANI\t1000\t \n#define ATH5K_TX_COMPLETE_POLL_INT\t\t3000\t \n\n#define AR5K_INIT_CARR_SENSE_EN\t\t\t1\n\n \n#if defined(__BIG_ENDIAN)\n#define AR5K_INIT_CFG\t(\t\t\\\n\tAR5K_CFG_SWTD | AR5K_CFG_SWRD\t\\\n)\n#else\n#define AR5K_INIT_CFG\t0x00000000\n#endif\n\n \n#define\tAR5K_INIT_CYCRSSI_THR1\t\t\t2\n\n \n#define AR5K_INIT_RETRY_SHORT\t\t\t7\n#define AR5K_INIT_RETRY_LONG\t\t\t4\n\n \n#define AR5K_INIT_SLOT_TIME_TURBO\t\t6\n#define AR5K_INIT_SLOT_TIME_DEFAULT\t\t9\n#define\tAR5K_INIT_SLOT_TIME_HALF_RATE\t\t13\n#define\tAR5K_INIT_SLOT_TIME_QUARTER_RATE\t21\n#define\tAR5K_INIT_SLOT_TIME_B\t\t\t20\n#define AR5K_SLOT_TIME_MAX\t\t\t0xffff\n\n \n#define\tAR5K_INIT_SIFS_TURBO\t\t\t6\n#define\tAR5K_INIT_SIFS_DEFAULT_BG\t\t10\n#define\tAR5K_INIT_SIFS_DEFAULT_A\t\t16\n#define\tAR5K_INIT_SIFS_HALF_RATE\t\t32\n#define AR5K_INIT_SIFS_QUARTER_RATE\t\t64\n\n \n \n#define\tAR5K_INIT_OFDM_PREAMPLE_TIME\t\t20\n \n#define\tAR5K_INIT_OFDM_PREAMBLE_TIME_MIN\t14\n#define\tAR5K_INIT_OFDM_SYMBOL_TIME\t\t4\n#define\tAR5K_INIT_OFDM_PLCP_BITS\t\t22\n\n \n#define AR5K_INIT_RX_LAT_MAX\t\t\t63\n \n#define\tAR5K_INIT_TX_LAT_A\t\t\t54\n#define\tAR5K_INIT_TX_LAT_BG\t\t\t384\n \n#define\tAR5K_INIT_TX_LAT_MIN\t\t\t32\n \n#define AR5K_INIT_TX_LATENCY_5210\t\t54\n#define\tAR5K_INIT_RX_LATENCY_5210\t\t29\n\n \n#define AR5K_INIT_TXF2TXD_START_DEFAULT\t\t14\n#define AR5K_INIT_TXF2TXD_START_DELAY_10MHZ\t12\n#define AR5K_INIT_TXF2TXD_START_DELAY_5MHZ\t13\n\n \n#define\tAR5K_SWITCH_SETTLING\t\t\t5760\n#define\tAR5K_SWITCH_SETTLING_TURBO\t\t7168\n\n#define\tAR5K_AGC_SETTLING\t\t\t28\n \n#define\tAR5K_AGC_SETTLING_TURBO\t\t\t37\n\n\n\n \n\n \nenum ath5k_version {\n\tAR5K_AR5210\t= 0,\n\tAR5K_AR5211\t= 1,\n\tAR5K_AR5212\t= 2,\n};\n\n \nenum ath5k_radio {\n\tAR5K_RF5110\t= 0,\n\tAR5K_RF5111\t= 1,\n\tAR5K_RF5112\t= 2,\n\tAR5K_RF2413\t= 3,\n\tAR5K_RF5413\t= 4,\n\tAR5K_RF2316\t= 5,\n\tAR5K_RF2317\t= 6,\n\tAR5K_RF2425\t= 7,\n};\n\n \n\n#define AR5K_SREV_UNKNOWN\t0xffff\n\n#define AR5K_SREV_AR5210\t0x00  \n#define AR5K_SREV_AR5311\t0x10  \n#define AR5K_SREV_AR5311A\t0x20  \n#define AR5K_SREV_AR5311B\t0x30  \n#define AR5K_SREV_AR5211\t0x40  \n#define AR5K_SREV_AR5212\t0x50  \n#define AR5K_SREV_AR5312_R2\t0x52  \n#define AR5K_SREV_AR5212_V4\t0x54  \n#define AR5K_SREV_AR5213\t0x55  \n#define AR5K_SREV_AR5312_R7\t0x57  \n#define AR5K_SREV_AR2313_R8\t0x58  \n#define AR5K_SREV_AR5213A\t0x59  \n#define AR5K_SREV_AR2413\t0x78  \n#define AR5K_SREV_AR2414\t0x70  \n#define AR5K_SREV_AR2315_R6\t0x86  \n#define AR5K_SREV_AR2315_R7\t0x87  \n#define AR5K_SREV_AR5424\t0x90  \n#define AR5K_SREV_AR2317_R1\t0x90  \n#define AR5K_SREV_AR2317_R2\t0x91  \n#define AR5K_SREV_AR5413\t0xa4  \n#define AR5K_SREV_AR5414\t0xa0  \n#define AR5K_SREV_AR2415\t0xb0  \n#define AR5K_SREV_AR5416\t0xc0  \n#define AR5K_SREV_AR5418\t0xca  \n#define AR5K_SREV_AR2425\t0xe0  \n#define AR5K_SREV_AR2417\t0xf0  \n\n#define AR5K_SREV_RAD_5110\t0x00\n#define AR5K_SREV_RAD_5111\t0x10\n#define AR5K_SREV_RAD_5111A\t0x15\n#define AR5K_SREV_RAD_2111\t0x20\n#define AR5K_SREV_RAD_5112\t0x30\n#define AR5K_SREV_RAD_5112A\t0x35\n#define\tAR5K_SREV_RAD_5112B\t0x36\n#define AR5K_SREV_RAD_2112\t0x40\n#define AR5K_SREV_RAD_2112A\t0x45\n#define\tAR5K_SREV_RAD_2112B\t0x46\n#define AR5K_SREV_RAD_2413\t0x50\n#define AR5K_SREV_RAD_5413\t0x60\n#define AR5K_SREV_RAD_2316\t0x70  \n#define AR5K_SREV_RAD_2317\t0x80\n#define AR5K_SREV_RAD_5424\t0xa0  \n#define AR5K_SREV_RAD_2425\t0xa2\n#define AR5K_SREV_RAD_5133\t0xc0\n\n#define AR5K_SREV_PHY_5211\t0x30\n#define AR5K_SREV_PHY_5212\t0x41\n#define\tAR5K_SREV_PHY_5212A\t0x42\n#define AR5K_SREV_PHY_5212B\t0x43\n#define AR5K_SREV_PHY_2413\t0x45\n#define AR5K_SREV_PHY_5413\t0x61\n#define AR5K_SREV_PHY_2425\t0x70\n\n \n\n \n\n\n \n\n\n \nenum ath5k_driver_mode {\n\tAR5K_MODE_11A\t\t=\t0,\n\tAR5K_MODE_11B\t\t=\t1,\n\tAR5K_MODE_11G\t\t=\t2,\n\tAR5K_MODE_MAX\t\t=\t3\n};\n\n \nenum ath5k_ant_mode {\n\tAR5K_ANTMODE_DEFAULT\t= 0,\n\tAR5K_ANTMODE_FIXED_A\t= 1,\n\tAR5K_ANTMODE_FIXED_B\t= 2,\n\tAR5K_ANTMODE_SINGLE_AP\t= 3,\n\tAR5K_ANTMODE_SECTOR_AP\t= 4,\n\tAR5K_ANTMODE_SECTOR_STA\t= 5,\n\tAR5K_ANTMODE_DEBUG\t= 6,\n\tAR5K_ANTMODE_MAX,\n};\n\n \nenum ath5k_bw_mode {\n\tAR5K_BWMODE_DEFAULT\t= 0,\n\tAR5K_BWMODE_5MHZ\t= 1,\n\tAR5K_BWMODE_10MHZ\t= 2,\n\tAR5K_BWMODE_40MHZ\t= 3\n};\n\n\n\n \n\n \nstruct ath5k_tx_status {\n\tu16\tts_seqnum;\n\tu16\tts_tstamp;\n\tu8\tts_status;\n\tu8\tts_final_idx;\n\tu8\tts_final_retry;\n\ts8\tts_rssi;\n\tu8\tts_shortretry;\n\tu8\tts_virtcol;\n\tu8\tts_antenna;\n};\n\n#define AR5K_TXSTAT_ALTRATE\t0x80\n#define AR5K_TXERR_XRETRY\t0x01\n#define AR5K_TXERR_FILT\t\t0x02\n#define AR5K_TXERR_FIFO\t\t0x04\n\n \nenum ath5k_tx_queue {\n\tAR5K_TX_QUEUE_INACTIVE = 0,\n\tAR5K_TX_QUEUE_DATA,\n\tAR5K_TX_QUEUE_BEACON,\n\tAR5K_TX_QUEUE_CAB,\n\tAR5K_TX_QUEUE_UAPSD,\n};\n\n#define\tAR5K_NUM_TX_QUEUES\t\t10\n#define\tAR5K_NUM_TX_QUEUES_NOQCU\t2\n\n \nenum ath5k_tx_queue_subtype {\n\tAR5K_WME_AC_BK = 0,\n\tAR5K_WME_AC_BE,\n\tAR5K_WME_AC_VI,\n\tAR5K_WME_AC_VO,\n};\n\n \nenum ath5k_tx_queue_id {\n\tAR5K_TX_QUEUE_ID_NOQCU_DATA\t= 0,\n\tAR5K_TX_QUEUE_ID_NOQCU_BEACON\t= 1,\n\tAR5K_TX_QUEUE_ID_DATA_MIN\t= 0,\n\tAR5K_TX_QUEUE_ID_DATA_MAX\t= 3,\n\tAR5K_TX_QUEUE_ID_UAPSD\t\t= 7,\n\tAR5K_TX_QUEUE_ID_CAB\t\t= 8,\n\tAR5K_TX_QUEUE_ID_BEACON\t\t= 9,\n};\n\n \n#define AR5K_TXQ_FLAG_TXOKINT_ENABLE\t\t0x0001\t \n#define AR5K_TXQ_FLAG_TXERRINT_ENABLE\t\t0x0002\t \n#define AR5K_TXQ_FLAG_TXEOLINT_ENABLE\t\t0x0004\t \n#define AR5K_TXQ_FLAG_TXDESCINT_ENABLE\t\t0x0008\t \n#define AR5K_TXQ_FLAG_TXURNINT_ENABLE\t\t0x0010\t \n#define AR5K_TXQ_FLAG_CBRORNINT_ENABLE\t\t0x0020\t \n#define AR5K_TXQ_FLAG_CBRURNINT_ENABLE\t\t0x0040\t \n#define AR5K_TXQ_FLAG_QTRIGINT_ENABLE\t\t0x0080\t \n#define AR5K_TXQ_FLAG_TXNOFRMINT_ENABLE\t\t0x0100\t \n#define AR5K_TXQ_FLAG_BACKOFF_DISABLE\t\t0x0200\t \n#define AR5K_TXQ_FLAG_RDYTIME_EXP_POLICY_ENABLE\t0x0300\t \n#define AR5K_TXQ_FLAG_FRAG_BURST_BACKOFF_ENABLE\t0x0800\t \n#define AR5K_TXQ_FLAG_POST_FR_BKOFF_DIS\t\t0x1000\t \n#define AR5K_TXQ_FLAG_COMPRESSION_ENABLE\t0x2000\t \n\n \nstruct ath5k_txq {\n\tunsigned int\t\tqnum;\n\tu32\t\t\t*link;\n\tstruct list_head\tq;\n\tspinlock_t\t\tlock;\n\tbool\t\t\tsetup;\n\tint\t\t\ttxq_len;\n\tint\t\t\ttxq_max;\n\tbool\t\t\ttxq_poll_mark;\n\tunsigned int\t\ttxq_stuck;\n};\n\n \nstruct ath5k_txq_info {\n\tenum ath5k_tx_queue tqi_type;\n\tenum ath5k_tx_queue_subtype tqi_subtype;\n\tu16\ttqi_flags;\n\tu8\ttqi_aifs;\n\tu16\ttqi_cw_min;\n\tu16\ttqi_cw_max;\n\tu32\ttqi_cbr_period;\n\tu32\ttqi_cbr_overflow_limit;\n\tu32\ttqi_burst_time;\n\tu32\ttqi_ready_time;\n};\n\n \nenum ath5k_pkt_type {\n\tAR5K_PKT_TYPE_NORMAL\t\t= 0,\n\tAR5K_PKT_TYPE_ATIM\t\t= 1,\n\tAR5K_PKT_TYPE_PSPOLL\t\t= 2,\n\tAR5K_PKT_TYPE_BEACON\t\t= 3,\n\tAR5K_PKT_TYPE_PROBE_RESP\t= 4,\n\tAR5K_PKT_TYPE_PIFS\t\t= 5,\n};\n\n \n#define AR5K_TXPOWER_OFDM(_r, _v)\t(\t\t\t\\\n\t((0 & 1) << ((_v) + 6)) |\t\t\t\t\\\n\t(((ah->ah_txpower.txp_rates_power_table[(_r)]) & 0x3f) << (_v))\t\\\n)\n\n#define AR5K_TXPOWER_CCK(_r, _v)\t(\t\t\t\\\n\t(ah->ah_txpower.txp_rates_power_table[(_r)] & 0x3f) << (_v)\t\\\n)\n\n\n\n \n\n \nstruct ath5k_rx_status {\n\tu16\trs_datalen;\n\tu16\trs_tstamp;\n\tu8\trs_status;\n\tu8\trs_phyerr;\n\ts8\trs_rssi;\n\tu8\trs_keyix;\n\tu8\trs_rate;\n\tu8\trs_antenna;\n\tu8\trs_more;\n};\n\n#define AR5K_RXERR_CRC\t\t0x01\n#define AR5K_RXERR_PHY\t\t0x02\n#define AR5K_RXERR_FIFO\t\t0x04\n#define AR5K_RXERR_DECRYPT\t0x08\n#define AR5K_RXERR_MIC\t\t0x10\n#define AR5K_RXKEYIX_INVALID\t((u8) -1)\n#define AR5K_TXKEYIX_INVALID\t((u32) -1)\n\n\n \n\n#define AR5K_BEACON_PERIOD\t0x0000ffff\n#define AR5K_BEACON_ENA\t\t0x00800000  \n#define AR5K_BEACON_RESET_TSF\t0x01000000  \n\n\n \n#define TSF_TO_TU(_tsf) (u32)((_tsf) >> 10)\n\n\n\n \n\n \nenum ath5k_rfgain {\n\tAR5K_RFGAIN_INACTIVE = 0,\n\tAR5K_RFGAIN_ACTIVE,\n\tAR5K_RFGAIN_READ_REQUESTED,\n\tAR5K_RFGAIN_NEED_CHANGE,\n};\n\n \nstruct ath5k_gain {\n\tu8\t\t\tg_step_idx;\n\tu8\t\t\tg_current;\n\tu8\t\t\tg_target;\n\tu8\t\t\tg_low;\n\tu8\t\t\tg_high;\n\tu8\t\t\tg_f_corr;\n\tu8\t\t\tg_state;\n};\n\n\n\n \n\n#define AR5K_SLOT_TIME_9\t396\n#define AR5K_SLOT_TIME_20\t880\n#define AR5K_SLOT_TIME_MAX\t0xffff\n\n \nstruct ath5k_athchan_2ghz {\n\tu32\ta2_flags;\n\tu16\ta2_athchan;\n};\n\n \nenum ath5k_dmasize {\n\tAR5K_DMASIZE_4B\t= 0,\n\tAR5K_DMASIZE_8B,\n\tAR5K_DMASIZE_16B,\n\tAR5K_DMASIZE_32B,\n\tAR5K_DMASIZE_64B,\n\tAR5K_DMASIZE_128B,\n\tAR5K_DMASIZE_256B,\n\tAR5K_DMASIZE_512B\n};\n\n\n\n \n\n \n#define AR5K_MAX_RATES 32\n\n \n#define ATH5K_RATE_CODE_1M\t0x1B\n#define ATH5K_RATE_CODE_2M\t0x1A\n#define ATH5K_RATE_CODE_5_5M\t0x19\n#define ATH5K_RATE_CODE_11M\t0x18\n \n#define ATH5K_RATE_CODE_6M\t0x0B\n#define ATH5K_RATE_CODE_9M\t0x0F\n#define ATH5K_RATE_CODE_12M\t0x0A\n#define ATH5K_RATE_CODE_18M\t0x0E\n#define ATH5K_RATE_CODE_24M\t0x09\n#define ATH5K_RATE_CODE_36M\t0x0D\n#define ATH5K_RATE_CODE_48M\t0x08\n#define ATH5K_RATE_CODE_54M\t0x0C\n\n \n#define AR5K_SET_SHORT_PREAMBLE 0x04\n\n \n\n#define AR5K_KEYCACHE_SIZE\t8\nextern bool ath5k_modparam_nohwcrypt;\n\n \n\n \n#define\tAR5K_RSSI_EP_MULTIPLIER\t(1 << 7)\n\n#define AR5K_ASSERT_ENTRY(_e, _s) do {\t\t\\\n\tif (_e >= _s)\t\t\t\t\\\n\t\treturn false;\t\t\t\\\n} while (0)\n\n \n\n \nenum ath5k_int {\n\tAR5K_INT_RXOK\t= 0x00000001,\n\tAR5K_INT_RXDESC\t= 0x00000002,\n\tAR5K_INT_RXERR\t= 0x00000004,\n\tAR5K_INT_RXNOFRM = 0x00000008,\n\tAR5K_INT_RXEOL\t= 0x00000010,\n\tAR5K_INT_RXORN\t= 0x00000020,\n\tAR5K_INT_TXOK\t= 0x00000040,\n\tAR5K_INT_TXDESC\t= 0x00000080,\n\tAR5K_INT_TXERR\t= 0x00000100,\n\tAR5K_INT_TXNOFRM = 0x00000200,\n\tAR5K_INT_TXEOL\t= 0x00000400,\n\tAR5K_INT_TXURN\t= 0x00000800,\n\tAR5K_INT_MIB\t= 0x00001000,\n\tAR5K_INT_SWI\t= 0x00002000,\n\tAR5K_INT_RXPHY\t= 0x00004000,\n\tAR5K_INT_RXKCM\t= 0x00008000,\n\tAR5K_INT_SWBA\t= 0x00010000,\n\tAR5K_INT_BRSSI\t= 0x00020000,\n\tAR5K_INT_BMISS\t= 0x00040000,\n\tAR5K_INT_FATAL\t= 0x00080000,  \n\tAR5K_INT_BNR\t= 0x00100000,  \n\tAR5K_INT_TIM\t= 0x00200000,  \n\tAR5K_INT_DTIM\t= 0x00400000,  \n\tAR5K_INT_DTIM_SYNC =\t0x00800000,  \n\tAR5K_INT_GPIO\t=\t0x01000000,\n\tAR5K_INT_BCN_TIMEOUT =\t0x02000000,  \n\tAR5K_INT_CAB_TIMEOUT =\t0x04000000,  \n\tAR5K_INT_QCBRORN =\t0x08000000,  \n\tAR5K_INT_QCBRURN =\t0x10000000,  \n\tAR5K_INT_QTRIG\t=\t0x20000000,  \n\tAR5K_INT_GLOBAL =\t0x80000000,\n\n\tAR5K_INT_TX_ALL = AR5K_INT_TXOK\n\t\t| AR5K_INT_TXDESC\n\t\t| AR5K_INT_TXERR\n\t\t| AR5K_INT_TXNOFRM\n\t\t| AR5K_INT_TXEOL\n\t\t| AR5K_INT_TXURN,\n\n\tAR5K_INT_RX_ALL = AR5K_INT_RXOK\n\t\t| AR5K_INT_RXDESC\n\t\t| AR5K_INT_RXERR\n\t\t| AR5K_INT_RXNOFRM\n\t\t| AR5K_INT_RXEOL\n\t\t| AR5K_INT_RXORN,\n\n\tAR5K_INT_COMMON  = AR5K_INT_RXOK\n\t\t| AR5K_INT_RXDESC\n\t\t| AR5K_INT_RXERR\n\t\t| AR5K_INT_RXNOFRM\n\t\t| AR5K_INT_RXEOL\n\t\t| AR5K_INT_RXORN\n\t\t| AR5K_INT_TXOK\n\t\t| AR5K_INT_TXDESC\n\t\t| AR5K_INT_TXERR\n\t\t| AR5K_INT_TXNOFRM\n\t\t| AR5K_INT_TXEOL\n\t\t| AR5K_INT_TXURN\n\t\t| AR5K_INT_MIB\n\t\t| AR5K_INT_SWI\n\t\t| AR5K_INT_RXPHY\n\t\t| AR5K_INT_RXKCM\n\t\t| AR5K_INT_SWBA\n\t\t| AR5K_INT_BRSSI\n\t\t| AR5K_INT_BMISS\n\t\t| AR5K_INT_GPIO\n\t\t| AR5K_INT_GLOBAL,\n\n\tAR5K_INT_NOCARD\t= 0xffffffff\n};\n\n \nenum ath5k_calibration_mask {\n\tAR5K_CALIBRATION_FULL = 0x01,\n\tAR5K_CALIBRATION_SHORT = 0x02,\n\tAR5K_CALIBRATION_NF = 0x04,\n\tAR5K_CALIBRATION_ANI = 0x08,\n};\n\n \nenum ath5k_power_mode {\n\tAR5K_PM_UNDEFINED = 0,\n\tAR5K_PM_AUTO,\n\tAR5K_PM_AWAKE,\n\tAR5K_PM_FULL_SLEEP,\n\tAR5K_PM_NETWORK_SLEEP,\n};\n\n \n#define AR5K_LED_INIT\t0  \n#define AR5K_LED_SCAN\t1  \n#define AR5K_LED_AUTH\t2  \n#define AR5K_LED_ASSOC\t3  \n#define AR5K_LED_RUN\t4  \n\n \n#define AR5K_SOFTLED_PIN\t0\n#define AR5K_SOFTLED_ON\t\t0\n#define AR5K_SOFTLED_OFF\t1\n\n\n \nstruct ath5k_capabilities {\n\t \n\tDECLARE_BITMAP(cap_mode, AR5K_MODE_MAX);\n\n\t \n\tstruct {\n\t\tu16\trange_2ghz_min;\n\t\tu16\trange_2ghz_max;\n\t\tu16\trange_5ghz_min;\n\t\tu16\trange_5ghz_max;\n\t} cap_range;\n\n\t \n\tstruct ath5k_eeprom_info\tcap_eeprom;\n\n\t \n\tstruct {\n\t\tu8\tq_tx_num;\n\t} cap_queues;\n\n\tbool cap_has_phyerr_counters;\n\tbool cap_has_mrr_support;\n\tbool cap_needs_2GHz_ovr;\n};\n\n \n#define ATH5K_NF_CAL_HIST_MAX\t8\nstruct ath5k_nfcal_hist {\n\ts16 index;\t\t\t\t \n\ts16 nfval[ATH5K_NF_CAL_HIST_MAX];\t \n};\n\n#define ATH5K_LED_MAX_NAME_LEN 31\n\n \nstruct ath5k_led {\n\tchar name[ATH5K_LED_MAX_NAME_LEN + 1];\t \n\tstruct ath5k_hw *ah;\t\t\t \n\tstruct led_classdev led_dev;\t\t \n};\n\n \nstruct ath5k_rfkill {\n\t \n\tu16 gpio;\n\t \n\tbool polarity;\n\t \n\tstruct tasklet_struct toggleq;\n};\n\n \nstruct ath5k_statistics {\n\t \n\tunsigned int antenna_rx[5];\t \n\tunsigned int antenna_tx[5];\t \n\n\t \n\tunsigned int rx_all_count;\t \n\tunsigned int tx_all_count;\t \n\tunsigned int rx_bytes_count;\t \n\tunsigned int tx_bytes_count;\t \n\tunsigned int rxerr_crc;\n\tunsigned int rxerr_phy;\n\tunsigned int rxerr_phy_code[32];\n\tunsigned int rxerr_fifo;\n\tunsigned int rxerr_decrypt;\n\tunsigned int rxerr_mic;\n\tunsigned int rxerr_proc;\n\tunsigned int rxerr_jumbo;\n\tunsigned int txerr_retry;\n\tunsigned int txerr_fifo;\n\tunsigned int txerr_filt;\n\n\t \n\tunsigned int ack_fail;\n\tunsigned int rts_fail;\n\tunsigned int rts_ok;\n\tunsigned int fcs_error;\n\tunsigned int beacons;\n\n\tunsigned int mib_intr;\n\tunsigned int rxorn_intr;\n\tunsigned int rxeol_intr;\n};\n\n \n\n#define AR5K_MAX_GPIO\t\t10\n#define AR5K_MAX_RF_BANKS\t8\n\n#if CHAN_DEBUG\n#define ATH_CHAN_MAX\t(26 + 26 + 26 + 200 + 200)\n#else\n#define ATH_CHAN_MAX\t(14 + 14 + 14 + 252 + 20)\n#endif\n\n#define\tATH_RXBUF\t40\t\t \n#define\tATH_TXBUF\t200\t\t \n#define ATH_BCBUF\t4\t\t \n#define ATH5K_TXQ_LEN_MAX\t(ATH_TXBUF / 4)\t\t \n#define ATH5K_TXQ_LEN_LOW\t(ATH5K_TXQ_LEN_MAX / 2)\t \n\nDECLARE_EWMA(beacon_rssi, 10, 8)\n\n \nstruct ath5k_hw {\n\tstruct ath_common       common;\n\n\tstruct pci_dev\t\t*pdev;\n\tstruct device\t\t*dev;\t\t \n\tint irq;\n\tu16 devid;\n\tvoid __iomem\t\t*iobase;\t \n\tstruct mutex\t\tlock;\t\t \n\tstruct ieee80211_hw\t*hw;\t\t \n\tstruct ieee80211_supported_band sbands[NUM_NL80211_BANDS];\n\tstruct ieee80211_channel channels[ATH_CHAN_MAX];\n\tstruct ieee80211_rate\trates[NUM_NL80211_BANDS][AR5K_MAX_RATES];\n\ts8\t\t\trate_idx[NUM_NL80211_BANDS][AR5K_MAX_RATES];\n\tenum nl80211_iftype\topmode;\n\n#ifdef CONFIG_ATH5K_DEBUG\n\tstruct ath5k_dbg_info\tdebug;\t\t \n#endif  \n\n\tstruct ath5k_buf\t*bufptr;\t \n\tstruct ath5k_desc\t*desc;\t\t \n\tdma_addr_t\t\tdesc_daddr;\t \n\tsize_t\t\t\tdesc_len;\t \n\n\tDECLARE_BITMAP(status, 4);\n#define ATH_STAT_INVALID\t0\t\t \n#define ATH_STAT_LEDSOFT\t2\t\t \n#define ATH_STAT_STARTED\t3\t\t \n#define ATH_STAT_RESET\t\t4\t\t \n\n\tunsigned int\t\tfilter_flags;\t \n\tunsigned int\t\tfif_filter_flags;  \n\tstruct ieee80211_channel *curchan;\t \n\n\tu16\t\t\tnvifs;\n\n\tenum ath5k_int\t\timask;\t\t \n\n\tspinlock_t\t\tirqlock;\n\tbool\t\t\trx_pending;\t \n\tbool\t\t\ttx_pending;\t \n\n\tu8\t\t\tbssidmask[ETH_ALEN];\n\n\tunsigned int\t\tled_pin,\t \n\t\t\t\tled_on;\t\t \n\n\tstruct work_struct\treset_work;\t \n\tstruct work_struct\tcalib_work;\t \n\n\tstruct list_head\trxbuf;\t\t \n\tspinlock_t\t\trxbuflock;\n\tu32\t\t\t*rxlink;\t \n\tstruct tasklet_struct\trxtq;\t\t \n\tstruct ath5k_led\trx_led;\t\t \n\n\tstruct list_head\ttxbuf;\t\t \n\tspinlock_t\t\ttxbuflock;\n\tunsigned int\t\ttxbuf_len;\t \n\tstruct ath5k_txq\ttxqs[AR5K_NUM_TX_QUEUES];\t \n\tstruct tasklet_struct\ttxtq;\t\t \n\tstruct ath5k_led\ttx_led;\t\t \n\n\tstruct ath5k_rfkill\trf_kill;\n\n\tspinlock_t\t\tblock;\t\t \n\tstruct tasklet_struct\tbeacontq;\t \n\tstruct list_head\tbcbuf;\t\t \n\tstruct ieee80211_vif\t*bslot[ATH_BCBUF];\n\tu16\t\t\tnum_ap_vifs;\n\tu16\t\t\tnum_adhoc_vifs;\n\tu16\t\t\tnum_mesh_vifs;\n\tunsigned int\t\tbhalq,\t\t \n\t\t\t\tbmisscount,\t \n\t\t\t\tbintval,\t \n\t\t\t\tbsent;\n\tunsigned int\t\tnexttbtt;\t \n\tstruct ath5k_txq\t*cabq;\t\t \n\n\tbool\t\t\tassoc;\t\t \n\tbool\t\t\tenable_beacon;\t \n\n\tstruct ath5k_statistics\tstats;\n\n\tstruct ath5k_ani_state\tani_state;\n\tstruct tasklet_struct\tani_tasklet;\t \n\n\tstruct delayed_work\ttx_complete_work;\n\n\tstruct survey_info\tsurvey;\t\t \n\n\tenum ath5k_int\t\tah_imr;\n\n\tstruct ieee80211_channel *ah_current_channel;\n\tbool\t\t\tah_iq_cal_needed;\n\tbool\t\t\tah_single_chip;\n\n\tenum ath5k_version\tah_version;\n\tenum ath5k_radio\tah_radio;\n\tu32\t\t\tah_mac_srev;\n\tu16\t\t\tah_mac_version;\n\tu16\t\t\tah_phy_revision;\n\tu16\t\t\tah_radio_5ghz_revision;\n\tu16\t\t\tah_radio_2ghz_revision;\n\n#define ah_modes\t\tah_capabilities.cap_mode\n#define ah_ee_version\t\tah_capabilities.cap_eeprom.ee_version\n\n\tu8\t\t\tah_retry_long;\n\tu8\t\t\tah_retry_short;\n\n\tbool\t\t\tah_use_32khz_clock;\n\n\tu8\t\t\tah_coverage_class;\n\tbool\t\t\tah_ack_bitrate_high;\n\tu8\t\t\tah_bwmode;\n\tbool\t\t\tah_short_slot;\n\n\t \n\tu32\t\t\tah_ant_ctl[AR5K_EEPROM_N_MODES][AR5K_ANT_MAX];\n\tu8\t\t\tah_ant_mode;\n\tu8\t\t\tah_tx_ant;\n\tu8\t\t\tah_def_ant;\n\n\tstruct ath5k_capabilities ah_capabilities;\n\n\tstruct ath5k_txq_info\tah_txq[AR5K_NUM_TX_QUEUES];\n\tu32\t\t\tah_txq_status;\n\tu32\t\t\tah_txq_imr_txok;\n\tu32\t\t\tah_txq_imr_txerr;\n\tu32\t\t\tah_txq_imr_txurn;\n\tu32\t\t\tah_txq_imr_txdesc;\n\tu32\t\t\tah_txq_imr_txeol;\n\tu32\t\t\tah_txq_imr_cbrorn;\n\tu32\t\t\tah_txq_imr_cbrurn;\n\tu32\t\t\tah_txq_imr_qtrig;\n\tu32\t\t\tah_txq_imr_nofrm;\n\n\tu32\t\t\tah_txq_isr_txok_all;\n\n\tu32\t\t\t*ah_rf_banks;\n\tsize_t\t\t\tah_rf_banks_size;\n\tsize_t\t\t\tah_rf_regs_count;\n\tstruct ath5k_gain\tah_gain;\n\tu8\t\t\tah_offset[AR5K_MAX_RF_BANKS];\n\n\n\tstruct {\n\t\t \n\t\tu8\t\ttmpL[AR5K_EEPROM_N_PD_GAINS]\n\t\t\t\t\t[AR5K_EEPROM_POWER_TABLE_SIZE];\n\t\tu8\t\ttmpR[AR5K_EEPROM_N_PD_GAINS]\n\t\t\t\t\t[AR5K_EEPROM_POWER_TABLE_SIZE];\n\t\tu8\t\ttxp_pd_table[AR5K_EEPROM_POWER_TABLE_SIZE * 2];\n\t\tu16\t\ttxp_rates_power_table[AR5K_MAX_RATES];\n\t\tu8\t\ttxp_min_idx;\n\t\tbool\t\ttxp_tpc;\n\t\t \n\t\ts16\t\ttxp_min_pwr;\n\t\ts16\t\ttxp_max_pwr;\n\t\ts16\t\ttxp_cur_pwr;\n\t\t \n\t\ts16\t\ttxp_offset;\n\t\ts16\t\ttxp_ofdm;\n\t\ts16\t\ttxp_cck_ofdm_gainf_delta;\n\t\t \n\t\ts16\t\ttxp_cck_ofdm_pwr_delta;\n\t\tbool\t\ttxp_setup;\n\t\tint\t\ttxp_requested;\t \n\t} ah_txpower;\n\n\tstruct ath5k_nfcal_hist ah_nfcal_hist;\n\n\t \n\tstruct ewma_beacon_rssi\tah_beacon_rssi_avg;\n\n\t \n\ts32\t\t\tah_noise_floor;\n\n\t \n\tunsigned long\t\tah_cal_next_full;\n\tunsigned long\t\tah_cal_next_short;\n\tunsigned long\t\tah_cal_next_ani;\n\n\t \n\tu8\t\t\tah_cal_mask;\n\n\t \n\tint (*ah_setup_tx_desc)(struct ath5k_hw *, struct ath5k_desc *,\n\t\tunsigned int, unsigned int, int, enum ath5k_pkt_type,\n\t\tunsigned int, unsigned int, unsigned int, unsigned int,\n\t\tunsigned int, unsigned int, unsigned int, unsigned int);\n\tint (*ah_proc_tx_desc)(struct ath5k_hw *, struct ath5k_desc *,\n\t\tstruct ath5k_tx_status *);\n\tint (*ah_proc_rx_desc)(struct ath5k_hw *, struct ath5k_desc *,\n\t\tstruct ath5k_rx_status *);\n};\n\nstruct ath_bus_ops {\n\tenum ath_bus_type ath_bus_type;\n\tvoid (*read_cachesize)(struct ath_common *common, int *csz);\n\tbool (*eeprom_read)(struct ath_common *common, u32 off, u16 *data);\n\tint (*eeprom_read_mac)(struct ath5k_hw *ah, u8 *mac);\n};\n\n \nextern const struct ieee80211_ops ath5k_hw_ops;\n\n \nint ath5k_hw_init(struct ath5k_hw *ah);\nvoid ath5k_hw_deinit(struct ath5k_hw *ah);\n\nint ath5k_sysfs_register(struct ath5k_hw *ah);\nvoid ath5k_sysfs_unregister(struct ath5k_hw *ah);\n\n \nint ath5k_hw_read_srev(struct ath5k_hw *ah);\n\n \nint ath5k_init_leds(struct ath5k_hw *ah);\nvoid ath5k_led_enable(struct ath5k_hw *ah);\nvoid ath5k_led_off(struct ath5k_hw *ah);\nvoid ath5k_unregister_leds(struct ath5k_hw *ah);\n\n\n \nint ath5k_hw_nic_wakeup(struct ath5k_hw *ah, struct ieee80211_channel *channel);\nint ath5k_hw_on_hold(struct ath5k_hw *ah);\nint ath5k_hw_reset(struct ath5k_hw *ah, enum nl80211_iftype op_mode,\n\t   struct ieee80211_channel *channel, bool fast, bool skip_pcu);\nint ath5k_hw_register_timeout(struct ath5k_hw *ah, u32 reg, u32 flag, u32 val,\n\t\t\t      bool is_set);\n \n\n\n \nunsigned int ath5k_hw_htoclock(struct ath5k_hw *ah, unsigned int usec);\nunsigned int ath5k_hw_clocktoh(struct ath5k_hw *ah, unsigned int clock);\nvoid ath5k_hw_set_clockrate(struct ath5k_hw *ah);\n\n\n \nvoid ath5k_hw_start_rx_dma(struct ath5k_hw *ah);\nu32 ath5k_hw_get_rxdp(struct ath5k_hw *ah);\nint ath5k_hw_set_rxdp(struct ath5k_hw *ah, u32 phys_addr);\nint ath5k_hw_start_tx_dma(struct ath5k_hw *ah, unsigned int queue);\nint ath5k_hw_stop_beacon_queue(struct ath5k_hw *ah, unsigned int queue);\nu32 ath5k_hw_get_txdp(struct ath5k_hw *ah, unsigned int queue);\nint ath5k_hw_set_txdp(struct ath5k_hw *ah, unsigned int queue,\n\t\t\t\tu32 phys_addr);\nint ath5k_hw_update_tx_triglevel(struct ath5k_hw *ah, bool increase);\n \nbool ath5k_hw_is_intr_pending(struct ath5k_hw *ah);\nint ath5k_hw_get_isr(struct ath5k_hw *ah, enum ath5k_int *interrupt_mask);\nenum ath5k_int ath5k_hw_set_imr(struct ath5k_hw *ah, enum ath5k_int new_mask);\nvoid ath5k_hw_update_mib_counters(struct ath5k_hw *ah);\n \nvoid ath5k_hw_dma_init(struct ath5k_hw *ah);\nint ath5k_hw_dma_stop(struct ath5k_hw *ah);\n\n \nint ath5k_eeprom_init(struct ath5k_hw *ah);\nvoid ath5k_eeprom_detach(struct ath5k_hw *ah);\nint ath5k_eeprom_mode_from_channel(struct ath5k_hw *ah,\n\t\tstruct ieee80211_channel *channel);\n\n \n \nint ath5k_hw_get_frame_duration(struct ath5k_hw *ah, enum nl80211_band band,\n\t\tint len, struct ieee80211_rate *rate, bool shortpre);\nunsigned int ath5k_hw_get_default_slottime(struct ath5k_hw *ah);\nunsigned int ath5k_hw_get_default_sifs(struct ath5k_hw *ah);\nint ath5k_hw_set_opmode(struct ath5k_hw *ah, enum nl80211_iftype opmode);\nvoid ath5k_hw_set_coverage_class(struct ath5k_hw *ah, u8 coverage_class);\n \nint ath5k_hw_set_lladdr(struct ath5k_hw *ah, const u8 *mac);\nvoid ath5k_hw_set_bssid(struct ath5k_hw *ah);\nvoid ath5k_hw_set_bssid_mask(struct ath5k_hw *ah, const u8 *mask);\nvoid ath5k_hw_set_mcast_filter(struct ath5k_hw *ah, u32 filter0, u32 filter1);\nu32 ath5k_hw_get_rx_filter(struct ath5k_hw *ah);\nvoid ath5k_hw_set_rx_filter(struct ath5k_hw *ah, u32 filter);\n \nvoid ath5k_hw_start_rx_pcu(struct ath5k_hw *ah);\nvoid ath5k_hw_stop_rx_pcu(struct ath5k_hw *ah);\n \nu64 ath5k_hw_get_tsf64(struct ath5k_hw *ah);\nvoid ath5k_hw_set_tsf64(struct ath5k_hw *ah, u64 tsf64);\nvoid ath5k_hw_reset_tsf(struct ath5k_hw *ah);\nvoid ath5k_hw_init_beacon_timers(struct ath5k_hw *ah, u32 next_beacon,\n\t\t\t\t\t\t\tu32 interval);\nbool ath5k_hw_check_beacon_timers(struct ath5k_hw *ah, int intval);\n \nvoid ath5k_hw_pcu_init(struct ath5k_hw *ah, enum nl80211_iftype op_mode);\n\n \nint ath5k_hw_get_tx_queueprops(struct ath5k_hw *ah, int queue,\n\t\t\t       struct ath5k_txq_info *queue_info);\nint ath5k_hw_set_tx_queueprops(struct ath5k_hw *ah, int queue,\n\t\t\t       const struct ath5k_txq_info *queue_info);\nint ath5k_hw_setup_tx_queue(struct ath5k_hw *ah,\n\t\t\t    enum ath5k_tx_queue queue_type,\n\t\t\t    struct ath5k_txq_info *queue_info);\nvoid ath5k_hw_set_tx_retry_limits(struct ath5k_hw *ah,\n\t\t\t\t  unsigned int queue);\nu32 ath5k_hw_num_tx_pending(struct ath5k_hw *ah, unsigned int queue);\nvoid ath5k_hw_release_tx_queue(struct ath5k_hw *ah, unsigned int queue);\nint ath5k_hw_reset_tx_queue(struct ath5k_hw *ah, unsigned int queue);\nint ath5k_hw_set_ifs_intervals(struct ath5k_hw *ah, unsigned int slot_time);\n \nint ath5k_hw_init_queues(struct ath5k_hw *ah);\n\n \nint ath5k_hw_init_desc_functions(struct ath5k_hw *ah);\nint ath5k_hw_setup_rx_desc(struct ath5k_hw *ah, struct ath5k_desc *desc,\n\t\t\t   u32 size, unsigned int flags);\nint ath5k_hw_setup_mrr_tx_desc(struct ath5k_hw *ah, struct ath5k_desc *desc,\n\tunsigned int tx_rate1, u_int tx_tries1, u_int tx_rate2,\n\tu_int tx_tries2, unsigned int tx_rate3, u_int tx_tries3);\n\n\n \nvoid ath5k_hw_set_ledstate(struct ath5k_hw *ah, unsigned int state);\nint ath5k_hw_set_gpio_input(struct ath5k_hw *ah, u32 gpio);\nint ath5k_hw_set_gpio_output(struct ath5k_hw *ah, u32 gpio);\nu32 ath5k_hw_get_gpio(struct ath5k_hw *ah, u32 gpio);\nint ath5k_hw_set_gpio(struct ath5k_hw *ah, u32 gpio, u32 val);\nvoid ath5k_hw_set_gpio_intr(struct ath5k_hw *ah, unsigned int gpio,\n\t\t\t    u32 interrupt_level);\n\n\n \nvoid ath5k_rfkill_hw_start(struct ath5k_hw *ah);\nvoid ath5k_rfkill_hw_stop(struct ath5k_hw *ah);\n\n\n \nint ath5k_hw_set_capabilities(struct ath5k_hw *ah);\nint ath5k_hw_enable_pspoll(struct ath5k_hw *ah, u8 *bssid, u16 assoc_id);\nint ath5k_hw_disable_pspoll(struct ath5k_hw *ah);\n\n\n \nint ath5k_hw_write_initvals(struct ath5k_hw *ah, u8 mode, bool change_channel);\n\n\n \n \nu16 ath5k_hw_radio_revision(struct ath5k_hw *ah, enum nl80211_band band);\nint ath5k_hw_phy_disable(struct ath5k_hw *ah);\n \nenum ath5k_rfgain ath5k_hw_gainf_calibrate(struct ath5k_hw *ah);\nint ath5k_hw_rfgain_opt_init(struct ath5k_hw *ah);\n \nbool ath5k_channel_ok(struct ath5k_hw *ah, struct ieee80211_channel *channel);\n \nvoid ath5k_hw_init_nfcal_hist(struct ath5k_hw *ah);\nint ath5k_hw_phy_calibrate(struct ath5k_hw *ah,\n\t\t\t   struct ieee80211_channel *channel);\nvoid ath5k_hw_update_noise_floor(struct ath5k_hw *ah);\n \nbool ath5k_hw_chan_has_spur_noise(struct ath5k_hw *ah,\n\t\t\t\t  struct ieee80211_channel *channel);\n \nvoid ath5k_hw_set_antenna_mode(struct ath5k_hw *ah, u8 ant_mode);\nvoid ath5k_hw_set_antenna_switch(struct ath5k_hw *ah, u8 ee_mode);\n \nint ath5k_hw_set_txpower_limit(struct ath5k_hw *ah, u8 txpower);\n \nint ath5k_hw_phy_init(struct ath5k_hw *ah, struct ieee80211_channel *channel,\n\t\t\t\tu8 mode, bool fast);\n\n \n\nstatic inline struct ath_common *ath5k_hw_common(struct ath5k_hw *ah)\n{\n\treturn &ah->common;\n}\n\nstatic inline struct ath_regulatory *ath5k_hw_regulatory(struct ath5k_hw *ah)\n{\n\treturn &(ath5k_hw_common(ah)->regulatory);\n}\n\n#ifdef CONFIG_ATH5K_AHB\n#define AR5K_AR2315_PCI_BASE\t((void __iomem *)0xb0100000)\n\nstatic inline void __iomem *ath5k_ahb_reg(struct ath5k_hw *ah, u16 reg)\n{\n\t \n\tif (unlikely((reg >= 0x4000) && (reg < 0x5000) &&\n\t    (ah->ah_mac_srev >= AR5K_SREV_AR2315_R6)))\n\t\treturn AR5K_AR2315_PCI_BASE + reg;\n\n\treturn ah->iobase + reg;\n}\n\nstatic inline u32 ath5k_hw_reg_read(struct ath5k_hw *ah, u16 reg)\n{\n\treturn ioread32(ath5k_ahb_reg(ah, reg));\n}\n\nstatic inline void ath5k_hw_reg_write(struct ath5k_hw *ah, u32 val, u16 reg)\n{\n\tiowrite32(val, ath5k_ahb_reg(ah, reg));\n}\n\n#else\n\nstatic inline u32 ath5k_hw_reg_read(struct ath5k_hw *ah, u16 reg)\n{\n\treturn ioread32(ah->iobase + reg);\n}\n\nstatic inline void ath5k_hw_reg_write(struct ath5k_hw *ah, u32 val, u16 reg)\n{\n\tiowrite32(val, ah->iobase + reg);\n}\n\n#endif\n\nstatic inline enum ath_bus_type ath5k_get_bus_type(struct ath5k_hw *ah)\n{\n\treturn ath5k_hw_common(ah)->bus_ops->ath_bus_type;\n}\n\nstatic inline void ath5k_read_cachesize(struct ath_common *common, int *csz)\n{\n\tcommon->bus_ops->read_cachesize(common, csz);\n}\n\nstatic inline bool ath5k_hw_nvram_read(struct ath5k_hw *ah, u32 off, u16 *data)\n{\n\tstruct ath_common *common = ath5k_hw_common(ah);\n\treturn common->bus_ops->eeprom_read(common, off, data);\n}\n\nstatic inline u32 ath5k_hw_bitswap(u32 val, unsigned int bits)\n{\n\tu32 retval = 0, bit, i;\n\n\tfor (i = 0; i < bits; i++) {\n\t\tbit = (val >> i) & 1;\n\t\tretval = (retval << 1) | bit;\n\t}\n\n\treturn retval;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}