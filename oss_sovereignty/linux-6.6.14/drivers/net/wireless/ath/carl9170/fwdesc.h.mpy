{
  "module_name": "fwdesc.h",
  "hash_id": "703d84fa9138b9423b8ecf8bb392ac0b827aca37da4ed6ec63d2c0862d88805f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/carl9170/fwdesc.h",
  "human_readable_source": " \n \n\n#ifndef __CARL9170_SHARED_FWDESC_H\n#define __CARL9170_SHARED_FWDESC_H\n\n \nenum carl9170fw_feature_list {\n\t \n\tCARL9170FW_DUMMY_FEATURE,\n\n\t \n\tCARL9170FW_MINIBOOT,\n\n\t \n\tCARL9170FW_USB_INIT_FIRMWARE,\n\n\t \n\tCARL9170FW_USB_RESP_EP2,\n\n\t \n\tCARL9170FW_USB_DOWN_STREAM,\n\n\t \n\tCARL9170FW_USB_UP_STREAM,\n\n\t \n\tCARL9170FW_UNUSABLE,\n\n\t \n\tCARL9170FW_COMMAND_PHY,\n\n\t \n\tCARL9170FW_COMMAND_CAM,\n\n\t \n\tCARL9170FW_WLANTX_CAB,\n\n\t \n\tCARL9170FW_HANDLE_BACK_REQ,\n\n\t \n\tCARL9170FW_GPIO_INTERRUPT,\n\n\t \n\tCARL9170FW_PSM,\n\n\t \n\tCARL9170FW_RX_FILTER,\n\n\t \n\tCARL9170FW_WOL,\n\n\t \n\tCARL9170FW_FIXED_5GHZ_PSM,\n\n\t \n\tCARL9170FW_HW_COUNTERS,\n\n\t \n\tCARL9170FW_RX_BA_FILTER,\n\n\t \n\tCARL9170FW_HAS_WREGB_CMD,\n\n\t \n\tCARL9170FW_PATTERN_GENERATOR,\n\n\t \n\t__CARL9170FW_FEATURE_NUM\n};\n\n#define OTUS_MAGIC\t\"OTAR\"\n#define MOTD_MAGIC\t\"MOTD\"\n#define FIX_MAGIC\t\"FIX\\0\"\n#define DBG_MAGIC\t\"DBG\\0\"\n#define CHK_MAGIC\t\"CHK\\0\"\n#define TXSQ_MAGIC\t\"TXSQ\"\n#define WOL_MAGIC\t\"WOL\\0\"\n#define LAST_MAGIC\t\"LAST\"\n\n#define CARL9170FW_SET_DAY(d) (((d) - 1) % 31)\n#define CARL9170FW_SET_MONTH(m) ((((m) - 1) % 12) * 31)\n#define CARL9170FW_SET_YEAR(y) (((y) - 10) * 372)\n\n#define CARL9170FW_GET_DAY(d) (((d) % 31) + 1)\n#define CARL9170FW_GET_MONTH(m) ((((m) / 31) % 12) + 1)\n#define CARL9170FW_GET_YEAR(y) ((y) / 372 + 10)\n\n#define CARL9170FW_MAGIC_SIZE\t\t\t4\n\nstruct carl9170fw_desc_head {\n\tu8\tmagic[CARL9170FW_MAGIC_SIZE];\n\t__le16 length;\n\tu8 min_ver;\n\tu8 cur_ver;\n} __packed;\n#define CARL9170FW_DESC_HEAD_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_desc_head))\n\n#define CARL9170FW_OTUS_DESC_MIN_VER\t\t6\n#define CARL9170FW_OTUS_DESC_CUR_VER\t\t7\nstruct carl9170fw_otus_desc {\n\tstruct carl9170fw_desc_head head;\n\t__le32 feature_set;\n\t__le32 fw_address;\n\t__le32 bcn_addr;\n\t__le16 bcn_len;\n\t__le16 miniboot_size;\n\t__le16 tx_frag_len;\n\t__le16 rx_max_frame_len;\n\tu8 tx_descs;\n\tu8 cmd_bufs;\n\tu8 api_ver;\n\tu8 vif_num;\n} __packed;\n#define CARL9170FW_OTUS_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_otus_desc))\n\n#define CARL9170FW_MOTD_STRING_LEN\t\t\t24\n#define CARL9170FW_MOTD_RELEASE_LEN\t\t\t20\n#define CARL9170FW_MOTD_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_MOTD_DESC_CUR_VER\t\t\t2\nstruct carl9170fw_motd_desc {\n\tstruct carl9170fw_desc_head head;\n\t__le32 fw_year_month_day;\n\tchar desc[CARL9170FW_MOTD_STRING_LEN];\n\tchar release[CARL9170FW_MOTD_RELEASE_LEN];\n} __packed;\n#define CARL9170FW_MOTD_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_motd_desc))\n\n#define CARL9170FW_FIX_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_FIX_DESC_CUR_VER\t\t\t2\nstruct carl9170fw_fix_entry {\n\t__le32 address;\n\t__le32 mask;\n\t__le32 value;\n} __packed;\n\nstruct carl9170fw_fix_desc {\n\tstruct carl9170fw_desc_head head;\n\tstruct carl9170fw_fix_entry data[];\n} __packed;\n#define CARL9170FW_FIX_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_fix_desc))\n\n#define CARL9170FW_DBG_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_DBG_DESC_CUR_VER\t\t\t3\nstruct carl9170fw_dbg_desc {\n\tstruct carl9170fw_desc_head head;\n\n\t__le32 bogoclock_addr;\n\t__le32 counter_addr;\n\t__le32 rx_total_addr;\n\t__le32 rx_overrun_addr;\n\t__le32 rx_filter;\n\n\t \n} __packed;\n#define CARL9170FW_DBG_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_dbg_desc))\n\n#define CARL9170FW_CHK_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_CHK_DESC_CUR_VER\t\t\t2\nstruct carl9170fw_chk_desc {\n\tstruct carl9170fw_desc_head head;\n\t__le32 fw_crc32;\n\t__le32 hdr_crc32;\n} __packed;\n#define CARL9170FW_CHK_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_chk_desc))\n\n#define CARL9170FW_TXSQ_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_TXSQ_DESC_CUR_VER\t\t\t1\nstruct carl9170fw_txsq_desc {\n\tstruct carl9170fw_desc_head head;\n\n\t__le32 seq_table_addr;\n} __packed;\n#define CARL9170FW_TXSQ_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_txsq_desc))\n\n#define CARL9170FW_WOL_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_WOL_DESC_CUR_VER\t\t\t1\nstruct carl9170fw_wol_desc {\n\tstruct carl9170fw_desc_head head;\n\n\t__le32 supported_triggers;\t \n} __packed;\n#define CARL9170FW_WOL_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_wol_desc))\n\n#define CARL9170FW_LAST_DESC_MIN_VER\t\t\t1\n#define CARL9170FW_LAST_DESC_CUR_VER\t\t\t2\nstruct carl9170fw_last_desc {\n\tstruct carl9170fw_desc_head head;\n} __packed;\n#define CARL9170FW_LAST_DESC_SIZE\t\t\t\\\n\t(sizeof(struct carl9170fw_fix_desc))\n\n#define CARL9170FW_DESC_MAX_LENGTH\t\t\t8192\n\n#define CARL9170FW_FILL_DESC(_magic, _length, _min_ver, _cur_ver)\t\\\n\t.head = {\t\t\t\t\t\t\t\\\n\t\t.magic = _magic,\t\t\t\t\t\\\n\t\t.length = cpu_to_le16(_length),\t\t\t\t\\\n\t\t.min_ver = _min_ver,\t\t\t\t\t\\\n\t\t.cur_ver = _cur_ver,\t\t\t\t\t\\\n\t}\n\nstatic inline void carl9170fw_fill_desc(struct carl9170fw_desc_head *head,\n\t\t\t\t\t u8 magic[CARL9170FW_MAGIC_SIZE],\n\t\t\t\t\t __le16 length, u8 min_ver, u8 cur_ver)\n{\n\thead->magic[0] = magic[0];\n\thead->magic[1] = magic[1];\n\thead->magic[2] = magic[2];\n\thead->magic[3] = magic[3];\n\n\thead->length = length;\n\thead->min_ver = min_ver;\n\thead->cur_ver = cur_ver;\n}\n\n#define carl9170fw_for_each_hdr(desc, fw_desc)\t\t\t\t\\\n\tfor (desc = fw_desc;\t\t\t\t\t\t\\\n\t     memcmp(desc->magic, LAST_MAGIC, CARL9170FW_MAGIC_SIZE) &&\t\\\n\t     le16_to_cpu(desc->length) >= CARL9170FW_DESC_HEAD_SIZE &&\t\\\n\t     le16_to_cpu(desc->length) < CARL9170FW_DESC_MAX_LENGTH;\t\\\n\t     desc = (void *)((unsigned long)desc + le16_to_cpu(desc->length)))\n\n#define CHECK_HDR_VERSION(head, _min_ver)\t\t\t\t\\\n\t(((head)->cur_ver < _min_ver) || ((head)->min_ver > _min_ver))\t\\\n\nstatic inline bool carl9170fw_supports(__le32 list, u8 feature)\n{\n\treturn le32_to_cpu(list) & BIT(feature);\n}\n\nstatic inline bool carl9170fw_desc_cmp(const struct carl9170fw_desc_head *head,\n\t\t\t\t       const u8 descid[CARL9170FW_MAGIC_SIZE],\n\t\t\t\t       u16 min_len, u8 compatible_revision)\n{\n\tif (descid[0] == head->magic[0] && descid[1] == head->magic[1] &&\n\t    descid[2] == head->magic[2] && descid[3] == head->magic[3] &&\n\t    !CHECK_HDR_VERSION(head, compatible_revision) &&\n\t    (le16_to_cpu(head->length) >= min_len))\n\t\treturn true;\n\n\treturn false;\n}\n\n#define CARL9170FW_MIN_SIZE\t32\n#define CARL9170FW_MAX_SIZE\t16384\n\nstatic inline bool carl9170fw_size_check(unsigned int len)\n{\n\treturn (len <= CARL9170FW_MAX_SIZE && len >= CARL9170FW_MIN_SIZE);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}