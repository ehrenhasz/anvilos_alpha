{
  "module_name": "core.h",
  "hash_id": "d28448b963131d45add2636396f99712fdfa8d902f533babc17069692310f547",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath6kl/core.h",
  "human_readable_source": " \n\n#ifndef CORE_H\n#define CORE_H\n\n#include <linux/etherdevice.h>\n#include <linux/rtnetlink.h>\n#include <linux/firmware.h>\n#include <linux/sched.h>\n#include <linux/circ_buf.h>\n#include <net/cfg80211.h>\n#include \"htc.h\"\n#include \"wmi.h\"\n#include \"bmi.h\"\n#include \"target.h\"\n\n#define MAX_ATH6KL                        1\n#define ATH6KL_MAX_RX_BUFFERS             16\n#define ATH6KL_BUFFER_SIZE                1664\n#define ATH6KL_MAX_AMSDU_RX_BUFFERS       4\n#define ATH6KL_AMSDU_REFILL_THRESHOLD     3\n#define ATH6KL_AMSDU_BUFFER_SIZE     (WMI_MAX_AMSDU_RX_DATA_FRAME_LENGTH + 128)\n#define MAX_MSDU_SUBFRAME_PAYLOAD_LEN\t1508\n#define MIN_MSDU_SUBFRAME_PAYLOAD_LEN\t46\n\n#define USER_SAVEDKEYS_STAT_INIT     0\n#define USER_SAVEDKEYS_STAT_RUN      1\n\n#define ATH6KL_TX_TIMEOUT      10\n#define ATH6KL_MAX_ENDPOINTS   4\n#define MAX_NODE_NUM           15\n\n#define ATH6KL_APSD_ALL_FRAME\t\t0xFFFF\n#define ATH6KL_APSD_NUM_OF_AC\t\t0x4\n#define ATH6KL_APSD_FRAME_MASK\t\t0xF\n\n \n#define ATH6KL_HTC_ALIGN_BYTES 3\n\n \n#define MAX_DEF_COOKIE_NUM                180\n#define MAX_HI_COOKIE_NUM                 18\t \n#define MAX_COOKIE_NUM                 (MAX_DEF_COOKIE_NUM + MAX_HI_COOKIE_NUM)\n\n#define MAX_DEFAULT_SEND_QUEUE_DEPTH      (MAX_DEF_COOKIE_NUM / WMM_NUM_AC)\n\n#define DISCON_TIMER_INTVAL               10000   \n\n \n#define ATH6KL_FG_SCAN_INTERVAL\t\t50  \n\n \n#define ATH6KL_FIRMWARE_MAGIC               \"QCA-ATH6KL\"\n\nenum ath6kl_fw_ie_type {\n\tATH6KL_FW_IE_FW_VERSION = 0,\n\tATH6KL_FW_IE_TIMESTAMP = 1,\n\tATH6KL_FW_IE_OTP_IMAGE = 2,\n\tATH6KL_FW_IE_FW_IMAGE = 3,\n\tATH6KL_FW_IE_PATCH_IMAGE = 4,\n\tATH6KL_FW_IE_RESERVED_RAM_SIZE = 5,\n\tATH6KL_FW_IE_CAPABILITIES = 6,\n\tATH6KL_FW_IE_PATCH_ADDR = 7,\n\tATH6KL_FW_IE_BOARD_ADDR = 8,\n\tATH6KL_FW_IE_VIF_MAX = 9,\n};\n\nenum ath6kl_fw_capability {\n\tATH6KL_FW_CAPABILITY_HOST_P2P = 0,\n\tATH6KL_FW_CAPABILITY_SCHED_SCAN = 1,\n\n\t \n\tATH6KL_FW_CAPABILITY_STA_P2PDEV_DUPLEX,\n\n\t \n\tATH6KL_FW_CAPABILITY_INACTIVITY_TIMEOUT,\n\n\t \n\tATH6KL_FW_CAPABILITY_RSN_CAP_OVERRIDE,\n\n\t \n\tATH6KL_FW_CAPABILITY_WOW_MULTICAST_FILTER,\n\n\t \n\tATH6KL_FW_CAPABILITY_BMISS_ENHANCE,\n\n\t \n\tATH6KL_FW_CAPABILITY_SCHED_SCAN_MATCH_LIST,\n\n\t \n\tATH6KL_FW_CAPABILITY_RSSI_SCAN_THOLD,\n\n\t \n\tATH6KL_FW_CAPABILITY_CUSTOM_MAC_ADDR,\n\n\t \n\tATH6KL_FW_CAPABILITY_TX_ERR_NOTIFY,\n\n\t \n\tATH6KL_FW_CAPABILITY_REGDOMAIN,\n\n\t \n\tATH6KL_FW_CAPABILITY_SCHED_SCAN_V2,\n\n\t \n\tATH6KL_FW_CAPABILITY_HEART_BEAT_POLL,\n\n\t \n\tATH6KL_FW_CAPABILITY_64BIT_RATES,\n\n\t \n\tATH6KL_FW_CAPABILITY_AP_INACTIVITY_MINS,\n\n\t \n\tATH6KL_FW_CAPABILITY_MAP_LP_ENDPOINT,\n\n\t \n\tATH6KL_FW_CAPABILITY_RATETABLE_MCS15,\n\n\t \n\tATH6KL_FW_CAPABILITY_NO_IP_CHECKSUM,\n\n\t \n\tATH6KL_FW_CAPABILITY_MAX,\n};\n\n#define ATH6KL_CAPABILITY_LEN (ALIGN(ATH6KL_FW_CAPABILITY_MAX, 32) / 32)\n\nstruct ath6kl_fw_ie {\n\t__le32 id;\n\t__le32 len;\n\tu8 data[];\n};\n\nenum ath6kl_hw_flags {\n\tATH6KL_HW_SDIO_CRC_ERROR_WAR\t= BIT(3),\n};\n\n#define ATH6KL_FW_API2_FILE \"fw-2.bin\"\n#define ATH6KL_FW_API3_FILE \"fw-3.bin\"\n#define ATH6KL_FW_API4_FILE \"fw-4.bin\"\n#define ATH6KL_FW_API5_FILE \"fw-5.bin\"\n\n \n#define AR6003_HW_1_0_VERSION                 0x300002ba\n\n \n#define AR6003_HW_2_0_VERSION                 0x30000384\n#define AR6003_HW_2_0_PATCH_DOWNLOAD_ADDRESS  0x57e910\n#define AR6003_HW_2_0_FW_DIR\t\t\t\"ath6k/AR6003/hw2.0\"\n#define AR6003_HW_2_0_OTP_FILE\t\t\t\"otp.bin.z77\"\n#define AR6003_HW_2_0_FIRMWARE_FILE\t\t\"athwlan.bin.z77\"\n#define AR6003_HW_2_0_TCMD_FIRMWARE_FILE\t\"athtcmd_ram.bin\"\n#define AR6003_HW_2_0_PATCH_FILE\t\t\"data.patch.bin\"\n#define AR6003_HW_2_0_BOARD_DATA_FILE AR6003_HW_2_0_FW_DIR \"/bdata.bin\"\n#define AR6003_HW_2_0_DEFAULT_BOARD_DATA_FILE \\\n\t\t\tAR6003_HW_2_0_FW_DIR \"/bdata.SD31.bin\"\n\n \n#define AR6003_HW_2_1_1_VERSION                 0x30000582\n#define AR6003_HW_2_1_1_FW_DIR\t\t\t\"ath6k/AR6003/hw2.1.1\"\n#define AR6003_HW_2_1_1_OTP_FILE\t\t\"otp.bin\"\n#define AR6003_HW_2_1_1_FIRMWARE_FILE\t\t\"athwlan.bin\"\n#define AR6003_HW_2_1_1_TCMD_FIRMWARE_FILE\t\"athtcmd_ram.bin\"\n#define AR6003_HW_2_1_1_UTF_FIRMWARE_FILE\t\"utf.bin\"\n#define AR6003_HW_2_1_1_TESTSCRIPT_FILE\t\"nullTestFlow.bin\"\n#define AR6003_HW_2_1_1_PATCH_FILE\t\t\"data.patch.bin\"\n#define AR6003_HW_2_1_1_BOARD_DATA_FILE AR6003_HW_2_1_1_FW_DIR \"/bdata.bin\"\n#define AR6003_HW_2_1_1_DEFAULT_BOARD_DATA_FILE\t\\\n\t\t\tAR6003_HW_2_1_1_FW_DIR \"/bdata.SD31.bin\"\n\n \n#define AR6004_HW_1_0_VERSION                 0x30000623\n#define AR6004_HW_1_0_FW_DIR\t\t\t\"ath6k/AR6004/hw1.0\"\n#define AR6004_HW_1_0_FIRMWARE_FILE\t\t\"fw.ram.bin\"\n#define AR6004_HW_1_0_BOARD_DATA_FILE         AR6004_HW_1_0_FW_DIR \"/bdata.bin\"\n#define AR6004_HW_1_0_DEFAULT_BOARD_DATA_FILE \\\n\tAR6004_HW_1_0_FW_DIR \"/bdata.DB132.bin\"\n\n \n#define AR6004_HW_1_1_VERSION                 0x30000001\n#define AR6004_HW_1_1_FW_DIR\t\t\t\"ath6k/AR6004/hw1.1\"\n#define AR6004_HW_1_1_FIRMWARE_FILE\t\t\"fw.ram.bin\"\n#define AR6004_HW_1_1_BOARD_DATA_FILE         AR6004_HW_1_1_FW_DIR \"/bdata.bin\"\n#define AR6004_HW_1_1_DEFAULT_BOARD_DATA_FILE \\\n\tAR6004_HW_1_1_FW_DIR \"/bdata.DB132.bin\"\n\n \n#define AR6004_HW_1_2_VERSION                 0x300007e8\n#define AR6004_HW_1_2_FW_DIR\t\t\t\"ath6k/AR6004/hw1.2\"\n#define AR6004_HW_1_2_FIRMWARE_FILE           \"fw.ram.bin\"\n#define AR6004_HW_1_2_BOARD_DATA_FILE         AR6004_HW_1_2_FW_DIR \"/bdata.bin\"\n#define AR6004_HW_1_2_DEFAULT_BOARD_DATA_FILE \\\n\tAR6004_HW_1_2_FW_DIR \"/bdata.bin\"\n\n \n#define AR6004_HW_1_3_VERSION\t\t\t0x31c8088a\n#define AR6004_HW_1_3_FW_DIR\t\t\t\"ath6k/AR6004/hw1.3\"\n#define AR6004_HW_1_3_FIRMWARE_FILE\t\t\"fw.ram.bin\"\n#define AR6004_HW_1_3_TCMD_FIRMWARE_FILE\t\"utf.bin\"\n#define AR6004_HW_1_3_UTF_FIRMWARE_FILE\t\t\"utf.bin\"\n#define AR6004_HW_1_3_TESTSCRIPT_FILE\t\t\"nullTestFlow.bin\"\n#define AR6004_HW_1_3_BOARD_DATA_FILE\t      AR6004_HW_1_3_FW_DIR \"/bdata.bin\"\n#define AR6004_HW_1_3_DEFAULT_BOARD_DATA_FILE AR6004_HW_1_3_FW_DIR \"/bdata.bin\"\n\n \n#define AR6004_HW_3_0_VERSION\t\t\t0x31C809F8\n#define AR6004_HW_3_0_FW_DIR\t\t\t\"ath6k/AR6004/hw3.0\"\n#define AR6004_HW_3_0_FIRMWARE_FILE\t\t\"fw.ram.bin\"\n#define AR6004_HW_3_0_TCMD_FIRMWARE_FILE\t\"utf.bin\"\n#define AR6004_HW_3_0_UTF_FIRMWARE_FILE\t\t\"utf.bin\"\n#define AR6004_HW_3_0_TESTSCRIPT_FILE\t\t\"nullTestFlow.bin\"\n#define AR6004_HW_3_0_BOARD_DATA_FILE\t      AR6004_HW_3_0_FW_DIR \"/bdata.bin\"\n#define AR6004_HW_3_0_DEFAULT_BOARD_DATA_FILE AR6004_HW_3_0_FW_DIR \"/bdata.bin\"\n\n \n#define STA_PS_AWAKE\t\tBIT(0)\n#define\tSTA_PS_SLEEP\t\tBIT(1)\n#define\tSTA_PS_POLLED\t\tBIT(2)\n#define STA_PS_APSD_TRIGGER     BIT(3)\n#define STA_PS_APSD_EOSP        BIT(4)\n\n \n#define ATH6KL_CONTROL_PKT_TAG    HTC_TX_PACKET_TAG_USER_DEFINED\n#define ATH6KL_DATA_PKT_TAG       (ATH6KL_CONTROL_PKT_TAG + 1)\n\n#define AR6003_CUST_DATA_SIZE 16\n\n#define AGGR_WIN_IDX(x, y)          ((x) % (y))\n#define AGGR_INCR_IDX(x, y)         AGGR_WIN_IDX(((x) + 1), (y))\n#define AGGR_DCRM_IDX(x, y)         AGGR_WIN_IDX(((x) - 1), (y))\n#define ATH6KL_MAX_SEQ_NO\t\t0xFFF\n#define ATH6KL_NEXT_SEQ_NO(x)\t\t(((x) + 1) & ATH6KL_MAX_SEQ_NO)\n\n#define NUM_OF_TIDS         8\n#define AGGR_SZ_DEFAULT     8\n\n#define AGGR_WIN_SZ_MIN     2\n#define AGGR_WIN_SZ_MAX     8\n\n#define TID_WINDOW_SZ(_x)   ((_x) << 1)\n\n#define AGGR_NUM_OF_FREE_NETBUFS    16\n\n#define AGGR_RX_TIMEOUT     100\t \n\n#define WMI_TIMEOUT (2 * HZ)\n\n#define MBOX_YIELD_LIMIT 99\n\n#define ATH6KL_DEFAULT_LISTEN_INTVAL\t100  \n#define ATH6KL_DEFAULT_BMISS_TIME\t1500\n#define ATH6KL_MAX_WOW_LISTEN_INTL\t300  \n#define ATH6KL_MAX_BMISS_TIME\t\t5000\n\n \n \n#define ATH6KL_CONF_IGNORE_ERP_BARKER\t\tBIT(0)\n#define ATH6KL_CONF_IGNORE_PS_FAIL_EVT_IN_SCAN  BIT(1)\n#define ATH6KL_CONF_ENABLE_11N\t\t\tBIT(2)\n#define ATH6KL_CONF_ENABLE_TX_BURST\t\tBIT(3)\n#define ATH6KL_CONF_UART_DEBUG\t\t\tBIT(4)\n\n#define P2P_WILDCARD_SSID_LEN\t\t\t7  \n\nenum wlan_low_pwr_state {\n\tWLAN_POWER_STATE_ON,\n\tWLAN_POWER_STATE_CUT_PWR,\n\tWLAN_POWER_STATE_DEEP_SLEEP,\n\tWLAN_POWER_STATE_WOW\n};\n\nenum sme_state {\n\tSME_DISCONNECTED,\n\tSME_CONNECTING,\n\tSME_CONNECTED\n};\n\nstruct skb_hold_q {\n\tstruct sk_buff *skb;\n\tbool is_amsdu;\n\tu16 seq_no;\n};\n\nstruct rxtid {\n\tbool aggr;\n\tbool timer_mon;\n\tu16 win_sz;\n\tu16 seq_next;\n\tu32 hold_q_sz;\n\tstruct skb_hold_q *hold_q;\n\tstruct sk_buff_head q;\n\n\t \n\tspinlock_t lock;\n};\n\nstruct rxtid_stats {\n\tu32 num_into_aggr;\n\tu32 num_dups;\n\tu32 num_oow;\n\tu32 num_mpdu;\n\tu32 num_amsdu;\n\tu32 num_delivered;\n\tu32 num_timeouts;\n\tu32 num_hole;\n\tu32 num_bar;\n};\n\nstruct aggr_info_conn {\n\tu8 aggr_sz;\n\tu8 timer_scheduled;\n\tstruct timer_list timer;\n\tstruct net_device *dev;\n\tstruct rxtid rx_tid[NUM_OF_TIDS];\n\tstruct rxtid_stats stat[NUM_OF_TIDS];\n\tstruct aggr_info *aggr_info;\n};\n\nstruct aggr_info {\n\tstruct aggr_info_conn *aggr_conn;\n\tstruct sk_buff_head rx_amsdu_freeq;\n};\n\nstruct ath6kl_wep_key {\n\tu8 key_index;\n\tu8 key_len;\n\tu8 key[64];\n};\n\n#define ATH6KL_KEY_SEQ_LEN 8\n\nstruct ath6kl_key {\n\tu8 key[WLAN_MAX_KEY_LEN];\n\tu8 key_len;\n\tu8 seq[ATH6KL_KEY_SEQ_LEN];\n\tu8 seq_len;\n\tu32 cipher;\n};\n\nstruct ath6kl_node_mapping {\n\tu8 mac_addr[ETH_ALEN];\n\tu8 ep_id;\n\tu8 tx_pend;\n};\n\nstruct ath6kl_cookie {\n\tstruct sk_buff *skb;\n\tu32 map_no;\n\tstruct htc_packet htc_pkt;\n\tstruct ath6kl_cookie *arc_list_next;\n};\n\nstruct ath6kl_mgmt_buff {\n\tstruct list_head list;\n\tu32 freq;\n\tu32 wait;\n\tu32 id;\n\tbool no_cck;\n\tsize_t len;\n\tu8 buf[];\n};\n\nstruct ath6kl_sta {\n\tu16 sta_flags;\n\tu8 mac[ETH_ALEN];\n\tu8 aid;\n\tu8 keymgmt;\n\tu8 ucipher;\n\tu8 auth;\n\tu8 wpa_ie[ATH6KL_MAX_IE];\n\tstruct sk_buff_head psq;\n\n\t \n\tspinlock_t psq_lock;\n\n\tstruct list_head mgmt_psq;\n\tsize_t mgmt_psq_len;\n\tu8 apsd_info;\n\tstruct sk_buff_head apsdq;\n\tstruct aggr_info_conn *aggr_conn;\n};\n\nstruct ath6kl_version {\n\tu32 target_ver;\n\tu32 wlan_ver;\n\tu32 abi_ver;\n};\n\nstruct ath6kl_bmi {\n\tu32 cmd_credits;\n\tbool done_sent;\n\tu8 *cmd_buf;\n\tu32 max_data_size;\n\tu32 max_cmd_size;\n};\n\nstruct target_stats {\n\tu64 tx_pkt;\n\tu64 tx_byte;\n\tu64 tx_ucast_pkt;\n\tu64 tx_ucast_byte;\n\tu64 tx_mcast_pkt;\n\tu64 tx_mcast_byte;\n\tu64 tx_bcast_pkt;\n\tu64 tx_bcast_byte;\n\tu64 tx_rts_success_cnt;\n\tu64 tx_pkt_per_ac[4];\n\n\tu64 tx_err;\n\tu64 tx_fail_cnt;\n\tu64 tx_retry_cnt;\n\tu64 tx_mult_retry_cnt;\n\tu64 tx_rts_fail_cnt;\n\n\tu64 rx_pkt;\n\tu64 rx_byte;\n\tu64 rx_ucast_pkt;\n\tu64 rx_ucast_byte;\n\tu64 rx_mcast_pkt;\n\tu64 rx_mcast_byte;\n\tu64 rx_bcast_pkt;\n\tu64 rx_bcast_byte;\n\tu64 rx_frgment_pkt;\n\n\tu64 rx_err;\n\tu64 rx_crc_err;\n\tu64 rx_key_cache_miss;\n\tu64 rx_decrypt_err;\n\tu64 rx_dupl_frame;\n\n\tu64 tkip_local_mic_fail;\n\tu64 tkip_cnter_measures_invoked;\n\tu64 tkip_replays;\n\tu64 tkip_fmt_err;\n\tu64 ccmp_fmt_err;\n\tu64 ccmp_replays;\n\n\tu64 pwr_save_fail_cnt;\n\n\tu64 cs_bmiss_cnt;\n\tu64 cs_low_rssi_cnt;\n\tu64 cs_connect_cnt;\n\tu64 cs_discon_cnt;\n\n\ts32 tx_ucast_rate;\n\ts32 rx_ucast_rate;\n\n\tu32 lq_val;\n\n\tu32 wow_pkt_dropped;\n\tu16 wow_evt_discarded;\n\n\ts16 noise_floor_calib;\n\ts16 cs_rssi;\n\ts16 cs_ave_beacon_rssi;\n\tu8 cs_ave_beacon_snr;\n\tu8 cs_last_roam_msec;\n\tu8 cs_snr;\n\n\tu8 wow_host_pkt_wakeups;\n\tu8 wow_host_evt_wakeups;\n\n\tu32 arp_received;\n\tu32 arp_matched;\n\tu32 arp_replied;\n};\n\nstruct ath6kl_mbox_info {\n\tu32 htc_addr;\n\tu32 htc_ext_addr;\n\tu32 htc_ext_sz;\n\n\tu32 block_size;\n\n\tu32 gmbox_addr;\n\n\tu32 gmbox_sz;\n};\n\n \n\n#define ATH6KL_KEYBUF_SIZE 16\n#define ATH6KL_MICBUF_SIZE (8+8)\t \n\n#define ATH6KL_KEY_XMIT  0x01\n#define ATH6KL_KEY_RECV  0x02\n#define ATH6KL_KEY_DEFAULT   0x80\t \n\n \nstruct ath6kl_req_key {\n\tbool valid;\n\tu8 key_index;\n\tint key_type;\n\tu8 key[WLAN_MAX_KEY_LEN];\n\tu8 key_len;\n};\n\nenum ath6kl_hif_type {\n\tATH6KL_HIF_TYPE_SDIO,\n\tATH6KL_HIF_TYPE_USB,\n};\n\nenum ath6kl_htc_type {\n\tATH6KL_HTC_TYPE_MBOX,\n\tATH6KL_HTC_TYPE_PIPE,\n};\n\n \n#define ATH6K_MAX_MC_FILTERS_PER_LIST 7\nstruct ath6kl_mc_filter {\n\tstruct list_head list;\n\tchar hw_addr[ATH6KL_MCAST_FILTER_MAC_ADDR_SIZE];\n};\n\nstruct ath6kl_htcap {\n\tbool ht_enable;\n\tu8 ampdu_factor;\n\tunsigned short cap_info;\n};\n\n \n#define ATH6KL_VIF_MAX\t3\n\n \nenum ath6kl_vif_state {\n\tCONNECTED,\n\tCONNECT_PEND,\n\tWMM_ENABLED,\n\tNETQ_STOPPED,\n\tDTIM_EXPIRED,\n\tCLEAR_BSSFILTER_ON_BEACON,\n\tDTIM_PERIOD_AVAIL,\n\tWLAN_ENABLED,\n\tSTATS_UPDATE_PEND,\n\tHOST_SLEEP_MODE_CMD_PROCESSED,\n\tNETDEV_MCAST_ALL_ON,\n\tNETDEV_MCAST_ALL_OFF,\n\tSCHED_SCANNING,\n};\n\nstruct ath6kl_vif {\n\tstruct list_head list;\n\tstruct wireless_dev wdev;\n\tstruct net_device *ndev;\n\tstruct ath6kl *ar;\n\t \n\tspinlock_t if_lock;\n\tu8 fw_vif_idx;\n\tunsigned long flags;\n\tint ssid_len;\n\tu8 ssid[IEEE80211_MAX_SSID_LEN];\n\tu8 dot11_auth_mode;\n\tu8 auth_mode;\n\tu8 prwise_crypto;\n\tu8 prwise_crypto_len;\n\tu8 grp_crypto;\n\tu8 grp_crypto_len;\n\tu8 def_txkey_index;\n\tu8 next_mode;\n\tu8 nw_type;\n\tu8 bssid[ETH_ALEN];\n\tu8 req_bssid[ETH_ALEN];\n\tu16 ch_hint;\n\tu16 bss_ch;\n\tstruct ath6kl_wep_key wep_key_list[WMI_MAX_KEY_INDEX + 1];\n\tstruct ath6kl_key keys[WMI_MAX_KEY_INDEX + 1];\n\tstruct aggr_info *aggr_cntxt;\n\tstruct ath6kl_htcap htcap[NUM_NL80211_BANDS];\n\n\tstruct timer_list disconnect_timer;\n\tstruct timer_list sched_scan_timer;\n\n\tstruct cfg80211_scan_request *scan_req;\n\tenum sme_state sme_state;\n\tint reconnect_flag;\n\tu32 last_roc_id;\n\tu32 last_cancel_roc_id;\n\tu32 send_action_id;\n\tbool probe_req_report;\n\tu16 assoc_bss_beacon_int;\n\tu16 listen_intvl_t;\n\tu16 bmiss_time_t;\n\tu32 txe_intvl;\n\tu16 bg_scan_period;\n\tu8 assoc_bss_dtim_period;\n\tstruct target_stats target_stats;\n\tstruct wmi_connect_cmd profile;\n\tu16 rsn_capab;\n\n\tstruct list_head mc_filter;\n};\n\nstatic inline struct ath6kl_vif *ath6kl_vif_from_wdev(struct wireless_dev *wdev)\n{\n\treturn container_of(wdev, struct ath6kl_vif, wdev);\n}\n\n#define WOW_LIST_ID\t\t0\n#define WOW_HOST_REQ_DELAY\t500  \n\n#define ATH6KL_SCHED_SCAN_RESULT_DELAY 5000  \n\n \nenum ath6kl_dev_state {\n\tWMI_ENABLED,\n\tWMI_READY,\n\tWMI_CTRL_EP_FULL,\n\tTESTMODE,\n\tDESTROY_IN_PROGRESS,\n\tSKIP_SCAN,\n\tROAM_TBL_PEND,\n\tFIRST_BOOT,\n\tRECOVERY_CLEANUP,\n};\n\nenum ath6kl_state {\n\tATH6KL_STATE_OFF,\n\tATH6KL_STATE_ON,\n\tATH6KL_STATE_SUSPENDING,\n\tATH6KL_STATE_RESUMING,\n\tATH6KL_STATE_DEEPSLEEP,\n\tATH6KL_STATE_CUTPOWER,\n\tATH6KL_STATE_WOW,\n\tATH6KL_STATE_RECOVERY,\n};\n\n \n#define ATH6KL_HB_RESP_MISS_THRES\t5\n\nenum ath6kl_fw_err {\n\tATH6KL_FW_ASSERT,\n\tATH6KL_FW_HB_RESP_FAILURE,\n\tATH6KL_FW_EP_FULL,\n};\n\nstruct ath6kl {\n\tstruct device *dev;\n\tstruct wiphy *wiphy;\n\n\tenum ath6kl_state state;\n\tunsigned int testmode;\n\n\tstruct ath6kl_bmi bmi;\n\tconst struct ath6kl_hif_ops *hif_ops;\n\tconst struct ath6kl_htc_ops *htc_ops;\n\tstruct wmi *wmi;\n\tint tx_pending[ENDPOINT_MAX];\n\tint total_tx_data_pend;\n\tstruct htc_target *htc_target;\n\tenum ath6kl_hif_type hif_type;\n\tvoid *hif_priv;\n\tstruct list_head vif_list;\n\t \n\tspinlock_t list_lock;\n\tu8 num_vif;\n\tunsigned int vif_max;\n\tu8 max_norm_iface;\n\tu8 avail_idx_map;\n\n\t \n\tspinlock_t lock;\n\n\tstruct semaphore sem;\n\tu8 lrssi_roam_threshold;\n\tstruct ath6kl_version version;\n\tu32 target_type;\n\tu8 tx_pwr;\n\tstruct ath6kl_node_mapping node_map[MAX_NODE_NUM];\n\tu8 ibss_ps_enable;\n\tbool ibss_if_active;\n\tu8 node_num;\n\tu8 next_ep_id;\n\tstruct ath6kl_cookie *cookie_list;\n\tu32 cookie_count;\n\tenum htc_endpoint_id ac2ep_map[WMM_NUM_AC];\n\tbool ac_stream_active[WMM_NUM_AC];\n\tu8 ac_stream_pri_map[WMM_NUM_AC];\n\tu8 hiac_stream_active_pri;\n\tu8 ep2ac_map[ENDPOINT_MAX];\n\tenum htc_endpoint_id ctrl_ep;\n\tstruct ath6kl_htc_credit_info credit_state_info;\n\tu32 connect_ctrl_flags;\n\tu32 user_key_ctrl;\n\tu8 usr_bss_filter;\n\tstruct ath6kl_sta sta_list[AP_MAX_NUM_STA];\n\tu8 sta_list_index;\n\tstruct ath6kl_req_key ap_mode_bkey;\n\tstruct sk_buff_head mcastpsq;\n\tu32 want_ch_switch;\n\tu16 last_ch;\n\n\t \n\tspinlock_t mcastpsq_lock;\n\n\tu8 intra_bss;\n\tstruct wmi_ap_mode_stat ap_stats;\n\tu8 ap_country_code[3];\n\tstruct list_head amsdu_rx_buffer_queue;\n\tu8 rx_meta_ver;\n\tenum wlan_low_pwr_state wlan_pwr_state;\n\tu8 mac_addr[ETH_ALEN];\n#define AR_MCAST_FILTER_MAC_ADDR_SIZE  4\n\tstruct {\n\t\tvoid *rx_report;\n\t\tsize_t rx_report_len;\n\t} tm;\n\n\tstruct ath6kl_hw {\n\t\tu32 id;\n\t\tconst char *name;\n\t\tu32 dataset_patch_addr;\n\t\tu32 app_load_addr;\n\t\tu32 app_start_override_addr;\n\t\tu32 board_ext_data_addr;\n\t\tu32 reserved_ram_size;\n\t\tu32 board_addr;\n\t\tu32 refclk_hz;\n\t\tu32 uarttx_pin;\n\t\tu32 uarttx_rate;\n\t\tu32 testscript_addr;\n\t\tu8 tx_ant;\n\t\tu8 rx_ant;\n\t\tenum wmi_phy_cap cap;\n\n\t\tu32 flags;\n\n\t\tstruct ath6kl_hw_fw {\n\t\t\tconst char *dir;\n\t\t\tconst char *otp;\n\t\t\tconst char *fw;\n\t\t\tconst char *tcmd;\n\t\t\tconst char *patch;\n\t\t\tconst char *utf;\n\t\t\tconst char *testscript;\n\t\t} fw;\n\n\t\tconst char *fw_board;\n\t\tconst char *fw_default_board;\n\t} hw;\n\n\tu16 conf_flags;\n\tu16 suspend_mode;\n\tu16 wow_suspend_mode;\n\twait_queue_head_t event_wq;\n\tstruct ath6kl_mbox_info mbox_info;\n\n\tstruct ath6kl_cookie cookie_mem[MAX_COOKIE_NUM];\n\tunsigned long flag;\n\n\tu8 *fw_board;\n\tsize_t fw_board_len;\n\n\tu8 *fw_otp;\n\tsize_t fw_otp_len;\n\n\tu8 *fw;\n\tsize_t fw_len;\n\n\tu8 *fw_patch;\n\tsize_t fw_patch_len;\n\n\tu8 *fw_testscript;\n\tsize_t fw_testscript_len;\n\n\tunsigned int fw_api;\n\tunsigned long fw_capabilities[ATH6KL_CAPABILITY_LEN];\n\n\tstruct workqueue_struct *ath6kl_wq;\n\n\tstruct dentry *debugfs_phy;\n\n\tbool p2p;\n\n\tbool wiphy_registered;\n\n\tstruct ath6kl_fw_recovery {\n\t\tstruct work_struct recovery_work;\n\t\tunsigned long err_reason;\n\t\tunsigned long hb_poll;\n\t\tstruct timer_list hb_timer;\n\t\tu32 seq_num;\n\t\tbool hb_pending;\n\t\tu8 hb_misscnt;\n\t\tbool enable;\n\t} fw_recovery;\n\n#ifdef CONFIG_ATH6KL_DEBUG\n\tstruct {\n\t\tstruct sk_buff_head fwlog_queue;\n\t\tstruct completion fwlog_completion;\n\t\tbool fwlog_open;\n\n\t\tu32 fwlog_mask;\n\n\t\tunsigned int dbgfs_diag_reg;\n\t\tu32 diag_reg_addr_wr;\n\t\tu32 diag_reg_val_wr;\n\n\t\tstruct {\n\t\t\tunsigned int invalid_rate;\n\t\t} war_stats;\n\n\t\tu8 *roam_tbl;\n\t\tunsigned int roam_tbl_len;\n\n\t\tu8 keepalive;\n\t\tu8 disc_timeout;\n\t} debug;\n#endif  \n};\n\nstatic inline struct ath6kl *ath6kl_priv(struct net_device *dev)\n{\n\treturn ((struct ath6kl_vif *) netdev_priv(dev))->ar;\n}\n\nstatic inline u32 ath6kl_get_hi_item_addr(struct ath6kl *ar,\n\t\t\t\t\t  u32 item_offset)\n{\n\tu32 addr = 0;\n\n\tif (ar->target_type == TARGET_TYPE_AR6003)\n\t\taddr = ATH6KL_AR6003_HI_START_ADDR + item_offset;\n\telse if (ar->target_type == TARGET_TYPE_AR6004)\n\t\taddr = ATH6KL_AR6004_HI_START_ADDR + item_offset;\n\n\treturn addr;\n}\n\nint ath6kl_configure_target(struct ath6kl *ar);\nvoid ath6kl_detect_error(unsigned long ptr);\nvoid disconnect_timer_handler(struct timer_list *t);\nvoid init_netdev(struct net_device *dev);\nvoid ath6kl_cookie_init(struct ath6kl *ar);\nvoid ath6kl_cookie_cleanup(struct ath6kl *ar);\nvoid ath6kl_rx(struct htc_target *target, struct htc_packet *packet);\nvoid ath6kl_tx_complete(struct htc_target *context,\n\t\t\tstruct list_head *packet_queue);\nenum htc_send_full_action ath6kl_tx_queue_full(struct htc_target *target,\n\t\t\t\t\t       struct htc_packet *packet);\nvoid ath6kl_stop_txrx(struct ath6kl *ar);\nvoid ath6kl_cleanup_amsdu_rxbufs(struct ath6kl *ar);\nint ath6kl_diag_write32(struct ath6kl *ar, u32 address, __le32 value);\nint ath6kl_diag_write(struct ath6kl *ar, u32 address, void *data, u32 length);\nint ath6kl_diag_read32(struct ath6kl *ar, u32 address, u32 *value);\nint ath6kl_diag_read(struct ath6kl *ar, u32 address, void *data, u32 length);\nint ath6kl_read_fwlogs(struct ath6kl *ar);\nvoid ath6kl_init_profile_info(struct ath6kl_vif *vif);\nvoid ath6kl_tx_data_cleanup(struct ath6kl *ar);\n\nstruct ath6kl_cookie *ath6kl_alloc_cookie(struct ath6kl *ar);\nvoid ath6kl_free_cookie(struct ath6kl *ar, struct ath6kl_cookie *cookie);\nnetdev_tx_t ath6kl_data_tx(struct sk_buff *skb, struct net_device *dev);\n\nstruct aggr_info *aggr_init(struct ath6kl_vif *vif);\nvoid aggr_conn_init(struct ath6kl_vif *vif, struct aggr_info *aggr_info,\n\t\t    struct aggr_info_conn *aggr_conn);\nvoid ath6kl_rx_refill(struct htc_target *target,\n\t\t      enum htc_endpoint_id endpoint);\nvoid ath6kl_refill_amsdu_rxbufs(struct ath6kl *ar, int count);\nstruct htc_packet *ath6kl_alloc_amsdu_rxbuf(struct htc_target *target,\n\t\t\t\t\t    enum htc_endpoint_id endpoint,\n\t\t\t\t\t    int len);\nvoid aggr_module_destroy(struct aggr_info *aggr_info);\nvoid aggr_reset_state(struct aggr_info_conn *aggr_conn);\n\nstruct ath6kl_sta *ath6kl_find_sta(struct ath6kl_vif *vif, u8 *node_addr);\nstruct ath6kl_sta *ath6kl_find_sta_by_aid(struct ath6kl *ar, u8 aid);\n\nvoid ath6kl_ready_event(void *devt, u8 *datap, u32 sw_ver, u32 abi_ver,\n\t\t\tenum wmi_phy_cap cap);\nint ath6kl_control_tx(void *devt, struct sk_buff *skb,\n\t\t      enum htc_endpoint_id eid);\nvoid ath6kl_connect_event(struct ath6kl_vif *vif, u16 channel,\n\t\t\t  u8 *bssid, u16 listen_int,\n\t\t\t  u16 beacon_int, enum network_type net_type,\n\t\t\t  u8 beacon_ie_len, u8 assoc_req_len,\n\t\t\t  u8 assoc_resp_len, u8 *assoc_info);\nvoid ath6kl_connect_ap_mode_bss(struct ath6kl_vif *vif, u16 channel);\nvoid ath6kl_connect_ap_mode_sta(struct ath6kl_vif *vif, u16 aid, u8 *mac_addr,\n\t\t\t\tu8 keymgmt, u8 ucipher, u8 auth,\n\t\t\t\tu8 assoc_req_len, u8 *assoc_info, u8 apsd_info);\nvoid ath6kl_disconnect_event(struct ath6kl_vif *vif, u8 reason,\n\t\t\t     u8 *bssid, u8 assoc_resp_len,\n\t\t\t     u8 *assoc_info, u16 prot_reason_status);\nvoid ath6kl_tkip_micerr_event(struct ath6kl_vif *vif, u8 keyid, bool ismcast);\nvoid ath6kl_txpwr_rx_evt(void *devt, u8 tx_pwr);\nvoid ath6kl_scan_complete_evt(struct ath6kl_vif *vif, int status);\nvoid ath6kl_tgt_stats_event(struct ath6kl_vif *vif, u8 *ptr, u32 len);\nvoid ath6kl_indicate_tx_activity(void *devt, u8 traffic_class, bool active);\nenum htc_endpoint_id ath6kl_ac2_endpoint_id(void *devt, u8 ac);\n\nvoid ath6kl_pspoll_event(struct ath6kl_vif *vif, u8 aid);\n\nvoid ath6kl_dtimexpiry_event(struct ath6kl_vif *vif);\nvoid ath6kl_disconnect(struct ath6kl_vif *vif);\nvoid aggr_recv_delba_req_evt(struct ath6kl_vif *vif, u8 tid);\nvoid aggr_recv_addba_req_evt(struct ath6kl_vif *vif, u8 tid, u16 seq_no,\n\t\t\t     u8 win_sz);\nvoid ath6kl_wakeup_event(void *dev);\n\nvoid ath6kl_init_control_info(struct ath6kl_vif *vif);\nstruct ath6kl_vif *ath6kl_vif_first(struct ath6kl *ar);\nvoid ath6kl_cfg80211_vif_stop(struct ath6kl_vif *vif, bool wmi_ready);\nint ath6kl_init_hw_start(struct ath6kl *ar);\nint ath6kl_init_hw_stop(struct ath6kl *ar);\nint ath6kl_init_fetch_firmwares(struct ath6kl *ar);\nint ath6kl_init_hw_params(struct ath6kl *ar);\n\nvoid ath6kl_check_wow_status(struct ath6kl *ar);\n\nvoid ath6kl_core_tx_complete(struct ath6kl *ar, struct sk_buff *skb);\nvoid ath6kl_core_rx_complete(struct ath6kl *ar, struct sk_buff *skb, u8 pipe);\n\nstruct ath6kl *ath6kl_core_create(struct device *dev);\nint ath6kl_core_init(struct ath6kl *ar, enum ath6kl_htc_type htc_type);\nvoid ath6kl_core_cleanup(struct ath6kl *ar);\nvoid ath6kl_core_destroy(struct ath6kl *ar);\n\n \nvoid ath6kl_init_hw_restart(struct ath6kl *ar);\nvoid ath6kl_recovery_err_notify(struct ath6kl *ar, enum ath6kl_fw_err reason);\nvoid ath6kl_recovery_hb_event(struct ath6kl *ar, u32 cookie);\nvoid ath6kl_recovery_init(struct ath6kl *ar);\nvoid ath6kl_recovery_cleanup(struct ath6kl *ar);\nvoid ath6kl_recovery_suspend(struct ath6kl *ar);\nvoid ath6kl_recovery_resume(struct ath6kl *ar);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}