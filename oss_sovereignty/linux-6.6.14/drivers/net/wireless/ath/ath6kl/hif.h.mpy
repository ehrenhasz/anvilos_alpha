{
  "module_name": "hif.h",
  "hash_id": "faba166d22cdc32b5fc179f87850ef8d21fe2f45f7dc6f03a37cbb0b37480503",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath6kl/hif.h",
  "human_readable_source": " \n\n#ifndef HIF_H\n#define HIF_H\n\n#include \"common.h\"\n#include \"core.h\"\n\n#include <linux/scatterlist.h>\n\n#define BUS_REQUEST_MAX_NUM                64\n#define HIF_MBOX_BLOCK_SIZE                128\n#define HIF_MBOX0_BLOCK_SIZE               1\n\n#define HIF_DMA_BUFFER_SIZE (32 * 1024)\n#define CMD53_FIXED_ADDRESS 1\n#define CMD53_INCR_ADDRESS  2\n\n#define MAX_SCATTER_REQUESTS             4\n#define MAX_SCATTER_ENTRIES_PER_REQ      16\n#define MAX_SCATTER_REQ_TRANSFER_SIZE    (32 * 1024)\n\n \n#define HIF_MBOX_BASE_ADDR                 0x800\n#define HIF_MBOX_WIDTH                     0x800\n\n#define HIF_MBOX_END_ADDR  (HTC_MAILBOX_NUM_MAX * HIF_MBOX_WIDTH - 1)\n\n \n#define HIF_MBOX0_EXT_BASE_ADDR  0x4000\n#define HIF_MBOX0_EXT_WIDTH      (12*1024)\n\n \n#define HIF_GMBOX_BASE_ADDR                0x7000\n#define HIF_GMBOX_WIDTH                    0x4000\n\n \n#define CCCR_SDIO_IRQ_MODE_REG         0xF0\n\n \n#define SDIO_IRQ_MODE_ASYNC_4BIT_IRQ   (1 << 0)\n\n \n#define HTC_MAILBOX\t0\n\n#define ATH6KL_TARGET_DEBUG_INTR_MASK     0x01\n\n \n#define ATH6KL_SCATTER_ENTRIES_PER_REQ            16\n#define ATH6KL_MAX_TRANSFER_SIZE_PER_SCATTER      (16 * 1024)\n#define ATH6KL_SCATTER_REQS                       4\n\n#define ATH6KL_HIF_COMMUNICATION_TIMEOUT\t1000\n\nstruct bus_request {\n\tstruct list_head list;\n\n\t \n\tu32 address;\n\n\tu8 *buffer;\n\tu32 length;\n\tu32 request;\n\tstruct htc_packet *packet;\n\tint status;\n\n\t \n\tstruct hif_scatter_req *scat_req;\n};\n\n \n#define HIF_READ                    0x00000001\n#define HIF_WRITE                   0x00000002\n#define HIF_DIR_MASK                (HIF_READ | HIF_WRITE)\n\n \n#define HIF_SYNCHRONOUS             0x00000010\n#define HIF_ASYNCHRONOUS            0x00000020\n#define HIF_EMODE_MASK              (HIF_SYNCHRONOUS | HIF_ASYNCHRONOUS)\n\n \n#define HIF_BYTE_BASIS              0x00000040\n#define HIF_BLOCK_BASIS             0x00000080\n#define HIF_DMODE_MASK              (HIF_BYTE_BASIS | HIF_BLOCK_BASIS)\n\n \n#define HIF_FIXED_ADDRESS           0x00000100\n#define HIF_INCREMENTAL_ADDRESS     0x00000200\n#define HIF_AMODE_MASK\t\t  (HIF_FIXED_ADDRESS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_WR_ASYNC_BYTE_INC\t\t\t\t\t\\\n\t(HIF_WRITE | HIF_ASYNCHRONOUS |\t\t\t\t\\\n\t HIF_BYTE_BASIS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_WR_ASYNC_BLOCK_INC\t\t\t\t\t\\\n\t(HIF_WRITE | HIF_ASYNCHRONOUS |\t\t\t\t\\\n\t HIF_BLOCK_BASIS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_WR_SYNC_BYTE_FIX\t\t\t\t\t\\\n\t(HIF_WRITE | HIF_SYNCHRONOUS |\t\t\t\t\\\n\t HIF_BYTE_BASIS | HIF_FIXED_ADDRESS)\n\n#define HIF_WR_SYNC_BYTE_INC\t\t\t\t\t\\\n\t(HIF_WRITE | HIF_SYNCHRONOUS |\t\t\t\t\\\n\t HIF_BYTE_BASIS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_WR_SYNC_BLOCK_INC\t\t\t\t\t\\\n\t(HIF_WRITE | HIF_SYNCHRONOUS |\t\t\t\t\\\n\t HIF_BLOCK_BASIS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_RD_SYNC_BYTE_INC\t\t\t\t\t\t\\\n\t(HIF_READ | HIF_SYNCHRONOUS |\t\t\t\t\t\\\n\t HIF_BYTE_BASIS | HIF_INCREMENTAL_ADDRESS)\n\n#define HIF_RD_SYNC_BYTE_FIX\t\t\t\t\t\t\\\n\t(HIF_READ | HIF_SYNCHRONOUS |\t\t\t\t\t\\\n\t HIF_BYTE_BASIS | HIF_FIXED_ADDRESS)\n\n#define HIF_RD_ASYNC_BLOCK_FIX\t\t\t\t\t\t\\\n\t(HIF_READ | HIF_ASYNCHRONOUS |\t\t\t\t\t\\\n\t HIF_BLOCK_BASIS | HIF_FIXED_ADDRESS)\n\n#define HIF_RD_SYNC_BLOCK_FIX\t\t\t\t\t\t\\\n\t(HIF_READ | HIF_SYNCHRONOUS |\t\t\t\t\t\\\n\t HIF_BLOCK_BASIS | HIF_FIXED_ADDRESS)\n\nstruct hif_scatter_item {\n\tu8 *buf;\n\tint len;\n\tstruct htc_packet *packet;\n};\n\nstruct hif_scatter_req {\n\tstruct list_head list;\n\t \n\tu32 addr;\n\n\t \n\tu32 req;\n\n\t \n\tu32 len;\n\n\tbool virt_scat;\n\n\tvoid (*complete) (struct htc_target *, struct hif_scatter_req *);\n\tint status;\n\tint scat_entries;\n\n\tstruct bus_request *busrequest;\n\tstruct scatterlist *sgentries;\n\n\t \n\tu8 *virt_dma_buf;\n\n\tu32 scat_q_depth;\n\n\tstruct hif_scatter_item scat_list[];\n};\n\nstruct ath6kl_irq_proc_registers {\n\tu8 host_int_status;\n\tu8 cpu_int_status;\n\tu8 error_int_status;\n\tu8 counter_int_status;\n\tu8 mbox_frame;\n\tu8 rx_lkahd_valid;\n\tu8 host_int_status2;\n\tu8 gmbox_rx_avail;\n\t__le32 rx_lkahd[2];\n\t__le32 rx_gmbox_lkahd_alias[2];\n} __packed;\n\nstruct ath6kl_irq_enable_reg {\n\tu8 int_status_en;\n\tu8 cpu_int_status_en;\n\tu8 err_int_status_en;\n\tu8 cntr_int_status_en;\n} __packed;\n\nstruct ath6kl_device {\n\t \n\tspinlock_t lock;\n\tstruct ath6kl_irq_proc_registers irq_proc_reg;\n\tstruct ath6kl_irq_enable_reg irq_en_reg;\n\tstruct htc_target *htc_cnxt;\n\tstruct ath6kl *ar;\n};\n\nstruct ath6kl_hif_ops {\n\tint (*read_write_sync)(struct ath6kl *ar, u32 addr, u8 *buf,\n\t\t\t       u32 len, u32 request);\n\tint (*write_async)(struct ath6kl *ar, u32 address, u8 *buffer,\n\t\t\t   u32 length, u32 request, struct htc_packet *packet);\n\n\tvoid (*irq_enable)(struct ath6kl *ar);\n\tvoid (*irq_disable)(struct ath6kl *ar);\n\n\tstruct hif_scatter_req *(*scatter_req_get)(struct ath6kl *ar);\n\tvoid (*scatter_req_add)(struct ath6kl *ar,\n\t\t\t\tstruct hif_scatter_req *s_req);\n\tint (*enable_scatter)(struct ath6kl *ar);\n\tint (*scat_req_rw) (struct ath6kl *ar,\n\t\t\t    struct hif_scatter_req *scat_req);\n\tvoid (*cleanup_scatter)(struct ath6kl *ar);\n\tint (*suspend)(struct ath6kl *ar, struct cfg80211_wowlan *wow);\n\tint (*resume)(struct ath6kl *ar);\n\tint (*diag_read32)(struct ath6kl *ar, u32 address, u32 *value);\n\tint (*diag_write32)(struct ath6kl *ar, u32 address, __le32 value);\n\tint (*bmi_read)(struct ath6kl *ar, u8 *buf, u32 len);\n\tint (*bmi_write)(struct ath6kl *ar, u8 *buf, u32 len);\n\tint (*power_on)(struct ath6kl *ar);\n\tint (*power_off)(struct ath6kl *ar);\n\tvoid (*stop)(struct ath6kl *ar);\n\tint (*pipe_send)(struct ath6kl *ar, u8 pipe, struct sk_buff *hdr_buf,\n\t\t\t struct sk_buff *buf);\n\tvoid (*pipe_get_default)(struct ath6kl *ar, u8 *pipe_ul, u8 *pipe_dl);\n\tint (*pipe_map_service)(struct ath6kl *ar, u16 service_id, u8 *pipe_ul,\n\t\t\t\tu8 *pipe_dl);\n\tu16 (*pipe_get_free_queue_number)(struct ath6kl *ar, u8 pipe);\n};\n\nint ath6kl_hif_setup(struct ath6kl_device *dev);\nint ath6kl_hif_unmask_intrs(struct ath6kl_device *dev);\nint ath6kl_hif_mask_intrs(struct ath6kl_device *dev);\nint ath6kl_hif_poll_mboxmsg_rx(struct ath6kl_device *dev,\n\t\t\t       u32 *lk_ahd, int timeout);\nint ath6kl_hif_rx_control(struct ath6kl_device *dev, bool enable_rx);\nint ath6kl_hif_disable_intrs(struct ath6kl_device *dev);\n\nint ath6kl_hif_rw_comp_handler(void *context, int status);\nint ath6kl_hif_intr_bh_handler(struct ath6kl *ar);\n\n \nint ath6kl_hif_submit_scat_req(struct ath6kl_device *dev,\n\t\t\t       struct hif_scatter_req *scat_req, bool read);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}