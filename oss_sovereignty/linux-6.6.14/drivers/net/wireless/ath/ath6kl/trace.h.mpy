{
  "module_name": "trace.h",
  "hash_id": "39e523fcbcf17cebea83b49568485136b920b8fe9ef0485158d487b540c2f67d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath6kl/trace.h",
  "human_readable_source": " \n#if !defined(_ATH6KL_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n\n#include <net/cfg80211.h>\n#include <linux/skbuff.h>\n#include <linux/tracepoint.h>\n#include \"wmi.h\"\n#include \"hif.h\"\n\n#if !defined(_ATH6KL_TRACE_H)\nstatic inline unsigned int ath6kl_get_wmi_id(void *buf, size_t buf_len)\n{\n\tstruct wmi_cmd_hdr *hdr = buf;\n\n\tif (buf_len < sizeof(*hdr))\n\t\treturn 0;\n\n\treturn le16_to_cpu(hdr->cmd_id);\n}\n#endif  \n\n#define _ATH6KL_TRACE_H\n\n \n#if !defined(CONFIG_ATH6KL_TRACING)\n#undef TRACE_EVENT\n#define TRACE_EVENT(name, proto, ...) \\\nstatic inline void trace_ ## name(proto) {}\n#undef DECLARE_EVENT_CLASS\n#define DECLARE_EVENT_CLASS(...)\n#undef DEFINE_EVENT\n#define DEFINE_EVENT(evt_class, name, proto, ...) \\\nstatic inline void trace_ ## name(proto) {}\n#endif  \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ath6kl\n\nTRACE_EVENT(ath6kl_wmi_cmd,\n\tTP_PROTO(void *buf, size_t buf_len),\n\n\tTP_ARGS(buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, id)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->id = ath6kl_get_wmi_id(buf, buf_len);\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"id %d len %zd\",\n\t\t__entry->id, __entry->buf_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_wmi_event,\n\tTP_PROTO(void *buf, size_t buf_len),\n\n\tTP_ARGS(buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, id)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->id = ath6kl_get_wmi_id(buf, buf_len);\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"id %d len %zd\",\n\t\t__entry->id, __entry->buf_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_sdio,\n\tTP_PROTO(unsigned int addr, int flags,\n\t\t void *buf, size_t buf_len),\n\n\tTP_ARGS(addr, flags, buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, tx)\n\t\t__field(unsigned int, addr)\n\t\t__field(int, flags)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->addr = addr;\n\t\t__entry->flags = flags;\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\n\t\tif (flags & HIF_WRITE)\n\t\t\t__entry->tx = 1;\n\t\telse\n\t\t\t__entry->tx = 0;\n\t),\n\n\tTP_printk(\n\t\t\"%s addr 0x%x flags 0x%x len %zd\\n\",\n\t\t__entry->tx ? \"tx\" : \"rx\",\n\t\t__entry->addr,\n\t\t__entry->flags,\n\t\t__entry->buf_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_sdio_scat,\n\tTP_PROTO(unsigned int addr, int flags, unsigned int total_len,\n\t\t unsigned int entries, struct hif_scatter_item *list),\n\n\tTP_ARGS(addr, flags, total_len, entries, list),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, tx)\n\t\t__field(unsigned int, addr)\n\t\t__field(int, flags)\n\t\t__field(unsigned int, entries)\n\t\t__field(size_t, total_len)\n\t\t__dynamic_array(unsigned int, len_array, entries)\n\t\t__dynamic_array(u8, data, total_len)\n\t),\n\n\tTP_fast_assign(\n\t\tunsigned int *len_array;\n\t\tint i, offset = 0;\n\t\tsize_t len;\n\n\t\t__entry->addr = addr;\n\t\t__entry->flags = flags;\n\t\t__entry->entries = entries;\n\t\t__entry->total_len = total_len;\n\n\t\tif (flags & HIF_WRITE)\n\t\t\t__entry->tx = 1;\n\t\telse\n\t\t\t__entry->tx = 0;\n\n\t\tlen_array = __get_dynamic_array(len_array);\n\n\t\tfor (i = 0; i < entries; i++) {\n\t\t\tlen = list[i].len;\n\n\t\t\tmemcpy((u8 *) __get_dynamic_array(data) + offset,\n\t\t\t       list[i].buf, len);\n\n\t\t\tlen_array[i] = len;\n\t\t\toffset += len;\n\t\t}\n\t),\n\n\tTP_printk(\n\t\t\"%s addr 0x%x flags 0x%x entries %d total_len %zd\\n\",\n\t\t__entry->tx ? \"tx\" : \"rx\",\n\t\t__entry->addr,\n\t\t__entry->flags,\n\t\t__entry->entries,\n\t\t__entry->total_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_sdio_irq,\n\tTP_PROTO(void *buf, size_t buf_len),\n\n\tTP_ARGS(buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"irq len %zd\\n\", __entry->buf_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_htc_rx,\n\tTP_PROTO(int status, int endpoint, void *buf,\n\t\t size_t buf_len),\n\n\tTP_ARGS(status, endpoint, buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, status)\n\t\t__field(int, endpoint)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->status = status;\n\t\t__entry->endpoint = endpoint;\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"status %d endpoint %d len %zd\\n\",\n\t\t__entry->status,\n\t\t__entry->endpoint,\n\t\t__entry->buf_len\n\t)\n);\n\nTRACE_EVENT(ath6kl_htc_tx,\n\tTP_PROTO(int status, int endpoint, void *buf,\n\t\t size_t buf_len),\n\n\tTP_ARGS(status, endpoint, buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, status)\n\t\t__field(int, endpoint)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->status = status;\n\t\t__entry->endpoint = endpoint;\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"status %d endpoint %d len %zd\\n\",\n\t\t__entry->status,\n\t\t__entry->endpoint,\n\t\t__entry->buf_len\n\t)\n);\n\n#define ATH6KL_MSG_MAX 200\n\nDECLARE_EVENT_CLASS(ath6kl_log_event,\n\tTP_PROTO(struct va_format *vaf),\n\tTP_ARGS(vaf),\n\tTP_STRUCT__entry(\n\t\t__vstring(msg, vaf->fmt, vaf->va)\n\t),\n\tTP_fast_assign(\n\t\t__assign_vstr(msg, vaf->fmt, vaf->va);\n\t),\n\tTP_printk(\"%s\", __get_str(msg))\n);\n\nDEFINE_EVENT(ath6kl_log_event, ath6kl_log_err,\n\t     TP_PROTO(struct va_format *vaf),\n\t     TP_ARGS(vaf)\n);\n\nDEFINE_EVENT(ath6kl_log_event, ath6kl_log_warn,\n\t     TP_PROTO(struct va_format *vaf),\n\t     TP_ARGS(vaf)\n);\n\nDEFINE_EVENT(ath6kl_log_event, ath6kl_log_info,\n\t     TP_PROTO(struct va_format *vaf),\n\t     TP_ARGS(vaf)\n);\n\nTRACE_EVENT(ath6kl_log_dbg,\n\tTP_PROTO(unsigned int level, struct va_format *vaf),\n\tTP_ARGS(level, vaf),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, level)\n\t\t__vstring(msg, vaf->fmt, vaf->va)\n\t),\n\tTP_fast_assign(\n\t\t__entry->level = level;\n\t\t__assign_vstr(msg, vaf->fmt, vaf->va);\n\t),\n\tTP_printk(\"%s\", __get_str(msg))\n);\n\nTRACE_EVENT(ath6kl_log_dbg_dump,\n\tTP_PROTO(const char *msg, const char *prefix,\n\t\t const void *buf, size_t buf_len),\n\n\tTP_ARGS(msg, prefix, buf, buf_len),\n\n\tTP_STRUCT__entry(\n\t\t__string(msg, msg)\n\t\t__string(prefix, prefix)\n\t\t__field(size_t, buf_len)\n\t\t__dynamic_array(u8, buf, buf_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(msg, msg);\n\t\t__assign_str(prefix, prefix);\n\t\t__entry->buf_len = buf_len;\n\t\tmemcpy(__get_dynamic_array(buf), buf, buf_len);\n\t),\n\n\tTP_printk(\n\t\t\"%s/%s\\n\", __get_str(prefix), __get_str(msg)\n\t)\n);\n\n#endif  \n\n \n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE trace\n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}