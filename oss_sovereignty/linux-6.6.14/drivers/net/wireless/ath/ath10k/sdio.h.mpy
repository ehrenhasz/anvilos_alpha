{
  "module_name": "sdio.h",
  "hash_id": "7f9a675c15b4937238e33a11c5fd227d780a02fbf41e4085f2e84dd7a377cbf9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath10k/sdio.h",
  "human_readable_source": " \n \n\n#ifndef _SDIO_H_\n#define _SDIO_H_\n\n#define ATH10K_HIF_MBOX_BLOCK_SIZE              256\n\n#define ATH10K_SDIO_MAX_BUFFER_SIZE             4096  \n\n \n#define ATH10K_HIF_MBOX_BASE_ADDR               0x1000\n#define ATH10K_HIF_MBOX_WIDTH                   0x800\n\n#define ATH10K_HIF_MBOX_TOT_WIDTH \\\n\t(ATH10K_HIF_MBOX_NUM_MAX * ATH10K_HIF_MBOX_WIDTH)\n\n#define ATH10K_HIF_MBOX0_EXT_BASE_ADDR          0x5000\n#define ATH10K_HIF_MBOX0_EXT_WIDTH              (36 * 1024)\n#define ATH10K_HIF_MBOX0_EXT_WIDTH_ROME_2_0     (56 * 1024)\n#define ATH10K_HIF_MBOX1_EXT_WIDTH              (36 * 1024)\n#define ATH10K_HIF_MBOX_DUMMY_SPACE_SIZE        (2 * 1024)\n\n#define ATH10K_HTC_MBOX_MAX_PAYLOAD_LENGTH \\\n\t(ATH10K_SDIO_MAX_BUFFER_SIZE - sizeof(struct ath10k_htc_hdr))\n\n#define ATH10K_HIF_MBOX_NUM_MAX                 4\n#define ATH10K_SDIO_BUS_REQUEST_MAX_NUM         1024\n\n#define ATH10K_SDIO_HIF_COMMUNICATION_TIMEOUT_HZ (100 * HZ)\n\n \n#define ATH10K_HTC_MAILBOX                      0\n#define ATH10K_HTC_MAILBOX_MASK                 BIT(ATH10K_HTC_MAILBOX)\n\n \n#define ATH10K_HIF_GMBOX_BASE_ADDR              0x7000\n#define ATH10K_HIF_GMBOX_WIDTH                  0x4000\n\n \n#define ATH10K_SDIO_DRIVE_DTSX_MASK \\\n\t(SDIO_DRIVE_DTSx_MASK << SDIO_DRIVE_DTSx_SHIFT)\n\n#define ATH10K_SDIO_DRIVE_DTSX_TYPE_B           0\n#define ATH10K_SDIO_DRIVE_DTSX_TYPE_A           1\n#define ATH10K_SDIO_DRIVE_DTSX_TYPE_C           2\n#define ATH10K_SDIO_DRIVE_DTSX_TYPE_D           3\n\n \n#define CCCR_SDIO_IRQ_MODE_REG                  0xF0\n#define CCCR_SDIO_IRQ_MODE_REG_SDIO3            0x16\n\n#define CCCR_SDIO_DRIVER_STRENGTH_ENABLE_ADDR   0xF2\n\n#define CCCR_SDIO_DRIVER_STRENGTH_ENABLE_A      0x02\n#define CCCR_SDIO_DRIVER_STRENGTH_ENABLE_C      0x04\n#define CCCR_SDIO_DRIVER_STRENGTH_ENABLE_D      0x08\n\n#define CCCR_SDIO_ASYNC_INT_DELAY_ADDRESS       0xF0\n#define CCCR_SDIO_ASYNC_INT_DELAY_MASK          0xC0\n\n \n#define SDIO_IRQ_MODE_ASYNC_4BIT_IRQ            BIT(0)\n#define SDIO_IRQ_MODE_ASYNC_4BIT_IRQ_SDIO3      BIT(1)\n\n#define ATH10K_SDIO_TARGET_DEBUG_INTR_MASK      0x01\n\n \n#define ATH10K_SDIO_MAX_RX_MSGS \\\n\t(HTC_HOST_MAX_MSG_PER_RX_BUNDLE * 2)\n\n#define ATH10K_FIFO_TIMEOUT_AND_CHIP_CONTROL   0x00000868u\n#define ATH10K_FIFO_TIMEOUT_AND_CHIP_CONTROL_DISABLE_SLEEP_OFF 0xFFFEFFFF\n#define ATH10K_FIFO_TIMEOUT_AND_CHIP_CONTROL_DISABLE_SLEEP_ON 0x10000\n\nenum sdio_mbox_state {\n\tSDIO_MBOX_UNKNOWN_STATE = 0,\n\tSDIO_MBOX_REQUEST_TO_SLEEP_STATE = 1,\n\tSDIO_MBOX_SLEEP_STATE = 2,\n\tSDIO_MBOX_AWAKE_STATE = 3,\n};\n\n#define ATH10K_CIS_READ_WAIT_4_RTC_CYCLE_IN_US\t125\n#define ATH10K_CIS_RTC_STATE_ADDR\t\t0x1138\n#define ATH10K_CIS_RTC_STATE_ON\t\t\t0x01\n#define ATH10K_CIS_XTAL_SETTLE_DURATION_IN_US\t1500\n#define ATH10K_CIS_READ_RETRY\t\t\t10\n#define ATH10K_MIN_SLEEP_INACTIVITY_TIME_MS\t50\n\n \nstruct ath10k_sdio_bus_request {\n\tstruct list_head list;\n\n\t \n\tu32 address;\n\n\tstruct sk_buff *skb;\n\tenum ath10k_htc_ep_id eid;\n\tint status;\n\t \n\tbool htc_msg;\n\t \n\tstruct completion *comp;\n};\n\nstruct ath10k_sdio_rx_data {\n\tstruct sk_buff *skb;\n\tsize_t alloc_len;\n\tsize_t act_len;\n\tenum ath10k_htc_ep_id eid;\n\tbool part_of_bundle;\n\tbool last_in_bundle;\n\tbool trailer_only;\n};\n\nstruct ath10k_sdio_irq_proc_regs {\n\tu8 host_int_status;\n\tu8 cpu_int_status;\n\tu8 error_int_status;\n\tu8 counter_int_status;\n\tu8 mbox_frame;\n\tu8 rx_lookahead_valid;\n\tu8 host_int_status2;\n\tu8 gmbox_rx_avail;\n\t__le32 rx_lookahead[2 * ATH10K_HIF_MBOX_NUM_MAX];\n\t__le32 int_status_enable;\n};\n\nstruct ath10k_sdio_irq_enable_regs {\n\tu8 int_status_en;\n\tu8 cpu_int_status_en;\n\tu8 err_int_status_en;\n\tu8 cntr_int_status_en;\n};\n\nstruct ath10k_sdio_irq_data {\n\t \n\tstruct mutex mtx;\n\tstruct ath10k_sdio_irq_proc_regs *irq_proc_reg;\n\tstruct ath10k_sdio_irq_enable_regs *irq_en_reg;\n};\n\nstruct ath10k_mbox_ext_info {\n\tu32 htc_ext_addr;\n\tu32 htc_ext_sz;\n};\n\nstruct ath10k_mbox_info {\n\tu32 htc_addr;\n\tstruct ath10k_mbox_ext_info ext_info[2];\n\tu32 block_size;\n\tu32 block_mask;\n\tu32 gmbox_addr;\n\tu32 gmbox_sz;\n};\n\nstruct ath10k_sdio {\n\tstruct sdio_func *func;\n\n\tstruct ath10k_mbox_info mbox_info;\n\tbool swap_mbox;\n\tu32 mbox_addr[ATH10K_HTC_EP_COUNT];\n\tu32 mbox_size[ATH10K_HTC_EP_COUNT];\n\n\t \n\tstruct ath10k_sdio_bus_request bus_req[ATH10K_SDIO_BUS_REQUEST_MAX_NUM];\n\t \n\tstruct list_head bus_req_freeq;\n\n\tstruct sk_buff_head rx_head;\n\n\t \n\tspinlock_t lock;\n\n\tstruct ath10k_sdio_rx_data rx_pkts[ATH10K_SDIO_MAX_RX_MSGS];\n\tsize_t n_rx_pkts;\n\n\tstruct ath10k *ar;\n\tstruct ath10k_sdio_irq_data irq_data;\n\n\t \n\tu8 *vsg_buffer;\n\n\t \n\tu8 *bmi_buf;\n\n\tbool is_disabled;\n\n\tstruct workqueue_struct *workqueue;\n\tstruct work_struct wr_async_work;\n\tstruct list_head wr_asyncq;\n\t \n\tspinlock_t wr_async_lock;\n\n\tstruct work_struct async_work_rx;\n\tstruct timer_list sleep_timer;\n\tenum sdio_mbox_state mbox_state;\n};\n\nstatic inline struct ath10k_sdio *ath10k_sdio_priv(struct ath10k *ar)\n{\n\treturn (struct ath10k_sdio *)ar->drv_priv;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}