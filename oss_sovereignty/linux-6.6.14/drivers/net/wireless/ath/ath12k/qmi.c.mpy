{
  "module_name": "qmi.c",
  "hash_id": "130bec0041d28d01c1fb8c4f04063c79b95f1fc573df919adba0b4c9cd7a8367",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath12k/qmi.c",
  "human_readable_source": "\n \n\n#include <linux/elf.h>\n\n#include \"qmi.h\"\n#include \"core.h\"\n#include \"debug.h\"\n#include <linux/of.h>\n#include <linux/firmware.h>\n\n#define SLEEP_CLOCK_SELECT_INTERNAL_BIT\t0x02\n#define HOST_CSTATE_BIT\t\t\t0x04\n#define PLATFORM_CAP_PCIE_GLOBAL_RESET\t0x08\n#define ATH12K_QMI_MAX_CHUNK_SIZE\t2097152\n\nstatic struct qmi_elem_info wlfw_host_mlo_chip_info_s_v01_ei[] = {\n\t{\n\t\t.data_type      = QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len       = 1,\n\t\t.elem_size      = sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type       = 0,\n\t\t.offset         = offsetof(struct wlfw_host_mlo_chip_info_s_v01,\n\t\t\t\t\t   chip_id),\n\t},\n\t{\n\t\t.data_type      = QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len       = 1,\n\t\t.elem_size      = sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type       = 0,\n\t\t.offset         = offsetof(struct wlfw_host_mlo_chip_info_s_v01,\n\t\t\t\t\t   num_local_links),\n\t},\n\t{\n\t\t.data_type      = QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len       = QMI_WLFW_MAX_NUM_MLO_LINKS_PER_CHIP_V01,\n\t\t.elem_size      = sizeof(u8),\n\t\t.array_type     = STATIC_ARRAY,\n\t\t.tlv_type       = 0,\n\t\t.offset         = offsetof(struct wlfw_host_mlo_chip_info_s_v01,\n\t\t\t\t\t   hw_link_id),\n\t},\n\t{\n\t\t.data_type      = QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len       = QMI_WLFW_MAX_NUM_MLO_LINKS_PER_CHIP_V01,\n\t\t.elem_size      = sizeof(u8),\n\t\t.array_type     = STATIC_ARRAY,\n\t\t.tlv_type       = 0,\n\t\t.offset         = offsetof(struct wlfw_host_mlo_chip_info_s_v01,\n\t\t\t\t\t   valid_mlo_link_id),\n\t},\n\t{\n\t\t.data_type      = QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type       = QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_host_cap_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   num_clients_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   num_clients),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   wake_msi_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   wake_msi),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   gpios_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   gpios_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= QMI_WLFW_MAX_NUM_GPIO_V01,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   gpios),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   nm_modem_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   nm_modem),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   bdf_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   bdf_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   bdf_cache_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   bdf_cache_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   m3_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   m3_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   m3_cache_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   m3_cache_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_filesys_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_filesys_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_cache_support_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_cache_support),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_done_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_done),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mem_bucket_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mem_bucket),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1C,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mem_cfg_mode_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1C,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mem_cfg_mode),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1D,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_duration_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_2_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1D,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   cal_duraiton),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1E,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   platform_name_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRING,\n\t\t.elem_len\t= QMI_WLANFW_MAX_PLATFORM_NAME_LEN_V01 + 1,\n\t\t.elem_size\t= sizeof(char),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1E,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   platform_name),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1F,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   ddr_range_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_HOST_DDR_RANGE_SIZE_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_host_ddr_range),\n\t\t.array_type\t= STATIC_ARRAY,\n\t\t.tlv_type\t= 0x1F,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   ddr_range),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x20,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   host_build_type_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_host_build_type),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x20,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   host_build_type),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x21,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_capable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x21,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_capable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x22,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_chip_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_2_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x22,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_chip_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x23,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_group_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x23,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_group_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x24,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   max_mlo_peer_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_2_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x24,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   max_mlo_peer),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x25,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_num_chips_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x25,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_num_chips),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x26,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_chip_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLFW_MAX_NUM_MLO_CHIPS_V01,\n\t\t.elem_size\t= sizeof(struct wlfw_host_mlo_chip_info_s_v01),\n\t\t.array_type\t= STATIC_ARRAY,\n\t\t.tlv_type\t= 0x26,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   mlo_chip_info),\n\t\t.ei_array\t= wlfw_host_mlo_chip_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x27,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   feature_list_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x27,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_req_msg_v01,\n\t\t\t\t\t   feature_list),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_host_cap_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_host_cap_resp_msg_v01, resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_ind_register_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_ready_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_ready_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   initiate_cal_download_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   initiate_cal_download_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   initiate_cal_update_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   initiate_cal_update_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   msa_ready_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   msa_ready_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   pin_connect_result_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   pin_connect_result_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   client_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   client_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   request_mem_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   request_mem_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_mem_ready_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_mem_ready_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_init_done_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   fw_init_done_enable),\n\t},\n\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   rejuvenate_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   rejuvenate_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   xo_cal_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   xo_cal_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   cal_done_enable_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_req_msg_v01,\n\t\t\t\t\t   cal_done_enable),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_ind_register_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_resp_msg_v01,\n\t\t\t\t\t   resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_resp_msg_v01,\n\t\t\t\t\t   fw_status_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ind_register_resp_msg_v01,\n\t\t\t\t\t   fw_status),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_mem_cfg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_cfg_s_v01, offset),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_cfg_s_v01, size),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_cfg_s_v01, secure_flag),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_mem_seg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_s_v01,\n\t\t\t\t  size),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_mem_type_enum_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_s_v01, type),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_s_v01, mem_cfg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_NUM_MEM_CFG_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_mem_cfg_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_s_v01, mem_cfg),\n\t\t.ei_array\t= qmi_wlanfw_mem_cfg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_request_mem_ind_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_request_mem_ind_msg_v01,\n\t\t\t\t\t   mem_seg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= ATH12K_QMI_WLANFW_MAX_NUM_MEM_SEG_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_mem_seg_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_request_mem_ind_msg_v01,\n\t\t\t\t\t   mem_seg),\n\t\t.ei_array\t= qmi_wlanfw_mem_seg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_mem_seg_resp_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_resp_s_v01, addr),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_resp_s_v01, size),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_mem_type_enum_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_resp_s_v01, type),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_mem_seg_resp_s_v01, restore),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_respond_mem_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_respond_mem_req_msg_v01,\n\t\t\t\t\t   mem_seg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= ATH12K_QMI_WLANFW_MAX_NUM_MEM_SEG_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_mem_seg_resp_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_respond_mem_req_msg_v01,\n\t\t\t\t\t   mem_seg),\n\t\t.ei_array\t= qmi_wlanfw_mem_seg_resp_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_respond_mem_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_respond_mem_resp_msg_v01,\n\t\t\t\t\t   resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_cap_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_rf_chip_info_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_rf_chip_info_s_v01,\n\t\t\t\t\t   chip_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_rf_chip_info_s_v01,\n\t\t\t\t\t   chip_family),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_rf_board_info_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_rf_board_info_s_v01,\n\t\t\t\t\t   board_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_soc_info_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_soc_info_s_v01, soc_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_dev_mem_info_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_dev_mem_info_s_v01,\n\t\t\t\t\t   start),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_dev_mem_info_s_v01,\n\t\t\t\t\t   size),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_fw_version_info_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_fw_version_info_s_v01,\n\t\t\t\t\t   fw_version),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRING,\n\t\t.elem_len\t= ATH12K_QMI_WLANFW_MAX_TIMESTAMP_LEN_V01 + 1,\n\t\t.elem_size\t= sizeof(char),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_fw_version_info_s_v01,\n\t\t\t\t\t   fw_build_timestamp),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_cap_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01, resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   chip_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_rf_chip_info_s_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   chip_info),\n\t\t.ei_array\t= qmi_wlanfw_rf_chip_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   board_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_rf_board_info_s_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   board_info),\n\t\t.ei_array\t= qmi_wlanfw_rf_board_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   soc_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_soc_info_s_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   soc_info),\n\t\t.ei_array\t= qmi_wlanfw_soc_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   fw_version_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_fw_version_info_s_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   fw_version_info),\n\t\t.ei_array\t= qmi_wlanfw_fw_version_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   fw_build_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRING,\n\t\t.elem_len\t= ATH12K_QMI_WLANFW_MAX_BUILD_ID_LEN_V01 + 1,\n\t\t.elem_size\t= sizeof(char),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   fw_build_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   num_macs_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   num_macs),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   voltage_mv_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x16,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   voltage_mv),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   time_freq_hz_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   time_freq_hz),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   otp_version_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x18,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   otp_version),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   eeprom_caldata_read_timeout_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x19,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   eeprom_caldata_read_timeout),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   fw_caps_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1A,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01, fw_caps),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   rd_card_chain_cap_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1B,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   rd_card_chain_cap),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x1C,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01,\n\t\t\t\t\t   dev_mem_info_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= ATH12K_QMI_WLFW_MAX_DEV_MEM_NUM_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_dev_mem_info_s_v01),\n\t\t.array_type\t= STATIC_ARRAY,\n\t\t.tlv_type\t= 0x1C,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_cap_resp_msg_v01, dev_mem),\n\t\t.ei_array\t= qmi_wlanfw_dev_mem_info_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_bdf_download_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   file_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_cal_temp_id_enum_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   file_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   total_size_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   total_size),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   seg_id_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   seg_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   data_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   data_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= QMI_WLANFW_MAX_DATA_SIZE_V01,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   data),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   end_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x14,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   end),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   bdf_type_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x15,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_req_msg_v01,\n\t\t\t\t\t   bdf_type),\n\t},\n\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_bdf_download_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_bdf_download_resp_msg_v01,\n\t\t\t\t\t   resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_m3_info_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_8_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u64),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_m3_info_req_msg_v01, addr),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_m3_info_req_msg_v01, size),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_m3_info_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_m3_info_resp_msg_v01, resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_ce_tgt_pipe_cfg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01,\n\t\t\t\t\t   pipe_num),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_pipedir_enum_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01,\n\t\t\t\t\t   pipe_dir),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01,\n\t\t\t\t\t   nentries),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01,\n\t\t\t\t\t   nbytes_max),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01,\n\t\t\t\t\t   flags),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_ce_svc_pipe_cfg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_svc_pipe_cfg_s_v01,\n\t\t\t\t\t   service_id),\n\t},\n\t{\n\t\t.data_type\t= QMI_SIGNED_4_BYTE_ENUM,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(enum qmi_wlanfw_pipedir_enum_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_svc_pipe_cfg_s_v01,\n\t\t\t\t\t   pipe_dir),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_ce_svc_pipe_cfg_s_v01,\n\t\t\t\t\t   pipe_num),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_shadow_reg_cfg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_2_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_shadow_reg_cfg_s_v01, id),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_2_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u16),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_shadow_reg_cfg_s_v01,\n\t\t\t\t\t   offset),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_shadow_reg_v3_cfg_s_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_shadow_reg_v3_cfg_s_v01,\n\t\t\t\t\t   addr),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_wlan_mode_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_4_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u32),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x01,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_mode_req_msg_v01,\n\t\t\t\t\t   mode),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_mode_req_msg_v01,\n\t\t\t\t\t   hw_debug_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_UNSIGNED_1_BYTE,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_mode_req_msg_v01,\n\t\t\t\t\t   hw_debug),\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_wlan_mode_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_mode_resp_msg_v01,\n\t\t\t\t\t   resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_wlan_cfg_req_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   host_version_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRING,\n\t\t.elem_len\t= QMI_WLANFW_MAX_STR_LEN_V01 + 1,\n\t\t.elem_size\t= sizeof(char),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x10,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   host_version),\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   tgt_cfg_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   tgt_cfg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_NUM_CE_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_ce_tgt_pipe_cfg_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x11,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   tgt_cfg),\n\t\t.ei_array\t= qmi_wlanfw_ce_tgt_pipe_cfg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   svc_cfg_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   svc_cfg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_NUM_SVC_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_ce_svc_pipe_cfg_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x12,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   svc_cfg),\n\t\t.ei_array\t= qmi_wlanfw_ce_svc_pipe_cfg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type = NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type = NO_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_NUM_SHADOW_REG_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_shadow_reg_cfg_s_v01),\n\t\t.array_type = VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x13,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg),\n\t\t.ei_array\t= qmi_wlanfw_shadow_reg_cfg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_OPT_FLAG,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg_v3_valid),\n\t},\n\t{\n\t\t.data_type\t= QMI_DATA_LEN,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(u8),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg_v3_len),\n\t},\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= QMI_WLANFW_MAX_NUM_SHADOW_REG_V3_V01,\n\t\t.elem_size\t= sizeof(struct qmi_wlanfw_shadow_reg_v3_cfg_s_v01),\n\t\t.array_type\t= VAR_LEN_ARRAY,\n\t\t.tlv_type\t= 0x17,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_req_msg_v01,\n\t\t\t\t\t   shadow_reg_v3),\n\t\t.ei_array\t= qmi_wlanfw_shadow_reg_v3_cfg_s_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_wlan_cfg_resp_msg_v01_ei[] = {\n\t{\n\t\t.data_type\t= QMI_STRUCT,\n\t\t.elem_len\t= 1,\n\t\t.elem_size\t= sizeof(struct qmi_response_type_v01),\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= 0x02,\n\t\t.offset\t\t= offsetof(struct qmi_wlanfw_wlan_cfg_resp_msg_v01, resp),\n\t\t.ei_array\t= qmi_response_type_v01_ei,\n\t},\n\t{\n\t\t.data_type\t= QMI_EOTI,\n\t\t.array_type\t= NO_ARRAY,\n\t\t.tlv_type\t= QMI_COMMON_TLV_TYPE,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_mem_ready_ind_msg_v01_ei[] = {\n\t{\n\t\t.data_type = QMI_EOTI,\n\t\t.array_type = NO_ARRAY,\n\t},\n};\n\nstatic struct qmi_elem_info qmi_wlanfw_fw_ready_ind_msg_v01_ei[] = {\n\t{\n\t\t.data_type = QMI_EOTI,\n\t\t.array_type = NO_ARRAY,\n\t},\n};\n\nstatic void ath12k_host_cap_parse_mlo(struct qmi_wlanfw_host_cap_req_msg_v01 *req)\n{\n\treq->mlo_capable_valid = 1;\n\treq->mlo_capable = 1;\n\treq->mlo_chip_id_valid = 1;\n\treq->mlo_chip_id = 0;\n\treq->mlo_group_id_valid = 1;\n\treq->mlo_group_id = 0;\n\treq->max_mlo_peer_valid = 1;\n\t \n\treq->max_mlo_peer = 32;\n\treq->mlo_num_chips_valid = 1;\n\treq->mlo_num_chips = 1;\n\treq->mlo_chip_info_valid = 1;\n\treq->mlo_chip_info[0].chip_id = 0;\n\treq->mlo_chip_info[0].num_local_links = 2;\n\treq->mlo_chip_info[0].hw_link_id[0] = 0;\n\treq->mlo_chip_info[0].hw_link_id[1] = 1;\n\treq->mlo_chip_info[0].valid_mlo_link_id[0] = 1;\n\treq->mlo_chip_info[0].valid_mlo_link_id[1] = 1;\n}\n\nstatic int ath12k_qmi_host_cap_send(struct ath12k_base *ab)\n{\n\tstruct qmi_wlanfw_host_cap_req_msg_v01 req;\n\tstruct qmi_wlanfw_host_cap_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tint ret = 0;\n\n\tmemset(&req, 0, sizeof(req));\n\tmemset(&resp, 0, sizeof(resp));\n\n\treq.num_clients_valid = 1;\n\treq.num_clients = 1;\n\treq.mem_cfg_mode = ab->qmi.target_mem_mode;\n\treq.mem_cfg_mode_valid = 1;\n\treq.bdf_support_valid = 1;\n\treq.bdf_support = 1;\n\n\treq.m3_support_valid = 1;\n\treq.m3_support = 1;\n\treq.m3_cache_support_valid = 1;\n\treq.m3_cache_support = 1;\n\n\treq.cal_done_valid = 1;\n\treq.cal_done = ab->qmi.cal_done;\n\n\tif (ab->hw_params->qmi_cnss_feature_bitmap) {\n\t\treq.feature_list_valid = 1;\n\t\treq.feature_list = ab->hw_params->qmi_cnss_feature_bitmap;\n\t}\n\n\t \n\tif (ab->hw_params->internal_sleep_clock) {\n\t\treq.nm_modem_valid = 1;\n\n\t\t \n\t\treq.nm_modem |= HOST_CSTATE_BIT;\n\n\t\t \n\t\treq.nm_modem |= SLEEP_CLOCK_SELECT_INTERNAL_BIT;\n\t\treq.nm_modem |= PLATFORM_CAP_PCIE_GLOBAL_RESET;\n\n\t\tath12k_host_cap_parse_mlo(&req);\n\t}\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_host_cap_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_HOST_CAP_REQ_V01,\n\t\t\t       QMI_WLANFW_HOST_CAP_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_host_cap_req_msg_v01_ei, &req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"Failed to send host capability request,err = %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0)\n\t\tgoto out;\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"Host capability request failed, result: %d, err: %d\\n\",\n\t\t\t    resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\n\nout:\n\treturn ret;\n}\n\nstatic int ath12k_qmi_fw_ind_register_send(struct ath12k_base *ab)\n{\n\tstruct qmi_wlanfw_ind_register_req_msg_v01 *req;\n\tstruct qmi_wlanfw_ind_register_resp_msg_v01 *resp;\n\tstruct qmi_handle *handle = &ab->qmi.handle;\n\tstruct qmi_txn txn;\n\tint ret;\n\n\treq = kzalloc(sizeof(*req), GFP_KERNEL);\n\tif (!req)\n\t\treturn -ENOMEM;\n\n\tresp = kzalloc(sizeof(*resp), GFP_KERNEL);\n\tif (!resp) {\n\t\tret = -ENOMEM;\n\t\tgoto resp_out;\n\t}\n\n\treq->client_id_valid = 1;\n\treq->client_id = QMI_WLANFW_CLIENT_ID;\n\treq->fw_ready_enable_valid = 1;\n\treq->fw_ready_enable = 1;\n\treq->request_mem_enable_valid = 1;\n\treq->request_mem_enable = 1;\n\treq->fw_mem_ready_enable_valid = 1;\n\treq->fw_mem_ready_enable = 1;\n\treq->cal_done_enable_valid = 1;\n\treq->cal_done_enable = 1;\n\treq->fw_init_done_enable_valid = 1;\n\treq->fw_init_done_enable = 1;\n\n\treq->pin_connect_result_enable_valid = 0;\n\treq->pin_connect_result_enable = 0;\n\n\tret = qmi_txn_init(handle, &txn,\n\t\t\t   qmi_wlanfw_ind_register_resp_msg_v01_ei, resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_IND_REGISTER_REQ_V01,\n\t\t\t       QMI_WLANFW_IND_REGISTER_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_ind_register_req_msg_v01_ei, req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"Failed to send indication register request, err = %d\\n\",\n\t\t\t    ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"failed to register fw indication %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tif (resp->resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"FW Ind register request failed, result: %d, err: %d\\n\",\n\t\t\t    resp->resp.result, resp->resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\n\nout:\n\tkfree(resp);\nresp_out:\n\tkfree(req);\n\treturn ret;\n}\n\nstatic int ath12k_qmi_respond_fw_mem_request(struct ath12k_base *ab)\n{\n\tstruct qmi_wlanfw_respond_mem_req_msg_v01 *req;\n\tstruct qmi_wlanfw_respond_mem_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tint ret = 0, i;\n\tbool delayed;\n\n\treq = kzalloc(sizeof(*req), GFP_KERNEL);\n\tif (!req)\n\t\treturn -ENOMEM;\n\n\tmemset(&resp, 0, sizeof(resp));\n\n\t \n\tif (ab->qmi.target_mem_delayed) {\n\t\tdelayed = true;\n\t\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi delays mem_request %d\\n\",\n\t\t\t   ab->qmi.mem_seg_count);\n\t\tmemset(req, 0, sizeof(*req));\n\t} else {\n\t\tdelayed = false;\n\t\treq->mem_seg_len = ab->qmi.mem_seg_count;\n\t\tfor (i = 0; i < req->mem_seg_len ; i++) {\n\t\t\treq->mem_seg[i].addr = ab->qmi.target_mem[i].paddr;\n\t\t\treq->mem_seg[i].size = ab->qmi.target_mem[i].size;\n\t\t\treq->mem_seg[i].type = ab->qmi.target_mem[i].type;\n\t\t\tath12k_dbg(ab, ATH12K_DBG_QMI,\n\t\t\t\t   \"qmi req mem_seg[%d] %pad %u %u\\n\", i,\n\t\t\t\t   &ab->qmi.target_mem[i].paddr,\n\t\t\t\t   ab->qmi.target_mem[i].size,\n\t\t\t\t   ab->qmi.target_mem[i].type);\n\t\t}\n\t}\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_respond_mem_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_RESPOND_MEM_REQ_V01,\n\t\t\t       QMI_WLANFW_RESPOND_MEM_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_respond_mem_req_msg_v01_ei, req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to respond memory request, err = %d\\n\",\n\t\t\t    ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed memory request, err = %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\t \n\t\tif (delayed && resp.resp.error == 0)\n\t\t\tgoto out;\n\n\t\tath12k_warn(ab, \"Respond mem req failed, result: %d, err: %d\\n\",\n\t\t\t    resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\nout:\n\tkfree(req);\n\treturn ret;\n}\n\nstatic void ath12k_qmi_free_target_mem_chunk(struct ath12k_base *ab)\n{\n\tint i;\n\n\tfor (i = 0; i < ab->qmi.mem_seg_count; i++) {\n\t\tif (!ab->qmi.target_mem[i].v.addr)\n\t\t\tcontinue;\n\t\tdma_free_coherent(ab->dev,\n\t\t\t\t  ab->qmi.target_mem[i].size,\n\t\t\t\t  ab->qmi.target_mem[i].v.addr,\n\t\t\t\t  ab->qmi.target_mem[i].paddr);\n\t\tab->qmi.target_mem[i].v.addr = NULL;\n\t}\n}\n\nstatic int ath12k_qmi_alloc_target_mem_chunk(struct ath12k_base *ab)\n{\n\tint i;\n\tstruct target_mem_chunk *chunk;\n\n\tab->qmi.target_mem_delayed = false;\n\n\tfor (i = 0; i < ab->qmi.mem_seg_count; i++) {\n\t\tchunk = &ab->qmi.target_mem[i];\n\n\t\t \n\t\tswitch (chunk->type) {\n\t\tcase HOST_DDR_REGION_TYPE:\n\t\tcase M3_DUMP_REGION_TYPE:\n\t\tcase PAGEABLE_MEM_REGION_TYPE:\n\t\tcase CALDB_MEM_REGION_TYPE:\n\t\t\tchunk->v.addr = dma_alloc_coherent(ab->dev,\n\t\t\t\t\t\t\t   chunk->size,\n\t\t\t\t\t\t\t   &chunk->paddr,\n\t\t\t\t\t\t\t   GFP_KERNEL | __GFP_NOWARN);\n\t\t\tif (!chunk->v.addr) {\n\t\t\t\tif (chunk->size > ATH12K_QMI_MAX_CHUNK_SIZE) {\n\t\t\t\t\tab->qmi.target_mem_delayed = true;\n\t\t\t\t\tath12k_warn(ab,\n\t\t\t\t\t\t    \"qmi dma allocation failed (%d B type %u), will try later with small size\\n\",\n\t\t\t\t\t\t    chunk->size,\n\t\t\t\t\t\t    chunk->type);\n\t\t\t\t\tath12k_qmi_free_target_mem_chunk(ab);\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tath12k_warn(ab, \"memory allocation failure for %u size: %d\\n\",\n\t\t\t\t\t    chunk->type, chunk->size);\n\t\t\t\treturn -ENOMEM;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tath12k_warn(ab, \"memory type %u not supported\\n\",\n\t\t\t\t    chunk->type);\n\t\t\tchunk->paddr = 0;\n\t\t\tchunk->v.addr = NULL;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn 0;\n}\n\nstatic int ath12k_qmi_request_target_cap(struct ath12k_base *ab)\n{\n\tstruct qmi_wlanfw_cap_req_msg_v01 req;\n\tstruct qmi_wlanfw_cap_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tunsigned int board_id = ATH12K_BOARD_ID_DEFAULT;\n\tint ret = 0;\n\tint i;\n\n\tmemset(&req, 0, sizeof(req));\n\tmemset(&resp, 0, sizeof(resp));\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_cap_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_CAP_REQ_V01,\n\t\t\t       QMI_WLANFW_CAP_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_cap_req_msg_v01_ei, &req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send target cap request, err = %d\\n\",\n\t\t\t    ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed target cap request %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"qmi targetcap req failed, result: %d, err: %d\\n\",\n\t\t\t    resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\n\n\tif (resp.chip_info_valid) {\n\t\tab->qmi.target.chip_id = resp.chip_info.chip_id;\n\t\tab->qmi.target.chip_family = resp.chip_info.chip_family;\n\t}\n\n\tif (resp.board_info_valid)\n\t\tab->qmi.target.board_id = resp.board_info.board_id;\n\telse\n\t\tab->qmi.target.board_id = board_id;\n\n\tif (resp.soc_info_valid)\n\t\tab->qmi.target.soc_id = resp.soc_info.soc_id;\n\n\tif (resp.fw_version_info_valid) {\n\t\tab->qmi.target.fw_version = resp.fw_version_info.fw_version;\n\t\tstrscpy(ab->qmi.target.fw_build_timestamp,\n\t\t\tresp.fw_version_info.fw_build_timestamp,\n\t\t\tsizeof(ab->qmi.target.fw_build_timestamp));\n\t}\n\n\tif (resp.fw_build_id_valid)\n\t\tstrscpy(ab->qmi.target.fw_build_id, resp.fw_build_id,\n\t\t\tsizeof(ab->qmi.target.fw_build_id));\n\n\tif (resp.dev_mem_info_valid) {\n\t\tfor (i = 0; i < ATH12K_QMI_WLFW_MAX_DEV_MEM_NUM_V01; i++) {\n\t\t\tab->qmi.dev_mem[i].start =\n\t\t\t\tresp.dev_mem[i].start;\n\t\t\tab->qmi.dev_mem[i].size =\n\t\t\t\tresp.dev_mem[i].size;\n\t\t\tath12k_dbg(ab, ATH12K_DBG_QMI,\n\t\t\t\t   \"devmem [%d] start ox%llx size %llu\\n\", i,\n\t\t\t\t   ab->qmi.dev_mem[i].start,\n\t\t\t\t   ab->qmi.dev_mem[i].size);\n\t\t}\n\t}\n\n\tif (resp.eeprom_caldata_read_timeout_valid) {\n\t\tab->qmi.target.eeprom_caldata = resp.eeprom_caldata_read_timeout;\n\t\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi cal data supported from eeprom\\n\");\n\t}\n\n\tath12k_info(ab, \"chip_id 0x%x chip_family 0x%x board_id 0x%x soc_id 0x%x\\n\",\n\t\t    ab->qmi.target.chip_id, ab->qmi.target.chip_family,\n\t\t    ab->qmi.target.board_id, ab->qmi.target.soc_id);\n\n\tath12k_info(ab, \"fw_version 0x%x fw_build_timestamp %s fw_build_id %s\",\n\t\t    ab->qmi.target.fw_version,\n\t\t    ab->qmi.target.fw_build_timestamp,\n\t\t    ab->qmi.target.fw_build_id);\n\nout:\n\treturn ret;\n}\n\nstatic int ath12k_qmi_load_file_target_mem(struct ath12k_base *ab,\n\t\t\t\t\t   const u8 *data, u32 len, u8 type)\n{\n\tstruct qmi_wlanfw_bdf_download_req_msg_v01 *req;\n\tstruct qmi_wlanfw_bdf_download_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tconst u8 *temp = data;\n\tint ret;\n\tu32 remaining = len;\n\n\treq = kzalloc(sizeof(*req), GFP_KERNEL);\n\tif (!req)\n\t\treturn -ENOMEM;\n\tmemset(&resp, 0, sizeof(resp));\n\n\twhile (remaining) {\n\t\treq->valid = 1;\n\t\treq->file_id_valid = 1;\n\t\treq->file_id = ab->qmi.target.board_id;\n\t\treq->total_size_valid = 1;\n\t\treq->total_size = remaining;\n\t\treq->seg_id_valid = 1;\n\t\treq->data_valid = 1;\n\t\treq->bdf_type = type;\n\t\treq->bdf_type_valid = 1;\n\t\treq->end_valid = 1;\n\t\treq->end = 0;\n\n\t\tif (remaining > QMI_WLANFW_MAX_DATA_SIZE_V01) {\n\t\t\treq->data_len = QMI_WLANFW_MAX_DATA_SIZE_V01;\n\t\t} else {\n\t\t\treq->data_len = remaining;\n\t\t\treq->end = 1;\n\t\t}\n\n\t\tif (type == ATH12K_QMI_FILE_TYPE_EEPROM) {\n\t\t\treq->data_valid = 0;\n\t\t\treq->end = 1;\n\t\t\treq->data_len = ATH12K_QMI_MAX_BDF_FILE_NAME_SIZE;\n\t\t} else {\n\t\t\tmemcpy(req->data, temp, req->data_len);\n\t\t}\n\n\t\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t\t   qmi_wlanfw_bdf_download_resp_msg_v01_ei,\n\t\t\t\t   &resp);\n\t\tif (ret < 0)\n\t\t\tgoto out;\n\n\t\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi bdf download req fixed addr type %d\\n\",\n\t\t\t   type);\n\n\t\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t\t       QMI_WLANFW_BDF_DOWNLOAD_REQ_V01,\n\t\t\t\t       QMI_WLANFW_BDF_DOWNLOAD_REQ_MSG_V01_MAX_LEN,\n\t\t\t\t       qmi_wlanfw_bdf_download_req_msg_v01_ei, req);\n\t\tif (ret < 0) {\n\t\t\tqmi_txn_cancel(&txn);\n\t\t\tgoto out;\n\t\t}\n\n\t\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\t\tif (ret < 0)\n\t\t\tgoto out;\n\n\t\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\t\tath12k_warn(ab, \"qmi BDF download failed, result: %d, err: %d\\n\",\n\t\t\t\t    resp.resp.result, resp.resp.error);\n\t\t\tret = -EINVAL;\n\t\t\tgoto out;\n\t\t}\n\n\t\tif (type == ATH12K_QMI_FILE_TYPE_EEPROM) {\n\t\t\tremaining = 0;\n\t\t} else {\n\t\t\tremaining -= req->data_len;\n\t\t\ttemp += req->data_len;\n\t\t\treq->seg_id++;\n\t\t\tath12k_dbg(ab, ATH12K_DBG_QMI,\n\t\t\t\t   \"qmi bdf download request remaining %i\\n\",\n\t\t\t\t   remaining);\n\t\t}\n\t}\n\nout:\n\tkfree(req);\n\treturn ret;\n}\n\nstatic int ath12k_qmi_load_bdf_qmi(struct ath12k_base *ab,\n\t\t\t\t   enum ath12k_qmi_bdf_type type)\n{\n\tstruct device *dev = ab->dev;\n\tchar filename[ATH12K_QMI_MAX_BDF_FILE_NAME_SIZE];\n\tconst struct firmware *fw_entry;\n\tstruct ath12k_board_data bd;\n\tu32 fw_size, file_type;\n\tint ret = 0;\n\tconst u8 *tmp;\n\n\tmemset(&bd, 0, sizeof(bd));\n\n\tswitch (type) {\n\tcase ATH12K_QMI_BDF_TYPE_ELF:\n\t\tret = ath12k_core_fetch_bdf(ab, &bd);\n\t\tif (ret) {\n\t\t\tath12k_warn(ab, \"qmi failed to load bdf:\\n\");\n\t\t\tgoto out;\n\t\t}\n\n\t\tif (bd.len >= SELFMAG && memcmp(bd.data, ELFMAG, SELFMAG) == 0)\n\t\t\ttype = ATH12K_QMI_BDF_TYPE_ELF;\n\t\telse\n\t\t\ttype = ATH12K_QMI_BDF_TYPE_BIN;\n\n\t\tbreak;\n\tcase ATH12K_QMI_BDF_TYPE_REGDB:\n\t\tret = ath12k_core_fetch_board_data_api_1(ab, &bd,\n\t\t\t\t\t\t\t ATH12K_REGDB_FILE_NAME);\n\t\tif (ret) {\n\t\t\tath12k_warn(ab, \"qmi failed to load regdb bin:\\n\");\n\t\t\tgoto out;\n\t\t}\n\t\tbreak;\n\tcase ATH12K_QMI_BDF_TYPE_CALIBRATION:\n\n\t\tif (ab->qmi.target.eeprom_caldata) {\n\t\t\tfile_type = ATH12K_QMI_FILE_TYPE_EEPROM;\n\t\t\ttmp = filename;\n\t\t\tfw_size = ATH12K_QMI_MAX_BDF_FILE_NAME_SIZE;\n\t\t} else {\n\t\t\tfile_type = ATH12K_QMI_FILE_TYPE_CALDATA;\n\n\t\t\t \n\t\t\tsnprintf(filename, sizeof(filename), \"cal-%s-%s.bin\",\n\t\t\t\t ath12k_bus_str(ab->hif.bus), dev_name(dev));\n\t\t\tfw_entry = ath12k_core_firmware_request(ab, filename);\n\t\t\tif (!IS_ERR(fw_entry))\n\t\t\t\tgoto success;\n\n\t\t\tfw_entry = ath12k_core_firmware_request(ab,\n\t\t\t\t\t\t\t\tATH12K_DEFAULT_CAL_FILE);\n\t\t\tif (IS_ERR(fw_entry)) {\n\t\t\t\tret = PTR_ERR(fw_entry);\n\t\t\t\tath12k_warn(ab,\n\t\t\t\t\t    \"qmi failed to load CAL data file:%s\\n\",\n\t\t\t\t\t    filename);\n\t\t\t\tgoto out;\n\t\t\t}\n\nsuccess:\n\t\t\tfw_size = min_t(u32, ab->hw_params->fw.board_size,\n\t\t\t\t\tfw_entry->size);\n\t\t\ttmp = fw_entry->data;\n\t\t}\n\t\tret = ath12k_qmi_load_file_target_mem(ab, tmp, fw_size, file_type);\n\t\tif (ret < 0) {\n\t\t\tath12k_warn(ab, \"qmi failed to load caldata\\n\");\n\t\t\tgoto out_qmi_cal;\n\t\t}\n\n\t\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi caldata downloaded: type: %u\\n\",\n\t\t\t   file_type);\n\nout_qmi_cal:\n\t\tif (!ab->qmi.target.eeprom_caldata)\n\t\t\trelease_firmware(fw_entry);\n\t\treturn ret;\n\tdefault:\n\t\tath12k_warn(ab, \"unknown file type for load %d\", type);\n\t\tgoto out;\n\t}\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi bdf_type %d\\n\", type);\n\n\tfw_size = min_t(u32, ab->hw_params->fw.board_size, bd.len);\n\n\tret = ath12k_qmi_load_file_target_mem(ab, bd.data, fw_size, type);\n\tif (ret < 0)\n\t\tath12k_warn(ab, \"qmi failed to load bdf file\\n\");\n\nout:\n\tath12k_core_free_bdf(ab, &bd);\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi BDF download sequence completed\\n\");\n\n\treturn ret;\n}\n\nstatic int ath12k_qmi_m3_load(struct ath12k_base *ab)\n{\n\tstruct m3_mem_region *m3_mem = &ab->qmi.m3_mem;\n\tconst struct firmware *fw;\n\tchar path[100];\n\tint ret;\n\n\tif (m3_mem->vaddr || m3_mem->size)\n\t\treturn 0;\n\n\tfw = ath12k_core_firmware_request(ab, ATH12K_M3_FILE);\n\tif (IS_ERR(fw)) {\n\t\tret = PTR_ERR(fw);\n\t\tath12k_core_create_firmware_path(ab, ATH12K_M3_FILE,\n\t\t\t\t\t\t path, sizeof(path));\n\t\tath12k_err(ab, \"failed to load %s: %d\\n\", path, ret);\n\t\treturn ret;\n\t}\n\n\tm3_mem->vaddr = dma_alloc_coherent(ab->dev,\n\t\t\t\t\t   fw->size, &m3_mem->paddr,\n\t\t\t\t\t   GFP_KERNEL);\n\tif (!m3_mem->vaddr) {\n\t\tath12k_err(ab, \"failed to allocate memory for M3 with size %zu\\n\",\n\t\t\t   fw->size);\n\t\trelease_firmware(fw);\n\t\treturn -ENOMEM;\n\t}\n\n\tmemcpy(m3_mem->vaddr, fw->data, fw->size);\n\tm3_mem->size = fw->size;\n\trelease_firmware(fw);\n\n\treturn 0;\n}\n\nstatic void ath12k_qmi_m3_free(struct ath12k_base *ab)\n{\n\tstruct m3_mem_region *m3_mem = &ab->qmi.m3_mem;\n\n\tif (!m3_mem->vaddr)\n\t\treturn;\n\n\tdma_free_coherent(ab->dev, m3_mem->size,\n\t\t\t  m3_mem->vaddr, m3_mem->paddr);\n\tm3_mem->vaddr = NULL;\n}\n\nstatic int ath12k_qmi_wlanfw_m3_info_send(struct ath12k_base *ab)\n{\n\tstruct m3_mem_region *m3_mem = &ab->qmi.m3_mem;\n\tstruct qmi_wlanfw_m3_info_req_msg_v01 req;\n\tstruct qmi_wlanfw_m3_info_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tint ret = 0;\n\n\tmemset(&req, 0, sizeof(req));\n\tmemset(&resp, 0, sizeof(resp));\n\n\tret = ath12k_qmi_m3_load(ab);\n\tif (ret) {\n\t\tath12k_err(ab, \"failed to load m3 firmware: %d\", ret);\n\t\treturn ret;\n\t}\n\n\treq.addr = m3_mem->paddr;\n\treq.size = m3_mem->size;\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_m3_info_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_M3_INFO_REQ_V01,\n\t\t\t       QMI_WLANFW_M3_INFO_REQ_MSG_V01_MAX_MSG_LEN,\n\t\t\t       qmi_wlanfw_m3_info_req_msg_v01_ei, &req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send M3 information request, err = %d\\n\",\n\t\t\t    ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed M3 information request %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"qmi M3 info request failed, result: %d, err: %d\\n\",\n\t\t\t    resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\nout:\n\treturn ret;\n}\n\nstatic int ath12k_qmi_wlanfw_mode_send(struct ath12k_base *ab,\n\t\t\t\t       u32 mode)\n{\n\tstruct qmi_wlanfw_wlan_mode_req_msg_v01 req;\n\tstruct qmi_wlanfw_wlan_mode_resp_msg_v01 resp;\n\tstruct qmi_txn txn = {};\n\tint ret = 0;\n\n\tmemset(&req, 0, sizeof(req));\n\tmemset(&resp, 0, sizeof(resp));\n\n\treq.mode = mode;\n\treq.hw_debug_valid = 1;\n\treq.hw_debug = 0;\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_wlan_mode_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_WLAN_MODE_REQ_V01,\n\t\t\t       QMI_WLANFW_WLAN_MODE_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_wlan_mode_req_msg_v01_ei, &req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send mode request, mode: %d, err = %d\\n\",\n\t\t\t    mode, ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tif (mode == ATH12K_FIRMWARE_MODE_OFF && ret == -ENETRESET) {\n\t\t\tath12k_warn(ab, \"WLFW service is dis-connected\\n\");\n\t\t\treturn 0;\n\t\t}\n\t\tath12k_warn(ab, \"qmi failed set mode request, mode: %d, err = %d\\n\",\n\t\t\t    mode, ret);\n\t\tgoto out;\n\t}\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"Mode request failed, mode: %d, result: %d err: %d\\n\",\n\t\t\t    mode, resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\n\nout:\n\treturn ret;\n}\n\nstatic int ath12k_qmi_wlanfw_wlan_cfg_send(struct ath12k_base *ab)\n{\n\tstruct qmi_wlanfw_wlan_cfg_req_msg_v01 *req;\n\tstruct qmi_wlanfw_wlan_cfg_resp_msg_v01 resp;\n\tstruct ce_pipe_config *ce_cfg;\n\tstruct service_to_pipe *svc_cfg;\n\tstruct qmi_txn txn = {};\n\tint ret = 0, pipe_num;\n\n\tce_cfg\t= (struct ce_pipe_config *)ab->qmi.ce_cfg.tgt_ce;\n\tsvc_cfg\t= (struct service_to_pipe *)ab->qmi.ce_cfg.svc_to_ce_map;\n\n\treq = kzalloc(sizeof(*req), GFP_KERNEL);\n\tif (!req)\n\t\treturn -ENOMEM;\n\n\tmemset(&resp, 0, sizeof(resp));\n\n\treq->host_version_valid = 1;\n\tstrscpy(req->host_version, ATH12K_HOST_VERSION_STRING,\n\t\tsizeof(req->host_version));\n\n\treq->tgt_cfg_valid = 1;\n\t \n\treq->tgt_cfg_len = ab->qmi.ce_cfg.tgt_ce_len;\n\tfor (pipe_num = 0; pipe_num < req->tgt_cfg_len ; pipe_num++) {\n\t\treq->tgt_cfg[pipe_num].pipe_num = ce_cfg[pipe_num].pipenum;\n\t\treq->tgt_cfg[pipe_num].pipe_dir = ce_cfg[pipe_num].pipedir;\n\t\treq->tgt_cfg[pipe_num].nentries = ce_cfg[pipe_num].nentries;\n\t\treq->tgt_cfg[pipe_num].nbytes_max = ce_cfg[pipe_num].nbytes_max;\n\t\treq->tgt_cfg[pipe_num].flags = ce_cfg[pipe_num].flags;\n\t}\n\n\treq->svc_cfg_valid = 1;\n\t \n\treq->svc_cfg_len = ab->qmi.ce_cfg.svc_to_ce_map_len;\n\tfor (pipe_num = 0; pipe_num < req->svc_cfg_len; pipe_num++) {\n\t\treq->svc_cfg[pipe_num].service_id = svc_cfg[pipe_num].service_id;\n\t\treq->svc_cfg[pipe_num].pipe_dir = svc_cfg[pipe_num].pipedir;\n\t\treq->svc_cfg[pipe_num].pipe_num = svc_cfg[pipe_num].pipenum;\n\t}\n\n\t \n\tif (ab->hw_params->supports_shadow_regs) {\n\t\treq->shadow_reg_v3_valid = 1;\n\t\treq->shadow_reg_v3_len = min_t(u32,\n\t\t\t\t\t       ab->qmi.ce_cfg.shadow_reg_v3_len,\n\t\t\t\t\t       QMI_WLANFW_MAX_NUM_SHADOW_REG_V3_V01);\n\t\tmemcpy(&req->shadow_reg_v3, ab->qmi.ce_cfg.shadow_reg_v3,\n\t\t       sizeof(u32) * req->shadow_reg_v3_len);\n\t} else {\n\t\treq->shadow_reg_v3_valid = 0;\n\t}\n\n\tret = qmi_txn_init(&ab->qmi.handle, &txn,\n\t\t\t   qmi_wlanfw_wlan_cfg_resp_msg_v01_ei, &resp);\n\tif (ret < 0)\n\t\tgoto out;\n\n\tret = qmi_send_request(&ab->qmi.handle, NULL, &txn,\n\t\t\t       QMI_WLANFW_WLAN_CFG_REQ_V01,\n\t\t\t       QMI_WLANFW_WLAN_CFG_REQ_MSG_V01_MAX_LEN,\n\t\t\t       qmi_wlanfw_wlan_cfg_req_msg_v01_ei, req);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send wlan config request, err = %d\\n\",\n\t\t\t    ret);\n\t\tgoto out;\n\t}\n\n\tret = qmi_txn_wait(&txn, msecs_to_jiffies(ATH12K_QMI_WLANFW_TIMEOUT_MS));\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed wlan config request, err = %d\\n\", ret);\n\t\tgoto out;\n\t}\n\n\tif (resp.resp.result != QMI_RESULT_SUCCESS_V01) {\n\t\tath12k_warn(ab, \"qmi wlan config request failed, result: %d, err: %d\\n\",\n\t\t\t    resp.resp.result, resp.resp.error);\n\t\tret = -EINVAL;\n\t\tgoto out;\n\t}\n\nout:\n\tkfree(req);\n\treturn ret;\n}\n\nvoid ath12k_qmi_firmware_stop(struct ath12k_base *ab)\n{\n\tint ret;\n\n\tret = ath12k_qmi_wlanfw_mode_send(ab, ATH12K_FIRMWARE_MODE_OFF);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send wlan mode off\\n\");\n\t\treturn;\n\t}\n}\n\nint ath12k_qmi_firmware_start(struct ath12k_base *ab,\n\t\t\t      u32 mode)\n{\n\tint ret;\n\n\tret = ath12k_qmi_wlanfw_wlan_cfg_send(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send wlan cfg:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = ath12k_qmi_wlanfw_mode_send(ab, mode);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send wlan fw mode:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic int\nath12k_qmi_driver_event_post(struct ath12k_qmi *qmi,\n\t\t\t     enum ath12k_qmi_event_type type,\n\t\t\t     void *data)\n{\n\tstruct ath12k_qmi_driver_event *event;\n\n\tevent = kzalloc(sizeof(*event), GFP_ATOMIC);\n\tif (!event)\n\t\treturn -ENOMEM;\n\n\tevent->type = type;\n\tevent->data = data;\n\n\tspin_lock(&qmi->event_lock);\n\tlist_add_tail(&event->list, &qmi->event_list);\n\tspin_unlock(&qmi->event_lock);\n\n\tqueue_work(qmi->event_wq, &qmi->event_work);\n\n\treturn 0;\n}\n\nstatic int ath12k_qmi_event_server_arrive(struct ath12k_qmi *qmi)\n{\n\tstruct ath12k_base *ab = qmi->ab;\n\tint ret;\n\n\tret = ath12k_qmi_fw_ind_register_send(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send FW indication QMI:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = ath12k_qmi_host_cap_send(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send host cap QMI:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn ret;\n}\n\nstatic int ath12k_qmi_event_mem_request(struct ath12k_qmi *qmi)\n{\n\tstruct ath12k_base *ab = qmi->ab;\n\tint ret;\n\n\tret = ath12k_qmi_respond_fw_mem_request(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to respond fw mem req:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn ret;\n}\n\nstatic int ath12k_qmi_event_load_bdf(struct ath12k_qmi *qmi)\n{\n\tstruct ath12k_base *ab = qmi->ab;\n\tint ret;\n\n\tret = ath12k_qmi_request_target_cap(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to req target capabilities:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = ath12k_qmi_load_bdf_qmi(ab, ATH12K_QMI_BDF_TYPE_REGDB);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to load regdb file:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = ath12k_qmi_load_bdf_qmi(ab, ATH12K_QMI_BDF_TYPE_ELF);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to load board data file:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tif (ab->hw_params->download_calib) {\n\t\tret = ath12k_qmi_load_bdf_qmi(ab, ATH12K_QMI_BDF_TYPE_CALIBRATION);\n\t\tif (ret < 0)\n\t\t\tath12k_warn(ab, \"qmi failed to load calibrated data :%d\\n\", ret);\n\t}\n\n\tret = ath12k_qmi_wlanfw_m3_info_send(ab);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"qmi failed to send m3 info req:%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn ret;\n}\n\nstatic void ath12k_qmi_msg_mem_request_cb(struct qmi_handle *qmi_hdl,\n\t\t\t\t\t  struct sockaddr_qrtr *sq,\n\t\t\t\t\t  struct qmi_txn *txn,\n\t\t\t\t\t  const void *data)\n{\n\tstruct ath12k_qmi *qmi = container_of(qmi_hdl, struct ath12k_qmi, handle);\n\tstruct ath12k_base *ab = qmi->ab;\n\tconst struct qmi_wlanfw_request_mem_ind_msg_v01 *msg = data;\n\tint i, ret;\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi firmware request memory request\\n\");\n\n\tif (msg->mem_seg_len == 0 ||\n\t    msg->mem_seg_len > ATH12K_QMI_WLANFW_MAX_NUM_MEM_SEG_V01)\n\t\tath12k_warn(ab, \"Invalid memory segment length: %u\\n\",\n\t\t\t    msg->mem_seg_len);\n\n\tab->qmi.mem_seg_count = msg->mem_seg_len;\n\n\tfor (i = 0; i < qmi->mem_seg_count ; i++) {\n\t\tab->qmi.target_mem[i].type = msg->mem_seg[i].type;\n\t\tab->qmi.target_mem[i].size = msg->mem_seg[i].size;\n\t\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi mem seg type %d size %d\\n\",\n\t\t\t   msg->mem_seg[i].type, msg->mem_seg[i].size);\n\t}\n\n\tret = ath12k_qmi_alloc_target_mem_chunk(ab);\n\tif (ret) {\n\t\tath12k_warn(ab, \"qmi failed to alloc target memory: %d\\n\",\n\t\t\t    ret);\n\t\treturn;\n\t}\n\n\tath12k_qmi_driver_event_post(qmi, ATH12K_QMI_EVENT_REQUEST_MEM, NULL);\n}\n\nstatic void ath12k_qmi_msg_mem_ready_cb(struct qmi_handle *qmi_hdl,\n\t\t\t\t\tstruct sockaddr_qrtr *sq,\n\t\t\t\t\tstruct qmi_txn *txn,\n\t\t\t\t\tconst void *decoded)\n{\n\tstruct ath12k_qmi *qmi = container_of(qmi_hdl, struct ath12k_qmi, handle);\n\tstruct ath12k_base *ab = qmi->ab;\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi firmware memory ready indication\\n\");\n\tath12k_qmi_driver_event_post(qmi, ATH12K_QMI_EVENT_FW_MEM_READY, NULL);\n}\n\nstatic void ath12k_qmi_msg_fw_ready_cb(struct qmi_handle *qmi_hdl,\n\t\t\t\t       struct sockaddr_qrtr *sq,\n\t\t\t\t       struct qmi_txn *txn,\n\t\t\t\t       const void *decoded)\n{\n\tstruct ath12k_qmi *qmi = container_of(qmi_hdl, struct ath12k_qmi, handle);\n\tstruct ath12k_base *ab = qmi->ab;\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi firmware ready\\n\");\n\tath12k_qmi_driver_event_post(qmi, ATH12K_QMI_EVENT_FW_READY, NULL);\n}\n\nstatic const struct qmi_msg_handler ath12k_qmi_msg_handlers[] = {\n\t{\n\t\t.type = QMI_INDICATION,\n\t\t.msg_id = QMI_WLFW_REQUEST_MEM_IND_V01,\n\t\t.ei = qmi_wlanfw_request_mem_ind_msg_v01_ei,\n\t\t.decoded_size = sizeof(struct qmi_wlanfw_request_mem_ind_msg_v01),\n\t\t.fn = ath12k_qmi_msg_mem_request_cb,\n\t},\n\t{\n\t\t.type = QMI_INDICATION,\n\t\t.msg_id = QMI_WLFW_FW_MEM_READY_IND_V01,\n\t\t.ei = qmi_wlanfw_mem_ready_ind_msg_v01_ei,\n\t\t.decoded_size = sizeof(struct qmi_wlanfw_fw_mem_ready_ind_msg_v01),\n\t\t.fn = ath12k_qmi_msg_mem_ready_cb,\n\t},\n\t{\n\t\t.type = QMI_INDICATION,\n\t\t.msg_id = QMI_WLFW_FW_READY_IND_V01,\n\t\t.ei = qmi_wlanfw_fw_ready_ind_msg_v01_ei,\n\t\t.decoded_size = sizeof(struct qmi_wlanfw_fw_ready_ind_msg_v01),\n\t\t.fn = ath12k_qmi_msg_fw_ready_cb,\n\t},\n};\n\nstatic int ath12k_qmi_ops_new_server(struct qmi_handle *qmi_hdl,\n\t\t\t\t     struct qmi_service *service)\n{\n\tstruct ath12k_qmi *qmi = container_of(qmi_hdl, struct ath12k_qmi, handle);\n\tstruct ath12k_base *ab = qmi->ab;\n\tstruct sockaddr_qrtr *sq = &qmi->sq;\n\tint ret;\n\n\tsq->sq_family = AF_QIPCRTR;\n\tsq->sq_node = service->node;\n\tsq->sq_port = service->port;\n\n\tret = kernel_connect(qmi_hdl->sock, (struct sockaddr *)sq,\n\t\t\t     sizeof(*sq), 0);\n\tif (ret) {\n\t\tath12k_warn(ab, \"qmi failed to connect to remote service %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi wifi fw qmi service connected\\n\");\n\tath12k_qmi_driver_event_post(qmi, ATH12K_QMI_EVENT_SERVER_ARRIVE, NULL);\n\n\treturn ret;\n}\n\nstatic void ath12k_qmi_ops_del_server(struct qmi_handle *qmi_hdl,\n\t\t\t\t      struct qmi_service *service)\n{\n\tstruct ath12k_qmi *qmi = container_of(qmi_hdl, struct ath12k_qmi, handle);\n\tstruct ath12k_base *ab = qmi->ab;\n\n\tath12k_dbg(ab, ATH12K_DBG_QMI, \"qmi wifi fw del server\\n\");\n\tath12k_qmi_driver_event_post(qmi, ATH12K_QMI_EVENT_SERVER_EXIT, NULL);\n}\n\nstatic const struct qmi_ops ath12k_qmi_ops = {\n\t.new_server = ath12k_qmi_ops_new_server,\n\t.del_server = ath12k_qmi_ops_del_server,\n};\n\nstatic void ath12k_qmi_driver_event_work(struct work_struct *work)\n{\n\tstruct ath12k_qmi *qmi = container_of(work, struct ath12k_qmi,\n\t\t\t\t\t      event_work);\n\tstruct ath12k_qmi_driver_event *event;\n\tstruct ath12k_base *ab = qmi->ab;\n\tint ret;\n\n\tspin_lock(&qmi->event_lock);\n\twhile (!list_empty(&qmi->event_list)) {\n\t\tevent = list_first_entry(&qmi->event_list,\n\t\t\t\t\t struct ath12k_qmi_driver_event, list);\n\t\tlist_del(&event->list);\n\t\tspin_unlock(&qmi->event_lock);\n\n\t\tif (test_bit(ATH12K_FLAG_UNREGISTERING, &ab->dev_flags))\n\t\t\tgoto skip;\n\n\t\tswitch (event->type) {\n\t\tcase ATH12K_QMI_EVENT_SERVER_ARRIVE:\n\t\t\tret = ath12k_qmi_event_server_arrive(qmi);\n\t\t\tif (ret < 0)\n\t\t\t\tset_bit(ATH12K_FLAG_QMI_FAIL, &ab->dev_flags);\n\t\t\tbreak;\n\t\tcase ATH12K_QMI_EVENT_SERVER_EXIT:\n\t\t\tset_bit(ATH12K_FLAG_CRASH_FLUSH, &ab->dev_flags);\n\t\t\tset_bit(ATH12K_FLAG_RECOVERY, &ab->dev_flags);\n\t\t\tbreak;\n\t\tcase ATH12K_QMI_EVENT_REQUEST_MEM:\n\t\t\tret = ath12k_qmi_event_mem_request(qmi);\n\t\t\tif (ret < 0)\n\t\t\t\tset_bit(ATH12K_FLAG_QMI_FAIL, &ab->dev_flags);\n\t\t\tbreak;\n\t\tcase ATH12K_QMI_EVENT_FW_MEM_READY:\n\t\t\tret = ath12k_qmi_event_load_bdf(qmi);\n\t\t\tif (ret < 0)\n\t\t\t\tset_bit(ATH12K_FLAG_QMI_FAIL, &ab->dev_flags);\n\t\t\tbreak;\n\t\tcase ATH12K_QMI_EVENT_FW_READY:\n\t\t\tclear_bit(ATH12K_FLAG_QMI_FAIL, &ab->dev_flags);\n\t\t\tif (test_bit(ATH12K_FLAG_REGISTERED, &ab->dev_flags)) {\n\t\t\t\tath12k_hal_dump_srng_stats(ab);\n\t\t\t\tqueue_work(ab->workqueue, &ab->restart_work);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tclear_bit(ATH12K_FLAG_CRASH_FLUSH,\n\t\t\t\t  &ab->dev_flags);\n\t\t\tclear_bit(ATH12K_FLAG_RECOVERY, &ab->dev_flags);\n\t\t\tath12k_core_qmi_firmware_ready(ab);\n\t\t\tset_bit(ATH12K_FLAG_REGISTERED, &ab->dev_flags);\n\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tath12k_warn(ab, \"invalid event type: %d\", event->type);\n\t\t\tbreak;\n\t\t}\n\nskip:\n\t\tkfree(event);\n\t\tspin_lock(&qmi->event_lock);\n\t}\n\tspin_unlock(&qmi->event_lock);\n}\n\nint ath12k_qmi_init_service(struct ath12k_base *ab)\n{\n\tint ret;\n\n\tmemset(&ab->qmi.target, 0, sizeof(struct target_info));\n\tmemset(&ab->qmi.target_mem, 0, sizeof(struct target_mem_chunk));\n\tab->qmi.ab = ab;\n\n\tab->qmi.target_mem_mode = ATH12K_QMI_TARGET_MEM_MODE_DEFAULT;\n\tret = qmi_handle_init(&ab->qmi.handle, ATH12K_QMI_RESP_LEN_MAX,\n\t\t\t      &ath12k_qmi_ops, ath12k_qmi_msg_handlers);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"failed to initialize qmi handle\\n\");\n\t\treturn ret;\n\t}\n\n\tab->qmi.event_wq = alloc_ordered_workqueue(\"ath12k_qmi_driver_event\", 0);\n\tif (!ab->qmi.event_wq) {\n\t\tath12k_err(ab, \"failed to allocate workqueue\\n\");\n\t\treturn -EFAULT;\n\t}\n\n\tINIT_LIST_HEAD(&ab->qmi.event_list);\n\tspin_lock_init(&ab->qmi.event_lock);\n\tINIT_WORK(&ab->qmi.event_work, ath12k_qmi_driver_event_work);\n\n\tret = qmi_add_lookup(&ab->qmi.handle, ATH12K_QMI_WLFW_SERVICE_ID_V01,\n\t\t\t     ATH12K_QMI_WLFW_SERVICE_VERS_V01,\n\t\t\t     ab->qmi.service_ins_id);\n\tif (ret < 0) {\n\t\tath12k_warn(ab, \"failed to add qmi lookup\\n\");\n\t\tdestroy_workqueue(ab->qmi.event_wq);\n\t\treturn ret;\n\t}\n\n\treturn ret;\n}\n\nvoid ath12k_qmi_deinit_service(struct ath12k_base *ab)\n{\n\tqmi_handle_release(&ab->qmi.handle);\n\tcancel_work_sync(&ab->qmi.event_work);\n\tdestroy_workqueue(ab->qmi.event_wq);\n\tath12k_qmi_m3_free(ab);\n\tath12k_qmi_free_target_mem_chunk(ab);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}