{
  "module_name": "hw.c",
  "hash_id": "0fd074323e6137bd0da46878743ee2329ab71e028eb803b6474bce6043bb2c1d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath12k/hw.c",
  "human_readable_source": "\n \n\n#include <linux/types.h>\n#include <linux/bitops.h>\n#include <linux/bitfield.h>\n\n#include \"debug.h\"\n#include \"core.h\"\n#include \"ce.h\"\n#include \"hw.h\"\n#include \"mhi.h\"\n#include \"dp_rx.h\"\n\nstatic u8 ath12k_hw_qcn9274_mac_from_pdev_id(int pdev_idx)\n{\n\treturn pdev_idx;\n}\n\nstatic int ath12k_hw_mac_id_to_pdev_id_qcn9274(const struct ath12k_hw_params *hw,\n\t\t\t\t\t       int mac_id)\n{\n\treturn mac_id;\n}\n\nstatic int ath12k_hw_mac_id_to_srng_id_qcn9274(const struct ath12k_hw_params *hw,\n\t\t\t\t\t       int mac_id)\n{\n\treturn 0;\n}\n\nstatic u8 ath12k_hw_get_ring_selector_qcn9274(struct sk_buff *skb)\n{\n\treturn smp_processor_id();\n}\n\nstatic bool ath12k_dp_srng_is_comp_ring_qcn9274(int ring_num)\n{\n\tif (ring_num < 3 || ring_num == 4)\n\t\treturn true;\n\n\treturn false;\n}\n\nstatic int ath12k_hw_mac_id_to_pdev_id_wcn7850(const struct ath12k_hw_params *hw,\n\t\t\t\t\t       int mac_id)\n{\n\treturn 0;\n}\n\nstatic int ath12k_hw_mac_id_to_srng_id_wcn7850(const struct ath12k_hw_params *hw,\n\t\t\t\t\t       int mac_id)\n{\n\treturn mac_id;\n}\n\nstatic u8 ath12k_hw_get_ring_selector_wcn7850(struct sk_buff *skb)\n{\n\treturn skb_get_queue_mapping(skb);\n}\n\nstatic bool ath12k_dp_srng_is_comp_ring_wcn7850(int ring_num)\n{\n\tif (ring_num == 0 || ring_num == 2 || ring_num == 4)\n\t\treturn true;\n\n\treturn false;\n}\n\nstatic const struct ath12k_hw_ops qcn9274_ops = {\n\t.get_hw_mac_from_pdev_id = ath12k_hw_qcn9274_mac_from_pdev_id,\n\t.mac_id_to_pdev_id = ath12k_hw_mac_id_to_pdev_id_qcn9274,\n\t.mac_id_to_srng_id = ath12k_hw_mac_id_to_srng_id_qcn9274,\n\t.rxdma_ring_sel_config = ath12k_dp_rxdma_ring_sel_config_qcn9274,\n\t.get_ring_selector = ath12k_hw_get_ring_selector_qcn9274,\n\t.dp_srng_is_tx_comp_ring = ath12k_dp_srng_is_comp_ring_qcn9274,\n};\n\nstatic const struct ath12k_hw_ops wcn7850_ops = {\n\t.get_hw_mac_from_pdev_id = ath12k_hw_qcn9274_mac_from_pdev_id,\n\t.mac_id_to_pdev_id = ath12k_hw_mac_id_to_pdev_id_wcn7850,\n\t.mac_id_to_srng_id = ath12k_hw_mac_id_to_srng_id_wcn7850,\n\t.rxdma_ring_sel_config = ath12k_dp_rxdma_ring_sel_config_wcn7850,\n\t.get_ring_selector = ath12k_hw_get_ring_selector_wcn7850,\n\t.dp_srng_is_tx_comp_ring = ath12k_dp_srng_is_comp_ring_wcn7850,\n};\n\n#define ATH12K_TX_RING_MASK_0 0x1\n#define ATH12K_TX_RING_MASK_1 0x2\n#define ATH12K_TX_RING_MASK_2 0x4\n#define ATH12K_TX_RING_MASK_3 0x8\n#define ATH12K_TX_RING_MASK_4 0x10\n\n#define ATH12K_RX_RING_MASK_0 0x1\n#define ATH12K_RX_RING_MASK_1 0x2\n#define ATH12K_RX_RING_MASK_2 0x4\n#define ATH12K_RX_RING_MASK_3 0x8\n\n#define ATH12K_RX_ERR_RING_MASK_0 0x1\n\n#define ATH12K_RX_WBM_REL_RING_MASK_0 0x1\n\n#define ATH12K_REO_STATUS_RING_MASK_0 0x1\n\n#define ATH12K_HOST2RXDMA_RING_MASK_0 0x1\n\n#define ATH12K_RX_MON_RING_MASK_0 0x1\n#define ATH12K_RX_MON_RING_MASK_1 0x2\n#define ATH12K_RX_MON_RING_MASK_2 0x4\n\n#define ATH12K_TX_MON_RING_MASK_0 0x1\n#define ATH12K_TX_MON_RING_MASK_1 0x2\n\n \nstatic const struct ce_pipe_config ath12k_target_ce_config_wlan_qcn9274[] = {\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(0),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(1),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(2),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(3),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(4),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(256),\n\t\t.nbytes_max = __cpu_to_le32(256),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS | CE_ATTR_DIS_INTR),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(5),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(6),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_INOUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(16384),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(7),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(8),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_INOUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(16384),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(12),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(13),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(14),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n};\n\n \nstatic const struct ce_pipe_config ath12k_target_ce_config_wlan_wcn7850[] = {\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(0),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(1),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(2),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(3),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(4),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_OUT),\n\t\t.nentries = __cpu_to_le32(256),\n\t\t.nbytes_max = __cpu_to_le32(256),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS | CE_ATTR_DIS_INTR),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(5),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_IN),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(2048),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(6),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_INOUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(16384),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(7),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_INOUT_H2H),\n\t\t.nentries = __cpu_to_le32(0),\n\t\t.nbytes_max = __cpu_to_le32(0),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS | CE_ATTR_DIS_INTR),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\n\t \n\t{\n\t\t.pipenum = __cpu_to_le32(8),\n\t\t.pipedir = __cpu_to_le32(PIPEDIR_INOUT),\n\t\t.nentries = __cpu_to_le32(32),\n\t\t.nbytes_max = __cpu_to_le32(16384),\n\t\t.flags = __cpu_to_le32(CE_ATTR_FLAGS),\n\t\t.reserved = __cpu_to_le32(0),\n\t},\n\t \n};\n\n \nstatic const struct service_to_pipe ath12k_target_service_to_ce_map_wlan_qcn9274[] = {\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VO),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VO),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BK),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BK),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BE),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BE),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VI),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VI),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_RSVD_CTRL),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(0),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_RSVD_CTRL),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(1),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_TEST_RAW_STREAMS),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(0),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_TEST_RAW_STREAMS),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(1),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_HTT_DATA_MSG),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(4),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_HTT_DATA_MSG),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(1),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL_MAC1),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(7),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL_MAC1),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_PKT_LOG),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(5),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL_DIAG),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(14),\n\t},\n\n\t \n\n\t{  \n\t\t__cpu_to_le32(0),\n\t\t__cpu_to_le32(0),\n\t\t__cpu_to_le32(0),\n\t},\n};\n\nstatic const struct service_to_pipe ath12k_target_service_to_ce_map_wlan_wcn7850[] = {\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VO),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VO),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BK),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BK),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BE),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_BE),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VI),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_DATA_VI),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(3),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_WMI_CONTROL),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_RSVD_CTRL),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(0),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_RSVD_CTRL),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(2),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_HTT_DATA_MSG),\n\t\t__cpu_to_le32(PIPEDIR_OUT),\t \n\t\t__cpu_to_le32(4),\n\t},\n\t{\n\t\t__cpu_to_le32(ATH12K_HTC_SVC_ID_HTT_DATA_MSG),\n\t\t__cpu_to_le32(PIPEDIR_IN),\t \n\t\t__cpu_to_le32(1),\n\t},\n\n\t \n\n\t{  \n\t\t__cpu_to_le32(0),\n\t\t__cpu_to_le32(0),\n\t\t__cpu_to_le32(0),\n\t},\n};\n\nstatic const struct ath12k_hw_ring_mask ath12k_hw_ring_mask_qcn9274 = {\n\t.tx  = {\n\t\tATH12K_TX_RING_MASK_0,\n\t\tATH12K_TX_RING_MASK_1,\n\t\tATH12K_TX_RING_MASK_2,\n\t\tATH12K_TX_RING_MASK_3,\n\t},\n\t.rx_mon_dest = {\n\t\t0, 0, 0,\n\t\tATH12K_RX_MON_RING_MASK_0,\n\t\tATH12K_RX_MON_RING_MASK_1,\n\t\tATH12K_RX_MON_RING_MASK_2,\n\t},\n\t.rx = {\n\t\t0, 0, 0, 0,\n\t\tATH12K_RX_RING_MASK_0,\n\t\tATH12K_RX_RING_MASK_1,\n\t\tATH12K_RX_RING_MASK_2,\n\t\tATH12K_RX_RING_MASK_3,\n\t},\n\t.rx_err = {\n\t\t0, 0, 0,\n\t\tATH12K_RX_ERR_RING_MASK_0,\n\t},\n\t.rx_wbm_rel = {\n\t\t0, 0, 0,\n\t\tATH12K_RX_WBM_REL_RING_MASK_0,\n\t},\n\t.reo_status = {\n\t\t0, 0, 0,\n\t\tATH12K_REO_STATUS_RING_MASK_0,\n\t},\n\t.host2rxdma = {\n\t\t0, 0, 0,\n\t\tATH12K_HOST2RXDMA_RING_MASK_0,\n\t},\n\t.tx_mon_dest = {\n\t\tATH12K_TX_MON_RING_MASK_0,\n\t\tATH12K_TX_MON_RING_MASK_1,\n\t},\n};\n\nstatic const struct ath12k_hw_ring_mask ath12k_hw_ring_mask_wcn7850 = {\n\t.tx  = {\n\t\tATH12K_TX_RING_MASK_0,\n\t\tATH12K_TX_RING_MASK_2,\n\t\tATH12K_TX_RING_MASK_4,\n\t},\n\t.rx_mon_dest = {\n\t},\n\t.rx = {\n\t\t0, 0, 0,\n\t\tATH12K_RX_RING_MASK_0,\n\t\tATH12K_RX_RING_MASK_1,\n\t\tATH12K_RX_RING_MASK_2,\n\t\tATH12K_RX_RING_MASK_3,\n\t},\n\t.rx_err = {\n\t\tATH12K_RX_ERR_RING_MASK_0,\n\t},\n\t.rx_wbm_rel = {\n\t\tATH12K_RX_WBM_REL_RING_MASK_0,\n\t},\n\t.reo_status = {\n\t\tATH12K_REO_STATUS_RING_MASK_0,\n\t},\n\t.host2rxdma = {\n\t},\n\t.tx_mon_dest = {\n\t},\n};\n\nstatic const struct ath12k_hw_regs qcn9274_v1_regs = {\n\t \n\t.hal_tcl1_ring_id = 0x00000908,\n\t.hal_tcl1_ring_misc = 0x00000910,\n\t.hal_tcl1_ring_tp_addr_lsb = 0x0000091c,\n\t.hal_tcl1_ring_tp_addr_msb = 0x00000920,\n\t.hal_tcl1_ring_consumer_int_setup_ix0 = 0x00000930,\n\t.hal_tcl1_ring_consumer_int_setup_ix1 = 0x00000934,\n\t.hal_tcl1_ring_msi1_base_lsb = 0x00000948,\n\t.hal_tcl1_ring_msi1_base_msb = 0x0000094c,\n\t.hal_tcl1_ring_msi1_data = 0x00000950,\n\t.hal_tcl_ring_base_lsb = 0x00000b58,\n\n\t \n\t.hal_tcl_status_ring_base_lsb = 0x00000d38,\n\n\t.hal_wbm_idle_ring_base_lsb = 0x00000d0c,\n\t.hal_wbm_idle_ring_misc_addr = 0x00000d1c,\n\t.hal_wbm_r0_idle_list_cntl_addr = 0x00000210,\n\t.hal_wbm_r0_idle_list_size_addr = 0x00000214,\n\t.hal_wbm_scattered_ring_base_lsb = 0x00000220,\n\t.hal_wbm_scattered_ring_base_msb = 0x00000224,\n\t.hal_wbm_scattered_desc_head_info_ix0 = 0x00000230,\n\t.hal_wbm_scattered_desc_head_info_ix1 = 0x00000234,\n\t.hal_wbm_scattered_desc_tail_info_ix0 = 0x00000240,\n\t.hal_wbm_scattered_desc_tail_info_ix1 = 0x00000244,\n\t.hal_wbm_scattered_desc_ptr_hp_addr = 0x0000024c,\n\n\t.hal_wbm_sw_release_ring_base_lsb = 0x0000034c,\n\t.hal_wbm_sw1_release_ring_base_lsb = 0x000003c4,\n\t.hal_wbm0_release_ring_base_lsb = 0x00000dd8,\n\t.hal_wbm1_release_ring_base_lsb = 0x00000e50,\n\n\t \n\t.pcie_qserdes_sysclk_en_sel = 0x01e0c0a8,\n\t.pcie_pcs_osc_dtct_config_base = 0x01e0d45c,\n\n\t \n\t.hal_ppe_rel_ring_base = 0x0000043c,\n\n\t \n\t.hal_reo2_ring_base = 0x0000055c,\n\t.hal_reo1_misc_ctrl_addr = 0x00000b7c,\n\t.hal_reo1_sw_cookie_cfg0 = 0x00000050,\n\t.hal_reo1_sw_cookie_cfg1 = 0x00000054,\n\t.hal_reo1_qdesc_lut_base0 = 0x00000058,\n\t.hal_reo1_qdesc_lut_base1 = 0x0000005c,\n\t.hal_reo1_ring_base_lsb = 0x000004e4,\n\t.hal_reo1_ring_base_msb = 0x000004e8,\n\t.hal_reo1_ring_id = 0x000004ec,\n\t.hal_reo1_ring_misc = 0x000004f4,\n\t.hal_reo1_ring_hp_addr_lsb = 0x000004f8,\n\t.hal_reo1_ring_hp_addr_msb = 0x000004fc,\n\t.hal_reo1_ring_producer_int_setup = 0x00000508,\n\t.hal_reo1_ring_msi1_base_lsb = 0x0000052C,\n\t.hal_reo1_ring_msi1_base_msb = 0x00000530,\n\t.hal_reo1_ring_msi1_data = 0x00000534,\n\t.hal_reo1_aging_thres_ix0 = 0x00000b08,\n\t.hal_reo1_aging_thres_ix1 = 0x00000b0c,\n\t.hal_reo1_aging_thres_ix2 = 0x00000b10,\n\t.hal_reo1_aging_thres_ix3 = 0x00000b14,\n\n\t \n\t.hal_reo2_sw0_ring_base = 0x000008a4,\n\n\t \n\t.hal_sw2reo_ring_base = 0x00000304,\n\t.hal_sw2reo1_ring_base = 0x0000037c,\n\n\t \n\t.hal_reo_cmd_ring_base = 0x0000028c,\n\n\t \n\t.hal_reo_status_ring_base = 0x00000a84,\n};\n\nstatic const struct ath12k_hw_regs qcn9274_v2_regs = {\n\t \n\t.hal_tcl1_ring_id = 0x00000908,\n\t.hal_tcl1_ring_misc = 0x00000910,\n\t.hal_tcl1_ring_tp_addr_lsb = 0x0000091c,\n\t.hal_tcl1_ring_tp_addr_msb = 0x00000920,\n\t.hal_tcl1_ring_consumer_int_setup_ix0 = 0x00000930,\n\t.hal_tcl1_ring_consumer_int_setup_ix1 = 0x00000934,\n\t.hal_tcl1_ring_msi1_base_lsb = 0x00000948,\n\t.hal_tcl1_ring_msi1_base_msb = 0x0000094c,\n\t.hal_tcl1_ring_msi1_data = 0x00000950,\n\t.hal_tcl_ring_base_lsb = 0x00000b58,\n\n\t \n\t.hal_tcl_status_ring_base_lsb = 0x00000d38,\n\n\t \n\t.hal_wbm_idle_ring_base_lsb = 0x00000d3c,\n\t.hal_wbm_idle_ring_misc_addr = 0x00000d4c,\n\t.hal_wbm_r0_idle_list_cntl_addr = 0x00000240,\n\t.hal_wbm_r0_idle_list_size_addr = 0x00000244,\n\t.hal_wbm_scattered_ring_base_lsb = 0x00000250,\n\t.hal_wbm_scattered_ring_base_msb = 0x00000254,\n\t.hal_wbm_scattered_desc_head_info_ix0 = 0x00000260,\n\t.hal_wbm_scattered_desc_head_info_ix1 = 0x00000264,\n\t.hal_wbm_scattered_desc_tail_info_ix0 = 0x00000270,\n\t.hal_wbm_scattered_desc_tail_info_ix1 = 0x00000274,\n\t.hal_wbm_scattered_desc_ptr_hp_addr = 0x0000027c,\n\n\t \n\t.hal_wbm_sw_release_ring_base_lsb = 0x0000037c,\n\t.hal_wbm_sw1_release_ring_base_lsb = 0x000003f4,\n\n\t \n\t.hal_wbm0_release_ring_base_lsb = 0x00000e08,\n\t.hal_wbm1_release_ring_base_lsb = 0x00000e80,\n\n\t \n\t.pcie_qserdes_sysclk_en_sel = 0x01e0c0a8,\n\t.pcie_pcs_osc_dtct_config_base = 0x01e0d45c,\n\n\t \n\t.hal_ppe_rel_ring_base = 0x0000046c,\n\n\t \n\t.hal_reo2_ring_base = 0x00000578,\n\t.hal_reo1_misc_ctrl_addr = 0x00000b9c,\n\t.hal_reo1_sw_cookie_cfg0 = 0x0000006c,\n\t.hal_reo1_sw_cookie_cfg1 = 0x00000070,\n\t.hal_reo1_qdesc_lut_base0 = 0x00000074,\n\t.hal_reo1_qdesc_lut_base1 = 0x00000078,\n\t.hal_reo1_ring_base_lsb = 0x00000500,\n\t.hal_reo1_ring_base_msb = 0x00000504,\n\t.hal_reo1_ring_id = 0x00000508,\n\t.hal_reo1_ring_misc = 0x00000510,\n\t.hal_reo1_ring_hp_addr_lsb = 0x00000514,\n\t.hal_reo1_ring_hp_addr_msb = 0x00000518,\n\t.hal_reo1_ring_producer_int_setup = 0x00000524,\n\t.hal_reo1_ring_msi1_base_lsb = 0x00000548,\n\t.hal_reo1_ring_msi1_base_msb = 0x0000054C,\n\t.hal_reo1_ring_msi1_data = 0x00000550,\n\t.hal_reo1_aging_thres_ix0 = 0x00000B28,\n\t.hal_reo1_aging_thres_ix1 = 0x00000B2C,\n\t.hal_reo1_aging_thres_ix2 = 0x00000B30,\n\t.hal_reo1_aging_thres_ix3 = 0x00000B34,\n\n\t \n\t.hal_reo2_sw0_ring_base = 0x000008c0,\n\n\t \n\t.hal_sw2reo_ring_base = 0x00000320,\n\t.hal_sw2reo1_ring_base = 0x00000398,\n\n\t \n\t.hal_reo_cmd_ring_base = 0x000002A8,\n\n\t \n\t.hal_reo_status_ring_base = 0x00000aa0,\n};\n\nstatic const struct ath12k_hw_regs wcn7850_regs = {\n\t \n\t.hal_tcl1_ring_id = 0x00000908,\n\t.hal_tcl1_ring_misc = 0x00000910,\n\t.hal_tcl1_ring_tp_addr_lsb = 0x0000091c,\n\t.hal_tcl1_ring_tp_addr_msb = 0x00000920,\n\t.hal_tcl1_ring_consumer_int_setup_ix0 = 0x00000930,\n\t.hal_tcl1_ring_consumer_int_setup_ix1 = 0x00000934,\n\t.hal_tcl1_ring_msi1_base_lsb = 0x00000948,\n\t.hal_tcl1_ring_msi1_base_msb = 0x0000094c,\n\t.hal_tcl1_ring_msi1_data = 0x00000950,\n\t.hal_tcl_ring_base_lsb = 0x00000b58,\n\n\t \n\t.hal_tcl_status_ring_base_lsb = 0x00000d38,\n\n\t.hal_wbm_idle_ring_base_lsb = 0x00000d3c,\n\t.hal_wbm_idle_ring_misc_addr = 0x00000d4c,\n\t.hal_wbm_r0_idle_list_cntl_addr = 0x00000240,\n\t.hal_wbm_r0_idle_list_size_addr = 0x00000244,\n\t.hal_wbm_scattered_ring_base_lsb = 0x00000250,\n\t.hal_wbm_scattered_ring_base_msb = 0x00000254,\n\t.hal_wbm_scattered_desc_head_info_ix0 = 0x00000260,\n\t.hal_wbm_scattered_desc_head_info_ix1 = 0x00000264,\n\t.hal_wbm_scattered_desc_tail_info_ix0 = 0x00000270,\n\t.hal_wbm_scattered_desc_tail_info_ix1 = 0x00000274,\n\t.hal_wbm_scattered_desc_ptr_hp_addr = 0x00000027c,\n\n\t.hal_wbm_sw_release_ring_base_lsb = 0x0000037c,\n\t.hal_wbm_sw1_release_ring_base_lsb = 0x00000284,\n\t.hal_wbm0_release_ring_base_lsb = 0x00000e08,\n\t.hal_wbm1_release_ring_base_lsb = 0x00000e80,\n\n\t \n\t.pcie_qserdes_sysclk_en_sel = 0x01e0e0a8,\n\t.pcie_pcs_osc_dtct_config_base = 0x01e0f45c,\n\n\t \n\t.hal_ppe_rel_ring_base = 0x0000043c,\n\n\t \n\t.hal_reo2_ring_base = 0x0000055c,\n\t.hal_reo1_misc_ctrl_addr = 0x00000b7c,\n\t.hal_reo1_sw_cookie_cfg0 = 0x00000050,\n\t.hal_reo1_sw_cookie_cfg1 = 0x00000054,\n\t.hal_reo1_qdesc_lut_base0 = 0x00000058,\n\t.hal_reo1_qdesc_lut_base1 = 0x0000005c,\n\t.hal_reo1_ring_base_lsb = 0x000004e4,\n\t.hal_reo1_ring_base_msb = 0x000004e8,\n\t.hal_reo1_ring_id = 0x000004ec,\n\t.hal_reo1_ring_misc = 0x000004f4,\n\t.hal_reo1_ring_hp_addr_lsb = 0x000004f8,\n\t.hal_reo1_ring_hp_addr_msb = 0x000004fc,\n\t.hal_reo1_ring_producer_int_setup = 0x00000508,\n\t.hal_reo1_ring_msi1_base_lsb = 0x0000052C,\n\t.hal_reo1_ring_msi1_base_msb = 0x00000530,\n\t.hal_reo1_ring_msi1_data = 0x00000534,\n\t.hal_reo1_aging_thres_ix0 = 0x00000b08,\n\t.hal_reo1_aging_thres_ix1 = 0x00000b0c,\n\t.hal_reo1_aging_thres_ix2 = 0x00000b10,\n\t.hal_reo1_aging_thres_ix3 = 0x00000b14,\n\n\t \n\t.hal_reo2_sw0_ring_base = 0x000008a4,\n\n\t \n\t.hal_sw2reo_ring_base = 0x00000304,\n\t.hal_sw2reo1_ring_base = 0x0000037c,\n\n\t \n\t.hal_reo_cmd_ring_base = 0x0000028c,\n\n\t \n\t.hal_reo_status_ring_base = 0x00000a84,\n};\n\nstatic const struct ath12k_hw_hal_params ath12k_hw_hal_params_qcn9274 = {\n\t.rx_buf_rbm = HAL_RX_BUF_RBM_SW3_BM,\n\t.wbm2sw_cc_enable = HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW0_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW1_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW2_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW3_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW4_EN,\n};\n\nstatic const struct ath12k_hw_hal_params ath12k_hw_hal_params_wcn7850 = {\n\t.rx_buf_rbm = HAL_RX_BUF_RBM_SW1_BM,\n\t.wbm2sw_cc_enable = HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW0_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW2_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW3_EN |\n\t\t\t    HAL_WBM_SW_COOKIE_CONV_CFG_WBM2SW4_EN,\n};\n\nstatic const struct ath12k_hw_params ath12k_hw_params[] = {\n\t{\n\t\t.name = \"qcn9274 hw1.0\",\n\t\t.hw_rev = ATH12K_HW_QCN9274_HW10,\n\t\t.fw = {\n\t\t\t.dir = \"QCN9274/hw1.0\",\n\t\t\t.board_size = 256 * 1024,\n\t\t\t.cal_offset = 128 * 1024,\n\t\t},\n\t\t.max_radios = 1,\n\t\t.single_pdev_only = false,\n\t\t.qmi_service_ins_id = ATH12K_QMI_WLFW_SERVICE_INS_ID_V01_QCN9274,\n\t\t.internal_sleep_clock = false,\n\n\t\t.hw_ops = &qcn9274_ops,\n\t\t.ring_mask = &ath12k_hw_ring_mask_qcn9274,\n\t\t.regs = &qcn9274_v1_regs,\n\n\t\t.host_ce_config = ath12k_host_ce_config_qcn9274,\n\t\t.ce_count = 16,\n\t\t.target_ce_config = ath12k_target_ce_config_wlan_qcn9274,\n\t\t.target_ce_count = 12,\n\t\t.svc_to_ce_map = ath12k_target_service_to_ce_map_wlan_qcn9274,\n\t\t.svc_to_ce_map_len = 18,\n\n\t\t.hal_params = &ath12k_hw_hal_params_qcn9274,\n\n\t\t.rxdma1_enable = false,\n\t\t.num_rxmda_per_pdev = 1,\n\t\t.num_rxdma_dst_ring = 0,\n\t\t.rx_mac_buf_ring = false,\n\t\t.vdev_start_delay = false,\n\n\t\t.interface_modes = BIT(NL80211_IFTYPE_STATION) |\n\t\t\t\t\tBIT(NL80211_IFTYPE_AP),\n\t\t.supports_monitor = false,\n\n\t\t.idle_ps = false,\n\t\t.download_calib = true,\n\t\t.supports_suspend = false,\n\t\t.tcl_ring_retry = true,\n\t\t.reoq_lut_support = false,\n\t\t.supports_shadow_regs = false,\n\n\t\t.hal_desc_sz = sizeof(struct hal_rx_desc_qcn9274),\n\t\t.num_tcl_banks = 48,\n\t\t.max_tx_ring = 4,\n\n\t\t.mhi_config = &ath12k_mhi_config_qcn9274,\n\n\t\t.wmi_init = ath12k_wmi_init_qcn9274,\n\n\t\t.hal_ops = &hal_qcn9274_ops,\n\n\t\t.qmi_cnss_feature_bitmap = BIT(CNSS_QDSS_CFG_MISS_V01),\n\t},\n\t{\n\t\t.name = \"wcn7850 hw2.0\",\n\t\t.hw_rev = ATH12K_HW_WCN7850_HW20,\n\n\t\t.fw = {\n\t\t\t.dir = \"WCN7850/hw2.0\",\n\t\t\t.board_size = 256 * 1024,\n\t\t\t.cal_offset = 256 * 1024,\n\t\t},\n\n\t\t.max_radios = 1,\n\t\t.single_pdev_only = true,\n\t\t.qmi_service_ins_id = ATH12K_QMI_WLFW_SERVICE_INS_ID_V01_WCN7850,\n\t\t.internal_sleep_clock = true,\n\n\t\t.hw_ops = &wcn7850_ops,\n\t\t.ring_mask = &ath12k_hw_ring_mask_wcn7850,\n\t\t.regs = &wcn7850_regs,\n\n\t\t.host_ce_config = ath12k_host_ce_config_wcn7850,\n\t\t.ce_count = 9,\n\t\t.target_ce_config = ath12k_target_ce_config_wlan_wcn7850,\n\t\t.target_ce_count = 9,\n\t\t.svc_to_ce_map = ath12k_target_service_to_ce_map_wlan_wcn7850,\n\t\t.svc_to_ce_map_len = 14,\n\n\t\t.hal_params = &ath12k_hw_hal_params_wcn7850,\n\n\t\t.rxdma1_enable = false,\n\t\t.num_rxmda_per_pdev = 2,\n\t\t.num_rxdma_dst_ring = 1,\n\t\t.rx_mac_buf_ring = true,\n\t\t.vdev_start_delay = true,\n\n\t\t.interface_modes = BIT(NL80211_IFTYPE_STATION),\n\t\t.supports_monitor = false,\n\n\t\t.idle_ps = true,\n\t\t.download_calib = false,\n\t\t.supports_suspend = false,\n\t\t.tcl_ring_retry = false,\n\t\t.reoq_lut_support = false,\n\t\t.supports_shadow_regs = true,\n\n\t\t.hal_desc_sz = sizeof(struct hal_rx_desc_wcn7850),\n\t\t.num_tcl_banks = 7,\n\t\t.max_tx_ring = 3,\n\n\t\t.mhi_config = &ath12k_mhi_config_wcn7850,\n\n\t\t.wmi_init = ath12k_wmi_init_wcn7850,\n\n\t\t.hal_ops = &hal_wcn7850_ops,\n\n\t\t.qmi_cnss_feature_bitmap = BIT(CNSS_QDSS_CFG_MISS_V01) |\n\t\t\t\t\t   BIT(CNSS_PCIE_PERST_NO_PULL_V01),\n\t},\n\t{\n\t\t.name = \"qcn9274 hw2.0\",\n\t\t.hw_rev = ATH12K_HW_QCN9274_HW20,\n\t\t.fw = {\n\t\t\t.dir = \"QCN9274/hw2.0\",\n\t\t\t.board_size = 256 * 1024,\n\t\t\t.cal_offset = 128 * 1024,\n\t\t},\n\t\t.max_radios = 1,\n\t\t.single_pdev_only = false,\n\t\t.qmi_service_ins_id = ATH12K_QMI_WLFW_SERVICE_INS_ID_V01_QCN9274,\n\t\t.internal_sleep_clock = false,\n\n\t\t.hw_ops = &qcn9274_ops,\n\t\t.ring_mask = &ath12k_hw_ring_mask_qcn9274,\n\t\t.regs = &qcn9274_v2_regs,\n\n\t\t.host_ce_config = ath12k_host_ce_config_qcn9274,\n\t\t.ce_count = 16,\n\t\t.target_ce_config = ath12k_target_ce_config_wlan_qcn9274,\n\t\t.target_ce_count = 12,\n\t\t.svc_to_ce_map = ath12k_target_service_to_ce_map_wlan_qcn9274,\n\t\t.svc_to_ce_map_len = 18,\n\n\t\t.hal_params = &ath12k_hw_hal_params_qcn9274,\n\n\t\t.rxdma1_enable = false,\n\t\t.num_rxmda_per_pdev = 1,\n\t\t.num_rxdma_dst_ring = 0,\n\t\t.rx_mac_buf_ring = false,\n\t\t.vdev_start_delay = false,\n\n\t\t.interface_modes = BIT(NL80211_IFTYPE_STATION) |\n\t\t\t\t\tBIT(NL80211_IFTYPE_AP),\n\t\t.supports_monitor = false,\n\n\t\t.idle_ps = false,\n\t\t.download_calib = true,\n\t\t.supports_suspend = false,\n\t\t.tcl_ring_retry = true,\n\t\t.reoq_lut_support = false,\n\t\t.supports_shadow_regs = false,\n\n\t\t.hal_desc_sz = sizeof(struct hal_rx_desc_qcn9274),\n\t\t.num_tcl_banks = 48,\n\t\t.max_tx_ring = 4,\n\n\t\t.mhi_config = &ath12k_mhi_config_qcn9274,\n\n\t\t.wmi_init = ath12k_wmi_init_qcn9274,\n\n\t\t.hal_ops = &hal_qcn9274_ops,\n\n\t\t.qmi_cnss_feature_bitmap = BIT(CNSS_QDSS_CFG_MISS_V01),\n\t},\n};\n\nint ath12k_hw_init(struct ath12k_base *ab)\n{\n\tconst struct ath12k_hw_params *hw_params = NULL;\n\tint i;\n\n\tfor (i = 0; i < ARRAY_SIZE(ath12k_hw_params); i++) {\n\t\thw_params = &ath12k_hw_params[i];\n\n\t\tif (hw_params->hw_rev == ab->hw_rev)\n\t\t\tbreak;\n\t}\n\n\tif (i == ARRAY_SIZE(ath12k_hw_params)) {\n\t\tath12k_err(ab, \"Unsupported hardware version: 0x%x\\n\", ab->hw_rev);\n\t\treturn -EINVAL;\n\t}\n\n\tab->hw_params = hw_params;\n\n\tath12k_info(ab, \"Hardware name: %s\\n\", ab->hw_params->name);\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}