{
  "module_name": "dbring.h",
  "hash_id": "f70c5d546e738a9fa356659c896bd2fdcbe0759fc3013a341680bf3d02a0c7f9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath12k/dbring.h",
  "human_readable_source": " \n \n\n#ifndef ATH12K_DBRING_H\n#define ATH12K_DBRING_H\n\n#include <linux/types.h>\n#include <linux/idr.h>\n#include <linux/spinlock.h>\n#include \"dp.h\"\n\nstruct ath12k_dbring_element {\n\tdma_addr_t paddr;\n\tu8 payload[];\n};\n\nstruct ath12k_dbring_data {\n\tvoid *data;\n\tu32 data_sz;\n\tstruct ath12k_wmi_dma_buf_release_meta_data_params meta;\n};\n\nstruct ath12k_dbring_buf_release_event {\n\tstruct ath12k_wmi_dma_buf_release_fixed_params fixed;\n\tconst struct ath12k_wmi_dma_buf_release_entry_params *buf_entry;\n\tconst struct ath12k_wmi_dma_buf_release_meta_data_params *meta_data;\n\tu32 num_buf_entry;\n\tu32 num_meta;\n};\n\nstruct ath12k_dbring_cap {\n\tu32 pdev_id;\n\tenum wmi_direct_buffer_module id;\n\tu32 min_elem;\n\tu32 min_buf_sz;\n\tu32 min_buf_align;\n};\n\nstruct ath12k_dbring {\n\tstruct dp_srng refill_srng;\n\tstruct idr bufs_idr;\n\t \n\tspinlock_t idr_lock;\n\tdma_addr_t tp_addr;\n\tdma_addr_t hp_addr;\n\tint bufs_max;\n\tu32 pdev_id;\n\tu32 buf_sz;\n\tu32 buf_align;\n\tu32 num_resp_per_event;\n\tu32 event_timeout_ms;\n\tint (*handler)(struct ath12k *ar, struct ath12k_dbring_data *data);\n};\n\nint ath12k_dbring_set_cfg(struct ath12k *ar,\n\t\t\t  struct ath12k_dbring *ring,\n\t\t\t  u32 num_resp_per_event,\n\t\t\t  u32 event_timeout_ms,\n\t\t\t  int (*handler)(struct ath12k *,\n\t\t\t\t\t struct ath12k_dbring_data *));\nint ath12k_dbring_wmi_cfg_setup(struct ath12k *ar,\n\t\t\t\tstruct ath12k_dbring *ring,\n\t\t\t\tenum wmi_direct_buffer_module id);\nint ath12k_dbring_buf_setup(struct ath12k *ar,\n\t\t\t    struct ath12k_dbring *ring,\n\t\t\t    struct ath12k_dbring_cap *db_cap);\nint ath12k_dbring_srng_setup(struct ath12k *ar, struct ath12k_dbring *ring,\n\t\t\t     int ring_num, int num_entries);\nint ath12k_dbring_buffer_release_event(struct ath12k_base *ab,\n\t\t\t\t       struct ath12k_dbring_buf_release_event *ev);\nint ath12k_dbring_get_cap(struct ath12k_base *ab,\n\t\t\t  u8 pdev_idx,\n\t\t\t  enum wmi_direct_buffer_module id,\n\t\t\t  struct ath12k_dbring_cap *db_cap);\nvoid ath12k_dbring_srng_cleanup(struct ath12k *ar, struct ath12k_dbring *ring);\nvoid ath12k_dbring_buf_cleanup(struct ath12k *ar, struct ath12k_dbring *ring);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}