{
  "module_name": "hw.h",
  "hash_id": "b009a75e87206c7f45b63d27f14d24f96d9f1bce048ec086ab04f51dad3a8215",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath12k/hw.h",
  "human_readable_source": " \n \n\n#ifndef ATH12K_HW_H\n#define ATH12K_HW_H\n\n#include <linux/mhi.h>\n\n#include \"wmi.h\"\n#include \"hal.h\"\n\n \n\n \n#define TARGET_NUM_VDEVS\t(16 + 1)\n\n#define TARGET_NUM_PEERS_PDEV\t(512 + TARGET_NUM_VDEVS)\n\n \n#define TARGET_NUM_PEERS_SINGLE\t\t(TARGET_NUM_PEERS_PDEV)\n\n \n#define TARGET_NUM_PEERS_DBS\t\t(2 * TARGET_NUM_PEERS_PDEV)\n\n \n#define TARGET_NUM_PEERS_DBS_SBS\t(3 * TARGET_NUM_PEERS_PDEV)\n\n \n#define TARGET_NUM_STATIONS\t512\n\n#define TARGET_NUM_PEERS(x)\tTARGET_NUM_PEERS_##x\n#define TARGET_NUM_PEER_KEYS\t2\n#define TARGET_NUM_TIDS(x)\t(2 * TARGET_NUM_PEERS(x) + \\\n\t\t\t\t 4 * TARGET_NUM_VDEVS + 8)\n\n#define TARGET_AST_SKID_LIMIT\t16\n#define TARGET_NUM_OFFLD_PEERS\t4\n#define TARGET_NUM_OFFLD_REORDER_BUFFS 4\n\n#define TARGET_TX_CHAIN_MASK\t(BIT(0) | BIT(1) | BIT(2) | BIT(4))\n#define TARGET_RX_CHAIN_MASK\t(BIT(0) | BIT(1) | BIT(2) | BIT(4))\n#define TARGET_RX_TIMEOUT_LO_PRI\t100\n#define TARGET_RX_TIMEOUT_HI_PRI\t40\n\n#define TARGET_DECAP_MODE_RAW\t\t0\n#define TARGET_DECAP_MODE_NATIVE_WIFI\t1\n#define TARGET_DECAP_MODE_ETH\t\t2\n\n#define TARGET_SCAN_MAX_PENDING_REQS\t4\n#define TARGET_BMISS_OFFLOAD_MAX_VDEV\t3\n#define TARGET_ROAM_OFFLOAD_MAX_VDEV\t3\n#define TARGET_ROAM_OFFLOAD_MAX_AP_PROFILES\t8\n#define TARGET_GTK_OFFLOAD_MAX_VDEV\t3\n#define TARGET_NUM_MCAST_GROUPS\t\t12\n#define TARGET_NUM_MCAST_TABLE_ELEMS\t64\n#define TARGET_MCAST2UCAST_MODE\t\t2\n#define TARGET_TX_DBG_LOG_SIZE\t\t1024\n#define TARGET_RX_SKIP_DEFRAG_TIMEOUT_DUP_DETECTION_CHECK 1\n#define TARGET_VOW_CONFIG\t\t0\n#define TARGET_NUM_MSDU_DESC\t\t(2500)\n#define TARGET_MAX_FRAG_ENTRIES\t\t6\n#define TARGET_MAX_BCN_OFFLD\t\t16\n#define TARGET_NUM_WDS_ENTRIES\t\t32\n#define TARGET_DMA_BURST_SIZE\t\t1\n#define TARGET_RX_BATCHMODE\t\t1\n\n#define ATH12K_HW_MAX_QUEUES\t\t4\n#define ATH12K_QUEUE_LEN\t\t4096\n\n#define ATH12K_HW_RATECODE_CCK_SHORT_PREAM_MASK  0x4\n\n#define ATH12K_FW_DIR\t\t\t\"ath12k\"\n\n#define ATH12K_BOARD_MAGIC\t\t\"QCA-ATH12K-BOARD\"\n#define ATH12K_BOARD_API2_FILE\t\t\"board-2.bin\"\n#define ATH12K_DEFAULT_BOARD_FILE\t\"board.bin\"\n#define ATH12K_DEFAULT_CAL_FILE\t\t\"caldata.bin\"\n#define ATH12K_AMSS_FILE\t\t\"amss.bin\"\n#define ATH12K_M3_FILE\t\t\t\"m3.bin\"\n#define ATH12K_REGDB_FILE_NAME\t\t\"regdb.bin\"\n\nenum ath12k_hw_rate_cck {\n\tATH12K_HW_RATE_CCK_LP_11M = 0,\n\tATH12K_HW_RATE_CCK_LP_5_5M,\n\tATH12K_HW_RATE_CCK_LP_2M,\n\tATH12K_HW_RATE_CCK_LP_1M,\n\tATH12K_HW_RATE_CCK_SP_11M,\n\tATH12K_HW_RATE_CCK_SP_5_5M,\n\tATH12K_HW_RATE_CCK_SP_2M,\n};\n\nenum ath12k_hw_rate_ofdm {\n\tATH12K_HW_RATE_OFDM_48M = 0,\n\tATH12K_HW_RATE_OFDM_24M,\n\tATH12K_HW_RATE_OFDM_12M,\n\tATH12K_HW_RATE_OFDM_6M,\n\tATH12K_HW_RATE_OFDM_54M,\n\tATH12K_HW_RATE_OFDM_36M,\n\tATH12K_HW_RATE_OFDM_18M,\n\tATH12K_HW_RATE_OFDM_9M,\n};\n\nenum ath12k_bus {\n\tATH12K_BUS_PCI,\n};\n\n#define ATH12K_EXT_IRQ_GRP_NUM_MAX 11\n\nstruct hal_rx_desc;\nstruct hal_tcl_data_cmd;\nstruct htt_rx_ring_tlv_filter;\nenum hal_encrypt_type;\n\nstruct ath12k_hw_ring_mask {\n\tu8 tx[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_mon_dest[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_err[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_wbm_rel[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 reo_status[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 host2rxdma[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 tx_mon_dest[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n};\n\nstruct ath12k_hw_hal_params {\n\tenum hal_rx_buf_return_buf_manager rx_buf_rbm;\n\tu32\t  wbm2sw_cc_enable;\n};\n\nstruct ath12k_hw_params {\n\tconst char *name;\n\tu16 hw_rev;\n\n\tstruct {\n\t\tconst char *dir;\n\t\tsize_t board_size;\n\t\tsize_t cal_offset;\n\t} fw;\n\n\tu8 max_radios;\n\tbool single_pdev_only:1;\n\tu32 qmi_service_ins_id;\n\tbool internal_sleep_clock:1;\n\n\tconst struct ath12k_hw_ops *hw_ops;\n\tconst struct ath12k_hw_ring_mask *ring_mask;\n\tconst struct ath12k_hw_regs *regs;\n\n\tconst struct ce_attr *host_ce_config;\n\tu32 ce_count;\n\tconst struct ce_pipe_config *target_ce_config;\n\tu32 target_ce_count;\n\tconst struct service_to_pipe *svc_to_ce_map;\n\tu32 svc_to_ce_map_len;\n\n\tconst struct ath12k_hw_hal_params *hal_params;\n\n\tbool rxdma1_enable:1;\n\tint num_rxmda_per_pdev;\n\tint num_rxdma_dst_ring;\n\tbool rx_mac_buf_ring:1;\n\tbool vdev_start_delay:1;\n\n\tu16 interface_modes;\n\tbool supports_monitor:1;\n\n\tbool idle_ps:1;\n\tbool download_calib:1;\n\tbool supports_suspend:1;\n\tbool tcl_ring_retry:1;\n\tbool reoq_lut_support:1;\n\tbool supports_shadow_regs:1;\n\n\tu32 hal_desc_sz;\n\tu32 num_tcl_banks;\n\tu32 max_tx_ring;\n\n\tconst struct mhi_controller_config *mhi_config;\n\n\tvoid (*wmi_init)(struct ath12k_base *ab,\n\t\t\t struct ath12k_wmi_resource_config_arg *config);\n\n\tconst struct hal_ops *hal_ops;\n\n\tu64 qmi_cnss_feature_bitmap;\n};\n\nstruct ath12k_hw_ops {\n\tu8 (*get_hw_mac_from_pdev_id)(int pdev_id);\n\tint (*mac_id_to_pdev_id)(const struct ath12k_hw_params *hw, int mac_id);\n\tint (*mac_id_to_srng_id)(const struct ath12k_hw_params *hw, int mac_id);\n\tint (*rxdma_ring_sel_config)(struct ath12k_base *ab);\n\tu8 (*get_ring_selector)(struct sk_buff *skb);\n\tbool (*dp_srng_is_tx_comp_ring)(int ring_num);\n};\n\nstatic inline\nint ath12k_hw_get_mac_from_pdev_id(const struct ath12k_hw_params *hw,\n\t\t\t\t   int pdev_idx)\n{\n\tif (hw->hw_ops->get_hw_mac_from_pdev_id)\n\t\treturn hw->hw_ops->get_hw_mac_from_pdev_id(pdev_idx);\n\n\treturn 0;\n}\n\nstatic inline int ath12k_hw_mac_id_to_pdev_id(const struct ath12k_hw_params *hw,\n\t\t\t\t\t      int mac_id)\n{\n\tif (hw->hw_ops->mac_id_to_pdev_id)\n\t\treturn hw->hw_ops->mac_id_to_pdev_id(hw, mac_id);\n\n\treturn 0;\n}\n\nstatic inline int ath12k_hw_mac_id_to_srng_id(const struct ath12k_hw_params *hw,\n\t\t\t\t\t      int mac_id)\n{\n\tif (hw->hw_ops->mac_id_to_srng_id)\n\t\treturn hw->hw_ops->mac_id_to_srng_id(hw, mac_id);\n\n\treturn 0;\n}\n\nstruct ath12k_fw_ie {\n\t__le32 id;\n\t__le32 len;\n\tu8 data[];\n};\n\nenum ath12k_bd_ie_board_type {\n\tATH12K_BD_IE_BOARD_NAME = 0,\n\tATH12K_BD_IE_BOARD_DATA = 1,\n};\n\nenum ath12k_bd_ie_type {\n\t \n\tATH12K_BD_IE_BOARD = 0,\n\tATH12K_BD_IE_BOARD_EXT = 1,\n};\n\nstruct ath12k_hw_regs {\n\tu32 hal_tcl1_ring_id;\n\tu32 hal_tcl1_ring_misc;\n\tu32 hal_tcl1_ring_tp_addr_lsb;\n\tu32 hal_tcl1_ring_tp_addr_msb;\n\tu32 hal_tcl1_ring_consumer_int_setup_ix0;\n\tu32 hal_tcl1_ring_consumer_int_setup_ix1;\n\tu32 hal_tcl1_ring_msi1_base_lsb;\n\tu32 hal_tcl1_ring_msi1_base_msb;\n\tu32 hal_tcl1_ring_msi1_data;\n\tu32 hal_tcl_ring_base_lsb;\n\n\tu32 hal_tcl_status_ring_base_lsb;\n\n\tu32 hal_wbm_idle_ring_base_lsb;\n\tu32 hal_wbm_idle_ring_misc_addr;\n\tu32 hal_wbm_r0_idle_list_cntl_addr;\n\tu32 hal_wbm_r0_idle_list_size_addr;\n\tu32 hal_wbm_scattered_ring_base_lsb;\n\tu32 hal_wbm_scattered_ring_base_msb;\n\tu32 hal_wbm_scattered_desc_head_info_ix0;\n\tu32 hal_wbm_scattered_desc_head_info_ix1;\n\tu32 hal_wbm_scattered_desc_tail_info_ix0;\n\tu32 hal_wbm_scattered_desc_tail_info_ix1;\n\tu32 hal_wbm_scattered_desc_ptr_hp_addr;\n\n\tu32 hal_wbm_sw_release_ring_base_lsb;\n\tu32 hal_wbm_sw1_release_ring_base_lsb;\n\tu32 hal_wbm0_release_ring_base_lsb;\n\tu32 hal_wbm1_release_ring_base_lsb;\n\n\tu32 pcie_qserdes_sysclk_en_sel;\n\tu32 pcie_pcs_osc_dtct_config_base;\n\n\tu32 hal_ppe_rel_ring_base;\n\n\tu32 hal_reo2_ring_base;\n\tu32 hal_reo1_misc_ctrl_addr;\n\tu32 hal_reo1_sw_cookie_cfg0;\n\tu32 hal_reo1_sw_cookie_cfg1;\n\tu32 hal_reo1_qdesc_lut_base0;\n\tu32 hal_reo1_qdesc_lut_base1;\n\tu32 hal_reo1_ring_base_lsb;\n\tu32 hal_reo1_ring_base_msb;\n\tu32 hal_reo1_ring_id;\n\tu32 hal_reo1_ring_misc;\n\tu32 hal_reo1_ring_hp_addr_lsb;\n\tu32 hal_reo1_ring_hp_addr_msb;\n\tu32 hal_reo1_ring_producer_int_setup;\n\tu32 hal_reo1_ring_msi1_base_lsb;\n\tu32 hal_reo1_ring_msi1_base_msb;\n\tu32 hal_reo1_ring_msi1_data;\n\tu32 hal_reo1_aging_thres_ix0;\n\tu32 hal_reo1_aging_thres_ix1;\n\tu32 hal_reo1_aging_thres_ix2;\n\tu32 hal_reo1_aging_thres_ix3;\n\n\tu32 hal_reo2_sw0_ring_base;\n\n\tu32 hal_sw2reo_ring_base;\n\tu32 hal_sw2reo1_ring_base;\n\n\tu32 hal_reo_cmd_ring_base;\n\n\tu32 hal_reo_status_ring_base;\n};\n\nint ath12k_hw_init(struct ath12k_base *ab);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}