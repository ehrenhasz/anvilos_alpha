{
  "module_name": "core.h",
  "hash_id": "47e08210718d64dc47d85a3e62afaf6a78de5578afae13a0eba088b28e2d7fc1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath12k/core.h",
  "human_readable_source": " \n \n\n#ifndef ATH12K_CORE_H\n#define ATH12K_CORE_H\n\n#include <linux/types.h>\n#include <linux/interrupt.h>\n#include <linux/irq.h>\n#include <linux/bitfield.h>\n#include \"qmi.h\"\n#include \"htc.h\"\n#include \"wmi.h\"\n#include \"hal.h\"\n#include \"dp.h\"\n#include \"ce.h\"\n#include \"mac.h\"\n#include \"hw.h\"\n#include \"hal_rx.h\"\n#include \"reg.h\"\n#include \"dbring.h\"\n\n#define SM(_v, _f) (((_v) << _f##_LSB) & _f##_MASK)\n\n#define ATH12K_TX_MGMT_NUM_PENDING_MAX\t512\n\n#define ATH12K_TX_MGMT_TARGET_MAX_SUPPORT_WMI 64\n\n \n#define ATH12K_PRB_RSP_DROP_THRESHOLD ((ATH12K_TX_MGMT_TARGET_MAX_SUPPORT_WMI * 3) / 4)\n\n#define ATH12K_INVALID_HW_MAC_ID\t0xFF\n#define\tATH12K_RX_RATE_TABLE_NUM\t320\n#define\tATH12K_RX_RATE_TABLE_11AX_NUM\t576\n\n#define ATH12K_MON_TIMER_INTERVAL  10\n#define ATH12K_RESET_TIMEOUT_HZ\t\t\t(20 * HZ)\n#define ATH12K_RESET_MAX_FAIL_COUNT_FIRST\t3\n#define ATH12K_RESET_MAX_FAIL_COUNT_FINAL\t5\n#define ATH12K_RESET_FAIL_TIMEOUT_HZ\t\t(20 * HZ)\n#define ATH12K_RECONFIGURE_TIMEOUT_HZ\t\t(10 * HZ)\n#define ATH12K_RECOVER_START_TIMEOUT_HZ\t\t(20 * HZ)\n\nenum wme_ac {\n\tWME_AC_BE,\n\tWME_AC_BK,\n\tWME_AC_VI,\n\tWME_AC_VO,\n\tWME_NUM_AC\n};\n\n#define ATH12K_HT_MCS_MAX\t7\n#define ATH12K_VHT_MCS_MAX\t9\n#define ATH12K_HE_MCS_MAX\t11\n\nenum ath12k_crypt_mode {\n\t \n\tATH12K_CRYPT_MODE_HW,\n\t \n\tATH12K_CRYPT_MODE_SW,\n};\n\nstatic inline enum wme_ac ath12k_tid_to_ac(u32 tid)\n{\n\treturn (((tid == 0) || (tid == 3)) ? WME_AC_BE :\n\t\t((tid == 1) || (tid == 2)) ? WME_AC_BK :\n\t\t((tid == 4) || (tid == 5)) ? WME_AC_VI :\n\t\tWME_AC_VO);\n}\n\nenum ath12k_skb_flags {\n\tATH12K_SKB_HW_80211_ENCAP = BIT(0),\n\tATH12K_SKB_CIPHER_SET = BIT(1),\n};\n\nstruct ath12k_skb_cb {\n\tdma_addr_t paddr;\n\tstruct ath12k *ar;\n\tstruct ieee80211_vif *vif;\n\tdma_addr_t paddr_ext_desc;\n\tu32 cipher;\n\tu8 flags;\n};\n\nstruct ath12k_skb_rxcb {\n\tdma_addr_t paddr;\n\tbool is_first_msdu;\n\tbool is_last_msdu;\n\tbool is_continuation;\n\tbool is_mcbc;\n\tbool is_eapol;\n\tstruct hal_rx_desc *rx_desc;\n\tu8 err_rel_src;\n\tu8 err_code;\n\tu8 mac_id;\n\tu8 unmapped;\n\tu8 is_frag;\n\tu8 tid;\n\tu16 peer_id;\n};\n\nenum ath12k_hw_rev {\n\tATH12K_HW_QCN9274_HW10,\n\tATH12K_HW_QCN9274_HW20,\n\tATH12K_HW_WCN7850_HW20\n};\n\nenum ath12k_firmware_mode {\n\t \n\tATH12K_FIRMWARE_MODE_NORMAL,\n\n\t \n\tATH12K_FIRMWARE_MODE_FTM,\n};\n\n#define ATH12K_IRQ_NUM_MAX 57\n#define ATH12K_EXT_IRQ_NUM_MAX\t16\n\nstruct ath12k_ext_irq_grp {\n\tstruct ath12k_base *ab;\n\tu32 irqs[ATH12K_EXT_IRQ_NUM_MAX];\n\tu32 num_irq;\n\tu32 grp_id;\n\tu64 timestamp;\n\tstruct napi_struct napi;\n\tstruct net_device napi_ndev;\n};\n\n#define HEHANDLE_CAP_PHYINFO_SIZE       3\n#define HECAP_PHYINFO_SIZE              9\n#define HECAP_MACINFO_SIZE              5\n#define HECAP_TXRX_MCS_NSS_SIZE         2\n#define HECAP_PPET16_PPET8_MAX_SIZE     25\n\n#define HE_PPET16_PPET8_SIZE            8\n\n \nstruct he_ppe_threshold {\n\tu32 numss_m1;\n\tu32 ru_mask;\n\tu32 ppet16_ppet8_ru3_ru0[HE_PPET16_PPET8_SIZE];\n};\n\nstruct ath12k_he {\n\tu8 hecap_macinfo[HECAP_MACINFO_SIZE];\n\tu32 hecap_rxmcsnssmap;\n\tu32 hecap_txmcsnssmap;\n\tu32 hecap_phyinfo[HEHANDLE_CAP_PHYINFO_SIZE];\n\tstruct he_ppe_threshold   hecap_ppet;\n\tu32 heop_param;\n};\n\n#define MAX_RADIOS 3\n\nenum {\n\tWMI_HOST_TP_SCALE_MAX   = 0,\n\tWMI_HOST_TP_SCALE_50    = 1,\n\tWMI_HOST_TP_SCALE_25    = 2,\n\tWMI_HOST_TP_SCALE_12    = 3,\n\tWMI_HOST_TP_SCALE_MIN   = 4,\n\tWMI_HOST_TP_SCALE_SIZE   = 5,\n};\n\nenum ath12k_scan_state {\n\tATH12K_SCAN_IDLE,\n\tATH12K_SCAN_STARTING,\n\tATH12K_SCAN_RUNNING,\n\tATH12K_SCAN_ABORTING,\n};\n\nenum ath12k_dev_flags {\n\tATH12K_CAC_RUNNING,\n\tATH12K_FLAG_CRASH_FLUSH,\n\tATH12K_FLAG_RAW_MODE,\n\tATH12K_FLAG_HW_CRYPTO_DISABLED,\n\tATH12K_FLAG_RECOVERY,\n\tATH12K_FLAG_UNREGISTERING,\n\tATH12K_FLAG_REGISTERED,\n\tATH12K_FLAG_QMI_FAIL,\n\tATH12K_FLAG_HTC_SUSPEND_COMPLETE,\n};\n\nenum ath12k_monitor_flags {\n\tATH12K_FLAG_MONITOR_ENABLED,\n};\n\nstruct ath12k_vif {\n\tu32 vdev_id;\n\tenum wmi_vdev_type vdev_type;\n\tenum wmi_vdev_subtype vdev_subtype;\n\tu32 beacon_interval;\n\tu32 dtim_period;\n\tu16 ast_hash;\n\tu16 ast_idx;\n\tu16 tcl_metadata;\n\tu8 hal_addr_search_flags;\n\tu8 search_type;\n\n\tstruct ath12k *ar;\n\tstruct ieee80211_vif *vif;\n\n\tint bank_id;\n\tu8 vdev_id_check_en;\n\n\tstruct wmi_wmm_params_all_arg wmm_params;\n\tstruct list_head list;\n\tunion {\n\t\tstruct {\n\t\t\tu32 uapsd;\n\t\t} sta;\n\t\tstruct {\n\t\t\t \n\t\t\tu8 tim_bitmap[16];\n\t\t\tu8 tim_len;\n\t\t\tu32 ssid_len;\n\t\t\tu8 ssid[IEEE80211_MAX_SSID_LEN];\n\t\t\tbool hidden_ssid;\n\t\t\t \n\t\t\tu32 noa_len;\n\t\t\tu8 *noa_data;\n\t\t} ap;\n\t} u;\n\n\tbool is_started;\n\tbool is_up;\n\tu32 aid;\n\tu8 bssid[ETH_ALEN];\n\tstruct cfg80211_bitrate_mask bitrate_mask;\n\tint num_legacy_stations;\n\tint rtscts_prot_mode;\n\tint txpower;\n\tbool rsnie_present;\n\tbool wpaie_present;\n\tstruct ieee80211_chanctx_conf chanctx;\n\tu32 key_cipher;\n\tu8 tx_encap_type;\n\tu8 vdev_stats_id;\n\tu32 punct_bitmap;\n};\n\nstruct ath12k_vif_iter {\n\tu32 vdev_id;\n\tstruct ath12k_vif *arvif;\n};\n\n#define HAL_AST_IDX_INVALID\t0xFFFF\n#define HAL_RX_MAX_MCS\t\t12\n#define HAL_RX_MAX_MCS_HT\t31\n#define HAL_RX_MAX_MCS_VHT\t9\n#define HAL_RX_MAX_MCS_HE\t11\n#define HAL_RX_MAX_NSS\t\t8\n#define HAL_RX_MAX_NUM_LEGACY_RATES 12\n#define ATH12K_RX_RATE_TABLE_11AX_NUM\t576\n#define ATH12K_RX_RATE_TABLE_NUM 320\n\nstruct ath12k_rx_peer_rate_stats {\n\tu64 ht_mcs_count[HAL_RX_MAX_MCS_HT + 1];\n\tu64 vht_mcs_count[HAL_RX_MAX_MCS_VHT + 1];\n\tu64 he_mcs_count[HAL_RX_MAX_MCS_HE + 1];\n\tu64 nss_count[HAL_RX_MAX_NSS];\n\tu64 bw_count[HAL_RX_BW_MAX];\n\tu64 gi_count[HAL_RX_GI_MAX];\n\tu64 legacy_count[HAL_RX_MAX_NUM_LEGACY_RATES];\n\tu64 rx_rate[ATH12K_RX_RATE_TABLE_11AX_NUM];\n};\n\nstruct ath12k_rx_peer_stats {\n\tu64 num_msdu;\n\tu64 num_mpdu_fcs_ok;\n\tu64 num_mpdu_fcs_err;\n\tu64 tcp_msdu_count;\n\tu64 udp_msdu_count;\n\tu64 other_msdu_count;\n\tu64 ampdu_msdu_count;\n\tu64 non_ampdu_msdu_count;\n\tu64 stbc_count;\n\tu64 beamformed_count;\n\tu64 mcs_count[HAL_RX_MAX_MCS + 1];\n\tu64 nss_count[HAL_RX_MAX_NSS];\n\tu64 bw_count[HAL_RX_BW_MAX];\n\tu64 gi_count[HAL_RX_GI_MAX];\n\tu64 coding_count[HAL_RX_SU_MU_CODING_MAX];\n\tu64 tid_count[IEEE80211_NUM_TIDS + 1];\n\tu64 pream_cnt[HAL_RX_PREAMBLE_MAX];\n\tu64 reception_type[HAL_RX_RECEPTION_TYPE_MAX];\n\tu64 rx_duration;\n\tu64 dcm_count;\n\tu64 ru_alloc_cnt[HAL_RX_RU_ALLOC_TYPE_MAX];\n\tstruct ath12k_rx_peer_rate_stats pkt_stats;\n\tstruct ath12k_rx_peer_rate_stats byte_stats;\n};\n\n#define ATH12K_HE_MCS_NUM       12\n#define ATH12K_VHT_MCS_NUM      10\n#define ATH12K_BW_NUM           5\n#define ATH12K_NSS_NUM          4\n#define ATH12K_LEGACY_NUM       12\n#define ATH12K_GI_NUM           4\n#define ATH12K_HT_MCS_NUM       32\n\nenum ath12k_pkt_rx_err {\n\tATH12K_PKT_RX_ERR_FCS,\n\tATH12K_PKT_RX_ERR_TKIP,\n\tATH12K_PKT_RX_ERR_CRYPT,\n\tATH12K_PKT_RX_ERR_PEER_IDX_INVAL,\n\tATH12K_PKT_RX_ERR_MAX,\n};\n\nenum ath12k_ampdu_subfrm_num {\n\tATH12K_AMPDU_SUBFRM_NUM_10,\n\tATH12K_AMPDU_SUBFRM_NUM_20,\n\tATH12K_AMPDU_SUBFRM_NUM_30,\n\tATH12K_AMPDU_SUBFRM_NUM_40,\n\tATH12K_AMPDU_SUBFRM_NUM_50,\n\tATH12K_AMPDU_SUBFRM_NUM_60,\n\tATH12K_AMPDU_SUBFRM_NUM_MORE,\n\tATH12K_AMPDU_SUBFRM_NUM_MAX,\n};\n\nenum ath12k_amsdu_subfrm_num {\n\tATH12K_AMSDU_SUBFRM_NUM_1,\n\tATH12K_AMSDU_SUBFRM_NUM_2,\n\tATH12K_AMSDU_SUBFRM_NUM_3,\n\tATH12K_AMSDU_SUBFRM_NUM_4,\n\tATH12K_AMSDU_SUBFRM_NUM_MORE,\n\tATH12K_AMSDU_SUBFRM_NUM_MAX,\n};\n\nenum ath12k_counter_type {\n\tATH12K_COUNTER_TYPE_BYTES,\n\tATH12K_COUNTER_TYPE_PKTS,\n\tATH12K_COUNTER_TYPE_MAX,\n};\n\nenum ath12k_stats_type {\n\tATH12K_STATS_TYPE_SUCC,\n\tATH12K_STATS_TYPE_FAIL,\n\tATH12K_STATS_TYPE_RETRY,\n\tATH12K_STATS_TYPE_AMPDU,\n\tATH12K_STATS_TYPE_MAX,\n};\n\nstruct ath12k_htt_data_stats {\n\tu64 legacy[ATH12K_COUNTER_TYPE_MAX][ATH12K_LEGACY_NUM];\n\tu64 ht[ATH12K_COUNTER_TYPE_MAX][ATH12K_HT_MCS_NUM];\n\tu64 vht[ATH12K_COUNTER_TYPE_MAX][ATH12K_VHT_MCS_NUM];\n\tu64 he[ATH12K_COUNTER_TYPE_MAX][ATH12K_HE_MCS_NUM];\n\tu64 bw[ATH12K_COUNTER_TYPE_MAX][ATH12K_BW_NUM];\n\tu64 nss[ATH12K_COUNTER_TYPE_MAX][ATH12K_NSS_NUM];\n\tu64 gi[ATH12K_COUNTER_TYPE_MAX][ATH12K_GI_NUM];\n\tu64 transmit_type[ATH12K_COUNTER_TYPE_MAX][HAL_RX_RECEPTION_TYPE_MAX];\n\tu64 ru_loc[ATH12K_COUNTER_TYPE_MAX][HAL_RX_RU_ALLOC_TYPE_MAX];\n};\n\nstruct ath12k_htt_tx_stats {\n\tstruct ath12k_htt_data_stats stats[ATH12K_STATS_TYPE_MAX];\n\tu64 tx_duration;\n\tu64 ba_fails;\n\tu64 ack_fails;\n\tu16 ru_start;\n\tu16 ru_tones;\n\tu32 mu_group[MAX_MU_GROUP_ID];\n};\n\nstruct ath12k_per_ppdu_tx_stats {\n\tu16 succ_pkts;\n\tu16 failed_pkts;\n\tu16 retry_pkts;\n\tu32 succ_bytes;\n\tu32 failed_bytes;\n\tu32 retry_bytes;\n};\n\nstruct ath12k_wbm_tx_stats {\n\tu64 wbm_tx_comp_stats[HAL_WBM_REL_HTT_TX_COMP_STATUS_MAX];\n};\n\nstruct ath12k_sta {\n\tstruct ath12k_vif *arvif;\n\n\t \n\tu32 changed;  \n\tu32 bw;\n\tu32 nss;\n\tu32 smps;\n\tenum hal_pn_type pn_type;\n\n\tstruct work_struct update_wk;\n\tstruct rate_info txrate;\n\tstruct rate_info last_txrate;\n\tu64 rx_duration;\n\tu64 tx_duration;\n\tu8 rssi_comb;\n\tstruct ath12k_rx_peer_stats *rx_stats;\n\tstruct ath12k_wbm_tx_stats *wbm_tx_stats;\n\tu32 bw_prev;\n};\n\n#define ATH12K_MIN_5G_FREQ 4150\n#define ATH12K_MIN_6G_FREQ 5945\n#define ATH12K_MAX_6G_FREQ 7115\n#define ATH12K_NUM_CHANS 100\n#define ATH12K_MAX_5G_CHAN 173\n\nenum ath12k_state {\n\tATH12K_STATE_OFF,\n\tATH12K_STATE_ON,\n\tATH12K_STATE_RESTARTING,\n\tATH12K_STATE_RESTARTED,\n\tATH12K_STATE_WEDGED,\n\t \n};\n\n \n#define ATH12K_DEFAULT_NOISE_FLOOR -95\n\nstruct ath12k_fw_stats {\n\tu32 pdev_id;\n\tu32 stats_id;\n\tstruct list_head pdevs;\n\tstruct list_head vdevs;\n\tstruct list_head bcn;\n};\n\nstruct ath12k_per_peer_tx_stats {\n\tu32 succ_bytes;\n\tu32 retry_bytes;\n\tu32 failed_bytes;\n\tu32 duration;\n\tu16 succ_pkts;\n\tu16 retry_pkts;\n\tu16 failed_pkts;\n\tu16 ru_start;\n\tu16 ru_tones;\n\tu8 ba_fails;\n\tu8 ppdu_type;\n\tu32 mu_grpid;\n\tu32 mu_pos;\n\tbool is_ampdu;\n};\n\n#define ATH12K_FLUSH_TIMEOUT (5 * HZ)\n#define ATH12K_VDEV_DELETE_TIMEOUT_HZ (5 * HZ)\n\nstruct ath12k {\n\tstruct ath12k_base *ab;\n\tstruct ath12k_pdev *pdev;\n\tstruct ieee80211_hw *hw;\n\tstruct ieee80211_ops *ops;\n\tstruct ath12k_wmi_pdev *wmi;\n\tstruct ath12k_pdev_dp dp;\n\tu8 mac_addr[ETH_ALEN];\n\tu32 ht_cap_info;\n\tu32 vht_cap_info;\n\tstruct ath12k_he ar_he;\n\tenum ath12k_state state;\n\tbool supports_6ghz;\n\tstruct {\n\t\tstruct completion started;\n\t\tstruct completion completed;\n\t\tstruct completion on_channel;\n\t\tstruct delayed_work timeout;\n\t\tenum ath12k_scan_state state;\n\t\tbool is_roc;\n\t\tint vdev_id;\n\t\tint roc_freq;\n\t\tbool roc_notify;\n\t} scan;\n\n\tstruct {\n\t\tstruct ieee80211_supported_band sbands[NUM_NL80211_BANDS];\n\t\tstruct ieee80211_sband_iftype_data\n\t\t\tiftype[NUM_NL80211_BANDS][NUM_NL80211_IFTYPES];\n\t} mac;\n\n\tunsigned long dev_flags;\n\tunsigned int filter_flags;\n\tunsigned long monitor_flags;\n\tu32 min_tx_power;\n\tu32 max_tx_power;\n\tu32 txpower_limit_2g;\n\tu32 txpower_limit_5g;\n\tu32 txpower_scale;\n\tu32 power_scale;\n\tu32 chan_tx_pwr;\n\tu32 num_stations;\n\tu32 max_num_stations;\n\tbool monitor_present;\n\t \n\tstruct mutex conf_mutex;\n\t \n\tspinlock_t data_lock;\n\n\tstruct list_head arvifs;\n\t \n\tstruct ieee80211_channel *rx_channel;\n\n\t \n\tstruct ieee80211_channel *scan_channel;\n\n\tu8 cfg_tx_chainmask;\n\tu8 cfg_rx_chainmask;\n\tu8 num_rx_chains;\n\tu8 num_tx_chains;\n\t \n\tu8 pdev_idx;\n\tu8 lmac_id;\n\n\tstruct completion peer_assoc_done;\n\tstruct completion peer_delete_done;\n\n\tint install_key_status;\n\tstruct completion install_key_done;\n\n\tint last_wmi_vdev_start_status;\n\tstruct completion vdev_setup_done;\n\tstruct completion vdev_delete_done;\n\n\tint num_peers;\n\tint max_num_peers;\n\tu32 num_started_vdevs;\n\tu32 num_created_vdevs;\n\tunsigned long long allocated_vdev_map;\n\n\tstruct idr txmgmt_idr;\n\t \n\tspinlock_t txmgmt_idr_lock;\n\tatomic_t num_pending_mgmt_tx;\n\twait_queue_head_t txmgmt_empty_waitq;\n\n\t \n\tu32 survey_last_rx_clear_count;\n\tu32 survey_last_cycle_count;\n\n\t \n\tbool ch_info_can_report_survey;\n\tstruct survey_info survey[ATH12K_NUM_CHANS];\n\tstruct completion bss_survey_done;\n\n\tstruct work_struct regd_update_work;\n\n\tstruct work_struct wmi_mgmt_tx_work;\n\tstruct sk_buff_head wmi_mgmt_tx_queue;\n\n\tstruct ath12k_per_peer_tx_stats peer_tx_stats;\n\tstruct list_head ppdu_stats_info;\n\tu32 ppdu_stat_list_depth;\n\n\tstruct ath12k_per_peer_tx_stats cached_stats;\n\tu32 last_ppdu_id;\n\tu32 cached_ppdu_id;\n\n\tbool dfs_block_radar_events;\n\tbool monitor_conf_enabled;\n\tbool monitor_vdev_created;\n\tbool monitor_started;\n\tint monitor_vdev_id;\n};\n\nstruct ath12k_band_cap {\n\tu32 phy_id;\n\tu32 max_bw_supported;\n\tu32 ht_cap_info;\n\tu32 he_cap_info[2];\n\tu32 he_mcs;\n\tu32 he_cap_phy_info[PSOC_HOST_MAX_PHY_SIZE];\n\tstruct ath12k_wmi_ppe_threshold_arg he_ppet;\n\tu16 he_6ghz_capa;\n\tu32 eht_cap_mac_info[WMI_MAX_EHTCAP_MAC_SIZE];\n\tu32 eht_cap_phy_info[WMI_MAX_EHTCAP_PHY_SIZE];\n\tu32 eht_mcs_20_only;\n\tu32 eht_mcs_80;\n\tu32 eht_mcs_160;\n\tu32 eht_mcs_320;\n\tstruct ath12k_wmi_ppe_threshold_arg eht_ppet;\n\tu32 eht_cap_info_internal;\n};\n\nstruct ath12k_pdev_cap {\n\tu32 supported_bands;\n\tu32 ampdu_density;\n\tu32 vht_cap;\n\tu32 vht_mcs;\n\tu32 he_mcs;\n\tu32 tx_chain_mask;\n\tu32 rx_chain_mask;\n\tu32 tx_chain_mask_shift;\n\tu32 rx_chain_mask_shift;\n\tstruct ath12k_band_cap band[NUM_NL80211_BANDS];\n};\n\nstruct mlo_timestamp {\n\tu32 info;\n\tu32 sync_timestamp_lo_us;\n\tu32 sync_timestamp_hi_us;\n\tu32 mlo_offset_lo;\n\tu32 mlo_offset_hi;\n\tu32 mlo_offset_clks;\n\tu32 mlo_comp_clks;\n\tu32 mlo_comp_timer;\n};\n\nstruct ath12k_pdev {\n\tstruct ath12k *ar;\n\tu32 pdev_id;\n\tstruct ath12k_pdev_cap cap;\n\tu8 mac_addr[ETH_ALEN];\n\tstruct mlo_timestamp timestamp;\n};\n\nstruct ath12k_fw_pdev {\n\tu32 pdev_id;\n\tu32 phy_id;\n\tu32 supported_bands;\n};\n\nstruct ath12k_board_data {\n\tconst struct firmware *fw;\n\tconst void *data;\n\tsize_t len;\n};\n\nstruct ath12k_soc_dp_tx_err_stats {\n\t \n\tu32 desc_na[DP_TCL_NUM_RING_MAX];\n\t \n\tatomic_t misc_fail;\n};\n\nstruct ath12k_soc_dp_stats {\n\tu32 err_ring_pkts;\n\tu32 invalid_rbm;\n\tu32 rxdma_error[HAL_REO_ENTR_RING_RXDMA_ECODE_MAX];\n\tu32 reo_error[HAL_REO_DEST_RING_ERROR_CODE_MAX];\n\tu32 hal_reo_error[DP_REO_DST_RING_MAX];\n\tstruct ath12k_soc_dp_tx_err_stats tx_err;\n};\n\n \nstruct ath12k_base {\n\tenum ath12k_hw_rev hw_rev;\n\tstruct platform_device *pdev;\n\tstruct device *dev;\n\tstruct ath12k_qmi qmi;\n\tstruct ath12k_wmi_base wmi_ab;\n\tstruct completion fw_ready;\n\tint num_radios;\n\t \n\tu32 cc_freq_hz;\n\n\tstruct ath12k_htc htc;\n\n\tstruct ath12k_dp dp;\n\n\tvoid __iomem *mem;\n\tunsigned long mem_len;\n\n\tstruct {\n\t\tenum ath12k_bus bus;\n\t\tconst struct ath12k_hif_ops *ops;\n\t} hif;\n\n\tstruct ath12k_ce ce;\n\tstruct timer_list rx_replenish_retry;\n\tstruct ath12k_hal hal;\n\t \n\tstruct mutex core_lock;\n\t \n\tspinlock_t base_lock;\n\n\t \n\tstruct ath12k_pdev pdevs[MAX_RADIOS];\n\n\t \n\tstruct ath12k_fw_pdev fw_pdev[MAX_RADIOS];\n\tu8 fw_pdev_count;\n\n\tstruct ath12k_pdev __rcu *pdevs_active[MAX_RADIOS];\n\tstruct ath12k_wmi_hal_reg_capabilities_ext_arg hal_reg_cap[MAX_RADIOS];\n\tunsigned long long free_vdev_map;\n\tunsigned long long free_vdev_stats_id_map;\n\tstruct list_head peers;\n\twait_queue_head_t peer_mapping_wq;\n\tu8 mac_addr[ETH_ALEN];\n\tbool wmi_ready;\n\tu32 wlan_init_status;\n\tint irq_num[ATH12K_IRQ_NUM_MAX];\n\tstruct ath12k_ext_irq_grp ext_irq_grp[ATH12K_EXT_IRQ_GRP_NUM_MAX];\n\tstruct napi_struct *napi;\n\tstruct ath12k_wmi_target_cap_arg target_caps;\n\tu32 ext_service_bitmap[WMI_SERVICE_EXT_BM_SIZE];\n\tbool pdevs_macaddr_valid;\n\tint bd_api;\n\n\tconst struct ath12k_hw_params *hw_params;\n\n\tconst struct firmware *cal_file;\n\n\t \n\t \n\tstruct ieee80211_regdomain *default_regd[MAX_RADIOS];\n\t \n\tstruct ieee80211_regdomain *new_regd[MAX_RADIOS];\n\n\t \n\tenum ath12k_dfs_region dfs_region;\n\tstruct ath12k_soc_dp_stats soc_stats;\n\n\tunsigned long dev_flags;\n\tstruct completion driver_recovery;\n\tstruct workqueue_struct *workqueue;\n\tstruct work_struct restart_work;\n\tstruct workqueue_struct *workqueue_aux;\n\tstruct work_struct reset_work;\n\tatomic_t reset_count;\n\tatomic_t recovery_count;\n\tatomic_t recovery_start_count;\n\tbool is_reset;\n\tstruct completion reset_complete;\n\tstruct completion reconfigure_complete;\n\tstruct completion recovery_start;\n\t \n\tatomic_t fail_cont_count;\n\tunsigned long reset_fail_timeout;\n\tstruct {\n\t\t \n\t\tu32 fw_crash_counter;\n\t} stats;\n\tu32 pktlog_defs_checksum;\n\n\tstruct ath12k_dbring_cap *db_caps;\n\tu32 num_db_cap;\n\n\tstruct timer_list mon_reap_timer;\n\n\tstruct completion htc_suspend;\n\n\tu64 fw_soc_drop_count;\n\tbool static_window_map;\n\n\t \n\tu8 drv_priv[] __aligned(sizeof(void *));\n};\n\nint ath12k_core_qmi_firmware_ready(struct ath12k_base *ab);\nint ath12k_core_pre_init(struct ath12k_base *ab);\nint ath12k_core_init(struct ath12k_base *ath12k);\nvoid ath12k_core_deinit(struct ath12k_base *ath12k);\nstruct ath12k_base *ath12k_core_alloc(struct device *dev, size_t priv_size,\n\t\t\t\t      enum ath12k_bus bus);\nvoid ath12k_core_free(struct ath12k_base *ath12k);\nint ath12k_core_fetch_board_data_api_1(struct ath12k_base *ab,\n\t\t\t\t       struct ath12k_board_data *bd,\n\t\t\t\t       char *filename);\nint ath12k_core_fetch_bdf(struct ath12k_base *ath12k,\n\t\t\t  struct ath12k_board_data *bd);\nvoid ath12k_core_free_bdf(struct ath12k_base *ab, struct ath12k_board_data *bd);\n\nvoid ath12k_core_halt(struct ath12k *ar);\nint ath12k_core_resume(struct ath12k_base *ab);\nint ath12k_core_suspend(struct ath12k_base *ab);\n\nconst struct firmware *ath12k_core_firmware_request(struct ath12k_base *ab,\n\t\t\t\t\t\t    const char *filename);\n\nstatic inline const char *ath12k_scan_state_str(enum ath12k_scan_state state)\n{\n\tswitch (state) {\n\tcase ATH12K_SCAN_IDLE:\n\t\treturn \"idle\";\n\tcase ATH12K_SCAN_STARTING:\n\t\treturn \"starting\";\n\tcase ATH12K_SCAN_RUNNING:\n\t\treturn \"running\";\n\tcase ATH12K_SCAN_ABORTING:\n\t\treturn \"aborting\";\n\t}\n\n\treturn \"unknown\";\n}\n\nstatic inline struct ath12k_skb_cb *ATH12K_SKB_CB(struct sk_buff *skb)\n{\n\tBUILD_BUG_ON(sizeof(struct ath12k_skb_cb) >\n\t\t     IEEE80211_TX_INFO_DRIVER_DATA_SIZE);\n\treturn (struct ath12k_skb_cb *)&IEEE80211_SKB_CB(skb)->driver_data;\n}\n\nstatic inline struct ath12k_skb_rxcb *ATH12K_SKB_RXCB(struct sk_buff *skb)\n{\n\tBUILD_BUG_ON(sizeof(struct ath12k_skb_rxcb) > sizeof(skb->cb));\n\treturn (struct ath12k_skb_rxcb *)skb->cb;\n}\n\nstatic inline struct ath12k_vif *ath12k_vif_to_arvif(struct ieee80211_vif *vif)\n{\n\treturn (struct ath12k_vif *)vif->drv_priv;\n}\n\nstatic inline struct ath12k *ath12k_ab_to_ar(struct ath12k_base *ab,\n\t\t\t\t\t     int mac_id)\n{\n\treturn ab->pdevs[ath12k_hw_mac_id_to_pdev_id(ab->hw_params, mac_id)].ar;\n}\n\nstatic inline void ath12k_core_create_firmware_path(struct ath12k_base *ab,\n\t\t\t\t\t\t    const char *filename,\n\t\t\t\t\t\t    void *buf, size_t buf_len)\n{\n\tsnprintf(buf, buf_len, \"%s/%s/%s\", ATH12K_FW_DIR,\n\t\t ab->hw_params->fw.dir, filename);\n}\n\nstatic inline const char *ath12k_bus_str(enum ath12k_bus bus)\n{\n\tswitch (bus) {\n\tcase ATH12K_BUS_PCI:\n\t\treturn \"pci\";\n\t}\n\n\treturn \"unknown\";\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}