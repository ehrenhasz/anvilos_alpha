{
  "module_name": "htc_hst.h",
  "hash_id": "d57e5d7a50e2e29bce8f83ab034ce7954a5cf7f35c62db996c8f6899a25f1cac",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath9k/htc_hst.h",
  "human_readable_source": " \n\n#ifndef HTC_HST_H\n#define HTC_HST_H\n\nstruct ath9k_htc_priv;\nstruct htc_target;\nstruct ath9k_htc_tx_ctl;\n\nenum ath9k_hif_transports {\n\tATH9K_HIF_USB,\n};\n\nstruct ath9k_htc_hif {\n\tstruct list_head list;\n\tconst enum ath9k_hif_transports transport;\n\tconst char *name;\n\n\tu8 control_dl_pipe;\n\tu8 control_ul_pipe;\n\n\tvoid (*start) (void *hif_handle);\n\tvoid (*stop) (void *hif_handle);\n\tvoid (*sta_drain) (void *hif_handle, u8 idx);\n\tint (*send) (void *hif_handle, u8 pipe, struct sk_buff *buf);\n};\n\nenum htc_endpoint_id {\n\tENDPOINT_UNUSED = -1,\n\tENDPOINT0 = 0,\n\tENDPOINT1 = 1,\n\tENDPOINT2 = 2,\n\tENDPOINT3 = 3,\n\tENDPOINT4 = 4,\n\tENDPOINT5 = 5,\n\tENDPOINT6 = 6,\n\tENDPOINT7 = 7,\n\tENDPOINT8 = 8,\n\tENDPOINT_MAX = 22\n};\n\n \n#define HTC_FLAGS_RECV_TRAILER (1 << 1)\n\nstruct htc_frame_hdr {\n\tu8 endpoint_id;\n\tu8 flags;\n\t__be16 payload_len;\n\tu8 control[4];\n} __packed;\n\nstruct htc_ready_msg {\n\t__be16 message_id;\n\t__be16 credits;\n\t__be16 credit_size;\n\tu8 max_endpoints;\n\tu8 pad;\n} __packed;\n\nstruct htc_config_pipe_msg {\n\t__be16 message_id;\n\tu8 pipe_id;\n\tu8 credits;\n} __packed;\n\nstruct htc_panic_bad_vaddr {\n\t__be32 pattern;\n\t__be32 exccause;\n\t__be32 pc;\n\t__be32 badvaddr;\n} __packed;\n\nstruct htc_panic_bad_epid {\n\t__be32 pattern;\n\t__be32 epid;\n} __packed;\n\nstruct htc_ep_callbacks {\n\tvoid *priv;\n\tvoid (*tx) (void *, struct sk_buff *, enum htc_endpoint_id, bool txok);\n\tvoid (*rx) (void *, struct sk_buff *, enum htc_endpoint_id);\n};\n\nstruct htc_endpoint {\n\tu16 service_id;\n\n\tstruct htc_ep_callbacks ep_callbacks;\n\tu32 max_txqdepth;\n\tint max_msglen;\n\n\tu8 ul_pipeid;\n\tu8 dl_pipeid;\n};\n\n#define HTC_MAX_CONTROL_MESSAGE_LENGTH 255\n#define HTC_CONTROL_BUFFER_SIZE\t\\\n\t(HTC_MAX_CONTROL_MESSAGE_LENGTH + sizeof(struct htc_frame_hdr))\n\n#define HTC_OP_START_WAIT           BIT(0)\n#define HTC_OP_CONFIG_PIPE_CREDITS  BIT(1)\n\nstruct htc_target {\n\tvoid *hif_dev;\n\tstruct ath9k_htc_priv *drv_priv;\n\tstruct device *dev;\n\tstruct ath9k_htc_hif *hif;\n\tstruct htc_endpoint endpoint[ENDPOINT_MAX];\n\tstruct completion target_wait;\n\tstruct completion cmd_wait;\n\tstruct list_head list;\n\tenum htc_endpoint_id conn_rsp_epid;\n\tu16 credits;\n\tu16 credit_size;\n\tu8 htc_flags;\n\tatomic_t tgt_ready;\n};\n\nenum htc_msg_id {\n\tHTC_MSG_READY_ID = 1,\n\tHTC_MSG_CONNECT_SERVICE_ID,\n\tHTC_MSG_CONNECT_SERVICE_RESPONSE_ID,\n\tHTC_MSG_SETUP_COMPLETE_ID,\n\tHTC_MSG_CONFIG_PIPE_ID,\n\tHTC_MSG_CONFIG_PIPE_RESPONSE_ID,\n};\n\nstruct htc_service_connreq {\n\tu16 service_id;\n\tu16 con_flags;\n\tu32 max_send_qdepth;\n\tstruct htc_ep_callbacks ep_callbacks;\n};\n\n \n\nenum htc_service_group_ids{\n\tRSVD_SERVICE_GROUP = 0,\n\tWMI_SERVICE_GROUP = 1,\n\n\tHTC_SERVICE_GROUP_LAST = 255\n};\n\n#define MAKE_SERVICE_ID(group, index)\t\t\\\n\t(int)(((int)group << 8) | (int)(index))\n\n \n#define HTC_CTRL_RSVD_SVC MAKE_SERVICE_ID(RSVD_SERVICE_GROUP, 1)\n#define HTC_LOOPBACK_RSVD_SVC MAKE_SERVICE_ID(RSVD_SERVICE_GROUP, 2)\n\n#define WMI_CONTROL_SVC   MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 0)\n#define WMI_BEACON_SVC\t  MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 1)\n#define WMI_CAB_SVC\t  MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 2)\n#define WMI_UAPSD_SVC\t  MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 3)\n#define WMI_MGMT_SVC\t  MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 4)\n#define WMI_DATA_VO_SVC   MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 5)\n#define WMI_DATA_VI_SVC   MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 6)\n#define WMI_DATA_BE_SVC   MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 7)\n#define WMI_DATA_BK_SVC   MAKE_SERVICE_ID(WMI_SERVICE_GROUP, 8)\n\nstruct htc_conn_svc_msg {\n\t__be16 msg_id;\n\t__be16 service_id;\n\t__be16 con_flags;\n\tu8 dl_pipeid;\n\tu8 ul_pipeid;\n\tu8 svc_meta_len;\n\tu8 pad;\n} __packed;\n\n \n#define HTC_SERVICE_SUCCESS      0\n#define HTC_SERVICE_NOT_FOUND    1\n#define HTC_SERVICE_FAILED       2\n#define HTC_SERVICE_NO_RESOURCES 3\n#define HTC_SERVICE_NO_MORE_EP   4\n\nstruct htc_conn_svc_rspmsg {\n\t__be16 msg_id;\n\t__be16 service_id;\n\tu8 status;\n\tu8 endpoint_id;\n\t__be16 max_msg_len;\n\tu8 svc_meta_len;\n\tu8 pad;\n} __packed;\n\nstruct htc_comp_msg {\n\t__be16 msg_id;\n} __packed;\n\nint htc_init(struct htc_target *target);\nint htc_connect_service(struct htc_target *target,\n\t\t\t  struct htc_service_connreq *service_connreq,\n\t\t\t  enum htc_endpoint_id *conn_rsp_eid);\nint htc_send(struct htc_target *target, struct sk_buff *skb);\nint htc_send_epid(struct htc_target *target, struct sk_buff *skb,\n\t\t  enum htc_endpoint_id epid);\nvoid htc_stop(struct htc_target *target);\nvoid htc_start(struct htc_target *target);\nvoid htc_sta_drain(struct htc_target *target, u8 idx);\n\nvoid ath9k_htc_rx_msg(struct htc_target *htc_handle,\n\t\t      struct sk_buff *skb, u32 len, u8 pipe_id);\nvoid ath9k_htc_txcompletion_cb(struct htc_target *htc_handle,\n\t\t\t       struct sk_buff *skb, bool txok);\n\nstruct htc_target *ath9k_htc_hw_alloc(void *hif_handle,\n\t\t\t\t      struct ath9k_htc_hif *hif,\n\t\t\t\t      struct device *dev);\nvoid ath9k_htc_hw_free(struct htc_target *htc);\nint ath9k_htc_hw_init(struct htc_target *target,\n\t\t      struct device *dev, u16 devid, char *product,\n\t\t      u32 drv_info);\nvoid ath9k_htc_hw_deinit(struct htc_target *target, bool hot_unplug);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}