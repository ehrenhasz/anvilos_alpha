{
  "module_name": "ar9003_mci.h",
  "hash_id": "7c6fe515a6580dd1a0f07b8af4a0a1eb600f0798e60aca6cf36a0901c171de16",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath9k/ar9003_mci.h",
  "human_readable_source": " \n\n#ifndef AR9003_MCI_H\n#define AR9003_MCI_H\n\n#define MCI_FLAG_DISABLE_TIMESTAMP      0x00000001       \n#define MCI_RECOVERY_DUR_TSF\t\t(100 * 1000)     \n\n \n#define MCI_GPM_COEX_MAJOR_VERSION_DEFAULT  3\n#define MCI_GPM_COEX_MINOR_VERSION_DEFAULT  0\n\n \n#define MCI_GPM_COEX_MAJOR_VERSION_WLAN     3\n#define MCI_GPM_COEX_MINOR_VERSION_WLAN     0\n\nenum mci_gpm_coex_query_type {\n\tMCI_GPM_COEX_QUERY_BT_ALL_INFO      = BIT(0),\n\tMCI_GPM_COEX_QUERY_BT_TOPOLOGY      = BIT(1),\n\tMCI_GPM_COEX_QUERY_BT_DEBUG         = BIT(2),\n};\n\nenum mci_gpm_coex_halt_bt_gpm {\n\tMCI_GPM_COEX_BT_GPM_UNHALT,\n\tMCI_GPM_COEX_BT_GPM_HALT\n};\n\nenum mci_gpm_coex_bt_update_flags_op {\n\tMCI_GPM_COEX_BT_FLAGS_READ,\n\tMCI_GPM_COEX_BT_FLAGS_SET,\n\tMCI_GPM_COEX_BT_FLAGS_CLEAR\n};\n\n#define MCI_NUM_BT_CHANNELS     79\n\n#define MCI_BT_MCI_FLAGS_UPDATE_CORR          0x00000002\n#define MCI_BT_MCI_FLAGS_UPDATE_HDR           0x00000004\n#define MCI_BT_MCI_FLAGS_UPDATE_PLD           0x00000008\n#define MCI_BT_MCI_FLAGS_LNA_CTRL             0x00000010\n#define MCI_BT_MCI_FLAGS_DEBUG                0x00000020\n#define MCI_BT_MCI_FLAGS_SCHED_MSG            0x00000040\n#define MCI_BT_MCI_FLAGS_CONT_MSG             0x00000080\n#define MCI_BT_MCI_FLAGS_COEX_GPM             0x00000100\n#define MCI_BT_MCI_FLAGS_CPU_INT_MSG          0x00000200\n#define MCI_BT_MCI_FLAGS_MCI_MODE             0x00000400\n#define MCI_BT_MCI_FLAGS_AR9462_MODE          0x00001000\n#define MCI_BT_MCI_FLAGS_OTHER                0x00010000\n\n#define MCI_DEFAULT_BT_MCI_FLAGS              0x00011dde\n\n#define MCI_TOGGLE_BT_MCI_FLAGS  (MCI_BT_MCI_FLAGS_UPDATE_CORR | \\\n\t\t\t\t  MCI_BT_MCI_FLAGS_UPDATE_HDR  | \\\n\t\t\t\t  MCI_BT_MCI_FLAGS_UPDATE_PLD  | \\\n\t\t\t\t  MCI_BT_MCI_FLAGS_MCI_MODE)\n\n#define MCI_2G_FLAGS_CLEAR_MASK   0x00000000\n#define MCI_2G_FLAGS_SET_MASK     MCI_TOGGLE_BT_MCI_FLAGS\n#define MCI_2G_FLAGS              MCI_DEFAULT_BT_MCI_FLAGS\n\n#define MCI_5G_FLAGS_CLEAR_MASK   MCI_TOGGLE_BT_MCI_FLAGS\n#define MCI_5G_FLAGS_SET_MASK     0x00000000\n#define MCI_5G_FLAGS              (MCI_DEFAULT_BT_MCI_FLAGS & \\\n\t\t\t\t   ~MCI_TOGGLE_BT_MCI_FLAGS)\n\n \n#define ATH_MCI_CONFIG_CONCUR_TX            0x00000003\n#define ATH_MCI_CONFIG_MCI_OBS_MCI          0x00000004\n#define ATH_MCI_CONFIG_MCI_OBS_TXRX         0x00000008\n#define ATH_MCI_CONFIG_MCI_OBS_BT           0x00000010\n#define ATH_MCI_CONFIG_DISABLE_MCI_CAL      0x00000020\n#define ATH_MCI_CONFIG_DISABLE_OSLA         0x00000040\n#define ATH_MCI_CONFIG_DISABLE_FTP_STOMP    0x00000080\n#define ATH_MCI_CONFIG_AGGR_THRESH          0x00000700\n#define ATH_MCI_CONFIG_AGGR_THRESH_S        8\n#define ATH_MCI_CONFIG_DISABLE_AGGR_THRESH  0x00000800\n#define ATH_MCI_CONFIG_CLK_DIV              0x00003000\n#define ATH_MCI_CONFIG_CLK_DIV_S            12\n#define ATH_MCI_CONFIG_DISABLE_TUNING       0x00004000\n#define ATH_MCI_CONFIG_DISABLE_AIC          0x00008000\n#define ATH_MCI_CONFIG_AIC_CAL_NUM_CHAN     0x007f0000\n#define ATH_MCI_CONFIG_AIC_CAL_NUM_CHAN_S   16\n#define ATH_MCI_CONFIG_NO_QUIET_ACK         0x00800000\n#define ATH_MCI_CONFIG_NO_QUIET_ACK_S       23\n#define ATH_MCI_CONFIG_ANT_ARCH             0x07000000\n#define ATH_MCI_CONFIG_ANT_ARCH_S           24\n#define ATH_MCI_CONFIG_FORCE_QUIET_ACK      0x08000000\n#define ATH_MCI_CONFIG_FORCE_QUIET_ACK_S    27\n#define ATH_MCI_CONFIG_FORCE_2CHAIN_ACK     0x10000000\n#define ATH_MCI_CONFIG_MCI_STAT_DBG         0x20000000\n#define ATH_MCI_CONFIG_MCI_WEIGHT_DBG       0x40000000\n#define ATH_MCI_CONFIG_DISABLE_MCI          0x80000000\n\n#define ATH_MCI_CONFIG_MCI_OBS_MASK     (ATH_MCI_CONFIG_MCI_OBS_MCI  | \\\n\t\t\t\t\t ATH_MCI_CONFIG_MCI_OBS_TXRX | \\\n\t\t\t\t\t ATH_MCI_CONFIG_MCI_OBS_BT)\n\n#define ATH_MCI_CONFIG_MCI_OBS_GPIO     0x0000002F\n\n#define ATH_MCI_ANT_ARCH_1_ANT_PA_LNA_NON_SHARED 0x00\n#define ATH_MCI_ANT_ARCH_1_ANT_PA_LNA_SHARED     0x01\n#define ATH_MCI_ANT_ARCH_2_ANT_PA_LNA_NON_SHARED 0x02\n#define ATH_MCI_ANT_ARCH_2_ANT_PA_LNA_SHARED     0x03\n#define ATH_MCI_ANT_ARCH_3_ANT                   0x04\n\n#define MCI_ANT_ARCH_PA_LNA_SHARED(mci)\t\t\t\t\t\\\n\t((MS(mci->config, ATH_MCI_CONFIG_ANT_ARCH) == ATH_MCI_ANT_ARCH_1_ANT_PA_LNA_SHARED) || \\\n\t (MS(mci->config, ATH_MCI_CONFIG_ANT_ARCH) == ATH_MCI_ANT_ARCH_2_ANT_PA_LNA_SHARED))\n\nenum mci_message_header {\t\t \n\tMCI_LNA_CTRL     = 0x10,         \n\tMCI_CONT_NACK    = 0x20,         \n\tMCI_CONT_INFO    = 0x30,         \n\tMCI_CONT_RST     = 0x40,         \n\tMCI_SCHD_INFO    = 0x50,         \n\tMCI_CPU_INT      = 0x60,         \n\tMCI_SYS_WAKING   = 0x70,         \n\tMCI_GPM          = 0x80,         \n\tMCI_LNA_INFO     = 0x90,         \n\tMCI_LNA_STATE    = 0x94,\n\tMCI_LNA_TAKE     = 0x98,\n\tMCI_LNA_TRANS    = 0x9c,\n\tMCI_SYS_SLEEPING = 0xa0,         \n\tMCI_REQ_WAKE     = 0xc0,         \n\tMCI_DEBUG_16     = 0xfe,         \n\tMCI_REMOTE_RESET = 0xff          \n};\n\nenum ath_mci_gpm_coex_profile_type {\n\tMCI_GPM_COEX_PROFILE_UNKNOWN,\n\tMCI_GPM_COEX_PROFILE_RFCOMM,\n\tMCI_GPM_COEX_PROFILE_A2DP,\n\tMCI_GPM_COEX_PROFILE_HID,\n\tMCI_GPM_COEX_PROFILE_BNEP,\n\tMCI_GPM_COEX_PROFILE_VOICE,\n\tMCI_GPM_COEX_PROFILE_A2DPVO,\n\tMCI_GPM_COEX_PROFILE_MAX\n};\n\n \nenum {\n\tMCI_GPM_COEX_W_GPM_PAYLOAD      = 1,\n\tMCI_GPM_COEX_B_GPM_TYPE         = 4,\n\tMCI_GPM_COEX_B_GPM_OPCODE       = 5,\n\t \n\tMCI_GPM_WLAN_CAL_W_SEQUENCE     = 2,\n\n\t \n\t \n\tMCI_GPM_COEX_B_MAJOR_VERSION    = 6,\n\tMCI_GPM_COEX_B_MINOR_VERSION    = 7,\n\t \n\tMCI_GPM_COEX_B_BT_BITMAP        = 6,\n\tMCI_GPM_COEX_B_WLAN_BITMAP      = 7,\n\t \n\tMCI_GPM_COEX_B_HALT_STATE       = 6,\n\t \n\tMCI_GPM_COEX_B_CHANNEL_MAP      = 6,\n\t \n\tMCI_GPM_COEX_B_PROFILE_TYPE     = 6,\n\tMCI_GPM_COEX_B_PROFILE_LINKID   = 7,\n\tMCI_GPM_COEX_B_PROFILE_STATE    = 8,\n\tMCI_GPM_COEX_B_PROFILE_ROLE     = 9,\n\tMCI_GPM_COEX_B_PROFILE_RATE     = 10,\n\tMCI_GPM_COEX_B_PROFILE_VOTYPE   = 11,\n\tMCI_GPM_COEX_H_PROFILE_T        = 12,\n\tMCI_GPM_COEX_B_PROFILE_W        = 14,\n\tMCI_GPM_COEX_B_PROFILE_A        = 15,\n\t \n\tMCI_GPM_COEX_B_STATUS_TYPE      = 6,\n\tMCI_GPM_COEX_B_STATUS_LINKID    = 7,\n\tMCI_GPM_COEX_B_STATUS_STATE     = 8,\n\t \n\tMCI_GPM_COEX_W_BT_FLAGS         = 6,\n\tMCI_GPM_COEX_B_BT_FLAGS_OP      = 10\n};\n\nenum mci_gpm_subtype {\n\tMCI_GPM_BT_CAL_REQ      = 0,\n\tMCI_GPM_BT_CAL_GRANT    = 1,\n\tMCI_GPM_BT_CAL_DONE     = 2,\n\tMCI_GPM_WLAN_CAL_REQ    = 3,\n\tMCI_GPM_WLAN_CAL_GRANT  = 4,\n\tMCI_GPM_WLAN_CAL_DONE   = 5,\n\tMCI_GPM_COEX_AGENT      = 0x0c,\n\tMCI_GPM_RSVD_PATTERN    = 0xfe,\n\tMCI_GPM_RSVD_PATTERN32  = 0xfefefefe,\n\tMCI_GPM_BT_DEBUG        = 0xff\n};\n\nenum mci_bt_state {\n\tMCI_BT_SLEEP,\n\tMCI_BT_AWAKE,\n\tMCI_BT_CAL_START,\n\tMCI_BT_CAL\n};\n\nenum mci_ps_state {\n\tMCI_PS_DISABLE,\n\tMCI_PS_ENABLE,\n\tMCI_PS_ENABLE_OFF,\n\tMCI_PS_ENABLE_ON\n};\n\n \nenum mci_state_type {\n\tMCI_STATE_ENABLE,\n\tMCI_STATE_INIT_GPM_OFFSET,\n\tMCI_STATE_CHECK_GPM_OFFSET,\n\tMCI_STATE_NEXT_GPM_OFFSET,\n\tMCI_STATE_LAST_GPM_OFFSET,\n\tMCI_STATE_BT,\n\tMCI_STATE_SET_BT_SLEEP,\n\tMCI_STATE_SET_BT_AWAKE,\n\tMCI_STATE_SET_BT_CAL_START,\n\tMCI_STATE_SET_BT_CAL,\n\tMCI_STATE_LAST_SCHD_MSG_OFFSET,\n\tMCI_STATE_REMOTE_SLEEP,\n\tMCI_STATE_CONT_STATUS,\n\tMCI_STATE_RESET_REQ_WAKE,\n\tMCI_STATE_SEND_WLAN_COEX_VERSION,\n\tMCI_STATE_SET_BT_COEX_VERSION,\n\tMCI_STATE_SEND_WLAN_CHANNELS,\n\tMCI_STATE_SEND_VERSION_QUERY,\n\tMCI_STATE_SEND_STATUS_QUERY,\n\tMCI_STATE_NEED_FLUSH_BT_INFO,\n\tMCI_STATE_SET_CONCUR_TX_PRI,\n\tMCI_STATE_RECOVER_RX,\n\tMCI_STATE_NEED_FTP_STOMP,\n\tMCI_STATE_NEED_TUNING,\n\tMCI_STATE_NEED_STAT_DEBUG,\n\tMCI_STATE_SHARED_CHAIN_CONCUR_TX,\n\tMCI_STATE_AIC_CAL,\n\tMCI_STATE_AIC_START,\n\tMCI_STATE_AIC_CAL_RESET,\n\tMCI_STATE_AIC_CAL_SINGLE,\n\tMCI_STATE_IS_AR9462,\n\tMCI_STATE_IS_AR9565_1ANT,\n\tMCI_STATE_IS_AR9565_2ANT,\n\tMCI_STATE_WLAN_WEAK_SIGNAL,\n\tMCI_STATE_SET_WLAN_PS_STATE,\n\tMCI_STATE_GET_WLAN_PS_STATE,\n\tMCI_STATE_DEBUG,\n\tMCI_STATE_STAT_DEBUG,\n\tMCI_STATE_ALLOW_FCS,\n\tMCI_STATE_SET_2G_CONTENTION,\n\tMCI_STATE_MAX\n};\n\nenum mci_gpm_coex_opcode {\n\tMCI_GPM_COEX_VERSION_QUERY,\n\tMCI_GPM_COEX_VERSION_RESPONSE,\n\tMCI_GPM_COEX_STATUS_QUERY,\n\tMCI_GPM_COEX_HALT_BT_GPM,\n\tMCI_GPM_COEX_WLAN_CHANNELS,\n\tMCI_GPM_COEX_BT_PROFILE_INFO,\n\tMCI_GPM_COEX_BT_STATUS_UPDATE,\n\tMCI_GPM_COEX_BT_UPDATE_FLAGS,\n\tMCI_GPM_COEX_NOOP,\n};\n\n#define MCI_GPM_NOMORE  0\n#define MCI_GPM_MORE    1\n#define MCI_GPM_INVALID 0xffffffff\n\n#define MCI_GPM_RECYCLE(_p_gpm)\tdo {\t\t\t  \\\n\t*(((u32 *)_p_gpm) + MCI_GPM_COEX_W_GPM_PAYLOAD) = \\\n\t\t\t\tMCI_GPM_RSVD_PATTERN32;   \\\n} while (0)\n\n#define MCI_GPM_TYPE(_p_gpm)\t\\\n\t(*(((u8 *)(_p_gpm)) + MCI_GPM_COEX_B_GPM_TYPE) & 0xff)\n\n#define MCI_GPM_OPCODE(_p_gpm)\t\\\n\t(*(((u8 *)(_p_gpm)) + MCI_GPM_COEX_B_GPM_OPCODE) & 0xff)\n\n#define MCI_GPM_SET_CAL_TYPE(_p_gpm, _cal_type)\tdo {\t\t\t   \\\n\t*(((u8 *)(_p_gpm)) + MCI_GPM_COEX_B_GPM_TYPE) = (_cal_type) & 0xff;\\\n} while (0)\n\n#define MCI_GPM_SET_TYPE_OPCODE(_p_gpm, _type, _opcode) do {\t\t   \\\n\t*(((u8 *)(_p_gpm)) + MCI_GPM_COEX_B_GPM_TYPE) = (_type) & 0xff;\t   \\\n\t*(((u8 *)(_p_gpm)) + MCI_GPM_COEX_B_GPM_OPCODE) = (_opcode) & 0xff;\\\n} while (0)\n\n#define MCI_GPM_IS_CAL_TYPE(_type) ((_type) <= MCI_GPM_WLAN_CAL_DONE)\n\n \nbool ar9003_mci_send_message(struct ath_hw *ah, u8 header, u32 flag,\n\t\t\t     u32 *payload, u8 len, bool wait_done,\n\t\t\t     bool check_bt);\nu32 ar9003_mci_state(struct ath_hw *ah, u32 state_type);\nint ar9003_mci_setup(struct ath_hw *ah, u32 gpm_addr, void *gpm_buf,\n\t\t     u16 len, u32 sched_addr);\nvoid ar9003_mci_cleanup(struct ath_hw *ah);\nvoid ar9003_mci_get_interrupt(struct ath_hw *ah, u32 *raw_intr,\n\t\t\t      u32 *rx_msg_intr);\nu32 ar9003_mci_get_next_gpm_offset(struct ath_hw *ah, u32 *more);\nvoid ar9003_mci_set_bt_version(struct ath_hw *ah, u8 major, u8 minor);\nvoid ar9003_mci_send_wlan_channels(struct ath_hw *ah);\n \n\n#ifdef CONFIG_ATH9K_BTCOEX_SUPPORT\n\nvoid ar9003_mci_stop_bt(struct ath_hw *ah, bool save_fullsleep);\nvoid ar9003_mci_init_cal_req(struct ath_hw *ah, bool *is_reusable);\nvoid ar9003_mci_init_cal_done(struct ath_hw *ah);\nvoid ar9003_mci_set_full_sleep(struct ath_hw *ah);\nvoid ar9003_mci_2g5g_switch(struct ath_hw *ah, bool force);\nvoid ar9003_mci_check_bt(struct ath_hw *ah);\nbool ar9003_mci_start_reset(struct ath_hw *ah, struct ath9k_channel *chan);\nint ar9003_mci_end_reset(struct ath_hw *ah, struct ath9k_channel *chan,\n\t\t\t struct ath9k_hw_cal_data *caldata);\nint ar9003_mci_reset(struct ath_hw *ah, bool en_int, bool is_2g,\n\t\t     bool is_full_sleep);\nvoid ar9003_mci_get_isr(struct ath_hw *ah, enum ath9k_int *masked);\nvoid ar9003_mci_bt_gain_ctrl(struct ath_hw *ah);\nvoid ar9003_mci_set_power_awake(struct ath_hw *ah);\nvoid ar9003_mci_check_gpm_offset(struct ath_hw *ah);\nu16 ar9003_mci_get_max_txpower(struct ath_hw *ah, u8 ctlmode);\n\n#else\n\nstatic inline void ar9003_mci_stop_bt(struct ath_hw *ah, bool save_fullsleep)\n{\n}\nstatic inline void ar9003_mci_init_cal_req(struct ath_hw *ah, bool *is_reusable)\n{\n}\nstatic inline void ar9003_mci_init_cal_done(struct ath_hw *ah)\n{\n}\nstatic inline void ar9003_mci_set_full_sleep(struct ath_hw *ah)\n{\n}\nstatic inline void ar9003_mci_2g5g_switch(struct ath_hw *ah, bool wait_done)\n{\n}\nstatic inline void ar9003_mci_check_bt(struct ath_hw *ah)\n{\n}\nstatic inline bool ar9003_mci_start_reset(struct ath_hw *ah, struct ath9k_channel *chan)\n{\n\treturn false;\n}\nstatic inline int ar9003_mci_end_reset(struct ath_hw *ah, struct ath9k_channel *chan,\n\t\t\t\t       struct ath9k_hw_cal_data *caldata)\n{\n\treturn 0;\n}\nstatic inline void ar9003_mci_reset(struct ath_hw *ah, bool en_int, bool is_2g,\n\t\t\t\t    bool is_full_sleep)\n{\n}\nstatic inline void ar9003_mci_get_isr(struct ath_hw *ah, enum ath9k_int *masked)\n{\n}\nstatic inline void ar9003_mci_bt_gain_ctrl(struct ath_hw *ah)\n{\n}\nstatic inline void ar9003_mci_set_power_awake(struct ath_hw *ah)\n{\n}\nstatic inline void ar9003_mci_check_gpm_offset(struct ath_hw *ah)\n{\n}\nstatic inline u16 ar9003_mci_get_max_txpower(struct ath_hw *ah, u8 ctlmode)\n{\n\treturn -1;\n}\n#endif  \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}