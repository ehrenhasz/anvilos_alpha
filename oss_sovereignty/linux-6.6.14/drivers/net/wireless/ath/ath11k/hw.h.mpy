{
  "module_name": "hw.h",
  "hash_id": "eb860af27863e0722403cdeb2aa2ad960219d6647e6a4818d4839a1ce2e268b7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath11k/hw.h",
  "human_readable_source": " \n \n\n#ifndef ATH11K_HW_H\n#define ATH11K_HW_H\n\n#include \"hal.h\"\n#include \"wmi.h\"\n\n \n\n \n#define TARGET_NUM_VDEVS(ab)\t(ab->hw_params.num_vdevs)\n\n#define TARGET_NUM_PEERS_PDEV(ab) (ab->hw_params.num_peers + TARGET_NUM_VDEVS(ab))\n\n \n#define TARGET_NUM_PEERS_SINGLE(ab) (TARGET_NUM_PEERS_PDEV(ab))\n\n \n#define TARGET_NUM_PEERS_DBS(ab) (2 * TARGET_NUM_PEERS_PDEV(ab))\n\n \n#define TARGET_NUM_PEERS_DBS_SBS(ab)\t(3 * TARGET_NUM_PEERS_PDEV(ab))\n\n \n#define TARGET_NUM_STATIONS(ab)\t(ab->hw_params.num_peers)\n\n#define TARGET_NUM_PEERS(ab, x)\tTARGET_NUM_PEERS_##x(ab)\n#define TARGET_NUM_PEER_KEYS\t2\n#define TARGET_NUM_TIDS(ab, x)\t(2 * TARGET_NUM_PEERS(ab, x) +\t\\\n\t\t\t\t 4 * TARGET_NUM_VDEVS(ab) + 8)\n\n#define TARGET_AST_SKID_LIMIT\t16\n#define TARGET_NUM_OFFLD_PEERS\t4\n#define TARGET_NUM_OFFLD_REORDER_BUFFS 4\n\n#define TARGET_TX_CHAIN_MASK\t(BIT(0) | BIT(1) | BIT(2) | BIT(4))\n#define TARGET_RX_CHAIN_MASK\t(BIT(0) | BIT(1) | BIT(2) | BIT(4))\n#define TARGET_RX_TIMEOUT_LO_PRI\t100\n#define TARGET_RX_TIMEOUT_HI_PRI\t40\n\n#define TARGET_DECAP_MODE_RAW\t\t0\n#define TARGET_DECAP_MODE_NATIVE_WIFI\t1\n#define TARGET_DECAP_MODE_ETH\t\t2\n\n#define TARGET_SCAN_MAX_PENDING_REQS\t4\n#define TARGET_BMISS_OFFLOAD_MAX_VDEV\t3\n#define TARGET_ROAM_OFFLOAD_MAX_VDEV\t3\n#define TARGET_ROAM_OFFLOAD_MAX_AP_PROFILES\t8\n#define TARGET_GTK_OFFLOAD_MAX_VDEV\t3\n#define TARGET_NUM_MCAST_GROUPS\t\t12\n#define TARGET_NUM_MCAST_TABLE_ELEMS\t64\n#define TARGET_MCAST2UCAST_MODE\t\t2\n#define TARGET_TX_DBG_LOG_SIZE\t\t1024\n#define TARGET_RX_SKIP_DEFRAG_TIMEOUT_DUP_DETECTION_CHECK 1\n#define TARGET_VOW_CONFIG\t\t0\n#define TARGET_NUM_MSDU_DESC\t\t(2500)\n#define TARGET_MAX_FRAG_ENTRIES\t\t6\n#define TARGET_MAX_BCN_OFFLD\t\t16\n#define TARGET_NUM_WDS_ENTRIES\t\t32\n#define TARGET_DMA_BURST_SIZE\t\t1\n#define TARGET_RX_BATCHMODE\t\t1\n#define TARGET_EMA_MAX_PROFILE_PERIOD\t8\n\n#define ATH11K_HW_MAX_QUEUES\t\t4\n#define ATH11K_QUEUE_LEN\t\t4096\n\n#define ATH11k_HW_RATECODE_CCK_SHORT_PREAM_MASK  0x4\n\n#define ATH11K_FW_DIR\t\t\t\"ath11k\"\n\n#define ATH11K_BOARD_MAGIC\t\t\"QCA-ATH11K-BOARD\"\n#define ATH11K_BOARD_API2_FILE\t\t\"board-2.bin\"\n#define ATH11K_DEFAULT_BOARD_FILE\t\"board.bin\"\n#define ATH11K_DEFAULT_CAL_FILE\t\t\"caldata.bin\"\n#define ATH11K_AMSS_FILE\t\t\"amss.bin\"\n#define ATH11K_M3_FILE\t\t\t\"m3.bin\"\n#define ATH11K_REGDB_FILE_NAME\t\t\"regdb.bin\"\n\n#define ATH11K_CE_OFFSET(ab)\t(ab->mem_ce - ab->mem)\n\nenum ath11k_hw_rate_cck {\n\tATH11K_HW_RATE_CCK_LP_11M = 0,\n\tATH11K_HW_RATE_CCK_LP_5_5M,\n\tATH11K_HW_RATE_CCK_LP_2M,\n\tATH11K_HW_RATE_CCK_LP_1M,\n\tATH11K_HW_RATE_CCK_SP_11M,\n\tATH11K_HW_RATE_CCK_SP_5_5M,\n\tATH11K_HW_RATE_CCK_SP_2M,\n};\n\nenum ath11k_hw_rate_ofdm {\n\tATH11K_HW_RATE_OFDM_48M = 0,\n\tATH11K_HW_RATE_OFDM_24M,\n\tATH11K_HW_RATE_OFDM_12M,\n\tATH11K_HW_RATE_OFDM_6M,\n\tATH11K_HW_RATE_OFDM_54M,\n\tATH11K_HW_RATE_OFDM_36M,\n\tATH11K_HW_RATE_OFDM_18M,\n\tATH11K_HW_RATE_OFDM_9M,\n};\n\nenum ath11k_bus {\n\tATH11K_BUS_AHB,\n\tATH11K_BUS_PCI,\n};\n\n#define ATH11K_EXT_IRQ_GRP_NUM_MAX 11\n\nstruct hal_rx_desc;\nstruct hal_tcl_data_cmd;\n\nstruct ath11k_hw_ring_mask {\n\tu8 tx[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_mon_status[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_err[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rx_wbm_rel[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 reo_status[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 rxdma2host[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n\tu8 host2rxdma[ATH11K_EXT_IRQ_GRP_NUM_MAX];\n};\n\nstruct ath11k_hw_tcl2wbm_rbm_map {\n\tu8 tcl_ring_num;\n\tu8 wbm_ring_num;\n\tu8 rbm_id;\n};\n\nstruct ath11k_hw_hal_params {\n\tenum hal_rx_buf_return_buf_manager rx_buf_rbm;\n\tconst struct ath11k_hw_tcl2wbm_rbm_map *tcl2wbm_rbm_map;\n};\n\nstruct ath11k_hw_params {\n\tconst char *name;\n\tu16 hw_rev;\n\tu8 max_radios;\n\tu32 bdf_addr;\n\n\tstruct {\n\t\tconst char *dir;\n\t\tsize_t board_size;\n\t\tsize_t cal_offset;\n\t} fw;\n\n\tconst struct ath11k_hw_ops *hw_ops;\n\tconst struct ath11k_hw_ring_mask *ring_mask;\n\n\tbool internal_sleep_clock;\n\n\tconst struct ath11k_hw_regs *regs;\n\tu32 qmi_service_ins_id;\n\tconst struct ce_attr *host_ce_config;\n\tu32 ce_count;\n\tconst struct ce_pipe_config *target_ce_config;\n\tu32 target_ce_count;\n\tconst struct service_to_pipe *svc_to_ce_map;\n\tu32 svc_to_ce_map_len;\n\tconst struct ce_ie_addr *ce_ie_addr;\n\tconst struct ce_remap *ce_remap;\n\n\tbool single_pdev_only;\n\n\tbool rxdma1_enable;\n\tint num_rxmda_per_pdev;\n\tbool rx_mac_buf_ring;\n\tbool vdev_start_delay;\n\tbool htt_peer_map_v2;\n\n\tstruct {\n\t\tu8 fft_sz;\n\t\tu8 fft_pad_sz;\n\t\tu8 summary_pad_sz;\n\t\tu8 fft_hdr_len;\n\t\tu16 max_fft_bins;\n\t\tbool fragment_160mhz;\n\t} spectral;\n\n\tu16 interface_modes;\n\tbool supports_monitor;\n\tbool full_monitor_mode;\n\tbool supports_shadow_regs;\n\tbool idle_ps;\n\tbool supports_sta_ps;\n\tbool coldboot_cal_mm;\n\tbool coldboot_cal_ftm;\n\tbool cbcal_restart_fw;\n\tint fw_mem_mode;\n\tu32 num_vdevs;\n\tu32 num_peers;\n\tbool supports_suspend;\n\tu32 hal_desc_sz;\n\tbool supports_regdb;\n\tbool fix_l1ss;\n\tbool credit_flow;\n\tu8 max_tx_ring;\n\tconst struct ath11k_hw_hal_params *hal_params;\n\tbool supports_dynamic_smps_6ghz;\n\tbool alloc_cacheable_memory;\n\tbool supports_rssi_stats;\n\tbool fw_wmi_diag_event;\n\tbool current_cc_support;\n\tbool dbr_debug_support;\n\tbool global_reset;\n\tconst struct cfg80211_sar_capa *bios_sar_capa;\n\tbool m3_fw_support;\n\tbool fixed_bdf_addr;\n\tbool fixed_mem_region;\n\tbool static_window_map;\n\tbool hybrid_bus_type;\n\tbool fixed_fw_mem;\n\tbool support_off_channel_tx;\n\tbool supports_multi_bssid;\n\n\tstruct {\n\t\tu32 start;\n\t\tu32 end;\n\t} sram_dump;\n\n\tbool tcl_ring_retry;\n\tu32 tx_ring_size;\n\tbool smp2p_wow_exit;\n\tbool support_fw_mac_sequence;\n};\n\nstruct ath11k_hw_ops {\n\tu8 (*get_hw_mac_from_pdev_id)(int pdev_id);\n\tvoid (*wmi_init_config)(struct ath11k_base *ab,\n\t\t\t\tstruct target_resource_config *config);\n\tint (*mac_id_to_pdev_id)(struct ath11k_hw_params *hw, int mac_id);\n\tint (*mac_id_to_srng_id)(struct ath11k_hw_params *hw, int mac_id);\n\tvoid (*tx_mesh_enable)(struct ath11k_base *ab,\n\t\t\t       struct hal_tcl_data_cmd *tcl_cmd);\n\tbool (*rx_desc_get_first_msdu)(struct hal_rx_desc *desc);\n\tbool (*rx_desc_get_last_msdu)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_l3_pad_bytes)(struct hal_rx_desc *desc);\n\tu8 *(*rx_desc_get_hdr_status)(struct hal_rx_desc *desc);\n\tbool (*rx_desc_encrypt_valid)(struct hal_rx_desc *desc);\n\tu32 (*rx_desc_get_encrypt_type)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_decap_type)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_mesh_ctl)(struct hal_rx_desc *desc);\n\tbool (*rx_desc_get_ldpc_support)(struct hal_rx_desc *desc);\n\tbool (*rx_desc_get_mpdu_seq_ctl_vld)(struct hal_rx_desc *desc);\n\tbool (*rx_desc_get_mpdu_fc_valid)(struct hal_rx_desc *desc);\n\tu16 (*rx_desc_get_mpdu_start_seq_no)(struct hal_rx_desc *desc);\n\tu16 (*rx_desc_get_msdu_len)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_msdu_sgi)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_msdu_rate_mcs)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_msdu_rx_bw)(struct hal_rx_desc *desc);\n\tu32 (*rx_desc_get_msdu_freq)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_msdu_pkt_type)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_msdu_nss)(struct hal_rx_desc *desc);\n\tu8 (*rx_desc_get_mpdu_tid)(struct hal_rx_desc *desc);\n\tu16 (*rx_desc_get_mpdu_peer_id)(struct hal_rx_desc *desc);\n\tvoid (*rx_desc_copy_attn_end_tlv)(struct hal_rx_desc *fdesc,\n\t\t\t\t\t  struct hal_rx_desc *ldesc);\n\tu32 (*rx_desc_get_mpdu_start_tag)(struct hal_rx_desc *desc);\n\tu32 (*rx_desc_get_mpdu_ppdu_id)(struct hal_rx_desc *desc);\n\tvoid (*rx_desc_set_msdu_len)(struct hal_rx_desc *desc, u16 len);\n\tstruct rx_attention *(*rx_desc_get_attention)(struct hal_rx_desc *desc);\n\tu8 *(*rx_desc_get_msdu_payload)(struct hal_rx_desc *desc);\n\tvoid (*reo_setup)(struct ath11k_base *ab);\n\tu16 (*mpdu_info_get_peerid)(struct hal_rx_mpdu_info *mpdu_info);\n\tbool (*rx_desc_mac_addr2_valid)(struct hal_rx_desc *desc);\n\tu8* (*rx_desc_mpdu_start_addr2)(struct hal_rx_desc *desc);\n\tu32 (*get_ring_selector)(struct sk_buff *skb);\n};\n\nextern const struct ath11k_hw_ops ipq8074_ops;\nextern const struct ath11k_hw_ops ipq6018_ops;\nextern const struct ath11k_hw_ops qca6390_ops;\nextern const struct ath11k_hw_ops qcn9074_ops;\nextern const struct ath11k_hw_ops wcn6855_ops;\nextern const struct ath11k_hw_ops wcn6750_ops;\nextern const struct ath11k_hw_ops ipq5018_ops;\n\nextern const struct ath11k_hw_ring_mask ath11k_hw_ring_mask_ipq8074;\nextern const struct ath11k_hw_ring_mask ath11k_hw_ring_mask_qca6390;\nextern const struct ath11k_hw_ring_mask ath11k_hw_ring_mask_qcn9074;\nextern const struct ath11k_hw_ring_mask ath11k_hw_ring_mask_wcn6750;\n\nextern const struct ce_ie_addr ath11k_ce_ie_addr_ipq8074;\nextern const struct ce_ie_addr ath11k_ce_ie_addr_ipq5018;\n\nextern const struct ce_remap ath11k_ce_remap_ipq5018;\n\nextern const struct ath11k_hw_hal_params ath11k_hw_hal_params_ipq8074;\nextern const struct ath11k_hw_hal_params ath11k_hw_hal_params_qca6390;\nextern const struct ath11k_hw_hal_params ath11k_hw_hal_params_wcn6750;\n\nstatic inline\nint ath11k_hw_get_mac_from_pdev_id(struct ath11k_hw_params *hw,\n\t\t\t\t   int pdev_idx)\n{\n\tif (hw->hw_ops->get_hw_mac_from_pdev_id)\n\t\treturn hw->hw_ops->get_hw_mac_from_pdev_id(pdev_idx);\n\n\treturn 0;\n}\n\nstatic inline int ath11k_hw_mac_id_to_pdev_id(struct ath11k_hw_params *hw,\n\t\t\t\t\t      int mac_id)\n{\n\tif (hw->hw_ops->mac_id_to_pdev_id)\n\t\treturn hw->hw_ops->mac_id_to_pdev_id(hw, mac_id);\n\n\treturn 0;\n}\n\nstatic inline int ath11k_hw_mac_id_to_srng_id(struct ath11k_hw_params *hw,\n\t\t\t\t\t      int mac_id)\n{\n\tif (hw->hw_ops->mac_id_to_srng_id)\n\t\treturn hw->hw_ops->mac_id_to_srng_id(hw, mac_id);\n\n\treturn 0;\n}\n\nstruct ath11k_fw_ie {\n\t__le32 id;\n\t__le32 len;\n\tu8 data[];\n};\n\nenum ath11k_bd_ie_board_type {\n\tATH11K_BD_IE_BOARD_NAME = 0,\n\tATH11K_BD_IE_BOARD_DATA = 1,\n};\n\nenum ath11k_bd_ie_regdb_type {\n\tATH11K_BD_IE_REGDB_NAME = 0,\n\tATH11K_BD_IE_REGDB_DATA = 1,\n};\n\nenum ath11k_bd_ie_type {\n\t \n\tATH11K_BD_IE_BOARD = 0,\n\t \n\tATH11K_BD_IE_REGDB = 1,\n};\n\nstruct ath11k_hw_regs {\n\tu32 hal_tcl1_ring_base_lsb;\n\tu32 hal_tcl1_ring_base_msb;\n\tu32 hal_tcl1_ring_id;\n\tu32 hal_tcl1_ring_misc;\n\tu32 hal_tcl1_ring_tp_addr_lsb;\n\tu32 hal_tcl1_ring_tp_addr_msb;\n\tu32 hal_tcl1_ring_consumer_int_setup_ix0;\n\tu32 hal_tcl1_ring_consumer_int_setup_ix1;\n\tu32 hal_tcl1_ring_msi1_base_lsb;\n\tu32 hal_tcl1_ring_msi1_base_msb;\n\tu32 hal_tcl1_ring_msi1_data;\n\tu32 hal_tcl2_ring_base_lsb;\n\tu32 hal_tcl_ring_base_lsb;\n\n\tu32 hal_tcl_status_ring_base_lsb;\n\n\tu32 hal_reo1_ring_base_lsb;\n\tu32 hal_reo1_ring_base_msb;\n\tu32 hal_reo1_ring_id;\n\tu32 hal_reo1_ring_misc;\n\tu32 hal_reo1_ring_hp_addr_lsb;\n\tu32 hal_reo1_ring_hp_addr_msb;\n\tu32 hal_reo1_ring_producer_int_setup;\n\tu32 hal_reo1_ring_msi1_base_lsb;\n\tu32 hal_reo1_ring_msi1_base_msb;\n\tu32 hal_reo1_ring_msi1_data;\n\tu32 hal_reo2_ring_base_lsb;\n\tu32 hal_reo1_aging_thresh_ix_0;\n\tu32 hal_reo1_aging_thresh_ix_1;\n\tu32 hal_reo1_aging_thresh_ix_2;\n\tu32 hal_reo1_aging_thresh_ix_3;\n\n\tu32 hal_reo1_ring_hp;\n\tu32 hal_reo1_ring_tp;\n\tu32 hal_reo2_ring_hp;\n\n\tu32 hal_reo_tcl_ring_base_lsb;\n\tu32 hal_reo_tcl_ring_hp;\n\n\tu32 hal_reo_status_ring_base_lsb;\n\tu32 hal_reo_status_hp;\n\n\tu32 hal_reo_cmd_ring_base_lsb;\n\tu32 hal_reo_cmd_ring_hp;\n\n\tu32 hal_sw2reo_ring_base_lsb;\n\tu32 hal_sw2reo_ring_hp;\n\n\tu32 hal_seq_wcss_umac_ce0_src_reg;\n\tu32 hal_seq_wcss_umac_ce0_dst_reg;\n\tu32 hal_seq_wcss_umac_ce1_src_reg;\n\tu32 hal_seq_wcss_umac_ce1_dst_reg;\n\n\tu32 hal_wbm_idle_link_ring_base_lsb;\n\tu32 hal_wbm_idle_link_ring_misc;\n\n\tu32 hal_wbm_release_ring_base_lsb;\n\n\tu32 hal_wbm0_release_ring_base_lsb;\n\tu32 hal_wbm1_release_ring_base_lsb;\n\n\tu32 pcie_qserdes_sysclk_en_sel;\n\tu32 pcie_pcs_osc_dtct_config_base;\n\n\tu32 hal_shadow_base_addr;\n\tu32 hal_reo1_misc_ctl;\n};\n\nextern const struct ath11k_hw_regs ipq8074_regs;\nextern const struct ath11k_hw_regs qca6390_regs;\nextern const struct ath11k_hw_regs qcn9074_regs;\nextern const struct ath11k_hw_regs wcn6855_regs;\nextern const struct ath11k_hw_regs wcn6750_regs;\nextern const struct ath11k_hw_regs ipq5018_regs;\n\nstatic inline const char *ath11k_bd_ie_type_str(enum ath11k_bd_ie_type type)\n{\n\tswitch (type) {\n\tcase ATH11K_BD_IE_BOARD:\n\t\treturn \"board data\";\n\tcase ATH11K_BD_IE_REGDB:\n\t\treturn \"regdb data\";\n\t}\n\n\treturn \"unknown\";\n}\n\nextern const struct cfg80211_sar_capa ath11k_hw_sar_capa_wcn6855;\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}