{
  "module_name": "hw.c",
  "hash_id": "bcf3bd8a1c0ad6d50ea9e8782733d88510fa7c2aa23ed998ec3d79c36d882abb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/hw.c",
  "human_readable_source": " \n\n#include <linux/export.h>\n#include <asm/unaligned.h>\n\n#include \"ath.h\"\n#include \"reg.h\"\n\n#define REG_READ\t\t\t(common->ops->read)\n#define REG_WRITE(_ah, _reg, _val)\t(common->ops->write)(_ah, _val, _reg)\n\n \nvoid ath_hw_setbssidmask(struct ath_common *common)\n{\n\tvoid *ah = common->ah;\n\tu32 id1;\n\n\tREG_WRITE(ah, AR_STA_ID0, get_unaligned_le32(common->macaddr));\n\tid1 = REG_READ(ah, AR_STA_ID1) & ~AR_STA_ID1_SADH_MASK;\n\tid1 |= get_unaligned_le16(common->macaddr + 4);\n\tREG_WRITE(ah, AR_STA_ID1, id1);\n\n\tREG_WRITE(ah, AR_BSSMSKL, get_unaligned_le32(common->bssidmask));\n\tREG_WRITE(ah, AR_BSSMSKU, get_unaligned_le16(common->bssidmask + 4));\n}\nEXPORT_SYMBOL(ath_hw_setbssidmask);\n\n\n \nvoid ath_hw_cycle_counters_update(struct ath_common *common)\n{\n\tu32 cycles, busy, rx, tx;\n\tvoid *ah = common->ah;\n\n\t \n\tREG_WRITE(ah, AR_MIBC, AR_MIBC_FMC);\n\n\t \n\tcycles = REG_READ(ah, AR_CCCNT);\n\tbusy = REG_READ(ah, AR_RCCNT);\n\trx = REG_READ(ah, AR_RFCNT);\n\ttx = REG_READ(ah, AR_TFCNT);\n\n\t \n\tREG_WRITE(ah, AR_CCCNT, 0);\n\tREG_WRITE(ah, AR_RFCNT, 0);\n\tREG_WRITE(ah, AR_RCCNT, 0);\n\tREG_WRITE(ah, AR_TFCNT, 0);\n\n\t \n\tREG_WRITE(ah, AR_MIBC, 0);\n\n\t \n\tcommon->cc_ani.cycles += cycles;\n\tcommon->cc_ani.rx_busy += busy;\n\tcommon->cc_ani.rx_frame += rx;\n\tcommon->cc_ani.tx_frame += tx;\n\n\tcommon->cc_survey.cycles += cycles;\n\tcommon->cc_survey.rx_busy += busy;\n\tcommon->cc_survey.rx_frame += rx;\n\tcommon->cc_survey.tx_frame += tx;\n}\nEXPORT_SYMBOL(ath_hw_cycle_counters_update);\n\nint32_t ath_hw_get_listen_time(struct ath_common *common)\n{\n\tstruct ath_cycle_counters *cc = &common->cc_ani;\n\tint32_t listen_time;\n\n\tlisten_time = (cc->cycles - cc->rx_frame - cc->tx_frame) /\n\t\t      (common->clockrate * 1000);\n\n\tmemset(cc, 0, sizeof(*cc));\n\n\treturn listen_time;\n}\nEXPORT_SYMBOL(ath_hw_get_listen_time);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}