{
  "module_name": "ath.h",
  "hash_id": "857fc047c9f2eda377820525d4309f7edff59c81553464ac75f11682034384eb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/ath.h",
  "human_readable_source": " \n\n#ifndef ATH_H\n#define ATH_H\n\n#include <linux/etherdevice.h>\n#include <linux/skbuff.h>\n#include <linux/if_ether.h>\n#include <linux/spinlock.h>\n#include <net/mac80211.h>\n\n \n#define\tATH_KEYMAX\t        128      \n\nstruct ath_ani {\n\tbool caldone;\n\tunsigned int longcal_timer;\n\tunsigned int shortcal_timer;\n\tunsigned int resetcal_timer;\n\tunsigned int checkani_timer;\n\tstruct timer_list timer;\n};\n\nstruct ath_cycle_counters {\n\tu32 cycles;\n\tu32 rx_busy;\n\tu32 rx_frame;\n\tu32 tx_frame;\n};\n\nenum ath_device_state {\n\tATH_HW_UNAVAILABLE,\n\tATH_HW_INITIALIZED,\n};\n\nenum ath_op_flags {\n\tATH_OP_INVALID,\n\tATH_OP_BEACONS,\n\tATH_OP_ANI_RUN,\n\tATH_OP_PRIM_STA_VIF,\n\tATH_OP_HW_RESET,\n\tATH_OP_SCANNING,\n\tATH_OP_MULTI_CHANNEL,\n\tATH_OP_WOW_ENABLED,\n};\n\nenum ath_bus_type {\n\tATH_PCI,\n\tATH_AHB,\n\tATH_USB,\n};\n\nstruct reg_dmn_pair_mapping {\n\tu16 reg_domain;\n\tu16 reg_5ghz_ctl;\n\tu16 reg_2ghz_ctl;\n};\n\nstruct ath_regulatory {\n\tchar alpha2[2];\n\tenum nl80211_dfs_regions region;\n\tu16 country_code;\n\tu16 max_power_level;\n\tu16 current_rd;\n\tint16_t power_limit;\n\tstruct reg_dmn_pair_mapping *regpair;\n};\n\nenum ath_crypt_caps {\n\tATH_CRYPT_CAP_CIPHER_AESCCM\t\t= BIT(0),\n\tATH_CRYPT_CAP_MIC_COMBINED\t\t= BIT(1),\n};\n\nstruct ath_keyval {\n\tu8 kv_type;\n\tu8 kv_pad;\n\tu16 kv_len;\n\tstruct_group(kv_values,\n\t\tu8 kv_val[16];  \n\t\tu8 kv_mic[8];  \n\t\tu8 kv_txmic[8];  \n\t);\n};\n\nenum ath_cipher {\n\tATH_CIPHER_WEP = 0,\n\tATH_CIPHER_AES_OCB = 1,\n\tATH_CIPHER_AES_CCM = 2,\n\tATH_CIPHER_CKIP = 3,\n\tATH_CIPHER_TKIP = 4,\n\tATH_CIPHER_CLR = 5,\n\tATH_CIPHER_MIC = 127\n};\n\n \nstruct ath_ops {\n\tunsigned int (*read)(void *, u32 reg_offset);\n\tvoid (*multi_read)(void *, u32 *addr, u32 *val, u16 count);\n\tvoid (*write)(void *, u32 val, u32 reg_offset);\n\tvoid (*enable_write_buffer)(void *);\n\tvoid (*write_flush) (void *);\n\tu32 (*rmw)(void *, u32 reg_offset, u32 set, u32 clr);\n\tvoid (*enable_rmw_buffer)(void *);\n\tvoid (*rmw_flush) (void *);\n\n};\n\nstruct ath_common;\nstruct ath_bus_ops;\n\nstruct ath_ps_ops {\n\tvoid (*wakeup)(struct ath_common *common);\n\tvoid (*restore)(struct ath_common *common);\n};\n\nstruct ath_common {\n\tvoid *ah;\n\tvoid *priv;\n\tstruct ieee80211_hw *hw;\n\tint debug_mask;\n\tenum ath_device_state state;\n\tunsigned long op_flags;\n\n\tstruct ath_ani ani;\n\n\tu16 cachelsz;\n\tu16 curaid;\n\tu8 macaddr[ETH_ALEN];\n\tu8 curbssid[ETH_ALEN] __aligned(2);\n\tu8 bssidmask[ETH_ALEN];\n\n\tu32 rx_bufsize;\n\n\tu32 keymax;\n\tDECLARE_BITMAP(keymap, ATH_KEYMAX);\n\tDECLARE_BITMAP(tkip_keymap, ATH_KEYMAX);\n\tDECLARE_BITMAP(ccmp_keymap, ATH_KEYMAX);\n\tenum ath_crypt_caps crypt_caps;\n\n\tunsigned int clockrate;\n\n\tspinlock_t cc_lock;\n\tstruct ath_cycle_counters cc_ani;\n\tstruct ath_cycle_counters cc_survey;\n\n\tstruct ath_regulatory regulatory;\n\tstruct ath_regulatory reg_world_copy;\n\tconst struct ath_ops *ops;\n\tconst struct ath_bus_ops *bus_ops;\n\tconst struct ath_ps_ops *ps_ops;\n\n\tbool btcoex_enabled;\n\tbool disable_ani;\n\tbool bt_ant_diversity;\n\n\tint last_rssi;\n\tstruct ieee80211_supported_band sbands[NUM_NL80211_BANDS];\n};\n\nstatic inline const struct ath_ps_ops *ath_ps_ops(struct ath_common *common)\n{\n\treturn common->ps_ops;\n}\n\nstruct sk_buff *ath_rxbuf_alloc(struct ath_common *common,\n\t\t\t\tu32 len,\n\t\t\t\tgfp_t gfp_mask);\nbool ath_is_mybeacon(struct ath_common *common, struct ieee80211_hdr *hdr);\n\nvoid ath_hw_setbssidmask(struct ath_common *common);\nvoid ath_key_delete(struct ath_common *common, u8 hw_key_idx);\nint ath_key_config(struct ath_common *common,\n\t\t\t  struct ieee80211_vif *vif,\n\t\t\t  struct ieee80211_sta *sta,\n\t\t\t  struct ieee80211_key_conf *key);\nbool ath_hw_keyreset(struct ath_common *common, u16 entry);\nbool ath_hw_keysetmac(struct ath_common *common, u16 entry, const u8 *mac);\nvoid ath_hw_cycle_counters_update(struct ath_common *common);\nint32_t ath_hw_get_listen_time(struct ath_common *common);\n\n__printf(3, 4)\nvoid ath_printk(const char *level, const struct ath_common *common,\n\t\tconst char *fmt, ...);\n\n#define ath_emerg(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_EMERG, common, fmt, ##__VA_ARGS__)\n#define ath_alert(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_ALERT, common, fmt, ##__VA_ARGS__)\n#define ath_crit(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_CRIT, common, fmt, ##__VA_ARGS__)\n#define ath_err(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_ERR, common, fmt, ##__VA_ARGS__)\n#define ath_warn(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_WARNING, common, fmt, ##__VA_ARGS__)\n#define ath_notice(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_NOTICE, common, fmt, ##__VA_ARGS__)\n#define ath_info(common, fmt, ...)\t\t\t\t\\\n\tath_printk(KERN_INFO, common, fmt, ##__VA_ARGS__)\n\n \nenum ATH_DEBUG {\n\tATH_DBG_RESET\t\t= 0x00000001,\n\tATH_DBG_QUEUE\t\t= 0x00000002,\n\tATH_DBG_EEPROM\t\t= 0x00000004,\n\tATH_DBG_CALIBRATE\t= 0x00000008,\n\tATH_DBG_INTERRUPT\t= 0x00000010,\n\tATH_DBG_REGULATORY\t= 0x00000020,\n\tATH_DBG_ANI\t\t= 0x00000040,\n\tATH_DBG_XMIT\t\t= 0x00000080,\n\tATH_DBG_BEACON\t\t= 0x00000100,\n\tATH_DBG_CONFIG\t\t= 0x00000200,\n\tATH_DBG_FATAL\t\t= 0x00000400,\n\tATH_DBG_PS\t\t= 0x00000800,\n\tATH_DBG_BTCOEX\t\t= 0x00001000,\n\tATH_DBG_WMI\t\t= 0x00002000,\n\tATH_DBG_BSTUCK\t\t= 0x00004000,\n\tATH_DBG_MCI\t\t= 0x00008000,\n\tATH_DBG_DFS\t\t= 0x00010000,\n\tATH_DBG_WOW\t\t= 0x00020000,\n\tATH_DBG_CHAN_CTX\t= 0x00040000,\n\tATH_DBG_DYNACK\t\t= 0x00080000,\n\tATH_DBG_SPECTRAL_SCAN\t= 0x00100000,\n\tATH_DBG_ANY\t\t= 0xffffffff\n};\n\n#define ATH_DBG_DEFAULT (ATH_DBG_FATAL)\n#define ATH_DBG_MAX_LEN 512\n\n#ifdef CONFIG_ATH_DEBUG\n\n#define ath_dbg(common, dbg_mask, fmt, ...)\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif ((common)->debug_mask & ATH_DBG_##dbg_mask)\t\t\t\\\n\t\tath_printk(KERN_DEBUG, common, fmt, ##__VA_ARGS__);\t\\\n} while (0)\n\n#define ATH_DBG_WARN(foo, arg...) WARN(foo, arg)\n#define ATH_DBG_WARN_ON_ONCE(foo) WARN_ON_ONCE(foo)\n\n#else\n\nstatic inline  __attribute__ ((format (printf, 3, 4)))\nvoid _ath_dbg(struct ath_common *common, enum ATH_DEBUG dbg_mask,\n\t     const char *fmt, ...)\n{\n}\n#define ath_dbg(common, dbg_mask, fmt, ...)\t\t\t\t\\\n\t_ath_dbg(common, ATH_DBG_##dbg_mask, fmt, ##__VA_ARGS__)\n\n#define ATH_DBG_WARN(foo, arg...) do {} while (0)\n#define ATH_DBG_WARN_ON_ONCE(foo) ({\t\t\t\t\\\n\tint __ret_warn_once = !!(foo);\t\t\t\t\\\n\tunlikely(__ret_warn_once);\t\t\t\t\\\n})\n\n#endif  \n\n \n#ifdef CONFIG_ATH_DEBUG\nconst char *ath_opmode_to_string(enum nl80211_iftype opmode);\n#else\nstatic inline const char *ath_opmode_to_string(enum nl80211_iftype opmode)\n{\n\treturn \"UNKNOWN\";\n}\n#endif\n\nextern const char *ath_bus_type_strings[];\nstatic inline const char *ath_bus_type_to_string(enum ath_bus_type bustype)\n{\n\treturn ath_bus_type_strings[bustype];\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}