{
  "module_name": "wil6210.h",
  "hash_id": "991e43a6dff0958344cc19c268ccf741f2c938d4abfb3ebdee752ec96f99da32",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/ath/wil6210/wil6210.h",
  "human_readable_source": " \n \n\n#ifndef __WIL6210_H__\n#define __WIL6210_H__\n\n#include <linux/etherdevice.h>\n#include <linux/netdevice.h>\n#include <linux/wireless.h>\n#include <net/cfg80211.h>\n#include <linux/timex.h>\n#include <linux/types.h>\n#include <linux/irqreturn.h>\n#include \"wmi.h\"\n#include \"wil_platform.h\"\n#include \"fw.h\"\n\nextern bool no_fw_recovery;\nextern unsigned int mtu_max;\nextern unsigned short rx_ring_overflow_thrsh;\nextern int agg_wsize;\nextern bool rx_align_2;\nextern bool rx_large_buf;\nextern bool debug_fw;\nextern bool disable_ap_sme;\nextern bool ftm_mode;\nextern bool drop_if_ring_full;\nextern uint max_assoc_sta;\n\nstruct wil6210_priv;\nstruct wil6210_vif;\nunion wil_tx_desc;\n\n#define WIL_NAME \"wil6210\"\n\n#define WIL_FW_NAME_DEFAULT \"wil6210.fw\"\n#define WIL_FW_NAME_FTM_DEFAULT \"wil6210_ftm.fw\"\n\n#define WIL_FW_NAME_SPARROW_PLUS \"wil6210_sparrow_plus.fw\"\n#define WIL_FW_NAME_FTM_SPARROW_PLUS \"wil6210_sparrow_plus_ftm.fw\"\n\n#define WIL_FW_NAME_TALYN \"wil6436.fw\"\n#define WIL_FW_NAME_FTM_TALYN \"wil6436_ftm.fw\"\n#define WIL_BRD_NAME_TALYN \"wil6436.brd\"\n\n#define WIL_BOARD_FILE_NAME \"wil6210.brd\"  \n\n#define WIL_DEFAULT_BUS_REQUEST_KBPS 128000  \n#define WIL_MAX_BUS_REQUEST_KBPS 800000  \n\n#define WIL_NUM_LATENCY_BINS 200\n\n \n#define WIL_MAX_VIFS 4\n\n \nstatic inline u32 WIL_GET_BITS(u32 x, int b0, int b1)\n{\n\treturn (x >> b0) & ((1 << (b1 - b0 + 1)) - 1);\n}\n\n#define WIL6210_MIN_MEM_SIZE (2 * 1024 * 1024UL)\n#define WIL6210_MAX_MEM_SIZE (4 * 1024 * 1024UL)\n\n#define WIL_TX_Q_LEN_DEFAULT\t\t(4000)\n#define WIL_RX_RING_SIZE_ORDER_DEFAULT\t(10)\n#define WIL_RX_RING_SIZE_ORDER_TALYN_DEFAULT\t(11)\n#define WIL_TX_RING_SIZE_ORDER_DEFAULT\t(12)\n#define WIL_BCAST_RING_SIZE_ORDER_DEFAULT\t(7)\n#define WIL_BCAST_MCS0_LIMIT\t\t(1024)  \n \n#define WIL_RING_SIZE_ORDER_MIN\t(5)\n#define WIL_RING_SIZE_ORDER_MAX\t(15)\n#define WIL6210_MAX_TX_RINGS\t(24)  \n#define WIL6210_MAX_CID\t\t(20)  \n#define WIL6210_RX_DESC_MAX_CID\t(8)   \n#define WIL_MAX_AMPDU_SIZE\t(64 * 1024)  \n#define WIL_MAX_AGG_WSIZE\t(32)  \n#define WIL_MAX_AMPDU_SIZE_128\t(128 * 1024)  \n#define WIL_MAX_AGG_WSIZE_64\t(64)  \n#define WIL6210_MAX_STATUS_RINGS\t(8)\n#define WIL_WMI_CALL_GENERAL_TO_MS 100\n#define WIL_EXTENDED_MCS_26 (26)  \n#define WIL_BASE_MCS_FOR_EXTENDED_26 (7)  \n#define WIL_EXTENDED_MCS_CHECK(x) (((x) == WIL_EXTENDED_MCS_26) ? \"12.1\" : #x)\n\n \n#define WIL_MAX_MPDU_OVERHEAD\t(62)\n\nstruct wil_suspend_count_stats {\n\tunsigned long successful_suspends;\n\tunsigned long successful_resumes;\n\tunsigned long failed_suspends;\n\tunsigned long failed_resumes;\n};\n\nstruct wil_suspend_stats {\n\tstruct wil_suspend_count_stats r_off;\n\tstruct wil_suspend_count_stats r_on;\n\tunsigned long rejected_by_device;  \n\tunsigned long rejected_by_host;\n};\n\n \nstatic inline u32 wil_mtu2macbuf(u32 mtu)\n{\n\treturn ALIGN(mtu + WIL_MAX_MPDU_OVERHEAD, 8);\n}\n\n \n#define WIL_MAX_ETH_MTU\t\t(IEEE80211_MAX_DATA_LEN_DMG - 8)\n \n#define WIL6210_ITR_TRSH_MAX (5000000)\n#define WIL6210_ITR_TX_INTERFRAME_TIMEOUT_DEFAULT (13)  \n#define WIL6210_ITR_RX_INTERFRAME_TIMEOUT_DEFAULT (13)  \n#define WIL6210_ITR_TX_MAX_BURST_DURATION_DEFAULT (500)  \n#define WIL6210_ITR_RX_MAX_BURST_DURATION_DEFAULT (500)  \n#define WIL6210_FW_RECOVERY_RETRIES\t(5)  \n#define WIL6210_FW_RECOVERY_TO\tmsecs_to_jiffies(5000)\n#define WIL6210_SCAN_TO\t\tmsecs_to_jiffies(10000)\n#define WIL6210_DISCONNECT_TO_MS (2000)\n#define WIL6210_RX_HIGH_TRSH_INIT\t\t(0)\n#define WIL6210_RX_HIGH_TRSH_DEFAULT \\\n\t\t\t\t(1 << (WIL_RX_RING_SIZE_ORDER_DEFAULT - 3))\n#define WIL_MAX_DMG_AID 254  \n \n\n \n\n \n#define WIL6210_FW_HOST_OFF      (0x880000UL)\n\n#define HOSTADDR(fwaddr)        (fwaddr - WIL6210_FW_HOST_OFF)\n\n \nstruct RGF_ICR {\n\tu32 ICC;  \n\tu32 ICR;  \n\tu32 ICM;  \n\tu32 ICS;  \n\tu32 IMV;  \n\tu32 IMS;  \n\tu32 IMC;  \n} __packed;\n\n \n#define RGF_USER_USAGE_1\t\t(0x880004)\n#define RGF_USER_USAGE_2\t\t(0x880008)\n#define RGF_USER_USAGE_6\t\t(0x880018)\n\t#define BIT_USER_OOB_MODE\t\tBIT(31)\n\t#define BIT_USER_OOB_R2_MODE\t\tBIT(30)\n#define RGF_USER_USAGE_8\t\t(0x880020)\n\t#define BIT_USER_PREVENT_DEEP_SLEEP\tBIT(0)\n\t#define BIT_USER_SUPPORT_T_POWER_ON_0\tBIT(1)\n\t#define BIT_USER_EXT_CLK\t\tBIT(2)\n#define RGF_USER_HW_MACHINE_STATE\t(0x8801dc)\n\t#define HW_MACHINE_BOOT_DONE\t(0x3fffffd)\n#define RGF_USER_USER_CPU_0\t\t(0x8801e0)\n\t#define BIT_USER_USER_CPU_MAN_RST\tBIT(1)  \n#define RGF_USER_CPU_PC\t\t\t(0x8801e8)\n#define RGF_USER_MAC_CPU_0\t\t(0x8801fc)\n\t#define BIT_USER_MAC_CPU_MAN_RST\tBIT(1)  \n#define RGF_USER_USER_SCRATCH_PAD\t(0x8802bc)\n#define RGF_USER_BL\t\t\t(0x880A3C)  \n#define RGF_USER_FW_REV_ID\t\t(0x880a8c)  \n#define RGF_USER_FW_CALIB_RESULT\t(0x880a90)  \n\t#define CALIB_RESULT_SIGNATURE\t(0x11)\n#define RGF_USER_CLKS_CTL_0\t\t(0x880abc)\n\t#define BIT_USER_CLKS_CAR_AHB_SW_SEL\tBIT(1)  \n\t#define BIT_USER_CLKS_RST_PWGD\tBIT(11)  \n#define RGF_USER_CLKS_CTL_SW_RST_VEC_0\t(0x880b04)\n#define RGF_USER_CLKS_CTL_SW_RST_VEC_1\t(0x880b08)\n#define RGF_USER_CLKS_CTL_SW_RST_VEC_2\t(0x880b0c)\n#define RGF_USER_CLKS_CTL_SW_RST_VEC_3\t(0x880b10)\n#define RGF_USER_CLKS_CTL_SW_RST_MASK_0\t(0x880b14)\n\t#define BIT_HPAL_PERST_FROM_PAD\tBIT(6)\n\t#define BIT_CAR_PERST_RST\tBIT(7)\n#define RGF_USER_USER_ICR\t\t(0x880b4c)  \n\t#define BIT_USER_USER_ICR_SW_INT_2\tBIT(18)\n#define RGF_USER_CLKS_CTL_EXT_SW_RST_VEC_0\t(0x880c18)\n#define RGF_USER_CLKS_CTL_EXT_SW_RST_VEC_1\t(0x880c2c)\n#define RGF_USER_SPARROW_M_4\t\t\t(0x880c50)  \n\t#define BIT_SPARROW_M_4_SEL_SLEEP_OR_REF\tBIT(2)\n#define RGF_USER_OTP_HW_RD_MACHINE_1\t(0x880ce0)\n\t#define BIT_OTP_SIGNATURE_ERR_TALYN_MB\t\tBIT(0)\n\t#define BIT_OTP_HW_SECTION_DONE_TALYN_MB\tBIT(2)\n\t#define BIT_NO_FLASH_INDICATION\t\t\tBIT(8)\n#define RGF_USER_XPM_IFC_RD_TIME1\t(0x880cec)\n#define RGF_USER_XPM_IFC_RD_TIME2\t(0x880cf0)\n#define RGF_USER_XPM_IFC_RD_TIME3\t(0x880cf4)\n#define RGF_USER_XPM_IFC_RD_TIME4\t(0x880cf8)\n#define RGF_USER_XPM_IFC_RD_TIME5\t(0x880cfc)\n#define RGF_USER_XPM_IFC_RD_TIME6\t(0x880d00)\n#define RGF_USER_XPM_IFC_RD_TIME7\t(0x880d04)\n#define RGF_USER_XPM_IFC_RD_TIME8\t(0x880d08)\n#define RGF_USER_XPM_IFC_RD_TIME9\t(0x880d0c)\n#define RGF_USER_XPM_IFC_RD_TIME10\t(0x880d10)\n#define RGF_USER_XPM_RD_DOUT_SAMPLE_TIME (0x880d64)\n\n#define RGF_DMA_EP_TX_ICR\t\t(0x881bb4)  \n\t#define BIT_DMA_EP_TX_ICR_TX_DONE\tBIT(0)\n\t#define BIT_DMA_EP_TX_ICR_TX_DONE_N(n)\tBIT(n+1)  \n#define RGF_DMA_EP_RX_ICR\t\t(0x881bd0)  \n\t#define BIT_DMA_EP_RX_ICR_RX_DONE\tBIT(0)\n\t#define BIT_DMA_EP_RX_ICR_RX_HTRSH\tBIT(1)\n#define RGF_DMA_EP_MISC_ICR\t\t(0x881bec)  \n\t#define BIT_DMA_EP_MISC_ICR_RX_HTRSH\tBIT(0)\n\t#define BIT_DMA_EP_MISC_ICR_TX_NO_ACT\tBIT(1)\n\t#define BIT_DMA_EP_MISC_ICR_HALP\tBIT(27)\n\t#define BIT_DMA_EP_MISC_ICR_FW_INT(n)\tBIT(28+n)  \n\n \n#define RGF_DMA_ITR_CNT_TRSH\t\t(0x881c5c)\n#define RGF_DMA_ITR_CNT_DATA\t\t(0x881c60)\n#define RGF_DMA_ITR_CNT_CRL\t\t(0x881c64)\n\t#define BIT_DMA_ITR_CNT_CRL_EN\t\tBIT(0)\n\t#define BIT_DMA_ITR_CNT_CRL_EXT_TICK\tBIT(1)\n\t#define BIT_DMA_ITR_CNT_CRL_FOREVER\tBIT(2)\n\t#define BIT_DMA_ITR_CNT_CRL_CLR\t\tBIT(3)\n\t#define BIT_DMA_ITR_CNT_CRL_REACH_TRSH\tBIT(4)\n\n \n#define RGF_DMA_OFUL_NID_0\t\t(0x881cd4)\n\t#define BIT_DMA_OFUL_NID_0_RX_EXT_TR_EN\t\tBIT(0)\n\t#define BIT_DMA_OFUL_NID_0_TX_EXT_TR_EN\t\tBIT(1)\n\t#define BIT_DMA_OFUL_NID_0_RX_EXT_A3_SRC\tBIT(2)\n\t#define BIT_DMA_OFUL_NID_0_TX_EXT_A3_SRC\tBIT(3)\n\n \n#define RGF_DMA_ITR_TX_DESQ_NO_MOD\t\t(0x881d40)\n#define RGF_DMA_ITR_TX_CNT_TRSH\t\t\t(0x881d34)\n#define RGF_DMA_ITR_TX_CNT_DATA\t\t\t(0x881d38)\n#define RGF_DMA_ITR_TX_CNT_CTL\t\t\t(0x881d3c)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_EN\t\tBIT(0)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_EXT_TIC_SEL\tBIT(1)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_FOREVER\t\tBIT(2)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_CLR\t\tBIT(3)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_REACHED_TRESH\tBIT(4)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_CROSS_EN\t\tBIT(5)\n\t#define BIT_DMA_ITR_TX_CNT_CTL_FREE_RUNNIG\tBIT(6)\n#define RGF_DMA_ITR_TX_IDL_CNT_TRSH\t\t\t(0x881d60)\n#define RGF_DMA_ITR_TX_IDL_CNT_DATA\t\t\t(0x881d64)\n#define RGF_DMA_ITR_TX_IDL_CNT_CTL\t\t\t(0x881d68)\n\t#define BIT_DMA_ITR_TX_IDL_CNT_CTL_EN\t\t\tBIT(0)\n\t#define BIT_DMA_ITR_TX_IDL_CNT_CTL_EXT_TIC_SEL\t\tBIT(1)\n\t#define BIT_DMA_ITR_TX_IDL_CNT_CTL_FOREVER\t\tBIT(2)\n\t#define BIT_DMA_ITR_TX_IDL_CNT_CTL_CLR\t\t\tBIT(3)\n\t#define BIT_DMA_ITR_TX_IDL_CNT_CTL_REACHED_TRESH\tBIT(4)\n#define RGF_DMA_ITR_RX_DESQ_NO_MOD\t\t(0x881d50)\n#define RGF_DMA_ITR_RX_CNT_TRSH\t\t\t(0x881d44)\n#define RGF_DMA_ITR_RX_CNT_DATA\t\t\t(0x881d48)\n#define RGF_DMA_ITR_RX_CNT_CTL\t\t\t(0x881d4c)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_EN\t\tBIT(0)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_EXT_TIC_SEL\tBIT(1)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_FOREVER\t\tBIT(2)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_CLR\t\tBIT(3)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_REACHED_TRESH\tBIT(4)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_CROSS_EN\t\tBIT(5)\n\t#define BIT_DMA_ITR_RX_CNT_CTL_FREE_RUNNIG\tBIT(6)\n#define RGF_DMA_ITR_RX_IDL_CNT_TRSH\t\t\t(0x881d54)\n#define RGF_DMA_ITR_RX_IDL_CNT_DATA\t\t\t(0x881d58)\n#define RGF_DMA_ITR_RX_IDL_CNT_CTL\t\t\t(0x881d5c)\n\t#define BIT_DMA_ITR_RX_IDL_CNT_CTL_EN\t\t\tBIT(0)\n\t#define BIT_DMA_ITR_RX_IDL_CNT_CTL_EXT_TIC_SEL\t\tBIT(1)\n\t#define BIT_DMA_ITR_RX_IDL_CNT_CTL_FOREVER\t\tBIT(2)\n\t#define BIT_DMA_ITR_RX_IDL_CNT_CTL_CLR\t\t\tBIT(3)\n\t#define BIT_DMA_ITR_RX_IDL_CNT_CTL_REACHED_TRESH\tBIT(4)\n#define RGF_DMA_MISC_CTL\t\t\t\t(0x881d6c)\n\t#define BIT_OFUL34_RDY_VALID_BUG_FIX_EN\t\t\tBIT(7)\n\n#define RGF_DMA_PSEUDO_CAUSE\t\t(0x881c68)\n#define RGF_DMA_PSEUDO_CAUSE_MASK_SW\t(0x881c6c)\n#define RGF_DMA_PSEUDO_CAUSE_MASK_FW\t(0x881c70)\n\t#define BIT_DMA_PSEUDO_CAUSE_RX\t\tBIT(0)\n\t#define BIT_DMA_PSEUDO_CAUSE_TX\t\tBIT(1)\n\t#define BIT_DMA_PSEUDO_CAUSE_MISC\tBIT(2)\n\n#define RGF_HP_CTRL\t\t\t(0x88265c)\n#define RGF_PAL_UNIT_ICR\t\t(0x88266c)  \n#define RGF_PCIE_LOS_COUNTER_CTL\t(0x882dc4)\n\n \n#define RGF_MAC_MTRL_COUNTER_0\t\t(0x886aa8)\n\n#define RGF_CAF_ICR_TALYN_MB\t\t(0x8893d4)  \n#define RGF_CAF_ICR\t\t\t(0x88946c)  \n#define RGF_CAF_OSC_CONTROL\t\t(0x88afa4)\n\t#define BIT_CAF_OSC_XTAL_EN\t\tBIT(0)\n#define RGF_CAF_PLL_LOCK_STATUS\t\t(0x88afec)\n\t#define BIT_CAF_OSC_DIG_XTAL_STABLE\tBIT(0)\n\n#define RGF_OTP_QC_SECURED\t\t(0x8a0038)\n\t#define BIT_BOOT_FROM_ROM\t\tBIT(31)\n\n \n#define RGF_SCM_PTRS_SUBQ_RD_PTR\t(0x8b4000)\n#define RGF_SCM_PTRS_COMPQ_RD_PTR\t(0x8b4100)\n#define RGF_DMA_SCM_SUBQ_CONS\t\t(0x8b60ec)\n#define RGF_DMA_SCM_COMPQ_PROD\t\t(0x8b616c)\n\n#define RGF_INT_COUNT_ON_SPECIAL_EVT\t(0x8b62d8)\n\n#define RGF_INT_CTRL_INT_GEN_CFG_0\t(0x8bc000)\n#define RGF_INT_CTRL_INT_GEN_CFG_1\t(0x8bc004)\n#define RGF_INT_GEN_TIME_UNIT_LIMIT\t(0x8bc0c8)\n\n#define RGF_INT_GEN_CTRL\t\t(0x8bc0ec)\n\t#define BIT_CONTROL_0\t\t\tBIT(0)\n\n \n#define RGF_INT_GEN_RX_ICR\t\t(0x8bc0f4)\n\t#define BIT_RX_STATUS_IRQ BIT(WIL_RX_STATUS_IRQ_IDX)\n#define RGF_INT_GEN_TX_ICR\t\t(0x8bc110)\n\t#define BIT_TX_STATUS_IRQ BIT(WIL_TX_STATUS_IRQ_IDX)\n#define RGF_INT_CTRL_RX_INT_MASK\t(0x8bc12c)\n#define RGF_INT_CTRL_TX_INT_MASK\t(0x8bc130)\n\n#define RGF_INT_GEN_IDLE_TIME_LIMIT\t(0x8bc134)\n\n#define USER_EXT_USER_PMU_3\t\t(0x88d00c)\n\t#define BIT_PMU_DEVICE_RDY\t\tBIT(0)\n\n#define RGF_USER_JTAG_DEV_ID\t(0x880b34)  \n\t#define JTAG_DEV_ID_SPARROW\t(0x2632072f)\n\t#define JTAG_DEV_ID_TALYN\t(0x7e0e1)\n\t#define JTAG_DEV_ID_TALYN_MB\t(0x1007e0e1)\n\n#define RGF_USER_REVISION_ID\t\t(0x88afe4)\n#define RGF_USER_REVISION_ID_MASK\t(3)\n\t#define REVISION_ID_SPARROW_B0\t(0x0)\n\t#define REVISION_ID_SPARROW_D0\t(0x3)\n\n#define RGF_OTP_MAC_TALYN_MB\t\t(0x8a0304)\n#define RGF_OTP_OEM_MAC\t\t\t(0x8a0334)\n#define RGF_OTP_MAC\t\t\t(0x8a0620)\n\n \n#define RGF_USER_USER_CPU_0_TALYN_MB\t(0x8c0138)\n#define RGF_USER_MAC_CPU_0_TALYN_MB\t(0x8c0154)\n\n \n\n \n#define SPARROW_RGF_FW_ASSERT_CODE\t(0x91f020)\n#define SPARROW_RGF_UCODE_ASSERT_CODE\t(0x91f028)\n#define TALYN_RGF_FW_ASSERT_CODE\t(0xa37020)\n#define TALYN_RGF_UCODE_ASSERT_CODE\t(0xa37028)\n\nenum {\n\tHW_VER_UNKNOWN,\n\tHW_VER_SPARROW_B0,  \n\tHW_VER_SPARROW_D0,  \n\tHW_VER_TALYN,\t \n\tHW_VER_TALYN_MB\t \n};\n\n \n#define RGF_MBOX   RGF_USER_USER_SCRATCH_PAD\n#define HOST_MBOX   HOSTADDR(RGF_MBOX)\n#define SW_INT_MBOX BIT_USER_USER_ICR_SW_INT_2\n\n \n#define ISR_MISC_FW_READY\tBIT_DMA_EP_MISC_ICR_FW_INT(0)\n#define ISR_MISC_MBOX_EVT\tBIT_DMA_EP_MISC_ICR_FW_INT(1)\n#define ISR_MISC_FW_ERROR\tBIT_DMA_EP_MISC_ICR_FW_INT(3)\n\n#define WIL_DATA_COMPLETION_TO_MS 200\n\n \n#define SPARROW_FW_MAPPING_TABLE_SIZE 10\n#define TALYN_FW_MAPPING_TABLE_SIZE 13\n#define TALYN_MB_FW_MAPPING_TABLE_SIZE 19\n#define MAX_FW_MAPPING_TABLE_SIZE 19\n\n \nstruct wil_ring_dma_addr {\n\t__le32 addr_low;\n\t__le16 addr_high;\n} __packed;\n\nstruct fw_map {\n\tu32 from;  \n\tu32 to;    \n\tu32 host;  \n\tconst char *name;  \n\tbool fw;  \n\tbool crash_dump;  \n};\n\n \nextern const struct fw_map sparrow_fw_mapping[SPARROW_FW_MAPPING_TABLE_SIZE];\nextern const struct fw_map sparrow_d0_mac_rgf_ext;\nextern const struct fw_map talyn_fw_mapping[TALYN_FW_MAPPING_TABLE_SIZE];\nextern const struct fw_map talyn_mb_fw_mapping[TALYN_MB_FW_MAPPING_TABLE_SIZE];\nextern struct fw_map fw_mapping[MAX_FW_MAPPING_TABLE_SIZE];\n\n \nstatic inline u8 mk_cidxtid(u8 cid, u8 tid)\n{\n\treturn ((tid & 0xf) << 4) | (cid & 0xf);\n}\n\n \nstatic inline void parse_cidxtid(u8 cidxtid, u8 *cid, u8 *tid)\n{\n\t*cid = cidxtid & 0xf;\n\t*tid = (cidxtid >> 4) & 0xf;\n}\n\nstruct wil6210_mbox_ring {\n\tu32 base;\n\tu16 entry_size;  \n\tu16 size;\n\tu32 tail;\n\tu32 head;\n} __packed;\n\nstruct wil6210_mbox_ring_desc {\n\t__le32 sync;\n\t__le32 addr;\n} __packed;\n\n \nstruct wil6210_mbox_ctl {\n\tstruct wil6210_mbox_ring tx;\n\tstruct wil6210_mbox_ring rx;\n} __packed;\n\nstruct wil6210_mbox_hdr {\n\t__le16 seq;\n\t__le16 len;  \n\t__le16 type;\n\tu8 flags;\n\tu8 reserved;\n} __packed;\n\n#define WIL_MBOX_HDR_TYPE_WMI (0)\n\n \n#define MAX_MBOXITEM_SIZE   (240)\n\nstruct pending_wmi_event {\n\tstruct list_head list;\n\tstruct {\n\t\tstruct wil6210_mbox_hdr hdr;\n\t\tstruct wmi_cmd_hdr wmi;\n\t\tu8 data[0];\n\t} __packed event;\n};\n\nenum {  \n\twil_mapped_as_none = 0,\n\twil_mapped_as_single = 1,\n\twil_mapped_as_page = 2,\n};\n\n \nstruct wil_ctx {\n\tstruct sk_buff *skb;\n\tu8 nr_frags;\n\tu8 mapped_as;\n};\n\nstruct wil_desc_ring_rx_swtail {  \n\tu32 *va;\n\tdma_addr_t pa;\n};\n\n \nstruct wil_ring {\n\tdma_addr_t pa;\n\tvolatile union wil_ring_desc *va;\n\tu16 size;  \n\tu32 swtail;\n\tu32 swhead;\n\tu32 hwtail;  \n\tstruct wil_ctx *ctx;  \n\tstruct wil_desc_ring_rx_swtail edma_rx_swtail;\n\tbool is_rx;\n};\n\n \nstruct wil_ring_rx_data {\n\t \n\tstruct sk_buff *skb;\n\t \n\tbool skipping;\n\tu16 buff_size;\n};\n\n \nstruct wil_status_ring {\n\tdma_addr_t pa;\n\tvoid *va;  \n\tu16 size;  \n\tsize_t elem_size;  \n\tu32 swhead;\n\tu32 hwtail;  \n\tbool is_rx;\n\tu8 desc_rdy_pol;  \n\tstruct wil_ring_rx_data rx_data;\n\tu32 invalid_buff_id_cnt;  \n};\n\n#define WIL_STA_TID_NUM (16)\n#define WIL_MCS_MAX (15)  \n\nstruct wil_net_stats {\n\tunsigned long\trx_packets;\n\tunsigned long\ttx_packets;\n\tunsigned long\trx_bytes;\n\tunsigned long\ttx_bytes;\n\tunsigned long\ttx_errors;\n\tu32 tx_latency_min_us;\n\tu32 tx_latency_max_us;\n\tu64 tx_latency_total_us;\n\tunsigned long\trx_dropped;\n\tunsigned long\trx_non_data_frame;\n\tunsigned long\trx_short_frame;\n\tunsigned long\trx_large_frame;\n\tunsigned long\trx_replay;\n\tunsigned long\trx_mic_error;\n\tunsigned long\trx_key_error;  \n\tunsigned long\trx_amsdu_error;  \n\tunsigned long\trx_csum_err;\n\tu16 last_mcs_rx;\n\tu8 last_cb_mode_rx;\n\tu64 rx_per_mcs[WIL_MCS_MAX + 1];\n\tu32 ft_roams;  \n};\n\n \nstruct wil_txrx_ops {\n\tvoid (*configure_interrupt_moderation)(struct wil6210_priv *wil);\n\t \n\tint (*ring_init_tx)(struct wil6210_vif *vif, int ring_id,\n\t\t\t    int size, int cid, int tid);\n\tvoid (*ring_fini_tx)(struct wil6210_priv *wil, struct wil_ring *ring);\n\tint (*ring_init_bcast)(struct wil6210_vif *vif, int id, int size);\n\tint (*tx_init)(struct wil6210_priv *wil);\n\tvoid (*tx_fini)(struct wil6210_priv *wil);\n\tint (*tx_desc_map)(union wil_tx_desc *desc, dma_addr_t pa,\n\t\t\t   u32 len, int ring_index);\n\tvoid (*tx_desc_unmap)(struct device *dev,\n\t\t\t      union wil_tx_desc *desc,\n\t\t\t      struct wil_ctx *ctx);\n\tint (*tx_ring_tso)(struct wil6210_priv *wil, struct wil6210_vif *vif,\n\t\t\t   struct wil_ring *ring, struct sk_buff *skb);\n\tint (*tx_ring_modify)(struct wil6210_vif *vif, int ring_id,\n\t\t\t      int cid, int tid);\n\tirqreturn_t (*irq_tx)(int irq, void *cookie);\n\t \n\tint (*rx_init)(struct wil6210_priv *wil, uint ring_order);\n\tvoid (*rx_fini)(struct wil6210_priv *wil);\n\tint (*wmi_addba_rx_resp)(struct wil6210_priv *wil, u8 mid, u8 cid,\n\t\t\t\t u8 tid, u8 token, u16 status, bool amsdu,\n\t\t\t\t u16 agg_wsize, u16 timeout);\n\tvoid (*get_reorder_params)(struct wil6210_priv *wil,\n\t\t\t\t   struct sk_buff *skb, int *tid, int *cid,\n\t\t\t\t   int *mid, u16 *seq, int *mcast, int *retry);\n\tvoid (*get_netif_rx_params)(struct sk_buff *skb,\n\t\t\t\t    int *cid, int *security);\n\tint (*rx_crypto_check)(struct wil6210_priv *wil, struct sk_buff *skb);\n\tint (*rx_error_check)(struct wil6210_priv *wil, struct sk_buff *skb,\n\t\t\t      struct wil_net_stats *stats);\n\tbool (*is_rx_idle)(struct wil6210_priv *wil);\n\tirqreturn_t (*irq_rx)(int irq, void *cookie);\n};\n\n \nstruct wil_ring_tx_data {\n\tbool dot1x_open;\n\tint enabled;\n\tcycles_t idle, last_idle, begin;\n\tu8 agg_wsize;  \n\tu16 agg_timeout;\n\tu8 agg_amsdu;\n\tbool addba_in_progress;  \n\tu8 mid;\n\tspinlock_t lock;\n};\n\nenum {  \n\twil_status_fwready = 0,  \n\twil_status_dontscan,\n\twil_status_mbox_ready,  \n\twil_status_irqen,  \n\twil_status_napi_en,  \n\twil_status_resetting,  \n\twil_status_suspending,  \n\twil_status_suspended,  \n\twil_status_resuming,  \n\twil_status_last  \n};\n\nstruct pci_dev;\n\n \nstruct wil_tid_ampdu_rx {\n\tstruct sk_buff **reorder_buf;\n\tunsigned long last_rx;\n\tu16 head_seq_num;\n\tu16 stored_mpdu_num;\n\tu16 ssn;\n\tu16 buf_size;\n\tu16 ssn_last_drop;\n\tunsigned long long total;  \n\tunsigned long long drop_dup;\n\tunsigned long long drop_old;\n\tbool first_time;  \n\tu16 mcast_last_seq;  \n\tunsigned long long drop_dup_mcast;\n};\n\n \nstruct wil_tid_crypto_rx_single {\n\tu8 pn[IEEE80211_GCMP_PN_LEN];\n\tbool key_set;\n};\n\nstruct wil_tid_crypto_rx {\n\tstruct wil_tid_crypto_rx_single key_id[4];\n};\n\nstruct wil_p2p_info {\n\tstruct ieee80211_channel listen_chan;\n\tu8 discovery_started;\n\tu64 cookie;\n\tstruct wireless_dev *pending_listen_wdev;\n\tunsigned int listen_duration;\n\tstruct timer_list discovery_timer;  \n\tstruct work_struct discovery_expired_work;  \n\tstruct work_struct delayed_listen_work;  \n};\n\nenum wil_sta_status {\n\twil_sta_unused = 0,\n\twil_sta_conn_pending = 1,\n\twil_sta_connected = 2,\n};\n\nenum wil_rekey_state {\n\tWIL_REKEY_IDLE = 0,\n\tWIL_REKEY_M3_RECEIVED = 1,\n\tWIL_REKEY_WAIT_M4_SENT = 2,\n};\n\n \nstruct wil_sta_info {\n\tu8 addr[ETH_ALEN];\n\tu8 mid;\n\tenum wil_sta_status status;\n\tstruct wil_net_stats stats;\n\t \n\tu64 *tx_latency_bins;\n\tstruct wmi_link_stats_basic fw_stats_basic;\n\t \n\tstruct wil_tid_ampdu_rx *tid_rx[WIL_STA_TID_NUM];\n\tspinlock_t tid_rx_lock;  \n\tunsigned long tid_rx_timer_expired[BITS_TO_LONGS(WIL_STA_TID_NUM)];\n\tunsigned long tid_rx_stop_requested[BITS_TO_LONGS(WIL_STA_TID_NUM)];\n\tstruct wil_tid_crypto_rx tid_crypto_rx[WIL_STA_TID_NUM];\n\tstruct wil_tid_crypto_rx group_crypto_rx;\n\tu8 aid;  \n};\n\nenum {\n\tfw_recovery_idle = 0,\n\tfw_recovery_pending = 1,\n\tfw_recovery_running = 2,\n};\n\nenum {\n\thw_capa_no_flash,\n\thw_capa_last\n};\n\nstruct wil_probe_client_req {\n\tstruct list_head list;\n\tu64 cookie;\n\tu8 cid;\n};\n\nstruct pmc_ctx {\n\t \n\tstruct mutex\t\tlock;\n\tstruct vring_tx_desc\t*pring_va;\n\tdma_addr_t\t\tpring_pa;\n\tstruct desc_alloc_info  *descriptors;\n\tint\t\t\tlast_cmd_status;\n\tint\t\t\tnum_descriptors;\n\tint\t\t\tdescriptor_size;\n};\n\nstruct wil_halp {\n\tstruct mutex\t\tlock;  \n\tunsigned int\t\tref_cnt;\n\tstruct completion\tcomp;\n\tu8\t\t\thandle_icr;\n};\n\nstruct wil_blob_wrapper {\n\tstruct wil6210_priv *wil;\n\tstruct debugfs_blob_wrapper blob;\n};\n\n#define WIL_LED_MAX_ID\t\t\t(2)\n#define WIL_LED_INVALID_ID\t\t(0xF)\n#define WIL_LED_BLINK_ON_SLOW_MS\t(300)\n#define WIL_LED_BLINK_OFF_SLOW_MS\t(300)\n#define WIL_LED_BLINK_ON_MED_MS\t\t(200)\n#define WIL_LED_BLINK_OFF_MED_MS\t(200)\n#define WIL_LED_BLINK_ON_FAST_MS\t(100)\n#define WIL_LED_BLINK_OFF_FAST_MS\t(100)\nenum {\n\tWIL_LED_TIME_SLOW = 0,\n\tWIL_LED_TIME_MED,\n\tWIL_LED_TIME_FAST,\n\tWIL_LED_TIME_LAST,\n};\n\nstruct blink_on_off_time {\n\tu32 on_ms;\n\tu32 off_ms;\n};\n\nstruct wil_debugfs_iomem_data {\n\tvoid *offset;\n\tstruct wil6210_priv *wil;\n};\n\nstruct wil_debugfs_data {\n\tstruct wil_debugfs_iomem_data *data_arr;\n\tint iomem_data_count;\n};\n\nextern struct blink_on_off_time led_blink_time[WIL_LED_TIME_LAST];\nextern u8 led_id;\nextern u8 led_polarity;\n\nenum wil6210_vif_status {\n\twil_vif_fwconnecting,\n\twil_vif_fwconnected,\n\twil_vif_ft_roam,\n\twil_vif_status_last  \n};\n\nstruct wil6210_vif {\n\tstruct wireless_dev wdev;\n\tstruct net_device *ndev;\n\tstruct wil6210_priv *wil;\n\tu8 mid;\n\tDECLARE_BITMAP(status, wil_vif_status_last);\n\tu32 privacy;  \n\tu16 channel;  \n\tu8 wmi_edmg_channel;  \n\tu8 hidden_ssid;  \n\tu32 ap_isolate;  \n\tbool pbss;\n\tint bi;\n\tu8 *proberesp, *proberesp_ies, *assocresp_ies;\n\tsize_t proberesp_len, proberesp_ies_len, assocresp_ies_len;\n\tu8 ssid[IEEE80211_MAX_SSID_LEN];\n\tsize_t ssid_len;\n\tu8 gtk_index;\n\tu8 gtk[WMI_MAX_KEY_LEN];\n\tsize_t gtk_len;\n\tint bcast_ring;\n\tstruct cfg80211_bss *bss;  \n\tint locally_generated_disc;  \n\tstruct timer_list connect_timer;\n\tstruct work_struct disconnect_worker;\n\t \n\tstruct cfg80211_scan_request *scan_request;\n\tstruct timer_list scan_timer;  \n\tstruct wil_p2p_info p2p;\n\t \n\tstruct list_head probe_client_pending;\n\tstruct mutex probe_client_mutex;  \n\tstruct work_struct probe_client_worker;\n\tint net_queue_stopped;  \n\tbool fw_stats_ready;  \n\tu64 fw_stats_tsf;  \n\n\t \n\tenum wil_rekey_state ptk_rekey_state;\n\tstruct work_struct enable_tx_key_worker;\n};\n\n \nstruct wil_rx_buff {\n\tstruct sk_buff *skb;\n\tstruct list_head list;\n\tint id;\n};\n\n \nstruct wil_rx_buff_mgmt {\n\tstruct wil_rx_buff *buff_arr;\n\tsize_t size;  \n\tstruct list_head active;\n\tstruct list_head free;\n\tunsigned long free_list_empty_cnt;  \n};\n\nstruct wil_fw_stats_global {\n\tbool ready;\n\tu64 tsf;  \n\tstruct wmi_link_stats_global stats;\n};\n\nstruct wil_brd_info {\n\tu32 file_addr;\n\tu32 file_max_size;\n};\n\nstruct wil6210_priv {\n\tstruct pci_dev *pdev;\n\tu32 bar_size;\n\tstruct wiphy *wiphy;\n\tstruct net_device *main_ndev;\n\tint n_msi;\n\tvoid __iomem *csr;\n\tDECLARE_BITMAP(status, wil_status_last);\n\tu8 fw_version[ETHTOOL_FWVERS_LEN];\n\tu32 hw_version;\n\tu8 chip_revision;\n\tconst char *hw_name;\n\tconst char *wil_fw_name;\n\tchar *board_file;\n\tu32 num_of_brd_entries;\n\tstruct wil_brd_info *brd_info;\n\tDECLARE_BITMAP(hw_capa, hw_capa_last);\n\tDECLARE_BITMAP(fw_capabilities, WMI_FW_CAPABILITY_MAX);\n\tDECLARE_BITMAP(platform_capa, WIL_PLATFORM_CAPA_MAX);\n\tu32 recovery_count;  \n\tu32 recovery_state;  \n\tunsigned long last_fw_recovery;  \n\twait_queue_head_t wq;  \n\tu8 max_vifs;  \n\tstruct wil6210_vif *vifs[WIL_MAX_VIFS];\n\tstruct mutex vif_mutex;  \n\tatomic_t connected_vifs;\n\tu32 max_assoc_sta;  \n\n\t \n\tstruct cfg80211_chan_def monitor_chandef;\n\tu32 monitor_flags;\n\tint sinfo_gen;\n\t \n\tu32 tx_max_burst_duration;\n\tu32 tx_interframe_timeout;\n\tu32 rx_max_burst_duration;\n\tu32 rx_interframe_timeout;\n\t \n\tu32 isr_misc;\n\t \n\tstruct mutex wmi_mutex;\n\tstruct wil6210_mbox_ctl mbox_ctl;\n\tstruct completion wmi_ready;\n\tstruct completion wmi_call;\n\tu16 wmi_seq;\n\tu16 reply_id;  \n\tu8 reply_mid;\n\tvoid *reply_buf;\n\tu16 reply_size;\n\tstruct workqueue_struct *wmi_wq;  \n\tstruct work_struct wmi_event_worker;\n\tstruct workqueue_struct *wq_service;\n\tstruct work_struct fw_error_worker;\t \n\tstruct list_head pending_wmi_ev;\n\t \n\tspinlock_t wmi_ev_lock;\n\tspinlock_t net_queue_lock;  \n\tspinlock_t eap_lock;  \n\tstruct napi_struct napi_rx;\n\tstruct napi_struct napi_tx;\n\tstruct net_device napi_ndev;  \n\n\t \n\tstruct wil_ring ring_rx;\n\tunsigned int rx_buf_len;\n\tstruct wil_ring ring_tx[WIL6210_MAX_TX_RINGS];\n\tstruct wil_ring_tx_data ring_tx_data[WIL6210_MAX_TX_RINGS];\n\tstruct wil_status_ring srings[WIL6210_MAX_STATUS_RINGS];\n\tu8 num_rx_status_rings;\n\tint tx_sring_idx;\n\tu8 ring2cid_tid[WIL6210_MAX_TX_RINGS][2];  \n\tstruct wil_sta_info sta[WIL6210_MAX_CID];\n\tu32 ring_idle_trsh;  \n\tu32 dma_addr_size;  \n\tstruct wil_rx_buff_mgmt rx_buff_mgmt;\n\tbool use_enhanced_dma_hw;\n\tstruct wil_txrx_ops txrx_ops;\n\n\tstruct mutex mutex;  \n\t \n\tstruct rw_semaphore mem_lock;\n\t \n\tatomic_t isr_count_rx, isr_count_tx;\n\t \n\tstruct dentry *debug;\n\tstruct wil_blob_wrapper blobs[MAX_FW_MAPPING_TABLE_SIZE];\n\tu8 discovery_mode;\n\tu8 abft_len;\n\tu8 wakeup_trigger;\n\tstruct wil_suspend_stats suspend_stats;\n\tstruct wil_debugfs_data dbg_data;\n\tbool tx_latency;  \n\tsize_t tx_latency_res;  \n\n\tvoid *platform_handle;\n\tstruct wil_platform_ops platform_ops;\n\tbool keep_radio_on_during_sleep;\n\n\tstruct pmc_ctx pmc;\n\n\tu8 p2p_dev_started;\n\n\t \n\tstruct wireless_dev *p2p_wdev;\n\tstruct wireless_dev *radio_wdev;\n\n\t \n\tstruct wil_halp halp;\n\n\tenum wmi_ps_profile_type ps_profile;\n\n\tint fw_calib_result;\n\n\tstruct notifier_block pm_notify;\n\n\tbool suspend_resp_rcvd;\n\tbool suspend_resp_comp;\n\tu32 bus_request_kbps;\n\tu32 bus_request_kbps_pre_suspend;\n\n\tu32 rgf_fw_assert_code_addr;\n\tu32 rgf_ucode_assert_code_addr;\n\tu32 iccm_base;\n\n\t \n\tbool use_compressed_rx_status;\n\tu32 rx_status_ring_order;\n\tu32 tx_status_ring_order;\n\tu32 rx_buff_id_count;\n\tbool amsdu_en;\n\tbool use_rx_hw_reordering;\n\tbool secured_boot;\n\tu8 boot_config;\n\n\tstruct wil_fw_stats_global fw_stats_global;\n\n\tu32 max_agg_wsize;\n\tu32 max_ampdu_size;\n\tu8 multicast_to_unicast;\n\ts32 cqm_rssi_thold;\n};\n\n#define wil_to_wiphy(i) (i->wiphy)\n#define wil_to_dev(i) (wiphy_dev(wil_to_wiphy(i)))\n#define wiphy_to_wil(w) (struct wil6210_priv *)(wiphy_priv(w))\n#define wdev_to_wil(w) (struct wil6210_priv *)(wdev_priv(w))\n#define ndev_to_wil(n) (wdev_to_wil(n->ieee80211_ptr))\n#define ndev_to_vif(n) (struct wil6210_vif *)(netdev_priv(n))\n#define vif_to_wil(v) (v->wil)\n#define vif_to_ndev(v) (v->ndev)\n#define vif_to_wdev(v) (&v->wdev)\n#define GET_MAX_VIFS(wil) min_t(int, (wil)->max_vifs, WIL_MAX_VIFS)\n\nstatic inline struct wil6210_vif *wdev_to_vif(struct wil6210_priv *wil,\n\t\t\t\t\t      struct wireless_dev *wdev)\n{\n\t \n\tif (wdev == wil->p2p_wdev)\n\t\treturn ndev_to_vif(wil->main_ndev);\n\telse\n\t\treturn container_of(wdev, struct wil6210_vif, wdev);\n}\n\nstatic inline struct wireless_dev *\nvif_to_radio_wdev(struct wil6210_priv *wil, struct wil6210_vif *vif)\n{\n\t \n\tif (vif->mid)\n\t\treturn vif_to_wdev(vif);\n\telse\n\t\treturn wil->radio_wdev;\n}\n\n__printf(2, 3)\nvoid wil_dbg_trace(struct wil6210_priv *wil, const char *fmt, ...);\n__printf(2, 3)\nvoid __wil_err(struct wil6210_priv *wil, const char *fmt, ...);\n__printf(2, 3)\nvoid __wil_err_ratelimited(struct wil6210_priv *wil, const char *fmt, ...);\n__printf(2, 3)\nvoid __wil_info(struct wil6210_priv *wil, const char *fmt, ...);\n__printf(2, 3)\nvoid wil_dbg_ratelimited(const struct wil6210_priv *wil, const char *fmt, ...);\n#define wil_dbg(wil, fmt, arg...) do { \\\n\tnetdev_dbg(wil->main_ndev, fmt, ##arg); \\\n\twil_dbg_trace(wil, fmt, ##arg); \\\n} while (0)\n\n#define wil_dbg_irq(wil, fmt, arg...) wil_dbg(wil, \"DBG[ IRQ]\" fmt, ##arg)\n#define wil_dbg_txrx(wil, fmt, arg...) wil_dbg(wil, \"DBG[TXRX]\" fmt, ##arg)\n#define wil_dbg_wmi(wil, fmt, arg...) wil_dbg(wil, \"DBG[ WMI]\" fmt, ##arg)\n#define wil_dbg_misc(wil, fmt, arg...) wil_dbg(wil, \"DBG[MISC]\" fmt, ##arg)\n#define wil_dbg_pm(wil, fmt, arg...) wil_dbg(wil, \"DBG[ PM ]\" fmt, ##arg)\n#define wil_err(wil, fmt, arg...) __wil_err(wil, \"%s: \" fmt, __func__, ##arg)\n#define wil_info(wil, fmt, arg...) __wil_info(wil, \"%s: \" fmt, __func__, ##arg)\n#define wil_err_ratelimited(wil, fmt, arg...) \\\n\t__wil_err_ratelimited(wil, \"%s: \" fmt, __func__, ##arg)\n\n \n \nstatic inline u32 wil_r(struct wil6210_priv *wil, u32 reg)\n{\n\treturn readl(wil->csr + HOSTADDR(reg));\n}\n\n \nstatic inline void wil_w(struct wil6210_priv *wil, u32 reg, u32 val)\n{\n\twritel(val, wil->csr + HOSTADDR(reg));\n\twmb();  \n}\n\n \nstatic inline void wil_s(struct wil6210_priv *wil, u32 reg, u32 val)\n{\n\twil_w(wil, reg, wil_r(wil, reg) | val);\n}\n\n \nstatic inline void wil_c(struct wil6210_priv *wil, u32 reg, u32 val)\n{\n\twil_w(wil, reg, wil_r(wil, reg) & ~val);\n}\n\n \nstatic inline bool wil_cid_valid(struct wil6210_priv *wil, int cid)\n{\n\treturn (cid >= 0 && cid < wil->max_assoc_sta && cid < WIL6210_MAX_CID);\n}\n\nvoid wil_get_board_file(struct wil6210_priv *wil, char *buf, size_t len);\n\n#if defined(CONFIG_DYNAMIC_DEBUG)\n#define wil_hex_dump_txrx(prefix_str, prefix_type, rowsize,\t\\\n\t\t\t  groupsize, buf, len, ascii)\t\t\\\n\t\t\t  print_hex_dump_debug(\"DBG[TXRX]\" prefix_str,\\\n\t\t\t\t\t prefix_type, rowsize,\t\\\n\t\t\t\t\t groupsize, buf, len, ascii)\n\n#define wil_hex_dump_wmi(prefix_str, prefix_type, rowsize,\t\\\n\t\t\t groupsize, buf, len, ascii)\t\t\\\n\t\t\t print_hex_dump_debug(\"DBG[ WMI]\" prefix_str,\\\n\t\t\t\t\tprefix_type, rowsize,\t\\\n\t\t\t\t\tgroupsize, buf, len, ascii)\n\n#define wil_hex_dump_misc(prefix_str, prefix_type, rowsize,\t\\\n\t\t\t  groupsize, buf, len, ascii)\t\t\\\n\t\t\t  print_hex_dump_debug(\"DBG[MISC]\" prefix_str,\\\n\t\t\t\t\tprefix_type, rowsize,\t\\\n\t\t\t\t\tgroupsize, buf, len, ascii)\n#else  \nstatic inline\nvoid wil_hex_dump_txrx(const char *prefix_str, int prefix_type, int rowsize,\n\t\t       int groupsize, const void *buf, size_t len, bool ascii)\n{\n}\n\nstatic inline\nvoid wil_hex_dump_wmi(const char *prefix_str, int prefix_type, int rowsize,\n\t\t      int groupsize, const void *buf, size_t len, bool ascii)\n{\n}\n\nstatic inline\nvoid wil_hex_dump_misc(const char *prefix_str, int prefix_type, int rowsize,\n\t\t       int groupsize, const void *buf, size_t len, bool ascii)\n{\n}\n#endif  \n\nvoid wil_memcpy_fromio_32(void *dst, const volatile void __iomem *src,\n\t\t\t  size_t count);\nvoid wil_memcpy_toio_32(volatile void __iomem *dst, const void *src,\n\t\t\tsize_t count);\nint wil_mem_access_lock(struct wil6210_priv *wil);\nvoid wil_mem_access_unlock(struct wil6210_priv *wil);\n\nstruct wil6210_vif *\nwil_vif_alloc(struct wil6210_priv *wil, const char *name,\n\t      unsigned char name_assign_type, enum nl80211_iftype iftype);\nvoid wil_vif_free(struct wil6210_vif *vif);\nvoid *wil_if_alloc(struct device *dev);\nbool wil_has_other_active_ifaces(struct wil6210_priv *wil,\n\t\t\t\t struct net_device *ndev, bool up, bool ok);\nbool wil_has_active_ifaces(struct wil6210_priv *wil, bool up, bool ok);\nvoid wil_if_free(struct wil6210_priv *wil);\nint wil_vif_add(struct wil6210_priv *wil, struct wil6210_vif *vif);\nint wil_if_add(struct wil6210_priv *wil);\nvoid wil_vif_remove(struct wil6210_priv *wil, u8 mid);\nvoid wil_if_remove(struct wil6210_priv *wil);\nint wil_priv_init(struct wil6210_priv *wil);\nvoid wil_priv_deinit(struct wil6210_priv *wil);\nint wil_ps_update(struct wil6210_priv *wil,\n\t\t  enum wmi_ps_profile_type ps_profile);\nint wil_reset(struct wil6210_priv *wil, bool no_fw);\nvoid wil_fw_error_recovery(struct wil6210_priv *wil);\nvoid wil_set_recovery_state(struct wil6210_priv *wil, int state);\nbool wil_is_recovery_blocked(struct wil6210_priv *wil);\nint wil_up(struct wil6210_priv *wil);\nint __wil_up(struct wil6210_priv *wil);\nint wil_down(struct wil6210_priv *wil);\nint __wil_down(struct wil6210_priv *wil);\nvoid wil_refresh_fw_capabilities(struct wil6210_priv *wil);\nvoid wil_mbox_ring_le2cpus(struct wil6210_mbox_ring *r);\nint wil_find_cid(struct wil6210_priv *wil, u8 mid, const u8 *mac);\nint wil_find_cid_by_idx(struct wil6210_priv *wil, u8 mid, int idx);\nvoid wil_set_ethtoolops(struct net_device *ndev);\n\nstruct fw_map *wil_find_fw_mapping(const char *section);\nvoid __iomem *wmi_buffer_block(struct wil6210_priv *wil, __le32 ptr, u32 size);\nvoid __iomem *wmi_buffer(struct wil6210_priv *wil, __le32 ptr);\nvoid __iomem *wmi_addr(struct wil6210_priv *wil, u32 ptr);\nint wmi_read_hdr(struct wil6210_priv *wil, __le32 ptr,\n\t\t struct wil6210_mbox_hdr *hdr);\nint wmi_send(struct wil6210_priv *wil, u16 cmdid, u8 mid, void *buf, u16 len);\nvoid wmi_recv_cmd(struct wil6210_priv *wil);\nint wmi_call(struct wil6210_priv *wil, u16 cmdid, u8 mid, void *buf, u16 len,\n\t     u16 reply_id, void *reply, u16 reply_size, int to_msec);\nvoid wmi_event_worker(struct work_struct *work);\nvoid wmi_event_flush(struct wil6210_priv *wil);\nint wmi_set_ssid(struct wil6210_vif *vif, u8 ssid_len, const void *ssid);\nint wmi_get_ssid(struct wil6210_vif *vif, u8 *ssid_len, void *ssid);\nint wmi_set_channel(struct wil6210_priv *wil, int channel);\nint wmi_get_channel(struct wil6210_priv *wil, int *channel);\nint wmi_del_cipher_key(struct wil6210_vif *vif, u8 key_index,\n\t\t       const void *mac_addr, int key_usage);\nint wmi_add_cipher_key(struct wil6210_vif *vif, u8 key_index,\n\t\t       const void *mac_addr, int key_len, const void *key,\n\t\t       int key_usage);\nint wmi_echo(struct wil6210_priv *wil);\nint wmi_set_ie(struct wil6210_vif *vif, u8 type, u16 ie_len, const void *ie);\nint wmi_rx_chain_add(struct wil6210_priv *wil, struct wil_ring *vring);\nint wmi_update_ft_ies(struct wil6210_vif *vif, u16 ie_len, const void *ie);\nint wmi_rxon(struct wil6210_priv *wil, bool on);\nint wmi_get_temperature(struct wil6210_priv *wil, u32 *t_m, u32 *t_r);\nint wmi_get_all_temperatures(struct wil6210_priv *wil,\n\t\t\t     struct wmi_temp_sense_all_done_event\n\t\t\t     *sense_all_evt);\nint wmi_disconnect_sta(struct wil6210_vif *vif, const u8 *mac, u16 reason,\n\t\t       bool del_sta);\nint wmi_addba(struct wil6210_priv *wil, u8 mid,\n\t      u8 ringid, u8 size, u16 timeout);\nint wmi_delba_tx(struct wil6210_priv *wil, u8 mid, u8 ringid, u16 reason);\nint wmi_delba_rx(struct wil6210_priv *wil, u8 mid, u8 cid, u8 tid, u16 reason);\nint wmi_addba_rx_resp(struct wil6210_priv *wil,\n\t\t      u8 mid, u8 cid, u8 tid, u8 token,\n\t\t      u16 status, bool amsdu, u16 agg_wsize, u16 timeout);\nint wmi_ps_dev_profile_cfg(struct wil6210_priv *wil,\n\t\t\t   enum wmi_ps_profile_type ps_profile);\nint wmi_set_mgmt_retry(struct wil6210_priv *wil, u8 retry_short);\nint wmi_get_mgmt_retry(struct wil6210_priv *wil, u8 *retry_short);\nint wmi_new_sta(struct wil6210_vif *vif, const u8 *mac, u8 aid);\nint wmi_port_allocate(struct wil6210_priv *wil, u8 mid,\n\t\t      const u8 *mac, enum nl80211_iftype iftype);\nint wmi_port_delete(struct wil6210_priv *wil, u8 mid);\nint wmi_link_stats_cfg(struct wil6210_vif *vif, u32 type, u8 cid, u32 interval);\nint wil_addba_rx_request(struct wil6210_priv *wil, u8 mid, u8 cid, u8 tid,\n\t\t\t u8 dialog_token, __le16 ba_param_set,\n\t\t\t __le16 ba_timeout, __le16 ba_seq_ctrl);\nint wil_addba_tx_request(struct wil6210_priv *wil, u8 ringid, u16 wsize);\n\nvoid wil6210_clear_irq(struct wil6210_priv *wil);\nint wil6210_init_irq(struct wil6210_priv *wil, int irq);\nvoid wil6210_fini_irq(struct wil6210_priv *wil, int irq);\nvoid wil_mask_irq(struct wil6210_priv *wil);\nvoid wil_unmask_irq(struct wil6210_priv *wil);\nvoid wil_configure_interrupt_moderation(struct wil6210_priv *wil);\nvoid wil_disable_irq(struct wil6210_priv *wil);\nvoid wil_enable_irq(struct wil6210_priv *wil);\nvoid wil6210_mask_halp(struct wil6210_priv *wil);\n\n \nbool wil_p2p_is_social_scan(struct cfg80211_scan_request *request);\nint wil_p2p_search(struct wil6210_vif *vif,\n\t\t   struct cfg80211_scan_request *request);\nint wil_p2p_listen(struct wil6210_priv *wil, struct wireless_dev *wdev,\n\t\t   unsigned int duration, struct ieee80211_channel *chan,\n\t\t   u64 *cookie);\nu8 wil_p2p_stop_discovery(struct wil6210_vif *vif);\nint wil_p2p_cancel_listen(struct wil6210_vif *vif, u64 cookie);\nvoid wil_p2p_listen_expired(struct work_struct *work);\nvoid wil_p2p_search_expired(struct work_struct *work);\nvoid wil_p2p_stop_radio_operations(struct wil6210_priv *wil);\nvoid wil_p2p_delayed_listen_work(struct work_struct *work);\n\n \nint wmi_p2p_cfg(struct wil6210_vif *vif, int channel, int bi);\nint wmi_start_listen(struct wil6210_vif *vif);\nint wmi_start_search(struct wil6210_vif *vif);\nint wmi_stop_discovery(struct wil6210_vif *vif);\n\nint wil_cfg80211_mgmt_tx(struct wiphy *wiphy, struct wireless_dev *wdev,\n\t\t\t struct cfg80211_mgmt_tx_params *params,\n\t\t\t u64 *cookie);\nvoid wil_cfg80211_ap_recovery(struct wil6210_priv *wil);\nint wil_cfg80211_iface_combinations_from_fw(\n\tstruct wil6210_priv *wil,\n\tconst struct wil_fw_record_concurrency *conc);\nint wil_vif_prepare_stop(struct wil6210_vif *vif);\n\n#if defined(CONFIG_WIL6210_DEBUGFS)\nint wil6210_debugfs_init(struct wil6210_priv *wil);\nvoid wil6210_debugfs_remove(struct wil6210_priv *wil);\n#else\nstatic inline int wil6210_debugfs_init(struct wil6210_priv *wil) { return 0; }\nstatic inline void wil6210_debugfs_remove(struct wil6210_priv *wil) {}\n#endif\n\nint wil_cid_fill_sinfo(struct wil6210_vif *vif, int cid,\n\t\t       struct station_info *sinfo);\n\nstruct wil6210_priv *wil_cfg80211_init(struct device *dev);\nvoid wil_cfg80211_deinit(struct wil6210_priv *wil);\nvoid wil_p2p_wdev_free(struct wil6210_priv *wil);\n\nint wmi_set_mac_address(struct wil6210_priv *wil, const void *addr);\nint wmi_pcp_start(struct wil6210_vif *vif, int bi, u8 wmi_nettype, u8 chan,\n\t\t  u8 edmg_chan, u8 hidden_ssid, u8 is_go);\nint wmi_pcp_stop(struct wil6210_vif *vif);\nint wmi_led_cfg(struct wil6210_priv *wil, bool enable);\nint wmi_abort_scan(struct wil6210_vif *vif);\nvoid wil_abort_scan(struct wil6210_vif *vif, bool sync);\nvoid wil_abort_scan_all_vifs(struct wil6210_priv *wil, bool sync);\nvoid wil6210_bus_request(struct wil6210_priv *wil, u32 kbps);\nvoid wil6210_disconnect(struct wil6210_vif *vif, const u8 *bssid,\n\t\t\tu16 reason_code);\nvoid wil6210_disconnect_complete(struct wil6210_vif *vif, const u8 *bssid,\n\t\t\t\t u16 reason_code);\nvoid wil_probe_client_flush(struct wil6210_vif *vif);\nvoid wil_probe_client_worker(struct work_struct *work);\nvoid wil_disconnect_worker(struct work_struct *work);\nvoid wil_enable_tx_key_worker(struct work_struct *work);\n\nvoid wil_init_txrx_ops(struct wil6210_priv *wil);\n\n \nint wil_ring_init_tx(struct wil6210_vif *vif, int cid);\nint wil_vring_init_bcast(struct wil6210_vif *vif, int id, int size);\nint wil_bcast_init(struct wil6210_vif *vif);\nvoid wil_bcast_fini(struct wil6210_vif *vif);\nvoid wil_bcast_fini_all(struct wil6210_priv *wil);\n\nvoid wil_update_net_queues(struct wil6210_priv *wil, struct wil6210_vif *vif,\n\t\t\t   struct wil_ring *ring, bool should_stop);\nvoid wil_update_net_queues_bh(struct wil6210_priv *wil, struct wil6210_vif *vif,\n\t\t\t      struct wil_ring *ring, bool check_stop);\nnetdev_tx_t wil_start_xmit(struct sk_buff *skb, struct net_device *ndev);\nint wil_tx_complete(struct wil6210_vif *vif, int ringid);\nvoid wil_tx_complete_handle_eapol(struct wil6210_vif *vif,\n\t\t\t\t  struct sk_buff *skb);\nvoid wil6210_unmask_irq_tx(struct wil6210_priv *wil);\nvoid wil6210_unmask_irq_tx_edma(struct wil6210_priv *wil);\n\n \nvoid wil_rx_handle(struct wil6210_priv *wil, int *quota);\nvoid wil6210_unmask_irq_rx(struct wil6210_priv *wil);\nvoid wil6210_unmask_irq_rx_edma(struct wil6210_priv *wil);\nvoid wil_set_crypto_rx(u8 key_index, enum wmi_key_usage key_usage,\n\t\t       struct wil_sta_info *cs,\n\t\t       struct key_params *params);\n\nint wil_iftype_nl2wmi(enum nl80211_iftype type);\n\nint wil_request_firmware(struct wil6210_priv *wil, const char *name,\n\t\t\t bool load);\nint wil_request_board(struct wil6210_priv *wil, const char *name);\nbool wil_fw_verify_file_exists(struct wil6210_priv *wil, const char *name);\n\nvoid wil_pm_runtime_allow(struct wil6210_priv *wil);\nvoid wil_pm_runtime_forbid(struct wil6210_priv *wil);\nint wil_pm_runtime_get(struct wil6210_priv *wil);\nvoid wil_pm_runtime_put(struct wil6210_priv *wil);\n\nint wil_can_suspend(struct wil6210_priv *wil, bool is_runtime);\nint wil_suspend(struct wil6210_priv *wil, bool is_runtime, bool keep_radio_on);\nint wil_resume(struct wil6210_priv *wil, bool is_runtime, bool keep_radio_on);\nbool wil_is_wmi_idle(struct wil6210_priv *wil);\nint wmi_resume(struct wil6210_priv *wil);\nint wmi_suspend(struct wil6210_priv *wil);\nbool wil_is_tx_idle(struct wil6210_priv *wil);\n\nint wil_fw_copy_crash_dump(struct wil6210_priv *wil, void *dest, u32 size);\nvoid wil_fw_core_dump(struct wil6210_priv *wil);\n\nvoid wil_halp_vote(struct wil6210_priv *wil);\nvoid wil_halp_unvote(struct wil6210_priv *wil);\nvoid wil6210_set_halp(struct wil6210_priv *wil);\nvoid wil6210_clear_halp(struct wil6210_priv *wil);\n\nint wmi_start_sched_scan(struct wil6210_priv *wil,\n\t\t\t struct cfg80211_sched_scan_request *request);\nint wmi_stop_sched_scan(struct wil6210_priv *wil);\nint wmi_mgmt_tx(struct wil6210_vif *vif, const u8 *buf, size_t len);\nint wmi_mgmt_tx_ext(struct wil6210_vif *vif, const u8 *buf, size_t len,\n\t\t    u8 channel, u16 duration_ms);\nint wmi_rbufcap_cfg(struct wil6210_priv *wil, bool enable, u16 threshold);\n\nint wil_wmi2spec_ch(u8 wmi_ch, u8 *spec_ch);\nint wil_spec2wmi_ch(u8 spec_ch, u8 *wmi_ch);\nvoid wil_update_supported_bands(struct wil6210_priv *wil);\n\nint reverse_memcmp(const void *cs, const void *ct, size_t count);\n\n \nint wil_wmi_tx_sring_cfg(struct wil6210_priv *wil, int ring_id);\nint wil_wmi_cfg_def_rx_offload(struct wil6210_priv *wil,\n\t\t\t       u16 max_rx_pl_per_desc);\nint wil_wmi_rx_sring_add(struct wil6210_priv *wil, u16 ring_id);\nint wil_wmi_rx_desc_ring_add(struct wil6210_priv *wil, int status_ring_id);\nint wil_wmi_tx_desc_ring_add(struct wil6210_vif *vif, int ring_id, int cid,\n\t\t\t     int tid);\nint wil_wmi_bcast_desc_ring_add(struct wil6210_vif *vif, int ring_id);\nint wmi_addba_rx_resp_edma(struct wil6210_priv *wil, u8 mid, u8 cid,\n\t\t\t   u8 tid, u8 token, u16 status, bool amsdu,\n\t\t\t   u16 agg_wsize, u16 timeout);\n\nvoid update_supported_bands(struct wil6210_priv *wil);\n\nvoid wil_clear_fw_log_addr(struct wil6210_priv *wil);\nint wmi_set_cqm_rssi_config(struct wil6210_priv *wil,\n\t\t\t    s32 rssi_thold, u32 rssi_hyst);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}