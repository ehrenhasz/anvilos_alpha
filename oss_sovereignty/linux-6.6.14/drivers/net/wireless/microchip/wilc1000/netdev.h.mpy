{
  "module_name": "netdev.h",
  "hash_id": "79125bbcbdacbd78297d03b4f2f15218997f821bb8f45f5690e234893ff39baf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/microchip/wilc1000/netdev.h",
  "human_readable_source": " \n \n\n#ifndef WILC_NETDEV_H\n#define WILC_NETDEV_H\n\n#include <linux/tcp.h>\n#include <linux/ieee80211.h>\n#include <net/cfg80211.h>\n#include <net/ieee80211_radiotap.h>\n#include <linux/if_arp.h>\n#include <linux/gpio/consumer.h>\n\n#include \"hif.h\"\n#include \"wlan.h\"\n#include \"wlan_cfg.h\"\n\n#define FLOW_CONTROL_LOWER_THRESHOLD\t\t128\n#define FLOW_CONTROL_UPPER_THRESHOLD\t\t256\n\n#define PMKID_FOUND\t\t\t\t1\n#define NUM_STA_ASSOCIATED\t\t\t8\n\n#define TCP_ACK_FILTER_LINK_SPEED_THRESH\t54\n#define DEFAULT_LINK_SPEED\t\t\t72\n\nstruct wilc_wfi_stats {\n\tunsigned long rx_packets;\n\tunsigned long tx_packets;\n\tunsigned long rx_bytes;\n\tunsigned long tx_bytes;\n\tu64 rx_time;\n\tu64 tx_time;\n\n};\n\nstruct wilc_wfi_key {\n\tu8 *key;\n\tu8 *seq;\n\tint key_len;\n\tint seq_len;\n\tu32 cipher;\n};\n\nstruct sta_info {\n\tu8 sta_associated_bss[WILC_MAX_NUM_STA][ETH_ALEN];\n};\n\n \nstruct wilc_wfi_p2p_listen_params {\n\tstruct ieee80211_channel *listen_ch;\n\tu32 listen_duration;\n\tu64 listen_cookie;\n};\n\nstatic const u32 wilc_cipher_suites[] = {\n\tWLAN_CIPHER_SUITE_TKIP,\n\tWLAN_CIPHER_SUITE_CCMP,\n\tWLAN_CIPHER_SUITE_AES_CMAC\n};\n\n#define CHAN2G(_channel, _freq, _flags) {\t \\\n\t.band             = NL80211_BAND_2GHZ, \\\n\t.center_freq      = (_freq),\t\t \\\n\t.hw_value         = (_channel),\t\t \\\n\t.flags            = (_flags),\t\t \\\n\t.max_antenna_gain = 0,\t\t\t \\\n\t.max_power        = 30,\t\t\t \\\n}\n\nstatic const struct ieee80211_channel wilc_2ghz_channels[] = {\n\tCHAN2G(1,  2412, 0),\n\tCHAN2G(2,  2417, 0),\n\tCHAN2G(3,  2422, 0),\n\tCHAN2G(4,  2427, 0),\n\tCHAN2G(5,  2432, 0),\n\tCHAN2G(6,  2437, 0),\n\tCHAN2G(7,  2442, 0),\n\tCHAN2G(8,  2447, 0),\n\tCHAN2G(9,  2452, 0),\n\tCHAN2G(10, 2457, 0),\n\tCHAN2G(11, 2462, 0),\n\tCHAN2G(12, 2467, 0),\n\tCHAN2G(13, 2472, 0),\n\tCHAN2G(14, 2484, 0)\n};\n\n#define RATETAB_ENT(_rate, _hw_value, _flags) {\t\\\n\t.bitrate  = (_rate),\t\t\t\\\n\t.hw_value = (_hw_value),\t\t\\\n\t.flags    = (_flags),\t\t\t\\\n}\n\nstatic struct ieee80211_rate wilc_bitrates[] = {\n\tRATETAB_ENT(10,  0,  0),\n\tRATETAB_ENT(20,  1,  0),\n\tRATETAB_ENT(55,  2,  0),\n\tRATETAB_ENT(110, 3,  0),\n\tRATETAB_ENT(60,  9,  0),\n\tRATETAB_ENT(90,  6,  0),\n\tRATETAB_ENT(120, 7,  0),\n\tRATETAB_ENT(180, 8,  0),\n\tRATETAB_ENT(240, 9,  0),\n\tRATETAB_ENT(360, 10, 0),\n\tRATETAB_ENT(480, 11, 0),\n\tRATETAB_ENT(540, 12, 0)\n};\n\nstruct wilc_priv {\n\tstruct wireless_dev wdev;\n\tstruct cfg80211_scan_request *scan_req;\n\n\tstruct wilc_wfi_p2p_listen_params remain_on_ch_params;\n\tu64 tx_cookie;\n\n\tbool cfg_scanning;\n\n\tu8 associated_bss[ETH_ALEN];\n\tstruct sta_info assoc_stainfo;\n\tstruct sk_buff *skb;\n\tstruct net_device *dev;\n\tstruct host_if_drv *hif_drv;\n\tstruct wilc_pmkid_attr pmkid_list;\n\n\t \n\tstruct net_device *real_ndev;\n\tstruct wilc_wfi_key *wilc_gtk[WILC_MAX_NUM_STA];\n\tstruct wilc_wfi_key *wilc_ptk[WILC_MAX_NUM_STA];\n\tstruct wilc_wfi_key *wilc_igtk[2];\n\tu8 wilc_groupkey;\n\n\t \n\tstruct mutex scan_req_lock;\n\tbool p2p_listen_state;\n\tint scanned_cnt;\n\n\tu64 inc_roc_cookie;\n};\n\n#define MAX_TCP_SESSION                25\n#define MAX_PENDING_ACKS               256\n\nstruct ack_session_info {\n\tu32 seq_num;\n\tu32 bigger_ack_num;\n\tu16 src_port;\n\tu16 dst_port;\n\tu16 status;\n};\n\nstruct pending_acks {\n\tu32 ack_num;\n\tu32 session_index;\n\tstruct txq_entry_t  *txqe;\n};\n\nstruct tcp_ack_filter {\n\tstruct ack_session_info ack_session_info[2 * MAX_TCP_SESSION];\n\tstruct pending_acks pending_acks[MAX_PENDING_ACKS];\n\tu32 pending_base;\n\tu32 tcp_session;\n\tu32 pending_acks_idx;\n\tbool enabled;\n};\n\nstruct wilc_vif {\n\tu8 idx;\n\tu8 iftype;\n\tint monitor_flag;\n\tint mac_opened;\n\tu32 mgmt_reg_stypes;\n\tstruct net_device_stats netstats;\n\tstruct wilc *wilc;\n\tu8 bssid[ETH_ALEN];\n\tstruct host_if_drv *hif_drv;\n\tstruct net_device *ndev;\n\tstruct timer_list during_ip_timer;\n\tstruct timer_list periodic_rssi;\n\tstruct rf_info periodic_stat;\n\tstruct tcp_ack_filter ack_filter;\n\tbool connecting;\n\tstruct wilc_priv priv;\n\tstruct list_head list;\n\tstruct cfg80211_bss *bss;\n\tstruct cfg80211_external_auth_params auth;\n};\n\nstruct wilc_tx_queue_status {\n\tu8 buffer[AC_BUFFER_SIZE];\n\tu16 end_index;\n\tu16 cnt[NQUEUES];\n\tu16 sum;\n\tbool initialized;\n};\n\nstruct wilc {\n\tstruct wiphy *wiphy;\n\tconst struct wilc_hif_func *hif_func;\n\tint io_type;\n\ts8 mac_status;\n\tstruct clk *rtc_clk;\n\tbool initialized;\n\tu32 chipid;\n\tbool power_save_mode;\n\tint dev_irq_num;\n\tint close;\n\tu8 vif_num;\n\tstruct list_head vif_list;\n\n\t \n\tstruct mutex vif_mutex;\n\tstruct srcu_struct srcu;\n\tu8 open_ifcs;\n\n\t \n\tstruct mutex txq_add_to_head_cs;\n\n\t \n\tspinlock_t txq_spinlock;\n\n\t \n\tstruct mutex rxq_cs;\n\n\t \n\tstruct mutex hif_cs;\n\n\tstruct completion cfg_event;\n\tstruct completion sync_event;\n\tstruct completion txq_event;\n\tstruct completion txq_thread_started;\n\n\tstruct task_struct *txq_thread;\n\n\tint quit;\n\n\t \n\tstruct mutex cfg_cmd_lock;\n\tstruct wilc_cfg_frame cfg_frame;\n\tu32 cfg_frame_offset;\n\tu8 cfg_seq_no;\n\n\tu8 *rx_buffer;\n\tu32 rx_buffer_offset;\n\tu8 *tx_buffer;\n\tu32 *vmm_table;\n\n\tstruct txq_handle txq[NQUEUES];\n\tint txq_entries;\n\n\tstruct wilc_tx_queue_status tx_q_limit;\n\tstruct rxq_entry_t rxq_head;\n\n\tconst struct firmware *firmware;\n\n\tstruct device *dev;\n\tbool suspend_event;\n\n\tstruct workqueue_struct *hif_workqueue;\n\tstruct wilc_cfg cfg;\n\tvoid *bus_data;\n\tstruct net_device *monitor_dev;\n\n\t \n\tstruct mutex deinit_lock;\n\tu8 sta_ch;\n\tu8 op_ch;\n\tstruct ieee80211_channel channels[ARRAY_SIZE(wilc_2ghz_channels)];\n\tstruct ieee80211_rate bitrates[ARRAY_SIZE(wilc_bitrates)];\n\tstruct ieee80211_supported_band band;\n\tu32 cipher_suites[ARRAY_SIZE(wilc_cipher_suites)];\n};\n\nstruct wilc_wfi_mon_priv {\n\tstruct net_device *real_ndev;\n};\n\nvoid wilc_frmw_to_host(struct wilc *wilc, u8 *buff, u32 size, u32 pkt_offset);\nvoid wilc_mac_indicate(struct wilc *wilc);\nvoid wilc_netdev_cleanup(struct wilc *wilc);\nvoid wilc_wfi_mgmt_rx(struct wilc *wilc, u8 *buff, u32 size, bool is_auth);\nvoid wilc_wlan_set_bssid(struct net_device *wilc_netdev, const u8 *bssid,\n\t\t\t u8 mode);\nstruct wilc_vif *wilc_netdev_ifc_init(struct wilc *wl, const char *name,\n\t\t\t\t      int vif_type, enum nl80211_iftype type,\n\t\t\t\t      bool rtnl_locked);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}