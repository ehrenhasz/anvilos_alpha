{
  "module_name": "wlan.h",
  "hash_id": "b41e6e793a5cd9f484a21340bb6c97287d2b7d507f0a266a91c23626230e7f66",
  "original_prompt": "Ingested from linux-6.6.14/drivers/net/wireless/microchip/wilc1000/wlan.h",
  "human_readable_source": " \n \n\n#ifndef WILC_WLAN_H\n#define WILC_WLAN_H\n\n#include <linux/types.h>\n#include <linux/bitfield.h>\n\n \n#define MAX_MAC_HDR_LEN\t\t\t26  \n#define SUB_MSDU_HEADER_LENGTH\t\t14\n#define SNAP_HDR_LEN\t\t\t8\n#define ETHERNET_HDR_LEN\t\t14\n#define WORD_ALIGNMENT_PAD\t\t0\n\n#define ETH_ETHERNET_HDR_OFFSET\t\t(MAX_MAC_HDR_LEN + \\\n\t\t\t\t\t SUB_MSDU_HEADER_LENGTH + \\\n\t\t\t\t\t SNAP_HDR_LEN - \\\n\t\t\t\t\t ETHERNET_HDR_LEN + \\\n\t\t\t\t\t WORD_ALIGNMENT_PAD)\n\n#define HOST_HDR_OFFSET\t\t\t4\n#define ETHERNET_HDR_LEN\t\t14\n#define IP_HDR_LEN\t\t\t20\n#define IP_HDR_OFFSET\t\t\tETHERNET_HDR_LEN\n#define UDP_HDR_OFFSET\t\t\t(IP_HDR_LEN + IP_HDR_OFFSET)\n#define UDP_HDR_LEN\t\t\t8\n#define UDP_DATA_OFFSET\t\t\t(UDP_HDR_OFFSET + UDP_HDR_LEN)\n#define ETH_CONFIG_PKT_HDR_LEN\t\tUDP_DATA_OFFSET\n\n#define ETH_CONFIG_PKT_HDR_OFFSET\t(ETH_ETHERNET_HDR_OFFSET + \\\n\t\t\t\t\t ETH_CONFIG_PKT_HDR_LEN)\n\n \n#define WILC_PERIPH_REG_BASE\t\t0x1000\n#define WILC_CHANGING_VIR_IF\t\t0x108c\n#define WILC_CHIPID\t\t\tWILC_PERIPH_REG_BASE\n#define WILC_GLB_RESET_0\t\t(WILC_PERIPH_REG_BASE + 0x400)\n#define WILC_PIN_MUX_0\t\t\t(WILC_PERIPH_REG_BASE + 0x408)\n#define WILC_HOST_TX_CTRL\t\t(WILC_PERIPH_REG_BASE + 0x6c)\n#define WILC_HOST_RX_CTRL_0\t\t(WILC_PERIPH_REG_BASE + 0x70)\n#define WILC_HOST_RX_CTRL_1\t\t(WILC_PERIPH_REG_BASE + 0x74)\n#define WILC_HOST_VMM_CTL\t\t(WILC_PERIPH_REG_BASE + 0x78)\n#define WILC_HOST_RX_CTRL\t\t(WILC_PERIPH_REG_BASE + 0x80)\n#define WILC_HOST_RX_EXTRA_SIZE\t\t(WILC_PERIPH_REG_BASE + 0x84)\n#define WILC_HOST_TX_CTRL_1\t\t(WILC_PERIPH_REG_BASE + 0x88)\n#define WILC_MISC\t\t\t(WILC_PERIPH_REG_BASE + 0x428)\n#define WILC_INTR_REG_BASE\t\t(WILC_PERIPH_REG_BASE + 0xa00)\n#define WILC_INTR_ENABLE\t\tWILC_INTR_REG_BASE\n#define WILC_INTR2_ENABLE\t\t(WILC_INTR_REG_BASE + 4)\n\n#define WILC_INTR_POLARITY\t\t(WILC_INTR_REG_BASE + 0x10)\n#define WILC_INTR_TYPE\t\t\t(WILC_INTR_REG_BASE + 0x20)\n#define WILC_INTR_CLEAR\t\t\t(WILC_INTR_REG_BASE + 0x30)\n#define WILC_INTR_STATUS\t\t(WILC_INTR_REG_BASE + 0x40)\n\n#define WILC_RF_REVISION_ID\t\t0x13f4\n\n#define WILC_VMM_TBL_SIZE\t\t64\n#define WILC_VMM_TX_TBL_BASE\t\t0x150400\n#define WILC_VMM_RX_TBL_BASE\t\t0x150500\n\n#define WILC_VMM_BASE\t\t\t0x150000\n#define WILC_VMM_CORE_CTL\t\tWILC_VMM_BASE\n#define WILC_VMM_TBL_CTL\t\t(WILC_VMM_BASE + 0x4)\n#define WILC_VMM_TBL_ENTRY\t\t(WILC_VMM_BASE + 0x8)\n#define WILC_VMM_TBL0_SIZE\t\t(WILC_VMM_BASE + 0xc)\n#define WILC_VMM_TO_HOST_SIZE\t\t(WILC_VMM_BASE + 0x10)\n#define WILC_VMM_CORE_CFG\t\t(WILC_VMM_BASE + 0x14)\n#define WILC_VMM_TBL_ACTIVE\t\t(WILC_VMM_BASE + 040)\n#define WILC_VMM_TBL_STATUS\t\t(WILC_VMM_BASE + 0x44)\n\n#define WILC_SPI_REG_BASE\t\t0xe800\n#define WILC_SPI_CTL\t\t\tWILC_SPI_REG_BASE\n#define WILC_SPI_MASTER_DMA_ADDR\t(WILC_SPI_REG_BASE + 0x4)\n#define WILC_SPI_MASTER_DMA_COUNT\t(WILC_SPI_REG_BASE + 0x8)\n#define WILC_SPI_SLAVE_DMA_ADDR\t\t(WILC_SPI_REG_BASE + 0xc)\n#define WILC_SPI_SLAVE_DMA_COUNT\t(WILC_SPI_REG_BASE + 0x10)\n#define WILC_SPI_TX_MODE\t\t(WILC_SPI_REG_BASE + 0x20)\n#define WILC_SPI_PROTOCOL_CONFIG\t(WILC_SPI_REG_BASE + 0x24)\n#define WILC_SPI_INTR_CTL\t\t(WILC_SPI_REG_BASE + 0x2c)\n#define WILC_SPI_INT_STATUS\t\t(WILC_SPI_REG_BASE + 0x40)\n#define WILC_SPI_INT_CLEAR\t\t(WILC_SPI_REG_BASE + 0x44)\n\n#define WILC_SPI_WAKEUP_REG\t\t0x1\n#define WILC_SPI_WAKEUP_BIT\t\tBIT(1)\n\n#define WILC_SPI_CLK_STATUS_REG        0x0f\n#define WILC_SPI_CLK_STATUS_BIT        BIT(2)\n#define WILC_SPI_HOST_TO_FW_REG\t\t0x0b\n#define WILC_SPI_HOST_TO_FW_BIT\t\tBIT(0)\n\n#define WILC_SPI_FW_TO_HOST_REG\t\t0x10\n#define WILC_SPI_FW_TO_HOST_BIT\t\tBIT(0)\n\n#define WILC_SPI_PROTOCOL_OFFSET\t(WILC_SPI_PROTOCOL_CONFIG - \\\n\t\t\t\t\t WILC_SPI_REG_BASE)\n\n#define WILC_SPI_CLOCKLESS_ADDR_LIMIT\t0x30\n\n \n#define WILC_SDIO_CCCR_IO_EN_FUNC1\tBIT(1)\n\n \n#define WILC_SDIO_CCCR_IEN_MASTER\tBIT(0)\n#define WILC_SDIO_CCCR_IEN_FUNC1\tBIT(1)\n\n \n#define WILC_SDIO_CCCR_ABORT_RESET\tBIT(3)\n\n \n#define WILC_SDIO_WAKEUP_REG\t\t0xf0\n#define WILC_SDIO_WAKEUP_BIT\t\tBIT(0)\n\n#define WILC_SDIO_CLK_STATUS_REG\t0xf1\n#define WILC_SDIO_CLK_STATUS_BIT\tBIT(0)\n\n#define WILC_SDIO_INTERRUPT_DATA_SZ_REG\t0xf2  \n\n#define WILC_SDIO_VMM_TBL_CTRL_REG\t0xf6\n#define WILC_SDIO_IRQ_FLAG_REG\t\t0xf7\n#define WILC_SDIO_IRQ_CLEAR_FLAG_REG\t0xf8\n\n#define WILC_SDIO_HOST_TO_FW_REG\t0xfa\n#define WILC_SDIO_HOST_TO_FW_BIT\tBIT(0)\n\n#define WILC_SDIO_FW_TO_HOST_REG\t0xfc\n#define WILC_SDIO_FW_TO_HOST_BIT\tBIT(0)\n\n \n#define WILC_SDIO_FBR_CSA_REG\t\t0x10C  \n#define WILC_SDIO_FBR_DATA_REG\t\t0x10F\n\n#define WILC_SDIO_F1_DATA_REG\t\t0x0\n#define WILC_SDIO_EXT_IRQ_FLAG_REG\t0x4\n\n#define WILC_AHB_DATA_MEM_BASE\t\t0x30000\n#define WILC_AHB_SHARE_MEM_BASE\t\t0xd0000\n\n#define WILC_VMM_TBL_RX_SHADOW_BASE\tWILC_AHB_SHARE_MEM_BASE\n#define WILC_VMM_TBL_RX_SHADOW_SIZE\t256\n\n#define WILC_FW_HOST_COMM\t\t0x13c0\n#define WILC_GP_REG_0\t\t\t0x149c\n#define WILC_GP_REG_1\t\t\t0x14a0\n\n#define WILC_HAVE_SDIO_IRQ_GPIO\t\tBIT(0)\n#define WILC_HAVE_USE_PMU\t\tBIT(1)\n#define WILC_HAVE_SLEEP_CLK_SRC_RTC\tBIT(2)\n#define WILC_HAVE_SLEEP_CLK_SRC_XO\tBIT(3)\n#define WILC_HAVE_EXT_PA_INV_TX_RX\tBIT(4)\n#define WILC_HAVE_LEGACY_RF_SETTINGS\tBIT(5)\n#define WILC_HAVE_XTAL_24\t\tBIT(6)\n#define WILC_HAVE_DISABLE_WILC_UART\tBIT(7)\n#define WILC_HAVE_USE_IRQ_AS_HOST_WAKE\tBIT(8)\n\n#define WILC_CORTUS_INTERRUPT_BASE\t0x10A8\n#define WILC_CORTUS_INTERRUPT_1\t\t(WILC_CORTUS_INTERRUPT_BASE + 0x4)\n#define WILC_CORTUS_INTERRUPT_2\t\t(WILC_CORTUS_INTERRUPT_BASE + 0x8)\n\n \n#define WILC_REG_4_TO_1_RX\t\t0x1e1c\n\n \n#define WILC_REG_4_TO_1_TX_BANK0\t0x1e9c\n\n#define WILC_CORTUS_RESET_MUX_SEL\t0x1118\n#define WILC_CORTUS_BOOT_REGISTER\t0xc0000\n\n#define WILC_CORTUS_BOOT_FROM_IRAM\t0x71\n\n#define WILC_1000_BASE_ID\t\t0x100000\n\n#define WILC_1000_BASE_ID_2A\t\t0x1002A0\n#define WILC_1000_BASE_ID_2A_REV1\t(WILC_1000_BASE_ID_2A + 1)\n\n#define WILC_1000_BASE_ID_2B\t\t0x1002B0\n#define WILC_1000_BASE_ID_2B_REV1\t(WILC_1000_BASE_ID_2B + 1)\n#define WILC_1000_BASE_ID_2B_REV2\t(WILC_1000_BASE_ID_2B + 2)\n\n#define WILC_CHIP_REV_FIELD\t\tGENMASK(11, 0)\n\n \n#define WILC_CFG_PKT\t\t1\n#define WILC_NET_PKT\t\t0\n#define WILC_MGMT_PKT\t\t2\n\n#define WILC_CFG_SET\t\t1\n#define WILC_CFG_QUERY\t\t0\n\n#define WILC_CFG_RSP\t\t1\n#define WILC_CFG_RSP_STATUS\t2\n#define WILC_CFG_RSP_SCAN\t3\n\n#define WILC_ABORT_REQ_BIT\t\tBIT(31)\n\n#define WILC_RX_BUFF_SIZE\t(96 * 1024)\n#define WILC_TX_BUFF_SIZE\t(64 * 1024)\n\n#define NQUEUES\t\t\t4\n#define AC_BUFFER_SIZE\t\t1000\n\n#define VO_AC_COUNT_FIELD\t\tGENMASK(31, 25)\n#define VO_AC_ACM_STAT_FIELD\t\tBIT(24)\n#define VI_AC_COUNT_FIELD\t\tGENMASK(23, 17)\n#define VI_AC_ACM_STAT_FIELD\t\tBIT(16)\n#define BE_AC_COUNT_FIELD\t\tGENMASK(15, 9)\n#define BE_AC_ACM_STAT_FIELD\t\tBIT(8)\n#define BK_AC_COUNT_FIELD\t\tGENMASK(7, 3)\n#define BK_AC_ACM_STAT_FIELD\t\tBIT(1)\n\n#define WILC_PKT_HDR_CONFIG_FIELD\tBIT(31)\n#define WILC_PKT_HDR_OFFSET_FIELD\tGENMASK(30, 22)\n#define WILC_PKT_HDR_TOTAL_LEN_FIELD\tGENMASK(21, 11)\n#define WILC_PKT_HDR_LEN_FIELD\t\tGENMASK(10, 0)\n\n#define WILC_INTERRUPT_DATA_SIZE\tGENMASK(14, 0)\n\n#define WILC_VMM_BUFFER_SIZE\t\tGENMASK(9, 0)\n\n#define WILC_VMM_HDR_TYPE\t\tBIT(31)\n#define WILC_VMM_HDR_MGMT_FIELD\t\tBIT(30)\n#define WILC_VMM_HDR_PKT_SIZE\t\tGENMASK(29, 15)\n#define WILC_VMM_HDR_BUFF_SIZE\t\tGENMASK(14, 0)\n\n#define WILC_VMM_ENTRY_COUNT\t\tGENMASK(8, 3)\n#define WILC_VMM_ENTRY_AVAILABLE\tBIT(2)\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n#define IRG_FLAGS_OFFSET\t16\n#define IRQ_DMA_WD_CNT_MASK\tGENMASK(IRG_FLAGS_OFFSET - 1, 0)\n#define INT_0\t\t\tBIT(IRG_FLAGS_OFFSET)\n#define INT_1\t\t\tBIT(IRG_FLAGS_OFFSET + 1)\n#define INT_2\t\t\tBIT(IRG_FLAGS_OFFSET + 2)\n#define INT_3\t\t\tBIT(IRG_FLAGS_OFFSET + 3)\n#define INT_4\t\t\tBIT(IRG_FLAGS_OFFSET + 4)\n#define INT_5\t\t\tBIT(IRG_FLAGS_OFFSET + 5)\n#define MAX_NUM_INT\t\t5\n#define IRG_FLAGS_MASK\t\tGENMASK(IRG_FLAGS_OFFSET + MAX_NUM_INT, \\\n\t\t\t\t\tIRG_FLAGS_OFFSET)\n\n \n \n \n \n \n \n \n \n \n \n \n \n \n#define CLR_INT0\t\tBIT(0)\n#define CLR_INT1\t\tBIT(1)\n#define CLR_INT2\t\tBIT(2)\n#define CLR_INT3\t\tBIT(3)\n#define CLR_INT4\t\tBIT(4)\n#define CLR_INT5\t\tBIT(5)\n#define SEL_VMM_TBL0\t\tBIT(6)\n#define SEL_VMM_TBL1\t\tBIT(7)\n#define EN_VMM\t\t\tBIT(8)\n\n#define DATA_INT_EXT\t\tINT_0\n#define ALL_INT_EXT\t\tDATA_INT_EXT\n#define NUM_INT_EXT\t\t1\n#define UNHANDLED_IRQ_MASK\tGENMASK(MAX_NUM_INT - 1, NUM_INT_EXT)\n\n#define DATA_INT_CLR\t\tCLR_INT0\n\n#define ENABLE_RX_VMM\t\t(SEL_VMM_TBL1 | EN_VMM)\n#define ENABLE_TX_VMM\t\t(SEL_VMM_TBL0 | EN_VMM)\n \n#define WILC_CFG_PKTS_TIMEOUT\tmsecs_to_jiffies(3000)\n\n#define IS_MANAGMEMENT\t\t0x100\n#define IS_MANAGMEMENT_CALLBACK\t0x080\n#define IS_MGMT_STATUS_SUCCES\t0x040\n#define IS_MGMT_AUTH_PKT       0x010\n\n#define WILC_WID_TYPE\t\tGENMASK(15, 12)\n#define WILC_VMM_ENTRY_FULL_RETRY\t1\n \nenum ip_pkt_priority {\n\tAC_VO_Q = 0,\n\tAC_VI_Q = 1,\n\tAC_BE_Q = 2,\n\tAC_BK_Q = 3\n};\n\nstruct txq_entry_t {\n\tstruct list_head list;\n\tint type;\n\tu8 q_num;\n\tint ack_idx;\n\tu8 *buffer;\n\tint buffer_size;\n\tvoid *priv;\n\tint status;\n\tstruct wilc_vif *vif;\n\tvoid (*tx_complete_func)(void *priv, int status);\n};\n\nstruct txq_fw_recv_queue_stat {\n\tu8 acm;\n\tu8 count;\n};\n\nstruct txq_handle {\n\tstruct txq_entry_t txq_head;\n\tu16 count;\n\tstruct txq_fw_recv_queue_stat fw;\n};\n\nstruct rxq_entry_t {\n\tstruct list_head list;\n\tu8 *buffer;\n\tint buffer_size;\n};\n\n \nstruct wilc;\nstruct wilc_hif_func {\n\tint (*hif_init)(struct wilc *wilc, bool resume);\n\tint (*hif_deinit)(struct wilc *wilc);\n\tint (*hif_read_reg)(struct wilc *wilc, u32 addr, u32 *data);\n\tint (*hif_write_reg)(struct wilc *wilc, u32 addr, u32 data);\n\tint (*hif_block_rx)(struct wilc *wilc, u32 addr, u8 *buf, u32 size);\n\tint (*hif_block_tx)(struct wilc *wilc, u32 addr, u8 *buf, u32 size);\n\tint (*hif_read_int)(struct wilc *wilc, u32 *int_status);\n\tint (*hif_clear_int_ext)(struct wilc *wilc, u32 val);\n\tint (*hif_read_size)(struct wilc *wilc, u32 *size);\n\tint (*hif_block_tx_ext)(struct wilc *wilc, u32 addr, u8 *buf, u32 size);\n\tint (*hif_block_rx_ext)(struct wilc *wilc, u32 addr, u8 *buf, u32 size);\n\tint (*hif_sync_ext)(struct wilc *wilc, int nint);\n\tint (*enable_interrupt)(struct wilc *nic);\n\tvoid (*disable_interrupt)(struct wilc *nic);\n\tint (*hif_reset)(struct wilc *wilc);\n\tbool (*hif_is_init)(struct wilc *wilc);\n};\n\n#define WILC_MAX_CFG_FRAME_SIZE\t\t1468\n\nstruct tx_complete_data {\n\tint size;\n\tvoid *buff;\n\tstruct sk_buff *skb;\n};\n\nstruct wilc_cfg_cmd_hdr {\n\tu8 cmd_type;\n\tu8 seq_no;\n\t__le16 total_len;\n\t__le32 driver_handler;\n};\n\nstruct wilc_cfg_frame {\n\tstruct wilc_cfg_cmd_hdr hdr;\n\tu8 frame[WILC_MAX_CFG_FRAME_SIZE];\n};\n\nstruct wilc_cfg_rsp {\n\tu8 type;\n\tu8 seq_no;\n};\n\nstruct wilc_vif;\n\nint wilc_wlan_firmware_download(struct wilc *wilc, const u8 *buffer,\n\t\t\t\tu32 buffer_size);\nint wilc_wlan_start(struct wilc *wilc);\nint wilc_wlan_stop(struct wilc *wilc, struct wilc_vif *vif);\nint wilc_wlan_txq_add_net_pkt(struct net_device *dev,\n\t\t\t      struct tx_complete_data *tx_data, u8 *buffer,\n\t\t\t      u32 buffer_size,\n\t\t\t      void (*tx_complete_fn)(void *, int));\nint wilc_wlan_handle_txq(struct wilc *wl, u32 *txq_count);\nvoid wilc_handle_isr(struct wilc *wilc);\nvoid wilc_wlan_cleanup(struct net_device *dev);\nint wilc_wlan_cfg_set(struct wilc_vif *vif, int start, u16 wid, u8 *buffer,\n\t\t      u32 buffer_size, int commit, u32 drv_handler);\nint wilc_wlan_cfg_get(struct wilc_vif *vif, int start, u16 wid, int commit,\n\t\t      u32 drv_handler);\nint wilc_wlan_txq_add_mgmt_pkt(struct net_device *dev, void *priv, u8 *buffer,\n\t\t\t       u32 buffer_size, void (*func)(void *, int));\nvoid wilc_enable_tcp_ack_filter(struct wilc_vif *vif, bool value);\nint wilc_wlan_get_num_conn_ifcs(struct wilc *wilc);\nnetdev_tx_t wilc_mac_xmit(struct sk_buff *skb, struct net_device *dev);\n\nvoid wilc_wfi_p2p_rx(struct wilc_vif *vif, u8 *buff, u32 size);\nbool wilc_wfi_mgmt_frame_rx(struct wilc_vif *vif, u8 *buff, u32 size);\nvoid host_wakeup_notify(struct wilc *wilc);\nvoid host_sleep_notify(struct wilc *wilc);\nvoid chip_allow_sleep(struct wilc *wilc);\nvoid chip_wakeup(struct wilc *wilc);\nint wilc_send_config_pkt(struct wilc_vif *vif, u8 mode, struct wid *wids,\n\t\t\t u32 count);\nint wilc_wlan_init(struct net_device *dev);\nu32 wilc_get_chipid(struct wilc *wilc, bool update);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}