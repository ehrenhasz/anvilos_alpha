{
  "module_name": "gpio-lpc32xx.c",
  "hash_id": "e722ae88ea75a656ccc01b643b9dde295309893798d03f4f1a05fe4283dde800",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpio/gpio-lpc32xx.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/errno.h>\n#include <linux/gpio/driver.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/module.h>\n\n#define LPC32XX_GPIO_P3_INP_STATE\t\t(0x000)\n#define LPC32XX_GPIO_P3_OUTP_SET\t\t(0x004)\n#define LPC32XX_GPIO_P3_OUTP_CLR\t\t(0x008)\n#define LPC32XX_GPIO_P3_OUTP_STATE\t\t(0x00C)\n#define LPC32XX_GPIO_P2_DIR_SET\t\t\t(0x010)\n#define LPC32XX_GPIO_P2_DIR_CLR\t\t\t(0x014)\n#define LPC32XX_GPIO_P2_DIR_STATE\t\t(0x018)\n#define LPC32XX_GPIO_P2_INP_STATE\t\t(0x01C)\n#define LPC32XX_GPIO_P2_OUTP_SET\t\t(0x020)\n#define LPC32XX_GPIO_P2_OUTP_CLR\t\t(0x024)\n#define LPC32XX_GPIO_P2_MUX_SET\t\t\t(0x028)\n#define LPC32XX_GPIO_P2_MUX_CLR\t\t\t(0x02C)\n#define LPC32XX_GPIO_P2_MUX_STATE\t\t(0x030)\n#define LPC32XX_GPIO_P0_INP_STATE\t\t(0x040)\n#define LPC32XX_GPIO_P0_OUTP_SET\t\t(0x044)\n#define LPC32XX_GPIO_P0_OUTP_CLR\t\t(0x048)\n#define LPC32XX_GPIO_P0_OUTP_STATE\t\t(0x04C)\n#define LPC32XX_GPIO_P0_DIR_SET\t\t\t(0x050)\n#define LPC32XX_GPIO_P0_DIR_CLR\t\t\t(0x054)\n#define LPC32XX_GPIO_P0_DIR_STATE\t\t(0x058)\n#define LPC32XX_GPIO_P1_INP_STATE\t\t(0x060)\n#define LPC32XX_GPIO_P1_OUTP_SET\t\t(0x064)\n#define LPC32XX_GPIO_P1_OUTP_CLR\t\t(0x068)\n#define LPC32XX_GPIO_P1_OUTP_STATE\t\t(0x06C)\n#define LPC32XX_GPIO_P1_DIR_SET\t\t\t(0x070)\n#define LPC32XX_GPIO_P1_DIR_CLR\t\t\t(0x074)\n#define LPC32XX_GPIO_P1_DIR_STATE\t\t(0x078)\n\n#define GPIO012_PIN_TO_BIT(x)\t\t\t(1 << (x))\n#define GPIO3_PIN_TO_BIT(x)\t\t\t(1 << ((x) + 25))\n#define GPO3_PIN_TO_BIT(x)\t\t\t(1 << (x))\n#define GPIO012_PIN_IN_SEL(x, y)\t\t(((x) >> (y)) & 1)\n#define GPIO3_PIN_IN_SHIFT(x)\t\t\t((x) == 5 ? 24 : 10 + (x))\n#define GPIO3_PIN_IN_SEL(x, y)\t\t\t(((x) >> GPIO3_PIN_IN_SHIFT(y)) & 1)\n#define GPIO3_PIN5_IN_SEL(x)\t\t\t(((x) >> 24) & 1)\n#define GPI3_PIN_IN_SEL(x, y)\t\t\t(((x) >> (y)) & 1)\n#define GPO3_PIN_IN_SEL(x, y)\t\t\t(((x) >> (y)) & 1)\n\n#define LPC32XX_GPIO_P0_MAX\t8\n#define LPC32XX_GPIO_P1_MAX\t24\n#define LPC32XX_GPIO_P2_MAX\t13\n#define LPC32XX_GPIO_P3_MAX\t6\n#define LPC32XX_GPI_P3_MAX\t29\n#define LPC32XX_GPO_P3_MAX\t24\n\n#define LPC32XX_GPIO_P0_GRP\t0\n#define LPC32XX_GPIO_P1_GRP\t(LPC32XX_GPIO_P0_GRP + LPC32XX_GPIO_P0_MAX)\n#define LPC32XX_GPIO_P2_GRP\t(LPC32XX_GPIO_P1_GRP + LPC32XX_GPIO_P1_MAX)\n#define LPC32XX_GPIO_P3_GRP\t(LPC32XX_GPIO_P2_GRP + LPC32XX_GPIO_P2_MAX)\n#define LPC32XX_GPI_P3_GRP\t(LPC32XX_GPIO_P3_GRP + LPC32XX_GPIO_P3_MAX)\n#define LPC32XX_GPO_P3_GRP\t(LPC32XX_GPI_P3_GRP + LPC32XX_GPI_P3_MAX)\n\nstruct gpio_regs {\n\tunsigned long inp_state;\n\tunsigned long outp_state;\n\tunsigned long outp_set;\n\tunsigned long outp_clr;\n\tunsigned long dir_set;\n\tunsigned long dir_clr;\n};\n\n \nstatic const char *gpio_p0_names[LPC32XX_GPIO_P0_MAX] = {\n\t\"p0.0\", \"p0.1\", \"p0.2\", \"p0.3\",\n\t\"p0.4\", \"p0.5\", \"p0.6\", \"p0.7\"\n};\n\nstatic const char *gpio_p1_names[LPC32XX_GPIO_P1_MAX] = {\n\t\"p1.0\", \"p1.1\", \"p1.2\", \"p1.3\",\n\t\"p1.4\", \"p1.5\", \"p1.6\", \"p1.7\",\n\t\"p1.8\", \"p1.9\", \"p1.10\", \"p1.11\",\n\t\"p1.12\", \"p1.13\", \"p1.14\", \"p1.15\",\n\t\"p1.16\", \"p1.17\", \"p1.18\", \"p1.19\",\n\t\"p1.20\", \"p1.21\", \"p1.22\", \"p1.23\",\n};\n\nstatic const char *gpio_p2_names[LPC32XX_GPIO_P2_MAX] = {\n\t\"p2.0\", \"p2.1\", \"p2.2\", \"p2.3\",\n\t\"p2.4\", \"p2.5\", \"p2.6\", \"p2.7\",\n\t\"p2.8\", \"p2.9\", \"p2.10\", \"p2.11\",\n\t\"p2.12\"\n};\n\nstatic const char *gpio_p3_names[LPC32XX_GPIO_P3_MAX] = {\n\t\"gpio00\", \"gpio01\", \"gpio02\", \"gpio03\",\n\t\"gpio04\", \"gpio05\"\n};\n\nstatic const char *gpi_p3_names[LPC32XX_GPI_P3_MAX] = {\n\t\"gpi00\", \"gpi01\", \"gpi02\", \"gpi03\",\n\t\"gpi04\", \"gpi05\", \"gpi06\", \"gpi07\",\n\t\"gpi08\", \"gpi09\",  NULL,    NULL,\n\t NULL,    NULL,    NULL,   \"gpi15\",\n\t\"gpi16\", \"gpi17\", \"gpi18\", \"gpi19\",\n\t\"gpi20\", \"gpi21\", \"gpi22\", \"gpi23\",\n\t\"gpi24\", \"gpi25\", \"gpi26\", \"gpi27\",\n\t\"gpi28\"\n};\n\nstatic const char *gpo_p3_names[LPC32XX_GPO_P3_MAX] = {\n\t\"gpo00\", \"gpo01\", \"gpo02\", \"gpo03\",\n\t\"gpo04\", \"gpo05\", \"gpo06\", \"gpo07\",\n\t\"gpo08\", \"gpo09\", \"gpo10\", \"gpo11\",\n\t\"gpo12\", \"gpo13\", \"gpo14\", \"gpo15\",\n\t\"gpo16\", \"gpo17\", \"gpo18\", \"gpo19\",\n\t\"gpo20\", \"gpo21\", \"gpo22\", \"gpo23\"\n};\n\nstatic struct gpio_regs gpio_grp_regs_p0 = {\n\t.inp_state\t= LPC32XX_GPIO_P0_INP_STATE,\n\t.outp_set\t= LPC32XX_GPIO_P0_OUTP_SET,\n\t.outp_clr\t= LPC32XX_GPIO_P0_OUTP_CLR,\n\t.dir_set\t= LPC32XX_GPIO_P0_DIR_SET,\n\t.dir_clr\t= LPC32XX_GPIO_P0_DIR_CLR,\n};\n\nstatic struct gpio_regs gpio_grp_regs_p1 = {\n\t.inp_state\t= LPC32XX_GPIO_P1_INP_STATE,\n\t.outp_set\t= LPC32XX_GPIO_P1_OUTP_SET,\n\t.outp_clr\t= LPC32XX_GPIO_P1_OUTP_CLR,\n\t.dir_set\t= LPC32XX_GPIO_P1_DIR_SET,\n\t.dir_clr\t= LPC32XX_GPIO_P1_DIR_CLR,\n};\n\nstatic struct gpio_regs gpio_grp_regs_p2 = {\n\t.inp_state\t= LPC32XX_GPIO_P2_INP_STATE,\n\t.outp_set\t= LPC32XX_GPIO_P2_OUTP_SET,\n\t.outp_clr\t= LPC32XX_GPIO_P2_OUTP_CLR,\n\t.dir_set\t= LPC32XX_GPIO_P2_DIR_SET,\n\t.dir_clr\t= LPC32XX_GPIO_P2_DIR_CLR,\n};\n\nstatic struct gpio_regs gpio_grp_regs_p3 = {\n\t.inp_state\t= LPC32XX_GPIO_P3_INP_STATE,\n\t.outp_state\t= LPC32XX_GPIO_P3_OUTP_STATE,\n\t.outp_set\t= LPC32XX_GPIO_P3_OUTP_SET,\n\t.outp_clr\t= LPC32XX_GPIO_P3_OUTP_CLR,\n\t.dir_set\t= LPC32XX_GPIO_P2_DIR_SET,\n\t.dir_clr\t= LPC32XX_GPIO_P2_DIR_CLR,\n};\n\nstruct lpc32xx_gpio_chip {\n\tstruct gpio_chip\tchip;\n\tstruct gpio_regs\t*gpio_grp;\n\tvoid __iomem\t\t*reg_base;\n};\n\nstatic inline u32 gpreg_read(struct lpc32xx_gpio_chip *group, unsigned long offset)\n{\n\treturn __raw_readl(group->reg_base + offset);\n}\n\nstatic inline void gpreg_write(struct lpc32xx_gpio_chip *group, u32 val, unsigned long offset)\n{\n\t__raw_writel(val, group->reg_base + offset);\n}\n\nstatic void __set_gpio_dir_p012(struct lpc32xx_gpio_chip *group,\n\tunsigned pin, int input)\n{\n\tif (input)\n\t\tgpreg_write(group, GPIO012_PIN_TO_BIT(pin),\n\t\t\tgroup->gpio_grp->dir_clr);\n\telse\n\t\tgpreg_write(group, GPIO012_PIN_TO_BIT(pin),\n\t\t\tgroup->gpio_grp->dir_set);\n}\n\nstatic void __set_gpio_dir_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin, int input)\n{\n\tu32 u = GPIO3_PIN_TO_BIT(pin);\n\n\tif (input)\n\t\tgpreg_write(group, u, group->gpio_grp->dir_clr);\n\telse\n\t\tgpreg_write(group, u, group->gpio_grp->dir_set);\n}\n\nstatic void __set_gpio_level_p012(struct lpc32xx_gpio_chip *group,\n\tunsigned pin, int high)\n{\n\tif (high)\n\t\tgpreg_write(group, GPIO012_PIN_TO_BIT(pin),\n\t\t\tgroup->gpio_grp->outp_set);\n\telse\n\t\tgpreg_write(group, GPIO012_PIN_TO_BIT(pin),\n\t\t\tgroup->gpio_grp->outp_clr);\n}\n\nstatic void __set_gpio_level_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin, int high)\n{\n\tu32 u = GPIO3_PIN_TO_BIT(pin);\n\n\tif (high)\n\t\tgpreg_write(group, u, group->gpio_grp->outp_set);\n\telse\n\t\tgpreg_write(group, u, group->gpio_grp->outp_clr);\n}\n\nstatic void __set_gpo_level_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin, int high)\n{\n\tif (high)\n\t\tgpreg_write(group, GPO3_PIN_TO_BIT(pin), group->gpio_grp->outp_set);\n\telse\n\t\tgpreg_write(group, GPO3_PIN_TO_BIT(pin), group->gpio_grp->outp_clr);\n}\n\nstatic int __get_gpio_state_p012(struct lpc32xx_gpio_chip *group,\n\tunsigned pin)\n{\n\treturn GPIO012_PIN_IN_SEL(gpreg_read(group, group->gpio_grp->inp_state),\n\t\tpin);\n}\n\nstatic int __get_gpio_state_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin)\n{\n\tint state = gpreg_read(group, group->gpio_grp->inp_state);\n\n\t \n\treturn GPIO3_PIN_IN_SEL(state, pin);\n}\n\nstatic int __get_gpi_state_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin)\n{\n\treturn GPI3_PIN_IN_SEL(gpreg_read(group, group->gpio_grp->inp_state), pin);\n}\n\nstatic int __get_gpo_state_p3(struct lpc32xx_gpio_chip *group,\n\tunsigned pin)\n{\n\treturn GPO3_PIN_IN_SEL(gpreg_read(group, group->gpio_grp->outp_state), pin);\n}\n\n \nstatic int lpc32xx_gpio_dir_input_p012(struct gpio_chip *chip,\n\tunsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_dir_p012(group, pin, 1);\n\n\treturn 0;\n}\n\nstatic int lpc32xx_gpio_dir_input_p3(struct gpio_chip *chip,\n\tunsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_dir_p3(group, pin, 1);\n\n\treturn 0;\n}\n\nstatic int lpc32xx_gpio_dir_in_always(struct gpio_chip *chip,\n\tunsigned pin)\n{\n\treturn 0;\n}\n\nstatic int lpc32xx_gpio_get_value_p012(struct gpio_chip *chip, unsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\treturn !!__get_gpio_state_p012(group, pin);\n}\n\nstatic int lpc32xx_gpio_get_value_p3(struct gpio_chip *chip, unsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\treturn !!__get_gpio_state_p3(group, pin);\n}\n\nstatic int lpc32xx_gpi_get_value(struct gpio_chip *chip, unsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\treturn !!__get_gpi_state_p3(group, pin);\n}\n\nstatic int lpc32xx_gpio_dir_output_p012(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_level_p012(group, pin, value);\n\t__set_gpio_dir_p012(group, pin, 0);\n\n\treturn 0;\n}\n\nstatic int lpc32xx_gpio_dir_output_p3(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_level_p3(group, pin, value);\n\t__set_gpio_dir_p3(group, pin, 0);\n\n\treturn 0;\n}\n\nstatic int lpc32xx_gpio_dir_out_always(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpo_level_p3(group, pin, value);\n\treturn 0;\n}\n\nstatic void lpc32xx_gpio_set_value_p012(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_level_p012(group, pin, value);\n}\n\nstatic void lpc32xx_gpio_set_value_p3(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpio_level_p3(group, pin, value);\n}\n\nstatic void lpc32xx_gpo_set_value(struct gpio_chip *chip, unsigned pin,\n\tint value)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\t__set_gpo_level_p3(group, pin, value);\n}\n\nstatic int lpc32xx_gpo_get_value(struct gpio_chip *chip, unsigned pin)\n{\n\tstruct lpc32xx_gpio_chip *group = gpiochip_get_data(chip);\n\n\treturn !!__get_gpo_state_p3(group, pin);\n}\n\nstatic int lpc32xx_gpio_request(struct gpio_chip *chip, unsigned pin)\n{\n\tif (pin < chip->ngpio)\n\t\treturn 0;\n\n\treturn -EINVAL;\n}\n\nstatic int lpc32xx_gpio_to_irq_p01(struct gpio_chip *chip, unsigned offset)\n{\n\treturn -ENXIO;\n}\n\nstatic int lpc32xx_gpio_to_irq_gpio_p3(struct gpio_chip *chip, unsigned offset)\n{\n\treturn -ENXIO;\n}\n\nstatic int lpc32xx_gpio_to_irq_gpi_p3(struct gpio_chip *chip, unsigned offset)\n{\n\treturn -ENXIO;\n}\n\nstatic struct lpc32xx_gpio_chip lpc32xx_gpiochip[] = {\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpio_p0\",\n\t\t\t.direction_input\t= lpc32xx_gpio_dir_input_p012,\n\t\t\t.get\t\t\t= lpc32xx_gpio_get_value_p012,\n\t\t\t.direction_output\t= lpc32xx_gpio_dir_output_p012,\n\t\t\t.set\t\t\t= lpc32xx_gpio_set_value_p012,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.to_irq\t\t\t= lpc32xx_gpio_to_irq_p01,\n\t\t\t.base\t\t\t= LPC32XX_GPIO_P0_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPIO_P0_MAX,\n\t\t\t.names\t\t\t= gpio_p0_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p0,\n\t},\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpio_p1\",\n\t\t\t.direction_input\t= lpc32xx_gpio_dir_input_p012,\n\t\t\t.get\t\t\t= lpc32xx_gpio_get_value_p012,\n\t\t\t.direction_output\t= lpc32xx_gpio_dir_output_p012,\n\t\t\t.set\t\t\t= lpc32xx_gpio_set_value_p012,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.to_irq\t\t\t= lpc32xx_gpio_to_irq_p01,\n\t\t\t.base\t\t\t= LPC32XX_GPIO_P1_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPIO_P1_MAX,\n\t\t\t.names\t\t\t= gpio_p1_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p1,\n\t},\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpio_p2\",\n\t\t\t.direction_input\t= lpc32xx_gpio_dir_input_p012,\n\t\t\t.get\t\t\t= lpc32xx_gpio_get_value_p012,\n\t\t\t.direction_output\t= lpc32xx_gpio_dir_output_p012,\n\t\t\t.set\t\t\t= lpc32xx_gpio_set_value_p012,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.base\t\t\t= LPC32XX_GPIO_P2_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPIO_P2_MAX,\n\t\t\t.names\t\t\t= gpio_p2_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p2,\n\t},\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpio_p3\",\n\t\t\t.direction_input\t= lpc32xx_gpio_dir_input_p3,\n\t\t\t.get\t\t\t= lpc32xx_gpio_get_value_p3,\n\t\t\t.direction_output\t= lpc32xx_gpio_dir_output_p3,\n\t\t\t.set\t\t\t= lpc32xx_gpio_set_value_p3,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.to_irq\t\t\t= lpc32xx_gpio_to_irq_gpio_p3,\n\t\t\t.base\t\t\t= LPC32XX_GPIO_P3_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPIO_P3_MAX,\n\t\t\t.names\t\t\t= gpio_p3_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p3,\n\t},\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpi_p3\",\n\t\t\t.direction_input\t= lpc32xx_gpio_dir_in_always,\n\t\t\t.get\t\t\t= lpc32xx_gpi_get_value,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.to_irq\t\t\t= lpc32xx_gpio_to_irq_gpi_p3,\n\t\t\t.base\t\t\t= LPC32XX_GPI_P3_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPI_P3_MAX,\n\t\t\t.names\t\t\t= gpi_p3_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p3,\n\t},\n\t{\n\t\t.chip = {\n\t\t\t.label\t\t\t= \"gpo_p3\",\n\t\t\t.direction_output\t= lpc32xx_gpio_dir_out_always,\n\t\t\t.set\t\t\t= lpc32xx_gpo_set_value,\n\t\t\t.get\t\t\t= lpc32xx_gpo_get_value,\n\t\t\t.request\t\t= lpc32xx_gpio_request,\n\t\t\t.base\t\t\t= LPC32XX_GPO_P3_GRP,\n\t\t\t.ngpio\t\t\t= LPC32XX_GPO_P3_MAX,\n\t\t\t.names\t\t\t= gpo_p3_names,\n\t\t\t.can_sleep\t\t= false,\n\t\t},\n\t\t.gpio_grp = &gpio_grp_regs_p3,\n\t},\n};\n\nstatic int lpc32xx_of_xlate(struct gpio_chip *gc,\n\t\t\t    const struct of_phandle_args *gpiospec, u32 *flags)\n{\n\t \n\tu32 bank = gpiospec->args[0];\n\tif ((bank >= ARRAY_SIZE(lpc32xx_gpiochip) ||\n\t    (gc != &lpc32xx_gpiochip[bank].chip)))\n\t\treturn -EINVAL;\n\n\tif (flags)\n\t\t*flags = gpiospec->args[2];\n\treturn gpiospec->args[1];\n}\n\nstatic int lpc32xx_gpio_probe(struct platform_device *pdev)\n{\n\tint i;\n\tvoid __iomem *reg_base;\n\n\treg_base = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(reg_base))\n\t\treturn PTR_ERR(reg_base);\n\n\tfor (i = 0; i < ARRAY_SIZE(lpc32xx_gpiochip); i++) {\n\t\tlpc32xx_gpiochip[i].chip.parent = &pdev->dev;\n\t\tif (pdev->dev.of_node) {\n\t\t\tlpc32xx_gpiochip[i].chip.of_xlate = lpc32xx_of_xlate;\n\t\t\tlpc32xx_gpiochip[i].chip.of_gpio_n_cells = 3;\n\t\t\tlpc32xx_gpiochip[i].reg_base = reg_base;\n\t\t}\n\t\tdevm_gpiochip_add_data(&pdev->dev, &lpc32xx_gpiochip[i].chip,\n\t\t\t\t  &lpc32xx_gpiochip[i]);\n\t}\n\n\treturn 0;\n}\n\nstatic const struct of_device_id lpc32xx_gpio_of_match[] = {\n\t{ .compatible = \"nxp,lpc3220-gpio\", },\n\t{ },\n};\n\nstatic struct platform_driver lpc32xx_gpio_driver = {\n\t.driver\t\t= {\n\t\t.name\t= \"lpc32xx-gpio\",\n\t\t.of_match_table = lpc32xx_gpio_of_match,\n\t},\n\t.probe\t\t= lpc32xx_gpio_probe,\n};\n\nmodule_platform_driver(lpc32xx_gpio_driver);\n\nMODULE_AUTHOR(\"Kevin Wells <kevin.wells@nxp.com>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_DESCRIPTION(\"GPIO driver for LPC32xx SoC\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}