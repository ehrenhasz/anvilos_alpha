{
  "module_name": "gpio-clps711x.c",
  "hash_id": "c54307a96d2a0c59da5d3c2f1b41a787972e21f35219be36ba5a8445a3bae943",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpio/gpio-clps711x.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/module.h>\n#include <linux/gpio/driver.h>\n#include <linux/platform_device.h>\n\nstatic int clps711x_gpio_probe(struct platform_device *pdev)\n{\n\tstruct device_node *np = pdev->dev.of_node;\n\tvoid __iomem *dat, *dir;\n\tstruct gpio_chip *gc;\n\tint err, id;\n\n\tif (!np)\n\t\treturn -ENODEV;\n\n\tid = of_alias_get_id(np, \"gpio\");\n\tif ((id < 0) || (id > 4))\n\t\treturn -ENODEV;\n\n\tgc = devm_kzalloc(&pdev->dev, sizeof(*gc), GFP_KERNEL);\n\tif (!gc)\n\t\treturn -ENOMEM;\n\n\tdat = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(dat))\n\t\treturn PTR_ERR(dat);\n\n\tdir = devm_platform_ioremap_resource(pdev, 1);\n\tif (IS_ERR(dir))\n\t\treturn PTR_ERR(dir);\n\n\tswitch (id) {\n\tcase 3:\n\t\t \n\t\terr = bgpio_init(gc, &pdev->dev, 1, dat, NULL, NULL,\n\t\t\t\t NULL, dir, 0);\n\t\tbreak;\n\tdefault:\n\t\terr = bgpio_init(gc, &pdev->dev, 1, dat, NULL, NULL,\n\t\t\t\t dir, NULL, 0);\n\t\tbreak;\n\t}\n\n\tif (err)\n\t\treturn err;\n\n\tswitch (id) {\n\tcase 4:\n\t\t \n\t\tgc->ngpio = 3;\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\tgc->base = -1;\n\tgc->owner = THIS_MODULE;\n\tplatform_set_drvdata(pdev, gc);\n\n\treturn devm_gpiochip_add_data(&pdev->dev, gc, NULL);\n}\n\nstatic const struct of_device_id clps711x_gpio_ids[] = {\n\t{ .compatible = \"cirrus,ep7209-gpio\" },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, clps711x_gpio_ids);\n\nstatic struct platform_driver clps711x_gpio_driver = {\n\t.driver\t= {\n\t\t.name\t\t= \"clps711x-gpio\",\n\t\t.of_match_table\t= clps711x_gpio_ids,\n\t},\n\t.probe\t= clps711x_gpio_probe,\n};\nmodule_platform_driver(clps711x_gpio_driver);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Alexander Shiyan <shc_work@mail.ru>\");\nMODULE_DESCRIPTION(\"CLPS711X GPIO driver\");\nMODULE_ALIAS(\"platform:clps711x-gpio\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}