{
  "module_name": "gpio-elkhartlake.c",
  "hash_id": "c9200addb69c817ed3450355cd642d329b55d2e319472bf15004d26b7077f419",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpio/gpio-elkhartlake.c",
  "human_readable_source": "\n \n\n#include <linux/device.h>\n#include <linux/err.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/pm.h>\n\n#include \"gpio-tangier.h\"\n\n \n#define EHL_PSE_NGPIO\t\t30\n\nstatic int ehl_gpio_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tstruct tng_gpio *priv;\n\tint irq, ret;\n\n\tirq = platform_get_irq(pdev, 0);\n\tif (irq < 0)\n\t\treturn irq;\n\n\tpriv = devm_kzalloc(dev, sizeof(*priv), GFP_KERNEL);\n\tif (!priv)\n\t\treturn -ENOMEM;\n\n\tpriv->reg_base = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(priv->reg_base))\n\t\treturn PTR_ERR(priv->reg_base);\n\n\tpriv->dev = dev;\n\tpriv->irq = irq;\n\n\tpriv->info.base = -1;\n\tpriv->info.ngpio = EHL_PSE_NGPIO;\n\n\tpriv->wake_regs.gwmr = GWMR_EHL;\n\tpriv->wake_regs.gwsr = GWSR_EHL;\n\tpriv->wake_regs.gsir = GSIR_EHL;\n\n\tret = devm_tng_gpio_probe(dev, priv);\n\tif (ret)\n\t\treturn dev_err_probe(dev, ret, \"tng_gpio_probe error\\n\");\n\n\tplatform_set_drvdata(pdev, priv);\n\treturn 0;\n}\n\nstatic int ehl_gpio_suspend(struct device *dev)\n{\n\treturn tng_gpio_suspend(dev);\n}\n\nstatic int ehl_gpio_resume(struct device *dev)\n{\n\treturn tng_gpio_resume(dev);\n}\n\nstatic DEFINE_SIMPLE_DEV_PM_OPS(ehl_gpio_pm_ops, ehl_gpio_suspend, ehl_gpio_resume);\n\nstatic const struct platform_device_id ehl_gpio_ids[] = {\n\t{ \"gpio-elkhartlake\" },\n\t{ }\n};\nMODULE_DEVICE_TABLE(platform, ehl_gpio_ids);\n\nstatic struct platform_driver ehl_gpio_driver = {\n\t.driver\t= {\n\t\t.name\t= \"gpio-elkhartlake\",\n\t\t.pm\t= pm_sleep_ptr(&ehl_gpio_pm_ops),\n\t},\n\t.probe\t\t= ehl_gpio_probe,\n\t.id_table\t= ehl_gpio_ids,\n};\nmodule_platform_driver(ehl_gpio_driver);\n\nMODULE_AUTHOR(\"Pandith N <pandith.n@intel.com>\");\nMODULE_AUTHOR(\"Raag Jadav <raag.jadav@intel.com>\");\nMODULE_DESCRIPTION(\"Intel Elkhart Lake PSE GPIO driver\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(GPIO_TANGIER);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}