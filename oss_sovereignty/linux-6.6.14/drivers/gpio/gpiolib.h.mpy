{
  "module_name": "gpiolib.h",
  "hash_id": "78e9037d84f113693cf24759aa527b675f58b34fb79cffb2b38977085c112646",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpio/gpiolib.h",
  "human_readable_source": " \n \n\n#ifndef GPIOLIB_H\n#define GPIOLIB_H\n\n#include <linux/cdev.h>\n#include <linux/device.h>\n#include <linux/err.h>\n#include <linux/gpio/consumer.h>  \n#include <linux/gpio/driver.h>\n#include <linux/module.h>\n#include <linux/notifier.h>\n#include <linux/rwsem.h>\n\n#define GPIOCHIP_NAME\t\"gpiochip\"\n\n \nstruct gpio_device {\n\tstruct device\t\tdev;\n\tstruct cdev\t\tchrdev;\n\tint\t\t\tid;\n\tstruct device\t\t*mockdev;\n\tstruct module\t\t*owner;\n\tstruct gpio_chip\t*chip;\n\tstruct gpio_desc\t*descs;\n\tint\t\t\tbase;\n\tu16\t\t\tngpio;\n\tconst char\t\t*label;\n\tvoid\t\t\t*data;\n\tstruct list_head        list;\n\tstruct blocking_notifier_head line_state_notifier;\n\tstruct blocking_notifier_head device_notifier;\n\tstruct rw_semaphore\tsem;\n\n#ifdef CONFIG_PINCTRL\n\t \n\tstruct list_head pin_ranges;\n#endif\n};\n\nstatic inline struct gpio_device *to_gpio_device(struct device *dev)\n{\n\treturn container_of(dev, struct gpio_device, dev);\n}\n\n \nstatic __maybe_unused const char * const gpio_suffixes[] = { \"gpios\", \"gpio\" };\n\n \nstruct gpio_array {\n\tstruct gpio_desc\t**desc;\n\tunsigned int\t\tsize;\n\tstruct gpio_chip\t*chip;\n\tunsigned long\t\t*get_mask;\n\tunsigned long\t\t*set_mask;\n\tunsigned long\t\tinvert_mask[];\n};\n\nstruct gpio_desc *gpiochip_get_desc(struct gpio_chip *gc, unsigned int hwnum);\n\n#define for_each_gpio_desc(gc, desc)\t\t\t\t\t\\\n\tfor (unsigned int __i = 0;\t\t\t\t\t\\\n\t     __i < gc->ngpio && (desc = gpiochip_get_desc(gc, __i));\t\\\n\t     __i++)\t\t\t\t\t\t\t\\\n\n#define for_each_gpio_desc_with_flag(gc, desc, flag)\t\t\t\\\n\tfor_each_gpio_desc(gc, desc)\t\t\t\t\t\\\n\t\tif (!test_bit(flag, &desc->flags)) {} else\n\nint gpiod_get_array_value_complex(bool raw, bool can_sleep,\n\t\t\t\t  unsigned int array_size,\n\t\t\t\t  struct gpio_desc **desc_array,\n\t\t\t\t  struct gpio_array *array_info,\n\t\t\t\t  unsigned long *value_bitmap);\nint gpiod_set_array_value_complex(bool raw, bool can_sleep,\n\t\t\t\t  unsigned int array_size,\n\t\t\t\t  struct gpio_desc **desc_array,\n\t\t\t\t  struct gpio_array *array_info,\n\t\t\t\t  unsigned long *value_bitmap);\n\nextern spinlock_t gpio_lock;\nextern struct list_head gpio_devices;\n\nvoid gpiod_line_state_notify(struct gpio_desc *desc, unsigned long action);\n\n \nstruct gpio_desc {\n\tstruct gpio_device\t*gdev;\n\tunsigned long\t\tflags;\n \n#define FLAG_REQUESTED\t0\n#define FLAG_IS_OUT\t1\n#define FLAG_EXPORT\t2\t \n#define FLAG_SYSFS\t3\t \n#define FLAG_ACTIVE_LOW\t6\t \n#define FLAG_OPEN_DRAIN\t7\t \n#define FLAG_OPEN_SOURCE 8\t \n#define FLAG_USED_AS_IRQ 9\t \n#define FLAG_IRQ_IS_ENABLED 10\t \n#define FLAG_IS_HOGGED\t11\t \n#define FLAG_TRANSITORY 12\t \n#define FLAG_PULL_UP    13\t \n#define FLAG_PULL_DOWN  14\t \n#define FLAG_BIAS_DISABLE    15\t \n#define FLAG_EDGE_RISING     16\t \n#define FLAG_EDGE_FALLING    17\t \n#define FLAG_EVENT_CLOCK_REALTIME\t18  \n#define FLAG_EVENT_CLOCK_HTE\t\t19  \n\n\t \n\tconst char\t\t*label;\n\t \n\tconst char\t\t*name;\n#ifdef CONFIG_OF_DYNAMIC\n\tstruct device_node\t*hog;\n#endif\n#ifdef CONFIG_GPIO_CDEV\n\t \n\tunsigned int\t\tdebounce_period_us;\n#endif\n};\n\n#define gpiod_not_found(desc)\t\t(IS_ERR(desc) && PTR_ERR(desc) == -ENOENT)\n\nint gpiod_request(struct gpio_desc *desc, const char *label);\nvoid gpiod_free(struct gpio_desc *desc);\n\nstatic inline int gpiod_request_user(struct gpio_desc *desc, const char *label)\n{\n\tint ret;\n\n\tret = gpiod_request(desc, label);\n\tif (ret == -EPROBE_DEFER)\n\t\tret = -ENODEV;\n\n\treturn ret;\n}\n\nint gpiod_configure_flags(struct gpio_desc *desc, const char *con_id,\n\t\tunsigned long lflags, enum gpiod_flags dflags);\nint gpio_set_debounce_timeout(struct gpio_desc *desc, unsigned int debounce);\nint gpiod_hog(struct gpio_desc *desc, const char *name,\n\t\tunsigned long lflags, enum gpiod_flags dflags);\nint gpiochip_get_ngpios(struct gpio_chip *gc, struct device *dev);\n\n \nstatic inline int gpio_chip_hwgpio(const struct gpio_desc *desc)\n{\n\treturn desc - &desc->gdev->descs[0];\n}\n\n \n\n#define gpiod_emerg(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_emerg(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\",\\\n\t\t ##__VA_ARGS__)\n#define gpiod_crit(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_crit(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\", \\\n\t\t ##__VA_ARGS__)\n#define gpiod_err(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_err(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\",  \\\n\t\t ##__VA_ARGS__)\n#define gpiod_warn(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_warn(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\", \\\n\t\t ##__VA_ARGS__)\n#define gpiod_info(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_info(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\", \\\n\t\t ##__VA_ARGS__)\n#define gpiod_dbg(desc, fmt, ...)\t\t\t\t\t       \\\n\tpr_debug(\"gpio-%d (%s): \" fmt, desc_to_gpio(desc), desc->label ? : \"?\",\\\n\t\t ##__VA_ARGS__)\n\n \n\n#define chip_emerg(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_emerg(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n#define chip_crit(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_crit(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n#define chip_err(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_err(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n#define chip_warn(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_warn(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n#define chip_info(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_info(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n#define chip_dbg(gc, fmt, ...)\t\t\t\t\t\\\n\tdev_dbg(&gc->gpiodev->dev, \"(%s): \" fmt, gc->label, ##__VA_ARGS__)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}