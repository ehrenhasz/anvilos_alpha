{
  "module_name": "gpio-max7300.c",
  "hash_id": "0bddf738d9942bb151398685528c537d919f206e63bb2f1d4c149e76556c2b77",
  "original_prompt": "Ingested from linux-6.6.14/drivers/gpio/gpio-max7300.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/platform_device.h>\n#include <linux/mutex.h>\n#include <linux/i2c.h>\n#include <linux/spi/max7301.h>\n#include <linux/slab.h>\n\nstatic int max7300_i2c_write(struct device *dev, unsigned int reg,\n\t\t\t\tunsigned int val)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\n\treturn i2c_smbus_write_byte_data(client, reg, val);\n}\n\nstatic int max7300_i2c_read(struct device *dev, unsigned int reg)\n{\n\tstruct i2c_client *client = to_i2c_client(dev);\n\n\treturn i2c_smbus_read_byte_data(client, reg);\n}\n\nstatic int max7300_probe(struct i2c_client *client)\n{\n\tstruct max7301 *ts;\n\n\tif (!i2c_check_functionality(client->adapter,\n\t\t\tI2C_FUNC_SMBUS_BYTE_DATA))\n\t\treturn -EIO;\n\n\tts = devm_kzalloc(&client->dev, sizeof(struct max7301), GFP_KERNEL);\n\tif (!ts)\n\t\treturn -ENOMEM;\n\n\tts->read = max7300_i2c_read;\n\tts->write = max7300_i2c_write;\n\tts->dev = &client->dev;\n\n\treturn __max730x_probe(ts);\n}\n\nstatic void max7300_remove(struct i2c_client *client)\n{\n\t__max730x_remove(&client->dev);\n}\n\nstatic const struct i2c_device_id max7300_id[] = {\n\t{ \"max7300\", 0 },\n\t{ }\n};\nMODULE_DEVICE_TABLE(i2c, max7300_id);\n\nstatic struct i2c_driver max7300_driver = {\n\t.driver = {\n\t\t.name = \"max7300\",\n\t},\n\t.probe = max7300_probe,\n\t.remove = max7300_remove,\n\t.id_table = max7300_id,\n};\n\nstatic int __init max7300_init(void)\n{\n\treturn i2c_add_driver(&max7300_driver);\n}\nsubsys_initcall(max7300_init);\n\nstatic void __exit max7300_exit(void)\n{\n\ti2c_del_driver(&max7300_driver);\n}\nmodule_exit(max7300_exit);\n\nMODULE_AUTHOR(\"Wolfram Sang\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_DESCRIPTION(\"MAX7300 GPIO-Expander\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}