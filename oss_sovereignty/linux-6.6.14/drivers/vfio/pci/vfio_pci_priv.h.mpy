{
  "module_name": "vfio_pci_priv.h",
  "hash_id": "4578791c7e2c89bc8f61ae0420a6dfb590999a4fda78cd0b070d6c7686b183bf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/vfio/pci/vfio_pci_priv.h",
  "human_readable_source": " \n#ifndef VFIO_PCI_PRIV_H\n#define VFIO_PCI_PRIV_H\n\n#include <linux/vfio_pci_core.h>\n\n \n#define PCI_CAP_ID_INVALID\t\t0xFF\t \n#define PCI_CAP_ID_INVALID_VIRT\t\t0xFE\t \n\n \n#define VFIO_PCI_IOEVENTFD_MAX\t\t1000\n\nstruct vfio_pci_ioeventfd {\n\tstruct list_head\tnext;\n\tstruct vfio_pci_core_device\t*vdev;\n\tstruct virqfd\t\t*virqfd;\n\tvoid __iomem\t\t*addr;\n\tuint64_t\t\tdata;\n\tloff_t\t\t\tpos;\n\tint\t\t\tbar;\n\tint\t\t\tcount;\n\tbool\t\t\ttest_mem;\n};\n\nbool vfio_pci_intx_mask(struct vfio_pci_core_device *vdev);\nvoid vfio_pci_intx_unmask(struct vfio_pci_core_device *vdev);\n\nint vfio_pci_set_irqs_ioctl(struct vfio_pci_core_device *vdev, uint32_t flags,\n\t\t\t    unsigned index, unsigned start, unsigned count,\n\t\t\t    void *data);\n\nssize_t vfio_pci_config_rw(struct vfio_pci_core_device *vdev, char __user *buf,\n\t\t\t   size_t count, loff_t *ppos, bool iswrite);\n\nssize_t vfio_pci_bar_rw(struct vfio_pci_core_device *vdev, char __user *buf,\n\t\t\tsize_t count, loff_t *ppos, bool iswrite);\n\n#ifdef CONFIG_VFIO_PCI_VGA\nssize_t vfio_pci_vga_rw(struct vfio_pci_core_device *vdev, char __user *buf,\n\t\t\tsize_t count, loff_t *ppos, bool iswrite);\n#else\nstatic inline ssize_t vfio_pci_vga_rw(struct vfio_pci_core_device *vdev,\n\t\t\t\t      char __user *buf, size_t count,\n\t\t\t\t      loff_t *ppos, bool iswrite)\n{\n\treturn -EINVAL;\n}\n#endif\n\nint vfio_pci_ioeventfd(struct vfio_pci_core_device *vdev, loff_t offset,\n\t\t       uint64_t data, int count, int fd);\n\nint vfio_pci_init_perm_bits(void);\nvoid vfio_pci_uninit_perm_bits(void);\n\nint vfio_config_init(struct vfio_pci_core_device *vdev);\nvoid vfio_config_free(struct vfio_pci_core_device *vdev);\n\nint vfio_pci_set_power_state(struct vfio_pci_core_device *vdev,\n\t\t\t     pci_power_t state);\n\nbool __vfio_pci_memory_enabled(struct vfio_pci_core_device *vdev);\nvoid vfio_pci_zap_and_down_write_memory_lock(struct vfio_pci_core_device *vdev);\nu16 vfio_pci_memory_lock_and_enable(struct vfio_pci_core_device *vdev);\nvoid vfio_pci_memory_unlock_and_restore(struct vfio_pci_core_device *vdev,\n\t\t\t\t\tu16 cmd);\n\n#ifdef CONFIG_VFIO_PCI_IGD\nint vfio_pci_igd_init(struct vfio_pci_core_device *vdev);\n#else\nstatic inline int vfio_pci_igd_init(struct vfio_pci_core_device *vdev)\n{\n\treturn -ENODEV;\n}\n#endif\n\n#ifdef CONFIG_VFIO_PCI_ZDEV_KVM\nint vfio_pci_info_zdev_add_caps(struct vfio_pci_core_device *vdev,\n\t\t\t\tstruct vfio_info_cap *caps);\nint vfio_pci_zdev_open_device(struct vfio_pci_core_device *vdev);\nvoid vfio_pci_zdev_close_device(struct vfio_pci_core_device *vdev);\n#else\nstatic inline int vfio_pci_info_zdev_add_caps(struct vfio_pci_core_device *vdev,\n\t\t\t\t\t      struct vfio_info_cap *caps)\n{\n\treturn -ENODEV;\n}\n\nstatic inline int vfio_pci_zdev_open_device(struct vfio_pci_core_device *vdev)\n{\n\treturn 0;\n}\n\nstatic inline void vfio_pci_zdev_close_device(struct vfio_pci_core_device *vdev)\n{}\n#endif\n\nstatic inline bool vfio_pci_is_vga(struct pci_dev *pdev)\n{\n\treturn (pdev->class >> 8) == PCI_CLASS_DISPLAY_VGA;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}