{
  "module_name": "ricoh.h",
  "hash_id": "dc158456f444b1aa5d5dd4abc7df6021235dafd3e0f1cd13ff35bb74ff183e12",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pcmcia/ricoh.h",
  "human_readable_source": " \n\n#ifndef _LINUX_RICOH_H\n#define _LINUX_RICOH_H\n\n\n#define RF5C_MODE_CTL\t\t0x1f\t \n#define RF5C_PWR_CTL\t\t0x2f\t \n#define RF5C_CHIP_ID\t\t0x3a\t \n#define RF5C_MODE_CTL_3\t\t0x3b\t \n\n \n#define RF5C_IO_OFF(w)\t\t(0x36+((w)<<1))\n\n \n#define RF5C_MODE_ATA\t\t0x01\t \n#define RF5C_MODE_LED_ENA\t0x02\t \n#define RF5C_MODE_CA21\t\t0x04\n#define RF5C_MODE_CA22\t\t0x08\n#define RF5C_MODE_CA23\t\t0x10\n#define RF5C_MODE_CA24\t\t0x20\n#define RF5C_MODE_CA25\t\t0x40\n#define RF5C_MODE_3STATE_BIT7\t0x80\n\n \n#define RF5C_PWR_VCC_3V\t\t0x01\n#define RF5C_PWR_IREQ_HIGH\t0x02\n#define RF5C_PWR_INPACK_ENA\t0x04\n#define RF5C_PWR_5V_DET\t\t0x08\n#define RF5C_PWR_TC_SEL\t\t0x10\t \n#define RF5C_PWR_DREQ_LOW\t0x20\n#define RF5C_PWR_DREQ_OFF\t0x00\t \n#define RF5C_PWR_DREQ_INPACK\t0x40\n#define RF5C_PWR_DREQ_SPKR\t0x80\n#define RF5C_PWR_DREQ_IOIS16\t0xc0\n\n \n#define RF5C_CHIP_RF5C296\t0x32\n#define RF5C_CHIP_RF5C396\t0xb2\n\n \n#define RF5C_MCTL3_DISABLE\t0x01\t \n#define RF5C_MCTL3_DMA_ENA\t0x02\n\n \n\n \n#define RL5C46X_BCR_3E0_ENA\t\t0x0800\n#define RL5C46X_BCR_3E2_ENA\t\t0x1000\n\n \n#define RL5C4XX_CONFIG\t\t\t0x80\t \n#define  RL5C4XX_CONFIG_IO_1_MODE\t0x0200\n#define  RL5C4XX_CONFIG_IO_0_MODE\t0x0100\n#define  RL5C4XX_CONFIG_PREFETCH\t0x0001\n\n \n#define RL5C4XX_MISC\t\t\t0x0082\t \n#define  RL5C4XX_MISC_HW_SUSPEND_ENA\t0x0002\n#define  RL5C4XX_MISC_VCCEN_POL\t\t0x0100\n#define  RL5C4XX_MISC_VPPEN_POL\t\t0x0200\n#define  RL5C46X_MISC_SUSPEND\t\t0x0001\n#define  RL5C46X_MISC_PWR_SAVE_2\t0x0004\n#define  RL5C46X_MISC_IFACE_BUSY\t0x0008\n#define  RL5C46X_MISC_B_LOCK\t\t0x0010\n#define  RL5C46X_MISC_A_LOCK\t\t0x0020\n#define  RL5C46X_MISC_PCI_LOCK\t\t0x0040\n#define  RL5C47X_MISC_IFACE_BUSY\t0x0004\n#define  RL5C47X_MISC_PCI_INT_MASK\t0x0018\n#define  RL5C47X_MISC_PCI_INT_DIS\t0x0020\n#define  RL5C47X_MISC_SUBSYS_WR\t\t0x0040\n#define  RL5C47X_MISC_SRIRQ_ENA\t\t0x0080\n#define  RL5C47X_MISC_5V_DISABLE\t0x0400\n#define  RL5C47X_MISC_LED_POL\t\t0x0800\n\n \n#define RL5C4XX_16BIT_CTL\t\t0x0084\t \n#define  RL5C4XX_16CTL_IO_TIMING\t0x0100\n#define  RL5C4XX_16CTL_MEM_TIMING\t0x0200\n#define  RL5C46X_16CTL_LEVEL_1\t\t0x0010\n#define  RL5C46X_16CTL_LEVEL_2\t\t0x0020\n\n \n#define RL5C4XX_16BIT_IO_0\t\t0x0088\t \n#define RL5C4XX_16BIT_MEM_0\t\t0x008a\t \n#define  RL5C4XX_SETUP_MASK\t\t0x0007\n#define  RL5C4XX_SETUP_SHIFT\t\t0\n#define  RL5C4XX_CMD_MASK\t\t0x01f0\n#define  RL5C4XX_CMD_SHIFT\t\t4\n#define  RL5C4XX_HOLD_MASK\t\t0x1c00\n#define  RL5C4XX_HOLD_SHIFT\t\t10\n#define  RL5C4XX_MISC_CONTROL           0x2F  \n#define  RL5C4XX_ZV_ENABLE              0x08\n\n \n#define RL5C4XX_MISC3\t\t\t0x00A2  \n#define  RL5C47X_MISC3_CB_CLKRUN_DIS\tBIT(1)\n\n#ifdef __YENTA_H\n\n#define rl_misc(socket)\t\t((socket)->private[0])\n#define rl_ctl(socket)\t\t((socket)->private[1])\n#define rl_io(socket)\t\t((socket)->private[2])\n#define rl_mem(socket)\t\t((socket)->private[3])\n#define rl_config(socket)\t((socket)->private[4])\n\nstatic void ricoh_zoom_video(struct pcmcia_socket *sock, int onoff)\n{\n        u8 reg;\n\tstruct yenta_socket *socket = container_of(sock, struct yenta_socket, socket);\n\n        reg = config_readb(socket, RL5C4XX_MISC_CONTROL);\n        if (onoff)\n                 \n                reg |=  RL5C4XX_ZV_ENABLE;\n        else\n                reg &= ~RL5C4XX_ZV_ENABLE;\n\t\n        config_writeb(socket, RL5C4XX_MISC_CONTROL, reg);\n}\n\nstatic void ricoh_set_zv(struct yenta_socket *socket)\n{\n        if(socket->dev->vendor == PCI_VENDOR_ID_RICOH)\n        {\n                switch(socket->dev->device)\n                {\n                         \n\t\tcase  PCI_DEVICE_ID_RICOH_RL5C478:\n\t\t\tsocket->socket.zoom_video = ricoh_zoom_video;\n\t\t\tbreak;  \n                }\n        }\n}\n\nstatic void ricoh_set_clkrun(struct yenta_socket *socket, bool quiet)\n{\n\tu16 misc3;\n\n\t \n\tif (socket->dev->device != PCI_DEVICE_ID_RICOH_RL5C476 &&\n\t    socket->dev->device != PCI_DEVICE_ID_RICOH_RL5C478)\n\t\treturn;\n\n\tif (socket->dev->revision < 0x80)\n\t\treturn;\n\n\tmisc3 = config_readw(socket, RL5C4XX_MISC3);\n\tif (misc3 & RL5C47X_MISC3_CB_CLKRUN_DIS) {\n\t\tif (!quiet)\n\t\t\tdev_dbg(&socket->dev->dev,\n\t\t\t\t\"CLKRUN feature already disabled\\n\");\n\t} else if (disable_clkrun) {\n\t\tif (!quiet)\n\t\t\tdev_info(&socket->dev->dev,\n\t\t\t\t \"Disabling CLKRUN feature\\n\");\n\t\tmisc3 |= RL5C47X_MISC3_CB_CLKRUN_DIS;\n\t\tconfig_writew(socket, RL5C4XX_MISC3, misc3);\n\t}\n}\n\nstatic void ricoh_save_state(struct yenta_socket *socket)\n{\n\trl_misc(socket) = config_readw(socket, RL5C4XX_MISC);\n\trl_ctl(socket) = config_readw(socket, RL5C4XX_16BIT_CTL);\n\trl_io(socket) = config_readw(socket, RL5C4XX_16BIT_IO_0);\n\trl_mem(socket) = config_readw(socket, RL5C4XX_16BIT_MEM_0);\n\trl_config(socket) = config_readw(socket, RL5C4XX_CONFIG);\n}\n\nstatic void ricoh_restore_state(struct yenta_socket *socket)\n{\n\tconfig_writew(socket, RL5C4XX_MISC, rl_misc(socket));\n\tconfig_writew(socket, RL5C4XX_16BIT_CTL, rl_ctl(socket));\n\tconfig_writew(socket, RL5C4XX_16BIT_IO_0, rl_io(socket));\n\tconfig_writew(socket, RL5C4XX_16BIT_MEM_0, rl_mem(socket));\n\tconfig_writew(socket, RL5C4XX_CONFIG, rl_config(socket));\n\tricoh_set_clkrun(socket, true);\n}\n\n\n \nstatic int ricoh_override(struct yenta_socket *socket)\n{\n\tu16 config, ctl;\n\n\tconfig = config_readw(socket, RL5C4XX_CONFIG);\n\n\t \n\tctl = RL5C4XX_16CTL_IO_TIMING | RL5C4XX_16CTL_MEM_TIMING;\n\n\tif(socket->dev->device < PCI_DEVICE_ID_RICOH_RL5C475) {\n\t\tctl |= RL5C46X_16CTL_LEVEL_1 | RL5C46X_16CTL_LEVEL_2;\n\t} else {\n\t\tconfig |= RL5C4XX_CONFIG_PREFETCH;\n\t}\n\n\tconfig_writew(socket, RL5C4XX_16BIT_CTL, ctl);\n\tconfig_writew(socket, RL5C4XX_CONFIG, config);\n\n\tricoh_set_zv(socket);\n\tricoh_set_clkrun(socket, false);\n\n\treturn 0;\n}\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}