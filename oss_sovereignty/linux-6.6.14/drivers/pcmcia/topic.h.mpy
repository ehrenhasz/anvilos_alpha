{
  "module_name": "topic.h",
  "hash_id": "d79867d5b77713ba096d2288de8dd26fd383f53ad562eefe480267bbdd8842e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pcmcia/topic.h",
  "human_readable_source": " \n\n#ifndef _LINUX_TOPIC_H\n#define _LINUX_TOPIC_H\n\n \n\n#define TOPIC_SOCKET_CONTROL\t\t0x0090\t \n#define  TOPIC_SCR_IRQSEL\t\t0x00000001\n\n#define TOPIC_SLOT_CONTROL\t\t0x00a0\t \n#define  TOPIC_SLOT_SLOTON\t\t0x80\n#define  TOPIC_SLOT_SLOTEN\t\t0x40\n#define  TOPIC_SLOT_ID_LOCK\t\t0x20\n#define  TOPIC_SLOT_ID_WP\t\t0x10\n#define  TOPIC_SLOT_PORT_MASK\t\t0x0c\n#define  TOPIC_SLOT_PORT_SHIFT\t\t2\n#define  TOPIC_SLOT_OFS_MASK\t\t0x03\n\n#define TOPIC_CARD_CONTROL\t\t0x00a1\t \n#define  TOPIC_CCR_INTB\t\t\t0x20\n#define  TOPIC_CCR_INTA\t\t\t0x10\n#define  TOPIC_CCR_CLOCK\t\t0x0c\n#define  TOPIC_CCR_PCICLK\t\t0x0c\n#define  TOPIC_CCR_PCICLK_2\t\t0x08\n#define  TOPIC_CCR_CCLK\t\t\t0x04\n\n#define TOPIC97_INT_CONTROL\t\t0x00a1\t \n#define  TOPIC97_ICR_INTB\t\t0x20\n#define  TOPIC97_ICR_INTA\t\t0x10\n#define  TOPIC97_ICR_STSIRQNP\t\t0x04\n#define  TOPIC97_ICR_IRQNP\t\t0x02\n#define  TOPIC97_ICR_IRQSEL\t\t0x01\n\n#define TOPIC_CARD_DETECT\t\t0x00a3\t \n#define  TOPIC_CDR_MODE_PC32\t\t0x80\n#define  TOPIC_CDR_VS1\t\t\t0x04\n#define  TOPIC_CDR_VS2\t\t\t0x02\n#define  TOPIC_CDR_SW_DETECT\t\t0x01\n\n#define TOPIC_REGISTER_CONTROL\t\t0x00a4\t \n#define  TOPIC_RCR_RESUME_RESET\t\t0x80000000\n#define  TOPIC_RCR_REMOVE_RESET\t\t0x40000000\n#define  TOPIC97_RCR_CLKRUN_ENA\t\t0x20000000\n#define  TOPIC97_RCR_TESTMODE\t\t0x10000000\n#define  TOPIC97_RCR_IOPLUP\t\t0x08000000\n#define  TOPIC_RCR_BUFOFF_PWROFF\t0x02000000\n#define  TOPIC_RCR_BUFOFF_SIGOFF\t0x01000000\n#define  TOPIC97_RCR_CB_DEV_MASK\t0x0000f800\n#define  TOPIC97_RCR_CB_DEV_SHIFT\t11\n#define  TOPIC97_RCR_RI_DISABLE\t\t0x00000004\n#define  TOPIC97_RCR_CAUDIO_OFF\t\t0x00000002\n#define  TOPIC_RCR_CAUDIO_INVERT\t0x00000001\n\n#define TOPIC97_MISC1\t\t\t0x00ad   \n#define  TOPIC97_MISC1_CLOCKRUN_ENABLE\t0x80\n#define  TOPIC97_MISC1_CLOCKRUN_MODE\t0x40\n#define  TOPIC97_MISC1_DETECT_REQ_ENA\t0x10\n#define  TOPIC97_MISC1_SCK_CLEAR_DIS\t0x04\n#define  TOPIC97_MISC1_R2_LOW_ENABLE\t0x10\n\n#define TOPIC97_MISC2\t\t\t0x00ae   \n#define  TOPIC97_MISC2_SPWRCLK_MASK\t0x70\n#define  TOPIC97_MISC2_SPWRMOD\t\t0x08\n#define  TOPIC97_MISC2_SPWR_ENABLE\t0x04\n#define  TOPIC97_MISC2_ZV_MODE\t\t0x02\n#define  TOPIC97_MISC2_ZV_ENABLE\t0x01\n\n#define TOPIC97_ZOOM_VIDEO_CONTROL\t0x009c   \n#define  TOPIC97_ZV_CONTROL_ENABLE\t0x01\n\n#define TOPIC97_AUDIO_VIDEO_SWITCH\t0x003c   \n#define  TOPIC97_AVS_AUDIO_CONTROL\t0x02\n#define  TOPIC97_AVS_VIDEO_CONTROL\t0x01\n\n#define TOPIC_EXCA_IF_CONTROL\t\t0x3e\t \n#define TOPIC_EXCA_IFC_33V_ENA\t\t0x01\n\n#define TOPIC_PCI_CFG_PPBCN\t\t0x3e\t \n#define TOPIC_PCI_CFG_PPBCN_WBEN\t0x0400\n\nstatic void topic97_zoom_video(struct pcmcia_socket *sock, int onoff)\n{\n\tstruct yenta_socket *socket = container_of(sock, struct yenta_socket, socket);\n\tu8 reg_zv, reg;\n\n\treg_zv = config_readb(socket, TOPIC97_ZOOM_VIDEO_CONTROL);\n\tif (onoff) {\n\t\treg_zv |= TOPIC97_ZV_CONTROL_ENABLE;\n\t\tconfig_writeb(socket, TOPIC97_ZOOM_VIDEO_CONTROL, reg_zv);\n\n\t\treg = config_readb(socket, TOPIC97_AUDIO_VIDEO_SWITCH);\n\t\treg |= TOPIC97_AVS_AUDIO_CONTROL | TOPIC97_AVS_VIDEO_CONTROL;\n\t\tconfig_writeb(socket, TOPIC97_AUDIO_VIDEO_SWITCH, reg);\n\t} else {\n\t\treg_zv &= ~TOPIC97_ZV_CONTROL_ENABLE;\n\t\tconfig_writeb(socket, TOPIC97_ZOOM_VIDEO_CONTROL, reg_zv);\n\n\t\treg = config_readb(socket, TOPIC97_AUDIO_VIDEO_SWITCH);\n\t\treg &= ~(TOPIC97_AVS_AUDIO_CONTROL | TOPIC97_AVS_VIDEO_CONTROL);\n\t\tconfig_writeb(socket, TOPIC97_AUDIO_VIDEO_SWITCH, reg);\n\t}\n}\n\nstatic int topic97_override(struct yenta_socket *socket)\n{\n\t \n\tsocket->socket.zoom_video = topic97_zoom_video;\n\treturn 0;\n}\n\n\nstatic int topic95_override(struct yenta_socket *socket)\n{\n\tu8 fctrl;\n\tu16 ppbcn;\n\n\t \n\tfctrl = exca_readb(socket, TOPIC_EXCA_IF_CONTROL);\n\texca_writeb(socket, TOPIC_EXCA_IF_CONTROL, fctrl | TOPIC_EXCA_IFC_33V_ENA);\n\n\t \n\tsocket->flags |= YENTA_16BIT_POWER_EXCA | YENTA_16BIT_POWER_DF;\n\n\t \n\tif (pci_read_config_word(socket->dev, TOPIC_PCI_CFG_PPBCN, &ppbcn) == 0\n\t    && socket->dev->revision <= 7\n\t    && (ppbcn & TOPIC_PCI_CFG_PPBCN_WBEN)) {\n\t\tppbcn &= ~TOPIC_PCI_CFG_PPBCN_WBEN;\n\t\tpci_write_config_word(socket->dev, TOPIC_PCI_CFG_PPBCN, ppbcn);\n\t\tdev_info(&socket->dev->dev, \"Disabled ToPIC95 Cardbus write buffers.\\n\");\n\t}\n\n\treturn 0;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}