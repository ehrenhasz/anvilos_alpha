{
  "module_name": "o2micro.h",
  "hash_id": "a9919b23f4cbff436e1b18acaeb6b8e6db97ce2409a59d3b44ed1738ab85e87e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pcmcia/o2micro.h",
  "human_readable_source": " \n\n#ifndef _LINUX_O2MICRO_H\n#define _LINUX_O2MICRO_H\n\n \n\n#define O2_MUX_CONTROL\t\t0x90\t \n#define  O2_MUX_RING_OUT\t0x0000000f\n#define  O2_MUX_SKTB_ACTV\t0x000000f0\n#define  O2_MUX_SCTA_ACTV_ENA\t0x00000100\n#define  O2_MUX_SCTB_ACTV_ENA\t0x00000200\n#define  O2_MUX_SER_IRQ_ROUTE\t0x0000e000\n#define  O2_MUX_SER_PCI\t\t0x00010000\n\n#define  O2_MUX_SKTA_TURBO\t0x000c0000\t \n#define  O2_MUX_SKTB_TURBO\t0x00300000\n#define  O2_MUX_AUX_VCC_3V\t0x00400000\n#define  O2_MUX_PCI_VCC_5V\t0x00800000\n#define  O2_MUX_PME_MUX\t\t0x0f000000\n\n \n\n#define O2_MODE_A\t\t0x38\n#define O2_MODE_A_2\t\t0x26\t \n#define  O2_MODE_A_CD_PULSE\t0x04\n#define  O2_MODE_A_SUSP_EDGE\t0x08\n#define  O2_MODE_A_HOST_SUSP\t0x10\n#define  O2_MODE_A_PWR_MASK\t0x60\n#define  O2_MODE_A_QUIET\t0x80\n\n#define O2_MODE_B\t\t0x39\n#define O2_MODE_B_2\t\t0x2e\t \n#define  O2_MODE_B_IDENT\t0x03\n#define  O2_MODE_B_ID_BSTEP\t0x00\n#define  O2_MODE_B_ID_CSTEP\t0x01\n#define  O2_MODE_B_ID_O2\t0x02\n#define  O2_MODE_B_VS1\t\t0x04\n#define  O2_MODE_B_VS2\t\t0x08\n#define  O2_MODE_B_IRQ15_RI\t0x80\n\n#define O2_MODE_C\t\t0x3a\n#define  O2_MODE_C_DREQ_MASK\t0x03\n#define  O2_MODE_C_DREQ_INPACK\t0x01\n#define  O2_MODE_C_DREQ_WP\t0x02\n#define  O2_MODE_C_DREQ_BVD2\t0x03\n#define  O2_MODE_C_ZVIDEO\t0x08\n#define  O2_MODE_C_IREQ_SEL\t0x30\n#define  O2_MODE_C_MGMT_SEL\t0xc0\n\n#define O2_MODE_D\t\t0x3b\n#define  O2_MODE_D_IRQ_MODE\t0x03\n#define  O2_MODE_D_PCI_CLKRUN\t0x04\n#define  O2_MODE_D_CB_CLKRUN\t0x08\n#define  O2_MODE_D_SKT_ACTV\t0x20\n#define  O2_MODE_D_PCI_FIFO\t0x40\t \n#define  O2_MODE_D_W97_IRQ\t0x40\n#define  O2_MODE_D_ISA_IRQ\t0x80\n\n#define O2_MHPG_DMA\t\t0x3c\n#define  O2_MHPG_CHANNEL\t0x07\n#define  O2_MHPG_CINT_ENA\t0x08\n#define  O2_MHPG_CSC_ENA\t0x10\n\n#define O2_FIFO_ENA\t\t0x3d\n#define  O2_FIFO_ZVIDEO_3\t0x08\n#define  O2_FIFO_PCI_FIFO\t0x10\n#define  O2_FIFO_POSTWR\t\t0x40\n#define  O2_FIFO_BUFFER\t\t0x80\n\n#define O2_MODE_E\t\t0x3e\n#define  O2_MODE_E_MHPG_DMA\t0x01\n#define  O2_MODE_E_SPKR_OUT\t0x02\n#define  O2_MODE_E_LED_OUT\t0x08\n#define  O2_MODE_E_SKTA_ACTV\t0x10\n\n#define O2_RESERVED1\t\t0x94\n#define O2_RESERVED2\t\t0xD4\n#define O2_RES_READ_PREFETCH\t0x02\n#define O2_RES_WRITE_BURST\t0x08\n\nstatic int o2micro_override(struct yenta_socket *socket)\n{\n\t \n\tu8 a, b;\n\tbool use_speedup;\n\n\tif (PCI_FUNC(socket->dev->devfn) == 0) {\n\t\ta = config_readb(socket, O2_RESERVED1);\n\t\tb = config_readb(socket, O2_RESERVED2);\n\t\tdev_dbg(&socket->dev->dev, \"O2: 0x94/0xD4: %02x/%02x\\n\", a, b);\n\n\t\tswitch (socket->dev->device) {\n\t\t \n\t\tcase PCI_DEVICE_ID_O2_6729:\n\t\tcase PCI_DEVICE_ID_O2_6730:\n\t\tcase PCI_DEVICE_ID_O2_6812:\n\t\tcase PCI_DEVICE_ID_O2_6832:\n\t\tcase PCI_DEVICE_ID_O2_6836:\n\t\tcase PCI_DEVICE_ID_O2_6933:\n\t\t\tuse_speedup = false;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tuse_speedup = true;\n\t\t\tbreak;\n\t\t}\n\n\t\t \n\t\tif (strcasecmp(o2_speedup, \"on\") == 0)\n\t\t\tuse_speedup = true;\n\t\telse if (strcasecmp(o2_speedup, \"off\") == 0)\n\t\t\tuse_speedup = false;\n\t\telse if (strcasecmp(o2_speedup, \"default\") != 0)\n\t\t\tdev_warn(&socket->dev->dev,\n\t\t\t\t\"O2: Unknown parameter, using 'default'\");\n\n\t\tif (use_speedup) {\n\t\t\tdev_info(&socket->dev->dev,\n\t\t\t\t\"O2: enabling read prefetch/write burst. If you experience problems or performance issues, use the yenta_socket parameter 'o2_speedup=off'\\n\");\n\t\t\tconfig_writeb(socket, O2_RESERVED1,\n\t\t\t\t      a | O2_RES_READ_PREFETCH | O2_RES_WRITE_BURST);\n\t\t\tconfig_writeb(socket, O2_RESERVED2,\n\t\t\t\t      b | O2_RES_READ_PREFETCH | O2_RES_WRITE_BURST);\n\t\t} else {\n\t\t\tdev_info(&socket->dev->dev,\n\t\t\t\t\"O2: disabling read prefetch/write burst. If you experience problems or performance issues, use the yenta_socket parameter 'o2_speedup=on'\\n\");\n\t\t\tconfig_writeb(socket, O2_RESERVED1,\n\t\t\t\t      a & ~(O2_RES_READ_PREFETCH | O2_RES_WRITE_BURST));\n\t\t\tconfig_writeb(socket, O2_RESERVED2,\n\t\t\t\t      b & ~(O2_RES_READ_PREFETCH | O2_RES_WRITE_BURST));\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic void o2micro_restore_state(struct yenta_socket *socket)\n{\n\t \n\to2micro_override(socket);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}