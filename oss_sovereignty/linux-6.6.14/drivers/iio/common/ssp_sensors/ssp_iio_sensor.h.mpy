{
  "module_name": "ssp_iio_sensor.h",
  "hash_id": "83366a21ac4ab2730b665d8881cdd335c71a72ad9360780328f9bd400514a7a8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/common/ssp_sensors/ssp_iio_sensor.h",
  "human_readable_source": " \n#ifndef __SSP_IIO_SENSOR_H__\n#define __SSP_IIO_SENSOR_H__\n\n#define SSP_CHANNEL_AG(_type, _mod, _index) \\\n{ \\\n\t\t.type = _type,\\\n\t\t.modified = 1,\\\n\t\t.channel2 = _mod,\\\n\t\t.info_mask_shared_by_type = BIT(IIO_CHAN_INFO_SAMP_FREQ),\\\n\t\t.scan_index = _index,\\\n\t\t.scan_type = {\\\n\t\t\t.sign = 's',\\\n\t\t\t.realbits = 16,\\\n\t\t\t.storagebits = 16,\\\n\t\t\t.shift = 0,\\\n\t\t\t.endianness = IIO_LE,\\\n\t\t},\\\n}\n\n \n#define SSP_CHAN_TIMESTAMP(_si) {\t\t\t\t\t\\\n\t.type = IIO_TIMESTAMP,\t\t\t\t\t\t\\\n\t.channel = -1,\t\t\t\t\t\t\t\\\n\t.scan_index = _si,\t\t\t\t\t\t\\\n\t.scan_type = {\t\t\t\t\t\t\t\\\n\t\t.sign = 's',\t\t\t\t\t\t\\\n\t\t.realbits = 64,\t\t\t\t\t\t\\\n\t\t.storagebits = 64,\t\t\t\t\t\\\n\t\t},\t\t\t\t\t\t\t\\\n}\n\n#define SSP_MS_PER_S\t\t\t1000\n#define SSP_INVERTED_SCALING_FACTOR\t1000000U\n\n#define SSP_FACTOR_WITH_MS \\\n\t(SSP_INVERTED_SCALING_FACTOR * SSP_MS_PER_S)\n\nint ssp_common_buffer_postenable(struct iio_dev *indio_dev);\n\nint ssp_common_buffer_postdisable(struct iio_dev *indio_dev);\n\nint ssp_common_process_data(struct iio_dev *indio_dev, void *buf,\n\t\t\t    unsigned int len, int64_t timestamp);\n\n \nstatic inline void ssp_convert_to_freq(u32 time, int *integer_part,\n\t\t\t\t       int *fractional)\n{\n\tif (time == 0) {\n\t\t*fractional = 0;\n\t\t*integer_part = 0;\n\t\treturn;\n\t}\n\n\t*integer_part = SSP_FACTOR_WITH_MS / time;\n\t*fractional = *integer_part % SSP_INVERTED_SCALING_FACTOR;\n\t*integer_part = *integer_part / SSP_INVERTED_SCALING_FACTOR;\n}\n\n \nstatic inline int ssp_convert_to_time(int integer_part, int fractional)\n{\n\tu64 value;\n\n\tvalue = (u64)integer_part * SSP_INVERTED_SCALING_FACTOR + fractional;\n\tif (value == 0)\n\t\treturn 0;\n\n\treturn div64_u64((u64)SSP_FACTOR_WITH_MS, value);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}