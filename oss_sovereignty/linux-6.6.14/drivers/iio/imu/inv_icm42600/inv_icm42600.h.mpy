{
  "module_name": "inv_icm42600.h",
  "hash_id": "c01aa99a0ba47ae6be903b32c71f77abedebb57c22a3937ede933684feffd9f9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/imu/inv_icm42600/inv_icm42600.h",
  "human_readable_source": " \n \n\n#ifndef INV_ICM42600_H_\n#define INV_ICM42600_H_\n\n#include <linux/bits.h>\n#include <linux/bitfield.h>\n#include <linux/regmap.h>\n#include <linux/mutex.h>\n#include <linux/regulator/consumer.h>\n#include <linux/pm.h>\n#include <linux/iio/iio.h>\n\n#include \"inv_icm42600_buffer.h\"\n\nenum inv_icm42600_chip {\n\tINV_CHIP_INVALID,\n\tINV_CHIP_ICM42600,\n\tINV_CHIP_ICM42602,\n\tINV_CHIP_ICM42605,\n\tINV_CHIP_ICM42622,\n\tINV_CHIP_ICM42631,\n\tINV_CHIP_NB,\n};\n\n \nenum inv_icm42600_slew_rate {\n\tINV_ICM42600_SLEW_RATE_20_60NS,\n\tINV_ICM42600_SLEW_RATE_12_36NS,\n\tINV_ICM42600_SLEW_RATE_6_18NS,\n\tINV_ICM42600_SLEW_RATE_4_12NS,\n\tINV_ICM42600_SLEW_RATE_2_6NS,\n\tINV_ICM42600_SLEW_RATE_INF_2NS,\n};\n\nenum inv_icm42600_sensor_mode {\n\tINV_ICM42600_SENSOR_MODE_OFF,\n\tINV_ICM42600_SENSOR_MODE_STANDBY,\n\tINV_ICM42600_SENSOR_MODE_LOW_POWER,\n\tINV_ICM42600_SENSOR_MODE_LOW_NOISE,\n\tINV_ICM42600_SENSOR_MODE_NB,\n};\n\n \nenum inv_icm42600_gyro_fs {\n\tINV_ICM42600_GYRO_FS_2000DPS,\n\tINV_ICM42600_GYRO_FS_1000DPS,\n\tINV_ICM42600_GYRO_FS_500DPS,\n\tINV_ICM42600_GYRO_FS_250DPS,\n\tINV_ICM42600_GYRO_FS_125DPS,\n\tINV_ICM42600_GYRO_FS_62_5DPS,\n\tINV_ICM42600_GYRO_FS_31_25DPS,\n\tINV_ICM42600_GYRO_FS_15_625DPS,\n\tINV_ICM42600_GYRO_FS_NB,\n};\n\n \nenum inv_icm42600_accel_fs {\n\tINV_ICM42600_ACCEL_FS_16G,\n\tINV_ICM42600_ACCEL_FS_8G,\n\tINV_ICM42600_ACCEL_FS_4G,\n\tINV_ICM42600_ACCEL_FS_2G,\n\tINV_ICM42600_ACCEL_FS_NB,\n};\n\n \nenum inv_icm42600_odr {\n\tINV_ICM42600_ODR_8KHZ_LN = 3,\n\tINV_ICM42600_ODR_4KHZ_LN,\n\tINV_ICM42600_ODR_2KHZ_LN,\n\tINV_ICM42600_ODR_1KHZ_LN,\n\tINV_ICM42600_ODR_200HZ,\n\tINV_ICM42600_ODR_100HZ,\n\tINV_ICM42600_ODR_50HZ,\n\tINV_ICM42600_ODR_25HZ,\n\tINV_ICM42600_ODR_12_5HZ,\n\tINV_ICM42600_ODR_6_25HZ_LP,\n\tINV_ICM42600_ODR_3_125HZ_LP,\n\tINV_ICM42600_ODR_1_5625HZ_LP,\n\tINV_ICM42600_ODR_500HZ,\n\tINV_ICM42600_ODR_NB,\n};\n\nenum inv_icm42600_filter {\n\t \n\tINV_ICM42600_FILTER_BW_ODR_DIV_2,\n\n\t \n\tINV_ICM42600_FILTER_AVG_1X = 1,\n\tINV_ICM42600_FILTER_AVG_16X = 6,\n};\n\nstruct inv_icm42600_sensor_conf {\n\tint mode;\n\tint fs;\n\tint odr;\n\tint filter;\n};\n#define INV_ICM42600_SENSOR_CONF_INIT\t\t{-1, -1, -1, -1}\n\nstruct inv_icm42600_conf {\n\tstruct inv_icm42600_sensor_conf gyro;\n\tstruct inv_icm42600_sensor_conf accel;\n\tbool temp_en;\n};\n\nstruct inv_icm42600_suspended {\n\tenum inv_icm42600_sensor_mode gyro;\n\tenum inv_icm42600_sensor_mode accel;\n\tbool temp;\n};\n\n \nstruct inv_icm42600_state {\n\tstruct mutex lock;\n\tenum inv_icm42600_chip chip;\n\tconst char *name;\n\tstruct regmap *map;\n\tstruct regulator *vdd_supply;\n\tstruct regulator *vddio_supply;\n\tstruct iio_mount_matrix orientation;\n\tstruct inv_icm42600_conf conf;\n\tstruct inv_icm42600_suspended suspended;\n\tstruct iio_dev *indio_gyro;\n\tstruct iio_dev *indio_accel;\n\tuint8_t buffer[2] __aligned(IIO_DMA_MINALIGN);\n\tstruct inv_icm42600_fifo fifo;\n\tstruct {\n\t\tint64_t gyro;\n\t\tint64_t accel;\n\t} timestamp;\n};\n\n \n\n \n#define INV_ICM42600_REG_BANK_SEL\t\t\t0x76\n#define INV_ICM42600_BANK_SEL_MASK\t\t\tGENMASK(2, 0)\n\n \n#define INV_ICM42600_REG_DEVICE_CONFIG\t\t\t0x0011\n#define INV_ICM42600_DEVICE_CONFIG_SOFT_RESET\t\tBIT(0)\n\n#define INV_ICM42600_REG_DRIVE_CONFIG\t\t\t0x0013\n#define INV_ICM42600_DRIVE_CONFIG_I2C_MASK\t\tGENMASK(5, 3)\n#define INV_ICM42600_DRIVE_CONFIG_I2C(_rate)\t\t\\\n\t\tFIELD_PREP(INV_ICM42600_DRIVE_CONFIG_I2C_MASK, (_rate))\n#define INV_ICM42600_DRIVE_CONFIG_SPI_MASK\t\tGENMASK(2, 0)\n#define INV_ICM42600_DRIVE_CONFIG_SPI(_rate)\t\t\\\n\t\tFIELD_PREP(INV_ICM42600_DRIVE_CONFIG_SPI_MASK, (_rate))\n\n#define INV_ICM42600_REG_INT_CONFIG\t\t\t0x0014\n#define INV_ICM42600_INT_CONFIG_INT2_LATCHED\t\tBIT(5)\n#define INV_ICM42600_INT_CONFIG_INT2_PUSH_PULL\t\tBIT(4)\n#define INV_ICM42600_INT_CONFIG_INT2_ACTIVE_HIGH\tBIT(3)\n#define INV_ICM42600_INT_CONFIG_INT2_ACTIVE_LOW\t\t0x00\n#define INV_ICM42600_INT_CONFIG_INT1_LATCHED\t\tBIT(2)\n#define INV_ICM42600_INT_CONFIG_INT1_PUSH_PULL\t\tBIT(1)\n#define INV_ICM42600_INT_CONFIG_INT1_ACTIVE_HIGH\tBIT(0)\n#define INV_ICM42600_INT_CONFIG_INT1_ACTIVE_LOW\t\t0x00\n\n#define INV_ICM42600_REG_FIFO_CONFIG\t\t\t0x0016\n#define INV_ICM42600_FIFO_CONFIG_MASK\t\t\tGENMASK(7, 6)\n#define INV_ICM42600_FIFO_CONFIG_BYPASS\t\t\t\\\n\t\tFIELD_PREP(INV_ICM42600_FIFO_CONFIG_MASK, 0)\n#define INV_ICM42600_FIFO_CONFIG_STREAM\t\t\t\\\n\t\tFIELD_PREP(INV_ICM42600_FIFO_CONFIG_MASK, 1)\n#define INV_ICM42600_FIFO_CONFIG_STOP_ON_FULL\t\t\\\n\t\tFIELD_PREP(INV_ICM42600_FIFO_CONFIG_MASK, 2)\n\n \n#define INV_ICM42600_REG_TEMP_DATA\t\t\t0x001D\n#define INV_ICM42600_REG_ACCEL_DATA_X\t\t\t0x001F\n#define INV_ICM42600_REG_ACCEL_DATA_Y\t\t\t0x0021\n#define INV_ICM42600_REG_ACCEL_DATA_Z\t\t\t0x0023\n#define INV_ICM42600_REG_GYRO_DATA_X\t\t\t0x0025\n#define INV_ICM42600_REG_GYRO_DATA_Y\t\t\t0x0027\n#define INV_ICM42600_REG_GYRO_DATA_Z\t\t\t0x0029\n#define INV_ICM42600_DATA_INVALID\t\t\t-32768\n\n#define INV_ICM42600_REG_INT_STATUS\t\t\t0x002D\n#define INV_ICM42600_INT_STATUS_UI_FSYNC\t\tBIT(6)\n#define INV_ICM42600_INT_STATUS_PLL_RDY\t\t\tBIT(5)\n#define INV_ICM42600_INT_STATUS_RESET_DONE\t\tBIT(4)\n#define INV_ICM42600_INT_STATUS_DATA_RDY\t\tBIT(3)\n#define INV_ICM42600_INT_STATUS_FIFO_THS\t\tBIT(2)\n#define INV_ICM42600_INT_STATUS_FIFO_FULL\t\tBIT(1)\n#define INV_ICM42600_INT_STATUS_AGC_RDY\t\t\tBIT(0)\n\n \n#define INV_ICM42600_REG_FIFO_COUNT\t\t\t0x002E\n#define INV_ICM42600_REG_FIFO_DATA\t\t\t0x0030\n\n#define INV_ICM42600_REG_SIGNAL_PATH_RESET\t\t0x004B\n#define INV_ICM42600_SIGNAL_PATH_RESET_DMP_INIT_EN\tBIT(6)\n#define INV_ICM42600_SIGNAL_PATH_RESET_DMP_MEM_RESET\tBIT(5)\n#define INV_ICM42600_SIGNAL_PATH_RESET_RESET\t\tBIT(3)\n#define INV_ICM42600_SIGNAL_PATH_RESET_TMST_STROBE\tBIT(2)\n#define INV_ICM42600_SIGNAL_PATH_RESET_FIFO_FLUSH\tBIT(1)\n\n \n#define INV_ICM42600_REG_INTF_CONFIG0\t\t\t0x004C\n#define INV_ICM42600_INTF_CONFIG0_FIFO_HOLD_LAST_DATA\tBIT(7)\n#define INV_ICM42600_INTF_CONFIG0_FIFO_COUNT_REC\tBIT(6)\n#define INV_ICM42600_INTF_CONFIG0_FIFO_COUNT_ENDIAN\tBIT(5)\n#define INV_ICM42600_INTF_CONFIG0_SENSOR_DATA_ENDIAN\tBIT(4)\n#define INV_ICM42600_INTF_CONFIG0_UI_SIFS_CFG_MASK\tGENMASK(1, 0)\n#define INV_ICM42600_INTF_CONFIG0_UI_SIFS_CFG_SPI_DIS\t\\\n\t\tFIELD_PREP(INV_ICM42600_INTF_CONFIG0_UI_SIFS_CFG_MASK, 2)\n#define INV_ICM42600_INTF_CONFIG0_UI_SIFS_CFG_I2C_DIS\t\\\n\t\tFIELD_PREP(INV_ICM42600_INTF_CONFIG0_UI_SIFS_CFG_MASK, 3)\n\n#define INV_ICM42600_REG_INTF_CONFIG1\t\t\t0x004D\n#define INV_ICM42600_INTF_CONFIG1_ACCEL_LP_CLK_RC\tBIT(3)\n\n#define INV_ICM42600_REG_PWR_MGMT0\t\t\t0x004E\n#define INV_ICM42600_PWR_MGMT0_TEMP_DIS\t\t\tBIT(5)\n#define INV_ICM42600_PWR_MGMT0_IDLE\t\t\tBIT(4)\n#define INV_ICM42600_PWR_MGMT0_GYRO(_mode)\t\t\\\n\t\tFIELD_PREP(GENMASK(3, 2), (_mode))\n#define INV_ICM42600_PWR_MGMT0_ACCEL(_mode)\t\t\\\n\t\tFIELD_PREP(GENMASK(1, 0), (_mode))\n\n#define INV_ICM42600_REG_GYRO_CONFIG0\t\t\t0x004F\n#define INV_ICM42600_GYRO_CONFIG0_FS(_fs)\t\t\\\n\t\tFIELD_PREP(GENMASK(7, 5), (_fs))\n#define INV_ICM42600_GYRO_CONFIG0_ODR(_odr)\t\t\\\n\t\tFIELD_PREP(GENMASK(3, 0), (_odr))\n\n#define INV_ICM42600_REG_ACCEL_CONFIG0\t\t\t0x0050\n#define INV_ICM42600_ACCEL_CONFIG0_FS(_fs)\t\t\\\n\t\tFIELD_PREP(GENMASK(7, 5), (_fs))\n#define INV_ICM42600_ACCEL_CONFIG0_ODR(_odr)\t\t\\\n\t\tFIELD_PREP(GENMASK(3, 0), (_odr))\n\n#define INV_ICM42600_REG_GYRO_ACCEL_CONFIG0\t\t0x0052\n#define INV_ICM42600_GYRO_ACCEL_CONFIG0_ACCEL_FILT(_f)\t\\\n\t\tFIELD_PREP(GENMASK(7, 4), (_f))\n#define INV_ICM42600_GYRO_ACCEL_CONFIG0_GYRO_FILT(_f)\t\\\n\t\tFIELD_PREP(GENMASK(3, 0), (_f))\n\n#define INV_ICM42600_REG_TMST_CONFIG\t\t\t0x0054\n#define INV_ICM42600_TMST_CONFIG_MASK\t\t\tGENMASK(4, 0)\n#define INV_ICM42600_TMST_CONFIG_TMST_TO_REGS_EN\tBIT(4)\n#define INV_ICM42600_TMST_CONFIG_TMST_RES_16US\t\tBIT(3)\n#define INV_ICM42600_TMST_CONFIG_TMST_DELTA_EN\t\tBIT(2)\n#define INV_ICM42600_TMST_CONFIG_TMST_FSYNC_EN\t\tBIT(1)\n#define INV_ICM42600_TMST_CONFIG_TMST_EN\t\tBIT(0)\n\n#define INV_ICM42600_REG_FIFO_CONFIG1\t\t\t0x005F\n#define INV_ICM42600_FIFO_CONFIG1_RESUME_PARTIAL_RD\tBIT(6)\n#define INV_ICM42600_FIFO_CONFIG1_WM_GT_TH\t\tBIT(5)\n#define INV_ICM42600_FIFO_CONFIG1_TMST_FSYNC_EN\t\tBIT(3)\n#define INV_ICM42600_FIFO_CONFIG1_TEMP_EN\t\tBIT(2)\n#define INV_ICM42600_FIFO_CONFIG1_GYRO_EN\t\tBIT(1)\n#define INV_ICM42600_FIFO_CONFIG1_ACCEL_EN\t\tBIT(0)\n\n \n#define INV_ICM42600_REG_FIFO_WATERMARK\t\t\t0x0060\n#define INV_ICM42600_FIFO_WATERMARK_VAL(_wm)\t\t\\\n\t\tcpu_to_le16((_wm) & GENMASK(11, 0))\n \n#define INV_ICM42600_FIFO_WATERMARK_MAX\t\t\t(2048 - 12 * 16)\n\n#define INV_ICM42600_REG_INT_CONFIG1\t\t\t0x0064\n#define INV_ICM42600_INT_CONFIG1_TPULSE_DURATION\tBIT(6)\n#define INV_ICM42600_INT_CONFIG1_TDEASSERT_DISABLE\tBIT(5)\n#define INV_ICM42600_INT_CONFIG1_ASYNC_RESET\t\tBIT(4)\n\n#define INV_ICM42600_REG_INT_SOURCE0\t\t\t0x0065\n#define INV_ICM42600_INT_SOURCE0_UI_FSYNC_INT1_EN\tBIT(6)\n#define INV_ICM42600_INT_SOURCE0_PLL_RDY_INT1_EN\tBIT(5)\n#define INV_ICM42600_INT_SOURCE0_RESET_DONE_INT1_EN\tBIT(4)\n#define INV_ICM42600_INT_SOURCE0_UI_DRDY_INT1_EN\tBIT(3)\n#define INV_ICM42600_INT_SOURCE0_FIFO_THS_INT1_EN\tBIT(2)\n#define INV_ICM42600_INT_SOURCE0_FIFO_FULL_INT1_EN\tBIT(1)\n#define INV_ICM42600_INT_SOURCE0_UI_AGC_RDY_INT1_EN\tBIT(0)\n\n#define INV_ICM42600_REG_WHOAMI\t\t\t\t0x0075\n#define INV_ICM42600_WHOAMI_ICM42600\t\t\t0x40\n#define INV_ICM42600_WHOAMI_ICM42602\t\t\t0x41\n#define INV_ICM42600_WHOAMI_ICM42605\t\t\t0x42\n#define INV_ICM42600_WHOAMI_ICM42622\t\t\t0x46\n#define INV_ICM42600_WHOAMI_ICM42631\t\t\t0x5C\n\n \n#define INV_ICM42600_REG_SENSOR_CONFIG0\t\t\t0x1003\n#define INV_ICM42600_SENSOR_CONFIG0_ZG_DISABLE\t\tBIT(5)\n#define INV_ICM42600_SENSOR_CONFIG0_YG_DISABLE\t\tBIT(4)\n#define INV_ICM42600_SENSOR_CONFIG0_XG_DISABLE\t\tBIT(3)\n#define INV_ICM42600_SENSOR_CONFIG0_ZA_DISABLE\t\tBIT(2)\n#define INV_ICM42600_SENSOR_CONFIG0_YA_DISABLE\t\tBIT(1)\n#define INV_ICM42600_SENSOR_CONFIG0_XA_DISABLE\t\tBIT(0)\n\n \n#define INV_ICM42600_REG_TMSTVAL\t\t\t0x1062\n#define INV_ICM42600_TMSTVAL_MASK\t\t\tGENMASK(19, 0)\n\n#define INV_ICM42600_REG_INTF_CONFIG4\t\t\t0x107A\n#define INV_ICM42600_INTF_CONFIG4_I3C_BUS_ONLY\t\tBIT(6)\n#define INV_ICM42600_INTF_CONFIG4_SPI_AP_4WIRE\t\tBIT(1)\n\n#define INV_ICM42600_REG_INTF_CONFIG6\t\t\t0x107C\n#define INV_ICM42600_INTF_CONFIG6_MASK\t\t\tGENMASK(4, 0)\n#define INV_ICM42600_INTF_CONFIG6_I3C_EN\t\tBIT(4)\n#define INV_ICM42600_INTF_CONFIG6_I3C_IBI_BYTE_EN\tBIT(3)\n#define INV_ICM42600_INTF_CONFIG6_I3C_IBI_EN\t\tBIT(2)\n#define INV_ICM42600_INTF_CONFIG6_I3C_DDR_EN\t\tBIT(1)\n#define INV_ICM42600_INTF_CONFIG6_I3C_SDR_EN\t\tBIT(0)\n\n \n#define INV_ICM42600_REG_INT_SOURCE8\t\t\t0x404F\n#define INV_ICM42600_INT_SOURCE8_FSYNC_IBI_EN\t\tBIT(5)\n#define INV_ICM42600_INT_SOURCE8_PLL_RDY_IBI_EN\t\tBIT(4)\n#define INV_ICM42600_INT_SOURCE8_UI_DRDY_IBI_EN\t\tBIT(3)\n#define INV_ICM42600_INT_SOURCE8_FIFO_THS_IBI_EN\tBIT(2)\n#define INV_ICM42600_INT_SOURCE8_FIFO_FULL_IBI_EN\tBIT(1)\n#define INV_ICM42600_INT_SOURCE8_AGC_RDY_IBI_EN\t\tBIT(0)\n\n#define INV_ICM42600_REG_OFFSET_USER0\t\t\t0x4077\n#define INV_ICM42600_REG_OFFSET_USER1\t\t\t0x4078\n#define INV_ICM42600_REG_OFFSET_USER2\t\t\t0x4079\n#define INV_ICM42600_REG_OFFSET_USER3\t\t\t0x407A\n#define INV_ICM42600_REG_OFFSET_USER4\t\t\t0x407B\n#define INV_ICM42600_REG_OFFSET_USER5\t\t\t0x407C\n#define INV_ICM42600_REG_OFFSET_USER6\t\t\t0x407D\n#define INV_ICM42600_REG_OFFSET_USER7\t\t\t0x407E\n#define INV_ICM42600_REG_OFFSET_USER8\t\t\t0x407F\n\n \n#define INV_ICM42600_POWER_UP_TIME_MS\t\t100\n#define INV_ICM42600_RESET_TIME_MS\t\t1\n#define INV_ICM42600_ACCEL_STARTUP_TIME_MS\t20\n#define INV_ICM42600_GYRO_STARTUP_TIME_MS\t60\n#define INV_ICM42600_GYRO_STOP_TIME_MS\t\t150\n#define INV_ICM42600_TEMP_STARTUP_TIME_MS\t14\n#define INV_ICM42600_SUSPEND_DELAY_MS\t\t2000\n\ntypedef int (*inv_icm42600_bus_setup)(struct inv_icm42600_state *);\n\nextern const struct regmap_config inv_icm42600_regmap_config;\nextern const struct dev_pm_ops inv_icm42600_pm_ops;\n\nconst struct iio_mount_matrix *\ninv_icm42600_get_mount_matrix(const struct iio_dev *indio_dev,\n\t\t\t      const struct iio_chan_spec *chan);\n\nuint32_t inv_icm42600_odr_to_period(enum inv_icm42600_odr odr);\n\nint inv_icm42600_set_accel_conf(struct inv_icm42600_state *st,\n\t\t\t\tstruct inv_icm42600_sensor_conf *conf,\n\t\t\t\tunsigned int *sleep_ms);\n\nint inv_icm42600_set_gyro_conf(struct inv_icm42600_state *st,\n\t\t\t       struct inv_icm42600_sensor_conf *conf,\n\t\t\t       unsigned int *sleep_ms);\n\nint inv_icm42600_set_temp_conf(struct inv_icm42600_state *st, bool enable,\n\t\t\t       unsigned int *sleep_ms);\n\nint inv_icm42600_debugfs_reg(struct iio_dev *indio_dev, unsigned int reg,\n\t\t\t     unsigned int writeval, unsigned int *readval);\n\nint inv_icm42600_core_probe(struct regmap *regmap, int chip, int irq,\n\t\t\t    inv_icm42600_bus_setup bus_setup);\n\nstruct iio_dev *inv_icm42600_gyro_init(struct inv_icm42600_state *st);\n\nint inv_icm42600_gyro_parse_fifo(struct iio_dev *indio_dev);\n\nstruct iio_dev *inv_icm42600_accel_init(struct inv_icm42600_state *st);\n\nint inv_icm42600_accel_parse_fifo(struct iio_dev *indio_dev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}