{
  "module_name": "inv_icm42600_buffer.h",
  "hash_id": "29e139eb52fe4446efb631c36113d6fc62ca3fd17970d93f69f3f42237b8e3e3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/imu/inv_icm42600/inv_icm42600_buffer.h",
  "human_readable_source": " \n \n\n#ifndef INV_ICM42600_BUFFER_H_\n#define INV_ICM42600_BUFFER_H_\n\n#include <linux/kernel.h>\n#include <linux/bits.h>\n\nstruct inv_icm42600_state;\n\n#define INV_ICM42600_SENSOR_GYRO\tBIT(0)\n#define INV_ICM42600_SENSOR_ACCEL\tBIT(1)\n#define INV_ICM42600_SENSOR_TEMP\tBIT(2)\n\n \nstruct inv_icm42600_fifo {\n\tunsigned int on;\n\tunsigned int en;\n\tuint32_t period;\n\tstruct {\n\t\tunsigned int gyro;\n\t\tunsigned int accel;\n\t} watermark;\n\tsize_t count;\n\tstruct {\n\t\tsize_t gyro;\n\t\tsize_t accel;\n\t\tsize_t total;\n\t} nb;\n\tuint8_t data[2080] __aligned(IIO_DMA_MINALIGN);\n};\n\n \nstruct inv_icm42600_fifo_sensor_data {\n\t__be16 x;\n\t__be16 y;\n\t__be16 z;\n} __packed;\n#define INV_ICM42600_FIFO_DATA_INVALID\t\t-32768\n\nstatic inline int16_t inv_icm42600_fifo_get_sensor_data(__be16 d)\n{\n\treturn be16_to_cpu(d);\n}\n\nstatic inline bool\ninv_icm42600_fifo_is_data_valid(const struct inv_icm42600_fifo_sensor_data *s)\n{\n\tint16_t x, y, z;\n\n\tx = inv_icm42600_fifo_get_sensor_data(s->x);\n\ty = inv_icm42600_fifo_get_sensor_data(s->y);\n\tz = inv_icm42600_fifo_get_sensor_data(s->z);\n\n\tif (x == INV_ICM42600_FIFO_DATA_INVALID &&\n\t    y == INV_ICM42600_FIFO_DATA_INVALID &&\n\t    z == INV_ICM42600_FIFO_DATA_INVALID)\n\t\treturn false;\n\n\treturn true;\n}\n\nssize_t inv_icm42600_fifo_decode_packet(const void *packet, const void **accel,\n\t\t\t\t\tconst void **gyro, const int8_t **temp,\n\t\t\t\t\tconst void **timestamp, unsigned int *odr);\n\nextern const struct iio_buffer_setup_ops inv_icm42600_buffer_ops;\n\nint inv_icm42600_buffer_init(struct inv_icm42600_state *st);\n\nvoid inv_icm42600_buffer_update_fifo_period(struct inv_icm42600_state *st);\n\nint inv_icm42600_buffer_set_fifo_en(struct inv_icm42600_state *st,\n\t\t\t\t    unsigned int fifo_en);\n\nint inv_icm42600_buffer_update_watermark(struct inv_icm42600_state *st);\n\nint inv_icm42600_buffer_fifo_read(struct inv_icm42600_state *st,\n\t\t\t\t  unsigned int max);\n\nint inv_icm42600_buffer_fifo_parse(struct inv_icm42600_state *st);\n\nint inv_icm42600_buffer_hwfifo_flush(struct inv_icm42600_state *st,\n\t\t\t\t     unsigned int count);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}