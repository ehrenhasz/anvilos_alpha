{
  "module_name": "st_lsm6dsx_i3c.c",
  "hash_id": "ea05e1d7d85304f63d743a758e9017e70829cd9609cefbb5174223b2aabe69a7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_i3c.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/i3c/device.h>\n#include <linux/i3c/master.h>\n#include <linux/slab.h>\n#include <linux/regmap.h>\n\n#include \"st_lsm6dsx.h\"\n\nstatic const struct i3c_device_id st_lsm6dsx_i3c_ids[] = {\n\tI3C_DEVICE(0x0104, 0x006C, (void *)ST_LSM6DSO_ID),\n\tI3C_DEVICE(0x0104, 0x006B, (void *)ST_LSM6DSR_ID),\n\t{   },\n};\nMODULE_DEVICE_TABLE(i3c, st_lsm6dsx_i3c_ids);\n\nstatic int st_lsm6dsx_i3c_probe(struct i3c_device *i3cdev)\n{\n\tstruct regmap_config st_lsm6dsx_i3c_regmap_config = {\n\t\t.reg_bits = 8,\n\t\t.val_bits = 8,\n\t};\n\tconst struct i3c_device_id *id = i3c_device_match_id(i3cdev,\n\t\t\t\t\t\t\t    st_lsm6dsx_i3c_ids);\n\tstruct regmap *regmap;\n\n\tregmap = devm_regmap_init_i3c(i3cdev, &st_lsm6dsx_i3c_regmap_config);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(&i3cdev->dev, \"Failed to register i3c regmap %ld\\n\", PTR_ERR(regmap));\n\t\treturn PTR_ERR(regmap);\n\t}\n\n\treturn st_lsm6dsx_probe(&i3cdev->dev, 0, (uintptr_t)id->data, regmap);\n}\n\nstatic struct i3c_driver st_lsm6dsx_driver = {\n\t.driver = {\n\t\t.name = \"st_lsm6dsx_i3c\",\n\t\t.pm = pm_sleep_ptr(&st_lsm6dsx_pm_ops),\n\t},\n\t.probe = st_lsm6dsx_i3c_probe,\n\t.id_table = st_lsm6dsx_i3c_ids,\n};\nmodule_i3c_driver(st_lsm6dsx_driver);\n\nMODULE_AUTHOR(\"Vitor Soares <vitor.soares@synopsys.com>\");\nMODULE_DESCRIPTION(\"STMicroelectronics st_lsm6dsx i3c driver\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_IMPORT_NS(IIO_LSM6DSX);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}