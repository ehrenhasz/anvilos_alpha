{
  "module_name": "bmp280.h",
  "hash_id": "7b0afee2a4de3756bf7c1b872be837722afb44c9c6d7f40aabdc207ddcf412af",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/pressure/bmp280.h",
  "human_readable_source": " \n#include <linux/bitops.h>\n#include <linux/device.h>\n#include <linux/iio/iio.h>\n#include <linux/regmap.h>\n#include <linux/regulator/consumer.h>\n\n\n \n#define BMP580_REG_CMD\t\t\t0x7E\n#define BMP580_REG_EFF_OSR\t\t0x38\n#define BMP580_REG_ODR_CONFIG\t\t0x37\n#define BMP580_REG_OSR_CONFIG\t\t0x36\n#define BMP580_REG_IF_CONFIG\t\t0x13\n#define BMP580_REG_REV_ID\t\t0x02\n#define BMP580_REG_CHIP_ID\t\t0x01\n \n#define BMP580_REG_OOR_CONFIG\t\t0x35\n#define BMP580_REG_OOR_RANGE\t\t0x34\n#define BMP580_REG_OOR_THR_MSB\t\t0x33\n#define BMP580_REG_OOR_THR_LSB\t\t0x32\n \n#define BMP580_REG_DSP_IIR\t\t0x31\n#define BMP580_REG_DSP_CONFIG\t\t0x30\n \n#define BMP580_REG_NVM_DATA_MSB\t\t0x2D\n#define BMP580_REG_NVM_DATA_LSB\t\t0x2C\n#define BMP580_REG_NVM_ADDR\t\t0x2B\n \n#define BMP580_REG_STATUS\t\t0x28\n#define BMP580_REG_INT_STATUS\t\t0x27\n#define BMP580_REG_CHIP_STATUS\t\t0x11\n \n#define BMP580_REG_FIFO_DATA\t\t0x29\n#define BMP580_REG_PRESS_MSB\t\t0x22\n#define BMP580_REG_PRESS_LSB\t\t0x21\n#define BMP580_REG_PRESS_XLSB\t\t0x20\n#define BMP580_REG_TEMP_MSB\t\t0x1F\n#define BMP580_REG_TEMP_LSB\t\t0x1E\n#define BMP580_REG_TEMP_XLSB\t\t0x1D\n \n#define BMP580_REG_FIFO_SEL\t\t0x18\n#define BMP580_REG_FIFO_COUNT\t\t0x17\n#define BMP580_REG_FIFO_CONFIG\t\t0x16\n \n#define BMP580_REG_INT_SOURCE\t\t0x15\n#define BMP580_REG_INT_CONFIG\t\t0x14\n\n#define BMP580_CMD_NOOP\t\t\t0x00\n#define BMP580_CMD_EXTMODE_SEQ_0\t0x73\n#define BMP580_CMD_EXTMODE_SEQ_1\t0xB4\n#define BMP580_CMD_EXTMODE_SEQ_2\t0x69\n#define BMP580_CMD_NVM_OP_SEQ_0\t\t0x5D\n#define BMP580_CMD_NVM_READ_SEQ_1\t0xA5\n#define BMP580_CMD_NVM_WRITE_SEQ_1\t0xA0\n#define BMP580_CMD_SOFT_RESET\t\t0xB6\n\n#define BMP580_INT_STATUS_POR_MASK\tBIT(4)\n\n#define BMP580_STATUS_CORE_RDY_MASK\tBIT(0)\n#define BMP580_STATUS_NVM_RDY_MASK\tBIT(1)\n#define BMP580_STATUS_NVM_ERR_MASK\tBIT(2)\n#define BMP580_STATUS_NVM_CMD_ERR_MASK\tBIT(3)\n\n#define BMP580_OSR_PRESS_MASK\t\tGENMASK(5, 3)\n#define BMP580_OSR_TEMP_MASK\t\tGENMASK(2, 0)\n#define BMP580_OSR_PRESS_EN\t\tBIT(6)\n#define BMP580_EFF_OSR_PRESS_MASK\tGENMASK(5, 3)\n#define BMP580_EFF_OSR_TEMP_MASK\tGENMASK(2, 0)\n#define BMP580_EFF_OSR_VALID_ODR\tBIT(7)\n\n#define BMP580_ODR_MASK\t\t\tGENMASK(6, 2)\n#define BMP580_MODE_MASK\t\tGENMASK(1, 0)\n#define BMP580_MODE_SLEEP\t\t0\n#define BMP580_MODE_NORMAL\t\t1\n#define BMP580_MODE_FORCED\t\t2\n#define BMP580_MODE_CONTINOUS\t\t3\n#define BMP580_ODR_DEEPSLEEP_DIS\tBIT(7)\n\n#define BMP580_DSP_COMP_MASK\t\tGENMASK(1, 0)\n#define BMP580_DSP_COMP_DIS\t\t0\n#define BMP580_DSP_TEMP_COMP_EN\t\t1\n \n#define BMP580_DSP_PRESS_COMP_EN\t2\n#define BMP580_DSP_PRESS_TEMP_COMP_EN\t3\n#define BMP580_DSP_IIR_FORCED_FLUSH\tBIT(2)\n#define BMP580_DSP_SHDW_IIR_TEMP_EN\tBIT(3)\n#define BMP580_DSP_FIFO_IIR_TEMP_EN\tBIT(4)\n#define BMP580_DSP_SHDW_IIR_PRESS_EN\tBIT(5)\n#define BMP580_DSP_FIFO_IIR_PRESS_EN\tBIT(6)\n#define BMP580_DSP_OOR_IIR_PRESS_EN\tBIT(7)\n\n#define BMP580_DSP_IIR_PRESS_MASK\tGENMASK(5, 3)\n#define BMP580_DSP_IIR_TEMP_MASK\tGENMASK(2, 0)\n#define BMP580_FILTER_OFF\t\t0\n#define BMP580_FILTER_1X\t\t1\n#define BMP580_FILTER_3X\t\t2\n#define BMP580_FILTER_7X\t\t3\n#define BMP580_FILTER_15X\t\t4\n#define BMP580_FILTER_31X\t\t5\n#define BMP580_FILTER_63X\t\t6\n#define BMP580_FILTER_127X\t\t7\n\n#define BMP580_NVM_ROW_ADDR_MASK\tGENMASK(5, 0)\n#define BMP580_NVM_PROG_EN\t\tBIT(6)\n\n#define BMP580_TEMP_SKIPPED\t\t0x7f7f7f\n#define BMP580_PRESS_SKIPPED\t\t0x7f7f7f\n\n \n#define BMP380_REG_CMD\t\t\t0x7E\n#define BMP380_REG_CONFIG\t\t0x1F\n#define BMP380_REG_ODR\t\t\t0x1D\n#define BMP380_REG_OSR\t\t\t0x1C\n#define BMP380_REG_POWER_CONTROL\t0x1B\n#define BMP380_REG_IF_CONFIG\t\t0x1A\n#define BMP380_REG_INT_CONTROL\t\t0x19\n#define BMP380_REG_INT_STATUS\t\t0x11\n#define BMP380_REG_EVENT\t\t0x10\n#define BMP380_REG_STATUS\t\t0x03\n#define BMP380_REG_ERROR\t\t0x02\n#define BMP380_REG_ID\t\t\t0x00\n\n#define BMP380_REG_FIFO_CONFIG_1\t0x18\n#define BMP380_REG_FIFO_CONFIG_2\t0x17\n#define BMP380_REG_FIFO_WATERMARK_MSB\t0x16\n#define BMP380_REG_FIFO_WATERMARK_LSB\t0x15\n#define BMP380_REG_FIFO_DATA\t\t0x14\n#define BMP380_REG_FIFO_LENGTH_MSB\t0x13\n#define BMP380_REG_FIFO_LENGTH_LSB\t0x12\n\n#define BMP380_REG_SENSOR_TIME_MSB\t0x0E\n#define BMP380_REG_SENSOR_TIME_LSB\t0x0D\n#define BMP380_REG_SENSOR_TIME_XLSB\t0x0C\n\n#define BMP380_REG_TEMP_MSB\t\t0x09\n#define BMP380_REG_TEMP_LSB\t\t0x08\n#define BMP380_REG_TEMP_XLSB\t\t0x07\n\n#define BMP380_REG_PRESS_MSB\t\t0x06\n#define BMP380_REG_PRESS_LSB\t\t0x05\n#define BMP380_REG_PRESS_XLSB\t\t0x04\n\n#define BMP380_REG_CALIB_TEMP_START\t0x31\n#define BMP380_CALIB_REG_COUNT\t\t21\n\n#define BMP380_FILTER_MASK\t\tGENMASK(3, 1)\n#define BMP380_FILTER_OFF\t\t0\n#define BMP380_FILTER_1X\t\t1\n#define BMP380_FILTER_3X\t\t2\n#define BMP380_FILTER_7X\t\t3\n#define BMP380_FILTER_15X\t\t4\n#define BMP380_FILTER_31X\t\t5\n#define BMP380_FILTER_63X\t\t6\n#define BMP380_FILTER_127X\t\t7\n\n#define BMP380_OSRS_TEMP_MASK\t\tGENMASK(5, 3)\n#define BMP380_OSRS_PRESS_MASK\t\tGENMASK(2, 0)\n\n#define BMP380_ODRS_MASK\t\tGENMASK(4, 0)\n\n#define BMP380_CTRL_SENSORS_MASK\tGENMASK(1, 0)\n#define BMP380_CTRL_SENSORS_PRESS_EN\tBIT(0)\n#define BMP380_CTRL_SENSORS_TEMP_EN\tBIT(1)\n#define BMP380_MODE_MASK\t\tGENMASK(5, 4)\n#define BMP380_MODE_SLEEP\t\t0\n#define BMP380_MODE_FORCED\t\t1\n#define BMP380_MODE_NORMAL\t\t3\n\n#define BMP380_MIN_TEMP\t\t\t-4000\n#define BMP380_MAX_TEMP\t\t\t8500\n#define BMP380_MIN_PRES\t\t\t3000000\n#define BMP380_MAX_PRES\t\t\t12500000\n\n#define BMP380_CMD_NOOP\t\t\t0x00\n#define BMP380_CMD_EXTMODE_EN_MID\t0x34\n#define BMP380_CMD_FIFO_FLUSH\t\t0xB0\n#define BMP380_CMD_SOFT_RESET\t\t0xB6\n\n#define BMP380_STATUS_CMD_RDY_MASK\tBIT(4)\n#define BMP380_STATUS_DRDY_PRESS_MASK\tBIT(5)\n#define BMP380_STATUS_DRDY_TEMP_MASK\tBIT(6)\n\n#define BMP380_ERR_FATAL_MASK\t\tBIT(0)\n#define BMP380_ERR_CMD_MASK\t\tBIT(1)\n#define BMP380_ERR_CONF_MASK\t\tBIT(2)\n\n#define BMP380_TEMP_SKIPPED\t\t0x800000\n#define BMP380_PRESS_SKIPPED\t\t0x800000\n\n \n#define BMP280_REG_HUMIDITY_LSB\t\t0xFE\n#define BMP280_REG_HUMIDITY_MSB\t\t0xFD\n#define BMP280_REG_TEMP_XLSB\t\t0xFC\n#define BMP280_REG_TEMP_LSB\t\t0xFB\n#define BMP280_REG_TEMP_MSB\t\t0xFA\n#define BMP280_REG_PRESS_XLSB\t\t0xF9\n#define BMP280_REG_PRESS_LSB\t\t0xF8\n#define BMP280_REG_PRESS_MSB\t\t0xF7\n\n \n#define BMP280_MEAS_TRIM_MASK\t\tGENMASK(24, 4)\n\n#define BMP280_REG_CONFIG\t\t0xF5\n#define BMP280_REG_CTRL_MEAS\t\t0xF4\n#define BMP280_REG_STATUS\t\t0xF3\n#define BMP280_REG_CTRL_HUMIDITY\t0xF2\n\n \n#define BMP280_REG_COMP_H1\t\t0xA1\n#define BMP280_REG_COMP_H2\t\t0xE1\n#define BMP280_REG_COMP_H3\t\t0xE3\n#define BMP280_REG_COMP_H4\t\t0xE4\n#define BMP280_REG_COMP_H5\t\t0xE5\n#define BMP280_REG_COMP_H6\t\t0xE7\n\n#define BMP280_REG_COMP_TEMP_START\t0x88\n#define BMP280_COMP_TEMP_REG_COUNT\t6\n\n#define BMP280_REG_COMP_PRESS_START\t0x8E\n#define BMP280_COMP_PRESS_REG_COUNT\t18\n\n#define BMP280_COMP_H5_MASK\t\tGENMASK(15, 4)\n\n#define BMP280_CONTIGUOUS_CALIB_REGS\t(BMP280_COMP_TEMP_REG_COUNT + \\\n\t\t\t\t\t BMP280_COMP_PRESS_REG_COUNT)\n\n#define BMP280_FILTER_MASK\t\tGENMASK(4, 2)\n#define BMP280_FILTER_OFF\t\t0\n#define BMP280_FILTER_2X\t\t1\n#define BMP280_FILTER_4X\t\t2\n#define BMP280_FILTER_8X\t\t3\n#define BMP280_FILTER_16X\t\t4\n\n#define BMP280_OSRS_HUMIDITY_MASK\tGENMASK(2, 0)\n#define BMP280_OSRS_HUMIDITY_SKIP\t0\n#define BMP280_OSRS_HUMIDITY_1X\t\t1\n#define BMP280_OSRS_HUMIDITY_2X\t\t2\n#define BMP280_OSRS_HUMIDITY_4X\t\t3\n#define BMP280_OSRS_HUMIDITY_8X\t\t4\n#define BMP280_OSRS_HUMIDITY_16X\t5\n\n#define BMP280_OSRS_TEMP_MASK\t\tGENMASK(7, 5)\n#define BMP280_OSRS_TEMP_SKIP\t\t0\n#define BMP280_OSRS_TEMP_1X\t\t1\n#define BMP280_OSRS_TEMP_2X\t\t2\n#define BMP280_OSRS_TEMP_4X\t\t3\n#define BMP280_OSRS_TEMP_8X\t\t4\n#define BMP280_OSRS_TEMP_16X\t\t5\n\n#define BMP280_OSRS_PRESS_MASK\t\tGENMASK(4, 2)\n#define BMP280_OSRS_PRESS_SKIP\t\t0\n#define BMP280_OSRS_PRESS_1X\t\t1\n#define BMP280_OSRS_PRESS_2X\t\t2\n#define BMP280_OSRS_PRESS_4X\t\t3\n#define BMP280_OSRS_PRESS_8X\t\t4\n#define BMP280_OSRS_PRESS_16X\t\t5\n\n#define BMP280_MODE_MASK\t\tGENMASK(1, 0)\n#define BMP280_MODE_SLEEP\t\t0\n#define BMP280_MODE_FORCED\t\t1\n#define BMP280_MODE_NORMAL\t\t3\n\n \n#define BMP180_REG_OUT_XLSB\t\t0xF8\n#define BMP180_REG_OUT_LSB\t\t0xF7\n#define BMP180_REG_OUT_MSB\t\t0xF6\n\n#define BMP180_REG_CALIB_START\t\t0xAA\n#define BMP180_REG_CALIB_COUNT\t\t22\n\n#define BMP180_MEAS_CTRL_MASK\t\tGENMASK(4, 0)\n#define BMP180_MEAS_TEMP\t\t0x0E\n#define BMP180_MEAS_PRESS\t\t0x14\n#define BMP180_MEAS_SCO\t\t\tBIT(5)\n#define BMP180_OSRS_PRESS_MASK\t\tGENMASK(7, 6)\n#define BMP180_MEAS_PRESS_1X\t\t0\n#define BMP180_MEAS_PRESS_2X\t\t1\n#define BMP180_MEAS_PRESS_4X\t\t2\n#define BMP180_MEAS_PRESS_8X\t\t3\n\n \n#define BMP280_REG_CTRL_MEAS\t\t0xF4\n#define BMP280_REG_RESET\t\t0xE0\n#define BMP280_REG_ID\t\t\t0xD0\n\n#define BMP380_CHIP_ID\t\t\t0x50\n#define BMP580_CHIP_ID\t\t\t0x50\n#define BMP580_CHIP_ID_ALT\t\t0x51\n#define BMP180_CHIP_ID\t\t\t0x55\n#define BMP280_CHIP_ID\t\t\t0x58\n#define BME280_CHIP_ID\t\t\t0x60\n#define BMP280_SOFT_RESET_VAL\t\t0xB6\n\n \n#define BMP280_TEMP_SKIPPED\t\t0x80000\n#define BMP280_PRESS_SKIPPED\t\t0x80000\n#define BMP280_HUMIDITY_SKIPPED\t\t0x8000\n\n \n\nstatic const char *const bmp280_supply_names[] = {\n\t\"vddd\", \"vdda\"\n};\n\n#define BMP280_NUM_SUPPLIES ARRAY_SIZE(bmp280_supply_names)\n\nstruct bmp180_calib {\n\ts16 AC1;\n\ts16 AC2;\n\ts16 AC3;\n\tu16 AC4;\n\tu16 AC5;\n\tu16 AC6;\n\ts16 B1;\n\ts16 B2;\n\ts16 MB;\n\ts16 MC;\n\ts16 MD;\n};\n\n \nstruct bmp280_calib {\n\tu16 T1;\n\ts16 T2;\n\ts16 T3;\n\tu16 P1;\n\ts16 P2;\n\ts16 P3;\n\ts16 P4;\n\ts16 P5;\n\ts16 P6;\n\ts16 P7;\n\ts16 P8;\n\ts16 P9;\n\tu8  H1;\n\ts16 H2;\n\tu8  H3;\n\ts16 H4;\n\ts16 H5;\n\ts8  H6;\n};\n\n \nstruct bmp380_calib {\n\tu16 T1;\n\tu16 T2;\n\ts8  T3;\n\ts16 P1;\n\ts16 P2;\n\ts8  P3;\n\ts8  P4;\n\tu16 P5;\n\tu16 P6;\n\ts8  P7;\n\ts8  P8;\n\ts16 P9;\n\ts8  P10;\n\ts8  P11;\n};\n\nstruct bmp280_data {\n\tstruct device *dev;\n\tstruct mutex lock;\n\tstruct regmap *regmap;\n\tstruct completion done;\n\tbool use_eoc;\n\tconst struct bmp280_chip_info *chip_info;\n\tunion {\n\t\tstruct bmp180_calib bmp180;\n\t\tstruct bmp280_calib bmp280;\n\t\tstruct bmp380_calib bmp380;\n\t} calib;\n\tstruct regulator_bulk_data supplies[BMP280_NUM_SUPPLIES];\n\tunsigned int start_up_time;  \n\n\t \n\tu8 oversampling_press;\n\tu8 oversampling_temp;\n\tu8 oversampling_humid;\n\tu8 iir_filter_coeff;\n\n\t \n\tint sampling_freq;\n\n\t \n\ts32 t_fine;\n\n\t \n\tunion {\n\t\t \n\t\tu8 buf[3];\n\t\t \n\t\t__le16 bmp280_cal_buf[BMP280_CONTIGUOUS_CALIB_REGS / 2];\n\t\t__be16 bmp180_cal_buf[BMP180_REG_CALIB_COUNT / 2];\n\t\tu8 bmp380_cal_buf[BMP380_CALIB_REG_COUNT];\n\t\t \n\t\t__le16 le16;\n\t\t__be16 be16;\n\t} __aligned(IIO_DMA_MINALIGN);\n};\n\nstruct bmp280_chip_info {\n\tunsigned int id_reg;\n\tconst unsigned int chip_id;\n\n\tconst struct regmap_config *regmap_config;\n\n\tconst struct iio_chan_spec *channels;\n\tint num_channels;\n\tunsigned int start_up_time;\n\n\tconst int *oversampling_temp_avail;\n\tint num_oversampling_temp_avail;\n\tint oversampling_temp_default;\n\n\tconst int *oversampling_press_avail;\n\tint num_oversampling_press_avail;\n\tint oversampling_press_default;\n\n\tconst int *oversampling_humid_avail;\n\tint num_oversampling_humid_avail;\n\tint oversampling_humid_default;\n\n\tconst int *iir_filter_coeffs_avail;\n\tint num_iir_filter_coeffs_avail;\n\tint iir_filter_coeff_default;\n\n\tconst int (*sampling_freq_avail)[2];\n\tint num_sampling_freq_avail;\n\tint sampling_freq_default;\n\n\tint (*chip_config)(struct bmp280_data *);\n\tint (*read_temp)(struct bmp280_data *, int *, int *);\n\tint (*read_press)(struct bmp280_data *, int *, int *);\n\tint (*read_humid)(struct bmp280_data *, int *, int *);\n\tint (*read_calib)(struct bmp280_data *);\n\tint (*preinit)(struct bmp280_data *);\n};\n\n \nextern const struct bmp280_chip_info bmp180_chip_info;\nextern const struct bmp280_chip_info bmp280_chip_info;\nextern const struct bmp280_chip_info bme280_chip_info;\nextern const struct bmp280_chip_info bmp380_chip_info;\nextern const struct bmp280_chip_info bmp580_chip_info;\n\n \nextern const struct regmap_config bmp180_regmap_config;\nextern const struct regmap_config bmp280_regmap_config;\nextern const struct regmap_config bmp380_regmap_config;\nextern const struct regmap_config bmp580_regmap_config;\n\n \nint bmp280_common_probe(struct device *dev,\n\t\t\tstruct regmap *regmap,\n\t\t\tconst struct bmp280_chip_info *,\n\t\t\tconst char *name,\n\t\t\tint irq);\n\n \nextern const struct dev_pm_ops bmp280_dev_pm_ops;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}