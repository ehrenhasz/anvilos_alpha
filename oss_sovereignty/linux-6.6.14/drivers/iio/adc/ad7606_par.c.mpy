{
  "module_name": "ad7606_par.c",
  "hash_id": "2b1dfa3b01c05a0bfd3b5fb61f4066851cd3ff0253d51b0ce89bc6d5704bafcc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/adc/ad7606_par.c",
  "human_readable_source": "\n \n\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/types.h>\n#include <linux/err.h>\n#include <linux/io.h>\n\n#include <linux/iio/iio.h>\n#include \"ad7606.h\"\n\nstatic int ad7606_par16_read_block(struct device *dev,\n\t\t\t\t   int count, void *buf)\n{\n\tstruct iio_dev *indio_dev = dev_get_drvdata(dev);\n\tstruct ad7606_state *st = iio_priv(indio_dev);\n\n\tinsw((unsigned long)st->base_address, buf, count);\n\n\treturn 0;\n}\n\nstatic const struct ad7606_bus_ops ad7606_par16_bops = {\n\t.read_block = ad7606_par16_read_block,\n};\n\nstatic int ad7606_par8_read_block(struct device *dev,\n\t\t\t\t  int count, void *buf)\n{\n\tstruct iio_dev *indio_dev = dev_get_drvdata(dev);\n\tstruct ad7606_state *st = iio_priv(indio_dev);\n\n\tinsb((unsigned long)st->base_address, buf, count * 2);\n\n\treturn 0;\n}\n\nstatic const struct ad7606_bus_ops ad7606_par8_bops = {\n\t.read_block = ad7606_par8_read_block,\n};\n\nstatic int ad7606_par_probe(struct platform_device *pdev)\n{\n\tconst struct platform_device_id *id = platform_get_device_id(pdev);\n\tstruct resource *res;\n\tvoid __iomem *addr;\n\tresource_size_t remap_size;\n\tint irq;\n\n\tirq = platform_get_irq(pdev, 0);\n\tif (irq < 0)\n\t\treturn irq;\n\n\taddr = devm_platform_get_and_ioremap_resource(pdev, 0, &res);\n\tif (IS_ERR(addr))\n\t\treturn PTR_ERR(addr);\n\n\tremap_size = resource_size(res);\n\n\treturn ad7606_probe(&pdev->dev, irq, addr,\n\t\t\t    id->name, id->driver_data,\n\t\t\t    remap_size > 1 ? &ad7606_par16_bops :\n\t\t\t    &ad7606_par8_bops);\n}\n\nstatic const struct platform_device_id ad7606_driver_ids[] = {\n\t{ .name\t= \"ad7605-4\", .driver_data = ID_AD7605_4, },\n\t{ .name\t= \"ad7606-4\", .driver_data = ID_AD7606_4, },\n\t{ .name\t= \"ad7606-6\", .driver_data = ID_AD7606_6, },\n\t{ .name\t= \"ad7606-8\", .driver_data = ID_AD7606_8, },\n\t{ }\n};\nMODULE_DEVICE_TABLE(platform, ad7606_driver_ids);\n\nstatic const struct of_device_id ad7606_of_match[] = {\n\t{ .compatible = \"adi,ad7605-4\" },\n\t{ .compatible = \"adi,ad7606-4\" },\n\t{ .compatible = \"adi,ad7606-6\" },\n\t{ .compatible = \"adi,ad7606-8\" },\n\t{ },\n};\nMODULE_DEVICE_TABLE(of, ad7606_of_match);\n\nstatic struct platform_driver ad7606_driver = {\n\t.probe = ad7606_par_probe,\n\t.id_table = ad7606_driver_ids,\n\t.driver = {\n\t\t.name = \"ad7606\",\n\t\t.pm = AD7606_PM_OPS,\n\t\t.of_match_table = ad7606_of_match,\n\t},\n};\nmodule_platform_driver(ad7606_driver);\n\nMODULE_AUTHOR(\"Michael Hennerich <michael.hennerich@analog.com>\");\nMODULE_DESCRIPTION(\"Analog Devices AD7606 ADC\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_IMPORT_NS(IIO_AD7606);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}