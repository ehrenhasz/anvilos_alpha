{
  "module_name": "stm32-dfsdm.h",
  "hash_id": "9591d0ec2b9dfafe23070b033e2d8395c08556f8f599225332b90aeb4038da57",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/adc/stm32-dfsdm.h",
  "human_readable_source": " \n \n\n#ifndef MDF_STM32_DFSDM__H\n#define MDF_STM32_DFSDM__H\n\n#include <linux/bitfield.h>\n\n \n\n \n#define DFSDM_CHCFGR1(y)  ((y) * 0x20 + 0x00)\n#define DFSDM_CHCFGR2(y)  ((y) * 0x20 + 0x04)\n#define DFSDM_AWSCDR(y)   ((y) * 0x20 + 0x08)\n#define DFSDM_CHWDATR(y)  ((y) * 0x20 + 0x0C)\n#define DFSDM_CHDATINR(y) ((y) * 0x20 + 0x10)\n\n \n#define DFSDM_CHCFGR1_SITP_MASK     GENMASK(1, 0)\n#define DFSDM_CHCFGR1_SITP(v)       FIELD_PREP(DFSDM_CHCFGR1_SITP_MASK, v)\n#define DFSDM_CHCFGR1_SPICKSEL_MASK GENMASK(3, 2)\n#define DFSDM_CHCFGR1_SPICKSEL(v)   FIELD_PREP(DFSDM_CHCFGR1_SPICKSEL_MASK, v)\n#define DFSDM_CHCFGR1_SCDEN_MASK    BIT(5)\n#define DFSDM_CHCFGR1_SCDEN(v)      FIELD_PREP(DFSDM_CHCFGR1_SCDEN_MASK, v)\n#define DFSDM_CHCFGR1_CKABEN_MASK   BIT(6)\n#define DFSDM_CHCFGR1_CKABEN(v)     FIELD_PREP(DFSDM_CHCFGR1_CKABEN_MASK, v)\n#define DFSDM_CHCFGR1_CHEN_MASK     BIT(7)\n#define DFSDM_CHCFGR1_CHEN(v)       FIELD_PREP(DFSDM_CHCFGR1_CHEN_MASK, v)\n#define DFSDM_CHCFGR1_CHINSEL_MASK  BIT(8)\n#define DFSDM_CHCFGR1_CHINSEL(v)    FIELD_PREP(DFSDM_CHCFGR1_CHINSEL_MASK, v)\n#define DFSDM_CHCFGR1_DATMPX_MASK   GENMASK(13, 12)\n#define DFSDM_CHCFGR1_DATMPX(v)     FIELD_PREP(DFSDM_CHCFGR1_DATMPX_MASK, v)\n#define DFSDM_CHCFGR1_DATPACK_MASK  GENMASK(15, 14)\n#define DFSDM_CHCFGR1_DATPACK(v)    FIELD_PREP(DFSDM_CHCFGR1_DATPACK_MASK, v)\n#define DFSDM_CHCFGR1_CKOUTDIV_MASK GENMASK(23, 16)\n#define DFSDM_CHCFGR1_CKOUTDIV(v)   FIELD_PREP(DFSDM_CHCFGR1_CKOUTDIV_MASK, v)\n#define DFSDM_CHCFGR1_CKOUTSRC_MASK BIT(30)\n#define DFSDM_CHCFGR1_CKOUTSRC(v)   FIELD_PREP(DFSDM_CHCFGR1_CKOUTSRC_MASK, v)\n#define DFSDM_CHCFGR1_DFSDMEN_MASK  BIT(31)\n#define DFSDM_CHCFGR1_DFSDMEN(v)    FIELD_PREP(DFSDM_CHCFGR1_DFSDMEN_MASK, v)\n\n \n#define DFSDM_CHCFGR2_DTRBS_MASK    GENMASK(7, 3)\n#define DFSDM_CHCFGR2_DTRBS(v)      FIELD_PREP(DFSDM_CHCFGR2_DTRBS_MASK, v)\n#define DFSDM_CHCFGR2_OFFSET_MASK   GENMASK(31, 8)\n#define DFSDM_CHCFGR2_OFFSET(v)     FIELD_PREP(DFSDM_CHCFGR2_OFFSET_MASK, v)\n\n \n#define DFSDM_AWSCDR_SCDT_MASK    GENMASK(7, 0)\n#define DFSDM_AWSCDR_SCDT(v)      FIELD_PREP(DFSDM_AWSCDR_SCDT_MASK, v)\n#define DFSDM_AWSCDR_BKSCD_MASK   GENMASK(15, 12)\n#define DFSDM_AWSCDR_BKSCD(v)\t  FIELD_PREP(DFSDM_AWSCDR_BKSCD_MASK, v)\n#define DFSDM_AWSCDR_AWFOSR_MASK  GENMASK(20, 16)\n#define DFSDM_AWSCDR_AWFOSR(v)    FIELD_PREP(DFSDM_AWSCDR_AWFOSR_MASK, v)\n#define DFSDM_AWSCDR_AWFORD_MASK  GENMASK(23, 22)\n#define DFSDM_AWSCDR_AWFORD(v)    FIELD_PREP(DFSDM_AWSCDR_AWFORD_MASK, v)\n\n \n#define DFSDM_FILTER_BASE_ADR\t\t0x100\n#define DFSDM_FILTER_REG_MASK\t\t0x7F\n#define DFSDM_FILTER_X_BASE_ADR(x)\t((x) * 0x80 + DFSDM_FILTER_BASE_ADR)\n\n#define DFSDM_CR1(x)     (DFSDM_FILTER_X_BASE_ADR(x)  + 0x00)\n#define DFSDM_CR2(x)     (DFSDM_FILTER_X_BASE_ADR(x)  + 0x04)\n#define DFSDM_ISR(x)     (DFSDM_FILTER_X_BASE_ADR(x)  + 0x08)\n#define DFSDM_ICR(x)     (DFSDM_FILTER_X_BASE_ADR(x)  + 0x0C)\n#define DFSDM_JCHGR(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x10)\n#define DFSDM_FCR(x)     (DFSDM_FILTER_X_BASE_ADR(x)  + 0x14)\n#define DFSDM_JDATAR(x)  (DFSDM_FILTER_X_BASE_ADR(x)  + 0x18)\n#define DFSDM_RDATAR(x)  (DFSDM_FILTER_X_BASE_ADR(x)  + 0x1C)\n#define DFSDM_AWHTR(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x20)\n#define DFSDM_AWLTR(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x24)\n#define DFSDM_AWSR(x)    (DFSDM_FILTER_X_BASE_ADR(x)  + 0x28)\n#define DFSDM_AWCFR(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x2C)\n#define DFSDM_EXMAX(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x30)\n#define DFSDM_EXMIN(x)   (DFSDM_FILTER_X_BASE_ADR(x)  + 0x34)\n#define DFSDM_CNVTIMR(x) (DFSDM_FILTER_X_BASE_ADR(x)  + 0x38)\n\n \n#define DFSDM_CR1_DFEN_MASK\tBIT(0)\n#define DFSDM_CR1_DFEN(v)\tFIELD_PREP(DFSDM_CR1_DFEN_MASK, v)\n#define DFSDM_CR1_JSWSTART_MASK\tBIT(1)\n#define DFSDM_CR1_JSWSTART(v)\tFIELD_PREP(DFSDM_CR1_JSWSTART_MASK, v)\n#define DFSDM_CR1_JSYNC_MASK\tBIT(3)\n#define DFSDM_CR1_JSYNC(v)\tFIELD_PREP(DFSDM_CR1_JSYNC_MASK, v)\n#define DFSDM_CR1_JSCAN_MASK\tBIT(4)\n#define DFSDM_CR1_JSCAN(v)\tFIELD_PREP(DFSDM_CR1_JSCAN_MASK, v)\n#define DFSDM_CR1_JDMAEN_MASK\tBIT(5)\n#define DFSDM_CR1_JDMAEN(v)\tFIELD_PREP(DFSDM_CR1_JDMAEN_MASK, v)\n#define DFSDM_CR1_JEXTSEL_MASK\tGENMASK(12, 8)\n#define DFSDM_CR1_JEXTSEL(v)\tFIELD_PREP(DFSDM_CR1_JEXTSEL_MASK, v)\n#define DFSDM_CR1_JEXTEN_MASK\tGENMASK(14, 13)\n#define DFSDM_CR1_JEXTEN(v)\tFIELD_PREP(DFSDM_CR1_JEXTEN_MASK, v)\n#define DFSDM_CR1_RSWSTART_MASK\tBIT(17)\n#define DFSDM_CR1_RSWSTART(v)\tFIELD_PREP(DFSDM_CR1_RSWSTART_MASK, v)\n#define DFSDM_CR1_RCONT_MASK\tBIT(18)\n#define DFSDM_CR1_RCONT(v)\tFIELD_PREP(DFSDM_CR1_RCONT_MASK, v)\n#define DFSDM_CR1_RSYNC_MASK\tBIT(19)\n#define DFSDM_CR1_RSYNC(v)\tFIELD_PREP(DFSDM_CR1_RSYNC_MASK, v)\n#define DFSDM_CR1_RDMAEN_MASK\tBIT(21)\n#define DFSDM_CR1_RDMAEN(v)\tFIELD_PREP(DFSDM_CR1_RDMAEN_MASK, v)\n#define DFSDM_CR1_RCH_MASK\tGENMASK(26, 24)\n#define DFSDM_CR1_RCH(v)\tFIELD_PREP(DFSDM_CR1_RCH_MASK, v)\n#define DFSDM_CR1_FAST_MASK\tBIT(29)\n#define DFSDM_CR1_FAST(v)\tFIELD_PREP(DFSDM_CR1_FAST_MASK, v)\n#define DFSDM_CR1_AWFSEL_MASK\tBIT(30)\n#define DFSDM_CR1_AWFSEL(v)\tFIELD_PREP(DFSDM_CR1_AWFSEL_MASK, v)\n\n \n#define DFSDM_CR2_IE_MASK\tGENMASK(6, 0)\n#define DFSDM_CR2_IE(v)\t\tFIELD_PREP(DFSDM_CR2_IE_MASK, v)\n#define DFSDM_CR2_JEOCIE_MASK\tBIT(0)\n#define DFSDM_CR2_JEOCIE(v)\tFIELD_PREP(DFSDM_CR2_JEOCIE_MASK, v)\n#define DFSDM_CR2_REOCIE_MASK\tBIT(1)\n#define DFSDM_CR2_REOCIE(v)\tFIELD_PREP(DFSDM_CR2_REOCIE_MASK, v)\n#define DFSDM_CR2_JOVRIE_MASK\tBIT(2)\n#define DFSDM_CR2_JOVRIE(v)\tFIELD_PREP(DFSDM_CR2_JOVRIE_MASK, v)\n#define DFSDM_CR2_ROVRIE_MASK\tBIT(3)\n#define DFSDM_CR2_ROVRIE(v)\tFIELD_PREP(DFSDM_CR2_ROVRIE_MASK, v)\n#define DFSDM_CR2_AWDIE_MASK\tBIT(4)\n#define DFSDM_CR2_AWDIE(v)\tFIELD_PREP(DFSDM_CR2_AWDIE_MASK, v)\n#define DFSDM_CR2_SCDIE_MASK\tBIT(5)\n#define DFSDM_CR2_SCDIE(v)\tFIELD_PREP(DFSDM_CR2_SCDIE_MASK, v)\n#define DFSDM_CR2_CKABIE_MASK\tBIT(6)\n#define DFSDM_CR2_CKABIE(v)\tFIELD_PREP(DFSDM_CR2_CKABIE_MASK, v)\n#define DFSDM_CR2_EXCH_MASK\tGENMASK(15, 8)\n#define DFSDM_CR2_EXCH(v)\tFIELD_PREP(DFSDM_CR2_EXCH_MASK, v)\n#define DFSDM_CR2_AWDCH_MASK\tGENMASK(23, 16)\n#define DFSDM_CR2_AWDCH(v)\tFIELD_PREP(DFSDM_CR2_AWDCH_MASK, v)\n\n \n#define DFSDM_ISR_JEOCF_MASK\tBIT(0)\n#define DFSDM_ISR_JEOCF(v)\tFIELD_PREP(DFSDM_ISR_JEOCF_MASK, v)\n#define DFSDM_ISR_REOCF_MASK\tBIT(1)\n#define DFSDM_ISR_REOCF(v)\tFIELD_PREP(DFSDM_ISR_REOCF_MASK, v)\n#define DFSDM_ISR_JOVRF_MASK\tBIT(2)\n#define DFSDM_ISR_JOVRF(v)\tFIELD_PREP(DFSDM_ISR_JOVRF_MASK, v)\n#define DFSDM_ISR_ROVRF_MASK\tBIT(3)\n#define DFSDM_ISR_ROVRF(v)\tFIELD_PREP(DFSDM_ISR_ROVRF_MASK, v)\n#define DFSDM_ISR_AWDF_MASK\tBIT(4)\n#define DFSDM_ISR_AWDF(v)\tFIELD_PREP(DFSDM_ISR_AWDF_MASK, v)\n#define DFSDM_ISR_JCIP_MASK\tBIT(13)\n#define DFSDM_ISR_JCIP(v)\tFIELD_PREP(DFSDM_ISR_JCIP_MASK, v)\n#define DFSDM_ISR_RCIP_MASK\tBIT(14)\n#define DFSDM_ISR_RCIP(v)\tFIELD_PREP(DFSDM_ISR_RCIP, v)\n#define DFSDM_ISR_CKABF_MASK\tGENMASK(23, 16)\n#define DFSDM_ISR_CKABF(v)\tFIELD_PREP(DFSDM_ISR_CKABF_MASK, v)\n#define DFSDM_ISR_SCDF_MASK\tGENMASK(31, 24)\n#define DFSDM_ISR_SCDF(v)\tFIELD_PREP(DFSDM_ISR_SCDF_MASK, v)\n\n \n#define DFSDM_ICR_CLRJOVRF_MASK\t      BIT(2)\n#define DFSDM_ICR_CLRJOVRF(v)\t      FIELD_PREP(DFSDM_ICR_CLRJOVRF_MASK, v)\n#define DFSDM_ICR_CLRROVRF_MASK\t      BIT(3)\n#define DFSDM_ICR_CLRROVRF(v)\t      FIELD_PREP(DFSDM_ICR_CLRROVRF_MASK, v)\n#define DFSDM_ICR_CLRCKABF_MASK\t      GENMASK(23, 16)\n#define DFSDM_ICR_CLRCKABF(v)\t      FIELD_PREP(DFSDM_ICR_CLRCKABF_MASK, v)\n#define DFSDM_ICR_CLRCKABF_CH_MASK(y) BIT(16 + (y))\n#define DFSDM_ICR_CLRCKABF_CH(v, y)   \\\n\t\t\t   (((v) << (16 + (y))) & DFSDM_ICR_CLRCKABF_CH_MASK(y))\n#define DFSDM_ICR_CLRSCDF_MASK\t      GENMASK(31, 24)\n#define DFSDM_ICR_CLRSCDF(v)\t      FIELD_PREP(DFSDM_ICR_CLRSCDF_MASK, v)\n#define DFSDM_ICR_CLRSCDF_CH_MASK(y)  BIT(24 + (y))\n#define DFSDM_ICR_CLRSCDF_CH(v, y)    \\\n\t\t\t       (((v) << (24 + (y))) & DFSDM_ICR_CLRSCDF_MASK(y))\n\n \n#define DFSDM_FCR_IOSR_MASK\tGENMASK(7, 0)\n#define DFSDM_FCR_IOSR(v)\tFIELD_PREP(DFSDM_FCR_IOSR_MASK, v)\n#define DFSDM_FCR_FOSR_MASK\tGENMASK(25, 16)\n#define DFSDM_FCR_FOSR(v)\tFIELD_PREP(DFSDM_FCR_FOSR_MASK, v)\n#define DFSDM_FCR_FORD_MASK\tGENMASK(31, 29)\n#define DFSDM_FCR_FORD(v)\tFIELD_PREP(DFSDM_FCR_FORD_MASK, v)\n\n \n#define DFSDM_DATAR_CH_MASK\tGENMASK(2, 0)\n#define DFSDM_DATAR_DATA_OFFSET 8\n#define DFSDM_DATAR_DATA_MASK\tGENMASK(31, DFSDM_DATAR_DATA_OFFSET)\n\n \n#define DFSDM_AWLTR_BKAWL_MASK\tGENMASK(3, 0)\n#define DFSDM_AWLTR_BKAWL(v)\tFIELD_PREP(DFSDM_AWLTR_BKAWL_MASK, v)\n#define DFSDM_AWLTR_AWLT_MASK\tGENMASK(31, 8)\n#define DFSDM_AWLTR_AWLT(v)\tFIELD_PREP(DFSDM_AWLTR_AWLT_MASK, v)\n\n \n#define DFSDM_AWHTR_BKAWH_MASK\tGENMASK(3, 0)\n#define DFSDM_AWHTR_BKAWH(v)\tFIELD_PREP(DFSDM_AWHTR_BKAWH_MASK, v)\n#define DFSDM_AWHTR_AWHT_MASK\tGENMASK(31, 8)\n#define DFSDM_AWHTR_AWHT(v)\tFIELD_PREP(DFSDM_AWHTR_AWHT_MASK, v)\n\n \n#define DFSDM_AWSR_AWLTF_MASK\tGENMASK(7, 0)\n#define DFSDM_AWSR_AWLTF(v)\tFIELD_PREP(DFSDM_AWSR_AWLTF_MASK, v)\n#define DFSDM_AWSR_AWHTF_MASK\tGENMASK(15, 8)\n#define DFSDM_AWSR_AWHTF(v)\tFIELD_PREP(DFSDM_AWSR_AWHTF_MASK, v)\n\n \n#define DFSDM_AWCFR_AWLTF_MASK\tGENMASK(7, 0)\n#define DFSDM_AWCFR_AWLTF(v)\tFIELD_PREP(DFSDM_AWCFR_AWLTF_MASK, v)\n#define DFSDM_AWCFR_AWHTF_MASK\tGENMASK(15, 8)\n#define DFSDM_AWCFR_AWHTF(v)\tFIELD_PREP(DFSDM_AWCFR_AWHTF_MASK, v)\n\n \n#define DFSDM_HWCFGR\t\t0x7F0\n#define DFSDM_VERR\t\t0x7F4\n#define DFSDM_IPIDR\t\t0x7F8\n#define DFSDM_SIDR\t\t0x7FC\n\n \n#define DFSDM_HWCFGR_NBT_MASK\tGENMASK(7, 0)\n#define DFSDM_HWCFGR_NBF_MASK\tGENMASK(15, 8)\n\n \n#define DFSDM_VERR_MINREV_MASK\tGENMASK(3, 0)\n#define DFSDM_VERR_MAJREV_MASK\tGENMASK(7, 4)\n\n#define STM32MP15_IPIDR_NUMBER\t0x00110031\n\n \nenum stm32_dfsdm_sinc_order {\n\tDFSDM_FASTSINC_ORDER,  \n\tDFSDM_SINC1_ORDER,     \n\tDFSDM_SINC2_ORDER,     \n\tDFSDM_SINC3_ORDER,     \n\tDFSDM_SINC4_ORDER,     \n\tDFSDM_SINC5_ORDER,     \n\tDFSDM_NB_SINC_ORDER,\n};\n\n \nstruct stm32_dfsdm_filter_osr {\n\tunsigned int iosr;\n\tunsigned int fosr;\n\tunsigned int rshift;\n\tunsigned int lshift;\n\tu64 res;\n\tu32 bits;\n\ts32 max;\n};\n\n \nstruct stm32_dfsdm_filter {\n\tenum stm32_dfsdm_sinc_order ford;\n\tstruct stm32_dfsdm_filter_osr flo[2];\n\tunsigned int sync_mode;\n\tunsigned int fast;\n};\n\n \nstruct stm32_dfsdm_channel {\n\tunsigned int id;\n\tunsigned int type;\n\tunsigned int src;\n\tunsigned int alt_si;\n};\n\n \nstruct stm32_dfsdm {\n\tvoid __iomem\t*base;\n\tphys_addr_t\tphys_base;\n\tstruct regmap *regmap;\n\tstruct stm32_dfsdm_filter *fl_list;\n\tunsigned int num_fls;\n\tstruct stm32_dfsdm_channel *ch_list;\n\tunsigned int num_chs;\n\tunsigned int spi_master_freq;\n};\n\n \nenum stm32_dfsdm_spi_clk_src {\n\tDFSDM_CHANNEL_SPI_CLOCK_EXTERNAL,\n\tDFSDM_CHANNEL_SPI_CLOCK_INTERNAL,\n\tDFSDM_CHANNEL_SPI_CLOCK_INTERNAL_DIV2_FALLING,\n\tDFSDM_CHANNEL_SPI_CLOCK_INTERNAL_DIV2_RISING\n};\n\nint stm32_dfsdm_start_dfsdm(struct stm32_dfsdm *dfsdm);\nint stm32_dfsdm_stop_dfsdm(struct stm32_dfsdm *dfsdm);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}