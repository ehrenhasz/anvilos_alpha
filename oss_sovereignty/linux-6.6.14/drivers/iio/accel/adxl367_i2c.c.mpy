{
  "module_name": "adxl367_i2c.c",
  "hash_id": "55ffbd07f94f6e4ffd2dd072349a538ffeb5c3d703c143cee315c6cf328239d0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/accel/adxl367_i2c.c",
  "human_readable_source": "\n \n\n#include <linux/i2c.h>\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/regmap.h>\n\n#include \"adxl367.h\"\n\n#define ADXL367_I2C_FIFO_DATA\t0x42\n\nstruct adxl367_i2c_state {\n\tstruct regmap *regmap;\n};\n\nstatic bool adxl367_readable_noinc_reg(struct device *dev, unsigned int reg)\n{\n\treturn reg == ADXL367_I2C_FIFO_DATA;\n}\n\nstatic int adxl367_i2c_read_fifo(void *context, __be16 *fifo_buf,\n\t\t\t\t unsigned int fifo_entries)\n{\n\tstruct adxl367_i2c_state *st = context;\n\n\treturn regmap_noinc_read(st->regmap, ADXL367_I2C_FIFO_DATA, fifo_buf,\n\t\t\t\t fifo_entries * sizeof(*fifo_buf));\n}\n\nstatic const struct regmap_config adxl367_i2c_regmap_config = {\n\t.reg_bits = 8,\n\t.val_bits = 8,\n\t.readable_noinc_reg = adxl367_readable_noinc_reg,\n};\n\nstatic const struct adxl367_ops adxl367_i2c_ops = {\n\t.read_fifo = adxl367_i2c_read_fifo,\n};\n\nstatic int adxl367_i2c_probe(struct i2c_client *client)\n{\n\tstruct adxl367_i2c_state *st;\n\tstruct regmap *regmap;\n\n\tst = devm_kzalloc(&client->dev, sizeof(*st), GFP_KERNEL);\n\tif (!st)\n\t\treturn -ENOMEM;\n\n\tregmap = devm_regmap_init_i2c(client, &adxl367_i2c_regmap_config);\n\tif (IS_ERR(regmap))\n\t\treturn PTR_ERR(regmap);\n\n\tst->regmap = regmap;\n\n\treturn adxl367_probe(&client->dev, &adxl367_i2c_ops, st, regmap,\n\t\t\t     client->irq);\n}\n\nstatic const struct i2c_device_id adxl367_i2c_id[] = {\n\t{ \"adxl367\", 0 },\n\t{ },\n};\nMODULE_DEVICE_TABLE(i2c, adxl367_i2c_id);\n\nstatic const struct of_device_id adxl367_of_match[] = {\n\t{ .compatible = \"adi,adxl367\" },\n\t{ },\n};\nMODULE_DEVICE_TABLE(of, adxl367_of_match);\n\nstatic struct i2c_driver adxl367_i2c_driver = {\n\t.driver = {\n\t\t.name = \"adxl367_i2c\",\n\t\t.of_match_table = adxl367_of_match,\n\t},\n\t.probe = adxl367_i2c_probe,\n\t.id_table = adxl367_i2c_id,\n};\n\nmodule_i2c_driver(adxl367_i2c_driver);\n\nMODULE_IMPORT_NS(IIO_ADXL367);\nMODULE_AUTHOR(\"Cosmin Tanislav <cosmin.tanislav@analog.com>\");\nMODULE_DESCRIPTION(\"Analog Devices ADXL367 3-axis accelerometer I2C driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}