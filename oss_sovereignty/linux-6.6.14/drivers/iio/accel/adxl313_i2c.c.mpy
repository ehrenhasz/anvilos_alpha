{
  "module_name": "adxl313_i2c.c",
  "hash_id": "620c17c492c6e8522f5f357b29f6c82bf2438004f866cce768893cf22a215a03",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/accel/adxl313_i2c.c",
  "human_readable_source": "\n \n\n#include <linux/i2c.h>\n#include <linux/mod_devicetable.h>\n#include <linux/module.h>\n#include <linux/regmap.h>\n\n#include \"adxl313.h\"\n\nstatic const struct regmap_config adxl31x_i2c_regmap_config[] = {\n\t[ADXL312] = {\n\t\t.reg_bits\t= 8,\n\t\t.val_bits\t= 8,\n\t\t.rd_table\t= &adxl312_readable_regs_table,\n\t\t.wr_table\t= &adxl312_writable_regs_table,\n\t\t.max_register\t= 0x39,\n\t},\n\t[ADXL313] = {\n\t\t.reg_bits\t= 8,\n\t\t.val_bits\t= 8,\n\t\t.rd_table\t= &adxl313_readable_regs_table,\n\t\t.wr_table\t= &adxl313_writable_regs_table,\n\t\t.max_register\t= 0x39,\n\t},\n\t[ADXL314] = {\n\t\t.reg_bits\t= 8,\n\t\t.val_bits\t= 8,\n\t\t.rd_table\t= &adxl314_readable_regs_table,\n\t\t.wr_table\t= &adxl314_writable_regs_table,\n\t\t.max_register\t= 0x39,\n\t},\n};\n\nstatic const struct i2c_device_id adxl313_i2c_id[] = {\n\t{ .name = \"adxl312\", .driver_data = (kernel_ulong_t)&adxl31x_chip_info[ADXL312] },\n\t{ .name = \"adxl313\", .driver_data = (kernel_ulong_t)&adxl31x_chip_info[ADXL313] },\n\t{ .name = \"adxl314\", .driver_data = (kernel_ulong_t)&adxl31x_chip_info[ADXL314] },\n\t{ }\n};\n\nMODULE_DEVICE_TABLE(i2c, adxl313_i2c_id);\n\nstatic const struct of_device_id adxl313_of_match[] = {\n\t{ .compatible = \"adi,adxl312\", .data = &adxl31x_chip_info[ADXL312] },\n\t{ .compatible = \"adi,adxl313\", .data = &adxl31x_chip_info[ADXL313] },\n\t{ .compatible = \"adi,adxl314\", .data = &adxl31x_chip_info[ADXL314] },\n\t{ }\n};\n\nMODULE_DEVICE_TABLE(of, adxl313_of_match);\n\nstatic int adxl313_i2c_probe(struct i2c_client *client)\n{\n\tconst struct adxl313_chip_info *chip_data;\n\tstruct regmap *regmap;\n\n\t \n\tchip_data = i2c_get_match_data(client);\n\n\tregmap = devm_regmap_init_i2c(client,\n\t\t\t\t      &adxl31x_i2c_regmap_config[chip_data->type]);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(&client->dev, \"Error initializing i2c regmap: %ld\\n\",\n\t\t\tPTR_ERR(regmap));\n\t\treturn PTR_ERR(regmap);\n\t}\n\n\treturn adxl313_core_probe(&client->dev, regmap, chip_data, NULL);\n}\n\nstatic struct i2c_driver adxl313_i2c_driver = {\n\t.driver = {\n\t\t.name\t= \"adxl313_i2c\",\n\t\t.of_match_table = adxl313_of_match,\n\t},\n\t.probe\t\t= adxl313_i2c_probe,\n\t.id_table\t= adxl313_i2c_id,\n};\n\nmodule_i2c_driver(adxl313_i2c_driver);\n\nMODULE_AUTHOR(\"Lucas Stankus <lucas.p.stankus@gmail.com>\");\nMODULE_DESCRIPTION(\"ADXL313 3-Axis Digital Accelerometer I2C driver\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_IMPORT_NS(IIO_ADXL313);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}