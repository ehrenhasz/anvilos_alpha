{
  "module_name": "sx_common.h",
  "hash_id": "3bab723c3756b466a4b4291be35c09ec34f08f23d82e980b61d13779c9c2f696",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iio/proximity/sx_common.h",
  "human_readable_source": " \n \n\n#ifndef IIO_SX_COMMON_H\n#define IIO_SX_COMMON_H\n\n#include <linux/acpi.h>\n#include <linux/iio/iio.h>\n#include <linux/iio/types.h>\n#include <linux/regulator/consumer.h>\n#include <linux/types.h>\n\nstruct device;\nstruct i2c_client;\nstruct regmap_config;\nstruct sx_common_data;\n\n#define SX_COMMON_REG_IRQ_SRC\t\t\t\t0x00\n\n#define SX_COMMON_MAX_NUM_CHANNELS\t4\nstatic_assert(SX_COMMON_MAX_NUM_CHANNELS < BITS_PER_LONG);\n\nstruct sx_common_reg_default {\n\tu8 reg;\n\tu8 def;\n\tconst char *property;\n};\n\n \nstruct sx_common_ops {\n\tint (*read_prox_data)(struct sx_common_data *data,\n\t\t\t      const struct iio_chan_spec *chan, __be16 *val);\n\tint (*check_whoami)(struct device *dev, struct iio_dev *indio_dev);\n\tint (*init_compensation)(struct iio_dev *indio_dev);\n\tint (*wait_for_sample)(struct sx_common_data *data);\n\tconst struct sx_common_reg_default  *\n\t\t(*get_default_reg)(struct device *dev, int idx,\n\t\t\t\t   struct sx_common_reg_default *reg_def);\n};\n\n \nstruct sx_common_chip_info {\n\tunsigned int reg_stat;\n\tunsigned int reg_irq_msk;\n\tunsigned int reg_enable_chan;\n\tunsigned int reg_reset;\n\n\tunsigned int mask_enable_chan;\n\tunsigned int stat_offset;\n\tunsigned int irq_msk_offset;\n\tunsigned int num_channels;\n\tint num_default_regs;\n\n\tstruct sx_common_ops ops;\n\n\tconst struct iio_chan_spec *iio_channels;\n\tint num_iio_channels;\n\tstruct iio_info iio_info;\n};\n\n \nstruct sx_common_data {\n\tconst struct sx_common_chip_info *chip_info;\n\n\tstruct mutex mutex;\n\tstruct completion completion;\n\tstruct i2c_client *client;\n\tstruct iio_trigger *trig;\n\tstruct regmap *regmap;\n\n\tunsigned long chan_prox_stat;\n\tbool trigger_enabled;\n\n\t \n\tstruct {\n\t\t__be16 channels[SX_COMMON_MAX_NUM_CHANNELS];\n\t\ts64 ts __aligned(8);\n\t} buffer;\n\n\tunsigned int suspend_ctrl;\n\tunsigned long chan_read;\n\tunsigned long chan_event;\n};\n\nint sx_common_read_proximity(struct sx_common_data *data,\n\t\t\t     const struct iio_chan_spec *chan, int *val);\n\nint sx_common_read_event_config(struct iio_dev *indio_dev,\n\t\t\t\tconst struct iio_chan_spec *chan,\n\t\t\t\tenum iio_event_type type,\n\t\t\t\tenum iio_event_direction dir);\nint sx_common_write_event_config(struct iio_dev *indio_dev,\n\t\t\t\t const struct iio_chan_spec *chan,\n\t\t\t\t enum iio_event_type type,\n\t\t\t\t enum iio_event_direction dir, int state);\n\nint sx_common_probe(struct i2c_client *client,\n\t\t    const struct sx_common_chip_info *chip_info,\n\t\t    const struct regmap_config *regmap_config);\n\nvoid sx_common_get_raw_register_config(struct device *dev,\n\t\t\t\t       struct sx_common_reg_default *reg_def);\n\n \nextern const struct iio_event_spec sx_common_events[3];\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}