{
  "module_name": "chromeos_pstore.c",
  "hash_id": "20029601acb2514e5c11004d0c88ada2f2d3281255c4a80e84052ecb91ce5bc4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/chrome/chromeos_pstore.c",
  "human_readable_source": "\n\n\n\n\n#include <linux/acpi.h>\n#include <linux/dmi.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/pstore_ram.h>\n\nstatic const struct dmi_system_id chromeos_pstore_dmi_table[] __initconst = {\n\t{\n\t\t \n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_BIOS_VENDOR, \"coreboot\"),\n\t\t\tDMI_MATCH(DMI_BIOS_VERSION, \"Google_\"),\n\t\t},\n\t},\n\t{\n\t\t \n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"SAMSUNG ELECTRONICS CO., LTD.\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"Alex\"),\n\t\t},\n\t},\n\t{\n\t\t \n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"IEC\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"Mario\"),\n\t\t},\n\t},\n\t{\n\t\t \n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"ACER\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"ZGB\"),\n\t\t},\n\t},\n\t{ }\n};\nMODULE_DEVICE_TABLE(dmi, chromeos_pstore_dmi_table);\n\n \nstatic struct ramoops_platform_data chromeos_ramoops_data = {\n\t.mem_size\t= 0x100000,\n\t.mem_address\t= 0xf00000,\n\t.record_size\t= 0x40000,\n\t.console_size\t= 0x20000,\n\t.ftrace_size\t= 0x20000,\n\t.pmsg_size\t= 0x20000,\n\t.max_reason\t= KMSG_DUMP_OOPS,\n};\n\nstatic struct platform_device chromeos_ramoops = {\n\t.name = \"ramoops\",\n\t.dev = {\n\t\t.platform_data = &chromeos_ramoops_data,\n\t},\n};\n\n#ifdef CONFIG_ACPI\nstatic const struct acpi_device_id cros_ramoops_acpi_match[] = {\n\t{ \"GOOG9999\", 0 },\n\t{ }\n};\nMODULE_DEVICE_TABLE(acpi, cros_ramoops_acpi_match);\n\nstatic struct platform_driver chromeos_ramoops_acpi = {\n\t.driver\t\t= {\n\t\t.name\t= \"chromeos_pstore\",\n\t\t.acpi_match_table = ACPI_PTR(cros_ramoops_acpi_match),\n\t},\n};\n\nstatic int __init chromeos_probe_acpi(struct platform_device *pdev)\n{\n\tstruct resource *res;\n\tresource_size_t len;\n\n\tres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\n\tif (!res)\n\t\treturn -ENOMEM;\n\n\tlen = resource_size(res);\n\tif (!res->start || !len)\n\t\treturn -ENOMEM;\n\n\tpr_info(\"chromeos ramoops using acpi device.\\n\");\n\n\tchromeos_ramoops_data.mem_size = len;\n\tchromeos_ramoops_data.mem_address = res->start;\n\n\treturn 0;\n}\n\nstatic bool __init chromeos_check_acpi(void)\n{\n\tif (!platform_driver_probe(&chromeos_ramoops_acpi, chromeos_probe_acpi))\n\t\treturn true;\n\treturn false;\n}\n#else\nstatic inline bool chromeos_check_acpi(void) { return false; }\n#endif\n\nstatic int __init chromeos_pstore_init(void)\n{\n\tbool acpi_dev_found;\n\n\t \n\tacpi_dev_found = chromeos_check_acpi();\n\n\tif (acpi_dev_found || dmi_check_system(chromeos_pstore_dmi_table))\n\t\treturn platform_device_register(&chromeos_ramoops);\n\n\treturn -ENODEV;\n}\n\nstatic void __exit chromeos_pstore_exit(void)\n{\n\tplatform_device_unregister(&chromeos_ramoops);\n}\n\nmodule_init(chromeos_pstore_init);\nmodule_exit(chromeos_pstore_exit);\n\nMODULE_DESCRIPTION(\"ChromeOS pstore module\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}