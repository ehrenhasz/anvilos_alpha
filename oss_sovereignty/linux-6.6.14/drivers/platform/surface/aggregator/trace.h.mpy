{
  "module_name": "trace.h",
  "hash_id": "cde1b715d4d75a115e9dbce05dfa95d2af0c64dc85400ebff860a302c76da339",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/surface/aggregator/trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM surface_aggregator\n\n#if !defined(_SURFACE_AGGREGATOR_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _SURFACE_AGGREGATOR_TRACE_H\n\n#include <linux/surface_aggregator/serial_hub.h>\n\n#include <asm/unaligned.h>\n#include <linux/tracepoint.h>\n\nTRACE_DEFINE_ENUM(SSH_FRAME_TYPE_DATA_SEQ);\nTRACE_DEFINE_ENUM(SSH_FRAME_TYPE_DATA_NSQ);\nTRACE_DEFINE_ENUM(SSH_FRAME_TYPE_ACK);\nTRACE_DEFINE_ENUM(SSH_FRAME_TYPE_NAK);\n\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_LOCKED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_QUEUED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_PENDING_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_TRANSMITTING_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_TRANSMITTED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_ACKED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_CANCELED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_SF_COMPLETED_BIT);\n\nTRACE_DEFINE_ENUM(SSH_PACKET_TY_FLUSH_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_TY_SEQUENCED_BIT);\nTRACE_DEFINE_ENUM(SSH_PACKET_TY_BLOCKING_BIT);\n\nTRACE_DEFINE_ENUM(SSH_PACKET_FLAGS_SF_MASK);\nTRACE_DEFINE_ENUM(SSH_PACKET_FLAGS_TY_MASK);\n\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_LOCKED_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_QUEUED_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_PENDING_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_TRANSMITTING_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_TRANSMITTED_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_RSPRCVD_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_CANCELED_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_SF_COMPLETED_BIT);\n\nTRACE_DEFINE_ENUM(SSH_REQUEST_TY_FLUSH_BIT);\nTRACE_DEFINE_ENUM(SSH_REQUEST_TY_HAS_RESPONSE_BIT);\n\nTRACE_DEFINE_ENUM(SSH_REQUEST_FLAGS_SF_MASK);\nTRACE_DEFINE_ENUM(SSH_REQUEST_FLAGS_TY_MASK);\n\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SAM);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_BAT);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_TMP);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_PMC);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_FAN);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_PoM);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_DBG);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_KBD);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_FWU);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_UNI);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_LPC);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_TCL);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SFL);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_KIP);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_EXT);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_BLD);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_BAS);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SEN);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SRQ);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_MCU);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_HID);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_TCH);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_BKL);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_TAM);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_ACC0);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_UFI);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_USC);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_PEN);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_VID);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_AUD);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SMC);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_KPD);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_REG);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SPT);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SYS);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_ACC1);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_SHB);\nTRACE_DEFINE_ENUM(SSAM_SSH_TC_POS);\n\n#define SSAM_PTR_UID_LEN\t\t9\n#define SSAM_U8_FIELD_NOT_APPLICABLE\t((u16)-1)\n#define SSAM_SEQ_NOT_APPLICABLE\t\t((u16)-1)\n#define SSAM_RQID_NOT_APPLICABLE\t((u32)-1)\n#define SSAM_SSH_TC_NOT_APPLICABLE\t0\n#define SSAM_SSH_TID_NOT_APPLICABLE\t((u8)-1)\n\n#ifndef _SURFACE_AGGREGATOR_TRACE_HELPERS\n#define _SURFACE_AGGREGATOR_TRACE_HELPERS\n\n \nstatic inline void ssam_trace_ptr_uid(const void *ptr, char *uid_str)\n{\n\tchar buf[2 * sizeof(void *) + 1];\n\n\tBUILD_BUG_ON(ARRAY_SIZE(buf) < SSAM_PTR_UID_LEN);\n\n\tsnprintf(buf, ARRAY_SIZE(buf), \"%p\", ptr);\n\tmemcpy(uid_str, &buf[ARRAY_SIZE(buf) - SSAM_PTR_UID_LEN],\n\t       SSAM_PTR_UID_LEN);\n}\n\n \nstatic inline u16 ssam_trace_get_packet_seq(const struct ssh_packet *p)\n{\n\tif (!p->data.ptr || p->data.len < SSH_MESSAGE_LENGTH(0))\n\t\treturn SSAM_SEQ_NOT_APPLICABLE;\n\n\treturn p->data.ptr[SSH_MSGOFFSET_FRAME(seq)];\n}\n\n \nstatic inline u32 ssam_trace_get_request_id(const struct ssh_packet *p)\n{\n\tif (!p->data.ptr || p->data.len < SSH_COMMAND_MESSAGE_LENGTH(0))\n\t\treturn SSAM_RQID_NOT_APPLICABLE;\n\n\treturn get_unaligned_le16(&p->data.ptr[SSH_MSGOFFSET_COMMAND(rqid)]);\n}\n\n \nstatic inline u32 ssam_trace_get_request_tid(const struct ssh_packet *p)\n{\n\tif (!p->data.ptr || p->data.len < SSH_COMMAND_MESSAGE_LENGTH(0))\n\t\treturn SSAM_SSH_TID_NOT_APPLICABLE;\n\n\treturn get_unaligned_le16(&p->data.ptr[SSH_MSGOFFSET_COMMAND(tid)]);\n}\n\n \nstatic inline u32 ssam_trace_get_request_sid(const struct ssh_packet *p)\n{\n\tif (!p->data.ptr || p->data.len < SSH_COMMAND_MESSAGE_LENGTH(0))\n\t\treturn SSAM_SSH_TID_NOT_APPLICABLE;\n\n\treturn get_unaligned_le16(&p->data.ptr[SSH_MSGOFFSET_COMMAND(sid)]);\n}\n\n \nstatic inline u32 ssam_trace_get_request_tc(const struct ssh_packet *p)\n{\n\tif (!p->data.ptr || p->data.len < SSH_COMMAND_MESSAGE_LENGTH(0))\n\t\treturn SSAM_SSH_TC_NOT_APPLICABLE;\n\n\treturn get_unaligned_le16(&p->data.ptr[SSH_MSGOFFSET_COMMAND(tc)]);\n}\n\n#endif  \n\n#define ssam_trace_get_command_field_u8(packet, field) \\\n\t((!(packet) || (packet)->data.len < SSH_COMMAND_MESSAGE_LENGTH(0)) \\\n\t ? 0 : (packet)->data.ptr[SSH_MSGOFFSET_COMMAND(field)])\n\n#define ssam_show_generic_u8_field(value)\t\t\t\t\\\n\t__print_symbolic(value,\t\t\t\t\t\t\\\n\t\t{ SSAM_U8_FIELD_NOT_APPLICABLE,\t\t\"N/A\" }\t\t\\\n\t)\n\n#define ssam_show_frame_type(ty)\t\t\t\t\t\\\n\t__print_symbolic(ty,\t\t\t\t\t\t\\\n\t\t{ SSH_FRAME_TYPE_DATA_SEQ,\t\t\"DSEQ\" },\t\\\n\t\t{ SSH_FRAME_TYPE_DATA_NSQ,\t\t\"DNSQ\" },\t\\\n\t\t{ SSH_FRAME_TYPE_ACK,\t\t\t\"ACK\"  },\t\\\n\t\t{ SSH_FRAME_TYPE_NAK,\t\t\t\"NAK\"  }\t\\\n\t)\n\n#define ssam_show_packet_type(type)\t\t\t\t\t\\\n\t__print_flags(flags & SSH_PACKET_FLAGS_TY_MASK, \"\",\t\t\\\n\t\t{ BIT(SSH_PACKET_TY_FLUSH_BIT),\t\t\"F\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_TY_SEQUENCED_BIT),\t\"S\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_TY_BLOCKING_BIT),\t\"B\" }\t\t\\\n\t)\n\n#define ssam_show_packet_state(state)\t\t\t\t\t\\\n\t__print_flags(flags & SSH_PACKET_FLAGS_SF_MASK, \"\",\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_LOCKED_BIT),\t\"L\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_QUEUED_BIT),\t\"Q\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_PENDING_BIT),\t\"P\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_TRANSMITTING_BIT),\t\"S\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_TRANSMITTED_BIT),\t\"T\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_ACKED_BIT),\t\t\"A\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_CANCELED_BIT),\t\"C\" },\t\t\\\n\t\t{ BIT(SSH_PACKET_SF_COMPLETED_BIT),\t\"F\" }\t\t\\\n\t)\n\n#define ssam_show_packet_seq(seq)\t\t\t\t\t\\\n\t__print_symbolic(seq,\t\t\t\t\t\t\\\n\t\t{ SSAM_SEQ_NOT_APPLICABLE,\t\t\"N/A\" }\t\t\\\n\t)\n\n#define ssam_show_request_type(flags)\t\t\t\t\t\\\n\t__print_flags((flags) & SSH_REQUEST_FLAGS_TY_MASK, \"\",\t\t\\\n\t\t{ BIT(SSH_REQUEST_TY_FLUSH_BIT),\t\"F\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_TY_HAS_RESPONSE_BIT),\t\"R\" }\t\t\\\n\t)\n\n#define ssam_show_request_state(flags)\t\t\t\t\t\\\n\t__print_flags((flags) & SSH_REQUEST_FLAGS_SF_MASK, \"\",\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_LOCKED_BIT),\t\"L\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_QUEUED_BIT),\t\"Q\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_PENDING_BIT),\t\"P\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_TRANSMITTING_BIT),\t\"S\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_TRANSMITTED_BIT),\t\"T\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_RSPRCVD_BIT),\t\"A\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_CANCELED_BIT),\t\"C\" },\t\t\\\n\t\t{ BIT(SSH_REQUEST_SF_COMPLETED_BIT),\t\"F\" }\t\t\\\n\t)\n\n#define ssam_show_request_id(rqid)\t\t\t\t\t\\\n\t__print_symbolic(rqid,\t\t\t\t\t\t\\\n\t\t{ SSAM_RQID_NOT_APPLICABLE,\t\t\"N/A\" }\t\t\\\n\t)\n\n#define ssam_show_ssh_tid(tid)\t\t\t\t\t\t\\\n\t__print_symbolic(tid,\t\t\t\t\t\t\\\n\t\t{ SSAM_SSH_TID_NOT_APPLICABLE,\t\t\"N/A\"      },\t\\\n\t\t{ SSAM_SSH_TID_HOST,\t\t\t\"Host\"     },\t\\\n\t\t{ SSAM_SSH_TID_SAM,\t\t\t\"SAM\"      },\t\\\n\t\t{ SSAM_SSH_TID_KIP,\t\t\t\"KIP\"      },\t\\\n\t\t{ SSAM_SSH_TID_DEBUG,\t\t\t\"Debug\"    },\t\\\n\t\t{ SSAM_SSH_TID_SURFLINK,\t\t\"SurfLink\" }\t\\\n\t)\n\n#define ssam_show_ssh_tc(tc)\t\t\t\t\t\t\\\n\t__print_symbolic(tc,\t\t\t\t\t\t\\\n\t\t{ SSAM_SSH_TC_NOT_APPLICABLE,\t\t\"N/A\"  },\t\\\n\t\t{ SSAM_SSH_TC_SAM,\t\t\t\"SAM\"  },\t\\\n\t\t{ SSAM_SSH_TC_BAT,\t\t\t\"BAT\"  },\t\\\n\t\t{ SSAM_SSH_TC_TMP,\t\t\t\"TMP\"  },\t\\\n\t\t{ SSAM_SSH_TC_PMC,\t\t\t\"PMC\"  },\t\\\n\t\t{ SSAM_SSH_TC_FAN,\t\t\t\"FAN\"  },\t\\\n\t\t{ SSAM_SSH_TC_PoM,\t\t\t\"PoM\"  },\t\\\n\t\t{ SSAM_SSH_TC_DBG,\t\t\t\"DBG\"  },\t\\\n\t\t{ SSAM_SSH_TC_KBD,\t\t\t\"KBD\"  },\t\\\n\t\t{ SSAM_SSH_TC_FWU,\t\t\t\"FWU\"  },\t\\\n\t\t{ SSAM_SSH_TC_UNI,\t\t\t\"UNI\"  },\t\\\n\t\t{ SSAM_SSH_TC_LPC,\t\t\t\"LPC\"  },\t\\\n\t\t{ SSAM_SSH_TC_TCL,\t\t\t\"TCL\"  },\t\\\n\t\t{ SSAM_SSH_TC_SFL,\t\t\t\"SFL\"  },\t\\\n\t\t{ SSAM_SSH_TC_KIP,\t\t\t\"KIP\"  },\t\\\n\t\t{ SSAM_SSH_TC_EXT,\t\t\t\"EXT\"  },\t\\\n\t\t{ SSAM_SSH_TC_BLD,\t\t\t\"BLD\"  },\t\\\n\t\t{ SSAM_SSH_TC_BAS,\t\t\t\"BAS\"  },\t\\\n\t\t{ SSAM_SSH_TC_SEN,\t\t\t\"SEN\"  },\t\\\n\t\t{ SSAM_SSH_TC_SRQ,\t\t\t\"SRQ\"  },\t\\\n\t\t{ SSAM_SSH_TC_MCU,\t\t\t\"MCU\"  },\t\\\n\t\t{ SSAM_SSH_TC_HID,\t\t\t\"HID\"  },\t\\\n\t\t{ SSAM_SSH_TC_TCH,\t\t\t\"TCH\"  },\t\\\n\t\t{ SSAM_SSH_TC_BKL,\t\t\t\"BKL\"  },\t\\\n\t\t{ SSAM_SSH_TC_TAM,\t\t\t\"TAM\"  },\t\\\n\t\t{ SSAM_SSH_TC_ACC0,\t\t\t\"ACC0\" },\t\\\n\t\t{ SSAM_SSH_TC_UFI,\t\t\t\"UFI\"  },\t\\\n\t\t{ SSAM_SSH_TC_USC,\t\t\t\"USC\"  },\t\\\n\t\t{ SSAM_SSH_TC_PEN,\t\t\t\"PEN\"  },\t\\\n\t\t{ SSAM_SSH_TC_VID,\t\t\t\"VID\"  },\t\\\n\t\t{ SSAM_SSH_TC_AUD,\t\t\t\"AUD\"  },\t\\\n\t\t{ SSAM_SSH_TC_SMC,\t\t\t\"SMC\"  },\t\\\n\t\t{ SSAM_SSH_TC_KPD,\t\t\t\"KPD\"  },\t\\\n\t\t{ SSAM_SSH_TC_REG,\t\t\t\"REG\"  },\t\\\n\t\t{ SSAM_SSH_TC_SPT,\t\t\t\"SPT\"  },\t\\\n\t\t{ SSAM_SSH_TC_SYS,\t\t\t\"SYS\"  },\t\\\n\t\t{ SSAM_SSH_TC_ACC1,\t\t\t\"ACC1\" },\t\\\n\t\t{ SSAM_SSH_TC_SHB,\t\t\t\"SMB\"  },\t\\\n\t\t{ SSAM_SSH_TC_POS,\t\t\t\"POS\"  }\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_frame_class,\n\tTP_PROTO(const struct ssh_frame *frame),\n\n\tTP_ARGS(frame),\n\n\tTP_STRUCT__entry(\n\t\t__field(u8, type)\n\t\t__field(u8, seq)\n\t\t__field(u16, len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->type = frame->type;\n\t\t__entry->seq = frame->seq;\n\t\t__entry->len = get_unaligned_le16(&frame->len);\n\t),\n\n\tTP_printk(\"ty=%s, seq=%#04x, len=%u\",\n\t\tssam_show_frame_type(__entry->type),\n\t\t__entry->seq,\n\t\t__entry->len\n\t)\n);\n\n#define DEFINE_SSAM_FRAME_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(ssam_frame_class, ssam_##name,\t\t\\\n\t\tTP_PROTO(const struct ssh_frame *frame),\t\\\n\t\tTP_ARGS(frame)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_command_class,\n\tTP_PROTO(const struct ssh_command *cmd, u16 len),\n\n\tTP_ARGS(cmd, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(u16, rqid)\n\t\t__field(u16, len)\n\t\t__field(u8, tid)\n\t\t__field(u8, sid)\n\t\t__field(u8, tc)\n\t\t__field(u8, cid)\n\t\t__field(u8, iid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rqid = get_unaligned_le16(&cmd->rqid);\n\t\t__entry->tid = cmd->tid;\n\t\t__entry->sid = cmd->sid;\n\t\t__entry->tc = cmd->tc;\n\t\t__entry->cid = cmd->cid;\n\t\t__entry->iid = cmd->iid;\n\t\t__entry->len = len;\n\t),\n\n\tTP_printk(\"rqid=%#06x, tid=%s, sid=%s, tc=%s, cid=%#04x, iid=%#04x, len=%u\",\n\t\t__entry->rqid,\n\t\tssam_show_ssh_tid(__entry->tid),\n\t\tssam_show_ssh_tid(__entry->sid),\n\t\tssam_show_ssh_tc(__entry->tc),\n\t\t__entry->cid,\n\t\t__entry->iid,\n\t\t__entry->len\n\t)\n);\n\n#define DEFINE_SSAM_COMMAND_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(ssam_command_class, ssam_##name,\t\t\t\\\n\t\tTP_PROTO(const struct ssh_command *cmd, u16 len),\t\\\n\t\tTP_ARGS(cmd, len)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_packet_class,\n\tTP_PROTO(const struct ssh_packet *packet),\n\n\tTP_ARGS(packet),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t\t__field(u8, priority)\n\t\t__field(u16, length)\n\t\t__field(u16, seq)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state = READ_ONCE(packet->state);\n\t\tssam_trace_ptr_uid(packet, __entry->uid);\n\t\t__entry->priority = READ_ONCE(packet->priority);\n\t\t__entry->length = packet->data.len;\n\t\t__entry->seq = ssam_trace_get_packet_seq(packet);\n\t),\n\n\tTP_printk(\"uid=%s, seq=%s, ty=%s, pri=%#04x, len=%u, sta=%s\",\n\t\t__entry->uid,\n\t\tssam_show_packet_seq(__entry->seq),\n\t\tssam_show_packet_type(__entry->state),\n\t\t__entry->priority,\n\t\t__entry->length,\n\t\tssam_show_packet_state(__entry->state)\n\t)\n);\n\n#define DEFINE_SSAM_PACKET_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(ssam_packet_class, ssam_##name,\t\t\\\n\t\tTP_PROTO(const struct ssh_packet *packet),\t\\\n\t\tTP_ARGS(packet)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_packet_status_class,\n\tTP_PROTO(const struct ssh_packet *packet, int status),\n\n\tTP_ARGS(packet, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__field(int, status)\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t\t__field(u8, priority)\n\t\t__field(u16, length)\n\t\t__field(u16, seq)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state = READ_ONCE(packet->state);\n\t\t__entry->status = status;\n\t\tssam_trace_ptr_uid(packet, __entry->uid);\n\t\t__entry->priority = READ_ONCE(packet->priority);\n\t\t__entry->length = packet->data.len;\n\t\t__entry->seq = ssam_trace_get_packet_seq(packet);\n\t),\n\n\tTP_printk(\"uid=%s, seq=%s, ty=%s, pri=%#04x, len=%u, sta=%s, status=%d\",\n\t\t__entry->uid,\n\t\tssam_show_packet_seq(__entry->seq),\n\t\tssam_show_packet_type(__entry->state),\n\t\t__entry->priority,\n\t\t__entry->length,\n\t\tssam_show_packet_state(__entry->state),\n\t\t__entry->status\n\t)\n);\n\n#define DEFINE_SSAM_PACKET_STATUS_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(ssam_packet_status_class, ssam_##name,\t\t\\\n\t\tTP_PROTO(const struct ssh_packet *packet, int status),\t\\\n\t\tTP_ARGS(packet, status)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_request_class,\n\tTP_PROTO(const struct ssh_request *request),\n\n\tTP_ARGS(request),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__field(u32, rqid)\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t\t__field(u8, tc)\n\t\t__field(u16, cid)\n\t\t__field(u16, iid)\n\t\t__field(u8, tid)\n\t\t__field(u8, sid)\n\t),\n\n\tTP_fast_assign(\n\t\tconst struct ssh_packet *p = &request->packet;\n\n\t\t \n\t\t__entry->state = READ_ONCE(request->state);\n\t\t__entry->rqid = ssam_trace_get_request_id(p);\n\t\tssam_trace_ptr_uid(p, __entry->uid);\n\t\t__entry->tid = ssam_trace_get_request_tid(p);\n\t\t__entry->sid = ssam_trace_get_request_sid(p);\n\t\t__entry->tc = ssam_trace_get_request_tc(p);\n\t\t__entry->cid = ssam_trace_get_command_field_u8(p, cid);\n\t\t__entry->iid = ssam_trace_get_command_field_u8(p, iid);\n\t),\n\n\tTP_printk(\"uid=%s, rqid=%s, ty=%s, sta=%s, tid=%s, sid=%s, tc=%s, cid=%s, iid=%s\",\n\t\t__entry->uid,\n\t\tssam_show_request_id(__entry->rqid),\n\t\tssam_show_request_type(__entry->state),\n\t\tssam_show_request_state(__entry->state),\n\t\tssam_show_ssh_tid(__entry->tid),\n\t\tssam_show_ssh_tid(__entry->sid),\n\t\tssam_show_ssh_tc(__entry->tc),\n\t\tssam_show_generic_u8_field(__entry->cid),\n\t\tssam_show_generic_u8_field(__entry->iid)\n\t)\n);\n\n#define DEFINE_SSAM_REQUEST_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(ssam_request_class, ssam_##name,\t\t\\\n\t\tTP_PROTO(const struct ssh_request *request),\t\\\n\t\tTP_ARGS(request)\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_request_status_class,\n\tTP_PROTO(const struct ssh_request *request, int status),\n\n\tTP_ARGS(request, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__field(u32, rqid)\n\t\t__field(int, status)\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t\t__field(u8, tc)\n\t\t__field(u16, cid)\n\t\t__field(u16, iid)\n\t\t__field(u8, tid)\n\t\t__field(u8, sid)\n\t),\n\n\tTP_fast_assign(\n\t\tconst struct ssh_packet *p = &request->packet;\n\n\t\t \n\t\t__entry->state = READ_ONCE(request->state);\n\t\t__entry->rqid = ssam_trace_get_request_id(p);\n\t\t__entry->status = status;\n\t\tssam_trace_ptr_uid(p, __entry->uid);\n\t\t__entry->tid = ssam_trace_get_request_tid(p);\n\t\t__entry->sid = ssam_trace_get_request_sid(p);\n\t\t__entry->tc = ssam_trace_get_request_tc(p);\n\t\t__entry->cid = ssam_trace_get_command_field_u8(p, cid);\n\t\t__entry->iid = ssam_trace_get_command_field_u8(p, iid);\n\t),\n\n\tTP_printk(\"uid=%s, rqid=%s, ty=%s, sta=%s, tid=%s, sid=%s, tc=%s, cid=%s, iid=%s, status=%d\",\n\t\t__entry->uid,\n\t\tssam_show_request_id(__entry->rqid),\n\t\tssam_show_request_type(__entry->state),\n\t\tssam_show_request_state(__entry->state),\n\t\tssam_show_ssh_tid(__entry->tid),\n\t\tssam_show_ssh_tid(__entry->sid),\n\t\tssam_show_ssh_tc(__entry->tc),\n\t\tssam_show_generic_u8_field(__entry->cid),\n\t\tssam_show_generic_u8_field(__entry->iid),\n\t\t__entry->status\n\t)\n);\n\n#define DEFINE_SSAM_REQUEST_STATUS_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(ssam_request_status_class, ssam_##name,\t\t\\\n\t\tTP_PROTO(const struct ssh_request *request, int status),\\\n\t\tTP_ARGS(request, status)\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_alloc_class,\n\tTP_PROTO(void *ptr, size_t len),\n\n\tTP_ARGS(ptr, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(size_t, len)\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->len = len;\n\t\tssam_trace_ptr_uid(ptr, __entry->uid);\n\t),\n\n\tTP_printk(\"uid=%s, len=%zu\", __entry->uid, __entry->len)\n);\n\n#define DEFINE_SSAM_ALLOC_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(ssam_alloc_class, ssam_##name,\t\t\t\\\n\t\tTP_PROTO(void *ptr, size_t len),\t\t\t\\\n\t\tTP_ARGS(ptr, len)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_free_class,\n\tTP_PROTO(void *ptr),\n\n\tTP_ARGS(ptr),\n\n\tTP_STRUCT__entry(\n\t\t__array(char, uid, SSAM_PTR_UID_LEN)\n\t),\n\n\tTP_fast_assign(\n\t\tssam_trace_ptr_uid(ptr, __entry->uid);\n\t),\n\n\tTP_printk(\"uid=%s\", __entry->uid)\n);\n\n#define DEFINE_SSAM_FREE_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(ssam_free_class, ssam_##name,\t\t\t\\\n\t\tTP_PROTO(void *ptr),\t\t\t\t\t\\\n\t\tTP_ARGS(ptr)\t\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_pending_class,\n\tTP_PROTO(unsigned int pending),\n\n\tTP_ARGS(pending),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, pending)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->pending = pending;\n\t),\n\n\tTP_printk(\"pending=%u\", __entry->pending)\n);\n\n#define DEFINE_SSAM_PENDING_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(ssam_pending_class, ssam_##name,\t\t\t\\\n\t\tTP_PROTO(unsigned int pending),\t\t\t\t\\\n\t\tTP_ARGS(pending)\t\t\t\t\t\\\n\t)\n\nDECLARE_EVENT_CLASS(ssam_data_class,\n\tTP_PROTO(size_t length),\n\n\tTP_ARGS(length),\n\n\tTP_STRUCT__entry(\n\t\t__field(size_t, length)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->length = length;\n\t),\n\n\tTP_printk(\"length=%zu\", __entry->length)\n);\n\n#define DEFINE_SSAM_DATA_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(ssam_data_class, ssam_##name,\t\t\t\\\n\t\tTP_PROTO(size_t length),\t\t\t\t\\\n\t\tTP_ARGS(length)\t\t\t\t\t\t\\\n\t)\n\nDEFINE_SSAM_FRAME_EVENT(rx_frame_received);\nDEFINE_SSAM_COMMAND_EVENT(rx_response_received);\nDEFINE_SSAM_COMMAND_EVENT(rx_event_received);\n\nDEFINE_SSAM_PACKET_EVENT(packet_release);\nDEFINE_SSAM_PACKET_EVENT(packet_submit);\nDEFINE_SSAM_PACKET_EVENT(packet_resubmit);\nDEFINE_SSAM_PACKET_EVENT(packet_timeout);\nDEFINE_SSAM_PACKET_EVENT(packet_cancel);\nDEFINE_SSAM_PACKET_STATUS_EVENT(packet_complete);\nDEFINE_SSAM_PENDING_EVENT(ptl_timeout_reap);\n\nDEFINE_SSAM_REQUEST_EVENT(request_submit);\nDEFINE_SSAM_REQUEST_EVENT(request_timeout);\nDEFINE_SSAM_REQUEST_EVENT(request_cancel);\nDEFINE_SSAM_REQUEST_STATUS_EVENT(request_complete);\nDEFINE_SSAM_PENDING_EVENT(rtl_timeout_reap);\n\nDEFINE_SSAM_PACKET_EVENT(ei_tx_drop_ack_packet);\nDEFINE_SSAM_PACKET_EVENT(ei_tx_drop_nak_packet);\nDEFINE_SSAM_PACKET_EVENT(ei_tx_drop_dsq_packet);\nDEFINE_SSAM_PACKET_STATUS_EVENT(ei_tx_fail_write);\nDEFINE_SSAM_PACKET_EVENT(ei_tx_corrupt_data);\nDEFINE_SSAM_DATA_EVENT(ei_rx_corrupt_syn);\nDEFINE_SSAM_FRAME_EVENT(ei_rx_corrupt_data);\nDEFINE_SSAM_REQUEST_EVENT(ei_rx_drop_response);\n\nDEFINE_SSAM_ALLOC_EVENT(ctrl_packet_alloc);\nDEFINE_SSAM_FREE_EVENT(ctrl_packet_free);\n\nDEFINE_SSAM_ALLOC_EVENT(event_item_alloc);\nDEFINE_SSAM_FREE_EVENT(event_item_free);\n\n#endif  \n\n \n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE trace\n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}