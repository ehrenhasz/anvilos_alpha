{
  "module_name": "Kconfig",
  "hash_id": "dd21624b9dd9e59c63cb3059e317ef4b3835072ee118b3ca7018d737e9f23cb4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/surface/Kconfig",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\n#\n# Microsoft Surface Platform-Specific Drivers\n#\n\nmenuconfig SURFACE_PLATFORMS\n\tbool \"Microsoft Surface Platform-Specific Device Drivers\"\n\tdepends on ARM64 || X86 || COMPILE_TEST\n\tdefault y\n\thelp\n\t  Say Y here to get to see options for platform-specific device drivers\n\t  for Microsoft Surface devices. This option alone does not add any\n\t  kernel code.\n\n\t  If you say N, all options in this submenu will be skipped and disabled.\n\nif SURFACE_PLATFORMS\n\nconfig SURFACE3_WMI\n\ttristate \"Surface 3 WMI Driver\"\n\tdepends on ACPI_WMI\n\tdepends on DMI\n\tdepends on INPUT\n\tdepends on SPI\n\thelp\n\t  Say Y here if you have a Surface 3.\n\n\t  To compile this driver as a module, choose M here: the module will\n\t  be called surface3-wmi.\n\nconfig SURFACE_3_POWER_OPREGION\n\ttristate \"Surface 3 battery platform operation region support\"\n\tdepends on ACPI\n\tdepends on I2C\n\thelp\n\t  This driver provides support for ACPI operation\n\t  region of the Surface 3 battery platform driver.\n\nconfig SURFACE_ACPI_NOTIFY\n\ttristate \"Surface ACPI Notify Driver\"\n\tdepends on SURFACE_AGGREGATOR\n\thelp\n\t  Surface ACPI Notify (SAN) driver for Microsoft Surface devices.\n\n\t  This driver provides support for the ACPI interface (called SAN) of\n\t  the Surface System Aggregator Module (SSAM) EC. This interface is used\n\t  on 5th- and 6th-generation Microsoft Surface devices (including\n\t  Surface Pro 5 and 6, Surface Book 2, Surface Laptops 1 and 2, and in\n\t  reduced functionality on the Surface Laptop 3) to execute SSAM\n\t  requests directly from ACPI code, as well as receive SSAM events and\n\t  turn them into ACPI notifications. It essentially acts as a\n\t  translation layer between the SSAM controller and ACPI.\n\n\t  Specifically, this driver may be needed for battery status reporting,\n\t  thermal sensor access, and real-time clock information, depending on\n\t  the Surface device in question.\n\nconfig SURFACE_AGGREGATOR_CDEV\n\ttristate \"Surface System Aggregator Module User-Space Interface\"\n\tdepends on SURFACE_AGGREGATOR\n\thelp\n\t  Provides a misc-device interface to the Surface System Aggregator\n\t  Module (SSAM) controller.\n\n\t  This option provides a module (called surface_aggregator_cdev), that,\n\t  when loaded, will add a client device (and its respective driver) to\n\t  the SSAM controller. Said client device manages a misc-device\n\t  interface (/dev/surface/aggregator), which can be used by user-space\n\t  tools to directly communicate with the SSAM EC by sending requests and\n\t  receiving the corresponding responses.\n\n\t  The provided interface is intended for debugging and development only,\n\t  and should not be used otherwise.\n\nconfig SURFACE_AGGREGATOR_HUB\n\ttristate \"Surface System Aggregator Module Subsystem Device Hubs\"\n\tdepends on SURFACE_AGGREGATOR\n\tdepends on SURFACE_AGGREGATOR_BUS\n\thelp\n\t  Device-hub drivers for Surface System Aggregator Module (SSAM) subsystem\n\t  devices.\n\n\t  Provides subsystem hub drivers which manage client devices on various\n\t  SSAM subsystems. In some subsystems, notably the BAS subsystem managing\n\t  devices contained in the base of the Surface Book 3 and the KIP subsystem\n\t  managing type-cover devices in the Surface Pro 8 and Surface Pro X,\n\t  devices can be (hot-)removed. Hub devices and drivers are required to\n\t  manage these subdevices.\n\n\t  Devices managed via these hubs are:\n\t  - Battery/AC devices (Surface Book 3).\n\t  - HID input devices (7th-generation and later models with detachable\n\t    input devices).\n\n\t  Select M (recommended) or Y here if you want support for the above\n\t  mentioned devices on the corresponding Surface models. Without this\n\t  module, the respective devices mentioned above will not be instantiated\n\t  and thus any functionality provided by them will be missing, even when\n\t  drivers for these devices are present. This module only provides the\n\t  respective subsystem hubs. Both drivers and device specification (e.g.\n\t  via the Surface Aggregator Registry) for these devices still need to be\n\t  selected via other options.\n\nconfig SURFACE_AGGREGATOR_REGISTRY\n\ttristate \"Surface System Aggregator Module Device Registry\"\n\tdepends on SURFACE_AGGREGATOR\n\tdepends on SURFACE_AGGREGATOR_BUS\n\thelp\n\t  Device-registry for Surface System Aggregator Module (SSAM) devices.\n\n\t  Provides a module and driver which act as a device-registry for SSAM\n\t  client devices that cannot be detected automatically, e.g. via ACPI.\n\t  Such devices are instead provided and managed via this registry.\n\n\t  Devices provided via this registry are:\n\t  - Platform profile (performance-/cooling-mode) device (5th- and later\n\t    generations).\n\t  - Battery/AC devices (7th-generation).\n\t  - HID input devices (7th-generation).\n\n\t  Select M (recommended) or Y here if you want support for the above\n\t  mentioned devices on the corresponding Surface models. Without this\n\t  module, the respective devices will not be instantiated and thus any\n\t  functionality provided by them will be missing, even when drivers for\n\t  these devices are present. In other words, this module only provides\n\t  the respective client devices. Drivers for these devices still need to\n\t  be selected via the other options.\n\nconfig SURFACE_AGGREGATOR_TABLET_SWITCH\n\ttristate \"Surface Aggregator Generic Tablet-Mode Switch Driver\"\n\tdepends on SURFACE_AGGREGATOR\n\tdepends on SURFACE_AGGREGATOR_BUS\n\tdepends on INPUT\n\thelp\n\t  Provides a tablet-mode switch input device on Microsoft Surface models\n\t  using the KIP subsystem for detachable keyboards (e.g. keyboard covers)\n\t  or the POS subsystem for device/screen posture changes.\n\n\t  The KIP subsystem is used on newer Surface generations to handle\n\t  detachable input peripherals, specifically the keyboard cover (containing\n\t  keyboard and touchpad) on the Surface Pro 8 and Surface Pro X. The POS\n\t  subsystem is used for device posture change notifications on the Surface\n\t  Laptop Studio. This module provides a driver to let user-space know when\n\t  the device should be considered in tablet-mode due to the keyboard cover\n\t  being detached or folded back (essentially signaling when the keyboard is\n\t  not available for input). It does so by creating a tablet-mode switch\n\t  input device, sending the standard SW_TABLET_MODE event on mode change.\n\n\t  Select M or Y here, if you want to provide tablet-mode switch input\n\t  events on the Surface Pro 8, Surface Pro X, and Surface Laptop Studio.\n\nconfig SURFACE_DTX\n\ttristate \"Surface DTX (Detachment System) Driver\"\n\tdepends on SURFACE_AGGREGATOR\n\tdepends on INPUT\n\thelp\n\t  Driver for the Surface Book clipboard detachment system (DTX).\n\n\t  On the Surface Book series devices, the display part containing the\n\t  CPU (called the clipboard) can be detached from the base (containing a\n\t  battery, the keyboard, and, optionally, a discrete GPU) by (if\n\t  necessary) unlocking and opening the latch connecting both parts.\n\n\t  This driver provides a user-space interface that can influence the\n\t  behavior of this process, which includes the option to abort it in\n\t  case the base is still in use or speed it up in case it is not.\n\n\t  Note that this module can be built without support for the Surface\n\t  Aggregator Bus (i.e. CONFIG_SURFACE_AGGREGATOR_BUS=n). In that case,\n\t  some devices, specifically the Surface Book 3, will not be supported.\n\nconfig SURFACE_GPE\n\ttristate \"Surface GPE/Lid Support Driver\"\n\tdepends on ACPI\n\tdepends on DMI\n\thelp\n\t  This driver marks the GPEs related to the ACPI lid device found on\n\t  Microsoft Surface devices as wakeup sources and prepares them\n\t  accordingly. It is required on those devices to allow wake-ups from\n\t  suspend by opening the lid.\n\nconfig SURFACE_HOTPLUG\n\ttristate \"Surface Hot-Plug Driver\"\n\tdepends on ACPI\n\tdepends on GPIOLIB\n\thelp\n\t  Driver for out-of-band hot-plug event signaling on Microsoft Surface\n\t  devices with hot-pluggable PCIe cards.\n\n\t  This driver is used on Surface Book (2 and 3) devices with a\n\t  hot-pluggable discrete GPU (dGPU). When not in use, the dGPU on those\n\t  devices can enter D3cold, which prevents in-band (standard) PCIe\n\t  hot-plug signaling. Thus, without this driver, detaching the base\n\t  containing the dGPU will not correctly update the state of the\n\t  corresponding PCIe device if it is in D3cold. This driver adds support\n\t  for out-of-band hot-plug notifications, ensuring that the device state\n\t  is properly updated even when the device in question is in D3cold.\n\n\t  Select M or Y here, if you want to (fully) support hot-plugging of\n\t  dGPU devices on the Surface Book 2 and/or 3 during D3cold.\n\nconfig SURFACE_PLATFORM_PROFILE\n\ttristate \"Surface Platform Profile Driver\"\n\tdepends on ACPI\n\tdepends on SURFACE_AGGREGATOR_REGISTRY\n\tselect ACPI_PLATFORM_PROFILE\n\thelp\n\t  Provides support for the ACPI platform profile on 5th- and later\n\t  generation Microsoft Surface devices.\n\n\t  More specifically, this driver provides ACPI platform profile support\n\t  on Microsoft Surface devices with a Surface System Aggregator Module\n\t  (SSAM) connected via the Surface Serial Hub (SSH / SAM-over-SSH). In\n\t  other words, this driver provides platform profile support on the\n\t  Surface Pro 5, Surface Book 2, Surface Laptop, Surface Laptop Go and\n\t  later. On those devices, the platform profile can significantly\n\t  influence cooling behavior, e.g. setting it to 'quiet' (default) or\n\t  'low-power' can significantly limit performance of the discrete GPU on\n\t  Surface Books, while in turn leading to lower power consumption and/or\n\t  less fan noise.\n\n\t  Select M or Y here, if you want to include ACPI platform profile\n\t  support on the above mentioned devices.\n\nconfig SURFACE_PRO3_BUTTON\n\ttristate \"Power/home/volume buttons driver for Microsoft Surface Pro 3/4 tablet\"\n\tdepends on ACPI\n\tdepends on INPUT\n\thelp\n\t  This driver handles the power/home/volume buttons on the Microsoft Surface Pro 3/4 tablet.\n\nsource \"drivers/platform/surface/aggregator/Kconfig\"\n\nendif # SURFACE_PLATFORMS\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}