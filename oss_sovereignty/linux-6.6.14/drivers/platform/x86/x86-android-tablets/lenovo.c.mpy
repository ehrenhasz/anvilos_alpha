{
  "module_name": "lenovo.c",
  "hash_id": "8701d1076a0ce4fd09088431a66ccc90e4819e4d550134d8738c9c2059a5956e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/x86-android-tablets/lenovo.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n#include <linux/efi.h>\n#include <linux/gpio/machine.h>\n#include <linux/mfd/intel_soc_pmic.h>\n#include <linux/pinctrl/consumer.h>\n#include <linux/pinctrl/machine.h>\n#include <linux/platform_data/lp855x.h>\n#include <linux/platform_device.h>\n#include <linux/reboot.h>\n#include <linux/rmi.h>\n#include <linux/spi/spi.h>\n\n#include \"shared-psy-info.h\"\n#include \"x86-android-tablets.h\"\n\n \nstatic struct lp855x_platform_data lenovo_lp8557_pdata = {\n\t.device_control = 0x86,\n\t.initial_brightness = 128,\n};\n\n \n\nstatic const struct property_entry lenovo_yb1_x90_wacom_props[] = {\n\tPROPERTY_ENTRY_U32(\"hid-descr-addr\", 0x0001),\n\tPROPERTY_ENTRY_U32(\"post-reset-deassert-delay-ms\", 150),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yb1_x90_wacom_node = {\n\t.properties = lenovo_yb1_x90_wacom_props,\n};\n\n \nstatic const struct property_entry lenovo_yb1_x90_hideep_ts_props[] = {\n\tPROPERTY_ENTRY_U32(\"touchscreen-size-x\", 1200),\n\tPROPERTY_ENTRY_U32(\"touchscreen-size-y\", 1920),\n\tPROPERTY_ENTRY_U32(\"touchscreen-max-pressure\", 16384),\n\tPROPERTY_ENTRY_BOOL(\"hideep,force-native-protocol\"),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yb1_x90_hideep_ts_node = {\n\t.properties = lenovo_yb1_x90_hideep_ts_props,\n};\n\nstatic const struct x86_i2c_client_info lenovo_yb1_x90_i2c_clients[] __initconst = {\n\t{\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq27542\",\n\t\t\t.addr = 0x55,\n\t\t\t.dev_name = \"bq27542\",\n\t\t\t.swnode = &fg_bq25890_supply_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C1\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"GDIX1001:00\",\n\t\t\t.addr = 0x14,\n\t\t\t.dev_name = \"goodix_ts\",\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C2\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FF:01\",\n\t\t\t.index = 56,\n\t\t\t.trigger = ACPI_EDGE_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_LOW,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"hid-over-i2c\",\n\t\t\t.addr = 0x09,\n\t\t\t.dev_name = \"wacom\",\n\t\t\t.swnode = &lenovo_yb1_x90_wacom_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C4\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FF:01\",\n\t\t\t.index = 49,\n\t\t\t.trigger = ACPI_LEVEL_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_LOW,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"lp8557\",\n\t\t\t.addr = 0x2c,\n\t\t\t.dev_name = \"lp8557\",\n\t\t\t.platform_data = &lenovo_lp8557_pdata,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C4\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"hideep_ts\",\n\t\t\t.addr = 0x6c,\n\t\t\t.dev_name = \"hideep_ts\",\n\t\t\t.swnode = &lenovo_yb1_x90_hideep_ts_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C6\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FF:03\",\n\t\t\t.index = 77,\n\t\t\t.trigger = ACPI_LEVEL_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_LOW,\n\t\t},\n\t},\n};\n\nstatic const struct platform_device_info lenovo_yb1_x90_pdevs[] __initconst = {\n\t{\n\t\t.name = \"yogabook-touch-kbd-digitizer-switch\",\n\t\t.id = PLATFORM_DEVID_NONE,\n\t},\n};\n\n \nstatic const struct x86_serdev_info lenovo_yb1_x90_serdevs[] __initconst = {\n\t{\n\t\t.ctrl_hid = \"8086228A\",\n\t\t.ctrl_uid = \"1\",\n\t\t.ctrl_devname = \"serial0\",\n\t\t.serdev_hid = \"BCM2E1A\",\n\t},\n};\n\nstatic const struct x86_gpio_button lenovo_yb1_x90_lid __initconst = {\n\t.button = {\n\t\t.code = SW_LID,\n\t\t.active_low = true,\n\t\t.desc = \"lid_sw\",\n\t\t.type = EV_SW,\n\t\t.wakeup = true,\n\t\t.debounce_interval = 50,\n\t},\n\t.chip = \"INT33FF:02\",\n\t.pin = 19,\n};\n\nstatic struct gpiod_lookup_table lenovo_yb1_x90_goodix_gpios = {\n\t.dev_id = \"i2c-goodix_ts\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"INT33FF:01\", 53, \"reset\", GPIO_ACTIVE_HIGH),\n\t\tGPIO_LOOKUP(\"INT33FF:01\", 56, \"irq\", GPIO_ACTIVE_HIGH),\n\t\t{ }\n\t},\n};\n\nstatic struct gpiod_lookup_table lenovo_yb1_x90_hideep_gpios = {\n\t.dev_id = \"i2c-hideep_ts\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"INT33FF:00\", 7, \"reset\", GPIO_ACTIVE_LOW),\n\t\t{ }\n\t},\n};\n\nstatic struct gpiod_lookup_table lenovo_yb1_x90_wacom_gpios = {\n\t.dev_id = \"i2c-wacom\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"INT33FF:00\", 82, \"reset\", GPIO_ACTIVE_LOW),\n\t\t{ }\n\t},\n};\n\nstatic struct gpiod_lookup_table * const lenovo_yb1_x90_gpios[] = {\n\t&lenovo_yb1_x90_hideep_gpios,\n\t&lenovo_yb1_x90_goodix_gpios,\n\t&lenovo_yb1_x90_wacom_gpios,\n\tNULL\n};\n\nstatic int __init lenovo_yb1_x90_init(void)\n{\n\t \n\n\t \n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0x9b, 0x02, 0xff);\n\n\t \n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0x9f, 0x02, 0xff);\n\n\t \n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0xa0, 0x02, 0xff);\n\n\t \n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0xa1, 0x02, 0xff);\n\n\treturn 0;\n}\n\nconst struct x86_dev_info lenovo_yogabook_x90_info __initconst = {\n\t.i2c_client_info = lenovo_yb1_x90_i2c_clients,\n\t.i2c_client_count = ARRAY_SIZE(lenovo_yb1_x90_i2c_clients),\n\t.pdev_info = lenovo_yb1_x90_pdevs,\n\t.pdev_count = ARRAY_SIZE(lenovo_yb1_x90_pdevs),\n\t.serdev_info = lenovo_yb1_x90_serdevs,\n\t.serdev_count = ARRAY_SIZE(lenovo_yb1_x90_serdevs),\n\t.gpio_button = &lenovo_yb1_x90_lid,\n\t.gpio_button_count = 1,\n\t.gpiod_lookup_tables = lenovo_yb1_x90_gpios,\n\t.init = lenovo_yb1_x90_init,\n};\n\n \nstatic const struct x86_i2c_client_info lenovo_yogabook_x91_i2c_clients[] __initconst = {\n\t{\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq27542\",\n\t\t\t.addr = 0x55,\n\t\t\t.dev_name = \"bq27542\",\n\t\t\t.swnode = &fg_bq25890_supply_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C1\",\n\t},\n};\n\nconst struct x86_dev_info lenovo_yogabook_x91_info __initconst = {\n\t.i2c_client_info = lenovo_yogabook_x91_i2c_clients,\n\t.i2c_client_count = ARRAY_SIZE(lenovo_yogabook_x91_i2c_clients),\n};\n\n \nstatic const struct property_entry lenovo_yoga_tab2_830_1050_bq24190_props[] = {\n\tPROPERTY_ENTRY_STRING_ARRAY_LEN(\"supplied-from\", tusb1211_chg_det_psy, 1),\n\tPROPERTY_ENTRY_REF(\"monitored-battery\", &generic_lipo_hv_4v35_battery_node),\n\tPROPERTY_ENTRY_BOOL(\"omit-battery-class\"),\n\tPROPERTY_ENTRY_BOOL(\"disable-reset\"),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yoga_tab2_830_1050_bq24190_node = {\n\t.properties = lenovo_yoga_tab2_830_1050_bq24190_props,\n};\n\nstatic const struct x86_gpio_button lenovo_yoga_tab2_830_1050_lid __initconst = {\n\t.button = {\n\t\t.code = SW_LID,\n\t\t.active_low = true,\n\t\t.desc = \"lid_sw\",\n\t\t.type = EV_SW,\n\t\t.wakeup = true,\n\t\t.debounce_interval = 50,\n\t},\n\t.chip = \"INT33FC:02\",\n\t.pin = 26,\n};\n\n \nstatic struct rmi_device_platform_data lenovo_yoga_tab2_830_1050_rmi_pdata = { };\n\nstatic struct x86_i2c_client_info lenovo_yoga_tab2_830_1050_i2c_clients[] __initdata = {\n\t{\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"lsm303d\",\n\t\t\t.addr = 0x1d,\n\t\t\t.dev_name = \"lsm303d\",\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C5\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"al3320a\",\n\t\t\t.addr = 0x1c,\n\t\t\t.dev_name = \"al3320a\",\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C5\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq24190\",\n\t\t\t.addr = 0x6b,\n\t\t\t.dev_name = \"bq24292i\",\n\t\t\t.swnode = &lenovo_yoga_tab2_830_1050_bq24190_node,\n\t\t\t.platform_data = &bq24190_pdata,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C1\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FC:02\",\n\t\t\t.index = 2,\n\t\t\t.trigger = ACPI_EDGE_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_HIGH,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq27541\",\n\t\t\t.addr = 0x55,\n\t\t\t.dev_name = \"bq27541\",\n\t\t\t.swnode = &fg_bq24190_supply_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C1\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"rmi4_i2c\",\n\t\t\t.addr = 0x38,\n\t\t\t.dev_name = \"rmi4_i2c\",\n\t\t\t.platform_data = &lenovo_yoga_tab2_830_1050_rmi_pdata,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C6\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_APIC,\n\t\t\t.index = 0x45,\n\t\t\t.trigger = ACPI_EDGE_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_HIGH,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"lp8557\",\n\t\t\t.addr = 0x2c,\n\t\t\t.dev_name = \"lp8557\",\n\t\t\t.platform_data = &lenovo_lp8557_pdata,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.I2C3\",\n\t},\n};\n\nstatic struct gpiod_lookup_table lenovo_yoga_tab2_830_1050_int3496_gpios = {\n\t.dev_id = \"intel-int3496\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"INT33FC:02\", 1, \"mux\", GPIO_ACTIVE_LOW),\n\t\tGPIO_LOOKUP(\"INT33FC:02\", 24, \"id\", GPIO_ACTIVE_HIGH),\n\t\t{ }\n\t},\n};\n\n#define LENOVO_YOGA_TAB2_830_1050_CODEC_NAME \"spi-10WM5102:00\"\n\nstatic struct gpiod_lookup_table lenovo_yoga_tab2_830_1050_codec_gpios = {\n\t.dev_id = LENOVO_YOGA_TAB2_830_1050_CODEC_NAME,\n\t.table = {\n\t\tGPIO_LOOKUP(\"gpio_crystalcove\", 3, \"reset\", GPIO_ACTIVE_HIGH),\n\t\tGPIO_LOOKUP(\"INT33FC:01\", 23, \"wlf,ldoena\", GPIO_ACTIVE_HIGH),\n\t\tGPIO_LOOKUP(\"arizona\", 2, \"wlf,spkvdd-ena\", GPIO_ACTIVE_HIGH),\n\t\tGPIO_LOOKUP(\"arizona\", 4, \"wlf,micd-pol\", GPIO_ACTIVE_LOW),\n\t\t{ }\n\t},\n};\n\nstatic struct gpiod_lookup_table * const lenovo_yoga_tab2_830_1050_gpios[] = {\n\t&lenovo_yoga_tab2_830_1050_int3496_gpios,\n\t&lenovo_yoga_tab2_830_1050_codec_gpios,\n\tNULL\n};\n\nstatic int __init lenovo_yoga_tab2_830_1050_init(void);\nstatic void lenovo_yoga_tab2_830_1050_exit(void);\n\nconst struct x86_dev_info lenovo_yoga_tab2_830_1050_info __initconst = {\n\t.i2c_client_info = lenovo_yoga_tab2_830_1050_i2c_clients,\n\t.i2c_client_count = ARRAY_SIZE(lenovo_yoga_tab2_830_1050_i2c_clients),\n\t.pdev_info = int3496_pdevs,\n\t.pdev_count = 1,\n\t.gpio_button = &lenovo_yoga_tab2_830_1050_lid,\n\t.gpio_button_count = 1,\n\t.gpiod_lookup_tables = lenovo_yoga_tab2_830_1050_gpios,\n\t.bat_swnode = &generic_lipo_hv_4v35_battery_node,\n\t.modules = bq24190_modules,\n\t.init = lenovo_yoga_tab2_830_1050_init,\n\t.exit = lenovo_yoga_tab2_830_1050_exit,\n};\n\n \nstatic const char * const lenovo_yoga_tab2_830_lms303d_mount_matrix[] = {\n\t\"0\", \"1\", \"0\",\n\t\"-1\", \"0\", \"0\",\n\t\"0\", \"0\", \"1\"\n};\n\nstatic const struct property_entry lenovo_yoga_tab2_830_lms303d_props[] = {\n\tPROPERTY_ENTRY_STRING_ARRAY(\"mount-matrix\", lenovo_yoga_tab2_830_lms303d_mount_matrix),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yoga_tab2_830_lms303d_node = {\n\t.properties = lenovo_yoga_tab2_830_lms303d_props,\n};\n\nstatic int __init lenovo_yoga_tab2_830_1050_init_touchscreen(void)\n{\n\tstruct gpio_desc *gpiod;\n\tint ret;\n\n\t \n\tret = x86_android_tablet_get_gpiod(\"gpio_crystalcove\", 10, &gpiod);\n\tif (ret)\n\t\treturn ret;\n\n\tret = gpiod_get_value_cansleep(gpiod);\n\tif (ret) {\n\t\tpr_info(\"detected Lenovo Yoga Tablet 2 1050F/L\\n\");\n\t} else {\n\t\tpr_info(\"detected Lenovo Yoga Tablet 2 830F/L\\n\");\n\t\tlenovo_yoga_tab2_830_1050_rmi_pdata.sensor_pdata.axis_align.swap_axes = true;\n\t\tlenovo_yoga_tab2_830_1050_rmi_pdata.sensor_pdata.axis_align.flip_y = true;\n\t\tlenovo_yoga_tab2_830_1050_i2c_clients[0].board_info.swnode =\n\t\t\t&lenovo_yoga_tab2_830_lms303d_node;\n\t}\n\n\treturn 0;\n}\n\n \nstatic const struct pinctrl_map lenovo_yoga_tab2_830_1050_codec_pinctrl_map =\n\tPIN_MAP_MUX_GROUP(LENOVO_YOGA_TAB2_830_1050_CODEC_NAME, \"codec_32khz_clk\",\n\t\t\t  \"INT33FC:02\", \"pmu_clk2_grp\", \"pmu_clk\");\n\nstatic struct pinctrl *lenovo_yoga_tab2_830_1050_codec_pinctrl;\nstatic struct sys_off_handler *lenovo_yoga_tab2_830_1050_sys_off_handler;\n\nstatic int __init lenovo_yoga_tab2_830_1050_init_codec(void)\n{\n\tstruct device *codec_dev;\n\tstruct pinctrl *pinctrl;\n\tint ret;\n\n\tcodec_dev = bus_find_device_by_name(&spi_bus_type, NULL,\n\t\t\t\t\t    LENOVO_YOGA_TAB2_830_1050_CODEC_NAME);\n\tif (!codec_dev) {\n\t\tpr_err(\"error cannot find %s device\\n\", LENOVO_YOGA_TAB2_830_1050_CODEC_NAME);\n\t\treturn -ENODEV;\n\t}\n\n\tret = pinctrl_register_mappings(&lenovo_yoga_tab2_830_1050_codec_pinctrl_map, 1);\n\tif (ret)\n\t\tgoto err_put_device;\n\n\tpinctrl = pinctrl_get_select(codec_dev, \"codec_32khz_clk\");\n\tif (IS_ERR(pinctrl)) {\n\t\tret = dev_err_probe(codec_dev, PTR_ERR(pinctrl), \"selecting codec_32khz_clk\\n\");\n\t\tgoto err_unregister_mappings;\n\t}\n\n\t \n\tput_device(codec_dev);\n\n\tlenovo_yoga_tab2_830_1050_codec_pinctrl = pinctrl;\n\treturn 0;\n\nerr_unregister_mappings:\n\tpinctrl_unregister_mappings(&lenovo_yoga_tab2_830_1050_codec_pinctrl_map);\nerr_put_device:\n\tput_device(codec_dev);\n\treturn ret;\n}\n\n \nstatic int lenovo_yoga_tab2_830_1050_power_off(struct sys_off_data *data)\n{\n\tefi.reset_system(EFI_RESET_SHUTDOWN, EFI_SUCCESS, 0, NULL);\n\n\treturn NOTIFY_DONE;\n}\n\nstatic int __init lenovo_yoga_tab2_830_1050_init(void)\n{\n\tint ret;\n\n\tret = lenovo_yoga_tab2_830_1050_init_touchscreen();\n\tif (ret)\n\t\treturn ret;\n\n\tret = lenovo_yoga_tab2_830_1050_init_codec();\n\tif (ret)\n\t\treturn ret;\n\n\t \n\tlenovo_yoga_tab2_830_1050_sys_off_handler =\n\t\tregister_sys_off_handler(SYS_OFF_MODE_POWER_OFF, SYS_OFF_PRIO_FIRMWARE + 1,\n\t\t\t\t\t lenovo_yoga_tab2_830_1050_power_off, NULL);\n\tif (IS_ERR(lenovo_yoga_tab2_830_1050_sys_off_handler))\n\t\treturn PTR_ERR(lenovo_yoga_tab2_830_1050_sys_off_handler);\n\n\treturn 0;\n}\n\nstatic void lenovo_yoga_tab2_830_1050_exit(void)\n{\n\tunregister_sys_off_handler(lenovo_yoga_tab2_830_1050_sys_off_handler);\n\n\tif (lenovo_yoga_tab2_830_1050_codec_pinctrl) {\n\t\tpinctrl_put(lenovo_yoga_tab2_830_1050_codec_pinctrl);\n\t\tpinctrl_unregister_mappings(&lenovo_yoga_tab2_830_1050_codec_pinctrl_map);\n\t}\n}\n\n \n\n \nstatic const char * const lenovo_yt3_bq25892_0_suppliers[] = { \"cht_wcove_pwrsrc\" };\nstatic const char * const bq25890_1_psy[] = { \"bq25890-charger-1\" };\n\nstatic const struct property_entry fg_bq25890_1_supply_props[] = {\n\tPROPERTY_ENTRY_STRING_ARRAY(\"supplied-from\", bq25890_1_psy),\n\t{ }\n};\n\nstatic const struct software_node fg_bq25890_1_supply_node = {\n\t.properties = fg_bq25890_1_supply_props,\n};\n\n \nstatic const struct property_entry lenovo_yt3_bq25892_0_props[] = {\n\tPROPERTY_ENTRY_STRING_ARRAY(\"supplied-from\", lenovo_yt3_bq25892_0_suppliers),\n\tPROPERTY_ENTRY_STRING(\"linux,power-supply-name\", \"bq25892-second-chrg\"),\n\tPROPERTY_ENTRY_U32(\"linux,iinlim-percentage\", 40),\n\tPROPERTY_ENTRY_BOOL(\"linux,skip-reset\"),\n\t \n\tPROPERTY_ENTRY_U32(\"ti,charge-current\", 2048000),\n\tPROPERTY_ENTRY_U32(\"ti,battery-regulation-voltage\", 4352000),\n\tPROPERTY_ENTRY_U32(\"ti,termination-current\", 128000),\n\tPROPERTY_ENTRY_U32(\"ti,precharge-current\", 128000),\n\tPROPERTY_ENTRY_U32(\"ti,minimum-sys-voltage\", 3700000),\n\tPROPERTY_ENTRY_U32(\"ti,boost-voltage\", 4998000),\n\tPROPERTY_ENTRY_U32(\"ti,boost-max-current\", 500000),\n\tPROPERTY_ENTRY_BOOL(\"ti,use-ilim-pin\"),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yt3_bq25892_0_node = {\n\t.properties = lenovo_yt3_bq25892_0_props,\n};\n\nstatic const struct property_entry lenovo_yt3_hideep_ts_props[] = {\n\tPROPERTY_ENTRY_U32(\"touchscreen-size-x\", 1600),\n\tPROPERTY_ENTRY_U32(\"touchscreen-size-y\", 2560),\n\tPROPERTY_ENTRY_U32(\"touchscreen-max-pressure\", 255),\n\t{ }\n};\n\nstatic const struct software_node lenovo_yt3_hideep_ts_node = {\n\t.properties = lenovo_yt3_hideep_ts_props,\n};\n\nstatic const struct x86_i2c_client_info lenovo_yt3_i2c_clients[] __initconst = {\n\t{\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq27500\",\n\t\t\t.addr = 0x55,\n\t\t\t.dev_name = \"bq27500_0\",\n\t\t\t.swnode = &fg_bq25890_supply_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C1\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq25892\",\n\t\t\t.addr = 0x6b,\n\t\t\t.dev_name = \"bq25892_0\",\n\t\t\t.swnode = &lenovo_yt3_bq25892_0_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C1\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FF:01\",\n\t\t\t.index = 5,\n\t\t\t.trigger = ACPI_EDGE_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_LOW,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"bq27500\",\n\t\t\t.addr = 0x55,\n\t\t\t.dev_name = \"bq27500_1\",\n\t\t\t.swnode = &fg_bq25890_1_supply_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C2\",\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"hideep_ts\",\n\t\t\t.addr = 0x6c,\n\t\t\t.dev_name = \"hideep_ts\",\n\t\t\t.swnode = &lenovo_yt3_hideep_ts_node,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C6\",\n\t\t.irq_data = {\n\t\t\t.type = X86_ACPI_IRQ_TYPE_GPIOINT,\n\t\t\t.chip = \"INT33FF:03\",\n\t\t\t.index = 77,\n\t\t\t.trigger = ACPI_LEVEL_SENSITIVE,\n\t\t\t.polarity = ACPI_ACTIVE_LOW,\n\t\t},\n\t}, {\n\t\t \n\t\t.board_info = {\n\t\t\t.type = \"lp8557\",\n\t\t\t.addr = 0x2c,\n\t\t\t.dev_name = \"lp8557\",\n\t\t\t.platform_data = &lenovo_lp8557_pdata,\n\t\t},\n\t\t.adapter_path = \"\\\\_SB_.PCI0.I2C1\",\n\t}\n};\n\nstatic int __init lenovo_yt3_init(void)\n{\n\tstruct gpio_desc *gpiod;\n\tint ret;\n\n\t \n\n\t \n\tret = x86_android_tablet_get_gpiod(\"INT33FF:02\", 22, &gpiod);\n\tif (ret < 0)\n\t\treturn ret;\n\n\t \n\tgpiod_set_value(gpiod, 0);\n\n\t \n\tret = x86_android_tablet_get_gpiod(\"INT33FF:03\", 19, &gpiod);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tgpiod_set_value(gpiod, 0);\n\n\t \n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0x9b, 0x02, 0xff);\n\tintel_soc_pmic_exec_mipi_pmic_seq_element(0x6e, 0xa0, 0x02, 0xff);\n\n\treturn 0;\n}\n\nstatic struct gpiod_lookup_table lenovo_yt3_hideep_gpios = {\n\t.dev_id = \"i2c-hideep_ts\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"INT33FF:00\", 7, \"reset\", GPIO_ACTIVE_LOW),\n\t\t{ }\n\t},\n};\n\nstatic struct gpiod_lookup_table * const lenovo_yt3_gpios[] = {\n\t&lenovo_yt3_hideep_gpios,\n\tNULL\n};\n\nconst struct x86_dev_info lenovo_yt3_info __initconst = {\n\t.i2c_client_info = lenovo_yt3_i2c_clients,\n\t.i2c_client_count = ARRAY_SIZE(lenovo_yt3_i2c_clients),\n\t.gpiod_lookup_tables = lenovo_yt3_gpios,\n\t.init = lenovo_yt3_init,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}