{
  "module_name": "dcdbas.h",
  "hash_id": "773dc3b3aedca08f01bf2bbc71a8cfd12385a23243b3eab0624fc4afdf711427",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/dell/dcdbas.h",
  "human_readable_source": " \n \n\n#ifndef _DCDBAS_H_\n#define _DCDBAS_H_\n\n#include <linux/device.h>\n#include <linux/sysfs.h>\n#include <linux/types.h>\n\n#define MAX_SMI_DATA_BUF_SIZE\t\t\t(256 * 1024)\n\n#define HC_ACTION_NONE\t\t\t\t(0)\n#define HC_ACTION_HOST_CONTROL_POWEROFF\t\tBIT(1)\n#define HC_ACTION_HOST_CONTROL_POWERCYCLE\tBIT(2)\n\n#define HC_SMITYPE_NONE\t\t\t\t(0)\n#define HC_SMITYPE_TYPE1\t\t\t(1)\n#define HC_SMITYPE_TYPE2\t\t\t(2)\n#define HC_SMITYPE_TYPE3\t\t\t(3)\n\n#define ESM_APM_CMD\t\t\t\t(0x0A0)\n#define ESM_APM_POWER_CYCLE\t\t\t(0x10)\n#define ESM_STATUS_CMD_UNSUCCESSFUL\t\t(-1)\n\n#define CMOS_BASE_PORT\t\t\t\t(0x070)\n#define CMOS_PAGE1_INDEX_PORT\t\t\t(0)\n#define CMOS_PAGE1_DATA_PORT\t\t\t(1)\n#define CMOS_PAGE2_INDEX_PORT_PIIX4\t\t(2)\n#define CMOS_PAGE2_DATA_PORT_PIIX4\t\t(3)\n#define PE1400_APM_CONTROL_PORT\t\t\t(0x0B0)\n#define PCAT_APM_CONTROL_PORT\t\t\t(0x0B2)\n#define PCAT_APM_STATUS_PORT\t\t\t(0x0B3)\n#define PE1300_CMOS_CMD_STRUCT_PTR\t\t(0x38)\n#define PE1400_CMOS_CMD_STRUCT_PTR\t\t(0x70)\n\n#define MAX_SYSMGMT_SHORTCMD_PARMBUF_LEN\t(14)\n#define MAX_SYSMGMT_LONGCMD_SGENTRY_NUM\t\t(16)\n\n#define TIMEOUT_USEC_SHORT_SEMA_BLOCKING\t(10000)\n#define EXPIRED_TIMER\t\t\t\t(0)\n\n#define SMI_CMD_MAGIC\t\t\t\t(0x534D4931)\n#define SMM_EPS_SIG\t\t\t\t\"$SCB\"\n\n#define DCDBAS_DEV_ATTR_RW(_name) \\\n\tDEVICE_ATTR(_name,0600,_name##_show,_name##_store);\n\n#define DCDBAS_DEV_ATTR_RO(_name) \\\n\tDEVICE_ATTR(_name,0400,_name##_show,NULL);\n\n#define DCDBAS_DEV_ATTR_WO(_name) \\\n\tDEVICE_ATTR(_name,0200,NULL,_name##_store);\n\n#define DCDBAS_BIN_ATTR_RW(_name) \\\nstruct bin_attribute bin_attr_##_name = { \\\n\t.attr =  { .name = __stringify(_name), \\\n\t\t   .mode = 0600 }, \\\n\t.read =  _name##_read, \\\n\t.write = _name##_write, \\\n}\n\nstruct smi_cmd {\n\t__u32 magic;\n\t__u32 ebx;\n\t__u32 ecx;\n\t__u16 command_address;\n\t__u8 command_code;\n\t__u8 reserved;\n\t__u8 command_buffer[1];\n} __attribute__ ((packed));\n\nstruct apm_cmd {\n\t__u8 command;\n\t__s8 status;\n\t__u16 reserved;\n\tunion {\n\t\tstruct {\n\t\t\t__u8 parm[MAX_SYSMGMT_SHORTCMD_PARMBUF_LEN];\n\t\t} __attribute__ ((packed)) shortreq;\n\n\t\tstruct {\n\t\t\t__u16 num_sg_entries;\n\t\t\tstruct {\n\t\t\t\t__u32 size;\n\t\t\t\t__u64 addr;\n\t\t\t} __attribute__ ((packed))\n\t\t\t    sglist[MAX_SYSMGMT_LONGCMD_SGENTRY_NUM];\n\t\t} __attribute__ ((packed)) longreq;\n\t} __attribute__ ((packed)) parameters;\n} __attribute__ ((packed));\n\nint dcdbas_smi_request(struct smi_cmd *smi_cmd);\n\nstruct smm_eps_table {\n\tchar smm_comm_buff_anchor[4];\n\tu8 length;\n\tu8 checksum;\n\tu8 version;\n\tu64 smm_comm_buff_addr;\n\tu64 num_of_4k_pages;\n} __packed;\n\nstruct smi_buffer {\n\tu8 *virt;\n\tunsigned long size;\n\tdma_addr_t dma;\n};\n\nint dcdbas_smi_alloc(struct smi_buffer *smi_buffer, unsigned long size);\nvoid dcdbas_smi_free(struct smi_buffer *smi_buffer);\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}