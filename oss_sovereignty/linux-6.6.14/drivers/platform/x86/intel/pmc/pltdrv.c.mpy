{
  "module_name": "pltdrv.c",
  "hash_id": "179358b993b5839a006e72c1cd31d9afe7fc5392307b78158e61142f4032e0a0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/intel/pmc/pltdrv.c",
  "human_readable_source": "\n\n \n\n#include <linux/acpi.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n\n#include <asm/cpu_device_id.h>\n#include <asm/intel-family.h>\n\n#include <xen/xen.h>\n\nstatic void intel_pmc_core_release(struct device *dev)\n{\n\tkfree(dev);\n}\n\nstatic struct platform_device *pmc_core_device;\n\n \nstatic const struct x86_cpu_id intel_pmc_core_platform_ids[] = {\n\tX86_MATCH_INTEL_FAM6_MODEL(SKYLAKE_L,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(SKYLAKE,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(KABYLAKE_L,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(KABYLAKE,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(CANNONLAKE_L,\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(ICELAKE_L,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(COMETLAKE,\t\t&pmc_core_device),\n\tX86_MATCH_INTEL_FAM6_MODEL(COMETLAKE_L,\t\t&pmc_core_device),\n\t{}\n};\nMODULE_DEVICE_TABLE(x86cpu, intel_pmc_core_platform_ids);\n\nstatic int __init pmc_core_platform_init(void)\n{\n\tint retval;\n\n\t \n\tif (acpi_dev_present(\"INT33A1\", NULL, -1))\n\t\treturn -ENODEV;\n\n\t \n\tif (cpu_feature_enabled(X86_FEATURE_HYPERVISOR) && !xen_initial_domain())\n\t\treturn -ENODEV;\n\n\tif (!x86_match_cpu(intel_pmc_core_platform_ids))\n\t\treturn -ENODEV;\n\n\tpmc_core_device = kzalloc(sizeof(*pmc_core_device), GFP_KERNEL);\n\tif (!pmc_core_device)\n\t\treturn -ENOMEM;\n\n\tpmc_core_device->name = \"intel_pmc_core\";\n\tpmc_core_device->dev.release = intel_pmc_core_release;\n\n\tretval = platform_device_register(pmc_core_device);\n\tif (retval)\n\t\tplatform_device_put(pmc_core_device);\n\n\treturn retval;\n}\n\nstatic void __exit pmc_core_platform_exit(void)\n{\n\tplatform_device_unregister(pmc_core_device);\n}\n\nmodule_init(pmc_core_platform_init);\nmodule_exit(pmc_core_platform_exit);\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}