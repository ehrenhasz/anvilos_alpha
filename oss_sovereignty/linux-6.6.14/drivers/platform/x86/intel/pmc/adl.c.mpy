{
  "module_name": "adl.c",
  "hash_id": "989a4d2362e5806ae1031278fd9a4afd33df7e871840ea1e9a2b760573edd0bd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/intel/pmc/adl.c",
  "human_readable_source": "\n \n\n#include \"core.h\"\n\n \nconst struct pmc_bit_map adl_pfear_map[] = {\n\t{\"SPI/eSPI\",\t\tBIT(2)},\n\t{\"XHCI\",\t\tBIT(3)},\n\t{\"SPA\",\t\t\tBIT(4)},\n\t{\"SPB\",\t\t\tBIT(5)},\n\t{\"SPC\",\t\t\tBIT(6)},\n\t{\"GBE\",\t\t\tBIT(7)},\n\n\t{\"SATA\",\t\tBIT(0)},\n\t{\"HDA_PGD0\",\t\tBIT(1)},\n\t{\"HDA_PGD1\",\t\tBIT(2)},\n\t{\"HDA_PGD2\",\t\tBIT(3)},\n\t{\"HDA_PGD3\",\t\tBIT(4)},\n\t{\"SPD\",\t\t\tBIT(5)},\n\t{\"LPSS\",\t\tBIT(6)},\n\n\t{\"SMB\",\t\t\tBIT(0)},\n\t{\"ISH\",\t\t\tBIT(1)},\n\t{\"ITH\",\t\t\tBIT(3)},\n\n\t{\"XDCI\",\t\tBIT(1)},\n\t{\"DCI\",\t\t\tBIT(2)},\n\t{\"CSE\",\t\t\tBIT(3)},\n\t{\"CSME_KVM\",\t\tBIT(4)},\n\t{\"CSME_PMT\",\t\tBIT(5)},\n\t{\"CSME_CLINK\",\t\tBIT(6)},\n\t{\"CSME_PTIO\",\t\tBIT(7)},\n\n\t{\"CSME_USBR\",\t\tBIT(0)},\n\t{\"CSME_SUSRAM\",\t\tBIT(1)},\n\t{\"CSME_SMT1\",\t\tBIT(2)},\n\t{\"CSME_SMS2\",\t\tBIT(4)},\n\t{\"CSME_SMS1\",\t\tBIT(5)},\n\t{\"CSME_RTC\",\t\tBIT(6)},\n\t{\"CSME_PSF\",\t\tBIT(7)},\n\n\t{\"CNVI\",\t\tBIT(3)},\n\t{\"HDA_PGD4\",\t\tBIT(2)},\n\t{\"HDA_PGD5\",\t\tBIT(3)},\n\t{\"HDA_PGD6\",\t\tBIT(4)},\n\t{}\n};\n\nconst struct pmc_bit_map *ext_adl_pfear_map[] = {\n\t \n\tadl_pfear_map,\n\tNULL\n};\n\nconst struct pmc_bit_map adl_ltr_show_map[] = {\n\t{\"SOUTHPORT_A\",\t\tCNP_PMC_LTR_SPA},\n\t{\"SOUTHPORT_B\",\t\tCNP_PMC_LTR_SPB},\n\t{\"SATA\",\t\tCNP_PMC_LTR_SATA},\n\t{\"GIGABIT_ETHERNET\",\tCNP_PMC_LTR_GBE},\n\t{\"XHCI\",\t\tCNP_PMC_LTR_XHCI},\n\t{\"SOUTHPORT_F\",\t\tADL_PMC_LTR_SPF},\n\t{\"ME\",\t\t\tCNP_PMC_LTR_ME},\n\t \n\t{\"SATA1\",\t\tCNP_PMC_LTR_EVA},\n\t{\"SOUTHPORT_C\",\t\tCNP_PMC_LTR_SPC},\n\t{\"HD_AUDIO\",\t\tCNP_PMC_LTR_AZ},\n\t{\"CNV\",\t\t\tCNP_PMC_LTR_CNV},\n\t{\"LPSS\",\t\tCNP_PMC_LTR_LPSS},\n\t{\"SOUTHPORT_D\",\t\tCNP_PMC_LTR_SPD},\n\t{\"SOUTHPORT_E\",\t\tCNP_PMC_LTR_SPE},\n\t{\"SATA2\",\t\tCNP_PMC_LTR_CAM},\n\t{\"ESPI\",\t\tCNP_PMC_LTR_ESPI},\n\t{\"SCC\",\t\t\tCNP_PMC_LTR_SCC},\n\t{\"ISH\",\t\t\tCNP_PMC_LTR_ISH},\n\t{\"UFSX2\",\t\tCNP_PMC_LTR_UFSX2},\n\t{\"EMMC\",\t\tCNP_PMC_LTR_EMMC},\n\t \n\t{\"WIGIG\",\t\tICL_PMC_LTR_WIGIG},\n\t{\"THC0\",\t\tTGL_PMC_LTR_THC0},\n\t{\"THC1\",\t\tTGL_PMC_LTR_THC1},\n\t{\"SOUTHPORT_G\",\t\tCNP_PMC_LTR_RESERVED},\n\n\t \n\t{\"CURRENT_PLATFORM\",\tCNP_PMC_LTR_CUR_PLT},\n\t{\"AGGREGATED_SYSTEM\",\tCNP_PMC_LTR_CUR_ASLT},\n\t{}\n};\n\nconst struct pmc_bit_map adl_clocksource_status_map[] = {\n\t{\"CLKPART1_OFF_STS\",\t\t\tBIT(0)},\n\t{\"CLKPART2_OFF_STS\",\t\t\tBIT(1)},\n\t{\"CLKPART3_OFF_STS\",\t\t\tBIT(2)},\n\t{\"CLKPART4_OFF_STS\",\t\t\tBIT(3)},\n\t{\"CLKPART5_OFF_STS\",\t\t\tBIT(4)},\n\t{\"CLKPART6_OFF_STS\",\t\t\tBIT(5)},\n\t{\"CLKPART7_OFF_STS\",\t\t\tBIT(6)},\n\t{\"CLKPART8_OFF_STS\",\t\t\tBIT(7)},\n\t{\"PCIE0PLL_OFF_STS\",\t\t\tBIT(10)},\n\t{\"PCIE1PLL_OFF_STS\",\t\t\tBIT(11)},\n\t{\"PCIE2PLL_OFF_STS\",\t\t\tBIT(12)},\n\t{\"PCIE3PLL_OFF_STS\",\t\t\tBIT(13)},\n\t{\"PCIE4PLL_OFF_STS\",\t\t\tBIT(14)},\n\t{\"PCIE5PLL_OFF_STS\",\t\t\tBIT(15)},\n\t{\"PCIE6PLL_OFF_STS\",\t\t\tBIT(16)},\n\t{\"USB2PLL_OFF_STS\",\t\t\tBIT(18)},\n\t{\"OCPLL_OFF_STS\",\t\t\tBIT(22)},\n\t{\"AUDIOPLL_OFF_STS\",\t\t\tBIT(23)},\n\t{\"GBEPLL_OFF_STS\",\t\t\tBIT(24)},\n\t{\"Fast_XTAL_Osc_OFF_STS\",\t\tBIT(25)},\n\t{\"AC_Ring_Osc_OFF_STS\",\t\t\tBIT(26)},\n\t{\"MC_Ring_Osc_OFF_STS\",\t\t\tBIT(27)},\n\t{\"SATAPLL_OFF_STS\",\t\t\tBIT(29)},\n\t{\"USB3PLL_OFF_STS\",\t\t\tBIT(31)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_power_gating_status_0_map[] = {\n\t{\"PMC_PGD0_PG_STS\",\t\t\tBIT(0)},\n\t{\"DMI_PGD0_PG_STS\",\t\t\tBIT(1)},\n\t{\"ESPISPI_PGD0_PG_STS\",\t\t\tBIT(2)},\n\t{\"XHCI_PGD0_PG_STS\",\t\t\tBIT(3)},\n\t{\"SPA_PGD0_PG_STS\",\t\t\tBIT(4)},\n\t{\"SPB_PGD0_PG_STS\",\t\t\tBIT(5)},\n\t{\"SPC_PGD0_PG_STS\",\t\t\tBIT(6)},\n\t{\"GBE_PGD0_PG_STS\",\t\t\tBIT(7)},\n\t{\"SATA_PGD0_PG_STS\",\t\t\tBIT(8)},\n\t{\"DSP_PGD0_PG_STS\",\t\t\tBIT(9)},\n\t{\"DSP_PGD1_PG_STS\",\t\t\tBIT(10)},\n\t{\"DSP_PGD2_PG_STS\",\t\t\tBIT(11)},\n\t{\"DSP_PGD3_PG_STS\",\t\t\tBIT(12)},\n\t{\"SPD_PGD0_PG_STS\",\t\t\tBIT(13)},\n\t{\"LPSS_PGD0_PG_STS\",\t\t\tBIT(14)},\n\t{\"SMB_PGD0_PG_STS\",\t\t\tBIT(16)},\n\t{\"ISH_PGD0_PG_STS\",\t\t\tBIT(17)},\n\t{\"NPK_PGD0_PG_STS\",\t\t\tBIT(19)},\n\t{\"PECI_PGD0_PG_STS\",\t\t\tBIT(21)},\n\t{\"XDCI_PGD0_PG_STS\",\t\t\tBIT(25)},\n\t{\"EXI_PGD0_PG_STS\",\t\t\tBIT(26)},\n\t{\"CSE_PGD0_PG_STS\",\t\t\tBIT(27)},\n\t{\"KVMCC_PGD0_PG_STS\",\t\t\tBIT(28)},\n\t{\"PMT_PGD0_PG_STS\",\t\t\tBIT(29)},\n\t{\"CLINK_PGD0_PG_STS\",\t\t\tBIT(30)},\n\t{\"PTIO_PGD0_PG_STS\",\t\t\tBIT(31)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_power_gating_status_1_map[] = {\n\t{\"USBR0_PGD0_PG_STS\",\t\t\tBIT(0)},\n\t{\"SMT1_PGD0_PG_STS\",\t\t\tBIT(2)},\n\t{\"CSMERTC_PGD0_PG_STS\",\t\t\tBIT(6)},\n\t{\"CSMEPSF_PGD0_PG_STS\",\t\t\tBIT(7)},\n\t{\"CNVI_PGD0_PG_STS\",\t\t\tBIT(19)},\n\t{\"DSP_PGD4_PG_STS\",\t\t\tBIT(26)},\n\t{\"SPG_PGD0_PG_STS\",\t\t\tBIT(27)},\n\t{\"SPE_PGD0_PG_STS\",\t\t\tBIT(28)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_power_gating_status_2_map[] = {\n\t{\"THC0_PGD0_PG_STS\",\t\t\tBIT(7)},\n\t{\"THC1_PGD0_PG_STS\",\t\t\tBIT(8)},\n\t{\"SPF_PGD0_PG_STS\",\t\t\tBIT(14)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_d3_status_0_map[] = {\n\t{\"ISH_D3_STS\",\t\t\t\tBIT(2)},\n\t{\"LPSS_D3_STS\",\t\t\t\tBIT(3)},\n\t{\"XDCI_D3_STS\",\t\t\t\tBIT(4)},\n\t{\"XHCI_D3_STS\",\t\t\t\tBIT(5)},\n\t{\"SPA_D3_STS\",\t\t\t\tBIT(12)},\n\t{\"SPB_D3_STS\",\t\t\t\tBIT(13)},\n\t{\"SPC_D3_STS\",\t\t\t\tBIT(14)},\n\t{\"SPD_D3_STS\",\t\t\t\tBIT(15)},\n\t{\"SPE_D3_STS\",\t\t\t\tBIT(16)},\n\t{\"DSP_D3_STS\",\t\t\t\tBIT(19)},\n\t{\"SATA_D3_STS\",\t\t\t\tBIT(20)},\n\t{\"DMI_D3_STS\",\t\t\t\tBIT(22)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_d3_status_1_map[] = {\n\t{\"GBE_D3_STS\",\t\t\t\tBIT(19)},\n\t{\"CNVI_D3_STS\",\t\t\t\tBIT(27)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_d3_status_2_map[] = {\n\t{\"CSMERTC_D3_STS\",\t\t\tBIT(1)},\n\t{\"CSE_D3_STS\",\t\t\t\tBIT(4)},\n\t{\"KVMCC_D3_STS\",\t\t\tBIT(5)},\n\t{\"USBR0_D3_STS\",\t\t\tBIT(6)},\n\t{\"SMT1_D3_STS\",\t\t\t\tBIT(8)},\n\t{\"PTIO_D3_STS\",\t\t\t\tBIT(16)},\n\t{\"PMT_D3_STS\",\t\t\t\tBIT(17)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_d3_status_3_map[] = {\n\t{\"THC0_D3_STS\",\t\t\t\tBIT(14)},\n\t{\"THC1_D3_STS\",\t\t\t\tBIT(15)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_vnn_req_status_0_map[] = {\n\t{\"ISH_VNN_REQ_STS\",\t\t\tBIT(2)},\n\t{\"ESPISPI_VNN_REQ_STS\",\t\t\tBIT(18)},\n\t{\"DSP_VNN_REQ_STS\",\t\t\tBIT(19)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_vnn_req_status_1_map[] = {\n\t{\"NPK_VNN_REQ_STS\",\t\t\tBIT(4)},\n\t{\"EXI_VNN_REQ_STS\",\t\t\tBIT(9)},\n\t{\"GBE_VNN_REQ_STS\",\t\t\tBIT(19)},\n\t{\"SMB_VNN_REQ_STS\",\t\t\tBIT(25)},\n\t{\"CNVI_VNN_REQ_STS\",\t\t\tBIT(27)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_vnn_req_status_2_map[] = {\n\t{\"CSMERTC_VNN_REQ_STS\",\t\t\tBIT(1)},\n\t{\"CSE_VNN_REQ_STS\",\t\t\tBIT(4)},\n\t{\"SMT1_VNN_REQ_STS\",\t\t\tBIT(8)},\n\t{\"CLINK_VNN_REQ_STS\",\t\t\tBIT(14)},\n\t{\"GPIOCOM4_VNN_REQ_STS\",\t\tBIT(20)},\n\t{\"GPIOCOM3_VNN_REQ_STS\",\t\tBIT(21)},\n\t{\"GPIOCOM2_VNN_REQ_STS\",\t\tBIT(22)},\n\t{\"GPIOCOM1_VNN_REQ_STS\",\t\tBIT(23)},\n\t{\"GPIOCOM0_VNN_REQ_STS\",\t\tBIT(24)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_vnn_req_status_3_map[] = {\n\t{\"GPIOCOM5_VNN_REQ_STS\",\t\tBIT(11)},\n\t{}\n};\n\nconst struct pmc_bit_map adl_vnn_misc_status_map[] = {\n\t{\"CPU_C10_REQ_STS\",\t\t\tBIT(0)},\n\t{\"PCIe_LPM_En_REQ_STS\",\t\t\tBIT(3)},\n\t{\"ITH_REQ_STS\",\t\t\t\tBIT(5)},\n\t{\"CNVI_REQ_STS\",\t\t\tBIT(6)},\n\t{\"ISH_REQ_STS\",\t\t\t\tBIT(7)},\n\t{\"USB2_SUS_PG_Sys_REQ_STS\",\t\tBIT(10)},\n\t{\"PCIe_Clk_REQ_STS\",\t\t\tBIT(12)},\n\t{\"MPHY_Core_DL_REQ_STS\",\t\tBIT(16)},\n\t{\"Break-even_En_REQ_STS\",\t\tBIT(17)},\n\t{\"MPHY_SUS_REQ_STS\",\t\t\tBIT(22)},\n\t{\"xDCI_attached_REQ_STS\",\t\tBIT(24)},\n\t{}\n};\n\nconst struct pmc_bit_map *adl_lpm_maps[] = {\n\tadl_clocksource_status_map,\n\tadl_power_gating_status_0_map,\n\tadl_power_gating_status_1_map,\n\tadl_power_gating_status_2_map,\n\tadl_d3_status_0_map,\n\tadl_d3_status_1_map,\n\tadl_d3_status_2_map,\n\tadl_d3_status_3_map,\n\tadl_vnn_req_status_0_map,\n\tadl_vnn_req_status_1_map,\n\tadl_vnn_req_status_2_map,\n\tadl_vnn_req_status_3_map,\n\tadl_vnn_misc_status_map,\n\ttgl_signal_status_map,\n\tNULL\n};\n\nconst struct pmc_reg_map adl_reg_map = {\n\t.pfear_sts = ext_adl_pfear_map,\n\t.slp_s0_offset = ADL_PMC_SLP_S0_RES_COUNTER_OFFSET,\n\t.slp_s0_res_counter_step = TGL_PMC_SLP_S0_RES_COUNTER_STEP,\n\t.ltr_show_sts = adl_ltr_show_map,\n\t.msr_sts = msr_map,\n\t.ltr_ignore_offset = CNP_PMC_LTR_IGNORE_OFFSET,\n\t.regmap_length = CNP_PMC_MMIO_REG_LEN,\n\t.ppfear0_offset = CNP_PMC_HOST_PPFEAR0A,\n\t.ppfear_buckets = CNP_PPFEAR_NUM_ENTRIES,\n\t.pm_cfg_offset = CNP_PMC_PM_CFG_OFFSET,\n\t.pm_read_disable_bit = CNP_PMC_READ_DISABLE_BIT,\n\t.ltr_ignore_max = ADL_NUM_IP_IGN_ALLOWED,\n\t.lpm_num_modes = ADL_LPM_NUM_MODES,\n\t.lpm_num_maps = ADL_LPM_NUM_MAPS,\n\t.lpm_res_counter_step_x2 = TGL_PMC_LPM_RES_COUNTER_STEP_X2,\n\t.etr3_offset = ETR3_OFFSET,\n\t.lpm_sts_latch_en_offset = ADL_LPM_STATUS_LATCH_EN_OFFSET,\n\t.lpm_priority_offset = ADL_LPM_PRI_OFFSET,\n\t.lpm_en_offset = ADL_LPM_EN_OFFSET,\n\t.lpm_residency_offset = ADL_LPM_RESIDENCY_OFFSET,\n\t.lpm_sts = adl_lpm_maps,\n\t.lpm_status_offset = ADL_LPM_STATUS_OFFSET,\n\t.lpm_live_status_offset = ADL_LPM_LIVE_STATUS_OFFSET,\n};\n\nint adl_core_init(struct pmc_dev *pmcdev)\n{\n\tstruct pmc *pmc = pmcdev->pmcs[PMC_IDX_MAIN];\n\tint ret;\n\n\tpmcdev->suspend = cnl_suspend;\n\tpmcdev->resume = cnl_resume;\n\n\tpmc->map = &adl_reg_map;\n\tret = get_primary_reg_base(pmc);\n\tif (ret)\n\t\treturn ret;\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}