{
  "module_name": "tps68470_board_data.c",
  "hash_id": "621071a41492c141261b18e812a8d7bc263695f18fc768c73431e34e95a62206",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/intel/int3472/tps68470_board_data.c",
  "human_readable_source": "\n \n\n#include <linux/dmi.h>\n#include <linux/gpio/machine.h>\n#include <linux/platform_data/tps68470.h>\n#include <linux/regulator/machine.h>\n#include \"tps68470.h\"\n\nstatic struct regulator_consumer_supply int347a_core_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"dvdd\", \"i2c-INT347A:00\"),\n};\n\nstatic struct regulator_consumer_supply int347a_ana_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"avdd\", \"i2c-INT347A:00\"),\n};\n\nstatic struct regulator_consumer_supply int347a_vcm_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"vdd\", \"i2c-INT347A:00-VCM\"),\n};\n\nstatic struct regulator_consumer_supply int347a_vsio_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"dovdd\", \"i2c-INT347A:00\"),\n\tREGULATOR_SUPPLY(\"vsio\", \"i2c-INT347A:00-VCM\"),\n\tREGULATOR_SUPPLY(\"vddd\", \"i2c-INT347E:00\"),\n};\n\nstatic struct regulator_consumer_supply int347a_aux1_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"vdda\", \"i2c-INT347E:00\"),\n};\n\nstatic struct regulator_consumer_supply int347a_aux2_consumer_supplies[] = {\n\tREGULATOR_SUPPLY(\"vdddo\", \"i2c-INT347E:00\"),\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_core_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 1200000,\n\t\t.max_uV = 1200000,\n\t\t.apply_uV = true,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_core_consumer_supplies),\n\t.consumer_supplies = int347a_core_consumer_supplies,\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_ana_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 2815200,\n\t\t.max_uV = 2815200,\n\t\t.apply_uV = true,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_ana_consumer_supplies),\n\t.consumer_supplies = int347a_ana_consumer_supplies,\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_vcm_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 2815200,\n\t\t.max_uV = 2815200,\n\t\t.apply_uV = true,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_vcm_consumer_supplies),\n\t.consumer_supplies = int347a_vcm_consumer_supplies,\n};\n\n \nstatic const struct regulator_init_data surface_go_tps68470_vio_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 1800600,\n\t\t.max_uV = 1800600,\n\t\t.apply_uV = true,\n\t\t.always_on = true,\n\t},\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_vsio_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 1800600,\n\t\t.max_uV = 1800600,\n\t\t.apply_uV = true,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_vsio_consumer_supplies),\n\t.consumer_supplies = int347a_vsio_consumer_supplies,\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_aux1_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 2815200,\n\t\t.max_uV = 2815200,\n\t\t.apply_uV = 1,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_aux1_consumer_supplies),\n\t.consumer_supplies = int347a_aux1_consumer_supplies,\n};\n\nstatic const struct regulator_init_data surface_go_tps68470_aux2_reg_init_data = {\n\t.constraints = {\n\t\t.min_uV = 1800600,\n\t\t.max_uV = 1800600,\n\t\t.apply_uV = 1,\n\t\t.valid_ops_mask = REGULATOR_CHANGE_STATUS,\n\t},\n\t.num_consumer_supplies = ARRAY_SIZE(int347a_aux2_consumer_supplies),\n\t.consumer_supplies = int347a_aux2_consumer_supplies,\n};\n\nstatic const struct tps68470_regulator_platform_data surface_go_tps68470_pdata = {\n\t.reg_init_data = {\n\t\t[TPS68470_CORE] = &surface_go_tps68470_core_reg_init_data,\n\t\t[TPS68470_ANA]  = &surface_go_tps68470_ana_reg_init_data,\n\t\t[TPS68470_VCM]  = &surface_go_tps68470_vcm_reg_init_data,\n\t\t[TPS68470_VIO] = &surface_go_tps68470_vio_reg_init_data,\n\t\t[TPS68470_VSIO] = &surface_go_tps68470_vsio_reg_init_data,\n\t\t[TPS68470_AUX1] = &surface_go_tps68470_aux1_reg_init_data,\n\t\t[TPS68470_AUX2] = &surface_go_tps68470_aux2_reg_init_data,\n\t},\n};\n\nstatic struct gpiod_lookup_table surface_go_int347a_gpios = {\n\t.dev_id = \"i2c-INT347A:00\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"tps68470-gpio\", 9, \"reset\", GPIO_ACTIVE_LOW),\n\t\tGPIO_LOOKUP(\"tps68470-gpio\", 7, \"powerdown\", GPIO_ACTIVE_LOW),\n\t\t{ }\n\t}\n};\n\nstatic struct gpiod_lookup_table surface_go_int347e_gpios = {\n\t.dev_id = \"i2c-INT347E:00\",\n\t.table = {\n\t\tGPIO_LOOKUP(\"tps68470-gpio\", 5, \"enable\", GPIO_ACTIVE_HIGH),\n\t\t{ }\n\t}\n};\n\nstatic const struct int3472_tps68470_board_data surface_go_tps68470_board_data = {\n\t.dev_name = \"i2c-INT3472:05\",\n\t.tps68470_regulator_pdata = &surface_go_tps68470_pdata,\n\t.n_gpiod_lookups = 2,\n\t.tps68470_gpio_lookup_tables = {\n\t\t&surface_go_int347a_gpios,\n\t\t&surface_go_int347e_gpios,\n\t},\n};\n\nstatic const struct int3472_tps68470_board_data surface_go3_tps68470_board_data = {\n\t.dev_name = \"i2c-INT3472:01\",\n\t.tps68470_regulator_pdata = &surface_go_tps68470_pdata,\n\t.n_gpiod_lookups = 2,\n\t.tps68470_gpio_lookup_tables = {\n\t\t&surface_go_int347a_gpios,\n\t\t&surface_go_int347e_gpios,\n\t},\n};\n\nstatic const struct dmi_system_id int3472_tps68470_board_data_table[] = {\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Microsoft Corporation\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Surface Go\"),\n\t\t},\n\t\t.driver_data = (void *)&surface_go_tps68470_board_data,\n\t},\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Microsoft Corporation\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Surface Go 2\"),\n\t\t},\n\t\t.driver_data = (void *)&surface_go_tps68470_board_data,\n\t},\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"Microsoft Corporation\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"Surface Go 3\"),\n\t\t},\n\t\t.driver_data = (void *)&surface_go3_tps68470_board_data,\n\t},\n\t{ }\n};\n\nconst struct int3472_tps68470_board_data *int3472_tps68470_get_board_data(const char *dev_name)\n{\n\tconst struct int3472_tps68470_board_data *board_data;\n\tconst struct dmi_system_id *match;\n\n\tfor (match = dmi_first_match(int3472_tps68470_board_data_table);\n\t     match;\n\t     match = dmi_first_match(match + 1)) {\n\t\tboard_data = match->driver_data;\n\t\tif (strcmp(board_data->dev_name, dev_name) == 0)\n\t\t\treturn board_data;\n\t}\n\n\treturn NULL;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}