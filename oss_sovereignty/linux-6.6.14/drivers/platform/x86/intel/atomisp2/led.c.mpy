{
  "module_name": "led.c",
  "hash_id": "85af32df502556068230736cbcc18e4d4a19e529629d8fc195425c075028846b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/platform/x86/intel/atomisp2/led.c",
  "human_readable_source": "\n \n\n#include <linux/dmi.h>\n#include <linux/gpio/consumer.h>\n#include <linux/gpio/machine.h>\n#include <linux/leds.h>\n#include <linux/module.h>\n#include <linux/mod_devicetable.h>\n#include <linux/platform_device.h>\n#include <linux/workqueue.h>\n\n \n#define DEV_NAME\t\t\"leds-gpio\"\n\nstatic const struct gpio_led atomisp2_leds[] = {\n\t{\n\t\t.name = \"atomisp2::camera\",\n\t\t.default_state  = LEDS_GPIO_DEFSTATE_OFF,\n\t},\n};\n\nstatic const struct gpio_led_platform_data atomisp2_leds_pdata = {\n\t.num_leds\t= ARRAY_SIZE(atomisp2_leds),\n\t.leds\t\t= atomisp2_leds,\n};\n\nstatic struct gpiod_lookup_table asus_t100ta_lookup = {\n\t.dev_id = DEV_NAME,\n\t.table = {\n\t\tGPIO_LOOKUP_IDX(\"INT33FC:02\", 8, NULL, 0, GPIO_ACTIVE_HIGH),\n\t\t{ }\n\t}\n};\n\nstatic struct gpiod_lookup_table asus_t100chi_lookup = {\n\t.dev_id = DEV_NAME,\n\t.table = {\n\t\tGPIO_LOOKUP_IDX(\"INT33FC:01\", 24, NULL, 0, GPIO_ACTIVE_HIGH),\n\t\t{ }\n\t}\n};\n\nstatic const struct dmi_system_id atomisp2_led_systems[] __initconst = {\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"ASUSTeK COMPUTER INC.\"),\n\t\t\t \n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"T100TA\"),\n\t\t},\n\t\t.driver_data = &asus_t100ta_lookup,\n\t},\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"ASUSTeK COMPUTER INC.\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"T200TA\"),\n\t\t},\n\t\t.driver_data = &asus_t100ta_lookup,\n\t},\n\t{\n\t\t.matches = {\n\t\t\tDMI_EXACT_MATCH(DMI_SYS_VENDOR, \"ASUSTeK COMPUTER INC.\"),\n\t\t\tDMI_EXACT_MATCH(DMI_PRODUCT_NAME, \"T100CHI\"),\n\t\t},\n\t\t.driver_data = &asus_t100chi_lookup,\n\t},\n\t{}  \n};\nMODULE_DEVICE_TABLE(dmi, atomisp2_led_systems);\n\nstatic struct gpiod_lookup_table *gpio_lookup;\nstatic struct platform_device *pdev;\n\nstatic int __init atomisp2_led_init(void)\n{\n\tconst struct dmi_system_id *system;\n\n\tsystem = dmi_first_match(atomisp2_led_systems);\n\tif (!system)\n\t\treturn -ENODEV;\n\n\tgpio_lookup = system->driver_data;\n\tgpiod_add_lookup_table(gpio_lookup);\n\n\tpdev = platform_device_register_resndata(NULL,\n\t\t\t\t\t\t DEV_NAME, PLATFORM_DEVID_NONE,\n\t\t\t\t\t\t NULL, 0, &atomisp2_leds_pdata,\n\t\t\t\t\t\t sizeof(atomisp2_leds_pdata));\n\tif (IS_ERR(pdev))\n\t\tgpiod_remove_lookup_table(gpio_lookup);\n\n\treturn PTR_ERR_OR_ZERO(pdev);\n}\n\nstatic void __exit atomisp2_led_cleanup(void)\n{\n\tplatform_device_unregister(pdev);\n\tgpiod_remove_lookup_table(gpio_lookup);\n}\n\nmodule_init(atomisp2_led_init);\nmodule_exit(atomisp2_led_cleanup);\n\n \nMODULE_SOFTDEP(\"pre: asus_nb_wmi\");\nMODULE_AUTHOR(\"Hans de Goede <hdegoede@redhat.com\");\nMODULE_DESCRIPTION(\"Intel atomisp2 camera LED driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}