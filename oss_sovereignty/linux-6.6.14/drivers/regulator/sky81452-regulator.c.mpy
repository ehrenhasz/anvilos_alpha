{
  "module_name": "sky81452-regulator.c",
  "hash_id": "ae6a28dc375d30354d9f56fab0c0d06a89aef00f08ec164c1d04ec3767296f12",
  "original_prompt": "Ingested from linux-6.6.14/drivers/regulator/sky81452-regulator.c",
  "human_readable_source": "\n\n\n\n\n\n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/platform_device.h>\n#include <linux/init.h>\n#include <linux/err.h>\n#include <linux/of.h>\n#include <linux/regulator/driver.h>\n#include <linux/regulator/of_regulator.h>\n\n \n#define SKY81452_REG1\t0x01\n#define SKY81452_REG3\t0x03\n\n \n#define SKY81452_LEN\t0x40\n#define SKY81452_LOUT\t0x1F\n\nstatic const struct regulator_ops sky81452_reg_ops = {\n\t.list_voltage = regulator_list_voltage_linear_range,\n\t.map_voltage = regulator_map_voltage_linear_range,\n\t.get_voltage_sel = regulator_get_voltage_sel_regmap,\n\t.set_voltage_sel = regulator_set_voltage_sel_regmap,\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n};\n\nstatic const struct linear_range sky81452_reg_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(4500000, 0, 14, 250000),\n\tREGULATOR_LINEAR_RANGE(9000000, 15, 31, 1000000),\n};\n\nstatic const struct regulator_desc sky81452_reg = {\n\t.name = \"LOUT\",\n\t.of_match = of_match_ptr(\"lout\"),\n\t.regulators_node = of_match_ptr(\"regulator\"),\n\t.ops = &sky81452_reg_ops,\n\t.type = REGULATOR_VOLTAGE,\n\t.owner = THIS_MODULE,\n\t.n_voltages = SKY81452_LOUT + 1,\n\t.linear_ranges = sky81452_reg_ranges,\n\t.n_linear_ranges = ARRAY_SIZE(sky81452_reg_ranges),\n\t.vsel_reg = SKY81452_REG3,\n\t.vsel_mask = SKY81452_LOUT,\n\t.enable_reg = SKY81452_REG1,\n\t.enable_mask = SKY81452_LEN,\n};\n\nstatic int sky81452_reg_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tconst struct regulator_init_data *init_data = dev_get_platdata(dev);\n\tstruct regulator_config config = { };\n\tstruct regulator_dev *rdev;\n\n\tconfig.dev = dev->parent;\n\tconfig.init_data = init_data;\n\tconfig.of_node = dev->of_node;\n\tconfig.regmap = dev_get_drvdata(dev->parent);\n\n\trdev = devm_regulator_register(dev, &sky81452_reg, &config);\n\tif (IS_ERR(rdev)) {\n\t\tdev_err(dev, \"failed to register. err=%ld\\n\", PTR_ERR(rdev));\n\t\treturn PTR_ERR(rdev);\n\t}\n\n\tplatform_set_drvdata(pdev, rdev);\n\n\treturn 0;\n}\n\nstatic struct platform_driver sky81452_reg_driver = {\n\t.driver = {\n\t\t.name = \"sky81452-regulator\",\n\t\t.probe_type = PROBE_PREFER_ASYNCHRONOUS,\n\t},\n\t.probe = sky81452_reg_probe,\n};\n\nmodule_platform_driver(sky81452_reg_driver);\n\nMODULE_DESCRIPTION(\"Skyworks SKY81452 Regulator driver\");\nMODULE_AUTHOR(\"Gyungoh Yoo <jack.yoo@skyworksinc.com>\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}