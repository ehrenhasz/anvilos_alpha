{
  "module_name": "dummy.c",
  "hash_id": "06ab9e977193e0ae816580924eee97dcee2ad3090e17bce9593c19f8f799ad57",
  "original_prompt": "Ingested from linux-6.6.14/drivers/regulator/dummy.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/export.h>\n#include <linux/platform_device.h>\n#include <linux/regulator/driver.h>\n#include <linux/regulator/machine.h>\n\n#include \"dummy.h\"\n\nstruct regulator_dev *dummy_regulator_rdev;\n\nstatic const struct regulator_init_data dummy_initdata = {\n\t.constraints = {\n\t\t.always_on = 1,\n\t},\n};\n\nstatic const struct regulator_ops dummy_ops;\n\nstatic const struct regulator_desc dummy_desc = {\n\t.name = \"regulator-dummy\",\n\t.id = -1,\n\t.type = REGULATOR_VOLTAGE,\n\t.owner = THIS_MODULE,\n\t.ops = &dummy_ops,\n};\n\nstatic int dummy_regulator_probe(struct platform_device *pdev)\n{\n\tstruct regulator_config config = { };\n\tint ret;\n\n\tconfig.dev = &pdev->dev;\n\tconfig.init_data = &dummy_initdata;\n\n\tdummy_regulator_rdev = devm_regulator_register(&pdev->dev, &dummy_desc,\n\t\t\t\t\t\t       &config);\n\tif (IS_ERR(dummy_regulator_rdev)) {\n\t\tret = PTR_ERR(dummy_regulator_rdev);\n\t\tpr_err(\"Failed to register regulator: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic struct platform_driver dummy_regulator_driver = {\n\t.probe\t\t= dummy_regulator_probe,\n\t.driver\t\t= {\n\t\t.name\t\t= \"reg-dummy\",\n\t\t.probe_type\t= PROBE_PREFER_ASYNCHRONOUS,\n\t},\n};\n\nstatic struct platform_device *dummy_pdev;\n\nvoid __init regulator_dummy_init(void)\n{\n\tint ret;\n\n\tdummy_pdev = platform_device_alloc(\"reg-dummy\", -1);\n\tif (!dummy_pdev) {\n\t\tpr_err(\"Failed to allocate dummy regulator device\\n\");\n\t\treturn;\n\t}\n\n\tret = platform_device_add(dummy_pdev);\n\tif (ret != 0) {\n\t\tpr_err(\"Failed to register dummy regulator device: %d\\n\", ret);\n\t\tplatform_device_put(dummy_pdev);\n\t\treturn;\n\t}\n\n\tret = platform_driver_register(&dummy_regulator_driver);\n\tif (ret != 0) {\n\t\tpr_err(\"Failed to register dummy regulator driver: %d\\n\", ret);\n\t\tplatform_device_unregister(dummy_pdev);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}