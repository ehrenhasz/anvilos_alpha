{
  "module_name": "mt6359-regulator.c",
  "hash_id": "bd3f31f45f603f97c59dd37c88ca87962c593bbc4b06702ccbfd8fbed07fb8ba",
  "original_prompt": "Ingested from linux-6.6.14/drivers/regulator/mt6359-regulator.c",
  "human_readable_source": "\n\n\n\n#include <linux/platform_device.h>\n#include <linux/mfd/mt6359/registers.h>\n#include <linux/mfd/mt6359p/registers.h>\n#include <linux/mfd/mt6397/core.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/regmap.h>\n#include <linux/regulator/driver.h>\n#include <linux/regulator/machine.h>\n#include <linux/regulator/mt6359-regulator.h>\n#include <linux/regulator/of_regulator.h>\n\n#define MT6359_BUCK_MODE_AUTO\t\t0\n#define MT6359_BUCK_MODE_FORCE_PWM\t1\n#define MT6359_BUCK_MODE_NORMAL\t\t0\n#define MT6359_BUCK_MODE_LP\t\t2\n\n \nstruct mt6359_regulator_info {\n\tstruct regulator_desc desc;\n\tu32 status_reg;\n\tu32 qi;\n\tu32 modeset_reg;\n\tu32 modeset_mask;\n\tu32 lp_mode_reg;\n\tu32 lp_mode_mask;\n};\n\n#define MT6359_BUCK(match, _name, min, max, step,\t\t\\\n\t_enable_reg, _status_reg,\t\t\t\t\\\n\t_vsel_reg, _vsel_mask,\t\t\t\t\t\\\n\t_lp_mode_reg, _lp_mode_shift,\t\t\t\t\\\n\t_modeset_reg, _modeset_shift)\t\t\t\t\\\n[MT6359_ID_##_name] = {\t\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\t\\\n\t\t.of_match = of_match_ptr(match),\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &mt6359_volt_linear_ops,\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\t\\\n\t\t.id = MT6359_ID_##_name,\t\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\t\\\n\t\t.uV_step = (step),\t\t\t\t\\\n\t\t.n_voltages = ((max) - (min)) / (step) + 1,\t\\\n\t\t.min_uV = (min),\t\t\t\t\\\n\t\t.vsel_reg = _vsel_reg,\t\t\t\t\\\n\t\t.vsel_mask = _vsel_mask,\t\t\t\\\n\t\t.enable_reg = _enable_reg,\t\t\t\\\n\t\t.enable_mask = BIT(0),\t\t\t\t\\\n\t\t.of_map_mode = mt6359_map_mode,\t\t\t\\\n\t},\t\t\t\t\t\t\t\\\n\t.status_reg = _status_reg,\t\t\t\t\\\n\t.qi = BIT(0),\t\t\t\t\t\t\\\n\t.lp_mode_reg = _lp_mode_reg,\t\t\t\t\\\n\t.lp_mode_mask = BIT(_lp_mode_shift),\t\t\t\\\n\t.modeset_reg = _modeset_reg,\t\t\t\t\\\n\t.modeset_mask = BIT(_modeset_shift),\t\t\t\\\n}\n\n#define MT6359_LDO_LINEAR(match, _name, min, max, step,\t\t\\\n\t_enable_reg, _status_reg, _vsel_reg, _vsel_mask)\t\\\n[MT6359_ID_##_name] = {\t\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\t\\\n\t\t.of_match = of_match_ptr(match),\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &mt6359_volt_linear_ops,\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\t\\\n\t\t.id = MT6359_ID_##_name,\t\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\t\\\n\t\t.uV_step = (step),\t\t\t\t\\\n\t\t.n_voltages = ((max) - (min)) / (step) + 1,\t\\\n\t\t.min_uV = (min),\t\t\t\t\\\n\t\t.vsel_reg = _vsel_reg,\t\t\t\t\\\n\t\t.vsel_mask = _vsel_mask,\t\t\t\\\n\t\t.enable_reg = _enable_reg,\t\t\t\\\n\t\t.enable_mask = BIT(0),\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\\\n\t.status_reg = _status_reg,\t\t\t\t\\\n\t.qi = BIT(0),\t\t\t\t\t\t\\\n}\n\n#define MT6359_LDO(match, _name, _volt_table,\t\t\t\\\n\t_enable_reg, _enable_mask, _status_reg,\t\t\t\\\n\t_vsel_reg, _vsel_mask, _en_delay)\t\t\t\\\n[MT6359_ID_##_name] = {\t\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\t\\\n\t\t.of_match = of_match_ptr(match),\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &mt6359_volt_table_ops,\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\t\\\n\t\t.id = MT6359_ID_##_name,\t\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\t\\\n\t\t.n_voltages = ARRAY_SIZE(_volt_table),\t\t\\\n\t\t.volt_table = _volt_table,\t\t\t\\\n\t\t.vsel_reg = _vsel_reg,\t\t\t\t\\\n\t\t.vsel_mask = _vsel_mask,\t\t\t\\\n\t\t.enable_reg = _enable_reg,\t\t\t\\\n\t\t.enable_mask = BIT(_enable_mask),\t\t\\\n\t\t.enable_time = _en_delay,\t\t\t\\\n\t},\t\t\t\t\t\t\t\\\n\t.status_reg = _status_reg,\t\t\t\t\\\n\t.qi = BIT(0),\t\t\t\t\t\t\\\n}\n\n#define MT6359_REG_FIXED(match, _name, _enable_reg,\t\\\n\t_status_reg, _fixed_volt)\t\t\t\\\n[MT6359_ID_##_name] = {\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\\\n\t\t.of_match = of_match_ptr(match),\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &mt6359_volt_fixed_ops,\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\\\n\t\t.id = MT6359_ID_##_name,\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\\\n\t\t.n_voltages = 1,\t\t\t\\\n\t\t.enable_reg = _enable_reg,\t\t\\\n\t\t.enable_mask = BIT(0),\t\t\t\\\n\t\t.fixed_uV = (_fixed_volt),\t\t\\\n\t},\t\t\t\t\t\t\\\n\t.status_reg = _status_reg,\t\t\t\\\n\t.qi = BIT(0),\t\t\t\t\t\\\n}\n\n#define MT6359P_LDO1(match, _name, _ops, _volt_table,\t\\\n\t_enable_reg, _enable_mask, _status_reg,\t\t\\\n\t_vsel_reg, _vsel_mask)\t\t\t\t\\\n[MT6359_ID_##_name] = {\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\\\n\t\t.of_match = of_match_ptr(match),\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &_ops,\t\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\\\n\t\t.id = MT6359_ID_##_name,\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\\\n\t\t.n_voltages = ARRAY_SIZE(_volt_table),\t\\\n\t\t.volt_table = _volt_table,\t\t\\\n\t\t.vsel_reg = _vsel_reg,\t\t\t\\\n\t\t.vsel_mask = _vsel_mask,\t\t\\\n\t\t.enable_reg = _enable_reg,\t\t\\\n\t\t.enable_mask = BIT(_enable_mask),\t\\\n\t},\t\t\t\t\t\t\\\n\t.status_reg = _status_reg,\t\t\t\\\n\t.qi = BIT(0),\t\t\t\t\t\\\n}\n\nstatic const unsigned int vsim1_voltages[] = {\n\t0, 0, 0, 1700000, 1800000, 0, 0, 0, 2700000, 0, 0, 3000000, 3100000,\n};\n\nstatic const unsigned int vibr_voltages[] = {\n\t1200000, 1300000, 1500000, 0, 1800000, 2000000, 0, 0, 2700000, 2800000,\n\t0, 3000000, 0, 3300000,\n};\n\nstatic const unsigned int vrf12_voltages[] = {\n\t0, 0, 1100000, 1200000,\t1300000,\n};\n\nstatic const unsigned int volt18_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1700000, 1800000, 1900000,\n};\n\nstatic const unsigned int vcn13_voltages[] = {\n\t900000, 1000000, 0, 1200000, 1300000,\n};\n\nstatic const unsigned int vcn33_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 0, 2800000, 0, 0, 0, 3300000, 3400000, 3500000,\n};\n\nstatic const unsigned int vefuse_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1700000, 1800000, 1900000, 2000000,\n};\n\nstatic const unsigned int vxo22_voltages[] = {\n\t1800000, 0, 0, 0, 2200000,\n};\n\nstatic const unsigned int vrfck_voltages[] = {\n\t0, 0, 1500000, 0, 0, 0, 0, 1600000, 0, 0, 0, 0, 1700000,\n};\n\nstatic const unsigned int vrfck_voltages_1[] = {\n\t1240000, 1600000,\n};\n\nstatic const unsigned int vio28_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 0, 2800000, 2900000, 3000000, 3100000, 3300000,\n};\n\nstatic const unsigned int vemc_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2900000, 3000000, 0, 3300000,\n};\n\nstatic const unsigned int vemc_voltages_1[] = {\n\t0, 0, 0, 0, 0, 0, 0, 0, 2500000, 2800000, 2900000, 3000000, 3100000,\n\t3300000,\n};\n\nstatic const unsigned int va12_voltages[] = {\n\t0, 0, 0, 0, 0, 0, 1200000, 1300000,\n};\n\nstatic const unsigned int va09_voltages[] = {\n\t0, 0, 800000, 900000, 0, 0, 1200000,\n};\n\nstatic const unsigned int vrf18_voltages[] = {\n\t0, 0, 0, 0, 0, 1700000, 1800000, 1810000,\n};\n\nstatic const unsigned int vbbck_voltages[] = {\n\t0, 0, 0, 0, 1100000, 0, 0, 0, 1150000, 0, 0, 0, 1200000,\n};\n\nstatic const unsigned int vsim2_voltages[] = {\n\t0, 0, 0, 1700000, 1800000, 0, 0, 0, 2700000, 0, 0, 3000000, 3100000,\n};\n\nstatic inline unsigned int mt6359_map_mode(unsigned int mode)\n{\n\tswitch (mode) {\n\tcase MT6359_BUCK_MODE_NORMAL:\n\t\treturn REGULATOR_MODE_NORMAL;\n\tcase MT6359_BUCK_MODE_FORCE_PWM:\n\t\treturn REGULATOR_MODE_FAST;\n\tcase MT6359_BUCK_MODE_LP:\n\t\treturn REGULATOR_MODE_IDLE;\n\tdefault:\n\t\treturn REGULATOR_MODE_INVALID;\n\t}\n}\n\nstatic int mt6359_get_status(struct regulator_dev *rdev)\n{\n\tint ret;\n\tu32 regval;\n\tstruct mt6359_regulator_info *info = rdev_get_drvdata(rdev);\n\n\tret = regmap_read(rdev->regmap, info->status_reg, &regval);\n\tif (ret != 0) {\n\t\tdev_err(&rdev->dev, \"Failed to get enable reg: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tif (regval & info->qi)\n\t\treturn REGULATOR_STATUS_ON;\n\telse\n\t\treturn REGULATOR_STATUS_OFF;\n}\n\nstatic unsigned int mt6359_regulator_get_mode(struct regulator_dev *rdev)\n{\n\tstruct mt6359_regulator_info *info = rdev_get_drvdata(rdev);\n\tint ret, regval;\n\n\tret = regmap_read(rdev->regmap, info->modeset_reg, &regval);\n\tif (ret != 0) {\n\t\tdev_err(&rdev->dev,\n\t\t\t\"Failed to get mt6359 buck mode: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tregval &= info->modeset_mask;\n\tregval >>= ffs(info->modeset_mask) - 1;\n\n\tif (regval == MT6359_BUCK_MODE_FORCE_PWM)\n\t\treturn REGULATOR_MODE_FAST;\n\n\tret = regmap_read(rdev->regmap, info->lp_mode_reg, &regval);\n\tif (ret != 0) {\n\t\tdev_err(&rdev->dev,\n\t\t\t\"Failed to get mt6359 buck lp mode: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tif (regval & info->lp_mode_mask)\n\t\treturn REGULATOR_MODE_IDLE;\n\telse\n\t\treturn REGULATOR_MODE_NORMAL;\n}\n\nstatic int mt6359_regulator_set_mode(struct regulator_dev *rdev,\n\t\t\t\t     unsigned int mode)\n{\n\tstruct mt6359_regulator_info *info = rdev_get_drvdata(rdev);\n\tint ret = 0, val;\n\tint curr_mode;\n\n\tcurr_mode = mt6359_regulator_get_mode(rdev);\n\tswitch (mode) {\n\tcase REGULATOR_MODE_FAST:\n\t\tval = MT6359_BUCK_MODE_FORCE_PWM;\n\t\tval <<= ffs(info->modeset_mask) - 1;\n\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t info->modeset_reg,\n\t\t\t\t\t info->modeset_mask,\n\t\t\t\t\t val);\n\t\tbreak;\n\tcase REGULATOR_MODE_NORMAL:\n\t\tif (curr_mode == REGULATOR_MODE_FAST) {\n\t\t\tval = MT6359_BUCK_MODE_AUTO;\n\t\t\tval <<= ffs(info->modeset_mask) - 1;\n\t\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t\t info->modeset_reg,\n\t\t\t\t\t\t info->modeset_mask,\n\t\t\t\t\t\t val);\n\t\t} else if (curr_mode == REGULATOR_MODE_IDLE) {\n\t\t\tval = MT6359_BUCK_MODE_NORMAL;\n\t\t\tval <<= ffs(info->lp_mode_mask) - 1;\n\t\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t\t info->lp_mode_reg,\n\t\t\t\t\t\t info->lp_mode_mask,\n\t\t\t\t\t\t val);\n\t\t\tudelay(100);\n\t\t}\n\t\tbreak;\n\tcase REGULATOR_MODE_IDLE:\n\t\tval = MT6359_BUCK_MODE_LP >> 1;\n\t\tval <<= ffs(info->lp_mode_mask) - 1;\n\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t info->lp_mode_reg,\n\t\t\t\t\t info->lp_mode_mask,\n\t\t\t\t\t val);\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tif (ret != 0) {\n\t\tdev_err(&rdev->dev,\n\t\t\t\"Failed to set mt6359 buck mode: %d\\n\", ret);\n\t}\n\n\treturn ret;\n}\n\nstatic int mt6359p_vemc_set_voltage_sel(struct regulator_dev *rdev,\n\t\t\t\t\tu32 sel)\n{\n\tstruct mt6359_regulator_info *info = rdev_get_drvdata(rdev);\n\tint ret;\n\tu32 val = 0;\n\n\tsel <<= ffs(info->desc.vsel_mask) - 1;\n\tret = regmap_write(rdev->regmap, MT6359P_TMA_KEY_ADDR, TMA_KEY);\n\tif (ret)\n\t\treturn ret;\n\n\tret = regmap_read(rdev->regmap, MT6359P_VM_MODE_ADDR, &val);\n\tif (ret)\n\t\treturn ret;\n\n\tswitch (val) {\n\tcase 0:\n\t\t \n\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t info->desc.vsel_reg,\n\t\t\t\t\t info->desc.vsel_mask, sel);\n\t\tbreak;\n\tcase 1:\n\t\t \n\t\tret = regmap_update_bits(rdev->regmap,\n\t\t\t\t\t info->desc.vsel_reg + 0x2,\n\t\t\t\t\t info->desc.vsel_mask, sel);\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tif (ret)\n\t\treturn ret;\n\n\tret = regmap_write(rdev->regmap, MT6359P_TMA_KEY_ADDR, 0);\n\treturn ret;\n}\n\nstatic int mt6359p_vemc_get_voltage_sel(struct regulator_dev *rdev)\n{\n\tstruct mt6359_regulator_info *info = rdev_get_drvdata(rdev);\n\tint ret;\n\tu32 val = 0;\n\n\tret = regmap_read(rdev->regmap, MT6359P_VM_MODE_ADDR, &val);\n\tif (ret)\n\t\treturn ret;\n\tswitch (val) {\n\tcase 0:\n\t\t \n\t\tret = regmap_read(rdev->regmap,\n\t\t\t\t  info->desc.vsel_reg, &val);\n\t\tbreak;\n\tcase 1:\n\t\t \n\t\tret = regmap_read(rdev->regmap,\n\t\t\t\t  info->desc.vsel_reg + 0x2, &val);\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\tif (ret)\n\t\treturn ret;\n\n\tval &= info->desc.vsel_mask;\n\tval >>= ffs(info->desc.vsel_mask) - 1;\n\n\treturn val;\n}\n\nstatic const struct regulator_ops mt6359_volt_linear_ops = {\n\t.list_voltage = regulator_list_voltage_linear,\n\t.map_voltage = regulator_map_voltage_linear,\n\t.set_voltage_sel = regulator_set_voltage_sel_regmap,\n\t.get_voltage_sel = regulator_get_voltage_sel_regmap,\n\t.set_voltage_time_sel = regulator_set_voltage_time_sel,\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n\t.get_status = mt6359_get_status,\n\t.set_mode = mt6359_regulator_set_mode,\n\t.get_mode = mt6359_regulator_get_mode,\n};\n\nstatic const struct regulator_ops mt6359_volt_table_ops = {\n\t.list_voltage = regulator_list_voltage_table,\n\t.map_voltage = regulator_map_voltage_iterate,\n\t.set_voltage_sel = regulator_set_voltage_sel_regmap,\n\t.get_voltage_sel = regulator_get_voltage_sel_regmap,\n\t.set_voltage_time_sel = regulator_set_voltage_time_sel,\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n\t.get_status = mt6359_get_status,\n};\n\nstatic const struct regulator_ops mt6359_volt_fixed_ops = {\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n\t.get_status = mt6359_get_status,\n};\n\nstatic const struct regulator_ops mt6359p_vemc_ops = {\n\t.list_voltage = regulator_list_voltage_table,\n\t.map_voltage = regulator_map_voltage_iterate,\n\t.set_voltage_sel = mt6359p_vemc_set_voltage_sel,\n\t.get_voltage_sel = mt6359p_vemc_get_voltage_sel,\n\t.set_voltage_time_sel = regulator_set_voltage_time_sel,\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n\t.get_status = mt6359_get_status,\n};\n\n \nstatic struct mt6359_regulator_info mt6359_regulators[] = {\n\tMT6359_BUCK(\"buck_vs1\", VS1, 800000, 2200000, 12500,\n\t\t    MT6359_RG_BUCK_VS1_EN_ADDR,\n\t\t    MT6359_DA_VS1_EN_ADDR, MT6359_RG_BUCK_VS1_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VS1_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VS1_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VS1_LP_ADDR, MT6359_RG_BUCK_VS1_LP_SHIFT,\n\t\t    MT6359_RG_VS1_FPWM_ADDR, MT6359_RG_VS1_FPWM_SHIFT),\n\tMT6359_BUCK(\"buck_vgpu11\", VGPU11, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VGPU11_EN_ADDR,\n\t\t    MT6359_DA_VGPU11_EN_ADDR, MT6359_RG_BUCK_VGPU11_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VGPU11_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VGPU11_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_SHIFT,\n\t\t    MT6359_RG_VGPU11_FCCM_ADDR, MT6359_RG_VGPU11_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vmodem\", VMODEM, 400000, 1100000, 6250,\n\t\t    MT6359_RG_BUCK_VMODEM_EN_ADDR,\n\t\t    MT6359_DA_VMODEM_EN_ADDR, MT6359_RG_BUCK_VMODEM_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VMODEM_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VMODEM_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VMODEM_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VMODEM_LP_SHIFT,\n\t\t    MT6359_RG_VMODEM_FCCM_ADDR, MT6359_RG_VMODEM_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vpu\", VPU, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPU_EN_ADDR,\n\t\t    MT6359_DA_VPU_EN_ADDR, MT6359_RG_BUCK_VPU_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPU_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPU_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPU_LP_ADDR, MT6359_RG_BUCK_VPU_LP_SHIFT,\n\t\t    MT6359_RG_VPU_FCCM_ADDR, MT6359_RG_VPU_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vcore\", VCORE, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VCORE_EN_ADDR,\n\t\t    MT6359_DA_VCORE_EN_ADDR, MT6359_RG_BUCK_VCORE_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VCORE_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VCORE_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VCORE_LP_ADDR, MT6359_RG_BUCK_VCORE_LP_SHIFT,\n\t\t    MT6359_RG_VCORE_FCCM_ADDR, MT6359_RG_VCORE_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vs2\", VS2, 800000, 1600000, 12500,\n\t\t    MT6359_RG_BUCK_VS2_EN_ADDR,\n\t\t    MT6359_DA_VS2_EN_ADDR, MT6359_RG_BUCK_VS2_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VS2_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VS2_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VS2_LP_ADDR, MT6359_RG_BUCK_VS2_LP_SHIFT,\n\t\t    MT6359_RG_VS2_FPWM_ADDR, MT6359_RG_VS2_FPWM_SHIFT),\n\tMT6359_BUCK(\"buck_vpa\", VPA, 500000, 3650000, 50000,\n\t\t    MT6359_RG_BUCK_VPA_EN_ADDR,\n\t\t    MT6359_DA_VPA_EN_ADDR, MT6359_RG_BUCK_VPA_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPA_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPA_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPA_LP_ADDR, MT6359_RG_BUCK_VPA_LP_SHIFT,\n\t\t    MT6359_RG_VPA_MODESET_ADDR, MT6359_RG_VPA_MODESET_SHIFT),\n\tMT6359_BUCK(\"buck_vproc2\", VPROC2, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPROC2_EN_ADDR,\n\t\t    MT6359_DA_VPROC2_EN_ADDR, MT6359_RG_BUCK_VPROC2_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC2_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPROC2_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPROC2_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC2_LP_SHIFT,\n\t\t    MT6359_RG_VPROC2_FCCM_ADDR, MT6359_RG_VPROC2_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vproc1\", VPROC1, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPROC1_EN_ADDR,\n\t\t    MT6359_DA_VPROC1_EN_ADDR, MT6359_RG_BUCK_VPROC1_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC1_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPROC1_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPROC1_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC1_LP_SHIFT,\n\t\t    MT6359_RG_VPROC1_FCCM_ADDR, MT6359_RG_VPROC1_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vcore_sshub\", VCORE_SSHUB, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VCORE_SSHUB_EN_ADDR,\n\t\t    MT6359_DA_VCORE_EN_ADDR,\n\t\t    MT6359_RG_BUCK_VCORE_SSHUB_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VCORE_SSHUB_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VCORE_SSHUB_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VCORE_LP_ADDR, MT6359_RG_BUCK_VCORE_LP_SHIFT,\n\t\t    MT6359_RG_VCORE_FCCM_ADDR, MT6359_RG_VCORE_FCCM_SHIFT),\n\tMT6359_REG_FIXED(\"ldo_vaud18\", VAUD18, MT6359_RG_LDO_VAUD18_EN_ADDR,\n\t\t\t MT6359_DA_VAUD18_B_EN_ADDR, 1800000),\n\tMT6359_LDO(\"ldo_vsim1\", VSIM1, vsim1_voltages,\n\t\t   MT6359_RG_LDO_VSIM1_EN_ADDR, MT6359_RG_LDO_VSIM1_EN_SHIFT,\n\t\t   MT6359_DA_VSIM1_B_EN_ADDR, MT6359_RG_VSIM1_VOSEL_ADDR,\n\t\t   MT6359_RG_VSIM1_VOSEL_MASK << MT6359_RG_VSIM1_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO(\"ldo_vibr\", VIBR, vibr_voltages,\n\t\t   MT6359_RG_LDO_VIBR_EN_ADDR, MT6359_RG_LDO_VIBR_EN_SHIFT,\n\t\t   MT6359_DA_VIBR_B_EN_ADDR, MT6359_RG_VIBR_VOSEL_ADDR,\n\t\t   MT6359_RG_VIBR_VOSEL_MASK << MT6359_RG_VIBR_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vrf12\", VRF12, vrf12_voltages,\n\t\t   MT6359_RG_LDO_VRF12_EN_ADDR, MT6359_RG_LDO_VRF12_EN_SHIFT,\n\t\t   MT6359_DA_VRF12_B_EN_ADDR, MT6359_RG_VRF12_VOSEL_ADDR,\n\t\t   MT6359_RG_VRF12_VOSEL_MASK << MT6359_RG_VRF12_VOSEL_SHIFT,\n\t\t   120),\n\tMT6359_REG_FIXED(\"ldo_vusb\", VUSB, MT6359_RG_LDO_VUSB_EN_0_ADDR,\n\t\t\t MT6359_DA_VUSB_B_EN_ADDR, 3000000),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_proc2\", VSRAM_PROC2, 500000, 1293750, 6250,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_EN_ADDR,\n\t\t\t  MT6359_DA_VSRAM_PROC2_B_EN_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vio18\", VIO18, volt18_voltages,\n\t\t   MT6359_RG_LDO_VIO18_EN_ADDR, MT6359_RG_LDO_VIO18_EN_SHIFT,\n\t\t   MT6359_DA_VIO18_B_EN_ADDR, MT6359_RG_VIO18_VOSEL_ADDR,\n\t\t   MT6359_RG_VIO18_VOSEL_MASK << MT6359_RG_VIO18_VOSEL_SHIFT,\n\t\t   960),\n\tMT6359_LDO(\"ldo_vcamio\", VCAMIO, volt18_voltages,\n\t\t   MT6359_RG_LDO_VCAMIO_EN_ADDR, MT6359_RG_LDO_VCAMIO_EN_SHIFT,\n\t\t   MT6359_DA_VCAMIO_B_EN_ADDR, MT6359_RG_VCAMIO_VOSEL_ADDR,\n\t\t   MT6359_RG_VCAMIO_VOSEL_MASK << MT6359_RG_VCAMIO_VOSEL_SHIFT,\n\t\t   1290),\n\tMT6359_REG_FIXED(\"ldo_vcn18\", VCN18, MT6359_RG_LDO_VCN18_EN_ADDR,\n\t\t\t MT6359_DA_VCN18_B_EN_ADDR, 1800000),\n\tMT6359_REG_FIXED(\"ldo_vfe28\", VFE28, MT6359_RG_LDO_VFE28_EN_ADDR,\n\t\t\t MT6359_DA_VFE28_B_EN_ADDR, 2800000),\n\tMT6359_LDO(\"ldo_vcn13\", VCN13, vcn13_voltages,\n\t\t   MT6359_RG_LDO_VCN13_EN_ADDR, MT6359_RG_LDO_VCN13_EN_SHIFT,\n\t\t   MT6359_DA_VCN13_B_EN_ADDR, MT6359_RG_VCN13_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN13_VOSEL_MASK << MT6359_RG_VCN13_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vcn33_1_bt\", VCN33_1_BT, vcn33_voltages,\n\t\t   MT6359_RG_LDO_VCN33_1_EN_0_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_1_EN_0_SHIFT,\n\t\t   MT6359_DA_VCN33_1_B_EN_ADDR, MT6359_RG_VCN33_1_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_1_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_1_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_vcn33_1_wifi\", VCN33_1_WIFI, vcn33_voltages,\n\t\t   MT6359_RG_LDO_VCN33_1_EN_1_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_1_EN_1_SHIFT,\n\t\t   MT6359_DA_VCN33_1_B_EN_ADDR, MT6359_RG_VCN33_1_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_1_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_1_VOSEL_SHIFT, 240),\n\tMT6359_REG_FIXED(\"ldo_vaux18\", VAUX18, MT6359_RG_LDO_VAUX18_EN_ADDR,\n\t\t\t MT6359_DA_VAUX18_B_EN_ADDR, 1800000),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_others\", VSRAM_OTHERS, 500000, 1293750,\n\t\t\t  6250,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_EN_ADDR,\n\t\t\t  MT6359_DA_VSRAM_OTHERS_B_EN_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vefuse\", VEFUSE, vefuse_voltages,\n\t\t   MT6359_RG_LDO_VEFUSE_EN_ADDR, MT6359_RG_LDO_VEFUSE_EN_SHIFT,\n\t\t   MT6359_DA_VEFUSE_B_EN_ADDR, MT6359_RG_VEFUSE_VOSEL_ADDR,\n\t\t   MT6359_RG_VEFUSE_VOSEL_MASK << MT6359_RG_VEFUSE_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vxo22\", VXO22, vxo22_voltages,\n\t\t   MT6359_RG_LDO_VXO22_EN_ADDR, MT6359_RG_LDO_VXO22_EN_SHIFT,\n\t\t   MT6359_DA_VXO22_B_EN_ADDR, MT6359_RG_VXO22_VOSEL_ADDR,\n\t\t   MT6359_RG_VXO22_VOSEL_MASK << MT6359_RG_VXO22_VOSEL_SHIFT,\n\t\t   120),\n\tMT6359_LDO(\"ldo_vrfck\", VRFCK, vrfck_voltages,\n\t\t   MT6359_RG_LDO_VRFCK_EN_ADDR, MT6359_RG_LDO_VRFCK_EN_SHIFT,\n\t\t   MT6359_DA_VRFCK_B_EN_ADDR, MT6359_RG_VRFCK_VOSEL_ADDR,\n\t\t   MT6359_RG_VRFCK_VOSEL_MASK << MT6359_RG_VRFCK_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_REG_FIXED(\"ldo_vbif28\", VBIF28, MT6359_RG_LDO_VBIF28_EN_ADDR,\n\t\t\t MT6359_DA_VBIF28_B_EN_ADDR, 2800000),\n\tMT6359_LDO(\"ldo_vio28\", VIO28, vio28_voltages,\n\t\t   MT6359_RG_LDO_VIO28_EN_ADDR, MT6359_RG_LDO_VIO28_EN_SHIFT,\n\t\t   MT6359_DA_VIO28_B_EN_ADDR, MT6359_RG_VIO28_VOSEL_ADDR,\n\t\t   MT6359_RG_VIO28_VOSEL_MASK << MT6359_RG_VIO28_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vemc\", VEMC, vemc_voltages,\n\t\t   MT6359_RG_LDO_VEMC_EN_ADDR, MT6359_RG_LDO_VEMC_EN_SHIFT,\n\t\t   MT6359_DA_VEMC_B_EN_ADDR, MT6359_RG_VEMC_VOSEL_ADDR,\n\t\t   MT6359_RG_VEMC_VOSEL_MASK << MT6359_RG_VEMC_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vcn33_2_bt\", VCN33_2_BT, vcn33_voltages,\n\t\t   MT6359_RG_LDO_VCN33_2_EN_0_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_2_EN_0_SHIFT,\n\t\t   MT6359_DA_VCN33_2_B_EN_ADDR, MT6359_RG_VCN33_2_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_2_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_2_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_vcn33_2_wifi\", VCN33_2_WIFI, vcn33_voltages,\n\t\t   MT6359_RG_LDO_VCN33_2_EN_1_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_2_EN_1_SHIFT,\n\t\t   MT6359_DA_VCN33_2_B_EN_ADDR, MT6359_RG_VCN33_2_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_2_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_2_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_va12\", VA12, va12_voltages,\n\t\t   MT6359_RG_LDO_VA12_EN_ADDR, MT6359_RG_LDO_VA12_EN_SHIFT,\n\t\t   MT6359_DA_VA12_B_EN_ADDR, MT6359_RG_VA12_VOSEL_ADDR,\n\t\t   MT6359_RG_VA12_VOSEL_MASK << MT6359_RG_VA12_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_va09\", VA09, va09_voltages,\n\t\t   MT6359_RG_LDO_VA09_EN_ADDR, MT6359_RG_LDO_VA09_EN_SHIFT,\n\t\t   MT6359_DA_VA09_B_EN_ADDR, MT6359_RG_VA09_VOSEL_ADDR,\n\t\t   MT6359_RG_VA09_VOSEL_MASK << MT6359_RG_VA09_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vrf18\", VRF18, vrf18_voltages,\n\t\t   MT6359_RG_LDO_VRF18_EN_ADDR, MT6359_RG_LDO_VRF18_EN_SHIFT,\n\t\t   MT6359_DA_VRF18_B_EN_ADDR, MT6359_RG_VRF18_VOSEL_ADDR,\n\t\t   MT6359_RG_VRF18_VOSEL_MASK << MT6359_RG_VRF18_VOSEL_SHIFT,\n\t\t   120),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_md\", VSRAM_MD, 500000, 1100000, 6250,\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_EN_ADDR,\n\t\t\t  MT6359_DA_VSRAM_MD_B_EN_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vufs\", VUFS, volt18_voltages,\n\t\t   MT6359_RG_LDO_VUFS_EN_ADDR, MT6359_RG_LDO_VUFS_EN_SHIFT,\n\t\t   MT6359_DA_VUFS_B_EN_ADDR, MT6359_RG_VUFS_VOSEL_ADDR,\n\t\t   MT6359_RG_VUFS_VOSEL_MASK << MT6359_RG_VUFS_VOSEL_SHIFT,\n\t\t   1920),\n\tMT6359_LDO(\"ldo_vm18\", VM18, volt18_voltages,\n\t\t   MT6359_RG_LDO_VM18_EN_ADDR, MT6359_RG_LDO_VM18_EN_SHIFT,\n\t\t   MT6359_DA_VM18_B_EN_ADDR, MT6359_RG_VM18_VOSEL_ADDR,\n\t\t   MT6359_RG_VM18_VOSEL_MASK << MT6359_RG_VM18_VOSEL_SHIFT,\n\t\t   1920),\n\tMT6359_LDO(\"ldo_vbbck\", VBBCK, vbbck_voltages,\n\t\t   MT6359_RG_LDO_VBBCK_EN_ADDR, MT6359_RG_LDO_VBBCK_EN_SHIFT,\n\t\t   MT6359_DA_VBBCK_B_EN_ADDR, MT6359_RG_VBBCK_VOSEL_ADDR,\n\t\t   MT6359_RG_VBBCK_VOSEL_MASK << MT6359_RG_VBBCK_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_proc1\", VSRAM_PROC1, 500000, 1293750, 6250,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_EN_ADDR,\n\t\t\t  MT6359_DA_VSRAM_PROC1_B_EN_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vsim2\", VSIM2, vsim2_voltages,\n\t\t   MT6359_RG_LDO_VSIM2_EN_ADDR, MT6359_RG_LDO_VSIM2_EN_SHIFT,\n\t\t   MT6359_DA_VSIM2_B_EN_ADDR, MT6359_RG_VSIM2_VOSEL_ADDR,\n\t\t   MT6359_RG_VSIM2_VOSEL_MASK << MT6359_RG_VSIM2_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_others_sshub\", VSRAM_OTHERS_SSHUB,\n\t\t\t  500000, 1293750, 6250,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_EN_ADDR,\n\t\t\t  MT6359_DA_VSRAM_OTHERS_B_EN_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_SHIFT),\n};\n\nstatic struct mt6359_regulator_info mt6359p_regulators[] = {\n\tMT6359_BUCK(\"buck_vs1\", VS1, 800000, 2200000, 12500,\n\t\t    MT6359_RG_BUCK_VS1_EN_ADDR,\n\t\t    MT6359_DA_VS1_EN_ADDR, MT6359_RG_BUCK_VS1_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VS1_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VS1_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VS1_LP_ADDR, MT6359_RG_BUCK_VS1_LP_SHIFT,\n\t\t    MT6359_RG_VS1_FPWM_ADDR, MT6359_RG_VS1_FPWM_SHIFT),\n\tMT6359_BUCK(\"buck_vgpu11\", VGPU11, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VGPU11_EN_ADDR,\n\t\t    MT6359_DA_VGPU11_EN_ADDR, MT6359P_RG_BUCK_VGPU11_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VGPU11_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VGPU11_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_SHIFT,\n\t\t    MT6359_RG_VGPU11_FCCM_ADDR, MT6359_RG_VGPU11_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vmodem\", VMODEM, 400000, 1100000, 6250,\n\t\t    MT6359_RG_BUCK_VMODEM_EN_ADDR,\n\t\t    MT6359_DA_VMODEM_EN_ADDR, MT6359_RG_BUCK_VMODEM_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VMODEM_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VMODEM_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VMODEM_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VMODEM_LP_SHIFT,\n\t\t    MT6359_RG_VMODEM_FCCM_ADDR, MT6359_RG_VMODEM_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vpu\", VPU, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPU_EN_ADDR,\n\t\t    MT6359_DA_VPU_EN_ADDR, MT6359_RG_BUCK_VPU_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPU_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPU_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPU_LP_ADDR, MT6359_RG_BUCK_VPU_LP_SHIFT,\n\t\t    MT6359_RG_VPU_FCCM_ADDR, MT6359_RG_VPU_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vcore\", VCORE, 506250, 1300000, 6250,\n\t\t    MT6359_RG_BUCK_VCORE_EN_ADDR,\n\t\t    MT6359_DA_VCORE_EN_ADDR, MT6359P_RG_BUCK_VCORE_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VCORE_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VCORE_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VCORE_LP_ADDR, MT6359_RG_BUCK_VCORE_LP_SHIFT,\n\t\t    MT6359_RG_VCORE_FCCM_ADDR, MT6359_RG_VCORE_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vs2\", VS2, 800000, 1600000, 12500,\n\t\t    MT6359_RG_BUCK_VS2_EN_ADDR,\n\t\t    MT6359_DA_VS2_EN_ADDR, MT6359_RG_BUCK_VS2_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VS2_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VS2_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VS2_LP_ADDR, MT6359_RG_BUCK_VS2_LP_SHIFT,\n\t\t    MT6359_RG_VS2_FPWM_ADDR, MT6359_RG_VS2_FPWM_SHIFT),\n\tMT6359_BUCK(\"buck_vpa\", VPA, 500000, 3650000, 50000,\n\t\t    MT6359_RG_BUCK_VPA_EN_ADDR,\n\t\t    MT6359_DA_VPA_EN_ADDR, MT6359_RG_BUCK_VPA_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPA_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPA_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPA_LP_ADDR, MT6359_RG_BUCK_VPA_LP_SHIFT,\n\t\t    MT6359_RG_VPA_MODESET_ADDR, MT6359_RG_VPA_MODESET_SHIFT),\n\tMT6359_BUCK(\"buck_vproc2\", VPROC2, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPROC2_EN_ADDR,\n\t\t    MT6359_DA_VPROC2_EN_ADDR, MT6359_RG_BUCK_VPROC2_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC2_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPROC2_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPROC2_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC2_LP_SHIFT,\n\t\t    MT6359_RG_VPROC2_FCCM_ADDR, MT6359_RG_VPROC2_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vproc1\", VPROC1, 400000, 1193750, 6250,\n\t\t    MT6359_RG_BUCK_VPROC1_EN_ADDR,\n\t\t    MT6359_DA_VPROC1_EN_ADDR, MT6359_RG_BUCK_VPROC1_VOSEL_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC1_VOSEL_MASK <<\n\t\t    MT6359_RG_BUCK_VPROC1_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VPROC1_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VPROC1_LP_SHIFT,\n\t\t    MT6359_RG_VPROC1_FCCM_ADDR, MT6359_RG_VPROC1_FCCM_SHIFT),\n\tMT6359_BUCK(\"buck_vgpu11_sshub\", VGPU11_SSHUB, 400000, 1193750, 6250,\n\t\t    MT6359P_RG_BUCK_VGPU11_SSHUB_EN_ADDR,\n\t\t    MT6359_DA_VGPU11_EN_ADDR,\n\t\t    MT6359P_RG_BUCK_VGPU11_SSHUB_VOSEL_ADDR,\n\t\t    MT6359P_RG_BUCK_VGPU11_SSHUB_VOSEL_MASK <<\n\t\t    MT6359P_RG_BUCK_VGPU11_SSHUB_VOSEL_SHIFT,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_ADDR,\n\t\t    MT6359_RG_BUCK_VGPU11_LP_SHIFT,\n\t\t    MT6359_RG_VGPU11_FCCM_ADDR, MT6359_RG_VGPU11_FCCM_SHIFT),\n\tMT6359_REG_FIXED(\"ldo_vaud18\", VAUD18, MT6359P_RG_LDO_VAUD18_EN_ADDR,\n\t\t\t MT6359P_DA_VAUD18_B_EN_ADDR, 1800000),\n\tMT6359_LDO(\"ldo_vsim1\", VSIM1, vsim1_voltages,\n\t\t   MT6359P_RG_LDO_VSIM1_EN_ADDR, MT6359P_RG_LDO_VSIM1_EN_SHIFT,\n\t\t   MT6359P_DA_VSIM1_B_EN_ADDR, MT6359P_RG_VSIM1_VOSEL_ADDR,\n\t\t   MT6359_RG_VSIM1_VOSEL_MASK << MT6359_RG_VSIM1_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO(\"ldo_vibr\", VIBR, vibr_voltages,\n\t\t   MT6359P_RG_LDO_VIBR_EN_ADDR, MT6359P_RG_LDO_VIBR_EN_SHIFT,\n\t\t   MT6359P_DA_VIBR_B_EN_ADDR, MT6359P_RG_VIBR_VOSEL_ADDR,\n\t\t   MT6359_RG_VIBR_VOSEL_MASK << MT6359_RG_VIBR_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vrf12\", VRF12, vrf12_voltages,\n\t\t   MT6359P_RG_LDO_VRF12_EN_ADDR, MT6359P_RG_LDO_VRF12_EN_SHIFT,\n\t\t   MT6359P_DA_VRF12_B_EN_ADDR, MT6359P_RG_VRF12_VOSEL_ADDR,\n\t\t   MT6359_RG_VRF12_VOSEL_MASK << MT6359_RG_VRF12_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_REG_FIXED(\"ldo_vusb\", VUSB, MT6359P_RG_LDO_VUSB_EN_0_ADDR,\n\t\t\t MT6359P_DA_VUSB_B_EN_ADDR, 3000000),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_proc2\", VSRAM_PROC2, 500000, 1293750, 6250,\n\t\t\t  MT6359P_RG_LDO_VSRAM_PROC2_EN_ADDR,\n\t\t\t  MT6359P_DA_VSRAM_PROC2_B_EN_ADDR,\n\t\t\t  MT6359P_RG_LDO_VSRAM_PROC2_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC2_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vio18\", VIO18, volt18_voltages,\n\t\t   MT6359P_RG_LDO_VIO18_EN_ADDR, MT6359P_RG_LDO_VIO18_EN_SHIFT,\n\t\t   MT6359P_DA_VIO18_B_EN_ADDR, MT6359P_RG_VIO18_VOSEL_ADDR,\n\t\t   MT6359_RG_VIO18_VOSEL_MASK << MT6359_RG_VIO18_VOSEL_SHIFT,\n\t\t   960),\n\tMT6359_LDO(\"ldo_vcamio\", VCAMIO, volt18_voltages,\n\t\t   MT6359P_RG_LDO_VCAMIO_EN_ADDR,\n\t\t   MT6359P_RG_LDO_VCAMIO_EN_SHIFT,\n\t\t   MT6359P_DA_VCAMIO_B_EN_ADDR, MT6359P_RG_VCAMIO_VOSEL_ADDR,\n\t\t   MT6359_RG_VCAMIO_VOSEL_MASK << MT6359_RG_VCAMIO_VOSEL_SHIFT,\n\t\t   1290),\n\tMT6359_REG_FIXED(\"ldo_vcn18\", VCN18, MT6359P_RG_LDO_VCN18_EN_ADDR,\n\t\t\t MT6359P_DA_VCN18_B_EN_ADDR, 1800000),\n\tMT6359_REG_FIXED(\"ldo_vfe28\", VFE28, MT6359P_RG_LDO_VFE28_EN_ADDR,\n\t\t\t MT6359P_DA_VFE28_B_EN_ADDR, 2800000),\n\tMT6359_LDO(\"ldo_vcn13\", VCN13, vcn13_voltages,\n\t\t   MT6359P_RG_LDO_VCN13_EN_ADDR, MT6359P_RG_LDO_VCN13_EN_SHIFT,\n\t\t   MT6359P_DA_VCN13_B_EN_ADDR, MT6359P_RG_VCN13_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN13_VOSEL_MASK << MT6359_RG_VCN13_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vcn33_1_bt\", VCN33_1_BT, vcn33_voltages,\n\t\t   MT6359P_RG_LDO_VCN33_1_EN_0_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_1_EN_0_SHIFT,\n\t\t   MT6359P_DA_VCN33_1_B_EN_ADDR, MT6359P_RG_VCN33_1_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_1_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_1_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_vcn33_1_wifi\", VCN33_1_WIFI, vcn33_voltages,\n\t\t   MT6359P_RG_LDO_VCN33_1_EN_1_ADDR,\n\t\t   MT6359P_RG_LDO_VCN33_1_EN_1_SHIFT,\n\t\t   MT6359P_DA_VCN33_1_B_EN_ADDR, MT6359P_RG_VCN33_1_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_1_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_1_VOSEL_SHIFT, 240),\n\tMT6359_REG_FIXED(\"ldo_vaux18\", VAUX18, MT6359P_RG_LDO_VAUX18_EN_ADDR,\n\t\t\t MT6359P_DA_VAUX18_B_EN_ADDR, 1800000),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_others\", VSRAM_OTHERS, 500000, 1293750,\n\t\t\t  6250,\n\t\t\t  MT6359P_RG_LDO_VSRAM_OTHERS_EN_ADDR,\n\t\t\t  MT6359P_DA_VSRAM_OTHERS_B_EN_ADDR,\n\t\t\t  MT6359P_RG_LDO_VSRAM_OTHERS_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vefuse\", VEFUSE, vefuse_voltages,\n\t\t   MT6359P_RG_LDO_VEFUSE_EN_ADDR,\n\t\t   MT6359P_RG_LDO_VEFUSE_EN_SHIFT,\n\t\t   MT6359P_DA_VEFUSE_B_EN_ADDR, MT6359P_RG_VEFUSE_VOSEL_ADDR,\n\t\t   MT6359_RG_VEFUSE_VOSEL_MASK << MT6359_RG_VEFUSE_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO(\"ldo_vxo22\", VXO22, vxo22_voltages,\n\t\t   MT6359P_RG_LDO_VXO22_EN_ADDR, MT6359P_RG_LDO_VXO22_EN_SHIFT,\n\t\t   MT6359P_DA_VXO22_B_EN_ADDR, MT6359P_RG_VXO22_VOSEL_ADDR,\n\t\t   MT6359_RG_VXO22_VOSEL_MASK << MT6359_RG_VXO22_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO(\"ldo_vrfck_1\", VRFCK, vrfck_voltages_1,\n\t\t   MT6359P_RG_LDO_VRFCK_EN_ADDR, MT6359P_RG_LDO_VRFCK_EN_SHIFT,\n\t\t   MT6359P_DA_VRFCK_B_EN_ADDR, MT6359P_RG_VRFCK_VOSEL_ADDR,\n\t\t   MT6359_RG_VRFCK_VOSEL_MASK << MT6359_RG_VRFCK_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_REG_FIXED(\"ldo_vbif28\", VBIF28, MT6359P_RG_LDO_VBIF28_EN_ADDR,\n\t\t\t MT6359P_DA_VBIF28_B_EN_ADDR, 2800000),\n\tMT6359_LDO(\"ldo_vio28\", VIO28, vio28_voltages,\n\t\t   MT6359P_RG_LDO_VIO28_EN_ADDR, MT6359P_RG_LDO_VIO28_EN_SHIFT,\n\t\t   MT6359P_DA_VIO28_B_EN_ADDR, MT6359P_RG_VIO28_VOSEL_ADDR,\n\t\t   MT6359_RG_VIO28_VOSEL_MASK << MT6359_RG_VIO28_VOSEL_SHIFT,\n\t\t   1920),\n\tMT6359P_LDO1(\"ldo_vemc_1\", VEMC, mt6359p_vemc_ops, vemc_voltages_1,\n\t\t     MT6359P_RG_LDO_VEMC_EN_ADDR, MT6359P_RG_LDO_VEMC_EN_SHIFT,\n\t\t     MT6359P_DA_VEMC_B_EN_ADDR,\n\t\t     MT6359P_RG_LDO_VEMC_VOSEL_0_ADDR,\n\t\t     MT6359P_RG_LDO_VEMC_VOSEL_0_MASK <<\n\t\t     MT6359P_RG_LDO_VEMC_VOSEL_0_SHIFT),\n\tMT6359_LDO(\"ldo_vcn33_2_bt\", VCN33_2_BT, vcn33_voltages,\n\t\t   MT6359P_RG_LDO_VCN33_2_EN_0_ADDR,\n\t\t   MT6359P_RG_LDO_VCN33_2_EN_0_SHIFT,\n\t\t   MT6359P_DA_VCN33_2_B_EN_ADDR, MT6359P_RG_VCN33_2_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_2_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_2_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_vcn33_2_wifi\", VCN33_2_WIFI, vcn33_voltages,\n\t\t   MT6359P_RG_LDO_VCN33_2_EN_1_ADDR,\n\t\t   MT6359_RG_LDO_VCN33_2_EN_1_SHIFT,\n\t\t   MT6359P_DA_VCN33_2_B_EN_ADDR, MT6359P_RG_VCN33_2_VOSEL_ADDR,\n\t\t   MT6359_RG_VCN33_2_VOSEL_MASK <<\n\t\t   MT6359_RG_VCN33_2_VOSEL_SHIFT, 240),\n\tMT6359_LDO(\"ldo_va12\", VA12, va12_voltages,\n\t\t   MT6359P_RG_LDO_VA12_EN_ADDR, MT6359P_RG_LDO_VA12_EN_SHIFT,\n\t\t   MT6359P_DA_VA12_B_EN_ADDR, MT6359P_RG_VA12_VOSEL_ADDR,\n\t\t   MT6359_RG_VA12_VOSEL_MASK << MT6359_RG_VA12_VOSEL_SHIFT,\n\t\t   960),\n\tMT6359_LDO(\"ldo_va09\", VA09, va09_voltages,\n\t\t   MT6359P_RG_LDO_VA09_EN_ADDR, MT6359P_RG_LDO_VA09_EN_SHIFT,\n\t\t   MT6359P_DA_VA09_B_EN_ADDR, MT6359P_RG_VA09_VOSEL_ADDR,\n\t\t   MT6359_RG_VA09_VOSEL_MASK << MT6359_RG_VA09_VOSEL_SHIFT,\n\t\t   960),\n\tMT6359_LDO(\"ldo_vrf18\", VRF18, vrf18_voltages,\n\t\t   MT6359P_RG_LDO_VRF18_EN_ADDR, MT6359P_RG_LDO_VRF18_EN_SHIFT,\n\t\t   MT6359P_DA_VRF18_B_EN_ADDR, MT6359P_RG_VRF18_VOSEL_ADDR,\n\t\t   MT6359_RG_VRF18_VOSEL_MASK << MT6359_RG_VRF18_VOSEL_SHIFT,\n\t\t   240),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_md\", VSRAM_MD, 500000, 1293750, 6250,\n\t\t\t  MT6359P_RG_LDO_VSRAM_MD_EN_ADDR,\n\t\t\t  MT6359P_DA_VSRAM_MD_B_EN_ADDR,\n\t\t\t  MT6359P_RG_LDO_VSRAM_MD_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_MD_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vufs\", VUFS, volt18_voltages,\n\t\t   MT6359P_RG_LDO_VUFS_EN_ADDR, MT6359P_RG_LDO_VUFS_EN_SHIFT,\n\t\t   MT6359P_DA_VUFS_B_EN_ADDR, MT6359P_RG_VUFS_VOSEL_ADDR,\n\t\t   MT6359_RG_VUFS_VOSEL_MASK << MT6359_RG_VUFS_VOSEL_SHIFT,\n\t\t   1920),\n\tMT6359_LDO(\"ldo_vm18\", VM18, volt18_voltages,\n\t\t   MT6359P_RG_LDO_VM18_EN_ADDR, MT6359P_RG_LDO_VM18_EN_SHIFT,\n\t\t   MT6359P_DA_VM18_B_EN_ADDR, MT6359P_RG_VM18_VOSEL_ADDR,\n\t\t   MT6359_RG_VM18_VOSEL_MASK << MT6359_RG_VM18_VOSEL_SHIFT,\n\t\t   1920),\n\tMT6359_LDO(\"ldo_vbbck\", VBBCK, vbbck_voltages,\n\t\t   MT6359P_RG_LDO_VBBCK_EN_ADDR, MT6359P_RG_LDO_VBBCK_EN_SHIFT,\n\t\t   MT6359P_DA_VBBCK_B_EN_ADDR, MT6359P_RG_VBBCK_VOSEL_ADDR,\n\t\t   MT6359P_RG_VBBCK_VOSEL_MASK << MT6359P_RG_VBBCK_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_proc1\", VSRAM_PROC1, 500000, 1293750, 6250,\n\t\t\t  MT6359P_RG_LDO_VSRAM_PROC1_EN_ADDR,\n\t\t\t  MT6359P_DA_VSRAM_PROC1_B_EN_ADDR,\n\t\t\t  MT6359P_RG_LDO_VSRAM_PROC1_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_PROC1_VOSEL_SHIFT),\n\tMT6359_LDO(\"ldo_vsim2\", VSIM2, vsim2_voltages,\n\t\t   MT6359P_RG_LDO_VSIM2_EN_ADDR, MT6359P_RG_LDO_VSIM2_EN_SHIFT,\n\t\t   MT6359P_DA_VSIM2_B_EN_ADDR, MT6359P_RG_VSIM2_VOSEL_ADDR,\n\t\t   MT6359_RG_VSIM2_VOSEL_MASK << MT6359_RG_VSIM2_VOSEL_SHIFT,\n\t\t   480),\n\tMT6359_LDO_LINEAR(\"ldo_vsram_others_sshub\", VSRAM_OTHERS_SSHUB,\n\t\t\t  500000, 1293750, 6250,\n\t\t\t  MT6359P_RG_LDO_VSRAM_OTHERS_SSHUB_EN_ADDR,\n\t\t\t  MT6359P_DA_VSRAM_OTHERS_B_EN_ADDR,\n\t\t\t  MT6359P_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_ADDR,\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_MASK <<\n\t\t\t  MT6359_RG_LDO_VSRAM_OTHERS_SSHUB_VOSEL_SHIFT),\n};\n\nstatic int mt6359_regulator_probe(struct platform_device *pdev)\n{\n\tstruct mt6397_chip *mt6397 = dev_get_drvdata(pdev->dev.parent);\n\tstruct regulator_config config = {};\n\tstruct regulator_dev *rdev;\n\tstruct mt6359_regulator_info *mt6359_info;\n\tint i, hw_ver, ret;\n\n\tret = regmap_read(mt6397->regmap, MT6359P_HWCID, &hw_ver);\n\tif (ret)\n\t\treturn ret;\n\n\tif (hw_ver >= MT6359P_CHIP_VER)\n\t\tmt6359_info = mt6359p_regulators;\n\telse\n\t\tmt6359_info = mt6359_regulators;\n\n\tconfig.dev = mt6397->dev;\n\tconfig.regmap = mt6397->regmap;\n\tfor (i = 0; i < MT6359_MAX_REGULATOR; i++, mt6359_info++) {\n\t\tconfig.driver_data = mt6359_info;\n\t\trdev = devm_regulator_register(&pdev->dev, &mt6359_info->desc, &config);\n\t\tif (IS_ERR(rdev)) {\n\t\t\tdev_err(&pdev->dev, \"failed to register %s\\n\", mt6359_info->desc.name);\n\t\t\treturn PTR_ERR(rdev);\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic const struct platform_device_id mt6359_platform_ids[] = {\n\t{\"mt6359-regulator\", 0},\n\t{   },\n};\nMODULE_DEVICE_TABLE(platform, mt6359_platform_ids);\n\nstatic struct platform_driver mt6359_regulator_driver = {\n\t.driver = {\n\t\t.name = \"mt6359-regulator\",\n\t\t.probe_type = PROBE_PREFER_ASYNCHRONOUS,\n\t},\n\t.probe = mt6359_regulator_probe,\n\t.id_table = mt6359_platform_ids,\n};\n\nmodule_platform_driver(mt6359_regulator_driver);\n\nMODULE_AUTHOR(\"Wen Su <wen.su@mediatek.com>\");\nMODULE_DESCRIPTION(\"Regulator Driver for MediaTek MT6359 PMIC\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}