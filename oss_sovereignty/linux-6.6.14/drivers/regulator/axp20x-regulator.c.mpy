{
  "module_name": "axp20x-regulator.c",
  "hash_id": "9112568793ad76de43acc499283dd1e293a3930607ef4bcdd95ce0fe131e871e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/regulator/axp20x-regulator.c",
  "human_readable_source": " \n\n#include <linux/bitops.h>\n#include <linux/delay.h>\n#include <linux/err.h>\n#include <linux/init.h>\n#include <linux/mfd/axp20x.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n#include <linux/regulator/driver.h>\n#include <linux/regulator/machine.h>\n#include <linux/regulator/of_regulator.h>\n\n#define AXP20X_GPIO0_FUNC_MASK\t\tGENMASK(3, 0)\n#define AXP20X_GPIO1_FUNC_MASK\t\tGENMASK(3, 0)\n\n#define AXP20X_IO_ENABLED\t\t0x03\n#define AXP20X_IO_DISABLED\t\t0x07\n\n#define AXP20X_WORKMODE_DCDC2_MASK\tBIT_MASK(2)\n#define AXP20X_WORKMODE_DCDC3_MASK\tBIT_MASK(1)\n\n#define AXP20X_FREQ_DCDC_MASK\t\tGENMASK(3, 0)\n\n#define AXP20X_VBUS_IPSOUT_MGMT_MASK\tBIT_MASK(2)\n\n#define AXP20X_DCDC2_V_OUT_MASK\t\tGENMASK(5, 0)\n#define AXP20X_DCDC3_V_OUT_MASK\t\tGENMASK(7, 0)\n#define AXP20X_LDO2_V_OUT_MASK\t\tGENMASK(7, 4)\n#define AXP20X_LDO3_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP20X_LDO4_V_OUT_MASK\t\tGENMASK(3, 0)\n#define AXP20X_LDO5_V_OUT_MASK\t\tGENMASK(7, 4)\n\n#define AXP20X_PWR_OUT_EXTEN_MASK\tBIT_MASK(0)\n#define AXP20X_PWR_OUT_DCDC3_MASK\tBIT_MASK(1)\n#define AXP20X_PWR_OUT_LDO2_MASK\tBIT_MASK(2)\n#define AXP20X_PWR_OUT_LDO4_MASK\tBIT_MASK(3)\n#define AXP20X_PWR_OUT_DCDC2_MASK\tBIT_MASK(4)\n#define AXP20X_PWR_OUT_LDO3_MASK\tBIT_MASK(6)\n\n#define AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_RATE_MASK\tBIT_MASK(0)\n#define AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_RATE(x) \\\n\t((x) << 0)\n#define AXP20X_DCDC2_LDO3_V_RAMP_LDO3_RATE_MASK\t\tBIT_MASK(1)\n#define AXP20X_DCDC2_LDO3_V_RAMP_LDO3_RATE(x) \\\n\t((x) << 1)\n#define AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_EN_MASK\t\tBIT_MASK(2)\n#define AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_EN\t\tBIT(2)\n#define AXP20X_DCDC2_LDO3_V_RAMP_LDO3_EN_MASK\t\tBIT_MASK(3)\n#define AXP20X_DCDC2_LDO3_V_RAMP_LDO3_EN\t\tBIT(3)\n\n#define AXP20X_LDO4_V_OUT_1250mV_START\t0x0\n#define AXP20X_LDO4_V_OUT_1250mV_STEPS\t0\n#define AXP20X_LDO4_V_OUT_1250mV_END\t\\\n\t(AXP20X_LDO4_V_OUT_1250mV_START + AXP20X_LDO4_V_OUT_1250mV_STEPS)\n#define AXP20X_LDO4_V_OUT_1300mV_START\t0x1\n#define AXP20X_LDO4_V_OUT_1300mV_STEPS\t7\n#define AXP20X_LDO4_V_OUT_1300mV_END\t\\\n\t(AXP20X_LDO4_V_OUT_1300mV_START + AXP20X_LDO4_V_OUT_1300mV_STEPS)\n#define AXP20X_LDO4_V_OUT_2500mV_START\t0x9\n#define AXP20X_LDO4_V_OUT_2500mV_STEPS\t0\n#define AXP20X_LDO4_V_OUT_2500mV_END\t\\\n\t(AXP20X_LDO4_V_OUT_2500mV_START + AXP20X_LDO4_V_OUT_2500mV_STEPS)\n#define AXP20X_LDO4_V_OUT_2700mV_START\t0xa\n#define AXP20X_LDO4_V_OUT_2700mV_STEPS\t1\n#define AXP20X_LDO4_V_OUT_2700mV_END\t\\\n\t(AXP20X_LDO4_V_OUT_2700mV_START + AXP20X_LDO4_V_OUT_2700mV_STEPS)\n#define AXP20X_LDO4_V_OUT_3000mV_START\t0xc\n#define AXP20X_LDO4_V_OUT_3000mV_STEPS\t3\n#define AXP20X_LDO4_V_OUT_3000mV_END\t\\\n\t(AXP20X_LDO4_V_OUT_3000mV_START + AXP20X_LDO4_V_OUT_3000mV_STEPS)\n#define AXP20X_LDO4_V_OUT_NUM_VOLTAGES\t16\n\n#define AXP22X_IO_ENABLED\t\t0x03\n#define AXP22X_IO_DISABLED\t\t0x04\n\n#define AXP22X_WORKMODE_DCDCX_MASK(x)\tBIT_MASK(x)\n\n#define AXP22X_MISC_N_VBUSEN_FUNC\tBIT(4)\n\n#define AXP22X_DCDC1_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DCDC2_V_OUT_MASK\t\tGENMASK(5, 0)\n#define AXP22X_DCDC3_V_OUT_MASK\t\tGENMASK(5, 0)\n#define AXP22X_DCDC4_V_OUT_MASK\t\tGENMASK(5, 0)\n#define AXP22X_DCDC5_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DC5LDO_V_OUT_MASK\tGENMASK(2, 0)\n#define AXP22X_ALDO1_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_ALDO2_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_ALDO3_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DLDO1_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DLDO2_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DLDO3_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_DLDO4_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_ELDO1_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_ELDO2_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_ELDO3_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP22X_LDO_IO0_V_OUT_MASK\tGENMASK(4, 0)\n#define AXP22X_LDO_IO1_V_OUT_MASK\tGENMASK(4, 0)\n\n#define AXP22X_PWR_OUT_DC5LDO_MASK\tBIT_MASK(0)\n#define AXP22X_PWR_OUT_DCDC1_MASK\tBIT_MASK(1)\n#define AXP22X_PWR_OUT_DCDC2_MASK\tBIT_MASK(2)\n#define AXP22X_PWR_OUT_DCDC3_MASK\tBIT_MASK(3)\n#define AXP22X_PWR_OUT_DCDC4_MASK\tBIT_MASK(4)\n#define AXP22X_PWR_OUT_DCDC5_MASK\tBIT_MASK(5)\n#define AXP22X_PWR_OUT_ALDO1_MASK\tBIT_MASK(6)\n#define AXP22X_PWR_OUT_ALDO2_MASK\tBIT_MASK(7)\n\n#define AXP22X_PWR_OUT_SW_MASK\t\tBIT_MASK(6)\n#define AXP22X_PWR_OUT_DC1SW_MASK\tBIT_MASK(7)\n\n#define AXP22X_PWR_OUT_ELDO1_MASK\tBIT_MASK(0)\n#define AXP22X_PWR_OUT_ELDO2_MASK\tBIT_MASK(1)\n#define AXP22X_PWR_OUT_ELDO3_MASK\tBIT_MASK(2)\n#define AXP22X_PWR_OUT_DLDO1_MASK\tBIT_MASK(3)\n#define AXP22X_PWR_OUT_DLDO2_MASK\tBIT_MASK(4)\n#define AXP22X_PWR_OUT_DLDO3_MASK\tBIT_MASK(5)\n#define AXP22X_PWR_OUT_DLDO4_MASK\tBIT_MASK(6)\n#define AXP22X_PWR_OUT_ALDO3_MASK\tBIT_MASK(7)\n\n#define AXP313A_DCDC1_NUM_VOLTAGES\t107\n#define AXP313A_DCDC23_NUM_VOLTAGES\t88\n#define AXP313A_DCDC_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP313A_LDO_V_OUT_MASK\t\tGENMASK(4, 0)\n\n#define AXP803_PWR_OUT_DCDC1_MASK\tBIT_MASK(0)\n#define AXP803_PWR_OUT_DCDC2_MASK\tBIT_MASK(1)\n#define AXP803_PWR_OUT_DCDC3_MASK\tBIT_MASK(2)\n#define AXP803_PWR_OUT_DCDC4_MASK\tBIT_MASK(3)\n#define AXP803_PWR_OUT_DCDC5_MASK\tBIT_MASK(4)\n#define AXP803_PWR_OUT_DCDC6_MASK\tBIT_MASK(5)\n\n#define AXP803_PWR_OUT_FLDO1_MASK\tBIT_MASK(2)\n#define AXP803_PWR_OUT_FLDO2_MASK\tBIT_MASK(3)\n\n#define AXP803_DCDC1_V_OUT_MASK\t\tGENMASK(4, 0)\n#define AXP803_DCDC2_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP803_DCDC3_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP803_DCDC4_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP803_DCDC5_V_OUT_MASK\t\tGENMASK(6, 0)\n#define AXP803_DCDC6_V_OUT_MASK\t\tGENMASK(6, 0)\n\n#define AXP803_FLDO1_V_OUT_MASK\t\tGENMASK(3, 0)\n#define AXP803_FLDO2_V_OUT_MASK\t\tGENMASK(3, 0)\n\n#define AXP803_DCDC23_POLYPHASE_DUAL\tBIT(6)\n#define AXP803_DCDC56_POLYPHASE_DUAL\tBIT(5)\n\n#define AXP803_DCDC234_500mV_START\t0x00\n#define AXP803_DCDC234_500mV_STEPS\t70\n#define AXP803_DCDC234_500mV_END\t\\\n\t(AXP803_DCDC234_500mV_START + AXP803_DCDC234_500mV_STEPS)\n#define AXP803_DCDC234_1220mV_START\t0x47\n#define AXP803_DCDC234_1220mV_STEPS\t4\n#define AXP803_DCDC234_1220mV_END\t\\\n\t(AXP803_DCDC234_1220mV_START + AXP803_DCDC234_1220mV_STEPS)\n#define AXP803_DCDC234_NUM_VOLTAGES\t76\n\n#define AXP803_DCDC5_800mV_START\t0x00\n#define AXP803_DCDC5_800mV_STEPS\t32\n#define AXP803_DCDC5_800mV_END\t\t\\\n\t(AXP803_DCDC5_800mV_START + AXP803_DCDC5_800mV_STEPS)\n#define AXP803_DCDC5_1140mV_START\t0x21\n#define AXP803_DCDC5_1140mV_STEPS\t35\n#define AXP803_DCDC5_1140mV_END\t\t\\\n\t(AXP803_DCDC5_1140mV_START + AXP803_DCDC5_1140mV_STEPS)\n#define AXP803_DCDC5_NUM_VOLTAGES\t69\n\n#define AXP803_DCDC6_600mV_START\t0x00\n#define AXP803_DCDC6_600mV_STEPS\t50\n#define AXP803_DCDC6_600mV_END\t\t\\\n\t(AXP803_DCDC6_600mV_START + AXP803_DCDC6_600mV_STEPS)\n#define AXP803_DCDC6_1120mV_START\t0x33\n#define AXP803_DCDC6_1120mV_STEPS\t20\n#define AXP803_DCDC6_1120mV_END\t\t\\\n\t(AXP803_DCDC6_1120mV_START + AXP803_DCDC6_1120mV_STEPS)\n#define AXP803_DCDC6_NUM_VOLTAGES\t72\n\n#define AXP803_DLDO2_700mV_START\t0x00\n#define AXP803_DLDO2_700mV_STEPS\t26\n#define AXP803_DLDO2_700mV_END\t\t\\\n\t(AXP803_DLDO2_700mV_START + AXP803_DLDO2_700mV_STEPS)\n#define AXP803_DLDO2_3400mV_START\t0x1b\n#define AXP803_DLDO2_3400mV_STEPS\t4\n#define AXP803_DLDO2_3400mV_END\t\t\\\n\t(AXP803_DLDO2_3400mV_START + AXP803_DLDO2_3400mV_STEPS)\n#define AXP803_DLDO2_NUM_VOLTAGES\t32\n\n#define AXP806_DCDCA_V_CTRL_MASK\tGENMASK(6, 0)\n#define AXP806_DCDCB_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_DCDCC_V_CTRL_MASK\tGENMASK(6, 0)\n#define AXP806_DCDCD_V_CTRL_MASK\tGENMASK(5, 0)\n#define AXP806_DCDCE_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_ALDO1_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_ALDO2_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_ALDO3_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_BLDO1_V_CTRL_MASK\tGENMASK(3, 0)\n#define AXP806_BLDO2_V_CTRL_MASK\tGENMASK(3, 0)\n#define AXP806_BLDO3_V_CTRL_MASK\tGENMASK(3, 0)\n#define AXP806_BLDO4_V_CTRL_MASK\tGENMASK(3, 0)\n#define AXP806_CLDO1_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_CLDO2_V_CTRL_MASK\tGENMASK(4, 0)\n#define AXP806_CLDO3_V_CTRL_MASK\tGENMASK(4, 0)\n\n#define AXP806_PWR_OUT_DCDCA_MASK\tBIT_MASK(0)\n#define AXP806_PWR_OUT_DCDCB_MASK\tBIT_MASK(1)\n#define AXP806_PWR_OUT_DCDCC_MASK\tBIT_MASK(2)\n#define AXP806_PWR_OUT_DCDCD_MASK\tBIT_MASK(3)\n#define AXP806_PWR_OUT_DCDCE_MASK\tBIT_MASK(4)\n#define AXP806_PWR_OUT_ALDO1_MASK\tBIT_MASK(5)\n#define AXP806_PWR_OUT_ALDO2_MASK\tBIT_MASK(6)\n#define AXP806_PWR_OUT_ALDO3_MASK\tBIT_MASK(7)\n#define AXP806_PWR_OUT_BLDO1_MASK\tBIT_MASK(0)\n#define AXP806_PWR_OUT_BLDO2_MASK\tBIT_MASK(1)\n#define AXP806_PWR_OUT_BLDO3_MASK\tBIT_MASK(2)\n#define AXP806_PWR_OUT_BLDO4_MASK\tBIT_MASK(3)\n#define AXP806_PWR_OUT_CLDO1_MASK\tBIT_MASK(4)\n#define AXP806_PWR_OUT_CLDO2_MASK\tBIT_MASK(5)\n#define AXP806_PWR_OUT_CLDO3_MASK\tBIT_MASK(6)\n#define AXP806_PWR_OUT_SW_MASK\t\tBIT_MASK(7)\n\n#define AXP806_DCDCAB_POLYPHASE_DUAL\t0x40\n#define AXP806_DCDCABC_POLYPHASE_TRI\t0x80\n#define AXP806_DCDCABC_POLYPHASE_MASK\tGENMASK(7, 6)\n\n#define AXP806_DCDCDE_POLYPHASE_DUAL\tBIT(5)\n\n#define AXP806_DCDCA_600mV_START\t0x00\n#define AXP806_DCDCA_600mV_STEPS\t50\n#define AXP806_DCDCA_600mV_END\t\t\\\n\t(AXP806_DCDCA_600mV_START + AXP806_DCDCA_600mV_STEPS)\n#define AXP806_DCDCA_1120mV_START\t0x33\n#define AXP806_DCDCA_1120mV_STEPS\t20\n#define AXP806_DCDCA_1120mV_END\t\t\\\n\t(AXP806_DCDCA_1120mV_START + AXP806_DCDCA_1120mV_STEPS)\n#define AXP806_DCDCA_NUM_VOLTAGES\t72\n\n#define AXP806_DCDCD_600mV_START\t0x00\n#define AXP806_DCDCD_600mV_STEPS\t45\n#define AXP806_DCDCD_600mV_END\t\t\\\n\t(AXP806_DCDCD_600mV_START + AXP806_DCDCD_600mV_STEPS)\n#define AXP806_DCDCD_1600mV_START\t0x2e\n#define AXP806_DCDCD_1600mV_STEPS\t17\n#define AXP806_DCDCD_1600mV_END\t\t\\\n\t(AXP806_DCDCD_1600mV_START + AXP806_DCDCD_1600mV_STEPS)\n#define AXP806_DCDCD_NUM_VOLTAGES\t64\n\n#define AXP809_DCDC4_600mV_START\t0x00\n#define AXP809_DCDC4_600mV_STEPS\t47\n#define AXP809_DCDC4_600mV_END\t\t\\\n\t(AXP809_DCDC4_600mV_START + AXP809_DCDC4_600mV_STEPS)\n#define AXP809_DCDC4_1800mV_START\t0x30\n#define AXP809_DCDC4_1800mV_STEPS\t8\n#define AXP809_DCDC4_1800mV_END\t\t\\\n\t(AXP809_DCDC4_1800mV_START + AXP809_DCDC4_1800mV_STEPS)\n#define AXP809_DCDC4_NUM_VOLTAGES\t57\n\n#define AXP813_DCDC7_V_OUT_MASK\t\tGENMASK(6, 0)\n\n#define AXP813_PWR_OUT_DCDC7_MASK\tBIT_MASK(6)\n\n#define AXP15060_DCDC1_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_DCDC2_V_CTRL_MASK\t\tGENMASK(6, 0)\n#define AXP15060_DCDC3_V_CTRL_MASK\t\tGENMASK(6, 0)\n#define AXP15060_DCDC4_V_CTRL_MASK\t\tGENMASK(6, 0)\n#define AXP15060_DCDC5_V_CTRL_MASK\t\tGENMASK(6, 0)\n#define AXP15060_DCDC6_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_ALDO1_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_ALDO2_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_ALDO3_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_ALDO4_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_ALDO5_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_BLDO1_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_BLDO2_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_BLDO3_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_BLDO4_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_BLDO5_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_CLDO1_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_CLDO2_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_CLDO3_V_CTRL_MASK\t\tGENMASK(4, 0)\n#define AXP15060_CLDO4_V_CTRL_MASK\t\tGENMASK(5, 0)\n#define AXP15060_CPUSLDO_V_CTRL_MASK\t\tGENMASK(3, 0)\n\n#define AXP15060_PWR_OUT_DCDC1_MASK\tBIT_MASK(0)\n#define AXP15060_PWR_OUT_DCDC2_MASK\tBIT_MASK(1)\n#define AXP15060_PWR_OUT_DCDC3_MASK\tBIT_MASK(2)\n#define AXP15060_PWR_OUT_DCDC4_MASK\tBIT_MASK(3)\n#define AXP15060_PWR_OUT_DCDC5_MASK\tBIT_MASK(4)\n#define AXP15060_PWR_OUT_DCDC6_MASK\tBIT_MASK(5)\n#define AXP15060_PWR_OUT_ALDO1_MASK\tBIT_MASK(0)\n#define AXP15060_PWR_OUT_ALDO2_MASK\tBIT_MASK(1)\n#define AXP15060_PWR_OUT_ALDO3_MASK\tBIT_MASK(2)\n#define AXP15060_PWR_OUT_ALDO4_MASK\tBIT_MASK(3)\n#define AXP15060_PWR_OUT_ALDO5_MASK\tBIT_MASK(4)\n#define AXP15060_PWR_OUT_BLDO1_MASK\tBIT_MASK(5)\n#define AXP15060_PWR_OUT_BLDO2_MASK\tBIT_MASK(6)\n#define AXP15060_PWR_OUT_BLDO3_MASK\tBIT_MASK(7)\n#define AXP15060_PWR_OUT_BLDO4_MASK\tBIT_MASK(0)\n#define AXP15060_PWR_OUT_BLDO5_MASK\tBIT_MASK(1)\n#define AXP15060_PWR_OUT_CLDO1_MASK\tBIT_MASK(2)\n#define AXP15060_PWR_OUT_CLDO2_MASK\tBIT_MASK(3)\n#define AXP15060_PWR_OUT_CLDO3_MASK\tBIT_MASK(4)\n#define AXP15060_PWR_OUT_CLDO4_MASK\tBIT_MASK(5)\n#define AXP15060_PWR_OUT_CPUSLDO_MASK\tBIT_MASK(6)\n#define AXP15060_PWR_OUT_SW_MASK\t\tBIT_MASK(7)\n\n#define AXP15060_DCDC23_POLYPHASE_DUAL_MASK\t\tBIT_MASK(6)\n#define AXP15060_DCDC46_POLYPHASE_DUAL_MASK\t\tBIT_MASK(7)\n\n#define AXP15060_DCDC234_500mV_START\t0x00\n#define AXP15060_DCDC234_500mV_STEPS\t70\n#define AXP15060_DCDC234_500mV_END\t\t\\\n\t(AXP15060_DCDC234_500mV_START + AXP15060_DCDC234_500mV_STEPS)\n#define AXP15060_DCDC234_1220mV_START\t0x47\n#define AXP15060_DCDC234_1220mV_STEPS\t16\n#define AXP15060_DCDC234_1220mV_END\t\t\\\n\t(AXP15060_DCDC234_1220mV_START + AXP15060_DCDC234_1220mV_STEPS)\n#define AXP15060_DCDC234_NUM_VOLTAGES\t88\n\n#define AXP15060_DCDC5_800mV_START\t0x00\n#define AXP15060_DCDC5_800mV_STEPS\t32\n#define AXP15060_DCDC5_800mV_END\t\t\\\n\t(AXP15060_DCDC5_800mV_START + AXP15060_DCDC5_800mV_STEPS)\n#define AXP15060_DCDC5_1140mV_START\t0x21\n#define AXP15060_DCDC5_1140mV_STEPS\t35\n#define AXP15060_DCDC5_1140mV_END\t\t\\\n\t(AXP15060_DCDC5_1140mV_START + AXP15060_DCDC5_1140mV_STEPS)\n#define AXP15060_DCDC5_NUM_VOLTAGES\t69\n\n#define AXP_DESC_IO(_family, _id, _match, _supply, _min, _max, _step, _vreg,\t\\\n\t\t    _vmask, _ereg, _emask, _enable_val, _disable_val)\t\t\\\n\t[_family##_##_id] = {\t\t\t\t\t\t\t\\\n\t\t.name\t\t= (_match),\t\t\t\t\t\\\n\t\t.supply_name\t= (_supply),\t\t\t\t\t\\\n\t\t.of_match\t= of_match_ptr(_match),\t\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\t\t\\\n\t\t.type\t\t= REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.id\t\t= _family##_##_id,\t\t\t\t\\\n\t\t.n_voltages\t= (((_max) - (_min)) / (_step) + 1),\t\t\\\n\t\t.owner\t\t= THIS_MODULE,\t\t\t\t\t\\\n\t\t.min_uV\t\t= (_min) * 1000,\t\t\t\t\\\n\t\t.uV_step\t= (_step) * 1000,\t\t\t\t\\\n\t\t.vsel_reg\t= (_vreg),\t\t\t\t\t\\\n\t\t.vsel_mask\t= (_vmask),\t\t\t\t\t\\\n\t\t.enable_reg\t= (_ereg),\t\t\t\t\t\\\n\t\t.enable_mask\t= (_emask),\t\t\t\t\t\\\n\t\t.enable_val\t= (_enable_val),\t\t\t\t\\\n\t\t.disable_val\t= (_disable_val),\t\t\t\t\\\n\t\t.ops\t\t= &axp20x_ops,\t\t\t\t\t\\\n\t}\n\n#define AXP_DESC(_family, _id, _match, _supply, _min, _max, _step, _vreg,\t\\\n\t\t _vmask, _ereg, _emask) \t\t\t\t\t\\\n\t[_family##_##_id] = {\t\t\t\t\t\t\t\\\n\t\t.name\t\t= (_match),\t\t\t\t\t\\\n\t\t.supply_name\t= (_supply),\t\t\t\t\t\\\n\t\t.of_match\t= of_match_ptr(_match),\t\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\t\t\\\n\t\t.type\t\t= REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.id\t\t= _family##_##_id,\t\t\t\t\\\n\t\t.n_voltages\t= (((_max) - (_min)) / (_step) + 1),\t\t\\\n\t\t.owner\t\t= THIS_MODULE,\t\t\t\t\t\\\n\t\t.min_uV\t\t= (_min) * 1000,\t\t\t\t\\\n\t\t.uV_step\t= (_step) * 1000,\t\t\t\t\\\n\t\t.vsel_reg\t= (_vreg),\t\t\t\t\t\\\n\t\t.vsel_mask\t= (_vmask),\t\t\t\t\t\\\n\t\t.enable_reg\t= (_ereg),\t\t\t\t\t\\\n\t\t.enable_mask\t= (_emask),\t\t\t\t\t\\\n\t\t.ops\t\t= &axp20x_ops,\t\t\t\t\t\\\n\t}\n\n#define AXP_DESC_SW(_family, _id, _match, _supply, _ereg, _emask)\t\t\\\n\t[_family##_##_id] = {\t\t\t\t\t\t\t\\\n\t\t.name\t\t= (_match),\t\t\t\t\t\\\n\t\t.supply_name\t= (_supply),\t\t\t\t\t\\\n\t\t.of_match\t= of_match_ptr(_match),\t\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\t\t\\\n\t\t.type\t\t= REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.id\t\t= _family##_##_id,\t\t\t\t\\\n\t\t.owner\t\t= THIS_MODULE,\t\t\t\t\t\\\n\t\t.enable_reg\t= (_ereg),\t\t\t\t\t\\\n\t\t.enable_mask\t= (_emask),\t\t\t\t\t\\\n\t\t.ops\t\t= &axp20x_ops_sw,\t\t\t\t\\\n\t}\n\n#define AXP_DESC_FIXED(_family, _id, _match, _supply, _volt)\t\t\t\\\n\t[_family##_##_id] = {\t\t\t\t\t\t\t\\\n\t\t.name\t\t= (_match),\t\t\t\t\t\\\n\t\t.supply_name\t= (_supply),\t\t\t\t\t\\\n\t\t.of_match\t= of_match_ptr(_match),\t\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\t\t\\\n\t\t.type\t\t= REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.id\t\t= _family##_##_id,\t\t\t\t\\\n\t\t.n_voltages\t= 1,\t\t\t\t\t\t\\\n\t\t.owner\t\t= THIS_MODULE,\t\t\t\t\t\\\n\t\t.min_uV\t\t= (_volt) * 1000,\t\t\t\t\\\n\t\t.ops\t\t= &axp20x_ops_fixed\t\t\t\t\\\n\t}\n\n#define AXP_DESC_RANGES(_family, _id, _match, _supply, _ranges, _n_voltages,\t\\\n\t\t\t_vreg, _vmask, _ereg, _emask)\t\t\t\t\\\n\t[_family##_##_id] = {\t\t\t\t\t\t\t\\\n\t\t.name\t\t= (_match),\t\t\t\t\t\\\n\t\t.supply_name\t= (_supply),\t\t\t\t\t\\\n\t\t.of_match\t= of_match_ptr(_match),\t\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\t\t\\\n\t\t.type\t\t= REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.id\t\t= _family##_##_id,\t\t\t\t\\\n\t\t.n_voltages\t= (_n_voltages),\t\t\t\t\\\n\t\t.owner\t\t= THIS_MODULE,\t\t\t\t\t\\\n\t\t.vsel_reg\t= (_vreg),\t\t\t\t\t\\\n\t\t.vsel_mask\t= (_vmask),\t\t\t\t\t\\\n\t\t.enable_reg\t= (_ereg),\t\t\t\t\t\\\n\t\t.enable_mask\t= (_emask),\t\t\t\t\t\\\n\t\t.linear_ranges\t= (_ranges),\t\t\t\t\t\\\n\t\t.n_linear_ranges = ARRAY_SIZE(_ranges),\t\t\t\t\\\n\t\t.ops\t\t= &axp20x_ops_range,\t\t\t\t\\\n\t}\n\nstatic const int axp209_dcdc2_ldo3_slew_rates[] = {\n\t1600,\n\t 800,\n};\n\nstatic int axp20x_set_ramp_delay(struct regulator_dev *rdev, int ramp)\n{\n\tstruct axp20x_dev *axp20x = rdev_get_drvdata(rdev);\n\tint id = rdev_get_id(rdev);\n\tu8 reg, mask, enable, cfg = 0xff;\n\tconst int *slew_rates;\n\tint rate_count = 0;\n\n\tswitch (axp20x->variant) {\n\tcase AXP209_ID:\n\t\tif (id == AXP20X_DCDC2) {\n\t\t\tslew_rates = axp209_dcdc2_ldo3_slew_rates;\n\t\t\trate_count = ARRAY_SIZE(axp209_dcdc2_ldo3_slew_rates);\n\t\t\treg = AXP20X_DCDC2_LDO3_V_RAMP;\n\t\t\tmask = AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_RATE_MASK |\n\t\t\t       AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_EN_MASK;\n\t\t\tenable = (ramp > 0) ?\n\t\t\t\t AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_EN : 0;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (id == AXP20X_LDO3) {\n\t\t\tslew_rates = axp209_dcdc2_ldo3_slew_rates;\n\t\t\trate_count = ARRAY_SIZE(axp209_dcdc2_ldo3_slew_rates);\n\t\t\treg = AXP20X_DCDC2_LDO3_V_RAMP;\n\t\t\tmask = AXP20X_DCDC2_LDO3_V_RAMP_LDO3_RATE_MASK |\n\t\t\t       AXP20X_DCDC2_LDO3_V_RAMP_LDO3_EN_MASK;\n\t\t\tenable = (ramp > 0) ?\n\t\t\t\t AXP20X_DCDC2_LDO3_V_RAMP_LDO3_EN : 0;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (rate_count > 0)\n\t\t\tbreak;\n\n\t\tfallthrough;\n\tdefault:\n\t\t \n\t\treturn -ENOTSUPP;\n\t}\n\n\tif (ramp == 0) {\n\t\tcfg = enable;\n\t} else {\n\t\tint i;\n\n\t\tfor (i = 0; i < rate_count; i++) {\n\t\t\tif (ramp > slew_rates[i])\n\t\t\t\tbreak;\n\n\t\t\tif (id == AXP20X_DCDC2)\n\t\t\t\tcfg = AXP20X_DCDC2_LDO3_V_RAMP_DCDC2_RATE(i);\n\t\t\telse\n\t\t\t\tcfg = AXP20X_DCDC2_LDO3_V_RAMP_LDO3_RATE(i);\n\t\t}\n\n\t\tif (cfg == 0xff) {\n\t\t\tdev_err(axp20x->dev, \"unsupported ramp value %d\", ramp);\n\t\t\treturn -EINVAL;\n\t\t}\n\n\t\tcfg |= enable;\n\t}\n\n\treturn regmap_update_bits(axp20x->regmap, reg, mask, cfg);\n}\n\nstatic int axp20x_regulator_enable_regmap(struct regulator_dev *rdev)\n{\n\tstruct axp20x_dev *axp20x = rdev_get_drvdata(rdev);\n\tint id = rdev_get_id(rdev);\n\n\tswitch (axp20x->variant) {\n\tcase AXP209_ID:\n\t\tif ((id == AXP20X_LDO3) &&\n\t\t    rdev->constraints && rdev->constraints->soft_start) {\n\t\t\tint v_out;\n\t\t\tint ret;\n\n\t\t\t \n\t\t\tif (regulator_is_enabled_regmap(rdev))\n\t\t\t\tbreak;\n\n\t\t\tv_out = regulator_get_voltage_sel_regmap(rdev);\n\t\t\tif (v_out < 0)\n\t\t\t\treturn v_out;\n\n\t\t\tif (v_out == 0)\n\t\t\t\tbreak;\n\n\t\t\tret = regulator_set_voltage_sel_regmap(rdev, 0x00);\n\t\t\t \n\t\t\tusleep_range(1000, 5000);\n\t\t\tret |= regulator_enable_regmap(rdev);\n\t\t\tret |= regulator_set_voltage_sel_regmap(rdev, v_out);\n\n\t\t\treturn ret;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\t \n\t\tbreak;\n\t}\n\n\treturn regulator_enable_regmap(rdev);\n};\n\nstatic const struct regulator_ops axp20x_ops_fixed = {\n\t.list_voltage\t\t= regulator_list_voltage_linear,\n};\n\nstatic const struct regulator_ops axp20x_ops_range = {\n\t.set_voltage_sel\t= regulator_set_voltage_sel_regmap,\n\t.get_voltage_sel\t= regulator_get_voltage_sel_regmap,\n\t.list_voltage\t\t= regulator_list_voltage_linear_range,\n\t.enable\t\t\t= regulator_enable_regmap,\n\t.disable\t\t= regulator_disable_regmap,\n\t.is_enabled\t\t= regulator_is_enabled_regmap,\n};\n\nstatic const struct regulator_ops axp20x_ops = {\n\t.set_voltage_sel\t= regulator_set_voltage_sel_regmap,\n\t.get_voltage_sel\t= regulator_get_voltage_sel_regmap,\n\t.list_voltage\t\t= regulator_list_voltage_linear,\n\t.enable\t\t\t= axp20x_regulator_enable_regmap,\n\t.disable\t\t= regulator_disable_regmap,\n\t.is_enabled\t\t= regulator_is_enabled_regmap,\n\t.set_ramp_delay\t\t= axp20x_set_ramp_delay,\n};\n\nstatic const struct regulator_ops axp20x_ops_sw = {\n\t.enable\t\t\t= regulator_enable_regmap,\n\t.disable\t\t= regulator_disable_regmap,\n\t.is_enabled\t\t= regulator_is_enabled_regmap,\n};\n\nstatic const struct linear_range axp20x_ldo4_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(1250000,\n\t\t\t       AXP20X_LDO4_V_OUT_1250mV_START,\n\t\t\t       AXP20X_LDO4_V_OUT_1250mV_END,\n\t\t\t       0),\n\tREGULATOR_LINEAR_RANGE(1300000,\n\t\t\t       AXP20X_LDO4_V_OUT_1300mV_START,\n\t\t\t       AXP20X_LDO4_V_OUT_1300mV_END,\n\t\t\t       100000),\n\tREGULATOR_LINEAR_RANGE(2500000,\n\t\t\t       AXP20X_LDO4_V_OUT_2500mV_START,\n\t\t\t       AXP20X_LDO4_V_OUT_2500mV_END,\n\t\t\t       0),\n\tREGULATOR_LINEAR_RANGE(2700000,\n\t\t\t       AXP20X_LDO4_V_OUT_2700mV_START,\n\t\t\t       AXP20X_LDO4_V_OUT_2700mV_END,\n\t\t\t       100000),\n\tREGULATOR_LINEAR_RANGE(3000000,\n\t\t\t       AXP20X_LDO4_V_OUT_3000mV_START,\n\t\t\t       AXP20X_LDO4_V_OUT_3000mV_END,\n\t\t\t       100000),\n};\n\nstatic const struct regulator_desc axp20x_regulators[] = {\n\tAXP_DESC(AXP20X, DCDC2, \"dcdc2\", \"vin2\", 700, 2275, 25,\n\t\t AXP20X_DCDC2_V_OUT, AXP20X_DCDC2_V_OUT_MASK,\n\t\t AXP20X_PWR_OUT_CTRL, AXP20X_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC(AXP20X, DCDC3, \"dcdc3\", \"vin3\", 700, 3500, 25,\n\t\t AXP20X_DCDC3_V_OUT, AXP20X_DCDC3_V_OUT_MASK,\n\t\t AXP20X_PWR_OUT_CTRL, AXP20X_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC_FIXED(AXP20X, LDO1, \"ldo1\", \"acin\", 1300),\n\tAXP_DESC(AXP20X, LDO2, \"ldo2\", \"ldo24in\", 1800, 3300, 100,\n\t\t AXP20X_LDO24_V_OUT, AXP20X_LDO2_V_OUT_MASK,\n\t\t AXP20X_PWR_OUT_CTRL, AXP20X_PWR_OUT_LDO2_MASK),\n\tAXP_DESC(AXP20X, LDO3, \"ldo3\", \"ldo3in\", 700, 3500, 25,\n\t\t AXP20X_LDO3_V_OUT, AXP20X_LDO3_V_OUT_MASK,\n\t\t AXP20X_PWR_OUT_CTRL, AXP20X_PWR_OUT_LDO3_MASK),\n\tAXP_DESC_RANGES(AXP20X, LDO4, \"ldo4\", \"ldo24in\",\n\t\t\taxp20x_ldo4_ranges, AXP20X_LDO4_V_OUT_NUM_VOLTAGES,\n\t\t\tAXP20X_LDO24_V_OUT, AXP20X_LDO4_V_OUT_MASK,\n\t\t\tAXP20X_PWR_OUT_CTRL, AXP20X_PWR_OUT_LDO4_MASK),\n\tAXP_DESC_IO(AXP20X, LDO5, \"ldo5\", \"ldo5in\", 1800, 3300, 100,\n\t\t    AXP20X_LDO5_V_OUT, AXP20X_LDO5_V_OUT_MASK,\n\t\t    AXP20X_GPIO0_CTRL, AXP20X_GPIO0_FUNC_MASK,\n\t\t    AXP20X_IO_ENABLED, AXP20X_IO_DISABLED),\n};\n\nstatic const struct regulator_desc axp22x_regulators[] = {\n\tAXP_DESC(AXP22X, DCDC1, \"dcdc1\", \"vin1\", 1600, 3400, 100,\n\t\t AXP22X_DCDC1_V_OUT, AXP22X_DCDC1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC1_MASK),\n\tAXP_DESC(AXP22X, DCDC2, \"dcdc2\", \"vin2\", 600, 1540, 20,\n\t\t AXP22X_DCDC2_V_OUT, AXP22X_DCDC2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC(AXP22X, DCDC3, \"dcdc3\", \"vin3\", 600, 1860, 20,\n\t\t AXP22X_DCDC3_V_OUT, AXP22X_DCDC3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC(AXP22X, DCDC4, \"dcdc4\", \"vin4\", 600, 1540, 20,\n\t\t AXP22X_DCDC4_V_OUT, AXP22X_DCDC4_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC4_MASK),\n\tAXP_DESC(AXP22X, DCDC5, \"dcdc5\", \"vin5\", 1000, 2550, 50,\n\t\t AXP22X_DCDC5_V_OUT, AXP22X_DCDC5_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC5_MASK),\n\t \n\tAXP_DESC_SW(AXP22X, DC1SW, \"dc1sw\", NULL,\n\t\t    AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DC1SW_MASK),\n\t \n\tAXP_DESC(AXP22X, DC5LDO, \"dc5ldo\", NULL, 700, 1400, 100,\n\t\t AXP22X_DC5LDO_V_OUT, AXP22X_DC5LDO_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DC5LDO_MASK),\n\tAXP_DESC(AXP22X, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO1_V_OUT, AXP22X_ALDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP22X, ALDO2, \"aldo2\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO2_V_OUT, AXP22X_ALDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP22X, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO3_V_OUT, AXP22X_ALDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP22X_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC(AXP22X, DLDO1, \"dldo1\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO1_V_OUT, AXP22X_DLDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO1_MASK),\n\tAXP_DESC(AXP22X, DLDO2, \"dldo2\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO2_V_OUT, AXP22X_DLDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO2_MASK),\n\tAXP_DESC(AXP22X, DLDO3, \"dldo3\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO3_V_OUT, AXP22X_DLDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO3_MASK),\n\tAXP_DESC(AXP22X, DLDO4, \"dldo4\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO4_V_OUT, AXP22X_DLDO4_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO4_MASK),\n\tAXP_DESC(AXP22X, ELDO1, \"eldo1\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO1_V_OUT, AXP22X_ELDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO1_MASK),\n\tAXP_DESC(AXP22X, ELDO2, \"eldo2\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO2_V_OUT, AXP22X_ELDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO2_MASK),\n\tAXP_DESC(AXP22X, ELDO3, \"eldo3\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO3_V_OUT, AXP22X_ELDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO3_MASK),\n\t \n\tAXP_DESC_IO(AXP22X, LDO_IO0, \"ldo_io0\", \"ips\", 700, 3800, 100,\n\t\t    AXP22X_LDO_IO0_V_OUT, AXP22X_LDO_IO0_V_OUT_MASK,\n\t\t    AXP20X_GPIO0_CTRL, AXP20X_GPIO0_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\t \n\tAXP_DESC_IO(AXP22X, LDO_IO1, \"ldo_io1\", \"ips\", 700, 3800, 100,\n\t\t    AXP22X_LDO_IO1_V_OUT, AXP22X_LDO_IO1_V_OUT_MASK,\n\t\t    AXP20X_GPIO1_CTRL, AXP20X_GPIO1_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_FIXED(AXP22X, RTC_LDO, \"rtc_ldo\", \"ips\", 3000),\n};\n\nstatic const struct regulator_desc axp22x_drivevbus_regulator = {\n\t.name\t\t= \"drivevbus\",\n\t.supply_name\t= \"drivevbus\",\n\t.of_match\t= of_match_ptr(\"drivevbus\"),\n\t.regulators_node = of_match_ptr(\"regulators\"),\n\t.type\t\t= REGULATOR_VOLTAGE,\n\t.owner\t\t= THIS_MODULE,\n\t.enable_reg\t= AXP20X_VBUS_IPSOUT_MGMT,\n\t.enable_mask\t= AXP20X_VBUS_IPSOUT_MGMT_MASK,\n\t.ops\t\t= &axp20x_ops_sw,\n};\n\nstatic const struct linear_range axp313a_dcdc1_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(500000,   0,  70,  10000),\n\tREGULATOR_LINEAR_RANGE(1220000, 71,  87,  20000),\n\tREGULATOR_LINEAR_RANGE(1600000, 88, 106, 100000),\n};\n\nstatic const struct linear_range axp313a_dcdc2_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(500000,   0, 70, 10000),\n\tREGULATOR_LINEAR_RANGE(1220000, 71, 87, 20000),\n};\n\n \nstatic const struct linear_range axp313a_dcdc3_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(500000,   0,  70, 10000),\n\tREGULATOR_LINEAR_RANGE(1220000, 71, 102, 20000),\n};\n\nstatic const struct regulator_desc axp313a_regulators[] = {\n\tAXP_DESC_RANGES(AXP313A, DCDC1, \"dcdc1\", \"vin1\",\n\t\t\taxp313a_dcdc1_ranges, AXP313A_DCDC1_NUM_VOLTAGES,\n\t\t\tAXP313A_DCDC1_CONRTOL, AXP313A_DCDC_V_OUT_MASK,\n\t\t\tAXP313A_OUTPUT_CONTROL, BIT(0)),\n\tAXP_DESC_RANGES(AXP313A, DCDC2, \"dcdc2\", \"vin2\",\n\t\t\taxp313a_dcdc2_ranges, AXP313A_DCDC23_NUM_VOLTAGES,\n\t\t\tAXP313A_DCDC2_CONRTOL, AXP313A_DCDC_V_OUT_MASK,\n\t\t\tAXP313A_OUTPUT_CONTROL, BIT(1)),\n\tAXP_DESC_RANGES(AXP313A, DCDC3, \"dcdc3\", \"vin3\",\n\t\t\taxp313a_dcdc3_ranges, AXP313A_DCDC23_NUM_VOLTAGES,\n\t\t\tAXP313A_DCDC3_CONRTOL, AXP313A_DCDC_V_OUT_MASK,\n\t\t\tAXP313A_OUTPUT_CONTROL, BIT(2)),\n\tAXP_DESC(AXP313A, ALDO1, \"aldo1\", \"vin1\", 500, 3500, 100,\n\t\t AXP313A_ALDO1_CONRTOL, AXP313A_LDO_V_OUT_MASK,\n\t\t AXP313A_OUTPUT_CONTROL, BIT(3)),\n\tAXP_DESC(AXP313A, DLDO1, \"dldo1\", \"vin1\", 500, 3500, 100,\n\t\t AXP313A_DLDO1_CONRTOL, AXP313A_LDO_V_OUT_MASK,\n\t\t AXP313A_OUTPUT_CONTROL, BIT(4)),\n\tAXP_DESC_FIXED(AXP313A, RTC_LDO, \"rtc-ldo\", \"vin1\", 1800),\n};\n\n \nstatic const struct linear_range axp803_dcdc234_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(500000,\n\t\t\t       AXP803_DCDC234_500mV_START,\n\t\t\t       AXP803_DCDC234_500mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1220000,\n\t\t\t       AXP803_DCDC234_1220mV_START,\n\t\t\t       AXP803_DCDC234_1220mV_END,\n\t\t\t       20000),\n};\n\nstatic const struct linear_range axp803_dcdc5_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(800000,\n\t\t\t       AXP803_DCDC5_800mV_START,\n\t\t\t       AXP803_DCDC5_800mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1140000,\n\t\t\t       AXP803_DCDC5_1140mV_START,\n\t\t\t       AXP803_DCDC5_1140mV_END,\n\t\t\t       20000),\n};\n\nstatic const struct linear_range axp803_dcdc6_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(600000,\n\t\t\t       AXP803_DCDC6_600mV_START,\n\t\t\t       AXP803_DCDC6_600mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1120000,\n\t\t\t       AXP803_DCDC6_1120mV_START,\n\t\t\t       AXP803_DCDC6_1120mV_END,\n\t\t\t       20000),\n};\n\n \nstatic const struct linear_range axp803_dldo2_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(700000,\n\t\t\t       AXP803_DLDO2_700mV_START,\n\t\t\t       AXP803_DLDO2_700mV_END,\n\t\t\t       100000),\n\tREGULATOR_LINEAR_RANGE(3400000,\n\t\t\t       AXP803_DLDO2_3400mV_START,\n\t\t\t       AXP803_DLDO2_3400mV_END,\n\t\t\t       200000),\n};\n\nstatic const struct regulator_desc axp803_regulators[] = {\n\tAXP_DESC(AXP803, DCDC1, \"dcdc1\", \"vin1\", 1600, 3400, 100,\n\t\t AXP803_DCDC1_V_OUT, AXP803_DCDC1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC1_MASK),\n\tAXP_DESC_RANGES(AXP803, DCDC2, \"dcdc2\", \"vin2\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC2_V_OUT, AXP803_DCDC2_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC_RANGES(AXP803, DCDC3, \"dcdc3\", \"vin3\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC3_V_OUT, AXP803_DCDC3_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC_RANGES(AXP803, DCDC4, \"dcdc4\", \"vin4\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC4_V_OUT, AXP803_DCDC4_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC4_MASK),\n\tAXP_DESC_RANGES(AXP803, DCDC5, \"dcdc5\", \"vin5\",\n\t\t\taxp803_dcdc5_ranges, AXP803_DCDC5_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC5_V_OUT, AXP803_DCDC5_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC5_MASK),\n\tAXP_DESC_RANGES(AXP803, DCDC6, \"dcdc6\", \"vin6\",\n\t\t\taxp803_dcdc6_ranges, AXP803_DCDC6_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC6_V_OUT, AXP803_DCDC6_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC6_MASK),\n\t \n\tAXP_DESC_SW(AXP803, DC1SW, \"dc1sw\", NULL,\n\t\t    AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DC1SW_MASK),\n\tAXP_DESC(AXP803, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO1_V_OUT, AXP22X_ALDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP803, ALDO2, \"aldo2\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO2_V_OUT, AXP22X_ALDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP803, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO3_V_OUT, AXP22X_ALDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC(AXP803, DLDO1, \"dldo1\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO1_V_OUT, AXP22X_DLDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO1_MASK),\n\tAXP_DESC_RANGES(AXP803, DLDO2, \"dldo2\", \"dldoin\",\n\t\t\taxp803_dldo2_ranges, AXP803_DLDO2_NUM_VOLTAGES,\n\t\t\tAXP22X_DLDO2_V_OUT, AXP22X_DLDO2_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO2_MASK),\n\tAXP_DESC(AXP803, DLDO3, \"dldo3\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO3_V_OUT, AXP22X_DLDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO3_MASK),\n\tAXP_DESC(AXP803, DLDO4, \"dldo4\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO4_V_OUT, AXP22X_DLDO4_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO4_MASK),\n\tAXP_DESC(AXP803, ELDO1, \"eldo1\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO1_V_OUT, AXP22X_ELDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO1_MASK),\n\tAXP_DESC(AXP803, ELDO2, \"eldo2\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO2_V_OUT, AXP22X_ELDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO2_MASK),\n\tAXP_DESC(AXP803, ELDO3, \"eldo3\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO3_V_OUT, AXP22X_ELDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO3_MASK),\n\tAXP_DESC(AXP803, FLDO1, \"fldo1\", \"fldoin\", 700, 1450, 50,\n\t\t AXP803_FLDO1_V_OUT, AXP803_FLDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP803_PWR_OUT_FLDO1_MASK),\n\tAXP_DESC(AXP803, FLDO2, \"fldo2\", \"fldoin\", 700, 1450, 50,\n\t\t AXP803_FLDO2_V_OUT, AXP803_FLDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP803_PWR_OUT_FLDO2_MASK),\n\tAXP_DESC_IO(AXP803, LDO_IO0, \"ldo-io0\", \"ips\", 700, 3300, 100,\n\t\t    AXP22X_LDO_IO0_V_OUT, AXP22X_LDO_IO0_V_OUT_MASK,\n\t\t    AXP20X_GPIO0_CTRL, AXP20X_GPIO0_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_IO(AXP803, LDO_IO1, \"ldo-io1\", \"ips\", 700, 3300, 100,\n\t\t    AXP22X_LDO_IO1_V_OUT, AXP22X_LDO_IO1_V_OUT_MASK,\n\t\t    AXP20X_GPIO1_CTRL, AXP20X_GPIO1_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_FIXED(AXP803, RTC_LDO, \"rtc-ldo\", \"ips\", 3000),\n};\n\nstatic const struct linear_range axp806_dcdca_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(600000,\n\t\t\t       AXP806_DCDCA_600mV_START,\n\t\t\t       AXP806_DCDCA_600mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1120000,\n\t\t\t       AXP806_DCDCA_1120mV_START,\n\t\t\t       AXP806_DCDCA_1120mV_END,\n\t\t\t       20000),\n};\n\nstatic const struct linear_range axp806_dcdcd_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(600000,\n\t\t\t       AXP806_DCDCD_600mV_START,\n\t\t\t       AXP806_DCDCD_600mV_END,\n\t\t\t       20000),\n\tREGULATOR_LINEAR_RANGE(1600000,\n\t\t\t       AXP806_DCDCD_1600mV_START,\n\t\t\t       AXP806_DCDCD_1600mV_END,\n\t\t\t       100000),\n};\n\nstatic const struct regulator_desc axp806_regulators[] = {\n\tAXP_DESC_RANGES(AXP806, DCDCA, \"dcdca\", \"vina\",\n\t\t\taxp806_dcdca_ranges, AXP806_DCDCA_NUM_VOLTAGES,\n\t\t\tAXP806_DCDCA_V_CTRL, AXP806_DCDCA_V_CTRL_MASK,\n\t\t\tAXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_DCDCA_MASK),\n\tAXP_DESC(AXP806, DCDCB, \"dcdcb\", \"vinb\", 1000, 2550, 50,\n\t\t AXP806_DCDCB_V_CTRL, AXP806_DCDCB_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_DCDCB_MASK),\n\tAXP_DESC_RANGES(AXP806, DCDCC, \"dcdcc\", \"vinc\",\n\t\t\taxp806_dcdca_ranges, AXP806_DCDCA_NUM_VOLTAGES,\n\t\t\tAXP806_DCDCC_V_CTRL, AXP806_DCDCC_V_CTRL_MASK,\n\t\t\tAXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_DCDCC_MASK),\n\tAXP_DESC_RANGES(AXP806, DCDCD, \"dcdcd\", \"vind\",\n\t\t\taxp806_dcdcd_ranges, AXP806_DCDCD_NUM_VOLTAGES,\n\t\t\tAXP806_DCDCD_V_CTRL, AXP806_DCDCD_V_CTRL_MASK,\n\t\t\tAXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_DCDCD_MASK),\n\tAXP_DESC(AXP806, DCDCE, \"dcdce\", \"vine\", 1100, 3400, 100,\n\t\t AXP806_DCDCE_V_CTRL, AXP806_DCDCE_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_DCDCE_MASK),\n\tAXP_DESC(AXP806, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP806_ALDO1_V_CTRL, AXP806_ALDO1_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP806, ALDO2, \"aldo2\", \"aldoin\", 700, 3400, 100,\n\t\t AXP806_ALDO2_V_CTRL, AXP806_ALDO2_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP806, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP806_ALDO3_V_CTRL, AXP806_ALDO3_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL1, AXP806_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC(AXP806, BLDO1, \"bldo1\", \"bldoin\", 700, 1900, 100,\n\t\t AXP806_BLDO1_V_CTRL, AXP806_BLDO1_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_BLDO1_MASK),\n\tAXP_DESC(AXP806, BLDO2, \"bldo2\", \"bldoin\", 700, 1900, 100,\n\t\t AXP806_BLDO2_V_CTRL, AXP806_BLDO2_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_BLDO2_MASK),\n\tAXP_DESC(AXP806, BLDO3, \"bldo3\", \"bldoin\", 700, 1900, 100,\n\t\t AXP806_BLDO3_V_CTRL, AXP806_BLDO3_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_BLDO3_MASK),\n\tAXP_DESC(AXP806, BLDO4, \"bldo4\", \"bldoin\", 700, 1900, 100,\n\t\t AXP806_BLDO4_V_CTRL, AXP806_BLDO4_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_BLDO4_MASK),\n\tAXP_DESC(AXP806, CLDO1, \"cldo1\", \"cldoin\", 700, 3300, 100,\n\t\t AXP806_CLDO1_V_CTRL, AXP806_CLDO1_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_CLDO1_MASK),\n\tAXP_DESC_RANGES(AXP806, CLDO2, \"cldo2\", \"cldoin\",\n\t\t\taxp803_dldo2_ranges, AXP803_DLDO2_NUM_VOLTAGES,\n\t\t\tAXP806_CLDO2_V_CTRL, AXP806_CLDO2_V_CTRL_MASK,\n\t\t\tAXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_CLDO2_MASK),\n\tAXP_DESC(AXP806, CLDO3, \"cldo3\", \"cldoin\", 700, 3300, 100,\n\t\t AXP806_CLDO3_V_CTRL, AXP806_CLDO3_V_CTRL_MASK,\n\t\t AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_CLDO3_MASK),\n\tAXP_DESC_SW(AXP806, SW, \"sw\", \"swin\",\n\t\t    AXP806_PWR_OUT_CTRL2, AXP806_PWR_OUT_SW_MASK),\n};\n\nstatic const struct linear_range axp809_dcdc4_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(600000,\n\t\t\t       AXP809_DCDC4_600mV_START,\n\t\t\t       AXP809_DCDC4_600mV_END,\n\t\t\t       20000),\n\tREGULATOR_LINEAR_RANGE(1800000,\n\t\t\t       AXP809_DCDC4_1800mV_START,\n\t\t\t       AXP809_DCDC4_1800mV_END,\n\t\t\t       100000),\n};\n\nstatic const struct regulator_desc axp809_regulators[] = {\n\tAXP_DESC(AXP809, DCDC1, \"dcdc1\", \"vin1\", 1600, 3400, 100,\n\t\t AXP22X_DCDC1_V_OUT, AXP22X_DCDC1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC1_MASK),\n\tAXP_DESC(AXP809, DCDC2, \"dcdc2\", \"vin2\", 600, 1540, 20,\n\t\t AXP22X_DCDC2_V_OUT, AXP22X_DCDC2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC(AXP809, DCDC3, \"dcdc3\", \"vin3\", 600, 1860, 20,\n\t\t AXP22X_DCDC3_V_OUT, AXP22X_DCDC3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC_RANGES(AXP809, DCDC4, \"dcdc4\", \"vin4\",\n\t\t\taxp809_dcdc4_ranges, AXP809_DCDC4_NUM_VOLTAGES,\n\t\t\tAXP22X_DCDC4_V_OUT, AXP22X_DCDC4_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC4_MASK),\n\tAXP_DESC(AXP809, DCDC5, \"dcdc5\", \"vin5\", 1000, 2550, 50,\n\t\t AXP22X_DCDC5_V_OUT, AXP22X_DCDC5_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DCDC5_MASK),\n\t \n\tAXP_DESC_SW(AXP809, DC1SW, \"dc1sw\", NULL,\n\t\t    AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DC1SW_MASK),\n\t \n\tAXP_DESC(AXP809, DC5LDO, \"dc5ldo\", NULL, 700, 1400, 100,\n\t\t AXP22X_DC5LDO_V_OUT, AXP22X_DC5LDO_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_DC5LDO_MASK),\n\tAXP_DESC(AXP809, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO1_V_OUT, AXP22X_ALDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP809, ALDO2, \"aldo2\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO2_V_OUT, AXP22X_ALDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP22X_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP809, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO3_V_OUT, AXP22X_ALDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC_RANGES(AXP809, DLDO1, \"dldo1\", \"dldoin\",\n\t\t\taxp803_dldo2_ranges, AXP803_DLDO2_NUM_VOLTAGES,\n\t\t\tAXP22X_DLDO1_V_OUT, AXP22X_DLDO1_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO1_MASK),\n\tAXP_DESC(AXP809, DLDO2, \"dldo2\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO2_V_OUT, AXP22X_DLDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO2_MASK),\n\tAXP_DESC(AXP809, ELDO1, \"eldo1\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO1_V_OUT, AXP22X_ELDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO1_MASK),\n\tAXP_DESC(AXP809, ELDO2, \"eldo2\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO2_V_OUT, AXP22X_ELDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO2_MASK),\n\tAXP_DESC(AXP809, ELDO3, \"eldo3\", \"eldoin\", 700, 3300, 100,\n\t\t AXP22X_ELDO3_V_OUT, AXP22X_ELDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO3_MASK),\n\t \n\tAXP_DESC_IO(AXP809, LDO_IO0, \"ldo_io0\", \"ips\", 700, 3800, 100,\n\t\t    AXP22X_LDO_IO0_V_OUT, AXP22X_LDO_IO0_V_OUT_MASK,\n\t\t    AXP20X_GPIO0_CTRL, AXP20X_GPIO0_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\t \n\tAXP_DESC_IO(AXP809, LDO_IO1, \"ldo_io1\", \"ips\", 700, 3800, 100,\n\t\t    AXP22X_LDO_IO1_V_OUT, AXP22X_LDO_IO1_V_OUT_MASK,\n\t\t    AXP20X_GPIO1_CTRL, AXP20X_GPIO1_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_FIXED(AXP809, RTC_LDO, \"rtc_ldo\", \"ips\", 1800),\n\tAXP_DESC_SW(AXP809, SW, \"sw\", \"swin\",\n\t\t    AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_SW_MASK),\n};\n\nstatic const struct regulator_desc axp813_regulators[] = {\n\tAXP_DESC(AXP813, DCDC1, \"dcdc1\", \"vin1\", 1600, 3400, 100,\n\t\t AXP803_DCDC1_V_OUT, AXP803_DCDC1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC1_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC2, \"dcdc2\", \"vin2\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC2_V_OUT, AXP803_DCDC2_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC3, \"dcdc3\", \"vin3\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC3_V_OUT, AXP803_DCDC3_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC4, \"dcdc4\", \"vin4\",\n\t\t\taxp803_dcdc234_ranges, AXP803_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC4_V_OUT, AXP803_DCDC4_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC4_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC5, \"dcdc5\", \"vin5\",\n\t\t\taxp803_dcdc5_ranges, AXP803_DCDC5_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC5_V_OUT, AXP803_DCDC5_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC5_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC6, \"dcdc6\", \"vin6\",\n\t\t\taxp803_dcdc6_ranges, AXP803_DCDC6_NUM_VOLTAGES,\n\t\t\tAXP803_DCDC6_V_OUT, AXP803_DCDC6_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP803_PWR_OUT_DCDC6_MASK),\n\tAXP_DESC_RANGES(AXP813, DCDC7, \"dcdc7\", \"vin7\",\n\t\t\taxp803_dcdc6_ranges, AXP803_DCDC6_NUM_VOLTAGES,\n\t\t\tAXP813_DCDC7_V_OUT, AXP813_DCDC7_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL1, AXP813_PWR_OUT_DCDC7_MASK),\n\tAXP_DESC(AXP813, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO1_V_OUT, AXP22X_ALDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP813, ALDO2, \"aldo2\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO2_V_OUT, AXP22X_ALDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP813, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP22X_ALDO3_V_OUT, AXP22X_ALDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP806_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC(AXP813, DLDO1, \"dldo1\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO1_V_OUT, AXP22X_DLDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO1_MASK),\n\tAXP_DESC_RANGES(AXP813, DLDO2, \"dldo2\", \"dldoin\",\n\t\t\taxp803_dldo2_ranges, AXP803_DLDO2_NUM_VOLTAGES,\n\t\t\tAXP22X_DLDO2_V_OUT, AXP22X_DLDO2_V_OUT_MASK,\n\t\t\tAXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO2_MASK),\n\tAXP_DESC(AXP813, DLDO3, \"dldo3\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO3_V_OUT, AXP22X_DLDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO3_MASK),\n\tAXP_DESC(AXP813, DLDO4, \"dldo4\", \"dldoin\", 700, 3300, 100,\n\t\t AXP22X_DLDO4_V_OUT, AXP22X_DLDO4_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DLDO4_MASK),\n\tAXP_DESC(AXP813, ELDO1, \"eldo1\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO1_V_OUT, AXP22X_ELDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO1_MASK),\n\tAXP_DESC(AXP813, ELDO2, \"eldo2\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO2_V_OUT, AXP22X_ELDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO2_MASK),\n\tAXP_DESC(AXP813, ELDO3, \"eldo3\", \"eldoin\", 700, 1900, 50,\n\t\t AXP22X_ELDO3_V_OUT, AXP22X_ELDO3_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_ELDO3_MASK),\n\t \n\tAXP_DESC(AXP813, FLDO1, \"fldo1\", \"fldoin\", 700, 1450, 50,\n\t\t AXP803_FLDO1_V_OUT, AXP803_FLDO1_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP803_PWR_OUT_FLDO1_MASK),\n\tAXP_DESC(AXP813, FLDO2, \"fldo2\", \"fldoin\", 700, 1450, 50,\n\t\t AXP803_FLDO2_V_OUT, AXP803_FLDO2_V_OUT_MASK,\n\t\t AXP22X_PWR_OUT_CTRL3, AXP803_PWR_OUT_FLDO2_MASK),\n\t \n\tAXP_DESC_FIXED(AXP813, RTC_LDO, \"rtc-ldo\", \"ips\", 1800),\n\tAXP_DESC_IO(AXP813, LDO_IO0, \"ldo-io0\", \"ips\", 700, 3300, 100,\n\t\t    AXP22X_LDO_IO0_V_OUT, AXP22X_LDO_IO0_V_OUT_MASK,\n\t\t    AXP20X_GPIO0_CTRL, AXP20X_GPIO0_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_IO(AXP813, LDO_IO1, \"ldo-io1\", \"ips\", 700, 3300, 100,\n\t\t    AXP22X_LDO_IO1_V_OUT, AXP22X_LDO_IO1_V_OUT_MASK,\n\t\t    AXP20X_GPIO1_CTRL, AXP20X_GPIO1_FUNC_MASK,\n\t\t    AXP22X_IO_ENABLED, AXP22X_IO_DISABLED),\n\tAXP_DESC_SW(AXP813, SW, \"sw\", \"swin\",\n\t\t    AXP22X_PWR_OUT_CTRL2, AXP22X_PWR_OUT_DC1SW_MASK),\n};\n\nstatic const struct linear_range axp15060_dcdc234_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(500000,\n\t\t\t       AXP15060_DCDC234_500mV_START,\n\t\t\t       AXP15060_DCDC234_500mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1220000,\n\t\t\t       AXP15060_DCDC234_1220mV_START,\n\t\t\t       AXP15060_DCDC234_1220mV_END,\n\t\t\t       20000),\n};\n\nstatic const struct linear_range axp15060_dcdc5_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(800000,\n\t\t\t       AXP15060_DCDC5_800mV_START,\n\t\t\t       AXP15060_DCDC5_800mV_END,\n\t\t\t       10000),\n\tREGULATOR_LINEAR_RANGE(1140000,\n\t\t\t       AXP15060_DCDC5_1140mV_START,\n\t\t\t       AXP15060_DCDC5_1140mV_END,\n\t\t\t       20000),\n};\n\nstatic const struct regulator_desc axp15060_regulators[] = {\n\tAXP_DESC(AXP15060, DCDC1, \"dcdc1\", \"vin1\", 1500, 3400, 100,\n\t\t AXP15060_DCDC1_V_CTRL, AXP15060_DCDC1_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC1_MASK),\n\tAXP_DESC_RANGES(AXP15060, DCDC2, \"dcdc2\", \"vin2\",\n\t\t\taxp15060_dcdc234_ranges, AXP15060_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP15060_DCDC2_V_CTRL, AXP15060_DCDC2_V_CTRL_MASK,\n\t\t\tAXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC2_MASK),\n\tAXP_DESC_RANGES(AXP15060, DCDC3, \"dcdc3\", \"vin3\",\n\t\t\taxp15060_dcdc234_ranges, AXP15060_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP15060_DCDC3_V_CTRL, AXP15060_DCDC3_V_CTRL_MASK,\n\t\t\tAXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC3_MASK),\n\tAXP_DESC_RANGES(AXP15060, DCDC4, \"dcdc4\", \"vin4\",\n\t\t\taxp15060_dcdc234_ranges, AXP15060_DCDC234_NUM_VOLTAGES,\n\t\t\tAXP15060_DCDC4_V_CTRL, AXP15060_DCDC4_V_CTRL_MASK,\n\t\t\tAXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC4_MASK),\n\tAXP_DESC_RANGES(AXP15060, DCDC5, \"dcdc5\", \"vin5\",\n\t\t\taxp15060_dcdc5_ranges, AXP15060_DCDC5_NUM_VOLTAGES,\n\t\t\tAXP15060_DCDC5_V_CTRL, AXP15060_DCDC5_V_CTRL_MASK,\n\t\t\tAXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC5_MASK),\n\tAXP_DESC(AXP15060, DCDC6, \"dcdc6\", \"vin6\", 500, 3400, 100,\n\t\t AXP15060_DCDC6_V_CTRL, AXP15060_DCDC6_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL1, AXP15060_PWR_OUT_DCDC6_MASK),\n\tAXP_DESC(AXP15060, ALDO1, \"aldo1\", \"aldoin\", 700, 3300, 100,\n\t\t AXP15060_ALDO1_V_CTRL, AXP15060_ALDO1_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_ALDO1_MASK),\n\tAXP_DESC(AXP15060, ALDO2, \"aldo2\", \"aldoin\", 700, 3300, 100,\n\t\t AXP15060_ALDO2_V_CTRL, AXP15060_ALDO2_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_ALDO2_MASK),\n\tAXP_DESC(AXP15060, ALDO3, \"aldo3\", \"aldoin\", 700, 3300, 100,\n\t\t AXP15060_ALDO3_V_CTRL, AXP15060_ALDO3_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_ALDO3_MASK),\n\tAXP_DESC(AXP15060, ALDO4, \"aldo4\", \"aldoin\", 700, 3300, 100,\n\t\t AXP15060_ALDO4_V_CTRL, AXP15060_ALDO4_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_ALDO4_MASK),\n\tAXP_DESC(AXP15060, ALDO5, \"aldo5\", \"aldoin\", 700, 3300, 100,\n\t\t AXP15060_ALDO5_V_CTRL, AXP15060_ALDO5_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_ALDO5_MASK),\n\tAXP_DESC(AXP15060, BLDO1, \"bldo1\", \"bldoin\", 700, 3300, 100,\n\t\t AXP15060_BLDO1_V_CTRL, AXP15060_BLDO1_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_BLDO1_MASK),\n\tAXP_DESC(AXP15060, BLDO2, \"bldo2\", \"bldoin\", 700, 3300, 100,\n\t\t AXP15060_BLDO2_V_CTRL, AXP15060_BLDO2_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_BLDO2_MASK),\n\tAXP_DESC(AXP15060, BLDO3, \"bldo3\", \"bldoin\", 700, 3300, 100,\n\t\t AXP15060_BLDO3_V_CTRL, AXP15060_BLDO3_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL2, AXP15060_PWR_OUT_BLDO3_MASK),\n\tAXP_DESC(AXP15060, BLDO4, \"bldo4\", \"bldoin\", 700, 3300, 100,\n\t\t AXP15060_BLDO4_V_CTRL, AXP15060_BLDO4_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_BLDO4_MASK),\n\tAXP_DESC(AXP15060, BLDO5, \"bldo5\", \"bldoin\", 700, 3300, 100,\n\t\t AXP15060_BLDO5_V_CTRL, AXP15060_BLDO5_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_BLDO5_MASK),\n\tAXP_DESC(AXP15060, CLDO1, \"cldo1\", \"cldoin\", 700, 3300, 100,\n\t\t AXP15060_CLDO1_V_CTRL, AXP15060_CLDO1_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_CLDO1_MASK),\n\tAXP_DESC(AXP15060, CLDO2, \"cldo2\", \"cldoin\", 700, 3300, 100,\n\t\t AXP15060_CLDO2_V_CTRL, AXP15060_CLDO2_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_CLDO2_MASK),\n\tAXP_DESC(AXP15060, CLDO3, \"cldo3\", \"cldoin\", 700, 3300, 100,\n\t\t AXP15060_CLDO3_V_CTRL, AXP15060_CLDO3_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_CLDO3_MASK),\n\tAXP_DESC(AXP15060, CLDO4, \"cldo4\", \"cldoin\", 700, 4200, 100,\n\t\t AXP15060_CLDO4_V_CTRL, AXP15060_CLDO4_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_CLDO4_MASK),\n\t \n\tAXP_DESC(AXP15060, CPUSLDO, \"cpusldo\", NULL, 700, 1400, 50,\n\t\t AXP15060_CPUSLDO_V_CTRL, AXP15060_CPUSLDO_V_CTRL_MASK,\n\t\t AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_CPUSLDO_MASK),\n\t \n\tAXP_DESC_SW(AXP15060, SW, \"sw\", NULL,\n\t\t    AXP15060_PWR_OUT_CTRL3, AXP15060_PWR_OUT_SW_MASK),\n\t \n\tAXP_DESC_FIXED(AXP15060, RTC_LDO, \"rtc-ldo\", NULL, 1800),\n};\n\nstatic int axp20x_set_dcdc_freq(struct platform_device *pdev, u32 dcdcfreq)\n{\n\tstruct axp20x_dev *axp20x = dev_get_drvdata(pdev->dev.parent);\n\tunsigned int reg = AXP20X_DCDC_FREQ;\n\tu32 min, max, def, step;\n\n\tswitch (axp20x->variant) {\n\tcase AXP202_ID:\n\tcase AXP209_ID:\n\t\tmin = 750;\n\t\tmax = 1875;\n\t\tdef = 1500;\n\t\tstep = 75;\n\t\tbreak;\n\tcase AXP803_ID:\n\tcase AXP813_ID:\n\t\t \n\t\treg = AXP803_DCDC_FREQ_CTRL;\n\t\tfallthrough;\t \n\tcase AXP806_ID:\n\t\t \n\t\tif (axp20x->variant == AXP806_ID)\n\t\t\treg = AXP806_DCDC_FREQ_CTRL;\n\t\tfallthrough;\n\tcase AXP221_ID:\n\tcase AXP223_ID:\n\tcase AXP809_ID:\n\t\tmin = 1800;\n\t\tmax = 4050;\n\t\tdef = 3000;\n\t\tstep = 150;\n\t\tbreak;\n\tcase AXP313A_ID:\n\tcase AXP15060_ID:\n\t\t \n\t\tif (dcdcfreq != 0) {\n\t\t\tdev_err(&pdev->dev,\n\t\t\t\t\"DCDC frequency on this PMIC is fixed to 3 MHz.\\n\");\n\t\t\treturn -EINVAL;\n\t\t}\n\n\t\treturn 0;\n\tdefault:\n\t\tdev_err(&pdev->dev,\n\t\t\t\"Setting DCDC frequency for unsupported AXP variant\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tif (dcdcfreq == 0)\n\t\tdcdcfreq = def;\n\n\tif (dcdcfreq < min) {\n\t\tdcdcfreq = min;\n\t\tdev_warn(&pdev->dev, \"DCDC frequency too low. Set to %ukHz\\n\",\n\t\t\t min);\n\t}\n\n\tif (dcdcfreq > max) {\n\t\tdcdcfreq = max;\n\t\tdev_warn(&pdev->dev, \"DCDC frequency too high. Set to %ukHz\\n\",\n\t\t\t max);\n\t}\n\n\tdcdcfreq = (dcdcfreq - min) / step;\n\n\treturn regmap_update_bits(axp20x->regmap, reg,\n\t\t\t\t  AXP20X_FREQ_DCDC_MASK, dcdcfreq);\n}\n\nstatic int axp20x_regulator_parse_dt(struct platform_device *pdev)\n{\n\tstruct device_node *np, *regulators;\n\tint ret = 0;\n\tu32 dcdcfreq = 0;\n\n\tnp = of_node_get(pdev->dev.parent->of_node);\n\tif (!np)\n\t\treturn 0;\n\n\tregulators = of_get_child_by_name(np, \"regulators\");\n\tif (!regulators) {\n\t\tdev_warn(&pdev->dev, \"regulators node not found\\n\");\n\t} else {\n\t\tof_property_read_u32(regulators, \"x-powers,dcdc-freq\", &dcdcfreq);\n\t\tret = axp20x_set_dcdc_freq(pdev, dcdcfreq);\n\t\tif (ret < 0) {\n\t\t\tdev_err(&pdev->dev, \"Error setting dcdc frequency: %d\\n\", ret);\n\t\t}\n\t\tof_node_put(regulators);\n\t}\n\n\tof_node_put(np);\n\treturn ret;\n}\n\nstatic int axp20x_set_dcdc_workmode(struct regulator_dev *rdev, int id, u32 workmode)\n{\n\tstruct axp20x_dev *axp20x = rdev_get_drvdata(rdev);\n\tunsigned int reg = AXP20X_DCDC_MODE;\n\tunsigned int mask;\n\n\tswitch (axp20x->variant) {\n\tcase AXP202_ID:\n\tcase AXP209_ID:\n\t\tif ((id != AXP20X_DCDC2) && (id != AXP20X_DCDC3))\n\t\t\treturn -EINVAL;\n\n\t\tmask = AXP20X_WORKMODE_DCDC2_MASK;\n\t\tif (id == AXP20X_DCDC3)\n\t\t\tmask = AXP20X_WORKMODE_DCDC3_MASK;\n\n\t\tworkmode <<= ffs(mask) - 1;\n\t\tbreak;\n\n\tcase AXP806_ID:\n\t\t \n\t\treg = AXP806_DCDC_MODE_CTRL2;\n\t\tfallthrough;\t \n\tcase AXP221_ID:\n\tcase AXP223_ID:\n\tcase AXP809_ID:\n\t\tif (id < AXP22X_DCDC1 || id > AXP22X_DCDC5)\n\t\t\treturn -EINVAL;\n\n\t\tmask = AXP22X_WORKMODE_DCDCX_MASK(id - AXP22X_DCDC1);\n\t\tworkmode <<= id - AXP22X_DCDC1;\n\t\tbreak;\n\n\tcase AXP803_ID:\n\t\tif (id < AXP803_DCDC1 || id > AXP803_DCDC6)\n\t\t\treturn -EINVAL;\n\n\t\tmask = AXP22X_WORKMODE_DCDCX_MASK(id - AXP803_DCDC1);\n\t\tworkmode <<= id - AXP803_DCDC1;\n\t\tbreak;\n\n\tcase AXP813_ID:\n\t\tif (id < AXP813_DCDC1 || id > AXP813_DCDC7)\n\t\t\treturn -EINVAL;\n\n\t\tmask = AXP22X_WORKMODE_DCDCX_MASK(id - AXP813_DCDC1);\n\t\tworkmode <<= id - AXP813_DCDC1;\n\t\tbreak;\n\n\tcase AXP15060_ID:\n\t\treg = AXP15060_DCDC_MODE_CTRL2;\n\t\tif (id < AXP15060_DCDC1 || id > AXP15060_DCDC6)\n\t\t\treturn -EINVAL;\n\n\t\tmask = AXP22X_WORKMODE_DCDCX_MASK(id - AXP15060_DCDC1);\n\t\tworkmode <<= id - AXP15060_DCDC1;\n\t\tbreak;\n\n\tdefault:\n\t\t \n\t\tWARN_ON(1);\n\t\treturn -EINVAL;\n\t}\n\n\treturn regmap_update_bits(rdev->regmap, reg, mask, workmode);\n}\n\n \nstatic bool axp20x_is_polyphase_slave(struct axp20x_dev *axp20x, int id)\n{\n\tu32 reg = 0;\n\n\t \n\tswitch (axp20x->variant) {\n\tcase AXP803_ID:\n\tcase AXP813_ID:\n\t\tregmap_read(axp20x->regmap, AXP803_POLYPHASE_CTRL, &reg);\n\n\t\tswitch (id) {\n\t\tcase AXP803_DCDC3:\n\t\t\treturn !!(reg & AXP803_DCDC23_POLYPHASE_DUAL);\n\t\tcase AXP803_DCDC6:\n\t\t\treturn !!(reg & AXP803_DCDC56_POLYPHASE_DUAL);\n\t\t}\n\t\tbreak;\n\n\tcase AXP806_ID:\n\t\tregmap_read(axp20x->regmap, AXP806_DCDC_MODE_CTRL2, &reg);\n\n\t\tswitch (id) {\n\t\tcase AXP806_DCDCB:\n\t\t\treturn (((reg & AXP806_DCDCABC_POLYPHASE_MASK) ==\n\t\t\t\tAXP806_DCDCAB_POLYPHASE_DUAL) ||\n\t\t\t\t((reg & AXP806_DCDCABC_POLYPHASE_MASK) ==\n\t\t\t\tAXP806_DCDCABC_POLYPHASE_TRI));\n\t\tcase AXP806_DCDCC:\n\t\t\treturn ((reg & AXP806_DCDCABC_POLYPHASE_MASK) ==\n\t\t\t\tAXP806_DCDCABC_POLYPHASE_TRI);\n\t\tcase AXP806_DCDCE:\n\t\t\treturn !!(reg & AXP806_DCDCDE_POLYPHASE_DUAL);\n\t\t}\n\t\tbreak;\n\n\tcase AXP15060_ID:\n\t\tregmap_read(axp20x->regmap, AXP15060_DCDC_MODE_CTRL1, &reg);\n\n\t\tswitch (id) {\n\t\tcase AXP15060_DCDC3:\n\t\t\treturn !!(reg & AXP15060_DCDC23_POLYPHASE_DUAL_MASK);\n\t\tcase AXP15060_DCDC6:\n\t\t\treturn !!(reg & AXP15060_DCDC46_POLYPHASE_DUAL_MASK);\n\t\t}\n\t\tbreak;\n\n\tdefault:\n\t\treturn false;\n\t}\n\n\treturn false;\n}\n\nstatic int axp20x_regulator_probe(struct platform_device *pdev)\n{\n\tstruct regulator_dev *rdev;\n\tstruct axp20x_dev *axp20x = dev_get_drvdata(pdev->dev.parent);\n\tconst struct regulator_desc *regulators;\n\tstruct regulator_config config = {\n\t\t.dev = pdev->dev.parent,\n\t\t.regmap = axp20x->regmap,\n\t\t.driver_data = axp20x,\n\t};\n\tint ret, i, nregulators;\n\tu32 workmode;\n\tconst char *dcdc1_name = axp22x_regulators[AXP22X_DCDC1].name;\n\tconst char *dcdc5_name = axp22x_regulators[AXP22X_DCDC5].name;\n\tconst char *aldo1_name = axp15060_regulators[AXP15060_ALDO1].name;\n\tbool drivevbus = false;\n\n\tswitch (axp20x->variant) {\n\tcase AXP202_ID:\n\tcase AXP209_ID:\n\t\tregulators = axp20x_regulators;\n\t\tnregulators = AXP20X_REG_ID_MAX;\n\t\tbreak;\n\tcase AXP221_ID:\n\tcase AXP223_ID:\n\t\tregulators = axp22x_regulators;\n\t\tnregulators = AXP22X_REG_ID_MAX;\n\t\tdrivevbus = of_property_read_bool(pdev->dev.parent->of_node,\n\t\t\t\t\t\t  \"x-powers,drive-vbus-en\");\n\t\tbreak;\n\tcase AXP313A_ID:\n\t\tregulators = axp313a_regulators;\n\t\tnregulators = AXP313A_REG_ID_MAX;\n\t\tbreak;\n\tcase AXP803_ID:\n\t\tregulators = axp803_regulators;\n\t\tnregulators = AXP803_REG_ID_MAX;\n\t\tdrivevbus = of_property_read_bool(pdev->dev.parent->of_node,\n\t\t\t\t\t\t  \"x-powers,drive-vbus-en\");\n\t\tbreak;\n\tcase AXP806_ID:\n\t\tregulators = axp806_regulators;\n\t\tnregulators = AXP806_REG_ID_MAX;\n\t\tbreak;\n\tcase AXP809_ID:\n\t\tregulators = axp809_regulators;\n\t\tnregulators = AXP809_REG_ID_MAX;\n\t\tbreak;\n\tcase AXP813_ID:\n\t\tregulators = axp813_regulators;\n\t\tnregulators = AXP813_REG_ID_MAX;\n\t\tdrivevbus = of_property_read_bool(pdev->dev.parent->of_node,\n\t\t\t\t\t\t  \"x-powers,drive-vbus-en\");\n\t\tbreak;\n\tcase AXP15060_ID:\n\t\tregulators = axp15060_regulators;\n\t\tnregulators = AXP15060_REG_ID_MAX;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(&pdev->dev, \"Unsupported AXP variant: %ld\\n\",\n\t\t\taxp20x->variant);\n\t\treturn -EINVAL;\n\t}\n\n\t \n\taxp20x_regulator_parse_dt(pdev);\n\n\tfor (i = 0; i < nregulators; i++) {\n\t\tconst struct regulator_desc *desc = &regulators[i];\n\t\tstruct regulator_desc *new_desc;\n\n\t\t \n\t\tif (axp20x_is_polyphase_slave(axp20x, i))\n\t\t\tcontinue;\n\n\t\t \n\t\tif (axp20x->variant == AXP813_ID && i == AXP813_FLDO3)\n\t\t\tcontinue;\n\n\t\t \n\t\tif ((regulators == axp22x_regulators && i == AXP22X_DC1SW) ||\n\t\t    (regulators == axp803_regulators && i == AXP803_DC1SW) ||\n\t\t    (regulators == axp809_regulators && i == AXP809_DC1SW) ||\n\t\t    (regulators == axp15060_regulators && i == AXP15060_SW)) {\n\t\t\tnew_desc = devm_kzalloc(&pdev->dev, sizeof(*desc),\n\t\t\t\t\t\tGFP_KERNEL);\n\t\t\tif (!new_desc)\n\t\t\t\treturn -ENOMEM;\n\n\t\t\t*new_desc = regulators[i];\n\t\t\tnew_desc->supply_name = dcdc1_name;\n\t\t\tdesc = new_desc;\n\t\t}\n\n\t\tif ((regulators == axp22x_regulators && i == AXP22X_DC5LDO) ||\n\t\t    (regulators == axp809_regulators && i == AXP809_DC5LDO) ||\n\t\t    (regulators == axp15060_regulators && i == AXP15060_CPUSLDO)) {\n\t\t\tnew_desc = devm_kzalloc(&pdev->dev, sizeof(*desc),\n\t\t\t\t\t\tGFP_KERNEL);\n\t\t\tif (!new_desc)\n\t\t\t\treturn -ENOMEM;\n\n\t\t\t*new_desc = regulators[i];\n\t\t\tnew_desc->supply_name = dcdc5_name;\n\t\t\tdesc = new_desc;\n\t\t}\n\n\n\t\tif (regulators == axp15060_regulators && i == AXP15060_RTC_LDO) {\n\t\t\tnew_desc = devm_kzalloc(&pdev->dev, sizeof(*desc),\n\t\t\t\t\t\tGFP_KERNEL);\n\t\t\tif (!new_desc)\n\t\t\t\treturn -ENOMEM;\n\n\t\t\t*new_desc = regulators[i];\n\t\t\tnew_desc->supply_name = aldo1_name;\n\t\t\tdesc = new_desc;\n\t\t}\n\n\t\trdev = devm_regulator_register(&pdev->dev, desc, &config);\n\t\tif (IS_ERR(rdev)) {\n\t\t\tdev_err(&pdev->dev, \"Failed to register %s\\n\",\n\t\t\t\tregulators[i].name);\n\n\t\t\treturn PTR_ERR(rdev);\n\t\t}\n\n\t\tret = of_property_read_u32(rdev->dev.of_node,\n\t\t\t\t\t   \"x-powers,dcdc-workmode\",\n\t\t\t\t\t   &workmode);\n\t\tif (!ret) {\n\t\t\tif (axp20x_set_dcdc_workmode(rdev, i, workmode))\n\t\t\t\tdev_err(&pdev->dev, \"Failed to set workmode on %s\\n\",\n\t\t\t\t\trdev->desc->name);\n\t\t}\n\n\t\t \n\t\tif ((regulators == axp22x_regulators && i == AXP22X_DCDC1) ||\n\t\t    (regulators == axp809_regulators && i == AXP809_DCDC1) ||\n\t\t    (regulators == axp15060_regulators && i == AXP15060_DCDC1))\n\t\t\tof_property_read_string(rdev->dev.of_node,\n\t\t\t\t\t\t\"regulator-name\",\n\t\t\t\t\t\t&dcdc1_name);\n\n\t\tif ((regulators == axp22x_regulators && i == AXP22X_DCDC5) ||\n\t\t    (regulators == axp809_regulators && i == AXP809_DCDC5) ||\n\t\t    (regulators == axp15060_regulators && i == AXP15060_DCDC5))\n\t\t\tof_property_read_string(rdev->dev.of_node,\n\t\t\t\t\t\t\"regulator-name\",\n\t\t\t\t\t\t&dcdc5_name);\n\n\t\tif (regulators == axp15060_regulators && i == AXP15060_ALDO1)\n\t\t\tof_property_read_string(rdev->dev.of_node,\n\t\t\t\t\t\t\"regulator-name\",\n\t\t\t\t\t\t&aldo1_name);\n\t}\n\n\tif (drivevbus) {\n\t\t \n\t\tregmap_update_bits(axp20x->regmap, AXP20X_OVER_TMP,\n\t\t\t\t   AXP22X_MISC_N_VBUSEN_FUNC, 0);\n\t\trdev = devm_regulator_register(&pdev->dev,\n\t\t\t\t\t       &axp22x_drivevbus_regulator,\n\t\t\t\t\t       &config);\n\t\tif (IS_ERR(rdev)) {\n\t\t\tdev_err(&pdev->dev, \"Failed to register drivevbus\\n\");\n\t\t\treturn PTR_ERR(rdev);\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic struct platform_driver axp20x_regulator_driver = {\n\t.probe\t= axp20x_regulator_probe,\n\t.driver\t= {\n\t\t.name\t\t= \"axp20x-regulator\",\n\t\t.probe_type\t= PROBE_PREFER_ASYNCHRONOUS,\n\t},\n};\n\nmodule_platform_driver(axp20x_regulator_driver);\n\nMODULE_LICENSE(\"GPL v2\");\nMODULE_AUTHOR(\"Carlo Caione <carlo@caione.org>\");\nMODULE_DESCRIPTION(\"Regulator Driver for AXP20X PMIC\");\nMODULE_ALIAS(\"platform:axp20x-regulator\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}