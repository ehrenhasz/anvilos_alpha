{
  "module_name": "mt6360-regulator.c",
  "hash_id": "7a0404a79a73e50ca1149300ecc852e0d08736a7eeeb3dbeb87637bd15489789",
  "original_prompt": "Ingested from linux-6.6.14/drivers/regulator/mt6360-regulator.c",
  "human_readable_source": "\n\n\n\n\n\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n#include <linux/regulator/driver.h>\n#include <linux/regulator/machine.h>\n\n#include <dt-bindings/regulator/mediatek,mt6360-regulator.h>\n\nenum {\n\tMT6360_REGULATOR_BUCK1 = 0,\n\tMT6360_REGULATOR_BUCK2,\n\tMT6360_REGULATOR_LDO6,\n\tMT6360_REGULATOR_LDO7,\n\tMT6360_REGULATOR_LDO1,\n\tMT6360_REGULATOR_LDO2,\n\tMT6360_REGULATOR_LDO3,\n\tMT6360_REGULATOR_LDO5,\n\tMT6360_REGULATOR_MAX,\n};\n\nstruct mt6360_irq_mapping {\n\tconst char *name;\n\tirq_handler_t handler;\n};\n\nstruct mt6360_regulator_desc {\n\tconst struct regulator_desc desc;\n\tunsigned int mode_reg;\n\tunsigned int mode_mask;\n\tunsigned int state_reg;\n\tunsigned int state_mask;\n\tconst struct mt6360_irq_mapping *irq_tables;\n\tint irq_table_size;\n};\n\nstruct mt6360_regulator_data {\n\tstruct device *dev;\n\tstruct regmap *regmap;\n};\n\nstatic irqreturn_t mt6360_pgb_event_handler(int irq, void *data)\n{\n\tstruct regulator_dev *rdev = data;\n\n\tregulator_notifier_call_chain(rdev, REGULATOR_EVENT_FAIL, NULL);\n\treturn IRQ_HANDLED;\n}\n\nstatic irqreturn_t mt6360_oc_event_handler(int irq, void *data)\n{\n\tstruct regulator_dev *rdev = data;\n\n\tregulator_notifier_call_chain(rdev, REGULATOR_EVENT_OVER_CURRENT, NULL);\n\treturn IRQ_HANDLED;\n}\n\nstatic irqreturn_t mt6360_ov_event_handler(int irq, void *data)\n{\n\tstruct regulator_dev *rdev = data;\n\n\tregulator_notifier_call_chain(rdev, REGULATOR_EVENT_REGULATION_OUT, NULL);\n\treturn IRQ_HANDLED;\n}\n\nstatic irqreturn_t mt6360_uv_event_handler(int irq, void *data)\n{\n\tstruct regulator_dev *rdev = data;\n\n\tregulator_notifier_call_chain(rdev, REGULATOR_EVENT_UNDER_VOLTAGE, NULL);\n\treturn IRQ_HANDLED;\n}\n\nstatic const struct mt6360_irq_mapping buck1_irq_tbls[] = {\n\t{ \"buck1_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"buck1_oc_evt\", mt6360_oc_event_handler },\n\t{ \"buck1_ov_evt\", mt6360_ov_event_handler },\n\t{ \"buck1_uv_evt\", mt6360_uv_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping buck2_irq_tbls[] = {\n\t{ \"buck2_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"buck2_oc_evt\", mt6360_oc_event_handler },\n\t{ \"buck2_ov_evt\", mt6360_ov_event_handler },\n\t{ \"buck2_uv_evt\", mt6360_uv_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo6_irq_tbls[] = {\n\t{ \"ldo6_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo6_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo7_irq_tbls[] = {\n\t{ \"ldo7_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo7_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo1_irq_tbls[] = {\n\t{ \"ldo1_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo1_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo2_irq_tbls[] = {\n\t{ \"ldo2_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo2_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo3_irq_tbls[] = {\n\t{ \"ldo3_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo3_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct mt6360_irq_mapping ldo5_irq_tbls[] = {\n\t{ \"ldo5_pgb_evt\", mt6360_pgb_event_handler },\n\t{ \"ldo5_oc_evt\", mt6360_oc_event_handler },\n};\n\nstatic const struct linear_range buck_vout_ranges[] = {\n\tREGULATOR_LINEAR_RANGE(300000, 0x00, 0xc7, 5000),\n\tREGULATOR_LINEAR_RANGE(1300000, 0xc8, 0xff, 0),\n};\n\nstatic const struct linear_range ldo_vout_ranges1[] = {\n\tREGULATOR_LINEAR_RANGE(500000, 0x00, 0x09, 10000),\n\tREGULATOR_LINEAR_RANGE(600000, 0x0a, 0x10, 0),\n\tREGULATOR_LINEAR_RANGE(610000, 0x11, 0x19, 10000),\n\tREGULATOR_LINEAR_RANGE(700000, 0x1a, 0x20, 0),\n\tREGULATOR_LINEAR_RANGE(710000, 0x21, 0x29, 10000),\n\tREGULATOR_LINEAR_RANGE(800000, 0x2a, 0x30, 0),\n\tREGULATOR_LINEAR_RANGE(810000, 0x31, 0x39, 10000),\n\tREGULATOR_LINEAR_RANGE(900000, 0x3a, 0x40, 0),\n\tREGULATOR_LINEAR_RANGE(910000, 0x41, 0x49, 10000),\n\tREGULATOR_LINEAR_RANGE(1000000, 0x4a, 0x50, 0),\n\tREGULATOR_LINEAR_RANGE(1010000, 0x51, 0x59, 10000),\n\tREGULATOR_LINEAR_RANGE(1100000, 0x5a, 0x60, 0),\n\tREGULATOR_LINEAR_RANGE(1110000, 0x61, 0x69, 10000),\n\tREGULATOR_LINEAR_RANGE(1200000, 0x6a, 0x70, 0),\n\tREGULATOR_LINEAR_RANGE(1210000, 0x71, 0x79, 10000),\n\tREGULATOR_LINEAR_RANGE(1300000, 0x7a, 0x80, 0),\n\tREGULATOR_LINEAR_RANGE(1310000, 0x81, 0x89, 10000),\n\tREGULATOR_LINEAR_RANGE(1400000, 0x8a, 0x90, 0),\n\tREGULATOR_LINEAR_RANGE(1410000, 0x91, 0x99, 10000),\n\tREGULATOR_LINEAR_RANGE(1500000, 0x9a, 0xa0, 0),\n\tREGULATOR_LINEAR_RANGE(1510000, 0xa1, 0xa9, 10000),\n\tREGULATOR_LINEAR_RANGE(1600000, 0xaa, 0xb0, 0),\n\tREGULATOR_LINEAR_RANGE(1610000, 0xb1, 0xb9, 10000),\n\tREGULATOR_LINEAR_RANGE(1700000, 0xba, 0xc0, 0),\n\tREGULATOR_LINEAR_RANGE(1710000, 0xc1, 0xc9, 10000),\n\tREGULATOR_LINEAR_RANGE(1800000, 0xca, 0xd0, 0),\n\tREGULATOR_LINEAR_RANGE(1810000, 0xd1, 0xd9, 10000),\n\tREGULATOR_LINEAR_RANGE(1900000, 0xda, 0xe0, 0),\n\tREGULATOR_LINEAR_RANGE(1910000, 0xe1, 0xe9, 10000),\n\tREGULATOR_LINEAR_RANGE(2000000, 0xea, 0xf0, 0),\n\tREGULATOR_LINEAR_RANGE(2010000, 0xf1, 0xf9, 10000),\n\tREGULATOR_LINEAR_RANGE(2100000, 0xfa, 0xff, 0),\n};\n\nstatic const struct linear_range ldo_vout_ranges2[] = {\n\tREGULATOR_LINEAR_RANGE(1200000, 0x00, 0x09, 10000),\n\tREGULATOR_LINEAR_RANGE(1300000, 0x0a, 0x10, 0),\n\tREGULATOR_LINEAR_RANGE(1310000, 0x11, 0x19, 10000),\n\tREGULATOR_LINEAR_RANGE(1400000, 0x1a, 0x1f, 0),\n\tREGULATOR_LINEAR_RANGE(1500000, 0x20, 0x29, 10000),\n\tREGULATOR_LINEAR_RANGE(1600000, 0x2a, 0x2f, 0),\n\tREGULATOR_LINEAR_RANGE(1700000, 0x30, 0x39, 10000),\n\tREGULATOR_LINEAR_RANGE(1800000, 0x3a, 0x40, 0),\n\tREGULATOR_LINEAR_RANGE(1810000, 0x41, 0x49, 10000),\n\tREGULATOR_LINEAR_RANGE(1900000, 0x4a, 0x4f, 0),\n\tREGULATOR_LINEAR_RANGE(2000000, 0x50, 0x59, 10000),\n\tREGULATOR_LINEAR_RANGE(2100000, 0x5a, 0x60, 0),\n\tREGULATOR_LINEAR_RANGE(2110000, 0x61, 0x69, 10000),\n\tREGULATOR_LINEAR_RANGE(2200000, 0x6a, 0x6f, 0),\n\tREGULATOR_LINEAR_RANGE(2500000, 0x70, 0x79, 10000),\n\tREGULATOR_LINEAR_RANGE(2600000, 0x7a, 0x7f, 0),\n\tREGULATOR_LINEAR_RANGE(2700000, 0x80, 0x89, 10000),\n\tREGULATOR_LINEAR_RANGE(2800000, 0x8a, 0x90, 0),\n\tREGULATOR_LINEAR_RANGE(2810000, 0x91, 0x99, 10000),\n\tREGULATOR_LINEAR_RANGE(2900000, 0x9a, 0xa0, 0),\n\tREGULATOR_LINEAR_RANGE(2910000, 0xa1, 0xa9, 10000),\n\tREGULATOR_LINEAR_RANGE(3000000, 0xaa, 0xb0, 0),\n\tREGULATOR_LINEAR_RANGE(3010000, 0xb1, 0xb9, 10000),\n\tREGULATOR_LINEAR_RANGE(3100000, 0xba, 0xc0, 0),\n\tREGULATOR_LINEAR_RANGE(3110000, 0xc1, 0xc9, 10000),\n\tREGULATOR_LINEAR_RANGE(3200000, 0xca, 0xcf, 0),\n\tREGULATOR_LINEAR_RANGE(3300000, 0xd0, 0xd9, 10000),\n\tREGULATOR_LINEAR_RANGE(3400000, 0xda, 0xe0, 0),\n\tREGULATOR_LINEAR_RANGE(3410000, 0xe1, 0xe9, 10000),\n\tREGULATOR_LINEAR_RANGE(3500000, 0xea, 0xf0, 0),\n\tREGULATOR_LINEAR_RANGE(3510000, 0xf1, 0xf9, 10000),\n\tREGULATOR_LINEAR_RANGE(3600000, 0xfa, 0xff, 0),\n};\n\nstatic const struct linear_range ldo_vout_ranges3[] = {\n\tREGULATOR_LINEAR_RANGE(2700000, 0x00, 0x09, 10000),\n\tREGULATOR_LINEAR_RANGE(2800000, 0x0a, 0x10, 0),\n\tREGULATOR_LINEAR_RANGE(2810000, 0x11, 0x19, 10000),\n\tREGULATOR_LINEAR_RANGE(2900000, 0x1a, 0x20, 0),\n\tREGULATOR_LINEAR_RANGE(2910000, 0x21, 0x29, 10000),\n\tREGULATOR_LINEAR_RANGE(3000000, 0x2a, 0x30, 0),\n\tREGULATOR_LINEAR_RANGE(3010000, 0x31, 0x39, 10000),\n\tREGULATOR_LINEAR_RANGE(3100000, 0x3a, 0x40, 0),\n\tREGULATOR_LINEAR_RANGE(3110000, 0x41, 0x49, 10000),\n\tREGULATOR_LINEAR_RANGE(3200000, 0x4a, 0x4f, 0),\n\tREGULATOR_LINEAR_RANGE(3300000, 0x50, 0x59, 10000),\n\tREGULATOR_LINEAR_RANGE(3400000, 0x5a, 0x60, 0),\n\tREGULATOR_LINEAR_RANGE(3410000, 0x61, 0x69, 10000),\n\tREGULATOR_LINEAR_RANGE(3500000, 0x6a, 0x70, 0),\n\tREGULATOR_LINEAR_RANGE(3510000, 0x71, 0x79, 10000),\n\tREGULATOR_LINEAR_RANGE(3600000, 0x7a, 0x7f, 0),\n};\n\nstatic int mt6360_regulator_set_mode(struct regulator_dev *rdev,\n\t\t\t\t     unsigned int mode)\n{\n\tconst struct mt6360_regulator_desc *rdesc = (struct mt6360_regulator_desc *)rdev->desc;\n\tstruct regmap *regmap = rdev_get_regmap(rdev);\n\tint shift = ffs(rdesc->mode_mask) - 1;\n\tunsigned int val;\n\tint ret;\n\n\tswitch (mode) {\n\tcase REGULATOR_MODE_NORMAL:\n\t\tval = MT6360_OPMODE_NORMAL;\n\t\tbreak;\n\tcase REGULATOR_MODE_STANDBY:\n\t\tval = MT6360_OPMODE_ULP;\n\t\tbreak;\n\tcase REGULATOR_MODE_IDLE:\n\t\tval = MT6360_OPMODE_LP;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tret = regmap_update_bits(regmap, rdesc->mode_reg, rdesc->mode_mask, val << shift);\n\tif (ret) {\n\t\tdev_err(&rdev->dev, \"%s: fail (%d)\\n\", __func__, ret);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic unsigned int mt6360_regulator_get_mode(struct regulator_dev *rdev)\n{\n\tconst struct mt6360_regulator_desc *rdesc = (struct mt6360_regulator_desc *)rdev->desc;\n\tstruct regmap *regmap = rdev_get_regmap(rdev);\n\tint shift = ffs(rdesc->mode_mask) - 1;\n\tunsigned int val;\n\tint ret;\n\n\tret = regmap_read(regmap, rdesc->mode_reg, &val);\n\tif (ret)\n\t\treturn ret;\n\n\tval &= rdesc->mode_mask;\n\tval >>= shift;\n\n\tswitch (val) {\n\tcase MT6360_OPMODE_LP:\n\t\treturn REGULATOR_MODE_IDLE;\n\tcase MT6360_OPMODE_ULP:\n\t\treturn REGULATOR_MODE_STANDBY;\n\tcase MT6360_OPMODE_NORMAL:\n\t\treturn REGULATOR_MODE_NORMAL;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n}\n\nstatic int mt6360_regulator_get_status(struct regulator_dev *rdev)\n{\n\tconst struct mt6360_regulator_desc *rdesc = (struct mt6360_regulator_desc *)rdev->desc;\n\tstruct regmap *regmap = rdev_get_regmap(rdev);\n\tunsigned int val;\n\tint ret;\n\n\tret = regmap_read(regmap, rdesc->state_reg, &val);\n\tif (ret)\n\t\treturn ret;\n\n\tif (val & rdesc->state_mask)\n\t\treturn REGULATOR_STATUS_ON;\n\n\treturn REGULATOR_STATUS_OFF;\n}\n\nstatic const struct regulator_ops mt6360_regulator_ops = {\n\t.list_voltage = regulator_list_voltage_linear_range,\n\t.enable = regulator_enable_regmap,\n\t.disable = regulator_disable_regmap,\n\t.is_enabled = regulator_is_enabled_regmap,\n\t.set_voltage_sel = regulator_set_voltage_sel_regmap,\n\t.get_voltage_sel = regulator_get_voltage_sel_regmap,\n\t.set_mode = mt6360_regulator_set_mode,\n\t.get_mode = mt6360_regulator_get_mode,\n\t.get_status = mt6360_regulator_get_status,\n};\n\nstatic unsigned int mt6360_regulator_of_map_mode(unsigned int hw_mode)\n{\n\tswitch (hw_mode) {\n\tcase MT6360_OPMODE_NORMAL:\n\t\treturn REGULATOR_MODE_NORMAL;\n\tcase MT6360_OPMODE_LP:\n\t\treturn REGULATOR_MODE_IDLE;\n\tcase MT6360_OPMODE_ULP:\n\t\treturn REGULATOR_MODE_STANDBY;\n\tdefault:\n\t\treturn REGULATOR_MODE_INVALID;\n\t}\n}\n\n#define MT6360_REGULATOR_DESC(_name, _sname, ereg, emask, vreg,\tvmask,\t\\\n\t\t\t      mreg, mmask, streg, stmask, vranges,\t\\\n\t\t\t      vcnts, offon_delay, irq_tbls)\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t.desc = {\t\t\t\t\t\t\t\\\n\t\t.name = #_name,\t\t\t\t\t\t\\\n\t\t.supply_name = #_sname,\t\t\t\t\t\\\n\t\t.id =  MT6360_REGULATOR_##_name,\t\t\t\\\n\t\t.of_match = of_match_ptr(#_name),\t\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulator\"),\t\t\\\n\t\t.of_map_mode = mt6360_regulator_of_map_mode,\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\t\t\\\n\t\t.ops = &mt6360_regulator_ops,\t\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\t\t\\\n\t\t.vsel_reg = vreg,\t\t\t\t\t\\\n\t\t.vsel_mask = vmask,\t\t\t\t\t\\\n\t\t.enable_reg = ereg,\t\t\t\t\t\\\n\t\t.enable_mask = emask,\t\t\t\t\t\\\n\t\t.linear_ranges = vranges,\t\t\t\t\\\n\t\t.n_linear_ranges = ARRAY_SIZE(vranges),\t\t\t\\\n\t\t.n_voltages = vcnts,\t\t\t\t\t\\\n\t\t.off_on_delay = offon_delay,\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\t\\\n\t.mode_reg = mreg,\t\t\t\t\t\t\\\n\t.mode_mask = mmask,\t\t\t\t\t\t\\\n\t.state_reg = streg,\t\t\t\t\t\t\\\n\t.state_mask = stmask,\t\t\t\t\t\t\\\n\t.irq_tables = irq_tbls,\t\t\t\t\t\t\\\n\t.irq_table_size = ARRAY_SIZE(irq_tbls),\t\t\t\t\\\n}\n\nstatic const struct mt6360_regulator_desc mt6360_regulator_descs[] =  {\n\tMT6360_REGULATOR_DESC(BUCK1, BUCK1_VIN, 0x117, 0x40, 0x110, 0xff, 0x117, 0x30, 0x117, 0x04,\n\t\t\t      buck_vout_ranges, 256, 0, buck1_irq_tbls),\n\tMT6360_REGULATOR_DESC(BUCK2, BUCK2_VIN, 0x127, 0x40, 0x120, 0xff, 0x127, 0x30, 0x127, 0x04,\n\t\t\t      buck_vout_ranges, 256, 0, buck2_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO6, LDO_VIN3, 0x137, 0x40, 0x13B, 0xff, 0x137, 0x30, 0x137, 0x04,\n\t\t\t      ldo_vout_ranges1, 256, 0, ldo6_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO7, LDO_VIN3, 0x131, 0x40, 0x135, 0xff, 0x131, 0x30, 0x131, 0x04,\n\t\t\t      ldo_vout_ranges1, 256, 0, ldo7_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO1, LDO_VIN1, 0x217, 0x40, 0x21B, 0xff, 0x217, 0x30, 0x217, 0x04,\n\t\t\t      ldo_vout_ranges2, 256, 0, ldo1_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO2, LDO_VIN1, 0x211, 0x40, 0x215, 0xff, 0x211, 0x30, 0x211, 0x04,\n\t\t\t      ldo_vout_ranges2, 256, 0, ldo2_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO3, LDO_VIN1, 0x205, 0x40, 0x209, 0xff, 0x205, 0x30, 0x205, 0x04,\n\t\t\t      ldo_vout_ranges2, 256, 100, ldo3_irq_tbls),\n\tMT6360_REGULATOR_DESC(LDO5, LDO_VIN2, 0x20B, 0x40, 0x20F, 0x7f, 0x20B, 0x30, 0x20B, 0x04,\n\t\t\t      ldo_vout_ranges3, 128, 100, ldo5_irq_tbls),\n};\n\nstatic int mt6360_regulator_irq_register(struct platform_device *pdev,\n\t\t\t\t\t struct regulator_dev *rdev,\n\t\t\t\t\t const struct mt6360_irq_mapping *tbls,\n\t\t\t\t\t int tbl_size)\n{\n\tint i, irq, ret;\n\n\tfor (i = 0; i < tbl_size; i++) {\n\t\tconst struct mt6360_irq_mapping *irq_desc = tbls + i;\n\n\t\tirq = platform_get_irq_byname(pdev, irq_desc->name);\n\t\tif (irq < 0)\n\t\t\treturn irq;\n\n\t\tret = devm_request_threaded_irq(&pdev->dev, irq, NULL, irq_desc->handler, 0,\n\t\t\t\t\t\tirq_desc->name, rdev);\n\t\tif (ret) {\n\t\t\tdev_err(&pdev->dev, \"Fail to request %s irq\\n\", irq_desc->name);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int mt6360_regulator_probe(struct platform_device *pdev)\n{\n\tstruct mt6360_regulator_data *mrd;\n\tstruct regulator_config config = {};\n\tint i, ret;\n\n\tmrd = devm_kzalloc(&pdev->dev, sizeof(*mrd), GFP_KERNEL);\n\tif (!mrd)\n\t\treturn -ENOMEM;\n\n\tmrd->dev = &pdev->dev;\n\n\tmrd->regmap = dev_get_regmap(pdev->dev.parent, NULL);\n\tif (!mrd->regmap) {\n\t\tdev_err(&pdev->dev, \"Failed to get parent regmap\\n\");\n\t\treturn -ENODEV;\n\t}\n\n\tconfig.dev = pdev->dev.parent;\n\tconfig.driver_data = mrd;\n\tconfig.regmap = mrd->regmap;\n\n\tfor (i = 0; i < ARRAY_SIZE(mt6360_regulator_descs); i++) {\n\t\tconst struct mt6360_regulator_desc *rdesc = mt6360_regulator_descs + i;\n\t\tstruct regulator_dev *rdev;\n\n\t\trdev = devm_regulator_register(&pdev->dev, &rdesc->desc, &config);\n\t\tif (IS_ERR(rdev)) {\n\t\t\tdev_err(&pdev->dev, \"Failed to register  %d regulator\\n\", i);\n\t\t\treturn PTR_ERR(rdev);\n\t\t}\n\n\t\tret = mt6360_regulator_irq_register(pdev, rdev, rdesc->irq_tables,\n\t\t\t\t\t\t    rdesc->irq_table_size);\n\t\tif (ret) {\n\t\t\tdev_err(&pdev->dev, \"Failed to register  %d regulator irqs\\n\", i);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic const struct platform_device_id mt6360_regulator_id_table[] = {\n\t{ \"mt6360-regulator\", 0 },\n\t{},\n};\nMODULE_DEVICE_TABLE(platform, mt6360_regulator_id_table);\n\nstatic struct platform_driver mt6360_regulator_driver = {\n\t.driver = {\n\t\t.name = \"mt6360-regulator\",\n\t\t.probe_type = PROBE_PREFER_ASYNCHRONOUS,\n\t},\n\t.probe = mt6360_regulator_probe,\n\t.id_table = mt6360_regulator_id_table,\n};\nmodule_platform_driver(mt6360_regulator_driver);\n\nMODULE_AUTHOR(\"Gene Chen <gene_chen@richtek.com>\");\nMODULE_DESCRIPTION(\"MT6360 Regulator Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}