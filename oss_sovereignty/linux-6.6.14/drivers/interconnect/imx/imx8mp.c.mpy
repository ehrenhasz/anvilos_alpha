{
  "module_name": "imx8mp.c",
  "hash_id": "939e09b834e7d689e805b22714d820e4caf23edd00cd371dcdb4e453d599ba7d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/interconnect/imx/imx8mp.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <dt-bindings/interconnect/fsl,imx8mp.h>\n\n#include \"imx.h\"\n\nstatic const struct imx_icc_node_adj_desc imx8mp_noc_adj = {\n\t.bw_mul = 1,\n\t.bw_div = 16,\n\t.main_noc = true,\n};\n\nstatic struct imx_icc_noc_setting noc_setting_nodes[] = {\n\t[IMX8MP_ICM_MLMIX] = {\n\t\t.reg = 0x180,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_DSP] = {\n\t\t.reg = 0x200,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_SDMA2PER] = {\n\t\t.reg = 0x280,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 4,\n\t},\n\t[IMX8MP_ICM_SDMA2BURST] = {\n\t\t.reg = 0x300,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 4,\n\t},\n\t[IMX8MP_ICM_SDMA3PER] = {\n\t\t.reg = 0x380,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 4,\n\t},\n\t[IMX8MP_ICM_SDMA3BURST] = {\n\t\t.reg = 0x400,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 4,\n\t},\n\t[IMX8MP_ICM_EDMA] = {\n\t\t.reg = 0x480,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 4,\n\t},\n\t[IMX8MP_ICM_GPU3D] = {\n\t\t.reg = 0x500,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_GPU2D] = {\n\t\t.reg = 0x580,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_HRV] = {\n\t\t.reg = 0x600,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_LCDIF_HDMI] = {\n\t\t.reg = 0x680,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_HDCP] = {\n\t\t.reg = 0x700,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 5,\n\t},\n\t[IMX8MP_ICM_NOC_PCIE] = {\n\t\t.reg = 0x780,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_USB1] = {\n\t\t.reg = 0x800,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_USB2] = {\n\t\t.reg = 0x880,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_PCIE] = {\n\t\t.reg = 0x900,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_LCDIF_RD] = {\n\t\t.reg = 0x980,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_LCDIF_WR] = {\n\t\t.reg = 0xa00,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_ISI0] = {\n\t\t.reg = 0xa80,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_ISI1] = {\n\t\t.reg = 0xb00,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_ISI2] = {\n\t\t.reg = 0xb80,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 2,\n\t\t.ext_control = 1,\n\t},\n\t[IMX8MP_ICM_ISP0] = {\n\t\t.reg = 0xc00,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 7,\n\t},\n\t[IMX8MP_ICM_ISP1] = {\n\t\t.reg = 0xc80,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 7,\n\t},\n\t[IMX8MP_ICM_DWE] = {\n\t\t.reg = 0xd00,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 7,\n\t},\n\t[IMX8MP_ICM_VPU_G1] = {\n\t\t.reg = 0xd80,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_VPU_G2] = {\n\t\t.reg = 0xe00,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICM_VPU_H1] = {\n\t\t.reg = 0xe80,\n\t\t.mode = IMX_NOC_MODE_FIXED,\n\t\t.prio_level = 3,\n\t},\n\t[IMX8MP_ICN_MEDIA] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n\t[IMX8MP_ICN_VIDEO] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n\t[IMX8MP_ICN_AUDIO] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n\t[IMX8MP_ICN_HDMI] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n\t[IMX8MP_ICN_GPU] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n\t[IMX8MP_ICN_HSIO] = {\n\t\t.mode = IMX_NOC_MODE_UNCONFIGURED,\n\t},\n};\n\n \nstatic struct imx_icc_node_desc nodes[] = {\n\tDEFINE_BUS_INTERCONNECT(\"NOC\", IMX8MP_ICN_NOC, &imx8mp_noc_adj,\n\t\t\t\tIMX8MP_ICS_DRAM, IMX8MP_ICN_MAIN),\n\n\tDEFINE_BUS_SLAVE(\"OCRAM\", IMX8MP_ICS_OCRAM, NULL),\n\tDEFINE_BUS_SLAVE(\"DRAM\", IMX8MP_ICS_DRAM, NULL),\n\tDEFINE_BUS_MASTER(\"A53\", IMX8MP_ICM_A53, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"SUPERMIX\", IMX8MP_ICM_SUPERMIX, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"GIC\", IMX8MP_ICM_GIC, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"MLMIX\", IMX8MP_ICM_MLMIX, IMX8MP_ICN_NOC),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_AUDIO\", IMX8MP_ICN_AUDIO, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"DSP\", IMX8MP_ICM_DSP, IMX8MP_ICN_AUDIO),\n\tDEFINE_BUS_MASTER(\"SDMA2PER\", IMX8MP_ICM_SDMA2PER, IMX8MP_ICN_AUDIO),\n\tDEFINE_BUS_MASTER(\"SDMA2BURST\", IMX8MP_ICM_SDMA2BURST, IMX8MP_ICN_AUDIO),\n\tDEFINE_BUS_MASTER(\"SDMA3PER\", IMX8MP_ICM_SDMA3PER, IMX8MP_ICN_AUDIO),\n\tDEFINE_BUS_MASTER(\"SDMA3BURST\", IMX8MP_ICM_SDMA3BURST, IMX8MP_ICN_AUDIO),\n\tDEFINE_BUS_MASTER(\"EDMA\", IMX8MP_ICM_EDMA, IMX8MP_ICN_AUDIO),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_GPU\", IMX8MP_ICN_GPU, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"GPU 2D\", IMX8MP_ICM_GPU2D, IMX8MP_ICN_GPU),\n\tDEFINE_BUS_MASTER(\"GPU 3D\", IMX8MP_ICM_GPU3D, IMX8MP_ICN_GPU),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_HDMI\", IMX8MP_ICN_HDMI, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"HRV\", IMX8MP_ICM_HRV, IMX8MP_ICN_HDMI),\n\tDEFINE_BUS_MASTER(\"LCDIF_HDMI\", IMX8MP_ICM_LCDIF_HDMI, IMX8MP_ICN_HDMI),\n\tDEFINE_BUS_MASTER(\"HDCP\", IMX8MP_ICM_HDCP, IMX8MP_ICN_HDMI),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_HSIO\", IMX8MP_ICN_HSIO, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"NOC_PCIE\", IMX8MP_ICM_NOC_PCIE, IMX8MP_ICN_HSIO),\n\tDEFINE_BUS_MASTER(\"USB1\", IMX8MP_ICM_USB1, IMX8MP_ICN_HSIO),\n\tDEFINE_BUS_MASTER(\"USB2\", IMX8MP_ICM_USB2, IMX8MP_ICN_HSIO),\n\tDEFINE_BUS_MASTER(\"PCIE\", IMX8MP_ICM_PCIE, IMX8MP_ICN_HSIO),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_MEDIA\", IMX8MP_ICN_MEDIA, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"LCDIF_RD\", IMX8MP_ICM_LCDIF_RD, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"LCDIF_WR\", IMX8MP_ICM_LCDIF_WR, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"ISI0\", IMX8MP_ICM_ISI0, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"ISI1\", IMX8MP_ICM_ISI1, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"ISI2\", IMX8MP_ICM_ISI2, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"ISP0\", IMX8MP_ICM_ISP0, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"ISP1\", IMX8MP_ICM_ISP1, IMX8MP_ICN_MEDIA),\n\tDEFINE_BUS_MASTER(\"DWE\", IMX8MP_ICM_DWE, IMX8MP_ICN_MEDIA),\n\n\tDEFINE_BUS_INTERCONNECT(\"NOC_VIDEO\", IMX8MP_ICN_VIDEO, NULL, IMX8MP_ICN_NOC),\n\tDEFINE_BUS_MASTER(\"VPU G1\", IMX8MP_ICM_VPU_G1, IMX8MP_ICN_VIDEO),\n\tDEFINE_BUS_MASTER(\"VPU G2\", IMX8MP_ICM_VPU_G2, IMX8MP_ICN_VIDEO),\n\tDEFINE_BUS_MASTER(\"VPU H1\", IMX8MP_ICM_VPU_H1, IMX8MP_ICN_VIDEO),\n\tDEFINE_BUS_INTERCONNECT(\"PL301_MAIN\", IMX8MP_ICN_MAIN, NULL,\n\t\t\t\tIMX8MP_ICN_NOC, IMX8MP_ICS_OCRAM),\n};\n\nstatic int imx8mp_icc_probe(struct platform_device *pdev)\n{\n\treturn imx_icc_register(pdev, nodes, ARRAY_SIZE(nodes), noc_setting_nodes);\n}\n\nstatic int imx8mp_icc_remove(struct platform_device *pdev)\n{\n\timx_icc_unregister(pdev);\n\n\treturn 0;\n}\n\nstatic struct platform_driver imx8mp_icc_driver = {\n\t.probe = imx8mp_icc_probe,\n\t.remove = imx8mp_icc_remove,\n\t.driver = {\n\t\t.name = \"imx8mp-interconnect\",\n\t},\n};\n\nmodule_platform_driver(imx8mp_icc_driver);\nMODULE_AUTHOR(\"Peng Fan <peng.fan@nxp.com>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_ALIAS(\"platform:imx8mp-interconnect\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}