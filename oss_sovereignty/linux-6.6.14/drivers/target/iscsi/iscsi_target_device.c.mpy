{
  "module_name": "iscsi_target_device.c",
  "hash_id": "31eef2d05fec3cdd4735040f978a119e0f341b88e8332f8a2640b29e3de6fb94",
  "original_prompt": "Ingested from linux-6.6.14/drivers/target/iscsi/iscsi_target_device.c",
  "human_readable_source": "\n \n\n#include <target/target_core_base.h>\n#include <target/target_core_fabric.h>\n\n#include <target/iscsi/iscsi_target_core.h>\n#include \"iscsi_target_device.h\"\n#include \"iscsi_target_tpg.h\"\n#include \"iscsi_target_util.h\"\n\nvoid iscsit_determine_maxcmdsn(struct iscsit_session *sess)\n{\n\tstruct se_node_acl *se_nacl;\n\n\t \n\tif (sess->sess_ops->SessionType)\n\t\treturn;\n\n\tse_nacl = sess->se_sess->se_node_acl;\n\n\t \n\tsess->cmdsn_window = se_nacl->queue_depth;\n\tatomic_add(se_nacl->queue_depth - 1, &sess->max_cmd_sn);\n}\n\nvoid iscsit_increment_maxcmdsn(struct iscsit_cmd *cmd, struct iscsit_session *sess)\n{\n\tu32 max_cmd_sn;\n\n\tif (cmd->immediate_cmd || cmd->maxcmdsn_inc)\n\t\treturn;\n\n\tcmd->maxcmdsn_inc = 1;\n\n\tmax_cmd_sn = atomic_inc_return(&sess->max_cmd_sn);\n\tpr_debug(\"Updated MaxCmdSN to 0x%08x\\n\", max_cmd_sn);\n}\nEXPORT_SYMBOL(iscsit_increment_maxcmdsn);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}