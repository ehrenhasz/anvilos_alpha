{
  "module_name": "pci-bridge-emul.h",
  "hash_id": "32acf688a5d058d50f9dc22d35977f33e1728642a4c38f78403bc60eb0666249",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pci/pci-bridge-emul.h",
  "human_readable_source": " \n#ifndef __PCI_BRIDGE_EMUL_H__\n#define __PCI_BRIDGE_EMUL_H__\n\n#include <linux/kernel.h>\n\n \nstruct pci_bridge_emul_conf {\n\t__le16 vendor;\n\t__le16 device;\n\t__le16 command;\n\t__le16 status;\n\t__le32 class_revision;\n\tu8 cache_line_size;\n\tu8 latency_timer;\n\tu8 header_type;\n\tu8 bist;\n\t__le32 bar[2];\n\tu8 primary_bus;\n\tu8 secondary_bus;\n\tu8 subordinate_bus;\n\tu8 secondary_latency_timer;\n\tu8 iobase;\n\tu8 iolimit;\n\t__le16 secondary_status;\n\t__le16 membase;\n\t__le16 memlimit;\n\t__le16 pref_mem_base;\n\t__le16 pref_mem_limit;\n\t__le32 prefbaseupper;\n\t__le32 preflimitupper;\n\t__le16 iobaseupper;\n\t__le16 iolimitupper;\n\tu8 capabilities_pointer;\n\tu8 reserve[3];\n\t__le32 romaddr;\n\tu8 intline;\n\tu8 intpin;\n\t__le16 bridgectrl;\n};\n\n \nstruct pci_bridge_emul_pcie_conf {\n\tu8 cap_id;\n\tu8 next;\n\t__le16 cap;\n\t__le32 devcap;\n\t__le16 devctl;\n\t__le16 devsta;\n\t__le32 lnkcap;\n\t__le16 lnkctl;\n\t__le16 lnksta;\n\t__le32 slotcap;\n\t__le16 slotctl;\n\t__le16 slotsta;\n\t__le16 rootctl;\n\t__le16 rootcap;\n\t__le32 rootsta;\n\t__le32 devcap2;\n\t__le16 devctl2;\n\t__le16 devsta2;\n\t__le32 lnkcap2;\n\t__le16 lnkctl2;\n\t__le16 lnksta2;\n\t__le32 slotcap2;\n\t__le16 slotctl2;\n\t__le16 slotsta2;\n};\n\nstruct pci_bridge_emul;\n\ntypedef enum { PCI_BRIDGE_EMUL_HANDLED,\n\t       PCI_BRIDGE_EMUL_NOT_HANDLED } pci_bridge_emul_read_status_t;\n\nstruct pci_bridge_emul_ops {\n\t \n\tpci_bridge_emul_read_status_t (*read_base)(struct pci_bridge_emul *bridge,\n\t\t\t\t\t\t   int reg, u32 *value);\n\n\t \n\tpci_bridge_emul_read_status_t (*read_pcie)(struct pci_bridge_emul *bridge,\n\t\t\t\t\t\t   int reg, u32 *value);\n\n\t \n\tpci_bridge_emul_read_status_t (*read_ext)(struct pci_bridge_emul *bridge,\n\t\t\t\t\t\t  int reg, u32 *value);\n\n\t \n\tvoid (*write_base)(struct pci_bridge_emul *bridge, int reg,\n\t\t\t   u32 old, u32 new, u32 mask);\n\n\t \n\tvoid (*write_pcie)(struct pci_bridge_emul *bridge, int reg,\n\t\t\t   u32 old, u32 new, u32 mask);\n\n\t \n\tvoid (*write_ext)(struct pci_bridge_emul *bridge, int reg,\n\t\t\t  u32 old, u32 new, u32 mask);\n};\n\nstruct pci_bridge_reg_behavior;\n\nstruct pci_bridge_emul {\n\tstruct pci_bridge_emul_conf conf;\n\tstruct pci_bridge_emul_pcie_conf pcie_conf;\n\tconst struct pci_bridge_emul_ops *ops;\n\tstruct pci_bridge_reg_behavior *pci_regs_behavior;\n\tstruct pci_bridge_reg_behavior *pcie_cap_regs_behavior;\n\tvoid *data;\n\tu8 pcie_start;\n\tu8 ssid_start;\n\tbool has_pcie;\n\tu16 subsystem_vendor_id;\n\tu16 subsystem_id;\n};\n\nenum {\n\t \n\tPCI_BRIDGE_EMUL_NO_PREFMEM_FORWARD = BIT(0),\n\n\t \n\tPCI_BRIDGE_EMUL_NO_IO_FORWARD = BIT(1),\n};\n\nint pci_bridge_emul_init(struct pci_bridge_emul *bridge,\n\t\t\t unsigned int flags);\nvoid pci_bridge_emul_cleanup(struct pci_bridge_emul *bridge);\n\nint pci_bridge_emul_conf_read(struct pci_bridge_emul *bridge, int where,\n\t\t\t      int size, u32 *value);\nint pci_bridge_emul_conf_write(struct pci_bridge_emul *bridge, int where,\n\t\t\t       int size, u32 value);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}