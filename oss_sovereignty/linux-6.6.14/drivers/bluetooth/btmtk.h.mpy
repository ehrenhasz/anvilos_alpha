{
  "module_name": "btmtk.h",
  "hash_id": "a12699a149a416ff96c3c1110167e1a59f9de4e16921366ebcb82f3817fd62e4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/bluetooth/btmtk.h",
  "human_readable_source": " \n \n\n#define FIRMWARE_MT7622\t\t\"mediatek/mt7622pr2h.bin\"\n#define FIRMWARE_MT7663\t\t\"mediatek/mt7663pr2h.bin\"\n#define FIRMWARE_MT7668\t\t\"mediatek/mt7668pr2h.bin\"\n#define FIRMWARE_MT7961\t\t\"mediatek/BT_RAM_CODE_MT7961_1_2_hdr.bin\"\n#define FIRMWARE_MT7925\t\t\"mediatek/mt7925/BT_RAM_CODE_MT7925_1_1_hdr.bin\"\n\n#define HCI_EV_WMT 0xe4\n#define HCI_WMT_MAX_EVENT_SIZE\t\t64\n\n#define BTMTK_WMT_REG_WRITE 0x1\n#define BTMTK_WMT_REG_READ 0x2\n\n#define MT7921_BTSYS_RST 0x70002610\n#define MT7921_BTSYS_RST_WITH_GPIO BIT(7)\n\n#define MT7921_PINMUX_0 0x70005050\n#define MT7921_PINMUX_1 0x70005054\n\n#define MT7921_DLSTATUS 0x7c053c10\n#define BT_DL_STATE BIT(1)\n\n#define MTK_COREDUMP_SIZE\t\t(1024 * 1000)\n#define MTK_COREDUMP_END\t\t\"coredump end\"\n#define MTK_COREDUMP_END_LEN\t\t(sizeof(MTK_COREDUMP_END))\n#define MTK_COREDUMP_NUM\t\t255\n\nenum {\n\tBTMTK_WMT_PATCH_DWNLD = 0x1,\n\tBTMTK_WMT_TEST = 0x2,\n\tBTMTK_WMT_WAKEUP = 0x3,\n\tBTMTK_WMT_HIF = 0x4,\n\tBTMTK_WMT_FUNC_CTRL = 0x6,\n\tBTMTK_WMT_RST = 0x7,\n\tBTMTK_WMT_REGISTER = 0x8,\n\tBTMTK_WMT_SEMAPHORE = 0x17,\n};\n\nenum {\n\tBTMTK_WMT_INVALID,\n\tBTMTK_WMT_PATCH_UNDONE,\n\tBTMTK_WMT_PATCH_PROGRESS,\n\tBTMTK_WMT_PATCH_DONE,\n\tBTMTK_WMT_ON_UNDONE,\n\tBTMTK_WMT_ON_DONE,\n\tBTMTK_WMT_ON_PROGRESS,\n};\n\nstruct btmtk_wmt_hdr {\n\tu8\tdir;\n\tu8\top;\n\t__le16\tdlen;\n\tu8\tflag;\n} __packed;\n\nstruct btmtk_hci_wmt_cmd {\n\tstruct btmtk_wmt_hdr hdr;\n\tu8 data[];\n} __packed;\n\nstruct btmtk_hci_wmt_evt {\n\tstruct hci_event_hdr hhdr;\n\tstruct btmtk_wmt_hdr whdr;\n} __packed;\n\nstruct btmtk_hci_wmt_evt_funcc {\n\tstruct btmtk_hci_wmt_evt hwhdr;\n\t__be16 status;\n} __packed;\n\nstruct btmtk_hci_wmt_evt_reg {\n\tstruct btmtk_hci_wmt_evt hwhdr;\n\tu8 rsv[2];\n\tu8 num;\n\t__le32 addr;\n\t__le32 val;\n} __packed;\n\nstruct btmtk_tci_sleep {\n\tu8 mode;\n\t__le16 duration;\n\t__le16 host_duration;\n\tu8 host_wakeup_pin;\n\tu8 time_compensation;\n} __packed;\n\nstruct btmtk_wakeon {\n\tu8 mode;\n\tu8 gpo;\n\tu8 active_high;\n\t__le16 enable_delay;\n\t__le16 wakeup_delay;\n} __packed;\n\nstruct btmtk_sco {\n\tu8 clock_config;\n\tu8 transmit_format_config;\n\tu8 channel_format_config;\n\tu8 channel_select_config;\n} __packed;\n\nstruct reg_read_cmd {\n\tu8 type;\n\tu8 rsv;\n\tu8 num;\n\t__le32 addr;\n} __packed;\n\nstruct reg_write_cmd {\n\tu8 type;\n\tu8 rsv;\n\tu8 num;\n\t__le32 addr;\n\t__le32 data;\n\t__le32 mask;\n} __packed;\n\nstruct btmtk_hci_wmt_params {\n\tu8 op;\n\tu8 flag;\n\tu16 dlen;\n\tconst void *data;\n\tu32 *status;\n};\n\ntypedef int (*btmtk_reset_sync_func_t)(struct hci_dev *, void *);\n\nstruct btmtk_coredump_info {\n\tconst char *driver_name;\n\tu32 fw_version;\n\tu16 cnt;\n\tint state;\n};\n\nstruct btmediatek_data {\n\tu32 dev_id;\n\tbtmtk_reset_sync_func_t reset_sync;\n\tstruct btmtk_coredump_info cd_info;\n};\n\ntypedef int (*wmt_cmd_sync_func_t)(struct hci_dev *,\n\t\t\t\t   struct btmtk_hci_wmt_params *);\n\n#if IS_ENABLED(CONFIG_BT_MTK)\n\nint btmtk_set_bdaddr(struct hci_dev *hdev, const bdaddr_t *bdaddr);\n\nint btmtk_setup_firmware_79xx(struct hci_dev *hdev, const char *fwname,\n\t\t\t      wmt_cmd_sync_func_t wmt_cmd_sync);\n\nint btmtk_setup_firmware(struct hci_dev *hdev, const char *fwname,\n\t\t\t wmt_cmd_sync_func_t wmt_cmd_sync);\n\nvoid btmtk_reset_sync(struct hci_dev *hdev);\n\nint btmtk_register_coredump(struct hci_dev *hdev, const char *name,\n\t\t\t    u32 fw_version);\n\nint btmtk_process_coredump(struct hci_dev *hdev, struct sk_buff *skb);\n#else\n\nstatic inline int btmtk_set_bdaddr(struct hci_dev *hdev,\n\t\t\t\t   const bdaddr_t *bdaddr)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic int btmtk_setup_firmware_79xx(struct hci_dev *hdev, const char *fwname,\n\t\t\t\t     wmt_cmd_sync_func_t wmt_cmd_sync)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic int btmtk_setup_firmware(struct hci_dev *hdev, const char *fwname,\n\t\t\t\twmt_cmd_sync_func_t wmt_cmd_sync)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic void btmtk_reset_sync(struct hci_dev *hdev)\n{\n}\n\nstatic int btmtk_register_coredump(struct hci_dev *hdev, const char *name,\n\t\t\t\t   u32 fw_version)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic int btmtk_process_coredump(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\treturn -EOPNOTSUPP;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}