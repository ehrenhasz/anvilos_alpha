{
  "module_name": "btintel.h",
  "hash_id": "fe1593e4e4fc229865d238740e4a810de7efed403fb4902eeb9d9eefbb111672",
  "original_prompt": "Ingested from linux-6.6.14/drivers/bluetooth/btintel.h",
  "human_readable_source": " \n \n\n \nenum {\n\tINTEL_TLV_CNVI_TOP = 0x10,\n\tINTEL_TLV_CNVR_TOP,\n\tINTEL_TLV_CNVI_BT,\n\tINTEL_TLV_CNVR_BT,\n\tINTEL_TLV_CNVI_OTP,\n\tINTEL_TLV_CNVR_OTP,\n\tINTEL_TLV_DEV_REV_ID,\n\tINTEL_TLV_USB_VENDOR_ID,\n\tINTEL_TLV_USB_PRODUCT_ID,\n\tINTEL_TLV_PCIE_VENDOR_ID,\n\tINTEL_TLV_PCIE_DEVICE_ID,\n\tINTEL_TLV_PCIE_SUBSYSTEM_ID,\n\tINTEL_TLV_IMAGE_TYPE,\n\tINTEL_TLV_TIME_STAMP,\n\tINTEL_TLV_BUILD_TYPE,\n\tINTEL_TLV_BUILD_NUM,\n\tINTEL_TLV_FW_BUILD_PRODUCT,\n\tINTEL_TLV_FW_BUILD_HW,\n\tINTEL_TLV_FW_STEP,\n\tINTEL_TLV_BT_SPEC,\n\tINTEL_TLV_MFG_NAME,\n\tINTEL_TLV_HCI_REV,\n\tINTEL_TLV_LMP_SUBVER,\n\tINTEL_TLV_OTP_PATCH_VER,\n\tINTEL_TLV_SECURE_BOOT,\n\tINTEL_TLV_KEY_FROM_HDR,\n\tINTEL_TLV_OTP_LOCK,\n\tINTEL_TLV_API_LOCK,\n\tINTEL_TLV_DEBUG_LOCK,\n\tINTEL_TLV_MIN_FW,\n\tINTEL_TLV_LIMITED_CCE,\n\tINTEL_TLV_SBE_TYPE,\n\tINTEL_TLV_OTP_BDADDR,\n\tINTEL_TLV_UNLOCKED_STATE\n};\n\nstruct intel_tlv {\n\tu8 type;\n\tu8 len;\n\tu8 val[];\n} __packed;\n\nstruct intel_version_tlv {\n\tu32\tcnvi_top;\n\tu32\tcnvr_top;\n\tu32\tcnvi_bt;\n\tu32\tcnvr_bt;\n\tu16\tdev_rev_id;\n\tu8\timg_type;\n\tu16\ttimestamp;\n\tu8\tbuild_type;\n\tu32\tbuild_num;\n\tu8\tsecure_boot;\n\tu8\totp_lock;\n\tu8\tapi_lock;\n\tu8\tdebug_lock;\n\tu8\tmin_fw_build_nn;\n\tu8\tmin_fw_build_cw;\n\tu8\tmin_fw_build_yy;\n\tu8\tlimited_cce;\n\tu8\tsbe_type;\n\tbdaddr_t otp_bd_addr;\n};\n\nstruct intel_version {\n\tu8 status;\n\tu8 hw_platform;\n\tu8 hw_variant;\n\tu8 hw_revision;\n\tu8 fw_variant;\n\tu8 fw_revision;\n\tu8 fw_build_num;\n\tu8 fw_build_ww;\n\tu8 fw_build_yy;\n\tu8 fw_patch_num;\n} __packed;\n\nstruct intel_boot_params {\n\t__u8     status;\n\t__u8     otp_format;\n\t__u8     otp_content;\n\t__u8     otp_patch;\n\t__le16   dev_revid;\n\t__u8     secure_boot;\n\t__u8     key_from_hdr;\n\t__u8     key_type;\n\t__u8     otp_lock;\n\t__u8     api_lock;\n\t__u8     debug_lock;\n\tbdaddr_t otp_bdaddr;\n\t__u8     min_fw_build_nn;\n\t__u8     min_fw_build_cw;\n\t__u8     min_fw_build_yy;\n\t__u8     limited_cce;\n\t__u8     unlocked_state;\n} __packed;\n\nstruct intel_bootup {\n\t__u8     zero;\n\t__u8     num_cmds;\n\t__u8     source;\n\t__u8     reset_type;\n\t__u8     reset_reason;\n\t__u8     ddc_status;\n} __packed;\n\nstruct intel_secure_send_result {\n\t__u8     result;\n\t__le16   opcode;\n\t__u8     status;\n} __packed;\n\nstruct intel_reset {\n\t__u8     reset_type;\n\t__u8     patch_enable;\n\t__u8     ddc_reload;\n\t__u8     boot_option;\n\t__le32   boot_param;\n} __packed;\n\nstruct intel_debug_features {\n\t__u8    page1[16];\n} __packed;\n\nstruct intel_offload_use_cases {\n\t__u8\tstatus;\n\t__u8\tpreset[8];\n} __packed;\n\n#define INTEL_OP_PPAG_CMD\t\t0xFE0B\nstruct hci_ppag_enable_cmd {\n\t__le32\tppag_enable_flags;\n} __packed;\n\n#define INTEL_TLV_TYPE_ID\t\t0x01\n\n#define INTEL_TLV_SYSTEM_EXCEPTION\t0x00\n#define INTEL_TLV_FATAL_EXCEPTION\t0x01\n#define INTEL_TLV_DEBUG_EXCEPTION\t0x02\n#define INTEL_TLV_TEST_EXCEPTION\t0xDE\n\n#define INTEL_HW_PLATFORM(cnvx_bt)\t((u8)(((cnvx_bt) & 0x0000ff00) >> 8))\n#define INTEL_HW_VARIANT(cnvx_bt)\t((u8)(((cnvx_bt) & 0x003f0000) >> 16))\n#define INTEL_CNVX_TOP_TYPE(cnvx_top)\t((cnvx_top) & 0x00000fff)\n#define INTEL_CNVX_TOP_STEP(cnvx_top)\t(((cnvx_top) & 0x0f000000) >> 24)\n#define INTEL_CNVX_TOP_PACK_SWAB(t, s)\t__swab16(((__u16)(((t) << 4) | (s))))\n\nenum {\n\tINTEL_BOOTLOADER,\n\tINTEL_DOWNLOADING,\n\tINTEL_FIRMWARE_LOADED,\n\tINTEL_FIRMWARE_FAILED,\n\tINTEL_BOOTING,\n\tINTEL_BROKEN_INITIAL_NCMD,\n\tINTEL_BROKEN_SHUTDOWN_LED,\n\tINTEL_ROM_LEGACY,\n\tINTEL_ROM_LEGACY_NO_WBS_SUPPORT,\n\tINTEL_ACPI_RESET_ACTIVE,\n\n\t__INTEL_NUM_FLAGS,\n};\n\nstruct btintel_data {\n\tDECLARE_BITMAP(flags, __INTEL_NUM_FLAGS);\n\tint (*acpi_reset_method)(struct hci_dev *hdev);\n};\n\n#define btintel_set_flag(hdev, nr)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tstruct btintel_data *intel = hci_get_priv((hdev));\t\\\n\t\tset_bit((nr), intel->flags);\t\t\t\t\\\n\t} while (0)\n\n#define btintel_clear_flag(hdev, nr)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tstruct btintel_data *intel = hci_get_priv((hdev));\t\\\n\t\tclear_bit((nr), intel->flags);\t\t\t\t\\\n\t} while (0)\n\n#define btintel_wake_up_flag(hdev, nr)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tstruct btintel_data *intel = hci_get_priv((hdev));\t\\\n\t\twake_up_bit(intel->flags, (nr));\t\t\t\\\n\t} while (0)\n\n#define btintel_get_flag(hdev)\t\t\t\t\t\t\\\n\t(((struct btintel_data *)hci_get_priv(hdev))->flags)\n\n#define btintel_test_flag(hdev, nr)\ttest_bit((nr), btintel_get_flag(hdev))\n#define btintel_test_and_clear_flag(hdev, nr) test_and_clear_bit((nr), btintel_get_flag(hdev))\n#define btintel_wait_on_flag_timeout(hdev, nr, m, to)\t\t\t\\\n\t\twait_on_bit_timeout(btintel_get_flag(hdev), (nr), m, to)\n\n#if IS_ENABLED(CONFIG_BT_INTEL)\n\nint btintel_check_bdaddr(struct hci_dev *hdev);\nint btintel_enter_mfg(struct hci_dev *hdev);\nint btintel_exit_mfg(struct hci_dev *hdev, bool reset, bool patched);\nint btintel_set_bdaddr(struct hci_dev *hdev, const bdaddr_t *bdaddr);\nint btintel_set_diag(struct hci_dev *hdev, bool enable);\n\nint btintel_version_info(struct hci_dev *hdev, struct intel_version *ver);\nint btintel_load_ddc_config(struct hci_dev *hdev, const char *ddc_name);\nint btintel_set_event_mask_mfg(struct hci_dev *hdev, bool debug);\nint btintel_read_version(struct hci_dev *hdev, struct intel_version *ver);\nstruct regmap *btintel_regmap_init(struct hci_dev *hdev, u16 opcode_read,\n\t\t\t\t   u16 opcode_write);\nint btintel_send_intel_reset(struct hci_dev *hdev, u32 boot_param);\nint btintel_read_boot_params(struct hci_dev *hdev,\n\t\t\t     struct intel_boot_params *params);\nint btintel_download_firmware(struct hci_dev *dev, struct intel_version *ver,\n\t\t\t      const struct firmware *fw, u32 *boot_param);\nint btintel_configure_setup(struct hci_dev *hdev, const char *driver_name);\nint btintel_recv_event(struct hci_dev *hdev, struct sk_buff *skb);\nvoid btintel_bootup(struct hci_dev *hdev, const void *ptr, unsigned int len);\nvoid btintel_secure_send_result(struct hci_dev *hdev,\n\t\t\t\tconst void *ptr, unsigned int len);\nint btintel_set_quality_report(struct hci_dev *hdev, bool enable);\n#else\n\nstatic inline int btintel_check_bdaddr(struct hci_dev *hdev)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_enter_mfg(struct hci_dev *hdev)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_exit_mfg(struct hci_dev *hdev, bool reset, bool patched)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_set_bdaddr(struct hci_dev *hdev, const bdaddr_t *bdaddr)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_set_diag(struct hci_dev *hdev, bool enable)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_version_info(struct hci_dev *hdev,\n\t\t\t\t       struct intel_version *ver)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_load_ddc_config(struct hci_dev *hdev,\n\t\t\t\t\t  const char *ddc_name)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_set_event_mask_mfg(struct hci_dev *hdev, bool debug)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_read_version(struct hci_dev *hdev,\n\t\t\t\t       struct intel_version *ver)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline struct regmap *btintel_regmap_init(struct hci_dev *hdev,\n\t\t\t\t\t\t u16 opcode_read,\n\t\t\t\t\t\t u16 opcode_write)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline int btintel_send_intel_reset(struct hci_dev *hdev,\n\t\t\t\t\t   u32 reset_param)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_read_boot_params(struct hci_dev *hdev,\n\t\t\t\t\t   struct intel_boot_params *params)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_download_firmware(struct hci_dev *dev,\n\t\t\t\t\t    const struct firmware *fw,\n\t\t\t\t\t    u32 *boot_param)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int btintel_configure_setup(struct hci_dev *hdev,\n\t\t\t\t\t  const char *driver_name)\n{\n\treturn -ENODEV;\n}\n\nstatic inline void btintel_bootup(struct hci_dev *hdev,\n\t\t\t\t  const void *ptr, unsigned int len)\n{\n}\n\nstatic inline void btintel_secure_send_result(struct hci_dev *hdev,\n\t\t\t\tconst void *ptr, unsigned int len)\n{\n}\n\nstatic inline int btintel_set_quality_report(struct hci_dev *hdev, bool enable)\n{\n\treturn -ENODEV;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}