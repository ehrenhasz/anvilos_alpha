{
  "module_name": "uio_dfl.c",
  "hash_id": "bc9864c76f871da367986e04f9e56ccf77e87fcf93ed400b5e5b7a821b2f56dc",
  "original_prompt": "Ingested from linux-6.6.14/drivers/uio/uio_dfl.c",
  "human_readable_source": "\n \n#include <linux/dfl.h>\n#include <linux/errno.h>\n#include <linux/module.h>\n#include <linux/uio_driver.h>\n\n#define DRIVER_NAME \"uio_dfl\"\n\nstatic int uio_dfl_probe(struct dfl_device *ddev)\n{\n\tstruct resource *r = &ddev->mmio_res;\n\tstruct device *dev = &ddev->dev;\n\tstruct uio_info *uioinfo;\n\tstruct uio_mem *uiomem;\n\tint ret;\n\n\tuioinfo = devm_kzalloc(dev, sizeof(struct uio_info), GFP_KERNEL);\n\tif (!uioinfo)\n\t\treturn -ENOMEM;\n\n\tuioinfo->name = DRIVER_NAME;\n\tuioinfo->version = \"0\";\n\n\tuiomem = &uioinfo->mem[0];\n\tuiomem->memtype = UIO_MEM_PHYS;\n\tuiomem->addr = r->start & PAGE_MASK;\n\tuiomem->offs = r->start & ~PAGE_MASK;\n\tuiomem->size = (uiomem->offs + resource_size(r)\n\t\t\t+ PAGE_SIZE - 1) & PAGE_MASK;\n\tuiomem->name = r->name;\n\n\t \n\tuioinfo->irq = UIO_IRQ_NONE;\n\n\tret = devm_uio_register_device(dev, uioinfo);\n\tif (ret)\n\t\tdev_err(dev, \"unable to register uio device\\n\");\n\n\treturn ret;\n}\n\n#define FME_FEATURE_ID_ETH_GROUP\t0x10\n#define FME_FEATURE_ID_HSSI_SUBSYS\t0x15\n#define FME_FEATURE_ID_VENDOR_SPECIFIC\t0x23\n#define PORT_FEATURE_ID_IOPLL_USRCLK\t0x14\n\nstatic const struct dfl_device_id uio_dfl_ids[] = {\n\t{ FME_ID, FME_FEATURE_ID_ETH_GROUP },\n\t{ FME_ID, FME_FEATURE_ID_HSSI_SUBSYS },\n\t{ FME_ID, FME_FEATURE_ID_VENDOR_SPECIFIC },\n\t{ PORT_ID, PORT_FEATURE_ID_IOPLL_USRCLK },\n\t{ }\n};\nMODULE_DEVICE_TABLE(dfl, uio_dfl_ids);\n\nstatic struct dfl_driver uio_dfl_driver = {\n\t.drv = {\n\t\t.name = DRIVER_NAME,\n\t},\n\t.id_table\t= uio_dfl_ids,\n\t.probe\t\t= uio_dfl_probe,\n};\nmodule_dfl_driver(uio_dfl_driver);\n\nMODULE_DESCRIPTION(\"Generic DFL driver for Userspace I/O devices\");\nMODULE_AUTHOR(\"Intel Corporation\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}