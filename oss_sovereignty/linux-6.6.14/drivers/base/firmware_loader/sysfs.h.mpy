{
  "module_name": "sysfs.h",
  "hash_id": "d3a42792346acd62bb67282f3a2e22972e40b184fbfd5868a69af3dba3fdaffd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/base/firmware_loader/sysfs.h",
  "human_readable_source": " \n#ifndef __FIRMWARE_SYSFS_H\n#define __FIRMWARE_SYSFS_H\n\n#include <linux/device.h>\n\n#include \"firmware.h\"\n\nMODULE_IMPORT_NS(FIRMWARE_LOADER_PRIVATE);\n\nextern struct firmware_fallback_config fw_fallback_config;\nextern struct device_attribute dev_attr_loading;\n\n#ifdef CONFIG_FW_LOADER_USER_HELPER\n \nstruct firmware_fallback_config {\n\tunsigned int force_sysfs_fallback;\n\tunsigned int ignore_sysfs_fallback;\n\tint old_timeout;\n\tint loading_timeout;\n};\n\n \nstatic inline int __firmware_loading_timeout(void)\n{\n\treturn fw_fallback_config.loading_timeout;\n}\n\n \nstatic inline void __fw_fallback_set_timeout(int timeout)\n{\n\tfw_fallback_config.loading_timeout = timeout;\n}\n#endif\n\n#ifdef CONFIG_FW_LOADER_SYSFS\nint register_sysfs_loader(void);\nvoid unregister_sysfs_loader(void);\n#if defined(CONFIG_FW_LOADER_USER_HELPER) && defined(CONFIG_SYSCTL)\nint register_firmware_config_sysctl(void);\nvoid unregister_firmware_config_sysctl(void);\n#else\nstatic inline int register_firmware_config_sysctl(void)\n{\n\treturn 0;\n}\n\nstatic inline void unregister_firmware_config_sysctl(void) { }\n#endif  \n#else  \nstatic inline int register_sysfs_loader(void)\n{\n\treturn 0;\n}\n\nstatic inline void unregister_sysfs_loader(void)\n{\n}\n#endif  \n\nstruct fw_sysfs {\n\tbool nowait;\n\tstruct device dev;\n\tstruct fw_priv *fw_priv;\n\tstruct firmware *fw;\n\tvoid *fw_upload_priv;\n};\n#define to_fw_sysfs(__dev)\tcontainer_of_const(__dev, struct fw_sysfs, dev)\n\nvoid __fw_load_abort(struct fw_priv *fw_priv);\n\nstatic inline void fw_load_abort(struct fw_sysfs *fw_sysfs)\n{\n\tstruct fw_priv *fw_priv = fw_sysfs->fw_priv;\n\n\t__fw_load_abort(fw_priv);\n}\n\nstruct fw_sysfs *\nfw_create_instance(struct firmware *firmware, const char *fw_name,\n\t\t   struct device *device, u32 opt_flags);\n\n#ifdef CONFIG_FW_UPLOAD\nextern struct device_attribute dev_attr_status;\nextern struct device_attribute dev_attr_error;\nextern struct device_attribute dev_attr_cancel;\nextern struct device_attribute dev_attr_remaining_size;\n\nint fw_upload_start(struct fw_sysfs *fw_sysfs);\nvoid fw_upload_free(struct fw_sysfs *fw_sysfs);\numode_t fw_upload_is_visible(struct kobject *kobj, struct attribute *attr, int n);\n#else\nstatic inline int fw_upload_start(struct fw_sysfs *fw_sysfs)\n{\n\treturn 0;\n}\n\nstatic inline void fw_upload_free(struct fw_sysfs *fw_sysfs)\n{\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}