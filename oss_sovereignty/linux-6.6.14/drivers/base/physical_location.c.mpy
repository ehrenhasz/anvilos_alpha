{
  "module_name": "physical_location.c",
  "hash_id": "65f75e2f495d9d8d604f6e76f67576d3b439ba367809ded9eb97cef4808f6679",
  "original_prompt": "Ingested from linux-6.6.14/drivers/base/physical_location.c",
  "human_readable_source": "\n \n\n#include <linux/acpi.h>\n#include <linux/sysfs.h>\n\n#include \"physical_location.h\"\n\nbool dev_add_physical_location(struct device *dev)\n{\n\tstruct acpi_pld_info *pld;\n\tacpi_status status;\n\n\tif (!has_acpi_companion(dev))\n\t\treturn false;\n\n\tstatus = acpi_get_physical_device_location(ACPI_HANDLE(dev), &pld);\n\tif (ACPI_FAILURE(status))\n\t\treturn false;\n\n\tdev->physical_location =\n\t\tkzalloc(sizeof(*dev->physical_location), GFP_KERNEL);\n\tif (!dev->physical_location) {\n\t\tACPI_FREE(pld);\n\t\treturn false;\n\t}\n\n\tdev->physical_location->panel = pld->panel;\n\tdev->physical_location->vertical_position = pld->vertical_position;\n\tdev->physical_location->horizontal_position = pld->horizontal_position;\n\tdev->physical_location->dock = pld->dock;\n\tdev->physical_location->lid = pld->lid;\n\n\tACPI_FREE(pld);\n\treturn true;\n}\n\nstatic ssize_t panel_show(struct device *dev, struct device_attribute *attr,\n\tchar *buf)\n{\n\tconst char *panel;\n\n\tswitch (dev->physical_location->panel) {\n\tcase DEVICE_PANEL_TOP:\n\t\tpanel = \"top\";\n\t\tbreak;\n\tcase DEVICE_PANEL_BOTTOM:\n\t\tpanel = \"bottom\";\n\t\tbreak;\n\tcase DEVICE_PANEL_LEFT:\n\t\tpanel = \"left\";\n\t\tbreak;\n\tcase DEVICE_PANEL_RIGHT:\n\t\tpanel = \"right\";\n\t\tbreak;\n\tcase DEVICE_PANEL_FRONT:\n\t\tpanel = \"front\";\n\t\tbreak;\n\tcase DEVICE_PANEL_BACK:\n\t\tpanel = \"back\";\n\t\tbreak;\n\tdefault:\n\t\tpanel = \"unknown\";\n\t}\n\treturn sysfs_emit(buf, \"%s\\n\", panel);\n}\nstatic DEVICE_ATTR_RO(panel);\n\nstatic ssize_t vertical_position_show(struct device *dev,\n\tstruct device_attribute *attr, char *buf)\n{\n\tconst char *vertical_position;\n\n\tswitch (dev->physical_location->vertical_position) {\n\tcase DEVICE_VERT_POS_UPPER:\n\t\tvertical_position = \"upper\";\n\t\tbreak;\n\tcase DEVICE_VERT_POS_CENTER:\n\t\tvertical_position = \"center\";\n\t\tbreak;\n\tcase DEVICE_VERT_POS_LOWER:\n\t\tvertical_position = \"lower\";\n\t\tbreak;\n\tdefault:\n\t\tvertical_position = \"unknown\";\n\t}\n\treturn sysfs_emit(buf, \"%s\\n\", vertical_position);\n}\nstatic DEVICE_ATTR_RO(vertical_position);\n\nstatic ssize_t horizontal_position_show(struct device *dev,\n\tstruct device_attribute *attr, char *buf)\n{\n\tconst char *horizontal_position;\n\n\tswitch (dev->physical_location->horizontal_position) {\n\tcase DEVICE_HORI_POS_LEFT:\n\t\thorizontal_position = \"left\";\n\t\tbreak;\n\tcase DEVICE_HORI_POS_CENTER:\n\t\thorizontal_position = \"center\";\n\t\tbreak;\n\tcase DEVICE_HORI_POS_RIGHT:\n\t\thorizontal_position = \"right\";\n\t\tbreak;\n\tdefault:\n\t\thorizontal_position = \"unknown\";\n\t}\n\treturn sysfs_emit(buf, \"%s\\n\", horizontal_position);\n}\nstatic DEVICE_ATTR_RO(horizontal_position);\n\nstatic ssize_t dock_show(struct device *dev, struct device_attribute *attr,\n\tchar *buf)\n{\n\treturn sysfs_emit(buf, \"%s\\n\",\n\t\tdev->physical_location->dock ? \"yes\" : \"no\");\n}\nstatic DEVICE_ATTR_RO(dock);\n\nstatic ssize_t lid_show(struct device *dev, struct device_attribute *attr,\n\tchar *buf)\n{\n\treturn sysfs_emit(buf, \"%s\\n\",\n\t\tdev->physical_location->lid ? \"yes\" : \"no\");\n}\nstatic DEVICE_ATTR_RO(lid);\n\nstatic struct attribute *dev_attr_physical_location[] = {\n\t&dev_attr_panel.attr,\n\t&dev_attr_vertical_position.attr,\n\t&dev_attr_horizontal_position.attr,\n\t&dev_attr_dock.attr,\n\t&dev_attr_lid.attr,\n\tNULL,\n};\n\nconst struct attribute_group dev_attr_physical_location_group = {\n\t.name = \"physical_location\",\n\t.attrs = dev_attr_physical_location,\n};\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}