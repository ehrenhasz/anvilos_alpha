{
  "module_name": "regmap-i3c.c",
  "hash_id": "36e5fe94813ec4b89a4d3cc2b783dfca806a3c8719af65aa6306019de0e621b8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/base/regmap/regmap-i3c.c",
  "human_readable_source": "\n\n\n#include <linux/regmap.h>\n#include <linux/i3c/device.h>\n#include <linux/i3c/master.h>\n#include <linux/module.h>\n\nstatic int regmap_i3c_write(void *context, const void *data, size_t count)\n{\n\tstruct device *dev = context;\n\tstruct i3c_device *i3c = dev_to_i3cdev(dev);\n\tstruct i3c_priv_xfer xfers[] = {\n\t\t{\n\t\t\t.rnw = false,\n\t\t\t.len = count,\n\t\t\t.data.out = data,\n\t\t},\n\t};\n\n\treturn i3c_device_do_priv_xfers(i3c, xfers, 1);\n}\n\nstatic int regmap_i3c_read(void *context,\n\t\t\t   const void *reg, size_t reg_size,\n\t\t\t   void *val, size_t val_size)\n{\n\tstruct device *dev = context;\n\tstruct i3c_device *i3c = dev_to_i3cdev(dev);\n\tstruct i3c_priv_xfer xfers[2];\n\n\txfers[0].rnw = false;\n\txfers[0].len = reg_size;\n\txfers[0].data.out = reg;\n\n\txfers[1].rnw = true;\n\txfers[1].len = val_size;\n\txfers[1].data.in = val;\n\n\treturn i3c_device_do_priv_xfers(i3c, xfers, 2);\n}\n\nstatic const struct regmap_bus regmap_i3c = {\n\t.write = regmap_i3c_write,\n\t.read = regmap_i3c_read,\n};\n\nstruct regmap *__devm_regmap_init_i3c(struct i3c_device *i3c,\n\t\t\t\t      const struct regmap_config *config,\n\t\t\t\t      struct lock_class_key *lock_key,\n\t\t\t\t      const char *lock_name)\n{\n\treturn __devm_regmap_init(&i3c->dev, &regmap_i3c, &i3c->dev, config,\n\t\t\t\t  lock_key, lock_name);\n}\nEXPORT_SYMBOL_GPL(__devm_regmap_init_i3c);\n\nMODULE_AUTHOR(\"Vitor Soares <vitor.soares@synopsys.com>\");\nMODULE_DESCRIPTION(\"Regmap I3C Module\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}