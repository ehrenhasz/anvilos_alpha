{
  "module_name": "aic94xx_sas.h",
  "hash_id": "6bdd70fa4834e37f586ebab988753cd33014ea8c79897e32b37d3ad35aec09cf",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/aic94xx/aic94xx_sas.h",
  "human_readable_source": " \n \n\n#ifndef _AIC94XX_SAS_H_\n#define _AIC94XX_SAS_H_\n\n#include <scsi/libsas.h>\n\n \n \n#define ASD_MAX_DDBS\t128\n\nstruct asd_ddb_ssp_smp_target_port {\n\tu8     conn_type;\t   \n#define DDB_TP_CONN_TYPE 0x81\t   \n\n\tu8     conn_rate;\n\t__be16 init_conn_tag;\n\tu8     dest_sas_addr[8];   \n\n\t__le16 send_queue_head;\n\tu8     sq_suspended;\n\tu8     ddb_type;\t   \n#define DDB_TYPE_UNUSED    0xFF\n#define DDB_TYPE_TARGET    0xFE\n#define DDB_TYPE_INITIATOR 0xFD\n#define DDB_TYPE_PM_PORT   0xFC\n\n\t__le16 _r_a;\n\t__be16 awt_def;\n\n\tu8     compat_features;\t   \n\tu8     pathway_blocked_count;\n\t__be16 arb_wait_time;\n\t__be32 more_compat_features;  \n\n\tu8     conn_mask;\n\tu8     flags;\t   \n#define CONCURRENT_CONN_SUPP 0x04\n#define OPEN_REQUIRED        0x01\n\n\tu16    _r_b;\n\t__le16 exec_queue_tail;\n\t__le16 send_queue_tail;\n\t__le16 sister_ddb;\n\n\t__le16 _r_c;\n\n\tu8     max_concurrent_conn;\n\tu8     num_concurrent_conn;\n\tu8     num_contexts;\n\n\tu8     _r_d;\n\n\t__le16 active_task_count;\n\n\tu8     _r_e[9];\n\n\tu8     itnl_reason;\t   \n\n\t__le16 _r_f;\n\n\t__le16 itnl_timeout;\n#define ITNL_TIMEOUT_CONST 0x7D0  \n\n\t__le32 itnl_timestamp;\n} __attribute__ ((packed));\n\nstruct asd_ddb_stp_sata_target_port {\n\tu8     conn_type;\t   \n\tu8     conn_rate;\n\t__be16 init_conn_tag;\n\tu8     dest_sas_addr[8];   \n\n\t__le16 send_queue_head;\n\tu8     sq_suspended;\n\tu8     ddb_type;\t   \n\n\t__le16 _r_a;\n\n\t__be16 awt_def;\n\tu8     compat_features;\t   \n\tu8     pathway_blocked_count;\n\t__be16 arb_wait_time;\n\t__be32 more_compat_features;  \n\n\tu8     conn_mask;\n\tu8     flags;\t   \n#define SATA_MULTIPORT     0x80\n#define SUPPORTS_AFFIL     0x40\n#define STP_AFFIL_POL      0x20\n\n\tu8     _r_b;\n\tu8     flags2;\t\t   \n#define STP_CL_POL_NO_TX    0x00\n#define STP_CL_POL_BTW_CMDS 0x01\n\n\t__le16 exec_queue_tail;\n\t__le16 send_queue_tail;\n\t__le16 sister_ddb;\n\t__le16 ata_cmd_scbptr;\n\t__le32 sata_tag_alloc_mask;\n\t__le16 active_task_count;\n\t__le16 _r_c;\n\t__le32 sata_sactive;\n\tu8     num_sata_tags;\n\tu8     sata_status;\n\tu8     sata_ending_status;\n\tu8     itnl_reason;\t   \n\t__le16 ncq_data_scb_ptr;\n\t__le16 itnl_timeout;\n\t__le32 itnl_timestamp;\n} __attribute__ ((packed));\n\n \nstruct asd_ddb_init_port {\n\tu8     conn_type;\t   \n\tu8     conn_rate;\n\t__be16 init_conn_tag;      \n\tu8     dest_sas_addr[8];\n\t__le16 send_queue_head;    \n\tu8     sq_suspended;\n\tu8     ddb_type;\t   \n\t__le16 _r_a;\n\t__be16 awt_def;\t\t   \n\tu8     compat_features;\n\tu8     pathway_blocked_count;\n\t__be16 arb_wait_time;\t   \n\t__be32 more_compat_features;  \n\tu8     conn_mask;\n\tu8     flags;\t\t   \n\tu16    _r_b;\n\t__le16 exec_queue_tail;\t   \n\t__le16 send_queue_tail;\n\t__le16 sister_ddb;\n\t__le16 init_resp_timeout;  \n\t__le32 _r_c;\n\t__le16 active_tasks;\t   \n\t__le16 init_list;\t   \n\t__le32 _r_d;\n\tu8     max_conn_to[3];  \n\tu8     itnl_reason;\t   \n\t__le16 bus_inact_to;  \n\t__le16 itnl_to;\t\t   \n\t__le32 itnl_timestamp;\n} __attribute__ ((packed));\n\n \nstruct asd_ddb_sata_tag {\n\t__le16 scb_pointer[32];\n} __attribute__ ((packed));\n\n \nstruct asd_ddb_sata_pm_table {\n\t__le16 ddb_pointer[16];\n\t__le16 _r_a[16];\n} __attribute__ ((packed));\n\n \nstruct asd_ddb_sata_pm_port {\n\tu8     _r_a[15];\n\tu8     ddb_type;\n\tu8     _r_b[13];\n\tu8     pm_port_flags;\n#define PM_PORT_MASK  0xF0\n#define PM_PORT_SET   0x02\n\tu8     _r_c[6];\n\t__le16 sister_ddb;\n\t__le16 ata_cmd_scbptr;\n\t__le32 sata_tag_alloc_mask;\n\t__le16 active_task_count;\n\t__le16 parent_ddb;\n\t__le32 sata_sactive;\n\tu8     num_sata_tags;\n\tu8     sata_status;\n\tu8     sata_ending_status;\n\tu8     _r_d[9];\n} __attribute__ ((packed));\n\n \nstruct asd_ddb_seq_shared {\n\t__le16 q_free_ddb_head;\n\t__le16 q_free_ddb_tail;\n\t__le16 q_free_ddb_cnt;\n\t__le16 q_used_ddb_head;\n\t__le16 q_used_ddb_tail;\n\t__le16 shared_mem_lock;\n\t__le16 smp_conn_tag;\n\t__le16 est_nexus_buf_cnt;\n\t__le16 est_nexus_buf_thresh;\n\tu32    _r_a;\n\tu8     settable_max_contexts;\n\tu8     _r_b[23];\n\tu8     conn_not_active;\n\tu8     phy_is_up;\n\tu8     _r_c[8];\n\tu8     port_map_by_links[8];\n} __attribute__ ((packed));\n\n \n\n \nstruct sg_el {\n\t__le64 bus_addr;\n\t__le32 size;\n\t__le16 _r;\n\tu8     next_sg_offs;\n\tu8     flags;\n#define ASD_SG_EL_DS_MASK   0x30\n#define ASD_SG_EL_DS_OCM    0x10\n#define ASD_SG_EL_DS_HM     0x00\n#define ASD_SG_EL_LIST_MASK 0xC0\n#define ASD_SG_EL_LIST_EOL  0x40\n#define ASD_SG_EL_LIST_EOS  0x80\n} __attribute__ ((packed));\n\n \n\n \n\n \nstruct scb_header {\n\t__le64 next_scb;\n\t__le16 index;\t\t   \n\tu8     opcode;\n} __attribute__ ((packed));\n\n \n#define INITIATE_SSP_TASK       0x00\n#define INITIATE_LONG_SSP_TASK  0x01\n#define INITIATE_BIDIR_SSP_TASK 0x02\n#define SCB_ABORT_TASK          0x03\n#define INITIATE_SSP_TMF        0x04\n#define SSP_TARG_GET_DATA       0x05\n#define SSP_TARG_GET_DATA_GOOD  0x06\n#define SSP_TARG_SEND_RESP      0x07\n#define QUERY_SSP_TASK          0x08\n#define INITIATE_ATA_TASK       0x09\n#define INITIATE_ATAPI_TASK     0x0a\n#define CONTROL_ATA_DEV         0x0b\n#define INITIATE_SMP_TASK       0x0c\n#define SMP_TARG_SEND_RESP      0x0f\n\n \n#define SSP_TARG_SEND_DATA      0x40\n#define SSP_TARG_SEND_DATA_GOOD 0x41\n\n \n#define CONTROL_PHY             0x80\n#define SEND_PRIMITIVE          0x81\n#define INITIATE_LINK_ADM_TASK  0x82\n\n \n#define EMPTY_SCB               0xc0\n#define INITIATE_SEQ_ADM_TASK   0xc1\n#define EST_ICL_TARG_WINDOW     0xc2\n#define COPY_MEM                0xc3\n#define CLEAR_NEXUS             0xc4\n#define INITIATE_DDB_ADM_TASK   0xc6\n#define ESTABLISH_NEXUS_ESCB    0xd0\n\n#define LUN_SIZE                8\n\n#define EFB_MASK                0x80\n#define TASK_PRIO_MASK          0x78\n#define TASK_ATTR_MASK          0x07\n \n\n \nstruct initiate_ssp_task {\n\tu8     proto_conn_rate;\t   \n\t__le32 total_xfer_len;\n\tstruct ssp_frame_hdr  ssp_frame;\n\tstruct ssp_command_iu ssp_cmd;\n\t__le16 sister_scb;\t   \n\t__le16 conn_handle;\t   \n\tu8     data_dir;\t   \n#define DATA_DIR_NONE   0x00\n#define DATA_DIR_IN     0x01\n#define DATA_DIR_OUT    0x02\n#define DATA_DIR_BYRECIPIENT 0x03\n\n\tu8     _r_a;\n\tu8     retry_count;\n\tu8     _r_b[5];\n\tstruct sg_el sg_element[3];  \n} __attribute__ ((packed));\n\n \nstruct initiate_ata_task {\n\tu8     proto_conn_rate;\n\t__le32 total_xfer_len;\n\tstruct host_to_dev_fis fis;\n\t__le32 data_offs;\n\tu8     atapi_packet[16];\n\tu8     _r_a[12];\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     ata_flags;\t   \n#define CSMI_TASK           0x40\n#define DATA_XFER_MODE_DMA  0x10\n#define ATA_Q_TYPE_MASK     0x08\n#define\tATA_Q_TYPE_UNTAGGED 0x00\n#define ATA_Q_TYPE_NCQ      0x08\n\n\tu8     _r_b;\n\tu8     retry_count;\n\tu8     _r_c;\n\tu8     flags;\n#define STP_AFFIL_POLICY   0x20\n#define SET_AFFIL_POLICY   0x10\n#define RET_PARTIAL_SGLIST 0x02\n\n\tu8     _r_d[3];\n\tstruct sg_el sg_element[3];\n} __attribute__ ((packed));\n\nstruct initiate_smp_task {\n\tu8     proto_conn_rate;\n\tu8     _r_a[40];\n\tstruct sg_el smp_req;\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     _r_c[8];\n\tstruct sg_el smp_resp;\n\tu8     _r_d[32];\n} __attribute__ ((packed));\n\nstruct control_phy {\n\tu8     phy_id;\n\tu8     sub_func;\n#define DISABLE_PHY            0x00\n#define ENABLE_PHY             0x01\n#define RELEASE_SPINUP_HOLD    0x02\n#define ENABLE_PHY_NO_SAS_OOB  0x03\n#define ENABLE_PHY_NO_SATA_OOB 0x04\n#define PHY_NO_OP              0x05\n#define EXECUTE_HARD_RESET     0x81\n\n\tu8     func_mask;\n\tu8     speed_mask;\n\tu8     hot_plug_delay;\n\tu8     port_type;\n\tu8     flags;\n#define DEV_PRES_TIMER_OVERRIDE_ENABLE 0x01\n#define DISABLE_PHY_IF_OOB_FAILS       0x02\n\n\t__le32 timeout_override;\n\tu8     link_reset_retries;\n\tu8     _r_a[47];\n\t__le16 conn_handle;\n\tu8     _r_b[56];\n} __attribute__ ((packed));\n\nstruct control_ata_dev {\n\tu8     proto_conn_rate;\n\t__le32 _r_a;\n\tstruct host_to_dev_fis fis;\n\tu8     _r_b[32];\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     ata_flags;\t   \n\tu8     _r_c[55];\n} __attribute__ ((packed));\n\nstruct empty_scb {\n\tu8     num_valid;\n\t__le32 _r_a;\n#define ASD_EDBS_PER_SCB 7\n \n#define ASD_EDB_SIZE (24+1024+4+16)\n\tstruct sg_el eb[ASD_EDBS_PER_SCB];\n#define ELEMENT_NOT_VALID  0xC0\n} __attribute__ ((packed));\n\nstruct initiate_link_adm {\n\tu8     phy_id;\n\tu8     sub_func;\n#define GET_LINK_ERROR_COUNT      0x00\n#define RESET_LINK_ERROR_COUNT    0x01\n#define ENABLE_NOTIFY_SPINUP_INTS 0x02\n\n\tu8     _r_a[57];\n\t__le16 conn_handle;\n\tu8     _r_b[56];\n} __attribute__ ((packed));\n\nstruct copy_memory {\n\tu8     _r_a;\n\t__le16 xfer_len;\n\t__le16 _r_b;\n\t__le64 src_busaddr;\n\tu8     src_ds;\t\t   \n\tu8     _r_c[45];\n\t__le16 conn_handle;\n\t__le64 _r_d;\n\t__le64 dest_busaddr;\n\tu8     dest_ds;\t\t   \n\tu8     _r_e[39];\n} __attribute__ ((packed));\n\nstruct abort_task {\n\tu8     proto_conn_rate;\n\t__le32 _r_a;\n\tstruct ssp_frame_hdr ssp_frame;\n\tstruct ssp_tmf_iu ssp_task;\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     flags;\t   \n#define SUSPEND_DATA_TRANS 0x04\n\n\tu8     _r_b;\n\tu8     retry_count;\n\tu8     _r_c[5];\n\t__le16 index;   \n\t__le16 itnl_to;\n\tu8     _r_d[44];\n} __attribute__ ((packed));\n\nstruct clear_nexus {\n\tu8     nexus;\n#define NEXUS_ADAPTER  0x00\n#define NEXUS_PORT     0x01\n#define NEXUS_I_T      0x02\n#define NEXUS_I_T_L    0x03\n#define NEXUS_TAG      0x04\n#define NEXUS_TRANS_CX 0x05\n#define NEXUS_SATA_TAG 0x06\n#define NEXUS_T_L      0x07\n#define NEXUS_L        0x08\n#define NEXUS_T_TAG    0x09\n\n\t__le32 _r_a;\n\tu8     flags;\n#define SUSPEND_TX     0x80\n#define RESUME_TX      0x40\n#define SEND_Q         0x04\n#define EXEC_Q         0x02\n#define NOTINQ         0x01\n\n\tu8     _r_b[3];\n\tu8     conn_mask;\n\tu8     _r_c[19];\n\tstruct ssp_tmf_iu ssp_task;  \n\t__le16 _r_d;\n\t__le16 conn_handle;\n\t__le64 _r_e;\n\t__le16 index;   \n\t__le16 context;\t\t   \n\tu8     _r_f[44];\n} __attribute__ ((packed));\n\nstruct initiate_ssp_tmf {\n\tu8     proto_conn_rate;\n\t__le32 _r_a;\n\tstruct ssp_frame_hdr ssp_frame;\n\tstruct ssp_tmf_iu ssp_task;\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     flags;\t   \n#define OVERRIDE_ITNL_TIMER  8\n\n\tu8     _r_b;\n\tu8     retry_count;\n\tu8     _r_c[5];\n\t__le16 index;   \n\t__le16 itnl_to;\n\tu8     _r_d[44];\n} __attribute__ ((packed));\n\n \nstruct send_prim {\n\tu8     phy_id;\n\tu8     wait_transmit; \t   \n\tu8     xmit_flags;\n#define XMTPSIZE_MASK      0xF0\n#define XMTPSIZE_SINGLE    0x10\n#define XMTPSIZE_REPEATED  0x20\n#define XMTPSIZE_CONT      0x20\n#define XMTPSIZE_TRIPLE    0x30\n#define XMTPSIZE_REDUNDANT 0x60\n#define XMTPSIZE_INF       0\n\n#define XMTCONTEN          0x04\n#define XMTPFRM            0x02\t   \n#define XMTPIMM            0x01\t   \n\n\t__le16 _r_a;\n\tu8     prim[4];\t\t   \n\tu8     _r_b[50];\n\t__le16 conn_handle;\n\tu8     _r_c[56];\n} __attribute__ ((packed));\n\n \nstruct ssp_targ_get_data {\n\tu8     proto_conn_rate;\n\t__le32 total_xfer_len;\n\tstruct ssp_frame_hdr ssp_frame;\n\tstruct xfer_rdy_iu  xfer_rdy;\n\tu8     lun[LUN_SIZE];\n\t__le64 _r_a;\n\t__le16 sister_scb;\n\t__le16 conn_handle;\n\tu8     data_dir;\t   \n\tu8     _r_b;\n\tu8     retry_count;\n\tu8     _r_c[5];\n\tstruct sg_el sg_element[3];\n} __attribute__ ((packed));\n\n \n\nstruct scb {\n\tstruct scb_header header;\n\tunion {\n\t\tstruct initiate_ssp_task ssp_task;\n\t\tstruct initiate_ata_task ata_task;\n\t\tstruct initiate_smp_task smp_task;\n\t\tstruct control_phy       control_phy;\n\t\tstruct control_ata_dev   control_ata_dev;\n\t\tstruct empty_scb         escb;\n\t\tstruct initiate_link_adm link_adm;\n\t\tstruct copy_memory       cp_mem;\n\t\tstruct abort_task        abort_task;\n\t\tstruct clear_nexus       clear_nexus;\n\t\tstruct initiate_ssp_tmf  ssp_tmf;\n\t};\n} __attribute__ ((packed));\n\n \n \n#define TC_NO_ERROR             0x00\n#define TC_UNDERRUN             0x01\n#define TC_OVERRUN              0x02\n#define TF_OPEN_TO              0x03\n#define TF_OPEN_REJECT          0x04\n#define TI_BREAK                0x05\n#define TI_PROTO_ERR            0x06\n#define TC_SSP_RESP             0x07\n#define TI_PHY_DOWN             0x08\n#define TF_PHY_DOWN             0x09\n#define TC_LINK_ADM_RESP        0x0a\n#define TC_CSMI                 0x0b\n#define TC_ATA_RESP             0x0c\n#define TU_PHY_DOWN             0x0d\n#define TU_BREAK                0x0e\n#define TI_SATA_TO              0x0f\n#define TI_NAK                  0x10\n#define TC_CONTROL_PHY          0x11\n#define TF_BREAK                0x12\n#define TC_RESUME               0x13\n#define TI_ACK_NAK_TO           0x14\n#define TF_SMPRSP_TO            0x15\n#define TF_SMP_XMIT_RCV_ERR     0x16\n#define TC_PARTIAL_SG_LIST      0x17\n#define TU_ACK_NAK_TO           0x18\n#define TU_SATA_TO              0x19\n#define TF_NAK_RECV             0x1a\n#define TA_I_T_NEXUS_LOSS       0x1b\n#define TC_ATA_R_ERR_RECV       0x1c\n#define TF_TMF_NO_CTX           0x1d\n#define TA_ON_REQ               0x1e\n#define TF_TMF_NO_TAG           0x1f\n#define TF_TMF_TAG_FREE         0x20\n#define TF_TMF_TASK_DONE        0x21\n#define TF_TMF_NO_CONN_HANDLE   0x22\n#define TC_TASK_CLEARED         0x23\n#define TI_SYNCS_RECV           0x24\n#define TU_SYNCS_RECV           0x25\n#define TF_IRTT_TO              0x26\n#define TF_NO_SMP_CONN          0x27\n#define TF_IU_SHORT             0x28\n#define TF_DATA_OFFS_ERR        0x29\n#define TF_INV_CONN_HANDLE      0x2a\n#define TF_REQUESTED_N_PENDING  0x2b\n\n \n \n#define ESCB_RECVD              0xC0\n\n\n \nstruct done_list_struct {\n\t__le16 index;\t\t   \n\tu8     opcode;\n\tu8     status_block[4];\n\tu8     toggle;\t\t   \n#define DL_TOGGLE_MASK     0x01\n} __attribute__ ((packed));\n\n \n\nstruct asd_phy {\n\tstruct asd_sas_phy        sas_phy;\n\tstruct asd_phy_desc   *phy_desc;  \n\n\tstruct sas_identify_frame *identify_frame;\n\tstruct asd_dma_tok  *id_frm_tok;\n\tstruct asd_port     *asd_port;\n\n\tu8         frame_rcvd[ASD_EDB_SIZE];\n};\n\n\n#define ASD_SCB_SIZE sizeof(struct scb)\n#define ASD_DDB_SIZE sizeof(struct asd_ddb_ssp_smp_target_port)\n\n \n#define ASD_NOTIFY_ENABLE_SPINUP  0x10\n\n \n#define ASD_NOTIFY_TIMEOUT        2500\n\n \n#define ASD_NOTIFY_DOWN_COUNT     0\n\n \n#define ASD_DEV_PRESENT_TIMEOUT   0x2710\n\n#define ASD_SATA_INTERLOCK_TIMEOUT 0\n\n \n#define ASD_STP_SHUTDOWN_TIMEOUT  0x0\n\n \n#define ASD_SRST_ASSERT_TIMEOUT   0x05\n\n \n#define ASD_RCV_FIS_TIMEOUT       0x01D905C0\n\n#define ASD_ONE_MILLISEC_TIMEOUT  0x03e8\n\n \n#define ASD_TEN_MILLISEC_TIMEOUT  0x2710\n#define ASD_COMINIT_TIMEOUT ASD_TEN_MILLISEC_TIMEOUT\n\n \n#define ASD_SMP_RCV_TIMEOUT       0x000F4240\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}