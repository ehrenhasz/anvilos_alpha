{
  "module_name": "fdomain_pci.c",
  "hash_id": "1a400e6d655bd9ebfc3b034e078c67904b39111e48246dc0cfe021209d9191bd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/fdomain_pci.c",
  "human_readable_source": "\n\n#include <linux/module.h>\n#include <linux/pci.h>\n#include \"fdomain.h\"\n\nstatic int fdomain_pci_probe(struct pci_dev *pdev,\n\t\t\t     const struct pci_device_id *d)\n{\n\tint err;\n\tstruct Scsi_Host *sh;\n\n\terr = pci_enable_device(pdev);\n\tif (err)\n\t\tgoto fail;\n\n\terr = pci_request_regions(pdev, \"fdomain_pci\");\n\tif (err)\n\t\tgoto disable_device;\n\n\terr = -ENODEV;\n\tif (pci_resource_len(pdev, 0) == 0)\n\t\tgoto release_region;\n\n\tsh = fdomain_create(pci_resource_start(pdev, 0), pdev->irq, 7,\n\t\t\t    &pdev->dev);\n\tif (!sh)\n\t\tgoto release_region;\n\n\tpci_set_drvdata(pdev, sh);\n\treturn 0;\n\nrelease_region:\n\tpci_release_regions(pdev);\ndisable_device:\n\tpci_disable_device(pdev);\nfail:\n\treturn err;\n}\n\nstatic void fdomain_pci_remove(struct pci_dev *pdev)\n{\n\tstruct Scsi_Host *sh = pci_get_drvdata(pdev);\n\n\tfdomain_destroy(sh);\n\tpci_release_regions(pdev);\n\tpci_disable_device(pdev);\n}\n\nstatic struct pci_device_id fdomain_pci_table[] = {\n\t{ PCI_DEVICE(PCI_VENDOR_ID_FD, PCI_DEVICE_ID_FD_36C70) },\n\t{}\n};\nMODULE_DEVICE_TABLE(pci, fdomain_pci_table);\n\nstatic struct pci_driver fdomain_pci_driver = {\n\t.name\t\t= \"fdomain_pci\",\n\t.id_table\t= fdomain_pci_table,\n\t.probe\t\t= fdomain_pci_probe,\n\t.remove\t\t= fdomain_pci_remove,\n\t.driver.pm\t= FDOMAIN_PM_OPS,\n};\n\nmodule_pci_driver(fdomain_pci_driver);\n\nMODULE_AUTHOR(\"Ondrej Zary, Rickard E. Faith\");\nMODULE_DESCRIPTION(\"Future Domain TMC-3260 PCI SCSI driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}