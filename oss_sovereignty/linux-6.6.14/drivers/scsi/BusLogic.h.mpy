{
  "module_name": "BusLogic.h",
  "hash_id": "4496a53175dddb95f823309b38e09e91129ebfa7554975600149b22904100170",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/BusLogic.h",
  "human_readable_source": " \n \n\n#ifndef _BUSLOGIC_H\n#define _BUSLOGIC_H\n\n\n#ifndef PACKED\n#define PACKED __attribute__((packed))\n#endif\n\n \n\n#define BLOGIC_MAX_ADAPTERS\t\t16\n\n\n \n\n#define BLOGIC_MAXDEV\t\t\t16\n\n\n \n\n#define BLOGIC_SG_LIMIT\t\t128\n\n\n \n\n#define BLOGIC_MAX_TAG_DEPTH\t\t64\n#define BLOGIC_MAX_AUTO_TAG_DEPTH\t28\n#define BLOGIC_MIN_AUTO_TAG_DEPTH\t7\n#define BLOGIC_TAG_DEPTH_BB\t\t3\n#define BLOGIC_UNTAG_DEPTH\t\t3\n#define BLOGIC_UNTAG_DEPTH_BB\t\t2\n\n\n \n\n#define BLOGIC_BUS_SETTLE_TIME\t\t2\n\n\n \n\n#define BLOGIC_MAX_MAILBOX\t\t211\n\n\n \n\n#define BLOGIC_CCB_GRP_ALLOCSIZE\t7\n\n\n \n\n#define BLOGIC_LINEBUF_SIZE\t\t100\n#define BLOGIC_MSGBUF_SIZE\t\t9700\n\n\n \n\nenum blogic_msglevel {\n\tBLOGIC_ANNOUNCE_LEVEL = 0,\n\tBLOGIC_INFO_LEVEL = 1,\n\tBLOGIC_NOTICE_LEVEL = 2,\n\tBLOGIC_WARN_LEVEL = 3,\n\tBLOGIC_ERR_LEVEL = 4\n};\n\nstatic char *blogic_msglevelmap[] = { KERN_NOTICE, KERN_NOTICE, KERN_NOTICE, KERN_WARNING, KERN_ERR };\n\n\n \n\n#define blogic_announce(format, args...) \\\n\tblogic_msg(BLOGIC_ANNOUNCE_LEVEL, format, ##args)\n\n#define blogic_info(format, args...) \\\n\tblogic_msg(BLOGIC_INFO_LEVEL, format, ##args)\n\n#define blogic_notice(format, args...) \\\n\tblogic_msg(BLOGIC_NOTICE_LEVEL, format, ##args)\n\n#define blogic_warn(format, args...) \\\n\tblogic_msg(BLOGIC_WARN_LEVEL, format, ##args)\n\n#define blogic_err(format, args...) \\\n\tblogic_msg(BLOGIC_ERR_LEVEL, format, ##args)\n\n\n \n\nenum blogic_adapter_type {\n\tBLOGIC_MULTIMASTER = 1,\n\tBLOGIC_FLASHPOINT = 2\n} PACKED;\n\n#define BLOGIC_MULTIMASTER_ADDR_COUNT\t4\n#define BLOGIC_FLASHPOINT_ADDR_COUNT\t256\n\nstatic int blogic_adapter_addr_count[3] = { 0, BLOGIC_MULTIMASTER_ADDR_COUNT, BLOGIC_FLASHPOINT_ADDR_COUNT };\n\n\n \n\n#ifdef CONFIG_SCSI_FLASHPOINT\n\n#define blogic_multimaster_type(adapter) \\\n\t(adapter->adapter_type == BLOGIC_MULTIMASTER)\n\n#define blogic_flashpoint_type(adapter) \\\n\t(adapter->adapter_type == BLOGIC_FLASHPOINT)\n\n#else\n\n#define blogic_multimaster_type(adapter)\t(true)\n#define blogic_flashpoint_type(adapter)\t\t(false)\n\n#endif\n\n\n \n\nenum blogic_adapter_bus_type {\n\tBLOGIC_UNKNOWN_BUS = 0,\n\tBLOGIC_ISA_BUS = 1,\n\tBLOGIC_EISA_BUS = 2,\n\tBLOGIC_PCI_BUS = 3,\n\tBLOGIC_VESA_BUS = 4,\n\tBLOGIC_MCA_BUS = 5\n} PACKED;\n\nstatic char *blogic_adapter_busnames[] = { \"Unknown\", \"ISA\", \"EISA\", \"PCI\", \"VESA\", \"MCA\" };\n\nstatic enum blogic_adapter_bus_type blogic_adater_bus_types[] = {\n\tBLOGIC_VESA_BUS,\t \n\tBLOGIC_ISA_BUS,\t\t \n\tBLOGIC_MCA_BUS,\t\t \n\tBLOGIC_EISA_BUS,\t \n\tBLOGIC_UNKNOWN_BUS,\t \n\tBLOGIC_PCI_BUS\t\t \n};\n\n \n\nenum blogic_bios_diskgeometry {\n\tBLOGIC_BIOS_NODISK = 0,\n\tBLOGIC_BIOS_DISK64x32 = 1,\n\tBLOGIC_BIOS_DISK128x32 = 2,\n\tBLOGIC_BIOS_DISK255x63 = 3\n} PACKED;\n\n\n \n\nstruct blogic_byte_count {\n\tunsigned int units;\n\tunsigned int billions;\n};\n\n\n \n\nstruct blogic_probeinfo {\n\tenum blogic_adapter_type adapter_type;\n\tenum blogic_adapter_bus_type adapter_bus_type;\n\tunsigned long io_addr;\n\tunsigned long pci_addr;\n\tstruct pci_dev *pci_device;\n\tunsigned char bus;\n\tunsigned char dev;\n\tunsigned char irq_ch;\n};\n\n \n\nstruct blogic_probe_options {\n\tbool noprobe:1;\t\t\t \n\tbool noprobe_pci:1;\t\t \n\tbool nosort_pci:1;\t\t \n\tbool multimaster_first:1;\t \n\tbool flashpoint_first:1;\t \n};\n\n \n\nstruct blogic_global_options {\n\tbool trace_probe:1;\t \n\tbool trace_hw_reset:1;\t \n\tbool trace_config:1;\t \n\tbool trace_err:1;\t \n};\n\n \n\n#define BLOGIC_CNTRL_REG\t0\t \n#define BLOGIC_STATUS_REG\t0\t \n#define BLOGIC_CMD_PARM_REG\t1\t \n#define BLOGIC_DATAIN_REG\t1\t \n#define BLOGIC_INT_REG\t\t2\t \n#define BLOGIC_GEOMETRY_REG\t3\t \n\n \n\nunion blogic_cntrl_reg {\n\tunsigned char all;\n\tstruct {\n\t\tunsigned char:4;\t \n\t\tbool bus_reset:1;\t \n\t\tbool int_reset:1;\t \n\t\tbool soft_reset:1;\t \n\t\tbool hard_reset:1;\t \n\t} cr;\n};\n\n \n\nunion blogic_stat_reg {\n\tunsigned char all;\n\tstruct {\n\t\tbool cmd_invalid:1;\t \n\t\tbool rsvd:1;\t\t \n\t\tbool datain_ready:1;\t \n\t\tbool cmd_param_busy:1;\t \n\t\tbool adapter_ready:1;\t \n\t\tbool init_reqd:1;\t \n\t\tbool diag_failed:1;\t \n\t\tbool diag_active:1;\t \n\t} sr;\n};\n\n \n\nunion blogic_int_reg {\n\tunsigned char all;\n\tstruct {\n\t\tbool mailin_loaded:1;\t \n\t\tbool mailout_avail:1;\t \n\t\tbool cmd_complete:1;\t \n\t\tbool ext_busreset:1;\t \n\t\tunsigned char rsvd:3;\t \n\t\tbool int_valid:1;\t \n\t} ir;\n};\n\n \n\nunion blogic_geo_reg {\n\tunsigned char all;\n\tstruct {\n\t\tenum blogic_bios_diskgeometry d0_geo:2;\t \n\t\tenum blogic_bios_diskgeometry d1_geo:2;\t \n\t\tunsigned char:3;\t \n\t\tbool ext_trans_enable:1;\t \n\t} gr;\n};\n\n \n\nenum blogic_opcode {\n\tBLOGIC_TEST_CMP_COMPLETE = 0x00,\n\tBLOGIC_INIT_MBOX = 0x01,\n\tBLOGIC_EXEC_MBOX_CMD = 0x02,\n\tBLOGIC_EXEC_BIOS_CMD = 0x03,\n\tBLOGIC_GET_BOARD_ID = 0x04,\n\tBLOGIC_ENABLE_OUTBOX_AVAIL_INT = 0x05,\n\tBLOGIC_SET_SELECT_TIMEOUT = 0x06,\n\tBLOGIC_SET_PREEMPT_TIME = 0x07,\n\tBLOGIC_SET_TIMEOFF_BUS = 0x08,\n\tBLOGIC_SET_TXRATE = 0x09,\n\tBLOGIC_INQ_DEV0TO7 = 0x0A,\n\tBLOGIC_INQ_CONFIG = 0x0B,\n\tBLOGIC_TGT_MODE = 0x0C,\n\tBLOGIC_INQ_SETUPINFO = 0x0D,\n\tBLOGIC_WRITE_LOCALRAM = 0x1A,\n\tBLOGIC_READ_LOCALRAM = 0x1B,\n\tBLOGIC_WRITE_BUSMASTER_FIFO = 0x1C,\n\tBLOGIC_READ_BUSMASTER_FIFO = 0x1D,\n\tBLOGIC_ECHO_CMDDATA = 0x1F,\n\tBLOGIC_ADAPTER_DIAG = 0x20,\n\tBLOGIC_SET_OPTIONS = 0x21,\n\tBLOGIC_INQ_DEV8TO15 = 0x23,\n\tBLOGIC_INQ_DEV = 0x24,\n\tBLOGIC_DISABLE_INT = 0x25,\n\tBLOGIC_INIT_EXT_MBOX = 0x81,\n\tBLOGIC_EXEC_SCS_CMD = 0x83,\n\tBLOGIC_INQ_FWVER_D3 = 0x84,\n\tBLOGIC_INQ_FWVER_LETTER = 0x85,\n\tBLOGIC_INQ_PCI_INFO = 0x86,\n\tBLOGIC_INQ_MODELNO = 0x8B,\n\tBLOGIC_INQ_SYNC_PERIOD = 0x8C,\n\tBLOGIC_INQ_EXTSETUP = 0x8D,\n\tBLOGIC_STRICT_RR = 0x8F,\n\tBLOGIC_STORE_LOCALRAM = 0x90,\n\tBLOGIC_FETCH_LOCALRAM = 0x91,\n\tBLOGIC_STORE_TO_EEPROM = 0x92,\n\tBLOGIC_LOAD_AUTOSCSICODE = 0x94,\n\tBLOGIC_MOD_IOADDR = 0x95,\n\tBLOGIC_SETCCB_FMT = 0x96,\n\tBLOGIC_WRITE_INQBUF = 0x9A,\n\tBLOGIC_READ_INQBUF = 0x9B,\n\tBLOGIC_FLASH_LOAD = 0xA7,\n\tBLOGIC_READ_SCAMDATA = 0xA8,\n\tBLOGIC_WRITE_SCAMDATA = 0xA9\n};\n\n \n\nstruct blogic_board_id {\n\tunsigned char type;\t\t \n\tunsigned char custom_features;\t \n\tunsigned char fw_ver_digit1;\t \n\tunsigned char fw_ver_digit2;\t \n};\n\n \n\nstruct blogic_config {\n\tunsigned char:5;\t \n\tbool dma_ch5:1;\t\t \n\tbool dma_ch6:1;\t\t \n\tbool dma_ch7:1;\t\t \n\tbool irq_ch9:1;\t\t \n\tbool irq_ch10:1;\t \n\tbool irq_ch11:1;\t \n\tbool irq_ch12:1;\t \n\tunsigned char:1;\t \n\tbool irq_ch14:1;\t \n\tbool irq_ch15:1;\t \n\tunsigned char:1;\t \n\tunsigned char id:4;\t \n\tunsigned char:4;\t \n};\n\n \n\nstruct blogic_syncval {\n\tunsigned char offset:4;\t\t \n\tunsigned char tx_period:3;\t \n\tbool sync:1;\t\t\t \n};\n\nstruct blogic_setup_info {\n\tbool sync:1;\t\t\t\t \n\tbool parity:1;\t\t\t\t \n\tunsigned char:6;\t\t\t \n\tunsigned char tx_rate;\t\t\t \n\tunsigned char preempt_time;\t\t \n\tunsigned char timeoff_bus;\t\t \n\tunsigned char mbox_count;\t\t \n\tunsigned char mbox_addr[3];\t\t \n\tstruct blogic_syncval sync0to7[8];\t \n\tunsigned char disconnect_ok0to7;\t \n\tunsigned char sig;\t\t\t \n\tunsigned char char_d;\t\t\t \n\tunsigned char bus_type;\t\t\t \n\tunsigned char wide_tx_ok0to7;\t\t \n\tunsigned char wide_tx_active0to7;\t \n\tstruct blogic_syncval sync8to15[8];\t \n\tunsigned char disconnect_ok8to15;\t \n\tunsigned char:8;\t\t\t \n\tunsigned char wide_tx_ok8to15;\t\t \n\tunsigned char wide_tx_active8to15;\t \n};\n\n \n\nstruct blogic_extmbox_req {\n\tunsigned char mbox_count;\t \n\tu32 base_mbox_addr;\t\t \n} PACKED;\n\n\n \n\nenum blogic_isa_ioport {\n\tBLOGIC_IO_330 = 0,\n\tBLOGIC_IO_334 = 1,\n\tBLOGIC_IO_230 = 2,\n\tBLOGIC_IO_234 = 3,\n\tBLOGIC_IO_130 = 4,\n\tBLOGIC_IO_134 = 5,\n\tBLOGIC_IO_DISABLE = 6,\n\tBLOGIC_IO_DISABLE2 = 7\n} PACKED;\n\nstruct blogic_adapter_info {\n\tenum blogic_isa_ioport isa_port;\t \n\tunsigned char irq_ch;\t\t \n\tbool low_term:1;\t\t \n\tbool high_term:1;\t\t \n\tunsigned char:2;\t\t \n\tbool JP1:1;\t\t\t \n\tbool JP2:1;\t\t\t \n\tbool JP3:1;\t\t\t \n\tbool genericinfo_valid:1;\t \n\tunsigned char:8;\t\t \n};\n\n \n\nstruct blogic_ext_setup {\n\tunsigned char bus_type;\t\t \n\tunsigned char bios_addr;\t \n\tunsigned short sg_limit;\t \n\tunsigned char mbox_count;\t \n\tu32 base_mbox_addr;\t\t \n\tstruct {\n\t\tunsigned char:2;\t \n\t\tbool fast_on_eisa:1;\t \n\t\tunsigned char:3;\t \n\t\tbool level_int:1;\t \n\t\tunsigned char:1;\t \n\t} misc;\n\tunsigned char fw_rev[3];\t \n\tbool wide:1;\t\t\t \n\tbool differential:1;\t\t \n\tbool scam:1;\t\t\t \n\tbool ultra:1;\t\t\t \n\tbool smart_term:1;\t\t \n\tunsigned char:3;\t\t \n} PACKED;\n\n \n\nenum blogic_rr_req {\n\tBLOGIC_AGGRESSIVE_RR = 0,\n\tBLOGIC_STRICT_RR_MODE = 1\n} PACKED;\n\n\n \n\n#define BLOGIC_BIOS_BASE\t\t0\n#define BLOGIC_AUTOSCSI_BASE\t\t64\n\nstruct blogic_fetch_localram {\n\tunsigned char offset;\t \n\tunsigned char count;\t \n};\n\n \n\nstruct blogic_autoscsi {\n\tunsigned char factory_sig[2];\t\t \n\tunsigned char info_bytes;\t\t \n\tunsigned char adapter_type[6];\t\t \n\tunsigned char:8;\t\t\t \n\tbool floppy:1;\t\t\t\t \n\tbool floppy_sec:1;\t\t\t \n\tbool level_int:1;\t\t\t \n\tunsigned char:2;\t\t\t \n\tunsigned char systemram_bios:3;\t\t \n\tunsigned char dma_ch:7;\t\t\t \n\tbool dma_autoconf:1;\t\t\t \n\tunsigned char irq_ch:7;\t\t\t \n\tbool irq_autoconf:1;\t\t\t \n\tunsigned char dma_tx_rate;\t\t \n\tunsigned char scsi_id;\t\t\t \n\tbool low_term:1;\t\t\t \n\tbool parity:1;\t\t\t\t \n\tbool high_term:1;\t\t\t \n\tbool noisy_cable:1;\t\t\t \n\tbool fast_sync_neg:1;\t\t\t \n\tbool reset_enabled:1;\t\t\t \n\tbool:1;\t\t\t\t\t \n\tbool active_negation:1;\t\t\t \n\tunsigned char bus_on_delay;\t\t \n\tunsigned char bus_off_delay;\t\t \n\tbool bios_enabled:1;\t\t\t \n\tbool int19_redir_enabled:1;\t\t \n\tbool ext_trans_enable:1;\t\t \n\tbool removable_as_fixed:1;\t\t \n\tbool:1;\t\t\t\t\t \n\tbool morethan2_drives:1;\t\t \n\tbool bios_int:1;\t\t\t \n\tbool floptical:1;\t\t\t \n\tunsigned short dev_enabled;\t\t \n\tunsigned short wide_ok;\t\t\t \n\tunsigned short fast_ok;\t\t\t \n\tunsigned short sync_ok;\t\t\t \n\tunsigned short discon_ok;\t\t \n\tunsigned short send_start_unit;\t\t \n\tunsigned short ignore_bios_scan;\t \n\tunsigned char pci_int_pin:2;\t\t \n\tunsigned char adapter_ioport:2;\t\t \n\tbool strict_rr_enabled:1;\t\t \n\tbool vesabus_33mhzplus:1;\t\t \n\tbool vesa_burst_write:1;\t\t \n\tbool vesa_burst_read:1;\t\t\t \n\tunsigned short ultra_ok;\t\t \n\tunsigned int:32;\t\t\t \n\tunsigned char:8;\t\t\t \n\tunsigned char autoscsi_maxlun;\t\t \n\tbool:1;\t\t\t\t\t \n\tbool scam_dominant:1;\t\t\t \n\tbool scam_enabled:1;\t\t\t \n\tbool scam_lev2:1;\t\t\t \n\tunsigned char:4;\t\t\t \n\tbool int13_exten:1;\t\t\t \n\tbool:1;\t\t\t\t\t \n\tbool cd_boot:1;\t\t\t\t \n\tunsigned char:5;\t\t\t \n\tunsigned char boot_id:4;\t\t \n\tunsigned char boot_ch:4;\t\t \n\tunsigned char force_scan_order:1;\t \n\tunsigned char:7;\t\t\t \n\tunsigned short nontagged_to_alt_ok;\t \n\tunsigned short reneg_sync_on_check;\t \n\tunsigned char rsvd[10];\t\t\t \n\tunsigned char manuf_diag[2];\t\t \n\tunsigned short cksum;\t\t\t \n} PACKED;\n\n \n\nstruct blogic_autoscsi_byte45 {\n\tunsigned char force_scan_order:1;\t \n\tunsigned char:7;\t \n};\n\n \n\n#define BLOGIC_BIOS_DRVMAP\t\t17\n\nstruct blogic_bios_drvmap {\n\tunsigned char tgt_idbit3:1;\t\t\t \n\tunsigned char:2;\t\t\t\t \n\tenum blogic_bios_diskgeometry diskgeom:2;\t \n\tunsigned char tgt_id:3;\t\t\t\t \n};\n\n \n\nenum blogic_setccb_fmt {\n\tBLOGIC_LEGACY_LUN_CCB = 0,\n\tBLOGIC_EXT_LUN_CCB = 1\n} PACKED;\n\n \n\nenum blogic_action {\n\tBLOGIC_OUTBOX_FREE = 0x00,\n\tBLOGIC_MBOX_START = 0x01,\n\tBLOGIC_MBOX_ABORT = 0x02\n} PACKED;\n\n\n \n\nenum blogic_cmplt_code {\n\tBLOGIC_INBOX_FREE = 0x00,\n\tBLOGIC_CMD_COMPLETE_GOOD = 0x01,\n\tBLOGIC_CMD_ABORT_BY_HOST = 0x02,\n\tBLOGIC_CMD_NOTFOUND = 0x03,\n\tBLOGIC_CMD_COMPLETE_ERROR = 0x04,\n\tBLOGIC_INVALID_CCB = 0x05\n} PACKED;\n\n \n\nenum blogic_ccb_opcode {\n\tBLOGIC_INITIATOR_CCB = 0x00,\n\tBLOGIC_TGT_CCB = 0x01,\n\tBLOGIC_INITIATOR_CCB_SG = 0x02,\n\tBLOGIC_INITIATOR_CCBB_RESIDUAL = 0x03,\n\tBLOGIC_INITIATOR_CCB_SG_RESIDUAL = 0x04,\n\tBLOGIC_BDR = 0x81\n} PACKED;\n\n\n \n\nenum blogic_datadir {\n\tBLOGIC_UNCHECKED_TX = 0,\n\tBLOGIC_DATAIN_CHECKED = 1,\n\tBLOGIC_DATAOUT_CHECKED = 2,\n\tBLOGIC_NOTX = 3\n};\n\n\n \n\nenum blogic_adapter_status {\n\tBLOGIC_CMD_CMPLT_NORMAL = 0x00,\n\tBLOGIC_LINK_CMD_CMPLT = 0x0A,\n\tBLOGIC_LINK_CMD_CMPLT_FLAG = 0x0B,\n\tBLOGIC_DATA_UNDERRUN = 0x0C,\n\tBLOGIC_SELECT_TIMEOUT = 0x11,\n\tBLOGIC_DATA_OVERRUN = 0x12,\n\tBLOGIC_NOEXPECT_BUSFREE = 0x13,\n\tBLOGIC_INVALID_BUSPHASE = 0x14,\n\tBLOGIC_INVALID_OUTBOX_CODE = 0x15,\n\tBLOGIC_INVALID_CMD_CODE = 0x16,\n\tBLOGIC_LINKCCB_BADLUN = 0x17,\n\tBLOGIC_BAD_CMD_PARAM = 0x1A,\n\tBLOGIC_AUTOREQSENSE_FAIL = 0x1B,\n\tBLOGIC_TAGQUEUE_REJECT = 0x1C,\n\tBLOGIC_BAD_MSG_RCVD = 0x1D,\n\tBLOGIC_HW_FAIL = 0x20,\n\tBLOGIC_NORESPONSE_TO_ATN = 0x21,\n\tBLOGIC_HW_RESET = 0x22,\n\tBLOGIC_RST_FROM_OTHERDEV = 0x23,\n\tBLOGIC_BAD_RECONNECT = 0x24,\n\tBLOGIC_HW_BDR = 0x25,\n\tBLOGIC_ABRT_QUEUE = 0x26,\n\tBLOGIC_ADAPTER_SW_ERROR = 0x27,\n\tBLOGIC_HW_TIMEOUT = 0x30,\n\tBLOGIC_PARITY_ERR = 0x34\n} PACKED;\n\n\n \n\nenum blogic_tgt_status {\n\tBLOGIC_OP_GOOD = 0x00,\n\tBLOGIC_CHECKCONDITION = 0x02,\n\tBLOGIC_DEVBUSY = 0x08\n} PACKED;\n\n \n\nenum blogic_queuetag {\n\tBLOGIC_SIMPLETAG = 0,\n\tBLOGIC_HEADTAG = 1,\n\tBLOGIC_ORDEREDTAG = 2,\n\tBLOGIC_RSVDTAG = 3\n};\n\n \n\n#define BLOGIC_CDB_MAXLEN\t\t\t12\n\n\n \n\nstruct blogic_sg_seg {\n\tu32 segbytes;\t \n\tu32 segdata;\t \n};\n\n \n\nenum blogic_ccb_status {\n\tBLOGIC_CCB_FREE = 0,\n\tBLOGIC_CCB_ACTIVE = 1,\n\tBLOGIC_CCB_COMPLETE = 2,\n\tBLOGIC_CCB_RESET = 3\n} PACKED;\n\n\n \n\nstruct blogic_ccb {\n\t \n\tenum blogic_ccb_opcode opcode;\t\t\t \n\tunsigned char:3;\t\t\t\t \n\tenum blogic_datadir datadir:2;\t\t\t \n\tbool tag_enable:1;\t\t\t\t \n\tenum blogic_queuetag queuetag:2;\t\t \n\tunsigned char cdblen;\t\t\t\t \n\tunsigned char sense_datalen;\t\t\t \n\tu32 datalen;\t\t\t\t\t \n\tu32 data;\t\t\t\t\t \n\tunsigned char:8;\t\t\t\t \n\tunsigned char:8;\t\t\t\t \n\tenum blogic_adapter_status adapter_status;\t \n\tenum blogic_tgt_status tgt_status;\t\t \n\tunsigned char tgt_id;\t\t\t\t \n\tunsigned char lun:5;\t\t\t\t \n\tbool legacytag_enable:1;\t\t\t \n\tenum blogic_queuetag legacy_tag:2;\t\t \n\tunsigned char cdb[BLOGIC_CDB_MAXLEN];\t\t \n\tunsigned char:8;\t\t\t\t \n\tunsigned char:8;\t\t\t\t \n\tu32 rsvd_int;\t\t\t\t\t \n\tu32 sensedata;\t\t\t\t\t \n\t \n\tvoid (*callback) (struct blogic_ccb *);\t\t \n\tu32 base_addr;\t\t\t\t\t \n\tenum blogic_cmplt_code comp_code;\t\t \n#ifdef CONFIG_SCSI_FLASHPOINT\n\tunsigned char:8;\t\t\t\t \n\tu16 os_flags;\t\t\t\t\t \n\tunsigned char private[24];\t\t\t \n\tvoid *rsvd1;\n\tvoid *rsvd2;\n\tunsigned char private2[16];\n#endif\n\t \n\tdma_addr_t allocgrp_head;\n\tunsigned int allocgrp_size;\n\tu32 dma_handle;\n\tenum blogic_ccb_status status;\n\tunsigned long serial;\n\tstruct scsi_cmnd *command;\n\tstruct blogic_adapter *adapter;\n\tstruct blogic_ccb *next;\n\tstruct blogic_ccb *next_all;\n\tstruct blogic_sg_seg sglist[BLOGIC_SG_LIMIT];\n};\n\n \n\nstruct blogic_outbox {\n\tu32 ccb;\t\t\t \n\tu32:24;\t\t\t\t \n\tenum blogic_action action;\t \n};\n\n \n\nstruct blogic_inbox {\n\tu32 ccb;\t\t\t\t\t \n\tenum blogic_adapter_status adapter_status;\t \n\tenum blogic_tgt_status tgt_status;\t\t \n\tunsigned char:8;\t\t\t\t \n\tenum blogic_cmplt_code comp_code;\t\t \n};\n\n\n \n\nstruct blogic_drvr_options {\n\tunsigned short tagq_ok;\n\tunsigned short tagq_ok_mask;\n\tunsigned short bus_settle_time;\n\tunsigned short stop_tgt_inquiry;\n\tunsigned char common_qdepth;\n\tunsigned char qdepth[BLOGIC_MAXDEV];\n};\n\n \n\nstruct blogic_tgt_flags {\n\tbool tgt_exists:1;\n\tbool tagq_ok:1;\n\tbool wide_ok:1;\n\tbool tagq_active:1;\n\tbool wide_active:1;\n\tbool cmd_good:1;\n\tbool tgt_info_in:1;\n};\n\n \n\n#define BLOGIC_SZ_BUCKETS\t\t\t10\n\nstruct blogic_tgt_stats {\n\tunsigned int cmds_tried;\n\tunsigned int cmds_complete;\n\tunsigned int read_cmds;\n\tunsigned int write_cmds;\n\tstruct blogic_byte_count bytesread;\n\tstruct blogic_byte_count byteswritten;\n\tunsigned int read_sz_buckets[BLOGIC_SZ_BUCKETS];\n\tunsigned int write_sz_buckets[BLOGIC_SZ_BUCKETS];\n\tunsigned short aborts_request;\n\tunsigned short aborts_tried;\n\tunsigned short aborts_done;\n\tunsigned short bdr_request;\n\tunsigned short bdr_tried;\n\tunsigned short bdr_done;\n\tunsigned short adapter_reset_req;\n\tunsigned short adapter_reset_attempt;\n\tunsigned short adapter_reset_done;\n};\n\n \n\n#define FPOINT_BADCARD_HANDLE\t\t0xFFFFFFFFL\n\n\n \n\nstruct fpoint_info {\n\tu32 base_addr;\t\t\t\t \n\tbool present;\t\t\t\t \n\tunsigned char irq_ch;\t\t\t \n\tunsigned char scsi_id;\t\t\t \n\tunsigned char scsi_lun;\t\t\t \n\tu16 fw_rev;\t\t\t\t \n\tu16 sync_ok;\t\t\t\t \n\tu16 fast_ok;\t\t\t\t \n\tu16 ultra_ok;\t\t\t\t \n\tu16 discon_ok;\t\t\t\t \n\tu16 wide_ok;\t\t\t\t \n\tbool parity:1;\t\t\t\t \n\tbool wide:1;\t\t\t\t \n\tbool softreset:1;\t\t\t \n\tbool ext_trans_enable:1;\t\t \n\tbool low_term:1;\t\t\t \n\tbool high_term:1;\t\t\t \n\tbool report_underrun:1;\t\t\t \n\tbool scam_enabled:1;\t\t\t \n\tbool scam_lev2:1;\t\t\t \n\tunsigned char:7;\t\t\t \n\tunsigned char family;\t\t\t \n\tunsigned char bus_type;\t\t\t \n\tunsigned char model[3];\t\t\t \n\tunsigned char relative_cardnum;\t\t \n\tunsigned char rsvd[4];\t\t\t \n\tu32 os_rsvd;\t\t\t\t \n\tunsigned char translation_info[4];\t \n\tu32 rsvd2[5];\t\t\t\t \n\tu32 sec_range;\t\t\t\t \n};\n\n \n\nstruct blogic_adapter {\n\tstruct Scsi_Host *scsi_host;\n\tstruct pci_dev *pci_device;\n\tenum blogic_adapter_type adapter_type;\n\tenum blogic_adapter_bus_type adapter_bus_type;\n\tunsigned long io_addr;\n\tunsigned long pci_addr;\n\tunsigned short addr_count;\n\tunsigned char host_no;\n\tunsigned char model[9];\n\tunsigned char fw_ver[6];\n\tunsigned char full_model[18];\n\tunsigned char bus;\n\tunsigned char dev;\n\tunsigned char irq_ch;\n\tunsigned char scsi_id;\n\tbool irq_acquired:1;\n\tbool ext_trans_enable:1;\n\tbool parity:1;\n\tbool reset_enabled:1;\n\tbool level_int:1;\n\tbool wide:1;\n\tbool differential:1;\n\tbool scam:1;\n\tbool ultra:1;\n\tbool ext_lun:1;\n\tbool terminfo_valid:1;\n\tbool low_term:1;\n\tbool high_term:1;\n\tbool strict_rr:1;\n\tbool scam_enabled:1;\n\tbool scam_lev2:1;\n\tbool adapter_initd:1;\n\tbool adapter_extreset:1;\n\tbool adapter_intern_err:1;\n\tbool processing_ccbs;\n\tvolatile bool adapter_cmd_complete;\n\tunsigned short adapter_sglimit;\n\tunsigned short drvr_sglimit;\n\tunsigned short maxdev;\n\tunsigned short maxlun;\n\tunsigned short mbox_count;\n\tunsigned short initccbs;\n\tunsigned short inc_ccbs;\n\tunsigned short alloc_ccbs;\n\tunsigned short drvr_qdepth;\n\tunsigned short adapter_qdepth;\n\tunsigned short untag_qdepth;\n\tunsigned short common_qdepth;\n\tunsigned short bus_settle_time;\n\tunsigned short sync_ok;\n\tunsigned short fast_ok;\n\tunsigned short ultra_ok;\n\tunsigned short wide_ok;\n\tunsigned short discon_ok;\n\tunsigned short tagq_ok;\n\tunsigned short ext_resets;\n\tunsigned short adapter_intern_errors;\n\tunsigned short tgt_count;\n\tunsigned short msgbuflen;\n\tu32 bios_addr;\n\tstruct blogic_drvr_options *drvr_opts;\n\tstruct fpoint_info fpinfo;\n\tvoid *cardhandle;\n\tstruct list_head host_list;\n\tstruct blogic_ccb *all_ccbs;\n\tstruct blogic_ccb *free_ccbs;\n\tstruct blogic_ccb *firstccb;\n\tstruct blogic_ccb *lastccb;\n\tstruct blogic_ccb *bdr_pend[BLOGIC_MAXDEV];\n\tstruct blogic_tgt_flags tgt_flags[BLOGIC_MAXDEV];\n\tunsigned char qdepth[BLOGIC_MAXDEV];\n\tunsigned char sync_period[BLOGIC_MAXDEV];\n\tunsigned char sync_offset[BLOGIC_MAXDEV];\n\tunsigned char active_cmds[BLOGIC_MAXDEV];\n\tunsigned int cmds_since_rst[BLOGIC_MAXDEV];\n\tunsigned long last_seqpoint[BLOGIC_MAXDEV];\n\tunsigned long last_resettried[BLOGIC_MAXDEV];\n\tunsigned long last_resetdone[BLOGIC_MAXDEV];\n\tstruct blogic_outbox *first_outbox;\n\tstruct blogic_outbox *last_outbox;\n\tstruct blogic_outbox *next_outbox;\n\tstruct blogic_inbox *first_inbox;\n\tstruct blogic_inbox *last_inbox;\n\tstruct blogic_inbox *next_inbox;\n\tstruct blogic_tgt_stats tgt_stats[BLOGIC_MAXDEV];\n\tunsigned char *mbox_space;\n\tdma_addr_t mbox_space_handle;\n\tunsigned int mbox_sz;\n\tunsigned long ccb_offset;\n\tchar msgbuf[BLOGIC_MSGBUF_SIZE];\n};\n\n \n\nstruct bios_diskparam {\n\tint heads;\n\tint sectors;\n\tint cylinders;\n};\n\n \n\nstruct scsi_inquiry {\n\tunsigned char devtype:5;\t \n\tunsigned char dev_qual:3;\t \n\tunsigned char dev_modifier:7;\t \n\tbool rmb:1;\t\t\t \n\tunsigned char ansi_ver:3;\t \n\tunsigned char ecma_ver:3;\t \n\tunsigned char iso_ver:2;\t \n\tunsigned char resp_fmt:4;\t \n\tunsigned char:2;\t\t \n\tbool TrmIOP:1;\t\t\t \n\tbool AENC:1;\t\t\t \n\tunsigned char addl_len;\t\t \n\tunsigned char:8;\t\t \n\tunsigned char:8;\t\t \n\tbool SftRe:1;\t\t\t \n\tbool CmdQue:1;\t\t\t \n\tbool:1;\t\t\t\t \n\tbool linked:1;\t\t\t \n\tbool sync:1;\t\t\t \n\tbool WBus16:1;\t\t\t \n\tbool WBus32:1;\t\t\t \n\tbool RelAdr:1;\t\t\t \n\tunsigned char vendor[8];\t \n\tunsigned char product[16];\t \n\tunsigned char product_rev[4];\t \n};\n\n\n \n\nstatic inline void blogic_busreset(struct blogic_adapter *adapter)\n{\n\tunion blogic_cntrl_reg cr;\n\tcr.all = 0;\n\tcr.cr.bus_reset = true;\n\toutb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);\n}\n\nstatic inline void blogic_intreset(struct blogic_adapter *adapter)\n{\n\tunion blogic_cntrl_reg cr;\n\tcr.all = 0;\n\tcr.cr.int_reset = true;\n\toutb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);\n}\n\nstatic inline void blogic_softreset(struct blogic_adapter *adapter)\n{\n\tunion blogic_cntrl_reg cr;\n\tcr.all = 0;\n\tcr.cr.soft_reset = true;\n\toutb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);\n}\n\nstatic inline void blogic_hardreset(struct blogic_adapter *adapter)\n{\n\tunion blogic_cntrl_reg cr;\n\tcr.all = 0;\n\tcr.cr.hard_reset = true;\n\toutb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);\n}\n\nstatic inline unsigned char blogic_rdstatus(struct blogic_adapter *adapter)\n{\n\treturn inb(adapter->io_addr + BLOGIC_STATUS_REG);\n}\n\nstatic inline void blogic_setcmdparam(struct blogic_adapter *adapter,\n\t\t\t\t\tunsigned char value)\n{\n\toutb(value, adapter->io_addr + BLOGIC_CMD_PARM_REG);\n}\n\nstatic inline unsigned char blogic_rddatain(struct blogic_adapter *adapter)\n{\n\treturn inb(adapter->io_addr + BLOGIC_DATAIN_REG);\n}\n\nstatic inline unsigned char blogic_rdint(struct blogic_adapter *adapter)\n{\n\treturn inb(adapter->io_addr + BLOGIC_INT_REG);\n}\n\nstatic inline unsigned char blogic_rdgeom(struct blogic_adapter *adapter)\n{\n\treturn inb(adapter->io_addr + BLOGIC_GEOMETRY_REG);\n}\n\n \n\nstatic inline void blogic_execmbox(struct blogic_adapter *adapter)\n{\n\tblogic_setcmdparam(adapter, BLOGIC_EXEC_MBOX_CMD);\n}\n\n \n\nstatic inline void blogic_delay(int seconds)\n{\n\tmdelay(1000 * seconds);\n}\n\n \n\nstatic inline u32 virt_to_32bit_virt(void *virt_addr)\n{\n\treturn (u32) (unsigned long) virt_addr;\n}\n\n \n\nstatic inline void blogic_inc_count(unsigned short *count)\n{\n\tif (*count < 65535)\n\t\t(*count)++;\n}\n\n \n\nstatic inline void blogic_addcount(struct blogic_byte_count *bytecount,\n\t\t\t\t\tunsigned int amount)\n{\n\tbytecount->units += amount;\n\tif (bytecount->units > 999999999) {\n\t\tbytecount->units -= 1000000000;\n\t\tbytecount->billions++;\n\t}\n}\n\n \n\nstatic inline void blogic_incszbucket(unsigned int *cmdsz_buckets,\n\t\t\t\t\tunsigned int amount)\n{\n\tint index = 0;\n\tif (amount < 8 * 1024) {\n\t\tif (amount < 2 * 1024)\n\t\t\tindex = (amount < 1 * 1024 ? 0 : 1);\n\t\telse\n\t\t\tindex = (amount < 4 * 1024 ? 2 : 3);\n\t} else if (amount < 128 * 1024) {\n\t\tif (amount < 32 * 1024)\n\t\t\tindex = (amount < 16 * 1024 ? 4 : 5);\n\t\telse\n\t\t\tindex = (amount < 64 * 1024 ? 6 : 7);\n\t} else\n\t\tindex = (amount < 256 * 1024 ? 8 : 9);\n\tcmdsz_buckets[index]++;\n}\n\n \n\n#define FLASHPOINT_FW_VER\t\t\"5.02\"\n\n \n\n#define FPOINT_NORMAL_INT\t\t0x00\n#define FPOINT_INTERN_ERR\t\t0xFE\n#define FPOINT_EXT_RESET\t\t0xFF\n\n \n\nstatic const char *blogic_drvr_info(struct Scsi_Host *);\nstatic int blogic_qcmd(struct Scsi_Host *h, struct scsi_cmnd *);\nstatic int blogic_diskparam(struct scsi_device *, struct block_device *, sector_t, int *);\nstatic int blogic_slaveconfig(struct scsi_device *);\nstatic void blogic_qcompleted_ccb(struct blogic_ccb *);\nstatic irqreturn_t blogic_inthandler(int, void *);\nstatic int blogic_resetadapter(struct blogic_adapter *, bool hard_reset);\nstatic void blogic_msg(enum blogic_msglevel, char *, struct blogic_adapter *, ...);\nstatic int __init blogic_setup(char *);\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}