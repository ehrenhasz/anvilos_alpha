{
  "module_name": "be_mgmt.h",
  "hash_id": "35542019f812e5bf7b665d4187292666892c55c7adda59e1d2844ebc00d602d7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/be2iscsi/be_mgmt.h",
  "human_readable_source": " \n \n\n#ifndef _BEISCSI_MGMT_\n#define _BEISCSI_MGMT_\n\n#include <scsi/scsi_bsg_iscsi.h>\n#include \"be_iscsi.h\"\n#include \"be_main.h\"\n\n#define IP_ACTION_ADD\t0x01\n#define IP_ACTION_DEL\t0x02\n\n#define IP_V6_LEN\t16\n#define IP_V4_LEN\t4\n\n \n#define PCICFG_UE_STATUS_LOW            0xA0\n#define PCICFG_UE_STATUS_HIGH           0xA4\n#define PCICFG_UE_STATUS_MASK_LOW       0xA8\n#define PCICFG_UE_STATUS_MASK_HI        0xAC\n\nint mgmt_open_connection(struct beiscsi_hba *phba,\n\t\t\t struct sockaddr *dst_addr,\n\t\t\t struct beiscsi_endpoint *beiscsi_ep,\n\t\t\t struct be_dma_mem *nonemb_cmd);\n\nunsigned int mgmt_vendor_specific_fw_cmd(struct be_ctrl_info *ctrl,\n\t\t\t\t\t struct beiscsi_hba *phba,\n\t\t\t\t\t struct bsg_job *job,\n\t\t\t\t\t struct be_dma_mem *nonemb_cmd);\n\n#define BE_INVLDT_CMD_TBL_SZ\t128\nstruct invldt_cmd_tbl {\n\tunsigned short icd;\n\tunsigned short cid;\n} __packed;\n\nstruct invldt_cmds_params_in {\n\tstruct be_cmd_req_hdr hdr;\n\tunsigned int ref_handle;\n\tunsigned int icd_count;\n\tstruct invldt_cmd_tbl table[BE_INVLDT_CMD_TBL_SZ];\n\tunsigned short cleanup_type;\n\tunsigned short unused;\n} __packed;\n\nstruct invldt_cmds_params_out {\n\tstruct be_cmd_resp_hdr hdr;\n\tunsigned int ref_handle;\n\tunsigned int icd_count;\n\tunsigned int icd_status[BE_INVLDT_CMD_TBL_SZ];\n} __packed;\n\nunion be_invldt_cmds_params {\n\tstruct invldt_cmds_params_in request;\n\tstruct invldt_cmds_params_out response;\n} __packed;\n\nstruct mgmt_hba_attributes {\n\tu8 flashrom_version_string[BEISCSI_VER_STRLEN];\n\tu8 manufacturer_name[BEISCSI_VER_STRLEN];\n\tu32 supported_modes;\n\tu8 seeprom_version_lo;\n\tu8 seeprom_version_hi;\n\tu8 rsvd0[2];\n\tu32 fw_cmd_data_struct_version;\n\tu32 ep_fw_data_struct_version;\n\tu8 ncsi_version_string[12];\n\tu32 default_extended_timeout;\n\tu8 controller_model_number[BEISCSI_VER_STRLEN];\n\tu8 controller_description[64];\n\tu8 controller_serial_number[BEISCSI_VER_STRLEN];\n\tu8 ip_version_string[BEISCSI_VER_STRLEN];\n\tu8 firmware_version_string[BEISCSI_VER_STRLEN];\n\tu8 bios_version_string[BEISCSI_VER_STRLEN];\n\tu8 redboot_version_string[BEISCSI_VER_STRLEN];\n\tu8 driver_version_string[BEISCSI_VER_STRLEN];\n\tu8 fw_on_flash_version_string[BEISCSI_VER_STRLEN];\n\tu32 functionalities_supported;\n\tu16 max_cdblength;\n\tu8 asic_revision;\n\tu8 generational_guid[16];\n\tu8 hba_port_count;\n\tu16 default_link_down_timeout;\n\tu8 iscsi_ver_min_max;\n\tu8 multifunction_device;\n\tu8 cache_valid;\n\tu8 hba_status;\n\tu8 max_domains_supported;\n\tu8 phy_port;\n\tu32 firmware_post_status;\n\tu32 hba_mtu[8];\n\tu8 iscsi_features;\n\tu8 asic_generation;\n\tu8 future_u8[2];\n\tu32 future_u32[3];\n} __packed;\n\nstruct mgmt_controller_attributes {\n\tstruct mgmt_hba_attributes hba_attribs;\n\tu16 pci_vendor_id;\n\tu16 pci_device_id;\n\tu16 pci_sub_vendor_id;\n\tu16 pci_sub_system_id;\n\tu8 pci_bus_number;\n\tu8 pci_device_number;\n\tu8 pci_function_number;\n\tu8 interface_type;\n\tu64 unique_identifier;\n\tu8 netfilters;\n\tu8 rsvd0[3];\n\tu32 future_u32[4];\n} __packed;\n\nstruct be_mgmt_controller_attributes {\n\tstruct be_cmd_req_hdr hdr;\n\tstruct mgmt_controller_attributes params;\n} __packed;\n\nstruct be_mgmt_controller_attributes_resp {\n\tstruct be_cmd_resp_hdr hdr;\n\tstruct mgmt_controller_attributes params;\n} __packed;\n\nstruct be_bsg_vendor_cmd {\n\tstruct be_cmd_req_hdr hdr;\n\tunsigned short region;\n\tunsigned short offset;\n\tunsigned short sector;\n} __packed;\n\n \n\n#define GET_MGMT_CONTROLLER_WS(phba)    (phba->pmgmt_ws)\n\n#define ISCSI_GET_PDU_TEMPLATE_ADDRESS(pc, pa) {\\\n\tpa->lo = phba->init_mem[ISCSI_MEM_GLOBAL_HEADER].mem_array[0].\\\n\t\t\t\t\tbus_address.u.a32.address_lo;  \\\n\tpa->hi = phba->init_mem[ISCSI_MEM_GLOBAL_HEADER].mem_array[0].\\\n\t\t\t\t\tbus_address.u.a32.address_hi;  \\\n}\n\n#define BEISCSI_WRITE_FLASH 0\n#define BEISCSI_READ_FLASH 1\n\nstruct beiscsi_endpoint {\n\tstruct beiscsi_hba *phba;\n\tstruct beiscsi_conn *conn;\n\tstruct iscsi_endpoint *openiscsi_ep;\n\tunsigned short ip_type;\n\tchar dst6_addr[ISCSI_ADDRESS_BUF_LEN];\n\tunsigned long dst_addr;\n\tunsigned short ep_cid;\n\tunsigned int fw_handle;\n\tu16 dst_tcpport;\n\tu16 cid_vld;\n};\n\nint beiscsi_mgmt_invalidate_icds(struct beiscsi_hba *phba,\n\t\t\t\t struct invldt_cmd_tbl *inv_tbl,\n\t\t\t\t unsigned int nents);\n\nint beiscsi_get_initiator_name(struct beiscsi_hba *phba, char *name, bool cfg);\n\nint beiscsi_if_en_dhcp(struct beiscsi_hba *phba, u32 ip_type);\n\nint beiscsi_if_en_static(struct beiscsi_hba *phba, u32 ip_type,\n\t\t\t u8 *ip, u8 *subnet);\n\nint beiscsi_if_set_gw(struct beiscsi_hba *phba, u32 ip_type, u8 *gw);\n\nint beiscsi_if_get_gw(struct beiscsi_hba *phba, u32 ip_type,\n\t\t      struct be_cmd_get_def_gateway_resp *resp);\n\nint mgmt_get_nic_conf(struct beiscsi_hba *phba,\n\t\t      struct be_cmd_get_nic_conf_resp *mac);\n\nint beiscsi_if_get_info(struct beiscsi_hba *phba, int ip_type,\n\t\t\tstruct be_cmd_get_if_info_resp **if_info);\n\nunsigned int beiscsi_if_get_handle(struct beiscsi_hba *phba);\n\nint beiscsi_if_set_vlan(struct beiscsi_hba *phba, uint16_t vlan_tag);\n\nunsigned int beiscsi_boot_logout_sess(struct beiscsi_hba *phba);\n\nunsigned int beiscsi_boot_reopen_sess(struct beiscsi_hba *phba);\n\nunsigned int beiscsi_boot_get_sinfo(struct beiscsi_hba *phba);\n\nunsigned int __beiscsi_boot_get_shandle(struct beiscsi_hba *phba, int async);\n\nint beiscsi_boot_get_shandle(struct beiscsi_hba *phba, unsigned int *s_handle);\n\nssize_t beiscsi_drvr_ver_disp(struct device *dev,\n\t\t\t       struct device_attribute *attr, char *buf);\n\nssize_t beiscsi_fw_ver_disp(struct device *dev,\n\t\t\t     struct device_attribute *attr, char *buf);\n\nssize_t beiscsi_active_session_disp(struct device *dev,\n\t\t\t\t     struct device_attribute *attr, char *buf);\n\nssize_t beiscsi_adap_family_disp(struct device *dev,\n\t\t\t\t  struct device_attribute *attr, char *buf);\n\n\nssize_t beiscsi_free_session_disp(struct device *dev,\n\t\t\t\t   struct device_attribute *attr, char *buf);\n\nssize_t beiscsi_phys_port_disp(struct device *dev,\n\t\t\t\tstruct device_attribute *attr, char *buf);\n\nvoid beiscsi_offload_cxn_v0(struct beiscsi_offload_params *params,\n\t\t\t     struct wrb_handle *pwrb_handle,\n\t\t\t     struct be_mem_descriptor *mem_descr,\n\t\t\t     struct hwi_wrb_context *pwrb_context);\n\nvoid beiscsi_offload_cxn_v2(struct beiscsi_offload_params *params,\n\t\t\t     struct wrb_handle *pwrb_handle,\n\t\t\t     struct hwi_wrb_context *pwrb_context);\n\nunsigned int beiscsi_invalidate_cxn(struct beiscsi_hba *phba,\n\t\t\t\t    struct beiscsi_endpoint *beiscsi_ep);\n\nunsigned int beiscsi_upload_cxn(struct beiscsi_hba *phba,\n\t\t\t\tstruct beiscsi_endpoint *beiscsi_ep);\n\nint be_cmd_modify_eq_delay(struct beiscsi_hba *phba,\n\t\t\t struct be_set_eqd *, int num);\n\nint beiscsi_logout_fw_sess(struct beiscsi_hba *phba,\n\t\t\t    uint32_t fw_sess_handle);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}