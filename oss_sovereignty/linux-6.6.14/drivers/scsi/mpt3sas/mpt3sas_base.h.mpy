{
  "module_name": "mpt3sas_base.h",
  "hash_id": "84159ff548a80425345bedd7d5197a345faa19f06b26ded4e94f8d09f6029cd1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/mpt3sas/mpt3sas_base.h",
  "human_readable_source": " \n\n#ifndef MPT3SAS_BASE_H_INCLUDED\n#define MPT3SAS_BASE_H_INCLUDED\n\n#include \"mpi/mpi2_type.h\"\n#include \"mpi/mpi2.h\"\n#include \"mpi/mpi2_ioc.h\"\n#include \"mpi/mpi2_cnfg.h\"\n#include \"mpi/mpi2_init.h\"\n#include \"mpi/mpi2_raid.h\"\n#include \"mpi/mpi2_tool.h\"\n#include \"mpi/mpi2_sas.h\"\n#include \"mpi/mpi2_pci.h\"\n#include \"mpi/mpi2_image.h\"\n\n#include <scsi/scsi.h>\n#include <scsi/scsi_cmnd.h>\n#include <scsi/scsi_device.h>\n#include <scsi/scsi_host.h>\n#include <scsi/scsi_tcq.h>\n#include <scsi/scsi_transport_sas.h>\n#include <scsi/scsi_dbg.h>\n#include <scsi/scsi_eh.h>\n#include <linux/pci.h>\n#include <linux/poll.h>\n#include <linux/irq_poll.h>\n\n#include \"mpt3sas_debug.h\"\n#include \"mpt3sas_trigger_diag.h\"\n#include \"mpt3sas_trigger_pages.h\"\n\n \n#define MPT3SAS_DRIVER_NAME\t\t\"mpt3sas\"\n#define MPT3SAS_AUTHOR \"Avago Technologies <MPT-FusionLinux.pdl@avagotech.com>\"\n#define MPT3SAS_DESCRIPTION\t\"LSI MPT Fusion SAS 3.0 Device Driver\"\n#define MPT3SAS_DRIVER_VERSION\t\t\"43.100.00.00\"\n#define MPT3SAS_MAJOR_VERSION\t\t43\n#define MPT3SAS_MINOR_VERSION\t\t100\n#define MPT3SAS_BUILD_VERSION\t\t0\n#define MPT3SAS_RELEASE_VERSION\t00\n\n#define MPT2SAS_DRIVER_NAME\t\t\"mpt2sas\"\n#define MPT2SAS_DESCRIPTION\t\"LSI MPT Fusion SAS 2.0 Device Driver\"\n#define MPT2SAS_DRIVER_VERSION\t\t\"20.102.00.00\"\n#define MPT2SAS_MAJOR_VERSION\t\t20\n#define MPT2SAS_MINOR_VERSION\t\t102\n#define MPT2SAS_BUILD_VERSION\t\t0\n#define MPT2SAS_RELEASE_VERSION\t00\n\n \n#define MPT3SAS_DEFAULT_COREDUMP_TIMEOUT_SECONDS\t(15)  \n#define MPT3SAS_COREDUMP_LOOP_DONE                     (0xFF)\n#define MPT3SAS_TIMESYNC_TIMEOUT_SECONDS\t\t(10)  \n#define MPT3SAS_TIMESYNC_UPDATE_INTERVAL\t\t(900)  \n#define MPT3SAS_TIMESYNC_UNIT_MASK\t\t\t(0x80)  \n#define MPT3SAS_TIMESYNC_MASK\t\t\t\t(0x7F)  \n#define SECONDS_PER_MIN\t\t\t\t\t(60)\n#define SECONDS_PER_HOUR\t\t\t\t(3600)\n#define MPT3SAS_COREDUMP_LOOP_DONE\t\t\t(0xFF)\n#define MPI26_SET_IOC_PARAMETER_SYNC_TIMESTAMP\t\t(0x81)\n\n \n#define MPT_MAX_PHYS_SEGMENTS\tSG_CHUNK_SIZE\n#define MPT_MIN_PHYS_SEGMENTS\t16\n#define MPT_KDUMP_MIN_PHYS_SEGMENTS\t32\n\n#define MCPU_MAX_CHAINS_PER_IO\t3\n\n#ifdef CONFIG_SCSI_MPT3SAS_MAX_SGE\n#define MPT3SAS_SG_DEPTH\t\tCONFIG_SCSI_MPT3SAS_MAX_SGE\n#else\n#define MPT3SAS_SG_DEPTH\t\tMPT_MAX_PHYS_SEGMENTS\n#endif\n\n#ifdef CONFIG_SCSI_MPT2SAS_MAX_SGE\n#define MPT2SAS_SG_DEPTH\t\tCONFIG_SCSI_MPT2SAS_MAX_SGE\n#else\n#define MPT2SAS_SG_DEPTH\t\tMPT_MAX_PHYS_SEGMENTS\n#endif\n\n \n#define MPT3SAS_SATA_QUEUE_DEPTH\t32\n#define MPT3SAS_SAS_QUEUE_DEPTH\t\t254\n#define MPT3SAS_RAID_QUEUE_DEPTH\t128\n#define MPT3SAS_KDUMP_SCSI_IO_DEPTH\t200\n\n#define MPT3SAS_RAID_MAX_SECTORS\t8192\n#define MPT3SAS_HOST_PAGE_SIZE_4K\t12\n#define MPT3SAS_NVME_QUEUE_DEPTH\t128\n#define MPT_NAME_LENGTH\t\t\t32\t \n#define MPT_STRING_LENGTH\t\t64\n#define MPI_FRAME_START_OFFSET\t\t256\n#define REPLY_FREE_POOL_SIZE\t\t512  \n\n#define MPT_MAX_CALLBACKS\t\t32\n\n#define MPT_MAX_HBA_NUM_PHYS\t\t32\n\n#define INTERNAL_CMDS_COUNT\t\t10\t \n \n#define INTERNAL_SCSIIO_CMDS_COUNT\t3\n\n#define MPI3_HIM_MASK\t\t\t0xFFFFFFFF  \n\n#define MPT3SAS_INVALID_DEVICE_HANDLE\t0xFFFF\n\n#define MAX_CHAIN_ELEMT_SZ\t\t16\n#define DEFAULT_NUM_FWCHAIN_ELEMTS\t8\n\n#define IO_UNIT_CONTROL_SHUTDOWN_TIMEOUT 6\n#define FW_IMG_HDR_READ_TIMEOUT\t15\n\n#define IOC_OPERATIONAL_WAIT_COUNT\t10\n\n \n#define\tNVME_PRP_SIZE\t\t\t8\t \n#define\tNVME_ERROR_RESPONSE_SIZE\t16\t \n#define NVME_TASK_ABORT_MIN_TIMEOUT\t6\n#define NVME_TASK_ABORT_MAX_TIMEOUT\t60\n#define NVME_TASK_MNGT_CUSTOM_MASK\t(0x0010)\n#define\tNVME_PRP_PAGE_SIZE\t\t4096\t \n\nstruct mpt3sas_nvme_cmd {\n\tu8\trsvd[24];\n\t__le64\tprp1;\n\t__le64\tprp2;\n};\n\n \n#define ioc_err(ioc, fmt, ...)\t\t\t\t\t\t\\\n\tpr_err(\"%s: \" fmt, (ioc)->name, ##__VA_ARGS__)\n#define ioc_notice(ioc, fmt, ...)\t\t\t\t\t\\\n\tpr_notice(\"%s: \" fmt, (ioc)->name, ##__VA_ARGS__)\n#define ioc_warn(ioc, fmt, ...)\t\t\t\t\t\t\\\n\tpr_warn(\"%s: \" fmt, (ioc)->name, ##__VA_ARGS__)\n#define ioc_info(ioc, fmt, ...)\t\t\t\t\t\t\\\n\tpr_info(\"%s: \" fmt, (ioc)->name, ##__VA_ARGS__)\n\n \n\n#define MPT2_WARPDRIVE_LOGENTRY\t\t(0x8002)\n#define MPT2_WARPDRIVE_LC_SSDT\t\t\t(0x41)\n#define MPT2_WARPDRIVE_LC_SSDLW\t\t(0x43)\n#define MPT2_WARPDRIVE_LC_SSDLF\t\t(0x44)\n#define MPT2_WARPDRIVE_LC_BRMF\t\t\t(0x4D)\n\n \n#define MPT_TARGET_FLAGS_RAID_COMPONENT\t0x01\n#define MPT_TARGET_FLAGS_VOLUME\t\t0x02\n#define MPT_TARGET_FLAGS_DELETED\t0x04\n#define MPT_TARGET_FASTPATH_IO\t\t0x08\n#define MPT_TARGET_FLAGS_PCIE_DEVICE\t0x10\n\n#define SAS2_PCI_DEVICE_B0_REVISION\t(0x01)\n#define SAS3_PCI_DEVICE_C0_REVISION\t(0x02)\n\n \n#define MPI26_ATLAS_PCIe_SWITCH_DEVID\t(0x00B2)\n\n \n#define MPT2SAS_INTEL_RMS25JB080_BRANDING    \\\n\t\"Intel(R) Integrated RAID Module RMS25JB080\"\n#define MPT2SAS_INTEL_RMS25JB040_BRANDING    \\\n\t\"Intel(R) Integrated RAID Module RMS25JB040\"\n#define MPT2SAS_INTEL_RMS25KB080_BRANDING    \\\n\t\"Intel(R) Integrated RAID Module RMS25KB080\"\n#define MPT2SAS_INTEL_RMS25KB040_BRANDING    \\\n\t\"Intel(R) Integrated RAID Module RMS25KB040\"\n#define MPT2SAS_INTEL_RMS25LB040_BRANDING\t\\\n\t\"Intel(R) Integrated RAID Module RMS25LB040\"\n#define MPT2SAS_INTEL_RMS25LB080_BRANDING\t\\\n\t\"Intel(R) Integrated RAID Module RMS25LB080\"\n#define MPT2SAS_INTEL_RMS2LL080_BRANDING\t\\\n\t\"Intel Integrated RAID Module RMS2LL080\"\n#define MPT2SAS_INTEL_RMS2LL040_BRANDING\t\\\n\t\"Intel Integrated RAID Module RMS2LL040\"\n#define MPT2SAS_INTEL_RS25GB008_BRANDING       \\\n\t\"Intel(R) RAID Controller RS25GB008\"\n#define MPT2SAS_INTEL_SSD910_BRANDING          \\\n\t\"Intel(R) SSD 910 Series\"\n\n#define MPT3SAS_INTEL_RMS3JC080_BRANDING       \\\n\t\"Intel(R) Integrated RAID Module RMS3JC080\"\n#define MPT3SAS_INTEL_RS3GC008_BRANDING       \\\n\t\"Intel(R) RAID Controller RS3GC008\"\n#define MPT3SAS_INTEL_RS3FC044_BRANDING       \\\n\t\"Intel(R) RAID Controller RS3FC044\"\n#define MPT3SAS_INTEL_RS3UC080_BRANDING       \\\n\t\"Intel(R) RAID Controller RS3UC080\"\n\n \n#define MPT2SAS_INTEL_RMS25JB080_SSDID\t\t0x3516\n#define MPT2SAS_INTEL_RMS25JB040_SSDID\t\t0x3517\n#define MPT2SAS_INTEL_RMS25KB080_SSDID\t\t0x3518\n#define MPT2SAS_INTEL_RMS25KB040_SSDID\t\t0x3519\n#define MPT2SAS_INTEL_RMS25LB040_SSDID\t\t0x351A\n#define MPT2SAS_INTEL_RMS25LB080_SSDID\t\t0x351B\n#define MPT2SAS_INTEL_RMS2LL080_SSDID\t\t0x350E\n#define MPT2SAS_INTEL_RMS2LL040_SSDID\t\t0x350F\n#define MPT2SAS_INTEL_RS25GB008_SSDID\t\t0x3000\n#define MPT2SAS_INTEL_SSD910_SSDID\t\t0x3700\n\n#define MPT3SAS_INTEL_RMS3JC080_SSDID\t\t0x3521\n#define MPT3SAS_INTEL_RS3GC008_SSDID\t\t0x3522\n#define MPT3SAS_INTEL_RS3FC044_SSDID\t\t0x3523\n#define MPT3SAS_INTEL_RS3UC080_SSDID\t\t0x3524\n\n \n#define MPT2SAS_DELL_BRANDING_SIZE                 32\n\n#define MPT2SAS_DELL_6GBPS_SAS_HBA_BRANDING        \"Dell 6Gbps SAS HBA\"\n#define MPT2SAS_DELL_PERC_H200_ADAPTER_BRANDING    \"Dell PERC H200 Adapter\"\n#define MPT2SAS_DELL_PERC_H200_INTEGRATED_BRANDING \"Dell PERC H200 Integrated\"\n#define MPT2SAS_DELL_PERC_H200_MODULAR_BRANDING    \"Dell PERC H200 Modular\"\n#define MPT2SAS_DELL_PERC_H200_EMBEDDED_BRANDING   \"Dell PERC H200 Embedded\"\n#define MPT2SAS_DELL_PERC_H200_BRANDING            \"Dell PERC H200\"\n#define MPT2SAS_DELL_6GBPS_SAS_BRANDING            \"Dell 6Gbps SAS\"\n\n#define MPT3SAS_DELL_12G_HBA_BRANDING       \\\n\t\"Dell 12Gbps HBA\"\n\n \n#define MPT2SAS_DELL_6GBPS_SAS_HBA_SSDID\t0x1F1C\n#define MPT2SAS_DELL_PERC_H200_ADAPTER_SSDID\t0x1F1D\n#define MPT2SAS_DELL_PERC_H200_INTEGRATED_SSDID\t0x1F1E\n#define MPT2SAS_DELL_PERC_H200_MODULAR_SSDID\t0x1F1F\n#define MPT2SAS_DELL_PERC_H200_EMBEDDED_SSDID\t0x1F20\n#define MPT2SAS_DELL_PERC_H200_SSDID\t\t0x1F21\n#define MPT2SAS_DELL_6GBPS_SAS_SSDID\t\t0x1F22\n\n#define MPT3SAS_DELL_12G_HBA_SSDID\t\t0x1F46\n\n \n#define MPT3SAS_CISCO_12G_8E_HBA_BRANDING\t\t\\\n\t\"Cisco 9300-8E 12G SAS HBA\"\n#define MPT3SAS_CISCO_12G_8I_HBA_BRANDING\t\t\\\n\t\"Cisco 9300-8i 12G SAS HBA\"\n#define MPT3SAS_CISCO_12G_AVILA_HBA_BRANDING\t\\\n\t\"Cisco 12G Modular SAS Pass through Controller\"\n#define MPT3SAS_CISCO_12G_COLUSA_MEZZANINE_HBA_BRANDING\t\t\\\n\t\"UCS C3X60 12G SAS Pass through Controller\"\n \n#define MPT3SAS_CISCO_12G_8E_HBA_SSDID  0x14C\n#define MPT3SAS_CISCO_12G_8I_HBA_SSDID  0x154\n#define MPT3SAS_CISCO_12G_AVILA_HBA_SSDID  0x155\n#define MPT3SAS_CISCO_12G_COLUSA_MEZZANINE_HBA_SSDID  0x156\n\n \n#define MPT3_DIAG_BUFFER_IS_REGISTERED\t(0x01)\n#define MPT3_DIAG_BUFFER_IS_RELEASED\t(0x02)\n#define MPT3_DIAG_BUFFER_IS_DIAG_RESET\t(0x04)\n#define MPT3_DIAG_BUFFER_IS_DRIVER_ALLOCATED (0x08)\n#define MPT3_DIAG_BUFFER_IS_APP_OWNED (0x10)\n\n \n#define MPT2SAS_HP_3PAR_SSVID                0x1590\n\n#define MPT2SAS_HP_2_4_INTERNAL_BRANDING\t\\\n\t\"HP H220 Host Bus Adapter\"\n#define MPT2SAS_HP_2_4_EXTERNAL_BRANDING\t\\\n\t\"HP H221 Host Bus Adapter\"\n#define MPT2SAS_HP_1_4_INTERNAL_1_4_EXTERNAL_BRANDING\t\\\n\t\"HP H222 Host Bus Adapter\"\n#define MPT2SAS_HP_EMBEDDED_2_4_INTERNAL_BRANDING\t\\\n\t\"HP H220i Host Bus Adapter\"\n#define MPT2SAS_HP_DAUGHTER_2_4_INTERNAL_BRANDING\t\\\n\t\"HP H210i Host Bus Adapter\"\n\n \n#define MPT2SAS_HP_2_4_INTERNAL_SSDID\t\t\t0x0041\n#define MPT2SAS_HP_2_4_EXTERNAL_SSDID\t\t\t0x0042\n#define MPT2SAS_HP_1_4_INTERNAL_1_4_EXTERNAL_SSDID\t0x0043\n#define MPT2SAS_HP_EMBEDDED_2_4_INTERNAL_SSDID\t\t0x0044\n#define MPT2SAS_HP_DAUGHTER_2_4_INTERNAL_SSDID\t\t0x0046\n\n \n#define MAX_COMBINED_MSIX_VECTORS(gen35) ((gen35 == 1) ? 16 : 8)\n#define MPT3_SUP_REPLY_POST_HOST_INDEX_REG_COUNT_G3\t12\n#define MPT3_SUP_REPLY_POST_HOST_INDEX_REG_COUNT_G35\t16\n#define MPT3_SUP_REPLY_POST_HOST_INDEX_REG_OFFSET\t(0x10)\n#define MPT3_MIN_IRQS\t\t\t\t\t1\n\n \n#define MFG10_OEM_ID_INVALID                   (0x00000000)\n#define MFG10_OEM_ID_DELL                      (0x00000001)\n#define MFG10_OEM_ID_FSC                       (0x00000002)\n#define MFG10_OEM_ID_SUN                       (0x00000003)\n#define MFG10_OEM_ID_IBM                       (0x00000004)\n\n \n#define MFG10_GF0_OCE_DISABLED                 (0x00000001)\n#define MFG10_GF0_R1E_DRIVE_COUNT              (0x00000002)\n#define MFG10_GF0_R10_DISPLAY                  (0x00000004)\n#define MFG10_GF0_SSD_DATA_SCRUB_DISABLE       (0x00000008)\n#define MFG10_GF0_SINGLE_DRIVE_R0              (0x00000010)\n\n#define VIRTUAL_IO_FAILED_RETRY\t\t\t(0x32010081)\n\n \n#define MPT3SAS_DEVICE_HIGH_IOPS_DEPTH\t\t8\n#define MPT3SAS_HIGH_IOPS_REPLY_QUEUES\t\t8\n#define MPT3SAS_HIGH_IOPS_BATCH_COUNT\t\t16\n#define MPT3SAS_GEN35_MAX_MSIX_QUEUES\t\t128\n#define RDPQ_MAX_INDEX_IN_ONE_CHUNK\t\t16\n\n \nstruct Mpi2ManufacturingPage10_t {\n\tMPI2_CONFIG_PAGE_HEADER\tHeader;\t\t \n\tU8\tOEMIdentifier;\t\t\t \n\tU8\tReserved1;\t\t\t \n\tU16\tReserved2;\t\t\t \n\tU32\tReserved3;\t\t\t \n\tU32\tGenericFlags0;\t\t\t \n\tU32\tGenericFlags1;\t\t\t \n\tU32\tReserved4;\t\t\t \n\tU32\tOEMSpecificFlags0;\t\t \n\tU32\tOEMSpecificFlags1;\t\t \n\tU32\tReserved5[18];\t\t\t \n};\n\n\n \nstruct Mpi2ManufacturingPage11_t {\n\tMPI2_CONFIG_PAGE_HEADER Header;\t\t \n\t__le32\tReserved1;\t\t\t \n\tu8\tReserved2;\t\t\t \n\tu8\tEEDPTagMode;\t\t\t \n\tu8\tReserved3;\t\t\t \n\tu8\tReserved4;\t\t\t \n\t__le32\tReserved5[8];\t\t\t \n\tu16\tAddlFlags2;\t\t\t \n\tu8\tAddlFlags3;\t\t\t \n\tu8\tReserved6;\t\t\t \n\t__le32\tReserved7[7];\t\t\t \n\tu8\tNVMeAbortTO;\t\t\t \n\tu8\tNumPerDevEvents;\t\t \n\tu8\tHostTraceBufferDecrementSizeKB;\t \n\tu8\tHostTraceBufferFlags;\t\t \n\tu16\tHostTraceBufferMaxSizeKB;\t \n\tu16\tHostTraceBufferMinSizeKB;\t \n\tu8\tCoreDumpTOSec;\t\t\t \n\tu8\tTimeSyncInterval;\t\t \n\tu16\tReserved9;\t\t\t \n\t__le32\tReserved10;\t\t\t \n};\n\n \nstruct MPT3SAS_TARGET {\n\tstruct scsi_target *starget;\n\tu64\tsas_address;\n\tstruct _raid_device *raid_device;\n\tu16\thandle;\n\tint\tnum_luns;\n\tu32\tflags;\n\tu8\tdeleted;\n\tu8\ttm_busy;\n\tstruct hba_port *port;\n\tstruct _sas_device *sas_dev;\n\tstruct _pcie_device *pcie_dev;\n};\n\n\n \n#define MPT_DEVICE_FLAGS_INIT\t\t0x01\n\n#define MFG_PAGE10_HIDE_SSDS_MASK\t(0x00000003)\n#define MFG_PAGE10_HIDE_ALL_DISKS\t(0x00)\n#define MFG_PAGE10_EXPOSE_ALL_DISKS\t(0x01)\n#define MFG_PAGE10_HIDE_IF_VOL_PRESENT\t(0x02)\n\n \nstruct MPT3SAS_DEVICE {\n\tstruct MPT3SAS_TARGET *sas_target;\n\tunsigned int\tlun;\n\tu32\tflags;\n\tu8\tconfigured_lun;\n\tu8\tblock;\n\tu8\ttlr_snoop_check;\n\tu8\tignore_delay_remove;\n\t \n\tu8\tncq_prio_enable;\n\t \n\tunsigned long ata_command_pending;\n\n};\n\n#define MPT3_CMD_NOT_USED\t0x8000\t \n#define MPT3_CMD_COMPLETE\t0x0001\t \n#define MPT3_CMD_PENDING\t0x0002\t \n#define MPT3_CMD_REPLY_VALID\t0x0004\t \n#define MPT3_CMD_RESET\t\t0x0008\t \n#define MPT3_CMD_COMPLETE_ASYNC 0x0010   \n\n \nstruct _internal_cmd {\n\tstruct mutex mutex;\n\tstruct completion done;\n\tvoid\t*reply;\n\tvoid\t*sense;\n\tu16\tstatus;\n\tu16\tsmid;\n};\n\n\n\n \nstruct _sas_device {\n\tstruct list_head list;\n\tstruct scsi_target *starget;\n\tu64\tsas_address;\n\tu64\tdevice_name;\n\tu16\thandle;\n\tu64\tsas_address_parent;\n\tu16\tenclosure_handle;\n\tu64\tenclosure_logical_id;\n\tu16\tvolume_handle;\n\tu64\tvolume_wwid;\n\tu32\tdevice_info;\n\tint\tid;\n\tint\tchannel;\n\tu16\tslot;\n\tu8\tphy;\n\tu8\tresponding;\n\tu8\tfast_path;\n\tu8\tpfa_led_on;\n\tu8\tpend_sas_rphy_add;\n\tu8\tenclosure_level;\n\tu8\tchassis_slot;\n\tu8\tis_chassis_slot_valid;\n\tu8\tconnector_name[5];\n\tstruct kref refcount;\n\tu8\tport_type;\n\tstruct hba_port *port;\n\tstruct sas_rphy *rphy;\n};\n\nstatic inline void sas_device_get(struct _sas_device *s)\n{\n\tkref_get(&s->refcount);\n}\n\nstatic inline void sas_device_free(struct kref *r)\n{\n\tkfree(container_of(r, struct _sas_device, refcount));\n}\n\nstatic inline void sas_device_put(struct _sas_device *s)\n{\n\tkref_put(&s->refcount, sas_device_free);\n}\n\n \nstruct _pcie_device {\n\tstruct list_head list;\n\tstruct scsi_target *starget;\n\tu64\twwid;\n\tu16\thandle;\n\tu32\tdevice_info;\n\tint\tid;\n\tint\tchannel;\n\tu16\tslot;\n\tu8\tport_num;\n\tu8\tresponding;\n\tu8\tfast_path;\n\tu32\tnvme_mdts;\n\tu16\tenclosure_handle;\n\tu64\tenclosure_logical_id;\n\tu8\tenclosure_level;\n\tu8\tconnector_name[4];\n\tu8\t*serial_number;\n\tu8\treset_timeout;\n\tu8\taccess_status;\n\tu16\tshutdown_latency;\n\tstruct kref refcount;\n};\n \nstatic inline void pcie_device_get(struct _pcie_device *p)\n{\n\tkref_get(&p->refcount);\n}\n\n \nstatic inline void pcie_device_free(struct kref *r)\n{\n\tkfree(container_of(r, struct _pcie_device, refcount));\n}\n\n \nstatic inline void pcie_device_put(struct _pcie_device *p)\n{\n\tkref_put(&p->refcount, pcie_device_free);\n}\n \n#define MPT_MAX_WARPDRIVE_PDS\t\t8\nstruct _raid_device {\n\tstruct list_head list;\n\tstruct scsi_target *starget;\n\tstruct scsi_device *sdev;\n\tu64\twwid;\n\tu16\thandle;\n\tu16\tblock_sz;\n\tint\tid;\n\tint\tchannel;\n\tu8\tvolume_type;\n\tu8\tnum_pds;\n\tu8\tresponding;\n\tu8\tpercent_complete;\n\tu8\tdirect_io_enabled;\n\tu8\tstripe_exponent;\n\tu8\tblock_exponent;\n\tu64\tmax_lba;\n\tu32\tstripe_sz;\n\tu32\tdevice_info;\n\tu16\tpd_handle[MPT_MAX_WARPDRIVE_PDS];\n};\n\n \nstruct _boot_device {\n\tint channel;\n\tvoid *device;\n};\n\n \nstruct _sas_port {\n\tstruct list_head port_list;\n\tu8\tnum_phys;\n\tstruct sas_identify remote_identify;\n\tstruct sas_rphy *rphy;\n\tstruct sas_port *port;\n\tstruct hba_port *hba_port;\n\tstruct list_head phy_list;\n};\n\n \nstruct _sas_phy {\n\tstruct list_head port_siblings;\n\tstruct sas_identify identify;\n\tstruct sas_identify remote_identify;\n\tstruct sas_phy *phy;\n\tu8\tphy_id;\n\tu16\thandle;\n\tu16\tattached_handle;\n\tu8\tphy_belongs_to_port;\n\tu8\thba_vphy;\n\tstruct hba_port *port;\n};\n\n \nstruct _sas_node {\n\tstruct list_head list;\n\tstruct device *parent_dev;\n\tu8\tnum_phys;\n\tu64\tsas_address;\n\tu16\thandle;\n\tu64\tsas_address_parent;\n\tu16\tenclosure_handle;\n\tu64\tenclosure_logical_id;\n\tu8\tresponding;\n\tu8\tnr_phys_allocated;\n\tstruct hba_port *port;\n\tstruct\t_sas_phy *phy;\n\tstruct list_head sas_port_list;\n\tstruct sas_rphy *rphy;\n};\n\n \nstruct _enclosure_node {\n\tstruct list_head list;\n\tMpi2SasEnclosurePage0_t pg0;\n};\n\n \nenum reset_type {\n\tFORCE_BIG_HAMMER,\n\tSOFT_RESET,\n};\n\n \nstruct pcie_sg_list {\n\tvoid            *pcie_sgl;\n\tdma_addr_t      pcie_sgl_dma;\n};\n\n \nstruct chain_tracker {\n\tvoid *chain_buffer;\n\tdma_addr_t chain_buffer_dma;\n};\n\nstruct chain_lookup {\n\tstruct chain_tracker *chains_per_smid;\n\tatomic_t\tchain_offset;\n};\n\n \nstruct scsiio_tracker {\n\tu16\tsmid;\n\tstruct scsi_cmnd *scmd;\n\tu8\tcb_idx;\n\tu8\tdirect_io;\n\tstruct pcie_sg_list pcie_sg_list;\n\tstruct list_head chain_list;\n\tu16     msix_io;\n};\n\n \nstruct request_tracker {\n\tu16\tsmid;\n\tu8\tcb_idx;\n\tstruct list_head tracker_list;\n};\n\n \nstruct _tr_list {\n\tstruct list_head list;\n\tu16\thandle;\n\tu16\tstate;\n};\n\n \nstruct _sc_list {\n\tstruct list_head list;\n\tu16     handle;\n};\n\n \nstruct _event_ack_list {\n\tstruct list_head list;\n\tU16     Event;\n\tU32     EventContext;\n};\n\n \nstruct adapter_reply_queue {\n\tstruct MPT3SAS_ADAPTER\t*ioc;\n\tu8\t\t\tmsix_index;\n\tu32\t\t\treply_post_host_index;\n\tMpi2ReplyDescriptorsUnion_t *reply_post_free;\n\tchar\t\t\tname[MPT_NAME_LENGTH];\n\tatomic_t\t\tbusy;\n\tu32\t\t\tos_irq;\n\tstruct irq_poll         irqpoll;\n\tbool\t\t\tirq_poll_scheduled;\n\tbool\t\t\tirq_line_enable;\n\tbool\t\t\tis_iouring_poll_q;\n\tstruct list_head\tlist;\n};\n\n \nstruct io_uring_poll_queue {\n\tatomic_t\tbusy;\n\tatomic_t\tpause;\n\tstruct adapter_reply_queue *reply_q;\n};\n\ntypedef void (*MPT_ADD_SGE)(void *paddr, u32 flags_length, dma_addr_t dma_addr);\n\n \ntypedef int (*MPT_BUILD_SG_SCMD)(struct MPT3SAS_ADAPTER *ioc,\n\tstruct scsi_cmnd *scmd, u16 smid, struct _pcie_device *pcie_device);\ntypedef void (*MPT_BUILD_SG)(struct MPT3SAS_ADAPTER *ioc, void *psge,\n\t\tdma_addr_t data_out_dma, size_t data_out_sz,\n\t\tdma_addr_t data_in_dma, size_t data_in_sz);\ntypedef void (*MPT_BUILD_ZERO_LEN_SGE)(struct MPT3SAS_ADAPTER *ioc,\n\t\tvoid *paddr);\n\n \ntypedef void (*NVME_BUILD_PRP)(struct MPT3SAS_ADAPTER *ioc, u16 smid,\n\tMpi26NVMeEncapsulatedRequest_t *nvme_encap_request,\n\tdma_addr_t data_out_dma, size_t data_out_sz, dma_addr_t data_in_dma,\n\tsize_t data_in_sz);\n\n \ntypedef void (*PUT_SMID_IO_FP_HIP) (struct MPT3SAS_ADAPTER *ioc, u16 smid,\n\tu16 funcdep);\ntypedef void (*PUT_SMID_DEFAULT) (struct MPT3SAS_ADAPTER *ioc, u16 smid);\ntypedef u32 (*BASE_READ_REG) (const void __iomem *addr);\n \ntypedef u8 (*GET_MSIX_INDEX) (struct MPT3SAS_ADAPTER *ioc,\n\tstruct scsi_cmnd *scmd);\n\n \nunion mpi3_version_union {\n\tMPI2_VERSION_STRUCT\t\tStruct;\n\tu32\t\t\t\tWord;\n};\n\nstruct mpt3sas_facts {\n\tu16\t\t\tMsgVersion;\n\tu16\t\t\tHeaderVersion;\n\tu8\t\t\tIOCNumber;\n\tu8\t\t\tVP_ID;\n\tu8\t\t\tVF_ID;\n\tu16\t\t\tIOCExceptions;\n\tu16\t\t\tIOCStatus;\n\tu32\t\t\tIOCLogInfo;\n\tu8\t\t\tMaxChainDepth;\n\tu8\t\t\tWhoInit;\n\tu8\t\t\tNumberOfPorts;\n\tu8\t\t\tMaxMSIxVectors;\n\tu16\t\t\tRequestCredit;\n\tu16\t\t\tProductID;\n\tu32\t\t\tIOCCapabilities;\n\tunion mpi3_version_union\tFWVersion;\n\tu16\t\t\tIOCRequestFrameSize;\n\tu16\t\t\tIOCMaxChainSegmentSize;\n\tu16\t\t\tMaxInitiators;\n\tu16\t\t\tMaxTargets;\n\tu16\t\t\tMaxSasExpanders;\n\tu16\t\t\tMaxEnclosures;\n\tu16\t\t\tProtocolFlags;\n\tu16\t\t\tHighPriorityCredit;\n\tu16\t\t\tMaxReplyDescriptorPostQueueDepth;\n\tu8\t\t\tReplyFrameSize;\n\tu8\t\t\tMaxVolumes;\n\tu16\t\t\tMaxDevHandle;\n\tu16\t\t\tMaxPersistentEntries;\n\tu16\t\t\tMinDevHandle;\n\tu8\t\t\tCurrentHostPageSize;\n};\n\nstruct mpt3sas_port_facts {\n\tu8\t\t\tPortNumber;\n\tu8\t\t\tVP_ID;\n\tu8\t\t\tVF_ID;\n\tu8\t\t\tPortType;\n\tu16\t\t\tMaxPostedCmdBuffers;\n};\n\nstruct reply_post_struct {\n\tMpi2ReplyDescriptorsUnion_t\t*reply_post_free;\n\tdma_addr_t\t\t\treply_post_free_dma;\n};\n\n \nstruct virtual_phy {\n\tstruct\tlist_head list;\n\tu64\tsas_address;\n\tu32\tphy_mask;\n\tu8\tflags;\n};\n\n#define MPT_VPHY_FLAG_DIRTY_PHY\t0x01\n\n \nstruct hba_port {\n\tstruct list_head list;\n\tu64\tsas_address;\n\tu32\tphy_mask;\n\tu8      port_id;\n\tu8\tflags;\n\tu32\tvphys_mask;\n\tstruct list_head vphys_list;\n};\n\n \n#define HBA_PORT_FLAG_DIRTY_PORT       0x01\n#define HBA_PORT_FLAG_NEW_PORT         0x02\n\n#define MULTIPATH_DISABLED_PORT_ID     0xFF\n\n \nstruct htb_rel_query {\n\tu16\tbuffer_rel_condition;\n\tu16\treserved;\n\tu32\ttrigger_type;\n\tu32\ttrigger_info_dwords[2];\n};\n\n \n\n \n#define MPT3_DIAG_BUFFER_NOT_RELEASED\t(0x00)\n \n#define MPT3_DIAG_BUFFER_RELEASED\t(0x01)\n\n \n#define MPT3_DIAG_BUFFER_REL_IOCTL\t(0x02 | MPT3_DIAG_BUFFER_RELEASED)\n\n \n#define MPT3_DIAG_BUFFER_REL_TRIGGER\t(0x04 | MPT3_DIAG_BUFFER_RELEASED)\n\n \n#define MPT3_DIAG_BUFFER_REL_SYSFS\t(0x08 | MPT3_DIAG_BUFFER_RELEASED)\n\n \n#define MPT_DIAG_RESET_ISSUED_BY_DRIVER 0x00000000\n#define MPT_DIAG_RESET_ISSUED_BY_USER\t0x00000001\n\ntypedef void (*MPT3SAS_FLUSH_RUNNING_CMDS)(struct MPT3SAS_ADAPTER *ioc);\n \nstruct MPT3SAS_ADAPTER {\n\tstruct list_head list;\n\tstruct Scsi_Host *shost;\n\tu8\t\tid;\n\tint\t\tcpu_count;\n\tchar\t\tname[MPT_NAME_LENGTH];\n\tchar\t\tdriver_name[MPT_NAME_LENGTH - 8];\n\tchar\t\ttmp_string[MPT_STRING_LENGTH];\n\tstruct pci_dev\t*pdev;\n\tMpi2SystemInterfaceRegs_t __iomem *chip;\n\tphys_addr_t\tchip_phys;\n\tint\t\tlogging_level;\n\tint\t\tfwfault_debug;\n\tu8\t\tir_firmware;\n\tint\t\tbars;\n\tu8\t\tmask_interrupts;\n\n\t \n\tchar\t\tfault_reset_work_q_name[20];\n\tstruct workqueue_struct *fault_reset_work_q;\n\tstruct delayed_work fault_reset_work;\n\n\t \n\tchar\t\tfirmware_event_name[20];\n\tstruct workqueue_struct\t*firmware_event_thread;\n\tspinlock_t\tfw_event_lock;\n\tstruct list_head fw_event_list;\n\tstruct fw_event_work\t*current_event;\n\tu8\t\tfw_events_cleanup;\n\n\t  \n\tint\t\taen_event_read_flag;\n\tu8\t\tbroadcast_aen_busy;\n\tu16\t\tbroadcast_aen_pending;\n\tu8\t\tshost_recovery;\n\tu8\t\tgot_task_abort_from_ioctl;\n\n\tstruct mutex\treset_in_progress_mutex;\n\tspinlock_t\tioc_reset_in_progress_lock;\n\tu8\t\tioc_link_reset_in_progress;\n\n\tu8\t\tignore_loginfos;\n\tu8\t\tremove_host;\n\tu8\t\tpci_error_recovery;\n\tu8\t\twait_for_discovery_to_complete;\n\tu8\t\tis_driver_loading;\n\tu8\t\tport_enable_failed;\n\tu8\t\tstart_scan;\n\tu16\t\tstart_scan_failed;\n\n\tu8\t\tmsix_enable;\n\tu16\t\tmsix_vector_count;\n\tu8\t\t*cpu_msix_table;\n\tu16\t\tcpu_msix_table_sz;\n\tresource_size_t __iomem **reply_post_host_index;\n\tu32\t\tioc_reset_count;\n\tMPT3SAS_FLUSH_RUNNING_CMDS schedule_dead_ioc_flush_running_cmds;\n\tu32             non_operational_loop;\n\tu8              ioc_coredump_loop;\n\tu32\t\ttimestamp_update_count;\n\tu32\t\ttime_sync_interval;\n\tatomic64_t      total_io_cnt;\n\tatomic64_t\thigh_iops_outstanding;\n\tbool            msix_load_balance;\n\tu16\t\tthresh_hold;\n\tu8\t\thigh_iops_queues;\n\tu8\t\tiopoll_q_start_index;\n\tu32             drv_internal_flags;\n\tu32\t\tdrv_support_bitmap;\n\tu32             dma_mask;\n\tbool\t\tenable_sdev_max_qd;\n\tbool\t\tuse_32bit_dma;\n\tstruct io_uring_poll_queue *io_uring_poll_queues;\n\n\t \n\tu8\t\tscsi_io_cb_idx;\n\tu8\t\ttm_cb_idx;\n\tu8\t\ttransport_cb_idx;\n\tu8\t\tscsih_cb_idx;\n\tu8\t\tctl_cb_idx;\n\tu8\t\tbase_cb_idx;\n\tu8\t\tport_enable_cb_idx;\n\tu8\t\tconfig_cb_idx;\n\tu8\t\ttm_tr_cb_idx;\n\tu8\t\ttm_tr_volume_cb_idx;\n\tu8\t\ttm_sas_control_cb_idx;\n\tstruct _internal_cmd base_cmds;\n\tstruct _internal_cmd port_enable_cmds;\n\tstruct _internal_cmd transport_cmds;\n\tstruct _internal_cmd scsih_cmds;\n\tstruct _internal_cmd tm_cmds;\n\tstruct _internal_cmd ctl_cmds;\n\tstruct _internal_cmd config_cmds;\n\n\tMPT_ADD_SGE\tbase_add_sg_single;\n\n\t \n\tMPT_BUILD_SG_SCMD build_sg_scmd;\n\tMPT_BUILD_SG    build_sg;\n\tMPT_BUILD_ZERO_LEN_SGE build_zero_len_sge;\n\tu16             sge_size_ieee;\n\tu16\t\thba_mpi_version_belonged;\n\n\t \n\tMPT_BUILD_SG    build_sg_mpi;\n\tMPT_BUILD_ZERO_LEN_SGE build_zero_len_sge_mpi;\n\n\t \n\tNVME_BUILD_PRP  build_nvme_prp;\n\n\t \n\tu32\t\tevent_type[MPI2_EVENT_NOTIFY_EVENTMASK_WORDS];\n\tu32\t\tevent_context;\n\tvoid\t\t*event_log;\n\tu32\t\tevent_masks[MPI2_EVENT_NOTIFY_EVENTMASK_WORDS];\n\n\tu8\t\ttm_custom_handling;\n\tu8\t\tnvme_abort_timeout;\n\tu16\t\tmax_shutdown_latency;\n\tu16\t\tmax_wideport_qd;\n\tu16\t\tmax_narrowport_qd;\n\tu16\t\tmax_nvme_qd;\n\tu8\t\tmax_sata_qd;\n\n\t \n\tstruct mpt3sas_facts facts;\n\tstruct mpt3sas_facts prev_fw_facts;\n\tstruct mpt3sas_port_facts *pfacts;\n\tMpi2ManufacturingPage0_t manu_pg0;\n\tstruct Mpi2ManufacturingPage10_t manu_pg10;\n\tstruct Mpi2ManufacturingPage11_t manu_pg11;\n\tMpi2BiosPage2_t\tbios_pg2;\n\tMpi2BiosPage3_t\tbios_pg3;\n\tMpi2IOCPage8_t ioc_pg8;\n\tMpi2IOUnitPage0_t iounit_pg0;\n\tMpi2IOUnitPage1_t iounit_pg1;\n\tMpi2IOUnitPage8_t iounit_pg8;\n\tMpi2IOCPage1_t\tioc_pg1_copy;\n\n\tstruct _boot_device req_boot_device;\n\tstruct _boot_device req_alt_boot_device;\n\tstruct _boot_device current_boot_device;\n\n\t \n\tstruct _sas_node sas_hba;\n\tstruct list_head sas_expander_list;\n\tstruct list_head enclosure_list;\n\tspinlock_t\tsas_node_lock;\n\tstruct list_head sas_device_list;\n\tstruct list_head sas_device_init_list;\n\tspinlock_t\tsas_device_lock;\n\tstruct list_head pcie_device_list;\n\tstruct list_head pcie_device_init_list;\n\tspinlock_t      pcie_device_lock;\n\n\tstruct list_head raid_device_list;\n\tspinlock_t\traid_device_lock;\n\tu8\t\tio_missing_delay;\n\tu16\t\tdevice_missing_delay;\n\tint\t\tsas_id;\n\tint\t\tpcie_target_id;\n\n\tvoid\t\t*blocking_handles;\n\tvoid\t\t*pd_handles;\n\tu16\t\tpd_handles_sz;\n\n\tvoid\t\t*pend_os_device_add;\n\tu16\t\tpend_os_device_add_sz;\n\n\t \n\tu16\t\tconfig_page_sz;\n\tvoid\t\t*config_page;\n\tdma_addr_t\tconfig_page_dma;\n\tvoid\t\t*config_vaddr;\n\n\t \n\tu16\t\thba_queue_depth;\n\tu16\t\tsge_size;\n\tu16\t\tscsiio_depth;\n\tu16\t\trequest_sz;\n\tu8\t\t*request;\n\tdma_addr_t\trequest_dma;\n\tu32\t\trequest_dma_sz;\n\tstruct pcie_sg_list *pcie_sg_lookup;\n\tspinlock_t\tscsi_lookup_lock;\n\tint\t\tpending_io_count;\n\twait_queue_head_t reset_wq;\n\tu16\t\t*io_queue_num;\n\n\t \n\tstruct dma_pool *pcie_sgl_dma_pool;\n\t \n\tu32\t\tpage_size;\n\n\t \n\tstruct chain_lookup *chain_lookup;\n\tstruct list_head free_chain_list;\n\tstruct dma_pool *chain_dma_pool;\n\tulong\t\tchain_pages;\n\tu16\t\tmax_sges_in_main_message;\n\tu16\t\tmax_sges_in_chain_message;\n\tu16\t\tchains_needed_per_io;\n\tu32\t\tchain_depth;\n\tu16\t\tchain_segment_sz;\n\tu16\t\tchains_per_prp_buffer;\n\n\t \n\tu16\t\thi_priority_smid;\n\tu8\t\t*hi_priority;\n\tdma_addr_t\thi_priority_dma;\n\tu16\t\thi_priority_depth;\n\tstruct request_tracker *hpr_lookup;\n\tstruct list_head hpr_free_list;\n\n\t \n\tu16\t\tinternal_smid;\n\tu8\t\t*internal;\n\tdma_addr_t\tinternal_dma;\n\tu16\t\tinternal_depth;\n\tstruct request_tracker *internal_lookup;\n\tstruct list_head internal_free_list;\n\n\t \n\tu8\t\t*sense;\n\tdma_addr_t\tsense_dma;\n\tstruct dma_pool *sense_dma_pool;\n\n\t \n\tu16\t\treply_sz;\n\tu8\t\t*reply;\n\tdma_addr_t\treply_dma;\n\tu32\t\treply_dma_max_address;\n\tu32\t\treply_dma_min_address;\n\tstruct dma_pool *reply_dma_pool;\n\n\t \n\tu16\t\treply_free_queue_depth;\n\t__le32\t\t*reply_free;\n\tdma_addr_t\treply_free_dma;\n\tstruct dma_pool *reply_free_dma_pool;\n\tu32\t\treply_free_host_index;\n\n\t \n\tu16\t\treply_post_queue_depth;\n\tstruct reply_post_struct *reply_post;\n\tu8\t\trdpq_array_capable;\n\tu8\t\trdpq_array_enable;\n\tu8\t\trdpq_array_enable_assigned;\n\tstruct dma_pool *reply_post_free_dma_pool;\n\tstruct dma_pool *reply_post_free_array_dma_pool;\n\tMpi2IOCInitRDPQArrayEntry *reply_post_free_array;\n\tdma_addr_t reply_post_free_array_dma;\n\tu8\t\treply_queue_count;\n\tstruct list_head reply_queue_list;\n\n\tu8\t\tcombined_reply_queue;\n\tu8\t\tcombined_reply_index_count;\n\tu8\t\tsmp_affinity_enable;\n\t \n\tresource_size_t\t__iomem **replyPostRegisterIndex;\n\n\tstruct list_head delayed_tr_list;\n\tstruct list_head delayed_tr_volume_list;\n\tstruct list_head delayed_sc_list;\n\tstruct list_head delayed_event_ack_list;\n\tu8\t\ttemp_sensors_count;\n\tstruct mutex pci_access_mutex;\n\n\t \n\tu8\t\t*diag_buffer[MPI2_DIAG_BUF_TYPE_COUNT];\n\tu32\t\tdiag_buffer_sz[MPI2_DIAG_BUF_TYPE_COUNT];\n\tdma_addr_t\tdiag_buffer_dma[MPI2_DIAG_BUF_TYPE_COUNT];\n\tu8\t\tdiag_buffer_status[MPI2_DIAG_BUF_TYPE_COUNT];\n\tu32\t\tunique_id[MPI2_DIAG_BUF_TYPE_COUNT];\n\tu32\t\tproduct_specific[MPI2_DIAG_BUF_TYPE_COUNT][23];\n\tu32\t\tdiagnostic_flags[MPI2_DIAG_BUF_TYPE_COUNT];\n\tu32\t\tring_buffer_offset;\n\tu32\t\tring_buffer_sz;\n\tstruct htb_rel_query htb_rel;\n\tu8 reset_from_user;\n\tu8\t\tis_warpdrive;\n\tu8\t\tis_mcpu_endpoint;\n\tu8\t\thide_ir_msg;\n\tu8\t\tmfg_pg10_hide_flag;\n\tu8\t\thide_drives;\n\tspinlock_t\tdiag_trigger_lock;\n\tu8\t\tdiag_trigger_active;\n\tu8\t\tatomic_desc_capable;\n\tBASE_READ_REG\tbase_readl;\n\tBASE_READ_REG\tbase_readl_ext_retry;\n\tstruct SL_WH_MASTER_TRIGGER_T diag_trigger_master;\n\tstruct SL_WH_EVENT_TRIGGERS_T diag_trigger_event;\n\tstruct SL_WH_SCSI_TRIGGERS_T diag_trigger_scsi;\n\tstruct SL_WH_MPI_TRIGGERS_T diag_trigger_mpi;\n\tu8\t\tsupports_trigger_pages;\n\tvoid\t\t*device_remove_in_progress;\n\tu16\t\tdevice_remove_in_progress_sz;\n\tu8\t\tis_gen35_ioc;\n\tu8\t\tis_aero_ioc;\n\tstruct dentry\t*debugfs_root;\n\tstruct dentry\t*ioc_dump;\n\tPUT_SMID_IO_FP_HIP put_smid_scsi_io;\n\tPUT_SMID_IO_FP_HIP put_smid_fast_path;\n\tPUT_SMID_IO_FP_HIP put_smid_hi_priority;\n\tPUT_SMID_DEFAULT put_smid_default;\n\tGET_MSIX_INDEX get_msix_index_for_smlio;\n\n\tu8\t\tmultipath_on_hba;\n\tstruct list_head port_table_list;\n};\n\nstruct mpt3sas_debugfs_buffer {\n\tvoid\t*buf;\n\tu32\tlen;\n};\n\n#define MPT_DRV_SUPPORT_BITMAP_MEMMOVE 0x00000001\n#define MPT_DRV_SUPPORT_BITMAP_ADDNLQUERY\t0x00000002\n\n#define MPT_DRV_INTERNAL_FIRST_PE_ISSUED\t\t0x00000001\n\ntypedef u8 (*MPT_CALLBACK)(struct MPT3SAS_ADAPTER *ioc, u16 smid, u8 msix_index,\n\tu32 reply);\n\n \nstruct ATTO_SAS_NVRAM {\n\tu8\t\tSignature[4];\n\tu8\t\tVersion;\n#define ATTO_SASNVR_VERSION\t\t0\n\n\tu8\t\tChecksum;\n#define ATTO_SASNVR_CKSUM_SEED\t0x5A\n\tu8\t\tPad[10];\n\tu8\t\tSasAddr[8];\n#define ATTO_SAS_ADDR_ALIGN\t\t64\n\tu8\t\tReserved[232];\n};\n\n#define ATTO_SAS_ADDR_DEVNAME_BIAS\t\t63\n\nunion ATTO_SAS_ADDRESS {\n\tU8\t\tb[8];\n\tU16\t\tw[4];\n\tU32\t\td[2];\n\tU64\t\tq;\n};\n\n \nextern struct list_head mpt3sas_ioc_list;\nextern char    driver_name[MPT_NAME_LENGTH];\n \nextern spinlock_t gioc_lock;\n\nvoid mpt3sas_base_start_watchdog(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_stop_watchdog(struct MPT3SAS_ADAPTER *ioc);\n\nint mpt3sas_base_attach(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_detach(struct MPT3SAS_ADAPTER *ioc);\nint mpt3sas_base_map_resources(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_free_resources(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_free_enclosure_list(struct MPT3SAS_ADAPTER *ioc);\nint mpt3sas_base_hard_reset_handler(struct MPT3SAS_ADAPTER *ioc,\n\tenum reset_type type);\n\nvoid *mpt3sas_base_get_msg_frame(struct MPT3SAS_ADAPTER *ioc, u16 smid);\nvoid *mpt3sas_base_get_sense_buffer(struct MPT3SAS_ADAPTER *ioc, u16 smid);\n__le32 mpt3sas_base_get_sense_buffer_dma(struct MPT3SAS_ADAPTER *ioc,\n\tu16 smid);\nvoid *mpt3sas_base_get_pcie_sgl(struct MPT3SAS_ADAPTER *ioc, u16 smid);\ndma_addr_t mpt3sas_base_get_pcie_sgl_dma(struct MPT3SAS_ADAPTER *ioc, u16 smid);\nvoid mpt3sas_base_sync_reply_irqs(struct MPT3SAS_ADAPTER *ioc, u8 poll);\nvoid mpt3sas_base_mask_interrupts(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_unmask_interrupts(struct MPT3SAS_ADAPTER *ioc);\n\nvoid mpt3sas_base_put_smid_fast_path(struct MPT3SAS_ADAPTER *ioc, u16 smid,\n\tu16 handle);\nvoid mpt3sas_base_put_smid_hi_priority(struct MPT3SAS_ADAPTER *ioc, u16 smid,\n\tu16 msix_task);\nvoid mpt3sas_base_put_smid_nvme_encap(struct MPT3SAS_ADAPTER *ioc, u16 smid);\nvoid mpt3sas_base_put_smid_default(struct MPT3SAS_ADAPTER *ioc, u16 smid);\n \nu16 mpt3sas_base_get_smid_hpr(struct MPT3SAS_ADAPTER *ioc, u8 cb_idx);\nu16 mpt3sas_base_get_smid_scsiio(struct MPT3SAS_ADAPTER *ioc, u8 cb_idx,\n\t\tstruct scsi_cmnd *scmd);\nvoid mpt3sas_base_clear_st(struct MPT3SAS_ADAPTER *ioc,\n\t\tstruct scsiio_tracker *st);\n\nu16 mpt3sas_base_get_smid(struct MPT3SAS_ADAPTER *ioc, u8 cb_idx);\nvoid mpt3sas_base_free_smid(struct MPT3SAS_ADAPTER *ioc, u16 smid);\nvoid mpt3sas_base_initialize_callback_handler(void);\nu8 mpt3sas_base_register_callback_handler(MPT_CALLBACK cb_func);\nvoid mpt3sas_base_release_callback_handler(u8 cb_idx);\n\nu8 mpt3sas_base_done(struct MPT3SAS_ADAPTER *ioc, u16 smid, u8 msix_index,\n\tu32 reply);\nu8 mpt3sas_port_enable_done(struct MPT3SAS_ADAPTER *ioc, u16 smid,\n\tu8 msix_index, u32 reply);\nvoid *mpt3sas_base_get_reply_virt_addr(struct MPT3SAS_ADAPTER *ioc,\n\tu32 phys_addr);\n\nu32 mpt3sas_base_get_iocstate(struct MPT3SAS_ADAPTER *ioc, int cooked);\n\nvoid mpt3sas_base_fault_info(struct MPT3SAS_ADAPTER *ioc , u16 fault_code);\n#define mpt3sas_print_fault_code(ioc, fault_code) \\\ndo { pr_err(\"%s fault info from func: %s\\n\", ioc->name, __func__); \\\n\tmpt3sas_base_fault_info(ioc, fault_code); } while (0)\n\nvoid mpt3sas_base_coredump_info(struct MPT3SAS_ADAPTER *ioc, u16 fault_code);\n#define mpt3sas_print_coredump_info(ioc, fault_code) \\\ndo { pr_err(\"%s fault info from func: %s\\n\", ioc->name, __func__); \\\n\tmpt3sas_base_coredump_info(ioc, fault_code); } while (0)\n\nint mpt3sas_base_wait_for_coredump_completion(struct MPT3SAS_ADAPTER *ioc,\n\t\tconst char *caller);\nint mpt3sas_base_sas_iounit_control(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2SasIoUnitControlReply_t *mpi_reply,\n\tMpi2SasIoUnitControlRequest_t *mpi_request);\nint mpt3sas_base_scsi_enclosure_processor(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2SepReply_t *mpi_reply, Mpi2SepRequest_t *mpi_request);\n\nvoid mpt3sas_base_validate_event_type(struct MPT3SAS_ADAPTER *ioc,\n\tu32 *event_type);\n\nvoid mpt3sas_halt_firmware(struct MPT3SAS_ADAPTER *ioc);\n\nvoid mpt3sas_base_update_missing_delay(struct MPT3SAS_ADAPTER *ioc,\n\tu16 device_missing_delay, u8 io_missing_delay);\n\nint mpt3sas_base_check_for_fault_and_issue_reset(\n\tstruct MPT3SAS_ADAPTER *ioc);\n\nint mpt3sas_port_enable(struct MPT3SAS_ADAPTER *ioc);\n\nvoid\nmpt3sas_wait_for_commands_to_complete(struct MPT3SAS_ADAPTER *ioc);\n\nu8 mpt3sas_base_check_cmd_timeout(struct MPT3SAS_ADAPTER *ioc,\n\tu8 status, void *mpi_request, int sz);\n#define mpt3sas_check_cmd_timeout(ioc, status, mpi_request, sz, issue_reset) \\\ndo {\tioc_err(ioc, \"In func: %s\\n\", __func__); \\\n\tissue_reset = mpt3sas_base_check_cmd_timeout(ioc, \\\n\tstatus, mpi_request, sz); } while (0)\n\nint mpt3sas_wait_for_ioc(struct MPT3SAS_ADAPTER *ioc, int wait_count);\nint mpt3sas_base_make_ioc_ready(struct MPT3SAS_ADAPTER *ioc, enum reset_type type);\nvoid mpt3sas_base_free_irq(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_disable_msix(struct MPT3SAS_ADAPTER *ioc);\nint mpt3sas_blk_mq_poll(struct Scsi_Host *shost, unsigned int queue_num);\nvoid mpt3sas_base_pause_mq_polling(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_base_resume_mq_polling(struct MPT3SAS_ADAPTER *ioc);\n\n \nstruct scsi_cmnd *mpt3sas_scsih_scsi_lookup_get(struct MPT3SAS_ADAPTER *ioc,\n\tu16 smid);\nu8 mpt3sas_scsih_event_callback(struct MPT3SAS_ADAPTER *ioc, u8 msix_index,\n\tu32 reply);\nvoid mpt3sas_scsih_pre_reset_handler(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_scsih_clear_outstanding_scsi_tm_commands(\n\tstruct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_scsih_reset_done_handler(struct MPT3SAS_ADAPTER *ioc);\n\nint mpt3sas_scsih_issue_tm(struct MPT3SAS_ADAPTER *ioc, u16 handle,\n\tuint channel, uint id, u64 lun, u8 type, u16 smid_task,\n\tu16 msix_task, u8 timeout, u8 tr_method);\nint mpt3sas_scsih_issue_locked_tm(struct MPT3SAS_ADAPTER *ioc, u16 handle,\n\tuint channel, uint id, u64 lun, u8 type, u16 smid_task,\n\tu16 msix_task, u8 timeout, u8 tr_method);\n\nvoid mpt3sas_scsih_set_tm_flag(struct MPT3SAS_ADAPTER *ioc, u16 handle);\nvoid mpt3sas_scsih_clear_tm_flag(struct MPT3SAS_ADAPTER *ioc, u16 handle);\nvoid mpt3sas_expander_remove(struct MPT3SAS_ADAPTER *ioc, u64 sas_address,\n\tstruct hba_port *port);\nvoid mpt3sas_device_remove_by_sas_address(struct MPT3SAS_ADAPTER *ioc,\n\tu64 sas_address, struct hba_port *port);\nu8 mpt3sas_check_for_pending_internal_cmds(struct MPT3SAS_ADAPTER *ioc,\n\tu16 smid);\nstruct hba_port *\nmpt3sas_get_port_by_id(struct MPT3SAS_ADAPTER *ioc, u8 port,\n\tu8 bypass_dirty_port_flag);\n\nstruct _sas_node *mpt3sas_scsih_expander_find_by_handle(\n\tstruct MPT3SAS_ADAPTER *ioc, u16 handle);\nstruct _sas_node *mpt3sas_scsih_expander_find_by_sas_address(\n\tstruct MPT3SAS_ADAPTER *ioc, u64 sas_address,\n\tstruct hba_port *port);\nstruct _sas_device *mpt3sas_get_sdev_by_addr(\n\t struct MPT3SAS_ADAPTER *ioc, u64 sas_address,\n\t struct hba_port *port);\nstruct _sas_device *__mpt3sas_get_sdev_by_addr(\n\t struct MPT3SAS_ADAPTER *ioc, u64 sas_address,\n\t struct hba_port *port);\nstruct _sas_device *mpt3sas_get_sdev_by_handle(struct MPT3SAS_ADAPTER *ioc,\n\tu16 handle);\nstruct _pcie_device *mpt3sas_get_pdev_by_handle(struct MPT3SAS_ADAPTER *ioc,\n\tu16 handle);\n\nvoid mpt3sas_port_enable_complete(struct MPT3SAS_ADAPTER *ioc);\nstruct _raid_device *\nmpt3sas_raid_device_find_by_handle(struct MPT3SAS_ADAPTER *ioc, u16 handle);\nvoid mpt3sas_scsih_change_queue_depth(struct scsi_device *sdev, int qdepth);\nstruct _sas_device *\n__mpt3sas_get_sdev_by_rphy(struct MPT3SAS_ADAPTER *ioc, struct sas_rphy *rphy);\nstruct virtual_phy *\nmpt3sas_get_vphy_by_phy(struct MPT3SAS_ADAPTER *ioc,\n\tstruct hba_port *port, u32 phy);\n\n \nu8 mpt3sas_config_done(struct MPT3SAS_ADAPTER *ioc, u16 smid, u8 msix_index,\n\tu32 reply);\nint mpt3sas_config_get_number_hba_phys(struct MPT3SAS_ADAPTER *ioc,\n\tu8 *num_phys);\nint mpt3sas_config_get_manufacturing_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2ManufacturingPage0_t *config_page);\nint mpt3sas_config_get_manufacturing_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2ManufacturingPage1_t *config_page);\n\nint mpt3sas_config_get_manufacturing_pg7(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2ManufacturingPage7_t *config_page,\n\tu16 sz);\nint mpt3sas_config_get_manufacturing_pg10(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply,\n\tstruct Mpi2ManufacturingPage10_t *config_page);\n\nint mpt3sas_config_get_manufacturing_pg11(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply,\n\tstruct Mpi2ManufacturingPage11_t  *config_page);\nint mpt3sas_config_set_manufacturing_pg11(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply,\n\tstruct Mpi2ManufacturingPage11_t *config_page);\n\nint mpt3sas_config_get_bios_pg2(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2BiosPage2_t *config_page);\nint mpt3sas_config_get_bios_pg3(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2BiosPage3_t *config_page);\nint mpt3sas_config_set_bios_pg4(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2BiosPage4_t *config_page,\n\tint sz_config_page);\nint mpt3sas_config_get_bios_pg4(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2BiosPage4_t *config_page,\n\tint sz_config_page);\nint mpt3sas_config_get_iounit_pg0(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOUnitPage0_t *config_page);\nint mpt3sas_config_get_sas_device_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasDevicePage0_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_sas_device_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasDevicePage1_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_pcie_device_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26PCIeDevicePage0_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_pcie_device_pg2(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26PCIeDevicePage2_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_pcie_iounit_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26PCIeIOUnitPage1_t *config_page,\n\tu16 sz);\nint mpt3sas_config_get_sas_iounit_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasIOUnitPage0_t *config_page,\n\tu16 sz);\nint mpt3sas_config_get_iounit_pg1(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOUnitPage1_t *config_page);\nint mpt3sas_config_get_iounit_pg3(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2IOUnitPage3_t *config_page, u16 sz);\nint mpt3sas_config_set_iounit_pg1(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOUnitPage1_t *config_page);\nint mpt3sas_config_get_iounit_pg8(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOUnitPage8_t *config_page);\nint mpt3sas_config_get_sas_iounit_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasIOUnitPage1_t *config_page,\n\tu16 sz);\nint mpt3sas_config_set_sas_iounit_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasIOUnitPage1_t *config_page,\n\tu16 sz);\nint mpt3sas_config_get_ioc_pg1(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOCPage1_t *config_page);\nint mpt3sas_config_set_ioc_pg1(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOCPage1_t *config_page);\nint mpt3sas_config_get_ioc_pg8(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2IOCPage8_t *config_page);\nint mpt3sas_config_get_expander_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2ExpanderPage0_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_expander_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2ExpanderPage1_t *config_page,\n\tu32 phy_number, u16 handle);\nint mpt3sas_config_get_enclosure_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2SasEnclosurePage0_t *config_page,\n\tu32 form, u32 handle);\nint mpt3sas_config_get_phy_pg0(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2SasPhyPage0_t *config_page, u32 phy_number);\nint mpt3sas_config_get_phy_pg1(struct MPT3SAS_ADAPTER *ioc, Mpi2ConfigReply_t\n\t*mpi_reply, Mpi2SasPhyPage1_t *config_page, u32 phy_number);\nint mpt3sas_config_get_raid_volume_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2RaidVolPage1_t *config_page, u32 form,\n\tu32 handle);\nint mpt3sas_config_get_number_pds(struct MPT3SAS_ADAPTER *ioc, u16 handle,\n\tu8 *num_pds);\nint mpt3sas_config_get_raid_volume_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2RaidVolPage0_t *config_page, u32 form,\n\tu32 handle, u16 sz);\nint mpt3sas_config_get_phys_disk_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi2RaidPhysDiskPage0_t *config_page,\n\tu32 form, u32 form_specific);\nint mpt3sas_config_get_volume_handle(struct MPT3SAS_ADAPTER *ioc, u16 pd_handle,\n\tu16 *volume_handle);\nint mpt3sas_config_get_volume_wwid(struct MPT3SAS_ADAPTER *ioc,\n\tu16 volume_handle, u64 *wwid);\nint\nmpt3sas_config_get_driver_trigger_pg0(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26DriverTriggerPage0_t *config_page);\nint\nmpt3sas_config_get_driver_trigger_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26DriverTriggerPage1_t *config_page);\nint\nmpt3sas_config_get_driver_trigger_pg2(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26DriverTriggerPage2_t *config_page);\nint\nmpt3sas_config_get_driver_trigger_pg3(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26DriverTriggerPage3_t *config_page);\nint\nmpt3sas_config_get_driver_trigger_pg4(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2ConfigReply_t *mpi_reply, Mpi26DriverTriggerPage4_t *config_page);\nint\nmpt3sas_config_update_driver_trigger_pg1(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_MASTER_TRIGGER_T *master_tg, bool set);\nint\nmpt3sas_config_update_driver_trigger_pg2(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_EVENT_TRIGGERS_T *event_tg, bool set);\nint\nmpt3sas_config_update_driver_trigger_pg3(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_SCSI_TRIGGERS_T *scsi_tg, bool set);\nint\nmpt3sas_config_update_driver_trigger_pg4(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_MPI_TRIGGERS_T *mpi_tg, bool set);\n\n \nextern const struct attribute_group *mpt3sas_host_groups[];\nextern const struct attribute_group *mpt3sas_dev_groups[];\nvoid mpt3sas_ctl_init(ushort hbas_to_enumerate);\nvoid mpt3sas_ctl_exit(ushort hbas_to_enumerate);\nu8 mpt3sas_ctl_done(struct MPT3SAS_ADAPTER *ioc, u16 smid, u8 msix_index,\n\tu32 reply);\nvoid mpt3sas_ctl_pre_reset_handler(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_ctl_clear_outstanding_ioctls(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_ctl_reset_done_handler(struct MPT3SAS_ADAPTER *ioc);\nu8 mpt3sas_ctl_event_callback(struct MPT3SAS_ADAPTER *ioc,\n\tu8 msix_index, u32 reply);\nvoid mpt3sas_ctl_add_to_event_log(struct MPT3SAS_ADAPTER *ioc,\n\tMpi2EventNotificationReply_t *mpi_reply);\n\nvoid mpt3sas_enable_diag_buffer(struct MPT3SAS_ADAPTER *ioc,\n\tu8 bits_to_register);\nint mpt3sas_send_diag_release(struct MPT3SAS_ADAPTER *ioc, u8 buffer_type,\n\tu8 *issue_reset);\n\n \nextern struct scsi_transport_template *mpt3sas_transport_template;\nu8 mpt3sas_transport_done(struct MPT3SAS_ADAPTER *ioc, u16 smid, u8 msix_index,\n\tu32 reply);\nstruct _sas_port *mpt3sas_transport_port_add(struct MPT3SAS_ADAPTER *ioc,\n\tu16 handle, u64 sas_address, struct hba_port *port);\nvoid mpt3sas_transport_port_remove(struct MPT3SAS_ADAPTER *ioc, u64 sas_address,\n\tu64 sas_address_parent, struct hba_port *port);\nint mpt3sas_transport_add_host_phy(struct MPT3SAS_ADAPTER *ioc, struct _sas_phy\n\t*mpt3sas_phy, Mpi2SasPhyPage0_t phy_pg0, struct device *parent_dev);\nint mpt3sas_transport_add_expander_phy(struct MPT3SAS_ADAPTER *ioc,\n\tstruct _sas_phy *mpt3sas_phy, Mpi2ExpanderPage1_t expander_pg1,\n\tstruct device *parent_dev);\nvoid mpt3sas_transport_update_links(struct MPT3SAS_ADAPTER *ioc,\n\tu64 sas_address, u16 handle, u8 phy_number, u8 link_rate,\n\tstruct hba_port *port);\nextern struct sas_function_template mpt3sas_transport_functions;\nextern struct scsi_transport_template *mpt3sas_transport_template;\nvoid\nmpt3sas_transport_del_phy_from_an_existing_port(struct MPT3SAS_ADAPTER *ioc,\n\tstruct _sas_node *sas_node, struct _sas_phy *mpt3sas_phy);\nvoid\nmpt3sas_transport_add_phy_to_an_existing_port(struct MPT3SAS_ADAPTER *ioc,\n\tstruct _sas_node *sas_node, struct _sas_phy *mpt3sas_phy,\n\tu64 sas_address, struct hba_port *port);\n \nvoid mpt3sas_send_trigger_data_event(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_TRIGGERS_EVENT_DATA_T *event_data);\nvoid mpt3sas_process_trigger_data(struct MPT3SAS_ADAPTER *ioc,\n\tstruct SL_WH_TRIGGERS_EVENT_DATA_T *event_data);\nvoid mpt3sas_trigger_master(struct MPT3SAS_ADAPTER *ioc,\n\tu32 trigger_bitmask);\nvoid mpt3sas_trigger_event(struct MPT3SAS_ADAPTER *ioc, u16 event,\n\tu16 log_entry_qualifier);\nvoid mpt3sas_trigger_scsi(struct MPT3SAS_ADAPTER *ioc, u8 sense_key,\n\tu8 asc, u8 ascq);\nvoid mpt3sas_trigger_mpi(struct MPT3SAS_ADAPTER *ioc, u16 ioc_status,\n\tu32 loginfo);\n\n \nu8 mpt3sas_get_num_volumes(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_init_warpdrive_properties(struct MPT3SAS_ADAPTER *ioc,\n\tstruct _raid_device *raid_device);\nvoid\nmpt3sas_setup_direct_io(struct MPT3SAS_ADAPTER *ioc, struct scsi_cmnd *scmd,\n\tstruct _raid_device *raid_device, Mpi25SCSIIORequest_t *mpi_request);\n\n \nbool scsih_ncq_prio_supp(struct scsi_device *sdev);\n\nvoid mpt3sas_setup_debugfs(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_destroy_debugfs(struct MPT3SAS_ADAPTER *ioc);\nvoid mpt3sas_init_debugfs(void);\nvoid mpt3sas_exit_debugfs(void);\n\n \nstatic inline int\nmpt3sas_scsih_is_pcie_scsi_device(u32 device_info)\n{\n\tif ((device_info &\n\t    MPI26_PCIE_DEVINFO_MASK_DEVICE_TYPE) == MPI26_PCIE_DEVINFO_SCSI)\n\t\treturn 1;\n\telse\n\t\treturn 0;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}