{
  "module_name": "wd33c93.h",
  "hash_id": "943a4439bbf26f493949ef40319043a356388a7ce80a5fd7e3884325bdeeb09f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/wd33c93.h",
  "human_readable_source": " \n \n#ifndef WD33C93_H\n#define WD33C93_H\n\n\n#define PROC_INTERFACE      \n#ifdef  PROC_INTERFACE\n#define PROC_STATISTICS     \n#endif\n\n#define SYNC_DEBUG          \n#define DEBUGGING_ON        \n#define DEBUG_DEFAULTS 0    \n\n\n#ifdef DEBUGGING_ON\n#define DB(f,a) if (hostdata->args & (f)) a;\n#else\n#define DB(f,a)\n#endif\n\n#define uchar unsigned char\n\n\n \n#define WD_OWN_ID    0x00\n#define WD_CONTROL      0x01\n#define WD_TIMEOUT_PERIOD  0x02\n#define WD_CDB_1     0x03\n#define WD_CDB_2     0x04\n#define WD_CDB_3     0x05\n#define WD_CDB_4     0x06\n#define WD_CDB_5     0x07\n#define WD_CDB_6     0x08\n#define WD_CDB_7     0x09\n#define WD_CDB_8     0x0a\n#define WD_CDB_9     0x0b\n#define WD_CDB_10    0x0c\n#define WD_CDB_11    0x0d\n#define WD_CDB_12    0x0e\n#define WD_TARGET_LUN      0x0f\n#define WD_COMMAND_PHASE   0x10\n#define WD_SYNCHRONOUS_TRANSFER 0x11\n#define WD_TRANSFER_COUNT_MSB 0x12\n#define WD_TRANSFER_COUNT  0x13\n#define WD_TRANSFER_COUNT_LSB 0x14\n#define WD_DESTINATION_ID  0x15\n#define WD_SOURCE_ID    0x16\n#define WD_SCSI_STATUS     0x17\n#define WD_COMMAND      0x18\n#define WD_DATA      0x19\n#define WD_QUEUE_TAG    0x1a\n#define WD_AUXILIARY_STATUS   0x1f\n\n \n#define WD_CMD_RESET    0x00\n#define WD_CMD_ABORT    0x01\n#define WD_CMD_ASSERT_ATN  0x02\n#define WD_CMD_NEGATE_ACK  0x03\n#define WD_CMD_DISCONNECT  0x04\n#define WD_CMD_RESELECT    0x05\n#define WD_CMD_SEL_ATN     0x06\n#define WD_CMD_SEL      0x07\n#define WD_CMD_SEL_ATN_XFER   0x08\n#define WD_CMD_SEL_XFER    0x09\n#define WD_CMD_RESEL_RECEIVE  0x0a\n#define WD_CMD_RESEL_SEND  0x0b\n#define WD_CMD_WAIT_SEL_RECEIVE 0x0c\n#define WD_CMD_TRANS_ADDR  0x18\n#define WD_CMD_TRANS_INFO  0x20\n#define WD_CMD_TRANSFER_PAD   0x21\n#define WD_CMD_SBT_MODE    0x80\n\n \n#define ASR_INT         (0x80)\n#define ASR_LCI         (0x40)\n#define ASR_BSY         (0x20)\n#define ASR_CIP         (0x10)\n#define ASR_PE          (0x02)\n#define ASR_DBR         (0x01)\n\n \n#define PHS_DATA_OUT    0x00\n#define PHS_DATA_IN     0x01\n#define PHS_COMMAND     0x02\n#define PHS_STATUS      0x03\n#define PHS_MESS_OUT    0x06\n#define PHS_MESS_IN     0x07\n\n \n\n   \n#define CSR_RESET    0x00\n#define CSR_RESET_AF    0x01\n\n   \n#define CSR_RESELECT    0x10\n#define CSR_SELECT      0x11\n#define CSR_SEL_XFER_DONE  0x16\n#define CSR_XFER_DONE      0x18\n\n   \n#define CSR_MSGIN    0x20\n#define CSR_SDP         0x21\n#define CSR_SEL_ABORT      0x22\n#define CSR_RESEL_ABORT    0x25\n#define CSR_RESEL_ABORT_AM 0x27\n#define CSR_ABORT    0x28\n\n   \n#define CSR_INVALID     0x40\n#define CSR_UNEXP_DISC     0x41\n#define CSR_TIMEOUT     0x42\n#define CSR_PARITY      0x43\n#define CSR_PARITY_ATN     0x44\n#define CSR_BAD_STATUS     0x45\n#define CSR_UNEXP    0x48\n\n   \n#define CSR_RESEL    0x80\n#define CSR_RESEL_AM    0x81\n#define CSR_DISC     0x85\n#define CSR_SRV_REQ     0x88\n\n    \n#define OWNID_EAF    0x08\n#define OWNID_EHP    0x10\n#define OWNID_RAF    0x20\n#define OWNID_FS_8   0x00\n#define OWNID_FS_12  0x40\n#define OWNID_FS_16  0x80\n\n    \n#define WD33C93_FS_8_10  OWNID_FS_8\n#define WD33C93_FS_12_15 OWNID_FS_12\n#define WD33C93_FS_16_20 OWNID_FS_16\n\n    \n#define WD33C93_FS_MHZ(mhz) (mhz)\n\n    \n#define CTRL_HSP     0x01\n#define CTRL_HA      0x02\n#define CTRL_IDI     0x04\n#define CTRL_EDI     0x08\n#define CTRL_HHP     0x10\n#define CTRL_POLLED  0x00\n#define CTRL_BURST   0x20\n#define CTRL_BUS     0x40\n#define CTRL_DMA     0x80\n\n    \n#define TIMEOUT_PERIOD_VALUE  20     \n\n    \n#define STR_FSS      0x80\n\n    \n#define DSTID_DPD    0x40\n#define DATA_OUT_DIR 0\n#define DATA_IN_DIR  1\n#define DSTID_SCC    0x80\n\n    \n#define SRCID_MASK   0x07\n#define SRCID_SIV    0x08\n#define SRCID_DSP    0x20\n#define SRCID_ES     0x40\n#define SRCID_ER     0x80\n\n    \ntypedef struct {\n   volatile unsigned char  *SASR;\n   volatile unsigned char  *SCMD;\n} wd33c93_regs;\n\n\ntypedef int (*dma_setup_t) (struct scsi_cmnd *SCpnt, int dir_in);\ntypedef void (*dma_stop_t) (struct Scsi_Host *instance,\n\t\tstruct scsi_cmnd *SCpnt, int status);\n\n\n#define ILLEGAL_STATUS_BYTE   0xff\n\n#define DEFAULT_SX_PER   376      \n#define DEFAULT_SX_OFF   0        \n\n#define OPTIMUM_SX_PER   252      \n#define OPTIMUM_SX_OFF   12       \n\nstruct sx_period {\n   unsigned int   period_ns;\n   uchar          reg_value;\n   };\n\n \n\n#define BUF_CHIP_ALLOCED 0\n#define BUF_SCSI_ALLOCED 1\n\nstruct WD33C93_hostdata {\n    struct Scsi_Host *next;\n    wd33c93_regs     regs;\n    spinlock_t       lock;\n    uchar            clock_freq;\n    uchar            chip;              \n    uchar            microcode;         \n    uchar            dma_buffer_pool;   \n    int              dma_dir;           \n    dma_setup_t      dma_setup;\n    dma_stop_t       dma_stop;\n    unsigned int     dma_xfer_mask;\n    uchar            *dma_bounce_buffer;\n    unsigned int     dma_bounce_len;\n    volatile uchar   busy[8];           \n    volatile struct scsi_cmnd *input_Q;        \n    volatile struct scsi_cmnd *selecting;      \n    volatile struct scsi_cmnd *connected;      \n    volatile struct scsi_cmnd *disconnected_Q; \n    uchar            state;             \n    uchar            dma;               \n    uchar            level2;            \n    uchar            disconnect;        \n    unsigned int     args;              \n    uchar            incoming_msg[8];   \n    int              incoming_ptr;      \n    uchar            outgoing_msg[8];   \n    int              outgoing_len;      \n    unsigned int     default_sx_per;    \n    uchar            sync_xfer[8];      \n    uchar            sync_stat[8];      \n    uchar            no_sync;           \n    uchar            no_dma;            \n    uchar            dma_mode;          \n    uchar            fast;              \n    struct sx_period sx_table[9];       \n#ifdef PROC_INTERFACE\n    uchar            proc;              \n#ifdef PROC_STATISTICS\n    unsigned long    cmd_cnt[8];        \n    unsigned long    int_cnt;           \n    unsigned long    pio_cnt;           \n    unsigned long    dma_cnt;           \n    unsigned long    disc_allowed_cnt[8];  \n    unsigned long    disc_done_cnt[8];  \n#endif\n#endif\n    };\n\nstatic inline struct scsi_pointer *WD33C93_scsi_pointer(struct scsi_cmnd *cmd)\n{\n\treturn scsi_cmd_priv(cmd);\n}\n\n \n\n#define C_WD33C93       0\n#define C_WD33C93A      1\n#define C_WD33C93B      2\n#define C_UNKNOWN_CHIP  100\n\n \n\n#define S_UNCONNECTED         0\n#define S_SELECTING           1\n#define S_RUNNING_LEVEL2      2\n#define S_CONNECTED           3\n#define S_PRE_TMP_DISC        4\n#define S_PRE_CMP_DISC        5\n\n \n\n#define D_DMA_OFF          0\n#define D_DMA_RUNNING      1\n\n \n \n\n#define L2_NONE      1   \n#define L2_SELECT    2   \n#define L2_BASIC     3   \n#define L2_DATA      4   \n#define L2_MOST      5   \n#define L2_RESELECT  6   \n#define L2_ALL       7   \n\n \n\n#define DIS_NEVER    0\n#define DIS_ADAPTIVE 1\n#define DIS_ALWAYS   2\n\n \n\n#define DB_TEST1              1<<0\n#define DB_TEST2              1<<1\n#define DB_QUEUE_COMMAND      1<<2\n#define DB_EXECUTE            1<<3\n#define DB_INTR               1<<4\n#define DB_TRANSFER           1<<5\n#define DB_MASK               0x3f\n\n \n\n#define SS_UNSET     0\n#define SS_FIRST     1\n#define SS_WAITING   2\n#define SS_SET       3\n\n \n\n#define PR_VERSION   1<<0\n#define PR_INFO      1<<1\n#define PR_STATISTICS 1<<2\n#define PR_CONNECTED 1<<3\n#define PR_INPUTQ    1<<4\n#define PR_DISCQ     1<<5\n#define PR_TEST      1<<6\n#define PR_STOP      1<<7\n\n\nvoid wd33c93_init (struct Scsi_Host *instance, const wd33c93_regs regs,\n         dma_setup_t setup, dma_stop_t stop, int clock_freq);\nint wd33c93_abort (struct scsi_cmnd *cmd);\nint wd33c93_queuecommand (struct Scsi_Host *h, struct scsi_cmnd *cmd);\nvoid wd33c93_intr (struct Scsi_Host *instance);\nint wd33c93_show_info(struct seq_file *, struct Scsi_Host *);\nint wd33c93_write_info(struct Scsi_Host *, char *, int);\nint wd33c93_host_reset (struct scsi_cmnd *);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}