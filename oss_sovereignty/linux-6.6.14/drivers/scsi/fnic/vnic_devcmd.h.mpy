{
  "module_name": "vnic_devcmd.h",
  "hash_id": "676f830d02edadb6f67fc346ed11074031a55cf62273d67770a163fc323b1b36",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/fnic/vnic_devcmd.h",
  "human_readable_source": " \n \n#ifndef _VNIC_DEVCMD_H_\n#define _VNIC_DEVCMD_H_\n\n#define _CMD_NBITS      14\n#define _CMD_VTYPEBITS\t10\n#define _CMD_FLAGSBITS  6\n#define _CMD_DIRBITS\t2\n\n#define _CMD_NMASK      ((1 << _CMD_NBITS)-1)\n#define _CMD_VTYPEMASK  ((1 << _CMD_VTYPEBITS)-1)\n#define _CMD_FLAGSMASK  ((1 << _CMD_FLAGSBITS)-1)\n#define _CMD_DIRMASK    ((1 << _CMD_DIRBITS)-1)\n\n#define _CMD_NSHIFT     0\n#define _CMD_VTYPESHIFT (_CMD_NSHIFT+_CMD_NBITS)\n#define _CMD_FLAGSSHIFT (_CMD_VTYPESHIFT+_CMD_VTYPEBITS)\n#define _CMD_DIRSHIFT   (_CMD_FLAGSSHIFT+_CMD_FLAGSBITS)\n\n \n#define _CMD_DIR_NONE   0U\n#define _CMD_DIR_WRITE  1U\n#define _CMD_DIR_READ   2U\n#define _CMD_DIR_RW     (_CMD_DIR_WRITE | _CMD_DIR_READ)\n\n \n#define _CMD_FLAGS_NONE 0U\n#define _CMD_FLAGS_NOWAIT 1U\n\n \n#define _CMD_VTYPE_NONE  0U\n#define _CMD_VTYPE_ENET  1U\n#define _CMD_VTYPE_FC    2U\n#define _CMD_VTYPE_SCSI  4U\n#define _CMD_VTYPE_ALL   (_CMD_VTYPE_ENET | _CMD_VTYPE_FC | _CMD_VTYPE_SCSI)\n\n \n#define _CMDCF(dir, flags, vtype, nr)  \\\n\t(((dir)   << _CMD_DIRSHIFT) | \\\n\t((flags) << _CMD_FLAGSSHIFT) | \\\n\t((vtype) << _CMD_VTYPESHIFT) | \\\n\t((nr)    << _CMD_NSHIFT))\n#define _CMDC(dir, vtype, nr)    _CMDCF(dir, 0, vtype, nr)\n#define _CMDCNW(dir, vtype, nr)  _CMDCF(dir, _CMD_FLAGS_NOWAIT, vtype, nr)\n\n \n#define _CMD_DIR(cmd)            (((cmd) >> _CMD_DIRSHIFT) & _CMD_DIRMASK)\n#define _CMD_FLAGS(cmd)          (((cmd) >> _CMD_FLAGSSHIFT) & _CMD_FLAGSMASK)\n#define _CMD_VTYPE(cmd)          (((cmd) >> _CMD_VTYPESHIFT) & _CMD_VTYPEMASK)\n#define _CMD_N(cmd)              (((cmd) >> _CMD_NSHIFT) & _CMD_NMASK)\n\nenum vnic_devcmd_cmd {\n\tCMD_NONE                = _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_NONE, 0),\n\n\t \n\tCMD_MCPU_FW_INFO        = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 1),\n\n\t \n\tCMD_DEV_SPEC            = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 2),\n\n\t \n\tCMD_STATS_CLEAR         = _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 3),\n\n\t \n\tCMD_STATS_DUMP          = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 4),\n\n\t \n\tCMD_PACKET_FILTER       = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 7),\n\n\t \n\tCMD_HANG_NOTIFY         = _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 8),\n\n\t \n\tCMD_MAC_ADDR            = _CMDC(_CMD_DIR_READ,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 9),\n\n\t \n \n\tCMD_PROMISC_MODE        = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 10),\n\n\t \n \n\tCMD_ALLMULTI_MODE       = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 11),\n\n\t \n\tCMD_ADDR_ADD            = _CMDCNW(_CMD_DIR_WRITE,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 12),\n\n\t \n\tCMD_ADDR_DEL            = _CMDCNW(_CMD_DIR_WRITE,\n\t\t\t\t\t_CMD_VTYPE_ENET | _CMD_VTYPE_FC, 13),\n\n\t \n\tCMD_VLAN_ADD            = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 14),\n\n\t \n\tCMD_VLAN_DEL            = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 15),\n\n\t \n\tCMD_NIC_CFG             = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 16),\n\n\t \n\tCMD_RSS_KEY             = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 17),\n\n\t \n\tCMD_RSS_CPU             = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 18),\n\n\t \n\tCMD_SOFT_RESET          = _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 19),\n\n\t \n\tCMD_SOFT_RESET_STATUS   = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 20),\n\n\t \n\tCMD_NOTIFY              = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 21),\n\n\t \n\tCMD_UNDI                = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 22),\n\n\t \n\tCMD_OPEN\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 23),\n\n\t \n\tCMD_OPEN_STATUS\t\t= _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 24),\n\n\t \n\tCMD_CLOSE\t\t= _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 25),\n\n\t \n\tCMD_INIT\t\t= _CMDCNW(_CMD_DIR_READ, _CMD_VTYPE_ALL, 26),\n\n\t \n\tCMD_INIT_PROV_INFO\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 27),\n\n\t \n\tCMD_ENABLE\t\t= _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 28),\n\n\t \n\tCMD_DISABLE\t\t= _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 29),\n\n\t \n\tCMD_STATS_DUMP_ALL\t= _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 30),\n\n\t \n\tCMD_INIT_STATUS\t\t= _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 31),\n\n\t \n\tCMD_INT13               = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_FC, 32),\n\n\t \n\tCMD_LOGICAL_UPLINK      = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 33),\n\n\t \n\tCMD_DEINIT\t\t= _CMDCNW(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 34),\n\n\t \n\tCMD_CAPABILITY      = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 36),\n\n\t \n\tCMD_PERBI       = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_FC, 37),\n\n\t \n\tCMD_IAR         = _CMDCNW(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 38),\n\n\t \n\tCMD_HANG_RESET      = _CMDC(_CMD_DIR_NONE, _CMD_VTYPE_ALL, 39),\n\n\t \n\tCMD_HANG_RESET_STATUS   = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 40),\n\n\t \n\tCMD_IG_VLAN_REWRITE_MODE = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ENET, 41),\n\n\t \n\tCMD_PROXY_BY_BDF =  _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 42),\n\n\t \n\tCMD_PROXY_BY_INDEX =    _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 43),\n\n\t \n\tCMD_CONFIG_INFO_GET = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 44),\n\n\t \n\tCMD_INT13_ALL = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 45),\n\n\t \n\tCMD_SET_DEFAULT_VLAN = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 46),\n\n\t \n\tCMD_INIT_PROV_INFO2  = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 47),\n\n\t \n\tCMD_ENABLE2 = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 48),\n\n\t \n\tCMD_STATUS = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 49),\n\n\t \n\tCMD_INTR_COAL_CONVERT = _CMDC(_CMD_DIR_READ, _CMD_VTYPE_ALL, 50),\n\n\t \n\tCMD_ISCSI_DUMP_REQ = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 51),\n\n\t \n\tCMD_ISCSI_DUMP_STATUS = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 52),\n\n\t \n\tCMD_MIGRATE_SUBVNIC = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 53),\n\n\t \n\tCMD_SUBVNIC_NOTIFY = _CMDC(_CMD_DIR_RW, _CMD_VTYPE_ALL, 54),\n\n\t \n\tCMD_SET_MAC_ADDR = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 55),\n\n\t \n\tCMD_PROV_INFO_UPDATE = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ENET, 56),\n\n\t \n\tCMD_INITIALIZE_DEVCMD2 = _CMDC(_CMD_DIR_WRITE, _CMD_VTYPE_ALL, 57)\n};\n\n \n#define CMD_OPENF_OPROM\t\t0x1\t \n\n#define CMD_OPENF_RQ_ENABLE_THEN_POST   0x2\n\n \n#define CMD_INITF_DEFAULT_MAC\t0x1\t \n\n \n#define CMD_PFILTER_DIRECTED\t\t0x01\n#define CMD_PFILTER_MULTICAST\t\t0x02\n#define CMD_PFILTER_BROADCAST\t\t0x04\n#define CMD_PFILTER_PROMISCUOUS\t\t0x08\n#define CMD_PFILTER_ALL_MULTICAST\t0x10\n\nenum vnic_devcmd_status {\n\tSTAT_NONE = 0,\n\tSTAT_BUSY = 1 << 0,\t \n\tSTAT_ERROR = 1 << 1,\t \n};\n\nenum vnic_devcmd_error {\n\tERR_SUCCESS = 0,\n\tERR_EINVAL = 1,\n\tERR_EFAULT = 2,\n\tERR_EPERM = 3,\n\tERR_EBUSY = 4,\n\tERR_ECMDUNKNOWN = 5,\n\tERR_EBADSTATE = 6,\n\tERR_ENOMEM = 7,\n\tERR_ETIMEDOUT = 8,\n\tERR_ELINKDOWN = 9,\n};\n\nstruct vnic_devcmd_fw_info {\n\tchar fw_version[32];\n\tchar fw_build[32];\n\tchar hw_version[32];\n\tchar hw_serial_number[32];\n};\n\nstruct vnic_devcmd_notify {\n\tu32 csum;\t\t \n\n\tu32 link_state;\t\t \n\tu32 port_speed;\t\t \n\tu32 mtu;\t\t \n\tu32 msglvl;\t\t \n\tu32 uif;\t\t \n\tu32 status;\t\t \n\tu32 error;\t\t \n\tu32 link_down_cnt;\t \n};\n#define VNIC_STF_FATAL_ERR\t0x0001\t \n\nstruct vnic_devcmd_provinfo {\n\tu8 oui[3];\n\tu8 type;\n\tu8 data[];\n};\n\n \n\n \n#define VNIC_DEVCMD_NARGS 15\nstruct vnic_devcmd {\n\tu32 status;\t\t\t \n\tu32 cmd;\t\t\t \n\tu64 args[VNIC_DEVCMD_NARGS];\t \n};\n\n \n\n \n\n#define DEVCMD2_FNORESULT\t0x1  \n\n#define VNIC_DEVCMD2_NARGS\t\t\tVNIC_DEVCMD_NARGS\n\nstruct vnic_devcmd2 {\n\tu16 pad;\n\tu16 flags;\n\tu32 cmd;                 \n\tu64 args[VNIC_DEVCMD2_NARGS];\n};\n\n#define VNIC_DEVCMD2_NRESULTS\t\t\tVNIC_DEVCMD_NARGS\nstruct devcmd2_result {\n\tu64 results[VNIC_DEVCMD2_NRESULTS];\n\tu32 pad;\n\tu16 completed_index;     \n\tu8  error;               \n\tu8  color;               \n};\n\n#define DEVCMD2_RING_SIZE\t\t\t32\n#define DEVCMD2_DESC_SIZE\t\t\t128\n\n#define DEVCMD2_RESULTS_SIZE_MAX\t\t((1 << 16) - 1)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}