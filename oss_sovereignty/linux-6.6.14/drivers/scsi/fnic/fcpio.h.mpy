{
  "module_name": "fcpio.h",
  "hash_id": "265ccd2b0beabdde81a741b5553f5ab9e7f8c2dd308bda164424833ef08f6db9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/fnic/fcpio.h",
  "human_readable_source": " \n \n#ifndef _FCPIO_H_\n#define _FCPIO_H_\n\n#include <linux/if_ether.h>\n\n \n\n \n#define FCPIO_HOST_EXCH_RANGE_START         0x1000\n#define FCPIO_HOST_EXCH_RANGE_END           0x1fff\n#define FCPIO_HOST_SEQ_ID_RANGE_START       0x80\n#define FCPIO_HOST_SEQ_ID_RANGE_END         0xff\n\n \nenum fcpio_type {\n\t \n\tFCPIO_ICMND_16 = 0x1,\n\tFCPIO_ICMND_32,\n\tFCPIO_ICMND_CMPL,\n\tFCPIO_ITMF,\n\tFCPIO_ITMF_CMPL,\n\n\t \n\tFCPIO_TCMND_16 = 0x11,\n\tFCPIO_TCMND_32,\n\tFCPIO_TDATA,\n\tFCPIO_TXRDY,\n\tFCPIO_TRSP,\n\tFCPIO_TDRSP_CMPL,\n\tFCPIO_TTMF,\n\tFCPIO_TTMF_ACK,\n\tFCPIO_TABORT,\n\tFCPIO_TABORT_CMPL,\n\n\t \n\tFCPIO_ACK = 0x20,\n\tFCPIO_RESET,\n\tFCPIO_RESET_CMPL,\n\tFCPIO_FLOGI_REG,\n\tFCPIO_FLOGI_REG_CMPL,\n\tFCPIO_ECHO,\n\tFCPIO_ECHO_CMPL,\n\tFCPIO_LUNMAP_CHNG,\n\tFCPIO_LUNMAP_REQ,\n\tFCPIO_LUNMAP_REQ_CMPL,\n\tFCPIO_FLOGI_FIP_REG,\n\tFCPIO_FLOGI_FIP_REG_CMPL,\n};\n\n \nenum fcpio_status {\n\tFCPIO_SUCCESS = 0,               \n\n\t \n\tFCPIO_INVALID_HEADER,     \n\tFCPIO_OUT_OF_RESOURCE,    \n\tFCPIO_INVALID_PARAM,      \n\tFCPIO_REQ_NOT_SUPPORTED,  \n\tFCPIO_IO_NOT_FOUND,       \n\n\t \n\tFCPIO_ABORTED = 0x41,      \n\tFCPIO_TIMEOUT,             \n\tFCPIO_SGL_INVALID,         \n\tFCPIO_MSS_INVALID,         \n\tFCPIO_DATA_CNT_MISMATCH,   \n\tFCPIO_FW_ERR,              \n\tFCPIO_ITMF_REJECTED,       \n\tFCPIO_ITMF_FAILED,         \n\tFCPIO_ITMF_INCORRECT_LUN,  \n\tFCPIO_CMND_REJECTED,       \n\tFCPIO_NO_PATH_AVAIL,       \n\tFCPIO_PATH_FAILED,         \n\tFCPIO_LUNMAP_CHNG_PEND,    \n};\n\n \nstruct fcpio_tag {\n\tunion {\n\t\tu32 req_id;\n\t\tstruct {\n\t\t\tu16 rx_id;\n\t\t\tu16 ox_id;\n\t\t} ex_id;\n\t} u;\n};\n\nstatic inline void\nfcpio_tag_id_enc(struct fcpio_tag *tag, u32 id)\n{\n\ttag->u.req_id = id;\n}\n\nstatic inline void\nfcpio_tag_id_dec(struct fcpio_tag *tag, u32 *id)\n{\n\t*id = tag->u.req_id;\n}\n\nstatic inline void\nfcpio_tag_exid_enc(struct fcpio_tag *tag, u16 ox_id, u16 rx_id)\n{\n\ttag->u.ex_id.rx_id = rx_id;\n\ttag->u.ex_id.ox_id = ox_id;\n}\n\nstatic inline void\nfcpio_tag_exid_dec(struct fcpio_tag *tag, u16 *ox_id, u16 *rx_id)\n{\n\t*rx_id = tag->u.ex_id.rx_id;\n\t*ox_id = tag->u.ex_id.ox_id;\n}\n\n \nstruct fcpio_header {\n\tu8            type;            \n\tu8            status;          \n\tu16           _resvd;          \n\tstruct fcpio_tag    tag;       \n};\n\nstatic inline void\nfcpio_header_enc(struct fcpio_header *hdr,\n\t\t u8 type, u8 status,\n\t\t struct fcpio_tag tag)\n{\n\thdr->type = type;\n\thdr->status = status;\n\thdr->_resvd = 0;\n\thdr->tag = tag;\n}\n\nstatic inline void\nfcpio_header_dec(struct fcpio_header *hdr,\n\t\t u8 *type, u8 *status,\n\t\t struct fcpio_tag *tag)\n{\n\t*type = hdr->type;\n\t*status = hdr->status;\n\t*tag = hdr->tag;\n}\n\n#define CDB_16      16\n#define CDB_32      32\n#define LUN_ADDRESS 8\n\n \nstruct fcpio_icmnd_16 {\n\tu32\t  lunmap_id;\t\t \n\tu8\t  special_req_flags;\t \n\tu8\t  _resvd0[3];\t         \n\tu32\t  sgl_cnt;\t\t \n\tu32\t  sense_len;\t\t \n\tu64\t  sgl_addr;\t\t \n\tu64\t  sense_addr;\t\t \n\tu8\t  crn;\t\t\t \n\tu8\t  pri_ta;\t\t \n\tu8\t  _resvd1;\t\t \n\tu8\t  flags;\t\t \n\tu8\t  scsi_cdb[CDB_16];\t \n\tu32\t  data_len;\t\t \n\tu8\t  lun[LUN_ADDRESS];\t \n\tu8\t  _resvd2;\t\t \n\tu8\t  d_id[3];\t\t \n\tu16\t  mss;\t\t\t \n\tu16\t  _resvd3;\t\t \n\tu32\t  r_a_tov;\t\t \n\tu32\t  e_d_tov;\t         \n};\n\n \n#define FCPIO_ICMND_SRFLAG_RETRY 0x01    \n\n \n#define FCPIO_ICMND_PTA_SIMPLE      0    \n#define FCPIO_ICMND_PTA_HEADQ       1    \n#define FCPIO_ICMND_PTA_ORDERED     2    \n#define FCPIO_ICMND_PTA_ACA         4    \n#define FCPIO_ICMND_PRI_SHIFT       3    \n\n \n#define FCPIO_ICMND_RDDATA      0x02     \n#define FCPIO_ICMND_WRDATA      0x01     \n\n \nstruct fcpio_icmnd_32 {\n\tu32   lunmap_id;               \n\tu8    special_req_flags;       \n\tu8    _resvd0[3];              \n\tu32   sgl_cnt;                 \n\tu32   sense_len;               \n\tu64   sgl_addr;                \n\tu64   sense_addr;              \n\tu8    crn;                     \n\tu8    pri_ta;                  \n\tu8    _resvd1;                 \n\tu8    flags;                   \n\tu8    scsi_cdb[CDB_32];        \n\tu32   data_len;                \n\tu8    lun[LUN_ADDRESS];        \n\tu8    _resvd2;                 \n\tu8    d_id[3];\t\t       \n\tu16   mss;                     \n\tu16   _resvd3;                 \n\tu32   r_a_tov;                 \n\tu32   e_d_tov;                 \n};\n\n \nstruct fcpio_itmf {\n\tu32   lunmap_id;               \n\tu32   tm_req;                  \n\tu32   t_tag;                   \n\tu32   _resvd;                  \n\tu8    lun[LUN_ADDRESS];        \n\tu8    _resvd1;                 \n\tu8    d_id[3];\t\t       \n\tu32   r_a_tov;                 \n\tu32   e_d_tov;                 \n};\n\n \nenum fcpio_itmf_tm_req_type {\n\tFCPIO_ITMF_ABT_TASK_TERM = 0x01,     \n\tFCPIO_ITMF_ABT_TASK,                 \n\tFCPIO_ITMF_ABT_TASK_SET,             \n\tFCPIO_ITMF_CLR_TASK_SET,             \n\tFCPIO_ITMF_LUN_RESET,                \n\tFCPIO_ITMF_CLR_ACA,                  \n};\n\n \nstruct fcpio_tdata {\n\tu16   rx_id;                   \n\tu16   flags;                   \n\tu32   rel_offset;              \n\tu32   sgl_cnt;                 \n\tu32   data_len;                \n\tu64   sgl_addr;                \n};\n\n \n#define FCPIO_TDATA_SCSI_RSP    0x01     \n\n \nstruct fcpio_txrdy {\n\tu16   rx_id;                   \n\tu16   _resvd0;                 \n\tu32   rel_offset;              \n\tu32   sgl_cnt;                 \n\tu32   data_len;                \n\tu64   sgl_addr;                \n};\n\n \nstruct fcpio_trsp {\n\tu16   rx_id;                   \n\tu16   _resvd0;                 \n\tu32   sense_len;               \n\tu64   sense_addr;              \n\tu16   _resvd1;                 \n\tu8    flags;                   \n\tu8    scsi_status;             \n\tu32   residual;                \n};\n\n \n#define FCPIO_TRSP_RESID_UNDER  0x08    \n#define FCPIO_TRSP_RESID_OVER   0x04    \n\n \nstruct fcpio_ttmf_ack {\n\tu16   rx_id;                   \n\tu16   _resvd0;                 \n\tu32   tmf_status;              \n};\n\n \nstruct fcpio_tabort {\n\tu16   rx_id;                   \n};\n\n \nstruct fcpio_reset {\n\tu32   _resvd;\n};\n\nenum fcpio_flogi_reg_format_type {\n\tFCPIO_FLOGI_REG_DEF_DEST = 0,     \n\tFCPIO_FLOGI_REG_GW_DEST,          \n};\n\n \nstruct fcpio_flogi_reg {\n\tu8 format;\n\tu8 s_id[3];\t\t\t \n\tu8 gateway_mac[ETH_ALEN];\t \n\tu16 _resvd;\n\tu32 r_a_tov;\t\t\t \n\tu32 e_d_tov;\t\t\t \n};\n\n \nstruct fcpio_echo {\n\tu32 _resvd;\n};\n\n \nstruct fcpio_lunmap_req {\n\tu64 addr;                      \n\tu32 len;                       \n};\n\n \nstruct fcpio_flogi_fip_reg {\n\tu8    _resvd0;\n\tu8     s_id[3];                \n\tu8     fcf_mac[ETH_ALEN];      \n\tu16   _resvd1;\n\tu32   r_a_tov;                 \n\tu32   e_d_tov;                 \n\tu8    ha_mac[ETH_ALEN];        \n\tu16   _resvd2;\n};\n\n \n#define FCPIO_HOST_REQ_LEN      128      \n\nstruct fcpio_host_req {\n\tstruct fcpio_header hdr;\n\n\tunion {\n\t\t \n\t\tu8 buf[FCPIO_HOST_REQ_LEN - sizeof(struct fcpio_header)];\n\n\t\t \n\t\tstruct fcpio_icmnd_16               icmnd_16;\n\t\tstruct fcpio_icmnd_32               icmnd_32;\n\t\tstruct fcpio_itmf                   itmf;\n\n\t\t \n\t\tstruct fcpio_tdata                  tdata;\n\t\tstruct fcpio_txrdy                  txrdy;\n\t\tstruct fcpio_trsp                   trsp;\n\t\tstruct fcpio_ttmf_ack               ttmf_ack;\n\t\tstruct fcpio_tabort                 tabort;\n\n\t\t \n\t\tstruct fcpio_reset                  reset;\n\t\tstruct fcpio_flogi_reg              flogi_reg;\n\t\tstruct fcpio_echo                   echo;\n\t\tstruct fcpio_lunmap_req             lunmap_req;\n\t\tstruct fcpio_flogi_fip_reg          flogi_fip_reg;\n\t} u;\n};\n\n \nstruct fcpio_icmnd_cmpl {\n\tu8    _resvd0[6];              \n\tu8    flags;                   \n\tu8    scsi_status;             \n\tu32   residual;                \n\tu32   sense_len;               \n};\n\n \n#define FCPIO_ICMND_CMPL_RESID_UNDER    0x08     \n#define FCPIO_ICMND_CMPL_RESID_OVER     0x04     \n\n \nstruct fcpio_itmf_cmpl {\n\tu32    _resvd;                 \n};\n\n \nstruct fcpio_tcmnd_16 {\n\tu8    lun[LUN_ADDRESS];        \n\tu8    crn;                     \n\tu8    pri_ta;                  \n\tu8    _resvd2;                 \n\tu8    flags;                   \n\tu8    scsi_cdb[CDB_16];        \n\tu32   data_len;                \n\tu8    _resvd1;                 \n\tu8    s_id[3];\t\t       \n};\n\n \n#define FCPIO_TCMND_PTA_SIMPLE      0    \n#define FCPIO_TCMND_PTA_HEADQ       1    \n#define FCPIO_TCMND_PTA_ORDERED     2    \n#define FCPIO_TCMND_PTA_ACA         4    \n#define FCPIO_TCMND_PRI_SHIFT       3    \n\n \n#define FCPIO_TCMND_RDDATA      0x02     \n#define FCPIO_TCMND_WRDATA      0x01     \n\n \nstruct fcpio_tcmnd_32 {\n\tu8    lun[LUN_ADDRESS];        \n\tu8    crn;                     \n\tu8    pri_ta;                  \n\tu8    _resvd2;                 \n\tu8    flags;                   \n\tu8    scsi_cdb[CDB_32];        \n\tu32   data_len;                \n\tu8    _resvd0;                 \n\tu8    s_id[3];\t\t       \n};\n\n \nstruct fcpio_tdrsp_cmpl {\n\tu16   rx_id;                   \n\tu16   _resvd0;                 \n};\n\n \nstruct fcpio_ttmf {\n\tu8    _resvd0;                 \n\tu8    s_id[3];\t\t       \n\tu8    lun[LUN_ADDRESS];        \n\tu8    crn;                     \n\tu8    _resvd2[3];              \n\tu32   tmf_type;                \n};\n\n \n#define FCPIO_TTMF_CLR_ACA      0x40     \n#define FCPIO_TTMF_LUN_RESET    0x10     \n#define FCPIO_TTMF_CLR_TASK_SET 0x04     \n#define FCPIO_TTMF_ABT_TASK_SET 0x02     \n#define FCPIO_TTMF_ABT_TASK     0x01     \n\n \nstruct fcpio_tabort_cmpl {\n\tu16   rx_id;                   \n\tu16   _resvd0;                 \n};\n\n \nstruct fcpio_ack {\n\tu16  request_out;              \n\tu16  _resvd;\n};\n\n \nstruct fcpio_reset_cmpl {\n\tu16   vnic_id;\n};\n\n \nstruct fcpio_flogi_reg_cmpl {\n\tu32 _resvd;\n};\n\n \nstruct fcpio_echo_cmpl {\n\tu32 _resvd;\n};\n\n \nstruct fcpio_lunmap_chng {\n\tu32 _resvd;\n};\n\n \nstruct fcpio_lunmap_req_cmpl {\n\tu32 _resvd;\n};\n\n \n#define FCPIO_FW_REQ_LEN        64       \nstruct fcpio_fw_req {\n\tstruct fcpio_header hdr;\n\n\tunion {\n\t\t \n\t\tu8 buf[FCPIO_FW_REQ_LEN - sizeof(struct fcpio_header)];\n\n\t\t \n\t\tstruct fcpio_icmnd_cmpl         icmnd_cmpl;\n\t\tstruct fcpio_itmf_cmpl          itmf_cmpl;\n\n\t\t \n\t\tstruct fcpio_tcmnd_16           tcmnd_16;\n\t\tstruct fcpio_tcmnd_32           tcmnd_32;\n\n\t\t \n\t\tstruct fcpio_tdrsp_cmpl         tdrsp_cmpl;\n\t\tstruct fcpio_ttmf               ttmf;\n\t\tstruct fcpio_tabort_cmpl        tabort_cmpl;\n\n\t\t \n\t\tstruct fcpio_ack                ack;\n\n\t\t \n\t\tstruct fcpio_reset_cmpl         reset_cmpl;\n\t\tstruct fcpio_flogi_reg_cmpl     flogi_reg_cmpl;\n\t\tstruct fcpio_echo_cmpl          echo_cmpl;\n\t\tstruct fcpio_lunmap_chng        lunmap_chng;\n\t\tstruct fcpio_lunmap_req_cmpl    lunmap_req_cmpl;\n\t} u;\n};\n\n \nstatic inline void fcpio_color_enc(struct fcpio_fw_req *fw_req, u8 color)\n{\n\tu8 *c = ((u8 *) fw_req) + sizeof(struct fcpio_fw_req) - 1;\n\n\tif (color)\n\t\t*c |= 0x80;\n\telse\n\t\t*c &= ~0x80;\n}\n\nstatic inline void fcpio_color_dec(struct fcpio_fw_req *fw_req, u8 *color)\n{\n\tu8 *c = ((u8 *) fw_req) + sizeof(struct fcpio_fw_req) - 1;\n\n\t*color = *c >> 7;\n\n\t \n\n\trmb();\n\n}\n\n \n#define FCPIO_LUNMAP_TABLE_SIZE     256\n#define FCPIO_FLAGS_LUNMAP_VALID    0x80\n#define FCPIO_FLAGS_BOOT            0x01\nstruct fcpio_lunmap_entry {\n\tu8    bus;\n\tu8    target;\n\tu8    lun;\n\tu8    path_cnt;\n\tu16   flags;\n\tu16   update_cnt;\n};\n\nstruct fcpio_lunmap_tbl {\n\tu32                   update_cnt;\n\tstruct fcpio_lunmap_entry   lunmaps[FCPIO_LUNMAP_TABLE_SIZE];\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}