{
  "module_name": "cq_exch_desc.h",
  "hash_id": "fe6914d24931af5435dec4b7c44e4b8bb1e94ade09422aac7aea0cee83760240",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/fnic/cq_exch_desc.h",
  "human_readable_source": " \n \n#ifndef _CQ_EXCH_DESC_H_\n#define _CQ_EXCH_DESC_H_\n\n#include \"cq_desc.h\"\n\n \nstruct cq_exch_wq_desc {\n\tu16 completed_index;\n\tu16 q_number;\n\tu16 exchange_id;\n\tu8  tmpl;\n\tu8  reserved0;\n\tu32 reserved1;\n\tu8  exch_status;\n\tu8  reserved2[2];\n\tu8  type_color;\n};\n\n#define CQ_EXCH_WQ_STATUS_BITS      2\n#define CQ_EXCH_WQ_STATUS_MASK      ((1 << CQ_EXCH_WQ_STATUS_BITS) - 1)\n\nenum cq_exch_status_types {\n\tCQ_EXCH_WQ_STATUS_TYPE_COMPLETE = 0,\n\tCQ_EXCH_WQ_STATUS_TYPE_ABORT = 1,\n\tCQ_EXCH_WQ_STATUS_TYPE_SGL_EOF = 2,\n\tCQ_EXCH_WQ_STATUS_TYPE_TMPL_ERR = 3,\n};\n\nstatic inline void cq_exch_wq_desc_dec(struct cq_exch_wq_desc *desc_ptr,\n\t\t\t\t       u8  *type,\n\t\t\t\t       u8  *color,\n\t\t\t\t       u16 *q_number,\n\t\t\t\t       u16 *completed_index,\n\t\t\t\t       u8  *exch_status)\n{\n\tcq_desc_dec((struct cq_desc *)desc_ptr, type,\n\t\t    color, q_number, completed_index);\n\t*exch_status = desc_ptr->exch_status & CQ_EXCH_WQ_STATUS_MASK;\n}\n\nstruct cq_fcp_rq_desc {\n\tu16 completed_index_eop_sop_prt;\n\tu16 q_number;\n\tu16 exchange_id;\n\tu16 tmpl;\n\tu16 bytes_written;\n\tu16 vlan;\n\tu8  sof;\n\tu8  eof;\n\tu8  fcs_fer_fck;\n\tu8  type_color;\n};\n\n#define CQ_FCP_RQ_DESC_FLAGS_SOP\t\t(1 << 15)\n#define CQ_FCP_RQ_DESC_FLAGS_EOP\t\t(1 << 14)\n#define CQ_FCP_RQ_DESC_FLAGS_PRT\t\t(1 << 12)\n#define CQ_FCP_RQ_DESC_TMPL_MASK\t\t0x1f\n#define CQ_FCP_RQ_DESC_BYTES_WRITTEN_MASK\t0x3fff\n#define CQ_FCP_RQ_DESC_PACKET_ERR_SHIFT\t\t14\n#define CQ_FCP_RQ_DESC_PACKET_ERR_MASK (1 << CQ_FCP_RQ_DESC_PACKET_ERR_SHIFT)\n#define CQ_FCP_RQ_DESC_VS_STRIPPED_SHIFT\t15\n#define CQ_FCP_RQ_DESC_VS_STRIPPED_MASK (1 << CQ_FCP_RQ_DESC_VS_STRIPPED_SHIFT)\n#define CQ_FCP_RQ_DESC_FC_CRC_OK_MASK\t\t0x1\n#define CQ_FCP_RQ_DESC_FCOE_ERR_SHIFT\t\t1\n#define CQ_FCP_RQ_DESC_FCOE_ERR_MASK (1 << CQ_FCP_RQ_DESC_FCOE_ERR_SHIFT)\n#define CQ_FCP_RQ_DESC_FCS_OK_SHIFT\t\t7\n#define CQ_FCP_RQ_DESC_FCS_OK_MASK (1 << CQ_FCP_RQ_DESC_FCS_OK_SHIFT)\n\nstatic inline void cq_fcp_rq_desc_dec(struct cq_fcp_rq_desc *desc_ptr,\n\t\t\t\t      u8  *type,\n\t\t\t\t      u8  *color,\n\t\t\t\t      u16 *q_number,\n\t\t\t\t      u16 *completed_index,\n\t\t\t\t      u8  *eop,\n\t\t\t\t      u8  *sop,\n\t\t\t\t      u8  *fck,\n\t\t\t\t      u16 *exchange_id,\n\t\t\t\t      u16 *tmpl,\n\t\t\t\t      u32 *bytes_written,\n\t\t\t\t      u8  *sof,\n\t\t\t\t      u8  *eof,\n\t\t\t\t      u8  *ingress_port,\n\t\t\t\t      u8  *packet_err,\n\t\t\t\t      u8  *fcoe_err,\n\t\t\t\t      u8  *fcs_ok,\n\t\t\t\t      u8  *vlan_stripped,\n\t\t\t\t      u16 *vlan)\n{\n\tcq_desc_dec((struct cq_desc *)desc_ptr, type,\n\t\t    color, q_number, completed_index);\n\t*eop = (desc_ptr->completed_index_eop_sop_prt &\n\t\tCQ_FCP_RQ_DESC_FLAGS_EOP) ? 1 : 0;\n\t*sop = (desc_ptr->completed_index_eop_sop_prt &\n\t\tCQ_FCP_RQ_DESC_FLAGS_SOP) ? 1 : 0;\n\t*ingress_port =\n\t\t(desc_ptr->completed_index_eop_sop_prt &\n\t\t CQ_FCP_RQ_DESC_FLAGS_PRT) ? 1 : 0;\n\t*exchange_id = desc_ptr->exchange_id;\n\t*tmpl = desc_ptr->tmpl & CQ_FCP_RQ_DESC_TMPL_MASK;\n\t*bytes_written =\n\t\tdesc_ptr->bytes_written & CQ_FCP_RQ_DESC_BYTES_WRITTEN_MASK;\n\t*packet_err =\n\t\t(desc_ptr->bytes_written & CQ_FCP_RQ_DESC_PACKET_ERR_MASK) >>\n\t\tCQ_FCP_RQ_DESC_PACKET_ERR_SHIFT;\n\t*vlan_stripped =\n\t\t(desc_ptr->bytes_written & CQ_FCP_RQ_DESC_VS_STRIPPED_MASK) >>\n\t\tCQ_FCP_RQ_DESC_VS_STRIPPED_SHIFT;\n\t*vlan = desc_ptr->vlan;\n\t*sof = desc_ptr->sof;\n\t*fck = desc_ptr->fcs_fer_fck & CQ_FCP_RQ_DESC_FC_CRC_OK_MASK;\n\t*fcoe_err = (desc_ptr->fcs_fer_fck & CQ_FCP_RQ_DESC_FCOE_ERR_MASK) >>\n\t\tCQ_FCP_RQ_DESC_FCOE_ERR_SHIFT;\n\t*eof = desc_ptr->eof;\n\t*fcs_ok =\n\t\t(desc_ptr->fcs_fer_fck & CQ_FCP_RQ_DESC_FCS_OK_MASK) >>\n\t\tCQ_FCP_RQ_DESC_FCS_OK_SHIFT;\n}\n\nstruct cq_sgl_desc {\n\tu16 exchange_id;\n\tu16 q_number;\n\tu32 active_burst_offset;\n\tu32 tot_data_bytes;\n\tu16 tmpl;\n\tu8  sgl_err;\n\tu8  type_color;\n};\n\nenum cq_sgl_err_types {\n\tCQ_SGL_ERR_NO_ERROR = 0,\n\tCQ_SGL_ERR_OVERFLOW,          \n\tCQ_SGL_ERR_SGL_LCL_ADDR_ERR,  \n\tCQ_SGL_ERR_ADDR_RSP_ERR,      \n\tCQ_SGL_ERR_DATA_RSP_ERR,      \n\tCQ_SGL_ERR_CNT_ZERO_ERR,      \n\tCQ_SGL_ERR_CNT_MAX_ERR,       \n\tCQ_SGL_ERR_ORDER_ERR,         \n\tCQ_SGL_ERR_DATA_LCL_ADDR_ERR, \n\tCQ_SGL_ERR_HOST_CQ_ERR,       \n};\n\n#define CQ_SGL_SGL_ERR_MASK             0x1f\n#define CQ_SGL_TMPL_MASK                0x1f\n\nstatic inline void cq_sgl_desc_dec(struct cq_sgl_desc *desc_ptr,\n\t\t\t\t   u8  *type,\n\t\t\t\t   u8  *color,\n\t\t\t\t   u16 *q_number,\n\t\t\t\t   u16 *exchange_id,\n\t\t\t\t   u32 *active_burst_offset,\n\t\t\t\t   u32 *tot_data_bytes,\n\t\t\t\t   u16 *tmpl,\n\t\t\t\t   u8  *sgl_err)\n{\n\t \n\tcq_desc_dec((struct cq_desc *)desc_ptr, type, color, q_number,\n\t\t    exchange_id);\n\t*active_burst_offset = desc_ptr->active_burst_offset;\n\t*tot_data_bytes = desc_ptr->tot_data_bytes;\n\t*tmpl = desc_ptr->tmpl & CQ_SGL_TMPL_MASK;\n\t*sgl_err = desc_ptr->sgl_err & CQ_SGL_SGL_ERR_MASK;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}