{
  "module_name": "myrb.h",
  "hash_id": "8977e0b2549aaa222d666466c69d87dc182d3e070a107b72182bd2c1f9d546b5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/myrb.h",
  "human_readable_source": " \n \n\n#ifndef MYRB_H\n#define MYRB_H\n\n#define MYRB_MAX_LDEVS\t\t\t32\n#define MYRB_MAX_CHANNELS\t\t3\n#define MYRB_MAX_TARGETS\t\t16\n#define MYRB_MAX_PHYSICAL_DEVICES\t45\n#define MYRB_SCATTER_GATHER_LIMIT\t32\n#define MYRB_CMD_MBOX_COUNT\t\t256\n#define MYRB_STAT_MBOX_COUNT\t\t1024\n\n#define MYRB_BLKSIZE_BITS\t\t9\n#define MYRB_MAILBOX_TIMEOUT\t\t1000000\n\n#define MYRB_DCMD_TAG\t\t\t1\n#define MYRB_MCMD_TAG\t\t\t2\n\n#define MYRB_PRIMARY_MONITOR_INTERVAL (10 * HZ)\n#define MYRB_SECONDARY_MONITOR_INTERVAL (60 * HZ)\n\n \nenum myrb_cmd_opcode {\n\t \n\tMYRB_CMD_READ_EXTENDED =\t0x33,\n\tMYRB_CMD_WRITE_EXTENDED =\t0x34,\n\tMYRB_CMD_READAHEAD_EXTENDED =\t0x35,\n\tMYRB_CMD_READ_EXTENDED_SG =\t0xB3,\n\tMYRB_CMD_WRITE_EXTENDED_SG =\t0xB4,\n\tMYRB_CMD_READ =\t\t\t0x36,\n\tMYRB_CMD_READ_SG =\t\t0xB6,\n\tMYRB_CMD_WRITE =\t\t0x37,\n\tMYRB_CMD_WRITE_SG =\t\t0xB7,\n\tMYRB_CMD_DCDB =\t\t\t0x04,\n\tMYRB_CMD_DCDB_SG =\t\t0x84,\n\tMYRB_CMD_FLUSH =\t\t0x0A,\n\t \n\tMYRB_CMD_ENQUIRY =\t\t0x53,\n\tMYRB_CMD_ENQUIRY2 =\t\t0x1C,\n\tMYRB_CMD_GET_LDRV_ELEMENT =\t0x55,\n\tMYRB_CMD_GET_LDEV_INFO =\t0x19,\n\tMYRB_CMD_IOPORTREAD =\t\t0x39,\n\tMYRB_CMD_IOPORTWRITE =\t\t0x3A,\n\tMYRB_CMD_GET_SD_STATS =\t\t0x3E,\n\tMYRB_CMD_GET_PD_STATS =\t\t0x3F,\n\tMYRB_CMD_EVENT_LOG_OPERATION =\t0x72,\n\t \n\tMYRB_CMD_START_DEVICE =\t\t0x10,\n\tMYRB_CMD_GET_DEVICE_STATE =\t0x50,\n\tMYRB_CMD_STOP_CHANNEL =\t\t0x13,\n\tMYRB_CMD_START_CHANNEL =\t0x12,\n\tMYRB_CMD_RESET_CHANNEL =\t0x1A,\n\t \n\tMYRB_CMD_REBUILD =\t\t0x09,\n\tMYRB_CMD_REBUILD_ASYNC =\t0x16,\n\tMYRB_CMD_CHECK_CONSISTENCY =\t0x0F,\n\tMYRB_CMD_CHECK_CONSISTENCY_ASYNC = 0x1E,\n\tMYRB_CMD_REBUILD_STAT =\t\t0x0C,\n\tMYRB_CMD_GET_REBUILD_PROGRESS =\t0x27,\n\tMYRB_CMD_REBUILD_CONTROL =\t0x1F,\n\tMYRB_CMD_READ_BADBLOCK_TABLE =\t0x0B,\n\tMYRB_CMD_READ_BADDATA_TABLE =\t0x25,\n\tMYRB_CMD_CLEAR_BADDATA_TABLE =\t0x26,\n\tMYRB_CMD_GET_ERROR_TABLE =\t0x17,\n\tMYRB_CMD_ADD_CAPACITY_ASYNC =\t0x2A,\n\tMYRB_CMD_BGI_CONTROL =\t\t0x2B,\n\t \n\tMYRB_CMD_READ_CONFIG2 =\t\t0x3D,\n\tMYRB_CMD_WRITE_CONFIG2 =\t0x3C,\n\tMYRB_CMD_READ_CONFIG_ONDISK =\t0x4A,\n\tMYRB_CMD_WRITE_CONFIG_ONDISK =\t0x4B,\n\tMYRB_CMD_READ_CONFIG =\t\t0x4E,\n\tMYRB_CMD_READ_BACKUP_CONFIG =\t0x4D,\n\tMYRB_CMD_WRITE_CONFIG =\t\t0x4F,\n\tMYRB_CMD_ADD_CONFIG =\t\t0x4C,\n\tMYRB_CMD_READ_CONFIG_LABEL =\t0x48,\n\tMYRB_CMD_WRITE_CONFIG_LABEL =\t0x49,\n\t \n\tMYRB_CMD_LOAD_IMAGE =\t\t0x20,\n\tMYRB_CMD_STORE_IMAGE =\t\t0x21,\n\tMYRB_CMD_PROGRAM_IMAGE =\t0x22,\n\t \n\tMYRB_CMD_SET_DIAGNOSTIC_MODE =\t0x31,\n\tMYRB_CMD_RUN_DIAGNOSTIC =\t0x32,\n\t \n\tMYRB_CMD_GET_SUBSYS_DATA =\t0x70,\n\tMYRB_CMD_SET_SUBSYS_PARAM =\t0x71,\n\t \n\tMYRB_CMD_ENQUIRY_OLD =\t\t0x05,\n\tMYRB_CMD_GET_DEVICE_STATE_OLD =\t0x14,\n\tMYRB_CMD_READ_OLD =\t\t0x02,\n\tMYRB_CMD_WRITE_OLD =\t\t0x03,\n\tMYRB_CMD_READ_SG_OLD =\t\t0x82,\n\tMYRB_CMD_WRITE_SG_OLD =\t\t0x83\n} __packed;\n\n \n#define MYRB_STATUS_SUCCESS\t\t\t0x0000\t \n#define MYRB_STATUS_CHECK_CONDITION\t\t0x0002\t \n#define MYRB_STATUS_NO_DEVICE\t\t\t0x0102\t \n#define MYRB_STATUS_INVALID_ADDRESS\t\t0x0105\t \n#define MYRB_STATUS_INVALID_PARAM\t\t0x0105\t \n#define MYRB_STATUS_IRRECOVERABLE_DATA_ERROR\t0x0001\t \n#define MYRB_STATUS_LDRV_NONEXISTENT_OR_OFFLINE 0x0002\t \n#define MYRB_STATUS_ACCESS_BEYOND_END_OF_LDRV\t0x0105\t \n#define MYRB_STATUS_BAD_DATA\t\t\t0x010C\t \n#define MYRB_STATUS_DEVICE_BUSY\t\t\t0x0008\t \n#define MYRB_STATUS_DEVICE_NONRESPONSIVE\t0x000E\t \n#define MYRB_STATUS_COMMAND_TERMINATED\t\t0x000F\t \n#define MYRB_STATUS_START_DEVICE_FAILED\t\t0x0002\t \n#define MYRB_STATUS_INVALID_CHANNEL_OR_TARGET\t0x0105\t \n#define MYRB_STATUS_CHANNEL_BUSY\t\t0x0106\t \n#define MYRB_STATUS_OUT_OF_MEMORY\t\t0x0107\t \n#define MYRB_STATUS_CHANNEL_NOT_STOPPED\t\t0x0002\t \n#define MYRB_STATUS_ATTEMPT_TO_RBLD_ONLINE_DRIVE 0x0002\t \n#define MYRB_STATUS_RBLD_BADBLOCKS\t\t0x0003\t \n#define MYRB_STATUS_RBLD_NEW_DISK_FAILED\t0x0004\t \n#define MYRB_STATUS_RBLD_OR_CHECK_INPROGRESS\t0x0106\t \n#define MYRB_STATUS_DEPENDENT_DISK_DEAD\t\t0x0002\t \n#define MYRB_STATUS_INCONSISTENT_BLOCKS\t\t0x0003\t \n#define MYRB_STATUS_INVALID_OR_NONREDUNDANT_LDRV 0x0105  \n#define MYRB_STATUS_NO_RBLD_OR_CHECK_INPROGRESS\t0x0105\t \n#define MYRB_STATUS_RBLD_IN_PROGRESS_DATA_VALID\t0x0000\t \n#define MYRB_STATUS_RBLD_FAILED_LDEV_FAILURE\t0x0002\t \n#define MYRB_STATUS_RBLD_FAILED_BADBLOCKS\t0x0003\t \n#define MYRB_STATUS_RBLD_FAILED_NEW_DRIVE_FAILED 0x0004\t \n#define MYRB_STATUS_RBLD_SUCCESS\t\t0x0100\t \n#define MYRB_STATUS_RBLD_SUCCESS_TERMINATED\t0x0107\t \n#define MYRB_STATUS_RBLD_NOT_CHECKED\t\t0x0108\t \n#define MYRB_STATUS_BGI_SUCCESS\t\t\t0x0100\t \n#define MYRB_STATUS_BGI_ABORTED\t\t\t0x0005\t \n#define MYRB_STATUS_NO_BGI_INPROGRESS\t\t0x0105\t \n#define MYRB_STATUS_ADD_CAPACITY_INPROGRESS\t0x0004\t \n#define MYRB_STATUS_ADD_CAPACITY_FAILED_OR_SUSPENDED 0x00F4  \n#define MYRB_STATUS_CONFIG2_CSUM_ERROR\t\t0x0002\t \n#define MYRB_STATUS_CONFIGURATION_SUSPENDED\t0x0106\t \n#define MYRB_STATUS_FAILED_TO_CONFIGURE_NVRAM\t0x0105\t \n#define MYRB_STATUS_CONFIGURATION_NOT_SAVED\t0x0106\t \n#define MYRB_STATUS_SUBSYS_NOTINSTALLED\t\t0x0001\t \n#define MYRB_STATUS_SUBSYS_FAILED\t\t0x0002\t \n#define MYRB_STATUS_SUBSYS_BUSY\t\t\t0x0106\t \n#define MYRB_STATUS_SUBSYS_TIMEOUT\t\t0x0108\t \n\n \nstruct myrb_enquiry {\n\tunsigned char ldev_count;\t\t\t \n\tunsigned int rsvd1:24;\t\t\t\t \n\tunsigned int ldev_sizes[32];\t\t\t \n\tunsigned short flash_age;\t\t\t \n\tstruct {\n\t\tunsigned char deferred:1;\t\t \n\t\tunsigned char low_bat:1;\t\t \n\t\tunsigned char rsvd2:6;\t\t\t \n\t} status;\n\tunsigned char rsvd3:8;\t\t\t\t \n\tunsigned char fw_minor_version;\t\t\t \n\tunsigned char fw_major_version;\t\t\t \n\tenum {\n\t\tMYRB_NO_STDBY_RBLD_OR_CHECK_IN_PROGRESS =\t0x00,\n\t\tMYRB_STDBY_RBLD_IN_PROGRESS =\t\t\t0x01,\n\t\tMYRB_BG_RBLD_IN_PROGRESS =\t\t\t0x02,\n\t\tMYRB_BG_CHECK_IN_PROGRESS =\t\t\t0x03,\n\t\tMYRB_STDBY_RBLD_COMPLETED_WITH_ERROR =\t\t0xFF,\n\t\tMYRB_BG_RBLD_OR_CHECK_FAILED_DRIVE_FAILED =\t0xF0,\n\t\tMYRB_BG_RBLD_OR_CHECK_FAILED_LDEV_FAILED =\t0xF1,\n\t\tMYRB_BG_RBLD_OR_CHECK_FAILED_OTHER =\t\t0xF2,\n\t\tMYRB_BG_RBLD_OR_CHECK_SUCCESS_TERMINATED =\t0xF3\n\t} __packed rbld;\t\t \n\tunsigned char max_tcq;\t\t\t\t \n\tunsigned char ldev_offline;\t\t\t \n\tunsigned char rsvd4:8;\t\t\t\t \n\tunsigned short ev_seq;\t\t\t\t \n\tunsigned char ldev_critical;\t\t\t \n\tunsigned int rsvd5:24;\t\t\t\t \n\tunsigned char pdev_dead;\t\t\t \n\tunsigned char rsvd6:8;\t\t\t\t \n\tunsigned char rbld_count;\t\t\t \n\tstruct {\n\t\tunsigned char rsvd7:3;\t\t\t \n\t\tunsigned char bbu_present:1;\t\t \n\t\tunsigned char rsvd8:4;\t\t\t \n\t} misc;\n\tstruct {\n\t\tunsigned char target;\n\t\tunsigned char channel;\n\t} dead_drives[21];\t\t\t\t \n\tunsigned char rsvd9[62];\t\t\t \n} __packed;\n\n \nstruct myrb_enquiry2 {\n\tstruct {\n\t\tenum {\n\t\t\tDAC960_V1_P_PD_PU =\t\t\t0x01,\n\t\t\tDAC960_V1_PL =\t\t\t\t0x02,\n\t\t\tDAC960_V1_PG =\t\t\t\t0x10,\n\t\t\tDAC960_V1_PJ =\t\t\t\t0x11,\n\t\t\tDAC960_V1_PR =\t\t\t\t0x12,\n\t\t\tDAC960_V1_PT =\t\t\t\t0x13,\n\t\t\tDAC960_V1_PTL0 =\t\t\t0x14,\n\t\t\tDAC960_V1_PRL =\t\t\t\t0x15,\n\t\t\tDAC960_V1_PTL1 =\t\t\t0x16,\n\t\t\tDAC960_V1_1164P =\t\t\t0x20\n\t\t} __packed sub_model;\t\t \n\t\tunsigned char actual_channels;\t\t\t \n\t\tenum {\n\t\t\tMYRB_5_CHANNEL_BOARD =\t\t0x01,\n\t\t\tMYRB_3_CHANNEL_BOARD =\t\t0x02,\n\t\t\tMYRB_2_CHANNEL_BOARD =\t\t0x03,\n\t\t\tMYRB_3_CHANNEL_ASIC_DAC =\t0x04\n\t\t} __packed model;\t\t \n\t\tenum {\n\t\t\tMYRB_EISA_CONTROLLER =\t\t0x01,\n\t\t\tMYRB_MCA_CONTROLLER =\t\t0x02,\n\t\t\tMYRB_PCI_CONTROLLER =\t\t0x03,\n\t\t\tMYRB_SCSI_TO_SCSI =\t\t0x08\n\t\t} __packed controller;\t \n\t} hw;\t\t\t\t\t\t \n\t \n\tstruct {\n\t\tunsigned char major_version;\t\t \n\t\tunsigned char minor_version;\t\t \n\t\tunsigned char turn_id;\t\t\t \n\t\tchar firmware_type;\t\t\t \n\t} fw;\t\t\t\t\t\t \n\tunsigned int rsvd1;\t\t\t\t \n\tunsigned char cfg_chan;\t\t\t\t \n\tunsigned char cur_chan;\t\t\t\t \n\tunsigned char max_targets;\t\t\t \n\tunsigned char max_tcq;\t\t\t\t \n\tunsigned char max_ldev;\t\t\t\t \n\tunsigned char max_arms;\t\t\t\t \n\tunsigned char max_spans;\t\t\t \n\tunsigned char rsvd2;\t\t\t\t \n\tunsigned int rsvd3;\t\t\t\t \n\tunsigned int mem_size;\t\t\t\t \n\tunsigned int cache_size;\t\t\t \n\tunsigned int flash_size;\t\t\t \n\tunsigned int nvram_size;\t\t\t \n\tstruct {\n\t\tenum {\n\t\t\tMYRB_RAM_TYPE_DRAM =\t\t0x0,\n\t\t\tMYRB_RAM_TYPE_EDO =\t\t\t0x1,\n\t\t\tMYRB_RAM_TYPE_SDRAM =\t\t0x2,\n\t\t\tMYRB_RAM_TYPE_Last =\t\t0x7\n\t\t} __packed ram:3;\t \n\t\tenum {\n\t\t\tMYRB_ERR_CORR_None =\t0x0,\n\t\t\tMYRB_ERR_CORR_Parity =\t0x1,\n\t\t\tMYRB_ERR_CORR_ECC =\t\t0x2,\n\t\t\tMYRB_ERR_CORR_Last =\t0x7\n\t\t} __packed ec:3;\t \n\t\tunsigned char fast_page:1;\t\t \n\t\tunsigned char low_power:1;\t\t \n\t\tunsigned char rsvd4;\t\t\t \n\t} mem_type;\n\tunsigned short clock_speed;\t\t\t \n\tunsigned short mem_speed;\t\t\t \n\tunsigned short hw_speed;\t\t\t \n\tunsigned char rsvd5[12];\t\t\t \n\tunsigned short max_cmds;\t\t\t \n\tunsigned short max_sge;\t\t\t\t \n\tunsigned short max_drv_cmds;\t\t\t \n\tunsigned short max_io_desc;\t\t\t \n\tunsigned short max_sectors;\t\t\t \n\tunsigned char latency;\t\t\t\t \n\tunsigned char rsvd6;\t\t\t\t \n\tunsigned char scsi_tmo;\t\t\t\t \n\tunsigned char rsvd7;\t\t\t\t \n\tunsigned short min_freelines;\t\t\t \n\tunsigned char rsvd8[8];\t\t\t\t \n\tunsigned char rbld_rate_const;\t\t\t \n\tunsigned char rsvd9[11];\t\t\t \n\tunsigned short pdrv_block_size;\t\t\t \n\tunsigned short ldev_block_size;\t\t\t \n\tunsigned short max_blocks_per_cmd;\t\t \n\tunsigned short block_factor;\t\t\t \n\tunsigned short cacheline_size;\t\t\t \n\tstruct {\n\t\tenum {\n\t\t\tMYRB_WIDTH_NARROW_8BIT =\t\t0x0,\n\t\t\tMYRB_WIDTH_WIDE_16BIT =\t\t\t0x1,\n\t\t\tMYRB_WIDTH_WIDE_32BIT =\t\t\t0x2\n\t\t} __packed bus_width:2;\t \n\t\tenum {\n\t\t\tMYRB_SCSI_SPEED_FAST =\t\t\t0x0,\n\t\t\tMYRB_SCSI_SPEED_ULTRA =\t\t\t0x1,\n\t\t\tMYRB_SCSI_SPEED_ULTRA2 =\t\t0x2\n\t\t} __packed bus_speed:2;\t \n\t\tunsigned char differential:1;\t\t \n\t\tunsigned char rsvd10:3;\t\t\t \n\t} scsi_cap;\n\tunsigned char rsvd11[5];\t\t\t \n\tunsigned short fw_build;\t\t\t \n\tenum {\n\t\tMYRB_FAULT_AEMI =\t\t\t\t0x01,\n\t\tMYRB_FAULT_OEM1 =\t\t\t\t0x02,\n\t\tMYRB_FAULT_OEM2 =\t\t\t\t0x04,\n\t\tMYRB_FAULT_OEM3 =\t\t\t\t0x08,\n\t\tMYRB_FAULT_CONNER =\t\t\t\t0x10,\n\t\tMYRB_FAULT_SAFTE =\t\t\t\t0x20\n\t} __packed fault_mgmt;\t\t \n\tunsigned char rsvd12;\t\t\t\t \n\tstruct {\n\t\tunsigned int clustering:1;\t\t \n\t\tunsigned int online_RAID_expansion:1;\t \n\t\tunsigned int readahead:1;\t\t \n\t\tunsigned int bgi:1;\t\t\t \n\t\tunsigned int rsvd13:28;\t\t\t \n\t} fw_features;\n\tunsigned char rsvd14[8];\t\t\t \n} __packed;\n\n \nenum myrb_devstate {\n\tMYRB_DEVICE_DEAD =\t\t0x00,\n\tMYRB_DEVICE_WO =\t\t0x02,\n\tMYRB_DEVICE_ONLINE =\t\t0x03,\n\tMYRB_DEVICE_CRITICAL =\t\t0x04,\n\tMYRB_DEVICE_STANDBY =\t\t0x10,\n\tMYRB_DEVICE_OFFLINE =\t\t0xFF\n} __packed;\n\n \nenum myrb_raidlevel {\n\tMYRB_RAID_LEVEL0 =\t\t0x0,      \n\tMYRB_RAID_LEVEL1 =\t\t0x1,      \n\tMYRB_RAID_LEVEL3 =\t\t0x3,      \n\tMYRB_RAID_LEVEL5 =\t\t0x5,      \n\tMYRB_RAID_LEVEL6 =\t\t0x6,      \n\tMYRB_RAID_JBOD =\t\t0x7,      \n} __packed;\n\n \nstruct myrb_ldev_info {\n\tunsigned int size;\t\t\t\t \n\tenum myrb_devstate state;\t\t\t \n\tunsigned int raid_level:7;\t\t\t \n\tunsigned int wb_enabled:1;\t\t\t \n\tunsigned int rsvd:16;\t\t\t\t \n};\n\n \n#define DAC960_V1_GetEventLogEntry\t\t0x00\n\n \nstruct myrb_log_entry {\n\tunsigned char msg_type;\t\t\t \n\tunsigned char msg_len;\t\t\t \n\tunsigned char target:5;\t\t\t \n\tunsigned char channel:3;\t\t \n\tunsigned char lun:6;\t\t\t \n\tunsigned char rsvd1:2;\t\t\t \n\tunsigned short seq_num;\t\t\t \n\tunsigned char sense[26];\t\t \n};\n\n \nstruct myrb_pdev_state {\n\tunsigned int present:1;\t\t\t \n\tunsigned int :7;\t\t\t\t \n\tenum {\n\t\tMYRB_TYPE_OTHER =\t\t\t0x0,\n\t\tMYRB_TYPE_DISK =\t\t\t0x1,\n\t\tMYRB_TYPE_TAPE =\t\t\t0x2,\n\t\tMYRB_TYPE_CDROM_OR_WORM =\t\t0x3\n\t} __packed devtype:2;\t\t \n\tunsigned int rsvd1:1;\t\t\t\t \n\tunsigned int fast20:1;\t\t\t\t \n\tunsigned int sync:1;\t\t\t\t \n\tunsigned int fast:1;\t\t\t\t \n\tunsigned int wide:1;\t\t\t\t \n\tunsigned int tcq_supported:1;\t\t\t \n\tenum myrb_devstate state;\t\t\t \n\tunsigned int rsvd2:8;\t\t\t\t \n\tunsigned int sync_multiplier;\t\t\t \n\tunsigned int sync_offset:5;\t\t\t \n\tunsigned int rsvd3:3;\t\t\t\t \n\tunsigned int size;\t\t\t\t \n\tunsigned int rsvd4:16;\t\t\t \n} __packed;\n\n \nstruct myrb_rbld_progress {\n\tunsigned int ldev_num;\t\t\t\t \n\tunsigned int ldev_size;\t\t\t\t \n\tunsigned int blocks_left;\t\t\t \n};\n\n \nstruct myrb_bgi_status {\n\tunsigned int ldev_size;\t\t\t\t \n\tunsigned int blocks_done;\t\t\t \n\tunsigned char rsvd1[12];\t\t\t \n\tunsigned int ldev_num;\t\t\t\t \n\tunsigned char raid_level;\t\t\t \n\tenum {\n\t\tMYRB_BGI_INVALID =\t0x00,\n\t\tMYRB_BGI_STARTED =\t0x02,\n\t\tMYRB_BGI_INPROGRESS =\t0x04,\n\t\tMYRB_BGI_SUSPENDED =\t0x05,\n\t\tMYRB_BGI_CANCELLED =\t0x06\n\t} __packed status;\t\t \n\tunsigned char rsvd2[6];\t\t\t\t \n};\n\n \nstruct myrb_error_entry {\n\tunsigned char parity_err;\t\t\t \n\tunsigned char soft_err;\t\t\t\t \n\tunsigned char hard_err;\t\t\t\t \n\tunsigned char misc_err;\t\t\t\t \n};\n\n \nstruct myrb_config2 {\n\tunsigned rsvd1:1;\t\t\t\t \n\tunsigned active_negation:1;\t\t\t \n\tunsigned rsvd2:5;\t\t\t\t \n\tunsigned no_rescan_on_reset_during_scan:1;\t \n\tunsigned StorageWorks_support:1;\t\t \n\tunsigned HewlettPackard_support:1;\t\t \n\tunsigned no_disconnect_on_first_command:1;\t \n\tunsigned rsvd3:2;\t\t\t\t \n\tunsigned AEMI_ARM:1;\t\t\t\t \n\tunsigned AEMI_OFM:1;\t\t\t\t \n\tunsigned rsvd4:1;\t\t\t\t \n\tenum {\n\t\tMYRB_OEMID_MYLEX =\t\t0x00,\n\t\tMYRB_OEMID_IBM =\t\t0x08,\n\t\tMYRB_OEMID_HP =\t\t\t0x0A,\n\t\tMYRB_OEMID_DEC =\t\t0x0C,\n\t\tMYRB_OEMID_SIEMENS =\t\t0x10,\n\t\tMYRB_OEMID_INTEL =\t\t0x12\n\t} __packed OEMID;\t\t \n\tunsigned char oem_model_number;\t\t\t \n\tunsigned char physical_sector;\t\t\t \n\tunsigned char logical_sector;\t\t\t \n\tunsigned char block_factor;\t\t\t \n\tunsigned readahead_enabled:1;\t\t\t \n\tunsigned low_BIOS_delay:1;\t\t\t \n\tunsigned rsvd5:2;\t\t\t\t \n\tunsigned restrict_reassign_to_one_sector:1;\t \n\tunsigned rsvd6:1;\t\t\t\t \n\tunsigned FUA_during_write_recovery:1;\t\t \n\tunsigned enable_LeftSymmetricRAID5Algorithm:1;\t \n\tunsigned char default_rebuild_rate;\t\t \n\tunsigned char rsvd7;\t\t\t\t \n\tunsigned char blocks_per_cacheline;\t\t \n\tunsigned char blocks_per_stripe;\t\t \n\tstruct {\n\t\tenum {\n\t\t\tMYRB_SPEED_ASYNC =\t\t0x0,\n\t\t\tMYRB_SPEED_SYNC_8MHz =\t\t0x1,\n\t\t\tMYRB_SPEED_SYNC_5MHz =\t\t0x2,\n\t\t\tMYRB_SPEED_SYNC_10_OR_20MHz =\t0x3\n\t\t} __packed speed:2;\t \n\t\tunsigned force_8bit:1;\t\t\t \n\t\tunsigned disable_fast20:1;\t\t \n\t\tunsigned rsvd8:3;\t\t\t \n\t\tunsigned enable_tcq:1;\t\t\t \n\t} __packed channelparam[6];\t \n\tunsigned char SCSIInitiatorID;\t\t\t \n\tunsigned char rsvd9;\t\t\t\t \n\tenum {\n\t\tMYRB_STARTUP_CONTROLLER_SPINUP =\t0x00,\n\t\tMYRB_STARTUP_POWERON_SPINUP =\t\t0x01\n\t} __packed startup;\t\t \n\tunsigned char simultaneous_device_spinup_count;\t \n\tunsigned char seconds_delay_between_spinups;\t \n\tunsigned char rsvd10[29];\t\t\t \n\tunsigned BIOS_disabled:1;\t\t\t \n\tunsigned CDROM_boot_enabled:1;\t\t\t \n\tunsigned rsvd11:3;\t\t\t\t \n\tenum {\n\t\tMYRB_GEOM_128_32 =\t\t0x0,\n\t\tMYRB_GEOM_255_63 =\t\t0x1,\n\t\tMYRB_GEOM_RESERVED1 =\t\t0x2,\n\t\tMYRB_GEOM_RESERVED2 =\t\t0x3\n\t} __packed drive_geometry:2;\t \n\tunsigned rsvd12:1;\t\t\t\t \n\tunsigned char rsvd13[9];\t\t\t \n\tunsigned short csum;\t\t\t\t \n};\n\n \nstruct myrb_dcdb {\n\tunsigned target:4;\t\t\t\t  \n\tunsigned channel:4;\t\t\t\t  \n\tenum {\n\t\tMYRB_DCDB_XFER_NONE =\t\t0,\n\t\tMYRB_DCDB_XFER_DEVICE_TO_SYSTEM = 1,\n\t\tMYRB_DCDB_XFER_SYSTEM_TO_DEVICE = 2,\n\t\tMYRB_DCDB_XFER_ILLEGAL =\t3\n\t} __packed data_xfer:2;\t\t\t\t \n\tunsigned early_status:1;\t\t\t \n\tunsigned rsvd1:1;\t\t\t\t \n\tenum {\n\t\tMYRB_DCDB_TMO_24_HRS =\t0,\n\t\tMYRB_DCDB_TMO_10_SECS =\t1,\n\t\tMYRB_DCDB_TMO_60_SECS =\t2,\n\t\tMYRB_DCDB_TMO_10_MINS =\t3\n\t} __packed timeout:2;\t\t\t\t \n\tunsigned no_autosense:1;\t\t\t \n\tunsigned allow_disconnect:1;\t\t\t \n\tunsigned short xfer_len_lo;\t\t\t \n\tu32 dma_addr;\t\t\t\t\t \n\tunsigned char cdb_len:4;\t\t\t \n\tunsigned char xfer_len_hi4:4;\t\t\t \n\tunsigned char sense_len;\t\t\t \n\tunsigned char cdb[12];\t\t\t\t \n\tunsigned char sense[64];\t\t\t \n\tunsigned char status;\t\t\t\t \n\tunsigned char rsvd2;\t\t\t\t \n};\n\n \nstruct myrb_sge {\n\tu32 sge_addr;\t\t \n\tu32 sge_count;\t\t \n};\n\n \nunion myrb_cmd_mbox {\n\tunsigned int words[4];\t\t\t\t \n\tunsigned char bytes[16];\t\t\t \n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char rsvd[14];\t\t\t \n\t} __packed common;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char rsvd1[6];\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char rsvd2[4];\t\t\t \n\t} __packed type3;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char optype;\t\t\t \n\t\tunsigned char rsvd1[5];\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char rsvd2[4];\t\t\t \n\t} __packed type3B;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char rsvd1[5];\t\t\t \n\t\tunsigned char ldev_num:6;\t\t \n\t\tunsigned char auto_restore:1;\t\t \n\t\tunsigned char rsvd2[8];\t\t\t \n\t} __packed type3C;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char channel;\t\t\t \n\t\tunsigned char target;\t\t\t \n\t\tenum myrb_devstate state;\t\t \n\t\tunsigned char rsvd1[3];\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char rsvd2[4];\t\t\t \n\t} __packed type3D;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char optype;\t\t\t \n\t\tunsigned char opqual;\t\t\t \n\t\tunsigned short ev_seq;\t\t\t \n\t\tunsigned char rsvd1[2];\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char rsvd2[4];\t\t\t \n\t} __packed type3E;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char rsvd1[2];\t\t\t \n\t\tunsigned char rbld_rate;\t\t \n\t\tunsigned char rsvd2[3];\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char rsvd3[4];\t\t\t \n\t} __packed type3R;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned short xfer_len;\t\t \n\t\tunsigned int lba;\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char ldev_num;\t\t\t \n\t\tunsigned char rsvd[3];\t\t\t \n\t} __packed type4;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tstruct {\n\t\t\tunsigned short xfer_len:11;\t \n\t\t\tunsigned char ldev_num:5;\t \n\t\t} __packed ld;\n\t\tunsigned int lba;\t\t\t \n\t\tu32 addr;\t\t\t\t \n\t\tunsigned char sg_count:6;\t\t \n\t\tenum {\n\t\t\tMYRB_SGL_ADDR32_COUNT32 = 0x0,\n\t\t\tMYRB_SGL_ADDR32_COUNT16 = 0x1,\n\t\t\tMYRB_SGL_COUNT32_ADDR32 = 0x2,\n\t\t\tMYRB_SGL_COUNT16_ADDR32 = 0x3\n\t\t} __packed sg_type:2;\t \n\t\tunsigned char rsvd[3];\t\t\t \n\t} __packed type5;\n\tstruct {\n\t\tenum myrb_cmd_opcode opcode;\t\t \n\t\tunsigned char id;\t\t\t \n\t\tunsigned char opcode2;\t\t\t \n\t\tunsigned char rsvd1:8;\t\t\t \n\t\tu32 cmd_mbox_addr;\t\t\t \n\t\tu32 stat_mbox_addr;\t\t\t \n\t\tunsigned char rsvd2[4];\t\t\t \n\t} __packed typeX;\n};\n\n \nstruct myrb_stat_mbox {\n\tunsigned char id;\t\t \n\tunsigned char rsvd:7;\t\t \n\tunsigned char valid:1;\t\t\t \n\tunsigned short status;\t\t \n};\n\nstruct myrb_cmdblk {\n\tunion myrb_cmd_mbox mbox;\n\tunsigned short status;\n\tstruct completion *completion;\n\tstruct myrb_dcdb *dcdb;\n\tdma_addr_t dcdb_addr;\n\tstruct myrb_sge *sgl;\n\tdma_addr_t sgl_addr;\n};\n\nstruct myrb_hba {\n\tunsigned int ldev_block_size;\n\tunsigned char ldev_geom_heads;\n\tunsigned char ldev_geom_sectors;\n\tunsigned char bus_width;\n\tunsigned short stripe_size;\n\tunsigned short segment_size;\n\tunsigned short new_ev_seq;\n\tunsigned short old_ev_seq;\n\tbool dual_mode_interface;\n\tbool bgi_status_supported;\n\tbool safte_enabled;\n\tbool need_ldev_info;\n\tbool need_err_info;\n\tbool need_rbld;\n\tbool need_cc_status;\n\tbool need_bgi_status;\n\tbool rbld_first;\n\n\tstruct pci_dev *pdev;\n\tstruct Scsi_Host *host;\n\n\tstruct workqueue_struct *work_q;\n\tchar work_q_name[20];\n\tstruct delayed_work monitor_work;\n\tunsigned long primary_monitor_time;\n\tunsigned long secondary_monitor_time;\n\n\tstruct dma_pool *sg_pool;\n\tstruct dma_pool *dcdb_pool;\n\n\tspinlock_t queue_lock;\n\n\tvoid (*qcmd)(struct myrb_hba *cs, struct myrb_cmdblk *cmd_blk);\n\tvoid (*write_cmd_mbox)(union myrb_cmd_mbox *next_mbox,\n\t\t\t       union myrb_cmd_mbox *cmd_mbox);\n\tvoid (*get_cmd_mbox)(void __iomem *base);\n\tvoid (*disable_intr)(void __iomem *base);\n\tvoid (*reset)(void __iomem *base);\n\n\tunsigned int ctlr_num;\n\tunsigned char model_name[20];\n\tunsigned char fw_version[12];\n\n\tunsigned int irq;\n\tphys_addr_t io_addr;\n\tphys_addr_t pci_addr;\n\tvoid __iomem *io_base;\n\tvoid __iomem *mmio_base;\n\n\tsize_t cmd_mbox_size;\n\tdma_addr_t cmd_mbox_addr;\n\tunion myrb_cmd_mbox *first_cmd_mbox;\n\tunion myrb_cmd_mbox *last_cmd_mbox;\n\tunion myrb_cmd_mbox *next_cmd_mbox;\n\tunion myrb_cmd_mbox *prev_cmd_mbox1;\n\tunion myrb_cmd_mbox *prev_cmd_mbox2;\n\n\tsize_t stat_mbox_size;\n\tdma_addr_t stat_mbox_addr;\n\tstruct myrb_stat_mbox *first_stat_mbox;\n\tstruct myrb_stat_mbox *last_stat_mbox;\n\tstruct myrb_stat_mbox *next_stat_mbox;\n\n\tstruct myrb_cmdblk dcmd_blk;\n\tstruct myrb_cmdblk mcmd_blk;\n\tstruct mutex dcmd_mutex;\n\n\tstruct myrb_enquiry *enquiry;\n\tdma_addr_t enquiry_addr;\n\n\tstruct myrb_error_entry *err_table;\n\tdma_addr_t err_table_addr;\n\n\tunsigned short last_rbld_status;\n\n\tstruct myrb_ldev_info *ldev_info_buf;\n\tdma_addr_t ldev_info_addr;\n\n\tstruct myrb_bgi_status bgi_status;\n\n\tstruct mutex dma_mutex;\n};\n\n \n#define DAC960_LA_mmio_size\t\t0x80\n\nenum DAC960_LA_reg_offset {\n\tDAC960_LA_IRQMASK_OFFSET\t= 0x34,\n\tDAC960_LA_CMDOP_OFFSET\t\t= 0x50,\n\tDAC960_LA_CMDID_OFFSET\t\t= 0x51,\n\tDAC960_LA_MBOX2_OFFSET\t\t= 0x52,\n\tDAC960_LA_MBOX3_OFFSET\t\t= 0x53,\n\tDAC960_LA_MBOX4_OFFSET\t\t= 0x54,\n\tDAC960_LA_MBOX5_OFFSET\t\t= 0x55,\n\tDAC960_LA_MBOX6_OFFSET\t\t= 0x56,\n\tDAC960_LA_MBOX7_OFFSET\t\t= 0x57,\n\tDAC960_LA_MBOX8_OFFSET\t\t= 0x58,\n\tDAC960_LA_MBOX9_OFFSET\t\t= 0x59,\n\tDAC960_LA_MBOX10_OFFSET\t\t= 0x5A,\n\tDAC960_LA_MBOX11_OFFSET\t\t= 0x5B,\n\tDAC960_LA_MBOX12_OFFSET\t\t= 0x5C,\n\tDAC960_LA_STSID_OFFSET\t\t= 0x5D,\n\tDAC960_LA_STS_OFFSET\t\t= 0x5E,\n\tDAC960_LA_IDB_OFFSET\t\t= 0x60,\n\tDAC960_LA_ODB_OFFSET\t\t= 0x61,\n\tDAC960_LA_ERRSTS_OFFSET\t\t= 0x63,\n};\n\n \n#define DAC960_LA_IDB_HWMBOX_NEW_CMD 0x01\n#define DAC960_LA_IDB_HWMBOX_ACK_STS 0x02\n#define DAC960_LA_IDB_GEN_IRQ 0x04\n#define DAC960_LA_IDB_CTRL_RESET 0x08\n#define DAC960_LA_IDB_MMBOX_NEW_CMD 0x10\n\n#define DAC960_LA_IDB_HWMBOX_EMPTY 0x01\n#define DAC960_LA_IDB_INIT_DONE 0x02\n\n \n#define DAC960_LA_ODB_HWMBOX_ACK_IRQ 0x01\n#define DAC960_LA_ODB_MMBOX_ACK_IRQ 0x02\n#define DAC960_LA_ODB_HWMBOX_STS_AVAIL 0x01\n#define DAC960_LA_ODB_MMBOX_STS_AVAIL 0x02\n\n \n#define DAC960_LA_IRQMASK_DISABLE_IRQ 0x04\n\n \n#define DAC960_LA_ERRSTS_PENDING 0x02\n\n \n#define DAC960_PG_mmio_size\t\t0x2000\n\nenum DAC960_PG_reg_offset {\n\tDAC960_PG_IDB_OFFSET\t\t= 0x0020,\n\tDAC960_PG_ODB_OFFSET\t\t= 0x002C,\n\tDAC960_PG_IRQMASK_OFFSET\t= 0x0034,\n\tDAC960_PG_CMDOP_OFFSET\t\t= 0x1000,\n\tDAC960_PG_CMDID_OFFSET\t\t= 0x1001,\n\tDAC960_PG_MBOX2_OFFSET\t\t= 0x1002,\n\tDAC960_PG_MBOX3_OFFSET\t\t= 0x1003,\n\tDAC960_PG_MBOX4_OFFSET\t\t= 0x1004,\n\tDAC960_PG_MBOX5_OFFSET\t\t= 0x1005,\n\tDAC960_PG_MBOX6_OFFSET\t\t= 0x1006,\n\tDAC960_PG_MBOX7_OFFSET\t\t= 0x1007,\n\tDAC960_PG_MBOX8_OFFSET\t\t= 0x1008,\n\tDAC960_PG_MBOX9_OFFSET\t\t= 0x1009,\n\tDAC960_PG_MBOX10_OFFSET\t\t= 0x100A,\n\tDAC960_PG_MBOX11_OFFSET\t\t= 0x100B,\n\tDAC960_PG_MBOX12_OFFSET\t\t= 0x100C,\n\tDAC960_PG_STSID_OFFSET\t\t= 0x1018,\n\tDAC960_PG_STS_OFFSET\t\t= 0x101A,\n\tDAC960_PG_ERRSTS_OFFSET\t\t= 0x103F,\n};\n\n \n#define DAC960_PG_IDB_HWMBOX_NEW_CMD 0x01\n#define DAC960_PG_IDB_HWMBOX_ACK_STS 0x02\n#define DAC960_PG_IDB_GEN_IRQ 0x04\n#define DAC960_PG_IDB_CTRL_RESET 0x08\n#define DAC960_PG_IDB_MMBOX_NEW_CMD 0x10\n\n#define DAC960_PG_IDB_HWMBOX_FULL 0x01\n#define DAC960_PG_IDB_INIT_IN_PROGRESS 0x02\n\n \n#define DAC960_PG_ODB_HWMBOX_ACK_IRQ 0x01\n#define DAC960_PG_ODB_MMBOX_ACK_IRQ 0x02\n#define DAC960_PG_ODB_HWMBOX_STS_AVAIL 0x01\n#define DAC960_PG_ODB_MMBOX_STS_AVAIL 0x02\n\n \n#define DAC960_PG_IRQMASK_MSI_MASK1 0x03\n#define DAC960_PG_IRQMASK_DISABLE_IRQ 0x04\n#define DAC960_PG_IRQMASK_MSI_MASK2 0xF8\n\n \n#define DAC960_PG_ERRSTS_PENDING 0x04\n\n \n#define DAC960_PD_mmio_size\t\t0x80\n\nenum DAC960_PD_reg_offset {\n\tDAC960_PD_CMDOP_OFFSET\t\t= 0x00,\n\tDAC960_PD_CMDID_OFFSET\t\t= 0x01,\n\tDAC960_PD_MBOX2_OFFSET\t\t= 0x02,\n\tDAC960_PD_MBOX3_OFFSET\t\t= 0x03,\n\tDAC960_PD_MBOX4_OFFSET\t\t= 0x04,\n\tDAC960_PD_MBOX5_OFFSET\t\t= 0x05,\n\tDAC960_PD_MBOX6_OFFSET\t\t= 0x06,\n\tDAC960_PD_MBOX7_OFFSET\t\t= 0x07,\n\tDAC960_PD_MBOX8_OFFSET\t\t= 0x08,\n\tDAC960_PD_MBOX9_OFFSET\t\t= 0x09,\n\tDAC960_PD_MBOX10_OFFSET\t\t= 0x0A,\n\tDAC960_PD_MBOX11_OFFSET\t\t= 0x0B,\n\tDAC960_PD_MBOX12_OFFSET\t\t= 0x0C,\n\tDAC960_PD_STSID_OFFSET\t\t= 0x0D,\n\tDAC960_PD_STS_OFFSET\t\t= 0x0E,\n\tDAC960_PD_ERRSTS_OFFSET\t\t= 0x3F,\n\tDAC960_PD_IDB_OFFSET\t\t= 0x40,\n\tDAC960_PD_ODB_OFFSET\t\t= 0x41,\n\tDAC960_PD_IRQEN_OFFSET\t\t= 0x43,\n};\n\n \n#define DAC960_PD_IDB_HWMBOX_NEW_CMD 0x01\n#define DAC960_PD_IDB_HWMBOX_ACK_STS 0x02\n#define DAC960_PD_IDB_GEN_IRQ 0x04\n#define DAC960_PD_IDB_CTRL_RESET 0x08\n\n#define DAC960_PD_IDB_HWMBOX_FULL 0x01\n#define DAC960_PD_IDB_INIT_IN_PROGRESS 0x02\n\n \n#define DAC960_PD_ODB_HWMBOX_ACK_IRQ 0x01\n#define DAC960_PD_ODB_HWMBOX_STS_AVAIL 0x01\n\n \n#define DAC960_PD_IRQMASK_ENABLE_IRQ 0x01\n\n \n#define DAC960_PD_ERRSTS_PENDING 0x04\n\ntypedef int (*myrb_hw_init_t)(struct pci_dev *pdev,\n\t\t\t      struct myrb_hba *cb, void __iomem *base);\ntypedef unsigned short (*mbox_mmio_init_t)(struct pci_dev *pdev,\n\t\t\t\t\t   void __iomem *base,\n\t\t\t\t\t   union myrb_cmd_mbox *mbox);\n\nstruct myrb_privdata {\n\tmyrb_hw_init_t\t\thw_init;\n\tirq_handler_t\t\tirq_handler;\n\tunsigned int\t\tmmio_size;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}