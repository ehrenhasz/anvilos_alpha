{
  "module_name": "mv_94xx.h",
  "hash_id": "c20eaa446fbcd05dcc0244f63778a548ed80223c485ddd4bd245cd8b6dd2e924",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/mvsas/mv_94xx.h",
  "human_readable_source": " \n \n\n#ifndef _MVS94XX_REG_H_\n#define _MVS94XX_REG_H_\n\n#include <linux/types.h>\n\n#define MAX_LINK_RATE\t\tSAS_LINK_RATE_6_0_GBPS\n\nenum VANIR_REVISION_ID {\n\tVANIR_A0_REV\t\t= 0xA0,\n\tVANIR_B0_REV\t\t= 0x01,\n\tVANIR_C0_REV\t\t= 0x02,\n\tVANIR_C1_REV\t\t= 0x03,\n\tVANIR_C2_REV\t\t= 0xC2,\n};\n\nenum host_registers {\n\tMVS_HST_CHIP_CONFIG\t= 0x10104,\t \n};\n\nenum hw_registers {\n\tMVS_GBL_CTL\t\t= 0x04,   \n\tMVS_GBL_INT_STAT\t= 0x00,   \n\tMVS_GBL_PI\t\t= 0x0C,   \n\n\tMVS_PHY_CTL\t\t= 0x40,   \n\tMVS_PORTS_IMP\t\t= 0x9C,   \n\n\tMVS_GBL_PORT_TYPE\t= 0xa0,   \n\n\tMVS_CTL\t\t\t= 0x100,  \n\tMVS_PCS\t\t\t= 0x104,  \n\tMVS_CMD_LIST_LO\t\t= 0x108,  \n\tMVS_CMD_LIST_HI\t\t= 0x10C,\n\tMVS_RX_FIS_LO\t\t= 0x110,  \n\tMVS_RX_FIS_HI\t\t= 0x114,\n\tMVS_STP_REG_SET_0\t= 0x118,  \n\tMVS_STP_REG_SET_1\t= 0x11C,\n\tMVS_TX_CFG\t\t= 0x120,  \n\tMVS_TX_LO\t\t= 0x124,  \n\tMVS_TX_HI\t\t= 0x128,\n\n\tMVS_TX_PROD_IDX\t\t= 0x12C,  \n\tMVS_TX_CONS_IDX\t\t= 0x130,  \n\tMVS_RX_CFG\t\t= 0x134,  \n\tMVS_RX_LO\t\t= 0x138,  \n\tMVS_RX_HI\t\t= 0x13C,\n\tMVS_RX_CONS_IDX\t\t= 0x140,  \n\n\tMVS_INT_COAL\t\t= 0x148,  \n\tMVS_INT_COAL_TMOUT\t= 0x14C,  \n\tMVS_INT_STAT\t\t= 0x150,  \n\tMVS_INT_MASK\t\t= 0x154,  \n\tMVS_INT_STAT_SRS_0\t= 0x158,  \n\tMVS_INT_MASK_SRS_0\t= 0x15C,\n\tMVS_INT_STAT_SRS_1\t= 0x160,\n\tMVS_INT_MASK_SRS_1\t= 0x164,\n\tMVS_NON_NCQ_ERR_0\t= 0x168,  \n\tMVS_NON_NCQ_ERR_1\t= 0x16C,\n\tMVS_CMD_ADDR\t\t= 0x170,  \n\tMVS_CMD_DATA\t\t= 0x174,  \n\tMVS_MEM_PARITY_ERR\t= 0x178,  \n\n\t\t\t\t\t  \n\tMVS_P0_INT_STAT\t\t= 0x180,  \n\tMVS_P0_INT_MASK\t\t= 0x184,  \n\t\t\t\t\t  \n\tMVS_P4_INT_STAT\t\t= 0x1A0,  \n\tMVS_P4_INT_MASK\t\t= 0x1A4,  \n\n\t\t\t\t\t  \n\tMVS_P0_SER_CTLSTAT\t= 0x1D0,  \n\t\t\t\t\t  \n\tMVS_P4_SER_CTLSTAT\t= 0x1E0,  \n\n\t\t\t\t\t  \n\tMVS_P0_CFG_ADDR\t\t= 0x200,  \n\tMVS_P0_CFG_DATA\t\t= 0x204,  \n\t\t\t\t\t  \n\tMVS_P4_CFG_ADDR\t\t= 0x220,  \n\tMVS_P4_CFG_DATA\t\t= 0x224,  \n\n\t\t\t\t\t  \n\tMVS_P0_VSR_ADDR\t\t= 0x250,  \n\tMVS_P0_VSR_DATA\t\t= 0x254,  \n\t\t\t\t\t  \n\t\t\t\t\t  \n\tMVS_P4_VSR_ADDR \t= 0x250,  \n\tMVS_P4_VSR_DATA \t= 0x254,  \n\tMVS_PA_VSR_ADDR\t\t= 0x290,  \n\tMVS_PA_VSR_PORT\t\t= 0x294,  \n\tMVS_COMMAND_ACTIVE\t= 0x300,\n};\n\nenum pci_cfg_registers {\n\tPCR_PHY_CTL\t\t= 0x40,\n\tPCR_PHY_CTL2\t\t= 0x90,\n\tPCR_DEV_CTRL\t\t= 0x78,\n\tPCR_LINK_STAT\t\t= 0x82,\n};\n\n \nenum sas_sata_vsp_regs {\n\tVSR_PHY_STAT\t\t= 0x00 * 4,  \n\tVSR_PHY_MODE1\t\t= 0x01 * 4,  \n\tVSR_PHY_MODE2\t\t= 0x02 * 4,  \n\tVSR_PHY_MODE3\t\t= 0x03 * 4,  \n\tVSR_PHY_MODE4\t\t= 0x04 * 4,  \n\tVSR_PHY_MODE5\t\t= 0x05 * 4,  \n\tVSR_PHY_MODE6\t\t= 0x06 * 4,  \n\tVSR_PHY_MODE7\t\t= 0x07 * 4,  \n\tVSR_PHY_MODE8\t\t= 0x08 * 4,  \n\tVSR_PHY_MODE9\t\t= 0x09 * 4,  \n\tVSR_PHY_MODE10\t\t= 0x0A * 4,  \n\tVSR_PHY_MODE11\t\t= 0x0B * 4,  \n\tVSR_PHY_ACT_LED\t\t= 0x0C * 4,  \n\n\tVSR_PHY_FFE_CONTROL\t= 0x10C,\n\tVSR_PHY_DFE_UPDATE_CRTL\t= 0x110,\n\tVSR_REF_CLOCK_CRTL\t= 0x1A0,\n};\n\nenum chip_register_bits {\n\tPHY_MIN_SPP_PHYS_LINK_RATE_MASK = (0x7 << 8),\n\tPHY_MAX_SPP_PHYS_LINK_RATE_MASK = (0x7 << 12),\n\tPHY_NEG_SPP_PHYS_LINK_RATE_MASK_OFFSET = (16),\n\tPHY_NEG_SPP_PHYS_LINK_RATE_MASK =\n\t\t\t(0x3 << PHY_NEG_SPP_PHYS_LINK_RATE_MASK_OFFSET),\n};\n\nenum pci_interrupt_cause {\n\t \n\tMVS_IRQ_COM_IN_I2O_IOP0        = (1 << 0),\n\tMVS_IRQ_COM_IN_I2O_IOP1        = (1 << 1),\n\tMVS_IRQ_COM_IN_I2O_IOP2        = (1 << 2),\n\tMVS_IRQ_COM_IN_I2O_IOP3        = (1 << 3),\n\tMVS_IRQ_COM_OUT_I2O_HOS0       = (1 << 4),\n\tMVS_IRQ_COM_OUT_I2O_HOS1       = (1 << 5),\n\tMVS_IRQ_COM_OUT_I2O_HOS2       = (1 << 6),\n\tMVS_IRQ_COM_OUT_I2O_HOS3       = (1 << 7),\n\tMVS_IRQ_PCIF_TO_CPU_DRBL0      = (1 << 8),\n\tMVS_IRQ_PCIF_TO_CPU_DRBL1      = (1 << 9),\n\tMVS_IRQ_PCIF_TO_CPU_DRBL2      = (1 << 10),\n\tMVS_IRQ_PCIF_TO_CPU_DRBL3      = (1 << 11),\n\tMVS_IRQ_PCIF_DRBL0             = (1 << 12),\n\tMVS_IRQ_PCIF_DRBL1             = (1 << 13),\n\tMVS_IRQ_PCIF_DRBL2             = (1 << 14),\n\tMVS_IRQ_PCIF_DRBL3             = (1 << 15),\n\tMVS_IRQ_XOR_A                  = (1 << 16),\n\tMVS_IRQ_XOR_B                  = (1 << 17),\n\tMVS_IRQ_SAS_A                  = (1 << 18),\n\tMVS_IRQ_SAS_B                  = (1 << 19),\n\tMVS_IRQ_CPU_CNTRL              = (1 << 20),\n\tMVS_IRQ_GPIO                   = (1 << 21),\n\tMVS_IRQ_UART                   = (1 << 22),\n\tMVS_IRQ_SPI                    = (1 << 23),\n\tMVS_IRQ_I2C                    = (1 << 24),\n\tMVS_IRQ_SGPIO                  = (1 << 25),\n\tMVS_IRQ_COM_ERR                = (1 << 29),\n\tMVS_IRQ_I2O_ERR                = (1 << 30),\n\tMVS_IRQ_PCIE_ERR               = (1 << 31),\n};\n\nunion reg_phy_cfg {\n\tu32 v;\n\tstruct {\n\t\tu32 phy_reset:1;\n\t\tu32 sas_support:1;\n\t\tu32 sata_support:1;\n\t\tu32 sata_host_mode:1;\n\t\t \n\t\tu32 speed_support:3;\n\t\tu32 snw_3_support:1;\n\t\tu32 tx_lnk_parity:1;\n\t\t \n\t\tu32 tx_spt_phs_lnk_rate:6;\n\t\t \n\t\tu32 tx_lgcl_lnk_rate:4;\n\t\tu32 tx_ssc_type:1;\n\t\tu32 sata_spin_up_spt:1;\n\t\tu32 sata_spin_up_en:1;\n\t\tu32 bypass_oob:1;\n\t\tu32 disable_phy:1;\n\t\tu32 rsvd:8;\n\t} u;\n};\n\n#define MAX_SG_ENTRY\t\t255\n\nstruct mvs_prd_imt {\n#ifndef __BIG_ENDIAN\n\t__le32\t\t\tlen:22;\n\tu8\t\t\t_r_a:2;\n\tu8\t\t\tmisc_ctl:4;\n\tu8\t\t\tinter_sel:4;\n#else\n\tu32\t\t\tinter_sel:4;\n\tu32\t\t\tmisc_ctl:4;\n\tu32\t\t\t_r_a:2;\n\tu32\t\t\tlen:22;\n#endif\n};\n\nstruct mvs_prd {\n\t \n\t__le64\t\t\taddr;\n\t \n\t__le32\t\t\tim_len;\n} __attribute__ ((packed));\n\nenum sgpio_registers {\n\tMVS_SGPIO_HOST_OFFSET\t= 0x100,\t \n\n\tMVS_SGPIO_CFG0\t= 0xc200,\n\tMVS_SGPIO_CFG0_ENABLE\t= (1 << 0),\t \n\tMVS_SGPIO_CFG0_BLINKB\t= (1 << 1),\t \n\tMVS_SGPIO_CFG0_BLINKA\t= (1 << 2),\n\tMVS_SGPIO_CFG0_INVSCLK\t= (1 << 3),\t \n\tMVS_SGPIO_CFG0_INVSLOAD\t= (1 << 4),\n\tMVS_SGPIO_CFG0_INVSDOUT\t= (1 << 5),\n\tMVS_SGPIO_CFG0_SLOAD_FALLEDGE = (1 << 6),\t \n\tMVS_SGPIO_CFG0_SDOUT_FALLEDGE = (1 << 7),\n\tMVS_SGPIO_CFG0_SDIN_RISEEDGE = (1 << 8),\n\tMVS_SGPIO_CFG0_MAN_BITLEN_SHIFT = 18,\t \n\tMVS_SGPIO_CFG0_AUT_BITLEN_SHIFT = 24,\t \n\n\tMVS_SGPIO_CFG1\t= 0xc204,\t \n\tMVS_SGPIO_CFG1_LOWA_SHIFT\t= 0,\t \n\tMVS_SGPIO_CFG1_HIA_SHIFT\t= 4,\t \n\tMVS_SGPIO_CFG1_LOWB_SHIFT\t= 8,\t \n\tMVS_SGPIO_CFG1_HIB_SHIFT\t= 12,\t \n\tMVS_SGPIO_CFG1_MAXACTON_SHIFT\t= 16,\t \n\n\t\t \n\tMVS_SGPIO_CFG1_FORCEACTOFF_SHIFT\t= 20,\n\t\t \n\tMVS_SGPIO_CFG1_STRCHACTON_SHIFT\t= 24,\n\t\t \n\tMVS_SGPIO_CFG1_STRCHACTOFF_SHIFT\t= 28,\n\n\n\tMVS_SGPIO_CFG2\t= 0xc208,\t \n\tMVS_SGPIO_CFG2_CLK_SHIFT\t= 0,\n\tMVS_SGPIO_CFG2_BLINK_SHIFT\t= 20,\n\n\tMVS_SGPIO_CTRL\t= 0xc20c,\t \n\tMVS_SGPIO_CTRL_SDOUT_AUTO\t= 2,\n\tMVS_SGPIO_CTRL_SDOUT_SHIFT\t= 2,\n\n\tMVS_SGPIO_DSRC\t= 0xc220,\t \n\n\tMVS_SGPIO_DCTRL\t= 0xc238,\n\tMVS_SGPIO_DCTRL_ERR_SHIFT\t= 0,\n\tMVS_SGPIO_DCTRL_LOC_SHIFT\t= 3,\n\tMVS_SGPIO_DCTRL_ACT_SHIFT\t= 5,\n};\n\nenum sgpio_led_status {\n\tLED_OFF\t= 0,\n\tLED_ON\t= 1,\n\tLED_BLINKA\t= 2,\n\tLED_BLINKA_INV\t= 3,\n\tLED_BLINKA_SOF\t= 4,\n\tLED_BLINKA_EOF\t= 5,\n\tLED_BLINKB\t= 6,\n\tLED_BLINKB_INV\t= 7,\n};\n\n#define DEFAULT_SGPIO_BITS ((LED_BLINKA_SOF << \\\n\t\t\t\tMVS_SGPIO_DCTRL_ACT_SHIFT) << (8 * 3) | \\\n\t\t\t(LED_BLINKA_SOF << \\\n\t\t\t\tMVS_SGPIO_DCTRL_ACT_SHIFT) << (8 * 2) | \\\n\t\t\t(LED_BLINKA_SOF << \\\n\t\t\t\tMVS_SGPIO_DCTRL_ACT_SHIFT) << (8 * 1) | \\\n\t\t\t(LED_BLINKA_SOF << \\\n\t\t\t\tMVS_SGPIO_DCTRL_ACT_SHIFT) << (8 * 0))\n\n \nenum sas_sata_phy_regs {\n\tGENERATION_1_SETTING\t\t= 0x118,\n\tGENERATION_1_2_SETTING\t\t= 0x11C,\n\tGENERATION_2_3_SETTING\t\t= 0x120,\n\tGENERATION_3_4_SETTING\t\t= 0x124,\n};\n\n#define SPI_CTRL_REG_94XX           \t0xc800\n#define SPI_ADDR_REG_94XX            \t0xc804\n#define SPI_WR_DATA_REG_94XX         0xc808\n#define SPI_RD_DATA_REG_94XX         \t0xc80c\n#define SPI_CTRL_READ_94XX         \t(1U << 2)\n#define SPI_ADDR_VLD_94XX         \t(1U << 1)\n#define SPI_CTRL_SpiStart_94XX     \t(1U << 0)\n\nstatic inline int\nmv_ffc64(u64 v)\n{\n\tu64 x = ~v;\n\treturn x ? __ffs64(x) : -1;\n}\n\n#define r_reg_set_enable(i) \\\n\t(((i) > 31) ? mr32(MVS_STP_REG_SET_1) : \\\n\tmr32(MVS_STP_REG_SET_0))\n\n#define w_reg_set_enable(i, tmp) \\\n\t(((i) > 31) ? mw32(MVS_STP_REG_SET_1, tmp) : \\\n\tmw32(MVS_STP_REG_SET_0, tmp))\n\nextern const struct mvs_dispatch mvs_94xx_dispatch;\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}