{
  "module_name": "st.h",
  "hash_id": "91b916dd9841f0c457c2de8f400453d7624245316e281f0fa0a76374509b05f5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/st.h",
  "human_readable_source": " \n\n#ifndef _ST_H\n#define _ST_H\n\n#include <linux/completion.h>\n#include <linux/mutex.h>\n#include <linux/kref.h>\n#include <scsi/scsi_cmnd.h>\n\n \nstruct st_cmdstatus {\n\tint midlevel_result;\n\tstruct scsi_sense_hdr sense_hdr;\n\tint have_sense;\n\tint residual;\n\tu64 uremainder64;\n\tu8 flags;\n\tu8 remainder_valid;\n\tu8 fixed_format;\n\tu8 deferred;\n};\n\nstruct scsi_tape;\n\n \nstruct st_request {\n\tunsigned char cmd[MAX_COMMAND_SIZE];\n\tunsigned char sense[SCSI_SENSE_BUFFERSIZE];\n\tint result;\n\tstruct scsi_tape *stp;\n\tstruct completion *waiting;\n\tstruct bio *bio;\n};\n\n \nstruct st_buffer {\n\tunsigned char cleared;   \n\tunsigned short do_dio;   \n\tint buffer_size;\n\tint buffer_blocks;\n\tint buffer_bytes;\n\tint read_pointer;\n\tint writing;\n\tint syscall_result;\n\tstruct st_request *last_SRpnt;\n\tstruct st_cmdstatus cmdstat;\n\tstruct page **reserved_pages;\n\tint reserved_page_order;\n\tstruct page **mapped_pages;\n\tstruct rq_map_data map_data;\n\tunsigned char *b_data;\n\tunsigned short use_sg;\t \n\tunsigned short sg_segs;\t\t \n\tunsigned short frp_segs;\t \n};\n\n \nstruct st_modedef {\n\tunsigned char defined;\n\tunsigned char sysv;\t \n\tunsigned char do_async_writes;\n\tunsigned char do_buffer_writes;\n\tunsigned char do_read_ahead;\n\tunsigned char defaults_for_writes;\n\tunsigned char default_compression;\t \n\tshort default_density;\t \n\tint default_blksize;\t \n\tstruct scsi_tape *tape;\n\tstruct device *devs[2];   \n\tstruct cdev *cdevs[2];   \n};\n\n \n#define ST_NBR_MODE_BITS 2\n#define ST_NBR_MODES (1 << ST_NBR_MODE_BITS)\n#define ST_MODE_SHIFT (7 - ST_NBR_MODE_BITS)\n#define ST_MODE_MASK ((ST_NBR_MODES - 1) << ST_MODE_SHIFT)\n\n#define ST_MAX_TAPES (1 << (20 - (ST_NBR_MODE_BITS + 1)))\n#define ST_MAX_TAPE_ENTRIES  (ST_MAX_TAPES << (ST_NBR_MODE_BITS + 1))\n\n \nstruct st_partstat {\n\tunsigned char rw;\n\tunsigned char eof;\n\tunsigned char at_sm;\n\tunsigned char last_block_valid;\n\tu32 last_block_visited;\n\tint drv_block;\t\t \n\tint drv_file;\n};\n\n \nstruct scsi_tape_stats {\n\tatomic64_t read_byte_cnt;   \n\tatomic64_t write_byte_cnt;  \n\tatomic64_t in_flight;       \n\tatomic64_t read_cnt;        \n\tatomic64_t write_cnt;       \n\tatomic64_t other_cnt;       \n\tatomic64_t resid_cnt;       \n\tatomic64_t tot_read_time;   \n\tatomic64_t tot_write_time;  \n\tatomic64_t tot_io_time;     \n\tktime_t read_time;          \n\tktime_t write_time;         \n\tktime_t other_time;         \n\tatomic_t last_read_size;    \n\tatomic_t last_write_size;   \n};\n\n#define ST_NBR_PARTITIONS 4\n\n \nstruct scsi_tape {\n\tstruct scsi_device *device;\n\tstruct mutex lock;\t \n\tstruct completion wait;\t \n\tstruct st_buffer *buffer;\n\tint index;\n\n\t \n\tunsigned char omit_blklims;\n\tunsigned char do_auto_lock;\n\tunsigned char can_bsr;\n\tunsigned char can_partitions;\n\tunsigned char two_fm;\n\tunsigned char fast_mteom;\n\tunsigned char immediate;\n\tunsigned char scsi2_logical;\n\tunsigned char default_drvbuffer;\t \n\tunsigned char cln_mode;\t\t\t \n\tunsigned char cln_sense_value;\n\tunsigned char cln_sense_mask;\n\tunsigned char use_pf;\t\t\t \n\tunsigned char try_dio;\t\t\t \n\tunsigned char try_dio_now;\t\t \n\tunsigned char c_algo;\t\t\t \n\tunsigned char pos_unknown;\t\t\t \n\tunsigned char sili;\t\t\t \n\tunsigned char immediate_filemark;\t \n\tint tape_type;\n\tint long_timeout;\t \n\n\t \n\tstruct st_modedef modes[ST_NBR_MODES];\n\tint current_mode;\n\n\t \n\tint partition;\n\tint new_partition;\n\tint nbr_partitions;\t \n\tstruct st_partstat ps[ST_NBR_PARTITIONS];\n\tunsigned char dirty;\n\tunsigned char ready;\n\tunsigned char write_prot;\n\tunsigned char drv_write_prot;\n\tunsigned char in_use;\n\tunsigned char blksize_changed;\n\tunsigned char density_changed;\n\tunsigned char compression_changed;\n\tunsigned char drv_buffer;\n\tunsigned char density;\n\tunsigned char door_locked;\n\tunsigned char autorew_dev;    \n\tunsigned char rew_at_close;   \n\tunsigned char inited;\n\tunsigned char cleaning_req;   \n\tint block_size;\n\tint min_block;\n\tint max_block;\n\tint recover_count;      \n\tint recover_reg;        \n\n#if DEBUG\n\tunsigned char write_pending;\n\tint nbr_finished;\n\tint nbr_waits;\n\tint nbr_requests;\n\tint nbr_dio;\n\tint nbr_pages;\n\tunsigned char last_cmnd[6];\n\tunsigned char last_sense[16];\n#endif\n\tchar name[DISK_NAME_LEN];\n\tstruct kref     kref;\n\tstruct scsi_tape_stats *stats;\n};\n\n \n#define USE_PF      1\n#define PF_TESTED   2\n\n \n#define\tST_NOEOF\t0\n#define ST_FM_HIT       1\n#define ST_FM           2\n#define ST_EOM_OK       3\n#define ST_EOM_ERROR\t4\n#define\tST_EOD_1        5\n#define ST_EOD_2        6\n#define ST_EOD\t\t7\n \n \n\n \n#define\tST_IDLE\t\t0\n#define\tST_READING\t1\n#define\tST_WRITING\t2\n\n \n#define ST_READY\t0\n#define ST_NOT_READY\t1\n#define ST_NO_TAPE\t2\n\n \n#define ST_UNLOCKED\t0\n#define ST_LOCKED_EXPLICIT 1\n#define ST_LOCKED_AUTO  2\n#define ST_LOCK_FAILS   3\n\n \n#define\tQFA_REQUEST_BLOCK\t0x02\n#define\tQFA_SEEK_BLOCK\t\t0x0c\n\n \n#define ST_DONT_TOUCH  0\n#define ST_NO          1\n#define ST_YES         2\n\n#define EXTENDED_SENSE_START  18\n\n \n#define SENSE_FMK   0x80\n#define SENSE_EOM   0x40\n#define SENSE_ILI   0x20\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}