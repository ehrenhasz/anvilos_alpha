{
  "module_name": "lpfc_sli4.h",
  "hash_id": "f5ca8b8202ecddf5ec7c47b0b22e9f346b8782f5bd1a9fe98e372c0cf686d1d9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/lpfc/lpfc_sli4.h",
  "human_readable_source": " \n\n#include <linux/irq_poll.h>\n#include <linux/cpufreq.h>\n\n#if defined(CONFIG_DEBUG_FS) && !defined(CONFIG_SCSI_LPFC_DEBUG_FS)\n#define CONFIG_SCSI_LPFC_DEBUG_FS\n#endif\n\n#define LPFC_ACTIVE_MBOX_WAIT_CNT               100\n#define LPFC_XRI_EXCH_BUSY_WAIT_TMO\t\t10000\n#define LPFC_XRI_EXCH_BUSY_WAIT_T1   \t\t10\n#define LPFC_XRI_EXCH_BUSY_WAIT_T2              30000\n#define LPFC_RPI_LOW_WATER_MARK\t\t\t10\n\n#define LPFC_UNREG_FCF                          1\n#define LPFC_SKIP_UNREG_FCF                     0\n\n \n#define LPFC_FCF_REDISCOVER_WAIT_TMO\t\t2000  \n\n \n#define LPFC_NEMBED_MBOX_SGL_CNT\t\t254\n\n \n#define LPFC_HBA_HDWQ_MIN\t0\n#define LPFC_HBA_HDWQ_MAX\t256\n#define LPFC_HBA_HDWQ_DEF\tLPFC_HBA_HDWQ_MIN\n\n \n#define LPFC_IRQ_CHANN_MIN\t0\n#define LPFC_IRQ_CHANN_MAX\t256\n#define LPFC_IRQ_CHANN_DEF\tLPFC_IRQ_CHANN_MIN\n\n \n#define LPFC_FCP_MQ_THRESHOLD_MIN\t0\n#define LPFC_FCP_MQ_THRESHOLD_MAX\t256\n#define LPFC_FCP_MQ_THRESHOLD_DEF\t8\n\n \n#define LPFC_FCOE_FCF_DEF_INDEX\t0\n#define LPFC_FCOE_FCF_GET_FIRST\t0xFFFF\n#define LPFC_FCOE_FCF_NEXT_NONE\t0xFFFF\n\n#define LPFC_FCOE_NULL_VID\t0xFFF\n#define LPFC_FCOE_IGNORE_VID\t0xFFFF\n\n \n#define LPFC_FCOE_FCF_MAC3\t0xFF\n#define LPFC_FCOE_FCF_MAC4\t0xFF\n#define LPFC_FCOE_FCF_MAC5\t0xFE\n#define LPFC_FCOE_FCF_MAP0\t0x0E\n#define LPFC_FCOE_FCF_MAP1\t0xFC\n#define LPFC_FCOE_FCF_MAP2\t0x00\n#define LPFC_FCOE_MAX_RCV_SIZE\t0x800\n#define LPFC_FCOE_FKA_ADV_PER\t0\n#define LPFC_FCOE_FIP_PRIORITY\t0x80\n\n#define sli4_sid_from_fc_hdr(fc_hdr)  \\\n\t((fc_hdr)->fh_s_id[0] << 16 | \\\n\t (fc_hdr)->fh_s_id[1] <<  8 | \\\n\t (fc_hdr)->fh_s_id[2])\n\n#define sli4_did_from_fc_hdr(fc_hdr)  \\\n\t((fc_hdr)->fh_d_id[0] << 16 | \\\n\t (fc_hdr)->fh_d_id[1] <<  8 | \\\n\t (fc_hdr)->fh_d_id[2])\n\n#define sli4_fctl_from_fc_hdr(fc_hdr)  \\\n\t((fc_hdr)->fh_f_ctl[0] << 16 | \\\n\t (fc_hdr)->fh_f_ctl[1] <<  8 | \\\n\t (fc_hdr)->fh_f_ctl[2])\n\n#define sli4_type_from_fc_hdr(fc_hdr)  \\\n\t((fc_hdr)->fh_type)\n\n#define LPFC_FW_RESET_MAXIMUM_WAIT_10MS_CNT 12000\n\n#define INT_FW_UPGRADE\t0\n#define RUN_FW_UPGRADE\t1\n\nenum lpfc_sli4_queue_type {\n\tLPFC_EQ,\n\tLPFC_GCQ,\n\tLPFC_MCQ,\n\tLPFC_WCQ,\n\tLPFC_RCQ,\n\tLPFC_MQ,\n\tLPFC_WQ,\n\tLPFC_HRQ,\n\tLPFC_DRQ\n};\n\n \nenum lpfc_sli4_queue_subtype {\n\tLPFC_NONE,\n\tLPFC_MBOX,\n\tLPFC_IO,\n\tLPFC_ELS,\n\tLPFC_NVMET,\n\tLPFC_NVME_LS,\n\tLPFC_USOL\n};\n\n \nstruct lpfc_rqb {\n\tuint16_t entry_count;\t   \n\tuint16_t buffer_count;\t   \n\tstruct list_head rqb_buffer_list;   \n\t\t\t\t   \n\tstruct rqb_dmabuf *(*rqb_alloc_buffer)(struct lpfc_hba *);\n\t\t\t\t   \n\tvoid               (*rqb_free_buffer)(struct lpfc_hba *,\n\t\t\t\t\t       struct rqb_dmabuf *);\n};\n\nenum lpfc_poll_mode {\n\tLPFC_QUEUE_WORK,\n\tLPFC_THREADED_IRQ,\n};\n\nstruct lpfc_idle_stat {\n\tu64 prev_idle;\n\tu64 prev_wall;\n};\n\nstruct lpfc_queue {\n\tstruct list_head list;\n\tstruct list_head wq_list;\n\n\t \n\tuint16_t last_cpu;\t \n\tuint16_t hdwq;\n\tuint8_t\t qe_valid;\n\tuint8_t  mode;\t \n#define LPFC_EQ_INTERRUPT\t0\n#define LPFC_EQ_POLL\t\t1\n\n\tstruct list_head wqfull_list;\n\tenum lpfc_sli4_queue_type type;\n\tenum lpfc_sli4_queue_subtype subtype;\n\tstruct lpfc_hba *phba;\n\tstruct list_head child_list;\n\tstruct list_head page_list;\n\tstruct list_head sgl_list;\n\tstruct list_head cpu_list;\n\tuint32_t entry_count;\t \n\tuint32_t entry_size;\t \n\tuint32_t entry_cnt_per_pg;\n\tuint32_t notify_interval;  \n#define LPFC_EQ_NOTIFY_INTRVL\t16\n#define LPFC_CQ_NOTIFY_INTRVL\t16\n#define LPFC_WQ_NOTIFY_INTRVL\t16\n#define LPFC_RQ_NOTIFY_INTRVL\t16\n\tuint32_t max_proc_limit;  \n#define LPFC_EQ_MAX_PROC_LIMIT\t\t256\n#define LPFC_CQ_MIN_PROC_LIMIT\t\t64\n#define LPFC_CQ_MAX_PROC_LIMIT\t\tLPFC_CQE_EXP_COUNT\t\n#define LPFC_CQ_DEF_MAX_PROC_LIMIT\tLPFC_CQE_DEF_COUNT\t\n#define LPFC_CQ_MIN_THRESHOLD_TO_POLL\t64\n#define LPFC_CQ_MAX_THRESHOLD_TO_POLL\tLPFC_CQ_DEF_MAX_PROC_LIMIT\n#define LPFC_CQ_DEF_THRESHOLD_TO_POLL\tLPFC_CQ_DEF_MAX_PROC_LIMIT\n\tuint32_t queue_claimed;  \n\tuint32_t queue_id;\t \n\tuint32_t assoc_qid;      \n\tuint32_t host_index;\t \n\tuint32_t hba_index;\t \n\tuint32_t q_mode;\n\n\tstruct lpfc_sli_ring *pring;  \n\tstruct lpfc_rqb *rqbp;\t \n\n\tuint16_t page_count;\t \n\tuint16_t page_size;\t \n#define LPFC_EXPANDED_PAGE_SIZE\t16384\n#define LPFC_DEFAULT_PAGE_SIZE\t4096\n\tuint16_t chann;\t\t \n\t\t\t\t \n#define LPFC_FIND_BY_EQ\t\t0\n#define LPFC_FIND_BY_HDWQ\t1\n\tuint8_t db_format;\n#define LPFC_DB_RING_FORMAT\t0x01\n#define LPFC_DB_LIST_FORMAT\t0x02\n\tuint8_t q_flag;\n#define HBA_NVMET_WQFULL\t0x1  \n#define HBA_NVMET_CQ_NOTIFY\t0x1  \n#define HBA_EQ_DELAY_CHK\t0x2  \n#define LPFC_NVMET_CQ_NOTIFY\t4\n\tvoid __iomem *db_regaddr;\n\tuint16_t dpp_enable;\n\tuint16_t dpp_id;\n\tvoid __iomem *dpp_regaddr;\n\n\t \n\tuint32_t q_cnt_1;\n\tuint32_t q_cnt_2;\n\tuint32_t q_cnt_3;\n\tuint64_t q_cnt_4;\n \n#define\tEQ_max_eqe\t\tq_cnt_1\n#define\tEQ_no_entry\t\tq_cnt_2\n#define\tEQ_cqe_cnt\t\tq_cnt_3\n#define\tEQ_processed\t\tq_cnt_4\n\n \n#define\tCQ_mbox\t\t\tq_cnt_1\n#define\tCQ_max_cqe\t\tq_cnt_1\n#define\tCQ_release_wqe\t\tq_cnt_2\n#define\tCQ_xri_aborted\t\tq_cnt_3\n#define\tCQ_wq\t\t\tq_cnt_4\n\n \n#define\tWQ_overflow\t\tq_cnt_1\n#define\tWQ_posted\t\tq_cnt_4\n\n \n#define\tRQ_no_posted_buf\tq_cnt_1\n#define\tRQ_no_buf_found\t\tq_cnt_2\n#define\tRQ_buf_posted\t\tq_cnt_3\n#define\tRQ_rcv_buf\t\tq_cnt_4\n\n\tstruct work_struct\tirqwork;\n\tstruct work_struct\tspwork;\n\tstruct delayed_work\tsched_irqwork;\n\tstruct delayed_work\tsched_spwork;\n\n\tuint64_t isr_timestamp;\n\tstruct lpfc_queue *assoc_qp;\n\tstruct list_head _poll_list;\n\tvoid **q_pgs;\t \n\n\tenum lpfc_poll_mode poll_mode;\n};\n\nstruct lpfc_sli4_link {\n\tuint32_t speed;\n\tuint8_t duplex;\n\tuint8_t status;\n\tuint8_t type;\n\tuint8_t number;\n\tuint8_t fault;\n\tuint8_t link_status;\n\tuint16_t topology;\n\tuint32_t logical_speed;\n};\n\nstruct lpfc_fcf_rec {\n\tuint8_t  fabric_name[8];\n\tuint8_t  switch_name[8];\n\tuint8_t  mac_addr[6];\n\tuint16_t fcf_indx;\n\tuint32_t priority;\n\tuint16_t vlan_id;\n\tuint32_t addr_mode;\n\tuint32_t flag;\n#define BOOT_ENABLE\t0x01\n#define RECORD_VALID\t0x02\n};\n\nstruct lpfc_fcf_pri_rec {\n\tuint16_t fcf_index;\n#define LPFC_FCF_ON_PRI_LIST 0x0001\n#define LPFC_FCF_FLOGI_FAILED 0x0002\n\tuint16_t flag;\n\tuint32_t priority;\n};\n\nstruct lpfc_fcf_pri {\n\tstruct list_head list;\n\tstruct lpfc_fcf_pri_rec fcf_rec;\n};\n\n \n#define LPFC_SLI4_FCF_TBL_INDX_MAX\t32\n\nstruct lpfc_fcf {\n\tuint16_t fcfi;\n\tuint32_t fcf_flag;\n#define FCF_AVAILABLE\t0x01  \n#define FCF_REGISTERED\t0x02  \n#define FCF_SCAN_DONE\t0x04  \n#define FCF_IN_USE\t0x08  \n#define FCF_INIT_DISC\t0x10  \n#define FCF_DEAD_DISC\t0x20  \n#define FCF_ACVL_DISC\t0x40  \n#define FCF_DISCOVERY\t(FCF_INIT_DISC | FCF_DEAD_DISC | FCF_ACVL_DISC)\n#define FCF_REDISC_PEND\t0x80  \n#define FCF_REDISC_EVT\t0x100  \n#define FCF_REDISC_FOV\t0x200  \n#define FCF_REDISC_PROG (FCF_REDISC_PEND | FCF_REDISC_EVT)\n\tuint16_t fcf_redisc_attempted;\n\tuint32_t addr_mode;\n\tuint32_t eligible_fcf_cnt;\n\tstruct lpfc_fcf_rec current_rec;\n\tstruct lpfc_fcf_rec failover_rec;\n\tstruct list_head fcf_pri_list;\n\tstruct lpfc_fcf_pri fcf_pri[LPFC_SLI4_FCF_TBL_INDX_MAX];\n\tuint32_t current_fcf_scan_pri;\n\tstruct timer_list redisc_wait;\n\tunsigned long *fcf_rr_bmask;  \n};\n\n\n#define LPFC_REGION23_SIGNATURE \"RG23\"\n#define LPFC_REGION23_VERSION\t1\n#define LPFC_REGION23_LAST_REC  0xff\n#define DRIVER_SPECIFIC_TYPE\t0xA2\n#define LINUX_DRIVER_ID\t\t0x20\n#define PORT_STE_TYPE\t\t0x1\n\nstruct lpfc_fip_param_hdr {\n\tuint8_t type;\n#define FCOE_PARAM_TYPE\t\t0xA0\n\tuint8_t length;\n#define FCOE_PARAM_LENGTH\t2\n\tuint8_t parm_version;\n#define FIPP_VERSION\t\t0x01\n\tuint8_t parm_flags;\n#define\tlpfc_fip_param_hdr_fipp_mode_SHIFT\t6\n#define\tlpfc_fip_param_hdr_fipp_mode_MASK\t0x3\n#define lpfc_fip_param_hdr_fipp_mode_WORD\tparm_flags\n#define\tFIPP_MODE_ON\t\t\t\t0x1\n#define\tFIPP_MODE_OFF\t\t\t\t0x0\n#define FIPP_VLAN_VALID\t\t\t\t0x1\n};\n\nstruct lpfc_fcoe_params {\n\tuint8_t fc_map[3];\n\tuint8_t reserved1;\n\tuint16_t vlan_tag;\n\tuint8_t reserved[2];\n};\n\nstruct lpfc_fcf_conn_hdr {\n\tuint8_t type;\n#define FCOE_CONN_TBL_TYPE\t\t0xA1\n\tuint8_t length;    \n\tuint8_t reserved[2];\n};\n\nstruct lpfc_fcf_conn_rec {\n\tuint16_t flags;\n#define\tFCFCNCT_VALID\t\t0x0001\n#define\tFCFCNCT_BOOT\t\t0x0002\n#define\tFCFCNCT_PRIMARY\t\t0x0004    \n#define\tFCFCNCT_FBNM_VALID\t0x0008\n#define\tFCFCNCT_SWNM_VALID\t0x0010\n#define\tFCFCNCT_VLAN_VALID\t0x0020\n#define\tFCFCNCT_AM_VALID\t0x0040\n#define\tFCFCNCT_AM_PREFERRED\t0x0080    \n#define\tFCFCNCT_AM_SPMA\t\t0x0100\t  \n\n\tuint16_t vlan_tag;\n\tuint8_t fabric_name[8];\n\tuint8_t switch_name[8];\n};\n\nstruct lpfc_fcf_conn_entry {\n\tstruct list_head list;\n\tstruct lpfc_fcf_conn_rec conn_rec;\n};\n\n \nstruct lpfc_bmbx {\n\tstruct lpfc_dmabuf *dmabuf;\n\tstruct dma_address dma_address;\n\tvoid *avirt;\n\tdma_addr_t aphys;\n\tuint32_t bmbx_size;\n};\n\n#define LPFC_EQE_SIZE LPFC_EQE_SIZE_4\n\n#define LPFC_EQE_SIZE_4B \t4\n#define LPFC_EQE_SIZE_16B\t16\n#define LPFC_CQE_SIZE\t\t16\n#define LPFC_WQE_SIZE\t\t64\n#define LPFC_WQE128_SIZE\t128\n#define LPFC_MQE_SIZE\t\t256\n#define LPFC_RQE_SIZE\t\t8\n\n#define LPFC_EQE_DEF_COUNT\t1024\n#define LPFC_CQE_DEF_COUNT      1024\n#define LPFC_CQE_EXP_COUNT      4096\n#define LPFC_WQE_DEF_COUNT      256\n#define LPFC_WQE_EXP_COUNT      1024\n#define LPFC_MQE_DEF_COUNT      16\n#define LPFC_RQE_DEF_COUNT\t512\n\n#define LPFC_QUEUE_NOARM\tfalse\n#define LPFC_QUEUE_REARM\ttrue\n\n\n \n#define SLI4_CT_RPI 0\n#define SLI4_CT_VPI 1\n#define SLI4_CT_VFI 2\n#define SLI4_CT_FCFI 3\n\n \nstruct lpfc_max_cfg_param {\n\tuint16_t max_xri;\n\tuint16_t xri_base;\n\tuint16_t xri_used;\n\tuint16_t max_rpi;\n\tuint16_t rpi_base;\n\tuint16_t rpi_used;\n\tuint16_t max_vpi;\n\tuint16_t vpi_base;\n\tuint16_t vpi_used;\n\tuint16_t max_vfi;\n\tuint16_t vfi_base;\n\tuint16_t vfi_used;\n\tuint16_t max_fcfi;\n\tuint16_t fcfi_used;\n\tuint16_t max_eq;\n\tuint16_t max_rq;\n\tuint16_t max_cq;\n\tuint16_t max_wq;\n};\n\nstruct lpfc_hba;\n \n#define LPFC_SLI4_HANDLER_NAME_SZ\t16\nstruct lpfc_hba_eq_hdl {\n\tuint32_t idx;\n\tint irq;\n\tchar handler_name[LPFC_SLI4_HANDLER_NAME_SZ];\n\tstruct lpfc_hba *phba;\n\tstruct lpfc_queue *eq;\n\tstruct cpumask aff_mask;\n};\n\n#define lpfc_get_eq_hdl(eqidx) (&phba->sli4_hba.hba_eq_hdl[eqidx])\n#define lpfc_get_aff_mask(eqidx) (&phba->sli4_hba.hba_eq_hdl[eqidx].aff_mask)\n#define lpfc_get_irq(eqidx) (phba->sli4_hba.hba_eq_hdl[eqidx].irq)\n\n \nstruct lpfc_bbscn_params {\n\tuint32_t word0;\n#define lpfc_bbscn_min_SHIFT\t\t0\n#define lpfc_bbscn_min_MASK\t\t0x0000000F\n#define lpfc_bbscn_min_WORD\t\tword0\n#define lpfc_bbscn_max_SHIFT\t\t4\n#define lpfc_bbscn_max_MASK\t\t0x0000000F\n#define lpfc_bbscn_max_WORD\t\tword0\n#define lpfc_bbscn_def_SHIFT\t\t8\n#define lpfc_bbscn_def_MASK\t\t0x0000000F\n#define lpfc_bbscn_def_WORD\t\tword0\n};\n\n \nstruct lpfc_pc_sli4_params {\n\tuint32_t supported;\n\tuint32_t if_type;\n\tuint32_t sli_rev;\n\tuint32_t sli_family;\n\tuint32_t featurelevel_1;\n\tuint32_t featurelevel_2;\n\tuint32_t proto_types;\n#define LPFC_SLI4_PROTO_FCOE\t0x0000001\n#define LPFC_SLI4_PROTO_FC\t0x0000002\n#define LPFC_SLI4_PROTO_NIC\t0x0000004\n#define LPFC_SLI4_PROTO_ISCSI\t0x0000008\n#define LPFC_SLI4_PROTO_RDMA\t0x0000010\n\tuint32_t sge_supp_len;\n\tuint32_t if_page_sz;\n\tuint32_t rq_db_window;\n\tuint32_t loopbk_scope;\n\tuint32_t oas_supported;\n\tuint32_t eq_pages_max;\n\tuint32_t eqe_size;\n\tuint32_t cq_pages_max;\n\tuint32_t cqe_size;\n\tuint32_t mq_pages_max;\n\tuint32_t mqe_size;\n\tuint32_t mq_elem_cnt;\n\tuint32_t wq_pages_max;\n\tuint32_t wqe_size;\n\tuint32_t rq_pages_max;\n\tuint32_t rqe_size;\n\tuint32_t hdr_pages_max;\n\tuint32_t hdr_size;\n\tuint32_t hdr_pp_align;\n\tuint32_t sgl_pages_max;\n\tuint32_t sgl_pp_align;\n\tuint32_t mib_size;\n\tuint16_t mi_ver;\n#define LPFC_MIB1_SUPPORT\t1\n#define LPFC_MIB2_SUPPORT\t2\n#define LPFC_MIB3_SUPPORT\t3\n\tuint16_t mi_value;\n#define LPFC_DFLT_MIB_VAL\t2\n\tuint8_t mi_cap;\n\tuint8_t mib_bde_cnt;\n\tuint8_t cmf;\n\tuint8_t cqv;\n\tuint8_t mqv;\n\tuint8_t wqv;\n\tuint8_t rqv;\n\tuint8_t eqav;\n\tuint8_t cqav;\n\tuint8_t wqsize;\n\tuint8_t bv1s;\n\tuint8_t pls;\n#define LPFC_WQ_SZ64_SUPPORT\t1\n#define LPFC_WQ_SZ128_SUPPORT\t2\n\tuint8_t wqpcnt;\n\tuint8_t nvme;\n};\n\n#define LPFC_CQ_4K_PAGE_SZ\t0x1\n#define LPFC_CQ_16K_PAGE_SZ\t0x4\n#define LPFC_WQ_4K_PAGE_SZ\t0x1\n#define LPFC_WQ_16K_PAGE_SZ\t0x4\n\nstruct lpfc_iov {\n\tuint32_t pf_number;\n\tuint32_t vf_number;\n};\n\nstruct lpfc_sli4_lnk_info {\n\tuint8_t lnk_dv;\n#define LPFC_LNK_DAT_INVAL\t0\n#define LPFC_LNK_DAT_VAL\t1\n\tuint8_t lnk_tp;\n#define LPFC_LNK_GE\t\t0x0  \n#define LPFC_LNK_FC\t\t0x1  \n#define LPFC_LNK_FC_TRUNKED\t0x2  \n\tuint8_t lnk_no;\n\tuint8_t optic_state;\n};\n\n#define LPFC_SLI4_HANDLER_CNT\t\t(LPFC_HBA_IO_CHAN_MAX+ \\\n\t\t\t\t\t LPFC_FOF_IO_CHAN_NUM)\n\n \nstruct lpfc_vector_map_info {\n\tuint16_t\tphys_id;\n\tuint16_t\tcore_id;\n\tuint16_t\teq;\n\tuint16_t\thdwq;\n\tuint16_t\tflag;\n#define LPFC_CPU_MAP_HYPER\t0x1\n#define LPFC_CPU_MAP_UNASSIGN\t0x2\n#define LPFC_CPU_FIRST_IRQ\t0x4\n};\n#define LPFC_VECTOR_MAP_EMPTY\t0xffff\n\n#define LPFC_IRQ_EMPTY 0xffffffff\n\n \n#define XRI_BATCH               8\n\nstruct lpfc_pbl_pool {\n\tstruct list_head list;\n\tu32 count;\n\tspinlock_t lock;\t \n};\n\nstruct lpfc_pvt_pool {\n\tu32 low_watermark;\n\tu32 high_watermark;\n\n\tstruct list_head list;\n\tu32 count;\n\tspinlock_t lock;\t \n};\n\nstruct lpfc_multixri_pool {\n\tu32 xri_limit;\n\n\t \n\tu32 rrb_next_hwqid;\n\n\t \n\tu32 prev_io_req_count;\n\tu32 io_req_count;\n\n\t \n\tu32 pbl_empty_count;\n#ifdef LPFC_MXP_STAT\n\tu32 above_limit_count;\n\tu32 below_limit_count;\n\tu32 local_pbl_hit_count;\n\tu32 other_pbl_hit_count;\n\tu32 stat_max_hwm;\n\n#define LPFC_MXP_SNAPSHOT_TAKEN 3  \n\tu32 stat_pbl_count;\n\tu32 stat_pvt_count;\n\tu32 stat_busy_count;\n\tu32 stat_snapshot_taken;\n#endif\n\n\t \n\tstruct lpfc_pbl_pool pbl_pool;    \n\tstruct lpfc_pvt_pool pvt_pool;    \n};\n\nstruct lpfc_fc4_ctrl_stat {\n\tu32 input_requests;\n\tu32 output_requests;\n\tu32 control_requests;\n\tu32 io_cmpls;\n};\n\n#ifdef LPFC_HDWQ_LOCK_STAT\nstruct lpfc_lock_stat {\n\tuint32_t alloc_xri_get;\n\tuint32_t alloc_xri_put;\n\tuint32_t free_xri;\n\tuint32_t wq_access;\n\tuint32_t alloc_pvt_pool;\n\tuint32_t mv_from_pvt_pool;\n\tuint32_t mv_to_pub_pool;\n\tuint32_t mv_to_pvt_pool;\n\tuint32_t free_pub_pool;\n\tuint32_t free_pvt_pool;\n};\n#endif\n\nstruct lpfc_eq_intr_info {\n\tstruct list_head list;\n\tuint32_t icnt;\n};\n\n \nstruct lpfc_sli4_hdw_queue {\n\t \n\tstruct lpfc_queue *hba_eq;   \n\tstruct lpfc_queue *io_cq;    \n\tstruct lpfc_queue *io_wq;    \n\tuint16_t io_cq_map;\n\n\t \n\tspinlock_t io_buf_list_get_lock;   \n\tstruct list_head lpfc_io_buf_list_get;\n\tspinlock_t io_buf_list_put_lock;   \n\tstruct list_head lpfc_io_buf_list_put;\n\tspinlock_t abts_io_buf_list_lock;  \n\tstruct list_head lpfc_abts_io_buf_list;\n\tuint32_t total_io_bufs;\n\tuint32_t get_io_bufs;\n\tuint32_t put_io_bufs;\n\tuint32_t empty_io_bufs;\n\tuint32_t abts_scsi_io_bufs;\n\tuint32_t abts_nvme_io_bufs;\n\n\t \n\tstruct lpfc_multixri_pool *p_multixri_pool;\n\n\t \n\tstruct lpfc_fc4_ctrl_stat nvme_cstat;\n\tstruct lpfc_fc4_ctrl_stat scsi_cstat;\n#ifdef LPFC_HDWQ_LOCK_STAT\n\tstruct lpfc_lock_stat lock_conflict;\n#endif\n\n\t \n\tstruct list_head sgl_list;\n\tstruct list_head cmd_rsp_buf_list;\n\n\t \n\tspinlock_t hdwq_lock;\n};\n\n#ifdef LPFC_HDWQ_LOCK_STAT\n \n#define lpfc_qp_spin_lock_irqsave(lock, flag, qp, lstat) \\\n\t{ \\\n\tint only_once = 1; \\\n\twhile (spin_trylock_irqsave(lock, flag) == 0) { \\\n\t\tif (only_once) { \\\n\t\t\tonly_once = 0; \\\n\t\t\tqp->lock_conflict.lstat++; \\\n\t\t} \\\n\t} \\\n\t}\n#define lpfc_qp_spin_lock(lock, qp, lstat) \\\n\t{ \\\n\tint only_once = 1; \\\n\twhile (spin_trylock(lock) == 0) { \\\n\t\tif (only_once) { \\\n\t\t\tonly_once = 0; \\\n\t\t\tqp->lock_conflict.lstat++; \\\n\t\t} \\\n\t} \\\n\t}\n#else\n#define lpfc_qp_spin_lock_irqsave(lock, flag, qp, lstat) \\\n\tspin_lock_irqsave(lock, flag)\n#define lpfc_qp_spin_lock(lock, qp, lstat) spin_lock(lock)\n#endif\n\n#ifdef CONFIG_SCSI_LPFC_DEBUG_FS\nstruct lpfc_hdwq_stat {\n\tu32 hdwq_no;\n\tu32 rcv_io;\n\tu32 xmt_io;\n\tu32 cmpl_io;\n};\n#endif\n\nstruct lpfc_sli4_hba {\n\tvoid __iomem *conf_regs_memmap_p;  \n\tvoid __iomem *ctrl_regs_memmap_p;  \n\tvoid __iomem *drbl_regs_memmap_p;  \n\tvoid __iomem *dpp_regs_memmap_p;   \n\tunion {\n\t\tstruct {\n\t\t\t \n\t\t\tvoid __iomem *UERRLOregaddr;\n\t\t\tvoid __iomem *UERRHIregaddr;\n\t\t\tvoid __iomem *UEMASKLOregaddr;\n\t\t\tvoid __iomem *UEMASKHIregaddr;\n\t\t} if_type0;\n\t\tstruct {\n\t\t\t \n\t\t\tvoid __iomem *STATUSregaddr;\n\t\t\tvoid __iomem *CTRLregaddr;\n\t\t\tvoid __iomem *ERR1regaddr;\n#define SLIPORT_ERR1_REG_ERR_CODE_1\t\t0x1\n#define SLIPORT_ERR1_REG_ERR_CODE_2\t\t0x2\n\t\t\tvoid __iomem *ERR2regaddr;\n#define SLIPORT_ERR2_REG_FW_RESTART\t\t0x0\n#define SLIPORT_ERR2_REG_FUNC_PROVISON\t\t0x1\n#define SLIPORT_ERR2_REG_FORCED_DUMP\t\t0x2\n#define SLIPORT_ERR2_REG_FAILURE_EQ\t\t0x3\n#define SLIPORT_ERR2_REG_FAILURE_CQ\t\t0x4\n#define SLIPORT_ERR2_REG_FAILURE_BUS\t\t0x5\n#define SLIPORT_ERR2_REG_FAILURE_RQ\t\t0x6\n\t\t\tvoid __iomem *EQDregaddr;\n\t\t} if_type2;\n\t} u;\n\n\t \n\tvoid __iomem *PSMPHRregaddr;\n\n\t \n\tvoid __iomem *SLIINTFregaddr;\n\n\t \n\tvoid __iomem *ISRregaddr;\t \n\tvoid __iomem *IMRregaddr;\t \n\tvoid __iomem *ISCRregaddr;\t \n\t \n\tvoid __iomem *RQDBregaddr;\t \n\tvoid __iomem *WQDBregaddr;\t \n\tvoid __iomem *CQDBregaddr;\t \n\tvoid __iomem *EQDBregaddr;\t \n\tvoid __iomem *MQDBregaddr;\t \n\tvoid __iomem *BMBXregaddr;\t \n\n\tuint32_t ue_mask_lo;\n\tuint32_t ue_mask_hi;\n\tuint32_t ue_to_sr;\n\tuint32_t ue_to_rp;\n\tstruct lpfc_register sli_intf;\n\tstruct lpfc_pc_sli4_params pc_sli4_params;\n\tstruct lpfc_bbscn_params bbscn_params;\n\tstruct lpfc_hba_eq_hdl *hba_eq_hdl;  \n\n\tvoid (*sli4_eq_clr_intr)(struct lpfc_queue *q);\n\tvoid (*sli4_write_eq_db)(struct lpfc_hba *phba, struct lpfc_queue *eq,\n\t\t\t\tuint32_t count, bool arm);\n\tvoid (*sli4_write_cq_db)(struct lpfc_hba *phba, struct lpfc_queue *cq,\n\t\t\t\tuint32_t count, bool arm);\n\n\t \n\tstruct lpfc_sli4_hdw_queue *hdwq;\n\tstruct list_head lpfc_wq_list;\n\n\t \n\tstruct lpfc_queue **nvmet_cqset;  \n\tstruct lpfc_queue **nvmet_mrq_hdr;  \n\tstruct lpfc_queue **nvmet_mrq_data;  \n\n\tstruct lpfc_queue *mbx_cq;  \n\tstruct lpfc_queue *els_cq;  \n\tstruct lpfc_queue *nvmels_cq;  \n\tstruct lpfc_queue *mbx_wq;  \n\tstruct lpfc_queue *els_wq;  \n\tstruct lpfc_queue *nvmels_wq;  \n\tstruct lpfc_queue *hdr_rq;  \n\tstruct lpfc_queue *dat_rq;  \n\n\tstruct lpfc_name wwnn;\n\tstruct lpfc_name wwpn;\n\n\tuint32_t fw_func_mode;\t \n\tuint32_t ulp0_mode;\t \n\tuint32_t ulp1_mode;\t \n\n\t \n\tuint64_t oas_next_lun;\n\tuint8_t oas_next_tgt_wwpn[8];\n\tuint8_t oas_next_vpt_wwpn[8];\n\n\t \n\tint eq_esize;\n\tint eq_ecount;\n\tint cq_esize;\n\tint cq_ecount;\n\tint wq_esize;\n\tint wq_ecount;\n\tint mq_esize;\n\tint mq_ecount;\n\tint rq_esize;\n\tint rq_ecount;\n#define LPFC_SP_EQ_MAX_INTR_SEC         10000\n#define LPFC_FP_EQ_MAX_INTR_SEC         10000\n\n\tuint32_t intr_enable;\n\tstruct lpfc_bmbx bmbx;\n\tstruct lpfc_max_cfg_param max_cfg_param;\n\tuint16_t extents_in_use;  \n\tuint16_t rpi_hdrs_in_use;  \n\tuint16_t next_xri;  \n\tuint16_t next_rpi;\n\tuint16_t io_xri_max;\n\tuint16_t io_xri_cnt;\n\tuint16_t io_xri_start;\n\tuint16_t els_xri_cnt;\n\tuint16_t nvmet_xri_cnt;\n\tuint16_t nvmet_io_wait_cnt;\n\tuint16_t nvmet_io_wait_total;\n\tuint16_t cq_max;\n\tstruct lpfc_queue **cq_lookup;\n\tstruct list_head lpfc_els_sgl_list;\n\tstruct list_head lpfc_abts_els_sgl_list;\n\tspinlock_t abts_io_buf_list_lock;  \n\tstruct list_head lpfc_abts_io_buf_list;\n\tstruct list_head lpfc_nvmet_sgl_list;\n\tspinlock_t abts_nvmet_buf_list_lock;  \n\tstruct list_head lpfc_abts_nvmet_ctx_list;\n\tspinlock_t t_active_list_lock;  \n\tstruct list_head t_active_ctx_list;\n\tstruct list_head lpfc_nvmet_io_wait_list;\n\tstruct lpfc_nvmet_ctx_info *nvmet_ctx_info;\n\tstruct lpfc_sglq **lpfc_sglq_active_list;\n\tstruct list_head lpfc_rpi_hdr_list;\n\tunsigned long *rpi_bmask;\n\tuint16_t *rpi_ids;\n\tuint16_t rpi_count;\n\tstruct list_head lpfc_rpi_blk_list;\n\tunsigned long *xri_bmask;\n\tuint16_t *xri_ids;\n\tstruct list_head lpfc_xri_blk_list;\n\tunsigned long *vfi_bmask;\n\tuint16_t *vfi_ids;\n\tuint16_t vfi_count;\n\tstruct list_head lpfc_vfi_blk_list;\n\tstruct lpfc_sli4_flags sli4_flags;\n\tstruct list_head sp_queue_event;\n\tstruct list_head sp_cqe_event_pool;\n\tstruct list_head sp_asynce_work_queue;\n\tspinlock_t asynce_list_lock;  \n\tstruct list_head sp_els_xri_aborted_work_queue;\n\tspinlock_t els_xri_abrt_list_lock;  \n\tstruct list_head sp_unsol_work_queue;\n\tstruct lpfc_sli4_link link_state;\n\tstruct lpfc_sli4_lnk_info lnk_info;\n\tuint32_t pport_name_sta;\n#define LPFC_SLI4_PPNAME_NON\t0\n#define LPFC_SLI4_PPNAME_GET\t1\n\tstruct lpfc_iov iov;\n\tspinlock_t sgl_list_lock;  \n\tspinlock_t nvmet_io_wait_lock;  \n\tuint32_t physical_port;\n\n\t \n\tstruct lpfc_vector_map_info *cpu_map;\n\tuint16_t num_possible_cpu;\n\tuint16_t num_present_cpu;\n\tstruct cpumask irq_aff_mask;\n\tuint16_t curr_disp_cpu;\n\tstruct lpfc_eq_intr_info __percpu *eq_info;\n#ifdef CONFIG_SCSI_LPFC_DEBUG_FS\n\tstruct lpfc_hdwq_stat __percpu *c_stat;\n#endif\n\tstruct lpfc_idle_stat *idle_stat;\n\tuint32_t conf_trunk;\n#define lpfc_conf_trunk_port0_WORD\tconf_trunk\n#define lpfc_conf_trunk_port0_SHIFT\t0\n#define lpfc_conf_trunk_port0_MASK\t0x1\n#define lpfc_conf_trunk_port1_WORD\tconf_trunk\n#define lpfc_conf_trunk_port1_SHIFT\t1\n#define lpfc_conf_trunk_port1_MASK\t0x1\n#define lpfc_conf_trunk_port2_WORD\tconf_trunk\n#define lpfc_conf_trunk_port2_SHIFT\t2\n#define lpfc_conf_trunk_port2_MASK\t0x1\n#define lpfc_conf_trunk_port3_WORD\tconf_trunk\n#define lpfc_conf_trunk_port3_SHIFT\t3\n#define lpfc_conf_trunk_port3_MASK\t0x1\n#define lpfc_conf_trunk_port0_nd_WORD\tconf_trunk\n#define lpfc_conf_trunk_port0_nd_SHIFT\t4\n#define lpfc_conf_trunk_port0_nd_MASK\t0x1\n#define lpfc_conf_trunk_port1_nd_WORD\tconf_trunk\n#define lpfc_conf_trunk_port1_nd_SHIFT\t5\n#define lpfc_conf_trunk_port1_nd_MASK\t0x1\n#define lpfc_conf_trunk_port2_nd_WORD\tconf_trunk\n#define lpfc_conf_trunk_port2_nd_SHIFT\t6\n#define lpfc_conf_trunk_port2_nd_MASK\t0x1\n#define lpfc_conf_trunk_port3_nd_WORD\tconf_trunk\n#define lpfc_conf_trunk_port3_nd_SHIFT\t7\n#define lpfc_conf_trunk_port3_nd_MASK\t0x1\n\tuint8_t flash_id;\n\tuint8_t asic_rev;\n\tuint16_t fawwpn_flag;\t \n#define LPFC_FAWWPN_CONFIG\t0x1  \n#define LPFC_FAWWPN_FABRIC\t0x2  \n};\n\nenum lpfc_sge_type {\n\tGEN_BUFF_TYPE,\n\tSCSI_BUFF_TYPE,\n\tNVMET_BUFF_TYPE\n};\n\nenum lpfc_sgl_state {\n\tSGL_FREED,\n\tSGL_ALLOCATED,\n\tSGL_XRI_ABORTED\n};\n\nstruct lpfc_sglq {\n\t \n\tstruct list_head list;\n\tstruct list_head clist;\n\tenum lpfc_sge_type buff_type;  \n\tenum lpfc_sgl_state state;\n\tstruct lpfc_nodelist *ndlp;  \n\tuint16_t iotag;          \n\tuint16_t sli4_lxritag;   \n\tuint16_t sli4_xritag;    \n\tstruct sli4_sge *sgl;\t \n\tvoid *virt;\t\t \n\tdma_addr_t phys;\t \n};\n\nstruct lpfc_rpi_hdr {\n\tstruct list_head list;\n\tuint32_t len;\n\tstruct lpfc_dmabuf *dmabuf;\n\tuint32_t page_count;\n\tuint32_t start_rpi;\n\tuint16_t next_rpi;\n};\n\nstruct lpfc_rsrc_blks {\n\tstruct list_head list;\n\tuint16_t rsrc_start;\n\tuint16_t rsrc_size;\n\tuint16_t rsrc_used;\n};\n\nstruct lpfc_rdp_context {\n\tstruct lpfc_nodelist *ndlp;\n\tuint16_t ox_id;\n\tuint16_t rx_id;\n\tREAD_LNK_VAR link_stat;\n\tuint8_t page_a0[DMP_SFF_PAGE_A0_SIZE];\n\tuint8_t page_a2[DMP_SFF_PAGE_A2_SIZE];\n\tvoid (*cmpl)(struct lpfc_hba *, struct lpfc_rdp_context*, int);\n};\n\nstruct lpfc_lcb_context {\n\tuint8_t  sub_command;\n\tuint8_t  type;\n\tuint8_t  capability;\n\tuint8_t  frequency;\n\tuint16_t  duration;\n\tuint16_t ox_id;\n\tuint16_t rx_id;\n\tstruct lpfc_nodelist *ndlp;\n};\n\n\n \nint lpfc_pci_function_reset(struct lpfc_hba *);\nint lpfc_sli4_pdev_status_reg_wait(struct lpfc_hba *);\nint lpfc_sli4_hba_setup(struct lpfc_hba *);\nint lpfc_sli4_config(struct lpfc_hba *, struct lpfcMboxq *, uint8_t,\n\t\t     uint8_t, uint32_t, bool);\nvoid lpfc_sli4_mbox_cmd_free(struct lpfc_hba *, struct lpfcMboxq *);\nvoid lpfc_sli4_mbx_sge_set(struct lpfcMboxq *, uint32_t, dma_addr_t, uint32_t);\nvoid lpfc_sli4_mbx_sge_get(struct lpfcMboxq *, uint32_t,\n\t\t\t   struct lpfc_mbx_sge *);\nint lpfc_sli4_mbx_read_fcf_rec(struct lpfc_hba *, struct lpfcMboxq *,\n\t\t\t       uint16_t);\n\nvoid lpfc_sli4_hba_reset(struct lpfc_hba *);\nstruct lpfc_queue *lpfc_sli4_queue_alloc(struct lpfc_hba *phba,\n\t\t\t\t\t uint32_t page_size,\n\t\t\t\t\t uint32_t entry_size,\n\t\t\t\t\t uint32_t entry_count, int cpu);\nvoid lpfc_sli4_queue_free(struct lpfc_queue *);\nint lpfc_eq_create(struct lpfc_hba *, struct lpfc_queue *, uint32_t);\nvoid lpfc_modify_hba_eq_delay(struct lpfc_hba *phba, uint32_t startq,\n\t\t\t     uint32_t numq, uint32_t usdelay);\nint lpfc_cq_create(struct lpfc_hba *, struct lpfc_queue *,\n\t\t\tstruct lpfc_queue *, uint32_t, uint32_t);\nint lpfc_cq_create_set(struct lpfc_hba *phba, struct lpfc_queue **cqp,\n\t\t\tstruct lpfc_sli4_hdw_queue *hdwq, uint32_t type,\n\t\t\tuint32_t subtype);\nint32_t lpfc_mq_create(struct lpfc_hba *, struct lpfc_queue *,\n\t\t       struct lpfc_queue *, uint32_t);\nint lpfc_wq_create(struct lpfc_hba *, struct lpfc_queue *,\n\t\t\tstruct lpfc_queue *, uint32_t);\nint lpfc_rq_create(struct lpfc_hba *, struct lpfc_queue *,\n\t\t\tstruct lpfc_queue *, struct lpfc_queue *, uint32_t);\nint lpfc_mrq_create(struct lpfc_hba *phba, struct lpfc_queue **hrqp,\n\t\t\tstruct lpfc_queue **drqp, struct lpfc_queue **cqp,\n\t\t\tuint32_t subtype);\nint lpfc_eq_destroy(struct lpfc_hba *, struct lpfc_queue *);\nint lpfc_cq_destroy(struct lpfc_hba *, struct lpfc_queue *);\nint lpfc_mq_destroy(struct lpfc_hba *, struct lpfc_queue *);\nint lpfc_wq_destroy(struct lpfc_hba *, struct lpfc_queue *);\nint lpfc_rq_destroy(struct lpfc_hba *, struct lpfc_queue *,\n\t\t\t struct lpfc_queue *);\nint lpfc_sli4_queue_setup(struct lpfc_hba *);\nvoid lpfc_sli4_queue_unset(struct lpfc_hba *);\nint lpfc_sli4_post_sgl(struct lpfc_hba *, dma_addr_t, dma_addr_t, uint16_t);\nint lpfc_repost_io_sgl_list(struct lpfc_hba *phba);\nuint16_t lpfc_sli4_next_xritag(struct lpfc_hba *);\nvoid lpfc_sli4_free_xri(struct lpfc_hba *, int);\nint lpfc_sli4_post_async_mbox(struct lpfc_hba *);\nstruct lpfc_cq_event *__lpfc_sli4_cq_event_alloc(struct lpfc_hba *);\nstruct lpfc_cq_event *lpfc_sli4_cq_event_alloc(struct lpfc_hba *);\nvoid __lpfc_sli4_cq_event_release(struct lpfc_hba *, struct lpfc_cq_event *);\nvoid lpfc_sli4_cq_event_release(struct lpfc_hba *, struct lpfc_cq_event *);\nint lpfc_sli4_init_rpi_hdrs(struct lpfc_hba *);\nint lpfc_sli4_post_rpi_hdr(struct lpfc_hba *, struct lpfc_rpi_hdr *);\nint lpfc_sli4_post_all_rpi_hdrs(struct lpfc_hba *);\nstruct lpfc_rpi_hdr *lpfc_sli4_create_rpi_hdr(struct lpfc_hba *);\nvoid lpfc_sli4_remove_rpi_hdrs(struct lpfc_hba *);\nint lpfc_sli4_alloc_rpi(struct lpfc_hba *);\nvoid lpfc_sli4_free_rpi(struct lpfc_hba *, int);\nvoid lpfc_sli4_remove_rpis(struct lpfc_hba *);\nvoid lpfc_sli4_async_event_proc(struct lpfc_hba *);\nvoid lpfc_sli4_fcf_redisc_event_proc(struct lpfc_hba *);\nint lpfc_sli4_resume_rpi(struct lpfc_nodelist *,\n\t\t\tvoid (*)(struct lpfc_hba *, LPFC_MBOXQ_t *), void *);\nvoid lpfc_sli4_els_xri_abort_event_proc(struct lpfc_hba *phba);\nvoid lpfc_sli4_nvme_pci_offline_aborted(struct lpfc_hba *phba,\n\t\t\t\t\tstruct lpfc_io_buf *lpfc_ncmd);\nvoid lpfc_sli4_nvme_xri_aborted(struct lpfc_hba *phba,\n\t\t\t\tstruct sli4_wcqe_xri_aborted *axri,\n\t\t\t\tstruct lpfc_io_buf *lpfc_ncmd);\nvoid lpfc_sli4_io_xri_aborted(struct lpfc_hba *phba,\n\t\t\t      struct sli4_wcqe_xri_aborted *axri, int idx);\nvoid lpfc_sli4_nvmet_xri_aborted(struct lpfc_hba *phba,\n\t\t\t\t struct sli4_wcqe_xri_aborted *axri);\nvoid lpfc_sli4_els_xri_aborted(struct lpfc_hba *,\n\t\t\t       struct sli4_wcqe_xri_aborted *);\nvoid lpfc_sli4_vport_delete_els_xri_aborted(struct lpfc_vport *);\nvoid lpfc_sli4_vport_delete_fcp_xri_aborted(struct lpfc_vport *);\nint lpfc_sli4_brdreset(struct lpfc_hba *);\nint lpfc_sli4_add_fcf_record(struct lpfc_hba *, struct fcf_record *);\nvoid lpfc_sli_remove_dflt_fcf(struct lpfc_hba *);\nint lpfc_sli4_get_els_iocb_cnt(struct lpfc_hba *);\nint lpfc_sli4_get_iocb_cnt(struct lpfc_hba *phba);\nint lpfc_sli4_init_vpi(struct lpfc_vport *);\nvoid lpfc_sli4_eq_clr_intr(struct lpfc_queue *);\nvoid lpfc_sli4_write_cq_db(struct lpfc_hba *phba, struct lpfc_queue *q,\n\t\t\t   uint32_t count, bool arm);\nvoid lpfc_sli4_write_eq_db(struct lpfc_hba *phba, struct lpfc_queue *q,\n\t\t\t   uint32_t count, bool arm);\nvoid lpfc_sli4_if6_eq_clr_intr(struct lpfc_queue *q);\nvoid lpfc_sli4_if6_write_cq_db(struct lpfc_hba *phba, struct lpfc_queue *q,\n\t\t\t       uint32_t count, bool arm);\nvoid lpfc_sli4_if6_write_eq_db(struct lpfc_hba *phba, struct lpfc_queue *q,\n\t\t\t       uint32_t count, bool arm);\nvoid lpfc_sli4_fcfi_unreg(struct lpfc_hba *, uint16_t);\nint lpfc_sli4_fcf_scan_read_fcf_rec(struct lpfc_hba *, uint16_t);\nint lpfc_sli4_fcf_rr_read_fcf_rec(struct lpfc_hba *, uint16_t);\nint lpfc_sli4_read_fcf_rec(struct lpfc_hba *, uint16_t);\nvoid lpfc_mbx_cmpl_fcf_scan_read_fcf_rec(struct lpfc_hba *, LPFC_MBOXQ_t *);\nvoid lpfc_mbx_cmpl_fcf_rr_read_fcf_rec(struct lpfc_hba *, LPFC_MBOXQ_t *);\nvoid lpfc_mbx_cmpl_read_fcf_rec(struct lpfc_hba *, LPFC_MBOXQ_t *);\nint lpfc_sli4_unregister_fcf(struct lpfc_hba *);\nint lpfc_sli4_post_status_check(struct lpfc_hba *);\nuint8_t lpfc_sli_config_mbox_subsys_get(struct lpfc_hba *, LPFC_MBOXQ_t *);\nuint8_t lpfc_sli_config_mbox_opcode_get(struct lpfc_hba *, LPFC_MBOXQ_t *);\nvoid lpfc_sli4_ras_dma_free(struct lpfc_hba *phba);\nstruct sli4_hybrid_sgl *lpfc_get_sgl_per_hdwq(struct lpfc_hba *phba,\n\t\t\t\t\t      struct lpfc_io_buf *buf);\nstruct fcp_cmd_rsp_buf *lpfc_get_cmd_rsp_buf_per_hdwq(struct lpfc_hba *phba,\n\t\t\t\t\t\t      struct lpfc_io_buf *buf);\nint lpfc_put_sgl_per_hdwq(struct lpfc_hba *phba, struct lpfc_io_buf *buf);\nint lpfc_put_cmd_rsp_buf_per_hdwq(struct lpfc_hba *phba,\n\t\t\t\t  struct lpfc_io_buf *buf);\nvoid lpfc_free_sgl_per_hdwq(struct lpfc_hba *phba,\n\t\t\t    struct lpfc_sli4_hdw_queue *hdwq);\nvoid lpfc_free_cmd_rsp_buf_per_hdwq(struct lpfc_hba *phba,\n\t\t\t\t    struct lpfc_sli4_hdw_queue *hdwq);\nstatic inline void *lpfc_sli4_qe(struct lpfc_queue *q, uint16_t idx)\n{\n\treturn q->q_pgs[idx / q->entry_cnt_per_pg] +\n\t\t(q->entry_size * (idx % q->entry_cnt_per_pg));\n}\n\n \nstatic inline bool\nlpfc_sli4_unrecoverable_port(struct lpfc_register *portstat_reg)\n{\n\treturn bf_get(lpfc_sliport_status_err, portstat_reg) &&\n\t       !bf_get(lpfc_sliport_status_rn, portstat_reg);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}