{
  "module_name": "superpipe.h",
  "hash_id": "015f89f29b130447dbd16f1a3281d716727b158b7d185a4d78711b2352f1bc32",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/cxlflash/superpipe.h",
  "human_readable_source": " \n \n\n#ifndef _CXLFLASH_SUPERPIPE_H\n#define _CXLFLASH_SUPERPIPE_H\n\nextern struct cxlflash_global global;\n\n \n\n \n#define MC_CHUNK_SIZE     (1 << MC_RHT_NMASK)\t \n\n#define CMD_TIMEOUT 30   \n#define CMD_RETRIES 5    \n\n#define MAX_SECTOR_UNIT  512  \n\nenum lun_mode {\n\tMODE_NONE = 0,\n\tMODE_VIRTUAL,\n\tMODE_PHYSICAL\n};\n\n \nstruct glun_info {\n\tu64 max_lba;\t\t \n\tu32 blk_len;\t\t \n\tenum lun_mode mode;\t \n\tint users;\t\t \n\n\tu8 wwid[16];\n\n\tstruct mutex mutex;\n\n\tstruct blka blka;\n\tstruct list_head list;\n};\n\n \nstruct llun_info {\n\tu64 lun_id[MAX_FC_PORTS];  \n\tu32 lun_index;\t\t \n\tu32 host_no;\t\t \n\tu32 port_sel;\t\t \n\tbool in_table;\t\t \n\n\tu8 wwid[16];\t\t \n\n\tstruct glun_info *parent;  \n\tstruct scsi_device *sdev;\n\tstruct list_head list;\n};\n\nstruct lun_access {\n\tstruct llun_info *lli;\n\tstruct scsi_device *sdev;\n\tstruct list_head list;\n};\n\nenum ctx_ctrl {\n\tCTX_CTRL_CLONE\t\t= (1 << 1),\n\tCTX_CTRL_ERR\t\t= (1 << 2),\n\tCTX_CTRL_ERR_FALLBACK\t= (1 << 3),\n\tCTX_CTRL_NOPID\t\t= (1 << 4),\n\tCTX_CTRL_FILE\t\t= (1 << 5)\n};\n\n#define ENCODE_CTXID(_ctx, _id)\t(((((u64)_ctx) & 0xFFFFFFFF0ULL) << 28) | _id)\n#define DECODE_CTXID(_val)\t(_val & 0xFFFFFFFF)\n\nstruct ctx_info {\n\tstruct sisl_ctrl_map __iomem *ctrl_map;  \n\tstruct sisl_rht_entry *rht_start;  \n\tu32 rht_out;\t\t \n\tu32 rht_perms;\t\t \n\tstruct llun_info **rht_lun;        \n\tu8 *rht_needs_ws;\t \n\n\tu64 ctxid;\n\tu64 irqs;  \n\tpid_t pid;\n\tbool initialized;\n\tbool unavail;\n\tbool err_recovery_active;\n\tstruct mutex mutex;  \n\tstruct kref kref;\n\tvoid *ctx;\n\tstruct cxlflash_cfg *cfg;\n\tstruct list_head luns;\t \n\tconst struct vm_operations_struct *cxl_mmap_vmops;\n\tstruct file *file;\n\tstruct list_head list;  \n};\n\nstruct cxlflash_global {\n\tstruct mutex mutex;\n\tstruct list_head gluns; \n\tstruct page *err_page;  \n};\n\nint cxlflash_vlun_resize(struct scsi_device *sdev,\n\t\t\t struct dk_cxlflash_resize *resize);\nint _cxlflash_vlun_resize(struct scsi_device *sdev, struct ctx_info *ctxi,\n\t\t\t  struct dk_cxlflash_resize *resize);\n\nint cxlflash_disk_release(struct scsi_device *sdev,\n\t\t\t  struct dk_cxlflash_release *release);\nint _cxlflash_disk_release(struct scsi_device *sdev, struct ctx_info *ctxi,\n\t\t\t   struct dk_cxlflash_release *release);\n\nint cxlflash_disk_clone(struct scsi_device *sdev,\n\t\t\tstruct dk_cxlflash_clone *clone);\n\nint cxlflash_disk_virtual_open(struct scsi_device *sdev, void *arg);\n\nint cxlflash_lun_attach(struct glun_info *gli, enum lun_mode mode, bool locked);\nvoid cxlflash_lun_detach(struct glun_info *gli);\n\nstruct ctx_info *get_context(struct cxlflash_cfg *cfg, u64 rctxit, void *arg,\n\t\t\t     enum ctx_ctrl ctrl);\nvoid put_context(struct ctx_info *ctxi);\n\nstruct sisl_rht_entry *get_rhte(struct ctx_info *ctxi, res_hndl_t rhndl,\n\t\t\t\tstruct llun_info *lli);\n\nstruct sisl_rht_entry *rhte_checkout(struct ctx_info *ctxi,\n\t\t\t\t     struct llun_info *lli);\nvoid rhte_checkin(struct ctx_info *ctxi, struct sisl_rht_entry *rhte);\n\nvoid cxlflash_ba_terminate(struct ba_lun *ba_lun);\n\nint cxlflash_manage_lun(struct scsi_device *sdev,\n\t\t\tstruct dk_cxlflash_manage_lun *manage);\n\nint check_state(struct cxlflash_cfg *cfg);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}