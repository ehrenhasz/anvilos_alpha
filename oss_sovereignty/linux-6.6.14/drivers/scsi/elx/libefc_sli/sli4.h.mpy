{
  "module_name": "sli4.h",
  "hash_id": "db51fb2f6242d4f8dd24a61e16d92c93f9fbde943a54c010cc6e7057638a7f1e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/elx/libefc_sli/sli4.h",
  "human_readable_source": " \n \n\n \n\n#ifndef _SLI4_H\n#define _SLI4_H\n\n#include <linux/pci.h>\n#include <linux/delay.h>\n#include \"scsi/fc/fc_els.h\"\n#include \"scsi/fc/fc_fs.h\"\n#include \"../include/efc_common.h\"\n\n \n\n \n#define SLI4_INTF_REG\t\t\t0x0058\nenum sli4_intf {\n\tSLI4_INTF_REV_SHIFT\t\t= 4,\n\tSLI4_INTF_REV_MASK\t\t= 0xf0,\n\n\tSLI4_INTF_REV_S3\t\t= 0x30,\n\tSLI4_INTF_REV_S4\t\t= 0x40,\n\n\tSLI4_INTF_FAMILY_SHIFT\t\t= 8,\n\tSLI4_INTF_FAMILY_MASK\t\t= 0x0f00,\n\n\tSLI4_FAMILY_CHECK_ASIC_TYPE\t= 0x0f00,\n\n\tSLI4_INTF_IF_TYPE_SHIFT\t\t= 12,\n\tSLI4_INTF_IF_TYPE_MASK\t\t= 0xf000,\n\n\tSLI4_INTF_IF_TYPE_2\t\t= 0x2000,\n\tSLI4_INTF_IF_TYPE_6\t\t= 0x6000,\n\n\tSLI4_INTF_VALID_SHIFT\t\t= 29,\n\tSLI4_INTF_VALID_MASK\t\t= 0xe0000000,\n\n\tSLI4_INTF_VALID_VALUE\t\t= 0xc0000000,\n};\n\n \n#define SLI4_ASIC_ID_REG\t0x009c\nenum sli4_asic {\n\tSLI4_ASIC_GEN_SHIFT\t= 8,\n\tSLI4_ASIC_GEN_MASK\t= 0xff00,\n\tSLI4_ASIC_GEN_5\t\t= 0x0b00,\n\tSLI4_ASIC_GEN_6\t\t= 0x0c00,\n\tSLI4_ASIC_GEN_7\t\t= 0x0d00,\n};\n\nenum sli4_acic_revisions {\n\tSLI4_ASIC_REV_A0\t= 0x00,\n\tSLI4_ASIC_REV_A1\t= 0x01,\n\tSLI4_ASIC_REV_A2\t= 0x02,\n\tSLI4_ASIC_REV_A3\t= 0x03,\n\tSLI4_ASIC_REV_B0\t= 0x10,\n\tSLI4_ASIC_REV_B1\t= 0x11,\n\tSLI4_ASIC_REV_B2\t= 0x12,\n\tSLI4_ASIC_REV_C0\t= 0x20,\n\tSLI4_ASIC_REV_C1\t= 0x21,\n\tSLI4_ASIC_REV_C2\t= 0x22,\n\tSLI4_ASIC_REV_D0\t= 0x30,\n};\n\nstruct sli4_asic_entry_t {\n\tu32 rev_id;\n\tu32 family;\n};\n\n \n#define SLI4_BMBX_REG\t\t0x0160\nenum sli4_bmbx {\n\tSLI4_BMBX_MASK_HI\t= 0x3,\n\tSLI4_BMBX_MASK_LO\t= 0xf,\n\tSLI4_BMBX_RDY\t\t= 1 << 0,\n\tSLI4_BMBX_HI\t\t= 1 << 1,\n\tSLI4_BMBX_SIZE\t\t= 256,\n};\n\nstatic inline u32\nsli_bmbx_write_hi(u64 addr) {\n\tu32 val;\n\n\tval = upper_32_bits(addr) & ~SLI4_BMBX_MASK_HI;\n\tval |= SLI4_BMBX_HI;\n\n\treturn val;\n}\n\nstatic inline u32\nsli_bmbx_write_lo(u64 addr) {\n\tu32 val;\n\n\tval = (upper_32_bits(addr) & SLI4_BMBX_MASK_HI) << 30;\n\tval |= ((addr) & ~SLI4_BMBX_MASK_LO) >> 2;\n\n\treturn val;\n}\n\n \n#define SLI4_PORT_CTRL_REG\t0x0408\nenum sli4_port_ctrl {\n\tSLI4_PORT_CTRL_IP\t= 1u << 27,\n\tSLI4_PORT_CTRL_IDIS\t= 1u << 22,\n\tSLI4_PORT_CTRL_FDD\t= 1u << 31,\n};\n\n \n#define SLI4_PORT_ERROR1\t0x040c\n#define SLI4_PORT_ERROR2\t0x0410\n\n \n#define SLI4_EQCQ_DB_REG\t0x120\nenum sli4_eqcq_e {\n\tSLI4_EQ_ID_LO_MASK\t= 0x01ff,\n\n\tSLI4_CQ_ID_LO_MASK\t= 0x03ff,\n\n\tSLI4_EQCQ_CI_EQ\t\t= 0x0200,\n\n\tSLI4_EQCQ_QT_EQ\t\t= 0x00000400,\n\tSLI4_EQCQ_QT_CQ\t\t= 0x00000000,\n\n\tSLI4_EQCQ_ID_HI_SHIFT\t= 11,\n\tSLI4_EQCQ_ID_HI_MASK\t= 0xf800,\n\n\tSLI4_EQCQ_NUM_SHIFT\t= 16,\n\tSLI4_EQCQ_NUM_MASK\t= 0x1fff0000,\n\n\tSLI4_EQCQ_ARM\t\t= 0x20000000,\n\tSLI4_EQCQ_UNARM\t\t= 0x00000000,\n};\n\nstatic inline u32\nsli_format_eq_db_data(u16 num_popped, u16 id, u32 arm) {\n\tu32 reg;\n\n\treg = (id & SLI4_EQ_ID_LO_MASK) | SLI4_EQCQ_QT_EQ;\n\treg |= (((id) >> 9) << SLI4_EQCQ_ID_HI_SHIFT) & SLI4_EQCQ_ID_HI_MASK;\n\treg |= ((num_popped) << SLI4_EQCQ_NUM_SHIFT) & SLI4_EQCQ_NUM_MASK;\n\treg |= arm | SLI4_EQCQ_CI_EQ;\n\n\treturn reg;\n}\n\nstatic inline u32\nsli_format_cq_db_data(u16 num_popped, u16 id, u32 arm) {\n\tu32 reg;\n\n\treg = ((id) & SLI4_CQ_ID_LO_MASK) | SLI4_EQCQ_QT_CQ;\n\treg |= (((id) >> 10) << SLI4_EQCQ_ID_HI_SHIFT) & SLI4_EQCQ_ID_HI_MASK;\n\treg |= ((num_popped) << SLI4_EQCQ_NUM_SHIFT) & SLI4_EQCQ_NUM_MASK;\n\treg |= arm;\n\n\treturn reg;\n}\n\n \n#define SLI4_IF6_EQ_DB_REG\t0x120\nenum sli4_eq_e {\n\tSLI4_IF6_EQ_ID_MASK\t= 0x0fff,\n\n\tSLI4_IF6_EQ_NUM_SHIFT\t= 16,\n\tSLI4_IF6_EQ_NUM_MASK\t= 0x1fff0000,\n};\n\nstatic inline u32\nsli_format_if6_eq_db_data(u16 num_popped, u16 id, u32 arm) {\n\tu32 reg;\n\n\treg = id & SLI4_IF6_EQ_ID_MASK;\n\treg |= (num_popped << SLI4_IF6_EQ_NUM_SHIFT) & SLI4_IF6_EQ_NUM_MASK;\n\treg |= arm;\n\n\treturn reg;\n}\n\n \n#define SLI4_IF6_CQ_DB_REG\t0xc0\nenum sli4_cq_e {\n\tSLI4_IF6_CQ_ID_MASK\t= 0xffff,\n\n\tSLI4_IF6_CQ_NUM_SHIFT\t= 16,\n\tSLI4_IF6_CQ_NUM_MASK\t= 0x1fff0000,\n};\n\nstatic inline u32\nsli_format_if6_cq_db_data(u16 num_popped, u16 id, u32 arm) {\n\tu32 reg;\n\n\treg = id & SLI4_IF6_CQ_ID_MASK;\n\treg |= ((num_popped) << SLI4_IF6_CQ_NUM_SHIFT) & SLI4_IF6_CQ_NUM_MASK;\n\treg |= arm;\n\n\treturn reg;\n}\n\n \n#define SLI4_MQ_DB_REG\t\t0x0140\n#define SLI4_IF6_MQ_DB_REG\t0x0160\nenum sli4_mq_e {\n\tSLI4_MQ_ID_MASK\t\t= 0xffff,\n\n\tSLI4_MQ_NUM_SHIFT\t= 16,\n\tSLI4_MQ_NUM_MASK\t= 0x3fff0000,\n};\n\nstatic inline u32\nsli_format_mq_db_data(u16 id) {\n\tu32 reg;\n\n\treg = id & SLI4_MQ_ID_MASK;\n\treg |= (1 << SLI4_MQ_NUM_SHIFT) & SLI4_MQ_NUM_MASK;\n\n\treturn reg;\n}\n\n \n#define SLI4_RQ_DB_REG\t\t0x0a0\n#define SLI4_IF6_RQ_DB_REG\t0x0080\nenum sli4_rq_e {\n\tSLI4_RQ_DB_ID_MASK\t= 0xffff,\n\n\tSLI4_RQ_DB_NUM_SHIFT\t= 16,\n\tSLI4_RQ_DB_NUM_MASK\t= 0x3fff0000,\n};\n\nstatic inline u32\nsli_format_rq_db_data(u16 id) {\n\tu32 reg;\n\n\treg = id & SLI4_RQ_DB_ID_MASK;\n\treg |= (1 << SLI4_RQ_DB_NUM_SHIFT) & SLI4_RQ_DB_NUM_MASK;\n\n\treturn reg;\n}\n\n \n#define SLI4_IO_WQ_DB_REG\t0x040\n#define SLI4_IF6_WQ_DB_REG\t0x040\nenum sli4_wq_e {\n\tSLI4_WQ_ID_MASK\t\t= 0xffff,\n\n\tSLI4_WQ_IDX_SHIFT\t= 16,\n\tSLI4_WQ_IDX_MASK\t= 0xff0000,\n\n\tSLI4_WQ_NUM_SHIFT\t= 24,\n\tSLI4_WQ_NUM_MASK\t= 0x0ff00000,\n};\n\nstatic inline u32\nsli_format_wq_db_data(u16 id) {\n\tu32 reg;\n\n\treg = id & SLI4_WQ_ID_MASK;\n\treg |= (1 << SLI4_WQ_NUM_SHIFT) & SLI4_WQ_NUM_MASK;\n\n\treturn reg;\n}\n\n \n#define SLI4_PORT_STATUS_REGOFF\t0x0404\nenum sli4_port_status {\n\tSLI4_PORT_STATUS_FDP\t= 1u << 21,\n\tSLI4_PORT_STATUS_RDY\t= 1u << 23,\n\tSLI4_PORT_STATUS_RN\t= 1u << 24,\n\tSLI4_PORT_STATUS_DIP\t= 1u << 25,\n\tSLI4_PORT_STATUS_OTI\t= 1u << 29,\n\tSLI4_PORT_STATUS_ERR\t= 1u << 31,\n};\n\n#define SLI4_PHYDEV_CTRL_REG\t0x0414\n#define SLI4_PHYDEV_CTRL_FRST\t(1 << 1)\n#define SLI4_PHYDEV_CTRL_DD\t(1 << 2)\n\n \nenum sli4_regname_en {\n\tSLI4_REG_BMBX,\n\tSLI4_REG_EQ_DOORBELL,\n\tSLI4_REG_CQ_DOORBELL,\n\tSLI4_REG_RQ_DOORBELL,\n\tSLI4_REG_IO_WQ_DOORBELL,\n\tSLI4_REG_MQ_DOORBELL,\n\tSLI4_REG_PHYSDEV_CONTROL,\n\tSLI4_REG_PORT_CONTROL,\n\tSLI4_REG_PORT_ERROR1,\n\tSLI4_REG_PORT_ERROR2,\n\tSLI4_REG_PORT_SEMAPHORE,\n\tSLI4_REG_PORT_STATUS,\n\tSLI4_REG_UNKWOWN\t\t\t \n};\n\nstruct sli4_reg {\n\tu32\trset;\n\tu32\toff;\n};\n\nstruct sli4_dmaaddr {\n\t__le32 low;\n\t__le32 high;\n};\n\n \nstruct sli4_bufptr {\n\tstruct sli4_dmaaddr addr;\n\t__le32 length;\n};\n\n \nenum sli4_bde_e {\n\tSLI4_BDE_LEN_MASK\t= 0x00ffffff,\n\tSLI4_BDE_TYPE_MASK\t= 0xff000000,\n};\n\nstruct sli4_bde {\n\t__le32\t\tbde_type_buflen;\n\tunion {\n\t\tstruct sli4_dmaaddr data;\n\t\tstruct {\n\t\t\t__le32\toffset;\n\t\t\t__le32\trsvd2;\n\t\t} imm;\n\t\tstruct sli4_dmaaddr blp;\n\t} u;\n};\n\n \nenum sli4_bde_type {\n\tSLI4_BDE_TYPE_SHIFT\t= 24,\n\tSLI4_BDE_TYPE_64\t= 0x00,\t \n\tSLI4_BDE_TYPE_IMM\t= 0x01,\t \n\tSLI4_BDE_TYPE_BLP\t= 0x40,\t \n};\n\n#define SLI4_BDE_TYPE_VAL(type) \\\n\t(SLI4_BDE_TYPE_##type << SLI4_BDE_TYPE_SHIFT)\n\n \n#define SLI4_SGE_MAX_RESERVED\t\t3\n\nenum sli4_sge_type {\n\t \n\tSLI4_SGE_DATA_OFFSET_MASK\t= 0x07ffffff,\n\t \n\tSLI4_SGE_TYPE_SHIFT\t\t= 27,\n\tSLI4_SGE_TYPE_MASK\t\t= 0x78000000,\n\t \n\tSLI4_SGE_TYPE_DATA\t\t= 0x00,\n\tSLI4_SGE_TYPE_DIF\t\t= 0x04,\t \n\tSLI4_SGE_TYPE_LSP\t\t= 0x05,\t \n\tSLI4_SGE_TYPE_PEDIF\t\t= 0x06,\t \n\tSLI4_SGE_TYPE_PESEED\t\t= 0x07,\t \n\tSLI4_SGE_TYPE_DISEED\t\t= 0x08,\t \n\tSLI4_SGE_TYPE_ENC\t\t= 0x09,\t \n\tSLI4_SGE_TYPE_ATM\t\t= 0x0a,\t \n\tSLI4_SGE_TYPE_SKIP\t\t= 0x0c,\t \n\n\tSLI4_SGE_LAST\t\t\t= 1u << 31,\n};\n\nstruct sli4_sge {\n\t__le32\t\tbuffer_address_high;\n\t__le32\t\tbuffer_address_low;\n\t__le32\t\tdw2_flags;\n\t__le32\t\tbuffer_length;\n};\n\n \nstruct sli4_dif_sge {\n\t__le32\t\tbuffer_address_high;\n\t__le32\t\tbuffer_address_low;\n\t__le32\t\tdw2_flags;\n\t__le32\t\trsvd12;\n};\n\n \nenum sli4_diseed_sge_flags {\n\t \n\tSLI4_DISEED_SGE_HS\t\t= 1 << 2,\n\tSLI4_DISEED_SGE_WS\t\t= 1 << 3,\n\tSLI4_DISEED_SGE_IC\t\t= 1 << 4,\n\tSLI4_DISEED_SGE_ICS\t\t= 1 << 5,\n\tSLI4_DISEED_SGE_ATRT\t\t= 1 << 6,\n\tSLI4_DISEED_SGE_AT\t\t= 1 << 7,\n\tSLI4_DISEED_SGE_FAT\t\t= 1 << 8,\n\tSLI4_DISEED_SGE_NA\t\t= 1 << 9,\n\tSLI4_DISEED_SGE_HI\t\t= 1 << 10,\n\n\t \n\tSLI4_DISEED_SGE_BS_MASK\t\t= 0x0007,\n\tSLI4_DISEED_SGE_AI\t\t= 1 << 3,\n\tSLI4_DISEED_SGE_ME\t\t= 1 << 4,\n\tSLI4_DISEED_SGE_RE\t\t= 1 << 5,\n\tSLI4_DISEED_SGE_CE\t\t= 1 << 6,\n\tSLI4_DISEED_SGE_NR\t\t= 1 << 7,\n\n\tSLI4_DISEED_SGE_OP_RX_SHIFT\t= 8,\n\tSLI4_DISEED_SGE_OP_RX_MASK\t= 0x0f00,\n\tSLI4_DISEED_SGE_OP_TX_SHIFT\t= 12,\n\tSLI4_DISEED_SGE_OP_TX_MASK\t= 0xf000,\n};\n\n \nenum sli4_diseed_sge_opcodes {\n\tSLI4_DISEED_SGE_OP_IN_NODIF_OUT_CRC,\n\tSLI4_DISEED_SGE_OP_IN_CRC_OUT_NODIF,\n\tSLI4_DISEED_SGE_OP_IN_NODIF_OUT_CSUM,\n\tSLI4_DISEED_SGE_OP_IN_CSUM_OUT_NODIF,\n\tSLI4_DISEED_SGE_OP_IN_CRC_OUT_CRC,\n\tSLI4_DISEED_SGE_OP_IN_CSUM_OUT_CSUM,\n\tSLI4_DISEED_SGE_OP_IN_CRC_OUT_CSUM,\n\tSLI4_DISEED_SGE_OP_IN_CSUM_OUT_CRC,\n\tSLI4_DISEED_SGE_OP_IN_RAW_OUT_RAW,\n};\n\n#define SLI4_DISEED_SGE_OP_RX_VALUE(stype) \\\n\t(SLI4_DISEED_SGE_OP_##stype << SLI4_DISEED_SGE_OP_RX_SHIFT)\n#define SLI4_DISEED_SGE_OP_TX_VALUE(stype) \\\n\t(SLI4_DISEED_SGE_OP_##stype << SLI4_DISEED_SGE_OP_TX_SHIFT)\n\nstruct sli4_diseed_sge {\n\t__le32\t\tref_tag_cmp;\n\t__le32\t\tref_tag_repl;\n\t__le16\t\tapp_tag_repl;\n\t__le16\t\tdw2w1_flags;\n\t__le16\t\tapp_tag_cmp;\n\t__le16\t\tdw3w1_flags;\n};\n\n \n#define SLI4_LSP_SGE_SEGLEN\t0x00ffffff\n\nstruct sli4_lsp_sge {\n\t__le32\t\tbuffer_address_high;\n\t__le32\t\tbuffer_address_low;\n\t__le32\t\tdw2_flags;\n\t__le32\t\tdw3_seglen;\n};\n\nenum sli4_eqe_e {\n\tSLI4_EQE_VALID\t= 1,\n\tSLI4_EQE_MJCODE\t= 0xe,\n\tSLI4_EQE_MNCODE\t= 0xfff0,\n};\n\nstruct sli4_eqe {\n\t__le16\t\tdw0w0_flags;\n\t__le16\t\tresource_id;\n};\n\n#define SLI4_MAJOR_CODE_STANDARD\t0\n#define SLI4_MAJOR_CODE_SENTINEL\t1\n\n \n#define SLI4_EQE_STATUS_EQ_FULL\t\t2\n\nenum sli4_mcqe_e {\n\tSLI4_MCQE_CONSUMED\t= 1u << 27,\n\tSLI4_MCQE_COMPLETED\t= 1u << 28,\n\tSLI4_MCQE_AE\t\t= 1u << 30,\n\tSLI4_MCQE_VALID\t\t= 1u << 31,\n};\n\n \n#define SLI4_MCQE_STATUS_NOT_COMPLETED\t-2\n\nstruct sli4_mcqe {\n\t__le16\t\tcompletion_status;\n\t__le16\t\textended_status;\n\t__le32\t\tmqe_tag_low;\n\t__le32\t\tmqe_tag_high;\n\t__le32\t\tdw3_flags;\n};\n\nenum sli4_acqe_e {\n\tSLI4_ACQE_AE\t= 1 << 6,  \n\tSLI4_ACQE_VAL\t= 1 << 7,  \n};\n\nstruct sli4_acqe {\n\t__le32\t\tevent_data[3];\n\tu8\t\trsvd12;\n\tu8\t\tevent_code;\n\tu8\t\tevent_type;\n\tu8\t\tae_val;\n};\n\nenum sli4_acqe_event_code {\n\tSLI4_ACQE_EVENT_CODE_LINK_STATE\t\t= 0x01,\n\tSLI4_ACQE_EVENT_CODE_FIP\t\t= 0x02,\n\tSLI4_ACQE_EVENT_CODE_DCBX\t\t= 0x03,\n\tSLI4_ACQE_EVENT_CODE_ISCSI\t\t= 0x04,\n\tSLI4_ACQE_EVENT_CODE_GRP_5\t\t= 0x05,\n\tSLI4_ACQE_EVENT_CODE_FC_LINK_EVENT\t= 0x10,\n\tSLI4_ACQE_EVENT_CODE_SLI_PORT_EVENT\t= 0x11,\n\tSLI4_ACQE_EVENT_CODE_VF_EVENT\t\t= 0x12,\n\tSLI4_ACQE_EVENT_CODE_MR_EVENT\t\t= 0x13,\n};\n\nenum sli4_qtype {\n\tSLI4_QTYPE_EQ,\n\tSLI4_QTYPE_CQ,\n\tSLI4_QTYPE_MQ,\n\tSLI4_QTYPE_WQ,\n\tSLI4_QTYPE_RQ,\n\tSLI4_QTYPE_MAX,\t\t\t \n};\n\n#define SLI4_USER_MQ_COUNT\t1\n#define SLI4_MAX_CQ_SET_COUNT\t16\n#define SLI4_MAX_RQ_SET_COUNT\t16\n\nenum sli4_qentry {\n\tSLI4_QENTRY_ASYNC,\n\tSLI4_QENTRY_MQ,\n\tSLI4_QENTRY_RQ,\n\tSLI4_QENTRY_WQ,\n\tSLI4_QENTRY_WQ_RELEASE,\n\tSLI4_QENTRY_OPT_WRITE_CMD,\n\tSLI4_QENTRY_OPT_WRITE_DATA,\n\tSLI4_QENTRY_XABT,\n\tSLI4_QENTRY_MAX\t\t\t \n};\n\nenum sli4_queue_flags {\n\tSLI4_QUEUE_FLAG_MQ\t= 1 << 0,\t \n\tSLI4_QUEUE_FLAG_HDR\t= 1 << 1,\t \n\tSLI4_QUEUE_FLAG_RQBATCH\t= 1 << 2,\t \n};\n\n \nenum sli4_cmd_version {\n\tCMD_V0,\n\tCMD_V1,\n\tCMD_V2,\n};\n\nstruct sli4_rqst_hdr {\n\tu8\t\topcode;\n\tu8\t\tsubsystem;\n\t__le16\t\trsvd2;\n\t__le32\t\ttimeout;\n\t__le32\t\trequest_length;\n\t__le32\t\tdw3_version;\n};\n\n \nstruct sli4_rsp_hdr {\n\tu8\t\topcode;\n\tu8\t\tsubsystem;\n\t__le16\t\trsvd2;\n\tu8\t\tstatus;\n\tu8\t\tadditional_status;\n\t__le16\t\trsvd6;\n\t__le32\t\tresponse_length;\n\t__le32\t\tactual_response_length;\n};\n\n#define SLI4_QUEUE_RQ_BATCH\t8\n\n#define SZ_DMAADDR\t\tsizeof(struct sli4_dmaaddr)\n#define SLI4_RQST_CMDSZ(stype)\tsizeof(struct sli4_rqst_##stype)\n\n#define SLI4_RQST_PYLD_LEN(stype) \\\n\t\tcpu_to_le32(sizeof(struct sli4_rqst_##stype) - \\\n\t\t\tsizeof(struct sli4_rqst_hdr))\n\n#define SLI4_RQST_PYLD_LEN_VAR(stype, varpyld) \\\n\t\tcpu_to_le32((sizeof(struct sli4_rqst_##stype) + \\\n\t\t\tvarpyld) - sizeof(struct sli4_rqst_hdr))\n\n#define SLI4_CFG_PYLD_LENGTH(stype) \\\n\t\tmax(sizeof(struct sli4_rqst_##stype), \\\n\t\tsizeof(struct sli4_rsp_##stype))\n\nenum sli4_create_cqv2_e {\n\t \n\tSLI4_CREATE_CQV2_CLSWM_MASK\t= 0x00003000,\n\tSLI4_CREATE_CQV2_NODELAY\t= 0x00004000,\n\tSLI4_CREATE_CQV2_AUTOVALID\t= 0x00008000,\n\tSLI4_CREATE_CQV2_CQECNT_MASK\t= 0x18000000,\n\tSLI4_CREATE_CQV2_VALID\t\t= 0x20000000,\n\tSLI4_CREATE_CQV2_EVT\t\t= 0x80000000,\n\t \n\tSLI4_CREATE_CQV2_ARM\t\t= 0x8000,\n};\n\nstruct sli4_rqst_cmn_create_cq_v2 {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\tu8\t\t\tpage_size;\n\tu8\t\t\trsvd19;\n\t__le32\t\t\tdw5_flags;\n\t__le16\t\t\teq_id;\n\t__le16\t\t\tdw6w1_arm;\n\t__le16\t\t\tcqe_count;\n\t__le16\t\t\trsvd30;\n\t__le32\t\t\trsvd32;\n\tstruct sli4_dmaaddr\tpage_phys_addr[];\n};\n\nenum sli4_create_cqset_e {\n\t \n\tSLI4_CREATE_CQSETV0_CLSWM_MASK\t= 0x00003000,\n\tSLI4_CREATE_CQSETV0_NODELAY\t= 0x00004000,\n\tSLI4_CREATE_CQSETV0_AUTOVALID\t= 0x00008000,\n\tSLI4_CREATE_CQSETV0_CQECNT_MASK\t= 0x18000000,\n\tSLI4_CREATE_CQSETV0_VALID\t= 0x20000000,\n\tSLI4_CREATE_CQSETV0_EVT\t\t= 0x80000000,\n\t \n\tSLI4_CREATE_CQSETV0_CQE_COUNT\t= 0x7fff,\n\tSLI4_CREATE_CQSETV0_ARM\t\t= 0x8000,\n};\n\nstruct sli4_rqst_cmn_create_cq_set_v0 {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\tu8\t\t\tpage_size;\n\tu8\t\t\trsvd19;\n\t__le32\t\t\tdw5_flags;\n\t__le16\t\t\tnum_cq_req;\n\t__le16\t\t\tdw6w1_flags;\n\t__le16\t\t\teq_id[16];\n\tstruct sli4_dmaaddr\tpage_phys_addr[];\n};\n\n \nenum sli4_cq_cnt {\n\tSLI4_CQ_CNT_256,\n\tSLI4_CQ_CNT_512,\n\tSLI4_CQ_CNT_1024,\n\tSLI4_CQ_CNT_LARGE,\n};\n\n#define SLI4_CQ_CNT_SHIFT\t27\n#define SLI4_CQ_CNT_VAL(type)\t(SLI4_CQ_CNT_##type << SLI4_CQ_CNT_SHIFT)\n\n#define SLI4_CQE_BYTES\t\t(4 * sizeof(u32))\n\n#define SLI4_CREATE_CQV2_MAX_PAGES\t8\n\n \nstruct sli4_rsp_cmn_create_queue {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le16\tq_id;\n\tu8\trsvd18;\n\tu8\tulp;\n\t__le32\tdb_offset;\n\t__le16\tdb_rs;\n\t__le16\tdb_fmt;\n};\n\nstruct sli4_rsp_cmn_create_queue_set {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le16\tq_id;\n\t__le16\tnum_q_allocated;\n};\n\n \nstruct sli4_rqst_cmn_destroy_q {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\tq_id;\n\t__le16\trsvd;\n};\n\nstruct sli4_rsp_cmn_destroy_q {\n\tstruct sli4_rsp_hdr\thdr;\n};\n\n \nstruct sli4_eqdelay_rec {\n\t__le32  eq_id;\n\t__le32  phase;\n\t__le32  delay_multiplier;\n};\n\nstruct sli4_rqst_cmn_modify_eq_delay {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tnum_eq;\n\tstruct sli4_eqdelay_rec eq_delay_record[8];\n};\n\nstruct sli4_rsp_cmn_modify_eq_delay {\n\tstruct sli4_rsp_hdr\thdr;\n};\n\nenum sli4_create_cq_e {\n\t \n\tSLI4_CREATE_EQ_AUTOVALID\t\t= 1u << 28,\n\tSLI4_CREATE_EQ_VALID\t\t\t= 1u << 29,\n\tSLI4_CREATE_EQ_EQESZ\t\t\t= 1u << 31,\n\t \n\tSLI4_CREATE_EQ_COUNT\t\t\t= 7 << 26,\n\tSLI4_CREATE_EQ_ARM\t\t\t= 1u << 31,\n\t \n\tSLI4_CREATE_EQ_DELAYMULTI_SHIFT\t\t= 13,\n\tSLI4_CREATE_EQ_DELAYMULTI_MASK\t\t= 0x007fe000,\n\tSLI4_CREATE_EQ_DELAYMULTI\t\t= 0x00040000,\n};\n\nstruct sli4_rqst_cmn_create_eq {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\t__le16\t\t\trsvd18;\n\t__le32\t\t\tdw5_flags;\n\t__le32\t\t\tdw6_flags;\n\t__le32\t\t\tdw7_delaymulti;\n\t__le32\t\t\trsvd32;\n\tstruct sli4_dmaaddr\tpage_address[8];\n};\n\nstruct sli4_rsp_cmn_create_eq {\n\tstruct sli4_rsp_cmn_create_queue q_rsp;\n};\n\n \nenum sli4_eq_cnt {\n\tSLI4_EQ_CNT_256,\n\tSLI4_EQ_CNT_512,\n\tSLI4_EQ_CNT_1024,\n\tSLI4_EQ_CNT_2048,\n\tSLI4_EQ_CNT_4096 = 3,\n};\n\n#define SLI4_EQ_CNT_SHIFT\t26\n#define SLI4_EQ_CNT_VAL(type)\t(SLI4_EQ_CNT_##type << SLI4_EQ_CNT_SHIFT)\n\n#define SLI4_EQE_SIZE_4\t\t0\n#define SLI4_EQE_SIZE_16\t1\n\n \nenum sli4_create_mq_flags {\n\t \n\tSLI4_CREATE_MQEXT_RINGSIZE\t= 0xf,\n\tSLI4_CREATE_MQEXT_CQID_SHIFT\t= 6,\n\tSLI4_CREATE_MQEXT_CQIDV0_MASK\t= 0xffc0,\n\t \n\tSLI4_CREATE_MQEXT_VAL\t\t= 1u << 31,\n\t \n\tSLI4_CREATE_MQEXT_ACQV\t\t= 1u << 0,\n\tSLI4_CREATE_MQEXT_ASYNC_CQIDV0\t= 0x7fe,\n};\n\nstruct sli4_rqst_cmn_create_mq_ext {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\t__le16\t\t\tcq_id_v1;\n\t__le32\t\t\tasync_event_bitmap;\n\t__le16\t\t\tasync_cq_id_v1;\n\t__le16\t\t\tdw6w1_flags;\n\t__le32\t\t\tdw7_val;\n\t__le32\t\t\tdw8_flags;\n\t__le32\t\t\trsvd36;\n\tstruct sli4_dmaaddr\tpage_phys_addr[];\n};\n\nstruct sli4_rsp_cmn_create_mq_ext {\n\tstruct sli4_rsp_cmn_create_queue q_rsp;\n};\n\nenum sli4_mqe_size {\n\tSLI4_MQE_SIZE_16 = 0x05,\n\tSLI4_MQE_SIZE_32,\n\tSLI4_MQE_SIZE_64,\n\tSLI4_MQE_SIZE_128,\n};\n\nenum sli4_async_evt {\n\tSLI4_ASYNC_EVT_LINK_STATE\t= 1 << 1,\n\tSLI4_ASYNC_EVT_FIP\t\t= 1 << 2,\n\tSLI4_ASYNC_EVT_GRP5\t\t= 1 << 5,\n\tSLI4_ASYNC_EVT_FC\t\t= 1 << 16,\n\tSLI4_ASYNC_EVT_SLI_PORT\t\t= 1 << 17,\n};\n\n#define\tSLI4_ASYNC_EVT_FC_ALL \\\n\t\t(SLI4_ASYNC_EVT_LINK_STATE\t| \\\n\t\t SLI4_ASYNC_EVT_FIP\t\t| \\\n\t\t SLI4_ASYNC_EVT_GRP5\t\t| \\\n\t\t SLI4_ASYNC_EVT_FC\t\t| \\\n\t\t SLI4_ASYNC_EVT_SLI_PORT)\n\n \nstruct sli4_rqst_cmn_create_cq_v0 {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\t__le16\t\t\trsvd18;\n\t__le32\t\t\tdw5_flags;\n\t__le32\t\t\tdw6_flags;\n\t__le32\t\t\trsvd28;\n\t__le32\t\t\trsvd32;\n\tstruct sli4_dmaaddr\tpage_phys_addr[];\n};\n\nenum sli4_create_rq_e {\n\tSLI4_RQ_CREATE_DUA\t\t= 0x1,\n\tSLI4_RQ_CREATE_BQU\t\t= 0x2,\n\n\tSLI4_RQE_SIZE\t\t\t= 8,\n\tSLI4_RQE_SIZE_8\t\t\t= 0x2,\n\tSLI4_RQE_SIZE_16\t\t= 0x3,\n\tSLI4_RQE_SIZE_32\t\t= 0x4,\n\tSLI4_RQE_SIZE_64\t\t= 0x5,\n\tSLI4_RQE_SIZE_128\t\t= 0x6,\n\n\tSLI4_RQ_PAGE_SIZE_4096\t\t= 0x1,\n\tSLI4_RQ_PAGE_SIZE_8192\t\t= 0x2,\n\tSLI4_RQ_PAGE_SIZE_16384\t\t= 0x4,\n\tSLI4_RQ_PAGE_SIZE_32768\t\t= 0x8,\n\tSLI4_RQ_PAGE_SIZE_64536\t\t= 0x10,\n\n\tSLI4_RQ_CREATE_V0_MAX_PAGES\t= 8,\n\tSLI4_RQ_CREATE_V0_MIN_BUF_SIZE\t= 128,\n\tSLI4_RQ_CREATE_V0_MAX_BUF_SIZE\t= 2048,\n};\n\nstruct sli4_rqst_rq_create {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\tu8\t\t\tdua_bqu_byte;\n\tu8\t\t\tulp;\n\t__le16\t\t\trsvd16;\n\tu8\t\t\trqe_count_byte;\n\tu8\t\t\trsvd19;\n\t__le32\t\t\trsvd20;\n\t__le16\t\t\tbuffer_size;\n\t__le16\t\t\tcq_id;\n\t__le32\t\t\trsvd28;\n\tstruct sli4_dmaaddr\tpage_phys_addr[SLI4_RQ_CREATE_V0_MAX_PAGES];\n};\n\nstruct sli4_rsp_rq_create {\n\tstruct sli4_rsp_cmn_create_queue rsp;\n};\n\nenum sli4_create_rqv1_e {\n\tSLI4_RQ_CREATE_V1_DNB\t\t= 0x80,\n\tSLI4_RQ_CREATE_V1_MAX_PAGES\t= 8,\n\tSLI4_RQ_CREATE_V1_MIN_BUF_SIZE\t= 64,\n\tSLI4_RQ_CREATE_V1_MAX_BUF_SIZE\t= 2048,\n};\n\nstruct sli4_rqst_rq_create_v1 {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\tu8\t\t\trsvd14;\n\tu8\t\t\tdim_dfd_dnb;\n\tu8\t\t\tpage_size;\n\tu8\t\t\trqe_size_byte;\n\t__le16\t\t\trqe_count;\n\t__le32\t\t\trsvd20;\n\t__le16\t\t\trsvd24;\n\t__le16\t\t\tcq_id;\n\t__le32\t\t\tbuffer_size;\n\tstruct sli4_dmaaddr\tpage_phys_addr[SLI4_RQ_CREATE_V1_MAX_PAGES];\n};\n\nstruct sli4_rsp_rq_create_v1 {\n\tstruct sli4_rsp_cmn_create_queue rsp;\n};\n\n#define\tSLI4_RQCREATEV2_DNB\t0x80\n\nstruct sli4_rqst_rq_create_v2 {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\tu8\t\t\trq_count;\n\tu8\t\t\tdim_dfd_dnb;\n\tu8\t\t\tpage_size;\n\tu8\t\t\trqe_size_byte;\n\t__le16\t\t\trqe_count;\n\t__le16\t\t\thdr_buffer_size;\n\t__le16\t\t\tpayload_buffer_size;\n\t__le16\t\t\tbase_cq_id;\n\t__le16\t\t\trsvd26;\n\t__le32\t\t\trsvd42;\n\tstruct sli4_dmaaddr\tpage_phys_addr[];\n};\n\nstruct sli4_rsp_rq_create_v2 {\n\tstruct sli4_rsp_cmn_create_queue rsp;\n};\n\n#define SLI4_CQE_CODE_OFFSET\t14\n\nenum sli4_cqe_code {\n\tSLI4_CQE_CODE_WORK_REQUEST_COMPLETION = 0x01,\n\tSLI4_CQE_CODE_RELEASE_WQE,\n\tSLI4_CQE_CODE_RSVD,\n\tSLI4_CQE_CODE_RQ_ASYNC,\n\tSLI4_CQE_CODE_XRI_ABORTED,\n\tSLI4_CQE_CODE_RQ_COALESCING,\n\tSLI4_CQE_CODE_RQ_CONSUMPTION,\n\tSLI4_CQE_CODE_MEASUREMENT_REPORTING,\n\tSLI4_CQE_CODE_RQ_ASYNC_V1,\n\tSLI4_CQE_CODE_RQ_COALESCING_V1,\n\tSLI4_CQE_CODE_OPTIMIZED_WRITE_CMD,\n\tSLI4_CQE_CODE_OPTIMIZED_WRITE_DATA,\n};\n\n#define SLI4_WQ_CREATE_MAX_PAGES\t\t8\n\nstruct sli4_rqst_wq_create {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\tnum_pages;\n\t__le16\t\t\tcq_id;\n\tu8\t\t\tpage_size;\n\tu8\t\t\twqe_size_byte;\n\t__le16\t\t\twqe_count;\n\t__le32\t\t\trsvd;\n\tstruct\tsli4_dmaaddr\tpage_phys_addr[SLI4_WQ_CREATE_MAX_PAGES];\n};\n\nstruct sli4_rsp_wq_create {\n\tstruct sli4_rsp_cmn_create_queue rsp;\n};\n\nenum sli4_link_attention_flags {\n\tSLI4_LNK_ATTN_TYPE_LINK_UP\t\t= 0x01,\n\tSLI4_LNK_ATTN_TYPE_LINK_DOWN\t\t= 0x02,\n\tSLI4_LNK_ATTN_TYPE_NO_HARD_ALPA\t\t= 0x03,\n\n\tSLI4_LNK_ATTN_P2P\t\t\t= 0x01,\n\tSLI4_LNK_ATTN_FC_AL\t\t\t= 0x02,\n\tSLI4_LNK_ATTN_INTERNAL_LOOPBACK\t\t= 0x03,\n\tSLI4_LNK_ATTN_SERDES_LOOPBACK\t\t= 0x04,\n};\n\nstruct sli4_link_attention {\n\tu8\t\tlink_number;\n\tu8\t\tattn_type;\n\tu8\t\ttopology;\n\tu8\t\tport_speed;\n\tu8\t\tport_fault;\n\tu8\t\tshared_link_status;\n\t__le16\t\tlogical_link_speed;\n\t__le32\t\tevent_tag;\n\tu8\t\trsvd12;\n\tu8\t\tevent_code;\n\tu8\t\tevent_type;\n\tu8\t\tflags;\n};\n\nenum sli4_link_event_type {\n\tSLI4_EVENT_LINK_ATTENTION\t\t= 0x01,\n\tSLI4_EVENT_SHARED_LINK_ATTENTION\t= 0x02,\n};\n\nenum sli4_wcqe_flags {\n\tSLI4_WCQE_XB = 0x10,\n\tSLI4_WCQE_QX = 0x80,\n};\n\nstruct sli4_fc_wcqe {\n\tu8\t\thw_status;\n\tu8\t\tstatus;\n\t__le16\t\trequest_tag;\n\t__le32\t\twqe_specific_1;\n\t__le32\t\twqe_specific_2;\n\tu8\t\trsvd12;\n\tu8\t\tqx_byte;\n\tu8\t\tcode;\n\tu8\t\tflags;\n};\n\n \nstruct sli4_fc_wqec {\n\t__le32\t\trsvd0;\n\t__le32\t\trsvd1;\n\t__le16\t\twqe_index;\n\t__le16\t\twq_id;\n\t__le16\t\trsvd12;\n\tu8\t\tcode;\n\tu8\t\tvld_byte;\n};\n\n \nenum sli4_wcqe_status {\n\tSLI4_FC_WCQE_STATUS_SUCCESS,\n\tSLI4_FC_WCQE_STATUS_FCP_RSP_FAILURE,\n\tSLI4_FC_WCQE_STATUS_REMOTE_STOP,\n\tSLI4_FC_WCQE_STATUS_LOCAL_REJECT,\n\tSLI4_FC_WCQE_STATUS_NPORT_RJT,\n\tSLI4_FC_WCQE_STATUS_FABRIC_RJT,\n\tSLI4_FC_WCQE_STATUS_NPORT_BSY,\n\tSLI4_FC_WCQE_STATUS_FABRIC_BSY,\n\tSLI4_FC_WCQE_STATUS_RSVD,\n\tSLI4_FC_WCQE_STATUS_LS_RJT,\n\tSLI4_FC_WCQE_STATUS_RX_BUF_OVERRUN,\n\tSLI4_FC_WCQE_STATUS_CMD_REJECT,\n\tSLI4_FC_WCQE_STATUS_FCP_TGT_LENCHECK,\n\tSLI4_FC_WCQE_STATUS_RSVD1,\n\tSLI4_FC_WCQE_STATUS_ELS_CMPLT_NO_AUTOREG,\n\tSLI4_FC_WCQE_STATUS_RSVD2,\n\tSLI4_FC_WCQE_STATUS_RQ_SUCCESS,\n\tSLI4_FC_WCQE_STATUS_RQ_BUF_LEN_EXCEEDED,\n\tSLI4_FC_WCQE_STATUS_RQ_INSUFF_BUF_NEEDED,\n\tSLI4_FC_WCQE_STATUS_RQ_INSUFF_FRM_DISC,\n\tSLI4_FC_WCQE_STATUS_RQ_DMA_FAILURE,\n\tSLI4_FC_WCQE_STATUS_FCP_RSP_TRUNCATE,\n\tSLI4_FC_WCQE_STATUS_DI_ERROR,\n\tSLI4_FC_WCQE_STATUS_BA_RJT,\n\tSLI4_FC_WCQE_STATUS_RQ_INSUFF_XRI_NEEDED,\n\tSLI4_FC_WCQE_STATUS_RQ_INSUFF_XRI_DISC,\n\tSLI4_FC_WCQE_STATUS_RX_ERROR_DETECT,\n\tSLI4_FC_WCQE_STATUS_RX_ABORT_REQUEST,\n\n\t \n\tSLI4_FC_WCQE_STATUS_DISPATCH_ERROR\t= 0xfd,\n\tSLI4_FC_WCQE_STATUS_SHUTDOWN\t\t= 0xfe,\n\tSLI4_FC_WCQE_STATUS_TARGET_WQE_TIMEOUT\t= 0xff,\n};\n\n \nenum sli4_fc_di_error_status {\n\tSLI4_FC_DI_ERROR_GE\t\t\t= 1 << 0,\n\tSLI4_FC_DI_ERROR_AE\t\t\t= 1 << 1,\n\tSLI4_FC_DI_ERROR_RE\t\t\t= 1 << 2,\n\tSLI4_FC_DI_ERROR_TDPV\t\t\t= 1 << 3,\n\tSLI4_FC_DI_ERROR_UDB\t\t\t= 1 << 4,\n\tSLI4_FC_DI_ERROR_EDIR\t\t\t= 1 << 5,\n};\n\n \nenum sli4_dif_fields {\n\tSLI4_DIF_DISABLED,\n\tSLI4_DIF_PASS_THROUGH,\n\tSLI4_DIF_STRIP,\n\tSLI4_DIF_INSERT,\n};\n\n \nenum sli4_wqe_types {\n\tSLI4_WQE_ABORT\t\t\t\t= 0x0f,\n\tSLI4_WQE_ELS_REQUEST64\t\t\t= 0x8a,\n\tSLI4_WQE_FCP_IBIDIR64\t\t\t= 0xac,\n\tSLI4_WQE_FCP_IREAD64\t\t\t= 0x9a,\n\tSLI4_WQE_FCP_IWRITE64\t\t\t= 0x98,\n\tSLI4_WQE_FCP_ICMND64\t\t\t= 0x9c,\n\tSLI4_WQE_FCP_TRECEIVE64\t\t\t= 0xa1,\n\tSLI4_WQE_FCP_CONT_TRECEIVE64\t\t= 0xe5,\n\tSLI4_WQE_FCP_TRSP64\t\t\t= 0xa3,\n\tSLI4_WQE_FCP_TSEND64\t\t\t= 0x9f,\n\tSLI4_WQE_GEN_REQUEST64\t\t\t= 0xc2,\n\tSLI4_WQE_SEND_FRAME\t\t\t= 0xe1,\n\tSLI4_WQE_XMIT_BCAST64\t\t\t= 0x84,\n\tSLI4_WQE_XMIT_BLS_RSP\t\t\t= 0x97,\n\tSLI4_WQE_ELS_RSP64\t\t\t= 0x95,\n\tSLI4_WQE_XMIT_SEQUENCE64\t\t= 0x82,\n\tSLI4_WQE_REQUEUE_XRI\t\t\t= 0x93,\n};\n\n \nenum sli4_wqe_cmds {\n\tSLI4_CMD_FCP_IREAD64_WQE\t\t= 0x00,\n\tSLI4_CMD_FCP_ICMND64_WQE\t\t= 0x00,\n\tSLI4_CMD_FCP_IWRITE64_WQE\t\t= 0x01,\n\tSLI4_CMD_FCP_TRECEIVE64_WQE\t\t= 0x02,\n\tSLI4_CMD_FCP_TRSP64_WQE\t\t\t= 0x03,\n\tSLI4_CMD_FCP_TSEND64_WQE\t\t= 0x07,\n\tSLI4_CMD_GEN_REQUEST64_WQE\t\t= 0x08,\n\tSLI4_CMD_XMIT_BCAST64_WQE\t\t= 0x08,\n\tSLI4_CMD_XMIT_BLS_RSP64_WQE\t\t= 0x08,\n\tSLI4_CMD_ABORT_WQE\t\t\t= 0x08,\n\tSLI4_CMD_XMIT_SEQUENCE64_WQE\t\t= 0x08,\n\tSLI4_CMD_REQUEUE_XRI_WQE\t\t= 0x0a,\n\tSLI4_CMD_SEND_FRAME_WQE\t\t\t= 0x0a,\n};\n\n#define SLI4_WQE_SIZE\t\t0x05\n#define SLI4_WQE_EXT_SIZE\t0x06\n\n#define SLI4_WQE_BYTES\t\t(16 * sizeof(u32))\n#define SLI4_WQE_EXT_BYTES\t(32 * sizeof(u32))\n\n \n#define SLI4_MASK_CCP\t\t0xfe\n\n \nenum sli4_gen_wqe_flags {\n\tSLI4_GEN_WQE_EBDECNT\t= 0xf,\n\tSLI4_GEN_WQE_LEN_LOC\t= 0x3 << 7,\n\tSLI4_GEN_WQE_QOSD\t= 1 << 9,\n\tSLI4_GEN_WQE_XBL\t= 1 << 11,\n\tSLI4_GEN_WQE_HLM\t= 1 << 12,\n\tSLI4_GEN_WQE_IOD\t= 1 << 13,\n\tSLI4_GEN_WQE_DBDE\t= 1 << 14,\n\tSLI4_GEN_WQE_WQES\t= 1 << 15,\n\n\tSLI4_GEN_WQE_PRI\t= 0x7,\n\tSLI4_GEN_WQE_PV\t\t= 1 << 3,\n\tSLI4_GEN_WQE_EAT\t= 1 << 4,\n\tSLI4_GEN_WQE_XC\t\t= 1 << 5,\n\tSLI4_GEN_WQE_CCPE\t= 1 << 7,\n\n\tSLI4_GEN_WQE_CMDTYPE\t= 0xf,\n\tSLI4_GEN_WQE_WQEC\t= 1 << 7,\n};\n\nstruct sli4_generic_wqe {\n\t__le32\t\tcmd_spec0_5[6];\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\t__le16\t\tdw10w0_flags;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmdtype_wqec_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n};\n\n \nenum sli4_abort_wqe_flags {\n\tSLI4_ABRT_WQE_IR\t= 0x02,\n\n\tSLI4_ABRT_WQE_EBDECNT\t= 0xf,\n\tSLI4_ABRT_WQE_LEN_LOC\t= 0x3 << 7,\n\tSLI4_ABRT_WQE_QOSD\t= 1 << 9,\n\tSLI4_ABRT_WQE_XBL\t= 1 << 11,\n\tSLI4_ABRT_WQE_IOD\t= 1 << 13,\n\tSLI4_ABRT_WQE_DBDE\t= 1 << 14,\n\tSLI4_ABRT_WQE_WQES\t= 1 << 15,\n\n\tSLI4_ABRT_WQE_PRI\t= 0x7,\n\tSLI4_ABRT_WQE_PV\t= 1 << 3,\n\tSLI4_ABRT_WQE_EAT\t= 1 << 4,\n\tSLI4_ABRT_WQE_XC\t= 1 << 5,\n\tSLI4_ABRT_WQE_CCPE\t= 1 << 7,\n\n\tSLI4_ABRT_WQE_CMDTYPE\t= 0xf,\n\tSLI4_ABRT_WQE_WQEC\t= 1 << 7,\n};\n\nstruct sli4_abort_wqe {\n\t__le32\t\trsvd0;\n\t__le32\t\trsvd4;\n\t__le32\t\text_t_tag;\n\tu8\t\tia_ir_byte;\n\tu8\t\tcriteria;\n\t__le16\t\trsvd10;\n\t__le32\t\text_t_mask;\n\t__le32\t\tt_mask;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\tt_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\t__le16\t\tdw10w0_flags;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmdtype_wqec_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n};\n\nenum sli4_abort_criteria {\n\tSLI4_ABORT_CRITERIA_XRI_TAG = 0x01,\n\tSLI4_ABORT_CRITERIA_ABORT_TAG,\n\tSLI4_ABORT_CRITERIA_REQUEST_TAG,\n\tSLI4_ABORT_CRITERIA_EXT_ABORT_TAG,\n};\n\nenum sli4_abort_type {\n\tSLI4_ABORT_XRI,\n\tSLI4_ABORT_ABORT_ID,\n\tSLI4_ABORT_REQUEST_ID,\n\tSLI4_ABORT_MAX,\t\t \n};\n\n \nenum sli4_els_req_wqe_flags {\n\tSLI4_REQ_WQE_QOSD\t\t= 0x2,\n\tSLI4_REQ_WQE_DBDE\t\t= 0x40,\n\tSLI4_REQ_WQE_XBL\t\t= 0x8,\n\tSLI4_REQ_WQE_XC\t\t\t= 0x20,\n\tSLI4_REQ_WQE_IOD\t\t= 0x20,\n\tSLI4_REQ_WQE_HLM\t\t= 0x10,\n\tSLI4_REQ_WQE_CCPE\t\t= 0x80,\n\tSLI4_REQ_WQE_EAT\t\t= 0x10,\n\tSLI4_REQ_WQE_WQES\t\t= 0x80,\n\tSLI4_REQ_WQE_PU_SHFT\t\t= 4,\n\tSLI4_REQ_WQE_CT_SHFT\t\t= 2,\n\tSLI4_REQ_WQE_CT\t\t\t= 0xc,\n\tSLI4_REQ_WQE_ELSID_SHFT\t\t= 4,\n\tSLI4_REQ_WQE_SP_SHFT\t\t= 24,\n\tSLI4_REQ_WQE_LEN_LOC_BIT1\t= 0x80,\n\tSLI4_REQ_WQE_LEN_LOC_BIT2\t= 0x1,\n};\n\nstruct sli4_els_request64_wqe {\n\tstruct sli4_bde\tels_request_payload;\n\t__le32\t\tels_request_payload_length;\n\t__le32\t\tsid_sp_dword;\n\t__le32\t\tremote_id_dword;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\ttemporary_rpi;\n\tu8\t\tlen_loc1_byte;\n\tu8\t\tqosd_xbl_hlm_iod_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmdtype_elsid_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\tstruct sli4_bde\tels_response_payload_bde;\n\t__le32\t\tmax_response_payload_length;\n};\n\n \nenum sli4_icmd_wqe_flags {\n\tSLI4_ICMD_WQE_DBDE\t\t= 0x40,\n\tSLI4_ICMD_WQE_XBL\t\t= 0x8,\n\tSLI4_ICMD_WQE_XC\t\t= 0x20,\n\tSLI4_ICMD_WQE_IOD\t\t= 0x20,\n\tSLI4_ICMD_WQE_HLM\t\t= 0x10,\n\tSLI4_ICMD_WQE_CCPE\t\t= 0x80,\n\tSLI4_ICMD_WQE_EAT\t\t= 0x10,\n\tSLI4_ICMD_WQE_APPID\t\t= 0x10,\n\tSLI4_ICMD_WQE_WQES\t\t= 0x80,\n\tSLI4_ICMD_WQE_PU_SHFT\t\t= 4,\n\tSLI4_ICMD_WQE_CT_SHFT\t\t= 2,\n\tSLI4_ICMD_WQE_BS_SHFT\t\t= 4,\n\tSLI4_ICMD_WQE_LEN_LOC_BIT1\t= 0x80,\n\tSLI4_ICMD_WQE_LEN_LOC_BIT2\t= 0x1,\n};\n\nstruct sli4_fcp_icmnd64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le16\t\tpayload_offset_length;\n\t__le16\t\tfcp_cmd_buffer_length;\n\t__le32\t\trsvd12;\n\t__le32\t\tremote_n_port_id_dword;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tdif_ct_bs_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_pu_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\tu8\t\tlen_loc1_byte;\n\tu8\t\tqosd_xbl_hlm_iod_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\trsvd44;\n\t__le32\t\trsvd48;\n\t__le32\t\trsvd52;\n\t__le32\t\trsvd56;\n};\n\n \nenum sli4_ir_wqe_flags {\n\tSLI4_IR_WQE_DBDE\t\t= 0x40,\n\tSLI4_IR_WQE_XBL\t\t\t= 0x8,\n\tSLI4_IR_WQE_XC\t\t\t= 0x20,\n\tSLI4_IR_WQE_IOD\t\t\t= 0x20,\n\tSLI4_IR_WQE_HLM\t\t\t= 0x10,\n\tSLI4_IR_WQE_CCPE\t\t= 0x80,\n\tSLI4_IR_WQE_EAT\t\t\t= 0x10,\n\tSLI4_IR_WQE_APPID\t\t= 0x10,\n\tSLI4_IR_WQE_WQES\t\t= 0x80,\n\tSLI4_IR_WQE_PU_SHFT\t\t= 4,\n\tSLI4_IR_WQE_CT_SHFT\t\t= 2,\n\tSLI4_IR_WQE_BS_SHFT\t\t= 4,\n\tSLI4_IR_WQE_LEN_LOC_BIT1\t= 0x80,\n\tSLI4_IR_WQE_LEN_LOC_BIT2\t= 0x1,\n};\n\nstruct sli4_fcp_iread64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le16\t\tpayload_offset_length;\n\t__le16\t\tfcp_cmd_buffer_length;\n\n\t__le32\t\ttotal_transfer_length;\n\n\t__le32\t\tremote_n_port_id_dword;\n\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\n\tu8\t\tdif_ct_bs_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_pu_byte;\n\tu8\t\ttimer;\n\n\t__le32\t\tabort_tag;\n\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\n\tu8\t\tlen_loc1_byte;\n\tu8\t\tqosd_xbl_hlm_iod_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\n\t__le32\t\trsvd44;\n\tstruct sli4_bde\tfirst_data_bde;\n};\n\n \nenum sli4_iwr_wqe_flags {\n\tSLI4_IWR_WQE_DBDE\t\t= 0x40,\n\tSLI4_IWR_WQE_XBL\t\t= 0x8,\n\tSLI4_IWR_WQE_XC\t\t\t= 0x20,\n\tSLI4_IWR_WQE_IOD\t\t= 0x20,\n\tSLI4_IWR_WQE_HLM\t\t= 0x10,\n\tSLI4_IWR_WQE_DNRX\t\t= 0x10,\n\tSLI4_IWR_WQE_CCPE\t\t= 0x80,\n\tSLI4_IWR_WQE_EAT\t\t= 0x10,\n\tSLI4_IWR_WQE_APPID\t\t= 0x10,\n\tSLI4_IWR_WQE_WQES\t\t= 0x80,\n\tSLI4_IWR_WQE_PU_SHFT\t\t= 4,\n\tSLI4_IWR_WQE_CT_SHFT\t\t= 2,\n\tSLI4_IWR_WQE_BS_SHFT\t\t= 4,\n\tSLI4_IWR_WQE_LEN_LOC_BIT1\t= 0x80,\n\tSLI4_IWR_WQE_LEN_LOC_BIT2\t= 0x1,\n};\n\nstruct sli4_fcp_iwrite64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le16\t\tpayload_offset_length;\n\t__le16\t\tfcp_cmd_buffer_length;\n\t__le16\t\ttotal_transfer_length;\n\t__le16\t\tinitial_transfer_length;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tdif_ct_bs_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_pu_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\tu8\t\tlen_loc1_byte;\n\tu8\t\tqosd_xbl_hlm_iod_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\tremote_n_port_id_dword;\n\tstruct sli4_bde\tfirst_data_bde;\n};\n\nstruct sli4_fcp_128byte_wqe {\n\tu32 dw[32];\n};\n\n \nenum sli4_trcv_wqe_flags {\n\tSLI4_TRCV_WQE_DBDE\t\t= 0x40,\n\tSLI4_TRCV_WQE_XBL\t\t= 0x8,\n\tSLI4_TRCV_WQE_AR\t\t= 0x8,\n\tSLI4_TRCV_WQE_XC\t\t= 0x20,\n\tSLI4_TRCV_WQE_IOD\t\t= 0x20,\n\tSLI4_TRCV_WQE_HLM\t\t= 0x10,\n\tSLI4_TRCV_WQE_DNRX\t\t= 0x10,\n\tSLI4_TRCV_WQE_CCPE\t\t= 0x80,\n\tSLI4_TRCV_WQE_EAT\t\t= 0x10,\n\tSLI4_TRCV_WQE_APPID\t\t= 0x10,\n\tSLI4_TRCV_WQE_WQES\t\t= 0x80,\n\tSLI4_TRCV_WQE_PU_SHFT\t\t= 4,\n\tSLI4_TRCV_WQE_CT_SHFT\t\t= 2,\n\tSLI4_TRCV_WQE_BS_SHFT\t\t= 4,\n\tSLI4_TRCV_WQE_LEN_LOC_BIT2\t= 0x1,\n};\n\nstruct sli4_fcp_treceive64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\tpayload_offset_length;\n\t__le32\t\trelative_offset;\n\tunion {\n\t\t__le16\tsec_xri_tag;\n\t\t__le16\trsvd;\n\t\t__le32\tdword;\n\t} dword5;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tdif_ct_bs_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_ar_pu_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\tremote_xid;\n\tu8\t\tlloc1_appid;\n\tu8\t\tqosd_xbl_hlm_iod_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\tfcp_data_receive_length;\n\tstruct sli4_bde\tfirst_data_bde;\n};\n\n \nenum sli4_trsp_wqe_flags {\n\tSLI4_TRSP_WQE_AG\t= 0x8,\n\tSLI4_TRSP_WQE_DBDE\t= 0x40,\n\tSLI4_TRSP_WQE_XBL\t= 0x8,\n\tSLI4_TRSP_WQE_XC\t= 0x20,\n\tSLI4_TRSP_WQE_HLM\t= 0x10,\n\tSLI4_TRSP_WQE_DNRX\t= 0x10,\n\tSLI4_TRSP_WQE_CCPE\t= 0x80,\n\tSLI4_TRSP_WQE_EAT\t= 0x10,\n\tSLI4_TRSP_WQE_APPID\t= 0x10,\n\tSLI4_TRSP_WQE_WQES\t= 0x80,\n};\n\nstruct sli4_fcp_trsp64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\tfcp_response_length;\n\t__le32\t\trsvd12;\n\t__le32\t\tdword5;\n\t__le16\t\txri_tag;\n\t__le16\t\trpi;\n\tu8\t\tct_dnrx_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_ag_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\tremote_xid;\n\tu8\t\tlloc1_appid;\n\tu8\t\tqosd_xbl_hlm_dbde_wqes;\n\tu8\t\teat_xc_ccpe;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\trsvd44;\n\t__le32\t\trsvd48;\n\t__le32\t\trsvd52;\n\t__le32\t\trsvd56;\n};\n\n \nenum sli4_tsend_wqe_flags {\n\tSLI4_TSEND_WQE_XBL\t= 0x8,\n\tSLI4_TSEND_WQE_DBDE\t= 0x40,\n\tSLI4_TSEND_WQE_IOD\t= 0x20,\n\tSLI4_TSEND_WQE_QOSD\t= 0x2,\n\tSLI4_TSEND_WQE_HLM\t= 0x10,\n\tSLI4_TSEND_WQE_PU_SHFT\t= 4,\n\tSLI4_TSEND_WQE_AR\t= 0x8,\n\tSLI4_TSEND_CT_SHFT\t= 2,\n\tSLI4_TSEND_BS_SHFT\t= 4,\n\tSLI4_TSEND_LEN_LOC_BIT2 = 0x1,\n\tSLI4_TSEND_CCPE\t\t= 0x80,\n\tSLI4_TSEND_APPID_VALID\t= 0x20,\n\tSLI4_TSEND_WQES\t\t= 0x80,\n\tSLI4_TSEND_XC\t\t= 0x20,\n\tSLI4_TSEND_EAT\t\t= 0x10,\n};\n\nstruct sli4_fcp_tsend64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\tpayload_offset_length;\n\t__le32\t\trelative_offset;\n\t__le32\t\tdword5;\n\t__le16\t\txri_tag;\n\t__le16\t\trpi;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_pu_ar_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\tremote_xid;\n\tu8\t\tdw10byte0;\n\tu8\t\tll_qd_xbl_hlm_iod_dbde;\n\tu8\t\tdw10byte2;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd45;\n\t__le16\t\tcq_id;\n\t__le32\t\tfcp_data_transmit_length;\n\tstruct sli4_bde\tfirst_data_bde;\n};\n\n \nenum sli4_gen_req_wqe_flags {\n\tSLI4_GEN_REQ64_WQE_XBL\t= 0x8,\n\tSLI4_GEN_REQ64_WQE_DBDE\t= 0x40,\n\tSLI4_GEN_REQ64_WQE_IOD\t= 0x20,\n\tSLI4_GEN_REQ64_WQE_QOSD\t= 0x2,\n\tSLI4_GEN_REQ64_WQE_HLM\t= 0x10,\n\tSLI4_GEN_REQ64_CT_SHFT\t= 2,\n};\n\nstruct sli4_gen_request64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\trequest_payload_length;\n\t__le32\t\trelative_offset;\n\tu8\t\trsvd17;\n\tu8\t\tdf_ctl;\n\tu8\t\ttype;\n\tu8\t\tr_ctl;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\tu8\t\tdw10flags0;\n\tu8\t\tdw10flags1;\n\tu8\t\tdw10flags2;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\tremote_n_port_id_dword;\n\t__le32\t\trsvd48;\n\t__le32\t\trsvd52;\n\t__le32\t\tmax_response_payload_length;\n};\n\n \nenum sli4_sf_wqe_flags {\n\tSLI4_SF_WQE_DBDE\t= 0x40,\n\tSLI4_SF_PU\t\t= 0x30,\n\tSLI4_SF_CT\t\t= 0xc,\n\tSLI4_SF_QOSD\t\t= 0x2,\n\tSLI4_SF_LEN_LOC_BIT1\t= 0x80,\n\tSLI4_SF_LEN_LOC_BIT2\t= 0x1,\n\tSLI4_SF_XC\t\t= 0x20,\n\tSLI4_SF_XBL\t\t= 0x8,\n};\n\nstruct sli4_send_frame_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\tframe_length;\n\t__le32\t\tfc_header_0_1[2];\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tdw7flags0;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\tu8\t\teof;\n\tu8\t\tsof;\n\tu8\t\tdw10flags0;\n\tu8\t\tdw10flags1;\n\tu8\t\tdw10flags2;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_byte;\n\tu8\t\trsvd41;\n\t__le16\t\tcq_id;\n\t__le32\t\tfc_header_2_5[4];\n};\n\n \nenum sli4_seq_wqe_flags {\n\tSLI4_SEQ_WQE_DBDE\t\t= 0x4000,\n\tSLI4_SEQ_WQE_XBL\t\t= 0x800,\n\tSLI4_SEQ_WQE_SI\t\t\t= 0x4,\n\tSLI4_SEQ_WQE_FT\t\t\t= 0x8,\n\tSLI4_SEQ_WQE_XO\t\t\t= 0x40,\n\tSLI4_SEQ_WQE_LS\t\t\t= 0x80,\n\tSLI4_SEQ_WQE_DIF\t\t= 0x3,\n\tSLI4_SEQ_WQE_BS\t\t\t= 0x70,\n\tSLI4_SEQ_WQE_PU\t\t\t= 0x30,\n\tSLI4_SEQ_WQE_HLM\t\t= 0x1000,\n\tSLI4_SEQ_WQE_IOD_SHIFT\t\t= 13,\n\tSLI4_SEQ_WQE_CT_SHIFT\t\t= 2,\n\tSLI4_SEQ_WQE_LEN_LOC_SHIFT\t= 7,\n};\n\nstruct sli4_xmit_sequence64_wqe {\n\tstruct sli4_bde\tbde;\n\t__le32\t\tremote_n_port_id_dword;\n\t__le32\t\trelative_offset;\n\tu8\t\tdw5flags0;\n\tu8\t\tdf_ctl;\n\tu8\t\ttype;\n\tu8\t\tr_ctl;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tdw7flags0;\n\tu8\t\tcommand;\n\tu8\t\tdw7flags1;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\tremote_xid;\n\t__le16\t\tdw10w0;\n\tu8\t\tdw10flags0;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_wqec_byte;\n\tu8\t\trsvd45;\n\t__le16\t\tcq_id;\n\t__le32\t\tsequence_payload_len;\n\t__le32\t\trsvd48;\n\t__le32\t\trsvd52;\n\t__le32\t\trsvd56;\n};\n\n \nenum sli4_requeue_wqe_flags {\n\tSLI4_REQU_XRI_WQE_XC\t= 0x20,\n\tSLI4_REQU_XRI_WQE_QOSD\t= 0x2,\n};\n\nstruct sli4_requeue_xri_wqe {\n\t__le32\t\trsvd0;\n\t__le32\t\trsvd4;\n\t__le32\t\trsvd8;\n\t__le32\t\trsvd12;\n\t__le32\t\trsvd16;\n\t__le32\t\trsvd20;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\trsvd32;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd34;\n\t__le16\t\tflags0;\n\t__le16\t\tflags1;\n\t__le16\t\tflags2;\n\tu8\t\tccp;\n\tu8\t\tcmd_type_wqec_byte;\n\tu8\t\trsvd42;\n\t__le16\t\tcq_id;\n\t__le32\t\trsvd44;\n\t__le32\t\trsvd48;\n\t__le32\t\trsvd52;\n\t__le32\t\trsvd56;\n};\n\n \nenum sli4_bls_rsp_wqe_flags {\n\tSLI4_BLS_RSP_RID\t\t= 0xffffff,\n\tSLI4_BLS_RSP_WQE_AR\t\t= 0x40000000,\n\tSLI4_BLS_RSP_WQE_CT_SHFT\t= 2,\n\tSLI4_BLS_RSP_WQE_QOSD\t\t= 0x2,\n\tSLI4_BLS_RSP_WQE_HLM\t\t= 0x10,\n};\n\nstruct sli4_xmit_bls_rsp_wqe {\n\t__le32\t\tpayload_word0;\n\t__le16\t\trx_id;\n\t__le16\t\tox_id;\n\t__le16\t\thigh_seq_cnt;\n\t__le16\t\tlow_seq_cnt;\n\t__le32\t\trsvd12;\n\t__le32\t\tlocal_n_port_id_dword;\n\t__le32\t\tremote_id_dword;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tdw8flags0;\n\tu8\t\tcommand;\n\tu8\t\tdw8flags1;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\trsvd38;\n\tu8\t\tdw11flags0;\n\tu8\t\tdw11flags1;\n\tu8\t\tdw11flags2;\n\tu8\t\tccp;\n\tu8\t\tdw12flags0;\n\tu8\t\trsvd45;\n\t__le16\t\tcq_id;\n\t__le16\t\ttemporary_rpi;\n\tu8\t\trsvd50;\n\tu8\t\trsvd51;\n\t__le32\t\trsvd52;\n\t__le32\t\trsvd56;\n\t__le32\t\trsvd60;\n};\n\nenum sli_bls_type {\n\tSLI4_SLI_BLS_ACC,\n\tSLI4_SLI_BLS_RJT,\n\tSLI4_SLI_BLS_MAX\n};\n\nstruct sli_bls_payload {\n\tenum sli_bls_type\ttype;\n\t__le16\t\t\tox_id;\n\t__le16\t\t\trx_id;\n\tunion {\n\t\tstruct {\n\t\t\tu8\tseq_id_validity;\n\t\t\tu8\tseq_id_last;\n\t\t\tu8\trsvd2;\n\t\t\tu8\trsvd3;\n\t\t\tu16\tox_id;\n\t\t\tu16\trx_id;\n\t\t\t__le16\tlow_seq_cnt;\n\t\t\t__le16\thigh_seq_cnt;\n\t\t} acc;\n\t\tstruct {\n\t\t\tu8\tvendor_unique;\n\t\t\tu8\treason_explanation;\n\t\t\tu8\treason_code;\n\t\t\tu8\trsvd3;\n\t\t} rjt;\n\t} u;\n};\n\n \n\nenum sli4_els_rsp_flags {\n\tSLI4_ELS_SID\t\t= 0xffffff,\n\tSLI4_ELS_RID\t\t= 0xffffff,\n\tSLI4_ELS_DBDE\t\t= 0x40,\n\tSLI4_ELS_XBL\t\t= 0x8,\n\tSLI4_ELS_IOD\t\t= 0x20,\n\tSLI4_ELS_QOSD\t\t= 0x2,\n\tSLI4_ELS_XC\t\t= 0x20,\n\tSLI4_ELS_CT_OFFSET\t= 0X2,\n\tSLI4_ELS_SP\t\t= 0X1000000,\n\tSLI4_ELS_HLM\t\t= 0X10,\n};\n\nstruct sli4_xmit_els_rsp64_wqe {\n\tstruct sli4_bde\tels_response_payload;\n\t__le32\t\tels_response_payload_length;\n\t__le32\t\tsid_dw;\n\t__le32\t\trid_dw;\n\t__le16\t\txri_tag;\n\t__le16\t\tcontext_tag;\n\tu8\t\tct_byte;\n\tu8\t\tcommand;\n\tu8\t\tclass_byte;\n\tu8\t\ttimer;\n\t__le32\t\tabort_tag;\n\t__le16\t\trequest_tag;\n\t__le16\t\tox_id;\n\tu8\t\tflags1;\n\tu8\t\tflags2;\n\tu8\t\tflags3;\n\tu8\t\tflags4;\n\tu8\t\tcmd_type_wqec;\n\tu8\t\trsvd34;\n\t__le16\t\tcq_id;\n\t__le16\t\ttemporary_rpi;\n\t__le16\t\trsvd38;\n\tu32\t\trsvd40;\n\tu32\t\trsvd44;\n\tu32\t\trsvd48;\n};\n\n \nenum sli4_fc_local_rej_codes {\n\tSLI4_FC_LOCAL_REJECT_UNKNOWN,\n\tSLI4_FC_LOCAL_REJECT_MISSING_CONTINUE,\n\tSLI4_FC_LOCAL_REJECT_SEQUENCE_TIMEOUT,\n\tSLI4_FC_LOCAL_REJECT_INTERNAL_ERROR,\n\tSLI4_FC_LOCAL_REJECT_INVALID_RPI,\n\tSLI4_FC_LOCAL_REJECT_NO_XRI,\n\tSLI4_FC_LOCAL_REJECT_ILLEGAL_COMMAND,\n\tSLI4_FC_LOCAL_REJECT_XCHG_DROPPED,\n\tSLI4_FC_LOCAL_REJECT_ILLEGAL_FIELD,\n\tSLI4_FC_LOCAL_REJECT_RPI_SUSPENDED,\n\tSLI4_FC_LOCAL_REJECT_RSVD,\n\tSLI4_FC_LOCAL_REJECT_RSVD1,\n\tSLI4_FC_LOCAL_REJECT_NO_ABORT_MATCH,\n\tSLI4_FC_LOCAL_REJECT_TX_DMA_FAILED,\n\tSLI4_FC_LOCAL_REJECT_RX_DMA_FAILED,\n\tSLI4_FC_LOCAL_REJECT_ILLEGAL_FRAME,\n\tSLI4_FC_LOCAL_REJECT_RSVD2,\n\tSLI4_FC_LOCAL_REJECT_NO_RESOURCES, \n\tSLI4_FC_LOCAL_REJECT_FCP_CONF_FAILURE,\n\tSLI4_FC_LOCAL_REJECT_ILLEGAL_LENGTH,\n\tSLI4_FC_LOCAL_REJECT_UNSUPPORTED_FEATURE,\n\tSLI4_FC_LOCAL_REJECT_ABORT_IN_PROGRESS,\n\tSLI4_FC_LOCAL_REJECT_ABORT_REQUESTED,\n\tSLI4_FC_LOCAL_REJECT_RCV_BUFFER_TIMEOUT,\n\tSLI4_FC_LOCAL_REJECT_LOOP_OPEN_FAILURE,\n\tSLI4_FC_LOCAL_REJECT_RSVD3,\n\tSLI4_FC_LOCAL_REJECT_LINK_DOWN,\n\tSLI4_FC_LOCAL_REJECT_CORRUPTED_DATA,\n\tSLI4_FC_LOCAL_REJECT_CORRUPTED_RPI,\n\tSLI4_FC_LOCAL_REJECT_OUTOFORDER_DATA,\n\tSLI4_FC_LOCAL_REJECT_OUTOFORDER_ACK,\n\tSLI4_FC_LOCAL_REJECT_DUP_FRAME,\n\tSLI4_FC_LOCAL_REJECT_LINK_CONTROL_FRAME, \n\tSLI4_FC_LOCAL_REJECT_BAD_HOST_ADDRESS,\n\tSLI4_FC_LOCAL_REJECT_RSVD4,\n\tSLI4_FC_LOCAL_REJECT_MISSING_HDR_BUFFER,\n\tSLI4_FC_LOCAL_REJECT_MSEQ_CHAIN_CORRUPTED,\n\tSLI4_FC_LOCAL_REJECT_ABORTMULT_REQUESTED,\n\tSLI4_FC_LOCAL_REJECT_BUFFER_SHORTAGE\t= 0x28,\n\tSLI4_FC_LOCAL_REJECT_RCV_XRIBUF_WAITING,\n\tSLI4_FC_LOCAL_REJECT_INVALID_VPI\t= 0x2e,\n\tSLI4_FC_LOCAL_REJECT_NO_FPORT_DETECTED,\n\tSLI4_FC_LOCAL_REJECT_MISSING_XRIBUF,\n\tSLI4_FC_LOCAL_REJECT_RSVD5,\n\tSLI4_FC_LOCAL_REJECT_INVALID_XRI,\n\tSLI4_FC_LOCAL_REJECT_INVALID_RELOFFSET\t= 0x40,\n\tSLI4_FC_LOCAL_REJECT_MISSING_RELOFFSET,\n\tSLI4_FC_LOCAL_REJECT_INSUFF_BUFFERSPACE,\n\tSLI4_FC_LOCAL_REJECT_MISSING_SI,\n\tSLI4_FC_LOCAL_REJECT_MISSING_ES,\n\tSLI4_FC_LOCAL_REJECT_INCOMPLETE_XFER,\n\tSLI4_FC_LOCAL_REJECT_SLER_FAILURE,\n\tSLI4_FC_LOCAL_REJECT_SLER_CMD_RCV_FAILURE,\n\tSLI4_FC_LOCAL_REJECT_SLER_REC_RJT_ERR,\n\tSLI4_FC_LOCAL_REJECT_SLER_REC_SRR_RETRY_ERR,\n\tSLI4_FC_LOCAL_REJECT_SLER_SRR_RJT_ERR,\n\tSLI4_FC_LOCAL_REJECT_RSVD6,\n\tSLI4_FC_LOCAL_REJECT_SLER_RRQ_RJT_ERR,\n\tSLI4_FC_LOCAL_REJECT_SLER_RRQ_RETRY_ERR,\n\tSLI4_FC_LOCAL_REJECT_SLER_ABTS_ERR,\n};\n\nenum sli4_async_rcqe_flags {\n\tSLI4_RACQE_RQ_EL_INDX\t= 0xfff,\n\tSLI4_RACQE_FCFI\t\t= 0x3f,\n\tSLI4_RACQE_HDPL\t\t= 0x3f,\n\tSLI4_RACQE_RQ_ID\t= 0xffc0,\n};\n\nstruct sli4_fc_async_rcqe {\n\tu8\t\trsvd0;\n\tu8\t\tstatus;\n\t__le16\t\trq_elmt_indx_word;\n\t__le32\t\trsvd4;\n\t__le16\t\tfcfi_rq_id_word;\n\t__le16\t\tdata_placement_length;\n\tu8\t\tsof_byte;\n\tu8\t\teof_byte;\n\tu8\t\tcode;\n\tu8\t\thdpl_byte;\n};\n\nstruct sli4_fc_async_rcqe_v1 {\n\tu8\t\trsvd0;\n\tu8\t\tstatus;\n\t__le16\t\trq_elmt_indx_word;\n\tu8\t\tfcfi_byte;\n\tu8\t\trsvd5;\n\t__le16\t\trsvd6;\n\t__le16\t\trq_id;\n\t__le16\t\tdata_placement_length;\n\tu8\t\tsof_byte;\n\tu8\t\teof_byte;\n\tu8\t\tcode;\n\tu8\t\thdpl_byte;\n};\n\nenum sli4_fc_async_rq_status {\n\tSLI4_FC_ASYNC_RQ_SUCCESS = 0x10,\n\tSLI4_FC_ASYNC_RQ_BUF_LEN_EXCEEDED,\n\tSLI4_FC_ASYNC_RQ_INSUFF_BUF_NEEDED,\n\tSLI4_FC_ASYNC_RQ_INSUFF_BUF_FRM_DISC,\n\tSLI4_FC_ASYNC_RQ_DMA_FAILURE,\n};\n\n#define SLI4_RCQE_RQ_EL_INDX\t0xfff\n\nstruct sli4_fc_coalescing_rcqe {\n\tu8\t\trsvd0;\n\tu8\t\tstatus;\n\t__le16\t\trq_elmt_indx_word;\n\t__le32\t\trsvd4;\n\t__le16\t\trq_id;\n\t__le16\t\tseq_placement_length;\n\t__le16\t\trsvd14;\n\tu8\t\tcode;\n\tu8\t\tvld_byte;\n};\n\n#define SLI4_FC_COALESCE_RQ_SUCCESS\t\t0x10\n#define SLI4_FC_COALESCE_RQ_INSUFF_XRI_NEEDED\t0x18\n\nenum sli4_optimized_write_cmd_cqe_flags {\n\tSLI4_OCQE_RQ_EL_INDX\t= 0x7f,\t\t \n\tSLI4_OCQE_FCFI\t\t= 0x3f,\t\t \n\tSLI4_OCQE_OOX\t\t= 1 << 6,\t \n\tSLI4_OCQE_AGXR\t\t= 1 << 7,\t \n\tSLI4_OCQE_HDPL\t\t= 0x3f,\t\t \n};\n\nstruct sli4_fc_optimized_write_cmd_cqe {\n\tu8\t\trsvd0;\n\tu8\t\tstatus;\n\t__le16\t\tw1;\n\tu8\t\tflags0;\n\tu8\t\tflags1;\n\t__le16\t\txri;\n\t__le16\t\trq_id;\n\t__le16\t\tdata_placement_length;\n\t__le16\t\trpi;\n\tu8\t\tcode;\n\tu8\t\thdpl_vld;\n};\n\n#define\tSLI4_OCQE_XB\t\t0x10\n\nstruct sli4_fc_optimized_write_data_cqe {\n\tu8\t\thw_status;\n\tu8\t\tstatus;\n\t__le16\t\txri;\n\t__le32\t\ttotal_data_placed;\n\t__le32\t\textended_status;\n\t__le16\t\trsvd12;\n\tu8\t\tcode;\n\tu8\t\tflags;\n};\n\nstruct sli4_fc_xri_aborted_cqe {\n\tu8\t\trsvd0;\n\tu8\t\tstatus;\n\t__le16\t\trsvd2;\n\t__le32\t\textended_status;\n\t__le16\t\txri;\n\t__le16\t\tremote_xid;\n\t__le16\t\trsvd12;\n\tu8\t\tcode;\n\tu8\t\tflags;\n};\n\nenum sli4_generic_ctx {\n\tSLI4_GENERIC_CONTEXT_RPI,\n\tSLI4_GENERIC_CONTEXT_VPI,\n\tSLI4_GENERIC_CONTEXT_VFI,\n\tSLI4_GENERIC_CONTEXT_FCFI,\n};\n\n#define SLI4_GENERIC_CLASS_CLASS_2\t\t0x1\n#define SLI4_GENERIC_CLASS_CLASS_3\t\t0x2\n\n#define SLI4_ELS_REQUEST64_DIR_WRITE\t\t0x0\n#define SLI4_ELS_REQUEST64_DIR_READ\t\t0x1\n\nenum sli4_els_request {\n\tSLI4_ELS_REQUEST64_OTHER,\n\tSLI4_ELS_REQUEST64_LOGO,\n\tSLI4_ELS_REQUEST64_FDISC,\n\tSLI4_ELS_REQUEST64_FLOGIN,\n\tSLI4_ELS_REQUEST64_PLOGI,\n};\n\nenum sli4_els_cmd_type {\n\tSLI4_ELS_REQUEST64_CMD_GEN\t\t= 0x08,\n\tSLI4_ELS_REQUEST64_CMD_NON_FABRIC\t= 0x0c,\n\tSLI4_ELS_REQUEST64_CMD_FABRIC\t\t= 0x0d,\n};\n\n#define SLI_PAGE_SIZE\t\t\t\tSZ_4K\n\n#define SLI4_BMBX_TIMEOUT_MSEC\t\t\t30000\n#define SLI4_FW_READY_TIMEOUT_MSEC\t\t30000\n\n#define SLI4_BMBX_DELAY_US\t\t\t1000\t \n#define SLI4_INIT_PORT_DELAY_US\t\t\t10000\t \n\nstatic inline u32\nsli_page_count(size_t bytes, u32 page_size)\n{\n\tif (!page_size)\n\t\treturn 0;\n\n\treturn (bytes + (page_size - 1)) >> __ffs(page_size);\n}\n\n \n\nstruct sli4_mbox_command_header {\n\tu8\tresvd0;\n\tu8\tcommand;\n\t__le16\tstatus;\t \n};\n\nenum sli4_mbx_cmd_value {\n\tSLI4_MBX_CMD_CONFIG_LINK\t= 0x07,\n\tSLI4_MBX_CMD_DUMP\t\t= 0x17,\n\tSLI4_MBX_CMD_DOWN_LINK\t\t= 0x06,\n\tSLI4_MBX_CMD_INIT_LINK\t\t= 0x05,\n\tSLI4_MBX_CMD_INIT_VFI\t\t= 0xa3,\n\tSLI4_MBX_CMD_INIT_VPI\t\t= 0xa4,\n\tSLI4_MBX_CMD_POST_XRI\t\t= 0xa7,\n\tSLI4_MBX_CMD_RELEASE_XRI\t= 0xac,\n\tSLI4_MBX_CMD_READ_CONFIG\t= 0x0b,\n\tSLI4_MBX_CMD_READ_STATUS\t= 0x0e,\n\tSLI4_MBX_CMD_READ_NVPARMS\t= 0x02,\n\tSLI4_MBX_CMD_READ_REV\t\t= 0x11,\n\tSLI4_MBX_CMD_READ_LNK_STAT\t= 0x12,\n\tSLI4_MBX_CMD_READ_SPARM64\t= 0x8d,\n\tSLI4_MBX_CMD_READ_TOPOLOGY\t= 0x95,\n\tSLI4_MBX_CMD_REG_FCFI\t\t= 0xa0,\n\tSLI4_MBX_CMD_REG_FCFI_MRQ\t= 0xaf,\n\tSLI4_MBX_CMD_REG_RPI\t\t= 0x93,\n\tSLI4_MBX_CMD_REG_RX_RQ\t\t= 0xa6,\n\tSLI4_MBX_CMD_REG_VFI\t\t= 0x9f,\n\tSLI4_MBX_CMD_REG_VPI\t\t= 0x96,\n\tSLI4_MBX_CMD_RQST_FEATURES\t= 0x9d,\n\tSLI4_MBX_CMD_SLI_CONFIG\t\t= 0x9b,\n\tSLI4_MBX_CMD_UNREG_FCFI\t\t= 0xa2,\n\tSLI4_MBX_CMD_UNREG_RPI\t\t= 0x14,\n\tSLI4_MBX_CMD_UNREG_VFI\t\t= 0xa1,\n\tSLI4_MBX_CMD_UNREG_VPI\t\t= 0x97,\n\tSLI4_MBX_CMD_WRITE_NVPARMS\t= 0x03,\n\tSLI4_MBX_CMD_CFG_AUTO_XFER_RDY\t= 0xad,\n};\n\nenum sli4_mbx_status {\n\tSLI4_MBX_STATUS_SUCCESS\t\t= 0x0000,\n\tSLI4_MBX_STATUS_FAILURE\t\t= 0x0001,\n\tSLI4_MBX_STATUS_RPI_NOT_REG\t= 0x1400,\n};\n\n \nenum sli4_cmd_config_link_flags {\n\tSLI4_CFG_LINK_BBSCN = 0xf00,\n\tSLI4_CFG_LINK_CSCN  = 0x1000,\n};\n\nstruct sli4_cmd_config_link {\n\tstruct sli4_mbox_command_header\thdr;\n\tu8\t\tmaxbbc;\n\tu8\t\trsvd5;\n\tu8\t\trsvd6;\n\tu8\t\trsvd7;\n\tu8\t\talpa;\n\t__le16\t\tn_port_id;\n\tu8\t\trsvd11;\n\t__le32\t\trsvd12;\n\t__le32\t\te_d_tov;\n\t__le32\t\tlp_tov;\n\t__le32\t\tr_a_tov;\n\t__le32\t\tr_t_tov;\n\t__le32\t\tal_tov;\n\t__le32\t\trsvd36;\n\t__le32\t\tbbscn_dword;\n};\n\n#define SLI4_DUMP4_TYPE\t\t0xf\n\n#define SLI4_WKI_TAG_SAT_TEM\t0x1040\n\nstruct sli4_cmd_dump4 {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\ttype_dword;\n\t__le16\t\twki_selection;\n\t__le16\t\trsvd10;\n\t__le32\t\trsvd12;\n\t__le32\t\treturned_byte_cnt;\n\t__le32\t\tresp_data[59];\n};\n\n \nenum sli4_init_link_flags {\n\tSLI4_INIT_LINK_F_LOOPBACK\t= 1 << 0,\n\n\tSLI4_INIT_LINK_F_P2P_ONLY\t= 1 << 1,\n\tSLI4_INIT_LINK_F_FCAL_ONLY\t= 2 << 1,\n\tSLI4_INIT_LINK_F_FCAL_FAIL_OVER\t= 0 << 1,\n\tSLI4_INIT_LINK_F_P2P_FAIL_OVER\t= 1 << 1,\n\n\tSLI4_INIT_LINK_F_UNFAIR\t\t= 1 << 6,\n\tSLI4_INIT_LINK_F_NO_LIRP\t= 1 << 7,\n\tSLI4_INIT_LINK_F_LOOP_VALID_CHK\t= 1 << 8,\n\tSLI4_INIT_LINK_F_NO_LISA\t= 1 << 9,\n\tSLI4_INIT_LINK_F_FAIL_OVER\t= 1 << 10,\n\tSLI4_INIT_LINK_F_FIXED_SPEED\t= 1 << 11,\n\tSLI4_INIT_LINK_F_PICK_HI_ALPA\t= 1 << 15,\n\n};\n\nenum sli4_fc_link_speed {\n\tSLI4_LINK_SPEED_1G = 1,\n\tSLI4_LINK_SPEED_2G,\n\tSLI4_LINK_SPEED_AUTO_1_2,\n\tSLI4_LINK_SPEED_4G,\n\tSLI4_LINK_SPEED_AUTO_4_1,\n\tSLI4_LINK_SPEED_AUTO_4_2,\n\tSLI4_LINK_SPEED_AUTO_4_2_1,\n\tSLI4_LINK_SPEED_8G,\n\tSLI4_LINK_SPEED_AUTO_8_1,\n\tSLI4_LINK_SPEED_AUTO_8_2,\n\tSLI4_LINK_SPEED_AUTO_8_2_1,\n\tSLI4_LINK_SPEED_AUTO_8_4,\n\tSLI4_LINK_SPEED_AUTO_8_4_1,\n\tSLI4_LINK_SPEED_AUTO_8_4_2,\n\tSLI4_LINK_SPEED_10G,\n\tSLI4_LINK_SPEED_16G,\n\tSLI4_LINK_SPEED_AUTO_16_8_4,\n\tSLI4_LINK_SPEED_AUTO_16_8,\n\tSLI4_LINK_SPEED_32G,\n\tSLI4_LINK_SPEED_AUTO_32_16_8,\n\tSLI4_LINK_SPEED_AUTO_32_16,\n\tSLI4_LINK_SPEED_64G,\n\tSLI4_LINK_SPEED_AUTO_64_32_16,\n\tSLI4_LINK_SPEED_AUTO_64_32,\n\tSLI4_LINK_SPEED_128G,\n\tSLI4_LINK_SPEED_AUTO_128_64_32,\n\tSLI4_LINK_SPEED_AUTO_128_64,\n};\n\nstruct sli4_cmd_init_link {\n\tstruct sli4_mbox_command_header       hdr;\n\t__le32\tsel_reset_al_pa_dword;\n\t__le32\tflags0;\n\t__le32\tlink_speed_sel_code;\n};\n\n \nenum sli4_init_vfi_flags {\n\tSLI4_INIT_VFI_FLAG_VP\t= 0x1000,\n\tSLI4_INIT_VFI_FLAG_VF\t= 0x2000,\n\tSLI4_INIT_VFI_FLAG_VT\t= 0x4000,\n\tSLI4_INIT_VFI_FLAG_VR\t= 0x8000,\n\n\tSLI4_INIT_VFI_VFID\t= 0x1fff,\n\tSLI4_INIT_VFI_PRI\t= 0xe000,\n\n\tSLI4_INIT_VFI_HOP_COUNT = 0xff000000,\n};\n\nstruct sli4_cmd_init_vfi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\tvfi;\n\t__le16\t\tflags0_word;\n\t__le16\t\tfcfi;\n\t__le16\t\tvpi;\n\t__le32\t\tvf_id_pri_dword;\n\t__le32\t\thop_cnt_dword;\n};\n\n \nstruct sli4_cmd_init_vpi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\tvpi;\n\t__le16\t\tvfi;\n};\n\n \nenum sli4_post_xri_flags {\n\tSLI4_POST_XRI_COUNT\t= 0xfff,\n\tSLI4_POST_XRI_FLAG_ENX\t= 0x1000,\n\tSLI4_POST_XRI_FLAG_DL\t= 0x2000,\n\tSLI4_POST_XRI_FLAG_DI\t= 0x4000,\n\tSLI4_POST_XRI_FLAG_VAL\t= 0x8000,\n};\n\nstruct sli4_cmd_post_xri {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\txri_base;\n\t__le16\t\txri_count_flags;\n};\n\n \nenum sli4_release_xri_flags {\n\tSLI4_RELEASE_XRI_REL_XRI_CNT\t= 0x1f,\n\tSLI4_RELEASE_XRI_COUNT\t\t= 0x1f,\n};\n\nstruct sli4_cmd_release_xri {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\trel_xri_count_word;\n\t__le16\t\txri_count_word;\n\n\tstruct {\n\t\t__le16\txri_tag0;\n\t\t__le16\txri_tag1;\n\t} xri_tbl[62];\n};\n\n \nstruct sli4_cmd_read_config {\n\tstruct sli4_mbox_command_header\thdr;\n};\n\nenum sli4_read_cfg_resp_flags {\n\tSLI4_READ_CFG_RESP_RESOURCE_EXT = 0x80000000,\t \n\tSLI4_READ_CFG_RESP_TOPOLOGY\t= 0xff000000,\t \n};\n\nenum sli4_read_cfg_topo {\n\tSLI4_READ_CFG_TOPO_FC\t\t= 0x1,\t \n\tSLI4_READ_CFG_TOPO_NON_FC_AL\t= 0x2,\t \n\tSLI4_READ_CFG_TOPO_FC_AL\t= 0x3,\t \n};\n\n \nenum sli4_read_cfg_lmt {\n\tSLI4_LINK_MODULE_TYPE_1GB\t= 0x0004,\n\tSLI4_LINK_MODULE_TYPE_2GB\t= 0x0008,\n\tSLI4_LINK_MODULE_TYPE_4GB\t= 0x0040,\n\tSLI4_LINK_MODULE_TYPE_8GB\t= 0x0080,\n\tSLI4_LINK_MODULE_TYPE_16GB\t= 0x0200,\n\tSLI4_LINK_MODULE_TYPE_32GB\t= 0x0400,\n\tSLI4_LINK_MODULE_TYPE_64GB\t= 0x0800,\n\tSLI4_LINK_MODULE_TYPE_128GB\t= 0x1000,\n};\n\nstruct sli4_rsp_read_config {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\text_dword;\n\t__le32\t\ttopology_dword;\n\t__le32\t\tresvd8;\n\t__le16\t\te_d_tov;\n\t__le16\t\tresvd14;\n\t__le32\t\tresvd16;\n\t__le16\t\tr_a_tov;\n\t__le16\t\tresvd22;\n\t__le32\t\tresvd24;\n\t__le32\t\tresvd28;\n\t__le16\t\tlmt;\n\t__le16\t\tresvd34;\n\t__le32\t\tresvd36;\n\t__le32\t\tresvd40;\n\t__le16\t\txri_base;\n\t__le16\t\txri_count;\n\t__le16\t\trpi_base;\n\t__le16\t\trpi_count;\n\t__le16\t\tvpi_base;\n\t__le16\t\tvpi_count;\n\t__le16\t\tvfi_base;\n\t__le16\t\tvfi_count;\n\t__le16\t\tresvd60;\n\t__le16\t\tfcfi_count;\n\t__le16\t\trq_count;\n\t__le16\t\teq_count;\n\t__le16\t\twq_count;\n\t__le16\t\tcq_count;\n\t__le32\t\tpad[45];\n};\n\n \nenum sli4_read_nvparms_flags {\n\tSLI4_READ_NVPARAMS_HARD_ALPA\t  = 0xff,\n\tSLI4_READ_NVPARAMS_PREFERRED_D_ID = 0xffffff00,\n};\n\nstruct sli4_cmd_read_nvparms {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\tresvd0;\n\t__le32\t\tresvd4;\n\t__le32\t\tresvd8;\n\t__le32\t\tresvd12;\n\tu8\t\twwpn[8];\n\tu8\t\twwnn[8];\n\t__le32\t\thard_alpa_d_id;\n};\n\n \nstruct sli4_cmd_write_nvparms {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\tresvd0;\n\t__le32\t\tresvd4;\n\t__le32\t\tresvd8;\n\t__le32\t\tresvd12;\n\tu8\t\twwpn[8];\n\tu8\t\twwnn[8];\n\t__le32\t\thard_alpa_d_id;\n};\n\n \nenum {\n\tSLI4_READ_REV_FLAG_SLI_LEVEL\t= 0xf,\n\tSLI4_READ_REV_FLAG_FCOEM\t= 0x10,\n\tSLI4_READ_REV_FLAG_CEEV\t\t= 0x60,\n\tSLI4_READ_REV_FLAG_VPD\t\t= 0x2000,\n\n\tSLI4_READ_REV_AVAILABLE_LENGTH\t= 0xffffff,\n};\n\nstruct sli4_cmd_read_rev {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\t\tresvd0;\n\t__le16\t\t\tflags0_word;\n\t__le32\t\t\tfirst_hw_rev;\n\t__le32\t\t\tsecond_hw_rev;\n\t__le32\t\t\tresvd12;\n\t__le32\t\t\tthird_hw_rev;\n\tu8\t\t\tfc_ph_low;\n\tu8\t\t\tfc_ph_high;\n\tu8\t\t\tfeature_level_low;\n\tu8\t\t\tfeature_level_high;\n\t__le32\t\t\tresvd24;\n\t__le32\t\t\tfirst_fw_id;\n\tu8\t\t\tfirst_fw_name[16];\n\t__le32\t\t\tsecond_fw_id;\n\tu8\t\t\tsecond_fw_name[16];\n\t__le32\t\t\trsvd18[30];\n\t__le32\t\t\tavailable_length_dword;\n\tstruct sli4_dmaaddr\thostbuf;\n\t__le32\t\t\treturned_vpd_length;\n\t__le32\t\t\tactual_vpd_length;\n};\n\n \n#define SLI4_READ_SPARM64_WWPN_OFFSET\t(4 * sizeof(u32))\n#define SLI4_READ_SPARM64_WWNN_OFFSET\t(6 * sizeof(u32))\n\nstruct sli4_cmd_read_sparm64 {\n\tstruct sli4_mbox_command_header hdr;\n\t__le32\t\t\tresvd0;\n\t__le32\t\t\tresvd4;\n\tstruct sli4_bde\t\tbde_64;\n\t__le16\t\t\tvpi;\n\t__le16\t\t\tresvd22;\n\t__le16\t\t\tport_name_start;\n\t__le16\t\t\tport_name_len;\n\t__le16\t\t\tnode_name_start;\n\t__le16\t\t\tnode_name_len;\n};\n\n \nenum sli4_read_topo_e {\n\tSLI4_READTOPO_ATTEN_TYPE\t= 0xff,\n\tSLI4_READTOPO_FLAG_IL\t\t= 0x100,\n\tSLI4_READTOPO_FLAG_PB_RECVD\t= 0x200,\n\n\tSLI4_READTOPO_LINKSTATE_RECV\t= 0x3,\n\tSLI4_READTOPO_LINKSTATE_TRANS\t= 0xc,\n\tSLI4_READTOPO_LINKSTATE_MACHINE\t= 0xf0,\n\tSLI4_READTOPO_LINKSTATE_SPEED\t= 0xff00,\n\tSLI4_READTOPO_LINKSTATE_TF\t= 0x40000000,\n\tSLI4_READTOPO_LINKSTATE_LU\t= 0x80000000,\n\n\tSLI4_READTOPO_SCN_BBSCN\t\t= 0xf,\n\tSLI4_READTOPO_SCN_CBBSCN\t= 0xf0,\n\n\tSLI4_READTOPO_R_T_TOV\t\t= 0x1ff,\n\tSLI4_READTOPO_AL_TOV\t\t= 0xf000,\n\n\tSLI4_READTOPO_PB_FLAG\t\t= 0x80,\n\n\tSLI4_READTOPO_INIT_N_PORTID\t= 0xffffff,\n};\n\n#define SLI4_MIN_LOOP_MAP_BYTES\t128\n\nstruct sli4_cmd_read_topology {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\t\tevent_tag;\n\t__le32\t\t\tdw2_attentype;\n\tu8\t\t\ttopology;\n\tu8\t\t\tlip_type;\n\tu8\t\t\tlip_al_ps;\n\tu8\t\t\tal_pa_granted;\n\tstruct sli4_bde\t\tbde_loop_map;\n\t__le32\t\t\tlinkdown_state;\n\t__le32\t\t\tcurrlink_state;\n\tu8\t\t\tmax_bbc;\n\tu8\t\t\tinit_bbc;\n\tu8\t\t\tscn_flags;\n\tu8\t\t\trsvd39;\n\t__le16\t\t\tdw10w0_al_rt_tov;\n\t__le16\t\t\tlp_tov;\n\tu8\t\t\tacquired_al_pa;\n\tu8\t\t\tpb_flags;\n\t__le16\t\t\tspecified_al_pa;\n\t__le32\t\t\tdw12_init_n_port_id;\n};\n\nenum sli4_read_topo_link {\n\tSLI4_READ_TOPOLOGY_LINK_UP\t= 0x1,\n\tSLI4_READ_TOPOLOGY_LINK_DOWN,\n\tSLI4_READ_TOPOLOGY_LINK_NO_ALPA,\n};\n\nenum sli4_read_topo {\n\tSLI4_READ_TOPO_UNKNOWN\t\t= 0x0,\n\tSLI4_READ_TOPO_NON_FC_AL,\n\tSLI4_READ_TOPO_FC_AL,\n};\n\nenum sli4_read_topo_speed {\n\tSLI4_READ_TOPOLOGY_SPEED_NONE\t= 0x00,\n\tSLI4_READ_TOPOLOGY_SPEED_1G\t= 0x04,\n\tSLI4_READ_TOPOLOGY_SPEED_2G\t= 0x08,\n\tSLI4_READ_TOPOLOGY_SPEED_4G\t= 0x10,\n\tSLI4_READ_TOPOLOGY_SPEED_8G\t= 0x20,\n\tSLI4_READ_TOPOLOGY_SPEED_10G\t= 0x40,\n\tSLI4_READ_TOPOLOGY_SPEED_16G\t= 0x80,\n\tSLI4_READ_TOPOLOGY_SPEED_32G\t= 0x90,\n\tSLI4_READ_TOPOLOGY_SPEED_64G\t= 0xa0,\n\tSLI4_READ_TOPOLOGY_SPEED_128G\t= 0xb0,\n};\n\n \nstruct sli4_cmd_reg_fcfi_rq_cfg {\n\tu8\tr_ctl_mask;\n\tu8\tr_ctl_match;\n\tu8\ttype_mask;\n\tu8\ttype_match;\n};\n\nenum sli4_regfcfi_tag {\n\tSLI4_REGFCFI_VLAN_TAG\t\t= 0xfff,\n\tSLI4_REGFCFI_VLANTAG_VALID\t= 0x1000,\n};\n\n#define SLI4_CMD_REG_FCFI_NUM_RQ_CFG\t4\nstruct sli4_cmd_reg_fcfi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\tfcf_index;\n\t__le16\t\tfcfi;\n\t__le16\t\trqid1;\n\t__le16\t\trqid0;\n\t__le16\t\trqid3;\n\t__le16\t\trqid2;\n\tstruct sli4_cmd_reg_fcfi_rq_cfg\n\t\t\trq_cfg[SLI4_CMD_REG_FCFI_NUM_RQ_CFG];\n\t__le32\t\tdw8_vlan;\n};\n\n#define SLI4_CMD_REG_FCFI_MRQ_NUM_RQ_CFG\t4\n#define SLI4_CMD_REG_FCFI_MRQ_MAX_NUM_RQ\t32\n#define SLI4_CMD_REG_FCFI_SET_FCFI_MODE\t\t0\n#define SLI4_CMD_REG_FCFI_SET_MRQ_MODE\t\t1\n\nenum sli4_reg_fcfi_mrq {\n\tSLI4_REGFCFI_MRQ_VLAN_TAG\t= 0xfff,\n\tSLI4_REGFCFI_MRQ_VLANTAG_VALID\t= 0x1000,\n\tSLI4_REGFCFI_MRQ_MODE\t\t= 0x2000,\n\n\tSLI4_REGFCFI_MRQ_MASK_NUM_PAIRS\t= 0xff,\n\tSLI4_REGFCFI_MRQ_FILTER_BITMASK = 0xf00,\n\tSLI4_REGFCFI_MRQ_RQ_SEL_POLICY\t= 0xf000,\n};\n\nstruct sli4_cmd_reg_fcfi_mrq {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\tfcf_index;\n\t__le16\t\tfcfi;\n\t__le16\t\trqid1;\n\t__le16\t\trqid0;\n\t__le16\t\trqid3;\n\t__le16\t\trqid2;\n\tstruct sli4_cmd_reg_fcfi_rq_cfg\n\t\t\trq_cfg[SLI4_CMD_REG_FCFI_MRQ_NUM_RQ_CFG];\n\t__le32\t\tdw8_vlan;\n\t__le32\t\tdw9_mrqflags;\n};\n\nstruct sli4_cmd_rq_cfg {\n\t__le16\trq_id;\n\tu8\tr_ctl_mask;\n\tu8\tr_ctl_match;\n\tu8\ttype_mask;\n\tu8\ttype_match;\n};\n\n \nenum sli4_reg_rpi {\n\tSLI4_REGRPI_REMOTE_N_PORTID\t= 0xffffff,\t \n\tSLI4_REGRPI_UPD\t\t\t= 0x1000000,\n\tSLI4_REGRPI_ETOW\t\t= 0x8000000,\n\tSLI4_REGRPI_TERP\t\t= 0x20000000,\n\tSLI4_REGRPI_CI\t\t\t= 0x80000000,\n};\n\nstruct sli4_cmd_reg_rpi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\t\trpi;\n\t__le16\t\t\trsvd2;\n\t__le32\t\t\tdw2_rportid_flags;\n\tstruct sli4_bde\t\tbde_64;\n\t__le16\t\t\tvpi;\n\t__le16\t\t\trsvd26;\n};\n\n#define SLI4_REG_RPI_BUF_LEN\t\t0x70\n\n \nenum sli_reg_vfi {\n\tSLI4_REGVFI_VP\t\t\t= 0x1000,\t \n\tSLI4_REGVFI_UPD\t\t\t= 0x2000,\n\n\tSLI4_REGVFI_LOCAL_N_PORTID\t= 0xffffff,\t \n};\n\nstruct sli4_cmd_reg_vfi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\t\tvfi;\n\t__le16\t\t\tdw0w1_flags;\n\t__le16\t\t\tfcfi;\n\t__le16\t\t\tvpi;\n\tu8\t\t\twwpn[8];\n\tstruct sli4_bde\t\tsparm;\n\t__le32\t\t\te_d_tov;\n\t__le32\t\t\tr_a_tov;\n\t__le32\t\t\tdw10_lportid_flags;\n};\n\n \nenum sli4_reg_vpi {\n\tSLI4_REGVPI_LOCAL_N_PORTID\t= 0xffffff,\n\tSLI4_REGVPI_UPD\t\t\t= 0x1000000,\n};\n\nstruct sli4_cmd_reg_vpi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le32\t\tdw2_lportid_flags;\n\tu8\t\twwpn[8];\n\t__le32\t\trsvd12;\n\t__le16\t\tvpi;\n\t__le16\t\tvfi;\n};\n\n \nenum sli4_req_features_flags {\n\tSLI4_REQFEAT_QRY\t= 0x1,\t\t \n\n\tSLI4_REQFEAT_IAAB\t= 1 << 0,\t \n\tSLI4_REQFEAT_NPIV\t= 1 << 1,\n\tSLI4_REQFEAT_DIF\t= 1 << 2,\n\tSLI4_REQFEAT_VF\t\t= 1 << 3,\n\tSLI4_REQFEAT_FCPI\t= 1 << 4,\n\tSLI4_REQFEAT_FCPT\t= 1 << 5,\n\tSLI4_REQFEAT_FCPC\t= 1 << 6,\n\tSLI4_REQFEAT_RSVD\t= 1 << 7,\n\tSLI4_REQFEAT_RQD\t= 1 << 8,\n\tSLI4_REQFEAT_IAAR\t= 1 << 9,\n\tSLI4_REQFEAT_HLM\t= 1 << 10,\n\tSLI4_REQFEAT_PERFH\t= 1 << 11,\n\tSLI4_REQFEAT_RXSEQ\t= 1 << 12,\n\tSLI4_REQFEAT_RXRI\t= 1 << 13,\n\tSLI4_REQFEAT_DCL2\t= 1 << 14,\n\tSLI4_REQFEAT_RSCO\t= 1 << 15,\n\tSLI4_REQFEAT_MRQP\t= 1 << 16,\n};\n\nstruct sli4_cmd_request_features {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\tdw1_qry;\n\t__le32\t\tcmd;\n\t__le32\t\tresp;\n};\n\n \nenum sli4_sli_config {\n\tSLI4_SLICONF_EMB\t\t= 0x1,\t\t \n\tSLI4_SLICONF_PMDCMD_SHIFT\t= 3,\n\tSLI4_SLICONF_PMDCMD_MASK\t= 0xf8,\n\tSLI4_SLICONF_PMDCMD_VAL_1\t= 8,\n\tSLI4_SLICONF_PMDCNT\t\t= 0xf8,\n\n\tSLI4_SLICONF_PMD_LEN\t\t= 0x00ffffff,\n};\n\nstruct sli4_cmd_sli_config {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\tdw1_flags;\n\t__le32\t\tpayload_len;\n\t__le32\t\trsvd12[3];\n\tunion {\n\t\tu8 embed[58 * sizeof(u32)];\n\t\tstruct sli4_bufptr mem;\n\t} payload;\n};\n\n \n#define SLI4_READSTATUS_CLEAR_COUNTERS\t0x1\n\nstruct sli4_cmd_read_status {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\tdw1_flags;\n\t__le32\t\trsvd4;\n\t__le32\t\ttrans_kbyte_cnt;\n\t__le32\t\trecv_kbyte_cnt;\n\t__le32\t\ttrans_frame_cnt;\n\t__le32\t\trecv_frame_cnt;\n\t__le32\t\ttrans_seq_cnt;\n\t__le32\t\trecv_seq_cnt;\n\t__le32\t\ttot_exchanges_orig;\n\t__le32\t\ttot_exchanges_resp;\n\t__le32\t\trecv_p_bsy_cnt;\n\t__le32\t\trecv_f_bsy_cnt;\n\t__le32\t\tno_rq_buf_dropped_frames_cnt;\n\t__le32\t\tempty_rq_timeout_cnt;\n\t__le32\t\tno_xri_dropped_frames_cnt;\n\t__le32\t\tempty_xri_pool_cnt;\n};\n\n \nenum sli4_read_link_stats_flags {\n\tSLI4_READ_LNKSTAT_REC\t= 1u << 0,\n\tSLI4_READ_LNKSTAT_GEC\t= 1u << 1,\n\tSLI4_READ_LNKSTAT_W02OF\t= 1u << 2,\n\tSLI4_READ_LNKSTAT_W03OF\t= 1u << 3,\n\tSLI4_READ_LNKSTAT_W04OF\t= 1u << 4,\n\tSLI4_READ_LNKSTAT_W05OF\t= 1u << 5,\n\tSLI4_READ_LNKSTAT_W06OF\t= 1u << 6,\n\tSLI4_READ_LNKSTAT_W07OF\t= 1u << 7,\n\tSLI4_READ_LNKSTAT_W08OF\t= 1u << 8,\n\tSLI4_READ_LNKSTAT_W09OF\t= 1u << 9,\n\tSLI4_READ_LNKSTAT_W10OF = 1u << 10,\n\tSLI4_READ_LNKSTAT_W11OF = 1u << 11,\n\tSLI4_READ_LNKSTAT_W12OF\t= 1u << 12,\n\tSLI4_READ_LNKSTAT_W13OF\t= 1u << 13,\n\tSLI4_READ_LNKSTAT_W14OF\t= 1u << 14,\n\tSLI4_READ_LNKSTAT_W15OF\t= 1u << 15,\n\tSLI4_READ_LNKSTAT_W16OF\t= 1u << 16,\n\tSLI4_READ_LNKSTAT_W17OF\t= 1u << 17,\n\tSLI4_READ_LNKSTAT_W18OF\t= 1u << 18,\n\tSLI4_READ_LNKSTAT_W19OF\t= 1u << 19,\n\tSLI4_READ_LNKSTAT_W20OF\t= 1u << 20,\n\tSLI4_READ_LNKSTAT_W21OF\t= 1u << 21,\n\tSLI4_READ_LNKSTAT_CLRC\t= 1u << 30,\n\tSLI4_READ_LNKSTAT_CLOF\t= 1u << 31,\n};\n\nstruct sli4_cmd_read_link_stats {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\tdw1_flags;\n\t__le32\tlinkfail_errcnt;\n\t__le32\tlosssync_errcnt;\n\t__le32\tlosssignal_errcnt;\n\t__le32\tprimseq_errcnt;\n\t__le32\tinval_txword_errcnt;\n\t__le32\tcrc_errcnt;\n\t__le32\tprimseq_eventtimeout_cnt;\n\t__le32\telastic_bufoverrun_errcnt;\n\t__le32\tarbit_fc_al_timeout_cnt;\n\t__le32\tadv_rx_buftor_to_buf_credit;\n\t__le32\tcurr_rx_buf_to_buf_credit;\n\t__le32\tadv_tx_buf_to_buf_credit;\n\t__le32\tcurr_tx_buf_to_buf_credit;\n\t__le32\trx_eofa_cnt;\n\t__le32\trx_eofdti_cnt;\n\t__le32\trx_eofni_cnt;\n\t__le32\trx_soff_cnt;\n\t__le32\trx_dropped_no_aer_cnt;\n\t__le32\trx_dropped_no_avail_rpi_rescnt;\n\t__le32\trx_dropped_no_avail_xri_rescnt;\n};\n\n \nstatic inline void\nsli_set_wq_id_association(void *entry, u16 q_id)\n{\n\tu32 *wqe = entry;\n\n\t \n\twqe[10] &= ~0xffff;\n\twqe[10] |= q_id << 1;\n}\n\n \nstruct sli4_cmd_unreg_fcfi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le16\t\tfcfi;\n\t__le16\t\trsvd6;\n};\n\n \nenum sli4_unreg_rpi {\n\tSLI4_UNREG_RPI_DP\t= 0x2000,\n\tSLI4_UNREG_RPI_II_SHIFT\t= 14,\n\tSLI4_UNREG_RPI_II_MASK\t= 0xc000,\n\tSLI4_UNREG_RPI_II_RPI\t= 0x0000,\n\tSLI4_UNREG_RPI_II_VPI\t= 0x4000,\n\tSLI4_UNREG_RPI_II_VFI\t= 0x8000,\n\tSLI4_UNREG_RPI_II_FCFI\t= 0xc000,\n\n\tSLI4_UNREG_RPI_DEST_N_PORTID_MASK = 0x00ffffff,\n};\n\nstruct sli4_cmd_unreg_rpi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le16\t\tindex;\n\t__le16\t\tdw1w1_flags;\n\t__le32\t\tdw2_dest_n_portid;\n};\n\n \nenum sli4_unreg_vfi {\n\tSLI4_UNREG_VFI_II_SHIFT\t= 14,\n\tSLI4_UNREG_VFI_II_MASK\t= 0xc000,\n\tSLI4_UNREG_VFI_II_VFI\t= 0x0000,\n\tSLI4_UNREG_VFI_II_FCFI\t= 0xc000,\n};\n\nstruct sli4_cmd_unreg_vfi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le16\t\tindex;\n\t__le16\t\tdw2_flags;\n};\n\nenum sli4_unreg_type {\n\tSLI4_UNREG_TYPE_PORT,\n\tSLI4_UNREG_TYPE_DOMAIN,\n\tSLI4_UNREG_TYPE_FCF,\n\tSLI4_UNREG_TYPE_ALL\n};\n\n \nenum sli4_unreg_vpi {\n\tSLI4_UNREG_VPI_II_SHIFT\t= 14,\n\tSLI4_UNREG_VPI_II_MASK\t= 0xc000,\n\tSLI4_UNREG_VPI_II_VPI\t= 0x0000,\n\tSLI4_UNREG_VPI_II_VFI\t= 0x8000,\n\tSLI4_UNREG_VPI_II_FCFI\t= 0xc000,\n};\n\nstruct sli4_cmd_unreg_vpi {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le16\t\tindex;\n\t__le16\t\tdw2w0_flags;\n};\n\n \nstruct sli4_cmd_config_auto_xfer_rdy {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le32\t\tmax_burst_len;\n};\n\n#define SLI4_CONFIG_AUTO_XFERRDY_BLKSIZE\t0xffff\n\nstruct sli4_cmd_config_auto_xfer_rdy_hp {\n\tstruct sli4_mbox_command_header\thdr;\n\t__le32\t\trsvd0;\n\t__le32\t\tmax_burst_len;\n\t__le32\t\tdw3_esoc_flags;\n\t__le16\t\tblock_size;\n\t__le16\t\trsvd14;\n};\n\n \n\n \nenum sli4_subsystem {\n\tSLI4_SUBSYSTEM_COMMON\t= 0x01,\n\tSLI4_SUBSYSTEM_LOWLEVEL\t= 0x0b,\n\tSLI4_SUBSYSTEM_FC\t= 0x0c,\n\tSLI4_SUBSYSTEM_DMTF\t= 0x11,\n};\n\n#define\tSLI4_OPC_LOWLEVEL_SET_WATCHDOG\t\t0X36\n\n \nenum sli4_cmn_opcode {\n\tSLI4_CMN_FUNCTION_RESET\t\t= 0x3d,\n\tSLI4_CMN_CREATE_CQ\t\t= 0x0c,\n\tSLI4_CMN_CREATE_CQ_SET\t\t= 0x1d,\n\tSLI4_CMN_DESTROY_CQ\t\t= 0x36,\n\tSLI4_CMN_MODIFY_EQ_DELAY\t= 0x29,\n\tSLI4_CMN_CREATE_EQ\t\t= 0x0d,\n\tSLI4_CMN_DESTROY_EQ\t\t= 0x37,\n\tSLI4_CMN_CREATE_MQ_EXT\t\t= 0x5a,\n\tSLI4_CMN_DESTROY_MQ\t\t= 0x35,\n\tSLI4_CMN_GET_CNTL_ATTRIBUTES\t= 0x20,\n\tSLI4_CMN_NOP\t\t\t= 0x21,\n\tSLI4_CMN_GET_RSC_EXTENT_INFO\t= 0x9a,\n\tSLI4_CMN_GET_SLI4_PARAMS\t= 0xb5,\n\tSLI4_CMN_QUERY_FW_CONFIG\t= 0x3a,\n\tSLI4_CMN_GET_PORT_NAME\t\t= 0x4d,\n\n\tSLI4_CMN_WRITE_FLASHROM\t\t= 0x07,\n\t \n\tSLI4_CMN_READ_TRANS_DATA\t= 0x49,\n\tSLI4_CMN_GET_CNTL_ADDL_ATTRS\t= 0x79,\n\tSLI4_CMN_GET_FUNCTION_CFG\t= 0xa0,\n\tSLI4_CMN_GET_PROFILE_CFG\t= 0xa4,\n\tSLI4_CMN_SET_PROFILE_CFG\t= 0xa5,\n\tSLI4_CMN_GET_PROFILE_LIST\t= 0xa6,\n\tSLI4_CMN_GET_ACTIVE_PROFILE\t= 0xa7,\n\tSLI4_CMN_SET_ACTIVE_PROFILE\t= 0xa8,\n\tSLI4_CMN_READ_OBJECT\t\t= 0xab,\n\tSLI4_CMN_WRITE_OBJECT\t\t= 0xac,\n\tSLI4_CMN_DELETE_OBJECT\t\t= 0xae,\n\tSLI4_CMN_READ_OBJECT_LIST\t= 0xad,\n\tSLI4_CMN_SET_DUMP_LOCATION\t= 0xb8,\n\tSLI4_CMN_SET_FEATURES\t\t= 0xbf,\n\tSLI4_CMN_GET_RECFG_LINK_INFO\t= 0xc9,\n\tSLI4_CMN_SET_RECNG_LINK_ID\t= 0xca,\n};\n\n \n#define DMTF_EXEC_CLP_CMD 0x01\n\n \nstruct sli4_rqst_cmn_function_reset {\n\tstruct sli4_rqst_hdr\thdr;\n};\n\nstruct sli4_rsp_cmn_function_reset {\n\tstruct sli4_rsp_hdr\thdr;\n};\n\n \nenum sli4_cntrl_attr_flags {\n\tSLI4_CNTL_ATTR_PORTNUM\t= 0x3f,\n\tSLI4_CNTL_ATTR_PORTTYPE\t= 0xc0,\n};\n\nstruct sli4_rsp_cmn_get_cntl_attributes {\n\tstruct sli4_rsp_hdr\thdr;\n\tu8\t\tversion_str[32];\n\tu8\t\tmanufacturer_name[32];\n\t__le32\t\tsupported_modes;\n\tu8\t\teprom_version_lo;\n\tu8\t\teprom_version_hi;\n\t__le16\t\trsvd17;\n\t__le32\t\tmbx_ds_version;\n\t__le32\t\tep_fw_ds_version;\n\tu8\t\tncsi_version_str[12];\n\t__le32\t\tdef_extended_timeout;\n\tu8\t\tmodel_number[32];\n\tu8\t\tdescription[64];\n\tu8\t\tserial_number[32];\n\tu8\t\tip_version_str[32];\n\tu8\t\tfw_version_str[32];\n\tu8\t\tbios_version_str[32];\n\tu8\t\tredboot_version_str[32];\n\tu8\t\tdriver_version_str[32];\n\tu8\t\tfw_on_flash_version_str[32];\n\t__le32\t\tfunctionalities_supported;\n\t__le16\t\tmax_cdb_length;\n\tu8\t\tasic_revision;\n\tu8\t\tgenerational_guid0;\n\t__le32\t\tgenerational_guid1_12[3];\n\t__le16\t\tgenerational_guid13_14;\n\tu8\t\tgenerational_guid15;\n\tu8\t\thba_port_count;\n\t__le16\t\tdefault_link_down_timeout;\n\tu8\t\tiscsi_version_min_max;\n\tu8\t\tmultifunctional_device;\n\tu8\t\tcache_valid;\n\tu8\t\thba_status;\n\tu8\t\tmax_domains_supported;\n\tu8\t\tport_num_type_flags;\n\t__le32\t\tfirmware_post_status;\n\t__le32\t\thba_mtu;\n\tu8\t\tiscsi_features;\n\tu8\t\trsvd121[3];\n\t__le16\t\tpci_vendor_id;\n\t__le16\t\tpci_device_id;\n\t__le16\t\tpci_sub_vendor_id;\n\t__le16\t\tpci_sub_system_id;\n\tu8\t\tpci_bus_number;\n\tu8\t\tpci_device_number;\n\tu8\t\tpci_function_number;\n\tu8\t\tinterface_type;\n\t__le64\t\tunique_identifier;\n\tu8\t\tnumber_of_netfilters;\n\tu8\t\trsvd122[3];\n};\n\n \nstruct sli4_rqst_cmn_get_cntl_addl_attributes {\n\tstruct sli4_rqst_hdr\thdr;\n};\n\nstruct sli4_rsp_cmn_get_cntl_addl_attributes {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le16\t\tipl_file_number;\n\tu8\t\tipl_file_version;\n\tu8\t\trsvd4;\n\tu8\t\ton_die_temperature;\n\tu8\t\trsvd5[3];\n\t__le32\t\tdriver_advanced_features_supported;\n\t__le32\t\trsvd7[4];\n\tchar\t\tuniversal_bios_version[32];\n\tchar\t\tx86_bios_version[32];\n\tchar\t\tefi_bios_version[32];\n\tchar\t\tfcode_version[32];\n\tchar\t\tuefi_bios_version[32];\n\tchar\t\tuefi_nic_version[32];\n\tchar\t\tuefi_fcode_version[32];\n\tchar\t\tuefi_iscsi_version[32];\n\tchar\t\tiscsi_x86_bios_version[32];\n\tchar\t\tpxe_x86_bios_version[32];\n\tu8\t\tdefault_wwpn[8];\n\tu8\t\text_phy_version[32];\n\tu8\t\tfc_universal_bios_version[32];\n\tu8\t\tfc_x86_bios_version[32];\n\tu8\t\tfc_efi_bios_version[32];\n\tu8\t\tfc_fcode_version[32];\n\tu8\t\text_phy_crc_label[8];\n\tu8\t\tipl_file_name[16];\n\tu8\t\trsvd139[72];\n};\n\n \nstruct sli4_rqst_cmn_nop {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tcontext[2];\n};\n\nstruct sli4_rsp_cmn_nop {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tcontext[2];\n};\n\nstruct sli4_rqst_cmn_get_resource_extent_info {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\tresource_type;\n\t__le16\trsvd16;\n};\n\nenum sli4_rsc_type {\n\tSLI4_RSC_TYPE_VFI\t= 0x20,\n\tSLI4_RSC_TYPE_VPI\t= 0x21,\n\tSLI4_RSC_TYPE_RPI\t= 0x22,\n\tSLI4_RSC_TYPE_XRI\t= 0x23,\n};\n\nstruct sli4_rsp_cmn_get_resource_extent_info {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le16\t\tresource_extent_count;\n\t__le16\t\tresource_extent_size;\n};\n\n#define SLI4_128BYTE_WQE_SUPPORT\t0x02\n\n#define GET_Q_CNT_METHOD(m) \\\n\t(((m) & SLI4_PARAM_Q_CNT_MTHD_MASK) >> SLI4_PARAM_Q_CNT_MTHD_SHFT)\n#define GET_Q_CREATE_VERSION(v) \\\n\t(((v) & SLI4_PARAM_QV_MASK) >> SLI4_PARAM_QV_SHIFT)\n\nenum sli4_rsp_get_params_e {\n\t \n\tSLI4_PARAM_Q_CNT_MTHD_SHFT\t= 24,\n\tSLI4_PARAM_Q_CNT_MTHD_MASK\t= 0xf << 24,\n\tSLI4_PARAM_QV_SHIFT\t\t= 14,\n\tSLI4_PARAM_QV_MASK\t\t= 3 << 14,\n\n\t \n\tSLI4_PARAM_PROTO_TYPE_MASK\t= 0xff,\n\t \n\tSLI4_PARAM_FT\t\t\t= 1 << 0,\n\tSLI4_PARAM_SLI_REV_MASK\t\t= 0xf << 4,\n\tSLI4_PARAM_SLI_FAM_MASK\t\t= 0xf << 8,\n\tSLI4_PARAM_IF_TYPE_MASK\t\t= 0xf << 12,\n\tSLI4_PARAM_SLI_HINT1_MASK\t= 0xff << 16,\n\tSLI4_PARAM_SLI_HINT2_MASK\t= 0x1f << 24,\n\t \n\tSLI4_PARAM_EQ_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_EQE_SZS_MASK\t\t= 0xf << 8,\n\tSLI4_PARAM_EQ_PAGE_SZS_MASK\t= 0xff << 16,\n\t \n\tSLI4_PARAM_CQ_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_CQE_SZS_MASK\t\t= 0xf << 8,\n\tSLI4_PARAM_CQ_PAGE_SZS_MASK\t= 0xff << 16,\n\t \n\tSLI4_PARAM_MQ_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_MQ_PAGE_SZS_MASK\t= 0xff << 16,\n\t \n\tSLI4_PARAM_WQ_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_WQE_SZS_MASK\t\t= 0xf << 8,\n\tSLI4_PARAM_WQ_PAGE_SZS_MASK\t= 0xff << 16,\n\t \n\tSLI4_PARAM_RQ_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_RQE_SZS_MASK\t\t= 0xf << 8,\n\tSLI4_PARAM_RQ_PAGE_SZS_MASK\t= 0xff << 16,\n\t \n\tSLI4_PARAM_RQ_DB_WINDOW_MASK\t= 0xf000,\n\t \n\tSLI4_PARAM_FC\t\t\t= 1 << 0,\n\tSLI4_PARAM_EXT\t\t\t= 1 << 1,\n\tSLI4_PARAM_HDRR\t\t\t= 1 << 2,\n\tSLI4_PARAM_SGLR\t\t\t= 1 << 3,\n\tSLI4_PARAM_FBRR\t\t\t= 1 << 4,\n\tSLI4_PARAM_AREG\t\t\t= 1 << 5,\n\tSLI4_PARAM_TGT\t\t\t= 1 << 6,\n\tSLI4_PARAM_TERP\t\t\t= 1 << 7,\n\tSLI4_PARAM_ASSI\t\t\t= 1 << 8,\n\tSLI4_PARAM_WCHN\t\t\t= 1 << 9,\n\tSLI4_PARAM_TCCA\t\t\t= 1 << 10,\n\tSLI4_PARAM_TRTY\t\t\t= 1 << 11,\n\tSLI4_PARAM_TRIR\t\t\t= 1 << 12,\n\tSLI4_PARAM_PHOFF\t\t= 1 << 13,\n\tSLI4_PARAM_PHON\t\t\t= 1 << 14,\n\tSLI4_PARAM_PHWQ\t\t\t= 1 << 15,\n\tSLI4_PARAM_BOUND_4GA\t\t= 1 << 16,\n\tSLI4_PARAM_RXC\t\t\t= 1 << 17,\n\tSLI4_PARAM_HLM\t\t\t= 1 << 18,\n\tSLI4_PARAM_IPR\t\t\t= 1 << 19,\n\tSLI4_PARAM_RXRI\t\t\t= 1 << 20,\n\tSLI4_PARAM_SGLC\t\t\t= 1 << 21,\n\tSLI4_PARAM_TIMM\t\t\t= 1 << 22,\n\tSLI4_PARAM_TSMM\t\t\t= 1 << 23,\n\tSLI4_PARAM_OAS\t\t\t= 1 << 25,\n\tSLI4_PARAM_LC\t\t\t= 1 << 26,\n\tSLI4_PARAM_AGXF\t\t\t= 1 << 27,\n\tSLI4_PARAM_LOOPBACK_MASK\t= 0xf << 28,\n\t \n\tSLI4_PARAM_SGL_PAGE_CNT_MASK\t= 0xf << 0,\n\tSLI4_PARAM_SGL_PAGE_SZS_MASK\t= 0xff << 8,\n\tSLI4_PARAM_SGL_PP_ALIGN_MASK\t= 0xff << 16,\n};\n\nstruct sli4_rqst_cmn_get_sli4_params {\n\tstruct sli4_rqst_hdr\thdr;\n};\n\nstruct sli4_rsp_cmn_get_sli4_params {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\tdw4_protocol_type;\n\t__le32\t\tdw5_sli;\n\t__le32\t\tdw6_eq_page_cnt;\n\t__le16\t\teqe_count_mask;\n\t__le16\t\trsvd26;\n\t__le32\t\tdw8_cq_page_cnt;\n\t__le16\t\tcqe_count_mask;\n\t__le16\t\trsvd34;\n\t__le32\t\tdw10_mq_page_cnt;\n\t__le16\t\tmqe_count_mask;\n\t__le16\t\trsvd42;\n\t__le32\t\tdw12_wq_page_cnt;\n\t__le16\t\twqe_count_mask;\n\t__le16\t\trsvd50;\n\t__le32\t\tdw14_rq_page_cnt;\n\t__le16\t\trqe_count_mask;\n\t__le16\t\tdw15w1_rq_db_window;\n\t__le32\t\tdw16_loopback_scope;\n\t__le32\t\tsge_supported_length;\n\t__le32\t\tdw18_sgl_page_cnt;\n\t__le16\t\tmin_rq_buffer_size;\n\t__le16\t\trsvd75;\n\t__le32\t\tmax_rq_buffer_size;\n\t__le16\t\tphysical_xri_max;\n\t__le16\t\tphysical_rpi_max;\n\t__le16\t\tphysical_vpi_max;\n\t__le16\t\tphysical_vfi_max;\n\t__le32\t\trsvd88;\n\t__le16\t\tfrag_num_field_offset;\n\t__le16\t\tfrag_num_field_size;\n\t__le16\t\tsgl_index_field_offset;\n\t__le16\t\tsgl_index_field_size;\n\t__le32\t\tchain_sge_initial_value_lo;\n\t__le32\t\tchain_sge_initial_value_hi;\n};\n\n \nenum sli4_port_types {\n\tSLI4_PORT_TYPE_ETH\t= 0,\n\tSLI4_PORT_TYPE_FC\t= 1,\n};\n\nstruct sli4_rqst_cmn_get_port_name {\n\tstruct sli4_rqst_hdr\thdr;\n\tu8\tport_type;\n\tu8\trsvd4[3];\n};\n\nstruct sli4_rsp_cmn_get_port_name {\n\tstruct sli4_rsp_hdr\thdr;\n\tchar\tport_name[4];\n};\n\nstruct sli4_rqst_cmn_write_flashrom {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\tflash_rom_access_opcode;\n\t__le32\t\tflash_rom_access_operation_type;\n\t__le32\t\tdata_buffer_size;\n\t__le32\t\toffset;\n\tu8\t\tdata_buffer[4];\n};\n\n \nstruct sli4_rqst_cmn_read_transceiver_data {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tpage_number;\n\t__le32\t\t\tport;\n};\n\nstruct sli4_rsp_cmn_read_transceiver_data {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tpage_number;\n\t__le32\t\t\tport;\n\tu8\t\t\tpage_data[128];\n\tu8\t\t\tpage_data_2[128];\n};\n\n#define SLI4_REQ_DESIRE_READLEN\t\t0xffffff\n\nstruct sli4_rqst_cmn_read_object {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tdesired_read_length_dword;\n\t__le32\t\t\tread_offset;\n\tu8\t\t\tobject_name[104];\n\t__le32\t\t\thost_buffer_descriptor_count;\n\tstruct sli4_bde\t\thost_buffer_descriptor[];\n};\n\n#define RSP_COM_READ_OBJ_EOF\t\t0x80000000\n\nstruct sli4_rsp_cmn_read_object {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tactual_read_length;\n\t__le32\t\t\teof_dword;\n};\n\nenum sli4_rqst_write_object_flags {\n\tSLI4_RQ_DES_WRITE_LEN\t\t= 0xffffff,\n\tSLI4_RQ_DES_WRITE_LEN_NOC\t= 0x40000000,\n\tSLI4_RQ_DES_WRITE_LEN_EOF\t= 0x80000000,\n};\n\nstruct sli4_rqst_cmn_write_object {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tdesired_write_len_dword;\n\t__le32\t\t\twrite_offset;\n\tu8\t\t\tobject_name[104];\n\t__le32\t\t\thost_buffer_descriptor_count;\n\tstruct sli4_bde\t\thost_buffer_descriptor[];\n};\n\n#define\tRSP_CHANGE_STATUS\t\t0xff\n\nstruct sli4_rsp_cmn_write_object {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tactual_write_length;\n\t__le32\t\t\tchange_status_dword;\n};\n\nstruct sli4_rqst_cmn_delete_object {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\trsvd4;\n\t__le32\t\t\trsvd5;\n\tu8\t\t\tobject_name[104];\n};\n\n#define SLI4_RQ_OBJ_LIST_READ_LEN\t0xffffff\n\nstruct sli4_rqst_cmn_read_object_list {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tdesired_read_length_dword;\n\t__le32\t\t\tread_offset;\n\tu8\t\t\tobject_name[104];\n\t__le32\t\t\thost_buffer_descriptor_count;\n\tstruct sli4_bde\t\thost_buffer_descriptor[];\n};\n\nenum sli4_rqst_set_dump_flags {\n\tSLI4_CMN_SET_DUMP_BUFFER_LEN\t= 0xffffff,\n\tSLI4_CMN_SET_DUMP_FDB\t\t= 0x20000000,\n\tSLI4_CMN_SET_DUMP_BLP\t\t= 0x40000000,\n\tSLI4_CMN_SET_DUMP_QRY\t\t= 0x80000000,\n};\n\nstruct sli4_rqst_cmn_set_dump_location {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tbuffer_length_dword;\n\t__le32\t\t\tbuf_addr_low;\n\t__le32\t\t\tbuf_addr_high;\n};\n\nstruct sli4_rsp_cmn_set_dump_location {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tbuffer_length_dword;\n};\n\nenum sli4_dump_level {\n\tSLI4_DUMP_LEVEL_NONE,\n\tSLI4_CHIP_LEVEL_DUMP,\n\tSLI4_FUNC_DESC_DUMP,\n};\n\nenum sli4_dump_state {\n\tSLI4_DUMP_STATE_NONE,\n\tSLI4_CHIP_DUMP_STATE_VALID,\n\tSLI4_FUNC_DUMP_STATE_VALID,\n};\n\nenum sli4_dump_status {\n\tSLI4_DUMP_READY_STATUS_NOT_READY,\n\tSLI4_DUMP_READY_STATUS_DD_PRESENT,\n\tSLI4_DUMP_READY_STATUS_FDB_PRESENT,\n\tSLI4_DUMP_READY_STATUS_SKIP_DUMP,\n\tSLI4_DUMP_READY_STATUS_FAILED = -1,\n};\n\nenum sli4_set_features {\n\tSLI4_SET_FEATURES_DIF_SEED\t\t\t= 0x01,\n\tSLI4_SET_FEATURES_XRI_TIMER\t\t\t= 0x03,\n\tSLI4_SET_FEATURES_MAX_PCIE_SPEED\t\t= 0x04,\n\tSLI4_SET_FEATURES_FCTL_CHECK\t\t\t= 0x05,\n\tSLI4_SET_FEATURES_FEC\t\t\t\t= 0x06,\n\tSLI4_SET_FEATURES_PCIE_RECV_DETECT\t\t= 0x07,\n\tSLI4_SET_FEATURES_DIF_MEMORY_MODE\t\t= 0x08,\n\tSLI4_SET_FEATURES_DISABLE_SLI_PORT_PAUSE_STATE\t= 0x09,\n\tSLI4_SET_FEATURES_ENABLE_PCIE_OPTIONS\t\t= 0x0a,\n\tSLI4_SET_FEAT_CFG_AUTO_XFER_RDY_T10PI\t\t= 0x0c,\n\tSLI4_SET_FEATURES_ENABLE_MULTI_RECEIVE_QUEUE\t= 0x0d,\n\tSLI4_SET_FEATURES_SET_FTD_XFER_HINT\t\t= 0x0f,\n\tSLI4_SET_FEATURES_SLI_PORT_HEALTH_CHECK\t\t= 0x11,\n};\n\nstruct sli4_rqst_cmn_set_features {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tfeature;\n\t__le32\t\t\tparam_len;\n\t__le32\t\t\tparams[8];\n};\n\nstruct sli4_rqst_cmn_set_features_dif_seed {\n\t__le16\t\tseed;\n\t__le16\t\trsvd16;\n};\n\nenum sli4_rqst_set_mrq_features {\n\tSLI4_RQ_MULTIRQ_ISR\t\t = 0x1,\n\tSLI4_RQ_MULTIRQ_AUTOGEN_XFER_RDY = 0x2,\n\n\tSLI4_RQ_MULTIRQ_NUM_RQS\t\t = 0xff,\n\tSLI4_RQ_MULTIRQ_RQ_SELECT\t = 0xf00,\n};\n\nstruct sli4_rqst_cmn_set_features_multirq {\n\t__le32\t\tauto_gen_xfer_dword;\n\t__le32\t\tnum_rqs_dword;\n};\n\nenum sli4_rqst_health_check_flags {\n\tSLI4_RQ_HEALTH_CHECK_ENABLE\t= 0x1,\n\tSLI4_RQ_HEALTH_CHECK_QUERY\t= 0x2,\n};\n\nstruct sli4_rqst_cmn_set_features_health_check {\n\t__le32\t\thealth_check_dword;\n};\n\nstruct sli4_rqst_cmn_set_features_set_fdt_xfer_hint {\n\t__le32\t\tfdt_xfer_hint;\n};\n\nstruct sli4_rqst_dmtf_exec_clp_cmd {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le32\t\t\tcmd_buf_length;\n\t__le32\t\t\tresp_buf_length;\n\t__le32\t\t\tcmd_buf_addr_low;\n\t__le32\t\t\tcmd_buf_addr_high;\n\t__le32\t\t\tresp_buf_addr_low;\n\t__le32\t\t\tresp_buf_addr_high;\n};\n\nstruct sli4_rsp_dmtf_exec_clp_cmd {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\trsvd4;\n\t__le32\t\t\tresp_length;\n\t__le32\t\t\trsvd6;\n\t__le32\t\t\trsvd7;\n\t__le32\t\t\trsvd8;\n\t__le32\t\t\trsvd9;\n\t__le32\t\t\tclp_status;\n\t__le32\t\t\tclp_detailed_status;\n};\n\n#define SLI4_PROTOCOL_FC\t\t0x10\n#define SLI4_PROTOCOL_DEFAULT\t\t0xff\n\nstruct sli4_rspource_descriptor_v1 {\n\tu8\t\tdescriptor_type;\n\tu8\t\tdescriptor_length;\n\t__le16\t\trsvd16;\n\t__le32\t\ttype_specific[];\n};\n\nenum sli4_pcie_desc_flags {\n\tSLI4_PCIE_DESC_IMM\t\t= 0x4000,\n\tSLI4_PCIE_DESC_NOSV\t\t= 0x8000,\n\n\tSLI4_PCIE_DESC_PF_NO\t\t= 0x3ff0000,\n\n\tSLI4_PCIE_DESC_MISSN_ROLE\t= 0xff,\n\tSLI4_PCIE_DESC_PCHG\t\t= 0x8000000,\n\tSLI4_PCIE_DESC_SCHG\t\t= 0x10000000,\n\tSLI4_PCIE_DESC_XCHG\t\t= 0x20000000,\n\tSLI4_PCIE_DESC_XROM\t\t= 0xc0000000\n};\n\nstruct sli4_pcie_resource_descriptor_v1 {\n\tu8\t\tdescriptor_type;\n\tu8\t\tdescriptor_length;\n\t__le16\t\timm_nosv_dword;\n\t__le32\t\tpf_number_dword;\n\t__le32\t\trsvd3;\n\tu8\t\tsriov_state;\n\tu8\t\tpf_state;\n\tu8\t\tpf_type;\n\tu8\t\trsvd4;\n\t__le16\t\tnumber_of_vfs;\n\t__le16\t\trsvd5;\n\t__le32\t\tmission_roles_dword;\n\t__le32\t\trsvd7[16];\n};\n\nstruct sli4_rqst_cmn_get_function_config {\n\tstruct sli4_rqst_hdr  hdr;\n};\n\nstruct sli4_rsp_cmn_get_function_config {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\tdesc_count;\n\t__le32\t\t\tdesc[54];\n};\n\n \nstruct sli4_link_config_descriptor {\n\tu8\t\tlink_config_id;\n\tu8\t\trsvd1[3];\n\t__le32\t\tconfig_description[8];\n};\n\n#define MAX_LINK_DES\t10\n\nstruct sli4_rqst_cmn_get_reconfig_link_info {\n\tstruct sli4_rqst_hdr  hdr;\n};\n\nstruct sli4_rsp_cmn_get_reconfig_link_info {\n\tstruct sli4_rsp_hdr\thdr;\n\tu8\t\t\tactive_link_config_id;\n\tu8\t\t\trsvd17;\n\tu8\t\t\tnext_link_config_id;\n\tu8\t\t\trsvd19;\n\t__le32\t\t\tlink_configuration_descriptor_count;\n\tstruct sli4_link_config_descriptor\n\t\t\t\tdesc[MAX_LINK_DES];\n};\n\nenum sli4_set_reconfig_link_flags {\n\tSLI4_SET_RECONFIG_LINKID_NEXT\t= 0xff,\n\tSLI4_SET_RECONFIG_LINKID_FD\t= 1u << 31,\n};\n\nstruct sli4_rqst_cmn_set_reconfig_link_id {\n\tstruct sli4_rqst_hdr  hdr;\n\t__le32\t\t\tdw4_flags;\n};\n\nstruct sli4_rsp_cmn_set_reconfig_link_id {\n\tstruct sli4_rsp_hdr\thdr;\n};\n\nstruct sli4_rqst_lowlevel_set_watchdog {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\twatchdog_timeout;\n\t__le16\t\t\trsvd18;\n};\n\nstruct sli4_rsp_lowlevel_set_watchdog {\n\tstruct sli4_rsp_hdr\thdr;\n\t__le32\t\t\trsvd;\n};\n\n \nenum sli4_fc_opcodes {\n\tSLI4_OPC_WQ_CREATE\t\t= 0x1,\n\tSLI4_OPC_WQ_DESTROY\t\t= 0x2,\n\tSLI4_OPC_POST_SGL_PAGES\t\t= 0x3,\n\tSLI4_OPC_RQ_CREATE\t\t= 0x5,\n\tSLI4_OPC_RQ_DESTROY\t\t= 0x6,\n\tSLI4_OPC_READ_FCF_TABLE\t\t= 0x8,\n\tSLI4_OPC_POST_HDR_TEMPLATES\t= 0xb,\n\tSLI4_OPC_REDISCOVER_FCF\t\t= 0x10,\n};\n\n \n#define SLI4_CQ_DEFAULT 0xffff\n\n \nstruct sli4_rqst_post_sgl_pages {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\txri_start;\n\t__le16\t\t\txri_count;\n\tstruct {\n\t\t__le32\t\tpage0_low;\n\t\t__le32\t\tpage0_high;\n\t\t__le32\t\tpage1_low;\n\t\t__le32\t\tpage1_high;\n\t} page_set[10];\n};\n\nstruct sli4_rsp_post_sgl_pages {\n\tstruct sli4_rsp_hdr\thdr;\n};\n\nstruct sli4_rqst_post_hdr_templates {\n\tstruct sli4_rqst_hdr\thdr;\n\t__le16\t\t\trpi_offset;\n\t__le16\t\t\tpage_count;\n\tstruct sli4_dmaaddr\tpage_descriptor[];\n};\n\n#define SLI4_HDR_TEMPLATE_SIZE\t\t64\n\nenum sli4_io_flags {\n \n\tSLI4_IO_CONTINUATION\t\t= 1 << 0,\n \n\tSLI4_IO_AUTO_GOOD_RESPONSE\t= 1 << 1,\n\tSLI4_IO_NO_ABORT\t\t= 1 << 2,\n \n\tSLI4_IO_DNRX\t\t\t= 1 << 3,\n};\n\nenum sli4_callback {\n\tSLI4_CB_LINK,\n\tSLI4_CB_MAX,\n};\n\nenum sli4_link_status {\n\tSLI4_LINK_STATUS_UP,\n\tSLI4_LINK_STATUS_DOWN,\n\tSLI4_LINK_STATUS_NO_ALPA,\n\tSLI4_LINK_STATUS_MAX,\n};\n\nenum sli4_link_topology {\n\tSLI4_LINK_TOPO_NON_FC_AL = 1,\n\tSLI4_LINK_TOPO_FC_AL,\n\tSLI4_LINK_TOPO_LOOPBACK_INTERNAL,\n\tSLI4_LINK_TOPO_LOOPBACK_EXTERNAL,\n\tSLI4_LINK_TOPO_NONE,\n\tSLI4_LINK_TOPO_MAX,\n};\n\nenum sli4_link_medium {\n\tSLI4_LINK_MEDIUM_ETHERNET,\n\tSLI4_LINK_MEDIUM_FC,\n\tSLI4_LINK_MEDIUM_MAX,\n};\n \n\nstruct sli4_queue {\n\t \n\tstruct efc_dma\tdma;\n\tspinlock_t\tlock;\t\t \n\tu32\t\tindex;\t\t \n\tu16\t\tsize;\t\t \n\tu16\t\tlength;\t\t \n\tu16\t\tn_posted;\t \n\tu16\t\tid;\t\t \n\tu8\t\ttype;\t\t \n\tvoid __iomem    *db_regaddr;\t \n\tu16\t\tphase;\t\t \n\tu32\t\tproc_limit;\t \n\tu32\t\tposted_limit;\t \n\tu32\t\tmax_num_processed;\n\tu64\t\tmax_process_time;\n\tunion {\n\t\tu32\tr_idx;\t\t \n\t\tu32\tflag;\n\t} u;\n};\n\n \nstruct sli_bls_params {\n\tu32\t\ts_id;\n\tu32\t\td_id;\n\tu16\t\tox_id;\n\tu16\t\trx_id;\n\tu32\t\trpi;\n\tu32\t\tvpi;\n\tbool\t\trpi_registered;\n\tu8\t\tpayload[12];\n\tu16\t\txri;\n\tu16\t\ttag;\n};\n\nstruct sli_els_params {\n\tu32\t\ts_id;\n\tu32\t\td_id;\n\tu16\t\tox_id;\n\tu32\t\trpi;\n\tu32\t\tvpi;\n\tbool\t\trpi_registered;\n\tu32\t\txmit_len;\n\tu32\t\trsp_len;\n\tu8\t\ttimeout;\n\tu8\t\tcmd;\n\tu16\t\txri;\n\tu16\t\ttag;\n};\n\nstruct sli_ct_params {\n\tu8\t\tr_ctl;\n\tu8\t\ttype;\n\tu8\t\tdf_ctl;\n\tu8\t\ttimeout;\n\tu16\t\tox_id;\n\tu32\t\td_id;\n\tu32\t\trpi;\n\tu32\t\tvpi;\n\tbool\t\trpi_registered;\n\tu32\t\txmit_len;\n\tu32\t\trsp_len;\n\tu16\t\txri;\n\tu16\t\ttag;\n};\n\nstruct sli_fcp_tgt_params {\n\tu32\t\ts_id;\n\tu32\t\td_id;\n\tu32\t\trpi;\n\tu32\t\tvpi;\n\tu32\t\toffset;\n\tu16\t\tox_id;\n\tu16\t\tflags;\n\tu8\t\tcs_ctl;\n\tu8\t\ttimeout;\n\tu32\t\tapp_id;\n\tu32\t\txmit_len;\n\tu16\t\txri;\n\tu16\t\ttag;\n};\n\nstruct sli4_link_event {\n\tenum sli4_link_status\tstatus;\n\tenum sli4_link_topology\ttopology;\n\tenum sli4_link_medium\tmedium;\n\tu32\t\t\tspeed;\n\tu8\t\t\t*loop_map;\n\tu32\t\t\tfc_id;\n};\n\nenum sli4_resource {\n\tSLI4_RSRC_VFI,\n\tSLI4_RSRC_VPI,\n\tSLI4_RSRC_RPI,\n\tSLI4_RSRC_XRI,\n\tSLI4_RSRC_FCFI,\n\tSLI4_RSRC_MAX,\n};\n\nstruct sli4_extent {\n\tu32\t\tnumber;\n\tu32\t\tsize;\n\tu32\t\tn_alloc;\n\tu32\t\t*base;\n\tunsigned long\t*use_map;\n\tu32\t\tmap_size;\n};\n\nstruct sli4_queue_info {\n\tu16\tmax_qcount[SLI4_QTYPE_MAX];\n\tu32\tmax_qentries[SLI4_QTYPE_MAX];\n\tu16\tcount_mask[SLI4_QTYPE_MAX];\n\tu16\tcount_method[SLI4_QTYPE_MAX];\n\tu32\tqpage_count[SLI4_QTYPE_MAX];\n};\n\nstruct sli4_params {\n\tu8\thas_extents;\n\tu8\tauto_reg;\n\tu8\tauto_xfer_rdy;\n\tu8\thdr_template_req;\n\tu8\tperf_hint;\n\tu8\tperf_wq_id_association;\n\tu8\tcq_create_version;\n\tu8\tmq_create_version;\n\tu8\thigh_login_mode;\n\tu8\tsgl_pre_registered;\n\tu8\tsgl_pre_reg_required;\n\tu8\tt10_dif_inline_capable;\n\tu8\tt10_dif_separate_capable;\n};\n\nstruct sli4 {\n\tvoid\t\t\t*os;\n\tstruct pci_dev\t\t*pci;\n\tvoid __iomem\t\t*reg[PCI_STD_NUM_BARS];\n\n\tu32\t\t\tsli_rev;\n\tu32\t\t\tsli_family;\n\tu32\t\t\tif_type;\n\n\tu16\t\t\tasic_type;\n\tu16\t\t\tasic_rev;\n\n\tu16\t\t\te_d_tov;\n\tu16\t\t\tr_a_tov;\n\tstruct sli4_queue_info\tqinfo;\n\tu16\t\t\tlink_module_type;\n\tu8\t\t\trq_batch;\n\tu8\t\t\tport_number;\n\tchar\t\t\tport_name[2];\n\tu16\t\t\trq_min_buf_size;\n\tu32\t\t\trq_max_buf_size;\n\tu8\t\t\ttopology;\n\tu8\t\t\twwpn[8];\n\tu8\t\t\twwnn[8];\n\tu32\t\t\tfw_rev[2];\n\tu8\t\t\tfw_name[2][16];\n\tchar\t\t\tipl_name[16];\n\tu32\t\t\thw_rev[3];\n\tchar\t\t\tmodeldesc[64];\n\tchar\t\t\tbios_version_string[32];\n\tu32\t\t\twqe_size;\n\tu32\t\t\tvpd_length;\n\t \n\tstruct sli4_extent\text[SLI4_RSRC_MAX];\n\tu32\t\t\tfeatures;\n\tstruct sli4_params\tparams;\n\tu32\t\t\tsge_supported_length;\n\tu32\t\t\tsgl_page_sizes;\n\tu32\t\t\tmax_sgl_pages;\n\n\t \n\tint\t\t\t(*link)(void *ctx, void *event);\n\tvoid\t\t\t*link_arg;\n\n\tstruct efc_dma\t\tbmbx;\n\n\t \n\tstruct efc_dma\t\t*bmbx_non_emb_pmd;\n\n\tstruct efc_dma\t\tvpd_data;\n};\n\nstatic inline void\nsli_cmd_fill_hdr(struct sli4_rqst_hdr *hdr, u8 opc, u8 sub, u32 ver, __le32 len)\n{\n\thdr->opcode = opc;\n\thdr->subsystem = sub;\n\thdr->dw3_version = cpu_to_le32(ver);\n\thdr->request_length = len;\n}\n\n \n\nstatic inline u32\nsli_get_max_sge(struct sli4 *sli4)\n{\n\treturn sli4->sge_supported_length;\n}\n\nstatic inline u32\nsli_get_max_sgl(struct sli4 *sli4)\n{\n\tif (sli4->sgl_page_sizes != 1) {\n\t\tefc_log_err(sli4, \"unsupported SGL page sizes %#x\\n\",\n\t\t\t    sli4->sgl_page_sizes);\n\t\treturn 0;\n\t}\n\n\treturn (sli4->max_sgl_pages * SLI_PAGE_SIZE) / sizeof(struct sli4_sge);\n}\n\nstatic inline enum sli4_link_medium\nsli_get_medium(struct sli4 *sli4)\n{\n\tswitch (sli4->topology) {\n\tcase SLI4_READ_CFG_TOPO_FC:\n\tcase SLI4_READ_CFG_TOPO_FC_AL:\n\tcase SLI4_READ_CFG_TOPO_NON_FC_AL:\n\t\treturn SLI4_LINK_MEDIUM_FC;\n\tdefault:\n\t\treturn SLI4_LINK_MEDIUM_MAX;\n\t}\n}\n\nstatic inline u32\nsli_get_lmt(struct sli4 *sli4)\n{\n\treturn sli4->link_module_type;\n}\n\nstatic inline int\nsli_set_topology(struct sli4 *sli4, u32 value)\n{\n\tint\trc = 0;\n\n\tswitch (value) {\n\tcase SLI4_READ_CFG_TOPO_FC:\n\tcase SLI4_READ_CFG_TOPO_FC_AL:\n\tcase SLI4_READ_CFG_TOPO_NON_FC_AL:\n\t\tsli4->topology = value;\n\t\tbreak;\n\tdefault:\n\t\tefc_log_err(sli4, \"unsupported topology %#x\\n\", value);\n\t\trc = -1;\n\t}\n\n\treturn rc;\n}\n\nstatic inline u32\nsli_convert_mask_to_count(u32 method, u32 mask)\n{\n\tu32 count = 0;\n\n\tif (method) {\n\t\tcount = 1 << (31 - __builtin_clz(mask));\n\t\tcount *= 16;\n\t} else {\n\t\tcount = mask;\n\t}\n\n\treturn count;\n}\n\nstatic inline u32\nsli_reg_read_status(struct sli4 *sli)\n{\n\treturn readl(sli->reg[0] + SLI4_PORT_STATUS_REGOFF);\n}\n\nstatic inline int\nsli_fw_error_status(struct sli4 *sli4)\n{\n\treturn (sli_reg_read_status(sli4) & SLI4_PORT_STATUS_ERR) ? 1 : 0;\n}\n\nstatic inline u32\nsli_reg_read_err1(struct sli4 *sli)\n{\n\treturn readl(sli->reg[0] + SLI4_PORT_ERROR1);\n}\n\nstatic inline u32\nsli_reg_read_err2(struct sli4 *sli)\n{\n\treturn readl(sli->reg[0] + SLI4_PORT_ERROR2);\n}\n\nstatic inline int\nsli_fc_rqe_length(struct sli4 *sli4, void *cqe, u32 *len_hdr,\n\t\t  u32 *len_data)\n{\n\tstruct sli4_fc_async_rcqe\t*rcqe = cqe;\n\n\t*len_hdr = *len_data = 0;\n\n\tif (rcqe->status == SLI4_FC_ASYNC_RQ_SUCCESS) {\n\t\t*len_hdr  = rcqe->hdpl_byte & SLI4_RACQE_HDPL;\n\t\t*len_data = le16_to_cpu(rcqe->data_placement_length);\n\t\treturn 0;\n\t} else {\n\t\treturn -1;\n\t}\n}\n\nstatic inline u8\nsli_fc_rqe_fcfi(struct sli4 *sli4, void *cqe)\n{\n\tu8 code = ((u8 *)cqe)[SLI4_CQE_CODE_OFFSET];\n\tu8 fcfi = U8_MAX;\n\n\tswitch (code) {\n\tcase SLI4_CQE_CODE_RQ_ASYNC: {\n\t\tstruct sli4_fc_async_rcqe *rcqe = cqe;\n\n\t\tfcfi = le16_to_cpu(rcqe->fcfi_rq_id_word) & SLI4_RACQE_FCFI;\n\t\tbreak;\n\t}\n\tcase SLI4_CQE_CODE_RQ_ASYNC_V1: {\n\t\tstruct sli4_fc_async_rcqe_v1 *rcqev1 = cqe;\n\n\t\tfcfi = rcqev1->fcfi_byte & SLI4_RACQE_FCFI;\n\t\tbreak;\n\t}\n\tcase SLI4_CQE_CODE_OPTIMIZED_WRITE_CMD: {\n\t\tstruct sli4_fc_optimized_write_cmd_cqe *opt_wr = cqe;\n\n\t\tfcfi = opt_wr->flags0 & SLI4_OCQE_FCFI;\n\t\tbreak;\n\t}\n\t}\n\n\treturn fcfi;\n}\n\n \nint\nsli_cmd_config_link(struct sli4 *sli4, void *buf);\nint\nsli_cmd_down_link(struct sli4 *sli4, void *buf);\nint\nsli_cmd_dump_type4(struct sli4 *sli4, void *buf, u16 wki);\nint\nsli_cmd_common_read_transceiver_data(struct sli4 *sli4, void *buf,\n\t\t\t\t     u32 page_num, struct efc_dma *dma);\nint\nsli_cmd_read_link_stats(struct sli4 *sli4, void *buf, u8 req_stats,\n\t\t\tu8 clear_overflow_flags, u8 clear_all_counters);\nint\nsli_cmd_read_status(struct sli4 *sli4, void *buf, u8 clear);\nint\nsli_cmd_init_link(struct sli4 *sli4, void *buf, u32 speed,\n\t\t  u8 reset_alpa);\nint\nsli_cmd_init_vfi(struct sli4 *sli4, void *buf, u16 vfi, u16 fcfi,\n\t\t u16 vpi);\nint\nsli_cmd_init_vpi(struct sli4 *sli4, void *buf, u16 vpi, u16 vfi);\nint\nsli_cmd_post_xri(struct sli4 *sli4, void *buf, u16 base, u16 cnt);\nint\nsli_cmd_release_xri(struct sli4 *sli4, void *buf, u8 num_xri);\nint\nsli_cmd_read_sparm64(struct sli4 *sli4, void *buf,\n\t\t     struct efc_dma *dma, u16 vpi);\nint\nsli_cmd_read_topology(struct sli4 *sli4, void *buf, struct efc_dma *dma);\nint\nsli_cmd_read_nvparms(struct sli4 *sli4, void *buf);\nint\nsli_cmd_write_nvparms(struct sli4 *sli4, void *buf, u8 *wwpn,\n\t\t      u8 *wwnn, u8 hard_alpa, u32 preferred_d_id);\nint\nsli_cmd_reg_fcfi(struct sli4 *sli4, void *buf, u16 index,\n\t\t struct sli4_cmd_rq_cfg *rq_cfg);\nint\nsli_cmd_reg_fcfi_mrq(struct sli4 *sli4, void *buf, u8 mode, u16 index,\n\t\t     u8 rq_selection_policy, u8 mrq_bit_mask, u16 num_mrqs,\n\t\t     struct sli4_cmd_rq_cfg *rq_cfg);\nint\nsli_cmd_reg_rpi(struct sli4 *sli4, void *buf, u32 rpi, u32 vpi, u32 fc_id,\n\t\tstruct efc_dma *dma, u8 update, u8 enable_t10_pi);\nint\nsli_cmd_unreg_fcfi(struct sli4 *sli4, void *buf, u16 indicator);\nint\nsli_cmd_unreg_rpi(struct sli4 *sli4, void *buf, u16 indicator,\n\t\t  enum sli4_resource which, u32 fc_id);\nint\nsli_cmd_reg_vpi(struct sli4 *sli4, void *buf, u32 fc_id,\n\t\t__be64 sli_wwpn, u16 vpi, u16 vfi, bool update);\nint\nsli_cmd_reg_vfi(struct sli4 *sli4, void *buf, size_t size,\n\t\tu16 vfi, u16 fcfi, struct efc_dma dma,\n\t\tu16 vpi, __be64 sli_wwpn, u32 fc_id);\nint\nsli_cmd_unreg_vpi(struct sli4 *sli4, void *buf, u16 id, u32 type);\nint\nsli_cmd_unreg_vfi(struct sli4 *sli4, void *buf, u16 idx, u32 type);\nint\nsli_cmd_common_nop(struct sli4 *sli4, void *buf, uint64_t context);\nint\nsli_cmd_common_get_resource_extent_info(struct sli4 *sli4, void *buf,\n\t\t\t\t\tu16 rtype);\nint\nsli_cmd_common_get_sli4_parameters(struct sli4 *sli4, void *buf);\nint\nsli_cmd_common_write_object(struct sli4 *sli4, void *buf, u16 noc,\n\t\tu16 eof, u32 len, u32 offset, char *name, struct efc_dma *dma);\nint\nsli_cmd_common_delete_object(struct sli4 *sli4, void *buf, char *object_name);\nint\nsli_cmd_common_read_object(struct sli4 *sli4, void *buf,\n\t\tu32 length, u32 offset, char *name, struct efc_dma *dma);\nint\nsli_cmd_dmtf_exec_clp_cmd(struct sli4 *sli4, void *buf,\n\t\tstruct efc_dma *cmd, struct efc_dma *resp);\nint\nsli_cmd_common_set_dump_location(struct sli4 *sli4, void *buf,\n\t\tbool query, bool is_buffer_list, struct efc_dma *dma, u8 fdb);\nint\nsli_cmd_common_set_features(struct sli4 *sli4, void *buf,\n\t\t\t    u32 feature, u32 param_len, void *parameter);\n\nint sli_cqe_mq(struct sli4 *sli4, void *buf);\nint sli_cqe_async(struct sli4 *sli4, void *buf);\n\nint\nsli_setup(struct sli4 *sli4, void *os, struct pci_dev *pdev, void __iomem *r[]);\nvoid sli_calc_max_qentries(struct sli4 *sli4);\nint sli_init(struct sli4 *sli4);\nint sli_reset(struct sli4 *sli4);\nint sli_fw_reset(struct sli4 *sli4);\nvoid sli_teardown(struct sli4 *sli4);\nint\nsli_callback(struct sli4 *sli4, enum sli4_callback cb, void *func, void *arg);\nint\nsli_bmbx_command(struct sli4 *sli4);\nint\n__sli_queue_init(struct sli4 *sli4, struct sli4_queue *q, u32 qtype,\n\t\t size_t size, u32 n_entries, u32 align);\nint\n__sli_create_queue(struct sli4 *sli4, struct sli4_queue *q);\nint\nsli_eq_modify_delay(struct sli4 *sli4, struct sli4_queue *eq, u32 num_eq,\n\t\t    u32 shift, u32 delay_mult);\nint\nsli_queue_alloc(struct sli4 *sli4, u32 qtype, struct sli4_queue *q,\n\t\tu32 n_entries, struct sli4_queue *assoc);\nint\nsli_cq_alloc_set(struct sli4 *sli4, struct sli4_queue *qs[], u32 num_cqs,\n\t\t u32 n_entries, struct sli4_queue *eqs[]);\nint\nsli_get_queue_entry_size(struct sli4 *sli4, u32 qtype);\nint\nsli_queue_free(struct sli4 *sli4, struct sli4_queue *q, u32 destroy_queues,\n\t       u32 free_memory);\nint\nsli_queue_eq_arm(struct sli4 *sli4, struct sli4_queue *q, bool arm);\nint\nsli_queue_arm(struct sli4 *sli4, struct sli4_queue *q, bool arm);\n\nint\nsli_wq_write(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_mq_write(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_rq_write(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_eq_read(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_cq_read(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_mq_read(struct sli4 *sli4, struct sli4_queue *q, u8 *entry);\nint\nsli_resource_alloc(struct sli4 *sli4, enum sli4_resource rtype, u32 *rid,\n\t\t   u32 *index);\nint\nsli_resource_free(struct sli4 *sli4, enum sli4_resource rtype, u32 rid);\nint\nsli_resource_reset(struct sli4 *sli4, enum sli4_resource rtype);\nint\nsli_eq_parse(struct sli4 *sli4, u8 *buf, u16 *cq_id);\nint\nsli_cq_parse(struct sli4 *sli4, struct sli4_queue *cq, u8 *cqe,\n\t     enum sli4_qentry *etype, u16 *q_id);\n\nint sli_raise_ue(struct sli4 *sli4, u8 dump);\nint sli_dump_is_ready(struct sli4 *sli4);\nbool sli_reset_required(struct sli4 *sli4);\nbool sli_fw_ready(struct sli4 *sli4);\n\nint\nsli_fc_process_link_attention(struct sli4 *sli4, void *acqe);\nint\nsli_fc_cqe_parse(struct sli4 *sli4, struct sli4_queue *cq,\n\t\t u8 *cqe, enum sli4_qentry *etype,\n\t\t u16 *rid);\nu32 sli_fc_response_length(struct sli4 *sli4, u8 *cqe);\nu32 sli_fc_io_length(struct sli4 *sli4, u8 *cqe);\nint sli_fc_els_did(struct sli4 *sli4, u8 *cqe, u32 *d_id);\nu32 sli_fc_ext_status(struct sli4 *sli4, u8 *cqe);\nint\nsli_fc_rqe_rqid_and_index(struct sli4 *sli4, u8 *cqe, u16 *rq_id, u32 *index);\nint\nsli_cmd_wq_create(struct sli4 *sli4, void *buf,\n\t\t  struct efc_dma *qmem, u16 cq_id);\nint sli_cmd_post_sgl_pages(struct sli4 *sli4, void *buf, u16 xri,\n\t\tu32 xri_count, struct efc_dma *page0[], struct efc_dma *page1[],\n\t\tstruct efc_dma *dma);\nint\nsli_cmd_post_hdr_templates(struct sli4 *sli4, void *buf,\n\t\tstruct efc_dma *dma, u16 rpi, struct efc_dma *payload_dma);\nint\nsli_fc_rq_alloc(struct sli4 *sli4, struct sli4_queue *q, u32 n_entries,\n\t\tu32 buffer_size, struct sli4_queue *cq, bool is_hdr);\nint\nsli_fc_rq_set_alloc(struct sli4 *sli4, u32 num_rq_pairs, struct sli4_queue *q[],\n\t\tu32 base_cq_id, u32 num, u32 hdr_buf_size, u32 data_buf_size);\nu32 sli_fc_get_rpi_requirements(struct sli4 *sli4, u32 n_rpi);\nint\nsli_abort_wqe(struct sli4 *sli4, void *buf, enum sli4_abort_type type,\n\t      bool send_abts, u32 ids, u32 mask, u16 tag, u16 cq_id);\n\nint\nsli_send_frame_wqe(struct sli4 *sli4, void *buf, u8 sof, u8 eof,\n\t\t   u32 *hdr, struct efc_dma *payload, u32 req_len, u8 timeout,\n\t\t   u16 xri, u16 req_tag);\n\nint\nsli_xmit_els_rsp64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *rsp,\n\t\t       struct sli_els_params *params);\n\nint\nsli_els_request64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t      struct sli_els_params *params);\n\nint\nsli_fcp_icmnd64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl, u16 xri,\n\t\t    u16 tag, u16 cq_id, u32 rpi, u32 rnode_fcid, u8 timeout);\n\nint\nsli_fcp_iread64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t    u32 first_data_sge, u32 xfer_len, u16 xri,\n\t\t    u16 tag, u16 cq_id, u32 rpi, u32 rnode_fcid, u8 dif, u8 bs,\n\t\t    u8 timeout);\n\nint\nsli_fcp_iwrite64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t     u32 first_data_sge, u32 xfer_len,\n\t\t     u32 first_burst, u16 xri, u16 tag, u16 cq_id, u32 rpi,\n\t\t     u32 rnode_fcid, u8 dif, u8 bs, u8 timeout);\n\nint\nsli_fcp_treceive64_wqe(struct sli4 *sli, void *buf, struct efc_dma *sgl,\n\t\t       u32 first_data_sge, u16 cq_id, u8 dif, u8 bs,\n\t\t       struct sli_fcp_tgt_params *params);\nint\nsli_fcp_cont_treceive64_wqe(struct sli4 *sli, void *buf, struct efc_dma *sgl,\n\t\t\t    u32 first_data_sge, u16 sec_xri, u16 cq_id, u8 dif,\n\t\t\t    u8 bs, struct sli_fcp_tgt_params *params);\n\nint\nsli_fcp_trsp64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t   u16 cq_id, u8 port_owned, struct sli_fcp_tgt_params *params);\n\nint\nsli_fcp_tsend64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t    u32 first_data_sge, u16 cq_id, u8 dif, u8 bs,\n\t\t    struct sli_fcp_tgt_params *params);\nint\nsli_gen_request64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *sgl,\n\t\t      struct sli_ct_params *params);\n\nint\nsli_xmit_bls_rsp64_wqe(struct sli4 *sli4, void *buf,\n\t\tstruct sli_bls_payload *payload, struct sli_bls_params *params);\n\nint\nsli_xmit_sequence64_wqe(struct sli4 *sli4, void *buf, struct efc_dma *payload,\n\t\t\tstruct sli_ct_params *params);\n\nint\nsli_requeue_xri_wqe(struct sli4 *sli4, void *buf, u16 xri, u16 tag, u16 cq_id);\nvoid\nsli4_cmd_lowlevel_set_watchdog(struct sli4 *sli4, void *buf, size_t size,\n\t\t\t       u16 timeout);\n\nconst char *sli_fc_get_status_string(u32 status);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}