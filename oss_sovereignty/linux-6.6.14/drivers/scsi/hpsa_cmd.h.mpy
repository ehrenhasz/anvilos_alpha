{
  "module_name": "hpsa_cmd.h",
  "hash_id": "501f79142b74982f9d48afd0bace68f41d05eb31f5a123369be375b7c2f53ba5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/hpsa_cmd.h",
  "human_readable_source": " \n#ifndef HPSA_CMD_H\n#define HPSA_CMD_H\n\n#include <linux/compiler.h>\n\n#include <linux/build_bug.h>  \n#include <linux/stddef.h>  \n\n \n#define SENSEINFOBYTES          32  \n#define SG_ENTRIES_IN_CMD\t32  \n#define HPSA_SG_CHAIN\t\t0x80000000\n#define HPSA_SG_LAST\t\t0x40000000\n#define MAXREPLYQS              256\n\n \n#define CMD_SUCCESS             0x0000\n#define CMD_TARGET_STATUS       0x0001\n#define CMD_DATA_UNDERRUN       0x0002\n#define CMD_DATA_OVERRUN        0x0003\n#define CMD_INVALID             0x0004\n#define CMD_PROTOCOL_ERR        0x0005\n#define CMD_HARDWARE_ERR        0x0006\n#define CMD_CONNECTION_LOST     0x0007\n#define CMD_ABORTED             0x0008\n#define CMD_ABORT_FAILED        0x0009\n#define CMD_UNSOLICITED_ABORT   0x000A\n#define CMD_TIMEOUT             0x000B\n#define CMD_UNABORTABLE\t\t0x000C\n#define CMD_TMF_STATUS\t\t0x000D\n#define CMD_IOACCEL_DISABLED\t0x000E\n#define CMD_CTLR_LOCKUP\t\t0xffff\n \n\n \n#define CISS_TMF_COMPLETE\t0x00\n#define CISS_TMF_INVALID_FRAME\t0x02\n#define CISS_TMF_NOT_SUPPORTED\t0x04\n#define CISS_TMF_FAILED\t\t0x05\n#define CISS_TMF_SUCCESS\t0x08\n#define CISS_TMF_WRONG_LUN\t0x09\n#define CISS_TMF_OVERLAPPED_TAG 0x0a\n\n \n#define POWER_OR_RESET\t\t\t0x29\n#define STATE_CHANGED\t\t\t0x2a\n#define UNIT_ATTENTION_CLEARED\t\t0x2f\n#define LUN_FAILED\t\t\t0x3e\n#define REPORT_LUNS_CHANGED\t\t0x3f\n\n \n\n\t \n#define POWER_ON_RESET\t\t\t0x00\n#define POWER_ON_REBOOT\t\t\t0x01\n#define SCSI_BUS_RESET\t\t\t0x02\n#define MSA_TARGET_RESET\t\t0x03\n#define CONTROLLER_FAILOVER\t\t0x04\n#define TRANSCEIVER_SE\t\t\t0x05\n#define TRANSCEIVER_LVD\t\t\t0x06\n\n\t \n#define RESERVATION_PREEMPTED\t\t0x03\n#define ASYM_ACCESS_CHANGED\t\t0x06\n#define LUN_CAPACITY_CHANGED\t\t0x09\n\n \n#define XFER_NONE               0x00\n#define XFER_WRITE              0x01\n#define XFER_READ               0x02\n#define XFER_RSVD               0x03\n\n \n#define ATTR_UNTAGGED           0x00\n#define ATTR_SIMPLE             0x04\n#define ATTR_HEADOFQUEUE        0x05\n#define ATTR_ORDERED            0x06\n#define ATTR_ACA                0x07\n\n \n#define TYPE_CMD\t\t0x00\n#define TYPE_MSG\t\t0x01\n#define TYPE_IOACCEL2_CMD\t0x81  \n\n \n#define HPSA_TASK_MANAGEMENT    0x00\n#define HPSA_RESET              0x01\n#define HPSA_SCAN               0x02\n#define HPSA_NOOP               0x03\n\n#define HPSA_CTLR_RESET_TYPE    0x00\n#define HPSA_BUS_RESET_TYPE     0x01\n#define HPSA_TARGET_RESET_TYPE  0x03\n#define HPSA_LUN_RESET_TYPE     0x04\n#define HPSA_NEXUS_RESET_TYPE   0x05\n\n \n#define HPSA_TMF_ABORT_TASK     0x00\n#define HPSA_TMF_ABORT_TASK_SET 0x01\n#define HPSA_TMF_CLEAR_ACA      0x02\n#define HPSA_TMF_CLEAR_TASK_SET 0x03\n#define HPSA_TMF_QUERY_TASK     0x04\n#define HPSA_TMF_QUERY_TASK_SET 0x05\n#define HPSA_TMF_QUERY_ASYNCEVENT 0x06\n\n\n\n \n#define CFG_VENDORID            0x00\n#define CFG_DEVICEID            0x02\n#define CFG_I2OBAR              0x10\n#define CFG_MEM1BAR             0x14\n\n \n#define I2O_IBDB_SET            0x20\n#define I2O_IBDB_CLEAR          0x70\n#define I2O_INT_STATUS          0x30\n#define I2O_INT_MASK            0x34\n#define I2O_IBPOST_Q            0x40\n#define I2O_OBPOST_Q            0x44\n#define I2O_DMA1_CFG\t\t0x214\n\n \n#define CFGTBL_ChangeReq        0x00000001l\n#define CFGTBL_AccCmds          0x00000001l\n#define DOORBELL_CTLR_RESET\t0x00000004l\n#define DOORBELL_CTLR_RESET2\t0x00000020l\n#define DOORBELL_CLEAR_EVENTS\t0x00000040l\n#define DOORBELL_GENERATE_CHKPT\t0x00000080l\n\n#define CFGTBL_Trans_Simple     0x00000002l\n#define CFGTBL_Trans_Performant 0x00000004l\n#define CFGTBL_Trans_io_accel1\t0x00000080l\n#define CFGTBL_Trans_io_accel2\t0x00000100l\n#define CFGTBL_Trans_use_short_tags 0x20000000l\n#define CFGTBL_Trans_enable_directed_msix (1 << 30)\n\n#define CFGTBL_BusType_Ultra2   0x00000001l\n#define CFGTBL_BusType_Ultra3   0x00000002l\n#define CFGTBL_BusType_Fibre1G  0x00000100l\n#define CFGTBL_BusType_Fibre2G  0x00000200l\n\n \n#define HPSA_INQUIRY_FAILED\t\t0x02\n#define HPSA_VPD_SUPPORTED_PAGES        0x00\n#define HPSA_VPD_LV_DEVICE_ID           0x83\n#define HPSA_VPD_LV_DEVICE_GEOMETRY     0xC1\n#define HPSA_VPD_LV_IOACCEL_STATUS      0xC2\n#define HPSA_VPD_LV_STATUS\t\t0xC3\n#define HPSA_VPD_HEADER_SZ              4\n\n \n#define HPSA_VPD_LV_STATUS_UNSUPPORTED\t\t\t0xff\n#define HPSA_LV_OK                                      0x0\n#define HPSA_LV_FAILED\t\t\t\t\t0x01\n#define HPSA_LV_NOT_AVAILABLE\t\t\t\t0x0b\n#define HPSA_LV_UNDERGOING_ERASE\t\t\t0x0F\n#define HPSA_LV_UNDERGOING_RPI\t\t\t\t0x12\n#define HPSA_LV_PENDING_RPI\t\t\t\t0x13\n#define HPSA_LV_ENCRYPTED_NO_KEY\t\t\t0x14\n#define HPSA_LV_PLAINTEXT_IN_ENCRYPT_ONLY_CONTROLLER\t0x15\n#define HPSA_LV_UNDERGOING_ENCRYPTION\t\t\t0x16\n#define HPSA_LV_UNDERGOING_ENCRYPTION_REKEYING\t\t0x17\n#define HPSA_LV_ENCRYPTED_IN_NON_ENCRYPTED_CONTROLLER\t0x18\n#define HPSA_LV_PENDING_ENCRYPTION\t\t\t0x19\n#define HPSA_LV_PENDING_ENCRYPTION_REKEYING\t\t0x1A\n\nstruct vals32 {\n\tu32   lower;\n\tu32   upper;\n};\n\nunion u64bit {\n\tstruct vals32 val32;\n\tu64 val;\n};\n\n \n#define HPSA_MAX_LUN 1024\n#define HPSA_MAX_PHYS_LUN 1024\n#define MAX_EXT_TARGETS 32\n#define HPSA_MAX_DEVICES (HPSA_MAX_PHYS_LUN + HPSA_MAX_LUN + \\\n\tMAX_EXT_TARGETS + 1)  \n\n \n#define HPSA_INQUIRY 0x12\nstruct InquiryData {\n\tu8 data_byte[36];\n} __packed;\n\n#define HPSA_REPORT_LOG 0xc2     \n#define HPSA_REPORT_PHYS 0xc3    \n#define HPSA_REPORT_PHYS_EXTENDED 0x02\n#define HPSA_CISS_READ\t0xc0\t \n#define HPSA_GET_RAID_MAP 0xc8\t \n\n#define RAID_MAP_MAX_ENTRIES   256\n\nstruct raid_map_disk_data {\n\tu32   ioaccel_handle;          \n\tu8    xor_mult[2];             \n\tu8    reserved[2];\n} __packed;\n\nstruct raid_map_data {\n\t__le32   structure_size;\t \n\t__le32   volume_blk_size;\t \n\t__le64   volume_blk_cnt;\t \n\tu8    phys_blk_shift;\t\t \n\tu8    parity_rotation_shift;\t \n\t__le16   strip_size;\t\t \n\t__le64   disk_starting_blk;\t \n\t__le64   disk_blk_cnt;\t\t \n\t__le16   data_disks_per_row;\t \n\t__le16   metadata_disks_per_row; \n\t__le16   row_cnt;\t\t \n\t__le16   layout_map_count;\t \n\t__le16   flags;\t\t\t \n#define RAID_MAP_FLAG_ENCRYPT_ON  0x01\n\t__le16   dekindex;\t\t \n\tu8    reserved[16];\n\tstruct raid_map_disk_data data[RAID_MAP_MAX_ENTRIES];\n} __packed;\n\nstruct ReportLUNdata {\n\tu8 LUNListLength[4];\n\tu8 extended_response_flag;\n\tu8 reserved[3];\n\tu8 LUN[HPSA_MAX_LUN][8];\n} __packed;\n\nstruct ext_report_lun_entry {\n\tu8 lunid[8];\n#define MASKED_DEVICE(x) ((x)[3] & 0xC0)\n#define GET_BMIC_BUS(lunid) ((lunid)[7] & 0x3F)\n#define GET_BMIC_LEVEL_TWO_TARGET(lunid) ((lunid)[6])\n#define GET_BMIC_DRIVE_NUMBER(lunid) (((GET_BMIC_BUS((lunid)) - 1) << 8) + \\\n\t\t\tGET_BMIC_LEVEL_TWO_TARGET((lunid)))\n\tu8 wwid[8];\n\tu8 device_type;\n\tu8 device_flags;\n\tu8 lun_count;  \n\tu8 redundant_paths;\n\tu32 ioaccel_handle;  \n} __packed;\n\nstruct ReportExtendedLUNdata {\n\tu8 LUNListLength[4];\n\tu8 extended_response_flag;\n\tu8 reserved[3];\n\tstruct ext_report_lun_entry LUN[HPSA_MAX_PHYS_LUN];\n} __packed;\n\nstruct SenseSubsystem_info {\n\tu8 reserved[36];\n\tu8 portname[8];\n\tu8 reserved1[1108];\n} __packed;\n\n \n#define BMIC_READ 0x26\n#define BMIC_WRITE 0x27\n#define BMIC_CACHE_FLUSH 0xc2\n#define HPSA_CACHE_FLUSH 0x01\t \n#define BMIC_FLASH_FIRMWARE 0xF7\n#define BMIC_SENSE_CONTROLLER_PARAMETERS 0x64\n#define BMIC_IDENTIFY_PHYSICAL_DEVICE 0x15\n#define BMIC_IDENTIFY_CONTROLLER 0x11\n#define BMIC_SET_DIAG_OPTIONS 0xF4\n#define BMIC_SENSE_DIAG_OPTIONS 0xF5\n#define HPSA_DIAG_OPTS_DISABLE_RLD_CACHING 0x80000000\n#define BMIC_SENSE_SUBSYSTEM_INFORMATION 0x66\n#define BMIC_SENSE_STORAGE_BOX_PARAMS 0x65\n\n \nunion SCSI3Addr {\n\tstruct {\n\t\tu8 Dev;\n\t\tu8 Bus:6;\n\t\tu8 Mode:2;         \n\t} PeripDev;\n\tstruct {\n\t\tu8 DevLSB;\n\t\tu8 DevMSB:6;\n\t\tu8 Mode:2;         \n\t} LogDev;\n\tstruct {\n\t\tu8 Dev:5;\n\t\tu8 Bus:3;\n\t\tu8 Targ:6;\n\t\tu8 Mode:2;         \n\t} LogUnit;\n} __packed;\n\nstruct PhysDevAddr {\n\tu32             TargetId:24;\n\tu32             Bus:6;\n\tu32             Mode:2;\n\t \n\tunion SCSI3Addr  Target[2];\n} __packed;\n\nstruct LogDevAddr {\n\tu32            VolId:30;\n\tu32            Mode:2;\n\tu8             reserved[4];\n} __packed;\n\nunion LUNAddr {\n\tu8               LunAddrBytes[8];\n\tunion SCSI3Addr    SCSI3Lun[4];\n\tstruct PhysDevAddr PhysDev;\n\tstruct LogDevAddr  LogDev;\n} __packed;\n\nstruct CommandListHeader {\n\tu8              ReplyQueue;\n\tu8              SGList;\n\t__le16          SGTotal;\n\t__le64\t\ttag;\n\tunion LUNAddr     LUN;\n} __packed;\n\nstruct RequestBlock {\n\tu8   CDBLen;\n\t \n\tu8\ttype_attr_dir;\n#define TYPE_ATTR_DIR(t, a, d) ((((d) & 0x03) << 6) |\\\n\t\t\t\t(((a) & 0x07) << 3) |\\\n\t\t\t\t((t) & 0x07))\n#define GET_TYPE(tad) ((tad) & 0x07)\n#define GET_ATTR(tad) (((tad) >> 3) & 0x07)\n#define GET_DIR(tad) (((tad) >> 6) & 0x03)\n\tu16  Timeout;\n\tu8   CDB[16];\n} __packed;\n\nstruct ErrDescriptor {\n\t__le64 Addr;\n\t__le32 Len;\n} __packed;\n\nstruct SGDescriptor {\n\t__le64 Addr;\n\t__le32 Len;\n\t__le32 Ext;\n} __packed;\n\nunion MoreErrInfo {\n\tstruct {\n\t\tu8  Reserved[3];\n\t\tu8  Type;\n\t\tu32 ErrorInfo;\n\t} Common_Info;\n\tstruct {\n\t\tu8  Reserved[2];\n\t\tu8  offense_size;  \n\t\tu8  offense_num;   \n\t\tu32 offense_value;\n\t} Invalid_Cmd;\n} __packed;\n\nstruct ErrorInfo {\n\tu8               ScsiStatus;\n\tu8               SenseLen;\n\tu16              CommandStatus;\n\tu32              ResidualCnt;\n\tunion MoreErrInfo  MoreErrInfo;\n\tu8               SenseInfo[SENSEINFOBYTES];\n} __packed;\n \n#define CMD_IOCTL_PEND  0x01\n#define CMD_SCSI\t0x03\n#define CMD_IOACCEL1\t0x04\n#define CMD_IOACCEL2\t0x05\n#define IOACCEL2_TMF\t0x06\n\n#define DIRECT_LOOKUP_SHIFT 4\n#define DIRECT_LOOKUP_MASK (~((1 << DIRECT_LOOKUP_SHIFT) - 1))\n\n#define HPSA_ERROR_BIT          0x02\nstruct ctlr_info;  \n \n\n#define COMMANDLIST_ALIGNMENT 128\nstruct CommandList {\n\tstruct CommandListHeader Header;\n\tstruct RequestBlock      Request;\n\tstruct ErrDescriptor     ErrDesc;\n\tstruct SGDescriptor      SG[SG_ENTRIES_IN_CMD];\n\t \n\tu32\t\t\t   busaddr;  \n\tstruct ErrorInfo *err_info;  \n\tstruct ctlr_info\t   *h;\n\tint\t\t\t   cmd_type;\n\tlong\t\t\t   cmdindex;\n\tstruct completion *waiting;\n\tstruct scsi_cmnd *scsi_cmd;\n\tstruct work_struct work;\n\n\t \n\tstruct hpsa_scsi_dev_t *phys_disk;\n\n\tbool retry_pending;\n\tstruct hpsa_scsi_dev_t *device;\n\tatomic_t refcount;  \n} __aligned(COMMANDLIST_ALIGNMENT);\n\n \nstatic_assert(offsetof(struct CommandList, refcount) % __alignof__(atomic_t) == 0);\n\n \n#define IOACCEL1_MAXSGENTRIES           24\n#define IOACCEL2_MAXSGENTRIES\t\t28\n\n \n#define IOACCEL1_COMMANDLIST_ALIGNMENT 128\nstruct io_accel1_cmd {\n\t__le16 dev_handle;\t\t \n\tu8  reserved1;\t\t\t \n\tu8  function;\t\t\t \n\tu8  reserved2[8];\t\t \n\tu32 err_info;\t\t\t \n\tu8  reserved3[2];\t\t \n\tu8  err_info_len;\t\t \n\tu8  reserved4;\t\t\t \n\tu8  sgl_offset;\t\t\t \n\tu8  reserved5[7];\t\t \n\t__le32 transfer_len;\t\t \n\tu8  reserved6[4];\t\t \n\t__le16 io_flags;\t\t \n\tu8  reserved7[14];\t\t \n\tu8  LUN[8];\t\t\t \n\t__le32 control;\t\t\t \n\tu8  CDB[16];\t\t\t \n\tu8  reserved8[16];\t\t \n\t__le16 host_context_flags;\t \n\t__le16 timeout_sec;\t\t \n\tu8  ReplyQueue;\t\t\t \n\tu8  reserved9[3];\t\t \n\t__le64 tag;\t\t\t \n\t__le64 host_addr;\t\t \n\tu8  CISS_LUN[8];\t\t \n\tstruct SGDescriptor SG[IOACCEL1_MAXSGENTRIES];\n} __packed __aligned(IOACCEL1_COMMANDLIST_ALIGNMENT);\n\n#define IOACCEL1_FUNCTION_SCSIIO        0x00\n#define IOACCEL1_SGLOFFSET              32\n\n#define IOACCEL1_IOFLAGS_IO_REQ         0x4000\n#define IOACCEL1_IOFLAGS_CDBLEN_MASK    0x001F\n#define IOACCEL1_IOFLAGS_CDBLEN_MAX     16\n\n#define IOACCEL1_CONTROL_NODATAXFER     0x00000000\n#define IOACCEL1_CONTROL_DATA_OUT       0x01000000\n#define IOACCEL1_CONTROL_DATA_IN        0x02000000\n#define IOACCEL1_CONTROL_TASKPRIO_MASK  0x00007800\n#define IOACCEL1_CONTROL_TASKPRIO_SHIFT 11\n#define IOACCEL1_CONTROL_SIMPLEQUEUE    0x00000000\n#define IOACCEL1_CONTROL_HEADOFQUEUE    0x00000100\n#define IOACCEL1_CONTROL_ORDEREDQUEUE   0x00000200\n#define IOACCEL1_CONTROL_ACA            0x00000400\n\n#define IOACCEL1_HCFLAGS_CISS_FORMAT    0x0013\n\n#define IOACCEL1_BUSADDR_CMDTYPE        0x00000060\n\nstruct ioaccel2_sg_element {\n\t__le64 address;\n\t__le32 length;\n\tu8 reserved[3];\n\tu8 chain_indicator;\n#define IOACCEL2_CHAIN 0x80\n#define IOACCEL2_LAST_SG 0x40\n} __packed;\n\n \nstruct io_accel2_scsi_response {\n\tu8 IU_type;\n#define IOACCEL2_IU_TYPE_SRF\t\t\t0x60\n\tu8 reserved1[3];\n\tu8 req_id[4];\t\t \n\tu8 reserved2[4];\n\tu8 serv_response;\t\t \n#define IOACCEL2_SERV_RESPONSE_COMPLETE\t\t0x000\n#define IOACCEL2_SERV_RESPONSE_FAILURE\t\t0x001\n#define IOACCEL2_SERV_RESPONSE_TMF_COMPLETE\t0x002\n#define IOACCEL2_SERV_RESPONSE_TMF_SUCCESS\t0x003\n#define IOACCEL2_SERV_RESPONSE_TMF_REJECTED\t0x004\n#define IOACCEL2_SERV_RESPONSE_TMF_WRONG_LUN\t0x005\n\tu8 status;\t\t\t \n#define IOACCEL2_STATUS_SR_TASK_COMP_GOOD\t0x00\n#define IOACCEL2_STATUS_SR_TASK_COMP_CHK_COND\t0x02\n#define IOACCEL2_STATUS_SR_TASK_COMP_BUSY\t0x08\n#define IOACCEL2_STATUS_SR_TASK_COMP_RES_CON\t0x18\n#define IOACCEL2_STATUS_SR_TASK_COMP_SET_FULL\t0x28\n#define IOACCEL2_STATUS_SR_TASK_COMP_ABORTED\t0x40\n#define IOACCEL2_STATUS_SR_IOACCEL_DISABLED\t0x0E\n#define IOACCEL2_STATUS_SR_IO_ERROR\t\t0x01\n#define IOACCEL2_STATUS_SR_IO_ABORTED\t\t0x02\n#define IOACCEL2_STATUS_SR_NO_PATH_TO_DEVICE\t0x03\n#define IOACCEL2_STATUS_SR_INVALID_DEVICE\t0x04\n#define IOACCEL2_STATUS_SR_UNDERRUN\t\t0x51\n#define IOACCEL2_STATUS_SR_OVERRUN\t\t0x75\n\tu8 data_present;\t\t \n#define IOACCEL2_NO_DATAPRESENT\t\t0x000\n#define IOACCEL2_RESPONSE_DATAPRESENT\t0x001\n#define IOACCEL2_SENSE_DATA_PRESENT\t0x002\n#define IOACCEL2_RESERVED\t\t0x003\n\tu8 sense_data_len;\t\t \n\tu8 resid_cnt[4];\t\t \n\tu8 sense_data_buff[32];\t\t \n} __packed;\n\n \n#define IOACCEL2_COMMANDLIST_ALIGNMENT 128\nstruct io_accel2_cmd {\n\tu8  IU_type;\t\t\t \n\tu8  direction;\t\t\t \n#define IOACCEL2_DIRECTION_MASK\t\t0x03  \n#define IOACCEL2_DIRECTION_MEMTYPE_MASK\t0x04  \n\t\t\t\t\t      \n#define IOACCEL2_DIRECTION_ENCRYPT_MASK\t0x08  \n\t\t\t\t\t      \n\tu8  reply_queue;\t\t \n\tu8  reserved1;\t\t\t \n\t__le32 scsi_nexus;\t\t \n\t__le32 Tag;\t\t\t \n\t__le32 tweak_lower;\t\t \n\tu8  cdb[16];\t\t\t \n\tu8  cciss_lun[8];\t\t \n\t__le32 data_len;\t\t \n\tu8  cmd_priority_task_attr;\t \n#define IOACCEL2_PRIORITY_MASK 0x78\n#define IOACCEL2_ATTR_MASK 0x07\n\tu8  sg_count;\t\t\t \n\t__le16 dekindex;\t\t \n\t__le64 err_ptr;\t\t\t \n\t__le32 err_len;\t\t\t \n\t__le32 tweak_upper;\t\t \n\tstruct ioaccel2_sg_element sg[IOACCEL2_MAXSGENTRIES];\n\tstruct io_accel2_scsi_response error_data;\n} __packed __aligned(IOACCEL2_COMMANDLIST_ALIGNMENT);\n\n \n#define IOACCEL2_IU_TYPE\t0x40\n#define IOACCEL2_IU_TMF_TYPE\t0x41\n#define IOACCEL2_DIR_NO_DATA\t0x00\n#define IOACCEL2_DIR_DATA_IN\t0x01\n#define IOACCEL2_DIR_DATA_OUT\t0x02\n#define IOACCEL2_TMF_ABORT\t0x01\n \nstruct hpsa_tmf_struct {\n\tu8 iu_type;\t\t \n\tu8 reply_queue;\t\t \n\tu8 tmf;\t\t\t \n\tu8 reserved1;\t\t \n\t__le32 it_nexus;\t \n\tu8 lun_id[8];\t\t \n\t__le64 tag;\t\t \n\t__le64 abort_tag;\t \n\t__le64 error_ptr;\t\t \n\t__le32 error_len;\t\t \n} __packed __aligned(IOACCEL2_COMMANDLIST_ALIGNMENT);\n\n \nstruct HostWrite {\n\t__le32\t\tTransportRequest;\n\t__le32\t\tcommand_pool_addr_hi;\n\t__le32\t\tCoalIntDelay;\n\t__le32\t\tCoalIntCount;\n} __packed;\n\n#define SIMPLE_MODE     0x02\n#define PERFORMANT_MODE 0x04\n#define MEMQ_MODE       0x08\n#define IOACCEL_MODE_1  0x80\n\n#define DRIVER_SUPPORT_UA_ENABLE        0x00000001\n\nstruct CfgTable {\n\tu8\t\tSignature[4];\n\t__le32\t\tSpecValence;\n\t__le32\t\tTransportSupport;\n\t__le32\t\tTransportActive;\n\tstruct HostWrite HostWrite;\n\t__le32\t\tCmdsOutMax;\n\t__le32\t\tBusTypes;\n\t__le32\t\tTransMethodOffset;\n\tu8\t\tServerName[16];\n\t__le32\t\tHeartBeat;\n\t__le32\t\tdriver_support;\n#define\t\t\tENABLE_SCSI_PREFETCH\t\t0x100\n#define\t\t\tENABLE_UNIT_ATTN\t\t0x01\n\t__le32\t\tMaxScatterGatherElements;\n\t__le32\t\tMaxLogicalUnits;\n\t__le32\t\tMaxPhysicalDevices;\n\t__le32\t\tMaxPhysicalDrivesPerLogicalUnit;\n\t__le32\t\tMaxPerformantModeCommands;\n\t__le32\t\tMaxBlockFetch;\n\t__le32\t\tPowerConservationSupport;\n\t__le32\t\tPowerConservationEnable;\n\t__le32\t\tTMFSupportFlags;\n\tu8\t\tTMFTagMask[8];\n\tu8\t\treserved[0x78 - 0x70];\n\t__le32\t\tmisc_fw_support;\t\t \n#define\t\t\tMISC_FW_DOORBELL_RESET\t\t0x02\n#define\t\t\tMISC_FW_DOORBELL_RESET2\t\t0x010\n#define\t\t\tMISC_FW_RAID_OFFLOAD_BASIC\t0x020\n#define\t\t\tMISC_FW_EVENT_NOTIFY\t\t0x080\n\tu8\t\tdriver_version[32];\n\t__le32\t\tmax_cached_write_size;\n\tu8\t\tdriver_scratchpad[16];\n\t__le32\t\tmax_error_info_length;\n\t__le32\t\tio_accel_max_embedded_sg_count;\n\t__le32\t\tio_accel_request_size_offset;\n\t__le32\t\tevent_notify;\n#define\t\tHPSA_EVENT_NOTIFY_ACCEL_IO_PATH_STATE_CHANGE (1 << 30)\n#define\t\tHPSA_EVENT_NOTIFY_ACCEL_IO_PATH_CONFIG_CHANGE (1 << 31)\n\t__le32\t\tclear_event_notify;\n} __packed;\n\n#define NUM_BLOCKFETCH_ENTRIES 8\nstruct TransTable_struct {\n\t__le32\t\tBlockFetch[NUM_BLOCKFETCH_ENTRIES];\n\t__le32\t\tRepQSize;\n\t__le32\t\tRepQCount;\n\t__le32\t\tRepQCtrAddrLow32;\n\t__le32\t\tRepQCtrAddrHigh32;\n#define MAX_REPLY_QUEUES 64\n\tstruct vals32  RepQAddr[MAX_REPLY_QUEUES];\n} __packed;\n\nstruct hpsa_pci_info {\n\tunsigned char\tbus;\n\tunsigned char\tdev_fn;\n\tunsigned short\tdomain;\n\tu32\t\tboard_id;\n} __packed;\n\nstruct bmic_identify_controller {\n\tu8\tconfigured_logical_drive_count;\t \n\tu8\tpad1[153];\n\t__le16\textended_logical_unit_count;\t \n\tu8\tpad2[136];\n\tu8\tcontroller_mode;\t \n\tu8\tpad3[32];\n} __packed;\n\n\nstruct bmic_identify_physical_device {\n\tu8    scsi_bus;           \n\tu8    scsi_id;            \n\t__le16 block_size;\t      \n\t__le32 total_blocks;\t      \n\t__le32 reserved_blocks;    \n\tu8    model[40];          \n\tu8    serial_number[40];  \n\tu8    firmware_revision[8];  \n\tu8    scsi_inquiry_bits;  \n\tu8    compaq_drive_stamp;  \n\tu8    last_failure_reason;\n#define BMIC_LAST_FAILURE_TOO_SMALL_IN_LOAD_CONFIG\t\t0x01\n#define BMIC_LAST_FAILURE_ERROR_ERASING_RIS\t\t\t0x02\n#define BMIC_LAST_FAILURE_ERROR_SAVING_RIS\t\t\t0x03\n#define BMIC_LAST_FAILURE_FAIL_DRIVE_COMMAND\t\t\t0x04\n#define BMIC_LAST_FAILURE_MARK_BAD_FAILED\t\t\t0x05\n#define BMIC_LAST_FAILURE_MARK_BAD_FAILED_IN_FINISH_REMAP\t0x06\n#define BMIC_LAST_FAILURE_TIMEOUT\t\t\t\t0x07\n#define BMIC_LAST_FAILURE_AUTOSENSE_FAILED\t\t\t0x08\n#define BMIC_LAST_FAILURE_MEDIUM_ERROR_1\t\t\t0x09\n#define BMIC_LAST_FAILURE_MEDIUM_ERROR_2\t\t\t0x0a\n#define BMIC_LAST_FAILURE_NOT_READY_BAD_SENSE\t\t\t0x0b\n#define BMIC_LAST_FAILURE_NOT_READY\t\t\t\t0x0c\n#define BMIC_LAST_FAILURE_HARDWARE_ERROR\t\t\t0x0d\n#define BMIC_LAST_FAILURE_ABORTED_COMMAND\t\t\t0x0e\n#define BMIC_LAST_FAILURE_WRITE_PROTECTED\t\t\t0x0f\n#define BMIC_LAST_FAILURE_SPIN_UP_FAILURE_IN_RECOVER\t\t0x10\n#define BMIC_LAST_FAILURE_REBUILD_WRITE_ERROR\t\t\t0x11\n#define BMIC_LAST_FAILURE_TOO_SMALL_IN_HOT_PLUG\t\t\t0x12\n#define BMIC_LAST_FAILURE_BUS_RESET_RECOVERY_ABORTED\t\t0x13\n#define BMIC_LAST_FAILURE_REMOVED_IN_HOT_PLUG\t\t\t0x14\n#define BMIC_LAST_FAILURE_INIT_REQUEST_SENSE_FAILED\t\t0x15\n#define BMIC_LAST_FAILURE_INIT_START_UNIT_FAILED\t\t0x16\n#define BMIC_LAST_FAILURE_INQUIRY_FAILED\t\t\t0x17\n#define BMIC_LAST_FAILURE_NON_DISK_DEVICE\t\t\t0x18\n#define BMIC_LAST_FAILURE_READ_CAPACITY_FAILED\t\t\t0x19\n#define BMIC_LAST_FAILURE_INVALID_BLOCK_SIZE\t\t\t0x1a\n#define BMIC_LAST_FAILURE_HOT_PLUG_REQUEST_SENSE_FAILED\t\t0x1b\n#define BMIC_LAST_FAILURE_HOT_PLUG_START_UNIT_FAILED\t\t0x1c\n#define BMIC_LAST_FAILURE_WRITE_ERROR_AFTER_REMAP\t\t0x1d\n#define BMIC_LAST_FAILURE_INIT_RESET_RECOVERY_ABORTED\t\t0x1e\n#define BMIC_LAST_FAILURE_DEFERRED_WRITE_ERROR\t\t\t0x1f\n#define BMIC_LAST_FAILURE_MISSING_IN_SAVE_RIS\t\t\t0x20\n#define BMIC_LAST_FAILURE_WRONG_REPLACE\t\t\t\t0x21\n#define BMIC_LAST_FAILURE_GDP_VPD_INQUIRY_FAILED\t\t0x22\n#define BMIC_LAST_FAILURE_GDP_MODE_SENSE_FAILED\t\t\t0x23\n#define BMIC_LAST_FAILURE_DRIVE_NOT_IN_48BIT_MODE\t\t0x24\n#define BMIC_LAST_FAILURE_DRIVE_TYPE_MIX_IN_HOT_PLUG\t\t0x25\n#define BMIC_LAST_FAILURE_DRIVE_TYPE_MIX_IN_LOAD_CFG\t\t0x26\n#define BMIC_LAST_FAILURE_PROTOCOL_ADAPTER_FAILED\t\t0x27\n#define BMIC_LAST_FAILURE_FAULTY_ID_BAY_EMPTY\t\t\t0x28\n#define BMIC_LAST_FAILURE_FAULTY_ID_BAY_OCCUPIED\t\t0x29\n#define BMIC_LAST_FAILURE_FAULTY_ID_INVALID_BAY\t\t\t0x2a\n#define BMIC_LAST_FAILURE_WRITE_RETRIES_FAILED\t\t\t0x2b\n\n#define BMIC_LAST_FAILURE_SMART_ERROR_REPORTED\t\t\t0x37\n#define BMIC_LAST_FAILURE_PHY_RESET_FAILED\t\t\t0x38\n#define BMIC_LAST_FAILURE_ONLY_ONE_CTLR_CAN_SEE_DRIVE\t\t0x40\n#define BMIC_LAST_FAILURE_KC_VOLUME_FAILED\t\t\t0x41\n#define BMIC_LAST_FAILURE_UNEXPECTED_REPLACEMENT\t\t0x42\n#define BMIC_LAST_FAILURE_OFFLINE_ERASE\t\t\t\t0x80\n#define BMIC_LAST_FAILURE_OFFLINE_TOO_SMALL\t\t\t0x81\n#define BMIC_LAST_FAILURE_OFFLINE_DRIVE_TYPE_MIX\t\t0x82\n#define BMIC_LAST_FAILURE_OFFLINE_ERASE_COMPLETE\t\t0x83\n\n\tu8     flags;\n\tu8     more_flags;\n\tu8     scsi_lun;           \n\tu8     yet_more_flags;\n\tu8     even_more_flags;\n\t__le32 spi_speed_rules; \n\tu8     phys_connector[2];          \n\tu8     phys_box_on_bus;   \n\tu8     phys_bay_in_box;   \n\t__le32 rpm;               \n\tu8     device_type;        \n#define BMIC_DEVICE_TYPE_CONTROLLER\t0x07\n\n\tu8     sata_version;      \n\t__le64 big_total_block_count;\n\t__le64 ris_starting_lba;\n\t__le32 ris_size;\n\tu8     wwid[20];\n\tu8     controller_phy_map[32];\n\t__le16 phy_count;\n\tu8     phy_connected_dev_type[256];\n\tu8     phy_to_drive_bay_num[256];\n\t__le16 phy_to_attached_dev_index[256];\n\tu8     box_index;\n\tu8     reserved;\n\t__le16 extra_physical_drive_flags;\n#define BMIC_PHYS_DRIVE_SUPPORTS_GAS_GAUGE(idphydrv) \\\n\t(idphydrv->extra_physical_drive_flags & (1 << 10))\n\tu8     negotiated_link_rate[256];\n\tu8     phy_to_phy_map[256];\n\tu8     redundant_path_present_map;\n\tu8     redundant_path_failure_map;\n\tu8     active_path_number;\n\t__le16 alternate_paths_phys_connector[8];\n\tu8     alternate_paths_phys_box_on_port[8];\n\tu8     multi_lun_device_lun_count;\n\tu8     minimum_good_fw_revision[8];\n\tu8     unique_inquiry_bytes[20];\n\tu8     current_temperature_degreesC;\n\tu8     temperature_threshold_degreesC;\n\tu8     max_temperature_degreesC;\n\tu8     logical_blocks_per_phys_block_exp;  \n\t__le16 current_queue_depth_limit;\n\tu8     reserved_switch_stuff[60];\n\t__le16 power_on_hours;  \n\t__le16 percent_endurance_used;  \n#define BMIC_PHYS_DRIVE_SSD_WEAROUT(idphydrv) \\\n\t((idphydrv->percent_endurance_used & 0x80) || \\\n\t (idphydrv->percent_endurance_used > 10000))\n\tu8     drive_authentication;\n#define BMIC_PHYS_DRIVE_AUTHENTICATED(idphydrv) \\\n\t(idphydrv->drive_authentication == 0x80)\n\tu8     smart_carrier_authentication;\n#define BMIC_SMART_CARRIER_AUTHENTICATION_SUPPORTED(idphydrv) \\\n\t(idphydrv->smart_carrier_authentication != 0x0)\n#define BMIC_SMART_CARRIER_AUTHENTICATED(idphydrv) \\\n\t(idphydrv->smart_carrier_authentication == 0x01)\n\tu8     smart_carrier_app_fw_version;\n\tu8     smart_carrier_bootloader_fw_version;\n\tu8     sanitize_support_flags;\n\tu8     drive_key_flags;\n\tu8     encryption_key_name[64];\n\t__le32 misc_drive_flags;\n\t__le16 dek_index;\n\t__le16 hba_drive_encryption_flags;\n\t__le16 max_overwrite_time;\n\t__le16 max_block_erase_time;\n\t__le16 max_crypto_erase_time;\n\tu8     device_connector_info[5];\n\tu8     connector_name[8][8];\n\tu8     page_83_id[16];\n\tu8     max_link_rate[256];\n\tu8     neg_phys_link_rate[256];\n\tu8     box_conn_name[8];\n} __packed __attribute((aligned(512)));\n\nstruct bmic_sense_subsystem_info {\n\tu8\tprimary_slot_number;\n\tu8\treserved[3];\n\tu8\tchasis_serial_number[32];\n\tu8\tprimary_world_wide_id[8];\n\tu8\tprimary_array_serial_number[32];  \n\tu8\tprimary_cache_serial_number[32];  \n\tu8\treserved_2[8];\n\tu8\tsecondary_array_serial_number[32];\n\tu8\tsecondary_cache_serial_number[32];\n\tu8\tpad[332];\n} __packed;\n\nstruct bmic_sense_storage_box_params {\n\tu8\treserved[36];\n\tu8\tinquiry_valid;\n\tu8\treserved_1[68];\n\tu8\tphys_box_on_port;\n\tu8\treserved_2[22];\n\tu16\tconnection_info;\n\tu8\treserver_3[84];\n\tu8\tphys_connector[2];\n\tu8\treserved_4[296];\n} __packed;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}