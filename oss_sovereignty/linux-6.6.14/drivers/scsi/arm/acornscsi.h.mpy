{
  "module_name": "acornscsi.h",
  "hash_id": "806dff364eb9f611f0fedcf1f14fd0d8c233032b094f3a0c7461eef907ff556d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/arm/acornscsi.h",
  "human_readable_source": " \n \n#ifndef ACORNSCSI_H\n#define ACORNSCSI_H\n\n \n#define SBIC_OWNID\t\t0\n#define OWNID_FS1\t\t(1<<7)\n#define OWNID_FS2\t\t(1<<6)\n#define OWNID_EHP\t\t(1<<4)\n#define OWNID_EAF\t\t(1<<3)\n\n#define SBIC_CTRL\t\t1\n#define CTRL_DMAMODE\t\t(1<<7)\n#define CTRL_DMADBAMODE\t\t(1<<6)\n#define CTRL_DMABURST\t\t(1<<5)\n#define CTRL_DMAPOLLED\t\t0\n#define CTRL_HHP\t\t(1<<4)\n#define CTRL_EDI\t\t(1<<3)\n#define CTRL_IDI\t\t(1<<2)\n#define CTRL_HA\t\t\t(1<<1)\n#define CTRL_HSP\t\t(1<<0)\n\n#define SBIC_TIMEOUT\t\t2\n#define SBIC_TOTSECTS\t\t3\n#define SBIC_TOTHEADS\t\t4\n#define SBIC_TOTCYLH\t\t5\n#define SBIC_TOTCYLL\t\t6\n#define SBIC_LOGADDRH\t\t7\n#define SBIC_LOGADDRM2\t\t8\n#define SBIC_LOGADDRM1\t\t9\n#define SBIC_LOGADDRL\t\t10\n#define SBIC_SECTORNUM\t\t11\n#define SBIC_HEADNUM\t\t12\n#define SBIC_CYLH\t\t13\n#define SBIC_CYLL\t\t14\n#define SBIC_TARGETLUN\t\t15\n#define TARGETLUN_TLV\t\t(1<<7)\n#define TARGETLUN_DOK\t\t(1<<6)\n\n#define SBIC_CMNDPHASE\t\t16\n#define SBIC_SYNCHTRANSFER\t17\n#define SYNCHTRANSFER_OF0\t0x00\n#define SYNCHTRANSFER_OF1\t0x01\n#define SYNCHTRANSFER_OF2\t0x02\n#define SYNCHTRANSFER_OF3\t0x03\n#define SYNCHTRANSFER_OF4\t0x04\n#define SYNCHTRANSFER_OF5\t0x05\n#define SYNCHTRANSFER_OF6\t0x06\n#define SYNCHTRANSFER_OF7\t0x07\n#define SYNCHTRANSFER_OF8\t0x08\n#define SYNCHTRANSFER_OF9\t0x09\n#define SYNCHTRANSFER_OF10\t0x0A\n#define SYNCHTRANSFER_OF11\t0x0B\n#define SYNCHTRANSFER_OF12\t0x0C\n#define SYNCHTRANSFER_8DBA\t0x00\n#define SYNCHTRANSFER_2DBA\t0x20\n#define SYNCHTRANSFER_3DBA\t0x30\n#define SYNCHTRANSFER_4DBA\t0x40\n#define SYNCHTRANSFER_5DBA\t0x50\n#define SYNCHTRANSFER_6DBA\t0x60\n#define SYNCHTRANSFER_7DBA\t0x70\n\n#define SBIC_TRANSCNTH\t\t18\n#define SBIC_TRANSCNTM\t\t19\n#define SBIC_TRANSCNTL\t\t20\n#define SBIC_DESTID\t\t21\n#define DESTID_SCC\t\t(1<<7)\n#define DESTID_DPD\t\t(1<<6)\n\n#define SBIC_SOURCEID\t\t22\n#define SOURCEID_ER\t\t(1<<7)\n#define SOURCEID_ES\t\t(1<<6)\n#define SOURCEID_DSP\t\t(1<<5)\n#define SOURCEID_SIV\t\t(1<<4)\n\n#define SBIC_SSR\t\t23\n#define SBIC_CMND\t\t24\n#define CMND_RESET\t\t0x00\n#define CMND_ABORT\t\t0x01\n#define CMND_ASSERTATN\t\t0x02\n#define CMND_NEGATEACK\t\t0x03\n#define CMND_DISCONNECT\t\t0x04\n#define CMND_RESELECT\t\t0x05\n#define CMND_SELWITHATN\t\t0x06\n#define CMND_SELECT\t\t0x07\n#define CMND_SELECTATNTRANSFER\t0x08\n#define CMND_SELECTTRANSFER\t0x09\n#define CMND_RESELECTRXDATA\t0x0A\n#define CMND_RESELECTTXDATA\t0x0B\n#define CMND_WAITFORSELRECV\t0x0C\n#define CMND_SENDSTATCMD\t0x0D\n#define CMND_SENDDISCONNECT\t0x0E\n#define CMND_SETIDI\t\t0x0F\n#define CMND_RECEIVECMD\t\t0x10\n#define CMND_RECEIVEDTA\t\t0x11\n#define CMND_RECEIVEMSG\t\t0x12\n#define CMND_RECEIVEUSP\t\t0x13\n#define CMND_SENDCMD\t\t0x14\n#define CMND_SENDDATA\t\t0x15\n#define CMND_SENDMSG\t\t0x16\n#define CMND_SENDUSP\t\t0x17\n#define CMND_TRANSLATEADDR\t0x18\n#define CMND_XFERINFO\t\t0x20\n#define CMND_SBT\t\t(1<<7)\n\n#define SBIC_DATA\t\t25\n#define SBIC_ASR\t\t26\n#define ASR_INT\t\t\t(1<<7)\n#define ASR_LCI\t\t\t(1<<6)\n#define ASR_BSY\t\t\t(1<<5)\n#define ASR_CIP\t\t\t(1<<4)\n#define ASR_PE\t\t\t(1<<1)\n#define ASR_DBR\t\t\t(1<<0)\n\n \n#define DMAC_INIT\t\t0x00\n#define INIT_8BIT\t\t(1)\n\n#define DMAC_CHANNEL\t\t0x80\n#define CHANNEL_0\t\t0x00\n#define CHANNEL_1\t\t0x01\n#define CHANNEL_2\t\t0x02\n#define CHANNEL_3\t\t0x03\n\n#define DMAC_TXCNTLO\t\t0x01\n#define DMAC_TXCNTHI\t\t0x81\n#define DMAC_TXADRLO\t\t0x02\n#define DMAC_TXADRMD\t\t0x82\n#define DMAC_TXADRHI\t\t0x03\n\n#define DMAC_DEVCON0\t\t0x04\n#define DEVCON0_AKL\t\t(1<<7)\n#define DEVCON0_RQL\t\t(1<<6)\n#define DEVCON0_EXW\t\t(1<<5)\n#define DEVCON0_ROT\t\t(1<<4)\n#define DEVCON0_CMP\t\t(1<<3)\n#define DEVCON0_DDMA\t\t(1<<2)\n#define DEVCON0_AHLD\t\t(1<<1)\n#define DEVCON0_MTM\t\t(1<<0)\n\n#define DMAC_DEVCON1\t\t0x84\n#define DEVCON1_WEV\t\t(1<<1)\n#define DEVCON1_BHLD\t\t(1<<0)\n\n#define DMAC_MODECON\t\t0x05\n#define MODECON_WOED\t\t0x01\n#define MODECON_VERIFY\t\t0x00\n#define MODECON_READ\t\t0x04\n#define MODECON_WRITE\t\t0x08\n#define MODECON_AUTOINIT\t0x10\n#define MODECON_ADDRDIR\t\t0x20\n#define MODECON_DEMAND\t\t0x00\n#define MODECON_SINGLE\t\t0x40\n#define MODECON_BLOCK\t\t0x80\n#define MODECON_CASCADE\t\t0xC0\n\n#define DMAC_STATUS\t\t0x85\n#define STATUS_TC0\t\t(1<<0)\n#define STATUS_RQ0\t\t(1<<4)\n\n#define DMAC_TEMPLO\t\t0x06\n#define DMAC_TEMPHI\t\t0x86\n#define DMAC_REQREG\t\t0x07\n#define DMAC_MASKREG\t\t0x87\n#define MASKREG_M0\t\t0x01\n#define MASKREG_M1\t\t0x02\n#define MASKREG_M2\t\t0x04\n#define MASKREG_M3\t\t0x08\n\n \n\n#define MASK_ON\t\t(MASKREG_M3|MASKREG_M2|MASKREG_M1|MASKREG_M0)\n#define MASK_OFF\t(MASKREG_M3|MASKREG_M2|MASKREG_M1)\n\n \ntypedef enum {\n    PHASE_IDLE,\t\t\t\t\t \n    PHASE_CONNECTING,\t\t\t\t \n    PHASE_CONNECTED,\t\t\t\t \n    PHASE_MSGOUT,\t\t\t\t \n    PHASE_RECONNECTED,\t\t\t\t \n    PHASE_COMMANDPAUSED,\t\t\t \n    PHASE_COMMAND,\t\t\t\t \n    PHASE_DATAOUT,\t\t\t\t \n    PHASE_DATAIN,\t\t\t\t \n    PHASE_STATUSIN,\t\t\t\t \n    PHASE_MSGIN,\t\t\t\t \n    PHASE_DONE,\t\t\t\t\t \n    PHASE_ABORTED,\t\t\t\t \n    PHASE_DISCONNECT,\t\t\t\t \n} phase_t;\n\n \ntypedef enum {\n    INTR_IDLE,\t\t\t\t\t \n    INTR_NEXT_COMMAND,\t\t\t\t \n    INTR_PROCESSING,\t\t\t\t \n} intr_ret_t;\n\n \ntypedef enum {\n    DMA_OUT,\t\t\t\t\t \n    DMA_IN\t\t\t\t\t \n} dmadir_t;\n\n \ntypedef enum {\t\t\t\t\t \n    SYNC_ASYNCHRONOUS,\t\t\t\t \n    SYNC_NEGOCIATE,\t\t\t\t \n    SYNC_SENT_REQUEST,\t\t\t\t \n    SYNC_COMPLETED,\t\t\t\t \n} syncxfer_t;\n\n \ntypedef enum {\t\t\t\t\t \n    CMD_READ,\t\t\t\t\t \n    CMD_WRITE,\t\t\t\t\t \n    CMD_MISC,\t\t\t\t\t \n} cmdtype_t;\n\n \ntypedef enum {\t\t\t\t\t \n    DATADIR_IN,\t\t\t\t\t \n    DATADIR_OUT\t\t\t\t\t \n} datadir_t;\n\n#include \"queue.h\"\n#include \"msgqueue.h\"\n\n#define STATUS_BUFFER_SIZE\t32\n \nstruct status_entry {\n\tunsigned long\twhen;\n\tunsigned char\tssr;\n\tunsigned char\tph;\n\tunsigned char\tirq;\n\tunsigned char\tunused;\n};\n\n#define ADD_STATUS(_q,_ssr,_ph,_irq) \\\n({\t\t\t\t\t\t\t\t\t\\\n\thost->status[(_q)][host->status_ptr[(_q)]].when = jiffies;\t\\\n\thost->status[(_q)][host->status_ptr[(_q)]].ssr  = (_ssr);\t\\\n\thost->status[(_q)][host->status_ptr[(_q)]].ph   = (_ph);\t\\\n\thost->status[(_q)][host->status_ptr[(_q)]].irq  = (_irq);\t\\\n\thost->status_ptr[(_q)] = (host->status_ptr[(_q)] + 1) & (STATUS_BUFFER_SIZE - 1); \\\n})\n\n \ntypedef struct acornscsi_hostdata {\n     \n    struct Scsi_Host\t*host;\t\t\t \n    struct scsi_cmnd\t*SCpnt;\t\t\t \n    struct scsi_cmnd\t*origSCpnt;\t\t \n    void __iomem\t*base;\t\t\t \n    void __iomem\t*fast;\t\t\t \n\n     \n    struct {\n\tunsigned int\tirq;\t\t\t \n\tphase_t\t\tphase;\t\t\t \n\n\tstruct {\n\t    unsigned char\ttarget;\t\t \n\t    unsigned char\tlun;\t\t \n\t    unsigned char\ttag;\t\t \n\t} reconnected;\n\n\tstruct scsi_pointer\tSCp;\t\t\t \n\n\tMsgQueue_t\tmsgs;\n\n\tunsigned short\tlast_message;\t\t \n\tunsigned char\tdisconnectable:1;\t \n    } scsi;\n\n     \n    struct {\n\tunsigned int\tqueues;\n\tunsigned int\tremoves;\n\tunsigned int\tfins;\n\tunsigned int\treads;\n\tunsigned int\twrites;\n\tunsigned int\tmiscs;\n\tunsigned int\tdisconnects;\n\tunsigned int\taborts;\n\tunsigned int\tresets;\n    } stats;\n\n     \n    struct {\n\tQueue_t\t\tissue;\t\t\t \n\tQueue_t\t\tdisconnected;\t\t \n    } queues;\n\n     \n    struct {\n\tunsigned char\tsync_xfer;\t\t \n\tsyncxfer_t\tsync_state;\t\t \n\tunsigned char\tdisconnect_ok:1;\t \n    } device[8];\n    unsigned long\tbusyluns[64 / sizeof(unsigned long)]; \n\n     \n    struct {\n\tunsigned int\tfree_addr;\t\t \n\tunsigned int\tstart_addr;\t\t \n\tdmadir_t\tdirection;\t\t \n\tunsigned int\ttransferred;\t\t \n\tunsigned int\txfer_start;\t\t \n\tunsigned int\txfer_length;\t\t \n\tchar\t\t*xfer_ptr;\t\t \n\tunsigned char\txfer_required:1;\t \n\tunsigned char\txfer_setup:1;\t\t \n\tunsigned char\txfer_done:1;\t\t \n    } dma;\n\n     \n    struct {\n\tunsigned char\tpage_reg;\t\t \n    } card;\n\n    unsigned char status_ptr[9];\n    struct status_entry status[9][STATUS_BUFFER_SIZE];\n} AS_Host;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}