{
  "module_name": "qla_edif.h",
  "hash_id": "2682a9a7ebd722f5728a7e785e116d783e84ee70916b33b46ac59174b0eec885",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/qla2xxx/qla_edif.h",
  "human_readable_source": " \n \n#ifndef __QLA_EDIF_H\n#define __QLA_EDIF_H\n\nstruct qla_scsi_host;\n#define EDIF_APP_ID 0x73730001\n\n#define EDIF_MAX_INDEX\t2048\nstruct edif_sa_ctl {\n\tstruct list_head next;\n\tuint16_t\tdel_index;\n\tuint16_t\tindex;\n\tuint16_t\tslot;\n\tuint16_t\tflags;\n#define\tEDIF_SA_CTL_FLG_REPL\t\tBIT_0\n#define\tEDIF_SA_CTL_FLG_DEL\t\tBIT_1\n#define EDIF_SA_CTL_FLG_CLEANUP_DEL BIT_4\n\t\n\tunsigned long   state;\n#define EDIF_SA_CTL_USED\t1\t \n#define EDIF_SA_CTL_PEND\t2\t \n#define EDIF_SA_CTL_REPL\t3\t \n#define EDIF_SA_CTL_DEL\t\t4\t \n\tstruct fc_port\t*fcport;\n\tstruct bsg_job *bsg_job;\n\tstruct qla_sa_update_frame sa_frame;\n};\n\nenum enode_flags_t {\n\tENODE_ACTIVE = 0x1,\n};\n\nstruct pur_core {\n\tenum enode_flags_t\tenode_flags;\n\tspinlock_t\t\tpur_lock;\n\tstruct  list_head\thead;\n};\n\nenum db_flags_t {\n\tEDB_ACTIVE = BIT_0,\n};\n\n#define DBELL_ACTIVE(_v) (_v->e_dbell.db_flags & EDB_ACTIVE)\n#define DBELL_INACTIVE(_v) (!(_v->e_dbell.db_flags & EDB_ACTIVE))\n\nstruct edif_dbell {\n\tenum db_flags_t\t\tdb_flags;\n\tspinlock_t\t\tdb_lock;\n\tstruct  list_head\thead;\n\tstruct bsg_job *dbell_bsg_job;\n\tunsigned long bsg_expire;\n};\n\n#define SA_UPDATE_IOCB_TYPE            0x71     \nstruct sa_update_28xx {\n\tuint8_t entry_type;              \n\tuint8_t entry_count;             \n\tuint8_t sys_define;              \n\tuint8_t entry_status;            \n\n\tuint32_t handle;                 \n\n\tunion {\n\t\t__le16 nport_handle;   \n\t\t__le16 comp_sts;               \n#define CS_PORT_EDIF_UNAVAIL\t0x28\n#define CS_PORT_EDIF_LOGOUT\t0x29\n#define CS_PORT_EDIF_SUPP_NOT_RDY 0x64\n#define CS_PORT_EDIF_INV_REQ      0x66\n\t} u;\n\tuint8_t vp_index;\n\tuint8_t reserved_1;\n\tuint8_t port_id[3];\n\tuint8_t flags;\n#define SA_FLAG_INVALIDATE BIT_0\n#define SA_FLAG_TX\t   BIT_1 \n\n\tuint8_t sa_key[32];      \n\t__le32 salt;\n\t__le32 spi;\n\tuint8_t sa_control;\n#define SA_CNTL_ENC_FCSP        (1 << 3)\n#define SA_CNTL_ENC_OPD         (2 << 3)\n#define SA_CNTL_ENC_MSK         (3 << 3)  \n#define SA_CNTL_AES_GMAC\t(1 << 2)\n#define SA_CNTL_KEY256          (2 << 0)\n#define SA_CNTL_KEY128          0\n\n\tuint8_t reserved_2;\n\t__le16 sa_index;   \n\t__le16 old_sa_info;\n\t__le16 new_sa_info;\n};\n\n#define        NUM_ENTRIES     256\n#define        PUR_GET         1\n\nstruct dinfo {\n\tint\t\tnodecnt;\n\tint\t\tlstate;\n};\n\nstruct pur_ninfo {\n\tport_id_t       pur_sid;\n\tport_id_t\tpur_did;\n\tuint8_t\t\tvp_idx;\n\tshort           pur_bytes_rcvd;\n\tunsigned short  pur_nphdl;\n\tunsigned int    pur_rx_xchg_address;\n};\n\nstruct purexevent {\n\tstruct  pur_ninfo\tpur_info;\n\tunsigned char\t\t*msgp;\n\tu32\t\t\tmsgp_len;\n};\n\n#define\tN_UNDEF\t\t0\n#define\tN_PUREX\t\t1\nstruct enode {\n\tstruct list_head\tlist;\n\tstruct dinfo\t\tdinfo;\n\tuint32_t\t\tntype;\n\tunion {\n\t\tstruct purexevent\tpurexinfo;\n\t} u;\n};\n\n#define RX_ELS_SIZE (roundup(sizeof(struct enode) + ELS_MAX_PAYLOAD, SMP_CACHE_BYTES))\n\n#define EDIF_SESSION_DOWN(_s) \\\n\t(qla_ini_mode_enabled(_s->vha) && (_s->disc_state == DSC_DELETE_PEND || \\\n\t _s->disc_state == DSC_DELETED || \\\n\t !_s->edif.app_sess_online))\n\n#define EDIF_NEGOTIATION_PENDING(_fcport) \\\n\t(DBELL_ACTIVE(_fcport->vha) && \\\n\t (_fcport->disc_state == DSC_LOGIN_AUTH_PEND))\n\n#define EDIF_SESS_DELETE(_s) \\\n\t(qla_ini_mode_enabled(_s->vha) && (_s->disc_state == DSC_DELETE_PEND || \\\n\t _s->disc_state == DSC_DELETED))\n\n#define EDIF_CAP(_ha) (ql2xsecenable && IS_QLA28XX(_ha))\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}