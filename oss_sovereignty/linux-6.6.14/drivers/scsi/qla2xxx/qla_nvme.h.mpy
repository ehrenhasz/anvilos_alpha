{
  "module_name": "qla_nvme.h",
  "hash_id": "ee072d57ada6ff85e35847f5c39fbebf8cd9fd21d9878c621cf9122fe6f3d1a5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/qla2xxx/qla_nvme.h",
  "human_readable_source": " \n \n#ifndef __QLA_NVME_H\n#define __QLA_NVME_H\n\n#include <uapi/scsi/fc/fc_fs.h>\n#include <uapi/scsi/fc/fc_els.h>\n#include <linux/nvme-fc-driver.h>\n\n#include \"qla_def.h\"\n#include \"qla_dsd.h\"\n\n#define MIN_NVME_HW_QUEUES 1\n#define DEF_NVME_HW_QUEUES 8\n\n#define NVME_ATIO_CMD_OFF 32\n#define NVME_FIRST_PACKET_CMDLEN (64 - NVME_ATIO_CMD_OFF)\n#define Q2T_NVME_NUM_TAGS 2048\n#define QLA_MAX_FC_SEGMENTS 64\n\nstruct qla_nvme_unsol_ctx;\nstruct scsi_qla_host;\nstruct qla_hw_data;\nstruct req_que;\nstruct srb;\n\nstruct nvme_private {\n\tstruct srb\t*sp;\n\tstruct nvmefc_ls_req *fd;\n\tstruct work_struct ls_work;\n\tstruct work_struct abort_work;\n\tint comp_status;\n\tspinlock_t cmd_lock;\n};\n\nstruct qla_nvme_rport {\n\tstruct fc_port *fcport;\n\tstruct qla_nvme_unsol_ctx *uctx;\n};\n\n#define COMMAND_NVME    0x88             \nstruct cmd_nvme {\n\tuint8_t entry_type;              \n\tuint8_t entry_count;             \n\tuint8_t sys_define;              \n\tuint8_t entry_status;            \n\n\tuint32_t handle;                 \n\t__le16\tnport_handle;\t\t \n\t__le16\ttimeout;\t\t \n\n\t__le16\tdseg_count;\t\t \n\t__le16\tnvme_rsp_dsd_len;\t \n\n\tuint64_t rsvd;\n\n\t__le16\tcontrol_flags;\t\t \n#define CF_ADMIN_ASYNC_EVENT\t\tBIT_13\n#define CF_NVME_FIRST_BURST_ENABLE\tBIT_11\n#define CF_DIF_SEG_DESCR_ENABLE         BIT_3\n#define CF_DATA_SEG_DESCR_ENABLE        BIT_2\n#define CF_READ_DATA                    BIT_1\n#define CF_WRITE_DATA                   BIT_0\n\n\t__le16\tnvme_cmnd_dseg_len;              \n\t__le64\t nvme_cmnd_dseg_address __packed; \n\t__le64\t nvme_rsp_dseg_address __packed;  \n\n\t__le32\tbyte_count;\t\t \n\n\tuint8_t port_id[3];              \n\tuint8_t vp_index;\n\n\tstruct dsd64 nvme_dsd;\n};\n\n#define PURLS_MSLEEP_INTERVAL\t1\n#define PURLS_RETRY_COUNT\t5\n\n#define PT_LS4_REQUEST 0x89\t \nstruct pt_ls4_request {\n\tuint8_t entry_type;\n\tuint8_t entry_count;\n\tuint8_t sys_define;\n\tuint8_t entry_status;\n\tuint32_t handle;\n\t__le16\tstatus;\n\t__le16\tnport_handle;\n\t__le16\ttx_dseg_count;\n\tuint8_t  vp_index;\n\tuint8_t  rsvd;\n\t__le16\ttimeout;\n\t__le16\tcontrol_flags;\n#define CF_LS4_SHIFT\t\t13\n#define CF_LS4_ORIGINATOR\t0\n#define CF_LS4_RESPONDER\t1\n#define CF_LS4_RESPONDER_TERM\t2\n\n\t__le16\trx_dseg_count;\n\t__le16\trsvd2;\n\t__le32\texchange_address;\n\t__le32\trsvd3;\n\t__le32\trx_byte_count;\n\t__le32\ttx_byte_count;\n\tstruct dsd64 dsd[2];\n};\n\n#define PT_LS4_UNSOL 0x56\t \nstruct pt_ls4_rx_unsol {\n\tuint8_t entry_type;\n\tuint8_t entry_count;\n\t__le16\trsvd0;\n\t__le16\trsvd1;\n\tuint8_t vp_index;\n\tuint8_t rsvd2;\n\t__le16\trsvd3;\n\t__le16\tnport_handle;\n\t__le16\tframe_size;\n\t__le16\trsvd4;\n\t__le32\texchange_address;\n\tuint8_t d_id[3];\n\tuint8_t r_ctl;\n\tle_id_t s_id;\n\tuint8_t cs_ctl;\n\tuint8_t f_ctl[3];\n\tuint8_t type;\n\t__le16\tseq_cnt;\n\tuint8_t df_ctl;\n\tuint8_t seq_id;\n\t__le16 rx_id;\n\t__le16 ox_id;\n\t__le32  desc0;\n#define PT_LS4_PAYLOAD_OFFSET 0x2c\n#define PT_LS4_FIRST_PACKET_LEN 20\n\t__le32 payload[5];\n};\n\n \nint qla_nvme_register_hba(struct scsi_qla_host *);\nint  qla_nvme_register_remote(struct scsi_qla_host *, struct fc_port *);\nvoid qla_nvme_delete(struct scsi_qla_host *);\nvoid qla24xx_nvme_ls4_iocb(struct scsi_qla_host *, struct pt_ls4_request *,\n    struct req_que *);\nvoid qla24xx_async_gffid_sp_done(struct srb *sp, int);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}