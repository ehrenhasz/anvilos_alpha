{
  "module_name": "qla_dbg.h",
  "hash_id": "0ec00f2ce9b9a2a49defb8eb4b66793f3e56b85e47443c80fd1dc76a304ecbf1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/qla2xxx/qla_dbg.h",
  "human_readable_source": " \n \n\n#include \"qla_def.h\"\n\n \n\nstruct qla2300_fw_dump {\n\t__be16 hccr;\n\t__be16 pbiu_reg[8];\n\t__be16 risc_host_reg[8];\n\t__be16 mailbox_reg[32];\n\t__be16 resp_dma_reg[32];\n\t__be16 dma_reg[48];\n\t__be16 risc_hdw_reg[16];\n\t__be16 risc_gp0_reg[16];\n\t__be16 risc_gp1_reg[16];\n\t__be16 risc_gp2_reg[16];\n\t__be16 risc_gp3_reg[16];\n\t__be16 risc_gp4_reg[16];\n\t__be16 risc_gp5_reg[16];\n\t__be16 risc_gp6_reg[16];\n\t__be16 risc_gp7_reg[16];\n\t__be16 frame_buf_hdw_reg[64];\n\t__be16 fpm_b0_reg[64];\n\t__be16 fpm_b1_reg[64];\n\t__be16 risc_ram[0xf800];\n\t__be16 stack_ram[0x1000];\n\t__be16 data_ram[1];\n};\n\nstruct qla2100_fw_dump {\n\t__be16 hccr;\n\t__be16 pbiu_reg[8];\n\t__be16 mailbox_reg[32];\n\t__be16 dma_reg[48];\n\t__be16 risc_hdw_reg[16];\n\t__be16 risc_gp0_reg[16];\n\t__be16 risc_gp1_reg[16];\n\t__be16 risc_gp2_reg[16];\n\t__be16 risc_gp3_reg[16];\n\t__be16 risc_gp4_reg[16];\n\t__be16 risc_gp5_reg[16];\n\t__be16 risc_gp6_reg[16];\n\t__be16 risc_gp7_reg[16];\n\t__be16 frame_buf_hdw_reg[16];\n\t__be16 fpm_b0_reg[64];\n\t__be16 fpm_b1_reg[64];\n\t__be16 risc_ram[0xf000];\n\tu8\tqueue_dump[];\n};\n\nstruct qla24xx_fw_dump {\n\t__be32\thost_status;\n\t__be32\thost_reg[32];\n\t__be32\tshadow_reg[7];\n\t__be16\tmailbox_reg[32];\n\t__be32\txseq_gp_reg[128];\n\t__be32\txseq_0_reg[16];\n\t__be32\txseq_1_reg[16];\n\t__be32\trseq_gp_reg[128];\n\t__be32\trseq_0_reg[16];\n\t__be32\trseq_1_reg[16];\n\t__be32\trseq_2_reg[16];\n\t__be32\tcmd_dma_reg[16];\n\t__be32\treq0_dma_reg[15];\n\t__be32\tresp0_dma_reg[15];\n\t__be32\treq1_dma_reg[15];\n\t__be32\txmt0_dma_reg[32];\n\t__be32\txmt1_dma_reg[32];\n\t__be32\txmt2_dma_reg[32];\n\t__be32\txmt3_dma_reg[32];\n\t__be32\txmt4_dma_reg[32];\n\t__be32\txmt_data_dma_reg[16];\n\t__be32\trcvt0_data_dma_reg[32];\n\t__be32\trcvt1_data_dma_reg[32];\n\t__be32\trisc_gp_reg[128];\n\t__be32\tlmc_reg[112];\n\t__be32\tfpm_hdw_reg[192];\n\t__be32\tfb_hdw_reg[176];\n\t__be32\tcode_ram[0x2000];\n\t__be32\text_mem[1];\n};\n\nstruct qla25xx_fw_dump {\n\t__be32\thost_status;\n\t__be32\thost_risc_reg[32];\n\t__be32\tpcie_regs[4];\n\t__be32\thost_reg[32];\n\t__be32\tshadow_reg[11];\n\t__be32\trisc_io_reg;\n\t__be16\tmailbox_reg[32];\n\t__be32\txseq_gp_reg[128];\n\t__be32\txseq_0_reg[48];\n\t__be32\txseq_1_reg[16];\n\t__be32\trseq_gp_reg[128];\n\t__be32\trseq_0_reg[32];\n\t__be32\trseq_1_reg[16];\n\t__be32\trseq_2_reg[16];\n\t__be32\taseq_gp_reg[128];\n\t__be32\taseq_0_reg[32];\n\t__be32\taseq_1_reg[16];\n\t__be32\taseq_2_reg[16];\n\t__be32\tcmd_dma_reg[16];\n\t__be32\treq0_dma_reg[15];\n\t__be32\tresp0_dma_reg[15];\n\t__be32\treq1_dma_reg[15];\n\t__be32\txmt0_dma_reg[32];\n\t__be32\txmt1_dma_reg[32];\n\t__be32\txmt2_dma_reg[32];\n\t__be32\txmt3_dma_reg[32];\n\t__be32\txmt4_dma_reg[32];\n\t__be32\txmt_data_dma_reg[16];\n\t__be32\trcvt0_data_dma_reg[32];\n\t__be32\trcvt1_data_dma_reg[32];\n\t__be32\trisc_gp_reg[128];\n\t__be32\tlmc_reg[128];\n\t__be32\tfpm_hdw_reg[192];\n\t__be32\tfb_hdw_reg[192];\n\t__be32\tcode_ram[0x2000];\n\t__be32\text_mem[1];\n};\n\nstruct qla81xx_fw_dump {\n\t__be32\thost_status;\n\t__be32\thost_risc_reg[32];\n\t__be32\tpcie_regs[4];\n\t__be32\thost_reg[32];\n\t__be32\tshadow_reg[11];\n\t__be32\trisc_io_reg;\n\t__be16\tmailbox_reg[32];\n\t__be32\txseq_gp_reg[128];\n\t__be32\txseq_0_reg[48];\n\t__be32\txseq_1_reg[16];\n\t__be32\trseq_gp_reg[128];\n\t__be32\trseq_0_reg[32];\n\t__be32\trseq_1_reg[16];\n\t__be32\trseq_2_reg[16];\n\t__be32\taseq_gp_reg[128];\n\t__be32\taseq_0_reg[32];\n\t__be32\taseq_1_reg[16];\n\t__be32\taseq_2_reg[16];\n\t__be32\tcmd_dma_reg[16];\n\t__be32\treq0_dma_reg[15];\n\t__be32\tresp0_dma_reg[15];\n\t__be32\treq1_dma_reg[15];\n\t__be32\txmt0_dma_reg[32];\n\t__be32\txmt1_dma_reg[32];\n\t__be32\txmt2_dma_reg[32];\n\t__be32\txmt3_dma_reg[32];\n\t__be32\txmt4_dma_reg[32];\n\t__be32\txmt_data_dma_reg[16];\n\t__be32\trcvt0_data_dma_reg[32];\n\t__be32\trcvt1_data_dma_reg[32];\n\t__be32\trisc_gp_reg[128];\n\t__be32\tlmc_reg[128];\n\t__be32\tfpm_hdw_reg[224];\n\t__be32\tfb_hdw_reg[208];\n\t__be32\tcode_ram[0x2000];\n\t__be32\text_mem[1];\n};\n\nstruct qla83xx_fw_dump {\n\t__be32\thost_status;\n\t__be32\thost_risc_reg[48];\n\t__be32\tpcie_regs[4];\n\t__be32\thost_reg[32];\n\t__be32\tshadow_reg[11];\n\t__be32\trisc_io_reg;\n\t__be16\tmailbox_reg[32];\n\t__be32\txseq_gp_reg[256];\n\t__be32\txseq_0_reg[48];\n\t__be32\txseq_1_reg[16];\n\t__be32\txseq_2_reg[16];\n\t__be32\trseq_gp_reg[256];\n\t__be32\trseq_0_reg[32];\n\t__be32\trseq_1_reg[16];\n\t__be32\trseq_2_reg[16];\n\t__be32\trseq_3_reg[16];\n\t__be32\taseq_gp_reg[256];\n\t__be32\taseq_0_reg[32];\n\t__be32\taseq_1_reg[16];\n\t__be32\taseq_2_reg[16];\n\t__be32\taseq_3_reg[16];\n\t__be32\tcmd_dma_reg[64];\n\t__be32\treq0_dma_reg[15];\n\t__be32\tresp0_dma_reg[15];\n\t__be32\treq1_dma_reg[15];\n\t__be32\txmt0_dma_reg[32];\n\t__be32\txmt1_dma_reg[32];\n\t__be32\txmt2_dma_reg[32];\n\t__be32\txmt3_dma_reg[32];\n\t__be32\txmt4_dma_reg[32];\n\t__be32\txmt_data_dma_reg[16];\n\t__be32\trcvt0_data_dma_reg[32];\n\t__be32\trcvt1_data_dma_reg[32];\n\t__be32\trisc_gp_reg[128];\n\t__be32\tlmc_reg[128];\n\t__be32\tfpm_hdw_reg[256];\n\t__be32\trq0_array_reg[256];\n\t__be32\trq1_array_reg[256];\n\t__be32\trp0_array_reg[256];\n\t__be32\trp1_array_reg[256];\n\t__be32\tqueue_control_reg[16];\n\t__be32\tfb_hdw_reg[432];\n\t__be32\tat0_array_reg[128];\n\t__be32\tcode_ram[0x2400];\n\t__be32\text_mem[1];\n};\n\n#define EFT_NUM_BUFFERS\t\t4\n#define EFT_BYTES_PER_BUFFER\t0x4000\n#define EFT_SIZE\t\t((EFT_BYTES_PER_BUFFER) * (EFT_NUM_BUFFERS))\n\n#define FCE_NUM_BUFFERS\t\t64\n#define FCE_BYTES_PER_BUFFER\t0x400\n#define FCE_SIZE\t\t((FCE_BYTES_PER_BUFFER) * (FCE_NUM_BUFFERS))\n#define fce_calc_size(b)\t((FCE_BYTES_PER_BUFFER) * (b))\n\nstruct qla2xxx_fce_chain {\n\t__be32\ttype;\n\t__be32\tchain_size;\n\n\t__be32\tsize;\n\t__be32\taddr_l;\n\t__be32\taddr_h;\n\t__be32\teregs[8];\n};\n\n \nstruct qla2xxx_offld_chain {\n\t__be32\ttype;\n\t__be32\tchain_size;\n\n\t__be32\tsize;\n\t__be32\treserved;\n\t__be64\taddr;\n};\n\nstruct qla2xxx_mq_chain {\n\t__be32\ttype;\n\t__be32\tchain_size;\n\n\t__be32\tcount;\n\t__be32\tqregs[4 * QLA_MQ_SIZE];\n};\n\nstruct qla2xxx_mqueue_header {\n\t__be32\tqueue;\n#define TYPE_REQUEST_QUEUE\t0x1\n#define TYPE_RESPONSE_QUEUE\t0x2\n#define TYPE_ATIO_QUEUE\t\t0x3\n\t__be32\tnumber;\n\t__be32\tsize;\n};\n\nstruct qla2xxx_mqueue_chain {\n\t__be32\ttype;\n\t__be32\tchain_size;\n};\n\n#define DUMP_CHAIN_VARIANT\t0x80000000\n#define DUMP_CHAIN_FCE\t\t0x7FFFFAF0\n#define DUMP_CHAIN_MQ\t\t0x7FFFFAF1\n#define DUMP_CHAIN_QUEUE\t0x7FFFFAF2\n#define DUMP_CHAIN_EXLOGIN\t0x7FFFFAF3\n#define DUMP_CHAIN_EXCHG\t0x7FFFFAF4\n#define DUMP_CHAIN_LAST\t\t0x80000000\n\nstruct qla2xxx_fw_dump {\n\tuint8_t signature[4];\n\t__be32\tversion;\n\n\t__be32 fw_major_version;\n\t__be32 fw_minor_version;\n\t__be32 fw_subminor_version;\n\t__be32 fw_attributes;\n\n\t__be32 vendor;\n\t__be32 device;\n\t__be32 subsystem_vendor;\n\t__be32 subsystem_device;\n\n\t__be32\tfixed_size;\n\t__be32\tmem_size;\n\t__be32\treq_q_size;\n\t__be32\trsp_q_size;\n\n\t__be32\teft_size;\n\t__be32\teft_addr_l;\n\t__be32\teft_addr_h;\n\n\t__be32\theader_size;\n\n\tunion {\n\t\tstruct qla2100_fw_dump isp21;\n\t\tstruct qla2300_fw_dump isp23;\n\t\tstruct qla24xx_fw_dump isp24;\n\t\tstruct qla25xx_fw_dump isp25;\n\t\tstruct qla81xx_fw_dump isp81;\n\t\tstruct qla83xx_fw_dump isp83;\n\t} isp;\n};\n\n#define QL_MSGHDR \"qla2xxx\"\n#define QL_DBG_DEFAULT1_MASK    0x1e600000\n\n#define ql_log_fatal\t\t0  \n#define ql_log_warn\t\t1  \n#define ql_log_info\t\t2  \n#define ql_log_all\t\t3  \n\nextern uint ql_errlev;\n\nvoid __attribute__((format (printf, 4, 5)))\nql_dbg(uint, scsi_qla_host_t *vha, uint, const char *fmt, ...);\nvoid __attribute__((format (printf, 4, 5)))\nql_dbg_pci(uint, struct pci_dev *pdev, uint, const char *fmt, ...);\nvoid __attribute__((format (printf, 4, 5)))\nql_dbg_qp(uint32_t, struct qla_qpair *, int32_t, const char *fmt, ...);\n\n\nvoid __attribute__((format (printf, 4, 5)))\nql_log(uint, scsi_qla_host_t *vha, uint, const char *fmt, ...);\nvoid __attribute__((format (printf, 4, 5)))\nql_log_pci(uint, struct pci_dev *pdev, uint, const char *fmt, ...);\n\nvoid __attribute__((format (printf, 4, 5)))\nql_log_qp(uint32_t, struct qla_qpair *, int32_t, const char *fmt, ...);\n\n \n \n#define ql_dbg_init\t0x40000000  \n#define ql_dbg_mbx\t0x20000000  \n#define ql_dbg_disc\t0x10000000  \n#define ql_dbg_io\t0x08000000  \n#define ql_dbg_dpc\t0x04000000  \n#define ql_dbg_async\t0x02000000  \n#define ql_dbg_timer\t0x01000000  \n#define ql_dbg_user\t0x00800000  \n#define ql_dbg_taskm\t0x00400000  \n#define ql_dbg_aer\t0x00200000  \n#define ql_dbg_multiq\t0x00100000  \n#define ql_dbg_p3p\t0x00080000  \n#define ql_dbg_vport\t0x00040000  \n#define ql_dbg_buffer\t0x00020000  \n#define ql_dbg_misc\t0x00010000  \n#define ql_dbg_verbose\t0x00008000  \n#define ql_dbg_tgt\t0x00004000  \n#define ql_dbg_tgt_mgt\t0x00002000  \n#define ql_dbg_tgt_tmr\t0x00001000  \n#define ql_dbg_tgt_dif  0x00000800  \n#define ql_dbg_edif\t0x00000400  \n#define ql_dbg_unsol\t0x00000100  \n\nextern int qla27xx_dump_mpi_ram(struct qla_hw_data *, uint32_t, uint32_t *,\n\tuint32_t, void **);\nextern int qla24xx_dump_ram(struct qla_hw_data *, uint32_t, __be32 *,\n\tuint32_t, void **);\nextern void qla24xx_pause_risc(struct device_reg_24xx __iomem *,\n\tstruct qla_hw_data *);\nextern int qla24xx_soft_reset(struct qla_hw_data *);\n\nstatic inline int\nql_mask_match(uint level)\n{\n\tif (ql2xextended_error_logging == 1)\n\t\tql2xextended_error_logging = QL_DBG_DEFAULT1_MASK;\n\n\treturn level && ((level & ql2xextended_error_logging) == level);\n}\n\nstatic inline int\nql_mask_match_ext(uint level, int *log_tunable)\n{\n\tif (*log_tunable == 1)\n\t\t*log_tunable = QL_DBG_DEFAULT1_MASK;\n\n\treturn (level & *log_tunable) == level;\n}\n\n \n#define ql_ktrace(dbg_msg, level, pbuf, pdev, vha, id, fmt) do {\t\\\n\tstruct va_format _vaf;\t\t\t\t\t\t\\\n\tva_list _va;\t\t\t\t\t\t\t\\\n\tu32 dbg_off = dbg_msg ? ql_dbg_offset : 0;\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tpbuf[0] = 0;\t\t\t\t\t\t\t\\\n\tif (!trace_ql_dbg_log_enabled())\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tif (dbg_msg && !ql_mask_match_ext(level,\t\t\t\\\n\t\t\t\t&ql2xextended_error_logging_ktrace))\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tql_dbg_prefix(pbuf, ARRAY_SIZE(pbuf), pdev, vha, id + dbg_off);\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tva_start(_va, fmt);\t\t\t\t\t\t\\\n\t_vaf.fmt = fmt;\t\t\t\t\t\t\t\\\n\t_vaf.va = &_va;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\ttrace_ql_dbg_log(pbuf, &_vaf);\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tva_end(_va);\t\t\t\t\t\t\t\\\n} while (0)\n\n#define QLA_ENABLE_KERNEL_TRACING\n\n#ifdef QLA_ENABLE_KERNEL_TRACING\n#define QLA_TRACE_ENABLE(_tr) \\\n\ttrace_array_set_clr_event(_tr, \"qla\", NULL, true)\n#else  \n#define QLA_TRACE_ENABLE(_tr)\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}