{
  "module_name": "qla_mr.h",
  "hash_id": "087c2948cd26cc886c84fbd7cd7e289d2b5b165406507f5f1f3599524e04b13b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/qla2xxx/qla_mr.h",
  "human_readable_source": " \n \n#ifndef __QLA_MR_H\n#define __QLA_MR_H\n\n#include \"qla_dsd.h\"\n\n \n#define PCI_DEVICE_ID_QLOGIC_ISPF001\t\t0xF001\n\n \n\n#define FX00_COMMAND_TYPE_7\t0x07\t \nstruct cmd_type_7_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\t\t \n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\tuint8_t reserved_0;\n\tuint8_t port_path_ctrl;\n\tuint16_t reserved_1;\n\n\t__le16 tgt_idx;\t\t \n\tuint16_t timeout;\t\t \n\n\t__le16 dseg_count;\t\t \n\tuint8_t\tscsi_rsp_dsd_len;\n\tuint8_t reserved_2;\n\n\tstruct scsi_lun lun;\t\t \n\n\tuint8_t cntrl_flags;\n\n\tuint8_t task_mgmt_flags;\t \n\n\tuint8_t task;\n\n\tuint8_t crn;\n\n\tuint8_t fcp_cdb[MAX_CMDSZ];\t \n\t__le32 byte_count;\t\t \n\n\tstruct dsd64 dsd;\n};\n\n#define\tSTATUS_TYPE_FX00\t0x01\t\t \nstruct sts_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\t\t \n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\tuint32_t reserved_3;\t\t \n\n\t__le16 comp_status;\t\t \n\tuint16_t reserved_0;\t\t \n\n\t__le32 residual_len;\t\t \n\n\tuint16_t reserved_1;\n\tuint16_t state_flags;\t\t \n\n\tuint16_t reserved_2;\n\t__le16 scsi_status;\t\t \n\n\tuint32_t sense_len;\t\t \n\tuint8_t data[32];\t\t \n};\n\n\n#define MAX_HANDLE_COUNT\t15\n#define MULTI_STATUS_TYPE_FX00\t0x0D\n\nstruct multi_sts_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t handle_count;\n\tuint8_t entry_status;\n\n\t__le32 handles[MAX_HANDLE_COUNT];\n};\n\n#define TSK_MGMT_IOCB_TYPE_FX00\t\t0x05\nstruct tsk_mgmt_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\n\tuint32_t reserved_0;\n\n\t__le16 tgt_id;\t\t \n\n\tuint16_t reserved_1;\n\tuint16_t reserved_3;\n\tuint16_t reserved_4;\n\n\tstruct scsi_lun lun;\t\t \n\n\t__le32 control_flags;\t\t \n\n\tuint8_t reserved_2[32];\n};\n\n\n#define\tABORT_IOCB_TYPE_FX00\t0x08\t\t \nstruct abort_iocb_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\t\t \n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\t__le32 reserved_0;\n\n\t__le16 tgt_id_sts;\t\t \n\t__le16 options;\n\n\tuint32_t abort_handle;\t\t \n\t__le32 reserved_2;\n\n\t__le16 req_que_no;\n\tuint8_t reserved_1[38];\n};\n\n#define IOCTL_IOSB_TYPE_FX00\t0x0C\nstruct ioctl_iocb_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\t\t \n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\tuint32_t reserved_0;\t\t \n\n\tuint16_t comp_func_num;\n\t__le16 fw_iotcl_flags;\n\n\t__le32 dataword_r;\t\t \n\tuint32_t adapid;\t\t \n\tuint32_t dataword_r_extra;\n\n\t__le32 seq_no;\n\tuint8_t reserved_2[20];\n\tuint32_t residuallen;\n\t__le32 status;\n};\n\n#define STATUS_CONT_TYPE_FX00 0x04\n\n#define FX00_IOCB_TYPE\t\t0x0B\nstruct fxdisc_entry_fx00 {\n\tuint8_t entry_type;\t\t \n\tuint8_t entry_count;\t\t \n\tuint8_t sys_define;\t\t \n\tuint8_t entry_status;\t\t \n\n\tuint32_t handle;\t\t \n\t__le32 reserved_0;\t\t \n\n\t__le16 func_num;\n\t__le16 req_xfrcnt;\n\t__le16 req_dsdcnt;\n\t__le16 rsp_xfrcnt;\n\t__le16 rsp_dsdcnt;\n\tuint8_t flags;\n\tuint8_t reserved_1;\n\n\t \n\tstruct dsd64 dseg_rq[1];\n\tstruct dsd64 dseg_rsp[1];\n\n\t__le32 dataword;\n\t__le32 adapid;\n\t__le32 adapid_hi;\n\t__le32 dataword_extra;\n};\n\nstruct qlafx00_tgt_node_info {\n\tuint8_t tgt_node_wwpn[WWN_SIZE];\n\tuint8_t tgt_node_wwnn[WWN_SIZE];\n\tuint32_t tgt_node_state;\n\tuint8_t reserved[128];\n\tuint32_t reserved_1[8];\n\tuint64_t reserved_2[4];\n} __packed;\n\n#define QLAFX00_TGT_NODE_INFO sizeof(struct qlafx00_tgt_node_info)\n\n#define QLAFX00_LINK_STATUS_DOWN\t0x10\n#define QLAFX00_LINK_STATUS_UP\t\t0x11\n\n#define QLAFX00_PORT_SPEED_2G\t0x2\n#define QLAFX00_PORT_SPEED_4G\t0x4\n#define QLAFX00_PORT_SPEED_8G\t0x8\n#define QLAFX00_PORT_SPEED_10G\t0xa\nstruct port_info_data {\n\tuint8_t         port_state;\n\tuint8_t         port_type;\n\tuint16_t        port_identifier;\n\tuint32_t        up_port_state;\n\tuint8_t         fw_ver_num[32];\n\tuint8_t         portal_attrib;\n\tuint16_t        host_option;\n\tuint8_t         reset_delay;\n\tuint8_t         pdwn_retry_cnt;\n\tuint16_t        max_luns2tgt;\n\tuint8_t         risc_ver;\n\tuint8_t         pconn_option;\n\tuint16_t        risc_option;\n\tuint16_t        max_frame_len;\n\tuint16_t        max_iocb_alloc;\n\tuint16_t        exec_throttle;\n\tuint8_t         retry_cnt;\n\tuint8_t         retry_delay;\n\tuint8_t         port_name[8];\n\tuint8_t         port_id[3];\n\tuint8_t         link_status;\n\tuint8_t         plink_rate;\n\tuint32_t        link_config;\n\tuint16_t        adap_haddr;\n\tuint8_t         tgt_disc;\n\tuint8_t         log_tout;\n\tuint8_t         node_name[8];\n\tuint16_t        erisc_opt1;\n\tuint8_t         resp_acc_tmr;\n\tuint8_t         intr_del_tmr;\n\tuint8_t         erisc_opt2;\n\tuint8_t         alt_port_name[8];\n\tuint8_t         alt_node_name[8];\n\tuint8_t         link_down_tout;\n\tuint8_t         conn_type;\n\tuint8_t         fc_fw_mode;\n\tuint32_t        uiReserved[48];\n} __packed;\n\n \n#define OS_TYPE_UNKNOWN             0\n#define OS_TYPE_LINUX               2\n\n \n#define SYSNAME_LENGTH              128\n#define NODENAME_LENGTH             64\n#define RELEASE_LENGTH              64\n#define VERSION_LENGTH              64\n#define MACHINE_LENGTH              64\n#define DOMNAME_LENGTH              64\n\nstruct host_system_info {\n\tuint32_t os_type;\n\tchar    sysname[SYSNAME_LENGTH];\n\tchar    nodename[NODENAME_LENGTH];\n\tchar    release[RELEASE_LENGTH];\n\tchar    version[VERSION_LENGTH];\n\tchar    machine[MACHINE_LENGTH];\n\tchar    domainname[DOMNAME_LENGTH];\n\tchar    hostdriver[VERSION_LENGTH];\n\tuint32_t reserved[64];\n} __packed;\n\nstruct register_host_info {\n\tstruct host_system_info     hsi;\t \n\tuint64_t        utc;\t\t\t \n\tuint32_t        reserved[64];\t\t \n} __packed;\n\n\n#define QLAFX00_PORT_DATA_INFO (sizeof(struct port_info_data))\n#define QLAFX00_TGT_NODE_LIST_SIZE (sizeof(uint32_t) * 32)\n\nstruct config_info_data {\n\tuint8_t\t\tmodel_num[16];\n\tuint8_t\t\tmodel_description[80];\n\tuint8_t\t\treserved0[160];\n\tuint8_t\t\tsymbolic_name[64];\n\tuint8_t\t\tserial_num[32];\n\tuint8_t\t\thw_version[16];\n\tuint8_t\t\tfw_version[16];\n\tuint8_t\t\tuboot_version[16];\n\tuint8_t\t\tfru_serial_num[32];\n\n\tuint8_t\t\tfc_port_count;\n\tuint8_t\t\tiscsi_port_count;\n\tuint8_t\t\treserved1[2];\n\n\tuint8_t\t\tmode;\n\tuint8_t\t\tlog_level;\n\tuint8_t\t\treserved2[2];\n\n\tuint32_t\tlog_size;\n\n\tuint8_t\t\ttgt_pres_mode;\n\tuint8_t\t\tiqn_flags;\n\tuint8_t\t\tlun_mapping;\n\n\tuint64_t\tadapter_id;\n\n\tuint32_t\tcluster_key_len;\n\tuint8_t\t\tcluster_key[16];\n\n\tuint64_t\tcluster_master_id;\n\tuint64_t\tcluster_slave_id;\n\tuint8_t\t\tcluster_flags;\n\tuint32_t\tenabled_capabilities;\n\tuint32_t\tnominal_temp_value;\n} __packed;\n\n#define FXDISC_GET_CONFIG_INFO\t\t0x01\n#define FXDISC_GET_PORT_INFO\t\t0x02\n#define FXDISC_GET_TGT_NODE_INFO\t0x80\n#define FXDISC_GET_TGT_NODE_LIST\t0x81\n#define FXDISC_REG_HOST_INFO\t\t0x99\n#define FXDISC_ABORT_IOCTL\t\t0xff\n\n#define QLAFX00_HBA_ICNTRL_REG\t\t0x20B08\n#define QLAFX00_ICR_ENB_MASK            0x80000000\n#define QLAFX00_ICR_DIS_MASK            0x7fffffff\n#define QLAFX00_HST_RST_REG\t\t0x18264\n#define QLAFX00_SOC_TEMP_REG\t\t0x184C4\n#define QLAFX00_HST_TO_HBA_REG\t\t0x20A04\n#define QLAFX00_HBA_TO_HOST_REG\t\t0x21B70\n#define QLAFX00_HST_INT_STS_BITS\t0x7\n#define QLAFX00_BAR1_BASE_ADDR_REG\t0x40018\n#define QLAFX00_PEX0_WIN0_BASE_ADDR_REG\t0x41824\n\n#define QLAFX00_INTR_MB_CMPLT\t\t0x1\n#define QLAFX00_INTR_RSP_CMPLT\t\t0x2\n#define QLAFX00_INTR_ASYNC_CMPLT\t0x4\n\n#define QLAFX00_MBA_SYSTEM_ERR\t\t0x8002\n#define QLAFX00_MBA_TEMP_OVER\t\t0x8005\n#define QLAFX00_MBA_TEMP_NORM\t\t0x8006\n#define\tQLAFX00_MBA_TEMP_CRIT\t\t0x8007\n#define QLAFX00_MBA_LINK_UP\t\t0x8011\n#define QLAFX00_MBA_LINK_DOWN\t\t0x8012\n#define QLAFX00_MBA_PORT_UPDATE\t\t0x8014\n#define QLAFX00_MBA_SHUTDOWN_RQSTD\t0x8062\n\n#define SOC_SW_RST_CONTROL_REG_CORE0     0x0020800\n#define SOC_FABRIC_RST_CONTROL_REG       0x0020840\n#define SOC_FABRIC_CONTROL_REG           0x0020200\n#define SOC_FABRIC_CONFIG_REG            0x0020204\n#define SOC_PWR_MANAGEMENT_PWR_DOWN_REG  0x001820C\n\n#define SOC_INTERRUPT_SOURCE_I_CONTROL_REG     0x0020B00\n#define SOC_CORE_TIMER_REG                     0x0021850\n#define SOC_IRQ_ACK_REG                        0x00218b4\n\n#define CONTINUE_A64_TYPE_FX00\t0x03\t \n\n#define QLAFX00_SET_HST_INTR(ha, value) \\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HST_TO_HBA_REG, \\\n\tvalue)\n\n#define QLAFX00_CLR_HST_INTR(ha, value) \\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HBA_TO_HOST_REG, \\\n\t~value)\n\n#define QLAFX00_RD_INTR_REG(ha) \\\n\trd_reg_dword((ha)->cregbase + QLAFX00_HBA_TO_HOST_REG)\n\n#define QLAFX00_CLR_INTR_REG(ha, value) \\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HBA_TO_HOST_REG, \\\n\t~value)\n\n#define QLAFX00_SET_HBA_SOC_REG(ha, off, val)\\\n\twrt_reg_dword((ha)->cregbase + off, val)\n\n#define QLAFX00_GET_HBA_SOC_REG(ha, off)\\\n\trd_reg_dword((ha)->cregbase + off)\n\n#define QLAFX00_HBA_RST_REG(ha, val)\\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HST_RST_REG, val)\n\n#define QLAFX00_RD_ICNTRL_REG(ha) \\\n\trd_reg_dword((ha)->cregbase + QLAFX00_HBA_ICNTRL_REG)\n\n#define QLAFX00_ENABLE_ICNTRL_REG(ha) \\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HBA_ICNTRL_REG, \\\n\t(QLAFX00_GET_HBA_SOC_REG(ha, QLAFX00_HBA_ICNTRL_REG) | \\\n\t QLAFX00_ICR_ENB_MASK))\n\n#define QLAFX00_DISABLE_ICNTRL_REG(ha) \\\n\twrt_reg_dword((ha)->cregbase + QLAFX00_HBA_ICNTRL_REG, \\\n\t(QLAFX00_GET_HBA_SOC_REG(ha, QLAFX00_HBA_ICNTRL_REG) & \\\n\t QLAFX00_ICR_DIS_MASK))\n\n#define QLAFX00_RD_REG(ha, off) \\\n\trd_reg_dword((ha)->cregbase + off)\n\n#define QLAFX00_WR_REG(ha, off, val) \\\n\twrt_reg_dword((ha)->cregbase + off, val)\n\nstruct qla_mt_iocb_rqst_fx00 {\n\t__le32 reserved_0;\n\n\t__le16 func_type;\n\tuint8_t flags;\n\tuint8_t reserved_1;\n\n\t__le32 dataword;\n\n\t__le32 adapid;\n\t__le32 adapid_hi;\n\n\t__le32 dataword_extra;\n\n\t__le16 req_len;\n\t__le16 reserved_2;\n\n\t__le16 rsp_len;\n\t__le16 reserved_3;\n};\n\nstruct qla_mt_iocb_rsp_fx00 {\n\tuint32_t reserved_1;\n\n\tuint16_t func_type;\n\t__le16 ioctl_flags;\n\n\t__le32 ioctl_data;\n\n\tuint32_t adapid;\n\tuint32_t adapid_hi;\n\n\tuint32_t reserved_2;\n\t__le32 seq_number;\n\n\tuint8_t reserved_3[20];\n\n\tint32_t res_count;\n\n\t__le32 status;\n};\n\n\n#define MAILBOX_REGISTER_COUNT_FX00\t16\n#define AEN_MAILBOX_REGISTER_COUNT_FX00\t8\n#define MAX_FIBRE_DEVICES_FX00\t512\n#define MAX_LUNS_FX00\t\t0x1024\n#define MAX_TARGETS_FX00\tMAX_ISA_DEVICES\n#define REQUEST_ENTRY_CNT_FX00\t\t512\t \n#define RESPONSE_ENTRY_CNT_FX00\t\t256\t \n\n \n#define FSTATE_FX00_CONFIG_WAIT     0x0000\t \n#define FSTATE_FX00_INITIALIZED     0x1000\t \n\n#define FX00_DEF_RATOV\t10\n\nstruct mr_data_fx00 {\n\tuint8_t\tsymbolic_name[64];\n\tuint8_t\tserial_num[32];\n\tuint8_t\thw_version[16];\n\tuint8_t\tfw_version[16];\n\tuint8_t\tuboot_version[16];\n\tuint8_t\tfru_serial_num[32];\n\tfc_port_t       fcport;\t\t \n\tuint8_t fw_hbt_en;\n\tuint8_t fw_hbt_cnt;\n\tuint8_t fw_hbt_miss_cnt;\n\tuint32_t old_fw_hbt_cnt;\n\tuint16_t fw_reset_timer_tick;\n\tuint8_t fw_reset_timer_exp;\n\tuint16_t fw_critemp_timer_tick;\n\tuint32_t old_aenmbx0_state;\n\tuint32_t critical_temperature;\n\tbool extended_io_enabled;\n\tbool host_info_resend;\n\tuint8_t hinfo_resend_timer_tick;\n};\n\n#define QLAFX00_EXTENDED_IO_EN_MASK    0x20\n\n \n#define QLAFX00_GET_TEMPERATURE(ha) ((3153000 - (10000 * \\\n\t((QLAFX00_RD_REG(ha, QLAFX00_SOC_TEMP_REG) & 0x3FE) >> 1))) / 13825)\n\n\n#define QLAFX00_LOOP_DOWN_TIME\t\t615      \n#define QLAFX00_HEARTBEAT_INTERVAL\t6\t \n#define QLAFX00_HEARTBEAT_MISS_CNT\t3\t \n#define QLAFX00_RESET_INTERVAL\t\t120\t \n#define QLAFX00_MAX_RESET_INTERVAL\t600\t \n#define QLAFX00_CRITEMP_INTERVAL\t60\t \n#define QLAFX00_HINFO_RESEND_INTERVAL\t60\t \n\n#define QLAFX00_CRITEMP_THRSHLD\t\t80\t \n\n \n#define QLAFX00_MAX_CANQUEUE\t\t1024\n\n \n#define QLAFX00_IOCTL_ICOB_ABORT_SUCCESS\t0x68\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}