{
  "module_name": "qla_nx.h",
  "hash_id": "750a1648d24cac1d99712bcfc284c0d5856caa3aa17ff14413dc9587bd14d064",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/qla2xxx/qla_nx.h",
  "human_readable_source": " \n \n#ifndef __QLA_NX_H\n#define __QLA_NX_H\n\n#include <scsi/scsi.h>\n\n \n#define PHAN_INITIALIZE_FAILED\t      0xffff\n#define PHAN_INITIALIZE_COMPLETE      0xff01\n\n \n#define PHAN_INITIALIZE_ACK\t      0xf00f\n#define PHAN_PEG_RCV_INITIALIZED      0xff01\n\n \n#define QLA82XX_CRB_BASE\tQLA82XX_CAM_RAM(0x200)\n#define QLA82XX_REG(X)\t\t(QLA82XX_CRB_BASE+(X))\n\n#define CRB_CMDPEG_STATE\t\tQLA82XX_REG(0x50)\n#define CRB_RCVPEG_STATE\t\tQLA82XX_REG(0x13c)\n#define BOOT_LOADER_DIMM_STATUS\t\tQLA82XX_REG(0x54)\n#define CRB_DMA_SHIFT\t\t\tQLA82XX_REG(0xcc)\n#define CRB_TEMP_STATE\t\t\tQLA82XX_REG(0x1b4)\n#define QLA82XX_DMA_SHIFT_VALUE\t\t0x55555555\n\n#define QLA82XX_HW_H0_CH_HUB_ADR    0x05\n#define QLA82XX_HW_H1_CH_HUB_ADR    0x0E\n#define QLA82XX_HW_H2_CH_HUB_ADR    0x03\n#define QLA82XX_HW_H3_CH_HUB_ADR    0x01\n#define QLA82XX_HW_H4_CH_HUB_ADR    0x06\n#define QLA82XX_HW_H5_CH_HUB_ADR    0x07\n#define QLA82XX_HW_H6_CH_HUB_ADR    0x08\n\n \n#define QLA82XX_HW_MN_CRB_AGT_ADR   0x15\n#define QLA82XX_HW_MS_CRB_AGT_ADR   0x25\n\n \n#define QLA82XX_HW_PS_CRB_AGT_ADR\t0x73\n#define QLA82XX_HW_QMS_CRB_AGT_ADR\t0x00\n#define QLA82XX_HW_RPMX3_CRB_AGT_ADR\t0x0b\n#define QLA82XX_HW_SQGS0_CRB_AGT_ADR\t0x01\n#define QLA82XX_HW_SQGS1_CRB_AGT_ADR\t0x02\n#define QLA82XX_HW_SQGS2_CRB_AGT_ADR\t0x03\n#define QLA82XX_HW_SQGS3_CRB_AGT_ADR\t0x04\n#define QLA82XX_HW_C2C0_CRB_AGT_ADR\t0x58\n#define QLA82XX_HW_C2C1_CRB_AGT_ADR\t0x59\n#define QLA82XX_HW_C2C2_CRB_AGT_ADR\t0x5a\n#define QLA82XX_HW_RPMX2_CRB_AGT_ADR\t0x0a\n#define QLA82XX_HW_RPMX4_CRB_AGT_ADR\t0x0c\n#define QLA82XX_HW_RPMX7_CRB_AGT_ADR\t0x0f\n#define QLA82XX_HW_RPMX9_CRB_AGT_ADR\t0x12\n#define QLA82XX_HW_SMB_CRB_AGT_ADR\t0x18\n\n \n#define QLA82XX_HW_NIU_CRB_AGT_ADR\t0x31\n#define QLA82XX_HW_I2C0_CRB_AGT_ADR\t0x19\n#define QLA82XX_HW_I2C1_CRB_AGT_ADR\t0x29\n\n#define QLA82XX_HW_SN_CRB_AGT_ADR\t0x10\n#define QLA82XX_HW_I2Q_CRB_AGT_ADR\t0x20\n#define QLA82XX_HW_LPC_CRB_AGT_ADR\t0x22\n#define QLA82XX_HW_ROMUSB_CRB_AGT_ADR\t0x21\n#define QLA82XX_HW_QM_CRB_AGT_ADR\t0x66\n#define QLA82XX_HW_SQG0_CRB_AGT_ADR\t0x60\n#define QLA82XX_HW_SQG1_CRB_AGT_ADR\t0x61\n#define QLA82XX_HW_SQG2_CRB_AGT_ADR\t0x62\n#define QLA82XX_HW_SQG3_CRB_AGT_ADR\t0x63\n#define QLA82XX_HW_RPMX1_CRB_AGT_ADR\t0x09\n#define QLA82XX_HW_RPMX5_CRB_AGT_ADR\t0x0d\n#define QLA82XX_HW_RPMX6_CRB_AGT_ADR\t0x0e\n#define QLA82XX_HW_RPMX8_CRB_AGT_ADR\t0x11\n\n \n#define QLA82XX_HW_PH_CRB_AGT_ADR\t0x1A\n#define QLA82XX_HW_SRE_CRB_AGT_ADR\t0x50\n#define QLA82XX_HW_EG_CRB_AGT_ADR\t0x51\n#define QLA82XX_HW_RPMX0_CRB_AGT_ADR\t0x08\n\n \n#define QLA82XX_HW_PEGN0_CRB_AGT_ADR\t0x40\n#define QLA82XX_HW_PEGN1_CRB_AGT_ADR\t0x41\n#define QLA82XX_HW_PEGN2_CRB_AGT_ADR\t0x42\n#define QLA82XX_HW_PEGN3_CRB_AGT_ADR\t0x43\n#define QLA82XX_HW_PEGNI_CRB_AGT_ADR\t0x44\n#define QLA82XX_HW_PEGND_CRB_AGT_ADR\t0x45\n#define QLA82XX_HW_PEGNC_CRB_AGT_ADR\t0x46\n#define QLA82XX_HW_PEGR0_CRB_AGT_ADR\t0x47\n#define QLA82XX_HW_PEGR1_CRB_AGT_ADR\t0x48\n#define QLA82XX_HW_PEGR2_CRB_AGT_ADR\t0x49\n#define QLA82XX_HW_PEGR3_CRB_AGT_ADR\t0x4a\n#define QLA82XX_HW_PEGN4_CRB_AGT_ADR\t0x4b\n\n \n#define QLA82XX_HW_PEGS0_CRB_AGT_ADR\t0x40\n#define QLA82XX_HW_PEGS1_CRB_AGT_ADR\t0x41\n#define QLA82XX_HW_PEGS2_CRB_AGT_ADR\t0x42\n#define QLA82XX_HW_PEGS3_CRB_AGT_ADR\t0x43\n#define QLA82XX_HW_PEGSI_CRB_AGT_ADR\t0x44\n#define QLA82XX_HW_PEGSD_CRB_AGT_ADR\t0x45\n#define QLA82XX_HW_PEGSC_CRB_AGT_ADR\t0x46\n\n \n#define QLA82XX_HW_CAS0_CRB_AGT_ADR\t0x46\n#define QLA82XX_HW_CAS1_CRB_AGT_ADR\t0x47\n#define QLA82XX_HW_CAS2_CRB_AGT_ADR\t0x48\n#define QLA82XX_HW_CAS3_CRB_AGT_ADR\t0x49\n#define QLA82XX_HW_NCM_CRB_AGT_ADR\t0x16\n#define QLA82XX_HW_TMR_CRB_AGT_ADR\t0x17\n#define QLA82XX_HW_XDMA_CRB_AGT_ADR\t0x05\n#define QLA82XX_HW_OCM0_CRB_AGT_ADR\t0x06\n#define QLA82XX_HW_OCM1_CRB_AGT_ADR\t0x07\n\n \n \n#define QLA82XX_HW_PX_MAP_CRB_PH\t0\n#define QLA82XX_HW_PX_MAP_CRB_PS\t1\n#define QLA82XX_HW_PX_MAP_CRB_MN\t2\n#define QLA82XX_HW_PX_MAP_CRB_MS\t3\n#define QLA82XX_HW_PX_MAP_CRB_SRE\t5\n#define QLA82XX_HW_PX_MAP_CRB_NIU\t6\n#define QLA82XX_HW_PX_MAP_CRB_QMN\t7\n#define QLA82XX_HW_PX_MAP_CRB_SQN0\t8\n#define QLA82XX_HW_PX_MAP_CRB_SQN1\t9\n#define QLA82XX_HW_PX_MAP_CRB_SQN2\t10\n#define QLA82XX_HW_PX_MAP_CRB_SQN3\t11\n#define QLA82XX_HW_PX_MAP_CRB_QMS\t12\n#define QLA82XX_HW_PX_MAP_CRB_SQS0\t13\n#define QLA82XX_HW_PX_MAP_CRB_SQS1\t14\n#define QLA82XX_HW_PX_MAP_CRB_SQS2\t15\n#define QLA82XX_HW_PX_MAP_CRB_SQS3\t16\n#define QLA82XX_HW_PX_MAP_CRB_PGN0\t17\n#define QLA82XX_HW_PX_MAP_CRB_PGN1\t18\n#define QLA82XX_HW_PX_MAP_CRB_PGN2\t19\n#define QLA82XX_HW_PX_MAP_CRB_PGN3\t20\n#define QLA82XX_HW_PX_MAP_CRB_PGN4\tQLA82XX_HW_PX_MAP_CRB_SQS2\n#define QLA82XX_HW_PX_MAP_CRB_PGND\t21\n#define QLA82XX_HW_PX_MAP_CRB_PGNI\t22\n#define QLA82XX_HW_PX_MAP_CRB_PGS0\t23\n#define QLA82XX_HW_PX_MAP_CRB_PGS1\t24\n#define QLA82XX_HW_PX_MAP_CRB_PGS2\t25\n#define QLA82XX_HW_PX_MAP_CRB_PGS3\t26\n#define QLA82XX_HW_PX_MAP_CRB_PGSD\t27\n#define QLA82XX_HW_PX_MAP_CRB_PGSI\t28\n#define QLA82XX_HW_PX_MAP_CRB_SN\t29\n#define QLA82XX_HW_PX_MAP_CRB_EG\t31\n#define QLA82XX_HW_PX_MAP_CRB_PH2\t32\n#define QLA82XX_HW_PX_MAP_CRB_PS2\t33\n#define QLA82XX_HW_PX_MAP_CRB_CAM\t34\n#define QLA82XX_HW_PX_MAP_CRB_CAS0\t35\n#define QLA82XX_HW_PX_MAP_CRB_CAS1\t36\n#define QLA82XX_HW_PX_MAP_CRB_CAS2\t37\n#define QLA82XX_HW_PX_MAP_CRB_C2C0\t38\n#define QLA82XX_HW_PX_MAP_CRB_C2C1\t39\n#define QLA82XX_HW_PX_MAP_CRB_TIMR\t40\n#define QLA82XX_HW_PX_MAP_CRB_RPMX1\t42\n#define QLA82XX_HW_PX_MAP_CRB_RPMX2\t43\n#define QLA82XX_HW_PX_MAP_CRB_RPMX3\t44\n#define QLA82XX_HW_PX_MAP_CRB_RPMX4\t45\n#define QLA82XX_HW_PX_MAP_CRB_RPMX5\t46\n#define QLA82XX_HW_PX_MAP_CRB_RPMX6\t47\n#define QLA82XX_HW_PX_MAP_CRB_RPMX7\t48\n#define QLA82XX_HW_PX_MAP_CRB_XDMA\t49\n#define QLA82XX_HW_PX_MAP_CRB_I2Q\t50\n#define QLA82XX_HW_PX_MAP_CRB_ROMUSB\t51\n#define QLA82XX_HW_PX_MAP_CRB_CAS3\t52\n#define QLA82XX_HW_PX_MAP_CRB_RPMX0\t53\n#define QLA82XX_HW_PX_MAP_CRB_RPMX8\t54\n#define QLA82XX_HW_PX_MAP_CRB_RPMX9\t55\n#define QLA82XX_HW_PX_MAP_CRB_OCM0\t56\n#define QLA82XX_HW_PX_MAP_CRB_OCM1\t57\n#define QLA82XX_HW_PX_MAP_CRB_SMB\t58\n#define QLA82XX_HW_PX_MAP_CRB_I2C0\t59\n#define QLA82XX_HW_PX_MAP_CRB_I2C1\t60\n#define QLA82XX_HW_PX_MAP_CRB_LPC\t61\n#define QLA82XX_HW_PX_MAP_CRB_PGNC\t62\n#define QLA82XX_HW_PX_MAP_CRB_PGR0\t63\n#define QLA82XX_HW_PX_MAP_CRB_PGR1\t4\n#define QLA82XX_HW_PX_MAP_CRB_PGR2\t30\n#define QLA82XX_HW_PX_MAP_CRB_PGR3\t41\n\n \n \n\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_MN\t    ((QLA82XX_HW_H0_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_MN_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PH\t    ((QLA82XX_HW_H0_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PH_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_MS\t    ((QLA82XX_HW_H0_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_MS_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PS\t    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PS_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SS\t    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SS_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX3    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_QMS\t    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_QMS_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQS0     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQGS0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQS1     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQGS1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQS2     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQGS2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQS3     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQGS3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_C2C0     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_C2C0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_C2C1     ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_C2C1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX2    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX4    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX4_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX7    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX7_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX9    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX9_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SMB\t    ((QLA82XX_HW_H1_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SMB_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_NIU\t    ((QLA82XX_HW_H2_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_NIU_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_I2C0     ((QLA82XX_HW_H2_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_I2C0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_I2C1     ((QLA82XX_HW_H2_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_I2C1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SRE\t    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SRE_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_EG\t    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_EG_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX0    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_QMN\t    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_QM_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQN0     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQG0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQN1     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQG1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQN2     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQG2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SQN3     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SQG3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX1    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX5    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX5_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX6    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX6_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_RPMX8    ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_RPMX8_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_CAS0     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_CAS0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_CAS1     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_CAS1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_CAS2     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_CAS2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_CAS3     ((QLA82XX_HW_H3_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_CAS3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGNI     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGNI_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGND     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGND_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGN0     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGN0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGN1     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGN1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGN2     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGN2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGN3     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGN3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGN4\t   ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGN4_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGNC     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGNC_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGR0     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGR0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGR1     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGR1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGR2     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGR2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGR3     ((QLA82XX_HW_H4_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGR3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGSI     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGSI_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGSD     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGSD_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGS0     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGS0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGS1     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGS1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGS2     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGS2_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGS3     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGS3_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_PGSC     ((QLA82XX_HW_H5_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_PEGSC_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_CAM\t    ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_NCM_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_TIMR     ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_TMR_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_XDMA     ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_XDMA_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_SN\t    ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_SN_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_I2Q\t    ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_I2Q_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_ROMUSB   ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_ROMUSB_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_OCM0     ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_OCM0_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_OCM1     ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_OCM1_CRB_AGT_ADR)\n#define QLA82XX_HW_CRB_HUB_AGT_ADR_LPC\t    ((QLA82XX_HW_H6_CH_HUB_ADR << 7) | \\\n\tQLA82XX_HW_LPC_CRB_AGT_ADR)\n\n#define ROMUSB_GLB\t\t\t\t(QLA82XX_CRB_ROMUSB + 0x00000)\n#define QLA82XX_ROMUSB_GLB_PEGTUNE_DONE\t\t(ROMUSB_GLB + 0x005c)\n#define QLA82XX_ROMUSB_GLB_STATUS\t\t(ROMUSB_GLB + 0x0004)\n#define QLA82XX_ROMUSB_GLB_SW_RESET\t\t(ROMUSB_GLB + 0x0008)\n#define QLA82XX_ROMUSB_ROM_ADDRESS\t\t(ROMUSB_ROM + 0x0008)\n#define QLA82XX_ROMUSB_ROM_WDATA\t\t(ROMUSB_ROM + 0x000c)\n#define QLA82XX_ROMUSB_ROM_ABYTE_CNT\t\t(ROMUSB_ROM + 0x0010)\n#define QLA82XX_ROMUSB_ROM_DUMMY_BYTE_CNT\t(ROMUSB_ROM + 0x0014)\n#define QLA82XX_ROMUSB_ROM_RDATA\t\t(ROMUSB_ROM + 0x0018)\n\n#define ROMUSB_ROM\t\t\t\t(QLA82XX_CRB_ROMUSB + 0x10000)\n#define QLA82XX_ROMUSB_ROM_INSTR_OPCODE\t\t(ROMUSB_ROM + 0x0004)\n#define QLA82XX_ROMUSB_GLB_CAS_RST\t\t(ROMUSB_GLB + 0x0038)\n\n#define QLA82XX_PCI_CRB_WINDOWSIZE 0x00100000\t  \n#define QLA82XX_PCI_CRB_WINDOW(A) \\\n\t(QLA82XX_PCI_CRBSPACE + (A)*QLA82XX_PCI_CRB_WINDOWSIZE)\n#define QLA82XX_CRB_C2C_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_C2C0)\n#define QLA82XX_CRB_C2C_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_C2C1)\n#define QLA82XX_CRB_C2C_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_C2C2)\n#define QLA82XX_CRB_CAM \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_CAM)\n#define QLA82XX_CRB_CASPER \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_CAS)\n#define QLA82XX_CRB_CASPER_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_CAS0)\n#define QLA82XX_CRB_CASPER_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_CAS1)\n#define QLA82XX_CRB_CASPER_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_CAS2)\n#define QLA82XX_CRB_DDR_MD \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_MS)\n#define QLA82XX_CRB_DDR_NET \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_MN)\n#define QLA82XX_CRB_EPG \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_EG)\n#define QLA82XX_CRB_I2Q \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_I2Q)\n#define QLA82XX_CRB_NIU \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_NIU)\n\n#define QLA82XX_CRB_PCIX_HOST \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PH)\n#define QLA82XX_CRB_PCIX_HOST2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PH2)\n#define QLA82XX_CRB_PCIX_MD \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PS)\n#define QLA82XX_CRB_PCIE \\\n\tQLA82XX_CRB_PCIX_MD\n\n \n#define QLA82XX_CRB_PCIE2\t \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PS2)\n#define QLA82XX_CRB_PEG_MD_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGS0)\n#define QLA82XX_CRB_PEG_MD_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGS1)\n#define QLA82XX_CRB_PEG_MD_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGS2)\n#define QLA82XX_CRB_PEG_MD_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGS3)\n#define QLA82XX_CRB_PEG_MD_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGS3)\n#define QLA82XX_CRB_PEG_MD_D \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGSD)\n#define QLA82XX_CRB_PEG_MD_I \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGSI)\n#define QLA82XX_CRB_PEG_NET_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGN0)\n#define QLA82XX_CRB_PEG_NET_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGN1)\n#define QLA82XX_CRB_PEG_NET_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGN2)\n#define QLA82XX_CRB_PEG_NET_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGN3)\n#define QLA82XX_CRB_PEG_NET_4 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGN4)\n#define QLA82XX_CRB_PEG_NET_D \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGND)\n#define QLA82XX_CRB_PEG_NET_I \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_PGNI)\n#define QLA82XX_CRB_PQM_MD \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_QMS)\n#define QLA82XX_CRB_PQM_NET \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_QMN)\n#define QLA82XX_CRB_QDR_MD \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SS)\n#define QLA82XX_CRB_QDR_NET \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SN)\n#define QLA82XX_CRB_ROMUSB \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_ROMUSB)\n#define QLA82XX_CRB_RPMX_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX0)\n#define QLA82XX_CRB_RPMX_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX1)\n#define QLA82XX_CRB_RPMX_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX2)\n#define QLA82XX_CRB_RPMX_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX3)\n#define QLA82XX_CRB_RPMX_4 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX4)\n#define QLA82XX_CRB_RPMX_5 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX5)\n#define QLA82XX_CRB_RPMX_6 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX6)\n#define QLA82XX_CRB_RPMX_7 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_RPMX7)\n#define QLA82XX_CRB_SQM_MD_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQS0)\n#define QLA82XX_CRB_SQM_MD_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQS1)\n#define QLA82XX_CRB_SQM_MD_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQS2)\n#define QLA82XX_CRB_SQM_MD_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQS3)\n#define QLA82XX_CRB_SQM_NET_0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQN0)\n#define QLA82XX_CRB_SQM_NET_1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQN1)\n#define QLA82XX_CRB_SQM_NET_2 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQN2)\n#define QLA82XX_CRB_SQM_NET_3 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SQN3)\n#define QLA82XX_CRB_SRE \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SRE)\n#define QLA82XX_CRB_TIMER \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_TIMR)\n#define QLA82XX_CRB_XDMA \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_XDMA)\n#define QLA82XX_CRB_I2C0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_I2C0)\n#define QLA82XX_CRB_I2C1 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_I2C1)\n#define QLA82XX_CRB_OCM0 \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_OCM0)\n#define QLA82XX_CRB_SMB \\\n\tQLA82XX_PCI_CRB_WINDOW(QLA82XX_HW_PX_MAP_CRB_SMB)\n#define QLA82XX_CRB_MAX \\\n\tQLA82XX_PCI_CRB_WINDOW(64)\n\n \n#define QLA82XX_ADDR_DDR_NET\t\t(0x0000000000000000ULL)\n#define QLA82XX_ADDR_DDR_NET_MAX\t(0x000000000fffffffULL)\n\n \n \n#define QLA82XX_P2_ADDR_PCIE\t\t(0x0000000800000000ULL)\n#define QLA82XX_P3_ADDR_PCIE\t\t(0x0000008000000000ULL)\n#define QLA82XX_ADDR_PCIE_MAX\t\t(0x0000000FFFFFFFFFULL)\n#define QLA82XX_ADDR_OCM0\t\t(0x0000000200000000ULL)\n#define QLA82XX_ADDR_OCM0_MAX\t\t(0x00000002000fffffULL)\n#define QLA82XX_ADDR_OCM1\t\t(0x0000000200400000ULL)\n#define QLA82XX_ADDR_OCM1_MAX\t\t(0x00000002004fffffULL)\n#define QLA82XX_ADDR_QDR_NET\t\t(0x0000000300000000ULL)\n#define QLA82XX_P3_ADDR_QDR_NET_MAX\t(0x0000000303ffffffULL)\n\n#define QLA82XX_PCI_CRBSPACE\t\t0x06000000UL\n#define QLA82XX_PCI_DIRECT_CRB\t\t0x04400000UL\n#define QLA82XX_PCI_CAMQM\t\t0x04800000UL\n#define QLA82XX_PCI_CAMQM_MAX\t\t0x04ffffffUL\n#define QLA82XX_PCI_DDR_NET\t\t0x00000000UL\n#define QLA82XX_PCI_QDR_NET\t\t0x04000000UL\n#define QLA82XX_PCI_QDR_NET_MAX\t\t0x043fffffUL\n\n \n#define MIU_CONTROL\t\t\t(0x000)\n#define MIU_TAG\t\t\t\t(0x004)\n#define MIU_TEST_AGT_CTRL\t\t(0x090)\n#define MIU_TEST_AGT_ADDR_LO\t\t(0x094)\n#define MIU_TEST_AGT_ADDR_HI\t\t(0x098)\n#define MIU_TEST_AGT_WRDATA_LO\t\t(0x0a0)\n#define MIU_TEST_AGT_WRDATA_HI\t\t(0x0a4)\n#define MIU_TEST_AGT_WRDATA(i)\t\t(0x0a0+(4*(i)))\n#define MIU_TEST_AGT_RDDATA_LO\t\t(0x0a8)\n#define MIU_TEST_AGT_RDDATA_HI\t\t(0x0ac)\n#define MIU_TEST_AGT_RDDATA(i)\t\t(0x0a8+(4*(i)))\n#define MIU_TEST_AGT_ADDR_MASK\t\t0xfffffff8\n#define MIU_TEST_AGT_UPPER_ADDR(off)\t(0)\n\n \n#define MIU_TA_CTL_START\t1\n#define MIU_TA_CTL_ENABLE\t2\n#define MIU_TA_CTL_WRITE\t4\n#define MIU_TA_CTL_BUSY\t\t8\n\n \n# define QLA82XX_CAM_RAM_BASE\t\t(QLA82XX_CRB_CAM + 0x02000)\n# define QLA82XX_CAM_RAM(reg)\t\t(QLA82XX_CAM_RAM_BASE + (reg))\n\n#define QLA82XX_PORT_MODE_ADDR\t\t(QLA82XX_CAM_RAM(0x24))\n#define QLA82XX_PEG_HALT_STATUS1\t(QLA82XX_CAM_RAM(0xa8))\n#define QLA82XX_PEG_HALT_STATUS2\t(QLA82XX_CAM_RAM(0xac))\n#define QLA82XX_PEG_ALIVE_COUNTER\t(QLA82XX_CAM_RAM(0xb0))\n\n#define QLA82XX_CAMRAM_DB1\t\t(QLA82XX_CAM_RAM(0x1b8))\n#define QLA82XX_CAMRAM_DB2\t\t(QLA82XX_CAM_RAM(0x1bc))\n\n#define HALT_STATUS_UNRECOVERABLE\t0x80000000\n#define HALT_STATUS_RECOVERABLE\t\t0x40000000\n\n \n#define QLA82XX_CRB_DRV_ACTIVE\t     (QLA82XX_CAM_RAM(0x138))\n#define QLA82XX_CRB_DEV_STATE\t     (QLA82XX_CAM_RAM(0x140))\n#define QLA82XX_CRB_DRV_STATE\t     (QLA82XX_CAM_RAM(0x144))\n#define QLA82XX_CRB_DRV_SCRATCH      (QLA82XX_CAM_RAM(0x148))\n#define QLA82XX_CRB_DEV_PART_INFO    (QLA82XX_CAM_RAM(0x14c))\n#define QLA82XX_CRB_DRV_IDC_VERSION  (QLA82XX_CAM_RAM(0x174))\n\n \nenum {\n\tQLA8XXX_DEV_UNKNOWN,\n\tQLA8XXX_DEV_COLD,\n\tQLA8XXX_DEV_INITIALIZING,\n\tQLA8XXX_DEV_READY,\n\tQLA8XXX_DEV_NEED_RESET,\n\tQLA8XXX_DEV_NEED_QUIESCENT,\n\tQLA8XXX_DEV_FAILED,\n\tQLA8XXX_DEV_QUIESCENT,\n\tMAX_STATES,  \n};\n\n#define QLA8XXX_BAD_VALUE\t\t0xbad0bad0\n\n#define QLA82XX_IDC_VERSION\t\t\t1\n#define QLA82XX_ROM_DEV_INIT_TIMEOUT\t\t30\n#define QLA82XX_ROM_DRV_RESET_ACK_TIMEOUT\t10\n\n#define QLA82XX_ROM_LOCK_ID\t\t(QLA82XX_CAM_RAM(0x100))\n#define QLA82XX_CRB_WIN_LOCK_ID\t\t(QLA82XX_CAM_RAM(0x124))\n#define QLA82XX_FW_VERSION_MAJOR\t(QLA82XX_CAM_RAM(0x150))\n#define QLA82XX_FW_VERSION_MINOR\t(QLA82XX_CAM_RAM(0x154))\n#define QLA82XX_FW_VERSION_SUB\t\t(QLA82XX_CAM_RAM(0x158))\n#define QLA82XX_PCIE_REG(reg)\t\t(QLA82XX_CRB_PCIE + (reg))\n\n#define PCIE_SETUP_FUNCTION\t\t(0x12040)\n#define PCIE_SETUP_FUNCTION2\t\t(0x12048)\n\n#define QLA82XX_PCIX_PS_REG(reg)\t(QLA82XX_CRB_PCIX_MD + (reg))\n#define QLA82XX_PCIX_PS2_REG(reg)\t(QLA82XX_CRB_PCIE2 + (reg))\n\n#define PCIE_SEM2_LOCK\t     (0x1c010)\t \n#define PCIE_SEM2_UNLOCK     (0x1c014)\t \n#define PCIE_SEM5_LOCK\t     (0x1c028)\t \n#define PCIE_SEM5_UNLOCK     (0x1c02c)\t \n#define PCIE_SEM7_LOCK\t     (0x1c038)\t \n#define PCIE_SEM7_UNLOCK     (0x1c03c)\t \n\n \n#define QLA82XX_DRVST_NOT_RDY\t\t0\n#define\tQLA82XX_DRVST_RST_RDY\t\t1\n#define QLA82XX_DRVST_QSNT_RDY\t\t2\n\n \n#define QLA82XX_DRV_NOT_ACTIVE\t\t0\n#define QLA82XX_DRV_ACTIVE\t\t1\n\n \n#define PCI_DEVICE_ID_QLOGIC_ISP8021\t\t0x8021\n#define PCI_DEVICE_ID_QLOGIC_ISP8044\t\t0x8044\n\n#define QLA82XX_MSIX_TBL_SPACE\t\t\t8192\n#define QLA82XX_PCI_REG_MSIX_TBL\t\t0x44\n#define QLA82XX_PCI_MSIX_CONTROL\t\t0x40\n\nstruct crb_128M_2M_sub_block_map {\n\tunsigned valid;\n\tunsigned start_128M;\n\tunsigned end_128M;\n\tunsigned start_2M;\n};\n\nstruct crb_128M_2M_block_map {\n\tstruct crb_128M_2M_sub_block_map sub_block[16];\n};\n\nstruct crb_addr_pair {\n\tlong addr;\n\tlong data;\n};\n\n#define ADDR_ERROR ((unsigned long) 0xffffffff)\n#define MAX_CTL_CHECK\t1000\n\n \n\n \n#define PCIX_TARGET_STATUS\t(0x10118)\n#define PCIX_TARGET_STATUS_F1\t(0x10160)\n#define PCIX_TARGET_STATUS_F2\t(0x10164)\n#define PCIX_TARGET_STATUS_F3\t(0x10168)\n#define PCIX_TARGET_STATUS_F4\t(0x10360)\n#define PCIX_TARGET_STATUS_F5\t(0x10364)\n#define PCIX_TARGET_STATUS_F6\t(0x10368)\n#define PCIX_TARGET_STATUS_F7\t(0x1036c)\n\n#define PCIX_TARGET_MASK\t(0x10128)\n#define PCIX_TARGET_MASK_F1\t(0x10170)\n#define PCIX_TARGET_MASK_F2\t(0x10174)\n#define PCIX_TARGET_MASK_F3\t(0x10178)\n#define PCIX_TARGET_MASK_F4\t(0x10370)\n#define PCIX_TARGET_MASK_F5\t(0x10374)\n#define PCIX_TARGET_MASK_F6\t(0x10378)\n#define PCIX_TARGET_MASK_F7\t(0x1037c)\n\n \n#define PCIX_MSI_F0\t\t(0x13000)\n#define PCIX_MSI_F1\t\t(0x13004)\n#define PCIX_MSI_F2\t\t(0x13008)\n#define PCIX_MSI_F3\t\t(0x1300c)\n#define PCIX_MSI_F4\t\t(0x13010)\n#define PCIX_MSI_F5\t\t(0x13014)\n#define PCIX_MSI_F6\t\t(0x13018)\n#define PCIX_MSI_F7\t\t(0x1301c)\n#define PCIX_MSI_F(FUNC)\t(0x13000 + ((FUNC) * 4))\n#define PCIX_INT_VECTOR\t\t(0x10100)\n#define PCIX_INT_MASK\t\t(0x10104)\n\n \n#define PCIE_MISCCFG_RC\t\t(0x1206c)\n\n#define ISR_INT_TARGET_STATUS \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS))\n#define ISR_INT_TARGET_STATUS_F1 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F1))\n#define ISR_INT_TARGET_STATUS_F2 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F2))\n#define ISR_INT_TARGET_STATUS_F3 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F3))\n#define ISR_INT_TARGET_STATUS_F4 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F4))\n#define ISR_INT_TARGET_STATUS_F5 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F5))\n#define ISR_INT_TARGET_STATUS_F6 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F6))\n#define ISR_INT_TARGET_STATUS_F7 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_STATUS_F7))\n\n#define ISR_INT_TARGET_MASK \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK))\n#define ISR_INT_TARGET_MASK_F1 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F1))\n#define ISR_INT_TARGET_MASK_F2 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F2))\n#define ISR_INT_TARGET_MASK_F3 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F3))\n#define ISR_INT_TARGET_MASK_F4 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F4))\n#define ISR_INT_TARGET_MASK_F5 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F5))\n#define ISR_INT_TARGET_MASK_F6 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F6))\n#define ISR_INT_TARGET_MASK_F7 \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_TARGET_MASK_F7))\n\n#define ISR_INT_VECTOR \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_INT_VECTOR))\n#define ISR_INT_MASK \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_INT_MASK))\n#define ISR_INT_STATE_REG \\\n\t(QLA82XX_PCIX_PS_REG(PCIE_MISCCFG_RC))\n\n#define\tISR_MSI_INT_TRIGGER(FUNC) \\\n\t(QLA82XX_PCIX_PS_REG(PCIX_MSI_F(FUNC)))\n\n#define\tISR_IS_LEGACY_INTR_IDLE(VAL)\t\t(((VAL) & 0x300) == 0)\n#define\tISR_IS_LEGACY_INTR_TRIGGERED(VAL)\t(((VAL) & 0x300) == 0x200)\n\n \n#define\tPCIX_INT_VECTOR_BIT_F0\t0x0080\n#define\tPCIX_INT_VECTOR_BIT_F1\t0x0100\n#define\tPCIX_INT_VECTOR_BIT_F2\t0x0200\n#define\tPCIX_INT_VECTOR_BIT_F3\t0x0400\n#define\tPCIX_INT_VECTOR_BIT_F4\t0x0800\n#define\tPCIX_INT_VECTOR_BIT_F5\t0x1000\n#define\tPCIX_INT_VECTOR_BIT_F6\t0x2000\n#define\tPCIX_INT_VECTOR_BIT_F7\t0x4000\n\nstruct qla82xx_legacy_intr_set {\n\tuint32_t\tint_vec_bit;\n\tuint32_t\ttgt_status_reg;\n\tuint32_t\ttgt_mask_reg;\n\tuint32_t\tpci_int_reg;\n};\n\n#define QLA82XX_LEGACY_INTR_CONFIG\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F0,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS,\t\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(0) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F1,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F1,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F1,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(1) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F2,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F2,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F2,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(2) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F3,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F3,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F3,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(3) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F4,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F4,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F4,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(4) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F5,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F5,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F5,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(5) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F6,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F6,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F6,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(6) },\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\t\\\n\t\t.int_vec_bit\t=\tPCIX_INT_VECTOR_BIT_F7,\t\t\\\n\t\t.tgt_status_reg =\tISR_INT_TARGET_STATUS_F7,\t\\\n\t\t.tgt_mask_reg\t=\tISR_INT_TARGET_MASK_F7,\t\t\\\n\t\t.pci_int_reg\t=\tISR_MSI_INT_TRIGGER(7) },\t\\\n}\n\n#define BRDCFG_START\t\t0x4000\n#define\tBOOTLD_START\t\t0x10000\n#define\tIMAGE_START\t\t0x100000\n#define FLASH_ADDR_START\t0x43000\n\n \n#define QLA82XX_BDINFO_MAGIC\t0x12345678\n#define QLA82XX_FW_MAGIC_OFFSET\t(BRDCFG_START + 0x128)\n#define FW_SIZE_OFFSET\t\t(0x3e840c)\n#define QLA82XX_FW_MIN_SIZE\t0x3fffff\n\n \n#define QLA82XX_URI_FW_MIN_SIZE\t\t\t0xc8000\n#define QLA82XX_URI_DIR_SECT_PRODUCT_TBL\t0x0\n#define QLA82XX_URI_DIR_SECT_BOOTLD\t\t0x6\n#define QLA82XX_URI_DIR_SECT_FW\t\t\t0x7\n\n \n#define QLA82XX_URI_CHIP_REV_OFF\t10\n#define QLA82XX_URI_FLAGS_OFF\t\t11\n#define QLA82XX_URI_BIOS_VERSION_OFF\t12\n#define QLA82XX_URI_BOOTLD_IDX_OFF\t27\n#define QLA82XX_URI_FIRMWARE_IDX_OFF\t29\n\nstruct qla82xx_uri_table_desc{\n\t__le32\tfindex;\n\t__le32\tnum_entries;\n\t__le32\tentry_size;\n\t__le32\treserved[5];\n};\n\nstruct qla82xx_uri_data_desc{\n\t__le32\tfindex;\n\t__le32\tsize;\n\t__le32\treserved[5];\n};\n\n \n\n#define QLA82XX_UNIFIED_ROMIMAGE\t3\n#define QLA82XX_FLASH_ROMIMAGE\t\t4\n#define QLA82XX_UNKNOWN_ROMIMAGE\t0xff\n\n#define MIU_TEST_AGT_WRDATA_UPPER_LO\t\t(0x0b0)\n#define\tMIU_TEST_AGT_WRDATA_UPPER_HI\t\t(0x0b4)\n\n \n#define REQUEST_ENTRY_CNT_82XX\t\t128\t \n#define RESPONSE_ENTRY_CNT_82XX\t\t128\t \n\n \nstruct device_reg_82xx {\n\t__le32\treq_q_out[64];\t\t \n\t__le32\trsp_q_in[64];\t\t \n\t__le32\trsp_q_out[64];\t\t \n\n\t__le16\tmailbox_in[32];\t\t \n\t__le16\tunused_1[32];\n\t__le32\thint;\t\t\t \n#define\tHINT_MBX_INT_PENDING\tBIT_0\n\t__le16\tunused_2[62];\n\t__le16\tmailbox_out[32];\t \n\t__le32\tunused_3[48];\n\n\t__le32\thost_status;\t\t \n#define HSRX_RISC_INT\t\tBIT_15\t \n#define HSRX_RISC_PAUSED\tBIT_8\t \n\t__le32\thost_int;\t\t \n#define ISRX_NX_RISC_INT\tBIT_0\t \n};\n\nstruct fcp_cmnd {\n\tstruct scsi_lun lun;\n\tuint8_t crn;\n\tuint8_t task_attribute;\n\tuint8_t task_management;\n\tuint8_t additional_cdb_len;\n#define QLA_CDB_BUF_SIZE  256\n#define QLA_FCP_DL_SIZE   4\n\tuint8_t cdb[QLA_CDB_BUF_SIZE + QLA_FCP_DL_SIZE];  \n};\n\nstruct dsd_dma {\n\tstruct list_head list;\n\tdma_addr_t dsd_list_dma;\n\tvoid *dsd_addr;\n};\n\n#define QLA_DSDS_PER_IOCB\t37\n#define QLA_DSD_SIZE\t\t12\nstruct ct6_dsd {\n\tuint16_t fcp_cmnd_len;\n\tdma_addr_t fcp_cmnd_dma;\n\tstruct fcp_cmnd *fcp_cmnd;\n\tint dsd_use_cnt;\n\tstruct list_head dsd_list;\n};\n\n#define MBC_TOGGLE_INTERRUPT\t0x10\n#define MBC_SET_LED_CONFIG\t0x125\t \n#define MBC_GET_LED_CONFIG\t0x126\t \n\n \n#define FLT_REG_BOOTLOAD_82XX\t0x72\n#define FLT_REG_BOOT_CODE_82XX\t0x78\n#define FLT_REG_FW_82XX\t\t0x74\n#define FLT_REG_GOLD_FW_82XX\t0x75\n#define FLT_REG_VPD_8XXX\t0x81\n\n#define\tFA_VPD_SIZE_82XX\t0x400\n\n#define FA_FLASH_LAYOUT_ADDR_82\t0xFC400\n\n \n#define M25P_INSTR_WREN\t\t0x06\n#define M25P_INSTR_WRDI\t\t0x04\n#define M25P_INSTR_RDID\t\t0x9f\n#define M25P_INSTR_RDSR\t\t0x05\n#define M25P_INSTR_WRSR\t\t0x01\n#define M25P_INSTR_READ\t\t0x03\n#define M25P_INSTR_FAST_READ\t0x0b\n#define M25P_INSTR_PP\t\t0x02\n#define M25P_INSTR_SE\t\t0xd8\n#define M25P_INSTR_BE\t\t0xc7\n#define M25P_INSTR_DP\t\t0xb9\n#define M25P_INSTR_RES\t\t0xab\n\n \n\n \n#define QLA82XX_MINIDUMP_VERSION         0x10101\n\n \n#define QLA82XX_RDNOP                   0\n#define QLA82XX_RDCRB                   1\n#define QLA82XX_RDMUX                   2\n#define QLA82XX_QUEUE                   3\n#define QLA82XX_BOARD                   4\n#define QLA82XX_RDSRE                   5\n#define QLA82XX_RDOCM                   6\n#define QLA82XX_CACHE                  10\n#define QLA82XX_L1DAT                  11\n#define QLA82XX_L1INS                  12\n#define QLA82XX_L2DTG                  21\n#define QLA82XX_L2ITG                  22\n#define QLA82XX_L2DAT                  23\n#define QLA82XX_L2INS                  24\n#define QLA82XX_RDROM                  71\n#define QLA82XX_RDMEM                  72\n#define QLA82XX_CNTRL                  98\n#define QLA82XX_TLHDR                  99\n#define QLA82XX_RDEND                  255\n#define QLA8044_POLLRD\t\t\t35\n#define QLA8044_RDMUX2\t\t\t36\n#define QLA8044_L1DTG\t\t\t8\n#define QLA8044_L1ITG\t\t\t9\n#define QLA8044_POLLRDMWR\t\t37\n\n \n#define QLA82XX_DBG_OPCODE_WR        0x01\n#define QLA82XX_DBG_OPCODE_RW        0x02\n#define QLA82XX_DBG_OPCODE_AND       0x04\n#define QLA82XX_DBG_OPCODE_OR        0x08\n#define QLA82XX_DBG_OPCODE_POLL      0x10\n#define QLA82XX_DBG_OPCODE_RDSTATE   0x20\n#define QLA82XX_DBG_OPCODE_WRSTATE   0x40\n#define QLA82XX_DBG_OPCODE_MDSTATE   0x80\n\n \n\n \n\n#define QLA82XX_DBG_STATE_ARRAY_LEN        16\n#define QLA82XX_DBG_CAP_SIZE_ARRAY_LEN     8\n#define QLA82XX_DBG_RSVD_ARRAY_LEN         8\n\n \n#define QLA82XX_DBG_SKIPPED_FLAG\t0x80\t \n#define\tQLA82XX_DEFAULT_CAP_MASK\t0xFF\t \n\nstruct qla82xx_md_template_hdr {\n\tuint32_t entry_type;\n\tuint32_t first_entry_offset;\n\tuint32_t size_of_template;\n\tuint32_t capture_debug_level;\n\n\tuint32_t num_of_entries;\n\tuint32_t version;\n\tuint32_t driver_timestamp;\n\tuint32_t template_checksum;\n\n\tuint32_t driver_capture_mask;\n\tuint32_t driver_info[3];\n\n\tuint32_t saved_state_array[QLA82XX_DBG_STATE_ARRAY_LEN];\n\tuint32_t capture_size_array[QLA82XX_DBG_CAP_SIZE_ARRAY_LEN];\n\n\t \n\tuint32_t markers_array[QLA82XX_DBG_RSVD_ARRAY_LEN];\n\tuint32_t num_of_free_entries;\t \n\tuint32_t free_entry_offset;\t \n\tuint32_t total_table_size;\t \n\tuint32_t bkup_table_offset;\t \n} __packed;\n\n \n\n \ntypedef struct qla82xx_md_entry_hdr {\n\tuint32_t entry_type;\n\tuint32_t entry_size;\n\tuint32_t entry_capture_size;\n\tstruct {\n\t\tuint8_t entry_capture_mask;\n\t\tuint8_t entry_code;\n\t\tuint8_t driver_code;\n\t\tuint8_t driver_flags;\n\t} d_ctrl;\n} __packed qla82xx_md_entry_hdr_t;\n\n \nstruct qla82xx_md_entry_crb {\n\tqla82xx_md_entry_hdr_t h;\n\tuint32_t addr;\n\tstruct {\n\t\tuint8_t addr_stride;\n\t\tuint8_t state_index_a;\n\t\tuint16_t poll_timeout;\n\t} crb_strd;\n\n\tuint32_t data_size;\n\tuint32_t op_count;\n\n\tstruct {\n\t\tuint8_t opcode;\n\t\tuint8_t state_index_v;\n\t\tuint8_t shl;\n\t\tuint8_t shr;\n\t} crb_ctrl;\n\n\tuint32_t value_1;\n\tuint32_t value_2;\n\tuint32_t value_3;\n} __packed;\n\n \nstruct qla82xx_md_entry_cache {\n\tqla82xx_md_entry_hdr_t h;\n\n\tuint32_t tag_reg_addr;\n\tstruct {\n\t\tuint16_t tag_value_stride;\n\t\tuint16_t init_tag_value;\n\t} addr_ctrl;\n\n\tuint32_t data_size;\n\tuint32_t op_count;\n\n\tuint32_t control_addr;\n\tstruct {\n\t\tuint16_t write_value;\n\t\tuint8_t poll_mask;\n\t\tuint8_t poll_wait;\n\t} cache_ctrl;\n\n\tuint32_t read_addr;\n\tstruct {\n\t\tuint8_t read_addr_stride;\n\t\tuint8_t read_addr_cnt;\n\t\tuint16_t rsvd_1;\n\t} read_ctrl;\n} __packed;\n\n \nstruct qla82xx_md_entry_rdocm {\n\tqla82xx_md_entry_hdr_t h;\n\n\tuint32_t rsvd_0;\n\tuint32_t rsvd_1;\n\tuint32_t data_size;\n\tuint32_t op_count;\n\n\tuint32_t rsvd_2;\n\tuint32_t rsvd_3;\n\tuint32_t read_addr;\n\tuint32_t read_addr_stride;\n\tuint32_t read_addr_cntrl;\n} __packed;\n\n \nstruct qla82xx_md_entry_rdmem {\n\tqla82xx_md_entry_hdr_t h;\n\tuint32_t rsvd[6];\n\tuint32_t read_addr;\n\tuint32_t read_data_size;\n} __packed;\n\n \nstruct qla82xx_md_entry_rdrom {\n\tqla82xx_md_entry_hdr_t h;\n\tuint32_t rsvd[6];\n\tuint32_t read_addr;\n\tuint32_t read_data_size;\n} __packed;\n\nstruct qla82xx_md_entry_mux {\n\tqla82xx_md_entry_hdr_t h;\n\n\tuint32_t select_addr;\n\tuint32_t rsvd_0;\n\tuint32_t data_size;\n\tuint32_t op_count;\n\n\tuint32_t select_value;\n\tuint32_t select_value_stride;\n\tuint32_t read_addr;\n\tuint32_t rsvd_1;\n} __packed;\n\nstruct qla82xx_md_entry_queue {\n\tqla82xx_md_entry_hdr_t h;\n\n\tuint32_t select_addr;\n\tstruct {\n\t\tuint16_t queue_id_stride;\n\t\tuint16_t rsvd_0;\n\t} q_strd;\n\n\tuint32_t data_size;\n\tuint32_t op_count;\n\tuint32_t rsvd_1;\n\tuint32_t rsvd_2;\n\n\tuint32_t read_addr;\n\tstruct {\n\t\tuint8_t read_addr_stride;\n\t\tuint8_t read_addr_cnt;\n\t\tuint16_t rsvd_3;\n\t} rd_strd;\n} __packed;\n\n#define MBC_DIAGNOSTIC_MINIDUMP_TEMPLATE 0x129\n#define RQST_TMPLT_SIZE\t0x0\n#define RQST_TMPLT 0x1\n#define MD_DIRECT_ROM_WINDOW\t0x42110030\n#define MD_DIRECT_ROM_READ_BASE\t0x42150000\n#define MD_MIU_TEST_AGT_CTRL\t\t0x41000090\n#define MD_MIU_TEST_AGT_ADDR_LO\t\t0x41000094\n#define MD_MIU_TEST_AGT_ADDR_HI\t\t0x41000098\n\nextern const int MD_MIU_TEST_AGT_RDDATA[4];\n\n#define CRB_NIU_XG_PAUSE_CTL_P0        0x1\n#define CRB_NIU_XG_PAUSE_CTL_P1        0x8\n\n#define qla82xx_get_temp_val(x)          ((x) >> 16)\n#define qla82xx_get_temp_state(x)        ((x) & 0xffff)\n#define qla82xx_encode_temp(val, state)  (((val) << 16) | (state))\n\n \nenum {\n\tQLA82XX_TEMP_NORMAL = 0x1,  \n\tQLA82XX_TEMP_WARN,\t    \n\tQLA82XX_TEMP_PANIC\t    \n};\n\n#define LEG_INTR_PTR_OFFSET\t0x38C0\n#define LEG_INTR_TRIG_OFFSET\t0x38C4\n#define LEG_INTR_MASK_OFFSET\t0x38C8\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}