{
  "module_name": "megaraid_sas_fusion.h",
  "hash_id": "4fbf4abdeae47b0dfb760f0f1aff222d4ce696d68db38b1b280f41bfcae19bb9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/megaraid/megaraid_sas_fusion.h",
  "human_readable_source": " \n \n\n#ifndef _MEGARAID_SAS_FUSION_H_\n#define _MEGARAID_SAS_FUSION_H_\n\n \n#define MEGASAS_CHAIN_FRAME_SZ_MIN 1024\n#define MFI_FUSION_ENABLE_INTERRUPT_MASK (0x00000009)\n#define MEGASAS_MAX_CHAIN_SHIFT\t\t\t5\n#define MEGASAS_MAX_CHAIN_SIZE_UNITS_MASK\t0x400000\n#define MEGASAS_MAX_CHAIN_SIZE_MASK\t\t0x3E0\n#define MEGASAS_256K_IO\t\t\t\t128\n#define MEGASAS_1MB_IO\t\t\t\t(MEGASAS_256K_IO * 4)\n#define MEGA_MPI2_RAID_DEFAULT_IO_FRAME_SIZE 256\n#define MEGASAS_MPI2_FUNCTION_PASSTHRU_IO_REQUEST   0xF0\n#define MEGASAS_MPI2_FUNCTION_LD_IO_REQUEST         0xF1\n#define MEGASAS_LOAD_BALANCE_FLAG\t\t    0x1\n#define MEGASAS_DCMD_MBOX_PEND_FLAG\t\t    0x1\n#define HOST_DIAG_WRITE_ENABLE\t\t\t    0x80\n#define HOST_DIAG_RESET_ADAPTER\t\t\t    0x4\n#define MEGASAS_FUSION_MAX_RESET_TRIES\t\t    3\n#define MAX_MSIX_QUEUES_FUSION\t\t\t    128\n#define RDPQ_MAX_INDEX_IN_ONE_CHUNK\t\t    16\n#define RDPQ_MAX_CHUNK_COUNT (MAX_MSIX_QUEUES_FUSION / RDPQ_MAX_INDEX_IN_ONE_CHUNK)\n\n \n#define MPI2_TYPE_CUDA\t\t\t\t    0x2\n#define MPI25_SAS_DEVICE0_FLAGS_ENABLED_FAST_PATH   0x4000\n#define\tMR_RL_FLAGS_GRANT_DESTINATION_CPU0\t    0x00\n#define\tMR_RL_FLAGS_GRANT_DESTINATION_CPU1\t    0x10\n#define\tMR_RL_FLAGS_GRANT_DESTINATION_CUDA\t    0x80\n#define MR_RL_FLAGS_SEQ_NUM_ENABLE\t\t    0x8\n#define MR_RL_WRITE_THROUGH_MODE\t\t    0x00\n#define MR_RL_WRITE_BACK_MODE\t\t\t    0x01\n\n \n#define MR_PROT_INFO_TYPE_CONTROLLER                0x8\n#define MEGASAS_SCSI_VARIABLE_LENGTH_CMD            0x7f\n#define MEGASAS_SCSI_SERVICE_ACTION_READ32          0x9\n#define MEGASAS_SCSI_SERVICE_ACTION_WRITE32         0xB\n#define MEGASAS_SCSI_ADDL_CDB_LEN                   0x18\n#define MEGASAS_RD_WR_PROTECT_CHECK_ALL\t\t    0x20\n#define MEGASAS_RD_WR_PROTECT_CHECK_NONE\t    0x60\n\n#define MPI2_SUP_REPLY_POST_HOST_INDEX_OFFSET   (0x0000030C)\n#define MPI2_REPLY_POST_HOST_INDEX_OFFSET\t(0x0000006C)\n\n \n\n#define MR_RAID_CTX_RAID_FLAGS_IO_SUB_TYPE_SHIFT   0x4\n#define MR_RAID_CTX_RAID_FLAGS_IO_SUB_TYPE_MASK    0x30\nenum MR_RAID_FLAGS_IO_SUB_TYPE {\n\tMR_RAID_FLAGS_IO_SUB_TYPE_NONE = 0,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_SYSTEM_PD = 1,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_RMW_DATA     = 2,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_RMW_P        = 3,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_RMW_Q        = 4,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_CACHE_BYPASS = 6,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_LDIO_BW_LIMIT = 7,\n\tMR_RAID_FLAGS_IO_SUB_TYPE_R56_DIV_OFFLOAD = 8\n};\n\n \n#define MEGASAS_REQ_DESCRIPT_FLAGS_LD_IO           0x7\n#define MEGASAS_REQ_DESCRIPT_FLAGS_MFA             0x1\n#define MEGASAS_REQ_DESCRIPT_FLAGS_NO_LOCK\t   0x2\n#define MEGASAS_REQ_DESCRIPT_FLAGS_TYPE_SHIFT      1\n\n#define MEGASAS_FP_CMD_LEN\t16\n#define MEGASAS_FUSION_IN_RESET 0\n#define MEGASAS_FUSION_OCR_NOT_POSSIBLE 1\n#define RAID_1_PEER_CMDS 2\n#define JBOD_MAPS_COUNT\t2\n#define MEGASAS_REDUCE_QD_COUNT 64\n#define IOC_INIT_FRAME_SIZE 4096\n\n \n\nstruct RAID_CONTEXT {\n#if   defined(__BIG_ENDIAN_BITFIELD)\n\tu8 nseg:4;\n\tu8 type:4;\n#else\n\tu8 type:4;\n\tu8 nseg:4;\n#endif\n\tu8 resvd0;\n\t__le16 timeout_value;\n\tu8 reg_lock_flags;\n\tu8 resvd1;\n\t__le16 virtual_disk_tgt_id;\n\t__le64 reg_lock_row_lba;\n\t__le32 reg_lock_length;\n\t__le16 next_lmid;\n\tu8 ex_status;\n\tu8 status;\n\tu8 raid_flags;\n\tu8 num_sge;\n\t__le16 config_seq_num;\n\tu8 span_arm;\n\tu8 priority;\n\tu8 num_sge_ext;\n\tu8 resvd2;\n};\n\n \nstruct RAID_CONTEXT_G35 {\n\t#define RAID_CONTEXT_NSEG_MASK\t0x00F0\n\t#define RAID_CONTEXT_NSEG_SHIFT\t4\n\t#define RAID_CONTEXT_TYPE_MASK\t0x000F\n\t#define RAID_CONTEXT_TYPE_SHIFT\t0\n\tu16\t\tnseg_type;\n\tu16 timeout_value;  \n\tu16\t\trouting_flags;\t\n\tu16 virtual_disk_tgt_id;    \n\t__le64 reg_lock_row_lba;       \n\tu32 reg_lock_length;       \n\tunion {                     \n\t\tu16 rmw_op_index;    \n\t\tu16 peer_smid;       \n\t\tu16 r56_arm_map;     \n\n\t} flow_specific;\n\n\tu8 ex_status;        \n\tu8 status;           \n\tu8 raid_flags;\t\t \n\tu8 span_arm;             \n\tu16\tconfig_seq_num;            \n\tunion {\n\t\t \n\t\t#define NUM_SGE_MASK_LOWER\t0xFF\n\t\t#define NUM_SGE_MASK_UPPER\t0x0F\n\t\t#define NUM_SGE_SHIFT_UPPER\t8\n\t\t#define STREAM_DETECT_SHIFT\t7\n\t\t#define STREAM_DETECT_MASK\t0x80\n\t\tstruct {\n#if   defined(__BIG_ENDIAN_BITFIELD)  \n\t\t\tu16 stream_detected:1;\n\t\t\tu16 reserved:3;\n\t\t\tu16 num_sge:12;\n#else\n\t\t\tu16 num_sge:12;\n\t\t\tu16 reserved:3;\n\t\t\tu16 stream_detected:1;\n#endif\n\t\t} bits;\n\t\tu8 bytes[2];\n\t} u;\n\tu8 resvd2[2];           \n};\n\n#define MR_RAID_CTX_ROUTINGFLAGS_SLD_SHIFT\t1\n#define MR_RAID_CTX_ROUTINGFLAGS_C2D_SHIFT\t2\n#define MR_RAID_CTX_ROUTINGFLAGS_FWD_SHIFT\t3\n#define MR_RAID_CTX_ROUTINGFLAGS_SQN_SHIFT\t4\n#define MR_RAID_CTX_ROUTINGFLAGS_SBS_SHIFT\t5\n#define MR_RAID_CTX_ROUTINGFLAGS_RW_SHIFT\t6\n#define MR_RAID_CTX_ROUTINGFLAGS_LOG_SHIFT\t7\n#define MR_RAID_CTX_ROUTINGFLAGS_CPUSEL_SHIFT\t8\n#define MR_RAID_CTX_ROUTINGFLAGS_CPUSEL_MASK\t0x0F00\n#define MR_RAID_CTX_ROUTINGFLAGS_SETDIVERT_SHIFT\t12\n#define MR_RAID_CTX_ROUTINGFLAGS_SETDIVERT_MASK\t0xF000\n\nstatic inline void set_num_sge(struct RAID_CONTEXT_G35 *rctx_g35,\n\t\t\t       u16 sge_count)\n{\n\trctx_g35->u.bytes[0] = (u8)(sge_count & NUM_SGE_MASK_LOWER);\n\trctx_g35->u.bytes[1] |= (u8)((sge_count >> NUM_SGE_SHIFT_UPPER)\n\t\t\t\t\t\t\t& NUM_SGE_MASK_UPPER);\n}\n\nstatic inline u16 get_num_sge(struct RAID_CONTEXT_G35 *rctx_g35)\n{\n\tu16 sge_count;\n\n\tsge_count = (u16)(((rctx_g35->u.bytes[1] & NUM_SGE_MASK_UPPER)\n\t\t\t<< NUM_SGE_SHIFT_UPPER) | (rctx_g35->u.bytes[0]));\n\treturn sge_count;\n}\n\n#define SET_STREAM_DETECTED(rctx_g35) \\\n\t(rctx_g35.u.bytes[1] |= STREAM_DETECT_MASK)\n\n#define CLEAR_STREAM_DETECTED(rctx_g35) \\\n\t(rctx_g35.u.bytes[1] &= ~(STREAM_DETECT_MASK))\n\nstatic inline bool is_stream_detected(struct RAID_CONTEXT_G35 *rctx_g35)\n{\n\treturn ((rctx_g35->u.bytes[1] & STREAM_DETECT_MASK));\n}\n\nunion RAID_CONTEXT_UNION {\n\tstruct RAID_CONTEXT raid_context;\n\tstruct RAID_CONTEXT_G35 raid_context_g35;\n};\n\n#define RAID_CTX_SPANARM_ARM_SHIFT\t(0)\n#define RAID_CTX_SPANARM_ARM_MASK\t(0x1f)\n\n#define RAID_CTX_SPANARM_SPAN_SHIFT\t(5)\n#define RAID_CTX_SPANARM_SPAN_MASK\t(0xE0)\n\n \n#define RAID_CTX_R56_Q_ARM_MASK\t\t(0x1F)\n#define RAID_CTX_R56_P_ARM_SHIFT\t(5)\n#define RAID_CTX_R56_P_ARM_MASK\t\t(0x3E0)\n#define RAID_CTX_R56_LOG_ARM_SHIFT\t(10)\n#define RAID_CTX_R56_LOG_ARM_MASK\t(0x7C00)\n\n \n#define BITS_PER_INDEX_STREAM\t\t4\n#define INVALID_STREAM_NUM              16\n#define MR_STREAM_BITMAP\t\t0x76543210\n#define STREAM_MASK\t\t\t((1 << BITS_PER_INDEX_STREAM) - 1)\n#define ZERO_LAST_STREAM\t\t0x0fffffff\n#define MAX_STREAMS_TRACKED\t\t8\n\n \nenum REGION_TYPE {\n\tREGION_TYPE_UNUSED       = 0,\n\tREGION_TYPE_SHARED_READ  = 1,\n\tREGION_TYPE_SHARED_WRITE = 2,\n\tREGION_TYPE_EXCLUSIVE    = 3,\n};\n\n \n#define MPI2_FUNCTION_IOC_INIT              (0x02)  \n#define MPI2_WHOINIT_HOST_DRIVER            (0x04)\n#define MPI2_VERSION_MAJOR                  (0x02)\n#define MPI2_VERSION_MINOR                  (0x00)\n#define MPI2_VERSION_MAJOR_MASK             (0xFF00)\n#define MPI2_VERSION_MAJOR_SHIFT            (8)\n#define MPI2_VERSION_MINOR_MASK             (0x00FF)\n#define MPI2_VERSION_MINOR_SHIFT            (0)\n#define MPI2_VERSION ((MPI2_VERSION_MAJOR << MPI2_VERSION_MAJOR_SHIFT) | \\\n\t\t      MPI2_VERSION_MINOR)\n#define MPI2_HEADER_VERSION_UNIT            (0x10)\n#define MPI2_HEADER_VERSION_DEV             (0x00)\n#define MPI2_HEADER_VERSION_UNIT_MASK       (0xFF00)\n#define MPI2_HEADER_VERSION_UNIT_SHIFT      (8)\n#define MPI2_HEADER_VERSION_DEV_MASK        (0x00FF)\n#define MPI2_HEADER_VERSION_DEV_SHIFT       (0)\n#define MPI2_HEADER_VERSION ((MPI2_HEADER_VERSION_UNIT << 8) | \\\n\t\t\t     MPI2_HEADER_VERSION_DEV)\n#define MPI2_IEEE_SGE_FLAGS_IOCPLBNTA_ADDR      (0x03)\n#define MPI2_SCSIIO_EEDPFLAGS_INC_PRI_REFTAG        (0x8000)\n#define MPI2_SCSIIO_EEDPFLAGS_CHECK_REFTAG          (0x0400)\n#define MPI2_SCSIIO_EEDPFLAGS_CHECK_REMOVE_OP       (0x0003)\n#define MPI2_SCSIIO_EEDPFLAGS_CHECK_APPTAG          (0x0200)\n#define MPI2_SCSIIO_EEDPFLAGS_CHECK_GUARD           (0x0100)\n#define MPI2_SCSIIO_EEDPFLAGS_INSERT_OP             (0x0004)\n \n#define MPI25_SCSIIO_EEDPFLAGS_DO_NOT_DISABLE_MODE  (0x0040)\n#define MPI2_FUNCTION_SCSI_IO_REQUEST               (0x00)  \n#define MPI2_FUNCTION_SCSI_TASK_MGMT                (0x01)\n#define MPI2_REQ_DESCRIPT_FLAGS_HIGH_PRIORITY       (0x03)\n#define MPI2_REQ_DESCRIPT_FLAGS_FP_IO               (0x06)\n#define MPI2_REQ_DESCRIPT_FLAGS_SCSI_IO                 (0x00)\n#define MPI2_SGE_FLAGS_64_BIT_ADDRESSING        (0x02)\n#define MPI2_SCSIIO_CONTROL_WRITE               (0x01000000)\n#define MPI2_SCSIIO_CONTROL_READ                (0x02000000)\n#define MPI2_REQ_DESCRIPT_FLAGS_TYPE_MASK       (0x0E)\n#define MPI2_RPY_DESCRIPT_FLAGS_UNUSED          (0x0F)\n#define MPI2_RPY_DESCRIPT_FLAGS_SCSI_IO_SUCCESS (0x00)\n#define MPI2_RPY_DESCRIPT_FLAGS_TYPE_MASK       (0x0F)\n#define MPI2_WRSEQ_FLUSH_KEY_VALUE              (0x0)\n#define MPI2_WRITE_SEQUENCE_OFFSET              (0x00000004)\n#define MPI2_WRSEQ_1ST_KEY_VALUE                (0xF)\n#define MPI2_WRSEQ_2ND_KEY_VALUE                (0x4)\n#define MPI2_WRSEQ_3RD_KEY_VALUE                (0xB)\n#define MPI2_WRSEQ_4TH_KEY_VALUE                (0x2)\n#define MPI2_WRSEQ_5TH_KEY_VALUE                (0x7)\n#define MPI2_WRSEQ_6TH_KEY_VALUE                (0xD)\n\nstruct MPI25_IEEE_SGE_CHAIN64 {\n\t__le64\t\t\tAddress;\n\t__le32\t\t\tLength;\n\t__le16\t\t\tReserved1;\n\tu8                      NextChainOffset;\n\tu8                      Flags;\n};\n\nstruct MPI2_SGE_SIMPLE_UNION {\n\t__le32                     FlagsLength;\n\tunion {\n\t\t__le32                 Address32;\n\t\t__le64                 Address64;\n\t} u;\n};\n\nstruct MPI2_SCSI_IO_CDB_EEDP32 {\n\tu8                      CDB[20];                     \n\t__be32\t\t\tPrimaryReferenceTag;         \n\t__be16\t\t\tPrimaryApplicationTag;       \n\t__be16\t\t\tPrimaryApplicationTagMask;   \n\t__le32\t\t\tTransferLength;              \n};\n\nstruct MPI2_SGE_CHAIN_UNION {\n\t__le16\t\t\tLength;\n\tu8                      NextChainOffset;\n\tu8                      Flags;\n\tunion {\n\t\t__le32\t\tAddress32;\n\t\t__le64\t\tAddress64;\n\t} u;\n};\n\nstruct MPI2_IEEE_SGE_SIMPLE32 {\n\t__le32\t\t\tAddress;\n\t__le32\t\t\tFlagsLength;\n};\n\nstruct MPI2_IEEE_SGE_CHAIN32 {\n\t__le32\t\t\tAddress;\n\t__le32\t\t\tFlagsLength;\n};\n\nstruct MPI2_IEEE_SGE_SIMPLE64 {\n\t__le64\t\t\tAddress;\n\t__le32\t\t\tLength;\n\t__le16\t\t\tReserved1;\n\tu8                      Reserved2;\n\tu8                      Flags;\n};\n\nstruct MPI2_IEEE_SGE_CHAIN64 {\n\t__le64\t\t\tAddress;\n\t__le32\t\t\tLength;\n\t__le16\t\t\tReserved1;\n\tu8                      Reserved2;\n\tu8                      Flags;\n};\n\nunion MPI2_IEEE_SGE_SIMPLE_UNION {\n\tstruct MPI2_IEEE_SGE_SIMPLE32  Simple32;\n\tstruct MPI2_IEEE_SGE_SIMPLE64  Simple64;\n};\n\nunion MPI2_IEEE_SGE_CHAIN_UNION {\n\tstruct MPI2_IEEE_SGE_CHAIN32   Chain32;\n\tstruct MPI2_IEEE_SGE_CHAIN64   Chain64;\n};\n\nunion MPI2_SGE_IO_UNION {\n\tstruct MPI2_SGE_SIMPLE_UNION       MpiSimple;\n\tstruct MPI2_SGE_CHAIN_UNION        MpiChain;\n\tunion MPI2_IEEE_SGE_SIMPLE_UNION  IeeeSimple;\n\tunion MPI2_IEEE_SGE_CHAIN_UNION   IeeeChain;\n};\n\nunion MPI2_SCSI_IO_CDB_UNION {\n\tu8                      CDB32[32];\n\tstruct MPI2_SCSI_IO_CDB_EEDP32 EEDP32;\n\tstruct MPI2_SGE_SIMPLE_UNION SGE;\n};\n\n \n\n \nstruct MPI2_SCSI_TASK_MANAGE_REQUEST {\n\tu16 DevHandle;\t\t \n\tu8 ChainOffset;\t\t \n\tu8 Function;\t\t \n\tu8 Reserved1;\t\t \n\tu8 TaskType;\t\t \n\tu8 Reserved2;\t\t \n\tu8 MsgFlags;\t\t \n\tu8 VP_ID;\t\t \n\tu8 VF_ID;\t\t \n\tu16 Reserved3;\t\t \n\tu8 LUN[8];\t\t \n\tu32 Reserved4[7];\t \n\tu16 TaskMID;\t\t \n\tu16 Reserved5;\t\t \n};\n\n\n \nstruct MPI2_SCSI_TASK_MANAGE_REPLY {\n\tu16 DevHandle;\t\t \n\tu8 MsgLength;\t\t \n\tu8 Function;\t\t \n\tu8 ResponseCode;\t \n\tu8 TaskType;\t\t \n\tu8 Reserved1;\t\t \n\tu8 MsgFlags;\t\t \n\tu8 VP_ID;\t\t \n\tu8 VF_ID;\t\t \n\tu16 Reserved2;\t\t \n\tu16 Reserved3;\t\t \n\tu16 IOCStatus;\t\t \n\tu32 IOCLogInfo;\t\t \n\tu32 TerminationCount;\t \n\tu32 ResponseInfo;\t \n};\n\nstruct MR_TM_REQUEST {\n\tchar request[128];\n};\n\nstruct MR_TM_REPLY {\n\tchar reply[128];\n};\n\n \nstruct MR_TASK_MANAGE_REQUEST {\n\t \n\tstruct MR_TM_REQUEST         TmRequest;\n\tunion {\n\t\tstruct {\n#if   defined(__BIG_ENDIAN_BITFIELD)\n\t\t\tu32 reserved1:30;\n\t\t\tu32 isTMForPD:1;\n\t\t\tu32 isTMForLD:1;\n#else\n\t\t\tu32 isTMForLD:1;\n\t\t\tu32 isTMForPD:1;\n\t\t\tu32 reserved1:30;\n#endif\n\t\t\tu32 reserved2;\n\t\t} tmReqFlags;\n\t\tstruct MR_TM_REPLY   TMReply;\n\t};\n};\n\n \n\n#define MPI2_SCSITASKMGMT_TASKTYPE_ABORT_TASK           (0x01)\n#define MPI2_SCSITASKMGMT_TASKTYPE_ABRT_TASK_SET        (0x02)\n#define MPI2_SCSITASKMGMT_TASKTYPE_TARGET_RESET         (0x03)\n#define MPI2_SCSITASKMGMT_TASKTYPE_LOGICAL_UNIT_RESET   (0x05)\n#define MPI2_SCSITASKMGMT_TASKTYPE_CLEAR_TASK_SET       (0x06)\n#define MPI2_SCSITASKMGMT_TASKTYPE_QUERY_TASK           (0x07)\n#define MPI2_SCSITASKMGMT_TASKTYPE_CLR_ACA              (0x08)\n#define MPI2_SCSITASKMGMT_TASKTYPE_QRY_TASK_SET         (0x09)\n#define MPI2_SCSITASKMGMT_TASKTYPE_QRY_ASYNC_EVENT      (0x0A)\n\n \n\n#define MPI2_SCSITASKMGMT_RSP_TM_COMPLETE               (0x00)\n#define MPI2_SCSITASKMGMT_RSP_INVALID_FRAME             (0x02)\n#define MPI2_SCSITASKMGMT_RSP_TM_NOT_SUPPORTED          (0x04)\n#define MPI2_SCSITASKMGMT_RSP_TM_FAILED                 (0x05)\n#define MPI2_SCSITASKMGMT_RSP_TM_SUCCEEDED              (0x08)\n#define MPI2_SCSITASKMGMT_RSP_TM_INVALID_LUN            (0x09)\n#define MPI2_SCSITASKMGMT_RSP_TM_OVERLAPPED_TAG         (0x0A)\n#define MPI2_SCSITASKMGMT_RSP_IO_QUEUED_ON_IOC          (0x80)\n\n \nstruct MPI2_RAID_SCSI_IO_REQUEST {\n\t__le16\t\t\tDevHandle;                       \n\tu8                      ChainOffset;                     \n\tu8                      Function;                        \n\t__le16\t\t\tReserved1;                       \n\tu8                      Reserved2;                       \n\tu8                      MsgFlags;                        \n\tu8                      VP_ID;                           \n\tu8                      VF_ID;                           \n\t__le16\t\t\tReserved3;                       \n\t__le32\t\t\tSenseBufferLowAddress;           \n\t__le16\t\t\tSGLFlags;                        \n\tu8                      SenseBufferLength;               \n\tu8                      Reserved4;                       \n\tu8                      SGLOffset0;                      \n\tu8                      SGLOffset1;                      \n\tu8                      SGLOffset2;                      \n\tu8                      SGLOffset3;                      \n\t__le32\t\t\tSkipCount;                       \n\t__le32\t\t\tDataLength;                      \n\t__le32\t\t\tBidirectionalDataLength;         \n\t__le16\t\t\tIoFlags;                         \n\t__le16\t\t\tEEDPFlags;                       \n\t__le32\t\t\tEEDPBlockSize;                   \n\t__le32\t\t\tSecondaryReferenceTag;           \n\t__le16\t\t\tSecondaryApplicationTag;         \n\t__le16\t\t\tApplicationTagTranslationMask;   \n\tu8                      LUN[8];                          \n\t__le32\t\t\tControl;                         \n\tunion MPI2_SCSI_IO_CDB_UNION  CDB;\t\t\t \n\tunion RAID_CONTEXT_UNION RaidContext;   \n\tunion {\n\t\tunion MPI2_SGE_IO_UNION       SGL;\t\t \n\t\tDECLARE_FLEX_ARRAY(union MPI2_SGE_IO_UNION, SGLs);\n\t};\n};\n\n \nstruct MEGASAS_RAID_MFA_IO_REQUEST_DESCRIPTOR {\n\tu32     RequestFlags:8;\n\tu32     MessageAddress1:24;\n\tu32     MessageAddress2;\n};\n\n \nstruct MPI2_DEFAULT_REQUEST_DESCRIPTOR {\n\tu8              RequestFlags;                \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tLMID;                        \n\t__le16\t\tDescriptorTypeDependent;     \n};\n\n \nstruct MPI2_HIGH_PRIORITY_REQUEST_DESCRIPTOR {\n\tu8              RequestFlags;                \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tLMID;                        \n\t__le16\t\tReserved1;                   \n};\n\n \nstruct MPI2_SCSI_IO_REQUEST_DESCRIPTOR {\n\tu8              RequestFlags;                \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tLMID;                        \n\t__le16\t\tDevHandle;                   \n};\n\n \nstruct MPI2_SCSI_TARGET_REQUEST_DESCRIPTOR {\n\tu8              RequestFlags;                \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tLMID;                        \n\t__le16\t\tIoIndex;                     \n};\n\n \nstruct MPI2_RAID_ACCEL_REQUEST_DESCRIPTOR {\n\tu8              RequestFlags;                \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tLMID;                        \n\t__le16\t\tReserved;                    \n};\n\n \nunion MEGASAS_REQUEST_DESCRIPTOR_UNION {\n\tstruct MPI2_DEFAULT_REQUEST_DESCRIPTOR             Default;\n\tstruct MPI2_HIGH_PRIORITY_REQUEST_DESCRIPTOR       HighPriority;\n\tstruct MPI2_SCSI_IO_REQUEST_DESCRIPTOR             SCSIIO;\n\tstruct MPI2_SCSI_TARGET_REQUEST_DESCRIPTOR         SCSITarget;\n\tstruct MPI2_RAID_ACCEL_REQUEST_DESCRIPTOR          RAIDAccelerator;\n\tstruct MEGASAS_RAID_MFA_IO_REQUEST_DESCRIPTOR      MFAIo;\n\tunion {\n\t\tstruct {\n\t\t\t__le32 low;\n\t\t\t__le32 high;\n\t\t} u;\n\t\t__le64 Words;\n\t};\n};\n\n \nstruct MPI2_DEFAULT_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\t__le16\t\tDescriptorTypeDependent1;    \n\t__le32\t\tDescriptorTypeDependent2;    \n};\n\n \nstruct MPI2_ADDRESS_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le32\t\tReplyFrameAddress;           \n};\n\n \nstruct MPI2_SCSI_IO_SUCCESS_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le16\t\tTaskTag;                     \n\t__le16\t\tReserved1;                   \n};\n\n \nstruct MPI2_TARGETASSIST_SUCCESS_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\tu8              SequenceNumber;              \n\tu8              Reserved1;                   \n\t__le16\t\tIoIndex;                     \n};\n\n \nstruct MPI2_TARGET_COMMAND_BUFFER_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\tu8              VP_ID;                       \n\tu8              Flags;                       \n\t__le16\t\tInitiatorDevHandle;          \n\t__le16\t\tIoIndex;                     \n};\n\n \nstruct MPI2_RAID_ACCELERATOR_SUCCESS_REPLY_DESCRIPTOR {\n\tu8              ReplyFlags;                  \n\tu8              MSIxIndex;                   \n\t__le16\t\tSMID;                        \n\t__le32\t\tReserved;                    \n};\n\n \nunion MPI2_REPLY_DESCRIPTORS_UNION {\n\tstruct MPI2_DEFAULT_REPLY_DESCRIPTOR                   Default;\n\tstruct MPI2_ADDRESS_REPLY_DESCRIPTOR                   AddressReply;\n\tstruct MPI2_SCSI_IO_SUCCESS_REPLY_DESCRIPTOR           SCSIIOSuccess;\n\tstruct MPI2_TARGETASSIST_SUCCESS_REPLY_DESCRIPTOR TargetAssistSuccess;\n\tstruct MPI2_TARGET_COMMAND_BUFFER_REPLY_DESCRIPTOR TargetCommandBuffer;\n\tstruct MPI2_RAID_ACCELERATOR_SUCCESS_REPLY_DESCRIPTOR\n\tRAIDAcceleratorSuccess;\n\t__le64                                             Words;\n};\n\n \nstruct MPI2_IOC_INIT_REQUEST {\n\tu8                      WhoInit;                         \n\tu8                      Reserved1;                       \n\tu8                      ChainOffset;                     \n\tu8                      Function;                        \n\t__le16\t\t\tReserved2;                       \n\tu8                      Reserved3;                       \n\tu8                      MsgFlags;                        \n\tu8                      VP_ID;                           \n\tu8                      VF_ID;                           \n\t__le16\t\t\tReserved4;                       \n\t__le16\t\t\tMsgVersion;                      \n\t__le16\t\t\tHeaderVersion;                   \n\tu32                     Reserved5;                       \n\t__le16\t\t\tReserved6;                       \n\tu8                      HostPageSize;                    \n\tu8                      HostMSIxVectors;                 \n\t__le16\t\t\tReserved8;                       \n\t__le16\t\t\tSystemRequestFrameSize;          \n\t__le16\t\t\tReplyDescriptorPostQueueDepth;   \n\t__le16\t\t\tReplyFreeQueueDepth;             \n\t__le32\t\t\tSenseBufferAddressHigh;          \n\t__le32\t\t\tSystemReplyAddressHigh;          \n\t__le64\t\t\tSystemRequestFrameBaseAddress;   \n\t__le64\t\t\tReplyDescriptorPostQueueAddress; \n\t__le64\t\t\tReplyFreeQueueAddress;           \n\t__le64\t\t\tTimeStamp;                       \n};\n\n \n#define MR_PD_INVALID 0xFFFF\n#define MR_DEVHANDLE_INVALID 0xFFFF\n#define MAX_SPAN_DEPTH 8\n#define MAX_QUAD_DEPTH\tMAX_SPAN_DEPTH\n#define MAX_RAIDMAP_SPAN_DEPTH (MAX_SPAN_DEPTH)\n#define MAX_ROW_SIZE 32\n#define MAX_RAIDMAP_ROW_SIZE (MAX_ROW_SIZE)\n#define MAX_LOGICAL_DRIVES 64\n#define MAX_LOGICAL_DRIVES_EXT 256\n#define MAX_LOGICAL_DRIVES_DYN 512\n#define MAX_RAIDMAP_LOGICAL_DRIVES (MAX_LOGICAL_DRIVES)\n#define MAX_RAIDMAP_VIEWS (MAX_LOGICAL_DRIVES)\n#define MAX_ARRAYS 128\n#define MAX_RAIDMAP_ARRAYS (MAX_ARRAYS)\n#define MAX_ARRAYS_EXT\t256\n#define MAX_API_ARRAYS_EXT (MAX_ARRAYS_EXT)\n#define MAX_API_ARRAYS_DYN 512\n#define MAX_PHYSICAL_DEVICES 256\n#define MAX_RAIDMAP_PHYSICAL_DEVICES (MAX_PHYSICAL_DEVICES)\n#define MAX_RAIDMAP_PHYSICAL_DEVICES_DYN 512\n#define MR_DCMD_LD_MAP_GET_INFO             0x0300e101\n#define MR_DCMD_SYSTEM_PD_MAP_GET_INFO      0x0200e102\n#define MR_DCMD_DRV_GET_TARGET_PROP         0x0200e103\n#define MR_DCMD_CTRL_SHARED_HOST_MEM_ALLOC  0x010e8485    \n#define MR_DCMD_LD_VF_MAP_GET_ALL_LDS_111   0x03200200\n#define MR_DCMD_LD_VF_MAP_GET_ALL_LDS       0x03150200\n#define MR_DCMD_CTRL_SNAPDUMP_GET_PROPERTIES\t0x01200100\n#define MR_DCMD_CTRL_DEVICE_LIST_GET\t\t0x01190600\n\nstruct MR_DEV_HANDLE_INFO {\n\t__le16\tcurDevHdl;\n\tu8      validHandles;\n\tu8      interfaceType;\n\t__le16\tdevHandle[2];\n};\n\nstruct MR_ARRAY_INFO {\n\t__le16\tpd[MAX_RAIDMAP_ROW_SIZE];\n};\n\nstruct MR_QUAD_ELEMENT {\n\t__le64     logStart;\n\t__le64     logEnd;\n\t__le64     offsetInSpan;\n\t__le32     diff;\n\t__le32     reserved1;\n};\n\nstruct MR_SPAN_INFO {\n\t__le32             noElements;\n\t__le32             reserved1;\n\tstruct MR_QUAD_ELEMENT quad[MAX_RAIDMAP_SPAN_DEPTH];\n};\n\nstruct MR_LD_SPAN {\n\t__le64\t startBlk;\n\t__le64\t numBlks;\n\t__le16\t arrayRef;\n\tu8       spanRowSize;\n\tu8       spanRowDataSize;\n\tu8       reserved[4];\n};\n\nstruct MR_SPAN_BLOCK_INFO {\n\t__le64          num_rows;\n\tstruct MR_LD_SPAN   span;\n\tstruct MR_SPAN_INFO block_span_info;\n};\n\n#define MR_RAID_CTX_CPUSEL_0\t\t0\n#define MR_RAID_CTX_CPUSEL_1\t\t1\n#define MR_RAID_CTX_CPUSEL_2\t\t2\n#define MR_RAID_CTX_CPUSEL_3\t\t3\n#define MR_RAID_CTX_CPUSEL_FCFS\t\t0xF\n\nstruct MR_CPU_AFFINITY_MASK {\n\tunion {\n\t\tstruct {\n#ifndef __BIG_ENDIAN_BITFIELD\n\t\tu8 hw_path:1;\n\t\tu8 cpu0:1;\n\t\tu8 cpu1:1;\n\t\tu8 cpu2:1;\n\t\tu8 cpu3:1;\n\t\tu8 reserved:3;\n#else\n\t\tu8 reserved:3;\n\t\tu8 cpu3:1;\n\t\tu8 cpu2:1;\n\t\tu8 cpu1:1;\n\t\tu8 cpu0:1;\n\t\tu8 hw_path:1;\n#endif\n\t\t};\n\t\tu8 core_mask;\n\t};\n};\n\nstruct MR_IO_AFFINITY {\n\tunion {\n\t\tstruct {\n\t\t\tstruct MR_CPU_AFFINITY_MASK pdRead;\n\t\t\tstruct MR_CPU_AFFINITY_MASK pdWrite;\n\t\t\tstruct MR_CPU_AFFINITY_MASK ldRead;\n\t\t\tstruct MR_CPU_AFFINITY_MASK ldWrite;\n\t\t\t};\n\t\tu32 word;\n\t\t};\n\tu8 maxCores;     \n\tu8 reserved[3];\n};\n\nstruct MR_LD_RAID {\n\tstruct {\n#if   defined(__BIG_ENDIAN_BITFIELD)\n\t\tu32 reserved4:2;\n\t\tu32 fp_cache_bypass_capable:1;\n\t\tu32 fp_rmw_capable:1;\n\t\tu32 disable_coalescing:1;\n\t\tu32     fpBypassRegionLock:1;\n\t\tu32     tmCapable:1;\n\t\tu32\tfpNonRWCapable:1;\n\t\tu32     fpReadAcrossStripe:1;\n\t\tu32     fpWriteAcrossStripe:1;\n\t\tu32     fpReadCapable:1;\n\t\tu32     fpWriteCapable:1;\n\t\tu32     encryptionType:8;\n\t\tu32     pdPiMode:4;\n\t\tu32     ldPiMode:4;\n\t\tu32 reserved5:2;\n\t\tu32 ra_capable:1;\n\t\tu32     fpCapable:1;\n#else\n\t\tu32     fpCapable:1;\n\t\tu32 ra_capable:1;\n\t\tu32 reserved5:2;\n\t\tu32     ldPiMode:4;\n\t\tu32     pdPiMode:4;\n\t\tu32     encryptionType:8;\n\t\tu32     fpWriteCapable:1;\n\t\tu32     fpReadCapable:1;\n\t\tu32     fpWriteAcrossStripe:1;\n\t\tu32     fpReadAcrossStripe:1;\n\t\tu32\tfpNonRWCapable:1;\n\t\tu32     tmCapable:1;\n\t\tu32     fpBypassRegionLock:1;\n\t\tu32 disable_coalescing:1;\n\t\tu32 fp_rmw_capable:1;\n\t\tu32 fp_cache_bypass_capable:1;\n\t\tu32 reserved4:2;\n#endif\n\t} capability;\n\t__le32     reserved6;\n\t__le64     size;\n\tu8      spanDepth;\n\tu8      level;\n\tu8      stripeShift;\n\tu8      rowSize;\n\tu8      rowDataSize;\n\tu8      writeMode;\n\tu8      PRL;\n\tu8      SRL;\n\t__le16     targetId;\n\tu8      ldState;\n\tu8      regTypeReqOnWrite;\n\tu8      modFactor;\n\tu8\tregTypeReqOnRead;\n\t__le16     seqNum;\n\nstruct {\n#ifndef __BIG_ENDIAN_BITFIELD\n\tu32 ldSyncRequired:1;\n\tu32 regTypeReqOnReadIsValid:1;\n\tu32 isEPD:1;\n\tu32 enableSLDOnAllRWIOs:1;\n\tu32 reserved:28;\n#else\n\tu32 reserved:28;\n\tu32 enableSLDOnAllRWIOs:1;\n\tu32 isEPD:1;\n\tu32 regTypeReqOnReadIsValid:1;\n\tu32 ldSyncRequired:1;\n#endif\n\t} flags;\n\n\tu8\tLUN[8];  \n\tu8\tfpIoTimeoutForLd; \n\t \n\tu8 ld_accept_priority_type;\n\tu8 reserved2[2];\t         \n\t \n\tu32 logical_block_length;\n\tstruct {\n#ifndef __BIG_ENDIAN_BITFIELD\n\t \n\tu32 ld_pi_exp:4;\n\t \n\tu32 ld_logical_block_exp:4;\n\tu32 reserved1:24;            \n#else\n\tu32 reserved1:24;            \n\t \n\tu32 ld_logical_block_exp:4;\n\t \n\tu32 ld_pi_exp:4;\n#endif\n\t};                                \n\t  \n\tstruct MR_IO_AFFINITY cpuAffinity;\n      \n\tu8 reserved3[0x80 - 0x40];     \n};\n\nstruct MR_LD_SPAN_MAP {\n\tstruct MR_LD_RAID          ldRaid;\n\tu8                  dataArmMap[MAX_RAIDMAP_ROW_SIZE];\n\tstruct MR_SPAN_BLOCK_INFO  spanBlock[MAX_RAIDMAP_SPAN_DEPTH];\n};\n\nstruct MR_FW_RAID_MAP {\n\t__le32                 totalSize;\n\tunion {\n\t\tstruct {\n\t\t\t__le32         maxLd;\n\t\t\t__le32         maxSpanDepth;\n\t\t\t__le32         maxRowSize;\n\t\t\t__le32         maxPdCount;\n\t\t\t__le32         maxArrays;\n\t\t} validationInfo;\n\t\t__le32             version[5];\n\t};\n\n\t__le32                 ldCount;\n\t__le32                 Reserved1;\n\tu8                  ldTgtIdToLd[MAX_RAIDMAP_LOGICAL_DRIVES+\n\t\t\t\t\tMAX_RAIDMAP_VIEWS];\n\tu8                  fpPdIoTimeoutSec;\n\tu8                  reserved2[7];\n\tstruct MR_ARRAY_INFO       arMapInfo[MAX_RAIDMAP_ARRAYS];\n\tstruct MR_DEV_HANDLE_INFO  devHndlInfo[MAX_RAIDMAP_PHYSICAL_DEVICES];\n\tstruct MR_LD_SPAN_MAP      ldSpanMap[];\n};\n\nstruct IO_REQUEST_INFO {\n\tu64 ldStartBlock;\n\tu32 numBlocks;\n\tu16 ldTgtId;\n\tu8 isRead;\n\t__le16 devHandle;\n\tu8 pd_interface;\n\tu64 pdBlock;\n\tu8 fpOkForIo;\n\tu8 IoforUnevenSpan;\n\tu8 start_span;\n\tu8 do_fp_rlbypass;\n\tu64 start_row;\n\tu8  span_arm;\t \n\tu8  pd_after_lb;\n\tu16 r1_alt_dev_handle;  \n\tbool ra_capable;\n\tu8 data_arms;\n};\n\nstruct MR_LD_TARGET_SYNC {\n\tu8  targetId;\n\tu8  reserved;\n\t__le16 seqNum;\n};\n\n \nenum MR_RAID_MAP_DESC_TYPE {\n\t \n\tRAID_MAP_DESC_TYPE_DEVHDL_INFO    = 0x0,\n\t \n\tRAID_MAP_DESC_TYPE_TGTID_INFO     = 0x1,\n\t \n\tRAID_MAP_DESC_TYPE_ARRAY_INFO     = 0x2,\n\t \n\tRAID_MAP_DESC_TYPE_SPAN_INFO      = 0x3,\n\tRAID_MAP_DESC_TYPE_COUNT,\n};\n\n \nstruct MR_RAID_MAP_DESC_TABLE {\n\t \n\tu32 raid_map_desc_type;\n\t \n\tu32 raid_map_desc_offset;\n\t \n\tu32 raid_map_desc_buffer_size;\n\t \n\tu32 raid_map_desc_elements;\n};\n\n \nstruct MR_FW_RAID_MAP_DYNAMIC {\n\tu32 raid_map_size;    \n\tu32 desc_table_offset; \n\tu32 desc_table_size;   \n\t \n\tu32 desc_table_num_elements;\n\tu64\treserved1;\n\tu32\treserved2[3];\t \n\t \n\tu8 fp_pd_io_timeout_sec;\n\tu8 reserved3[3];\n\t \n\tu32 rmw_fp_seq_num;\n\tu16 ld_count;\t \n\tu16 ar_count;    \n\tu16 span_count;  \n\tu16 reserved4[3];\n \n\tunion {\n\t\tstruct {\n\t\t\tstruct MR_DEV_HANDLE_INFO  *dev_hndl_info;\n\t\t\tu16 *ld_tgt_id_to_ld;\n\t\t\tstruct MR_ARRAY_INFO *ar_map_info;\n\t\t\tstruct MR_LD_SPAN_MAP *ld_span_map;\n\t\t\t};\n\t\tu64 ptr_structure_size[RAID_MAP_DESC_TYPE_COUNT];\n\t\t};\n \n\t \n\tstruct MR_RAID_MAP_DESC_TABLE\n\t\t\traid_map_desc_table[RAID_MAP_DESC_TYPE_COUNT];\n\t \n\tu32 raid_map_desc_data[];\n};  \n\n#define IEEE_SGE_FLAGS_ADDR_MASK            (0x03)\n#define IEEE_SGE_FLAGS_SYSTEM_ADDR          (0x00)\n#define IEEE_SGE_FLAGS_IOCDDR_ADDR          (0x01)\n#define IEEE_SGE_FLAGS_IOCPLB_ADDR          (0x02)\n#define IEEE_SGE_FLAGS_IOCPLBNTA_ADDR       (0x03)\n#define IEEE_SGE_FLAGS_CHAIN_ELEMENT        (0x80)\n#define IEEE_SGE_FLAGS_END_OF_LIST          (0x40)\n\n#define MPI2_SGE_FLAGS_SHIFT                (0x02)\n#define IEEE_SGE_FLAGS_FORMAT_MASK          (0xC0)\n#define IEEE_SGE_FLAGS_FORMAT_IEEE          (0x00)\n#define IEEE_SGE_FLAGS_FORMAT_NVME          (0x02)\n\n#define MPI26_IEEE_SGE_FLAGS_NSF_MASK           (0x1C)\n#define MPI26_IEEE_SGE_FLAGS_NSF_MPI_IEEE       (0x00)\n#define MPI26_IEEE_SGE_FLAGS_NSF_NVME_PRP       (0x08)\n#define MPI26_IEEE_SGE_FLAGS_NSF_NVME_SGL       (0x10)\n\n#define MEGASAS_DEFAULT_SNAP_DUMP_WAIT_TIME 15\n#define MEGASAS_MAX_SNAP_DUMP_WAIT_TIME 60\n\nstruct megasas_register_set;\nstruct megasas_instance;\n\nunion desc_word {\n\tu64 word;\n\tstruct {\n\t\tu32 low;\n\t\tu32 high;\n\t} u;\n};\n\nstruct megasas_cmd_fusion {\n\tstruct MPI2_RAID_SCSI_IO_REQUEST\t*io_request;\n\tdma_addr_t\t\t\tio_request_phys_addr;\n\n\tunion MPI2_SGE_IO_UNION\t*sg_frame;\n\tdma_addr_t\t\tsg_frame_phys_addr;\n\n\tu8 *sense;\n\tdma_addr_t sense_phys_addr;\n\n\tstruct list_head list;\n\tstruct scsi_cmnd *scmd;\n\tstruct megasas_instance *instance;\n\n\tu8 retry_for_fw_reset;\n\tunion MEGASAS_REQUEST_DESCRIPTOR_UNION  *request_desc;\n\n\t \n\tu32 sync_cmd_idx;\n\tu32 index;\n\tu8 pd_r1_lb;\n\tstruct completion done;\n\tu8 pd_interface;\n\tu16 r1_alt_dev_handle;  \n\tbool cmd_completed;   \n\n};\n\nstruct LD_LOAD_BALANCE_INFO {\n\tu8\tloadBalanceFlag;\n\tu8\treserved1;\n\tatomic_t     scsi_pending_cmds[MAX_PHYSICAL_DEVICES];\n\tu64     last_accessed_block[MAX_PHYSICAL_DEVICES];\n};\n\n \ntypedef struct _LD_SPAN_SET {\n\tu64  log_start_lba;\n\tu64  log_end_lba;\n\tu64  span_row_start;\n\tu64  span_row_end;\n\tu64  data_strip_start;\n\tu64  data_strip_end;\n\tu64  data_row_start;\n\tu64  data_row_end;\n\tu8   strip_offset[MAX_SPAN_DEPTH];\n\tu32    span_row_data_width;\n\tu32    diff;\n\tu32    reserved[2];\n} LD_SPAN_SET, *PLD_SPAN_SET;\n\ntypedef struct LOG_BLOCK_SPAN_INFO {\n\tLD_SPAN_SET  span_set[MAX_SPAN_DEPTH];\n} LD_SPAN_INFO, *PLD_SPAN_INFO;\n\nstruct MR_FW_RAID_MAP_ALL {\n\tstruct MR_FW_RAID_MAP raidMap;\n\tstruct MR_LD_SPAN_MAP ldSpanMap[MAX_LOGICAL_DRIVES];\n} __attribute__ ((packed));\n\nstruct MR_DRV_RAID_MAP {\n\t \n\t__le32                 totalSize;\n\n\tunion {\n\tstruct {\n\t\t__le32         maxLd;\n\t\t__le32         maxSpanDepth;\n\t\t__le32         maxRowSize;\n\t\t__le32         maxPdCount;\n\t\t__le32         maxArrays;\n\t} validationInfo;\n\t__le32             version[5];\n\t};\n\n\t \n\tu8                  fpPdIoTimeoutSec;\n\tu8                  reserved2[7];\n\n\t__le16                 ldCount;\n\t__le16                 arCount;\n\t__le16                 spanCount;\n\t__le16                 reserve3;\n\n\tstruct MR_DEV_HANDLE_INFO\n\t\tdevHndlInfo[MAX_RAIDMAP_PHYSICAL_DEVICES_DYN];\n\tu16 ldTgtIdToLd[MAX_LOGICAL_DRIVES_DYN];\n\tstruct MR_ARRAY_INFO arMapInfo[MAX_API_ARRAYS_DYN];\n\tstruct MR_LD_SPAN_MAP      ldSpanMap[];\n\n};\n\n \nstruct MR_DRV_RAID_MAP_ALL {\n\n\tstruct MR_DRV_RAID_MAP raidMap;\n\tstruct MR_LD_SPAN_MAP ldSpanMap[MAX_LOGICAL_DRIVES_DYN];\n} __packed;\n\n\n\nstruct MR_FW_RAID_MAP_EXT {\n\t \n\tu32                 reserved;\n\n\tunion {\n\tstruct {\n\t\tu32         maxLd;\n\t\tu32         maxSpanDepth;\n\t\tu32         maxRowSize;\n\t\tu32         maxPdCount;\n\t\tu32         maxArrays;\n\t} validationInfo;\n\tu32             version[5];\n\t};\n\n\tu8                  fpPdIoTimeoutSec;\n\tu8                  reserved2[7];\n\n\t__le16                 ldCount;\n\t__le16                 arCount;\n\t__le16                 spanCount;\n\t__le16                 reserve3;\n\n\tstruct MR_DEV_HANDLE_INFO  devHndlInfo[MAX_RAIDMAP_PHYSICAL_DEVICES];\n\tu8                  ldTgtIdToLd[MAX_LOGICAL_DRIVES_EXT];\n\tstruct MR_ARRAY_INFO       arMapInfo[MAX_API_ARRAYS_EXT];\n\tstruct MR_LD_SPAN_MAP      ldSpanMap[MAX_LOGICAL_DRIVES_EXT];\n};\n\n \nstruct MR_PD_CFG_SEQ {\n\tu16 seqNum;\n\tu16 devHandle;\n\tstruct {\n#if   defined(__BIG_ENDIAN_BITFIELD)\n\t\tu8     reserved:7;\n\t\tu8     tmCapable:1;\n#else\n\t\tu8     tmCapable:1;\n\t\tu8     reserved:7;\n#endif\n\t} capability;\n\tu8  reserved;\n\tu16 pd_target_id;\n} __packed;\n\nstruct MR_PD_CFG_SEQ_NUM_SYNC {\n\t__le32 size;\n\t__le32 count;\n\tstruct MR_PD_CFG_SEQ seq[];\n} __packed;\n\n \nstruct STREAM_DETECT {\n\tu64 next_seq_lba;  \n\tstruct megasas_cmd_fusion *first_cmd_fusion;  \n\tstruct megasas_cmd_fusion *last_cmd_fusion;  \n\tu32 count_cmds_in_stream;  \n\tu16 num_sges_in_group;  \n\tu8 is_read;  \n\tu8 group_depth;  \n\t \n\tbool group_flush;\n\tu8 reserved[7];  \n};\n\nstruct LD_STREAM_DETECT {\n\tbool write_back;  \n\tbool fp_write_enabled;\n\tbool members_ssds;\n\tbool fp_cache_bypass_capable;\n\tu32 mru_bit_map;  \n\t \n\tstruct STREAM_DETECT stream_track[MAX_STREAMS_TRACKED];\n};\n\nstruct MPI2_IOC_INIT_RDPQ_ARRAY_ENTRY {\n\tu64 RDPQBaseAddress;\n\tu32 Reserved1;\n\tu32 Reserved2;\n};\n\nstruct rdpq_alloc_detail {\n\tstruct dma_pool *dma_pool_ptr;\n\tdma_addr_t\tpool_entry_phys;\n\tunion MPI2_REPLY_DESCRIPTORS_UNION *pool_entry_virt;\n};\n\nstruct fusion_context {\n\tstruct megasas_cmd_fusion **cmd_list;\n\tdma_addr_t req_frames_desc_phys;\n\tu8 *req_frames_desc;\n\n\tstruct dma_pool *io_request_frames_pool;\n\tdma_addr_t io_request_frames_phys;\n\tu8 *io_request_frames;\n\n\tstruct dma_pool *sg_dma_pool;\n\tstruct dma_pool *sense_dma_pool;\n\n\tu8 *sense;\n\tdma_addr_t sense_phys_addr;\n\n\tatomic_t   busy_mq_poll[MAX_MSIX_QUEUES_FUSION];\n\n\tdma_addr_t reply_frames_desc_phys[MAX_MSIX_QUEUES_FUSION];\n\tunion MPI2_REPLY_DESCRIPTORS_UNION *reply_frames_desc[MAX_MSIX_QUEUES_FUSION];\n\tstruct rdpq_alloc_detail rdpq_tracker[RDPQ_MAX_CHUNK_COUNT];\n\tstruct dma_pool *reply_frames_desc_pool;\n\tstruct dma_pool *reply_frames_desc_pool_align;\n\n\tu16 last_reply_idx[MAX_MSIX_QUEUES_FUSION];\n\n\tu32 reply_q_depth;\n\tu32 request_alloc_sz;\n\tu32 reply_alloc_sz;\n\tu32 io_frames_alloc_sz;\n\n\tstruct MPI2_IOC_INIT_RDPQ_ARRAY_ENTRY *rdpq_virt;\n\tdma_addr_t rdpq_phys;\n\tu16\tmax_sge_in_main_msg;\n\tu16\tmax_sge_in_chain;\n\n\tu8\tchain_offset_io_request;\n\tu8\tchain_offset_mfi_pthru;\n\n\tstruct MR_FW_RAID_MAP_DYNAMIC *ld_map[2];\n\tdma_addr_t ld_map_phys[2];\n\n\t \n\tstruct MR_DRV_RAID_MAP_ALL *ld_drv_map[2];\n\n\tu32 max_map_sz;\n\tu32 current_map_sz;\n\tu32 old_map_sz;\n\tu32 new_map_sz;\n\tu32 drv_map_sz;\n\tu32 drv_map_pages;\n\tstruct MR_PD_CFG_SEQ_NUM_SYNC\t*pd_seq_sync[JBOD_MAPS_COUNT];\n\tdma_addr_t pd_seq_phys[JBOD_MAPS_COUNT];\n\tu8 fast_path_io;\n\tstruct LD_LOAD_BALANCE_INFO *load_balance_info;\n\tu32 load_balance_info_pages;\n\tLD_SPAN_INFO *log_to_span;\n\tu32 log_to_span_pages;\n\tstruct LD_STREAM_DETECT **stream_detect_by_ld;\n\tdma_addr_t ioc_init_request_phys;\n\tstruct MPI2_IOC_INIT_REQUEST *ioc_init_request;\n\tstruct megasas_cmd *ioc_init_cmd;\n\tbool pcie_bw_limitation;\n\tbool r56_div_offload;\n};\n\nunion desc_value {\n\t__le64 word;\n\tstruct {\n\t\t__le32 low;\n\t\t__le32 high;\n\t} u;\n};\n\nenum CMD_RET_VALUES {\n\tREFIRE_CMD = 1,\n\tCOMPLETE_CMD = 2,\n\tRETURN_CMD = 3,\n};\n\nstruct  MR_SNAPDUMP_PROPERTIES {\n\tu8       offload_num;\n\tu8       max_num_supported;\n\tu8       cur_num_supported;\n\tu8       trigger_min_num_sec_before_ocr;\n\tu8       reserved[12];\n};\n\nstruct megasas_debugfs_buffer {\n\tvoid *buf;\n\tu32 len;\n};\n\nvoid megasas_free_cmds_fusion(struct megasas_instance *instance);\nint megasas_ioc_init_fusion(struct megasas_instance *instance);\nu8 megasas_get_map_info(struct megasas_instance *instance);\nint megasas_sync_map_info(struct megasas_instance *instance);\nvoid megasas_release_fusion(struct megasas_instance *instance);\nvoid megasas_reset_reply_desc(struct megasas_instance *instance);\nint megasas_check_mpio_paths(struct megasas_instance *instance,\n\t\t\t      struct scsi_cmnd *scmd);\nvoid megasas_fusion_ocr_wq(struct work_struct *work);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}