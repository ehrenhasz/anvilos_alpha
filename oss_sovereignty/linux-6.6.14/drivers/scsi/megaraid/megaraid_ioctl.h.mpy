{
  "module_name": "megaraid_ioctl.h",
  "hash_id": "98cd246c66143feda65dd8ceb2d9c35fb36b03b875d3ddbaa0b18b85b925c598",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/megaraid/megaraid_ioctl.h",
  "human_readable_source": " \n \n\n#ifndef _MEGARAID_IOCTL_H_\n#define _MEGARAID_IOCTL_H_\n\n#include <linux/types.h>\n#include <linux/semaphore.h>\n#include <linux/timer.h>\n\n#include \"mbox_defs.h\"\n\n \n#define\tCL_ANN\t\t0\t \n#define CL_DLEVEL1\t1\t \n#define CL_DLEVEL2\t2\t \n#define CL_DLEVEL3\t3\t \n\n \n#define\tcon_log(level, fmt) if (LSI_DBGLVL >= level) printk fmt;\n\n \n\n#define MEGAIOC_MAGIC\t\t'm'\n#define MEGAIOCCMD\t\t_IOWR(MEGAIOC_MAGIC, 0, mimd_t)\n\n#define MEGAIOC_QNADAP\t\t'm'\t \n#define MEGAIOC_QDRVRVER\t'e'\t \n#define MEGAIOC_QADAPINFO   \t'g'\t \n\n#define USCSICMD\t\t0x80\n#define UIOC_RD\t\t\t0x00001\n#define UIOC_WR\t\t\t0x00002\n\n#define MBOX_CMD\t\t0x00000\n#define GET_DRIVER_VER\t\t0x10000\n#define GET_N_ADAP\t\t0x20000\n#define GET_ADAP_INFO\t\t0x30000\n#define GET_CAP\t\t\t0x40000\n#define GET_STATS\t\t0x50000\n#define GET_IOCTL_VERSION\t0x01\n\n#define EXT_IOCTL_SIGN_SZ\t16\n#define EXT_IOCTL_SIGN\t\t\"$$_EXTD_IOCTL_$$\"\n\n#define\tMBOX_LEGACY\t\t0x00\t\t \n#define MBOX_HPE\t\t0x01\t\t \n\n#define\tAPPTYPE_MIMD\t\t0x00\t\t \n#define APPTYPE_UIOC\t\t0x01\t\t \n\n#define IOCTL_ISSUE\t\t0x00000001\t \n#define IOCTL_ABORT\t\t0x00000002\t \n\n#define DRVRTYPE_MBOX\t\t0x00000001\t \n#define DRVRTYPE_HPE\t\t0x00000002\t \n\n#define MKADAP(adapno)\t(MEGAIOC_MAGIC << 8 | (adapno) )\n#define GETADAP(mkadap)\t((mkadap) ^ MEGAIOC_MAGIC << 8)\n\n#define MAX_DMA_POOLS\t\t5\t\t \n\n\n \ntypedef struct uioc {\n\n \n\n\tuint8_t\t\t\tsignature[EXT_IOCTL_SIGN_SZ];\n\tuint16_t\t\tmb_type;\n\tuint16_t\t\tapp_type;\n\tuint32_t\t\topcode;\n\tuint32_t\t\tadapno;\n\tuint64_t\t\tcmdbuf;\n\tuint32_t\t\txferlen;\n\tuint32_t\t\tdata_dir;\n\tint32_t\t\t\tstatus;\n\tuint8_t\t\t\treserved[128];\n\n \n\tvoid __user *\t\tuser_data;\n\tuint32_t\t\tuser_data_len;\n\n\t \n\tuint32_t                pad_for_64bit_align;\n\n\tmraid_passthru_t\t__user *user_pthru;\n\n\tmraid_passthru_t\t*pthru32;\n\tdma_addr_t\t\tpthru32_h;\n\n\tstruct list_head\tlist;\n\tvoid\t\t\t(*done)(struct uioc*);\n\n\tcaddr_t\t\t\tbuf_vaddr;\n\tdma_addr_t\t\tbuf_paddr;\n\tint8_t\t\t\tpool_index;\n\tuint8_t\t\t\tfree_buf;\n\n\tuint8_t\t\t\ttimedout;\n\n} __attribute__ ((aligned(1024),packed)) uioc_t;\n\n \nstruct uioc_timeout {\n\tstruct timer_list timer;\n\tuioc_t\t\t  *uioc;\n};\n\n \ntypedef struct mraid_hba_info {\n\n\tuint16_t\tpci_vendor_id;\n\tuint16_t\tpci_device_id;\n\tuint16_t\tsubsys_vendor_id;\n\tuint16_t\tsubsys_device_id;\n\n\tuint64_t\tbaseport;\n\tuint8_t\t\tpci_bus;\n\tuint8_t\t\tpci_dev_fn;\n\tuint8_t\t\tpci_slot;\n\tuint8_t\t\tirq;\n\n\tuint32_t\tunique_id;\n\tuint32_t\thost_no;\n\n\tuint8_t\t\tnum_ldrv;\n} __attribute__ ((aligned(256), packed)) mraid_hba_info_t;\n\n\n \ntypedef struct mcontroller {\n\n\tuint64_t\tbase;\n\tuint8_t\t\tirq;\n\tuint8_t\t\tnumldrv;\n\tuint8_t\t\tpcibus;\n\tuint16_t\tpcidev;\n\tuint8_t\t\tpcifun;\n\tuint16_t\tpciid;\n\tuint16_t\tpcivendor;\n\tuint8_t\t\tpcislot;\n\tuint32_t\tuid;\n\n} __attribute__ ((packed)) mcontroller_t;\n\n\n \ntypedef struct mm_dmapool {\n\tcaddr_t\t\tvaddr;\n\tdma_addr_t\tpaddr;\n\tuint32_t\tbuf_size;\n\tstruct dma_pool\t*handle;\n\tspinlock_t\tlock;\n\tuint8_t\t\tin_use;\n} mm_dmapool_t;\n\n\n \n\ntypedef struct mraid_mmadp {\n\n \n\n\tuint32_t\t\tunique_id;\n\tuint32_t\t\tdrvr_type;\n\tunsigned long\t\tdrvr_data;\n\tuint16_t\t\ttimeout;\n\tuint8_t\t\t\tmax_kioc;\n\n\tstruct pci_dev\t\t*pdev;\n\n\tint(*issue_uioc)(unsigned long, uioc_t *, uint32_t);\n\n \n\tuint32_t\t\tquiescent;\n\n\tstruct list_head\tlist;\n\tuioc_t\t\t\t*kioc_list;\n\tstruct list_head\tkioc_pool;\n\tspinlock_t\t\tkioc_pool_lock;\n\tstruct semaphore\tkioc_semaphore;\n\n\tmbox64_t\t\t*mbox_list;\n\tstruct dma_pool\t\t*pthru_dma_pool;\n\tmm_dmapool_t\t\tdma_pool_list[MAX_DMA_POOLS];\n\n} mraid_mmadp_t;\n\nint mraid_mm_register_adp(mraid_mmadp_t *);\nint mraid_mm_unregister_adp(uint32_t);\nuint32_t mraid_mm_adapter_app_handle(uint32_t);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}