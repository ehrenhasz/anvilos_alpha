{
  "module_name": "snic_res.h",
  "hash_id": "a1bfb976b8773ba675c8dca72630efb5e5c63513aece10c49ef99eef77f0c6d6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/snic/snic_res.h",
  "human_readable_source": " \n \n\n#ifndef __SNIC_RES_H\n#define __SNIC_RES_H\n\n#include \"snic_io.h\"\n#include \"wq_enet_desc.h\"\n#include \"vnic_wq.h\"\n#include \"snic_fwint.h\"\n#include \"vnic_cq_fw.h\"\n\nstatic inline void\nsnic_icmnd_init(struct snic_host_req *req, u32 cmnd_id, u32 host_id, u64 ctx,\n\t\tu16 flags, u64 tgt_id, u8 *lun, u8 *scsi_cdb, u8 cdb_len,\n\t\tu32 data_len, u16 sg_cnt, ulong sgl_addr,\n\t\tdma_addr_t sns_addr_pa, u32 sense_len)\n{\n\tsnic_io_hdr_enc(&req->hdr, SNIC_REQ_ICMND, 0, cmnd_id, host_id, sg_cnt,\n\t\t\tctx);\n\n\treq->u.icmnd.flags = cpu_to_le16(flags);\n\treq->u.icmnd.tgt_id = cpu_to_le64(tgt_id);\n\tmemcpy(&req->u.icmnd.lun_id, lun, LUN_ADDR_LEN);\n\treq->u.icmnd.cdb_len = cdb_len;\n\tmemset(req->u.icmnd.cdb, 0, SNIC_CDB_LEN);\n\tmemcpy(req->u.icmnd.cdb, scsi_cdb, cdb_len);\n\treq->u.icmnd.data_len = cpu_to_le32(data_len);\n\treq->u.icmnd.sg_addr = cpu_to_le64(sgl_addr);\n\treq->u.icmnd.sense_len = cpu_to_le32(sense_len);\n\treq->u.icmnd.sense_addr = cpu_to_le64(sns_addr_pa);\n}\n\nstatic inline void\nsnic_itmf_init(struct snic_host_req *req, u32 cmnd_id, u32 host_id, ulong ctx,\n\t       u16 flags, u32 req_id, u64 tgt_id, u8 *lun, u8 tm_type)\n{\n\tsnic_io_hdr_enc(&req->hdr, SNIC_REQ_ITMF, 0, cmnd_id, host_id, 0, ctx);\n\n\treq->u.itmf.tm_type = tm_type;\n\treq->u.itmf.flags = cpu_to_le16(flags);\n\t \n\treq->u.itmf.req_id = cpu_to_le32(req_id);\n\treq->u.itmf.tgt_id = cpu_to_le64(tgt_id);\n\tmemcpy(&req->u.itmf.lun_id, lun, LUN_ADDR_LEN);\n}\n\nstatic inline void\nsnic_queue_wq_eth_desc(struct vnic_wq *wq,\n\t\t       void *os_buf,\n\t\t       dma_addr_t dma_addr,\n\t\t       unsigned int len,\n\t\t       int vlan_tag_insert,\n\t\t       unsigned int vlan_tag,\n\t\t       int cq_entry)\n{\n\tstruct wq_enet_desc *desc = svnic_wq_next_desc(wq);\n\n\twq_enet_desc_enc(desc,\n\t\t\t(u64)dma_addr | VNIC_PADDR_TARGET,\n\t\t\t(u16)len,\n\t\t\t0,  \n\t\t\t0,  \n\t\t\t0,  \n\t\t\t1,  \n\t\t\t(u8)cq_entry,\n\t\t\t0,  \n\t\t\t(u8)vlan_tag_insert,\n\t\t\t(u16)vlan_tag,\n\t\t\t0  );\n\n\tsvnic_wq_post(wq, os_buf, dma_addr, len, 1, 1);\n}\n\nstruct snic;\n\nint snic_get_vnic_config(struct snic *);\nint snic_alloc_vnic_res(struct snic *);\nvoid snic_free_vnic_res(struct snic *);\nvoid snic_get_res_counts(struct snic *);\nvoid snic_log_q_error(struct snic *);\nint snic_get_vnic_resources_size(struct snic *);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}