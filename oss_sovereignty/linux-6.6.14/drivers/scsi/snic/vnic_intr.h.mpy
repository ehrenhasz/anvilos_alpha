{
  "module_name": "vnic_intr.h",
  "hash_id": "230ac86ec3515fb1bc544a850b28c6fed52375ad9858d487740ace0fa073cb5c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/snic/vnic_intr.h",
  "human_readable_source": " \n \n\n#ifndef _VNIC_INTR_H_\n#define _VNIC_INTR_H_\n\n#include <linux/pci.h>\n#include \"vnic_dev.h\"\n\n#define VNIC_INTR_TIMER_MAX\t\t0xffff\n\n#define VNIC_INTR_TIMER_TYPE_ABS\t0\n#define VNIC_INTR_TIMER_TYPE_QUIET\t1\n\n \nstruct vnic_intr_ctrl {\n\tu32 coalescing_timer;\t\t \n\tu32 pad0;\n\tu32 coalescing_value;\t\t \n\tu32 pad1;\n\tu32 coalescing_type;\t\t \n\tu32 pad2;\n\tu32 mask_on_assertion;\t\t \n\tu32 pad3;\n\tu32 mask;\t\t\t \n\tu32 pad4;\n\tu32 int_credits;\t\t \n\tu32 pad5;\n\tu32 int_credit_return;\t\t \n\tu32 pad6;\n};\n\nstruct vnic_intr {\n\tunsigned int index;\n\tstruct vnic_dev *vdev;\n\tstruct vnic_intr_ctrl __iomem *ctrl;\t \n};\n\nstatic inline void\nsvnic_intr_unmask(struct vnic_intr *intr)\n{\n\tiowrite32(0, &intr->ctrl->mask);\n}\n\nstatic inline void\nsvnic_intr_mask(struct vnic_intr *intr)\n{\n\tiowrite32(1, &intr->ctrl->mask);\n}\n\nstatic inline void\nsvnic_intr_return_credits(struct vnic_intr *intr,\n\t\t\t  unsigned int credits,\n\t\t\t  int unmask,\n\t\t\t  int reset_timer)\n{\n#define VNIC_INTR_UNMASK_SHIFT\t\t16\n#define VNIC_INTR_RESET_TIMER_SHIFT\t17\n\n\tu32 int_credit_return = (credits & 0xffff) |\n\t\t(unmask ? (1 << VNIC_INTR_UNMASK_SHIFT) : 0) |\n\t\t(reset_timer ? (1 << VNIC_INTR_RESET_TIMER_SHIFT) : 0);\n\n\tiowrite32(int_credit_return, &intr->ctrl->int_credit_return);\n}\n\nstatic inline unsigned int\nsvnic_intr_credits(struct vnic_intr *intr)\n{\n\treturn ioread32(&intr->ctrl->int_credits);\n}\n\nstatic inline void\nsvnic_intr_return_all_credits(struct vnic_intr *intr)\n{\n\tunsigned int credits = svnic_intr_credits(intr);\n\tint unmask = 1;\n\tint reset_timer = 1;\n\n\tsvnic_intr_return_credits(intr, credits, unmask, reset_timer);\n}\n\nvoid svnic_intr_free(struct vnic_intr *);\nint svnic_intr_alloc(struct vnic_dev *, struct vnic_intr *, unsigned int);\nvoid svnic_intr_init(struct vnic_intr *intr,\n\t\t     unsigned int coalescing_timer,\n\t\t     unsigned int coalescing_type,\n\t\t     unsigned int mask_on_assertion);\nvoid svnic_intr_clean(struct vnic_intr *);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}