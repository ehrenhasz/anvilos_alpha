{
  "module_name": "vnic_cq_fw.h",
  "hash_id": "4076db0538d8dc404928e99add9c7c7e09bc5445507e4b37c2583890b8178567",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/snic/vnic_cq_fw.h",
  "human_readable_source": " \n \n\n#ifndef _VNIC_CQ_FW_H_\n#define _VNIC_CQ_FW_H_\n\n#include \"snic_fwint.h\"\n\nstatic inline unsigned int\nvnic_cq_fw_service(struct vnic_cq *cq,\n\t\t   int (*q_service)(struct vnic_dev *vdev,\n\t\t\t\t    unsigned int index,\n\t\t\t\t    struct snic_fw_req *desc),\n\t\t   unsigned int work_to_do)\n\n{\n\tstruct snic_fw_req *desc;\n\tunsigned int work_done = 0;\n\tu8 color;\n\n\tdesc = (struct snic_fw_req *)((u8 *)cq->ring.descs +\n\t\tcq->ring.desc_size * cq->to_clean);\n\tsnic_color_dec(desc, &color);\n\n\twhile (color != cq->last_color) {\n\n\t\tif ((*q_service)(cq->vdev, cq->index, desc))\n\t\t\tbreak;\n\n\t\tcq->to_clean++;\n\t\tif (cq->to_clean == cq->ring.desc_count) {\n\t\t\tcq->to_clean = 0;\n\t\t\tcq->last_color = cq->last_color ? 0 : 1;\n\t\t}\n\n\t\tdesc = (struct snic_fw_req *)((u8 *)cq->ring.descs +\n\t\t\tcq->ring.desc_size * cq->to_clean);\n\t\tsnic_color_dec(desc, &color);\n\n\t\twork_done++;\n\t\tif (work_done >= work_to_do)\n\t\t\tbreak;\n\t}\n\n\treturn work_done;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}