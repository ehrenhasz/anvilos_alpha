{
  "module_name": "snic_fwint.h",
  "hash_id": "05396436c155857aee89bb271ce357ccfa1a3d0655258140f7ad6182c8f3a628",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/snic/snic_fwint.h",
  "human_readable_source": " \n \n\n#ifndef __SNIC_FWINT_H\n#define __SNIC_FWINT_H\n\n#define SNIC_CDB_LEN\t32\t \n#define LUN_ADDR_LEN\t8\n\n \nenum snic_io_type {\n\t \n\tSNIC_REQ_REPORT_TGTS = 0x2,\t \n\tSNIC_REQ_ICMND,\t\t\t \n\tSNIC_REQ_ITMF,\t\t\t \n\tSNIC_REQ_HBA_RESET,\t\t \n\tSNIC_REQ_EXCH_VER,\t\t \n\tSNIC_REQ_TGT_INFO,\t\t \n\tSNIC_REQ_BOOT_LUNS,\n\n\t \n\tSNIC_RSP_REPORT_TGTS_CMPL = 0x12, \n\tSNIC_RSP_ICMND_CMPL,\t\t \n\tSNIC_RSP_ITMF_CMPL,\t\t \n\tSNIC_RSP_HBA_RESET_CMPL,\t \n\tSNIC_RSP_EXCH_VER_CMPL,\t\t \n\tSNIC_RSP_BOOT_LUNS_CMPL,\n\n\t \n\tSNIC_MSG_ACK = 0x80,\t\t \n\tSNIC_MSG_ASYNC_EVNOTIFY,\t \n};  \n\n\n \nenum snic_io_status {\n\tSNIC_STAT_IO_SUCCESS = 0,\t \n\n\t \n\tSNIC_STAT_INVALID_HDR,\t \n\tSNIC_STAT_OUT_OF_RES,\t \n\tSNIC_STAT_INVALID_PARM,\t \n\tSNIC_STAT_REQ_NOT_SUP,\t \n\tSNIC_STAT_IO_NOT_FOUND,\t \n\n\t \n\tSNIC_STAT_ABORTED,\t\t \n\tSNIC_STAT_TIMEOUT,\t\t \n\tSNIC_STAT_SGL_INVALID,\t\t \n\tSNIC_STAT_DATA_CNT_MISMATCH,\t \n\tSNIC_STAT_FW_ERR,\t\t \n\tSNIC_STAT_ITMF_REJECT,\t\t \n\tSNIC_STAT_ITMF_FAIL,\t\t \n\tSNIC_STAT_ITMF_INCORRECT_LUN,\t \n\tSNIC_STAT_CMND_REJECT,\t\t \n\tSNIC_STAT_DEV_OFFLINE,\t\t \n\tSNIC_STAT_NO_BOOTLUN,\n\tSNIC_STAT_SCSI_ERR,\t\t \n\tSNIC_STAT_NOT_READY,\t\t \n\tSNIC_STAT_FATAL_ERROR,\t\t \n};  \n\n \nstruct snic_io_hdr {\n\t__le32\thid;\n\t__le32\tcmnd_id;\t \n\tulong\tinit_ctx;\t \n\tu8\ttype;\t\t \n\tu8\tstatus;\t\t \n\tu8\tprotocol;\t \n\tu8\tflags;\n\t__le16\tsg_cnt;\n\tu16\tresvd;\n};\n\n \nstatic inline void\nsnic_io_hdr_enc(struct snic_io_hdr *hdr, u8 typ, u8 status, u32 id, u32 hid,\n\t\tu16 sg_cnt, ulong ctx)\n{\n\thdr->type = typ;\n\thdr->status = status;\n\thdr->protocol = 0;\n\thdr->hid = cpu_to_le32(hid);\n\thdr->cmnd_id = cpu_to_le32(id);\n\thdr->sg_cnt = cpu_to_le16(sg_cnt);\n\thdr->init_ctx = ctx;\n\thdr->flags = 0;\n}\n\n \nstatic inline void\nsnic_io_hdr_dec(struct snic_io_hdr *hdr, u8 *typ, u8 *stat, u32 *cmnd_id,\n\t\tu32 *hid, ulong *ctx)\n{\n\t*typ = hdr->type;\n\t*stat = hdr->status;\n\t*hid = le32_to_cpu(hdr->hid);\n\t*cmnd_id = le32_to_cpu(hdr->cmnd_id);\n\t*ctx = hdr->init_ctx;\n}\n\n \nstruct snic_exch_ver_req {\n\t__le32\tdrvr_ver;\t \n\t__le32\tos_type;\t \n};\n\n \n#define SNIC_OS_LINUX\t0x1\n#define SNIC_OS_WIN\t0x2\n#define SNIC_OS_ESX\t0x3\n\n \n#define SNIC_HBA_CAP_DDL\t0x02\t \n#define SNIC_HBA_CAP_AEN\t0x04\t \n#define SNIC_HBA_CAP_TMO\t0x08\t \n\n \nstruct snic_exch_ver_rsp {\n\t__le32\tversion;\n\t__le32\thid;\n\t__le32\tmax_concur_ios;\t\t \n\t__le32\tmax_sgs_per_cmd;\t \n\t__le32\tmax_io_sz;\t\t \n\t__le32\thba_cap;\t\t \n\t__le32\tmax_tgts;\t\t \n\t__le16\tio_timeout;\t\t \n\tu16\trsvd;\n};\n\n\n \nstruct snic_report_tgts {\n\t__le16\tsg_cnt;\n\t__le16\tflags;\t\t \n\tu8\t_resvd[4];\n\t__le64\tsg_addr;\t \n\t__le64\tsense_addr;\n};\n\nenum snic_type {\n\tSNIC_NONE = 0x0,\n\tSNIC_DAS,\n\tSNIC_SAN,\n};\n\n\n \nenum snic_tgt_type {\n\tSNIC_TGT_NONE = 0x0,\n\tSNIC_TGT_DAS,\t \n\tSNIC_TGT_SAN,\t \n};\n\n \nstruct snic_tgt_id {\n\t__le32\ttgt_id;\t\t \n\t__le16\ttgt_type;\t \n\t__le16\tvnic_id;\t \n};\n\n \nstruct snic_report_tgts_cmpl {\n\t__le32\ttgt_cnt;\t \n\tu32\t_resvd;\n};\n\n \n\n#define SNIC_ICMND_WR\t\t0x01\t \n#define SNIC_ICMND_RD\t\t0x02\t \n#define SNIC_ICMND_ESGL\t\t0x04\t \n\n \n#define SNIC_ICMND_TSK_SHIFT\t\t2\t \n#define SNIC_ICMND_TSK_MASK(x)\t\t((x>>SNIC_ICMND_TSK_SHIFT) & ~(0xffff))\n#define SNIC_ICMND_TSK_SIMPLE\t\t0\t \n#define SNIC_ICMND_TSK_HEAD_OF_QUEUE\t1\t \n#define SNIC_ICMND_TSK_ORDERED\t\t2\t \n\n#define SNIC_ICMND_PRI_SHIFT\t\t5\t \n\n \nstruct snic_icmnd {\n\t__le16\tsg_cnt;\t\t \n\t__le16\tflags;\t\t \n\t__le32\tsense_len;\t \n\t__le64\ttgt_id;\t\t \n\t__le64\tlun_id;\t\t \n\tu8\tcdb_len;\n\tu8\t_resvd;\n\t__le16\ttime_out;\t \n\t__le32\tdata_len;\t \n\tu8\tcdb[SNIC_CDB_LEN];\n\t__le64\tsg_addr;\t \n\t__le64\tsense_addr;\t \n};\n\n\n \n \n#define SNIC_ICMND_CMPL_UNDR_RUN\t0x01\t \n#define SNIC_ICMND_CMPL_OVER_RUN\t0x02\t \n\n \nstruct snic_icmnd_cmpl {\n\tu8\tscsi_status;\t \n\tu8\tflags;\n\t__le16\tsense_len;\t \n\t__le32\tresid;\t\t \n};\n\n \nstruct snic_itmf {\n\tu8\ttm_type;\t \n\tu8\tresvd;\n\t__le16\tflags;\t\t \n\t__le32\treq_id;\t\t \n\t__le64\ttgt_id;\t\t \n\t__le64\tlun_id;\t\t \n\t__le16\ttimeout;\t \n};\n\n \nenum snic_itmf_tm_type {\n\tSNIC_ITMF_ABTS_TASK = 0x01,\t \n\tSNIC_ITMF_ABTS_TASK_SET,\t \n\tSNIC_ITMF_CLR_TASK,\t\t \n\tSNIC_ITMF_CLR_TASKSET,\t\t \n\tSNIC_ITMF_LUN_RESET,\t\t \n\tSNIC_ITMF_ABTS_TASK_TERM,\t \n};\n\n \nstruct snic_itmf_cmpl {\n\t__le32\tnterminated;\t \n\tu8\tflags;\t\t \n\tu8\t_resvd[3];\n};\n\n \n#define SNIC_NUM_TERM_VALID\t0x01\t \n\n \nstruct snic_hba_reset {\n\t__le16\tflags;\t\t \n\tu8\t_resvd[6];\n};\n\n \nstruct snic_hba_reset_cmpl {\n\tu8\tflags;\t\t \n\tu8\t_resvd[7];\n};\n\n \nstruct snic_notify_msg {\n\t__le32\twqe_num;\t \n\tu8\tflags;\t\t \n\tu8\t_resvd[4];\n};\n\n\n#define SNIC_EVDATA_LEN\t\t24\t \n \nstruct snic_async_evnotify {\n\tu8\tFLS_EVENT_DESC;\n\tu8\tvnic;\t\t\t \n\tu8\t_resvd[2];\n\t__le32\tev_id;\t\t\t \n\tu8\tev_data[SNIC_EVDATA_LEN];  \n\tu8\t_resvd2[4];\n};\n\n \nenum snic_ev_type {\n\tSNIC_EV_TGT_OFFLINE = 0x01,  \n\tSNIC_EV_TGT_ONLINE,\t \n\tSNIC_EV_LUN_OFFLINE,\t \n\tSNIC_EV_LUN_ONLINE,\t \n\tSNIC_EV_CONF_CHG,\t \n\tSNIC_EV_TGT_ADDED,\t \n\tSNIC_EV_TGT_DELTD,\t \n\tSNIC_EV_LUN_ADDED,\t \n\tSNIC_EV_LUN_DELTD,\t \n\n\tSNIC_EV_DISC_CMPL = 0x10,  \n};\n\n\n#define SNIC_HOST_REQ_LEN\t128\t \n \n#define SNIC_HOST_REQ_PAYLOAD\t((int)(SNIC_HOST_REQ_LEN -\t\t\\\n\t\t\t\t\tsizeof(struct snic_io_hdr) -\t\\\n\t\t\t\t\t(2 * sizeof(u64)) - sizeof(ulong)))\n\n \nstruct snic_host_req {\n\tu64\tctrl_data[2];\t \n\tstruct snic_io_hdr hdr;\n\tunion {\n\t\t \n\t\tu8\tbuf[SNIC_HOST_REQ_PAYLOAD];\n\n\t\t \n\t\tstruct snic_exch_ver_req\texch_ver;\n\n\t\t \n\t\tstruct snic_report_tgts\t\trpt_tgts;\n\n\t\t \n\t\tstruct snic_icmnd\t\ticmnd;\n\n\t\t \n\t\tstruct snic_itmf\t\titmf;\n\n\t\t \n\t\tstruct snic_hba_reset\t\treset;\n\t} u;\n\n\tulong req_pa;\n};  \n\n\n#define SNIC_FW_REQ_LEN\t\t64  \nstruct snic_fw_req {\n\tstruct snic_io_hdr hdr;\n\tunion {\n\t\t \n\t\tu8\tbuf[SNIC_FW_REQ_LEN - sizeof(struct snic_io_hdr)];\n\n\t\t \n\t\tstruct snic_exch_ver_rsp\texch_ver_cmpl;\n\n\t\t \n\t\tstruct snic_report_tgts_cmpl\trpt_tgts_cmpl;\n\n\t\t \n\t\tstruct snic_icmnd_cmpl\t\ticmnd_cmpl;\n\n\t\t \n\t\tstruct snic_itmf_cmpl\t\titmf_cmpl;\n\n\t\t \n\t\tstruct snic_hba_reset_cmpl\treset_cmpl;\n\n\t\t \n\t\tstruct snic_notify_msg\t\tack;\n\n\t\t \n\t\tstruct snic_async_evnotify\tasync_ev;\n\n\t} u;\n};  \n\n \n#define VERIFY_REQ_SZ(x)\n#define VERIFY_CMPL_SZ(x)\n\n \nstatic inline void\nsnic_color_enc(struct snic_fw_req *req, u8 color)\n{\n\tu8 *c = ((u8 *) req) + sizeof(struct snic_fw_req) - 1;\n\n\tif (color)\n\t\t*c |= 0x80;\n\telse\n\t\t*c &= ~0x80;\n}\n\nstatic inline void\nsnic_color_dec(struct snic_fw_req *req, u8 *color)\n{\n\tu8 *c = ((u8 *) req) + sizeof(struct snic_fw_req) - 1;\n\n\t*color = *c >> 7;\n\n\t \n\trmb();\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}