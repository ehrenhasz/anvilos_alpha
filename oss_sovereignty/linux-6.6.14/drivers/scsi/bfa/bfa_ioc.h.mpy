{
  "module_name": "bfa_ioc.h",
  "hash_id": "426c9b25ed9433e39742685bdb16d77fd6b173507b4ed9795efcd963468bd1c9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/bfa/bfa_ioc.h",
  "human_readable_source": " \n \n\n#ifndef __BFA_IOC_H__\n#define __BFA_IOC_H__\n\n#include \"bfad_drv.h\"\n#include \"bfa_cs.h\"\n#include \"bfi.h\"\n\n#define BFA_DBG_FWTRC_ENTS\t(BFI_IOC_TRC_ENTS)\n#define BFA_DBG_FWTRC_LEN\t\t\t\t\t\\\n\t(BFA_DBG_FWTRC_ENTS * sizeof(struct bfa_trc_s) +\t\\\n\t(sizeof(struct bfa_trc_mod_s) -\t\t\t\t\\\n\tBFA_TRC_MAX * sizeof(struct bfa_trc_s)))\n \ntypedef void (*bfa_timer_cbfn_t)(void *);\n\n \nstruct bfa_timer_s {\n\tstruct list_head\tqe;\n\tbfa_timer_cbfn_t timercb;\n\tvoid\t\t*arg;\n\tint\t\ttimeout;\t \n};\n\n \nstruct bfa_timer_mod_s {\n\tstruct list_head timer_q;\n};\n\n#define BFA_TIMER_FREQ 200  \n\nvoid bfa_timer_beat(struct bfa_timer_mod_s *mod);\nvoid bfa_timer_begin(struct bfa_timer_mod_s *mod, struct bfa_timer_s *timer,\n\t\t\tbfa_timer_cbfn_t timercb, void *arg,\n\t\t\tunsigned int timeout);\nvoid bfa_timer_stop(struct bfa_timer_s *timer);\n\n \nstruct bfa_sge_s {\n\tu32\tsg_len;\n\tvoid\t\t*sg_addr;\n};\n\n#define bfa_sge_word_swap(__sge) do {\t\t\t\t\t     \\\n\t((u32 *)(__sge))[0] = swab32(((u32 *)(__sge))[0]);      \\\n\t((u32 *)(__sge))[1] = swab32(((u32 *)(__sge))[1]);      \\\n\t((u32 *)(__sge))[2] = swab32(((u32 *)(__sge))[2]);      \\\n} while (0)\n\n#define bfa_swap_words(_x)  (\t\\\n\t((u64)(_x) << 32) | ((u64)(_x) >> 32))\n\n#ifdef __BIG_ENDIAN\n#define bfa_sge_to_be(_x)\n#define bfa_sge_to_le(_x)\tbfa_sge_word_swap(_x)\n#define bfa_sgaddr_le(_x)\tbfa_swap_words(_x)\n#else\n#define\tbfa_sge_to_be(_x)\tbfa_sge_word_swap(_x)\n#define bfa_sge_to_le(_x)\n#define bfa_sgaddr_le(_x)\t(_x)\n#endif\n\n \nstruct bfa_mem_dma_s {\n\tstruct list_head qe;\t\t \n\tu32\t\tmem_len;\t \n\tu8\t\t*kva;\t\t \n\tu64\t\tdma;\t\t \n\tu8\t\t*kva_curp;\t \n\tu64\t\tdma_curp;\t \n};\n#define bfa_mem_dma_t struct bfa_mem_dma_s\n\nstruct bfa_mem_kva_s {\n\tstruct list_head qe;\t\t \n\tu32\t\tmem_len;\t \n\tu8\t\t*kva;\t\t \n\tu8\t\t*kva_curp;\t \n};\n#define bfa_mem_kva_t struct bfa_mem_kva_s\n\nstruct bfa_meminfo_s {\n\tstruct bfa_mem_dma_s dma_info;\n\tstruct bfa_mem_kva_s kva_info;\n};\n\n \nstatic inline void bfa_mem_dma_setup(struct bfa_meminfo_s *meminfo,\n\t\t\t\t     struct bfa_mem_dma_s *dm_ptr,\n\t\t\t\t     size_t seg_sz)\n{\n\tdm_ptr->mem_len = seg_sz;\n\tif (seg_sz)\n\t\tlist_add_tail(&dm_ptr->qe, &meminfo->dma_info.qe);\n}\n\nstatic inline void bfa_mem_kva_setup(struct bfa_meminfo_s *meminfo,\n\t\t\t\t     struct bfa_mem_kva_s *kva_ptr,\n\t\t\t\t     size_t seg_sz)\n{\n\tkva_ptr->mem_len = seg_sz;\n\tif (seg_sz)\n\t\tlist_add_tail(&kva_ptr->qe, &meminfo->kva_info.qe);\n}\n\n \n#define bfa_mem_dma_sptr(_mod, _i)\t(&(_mod)->dma_seg[(_i)])\n#define bfa_mem_dma_seg_iter(_mod, _sptr, _nr, _i)\t\t\t\\\n\tfor (_i = 0, _sptr = bfa_mem_dma_sptr(_mod, _i); _i < (_nr);\t\\\n\t     _i++, _sptr = bfa_mem_dma_sptr(_mod, _i))\n\n#define bfa_mem_kva_curp(_mod)\t((_mod)->kva_seg.kva_curp)\n#define bfa_mem_dma_virt(_sptr)\t((_sptr)->kva_curp)\n#define bfa_mem_dma_phys(_sptr)\t((_sptr)->dma_curp)\n#define bfa_mem_dma_len(_sptr)\t((_sptr)->mem_len)\n\n \n#define bfa_mem_get_dmabuf_kva(_mod, _tag, _rqsz)\t\t\t      \\\n\t(((u8 *)(_mod)->dma_seg[BFI_MEM_SEG_FROM_TAG(_tag, _rqsz)].kva_curp) +\\\n\t BFI_MEM_SEG_REQ_OFFSET(_tag, _rqsz) * (_rqsz))\n\n \n#define bfa_mem_get_dmabuf_pa(_mod, _tag, _rqsz)\t\t\t\\\n\t((_mod)->dma_seg[BFI_MEM_SEG_FROM_TAG(_tag, _rqsz)].dma_curp +\t\\\n\t BFI_MEM_SEG_REQ_OFFSET(_tag, _rqsz) * (_rqsz))\n\n \nstruct bfa_pcidev_s {\n\tint\t\tpci_slot;\n\tu8\t\tpci_func;\n\tu16\t\tdevice_id;\n\tu16\t\tssid;\n\tvoid __iomem\t*pci_bar_kva;\n};\n\n \nstruct bfa_dma_s {\n\tvoid\t\t*kva;\t \n\tu64\tpa;\t \n};\n\n#define BFA_DMA_ALIGN_SZ\t256\n#define BFA_ROUNDUP(_l, _s)\t(((_l) + ((_s) - 1)) & ~((_s) - 1))\n\n \n#define BFI_SMEM_CB_SIZE\t0x200000U\t \n#define BFI_SMEM_CT_SIZE\t0x280000U\t \n\n#define bfa_dma_be_addr_set(dma_addr, pa)\t\\\n\t\t__bfa_dma_be_addr_set(&dma_addr, (u64)pa)\nstatic inline void\n__bfa_dma_be_addr_set(union bfi_addr_u *dma_addr, u64 pa)\n{\n\tdma_addr->a32.addr_lo = cpu_to_be32(pa);\n\tdma_addr->a32.addr_hi = cpu_to_be32(pa >> 32);\n}\n\n#define bfa_alen_set(__alen, __len, __pa)\t\\\n\t__bfa_alen_set(__alen, __len, (u64)__pa)\n\nstatic inline void\n__bfa_alen_set(struct bfi_alen_s *alen, u32 len, u64 pa)\n{\n\talen->al_len = cpu_to_be32(len);\n\tbfa_dma_be_addr_set(alen->al_addr, pa);\n}\n\nstruct bfa_ioc_regs_s {\n\tvoid __iomem *hfn_mbox_cmd;\n\tvoid __iomem *hfn_mbox;\n\tvoid __iomem *lpu_mbox_cmd;\n\tvoid __iomem *lpu_mbox;\n\tvoid __iomem *lpu_read_stat;\n\tvoid __iomem *pss_ctl_reg;\n\tvoid __iomem *pss_err_status_reg;\n\tvoid __iomem *app_pll_fast_ctl_reg;\n\tvoid __iomem *app_pll_slow_ctl_reg;\n\tvoid __iomem *ioc_sem_reg;\n\tvoid __iomem *ioc_usage_sem_reg;\n\tvoid __iomem *ioc_init_sem_reg;\n\tvoid __iomem *ioc_usage_reg;\n\tvoid __iomem *host_page_num_fn;\n\tvoid __iomem *heartbeat;\n\tvoid __iomem *ioc_fwstate;\n\tvoid __iomem *alt_ioc_fwstate;\n\tvoid __iomem *ll_halt;\n\tvoid __iomem *alt_ll_halt;\n\tvoid __iomem *err_set;\n\tvoid __iomem *ioc_fail_sync;\n\tvoid __iomem *shirq_isr_next;\n\tvoid __iomem *shirq_msk_next;\n\tvoid __iomem *smem_page_start;\n\tu32\tsmem_pg0;\n};\n\n#define bfa_mem_read(_raddr, _off)\tswab32(readl(((_raddr) + (_off))))\n#define bfa_mem_write(_raddr, _off, _val)\t\\\n\t\t\twritel(swab32((_val)), ((_raddr) + (_off)))\n \nstruct bfa_mbox_cmd_s {\n\tstruct list_head\tqe;\n\tu32\tmsg[BFI_IOC_MSGSZ];\n};\n\n \ntypedef void (*bfa_ioc_mbox_mcfunc_t)(void *cbarg, struct bfi_mbmsg_s *m);\nstruct bfa_ioc_mbox_mod_s {\n\tstruct list_head\t\tcmd_q;\t \n\tint\t\t\tnmclass;\t \n\tstruct {\n\t\tbfa_ioc_mbox_mcfunc_t\tcbfn;\t \n\t\tvoid\t\t\t*cbarg;\n\t} mbhdlr[BFI_MC_MAX];\n};\n\n \ntypedef void (*bfa_ioc_enable_cbfn_t)(void *bfa, enum bfa_status status);\ntypedef void (*bfa_ioc_disable_cbfn_t)(void *bfa);\ntypedef void (*bfa_ioc_hbfail_cbfn_t)(void *bfa);\ntypedef void (*bfa_ioc_reset_cbfn_t)(void *bfa);\nstruct bfa_ioc_cbfn_s {\n\tbfa_ioc_enable_cbfn_t\tenable_cbfn;\n\tbfa_ioc_disable_cbfn_t\tdisable_cbfn;\n\tbfa_ioc_hbfail_cbfn_t\thbfail_cbfn;\n\tbfa_ioc_reset_cbfn_t\treset_cbfn;\n};\n\n \nenum bfa_ioc_event_e {\n\tBFA_IOC_E_ENABLED\t= 1,\n\tBFA_IOC_E_DISABLED\t= 2,\n\tBFA_IOC_E_FAILED\t= 3,\n};\n\ntypedef void (*bfa_ioc_notify_cbfn_t)(void *, enum bfa_ioc_event_e);\n\nstruct bfa_ioc_notify_s {\n\tstruct list_head\t\tqe;\n\tbfa_ioc_notify_cbfn_t\tcbfn;\n\tvoid\t\t\t*cbarg;\n};\n\n \n#define bfa_ioc_notify_init(__notify, __cbfn, __cbarg) do {\t\\\n\t(__notify)->cbfn = (__cbfn);      \\\n\t(__notify)->cbarg = (__cbarg);      \\\n} while (0)\n\nstruct bfa_iocpf_s {\n\tbfa_fsm_t\t\tfsm;\n\tstruct bfa_ioc_s\t*ioc;\n\tbfa_boolean_t\t\tfw_mismatch_notified;\n\tbfa_boolean_t\t\tauto_recover;\n\tu32\t\t\tpoll_time;\n};\n\nstruct bfa_ioc_s {\n\tbfa_fsm_t\t\tfsm;\n\tstruct bfa_s\t\t*bfa;\n\tstruct bfa_pcidev_s\tpcidev;\n\tstruct bfa_timer_mod_s\t*timer_mod;\n\tstruct bfa_timer_s\tioc_timer;\n\tstruct bfa_timer_s\tsem_timer;\n\tstruct bfa_timer_s\thb_timer;\n\tu32\t\thb_count;\n\tstruct list_head\tnotify_q;\n\tvoid\t\t\t*dbg_fwsave;\n\tint\t\t\tdbg_fwsave_len;\n\tbfa_boolean_t\t\tdbg_fwsave_once;\n\tenum bfi_pcifn_class\tclscode;\n\tstruct bfa_ioc_regs_s\tioc_regs;\n\tstruct bfa_trc_mod_s\t*trcmod;\n\tstruct bfa_ioc_drv_stats_s\tstats;\n\tbfa_boolean_t\t\tfcmode;\n\tbfa_boolean_t\t\tpllinit;\n\tbfa_boolean_t\t\tstats_busy;\t \n\tu8\t\t\tport_id;\n\tstruct bfa_dma_s\tattr_dma;\n\tstruct bfi_ioc_attr_s\t*attr;\n\tstruct bfa_ioc_cbfn_s\t*cbfn;\n\tstruct bfa_ioc_mbox_mod_s mbox_mod;\n\tstruct bfa_ioc_hwif_s\t*ioc_hwif;\n\tstruct bfa_iocpf_s\tiocpf;\n\tenum bfi_asic_gen\tasic_gen;\n\tenum bfi_asic_mode\tasic_mode;\n\tenum bfi_port_mode\tport0_mode;\n\tenum bfi_port_mode\tport1_mode;\n\tenum bfa_mode_s\t\tport_mode;\n\tu8\t\t\tad_cap_bm;\t \n\tu8\t\t\tport_mode_cfg;\t \n\tint\t\t\tioc_aen_seq;\n};\n\nstruct bfa_ioc_hwif_s {\n\tbfa_status_t (*ioc_pll_init) (void __iomem *rb, enum bfi_asic_mode m);\n\tbfa_boolean_t\t(*ioc_firmware_lock)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_firmware_unlock)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_reg_init)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_map_port)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_isr_mode_set)\t(struct bfa_ioc_s *ioc,\n\t\t\t\t\tbfa_boolean_t msix);\n\tvoid\t\t(*ioc_notify_fail)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_ownership_reset)\t(struct bfa_ioc_s *ioc);\n\tbfa_boolean_t   (*ioc_sync_start)       (struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_sync_join)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_sync_leave)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_sync_ack)\t\t(struct bfa_ioc_s *ioc);\n\tbfa_boolean_t\t(*ioc_sync_complete)\t(struct bfa_ioc_s *ioc);\n\tbfa_boolean_t\t(*ioc_lpu_read_stat)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_set_fwstate)\t(struct bfa_ioc_s *ioc,\n\t\t\t\t\tenum bfi_ioc_state fwstate);\n\tenum bfi_ioc_state\t(*ioc_get_fwstate)\t(struct bfa_ioc_s *ioc);\n\tvoid\t\t(*ioc_set_alt_fwstate)\t(struct bfa_ioc_s *ioc,\n\t\t\t\t\tenum bfi_ioc_state fwstate);\n\tenum bfi_ioc_state\t(*ioc_get_alt_fwstate)\t(struct bfa_ioc_s *ioc);\n};\n\n \nstruct bfa_reqq_wait_s {\n\tstruct list_head\tqe;\n\tvoid\t(*qresume) (void *cbarg);\n\tvoid\t*cbarg;\n};\n\ntypedef void\t(*bfa_cb_cbfn_t) (void *cbarg, bfa_boolean_t complete);\n\n \nstruct bfa_cb_qe_s {\n\tstruct list_head\tqe;\n\tbfa_cb_cbfn_t\tcbfn;\n\tbfa_boolean_t\tonce;\n\tbfa_boolean_t\tpre_rmv;\t \n\tbfa_status_t\tfw_status;\t \n\tvoid\t\t*cbarg;\n};\n\n \nenum iocfc_event {\n\tIOCFC_E_INIT\t\t= 1,\t \n\tIOCFC_E_START\t\t= 2,\t \n\tIOCFC_E_STOP\t\t= 3,\t \n\tIOCFC_E_ENABLE\t\t= 4,\t \n\tIOCFC_E_DISABLE\t\t= 5,\t \n\tIOCFC_E_IOC_ENABLED\t= 6,\t \n\tIOCFC_E_IOC_DISABLED\t= 7,\t \n\tIOCFC_E_IOC_FAILED\t= 8,\t \n\tIOCFC_E_DCONF_DONE\t= 9,\t \n\tIOCFC_E_CFG_DONE\t= 10,\t \n};\n\n \n\ntypedef void (*bfa_ablk_cbfn_t)(void *, enum bfa_status);\n\nstruct bfa_ablk_s {\n\tstruct bfa_ioc_s\t*ioc;\n\tstruct bfa_ablk_cfg_s\t*cfg;\n\tu16\t\t\t*pcifn;\n\tstruct bfa_dma_s\tdma_addr;\n\tbfa_boolean_t\t\tbusy;\n\tstruct bfa_mbox_cmd_s\tmb;\n\tbfa_ablk_cbfn_t\t\tcbfn;\n\tvoid\t\t\t*cbarg;\n\tstruct bfa_ioc_notify_s\tioc_notify;\n\tstruct bfa_mem_dma_s\tablk_dma;\n};\n#define BFA_MEM_ABLK_DMA(__bfa)\t\t(&((__bfa)->modules.ablk.ablk_dma))\n\n \ntypedef void\t(*bfa_cb_sfp_t) (void *cbarg, bfa_status_t status);\n\nstruct bfa_sfp_s {\n\tvoid\t*dev;\n\tstruct bfa_ioc_s\t*ioc;\n\tstruct bfa_trc_mod_s\t*trcmod;\n\tstruct sfp_mem_s\t*sfpmem;\n\tbfa_cb_sfp_t\t\tcbfn;\n\tvoid\t\t\t*cbarg;\n\tenum bfi_sfp_mem_e\tmemtype;  \n\tu32\t\t\tstatus;\n\tstruct bfa_mbox_cmd_s\tmbcmd;\n\tu8\t\t\t*dbuf_kva;  \n\tu64\t\t\tdbuf_pa;    \n\tstruct bfa_ioc_notify_s\tioc_notify;\n\tenum bfa_defs_sfp_media_e *media;\n\tenum bfa_port_speed\tportspeed;\n\tbfa_cb_sfp_t\t\tstate_query_cbfn;\n\tvoid\t\t\t*state_query_cbarg;\n\tu8\t\t\tlock;\n\tu8\t\t\tdata_valid;  \n\tu8\t\t\tstate;\t     \n\tu8\t\t\tstate_query_lock;\n\tstruct bfa_mem_dma_s\tsfp_dma;\n\tu8\t\t\tis_elb;\t     \n};\n\n#define BFA_SFP_MOD(__bfa)\t(&(__bfa)->modules.sfp)\n#define BFA_MEM_SFP_DMA(__bfa)\t(&(BFA_SFP_MOD(__bfa)->sfp_dma))\n\nu32\tbfa_sfp_meminfo(void);\n\nvoid\tbfa_sfp_attach(struct bfa_sfp_s *sfp, struct bfa_ioc_s *ioc,\n\t\t\tvoid *dev, struct bfa_trc_mod_s *trcmod);\n\nvoid\tbfa_sfp_memclaim(struct bfa_sfp_s *diag, u8 *dm_kva, u64 dm_pa);\nvoid\tbfa_sfp_intr(void *bfaarg, struct bfi_mbmsg_s *msg);\n\nbfa_status_t\tbfa_sfp_show(struct bfa_sfp_s *sfp, struct sfp_mem_s *sfpmem,\n\t\t\t     bfa_cb_sfp_t cbfn, void *cbarg);\n\nbfa_status_t\tbfa_sfp_media(struct bfa_sfp_s *sfp,\n\t\t\tenum bfa_defs_sfp_media_e *media,\n\t\t\tbfa_cb_sfp_t cbfn, void *cbarg);\n\nbfa_status_t\tbfa_sfp_speed(struct bfa_sfp_s *sfp,\n\t\t\tenum bfa_port_speed portspeed,\n\t\t\tbfa_cb_sfp_t cbfn, void *cbarg);\n\n \ntypedef void\t(*bfa_cb_flash_t) (void *cbarg, bfa_status_t status);\n\nstruct bfa_flash_s {\n\tstruct bfa_ioc_s *ioc;\t\t \n\tstruct bfa_trc_mod_s *trcmod;\n\tu32\t\ttype;            \n\tu8\t\tinstance;        \n\tu8\t\trsv[3];\n\tu32\t\top_busy;         \n\tu32\t\tresidue;         \n\tu32\t\toffset;          \n\tbfa_status_t\tstatus;          \n\tu8\t\t*dbuf_kva;       \n\tu64\t\tdbuf_pa;         \n\tstruct bfa_reqq_wait_s\treqq_wait;  \n\tbfa_cb_flash_t\tcbfn;            \n\tvoid\t\t*cbarg;          \n\tu8\t\t*ubuf;           \n\tstruct bfa_cb_qe_s\thcb_qe;  \n\tu32\t\taddr_off;        \n\tstruct bfa_mbox_cmd_s\tmb;        \n\tstruct bfa_ioc_notify_s\tioc_notify;  \n\tstruct bfa_mem_dma_s\tflash_dma;\n};\n\n#define BFA_FLASH(__bfa)\t\t(&(__bfa)->modules.flash)\n#define BFA_MEM_FLASH_DMA(__bfa)\t(&(BFA_FLASH(__bfa)->flash_dma))\n\nbfa_status_t bfa_flash_get_attr(struct bfa_flash_s *flash,\n\t\t\tstruct bfa_flash_attr_s *attr,\n\t\t\tbfa_cb_flash_t cbfn, void *cbarg);\nbfa_status_t bfa_flash_erase_part(struct bfa_flash_s *flash,\n\t\t\tenum bfa_flash_part_type type, u8 instance,\n\t\t\tbfa_cb_flash_t cbfn, void *cbarg);\nbfa_status_t bfa_flash_update_part(struct bfa_flash_s *flash,\n\t\t\tenum bfa_flash_part_type type, u8 instance,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_flash_t cbfn, void *cbarg);\nbfa_status_t bfa_flash_read_part(struct bfa_flash_s *flash,\n\t\t\tenum bfa_flash_part_type type, u8 instance, void *buf,\n\t\t\tu32 len, u32 offset, bfa_cb_flash_t cbfn, void *cbarg);\nu32\tbfa_flash_meminfo(bfa_boolean_t mincfg);\nvoid bfa_flash_attach(struct bfa_flash_s *flash, struct bfa_ioc_s *ioc,\n\t\tvoid *dev, struct bfa_trc_mod_s *trcmod, bfa_boolean_t mincfg);\nvoid bfa_flash_memclaim(struct bfa_flash_s *flash,\n\t\tu8 *dm_kva, u64 dm_pa, bfa_boolean_t mincfg);\nbfa_status_t    bfa_flash_raw_read(void __iomem *pci_bar_kva,\n\t\t\t\tu32 offset, char *buf, u32 len);\n\n \n\ntypedef void (*bfa_cb_diag_t) (void *cbarg, bfa_status_t status);\ntypedef void (*bfa_cb_diag_beacon_t) (void *dev, bfa_boolean_t beacon,\n\t\t\tbfa_boolean_t link_e2e_beacon);\n\n \nstruct bfa_diag_results_fwping {\n\tu32     data;    \n\tu32     status;\n\tu32     dmastatus;\n\tu8      rsvd[4];\n};\n\nstruct bfa_diag_qtest_result_s {\n\tu32\tstatus;\n\tu16\tcount;\t \n\tu8\tqueue;\n\tu8\trsvd;\t \n};\n\n \nstruct bfa_diag_fwping_s {\n\tstruct bfa_diag_results_fwping *result;\n\tbfa_cb_diag_t  cbfn;\n\tvoid            *cbarg;\n\tu32             data;\n\tu8              lock;\n\tu8              rsv[3];\n\tu32             status;\n\tu32             count;\n\tstruct bfa_mbox_cmd_s   mbcmd;\n\tu8              *dbuf_kva;       \n\tu64             dbuf_pa;         \n};\n\n \nstruct bfa_diag_results_tempsensor_s {\n\tu32     status;\n\tu16     temp;            \n\tu16     brd_temp;        \n\tu8      ts_junc;         \n\tu8      ts_brd;          \n\tu8      rsvd[6];         \n};\n\nstruct bfa_diag_tsensor_s {\n\tbfa_cb_diag_t   cbfn;\n\tvoid            *cbarg;\n\tstruct bfa_diag_results_tempsensor_s *temp;\n\tu8              lock;\n\tu8              rsv[3];\n\tu32             status;\n\tstruct bfa_mbox_cmd_s   mbcmd;\n};\n\nstruct bfa_diag_sfpshow_s {\n\tstruct sfp_mem_s        *sfpmem;\n\tbfa_cb_diag_t           cbfn;\n\tvoid                    *cbarg;\n\tu8      lock;\n\tu8      static_data;\n\tu8      rsv[2];\n\tu32     status;\n\tstruct bfa_mbox_cmd_s    mbcmd;\n\tu8      *dbuf_kva;       \n\tu64     dbuf_pa;         \n};\n\nstruct bfa_diag_led_s {\n\tstruct bfa_mbox_cmd_s   mbcmd;\n\tbfa_boolean_t   lock;    \n};\n\nstruct bfa_diag_beacon_s {\n\tstruct bfa_mbox_cmd_s   mbcmd;\n\tbfa_boolean_t   state;           \n\tbfa_boolean_t   link_e2e;        \n};\n\nstruct bfa_diag_s {\n\tvoid\t*dev;\n\tstruct bfa_ioc_s\t\t*ioc;\n\tstruct bfa_trc_mod_s\t\t*trcmod;\n\tstruct bfa_diag_fwping_s\tfwping;\n\tstruct bfa_diag_tsensor_s\ttsensor;\n\tstruct bfa_diag_sfpshow_s\tsfpshow;\n\tstruct bfa_diag_led_s\t\tledtest;\n\tstruct bfa_diag_beacon_s\tbeacon;\n\tvoid\t*result;\n\tstruct bfa_timer_s timer;\n\tbfa_cb_diag_beacon_t  cbfn_beacon;\n\tbfa_cb_diag_t  cbfn;\n\tvoid\t\t*cbarg;\n\tu8\t\tblock;\n\tu8\t\ttimer_active;\n\tu8\t\trsvd[2];\n\tu32\t\tstatus;\n\tstruct bfa_ioc_notify_s\tioc_notify;\n\tstruct bfa_mem_dma_s\tdiag_dma;\n};\n\n#define BFA_DIAG_MOD(__bfa)     (&(__bfa)->modules.diag_mod)\n#define BFA_MEM_DIAG_DMA(__bfa) (&(BFA_DIAG_MOD(__bfa)->diag_dma))\n\nu32\tbfa_diag_meminfo(void);\nvoid bfa_diag_memclaim(struct bfa_diag_s *diag, u8 *dm_kva, u64 dm_pa);\nvoid bfa_diag_attach(struct bfa_diag_s *diag, struct bfa_ioc_s *ioc, void *dev,\n\t\t     bfa_cb_diag_beacon_t cbfn_beacon,\n\t\t     struct bfa_trc_mod_s *trcmod);\nbfa_status_t\tbfa_diag_reg_read(struct bfa_diag_s *diag, u32 offset,\n\t\t\tu32 len, u32 *buf, u32 force);\nbfa_status_t\tbfa_diag_reg_write(struct bfa_diag_s *diag, u32 offset,\n\t\t\tu32 len, u32 value, u32 force);\nbfa_status_t\tbfa_diag_tsensor_query(struct bfa_diag_s *diag,\n\t\t\tstruct bfa_diag_results_tempsensor_s *result,\n\t\t\tbfa_cb_diag_t cbfn, void *cbarg);\nbfa_status_t\tbfa_diag_fwping(struct bfa_diag_s *diag, u32 cnt,\n\t\t\tu32 pattern, struct bfa_diag_results_fwping *result,\n\t\t\tbfa_cb_diag_t cbfn, void *cbarg);\nbfa_status_t\tbfa_diag_sfpshow(struct bfa_diag_s *diag,\n\t\t\tstruct sfp_mem_s *sfpmem, u8 static_data,\n\t\t\tbfa_cb_diag_t cbfn, void *cbarg);\nbfa_status_t\tbfa_diag_memtest(struct bfa_diag_s *diag,\n\t\t\tstruct bfa_diag_memtest_s *memtest, u32 pattern,\n\t\t\tstruct bfa_diag_memtest_result *result,\n\t\t\tbfa_cb_diag_t cbfn, void *cbarg);\nbfa_status_t\tbfa_diag_ledtest(struct bfa_diag_s *diag,\n\t\t\tstruct bfa_diag_ledtest_s *ledtest);\nbfa_status_t\tbfa_diag_beacon_port(struct bfa_diag_s *diag,\n\t\t\tbfa_boolean_t beacon, bfa_boolean_t link_e2e_beacon,\n\t\t\tu32 sec);\n\n \ntypedef void (*bfa_cb_phy_t) (void *cbarg, bfa_status_t status);\n\nstruct bfa_phy_s {\n\tstruct bfa_ioc_s *ioc;           \n\tstruct bfa_trc_mod_s *trcmod;    \n\tu8\tinstance;        \n\tu8\top_busy;         \n\tu8\trsv[2];\n\tu32\tresidue;         \n\tu32\toffset;          \n\tbfa_status_t\tstatus;          \n\tu8\t*dbuf_kva;       \n\tu64\tdbuf_pa;         \n\tstruct bfa_reqq_wait_s reqq_wait;  \n\tbfa_cb_phy_t\tcbfn;            \n\tvoid\t\t*cbarg;          \n\tu8\t\t*ubuf;           \n\tstruct bfa_cb_qe_s\thcb_qe;  \n\tu32\taddr_off;        \n\tstruct bfa_mbox_cmd_s\tmb;        \n\tstruct bfa_ioc_notify_s\tioc_notify;  \n\tstruct bfa_mem_dma_s\tphy_dma;\n};\n#define BFA_PHY(__bfa)\t(&(__bfa)->modules.phy)\n#define BFA_MEM_PHY_DMA(__bfa)\t(&(BFA_PHY(__bfa)->phy_dma))\n\nbfa_boolean_t bfa_phy_busy(struct bfa_ioc_s *ioc);\nbfa_status_t bfa_phy_get_attr(struct bfa_phy_s *phy, u8 instance,\n\t\t\tstruct bfa_phy_attr_s *attr,\n\t\t\tbfa_cb_phy_t cbfn, void *cbarg);\nbfa_status_t bfa_phy_get_stats(struct bfa_phy_s *phy, u8 instance,\n\t\t\tstruct bfa_phy_stats_s *stats,\n\t\t\tbfa_cb_phy_t cbfn, void *cbarg);\nbfa_status_t bfa_phy_update(struct bfa_phy_s *phy, u8 instance,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_phy_t cbfn, void *cbarg);\nbfa_status_t bfa_phy_read(struct bfa_phy_s *phy, u8 instance,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_phy_t cbfn, void *cbarg);\n\nu32\tbfa_phy_meminfo(bfa_boolean_t mincfg);\nvoid bfa_phy_attach(struct bfa_phy_s *phy, struct bfa_ioc_s *ioc,\n\t\tvoid *dev, struct bfa_trc_mod_s *trcmod, bfa_boolean_t mincfg);\nvoid bfa_phy_memclaim(struct bfa_phy_s *phy,\n\t\tu8 *dm_kva, u64 dm_pa, bfa_boolean_t mincfg);\nvoid bfa_phy_intr(void *phyarg, struct bfi_mbmsg_s *msg);\n\n \ntypedef void (*bfa_cb_fru_t) (void *cbarg, bfa_status_t status);\n\nstruct bfa_fru_s {\n\tstruct bfa_ioc_s *ioc;\t\t \n\tstruct bfa_trc_mod_s *trcmod;\t \n\tu8\t\top_busy;\t \n\tu8\t\trsv[3];\n\tu32\t\tresidue;\t \n\tu32\t\toffset;\t\t \n\tbfa_status_t\tstatus;\t\t \n\tu8\t\t*dbuf_kva;\t \n\tu64\t\tdbuf_pa;\t \n\tstruct bfa_reqq_wait_s reqq_wait;  \n\tbfa_cb_fru_t\tcbfn;\t\t \n\tvoid\t\t*cbarg;\t\t \n\tu8\t\t*ubuf;\t\t \n\tstruct bfa_cb_qe_s\thcb_qe;\t \n\tu32\t\taddr_off;\t \n\tstruct bfa_mbox_cmd_s mb;\t \n\tstruct bfa_ioc_notify_s ioc_notify;  \n\tstruct bfa_mem_dma_s\tfru_dma;\n\tu8\t\ttrfr_cmpl;\n};\n\n#define BFA_FRU(__bfa)\t(&(__bfa)->modules.fru)\n#define BFA_MEM_FRU_DMA(__bfa)\t(&(BFA_FRU(__bfa)->fru_dma))\n\nbfa_status_t bfa_fruvpd_update(struct bfa_fru_s *fru,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_fru_t cbfn, void *cbarg, u8 trfr_cmpl);\nbfa_status_t bfa_fruvpd_read(struct bfa_fru_s *fru,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_fru_t cbfn, void *cbarg);\nbfa_status_t bfa_fruvpd_get_max_size(struct bfa_fru_s *fru, u32 *max_size);\nbfa_status_t bfa_tfru_write(struct bfa_fru_s *fru,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_fru_t cbfn, void *cbarg);\nbfa_status_t bfa_tfru_read(struct bfa_fru_s *fru,\n\t\t\tvoid *buf, u32 len, u32 offset,\n\t\t\tbfa_cb_fru_t cbfn, void *cbarg);\nu32\tbfa_fru_meminfo(bfa_boolean_t mincfg);\nvoid bfa_fru_attach(struct bfa_fru_s *fru, struct bfa_ioc_s *ioc,\n\t\tvoid *dev, struct bfa_trc_mod_s *trcmod, bfa_boolean_t mincfg);\nvoid bfa_fru_memclaim(struct bfa_fru_s *fru,\n\t\tu8 *dm_kva, u64 dm_pa, bfa_boolean_t mincfg);\nvoid bfa_fru_intr(void *fruarg, struct bfi_mbmsg_s *msg);\n\n \n#define BFI_DCONF_SIGNATURE\t0xabcdabcd\n#define BFI_DCONF_VERSION\t1\n\n#pragma pack(1)\nstruct bfa_dconf_hdr_s {\n\tu32\tsignature;\n\tu32\tversion;\n};\n\nstruct bfa_dconf_s {\n\tstruct bfa_dconf_hdr_s\t\thdr;\n\tstruct bfa_lunmask_cfg_s\tlun_mask;\n\tstruct bfa_throttle_cfg_s\tthrottle_cfg;\n};\n#pragma pack()\n\nstruct bfa_dconf_mod_s {\n\tbfa_sm_t\t\tsm;\n\tu8\t\t\tinstance;\n\tbfa_boolean_t\t\tread_data_valid;\n\tbfa_boolean_t\t\tmin_cfg;\n\tstruct bfa_timer_s\ttimer;\n\tstruct bfa_s\t\t*bfa;\n\tvoid\t\t\t*bfad;\n\tvoid\t\t\t*trcmod;\n\tstruct bfa_dconf_s\t*dconf;\n\tstruct bfa_mem_kva_s\tkva_seg;\n};\n\n#define BFA_DCONF_MOD(__bfa)\t\\\n\t(&(__bfa)->modules.dconf_mod)\n#define BFA_MEM_DCONF_KVA(__bfa)\t(&(BFA_DCONF_MOD(__bfa)->kva_seg))\n#define bfa_dconf_read_data_valid(__bfa)\t\\\n\t(BFA_DCONF_MOD(__bfa)->read_data_valid)\n#define BFA_DCONF_UPDATE_TOV\t5000\t \n#define bfa_dconf_get_min_cfg(__bfa)\t\\\n\t(BFA_DCONF_MOD(__bfa)->min_cfg)\n\nvoid\tbfa_dconf_modinit(struct bfa_s *bfa);\nvoid\tbfa_dconf_modexit(struct bfa_s *bfa);\nbfa_status_t\tbfa_dconf_update(struct bfa_s *bfa);\n\n \n#define bfa_ioc_pcifn(__ioc)\t\t((__ioc)->pcidev.pci_func)\n#define bfa_ioc_devid(__ioc)\t\t((__ioc)->pcidev.device_id)\n#define bfa_ioc_bar0(__ioc)\t\t((__ioc)->pcidev.pci_bar_kva)\n#define bfa_ioc_portid(__ioc)\t\t((__ioc)->port_id)\n#define bfa_ioc_asic_gen(__ioc)\t\t((__ioc)->asic_gen)\n#define bfa_ioc_is_cna(__ioc)\t\\\n\t((bfa_ioc_get_type(__ioc) == BFA_IOC_TYPE_FCoE) ||\t\\\n\t (bfa_ioc_get_type(__ioc) == BFA_IOC_TYPE_LL))\n#define bfa_ioc_fetch_stats(__ioc, __stats) \\\n\t\t(((__stats)->drv_stats) = (__ioc)->stats)\n#define bfa_ioc_clr_stats(__ioc)\t\\\n\t\tmemset(&(__ioc)->stats, 0, sizeof((__ioc)->stats))\n#define bfa_ioc_maxfrsize(__ioc)\t((__ioc)->attr->maxfrsize)\n#define bfa_ioc_rx_bbcredit(__ioc)\t((__ioc)->attr->rx_bbcredit)\n#define bfa_ioc_speed_sup(__ioc)\t\\\n\t((bfa_ioc_is_cna(__ioc)) ? BFA_PORT_SPEED_10GBPS :\t\\\n\t BFI_ADAPTER_GETP(SPEED, (__ioc)->attr->adapter_prop))\n#define bfa_ioc_get_nports(__ioc)\t\\\n\tBFI_ADAPTER_GETP(NPORTS, (__ioc)->attr->adapter_prop)\n\n#define bfa_ioc_stats(_ioc, _stats)\t((_ioc)->stats._stats++)\n#define BFA_IOC_FWIMG_MINSZ\t(16 * 1024)\n#define BFA_IOC_FW_SMEM_SIZE(__ioc)\t\t\t\\\n\t((bfa_ioc_asic_gen(__ioc) == BFI_ASIC_GEN_CB)\t\\\n\t ? BFI_SMEM_CB_SIZE : BFI_SMEM_CT_SIZE)\n#define BFA_IOC_FLASH_CHUNK_NO(off)\t\t(off / BFI_FLASH_CHUNK_SZ_WORDS)\n#define BFA_IOC_FLASH_OFFSET_IN_CHUNK(off)\t(off % BFI_FLASH_CHUNK_SZ_WORDS)\n#define BFA_IOC_FLASH_CHUNK_ADDR(chunkno)  (chunkno * BFI_FLASH_CHUNK_SZ_WORDS)\n\n \nvoid bfa_ioc_mbox_queue(struct bfa_ioc_s *ioc, struct bfa_mbox_cmd_s *cmd);\nvoid bfa_ioc_mbox_register(struct bfa_ioc_s *ioc,\n\t\tbfa_ioc_mbox_mcfunc_t *mcfuncs);\nvoid bfa_ioc_mbox_isr(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_mbox_send(struct bfa_ioc_s *ioc, void *ioc_msg, int len);\nbfa_boolean_t bfa_ioc_msgget(struct bfa_ioc_s *ioc, void *mbmsg);\nvoid bfa_ioc_mbox_regisr(struct bfa_ioc_s *ioc, enum bfi_mclass mc,\n\t\tbfa_ioc_mbox_mcfunc_t cbfn, void *cbarg);\n\n \n\n#define bfa_ioc_pll_init_asic(__ioc) \\\n\t((__ioc)->ioc_hwif->ioc_pll_init((__ioc)->pcidev.pci_bar_kva, \\\n\t\t\t   (__ioc)->asic_mode))\n\nbfa_status_t bfa_ioc_pll_init(struct bfa_ioc_s *ioc);\nbfa_status_t bfa_ioc_cb_pll_init(void __iomem *rb, enum bfi_asic_mode mode);\nbfa_status_t bfa_ioc_ct_pll_init(void __iomem *rb, enum bfi_asic_mode mode);\nbfa_status_t bfa_ioc_ct2_pll_init(void __iomem *rb, enum bfi_asic_mode mode);\n\n#define bfa_ioc_isr_mode_set(__ioc, __msix) do {\t\t\t\\\n\tif ((__ioc)->ioc_hwif->ioc_isr_mode_set)\t\t\t\\\n\t\t((__ioc)->ioc_hwif->ioc_isr_mode_set(__ioc, __msix));\t\\\n} while (0)\n#define\tbfa_ioc_ownership_reset(__ioc)\t\t\t\t\\\n\t\t\t((__ioc)->ioc_hwif->ioc_ownership_reset(__ioc))\n#define bfa_ioc_get_fcmode(__ioc)\t((__ioc)->fcmode)\n#define bfa_ioc_lpu_read_stat(__ioc) do {\t\t\t\\\n\tif ((__ioc)->ioc_hwif->ioc_lpu_read_stat)\t\t\\\n\t\t((__ioc)->ioc_hwif->ioc_lpu_read_stat(__ioc));\t\\\n} while (0)\n\nvoid bfa_ioc_set_cb_hwif(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_set_ct_hwif(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_set_ct2_hwif(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_ct2_poweron(struct bfa_ioc_s *ioc);\n\nvoid bfa_ioc_attach(struct bfa_ioc_s *ioc, void *bfa,\n\t\tstruct bfa_ioc_cbfn_s *cbfn, struct bfa_timer_mod_s *timer_mod);\nvoid bfa_ioc_auto_recover(bfa_boolean_t auto_recover);\nvoid bfa_ioc_detach(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_suspend(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_pci_init(struct bfa_ioc_s *ioc, struct bfa_pcidev_s *pcidev,\n\t\tenum bfi_pcifn_class clscode);\nvoid bfa_ioc_mem_claim(struct bfa_ioc_s *ioc,  u8 *dm_kva, u64 dm_pa);\nvoid bfa_ioc_enable(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_disable(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_intx_claim(struct bfa_ioc_s *ioc);\n\nbfa_status_t bfa_ioc_boot(struct bfa_ioc_s *ioc, u32 boot_type,\n\t\tu32 boot_env);\nvoid bfa_ioc_isr(struct bfa_ioc_s *ioc, struct bfi_mbmsg_s *msg);\nvoid bfa_ioc_error_isr(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_is_operational(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_is_initialized(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_is_disabled(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_is_acq_addr(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_fw_mismatch(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_adapter_is_disabled(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_reset_fwstate(struct bfa_ioc_s *ioc);\nenum bfa_ioc_type_e bfa_ioc_get_type(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_get_adapter_serial_num(struct bfa_ioc_s *ioc, char *serial_num);\nvoid bfa_ioc_get_adapter_fw_ver(struct bfa_ioc_s *ioc, char *fw_ver);\nvoid bfa_ioc_get_adapter_optrom_ver(struct bfa_ioc_s *ioc, char *optrom_ver);\nvoid bfa_ioc_get_adapter_model(struct bfa_ioc_s *ioc, char *model);\nvoid bfa_ioc_get_adapter_manufacturer(struct bfa_ioc_s *ioc,\n\t\tchar *manufacturer);\nvoid bfa_ioc_get_pci_chip_rev(struct bfa_ioc_s *ioc, char *chip_rev);\nenum bfa_ioc_state bfa_ioc_get_state(struct bfa_ioc_s *ioc);\n\nvoid bfa_ioc_get_attr(struct bfa_ioc_s *ioc, struct bfa_ioc_attr_s *ioc_attr);\nvoid bfa_ioc_get_adapter_attr(struct bfa_ioc_s *ioc,\n\t\tstruct bfa_adapter_attr_s *ad_attr);\nvoid bfa_ioc_debug_memclaim(struct bfa_ioc_s *ioc, void *dbg_fwsave);\nbfa_status_t bfa_ioc_debug_fwsave(struct bfa_ioc_s *ioc, void *trcdata,\n\t\tint *trclen);\nbfa_status_t bfa_ioc_debug_fwtrc(struct bfa_ioc_s *ioc, void *trcdata,\n\t\t\t\t int *trclen);\nbfa_status_t bfa_ioc_debug_fwcore(struct bfa_ioc_s *ioc, void *buf,\n\tu32 *offset, int *buflen);\nbfa_status_t bfa_ioc_fwsig_invalidate(struct bfa_ioc_s *ioc);\nbfa_boolean_t bfa_ioc_sem_get(void __iomem *sem_reg);\nvoid bfa_ioc_fwver_get(struct bfa_ioc_s *ioc,\n\t\t\tstruct bfi_ioc_image_hdr_s *fwhdr);\nbfa_boolean_t bfa_ioc_fwver_cmp(struct bfa_ioc_s *ioc,\n\t\t\tstruct bfi_ioc_image_hdr_s *fwhdr);\nvoid bfa_ioc_aen_post(struct bfa_ioc_s *ioc, enum bfa_ioc_aen_event event);\nbfa_status_t bfa_ioc_fw_stats_get(struct bfa_ioc_s *ioc, void *stats);\nbfa_status_t bfa_ioc_fw_stats_clear(struct bfa_ioc_s *ioc);\nvoid bfa_ioc_debug_save_ftrc(struct bfa_ioc_s *ioc);\n\n \nu32\tbfa_ablk_meminfo(void);\nvoid bfa_ablk_memclaim(struct bfa_ablk_s *ablk, u8 *dma_kva, u64 dma_pa);\nvoid bfa_ablk_attach(struct bfa_ablk_s *ablk, struct bfa_ioc_s *ioc);\nbfa_status_t bfa_ablk_query(struct bfa_ablk_s *ablk,\n\t\tstruct bfa_ablk_cfg_s *ablk_cfg,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_adapter_config(struct bfa_ablk_s *ablk,\n\t\tenum bfa_mode_s mode, int max_pf, int max_vf,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_port_config(struct bfa_ablk_s *ablk, int port,\n\t\tenum bfa_mode_s mode, int max_pf, int max_vf,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_pf_create(struct bfa_ablk_s *ablk, u16 *pcifn,\n\t\tu8 port, enum bfi_pcifn_class personality,\n\t\tu16 bw_min, u16 bw_max, bfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_pf_delete(struct bfa_ablk_s *ablk, int pcifn,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_pf_update(struct bfa_ablk_s *ablk, int pcifn,\n\t\tu16 bw_min, u16 bw_max, bfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_optrom_en(struct bfa_ablk_s *ablk,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\nbfa_status_t bfa_ablk_optrom_dis(struct bfa_ablk_s *ablk,\n\t\tbfa_ablk_cbfn_t cbfn, void *cbarg);\n\nbfa_status_t bfa_ioc_flash_img_get_chnk(struct bfa_ioc_s *ioc, u32 off,\n\t\t\t\tu32 *fwimg);\n \nmac_t bfa_ioc_get_mac(struct bfa_ioc_s *ioc);\nmac_t bfa_ioc_get_mfg_mac(struct bfa_ioc_s *ioc);\n\n \nextern u32 bfi_image_cb_size;\nextern u32 bfi_image_ct_size;\nextern u32 bfi_image_ct2_size;\nextern u32 *bfi_image_cb;\nextern u32 *bfi_image_ct;\nextern u32 *bfi_image_ct2;\n\nstatic inline u32 *\nbfi_image_cb_get_chunk(u32 off)\n{\n\treturn (u32 *)(bfi_image_cb + off);\n}\n\nstatic inline u32 *\nbfi_image_ct_get_chunk(u32 off)\n{\n\treturn (u32 *)(bfi_image_ct + off);\n}\n\nstatic inline u32 *\nbfi_image_ct2_get_chunk(u32 off)\n{\n\treturn (u32 *)(bfi_image_ct2 + off);\n}\n\nstatic inline u32*\nbfa_cb_image_get_chunk(enum bfi_asic_gen asic_gen, u32 off)\n{\n\tswitch (asic_gen) {\n\tcase BFI_ASIC_GEN_CB:\n\t\treturn bfi_image_cb_get_chunk(off);\n\t\tbreak;\n\tcase BFI_ASIC_GEN_CT:\n\t\treturn bfi_image_ct_get_chunk(off);\n\t\tbreak;\n\tcase BFI_ASIC_GEN_CT2:\n\t\treturn bfi_image_ct2_get_chunk(off);\n\t\tbreak;\n\tdefault:\n\t\treturn NULL;\n\t}\n}\n\nstatic inline u32\nbfa_cb_image_get_size(enum bfi_asic_gen asic_gen)\n{\n\tswitch (asic_gen) {\n\tcase BFI_ASIC_GEN_CB:\n\t\treturn bfi_image_cb_size;\n\t\tbreak;\n\tcase BFI_ASIC_GEN_CT:\n\t\treturn bfi_image_ct_size;\n\t\tbreak;\n\tcase BFI_ASIC_GEN_CT2:\n\t\treturn bfi_image_ct2_size;\n\t\tbreak;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\n \n \nenum {\n\tBFA_TRC_CNA_PORT\t= 1,\n\tBFA_TRC_CNA_IOC\t\t= 2,\n\tBFA_TRC_CNA_IOC_CB\t= 3,\n\tBFA_TRC_CNA_IOC_CT\t= 4,\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}