{
  "module_name": "3w-sas.h",
  "hash_id": "143f098035013e631529712889e67aa674801fdb9fcfc3df632cbd8e67f69087",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/3w-sas.h",
  "human_readable_source": " \n\n#ifndef _3W_SAS_H\n#define _3W_SAS_H\n\n \nstatic char *twl_aen_severity_table[] =\n{\n\t\"None\", \"ERROR\", \"WARNING\", \"INFO\", \"DEBUG\", NULL\n};\n\n \n#define TWL_STATUS\t\t\t   0x0   \n#define TWL_HIBDB\t\t\t   0x20  \n#define TWL_HISTAT\t\t\t   0x30  \n#define TWL_HIMASK\t\t\t   0x34  \n#define TWL_HOBDB\t\t\t   0x9C  \n#define TWL_HOBDBC\t\t\t   0xA0  \n#define TWL_SCRPD3\t\t\t   0xBC  \n#define TWL_HIBQPL\t\t\t   0xC0  \n#define TWL_HIBQPH\t\t\t   0xC4  \n#define TWL_HOBQPL\t\t\t   0xC8  \n#define TWL_HOBQPH\t\t\t   0xCC  \n#define TWL_HISTATUS_VALID_INTERRUPT\t   0xC\n#define TWL_HISTATUS_ATTENTION_INTERRUPT   0x4\n#define TWL_HISTATUS_RESPONSE_INTERRUPT\t   0x8\n#define TWL_STATUS_OVERRUN_SUBMIT\t   0x2000\n#define TWL_ISSUE_SOFT_RESET\t\t   0x100\n#define TWL_CONTROLLER_READY\t\t   0x2000\n#define TWL_DOORBELL_CONTROLLER_ERROR\t   0x200000\n#define TWL_DOORBELL_ATTENTION_INTERRUPT   0x40000\n#define TWL_PULL_MODE\t\t\t   0x1\n\n \n#define TW_OP_INIT_CONNECTION 0x1\n#define TW_OP_GET_PARAM\t      0x12\n#define TW_OP_SET_PARAM\t      0x13\n#define TW_OP_EXECUTE_SCSI    0x10\n\n \n#define TW_AEN_QUEUE_EMPTY\t 0x0000\n#define TW_AEN_SOFT_RESET\t 0x0001\n#define TW_AEN_SYNC_TIME_WITH_HOST 0x031\n#define TW_AEN_SEVERITY_ERROR\t 0x1\n#define TW_AEN_SEVERITY_DEBUG\t 0x4\n#define TW_AEN_NOT_RETRIEVED\t 0x1\n\n \n#define TW_S_INITIAL   0x1   \n#define TW_S_STARTED   0x2   \n#define TW_S_POSTED    0x4   \n#define TW_S_COMPLETED 0x8   \n#define TW_S_FINISHED  0x10  \n\n \n#define TW_9750_ARCH_ID 10\n#define TW_CURRENT_DRIVER_SRL 40\n#define TW_CURRENT_DRIVER_BUILD 0\n#define TW_CURRENT_DRIVER_BRANCH 0\n\n \n#define TW_SECTOR_SIZE\t\t\t      512\n#define TW_MAX_UNITS\t\t\t      32\n#define TW_INIT_MESSAGE_CREDITS\t\t      0x100\n#define TW_INIT_COMMAND_PACKET_SIZE\t      0x3\n#define TW_INIT_COMMAND_PACKET_SIZE_EXTENDED  0x6\n#define TW_EXTENDED_INIT_CONNECT\t      0x2\n#define TW_BASE_FW_SRL\t\t\t      24\n#define TW_BASE_FW_BRANCH\t\t      0\n#define TW_BASE_FW_BUILD\t\t      1\n#define TW_Q_LENGTH\t\t\t      256\n#define TW_Q_START\t\t\t      0\n#define TW_MAX_SLOT\t\t\t      32\n#define TW_MAX_RESET_TRIES\t\t      2\n#define TW_MAX_CMDS_PER_LUN\t\t      254\n#define TW_MAX_AEN_DRAIN\t\t      255\n#define TW_IN_RESET\t\t\t      2\n#define TW_USING_MSI\t\t\t      3\n#define TW_IN_ATTENTION_LOOP\t\t      4\n#define TW_MAX_SECTORS\t\t\t      256\n#define TW_MAX_CDB_LEN\t\t\t      16\n#define TW_IOCTL_CHRDEV_TIMEOUT\t\t      60  \n#define TW_IOCTL_CHRDEV_FREE\t\t      -1\n#define TW_COMMAND_OFFSET\t\t      128  \n#define TW_VERSION_TABLE\t\t      0x0402\n#define TW_TIMEKEEP_TABLE\t\t      0x040A\n#define TW_INFORMATION_TABLE\t\t      0x0403\n#define TW_PARAM_FWVER\t\t\t      3\n#define TW_PARAM_FWVER_LENGTH\t\t      16\n#define TW_PARAM_BIOSVER\t\t      4\n#define TW_PARAM_BIOSVER_LENGTH\t\t      16\n#define TW_PARAM_MODEL\t\t\t      8\n#define TW_PARAM_MODEL_LENGTH\t\t      16\n#define TW_PARAM_PHY_SUMMARY_TABLE\t      1\n#define TW_PARAM_PHYCOUNT\t\t      2\n#define TW_PARAM_PHYCOUNT_LENGTH\t      1\n#define TW_IOCTL_FIRMWARE_PASS_THROUGH\t      0x108  \n#define TW_ALLOCATION_LENGTH\t\t      128\n#define TW_SENSE_DATA_LENGTH\t\t      18\n#define TW_ERROR_LOGICAL_UNIT_NOT_SUPPORTED   0x10a\n#define TW_ERROR_INVALID_FIELD_IN_CDB\t      0x10d\n#define TW_ERROR_UNIT_OFFLINE\t\t      0x128\n#define TW_MESSAGE_SOURCE_CONTROLLER_ERROR    3\n#define TW_MESSAGE_SOURCE_CONTROLLER_EVENT    4\n#define TW_DRIVER\t\t\t      6\n#ifndef PCI_DEVICE_ID_3WARE_9750\n#define PCI_DEVICE_ID_3WARE_9750 0x1010\n#endif\n\n \n\n \n#define TW_OPRES_IN(x,y) ((x << 5) | (y & 0x1f))\n#define TW_OP_OUT(x) (x & 0x1f)\n\n \n#define TW_OPSGL_IN(x,y) ((x << 5) | (y & 0x1f))\n#define TW_SGL_OUT(x) ((x >> 5) & 0x7)\n\n \n#define TW_SEV_OUT(x) (x & 0x7)\n\n \n#define TW_RESID_OUT(x) ((x >> 16) & 0xffff)\n#define TW_NOTMFA_OUT(x) (x & 0x1)\n\n \n#define TW_REQ_LUN_IN(lun, request_id)\t\t\t\\\n\t(((lun << 12) & 0xf000) | (request_id & 0xfff))\n#define TW_LUN_OUT(lun) ((lun >> 12) & 0xf)\n\n \n#define TWL_STATUS_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_STATUS)\n#define TWL_HOBQPL_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HOBQPL)\n#define TWL_HOBQPH_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HOBQPH)\n#define TWL_HOBDB_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HOBDB)\n#define TWL_HOBDBC_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HOBDBC)\n#define TWL_HIMASK_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HIMASK)\n#define TWL_HISTAT_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HISTAT)\n#define TWL_HIBQPH_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HIBQPH)\n#define TWL_HIBQPL_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HIBQPL)\n#define TWL_HIBDB_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_HIBDB)\n#define TWL_SCRPD3_REG_ADDR(x)\t\t\t\t\t\\\n\t((unsigned char __iomem *)x->base_addr + TWL_SCRPD3)\n#define TWL_MASK_INTERRUPTS(x)\t\t\t\t\t\\\n\t(writel(~0, TWL_HIMASK_REG_ADDR(tw_dev)))\n#define TWL_UNMASK_INTERRUPTS(x)\t\t\t\t\\\n\t(writel(~TWL_HISTATUS_VALID_INTERRUPT, TWL_HIMASK_REG_ADDR(tw_dev)))\n#define TWL_CLEAR_DB_INTERRUPT(x)\t\t\t\t\\\n\t(writel(~0, TWL_HOBDBC_REG_ADDR(tw_dev)))\n#define TWL_SOFT_RESET(x)\t\t\t\t\t\\\n\t(writel(TWL_ISSUE_SOFT_RESET, TWL_HIBDB_REG_ADDR(tw_dev)))\n\n \n#define TW_PRINTK(h,a,b,c) { \\\nif (h) \\\nprintk(KERN_WARNING \"3w-sas: scsi%d: ERROR: (0x%02X:0x%04X): %s.\\n\",h->host_no,a,b,c); \\\nelse \\\nprintk(KERN_WARNING \"3w-sas: ERROR: (0x%02X:0x%04X): %s.\\n\",a,b,c); \\\n}\n#define TW_MAX_LUNS 16\n#define TW_COMMAND_SIZE (sizeof(dma_addr_t) > 4 ? 6 : 4)\n#define TW_LIBERATOR_MAX_SGL_LENGTH (sizeof(dma_addr_t) > 4 ? 46 : 92)\n#define TW_LIBERATOR_MAX_SGL_LENGTH_OLD (sizeof(dma_addr_t) > 4 ? 47 : 94)\n#define TW_PADDING_LENGTH_LIBERATOR 136\n#define TW_PADDING_LENGTH_LIBERATOR_OLD 132\n#define TW_CPU_TO_SGL(x) (sizeof(dma_addr_t) > 4 ? cpu_to_le64(x) : cpu_to_le32(x))\n\n#pragma pack(1)\n\n \ntypedef struct TAG_TW_SG_Entry_ISO {\n\tdma_addr_t address;\n\tdma_addr_t length;\n} TW_SG_Entry_ISO;\n\n \ntypedef struct TW_Command {\n\tunsigned char opcode__sgloffset;\n\tunsigned char size;\n\tunsigned char request_id;\n\tunsigned char unit__hostid;\n\t \n\tunsigned char status;\n\tunsigned char flags;\n\tunion {\n\t\tunsigned short block_count;\n\t\tunsigned short parameter_count;\n\t} byte6_offset;\n\tunion {\n\t\tstruct {\n\t\t\tu32 lba;\n\t\t\tTW_SG_Entry_ISO sgl[TW_LIBERATOR_MAX_SGL_LENGTH_OLD];\n\t\t\tunsigned char padding[TW_PADDING_LENGTH_LIBERATOR_OLD];\n\t\t} io;\n\t\tstruct {\n\t\t\tTW_SG_Entry_ISO sgl[TW_LIBERATOR_MAX_SGL_LENGTH_OLD];\n\t\t\tu32 padding;\n\t\t\tunsigned char padding2[TW_PADDING_LENGTH_LIBERATOR_OLD];\n\t\t} param;\n\t} byte8_offset;\n} TW_Command;\n\n \ntypedef struct TAG_TW_Command_Apache {\n\tunsigned char opcode__reserved;\n\tunsigned char unit;\n\tunsigned short request_id__lunl;\n\tunsigned char status;\n\tunsigned char sgl_offset;\n\tunsigned short sgl_entries__lunh;\n\tunsigned char cdb[16];\n\tTW_SG_Entry_ISO sg_list[TW_LIBERATOR_MAX_SGL_LENGTH];\n\tunsigned char padding[TW_PADDING_LENGTH_LIBERATOR];\n} TW_Command_Apache;\n\n \ntypedef struct TAG_TW_Command_Apache_Header {\n\tunsigned char sense_data[TW_SENSE_DATA_LENGTH];\n\tstruct {\n\t\tchar reserved[4];\n\t\tunsigned short error;\n\t\tunsigned char padding;\n\t\tunsigned char severity__reserved;\n\t} status_block;\n\tunsigned char err_specific_desc[98];\n\tstruct {\n\t\tunsigned char size_header;\n\t\tunsigned short request_id;\n\t\tunsigned char size_sense;\n\t} header_desc;\n} TW_Command_Apache_Header;\n\n \ntypedef struct TAG_TW_Command_Full {\n\tTW_Command_Apache_Header header;\n\tunion {\n\t\tTW_Command oldcommand;\n\t\tTW_Command_Apache newcommand;\n\t} command;\n} TW_Command_Full;\n\n \ntypedef struct TAG_TW_Initconnect {\n\tunsigned char opcode__reserved;\n\tunsigned char size;\n\tunsigned char request_id;\n\tunsigned char res2;\n\tunsigned char status;\n\tunsigned char flags;\n\tunsigned short message_credits;\n\tu32 features;\n\tunsigned short fw_srl;\n\tunsigned short fw_arch_id;\n\tunsigned short fw_branch;\n\tunsigned short fw_build;\n\tu32 result;\n} TW_Initconnect;\n\n \ntypedef struct TAG_TW_Event\n{\n\tunsigned int sequence_id;\n\tunsigned int time_stamp_sec;\n\tunsigned short aen_code;\n\tunsigned char severity;\n\tunsigned char retrieved;\n\tunsigned char repeat_count;\n\tunsigned char parameter_len;\n\tunsigned char parameter_data[98];\n} TW_Event;\n\ntypedef struct TAG_TW_Ioctl_Driver_Command {\n\tunsigned int control_code;\n\tunsigned int status;\n\tunsigned int unique_id;\n\tunsigned int sequence_id;\n\tunsigned int os_specific;\n\tunsigned int buffer_length;\n} TW_Ioctl_Driver_Command;\n\ntypedef struct TAG_TW_Ioctl_Apache {\n\tTW_Ioctl_Driver_Command driver_command;\n\tchar padding[488];\n\tTW_Command_Full firmware_command;\n\tchar data_buffer[];\n} TW_Ioctl_Buf_Apache;\n\n \ntypedef struct {\n\tunsigned short\ttable_id;\n\tunsigned short\tparameter_id;\n\tunsigned short\tparameter_size_bytes;\n\tunsigned short  actual_parameter_size_bytes;\n\tunsigned char\tdata[];\n} TW_Param_Apache;\n\n \ntypedef struct TAG_TW_Compatibility_Info\n{\n\tchar driver_version[32];\n\tunsigned short working_srl;\n\tunsigned short working_branch;\n\tunsigned short working_build;\n\tunsigned short driver_srl_high;\n\tunsigned short driver_branch_high;\n\tunsigned short driver_build_high;\n\tunsigned short driver_srl_low;\n\tunsigned short driver_branch_low;\n\tunsigned short driver_build_low;\n\tunsigned short fw_on_ctlr_srl;\n\tunsigned short fw_on_ctlr_branch;\n\tunsigned short fw_on_ctlr_build;\n} TW_Compatibility_Info;\n\n#pragma pack()\n\ntypedef struct TAG_TW_Device_Extension {\n\tvoid\t\t\t__iomem *base_addr;\n\tunsigned long\t\t*generic_buffer_virt[TW_Q_LENGTH];\n\tdma_addr_t\t\tgeneric_buffer_phys[TW_Q_LENGTH];\n\tTW_Command_Full\t\t*command_packet_virt[TW_Q_LENGTH];\n\tdma_addr_t\t\tcommand_packet_phys[TW_Q_LENGTH];\n\tTW_Command_Apache_Header *sense_buffer_virt[TW_Q_LENGTH];\n\tdma_addr_t\t\tsense_buffer_phys[TW_Q_LENGTH];\n\tstruct pci_dev\t\t*tw_pci_dev;\n\tstruct scsi_cmnd\t*srb[TW_Q_LENGTH];\n\tunsigned char\t\tfree_queue[TW_Q_LENGTH];\n\tunsigned char\t\tfree_head;\n\tunsigned char\t\tfree_tail;\n\tint\t\t\tstate[TW_Q_LENGTH];\n\tunsigned int\t\tposted_request_count;\n\tunsigned int\t\tmax_posted_request_count;\n\tunsigned int\t\tmax_sgl_entries;\n\tunsigned int\t\tsgl_entries;\n\tunsigned int\t\tnum_resets;\n\tunsigned int\t\tsector_count;\n\tunsigned int\t\tmax_sector_count;\n\tunsigned int\t\taen_count;\n\tstruct Scsi_Host\t*host;\n\tlong\t\t\tflags;\n\tTW_Event\t\t*event_queue[TW_Q_LENGTH];\n\tunsigned char\t\terror_index;\n\tunsigned int\t\terror_sequence_id;\n\tint\t\t\tchrdev_request_id;\n\twait_queue_head_t\tioctl_wqueue;\n\tstruct mutex\t\tioctl_lock;\n\tTW_Compatibility_Info\ttw_compat_info;\n\tchar\t\t\tonline;\n} TW_Device_Extension;\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}