{
  "module_name": "csio_lnode.h",
  "hash_id": "5025c205d2e67b9af6d6b2873204a703c6b00896bde4de93c1477851d716003b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/scsi/csiostor/csio_lnode.h",
  "human_readable_source": " \n\n#ifndef __CSIO_LNODE_H__\n#define __CSIO_LNODE_H__\n\n#include <linux/kref.h>\n#include <linux/timer.h>\n#include <linux/workqueue.h>\n#include <scsi/fc/fc_els.h>\n\n\n#include \"csio_defs.h\"\n#include \"csio_hw.h\"\n\n#define CSIO_FCOE_MAX_NPIV\t128\n#define CSIO_FCOE_MAX_RNODES\t2048\n\n \n#define CSIO_HBA_PORTSPEED_UNKNOWN\t0x8000\n\nextern int csio_fcoe_rnodes;\nextern int csio_fdmi_enable;\n\n \nenum csio_ln_ev {\n\tCSIO_LNE_NONE = (uint32_t)0,\n\tCSIO_LNE_LINKUP,\n\tCSIO_LNE_FAB_INIT_DONE,\n\tCSIO_LNE_LINK_DOWN,\n\tCSIO_LNE_DOWN_LINK,\n\tCSIO_LNE_LOGO,\n\tCSIO_LNE_CLOSE,\n\tCSIO_LNE_MAX_EVENT,\n};\n\n\nstruct csio_fcf_info {\n\tstruct list_head\tlist;\n\tuint8_t\t\t\tpriority;\n\tuint8_t\t\t\tmac[6];\n\tuint8_t\t\t\tname_id[8];\n\tuint8_t\t\t\tfabric[8];\n\tuint16_t\t\tvf_id;\n\tuint8_t\t\t\tvlan_id;\n\tuint16_t\t\tmax_fcoe_size;\n\tuint8_t\t\t\tfc_map[3];\n\tuint32_t\t\tfka_adv;\n\tuint32_t\t\tfcfi;\n\tuint8_t\t\t\tget_next:1;\n\tuint8_t\t\t\tlink_aff:1;\n\tuint8_t\t\t\tfpma:1;\n\tuint8_t\t\t\tspma:1;\n\tuint8_t\t\t\tlogin:1;\n\tuint8_t\t\t\tportid;\n\tuint8_t\t\t\tspma_mac[6];\n\tstruct kref\t\tkref;\n};\n\n \n#define\tCSIO_LNF_FIPSUPP\t\t0x00000001\t \n#define\tCSIO_LNF_NPIVSUPP\t\t0x00000002\t \n#define CSIO_LNF_LINK_ENABLE\t\t0x00000004\t \n#define\tCSIO_LNF_FDMI_ENABLE\t\t0x00000008\t \n\n \nenum csio_ln_fc_evt {\n\tCSIO_LN_FC_LINKUP = 1,\n\tCSIO_LN_FC_LINKDOWN,\n\tCSIO_LN_FC_RSCN,\n\tCSIO_LN_FC_ATTRIB_UPDATE,\n};\n\n \nstruct csio_lnode_stats {\n\tuint32_t\tn_link_up;\t \n\tuint32_t\tn_link_down;\t \n\tuint32_t\tn_err;\t\t \n\tuint32_t\tn_err_nomem;\t \n\tuint32_t\tn_inval_parm;    \n\tuint32_t\tn_evt_unexp;\t \n\tuint32_t\tn_evt_drop;\t \n\tuint32_t\tn_rnode_match;   \n\tuint32_t\tn_dev_loss_tmo;  \n\tuint32_t\tn_fdmi_err;\t \n\tuint32_t\tn_evt_fw[PROTO_ERR_IMPL_LOGO + 1];\t \n\tenum csio_ln_ev\tn_evt_sm[CSIO_LNE_MAX_EVENT];\t \n\tuint32_t\tn_rnode_alloc;\t \n\tuint32_t\tn_rnode_free;\t \n\tuint32_t\tn_rnode_nomem;\t \n\tuint32_t        n_input_requests;  \n\tuint32_t        n_output_requests;  \n\tuint32_t        n_control_requests;  \n\tuint32_t        n_input_bytes;  \n\tuint32_t        n_output_bytes;  \n\tuint32_t\trsvd1;\n};\n\n \nstruct csio_lnode_params {\n\tuint32_t\tra_tov;\n\tuint32_t\tfcfi;\n\tuint32_t\tlog_level;\t \n};\n\nstruct csio_service_parms {\n\tstruct fc_els_csp\tcsp;\t\t \n\tuint8_t\t\t\twwpn[8];\t \n\tuint8_t\t\t\twwnn[8];\t \n\tstruct fc_els_cssp\tclsp[4];\t \n\tuint8_t\t\t\tvvl[16];\t \n};\n\n \nstruct csio_lnode {\n\tstruct csio_sm\t\tsm;\t\t \n\tstruct csio_hw\t\t*hwp;\t\t \n\tuint8_t\t\t\tportid;\t\t \n\tuint8_t\t\t\trsvd1;\n\tuint16_t\t\trsvd2;\n\tuint32_t\t\tdev_num;\t \n\tuint32_t\t\tflags;\t\t \n\tstruct list_head\tfcf_lsthead;\t \n\tstruct csio_fcf_info\t*fcfinfo;\t \n\tstruct csio_ioreq\t*mgmt_req;\t \n\n\t \n\tuint8_t\t\t\tmac[6];\n\tuint32_t\t\tnport_id;\n\tstruct csio_service_parms ln_sparm;\t \n\n\t \n\tuint32_t\t\tfcf_flowid;\t \n\tuint32_t\t\tvnp_flowid;\n\tuint16_t\t\tssn_cnt;\t \n\tuint8_t\t\t\tcur_evt;\t \n\tuint8_t\t\t\tprev_evt;\t \n\n\t \n\tstruct list_head\tcln_head;\t \n\tuint32_t\t\tnum_vports;\t \n\tstruct csio_lnode\t*pln;\t\t \n\tstruct list_head\tcmpl_q;\t\t \n\n\t \n\tstruct list_head\trnhead;\t\t \n\tuint32_t\t\tnum_reg_rnodes;\t \n\tuint32_t\t\tn_scsi_tgts;\t \n\tuint32_t\t\tlast_scan_ntgts; \n\tuint32_t\t\ttgt_scan_tick;\t \n\t \n\tstruct fc_vport\t\t*fc_vport;\n\tstruct fc_host_statistics fch_stats;\n\n\tstruct csio_lnode_stats stats;\t\t \n\tstruct csio_lnode_params params;\t \n};\n\n#define\tcsio_lnode_to_hw(ln)\t((ln)->hwp)\n#define csio_root_lnode(ln)\t(csio_lnode_to_hw((ln))->rln)\n#define csio_parent_lnode(ln)\t((ln)->pln)\n#define\tcsio_ln_flowid(ln)\t((ln)->vnp_flowid)\n#define csio_ln_wwpn(ln)\t((ln)->ln_sparm.wwpn)\n#define csio_ln_wwnn(ln)\t((ln)->ln_sparm.wwnn)\n\n#define csio_is_root_ln(ln)\t(((ln) == csio_root_lnode((ln))) ? 1 : 0)\n#define csio_is_phys_ln(ln)\t(((ln)->pln == NULL) ? 1 : 0)\n#define csio_is_npiv_ln(ln)\t(((ln)->pln != NULL) ? 1 : 0)\n\n\n#define csio_ln_dbg(_ln, _fmt, ...)\t\\\n\tcsio_dbg(_ln->hwp, \"%x:%x \"_fmt, CSIO_DEVID_HI(_ln), \\\n\t\t CSIO_DEVID_LO(_ln), ##__VA_ARGS__);\n\n#define csio_ln_err(_ln, _fmt, ...)\t\\\n\tcsio_err(_ln->hwp, \"%x:%x \"_fmt, CSIO_DEVID_HI(_ln), \\\n\t\t CSIO_DEVID_LO(_ln), ##__VA_ARGS__);\n\n#define csio_ln_warn(_ln, _fmt, ...)\t\\\n\tcsio_warn(_ln->hwp, \"%x:%x \"_fmt, CSIO_DEVID_HI(_ln), \\\n\t\t CSIO_DEVID_LO(_ln), ##__VA_ARGS__);\n\n \nenum csio_ln_notify {\n\tCSIO_LN_NOTIFY_HWREADY = 1,\n\tCSIO_LN_NOTIFY_HWSTOP,\n\tCSIO_LN_NOTIFY_HWREMOVE,\n\tCSIO_LN_NOTIFY_HWRESET,\n};\n\nvoid csio_fcoe_fwevt_handler(struct csio_hw *,  __u8 cpl_op, __be64 *);\nint csio_is_lnode_ready(struct csio_lnode *);\nvoid csio_lnode_state_to_str(struct csio_lnode *ln, int8_t *str);\nstruct csio_lnode *csio_lnode_lookup_by_wwpn(struct csio_hw *, uint8_t *);\nint csio_get_phy_port_stats(struct csio_hw *, uint8_t ,\n\t\t\t\t      struct fw_fcoe_port_stats *);\nint csio_scan_done(struct csio_lnode *, unsigned long, unsigned long,\n\t\t   unsigned long, unsigned long);\nvoid csio_notify_lnodes(struct csio_hw *, enum csio_ln_notify);\nvoid csio_disable_lnodes(struct csio_hw *, uint8_t, bool);\nvoid csio_lnode_async_event(struct csio_lnode *, enum csio_ln_fc_evt);\nint csio_ln_fdmi_start(struct csio_lnode *, void *);\nint csio_lnode_start(struct csio_lnode *);\nvoid csio_lnode_stop(struct csio_lnode *);\nvoid csio_lnode_close(struct csio_lnode *);\nint csio_lnode_init(struct csio_lnode *, struct csio_hw *,\n\t\t\t      struct csio_lnode *);\nvoid csio_lnode_exit(struct csio_lnode *);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}