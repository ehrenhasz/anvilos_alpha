{
  "module_name": "sdhci-pltfm.h",
  "hash_id": "e2a8e297e1f5bac3f85284de8949f52160242ca19b8db07d3925fab17d551f5d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mmc/host/sdhci-pltfm.h",
  "human_readable_source": " \n \n\n#ifndef _DRIVERS_MMC_SDHCI_PLTFM_H\n#define _DRIVERS_MMC_SDHCI_PLTFM_H\n\n#include <linux/clk.h>\n#include <linux/platform_device.h>\n#include \"sdhci.h\"\n\nstruct sdhci_pltfm_data {\n\tconst struct sdhci_ops *ops;\n\tunsigned int quirks;\n\tunsigned int quirks2;\n};\n\nstruct sdhci_pltfm_host {\n\tstruct clk *clk;\n\n\t \n\tunsigned int clock;\n\tu16 xfer_mode_shadow;\n\n\tunsigned long private[] ____cacheline_aligned;\n};\n\n#ifdef CONFIG_MMC_SDHCI_BIG_ENDIAN_32BIT_BYTE_SWAPPER\n \nstatic inline u32 sdhci_be32bs_readl(struct sdhci_host *host, int reg)\n{\n\treturn in_be32(host->ioaddr + reg);\n}\n\nstatic inline u16 sdhci_be32bs_readw(struct sdhci_host *host, int reg)\n{\n\treturn in_be16(host->ioaddr + (reg ^ 0x2));\n}\n\nstatic inline u8 sdhci_be32bs_readb(struct sdhci_host *host, int reg)\n{\n\treturn in_8(host->ioaddr + (reg ^ 0x3));\n}\n\nstatic inline void sdhci_be32bs_writel(struct sdhci_host *host,\n\t\t\t\t       u32 val, int reg)\n{\n\tout_be32(host->ioaddr + reg, val);\n}\n\nstatic inline void sdhci_be32bs_writew(struct sdhci_host *host,\n\t\t\t\t       u16 val, int reg)\n{\n\tstruct sdhci_pltfm_host *pltfm_host = sdhci_priv(host);\n\tint base = reg & ~0x3;\n\tint shift = (reg & 0x2) * 8;\n\n\tswitch (reg) {\n\tcase SDHCI_TRANSFER_MODE:\n\t\t \n\t\tpltfm_host->xfer_mode_shadow = val;\n\t\treturn;\n\tcase SDHCI_COMMAND:\n\t\tsdhci_be32bs_writel(host,\n\t\t\t\t    val << 16 | pltfm_host->xfer_mode_shadow,\n\t\t\t\t    SDHCI_TRANSFER_MODE);\n\t\treturn;\n\t}\n\tclrsetbits_be32(host->ioaddr + base, 0xffff << shift, val << shift);\n}\n\nstatic inline void sdhci_be32bs_writeb(struct sdhci_host *host, u8 val, int reg)\n{\n\tint base = reg & ~0x3;\n\tint shift = (reg & 0x3) * 8;\n\n\tclrsetbits_be32(host->ioaddr + base , 0xff << shift, val << shift);\n}\n#endif  \n\nvoid sdhci_get_property(struct platform_device *pdev);\n\nstatic inline void sdhci_get_of_property(struct platform_device *pdev)\n{\n\treturn sdhci_get_property(pdev);\n}\n\nextern struct sdhci_host *sdhci_pltfm_init(struct platform_device *pdev,\n\t\t\t\t\t  const struct sdhci_pltfm_data *pdata,\n\t\t\t\t\t  size_t priv_size);\nextern void sdhci_pltfm_free(struct platform_device *pdev);\n\nextern int sdhci_pltfm_init_and_add_host(struct platform_device *pdev,\n\t\t\t\t\t const struct sdhci_pltfm_data *pdata,\n\t\t\t\t\t size_t priv_size);\nextern void sdhci_pltfm_remove(struct platform_device *pdev);\n\nextern unsigned int sdhci_pltfm_clk_get_max_clock(struct sdhci_host *host);\n\nstatic inline void *sdhci_pltfm_priv(struct sdhci_pltfm_host *host)\n{\n\treturn host->private;\n}\n\nextern const struct dev_pm_ops sdhci_pltfm_pmops;\n#ifdef CONFIG_PM_SLEEP\nint sdhci_pltfm_suspend(struct device *dev);\nint sdhci_pltfm_resume(struct device *dev);\n#else\nstatic inline int sdhci_pltfm_suspend(struct device *dev) { return 0; }\nstatic inline int sdhci_pltfm_resume(struct device *dev) { return 0; }\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}