{
  "module_name": "core.h",
  "hash_id": "e5105e1d60972d536a5c99d5464ad971984f8d62f16043067d189ce161e97407",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mmc/core/core.h",
  "human_readable_source": " \n \n#ifndef _MMC_CORE_CORE_H\n#define _MMC_CORE_CORE_H\n\n#include <linux/delay.h>\n#include <linux/sched.h>\n\nstruct mmc_host;\nstruct mmc_card;\nstruct mmc_request;\n\n#define MMC_CMD_RETRIES        3\n\nstruct mmc_bus_ops {\n\tvoid (*remove)(struct mmc_host *);\n\tvoid (*detect)(struct mmc_host *);\n\tint (*pre_suspend)(struct mmc_host *);\n\tint (*suspend)(struct mmc_host *);\n\tint (*resume)(struct mmc_host *);\n\tint (*runtime_suspend)(struct mmc_host *);\n\tint (*runtime_resume)(struct mmc_host *);\n\tint (*alive)(struct mmc_host *);\n\tint (*shutdown)(struct mmc_host *);\n\tint (*hw_reset)(struct mmc_host *);\n\tint (*sw_reset)(struct mmc_host *);\n\tbool (*cache_enabled)(struct mmc_host *);\n\tint (*flush_cache)(struct mmc_host *);\n};\n\nvoid mmc_attach_bus(struct mmc_host *host, const struct mmc_bus_ops *ops);\nvoid mmc_detach_bus(struct mmc_host *host);\n\nstruct device_node *mmc_of_find_child_device(struct mmc_host *host,\n\t\tunsigned func_num);\n\nvoid mmc_init_erase(struct mmc_card *card);\n\nvoid mmc_set_chip_select(struct mmc_host *host, int mode);\nvoid mmc_set_clock(struct mmc_host *host, unsigned int hz);\nvoid mmc_set_bus_mode(struct mmc_host *host, unsigned int mode);\nvoid mmc_set_bus_width(struct mmc_host *host, unsigned int width);\nu32 mmc_select_voltage(struct mmc_host *host, u32 ocr);\nint mmc_set_uhs_voltage(struct mmc_host *host, u32 ocr);\nint mmc_host_set_uhs_voltage(struct mmc_host *host);\nint mmc_set_signal_voltage(struct mmc_host *host, int signal_voltage);\nvoid mmc_set_initial_signal_voltage(struct mmc_host *host);\nvoid mmc_set_timing(struct mmc_host *host, unsigned int timing);\nvoid mmc_set_driver_type(struct mmc_host *host, unsigned int drv_type);\nint mmc_select_drive_strength(struct mmc_card *card, unsigned int max_dtr,\n\t\t\t      int card_drv_type, int *drv_type);\nvoid mmc_power_up(struct mmc_host *host, u32 ocr);\nvoid mmc_power_off(struct mmc_host *host);\nvoid mmc_power_cycle(struct mmc_host *host, u32 ocr);\nvoid mmc_set_initial_state(struct mmc_host *host);\nu32 mmc_vddrange_to_ocrmask(int vdd_min, int vdd_max);\n\nstatic inline void mmc_delay(unsigned int ms)\n{\n\tif (ms <= 20)\n\t\tusleep_range(ms * 1000, ms * 1250);\n\telse\n\t\tmsleep(ms);\n}\n\nvoid mmc_rescan(struct work_struct *work);\nvoid mmc_start_host(struct mmc_host *host);\nvoid __mmc_stop_host(struct mmc_host *host);\nvoid mmc_stop_host(struct mmc_host *host);\n\nvoid _mmc_detect_change(struct mmc_host *host, unsigned long delay,\n\t\t\tbool cd_irq);\nint _mmc_detect_card_removed(struct mmc_host *host);\nint mmc_detect_card_removed(struct mmc_host *host);\n\nint mmc_attach_mmc(struct mmc_host *host);\nint mmc_attach_sd(struct mmc_host *host);\nint mmc_attach_sdio(struct mmc_host *host);\n\n \nextern bool use_spi_crc;\n\n \n#ifdef CONFIG_DEBUG_FS\nvoid mmc_add_host_debugfs(struct mmc_host *host);\nvoid mmc_remove_host_debugfs(struct mmc_host *host);\n\nvoid mmc_add_card_debugfs(struct mmc_card *card);\nvoid mmc_remove_card_debugfs(struct mmc_card *card);\n#else\nstatic inline void mmc_add_host_debugfs(struct mmc_host *host)\n{\n}\nstatic inline void mmc_remove_host_debugfs(struct mmc_host *host)\n{\n}\nstatic inline void mmc_add_card_debugfs(struct mmc_card *card)\n{\n}\nstatic inline void mmc_remove_card_debugfs(struct mmc_card *card)\n{\n}\n#endif\n\nint mmc_execute_tuning(struct mmc_card *card);\nint mmc_hs200_to_hs400(struct mmc_card *card);\nint mmc_hs400_to_hs200(struct mmc_card *card);\n\nvoid mmc_wait_for_req_done(struct mmc_host *host, struct mmc_request *mrq);\nbool mmc_is_req_done(struct mmc_host *host, struct mmc_request *mrq);\n\nint mmc_start_request(struct mmc_host *host, struct mmc_request *mrq);\n\nint mmc_erase(struct mmc_card *card, unsigned int from, unsigned int nr,\n\t\tunsigned int arg);\nint mmc_can_erase(struct mmc_card *card);\nint mmc_can_trim(struct mmc_card *card);\nint mmc_can_discard(struct mmc_card *card);\nint mmc_can_sanitize(struct mmc_card *card);\nint mmc_can_secure_erase_trim(struct mmc_card *card);\nint mmc_erase_group_aligned(struct mmc_card *card, unsigned int from,\n\t\t\tunsigned int nr);\nunsigned int mmc_calc_max_discard(struct mmc_card *card);\n\nint mmc_set_blocklen(struct mmc_card *card, unsigned int blocklen);\n\nint __mmc_claim_host(struct mmc_host *host, struct mmc_ctx *ctx,\n\t\t     atomic_t *abort);\nvoid mmc_release_host(struct mmc_host *host);\nvoid mmc_get_card(struct mmc_card *card, struct mmc_ctx *ctx);\nvoid mmc_put_card(struct mmc_card *card, struct mmc_ctx *ctx);\n\nint mmc_card_alternative_gpt_sector(struct mmc_card *card, sector_t *sector);\n\n \nstatic inline void mmc_claim_host(struct mmc_host *host)\n{\n\t__mmc_claim_host(host, NULL, NULL);\n}\n\nint mmc_cqe_start_req(struct mmc_host *host, struct mmc_request *mrq);\nvoid mmc_cqe_post_req(struct mmc_host *host, struct mmc_request *mrq);\nint mmc_cqe_recovery(struct mmc_host *host);\n\n \nstatic inline void mmc_pre_req(struct mmc_host *host, struct mmc_request *mrq)\n{\n\tif (host->ops->pre_req)\n\t\thost->ops->pre_req(host, mrq);\n}\n\n \nstatic inline void mmc_post_req(struct mmc_host *host, struct mmc_request *mrq,\n\t\t\t\tint err)\n{\n\tif (host->ops->post_req)\n\t\thost->ops->post_req(host, mrq, err);\n}\n\nstatic inline bool mmc_cache_enabled(struct mmc_host *host)\n{\n\tif (host->bus_ops->cache_enabled)\n\t\treturn host->bus_ops->cache_enabled(host);\n\n\treturn false;\n}\n\nstatic inline int mmc_flush_cache(struct mmc_host *host)\n{\n\tif (host->bus_ops->flush_cache)\n\t\treturn host->bus_ops->flush_cache(host);\n\n\treturn 0;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}