{
  "module_name": "card.h",
  "hash_id": "039bc5657b4434a96d2f396de6d313ada2b3dc621b1baa8be8b957491ded8b31",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mmc/core/card.h",
  "human_readable_source": " \n \n\n#ifndef _MMC_CORE_CARD_H\n#define _MMC_CORE_CARD_H\n\n#include <linux/mmc/card.h>\n\n#define mmc_card_name(c)\t((c)->cid.prod_name)\n#define mmc_card_id(c)\t\t(dev_name(&(c)->dev))\n#define mmc_dev_to_card(d)\tcontainer_of(d, struct mmc_card, dev)\n\n \n#define MMC_STATE_PRESENT\t(1<<0)\t\t \n#define MMC_STATE_READONLY\t(1<<1)\t\t \n#define MMC_STATE_BLOCKADDR\t(1<<2)\t\t \n#define MMC_CARD_SDXC\t\t(1<<3)\t\t \n#define MMC_CARD_REMOVED\t(1<<4)\t\t \n#define MMC_STATE_SUSPENDED\t(1<<5)\t\t \n\n#define mmc_card_present(c)\t((c)->state & MMC_STATE_PRESENT)\n#define mmc_card_readonly(c)\t((c)->state & MMC_STATE_READONLY)\n#define mmc_card_blockaddr(c)\t((c)->state & MMC_STATE_BLOCKADDR)\n#define mmc_card_ext_capacity(c) ((c)->state & MMC_CARD_SDXC)\n#define mmc_card_removed(c)\t((c) && ((c)->state & MMC_CARD_REMOVED))\n#define mmc_card_suspended(c)\t((c)->state & MMC_STATE_SUSPENDED)\n\n#define mmc_card_set_present(c)\t((c)->state |= MMC_STATE_PRESENT)\n#define mmc_card_set_readonly(c) ((c)->state |= MMC_STATE_READONLY)\n#define mmc_card_set_blockaddr(c) ((c)->state |= MMC_STATE_BLOCKADDR)\n#define mmc_card_set_ext_capacity(c) ((c)->state |= MMC_CARD_SDXC)\n#define mmc_card_set_removed(c) ((c)->state |= MMC_CARD_REMOVED)\n#define mmc_card_set_suspended(c) ((c)->state |= MMC_STATE_SUSPENDED)\n#define mmc_card_clr_suspended(c) ((c)->state &= ~MMC_STATE_SUSPENDED)\n\n \nstruct mmc_fixup {\n\t \n\tconst char *name;\n\n\t \n\tu64 rev_start, rev_end;\n\n\tunsigned int manfid;\n\tunsigned short oemid;\n\n\t \n\tunsigned short year;\n\tunsigned char month;\n\n\t \n\tu16 cis_vendor, cis_device;\n\n\t \n\tunsigned int ext_csd_rev;\n\n\t \n\tconst char *of_compatible;\n\n\tvoid (*vendor_fixup)(struct mmc_card *card, int data);\n\tint data;\n};\n\n#define CID_MANFID_ANY (-1u)\n#define CID_OEMID_ANY ((unsigned short) -1)\n#define CID_YEAR_ANY ((unsigned short) -1)\n#define CID_MONTH_ANY ((unsigned char) -1)\n#define CID_NAME_ANY (NULL)\n\n#define EXT_CSD_REV_ANY (-1u)\n\n#define CID_MANFID_SANDISK      0x2\n#define CID_MANFID_SANDISK_SD   0x3\n#define CID_MANFID_ATP          0x9\n#define CID_MANFID_TOSHIBA      0x11\n#define CID_MANFID_MICRON       0x13\n#define CID_MANFID_SAMSUNG      0x15\n#define CID_MANFID_APACER       0x27\n#define CID_MANFID_KINGSTON     0x70\n#define CID_MANFID_HYNIX\t0x90\n#define CID_MANFID_KINGSTON_SD\t0x9F\n#define CID_MANFID_NUMONYX\t0xFE\n\n#define END_FIXUP { NULL }\n\n#define _FIXUP_EXT(_name, _manfid, _oemid, _year, _month,\t\\\n\t\t   _rev_start, _rev_end,\t\t\t\\\n\t\t   _cis_vendor, _cis_device,\t\t\t\\\n\t\t   _fixup, _data, _ext_csd_rev)\t\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = (_name),\t\t\t\\\n\t\t.manfid = (_manfid),\t\t\t\\\n\t\t.oemid = (_oemid),\t\t\t\\\n\t\t.year = (_year),\t\t\t\\\n\t\t.month = (_month),\t\t\t\\\n\t\t.rev_start = (_rev_start),\t\t\\\n\t\t.rev_end = (_rev_end),\t\t\t\\\n\t\t.cis_vendor = (_cis_vendor),\t\t\\\n\t\t.cis_device = (_cis_device),\t\t\\\n\t\t.vendor_fixup = (_fixup),\t\t\\\n\t\t.data = (_data),\t\t\t\\\n\t\t.ext_csd_rev = (_ext_csd_rev),\t\t\\\n\t}\n\n#define MMC_FIXUP_REV(_name, _manfid, _oemid, _rev_start, _rev_end,\t\\\n\t\t      _fixup, _data, _ext_csd_rev)\t\t\t\\\n\t_FIXUP_EXT(_name, _manfid, _oemid, CID_YEAR_ANY, CID_MONTH_ANY,\t\\\n\t\t   _rev_start, _rev_end,\t\t\t\t\\\n\t\t   SDIO_ANY_ID, SDIO_ANY_ID,\t\t\t\t\\\n\t\t   _fixup, _data, _ext_csd_rev)\t\t\t\t\\\n\n#define MMC_FIXUP(_name, _manfid, _oemid, _fixup, _data) \\\n\tMMC_FIXUP_REV(_name, _manfid, _oemid, 0, -1ull, _fixup, _data,\t\\\n\t\t      EXT_CSD_REV_ANY)\n\n#define MMC_FIXUP_EXT_CSD_REV(_name, _manfid, _oemid, _fixup, _data,\t\\\n\t\t\t      _ext_csd_rev)\t\t\t\t\\\n\tMMC_FIXUP_REV(_name, _manfid, _oemid, 0, -1ull, _fixup, _data,\t\\\n\t\t      _ext_csd_rev)\n\n#define SDIO_FIXUP(_vendor, _device, _fixup, _data)\t\t\t\\\n\t_FIXUP_EXT(CID_NAME_ANY, CID_MANFID_ANY, CID_OEMID_ANY,\t\t\\\n\t\t   CID_YEAR_ANY, CID_MONTH_ANY,\t\t\t\t\\\n\t\t   0, -1ull,\t\t\t\t\t\t\\\n\t\t   _vendor, _device,\t\t\t\t\t\\\n\t\t   _fixup, _data, EXT_CSD_REV_ANY)\t\t\t\\\n\n#define SDIO_FIXUP_COMPATIBLE(_compatible, _fixup, _data)\t\t\\\n\t{\t\t\t\t\t\t\\\n\t\t.name = CID_NAME_ANY,\t\t\t\\\n\t\t.manfid = CID_MANFID_ANY,\t\t\\\n\t\t.oemid = CID_OEMID_ANY,\t\t\t\\\n\t\t.rev_start = 0,\t\t\t\t\\\n\t\t.rev_end = -1ull,\t\t\t\\\n\t\t.cis_vendor = SDIO_ANY_ID,\t\t\\\n\t\t.cis_device = SDIO_ANY_ID,\t\t\\\n\t\t.vendor_fixup = (_fixup),\t\t\\\n\t\t.data = (_data),\t\t\t\\\n\t\t.ext_csd_rev = EXT_CSD_REV_ANY,\t\t\\\n\t\t.of_compatible = _compatible,\t\\\n\t}\n\n#define cid_rev(hwrev, fwrev, year, month)\t\\\n\t(((u64) hwrev) << 40 |\t\t\t\\\n\t ((u64) fwrev) << 32 |\t\t\t\\\n\t ((u64) year) << 16 |\t\t\t\\\n\t ((u64) month))\n\n#define cid_rev_card(card)\t\t\t\\\n\tcid_rev(card->cid.hwrev,\t\t\\\n\t\t    card->cid.fwrev,\t\t\\\n\t\t    card->cid.year,\t\t\\\n\t\t    card->cid.month)\n\n \nstatic inline void __maybe_unused add_quirk(struct mmc_card *card, int data)\n{\n\tcard->quirks |= data;\n}\n\nstatic inline void __maybe_unused remove_quirk(struct mmc_card *card, int data)\n{\n\tcard->quirks &= ~data;\n}\n\nstatic inline void __maybe_unused add_limit_rate_quirk(struct mmc_card *card,\n\t\t\t\t\t\t       int data)\n{\n\tcard->quirk_max_rate = data;\n}\n\nstatic inline void __maybe_unused wl1251_quirk(struct mmc_card *card,\n\t\t\t\t\t       int data)\n{\n\t \n\n\tdev_info(card->host->parent, \"found wl1251\\n\");\n\tcard->quirks |= MMC_QUIRK_NONSTD_SDIO;\n\tcard->cccr.wide_bus = 1;\n\tcard->cis.vendor = 0x104c;\n\tcard->cis.device = 0x9066;\n\tcard->cis.blksize = 512;\n\tcard->cis.max_dtr = 24000000;\n}\n\n \nstatic inline void __maybe_unused add_quirk_mmc(struct mmc_card *card, int data)\n{\n\tif (mmc_card_mmc(card))\n\t\tcard->quirks |= data;\n}\n\nstatic inline void __maybe_unused remove_quirk_mmc(struct mmc_card *card,\n\t\t\t\t\t\t   int data)\n{\n\tif (mmc_card_mmc(card))\n\t\tcard->quirks &= ~data;\n}\n\n \nstatic inline void __maybe_unused add_quirk_sd(struct mmc_card *card, int data)\n{\n\tif (mmc_card_sd(card))\n\t\tcard->quirks |= data;\n}\n\nstatic inline void __maybe_unused remove_quirk_sd(struct mmc_card *card,\n\t\t\t\t\t\t   int data)\n{\n\tif (mmc_card_sd(card))\n\t\tcard->quirks &= ~data;\n}\n\nstatic inline int mmc_card_lenient_fn0(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_LENIENT_FN0;\n}\n\nstatic inline int mmc_blksz_for_byte_mode(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BLKSZ_FOR_BYTE_MODE;\n}\n\nstatic inline int mmc_card_disable_cd(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_DISABLE_CD;\n}\n\nstatic inline int mmc_card_nonstd_func_interface(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_NONSTD_FUNC_IF;\n}\n\nstatic inline int mmc_card_broken_byte_mode_512(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_BYTE_MODE_512;\n}\n\nstatic inline int mmc_card_long_read_time(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_LONG_READ_TIME;\n}\n\nstatic inline int mmc_card_broken_irq_polling(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_IRQ_POLLING;\n}\n\nstatic inline int mmc_card_broken_hpi(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_HPI;\n}\n\nstatic inline int mmc_card_broken_sd_discard(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_SD_DISCARD;\n}\n\nstatic inline int mmc_card_broken_sd_cache(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_SD_CACHE;\n}\n\nstatic inline int mmc_card_broken_cache_flush(const struct mmc_card *c)\n{\n\treturn c->quirks & MMC_QUIRK_BROKEN_CACHE_FLUSH;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}