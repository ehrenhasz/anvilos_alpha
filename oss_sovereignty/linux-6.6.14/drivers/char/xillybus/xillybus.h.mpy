{
  "module_name": "xillybus.h",
  "hash_id": "5c33452090366062b2b06998622ff384c6c590d4223e8f207e59829677c03438",
  "original_prompt": "Ingested from linux-6.6.14/drivers/char/xillybus/xillybus.h",
  "human_readable_source": " \n \n\n#ifndef __XILLYBUS_H\n#define __XILLYBUS_H\n\n#include <linux/list.h>\n#include <linux/device.h>\n#include <linux/dma-mapping.h>\n#include <linux/interrupt.h>\n#include <linux/sched.h>\n#include <linux/cdev.h>\n#include <linux/spinlock.h>\n#include <linux/mutex.h>\n#include <linux/workqueue.h>\n\nstruct xilly_endpoint_hardware;\n\nstruct xilly_buffer {\n\tvoid *addr;\n\tdma_addr_t dma_addr;\n\tint end_offset;  \n};\n\nstruct xilly_idt_handle {\n\tunsigned char *chandesc;\n\tunsigned char *names;\n\tint names_len;\n\tint entries;\n};\n\n \n\nstruct xilly_channel {\n\tstruct xilly_endpoint *endpoint;\n\tint chan_num;\n\tint log2_element_size;\n\tint seekable;\n\n\tstruct xilly_buffer **wr_buffers;  \n\tint num_wr_buffers;\n\tunsigned int wr_buf_size;  \n\tint wr_fpga_buf_idx;\n\tint wr_host_buf_idx;\n\tint wr_host_buf_pos;\n\tint wr_empty;\n\tint wr_ready;  \n\tint wr_sleepy;\n\tint wr_eof;\n\tint wr_hangup;\n\tspinlock_t wr_spinlock;\n\tstruct mutex wr_mutex;\n\twait_queue_head_t wr_wait;\n\twait_queue_head_t wr_ready_wait;\n\tint wr_ref_count;\n\tint wr_synchronous;\n\tint wr_allow_partial;\n\tint wr_exclusive_open;\n\tint wr_supports_nonempty;\n\n\tstruct xilly_buffer **rd_buffers;  \n\tint num_rd_buffers;\n\tunsigned int rd_buf_size;  \n\tint rd_fpga_buf_idx;\n\tint rd_host_buf_pos;\n\tint rd_host_buf_idx;\n\tint rd_full;\n\tspinlock_t rd_spinlock;\n\tstruct mutex rd_mutex;\n\twait_queue_head_t rd_wait;\n\tint rd_ref_count;\n\tint rd_allow_partial;\n\tint rd_synchronous;\n\tint rd_exclusive_open;\n\tstruct delayed_work rd_workitem;\n\tunsigned char rd_leftovers[4];\n};\n\nstruct xilly_endpoint {\n\tstruct device *dev;\n\tstruct module *owner;\n\n\tint dma_using_dac;  \n\t__iomem void *registers;\n\tint fatal_error;\n\n\tstruct mutex register_mutex;\n\twait_queue_head_t ep_wait;\n\n\tint num_channels;  \n\tstruct xilly_channel **channels;\n\tint msg_counter;\n\tint failed_messages;\n\tint idtlen;\n\n\tu32 *msgbuf_addr;\n\tdma_addr_t msgbuf_dma_addr;\n\tunsigned int msg_buf_size;\n};\n\nstruct xilly_mapping {\n\tstruct device *device;\n\tdma_addr_t dma_addr;\n\tsize_t size;\n\tint direction;\n};\n\nirqreturn_t xillybus_isr(int irq, void *data);\n\nstruct xilly_endpoint *xillybus_init_endpoint(struct device *dev);\n\nint xillybus_endpoint_discovery(struct xilly_endpoint *endpoint);\n\nvoid xillybus_endpoint_remove(struct xilly_endpoint *endpoint);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}