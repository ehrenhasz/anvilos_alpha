{
  "module_name": "xilinx_hwicap.h",
  "hash_id": "9aea08153809e03c7249ee7f25dab1508898ce0c7d93208aed1bf35cbe920740",
  "original_prompt": "Ingested from linux-6.6.14/drivers/char/xilinx_hwicap/xilinx_hwicap.h",
  "human_readable_source": " \n\n#ifndef XILINX_HWICAP_H_\t \n#define XILINX_HWICAP_H_\t \n\n#include <linux/types.h>\n#include <linux/cdev.h>\n#include <linux/platform_device.h>\n\n#include <linux/io.h>\n\nstruct hwicap_drvdata {\n\tu32 write_buffer_in_use;   \n\tu8 write_buffer[4];\n\tu32 read_buffer_in_use;\t   \n\tu8 read_buffer[4];\n\tresource_size_t mem_start; \n\tresource_size_t mem_end;   \n\tresource_size_t mem_size;\n\tvoid __iomem *base_address; \n\n\tstruct device *dev;\n\tstruct cdev cdev;\t \n\tdev_t devt;\n\n\tconst struct hwicap_driver_config *config;\n\tconst struct config_registers *config_regs;\n\tvoid *private_data;\n\tbool is_open;\n\tstruct mutex sem;\n};\n\nstruct hwicap_driver_config {\n\t \n\tint (*get_configuration)(struct hwicap_drvdata *drvdata, u32 *data,\n\t\t\tu32 size);\n\t \n\tint (*set_configuration)(struct hwicap_drvdata *drvdata, u32 *data,\n\t\t\tu32 size);\n\t \n\tu32 (*get_status)(struct hwicap_drvdata *drvdata);\n\t \n\tvoid (*reset)(struct hwicap_drvdata *drvdata);\n};\n\n \n#define XHI_MAX_RETRIES     5000\n\n \n\n#define XHI_PAD_FRAMES              0x1\n\n \n#define XHI_WORD_COUNT_MASK_TYPE_1  0x7FFUL\n#define XHI_WORD_COUNT_MASK_TYPE_2  0x1FFFFFUL\n#define XHI_TYPE_MASK               0x7\n#define XHI_REGISTER_MASK           0xF\n#define XHI_OP_MASK                 0x3\n\n#define XHI_TYPE_SHIFT              29\n#define XHI_REGISTER_SHIFT          13\n#define XHI_OP_SHIFT                27\n\n#define XHI_TYPE_1                  1\n#define XHI_TYPE_2                  2\n#define XHI_OP_WRITE                2\n#define XHI_OP_READ                 1\n\n \n#define XHI_FAR_CLB_BLOCK           0\n#define XHI_FAR_BRAM_BLOCK          1\n#define XHI_FAR_BRAM_INT_BLOCK      2\n\nstruct config_registers {\n\tu32 CRC;\n\tu32 FAR;\n\tu32 FDRI;\n\tu32 FDRO;\n\tu32 CMD;\n\tu32 CTL;\n\tu32 MASK;\n\tu32 STAT;\n\tu32 LOUT;\n\tu32 COR;\n\tu32 MFWR;\n\tu32 FLR;\n\tu32 KEY;\n\tu32 CBC;\n\tu32 IDCODE;\n\tu32 AXSS;\n\tu32 C0R_1;\n\tu32 CSOB;\n\tu32 WBSTAR;\n\tu32 TIMER;\n\tu32 BOOTSTS;\n\tu32 CTL_1;\n};\n\n \n#define XHI_CMD_NULL                0\n#define XHI_CMD_WCFG                1\n#define XHI_CMD_MFW                 2\n#define XHI_CMD_DGHIGH              3\n#define XHI_CMD_RCFG                4\n#define XHI_CMD_START               5\n#define XHI_CMD_RCAP                6\n#define XHI_CMD_RCRC                7\n#define XHI_CMD_AGHIGH              8\n#define XHI_CMD_SWITCH              9\n#define XHI_CMD_GRESTORE            10\n#define XHI_CMD_SHUTDOWN            11\n#define XHI_CMD_GCAPTURE            12\n#define XHI_CMD_DESYNCH             13\n#define XHI_CMD_IPROG               15  \n#define XHI_CMD_CRCC                16  \n#define XHI_CMD_LTIMER              17  \n\n \n#define XHI_SYNC_PACKET             0xAA995566UL\n#define XHI_DUMMY_PACKET            0xFFFFFFFFUL\n#define XHI_NOOP_PACKET             (XHI_TYPE_1 << XHI_TYPE_SHIFT)\n#define XHI_TYPE_2_READ ((XHI_TYPE_2 << XHI_TYPE_SHIFT) | \\\n\t\t\t(XHI_OP_READ << XHI_OP_SHIFT))\n\n#define XHI_TYPE_2_WRITE ((XHI_TYPE_2 << XHI_TYPE_SHIFT) | \\\n\t\t\t(XHI_OP_WRITE << XHI_OP_SHIFT))\n\n#define XHI_TYPE2_CNT_MASK          0x07FFFFFF\n\n#define XHI_TYPE_1_PACKET_MAX_WORDS 2047UL\n#define XHI_TYPE_1_HEADER_BYTES     4\n#define XHI_TYPE_2_HEADER_BYTES     8\n\n \n#define XHI_DISABLED_AUTO_CRC       0x0000DEFCUL\n\n \n#define XHI_SR_CFGERR_N_MASK 0x00000100  \n#define XHI_SR_DALIGN_MASK 0x00000080  \n#define XHI_SR_RIP_MASK 0x00000040  \n#define XHI_SR_IN_ABORT_N_MASK 0x00000020  \n#define XHI_SR_DONE_MASK 0x00000001  \n\n \nstatic inline u32 hwicap_type_1_read(u32 reg)\n{\n\treturn (XHI_TYPE_1 << XHI_TYPE_SHIFT) |\n\t\t(reg << XHI_REGISTER_SHIFT) |\n\t\t(XHI_OP_READ << XHI_OP_SHIFT);\n}\n\n \nstatic inline u32 hwicap_type_1_write(u32 reg)\n{\n\treturn (XHI_TYPE_1 << XHI_TYPE_SHIFT) |\n\t\t(reg << XHI_REGISTER_SHIFT) |\n\t\t(XHI_OP_WRITE << XHI_OP_SHIFT);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}