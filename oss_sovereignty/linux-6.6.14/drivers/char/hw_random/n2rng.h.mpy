{
  "module_name": "n2rng.h",
  "hash_id": "3c73f56885ca76333894eece0127568d77470737360082835f29f6dd43b30e18",
  "original_prompt": "Ingested from linux-6.6.14/drivers/char/hw_random/n2rng.h",
  "human_readable_source": " \n \n\n#ifndef _N2RNG_H\n#define _N2RNG_H\n\n \n#define RNG_v1_CTL_WAIT       0x0000000001fffe00ULL  \n#define RNG_v1_CTL_WAIT_SHIFT 9\n#define RNG_v1_CTL_BYPASS     0x0000000000000100ULL  \n#define RNG_v1_CTL_VCO        0x00000000000000c0ULL  \n#define RNG_v1_CTL_VCO_SHIFT  6\n#define RNG_v1_CTL_ASEL       0x0000000000000030ULL  \n#define RNG_v1_CTL_ASEL_SHIFT 4\n#define RNG_v1_CTL_ASEL_NOOUT 2\n\n \n#define RNG_CTL_LFSR       0x0000000000000008ULL  \n#define RNG_CTL_ES3        0x0000000000000004ULL  \n#define RNG_CTL_ES2        0x0000000000000002ULL  \n#define RNG_CTL_ES1        0x0000000000000001ULL  \n\n \n#define RNG_v2_CTL_WAIT       0x0000000007fff800ULL  \n#define RNG_v2_CTL_WAIT_SHIFT 12\n#define RNG_v2_CTL_BYPASS     0x0000000000000400ULL  \n#define RNG_v2_CTL_VCO        0x0000000000000300ULL  \n#define RNG_v2_CTL_VCO_SHIFT  9\n#define RNG_v2_CTL_PERF       0x0000000000000180ULL  \n#define RNG_v2_CTL_ASEL       0x0000000000000070ULL  \n#define RNG_v2_CTL_ASEL_SHIFT 4\n#define RNG_v2_CTL_ASEL_NOOUT 7\n\n\n#define HV_FAST_RNG_GET_DIAG_CTL\t0x130\n#define HV_FAST_RNG_CTL_READ\t\t0x131\n#define HV_FAST_RNG_CTL_WRITE\t\t0x132\n#define HV_FAST_RNG_DATA_READ_DIAG\t0x133\n#define HV_FAST_RNG_DATA_READ\t\t0x134\n\n#define HV_RNG_STATE_UNCONFIGURED\t0\n#define HV_RNG_STATE_CONFIGURED\t\t1\n#define HV_RNG_STATE_HEALTHCHECK\t2\n#define HV_RNG_STATE_ERROR\t\t3\n\n#define HV_RNG_NUM_CONTROL\t\t4\n\n#ifndef __ASSEMBLY__\nextern unsigned long sun4v_rng_get_diag_ctl(void);\nextern unsigned long sun4v_rng_ctl_read_v1(unsigned long ctl_regs_ra,\n\t\t\t\t\t   unsigned long *state,\n\t\t\t\t\t   unsigned long *tick_delta);\nextern unsigned long sun4v_rng_ctl_read_v2(unsigned long ctl_regs_ra,\n\t\t\t\t\t   unsigned long unit,\n\t\t\t\t\t   unsigned long *state,\n\t\t\t\t\t   unsigned long *tick_delta,\n\t\t\t\t\t   unsigned long *watchdog,\n\t\t\t\t\t   unsigned long *write_status);\nextern unsigned long sun4v_rng_ctl_write_v1(unsigned long ctl_regs_ra,\n\t\t\t\t\t    unsigned long state,\n\t\t\t\t\t    unsigned long write_timeout,\n\t\t\t\t\t    unsigned long *tick_delta);\nextern unsigned long sun4v_rng_ctl_write_v2(unsigned long ctl_regs_ra,\n\t\t\t\t\t    unsigned long state,\n\t\t\t\t\t    unsigned long write_timeout,\n\t\t\t\t\t    unsigned long unit);\nextern unsigned long sun4v_rng_data_read_diag_v1(unsigned long data_ra,\n\t\t\t\t\t\t unsigned long len,\n\t\t\t\t\t\t unsigned long *tick_delta);\nextern unsigned long sun4v_rng_data_read_diag_v2(unsigned long data_ra,\n\t\t\t\t\t\t unsigned long len,\n\t\t\t\t\t\t unsigned long unit,\n\t\t\t\t\t\t unsigned long *tick_delta);\nextern unsigned long sun4v_rng_data_read(unsigned long data_ra,\n\t\t\t\t\t unsigned long *tick_delta);\n\nenum n2rng_compat_id {\n\tN2_n2_rng,\n\tN2_vf_rng,\n\tN2_kt_rng,\n\tN2_m4_rng,\n\tN2_m7_rng,\n};\n\nstruct n2rng_template {\n\tenum n2rng_compat_id id;\n\tint multi_capable;\n\tint chip_version;\n};\n\nstruct n2rng_unit {\n\tu64\t\t\tcontrol[HV_RNG_NUM_CONTROL];\n};\n\nstruct n2rng {\n\tstruct platform_device\t*op;\n\n\tunsigned long\t\tflags;\n#define N2RNG_FLAG_MULTI\t0x00000001  \n#define N2RNG_FLAG_CONTROL\t0x00000002  \n#define N2RNG_FLAG_READY\t0x00000008  \n#define N2RNG_FLAG_SHUTDOWN\t0x00000010  \n#define N2RNG_FLAG_BUFFER_VALID\t0x00000020  \n\n\tstruct n2rng_template\t*data;\n\tint\t\t\tnum_units;\n\tstruct n2rng_unit\t*units;\n\n\tstruct hwrng\t\thwrng;\n\tu32\t\t\tbuffer;\n\n\t \n\tunsigned long\t\thvapi_major;\n\tunsigned long\t\thvapi_minor;\n\n\tstruct delayed_work\twork;\n\n\tunsigned long\t\thv_state;  \n\n\tunsigned long\t\thealth_check_sec;\n\tunsigned long\t\taccum_cycles;\n\tunsigned long\t\twd_timeo;\n#define N2RNG_HEALTH_CHECK_SEC_DEFAULT\t0\n#define N2RNG_ACCUM_CYCLES_DEFAULT\t2048\n#define N2RNG_WD_TIMEO_DEFAULT\t\t0\n\n\tu64\t\t\tscratch_control[HV_RNG_NUM_CONTROL];\n\n#define RNG_v1_SELFTEST_TICKS\t38859\n#define RNG_v1_SELFTEST_VAL\t((u64)0xB8820C7BD387E32C)\n#define RNG_v2_SELFTEST_TICKS\t64\n#define RNG_v2_SELFTEST_VAL\t((u64)0xffffffffffffffff)\n#define SELFTEST_POLY\t\t((u64)0x231DCEE91262B8A3)\n#define SELFTEST_MATCH_GOAL\t6\n#define SELFTEST_LOOPS_MAX\t40000\n#define SELFTEST_BUFFER_WORDS\t8\n\n\tu64\t\t\ttest_data;\n\tu64\t\t\ttest_control[HV_RNG_NUM_CONTROL];\n\tu64\t\t\ttest_buffer[SELFTEST_BUFFER_WORDS];\n};\n\n#define N2RNG_BLOCK_LIMIT\t60000\n#define N2RNG_BUSY_LIMIT\t100\n#define N2RNG_HCHECK_LIMIT\t100\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}