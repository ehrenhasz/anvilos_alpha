{
  "module_name": "powernv-rng.c",
  "hash_id": "06c1ac9a64500105076adca8becada91983fdabc996e4d811bce5899032e42fb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/char/hw_random/powernv-rng.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt)\tKBUILD_MODNAME \": \" fmt\n\n#include <linux/module.h>\n#include <linux/mod_devicetable.h>\n#include <linux/kernel.h>\n#include <linux/platform_device.h>\n#include <linux/random.h>\n#include <linux/hw_random.h>\n#include <asm/archrandom.h>\n\nstatic int powernv_rng_read(struct hwrng *rng, void *data, size_t max, bool wait)\n{\n\tunsigned long *buf;\n\tint i, len;\n\n\t \n\tlen = max / sizeof(unsigned long);\n\n\tbuf = (unsigned long *)data;\n\n\tfor (i = 0; i < len; i++)\n\t\tpnv_get_random_long(buf++);\n\n\treturn len * sizeof(unsigned long);\n}\n\nstatic struct hwrng powernv_hwrng = {\n\t.name = \"powernv-rng\",\n\t.read = powernv_rng_read,\n};\n\nstatic int powernv_rng_probe(struct platform_device *pdev)\n{\n\tint rc;\n\n\trc = devm_hwrng_register(&pdev->dev, &powernv_hwrng);\n\tif (rc) {\n\t\t \n\t\tif (rc == -EEXIST)\n\t\t\trc = -ENODEV;\n\n\t\treturn rc;\n\t}\n\n\tpr_info(\"Registered powernv hwrng.\\n\");\n\n\treturn 0;\n}\n\nstatic const struct of_device_id powernv_rng_match[] = {\n\t{ .compatible\t= \"ibm,power-rng\",},\n\t{},\n};\nMODULE_DEVICE_TABLE(of, powernv_rng_match);\n\nstatic struct platform_driver powernv_rng_driver = {\n\t.driver = {\n\t\t.name = \"powernv_rng\",\n\t\t.of_match_table = powernv_rng_match,\n\t},\n\t.probe\t= powernv_rng_probe,\n};\nmodule_platform_driver(powernv_rng_driver);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_DESCRIPTION(\"Bare metal HWRNG driver for POWER7+ and above\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}