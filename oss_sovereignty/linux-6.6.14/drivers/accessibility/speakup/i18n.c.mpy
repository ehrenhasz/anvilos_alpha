{
  "module_name": "i18n.c",
  "hash_id": "094823939555dd501489b95fa9e4b73e648f151faca6761b6a505e9ba57b5ac4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/accessibility/speakup/i18n.c",
  "human_readable_source": "\n \n\n#include <linux/slab.h>\t\t \n#include <linux/ctype.h>\n#include <linux/module.h>\n#include <linux/string.h>\n#include \"speakup.h\"\n#include \"spk_priv.h\"\n\nstatic char *speakup_msgs[MSG_LAST_INDEX];\nstatic char *speakup_default_msgs[MSG_LAST_INDEX] = {\n\t[MSG_BLANK] = \"blank\",\n\t[MSG_IAM_ALIVE] = \"I'm aLive!\",\n\t[MSG_YOU_KILLED_SPEAKUP] = \"You killed speakup!\",\n\t[MSG_HEY_THATS_BETTER] = \"hey. That's better!\",\n\t[MSG_YOU_TURNED_ME_OFF] = \"You turned me off!\",\n\t[MSG_PARKED] = \"parked!\",\n\t[MSG_UNPARKED] = \"unparked!\",\n\t[MSG_MARK] = \"mark\",\n\t[MSG_CUT] = \"cut\",\n\t[MSG_MARK_CLEARED] = \"mark, cleared\",\n\t[MSG_PASTE] = \"paste\",\n\t[MSG_BRIGHT] = \"bright\",\n\t[MSG_ON_BLINKING] = \"on blinking\",\n\t[MSG_OFF] = \"off\",\n\t[MSG_ON] = \"on\",\n\t[MSG_NO_WINDOW] = \"no window\",\n\t[MSG_CURSORING_OFF] = \"cursoring off\",\n\t[MSG_CURSORING_ON] = \"cursoring on\",\n\t[MSG_HIGHLIGHT_TRACKING] = \"highlight tracking\",\n\t[MSG_READ_WINDOW] = \"read windo\",\n\t[MSG_READ_ALL] = \"read all\",\n\t[MSG_EDIT_DONE] = \"edit done\",\n\t[MSG_WINDOW_ALREADY_SET] = \"window already set, clear then reset\",\n\t[MSG_END_BEFORE_START] = \"error end before start\",\n\t[MSG_WINDOW_CLEARED] = \"window cleared\",\n\t[MSG_WINDOW_SILENCED] = \"window silenced\",\n\t[MSG_WINDOW_SILENCE_DISABLED] = \"window silence disabled\",\n\t[MSG_ERROR] = \"error\",\n\t[MSG_GOTO_CANCELED] = \"goto canceled\",\n\t[MSG_GOTO] = \"go to?\",\n\t[MSG_LEAVING_HELP] = \"leaving help\",\n\t[MSG_IS_UNASSIGNED] = \"is unassigned\",\n\t[MSG_HELP_INFO] =\n\t\"press space to exit, up or down to scroll, or a letter to go to a command\",\n\t[MSG_EDGE_TOP] = \"top,\",\n\t[MSG_EDGE_BOTTOM] = \"bottom,\",\n\t[MSG_EDGE_LEFT] = \"left,\",\n\t[MSG_EDGE_RIGHT] = \"right,\",\n\t[MSG_NUMBER] = \"number\",\n\t[MSG_SPACE] = \"space\",\n\t[MSG_START] = \"start\",\n\t[MSG_END] = \"end\",\n\t[MSG_CTRL] = \"control-\",\n\t[MSG_DISJUNCTION] = \"or\",\n\n \n\t[MSG_POS_INFO] = \"line %ld, col %ld, t t y %d\",\n\t[MSG_CHAR_INFO] = \"hex %02x, decimal %d\",\n\t[MSG_REPEAT_DESC] = \"times %d .\",\n\t[MSG_REPEAT_DESC2] = \"repeated %d .\",\n\t[MSG_WINDOW_LINE] = \"window is line %d\",\n\t[MSG_WINDOW_BOUNDARY] = \"%s at line %d, column %d\",\n\t[MSG_EDIT_PROMPT] = \"edit  %s, press space when done\",\n\t[MSG_NO_COMMAND] = \"no commands for %c\",\n\t[MSG_KEYDESC] = \"is %s\",\n\n\t \n\t \n\t[MSG_CTL_SHIFT] = \"shift\",\n\t[MSG_CTL_ALTGR] = \"altgr\",\n\t[MSG_CTL_CONTROL] = \"control\",\n\t[MSG_CTL_ALT] = \"alt\",\n\t[MSG_CTL_LSHIFT] = \"l shift\",\n\t[MSG_CTL_SPEAKUP] = \"speakup\",\n\t[MSG_CTL_LCONTROL] = \"l control\",\n\t[MSG_CTL_RCONTROL] = \"r control\",\n\t[MSG_CTL_CAPSSHIFT] = \"caps shift\",\n\n\t \n\t[MSG_COLOR_BLACK] = \"black\",\n\t[MSG_COLOR_BLUE] = \"blue\",\n\t[MSG_COLOR_GREEN] = \"green\",\n\t[MSG_COLOR_CYAN] = \"cyan\",\n\t[MSG_COLOR_RED] = \"red\",\n\t[MSG_COLOR_MAGENTA] = \"magenta\",\n\t[MSG_COLOR_YELLOW] = \"yellow\",\n\t[MSG_COLOR_WHITE] = \"white\",\n\t[MSG_COLOR_GREY] = \"grey\",\n\t[MSG_COLOR_BRIGHTBLUE] = \"bright blue\",\n\t[MSG_COLOR_BRIGHTGREEN] = \"bright green\",\n\t[MSG_COLOR_BRIGHTCYAN] = \"bright cyan\",\n\t[MSG_COLOR_BRIGHTRED] = \"bright red\",\n\t[MSG_COLOR_BRIGHTMAGENTA] = \"bright magenta\",\n\t[MSG_COLOR_BRIGHTYELLOW] = \"bright yellow\",\n\t[MSG_COLOR_BRIGHTWHITE] = \"bright white\",\n\n\t \n\t[MSG_STATE_DOUBLE] = \"double\",\n\t[MSG_STATE_SPEAKUP] = \"speakup\",\n\t[MSG_STATE_ALT] = \"alt\",\n\t[MSG_STATE_CONTROL] = \"ctrl\",\n\t[MSG_STATE_ALTGR] = \"altgr\",\n\t[MSG_STATE_SHIFT] = \"shift\",\n\n\t \n\t[MSG_KEYNAME_ESC] = \"escape\",\n\t[MSG_KEYNAME_1] = \"1\",\n\t[MSG_KEYNAME_2] = \"2\",\n\t[MSG_KEYNAME_3] = \"3\",\n\t[MSG_KEYNAME_4] = \"4\",\n\t[MSG_KEYNAME_5] = \"5\",\n\t[MSG_KEYNAME_6] = \"6\",\n\t[MSG_KEYNAME_7] = \"7\",\n\t[MSG_KEYNAME_8] = \"8\",\n\t[MSG_KEYNAME_9] = \"9\",\n\t[MSG_KEYNAME_0] = \"0\",\n\t[MSG_KEYNAME_DASH] = \"minus\",\n\t[MSG_KEYNAME_EQUAL] = \"equal\",\n\t[MSG_KEYNAME_BS] = \"back space\",\n\t[MSG_KEYNAME_TAB] = \"tab\",\n\t[MSG_KEYNAME_Q] = \"q\",\n\t[MSG_KEYNAME_W] = \"w\",\n\t[MSG_KEYNAME_E] = \"e\",\n\t[MSG_KEYNAME_R] = \"r\",\n\t[MSG_KEYNAME_T] = \"t\",\n\t[MSG_KEYNAME_Y] = \"y\",\n\t[MSG_KEYNAME_U] = \"u\",\n\t[MSG_KEYNAME_I] = \"i\",\n\t[MSG_KEYNAME_O] = \"o\",\n\t[MSG_KEYNAME_P] = \"p\",\n\t[MSG_KEYNAME_LEFTBRACE] = \"left brace\",\n\t[MSG_KEYNAME_RIGHTBRACE] = \"right brace\",\n\t[MSG_KEYNAME_ENTER] = \"enter\",\n\t[MSG_KEYNAME_LEFTCTRL] = \"left control\",\n\t[MSG_KEYNAME_A] = \"a\",\n\t[MSG_KEYNAME_S] = \"s\",\n\t[MSG_KEYNAME_D] = \"d\",\n\t[MSG_KEYNAME_F] = \"f\",\n\t[MSG_KEYNAME_G] = \"g\",\n\t[MSG_KEYNAME_H] = \"h\",\n\t[MSG_KEYNAME_J] = \"j\",\n\t[MSG_KEYNAME_K] = \"k\",\n\t[MSG_KEYNAME_L] = \"l\",\n\t[MSG_KEYNAME_SEMICOLON] = \"semicolon\",\n\t[MSG_KEYNAME_SINGLEQUOTE] = \"apostrophe\",\n\t[MSG_KEYNAME_GRAVE] = \"accent\",\n\t[MSG_KEYNAME_LEFTSHFT] = \"left shift\",\n\t[MSG_KEYNAME_BACKSLASH] = \"back slash\",\n\t[MSG_KEYNAME_Z] = \"z\",\n\t[MSG_KEYNAME_X] = \"x\",\n\t[MSG_KEYNAME_C] = \"c\",\n\t[MSG_KEYNAME_V] = \"v\",\n\t[MSG_KEYNAME_B] = \"b\",\n\t[MSG_KEYNAME_N] = \"n\",\n\t[MSG_KEYNAME_M] = \"m\",\n\t[MSG_KEYNAME_COMMA] = \"comma\",\n\t[MSG_KEYNAME_DOT] = \"dot\",\n\t[MSG_KEYNAME_SLASH] = \"slash\",\n\t[MSG_KEYNAME_RIGHTSHFT] = \"right shift\",\n\t[MSG_KEYNAME_KPSTAR] = \"keypad asterisk\",\n\t[MSG_KEYNAME_LEFTALT] = \"left alt\",\n\t[MSG_KEYNAME_SPACE] = \"space\",\n\t[MSG_KEYNAME_CAPSLOCK] = \"caps lock\",\n\t[MSG_KEYNAME_F1] = \"f1\",\n\t[MSG_KEYNAME_F2] = \"f2\",\n\t[MSG_KEYNAME_F3] = \"f3\",\n\t[MSG_KEYNAME_F4] = \"f4\",\n\t[MSG_KEYNAME_F5] = \"f5\",\n\t[MSG_KEYNAME_F6] = \"f6\",\n\t[MSG_KEYNAME_F7] = \"f7\",\n\t[MSG_KEYNAME_F8] = \"f8\",\n\t[MSG_KEYNAME_F9] = \"f9\",\n\t[MSG_KEYNAME_F10] = \"f10\",\n\t[MSG_KEYNAME_NUMLOCK] = \"num lock\",\n\t[MSG_KEYNAME_SCROLLLOCK] = \"scroll lock\",\n\t[MSG_KEYNAME_KP7] = \"keypad 7\",\n\t[MSG_KEYNAME_KP8] = \"keypad 8\",\n\t[MSG_KEYNAME_KP9] = \"keypad 9\",\n\t[MSG_KEYNAME_KPMINUS] = \"keypad minus\",\n\t[MSG_KEYNAME_KP4] = \"keypad 4\",\n\t[MSG_KEYNAME_KP5] = \"keypad 5\",\n\t[MSG_KEYNAME_KP6] = \"keypad 6\",\n\t[MSG_KEYNAME_KPPLUS] = \"keypad plus\",\n\t[MSG_KEYNAME_KP1] = \"keypad 1\",\n\t[MSG_KEYNAME_KP2] = \"keypad 2\",\n\t[MSG_KEYNAME_KP3] = \"keypad 3\",\n\t[MSG_KEYNAME_KP0] = \"keypad 0\",\n\t[MSG_KEYNAME_KPDOT] = \"keypad dot\",\n\t[MSG_KEYNAME_103RD] = \"103rd\",\n\t[MSG_KEYNAME_F13] = \"f13\",\n\t[MSG_KEYNAME_102ND] = \"102nd\",\n\t[MSG_KEYNAME_F11] = \"f11\",\n\t[MSG_KEYNAME_F12] = \"f12\",\n\t[MSG_KEYNAME_F14] = \"f14\",\n\t[MSG_KEYNAME_F15] = \"f15\",\n\t[MSG_KEYNAME_F16] = \"f16\",\n\t[MSG_KEYNAME_F17] = \"f17\",\n\t[MSG_KEYNAME_F18] = \"f18\",\n\t[MSG_KEYNAME_F19] = \"f19\",\n\t[MSG_KEYNAME_F20] = \"f20\",\n\t[MSG_KEYNAME_KPENTER] = \"keypad enter\",\n\t[MSG_KEYNAME_RIGHTCTRL] = \"right control\",\n\t[MSG_KEYNAME_KPSLASH] = \"keypad slash\",\n\t[MSG_KEYNAME_SYSRQ] = \"sysrq\",\n\t[MSG_KEYNAME_RIGHTALT] = \"right alt\",\n\t[MSG_KEYNAME_LF] = \"line feed\",\n\t[MSG_KEYNAME_HOME] = \"home\",\n\t[MSG_KEYNAME_UP] = \"up\",\n\t[MSG_KEYNAME_PGUP] = \"page up\",\n\t[MSG_KEYNAME_LEFT] = \"left\",\n\t[MSG_KEYNAME_RIGHT] = \"right\",\n\t[MSG_KEYNAME_END] = \"end\",\n\t[MSG_KEYNAME_DOWN] = \"down\",\n\t[MSG_KEYNAME_PGDN] = \"page down\",\n\t[MSG_KEYNAME_INS] = \"insert\",\n\t[MSG_KEYNAME_DEL] = \"delete\",\n\t[MSG_KEYNAME_MACRO] = \"macro\",\n\t[MSG_KEYNAME_MUTE] = \"mute\",\n\t[MSG_KEYNAME_VOLDOWN] = \"volume down\",\n\t[MSG_KEYNAME_VOLUP] = \"volume up\",\n\t[MSG_KEYNAME_POWER] = \"power\",\n\t[MSG_KEYNAME_KPEQUAL] = \"keypad equal\",\n\t[MSG_KEYNAME_KPPLUSDASH] = \"keypad plusminus\",\n\t[MSG_KEYNAME_PAUSE] = \"pause\",\n\t[MSG_KEYNAME_F21] = \"f21\",\n\t[MSG_KEYNAME_F22] = \"f22\",\n\t[MSG_KEYNAME_F23] = \"f23\",\n\t[MSG_KEYNAME_F24] = \"f24\",\n\t[MSG_KEYNAME_KPCOMMA] = \"keypad comma\",\n\t[MSG_KEYNAME_LEFTMETA] = \"left meta\",\n\t[MSG_KEYNAME_RIGHTMETA] = \"right meta\",\n\t[MSG_KEYNAME_COMPOSE] = \"compose\",\n\t[MSG_KEYNAME_STOP] = \"stop\",\n\t[MSG_KEYNAME_AGAIN] = \"again\",\n\t[MSG_KEYNAME_PROPS] = \"props\",\n\t[MSG_KEYNAME_UNDO] = \"undo\",\n\t[MSG_KEYNAME_FRONT] = \"front\",\n\t[MSG_KEYNAME_COPY] = \"copy\",\n\t[MSG_KEYNAME_OPEN] = \"open\",\n\t[MSG_KEYNAME_PASTE] = \"paste\",\n\t[MSG_KEYNAME_FIND] = \"find\",\n\t[MSG_KEYNAME_CUT] = \"cut\",\n\t[MSG_KEYNAME_HELP] = \"help\",\n\t[MSG_KEYNAME_MENU] = \"menu\",\n\t[MSG_KEYNAME_CALC] = \"calc\",\n\t[MSG_KEYNAME_SETUP] = \"setup\",\n\t[MSG_KEYNAME_SLEEP] = \"sleep\",\n\t[MSG_KEYNAME_WAKEUP] = \"wakeup\",\n\t[MSG_KEYNAME_FILE] = \"file\",\n\t[MSG_KEYNAME_SENDFILE] = \"send file\",\n\t[MSG_KEYNAME_DELFILE] = \"delete file\",\n\t[MSG_KEYNAME_XFER] = \"transfer\",\n\t[MSG_KEYNAME_PROG1] = \"prog1\",\n\t[MSG_KEYNAME_PROG2] = \"prog2\",\n\t[MSG_KEYNAME_WWW] = \"www\",\n\t[MSG_KEYNAME_MSDOS] = \"msdos\",\n\t[MSG_KEYNAME_COFFEE] = \"coffee\",\n\t[MSG_KEYNAME_DIRECTION] = \"direction\",\n\t[MSG_KEYNAME_CYCLEWINDOWS] = \"cycle windows\",\n\t[MSG_KEYNAME_MAIL] = \"mail\",\n\t[MSG_KEYNAME_BOOKMARKS] = \"bookmarks\",\n\t[MSG_KEYNAME_COMPUTER] = \"computer\",\n\t[MSG_KEYNAME_BACK] = \"back\",\n\t[MSG_KEYNAME_FORWARD] = \"forward\",\n\t[MSG_KEYNAME_CLOSECD] = \"close cd\",\n\t[MSG_KEYNAME_EJECTCD] = \"eject cd\",\n\t[MSG_KEYNAME_EJECTCLOSE] = \"eject close cd\",\n\t[MSG_KEYNAME_NEXTSONG] = \"next song\",\n\t[MSG_KEYNAME_PLAYPAUSE] = \"play pause\",\n\t[MSG_KEYNAME_PREVSONG] = \"previous song\",\n\t[MSG_KEYNAME_STOPCD] = \"stop cd\",\n\t[MSG_KEYNAME_RECORD] = \"record\",\n\t[MSG_KEYNAME_REWIND] = \"rewind\",\n\t[MSG_KEYNAME_PHONE] = \"phone\",\n\t[MSG_KEYNAME_ISO] = \"iso\",\n\t[MSG_KEYNAME_CONFIG] = \"config\",\n\t[MSG_KEYNAME_HOMEPG] = \"home page\",\n\t[MSG_KEYNAME_REFRESH] = \"refresh\",\n\t[MSG_KEYNAME_EXIT] = \"exit\",\n\t[MSG_KEYNAME_MOVE] = \"move\",\n\t[MSG_KEYNAME_EDIT] = \"edit\",\n\t[MSG_KEYNAME_SCROLLUP] = \"scroll up\",\n\t[MSG_KEYNAME_SCROLLDN] = \"scroll down\",\n\t[MSG_KEYNAME_KPLEFTPAR] = \"keypad left paren\",\n\t[MSG_KEYNAME_KPRIGHTPAR] = \"keypad right paren\",\n\n\t \n\t[MSG_FUNCNAME_ATTRIB_BLEEP_DEC] = \"attribute bleep decrement\",\n\t[MSG_FUNCNAME_ATTRIB_BLEEP_INC] = \"attribute bleep increment\",\n\t[MSG_FUNCNAME_BLEEPS_DEC] = \"bleeps decrement\",\n\t[MSG_FUNCNAME_BLEEPS_INC] = \"bleeps increment\",\n\t[MSG_FUNCNAME_CHAR_FIRST] = \"character, first\",\n\t[MSG_FUNCNAME_CHAR_LAST] = \"character, last\",\n\t[MSG_FUNCNAME_CHAR_CURRENT] = \"character, say current\",\n\t[MSG_FUNCNAME_CHAR_HEX_AND_DEC] = \"character, say hex and decimal\",\n\t[MSG_FUNCNAME_CHAR_NEXT] = \"character, say next\",\n\t[MSG_FUNCNAME_CHAR_PHONETIC] = \"character, say phonetic\",\n\t[MSG_FUNCNAME_CHAR_PREVIOUS] = \"character, say previous\",\n\t[MSG_FUNCNAME_CURSOR_PARK] = \"cursor park\",\n\t[MSG_FUNCNAME_CUT] = \"cut\",\n\t[MSG_FUNCNAME_EDIT_DELIM] = \"edit delimiters\",\n\t[MSG_FUNCNAME_EDIT_EXNUM] = \"edit exnum\",\n\t[MSG_FUNCNAME_EDIT_MOST] = \"edit most\",\n\t[MSG_FUNCNAME_EDIT_REPEATS] = \"edit repeats\",\n\t[MSG_FUNCNAME_EDIT_SOME] = \"edit some\",\n\t[MSG_FUNCNAME_GOTO] = \"go to\",\n\t[MSG_FUNCNAME_GOTO_BOTTOM] = \"go to bottom edge\",\n\t[MSG_FUNCNAME_GOTO_LEFT] = \"go to left edge\",\n\t[MSG_FUNCNAME_GOTO_RIGHT] = \"go to right edge\",\n\t[MSG_FUNCNAME_GOTO_TOP] = \"go to top edge\",\n\t[MSG_FUNCNAME_HELP] = \"help\",\n\t[MSG_FUNCNAME_LINE_SAY_CURRENT] = \"line, say current\",\n\t[MSG_FUNCNAME_LINE_SAY_NEXT] = \"line, say next\",\n\t[MSG_FUNCNAME_LINE_SAY_PREVIOUS] = \"line, say previous\",\n\t[MSG_FUNCNAME_LINE_SAY_WITH_INDENT] = \"line, say with indent\",\n\t[MSG_FUNCNAME_PASTE] = \"paste\",\n\t[MSG_FUNCNAME_PITCH_DEC] = \"pitch decrement\",\n\t[MSG_FUNCNAME_PITCH_INC] = \"pitch increment\",\n\t[MSG_FUNCNAME_PUNC_DEC] = \"punctuation decrement\",\n\t[MSG_FUNCNAME_PUNC_INC] = \"punctuation increment\",\n\t[MSG_FUNCNAME_PUNC_LEVEL_DEC] = \"punc level decrement\",\n\t[MSG_FUNCNAME_PUNC_LEVEL_INC] = \"punc level increment\",\n\t[MSG_FUNCNAME_QUIET] = \"quiet\",\n\t[MSG_FUNCNAME_RATE_DEC] = \"rate decrement\",\n\t[MSG_FUNCNAME_RATE_INC] = \"rate increment\",\n\t[MSG_FUNCNAME_READING_PUNC_DEC] = \"reading punctuation decrement\",\n\t[MSG_FUNCNAME_READING_PUNC_INC] = \"reading punctuation increment\",\n\t[MSG_FUNCNAME_SAY_ATTRIBUTES] = \"say attributes\",\n\t[MSG_FUNCNAME_SAY_FROM_LEFT] = \"say from left\",\n\t[MSG_FUNCNAME_SAY_FROM_TOP] = \"say from top\",\n\t[MSG_FUNCNAME_SAY_POSITION] = \"say position\",\n\t[MSG_FUNCNAME_SAY_SCREEN] = \"say screen\",\n\t[MSG_FUNCNAME_SAY_TO_BOTTOM] = \"say to bottom\",\n\t[MSG_FUNCNAME_SAY_TO_RIGHT] = \"say to right\",\n\t[MSG_FUNCNAME_SPEAKUP] = \"speakup\",\n\t[MSG_FUNCNAME_SPEAKUP_LOCK] = \"speakup lock\",\n\t[MSG_FUNCNAME_SPEAKUP_OFF] = \"speakup off\",\n\t[MSG_FUNCNAME_SPEECH_KILL] = \"speech kill\",\n\t[MSG_FUNCNAME_SPELL_DELAY_DEC] = \"spell delay decrement\",\n\t[MSG_FUNCNAME_SPELL_DELAY_INC] = \"spell delay increment\",\n\t[MSG_FUNCNAME_SPELL_WORD] = \"spell word\",\n\t[MSG_FUNCNAME_SPELL_WORD_PHONETICALLY] = \"spell word phonetically\",\n\t[MSG_FUNCNAME_TONE_DEC] = \"tone decrement\",\n\t[MSG_FUNCNAME_TONE_INC] = \"tone increment\",\n\t[MSG_FUNCNAME_VOICE_DEC] = \"voice decrement\",\n\t[MSG_FUNCNAME_VOICE_INC] = \"voice increment\",\n\t[MSG_FUNCNAME_VOLUME_DEC] = \"volume decrement\",\n\t[MSG_FUNCNAME_VOLUME_INC] = \"volume increment\",\n\t[MSG_FUNCNAME_WINDOW_CLEAR] = \"window, clear\",\n\t[MSG_FUNCNAME_WINDOW_SAY] = \"window, say\",\n\t[MSG_FUNCNAME_WINDOW_SET] = \"window, set\",\n\t[MSG_FUNCNAME_WINDOW_SILENCE] = \"window, silence\",\n\t[MSG_FUNCNAME_WORD_SAY_CURRENT] = \"word, say current\",\n\t[MSG_FUNCNAME_WORD_SAY_NEXT] = \"word, say next\",\n\t[MSG_FUNCNAME_WORD_SAY_PREVIOUS] = \"word, say previous\",\n};\n\nstatic struct msg_group_t all_groups[] = {\n\t{\n\t\t.name = \"ctl_keys\",\n\t\t.start = MSG_CTL_START,\n\t\t.end = MSG_CTL_END,\n\t},\n\t{\n\t\t.name = \"colors\",\n\t\t.start = MSG_COLORS_START,\n\t\t.end = MSG_COLORS_END,\n\t},\n\t{\n\t\t.name = \"formatted\",\n\t\t.start = MSG_FORMATTED_START,\n\t\t.end = MSG_FORMATTED_END,\n\t},\n\t{\n\t\t.name = \"function_names\",\n\t\t.start = MSG_FUNCNAMES_START,\n\t\t.end = MSG_FUNCNAMES_END,\n\t},\n\t{\n\t\t.name = \"key_names\",\n\t\t.start = MSG_KEYNAMES_START,\n\t\t.end = MSG_KEYNAMES_END,\n\t},\n\t{\n\t\t.name = \"announcements\",\n\t\t.start = MSG_ANNOUNCEMENTS_START,\n\t\t.end = MSG_ANNOUNCEMENTS_END,\n\t},\n\t{\n\t\t.name = \"states\",\n\t\t.start = MSG_STATES_START,\n\t\t.end = MSG_STATES_END,\n\t},\n};\n\nstatic const  int num_groups = ARRAY_SIZE(all_groups);\n\nchar *spk_msg_get(enum msg_index_t index)\n{\n\treturn speakup_msgs[index];\n}\n\n \nstatic char *next_specifier(char *input)\n{\n\tint found = 0;\n\tchar *next_percent = input;\n\n\twhile (next_percent && !found) {\n\t\tnext_percent = strchr(next_percent, '%');\n\t\tif (next_percent) {\n\t\t\t \n\t\t\twhile (next_percent[0] == '%' &&\n\t\t\t       next_percent[1] == '%')\n\t\t\t\tnext_percent += 2;\n\t\t\tif (*next_percent == '%')\n\t\t\t\tfound = 1;\n\t\t\telse if (*next_percent == '\\0')\n\t\t\t\tnext_percent = NULL;\n\t\t}\n\t}\n\n\treturn next_percent;\n}\n\n \nstatic char *skip_flags(char *input)\n{\n\twhile ((*input != '\\0') && strchr(\" 0+-#\", *input))\n\t\tinput++;\n\treturn input;\n}\n\n \nstatic char *skip_width(char *input)\n{\n\twhile (isdigit(*input))\n\t\tinput++;\n\tif (*input == '.') {\n\t\tinput++;\n\t\twhile (isdigit(*input))\n\t\t\tinput++;\n\t}\n\treturn input;\n}\n\n \nstatic char *skip_conversion(char *input)\n{\n\tif ((input[0] == 'l') && (input[1] == 'd'))\n\t\tinput += 2;\n\telse if ((*input != '\\0') && strchr(\"cdsx\", *input))\n\t\tinput++;\n\treturn input;\n}\n\n \nstatic char *find_specifier_end(char *input)\n{\n\tinput++;\t\t \n\tinput = skip_flags(input);\n\tinput = skip_width(input);\n\tinput = skip_conversion(input);\n\treturn input;\n}\n\n \nstatic bool compare_specifiers(char **input1, char **input2)\n{\n\tbool same = false;\n\tchar *end1 = find_specifier_end(*input1);\n\tchar *end2 = find_specifier_end(*input2);\n\tsize_t length1 = end1 - *input1;\n\tsize_t length2 = end2 - *input2;\n\n\tif ((length1 == length2) && !memcmp(*input1, *input2, length1))\n\t\tsame = true;\n\n\t*input1 = end1;\n\t*input2 = end2;\n\treturn same;\n}\n\n \nstatic bool fmt_validate(char *template, char *user)\n{\n\tbool valid = true;\n\tbool still_comparing = true;\n\tchar *template_ptr = template;\n\tchar *user_ptr = user;\n\n\twhile (still_comparing && valid) {\n\t\ttemplate_ptr = next_specifier(template_ptr);\n\t\tuser_ptr = next_specifier(user_ptr);\n\t\tif (template_ptr && user_ptr) {\n\t\t\t \n\t\t\tvalid = compare_specifiers(&template_ptr, &user_ptr);\n\t\t} else {\n\t\t\t \n\t\t\tstill_comparing = false;\n\t\t\t \n\t\t\tif (template_ptr || user_ptr)\n\t\t\t\tvalid = false;\n\t\t}\n\t}\n\treturn valid;\n}\n\n \nssize_t spk_msg_set(enum msg_index_t index, char *text, size_t length)\n{\n\tchar *newstr = NULL;\n\tunsigned long flags;\n\n\tif ((index < MSG_FIRST_INDEX) || (index >= MSG_LAST_INDEX))\n\t\treturn -EINVAL;\n\n\tnewstr = kmemdup_nul(text, length, GFP_KERNEL);\n\tif (!newstr)\n\t\treturn -ENOMEM;\n\n\tif (index >= MSG_FORMATTED_START &&\n\t    index <= MSG_FORMATTED_END &&\n\t    !fmt_validate(speakup_default_msgs[index], newstr)) {\n\t\tkfree(newstr);\n\t\treturn -EINVAL;\n\t}\n\tspin_lock_irqsave(&speakup_info.spinlock, flags);\n\tif (speakup_msgs[index] != speakup_default_msgs[index])\n\t\tkfree(speakup_msgs[index]);\n\tspeakup_msgs[index] = newstr;\n\tspin_unlock_irqrestore(&speakup_info.spinlock, flags);\n\treturn 0;\n}\n\n \nstruct msg_group_t *spk_find_msg_group(const char *group_name)\n{\n\tstruct msg_group_t *group = NULL;\n\tint i;\n\n\tfor (i = 0; i < num_groups; i++) {\n\t\tif (!strcmp(all_groups[i].name, group_name)) {\n\t\t\tgroup = &all_groups[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn group;\n}\n\nvoid spk_reset_msg_group(struct msg_group_t *group)\n{\n\tunsigned long flags;\n\tenum msg_index_t i;\n\n\tspin_lock_irqsave(&speakup_info.spinlock, flags);\n\n\tfor (i = group->start; i <= group->end; i++) {\n\t\tif (speakup_msgs[i] != speakup_default_msgs[i])\n\t\t\tkfree(speakup_msgs[i]);\n\t\tspeakup_msgs[i] = speakup_default_msgs[i];\n\t}\n\tspin_unlock_irqrestore(&speakup_info.spinlock, flags);\n}\n\n \nvoid spk_initialize_msgs(void)\n{\n\tmemcpy(speakup_msgs, speakup_default_msgs,\n\t       sizeof(speakup_default_msgs));\n}\n\n \nvoid spk_free_user_msgs(void)\n{\n\tenum msg_index_t index;\n\tunsigned long flags;\n\n\tspin_lock_irqsave(&speakup_info.spinlock, flags);\n\tfor (index = MSG_FIRST_INDEX; index < MSG_LAST_INDEX; index++) {\n\t\tif (speakup_msgs[index] != speakup_default_msgs[index]) {\n\t\t\tkfree(speakup_msgs[index]);\n\t\t\tspeakup_msgs[index] = speakup_default_msgs[index];\n\t\t}\n\t}\n\tspin_unlock_irqrestore(&speakup_info.spinlock, flags);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}