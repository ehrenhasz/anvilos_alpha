{
  "module_name": "radio-si470x.h",
  "hash_id": "acc977038e4ca1fbe2461b772a024af90edb83fae37a51adb7abf8c1d1db3160",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/radio/si470x/radio-si470x.h",
  "human_readable_source": " \n \n\n\n \n#define DRIVER_NAME \"radio-si470x\"\n\n\n \n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/sched.h>\n#include <linux/slab.h>\n#include <linux/input.h>\n#include <linux/videodev2.h>\n#include <linux/mutex.h>\n#include <media/v4l2-common.h>\n#include <media/v4l2-ioctl.h>\n#include <media/v4l2-ctrls.h>\n#include <media/v4l2-event.h>\n#include <media/v4l2-device.h>\n#include <asm/unaligned.h>\n\n\n\n \n#define RADIO_REGISTER_SIZE\t2\t \n#define RADIO_REGISTER_NUM\t16\t \n#define RDS_REGISTER_NUM\t6\t \n\n#define DEVICEID\t\t0\t \n#define DEVICEID_PN\t\t0xf000\t \n#define DEVICEID_MFGID\t\t0x0fff\t \n\n#define SI_CHIPID\t\t1\t \n#define SI_CHIPID_REV\t\t0xfc00\t \n#define SI_CHIPID_DEV\t\t0x0200\t \n#define SI_CHIPID_FIRMWARE\t0x01ff\t \n\n#define POWERCFG\t\t2\t \n#define POWERCFG_DSMUTE\t\t0x8000\t \n#define POWERCFG_DMUTE\t\t0x4000\t \n#define POWERCFG_MONO\t\t0x2000\t \n#define POWERCFG_RDSM\t\t0x0800\t \n#define POWERCFG_SKMODE\t\t0x0400\t \n#define POWERCFG_SEEKUP\t\t0x0200\t \n#define POWERCFG_SEEK\t\t0x0100\t \n#define POWERCFG_DISABLE\t0x0040\t \n#define POWERCFG_ENABLE\t\t0x0001\t \n\n#define CHANNEL\t\t\t3\t \n#define CHANNEL_TUNE\t\t0x8000\t \n#define CHANNEL_CHAN\t\t0x03ff\t \n\n#define SYSCONFIG1\t\t4\t \n#define SYSCONFIG1_RDSIEN\t0x8000\t \n#define SYSCONFIG1_STCIEN\t0x4000\t \n#define SYSCONFIG1_RDS\t\t0x1000\t \n#define SYSCONFIG1_DE\t\t0x0800\t \n#define SYSCONFIG1_AGCD\t\t0x0400\t \n#define SYSCONFIG1_BLNDADJ\t0x00c0\t \n#define SYSCONFIG1_GPIO3\t0x0030\t \n#define SYSCONFIG1_GPIO2\t0x000c\t \n#define SYSCONFIG1_GPIO2_DIS\t0x0000\t \n#define SYSCONFIG1_GPIO2_INT\t0x0004\t \n#define SYSCONFIG1_GPIO1\t0x0003\t \n\n#define SYSCONFIG2\t\t5\t \n#define SYSCONFIG2_SEEKTH\t0xff00\t \n#define SYSCONFIG2_BAND\t\t0x00c0\t \n#define SYSCONFIG2_SPACE\t0x0030\t \n#define SYSCONFIG2_VOLUME\t0x000f\t \n\n#define SYSCONFIG3\t\t6\t \n#define SYSCONFIG3_SMUTER\t0xc000\t \n#define SYSCONFIG3_SMUTEA\t0x3000\t \n#define SYSCONFIG3_SKSNR\t0x00f0\t \n#define SYSCONFIG3_SKCNT\t0x000f\t \n\n#define TEST1\t\t\t7\t \n#define TEST1_AHIZEN\t\t0x4000\t \n\n#define TEST2\t\t\t8\t \n \n\n#define BOOTCONFIG\t\t9\t \n \n\n#define STATUSRSSI\t\t10\t \n#define STATUSRSSI_RDSR\t\t0x8000\t \n#define STATUSRSSI_STC\t\t0x4000\t \n#define STATUSRSSI_SF\t\t0x2000\t \n#define STATUSRSSI_AFCRL\t0x1000\t \n#define STATUSRSSI_RDSS\t\t0x0800\t \n#define STATUSRSSI_BLERA\t0x0600\t \n#define STATUSRSSI_ST\t\t0x0100\t \n#define STATUSRSSI_RSSI\t\t0x00ff\t \n\n#define READCHAN\t\t11\t \n#define READCHAN_BLERB\t\t0xc000\t \n#define READCHAN_BLERC\t\t0x3000\t \n#define READCHAN_BLERD\t\t0x0c00\t \n#define READCHAN_READCHAN\t0x03ff\t \n\n#define RDSA\t\t\t12\t \n#define RDSA_RDSA\t\t0xffff\t \n\n#define RDSB\t\t\t13\t \n#define RDSB_RDSB\t\t0xffff\t \n\n#define RDSC\t\t\t14\t \n#define RDSC_RDSC\t\t0xffff\t \n\n#define RDSD\t\t\t15\t \n#define RDSD_RDSD\t\t0xffff\t \n\n\n\n \n\n \nstruct si470x_device {\n\tstruct v4l2_device v4l2_dev;\n\tstruct video_device videodev;\n\tstruct v4l2_ctrl_handler hdl;\n\tint band;\n\n\t \n\tunsigned short registers[RADIO_REGISTER_NUM];\n\n\t \n\twait_queue_head_t read_queue;\n\tstruct mutex lock;\t\t \n\tunsigned char *buffer;\t\t \n\tunsigned int buf_size;\n\tunsigned int rd_index;\n\tunsigned int wr_index;\n\n\tstruct completion completion;\n\tbool status_rssi_auto_update;\t \n\n\t \n\n\tint (*get_register)(struct si470x_device *radio, int regnr);\n\tint (*set_register)(struct si470x_device *radio, int regnr);\n\tint (*fops_open)(struct file *file);\n\tint (*fops_release)(struct file *file);\n\tint (*vidioc_querycap)(struct file *file, void *priv,\n\t\t\t       struct v4l2_capability *capability);\n\n#if IS_ENABLED(CONFIG_USB_SI470X)\n\t \n\tstruct usb_device *usbdev;\n\tstruct usb_interface *intf;\n\tchar *usb_buf;\n\n\t \n\tchar *int_in_buffer;\n\tstruct usb_endpoint_descriptor *int_in_endpoint;\n\tstruct urb *int_in_urb;\n\tint int_in_running;\n\n\t \n\tunsigned char software_version;\n\tunsigned char hardware_version;\n#endif\n\n#if IS_ENABLED(CONFIG_I2C_SI470X)\n\tstruct i2c_client *client;\n\tstruct gpio_desc *gpio_reset;\n#endif\n};\n\n\n\n \n\n#define RADIO_FW_VERSION\t12\n\n\n\n \n\n \n#define FREQ_MUL (1000000 / 62.5)\n\n\n\n \nextern const struct video_device si470x_viddev_template;\nextern const struct v4l2_ctrl_ops si470x_ctrl_ops;\nint si470x_disconnect_check(struct si470x_device *radio);\nint si470x_set_freq(struct si470x_device *radio, unsigned int freq);\nint si470x_start(struct si470x_device *radio);\nint si470x_stop(struct si470x_device *radio);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}