{
  "module_name": "fmdrv.h",
  "hash_id": "25adfe41c260a9ddab38f467aee77e2e3bf016e6ab3eddda799d06a080663e6d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/radio/wl128x/fmdrv.h",
  "human_readable_source": " \n \n\n#ifndef _FM_DRV_H\n#define _FM_DRV_H\n\n#include <linux/skbuff.h>\n#include <linux/interrupt.h>\n#include <sound/core.h>\n#include <sound/initval.h>\n#include <linux/timer.h>\n#include <media/v4l2-ioctl.h>\n#include <media/v4l2-common.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-ctrls.h>\n\n#define FM_DRV_VERSION            \"0.1.1\"\n#define FM_DRV_NAME               \"ti_fmdrv\"\n#define FM_DRV_CARD_SHORT_NAME    \"TI FM Radio\"\n#define FM_DRV_CARD_LONG_NAME     \"Texas Instruments FM Radio\"\n\n \n#define FM_INTTASK_RUNNING            0\n#define FM_INTTASK_SCHEDULE_PENDING   1\n#define FM_FW_DW_INPROGRESS     2\n#define FM_CORE_READY                 3\n#define FM_CORE_TRANSPORT_READY       4\n#define FM_AF_SWITCH_INPROGRESS\t      5\n#define FM_CORE_TX_XMITING\t      6\n\n#define FM_TUNE_COMPLETE\t      0x1\n#define FM_BAND_LIMIT\t\t      0x2\n\n#define FM_DRV_TX_TIMEOUT      (5*HZ)\t \n#define FM_DRV_RX_SEEK_TIMEOUT (20*HZ)\t \n\n#define fmerr(format, ...) \\\n\tprintk(KERN_ERR \"fmdrv: \" format, ## __VA_ARGS__)\n#define fmwarn(format, ...) \\\n\tprintk(KERN_WARNING \"fmdrv: \" format, ##__VA_ARGS__)\n#ifdef DEBUG\n#define fmdbg(format, ...) \\\n\tprintk(KERN_DEBUG \"fmdrv: \" format, ## __VA_ARGS__)\n#else  \n#define fmdbg(format, ...) do {} while(0)\n#endif\nenum {\n\tFM_MODE_OFF,\n\tFM_MODE_TX,\n\tFM_MODE_RX,\n\tFM_MODE_ENTRY_MAX\n};\n\n#define FM_RX_RDS_INFO_FIELD_MAX\t8\t \n\n \nstruct fm_rdsdata_format {\n\tunion {\n\t\tstruct {\n\t\t\tu8 buff[FM_RX_RDS_INFO_FIELD_MAX];\n\t\t} groupdatabuff;\n\t\tstruct {\n\t\t\tu16 pidata;\n\t\t\tu8 blk_b[2];\n\t\t\tu8 blk_c[2];\n\t\t\tu8 blk_d[2];\n\t\t} groupgeneral;\n\t\tstruct {\n\t\t\tu16 pidata;\n\t\t\tu8 blk_b[2];\n\t\t\tu8 af[2];\n\t\t\tu8 ps[2];\n\t\t} group0A;\n\t\tstruct {\n\t\t\tu16 pi[2];\n\t\t\tu8 blk_b[2];\n\t\t\tu8 ps[2];\n\t\t} group0B;\n\t} data;\n};\n\n \nstruct region_info {\n\tu32 chanl_space;\n\tu32 bot_freq;\n\tu32 top_freq;\n\tu8 fm_band;\n};\nstruct fmdev;\ntypedef void (*int_handler_prototype) (struct fmdev *);\n\n \nstruct fm_irq {\n\tu8 stage;\n\tu16 flag;\t \n\tu16 mask;\t \n\t \n\tstruct timer_list timer;\n\tu8 retry;\n\tint_handler_prototype *handlers;\n};\n\n \nstruct fm_rds {\n\tu8 flag;\t \n\tu8 last_blk_idx;\t \n\n\t \n\twait_queue_head_t read_queue;\n\tu32 buf_size;\t \n\tu32 wr_idx;\n\tu32 rd_idx;\n\tu8 *buff;\n};\n\n#define FM_RDS_MAX_AF_LIST\t\t25\n\n \nstruct tuned_station_info {\n\tu16 picode;\n\tu32 af_cache[FM_RDS_MAX_AF_LIST];\n\tu8 afcache_size;\n\tu8 af_list_max;\n};\n\n \nstruct fm_rx {\n\tstruct region_info region;\t \n\tu32 freq;\t \n\tu8 mute_mode;\t \n\tu8 deemphasis_mode;  \n\t \n\tu8 rf_depend_mute;\n\tu16 volume;\t \n\tu16 rssi_threshold;\t \n\t \n\tu8 afjump_idx;\n\t \n\tu32 freq_before_jump;\n\tu8 rds_mode;\t \n\tu8 af_mode;\t \n\tstruct tuned_station_info stat_info;\n\tstruct fm_rds rds;\n};\n\n#define FMTX_RDS_TXT_STR_SIZE\t25\n \nstruct tx_rds {\n\tu8 text_type;\n\tu8 text[FMTX_RDS_TXT_STR_SIZE];\n\tu8 flag;\n\tu32 af_freq;\n};\n \nstruct fmtx_data {\n\tu8 pwr_lvl;\n\tu8 xmit_state;\n\tu8 audio_io;\n\tu8 region;\n\tu16 aud_mode;\n\tu32 preemph;\n\tu32 tx_frq;\n\tstruct tx_rds rds;\n};\n\n \nstruct fmdev {\n\tstruct video_device *radio_dev;\t \n\tstruct v4l2_device v4l2_dev;\t \n\tstruct snd_card *card;\t \n\tu16 asci_id;\n\tspinlock_t rds_buff_lock;  \n\tspinlock_t resp_skb_lock;  \n\n\tlong flag;\t\t \n\tint streg_cbdata;  \n\n\tstruct sk_buff_head rx_q;\t \n\tstruct tasklet_struct rx_task;\t \n\n\tstruct sk_buff_head tx_q;\t \n\tstruct tasklet_struct tx_task;\t \n\tunsigned long last_tx_jiffies;\t \n\tatomic_t tx_cnt;\t \n\n\tstruct sk_buff *resp_skb;\t \n\t \n\tstruct completion maintask_comp;\n\t \n\tu8 pre_op;\n\t \n\tstruct completion *resp_comp;\n\tstruct fm_irq irq_info;\n\tu8 curr_fmmode;  \n\tstruct fm_rx rx;\t \n\tstruct fmtx_data tx_data;\n\n\t \n\tstruct v4l2_ctrl_handler ctrl_handler;\n\n\t \n\tstruct mutex mutex;\n};\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}