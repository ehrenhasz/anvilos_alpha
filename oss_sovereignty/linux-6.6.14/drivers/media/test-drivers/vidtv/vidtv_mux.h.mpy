{
  "module_name": "vidtv_mux.h",
  "hash_id": "9d75a947b306abc13c1a9657241bd1151cb8bf4a7ad653b9260765dede271e77",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/test-drivers/vidtv/vidtv_mux.h",
  "human_readable_source": " \n \n\n#ifndef VIDTV_MUX_H\n#define VIDTV_MUX_H\n\n#include <linux/hashtable.h>\n#include <linux/types.h>\n#include <linux/workqueue.h>\n\n#include <media/dvb_frontend.h>\n\n#include \"vidtv_psi.h\"\n\n \nstruct vidtv_mux_timing {\n\tu64 start_jiffies;\n\tu64 current_jiffies;\n\tu64 past_jiffies;\n\n\tu64 clk;\n\n\tu64 pcr_period_usecs;\n\tu64 si_period_usecs;\n};\n\n \nstruct vidtv_mux_si {\n\t \n\tstruct vidtv_psi_table_pat *pat;\n\tstruct vidtv_psi_table_pmt **pmt_secs;  \n\tstruct vidtv_psi_table_sdt *sdt;\n\tstruct vidtv_psi_table_nit *nit;\n\tstruct vidtv_psi_table_eit *eit;\n};\n\n \nstruct vidtv_mux_pid_ctx {\n\tu16 pid;\n\tu8 cc;  \n\tstruct hlist_node h;\n};\n\n \nstruct vidtv_mux {\n\tstruct dvb_frontend *fe;\n\tstruct device *dev;\n\n\tstruct vidtv_mux_timing timing;\n\n\tu32 mux_rate_kbytes_sec;\n\n\tDECLARE_HASHTABLE(pid_ctx, 3);\n\n\tvoid (*on_new_packets_available_cb)(void *priv, u8 *buf, u32 npackets);\n\n\tu8 *mux_buf;\n\tu32 mux_buf_sz;\n\tu32 mux_buf_offset;\n\n\tstruct vidtv_channel  *channels;\n\n\tstruct vidtv_mux_si si;\n\tu64 num_streamed_pcr;\n\tu64 num_streamed_si;\n\n\tstruct work_struct mpeg_thread;\n\tbool streaming;\n\n\tu16 pcr_pid;\n\tu16 transport_stream_id;\n\tu16 network_id;\n\tchar *network_name;\n\tvoid *priv;\n};\n\n \nstruct vidtv_mux_init_args {\n\tu32 mux_rate_kbytes_sec;\n\tvoid (*on_new_packets_available_cb)(void *priv, u8 *buf, u32 npackets);\n\tu32 mux_buf_sz;\n\tu64 pcr_period_usecs;\n\tu64 si_period_usecs;\n\tu16 pcr_pid;\n\tu16 transport_stream_id;\n\tstruct vidtv_channel *channels;\n\tu16 network_id;\n\tchar *network_name;\n\tvoid *priv;\n};\n\nstruct vidtv_mux *vidtv_mux_init(struct dvb_frontend *fe,\n\t\t\t\t struct device *dev,\n\t\t\t\t struct vidtv_mux_init_args *args);\nvoid vidtv_mux_destroy(struct vidtv_mux *m);\n\nvoid vidtv_mux_start_thread(struct vidtv_mux *m);\nvoid vidtv_mux_stop_thread(struct vidtv_mux *m);\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}