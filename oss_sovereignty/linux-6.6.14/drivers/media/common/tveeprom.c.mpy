{
  "module_name": "tveeprom.c",
  "hash_id": "94e23099e0873bcc4c0e6e8e1048b0a851c403837fc9888a80debf83bd386f58",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/common/tveeprom.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n#include <linux/module.h>\n#include <linux/errno.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/types.h>\n#include <linux/videodev2.h>\n#include <linux/i2c.h>\n\n#include <media/tuner.h>\n#include <media/tveeprom.h>\n#include <media/v4l2-common.h>\n\nMODULE_DESCRIPTION(\"i2c Hauppauge eeprom decoder driver\");\nMODULE_AUTHOR(\"John Klar\");\nMODULE_LICENSE(\"GPL\");\n\n#define STRM(array, i) \\\n\t(i < sizeof(array) / sizeof(char *) ? array[i] : \"unknown\")\n\n\n \nstatic const struct {\n\tint\tid;\n\tconst char * const name;\n} hauppauge_tuner_fmt[] = {\n\t{ V4L2_STD_UNKNOWN,                   \" UNKNOWN\" },\n\t{ V4L2_STD_UNKNOWN,                   \" FM\" },\n\t{ V4L2_STD_B|V4L2_STD_GH,             \" PAL(B/G)\" },\n\t{ V4L2_STD_MN,                        \" NTSC(M)\" },\n\t{ V4L2_STD_PAL_I,                     \" PAL(I)\" },\n\t{ V4L2_STD_SECAM_L|V4L2_STD_SECAM_LC, \" SECAM(L/L')\" },\n\t{ V4L2_STD_DK,                        \" PAL(D/D1/K)\" },\n\t{ V4L2_STD_ATSC,                      \" ATSC/DVB Digital\" },\n};\n\n \nstatic const struct {\n\tint  id;\n\tconst char * const name;\n} hauppauge_tuner[] = {\n\t \n\t{ TUNER_ABSENT,\t\t\t\"None\" },\n\t{ TUNER_ABSENT,\t\t\t\"External\" },\n\t{ TUNER_ABSENT,\t\t\t\"Unspecified\" },\n\t{ TUNER_PHILIPS_PAL,\t\t\"Philips FI1216\" },\n\t{ TUNER_PHILIPS_SECAM,\t\t\"Philips FI1216MF\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips FI1236\" },\n\t{ TUNER_PHILIPS_PAL_I,\t\t\"Philips FI1246\" },\n\t{ TUNER_PHILIPS_PAL_DK,\t\t\"Philips FI1256\" },\n\t{ TUNER_PHILIPS_PAL,\t\t\"Philips FI1216 MK2\" },\n\t{ TUNER_PHILIPS_SECAM,\t\t\"Philips FI1216MF MK2\" },\n\t \n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips FI1236 MK2\" },\n\t{ TUNER_PHILIPS_PAL_I,\t\t\"Philips FI1246 MK2\" },\n\t{ TUNER_PHILIPS_PAL_DK,\t\t\"Philips FI1256 MK2\" },\n\t{ TUNER_TEMIC_NTSC,\t\t\"Temic 4032FY5\" },\n\t{ TUNER_TEMIC_PAL,\t\t\"Temic 4002FH5\" },\n\t{ TUNER_TEMIC_PAL_I,\t\t\"Temic 4062FY5\" },\n\t{ TUNER_PHILIPS_PAL,\t\t\"Philips FR1216 MK2\" },\n\t{ TUNER_PHILIPS_SECAM,\t\t\"Philips FR1216MF MK2\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips FR1236 MK2\" },\n\t{ TUNER_PHILIPS_PAL_I,\t\t\"Philips FR1246 MK2\" },\n\t \n\t{ TUNER_PHILIPS_PAL_DK,\t\t\"Philips FR1256 MK2\" },\n\t{ TUNER_PHILIPS_PAL,\t\t\"Philips FM1216\" },\n\t{ TUNER_PHILIPS_SECAM,\t\t\"Philips FM1216MF\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips FM1236\" },\n\t{ TUNER_PHILIPS_PAL_I,\t\t\"Philips FM1246\" },\n\t{ TUNER_PHILIPS_PAL_DK,\t\t\"Philips FM1256\" },\n\t{ TUNER_TEMIC_4036FY5_NTSC,\t\"Temic 4036FY5\" },\n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPN9082D\" },\n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPM9092P\" },\n\t{ TUNER_TEMIC_4006FH5_PAL,\t\"Temic 4006FH5\" },\n\t \n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPN9085D\" },\n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPB9085P\" },\n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPL9091P\" },\n\t{ TUNER_TEMIC_4039FR5_NTSC,\t\"Temic 4039FR5\" },\n\t{ TUNER_PHILIPS_FQ1216ME,\t\"Philips FQ1216 ME\" },\n\t{ TUNER_TEMIC_4066FY5_PAL_I,\t\"Temic 4066FY5\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips TD1536\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips TD1536D\" },\n\t{ TUNER_PHILIPS_NTSC,\t\t\"Philips FMR1236\" },  \n\t{ TUNER_ABSENT,\t\t\t\"Philips FI1256MP\" },\n\t \n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPQ9091P\" },\n\t{ TUNER_TEMIC_4006FN5_MULTI_PAL,\"Temic 4006FN5\" },\n\t{ TUNER_TEMIC_4009FR5_PAL,\t\"Temic 4009FR5\" },\n\t{ TUNER_TEMIC_4046FM5,\t\t\"Temic 4046FM5\" },\n\t{ TUNER_TEMIC_4009FN5_MULTI_PAL_FM, \"Temic 4009FN5\" },\n\t{ TUNER_ABSENT,\t\t\t\"Philips TD1536D FH 44\"},\n\t{ TUNER_LG_NTSC_FM,\t\t\"LG TP18NSR01F\"},\n\t{ TUNER_LG_PAL_FM,\t\t\"LG TP18PSB01D\"},\n\t{ TUNER_LG_PAL,\t\t\"LG TP18PSB11D\"},\n\t{ TUNER_LG_PAL_I_FM,\t\t\"LG TAPC-I001D\"},\n\t \n\t{ TUNER_LG_PAL_I,\t\t\"LG TAPC-I701D\"},\n\t{ TUNER_ABSENT,\t\t\t\"Temic 4042FI5\"},\n\t{ TUNER_MICROTUNE_4049FM5,\t\"Microtune 4049 FM5\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TPI8NSR11F\"},\n\t{ TUNER_ABSENT,\t\t\t\"Microtune 4049 FM5 Alt I2C\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"Philips FQ1216ME MK3\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FI1236 MK3\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"Philips FM1216 ME MK3\"},\n\t{ TUNER_PHILIPS_FM1236_MK3,\t\"Philips FM1236 MK3\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FM1216MP MK3\"},\n\t \n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"LG S001D MK3\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG M001D MK3\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"LG S701D MK3\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG M701D MK3\"},\n\t{ TUNER_ABSENT,\t\t\t\"Temic 4146FM5\"},\n\t{ TUNER_ABSENT,\t\t\t\"Temic 4136FY5\"},\n\t{ TUNER_ABSENT,\t\t\t\"Temic 4106FH5\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FQ1216LMP MK3\"},\n\t{ TUNER_LG_NTSC_TAPE,\t\t\"LG TAPE H001F MK3\"},\n\t{ TUNER_LG_NTSC_TAPE,\t\t\"LG TAPE H701F MK3\"},\n\t \n\t{ TUNER_ABSENT,\t\t\t\"LG TALN H200T\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TALN H250T\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TALN M200T\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TALN Z200T\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TALN S200T\"},\n\t{ TUNER_ABSENT,\t\t\t\"Thompson DTT7595\"},\n\t{ TUNER_ABSENT,\t\t\t\"Thompson DTT7592\"},\n\t{ TUNER_ABSENT,\t\t\t\"Silicon TDA8275C1 8290\"},\n\t{ TUNER_ABSENT,\t\t\t\"Silicon TDA8275C1 8290 FM\"},\n\t{ TUNER_ABSENT,\t\t\t\"Thompson DTT757\"},\n\t \n\t{ TUNER_PHILIPS_FQ1216LME_MK3,\t\"Philips FQ1216LME MK3\"},\n\t{ TUNER_LG_PAL_NEW_TAPC,\t\"LG TAPC G701D\"},\n\t{ TUNER_LG_NTSC_NEW_TAPC,\t\"LG TAPC H791F\"},\n\t{ TUNER_LG_PAL_NEW_TAPC,\t\"TCL 2002MB 3\"},\n\t{ TUNER_LG_PAL_NEW_TAPC,\t\"TCL 2002MI 3\"},\n\t{ TUNER_TCL_2002N,\t\t\"TCL 2002N 6A\"},\n\t{ TUNER_PHILIPS_FM1236_MK3,\t\"Philips FQ1236 MK3\"},\n\t{ TUNER_SAMSUNG_TCPN_2121P30A,\t\"Samsung TCPN 2121P30A\"},\n\t{ TUNER_ABSENT,\t\t\t\"Samsung TCPE 4121P30A\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"TCL MFPE05 2\"},\n\t \n\t{ TUNER_ABSENT,\t\t\t\"LG TALN H202T\"},\n\t{ TUNER_PHILIPS_FQ1216AME_MK4,\t\"Philips FQ1216AME MK4\"},\n\t{ TUNER_PHILIPS_FQ1236A_MK4,\t\"Philips FQ1236A MK4\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FQ1286A MK4\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FQ1216ME MK5\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FQ1236 MK5\"},\n\t{ TUNER_SAMSUNG_TCPG_6121P30A,\t\"Samsung TCPG 6121P30A\"},\n\t{ TUNER_TCL_2002MB,\t\t\"TCL 2002MB_3H\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL 2002MI_3H\"},\n\t{ TUNER_TCL_2002N,\t\t\"TCL 2002N 5H\"},\n\t \n\t{ TUNER_PHILIPS_FMD1216ME_MK3,\t\"Philips FMD1216ME\"},\n\t{ TUNER_TEA5767,\t\t\"Philips TEA5768HL FM Radio\"},\n\t{ TUNER_ABSENT,\t\t\t\"Panasonic ENV57H12D5\"},\n\t{ TUNER_PHILIPS_FM1236_MK3,\t\"TCL MFNM05-4\"},\n\t{ TUNER_PHILIPS_FM1236_MK3,\t\"TCL MNM05-4\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"TCL MPE05-2\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MQNM05-4\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TAPC-W701D\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL 9886P-WM\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL 1676NM-WM\"},\n\t \n\t{ TUNER_ABSENT,\t\t\t\"Thompson DTT75105\"},\n\t{ TUNER_ABSENT,\t\t\t\"Conexant_CX24109\"},\n\t{ TUNER_TCL_2002N,\t\t\"TCL M2523_5N_E\"},\n\t{ TUNER_TCL_2002MB,\t\t\"TCL M2523_3DB_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips 8275A\"},\n\t{ TUNER_ABSENT,\t\t\t\"Microtune MT2060\"},\n\t{ TUNER_PHILIPS_FM1236_MK3,\t\"Philips FM1236 MK5\"},\n\t{ TUNER_PHILIPS_FM1216ME_MK3,\t\"Philips FM1216ME MK5\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL M2523_3DI_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"Samsung THPD5222FG30A\"},\n\t \n\t{ TUNER_XC2028,\t\t\t\"Xceive XC3028\"},\n\t{ TUNER_PHILIPS_FQ1216LME_MK3,\t\"Philips FQ1216LME MK5\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FQD1216LME\"},\n\t{ TUNER_ABSENT,\t\t\t\"Conexant CX24118A\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL DMF11WIP\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MFNM05_4H_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MNM05_4H_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MPE05_2H_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MQNM05_4_U\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL M2523_5NH_E\"},\n\t \n\t{ TUNER_ABSENT,\t\t\t\"TCL M2523_3DBH_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL M2523_3DIH_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MFPE05_2_U\"},\n\t{ TUNER_PHILIPS_FMD1216MEX_MK3,\t\"Philips FMD1216MEX\"},\n\t{ TUNER_ABSENT,\t\t\t\"Philips FRH2036B\"},\n\t{ TUNER_ABSENT,\t\t\t\"Panasonic ENGF75_01GF\"},\n\t{ TUNER_ABSENT,\t\t\t\"MaxLinear MXL5005\"},\n\t{ TUNER_ABSENT,\t\t\t\"MaxLinear MXL5003\"},\n\t{ TUNER_ABSENT,\t\t\t\"Xceive XC2028\"},\n\t{ TUNER_ABSENT,\t\t\t\"Microtune MT2131\"},\n\t \n\t{ TUNER_ABSENT,\t\t\t\"Philips 8275A_8295\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MF02GIP_5N_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MF02GIP_3DB_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MF02GIP_3DI_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"Microtune MT2266\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL MF10WPP_4N_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"LG TAPQ_H702F\"},\n\t{ TUNER_ABSENT,\t\t\t\"TCL M09WPP_4N_E\"},\n\t{ TUNER_ABSENT,\t\t\t\"MaxLinear MXL5005_v2\"},\n\t{ TUNER_PHILIPS_TDA8290,\t\"Philips 18271_8295\"},\n\t \n\t{ TUNER_XC5000,                 \"Xceive XC5000\"},\n\t{ TUNER_ABSENT,                 \"Xceive XC3028L\"},\n\t{ TUNER_ABSENT,                 \"NXP 18271C2_716x\"},\n\t{ TUNER_ABSENT,                 \"Xceive XC4000\"},\n\t{ TUNER_ABSENT,                 \"Dibcom 7070\"},\n\t{ TUNER_PHILIPS_TDA8290,        \"NXP 18271C2\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1010\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1150\"},\n\t{ TUNER_ABSENT,                 \"MaxLinear 5007\"},\n\t{ TUNER_ABSENT,                 \"TCL M09WPP_2P_E\"},\n\t \n\t{ TUNER_ABSENT,                 \"Siano SMS1180\"},\n\t{ TUNER_ABSENT,                 \"Maxim_MAX2165\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1140\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1150 B1\"},\n\t{ TUNER_ABSENT,                 \"MaxLinear 111\"},\n\t{ TUNER_ABSENT,                 \"Dibcom 7770\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1180VNS\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1184\"},\n\t{ TUNER_PHILIPS_FQ1236_MK5,\t\"TCL M30WTP-4N-E\"},\n\t{ TUNER_ABSENT,                 \"TCL_M11WPP_2PN_E\"},\n\t \n\t{ TUNER_ABSENT,                 \"MaxLinear 301\"},\n\t{ TUNER_ABSENT,                 \"Mirics MSi001\"},\n\t{ TUNER_ABSENT,                 \"MaxLinear MxL241SF\"},\n\t{ TUNER_XC5000C,                \"Xceive XC5000C\"},\n\t{ TUNER_ABSENT,                 \"Montage M68TS2020\"},\n\t{ TUNER_ABSENT,                 \"Siano SMS1530\"},\n\t{ TUNER_ABSENT,                 \"Dibcom 7090\"},\n\t{ TUNER_ABSENT,                 \"Xceive XC5200C\"},\n\t{ TUNER_ABSENT,                 \"NXP 18273\"},\n\t{ TUNER_ABSENT,                 \"Montage M88TS2022\"},\n\t \n\t{ TUNER_ABSENT,                 \"NXP 18272M\"},\n\t{ TUNER_ABSENT,                 \"NXP 18272S\"},\n\n\t{ TUNER_ABSENT,                 \"Mirics MSi003\"},\n\t{ TUNER_ABSENT,                 \"MaxLinear MxL256\"},\n\t{ TUNER_ABSENT,                 \"SiLabs Si2158\"},\n\t{ TUNER_ABSENT,                 \"SiLabs Si2178\"},\n\t{ TUNER_ABSENT,                 \"SiLabs Si2157\"},\n\t{ TUNER_ABSENT,                 \"SiLabs Si2177\"},\n\t{ TUNER_ABSENT,                 \"ITE IT9137FN\"},\n};\n\n \nstatic const struct {\n\tu32   id;\n\tconst char * const name;\n} audio_ic[] = {\n\t \n\t{ TVEEPROM_AUDPROC_NONE,  \"None\"      },\n\t{ TVEEPROM_AUDPROC_OTHER, \"TEA6300\"   },\n\t{ TVEEPROM_AUDPROC_OTHER, \"TEA6320\"   },\n\t{ TVEEPROM_AUDPROC_OTHER, \"TDA9850\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3400C\"  },\n\t \n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3410D\"  },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3415\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3430\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3438\"   },\n\t{ TVEEPROM_AUDPROC_OTHER, \"CS5331\"    },\n\t \n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3435\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3440\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3445\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3411\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3416\"   },\n\t \n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3425\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3451\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP3418\"   },\n\t{ TVEEPROM_AUDPROC_OTHER, \"Type 0x12\" },\n\t{ TVEEPROM_AUDPROC_OTHER, \"OKI7716\"   },\n\t \n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4410\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4420\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4440\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4450\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4408\"   },\n\t \n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4418\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4428\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4448\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"MSP4458\"   },\n\t{ TVEEPROM_AUDPROC_MSP,   \"Type 0x1d\" },\n\t \n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX880\"     },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX881\"     },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX883\"     },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX882\"     },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX25840\"   },\n\t \n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX25841\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX25842\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX25843\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX23418\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX23885\"   },\n\t \n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX23888\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"SAA7131\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX23887\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"SAA7164\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"AU8522\"    },\n\t \n\t{ TVEEPROM_AUDPROC_INTERNAL, \"AVF4910B\"  },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"SAA7231\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"CX23102\"   },\n\t{ TVEEPROM_AUDPROC_INTERNAL, \"SAA7163\"   },\n\t{ TVEEPROM_AUDPROC_OTHER,    \"AK4113\"    },\n\t \n\t{ TVEEPROM_AUDPROC_OTHER,    \"CS5340\"    },\n\t{ TVEEPROM_AUDPROC_OTHER,    \"CS8416\"    },\n\t{ TVEEPROM_AUDPROC_OTHER,    \"CX20810\"   },\n};\n\n \nstatic const char *decoderIC[] = {\n\t \n\t\"None\", \"BT815\", \"BT817\", \"BT819\", \"BT815A\",\n\t \n\t\"BT817A\", \"BT819A\", \"BT827\", \"BT829\", \"BT848\",\n\t \n\t\"BT848A\", \"BT849A\", \"BT829A\", \"BT827A\", \"BT878\",\n\t \n\t\"BT879\", \"BT880\", \"VPX3226E\", \"SAA7114\", \"SAA7115\",\n\t \n\t\"CX880\", \"CX881\", \"CX883\", \"SAA7111\", \"SAA7113\",\n\t \n\t\"CX882\", \"TVP5150A\", \"CX25840\", \"CX25841\", \"CX25842\",\n\t \n\t\"CX25843\", \"CX23418\", \"NEC61153\", \"CX23885\", \"CX23888\",\n\t \n\t\"SAA7131\", \"CX25837\", \"CX23887\", \"CX23885A\", \"CX23887A\",\n\t \n\t\"SAA7164\", \"CX23885B\", \"AU8522\", \"ADV7401\", \"AVF4910B\",\n\t \n\t\"SAA7231\", \"CX23102\", \"SAA7163\", \"ADV7441A\", \"ADV7181C\",\n\t \n\t\"CX25836\", \"TDA9955\", \"TDA19977\", \"ADV7842\"\n};\n\nstatic int hasRadioTuner(int tunerType)\n{\n\tswitch (tunerType) {\n\tcase 18:  \n\tcase 23:  \n\tcase 38:  \n\tcase 16:  \n\tcase 19:  \n\tcase 21:  \n\tcase 24:  \n\tcase 17:  \n\tcase 22:  \n\tcase 20:  \n\tcase 25:  \n\tcase 33:  \n\tcase 42:  \n\tcase 52:  \n\tcase 54:  \n\tcase 44:  \n\tcase 31:  \n\tcase 30:  \n\tcase 46:  \n\tcase 47:  \n\tcase 49:  \n\tcase 60:  \n\tcase 57:  \n\tcase 59:  \n\tcase 58:  \n\tcase 68:  \n\tcase 61:  \n\tcase 78:  \n\tcase 89:  \n\tcase 92:  \n\tcase 105:\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\nvoid tveeprom_hauppauge_analog(struct tveeprom *tvee,\n\t\t\t       unsigned char *eeprom_data)\n{\n\t \n\n\tint i, j, len, done, beenhere, tag, start;\n\n\tint tuner1 = 0, t_format1 = 0, audioic = -1;\n\tconst char *t_name1 = NULL;\n\tconst char *t_fmt_name1[8] = { \" none\", \"\", \"\", \"\", \"\", \"\", \"\", \"\" };\n\n\tint tuner2 = 0, t_format2 = 0;\n\tconst char *t_name2 = NULL;\n\tconst char *t_fmt_name2[8] = { \" none\", \"\", \"\", \"\", \"\", \"\", \"\", \"\" };\n\n\tmemset(tvee, 0, sizeof(*tvee));\n\ttvee->tuner_type = TUNER_ABSENT;\n\ttvee->tuner2_type = TUNER_ABSENT;\n\n\tdone = len = beenhere = 0;\n\n\t \n\tif (eeprom_data[0] == 0x1a &&\n\t    eeprom_data[1] == 0xeb &&\n\t    eeprom_data[2] == 0x67 &&\n\t    eeprom_data[3] == 0x95)\n\t\tstart = 0xa0;  \n\telse if ((eeprom_data[0] & 0xe1) == 0x01 &&\n\t\t eeprom_data[1] == 0x00 &&\n\t\t eeprom_data[2] == 0x00 &&\n\t\t eeprom_data[8] == 0x84)\n\t\tstart = 8;  \n\telse if (eeprom_data[1] == 0x70 &&\n\t\t eeprom_data[2] == 0x00 &&\n\t\t eeprom_data[4] == 0x74 &&\n\t\t eeprom_data[8] == 0x84)\n\t\tstart = 8;  \n\telse\n\t\tstart = 0;\n\n\tfor (i = start; !done && i < 256; i += len) {\n\t\tif (eeprom_data[i] == 0x84) {\n\t\t\tlen = eeprom_data[i + 1] + (eeprom_data[i + 2] << 8);\n\t\t\ti += 3;\n\t\t} else if ((eeprom_data[i] & 0xf0) == 0x70) {\n\t\t\tif (eeprom_data[i] & 0x08) {\n\t\t\t\t \n\t\t\t\tdone = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlen = eeprom_data[i] & 0x07;\n\t\t\t++i;\n\t\t} else {\n\t\t\tpr_warn(\"Encountered bad packet header [%02x]. Corrupt or not a Hauppauge eeprom.\\n\",\n\t\t\t\teeprom_data[i]);\n\t\t\treturn;\n\t\t}\n\n\t\tpr_debug(\"Tag [%02x] + %d bytes: %*ph\\n\",\n\t\t\teeprom_data[i], len - 1, len, &eeprom_data[i]);\n\n\t\t \n\t\ttag = eeprom_data[i];\n\t\tswitch (tag) {\n\t\tcase 0x00:\n\t\t\t \n\t\t\ttuner1 = eeprom_data[i+6];\n\t\t\tt_format1 = eeprom_data[i+5];\n\t\t\ttvee->has_radio = eeprom_data[i+len-1];\n\t\t\t \n\t\t\ttvee->has_ir = 0;\n\t\t\ttvee->model =\n\t\t\t\teeprom_data[i+8] +\n\t\t\t\t(eeprom_data[i+9] << 8);\n\t\t\ttvee->revision = eeprom_data[i+10] +\n\t\t\t\t(eeprom_data[i+11] << 8) +\n\t\t\t\t(eeprom_data[i+12] << 16);\n\t\t\tbreak;\n\n\t\tcase 0x01:\n\t\t\t \n\t\t\ttvee->serial_number =\n\t\t\t\teeprom_data[i+6] +\n\t\t\t\t(eeprom_data[i+7] << 8) +\n\t\t\t\t(eeprom_data[i+8] << 16);\n\t\t\tbreak;\n\n\t\tcase 0x02:\n\t\t\t \n\t\t\taudioic = eeprom_data[i+2] & 0x7f;\n\t\t\tif (audioic < ARRAY_SIZE(audio_ic))\n\t\t\t\ttvee->audio_processor = audio_ic[audioic].id;\n\t\t\telse\n\t\t\t\ttvee->audio_processor = TVEEPROM_AUDPROC_OTHER;\n\t\t\tbreak;\n\n\t\t \n\n\t\tcase 0x04:\n\t\t\t \n\t\t\ttvee->serial_number =\n\t\t\t\teeprom_data[i+5] +\n\t\t\t\t(eeprom_data[i+6] << 8) +\n\t\t\t\t(eeprom_data[i+7] << 16)+\n\t\t\t\t(eeprom_data[i+8] << 24);\n\n\t\t\tif (eeprom_data[i + 8] == 0xf0) {\n\t\t\t\ttvee->MAC_address[0] = 0x00;\n\t\t\t\ttvee->MAC_address[1] = 0x0D;\n\t\t\t\ttvee->MAC_address[2] = 0xFE;\n\t\t\t\ttvee->MAC_address[3] = eeprom_data[i + 7];\n\t\t\t\ttvee->MAC_address[4] = eeprom_data[i + 6];\n\t\t\t\ttvee->MAC_address[5] = eeprom_data[i + 5];\n\t\t\t\ttvee->has_MAC_address = 1;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 0x05:\n\t\t\t \n\t\t\taudioic = eeprom_data[i+1] & 0x7f;\n\t\t\tif (audioic < ARRAY_SIZE(audio_ic))\n\t\t\t\ttvee->audio_processor = audio_ic[audioic].id;\n\t\t\telse\n\t\t\t\ttvee->audio_processor = TVEEPROM_AUDPROC_OTHER;\n\n\t\t\tbreak;\n\n\t\tcase 0x06:\n\t\t\t \n\t\t\ttvee->model =\n\t\t\t\teeprom_data[i + 1] +\n\t\t\t\t(eeprom_data[i + 2] << 8) +\n\t\t\t\t(eeprom_data[i + 3] << 16) +\n\t\t\t\t(eeprom_data[i + 4] << 24);\n\t\t\ttvee->revision =\n\t\t\t\teeprom_data[i + 5] +\n\t\t\t\t(eeprom_data[i + 6] << 8) +\n\t\t\t\t(eeprom_data[i + 7] << 16);\n\t\t\tbreak;\n\n\t\tcase 0x07:\n\t\t\t \n\t\t\tbreak;\n\n\t\t \n\n\t\tcase 0x09:\n\t\t\t \n\t\t\ttvee->decoder_processor = eeprom_data[i + 1];\n\t\t\tbreak;\n\n\t\tcase 0x0a:\n\t\t\t \n\t\t\tif (beenhere == 0) {\n\t\t\t\ttuner1 = eeprom_data[i + 2];\n\t\t\t\tt_format1 = eeprom_data[i + 1];\n\t\t\t\tbeenhere = 1;\n\t\t\t} else {\n\t\t\t\t \n\t\t\t\ttuner2 = eeprom_data[i + 2];\n\t\t\t\tt_format2 = eeprom_data[i + 1];\n\t\t\t\t \n\t\t\t\tif (t_format2 == 0)\n\t\t\t\t\ttvee->has_radio = 1;  \n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 0x0b:\n\t\t\t \n\t\t\tbreak;\n\n\t\t \n\t\t \n\n\t\tcase 0x0e:\n\t\t\t \n\t\t\ttvee->has_radio = eeprom_data[i+1];\n\t\t\tbreak;\n\n\t\tcase 0x0f:\n\t\t\t \n\t\t\ttvee->has_ir = 1 | (eeprom_data[i+1] << 1);\n\t\t\tbreak;\n\n\t\t \n\t\t \n\t\t \n\n\t\tdefault:\n\t\t\tpr_debug(\"Not sure what to do with tag [%02x]\\n\",\n\t\t\t\t\ttag);\n\t\t\t \n\t\t}\n\t}\n\n\tif (!done) {\n\t\tpr_warn(\"Ran out of data!\\n\");\n\t\treturn;\n\t}\n\n\tif (tvee->revision != 0) {\n\t\ttvee->rev_str[0] = 32 + ((tvee->revision >> 18) & 0x3f);\n\t\ttvee->rev_str[1] = 32 + ((tvee->revision >> 12) & 0x3f);\n\t\ttvee->rev_str[2] = 32 + ((tvee->revision >>  6) & 0x3f);\n\t\ttvee->rev_str[3] = 32 + (tvee->revision & 0x3f);\n\t\ttvee->rev_str[4] = 0;\n\t}\n\n\tif (hasRadioTuner(tuner1) && !tvee->has_radio) {\n\t\tpr_info(\"The eeprom says no radio is present, but the tuner type\\n\");\n\t\tpr_info(\"indicates otherwise. I will assume that radio is present.\\n\");\n\t\ttvee->has_radio = 1;\n\t}\n\n\tif (tuner1 < ARRAY_SIZE(hauppauge_tuner)) {\n\t\ttvee->tuner_type = hauppauge_tuner[tuner1].id;\n\t\tt_name1 = hauppauge_tuner[tuner1].name;\n\t} else {\n\t\tt_name1 = \"unknown\";\n\t}\n\n\tif (tuner2 < ARRAY_SIZE(hauppauge_tuner)) {\n\t\ttvee->tuner2_type = hauppauge_tuner[tuner2].id;\n\t\tt_name2 = hauppauge_tuner[tuner2].name;\n\t} else {\n\t\tt_name2 = \"unknown\";\n\t}\n\n\ttvee->tuner_hauppauge_model = tuner1;\n\ttvee->tuner2_hauppauge_model = tuner2;\n\ttvee->tuner_formats = 0;\n\ttvee->tuner2_formats = 0;\n\tfor (i = j = 0; i < 8; i++) {\n\t\tif (t_format1 & (1 << i)) {\n\t\t\ttvee->tuner_formats |= hauppauge_tuner_fmt[i].id;\n\t\t\tt_fmt_name1[j++] = hauppauge_tuner_fmt[i].name;\n\t\t}\n\t}\n\tfor (i = j = 0; i < 8; i++) {\n\t\tif (t_format2 & (1 << i)) {\n\t\t\ttvee->tuner2_formats |= hauppauge_tuner_fmt[i].id;\n\t\t\tt_fmt_name2[j++] = hauppauge_tuner_fmt[i].name;\n\t\t}\n\t}\n\n\tpr_info(\"Hauppauge model %d, rev %s, serial# %u\\n\",\n\t\ttvee->model, tvee->rev_str, tvee->serial_number);\n\tif (tvee->has_MAC_address == 1)\n\t\tpr_info(\"MAC address is %pM\\n\", tvee->MAC_address);\n\tpr_info(\"tuner model is %s (idx %d, type %d)\\n\",\n\t\tt_name1, tuner1, tvee->tuner_type);\n\tpr_info(\"TV standards%s%s%s%s%s%s%s%s (eeprom 0x%02x)\\n\",\n\t\tt_fmt_name1[0], t_fmt_name1[1], t_fmt_name1[2],\n\t\tt_fmt_name1[3],\tt_fmt_name1[4], t_fmt_name1[5],\n\t\tt_fmt_name1[6], t_fmt_name1[7],\tt_format1);\n\tif (tuner2)\n\t\tpr_info(\"second tuner model is %s (idx %d, type %d)\\n\",\n\t\t\t\t\tt_name2, tuner2, tvee->tuner2_type);\n\tif (t_format2)\n\t\tpr_info(\"TV standards%s%s%s%s%s%s%s%s (eeprom 0x%02x)\\n\",\n\t\t\tt_fmt_name2[0], t_fmt_name2[1], t_fmt_name2[2],\n\t\t\tt_fmt_name2[3],\tt_fmt_name2[4], t_fmt_name2[5],\n\t\t\tt_fmt_name2[6], t_fmt_name2[7], t_format2);\n\tif (audioic < 0) {\n\t\tpr_info(\"audio processor is unknown (no idx)\\n\");\n\t\ttvee->audio_processor = TVEEPROM_AUDPROC_OTHER;\n\t} else {\n\t\tif (audioic < ARRAY_SIZE(audio_ic))\n\t\t\tpr_info(\"audio processor is %s (idx %d)\\n\",\n\t\t\t\t\taudio_ic[audioic].name, audioic);\n\t\telse\n\t\t\tpr_info(\"audio processor is unknown (idx %d)\\n\",\n\t\t\t\t\t\t\t\taudioic);\n\t}\n\tif (tvee->decoder_processor)\n\t\tpr_info(\"decoder processor is %s (idx %d)\\n\",\n\t\t\tSTRM(decoderIC, tvee->decoder_processor),\n\t\t\ttvee->decoder_processor);\n\tif (tvee->has_ir)\n\t\tpr_info(\"has %sradio, has %sIR receiver, has %sIR transmitter\\n\",\n\t\t\t\ttvee->has_radio ? \"\" : \"no \",\n\t\t\t\t(tvee->has_ir & 2) ? \"\" : \"no \",\n\t\t\t\t(tvee->has_ir & 4) ? \"\" : \"no \");\n\telse\n\t\tpr_info(\"has %sradio\\n\",\n\t\t\t\ttvee->has_radio ? \"\" : \"no \");\n}\nEXPORT_SYMBOL(tveeprom_hauppauge_analog);\n\n \n \n\nint tveeprom_read(struct i2c_client *c, unsigned char *eedata, int len)\n{\n\tunsigned char buf;\n\tint err;\n\n\tbuf = 0;\n\terr = i2c_master_send(c, &buf, 1);\n\tif (err != 1) {\n\t\tpr_info(\"Huh, no eeprom present (err=%d)?\\n\", err);\n\t\treturn -1;\n\t}\n\terr = i2c_master_recv(c, eedata, len);\n\tif (err != len) {\n\t\tpr_warn(\"i2c eeprom read error (err=%d)\\n\", err);\n\t\treturn -1;\n\t}\n\n\tprint_hex_dump_debug(\"full 256-byte eeprom dump:\", DUMP_PREFIX_NONE,\n\t\t\t     16, 1, eedata, len, true);\n\treturn 0;\n}\nEXPORT_SYMBOL(tveeprom_read);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}