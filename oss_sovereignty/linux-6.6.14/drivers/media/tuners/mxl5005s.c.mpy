{
  "module_name": "mxl5005s.c",
  "hash_id": "461d9ac206a6362d378102f23378e49fdb2031d59a23053ddd406b7a67661096",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/tuners/mxl5005s.c",
  "human_readable_source": " \n\n \n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/string.h>\n#include <linux/slab.h>\n#include <linux/delay.h>\n#include <media/dvb_frontend.h>\n#include \"mxl5005s.h\"\n\nstatic int debug;\n\n#define dprintk(level, arg...) do {    \\\n\tif (level <= debug)            \\\n\t\tprintk(arg);    \\\n\t} while (0)\n\n#define TUNER_REGS_NUM          104\n#define INITCTRL_NUM            40\n\n#ifdef _MXL_PRODUCTION\n#define CHCTRL_NUM              39\n#else\n#define CHCTRL_NUM              36\n#endif\n\n#define MXLCTRL_NUM             189\n#define MASTER_CONTROL_ADDR     9\n\n \nenum master_control_state {\n\tMC_LOAD_START = 1,\n\tMC_POWER_DOWN,\n\tMC_SYNTH_RESET,\n\tMC_SEQ_OFF\n};\n\n \nenum {\n\tMXL_DEFAULT_MODULATION = 0,\n\tMXL_DVBT,\n\tMXL_ATSC,\n\tMXL_QAM,\n\tMXL_ANALOG_CABLE,\n\tMXL_ANALOG_OTA\n};\n\n \nstruct TunerReg {\n\tu16 Reg_Num;\t \n\tu16 Reg_Val;\t \n};\n\nenum {\n\t \n\tDN_IQTN_AMP_CUT = 1,        \n\tBB_MODE,                    \n\tBB_BUF,                     \n\tBB_BUF_OA,                  \n\tBB_ALPF_BANDSELECT,         \n\tBB_IQSWAP,                  \n\tBB_DLPF_BANDSEL,            \n\tRFSYN_CHP_GAIN,             \n\tRFSYN_EN_CHP_HIGAIN,        \n\tAGC_IF,                     \n\tAGC_RF,                     \n\tIF_DIVVAL,                  \n\tIF_VCO_BIAS,                \n\tCHCAL_INT_MOD_IF,           \n\tCHCAL_FRAC_MOD_IF,          \n\tDRV_RES_SEL,                \n\tI_DRIVER,                   \n\tEN_AAF,                     \n\tEN_3P,                      \n\tEN_AUX_3P,                  \n\tSEL_AAF_BAND,               \n\tSEQ_ENCLK16_CLK_OUT,        \n\tSEQ_SEL4_16B,               \n\tXTAL_CAPSELECT,             \n\tIF_SEL_DBL,                 \n\tRFSYN_R_DIV,                \n\tSEQ_EXTSYNTHCALIF,          \n\tSEQ_EXTDCCAL,               \n\tAGC_EN_RSSI,                \n\tRFA_ENCLKRFAGC,             \n\tRFA_RSSI_REFH,              \n\tRFA_RSSI_REF,               \n\tRFA_RSSI_REFL,              \n\tRFA_FLR,                    \n\tRFA_CEIL,                   \n\tSEQ_EXTIQFSMPULSE,          \n\tOVERRIDE_1,                 \n\tBB_INITSTATE_DLPF_TUNE,     \n\tTG_R_DIV,                   \n\tEN_CHP_LIN_B,               \n\n\t \n\tDN_POLY = 51,               \n\tDN_RFGAIN,                  \n\tDN_CAP_RFLPF,               \n\tDN_EN_VHFUHFBAR,            \n\tDN_GAIN_ADJUST,             \n\tDN_IQTNBUF_AMP,             \n\tDN_IQTNGNBFBIAS_BST,        \n\tRFSYN_EN_OUTMUX,            \n\tRFSYN_SEL_VCO_OUT,          \n\tRFSYN_SEL_VCO_HI,           \n\tRFSYN_SEL_DIVM,             \n\tRFSYN_RF_DIV_BIAS,          \n\tDN_SEL_FREQ,                \n\tRFSYN_VCO_BIAS,             \n\tCHCAL_INT_MOD_RF,           \n\tCHCAL_FRAC_MOD_RF,          \n\tRFSYN_LPF_R,                \n\tCHCAL_EN_INT_RF,            \n\tTG_LO_DIVVAL,               \n\tTG_LO_SELVAL,               \n\tTG_DIV_VAL,                 \n\tTG_VCO_BIAS,                \n\tSEQ_EXTPOWERUP,             \n\tOVERRIDE_2,                 \n\tOVERRIDE_3,                 \n\tOVERRIDE_4,                 \n\tSEQ_FSM_PULSE,              \n\tGPIO_4B,                    \n\tGPIO_3B,                    \n\tGPIO_4,                     \n\tGPIO_3,                     \n\tGPIO_1B,                    \n\tDAC_A_ENABLE,               \n\tDAC_B_ENABLE,               \n\tDAC_DIN_A,                  \n\tDAC_DIN_B,                  \n#ifdef _MXL_PRODUCTION\n\tRFSYN_EN_DIV,               \n\tRFSYN_DIVM,                 \n\tDN_BYPASS_AGC_I2C           \n#endif\n};\n\n \n\n \n#define MXL5005S_REG_WRITING_TABLE_LEN_MAX\t104\n#define MXL5005S_LATCH_BYTE\t\t\t0xfe\n\n \n#define MXL5005S_BB_IQSWAP_ADDR\t\t\t59\n#define MXL5005S_BB_IQSWAP_MSB\t\t\t0\n#define MXL5005S_BB_IQSWAP_LSB\t\t\t0\n\n#define MXL5005S_BB_DLPF_BANDSEL_ADDR\t\t53\n#define MXL5005S_BB_DLPF_BANDSEL_MSB\t\t4\n#define MXL5005S_BB_DLPF_BANDSEL_LSB\t\t3\n\n \nenum {\n\tMXL5005S_STANDARD_DVBT,\n\tMXL5005S_STANDARD_ATSC,\n};\n#define MXL5005S_STANDARD_MODE_NUM\t\t2\n\n \nenum {\n\tMXL5005S_BANDWIDTH_6MHZ = 6000000,\n\tMXL5005S_BANDWIDTH_7MHZ = 7000000,\n\tMXL5005S_BANDWIDTH_8MHZ = 8000000,\n};\n#define MXL5005S_BANDWIDTH_MODE_NUM\t\t3\n\n \nstruct TunerControl {\n\tu16 Ctrl_Num;\t \n\tu16 size;\t \n\tu16 addr[25];\t \n\tu16 bit[25];\t \n\tu16 val[25];\t \n};\n\n \nstruct mxl5005s_state {\n\tu8\tMode;\t\t \n\tu8\tIF_Mode;\t \n\tu32\tChan_Bandwidth;\t \n\tu32\tIF_OUT;\t\t \n\tu16\tIF_OUT_LOAD;\t \n\tu32\tRF_IN;\t\t \n\tu32\tFxtal;\t\t \n\tu8\tAGC_Mode;\t \n\tu16\tTOP;\t\t \n\tu8\tCLOCK_OUT;\t \n\tu8\tDIV_OUT;\t \n\tu8\tCAPSELECT;\t \n\tu8\tEN_RSSI;\t \n\n\t \n\t \n\tu8\tMod_Type;\n\n\t \n\t \n\tu8\tTF_Type;\n\n\t \n\tu32\tRF_LO;\t\t \n\tu32\tIF_LO;\t\t \n\tu32\tTG_LO;\t\t \n\n\t \n\tu16\tInit_Ctrl_Num;\t\t \n\tstruct TunerControl\n\t\tInit_Ctrl[INITCTRL_NUM];  \n\n\tu16\tCH_Ctrl_Num;\t\t \n\tstruct TunerControl\n\t\tCH_Ctrl[CHCTRL_NUM];\t \n\n\tu16\tMXL_Ctrl_Num;\t\t \n\tstruct TunerControl\n\t\tMXL_Ctrl[MXLCTRL_NUM];\t \n\n\t \n\tu16\tTunerRegs_Num;\t\t \n\tstruct TunerReg\n\t\tTunerRegs[TUNER_REGS_NUM];  \n\n\t \n\tstruct mxl5005s_config *config;\n\tstruct dvb_frontend *frontend;\n\tstruct i2c_adapter *i2c;\n\n\t \n\tu32 current_mode;\n\n};\n\nstatic u16 MXL_GetMasterControl(u8 *MasterReg, int state);\nstatic u16 MXL_ControlWrite(struct dvb_frontend *fe, u16 ControlNum, u32 value);\nstatic u16 MXL_ControlRead(struct dvb_frontend *fe, u16 controlNum, u32 *value);\nstatic void MXL_RegWriteBit(struct dvb_frontend *fe, u8 address, u8 bit,\n\tu8 bitVal);\nstatic u16 MXL_GetCHRegister(struct dvb_frontend *fe, u8 *RegNum,\n\tu8 *RegVal, int *count);\nstatic u32 MXL_Ceiling(u32 value, u32 resolution);\nstatic u16 MXL_RegRead(struct dvb_frontend *fe, u8 RegNum, u8 *RegVal);\nstatic u16 MXL_ControlWrite_Group(struct dvb_frontend *fe, u16 controlNum,\n\tu32 value, u16 controlGroup);\nstatic u16 MXL_SetGPIO(struct dvb_frontend *fe, u8 GPIO_Num, u8 GPIO_Val);\nstatic u16 MXL_GetInitRegister(struct dvb_frontend *fe, u8 *RegNum,\n\tu8 *RegVal, int *count);\nstatic u16 MXL_TuneRF(struct dvb_frontend *fe, u32 RF_Freq);\nstatic void MXL_SynthIFLO_Calc(struct dvb_frontend *fe);\nstatic void MXL_SynthRFTGLO_Calc(struct dvb_frontend *fe);\nstatic u16 MXL_GetCHRegister_ZeroIF(struct dvb_frontend *fe, u8 *RegNum,\n\tu8 *RegVal, int *count);\nstatic int mxl5005s_writeregs(struct dvb_frontend *fe, u8 *addrtable,\n\tu8 *datatable, u8 len);\nstatic u16 MXL_IFSynthInit(struct dvb_frontend *fe);\nstatic int mxl5005s_AssignTunerMode(struct dvb_frontend *fe, u32 mod_type,\n\tu32 bandwidth);\nstatic int mxl5005s_reconfigure(struct dvb_frontend *fe, u32 mod_type,\n\tu32 bandwidth);\n\n \n\nstatic int mxl5005s_SetRfFreqHz(struct dvb_frontend *fe, unsigned long RfFreqHz)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tunsigned char AddrTable[MXL5005S_REG_WRITING_TABLE_LEN_MAX];\n\tunsigned char ByteTable[MXL5005S_REG_WRITING_TABLE_LEN_MAX];\n\tint TableLen;\n\n\tu32 IfDivval = 0;\n\tunsigned char MasterControlByte;\n\n\tdprintk(1, \"%s() freq=%ld\\n\", __func__, RfFreqHz);\n\n\t \n\n\t \n\tMXL_GetMasterControl(ByteTable, MC_SYNTH_RESET);\n\tAddrTable[0] = MASTER_CONTROL_ADDR;\n\tByteTable[0] |= state->config->AgcMasterByte;\n\n\tmxl5005s_writeregs(fe, AddrTable, ByteTable, 1);\n\n\t \n\tMXL_TuneRF(fe, RfFreqHz);\n\n\tMXL_ControlRead(fe, IF_DIVVAL, &IfDivval);\n\n\tMXL_ControlWrite(fe, SEQ_FSM_PULSE, 0);\n\tMXL_ControlWrite(fe, SEQ_EXTPOWERUP, 1);\n\tMXL_ControlWrite(fe, IF_DIVVAL, 8);\n\tMXL_GetCHRegister(fe, AddrTable, ByteTable, &TableLen);\n\n\tMXL_GetMasterControl(&MasterControlByte, MC_LOAD_START);\n\tAddrTable[TableLen] = MASTER_CONTROL_ADDR ;\n\tByteTable[TableLen] = MasterControlByte |\n\t\tstate->config->AgcMasterByte;\n\tTableLen += 1;\n\n\tmxl5005s_writeregs(fe, AddrTable, ByteTable, TableLen);\n\n\t \n\tmsleep(150);\n\n\t \n\tMXL_ControlWrite(fe, SEQ_FSM_PULSE, 1);\n\tMXL_ControlWrite(fe, IF_DIVVAL, IfDivval);\n\tMXL_GetCHRegister_ZeroIF(fe, AddrTable, ByteTable, &TableLen);\n\n\tMXL_GetMasterControl(&MasterControlByte, MC_LOAD_START);\n\tAddrTable[TableLen] = MASTER_CONTROL_ADDR ;\n\tByteTable[TableLen] = MasterControlByte |\n\t\tstate->config->AgcMasterByte ;\n\tTableLen += 1;\n\n\tmxl5005s_writeregs(fe, AddrTable, ByteTable, TableLen);\n\n\tmsleep(100);\n\n\treturn 0;\n}\n \n\n \nstatic u16 MXL5005_RegisterInit(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tstate->TunerRegs_Num = TUNER_REGS_NUM ;\n\n\tstate->TunerRegs[0].Reg_Num = 9 ;\n\tstate->TunerRegs[0].Reg_Val = 0x40 ;\n\n\tstate->TunerRegs[1].Reg_Num = 11 ;\n\tstate->TunerRegs[1].Reg_Val = 0x19 ;\n\n\tstate->TunerRegs[2].Reg_Num = 12 ;\n\tstate->TunerRegs[2].Reg_Val = 0x60 ;\n\n\tstate->TunerRegs[3].Reg_Num = 13 ;\n\tstate->TunerRegs[3].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[4].Reg_Num = 14 ;\n\tstate->TunerRegs[4].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[5].Reg_Num = 15 ;\n\tstate->TunerRegs[5].Reg_Val = 0xC0 ;\n\n\tstate->TunerRegs[6].Reg_Num = 16 ;\n\tstate->TunerRegs[6].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[7].Reg_Num = 17 ;\n\tstate->TunerRegs[7].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[8].Reg_Num = 18 ;\n\tstate->TunerRegs[8].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[9].Reg_Num = 19 ;\n\tstate->TunerRegs[9].Reg_Val = 0x34 ;\n\n\tstate->TunerRegs[10].Reg_Num = 21 ;\n\tstate->TunerRegs[10].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[11].Reg_Num = 22 ;\n\tstate->TunerRegs[11].Reg_Val = 0x6B ;\n\n\tstate->TunerRegs[12].Reg_Num = 23 ;\n\tstate->TunerRegs[12].Reg_Val = 0x35 ;\n\n\tstate->TunerRegs[13].Reg_Num = 24 ;\n\tstate->TunerRegs[13].Reg_Val = 0x70 ;\n\n\tstate->TunerRegs[14].Reg_Num = 25 ;\n\tstate->TunerRegs[14].Reg_Val = 0x3E ;\n\n\tstate->TunerRegs[15].Reg_Num = 26 ;\n\tstate->TunerRegs[15].Reg_Val = 0x82 ;\n\n\tstate->TunerRegs[16].Reg_Num = 31 ;\n\tstate->TunerRegs[16].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[17].Reg_Num = 32 ;\n\tstate->TunerRegs[17].Reg_Val = 0x40 ;\n\n\tstate->TunerRegs[18].Reg_Num = 33 ;\n\tstate->TunerRegs[18].Reg_Val = 0x53 ;\n\n\tstate->TunerRegs[19].Reg_Num = 34 ;\n\tstate->TunerRegs[19].Reg_Val = 0x81 ;\n\n\tstate->TunerRegs[20].Reg_Num = 35 ;\n\tstate->TunerRegs[20].Reg_Val = 0xC9 ;\n\n\tstate->TunerRegs[21].Reg_Num = 36 ;\n\tstate->TunerRegs[21].Reg_Val = 0x01 ;\n\n\tstate->TunerRegs[22].Reg_Num = 37 ;\n\tstate->TunerRegs[22].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[23].Reg_Num = 41 ;\n\tstate->TunerRegs[23].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[24].Reg_Num = 42 ;\n\tstate->TunerRegs[24].Reg_Val = 0xF8 ;\n\n\tstate->TunerRegs[25].Reg_Num = 43 ;\n\tstate->TunerRegs[25].Reg_Val = 0x43 ;\n\n\tstate->TunerRegs[26].Reg_Num = 44 ;\n\tstate->TunerRegs[26].Reg_Val = 0x20 ;\n\n\tstate->TunerRegs[27].Reg_Num = 45 ;\n\tstate->TunerRegs[27].Reg_Val = 0x80 ;\n\n\tstate->TunerRegs[28].Reg_Num = 46 ;\n\tstate->TunerRegs[28].Reg_Val = 0x88 ;\n\n\tstate->TunerRegs[29].Reg_Num = 47 ;\n\tstate->TunerRegs[29].Reg_Val = 0x86 ;\n\n\tstate->TunerRegs[30].Reg_Num = 48 ;\n\tstate->TunerRegs[30].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[31].Reg_Num = 49 ;\n\tstate->TunerRegs[31].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[32].Reg_Num = 53 ;\n\tstate->TunerRegs[32].Reg_Val = 0x94 ;\n\n\tstate->TunerRegs[33].Reg_Num = 54 ;\n\tstate->TunerRegs[33].Reg_Val = 0xFA ;\n\n\tstate->TunerRegs[34].Reg_Num = 55 ;\n\tstate->TunerRegs[34].Reg_Val = 0x92 ;\n\n\tstate->TunerRegs[35].Reg_Num = 56 ;\n\tstate->TunerRegs[35].Reg_Val = 0x80 ;\n\n\tstate->TunerRegs[36].Reg_Num = 57 ;\n\tstate->TunerRegs[36].Reg_Val = 0x41 ;\n\n\tstate->TunerRegs[37].Reg_Num = 58 ;\n\tstate->TunerRegs[37].Reg_Val = 0xDB ;\n\n\tstate->TunerRegs[38].Reg_Num = 59 ;\n\tstate->TunerRegs[38].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[39].Reg_Num = 60 ;\n\tstate->TunerRegs[39].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[40].Reg_Num = 61 ;\n\tstate->TunerRegs[40].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[41].Reg_Num = 62 ;\n\tstate->TunerRegs[41].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[42].Reg_Num = 65 ;\n\tstate->TunerRegs[42].Reg_Val = 0xF8 ;\n\n\tstate->TunerRegs[43].Reg_Num = 66 ;\n\tstate->TunerRegs[43].Reg_Val = 0xE4 ;\n\n\tstate->TunerRegs[44].Reg_Num = 67 ;\n\tstate->TunerRegs[44].Reg_Val = 0x90 ;\n\n\tstate->TunerRegs[45].Reg_Num = 68 ;\n\tstate->TunerRegs[45].Reg_Val = 0xC0 ;\n\n\tstate->TunerRegs[46].Reg_Num = 69 ;\n\tstate->TunerRegs[46].Reg_Val = 0x01 ;\n\n\tstate->TunerRegs[47].Reg_Num = 70 ;\n\tstate->TunerRegs[47].Reg_Val = 0x50 ;\n\n\tstate->TunerRegs[48].Reg_Num = 71 ;\n\tstate->TunerRegs[48].Reg_Val = 0x06 ;\n\n\tstate->TunerRegs[49].Reg_Num = 72 ;\n\tstate->TunerRegs[49].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[50].Reg_Num = 73 ;\n\tstate->TunerRegs[50].Reg_Val = 0x20 ;\n\n\tstate->TunerRegs[51].Reg_Num = 76 ;\n\tstate->TunerRegs[51].Reg_Val = 0xBB ;\n\n\tstate->TunerRegs[52].Reg_Num = 77 ;\n\tstate->TunerRegs[52].Reg_Val = 0x13 ;\n\n\tstate->TunerRegs[53].Reg_Num = 81 ;\n\tstate->TunerRegs[53].Reg_Val = 0x04 ;\n\n\tstate->TunerRegs[54].Reg_Num = 82 ;\n\tstate->TunerRegs[54].Reg_Val = 0x75 ;\n\n\tstate->TunerRegs[55].Reg_Num = 83 ;\n\tstate->TunerRegs[55].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[56].Reg_Num = 84 ;\n\tstate->TunerRegs[56].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[57].Reg_Num = 85 ;\n\tstate->TunerRegs[57].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[58].Reg_Num = 91 ;\n\tstate->TunerRegs[58].Reg_Val = 0x70 ;\n\n\tstate->TunerRegs[59].Reg_Num = 92 ;\n\tstate->TunerRegs[59].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[60].Reg_Num = 93 ;\n\tstate->TunerRegs[60].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[61].Reg_Num = 94 ;\n\tstate->TunerRegs[61].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[62].Reg_Num = 95 ;\n\tstate->TunerRegs[62].Reg_Val = 0x0C ;\n\n\tstate->TunerRegs[63].Reg_Num = 96 ;\n\tstate->TunerRegs[63].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[64].Reg_Num = 97 ;\n\tstate->TunerRegs[64].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[65].Reg_Num = 98 ;\n\tstate->TunerRegs[65].Reg_Val = 0xE2 ;\n\n\tstate->TunerRegs[66].Reg_Num = 99 ;\n\tstate->TunerRegs[66].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[67].Reg_Num = 100 ;\n\tstate->TunerRegs[67].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[68].Reg_Num = 101 ;\n\tstate->TunerRegs[68].Reg_Val = 0x12 ;\n\n\tstate->TunerRegs[69].Reg_Num = 102 ;\n\tstate->TunerRegs[69].Reg_Val = 0x80 ;\n\n\tstate->TunerRegs[70].Reg_Num = 103 ;\n\tstate->TunerRegs[70].Reg_Val = 0x32 ;\n\n\tstate->TunerRegs[71].Reg_Num = 104 ;\n\tstate->TunerRegs[71].Reg_Val = 0xB4 ;\n\n\tstate->TunerRegs[72].Reg_Num = 105 ;\n\tstate->TunerRegs[72].Reg_Val = 0x60 ;\n\n\tstate->TunerRegs[73].Reg_Num = 106 ;\n\tstate->TunerRegs[73].Reg_Val = 0x83 ;\n\n\tstate->TunerRegs[74].Reg_Num = 107 ;\n\tstate->TunerRegs[74].Reg_Val = 0x84 ;\n\n\tstate->TunerRegs[75].Reg_Num = 108 ;\n\tstate->TunerRegs[75].Reg_Val = 0x9C ;\n\n\tstate->TunerRegs[76].Reg_Num = 109 ;\n\tstate->TunerRegs[76].Reg_Val = 0x02 ;\n\n\tstate->TunerRegs[77].Reg_Num = 110 ;\n\tstate->TunerRegs[77].Reg_Val = 0x81 ;\n\n\tstate->TunerRegs[78].Reg_Num = 111 ;\n\tstate->TunerRegs[78].Reg_Val = 0xC0 ;\n\n\tstate->TunerRegs[79].Reg_Num = 112 ;\n\tstate->TunerRegs[79].Reg_Val = 0x10 ;\n\n\tstate->TunerRegs[80].Reg_Num = 131 ;\n\tstate->TunerRegs[80].Reg_Val = 0x8A ;\n\n\tstate->TunerRegs[81].Reg_Num = 132 ;\n\tstate->TunerRegs[81].Reg_Val = 0x10 ;\n\n\tstate->TunerRegs[82].Reg_Num = 133 ;\n\tstate->TunerRegs[82].Reg_Val = 0x24 ;\n\n\tstate->TunerRegs[83].Reg_Num = 134 ;\n\tstate->TunerRegs[83].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[84].Reg_Num = 135 ;\n\tstate->TunerRegs[84].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[85].Reg_Num = 136 ;\n\tstate->TunerRegs[85].Reg_Val = 0x7E ;\n\n\tstate->TunerRegs[86].Reg_Num = 137 ;\n\tstate->TunerRegs[86].Reg_Val = 0x40 ;\n\n\tstate->TunerRegs[87].Reg_Num = 138 ;\n\tstate->TunerRegs[87].Reg_Val = 0x38 ;\n\n\tstate->TunerRegs[88].Reg_Num = 146 ;\n\tstate->TunerRegs[88].Reg_Val = 0xF6 ;\n\n\tstate->TunerRegs[89].Reg_Num = 147 ;\n\tstate->TunerRegs[89].Reg_Val = 0x1A ;\n\n\tstate->TunerRegs[90].Reg_Num = 148 ;\n\tstate->TunerRegs[90].Reg_Val = 0x62 ;\n\n\tstate->TunerRegs[91].Reg_Num = 149 ;\n\tstate->TunerRegs[91].Reg_Val = 0x33 ;\n\n\tstate->TunerRegs[92].Reg_Num = 150 ;\n\tstate->TunerRegs[92].Reg_Val = 0x80 ;\n\n\tstate->TunerRegs[93].Reg_Num = 156 ;\n\tstate->TunerRegs[93].Reg_Val = 0x56 ;\n\n\tstate->TunerRegs[94].Reg_Num = 157 ;\n\tstate->TunerRegs[94].Reg_Val = 0x17 ;\n\n\tstate->TunerRegs[95].Reg_Num = 158 ;\n\tstate->TunerRegs[95].Reg_Val = 0xA9 ;\n\n\tstate->TunerRegs[96].Reg_Num = 159 ;\n\tstate->TunerRegs[96].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[97].Reg_Num = 160 ;\n\tstate->TunerRegs[97].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[98].Reg_Num = 161 ;\n\tstate->TunerRegs[98].Reg_Val = 0x00 ;\n\n\tstate->TunerRegs[99].Reg_Num = 162 ;\n\tstate->TunerRegs[99].Reg_Val = 0x40 ;\n\n\tstate->TunerRegs[100].Reg_Num = 166 ;\n\tstate->TunerRegs[100].Reg_Val = 0xAE ;\n\n\tstate->TunerRegs[101].Reg_Num = 167 ;\n\tstate->TunerRegs[101].Reg_Val = 0x1B ;\n\n\tstate->TunerRegs[102].Reg_Num = 168 ;\n\tstate->TunerRegs[102].Reg_Val = 0xF2 ;\n\n\tstate->TunerRegs[103].Reg_Num = 195 ;\n\tstate->TunerRegs[103].Reg_Val = 0x00 ;\n\n\treturn 0 ;\n}\n\nstatic u16 MXL5005_ControlInit(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tstate->Init_Ctrl_Num = INITCTRL_NUM;\n\n\tstate->Init_Ctrl[0].Ctrl_Num = DN_IQTN_AMP_CUT ;\n\tstate->Init_Ctrl[0].size = 1 ;\n\tstate->Init_Ctrl[0].addr[0] = 73;\n\tstate->Init_Ctrl[0].bit[0] = 7;\n\tstate->Init_Ctrl[0].val[0] = 0;\n\n\tstate->Init_Ctrl[1].Ctrl_Num = BB_MODE ;\n\tstate->Init_Ctrl[1].size = 1 ;\n\tstate->Init_Ctrl[1].addr[0] = 53;\n\tstate->Init_Ctrl[1].bit[0] = 2;\n\tstate->Init_Ctrl[1].val[0] = 1;\n\n\tstate->Init_Ctrl[2].Ctrl_Num = BB_BUF ;\n\tstate->Init_Ctrl[2].size = 2 ;\n\tstate->Init_Ctrl[2].addr[0] = 53;\n\tstate->Init_Ctrl[2].bit[0] = 1;\n\tstate->Init_Ctrl[2].val[0] = 0;\n\tstate->Init_Ctrl[2].addr[1] = 57;\n\tstate->Init_Ctrl[2].bit[1] = 0;\n\tstate->Init_Ctrl[2].val[1] = 1;\n\n\tstate->Init_Ctrl[3].Ctrl_Num = BB_BUF_OA ;\n\tstate->Init_Ctrl[3].size = 1 ;\n\tstate->Init_Ctrl[3].addr[0] = 53;\n\tstate->Init_Ctrl[3].bit[0] = 0;\n\tstate->Init_Ctrl[3].val[0] = 0;\n\n\tstate->Init_Ctrl[4].Ctrl_Num = BB_ALPF_BANDSELECT ;\n\tstate->Init_Ctrl[4].size = 3 ;\n\tstate->Init_Ctrl[4].addr[0] = 53;\n\tstate->Init_Ctrl[4].bit[0] = 5;\n\tstate->Init_Ctrl[4].val[0] = 0;\n\tstate->Init_Ctrl[4].addr[1] = 53;\n\tstate->Init_Ctrl[4].bit[1] = 6;\n\tstate->Init_Ctrl[4].val[1] = 0;\n\tstate->Init_Ctrl[4].addr[2] = 53;\n\tstate->Init_Ctrl[4].bit[2] = 7;\n\tstate->Init_Ctrl[4].val[2] = 1;\n\n\tstate->Init_Ctrl[5].Ctrl_Num = BB_IQSWAP ;\n\tstate->Init_Ctrl[5].size = 1 ;\n\tstate->Init_Ctrl[5].addr[0] = 59;\n\tstate->Init_Ctrl[5].bit[0] = 0;\n\tstate->Init_Ctrl[5].val[0] = 0;\n\n\tstate->Init_Ctrl[6].Ctrl_Num = BB_DLPF_BANDSEL ;\n\tstate->Init_Ctrl[6].size = 2 ;\n\tstate->Init_Ctrl[6].addr[0] = 53;\n\tstate->Init_Ctrl[6].bit[0] = 3;\n\tstate->Init_Ctrl[6].val[0] = 0;\n\tstate->Init_Ctrl[6].addr[1] = 53;\n\tstate->Init_Ctrl[6].bit[1] = 4;\n\tstate->Init_Ctrl[6].val[1] = 1;\n\n\tstate->Init_Ctrl[7].Ctrl_Num = RFSYN_CHP_GAIN ;\n\tstate->Init_Ctrl[7].size = 4 ;\n\tstate->Init_Ctrl[7].addr[0] = 22;\n\tstate->Init_Ctrl[7].bit[0] = 4;\n\tstate->Init_Ctrl[7].val[0] = 0;\n\tstate->Init_Ctrl[7].addr[1] = 22;\n\tstate->Init_Ctrl[7].bit[1] = 5;\n\tstate->Init_Ctrl[7].val[1] = 1;\n\tstate->Init_Ctrl[7].addr[2] = 22;\n\tstate->Init_Ctrl[7].bit[2] = 6;\n\tstate->Init_Ctrl[7].val[2] = 1;\n\tstate->Init_Ctrl[7].addr[3] = 22;\n\tstate->Init_Ctrl[7].bit[3] = 7;\n\tstate->Init_Ctrl[7].val[3] = 0;\n\n\tstate->Init_Ctrl[8].Ctrl_Num = RFSYN_EN_CHP_HIGAIN ;\n\tstate->Init_Ctrl[8].size = 1 ;\n\tstate->Init_Ctrl[8].addr[0] = 22;\n\tstate->Init_Ctrl[8].bit[0] = 2;\n\tstate->Init_Ctrl[8].val[0] = 0;\n\n\tstate->Init_Ctrl[9].Ctrl_Num = AGC_IF ;\n\tstate->Init_Ctrl[9].size = 4 ;\n\tstate->Init_Ctrl[9].addr[0] = 76;\n\tstate->Init_Ctrl[9].bit[0] = 0;\n\tstate->Init_Ctrl[9].val[0] = 1;\n\tstate->Init_Ctrl[9].addr[1] = 76;\n\tstate->Init_Ctrl[9].bit[1] = 1;\n\tstate->Init_Ctrl[9].val[1] = 1;\n\tstate->Init_Ctrl[9].addr[2] = 76;\n\tstate->Init_Ctrl[9].bit[2] = 2;\n\tstate->Init_Ctrl[9].val[2] = 0;\n\tstate->Init_Ctrl[9].addr[3] = 76;\n\tstate->Init_Ctrl[9].bit[3] = 3;\n\tstate->Init_Ctrl[9].val[3] = 1;\n\n\tstate->Init_Ctrl[10].Ctrl_Num = AGC_RF ;\n\tstate->Init_Ctrl[10].size = 4 ;\n\tstate->Init_Ctrl[10].addr[0] = 76;\n\tstate->Init_Ctrl[10].bit[0] = 4;\n\tstate->Init_Ctrl[10].val[0] = 1;\n\tstate->Init_Ctrl[10].addr[1] = 76;\n\tstate->Init_Ctrl[10].bit[1] = 5;\n\tstate->Init_Ctrl[10].val[1] = 1;\n\tstate->Init_Ctrl[10].addr[2] = 76;\n\tstate->Init_Ctrl[10].bit[2] = 6;\n\tstate->Init_Ctrl[10].val[2] = 0;\n\tstate->Init_Ctrl[10].addr[3] = 76;\n\tstate->Init_Ctrl[10].bit[3] = 7;\n\tstate->Init_Ctrl[10].val[3] = 1;\n\n\tstate->Init_Ctrl[11].Ctrl_Num = IF_DIVVAL ;\n\tstate->Init_Ctrl[11].size = 5 ;\n\tstate->Init_Ctrl[11].addr[0] = 43;\n\tstate->Init_Ctrl[11].bit[0] = 3;\n\tstate->Init_Ctrl[11].val[0] = 0;\n\tstate->Init_Ctrl[11].addr[1] = 43;\n\tstate->Init_Ctrl[11].bit[1] = 4;\n\tstate->Init_Ctrl[11].val[1] = 0;\n\tstate->Init_Ctrl[11].addr[2] = 43;\n\tstate->Init_Ctrl[11].bit[2] = 5;\n\tstate->Init_Ctrl[11].val[2] = 0;\n\tstate->Init_Ctrl[11].addr[3] = 43;\n\tstate->Init_Ctrl[11].bit[3] = 6;\n\tstate->Init_Ctrl[11].val[3] = 1;\n\tstate->Init_Ctrl[11].addr[4] = 43;\n\tstate->Init_Ctrl[11].bit[4] = 7;\n\tstate->Init_Ctrl[11].val[4] = 0;\n\n\tstate->Init_Ctrl[12].Ctrl_Num = IF_VCO_BIAS ;\n\tstate->Init_Ctrl[12].size = 6 ;\n\tstate->Init_Ctrl[12].addr[0] = 44;\n\tstate->Init_Ctrl[12].bit[0] = 2;\n\tstate->Init_Ctrl[12].val[0] = 0;\n\tstate->Init_Ctrl[12].addr[1] = 44;\n\tstate->Init_Ctrl[12].bit[1] = 3;\n\tstate->Init_Ctrl[12].val[1] = 0;\n\tstate->Init_Ctrl[12].addr[2] = 44;\n\tstate->Init_Ctrl[12].bit[2] = 4;\n\tstate->Init_Ctrl[12].val[2] = 0;\n\tstate->Init_Ctrl[12].addr[3] = 44;\n\tstate->Init_Ctrl[12].bit[3] = 5;\n\tstate->Init_Ctrl[12].val[3] = 1;\n\tstate->Init_Ctrl[12].addr[4] = 44;\n\tstate->Init_Ctrl[12].bit[4] = 6;\n\tstate->Init_Ctrl[12].val[4] = 0;\n\tstate->Init_Ctrl[12].addr[5] = 44;\n\tstate->Init_Ctrl[12].bit[5] = 7;\n\tstate->Init_Ctrl[12].val[5] = 0;\n\n\tstate->Init_Ctrl[13].Ctrl_Num = CHCAL_INT_MOD_IF ;\n\tstate->Init_Ctrl[13].size = 7 ;\n\tstate->Init_Ctrl[13].addr[0] = 11;\n\tstate->Init_Ctrl[13].bit[0] = 0;\n\tstate->Init_Ctrl[13].val[0] = 1;\n\tstate->Init_Ctrl[13].addr[1] = 11;\n\tstate->Init_Ctrl[13].bit[1] = 1;\n\tstate->Init_Ctrl[13].val[1] = 0;\n\tstate->Init_Ctrl[13].addr[2] = 11;\n\tstate->Init_Ctrl[13].bit[2] = 2;\n\tstate->Init_Ctrl[13].val[2] = 0;\n\tstate->Init_Ctrl[13].addr[3] = 11;\n\tstate->Init_Ctrl[13].bit[3] = 3;\n\tstate->Init_Ctrl[13].val[3] = 1;\n\tstate->Init_Ctrl[13].addr[4] = 11;\n\tstate->Init_Ctrl[13].bit[4] = 4;\n\tstate->Init_Ctrl[13].val[4] = 1;\n\tstate->Init_Ctrl[13].addr[5] = 11;\n\tstate->Init_Ctrl[13].bit[5] = 5;\n\tstate->Init_Ctrl[13].val[5] = 0;\n\tstate->Init_Ctrl[13].addr[6] = 11;\n\tstate->Init_Ctrl[13].bit[6] = 6;\n\tstate->Init_Ctrl[13].val[6] = 0;\n\n\tstate->Init_Ctrl[14].Ctrl_Num = CHCAL_FRAC_MOD_IF ;\n\tstate->Init_Ctrl[14].size = 16 ;\n\tstate->Init_Ctrl[14].addr[0] = 13;\n\tstate->Init_Ctrl[14].bit[0] = 0;\n\tstate->Init_Ctrl[14].val[0] = 0;\n\tstate->Init_Ctrl[14].addr[1] = 13;\n\tstate->Init_Ctrl[14].bit[1] = 1;\n\tstate->Init_Ctrl[14].val[1] = 0;\n\tstate->Init_Ctrl[14].addr[2] = 13;\n\tstate->Init_Ctrl[14].bit[2] = 2;\n\tstate->Init_Ctrl[14].val[2] = 0;\n\tstate->Init_Ctrl[14].addr[3] = 13;\n\tstate->Init_Ctrl[14].bit[3] = 3;\n\tstate->Init_Ctrl[14].val[3] = 0;\n\tstate->Init_Ctrl[14].addr[4] = 13;\n\tstate->Init_Ctrl[14].bit[4] = 4;\n\tstate->Init_Ctrl[14].val[4] = 0;\n\tstate->Init_Ctrl[14].addr[5] = 13;\n\tstate->Init_Ctrl[14].bit[5] = 5;\n\tstate->Init_Ctrl[14].val[5] = 0;\n\tstate->Init_Ctrl[14].addr[6] = 13;\n\tstate->Init_Ctrl[14].bit[6] = 6;\n\tstate->Init_Ctrl[14].val[6] = 0;\n\tstate->Init_Ctrl[14].addr[7] = 13;\n\tstate->Init_Ctrl[14].bit[7] = 7;\n\tstate->Init_Ctrl[14].val[7] = 0;\n\tstate->Init_Ctrl[14].addr[8] = 12;\n\tstate->Init_Ctrl[14].bit[8] = 0;\n\tstate->Init_Ctrl[14].val[8] = 0;\n\tstate->Init_Ctrl[14].addr[9] = 12;\n\tstate->Init_Ctrl[14].bit[9] = 1;\n\tstate->Init_Ctrl[14].val[9] = 0;\n\tstate->Init_Ctrl[14].addr[10] = 12;\n\tstate->Init_Ctrl[14].bit[10] = 2;\n\tstate->Init_Ctrl[14].val[10] = 0;\n\tstate->Init_Ctrl[14].addr[11] = 12;\n\tstate->Init_Ctrl[14].bit[11] = 3;\n\tstate->Init_Ctrl[14].val[11] = 0;\n\tstate->Init_Ctrl[14].addr[12] = 12;\n\tstate->Init_Ctrl[14].bit[12] = 4;\n\tstate->Init_Ctrl[14].val[12] = 0;\n\tstate->Init_Ctrl[14].addr[13] = 12;\n\tstate->Init_Ctrl[14].bit[13] = 5;\n\tstate->Init_Ctrl[14].val[13] = 1;\n\tstate->Init_Ctrl[14].addr[14] = 12;\n\tstate->Init_Ctrl[14].bit[14] = 6;\n\tstate->Init_Ctrl[14].val[14] = 1;\n\tstate->Init_Ctrl[14].addr[15] = 12;\n\tstate->Init_Ctrl[14].bit[15] = 7;\n\tstate->Init_Ctrl[14].val[15] = 0;\n\n\tstate->Init_Ctrl[15].Ctrl_Num = DRV_RES_SEL ;\n\tstate->Init_Ctrl[15].size = 3 ;\n\tstate->Init_Ctrl[15].addr[0] = 147;\n\tstate->Init_Ctrl[15].bit[0] = 2;\n\tstate->Init_Ctrl[15].val[0] = 0;\n\tstate->Init_Ctrl[15].addr[1] = 147;\n\tstate->Init_Ctrl[15].bit[1] = 3;\n\tstate->Init_Ctrl[15].val[1] = 1;\n\tstate->Init_Ctrl[15].addr[2] = 147;\n\tstate->Init_Ctrl[15].bit[2] = 4;\n\tstate->Init_Ctrl[15].val[2] = 1;\n\n\tstate->Init_Ctrl[16].Ctrl_Num = I_DRIVER ;\n\tstate->Init_Ctrl[16].size = 2 ;\n\tstate->Init_Ctrl[16].addr[0] = 147;\n\tstate->Init_Ctrl[16].bit[0] = 0;\n\tstate->Init_Ctrl[16].val[0] = 0;\n\tstate->Init_Ctrl[16].addr[1] = 147;\n\tstate->Init_Ctrl[16].bit[1] = 1;\n\tstate->Init_Ctrl[16].val[1] = 1;\n\n\tstate->Init_Ctrl[17].Ctrl_Num = EN_AAF ;\n\tstate->Init_Ctrl[17].size = 1 ;\n\tstate->Init_Ctrl[17].addr[0] = 147;\n\tstate->Init_Ctrl[17].bit[0] = 7;\n\tstate->Init_Ctrl[17].val[0] = 0;\n\n\tstate->Init_Ctrl[18].Ctrl_Num = EN_3P ;\n\tstate->Init_Ctrl[18].size = 1 ;\n\tstate->Init_Ctrl[18].addr[0] = 147;\n\tstate->Init_Ctrl[18].bit[0] = 6;\n\tstate->Init_Ctrl[18].val[0] = 0;\n\n\tstate->Init_Ctrl[19].Ctrl_Num = EN_AUX_3P ;\n\tstate->Init_Ctrl[19].size = 1 ;\n\tstate->Init_Ctrl[19].addr[0] = 156;\n\tstate->Init_Ctrl[19].bit[0] = 0;\n\tstate->Init_Ctrl[19].val[0] = 0;\n\n\tstate->Init_Ctrl[20].Ctrl_Num = SEL_AAF_BAND ;\n\tstate->Init_Ctrl[20].size = 1 ;\n\tstate->Init_Ctrl[20].addr[0] = 147;\n\tstate->Init_Ctrl[20].bit[0] = 5;\n\tstate->Init_Ctrl[20].val[0] = 0;\n\n\tstate->Init_Ctrl[21].Ctrl_Num = SEQ_ENCLK16_CLK_OUT ;\n\tstate->Init_Ctrl[21].size = 1 ;\n\tstate->Init_Ctrl[21].addr[0] = 137;\n\tstate->Init_Ctrl[21].bit[0] = 4;\n\tstate->Init_Ctrl[21].val[0] = 0;\n\n\tstate->Init_Ctrl[22].Ctrl_Num = SEQ_SEL4_16B ;\n\tstate->Init_Ctrl[22].size = 1 ;\n\tstate->Init_Ctrl[22].addr[0] = 137;\n\tstate->Init_Ctrl[22].bit[0] = 7;\n\tstate->Init_Ctrl[22].val[0] = 0;\n\n\tstate->Init_Ctrl[23].Ctrl_Num = XTAL_CAPSELECT ;\n\tstate->Init_Ctrl[23].size = 1 ;\n\tstate->Init_Ctrl[23].addr[0] = 91;\n\tstate->Init_Ctrl[23].bit[0] = 5;\n\tstate->Init_Ctrl[23].val[0] = 1;\n\n\tstate->Init_Ctrl[24].Ctrl_Num = IF_SEL_DBL ;\n\tstate->Init_Ctrl[24].size = 1 ;\n\tstate->Init_Ctrl[24].addr[0] = 43;\n\tstate->Init_Ctrl[24].bit[0] = 0;\n\tstate->Init_Ctrl[24].val[0] = 1;\n\n\tstate->Init_Ctrl[25].Ctrl_Num = RFSYN_R_DIV ;\n\tstate->Init_Ctrl[25].size = 2 ;\n\tstate->Init_Ctrl[25].addr[0] = 22;\n\tstate->Init_Ctrl[25].bit[0] = 0;\n\tstate->Init_Ctrl[25].val[0] = 1;\n\tstate->Init_Ctrl[25].addr[1] = 22;\n\tstate->Init_Ctrl[25].bit[1] = 1;\n\tstate->Init_Ctrl[25].val[1] = 1;\n\n\tstate->Init_Ctrl[26].Ctrl_Num = SEQ_EXTSYNTHCALIF ;\n\tstate->Init_Ctrl[26].size = 1 ;\n\tstate->Init_Ctrl[26].addr[0] = 134;\n\tstate->Init_Ctrl[26].bit[0] = 2;\n\tstate->Init_Ctrl[26].val[0] = 0;\n\n\tstate->Init_Ctrl[27].Ctrl_Num = SEQ_EXTDCCAL ;\n\tstate->Init_Ctrl[27].size = 1 ;\n\tstate->Init_Ctrl[27].addr[0] = 137;\n\tstate->Init_Ctrl[27].bit[0] = 3;\n\tstate->Init_Ctrl[27].val[0] = 0;\n\n\tstate->Init_Ctrl[28].Ctrl_Num = AGC_EN_RSSI ;\n\tstate->Init_Ctrl[28].size = 1 ;\n\tstate->Init_Ctrl[28].addr[0] = 77;\n\tstate->Init_Ctrl[28].bit[0] = 7;\n\tstate->Init_Ctrl[28].val[0] = 0;\n\n\tstate->Init_Ctrl[29].Ctrl_Num = RFA_ENCLKRFAGC ;\n\tstate->Init_Ctrl[29].size = 1 ;\n\tstate->Init_Ctrl[29].addr[0] = 166;\n\tstate->Init_Ctrl[29].bit[0] = 7;\n\tstate->Init_Ctrl[29].val[0] = 1;\n\n\tstate->Init_Ctrl[30].Ctrl_Num = RFA_RSSI_REFH ;\n\tstate->Init_Ctrl[30].size = 3 ;\n\tstate->Init_Ctrl[30].addr[0] = 166;\n\tstate->Init_Ctrl[30].bit[0] = 0;\n\tstate->Init_Ctrl[30].val[0] = 0;\n\tstate->Init_Ctrl[30].addr[1] = 166;\n\tstate->Init_Ctrl[30].bit[1] = 1;\n\tstate->Init_Ctrl[30].val[1] = 1;\n\tstate->Init_Ctrl[30].addr[2] = 166;\n\tstate->Init_Ctrl[30].bit[2] = 2;\n\tstate->Init_Ctrl[30].val[2] = 1;\n\n\tstate->Init_Ctrl[31].Ctrl_Num = RFA_RSSI_REF ;\n\tstate->Init_Ctrl[31].size = 3 ;\n\tstate->Init_Ctrl[31].addr[0] = 166;\n\tstate->Init_Ctrl[31].bit[0] = 3;\n\tstate->Init_Ctrl[31].val[0] = 1;\n\tstate->Init_Ctrl[31].addr[1] = 166;\n\tstate->Init_Ctrl[31].bit[1] = 4;\n\tstate->Init_Ctrl[31].val[1] = 0;\n\tstate->Init_Ctrl[31].addr[2] = 166;\n\tstate->Init_Ctrl[31].bit[2] = 5;\n\tstate->Init_Ctrl[31].val[2] = 1;\n\n\tstate->Init_Ctrl[32].Ctrl_Num = RFA_RSSI_REFL ;\n\tstate->Init_Ctrl[32].size = 3 ;\n\tstate->Init_Ctrl[32].addr[0] = 167;\n\tstate->Init_Ctrl[32].bit[0] = 0;\n\tstate->Init_Ctrl[32].val[0] = 1;\n\tstate->Init_Ctrl[32].addr[1] = 167;\n\tstate->Init_Ctrl[32].bit[1] = 1;\n\tstate->Init_Ctrl[32].val[1] = 1;\n\tstate->Init_Ctrl[32].addr[2] = 167;\n\tstate->Init_Ctrl[32].bit[2] = 2;\n\tstate->Init_Ctrl[32].val[2] = 0;\n\n\tstate->Init_Ctrl[33].Ctrl_Num = RFA_FLR ;\n\tstate->Init_Ctrl[33].size = 4 ;\n\tstate->Init_Ctrl[33].addr[0] = 168;\n\tstate->Init_Ctrl[33].bit[0] = 0;\n\tstate->Init_Ctrl[33].val[0] = 0;\n\tstate->Init_Ctrl[33].addr[1] = 168;\n\tstate->Init_Ctrl[33].bit[1] = 1;\n\tstate->Init_Ctrl[33].val[1] = 1;\n\tstate->Init_Ctrl[33].addr[2] = 168;\n\tstate->Init_Ctrl[33].bit[2] = 2;\n\tstate->Init_Ctrl[33].val[2] = 0;\n\tstate->Init_Ctrl[33].addr[3] = 168;\n\tstate->Init_Ctrl[33].bit[3] = 3;\n\tstate->Init_Ctrl[33].val[3] = 0;\n\n\tstate->Init_Ctrl[34].Ctrl_Num = RFA_CEIL ;\n\tstate->Init_Ctrl[34].size = 4 ;\n\tstate->Init_Ctrl[34].addr[0] = 168;\n\tstate->Init_Ctrl[34].bit[0] = 4;\n\tstate->Init_Ctrl[34].val[0] = 1;\n\tstate->Init_Ctrl[34].addr[1] = 168;\n\tstate->Init_Ctrl[34].bit[1] = 5;\n\tstate->Init_Ctrl[34].val[1] = 1;\n\tstate->Init_Ctrl[34].addr[2] = 168;\n\tstate->Init_Ctrl[34].bit[2] = 6;\n\tstate->Init_Ctrl[34].val[2] = 1;\n\tstate->Init_Ctrl[34].addr[3] = 168;\n\tstate->Init_Ctrl[34].bit[3] = 7;\n\tstate->Init_Ctrl[34].val[3] = 1;\n\n\tstate->Init_Ctrl[35].Ctrl_Num = SEQ_EXTIQFSMPULSE ;\n\tstate->Init_Ctrl[35].size = 1 ;\n\tstate->Init_Ctrl[35].addr[0] = 135;\n\tstate->Init_Ctrl[35].bit[0] = 0;\n\tstate->Init_Ctrl[35].val[0] = 0;\n\n\tstate->Init_Ctrl[36].Ctrl_Num = OVERRIDE_1 ;\n\tstate->Init_Ctrl[36].size = 1 ;\n\tstate->Init_Ctrl[36].addr[0] = 56;\n\tstate->Init_Ctrl[36].bit[0] = 3;\n\tstate->Init_Ctrl[36].val[0] = 0;\n\n\tstate->Init_Ctrl[37].Ctrl_Num = BB_INITSTATE_DLPF_TUNE ;\n\tstate->Init_Ctrl[37].size = 7 ;\n\tstate->Init_Ctrl[37].addr[0] = 59;\n\tstate->Init_Ctrl[37].bit[0] = 1;\n\tstate->Init_Ctrl[37].val[0] = 0;\n\tstate->Init_Ctrl[37].addr[1] = 59;\n\tstate->Init_Ctrl[37].bit[1] = 2;\n\tstate->Init_Ctrl[37].val[1] = 0;\n\tstate->Init_Ctrl[37].addr[2] = 59;\n\tstate->Init_Ctrl[37].bit[2] = 3;\n\tstate->Init_Ctrl[37].val[2] = 0;\n\tstate->Init_Ctrl[37].addr[3] = 59;\n\tstate->Init_Ctrl[37].bit[3] = 4;\n\tstate->Init_Ctrl[37].val[3] = 0;\n\tstate->Init_Ctrl[37].addr[4] = 59;\n\tstate->Init_Ctrl[37].bit[4] = 5;\n\tstate->Init_Ctrl[37].val[4] = 0;\n\tstate->Init_Ctrl[37].addr[5] = 59;\n\tstate->Init_Ctrl[37].bit[5] = 6;\n\tstate->Init_Ctrl[37].val[5] = 0;\n\tstate->Init_Ctrl[37].addr[6] = 59;\n\tstate->Init_Ctrl[37].bit[6] = 7;\n\tstate->Init_Ctrl[37].val[6] = 0;\n\n\tstate->Init_Ctrl[38].Ctrl_Num = TG_R_DIV ;\n\tstate->Init_Ctrl[38].size = 6 ;\n\tstate->Init_Ctrl[38].addr[0] = 32;\n\tstate->Init_Ctrl[38].bit[0] = 2;\n\tstate->Init_Ctrl[38].val[0] = 0;\n\tstate->Init_Ctrl[38].addr[1] = 32;\n\tstate->Init_Ctrl[38].bit[1] = 3;\n\tstate->Init_Ctrl[38].val[1] = 0;\n\tstate->Init_Ctrl[38].addr[2] = 32;\n\tstate->Init_Ctrl[38].bit[2] = 4;\n\tstate->Init_Ctrl[38].val[2] = 0;\n\tstate->Init_Ctrl[38].addr[3] = 32;\n\tstate->Init_Ctrl[38].bit[3] = 5;\n\tstate->Init_Ctrl[38].val[3] = 0;\n\tstate->Init_Ctrl[38].addr[4] = 32;\n\tstate->Init_Ctrl[38].bit[4] = 6;\n\tstate->Init_Ctrl[38].val[4] = 1;\n\tstate->Init_Ctrl[38].addr[5] = 32;\n\tstate->Init_Ctrl[38].bit[5] = 7;\n\tstate->Init_Ctrl[38].val[5] = 0;\n\n\tstate->Init_Ctrl[39].Ctrl_Num = EN_CHP_LIN_B ;\n\tstate->Init_Ctrl[39].size = 1 ;\n\tstate->Init_Ctrl[39].addr[0] = 25;\n\tstate->Init_Ctrl[39].bit[0] = 3;\n\tstate->Init_Ctrl[39].val[0] = 1;\n\n\n\tstate->CH_Ctrl_Num = CHCTRL_NUM ;\n\n\tstate->CH_Ctrl[0].Ctrl_Num = DN_POLY ;\n\tstate->CH_Ctrl[0].size = 2 ;\n\tstate->CH_Ctrl[0].addr[0] = 68;\n\tstate->CH_Ctrl[0].bit[0] = 6;\n\tstate->CH_Ctrl[0].val[0] = 1;\n\tstate->CH_Ctrl[0].addr[1] = 68;\n\tstate->CH_Ctrl[0].bit[1] = 7;\n\tstate->CH_Ctrl[0].val[1] = 1;\n\n\tstate->CH_Ctrl[1].Ctrl_Num = DN_RFGAIN ;\n\tstate->CH_Ctrl[1].size = 2 ;\n\tstate->CH_Ctrl[1].addr[0] = 70;\n\tstate->CH_Ctrl[1].bit[0] = 6;\n\tstate->CH_Ctrl[1].val[0] = 1;\n\tstate->CH_Ctrl[1].addr[1] = 70;\n\tstate->CH_Ctrl[1].bit[1] = 7;\n\tstate->CH_Ctrl[1].val[1] = 0;\n\n\tstate->CH_Ctrl[2].Ctrl_Num = DN_CAP_RFLPF ;\n\tstate->CH_Ctrl[2].size = 9 ;\n\tstate->CH_Ctrl[2].addr[0] = 69;\n\tstate->CH_Ctrl[2].bit[0] = 5;\n\tstate->CH_Ctrl[2].val[0] = 0;\n\tstate->CH_Ctrl[2].addr[1] = 69;\n\tstate->CH_Ctrl[2].bit[1] = 6;\n\tstate->CH_Ctrl[2].val[1] = 0;\n\tstate->CH_Ctrl[2].addr[2] = 69;\n\tstate->CH_Ctrl[2].bit[2] = 7;\n\tstate->CH_Ctrl[2].val[2] = 0;\n\tstate->CH_Ctrl[2].addr[3] = 68;\n\tstate->CH_Ctrl[2].bit[3] = 0;\n\tstate->CH_Ctrl[2].val[3] = 0;\n\tstate->CH_Ctrl[2].addr[4] = 68;\n\tstate->CH_Ctrl[2].bit[4] = 1;\n\tstate->CH_Ctrl[2].val[4] = 0;\n\tstate->CH_Ctrl[2].addr[5] = 68;\n\tstate->CH_Ctrl[2].bit[5] = 2;\n\tstate->CH_Ctrl[2].val[5] = 0;\n\tstate->CH_Ctrl[2].addr[6] = 68;\n\tstate->CH_Ctrl[2].bit[6] = 3;\n\tstate->CH_Ctrl[2].val[6] = 0;\n\tstate->CH_Ctrl[2].addr[7] = 68;\n\tstate->CH_Ctrl[2].bit[7] = 4;\n\tstate->CH_Ctrl[2].val[7] = 0;\n\tstate->CH_Ctrl[2].addr[8] = 68;\n\tstate->CH_Ctrl[2].bit[8] = 5;\n\tstate->CH_Ctrl[2].val[8] = 0;\n\n\tstate->CH_Ctrl[3].Ctrl_Num = DN_EN_VHFUHFBAR ;\n\tstate->CH_Ctrl[3].size = 1 ;\n\tstate->CH_Ctrl[3].addr[0] = 70;\n\tstate->CH_Ctrl[3].bit[0] = 5;\n\tstate->CH_Ctrl[3].val[0] = 0;\n\n\tstate->CH_Ctrl[4].Ctrl_Num = DN_GAIN_ADJUST ;\n\tstate->CH_Ctrl[4].size = 3 ;\n\tstate->CH_Ctrl[4].addr[0] = 73;\n\tstate->CH_Ctrl[4].bit[0] = 4;\n\tstate->CH_Ctrl[4].val[0] = 0;\n\tstate->CH_Ctrl[4].addr[1] = 73;\n\tstate->CH_Ctrl[4].bit[1] = 5;\n\tstate->CH_Ctrl[4].val[1] = 1;\n\tstate->CH_Ctrl[4].addr[2] = 73;\n\tstate->CH_Ctrl[4].bit[2] = 6;\n\tstate->CH_Ctrl[4].val[2] = 0;\n\n\tstate->CH_Ctrl[5].Ctrl_Num = DN_IQTNBUF_AMP ;\n\tstate->CH_Ctrl[5].size = 4 ;\n\tstate->CH_Ctrl[5].addr[0] = 70;\n\tstate->CH_Ctrl[5].bit[0] = 0;\n\tstate->CH_Ctrl[5].val[0] = 0;\n\tstate->CH_Ctrl[5].addr[1] = 70;\n\tstate->CH_Ctrl[5].bit[1] = 1;\n\tstate->CH_Ctrl[5].val[1] = 0;\n\tstate->CH_Ctrl[5].addr[2] = 70;\n\tstate->CH_Ctrl[5].bit[2] = 2;\n\tstate->CH_Ctrl[5].val[2] = 0;\n\tstate->CH_Ctrl[5].addr[3] = 70;\n\tstate->CH_Ctrl[5].bit[3] = 3;\n\tstate->CH_Ctrl[5].val[3] = 0;\n\n\tstate->CH_Ctrl[6].Ctrl_Num = DN_IQTNGNBFBIAS_BST ;\n\tstate->CH_Ctrl[6].size = 1 ;\n\tstate->CH_Ctrl[6].addr[0] = 70;\n\tstate->CH_Ctrl[6].bit[0] = 4;\n\tstate->CH_Ctrl[6].val[0] = 1;\n\n\tstate->CH_Ctrl[7].Ctrl_Num = RFSYN_EN_OUTMUX ;\n\tstate->CH_Ctrl[7].size = 1 ;\n\tstate->CH_Ctrl[7].addr[0] = 111;\n\tstate->CH_Ctrl[7].bit[0] = 4;\n\tstate->CH_Ctrl[7].val[0] = 0;\n\n\tstate->CH_Ctrl[8].Ctrl_Num = RFSYN_SEL_VCO_OUT ;\n\tstate->CH_Ctrl[8].size = 1 ;\n\tstate->CH_Ctrl[8].addr[0] = 111;\n\tstate->CH_Ctrl[8].bit[0] = 7;\n\tstate->CH_Ctrl[8].val[0] = 1;\n\n\tstate->CH_Ctrl[9].Ctrl_Num = RFSYN_SEL_VCO_HI ;\n\tstate->CH_Ctrl[9].size = 1 ;\n\tstate->CH_Ctrl[9].addr[0] = 111;\n\tstate->CH_Ctrl[9].bit[0] = 6;\n\tstate->CH_Ctrl[9].val[0] = 1;\n\n\tstate->CH_Ctrl[10].Ctrl_Num = RFSYN_SEL_DIVM ;\n\tstate->CH_Ctrl[10].size = 1 ;\n\tstate->CH_Ctrl[10].addr[0] = 111;\n\tstate->CH_Ctrl[10].bit[0] = 5;\n\tstate->CH_Ctrl[10].val[0] = 0;\n\n\tstate->CH_Ctrl[11].Ctrl_Num = RFSYN_RF_DIV_BIAS ;\n\tstate->CH_Ctrl[11].size = 2 ;\n\tstate->CH_Ctrl[11].addr[0] = 110;\n\tstate->CH_Ctrl[11].bit[0] = 0;\n\tstate->CH_Ctrl[11].val[0] = 1;\n\tstate->CH_Ctrl[11].addr[1] = 110;\n\tstate->CH_Ctrl[11].bit[1] = 1;\n\tstate->CH_Ctrl[11].val[1] = 0;\n\n\tstate->CH_Ctrl[12].Ctrl_Num = DN_SEL_FREQ ;\n\tstate->CH_Ctrl[12].size = 3 ;\n\tstate->CH_Ctrl[12].addr[0] = 69;\n\tstate->CH_Ctrl[12].bit[0] = 2;\n\tstate->CH_Ctrl[12].val[0] = 0;\n\tstate->CH_Ctrl[12].addr[1] = 69;\n\tstate->CH_Ctrl[12].bit[1] = 3;\n\tstate->CH_Ctrl[12].val[1] = 0;\n\tstate->CH_Ctrl[12].addr[2] = 69;\n\tstate->CH_Ctrl[12].bit[2] = 4;\n\tstate->CH_Ctrl[12].val[2] = 0;\n\n\tstate->CH_Ctrl[13].Ctrl_Num = RFSYN_VCO_BIAS ;\n\tstate->CH_Ctrl[13].size = 6 ;\n\tstate->CH_Ctrl[13].addr[0] = 110;\n\tstate->CH_Ctrl[13].bit[0] = 2;\n\tstate->CH_Ctrl[13].val[0] = 0;\n\tstate->CH_Ctrl[13].addr[1] = 110;\n\tstate->CH_Ctrl[13].bit[1] = 3;\n\tstate->CH_Ctrl[13].val[1] = 0;\n\tstate->CH_Ctrl[13].addr[2] = 110;\n\tstate->CH_Ctrl[13].bit[2] = 4;\n\tstate->CH_Ctrl[13].val[2] = 0;\n\tstate->CH_Ctrl[13].addr[3] = 110;\n\tstate->CH_Ctrl[13].bit[3] = 5;\n\tstate->CH_Ctrl[13].val[3] = 0;\n\tstate->CH_Ctrl[13].addr[4] = 110;\n\tstate->CH_Ctrl[13].bit[4] = 6;\n\tstate->CH_Ctrl[13].val[4] = 0;\n\tstate->CH_Ctrl[13].addr[5] = 110;\n\tstate->CH_Ctrl[13].bit[5] = 7;\n\tstate->CH_Ctrl[13].val[5] = 1;\n\n\tstate->CH_Ctrl[14].Ctrl_Num = CHCAL_INT_MOD_RF ;\n\tstate->CH_Ctrl[14].size = 7 ;\n\tstate->CH_Ctrl[14].addr[0] = 14;\n\tstate->CH_Ctrl[14].bit[0] = 0;\n\tstate->CH_Ctrl[14].val[0] = 0;\n\tstate->CH_Ctrl[14].addr[1] = 14;\n\tstate->CH_Ctrl[14].bit[1] = 1;\n\tstate->CH_Ctrl[14].val[1] = 0;\n\tstate->CH_Ctrl[14].addr[2] = 14;\n\tstate->CH_Ctrl[14].bit[2] = 2;\n\tstate->CH_Ctrl[14].val[2] = 0;\n\tstate->CH_Ctrl[14].addr[3] = 14;\n\tstate->CH_Ctrl[14].bit[3] = 3;\n\tstate->CH_Ctrl[14].val[3] = 0;\n\tstate->CH_Ctrl[14].addr[4] = 14;\n\tstate->CH_Ctrl[14].bit[4] = 4;\n\tstate->CH_Ctrl[14].val[4] = 0;\n\tstate->CH_Ctrl[14].addr[5] = 14;\n\tstate->CH_Ctrl[14].bit[5] = 5;\n\tstate->CH_Ctrl[14].val[5] = 0;\n\tstate->CH_Ctrl[14].addr[6] = 14;\n\tstate->CH_Ctrl[14].bit[6] = 6;\n\tstate->CH_Ctrl[14].val[6] = 0;\n\n\tstate->CH_Ctrl[15].Ctrl_Num = CHCAL_FRAC_MOD_RF ;\n\tstate->CH_Ctrl[15].size = 18 ;\n\tstate->CH_Ctrl[15].addr[0] = 17;\n\tstate->CH_Ctrl[15].bit[0] = 6;\n\tstate->CH_Ctrl[15].val[0] = 0;\n\tstate->CH_Ctrl[15].addr[1] = 17;\n\tstate->CH_Ctrl[15].bit[1] = 7;\n\tstate->CH_Ctrl[15].val[1] = 0;\n\tstate->CH_Ctrl[15].addr[2] = 16;\n\tstate->CH_Ctrl[15].bit[2] = 0;\n\tstate->CH_Ctrl[15].val[2] = 0;\n\tstate->CH_Ctrl[15].addr[3] = 16;\n\tstate->CH_Ctrl[15].bit[3] = 1;\n\tstate->CH_Ctrl[15].val[3] = 0;\n\tstate->CH_Ctrl[15].addr[4] = 16;\n\tstate->CH_Ctrl[15].bit[4] = 2;\n\tstate->CH_Ctrl[15].val[4] = 0;\n\tstate->CH_Ctrl[15].addr[5] = 16;\n\tstate->CH_Ctrl[15].bit[5] = 3;\n\tstate->CH_Ctrl[15].val[5] = 0;\n\tstate->CH_Ctrl[15].addr[6] = 16;\n\tstate->CH_Ctrl[15].bit[6] = 4;\n\tstate->CH_Ctrl[15].val[6] = 0;\n\tstate->CH_Ctrl[15].addr[7] = 16;\n\tstate->CH_Ctrl[15].bit[7] = 5;\n\tstate->CH_Ctrl[15].val[7] = 0;\n\tstate->CH_Ctrl[15].addr[8] = 16;\n\tstate->CH_Ctrl[15].bit[8] = 6;\n\tstate->CH_Ctrl[15].val[8] = 0;\n\tstate->CH_Ctrl[15].addr[9] = 16;\n\tstate->CH_Ctrl[15].bit[9] = 7;\n\tstate->CH_Ctrl[15].val[9] = 0;\n\tstate->CH_Ctrl[15].addr[10] = 15;\n\tstate->CH_Ctrl[15].bit[10] = 0;\n\tstate->CH_Ctrl[15].val[10] = 0;\n\tstate->CH_Ctrl[15].addr[11] = 15;\n\tstate->CH_Ctrl[15].bit[11] = 1;\n\tstate->CH_Ctrl[15].val[11] = 0;\n\tstate->CH_Ctrl[15].addr[12] = 15;\n\tstate->CH_Ctrl[15].bit[12] = 2;\n\tstate->CH_Ctrl[15].val[12] = 0;\n\tstate->CH_Ctrl[15].addr[13] = 15;\n\tstate->CH_Ctrl[15].bit[13] = 3;\n\tstate->CH_Ctrl[15].val[13] = 0;\n\tstate->CH_Ctrl[15].addr[14] = 15;\n\tstate->CH_Ctrl[15].bit[14] = 4;\n\tstate->CH_Ctrl[15].val[14] = 0;\n\tstate->CH_Ctrl[15].addr[15] = 15;\n\tstate->CH_Ctrl[15].bit[15] = 5;\n\tstate->CH_Ctrl[15].val[15] = 0;\n\tstate->CH_Ctrl[15].addr[16] = 15;\n\tstate->CH_Ctrl[15].bit[16] = 6;\n\tstate->CH_Ctrl[15].val[16] = 1;\n\tstate->CH_Ctrl[15].addr[17] = 15;\n\tstate->CH_Ctrl[15].bit[17] = 7;\n\tstate->CH_Ctrl[15].val[17] = 1;\n\n\tstate->CH_Ctrl[16].Ctrl_Num = RFSYN_LPF_R ;\n\tstate->CH_Ctrl[16].size = 5 ;\n\tstate->CH_Ctrl[16].addr[0] = 112;\n\tstate->CH_Ctrl[16].bit[0] = 0;\n\tstate->CH_Ctrl[16].val[0] = 0;\n\tstate->CH_Ctrl[16].addr[1] = 112;\n\tstate->CH_Ctrl[16].bit[1] = 1;\n\tstate->CH_Ctrl[16].val[1] = 0;\n\tstate->CH_Ctrl[16].addr[2] = 112;\n\tstate->CH_Ctrl[16].bit[2] = 2;\n\tstate->CH_Ctrl[16].val[2] = 0;\n\tstate->CH_Ctrl[16].addr[3] = 112;\n\tstate->CH_Ctrl[16].bit[3] = 3;\n\tstate->CH_Ctrl[16].val[3] = 0;\n\tstate->CH_Ctrl[16].addr[4] = 112;\n\tstate->CH_Ctrl[16].bit[4] = 4;\n\tstate->CH_Ctrl[16].val[4] = 1;\n\n\tstate->CH_Ctrl[17].Ctrl_Num = CHCAL_EN_INT_RF ;\n\tstate->CH_Ctrl[17].size = 1 ;\n\tstate->CH_Ctrl[17].addr[0] = 14;\n\tstate->CH_Ctrl[17].bit[0] = 7;\n\tstate->CH_Ctrl[17].val[0] = 0;\n\n\tstate->CH_Ctrl[18].Ctrl_Num = TG_LO_DIVVAL ;\n\tstate->CH_Ctrl[18].size = 4 ;\n\tstate->CH_Ctrl[18].addr[0] = 107;\n\tstate->CH_Ctrl[18].bit[0] = 3;\n\tstate->CH_Ctrl[18].val[0] = 0;\n\tstate->CH_Ctrl[18].addr[1] = 107;\n\tstate->CH_Ctrl[18].bit[1] = 4;\n\tstate->CH_Ctrl[18].val[1] = 0;\n\tstate->CH_Ctrl[18].addr[2] = 107;\n\tstate->CH_Ctrl[18].bit[2] = 5;\n\tstate->CH_Ctrl[18].val[2] = 0;\n\tstate->CH_Ctrl[18].addr[3] = 107;\n\tstate->CH_Ctrl[18].bit[3] = 6;\n\tstate->CH_Ctrl[18].val[3] = 0;\n\n\tstate->CH_Ctrl[19].Ctrl_Num = TG_LO_SELVAL ;\n\tstate->CH_Ctrl[19].size = 3 ;\n\tstate->CH_Ctrl[19].addr[0] = 107;\n\tstate->CH_Ctrl[19].bit[0] = 7;\n\tstate->CH_Ctrl[19].val[0] = 1;\n\tstate->CH_Ctrl[19].addr[1] = 106;\n\tstate->CH_Ctrl[19].bit[1] = 0;\n\tstate->CH_Ctrl[19].val[1] = 1;\n\tstate->CH_Ctrl[19].addr[2] = 106;\n\tstate->CH_Ctrl[19].bit[2] = 1;\n\tstate->CH_Ctrl[19].val[2] = 1;\n\n\tstate->CH_Ctrl[20].Ctrl_Num = TG_DIV_VAL ;\n\tstate->CH_Ctrl[20].size = 11 ;\n\tstate->CH_Ctrl[20].addr[0] = 109;\n\tstate->CH_Ctrl[20].bit[0] = 2;\n\tstate->CH_Ctrl[20].val[0] = 0;\n\tstate->CH_Ctrl[20].addr[1] = 109;\n\tstate->CH_Ctrl[20].bit[1] = 3;\n\tstate->CH_Ctrl[20].val[1] = 0;\n\tstate->CH_Ctrl[20].addr[2] = 109;\n\tstate->CH_Ctrl[20].bit[2] = 4;\n\tstate->CH_Ctrl[20].val[2] = 0;\n\tstate->CH_Ctrl[20].addr[3] = 109;\n\tstate->CH_Ctrl[20].bit[3] = 5;\n\tstate->CH_Ctrl[20].val[3] = 0;\n\tstate->CH_Ctrl[20].addr[4] = 109;\n\tstate->CH_Ctrl[20].bit[4] = 6;\n\tstate->CH_Ctrl[20].val[4] = 0;\n\tstate->CH_Ctrl[20].addr[5] = 109;\n\tstate->CH_Ctrl[20].bit[5] = 7;\n\tstate->CH_Ctrl[20].val[5] = 0;\n\tstate->CH_Ctrl[20].addr[6] = 108;\n\tstate->CH_Ctrl[20].bit[6] = 0;\n\tstate->CH_Ctrl[20].val[6] = 0;\n\tstate->CH_Ctrl[20].addr[7] = 108;\n\tstate->CH_Ctrl[20].bit[7] = 1;\n\tstate->CH_Ctrl[20].val[7] = 0;\n\tstate->CH_Ctrl[20].addr[8] = 108;\n\tstate->CH_Ctrl[20].bit[8] = 2;\n\tstate->CH_Ctrl[20].val[8] = 1;\n\tstate->CH_Ctrl[20].addr[9] = 108;\n\tstate->CH_Ctrl[20].bit[9] = 3;\n\tstate->CH_Ctrl[20].val[9] = 1;\n\tstate->CH_Ctrl[20].addr[10] = 108;\n\tstate->CH_Ctrl[20].bit[10] = 4;\n\tstate->CH_Ctrl[20].val[10] = 1;\n\n\tstate->CH_Ctrl[21].Ctrl_Num = TG_VCO_BIAS ;\n\tstate->CH_Ctrl[21].size = 6 ;\n\tstate->CH_Ctrl[21].addr[0] = 106;\n\tstate->CH_Ctrl[21].bit[0] = 2;\n\tstate->CH_Ctrl[21].val[0] = 0;\n\tstate->CH_Ctrl[21].addr[1] = 106;\n\tstate->CH_Ctrl[21].bit[1] = 3;\n\tstate->CH_Ctrl[21].val[1] = 0;\n\tstate->CH_Ctrl[21].addr[2] = 106;\n\tstate->CH_Ctrl[21].bit[2] = 4;\n\tstate->CH_Ctrl[21].val[2] = 0;\n\tstate->CH_Ctrl[21].addr[3] = 106;\n\tstate->CH_Ctrl[21].bit[3] = 5;\n\tstate->CH_Ctrl[21].val[3] = 0;\n\tstate->CH_Ctrl[21].addr[4] = 106;\n\tstate->CH_Ctrl[21].bit[4] = 6;\n\tstate->CH_Ctrl[21].val[4] = 0;\n\tstate->CH_Ctrl[21].addr[5] = 106;\n\tstate->CH_Ctrl[21].bit[5] = 7;\n\tstate->CH_Ctrl[21].val[5] = 1;\n\n\tstate->CH_Ctrl[22].Ctrl_Num = SEQ_EXTPOWERUP ;\n\tstate->CH_Ctrl[22].size = 1 ;\n\tstate->CH_Ctrl[22].addr[0] = 138;\n\tstate->CH_Ctrl[22].bit[0] = 4;\n\tstate->CH_Ctrl[22].val[0] = 1;\n\n\tstate->CH_Ctrl[23].Ctrl_Num = OVERRIDE_2 ;\n\tstate->CH_Ctrl[23].size = 1 ;\n\tstate->CH_Ctrl[23].addr[0] = 17;\n\tstate->CH_Ctrl[23].bit[0] = 5;\n\tstate->CH_Ctrl[23].val[0] = 0;\n\n\tstate->CH_Ctrl[24].Ctrl_Num = OVERRIDE_3 ;\n\tstate->CH_Ctrl[24].size = 1 ;\n\tstate->CH_Ctrl[24].addr[0] = 111;\n\tstate->CH_Ctrl[24].bit[0] = 3;\n\tstate->CH_Ctrl[24].val[0] = 0;\n\n\tstate->CH_Ctrl[25].Ctrl_Num = OVERRIDE_4 ;\n\tstate->CH_Ctrl[25].size = 1 ;\n\tstate->CH_Ctrl[25].addr[0] = 112;\n\tstate->CH_Ctrl[25].bit[0] = 7;\n\tstate->CH_Ctrl[25].val[0] = 0;\n\n\tstate->CH_Ctrl[26].Ctrl_Num = SEQ_FSM_PULSE ;\n\tstate->CH_Ctrl[26].size = 1 ;\n\tstate->CH_Ctrl[26].addr[0] = 136;\n\tstate->CH_Ctrl[26].bit[0] = 7;\n\tstate->CH_Ctrl[26].val[0] = 0;\n\n\tstate->CH_Ctrl[27].Ctrl_Num = GPIO_4B ;\n\tstate->CH_Ctrl[27].size = 1 ;\n\tstate->CH_Ctrl[27].addr[0] = 149;\n\tstate->CH_Ctrl[27].bit[0] = 7;\n\tstate->CH_Ctrl[27].val[0] = 0;\n\n\tstate->CH_Ctrl[28].Ctrl_Num = GPIO_3B ;\n\tstate->CH_Ctrl[28].size = 1 ;\n\tstate->CH_Ctrl[28].addr[0] = 149;\n\tstate->CH_Ctrl[28].bit[0] = 6;\n\tstate->CH_Ctrl[28].val[0] = 0;\n\n\tstate->CH_Ctrl[29].Ctrl_Num = GPIO_4 ;\n\tstate->CH_Ctrl[29].size = 1 ;\n\tstate->CH_Ctrl[29].addr[0] = 149;\n\tstate->CH_Ctrl[29].bit[0] = 5;\n\tstate->CH_Ctrl[29].val[0] = 1;\n\n\tstate->CH_Ctrl[30].Ctrl_Num = GPIO_3 ;\n\tstate->CH_Ctrl[30].size = 1 ;\n\tstate->CH_Ctrl[30].addr[0] = 149;\n\tstate->CH_Ctrl[30].bit[0] = 4;\n\tstate->CH_Ctrl[30].val[0] = 1;\n\n\tstate->CH_Ctrl[31].Ctrl_Num = GPIO_1B ;\n\tstate->CH_Ctrl[31].size = 1 ;\n\tstate->CH_Ctrl[31].addr[0] = 149;\n\tstate->CH_Ctrl[31].bit[0] = 3;\n\tstate->CH_Ctrl[31].val[0] = 0;\n\n\tstate->CH_Ctrl[32].Ctrl_Num = DAC_A_ENABLE ;\n\tstate->CH_Ctrl[32].size = 1 ;\n\tstate->CH_Ctrl[32].addr[0] = 93;\n\tstate->CH_Ctrl[32].bit[0] = 1;\n\tstate->CH_Ctrl[32].val[0] = 0;\n\n\tstate->CH_Ctrl[33].Ctrl_Num = DAC_B_ENABLE ;\n\tstate->CH_Ctrl[33].size = 1 ;\n\tstate->CH_Ctrl[33].addr[0] = 93;\n\tstate->CH_Ctrl[33].bit[0] = 0;\n\tstate->CH_Ctrl[33].val[0] = 0;\n\n\tstate->CH_Ctrl[34].Ctrl_Num = DAC_DIN_A ;\n\tstate->CH_Ctrl[34].size = 6 ;\n\tstate->CH_Ctrl[34].addr[0] = 92;\n\tstate->CH_Ctrl[34].bit[0] = 2;\n\tstate->CH_Ctrl[34].val[0] = 0;\n\tstate->CH_Ctrl[34].addr[1] = 92;\n\tstate->CH_Ctrl[34].bit[1] = 3;\n\tstate->CH_Ctrl[34].val[1] = 0;\n\tstate->CH_Ctrl[34].addr[2] = 92;\n\tstate->CH_Ctrl[34].bit[2] = 4;\n\tstate->CH_Ctrl[34].val[2] = 0;\n\tstate->CH_Ctrl[34].addr[3] = 92;\n\tstate->CH_Ctrl[34].bit[3] = 5;\n\tstate->CH_Ctrl[34].val[3] = 0;\n\tstate->CH_Ctrl[34].addr[4] = 92;\n\tstate->CH_Ctrl[34].bit[4] = 6;\n\tstate->CH_Ctrl[34].val[4] = 0;\n\tstate->CH_Ctrl[34].addr[5] = 92;\n\tstate->CH_Ctrl[34].bit[5] = 7;\n\tstate->CH_Ctrl[34].val[5] = 0;\n\n\tstate->CH_Ctrl[35].Ctrl_Num = DAC_DIN_B ;\n\tstate->CH_Ctrl[35].size = 6 ;\n\tstate->CH_Ctrl[35].addr[0] = 93;\n\tstate->CH_Ctrl[35].bit[0] = 2;\n\tstate->CH_Ctrl[35].val[0] = 0;\n\tstate->CH_Ctrl[35].addr[1] = 93;\n\tstate->CH_Ctrl[35].bit[1] = 3;\n\tstate->CH_Ctrl[35].val[1] = 0;\n\tstate->CH_Ctrl[35].addr[2] = 93;\n\tstate->CH_Ctrl[35].bit[2] = 4;\n\tstate->CH_Ctrl[35].val[2] = 0;\n\tstate->CH_Ctrl[35].addr[3] = 93;\n\tstate->CH_Ctrl[35].bit[3] = 5;\n\tstate->CH_Ctrl[35].val[3] = 0;\n\tstate->CH_Ctrl[35].addr[4] = 93;\n\tstate->CH_Ctrl[35].bit[4] = 6;\n\tstate->CH_Ctrl[35].val[4] = 0;\n\tstate->CH_Ctrl[35].addr[5] = 93;\n\tstate->CH_Ctrl[35].bit[5] = 7;\n\tstate->CH_Ctrl[35].val[5] = 0;\n\n#ifdef _MXL_PRODUCTION\n\tstate->CH_Ctrl[36].Ctrl_Num = RFSYN_EN_DIV ;\n\tstate->CH_Ctrl[36].size = 1 ;\n\tstate->CH_Ctrl[36].addr[0] = 109;\n\tstate->CH_Ctrl[36].bit[0] = 1;\n\tstate->CH_Ctrl[36].val[0] = 1;\n\n\tstate->CH_Ctrl[37].Ctrl_Num = RFSYN_DIVM ;\n\tstate->CH_Ctrl[37].size = 2 ;\n\tstate->CH_Ctrl[37].addr[0] = 112;\n\tstate->CH_Ctrl[37].bit[0] = 5;\n\tstate->CH_Ctrl[37].val[0] = 0;\n\tstate->CH_Ctrl[37].addr[1] = 112;\n\tstate->CH_Ctrl[37].bit[1] = 6;\n\tstate->CH_Ctrl[37].val[1] = 0;\n\n\tstate->CH_Ctrl[38].Ctrl_Num = DN_BYPASS_AGC_I2C ;\n\tstate->CH_Ctrl[38].size = 1 ;\n\tstate->CH_Ctrl[38].addr[0] = 65;\n\tstate->CH_Ctrl[38].bit[0] = 1;\n\tstate->CH_Ctrl[38].val[0] = 0;\n#endif\n\n\treturn 0 ;\n}\n\nstatic void InitTunerControls(struct dvb_frontend *fe)\n{\n\tMXL5005_RegisterInit(fe);\n\tMXL5005_ControlInit(fe);\n#ifdef _MXL_INTERNAL\n\tMXL5005_MXLControlInit(fe);\n#endif\n}\n\nstatic u16 MXL5005_TunerConfig(struct dvb_frontend *fe,\n\tu8\tMode,\t\t \n\tu8\tIF_mode,\t \n\tu32\tBandwidth,\t \n\tu32\tIF_out,\t\t \n\tu32\tFxtal,\t\t \n\tu8\tAGC_Mode,\t \n\tu16\tTOP,\t\t \n\tu16\tIF_OUT_LOAD,\t \n\tu8\tCLOCK_OUT,\t \n\tu8\tDIV_OUT,\t \n\tu8\tCAPSELECT,\t \n\tu8\tEN_RSSI,\t \n\n\t \n\t \n\tu8\tMod_Type,\n\n\t \n\t \n\tu8\tTF_Type\n\t)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\n\tstate->Mode = Mode;\n\tstate->IF_Mode = IF_mode;\n\tstate->Chan_Bandwidth = Bandwidth;\n\tstate->IF_OUT = IF_out;\n\tstate->Fxtal = Fxtal;\n\tstate->AGC_Mode = AGC_Mode;\n\tstate->TOP = TOP;\n\tstate->IF_OUT_LOAD = IF_OUT_LOAD;\n\tstate->CLOCK_OUT = CLOCK_OUT;\n\tstate->DIV_OUT = DIV_OUT;\n\tstate->CAPSELECT = CAPSELECT;\n\tstate->EN_RSSI = EN_RSSI;\n\tstate->Mod_Type = Mod_Type;\n\tstate->TF_Type = TF_Type;\n\n\t \n\tInitTunerControls(fe);\n\n\t \n\tMXL_SynthIFLO_Calc(fe);\n\n\treturn 0;\n}\n\nstatic void MXL_SynthIFLO_Calc(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tif (state->Mode == 1)  \n\t\tstate->IF_LO = state->IF_OUT;\n\telse   {\n\t\tif (state->IF_Mode == 0)  \n\t\t\tstate->IF_LO = state->IF_OUT + 400000;\n\t\telse  \n\t\t\tstate->IF_LO = state->IF_OUT + state->Chan_Bandwidth/2;\n\t}\n}\n\nstatic void MXL_SynthRFTGLO_Calc(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\n\tif (state->Mode == 1)   {\n\t\t\t \n\t\t\tstate->RF_LO = state->RF_IN;\n\t\t\t \n\t\t\tstate->TG_LO = state->RF_IN - 750000;\n\t} else   {\n\t\tif (state->IF_Mode == 0)   {\n\t\t\tstate->RF_LO = state->RF_IN - 400000;\n\t\t\tstate->TG_LO = state->RF_IN - 1750000;\n\t\t} else   {\n\t\t\tstate->RF_LO = state->RF_IN - state->Chan_Bandwidth/2;\n\t\t\tstate->TG_LO = state->RF_IN -\n\t\t\t\tstate->Chan_Bandwidth + 500000;\n\t\t}\n\t}\n}\n\nstatic u16 MXL_OverwriteICDefault(struct dvb_frontend *fe)\n{\n\tu16 status = 0;\n\n\tstatus += MXL_ControlWrite(fe, OVERRIDE_1, 1);\n\tstatus += MXL_ControlWrite(fe, OVERRIDE_2, 1);\n\tstatus += MXL_ControlWrite(fe, OVERRIDE_3, 1);\n\tstatus += MXL_ControlWrite(fe, OVERRIDE_4, 1);\n\n\treturn status;\n}\n\nstatic u16 MXL_BlockInit(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 status = 0;\n\n\tstatus += MXL_OverwriteICDefault(fe);\n\n\t \n\tstatus += MXL_ControlWrite(fe, DN_IQTN_AMP_CUT, state->Mode ? 1 : 0);\n\n\t \n\tstatus += MXL_ControlWrite(fe, BB_MODE, state->Mode ? 0 : 1);\n\tstatus += MXL_ControlWrite(fe, BB_BUF, state->Mode ? 3 : 2);\n\tstatus += MXL_ControlWrite(fe, BB_BUF_OA, state->Mode ? 1 : 0);\n\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, state->Mode ? 0 : 1);\n\tstatus += MXL_ControlWrite(fe, BB_INITSTATE_DLPF_TUNE, 0);\n\n\t \n\tif (state->Mode) {  \n\t\tswitch (state->Chan_Bandwidth) {\n\t\tcase 8000000:\n\t\t\tstatus += MXL_ControlWrite(fe, BB_DLPF_BANDSEL, 0);\n\t\t\tbreak;\n\t\tcase 7000000:\n\t\t\tstatus += MXL_ControlWrite(fe, BB_DLPF_BANDSEL, 2);\n\t\t\tbreak;\n\t\tcase 6000000:\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\t\tBB_DLPF_BANDSEL, 3);\n\t\t\tbreak;\n\t\t}\n\t} else {  \n\t\tswitch (state->Chan_Bandwidth) {\n\t\tcase 8000000:\t \n\t\t\tstatus += MXL_ControlWrite(fe, BB_ALPF_BANDSELECT,\n\t\t\t\t\t(state->IF_Mode ? 0 : 3));\n\t\t\tbreak;\n\t\tcase 7000000:\n\t\t\tstatus += MXL_ControlWrite(fe, BB_ALPF_BANDSELECT,\n\t\t\t\t\t(state->IF_Mode ? 1 : 4));\n\t\t\tbreak;\n\t\tcase 6000000:\n\t\t\tstatus += MXL_ControlWrite(fe, BB_ALPF_BANDSELECT,\n\t\t\t\t\t(state->IF_Mode ? 2 : 5));\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t \n\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, state->Mode ? 5 : 8);\n\tstatus += MXL_ControlWrite(fe,\n\t\tRFSYN_EN_CHP_HIGAIN, state->Mode ? 1 : 1);\n\tstatus += MXL_ControlWrite(fe, EN_CHP_LIN_B, state->Mode ? 0 : 0);\n\n\t \n\tif (state->AGC_Mode == 0)   {\n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 15);\n\t\tstatus += MXL_ControlWrite(fe, AGC_RF, 15);\n\t} else  \n\t\tstatus += MXL_ControlWrite(fe, AGC_RF, state->Mode ? 15 : 12);\n\n\tif (state->TOP == 55)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x0);\n\n\tif (state->TOP == 72)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x1);\n\n\tif (state->TOP == 92)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x2);\n\n\tif (state->TOP == 110)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x3);\n\n\tif (state->TOP == 129)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x4);\n\n\tif (state->TOP == 147)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x5);\n\n\tif (state->TOP == 168)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x6);\n\n\tif (state->TOP == 194)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x7);\n\n\tif (state->TOP == 212)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0x9);\n\n\tif (state->TOP == 232)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xA);\n\n\tif (state->TOP == 252)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xB);\n\n\tif (state->TOP == 271)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xC);\n\n\tif (state->TOP == 292)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xD);\n\n\tif (state->TOP == 317)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xE);\n\n\tif (state->TOP == 349)  \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 0xF);\n\n\t \n\tstatus += MXL_IFSynthInit(fe);\n\n\t \n\tif (state->IF_OUT_LOAD == 200) {\n\t\tstatus += MXL_ControlWrite(fe, DRV_RES_SEL, 6);\n\t\tstatus += MXL_ControlWrite(fe, I_DRIVER, 2);\n\t}\n\tif (state->IF_OUT_LOAD == 300) {\n\t\tstatus += MXL_ControlWrite(fe, DRV_RES_SEL, 4);\n\t\tstatus += MXL_ControlWrite(fe, I_DRIVER, 1);\n\t}\n\n\t \n\tif (state->Mode) {  \n\t\tif (state->IF_OUT >= 4000000UL && state->IF_OUT <= 6280000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AAF, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AUX_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, SEL_AAF_BAND, 0);\n\t\t}\n\t\tif ((state->IF_OUT == 36125000UL) ||\n\t\t\t(state->IF_OUT == 36150000UL)) {\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AAF, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AUX_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, SEL_AAF_BAND, 1);\n\t\t}\n\t\tif (state->IF_OUT > 36150000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AAF, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AUX_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, SEL_AAF_BAND, 1);\n\t\t}\n\t} else {  \n\t\tif (state->IF_OUT >= 4000000UL && state->IF_OUT <= 5000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AAF, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AUX_3P, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, SEL_AAF_BAND, 0);\n\t\t}\n\t\tif (state->IF_OUT > 5000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AAF, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_3P, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, EN_AUX_3P, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, SEL_AAF_BAND, 0);\n\t\t}\n\t}\n\n\t \n\tif (state->CLOCK_OUT)\n\t\tstatus += MXL_ControlWrite(fe, SEQ_ENCLK16_CLK_OUT, 1);\n\telse\n\t\tstatus += MXL_ControlWrite(fe, SEQ_ENCLK16_CLK_OUT, 0);\n\n\tif (state->DIV_OUT == 1)\n\t\tstatus += MXL_ControlWrite(fe, SEQ_SEL4_16B, 1);\n\tif (state->DIV_OUT == 0)\n\t\tstatus += MXL_ControlWrite(fe, SEQ_SEL4_16B, 0);\n\n\t \n\tif (state->CAPSELECT)\n\t\tstatus += MXL_ControlWrite(fe, XTAL_CAPSELECT, 1);\n\telse\n\t\tstatus += MXL_ControlWrite(fe, XTAL_CAPSELECT, 0);\n\n\tif (state->Fxtal >= 12000000UL && state->Fxtal <= 16000000UL)\n\t\tstatus += MXL_ControlWrite(fe, IF_SEL_DBL, 1);\n\tif (state->Fxtal > 16000000UL && state->Fxtal <= 32000000UL)\n\t\tstatus += MXL_ControlWrite(fe, IF_SEL_DBL, 0);\n\n\tif (state->Fxtal >= 12000000UL && state->Fxtal <= 22000000UL)\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_R_DIV, 3);\n\tif (state->Fxtal > 22000000UL && state->Fxtal <= 32000000UL)\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_R_DIV, 0);\n\n\t \n\tif (state->Mode == 0 && state->IF_Mode == 1)  \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTIQFSMPULSE, 0);\n\telse\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTIQFSMPULSE, 1);\n\n\t \n\n\t \n\tstatus += MXL_ControlWrite(fe, TG_R_DIV,\n\t\tMXL_Ceiling(state->Fxtal, 1000000));\n\n\t \n\n\t \n\tif (state->EN_RSSI) {\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 2);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 3);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_FLR, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFA_CEIL, 12);\n\t}\n\n\t \n\tif (state->Mod_Type == MXL_DVBT)   {\n\t\tstate->AGC_Mode = 1;  \n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 3);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 5);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_FLR, 2);\n\t\tstatus += MXL_ControlWrite(fe, RFA_CEIL, 13);\n\t\tif (state->IF_OUT <= 6280000UL)\t \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 0);\n\t\telse  \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 1);\n\n\t}\n\tif (state->Mod_Type == MXL_ATSC)   {\n\t\tstate->AGC_Mode = 1;\t \n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 2);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 4);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_FLR, 2);\n\t\tstatus += MXL_ControlWrite(fe, RFA_CEIL, 13);\n\t\tstatus += MXL_ControlWrite(fe, BB_INITSTATE_DLPF_TUNE, 1);\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 5);\n\n\t\tif (state->IF_OUT <= 6280000UL)\t \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 0);\n\t\telse  \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 1);\n\t}\n\tif (state->Mod_Type == MXL_QAM)   {\n\t\tstate->Mode = MXL_DIGITAL_MODE;\n\n\t\t   \n\n\t\t \t \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 5);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 3);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 2);\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 3);\n\n\t\tif (state->IF_OUT <= 6280000UL)\t \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 0);\n\t\telse  \n\t\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 2);\n\n\t}\n\tif (state->Mod_Type == MXL_ANALOG_CABLE) {\n\t\t \n\t\t \n\n\t\tstate->AGC_Mode = 1;  \n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_RF, 15);\n\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 1);\n\t}\n\n\tif (state->Mod_Type == MXL_ANALOG_OTA) {\n\t\t \n\t\t \n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 5);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 3);\n\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 2);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 3);\n\t\tstatus += MXL_ControlWrite(fe, BB_IQSWAP, 1);\n\t}\n\n\t \n\tif (state->EN_RSSI == 0) {\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_IFSynthInit(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 status = 0 ;\n\tu32\tFref = 0 ;\n\tu32\tKdbl, intModVal ;\n\tu32\tfracModVal ;\n\tKdbl = 2 ;\n\n\tif (state->Fxtal >= 12000000UL && state->Fxtal <= 16000000UL)\n\t\tKdbl = 2 ;\n\tif (state->Fxtal > 16000000UL && state->Fxtal <= 32000000UL)\n\t\tKdbl = 1 ;\n\n\t \n\tif (state->Mode == 0 && state->IF_Mode == 1)   {\n\t\tif (state->IF_LO == 41000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 328000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 47000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 376000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 54000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x10);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 324000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 60000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x10);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 39250000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 314000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 39650000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 317200000UL ;\n\t\t}\n\t\tif (state->IF_LO == 40150000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 321200000UL ;\n\t\t}\n\t\tif (state->IF_LO == 40650000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 325200000UL ;\n\t\t}\n\t}\n\n\tif (state->Mode || (state->Mode == 0 && state->IF_Mode == 0)) {\n\t\tif (state->IF_LO == 57000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x10);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 342000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 44000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 352000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 43750000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 350000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 36650000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 366500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 36150000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 361500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 36000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 35250000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 352500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 34750000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 347500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 6280000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x07);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 376800000UL ;\n\t\t}\n\t\tif (state->IF_LO == 5000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x09);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4500000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x06);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4570000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x06);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 365600000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x05);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 57400000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x10);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 344400000UL ;\n\t\t}\n\t\tif (state->IF_LO == 44400000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 355200000UL ;\n\t\t}\n\t\tif (state->IF_LO == 44150000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x08);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 353200000UL ;\n\t\t}\n\t\tif (state->IF_LO == 37050000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 370500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 36550000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 365500000UL ;\n\t\t}\n\t\tif (state->IF_LO == 36125000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x04);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 361250000UL ;\n\t\t}\n\t\tif (state->IF_LO == 6000000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x07);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 360000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 5400000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x07);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 324000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 5380000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x07);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x0C);\n\t\t\tFref = 322800000UL ;\n\t\t}\n\t\tif (state->IF_LO == 5200000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x09);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 374400000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4900000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x09);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 352800000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4400000UL) {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x06);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 352000000UL ;\n\t\t}\n\t\tif (state->IF_LO == 4063000UL)    {\n\t\t\tstatus += MXL_ControlWrite(fe, IF_DIVVAL,   0x05);\n\t\t\tstatus += MXL_ControlWrite(fe, IF_VCO_BIAS, 0x08);\n\t\t\tFref = 365670000UL ;\n\t\t}\n\t}\n\t \n\t \n\tintModVal = Fref / (state->Fxtal * Kdbl/2);\n\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_IF, intModVal);\n\n\tfracModVal = (2<<15)*(Fref/1000 - (state->Fxtal/1000 * Kdbl/2) *\n\t\tintModVal);\n\n\tfracModVal = fracModVal / ((state->Fxtal * Kdbl/2)/1000);\n\tstatus += MXL_ControlWrite(fe, CHCAL_FRAC_MOD_IF, fracModVal);\n\n\treturn status ;\n}\n\nstatic u16 MXL_TuneRF(struct dvb_frontend *fe, u32 RF_Freq)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 status = 0;\n\tu32 divider_val, E3, E4, E5, E5A;\n\tu32 Fmax, Fmin, FmaxBin, FminBin;\n\tu32 Kdbl_RF = 2;\n\tu32 tg_divval;\n\tu32 tg_lo;\n\n\tu32 Fref_TG;\n\tu32 Fvco;\n\n\tstate->RF_IN = RF_Freq;\n\n\tMXL_SynthRFTGLO_Calc(fe);\n\n\tif (state->Fxtal >= 12000000UL && state->Fxtal <= 22000000UL)\n\t\tKdbl_RF = 2;\n\tif (state->Fxtal > 22000000 && state->Fxtal <= 32000000)\n\t\tKdbl_RF = 1;\n\n\t \n\tif (state->RF_LO < 40000000UL)\n\t\treturn -1;\n\n\tif (state->RF_LO >= 40000000UL && state->RF_LO <= 75000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              2);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            3);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         423);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      1);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       1);\n\t}\n\tif (state->RF_LO > 75000000UL && state->RF_LO <= 100000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            3);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         222);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      1);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       1);\n\t}\n\tif (state->RF_LO > 100000000UL && state->RF_LO <= 150000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            3);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         147);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      1);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       2);\n\t}\n\tif (state->RF_LO > 150000000UL && state->RF_LO <= 200000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            3);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         9);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      1);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       2);\n\t}\n\tif (state->RF_LO > 200000000UL && state->RF_LO <= 300000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            3);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         0);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      1);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       3);\n\t}\n\tif (state->RF_LO > 300000000UL && state->RF_LO <= 650000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            1);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         0);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      0);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       3);\n\t}\n\tif (state->RF_LO > 650000000UL && state->RF_LO <= 900000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_POLY,              3);\n\t\tstatus += MXL_ControlWrite(fe, DN_RFGAIN,            2);\n\t\tstatus += MXL_ControlWrite(fe, DN_CAP_RFLPF,         0);\n\t\tstatus += MXL_ControlWrite(fe, DN_EN_VHFUHFBAR,      0);\n\t\tstatus += MXL_ControlWrite(fe, DN_GAIN_ADJUST,       3);\n\t}\n\tif (state->RF_LO > 900000000UL)\n\t\treturn -1;\n\n\t \n\t \n\tif (state->RF_LO >= 40000000UL && state->RF_LO <= 75000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 75000000UL && state->RF_LO <= 100000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 100000000UL && state->RF_LO <= 150000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 150000000UL && state->RF_LO <= 200000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 200000000UL && state->RF_LO <= 300000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 300000000UL && state->RF_LO <= 400000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 400000000UL && state->RF_LO <= 450000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 450000000UL && state->RF_LO <= 500000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 500000000UL && state->RF_LO <= 550000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 550000000UL && state->RF_LO <= 600000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 600000000UL && state->RF_LO <= 650000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 650000000UL && state->RF_LO <= 700000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 700000000UL && state->RF_LO <= 750000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 750000000UL && state->RF_LO <= 800000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       1);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  0);\n\t}\n\tif (state->RF_LO > 800000000UL && state->RF_LO <= 850000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       10);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  1);\n\t}\n\tif (state->RF_LO > 850000000UL && state->RF_LO <= 900000000UL) {\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNBUF_AMP,       10);\n\t\tstatus += MXL_ControlWrite(fe, DN_IQTNGNBFBIAS_BST,  1);\n\t}\n\n\t \n\tFminBin = 28000000UL ;\n\tFmaxBin = 42500000UL ;\n\tif (state->RF_LO >= 40000000UL && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         1);\n\t\tdivider_val = 64 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 42500000UL ;\n\tFmaxBin = 56000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         1);\n\t\tdivider_val = 64 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 56000000UL ;\n\tFmaxBin = 85000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         1);\n\t\tdivider_val = 32 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 85000000UL ;\n\tFmaxBin = 112000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         1);\n\t\tdivider_val = 32 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 112000000UL ;\n\tFmaxBin = 170000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         2);\n\t\tdivider_val = 16 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 170000000UL ;\n\tFmaxBin = 225000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         2);\n\t\tdivider_val = 16 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 225000000UL ;\n\tFmaxBin = 300000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         4);\n\t\tdivider_val = 8 ;\n\t\tFmax = 340000000UL ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 300000000UL ;\n\tFmaxBin = 340000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         0);\n\t\tdivider_val = 8 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = 225000000UL ;\n\t}\n\tFminBin = 340000000UL ;\n\tFmaxBin = 450000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   2);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         0);\n\t\tdivider_val = 8 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 450000000UL ;\n\tFmaxBin = 680000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         0);\n\t\tdivider_val = 4 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 680000000UL ;\n\tFmaxBin = 900000000UL ;\n\tif (state->RF_LO > FminBin && state->RF_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX,     0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT,   1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI,    1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM,      1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS,   1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ,         0);\n\t\tdivider_val = 4 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\n\t \n\t \n\tE3 = (((Fmax-state->RF_LO)/1000)*32)/((Fmax-Fmin)/1000) + 8 ;\n\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, E3);\n\n\t \n\tE4 = (state->RF_LO*divider_val/1000)/(2*state->Fxtal*Kdbl_RF/1000);\n\tMXL_ControlWrite(fe, CHCAL_INT_MOD_RF, E4);\n\n\t \n\tE5 = ((2<<17)*(state->RF_LO/10000*divider_val -\n\t\t(E4*(2*state->Fxtal*Kdbl_RF)/10000))) /\n\t\t(2*state->Fxtal*Kdbl_RF/10000);\n\n\tstatus += MXL_ControlWrite(fe, CHCAL_FRAC_MOD_RF, E5);\n\n\t \n\tE5A = (((Fmax - state->RF_LO)/1000)*4/((Fmax-Fmin)/1000)) + 1 ;\n\tstatus += MXL_ControlWrite(fe, RFSYN_LPF_R, E5A);\n\n\t \n\tstatus += MXL_ControlWrite(fe, CHCAL_EN_INT_RF, ((E5 == 0) ? 1 : 0));\n\t \n\n\t \n\tif (state->TG_LO < 33000000UL)\n\t\treturn -1;\n\n\tFminBin = 33000000UL ;\n\tFmaxBin = 50000000UL ;\n\tif (state->TG_LO >= FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x6);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x0);\n\t\tdivider_val = 36 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 50000000UL ;\n\tFmaxBin = 67000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x1);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x0);\n\t\tdivider_val = 24 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 67000000UL ;\n\tFmaxBin = 100000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0xC);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x2);\n\t\tdivider_val = 18 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 100000000UL ;\n\tFmaxBin = 150000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x8);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x2);\n\t\tdivider_val = 12 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 150000000UL ;\n\tFmaxBin = 200000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x0);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x2);\n\t\tdivider_val = 8 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 200000000UL ;\n\tFmaxBin = 300000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x8);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x3);\n\t\tdivider_val = 6 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 300000000UL ;\n\tFmaxBin = 400000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x0);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x3);\n\t\tdivider_val = 4 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 400000000UL ;\n\tFmaxBin = 600000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x8);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x7);\n\t\tdivider_val = 3 ;\n\t\tFmax = FmaxBin ;\n\t\tFmin = FminBin ;\n\t}\n\tFminBin = 600000000UL ;\n\tFmaxBin = 900000000UL ;\n\tif (state->TG_LO > FminBin && state->TG_LO <= FmaxBin) {\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_DIVVAL,\t0x0);\n\t\tstatus += MXL_ControlWrite(fe, TG_LO_SELVAL,\t0x7);\n\t\tdivider_val = 2 ;\n\t}\n\n\t \n\ttg_divval = (state->TG_LO*divider_val/100000) *\n\t\t(MXL_Ceiling(state->Fxtal, 1000000) * 100) /\n\t\t(state->Fxtal/1000);\n\n\tstatus += MXL_ControlWrite(fe, TG_DIV_VAL, tg_divval);\n\n\tif (state->TG_LO > 600000000UL)\n\t\tstatus += MXL_ControlWrite(fe, TG_DIV_VAL, tg_divval + 1);\n\n\tFmax = 1800000000UL ;\n\tFmin = 1200000000UL ;\n\n\t \n\t \n\tFref_TG = (state->Fxtal/1000) / MXL_Ceiling(state->Fxtal, 1000000);\n\n\t \n\tFvco = (state->TG_LO/10000) * divider_val * Fref_TG;\n\n\ttg_lo = (((Fmax/10 - Fvco)/100)*32) / ((Fmax-Fmin)/1000)+8;\n\n\t \n\n\tstatus += MXL_ControlWrite(fe, TG_VCO_BIAS , tg_lo);\n\n\t \n\tif (state->Mod_Type == MXL_QAM) {\n\t\tif (state->config->qam_gain != 0)\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN,\n\t\t\t\t\t\t   state->config->qam_gain);\n\t\telse if (state->RF_IN < 680000000)\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 3);\n\t\telse\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 2);\n\t}\n\n\t \n\tif (state->TF_Type == MXL_TF_OFF) {\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\tstatus += MXL_SetGPIO(fe, 3, 1);  \n\t\tstatus += MXL_SetGPIO(fe, 1, 1);  \n\t\tstatus += MXL_SetGPIO(fe, 4, 1);  \n\t}\n\n\tif (state->TF_Type == MXL_TF_C)   {\n\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_A, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 150000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t}\n\t\tif (state->RF_IN >= 150000000 && state->RF_IN < 280000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t}\n\t\tif (state->RF_IN >= 280000000 && state->RF_IN < 360000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t}\n\t\tif (state->RF_IN >= 360000000 && state->RF_IN < 560000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t}\n\t\tif (state->RF_IN >= 560000000 && state->RF_IN < 580000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 29);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t}\n\t\tif (state->RF_IN >= 580000000 && state->RF_IN < 630000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t}\n\t\tif (state->RF_IN >= 630000000 && state->RF_IN < 700000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 16);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t}\n\t\tif (state->RF_IN >= 700000000 && state->RF_IN < 760000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 7);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t}\n\t\tif (state->RF_IN >= 760000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_C_H) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_A, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 150000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t}\n\t\tif (state->RF_IN >= 150000000 && state->RF_IN < 280000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t}\n\t\tif (state->RF_IN >= 280000000 && state->RF_IN < 360000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t}\n\t\tif (state->RF_IN >= 360000000 && state->RF_IN < 560000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t}\n\t\tif (state->RF_IN >= 560000000 && state->RF_IN < 580000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t}\n\t\tif (state->RF_IN >= 580000000 && state->RF_IN < 630000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t}\n\t\tif (state->RF_IN >= 630000000 && state->RF_IN < 700000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t}\n\t\tif (state->RF_IN >= 700000000 && state->RF_IN < 760000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t}\n\t\tif (state->RF_IN >= 760000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_D) {  \n\n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 174000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 174000000 && state->RF_IN < 250000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 250000000 && state->RF_IN < 310000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 310000000 && state->RF_IN < 360000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 360000000 && state->RF_IN < 470000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 470000000 && state->RF_IN < 640000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 640000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_D_L) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_A, 0);\n\n\t\t \n\t\tif (state->RF_IN >= 471000000 &&\n\t\t\t(state->RF_IN - 471000000)%6000000 != 0) {\n\t\t\t \n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, AGC_IF, 10);\n\t\t} else {\n\t\t\t \n\t\t\tif (state->RF_IN >= 43000000 &&\n\t\t\t\tstate->RF_IN < 140000000) {\n\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 140000000 &&\n\t\t\t\tstate->RF_IN < 240000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 240000000 &&\n\t\t\t\tstate->RF_IN < 340000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 340000000 &&\n\t\t\t\tstate->RF_IN < 430000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 430000000 &&\n\t\t\t\tstate->RF_IN < 470000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 470000000 &&\n\t\t\t\tstate->RF_IN < 570000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 570000000 &&\n\t\t\t\tstate->RF_IN < 620000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 620000000 &&\n\t\t\t\tstate->RF_IN < 760000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t\tif (state->RF_IN >= 760000000 &&\n\t\t\t\tstate->RF_IN <= 900000000) {\n\t\t\t\tstatus += MXL_ControlWrite(fe, DAC_A_ENABLE, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_E)   {\n\n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 174000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 174000000 && state->RF_IN < 250000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 250000000 && state->RF_IN < 310000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 310000000 && state->RF_IN < 360000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 360000000 && state->RF_IN < 470000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 470000000 && state->RF_IN < 640000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 640000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_F) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 160000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 160000000 && state->RF_IN < 210000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 210000000 && state->RF_IN < 300000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 300000000 && state->RF_IN < 390000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 390000000 && state->RF_IN < 515000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 515000000 && state->RF_IN < 650000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 650000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_E_2) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 174000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 174000000 && state->RF_IN < 250000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 250000000 && state->RF_IN < 350000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 350000000 && state->RF_IN < 400000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 400000000 && state->RF_IN < 570000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 570000000 && state->RF_IN < 770000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 770000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_G) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\tif (state->RF_IN >= 50000000 && state->RF_IN < 190000000) {\n\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 190000000 && state->RF_IN < 280000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 280000000 && state->RF_IN < 350000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 350000000 && state->RF_IN < 400000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 400000000 && state->RF_IN < 470000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 470000000 && state->RF_IN < 640000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 640000000 && state->RF_IN < 820000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 820000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t}\n\n\tif (state->TF_Type == MXL_TF_E_NA) {\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, DAC_DIN_B, 0);\n\n\t\t \n\t\tif (state->RF_IN >= 471000000 &&\n\t\t\t(state->RF_IN - 471000000)%6000000 != 0) {\n\n\t\t\t \n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTSYNTHCALIF, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, SEQ_EXTDCCAL, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFA_ENCLKRFAGC, 1);\n\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFH, 5);\n\t\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REF, 3);\n\t\t\tstatus += MXL_ControlWrite(fe, RFA_RSSI_REFL, 2);\n\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 3);\n\t\t} else {\n\t\t \n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, AGC_EN_RSSI, 0);\n\n\t\t \n\t\tstatus += MXL_ControlWrite(fe, RFSYN_CHP_GAIN, 5);\n\n\n\t\tif (state->RF_IN >= 43000000 && state->RF_IN < 174000000) {\n\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 174000000 && state->RF_IN < 250000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 250000000 && state->RF_IN < 350000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\tif (state->RF_IN >= 350000000 && state->RF_IN < 400000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 400000000 && state->RF_IN < 570000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 0);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 570000000 && state->RF_IN < 770000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 0);\n\t\t}\n\t\tif (state->RF_IN >= 770000000 && state->RF_IN <= 900000000) {\n\t\t\tstatus += MXL_ControlWrite(fe, DAC_B_ENABLE, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 4, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 1, 1);\n\t\t\tstatus += MXL_SetGPIO(fe, 3, 1);\n\t\t}\n\t\t}\n\t}\n\treturn status ;\n}\n\nstatic u16 MXL_SetGPIO(struct dvb_frontend *fe, u8 GPIO_Num, u8 GPIO_Val)\n{\n\tu16 status = 0;\n\n\tif (GPIO_Num == 1)\n\t\tstatus += MXL_ControlWrite(fe, GPIO_1B, GPIO_Val ? 0 : 1);\n\n\t \n\n\tif (GPIO_Num == 3) {\n\t\tif (GPIO_Val == 1) {\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3B, 0);\n\t\t}\n\t\tif (GPIO_Val == 0) {\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3B, 1);\n\t\t}\n\t\tif (GPIO_Val == 3) {  \n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_3B, 1);\n\t\t}\n\t}\n\tif (GPIO_Num == 4) {\n\t\tif (GPIO_Val == 1) {\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4B, 0);\n\t\t}\n\t\tif (GPIO_Val == 0) {\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4B, 1);\n\t\t}\n\t\tif (GPIO_Val == 3) {  \n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, GPIO_4B, 1);\n\t\t}\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_ControlWrite(struct dvb_frontend *fe, u16 ControlNum, u32 value)\n{\n\tu16 status = 0;\n\n\t \n\t \n\tstatus += MXL_ControlWrite_Group(fe, ControlNum, value, 1);\n\t \n\tstatus += MXL_ControlWrite_Group(fe, ControlNum, value, 2);\n#ifdef _MXL_INTERNAL\n\t \n\tstatus += MXL_ControlWrite_Group(fe, ControlNum, value, 3);\n#endif\n\treturn status;\n}\n\nstatic u16 MXL_ControlWrite_Group(struct dvb_frontend *fe, u16 controlNum,\n\tu32 value, u16 controlGroup)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 i, j;\n\tu32 highLimit;\n\n\tif (controlGroup == 1)   {\n\n\t\tfor (i = 0; i < state->Init_Ctrl_Num; i++) {\n\n\t\t\tif (controlNum == state->Init_Ctrl[i].Ctrl_Num) {\n\n\t\t\t\tu16 size = min_t(u16, state->Init_Ctrl[i].size,\n\t\t\t\t\t       ARRAY_SIZE(state->Init_Ctrl[i].val));\n\t\t\t\thighLimit = 1 << size;\n\t\t\t\tif (value < highLimit) {\n\t\t\t\t\tfor (j = 0; j < size; j++) {\n\t\t\t\t\t\tstate->Init_Ctrl[i].val[j] = (u8)((value >> j) & 0x01);\n\t\t\t\t\t\tMXL_RegWriteBit(fe, (u8)(state->Init_Ctrl[i].addr[j]),\n\t\t\t\t\t\t\t(u8)(state->Init_Ctrl[i].bit[j]),\n\t\t\t\t\t\t\t(u8)((value>>j) & 0x01));\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\tif (controlGroup == 2)   {\n\n\t\tfor (i = 0; i < state->CH_Ctrl_Num; i++) {\n\n\t\t\tif (controlNum == state->CH_Ctrl[i].Ctrl_Num) {\n\n\t\t\t\tu16 size = min_t(u16, state->CH_Ctrl[i].size,\n\t\t\t\t\t       ARRAY_SIZE(state->CH_Ctrl[i].val));\n\t\t\t\thighLimit = 1 << size;\n\t\t\t\tif (value < highLimit) {\n\t\t\t\t\tfor (j = 0; j < size; j++) {\n\t\t\t\t\t\tstate->CH_Ctrl[i].val[j] = (u8)((value >> j) & 0x01);\n\t\t\t\t\t\tMXL_RegWriteBit(fe, (u8)(state->CH_Ctrl[i].addr[j]),\n\t\t\t\t\t\t\t(u8)(state->CH_Ctrl[i].bit[j]),\n\t\t\t\t\t\t\t(u8)((value>>j) & 0x01));\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n#ifdef _MXL_INTERNAL\n\tif (controlGroup == 3)   {\n\n\t\tfor (i = 0; i < state->MXL_Ctrl_Num; i++) {\n\n\t\t\tif (controlNum == state->MXL_Ctrl[i].Ctrl_Num) {\n\n\t\t\t\thighLimit = (1 << state->MXL_Ctrl[i].size);\n\t\t\t\tif (value < highLimit) {\n\t\t\t\t\tfor (j = 0; j < state->MXL_Ctrl[i].size; j++) {\n\t\t\t\t\t\tstate->MXL_Ctrl[i].val[j] = (u8)((value >> j) & 0x01);\n\t\t\t\t\t\tMXL_RegWriteBit(fe, (u8)(state->MXL_Ctrl[i].addr[j]),\n\t\t\t\t\t\t\t(u8)(state->MXL_Ctrl[i].bit[j]),\n\t\t\t\t\t\t\t(u8)((value>>j) & 0x01));\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n#endif\n\treturn 0 ;  \n}\n\nstatic u16 MXL_RegRead(struct dvb_frontend *fe, u8 RegNum, u8 *RegVal)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tint i ;\n\n\tfor (i = 0; i < 104; i++) {\n\t\tif (RegNum == state->TunerRegs[i].Reg_Num) {\n\t\t\t*RegVal = (u8)(state->TunerRegs[i].Reg_Val);\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\treturn 1;\n}\n\nstatic u16 MXL_ControlRead(struct dvb_frontend *fe, u16 controlNum, u32 *value)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu32 ctrlVal ;\n\tu16 i, k ;\n\n\tfor (i = 0; i < state->Init_Ctrl_Num ; i++) {\n\n\t\tif (controlNum == state->Init_Ctrl[i].Ctrl_Num) {\n\n\t\t\tctrlVal = 0;\n\t\t\tfor (k = 0; k < state->Init_Ctrl[i].size; k++)\n\t\t\t\tctrlVal += state->Init_Ctrl[i].val[k] * (1<<k);\n\t\t\t*value = ctrlVal;\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tfor (i = 0; i < state->CH_Ctrl_Num ; i++) {\n\n\t\tif (controlNum == state->CH_Ctrl[i].Ctrl_Num) {\n\n\t\t\tctrlVal = 0;\n\t\t\tfor (k = 0; k < state->CH_Ctrl[i].size; k++)\n\t\t\t\tctrlVal += state->CH_Ctrl[i].val[k] * (1 << k);\n\t\t\t*value = ctrlVal;\n\t\t\treturn 0;\n\n\t\t}\n\t}\n\n#ifdef _MXL_INTERNAL\n\tfor (i = 0; i < state->MXL_Ctrl_Num ; i++) {\n\n\t\tif (controlNum == state->MXL_Ctrl[i].Ctrl_Num) {\n\n\t\t\tctrlVal = 0;\n\t\t\tfor (k = 0; k < state->MXL_Ctrl[i].size; k++)\n\t\t\t\tctrlVal += state->MXL_Ctrl[i].val[k] * (1<<k);\n\t\t\t*value = ctrlVal;\n\t\t\treturn 0;\n\n\t\t}\n\t}\n#endif\n\treturn 1;\n}\n\nstatic void MXL_RegWriteBit(struct dvb_frontend *fe, u8 address, u8 bit,\n\tu8 bitVal)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tint i ;\n\n\tconst u8 AND_MAP[8] = {\n\t\t0xFE, 0xFD, 0xFB, 0xF7,\n\t\t0xEF, 0xDF, 0xBF, 0x7F } ;\n\n\tconst u8 OR_MAP[8] = {\n\t\t0x01, 0x02, 0x04, 0x08,\n\t\t0x10, 0x20, 0x40, 0x80 } ;\n\n\tfor (i = 0; i < state->TunerRegs_Num; i++) {\n\t\tif (state->TunerRegs[i].Reg_Num == address) {\n\t\t\tif (bitVal)\n\t\t\t\tstate->TunerRegs[i].Reg_Val |= OR_MAP[bit];\n\t\t\telse\n\t\t\t\tstate->TunerRegs[i].Reg_Val &= AND_MAP[bit];\n\t\t\tbreak ;\n\t\t}\n\t}\n}\n\nstatic u32 MXL_Ceiling(u32 value, u32 resolution)\n{\n\treturn value / resolution + (value % resolution > 0 ? 1 : 0);\n}\n\n \nstatic u16 MXL_GetInitRegister(struct dvb_frontend *fe, u8 *RegNum,\n\tu8 *RegVal, int *count)\n{\n\tu16 status = 0;\n\tint i ;\n\n\tstatic const u8 RegAddr[] = {\n\t\t11, 12, 13, 22, 32, 43, 44, 53, 56, 59, 73,\n\t\t76, 77, 91, 134, 135, 137, 147,\n\t\t156, 166, 167, 168, 25\n\t};\n\n\t*count = ARRAY_SIZE(RegAddr);\n\n\tstatus += MXL_BlockInit(fe);\n\n\tfor (i = 0 ; i < *count; i++) {\n\t\tRegNum[i] = RegAddr[i];\n\t\tstatus += MXL_RegRead(fe, RegNum[i], &RegVal[i]);\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_GetCHRegister(struct dvb_frontend *fe, u8 *RegNum, u8 *RegVal,\n\tint *count)\n{\n\tu16 status = 0;\n\tint i ;\n\n \n#ifdef _MXL_PRODUCTION\n\tstatic const u8 RegAddr[] = {\n\t\t14, 15, 16, 17, 22, 43, 65, 68, 69, 70, 73, 92, 93, 106,\n\t\t107, 108, 109, 110, 111, 112, 136, 138, 149, 77, 166, 167, 168\n\t};\n#else\n\tstatic const u8 RegAddr[] = {\n\t\t14, 15, 16, 17, 22, 43, 68, 69, 70, 73, 92, 93, 106,\n\t\t107, 108, 109, 110, 111, 112, 136, 138, 149, 77, 166, 167, 168\n\t};\n\t \n#endif\n\n\t*count = ARRAY_SIZE(RegAddr);\n\n\tfor (i = 0 ; i < *count; i++) {\n\t\tRegNum[i] = RegAddr[i];\n\t\tstatus += MXL_RegRead(fe, RegNum[i], &RegVal[i]);\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_GetCHRegister_ZeroIF(struct dvb_frontend *fe, u8 *RegNum,\n\tu8 *RegVal, int *count)\n{\n\tu16 status = 0;\n\tint i;\n\n\tstatic const u8 RegAddr[] = {43, 136};\n\n\t*count = ARRAY_SIZE(RegAddr);\n\n\tfor (i = 0; i < *count; i++) {\n\t\tRegNum[i] = RegAddr[i];\n\t\tstatus += MXL_RegRead(fe, RegNum[i], &RegVal[i]);\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_GetMasterControl(u8 *MasterReg, int state)\n{\n\tif (state == 1)  \n\t\t*MasterReg = 0xF3;\n\tif (state == 2)  \n\t\t*MasterReg = 0x41;\n\tif (state == 3)  \n\t\t*MasterReg = 0xB1;\n\tif (state == 4)  \n\t\t*MasterReg = 0xF1;\n\n\treturn 0;\n}\n\n#ifdef _MXL_PRODUCTION\nstatic u16 MXL_VCORange_Test(struct dvb_frontend *fe, int VCO_Range)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 status = 0 ;\n\n\tif (VCO_Range == 1) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_DIV, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_DIVM, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS, 1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ, 0);\n\t\tif (state->Mode == 0 && state->IF_Mode == 1) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 56);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 180224);\n\t\t}\n\t\tif (state->Mode == 0 && state->IF_Mode == 0) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 56);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 222822);\n\t\t}\n\t\tif (state->Mode == 1)   {\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 56);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 229376);\n\t\t}\n\t}\n\n\tif (VCO_Range == 2) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_DIV, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_DIVM, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS, 1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 41);\n\t\tif (state->Mode == 0 && state->IF_Mode == 1) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 42);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 206438);\n\t\t}\n\t\tif (state->Mode == 0 && state->IF_Mode == 0) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 42);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 206438);\n\t\t}\n\t\tif (state->Mode == 1)   {\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 1);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 41);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 16384);\n\t\t}\n\t}\n\n\tif (VCO_Range == 3) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_DIV, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_DIVM, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS, 1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 42);\n\t\tif (state->Mode == 0 && state->IF_Mode == 1) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 44);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 173670);\n\t\t}\n\t\tif (state->Mode == 0 && state->IF_Mode == 0) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 44);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 173670);\n\t\t}\n\t\tif (state->Mode == 1)   {\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 8);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 42);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 245760);\n\t\t}\n\t}\n\n\tif (VCO_Range == 4) {\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_DIV, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_EN_OUTMUX, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_DIVM, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_DIVM, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_OUT, 1);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_RF_DIV_BIAS, 1);\n\t\tstatus += MXL_ControlWrite(fe, DN_SEL_FREQ, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 27);\n\t\tif (state->Mode == 0 && state->IF_Mode == 1) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 27);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 206438);\n\t\t}\n\t\tif (state->Mode == 0 && state->IF_Mode == 0) {\n\t\t\t \n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 27);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 206438);\n\t\t}\n\t\tif (state->Mode == 1)   {\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_SEL_VCO_HI, 0);\n\t\t\tstatus += MXL_ControlWrite(fe, RFSYN_VCO_BIAS, 40);\n\t\t\tstatus += MXL_ControlWrite(fe, CHCAL_INT_MOD_RF, 27);\n\t\t\tstatus += MXL_ControlWrite(fe,\n\t\t\t\tCHCAL_FRAC_MOD_RF, 212992);\n\t\t}\n\t}\n\n\treturn status;\n}\n\nstatic u16 MXL_Hystersis_Test(struct dvb_frontend *fe, int Hystersis)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu16 status = 0;\n\n\tif (Hystersis == 1)\n\t\tstatus += MXL_ControlWrite(fe, DN_BYPASS_AGC_I2C, 1);\n\n\treturn status;\n}\n#endif\n \n\n \nstatic int mxl5005s_reset(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tint ret = 0;\n\n\tu8 buf[2] = { 0xff, 0x00 };\n\tstruct i2c_msg msg = { .addr = state->config->i2c_address, .flags = 0,\n\t\t\t       .buf = buf, .len = 2 };\n\n\tdprintk(2, \"%s()\\n\", __func__);\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 1);\n\n\tif (i2c_transfer(state->i2c, &msg, 1) != 1) {\n\t\tprintk(KERN_WARNING \"mxl5005s I2C reset failed\\n\");\n\t\tret = -EREMOTEIO;\n\t}\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 0);\n\n\treturn ret;\n}\n\n \nstatic int mxl5005s_writereg(struct dvb_frontend *fe, u8 reg, u8 val, int latch)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu8 buf[3] = { reg, val, MXL5005S_LATCH_BYTE };\n\tstruct i2c_msg msg = { .addr = state->config->i2c_address, .flags = 0,\n\t\t\t       .buf = buf, .len = 3 };\n\n\tif (latch == 0)\n\t\tmsg.len = 2;\n\n\tdprintk(2, \"%s(0x%x, 0x%x, 0x%x)\\n\", __func__, reg, val, msg.addr);\n\n\tif (i2c_transfer(state->i2c, &msg, 1) != 1) {\n\t\tprintk(KERN_WARNING \"mxl5005s I2C write failed\\n\");\n\t\treturn -EREMOTEIO;\n\t}\n\treturn 0;\n}\n\nstatic int mxl5005s_writeregs(struct dvb_frontend *fe, u8 *addrtable,\n\tu8 *datatable, u8 len)\n{\n\tint ret = 0, i;\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 1);\n\n\tfor (i = 0 ; i < len-1; i++) {\n\t\tret = mxl5005s_writereg(fe, addrtable[i], datatable[i], 0);\n\t\tif (ret < 0)\n\t\t\tbreak;\n\t}\n\n\tret = mxl5005s_writereg(fe, addrtable[i], datatable[i], 1);\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 0);\n\n\treturn ret;\n}\n\nstatic int mxl5005s_init(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\n\tdprintk(1, \"%s()\\n\", __func__);\n\tstate->current_mode = MXL_QAM;\n\treturn mxl5005s_reconfigure(fe, MXL_QAM, MXL5005S_BANDWIDTH_6MHZ);\n}\n\nstatic int mxl5005s_reconfigure(struct dvb_frontend *fe, u32 mod_type,\n\tu32 bandwidth)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tu8 *AddrTable;\n\tu8 *ByteTable;\n\tint TableLen;\n\n\tdprintk(1, \"%s(type=%d, bw=%d)\\n\", __func__, mod_type, bandwidth);\n\n\tmxl5005s_reset(fe);\n\n\tAddrTable = kcalloc(MXL5005S_REG_WRITING_TABLE_LEN_MAX, sizeof(u8),\n\t\t\t    GFP_KERNEL);\n\tif (!AddrTable)\n\t\treturn -ENOMEM;\n\n\tByteTable = kcalloc(MXL5005S_REG_WRITING_TABLE_LEN_MAX, sizeof(u8),\n\t\t\t    GFP_KERNEL);\n\tif (!ByteTable) {\n\t\tkfree(AddrTable);\n\t\treturn -ENOMEM;\n\t}\n\n\t \n\tMXL_GetMasterControl(ByteTable, MC_SYNTH_RESET);\n\tAddrTable[0] = MASTER_CONTROL_ADDR;\n\tByteTable[0] |= state->config->AgcMasterByte;\n\n\tmxl5005s_writeregs(fe, AddrTable, ByteTable, 1);\n\n\tmxl5005s_AssignTunerMode(fe, mod_type, bandwidth);\n\n\t \n\tMXL_GetInitRegister(fe, AddrTable, ByteTable, &TableLen);\n\n\tmxl5005s_writeregs(fe, AddrTable, ByteTable, TableLen);\n\n\tkfree(AddrTable);\n\tkfree(ByteTable);\n\n\treturn 0;\n}\n\nstatic int mxl5005s_AssignTunerMode(struct dvb_frontend *fe, u32 mod_type,\n\tu32 bandwidth)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tstruct mxl5005s_config *c = state->config;\n\n\tInitTunerControls(fe);\n\n\t \n\tMXL5005_TunerConfig(\n\t\tfe,\n\t\tc->mod_mode,\n\t\tc->if_mode,\n\t\tbandwidth,\n\t\tc->if_freq,\n\t\tc->xtal_freq,\n\t\tc->agc_mode,\n\t\tc->top,\n\t\tc->output_load,\n\t\tc->clock_out,\n\t\tc->div_out,\n\t\tc->cap_select,\n\t\tc->rssi_enable,\n\t\tmod_type,\n\t\tc->tracking_filter);\n\n\treturn 0;\n}\n\nstatic int mxl5005s_set_params(struct dvb_frontend *fe)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tstruct dtv_frontend_properties *c = &fe->dtv_property_cache;\n\tu32 delsys = c->delivery_system;\n\tu32 bw = c->bandwidth_hz;\n\tu32 req_mode, req_bw = 0;\n\tint ret;\n\n\tdprintk(1, \"%s()\\n\", __func__);\n\n\tswitch (delsys) {\n\tcase SYS_ATSC:\n\t\treq_mode = MXL_ATSC;\n\t\treq_bw  = MXL5005S_BANDWIDTH_6MHZ;\n\t\tbreak;\n\tcase SYS_DVBC_ANNEX_B:\n\t\treq_mode = MXL_QAM;\n\t\treq_bw  = MXL5005S_BANDWIDTH_6MHZ;\n\t\tbreak;\n\tdefault:\t \n\t\treq_mode = MXL_DVBT;\n\t\tswitch (bw) {\n\t\tcase 6000000:\n\t\t\treq_bw = MXL5005S_BANDWIDTH_6MHZ;\n\t\t\tbreak;\n\t\tcase 7000000:\n\t\t\treq_bw = MXL5005S_BANDWIDTH_7MHZ;\n\t\t\tbreak;\n\t\tcase 8000000:\n\t\tcase 0:\n\t\t\treq_bw = MXL5005S_BANDWIDTH_8MHZ;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn -EINVAL;\n\t\t}\n\t}\n\n\t \n\tif (req_mode != state->current_mode ||\n\t    req_bw != state->Chan_Bandwidth) {\n\t\tstate->current_mode = req_mode;\n\t\tret = mxl5005s_reconfigure(fe, req_mode, req_bw);\n\n\t} else\n\t\tret = 0;\n\n\tif (ret == 0) {\n\t\tdprintk(1, \"%s() freq=%d\\n\", __func__, c->frequency);\n\t\tret = mxl5005s_SetRfFreqHz(fe, c->frequency);\n\t}\n\n\treturn ret;\n}\n\nstatic int mxl5005s_get_frequency(struct dvb_frontend *fe, u32 *frequency)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tdprintk(1, \"%s()\\n\", __func__);\n\n\t*frequency = state->RF_IN;\n\n\treturn 0;\n}\n\nstatic int mxl5005s_get_bandwidth(struct dvb_frontend *fe, u32 *bandwidth)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tdprintk(1, \"%s()\\n\", __func__);\n\n\t*bandwidth = state->Chan_Bandwidth;\n\n\treturn 0;\n}\n\nstatic int mxl5005s_get_if_frequency(struct dvb_frontend *fe, u32 *frequency)\n{\n\tstruct mxl5005s_state *state = fe->tuner_priv;\n\tdprintk(1, \"%s()\\n\", __func__);\n\n\t*frequency = state->IF_OUT;\n\n\treturn 0;\n}\n\nstatic void mxl5005s_release(struct dvb_frontend *fe)\n{\n\tdprintk(1, \"%s()\\n\", __func__);\n\tkfree(fe->tuner_priv);\n\tfe->tuner_priv = NULL;\n}\n\nstatic const struct dvb_tuner_ops mxl5005s_tuner_ops = {\n\t.info = {\n\t\t.name              = \"MaxLinear MXL5005S\",\n\t\t.frequency_min_hz  =  48 * MHz,\n\t\t.frequency_max_hz  = 860 * MHz,\n\t\t.frequency_step_hz =  50 * kHz,\n\t},\n\n\t.release       = mxl5005s_release,\n\t.init          = mxl5005s_init,\n\n\t.set_params    = mxl5005s_set_params,\n\t.get_frequency = mxl5005s_get_frequency,\n\t.get_bandwidth = mxl5005s_get_bandwidth,\n\t.get_if_frequency = mxl5005s_get_if_frequency,\n};\n\nstruct dvb_frontend *mxl5005s_attach(struct dvb_frontend *fe,\n\t\t\t\t     struct i2c_adapter *i2c,\n\t\t\t\t     struct mxl5005s_config *config)\n{\n\tstruct mxl5005s_state *state = NULL;\n\tdprintk(1, \"%s()\\n\", __func__);\n\n\tstate = kzalloc(sizeof(struct mxl5005s_state), GFP_KERNEL);\n\tif (state == NULL)\n\t\treturn NULL;\n\n\tstate->frontend = fe;\n\tstate->config = config;\n\tstate->i2c = i2c;\n\n\tprintk(KERN_INFO \"MXL5005S: Attached at address 0x%02x\\n\",\n\t\tconfig->i2c_address);\n\n\tmemcpy(&fe->ops.tuner_ops, &mxl5005s_tuner_ops,\n\t\tsizeof(struct dvb_tuner_ops));\n\n\tfe->tuner_priv = state;\n\treturn fe;\n}\nEXPORT_SYMBOL_GPL(mxl5005s_attach);\n\nMODULE_DESCRIPTION(\"MaxLinear MXL5005S silicon tuner driver\");\nMODULE_AUTHOR(\"Steven Toth\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}