{
  "module_name": "msp3400-driver.h",
  "hash_id": "ebd9bdd199a06326c835e507c176e60c26638a82e9af7abfdc335bce1a98fc0b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/i2c/msp3400-driver.h",
  "human_readable_source": " \n \n\n#ifndef MSP3400_DRIVER_H\n#define MSP3400_DRIVER_H\n\n#include <media/drv-intf/msp3400.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-ctrls.h>\n#include <media/v4l2-mc.h>\n\n \n\n \n#define MSP_CARRIER(freq) ((int)((float)(freq / 18.432) * (1 << 24)))\n\n#define MSP_MODE_AM_DETECT   0\n#define MSP_MODE_FM_RADIO    2\n#define MSP_MODE_FM_TERRA    3\n#define MSP_MODE_FM_SAT      4\n#define MSP_MODE_FM_NICAM1   5\n#define MSP_MODE_FM_NICAM2   6\n#define MSP_MODE_AM_NICAM    7\n#define MSP_MODE_BTSC        8\n#define MSP_MODE_EXTERN      9\n\n#define SCART_IN1     0\n#define SCART_IN2     1\n#define SCART_IN3     2\n#define SCART_IN4     3\n#define SCART_IN1_DA  4\n#define SCART_IN2_DA  5\n#define SCART_MONO    6\n#define SCART_MUTE    7\n\n#define SCART_DSP_IN  0\n#define SCART1_OUT    1\n#define SCART2_OUT    2\n\n#define OPMODE_AUTO       -1\n#define OPMODE_MANUAL      0\n#define OPMODE_AUTODETECT  1    \n#define OPMODE_AUTOSELECT  2    \n\n \nextern int msp_debug;\nextern bool msp_once;\nextern bool msp_amsound;\nextern int msp_standard;\nextern bool msp_dolby;\nextern int msp_stereo_thresh;\n\nenum msp3400_pads {\n\tMSP3400_PAD_IF_INPUT,\n\tMSP3400_PAD_OUT,\n\tMSP3400_NUM_PADS\n};\n\nstruct msp_state {\n\tstruct v4l2_subdev sd;\n\tstruct v4l2_ctrl_handler hdl;\n\tint rev1, rev2;\n\tint ident;\n\tu8 has_nicam;\n\tu8 has_radio;\n\tu8 has_headphones;\n\tu8 has_ntsc_jp_d_k3;\n\tu8 has_scart2;\n\tu8 has_scart3;\n\tu8 has_scart4;\n\tu8 has_scart2_out;\n\tu8 has_scart2_out_volume;\n\tu8 has_i2s_conf;\n\tu8 has_subwoofer;\n\tu8 has_sound_processing;\n\tu8 has_virtual_dolby_surround;\n\tu8 has_dolby_pro_logic;\n\tu8 force_btsc;\n\n\tint radio;\n\tint opmode;\n\tint std;\n\tint mode;\n\tv4l2_std_id v4l2_std, detected_std;\n\tint nicam_on;\n\tint acb;\n\tint in_scart;\n\tint i2s_mode;\n\tint main, second;\t \n\tint input;\n\tu32 route_in;\n\tu32 route_out;\n\n\t \n\tint audmode;\n\tint rxsubchans;\n\n\tstruct {\n\t\t \n\t\tstruct v4l2_ctrl *volume;\n\t\tstruct v4l2_ctrl *muted;\n\t};\n\n\tint scan_in_progress;\n\n\t \n\tstruct task_struct   *kthread;\n\twait_queue_head_t    wq;\n\tunsigned int         restart:1;\n\tunsigned int         watch_stereo:1;\n\n#if IS_ENABLED(CONFIG_MEDIA_CONTROLLER)\n\tstruct media_pad pads[MSP3400_NUM_PADS];\n#endif\n};\n\nstatic inline struct msp_state *to_state(struct v4l2_subdev *sd)\n{\n\treturn container_of(sd, struct msp_state, sd);\n}\n\nstatic inline struct msp_state *ctrl_to_state(struct v4l2_ctrl *ctrl)\n{\n\treturn container_of(ctrl->handler, struct msp_state, hdl);\n}\n\n \nint msp_write_dem(struct i2c_client *client, int addr, int val);\nint msp_write_dsp(struct i2c_client *client, int addr, int val);\nint msp_read_dem(struct i2c_client *client, int addr);\nint msp_read_dsp(struct i2c_client *client, int addr);\nint msp_reset(struct i2c_client *client);\nvoid msp_set_scart(struct i2c_client *client, int in, int out);\nvoid msp_update_volume(struct msp_state *state);\nint msp_sleep(struct msp_state *state, int timeout);\n\n \nconst char *msp_standard_std_name(int std);\nvoid msp_set_audmode(struct i2c_client *client);\nint msp_detect_stereo(struct i2c_client *client);\nint msp3400c_thread(void *data);\nint msp3410d_thread(void *data);\nint msp34xxg_thread(void *data);\nvoid msp3400c_set_mode(struct i2c_client *client, int mode);\nvoid msp3400c_set_carrier(struct i2c_client *client, int cdo1, int cdo2);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}