{
  "module_name": "cec-pin-priv.h",
  "hash_id": "1c7a724ecdcf3da38710042d2f89a16baee13d1e415be9f3f7dc66404f732bcd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/cec/core/cec-pin-priv.h",
  "human_readable_source": " \n \n\n#ifndef LINUX_CEC_PIN_PRIV_H\n#define LINUX_CEC_PIN_PRIV_H\n\n#include <linux/types.h>\n#include <linux/atomic.h>\n#include <media/cec-pin.h>\n\n#define call_pin_op(pin, op, arg...)\t\t\t\t\t\\\n\t((pin && pin->ops->op && !pin->adap->devnode.unregistered) ?\t\\\n\t pin->ops->op(pin->adap, ## arg) : 0)\n\n#define call_void_pin_op(pin, op, arg...)\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (pin && pin->ops->op &&\t\t\t\t\\\n\t\t    !pin->adap->devnode.unregistered)\t\t\t\\\n\t\t\tpin->ops->op(pin->adap, ## arg);\t\t\\\n\t} while (0)\n\nenum cec_pin_state {\n\t \n\tCEC_ST_OFF,\n\t \n\tCEC_ST_IDLE,\n\n\t \n\n\t \n\tCEC_ST_TX_WAIT,\n\t \n\tCEC_ST_TX_WAIT_FOR_HIGH,\n\t \n\tCEC_ST_TX_START_BIT_LOW,\n\t \n\tCEC_ST_TX_START_BIT_HIGH,\n\t \n\tCEC_ST_TX_START_BIT_HIGH_SHORT,\n\t \n\tCEC_ST_TX_START_BIT_HIGH_LONG,\n\t \n\tCEC_ST_TX_START_BIT_LOW_CUSTOM,\n\t \n\tCEC_ST_TX_START_BIT_HIGH_CUSTOM,\n\t \n\tCEC_ST_TX_DATA_BIT_0_LOW,\n\t \n\tCEC_ST_TX_DATA_BIT_0_HIGH,\n\t \n\tCEC_ST_TX_DATA_BIT_0_HIGH_SHORT,\n\t \n\tCEC_ST_TX_DATA_BIT_0_HIGH_LONG,\n\t \n\tCEC_ST_TX_DATA_BIT_1_LOW,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_SHORT,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_LONG,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_PRE_SAMPLE,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_POST_SAMPLE,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_POST_SAMPLE_SHORT,\n\t \n\tCEC_ST_TX_DATA_BIT_1_HIGH_POST_SAMPLE_LONG,\n\t \n\tCEC_ST_TX_DATA_BIT_LOW_CUSTOM,\n\t \n\tCEC_ST_TX_DATA_BIT_HIGH_CUSTOM,\n\t \n\tCEC_ST_TX_PULSE_LOW_CUSTOM,\n\t \n\tCEC_ST_TX_PULSE_HIGH_CUSTOM,\n\t \n\tCEC_ST_TX_LOW_DRIVE,\n\n\t \n\n\t \n\tCEC_ST_RX_START_BIT_LOW,\n\t \n\tCEC_ST_RX_START_BIT_HIGH,\n\t \n\tCEC_ST_RX_DATA_SAMPLE,\n\t \n\tCEC_ST_RX_DATA_POST_SAMPLE,\n\t \n\tCEC_ST_RX_DATA_WAIT_FOR_LOW,\n\t \n\tCEC_ST_RX_ACK_LOW,\n\t \n\tCEC_ST_RX_ACK_LOW_POST,\n\t \n\tCEC_ST_RX_ACK_HIGH_POST,\n\t \n\tCEC_ST_RX_ACK_FINISH,\n\t \n\tCEC_ST_RX_LOW_DRIVE,\n\n\t \n\tCEC_ST_RX_IRQ,\n\n\t \n\tCEC_PIN_STATES\n};\n\n \n\n \n#define CEC_ERROR_INJ_MODE_OFF\t\t\t\t0\n#define CEC_ERROR_INJ_MODE_ONCE\t\t\t\t1\n#define CEC_ERROR_INJ_MODE_ALWAYS\t\t\t2\n#define CEC_ERROR_INJ_MODE_TOGGLE\t\t\t3\n#define CEC_ERROR_INJ_MODE_MASK\t\t\t\t3ULL\n\n \n#define CEC_ERROR_INJ_RX_NACK_OFFSET\t\t\t0\n#define CEC_ERROR_INJ_RX_LOW_DRIVE_OFFSET\t\t2\n#define CEC_ERROR_INJ_RX_ADD_BYTE_OFFSET\t\t4\n#define CEC_ERROR_INJ_RX_REMOVE_BYTE_OFFSET\t\t6\n#define CEC_ERROR_INJ_RX_ARB_LOST_OFFSET\t\t8\n#define CEC_ERROR_INJ_RX_MASK\t\t\t\t0xffffULL\n\n \n#define CEC_ERROR_INJ_TX_NO_EOM_OFFSET\t\t\t16\n#define CEC_ERROR_INJ_TX_EARLY_EOM_OFFSET\t\t18\n#define CEC_ERROR_INJ_TX_SHORT_BIT_OFFSET\t\t20\n#define CEC_ERROR_INJ_TX_LONG_BIT_OFFSET\t\t22\n#define CEC_ERROR_INJ_TX_CUSTOM_BIT_OFFSET\t\t24\n#define CEC_ERROR_INJ_TX_SHORT_START_OFFSET\t\t26\n#define CEC_ERROR_INJ_TX_LONG_START_OFFSET\t\t28\n#define CEC_ERROR_INJ_TX_CUSTOM_START_OFFSET\t\t30\n#define CEC_ERROR_INJ_TX_LAST_BIT_OFFSET\t\t32\n#define CEC_ERROR_INJ_TX_ADD_BYTES_OFFSET\t\t34\n#define CEC_ERROR_INJ_TX_REMOVE_BYTE_OFFSET\t\t36\n#define CEC_ERROR_INJ_TX_LOW_DRIVE_OFFSET\t\t38\n#define CEC_ERROR_INJ_TX_MASK\t\t\t\t0xffffffffffff0000ULL\n\n#define CEC_ERROR_INJ_RX_LOW_DRIVE_ARG_IDX\t\t0\n#define CEC_ERROR_INJ_RX_ARB_LOST_ARG_IDX\t\t1\n\n#define CEC_ERROR_INJ_TX_ADD_BYTES_ARG_IDX\t\t2\n#define CEC_ERROR_INJ_TX_SHORT_BIT_ARG_IDX\t\t3\n#define CEC_ERROR_INJ_TX_LONG_BIT_ARG_IDX\t\t4\n#define CEC_ERROR_INJ_TX_CUSTOM_BIT_ARG_IDX\t\t5\n#define CEC_ERROR_INJ_TX_LAST_BIT_ARG_IDX\t\t6\n#define CEC_ERROR_INJ_TX_LOW_DRIVE_ARG_IDX\t\t7\n#define CEC_ERROR_INJ_NUM_ARGS\t\t\t\t8\n\n \n#define CEC_ERROR_INJ_OP_ANY\t\t\t\t0x00000100\n\n \n#define CEC_TIM_CUSTOM_DEFAULT\t\t\t\t1000\n\n#define CEC_NUM_PIN_EVENTS\t\t\t\t128\n#define CEC_PIN_EVENT_FL_IS_HIGH\t\t\t(1 << 0)\n#define CEC_PIN_EVENT_FL_DROPPED\t\t\t(1 << 1)\n\n#define CEC_PIN_IRQ_UNCHANGED\t0\n#define CEC_PIN_IRQ_DISABLE\t1\n#define CEC_PIN_IRQ_ENABLE\t2\n\nstruct cec_pin {\n\tstruct cec_adapter\t\t*adap;\n\tconst struct cec_pin_ops\t*ops;\n\tstruct task_struct\t\t*kthread;\n\twait_queue_head_t\t\tkthread_waitq;\n\tstruct hrtimer\t\t\ttimer;\n\tktime_t\t\t\t\tts;\n\tunsigned int\t\t\twait_usecs;\n\tu16\t\t\t\tla_mask;\n\tbool\t\t\t\tmonitor_all;\n\tbool\t\t\t\trx_eom;\n\tbool\t\t\t\tenabled_irq;\n\tbool\t\t\t\tenable_irq_failed;\n\tenum cec_pin_state\t\tstate;\n\tstruct cec_msg\t\t\ttx_msg;\n\tu32\t\t\t\ttx_bit;\n\tbool\t\t\t\ttx_nacked;\n\tu32\t\t\t\ttx_signal_free_time;\n\tbool\t\t\t\ttx_toggle;\n\tstruct cec_msg\t\t\trx_msg;\n\tu32\t\t\t\trx_bit;\n\tbool\t\t\t\trx_toggle;\n\tu32\t\t\t\trx_start_bit_low_too_short_cnt;\n\tu64\t\t\t\trx_start_bit_low_too_short_ts;\n\tu32\t\t\t\trx_start_bit_low_too_short_delta;\n\tu32\t\t\t\trx_start_bit_too_short_cnt;\n\tu64\t\t\t\trx_start_bit_too_short_ts;\n\tu32\t\t\t\trx_start_bit_too_short_delta;\n\tu32\t\t\t\trx_start_bit_too_long_cnt;\n\tu32\t\t\t\trx_data_bit_too_short_cnt;\n\tu64\t\t\t\trx_data_bit_too_short_ts;\n\tu32\t\t\t\trx_data_bit_too_short_delta;\n\tu32\t\t\t\trx_data_bit_too_long_cnt;\n\tu32\t\t\t\trx_low_drive_cnt;\n\n\tstruct cec_msg\t\t\twork_rx_msg;\n\tu8\t\t\t\twork_tx_status;\n\tktime_t\t\t\t\twork_tx_ts;\n\tatomic_t\t\t\twork_irq_change;\n\tatomic_t\t\t\twork_pin_num_events;\n\tunsigned int\t\t\twork_pin_events_wr;\n\tunsigned int\t\t\twork_pin_events_rd;\n\tktime_t\t\t\t\twork_pin_ts[CEC_NUM_PIN_EVENTS];\n\tu8\t\t\t\twork_pin_events[CEC_NUM_PIN_EVENTS];\n\tbool\t\t\t\twork_pin_events_dropped;\n\tu32\t\t\t\twork_pin_events_dropped_cnt;\n\tktime_t\t\t\t\ttimer_ts;\n\tu32\t\t\t\ttimer_cnt;\n\tu32\t\t\t\ttimer_100us_overruns;\n\tu32\t\t\t\ttimer_300us_overruns;\n\tu32\t\t\t\ttimer_max_overrun;\n\tu32\t\t\t\ttimer_sum_overrun;\n\n\tu32\t\t\t\ttx_custom_low_usecs;\n\tu32\t\t\t\ttx_custom_high_usecs;\n\tbool\t\t\t\ttx_ignore_nack_until_eom;\n\tbool\t\t\t\ttx_custom_pulse;\n\tbool\t\t\t\ttx_generated_poll;\n\tbool\t\t\t\ttx_post_eom;\n\tu8\t\t\t\ttx_extra_bytes;\n\tu32\t\t\t\ttx_low_drive_cnt;\n#ifdef CONFIG_CEC_PIN_ERROR_INJ\n\tu64\t\t\t\terror_inj[CEC_ERROR_INJ_OP_ANY + 1];\n\tu8\t\t\t\terror_inj_args[CEC_ERROR_INJ_OP_ANY + 1][CEC_ERROR_INJ_NUM_ARGS];\n#endif\n};\n\nvoid cec_pin_start_timer(struct cec_pin *pin);\n\n#ifdef CONFIG_CEC_PIN_ERROR_INJ\nbool cec_pin_error_inj_parse_line(struct cec_adapter *adap, char *line);\nint cec_pin_error_inj_show(struct cec_adapter *adap, struct seq_file *sf);\n\nu16 cec_pin_rx_error_inj(struct cec_pin *pin);\nu16 cec_pin_tx_error_inj(struct cec_pin *pin);\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}