{
  "module_name": "hdpvr.h",
  "hash_id": "b1670d499654339d22000fbfdd7943972d25ca9e9283dd52c1d0b09f8b7bf912",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/usb/hdpvr/hdpvr.h",
  "human_readable_source": " \n \n\n#include <linux/usb.h>\n#include <linux/i2c.h>\n#include <linux/mutex.h>\n#include <linux/workqueue.h>\n#include <linux/videodev2.h>\n\n#include <media/v4l2-device.h>\n#include <media/v4l2-ctrls.h>\n#include <media/i2c/ir-kbd-i2c.h>\n\n#define HDPVR_MAX 8\n#define HDPVR_I2C_MAX_SIZE 128\n\n \n#define HD_PVR_VENDOR_ID\t0x2040\n#define HD_PVR_PRODUCT_ID\t0x4900\n#define HD_PVR_PRODUCT_ID1\t0x4901\n#define HD_PVR_PRODUCT_ID2\t0x4902\n#define HD_PVR_PRODUCT_ID4\t0x4903\n#define HD_PVR_PRODUCT_ID3\t0x4982\n\n#define UNSET    (-1U)\n\n#define NUM_BUFFERS 64\n\n#define HDPVR_FIRMWARE_VERSION\t\t0x08\n#define HDPVR_FIRMWARE_VERSION_AC3\t0x0d\n#define HDPVR_FIRMWARE_VERSION_0X12\t0x12\n#define HDPVR_FIRMWARE_VERSION_0X15\t0x15\n#define HDPVR_FIRMWARE_VERSION_0X1E\t0x1e\n\n \n\nextern int hdpvr_debug;\n\n#define MSG_INFO\t1\n#define MSG_BUFFER\t2\n\nstruct hdpvr_options {\n\tu8\tvideo_std;\n\tu8\tvideo_input;\n\tu8\taudio_input;\n\tu8\tbitrate;\t \n\tu8\tpeak_bitrate;\t \n\tu8\tbitrate_mode;\n\tu8\tgop_mode;\n\tenum v4l2_mpeg_audio_encoding\taudio_codec;\n\tu8\tbrightness;\n\tu8\tcontrast;\n\tu8\thue;\n\tu8\tsaturation;\n\tu8\tsharpness;\n};\n\n \nstruct hdpvr_device {\n\t \n\tstruct video_device\tvideo_dev;\n\t \n\tstruct v4l2_ctrl_handler hdl;\n\t \n\tstruct usb_device\t*udev;\n\t \n\tstruct v4l2_device\tv4l2_dev;\n\tstruct {  \n\t\tstruct v4l2_ctrl *video_mode;\n\t\tstruct v4l2_ctrl *video_bitrate;\n\t\tstruct v4l2_ctrl *video_bitrate_peak;\n\t};\n\t \n\tuint width, height;\n\n\t \n\tsize_t\t\t\tbulk_in_size;\n\t \n\t__u8\t\t\tbulk_in_endpointAddr;\n\n\t \n\t__u8\t\t\tstatus;\n\n\t \n\tstruct hdpvr_options\toptions;\n\tv4l2_std_id\t\tcur_std;\n\tstruct v4l2_dv_timings\tcur_dv_timings;\n\n\tuint\t\t\tflags;\n\n\t \n\tstruct mutex\t\tio_mutex;\n\t \n\tstruct list_head\tfree_buff_list;\n\t \n\tstruct list_head\trec_buff_list;\n\t \n\twait_queue_head_t\twait_buffer;\n\t \n\twait_queue_head_t\twait_data;\n\t \n\tstruct work_struct\tworker;\n\t \n\tstruct v4l2_fh\t\t*owner;\n\n\t \n\tstruct i2c_adapter\ti2c_adapter;\n\t \n\tstruct mutex\t\ti2c_mutex;\n\t \n\tchar\t\t\ti2c_buf[HDPVR_I2C_MAX_SIZE];\n\n\t \n\tstruct IR_i2c_init_data\tir_i2c_init_data;\n\n\t \n\tstruct mutex\t\tusbc_mutex;\n\tu8\t\t\t*usbc_buf;\n\tu8\t\t\tfw_ver;\n};\n\nstatic inline struct hdpvr_device *to_hdpvr_dev(struct v4l2_device *v4l2_dev)\n{\n\treturn container_of(v4l2_dev, struct hdpvr_device, v4l2_dev);\n}\n\n\n \nstruct hdpvr_buffer {\n\tstruct list_head\tbuff_list;\n\n\tstruct urb\t\t*urb;\n\n\tstruct hdpvr_device\t*dev;\n\n\tuint\t\t\tpos;\n\n\t__u8\t\t\tstatus;\n};\n\n \n\nstruct hdpvr_video_info {\n\tu16\twidth;\n\tu16\theight;\n\tu8\tfps;\n\tbool\tvalid;\n};\n\nenum {\n\tSTATUS_UNINITIALIZED\t= 0,\n\tSTATUS_IDLE,\n\tSTATUS_STARTING,\n\tSTATUS_SHUTTING_DOWN,\n\tSTATUS_STREAMING,\n\tSTATUS_ERROR,\n\tSTATUS_DISCONNECTED,\n};\n\nenum {\n\tHDPVR_FLAG_AC3_CAP = 1,\n};\n\nenum {\n\tBUFSTAT_UNINITIALIZED = 0,\n\tBUFSTAT_AVAILABLE,\n\tBUFSTAT_INPROGRESS,\n\tBUFSTAT_READY,\n};\n\n#define CTRL_START_STREAMING_VALUE\t0x0700\n#define CTRL_STOP_STREAMING_VALUE\t0x0800\n#define CTRL_BITRATE_VALUE\t\t0x1000\n#define CTRL_BITRATE_MODE_VALUE\t\t0x1200\n#define CTRL_GOP_MODE_VALUE\t\t0x1300\n#define CTRL_VIDEO_INPUT_VALUE\t\t0x1500\n#define CTRL_VIDEO_STD_TYPE\t\t0x1700\n#define CTRL_AUDIO_INPUT_VALUE\t\t0x2500\n#define CTRL_BRIGHTNESS\t\t\t0x2900\n#define CTRL_CONTRAST\t\t\t0x2a00\n#define CTRL_HUE\t\t\t0x2b00\n#define CTRL_SATURATION\t\t\t0x2c00\n#define CTRL_SHARPNESS\t\t\t0x2d00\n#define CTRL_LOW_PASS_FILTER_VALUE\t0x3100\n\n#define CTRL_DEFAULT_INDEX\t\t0x0003\n\n\n\t \n\n\t \n\n\t \n\n\t \n\n\t \n\n\n\t \n\n\n\n \n \n \n \n \n \n \n\n \n \n\n\n\t \n\n\t \n\nenum hdpvr_video_std {\n\tHDPVR_60HZ = 0,\n\tHDPVR_50HZ,\n};\n\nenum hdpvr_video_input {\n\tHDPVR_COMPONENT = 0,\n\tHDPVR_SVIDEO,\n\tHDPVR_COMPOSITE,\n\tHDPVR_VIDEO_INPUTS\n};\n\nenum hdpvr_audio_inputs {\n\tHDPVR_RCA_BACK = 0,\n\tHDPVR_RCA_FRONT,\n\tHDPVR_SPDIF,\n\tHDPVR_AUDIO_INPUTS\n};\n\nenum hdpvr_bitrate_mode {\n\tHDPVR_CONSTANT = 1,\n\tHDPVR_VARIABLE_PEAK,\n\tHDPVR_VARIABLE_AVERAGE,\n};\n\nenum hdpvr_gop_mode {\n\tHDPVR_ADVANCED_IDR_GOP = 0,\n\tHDPVR_SIMPLE_IDR_GOP,\n\tHDPVR_ADVANCED_NOIDR_GOP,\n\tHDPVR_SIMPLE_NOIDR_GOP,\n};\n\nvoid hdpvr_delete(struct hdpvr_device *dev);\n\n \n \nint hdpvr_set_options(struct hdpvr_device *dev);\n\nint hdpvr_set_bitrate(struct hdpvr_device *dev);\n\nint hdpvr_set_audio(struct hdpvr_device *dev, u8 input,\n\t\t    enum v4l2_mpeg_audio_encoding codec);\n\nint hdpvr_config_call(struct hdpvr_device *dev, uint value,\n\t\t      unsigned char valbuf);\n\nint get_video_info(struct hdpvr_device *dev, struct hdpvr_video_info *vid_info);\n\n \n \nint get_input_lines_info(struct hdpvr_device *dev);\n\n\n \n \nint hdpvr_register_videodev(struct hdpvr_device *dev, struct device *parent,\n\t\t\t    int devnumber);\n\nint hdpvr_cancel_queue(struct hdpvr_device *dev);\n\n \n \nint hdpvr_register_i2c_adapter(struct hdpvr_device *dev);\n\nstruct i2c_client *hdpvr_register_ir_i2c(struct hdpvr_device *dev);\n\n \n \nint hdpvr_free_buffers(struct hdpvr_device *dev);\nint hdpvr_alloc_buffers(struct hdpvr_device *dev, uint count);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}