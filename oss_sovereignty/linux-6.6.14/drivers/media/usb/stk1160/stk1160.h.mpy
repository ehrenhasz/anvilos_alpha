{
  "module_name": "stk1160.h",
  "hash_id": "c94b5daa13ade63809bca805f0ed61842a18410480df69c990cfa617f904a670",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/usb/stk1160/stk1160.h",
  "human_readable_source": " \n \n\n#include <linux/i2c.h>\n#include <sound/core.h>\n#include <sound/ac97_codec.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-ctrls.h>\n#include <linux/usb.h>\n#include <linux/usb/hcd.h>\n\n#define STK1160_VERSION\t\t\"0.9.5\"\n#define STK1160_VERSION_NUM\t0x000905\n\n \n#define STK1160_NUM_PACKETS 64\n\n \n#define STK1160_NUM_BUFS 16\n#define STK1160_MIN_BUFS 1\n\n \n#define STK1160_EP_VIDEO 0x82\n#define STK1160_EP_AUDIO 0x81\n\n \n#define STK1160_MIN_VIDEO_BUFFERS 8\n#define STK1160_MAX_VIDEO_BUFFERS 32\n\n#define STK1160_MIN_PKT_SIZE 3072\n\n#define STK1160_MAX_INPUT 4\n#define STK1160_SVIDEO_INPUT 4\n\n#define STK1160_AC97_TIMEOUT 50\n\n#define STK1160_I2C_TIMEOUT 100\n\n \n#ifdef DEBUG\n#define stk1160_dbg(fmt, args...) \\\n\tprintk(KERN_DEBUG \"stk1160: \" fmt,  ## args)\n#else\n#define stk1160_dbg(fmt, args...)\n#endif\n\n#define stk1160_info(fmt, args...) \\\n\tpr_info(\"stk1160: \" fmt, ## args)\n\n#define stk1160_warn(fmt, args...) \\\n\tpr_warn(\"stk1160: \" fmt, ## args)\n\n#define stk1160_err(fmt, args...) \\\n\tpr_err(\"stk1160: \" fmt, ## args)\n\n \nstruct stk1160_buffer {\n\t \n\tstruct vb2_v4l2_buffer vb;\n\tstruct list_head list;\n\n\tvoid *mem;\n\tunsigned int length;\t\t \n\tunsigned int bytesused;\t\t \n\tint odd;\t\t\t \n\n\t \n\tunsigned int pos;\t\t \n};\n\nstruct stk1160_urb {\n\tstruct urb *urb;\n\tchar *transfer_buffer;\n\tstruct sg_table *sgt;\n\tstruct stk1160 *dev;\n\tdma_addr_t dma;\n};\n\nstruct stk1160_isoc_ctl {\n\t \n\tint max_pkt_size;\n\n\t \n\tint num_bufs;\n\n\tstruct stk1160_urb urb_ctl[STK1160_NUM_BUFS];\n\n\t \n\tstruct stk1160_buffer *buf;\n};\n\nstruct stk1160_fmt {\n\tu32   fourcc;           \n\tint   depth;\n};\n\nstruct stk1160 {\n\tstruct v4l2_device v4l2_dev;\n\tstruct video_device vdev;\n\tstruct v4l2_ctrl_handler ctrl_handler;\n\n\tstruct device *dev;\n\tstruct usb_device *udev;\n\n\t \n\tstruct v4l2_subdev *sd_saa7115;\n\n\t \n\tstruct list_head avail_bufs;\n\n\t \n\tstruct vb2_queue vb_vidq;\n\n\t \n\tint max_pkt_size;\n\t \n\tunsigned int *alt_max_pkt_size;\n\t \n\tint alt;\n\t \n\tint num_alt;\n\n\tstruct stk1160_isoc_ctl isoc_ctl;\n\n\t \n\tint width;\t\t   \n\tint height;\t\t   \n\tunsigned int ctl_input;\t   \n\tv4l2_std_id norm;\t   \n\tstruct stk1160_fmt *fmt;   \n\n\tunsigned int sequence;\n\n\t \n\tstruct i2c_adapter i2c_adap;\n\tstruct i2c_client i2c_client;\n\n\tstruct mutex v4l_lock;\n\tstruct mutex vb_queue_lock;\n\tspinlock_t buf_lock;\n\n\tstruct file *fh_owner;\t \n\n\t \n\tstruct snd_card *snd_card;\n};\n\nstruct regval {\n\tu16 reg;\n\tu16 val;\n};\n\n \nint stk1160_vb2_setup(struct stk1160 *dev);\nint stk1160_video_register(struct stk1160 *dev);\nvoid stk1160_video_unregister(struct stk1160 *dev);\nvoid stk1160_clear_queue(struct stk1160 *dev, enum vb2_buffer_state vb2_state);\n\n \nint stk1160_alloc_isoc(struct stk1160 *dev);\nvoid stk1160_free_isoc(struct stk1160 *dev);\nvoid stk1160_cancel_isoc(struct stk1160 *dev);\nvoid stk1160_uninit_isoc(struct stk1160 *dev);\n\n \nint stk1160_i2c_register(struct stk1160 *dev);\nint stk1160_i2c_unregister(struct stk1160 *dev);\n\n \nint stk1160_read_reg(struct stk1160 *dev, u16 reg, u8 *value);\nint stk1160_write_reg(struct stk1160 *dev, u16 reg, u16 value);\nint stk1160_write_regs_req(struct stk1160 *dev, u8 req, u16 reg,\n\t\tchar *buf, int len);\nint stk1160_read_reg_req_len(struct stk1160 *dev, u8 req, u16 reg,\n\t\tchar *buf, int len);\nvoid stk1160_select_input(struct stk1160 *dev);\n\n \nvoid stk1160_ac97_setup(struct stk1160 *dev);\n\nstatic inline struct device *stk1160_get_dmadev(struct stk1160 *dev)\n{\n\treturn bus_to_hcd(dev->udev->bus)->self.sysdev;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}