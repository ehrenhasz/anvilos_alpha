{
  "module_name": "pvrusb2-audio.c",
  "hash_id": "7d8df9f3495a8752ed21e798c1f339e842f462fb143bfcecff6d2d516fe441e0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/usb/pvrusb2/pvrusb2-audio.c",
  "human_readable_source": "\n \n\n#include \"pvrusb2-audio.h\"\n#include \"pvrusb2-hdw-internal.h\"\n#include \"pvrusb2-debug.h\"\n#include <linux/videodev2.h>\n#include <media/drv-intf/msp3400.h>\n#include <media/v4l2-common.h>\n\n\nstruct routing_scheme {\n\tconst int *def;\n\tunsigned int cnt;\n};\n\nstatic const int routing_scheme0[] = {\n\t[PVR2_CVAL_INPUT_TV]        = MSP_INPUT_DEFAULT,\n\t[PVR2_CVAL_INPUT_RADIO]     = MSP_INPUT(MSP_IN_SCART2,\n\t\t\t\t\t\tMSP_IN_TUNER1,\n\t\t\t\t\t\tMSP_DSP_IN_SCART,\n\t\t\t\t\t\tMSP_DSP_IN_SCART),\n\t[PVR2_CVAL_INPUT_COMPOSITE] = MSP_INPUT(MSP_IN_SCART1,\n\t\t\t\t\t\tMSP_IN_TUNER1,\n\t\t\t\t\t\tMSP_DSP_IN_SCART,\n\t\t\t\t\t\tMSP_DSP_IN_SCART),\n\t[PVR2_CVAL_INPUT_SVIDEO]    = MSP_INPUT(MSP_IN_SCART1,\n\t\t\t\t\t\tMSP_IN_TUNER1,\n\t\t\t\t\t\tMSP_DSP_IN_SCART,\n\t\t\t\t\t\tMSP_DSP_IN_SCART),\n};\n\nstatic const struct routing_scheme routing_def0 = {\n\t.def = routing_scheme0,\n\t.cnt = ARRAY_SIZE(routing_scheme0),\n};\n\nstatic const struct routing_scheme *routing_schemes[] = {\n\t[PVR2_ROUTING_SCHEME_HAUPPAUGE] = &routing_def0,\n};\n\nvoid pvr2_msp3400_subdev_update(struct pvr2_hdw *hdw, struct v4l2_subdev *sd)\n{\n\tif (hdw->input_dirty || hdw->force_dirty) {\n\t\tconst struct routing_scheme *sp;\n\t\tunsigned int sid = hdw->hdw_desc->signal_routing_scheme;\n\t\tu32 input;\n\n\t\tpvr2_trace(PVR2_TRACE_CHIPS, \"subdev msp3400 v4l2 set_stereo\");\n\t\tsp = (sid < ARRAY_SIZE(routing_schemes)) ?\n\t\t\trouting_schemes[sid] : NULL;\n\n\t\tif ((sp != NULL) &&\n\t\t    (hdw->input_val >= 0) &&\n\t\t    (hdw->input_val < sp->cnt)) {\n\t\t\tinput = sp->def[hdw->input_val];\n\t\t} else {\n\t\t\tpvr2_trace(PVR2_TRACE_ERROR_LEGS,\n\t\t\t\t   \"*** WARNING *** subdev msp3400 set_input: Invalid routing scheme (%u) and/or input (%d)\",\n\t\t\t\t   sid, hdw->input_val);\n\t\t\treturn;\n\t\t}\n\t\tsd->ops->audio->s_routing(sd, input,\n\t\t\tMSP_OUTPUT(MSP_SC_IN_DSP_SCART1), 0);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}