{
  "module_name": "sonixj.c",
  "hash_id": "e7fbf2efd09779e3e832aaef2325588cd59d46a59934d5161538b043bc755750",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/usb/gspca/sonixj.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n#define MODULE_NAME \"sonixj\"\n\n#include <linux/input.h>\n#include \"gspca.h\"\n#include \"jpeg.h\"\n\nMODULE_AUTHOR(\"Jean-Fran\u00e7ois Moine <http://moinejf.free.fr>\");\nMODULE_DESCRIPTION(\"GSPCA/SONIX JPEG USB Camera Driver\");\nMODULE_LICENSE(\"GPL\");\n\n \nstruct sd {\n\tstruct gspca_dev gspca_dev;\t \n\n\tatomic_t avg_lum;\n\tstruct v4l2_ctrl *brightness;\n\tstruct v4l2_ctrl *contrast;\n\tstruct v4l2_ctrl *saturation;\n\tstruct {  \n\t\tstruct v4l2_ctrl *red_bal;\n\t\tstruct v4l2_ctrl *blue_bal;\n\t};\n\tstruct {  \n\t\tstruct v4l2_ctrl *vflip;\n\t\tstruct v4l2_ctrl *hflip;\n\t};\n\tstruct v4l2_ctrl *gamma;\n\tstruct v4l2_ctrl *illum;\n\tstruct v4l2_ctrl *sharpness;\n\tstruct v4l2_ctrl *freq;\n\tu32 exposure;\n\n\tstruct work_struct work;\n\n\tu32 pktsz;\t\t\t \n\tu16 npkt;\n\ts8 nchg;\n\ts8 short_mark;\n\n\tu8 quality;\t\t\t \n#define QUALITY_MIN 25\n#define QUALITY_MAX 90\n#define QUALITY_DEF 70\n\n\tu8 reg01;\n\tu8 reg17;\n\tu8 reg18;\n\tu8 flags;\n\n\ts8 ag_cnt;\n#define AG_CNT_START 13\n\n\tu8 bridge;\n#define BRIDGE_SN9C102P 0\n#define BRIDGE_SN9C105 1\n#define BRIDGE_SN9C110 2\n#define BRIDGE_SN9C120 3\n\tu8 sensor;\t\t\t \n\tu8 i2c_addr;\n\n\tu8 jpeg_hdr[JPEG_HDR_SZ];\n};\nenum sensors {\n\tSENSOR_ADCM1700,\n\tSENSOR_GC0307,\n\tSENSOR_HV7131R,\n\tSENSOR_MI0360,\n\tSENSOR_MI0360B,\n\tSENSOR_MO4000,\n\tSENSOR_MT9V111,\n\tSENSOR_OM6802,\n\tSENSOR_OV7630,\n\tSENSOR_OV7648,\n\tSENSOR_OV7660,\n\tSENSOR_PO1030,\n\tSENSOR_PO2030N,\n\tSENSOR_SOI768,\n\tSENSOR_SP80708,\n};\n\nstatic void qual_upd(struct work_struct *work);\n\n \n#define F_PDN_INV\t0x01\t \n#define F_ILLUM\t\t0x02\t \n\n \n \n#define S_PWR_DN\t0x01\t \n#define S_PDN_INV\t0x02\t \n#define V_TX_EN\t\t0x04\t \n#define LED\t\t0x08\t \n#define SCL_SEL_OD\t0x20\t \n#define SYS_SEL_48M\t0x40\t \n \n#define MCK_SIZE_MASK\t0x1f\t \n#define SEN_CLK_EN\t0x20\t \n#define DEF_EN\t\t0x80\t \n\nstatic const struct v4l2_pix_format cif_mode[] = {\n\t{352, 288, V4L2_PIX_FMT_JPEG, V4L2_FIELD_NONE,\n\t\t.bytesperline = 352,\n\t\t.sizeimage = 352 * 288 * 4 / 8 + 590,\n\t\t.colorspace = V4L2_COLORSPACE_JPEG,\n\t\t.priv = 0},\n};\nstatic const struct v4l2_pix_format vga_mode[] = {\n\t{160, 120, V4L2_PIX_FMT_JPEG, V4L2_FIELD_NONE,\n\t\t.bytesperline = 160,\n\t\t.sizeimage = 160 * 120 * 4 / 8 + 590,\n\t\t.colorspace = V4L2_COLORSPACE_JPEG,\n\t\t.priv = 2},\n\t{320, 240, V4L2_PIX_FMT_JPEG, V4L2_FIELD_NONE,\n\t\t.bytesperline = 320,\n\t\t.sizeimage = 320 * 240 * 3 / 8 + 590,\n\t\t.colorspace = V4L2_COLORSPACE_JPEG,\n\t\t.priv = 1},\n\t{640, 480, V4L2_PIX_FMT_JPEG, V4L2_FIELD_NONE,\n\t\t.bytesperline = 640,\n\t\t \n\t\t.sizeimage = 640 * 480 * 3 / 4 + 590,\n\t\t.colorspace = V4L2_COLORSPACE_JPEG,\n\t\t.priv = 0},\n};\n\nstatic const u8 sn_adcm1700[0x1c] = {\n \n\t0x00,\t0x43,\t0x60,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x80,\t0x51,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x05,\t0x01,\t0x05,\t0x16,\t0x12,\t0x42,\n \n\t0x06,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_gc0307[0x1c] = {\n \n\t0x00,\t0x61,\t0x62,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x80,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x03,\t0x01,\t0x08,\t0x28,\t0x1e,\t0x02,\n \n\t0x06,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_hv7131[0x1c] = {\n \n\t0x00,\t0x03,\t0x60,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x11,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x01,\t0x03,\t0x28,\t0x1e,\t0x41,\n \n\t0x0a,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_mi0360[0x1c] = {\n \n\t0x00,\t0x63,\t0x40,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x5d,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x02,\t0x0a,\t0x28,\t0x1e,\t0x61,\n \n\t0x06,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_mi0360b[0x1c] = {\n \n\t0x00,\t0x61,\t0x40,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x81,\t0x5d,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x02,\t0x0a,\t0x28,\t0x1e,\t0x40,\n \n\t0x06,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_mo4000[0x1c] = {\n \n\t0x00,\t0x23,\t0x60,\t0x00,\t0x1a,\t0x00,\t0x20,\t0x18,\n \n\t0x81,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t 0x00,\t0x0b,\t0x0f,\t0x14,\t0x28,\t0x1e,\t0x40,\n \n\t0x08,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_mt9v111[0x1c] = {\n \n\t0x00,\t0x61,\t0x40,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x5c,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x02,\t0x1c,\t0x28,\t0x1e,\t0x40,\n \n\t0x06,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_om6802[0x1c] = {\n \n\t0x00,\t0x23,\t0x72,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x19,\n \n\t0x80,\t0x34,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x51,\t0x01,\t0x00,\t0x28,\t0x1e,\t0x40,\n \n\t0x05,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_ov7630[0x1c] = {\n \n\t0x00,\t0x21,\t0x40,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x81,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x04,\t0x01,\t0x0a,\t0x28,\t0x1e,\t0xc2,\n \n\t0x0b,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_ov7648[0x1c] = {\n \n\t0x00,\t0x63,\t0x40,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x01,\t0x00,\t0x28,\t0x1e,\t0x00,\n \n\t0x0b,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_ov7660[0x1c] = {\n \n\t0x00,\t0x61,\t0x40,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x81,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x01,\t0x01,\t0x08,\t0x28,\t0x1e,\t0x20,\n \n\t0x07,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_po1030[0x1c] = {\n \n\t0x00,\t0x21,\t0x62,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x6e,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x06,\t0x06,\t0x28,\t0x1e,\t0x00,\n \n\t0x07,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_po2030n[0x1c] = {\n \n\t0x00,\t0x63,\t0x40,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x81,\t0x6e,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x01,\t0x14,\t0x28,\t0x1e,\t0x00,\n \n\t0x07,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_soi768[0x1c] = {\n \n\t0x00,\t0x21,\t0x40,\t0x00,\t0x1a,\t0x00,\t0x00,\t0x00,\n \n\t0x81,\t0x21,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x01,\t0x08,\t0x28,\t0x1e,\t0x00,\n \n\t0x07,\t0x00,\t0x00,\t0x00\n};\n\nstatic const u8 sn_sp80708[0x1c] = {\n \n\t0x00,\t0x63,\t0x60,\t0x00,\t0x1a,\t0x20,\t0x20,\t0x20,\n \n\t0x81,\t0x18,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\t0x00,\n \n\t0x03,\t0x00,\t0x00,\t0x03,\t0x04,\t0x28,\t0x1e,\t0x00,\n \n\t0x07,\t0x00,\t0x00,\t0x00\n};\n\n \nstatic const u8 *sn_tb[] = {\n[SENSOR_ADCM1700] =\tsn_adcm1700,\n[SENSOR_GC0307] =\tsn_gc0307,\n[SENSOR_HV7131R] =\tsn_hv7131,\n[SENSOR_MI0360] =\tsn_mi0360,\n[SENSOR_MI0360B] =\tsn_mi0360b,\n[SENSOR_MO4000] =\tsn_mo4000,\n[SENSOR_MT9V111] =\tsn_mt9v111,\n[SENSOR_OM6802] =\tsn_om6802,\n[SENSOR_OV7630] =\tsn_ov7630,\n[SENSOR_OV7648] =\tsn_ov7648,\n[SENSOR_OV7660] =\tsn_ov7660,\n[SENSOR_PO1030] =\tsn_po1030,\n[SENSOR_PO2030N] =\tsn_po2030n,\n[SENSOR_SOI768] =\tsn_soi768,\n[SENSOR_SP80708] =\tsn_sp80708,\n};\n\n \nstatic const u8 gamma_def[17] = {\n\t0x00, 0x2d, 0x46, 0x5a, 0x6c, 0x7c, 0x8b, 0x99,\n\t0xa6, 0xb2, 0xbf, 0xca, 0xd5, 0xe0, 0xeb, 0xf5, 0xff\n};\n \nstatic const u8 gamma_spec_0[17] = {\n\t0x0f, 0x39, 0x5a, 0x74, 0x86, 0x95, 0xa6, 0xb4,\n\t0xbd, 0xc4, 0xcc, 0xd4, 0xd5, 0xde, 0xe4, 0xed, 0xf5\n};\n \nstatic const u8 gamma_spec_1[17] = {\n\t0x08, 0x3a, 0x52, 0x65, 0x75, 0x83, 0x91, 0x9d,\n\t0xa9, 0xb4, 0xbe, 0xc8, 0xd2, 0xdb, 0xe4, 0xed, 0xf5\n};\n \nstatic const u8 gamma_spec_2[17] = {\n\t0x14, 0x37, 0x50, 0x6a, 0x7c, 0x8d, 0x9d, 0xab,\n\t0xb5, 0xbf, 0xc2, 0xcb, 0xd1, 0xd6, 0xdb, 0xe1, 0xeb\n};\n \nstatic const u8 gamma_spec_3[17] = {\n\t0x0a, 0x2d, 0x4e, 0x68, 0x7d, 0x8f, 0x9f, 0xab,\n\t0xb7, 0xc2, 0xcc, 0xd3, 0xd8, 0xde, 0xe2, 0xe5, 0xe6\n};\n\n \nstatic const u8 reg84[] = {\n\t0x14, 0x00, 0x27, 0x00, 0x07, 0x00,\t \n\t0xe8, 0x0f, 0xda, 0x0f, 0x40, 0x00,\t \n\t0x3e, 0x00, 0xcd, 0x0f, 0xf7, 0x0f,\t \n\t0x00, 0x00, 0x00\t\t\t \n};\n\n#define DELAY\t0xdd\n\nstatic const u8 adcm1700_sensor_init[][8] = {\n\t{0xa0, 0x51, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x04, 0x08, 0x00, 0x00, 0x00, 0x10},\t \n\t{DELAY, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},\n\t{0xb0, 0x51, 0x04, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},\n\t{0xb0, 0x51, 0x0c, 0xe0, 0x2e, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x10, 0x02, 0x02, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x14, 0x0e, 0x0e, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x1c, 0x00, 0x80, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x20, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},\n\t{0xb0, 0x51, 0x04, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},\n\t{0xb0, 0x51, 0x04, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x51, 0xfe, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x14, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x32, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 adcm1700_sensor_param1[][8] = {\n\t{0xb0, 0x51, 0x26, 0xf9, 0x01, 0x00, 0x00, 0x10},\t \n\t{0xd0, 0x51, 0x1e, 0x8e, 0x8e, 0x8e, 0x8e, 0x10},\n\n\t{0xa0, 0x51, 0xfe, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x00, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x51, 0xfe, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x32, 0x00, 0x72, 0x00, 0x00, 0x10},\n\t{0xd0, 0x51, 0x1e, 0xbe, 0xd7, 0xe8, 0xbe, 0x10},\t \n\n\t{0xa0, 0x51, 0xfe, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x00, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x51, 0xfe, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xb0, 0x51, 0x32, 0x00, 0xa2, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 gc0307_sensor_init[][8] = {\n\t{0xa0, 0x21, 0x43, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x44, 0xa2, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x01, 0x6a, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x02, 0x70, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x1d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x11, 0x05, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x05, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x06, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x07, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x08, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x09, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0a, 0xe8, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0b, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0c, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0d, 0x22, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0e, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x0f, 0xb2, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x12, 0x70, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa0, 0x21, 0x13, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x15, 0xb8, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x16, 0x13, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x17, 0x52, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x18, 0x50, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x1e, 0x0d, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x1f, 0x32, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x61, 0x90, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x63, 0x70, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x65, 0x98, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x67, 0x90, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x03, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x04, 0x96, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x45, 0x27, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x47, 0x2c, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x43, 0x47, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x44, 0xd8, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 gc0307_sensor_param1[][8] = {\n\t{0xa0, 0x21, 0x68, 0x13, 0x00, 0x00, 0x00, 0x10},\n\t{0xd0, 0x21, 0x61, 0x80, 0x00, 0x80, 0x00, 0x10},\n\t{0xc0, 0x21, 0x65, 0x80, 0x00, 0x80, 0x00, 0x10},\n\t{0xc0, 0x21, 0x63, 0xa0, 0x00, 0xa6, 0x00, 0x10},\n \n\t{0xa0, 0x21, 0x01, 0x6e, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x21, 0x02, 0x88, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\n\nstatic const u8 hv7131r_sensor_init[][8] = {\n\t{0xc1, 0x11, 0x01, 0x08, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x11, 0x34, 0x17, 0x7f, 0x00, 0x00, 0x10},\n\t{0xd1, 0x11, 0x40, 0xff, 0x7f, 0x7f, 0x7f, 0x10},\n \n\t{0xd1, 0x11, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x11, 0x14, 0x01, 0xe2, 0x02, 0x82, 0x10},\n \n\n\t{0xa1, 0x11, 0x01, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x01, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xc1, 0x11, 0x25, 0x00, 0x61, 0xa8, 0x00, 0x10},\n\t{0xa1, 0x11, 0x30, 0x22, 0x00, 0x00, 0x00, 0x10},\n\t{0xc1, 0x11, 0x31, 0x20, 0x2e, 0x20, 0x00, 0x10},\n\t{0xc1, 0x11, 0x25, 0x00, 0xc3, 0x50, 0x00, 0x10},\n\t{0xa1, 0x11, 0x30, 0x07, 0x00, 0x00, 0x00, 0x10},  \n\t{0xc1, 0x11, 0x31, 0x10, 0x10, 0x10, 0x00, 0x10},  \n\n\t{0xa1, 0x11, 0x01, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x20, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x21, 0xd0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x23, 0x09, 0x00, 0x00, 0x00, 0x10},\n\n\t{0xa1, 0x11, 0x01, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x20, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x21, 0xd0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x23, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x11, 0x01, 0x18, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t\t \n\t{}\n};\nstatic const u8 mi0360_sensor_init[][8] = {\n\t{0xb1, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x0d, 0x00, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x0d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x01, 0x00, 0x08, 0x00, 0x16, 0x10},\n\t{0xd1, 0x5d, 0x03, 0x01, 0xe2, 0x02, 0x82, 0x10},\n\t{0xd1, 0x5d, 0x05, 0x00, 0x09, 0x00, 0x53, 0x10},\n\t{0xb1, 0x5d, 0x0d, 0x00, 0x02, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x12, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x14, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x16, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x18, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x32, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x20, 0x91, 0x01, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x24, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x26, 0x00, 0x00, 0x00, 0x24, 0x10},\n\t{0xd1, 0x5d, 0x2f, 0xf7, 0xb0, 0x00, 0x04, 0x10},\n\t{0xd1, 0x5d, 0x31, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x33, 0x00, 0x00, 0x01, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x3d, 0x06, 0x8f, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x40, 0x01, 0xe0, 0x00, 0xd1, 0x10},\n\t{0xb1, 0x5d, 0x44, 0x00, 0x82, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x58, 0x00, 0x78, 0x00, 0x43, 0x10},\n\t{0xd1, 0x5d, 0x5a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x5e, 0x00, 0x00, 0xa3, 0x1d, 0x10},\n\t{0xb1, 0x5d, 0x62, 0x04, 0x11, 0x00, 0x00, 0x10},\n\n\t{0xb1, 0x5d, 0x20, 0x91, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x20, 0x11, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x09, 0x00, 0x64, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x2b, 0x00, 0xa0, 0x00, 0xb0, 0x10},\n\t{0xd1, 0x5d, 0x2d, 0x00, 0xa0, 0x00, 0xa0, 0x10},\n\n\t{0xb1, 0x5d, 0x0a, 0x00, 0x02, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5d, 0x06, 0x00, 0x30, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x05, 0x00, 0x0a, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x09, 0x02, 0x35, 0x00, 0x00, 0x10},  \n\n\t{0xd1, 0x5d, 0x2b, 0x00, 0xb9, 0x00, 0xe3, 0x10},\n\t{0xd1, 0x5d, 0x2d, 0x00, 0x5f, 0x00, 0xb9, 0x10},  \n \n \n\t{0xb1, 0x5d, 0x07, 0x00, 0x03, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10},  \n\t{}\n};\nstatic const u8 mi0360b_sensor_init[][8] = {\n\t{0xb1, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x0d, 0x00, 0x01, 0x00, 0x00, 0x10},\n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xb1, 0x5d, 0x0d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xd1, 0x5d, 0x01, 0x00, 0x08, 0x00, 0x16, 0x10},\n\t{0xd1, 0x5d, 0x03, 0x01, 0xe2, 0x02, 0x82, 0x10},\n\t{0xd1, 0x5d, 0x05, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x0d, 0x00, 0x02, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x12, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x14, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x16, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x18, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x32, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x20, 0x11, 0x01, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x24, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x26, 0x00, 0x00, 0x00, 0x24, 0x10},\n\t{0xd1, 0x5d, 0x2f, 0xf7, 0xb0, 0x00, 0x04, 0x10},\n\t{0xd1, 0x5d, 0x31, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x33, 0x00, 0x00, 0x01, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x3d, 0x06, 0x8f, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x40, 0x01, 0xe0, 0x00, 0xd1, 0x10},\n\t{0xb1, 0x5d, 0x44, 0x00, 0x82, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x58, 0x00, 0x78, 0x00, 0x43, 0x10},\n\t{0xd1, 0x5d, 0x5a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x5e, 0x00, 0x00, 0xa3, 0x1d, 0x10},\n\t{0xb1, 0x5d, 0x62, 0x04, 0x11, 0x00, 0x00, 0x10},\n\n\t{0xb1, 0x5d, 0x20, 0x11, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x20, 0x11, 0x01, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x09, 0x00, 0x64, 0x00, 0x00, 0x10},\n\t{0xd1, 0x5d, 0x2b, 0x00, 0x33, 0x00, 0xa0, 0x10},\n\t{0xd1, 0x5d, 0x2d, 0x00, 0xa0, 0x00, 0x33, 0x10},\n\t{}\n};\nstatic const u8 mi0360b_sensor_param1[][8] = {\n\t{0xb1, 0x5d, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x06, 0x00, 0x53, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x05, 0x00, 0x09, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5d, 0x09, 0x02, 0x35, 0x00, 0x00, 0x10},  \n\n\t{0xd1, 0x5d, 0x2b, 0x00, 0xd1, 0x01, 0xc9, 0x10},\n\t{0xd1, 0x5d, 0x2d, 0x00, 0xed, 0x00, 0xd1, 0x10},\n\t{0xb1, 0x5d, 0x07, 0x00, 0x03, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10},  \n\t{}\n};\nstatic const u8 mo4000_sensor_init[][8] = {\n\t{0xa1, 0x21, 0x01, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x02, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x03, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x04, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x05, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x05, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x06, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x06, 0x81, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x20, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x30, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x38, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x38, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x12, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x0f, 0x20, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x10, 0x20, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x11, 0x38, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 mt9v111_sensor_init[][8] = {\n\t{0xb1, 0x5c, 0x0d, 0x00, 0x01, 0x00, 0x00, 0x10},  \n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xb1, 0x5c, 0x0d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x5c, 0x01, 0x00, 0x01, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x08, 0x04, 0x80, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x06, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x01, 0x00, 0x04, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x08, 0x00, 0x08, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x02, 0x00, 0x16, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x03, 0x01, 0xe7, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x04, 0x02, 0x87, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x07, 0x30, 0x02, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x12, 0x00, 0xb0, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x13, 0x00, 0x7c, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x1e, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x20, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x20, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 mt9v111_sensor_param1[][8] = {\n\t{0xd1, 0x5c, 0x2b, 0x00, 0x33, 0x00, 0xad, 0x10},  \n\t{0xd1, 0x5c, 0x2d, 0x00, 0xad, 0x00, 0x33, 0x10},  \n\t{0xb1, 0x5c, 0x06, 0x00, 0x40, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x05, 0x00, 0x09, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x5c, 0x35, 0x01, 0xc0, 0x00, 0x00, 0x10},  \n\t{}\n};\nstatic const u8 om6802_init0[2][8] = {\n \n\t{0xa0, 0x34, 0x29, 0x0e, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x34, 0x23, 0xb0, 0x00, 0x00, 0x00, 0x10},\n};\nstatic const u8 om6802_sensor_init[][8] = {\n\t{0xa0, 0x34, 0xdf, 0x6d, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xa0, 0x34, 0xdd, 0x18, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xa0, 0x34, 0x5a, 0xc0, 0x00, 0x00, 0x00, 0x10},\n \n\t{0xa0, 0x34, 0xf0, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t\t \n \n \n \n \n \n \n\t{0xa0, 0x34, 0xe9, 0x0f, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t \n\t{0xa0, 0x34, 0xe4, 0xff, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t\t \n \n \n\t{0xa0, 0x34, 0x5d, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 om6802_sensor_param1[][8] = {\n\t{0xa0, 0x34, 0x71, 0x84, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x34, 0x72, 0x05, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x34, 0x68, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa0, 0x34, 0x69, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 ov7630_sensor_init[][8] = {\n\t{0xa1, 0x21, 0x76, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x12, 0xc8, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x21, 0x12, 0x48, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x12, 0xc8, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x21, 0x12, 0x48, 0x00, 0x00, 0x00, 0x10},\n \n\t{0xd1, 0x21, 0x03, 0x80, 0x10, 0x20, 0x80, 0x10},\n\t{0xb1, 0x21, 0x0c, 0x20, 0x20, 0x00, 0x00, 0x10},\n \n\t{0xd1, 0x21, 0x11, 0x01, 0x48, 0xc3, 0x00, 0x10},\n\t{0xb1, 0x21, 0x15, 0x80, 0x03, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x17, 0x1b, 0xbd, 0x05, 0xf6, 0x10},\n\t{0xa1, 0x21, 0x1b, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x1f, 0x00, 0x80, 0x80, 0x80, 0x10},\n\t{0xd1, 0x21, 0x23, 0xde, 0x10, 0x8a, 0xa0, 0x10},\n\t{0xc1, 0x21, 0x27, 0xca, 0xa2, 0x74, 0x00, 0x10},\n\t{0xd1, 0x21, 0x2a, 0x88, 0x00, 0x88, 0x01, 0x10},\n\t{0xc1, 0x21, 0x2e, 0x80, 0x00, 0x18, 0x00, 0x10},\n\t{0xa1, 0x21, 0x21, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x32, 0xc2, 0x08, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x4c, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x60, 0x05, 0x40, 0x12, 0x57, 0x10},\n\t{0xa1, 0x21, 0x64, 0x73, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x65, 0x00, 0x55, 0x01, 0xac, 0x10},\n\t{0xa1, 0x21, 0x69, 0x38, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x6f, 0x1f, 0x01, 0x00, 0x10, 0x10},\n\t{0xd1, 0x21, 0x73, 0x50, 0x20, 0x02, 0x01, 0x10},\n\t{0xd1, 0x21, 0x77, 0xf3, 0x90, 0x98, 0x98, 0x10},\n\t{0xc1, 0x21, 0x7b, 0x00, 0x4c, 0xf7, 0x00, 0x10},\n\t{0xd1, 0x21, 0x17, 0x1b, 0xbd, 0x05, 0xf6, 0x10},\n\t{0xa1, 0x21, 0x1b, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 ov7630_sensor_param1[][8] = {\n\t{0xa1, 0x21, 0x12, 0x48, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x12, 0x48, 0x00, 0x00, 0x00, 0x10},\n \n \n\t{0xa1, 0x21, 0x10, 0x32, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x01, 0x80, 0x80, 0x00, 0x00, 0x10},\n \n \n \n \n\t{0xa1, 0x21, 0x10, 0x83, 0x00, 0x00, 0x00, 0x10},\n \n\t{}\n};\n\nstatic const u8 ov7648_sensor_init[][8] = {\n\t{0xa1, 0x21, 0x76, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x12, 0x80, 0x00, 0x00, 0x00, 0x10},\t \n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x21, 0x12, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x03, 0xa4, 0x30, 0x88, 0x00, 0x10},\n\t{0xb1, 0x21, 0x11, 0x80, 0x08, 0x00, 0x00, 0x10},\n\t{0xc1, 0x21, 0x13, 0xa0, 0x04, 0x84, 0x00, 0x10},\n\t{0xd1, 0x21, 0x17, 0x1a, 0x02, 0xba, 0xf4, 0x10},\n\t{0xa1, 0x21, 0x1b, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x1f, 0x41, 0xc0, 0x80, 0x80, 0x10},\n\t{0xd1, 0x21, 0x23, 0xde, 0xa0, 0x80, 0x32, 0x10},\n\t{0xd1, 0x21, 0x27, 0xfe, 0xa0, 0x00, 0x91, 0x10},\n\t{0xd1, 0x21, 0x2b, 0x00, 0x88, 0x85, 0x80, 0x10},\n\t{0xc1, 0x21, 0x2f, 0x9c, 0x00, 0xc4, 0x00, 0x10},\n\t{0xd1, 0x21, 0x60, 0xa6, 0x60, 0x88, 0x12, 0x10},\n\t{0xd1, 0x21, 0x64, 0x88, 0x00, 0x00, 0x94, 0x10},\n\t{0xd1, 0x21, 0x68, 0x7a, 0x0c, 0x00, 0x00, 0x10},\n\t{0xd1, 0x21, 0x6c, 0x11, 0x33, 0x22, 0x00, 0x10},\n\t{0xd1, 0x21, 0x70, 0x11, 0x00, 0x10, 0x50, 0x10},\n\t{0xd1, 0x21, 0x74, 0x20, 0x06, 0x00, 0xb5, 0x10},\n\t{0xd1, 0x21, 0x78, 0x8a, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x7c, 0x00, 0x43, 0x00, 0x00, 0x10},\n\n\t{0xd1, 0x21, 0x21, 0x86, 0x00, 0xde, 0xa0, 0x10},\n \n \n \n\t{}\n};\nstatic const u8 ov7648_sensor_param1[][8] = {\n \n \n\t{0xa1, 0x21, 0x19, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x10, 0x32, 0x00, 0x00, 0x00, 0x10},\n \n \n \n \n\t{0xa1, 0x21, 0x11, 0x81, 0x00, 0x00, 0x00, 0x10},  \n \n \n \n \n \n\n\t{}\n};\n\nstatic const u8 ov7660_sensor_init[][8] = {\n\t{0xa1, 0x21, 0x12, 0x80, 0x00, 0x00, 0x00, 0x10},  \n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x21, 0x12, 0x05, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xa1, 0x21, 0x13, 0xb8, 0x00, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x00, 0x01, 0x74, 0x92, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x04, 0x00, 0x7d, 0x62, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xb1, 0x21, 0x08, 0x83, 0x01, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x0c, 0x00, 0x08, 0x04, 0x4f, 0x10},  \n\t{0xd1, 0x21, 0x10, 0x7f, 0x40, 0x05, 0xff, 0x10},\n\t\t\t\t\t\t \n\t{0xc1, 0x21, 0x14, 0x2c, 0x00, 0x02, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x17, 0x10, 0x60, 0x02, 0x7b, 0x10},\n\t\t\t\t\t\t \n\t{0xa1, 0x21, 0x1b, 0x02, 0x00, 0x00, 0x00, 0x10},  \n\t{0xb1, 0x21, 0x1e, 0x01, 0x0e, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x20, 0x07, 0x07, 0x07, 0x07, 0x10},\n\t\t\t\t\t \n \n\t{0xd1, 0x21, 0x24, 0x78, 0x68, 0xd4, 0x80, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x28, 0x80, 0x30, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x2c, 0x80, 0x00, 0x00, 0x62, 0x10},\n\t\t\t\t\t\t \n\t{0xc1, 0x21, 0x30, 0x08, 0x30, 0xb4, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x33, 0x00, 0x07, 0x84, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x37, 0x0c, 0x02, 0x43, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x3b, 0x02, 0x6c, 0x19, 0x0e, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x3f, 0x41, 0xc1, 0x22, 0x08, 0x10},\n\t\t\t\t\t\t \n\t{0xd1, 0x21, 0x43, 0xf0, 0x10, 0x78, 0xa8, 0x10},  \n\t{0xd1, 0x21, 0x47, 0x60, 0x80, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x4b, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x4f, 0x46, 0x36, 0x0f, 0x17, 0x10},  \n\t{0xd1, 0x21, 0x53, 0x7f, 0x96, 0x40, 0x40, 0x10},  \n\t{0xb1, 0x21, 0x57, 0x40, 0x0f, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x59, 0xba, 0x9a, 0x22, 0xb9, 0x10},  \n\t{0xd1, 0x21, 0x5d, 0x9b, 0x10, 0xf0, 0x05, 0x10},  \n\t{0xa1, 0x21, 0x61, 0x60, 0x00, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x62, 0x00, 0x00, 0x50, 0x30, 0x10},\n\t\t\t\t\t\t \n\t{0xa1, 0x21, 0x66, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xd1, 0x21, 0x67, 0x80, 0x7a, 0x90, 0x80, 0x10},  \n\t{0xa1, 0x21, 0x6b, 0x0a, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t \n\t{0xd1, 0x21, 0x6c, 0x30, 0x48, 0x80, 0x74, 0x10},  \n\t{0xd1, 0x21, 0x70, 0x64, 0x60, 0x5c, 0x58, 0x10},  \n\t{0xd1, 0x21, 0x74, 0x54, 0x4c, 0x40, 0x38, 0x10},  \n\t{0xd1, 0x21, 0x78, 0x34, 0x30, 0x2f, 0x2b, 0x10},  \n\t{0xd1, 0x21, 0x7c, 0x03, 0x07, 0x17, 0x34, 0x10},  \n\t{0xd1, 0x21, 0x80, 0x41, 0x4d, 0x58, 0x63, 0x10},  \n\t{0xd1, 0x21, 0x84, 0x6e, 0x77, 0x87, 0x95, 0x10},  \n\t{0xc1, 0x21, 0x88, 0xaf, 0xc7, 0xdf, 0x00, 0x10},  \n\t{0xc1, 0x21, 0x8b, 0x99, 0x99, 0xcf, 0x00, 0x10},  \n\t{0xb1, 0x21, 0x92, 0x00, 0x00, 0x00, 0x00, 0x10},  \n \n\t{0xa1, 0x21, 0xa1, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 ov7660_sensor_param1[][8] = {\n\t{0xa1, 0x21, 0x1e, 0x01, 0x00, 0x00, 0x00, 0x10},  \n\t\t\t\t\t\t \n\t{0xa1, 0x21, 0x1e, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x03, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t\t\t\t\t\t \n\t{0xa1, 0x21, 0x03, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x10, 0x20, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x10},  \n \n \n \n\t{0xa1, 0x21, 0x93, 0x00, 0x00, 0x00, 0x00, 0x10}, \n\t{0xa1, 0x21, 0x92, 0x25, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x10},  \n \n \n \n \n\t{0xa1, 0x21, 0x93, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x92, 0xff, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x2b, 0xc3, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\n\nstatic const u8 po1030_sensor_init[][8] = {\n \n\t{0xa1, 0x6e, 0x3f, 0x20, 0x00, 0x00, 0x00, 0x10},  \n\t{DELAY, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x6e, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x3e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x04, 0x02, 0xb1, 0x02, 0x39, 0x10},\n\t{0xd1, 0x6e, 0x08, 0x00, 0x01, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x0c, 0x02, 0x7f, 0x01, 0xe0, 0x10},\n\t{0xd1, 0x6e, 0x12, 0x03, 0x02, 0x00, 0x03, 0x10},\n\t{0xd1, 0x6e, 0x16, 0x85, 0x40, 0x4a, 0x40, 0x10},  \n\t{0xc1, 0x6e, 0x1a, 0x00, 0x80, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x1d, 0x08, 0x03, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x23, 0x00, 0xb0, 0x00, 0x94, 0x10},\n\t{0xd1, 0x6e, 0x27, 0x58, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x6e, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x2d, 0x14, 0x35, 0x61, 0x84, 0x10},  \n\t{0xd1, 0x6e, 0x31, 0xa2, 0xbd, 0xd8, 0xff, 0x10},\n\t{0xd1, 0x6e, 0x35, 0x06, 0x1e, 0x12, 0x02, 0x10},  \n\t{0xd1, 0x6e, 0x39, 0xaa, 0x53, 0x37, 0xd5, 0x10},\n\t{0xa1, 0x6e, 0x3d, 0xf2, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x3e, 0x00, 0x00, 0x80, 0x03, 0x10},\n\t{0xd1, 0x6e, 0x42, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xc1, 0x6e, 0x46, 0x00, 0x80, 0x80, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x4b, 0x02, 0xef, 0x08, 0xcd, 0x10},\n\t{0xd1, 0x6e, 0x4f, 0x00, 0xd0, 0x00, 0xa0, 0x10},\n\t{0xd1, 0x6e, 0x53, 0x01, 0xaa, 0x01, 0x40, 0x10},\n\t{0xd1, 0x6e, 0x5a, 0x50, 0x04, 0x30, 0x03, 0x10},  \n\t{0xa1, 0x6e, 0x5e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x5f, 0x10, 0x40, 0xff, 0x00, 0x10},\n\n\t{0xd1, 0x6e, 0x63, 0x40, 0x40, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x67, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x6b, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x6f, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xc1, 0x6e, 0x73, 0x10, 0x80, 0xeb, 0x00, 0x10},\n\t{}\n};\nstatic const u8 po1030_sensor_param1[][8] = {\n \n\t{0xa1, 0x6e, 0x1e, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x1e, 0x03, 0x00, 0x00, 0x00, 0x10},\n \n\t{0xc1, 0x6e, 0x1a, 0x02, 0xd4, 0xa4, 0x00, 0x10},  \n\t{0xa1, 0x6e, 0x15, 0x04, 0x00, 0x00, 0x00, 0x10},  \n\t{0xc1, 0x6e, 0x16, 0x40, 0x40, 0x40, 0x00, 0x10},  \n\n\t{0xa1, 0x6e, 0x1d, 0x08, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x6e, 0x06, 0x02, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x6e, 0x07, 0xd5, 0x00, 0x00, 0x00, 0x10},\n \n\t{}\n};\n\nstatic const u8 po2030n_sensor_init[][8] = {\n\t{0xa1, 0x6e, 0x1e, 0x1a, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x1f, 0x99, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x6e, 0x1e, 0x0a, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x1f, 0x19, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x6e, 0x20, 0x44, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x04, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x05, 0x70, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x06, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x07, 0x25, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x08, 0x00, 0xd0, 0x00, 0x08, 0x10},\n\t{0xd1, 0x6e, 0x0c, 0x03, 0x50, 0x01, 0xe8, 0x10},\n\t{0xd1, 0x6e, 0x1d, 0x20, 0x0a, 0x19, 0x44, 0x10},\n\t{0xd1, 0x6e, 0x21, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x25, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x29, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x31, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x35, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x39, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x3d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x41, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x45, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x49, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x4d, 0x00, 0x00, 0x00, 0xed, 0x10},\n\t{0xd1, 0x6e, 0x51, 0x17, 0x4a, 0x2f, 0xc0, 0x10},\n\t{0xd1, 0x6e, 0x55, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x59, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x5d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x61, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x65, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x69, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x6d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x71, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x75, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x79, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x7d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x81, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x85, 0x00, 0x00, 0x00, 0x08, 0x10},\n\t{0xd1, 0x6e, 0x89, 0x01, 0xe8, 0x00, 0x01, 0x10},\n\t{0xa1, 0x6e, 0x8d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x21, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x25, 0x00, 0x00, 0x00, 0x01, 0x10},\n\t{0xd1, 0x6e, 0x29, 0xe6, 0x00, 0xbd, 0x03, 0x10},\n\t{0xd1, 0x6e, 0x2d, 0x41, 0x38, 0x68, 0x40, 0x10},\n\t{0xd1, 0x6e, 0x31, 0x2b, 0x00, 0x36, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x35, 0x30, 0x30, 0x08, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x39, 0x00, 0x00, 0x33, 0x06, 0x10},\n\t{0xb1, 0x6e, 0x3d, 0x06, 0x02, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 po2030n_sensor_param1[][8] = {\n\t{0xa1, 0x6e, 0x1a, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{DELAY, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x6e, 0x1b, 0xf4, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x15, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xd1, 0x6e, 0x16, 0x40, 0x40, 0x40, 0x40, 0x10},  \n \n\t{0xa1, 0x6e, 0x1d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x04, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x05, 0x6f, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x06, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x6e, 0x07, 0x25, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\n\nstatic const u8 soi768_sensor_init[][8] = {\n\t{0xa1, 0x21, 0x12, 0x80, 0x00, 0x00, 0x00, 0x10},  \n\t{DELAY, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},  \n\t{0xa1, 0x21, 0x12, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x13, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x0f, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x19, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 soi768_sensor_param1[][8] = {\n\t{0xa1, 0x21, 0x10, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x01, 0x7f, 0x7f, 0x00, 0x00, 0x10},\n \n \n \n\t{0xa1, 0x21, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x10},\n \n\t{0xa1, 0x21, 0x02, 0x8d, 0x00, 0x00, 0x00, 0x10},\n \n\t{0xa1, 0x21, 0x00, 0x07, 0x00, 0x00, 0x00, 0x10},\n\t\t\t \n\t{0xa1, 0x21, 0x10, 0x3f, 0x00, 0x00, 0x00, 0x10},  \n\t{0xa1, 0x21, 0x04, 0x06, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x21, 0x2d, 0x63, 0x03, 0x00, 0x00, 0x10},\n\t\t\t \n\t{}\n};\n\nstatic const u8 sp80708_sensor_init[][8] = {\n\t{0xa1, 0x18, 0x06, 0xf9, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x09, 0x1f, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x0d, 0xc0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x0c, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x10, 0x40, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x11, 0x4e, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x12, 0x53, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x15, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x19, 0x18, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x1a, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x1b, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x1c, 0x28, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x1d, 0x02, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x1e, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x26, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x27, 0x1e, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x28, 0x5a, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x29, 0x28, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2a, 0x78, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2b, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2c, 0xf7, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2d, 0x2d, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2e, 0xd5, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x39, 0x42, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3a, 0x67, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3b, 0x87, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3c, 0xa3, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3d, 0xb0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3e, 0xbc, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x3f, 0xc8, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x40, 0xd4, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x41, 0xdf, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x42, 0xea, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x43, 0xf5, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x45, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x46, 0x60, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x47, 0x50, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x48, 0x30, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x49, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x4d, 0xae, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x4e, 0x03, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x4f, 0x66, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x50, 0x1c, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x44, 0x10, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x4a, 0x30, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x51, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x52, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x53, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x54, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x55, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x56, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x57, 0xe0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x58, 0xc0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x59, 0xab, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5a, 0xa0, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5b, 0x99, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5c, 0x90, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5e, 0x24, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5f, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x60, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x61, 0x73, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x63, 0x42, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x64, 0x42, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x65, 0x42, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x66, 0x24, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x67, 0x24, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x68, 0x08, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x2f, 0xc9, 0x00, 0x00, 0x00, 0x10},\n\t{}\n};\nstatic const u8 sp80708_sensor_param1[][8] = {\n\t{0xa1, 0x18, 0x0c, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x0c, 0x04, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x03, 0x01, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x04, 0xa4, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x14, 0x3f, 0x00, 0x00, 0x00, 0x10},\n\t{0xa1, 0x18, 0x5d, 0x80, 0x00, 0x00, 0x00, 0x10},\n\t{0xb1, 0x18, 0x11, 0x40, 0x40, 0x00, 0x00, 0x10},\n\t{}\n};\n\nstatic const u8 (*sensor_init[])[8] = {\n[SENSOR_ADCM1700] =\tadcm1700_sensor_init,\n[SENSOR_GC0307] =\tgc0307_sensor_init,\n[SENSOR_HV7131R] =\thv7131r_sensor_init,\n[SENSOR_MI0360] =\tmi0360_sensor_init,\n[SENSOR_MI0360B] =\tmi0360b_sensor_init,\n[SENSOR_MO4000] =\tmo4000_sensor_init,\n[SENSOR_MT9V111] =\tmt9v111_sensor_init,\n[SENSOR_OM6802] =\tom6802_sensor_init,\n[SENSOR_OV7630] =\tov7630_sensor_init,\n[SENSOR_OV7648] =\tov7648_sensor_init,\n[SENSOR_OV7660] =\tov7660_sensor_init,\n[SENSOR_PO1030] =\tpo1030_sensor_init,\n[SENSOR_PO2030N] =\tpo2030n_sensor_init,\n[SENSOR_SOI768] =\tsoi768_sensor_init,\n[SENSOR_SP80708] =\tsp80708_sensor_init,\n};\n\n \nstatic void reg_r(struct gspca_dev *gspca_dev,\n\t\t  u16 value, int len)\n{\n\tint ret;\n\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tif (len > USB_BUF_SZ) {\n\t\tgspca_err(gspca_dev, \"reg_r: buffer overflow\\n\");\n\t\treturn;\n\t}\n\n\tret = usb_control_msg(gspca_dev->dev,\n\t\t\tusb_rcvctrlpipe(gspca_dev->dev, 0),\n\t\t\t0,\n\t\t\tUSB_DIR_IN | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\tvalue, 0,\n\t\t\tgspca_dev->usb_buf, len,\n\t\t\t500);\n\tgspca_dbg(gspca_dev, D_USBI, \"reg_r [%02x] -> %02x\\n\",\n\t\t  value, gspca_dev->usb_buf[0]);\n\tif (ret < 0) {\n\t\tpr_err(\"reg_r err %d\\n\", ret);\n\t\tgspca_dev->usb_err = ret;\n\t\t \n\t\tmemset(gspca_dev->usb_buf, 0, USB_BUF_SZ);\n\t}\n}\n\nstatic void reg_w1(struct gspca_dev *gspca_dev,\n\t\t   u16 value,\n\t\t   u8 data)\n{\n\tint ret;\n\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tgspca_dbg(gspca_dev, D_USBO, \"reg_w1 [%04x] = %02x\\n\", value, data);\n\tgspca_dev->usb_buf[0] = data;\n\tret = usb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\tvalue,\n\t\t\t0,\n\t\t\tgspca_dev->usb_buf, 1,\n\t\t\t500);\n\tif (ret < 0) {\n\t\tpr_err(\"reg_w1 err %d\\n\", ret);\n\t\tgspca_dev->usb_err = ret;\n\t}\n}\nstatic void reg_w(struct gspca_dev *gspca_dev,\n\t\t\t  u16 value,\n\t\t\t  const u8 *buffer,\n\t\t\t  int len)\n{\n\tint ret;\n\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tgspca_dbg(gspca_dev, D_USBO, \"reg_w [%04x] = %02x %02x ..\\n\",\n\t\t  value, buffer[0], buffer[1]);\n\n\tif (len > USB_BUF_SZ) {\n\t\tgspca_err(gspca_dev, \"reg_w: buffer overflow\\n\");\n\t\treturn;\n\t}\n\n\tmemcpy(gspca_dev->usb_buf, buffer, len);\n\tret = usb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\tvalue, 0,\n\t\t\tgspca_dev->usb_buf, len,\n\t\t\t500);\n\tif (ret < 0) {\n\t\tpr_err(\"reg_w err %d\\n\", ret);\n\t\tgspca_dev->usb_err = ret;\n\t}\n}\n\n \nstatic void i2c_w1(struct gspca_dev *gspca_dev, u8 reg, u8 val)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint ret;\n\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tgspca_dbg(gspca_dev, D_USBO, \"i2c_w1 [%02x] = %02x\\n\", reg, val);\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_OM6802:\n\tcase SENSOR_GC0307:\t\t \n\t\tgspca_dev->usb_buf[0] = 0x80 | (2 << 4);\n\t\tbreak;\n\tdefault:\t\t\t \n\t\tgspca_dev->usb_buf[0] = 0x81 | (2 << 4);\n\t\tbreak;\n\t}\n\tgspca_dev->usb_buf[1] = sd->i2c_addr;\n\tgspca_dev->usb_buf[2] = reg;\n\tgspca_dev->usb_buf[3] = val;\n\tgspca_dev->usb_buf[4] = 0;\n\tgspca_dev->usb_buf[5] = 0;\n\tgspca_dev->usb_buf[6] = 0;\n\tgspca_dev->usb_buf[7] = 0x10;\n\tret = usb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\t0x08,\t\t\t \n\t\t\t0,\n\t\t\tgspca_dev->usb_buf, 8,\n\t\t\t500);\n\tmsleep(2);\n\tif (ret < 0) {\n\t\tpr_err(\"i2c_w1 err %d\\n\", ret);\n\t\tgspca_dev->usb_err = ret;\n\t}\n}\n\n \nstatic void i2c_w8(struct gspca_dev *gspca_dev,\n\t\t   const u8 *buffer)\n{\n\tint ret;\n\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tgspca_dbg(gspca_dev, D_USBO, \"i2c_w8 [%02x] = %02x ..\\n\",\n\t\t  buffer[2], buffer[3]);\n\tmemcpy(gspca_dev->usb_buf, buffer, 8);\n\tret = usb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\t0x08, 0,\t\t \n\t\t\tgspca_dev->usb_buf, 8,\n\t\t\t500);\n\tmsleep(2);\n\tif (ret < 0) {\n\t\tpr_err(\"i2c_w8 err %d\\n\", ret);\n\t\tgspca_dev->usb_err = ret;\n\t}\n}\n\n \nstatic void i2c_r(struct gspca_dev *gspca_dev, u8 reg, int len)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu8 mode[8];\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_OM6802:\n\tcase SENSOR_GC0307:\t\t \n\t\tmode[0] = 0x80 | 0x10;\n\t\tbreak;\n\tdefault:\t\t\t \n\t\tmode[0] = 0x81 | 0x10;\n\t\tbreak;\n\t}\n\tmode[1] = sd->i2c_addr;\n\tmode[2] = reg;\n\tmode[3] = 0;\n\tmode[4] = 0;\n\tmode[5] = 0;\n\tmode[6] = 0;\n\tmode[7] = 0x10;\n\ti2c_w8(gspca_dev, mode);\n\tmsleep(2);\n\tmode[0] = (mode[0] & 0x81) | (len << 4) | 0x02;\n\tmode[2] = 0;\n\ti2c_w8(gspca_dev, mode);\n\tmsleep(2);\n\treg_r(gspca_dev, 0x0a, 5);\n}\n\nstatic void i2c_w_seq(struct gspca_dev *gspca_dev,\n\t\t\tconst u8 (*data)[8])\n{\n\twhile ((*data)[0] != 0) {\n\t\tif ((*data)[0] != DELAY)\n\t\t\ti2c_w8(gspca_dev, *data);\n\t\telse\n\t\t\tmsleep((*data)[1]);\n\t\tdata++;\n\t}\n}\n\n \n \nstatic void hv7131r_probe(struct gspca_dev *gspca_dev)\n{\n\ti2c_w1(gspca_dev, 0x02, 0);\t\t \n\tmsleep(10);\n\treg_w1(gspca_dev, 0x02, 0x66);\t\t \n\tmsleep(10);\n\ti2c_r(gspca_dev, 0, 5);\t\t\t \n\tif (gspca_dev->usb_buf[0] == 0x02\t \n\t    && gspca_dev->usb_buf[1] == 0x09\n\t    && gspca_dev->usb_buf[2] == 0x01) {\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor HV7131R found\\n\");\n\t\treturn;\n\t}\n\tpr_warn(\"Erroneous HV7131R ID 0x%02x 0x%02x 0x%02x\\n\",\n\t\tgspca_dev->usb_buf[0], gspca_dev->usb_buf[1],\n\t\tgspca_dev->usb_buf[2]);\n}\n\nstatic void mi0360_probe(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint i, j;\n\tu16 val = 0;\n\tstatic const u8 probe_tb[][4][8] = {\n\t    {\t\t\t\t\t \n\t\t{0xb0, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10},\n\t\t{0x90, 0x5d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t\t{0xa2, 0x5d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t\t{0xb0, 0x5d, 0x07, 0x00, 0x00, 0x00, 0x00, 0x10}\n\t    },\n\t    {\t\t\t\t\t \n\t\t{0xb0, 0x5c, 0x01, 0x00, 0x04, 0x00, 0x00, 0x10},\n\t\t{0x90, 0x5c, 0x36, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t\t{0xa2, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},\n\t\t{}\n\t    },\n\t};\n\n\tfor (i = 0; i < ARRAY_SIZE(probe_tb); i++) {\n\t\treg_w1(gspca_dev, 0x17, 0x62);\n\t\treg_w1(gspca_dev, 0x01, 0x08);\n\t\tfor (j = 0; j < 3; j++)\n\t\t\ti2c_w8(gspca_dev, probe_tb[i][j]);\n\t\tmsleep(2);\n\t\treg_r(gspca_dev, 0x0a, 5);\n\t\tval = (gspca_dev->usb_buf[3] << 8) | gspca_dev->usb_buf[4];\n\t\tif (probe_tb[i][3][0] != 0)\n\t\t\ti2c_w8(gspca_dev, probe_tb[i][3]);\n\t\treg_w1(gspca_dev, 0x01, 0x29);\n\t\treg_w1(gspca_dev, 0x17, 0x42);\n\t\tif (val != 0xffff)\n\t\t\tbreak;\n\t}\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tswitch (val) {\n\tcase 0x8221:\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor mi0360b\\n\");\n\t\tsd->sensor = SENSOR_MI0360B;\n\t\tbreak;\n\tcase 0x823a:\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor mt9v111\\n\");\n\t\tsd->sensor = SENSOR_MT9V111;\n\t\tbreak;\n\tcase 0x8243:\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor mi0360\\n\");\n\t\tbreak;\n\tdefault:\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Unknown sensor %04x - forced to mi0360\\n\",\n\t\t\t  val);\n\t\tbreak;\n\t}\n}\n\nstatic void ov7630_probe(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu16 val;\n\n\t \n\treg_w1(gspca_dev, 0x17, 0x62);\n\treg_w1(gspca_dev, 0x01, 0x08);\n\tsd->i2c_addr = 0x21;\n\ti2c_r(gspca_dev, 0x0a, 2);\n\tval = (gspca_dev->usb_buf[3] << 8) | gspca_dev->usb_buf[4];\n\treg_w1(gspca_dev, 0x01, 0x29);\n\treg_w1(gspca_dev, 0x17, 0x42);\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tif (val == 0x7628) {\t\t\t \n\t\tsd->sensor = SENSOR_SOI768;\n \n\t\tgspca_dev->cam.input_flags =\n\t\t\t\tV4L2_IN_ST_VFLIP | V4L2_IN_ST_HFLIP;\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor soi768\\n\");\n\t\treturn;\n\t}\n\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor ov%04x\\n\", val);\n}\n\nstatic void ov7648_probe(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu16 val;\n\n\t \n\treg_w1(gspca_dev, 0x17, 0x62);\n\treg_w1(gspca_dev, 0x01, 0x08);\n\tsd->i2c_addr = 0x21;\n\ti2c_r(gspca_dev, 0x0a, 2);\n\tval = (gspca_dev->usb_buf[3] << 8) | gspca_dev->usb_buf[4];\n\treg_w1(gspca_dev, 0x01, 0x29);\n\treg_w1(gspca_dev, 0x17, 0x42);\n\tif ((val & 0xff00) == 0x7600) {\t\t \n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor ov%04x\\n\", val);\n\t\treturn;\n\t}\n\n\t \n\treg_w1(gspca_dev, 0x17, 0x62);\n\treg_w1(gspca_dev, 0x01, 0x08);\n\tsd->i2c_addr = 0x6e;\n\ti2c_r(gspca_dev, 0x00, 2);\n\tval = (gspca_dev->usb_buf[3] << 8) | gspca_dev->usb_buf[4];\n\treg_w1(gspca_dev, 0x01, 0x29);\n\treg_w1(gspca_dev, 0x17, 0x42);\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tif (val == 0x1030) {\t\t\t \n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor po1030\\n\");\n\t\tsd->sensor = SENSOR_PO1030;\n\t\treturn;\n\t}\n\tpr_err(\"Unknown sensor %04x\\n\", val);\n}\n\n \nstatic void po2030n_probe(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu16 val;\n\n\t \n\treg_w1(gspca_dev, 0x17, 0x62);\n\treg_w1(gspca_dev, 0x01, 0x08);\n\treg_w1(gspca_dev, 0x02, 0x22);\n\tsd->i2c_addr = 0x21;\n\ti2c_r(gspca_dev, 0x00, 1);\n\tval = gspca_dev->usb_buf[4];\n\treg_w1(gspca_dev, 0x01, 0x29);\t\t \n\treg_w1(gspca_dev, 0x17, 0x42);\n\tif (val == 0x99) {\t\t\t \n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor gc0307\\n\");\n\t\tsd->sensor = SENSOR_GC0307;\n\t\treturn;\n\t}\n\n\t \n\treg_w1(gspca_dev, 0x17, 0x62);\n\treg_w1(gspca_dev, 0x01, 0x0a);\n\tsd->i2c_addr = 0x6e;\n\ti2c_r(gspca_dev, 0x00, 2);\n\tval = (gspca_dev->usb_buf[3] << 8) | gspca_dev->usb_buf[4];\n\treg_w1(gspca_dev, 0x01, 0x29);\n\treg_w1(gspca_dev, 0x17, 0x42);\n\tif (gspca_dev->usb_err < 0)\n\t\treturn;\n\tif (val == 0x2030) {\n\t\tgspca_dbg(gspca_dev, D_PROBE, \"Sensor po2030n\\n\");\n \n\t} else {\n\t\tpr_err(\"Unknown sensor ID %04x\\n\", val);\n\t}\n}\n\n \nstatic int sd_config(struct gspca_dev *gspca_dev,\n\t\t\tconst struct usb_device_id *id)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tstruct cam *cam;\n\n\tsd->bridge = id->driver_info >> 16;\n\tsd->sensor = id->driver_info >> 8;\n\tsd->flags = id->driver_info;\n\n\tcam = &gspca_dev->cam;\n\tif (sd->sensor == SENSOR_ADCM1700) {\n\t\tcam->cam_mode = cif_mode;\n\t\tcam->nmodes = ARRAY_SIZE(cif_mode);\n\t} else {\n\t\tcam->cam_mode = vga_mode;\n\t\tcam->nmodes = ARRAY_SIZE(vga_mode);\n\t}\n\tcam->npkt = 24;\t\t\t \n\n\tsd->ag_cnt = -1;\n\tsd->quality = QUALITY_DEF;\n\n\tINIT_WORK(&sd->work, qual_upd);\n\n\treturn 0;\n}\n\n \nstatic int sd_init(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tconst u8 *sn9c1xx;\n\tu8 regGpio[] = { 0x29, 0x70 };\t\t \n\tu8 regF1;\n\n\t \n\treg_w1(gspca_dev, 0xf1, 0x01);\n\treg_r(gspca_dev, 0x00, 1);\n\treg_w1(gspca_dev, 0xf1, 0x00);\n\treg_r(gspca_dev, 0x00, 1);\t\t \n\tregF1 = gspca_dev->usb_buf[0];\n\tif (gspca_dev->usb_err < 0)\n\t\treturn gspca_dev->usb_err;\n\tgspca_dbg(gspca_dev, D_PROBE, \"Sonix chip id: %02x\\n\", regF1);\n\tif (gspca_dev->audio)\n\t\tregGpio[1] |= 0x04;\t\t \n\tswitch (sd->bridge) {\n\tcase BRIDGE_SN9C102P:\n\tcase BRIDGE_SN9C105:\n\t\tif (regF1 != 0x11)\n\t\t\treturn -ENODEV;\n\t\tbreak;\n\tdefault:\n \n \n\t\tif (regF1 != 0x12)\n\t\t\treturn -ENODEV;\n\t}\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_MI0360:\n\t\tmi0360_probe(gspca_dev);\n\t\tbreak;\n\tcase SENSOR_OV7630:\n\t\tov7630_probe(gspca_dev);\n\t\tbreak;\n\tcase SENSOR_OV7648:\n\t\tov7648_probe(gspca_dev);\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\t\tpo2030n_probe(gspca_dev);\n\t\tbreak;\n\t}\n\n\tswitch (sd->bridge) {\n\tcase BRIDGE_SN9C102P:\n\t\treg_w1(gspca_dev, 0x02, regGpio[1]);\n\t\tbreak;\n\tdefault:\n\t\treg_w(gspca_dev, 0x01, regGpio, 2);\n\t\tbreak;\n\t}\n\n\t \n\treg_w1(gspca_dev, 0xf1, 0x00);\n\n\t \n\tsn9c1xx = sn_tb[sd->sensor];\n\tsd->i2c_addr = sn9c1xx[9];\n\n\treturn gspca_dev->usb_err;\n}\n\nstatic int sd_s_ctrl(struct v4l2_ctrl *ctrl);\n\nstatic const struct v4l2_ctrl_ops sd_ctrl_ops = {\n\t.s_ctrl = sd_s_ctrl,\n};\n\n \nstatic int sd_init_controls(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tstruct v4l2_ctrl_handler *hdl = &gspca_dev->ctrl_handler;\n\n\tgspca_dev->vdev.ctrl_handler = hdl;\n\tv4l2_ctrl_handler_init(hdl, 14);\n\n\tsd->brightness = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_BRIGHTNESS, 0, 255, 1, 128);\n#define CONTRAST_MAX 127\n\tsd->contrast = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_CONTRAST, 0, CONTRAST_MAX, 1, 20);\n#define COLORS_DEF 25\n\tsd->saturation = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_SATURATION, 0, 40, 1, COLORS_DEF);\n\tsd->red_bal = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_RED_BALANCE, 24, 40, 1, 32);\n\tsd->blue_bal = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_BLUE_BALANCE, 24, 40, 1, 32);\n#define GAMMA_DEF 20\n\tsd->gamma = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_GAMMA, 0, 40, 1, GAMMA_DEF);\n\n\tif (sd->sensor == SENSOR_OM6802)\n\t\tsd->sharpness = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_SHARPNESS, 0, 255, 1, 16);\n\telse\n\t\tsd->sharpness = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_SHARPNESS, 0, 255, 1, 90);\n\n\tif (sd->flags & F_ILLUM)\n\t\tsd->illum = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_ILLUMINATORS_1, 0, 1, 1, 0);\n\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tgspca_dev->exposure = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_EXPOSURE, 500, 1500, 1, 1024);\n\t\tgspca_dev->gain = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_GAIN, 4, 49, 1, 15);\n\t\tsd->hflip = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_HFLIP, 0, 1, 1, 0);\n\t}\n\n\tif (sd->sensor != SENSOR_ADCM1700 && sd->sensor != SENSOR_OV7660 &&\n\t    sd->sensor != SENSOR_PO1030 && sd->sensor != SENSOR_SOI768 &&\n\t    sd->sensor != SENSOR_SP80708)\n\t\tgspca_dev->autogain = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_AUTOGAIN, 0, 1, 1, 1);\n\n\tif (sd->sensor == SENSOR_HV7131R || sd->sensor == SENSOR_OV7630 ||\n\t    sd->sensor == SENSOR_OV7648 || sd->sensor == SENSOR_PO2030N)\n\t\tsd->vflip = v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_VFLIP, 0, 1, 1, 0);\n\n\tif (sd->sensor == SENSOR_OV7630 || sd->sensor == SENSOR_OV7648 ||\n\t    sd->sensor == SENSOR_OV7660)\n\t\tsd->freq = v4l2_ctrl_new_std_menu(hdl, &sd_ctrl_ops,\n\t\t\tV4L2_CID_POWER_LINE_FREQUENCY,\n\t\t\tV4L2_CID_POWER_LINE_FREQUENCY_60HZ, 0,\n\t\t\tV4L2_CID_POWER_LINE_FREQUENCY_50HZ);\n\n\tif (hdl->error) {\n\t\tpr_err(\"Could not initialize controls\\n\");\n\t\treturn hdl->error;\n\t}\n\n\tv4l2_ctrl_cluster(2, &sd->red_bal);\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tv4l2_ctrl_cluster(2, &sd->vflip);\n\t\tv4l2_ctrl_auto_cluster(3, &gspca_dev->autogain, 0, false);\n\t}\n\n\treturn 0;\n}\n\nstatic u32 expo_adjust(struct gspca_dev *gspca_dev,\n\t\t\tu32 expo)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_GC0307: {\n\t\tint a, b;\n\n\t\t \n\t\ta = 19 + expo * 25 / 256;\n\t\ti2c_w1(gspca_dev, 0x68, a);\n\t\ta -= 12;\n\t\tb = a * a * 4;\t\t\t \n\t\ti2c_w1(gspca_dev, 0x03, b >> 8);\n\t\ti2c_w1(gspca_dev, 0x04, b);\n\t\tbreak;\n\t    }\n\tcase SENSOR_HV7131R: {\n\t\tu8 Expodoit[] =\n\t\t\t{ 0xc1, 0x11, 0x25, 0x00, 0x00, 0x00, 0x00, 0x16 };\n\n\t\tExpodoit[3] = expo >> 16;\n\t\tExpodoit[4] = expo >> 8;\n\t\tExpodoit[5] = expo;\n\t\ti2c_w8(gspca_dev, Expodoit);\n\t\tbreak;\n\t    }\n\tcase SENSOR_MI0360:\n\tcase SENSOR_MI0360B: {\n\t\tu8 expoMi[] =\t\t \n\t\t\t{ 0xb1, 0x5d, 0x09, 0x00, 0x00, 0x00, 0x00, 0x16 };\n\t\tstatic const u8 doit[] =\t\t \n\t\t\t{ 0xb1, 0x5d, 0x07, 0x00, 0x03, 0x00, 0x00, 0x10 };\n\t\tstatic const u8 sensorgo[] =\t\t \n\t\t\t{ 0xb1, 0x5d, 0x07, 0x00, 0x02, 0x00, 0x00, 0x10 };\n\n\t\tif (expo > 0x0635)\n\t\t\texpo = 0x0635;\n\t\telse if (expo < 0x0001)\n\t\t\texpo = 0x0001;\n\t\texpoMi[3] = expo >> 8;\n\t\texpoMi[4] = expo;\n\t\ti2c_w8(gspca_dev, expoMi);\n\t\ti2c_w8(gspca_dev, doit);\n\t\ti2c_w8(gspca_dev, sensorgo);\n\t\tbreak;\n\t    }\n\tcase SENSOR_MO4000: {\n\t\tu8 expoMof[] =\n\t\t\t{ 0xa1, 0x21, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x10 };\n\t\tu8 expoMo10[] =\n\t\t\t{ 0xa1, 0x21, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10 };\n\t\tstatic const u8 gainMo[] =\n\t\t\t{ 0xa1, 0x21, 0x00, 0x10, 0x00, 0x00, 0x00, 0x1d };\n\n\t\tif (expo > 0x1fff)\n\t\t\texpo = 0x1fff;\n\t\telse if (expo < 0x0001)\n\t\t\texpo = 0x0001;\n\t\texpoMof[3] = (expo & 0x03fc) >> 2;\n\t\ti2c_w8(gspca_dev, expoMof);\n\t\texpoMo10[3] = ((expo & 0x1c00) >> 10)\n\t\t\t\t| ((expo & 0x0003) << 4);\n\t\ti2c_w8(gspca_dev, expoMo10);\n\t\ti2c_w8(gspca_dev, gainMo);\n\t\tgspca_dbg(gspca_dev, D_FRAM, \"set exposure %d\\n\",\n\t\t\t  ((expoMo10[3] & 0x07) << 10)\n\t\t\t  | (expoMof[3] << 2)\n\t\t\t  | ((expoMo10[3] & 0x30) >> 4));\n\t\tbreak;\n\t    }\n\tcase SENSOR_MT9V111: {\n\t\tu8 expo_c1[] =\n\t\t\t{ 0xb1, 0x5c, 0x09, 0x00, 0x00, 0x00, 0x00, 0x10 };\n\n\t\tif (expo > 0x0390)\n\t\t\texpo = 0x0390;\n\t\telse if (expo < 0x0060)\n\t\t\texpo = 0x0060;\n\t\texpo_c1[3] = expo >> 8;\n\t\texpo_c1[4] = expo;\n\t\ti2c_w8(gspca_dev, expo_c1);\n\t\tbreak;\n\t    }\n\tcase SENSOR_OM6802: {\n\t\tu8 gainOm[] =\n\t\t\t{ 0xa0, 0x34, 0xe5, 0x00, 0x00, 0x00, 0x00, 0x10 };\n\t\t\t\t \n\n\t\tif (expo > 0x03ff)\n\t\t\texpo = 0x03ff;\n\t\tif (expo < 0x0001)\n\t\t\texpo = 0x0001;\n\t\tgainOm[3] = expo >> 2;\n\t\ti2c_w8(gspca_dev, gainOm);\n\t\treg_w1(gspca_dev, 0x96, expo >> 5);\n\t\tgspca_dbg(gspca_dev, D_FRAM, \"set exposure %d\\n\", gainOm[3]);\n\t\tbreak;\n\t    }\n\t}\n\treturn expo;\n}\n\nstatic void setbrightness(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tunsigned int expo;\n\tint brightness = sd->brightness->val;\n\tu8 k2;\n\n\tk2 = (brightness - 0x80) >> 2;\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\t\tif (k2 > 0x1f)\n\t\t\tk2 = 0;\t\t \n\t\tbreak;\n\tcase SENSOR_HV7131R:\n\t\texpo = brightness << 12;\n\t\tif (expo > 0x002dc6c0)\n\t\t\texpo = 0x002dc6c0;\n\t\telse if (expo < 0x02a0)\n\t\t\texpo = 0x02a0;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\tbreak;\n\tcase SENSOR_MI0360:\n\tcase SENSOR_MO4000:\n\t\texpo = brightness << 4;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\tbreak;\n\tcase SENSOR_MI0360B:\n\t\texpo = brightness << 2;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\tbreak;\n\tcase SENSOR_GC0307:\n\t\texpo = brightness;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\treturn;\t\t\t \n\tcase SENSOR_MT9V111:\n\t\texpo = brightness << 2;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\treturn;\t\t\t \n\tcase SENSOR_OM6802:\n\t\texpo = brightness << 2;\n\t\tsd->exposure = expo_adjust(gspca_dev, expo);\n\t\treturn;\t\t\t \n\t}\n\n\treg_w1(gspca_dev, 0x96, k2);\t \n}\n\nstatic void setcontrast(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu8 k2;\n\tu8 contrast[6];\n\n\tk2 = sd->contrast->val * 37 / (CONTRAST_MAX + 1)\n\t\t\t\t+ 37;\t\t \n\tcontrast[0] = (k2 + 1) / 2;\t\t \n\tcontrast[1] = 0;\n\tcontrast[2] = k2;\t\t\t \n\tcontrast[3] = 0;\n\tcontrast[4] = k2 / 5;\t\t\t \n\tcontrast[5] = 0;\n\treg_w(gspca_dev, 0x84, contrast, sizeof contrast);\n}\n\nstatic void setcolors(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint i, v, colors;\n\tconst s16 *uv;\n\tu8 reg8a[12];\t\t\t \n\tstatic const s16 uv_com[6] = {\t \n\t\t-24, -38, 64,\t\t \n\t\t 62, -51, -9\t\t \n\t};\n\tstatic const s16 uv_mi0360b[6] = {\n\t\t-20, -38, 64,\t\t \n\t\t 60, -51, -9\t\t \n\t};\n\n\tcolors = sd->saturation->val;\n\tif (sd->sensor == SENSOR_MI0360B)\n\t\tuv = uv_mi0360b;\n\telse\n\t\tuv = uv_com;\n\tfor (i = 0; i < 6; i++) {\n\t\tv = uv[i] * colors / COLORS_DEF;\n\t\treg8a[i * 2] = v;\n\t\treg8a[i * 2 + 1] = (v >> 8) & 0x0f;\n\t}\n\treg_w(gspca_dev, 0x8a, reg8a, sizeof reg8a);\n}\n\nstatic void setredblue(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tu8 rg1b[] =\t\t \n\t\t\t{0xc1, 0x6e, 0x16, 0x00, 0x40, 0x00, 0x00, 0x10};\n\n\t\t \n\t\trg1b[3] = sd->red_bal->val * 2;\n\t\trg1b[5] = sd->blue_bal->val * 2;\n\t\ti2c_w8(gspca_dev, rg1b);\n\t\treturn;\n\t}\n\treg_w1(gspca_dev, 0x05, sd->red_bal->val);\n \n\treg_w1(gspca_dev, 0x06, sd->blue_bal->val);\n}\n\nstatic void setgamma(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint i, val;\n\tu8 gamma[17];\n\tconst u8 *gamma_base;\n\tstatic const u8 delta[17] = {\n\t\t0x00, 0x14, 0x1c, 0x1c, 0x1c, 0x1c, 0x1b, 0x1a,\n\t\t0x18, 0x13, 0x10, 0x0e, 0x08, 0x07, 0x04, 0x02, 0x00\n\t};\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\t\tgamma_base = gamma_spec_0;\n\t\tbreak;\n\tcase SENSOR_HV7131R:\n\tcase SENSOR_MI0360B:\n\tcase SENSOR_MT9V111:\n\t\tgamma_base = gamma_spec_1;\n\t\tbreak;\n\tcase SENSOR_GC0307:\n\t\tgamma_base = gamma_spec_2;\n\t\tbreak;\n\tcase SENSOR_SP80708:\n\t\tgamma_base = gamma_spec_3;\n\t\tbreak;\n\tdefault:\n\t\tgamma_base = gamma_def;\n\t\tbreak;\n\t}\n\n\tval = sd->gamma->val;\n\tfor (i = 0; i < sizeof gamma; i++)\n\t\tgamma[i] = gamma_base[i]\n\t\t\t+ delta[i] * (val - GAMMA_DEF) / 32;\n\treg_w(gspca_dev, 0x20, gamma, sizeof gamma);\n}\n\nstatic void setexposure(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tu8 rexpo[] =\t\t \n\t\t\t{0xa1, 0x6e, 0x1a, 0x00, 0x40, 0x00, 0x00, 0x10};\n\n\t\trexpo[3] = gspca_dev->exposure->val >> 8;\n\t\ti2c_w8(gspca_dev, rexpo);\n\t\tmsleep(6);\n\t\trexpo[2] = 0x1b;\n\t\trexpo[3] = gspca_dev->exposure->val;\n\t\ti2c_w8(gspca_dev, rexpo);\n\t}\n}\n\nstatic void setautogain(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_OV7630:\n\tcase SENSOR_OV7648: {\n\t\tu8 comb;\n\n\t\tif (sd->sensor == SENSOR_OV7630)\n\t\t\tcomb = 0xc0;\n\t\telse\n\t\t\tcomb = 0xa0;\n\t\tif (gspca_dev->autogain->val)\n\t\t\tcomb |= 0x03;\n\t\ti2c_w1(&sd->gspca_dev, 0x13, comb);\n\t\treturn;\n\t    }\n\t}\n\tif (gspca_dev->autogain->val)\n\t\tsd->ag_cnt = AG_CNT_START;\n\telse\n\t\tsd->ag_cnt = -1;\n}\n\nstatic void setgain(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tu8 rgain[] =\t\t \n\t\t\t{0xa1, 0x6e, 0x15, 0x00, 0x40, 0x00, 0x00, 0x15};\n\n\t\trgain[3] = gspca_dev->gain->val;\n\t\ti2c_w8(gspca_dev, rgain);\n\t}\n}\n\nstatic void sethvflip(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tu8 comn;\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_HV7131R:\n\t\tcomn = 0x18;\t\t\t \n\t\tif (sd->vflip->val)\n\t\t\tcomn |= 0x01;\n\t\ti2c_w1(gspca_dev, 0x01, comn);\t \n\t\tbreak;\n\tcase SENSOR_OV7630:\n\t\tcomn = 0x02;\n\t\tif (!sd->vflip->val)\n\t\t\tcomn |= 0x80;\n\t\ti2c_w1(gspca_dev, 0x75, comn);\n\t\tbreak;\n\tcase SENSOR_OV7648:\n\t\tcomn = 0x06;\n\t\tif (sd->vflip->val)\n\t\t\tcomn |= 0x80;\n\t\ti2c_w1(gspca_dev, 0x75, comn);\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\t\t \n\t\tcomn = 0x0a;\n\t\tif (sd->hflip->val)\n\t\t\tcomn |= 0x80;\n\t\tif (sd->vflip->val)\n\t\t\tcomn |= 0x40;\n\t\ti2c_w1(&sd->gspca_dev, 0x1e, comn);\n\t\tbreak;\n\t}\n}\n\nstatic void setsharpness(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\treg_w1(gspca_dev, 0x99, sd->sharpness->val);\n}\n\nstatic void setillum(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\t\treg_w1(gspca_dev, 0x02,\t\t\t\t \n\t\t\tsd->illum->val ? 0x64 : 0x60);\n\t\tbreak;\n\tcase SENSOR_MT9V111:\n\t\treg_w1(gspca_dev, 0x02,\n\t\t\tsd->illum->val ? 0x77 : 0x74);\n \n \n \n\t\tbreak;\n\t}\n}\n\nstatic void setfreq(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tif (sd->sensor == SENSOR_OV7660) {\n\t\tu8 com8;\n\n\t\tcom8 = 0xdf;\t\t \n\t\tswitch (sd->freq->val) {\n\t\tcase 0:  \n\t\t\ti2c_w1(gspca_dev, 0x13, com8 | 0x20);\n\t\t\tbreak;\n\t\tcase 1:  \n\t\t\ti2c_w1(gspca_dev, 0x13, com8);\n\t\t\ti2c_w1(gspca_dev, 0x3b, 0x0a);\n\t\t\tbreak;\n\t\tcase 2:  \n\t\t\ti2c_w1(gspca_dev, 0x13, com8);\n\t\t\ti2c_w1(gspca_dev, 0x3b, 0x02);\n\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tu8 reg2a = 0, reg2b = 0, reg2d = 0;\n\n\t\t \n\t\tswitch (sd->sensor) {\n\t\tcase SENSOR_OV7630:\n\t\t\treg2a = 0x08;\n\t\t\treg2d = 0x01;\n\t\t\tbreak;\n\t\tcase SENSOR_OV7648:\n\t\t\treg2a = 0x11;\n\t\t\treg2d = 0x81;\n\t\t\tbreak;\n\t\t}\n\n\t\tswitch (sd->freq->val) {\n\t\tcase 0:  \n\t\t\tbreak;\n\t\tcase 1:  \n\t\t\treg2a |= 0x80;\n\t\t\treg2b = 0xac;\n\t\t\treg2d |= 0x04;\n\t\t\tbreak;\n\t\tcase 2:  \n\t\t\treg2a |= 0x80;\n\t\t\treg2d |= 0x04;\n\t\t\tbreak;\n\t\t}\n\t\ti2c_w1(gspca_dev, 0x2a, reg2a);\n\t\ti2c_w1(gspca_dev, 0x2b, reg2b);\n\t\ti2c_w1(gspca_dev, 0x2d, reg2d);\n\t}\n}\n\nstatic void setjpegqual(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tjpeg_set_qual(sd->jpeg_hdr, sd->quality);\n#if USB_BUF_SZ < 64\n#error \"No room enough in usb_buf for quantization table\"\n#endif\n\tmemcpy(gspca_dev->usb_buf, &sd->jpeg_hdr[JPEG_QT0_OFFSET], 64);\n\tusb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\t0x0100, 0,\n\t\t\tgspca_dev->usb_buf, 64,\n\t\t\t500);\n\tmemcpy(gspca_dev->usb_buf, &sd->jpeg_hdr[JPEG_QT1_OFFSET], 64);\n\tusb_control_msg(gspca_dev->dev,\n\t\t\tusb_sndctrlpipe(gspca_dev->dev, 0),\n\t\t\t0x08,\n\t\t\tUSB_DIR_OUT | USB_TYPE_VENDOR | USB_RECIP_INTERFACE,\n\t\t\t0x0140, 0,\n\t\t\tgspca_dev->usb_buf, 64,\n\t\t\t500);\n\n\tsd->reg18 ^= 0x40;\n\treg_w1(gspca_dev, 0x18, sd->reg18);\n}\n\n \n \nstatic void qual_upd(struct work_struct *work)\n{\n\tstruct sd *sd = container_of(work, struct sd, work);\n\tstruct gspca_dev *gspca_dev = &sd->gspca_dev;\n\n\t \n\tmutex_lock(&gspca_dev->usb_lock);\n\tgspca_dbg(gspca_dev, D_STREAM, \"qual_upd %d%%\\n\", sd->quality);\n\tgspca_dev->usb_err = 0;\n\tsetjpegqual(gspca_dev);\n\tmutex_unlock(&gspca_dev->usb_lock);\n}\n\n \nstatic int sd_start(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint i;\n\tu8 reg01, reg17;\n\tu8 reg0102[2];\n\tconst u8 *sn9c1xx;\n\tconst u8 (*init)[8];\n\tconst u8 *reg9a;\n\tint mode;\n\tstatic const u8 reg9a_def[] =\n\t\t{0x00, 0x40, 0x20, 0x00, 0x00, 0x00};\n\tstatic const u8 reg9a_spec[] =\n\t\t{0x00, 0x40, 0x38, 0x30, 0x00, 0x20};\n\tstatic const u8 regd4[] = {0x60, 0x00, 0x00};\n\tstatic const u8 C0[] = { 0x2d, 0x2d, 0x3a, 0x05, 0x04, 0x3f };\n\tstatic const u8 CA[] = { 0x28, 0xd8, 0x14, 0xec };\n\tstatic const u8 CA_adcm1700[] =\n\t\t\t\t{ 0x14, 0xec, 0x0a, 0xf6 };\n\tstatic const u8 CA_po2030n[] =\n\t\t\t\t{ 0x1e, 0xe2, 0x14, 0xec };\n\tstatic const u8 CE[] = { 0x32, 0xdd, 0x2d, 0xdd };\t \n\tstatic const u8 CE_gc0307[] =\n\t\t\t\t{ 0x32, 0xce, 0x2d, 0xd3 };\n\tstatic const u8 CE_ov76xx[] =\n\t\t\t\t{ 0x32, 0xdd, 0x32, 0xdd };\n\tstatic const u8 CE_po2030n[] =\n\t\t\t\t{ 0x14, 0xe7, 0x1e, 0xdd };\n\n\t \n\tjpeg_define(sd->jpeg_hdr, gspca_dev->pixfmt.height,\n\t\t\tgspca_dev->pixfmt.width,\n\t\t\t0x21);\t\t \n\n\t \n\tsn9c1xx = sn_tb[sd->sensor];\n\n\t \n\t \n\treg01 = sn9c1xx[1];\n\tif (sd->flags & F_PDN_INV)\n\t\treg01 ^= S_PDN_INV;\t\t \n\treg_w1(gspca_dev, 0x01, reg01);\n\n\t \n\treg0102[0] = reg01;\n\treg0102[1] = sn9c1xx[2];\n\tif (gspca_dev->audio)\n\t\treg0102[1] |= 0x04;\t \n\treg_w(gspca_dev, 0x01, reg0102, 2);\n\treg_w(gspca_dev, 0x08, &sn9c1xx[8], 2);\n\treg_w(gspca_dev, 0x17, &sn9c1xx[0x17], 5);\n\tswitch (sd->sensor) {\n\tcase SENSOR_GC0307:\n\tcase SENSOR_OV7660:\n\tcase SENSOR_PO1030:\n\tcase SENSOR_PO2030N:\n\tcase SENSOR_SOI768:\n\tcase SENSOR_SP80708:\n\t\treg9a = reg9a_spec;\n\t\tbreak;\n\tdefault:\n\t\treg9a = reg9a_def;\n\t\tbreak;\n\t}\n\treg_w(gspca_dev, 0x9a, reg9a, 6);\n\n\treg_w(gspca_dev, 0xd4, regd4, sizeof regd4);\n\n\treg_w(gspca_dev, 0x03, &sn9c1xx[3], 0x0f);\n\n\treg17 = sn9c1xx[0x17];\n\tswitch (sd->sensor) {\n\tcase SENSOR_GC0307:\n\t\tmsleep(50);\t\t \n\t\tbreak;\n\tcase SENSOR_OM6802:\n\t\tmsleep(10);\n\t\treg_w1(gspca_dev, 0x02, 0x73);\n\t\treg17 |= SEN_CLK_EN;\n\t\treg_w1(gspca_dev, 0x17, reg17);\n\t\treg_w1(gspca_dev, 0x01, 0x22);\n\t\tmsleep(100);\n\t\treg01 = SCL_SEL_OD | S_PDN_INV;\n\t\treg17 &= ~MCK_SIZE_MASK;\n\t\treg17 |= 0x04;\t\t \n\t\tbreak;\n\t}\n\treg01 |= SYS_SEL_48M;\n\treg_w1(gspca_dev, 0x01, reg01);\n\treg17 |= SEN_CLK_EN;\n\treg_w1(gspca_dev, 0x17, reg17);\n\treg01 &= ~S_PWR_DN;\t\t \n\treg_w1(gspca_dev, 0x01, reg01);\n\treg01 &= ~SCL_SEL_OD;\t\t \n\treg_w1(gspca_dev, 0x01, reg01);\n\n\tswitch (sd->sensor) {\n\tcase SENSOR_HV7131R:\n\t\thv7131r_probe(gspca_dev);\t \n\t\tbreak;\n\tcase SENSOR_OM6802:\n\t\tmsleep(10);\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\ti2c_w8(gspca_dev, om6802_init0[0]);\n\t\ti2c_w8(gspca_dev, om6802_init0[1]);\n\t\tmsleep(15);\n\t\treg_w1(gspca_dev, 0x02, 0x71);\n\t\tmsleep(150);\n\t\tbreak;\n\tcase SENSOR_SP80708:\n\t\tmsleep(100);\n\t\treg_w1(gspca_dev, 0x02, 0x62);\n\t\tbreak;\n\t}\n\n\t \n\ti2c_w_seq(gspca_dev, sensor_init[sd->sensor]);\n\n\treg_w1(gspca_dev, 0x15, sn9c1xx[0x15]);\n\treg_w1(gspca_dev, 0x16, sn9c1xx[0x16]);\n\treg_w1(gspca_dev, 0x12, sn9c1xx[0x12]);\n\treg_w1(gspca_dev, 0x13, sn9c1xx[0x13]);\n\treg_w1(gspca_dev, 0x18, sn9c1xx[0x18]);\n\tif (sd->sensor == SENSOR_ADCM1700) {\n\t\treg_w1(gspca_dev, 0xd2, 0x3a);\t \n\t\treg_w1(gspca_dev, 0xd3, 0x30);\t \n\t} else {\n\t\treg_w1(gspca_dev, 0xd2, 0x6a);\t \n\t\treg_w1(gspca_dev, 0xd3, 0x50);\t \n\t}\n\treg_w1(gspca_dev, 0xc6, 0x00);\n\treg_w1(gspca_dev, 0xc7, 0x00);\n\tif (sd->sensor == SENSOR_ADCM1700) {\n\t\treg_w1(gspca_dev, 0xc8, 0x2c);\t \n\t\treg_w1(gspca_dev, 0xc9, 0x24);\t \n\t} else {\n\t\treg_w1(gspca_dev, 0xc8, 0x50);\t \n\t\treg_w1(gspca_dev, 0xc9, 0x3c);\t \n\t}\n\treg_w1(gspca_dev, 0x18, sn9c1xx[0x18]);\n\tswitch (sd->sensor) {\n\tcase SENSOR_OM6802:\n \n\t\tbreak;\n\tdefault:\n\t\treg17 |= DEF_EN;\n\t\tbreak;\n\t}\n\treg_w1(gspca_dev, 0x17, reg17);\n\n\treg_w1(gspca_dev, 0x05, 0x00);\t\t \n\treg_w1(gspca_dev, 0x07, 0x00);\t\t \n\treg_w1(gspca_dev, 0x06, 0x00);\t\t \n\treg_w1(gspca_dev, 0x14, sn9c1xx[0x14]);\n\n\tsetgamma(gspca_dev);\n\n \n\tfor (i = 0; i < 8; i++)\n\t\treg_w(gspca_dev, 0x84, reg84, sizeof reg84);\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_OV7660:\n\tcase SENSOR_SP80708:\n\t\treg_w1(gspca_dev, 0x9a, 0x05);\n\t\tbreak;\n\tcase SENSOR_GC0307:\n\tcase SENSOR_MT9V111:\n\tcase SENSOR_MI0360B:\n\t\treg_w1(gspca_dev, 0x9a, 0x07);\n\t\tbreak;\n\tcase SENSOR_OV7630:\n\tcase SENSOR_OV7648:\n\t\treg_w1(gspca_dev, 0x9a, 0x0a);\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\tcase SENSOR_SOI768:\n\t\treg_w1(gspca_dev, 0x9a, 0x06);\n\t\tbreak;\n\tdefault:\n\t\treg_w1(gspca_dev, 0x9a, 0x08);\n\t\tbreak;\n\t}\n\tsetsharpness(gspca_dev);\n\n\treg_w(gspca_dev, 0x84, reg84, sizeof reg84);\n\treg_w1(gspca_dev, 0x05, 0x20);\t\t \n\treg_w1(gspca_dev, 0x07, 0x20);\t\t \n\treg_w1(gspca_dev, 0x06, 0x20);\t\t \n\n\tinit = NULL;\n\tmode = gspca_dev->cam.cam_mode[gspca_dev->curr_mode].priv;\n\treg01 |= SYS_SEL_48M | V_TX_EN;\n\treg17 &= ~MCK_SIZE_MASK;\n\treg17 |= 0x02;\t\t\t \n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\t\tinit = adcm1700_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_GC0307:\n\t\tinit = gc0307_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_HV7131R:\n\tcase SENSOR_MI0360:\n\t\tif (!mode)\n\t\t\treg01 &= ~SYS_SEL_48M;\t \n\t\treg17 &= ~MCK_SIZE_MASK;\n\t\treg17 |= 0x01;\t\t\t \n\t\tbreak;\n\tcase SENSOR_MI0360B:\n\t\tinit = mi0360b_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_MO4000:\n\t\tif (mode) {\t\t\t \n\t\t\treg01 &= ~SYS_SEL_48M;\t \n\t\t\treg17 &= ~MCK_SIZE_MASK;\n\t\t\treg17 |= 0x01;\t\t \n\t\t}\n\t\tbreak;\n\tcase SENSOR_MT9V111:\n\t\tinit = mt9v111_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_OM6802:\n\t\tinit = om6802_sensor_param1;\n\t\tif (!mode) {\t\t\t \n\t\t\treg17 &= ~MCK_SIZE_MASK;\n\t\t\treg17 |= 0x04;\t\t \n\t\t} else {\n\t\t\treg01 &= ~SYS_SEL_48M;\t \n\t\t\treg17 &= ~MCK_SIZE_MASK;\n\t\t\treg17 |= 0x02;\t\t \n\t\t}\n\t\tbreak;\n\tcase SENSOR_OV7630:\n\t\tinit = ov7630_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_OV7648:\n\t\tinit = ov7648_sensor_param1;\n\t\treg17 &= ~MCK_SIZE_MASK;\n\t\treg17 |= 0x01;\t\t\t \n\t\tbreak;\n\tcase SENSOR_OV7660:\n\t\tinit = ov7660_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_PO1030:\n\t\tinit = po1030_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\t\tinit = po2030n_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_SOI768:\n\t\tinit = soi768_sensor_param1;\n\t\tbreak;\n\tcase SENSOR_SP80708:\n\t\tinit = sp80708_sensor_param1;\n\t\tbreak;\n\t}\n\n\t \n\tif (init != NULL) {\n\t\ti2c_w_seq(gspca_dev, init);\n \n\t}\n\n\treg_w(gspca_dev, 0xc0, C0, 6);\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_GC0307:\n\tcase SENSOR_SOI768:\n\t\treg_w(gspca_dev, 0xca, CA_adcm1700, 4);\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\t\treg_w(gspca_dev, 0xca, CA_po2030n, 4);\n\t\tbreak;\n\tdefault:\n\t\treg_w(gspca_dev, 0xca, CA, 4);\n\t\tbreak;\n\t}\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_OV7630:\n\tcase SENSOR_OV7648:\n\tcase SENSOR_OV7660:\n\tcase SENSOR_SOI768:\n\t\treg_w(gspca_dev, 0xce, CE_ov76xx, 4);\n\t\tbreak;\n\tcase SENSOR_GC0307:\n\t\treg_w(gspca_dev, 0xce, CE_gc0307, 4);\n\t\tbreak;\n\tcase SENSOR_PO2030N:\n\t\treg_w(gspca_dev, 0xce, CE_po2030n, 4);\n\t\tbreak;\n\tdefault:\n\t\treg_w(gspca_dev, 0xce, CE, 4);\n\t\t\t\t\t \n\t\tbreak;\n\t}\n\n\t \n\tsd->reg18 = sn9c1xx[0x18] | (mode << 4) | 0x40;\n\treg_w1(gspca_dev, 0x18, sd->reg18);\n\tsetjpegqual(gspca_dev);\n\n\treg_w1(gspca_dev, 0x17, reg17);\n\treg_w1(gspca_dev, 0x01, reg01);\n\tsd->reg01 = reg01;\n\tsd->reg17 = reg17;\n\n\tsd->pktsz = sd->npkt = 0;\n\tsd->nchg = sd->short_mark = 0;\n\n\treturn gspca_dev->usb_err;\n}\n\nstatic void sd_stopN(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tstatic const u8 stophv7131[] =\n\t\t{ 0xa1, 0x11, 0x02, 0x09, 0x00, 0x00, 0x00, 0x10 };\n\tstatic const u8 stopmi0360[] =\n\t\t{ 0xb1, 0x5d, 0x07, 0x00, 0x00, 0x00, 0x00, 0x10 };\n\tstatic const u8 stopov7648[] =\n\t\t{ 0xa1, 0x21, 0x76, 0x20, 0x00, 0x00, 0x00, 0x10 };\n\tstatic const u8 stopsoi768[] =\n\t\t{ 0xa1, 0x21, 0x12, 0x80, 0x00, 0x00, 0x00, 0x10 };\n\tu8 reg01;\n\tu8 reg17;\n\n\treg01 = sd->reg01;\n\treg17 = sd->reg17 & ~SEN_CLK_EN;\n\tswitch (sd->sensor) {\n\tcase SENSOR_ADCM1700:\n\tcase SENSOR_GC0307:\n\tcase SENSOR_PO2030N:\n\tcase SENSOR_SP80708:\n\t\treg01 |= LED;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\treg01 &= ~(LED | V_TX_EN);\n\t\treg_w1(gspca_dev, 0x01, reg01);\n \n\t\tbreak;\n\tcase SENSOR_HV7131R:\n\t\treg01 &= ~V_TX_EN;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\ti2c_w8(gspca_dev, stophv7131);\n\t\tbreak;\n\tcase SENSOR_MI0360:\n\tcase SENSOR_MI0360B:\n\t\treg01 &= ~V_TX_EN;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n \n\t\ti2c_w8(gspca_dev, stopmi0360);\n\t\tbreak;\n\tcase SENSOR_MT9V111:\n\tcase SENSOR_OM6802:\n\tcase SENSOR_PO1030:\n\t\treg01 &= ~V_TX_EN;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\tbreak;\n\tcase SENSOR_OV7630:\n\tcase SENSOR_OV7648:\n\t\treg01 &= ~V_TX_EN;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\ti2c_w8(gspca_dev, stopov7648);\n\t\tbreak;\n\tcase SENSOR_OV7660:\n\t\treg01 &= ~V_TX_EN;\n\t\treg_w1(gspca_dev, 0x01, reg01);\n\t\tbreak;\n\tcase SENSOR_SOI768:\n\t\ti2c_w8(gspca_dev, stopsoi768);\n\t\tbreak;\n\t}\n\n\treg01 |= SCL_SEL_OD;\n\treg_w1(gspca_dev, 0x01, reg01);\n\treg01 |= S_PWR_DN;\t\t \n\treg_w1(gspca_dev, 0x01, reg01);\n\treg_w1(gspca_dev, 0x17, reg17);\n\treg01 &= ~SYS_SEL_48M;\t\t \n\treg_w1(gspca_dev, 0x01, reg01);\n\treg01 |= LED;\n\treg_w1(gspca_dev, 0x01, reg01);\n\t \n\t \n}\n\n \n \nstatic void sd_stop0(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tmutex_unlock(&gspca_dev->usb_lock);\n\tflush_work(&sd->work);\n\tmutex_lock(&gspca_dev->usb_lock);\n}\n\nstatic void do_autogain(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint delta;\n\tint expotimes;\n\tu8 luma_mean = 130;\n\tu8 luma_delta = 20;\n\n\t \n\tif (sd->ag_cnt < 0)\n\t\treturn;\n\tif (--sd->ag_cnt >= 0)\n\t\treturn;\n\tsd->ag_cnt = AG_CNT_START;\n\n\tdelta = atomic_read(&sd->avg_lum);\n\tgspca_dbg(gspca_dev, D_FRAM, \"mean lum %d\\n\", delta);\n\n\tif (sd->sensor == SENSOR_PO2030N) {\n\t\tgspca_expo_autogain(gspca_dev, delta, luma_mean, luma_delta,\n\t\t\t\t\t15, 1024);\n\t\treturn;\n\t}\n\n\tif (delta < luma_mean - luma_delta ||\n\t    delta > luma_mean + luma_delta) {\n\t\tswitch (sd->sensor) {\n\t\tcase SENSOR_GC0307:\n\t\t\texpotimes = sd->exposure;\n\t\t\texpotimes += (luma_mean - delta) >> 6;\n\t\t\tif (expotimes < 0)\n\t\t\t\texpotimes = 0;\n\t\t\tsd->exposure = expo_adjust(gspca_dev,\n\t\t\t\t\t\t   (unsigned int) expotimes);\n\t\t\tbreak;\n\t\tcase SENSOR_HV7131R:\n\t\t\texpotimes = sd->exposure >> 8;\n\t\t\texpotimes += (luma_mean - delta) >> 4;\n\t\t\tif (expotimes < 0)\n\t\t\t\texpotimes = 0;\n\t\t\tsd->exposure = expo_adjust(gspca_dev,\n\t\t\t\t\t(unsigned int) (expotimes << 8));\n\t\t\tbreak;\n\t\tcase SENSOR_OM6802:\n\t\tcase SENSOR_MT9V111:\n\t\t\texpotimes = sd->exposure;\n\t\t\texpotimes += (luma_mean - delta) >> 2;\n\t\t\tif (expotimes < 0)\n\t\t\t\texpotimes = 0;\n\t\t\tsd->exposure = expo_adjust(gspca_dev,\n\t\t\t\t\t\t   (unsigned int) expotimes);\n\t\t\tsetredblue(gspca_dev);\n\t\t\tbreak;\n\t\tdefault:\n \n \n \n\t\t\texpotimes = sd->exposure;\n\t\t\texpotimes += (luma_mean - delta) >> 6;\n\t\t\tif (expotimes < 0)\n\t\t\t\texpotimes = 0;\n\t\t\tsd->exposure = expo_adjust(gspca_dev,\n\t\t\t\t\t\t   (unsigned int) expotimes);\n\t\t\tsetredblue(gspca_dev);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n \nstatic void set_lum(struct sd *sd,\n\t\t    u8 *data)\n{\n\tint avg_lum;\n\n\t \n\tavg_lum = (data[27] << 8) + data[28]\t\t \n\n\t\t+ (data[31] << 8) + data[32]\t\t \n\n\t\t+ (data[23] << 8) + data[24]\t\t \n\n\t\t+ (data[35] << 8) + data[36]\t\t \n\n\t\t+ (data[29] << 10) + (data[30] << 2);\t \n\tavg_lum >>= 10;\n\tatomic_set(&sd->avg_lum, avg_lum);\n}\n\n \n \nstatic void sd_pkt_scan(struct gspca_dev *gspca_dev,\n\t\t\tu8 *data,\t\t\t \n\t\t\tint len)\t\t\t \n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\tint i, new_qual;\n\n\t \n\n\t \n\tsd->npkt++;\n\tsd->pktsz += len;\n\n \n\n\t \n\ti = sd->short_mark;\n\tif (i != 0) {\n\t\tsd->short_mark = 0;\n\t\tif (i < 0\t \n\t\t && data[0] == 0xff\n\t\t && data[1] == 0x00)\n\t\t\tgoto marker_found;\n\t\tif (data[0] == 0xff && data[1] == 0xff) {\n\t\t\ti = 0;\n\t\t\tgoto marker_found;\n\t\t}\n\t\tlen -= i;\n\t\tif (len <= 0)\n\t\t\treturn;\n\t\tdata += i;\n\t}\n\n\t \n\tfor (i = len - 1; --i >= 0; ) {\n\t\tif (data[i] != 0xff) {\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\t\tif (data[i + 1] == 0xff) {\n\n\t\t\t \n\t\t\tif (i + 2 >= len || data[i + 2] == 0x00)\n\t\t\t\tgoto marker_found;\n\t\t}\n\t}\n\n\t \n\t \n\tif (data[len - 1] == 0xff)\n\t\tsd->short_mark = -1;\n\tif (gspca_dev->last_packet_type == LAST_PACKET)\n\t\tgspca_frame_add(gspca_dev, FIRST_PACKET,\n\t\t\t\tsd->jpeg_hdr, JPEG_HDR_SZ);\n\tgspca_frame_add(gspca_dev, INTER_PACKET, data, len);\n\treturn;\n\n\t \n\t \nmarker_found:\n\tnew_qual = 0;\n\tif (i > 2) {\n\t\tif (data[i - 2] != 0xff || data[i - 1] != 0xd9) {\n\t\t\tgspca_dev->last_packet_type = DISCARD_PACKET;\n\t\t\tnew_qual = -3;\n\t\t}\n\t} else if (i + 6 < len) {\n\t\tif (data[i + 6] & 0x08) {\n\t\t\tgspca_dev->last_packet_type = DISCARD_PACKET;\n\t\t\tnew_qual = -5;\n\t\t}\n\t}\n\n\tgspca_frame_add(gspca_dev, LAST_PACKET, data, i);\n\n\t \n\tif (new_qual == 0) {\n\t\tint r;\n\n\t\tr = (sd->pktsz * 100) /\n\t\t\t(sd->npkt *\n\t\t\t\tgspca_dev->urb[0]->iso_frame_desc[0].length);\n\t\tif (r >= 85)\n\t\t\tnew_qual = -3;\n\t\telse if (r < 75)\n\t\t\tnew_qual = 2;\n\t}\n\tif (new_qual != 0) {\n\t\tsd->nchg += new_qual;\n\t\tif (sd->nchg < -6 || sd->nchg >= 12) {\n\t\t\tsd->nchg = 0;\n\t\t\tnew_qual += sd->quality;\n\t\t\tif (new_qual < QUALITY_MIN)\n\t\t\t\tnew_qual = QUALITY_MIN;\n\t\t\telse if (new_qual > QUALITY_MAX)\n\t\t\t\tnew_qual = QUALITY_MAX;\n\t\t\tif (new_qual != sd->quality) {\n\t\t\t\tsd->quality = new_qual;\n\t\t\t\tschedule_work(&sd->work);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tsd->nchg = 0;\n\t}\n\tsd->pktsz = sd->npkt = 0;\n\n\t \n\tif (i + 62 > len) {\t\t\t \n\t\tsd->short_mark = i + 62 - len;\n\t\treturn;\n\t}\n\tif (sd->ag_cnt >= 0)\n\t\tset_lum(sd, data + i);\n\n\t \n\ti += 62;\n\tif (i < len) {\n\t\tdata += i;\n\t\tlen -= i;\n\t\tgspca_frame_add(gspca_dev, FIRST_PACKET,\n\t\t\t\tsd->jpeg_hdr, JPEG_HDR_SZ);\n\t\tgspca_frame_add(gspca_dev, INTER_PACKET, data, len);\n\t}\n}\n\nstatic int sd_s_ctrl(struct v4l2_ctrl *ctrl)\n{\n\tstruct gspca_dev *gspca_dev =\n\t\tcontainer_of(ctrl->handler, struct gspca_dev, ctrl_handler);\n\n\tgspca_dev->usb_err = 0;\n\n\tif (!gspca_dev->streaming)\n\t\treturn 0;\n\n\tswitch (ctrl->id) {\n\tcase V4L2_CID_BRIGHTNESS:\n\t\tsetbrightness(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_CONTRAST:\n\t\tsetcontrast(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_SATURATION:\n\t\tsetcolors(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_RED_BALANCE:\n\t\tsetredblue(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_GAMMA:\n\t\tsetgamma(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_AUTOGAIN:\n\t\tsetautogain(gspca_dev);\n\t\tsetexposure(gspca_dev);\n\t\tsetgain(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_VFLIP:\n\t\tsethvflip(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_SHARPNESS:\n\t\tsetsharpness(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_ILLUMINATORS_1:\n\t\tsetillum(gspca_dev);\n\t\tbreak;\n\tcase V4L2_CID_POWER_LINE_FREQUENCY:\n\t\tsetfreq(gspca_dev);\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\treturn gspca_dev->usb_err;\n}\n\n#if IS_ENABLED(CONFIG_INPUT)\nstatic int sd_int_pkt_scan(struct gspca_dev *gspca_dev,\n\t\t\tu8 *data,\t\t \n\t\t\tint len)\t\t \n{\n\tint ret = -EINVAL;\n\n\tif (len == 1 && data[0] == 1) {\n\t\tinput_report_key(gspca_dev->input_dev, KEY_CAMERA, 1);\n\t\tinput_sync(gspca_dev->input_dev);\n\t\tinput_report_key(gspca_dev->input_dev, KEY_CAMERA, 0);\n\t\tinput_sync(gspca_dev->input_dev);\n\t\tret = 0;\n\t}\n\n\treturn ret;\n}\n#endif\n\n \nstatic const struct sd_desc sd_desc = {\n\t.name = MODULE_NAME,\n\t.config = sd_config,\n\t.init = sd_init,\n\t.init_controls = sd_init_controls,\n\t.start = sd_start,\n\t.stopN = sd_stopN,\n\t.stop0 = sd_stop0,\n\t.pkt_scan = sd_pkt_scan,\n\t.dq_callback = do_autogain,\n#if IS_ENABLED(CONFIG_INPUT)\n\t.int_pkt_scan = sd_int_pkt_scan,\n#endif\n};\n\n \n#define BS(bridge, sensor) \\\n\t.driver_info = (BRIDGE_ ## bridge << 16) \\\n\t\t\t| (SENSOR_ ## sensor << 8)\n#define BSF(bridge, sensor, flags) \\\n\t.driver_info = (BRIDGE_ ## bridge << 16) \\\n\t\t\t| (SENSOR_ ## sensor << 8) \\\n\t\t\t| (flags)\nstatic const struct usb_device_id device_table[] = {\n\t{USB_DEVICE(0x0458, 0x7025), BSF(SN9C120, MI0360B, F_PDN_INV)},\n\t{USB_DEVICE(0x0458, 0x702e), BS(SN9C120, OV7660)},\n\t{USB_DEVICE(0x045e, 0x00f5), BSF(SN9C105, OV7660, F_PDN_INV)},\n\t{USB_DEVICE(0x045e, 0x00f7), BSF(SN9C105, OV7660, F_PDN_INV)},\n\t{USB_DEVICE(0x0471, 0x0327), BS(SN9C105, MI0360)},\n\t{USB_DEVICE(0x0471, 0x0328), BS(SN9C105, MI0360)},\n\t{USB_DEVICE(0x0471, 0x0330), BS(SN9C105, MI0360)},\n\t{USB_DEVICE(0x06f8, 0x3004), BS(SN9C105, OV7660)},\n\t{USB_DEVICE(0x06f8, 0x3008), BS(SN9C105, OV7660)},\n \n\t{USB_DEVICE(0x0c45, 0x6040), BS(SN9C102P, HV7131R)},\n \n \n\t{USB_DEVICE(0x0c45, 0x607c), BS(SN9C102P, HV7131R)},\n \n\t{USB_DEVICE(0x0c45, 0x60c0), BSF(SN9C105, MI0360, F_ILLUM)},\n\t\t\t\t\t\t \n \n \n \n\t{USB_DEVICE(0x0c45, 0x60ce), BS(SN9C105, SP80708)},\n\t{USB_DEVICE(0x0c45, 0x60ec), BS(SN9C105, MO4000)},\n \n \n \n\t{USB_DEVICE(0x0c45, 0x60fb), BS(SN9C105, OV7660)},\n\t{USB_DEVICE(0x0c45, 0x60fc), BS(SN9C105, HV7131R)},\n\t{USB_DEVICE(0x0c45, 0x60fe), BS(SN9C105, OV7630)},\n\t{USB_DEVICE(0x0c45, 0x6100), BS(SN9C120, MI0360)},\t \n\t{USB_DEVICE(0x0c45, 0x6102), BS(SN9C120, PO2030N)},\t \n \n\t{USB_DEVICE(0x0c45, 0x610a), BS(SN9C120, OV7648)},\t \n\t{USB_DEVICE(0x0c45, 0x610b), BS(SN9C120, OV7660)},\t \n\t{USB_DEVICE(0x0c45, 0x610c), BS(SN9C120, HV7131R)},\t \n\t{USB_DEVICE(0x0c45, 0x610e), BS(SN9C120, OV7630)},\t \n \n \n \n\t{USB_DEVICE(0x0c45, 0x6128), BS(SN9C120, OM6802)},\t \n \n\t{USB_DEVICE(0x0c45, 0x612a), BS(SN9C120, OV7648)},\t \n\t{USB_DEVICE(0x0c45, 0x612b), BS(SN9C110, ADCM1700)},\n\t{USB_DEVICE(0x0c45, 0x612c), BS(SN9C110, MO4000)},\n\t{USB_DEVICE(0x0c45, 0x612e), BS(SN9C110, OV7630)},\n \n\t{USB_DEVICE(0x0c45, 0x6130), BS(SN9C120, MI0360)},\n\t\t\t\t\t\t \n \n\t{USB_DEVICE(0x0c45, 0x6138), BS(SN9C120, MO4000)},\n\t{USB_DEVICE(0x0c45, 0x613a), BS(SN9C120, OV7648)},\n\t{USB_DEVICE(0x0c45, 0x613b), BS(SN9C120, OV7660)},\n\t{USB_DEVICE(0x0c45, 0x613c), BS(SN9C120, HV7131R)},\n\t{USB_DEVICE(0x0c45, 0x613e), BS(SN9C120, OV7630)},\n\t{USB_DEVICE(0x0c45, 0x6142), BS(SN9C120, PO2030N)},\t \n\t\t\t\t\t\t \n\t{USB_DEVICE(0x0c45, 0x6143), BS(SN9C120, SP80708)},\t \n\t{USB_DEVICE(0x0c45, 0x6148), BS(SN9C120, OM6802)},\t \n\t{USB_DEVICE(0x0c45, 0x614a), BSF(SN9C120, ADCM1700, F_ILLUM)},\n \t \n\t{}\n};\nMODULE_DEVICE_TABLE(usb, device_table);\n\n \nstatic int sd_probe(struct usb_interface *intf,\n\t\t    const struct usb_device_id *id)\n{\n\treturn gspca_dev_probe(intf, id, &sd_desc, sizeof(struct sd),\n\t\t\t\tTHIS_MODULE);\n}\n\nstatic struct usb_driver sd_driver = {\n\t.name = MODULE_NAME,\n\t.id_table = device_table,\n\t.probe = sd_probe,\n\t.disconnect = gspca_disconnect,\n#ifdef CONFIG_PM\n\t.suspend = gspca_suspend,\n\t.resume = gspca_resume,\n\t.reset_resume = gspca_resume,\n#endif\n};\n\nmodule_usb_driver(sd_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}