{
  "module_name": "gl860-mi2020.c",
  "hash_id": "dcd124f2afa7fdca6b42ebf9570313b7f0a9f15834e9049e1697bd26df1210ea",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/usb/gspca/gl860/gl860-mi2020.c",
  "human_readable_source": "\n \n\n \n\n#include \"gl860.h\"\n\nstatic u8 dat_wbal1[] = {0x8c, 0xa2, 0x0c};\n\nstatic u8 dat_bright1[] = {0x8c, 0xa2, 0x06};\nstatic u8 dat_bright3[] = {0x8c, 0xa1, 0x02};\nstatic u8 dat_bright4[] = {0x90, 0x00, 0x0f};\nstatic u8 dat_bright5[] = {0x8c, 0xa1, 0x03};\nstatic u8 dat_bright6[] = {0x90, 0x00, 0x05};\n\nstatic u8 dat_hvflip1[] = {0x8c, 0x27, 0x19};\nstatic u8 dat_hvflip3[] = {0x8c, 0x27, 0x3b};\nstatic u8 dat_hvflip5[] = {0x8c, 0xa1, 0x03};\nstatic u8 dat_hvflip6[] = {0x90, 0x00, 0x06};\n\nstatic struct idxdata tbl_middle_hvflip_low[] = {\n\t{0x33, {0x90, 0x00, 0x06}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x90, 0x00, 0x06}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x90, 0x00, 0x06}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x90, 0x00, 0x06}},\n\t{6, {0xff, 0xff, 0xff}},\n};\n\nstatic struct idxdata tbl_middle_hvflip_big[] = {\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x00}},\n\t{102, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x02}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x72}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x01}},\n};\n\nstatic struct idxdata tbl_end_hvflip[] = {\n\t{0x33, {0x8c, 0xa1, 0x02}}, {0x33, {0x90, 0x00, 0x1f}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x02}}, {0x33, {0x90, 0x00, 0x1f}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x02}}, {0x33, {0x90, 0x00, 0x1f}},\n\t{6, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x02}}, {0x33, {0x90, 0x00, 0x1f}},\n};\n\nstatic u8 dat_freq1[] = { 0x8c, 0xa4, 0x04 };\n\nstatic u8 dat_multi5[] = { 0x8c, 0xa1, 0x03 };\nstatic u8 dat_multi6[] = { 0x90, 0x00, 0x05 };\n\nstatic struct validx tbl_init_at_startup[] = {\n\t{0x0000, 0x0000}, {0x0010, 0x0010}, {0x0008, 0x00c0}, {0x0001, 0x00c1},\n\t{0x0001, 0x00c2}, {0x0020, 0x0006}, {0x006a, 0x000d},\n\t{53, 0xffff},\n\t{0x0040, 0x0000}, {0x0063, 0x0006},\n};\n\nstatic struct validx tbl_common_0B[] = {\n\t{0x0002, 0x0004}, {0x006a, 0x0007}, {0x00ef, 0x0006}, {0x006a, 0x000d},\n\t{0x0000, 0x00c0}, {0x0010, 0x0010}, {0x0003, 0x00c1}, {0x0042, 0x00c2},\n\t{0x0004, 0x00d8}, {0x0000, 0x0058}, {0x0041, 0x0000},\n};\n\nstatic struct idxdata tbl_common_3B[] = {\n\t{0x33, {0x86, 0x25, 0x01}}, {0x33, {0x86, 0x25, 0x00}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x30, {0x1a, 0x0a, 0xcc}}, {0x32, {0x02, 0x00, 0x08}},\n\t{0x33, {0xf4, 0x03, 0x1d}},\n\t{6, {0xff, 0xff, 0xff}},  \n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x34, {0x1c, 0x01, 0x28}},\n\t{0x34, {0x1e, 0x8f, 0x09}},\n\t{2, {0xff, 0xff, 0xff}},  \n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x32, {0x14, 0x06, 0xe6}},\n\t{0x33, {0x8c, 0x22, 0x23}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa2, 0x0f}}, {0x33, {0x90, 0x00, 0x0d}},\n\t{0x33, {0x8c, 0xa2, 0x10}}, {0x33, {0x90, 0x00, 0x0b}},\n\t{0x33, {0x8c, 0xa2, 0x11}}, {0x33, {0x90, 0x00, 0x07}},\n\t{0x33, {0xf4, 0x03, 0x1d}}, {0x35, {0xa2, 0x00, 0xe2}},\n\t{0x33, {0x8c, 0xab, 0x05}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x32, {0x6e, 0x00, 0x86}}, {0x32, {0x70, 0x0f, 0xaa}},\n\t{0x32, {0x72, 0x0f, 0xe4}}, {0x33, {0x8c, 0xa3, 0x4a}},\n\t{0x33, {0x90, 0x00, 0x5a}}, {0x33, {0x8c, 0xa3, 0x4b}},\n\t{0x33, {0x90, 0x00, 0xa6}}, {0x33, {0x8c, 0xa3, 0x61}},\n\t{0x33, {0x90, 0x00, 0xc8}}, {0x33, {0x8c, 0xa3, 0x62}},\n\t{0x33, {0x90, 0x00, 0xe1}}, {0x34, {0xce, 0x01, 0xa8}},\n\t{0x34, {0xd0, 0x66, 0x33}}, {0x34, {0xd2, 0x31, 0x9a}},\n\t{0x34, {0xd4, 0x94, 0x63}}, {0x34, {0xd6, 0x4b, 0x25}},\n\t{0x34, {0xd8, 0x26, 0x70}}, {0x34, {0xda, 0x72, 0x4c}},\n\t{0x34, {0xdc, 0xff, 0x04}}, {0x34, {0xde, 0x01, 0x5b}},\n\t{0x34, {0xe6, 0x01, 0x13}}, {0x34, {0xee, 0x0b, 0xf0}},\n\t{0x34, {0xf6, 0x0b, 0xa4}}, {0x35, {0x00, 0xf6, 0xe7}},\n\t{0x35, {0x08, 0x0d, 0xfd}}, {0x35, {0x10, 0x25, 0x63}},\n\t{0x35, {0x18, 0x35, 0x6c}}, {0x35, {0x20, 0x42, 0x7e}},\n\t{0x35, {0x28, 0x19, 0x44}}, {0x35, {0x30, 0x39, 0xd4}},\n\t{0x35, {0x38, 0xf5, 0xa8}}, {0x35, {0x4c, 0x07, 0x90}},\n\t{0x35, {0x44, 0x07, 0xb8}}, {0x35, {0x5c, 0x06, 0x88}},\n\t{0x35, {0x54, 0x07, 0xff}}, {0x34, {0xe0, 0x01, 0x52}},\n\t{0x34, {0xe8, 0x00, 0xcc}}, {0x34, {0xf0, 0x0d, 0x83}},\n\t{0x34, {0xf8, 0x0c, 0xb3}}, {0x35, {0x02, 0xfe, 0xba}},\n\t{0x35, {0x0a, 0x04, 0xe0}}, {0x35, {0x12, 0x1c, 0x63}},\n\t{0x35, {0x1a, 0x2b, 0x5a}}, {0x35, {0x22, 0x32, 0x5e}},\n\t{0x35, {0x2a, 0x0d, 0x28}}, {0x35, {0x32, 0x2c, 0x02}},\n\t{0x35, {0x3a, 0xf4, 0xfa}}, {0x35, {0x4e, 0x07, 0xef}},\n\t{0x35, {0x46, 0x07, 0x88}}, {0x35, {0x5e, 0x07, 0xc1}},\n\t{0x35, {0x56, 0x04, 0x64}}, {0x34, {0xe4, 0x01, 0x15}},\n\t{0x34, {0xec, 0x00, 0x82}}, {0x34, {0xf4, 0x0c, 0xce}},\n\t{0x34, {0xfc, 0x0c, 0xba}}, {0x35, {0x06, 0x1f, 0x02}},\n\t{0x35, {0x0e, 0x02, 0xe3}}, {0x35, {0x16, 0x1a, 0x50}},\n\t{0x35, {0x1e, 0x24, 0x39}}, {0x35, {0x26, 0x23, 0x4c}},\n\t{0x35, {0x2e, 0xf9, 0x1b}}, {0x35, {0x36, 0x23, 0x19}},\n\t{0x35, {0x3e, 0x12, 0x08}}, {0x35, {0x52, 0x07, 0x22}},\n\t{0x35, {0x4a, 0x03, 0xd3}}, {0x35, {0x62, 0x06, 0x54}},\n\t{0x35, {0x5a, 0x04, 0x5d}}, {0x34, {0xe2, 0x01, 0x04}},\n\t{0x34, {0xea, 0x00, 0xa0}}, {0x34, {0xf2, 0x0c, 0xbc}},\n\t{0x34, {0xfa, 0x0c, 0x5b}}, {0x35, {0x04, 0x17, 0xf2}},\n\t{0x35, {0x0c, 0x02, 0x08}}, {0x35, {0x14, 0x28, 0x43}},\n\t{0x35, {0x1c, 0x28, 0x62}}, {0x35, {0x24, 0x2b, 0x60}},\n\t{0x35, {0x2c, 0x07, 0x33}}, {0x35, {0x34, 0x1f, 0xb0}},\n\t{0x35, {0x3c, 0xed, 0xcd}}, {0x35, {0x50, 0x00, 0x06}},\n\t{0x35, {0x48, 0x07, 0xff}}, {0x35, {0x60, 0x05, 0x89}},\n\t{0x35, {0x58, 0x07, 0xff}}, {0x35, {0x40, 0x00, 0xa0}},\n\t{0x35, {0x42, 0x00, 0x00}}, {0x32, {0x10, 0x01, 0xfc}},\n\t{0x33, {0x8c, 0xa1, 0x18}}, {0x33, {0x90, 0x00, 0x3c}},\n\t{0x33, {0x78, 0x00, 0x00}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x35, {0xb8, 0x1f, 0x20}}, {0x33, {0x8c, 0xa2, 0x06}},\n\t{0x33, {0x90, 0x00, 0x10}}, {0x33, {0x8c, 0xa2, 0x07}},\n\t{0x33, {0x90, 0x00, 0x08}}, {0x33, {0x8c, 0xa2, 0x42}},\n\t{0x33, {0x90, 0x00, 0x0b}}, {0x33, {0x8c, 0xa2, 0x4a}},\n\t{0x33, {0x90, 0x00, 0x8c}}, {0x35, {0xba, 0xfa, 0x08}},\n\t{0x33, {0x8c, 0xa2, 0x02}}, {0x33, {0x90, 0x00, 0x22}},\n\t{0x33, {0x8c, 0xa2, 0x03}}, {0x33, {0x90, 0x00, 0xbb}},\n\t{0x33, {0x8c, 0xa4, 0x04}}, {0x33, {0x90, 0x00, 0x80}},\n\t{0x33, {0x8c, 0xa7, 0x9d}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa7, 0x9e}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa2, 0x0c}}, {0x33, {0x90, 0x00, 0x17}},\n\t{0x33, {0x8c, 0xa2, 0x15}}, {0x33, {0x90, 0x00, 0x04}},\n\t{0x33, {0x8c, 0xa2, 0x14}}, {0x33, {0x90, 0x00, 0x20}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x17}}, {0x33, {0x90, 0x21, 0x11}},\n\t{0x33, {0x8c, 0x27, 0x1b}}, {0x33, {0x90, 0x02, 0x4f}},\n\t{0x33, {0x8c, 0x27, 0x25}}, {0x33, {0x90, 0x06, 0x0f}},\n\t{0x33, {0x8c, 0x27, 0x39}}, {0x33, {0x90, 0x21, 0x11}},\n\t{0x33, {0x8c, 0x27, 0x3d}}, {0x33, {0x90, 0x01, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x47}}, {0x33, {0x90, 0x09, 0x4c}},\n\t{0x33, {0x8c, 0x27, 0x03}}, {0x33, {0x90, 0x02, 0x84}},\n\t{0x33, {0x8c, 0x27, 0x05}}, {0x33, {0x90, 0x01, 0xe2}},\n\t{0x33, {0x8c, 0x27, 0x07}}, {0x33, {0x90, 0x06, 0x40}},\n\t{0x33, {0x8c, 0x27, 0x09}}, {0x33, {0x90, 0x04, 0xb0}},\n\t{0x33, {0x8c, 0x27, 0x0d}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x0f}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x11}}, {0x33, {0x90, 0x04, 0xbd}},\n\t{0x33, {0x8c, 0x27, 0x13}}, {0x33, {0x90, 0x06, 0x4d}},\n\t{0x33, {0x8c, 0x27, 0x15}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x17}}, {0x33, {0x90, 0x21, 0x11}},\n\t{0x33, {0x8c, 0x27, 0x19}}, {0x33, {0x90, 0x04, 0x6c}},\n\t{0x33, {0x8c, 0x27, 0x1b}}, {0x33, {0x90, 0x02, 0x4f}},\n\t{0x33, {0x8c, 0x27, 0x1d}}, {0x33, {0x90, 0x01, 0x02}},\n\t{0x33, {0x8c, 0x27, 0x1f}}, {0x33, {0x90, 0x02, 0x79}},\n\t{0x33, {0x8c, 0x27, 0x21}}, {0x33, {0x90, 0x01, 0x55}},\n\t{0x33, {0x8c, 0x27, 0x23}}, {0x33, {0x90, 0x02, 0x85}},\n\t{0x33, {0x8c, 0x27, 0x25}}, {0x33, {0x90, 0x06, 0x0f}},\n\t{0x33, {0x8c, 0x27, 0x27}}, {0x33, {0x90, 0x20, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x29}}, {0x33, {0x90, 0x20, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x2b}}, {0x33, {0x90, 0x10, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x2d}}, {0x33, {0x90, 0x20, 0x07}},\n\t{0x33, {0x8c, 0x27, 0x2f}}, {0x33, {0x90, 0x00, 0x04}},\n\t{0x33, {0x8c, 0x27, 0x31}}, {0x33, {0x90, 0x00, 0x04}},\n\t{0x33, {0x8c, 0x27, 0x33}}, {0x33, {0x90, 0x04, 0xbb}},\n\t{0x33, {0x8c, 0x27, 0x35}}, {0x33, {0x90, 0x06, 0x4b}},\n\t{0x33, {0x8c, 0x27, 0x37}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x39}}, {0x33, {0x90, 0x21, 0x11}},\n\t{0x33, {0x8c, 0x27, 0x3b}}, {0x33, {0x90, 0x00, 0x24}},\n\t{0x33, {0x8c, 0x27, 0x3d}}, {0x33, {0x90, 0x01, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x41}}, {0x33, {0x90, 0x01, 0x69}},\n\t{0x33, {0x8c, 0x27, 0x45}}, {0x33, {0x90, 0x04, 0xed}},\n\t{0x33, {0x8c, 0x27, 0x47}}, {0x33, {0x90, 0x09, 0x4c}},\n\t{0x33, {0x8c, 0x27, 0x51}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x53}}, {0x33, {0x90, 0x03, 0x20}},\n\t{0x33, {0x8c, 0x27, 0x55}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x57}}, {0x33, {0x90, 0x02, 0x58}},\n\t{0x33, {0x8c, 0x27, 0x5f}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x61}}, {0x33, {0x90, 0x06, 0x40}},\n\t{0x33, {0x8c, 0x27, 0x63}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x65}}, {0x33, {0x90, 0x04, 0xb0}},\n\t{0x33, {0x8c, 0x22, 0x2e}}, {0x33, {0x90, 0x00, 0xa1}},\n\t{0x33, {0x8c, 0xa4, 0x08}}, {0x33, {0x90, 0x00, 0x1f}},\n\t{0x33, {0x8c, 0xa4, 0x09}}, {0x33, {0x90, 0x00, 0x21}},\n\t{0x33, {0x8c, 0xa4, 0x0a}}, {0x33, {0x90, 0x00, 0x25}},\n\t{0x33, {0x8c, 0xa4, 0x0b}}, {0x33, {0x90, 0x00, 0x27}},\n\t{0x33, {0x8c, 0x24, 0x11}}, {0x33, {0x90, 0x00, 0xa1}},\n\t{0x33, {0x8c, 0x24, 0x13}}, {0x33, {0x90, 0x00, 0xc1}},\n\t{0x33, {0x8c, 0x24, 0x15}}, {0x33, {0x90, 0x00, 0x6a}},\n\t{0x33, {0x8c, 0x24, 0x17}}, {0x33, {0x90, 0x00, 0x80}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{3, {0xff, 0xff, 0xff}},\n};\n\nstatic struct idxdata tbl_init_post_alt_low1[] = {\n\t{0x33, {0x8c, 0x27, 0x15}}, {0x33, {0x90, 0x00, 0x25}},\n\t{0x33, {0x8c, 0x22, 0x2e}}, {0x33, {0x90, 0x00, 0x81}},\n\t{0x33, {0x8c, 0xa4, 0x08}}, {0x33, {0x90, 0x00, 0x17}},\n\t{0x33, {0x8c, 0xa4, 0x09}}, {0x33, {0x90, 0x00, 0x1a}},\n\t{0x33, {0x8c, 0xa4, 0x0a}}, {0x33, {0x90, 0x00, 0x1d}},\n\t{0x33, {0x8c, 0xa4, 0x0b}}, {0x33, {0x90, 0x00, 0x20}},\n\t{0x33, {0x8c, 0x24, 0x11}}, {0x33, {0x90, 0x00, 0x81}},\n\t{0x33, {0x8c, 0x24, 0x13}}, {0x33, {0x90, 0x00, 0x9b}},\n};\n\nstatic struct idxdata tbl_init_post_alt_low2[] = {\n\t{0x33, {0x8c, 0x27, 0x03}}, {0x33, {0x90, 0x03, 0x24}},\n\t{0x33, {0x8c, 0x27, 0x05}}, {0x33, {0x90, 0x02, 0x58}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{2, {0xff, 0xff, 0xff}},\n};\n\nstatic struct idxdata tbl_init_post_alt_low3[] = {\n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x34, {0x1c, 0x01, 0x28}},\n\t{0x34, {0x1e, 0x8f, 0x09}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x32, {0x14, 0x06, 0xe6}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x33, {0x2e, 0x01, 0x00}}, {0x34, {0x04, 0x00, 0x2a}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0x27, 0x95}}, {0x33, {0x90, 0x01, 0x00}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x72}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x02}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x01}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x00}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n};\n\nstatic struct idxdata tbl_init_post_alt_big[] = {\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x34, {0x1c, 0x01, 0x28}},\n\t{0x34, {0x1e, 0x8f, 0x09}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x34, {0x1e, 0x8f, 0x09}}, {0x32, {0x14, 0x06, 0xe6}},\n\t{0x33, {0x8c, 0xa1, 0x03}},\n\t{0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x05}},\n\t{2, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x06}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x72}},\n\t{0x33, {0x8c, 0xa1, 0x30}}, {0x33, {0x90, 0x00, 0x03}},\n\t{0x33, {0x8c, 0xa1, 0x31}}, {0x33, {0x90, 0x00, 0x02}},\n\t{0x33, {0x8c, 0xa1, 0x32}}, {0x33, {0x90, 0x00, 0x03}},\n\t{0x33, {0x8c, 0xa1, 0x34}}, {0x33, {0x90, 0x00, 0x03}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x02}},\n\t{0x33, {0x2e, 0x01, 0x00}}, {0x34, {0x04, 0x00, 0x2a}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x33, {0x8c, 0x27, 0x97}}, {0x33, {0x90, 0x01, 0x00}},\n\t{51, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x00}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x01}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x00}},\n\t{51, {0xff, 0xff, 0xff}},\n\t{0x33, {0x8c, 0xa1, 0x20}}, {0x33, {0x90, 0x00, 0x72}},\n\t{0x33, {0x8c, 0xa1, 0x03}}, {0x33, {0x90, 0x00, 0x02}},\n\t{0x33, {0x8c, 0xa7, 0x02}}, {0x33, {0x90, 0x00, 0x01}},\n\t{51, {0xff, 0xff, 0xff}},\n};\n\nstatic struct idxdata tbl_init_post_alt_3B[] = {\n\t{0x32, {0x10, 0x01, 0xf8}}, {0x34, {0xce, 0x01, 0xa8}},\n\t{0x34, {0xd0, 0x66, 0x33}}, {0x34, {0xd2, 0x31, 0x9a}},\n\t{0x34, {0xd4, 0x94, 0x63}}, {0x34, {0xd6, 0x4b, 0x25}},\n\t{0x34, {0xd8, 0x26, 0x70}}, {0x34, {0xda, 0x72, 0x4c}},\n\t{0x34, {0xdc, 0xff, 0x04}}, {0x34, {0xde, 0x01, 0x5b}},\n\t{0x34, {0xe6, 0x01, 0x13}}, {0x34, {0xee, 0x0b, 0xf0}},\n\t{0x34, {0xf6, 0x0b, 0xa4}}, {0x35, {0x00, 0xf6, 0xe7}},\n\t{0x35, {0x08, 0x0d, 0xfd}}, {0x35, {0x10, 0x25, 0x63}},\n\t{0x35, {0x18, 0x35, 0x6c}}, {0x35, {0x20, 0x42, 0x7e}},\n\t{0x35, {0x28, 0x19, 0x44}}, {0x35, {0x30, 0x39, 0xd4}},\n\t{0x35, {0x38, 0xf5, 0xa8}}, {0x35, {0x4c, 0x07, 0x90}},\n\t{0x35, {0x44, 0x07, 0xb8}}, {0x35, {0x5c, 0x06, 0x88}},\n\t{0x35, {0x54, 0x07, 0xff}}, {0x34, {0xe0, 0x01, 0x52}},\n\t{0x34, {0xe8, 0x00, 0xcc}}, {0x34, {0xf0, 0x0d, 0x83}},\n\t{0x34, {0xf8, 0x0c, 0xb3}}, {0x35, {0x02, 0xfe, 0xba}},\n\t{0x35, {0x0a, 0x04, 0xe0}}, {0x35, {0x12, 0x1c, 0x63}},\n\t{0x35, {0x1a, 0x2b, 0x5a}}, {0x35, {0x22, 0x32, 0x5e}},\n\t{0x35, {0x2a, 0x0d, 0x28}}, {0x35, {0x32, 0x2c, 0x02}},\n\t{0x35, {0x3a, 0xf4, 0xfa}}, {0x35, {0x4e, 0x07, 0xef}},\n\t{0x35, {0x46, 0x07, 0x88}}, {0x35, {0x5e, 0x07, 0xc1}},\n\t{0x35, {0x56, 0x04, 0x64}}, {0x34, {0xe4, 0x01, 0x15}},\n\t{0x34, {0xec, 0x00, 0x82}}, {0x34, {0xf4, 0x0c, 0xce}},\n\t{0x34, {0xfc, 0x0c, 0xba}}, {0x35, {0x06, 0x1f, 0x02}},\n\t{0x35, {0x0e, 0x02, 0xe3}}, {0x35, {0x16, 0x1a, 0x50}},\n\t{0x35, {0x1e, 0x24, 0x39}}, {0x35, {0x26, 0x23, 0x4c}},\n\t{0x35, {0x2e, 0xf9, 0x1b}}, {0x35, {0x36, 0x23, 0x19}},\n\t{0x35, {0x3e, 0x12, 0x08}}, {0x35, {0x52, 0x07, 0x22}},\n\t{0x35, {0x4a, 0x03, 0xd3}}, {0x35, {0x62, 0x06, 0x54}},\n\t{0x35, {0x5a, 0x04, 0x5d}}, {0x34, {0xe2, 0x01, 0x04}},\n\t{0x34, {0xea, 0x00, 0xa0}}, {0x34, {0xf2, 0x0c, 0xbc}},\n\t{0x34, {0xfa, 0x0c, 0x5b}}, {0x35, {0x04, 0x17, 0xf2}},\n\t{0x35, {0x0c, 0x02, 0x08}}, {0x35, {0x14, 0x28, 0x43}},\n\t{0x35, {0x1c, 0x28, 0x62}}, {0x35, {0x24, 0x2b, 0x60}},\n\t{0x35, {0x2c, 0x07, 0x33}}, {0x35, {0x34, 0x1f, 0xb0}},\n\t{0x35, {0x3c, 0xed, 0xcd}}, {0x35, {0x50, 0x00, 0x06}},\n\t{0x35, {0x48, 0x07, 0xff}}, {0x35, {0x60, 0x05, 0x89}},\n\t{0x35, {0x58, 0x07, 0xff}}, {0x35, {0x40, 0x00, 0xa0}},\n\t{0x35, {0x42, 0x00, 0x00}}, {0x32, {0x10, 0x01, 0xfc}},\n\t{0x33, {0x8c, 0xa1, 0x18}}, {0x33, {0x90, 0x00, 0x3c}},\n};\n\nstatic u8 *dat_640  = \"\\xd0\\x02\\xd1\\x08\\xd2\\xe1\\xd3\\x02\\xd4\\x10\\xd5\\x81\";\nstatic u8 *dat_800  = \"\\xd0\\x02\\xd1\\x10\\xd2\\x57\\xd3\\x02\\xd4\\x18\\xd5\\x21\";\nstatic u8 *dat_1280 = \"\\xd0\\x02\\xd1\\x20\\xd2\\x01\\xd3\\x02\\xd4\\x28\\xd5\\x01\";\nstatic u8 *dat_1600 = \"\\xd0\\x02\\xd1\\x20\\xd2\\xaf\\xd3\\x02\\xd4\\x30\\xd5\\x41\";\n\nstatic int  mi2020_init_at_startup(struct gspca_dev *gspca_dev);\nstatic int  mi2020_configure_alt(struct gspca_dev *gspca_dev);\nstatic int  mi2020_init_pre_alt(struct gspca_dev *gspca_dev);\nstatic int  mi2020_init_post_alt(struct gspca_dev *gspca_dev);\nstatic void mi2020_post_unset_alt(struct gspca_dev *gspca_dev);\nstatic int  mi2020_camera_settings(struct gspca_dev *gspca_dev);\n \n\nvoid mi2020_init_settings(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tsd->vcur.backlight  =  0;\n\tsd->vcur.brightness = 70;\n\tsd->vcur.sharpness  = 20;\n\tsd->vcur.contrast   =  0;\n\tsd->vcur.gamma      =  0;\n\tsd->vcur.hue        =  0;\n\tsd->vcur.saturation = 60;\n\tsd->vcur.whitebal   =  0;  \n\tsd->vcur.mirror = 0;\n\tsd->vcur.flip   = 0;\n\tsd->vcur.AC50Hz = 1;\n\n\tsd->vmax.backlight  =  64;\n\tsd->vmax.brightness = 128;\n\tsd->vmax.sharpness  =  40;\n\tsd->vmax.contrast   =   3;\n\tsd->vmax.gamma      =   2;\n\tsd->vmax.hue        =   0 + 1;  \n\tsd->vmax.saturation =   0;      \n\tsd->vmax.whitebal   =   2;      \n\tsd->vmax.mirror = 1;\n\tsd->vmax.flip   = 1;\n\tsd->vmax.AC50Hz = 1;\n\n\tsd->dev_camera_settings = mi2020_camera_settings;\n\tsd->dev_init_at_startup = mi2020_init_at_startup;\n\tsd->dev_configure_alt   = mi2020_configure_alt;\n\tsd->dev_init_pre_alt    = mi2020_init_pre_alt;\n\tsd->dev_post_unset_alt  = mi2020_post_unset_alt;\n}\n\n \n\nstatic void common(struct gspca_dev *gspca_dev)\n{\n\tfetch_validx(gspca_dev, tbl_common_0B, ARRAY_SIZE(tbl_common_0B));\n\tfetch_idxdata(gspca_dev, tbl_common_3B, ARRAY_SIZE(tbl_common_3B));\n\tctrl_out(gspca_dev, 0x40, 1, 0x0041, 0x0000, 0, NULL);\n}\n\nstatic int mi2020_init_at_startup(struct gspca_dev *gspca_dev)\n{\n\tu8 c;\n\n\tctrl_in(gspca_dev, 0xc0, 2, 0x0000, 0x0004, 1, &c);\n\tctrl_in(gspca_dev, 0xc0, 2, 0x0000, 0x0004, 1, &c);\n\n\tfetch_validx(gspca_dev, tbl_init_at_startup,\n\t\t\tARRAY_SIZE(tbl_init_at_startup));\n\n\tctrl_out(gspca_dev, 0x40,  1, 0x7a00, 0x8030,  0, NULL);\n\tctrl_in(gspca_dev, 0xc0,  2, 0x7a00, 0x8030,  1, &c);\n\n\tcommon(gspca_dev);\n\n\tmsleep(61);\n \n \n\tctrl_out(gspca_dev, 0x40,  1, 0x0001, 0x0000,  0, NULL);\n\n\treturn 0;\n}\n\nstatic int mi2020_init_pre_alt(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\n\tsd->mirrorMask =  0;\n\tsd->vold.hue   = -1;\n\n\t \n\tsd->vold.brightness = -1;\n\tsd->vold.sharpness  = -1;\n\n\t \n\tsd->vold.contrast  = 0;\n\tsd->vold.gamma     = 0;\n\tsd->vold.backlight = 0;\n\n\tmi2020_init_post_alt(gspca_dev);\n\n\treturn 0;\n}\n\nstatic int mi2020_init_post_alt(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\ts32 reso = gspca_dev->cam.cam_mode[(s32) gspca_dev->curr_mode].priv;\n\n\ts32 mirror = (((sd->vcur.mirror > 0) ^ sd->mirrorMask) > 0);\n\ts32 flip   = (((sd->vcur.flip   > 0) ^ sd->mirrorMask) > 0);\n\ts32 freq   = (sd->vcur.AC50Hz  > 0);\n\ts32 wbal   = sd->vcur.whitebal;\n\n\tu8 dat_freq2[] = {0x90, 0x00, 0x80};\n\tu8 dat_multi1[] = {0x8c, 0xa7, 0x00};\n\tu8 dat_multi2[] = {0x90, 0x00, 0x00};\n\tu8 dat_multi3[] = {0x8c, 0xa7, 0x00};\n\tu8 dat_multi4[] = {0x90, 0x00, 0x00};\n\tu8 dat_hvflip2[] = {0x90, 0x04, 0x6c};\n\tu8 dat_hvflip4[] = {0x90, 0x00, 0x24};\n\tu8 dat_wbal2[] = {0x90, 0x00, 0x00};\n\tu8 c;\n\n\tsd->nbIm = -1;\n\n\tdat_freq2[2] = freq ? 0xc0 : 0x80;\n\tdat_multi1[2] = 0x9d;\n\tdat_multi3[2] = dat_multi1[2] + 1;\n\tif (wbal == 0) {\n\t\tdat_multi4[2] = dat_multi2[2] = 0;\n\t\tdat_wbal2[2] = 0x17;\n\t} else if (wbal == 1) {\n\t\tdat_multi4[2] = dat_multi2[2] = 0;\n\t\tdat_wbal2[2] = 0x35;\n\t} else if (wbal == 2) {\n\t\tdat_multi4[2] = dat_multi2[2] = 0x20;\n\t\tdat_wbal2[2] = 0x17;\n\t}\n\tdat_hvflip2[2] = 0x6c + 2 * (1 - flip) + (1 - mirror);\n\tdat_hvflip4[2] = 0x24 + 2 * (1 - flip) + (1 - mirror);\n\n\tmsleep(200);\n\tctrl_out(gspca_dev, 0x40, 5, 0x0001, 0x0000, 0, NULL);\n\tmsleep(2);\n\n\tcommon(gspca_dev);\n\n\tmsleep(142);\n\tctrl_out(gspca_dev, 0x40,  1, 0x0010, 0x0010,  0, NULL);\n\tctrl_out(gspca_dev, 0x40,  1, 0x0003, 0x00c1,  0, NULL);\n\tctrl_out(gspca_dev, 0x40,  1, 0x0042, 0x00c2,  0, NULL);\n\tctrl_out(gspca_dev, 0x40,  1, 0x006a, 0x000d,  0, NULL);\n\n\tswitch (reso) {\n\tcase IMAGE_640:\n\tcase IMAGE_800:\n\t\tif (reso != IMAGE_800)\n\t\t\tctrl_out(gspca_dev, 0x40,  3, 0x0000, 0x0200,\n\t\t\t\t12, dat_640);\n\t\telse\n\t\t\tctrl_out(gspca_dev, 0x40,  3, 0x0000, 0x0200,\n\t\t\t\t12, dat_800);\n\n\t\tfetch_idxdata(gspca_dev, tbl_init_post_alt_low1,\n\t\t\t\t\tARRAY_SIZE(tbl_init_post_alt_low1));\n\n\t\tif (reso == IMAGE_800)\n\t\t\tfetch_idxdata(gspca_dev, tbl_init_post_alt_low2,\n\t\t\t\t\tARRAY_SIZE(tbl_init_post_alt_low2));\n\n\t\tfetch_idxdata(gspca_dev, tbl_init_post_alt_low3,\n\t\t\t\tARRAY_SIZE(tbl_init_post_alt_low3));\n\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0010, 0x0010, 0, NULL);\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0000, 0x00c1, 0, NULL);\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0041, 0x00c2, 0, NULL);\n\t\tmsleep(120);\n\t\tbreak;\n\n\tcase IMAGE_1280:\n\tcase IMAGE_1600:\n\t\tif (reso == IMAGE_1280) {\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x0000, 0x0200,\n\t\t\t\t\t12, dat_1280);\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x8c\\x27\\x07\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x90\\x05\\x04\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x8c\\x27\\x09\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x90\\x04\\x02\");\n\t\t} else {\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x0000, 0x0200,\n\t\t\t\t\t12, dat_1600);\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x8c\\x27\\x07\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x90\\x06\\x40\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x8c\\x27\\x09\");\n\t\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033,\n\t\t\t\t\t3, \"\\x90\\x04\\xb0\");\n\t\t}\n\n\t\tfetch_idxdata(gspca_dev, tbl_init_post_alt_big,\n\t\t\t\tARRAY_SIZE(tbl_init_post_alt_big));\n\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0001, 0x0010, 0, NULL);\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0000, 0x00c1, 0, NULL);\n\t\tctrl_out(gspca_dev, 0x40, 1, 0x0041, 0x00c2, 0, NULL);\n\t\tmsleep(1850);\n\t}\n\n\tctrl_out(gspca_dev, 0x40, 1, 0x0040, 0x0000, 0, NULL);\n\tmsleep(40);\n\n\t \n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_freq1);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_freq2);\n\tmsleep(33);\n\t \n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi1);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi2);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi3);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi4);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_wbal1);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_wbal2);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi5);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi6);\n\tmsleep(7);\n\tctrl_in(gspca_dev, 0xc0, 2, 0x0000, 0x0000, 1, &c);\n\n\tfetch_idxdata(gspca_dev, tbl_init_post_alt_3B,\n\t\t\tARRAY_SIZE(tbl_init_post_alt_3B));\n\n\t \n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip1);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip2);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip3);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip4);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip5);\n\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip6);\n\tmsleep(250);\n\n\tif (reso == IMAGE_640 || reso == IMAGE_800)\n\t\tfetch_idxdata(gspca_dev, tbl_middle_hvflip_low,\n\t\t\t\tARRAY_SIZE(tbl_middle_hvflip_low));\n\telse\n\t\tfetch_idxdata(gspca_dev, tbl_middle_hvflip_big,\n\t\t\t\tARRAY_SIZE(tbl_middle_hvflip_big));\n\n\tfetch_idxdata(gspca_dev, tbl_end_hvflip,\n\t\t\tARRAY_SIZE(tbl_end_hvflip));\n\n\tsd->nbIm = 0;\n\n\tsd->vold.mirror    = mirror;\n\tsd->vold.flip      = flip;\n\tsd->vold.AC50Hz    = freq;\n\tsd->vold.whitebal  = wbal;\n\n\tmi2020_camera_settings(gspca_dev);\n\n\treturn 0;\n}\n\nstatic int mi2020_configure_alt(struct gspca_dev *gspca_dev)\n{\n\ts32 reso = gspca_dev->cam.cam_mode[(s32) gspca_dev->curr_mode].priv;\n\n\tswitch (reso) {\n\tcase IMAGE_640:\n\t\tgspca_dev->alt = 3 + 1;\n\t\tbreak;\n\n\tcase IMAGE_800:\n\tcase IMAGE_1280:\n\tcase IMAGE_1600:\n\t\tgspca_dev->alt = 1 + 1;\n\t\tbreak;\n\t}\n\treturn 0;\n}\n\nstatic int mi2020_camera_settings(struct gspca_dev *gspca_dev)\n{\n\tstruct sd *sd = (struct sd *) gspca_dev;\n\ts32 reso = gspca_dev->cam.cam_mode[(s32) gspca_dev->curr_mode].priv;\n\n\ts32 backlight = sd->vcur.backlight;\n\ts32 bright =  sd->vcur.brightness;\n\ts32 sharp  =  sd->vcur.sharpness;\n\ts32 cntr   =  sd->vcur.contrast;\n\ts32 gam\t   =  sd->vcur.gamma;\n\ts32 hue    = (sd->vcur.hue > 0);\n\ts32 mirror = (((sd->vcur.mirror > 0) ^ sd->mirrorMask) > 0);\n\ts32 flip   = (((sd->vcur.flip   > 0) ^ sd->mirrorMask) > 0);\n\ts32 freq   = (sd->vcur.AC50Hz > 0);\n\ts32 wbal   = sd->vcur.whitebal;\n\n\tu8 dat_sharp[] = {0x6c, 0x00, 0x08};\n\tu8 dat_bright2[] = {0x90, 0x00, 0x00};\n\tu8 dat_freq2[] = {0x90, 0x00, 0x80};\n\tu8 dat_multi1[] = {0x8c, 0xa7, 0x00};\n\tu8 dat_multi2[] = {0x90, 0x00, 0x00};\n\tu8 dat_multi3[] = {0x8c, 0xa7, 0x00};\n\tu8 dat_multi4[] = {0x90, 0x00, 0x00};\n\tu8 dat_hvflip2[] = {0x90, 0x04, 0x6c};\n\tu8 dat_hvflip4[] = {0x90, 0x00, 0x24};\n\tu8 dat_wbal2[] = {0x90, 0x00, 0x00};\n\n\t \n\tif (sd->nbIm < 4) {\n\t\tsd->waitSet = 1;\n\t\treturn 0;\n\t}\n\tsd->waitSet = 0;\n\n\tif (freq != sd->vold.AC50Hz) {\n\t\tsd->vold.AC50Hz = freq;\n\n\t\tdat_freq2[2] = freq ? 0xc0 : 0x80;\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_freq1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_freq2);\n\t\tmsleep(20);\n\t}\n\n\tif (wbal != sd->vold.whitebal) {\n\t\tsd->vold.whitebal = wbal;\n\t\tif (wbal < 0 || wbal > sd->vmax.whitebal)\n\t\t\twbal = 0;\n\n\t\tdat_multi1[2] = 0x9d;\n\t\tdat_multi3[2] = dat_multi1[2] + 1;\n\t\tif (wbal == 0) {\n\t\t\tdat_multi4[2] = dat_multi2[2] = 0;\n\t\t\tdat_wbal2[2] = 0x17;\n\t\t} else if (wbal == 1) {\n\t\t\tdat_multi4[2] = dat_multi2[2] = 0;\n\t\t\tdat_wbal2[2] = 0x35;\n\t\t} else if (wbal == 2) {\n\t\t\tdat_multi4[2] = dat_multi2[2] = 0x20;\n\t\t\tdat_wbal2[2] = 0x17;\n\t\t}\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi3);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi4);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_wbal1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_wbal2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi5);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi6);\n\t}\n\n\tif (mirror != sd->vold.mirror || flip != sd->vold.flip) {\n\t\tsd->vold.mirror = mirror;\n\t\tsd->vold.flip   = flip;\n\n\t\tdat_hvflip2[2] = 0x6c + 2 * (1 - flip) + (1 - mirror);\n\t\tdat_hvflip4[2] = 0x24 + 2 * (1 - flip) + (1 - mirror);\n\n\t\tfetch_idxdata(gspca_dev, tbl_init_post_alt_3B,\n\t\t\t\tARRAY_SIZE(tbl_init_post_alt_3B));\n\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip3);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip4);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip5);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_hvflip6);\n\t\tmsleep(40);\n\n\t\tif (reso == IMAGE_640 || reso == IMAGE_800)\n\t\t\tfetch_idxdata(gspca_dev, tbl_middle_hvflip_low,\n\t\t\t\t\tARRAY_SIZE(tbl_middle_hvflip_low));\n\t\telse\n\t\t\tfetch_idxdata(gspca_dev, tbl_middle_hvflip_big,\n\t\t\t\t\tARRAY_SIZE(tbl_middle_hvflip_big));\n\n\t\tfetch_idxdata(gspca_dev, tbl_end_hvflip,\n\t\t\t\tARRAY_SIZE(tbl_end_hvflip));\n\t}\n\n\tif (bright != sd->vold.brightness) {\n\t\tsd->vold.brightness = bright;\n\t\tif (bright < 0 || bright > sd->vmax.brightness)\n\t\t\tbright = 0;\n\n\t\tdat_bright2[2] = bright;\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright3);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright4);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright5);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_bright6);\n\t}\n\n\tif (cntr != sd->vold.contrast || gam != sd->vold.gamma) {\n\t\tsd->vold.contrast = cntr;\n\t\tif (cntr < 0 || cntr > sd->vmax.contrast)\n\t\t\tcntr = 0;\n\t\tsd->vold.gamma = gam;\n\t\tif (gam < 0 || gam > sd->vmax.gamma)\n\t\t\tgam = 0;\n\n\t\tdat_multi1[2] = 0x6d;\n\t\tdat_multi3[2] = dat_multi1[2] + 1;\n\t\tif (cntr == 0)\n\t\t\tcntr = 4;\n\t\tdat_multi4[2] = dat_multi2[2] = cntr * 0x10 + 2 - gam;\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi3);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi4);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi5);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi6);\n\t}\n\n\tif (backlight != sd->vold.backlight) {\n\t\tsd->vold.backlight = backlight;\n\t\tif (backlight < 0 || backlight > sd->vmax.backlight)\n\t\t\tbacklight = 0;\n\n\t\tdat_multi1[2] = 0x9d;\n\t\tdat_multi3[2] = dat_multi1[2] + 1;\n\t\tdat_multi4[2] = dat_multi2[2] = backlight;\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi1);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi2);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi3);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi4);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi5);\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0033, 3, dat_multi6);\n\t}\n\n\tif (sharp != sd->vold.sharpness) {\n\t\tsd->vold.sharpness = sharp;\n\t\tif (sharp < 0 || sharp > sd->vmax.sharpness)\n\t\t\tsharp = 0;\n\n\t\tdat_sharp[1] = sharp;\n\t\tctrl_out(gspca_dev, 0x40, 3, 0x7a00, 0x0032, 3, dat_sharp);\n\t}\n\n\tif (hue != sd->vold.hue) {\n\t\tsd->swapRB = hue;\n\t\tsd->vold.hue = hue;\n\t}\n\n\treturn 0;\n}\n\nstatic void mi2020_post_unset_alt(struct gspca_dev *gspca_dev)\n{\n\tctrl_out(gspca_dev, 0x40, 5, 0x0000, 0x0000, 0, NULL);\n\tmsleep(40);\n\tctrl_out(gspca_dev, 0x40, 1, 0x0001, 0x0000, 0, NULL);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}