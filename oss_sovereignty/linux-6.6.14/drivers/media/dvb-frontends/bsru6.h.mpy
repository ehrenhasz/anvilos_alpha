{
  "module_name": "bsru6.h",
  "hash_id": "ce61b1b0d63ef8bcd8d4a461bcf3166bb92756b389205aa78e396f0f505491ba",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/dvb-frontends/bsru6.h",
  "human_readable_source": " \n \n\n#ifndef BSRU6_H\n#define BSRU6_H\n\nstatic u8 alps_bsru6_inittab[] = {\n\t0x01, 0x15,\n\t0x02, 0x30,\n\t0x03, 0x00,\n\t0x04, 0x7d,    \n\t0x05, 0x35,    \n\t0x06, 0x40,    \n\t0x07, 0x00,    \n\t0x08, 0x40,    \n\t0x09, 0x00,    \n\t0x0c, 0x51,    \n\t0x0d, 0x82,    \n\t0x0e, 0x23,    \n\t0x10, 0x3f,   \n\t0x11, 0x84,\n\t0x12, 0xb9,\n\t0x15, 0xc9,   \n\t0x16, 0x00,\n\t0x17, 0x00,\n\t0x18, 0x00,\n\t0x19, 0x00,\n\t0x1a, 0x00,\n\t0x1f, 0x50,\n\t0x20, 0x00,\n\t0x21, 0x00,\n\t0x22, 0x00,\n\t0x23, 0x00,\n\t0x28, 0x00,  \n\t0x29, 0x1e,  \n\t0x2a, 0x14,  \n\t0x2b, 0x0f,  \n\t0x2c, 0x09,  \n\t0x2d, 0x05,  \n\t0x2e, 0x01,\n\t0x31, 0x1f,  \n\t0x32, 0x19,  \n\t0x33, 0xfc,  \n\t0x34, 0x93,  \n\t0x0f, 0x52,\n\t0xff, 0xff\n};\n\nstatic int alps_bsru6_set_symbol_rate(struct dvb_frontend *fe, u32 srate, u32 ratio)\n{\n\tu8 aclk = 0;\n\tu8 bclk = 0;\n\n\tif (srate < 1500000) {\n\t\taclk = 0xb7;\n\t\tbclk = 0x47;\n\t} else if (srate < 3000000) {\n\t\taclk = 0xb7;\n\t\tbclk = 0x4b;\n\t} else if (srate < 7000000) {\n\t\taclk = 0xb7;\n\t\tbclk = 0x4f;\n\t} else if (srate < 14000000) {\n\t\taclk = 0xb7;\n\t\tbclk = 0x53;\n\t} else if (srate < 30000000) {\n\t\taclk = 0xb6;\n\t\tbclk = 0x53;\n\t} else if (srate < 45000000) {\n\t\taclk = 0xb4;\n\t\tbclk = 0x51;\n\t}\n\n\tstv0299_writereg(fe, 0x13, aclk);\n\tstv0299_writereg(fe, 0x14, bclk);\n\tstv0299_writereg(fe, 0x1f, (ratio >> 16) & 0xff);\n\tstv0299_writereg(fe, 0x20, (ratio >> 8) & 0xff);\n\tstv0299_writereg(fe, 0x21, ratio & 0xf0);\n\n\treturn 0;\n}\n\nstatic int alps_bsru6_tuner_set_params(struct dvb_frontend *fe)\n{\n\tstruct dtv_frontend_properties *p = &fe->dtv_property_cache;\n\tu8 buf[4];\n\tu32 div;\n\tstruct i2c_msg msg = { .addr = 0x61, .flags = 0, .buf = buf, .len = sizeof(buf) };\n\tstruct i2c_adapter *i2c = fe->tuner_priv;\n\n\tif ((p->frequency < 950000) || (p->frequency > 2150000))\n\t\treturn -EINVAL;\n\n\tdiv = (p->frequency + (125 - 1)) / 125;\t \n\tbuf[0] = (div >> 8) & 0x7f;\n\tbuf[1] = div & 0xff;\n\tbuf[2] = 0x80 | ((div & 0x18000) >> 10) | 4;\n\tbuf[3] = 0xC4;\n\n\tif (p->frequency > 1530000)\n\t\tbuf[3] = 0xc0;\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 1);\n\tif (i2c_transfer(i2c, &msg, 1) != 1)\n\t\treturn -EIO;\n\treturn 0;\n}\n\nstatic struct stv0299_config alps_bsru6_config = {\n\t.demod_address = 0x68,\n\t.inittab = alps_bsru6_inittab,\n\t.mclk = 88000000UL,\n\t.invert = 1,\n\t.skip_reinit = 0,\n\t.lock_output = STV0299_LOCKOUTPUT_1,\n\t.volt13_op0_op1 = STV0299_VOLT13_OP1,\n\t.min_delay_ms = 100,\n\t.set_symbol_rate = alps_bsru6_set_symbol_rate,\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}