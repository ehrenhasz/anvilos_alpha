{
  "module_name": "cxd2880_tnrdmd.h",
  "hash_id": "55769eb2c0dac8dac31fe0baa4e8803612b6cb474985197985d220dcc37dfa94",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/dvb-frontends/cxd2880/cxd2880_tnrdmd.h",
  "human_readable_source": " \n \n\n#ifndef CXD2880_TNRDMD_H\n#define CXD2880_TNRDMD_H\n\n#include <linux/atomic.h>\n\n#include \"cxd2880_common.h\"\n#include \"cxd2880_io.h\"\n#include \"cxd2880_dtv.h\"\n#include \"cxd2880_dvbt.h\"\n#include \"cxd2880_dvbt2.h\"\n\n#define CXD2880_TNRDMD_MAX_CFG_MEM_COUNT 100\n\n#define slvt_unfreeze_reg(tnr_dmd) ((void)((tnr_dmd)->io->write_reg\\\n((tnr_dmd)->io, CXD2880_IO_TGT_DMD, 0x01, 0x00)))\n\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_BUF_UNDERFLOW     0x0001\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_BUF_OVERFLOW      0x0002\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_BUF_ALMOST_EMPTY  0x0004\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_BUF_ALMOST_FULL   0x0008\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_BUF_RRDY\t  0x0010\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_ILLEGAL_COMMAND      0x0020\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_ILLEGAL_ACCESS       0x0040\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_CPU_ERROR\t    0x0100\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_LOCK\t\t 0x0200\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_INV_LOCK\t     0x0400\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_NOOFDM\t       0x0800\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_EWS\t\t  0x1000\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_EEW\t\t  0x2000\n#define CXD2880_TNRDMD_INTERRUPT_TYPE_FEC_FAIL\t     0x4000\n\n#define CXD2880_TNRDMD_INTERRUPT_LOCK_SEL_L1POST_OK\t0x01\n#define CXD2880_TNRDMD_INTERRUPT_LOCK_SEL_DMD_LOCK\t 0x02\n#define CXD2880_TNRDMD_INTERRUPT_LOCK_SEL_TS_LOCK\t  0x04\n\nenum cxd2880_tnrdmd_chip_id {\n\tCXD2880_TNRDMD_CHIP_ID_UNKNOWN = 0x00,\n\tCXD2880_TNRDMD_CHIP_ID_CXD2880_ES1_0X = 0x62,\n\tCXD2880_TNRDMD_CHIP_ID_CXD2880_ES1_11 = 0x6a\n};\n\n#define CXD2880_TNRDMD_CHIP_ID_VALID(chip_id) \\\n\t(((chip_id) == CXD2880_TNRDMD_CHIP_ID_CXD2880_ES1_0X) || \\\n\t ((chip_id) == CXD2880_TNRDMD_CHIP_ID_CXD2880_ES1_11))\n\nenum cxd2880_tnrdmd_state {\n\tCXD2880_TNRDMD_STATE_UNKNOWN,\n\tCXD2880_TNRDMD_STATE_SLEEP,\n\tCXD2880_TNRDMD_STATE_ACTIVE,\n\tCXD2880_TNRDMD_STATE_INVALID\n};\n\nenum cxd2880_tnrdmd_divermode {\n\tCXD2880_TNRDMD_DIVERMODE_SINGLE,\n\tCXD2880_TNRDMD_DIVERMODE_MAIN,\n\tCXD2880_TNRDMD_DIVERMODE_SUB\n};\n\nenum cxd2880_tnrdmd_clockmode {\n\tCXD2880_TNRDMD_CLOCKMODE_UNKNOWN,\n\tCXD2880_TNRDMD_CLOCKMODE_A,\n\tCXD2880_TNRDMD_CLOCKMODE_B,\n\tCXD2880_TNRDMD_CLOCKMODE_C\n};\n\nenum cxd2880_tnrdmd_tsout_if {\n\tCXD2880_TNRDMD_TSOUT_IF_TS,\n\tCXD2880_TNRDMD_TSOUT_IF_SPI,\n\tCXD2880_TNRDMD_TSOUT_IF_SDIO\n};\n\nenum cxd2880_tnrdmd_xtal_share {\n\tCXD2880_TNRDMD_XTAL_SHARE_NONE,\n\tCXD2880_TNRDMD_XTAL_SHARE_EXTREF,\n\tCXD2880_TNRDMD_XTAL_SHARE_MASTER,\n\tCXD2880_TNRDMD_XTAL_SHARE_SLAVE\n};\n\nenum cxd2880_tnrdmd_spectrum_sense {\n\tCXD2880_TNRDMD_SPECTRUM_NORMAL,\n\tCXD2880_TNRDMD_SPECTRUM_INV\n};\n\nenum cxd2880_tnrdmd_cfg_id {\n\tCXD2880_TNRDMD_CFG_OUTPUT_SEL_MSB,\n\tCXD2880_TNRDMD_CFG_TSVALID_ACTIVE_HI,\n\tCXD2880_TNRDMD_CFG_TSSYNC_ACTIVE_HI,\n\tCXD2880_TNRDMD_CFG_TSERR_ACTIVE_HI,\n\tCXD2880_TNRDMD_CFG_LATCH_ON_POSEDGE,\n\tCXD2880_TNRDMD_CFG_TSCLK_CONT,\n\tCXD2880_TNRDMD_CFG_TSCLK_MASK,\n\tCXD2880_TNRDMD_CFG_TSVALID_MASK,\n\tCXD2880_TNRDMD_CFG_TSERR_MASK,\n\tCXD2880_TNRDMD_CFG_TSERR_VALID_DIS,\n\tCXD2880_TNRDMD_CFG_TSPIN_CURRENT,\n\tCXD2880_TNRDMD_CFG_TSPIN_PULLUP_MANUAL,\n\tCXD2880_TNRDMD_CFG_TSPIN_PULLUP,\n\tCXD2880_TNRDMD_CFG_TSCLK_FREQ,\n\tCXD2880_TNRDMD_CFG_TSBYTECLK_MANUAL,\n\tCXD2880_TNRDMD_CFG_TS_PACKET_GAP,\n\tCXD2880_TNRDMD_CFG_TS_BACKWARDS_COMPATIBLE,\n\tCXD2880_TNRDMD_CFG_PWM_VALUE,\n\tCXD2880_TNRDMD_CFG_INTERRUPT,\n\tCXD2880_TNRDMD_CFG_INTERRUPT_LOCK_SEL,\n\tCXD2880_TNRDMD_CFG_INTERRUPT_INV_LOCK_SEL,\n\tCXD2880_TNRDMD_CFG_TS_BUF_ALMOST_EMPTY_THRS,\n\tCXD2880_TNRDMD_CFG_TS_BUF_ALMOST_FULL_THRS,\n\tCXD2880_TNRDMD_CFG_TS_BUF_RRDY_THRS,\n\tCXD2880_TNRDMD_CFG_FIXED_CLOCKMODE,\n\tCXD2880_TNRDMD_CFG_CABLE_INPUT,\n\tCXD2880_TNRDMD_CFG_DVBT2_FEF_INTERMITTENT_BASE,\n\tCXD2880_TNRDMD_CFG_DVBT2_FEF_INTERMITTENT_LITE,\n\tCXD2880_TNRDMD_CFG_BLINDTUNE_DVBT2_FIRST,\n\tCXD2880_TNRDMD_CFG_DVBT_BERN_PERIOD,\n\tCXD2880_TNRDMD_CFG_DVBT_VBER_PERIOD,\n\tCXD2880_TNRDMD_CFG_DVBT_PER_MES,\n\tCXD2880_TNRDMD_CFG_DVBT2_BBER_MES,\n\tCXD2880_TNRDMD_CFG_DVBT2_LBER_MES,\n\tCXD2880_TNRDMD_CFG_DVBT2_PER_MES,\n};\n\nenum cxd2880_tnrdmd_lock_result {\n\tCXD2880_TNRDMD_LOCK_RESULT_NOTDETECT,\n\tCXD2880_TNRDMD_LOCK_RESULT_LOCKED,\n\tCXD2880_TNRDMD_LOCK_RESULT_UNLOCKED\n};\n\nenum cxd2880_tnrdmd_gpio_mode {\n\tCXD2880_TNRDMD_GPIO_MODE_OUTPUT = 0x00,\n\tCXD2880_TNRDMD_GPIO_MODE_INPUT = 0x01,\n\tCXD2880_TNRDMD_GPIO_MODE_INT = 0x02,\n\tCXD2880_TNRDMD_GPIO_MODE_FEC_FAIL = 0x03,\n\tCXD2880_TNRDMD_GPIO_MODE_PWM = 0x04,\n\tCXD2880_TNRDMD_GPIO_MODE_EWS = 0x05,\n\tCXD2880_TNRDMD_GPIO_MODE_EEW = 0x06\n};\n\nenum cxd2880_tnrdmd_serial_ts_clk {\n\tCXD2880_TNRDMD_SERIAL_TS_CLK_FULL,\n\tCXD2880_TNRDMD_SERIAL_TS_CLK_HALF\n};\n\nstruct cxd2880_tnrdmd_cfg_mem {\n\tenum cxd2880_io_tgt tgt;\n\tu8 bank;\n\tu8 address;\n\tu8 value;\n\tu8 bit_mask;\n};\n\nstruct cxd2880_tnrdmd_pid_cfg {\n\tu8 is_en;\n\tu16 pid;\n};\n\nstruct cxd2880_tnrdmd_pid_ftr_cfg {\n\tu8 is_negative;\n\tstruct cxd2880_tnrdmd_pid_cfg pid_cfg[32];\n};\n\nstruct cxd2880_tnrdmd_lna_thrs {\n\tu8 off_on;\n\tu8 on_off;\n};\n\nstruct cxd2880_tnrdmd_lna_thrs_tbl_air {\n\tstruct cxd2880_tnrdmd_lna_thrs thrs[24];\n};\n\nstruct cxd2880_tnrdmd_lna_thrs_tbl_cable {\n\tstruct cxd2880_tnrdmd_lna_thrs thrs[32];\n};\n\nstruct cxd2880_tnrdmd_create_param {\n\tenum cxd2880_tnrdmd_tsout_if ts_output_if;\n\tu8 en_internal_ldo;\n\tenum cxd2880_tnrdmd_xtal_share xtal_share_type;\n\tu8 xosc_cap;\n\tu8 xosc_i;\n\tu8 is_cxd2881gg;\n\tu8 stationary_use;\n};\n\nstruct cxd2880_tnrdmd_diver_create_param {\n\tenum cxd2880_tnrdmd_tsout_if ts_output_if;\n\tu8 en_internal_ldo;\n\tu8 xosc_cap_main;\n\tu8 xosc_i_main;\n\tu8 xosc_i_sub;\n\tu8 is_cxd2881gg;\n\tu8 stationary_use;\n};\n\nstruct cxd2880_tnrdmd {\n\tstruct cxd2880_tnrdmd *diver_sub;\n\tstruct cxd2880_io *io;\n\tstruct cxd2880_tnrdmd_create_param create_param;\n\tenum cxd2880_tnrdmd_divermode diver_mode;\n\tenum cxd2880_tnrdmd_clockmode fixed_clk_mode;\n\tu8 is_cable_input;\n\tu8 en_fef_intmtnt_base;\n\tu8 en_fef_intmtnt_lite;\n\tu8 blind_tune_dvbt2_first;\n\tint (*rf_lvl_cmpstn)(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t     int *rf_lvl_db);\n\tstruct cxd2880_tnrdmd_lna_thrs_tbl_air *lna_thrs_tbl_air;\n\tstruct cxd2880_tnrdmd_lna_thrs_tbl_cable *lna_thrs_tbl_cable;\n\tu8 srl_ts_clk_mod_cnts;\n\tenum cxd2880_tnrdmd_serial_ts_clk srl_ts_clk_frq;\n\tu8 ts_byte_clk_manual_setting;\n\tu8 is_ts_backwards_compatible_mode;\n\tstruct cxd2880_tnrdmd_cfg_mem cfg_mem[CXD2880_TNRDMD_MAX_CFG_MEM_COUNT];\n\tu8 cfg_mem_last_entry;\n\tstruct cxd2880_tnrdmd_pid_ftr_cfg pid_ftr_cfg;\n\tu8 pid_ftr_cfg_en;\n\tvoid *user;\n\tenum cxd2880_tnrdmd_chip_id chip_id;\n\tenum cxd2880_tnrdmd_state state;\n\tenum cxd2880_tnrdmd_clockmode clk_mode;\n\tu32 frequency_khz;\n\tenum cxd2880_dtv_sys sys;\n\tenum cxd2880_dtv_bandwidth bandwidth;\n\tu8 scan_mode;\n\tatomic_t cancel;\n};\n\nint cxd2880_tnrdmd_create(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t  struct cxd2880_io *io,\n\t\t\t  struct cxd2880_tnrdmd_create_param\n\t\t\t  *create_param);\n\nint cxd2880_tnrdmd_diver_create(struct cxd2880_tnrdmd\n\t\t\t\t*tnr_dmd_main,\n\t\t\t\tstruct cxd2880_io *io_main,\n\t\t\t\tstruct cxd2880_tnrdmd *tnr_dmd_sub,\n\t\t\t\tstruct cxd2880_io *io_sub,\n\t\t\t\tstruct\n\t\t\t\tcxd2880_tnrdmd_diver_create_param\n\t\t\t\t*create_param);\n\nint cxd2880_tnrdmd_init1(struct cxd2880_tnrdmd *tnr_dmd);\n\nint cxd2880_tnrdmd_init2(struct cxd2880_tnrdmd *tnr_dmd);\n\nint cxd2880_tnrdmd_check_internal_cpu_status(struct cxd2880_tnrdmd\n\t\t\t\t\t     *tnr_dmd,\n\t\t\t\t\t     u8 *task_completed);\n\nint cxd2880_tnrdmd_common_tune_setting1(struct cxd2880_tnrdmd\n\t\t\t\t\t*tnr_dmd,\n\t\t\t\t\tenum cxd2880_dtv_sys sys,\n\t\t\t\t\tu32 frequency_khz,\n\t\t\t\t\tenum cxd2880_dtv_bandwidth\n\t\t\t\t\tbandwidth, u8 one_seg_opt,\n\t\t\t\t\tu8 one_seg_opt_shft_dir);\n\nint cxd2880_tnrdmd_common_tune_setting2(struct cxd2880_tnrdmd\n\t\t\t\t\t*tnr_dmd,\n\t\t\t\t\tenum cxd2880_dtv_sys sys,\n\t\t\t\t\tu8 en_fef_intmtnt_ctrl);\n\nint cxd2880_tnrdmd_sleep(struct cxd2880_tnrdmd *tnr_dmd);\n\nint cxd2880_tnrdmd_set_cfg(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t   enum cxd2880_tnrdmd_cfg_id id,\n\t\t\t   int value);\n\nint cxd2880_tnrdmd_gpio_set_cfg(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\tu8 id,\n\t\t\t\tu8 en,\n\t\t\t\tenum cxd2880_tnrdmd_gpio_mode mode,\n\t\t\t\tu8 open_drain, u8 invert);\n\nint cxd2880_tnrdmd_gpio_set_cfg_sub(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t    u8 id,\n\t\t\t\t    u8 en,\n\t\t\t\t    enum cxd2880_tnrdmd_gpio_mode\n\t\t\t\t    mode, u8 open_drain,\n\t\t\t\t    u8 invert);\n\nint cxd2880_tnrdmd_gpio_read(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t     u8 id, u8 *value);\n\nint cxd2880_tnrdmd_gpio_read_sub(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t u8 id, u8 *value);\n\nint cxd2880_tnrdmd_gpio_write(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t      u8 id, u8 value);\n\nint cxd2880_tnrdmd_gpio_write_sub(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t  u8 id, u8 value);\n\nint cxd2880_tnrdmd_interrupt_read(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t  u16 *value);\n\nint cxd2880_tnrdmd_interrupt_clear(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t   u16 value);\n\nint cxd2880_tnrdmd_ts_buf_clear(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\tu8 clear_overflow_flag,\n\t\t\t\tu8 clear_underflow_flag,\n\t\t\t\tu8 clear_buf);\n\nint cxd2880_tnrdmd_chip_id(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t   enum cxd2880_tnrdmd_chip_id *chip_id);\n\nint cxd2880_tnrdmd_set_and_save_reg_bits(struct cxd2880_tnrdmd\n\t\t\t\t\t *tnr_dmd,\n\t\t\t\t\t enum cxd2880_io_tgt tgt,\n\t\t\t\t\t u8 bank, u8 address,\n\t\t\t\t\t u8 value, u8 bit_mask);\n\nint cxd2880_tnrdmd_set_scan_mode(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t enum cxd2880_dtv_sys sys,\n\t\t\t\t u8 scan_mode_end);\n\nint cxd2880_tnrdmd_set_pid_ftr(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t       struct cxd2880_tnrdmd_pid_ftr_cfg\n\t\t\t       *pid_ftr_cfg);\n\nint cxd2880_tnrdmd_set_rf_lvl_cmpstn(struct cxd2880_tnrdmd\n\t\t\t\t     *tnr_dmd,\n\t\t\t\t     int (*rf_lvl_cmpstn)\n\t\t\t\t     (struct cxd2880_tnrdmd *,\n\t\t\t\t     int *));\n\nint cxd2880_tnrdmd_set_rf_lvl_cmpstn_sub(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t\t int (*rf_lvl_cmpstn)\n\t\t\t\t\t (struct cxd2880_tnrdmd *,\n\t\t\t\t\t int *));\n\nint cxd2880_tnrdmd_set_lna_thrs(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\tstruct\n\t\t\t\tcxd2880_tnrdmd_lna_thrs_tbl_air\n\t\t\t\t*tbl_air,\n\t\t\t\tstruct\n\t\t\t\tcxd2880_tnrdmd_lna_thrs_tbl_cable\n\t\t\t\t*tbl_cable);\n\nint cxd2880_tnrdmd_set_lna_thrs_sub(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t    struct\n\t\t\t\t    cxd2880_tnrdmd_lna_thrs_tbl_air\n\t\t\t\t    *tbl_air,\n\t\t\t\t    struct\n\t\t\t\t    cxd2880_tnrdmd_lna_thrs_tbl_cable\n\t\t\t\t    *tbl_cable);\n\nint cxd2880_tnrdmd_set_ts_pin_high_low(struct cxd2880_tnrdmd\n\t\t\t\t       *tnr_dmd, u8 en, u8 value);\n\nint cxd2880_tnrdmd_set_ts_output(struct cxd2880_tnrdmd *tnr_dmd,\n\t\t\t\t u8 en);\n\nint slvt_freeze_reg(struct cxd2880_tnrdmd *tnr_dmd);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}