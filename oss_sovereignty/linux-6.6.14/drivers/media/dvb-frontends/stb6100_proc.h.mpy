{
  "module_name": "stb6100_proc.h",
  "hash_id": "d3ec8e5305d1f645b344b6c79ddd21432f1cdcbe22d0bdf0f19be385fe6a3cfa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/dvb-frontends/stb6100_proc.h",
  "human_readable_source": " \n \n\n#include <linux/dvb/frontend.h>\n#include <media/dvb_frontend.h>\n\nstatic int stb6100_get_freq(struct dvb_frontend *fe, u32 *frequency)\n{\n\tstruct dvb_frontend_ops\t*frontend_ops = &fe->ops;\n\tstruct dvb_tuner_ops\t*tuner_ops = &frontend_ops->tuner_ops;\n\tint err = 0;\n\n\tif (tuner_ops->get_frequency) {\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 1);\n\n\t\terr = tuner_ops->get_frequency(fe, frequency);\n\t\tif (err < 0) {\n\t\t\tprintk(\"%s: Invalid parameter\\n\", __func__);\n\t\t\treturn err;\n\t\t}\n\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 0);\n\t}\n\n\treturn 0;\n}\n\nstatic int stb6100_set_freq(struct dvb_frontend *fe, u32 frequency)\n{\n\tstruct dvb_frontend_ops\t*frontend_ops = &fe->ops;\n\tstruct dvb_tuner_ops\t*tuner_ops = &frontend_ops->tuner_ops;\n\tstruct dtv_frontend_properties *c = &fe->dtv_property_cache;\n\tu32 bw = c->bandwidth_hz;\n\tint err = 0;\n\n\tc->frequency = frequency;\n\tc->bandwidth_hz = 0;\t\t \n\n\tif (tuner_ops->set_params) {\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 1);\n\n\t\terr = tuner_ops->set_params(fe);\n\t\tc->bandwidth_hz = bw;\n\t\tif (err < 0) {\n\t\t\tprintk(\"%s: Invalid parameter\\n\", __func__);\n\t\t\treturn err;\n\t\t}\n\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 0);\n\n\t}\n\n\treturn 0;\n}\n\nstatic int stb6100_get_bandw(struct dvb_frontend *fe, u32 *bandwidth)\n{\n\tstruct dvb_frontend_ops\t*frontend_ops = &fe->ops;\n\tstruct dvb_tuner_ops\t*tuner_ops = &frontend_ops->tuner_ops;\n\tint err = 0;\n\n\tif (tuner_ops->get_bandwidth) {\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 1);\n\n\t\terr = tuner_ops->get_bandwidth(fe, bandwidth);\n\t\tif (err < 0) {\n\t\t\tprintk(KERN_ERR \"%s: Invalid parameter\\n\", __func__);\n\t\t\treturn err;\n\t\t}\n\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 0);\n\t}\n\n\treturn 0;\n}\n\nstatic int stb6100_set_bandw(struct dvb_frontend *fe, u32 bandwidth)\n{\n\tstruct dvb_frontend_ops\t*frontend_ops = &fe->ops;\n\tstruct dvb_tuner_ops\t*tuner_ops = &frontend_ops->tuner_ops;\n\tstruct dtv_frontend_properties *c = &fe->dtv_property_cache;\n\tu32 freq = c->frequency;\n\tint err = 0;\n\n\tc->bandwidth_hz = bandwidth;\n\tc->frequency = 0;\t\t \n\n\tif (tuner_ops->set_params) {\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 1);\n\n\t\terr = tuner_ops->set_params(fe);\n\t\tc->frequency = freq;\n\t\tif (err < 0) {\n\t\t\tprintk(KERN_ERR \"%s: Invalid parameter\\n\", __func__);\n\t\t\treturn err;\n\t\t}\n\n\t\tif (frontend_ops->i2c_gate_ctrl)\n\t\t\tfrontend_ops->i2c_gate_ctrl(fe, 0);\n\n\t}\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}