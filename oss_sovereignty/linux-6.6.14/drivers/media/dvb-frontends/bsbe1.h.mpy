{
  "module_name": "bsbe1.h",
  "hash_id": "1385bfa15f9a198f97d3e4ec9bbaa3baabef4f7e30b92b131eb1d084a1ed0149",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/dvb-frontends/bsbe1.h",
  "human_readable_source": " \n \n\n#ifndef BSBE1_H\n#define BSBE1_H\n\nstatic u8 alps_bsbe1_inittab[] = {\n\t0x01, 0x15,    \n\t0x02, 0x30,    \n\t0x03, 0x00,    \n\t0x04, 0x7d,    \n\t0x05, 0x05,    \n\t0x06, 0x00,    \n\t0x08, 0x40,    \n\t0x09, 0x00,    \n\t0x0c, 0x51,    \n\t0x0d, 0x82,    \n\t0x0f, 0x92,    \n\t0x10, 0x34,    \n\t0x11, 0x84,    \n\t0x12, 0xb9,    \n\t0x15, 0xc9,    \n\t0x28, 0x00,    \n\t0x33, 0xfc,    \n\t0x34, 0x93,    \n\t0xff, 0xff\n};\n\n\nstatic int alps_bsbe1_set_symbol_rate(struct dvb_frontend* fe, u32 srate, u32 ratio)\n{\n\tu8 aclk = 0;\n\tu8 bclk = 0;\n\n\tif (srate < 1500000) { aclk = 0xb7; bclk = 0x47; }\n\telse if (srate < 3000000) { aclk = 0xb7; bclk = 0x4b; }\n\telse if (srate < 7000000) { aclk = 0xb7; bclk = 0x4f; }\n\telse if (srate < 14000000) { aclk = 0xb7; bclk = 0x53; }\n\telse if (srate < 30000000) { aclk = 0xb6; bclk = 0x53; }\n\telse if (srate < 45000000) { aclk = 0xb4; bclk = 0x51; }\n\n\tstv0299_writereg(fe, 0x13, aclk);\n\tstv0299_writereg(fe, 0x14, bclk);\n\tstv0299_writereg(fe, 0x1f, (ratio >> 16) & 0xff);\n\tstv0299_writereg(fe, 0x20, (ratio >>  8) & 0xff);\n\tstv0299_writereg(fe, 0x21, (ratio      ) & 0xf0);\n\n\treturn 0;\n}\n\nstatic int alps_bsbe1_tuner_set_params(struct dvb_frontend *fe)\n{\n\tstruct dtv_frontend_properties *p = &fe->dtv_property_cache;\n\tint ret;\n\tu8 data[4];\n\tu32 div;\n\tstruct i2c_msg msg = { .addr = 0x61, .flags = 0, .buf = data, .len = sizeof(data) };\n\tstruct i2c_adapter *i2c = fe->tuner_priv;\n\n\tif ((p->frequency < 950000) || (p->frequency > 2150000))\n\t\treturn -EINVAL;\n\n\tdiv = p->frequency / 1000;\n\tdata[0] = (div >> 8) & 0x7f;\n\tdata[1] = div & 0xff;\n\tdata[2] = 0x80 | ((div & 0x18000) >> 10) | 0x1;\n\tdata[3] = 0xe0;\n\n\tif (fe->ops.i2c_gate_ctrl)\n\t\tfe->ops.i2c_gate_ctrl(fe, 1);\n\tret = i2c_transfer(i2c, &msg, 1);\n\treturn (ret != 1) ? -EIO : 0;\n}\n\nstatic struct stv0299_config alps_bsbe1_config = {\n\t.demod_address = 0x68,\n\t.inittab = alps_bsbe1_inittab,\n\t.mclk = 88000000UL,\n\t.invert = 1,\n\t.skip_reinit = 0,\n\t.min_delay_ms = 100,\n\t.set_symbol_rate = alps_bsbe1_set_symbol_rate,\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}