{
  "module_name": "smipcie.h",
  "hash_id": "f26358b273513f06732706fb88fb8cc4483c0fdc54603bf59b0cb63089b28768",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/smipcie/smipcie.h",
  "human_readable_source": " \n \n\n#ifndef _SMI_PCIE_H_\n#define _SMI_PCIE_H_\n\n#include <linux/i2c.h>\n#include <linux/i2c-algo-bit.h>\n#include <linux/init.h>\n#include <linux/interrupt.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pci.h>\n#include <linux/dma-mapping.h>\n#include <linux/slab.h>\n#include <media/rc-core.h>\n\n#include <media/demux.h>\n#include <media/dmxdev.h>\n#include <media/dvb_demux.h>\n#include <media/dvb_frontend.h>\n#include <media/dvb_net.h>\n#include <media/dvbdev.h>\n\n \n#define    MSI_CONTROL_REG_BASE                 0x0800\n#define    SYSTEM_CONTROL_REG_BASE              0x0880\n#define    PCIE_EP_DEBUG_REG_BASE               0x08C0\n#define    IR_CONTROL_REG_BASE                  0x0900\n#define    I2C_A_CONTROL_REG_BASE               0x0940\n#define    I2C_B_CONTROL_REG_BASE               0x0980\n#define    ATV_PORTA_CONTROL_REG_BASE           0x09C0\n#define    DTV_PORTA_CONTROL_REG_BASE           0x0A00\n#define    AES_PORTA_CONTROL_REG_BASE           0x0A80\n#define    DMA_PORTA_CONTROL_REG_BASE           0x0AC0\n#define    ATV_PORTB_CONTROL_REG_BASE           0x0B00\n#define    DTV_PORTB_CONTROL_REG_BASE           0x0B40\n#define    AES_PORTB_CONTROL_REG_BASE           0x0BC0\n#define    DMA_PORTB_CONTROL_REG_BASE           0x0C00\n#define    UART_A_REGISTER_BASE                 0x0C40\n#define    UART_B_REGISTER_BASE                 0x0C80\n#define    GPS_CONTROL_REG_BASE                 0x0CC0\n#define    DMA_PORTC_CONTROL_REG_BASE           0x0D00\n#define    DMA_PORTD_CONTROL_REG_BASE           0x0D00\n#define    AES_RANDOM_DATA_BASE                 0x0D80\n#define    AES_KEY_IN_BASE                      0x0D90\n#define    RANDOM_DATA_LIB_BASE                 0x0E00\n#define    IR_DATA_BUFFER_BASE                  0x0F00\n#define    PORTA_TS_BUFFER_BASE                 0x1000\n#define    PORTA_I2S_BUFFER_BASE                0x1400\n#define    PORTB_TS_BUFFER_BASE                 0x1800\n#define    PORTB_I2S_BUFFER_BASE                0x1C00\n\n \n#define MSI_DELAY_TIMER             (MSI_CONTROL_REG_BASE + 0x00)\n#define MSI_INT_STATUS              (MSI_CONTROL_REG_BASE + 0x08)\n#define MSI_INT_STATUS_CLR          (MSI_CONTROL_REG_BASE + 0x0C)\n#define MSI_INT_STATUS_SET          (MSI_CONTROL_REG_BASE + 0x10)\n#define MSI_INT_ENA                 (MSI_CONTROL_REG_BASE + 0x14)\n#define MSI_INT_ENA_CLR             (MSI_CONTROL_REG_BASE + 0x18)\n#define MSI_INT_ENA_SET             (MSI_CONTROL_REG_BASE + 0x1C)\n#define MSI_SOFT_RESET              (MSI_CONTROL_REG_BASE + 0x20)\n#define MSI_CFG_SRC0                (MSI_CONTROL_REG_BASE + 0x24)\n\n \n#define MUX_MODE_CTRL         (SYSTEM_CONTROL_REG_BASE + 0x00)\n\t#define rbPaMSMask        0x07\n\t#define rbPaMSDtvNoGpio   0x00  \n\t#define rbPaMSDtv4bitGpio 0x01  \n\t#define rbPaMSDtv7bitGpio 0x02  \n\t#define rbPaMS8bitGpio    0x03  \n\t#define rbPaMSAtv         0x04  \n\t#define rbPbMSMask        0x38\n\t#define rbPbMSDtvNoGpio   0x00  \n\t#define rbPbMSDtv4bitGpio 0x08  \n\t#define rbPbMSDtv7bitGpio 0x10  \n\t#define rbPbMS8bitGpio    0x18  \n\t#define rbPbMSAtv         0x20  \n\t#define rbPaAESEN         0x40  \n\t#define rbPbAESEN         0x80  \n\n#define INTERNAL_RST                (SYSTEM_CONTROL_REG_BASE + 0x04)\n#define PERIPHERAL_CTRL             (SYSTEM_CONTROL_REG_BASE + 0x08)\n#define GPIO_0to7_CTRL              (SYSTEM_CONTROL_REG_BASE + 0x0C)\n#define GPIO_8to15_CTRL             (SYSTEM_CONTROL_REG_BASE + 0x10)\n#define GPIO_16to24_CTRL            (SYSTEM_CONTROL_REG_BASE + 0x14)\n#define GPIO_INT_SRC_CFG            (SYSTEM_CONTROL_REG_BASE + 0x18)\n#define SYS_BUF_STATUS              (SYSTEM_CONTROL_REG_BASE + 0x1C)\n#define PCIE_IP_REG_ACS             (SYSTEM_CONTROL_REG_BASE + 0x20)\n#define PCIE_IP_REG_ACS_ADDR        (SYSTEM_CONTROL_REG_BASE + 0x24)\n#define PCIE_IP_REG_ACS_DATA        (SYSTEM_CONTROL_REG_BASE + 0x28)\n\n \n#define   IR_Init_Reg         (IR_CONTROL_REG_BASE + 0x00)\n#define   IR_Idle_Cnt_Low     (IR_CONTROL_REG_BASE + 0x04)\n#define   IR_Idle_Cnt_High    (IR_CONTROL_REG_BASE + 0x05)\n#define   IR_Unit_Cnt_Low     (IR_CONTROL_REG_BASE + 0x06)\n#define   IR_Unit_Cnt_High    (IR_CONTROL_REG_BASE + 0x07)\n#define   IR_Data_Cnt         (IR_CONTROL_REG_BASE + 0x08)\n#define   rbIRen            0x80\n#define   rbIRhighidle      0x10\n#define   rbIRlowidle       0x00\n#define   rbIRVld           0x04\n\n \n#define I2C_A_CTL_STATUS                 (I2C_A_CONTROL_REG_BASE + 0x00)\n#define I2C_A_ADDR                       (I2C_A_CONTROL_REG_BASE + 0x04)\n#define I2C_A_SW_CTL                     (I2C_A_CONTROL_REG_BASE + 0x08)\n#define I2C_A_TIME_OUT_CNT               (I2C_A_CONTROL_REG_BASE + 0x0C)\n#define I2C_A_FIFO_STATUS                (I2C_A_CONTROL_REG_BASE + 0x10)\n#define I2C_A_FS_EN                      (I2C_A_CONTROL_REG_BASE + 0x14)\n#define I2C_A_FIFO_DATA                  (I2C_A_CONTROL_REG_BASE + 0x20)\n\n \n#define I2C_B_CTL_STATUS                 (I2C_B_CONTROL_REG_BASE + 0x00)\n#define I2C_B_ADDR                       (I2C_B_CONTROL_REG_BASE + 0x04)\n#define I2C_B_SW_CTL                     (I2C_B_CONTROL_REG_BASE + 0x08)\n#define I2C_B_TIME_OUT_CNT               (I2C_B_CONTROL_REG_BASE + 0x0C)\n#define I2C_B_FIFO_STATUS                (I2C_B_CONTROL_REG_BASE + 0x10)\n#define I2C_B_FS_EN                      (I2C_B_CONTROL_REG_BASE + 0x14)\n#define I2C_B_FIFO_DATA                  (I2C_B_CONTROL_REG_BASE + 0x20)\n\n#define VIDEO_CTRL_STATUS_A\t(ATV_PORTA_CONTROL_REG_BASE + 0x04)\n\n \n#define MPEG2_CTRL_A\t\t(DTV_PORTA_CONTROL_REG_BASE + 0x00)\n#define SERIAL_IN_ADDR_A\t(DTV_PORTA_CONTROL_REG_BASE + 0x4C)\n#define VLD_CNT_ADDR_A\t\t(DTV_PORTA_CONTROL_REG_BASE + 0x60)\n#define ERR_CNT_ADDR_A\t\t(DTV_PORTA_CONTROL_REG_BASE + 0x64)\n#define BRD_CNT_ADDR_A\t\t(DTV_PORTA_CONTROL_REG_BASE + 0x68)\n\n \n#define DMA_PORTA_CHAN0_ADDR_LOW        (DMA_PORTA_CONTROL_REG_BASE + 0x00)\n#define DMA_PORTA_CHAN0_ADDR_HI         (DMA_PORTA_CONTROL_REG_BASE + 0x04)\n#define DMA_PORTA_CHAN0_TRANS_STATE     (DMA_PORTA_CONTROL_REG_BASE + 0x08)\n#define DMA_PORTA_CHAN0_CONTROL         (DMA_PORTA_CONTROL_REG_BASE + 0x0C)\n#define DMA_PORTA_CHAN1_ADDR_LOW        (DMA_PORTA_CONTROL_REG_BASE + 0x10)\n#define DMA_PORTA_CHAN1_ADDR_HI         (DMA_PORTA_CONTROL_REG_BASE + 0x14)\n#define DMA_PORTA_CHAN1_TRANS_STATE     (DMA_PORTA_CONTROL_REG_BASE + 0x18)\n#define DMA_PORTA_CHAN1_CONTROL         (DMA_PORTA_CONTROL_REG_BASE + 0x1C)\n#define DMA_PORTA_MANAGEMENT            (DMA_PORTA_CONTROL_REG_BASE + 0x20)\n#define VIDEO_CTRL_STATUS_B             (ATV_PORTB_CONTROL_REG_BASE + 0x04)\n\n \n#define MPEG2_CTRL_B\t\t(DTV_PORTB_CONTROL_REG_BASE + 0x00)\n#define SERIAL_IN_ADDR_B\t(DTV_PORTB_CONTROL_REG_BASE + 0x4C)\n#define VLD_CNT_ADDR_B\t\t(DTV_PORTB_CONTROL_REG_BASE + 0x60)\n#define ERR_CNT_ADDR_B\t\t(DTV_PORTB_CONTROL_REG_BASE + 0x64)\n#define BRD_CNT_ADDR_B\t\t(DTV_PORTB_CONTROL_REG_BASE + 0x68)\n\n \n#define AES_CTRL_B\t\t(AES_PORTB_CONTROL_REG_BASE + 0x00)\n#define AES_KEY_BASE_B\t(AES_PORTB_CONTROL_REG_BASE + 0x04)\n\n \n#define DMA_PORTB_CHAN0_ADDR_LOW        (DMA_PORTB_CONTROL_REG_BASE + 0x00)\n#define DMA_PORTB_CHAN0_ADDR_HI         (DMA_PORTB_CONTROL_REG_BASE + 0x04)\n#define DMA_PORTB_CHAN0_TRANS_STATE     (DMA_PORTB_CONTROL_REG_BASE + 0x08)\n#define DMA_PORTB_CHAN0_CONTROL         (DMA_PORTB_CONTROL_REG_BASE + 0x0C)\n#define DMA_PORTB_CHAN1_ADDR_LOW        (DMA_PORTB_CONTROL_REG_BASE + 0x10)\n#define DMA_PORTB_CHAN1_ADDR_HI         (DMA_PORTB_CONTROL_REG_BASE + 0x14)\n#define DMA_PORTB_CHAN1_TRANS_STATE     (DMA_PORTB_CONTROL_REG_BASE + 0x18)\n#define DMA_PORTB_CHAN1_CONTROL         (DMA_PORTB_CONTROL_REG_BASE + 0x1C)\n#define DMA_PORTB_MANAGEMENT            (DMA_PORTB_CONTROL_REG_BASE + 0x20)\n\n#define DMA_TRANS_UNIT_188 (0x00000007)\n\n \n#define DMA_A_CHAN0_DONE_INT   (0x00000001)\n#define DMA_A_CHAN1_DONE_INT   (0x00000002)\n#define DMA_B_CHAN0_DONE_INT   (0x00000004)\n#define DMA_B_CHAN1_DONE_INT   (0x00000008)\n#define DMA_C_CHAN0_DONE_INT   (0x00000010)\n#define DMA_C_CHAN1_DONE_INT   (0x00000020)\n#define DMA_D_CHAN0_DONE_INT   (0x00000040)\n#define DMA_D_CHAN1_DONE_INT   (0x00000080)\n#define DATA_BUF_OVERFLOW_INT  (0x00000100)\n#define UART_0_X_INT           (0x00000200)\n#define UART_1_X_INT           (0x00000400)\n#define IR_X_INT               (0x00000800)\n#define GPIO_0_INT             (0x00001000)\n#define GPIO_1_INT             (0x00002000)\n#define GPIO_2_INT             (0x00004000)\n#define GPIO_3_INT             (0x00008000)\n#define ALL_INT                (0x0000FFFF)\n\n \n#define SW_I2C_MSK_MODE         0x01\n#define SW_I2C_MSK_CLK_OUT      0x02\n#define SW_I2C_MSK_DAT_OUT      0x04\n#define SW_I2C_MSK_CLK_EN       0x08\n#define SW_I2C_MSK_DAT_EN       0x10\n#define SW_I2C_MSK_DAT_IN       0x40\n#define SW_I2C_MSK_CLK_IN       0x80\n\n#define SMI_VID\t\t0x1ADE\n#define SMI_PID\t\t0x3038\n#define SMI_TS_DMA_BUF_SIZE\t(1024 * 188)\n\nstruct smi_cfg_info {\n#define SMI_DVBSKY_S952         0\n#define SMI_DVBSKY_S950         1\n#define SMI_DVBSKY_T9580        2\n#define SMI_DVBSKY_T982         3\n#define SMI_TECHNOTREND_S2_4200 4\n\tint type;\n\tchar *name;\n#define SMI_TS_NULL             0\n#define SMI_TS_DMA_SINGLE       1\n#define SMI_TS_DMA_BOTH         3\n \n\tint ts_0;\n\tint ts_1;\n#define DVBSKY_FE_NULL          0\n#define DVBSKY_FE_M88RS6000     1\n#define DVBSKY_FE_M88DS3103     2\n#define DVBSKY_FE_SIT2          3\n\tint fe_0;\n\tint fe_1;\n\tchar *rc_map;\n};\n\nstruct smi_rc {\n\tstruct smi_dev *dev;\n\tstruct rc_dev *rc_dev;\n\tchar input_phys[64];\n\tchar device_name[64];\n\tu8 irData[256];\n\n\tint users;\n};\n\nstruct smi_port {\n\tstruct smi_dev *dev;\n\tint idx;\n\tint enable;\n\tint fe_type;\n\t \n\tu32 DMA_CHAN0_ADDR_LOW;\n\tu32 DMA_CHAN0_ADDR_HI;\n\tu32 DMA_CHAN0_TRANS_STATE;\n\tu32 DMA_CHAN0_CONTROL;\n\tu32 DMA_CHAN1_ADDR_LOW;\n\tu32 DMA_CHAN1_ADDR_HI;\n\tu32 DMA_CHAN1_TRANS_STATE;\n\tu32 DMA_CHAN1_CONTROL;\n\tu32 DMA_MANAGEMENT;\n\t \n\tdma_addr_t dma_addr[2];\n\tu8 *cpu_addr[2];\n\tu32 _dmaInterruptCH0;\n\tu32 _dmaInterruptCH1;\n\tu32 _int_status;\n\tstruct tasklet_struct tasklet;\n\t \n\tstruct dmx_frontend hw_frontend;\n\tstruct dmx_frontend mem_frontend;\n\tstruct dmxdev dmxdev;\n\tstruct dvb_adapter dvb_adapter;\n\tstruct dvb_demux demux;\n\tstruct dvb_net dvbnet;\n\tint users;\n\tstruct dvb_frontend *fe;\n\t \n\tstruct i2c_client *i2c_client_demod;\n\tstruct i2c_client *i2c_client_tuner;\n};\n\nstruct smi_dev {\n\tint nr;\n\tstruct smi_cfg_info *info;\n\n\t \n\tstruct pci_dev *pci_dev;\n\tu32 __iomem *lmmio;\n\n\t \n\tstruct smi_port ts_port[2];\n\n\t \n\tstruct i2c_adapter i2c_bus[2];\n\tstruct i2c_algo_bit_data i2c_bit[2];\n\n\t \n\tstruct smi_rc ir;\n};\n\n#define smi_read(reg)             readl(dev->lmmio + ((reg)>>2))\n#define smi_write(reg, value)     writel((value), dev->lmmio + ((reg)>>2))\n\n#define smi_andor(reg, mask, value) \\\n\twritel((readl(dev->lmmio+((reg)>>2)) & ~(mask)) |\\\n\t((value) & (mask)), dev->lmmio+((reg)>>2))\n\n#define smi_set(reg, bit)          smi_andor((reg), (bit), (bit))\n#define smi_clear(reg, bit)        smi_andor((reg), (bit), 0)\n\nint smi_ir_irq(struct smi_rc *ir, u32 int_status);\nvoid smi_ir_start(struct smi_rc *ir);\nvoid smi_ir_exit(struct smi_dev *dev);\nint smi_ir_init(struct smi_dev *dev);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}