{
  "module_name": "cx23885-ioctl.c",
  "hash_id": "1aa03e34d08e35209ec80c6d3d3cfe18241daf13794c756a4cac6e756ce41571",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/cx23885/cx23885-ioctl.c",
  "human_readable_source": "\n \n\n#include \"cx23885.h\"\n#include \"cx23885-ioctl.h\"\n\n#ifdef CONFIG_VIDEO_ADV_DEBUG\nint cx23885_g_chip_info(struct file *file, void *fh,\n\t\t\t struct v4l2_dbg_chip_info *chip)\n{\n\tstruct cx23885_dev *dev = video_drvdata(file);\n\n\tif (chip->match.addr > 1)\n\t\treturn -EINVAL;\n\tif (chip->match.addr == 1) {\n\t\tif (dev->v4l_device == NULL)\n\t\t\treturn -EINVAL;\n\t\tstrscpy(chip->name, \"cx23417\", sizeof(chip->name));\n\t} else {\n\t\tstrscpy(chip->name, dev->v4l2_dev.name, sizeof(chip->name));\n\t}\n\treturn 0;\n}\n\nstatic int cx23417_g_register(struct cx23885_dev *dev,\n\t\t\t      struct v4l2_dbg_register *reg)\n{\n\tu32 value;\n\n\tif (dev->v4l_device == NULL)\n\t\treturn -EINVAL;\n\n\tif ((reg->reg & 0x3) != 0 || reg->reg >= 0x10000)\n\t\treturn -EINVAL;\n\n\tif (mc417_register_read(dev, (u16) reg->reg, &value))\n\t\treturn -EINVAL;  \n\n\treg->size = 4;\n\treg->val = value;\n\treturn 0;\n}\n\nint cx23885_g_register(struct file *file, void *fh,\n\t\t       struct v4l2_dbg_register *reg)\n{\n\tstruct cx23885_dev *dev = video_drvdata(file);\n\n\tif (reg->match.addr > 1)\n\t\treturn -EINVAL;\n\tif (reg->match.addr)\n\t\treturn cx23417_g_register(dev, reg);\n\n\tif ((reg->reg & 0x3) != 0 || reg->reg >= pci_resource_len(dev->pci, 0))\n\t\treturn -EINVAL;\n\n\treg->size = 4;\n\treg->val = cx_read(reg->reg);\n\treturn 0;\n}\n\nstatic int cx23417_s_register(struct cx23885_dev *dev,\n\t\t\t      const struct v4l2_dbg_register *reg)\n{\n\tif (dev->v4l_device == NULL)\n\t\treturn -EINVAL;\n\n\tif ((reg->reg & 0x3) != 0 || reg->reg >= 0x10000)\n\t\treturn -EINVAL;\n\n\tif (mc417_register_write(dev, (u16) reg->reg, (u32) reg->val))\n\t\treturn -EINVAL;  \n\treturn 0;\n}\n\nint cx23885_s_register(struct file *file, void *fh,\n\t\t       const struct v4l2_dbg_register *reg)\n{\n\tstruct cx23885_dev *dev = video_drvdata(file);\n\n\tif (reg->match.addr > 1)\n\t\treturn -EINVAL;\n\tif (reg->match.addr)\n\t\treturn cx23417_s_register(dev, reg);\n\n\tif ((reg->reg & 0x3) != 0 || reg->reg >= pci_resource_len(dev->pci, 0))\n\t\treturn -EINVAL;\n\n\tcx_write(reg->reg, reg->val);\n\treturn 0;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}