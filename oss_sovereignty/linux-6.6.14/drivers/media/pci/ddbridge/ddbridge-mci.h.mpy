{
  "module_name": "ddbridge-mci.h",
  "hash_id": "90f811d30f6cc7bd483b1cd85e71e4306c5c1f896e7fecfd378f78e0aee482e7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/ddbridge/ddbridge-mci.h",
  "human_readable_source": " \n \n\n#ifndef _DDBRIDGE_MCI_H_\n#define _DDBRIDGE_MCI_H_\n\n#define MCI_DEMOD_MAX                       8\n#define MCI_TUNER_MAX                       4\n#define DEMOD_UNUSED                        (0xFF)\n\n#define MCI_CONTROL                         (0x500)\n#define MCI_COMMAND                         (0x600)\n#define MCI_RESULT                          (0x680)\n\n#define MCI_COMMAND_SIZE                    (0x80)\n#define MCI_RESULT_SIZE                     (0x80)\n\n#define MCI_CONTROL_START_COMMAND           (0x00000001)\n#define MCI_CONTROL_ENABLE_DONE_INTERRUPT   (0x00000002)\n#define MCI_CONTROL_RESET                   (0x00008000)\n#define MCI_CONTROL_READY                   (0x00010000)\n\n#define SX8_TSCONFIG                        (0x280)\n\n#define SX8_TSCONFIG_MODE_MASK              (0x00000003)\n#define SX8_TSCONFIG_MODE_OFF               (0x00000000)\n#define SX8_TSCONFIG_MODE_NORMAL            (0x00000001)\n#define SX8_TSCONFIG_MODE_IQ                (0x00000003)\n\n \n\n#define SX8_TSCONFIG_TSHEADER               (0x00000004)\n#define SX8_TSCONFIG_BURST                  (0x00000008)\n\n#define SX8_TSCONFIG_BURSTSIZE_MASK         (0x00000030)\n#define SX8_TSCONFIG_BURSTSIZE_2K           (0x00000000)\n#define SX8_TSCONFIG_BURSTSIZE_4K           (0x00000010)\n#define SX8_TSCONFIG_BURSTSIZE_8K           (0x00000020)\n#define SX8_TSCONFIG_BURSTSIZE_16K          (0x00000030)\n\n#define SX8_DEMOD_STOPPED        (0)\n#define SX8_DEMOD_IQ_MODE        (1)\n#define SX8_DEMOD_WAIT_SIGNAL    (2)\n#define SX8_DEMOD_WAIT_MATYPE    (3)\n#define SX8_DEMOD_TIMEOUT        (14)\n#define SX8_DEMOD_LOCKED         (15)\n\n#define MCI_CMD_STOP             (0x01)\n#define MCI_CMD_GETSTATUS        (0x02)\n#define MCI_CMD_GETSIGNALINFO    (0x03)\n#define MCI_CMD_RFPOWER          (0x04)\n\n#define MCI_CMD_SEARCH_DVBS      (0x10)\n\n#define MCI_CMD_GET_IQSYMBOL     (0x30)\n\n#define SX8_CMD_INPUT_ENABLE     (0x40)\n#define SX8_CMD_INPUT_DISABLE    (0x41)\n#define SX8_CMD_START_IQ         (0x42)\n#define SX8_CMD_STOP_IQ          (0x43)\n#define SX8_CMD_ENABLE_IQOUTPUT  (0x44)\n#define SX8_CMD_DISABLE_IQOUTPUT (0x45)\n\n#define MCI_STATUS_OK            (0x00)\n#define MCI_STATUS_UNSUPPORTED   (0x80)\n#define MCI_STATUS_RETRY         (0xFD)\n#define MCI_STATUS_NOT_READY     (0xFE)\n#define MCI_STATUS_ERROR         (0xFF)\n\n#define MCI_SUCCESS(status)      ((status & MCI_STATUS_UNSUPPORTED) == 0)\n\nstruct mci_command {\n\tunion {\n\t\tu32 command_word;\n\t\tstruct {\n\t\t\tu8  command;\n\t\t\tu8  tuner;\n\t\t\tu8  demod;\n\t\t\tu8  output;\n\t\t};\n\t};\n\tunion {\n\t\tu32 params[31];\n\t\tstruct {\n\t\t\t \n\t\t\tu8  flags;\n\t\t\t \n\t\t\tu8  s2_modulation_mask;\n\t\t\tu8  rsvd1;\n\t\t\tu8  retry;\n\t\t\tu32 frequency;\n\t\t\tu32 symbol_rate;\n\t\t\tu8  input_stream_id;\n\t\t\tu8  rsvd2[3];\n\t\t\tu32 scrambling_sequence_index;\n\t\t\tu32 frequency_range;\n\t\t} dvbs2_search;\n\n\t\tstruct {\n\t\t\tu8  tap;\n\t\t\tu8  rsvd;\n\t\t\tu16 point;\n\t\t} get_iq_symbol;\n\n\t\tstruct {\n\t\t\t \n\t\t\tu8  flags;\n\t\t\tu8  roll_off;\n\t\t\tu8  rsvd1;\n\t\t\tu8  rsvd2;\n\t\t\tu32 frequency;\n\t\t\tu32 symbol_rate;  \n\t\t\tu16 gain;\n\t\t} sx8_start_iq;\n\n\t\tstruct {\n\t\t\t \n\t\t\tu8  flags;\n\t\t} sx8_input_enable;\n\t};\n};\n\nstruct mci_result {\n\tunion {\n\t\tu32 status_word;\n\t\tstruct {\n\t\t\tu8  status;\n\t\t\tu8  mode;\n\t\t\tu16 time;\n\t\t};\n\t};\n\tunion {\n\t\tu32 result[27];\n\t\tstruct {\n\t\t\t \n\t\t\tu8  standard;\n\t\t\t \n\t\t\tu8  pls_code;\n\t\t\t \n\t\t\tu8  roll_off;\n\t\t\tu8  rsvd;\n\t\t\t \n\t\t\tu32 frequency;\n\t\t\t \n\t\t\tu32 symbol_rate;\n\t\t\t \n\t\t\ts16 channel_power;\n\t\t\t \n\t\t\ts16 band_power;\n\t\t\t \n\t\t\ts16 signal_to_noise;\n\t\t\ts16 rsvd2;\n\t\t\t \n\t\t\tu32 packet_errors;\n\t\t\t \n\t\t\tu32 ber_numerator;\n\t\t\tu32 ber_denominator;\n\t\t} dvbs2_signal_info;\n\n\t\tstruct {\n\t\t\ts16 i;\n\t\t\ts16 q;\n\t\t} iq_symbol;\n\t};\n\tu32 version[4];\n};\n\nstruct mci_base {\n\tstruct list_head     mci_list;\n\tvoid                *key;\n\tstruct ddb_link     *link;\n\tstruct completion    completion;\n\tstruct device       *dev;\n\tstruct mutex         tuner_lock;  \n\tstruct mutex         mci_lock;  \n\tint                  count;\n\tint                  type;\n};\n\nstruct mci {\n\tstruct mci_base     *base;\n\tstruct dvb_frontend  fe;\n\tint                  nr;\n\tint                  demod;\n\tint                  tuner;\n};\n\nstruct mci_cfg {\n\tint                  type;\n\tstruct dvb_frontend_ops *fe_ops;\n\tu32                  base_size;\n\tu32                  state_size;\n\tint (*init)(struct mci *mci);\n\tint (*base_init)(struct mci_base *mci_base);\n\tint (*set_input)(struct dvb_frontend *fe, int input);\n};\n\n \nextern const struct mci_cfg ddb_max_sx8_cfg;\n\nint ddb_mci_cmd(struct mci *state, struct mci_command *command,\n\t\tstruct mci_result *result);\nint ddb_mci_config(struct mci *state, u32 config);\n\nstruct dvb_frontend\n*ddb_mci_attach(struct ddb_input *input, struct mci_cfg *cfg, int nr,\n\t\tint (**fn_set_input)(struct dvb_frontend *fe, int input));\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}