{
  "module_name": "mantis_input.c",
  "hash_id": "83f1b932551842ab6912c8a1e3eb07f0d5a5d8ee3c84370a3eed10b2e1404619",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/mantis/mantis_input.c",
  "human_readable_source": "\n \n\n#include <media/rc-core.h>\n#include <linux/pci.h>\n\n#include <media/dmxdev.h>\n#include <media/dvbdev.h>\n#include <media/dvb_demux.h>\n#include <media/dvb_frontend.h>\n#include <media/dvb_net.h>\n\n#include \"mantis_common.h\"\n#include \"mantis_input.h\"\n\n#define MODULE_NAME \"mantis_core\"\n\nvoid mantis_input_process(struct mantis_pci *mantis, int scancode)\n{\n\tif (mantis->rc)\n\t\trc_keydown(mantis->rc, RC_PROTO_UNKNOWN, scancode, 0);\n}\n\nint mantis_input_init(struct mantis_pci *mantis)\n{\n\tstruct rc_dev *dev;\n\tint err;\n\n\tdev = rc_allocate_device(RC_DRIVER_SCANCODE);\n\tif (!dev) {\n\t\tdprintk(MANTIS_ERROR, 1, \"Remote device allocation failed\");\n\t\terr = -ENOMEM;\n\t\tgoto out;\n\t}\n\n\tsnprintf(mantis->device_name, sizeof(mantis->device_name),\n\t\t \"Mantis %s IR receiver\", mantis->hwconfig->model_name);\n\tsnprintf(mantis->input_phys, sizeof(mantis->input_phys),\n\t\t \"pci-%s/ir0\", pci_name(mantis->pdev));\n\n\tdev->device_name        = mantis->device_name;\n\tdev->input_phys         = mantis->input_phys;\n\tdev->input_id.bustype   = BUS_PCI;\n\tdev->input_id.vendor    = mantis->vendor_id;\n\tdev->input_id.product   = mantis->device_id;\n\tdev->input_id.version   = 1;\n\tdev->driver_name        = MODULE_NAME;\n\tdev->map_name           = mantis->rc_map_name ? : RC_MAP_EMPTY;\n\tdev->dev.parent         = &mantis->pdev->dev;\n\n\terr = rc_register_device(dev);\n\tif (err) {\n\t\tdprintk(MANTIS_ERROR, 1, \"IR device registration failed, ret = %d\", err);\n\t\tgoto out_dev;\n\t}\n\n\tmantis->rc = dev;\n\treturn 0;\n\nout_dev:\n\trc_free_device(dev);\nout:\n\treturn err;\n}\nEXPORT_SYMBOL_GPL(mantis_input_init);\n\nvoid mantis_input_exit(struct mantis_pci *mantis)\n{\n\trc_unregister_device(mantis->rc);\n}\nEXPORT_SYMBOL_GPL(mantis_input_exit);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}