{
  "module_name": "hopper_vp3028.c",
  "hash_id": "7418c1286648855f79b45bd7951a804cf59c12534131a8435d96d9972d5ab340",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/mantis/hopper_vp3028.c",
  "human_readable_source": "\n \n\n#include <linux/signal.h>\n#include <linux/sched.h>\n#include <linux/interrupt.h>\n\n#include <media/dmxdev.h>\n#include <media/dvbdev.h>\n#include <media/dvb_demux.h>\n#include <media/dvb_frontend.h>\n#include <media/dvb_net.h>\n\n#include \"zl10353.h\"\n#include \"mantis_common.h\"\n#include \"mantis_ioc.h\"\n#include \"mantis_dvb.h\"\n#include \"hopper_vp3028.h\"\n\nstatic struct zl10353_config hopper_vp3028_config = {\n\t.demod_address\t= 0x0f,\n};\n\n#define MANTIS_MODEL_NAME\t\"VP-3028\"\n#define MANTIS_DEV_TYPE\t\t\"DVB-T\"\n\nstatic int vp3028_frontend_init(struct mantis_pci *mantis, struct dvb_frontend *fe)\n{\n\tstruct i2c_adapter *adapter\t= &mantis->adapter;\n\tstruct mantis_hwconfig *config\t= mantis->hwconfig;\n\tint err;\n\n\tmantis_gpio_set_bits(mantis, config->reset, 0);\n\tmsleep(100);\n\terr = mantis_frontend_power(mantis, POWER_ON);\n\tmsleep(100);\n\tmantis_gpio_set_bits(mantis, config->reset, 1);\n\n\terr = mantis_frontend_power(mantis, POWER_ON);\n\tif (err == 0) {\n\t\tmsleep(250);\n\t\tdprintk(MANTIS_ERROR, 1, \"Probing for 10353 (DVB-T)\");\n\t\tfe = dvb_attach(zl10353_attach, &hopper_vp3028_config, adapter);\n\n\t\tif (!fe)\n\t\t\treturn -1;\n\t} else {\n\t\tdprintk(MANTIS_ERROR, 1, \"Frontend on <%s> POWER ON failed! <%d>\",\n\t\t\tadapter->name,\n\t\t\terr);\n\n\t\treturn -EIO;\n\t}\n\tdprintk(MANTIS_ERROR, 1, \"Done!\");\n\n\treturn 0;\n}\n\nstruct mantis_hwconfig vp3028_config = {\n\t.model_name\t= MANTIS_MODEL_NAME,\n\t.dev_type\t= MANTIS_DEV_TYPE,\n\t.ts_size\t= MANTIS_TS_188,\n\n\t.baud_rate\t= MANTIS_BAUD_9600,\n\t.parity\t\t= MANTIS_PARITY_NONE,\n\t.bytes\t\t= 0,\n\n\t.frontend_init\t= vp3028_frontend_init,\n\t.power\t\t= GPIF_A00,\n\t.reset\t\t= GPIF_A03,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}