{
  "module_name": "mantis_vp3030.c",
  "hash_id": "90e9ac42cdf453ea314cb0bb258f88f16d208b327f946f47088997c1d162912d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/mantis/mantis_vp3030.c",
  "human_readable_source": "\n \n\n#include <linux/signal.h>\n#include <linux/sched.h>\n#include <linux/interrupt.h>\n\n#include <media/dmxdev.h>\n#include <media/dvbdev.h>\n#include <media/dvb_demux.h>\n#include <media/dvb_frontend.h>\n#include <media/dvb_net.h>\n\n#include \"zl10353.h\"\n#include \"tda665x.h\"\n#include \"mantis_common.h\"\n#include \"mantis_ioc.h\"\n#include \"mantis_dvb.h\"\n#include \"mantis_vp3030.h\"\n\nstatic struct zl10353_config mantis_vp3030_config = {\n\t.demod_address\t\t= 0x0f,\n};\n\nstatic struct tda665x_config env57h12d5_config = {\n\t.name\t\t\t= \"ENV57H12D5 (ET-50DT)\",\n\t.addr\t\t\t= 0x60,\n\t.frequency_min\t\t=  47 * MHz,\n\t.frequency_max\t\t= 862 * MHz,\n\t.frequency_offst\t=   3616667,\n\t.ref_multiplier\t\t= 6,  \n\t.ref_divider\t\t= 100000,  \n};\n\n#define MANTIS_MODEL_NAME\t\"VP-3030\"\n#define MANTIS_DEV_TYPE\t\t\"DVB-T\"\n\n\nstatic int vp3030_frontend_init(struct mantis_pci *mantis, struct dvb_frontend *fe)\n{\n\tstruct i2c_adapter *adapter\t= &mantis->adapter;\n\tstruct mantis_hwconfig *config\t= mantis->hwconfig;\n\tint err = 0;\n\n\tmantis_gpio_set_bits(mantis, config->reset, 0);\n\tmsleep(100);\n\terr = mantis_frontend_power(mantis, POWER_ON);\n\tmsleep(100);\n\tmantis_gpio_set_bits(mantis, config->reset, 1);\n\n\tif (err == 0) {\n\t\tmsleep(250);\n\t\tdprintk(MANTIS_ERROR, 1, \"Probing for 10353 (DVB-T)\");\n\t\tfe = dvb_attach(zl10353_attach, &mantis_vp3030_config, adapter);\n\n\t\tif (!fe)\n\t\t\treturn -1;\n\n\t\tdvb_attach(tda665x_attach, fe, &env57h12d5_config, adapter);\n\t} else {\n\t\tdprintk(MANTIS_ERROR, 1, \"Frontend on <%s> POWER ON failed! <%d>\",\n\t\t\tadapter->name,\n\t\t\terr);\n\n\t\treturn -EIO;\n\n\t}\n\tmantis->fe = fe;\n\tdprintk(MANTIS_ERROR, 1, \"Done!\");\n\n\treturn 0;\n}\n\nstruct mantis_hwconfig vp3030_config = {\n\t.model_name\t= MANTIS_MODEL_NAME,\n\t.dev_type\t= MANTIS_DEV_TYPE,\n\t.ts_size\t= MANTIS_TS_188,\n\n\t.baud_rate\t= MANTIS_BAUD_9600,\n\t.parity\t\t= MANTIS_PARITY_NONE,\n\t.bytes\t\t= 0,\n\n\t.frontend_init\t= vp3030_frontend_init,\n\t.power\t\t= GPIF_A12,\n\t.reset\t\t= GPIF_A13,\n\n\t.i2c_mode\t= MANTIS_BYTE_MODE\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}