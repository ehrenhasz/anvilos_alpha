{
  "module_name": "cx18-io.c",
  "hash_id": "6b668363980aaf49623e84eb1f15533eaa9ce9066bd09c18888d7c76b68dce1f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/cx18/cx18-io.c",
  "human_readable_source": "\n \n\n#include \"cx18-driver.h\"\n#include \"cx18-io.h\"\n#include \"cx18-irq.h\"\n\nvoid cx18_memset_io(struct cx18 *cx, void __iomem *addr, int val, size_t count)\n{\n\tu8 __iomem *dst = addr;\n\tu16 val2 = val | (val << 8);\n\tu32 val4 = val2 | (val2 << 16);\n\n\t \n\tif ((count > 0) && ((unsigned long)dst & 1)) {\n\t\tcx18_writeb(cx, (u8) val, dst);\n\t\tcount--;\n\t\tdst++;\n\t}\n\tif ((count > 1) && ((unsigned long)dst & 2)) {\n\t\tcx18_writew(cx, val2, dst);\n\t\tcount -= 2;\n\t\tdst += 2;\n\t}\n\twhile (count > 3) {\n\t\tcx18_writel(cx, val4, dst);\n\t\tcount -= 4;\n\t\tdst += 4;\n\t}\n\tif (count > 1) {\n\t\tcx18_writew(cx, val2, dst);\n\t\tcount -= 2;\n\t\tdst += 2;\n\t}\n\tif (count > 0)\n\t\tcx18_writeb(cx, (u8) val, dst);\n}\n\nvoid cx18_sw1_irq_enable(struct cx18 *cx, u32 val)\n{\n\tcx18_write_reg_expect(cx, val, SW1_INT_STATUS, ~val, val);\n\tcx->sw1_irq_mask = cx18_read_reg(cx, SW1_INT_ENABLE_PCI) | val;\n\tcx18_write_reg(cx, cx->sw1_irq_mask, SW1_INT_ENABLE_PCI);\n}\n\nvoid cx18_sw1_irq_disable(struct cx18 *cx, u32 val)\n{\n\tcx->sw1_irq_mask = cx18_read_reg(cx, SW1_INT_ENABLE_PCI) & ~val;\n\tcx18_write_reg(cx, cx->sw1_irq_mask, SW1_INT_ENABLE_PCI);\n}\n\nvoid cx18_sw2_irq_enable(struct cx18 *cx, u32 val)\n{\n\tcx18_write_reg_expect(cx, val, SW2_INT_STATUS, ~val, val);\n\tcx->sw2_irq_mask = cx18_read_reg(cx, SW2_INT_ENABLE_PCI) | val;\n\tcx18_write_reg(cx, cx->sw2_irq_mask, SW2_INT_ENABLE_PCI);\n}\n\nvoid cx18_sw2_irq_disable(struct cx18 *cx, u32 val)\n{\n\tcx->sw2_irq_mask = cx18_read_reg(cx, SW2_INT_ENABLE_PCI) & ~val;\n\tcx18_write_reg(cx, cx->sw2_irq_mask, SW2_INT_ENABLE_PCI);\n}\n\nvoid cx18_sw2_irq_disable_cpu(struct cx18 *cx, u32 val)\n{\n\tu32 r;\n\tr = cx18_read_reg(cx, SW2_INT_ENABLE_CPU);\n\tcx18_write_reg(cx, r & ~val, SW2_INT_ENABLE_CPU);\n}\n\nvoid cx18_setup_page(struct cx18 *cx, u32 addr)\n{\n\tu32 val;\n\tval = cx18_read_reg(cx, 0xD000F8);\n\tval = (val & ~0x1f00) | ((addr >> 17) & 0x1f00);\n\tcx18_write_reg(cx, val, 0xD000F8);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}