{
  "module_name": "tw68.h",
  "hash_id": "46a9aee7a9b901109572fb42e29594e81b2cc90c1c745b06d0e19604d76f2fee",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/tw68/tw68.h",
  "human_readable_source": " \n \n\n#include <linux/pci.h>\n#include <linux/videodev2.h>\n#include <linux/notifier.h>\n#include <linux/delay.h>\n#include <linux/mutex.h>\n#include <linux/io.h>\n\n#include <media/v4l2-common.h>\n#include <media/v4l2-ioctl.h>\n#include <media/v4l2-ctrls.h>\n#include <media/v4l2-device.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/videobuf2-dma-sg.h>\n\n#include \"tw68-reg.h\"\n\n#define\tUNSET\t(-1U)\n\n#define TW68_NORMS ( \\\n\tV4L2_STD_NTSC    | V4L2_STD_PAL       | V4L2_STD_SECAM    | \\\n\tV4L2_STD_PAL_M   | V4L2_STD_PAL_Nc    | V4L2_STD_PAL_60)\n\n#define\tTW68_VID_INTS\t(TW68_FFERR | TW68_PABORT | TW68_DMAPERR | \\\n\t\t\t TW68_FFOF   | TW68_DMAPI)\n \n#define\tTW68_VID_INTSX\t(TW68_FDMIS | TW68_HLOCK | TW68_VLOCK)\n\n#define\tTW68_I2C_INTS\t(TW68_SBERR | TW68_SBDONE | TW68_SBERR2  | \\\n\t\t\t TW68_SBDONE2)\n\nenum tw68_decoder_type {\n\tTW6800,\n\tTW6801,\n\tTW6804,\n\tTWXXXX,\n};\n\n \n \n\nstruct tw68_tvnorm {\n\tchar\t\t*name;\n\tv4l2_std_id\tid;\n\n\t \n\tu32\tsync_control;\n\tu32\tluma_control;\n\tu32\tchroma_ctrl1;\n\tu32\tchroma_gain;\n\tu32\tchroma_ctrl2;\n\tu32\tvgate_misc;\n\n\t \n\tu32\th_delay;\n\tu32\th_delay0;\t \n\tu32\th_start;\n\tu32\th_stop;\n\tu32\tv_delay;\n\tu32\tvideo_v_start;\n\tu32\tvideo_v_stop;\n\tu32\tvbi_v_start_0;\n\tu32\tvbi_v_stop_0;\n\tu32\tvbi_v_start_1;\n\n\t \n\tu32\tformat;\n};\n\nstruct tw68_format {\n\tu32\tfourcc;\n\tu32\tdepth;\n\tu32\ttwformat;\n};\n\n \n \n\n#define TW68_BOARD_NOAUTO\t\tUNSET\n#define TW68_BOARD_UNKNOWN\t\t0\n#define\tTW68_BOARD_GENERIC_6802\t\t1\n\n#define\tTW68_MAXBOARDS\t\t\t16\n#define\tTW68_INPUT_MAX\t\t\t4\n\n \n \n\n#define\tBUFFER_TIMEOUT\tmsecs_to_jiffies(500)\t \n\nstruct tw68_dev;\t \n\n \nstruct tw68_buf {\n\tstruct vb2_v4l2_buffer vb;\n\tstruct list_head list;\n\n\tunsigned int   size;\n\t__le32         *cpu;\n\t__le32         *jmp;\n\tdma_addr_t     dma;\n};\n\nstruct tw68_fmt {\n\tchar\t\t\t*name;\n\tu32\t\t\tfourcc;\t \n\tint\t\t\tdepth;\n\tint\t\t\tflags;\n\tu32\t\t\ttwformat;\n};\n\n \nstruct tw68_dev {\n\tstruct mutex\t\tlock;\n\tspinlock_t\t\tslock;\n\tu16\t\t\tinstance;\n\tstruct v4l2_device\tv4l2_dev;\n\n\t \n\tenum tw68_decoder_type\tvdecoder;\n\tstruct video_device\tvdev;\n\tstruct v4l2_ctrl_handler hdl;\n\n\t \n\tchar\t\t\t*name;\n\tstruct pci_dev\t\t*pci;\n\tunsigned char\t\tpci_rev, pci_lat;\n\tu32\t\t\t__iomem *lmmio;\n\tu8\t\t\t__iomem *bmmio;\n\tu32\t\t\tpci_irqmask;\n\t \n\tu32\t\t\tboard_virqmask;\n\n\t \n\tconst struct tw68_format *fmt;\n\tunsigned\t\twidth, height;\n\tunsigned\t\tseqnr;\n\tunsigned\t\tfield;\n\tstruct vb2_queue\tvidq;\n\tstruct list_head\tactive;\n\n\t \n\tconst struct tw68_tvnorm *tvnorm;\t \n\n\tint\t\t\tinput;\n};\n\n \n\n#define tw_readl(reg)\t\treadl(dev->lmmio + ((reg) >> 2))\n#define\ttw_readb(reg)\t\treadb(dev->bmmio + (reg))\n#define tw_writel(reg, value)\twritel((value), dev->lmmio + ((reg) >> 2))\n#define\ttw_writeb(reg, value)\twriteb((value), dev->bmmio + (reg))\n\n#define tw_andorl(reg, mask, value) \\\n\t\twritel((readl(dev->lmmio+((reg)>>2)) & ~(mask)) |\\\n\t\t((value) & (mask)), dev->lmmio+((reg)>>2))\n#define\ttw_andorb(reg, mask, value) \\\n\t\twriteb((readb(dev->bmmio + (reg)) & ~(mask)) |\\\n\t\t((value) & (mask)), dev->bmmio+(reg))\n#define tw_setl(reg, bit)\ttw_andorl((reg), (bit), (bit))\n#define\ttw_setb(reg, bit)\ttw_andorb((reg), (bit), (bit))\n#define\ttw_clearl(reg, bit)\t\\\n\t\twritel((readl(dev->lmmio + ((reg) >> 2)) & ~(bit)), \\\n\t\tdev->lmmio + ((reg) >> 2))\n#define\ttw_clearb(reg, bit)\t\\\n\t\twriteb((readb(dev->bmmio+(reg)) & ~(bit)), \\\n\t\tdev->bmmio + (reg))\n\n#define tw_wait(us) { udelay(us); }\n\n \n \n\nvoid tw68_set_tvnorm_hw(struct tw68_dev *dev);\n\nint tw68_video_init1(struct tw68_dev *dev);\nint tw68_video_init2(struct tw68_dev *dev, int video_nr);\nvoid tw68_irq_video_done(struct tw68_dev *dev, unsigned long status);\nint tw68_video_start_dma(struct tw68_dev *dev, struct tw68_buf *buf);\n\n \n \n\nint tw68_risc_buffer(struct pci_dev *pci, struct tw68_buf *buf,\n\tstruct scatterlist *sglist, unsigned int top_offset,\n\tunsigned int bottom_offset, unsigned int bpl,\n\tunsigned int padding, unsigned int lines);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}