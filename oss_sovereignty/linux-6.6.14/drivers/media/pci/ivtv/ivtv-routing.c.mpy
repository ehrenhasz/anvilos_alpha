{
  "module_name": "ivtv-routing.c",
  "hash_id": "a09fda0dc388113b5f4026133226283e2e1cf3ce3a26b7c0d487b70b1418cda9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/ivtv/ivtv-routing.c",
  "human_readable_source": "\n \n\n#include \"ivtv-driver.h\"\n#include \"ivtv-i2c.h\"\n#include \"ivtv-cards.h\"\n#include \"ivtv-gpio.h\"\n#include \"ivtv-routing.h\"\n\n#include <media/drv-intf/msp3400.h>\n#include <media/i2c/m52790.h>\n#include <media/i2c/upd64031a.h>\n#include <media/i2c/upd64083.h>\n\n \nvoid ivtv_audio_set_io(struct ivtv *itv)\n{\n\tconst struct ivtv_card_audio_input *in;\n\tu32 input, output = 0;\n\n\t \n\tif (test_bit(IVTV_F_I_RADIO_USER, &itv->i_flags))\n\t\tin = &itv->card->radio_input;\n\telse\n\t\tin = &itv->card->audio_inputs[itv->audio_input];\n\n\t \n\tinput = in->muxer_input;\n\tif (itv->card->hw_muxer & IVTV_HW_M52790)\n\t\toutput = M52790_OUT_STEREO;\n\tv4l2_subdev_call(itv->sd_muxer, audio, s_routing,\n\t\t\tinput, output, 0);\n\n\tinput = in->audio_input;\n\toutput = 0;\n\tif (itv->card->hw_audio & IVTV_HW_MSP34XX)\n\t\toutput = MSP_OUTPUT(MSP_SC_IN_DSP_SCART1);\n\tivtv_call_hw(itv, itv->card->hw_audio, audio, s_routing,\n\t\t\tinput, output, 0);\n}\n\n \nvoid ivtv_video_set_io(struct ivtv *itv)\n{\n\tint inp = itv->active_input;\n\tu32 input;\n\tu32 type;\n\n\tv4l2_subdev_call(itv->sd_video, video, s_routing,\n\t\titv->card->video_inputs[inp].video_input, 0, 0);\n\n\ttype = itv->card->video_inputs[inp].video_type;\n\n\tif (type == IVTV_CARD_INPUT_VID_TUNER) {\n\t\tinput = 0;   \n\t} else if (type < IVTV_CARD_INPUT_COMPOSITE1) {\n\t\tinput = 2;   \n\t} else {\n\t\tinput = 1;   \n\t}\n\n\tif (itv->card->hw_video & IVTV_HW_GPIO)\n\t\tivtv_call_hw(itv, IVTV_HW_GPIO, video, s_routing,\n\t\t\t\tinput, 0, 0);\n\n\tif (itv->card->hw_video & IVTV_HW_UPD64031A) {\n\t\tif (type == IVTV_CARD_INPUT_VID_TUNER ||\n\t\t    type >= IVTV_CARD_INPUT_COMPOSITE1) {\n\t\t\t \n\t\t\tinput = UPD64031A_GR_ON | UPD64031A_3DYCS_COMPOSITE;\n\t\t} else {\n\t\t\t \n\t\t\tinput = UPD64031A_GR_OFF | UPD64031A_3DYCS_DISABLE;\n\t\t}\n\t\tinput |= itv->card->gr_config;\n\n\t\tivtv_call_hw(itv, IVTV_HW_UPD64031A, video, s_routing,\n\t\t\t\tinput, 0, 0);\n\t}\n\n\tif (itv->card->hw_video & IVTV_HW_UPD6408X) {\n\t\tinput = UPD64083_YCS_MODE;\n\t\tif (type > IVTV_CARD_INPUT_VID_TUNER &&\n\t\t    type < IVTV_CARD_INPUT_COMPOSITE1) {\n\t\t\t \n\t\t\tinput |= UPD64083_YCNR_MODE;\n\t\t}\n\t\telse if (itv->card->hw_video & IVTV_HW_UPD64031A) {\n\t\t\t \n\t\t\tif (type == IVTV_CARD_INPUT_VID_TUNER ||\n\t\t\t    itv->card->type == IVTV_CARD_CX23416GYC) {\n\t\t\t\tinput |= UPD64083_EXT_Y_ADC;\n\t\t\t}\n\t\t}\n\t\tivtv_call_hw(itv, IVTV_HW_UPD6408X, video, s_routing,\n\t\t\t\tinput, 0, 0);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}