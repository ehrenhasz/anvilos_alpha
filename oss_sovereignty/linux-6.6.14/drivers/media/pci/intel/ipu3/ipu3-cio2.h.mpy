{
  "module_name": "ipu3-cio2.h",
  "hash_id": "31e3ae01484a747df88f245c79ca3ce99148fa98d4662799a34b60d68ce0fb61",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/intel/ipu3/ipu3-cio2.h",
  "human_readable_source": " \n \n\n#ifndef __IPU3_CIO2_H\n#define __IPU3_CIO2_H\n\n#include <linux/bits.h>\n#include <linux/dma-mapping.h>\n#include <linux/kernel.h>\n#include <linux/mutex.h>\n#include <linux/types.h>\n\n#include <asm/page.h>\n\n#include <media/media-device.h>\n#include <media/media-entity.h>\n#include <media/v4l2-async.h>\n#include <media/v4l2-dev.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-subdev.h>\n#include <media/videobuf2-core.h>\n#include <media/videobuf2-v4l2.h>\n\nstruct cio2_fbpt_entry;\t\t \nstruct pci_dev;\n\n#define CIO2_NAME\t\t\t\t\t\"ipu3-cio2\"\n#define CIO2_DEVICE_NAME\t\t\t\t\"Intel IPU3 CIO2\"\n#define CIO2_ENTITY_NAME\t\t\t\t\"ipu3-csi2\"\n#define CIO2_PCI_ID\t\t\t\t\t0x9d32\n#define CIO2_PCI_BAR\t\t\t\t\t0\n#define CIO2_DMA_MASK\t\t\t\t\tDMA_BIT_MASK(39)\n\n#define CIO2_IMAGE_MAX_WIDTH\t\t\t\t4224U\n#define CIO2_IMAGE_MAX_HEIGHT\t\t\t\t3136U\n\n \n#define CIO2_MAX_LOPS\t\t\t\t\t8\n#define CIO2_MAX_BUFFERS\t\t\t(PAGE_SIZE / 16 / CIO2_MAX_LOPS)\n#define CIO2_LOP_ENTRIES\t\t\t(PAGE_SIZE / sizeof(u32))\n\n#define CIO2_PAD_SINK\t\t\t\t\t0U\n#define CIO2_PAD_SOURCE\t\t\t\t\t1U\n#define CIO2_PADS\t\t\t\t\t2U\n\n#define CIO2_NUM_DMA_CHAN\t\t\t\t20U\n#define CIO2_NUM_PORTS\t\t\t\t\t4U  \n\n \n#define CIO2_QUEUES\t\t\t\t\tCIO2_NUM_PORTS\n\n \n#define CIO2_REG_PIPE_BASE(n)\t\t\t((n) * 0x0400)\t \n#define CIO2_REG_CSIRX_BASE\t\t\t\t0x000\n#define CIO2_REG_MIPIBE_BASE\t\t\t\t0x100\n#define CIO2_REG_PIXELGEN_BAS\t\t\t\t0x200\n#define CIO2_REG_IRQCTRL_BASE\t\t\t\t0x300\n#define CIO2_REG_GPREG_BASE\t\t\t\t0x1000\n\n \n#define CIO2_REG_CSIRX_ENABLE\t\t\t(CIO2_REG_CSIRX_BASE + 0x0)\n#define CIO2_REG_CSIRX_NOF_ENABLED_LANES\t(CIO2_REG_CSIRX_BASE + 0x4)\n#define CIO2_REG_CSIRX_SP_IF_CONFIG\t\t(CIO2_REG_CSIRX_BASE + 0x10)\n#define CIO2_REG_CSIRX_LP_IF_CONFIG\t\t(CIO2_REG_CSIRX_BASE + 0x14)\n#define CIO2_CSIRX_IF_CONFIG_FILTEROUT\t\t\t0x00\n#define CIO2_CSIRX_IF_CONFIG_FILTEROUT_VC_INACTIVE\t0x01\n#define CIO2_CSIRX_IF_CONFIG_PASS\t\t\t0x02\n#define CIO2_CSIRX_IF_CONFIG_FLAG_ERROR\t\t\tBIT(2)\n#define CIO2_REG_CSIRX_STATUS\t\t\t(CIO2_REG_CSIRX_BASE + 0x18)\n#define CIO2_REG_CSIRX_STATUS_DLANE_HS\t\t(CIO2_REG_CSIRX_BASE + 0x1c)\n#define CIO2_CSIRX_STATUS_DLANE_HS_MASK\t\t\t0xff\n#define CIO2_REG_CSIRX_STATUS_DLANE_LP\t\t(CIO2_REG_CSIRX_BASE + 0x20)\n#define CIO2_CSIRX_STATUS_DLANE_LP_MASK\t\t\t0xffffff\n \n#define CIO2_REG_CSIRX_DLY_CNT_TERMEN(lane) \\\n\t\t\t\t(CIO2_REG_CSIRX_BASE + 0x2c + 8 * (lane))\n#define CIO2_REG_CSIRX_DLY_CNT_SETTLE(lane) \\\n\t\t\t\t(CIO2_REG_CSIRX_BASE + 0x30 + 8 * (lane))\n \n#define CIO2_REG_MIPIBE_ENABLE\t\t(CIO2_REG_MIPIBE_BASE + 0x0)\n#define CIO2_REG_MIPIBE_STATUS\t\t(CIO2_REG_MIPIBE_BASE + 0x4)\n#define CIO2_REG_MIPIBE_COMP_FORMAT(vc) \\\n\t\t\t\t(CIO2_REG_MIPIBE_BASE + 0x8 + 0x4 * (vc))\n#define CIO2_REG_MIPIBE_FORCE_RAW8\t(CIO2_REG_MIPIBE_BASE + 0x20)\n#define CIO2_REG_MIPIBE_FORCE_RAW8_ENABLE\t\tBIT(0)\n#define CIO2_REG_MIPIBE_FORCE_RAW8_USE_TYPEID\t\tBIT(1)\n#define CIO2_REG_MIPIBE_FORCE_RAW8_TYPEID_SHIFT\t\t2U\n\n#define CIO2_REG_MIPIBE_IRQ_STATUS\t(CIO2_REG_MIPIBE_BASE + 0x24)\n#define CIO2_REG_MIPIBE_IRQ_CLEAR\t(CIO2_REG_MIPIBE_BASE + 0x28)\n#define CIO2_REG_MIPIBE_GLOBAL_LUT_DISREGARD (CIO2_REG_MIPIBE_BASE + 0x68)\n#define CIO2_MIPIBE_GLOBAL_LUT_DISREGARD\t\t1U\n#define CIO2_REG_MIPIBE_PKT_STALL_STATUS (CIO2_REG_MIPIBE_BASE + 0x6c)\n#define CIO2_REG_MIPIBE_PARSE_GSP_THROUGH_LP_LUT_REG_IDX \\\n\t\t\t\t\t(CIO2_REG_MIPIBE_BASE + 0x70)\n#define CIO2_REG_MIPIBE_SP_LUT_ENTRY(vc) \\\n\t\t\t\t       (CIO2_REG_MIPIBE_BASE + 0x74 + 4 * (vc))\n#define CIO2_REG_MIPIBE_LP_LUT_ENTRY(m)\t  \\\n\t\t\t\t\t(CIO2_REG_MIPIBE_BASE + 0x84 + 4 * (m))\n#define CIO2_MIPIBE_LP_LUT_ENTRY_DISREGARD\t\t1U\n#define CIO2_MIPIBE_LP_LUT_ENTRY_SID_SHIFT\t\t1U\n#define CIO2_MIPIBE_LP_LUT_ENTRY_VC_SHIFT\t\t5U\n#define CIO2_MIPIBE_LP_LUT_ENTRY_FORMAT_TYPE_SHIFT\t7U\n\n \n \n#define CIO2_REG_IRQCTRL_EDGE\t\t(CIO2_REG_IRQCTRL_BASE + 0x00)\n#define CIO2_REG_IRQCTRL_MASK\t\t(CIO2_REG_IRQCTRL_BASE + 0x04)\n#define CIO2_REG_IRQCTRL_STATUS\t\t(CIO2_REG_IRQCTRL_BASE + 0x08)\n#define CIO2_REG_IRQCTRL_CLEAR\t\t(CIO2_REG_IRQCTRL_BASE + 0x0c)\n#define CIO2_REG_IRQCTRL_ENABLE\t\t(CIO2_REG_IRQCTRL_BASE + 0x10)\n#define CIO2_REG_IRQCTRL_LEVEL_NOT_PULSE\t(CIO2_REG_IRQCTRL_BASE + 0x14)\n\n#define CIO2_REG_GPREG_SRST\t\t(CIO2_REG_GPREG_BASE + 0x0)\n#define CIO2_GPREG_SRST_ALL\t\t\t\t0xffff\t \n#define CIO2_REG_FB_HPLL_FREQ\t\t(CIO2_REG_GPREG_BASE + 0x08)\n#define CIO2_REG_ISCLK_RATIO\t\t(CIO2_REG_GPREG_BASE + 0xc)\n\n#define CIO2_REG_CGC\t\t\t\t\t0x1400\n#define CIO2_CGC_CSI2_TGE\t\t\t\tBIT(0)\n#define CIO2_CGC_PRIM_TGE\t\t\t\tBIT(1)\n#define CIO2_CGC_SIDE_TGE\t\t\t\tBIT(2)\n#define CIO2_CGC_XOSC_TGE\t\t\t\tBIT(3)\n#define CIO2_CGC_MPLL_SHUTDOWN_EN\t\t\tBIT(4)\n#define CIO2_CGC_D3I3_TGE\t\t\t\tBIT(5)\n#define CIO2_CGC_CSI2_INTERFRAME_TGE\t\t\tBIT(6)\n#define CIO2_CGC_CSI2_PORT_DCGE\t\t\t\tBIT(8)\n#define CIO2_CGC_CSI2_DCGE\t\t\t\tBIT(9)\n#define CIO2_CGC_SIDE_DCGE\t\t\t\tBIT(10)\n#define CIO2_CGC_PRIM_DCGE\t\t\t\tBIT(11)\n#define CIO2_CGC_ROSC_DCGE\t\t\t\tBIT(12)\n#define CIO2_CGC_XOSC_DCGE\t\t\t\tBIT(13)\n#define CIO2_CGC_FLIS_DCGE\t\t\t\tBIT(14)\n#define CIO2_CGC_CLKGATE_HOLDOFF_SHIFT\t\t\t20U\n#define CIO2_CGC_CSI_CLKGATE_HOLDOFF_SHIFT\t\t24U\n#define CIO2_REG_D0I3C\t\t\t\t\t0x1408\n#define CIO2_D0I3C_I3\t\t\t\t\tBIT(2)\t \n#define CIO2_D0I3C_RR\t\t\t\t\tBIT(3)\t \n#define CIO2_REG_SWRESET\t\t\t\t0x140c\n#define CIO2_SWRESET_SWRESET\t\t\t\t1U\n#define CIO2_REG_SENSOR_ACTIVE\t\t\t\t0x1410\n#define CIO2_REG_INT_STS\t\t\t\t0x1414\n#define CIO2_REG_INT_STS_EXT_OE\t\t\t\t0x1418\n#define CIO2_INT_EXT_OE_DMAOE_SHIFT\t\t\t0U\n#define CIO2_INT_EXT_OE_DMAOE_MASK\t\t\t0x7ffff\n#define CIO2_INT_EXT_OE_OES_SHIFT\t\t\t24U\n#define CIO2_INT_EXT_OE_OES_MASK\t(0xf << CIO2_INT_EXT_OE_OES_SHIFT)\n#define CIO2_REG_INT_EN\t\t\t\t\t0x1420\n#define CIO2_REG_INT_EN_IRQ\t\t\t\t(1 << 24)\n#define CIO2_REG_INT_EN_IOS(dma)\t(1U << (((dma) >> 1U) + 12U))\n \n#define CIO2_INT_IOC(dma)\t(1U << ((dma) < 4U ? (dma) : ((dma) >> 1U) + 2U))\n#define CIO2_INT_IOC_SHIFT\t\t\t\t0\n#define CIO2_INT_IOC_MASK\t\t(0x7ff << CIO2_INT_IOC_SHIFT)\n#define CIO2_INT_IOS_IOLN(dma)\t\t(1U << (((dma) >> 1U) + 12U))\n#define CIO2_INT_IOS_IOLN_SHIFT\t\t\t\t12\n#define CIO2_INT_IOS_IOLN_MASK\t\t(0x3ff << CIO2_INT_IOS_IOLN_SHIFT)\n#define CIO2_INT_IOIE\t\t\t\t\tBIT(22)\n#define CIO2_INT_IOOE\t\t\t\t\tBIT(23)\n#define CIO2_INT_IOIRQ\t\t\t\t\tBIT(24)\n#define CIO2_REG_INT_EN_EXT_OE\t\t\t\t0x1424\n#define CIO2_REG_DMA_DBG\t\t\t\t0x1448\n#define CIO2_REG_DMA_DBG_DMA_INDEX_SHIFT\t\t0U\n#define CIO2_REG_PBM_ARB_CTRL\t\t\t\t0x1460\n#define CIO2_PBM_ARB_CTRL_LANES_DIV\t\t\t0U  \n#define CIO2_PBM_ARB_CTRL_LANES_DIV_SHIFT\t\t0U\n#define CIO2_PBM_ARB_CTRL_LE_EN\t\t\t\tBIT(7)\n#define CIO2_PBM_ARB_CTRL_PLL_POST_SHTDN\t\t2U\n#define CIO2_PBM_ARB_CTRL_PLL_POST_SHTDN_SHIFT\t\t8U\n#define CIO2_PBM_ARB_CTRL_PLL_AHD_WK_UP\t\t\t480U\n#define CIO2_PBM_ARB_CTRL_PLL_AHD_WK_UP_SHIFT\t\t16U\n#define CIO2_REG_PBM_WMCTRL1\t\t\t\t0x1464\n#define CIO2_PBM_WMCTRL1_MIN_2CK_SHIFT\t\t\t0U\n#define CIO2_PBM_WMCTRL1_MID1_2CK_SHIFT\t\t\t8U\n#define CIO2_PBM_WMCTRL1_MID2_2CK_SHIFT\t\t\t16U\n#define CIO2_PBM_WMCTRL1_TS_COUNT_DISABLE\t\tBIT(31)\n#define CIO2_PBM_WMCTRL1_MIN_2CK\t(4 << CIO2_PBM_WMCTRL1_MIN_2CK_SHIFT)\n#define CIO2_PBM_WMCTRL1_MID1_2CK\t(16 << CIO2_PBM_WMCTRL1_MID1_2CK_SHIFT)\n#define CIO2_PBM_WMCTRL1_MID2_2CK\t(21 << CIO2_PBM_WMCTRL1_MID2_2CK_SHIFT)\n#define CIO2_REG_PBM_WMCTRL2\t\t\t\t0x1468\n#define CIO2_PBM_WMCTRL2_HWM_2CK\t\t\t40U\n#define CIO2_PBM_WMCTRL2_HWM_2CK_SHIFT\t\t\t0U\n#define CIO2_PBM_WMCTRL2_LWM_2CK\t\t\t22U\n#define CIO2_PBM_WMCTRL2_LWM_2CK_SHIFT\t\t\t8U\n#define CIO2_PBM_WMCTRL2_OBFFWM_2CK\t\t\t2U\n#define CIO2_PBM_WMCTRL2_OBFFWM_2CK_SHIFT\t\t16U\n#define CIO2_PBM_WMCTRL2_TRANSDYN\t\t\t1U\n#define CIO2_PBM_WMCTRL2_TRANSDYN_SHIFT\t\t\t24U\n#define CIO2_PBM_WMCTRL2_DYNWMEN\t\t\tBIT(28)\n#define CIO2_PBM_WMCTRL2_OBFF_MEM_EN\t\t\tBIT(29)\n#define CIO2_PBM_WMCTRL2_OBFF_CPU_EN\t\t\tBIT(30)\n#define CIO2_PBM_WMCTRL2_DRAINNOW\t\t\tBIT(31)\n#define CIO2_REG_PBM_TS_COUNT\t\t\t\t0x146c\n#define CIO2_REG_PBM_FOPN_ABORT\t\t\t\t0x1474\n \n#define CIO2_PBM_FOPN_ABORT(n)\t\t\t\t(0x1 << 8U * (n))\n#define CIO2_PBM_FOPN_FORCE_ABORT(n)\t\t\t(0x2 << 8U * (n))\n#define CIO2_PBM_FOPN_FRAMEOPEN(n)\t\t\t(0x8 << 8U * (n))\n#define CIO2_REG_LTRCTRL\t\t\t\t0x1480\n#define CIO2_LTRCTRL_LTRDYNEN\t\t\t\tBIT(16)\n#define CIO2_LTRCTRL_LTRSTABLETIME_SHIFT\t\t8U\n#define CIO2_LTRCTRL_LTRSTABLETIME_MASK\t\t\t0xff\n#define CIO2_LTRCTRL_LTRSEL1S3\t\t\t\tBIT(7)\n#define CIO2_LTRCTRL_LTRSEL1S2\t\t\t\tBIT(6)\n#define CIO2_LTRCTRL_LTRSEL1S1\t\t\t\tBIT(5)\n#define CIO2_LTRCTRL_LTRSEL1S0\t\t\t\tBIT(4)\n#define CIO2_LTRCTRL_LTRSEL2S3\t\t\t\tBIT(3)\n#define CIO2_LTRCTRL_LTRSEL2S2\t\t\t\tBIT(2)\n#define CIO2_LTRCTRL_LTRSEL2S1\t\t\t\tBIT(1)\n#define CIO2_LTRCTRL_LTRSEL2S0\t\t\t\tBIT(0)\n#define CIO2_REG_LTRVAL23\t\t\t\t0x1484\n#define CIO2_REG_LTRVAL01\t\t\t\t0x1488\n#define CIO2_LTRVAL02_VAL_SHIFT\t\t\t\t0U\n#define CIO2_LTRVAL02_SCALE_SHIFT\t\t\t10U\n#define CIO2_LTRVAL13_VAL_SHIFT\t\t\t\t16U\n#define CIO2_LTRVAL13_SCALE_SHIFT\t\t\t26U\n\n#define CIO2_LTRVAL0_VAL\t\t\t\t175U\n \n#define CIO2_LTRVAL0_SCALE\t\t\t\t2U\n#define CIO2_LTRVAL1_VAL\t\t\t\t90U\n#define CIO2_LTRVAL1_SCALE\t\t\t\t2U\n#define CIO2_LTRVAL2_VAL\t\t\t\t90U\n#define CIO2_LTRVAL2_SCALE\t\t\t\t2U\n#define CIO2_LTRVAL3_VAL\t\t\t\t90U\n#define CIO2_LTRVAL3_SCALE\t\t\t\t2U\n\n#define CIO2_REG_CDMABA(n)\t\t(0x1500 + 0x10 * (n))\t \n#define CIO2_REG_CDMARI(n)\t\t(0x1504 + 0x10 * (n))\n#define CIO2_CDMARI_FBPT_RP_SHIFT\t\t\t0U\n#define CIO2_CDMARI_FBPT_RP_MASK\t\t\t0xff\n#define CIO2_REG_CDMAC0(n)\t\t(0x1508 + 0x10 * (n))\n#define CIO2_CDMAC0_FBPT_LEN_SHIFT\t\t\t0U\n#define CIO2_CDMAC0_FBPT_WIDTH_SHIFT\t\t\t8U\n#define CIO2_CDMAC0_FBPT_NS\t\t\t\tBIT(25)\n#define CIO2_CDMAC0_DMA_INTR_ON_FS\t\t\tBIT(26)\n#define CIO2_CDMAC0_DMA_INTR_ON_FE\t\t\tBIT(27)\n#define CIO2_CDMAC0_FBPT_UPDATE_FIFO_FULL\t\tBIT(28)\n#define CIO2_CDMAC0_FBPT_FIFO_FULL_FIX_DIS\t\tBIT(29)\n#define CIO2_CDMAC0_DMA_EN\t\t\t\tBIT(30)\n#define CIO2_CDMAC0_DMA_HALTED\t\t\t\tBIT(31)\n#define CIO2_REG_CDMAC1(n)\t\t(0x150c + 0x10 * (n))\n#define CIO2_CDMAC1_LINENUMINT_SHIFT\t\t\t0U\n#define CIO2_CDMAC1_LINENUMUPDATE_SHIFT\t\t\t16U\n \n#define CIO2_REG_PXM_PXF_FMT_CFG0(n)\t(0x1700 + 0x30 * (n))\n#define CIO2_PXM_PXF_FMT_CFG_SID0_SHIFT\t\t\t0U\n#define CIO2_PXM_PXF_FMT_CFG_SID1_SHIFT\t\t\t16U\n#define CIO2_PXM_PXF_FMT_CFG_PCK_64B\t\t\t(0 << 0)\n#define CIO2_PXM_PXF_FMT_CFG_PCK_32B\t\t\t(1 << 0)\n#define CIO2_PXM_PXF_FMT_CFG_BPP_08\t\t\t(0 << 2)\n#define CIO2_PXM_PXF_FMT_CFG_BPP_10\t\t\t(1 << 2)\n#define CIO2_PXM_PXF_FMT_CFG_BPP_12\t\t\t(2 << 2)\n#define CIO2_PXM_PXF_FMT_CFG_BPP_14\t\t\t(3 << 2)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_4PPC\t\t\t(0 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_3PPC_RGBA\t\t(1 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_3PPC_ARGB\t\t(2 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_PLANAR2\t\t(3 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_PLANAR3\t\t(4 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_SPEC_NV16\t\t\t(5 << 4)\n#define CIO2_PXM_PXF_FMT_CFG_PSWAP4_1ST_AB\t\t(1 << 7)\n#define CIO2_PXM_PXF_FMT_CFG_PSWAP4_1ST_CD\t\t(1 << 8)\n#define CIO2_PXM_PXF_FMT_CFG_PSWAP4_2ND_AC\t\t(1 << 9)\n#define CIO2_PXM_PXF_FMT_CFG_PSWAP4_2ND_BD\t\t(1 << 10)\n#define CIO2_REG_INT_STS_EXT_IE\t\t\t\t0x17e4\n#define CIO2_REG_INT_EN_EXT_IE\t\t\t\t0x17e8\n#define CIO2_INT_EXT_IE_ECC_RE(n)\t\t\t(0x01 << (8U * (n)))\n#define CIO2_INT_EXT_IE_DPHY_NR(n)\t\t\t(0x02 << (8U * (n)))\n#define CIO2_INT_EXT_IE_ECC_NR(n)\t\t\t(0x04 << (8U * (n)))\n#define CIO2_INT_EXT_IE_CRCERR(n)\t\t\t(0x08 << (8U * (n)))\n#define CIO2_INT_EXT_IE_INTERFRAMEDATA(n)\t\t(0x10 << (8U * (n)))\n#define CIO2_INT_EXT_IE_PKT2SHORT(n)\t\t\t(0x20 << (8U * (n)))\n#define CIO2_INT_EXT_IE_PKT2LONG(n)\t\t\t(0x40 << (8U * (n)))\n#define CIO2_INT_EXT_IE_IRQ(n)\t\t\t\t(0x80 << (8U * (n)))\n#define CIO2_REG_PXM_FRF_CFG(n)\t\t\t\t(0x1720 + 0x30 * (n))\n#define CIO2_PXM_FRF_CFG_FNSEL\t\t\t\tBIT(0)\n#define CIO2_PXM_FRF_CFG_FN_RST\t\t\t\tBIT(1)\n#define CIO2_PXM_FRF_CFG_ABORT\t\t\t\tBIT(2)\n#define CIO2_PXM_FRF_CFG_CRC_TH_SHIFT\t\t\t3U\n#define CIO2_PXM_FRF_CFG_MSK_ECC_DPHY_NR\t\tBIT(8)\n#define CIO2_PXM_FRF_CFG_MSK_ECC_RE\t\t\tBIT(9)\n#define CIO2_PXM_FRF_CFG_MSK_ECC_DPHY_NE\t\tBIT(10)\n#define CIO2_PXM_FRF_CFG_EVEN_ODD_MODE_SHIFT\t\t11U\n#define CIO2_PXM_FRF_CFG_MASK_CRC_THRES\t\t\tBIT(13)\n#define CIO2_PXM_FRF_CFG_MASK_CSI_ACCEPT\t\tBIT(14)\n#define CIO2_PXM_FRF_CFG_CIOHC_FS_MODE\t\t\tBIT(15)\n#define CIO2_PXM_FRF_CFG_CIOHC_FRST_FRM_SHIFT\t\t16U\n#define CIO2_REG_PXM_SID2BID0(n)\t\t\t(0x1724 + 0x30 * (n))\n#define CIO2_FB_HPLL_FREQ\t\t\t\t0x2\n#define CIO2_ISCLK_RATIO\t\t\t\t0xc\n\n#define CIO2_IRQCTRL_MASK\t\t\t\t0x3ffff\n\n#define CIO2_INT_EN_EXT_OE_MASK\t\t\t\t0x8f0fffff\n\n#define CIO2_CGC_CLKGATE_HOLDOFF\t\t\t3U\n#define CIO2_CGC_CSI_CLKGATE_HOLDOFF\t\t\t5U\n\n#define CIO2_PXM_FRF_CFG_CRC_TH\t\t\t\t16\n\n#define CIO2_INT_EN_EXT_IE_MASK\t\t\t\t0xffffffff\n\n#define CIO2_DMA_CHAN\t\t\t\t\t0U\n\n#define CIO2_CSIRX_DLY_CNT_CLANE_IDX\t\t\t-1\n\n#define CIO2_CSIRX_DLY_CNT_TERMEN_CLANE_A\t\t0\n#define CIO2_CSIRX_DLY_CNT_TERMEN_CLANE_B\t\t0\n#define CIO2_CSIRX_DLY_CNT_SETTLE_CLANE_A\t\t95\n#define CIO2_CSIRX_DLY_CNT_SETTLE_CLANE_B\t\t-8\n\n#define CIO2_CSIRX_DLY_CNT_TERMEN_DLANE_A\t\t0\n#define CIO2_CSIRX_DLY_CNT_TERMEN_DLANE_B\t\t0\n#define CIO2_CSIRX_DLY_CNT_SETTLE_DLANE_A\t\t85\n#define CIO2_CSIRX_DLY_CNT_SETTLE_DLANE_B\t\t-2\n\n#define CIO2_CSIRX_DLY_CNT_TERMEN_DEFAULT\t\t0x4\n#define CIO2_CSIRX_DLY_CNT_SETTLE_DEFAULT\t\t0x570\n\n#define CIO2_PMCSR_OFFSET\t\t\t\t4U\n#define CIO2_PMCSR_D0D3_SHIFT\t\t\t\t2U\n#define CIO2_PMCSR_D3\t\t\t\t\t0x3\n\nstruct cio2_csi2_timing {\n\ts32 clk_termen;\n\ts32 clk_settle;\n\ts32 dat_termen;\n\ts32 dat_settle;\n};\n\nstruct cio2_buffer {\n\tstruct vb2_v4l2_buffer vbb;\n\tu32 *lop[CIO2_MAX_LOPS];\n\tdma_addr_t lop_bus_addr[CIO2_MAX_LOPS];\n\tunsigned int offset;\n};\n\n#define to_cio2_buffer(vb)\tcontainer_of(vb, struct cio2_buffer, vbb.vb2_buf)\n\nstruct csi2_bus_info {\n\tu32 port;\n\tu32 lanes;\n};\n\nstruct cio2_queue {\n\t \n\tstruct mutex lock;\n\tstruct media_pipeline pipe;\n\tstruct csi2_bus_info csi2;\n\tstruct v4l2_subdev *sensor;\n\tvoid __iomem *csi_rx_base;\n\n\t \n\tstruct v4l2_subdev subdev;\n\tstruct mutex subdev_lock;  \n\tstruct media_pad subdev_pads[CIO2_PADS];\n\tstruct v4l2_mbus_framefmt subdev_fmt;\n\tatomic_t frame_sequence;\n\n\t \n\tstruct video_device vdev;\n\tstruct media_pad vdev_pad;\n\tstruct v4l2_pix_format_mplane format;\n\tstruct vb2_queue vbq;\n\n\t \n\tstruct cio2_fbpt_entry *fbpt;\t \n\tdma_addr_t fbpt_bus_addr;\n\tstruct cio2_buffer *bufs[CIO2_MAX_BUFFERS];\n\tunsigned int bufs_first;\t \n\tunsigned int bufs_next;\t \n\tatomic_t bufs_queued;\n};\n\nstruct cio2_device {\n\tstruct pci_dev *pci_dev;\n\tvoid __iomem *base;\n\tstruct v4l2_device v4l2_dev;\n\tstruct cio2_queue queue[CIO2_QUEUES];\n\tstruct cio2_queue *cur_queue;\n\t \n\tstruct mutex lock;\n\n\tbool streaming;\n\tstruct v4l2_async_notifier notifier;\n\tstruct media_device media_dev;\n\n\t \n\tvoid *dummy_page;\n\t \n\tdma_addr_t dummy_page_bus_addr;\n\t \n\tu32 *dummy_lop;\n\t \n\tdma_addr_t dummy_lop_bus_addr;\n};\n\n#define to_cio2_device(n)\tcontainer_of(n, struct cio2_device, notifier)\n\n \n \n#define SENSOR_VIR_CH_DFLT\t\t0\n\n \n#define CIO2_FBPT_SIZE\t\t\t(CIO2_MAX_BUFFERS * CIO2_MAX_LOPS * \\\n\t\t\t\t\t sizeof(struct cio2_fbpt_entry))\n\n#define CIO2_FBPT_SUBENTRY_UNIT\t\t4\n\n \n#define CIO2_FBPT_CTRL_VALID\t\tBIT(0)\n#define CIO2_FBPT_CTRL_IOC\t\tBIT(1)\n#define CIO2_FBPT_CTRL_IOS\t\tBIT(2)\n#define CIO2_FBPT_CTRL_SUCCXFAIL\tBIT(3)\n#define CIO2_FBPT_CTRL_CMPLCODE_SHIFT\t4\n\n \nstruct __packed cio2_fbpt_entry {\n\tunion {\n\t\tstruct __packed {\n\t\t\tu32 ctrl;  \n\t\t\tu16 cur_line_num;  \n\t\t\tu16 frame_num;  \n\t\t\tu32 first_page_offset;  \n\t\t} first_entry;\n\t\t \n\t\tstruct __packed {\n\t\t\tu32 timestamp;\n\t\t\tu32 num_of_bytes;\n\t\t\t \n\t\t\tu16 last_page_available_bytes;\n\t\t\t \n\t\t\tu16 num_of_pages;\n\t\t} second_entry;\n\t};\n\tu32 lop_page_addr;\t \n};\n\nstatic inline struct cio2_queue *file_to_cio2_queue(struct file *file)\n{\n\treturn container_of(video_devdata(file), struct cio2_queue, vdev);\n}\n\nstatic inline struct cio2_queue *vb2q_to_cio2_queue(struct vb2_queue *vq)\n{\n\treturn container_of(vq, struct cio2_queue, vbq);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}