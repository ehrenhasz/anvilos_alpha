{
  "module_name": "netup_unidvb.h",
  "hash_id": "0cbc7898d0546b961549fe23d967a799cc740eed222f45a8a0ef2268cbda3a82",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/pci/netup_unidvb/netup_unidvb.h",
  "human_readable_source": " \n \n\n#include <linux/pci.h>\n#include <linux/i2c.h>\n#include <linux/workqueue.h>\n#include <media/v4l2-common.h>\n#include <media/v4l2-device.h>\n#include <media/videobuf2-dvb.h>\n#include <media/dvb_ca_en50221.h>\n\n#define NETUP_UNIDVB_NAME\t\"netup_unidvb\"\n#define NETUP_UNIDVB_VERSION\t\"0.0.1\"\n#define NETUP_VENDOR_ID\t\t0x1b55\n#define NETUP_PCI_DEV_REVISION  0x2\n\n \n#define REG_ISR\t\t\t0x4890\n#define REG_ISR_MASKED\t\t0x4892\n#define REG_IMASK_SET\t\t0x4894\n#define REG_IMASK_CLEAR\t\t0x4896\n \n#define NETUP_UNIDVB_IRQ_SPI\t(1 << 0)\n#define NETUP_UNIDVB_IRQ_I2C0\t(1 << 1)\n#define NETUP_UNIDVB_IRQ_I2C1\t(1 << 2)\n#define NETUP_UNIDVB_IRQ_FRA0\t(1 << 4)\n#define NETUP_UNIDVB_IRQ_FRA1\t(1 << 5)\n#define NETUP_UNIDVB_IRQ_FRB0\t(1 << 6)\n#define NETUP_UNIDVB_IRQ_FRB1\t(1 << 7)\n#define NETUP_UNIDVB_IRQ_DMA1\t(1 << 8)\n#define NETUP_UNIDVB_IRQ_DMA2\t(1 << 9)\n#define NETUP_UNIDVB_IRQ_CI\t(1 << 10)\n#define NETUP_UNIDVB_IRQ_CAM0\t(1 << 11)\n#define NETUP_UNIDVB_IRQ_CAM1\t(1 << 12)\n\n \nenum netup_hw_rev {\n\tNETUP_HW_REV_1_3 = 0x18F6,\n\tNETUP_HW_REV_1_4 = 0x18F7\n};\n\nstruct netup_dma {\n\tu8\t\t\tnum;\n\tspinlock_t\t\tlock;\n\tstruct netup_unidvb_dev\t*ndev;\n\tstruct netup_dma_regs __iomem *regs;\n\tu32\t\t\tring_buffer_size;\n\tu8\t\t\t*addr_virt;\n\tdma_addr_t\t\taddr_phys;\n\tu64\t\t\taddr_last;\n\tu32\t\t\thigh_addr;\n\tu32\t\t\tdata_offset;\n\tu32\t\t\tdata_size;\n\tstruct list_head\tfree_buffers;\n\tstruct work_struct\twork;\n\tstruct timer_list\ttimeout;\n};\n\nenum netup_i2c_state {\n\tSTATE_DONE,\n\tSTATE_WAIT,\n\tSTATE_WANT_READ,\n\tSTATE_WANT_WRITE,\n\tSTATE_ERROR\n};\n\nstruct netup_i2c_regs;\n\nstruct netup_i2c {\n\tspinlock_t\t\t\tlock;\n\twait_queue_head_t\t\twq;\n\tstruct i2c_adapter\t\tadap;\n\tstruct netup_unidvb_dev\t\t*dev;\n\tstruct netup_i2c_regs __iomem\t*regs;\n\tstruct i2c_msg\t\t\t*msg;\n\tenum netup_i2c_state\t\tstate;\n\tu32\t\t\t\txmit_size;\n};\n\nstruct netup_ci_state {\n\tstruct dvb_ca_en50221\t\tca;\n\tu8 __iomem\t\t\t*membase8_config;\n\tu8 __iomem\t\t\t*membase8_io;\n\tstruct netup_unidvb_dev\t\t*dev;\n\tint status;\n\tint nr;\n};\n\nstruct netup_spi;\n\nstruct netup_unidvb_dev {\n\tstruct pci_dev\t\t\t*pci_dev;\n\tint\t\t\t\tpci_bus;\n\tint\t\t\t\tpci_slot;\n\tint\t\t\t\tpci_func;\n\tint\t\t\t\tboard_num;\n\tint\t\t\t\told_fw;\n\tu32 __iomem\t\t\t*lmmio0;\n\tu8 __iomem\t\t\t*bmmio0;\n\tu32 __iomem\t\t\t*lmmio1;\n\tu8 __iomem\t\t\t*bmmio1;\n\tu8\t\t\t\t*dma_virt;\n\tdma_addr_t\t\t\tdma_phys;\n\tu32\t\t\t\tdma_size;\n\tstruct vb2_dvb_frontends\tfrontends[2];\n\tstruct netup_i2c\t\ti2c[2];\n\tstruct workqueue_struct\t\t*wq;\n\tstruct netup_dma\t\tdma[2];\n\tstruct netup_ci_state\t\tci[2];\n\tstruct netup_spi\t\t*spi;\n\tenum netup_hw_rev\t\trev;\n};\n\nint netup_i2c_register(struct netup_unidvb_dev *ndev);\nvoid netup_i2c_unregister(struct netup_unidvb_dev *ndev);\nirqreturn_t netup_ci_interrupt(struct netup_unidvb_dev *ndev);\nirqreturn_t netup_i2c_interrupt(struct netup_i2c *i2c);\nirqreturn_t netup_spi_interrupt(struct netup_spi *spi);\nint netup_unidvb_ci_register(struct netup_unidvb_dev *dev,\n\t\t\t     int num, struct pci_dev *pci_dev);\nvoid netup_unidvb_ci_unregister(struct netup_unidvb_dev *dev, int num);\nint netup_spi_init(struct netup_unidvb_dev *ndev);\nvoid netup_spi_release(struct netup_unidvb_dev *ndev);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}