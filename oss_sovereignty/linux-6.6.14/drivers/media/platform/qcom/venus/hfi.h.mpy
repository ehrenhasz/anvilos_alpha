{
  "module_name": "hfi.h",
  "hash_id": "2c4c27026fe7a635d78fb60982bc364ab5372c836693f2cd3b298ac8c0017e52",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/qcom/venus/hfi.h",
  "human_readable_source": " \n \n#ifndef __HFI_H__\n#define __HFI_H__\n\n#include <linux/interrupt.h>\n\n#include \"hfi_helper.h\"\n\n#define VIDC_SESSION_TYPE_VPE\t\t\t0\n#define VIDC_SESSION_TYPE_ENC\t\t\t1\n#define VIDC_SESSION_TYPE_DEC\t\t\t2\n\n#define VIDC_RESOURCE_NONE\t\t\t0\n#define VIDC_RESOURCE_OCMEM\t\t\t1\n#define VIDC_RESOURCE_VMEM\t\t\t2\n\nstruct hfi_buffer_desc {\n\tu32 buffer_type;\n\tu32 buffer_size;\n\tu32 num_buffers;\n\tu32 device_addr;\n\tu32 extradata_addr;\n\tu32 extradata_size;\n\tu32 response_required;\n};\n\nstruct hfi_frame_data {\n\tu32 buffer_type;\n\tu32 device_addr;\n\tu32 extradata_addr;\n\tu64 timestamp;\n\tu32 flags;\n\tu32 offset;\n\tu32 alloc_len;\n\tu32 filled_len;\n\tu32 mark_target;\n\tu32 mark_data;\n\tu32 clnt_data;\n\tu32 extradata_size;\n};\n\nunion hfi_get_property {\n\tstruct hfi_profile_level profile_level;\n\tstruct hfi_buffer_requirements bufreq[HFI_BUFFER_TYPE_MAX];\n};\n\n \n#define EVT_SYS_EVENT_CHANGE\t\t\t1\n#define EVT_SYS_WATCHDOG_TIMEOUT\t\t2\n#define EVT_SYS_ERROR\t\t\t\t3\n#define EVT_SESSION_ERROR\t\t\t4\n\n \nstruct hfi_event_data {\n\tu32 error;\n\tu32 height;\n\tu32 width;\n\tu32 event_type;\n\tu32 packet_buffer;\n\tu32 extradata_buffer;\n\tu32 tag;\n\tu32 profile;\n\tu32 level;\n\t \n\tu32 bit_depth;\n\tu32 pic_struct;\n\tu32 colour_space;\n\tu32 entropy_mode;\n\tu32 buf_count;\n\tstruct {\n\t\tu32 left, top;\n\t\tu32 width, height;\n\t} input_crop;\n};\n\n \n#define CORE_UNINIT\t\t\t\t0\n#define CORE_INIT\t\t\t\t1\n\n \n#define INST_UNINIT\t\t\t\t2\n#define INST_INIT\t\t\t\t3\n#define INST_LOAD_RESOURCES\t\t\t4\n#define INST_START\t\t\t\t5\n#define INST_STOP\t\t\t\t6\n#define INST_RELEASE_RESOURCES\t\t\t7\n\nstruct venus_core;\nstruct venus_inst;\n\nstruct hfi_core_ops {\n\tvoid (*event_notify)(struct venus_core *core, u32 event);\n};\n\nstruct hfi_inst_ops {\n\tvoid (*buf_done)(struct venus_inst *inst, unsigned int buf_type,\n\t\t\t u32 tag, u32 bytesused, u32 data_offset, u32 flags,\n\t\t\t u32 hfi_flags, u64 timestamp_us);\n\tvoid (*event_notify)(struct venus_inst *inst, u32 event,\n\t\t\t     struct hfi_event_data *data);\n\tvoid (*flush_done)(struct venus_inst *inst);\n};\n\nstruct hfi_ops {\n\tint (*core_init)(struct venus_core *core);\n\tint (*core_deinit)(struct venus_core *core);\n\tint (*core_ping)(struct venus_core *core, u32 cookie);\n\tint (*core_trigger_ssr)(struct venus_core *core, u32 trigger_type);\n\n\tint (*session_init)(struct venus_inst *inst, u32 session_type,\n\t\t\t    u32 codec);\n\tint (*session_end)(struct venus_inst *inst);\n\tint (*session_abort)(struct venus_inst *inst);\n\tint (*session_flush)(struct venus_inst *inst, u32 flush_mode);\n\tint (*session_start)(struct venus_inst *inst);\n\tint (*session_stop)(struct venus_inst *inst);\n\tint (*session_continue)(struct venus_inst *inst);\n\tint (*session_etb)(struct venus_inst *inst, struct hfi_frame_data *fd);\n\tint (*session_ftb)(struct venus_inst *inst, struct hfi_frame_data *fd);\n\tint (*session_set_buffers)(struct venus_inst *inst,\n\t\t\t\t   struct hfi_buffer_desc *bd);\n\tint (*session_unset_buffers)(struct venus_inst *inst,\n\t\t\t\t     struct hfi_buffer_desc *bd);\n\tint (*session_load_res)(struct venus_inst *inst);\n\tint (*session_release_res)(struct venus_inst *inst);\n\tint (*session_parse_seq_hdr)(struct venus_inst *inst, u32 seq_hdr,\n\t\t\t\t     u32 seq_hdr_len);\n\tint (*session_get_seq_hdr)(struct venus_inst *inst, u32 seq_hdr,\n\t\t\t\t   u32 seq_hdr_len);\n\tint (*session_set_property)(struct venus_inst *inst, u32 ptype,\n\t\t\t\t    void *pdata);\n\tint (*session_get_property)(struct venus_inst *inst, u32 ptype);\n\n\tint (*resume)(struct venus_core *core);\n\tint (*suspend)(struct venus_core *core);\n\n\t \n\tirqreturn_t (*isr)(struct venus_core *core);\n\tirqreturn_t (*isr_thread)(struct venus_core *core);\n};\n\nint hfi_create(struct venus_core *core, const struct hfi_core_ops *ops);\nvoid hfi_destroy(struct venus_core *core);\nvoid hfi_reinit(struct venus_core *core);\n\nint hfi_core_init(struct venus_core *core);\nint hfi_core_deinit(struct venus_core *core, bool blocking);\nint hfi_core_suspend(struct venus_core *core);\nint hfi_core_resume(struct venus_core *core, bool force);\nint hfi_core_trigger_ssr(struct venus_core *core, u32 type);\nint hfi_core_ping(struct venus_core *core);\nint hfi_session_create(struct venus_inst *inst, const struct hfi_inst_ops *ops);\nvoid hfi_session_destroy(struct venus_inst *inst);\nint hfi_session_init(struct venus_inst *inst, u32 pixfmt);\nint hfi_session_deinit(struct venus_inst *inst);\nint hfi_session_start(struct venus_inst *inst);\nint hfi_session_stop(struct venus_inst *inst);\nint hfi_session_continue(struct venus_inst *inst);\nint hfi_session_abort(struct venus_inst *inst);\nint hfi_session_load_res(struct venus_inst *inst);\nint hfi_session_unload_res(struct venus_inst *inst);\nint hfi_session_flush(struct venus_inst *inst, u32 type, bool block);\nint hfi_session_set_buffers(struct venus_inst *inst,\n\t\t\t    struct hfi_buffer_desc *bd);\nint hfi_session_unset_buffers(struct venus_inst *inst,\n\t\t\t      struct hfi_buffer_desc *bd);\nint hfi_session_get_property(struct venus_inst *inst, u32 ptype,\n\t\t\t     union hfi_get_property *hprop);\nint hfi_session_set_property(struct venus_inst *inst, u32 ptype, void *pdata);\nint hfi_session_process_buf(struct venus_inst *inst, struct hfi_frame_data *f);\nirqreturn_t hfi_isr_thread(int irq, void *dev_id);\nirqreturn_t hfi_isr(int irq, void *dev);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}