{
  "module_name": "hfi_platform.c",
  "hash_id": "1d58434184924be1993d3001dd9dc73c4cce74c8eb59cf0e6218476526d0fd6f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/qcom/venus/hfi_platform.c",
  "human_readable_source": "\n \n#include <linux/of.h>\n#include \"hfi_platform.h\"\n#include \"core.h\"\n\nconst struct hfi_platform *hfi_platform_get(enum hfi_version version)\n{\n\tswitch (version) {\n\tcase HFI_VERSION_4XX:\n\t\treturn &hfi_plat_v4;\n\tcase HFI_VERSION_6XX:\n\t\treturn &hfi_plat_v6;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn NULL;\n}\n\nunsigned long\nhfi_platform_get_codec_vpp_freq(enum hfi_version version, u32 codec, u32 session_type)\n{\n\tconst struct hfi_platform *plat;\n\tunsigned long freq = 0;\n\n\tplat = hfi_platform_get(version);\n\tif (!plat)\n\t\treturn 0;\n\n\tif (plat->codec_vpp_freq)\n\t\tfreq = plat->codec_vpp_freq(session_type, codec);\n\n\treturn freq;\n}\n\nunsigned long\nhfi_platform_get_codec_vsp_freq(enum hfi_version version, u32 codec, u32 session_type)\n{\n\tconst struct hfi_platform *plat;\n\tunsigned long freq = 0;\n\n\tplat = hfi_platform_get(version);\n\tif (!plat)\n\t\treturn 0;\n\n\tif (plat->codec_vpp_freq)\n\t\tfreq = plat->codec_vsp_freq(session_type, codec);\n\n\treturn freq;\n}\n\nunsigned long\nhfi_platform_get_codec_lp_freq(enum hfi_version version, u32 codec, u32 session_type)\n{\n\tconst struct hfi_platform *plat;\n\tunsigned long freq = 0;\n\n\tplat = hfi_platform_get(version);\n\tif (!plat)\n\t\treturn 0;\n\n\tif (plat->codec_lp_freq)\n\t\tfreq = plat->codec_lp_freq(session_type, codec);\n\n\treturn freq;\n}\n\nint\nhfi_platform_get_codecs(struct venus_core *core, u32 *enc_codecs, u32 *dec_codecs, u32 *count)\n{\n\tconst struct hfi_platform *plat;\n\n\tplat = hfi_platform_get(core->res->hfi_version);\n\tif (!plat)\n\t\treturn -EINVAL;\n\n\tif (plat->codecs)\n\t\tplat->codecs(enc_codecs, dec_codecs, count);\n\n\tif (IS_IRIS2_1(core)) {\n\t\t*enc_codecs &= ~HFI_VIDEO_CODEC_VP8;\n\t\t*dec_codecs &= ~HFI_VIDEO_CODEC_VP8;\n\t}\n\n\treturn 0;\n}\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}