{
  "module_name": "rga.h",
  "hash_id": "b73aa85f0b934741a7297ed1fc145cfbbb24c0036f3dda2e1b48a5a6d13097cd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/rockchip/rga/rga.h",
  "human_readable_source": " \n \n#ifndef __RGA_H__\n#define __RGA_H__\n\n#include <linux/platform_device.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/v4l2-ctrls.h>\n#include <media/v4l2-device.h>\n\n#define RGA_NAME \"rockchip-rga\"\n\nstruct rga_fmt {\n\tu32 fourcc;\n\tint depth;\n\tu8 uv_factor;\n\tu8 y_div;\n\tu8 x_div;\n\tu8 color_swap;\n\tu8 hw_format;\n};\n\nstruct rga_frame {\n\t \n\tu32 width;\n\tu32 height;\n\tu32 colorspace;\n\n\t \n\tstruct v4l2_rect crop;\n\n\t \n\tstruct rga_fmt *fmt;\n\n\t \n\tu32 stride;\n\tu32 size;\n};\n\nstruct rockchip_rga_version {\n\tu32 major;\n\tu32 minor;\n};\n\nstruct rga_ctx {\n\tstruct v4l2_fh fh;\n\tstruct rockchip_rga *rga;\n\tstruct rga_frame in;\n\tstruct rga_frame out;\n\tstruct v4l2_ctrl_handler ctrl_handler;\n\n\t \n\tu32 op;\n\tu32 hflip;\n\tu32 vflip;\n\tu32 rotate;\n\tu32 fill_color;\n};\n\nstruct rockchip_rga {\n\tstruct v4l2_device v4l2_dev;\n\tstruct v4l2_m2m_dev *m2m_dev;\n\tstruct video_device *vfd;\n\n\tstruct device *dev;\n\tstruct regmap *grf;\n\tvoid __iomem *regs;\n\tstruct clk *sclk;\n\tstruct clk *aclk;\n\tstruct clk *hclk;\n\tstruct rockchip_rga_version version;\n\n\t \n\tstruct mutex mutex;\n\t \n\tspinlock_t ctrl_lock;\n\n\tstruct rga_ctx *curr;\n\tdma_addr_t cmdbuf_phy;\n\tvoid *cmdbuf_virt;\n\tunsigned int *src_mmu_pages;\n\tunsigned int *dst_mmu_pages;\n};\n\nstruct rga_frame *rga_get_frame(struct rga_ctx *ctx, enum v4l2_buf_type type);\n\n \nextern const struct vb2_ops rga_qops;\nvoid rga_buf_map(struct vb2_buffer *vb);\n\n \nstatic inline void rga_write(struct rockchip_rga *rga, u32 reg, u32 value)\n{\n\twritel(value, rga->regs + reg);\n};\n\nstatic inline u32 rga_read(struct rockchip_rga *rga, u32 reg)\n{\n\treturn readl(rga->regs + reg);\n};\n\nstatic inline void rga_mod(struct rockchip_rga *rga, u32 reg, u32 val, u32 mask)\n{\n\tu32 temp = rga_read(rga, reg) & ~(mask);\n\n\ttemp |= val & mask;\n\trga_write(rga, reg, temp);\n};\n\nvoid rga_hw_start(struct rockchip_rga *rga);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}