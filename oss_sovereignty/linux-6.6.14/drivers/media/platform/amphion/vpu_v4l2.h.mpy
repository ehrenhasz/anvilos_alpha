{
  "module_name": "vpu_v4l2.h",
  "hash_id": "521c59e43d7aeca3f44f962c2e9baf6ea9bef036cffcdf0b30d4eea6c0997233",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/amphion/vpu_v4l2.h",
  "human_readable_source": " \n \n\n#ifndef _AMPHION_VPU_V4L2_H\n#define _AMPHION_VPU_V4L2_H\n\n#include <linux/videodev2.h>\n\nvoid vpu_inst_lock(struct vpu_inst *inst);\nvoid vpu_inst_unlock(struct vpu_inst *inst);\nvoid vpu_set_buffer_state(struct vb2_v4l2_buffer *vbuf, unsigned int state);\nunsigned int vpu_get_buffer_state(struct vb2_v4l2_buffer *vbuf);\n\nint vpu_v4l2_open(struct file *file, struct vpu_inst *inst);\nint vpu_v4l2_close(struct file *file);\n\nu32 vpu_get_fmt_plane_size(struct vpu_format *fmt, u32 plane_no);\nint vpu_try_fmt_common(struct vpu_inst *inst, struct v4l2_format *f, struct vpu_format *fmt);\nint vpu_process_output_buffer(struct vpu_inst *inst);\nint vpu_process_capture_buffer(struct vpu_inst *inst);\nstruct vb2_v4l2_buffer *vpu_next_src_buf(struct vpu_inst *inst);\nvoid vpu_skip_frame(struct vpu_inst *inst, int count);\nstruct vb2_v4l2_buffer *vpu_find_buf_by_sequence(struct vpu_inst *inst, u32 type, u32 sequence);\nstruct vb2_v4l2_buffer *vpu_find_buf_by_idx(struct vpu_inst *inst, u32 type, u32 idx);\nvoid vpu_v4l2_set_error(struct vpu_inst *inst);\nint vpu_notify_eos(struct vpu_inst *inst);\nint vpu_notify_source_change(struct vpu_inst *inst);\nint vpu_set_last_buffer_dequeued(struct vpu_inst *inst, bool eos);\nvoid vpu_vb2_buffers_return(struct vpu_inst *inst, unsigned int type, enum vb2_buffer_state state);\nint vpu_get_num_buffers(struct vpu_inst *inst, u32 type);\nbool vpu_is_source_empty(struct vpu_inst *inst);\n\ndma_addr_t vpu_get_vb_phy_addr(struct vb2_buffer *vb, u32 plane_no);\nunsigned int vpu_get_vb_length(struct vb2_buffer *vb, u32 plane_no);\nstatic inline struct vpu_format *vpu_get_format(struct vpu_inst *inst, u32 type)\n{\n\tif (V4L2_TYPE_IS_OUTPUT(type))\n\t\treturn &inst->out_format;\n\telse\n\t\treturn &inst->cap_format;\n}\n\nstatic inline char *vpu_type_name(u32 type)\n{\n\treturn V4L2_TYPE_IS_OUTPUT(type) ? \"output\" : \"capture\";\n}\n\nstatic inline int vpu_vb_is_codecconfig(struct vb2_v4l2_buffer *vbuf)\n{\n#ifdef V4L2_BUF_FLAG_CODECCONFIG\n\treturn (vbuf->flags & V4L2_BUF_FLAG_CODECCONFIG) ? 1 : 0;\n#else\n\treturn 0;\n#endif\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}