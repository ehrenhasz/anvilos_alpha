{
  "module_name": "am437x-vpfe.h",
  "hash_id": "d7b88621fa4cf2efbc82538c026723f792979865466234a42c44e937c95b29fa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/ti/am437x/am437x-vpfe.h",
  "human_readable_source": " \n \n\n#ifndef AM437X_VPFE_H\n#define AM437X_VPFE_H\n\n#include <linux/am437x-vpfe.h>\n#include <linux/clk.h>\n#include <linux/completion.h>\n#include <linux/device.h>\n#include <linux/io.h>\n#include <linux/i2c.h>\n#include <linux/videodev2.h>\n\n#include <media/v4l2-dev.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-ioctl.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/videobuf2-dma-contig.h>\n\n#include \"am437x-vpfe_regs.h\"\n\nenum vpfe_pin_pol {\n\tVPFE_PINPOL_POSITIVE = 0,\n\tVPFE_PINPOL_NEGATIVE,\n};\n\nenum vpfe_hw_if_type {\n\t \n\tVPFE_RAW_BAYER = 0,\n\t \n\tVPFE_BT656,\n\t \n\tVPFE_BT656_10BIT,\n\t \n\tVPFE_YCBCR_SYNC_8,\n\t \n\tVPFE_YCBCR_SYNC_16,\n};\n\n \nstruct vpfe_hw_if_param {\n\tenum vpfe_hw_if_type if_type;\n\tenum vpfe_pin_pol hdpol;\n\tenum vpfe_pin_pol vdpol;\n\tunsigned int bus_width;\n};\n\n#define VPFE_MAX_SUBDEV\t\t1\n#define VPFE_MAX_INPUTS\t\t1\n\nstruct vpfe_std_info {\n\tint active_pixels;\n\tint active_lines;\n\t \n\tint frame_format;\n};\n\nstruct vpfe_route {\n\tu32 input;\n\tu32 output;\n};\n\nstruct vpfe_subdev_info {\n\t \n\tint grp_id;\n\t \n\tstruct v4l2_input inputs[VPFE_MAX_INPUTS];\n\t \n\tstruct vpfe_route *routes;\n\t \n\tint can_route;\n\t \n\tstruct vpfe_hw_if_param vpfe_param;\n\tstruct v4l2_subdev *sd;\n};\n\nstruct vpfe_config {\n\t \n\tstruct vpfe_subdev_info sub_devs[VPFE_MAX_SUBDEV];\n\t \n\tstruct v4l2_async_connection *asd[VPFE_MAX_SUBDEV];\n};\n\nstruct vpfe_cap_buffer {\n\tstruct vb2_v4l2_buffer vb;\n\tstruct list_head list;\n};\n\nenum ccdc_pixfmt {\n\tCCDC_PIXFMT_RAW = 0,\n\tCCDC_PIXFMT_YCBCR_16BIT,\n\tCCDC_PIXFMT_YCBCR_8BIT,\n};\n\nenum ccdc_frmfmt {\n\tCCDC_FRMFMT_PROGRESSIVE = 0,\n\tCCDC_FRMFMT_INTERLACED,\n};\n\n \n \nenum ccdc_pixorder {\n\tCCDC_PIXORDER_YCBYCR,\n\tCCDC_PIXORDER_CBYCRY,\n};\n\nenum ccdc_buftype {\n\tCCDC_BUFTYPE_FLD_INTERLEAVED,\n\tCCDC_BUFTYPE_FLD_SEPARATED\n};\n\n\n \nstatic inline u8 ccdc_gamma_width_max_bit(enum vpfe_ccdc_gamma_width width)\n{\n\treturn 15 - width;\n}\n\n \nstatic inline u8 ccdc_data_size_max_bit(enum vpfe_ccdc_data_size sz)\n{\n\treturn sz == VPFE_CCDC_DATA_8BITS ? 7 : 15 - sz;\n}\n\n \nstruct ccdc_params_raw {\n\t \n\tenum ccdc_pixfmt pix_fmt;\n\t \n\tenum ccdc_frmfmt frm_fmt;\n\tstruct v4l2_rect win;\n\t \n\tunsigned int bytesperpixel;\n\t \n\tunsigned int bytesperline;\n\t \n\tenum vpfe_pin_pol fid_pol;\n\t \n\tenum vpfe_pin_pol vd_pol;\n\t \n\tenum vpfe_pin_pol hd_pol;\n\t \n\tenum ccdc_buftype buf_type;\n\t \n\tunsigned char image_invert_enable;\n\t \n\tstruct vpfe_ccdc_config_params_raw config_params;\n};\n\nstruct ccdc_params_ycbcr {\n\t \n\tenum ccdc_pixfmt pix_fmt;\n\t \n\tenum ccdc_frmfmt frm_fmt;\n\tstruct v4l2_rect win;\n\t \n\tunsigned int bytesperpixel;\n\t \n\tunsigned int bytesperline;\n\t \n\tenum vpfe_pin_pol fid_pol;\n\t \n\tenum vpfe_pin_pol vd_pol;\n\t \n\tenum vpfe_pin_pol hd_pol;\n\t \n\tint bt656_enable;\n\t \n\tenum ccdc_pixorder pix_order;\n\t \n\tenum ccdc_buftype buf_type;\n};\n\n \nstruct ccdc_config {\n\t \n\tenum vpfe_hw_if_type if_type;\n\t \n\tstruct ccdc_params_raw bayer;\n\t \n\tstruct ccdc_params_ycbcr ycbcr;\n\t \n\tvoid __iomem *base_addr;\n};\n\nstruct vpfe_ccdc {\n\tstruct ccdc_config ccdc_cfg;\n\tu32 ccdc_ctx[VPFE_REG_END / sizeof(u32)];\n};\n\n \nstruct vpfe_fmt {\n\tu32 fourcc;\n\tu32 code;\n\tu32 bitsperpixel;\n};\n\n \n#define VPFE_NUM_FORMATS\t10\n\nstruct vpfe_device {\n\t \n\t \n\tstruct video_device video_dev;\n\t \n\tstruct v4l2_subdev **sd;\n\t \n\tstruct vpfe_config *cfg;\n\t \n\tstruct v4l2_device v4l2_dev;\n\t \n\tstruct device *pdev;\n\t \n\tstruct v4l2_async_notifier notifier;\n\t \n\tunsigned field;\n\tunsigned sequence;\n\t \n\tstruct vpfe_hw_if_param vpfe_if_params;\n\t \n\tstruct vpfe_subdev_info *current_subdev;\n\t \n\tint current_input;\n\t \n\tstruct vpfe_std_info std_info;\n\t \n\tint std_index;\n\t \n\tunsigned int irq;\n\t \n\tstruct vpfe_cap_buffer *cur_frm;\n\t \n\tstruct vpfe_cap_buffer *next_frm;\n\t \n\tstruct v4l2_format fmt;\n\t \n\tstruct vpfe_fmt *current_vpfe_fmt;\n\tstruct vpfe_fmt\t*active_fmt[VPFE_NUM_FORMATS];\n\tunsigned int num_active_fmt;\n\n\t \n\tstruct v4l2_rect crop;\n\t \n\tstruct vb2_queue buffer_queue;\n\t \n\tstruct list_head dma_queue;\n\t \n\tspinlock_t dma_queue_lock;\n\t \n\tstruct mutex lock;\n\t \n\tu32 field_off;\n\tstruct vpfe_ccdc ccdc;\n\tint stopping;\n\tstruct completion capture_stop;\n};\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}