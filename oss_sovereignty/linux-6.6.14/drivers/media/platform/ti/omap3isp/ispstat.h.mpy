{
  "module_name": "ispstat.h",
  "hash_id": "eb560840aa27bff2ffe50340c21d10f2ba2ab15aef6d119a52ceab838fe015f0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/ti/omap3isp/ispstat.h",
  "human_readable_source": " \n \n\n#ifndef OMAP3_ISP_STAT_H\n#define OMAP3_ISP_STAT_H\n\n#include <linux/types.h>\n#include <linux/omap3isp.h>\n#include <media/v4l2-event.h>\n\n#include \"isp.h\"\n#include \"ispvideo.h\"\n\n#define STAT_MAX_BUFS\t\t5\n#define STAT_NEVENTS\t\t8\n\n#define STAT_BUF_DONE\t\t0\t \n#define STAT_NO_BUF\t\t1\t \n#define STAT_BUF_WAITING_DMA\t2\t \n\nstruct dma_chan;\nstruct ispstat;\n\nstruct ispstat_buffer {\n\tstruct sg_table sgt;\n\tvoid *virt_addr;\n\tdma_addr_t dma_addr;\n\tstruct timespec64 ts;\n\tu32 buf_size;\n\tu32 frame_number;\n\tu16 config_counter;\n\tu8 empty;\n};\n\nstruct ispstat_ops {\n\t \n\tint (*validate_params)(struct ispstat *stat, void *new_conf);\n\n\t \n\tvoid (*set_params)(struct ispstat *stat, void *new_conf);\n\n\t \n\tvoid (*setup_regs)(struct ispstat *stat, void *priv);\n\n\t \n\tvoid (*enable)(struct ispstat *stat, int enable);\n\n\t \n\tint (*busy)(struct ispstat *stat);\n\n\t \n\tint (*buf_process)(struct ispstat *stat);\n};\n\nenum ispstat_state_t {\n\tISPSTAT_DISABLED = 0,\n\tISPSTAT_DISABLING,\n\tISPSTAT_ENABLED,\n\tISPSTAT_ENABLING,\n\tISPSTAT_SUSPENDED,\n};\n\nstruct ispstat {\n\tstruct v4l2_subdev subdev;\n\tstruct media_pad pad;\t \n\n\t \n\tunsigned configured:1;\n\tunsigned update:1;\n\tunsigned buf_processing:1;\n\tunsigned sbl_ovl_recover:1;\n\tu8 inc_config;\n\tatomic_t buf_err;\n\tenum ispstat_state_t state;\t \n\tstruct isp_device *isp;\n\tvoid *priv;\t\t \n\tvoid *recover_priv;\t \n\tstruct mutex ioctl_lock;  \n\n\tconst struct ispstat_ops *ops;\n\n\t \n\tu8 wait_acc_frames;\n\tu16 config_counter;\n\tu32 frame_number;\n\tu32 buf_size;\n\tu32 buf_alloc_size;\n\tstruct dma_chan *dma_ch;\n\tunsigned long event_type;\n\tstruct ispstat_buffer *buf;\n\tstruct ispstat_buffer *active_buf;\n\tstruct ispstat_buffer *locked_buf;\n};\n\nstruct ispstat_generic_config {\n\t \n\tu32 buf_size;\n\tu16 config_counter;\n};\n\nint omap3isp_stat_config(struct ispstat *stat, void *new_conf);\nint omap3isp_stat_request_statistics(struct ispstat *stat,\n\t\t\t\t     struct omap3isp_stat_data *data);\nint omap3isp_stat_request_statistics_time32(struct ispstat *stat,\n\t\t\t\t     struct omap3isp_stat_data_time32 *data);\nint omap3isp_stat_init(struct ispstat *stat, const char *name,\n\t\t       const struct v4l2_subdev_ops *sd_ops);\nvoid omap3isp_stat_cleanup(struct ispstat *stat);\nint omap3isp_stat_subscribe_event(struct v4l2_subdev *subdev,\n\t\t\t\t  struct v4l2_fh *fh,\n\t\t\t\t  struct v4l2_event_subscription *sub);\nint omap3isp_stat_unsubscribe_event(struct v4l2_subdev *subdev,\n\t\t\t\t    struct v4l2_fh *fh,\n\t\t\t\t    struct v4l2_event_subscription *sub);\nint omap3isp_stat_s_stream(struct v4l2_subdev *subdev, int enable);\n\nint omap3isp_stat_busy(struct ispstat *stat);\nint omap3isp_stat_pcr_busy(struct ispstat *stat);\nvoid omap3isp_stat_suspend(struct ispstat *stat);\nvoid omap3isp_stat_resume(struct ispstat *stat);\nint omap3isp_stat_enable(struct ispstat *stat, u8 enable);\nvoid omap3isp_stat_sbl_overflow(struct ispstat *stat);\nvoid omap3isp_stat_isr(struct ispstat *stat);\nvoid omap3isp_stat_isr_frame_sync(struct ispstat *stat);\nvoid omap3isp_stat_dma_isr(struct ispstat *stat);\nint omap3isp_stat_register_entities(struct ispstat *stat,\n\t\t\t\t    struct v4l2_device *vdev);\nvoid omap3isp_stat_unregister_entities(struct ispstat *stat);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}