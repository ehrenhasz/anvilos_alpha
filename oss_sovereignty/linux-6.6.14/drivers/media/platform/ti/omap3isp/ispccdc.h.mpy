{
  "module_name": "ispccdc.h",
  "hash_id": "d1dca43b7084800476fe8220bbb16ed0659c4ce97038f239dc0ce250aad8f87b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/ti/omap3isp/ispccdc.h",
  "human_readable_source": " \n \n\n#ifndef OMAP3_ISP_CCDC_H\n#define OMAP3_ISP_CCDC_H\n\n#include <linux/omap3isp.h>\n#include <linux/workqueue.h>\n\n#include \"ispvideo.h\"\n\nenum ccdc_input_entity {\n\tCCDC_INPUT_NONE,\n\tCCDC_INPUT_PARALLEL,\n\tCCDC_INPUT_CSI2A,\n\tCCDC_INPUT_CCP2B,\n\tCCDC_INPUT_CSI2C\n};\n\n#define CCDC_OUTPUT_MEMORY\t(1 << 0)\n#define CCDC_OUTPUT_PREVIEW\t(1 << 1)\n#define CCDC_OUTPUT_RESIZER\t(1 << 2)\n\n#define\tOMAP3ISP_CCDC_NEVENTS\t16\n\nstruct ispccdc_fpc {\n\tvoid *addr;\n\tdma_addr_t dma;\n\tunsigned int fpnum;\n};\n\nenum ispccdc_lsc_state {\n\tLSC_STATE_STOPPED = 0,\n\tLSC_STATE_STOPPING = 1,\n\tLSC_STATE_RUNNING = 2,\n\tLSC_STATE_RECONFIG = 3,\n};\n\nstruct ispccdc_lsc_config_req {\n\tstruct list_head list;\n\tstruct omap3isp_ccdc_lsc_config config;\n\tunsigned char enable;\n\n\tstruct {\n\t\tvoid *addr;\n\t\tdma_addr_t dma;\n\t\tstruct sg_table sgt;\n\t} table;\n};\n\n \nstruct ispccdc_lsc {\n\tenum ispccdc_lsc_state state;\n\tstruct work_struct table_work;\n\n\t \n\tspinlock_t req_lock;\n\tstruct ispccdc_lsc_config_req *request;\t \n\tstruct ispccdc_lsc_config_req *active;\t \n\tstruct list_head free_queue;\t \n};\n\n#define CCDC_STOP_NOT_REQUESTED\t\t0x00\n#define CCDC_STOP_REQUEST\t\t0x01\n#define CCDC_STOP_EXECUTED\t\t(0x02 | CCDC_STOP_REQUEST)\n#define CCDC_STOP_CCDC_FINISHED\t\t0x04\n#define CCDC_STOP_LSC_FINISHED\t\t0x08\n#define CCDC_STOP_FINISHED\t\t\\\n\t(CCDC_STOP_EXECUTED | CCDC_STOP_CCDC_FINISHED | CCDC_STOP_LSC_FINISHED)\n\n#define CCDC_EVENT_VD1\t\t\t0x10\n#define CCDC_EVENT_VD0\t\t\t0x20\n#define CCDC_EVENT_LSC_DONE\t\t0x40\n\n \n#define CCDC_PAD_SINK\t\t\t0\n#define CCDC_PAD_SOURCE_OF\t\t1\n#define CCDC_PAD_SOURCE_VP\t\t2\n#define CCDC_PADS_NUM\t\t\t3\n\n#define CCDC_FIELD_TOP\t\t\t1\n#define CCDC_FIELD_BOTTOM\t\t2\n#define CCDC_FIELD_BOTH\t\t\t3\n\n \nstruct isp_ccdc_device {\n\tstruct v4l2_subdev subdev;\n\tstruct media_pad pads[CCDC_PADS_NUM];\n\tstruct v4l2_mbus_framefmt formats[CCDC_PADS_NUM];\n\tstruct v4l2_rect crop;\n\n\tenum ccdc_input_entity input;\n\tunsigned int output;\n\tstruct isp_video video_out;\n\n\tunsigned int alaw:1,\n\t\t     lpf:1,\n\t\t     obclamp:1,\n\t\t     fpc_en:1;\n\tstruct omap3isp_ccdc_blcomp blcomp;\n\tstruct omap3isp_ccdc_bclamp clamp;\n\tstruct ispccdc_fpc fpc;\n\tstruct ispccdc_lsc lsc;\n\tunsigned int update;\n\tunsigned int shadow_update;\n\n\tbool bt656;\n\tunsigned int fields;\n\n\tunsigned int underrun:1;\n\tenum isp_pipeline_stream_state state;\n\tspinlock_t lock;\n\twait_queue_head_t wait;\n\tunsigned int stopping;\n\tbool running;\n\tstruct mutex ioctl_lock;\n};\n\nstruct isp_device;\n\nint omap3isp_ccdc_init(struct isp_device *isp);\nvoid omap3isp_ccdc_cleanup(struct isp_device *isp);\nint omap3isp_ccdc_register_entities(struct isp_ccdc_device *ccdc,\n\tstruct v4l2_device *vdev);\nvoid omap3isp_ccdc_unregister_entities(struct isp_ccdc_device *ccdc);\n\nint omap3isp_ccdc_busy(struct isp_ccdc_device *isp_ccdc);\nint omap3isp_ccdc_isr(struct isp_ccdc_device *isp_ccdc, u32 events);\nvoid omap3isp_ccdc_restore_context(struct isp_device *isp);\nvoid omap3isp_ccdc_max_rate(struct isp_ccdc_device *ccdc,\n\tunsigned int *max_rate);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}