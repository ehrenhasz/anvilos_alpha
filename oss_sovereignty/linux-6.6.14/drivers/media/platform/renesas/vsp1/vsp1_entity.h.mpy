{
  "module_name": "vsp1_entity.h",
  "hash_id": "e3880704b5cab5a931804fa4f6fb14ee2481b39e2f925a852569ffb6311302f5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/renesas/vsp1/vsp1_entity.h",
  "human_readable_source": " \n \n#ifndef __VSP1_ENTITY_H__\n#define __VSP1_ENTITY_H__\n\n#include <linux/list.h>\n#include <linux/mutex.h>\n\n#include <media/v4l2-subdev.h>\n\nstruct vsp1_device;\nstruct vsp1_dl_body;\nstruct vsp1_dl_list;\nstruct vsp1_pipeline;\nstruct vsp1_partition;\nstruct vsp1_partition_window;\n\nenum vsp1_entity_type {\n\tVSP1_ENTITY_BRS,\n\tVSP1_ENTITY_BRU,\n\tVSP1_ENTITY_CLU,\n\tVSP1_ENTITY_HGO,\n\tVSP1_ENTITY_HGT,\n\tVSP1_ENTITY_HSI,\n\tVSP1_ENTITY_HST,\n\tVSP1_ENTITY_LIF,\n\tVSP1_ENTITY_LUT,\n\tVSP1_ENTITY_RPF,\n\tVSP1_ENTITY_SRU,\n\tVSP1_ENTITY_UDS,\n\tVSP1_ENTITY_UIF,\n\tVSP1_ENTITY_WPF,\n};\n\n#define VSP1_ENTITY_MAX_INPUTS\t\t5\t \n\n \nstruct vsp1_route {\n\tenum vsp1_entity_type type;\n\tunsigned int index;\n\tunsigned int reg;\n\tunsigned int inputs[VSP1_ENTITY_MAX_INPUTS];\n\tunsigned int output;\n};\n\n \nstruct vsp1_entity_operations {\n\tvoid (*destroy)(struct vsp1_entity *);\n\tvoid (*configure_stream)(struct vsp1_entity *, struct vsp1_pipeline *,\n\t\t\t\t struct vsp1_dl_list *, struct vsp1_dl_body *);\n\tvoid (*configure_frame)(struct vsp1_entity *, struct vsp1_pipeline *,\n\t\t\t\tstruct vsp1_dl_list *, struct vsp1_dl_body *);\n\tvoid (*configure_partition)(struct vsp1_entity *,\n\t\t\t\t    struct vsp1_pipeline *,\n\t\t\t\t    struct vsp1_dl_list *,\n\t\t\t\t    struct vsp1_dl_body *);\n\tunsigned int (*max_width)(struct vsp1_entity *, struct vsp1_pipeline *);\n\tvoid (*partition)(struct vsp1_entity *, struct vsp1_pipeline *,\n\t\t\t  struct vsp1_partition *, unsigned int,\n\t\t\t  struct vsp1_partition_window *);\n};\n\nstruct vsp1_entity {\n\tstruct vsp1_device *vsp1;\n\n\tconst struct vsp1_entity_operations *ops;\n\n\tenum vsp1_entity_type type;\n\tunsigned int index;\n\tconst struct vsp1_route *route;\n\n\tstruct vsp1_pipeline *pipe;\n\n\tstruct list_head list_dev;\n\tstruct list_head list_pipe;\n\n\tstruct media_pad *pads;\n\tunsigned int source_pad;\n\n\tstruct vsp1_entity **sources;\n\tstruct vsp1_entity *sink;\n\tunsigned int sink_pad;\n\n\tstruct v4l2_subdev subdev;\n\tstruct v4l2_subdev_state *config;\n\n\tstruct mutex lock;\t \n};\n\nstatic inline struct vsp1_entity *to_vsp1_entity(struct v4l2_subdev *subdev)\n{\n\treturn container_of(subdev, struct vsp1_entity, subdev);\n}\n\nint vsp1_entity_init(struct vsp1_device *vsp1, struct vsp1_entity *entity,\n\t\t     const char *name, unsigned int num_pads,\n\t\t     const struct v4l2_subdev_ops *ops, u32 function);\nvoid vsp1_entity_destroy(struct vsp1_entity *entity);\n\nint vsp1_entity_link_setup(struct media_entity *entity,\n\t\t\t   const struct media_pad *local,\n\t\t\t   const struct media_pad *remote, u32 flags);\n\nstruct v4l2_subdev_state *\nvsp1_entity_get_pad_config(struct vsp1_entity *entity,\n\t\t\t   struct v4l2_subdev_state *sd_state,\n\t\t\t   enum v4l2_subdev_format_whence which);\nstruct v4l2_mbus_framefmt *\nvsp1_entity_get_pad_format(struct vsp1_entity *entity,\n\t\t\t   struct v4l2_subdev_state *sd_state,\n\t\t\t   unsigned int pad);\nstruct v4l2_rect *\nvsp1_entity_get_pad_selection(struct vsp1_entity *entity,\n\t\t\t      struct v4l2_subdev_state *sd_state,\n\t\t\t      unsigned int pad, unsigned int target);\nint vsp1_entity_init_cfg(struct v4l2_subdev *subdev,\n\t\t\t struct v4l2_subdev_state *sd_state);\n\nvoid vsp1_entity_route_setup(struct vsp1_entity *entity,\n\t\t\t     struct vsp1_pipeline *pipe,\n\t\t\t     struct vsp1_dl_body *dlb);\n\nvoid vsp1_entity_configure_stream(struct vsp1_entity *entity,\n\t\t\t\t  struct vsp1_pipeline *pipe,\n\t\t\t\t  struct vsp1_dl_list *dl,\n\t\t\t\t  struct vsp1_dl_body *dlb);\n\nvoid vsp1_entity_configure_frame(struct vsp1_entity *entity,\n\t\t\t\t struct vsp1_pipeline *pipe,\n\t\t\t\t struct vsp1_dl_list *dl,\n\t\t\t\t struct vsp1_dl_body *dlb);\n\nvoid vsp1_entity_configure_partition(struct vsp1_entity *entity,\n\t\t\t\t     struct vsp1_pipeline *pipe,\n\t\t\t\t     struct vsp1_dl_list *dl,\n\t\t\t\t     struct vsp1_dl_body *dlb);\n\nstruct media_pad *vsp1_entity_remote_pad(struct media_pad *pad);\n\nint vsp1_subdev_get_pad_format(struct v4l2_subdev *subdev,\n\t\t\t       struct v4l2_subdev_state *sd_state,\n\t\t\t       struct v4l2_subdev_format *fmt);\nint vsp1_subdev_set_pad_format(struct v4l2_subdev *subdev,\n\t\t\t       struct v4l2_subdev_state *sd_state,\n\t\t\t       struct v4l2_subdev_format *fmt,\n\t\t\t       const unsigned int *codes, unsigned int ncodes,\n\t\t\t       unsigned int min_width, unsigned int min_height,\n\t\t\t       unsigned int max_width, unsigned int max_height);\nint vsp1_subdev_enum_mbus_code(struct v4l2_subdev *subdev,\n\t\t\t       struct v4l2_subdev_state *sd_state,\n\t\t\t       struct v4l2_subdev_mbus_code_enum *code,\n\t\t\t       const unsigned int *codes, unsigned int ncodes);\nint vsp1_subdev_enum_frame_size(struct v4l2_subdev *subdev,\n\t\t\t\tstruct v4l2_subdev_state *sd_state,\n\t\t\t\tstruct v4l2_subdev_frame_size_enum *fse,\n\t\t\t\tunsigned int min_w, unsigned int min_h,\n\t\t\t\tunsigned int max_w, unsigned int max_h);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}