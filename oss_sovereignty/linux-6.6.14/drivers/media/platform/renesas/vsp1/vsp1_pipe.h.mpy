{
  "module_name": "vsp1_pipe.h",
  "hash_id": "7c86d74e38d5f279c977dcbc8c6134b5a79719e5aa8abc2e0a5ff2745be65f34",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/renesas/vsp1/vsp1_pipe.h",
  "human_readable_source": " \n \n#ifndef __VSP1_PIPE_H__\n#define __VSP1_PIPE_H__\n\n#include <linux/kref.h>\n#include <linux/list.h>\n#include <linux/spinlock.h>\n#include <linux/wait.h>\n\n#include <media/media-entity.h>\n\nstruct vsp1_dl_list;\nstruct vsp1_rwpf;\n\n \nstruct vsp1_format_info {\n\tu32 fourcc;\n\tunsigned int mbus;\n\tunsigned int hwfmt;\n\tunsigned int swap;\n\tunsigned int planes;\n\tunsigned int bpp[3];\n\tbool swap_yc;\n\tbool swap_uv;\n\tunsigned int hsub;\n\tunsigned int vsub;\n\tbool alpha;\n};\n\nenum vsp1_pipeline_state {\n\tVSP1_PIPELINE_STOPPED,\n\tVSP1_PIPELINE_RUNNING,\n\tVSP1_PIPELINE_STOPPING,\n};\n\n \nstruct vsp1_partition_window {\n\tunsigned int left;\n\tunsigned int width;\n};\n\n \nstruct vsp1_partition {\n\tstruct vsp1_partition_window rpf;\n\tstruct vsp1_partition_window uds_sink;\n\tstruct vsp1_partition_window uds_source;\n\tstruct vsp1_partition_window sru;\n\tstruct vsp1_partition_window wpf;\n};\n\n \nstruct vsp1_pipeline {\n\tstruct media_pipeline pipe;\n\n\tspinlock_t irqlock;\n\tenum vsp1_pipeline_state state;\n\twait_queue_head_t wq;\n\n\tvoid (*frame_end)(struct vsp1_pipeline *pipe, unsigned int completion);\n\n\tstruct mutex lock;\n\tstruct kref kref;\n\tunsigned int stream_count;\n\tunsigned int buffers_ready;\n\tunsigned int sequence;\n\n\tunsigned int num_inputs;\n\tstruct vsp1_rwpf *inputs[VSP1_MAX_RPF];\n\tstruct vsp1_rwpf *output;\n\tstruct vsp1_entity *brx;\n\tstruct vsp1_entity *hgo;\n\tstruct vsp1_entity *hgt;\n\tstruct vsp1_entity *lif;\n\tstruct vsp1_entity *uds;\n\tstruct vsp1_entity *uds_input;\n\n\t \n\tstruct list_head entities;\n\n\tstruct vsp1_dl_body *stream_config;\n\tbool configured;\n\tbool interlaced;\n\n\tunsigned int partitions;\n\tstruct vsp1_partition *partition;\n\tstruct vsp1_partition *part_table;\n\n\tu32 underrun_count;\n};\n\nvoid vsp1_pipeline_reset(struct vsp1_pipeline *pipe);\nvoid vsp1_pipeline_init(struct vsp1_pipeline *pipe);\n\nvoid vsp1_pipeline_run(struct vsp1_pipeline *pipe);\nbool vsp1_pipeline_stopped(struct vsp1_pipeline *pipe);\nint vsp1_pipeline_stop(struct vsp1_pipeline *pipe);\nbool vsp1_pipeline_ready(struct vsp1_pipeline *pipe);\n\nvoid vsp1_pipeline_frame_end(struct vsp1_pipeline *pipe);\n\nvoid vsp1_pipeline_propagate_alpha(struct vsp1_pipeline *pipe,\n\t\t\t\t   struct vsp1_dl_body *dlb,\n\t\t\t\t   unsigned int alpha);\n\nvoid vsp1_pipeline_propagate_partition(struct vsp1_pipeline *pipe,\n\t\t\t\t       struct vsp1_partition *partition,\n\t\t\t\t       unsigned int index,\n\t\t\t\t       struct vsp1_partition_window *window);\n\nconst struct vsp1_format_info *vsp1_get_format_info(struct vsp1_device *vsp1,\n\t\t\t\t\t\t    u32 fourcc);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}