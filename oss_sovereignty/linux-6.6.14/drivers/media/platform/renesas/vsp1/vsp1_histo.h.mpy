{
  "module_name": "vsp1_histo.h",
  "hash_id": "fb67d5ac25f3217d29e727d7838a26c3673c39383d3352f0fc4d43293a46fac6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/renesas/vsp1/vsp1_histo.h",
  "human_readable_source": " \n \n#ifndef __VSP1_HISTO_H__\n#define __VSP1_HISTO_H__\n\n#include <linux/list.h>\n#include <linux/mutex.h>\n#include <linux/spinlock.h>\n\n#include <media/media-entity.h>\n#include <media/v4l2-dev.h>\n#include <media/videobuf2-v4l2.h>\n\n#include \"vsp1_entity.h\"\n\nstruct vsp1_device;\n\n#define HISTO_PAD_SINK\t\t\t\t0\n#define HISTO_PAD_SOURCE\t\t\t1\n\nstruct vsp1_histogram_buffer {\n\tstruct vb2_v4l2_buffer buf;\n\tstruct list_head queue;\n\tvoid *addr;\n};\n\nstruct vsp1_histogram {\n\tstruct vsp1_entity entity;\n\tstruct video_device video;\n\tstruct media_pad pad;\n\n\tconst u32 *formats;\n\tunsigned int num_formats;\n\tsize_t data_size;\n\tu32 meta_format;\n\n\tstruct mutex lock;\n\tstruct vb2_queue queue;\n\n\tspinlock_t irqlock;\n\tstruct list_head irqqueue;\n\n\twait_queue_head_t wait_queue;\n\tbool readout;\n};\n\nstatic inline struct vsp1_histogram *vdev_to_histo(struct video_device *vdev)\n{\n\treturn container_of(vdev, struct vsp1_histogram, video);\n}\n\nstatic inline struct vsp1_histogram *subdev_to_histo(struct v4l2_subdev *subdev)\n{\n\treturn container_of(subdev, struct vsp1_histogram, entity.subdev);\n}\n\nint vsp1_histogram_init(struct vsp1_device *vsp1, struct vsp1_histogram *histo,\n\t\t\tenum vsp1_entity_type type, const char *name,\n\t\t\tconst struct vsp1_entity_operations *ops,\n\t\t\tconst unsigned int *formats, unsigned int num_formats,\n\t\t\tsize_t data_size, u32 meta_format);\nvoid vsp1_histogram_destroy(struct vsp1_entity *entity);\n\nstruct vsp1_histogram_buffer *\nvsp1_histogram_buffer_get(struct vsp1_histogram *histo);\nvoid vsp1_histogram_buffer_complete(struct vsp1_histogram *histo,\n\t\t\t\t    struct vsp1_histogram_buffer *buf,\n\t\t\t\t    size_t size);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}