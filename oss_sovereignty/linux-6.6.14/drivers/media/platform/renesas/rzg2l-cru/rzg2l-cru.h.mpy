{
  "module_name": "rzg2l-cru.h",
  "hash_id": "9fb4e24ff2425ac0db6819854f4ce119c81a4575f823faeba92844e4b9350a59",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/renesas/rzg2l-cru/rzg2l-cru.h",
  "human_readable_source": " \n \n\n#ifndef __RZG2L_CRU__\n#define __RZG2L_CRU__\n\n#include <linux/reset.h>\n\n#include <media/v4l2-async.h>\n#include <media/v4l2-dev.h>\n#include <media/v4l2-device.h>\n#include <media/videobuf2-v4l2.h>\n\n \n#define RZG2L_CRU_HW_BUFFER_MAX\t\t8\n#define RZG2L_CRU_HW_BUFFER_DEFAULT\t3\n\n \n#define RZG2L_CRU_HW_BUFFER_MASK\t0x1ff\n\n \n#define RZG2L_CRU_CSI2_VCHANNEL\t\t4\n\n#define RZG2L_CRU_MIN_INPUT_WIDTH\t320\n#define RZG2L_CRU_MAX_INPUT_WIDTH\t2800\n#define RZG2L_CRU_MIN_INPUT_HEIGHT\t240\n#define RZG2L_CRU_MAX_INPUT_HEIGHT\t4095\n\n \nenum rzg2l_cru_dma_state {\n\tRZG2L_CRU_DMA_STOPPED = 0,\n\tRZG2L_CRU_DMA_STARTING,\n\tRZG2L_CRU_DMA_RUNNING,\n\tRZG2L_CRU_DMA_STOPPING,\n};\n\nstruct rzg2l_cru_csi {\n\tstruct v4l2_async_connection *asd;\n\tstruct v4l2_subdev *subdev;\n\tu32 channel;\n};\n\nstruct rzg2l_cru_ip {\n\tstruct v4l2_subdev subdev;\n\tstruct media_pad pads[2];\n\tstruct v4l2_async_notifier notifier;\n\tstruct v4l2_subdev *remote;\n};\n\n \nstruct rzg2l_cru_dev {\n\tstruct device *dev;\n\tvoid __iomem *base;\n\tconst struct rzg2l_cru_info *info;\n\n\tstruct reset_control *presetn;\n\tstruct reset_control *aresetn;\n\n\tstruct clk *vclk;\n\n\tint image_conv_irq;\n\n\tstruct video_device vdev;\n\tstruct v4l2_device v4l2_dev;\n\tu8 num_buf;\n\n\tstruct v4l2_async_notifier notifier;\n\n\tstruct rzg2l_cru_ip ip;\n\tstruct rzg2l_cru_csi csi;\n\tstruct media_device mdev;\n\tstruct mutex mdev_lock;\n\tstruct media_pad pad;\n\n\tstruct mutex lock;\n\tstruct vb2_queue queue;\n\tvoid *scratch;\n\tdma_addr_t scratch_phys;\n\n\tspinlock_t qlock;\n\tstruct vb2_v4l2_buffer *queue_buf[RZG2L_CRU_HW_BUFFER_MAX];\n\tstruct list_head buf_list;\n\tunsigned int sequence;\n\tenum rzg2l_cru_dma_state state;\n\n\tstruct v4l2_pix_format format;\n};\n\nvoid rzg2l_cru_vclk_unprepare(struct rzg2l_cru_dev *cru);\nint rzg2l_cru_vclk_prepare(struct rzg2l_cru_dev *cru);\n\nint rzg2l_cru_start_image_processing(struct rzg2l_cru_dev *cru);\nvoid rzg2l_cru_stop_image_processing(struct rzg2l_cru_dev *cru);\n\nint rzg2l_cru_dma_register(struct rzg2l_cru_dev *cru);\nvoid rzg2l_cru_dma_unregister(struct rzg2l_cru_dev *cru);\n\nint rzg2l_cru_video_register(struct rzg2l_cru_dev *cru);\nvoid rzg2l_cru_video_unregister(struct rzg2l_cru_dev *cru);\n\nconst struct v4l2_format_info *rzg2l_cru_format_from_pixel(u32 format);\n\nint rzg2l_cru_ip_subdev_register(struct rzg2l_cru_dev *cru);\nvoid rzg2l_cru_ip_subdev_unregister(struct rzg2l_cru_dev *cru);\nstruct v4l2_mbus_framefmt *rzg2l_cru_ip_get_src_fmt(struct rzg2l_cru_dev *cru);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}