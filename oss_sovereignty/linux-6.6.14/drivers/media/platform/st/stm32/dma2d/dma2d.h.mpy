{
  "module_name": "dma2d.h",
  "hash_id": "c9707fb336e70743eae52e87f45f5c15207110db7dd57c697a123f1586113fb1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/st/stm32/dma2d/dma2d.h",
  "human_readable_source": " \n \n\n#ifndef __DMA2D_H__\n#define __DMA2D_H__\n\n#include <linux/platform_device.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-ctrls.h>\n\n#define DMA2D_NAME \"stm-dma2d\"\n#define BUS_INFO \"platform:stm-dma2d\"\nenum dma2d_op_mode {\n\tDMA2D_MODE_M2M,\n\tDMA2D_MODE_M2M_FPC,\n\tDMA2D_MODE_M2M_BLEND,\n\tDMA2D_MODE_R2M\n};\n\nenum dma2d_cmode {\n\t \n\tDMA2D_CMODE_ARGB8888,\n\tDMA2D_CMODE_RGB888,\n\tDMA2D_CMODE_RGB565,\n\tDMA2D_CMODE_ARGB1555,\n\tDMA2D_CMODE_ARGB4444,\n\t \n\tDMA2D_CMODE_L8,\n\tDMA2D_CMODE_AL44,\n\tDMA2D_CMODE_AL88,\n\tDMA2D_CMODE_L4,\n\tDMA2D_CMODE_A8,\n\tDMA2D_CMODE_A4\n};\n\nenum dma2d_alpha_mode {\n\tDMA2D_ALPHA_MODE_NO_MODIF,\n\tDMA2D_ALPHA_MODE_REPLACE,\n\tDMA2D_ALPHA_MODE_COMBINE\n};\n\nstruct dma2d_fmt {\n\tu32\tfourcc;\n\tint\tdepth;\n\tenum dma2d_cmode cmode;\n};\n\nstruct dma2d_frame {\n\t \n\tu32\twidth;\n\tu32\theight;\n\t \n\tu32\tc_width;\n\tu32\tc_height;\n\t \n\tu32\to_width;\n\tu32\to_height;\n\tu32\tbottom;\n\tu32\tright;\n\tu16\tline_offset;\n\t \n\tstruct dma2d_fmt *fmt;\n\t \n\tu8\ta_rgb[4];\n\t \n\tenum dma2d_alpha_mode a_mode;\n\tu32 size;\n\tunsigned int\tsequence;\n};\n\nstruct dma2d_ctx {\n\tstruct v4l2_fh fh;\n\tstruct dma2d_dev\t*dev;\n\tstruct dma2d_frame\tcap;\n\tstruct dma2d_frame\tout;\n\tstruct dma2d_frame\tbg;\n\t \n\tenum dma2d_op_mode\top_mode;\n\tstruct v4l2_ctrl_handler ctrl_handler;\n\tenum v4l2_colorspace\tcolorspace;\n\tenum v4l2_ycbcr_encoding ycbcr_enc;\n\tenum v4l2_xfer_func\txfer_func;\n\tenum v4l2_quantization\tquant;\n};\n\nstruct dma2d_dev {\n\tstruct v4l2_device\tv4l2_dev;\n\tstruct v4l2_m2m_dev\t*m2m_dev;\n\tstruct video_device\t*vfd;\n\t \n\tstruct mutex\t\tmutex;\n\t \n\tspinlock_t\t\tctrl_lock;\n\tatomic_t\t\tnum_inst;\n\tvoid __iomem\t\t*regs;\n\tstruct clk\t\t*gate;\n\tstruct dma2d_ctx\t*curr;\n\tint irq;\n};\n\nvoid dma2d_start(struct dma2d_dev *d);\nu32 dma2d_get_int(struct dma2d_dev *d);\nvoid dma2d_clear_int(struct dma2d_dev *d);\nvoid dma2d_config_out(struct dma2d_dev *d, struct dma2d_frame *frm,\n\t\t      dma_addr_t o_addr);\nvoid dma2d_config_fg(struct dma2d_dev *d, struct dma2d_frame *frm,\n\t\t     dma_addr_t f_addr);\nvoid dma2d_config_bg(struct dma2d_dev *d, struct dma2d_frame *frm,\n\t\t     dma_addr_t b_addr);\nvoid dma2d_config_common(struct dma2d_dev *d, enum dma2d_op_mode op_mode,\n\t\t\t u16 width, u16 height);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}