{
  "module_name": "c8sectpfe-debugfs.c",
  "hash_id": "679999d8e06524dfbbcff14d0b453654b66fdd2e9f92a59216477c393229a1c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-debugfs.c",
  "human_readable_source": "\n \n#include <linux/debugfs.h>\n#include <linux/device.h>\n#include <linux/interrupt.h>\n#include <linux/io.h>\n#include <linux/kernel.h>\n#include <linux/seq_file.h>\n#include <linux/slab.h>\n#include <linux/types.h>\n\n#include \"c8sectpfe-debugfs.h\"\n\n#define dump_register(nm ...)\t\t\t\\\n{\t\t\t\t\t\t\\\n\t.name\t= #nm,\t\t\t\t\\\n\t.offset\t= nm,\t\t\t\t\\\n}\n\nstatic const struct debugfs_reg32 fei_sys_regs[] = {\n\tdump_register(SYS_INPUT_ERR_STATUS),\n\tdump_register(SYS_OTHER_ERR_STATUS),\n\tdump_register(SYS_INPUT_ERR_MASK),\n\tdump_register(SYS_DMA_ROUTE),\n\tdump_register(SYS_INPUT_CLKEN),\n\tdump_register(IBENABLE_MASK),\n\tdump_register(SYS_OTHER_CLKEN),\n\tdump_register(SYS_CFG_NUM_IB),\n\tdump_register(SYS_CFG_NUM_MIB),\n\tdump_register(SYS_CFG_NUM_SWTS),\n\tdump_register(SYS_CFG_NUM_TSOUT),\n\tdump_register(SYS_CFG_NUM_CCSC),\n\tdump_register(SYS_CFG_NUM_RAM),\n\tdump_register(SYS_CFG_NUM_TP),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(0)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(0)),\n\tdump_register(C8SECTPFE_IB_PID_SET(0)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(0)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(0)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(0)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(0)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(0)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(0)),\n\tdump_register(C8SECTPFE_IB_STAT(0)),\n\tdump_register(C8SECTPFE_IB_MASK(0)),\n\tdump_register(C8SECTPFE_IB_SYS(0)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(1)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(1)),\n\tdump_register(C8SECTPFE_IB_PID_SET(1)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(1)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(1)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(1)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(1)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(1)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(1)),\n\tdump_register(C8SECTPFE_IB_STAT(1)),\n\tdump_register(C8SECTPFE_IB_MASK(1)),\n\tdump_register(C8SECTPFE_IB_SYS(1)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(2)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(2)),\n\tdump_register(C8SECTPFE_IB_PID_SET(2)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(2)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(2)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(2)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(2)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(2)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(2)),\n\tdump_register(C8SECTPFE_IB_STAT(2)),\n\tdump_register(C8SECTPFE_IB_MASK(2)),\n\tdump_register(C8SECTPFE_IB_SYS(2)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(3)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(3)),\n\tdump_register(C8SECTPFE_IB_PID_SET(3)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(3)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(3)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(3)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(3)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(3)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(3)),\n\tdump_register(C8SECTPFE_IB_STAT(3)),\n\tdump_register(C8SECTPFE_IB_MASK(3)),\n\tdump_register(C8SECTPFE_IB_SYS(3)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(4)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(4)),\n\tdump_register(C8SECTPFE_IB_PID_SET(4)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(4)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(4)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(4)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(4)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(4)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(4)),\n\tdump_register(C8SECTPFE_IB_STAT(4)),\n\tdump_register(C8SECTPFE_IB_MASK(4)),\n\tdump_register(C8SECTPFE_IB_SYS(4)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(5)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(5)),\n\tdump_register(C8SECTPFE_IB_PID_SET(5)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(5)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(5)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(5)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(5)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(5)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(5)),\n\tdump_register(C8SECTPFE_IB_STAT(5)),\n\tdump_register(C8SECTPFE_IB_MASK(5)),\n\tdump_register(C8SECTPFE_IB_SYS(5)),\n\n\tdump_register(C8SECTPFE_IB_IP_FMT_CFG(6)),\n\tdump_register(C8SECTPFE_IB_TAGBYTES_CFG(6)),\n\tdump_register(C8SECTPFE_IB_PID_SET(6)),\n\tdump_register(C8SECTPFE_IB_PKT_LEN(6)),\n\tdump_register(C8SECTPFE_IB_BUFF_STRT(6)),\n\tdump_register(C8SECTPFE_IB_BUFF_END(6)),\n\tdump_register(C8SECTPFE_IB_READ_PNT(6)),\n\tdump_register(C8SECTPFE_IB_WRT_PNT(6)),\n\tdump_register(C8SECTPFE_IB_PRI_THRLD(6)),\n\tdump_register(C8SECTPFE_IB_STAT(6)),\n\tdump_register(C8SECTPFE_IB_MASK(6)),\n\tdump_register(C8SECTPFE_IB_SYS(6)),\n\n\tdump_register(DMA_CPU_ID),\n\tdump_register(DMA_CPU_VCR),\n\tdump_register(DMA_CPU_RUN),\n\tdump_register(DMA_CPU_PC),\n\n\tdump_register(DMA_PER_TPn_DREQ_MASK),\n\tdump_register(DMA_PER_TPn_DACK_SET),\n\tdump_register(DMA_PER_TPn_DREQ),\n\tdump_register(DMA_PER_TPn_DACK),\n\tdump_register(DMA_PER_DREQ_MODE),\n\tdump_register(DMA_PER_STBUS_SYNC),\n\tdump_register(DMA_PER_STBUS_ACCESS),\n\tdump_register(DMA_PER_STBUS_ADDRESS),\n\tdump_register(DMA_PER_IDLE_INT),\n\tdump_register(DMA_PER_PRIORITY),\n\tdump_register(DMA_PER_MAX_OPCODE),\n\tdump_register(DMA_PER_MAX_CHUNK),\n\tdump_register(DMA_PER_PAGE_SIZE),\n\tdump_register(DMA_PER_MBOX_STATUS),\n\tdump_register(DMA_PER_MBOX_SET),\n\tdump_register(DMA_PER_MBOX_CLEAR),\n\tdump_register(DMA_PER_MBOX_MASK),\n\tdump_register(DMA_PER_INJECT_PKT_SRC),\n\tdump_register(DMA_PER_INJECT_PKT_DEST),\n\tdump_register(DMA_PER_INJECT_PKT_ADDR),\n\tdump_register(DMA_PER_INJECT_PKT),\n\tdump_register(DMA_PER_PAT_PTR_INIT),\n\tdump_register(DMA_PER_PAT_PTR),\n\tdump_register(DMA_PER_SLEEP_MASK),\n\tdump_register(DMA_PER_SLEEP_COUNTER),\n\n\tdump_register(DMA_FIRMWARE_VERSION),\n\tdump_register(DMA_PTRREC_BASE),\n\tdump_register(DMA_PTRREC_INPUT_OFFSET),\n\tdump_register(DMA_ERRREC_BASE),\n\n\tdump_register(DMA_ERROR_RECORD(0)),\n\tdump_register(DMA_ERROR_RECORD(1)),\n\tdump_register(DMA_ERROR_RECORD(2)),\n\tdump_register(DMA_ERROR_RECORD(3)),\n\tdump_register(DMA_ERROR_RECORD(4)),\n\tdump_register(DMA_ERROR_RECORD(5)),\n\tdump_register(DMA_ERROR_RECORD(6)),\n\tdump_register(DMA_ERROR_RECORD(7)),\n\tdump_register(DMA_ERROR_RECORD(8)),\n\tdump_register(DMA_ERROR_RECORD(9)),\n\tdump_register(DMA_ERROR_RECORD(10)),\n\tdump_register(DMA_ERROR_RECORD(11)),\n\tdump_register(DMA_ERROR_RECORD(12)),\n\tdump_register(DMA_ERROR_RECORD(13)),\n\tdump_register(DMA_ERROR_RECORD(14)),\n\tdump_register(DMA_ERROR_RECORD(15)),\n\tdump_register(DMA_ERROR_RECORD(16)),\n\tdump_register(DMA_ERROR_RECORD(17)),\n\tdump_register(DMA_ERROR_RECORD(18)),\n\tdump_register(DMA_ERROR_RECORD(19)),\n\tdump_register(DMA_ERROR_RECORD(20)),\n\tdump_register(DMA_ERROR_RECORD(21)),\n\tdump_register(DMA_ERROR_RECORD(22)),\n\n\tdump_register(DMA_IDLE_REQ),\n\tdump_register(DMA_FIRMWARE_CONFIG),\n\n\tdump_register(PIDF_BASE(0)),\n\tdump_register(PIDF_BASE(1)),\n\tdump_register(PIDF_BASE(2)),\n\tdump_register(PIDF_BASE(3)),\n\tdump_register(PIDF_BASE(4)),\n\tdump_register(PIDF_BASE(5)),\n\tdump_register(PIDF_BASE(6)),\n\tdump_register(PIDF_BASE(7)),\n\tdump_register(PIDF_BASE(8)),\n\tdump_register(PIDF_BASE(9)),\n\tdump_register(PIDF_BASE(10)),\n\tdump_register(PIDF_BASE(11)),\n\tdump_register(PIDF_BASE(12)),\n\tdump_register(PIDF_BASE(13)),\n\tdump_register(PIDF_BASE(14)),\n\tdump_register(PIDF_BASE(15)),\n\tdump_register(PIDF_BASE(16)),\n\tdump_register(PIDF_BASE(17)),\n\tdump_register(PIDF_BASE(18)),\n\tdump_register(PIDF_BASE(19)),\n\tdump_register(PIDF_BASE(20)),\n\tdump_register(PIDF_BASE(21)),\n\tdump_register(PIDF_BASE(22)),\n\tdump_register(PIDF_LEAK_ENABLE),\n\tdump_register(PIDF_LEAK_STATUS),\n\tdump_register(PIDF_LEAK_COUNT_RESET),\n\tdump_register(PIDF_LEAK_COUNTER),\n};\n\nvoid c8sectpfe_debugfs_init(struct c8sectpfei *fei)\n{\n\tfei->regset =  devm_kzalloc(fei->dev, sizeof(*fei->regset), GFP_KERNEL);\n\tif (!fei->regset)\n\t\treturn;\n\n\tfei->regset->regs = fei_sys_regs;\n\tfei->regset->nregs = ARRAY_SIZE(fei_sys_regs);\n\tfei->regset->base = fei->io;\n\n\tfei->root = debugfs_create_dir(\"c8sectpfe\", NULL);\n\tdebugfs_create_regset32(\"registers\", S_IRUGO, fei->root, fei->regset);\n}\n\nvoid c8sectpfe_debugfs_exit(struct c8sectpfei *fei)\n{\n\tdebugfs_remove_recursive(fei->root);\n\tfei->root = NULL;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}