{
  "module_name": "rockchip_av1_entropymode.h",
  "hash_id": "01648083d5f7c734c214f5dcf8aaaef05d21a1843301af2d14c56da8661902e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/verisilicon/rockchip_av1_entropymode.h",
  "human_readable_source": " \n\n#ifndef _ROCKCHIP_AV1_ENTROPYMODE_H_\n#define _ROCKCHIP_AV1_ENTROPYMODE_H_\n\n#include <linux/types.h>\n\nstruct hantro_ctx;\n\n#define AV1_INTER_MODE_CONTEXTS 15\n#define AV1_INTRA_MODES 13\n#define AV1_REF_CONTEXTS 3\n#define AV1_SWITCHABLE_FILTERS 3\t \n#define AV1_TX_SIZE_CONTEXTS 3\n#define BLOCK_SIZE_GROUPS 4\n#define BR_CDF_SIZE 4\n#define BWD_REFS 3\n#define CFL_ALLOWED_TYPES 2\n#define CFL_ALPHA_CONTEXTS 6\n#define CFL_ALPHABET_SIZE 16\n#define CFL_JOINT_SIGNS 8\n#define CDF_SIZE(x) ((x) - 1)\n#define COMP_GROUP_IDX_CONTEXTS 7\n#define COMP_INDEX_CONTEXTS 6\n#define COMP_INTER_CONTEXTS 5\n#define COMP_REF_TYPE_CONTEXTS 5\n#define COMPOUND_TYPES 3\n#define DC_SIGN_CONTEXTS 3\n#define DELTA_LF_PROBS 3\n#define DELTA_Q_PROBS 3\n#define DIRECTIONAL_MODES 8\n#define DRL_MODE_CONTEXTS 3\n#define EOB_COEF_CONTEXTS 9\n#define EXT_TX_SIZES 3\n#define EXT_TX_TYPES 16\n#define EXTTX_SIZES 4\n#define FRAME_LF_COUNT 4\n#define FWD_REFS 4\n#define GLOBALMV_MODE_CONTEXTS 2\n#define ICDF(x) (32768U - (x))\n#define INTER_COMPOUND_MODES 8\n#define INTERINTRA_MODES 4\n#define INTRA_INTER_CONTEXTS 4\n#define KF_MODE_CONTEXTS 5\n#define LEVEL_CONTEXTS 21\n#define MAX_ANGLE_DELTA 3\n#define MAX_MB_SEGMENTS 8\n#define MAX_SEGMENTS 8\n#define MAX_TX_CATS 4\n#define MAX_TX_DEPTH 2\n#define MBSKIP_CONTEXTS 3\n#define MOTION_MODES 3\n#define MOTION_MODE_CONTEXTS 10\n#define NEWMV_MODE_CONTEXTS 6\n#define NUM_BASE_LEVELS 2\n#define NUM_REF_FRAMES 8\n#define PALETTE_BLOCK_SIZES 7\n#define PALETTE_IDX_CONTEXTS 18\n#define PALETTE_SIZES 7\n#define PALETTE_UV_MODE_CONTEXTS 2\n#define PALETTE_Y_MODE_CONTEXTS 3\n#define PARTITION_PLOFFSET 4\n#define NUM_PARTITION_CONTEXTS (4 * PARTITION_PLOFFSET)\n#define PLANE_TYPES 2\n#define PREDICTION_PROBS 3\n#define REF_CONTEXTS 5\n#define REFMV_MODE_CONTEXTS 9\n#define SEG_TEMPORAL_PRED_CTXS 3\n#define SIG_COEF_CONTEXTS 42\n#define SIG_COEF_CONTEXTS_EOB 4\n#define SINGLE_REFS 7\n#define SKIP_CONTEXTS 3\n#define SKIP_MODE_CONTEXTS 3\n#define SPATIAL_PREDICTION_PROBS 3\n#define SWITCHABLE_FILTER_CONTEXTS ((AV1_SWITCHABLE_FILTERS + 1) * 4)\n#define TOKEN_CDF_Q_CTXS 4\n#define TX_SIZES 5\n#define TX_SIZE_CONTEXTS 2\n#define TX_TYPES 4\n#define TXB_SKIP_CONTEXTS 13\n#define TXFM_PARTITION_CONTEXTS 22\n#define UNI_COMP_REF_CONTEXTS 3\n#define UNIDIR_COMP_REFS 4\n#define UV_INTRA_MODES 14\n#define VARTX_PART_CONTEXTS 22\n#define ZEROMV_MODE_CONTEXTS 2\n\nenum blocksizetype {\n\tBLOCK_SIZE_AB4X4,\n\tBLOCK_SIZE_SB4X8,\n\tBLOCK_SIZE_SB8X4,\n\tBLOCK_SIZE_SB8X8,\n\tBLOCK_SIZE_SB8X16,\n\tBLOCK_SIZE_SB16X8,\n\tBLOCK_SIZE_MB16X16,\n\tBLOCK_SIZE_SB16X32,\n\tBLOCK_SIZE_SB32X16,\n\tBLOCK_SIZE_SB32X32,\n\tBLOCK_SIZE_SB32X64,\n\tBLOCK_SIZE_SB64X32,\n\tBLOCK_SIZE_SB64X64,\n\tBLOCK_SIZE_SB64X128,\n\tBLOCK_SIZE_SB128X64,\n\tBLOCK_SIZE_SB128X128,\n\tBLOCK_SIZE_SB4X16,\n\tBLOCK_SIZE_SB16X4,\n\tBLOCK_SIZE_SB8X32,\n\tBLOCK_SIZE_SB32X8,\n\tBLOCK_SIZE_SB16X64,\n\tBLOCK_SIZE_SB64X16,\n\tBLOCK_SIZE_TYPES,\n\tBLOCK_SIZES_ALL = BLOCK_SIZE_TYPES\n};\n\nenum filterintramodetype {\n\tFILTER_DC_PRED,\n\tFILTER_V_PRED,\n\tFILTER_H_PRED,\n\tFILTER_D153_PRED,\n\tFILTER_PAETH_PRED,\n\tFILTER_INTRA_MODES,\n\tFILTER_INTRA_UNUSED = 7\n};\n\nenum frametype {\n\tKEY_FRAME = 0,\n\tINTER_FRAME = 1,\n\tNUM_FRAME_TYPES,\n};\n\nenum txsize {\n\tTX_4X4 = 0,\n\tTX_8X8 = 1,\n\tTX_16X16 = 2,\n\tTX_32X32 = 3,\n\tTX_SIZE_MAX_SB,\n};\n\nenum { SIMPLE_TRANSLATION, OBMC_CAUSAL, MOTION_MODE_COUNT };\n\nenum mb_prediction_mode {\n\tDC_PRED,\t\t \n\tV_PRED,\t\t\t \n\tH_PRED,\t\t\t \n\tD45_PRED,\t\t \n\tD135_PRED,\t\t \n\tD117_PRED,\t\t \n\tD153_PRED,\t\t \n\tD27_PRED,\t\t \n\tD63_PRED,\t\t \n\tSMOOTH_PRED,\n\tTM_PRED_AV1 = SMOOTH_PRED,\n\tSMOOTH_V_PRED,\t\t\n\tSMOOTH_H_PRED,\t\t\n\tTM_PRED,\t\t \n\tPAETH_PRED = TM_PRED,\n\tNEARESTMV,\n\tNEARMV,\n\tZEROMV,\n\tNEWMV,\n\tNEAREST_NEARESTMV,\n\tNEAR_NEARMV,\n\tNEAREST_NEWMV,\n\tNEW_NEARESTMV,\n\tNEAR_NEWMV,\n\tNEW_NEARMV,\n\tZERO_ZEROMV,\n\tNEW_NEWMV,\n\tSPLITMV,\n\tMB_MODE_COUNT\n};\n\nenum partitiontype {\n\tPARTITION_NONE,\n\tPARTITION_HORZ,\n\tPARTITION_VERT,\n\tPARTITION_SPLIT,\n\tPARTITION_TYPES\n};\n\nstruct mvcdfs {\n\tu16 joint_cdf[3];\n\tu16 sign_cdf[2];\n\tu16 clsss_cdf[2][10];\n\tu16 clsss0_fp_cdf[2][2][3];\n\tu16 fp_cdf[2][3];\n\tu16 class0_hp_cdf[2];\n\tu16 hp_cdf[2];\n\tu16 class0_cdf[2];\n\tu16 bits_cdf[2][10];\n};\n\nstruct av1cdfs {\n\tu16 partition_cdf[13][16];\n\tu16 kf_ymode_cdf[KF_MODE_CONTEXTS][KF_MODE_CONTEXTS][AV1_INTRA_MODES - 1];\n\tu16 segment_pred_cdf[PREDICTION_PROBS];\n\tu16 spatial_pred_seg_tree_cdf[SPATIAL_PREDICTION_PROBS][MAX_MB_SEGMENTS - 1];\n\tu16 mbskip_cdf[MBSKIP_CONTEXTS];\n\tu16 delta_q_cdf[DELTA_Q_PROBS];\n\tu16 delta_lf_multi_cdf[FRAME_LF_COUNT][DELTA_LF_PROBS];\n\tu16 delta_lf_cdf[DELTA_LF_PROBS];\n\tu16 skip_mode_cdf[SKIP_MODE_CONTEXTS];\n\tu16 vartx_part_cdf[VARTX_PART_CONTEXTS][1];\n\tu16 tx_size_cdf[MAX_TX_CATS][AV1_TX_SIZE_CONTEXTS][MAX_TX_DEPTH];\n\tu16 if_ymode_cdf[BLOCK_SIZE_GROUPS][AV1_INTRA_MODES - 1];\n\tu16 uv_mode_cdf[2][AV1_INTRA_MODES][AV1_INTRA_MODES - 1 + 1];\n\tu16 intra_inter_cdf[INTRA_INTER_CONTEXTS];\n\tu16 comp_inter_cdf[COMP_INTER_CONTEXTS];\n\tu16 single_ref_cdf[AV1_REF_CONTEXTS][SINGLE_REFS - 1];\n\tu16 comp_ref_type_cdf[COMP_REF_TYPE_CONTEXTS][1];\n\tu16 uni_comp_ref_cdf[UNI_COMP_REF_CONTEXTS][UNIDIR_COMP_REFS - 1][1];\n\tu16 comp_ref_cdf[AV1_REF_CONTEXTS][FWD_REFS - 1];\n\tu16 comp_bwdref_cdf[AV1_REF_CONTEXTS][BWD_REFS - 1];\n\tu16 newmv_cdf[NEWMV_MODE_CONTEXTS];\n\tu16 zeromv_cdf[ZEROMV_MODE_CONTEXTS];\n\tu16 refmv_cdf[REFMV_MODE_CONTEXTS];\n\tu16 drl_cdf[DRL_MODE_CONTEXTS];\n\tu16 interp_filter_cdf[SWITCHABLE_FILTER_CONTEXTS][AV1_SWITCHABLE_FILTERS - 1];\n\tstruct mvcdfs mv_cdf;\n\tu16 obmc_cdf[BLOCK_SIZE_TYPES];\n\tu16 motion_mode_cdf[BLOCK_SIZE_TYPES][2];\n\tu16 inter_compound_mode_cdf[AV1_INTER_MODE_CONTEXTS][INTER_COMPOUND_MODES - 1];\n\tu16 compound_type_cdf[BLOCK_SIZE_TYPES][CDF_SIZE(COMPOUND_TYPES - 1)];\n\tu16 interintra_cdf[BLOCK_SIZE_GROUPS];\n\tu16 interintra_mode_cdf[BLOCK_SIZE_GROUPS][INTERINTRA_MODES - 1];\n\tu16 wedge_interintra_cdf[BLOCK_SIZE_TYPES];\n\tu16 wedge_idx_cdf[BLOCK_SIZE_TYPES][CDF_SIZE(16)];\n\tu16 palette_y_mode_cdf[PALETTE_BLOCK_SIZES][PALETTE_Y_MODE_CONTEXTS][1];\n\tu16 palette_uv_mode_cdf[PALETTE_UV_MODE_CONTEXTS][1];\n\tu16 palette_y_size_cdf[PALETTE_BLOCK_SIZES][PALETTE_SIZES - 1];\n\tu16 palette_uv_size_cdf[PALETTE_BLOCK_SIZES][PALETTE_SIZES - 1];\n\tu16 cfl_sign_cdf[CFL_JOINT_SIGNS - 1];\n\tu16 cfl_alpha_cdf[CFL_ALPHA_CONTEXTS][CFL_ALPHABET_SIZE - 1];\n\tu16 intrabc_cdf[1];\n\tu16 angle_delta_cdf[DIRECTIONAL_MODES][6];\n\tu16 filter_intra_mode_cdf[FILTER_INTRA_MODES - 1];\n\tu16 filter_intra_cdf[BLOCK_SIZES_ALL];\n\tu16 comp_group_idx_cdf[COMP_GROUP_IDX_CONTEXTS][CDF_SIZE(2)];\n\tu16 compound_idx_cdf[COMP_INDEX_CONTEXTS][CDF_SIZE(2)];\n\tu16 dummy0[14];\n\t\n\tu16 palette_y_color_index_cdf[PALETTE_IDX_CONTEXTS][8];\n\tu16 palette_uv_color_index_cdf[PALETTE_IDX_CONTEXTS][8];\n\tu16 tx_type_intra0_cdf[EXTTX_SIZES][AV1_INTRA_MODES][8];\n\tu16 tx_type_intra1_cdf[EXTTX_SIZES][AV1_INTRA_MODES][4];\n\tu16 tx_type_inter_cdf[2][EXTTX_SIZES][EXT_TX_TYPES];\n\tu16 txb_skip_cdf[TX_SIZES][TXB_SKIP_CONTEXTS][CDF_SIZE(2)];\n\tu16 eob_extra_cdf[TX_SIZES][PLANE_TYPES][EOB_COEF_CONTEXTS][CDF_SIZE(2)];\n\tu16 dummy1[5];\n\tu16 eob_flag_cdf16[PLANE_TYPES][2][4];\n\tu16 eob_flag_cdf32[PLANE_TYPES][2][8];\n\tu16 eob_flag_cdf64[PLANE_TYPES][2][8];\n\tu16 eob_flag_cdf128[PLANE_TYPES][2][8];\n\tu16 eob_flag_cdf256[PLANE_TYPES][2][8];\n\tu16 eob_flag_cdf512[PLANE_TYPES][2][16];\n\tu16 eob_flag_cdf1024[PLANE_TYPES][2][16];\n\tu16 coeff_base_eob_cdf[TX_SIZES][PLANE_TYPES][SIG_COEF_CONTEXTS_EOB][CDF_SIZE(3)];\n\tu16 coeff_base_cdf[TX_SIZES][PLANE_TYPES][SIG_COEF_CONTEXTS][CDF_SIZE(4) + 1];\n\tu16 dc_sign_cdf[PLANE_TYPES][DC_SIGN_CONTEXTS][CDF_SIZE(2)];\n\tu16 dummy2[2];\n\tu16 coeff_br_cdf[TX_SIZES][PLANE_TYPES][LEVEL_CONTEXTS][CDF_SIZE(BR_CDF_SIZE) + 1];\n\tu16 dummy3[16];\n};\n\nvoid rockchip_av1_store_cdfs(struct hantro_ctx *ctx,\n\t\t\t     u32 refresh_frame_flags);\nvoid rockchip_av1_get_cdfs(struct hantro_ctx *ctx, u32 ref_idx);\nvoid rockchip_av1_set_default_cdfs(struct av1cdfs *cdfs,\n\t\t\t\t   struct mvcdfs *cdfs_ndvc);\nvoid rockchip_av1_default_coeff_probs(u32 base_qindex, void *ptr);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}