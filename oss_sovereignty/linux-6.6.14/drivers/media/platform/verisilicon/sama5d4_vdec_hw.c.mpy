{
  "module_name": "sama5d4_vdec_hw.c",
  "hash_id": "33f37c41767947f08fa2d0f84c149b4bb5bedd5c484bddbd9f0df5bb118677bd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/verisilicon/sama5d4_vdec_hw.c",
  "human_readable_source": "\n \n\n#include \"hantro.h\"\n\n \n\nstatic const struct hantro_fmt sama5d4_vdec_postproc_fmts[] = {\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_YUYV,\n\t\t.codec_mode = HANTRO_MODE_NONE,\n\t\t.postprocessed = true,\n\t\t.frmsize = {\n\t\t\t.min_width = FMT_MIN_WIDTH,\n\t\t\t.max_width = FMT_HD_WIDTH,\n\t\t\t.step_width = MB_DIM,\n\t\t\t.min_height = FMT_MIN_HEIGHT,\n\t\t\t.max_height = FMT_HD_HEIGHT,\n\t\t\t.step_height = MB_DIM,\n\t\t},\n\t},\n};\n\nstatic const struct hantro_fmt sama5d4_vdec_fmts[] = {\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_NV12,\n\t\t.codec_mode = HANTRO_MODE_NONE,\n\t\t.frmsize = {\n\t\t\t.min_width = FMT_MIN_WIDTH,\n\t\t\t.max_width = FMT_HD_WIDTH,\n\t\t\t.step_width = MB_DIM,\n\t\t\t.min_height = FMT_MIN_HEIGHT,\n\t\t\t.max_height = FMT_HD_HEIGHT,\n\t\t\t.step_height = MB_DIM,\n\t\t},\n\t},\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_MPEG2_SLICE,\n\t\t.codec_mode = HANTRO_MODE_MPEG2_DEC,\n\t\t.max_depth = 2,\n\t\t.frmsize = {\n\t\t\t.min_width = FMT_MIN_WIDTH,\n\t\t\t.max_width = FMT_HD_WIDTH,\n\t\t\t.step_width = MB_DIM,\n\t\t\t.min_height = FMT_MIN_HEIGHT,\n\t\t\t.max_height = FMT_HD_HEIGHT,\n\t\t\t.step_height = MB_DIM,\n\t\t},\n\t},\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_VP8_FRAME,\n\t\t.codec_mode = HANTRO_MODE_VP8_DEC,\n\t\t.max_depth = 2,\n\t\t.frmsize = {\n\t\t\t.min_width = FMT_MIN_WIDTH,\n\t\t\t.max_width = FMT_HD_WIDTH,\n\t\t\t.step_width = MB_DIM,\n\t\t\t.min_height = FMT_MIN_HEIGHT,\n\t\t\t.max_height = FMT_HD_HEIGHT,\n\t\t\t.step_height = MB_DIM,\n\t\t},\n\t},\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_H264_SLICE,\n\t\t.codec_mode = HANTRO_MODE_H264_DEC,\n\t\t.max_depth = 2,\n\t\t.frmsize = {\n\t\t\t.min_width = FMT_MIN_WIDTH,\n\t\t\t.max_width = FMT_HD_WIDTH,\n\t\t\t.step_width = MB_DIM,\n\t\t\t.min_height = FMT_MIN_HEIGHT,\n\t\t\t.max_height = FMT_HD_HEIGHT,\n\t\t\t.step_height = MB_DIM,\n\t\t},\n\t},\n};\n\n \n\nstatic const struct hantro_codec_ops sama5d4_vdec_codec_ops[] = {\n\t[HANTRO_MODE_MPEG2_DEC] = {\n\t\t.run = hantro_g1_mpeg2_dec_run,\n\t\t.reset = hantro_g1_reset,\n\t\t.init = hantro_mpeg2_dec_init,\n\t\t.exit = hantro_mpeg2_dec_exit,\n\t},\n\t[HANTRO_MODE_VP8_DEC] = {\n\t\t.run = hantro_g1_vp8_dec_run,\n\t\t.reset = hantro_g1_reset,\n\t\t.init = hantro_vp8_dec_init,\n\t\t.exit = hantro_vp8_dec_exit,\n\t},\n\t[HANTRO_MODE_H264_DEC] = {\n\t\t.run = hantro_g1_h264_dec_run,\n\t\t.reset = hantro_g1_reset,\n\t\t.init = hantro_h264_dec_init,\n\t\t.exit = hantro_h264_dec_exit,\n\t},\n};\n\nstatic const struct hantro_irq sama5d4_irqs[] = {\n\t{ \"vdec\", hantro_g1_irq },\n};\n\nstatic const char * const sama5d4_clk_names[] = { \"vdec_clk\" };\n\nconst struct hantro_variant sama5d4_vdec_variant = {\n\t.dec_fmts = sama5d4_vdec_fmts,\n\t.num_dec_fmts = ARRAY_SIZE(sama5d4_vdec_fmts),\n\t.postproc_fmts = sama5d4_vdec_postproc_fmts,\n\t.num_postproc_fmts = ARRAY_SIZE(sama5d4_vdec_postproc_fmts),\n\t.postproc_ops = &hantro_g1_postproc_ops,\n\t.codec = HANTRO_MPEG2_DECODER | HANTRO_VP8_DECODER |\n\t\t HANTRO_H264_DECODER,\n\t.codec_ops = sama5d4_vdec_codec_ops,\n\t.irqs = sama5d4_irqs,\n\t.num_irqs = ARRAY_SIZE(sama5d4_irqs),\n\t.clk_names = sama5d4_clk_names,\n\t.num_clocks = ARRAY_SIZE(sama5d4_clk_names),\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}