{
  "module_name": "xilinx-dma.h",
  "hash_id": "628a467af958dd2fc5ee41e3c5848fcfcd6a8626320cd4354ef2982f558d8901",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/xilinx/xilinx-dma.h",
  "human_readable_source": " \n \n\n#ifndef __XILINX_VIP_DMA_H__\n#define __XILINX_VIP_DMA_H__\n\n#include <linux/dmaengine.h>\n#include <linux/mutex.h>\n#include <linux/spinlock.h>\n#include <linux/videodev2.h>\n\n#include <media/media-entity.h>\n#include <media/v4l2-dev.h>\n#include <media/videobuf2-v4l2.h>\n\nstruct dma_chan;\nstruct xvip_composite_device;\nstruct xvip_video_format;\n\n \nstruct xvip_pipeline {\n\tstruct media_pipeline pipe;\n\n\tstruct mutex lock;\n\tunsigned int use_count;\n\tunsigned int stream_count;\n\n\tunsigned int num_dmas;\n\tstruct xvip_dma *output;\n};\n\nstatic inline struct xvip_pipeline *to_xvip_pipeline(struct video_device *vdev)\n{\n\tstruct media_pipeline *pipe = video_device_pipeline(vdev);\n\n\tif (!pipe)\n\t\treturn NULL;\n\n\treturn container_of(pipe, struct xvip_pipeline, pipe);\n}\n\n \nstruct xvip_dma {\n\tstruct list_head list;\n\tstruct video_device video;\n\tstruct media_pad pad;\n\n\tstruct xvip_composite_device *xdev;\n\tstruct xvip_pipeline pipe;\n\tunsigned int port;\n\n\tstruct mutex lock;\n\tstruct v4l2_pix_format format;\n\tconst struct xvip_video_format *fmtinfo;\n\n\tstruct vb2_queue queue;\n\tunsigned int sequence;\n\n\tstruct list_head queued_bufs;\n\tspinlock_t queued_lock;\n\n\tstruct dma_chan *dma;\n\tunsigned int align;\n\tstruct dma_interleaved_template xt;\n\tstruct data_chunk sgl[1];\n};\n\n#define to_xvip_dma(vdev)\tcontainer_of(vdev, struct xvip_dma, video)\n\nint xvip_dma_init(struct xvip_composite_device *xdev, struct xvip_dma *dma,\n\t\t  enum v4l2_buf_type type, unsigned int port);\nvoid xvip_dma_cleanup(struct xvip_dma *dma);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}