{
  "module_name": "sun8i-di.h",
  "hash_id": "7c317f26da60c46a95e153b92e2b19e51d35152f3a0695cbfcd5e946b0454681",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/sunxi/sun8i-di/sun8i-di.h",
  "human_readable_source": " \n \n\n#ifndef _SUN8I_DEINTERLACE_H_\n#define _SUN8I_DEINTERLACE_H_\n\n#include <media/v4l2-device.h>\n#include <media/v4l2-mem2mem.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/videobuf2-dma-contig.h>\n\n#include <linux/platform_device.h>\n\n#define DEINTERLACE_NAME\t\t\"sun8i-di\"\n\n#define DEINTERLACE_MOD_ENABLE\t\t\t0x00\n#define DEINTERLACE_MOD_ENABLE_EN\t\t\tBIT(0)\n\n#define DEINTERLACE_FRM_CTRL\t\t\t0x04\n#define DEINTERLACE_FRM_CTRL_REG_READY\t\t\tBIT(0)\n#define DEINTERLACE_FRM_CTRL_WB_EN\t\t\tBIT(2)\n#define DEINTERLACE_FRM_CTRL_OUT_CTRL\t\t\tBIT(11)\n#define DEINTERLACE_FRM_CTRL_START\t\t\tBIT(16)\n#define DEINTERLACE_FRM_CTRL_COEF_ACCESS\t\tBIT(23)\n\n#define DEINTERLACE_BYPASS\t\t\t0x08\n#define DEINTERLACE_BYPASS_CSC\t\t\t\tBIT(1)\n\n#define DEINTERLACE_AGTH_SEL\t\t\t0x0c\n#define DEINTERLACE_AGTH_SEL_LINEBUF\t\t\tBIT(8)\n\n#define DEINTERLACE_LINT_CTRL\t\t\t0x10\n#define DEINTERLACE_TRD_PRELUMA\t\t\t0x1c\n#define DEINTERLACE_BUF_ADDR0\t\t\t0x20\n#define DEINTERLACE_BUF_ADDR1\t\t\t0x24\n#define DEINTERLACE_BUF_ADDR2\t\t\t0x28\n\n#define DEINTERLACE_FIELD_CTRL\t\t\t0x2c\n#define DEINTERLACE_FIELD_CTRL_FIELD_CNT(v)\t\t((v) & 0xff)\n#define DEINTERLACE_FIELD_CTRL_FIELD_CNT_MSK\t\t(0xff)\n\n#define DEINTERLACE_TB_OFFSET0\t\t\t0x30\n#define DEINTERLACE_TB_OFFSET1\t\t\t0x34\n#define DEINTERLACE_TB_OFFSET2\t\t\t0x38\n#define DEINTERLACE_TRD_PRECHROMA\t\t0x3c\n#define DEINTERLACE_LINE_STRIDE0\t\t0x40\n#define DEINTERLACE_LINE_STRIDE1\t\t0x44\n#define DEINTERLACE_LINE_STRIDE2\t\t0x48\n\n#define DEINTERLACE_IN_FMT\t\t\t0x4c\n#define DEINTERLACE_IN_FMT_PS(v)\t\t\t((v) & 3)\n#define DEINTERLACE_IN_FMT_FMT(v)\t\t\t(((v) & 7) << 4)\n#define DEINTERLACE_IN_FMT_MOD(v)\t\t\t(((v) & 7) << 8)\n\n#define DEINTERLACE_WB_ADDR0\t\t\t0x50\n#define DEINTERLACE_WB_ADDR1\t\t\t0x54\n#define DEINTERLACE_WB_ADDR2\t\t\t0x58\n\n#define DEINTERLACE_OUT_FMT\t\t\t0x5c\n#define DEINTERLACE_OUT_FMT_FMT(v)\t\t\t((v) & 0xf)\n#define DEINTERLACE_OUT_FMT_PS(v)\t\t\t(((v) & 3) << 5)\n\n#define DEINTERLACE_INT_ENABLE\t\t\t0x60\n#define DEINTERLACE_INT_ENABLE_WB_EN\t\t\tBIT(7)\n\n#define DEINTERLACE_INT_STATUS\t\t\t0x64\n#define DEINTERLACE_INT_STATUS_WRITEBACK\t\tBIT(7)\n\n#define DEINTERLACE_STATUS\t\t\t0x68\n#define DEINTERLACE_STATUS_COEF_STATUS\t\t\tBIT(11)\n#define DEINTERLACE_STATUS_WB_ERROR\t\t\tBIT(12)\n\n#define DEINTERLACE_CSC_COEF\t\t\t0x70  \n\n#define DEINTERLACE_CTRL\t\t\t0xa0\n#define DEINTERLACE_CTRL_EN\t\t\t\tBIT(0)\n#define DEINTERLACE_CTRL_FLAG_OUT_EN\t\t\tBIT(8)\n#define DEINTERLACE_CTRL_MODE_PASSTROUGH\t\t(0 << 16)\n#define DEINTERLACE_CTRL_MODE_WEAVE\t\t\t(1 << 16)\n#define DEINTERLACE_CTRL_MODE_BOB\t\t\t(2 << 16)\n#define DEINTERLACE_CTRL_MODE_MIXED\t\t\t(3 << 16)\n#define DEINTERLACE_CTRL_DIAG_INTP_EN\t\t\tBIT(24)\n#define DEINTERLACE_CTRL_TEMP_DIFF_EN\t\t\tBIT(25)\n\n#define DEINTERLACE_DIAG_INTP\t\t\t0xa4\n#define DEINTERLACE_DIAG_INTP_TH0(v)\t\t\t((v) & 0x7f)\n#define DEINTERLACE_DIAG_INTP_TH0_MSK\t\t\t(0x7f)\n#define DEINTERLACE_DIAG_INTP_TH1(v)\t\t\t(((v) & 0x7f) << 8)\n#define DEINTERLACE_DIAG_INTP_TH1_MSK\t\t\t(0x7f << 8)\n#define DEINTERLACE_DIAG_INTP_TH3(v)\t\t\t(((v) & 0xff) << 24)\n#define DEINTERLACE_DIAG_INTP_TH3_MSK\t\t\t(0xff << 24)\n\n#define DEINTERLACE_TEMP_DIFF\t\t\t0xa8\n#define DEINTERLACE_TEMP_DIFF_SAD_CENTRAL_TH(v)\t\t((v) & 0x7f)\n#define DEINTERLACE_TEMP_DIFF_SAD_CENTRAL_TH_MSK\t(0x7f)\n#define DEINTERLACE_TEMP_DIFF_AMBIGUITY_TH(v)\t\t(((v) & 0x7f) << 8)\n#define DEINTERLACE_TEMP_DIFF_AMBIGUITY_TH_MSK\t\t(0x7f << 8)\n#define DEINTERLACE_TEMP_DIFF_DIRECT_DITHER_TH(v)\t(((v) & 0x7ff) << 16)\n#define DEINTERLACE_TEMP_DIFF_DIRECT_DITHER_TH_MSK\t(0x7ff << 16)\n\n#define DEINTERLACE_LUMA_TH\t\t\t0xac\n#define DEINTERLACE_LUMA_TH_MIN_LUMA(v)\t\t\t((v) & 0xff)\n#define DEINTERLACE_LUMA_TH_MIN_LUMA_MSK\t\t(0xff)\n#define DEINTERLACE_LUMA_TH_MAX_LUMA(v)\t\t\t(((v) & 0xff) << 8)\n#define DEINTERLACE_LUMA_TH_MAX_LUMA_MSK\t\t(0xff << 8)\n#define DEINTERLACE_LUMA_TH_AVG_LUMA_SHIFT(v)\t\t(((v) & 0xff) << 16)\n#define DEINTERLACE_LUMA_TH_AVG_LUMA_SHIFT_MSK\t\t(0xff << 16)\n#define DEINTERLACE_LUMA_TH_PIXEL_STATIC(v)\t\t(((v) & 3) << 24)\n#define DEINTERLACE_LUMA_TH_PIXEL_STATIC_MSK\t\t(3 << 24)\n\n#define DEINTERLACE_SPAT_COMP\t\t\t0xb0\n#define DEINTERLACE_SPAT_COMP_TH2(v)\t\t\t((v) & 0xff)\n#define DEINTERLACE_SPAT_COMP_TH2_MSK\t\t\t(0xff)\n#define DEINTERLACE_SPAT_COMP_TH3(v)\t\t\t(((v) & 0xff) << 16)\n#define DEINTERLACE_SPAT_COMP_TH3_MSK\t\t\t(0xff << 16)\n\n#define DEINTERLACE_CHROMA_DIFF\t\t\t0xb4\n#define DEINTERLACE_CHROMA_DIFF_TH(v)\t\t\t((v) & 0xff)\n#define DEINTERLACE_CHROMA_DIFF_TH_MSK\t\t\t(0xff)\n#define DEINTERLACE_CHROMA_DIFF_LUMA(v)\t\t\t(((v) & 0x3f) << 16)\n#define DEINTERLACE_CHROMA_DIFF_LUMA_MSK\t\t(0x3f << 16)\n#define DEINTERLACE_CHROMA_DIFF_CHROMA(v)\t\t(((v) & 0x3f) << 24)\n#define DEINTERLACE_CHROMA_DIFF_CHROMA_MSK\t\t(0x3f << 24)\n\n#define DEINTERLACE_PRELUMA\t\t\t0xb8\n#define DEINTERLACE_PRECHROMA\t\t\t0xbc\n#define DEINTERLACE_TILE_FLAG0\t\t\t0xc0\n#define DEINTERLACE_TILE_FLAG1\t\t\t0xc4\n#define DEINTERLACE_FLAG_LINE_STRIDE\t\t0xc8\n#define DEINTERLACE_FLAG_SEQ\t\t\t0xcc\n\n#define DEINTERLACE_WB_LINE_STRIDE_CTRL\t\t0xd0\n#define DEINTERLACE_WB_LINE_STRIDE_CTRL_EN\t\tBIT(0)\n\n#define DEINTERLACE_WB_LINE_STRIDE0\t\t0xd4\n#define DEINTERLACE_WB_LINE_STRIDE1\t\t0xd8\n#define DEINTERLACE_WB_LINE_STRIDE2\t\t0xdc\n#define DEINTERLACE_TRD_CTRL\t\t\t0xe0\n#define DEINTERLACE_TRD_BUF_ADDR0\t\t0xe4\n#define DEINTERLACE_TRD_BUF_ADDR1\t\t0xe8\n#define DEINTERLACE_TRD_BUF_ADDR2\t\t0xec\n#define DEINTERLACE_TRD_TB_OFF0\t\t\t0xf0\n#define DEINTERLACE_TRD_TB_OFF1\t\t\t0xf4\n#define DEINTERLACE_TRD_TB_OFF2\t\t\t0xf8\n#define DEINTERLACE_TRD_WB_STRIDE\t\t0xfc\n#define DEINTERLACE_CH0_IN_SIZE\t\t\t0x100\n#define DEINTERLACE_CH0_OUT_SIZE\t\t0x104\n#define DEINTERLACE_CH0_HORZ_FACT\t\t0x108\n#define DEINTERLACE_CH0_VERT_FACT\t\t0x10c\n#define DEINTERLACE_CH0_HORZ_PHASE\t\t0x110\n#define DEINTERLACE_CH0_VERT_PHASE0\t\t0x114\n#define DEINTERLACE_CH0_VERT_PHASE1\t\t0x118\n#define DEINTERLACE_CH0_HORZ_TAP0\t\t0x120\n#define DEINTERLACE_CH0_HORZ_TAP1\t\t0x124\n#define DEINTERLACE_CH0_VERT_TAP\t\t0x128\n#define DEINTERLACE_CH1_IN_SIZE\t\t\t0x200\n#define DEINTERLACE_CH1_OUT_SIZE\t\t0x204\n#define DEINTERLACE_CH1_HORZ_FACT\t\t0x208\n#define DEINTERLACE_CH1_VERT_FACT\t\t0x20c\n#define DEINTERLACE_CH1_HORZ_PHASE\t\t0x210\n#define DEINTERLACE_CH1_VERT_PHASE0\t\t0x214\n#define DEINTERLACE_CH1_VERT_PHASE1\t\t0x218\n#define DEINTERLACE_CH1_HORZ_TAP0\t\t0x220\n#define DEINTERLACE_CH1_HORZ_TAP1\t\t0x224\n#define DEINTERLACE_CH1_VERT_TAP\t\t0x228\n#define DEINTERLACE_CH0_HORZ_COEF0\t\t0x400  \n#define DEINTERLACE_CH0_HORZ_COEF1\t\t0x480  \n#define DEINTERLACE_CH0_VERT_COEF\t\t0x500  \n#define DEINTERLACE_CH1_HORZ_COEF0\t\t0x600  \n#define DEINTERLACE_CH1_HORZ_COEF1\t\t0x680  \n#define DEINTERLACE_CH1_VERT_COEF\t\t0x700  \n#define DEINTERLACE_CH3_HORZ_COEF0\t\t0x800  \n#define DEINTERLACE_CH3_HORZ_COEF1\t\t0x880  \n#define DEINTERLACE_CH3_VERT_COEF\t\t0x900  \n\n#define DEINTERLACE_MIN_WIDTH\t2U\n#define DEINTERLACE_MIN_HEIGHT\t2U\n#define DEINTERLACE_MAX_WIDTH\t2048U\n#define DEINTERLACE_MAX_HEIGHT\t1100U\n\n#define DEINTERLACE_MODE_UV_COMBINED\t2\n\n#define DEINTERLACE_IN_FMT_YUV420\t2\n\n#define DEINTERLACE_OUT_FMT_YUV420SP\t13\n\n#define DEINTERLACE_PS_UVUV\t\t0\n#define DEINTERLACE_PS_VUVU\t\t1\n\n#define DEINTERLACE_IDENTITY_COEF\t0x4000\n\n#define DEINTERLACE_SIZE(w, h)\t(((h) - 1) << 16 | ((w) - 1))\n\nstruct deinterlace_ctx {\n\tstruct v4l2_fh\t\tfh;\n\tstruct deinterlace_dev\t*dev;\n\n\tstruct v4l2_pix_format\tsrc_fmt;\n\tstruct v4l2_pix_format\tdst_fmt;\n\n\tvoid\t\t\t*flag1_buf;\n\tdma_addr_t\t\tflag1_buf_dma;\n\n\tvoid\t\t\t*flag2_buf;\n\tdma_addr_t\t\tflag2_buf_dma;\n\n\tstruct vb2_v4l2_buffer\t*prev;\n\n\tunsigned int\t\tfirst_field;\n\tunsigned int\t\tfield;\n\n\tint\t\t\taborting;\n};\n\nstruct deinterlace_dev {\n\tstruct v4l2_device\tv4l2_dev;\n\tstruct video_device\tvfd;\n\tstruct device\t\t*dev;\n\tstruct v4l2_m2m_dev\t*m2m_dev;\n\n\t \n\tstruct mutex\t\tdev_mutex;\n\n\tvoid __iomem\t\t*base;\n\n\tstruct clk\t\t*bus_clk;\n\tstruct clk\t\t*mod_clk;\n\tstruct clk\t\t*ram_clk;\n\n\tstruct reset_control\t*rstc;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}