{
  "module_name": "sun8i_formats.c",
  "hash_id": "af67671f9e9cae60579a93f38d5bd4d14ed68f020eb868cdb1ab8e20aeff861a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/sunxi/sun8i-rotate/sun8i_formats.c",
  "human_readable_source": "\n \n\n#include \"sun8i-formats.h\"\n#include \"sun8i-rotate.h\"\n\n \n\nstatic const struct rotate_format rotate_formats[] = {\n\t{\n\t\t.fourcc = V4L2_PIX_FMT_ARGB32,\n\t\t.hw_format = ROTATE_FORMAT_ARGB32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_ABGR32,\n\t\t.hw_format = ROTATE_FORMAT_ABGR32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGBA32,\n\t\t.hw_format = ROTATE_FORMAT_RGBA32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_BGRA32,\n\t\t.hw_format = ROTATE_FORMAT_BGRA32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_XRGB32,\n\t\t.hw_format = ROTATE_FORMAT_XRGB32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_XBGR32,\n\t\t.hw_format = ROTATE_FORMAT_XBGR32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGB32,\n\t\t.hw_format = ROTATE_FORMAT_RGBX32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_BGR32,\n\t\t.hw_format = ROTATE_FORMAT_BGRX32,\n\t\t.planes = 1,\n\t\t.bpp = { 4, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGB24,\n\t\t.hw_format = ROTATE_FORMAT_RGB24,\n\t\t.planes = 1,\n\t\t.bpp = { 3, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_BGR24,\n\t\t.hw_format = ROTATE_FORMAT_BGR24,\n\t\t.planes = 1,\n\t\t.bpp = { 3, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGB565,\n\t\t.hw_format = ROTATE_FORMAT_RGB565,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_ARGB444,\n\t\t.hw_format = ROTATE_FORMAT_ARGB4444,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_ABGR444,\n\t\t.hw_format = ROTATE_FORMAT_ABGR4444,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGBA444,\n\t\t.hw_format = ROTATE_FORMAT_RGBA4444,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_BGRA444,\n\t\t.hw_format = ROTATE_FORMAT_BGRA4444,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_ARGB555,\n\t\t.hw_format = ROTATE_FORMAT_ARGB1555,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_ABGR555,\n\t\t.hw_format = ROTATE_FORMAT_ABGR1555,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_RGBA555,\n\t\t.hw_format = ROTATE_FORMAT_RGBA5551,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_BGRA555,\n\t\t.hw_format = ROTATE_FORMAT_BGRA5551,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 1,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_OUTPUT\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_YVYU,\n\t\t.hw_format = ROTATE_FORMAT_YVYU,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_UYVY,\n\t\t.hw_format = ROTATE_FORMAT_UYVY,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_YUYV,\n\t\t.hw_format = ROTATE_FORMAT_YUYV,\n\t\t.planes = 1,\n\t\t.bpp = { 2, 0, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_NV61,\n\t\t.hw_format = ROTATE_FORMAT_NV61,\n\t\t.planes = 2,\n\t\t.bpp = { 1, 2, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_NV16,\n\t\t.hw_format = ROTATE_FORMAT_NV16,\n\t\t.planes = 2,\n\t\t.bpp = { 1, 2, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_YUV422P,\n\t\t.hw_format = ROTATE_FORMAT_YUV422P,\n\t\t.planes = 3,\n\t\t.bpp = { 1, 1, 1 },\n\t\t.hsub = 2,\n\t\t.vsub = 1,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_NV21,\n\t\t.hw_format = ROTATE_FORMAT_NV21,\n\t\t.planes = 2,\n\t\t.bpp = { 1, 2, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 2,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_NV12,\n\t\t.hw_format = ROTATE_FORMAT_NV12,\n\t\t.planes = 2,\n\t\t.bpp = { 1, 2, 0 },\n\t\t.hsub = 2,\n\t\t.vsub = 2,\n\t\t.flags = ROTATE_FLAG_YUV\n\t}, {\n\t\t.fourcc = V4L2_PIX_FMT_YUV420,\n\t\t.hw_format = ROTATE_FORMAT_YUV420P,\n\t\t.planes = 3,\n\t\t.bpp = { 1, 1, 1 },\n\t\t.hsub = 2,\n\t\t.vsub = 2,\n\t\t.flags = ROTATE_FLAG_YUV | ROTATE_FLAG_OUTPUT\n\t},\n};\n\nconst struct rotate_format *rotate_find_format(u32 pixelformat)\n{\n\tunsigned int i;\n\n\tfor (i = 0; i < ARRAY_SIZE(rotate_formats); i++)\n\t\tif (rotate_formats[i].fourcc == pixelformat)\n\t\t\treturn &rotate_formats[i];\n\n\treturn NULL;\n}\n\nint rotate_enum_fmt(struct v4l2_fmtdesc *f, bool dst)\n{\n\tint i, index;\n\n\tindex = 0;\n\n\tfor (i = 0; i < ARRAY_SIZE(rotate_formats); i++) {\n\t\t \n\t\tif (dst && !(rotate_formats[i].flags & ROTATE_FLAG_OUTPUT))\n\t\t\tcontinue;\n\n\t\tif (index == f->index) {\n\t\t\tf->pixelformat = rotate_formats[i].fourcc;\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tindex++;\n\t}\n\n\treturn -EINVAL;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}