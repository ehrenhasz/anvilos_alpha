{
  "module_name": "fimc-isp.h",
  "hash_id": "c906d42244b389443657db0ab8b1963990a0c2b8905b93f8a12ca2a443fe33cd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/samsung/exynos4-is/fimc-isp.h",
  "human_readable_source": " \n \n#ifndef FIMC_ISP_H_\n#define FIMC_ISP_H_\n\n#include <linux/io.h>\n#include <linux/platform_device.h>\n#include <linux/sched.h>\n#include <linux/spinlock.h>\n#include <linux/types.h>\n#include <linux/videodev2.h>\n\n#include <media/media-entity.h>\n#include <media/videobuf2-v4l2.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-mediabus.h>\n#include <media/drv-intf/exynos-fimc.h>\n\nextern int fimc_isp_debug;\n\n#define isp_dbg(level, dev, fmt, arg...) \\\n\tv4l2_dbg(level, fimc_isp_debug, dev, fmt, ## arg)\n\n \n#define FIMC_ISP_SINK_WIDTH_MIN\t\t(16 + 8)\n#define FIMC_ISP_SINK_HEIGHT_MIN\t(12 + 8)\n#define FIMC_ISP_SOURCE_WIDTH_MIN\t8\n#define FIMC_ISP_SOURCE_HEIGHT_MIN\t8\n#define FIMC_ISP_CAC_MARGIN_WIDTH\t16\n#define FIMC_ISP_CAC_MARGIN_HEIGHT\t12\n\n#define FIMC_ISP_SINK_WIDTH_MAX\t\t(4000 - 16)\n#define FIMC_ISP_SINK_HEIGHT_MAX\t(4000 + 12)\n#define FIMC_ISP_SOURCE_WIDTH_MAX\t4000\n#define FIMC_ISP_SOURCE_HEIGHT_MAX\t4000\n\n#define FIMC_ISP_NUM_FORMATS\t\t3\n#define FIMC_ISP_REQ_BUFS_MIN\t\t2\n#define FIMC_ISP_REQ_BUFS_MAX\t\t32\n\n#define FIMC_ISP_SD_PAD_SINK\t\t0\n#define FIMC_ISP_SD_PAD_SRC_FIFO\t1\n#define FIMC_ISP_SD_PAD_SRC_DMA\t\t2\n#define FIMC_ISP_SD_PADS_NUM\t\t3\n#define FIMC_ISP_MAX_PLANES\t\t1\n\n \nstruct fimc_isp_frame {\n\tu16 width;\n\tu16 height;\n\tstruct v4l2_rect rect;\n};\n\nstruct fimc_isp_ctrls {\n\tstruct v4l2_ctrl_handler handler;\n\n\t \n\tstruct v4l2_ctrl *auto_wb;\n\t \n\tstruct {\n\t\tstruct v4l2_ctrl *auto_iso;\n\t\tstruct v4l2_ctrl *iso;\n\t};\n\t \n\tstruct v4l2_ctrl *contrast;\n\t \n\tstruct v4l2_ctrl *saturation;\n\t \n\tstruct v4l2_ctrl *sharpness;\n\t \n\tstruct v4l2_ctrl *brightness;\n\t \n\tstruct v4l2_ctrl *hue;\n\n\t \n\tstruct v4l2_ctrl *auto_exp;\n\t \n\tstruct v4l2_ctrl *exposure;\n\t \n\tstruct v4l2_ctrl *aewb_lock;\n\t \n\tstruct v4l2_ctrl *exp_metering;\n\t \n\tstruct v4l2_ctrl *afc;\n\t \n\tstruct v4l2_ctrl *colorfx;\n};\n\nstruct isp_video_buf {\n\tstruct vb2_v4l2_buffer vb;\n\tdma_addr_t dma_addr[FIMC_ISP_MAX_PLANES];\n\tunsigned int index;\n};\n\n#define to_isp_video_buf(_b) container_of(_b, struct isp_video_buf, vb)\n\n#define FIMC_ISP_MAX_BUFS\t4\n\n \nstruct fimc_is_video {\n\tstruct exynos_video_entity ve;\n\tenum v4l2_buf_type\ttype;\n\tstruct media_pad\tpad;\n\tstruct list_head\tpending_buf_q;\n\tstruct list_head\tactive_buf_q;\n\tstruct vb2_queue\tvb_queue;\n\tunsigned int\t\treqbufs_count;\n\tunsigned int\t\tbuf_count;\n\tunsigned int\t\tbuf_mask;\n\tunsigned int\t\tframe_count;\n\tint\t\t\tstreaming;\n\tstruct isp_video_buf\t*buffers[FIMC_ISP_MAX_BUFS];\n\tconst struct fimc_fmt\t*format;\n\tstruct v4l2_pix_format_mplane pixfmt;\n};\n\n \n#define ST_ISP_VID_CAP_BUF_PREP\t\t0\n#define ST_ISP_VID_CAP_STREAMING\t1\n\n \nstruct fimc_isp {\n\tstruct platform_device\t\t*pdev;\n\tstruct v4l2_subdev\t\tsubdev;\n\tstruct media_pad\t\tsubdev_pads[FIMC_ISP_SD_PADS_NUM];\n\tstruct v4l2_mbus_framefmt\tsrc_fmt;\n\tstruct v4l2_mbus_framefmt\tsink_fmt;\n\tstruct v4l2_ctrl\t\t*test_pattern;\n\tstruct fimc_isp_ctrls\t\tctrls;\n\n\tstruct mutex\t\t\tvideo_lock;\n\tstruct mutex\t\t\tsubdev_lock;\n\n\tunsigned int\t\t\tcac_margin_x;\n\tunsigned int\t\t\tcac_margin_y;\n\n\tunsigned long\t\t\tstate;\n\n\tstruct fimc_is_video\t\tvideo_capture;\n};\n\n#define ctrl_to_fimc_isp(_ctrl) \\\n\tcontainer_of(ctrl->handler, struct fimc_isp, ctrls.handler)\n\nstruct fimc_is;\n\nint fimc_isp_subdev_create(struct fimc_isp *isp);\nvoid fimc_isp_subdev_destroy(struct fimc_isp *isp);\nvoid fimc_isp_irq_handler(struct fimc_is *is);\nint fimc_is_create_controls(struct fimc_isp *isp);\nint fimc_is_delete_controls(struct fimc_isp *isp);\nconst struct fimc_fmt *fimc_isp_find_format(const u32 *pixelformat,\n\t\t\t\t\tconst u32 *mbus_code, int index);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}