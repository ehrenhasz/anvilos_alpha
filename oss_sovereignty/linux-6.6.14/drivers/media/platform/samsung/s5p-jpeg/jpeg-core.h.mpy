{
  "module_name": "jpeg-core.h",
  "hash_id": "ffc818826e98399c29141248d872d52855e7b612a8f443ad2202b1bb3ce5dbf6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/samsung/s5p-jpeg/jpeg-core.h",
  "human_readable_source": " \n \n\n#ifndef JPEG_CORE_H_\n#define JPEG_CORE_H_\n\n#include <linux/interrupt.h>\n#include <media/jpeg.h>\n#include <media/v4l2-device.h>\n#include <media/v4l2-fh.h>\n#include <media/v4l2-ctrls.h>\n\n#define S5P_JPEG_M2M_NAME\t\t\"s5p-jpeg\"\n\n#define JPEG_MAX_CLOCKS\t\t\t4\n\n \n#define S5P_JPEG_COMPR_QUAL_BEST\t0\n#define S5P_JPEG_COMPR_QUAL_WORST\t3\n\n \n#define S5P_JPEG_COEF11\t\t\t0x4d\n#define S5P_JPEG_COEF12\t\t\t0x97\n#define S5P_JPEG_COEF13\t\t\t0x1e\n#define S5P_JPEG_COEF21\t\t\t0x2c\n#define S5P_JPEG_COEF22\t\t\t0x57\n#define S5P_JPEG_COEF23\t\t\t0x83\n#define S5P_JPEG_COEF31\t\t\t0x83\n#define S5P_JPEG_COEF32\t\t\t0x6e\n#define S5P_JPEG_COEF33\t\t\t0x13\n\n#define EXYNOS3250_IRQ_TIMEOUT\t\t0x10000000\n\n \n#define SJPEG_FMT_FLAG_ENC_CAPTURE\t(1 << 0)\n#define SJPEG_FMT_FLAG_ENC_OUTPUT\t(1 << 1)\n#define SJPEG_FMT_FLAG_DEC_CAPTURE\t(1 << 2)\n#define SJPEG_FMT_FLAG_DEC_OUTPUT\t(1 << 3)\n#define SJPEG_FMT_FLAG_S5P\t\t(1 << 4)\n#define SJPEG_FMT_FLAG_EXYNOS3250\t(1 << 5)\n#define SJPEG_FMT_FLAG_EXYNOS4\t\t(1 << 6)\n#define SJPEG_FMT_RGB\t\t\t(1 << 7)\n#define SJPEG_FMT_NON_RGB\t\t(1 << 8)\n\n#define S5P_JPEG_ENCODE\t\t0\n#define S5P_JPEG_DECODE\t\t1\n#define S5P_JPEG_DISABLE\t-1\n\n#define FMT_TYPE_OUTPUT\t\t0\n#define FMT_TYPE_CAPTURE\t1\n\n#define SJPEG_SUBSAMPLING_444\t0x11\n#define SJPEG_SUBSAMPLING_422\t0x21\n#define SJPEG_SUBSAMPLING_420\t0x22\n\n#define S5P_JPEG_MAX_MARKER\t4\n\n \nenum sjpeg_version {\n\tSJPEG_S5P,\n\tSJPEG_EXYNOS3250,\n\tSJPEG_EXYNOS4,\n\tSJPEG_EXYNOS5420,\n\tSJPEG_EXYNOS5433,\n};\n\nenum exynos4_jpeg_result {\n\tOK_ENC_OR_DEC,\n\tERR_PROT,\n\tERR_DEC_INVALID_FORMAT,\n\tERR_MULTI_SCAN,\n\tERR_FRAME,\n\tERR_UNKNOWN,\n};\n\nenum  exynos4_jpeg_img_quality_level {\n\tQUALITY_LEVEL_1 = 0,\t \n\tQUALITY_LEVEL_2,\n\tQUALITY_LEVEL_3,\n\tQUALITY_LEVEL_4,\t \n};\n\nenum s5p_jpeg_ctx_state {\n\tJPEGCTX_RUNNING = 0,\n\tJPEGCTX_RESOLUTION_CHANGE,\n};\n\n \nstruct s5p_jpeg {\n\tstruct mutex\t\tlock;\n\tspinlock_t\t\tslock;\n\n\tstruct v4l2_device\tv4l2_dev;\n\tstruct video_device\t*vfd_encoder;\n\tstruct video_device\t*vfd_decoder;\n\tstruct v4l2_m2m_dev\t*m2m_dev;\n\n\tvoid __iomem\t\t*regs;\n\tunsigned int\t\tirq;\n\tenum exynos4_jpeg_result irq_ret;\n\tstruct clk\t\t*clocks[JPEG_MAX_CLOCKS];\n\tstruct device\t\t*dev;\n\tstruct s5p_jpeg_variant *variant;\n\tu32\t\t\tirq_status;\n};\n\nstruct s5p_jpeg_variant {\n\tunsigned int\t\tversion;\n\tunsigned int\t\tfmt_ver_flag;\n\tunsigned int\t\thw3250_compat:1;\n\tunsigned int\t\thtbl_reinit:1;\n\tunsigned int\t\thw_ex4_compat:1;\n\tconst struct v4l2_m2m_ops *m2m_ops;\n\tirqreturn_t\t\t(*jpeg_irq)(int irq, void *priv);\n\tconst char\t\t*clk_names[JPEG_MAX_CLOCKS];\n\tint\t\t\tnum_clocks;\n};\n\n \nstruct s5p_jpeg_fmt {\n\tu32\tfourcc;\n\tint\tdepth;\n\tint\tcolplanes;\n\tint\tmemplanes;\n\tint\th_align;\n\tint\tv_align;\n\tint\tsubsampling;\n\tu32\tflags;\n};\n\n \nstruct s5p_jpeg_marker {\n\tu32\tmarker[S5P_JPEG_MAX_MARKER];\n\tu32\tlen[S5P_JPEG_MAX_MARKER];\n\tu32\tn;\n};\n\n \nstruct s5p_jpeg_q_data {\n\tstruct s5p_jpeg_fmt\t*fmt;\n\tu32\t\t\tw;\n\tu32\t\t\th;\n\tu32\t\t\tsos;\n\tstruct s5p_jpeg_marker\tdht;\n\tstruct s5p_jpeg_marker\tdqt;\n\tu32\t\t\tsof;\n\tu32\t\t\tsof_len;\n\tu32\t\t\tsize;\n};\n\n \nstruct s5p_jpeg_ctx {\n\tstruct s5p_jpeg\t\t*jpeg;\n\tunsigned int\t\tmode;\n\tunsigned short\t\tcompr_quality;\n\tunsigned short\t\trestart_interval;\n\tunsigned short\t\tsubsampling;\n\tstruct s5p_jpeg_q_data\tout_q;\n\tstruct s5p_jpeg_q_data\tcap_q;\n\tunsigned int\t\tscale_factor;\n\tstruct v4l2_rect\tcrop_rect;\n\tstruct v4l2_fh\t\tfh;\n\tbool\t\t\thdr_parsed;\n\tbool\t\t\tcrop_altered;\n\tstruct v4l2_ctrl_handler ctrl_handler;\n\tenum s5p_jpeg_ctx_state\tstate;\n};\n\n \nstruct s5p_jpeg_buffer {\n\tunsigned long size;\n\tunsigned long curr;\n\tunsigned long data;\n};\n\n \nstruct s5p_jpeg_addr {\n\tu32     y;\n\tu32     cb;\n\tu32     cr;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}