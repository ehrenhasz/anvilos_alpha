{
  "module_name": "mdp_cfg_data.c",
  "hash_id": "c167c22b11516e646fdaa1cf404147f88f1d273c07fc0a61da81fbcd87fdd485",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/mediatek/mdp3/mdp_cfg_data.c",
  "human_readable_source": "\n \n\n#include \"mtk-img-ipi.h\"\n#include \"mtk-mdp3-cfg.h\"\n#include \"mtk-mdp3-core.h\"\n#include \"mtk-mdp3-comp.h\"\n#include \"mtk-mdp3-regs.h\"\n\nenum mt8183_mdp_comp_id {\n\t \n\tMT8183_MDP_COMP_WPEI = 0,\n\tMT8183_MDP_COMP_WPEO,            \n\tMT8183_MDP_COMP_WPEI2,           \n\tMT8183_MDP_COMP_WPEO2,           \n\tMT8183_MDP_COMP_ISP_IMGI,        \n\tMT8183_MDP_COMP_ISP_IMGO,        \n\tMT8183_MDP_COMP_ISP_IMG2O,       \n\n\t \n\tMT8183_MDP_COMP_IPUI,            \n\tMT8183_MDP_COMP_IPUO,            \n\n\t \n\tMT8183_MDP_COMP_CAMIN,           \n\tMT8183_MDP_COMP_CAMIN2,          \n\tMT8183_MDP_COMP_RDMA0,           \n\tMT8183_MDP_COMP_AAL0,            \n\tMT8183_MDP_COMP_CCORR0,          \n\tMT8183_MDP_COMP_RSZ0,            \n\tMT8183_MDP_COMP_RSZ1,            \n\tMT8183_MDP_COMP_TDSHP0,          \n\tMT8183_MDP_COMP_COLOR0,          \n\tMT8183_MDP_COMP_PATH0_SOUT,      \n\tMT8183_MDP_COMP_PATH1_SOUT,      \n\tMT8183_MDP_COMP_WROT0,           \n\tMT8183_MDP_COMP_WDMA,            \n\n\t \n\tMT8183_MDP_COMP_RDMA1,           \n\tMT8183_MDP_COMP_RSZ2,            \n\tMT8183_MDP_COMP_TDSHP1,          \n\tMT8183_MDP_COMP_WROT1,           \n};\n\nstatic const struct of_device_id mt8183_mdp_probe_infra[MDP_INFRA_MAX] = {\n\t[MDP_INFRA_MMSYS] = { .compatible = \"mediatek,mt8183-mmsys\" },\n\t[MDP_INFRA_MUTEX] = { .compatible = \"mediatek,mt8183-disp-mutex\" },\n\t[MDP_INFRA_SCP] = { .compatible = \"mediatek,mt8183-scp\" }\n};\n\nstatic const struct mdp_platform_config mt8183_plat_cfg = {\n\t.rdma_support_10bit\t\t= true,\n\t.rdma_rsz1_sram_sharing\t\t= true,\n\t.rdma_upsample_repeat_only\t= true,\n\t.rsz_disable_dcm_small_sample\t= false,\n\t.wrot_filter_constraint\t\t= false,\n};\n\nstatic const u32 mt8183_mutex_idx[MDP_MAX_COMP_COUNT] = {\n\t[MDP_COMP_RDMA0] = MUTEX_MOD_IDX_MDP_RDMA0,\n\t[MDP_COMP_RSZ0] = MUTEX_MOD_IDX_MDP_RSZ0,\n\t[MDP_COMP_RSZ1] = MUTEX_MOD_IDX_MDP_RSZ1,\n\t[MDP_COMP_TDSHP0] = MUTEX_MOD_IDX_MDP_TDSHP0,\n\t[MDP_COMP_WROT0] = MUTEX_MOD_IDX_MDP_WROT0,\n\t[MDP_COMP_WDMA] = MUTEX_MOD_IDX_MDP_WDMA,\n\t[MDP_COMP_AAL0] = MUTEX_MOD_IDX_MDP_AAL0,\n\t[MDP_COMP_CCORR0] = MUTEX_MOD_IDX_MDP_CCORR0,\n};\n\nstatic const struct mdp_comp_data mt8183_mdp_comp_data[MDP_MAX_COMP_COUNT] = {\n\t[MDP_COMP_WPEI] = {\n\t\t{MDP_COMP_TYPE_WPEI, 0, MT8183_MDP_COMP_WPEI},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_WPEO] = {\n\t\t{MDP_COMP_TYPE_EXTO, 2, MT8183_MDP_COMP_WPEO},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_WPEI2] = {\n\t\t{MDP_COMP_TYPE_WPEI, 1, MT8183_MDP_COMP_WPEI2},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_WPEO2] = {\n\t\t{MDP_COMP_TYPE_EXTO, 3, MT8183_MDP_COMP_WPEO2},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_ISP_IMGI] = {\n\t\t{MDP_COMP_TYPE_IMGI, 0, MT8183_MDP_COMP_ISP_IMGI},\n\t\t{0, 0, 4}\n\t},\n\t[MDP_COMP_ISP_IMGO] = {\n\t\t{MDP_COMP_TYPE_EXTO, 0, MT8183_MDP_COMP_ISP_IMGO},\n\t\t{0, 0, 4}\n\t},\n\t[MDP_COMP_ISP_IMG2O] = {\n\t\t{MDP_COMP_TYPE_EXTO, 1, MT8183_MDP_COMP_ISP_IMG2O},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_CAMIN] = {\n\t\t{MDP_COMP_TYPE_DL_PATH, 0, MT8183_MDP_COMP_CAMIN},\n\t\t{2, 2, 1}\n\t},\n\t[MDP_COMP_CAMIN2] = {\n\t\t{MDP_COMP_TYPE_DL_PATH, 1, MT8183_MDP_COMP_CAMIN2},\n\t\t{2, 4, 1}\n\t},\n\t[MDP_COMP_RDMA0] = {\n\t\t{MDP_COMP_TYPE_RDMA, 0, MT8183_MDP_COMP_RDMA0},\n\t\t{2, 0, 0}\n\t},\n\t[MDP_COMP_CCORR0] = {\n\t\t{MDP_COMP_TYPE_CCORR, 0, MT8183_MDP_COMP_CCORR0},\n\t\t{1, 0, 0}\n\t},\n\t[MDP_COMP_RSZ0] = {\n\t\t{MDP_COMP_TYPE_RSZ, 0, MT8183_MDP_COMP_RSZ0},\n\t\t{1, 0, 0}\n\t},\n\t[MDP_COMP_RSZ1] = {\n\t\t{MDP_COMP_TYPE_RSZ, 1, MT8183_MDP_COMP_RSZ1},\n\t\t{1, 0, 0}\n\t},\n\t[MDP_COMP_TDSHP0] = {\n\t\t{MDP_COMP_TYPE_TDSHP, 0, MT8183_MDP_COMP_TDSHP0},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_PATH0_SOUT] = {\n\t\t{MDP_COMP_TYPE_PATH, 0, MT8183_MDP_COMP_PATH0_SOUT},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_PATH1_SOUT] = {\n\t\t{MDP_COMP_TYPE_PATH, 1, MT8183_MDP_COMP_PATH1_SOUT},\n\t\t{0, 0, 0}\n\t},\n\t[MDP_COMP_WROT0] = {\n\t\t{MDP_COMP_TYPE_WROT, 0, MT8183_MDP_COMP_WROT0},\n\t\t{1, 0, 0}\n\t},\n\t[MDP_COMP_WDMA] = {\n\t\t{MDP_COMP_TYPE_WDMA, 0, MT8183_MDP_COMP_WDMA},\n\t\t{1, 0, 0}\n\t},\n};\n\nstatic const struct of_device_id mt8183_sub_comp_dt_ids[] = {\n\t{\n\t\t.compatible = \"mediatek,mt8183-mdp3-wdma\",\n\t\t.data = (void *)MDP_COMP_TYPE_PATH,\n\t}, {\n\t\t.compatible = \"mediatek,mt8183-mdp3-wrot\",\n\t\t.data = (void *)MDP_COMP_TYPE_PATH,\n\t},\n\t{}\n};\n\n \nstatic const struct mdp_format mt8183_formats[] = {\n\t{\n\t\t.pixelformat\t= V4L2_PIX_FMT_GREY,\n\t\t.mdp_color\t= MDP_COLOR_GREY,\n\t\t.depth\t\t= { 8 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_RGB565X,\n\t\t.mdp_color\t= MDP_COLOR_BGR565,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_RGB565,\n\t\t.mdp_color\t= MDP_COLOR_RGB565,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_RGB24,\n\t\t.mdp_color\t= MDP_COLOR_RGB888,\n\t\t.depth\t\t= { 24 },\n\t\t.row_depth\t= { 24 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_BGR24,\n\t\t.mdp_color\t= MDP_COLOR_BGR888,\n\t\t.depth\t\t= { 24 },\n\t\t.row_depth\t= { 24 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_ABGR32,\n\t\t.mdp_color\t= MDP_COLOR_BGRA8888,\n\t\t.depth\t\t= { 32 },\n\t\t.row_depth\t= { 32 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_ARGB32,\n\t\t.mdp_color\t= MDP_COLOR_ARGB8888,\n\t\t.depth\t\t= { 32 },\n\t\t.row_depth\t= { 32 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_UYVY,\n\t\t.mdp_color\t= MDP_COLOR_UYVY,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_VYUY,\n\t\t.mdp_color\t= MDP_COLOR_VYUY,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YUYV,\n\t\t.mdp_color\t= MDP_COLOR_YUYV,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YVYU,\n\t\t.mdp_color\t= MDP_COLOR_YVYU,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 16 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YUV420,\n\t\t.mdp_color\t= MDP_COLOR_I420,\n\t\t.depth\t\t= { 12 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YVU420,\n\t\t.mdp_color\t= MDP_COLOR_YV12,\n\t\t.depth\t\t= { 12 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV12,\n\t\t.mdp_color\t= MDP_COLOR_NV12,\n\t\t.depth\t\t= { 12 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV21,\n\t\t.mdp_color\t= MDP_COLOR_NV21,\n\t\t.depth\t\t= { 12 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV16,\n\t\t.mdp_color\t= MDP_COLOR_NV16,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV61,\n\t\t.mdp_color\t= MDP_COLOR_NV61,\n\t\t.depth\t\t= { 16 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV24,\n\t\t.mdp_color\t= MDP_COLOR_NV24,\n\t\t.depth\t\t= { 24 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV42,\n\t\t.mdp_color\t= MDP_COLOR_NV42,\n\t\t.depth\t\t= { 24 },\n\t\t.row_depth\t= { 8 },\n\t\t.num_planes\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_MT21C,\n\t\t.mdp_color\t= MDP_COLOR_420_BLK_UFO,\n\t\t.depth\t\t= { 8, 4 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 4,\n\t\t.halign\t\t= 5,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_MM21,\n\t\t.mdp_color\t= MDP_COLOR_420_BLK,\n\t\t.depth\t\t= { 8, 4 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 4,\n\t\t.halign\t\t= 5,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV12M,\n\t\t.mdp_color\t= MDP_COLOR_NV12,\n\t\t.depth\t\t= { 8, 4 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV21M,\n\t\t.mdp_color\t= MDP_COLOR_NV21,\n\t\t.depth\t\t= { 8, 4 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV16M,\n\t\t.mdp_color\t= MDP_COLOR_NV16,\n\t\t.depth\t\t= { 8, 8 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_NV61M,\n\t\t.mdp_color\t= MDP_COLOR_NV61,\n\t\t.depth\t\t= { 8, 8 },\n\t\t.row_depth\t= { 8, 8 },\n\t\t.num_planes\t= 2,\n\t\t.walign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YUV420M,\n\t\t.mdp_color\t= MDP_COLOR_I420,\n\t\t.depth\t\t= { 8, 2, 2 },\n\t\t.row_depth\t= { 8, 4, 4 },\n\t\t.num_planes\t= 3,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}, {\n\t\t.pixelformat\t= V4L2_PIX_FMT_YVU420M,\n\t\t.mdp_color\t= MDP_COLOR_YV12,\n\t\t.depth\t\t= { 8, 2, 2 },\n\t\t.row_depth\t= { 8, 4, 4 },\n\t\t.num_planes\t= 3,\n\t\t.walign\t\t= 1,\n\t\t.halign\t\t= 1,\n\t\t.flags\t\t= MDP_FMT_FLAG_OUTPUT | MDP_FMT_FLAG_CAPTURE,\n\t}\n};\n\nstatic const struct mdp_limit mt8183_mdp_def_limit = {\n\t.out_limit = {\n\t\t.wmin\t= 16,\n\t\t.hmin\t= 16,\n\t\t.wmax\t= 8176,\n\t\t.hmax\t= 8176,\n\t},\n\t.cap_limit = {\n\t\t.wmin\t= 2,\n\t\t.hmin\t= 2,\n\t\t.wmax\t= 8176,\n\t\t.hmax\t= 8176,\n\t},\n\t.h_scale_up_max = 32,\n\t.v_scale_up_max = 32,\n\t.h_scale_down_max = 20,\n\t.v_scale_down_max = 128,\n};\n\nstatic const struct mdp_pipe_info mt8183_pipe_info[] = {\n\t[MDP_PIPE_WPEI] = {MDP_PIPE_WPEI, 0},\n\t[MDP_PIPE_WPEI2] = {MDP_PIPE_WPEI2, 1},\n\t[MDP_PIPE_IMGI] = {MDP_PIPE_IMGI, 2},\n\t[MDP_PIPE_RDMA0] = {MDP_PIPE_RDMA0, 3}\n};\n\nconst struct mtk_mdp_driver_data mt8183_mdp_driver_data = {\n\t.mdp_plat_id = MT8183,\n\t.mdp_probe_infra = mt8183_mdp_probe_infra,\n\t.mdp_cfg = &mt8183_plat_cfg,\n\t.mdp_mutex_table_idx = mt8183_mutex_idx,\n\t.comp_data = mt8183_mdp_comp_data,\n\t.comp_data_len = ARRAY_SIZE(mt8183_mdp_comp_data),\n\t.mdp_sub_comp_dt_ids = mt8183_sub_comp_dt_ids,\n\t.format = mt8183_formats,\n\t.format_len = ARRAY_SIZE(mt8183_formats),\n\t.def_limit = &mt8183_mdp_def_limit,\n\t.pipe_info = mt8183_pipe_info,\n\t.pipe_info_len = ARRAY_SIZE(mt8183_pipe_info),\n};\n\ns32 mdp_cfg_get_id_inner(struct mdp_dev *mdp_dev, enum mtk_mdp_comp_id id)\n{\n\tif (!mdp_dev)\n\t\treturn MDP_COMP_NONE;\n\tif (id <= MDP_COMP_NONE || id >= MDP_MAX_COMP_COUNT)\n\t\treturn MDP_COMP_NONE;\n\n\treturn mdp_dev->mdp_data->comp_data[id].match.inner_id;\n}\n\nenum mtk_mdp_comp_id mdp_cfg_get_id_public(struct mdp_dev *mdp_dev, s32 inner_id)\n{\n\tenum mtk_mdp_comp_id public_id = MDP_COMP_NONE;\n\tu32 i;\n\n\tif (IS_ERR(mdp_dev) || !inner_id)\n\t\tgoto err_public_id;\n\n\tfor (i = 0; i < MDP_MAX_COMP_COUNT; i++) {\n\t\tif (mdp_dev->mdp_data->comp_data[i].match.inner_id == inner_id) {\n\t\t\tpublic_id = i;\n\t\t\treturn public_id;\n\t\t}\n\t}\n\nerr_public_id:\n\treturn public_id;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}