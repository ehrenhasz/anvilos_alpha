{
  "module_name": "mtk-img-ipi.h",
  "hash_id": "128d11be53d531e6d09a7962e30b6b35b7c6df4656d05bcfb45cbd9b7b63e0c5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/mediatek/mdp3/mtk-img-ipi.h",
  "human_readable_source": " \n \n\n#ifndef __MTK_IMG_IPI_H__\n#define __MTK_IMG_IPI_H__\n\n#include <linux/err.h>\n#include \"mdp_sm_mt8183.h\"\n#include \"mtk-mdp3-type.h\"\n\n \n\n#define IMG_IPI_INIT    1\n#define IMG_IPI_DEINIT  2\n#define IMG_IPI_FRAME   3\n#define IMG_IPI_DEBUG   4\n\nstruct img_timeval {\n\tu32 tv_sec;\n\tu32 tv_usec;\n} __packed;\n\nstruct img_addr {\n\tu64 va;  \n\tu32 pa;  \n\tu32 iova;  \n} __packed;\n\nstruct tuning_addr {\n\tu64\tpresent;\n\tu32\tpa;\t \n\tu32\tiova;\t \n} __packed;\n\nstruct img_sw_addr {\n\tu64 va;  \n\tu32 pa;  \n} __packed;\n\nstruct img_plane_format {\n\tu32 size;\n\tu32 stride;\n} __packed;\n\nstruct img_pix_format {\n\tu32 width;\n\tu32 height;\n\tu32 colorformat;  \n\tu32 ycbcr_prof;  \n\tstruct img_plane_format plane_fmt[IMG_MAX_PLANES];\n} __packed;\n\nstruct img_image_buffer {\n\tstruct img_pix_format format;\n\tu32 iova[IMG_MAX_PLANES];\n\t \n\tu32 usage;\n} __packed;\n\n#define IMG_SUBPIXEL_SHIFT\t20\n\n#define IMG_CTRL_FLAG_HFLIP\tBIT(0)\n#define IMG_CTRL_FLAG_DITHER\tBIT(1)\n#define IMG_CTRL_FLAG_SHARPNESS\tBIT(4)\n#define IMG_CTRL_FLAG_HDR\tBIT(5)\n#define IMG_CTRL_FLAG_DRE\tBIT(6)\n\nstruct img_input {\n\tstruct img_image_buffer buffer;\n\tu32 flags;  \n} __packed;\n\nstruct img_output {\n\tstruct img_image_buffer buffer;\n\tstruct img_crop crop;\n\ts32 rotation;\n\tu32 flags;  \n} __packed;\n\nstruct img_ipi_frameparam {\n\tu32 index;\n\tu32 frame_no;\n\tstruct img_timeval timestamp;\n\tu32 type;  \n\tu32 state;\n\tu32 num_inputs;\n\tu32 num_outputs;\n\tu64 drv_data;\n\tstruct img_input inputs[IMG_MAX_HW_INPUTS];\n\tstruct img_output outputs[IMG_MAX_HW_OUTPUTS];\n\tstruct tuning_addr tuning_data;\n\tstruct img_addr subfrm_data;\n\tstruct img_sw_addr config_data;\n\tstruct img_sw_addr self_data;\n} __packed;\n\nstruct img_sw_buffer {\n\tu64\thandle;\t\t \n\tu32\tscp_addr;\t \n} __packed;\n\nstruct img_ipi_param {\n\tu32 usage;\n\tstruct img_sw_buffer frm_param;\n} __packed;\n\nstruct img_frameparam {\n\tstruct list_head list_entry;\n\tstruct img_ipi_frameparam frameparam;\n} __packed;\n\n \n#define MT8183 8183\n\n#define CFG_CHECK(plat, p_id) ((plat) == (p_id))\n\n#define _CFG_OFST(plat, cfg, ofst) ((void *)(&((cfg)->config_##plat) + (ofst)))\n#define CFG_OFST(plat, cfg, ofst) \\\n\t(IS_ERR_OR_NULL(cfg) ? NULL : _CFG_OFST(plat, cfg, ofst))\n\n#define _CFG_ADDR(plat, cfg, mem) (&((cfg)->config_##plat.mem))\n#define CFG_ADDR(plat, cfg, mem) \\\n\t(IS_ERR_OR_NULL(cfg) ? NULL : _CFG_ADDR(plat, cfg, mem))\n\n#define _CFG_GET(plat, cfg, mem) ((cfg)->config_##plat.mem)\n#define CFG_GET(plat, cfg, mem) \\\n\t(IS_ERR_OR_NULL(cfg) ? 0 : _CFG_GET(plat, cfg, mem))\n\n#define _CFG_COMP(plat, comp, mem) ((comp)->comp_##plat.mem)\n#define CFG_COMP(plat, comp, mem) \\\n\t(IS_ERR_OR_NULL(comp) ? 0 : _CFG_COMP(plat, comp, mem))\n\nstruct img_config {\n\tunion {\n\t\tstruct img_config_8183 config_8183;\n\t};\n} __packed;\n\nstruct img_compparam {\n\tunion {\n\t\tstruct img_compparam_8183 comp_8183;\n\t};\n} __packed;\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}