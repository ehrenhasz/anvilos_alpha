{
  "module_name": "mtk-mdp3-core.h",
  "hash_id": "6e59dce36a63b745ed281a38a6e8b791063837815a64fca4c51923c14becb3b1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/mediatek/mdp3/mtk-mdp3-core.h",
  "human_readable_source": " \n \n\n#ifndef __MTK_MDP3_CORE_H__\n#define __MTK_MDP3_CORE_H__\n\n#include <media/v4l2-device.h>\n#include <media/v4l2-mem2mem.h>\n#include <linux/soc/mediatek/mtk-mmsys.h>\n#include <linux/soc/mediatek/mtk-mutex.h>\n#include \"mtk-mdp3-comp.h\"\n#include \"mtk-mdp3-vpu.h\"\n\n#define MDP_MODULE_NAME\t\t\"mtk-mdp3\"\n#define MDP_DEVICE_NAME\t\t\"MediaTek MDP3\"\n#define MDP_PHANDLE_NAME\t\"mediatek,mdp3\"\n\nenum mdp_infra_id {\n\tMDP_INFRA_MMSYS,\n\tMDP_INFRA_MUTEX,\n\tMDP_INFRA_SCP,\n\tMDP_INFRA_MAX\n};\n\nenum mdp_buffer_usage {\n\tMDP_BUFFER_USAGE_HW_READ,\n\tMDP_BUFFER_USAGE_MDP,\n\tMDP_BUFFER_USAGE_MDP2,\n\tMDP_BUFFER_USAGE_ISP,\n\tMDP_BUFFER_USAGE_WPE,\n};\n\nstruct mdp_platform_config {\n\tbool\trdma_support_10bit;\n\tbool\trdma_rsz1_sram_sharing;\n\tbool\trdma_upsample_repeat_only;\n\tbool\trsz_disable_dcm_small_sample;\n\tbool\twrot_filter_constraint;\n};\n\n \nenum mdp_pipe_id {\n\tMDP_PIPE_WPEI,\n\tMDP_PIPE_WPEI2,\n\tMDP_PIPE_IMGI,\n\tMDP_PIPE_RDMA0,\n\tMDP_PIPE_MAX\n};\n\nstruct mtk_mdp_driver_data {\n\tconst int mdp_plat_id;\n\tconst struct of_device_id *mdp_probe_infra;\n\tconst struct mdp_platform_config *mdp_cfg;\n\tconst u32 *mdp_mutex_table_idx;\n\tconst struct mdp_comp_data *comp_data;\n\tunsigned int comp_data_len;\n\tconst struct of_device_id *mdp_sub_comp_dt_ids;\n\tconst struct mdp_format *format;\n\tunsigned int format_len;\n\tconst struct mdp_limit *def_limit;\n\tconst struct mdp_pipe_info *pipe_info;\n\tunsigned int pipe_info_len;\n};\n\nstruct mdp_dev {\n\tstruct platform_device\t\t\t*pdev;\n\tstruct device\t\t\t\t*mdp_mmsys;\n\tstruct mtk_mutex\t\t\t*mdp_mutex[MDP_PIPE_MAX];\n\tstruct mdp_comp\t\t\t\t*comp[MDP_MAX_COMP_COUNT];\n\tconst struct mtk_mdp_driver_data\t*mdp_data;\n\n\tstruct workqueue_struct\t\t\t*job_wq;\n\tstruct workqueue_struct\t\t\t*clock_wq;\n\tstruct mdp_vpu_dev\t\t\tvpu;\n\tstruct mtk_scp\t\t\t\t*scp;\n\tstruct rproc\t\t\t\t*rproc_handle;\n\t \n\tstruct mutex\t\t\t\tvpu_lock;\n\ts32\t\t\t\t\tvpu_count;\n\tu32\t\t\t\t\tid_count;\n\tstruct ida\t\t\t\tmdp_ida;\n\tstruct cmdq_client\t\t\t*cmdq_clt;\n\twait_queue_head_t\t\t\tcallback_wq;\n\n\tstruct v4l2_device\t\t\tv4l2_dev;\n\tstruct video_device\t\t\t*m2m_vdev;\n\tstruct v4l2_m2m_dev\t\t\t*m2m_dev;\n\t \n\tstruct mutex\t\t\t\tm2m_lock;\n\tatomic_t\t\t\t\tsuspended;\n\tatomic_t\t\t\t\tjob_count;\n};\n\nstruct mdp_pipe_info {\n\tenum mdp_pipe_id pipe_id;\n\tu32 mutex_id;\n};\n\nint mdp_vpu_get_locked(struct mdp_dev *mdp);\nvoid mdp_vpu_put_locked(struct mdp_dev *mdp);\nint mdp_vpu_register(struct mdp_dev *mdp);\nvoid mdp_vpu_unregister(struct mdp_dev *mdp);\nvoid mdp_video_device_release(struct video_device *vdev);\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}