{
  "module_name": "mtk_vcodec_fw.c",
  "hash_id": "eda5954b8916c56a6594c834d0f1148b2a370b78a5a27af1966b5a2b524c85c3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/platform/mediatek/vcodec/common/mtk_vcodec_fw.c",
  "human_readable_source": "\n\n#include \"../decoder/mtk_vcodec_dec_drv.h\"\n#include \"../encoder/mtk_vcodec_enc_drv.h\"\n#include \"mtk_vcodec_fw_priv.h\"\n\nstruct mtk_vcodec_fw *mtk_vcodec_fw_select(void *priv, enum mtk_vcodec_fw_type type,\n\t\t\t\t\t   enum mtk_vcodec_fw_use fw_use)\n{\n\tstruct platform_device *plat_dev;\n\n\tif (fw_use == ENCODER)\n\t\tplat_dev = ((struct mtk_vcodec_enc_dev *)priv)->plat_dev;\n\telse\n\t\tplat_dev = ((struct mtk_vcodec_dec_dev *)priv)->plat_dev;\n\n\tswitch (type) {\n\tcase VPU:\n\t\treturn mtk_vcodec_fw_vpu_init(priv, fw_use);\n\tcase SCP:\n\t\treturn mtk_vcodec_fw_scp_init(priv, fw_use);\n\tdefault:\n\t\tdev_err(&plat_dev->dev, \"Invalid vcodec fw type\");\n\t\treturn ERR_PTR(-EINVAL);\n\t}\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_select);\n\nvoid mtk_vcodec_fw_release(struct mtk_vcodec_fw *fw)\n{\n\tfw->ops->release(fw);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_release);\n\nint mtk_vcodec_fw_load_firmware(struct mtk_vcodec_fw *fw)\n{\n\treturn fw->ops->load_firmware(fw);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_load_firmware);\n\nunsigned int mtk_vcodec_fw_get_vdec_capa(struct mtk_vcodec_fw *fw)\n{\n\treturn fw->ops->get_vdec_capa(fw);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_get_vdec_capa);\n\nunsigned int mtk_vcodec_fw_get_venc_capa(struct mtk_vcodec_fw *fw)\n{\n\treturn fw->ops->get_venc_capa(fw);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_get_venc_capa);\n\nvoid *mtk_vcodec_fw_map_dm_addr(struct mtk_vcodec_fw *fw, u32 mem_addr)\n{\n\treturn fw->ops->map_dm_addr(fw, mem_addr);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_map_dm_addr);\n\nint mtk_vcodec_fw_ipi_register(struct mtk_vcodec_fw *fw, int id,\n\t\t\t       mtk_vcodec_ipi_handler handler,\n\t\t\t       const char *name, void *priv)\n{\n\treturn fw->ops->ipi_register(fw, id, handler, name, priv);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_ipi_register);\n\nint mtk_vcodec_fw_ipi_send(struct mtk_vcodec_fw *fw, int id, void *buf,\n\t\t\t   unsigned int len, unsigned int wait)\n{\n\treturn fw->ops->ipi_send(fw, id, buf, len, wait);\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_ipi_send);\n\nint mtk_vcodec_fw_get_type(struct mtk_vcodec_fw *fw)\n{\n\treturn fw->type;\n}\nEXPORT_SYMBOL_GPL(mtk_vcodec_fw_get_type);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}