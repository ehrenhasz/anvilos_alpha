{
  "module_name": "nuvoton-cir.h",
  "hash_id": "37f0fce4057d66262f11f2baa9730e96d782805c6329aeada4c51fb808736b67",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/rc/nuvoton-cir.h",
  "human_readable_source": " \n \n\n#include <linux/spinlock.h>\n#include <linux/ioctl.h>\n\n \n#define NVT_DRIVER_NAME \"nuvoton-cir\"\n\n \nstatic int debug;\n\n\n#define nvt_dbg(text, ...) \\\n\tif (debug) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n#define nvt_dbg_verbose(text, ...) \\\n\tif (debug > 1) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n#define nvt_dbg_wake(text, ...) \\\n\tif (debug > 2) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n\n#define RX_BUF_LEN 32\n\n#define SIO_ID_MASK 0xfff0\n\nenum nvt_chip_ver {\n\tNVT_UNKNOWN\t= 0,\n\tNVT_W83667HG\t= 0xa510,\n\tNVT_6775F\t= 0xb470,\n\tNVT_6776F\t= 0xc330,\n\tNVT_6779D\t= 0xc560,\n\tNVT_INVALID\t= 0xffff,\n};\n\nstruct nvt_chip {\n\tconst char *name;\n\tenum nvt_chip_ver chip_ver;\n};\n\nstruct nvt_dev {\n\tstruct rc_dev *rdev;\n\n\tspinlock_t lock;\n\n\t \n\tu8 buf[RX_BUF_LEN];\n\tunsigned int pkts;\n\n\t \n\tu32 cr_efir;\n\tu32 cr_efdr;\n\n\t \n\tunsigned long cir_addr;\n\tunsigned long cir_wake_addr;\n\tint cir_irq;\n\n\tenum nvt_chip_ver chip_ver;\n\t \n\tu8 chip_major;\n\tu8 chip_minor;\n\n\t \n\tu32 carrier;\n};\n\n \n#define BUF_PULSE_BIT\t0x80\n#define BUF_LEN_MASK\t0x7f\n#define BUF_REPEAT_BYTE\t0x70\n#define BUF_REPEAT_MASK\t0xf0\n\n \n\n \n#define CIR_IOREG_LENGTH\t0x0f\n\n \n#define CIR_RX_LIMIT_COUNT  (IR_DEFAULT_TIMEOUT / SAMPLE_PERIOD)\n\n \n#define CIR_IRCON\t0x00\n#define CIR_IRSTS\t0x01\n#define CIR_IREN\t0x02\n#define CIR_RXFCONT\t0x03\n#define CIR_CP\t\t0x04\n#define CIR_CC\t\t0x05\n#define CIR_SLCH\t0x06\n#define CIR_SLCL\t0x07\n#define CIR_FIFOCON\t0x08\n#define CIR_IRFIFOSTS\t0x09\n#define CIR_SRXFIFO\t0x0a\n#define CIR_TXFCONT\t0x0b\n#define CIR_STXFIFO\t0x0c\n#define CIR_FCCH\t0x0d\n#define CIR_FCCL\t0x0e\n#define CIR_IRFSM\t0x0f\n\n \n#define CIR_IRCON_RECV\t 0x80\n#define CIR_IRCON_WIREN\t 0x40\n#define CIR_IRCON_TXEN\t 0x20\n#define CIR_IRCON_RXEN\t 0x10\n#define CIR_IRCON_WRXINV 0x08\n#define CIR_IRCON_RXINV\t 0x04\n\n#define CIR_IRCON_SAMPLE_PERIOD_SEL_1\t0x00\n#define CIR_IRCON_SAMPLE_PERIOD_SEL_25\t0x01\n#define CIR_IRCON_SAMPLE_PERIOD_SEL_50\t0x02\n#define CIR_IRCON_SAMPLE_PERIOD_SEL_100\t0x03\n\n \n \n#define CIR_IRCON_SAMPLE_PERIOD_SEL\tCIR_IRCON_SAMPLE_PERIOD_SEL_50\n\n \n#define CIR_IRSTS_RDR\t0x80\n#define CIR_IRSTS_RTR\t0x40\n#define CIR_IRSTS_PE\t0x20\n#define CIR_IRSTS_RFO\t0x10\n#define CIR_IRSTS_TE\t0x08\n#define CIR_IRSTS_TTR\t0x04\n#define CIR_IRSTS_TFU\t0x02\n#define CIR_IRSTS_GH\t0x01\n\n \n#define CIR_IREN_RDR\t0x80\n#define CIR_IREN_RTR\t0x40\n#define CIR_IREN_PE\t0x20\n#define CIR_IREN_RFO\t0x10\n#define CIR_IREN_TE\t0x08\n#define CIR_IREN_TTR\t0x04\n#define CIR_IREN_TFU\t0x02\n#define CIR_IREN_GH\t0x01\n\n \n#define CIR_FIFOCON_TXFIFOCLR\t\t0x80\n\n#define CIR_FIFOCON_TX_TRIGGER_LEV_31\t0x00\n#define CIR_FIFOCON_TX_TRIGGER_LEV_24\t0x10\n#define CIR_FIFOCON_TX_TRIGGER_LEV_16\t0x20\n#define CIR_FIFOCON_TX_TRIGGER_LEV_8\t0x30\n\n \n \n#define CIR_FIFOCON_TX_TRIGGER_LEV\tCIR_FIFOCON_TX_TRIGGER_LEV_16\n\n#define CIR_FIFOCON_RXFIFOCLR\t\t0x08\n\n#define CIR_FIFOCON_RX_TRIGGER_LEV_1\t0x00\n#define CIR_FIFOCON_RX_TRIGGER_LEV_8\t0x01\n#define CIR_FIFOCON_RX_TRIGGER_LEV_16\t0x02\n#define CIR_FIFOCON_RX_TRIGGER_LEV_24\t0x03\n\n \n \n#define CIR_FIFOCON_RX_TRIGGER_LEV\tCIR_FIFOCON_RX_TRIGGER_LEV_24\n\n \n#define CIR_IRFIFOSTS_IR_PENDING\t0x80\n#define CIR_IRFIFOSTS_RX_GS\t\t0x40\n#define CIR_IRFIFOSTS_RX_FTA\t\t0x20\n#define CIR_IRFIFOSTS_RX_EMPTY\t\t0x10\n#define CIR_IRFIFOSTS_RX_FULL\t\t0x08\n#define CIR_IRFIFOSTS_TX_FTA\t\t0x04\n#define CIR_IRFIFOSTS_TX_EMPTY\t\t0x02\n#define CIR_IRFIFOSTS_TX_FULL\t\t0x01\n\n\n \n#define CIR_WAKE_IRCON\t\t\t0x00\n#define CIR_WAKE_IRSTS\t\t\t0x01\n#define CIR_WAKE_IREN\t\t\t0x02\n#define CIR_WAKE_FIFO_CMP_DEEP\t\t0x03\n#define CIR_WAKE_FIFO_CMP_TOL\t\t0x04\n#define CIR_WAKE_FIFO_COUNT\t\t0x05\n#define CIR_WAKE_SLCH\t\t\t0x06\n#define CIR_WAKE_SLCL\t\t\t0x07\n#define CIR_WAKE_FIFOCON\t\t0x08\n#define CIR_WAKE_SRXFSTS\t\t0x09\n#define CIR_WAKE_SAMPLE_RX_FIFO\t\t0x0a\n#define CIR_WAKE_WR_FIFO_DATA\t\t0x0b\n#define CIR_WAKE_RD_FIFO_ONLY\t\t0x0c\n#define CIR_WAKE_RD_FIFO_ONLY_IDX\t0x0d\n#define CIR_WAKE_FIFO_IGNORE\t\t0x0e\n#define CIR_WAKE_IRFSM\t\t\t0x0f\n\n \n#define CIR_WAKE_IRCON_DEC_RST\t\t0x80\n#define CIR_WAKE_IRCON_MODE1\t\t0x40\n#define CIR_WAKE_IRCON_MODE0\t\t0x20\n#define CIR_WAKE_IRCON_RXEN\t\t0x10\n#define CIR_WAKE_IRCON_R\t\t0x08\n#define CIR_WAKE_IRCON_RXINV\t\t0x04\n\n \n \n#define CIR_WAKE_IRCON_SAMPLE_PERIOD_SEL\tCIR_IRCON_SAMPLE_PERIOD_SEL_50\n\n \n#define CIR_WAKE_IRSTS_RDR\t\t0x80\n#define CIR_WAKE_IRSTS_RTR\t\t0x40\n#define CIR_WAKE_IRSTS_PE\t\t0x20\n#define CIR_WAKE_IRSTS_RFO\t\t0x10\n#define CIR_WAKE_IRSTS_GH\t\t0x08\n#define CIR_WAKE_IRSTS_IR_PENDING\t0x01\n\n \n#define CIR_WAKE_IREN_RDR\t\t0x80\n#define CIR_WAKE_IREN_RTR\t\t0x40\n#define CIR_WAKE_IREN_PE\t\t0x20\n#define CIR_WAKE_IREN_RFO\t\t0x10\n#define CIR_WAKE_IREN_GH\t\t0x08\n\n \n#define CIR_WAKE_FIFOCON_RXFIFOCLR\t0x08\n\n#define CIR_WAKE_FIFOCON_RX_TRIGGER_LEV_67\t0x00\n#define CIR_WAKE_FIFOCON_RX_TRIGGER_LEV_66\t0x01\n#define CIR_WAKE_FIFOCON_RX_TRIGGER_LEV_65\t0x02\n#define CIR_WAKE_FIFOCON_RX_TRIGGER_LEV_64\t0x03\n\n \n \n#define CIR_WAKE_FIFOCON_RX_TRIGGER_LEV\tCIR_WAKE_FIFOCON_RX_TRIGGER_LEV_67\n\n \n#define CIR_WAKE_IRFIFOSTS_RX_GS\t0x80\n#define CIR_WAKE_IRFIFOSTS_RX_FTA\t0x40\n#define CIR_WAKE_IRFIFOSTS_RX_EMPTY\t0x20\n#define CIR_WAKE_IRFIFOSTS_RX_FULL\t0x10\n\n \n#define CIR_WAKE_FIFO_CMP_BYTES\t\t65\n \n#define CIR_WAKE_CMP_TOLERANCE\t\t5\n\n \n#define CR_EFIR\t\t\t0x2e\n#define CR_EFDR\t\t\t0x2f\n\n \n#define CR_EFIR2\t\t0x4e\n#define CR_EFDR2\t\t0x4f\n\n \n#define EFER_EFM_ENABLE\t\t0x87\n#define EFER_EFM_DISABLE\t0xaa\n\n \n#define CR_SOFTWARE_RESET\t0x02\n#define CR_LOGICAL_DEV_SEL\t0x07\n#define CR_CHIP_ID_HI\t\t0x20\n#define CR_CHIP_ID_LO\t\t0x21\n#define CR_DEV_POWER_DOWN\t0x22  \n#define CR_OUTPUT_PIN_SEL\t0x27\n#define CR_MULTIFUNC_PIN_SEL\t0x2c\n#define CR_LOGICAL_DEV_EN\t0x30  \n \n#define CR_CIR_BASE_ADDR_HI\t0x60\n#define CR_CIR_BASE_ADDR_LO\t0x61\n#define CR_CIR_IRQ_RSRC\t\t0x70\n \n#define CR_ACPI_CIR_WAKE\t0xe0\n#define CR_ACPI_IRQ_EVENTS\t0xf6\n#define CR_ACPI_IRQ_EVENTS2\t0xf7\n\n \n#define LOGICAL_DEV_LPT\t\t0x01\n#define LOGICAL_DEV_CIR\t\t0x06\n#define LOGICAL_DEV_ACPI\t0x0a\n#define LOGICAL_DEV_CIR_WAKE\t0x0e\n\n#define LOGICAL_DEV_DISABLE\t0x00\n#define LOGICAL_DEV_ENABLE\t0x01\n\n#define CIR_WAKE_ENABLE_BIT\t0x08\n#define PME_INTR_CIR_PASS_BIT\t0x08\n\n \n#define OUTPUT_PIN_SEL_MASK\t0xbc\n#define OUTPUT_ENABLE_CIR\t0x01  \n#define OUTPUT_ENABLE_CIRWB\t0x40  \n\n \n#define MULTIFUNC_PIN_SEL_MASK\t0x1f\n#define MULTIFUNC_ENABLE_CIR\t0x80  \n#define MULTIFUNC_ENABLE_CIRWB\t0x20  \n\n \n\n \n#define CONTROLLER_BUF_LEN_MIN 830\n\n \n#define KEYBOARD_BUF_LEN_MAX 650\n#define KEYBOARD_BUF_LEN_MIN 610\n\n \n#define MOUSE_BUF_LEN_MIN 565\n\n#define CIR_SAMPLE_PERIOD 50\n#define CIR_SAMPLE_LOW_INACCURACY 0.85\n\n \n#define MAX_SILENCE_TIME 60000\n\n#if CIR_IRCON_SAMPLE_PERIOD_SEL == CIR_IRCON_SAMPLE_PERIOD_SEL_100\n#define SAMPLE_PERIOD 100\n\n#elif CIR_IRCON_SAMPLE_PERIOD_SEL == CIR_IRCON_SAMPLE_PERIOD_SEL_50\n#define SAMPLE_PERIOD 50\n\n#elif CIR_IRCON_SAMPLE_PERIOD_SEL == CIR_IRCON_SAMPLE_PERIOD_SEL_25\n#define SAMPLE_PERIOD 25\n\n#else\n#define SAMPLE_PERIOD 1\n#endif\n\n \n#define MAX_CARRIER 60000\n#define MIN_CARRIER 30000\n\n \n#define WAKEUP_MAX_SIZE 65\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}