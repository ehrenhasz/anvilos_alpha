{
  "module_name": "img-ir-sanyo.c",
  "hash_id": "770f54294f488012605245bd4858d999b4fc9cece00cb85eb20beb8b0060cb0d",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/rc/img-ir/img-ir-sanyo.c",
  "human_readable_source": "\n \n\n#include \"img-ir-hw.h\"\n\n \nstatic int img_ir_sanyo_scancode(int len, u64 raw, u64 enabled_protocols,\n\t\t\t\t struct img_ir_scancode_req *request)\n{\n\tunsigned int addr, addr_inv, data, data_inv;\n\t \n\tif (!len)\n\t\treturn IMG_IR_REPEATCODE;\n\tif (len != 42)\n\t\treturn -EINVAL;\n\taddr     = (raw >>  0) & 0x1fff;\n\taddr_inv = (raw >> 13) & 0x1fff;\n\tdata     = (raw >> 26) & 0xff;\n\tdata_inv = (raw >> 34) & 0xff;\n\t \n\tif ((data_inv ^ data) != 0xff)\n\t\treturn -EINVAL;\n\t \n\tif ((addr_inv ^ addr) != 0x1fff)\n\t\treturn -EINVAL;\n\n\t \n\trequest->protocol = RC_PROTO_SANYO;\n\trequest->scancode = addr << 8 | data;\n\treturn IMG_IR_SCANCODE;\n}\n\n \nstatic int img_ir_sanyo_filter(const struct rc_scancode_filter *in,\n\t\t\t       struct img_ir_filter *out, u64 protocols)\n{\n\tunsigned int addr, addr_inv, data, data_inv;\n\tunsigned int addr_m, data_m;\n\n\tdata = in->data & 0xff;\n\tdata_m = in->mask & 0xff;\n\tdata_inv = data ^ 0xff;\n\n\tif (in->data & 0xff700000)\n\t\treturn -EINVAL;\n\n\taddr       = (in->data >> 8) & 0x1fff;\n\taddr_m     = (in->mask >> 8) & 0x1fff;\n\taddr_inv   = addr ^ 0x1fff;\n\n\tout->data = (u64)data_inv << 34 |\n\t\t    (u64)data     << 26 |\n\t\t\t addr_inv << 13 |\n\t\t\t addr;\n\tout->mask = (u64)data_m << 34 |\n\t\t    (u64)data_m << 26 |\n\t\t\t addr_m << 13 |\n\t\t\t addr_m;\n\treturn 0;\n}\n\n \nstruct img_ir_decoder img_ir_sanyo = {\n\t.type = RC_PROTO_BIT_SANYO,\n\t.control = {\n\t\t.decoden = 1,\n\t\t.code_type = IMG_IR_CODETYPE_PULSEDIST,\n\t},\n\t \n\t.unit = 562500,  \n\t.timings = {\n\t\t \n\t\t.ldr = {\n\t\t\t.pulse = { 16\t  },\n\t\t\t.space = { 8\t  },\n\t\t},\n\t\t \n\t\t.s00 = {\n\t\t\t.pulse = { 1\t  },\n\t\t\t.space = { 1\t  },\n\t\t},\n\t\t \n\t\t.s01 = {\n\t\t\t.pulse = { 1\t  },\n\t\t\t.space = { 3\t  },\n\t\t},\n\t\t \n\t\t.ft = {\n\t\t\t.minlen = 42,\n\t\t\t.maxlen = 42,\n\t\t\t.ft_min = 10,\t \n\t\t},\n\t},\n\t \n\t.repeat = 108,\t\t\t \n\t.rtimings = {\n\t\t \n\t\t.ldr = {\n\t\t\t.space = { 4\t  },\n\t\t},\n\t\t \n\t\t.ft = {\n\t\t\t.minlen = 0,\t \n\t\t\t.maxlen = 0,\n\t\t},\n\t},\n\t \n\t.scancode = img_ir_sanyo_scancode,\n\t.filter = img_ir_sanyo_filter,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}