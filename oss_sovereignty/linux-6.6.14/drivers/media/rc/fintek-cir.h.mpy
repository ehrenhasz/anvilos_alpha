{
  "module_name": "fintek-cir.h",
  "hash_id": "5b6fc057b7a35cdf9d9700ee3a9da8fb46772dbe3f96a7cb8e9af8c38060a551",
  "original_prompt": "Ingested from linux-6.6.14/drivers/media/rc/fintek-cir.h",
  "human_readable_source": " \n \n\n#include <linux/spinlock.h>\n#include <linux/ioctl.h>\n\n \n#define FINTEK_DRIVER_NAME\t\"fintek-cir\"\n#define FINTEK_DESCRIPTION\t\"Fintek LPC SuperIO Consumer IR Transceiver\"\n#define VENDOR_ID_FINTEK\t0x1934\n\n\n \nstatic int debug;\n\n#define fit_pr(level, text, ...) \\\n\tprintk(level KBUILD_MODNAME \": \" text, ## __VA_ARGS__)\n\n#define fit_dbg(text, ...) \\\n\tif (debug) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n#define fit_dbg_verbose(text, ...) \\\n\tif (debug > 1) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n#define fit_dbg_wake(text, ...) \\\n\tif (debug > 2) \\\n\t\tprintk(KERN_DEBUG \\\n\t\t\tKBUILD_MODNAME \": \" text \"\\n\" , ## __VA_ARGS__)\n\n\n#define TX_BUF_LEN 256\n#define RX_BUF_LEN 32\n\nstruct fintek_dev {\n\tstruct pnp_dev *pdev;\n\tstruct rc_dev *rdev;\n\n\tspinlock_t fintek_lock;\n\n\t \n\tu8 buf[RX_BUF_LEN];\n\tunsigned int pkts;\n\n\tstruct {\n\t\tspinlock_t lock;\n\t\tu8 buf[TX_BUF_LEN];\n\t\tunsigned int buf_count;\n\t\tunsigned int cur_buf_num;\n\t\twait_queue_head_t queue;\n\t} tx;\n\n\t \n\tu32 cr_ip;\n\tu32 cr_dp;\n\n\t \n\tunsigned long cir_addr;\n\tint cir_irq;\n\tint cir_port_len;\n\n\t \n\tu8 chip_major;\n\tu8 chip_minor;\n\tu16 chip_vendor;\n\tu8 logical_dev_cir;\n\n\t \n\tbool hw_learning_capable;\n\tbool hw_tx_capable;\n\n\t \n\tbool learning_enabled;\n\tbool carrier_detect_enabled;\n\n\tenum {\n\t\tCMD_HEADER = 0,\n\t\tSUBCMD,\n\t\tCMD_DATA,\n\t\tPARSE_IRDATA,\n\t} parser_state;\n\n\tu8 cmd, rem;\n\n\t \n\tu32 carrier;\n};\n\n \n#define BUF_PULSE_BIT\t\t0x80\n#define BUF_LEN_MASK\t\t0x1f\n#define BUF_SAMPLE_MASK\t\t0x7f\n\n#define BUF_COMMAND_HEADER\t0x9f\n#define BUF_COMMAND_MASK\t0xe0\n#define BUF_COMMAND_NULL\t0x00\n#define BUF_HW_CMD_HEADER\t0xff\n#define BUF_CMD_G_REVISION\t0x0b\n#define BUF_CMD_S_CARRIER\t0x06\n#define BUF_CMD_S_TIMEOUT\t0x0c\n#define BUF_CMD_SIG_END\t\t0x01\n#define BUF_CMD_S_TXMASK\t0x08\n#define BUF_CMD_S_RXSENSOR\t0x14\n#define BUF_RSP_PULSE_COUNT\t0x15\n\n#define CIR_SAMPLE_PERIOD\t50\n\n \n#define CR_INDEX_PORT\t\t0x2e\n#define CR_DATA_PORT\t\t0x2f\n\n \n#define CR_INDEX_PORT2\t\t0x4e\n#define CR_DATA_PORT2\t\t0x4f\n\n \n#define PORT_SEL_PORT_4E_EN\t0x10\n\n \n#define CONFIG_REG_ENABLE\t0x87\n#define CONFIG_REG_DISABLE\t0xaa\n\n \n#define CHIP_ID_HIGH_F71809U\t0x04\n#define CHIP_ID_LOW_F71809U\t0x08\n\n \n#define GCR_SOFTWARE_RESET\t0x02  \n#define GCR_LOGICAL_DEV_NO\t0x07  \n#define GCR_CHIP_ID_HI\t\t0x20  \n#define GCR_CHIP_ID_LO\t\t0x21  \n#define GCR_VENDOR_ID_HI\t0x23  \n#define GCR_VENDOR_ID_LO\t0x24  \n#define GCR_CONFIG_PORT_SEL\t0x25  \n#define GCR_KBMOUSE_WAKEUP\t0x27\n\n#define LOGICAL_DEV_DISABLE\t0x00\n#define LOGICAL_DEV_ENABLE\t0x01\n\n \n#define LOGICAL_DEV_CIR_REV1\t0x05\n#define LOGICAL_DEV_CIR_REV2\t0x08\n\n \n#define CIR_CR_COMMAND_INDEX\t0x04\n#define CIR_CR_IRCS\t\t0x05  \n#define CIR_CR_COMMAND_DATA\t0x06  \n#define CIR_CR_CLASS\t\t0x07  \n#define CIR_CR_DEV_EN\t\t0x30  \n#define CIR_CR_BASE_ADDR_HI\t0x60  \n#define CIR_CR_BASE_ADDR_LO\t0x61  \n#define CIR_CR_IRQ_SEL\t\t0x70  \n#define CIR_CR_PSOUT_STATUS\t0xf1\n#define CIR_CR_WAKE_KEY3_ADDR\t0xf8\n#define CIR_CR_WAKE_KEY3_CODE\t0xf9\n#define CIR_CR_WAKE_KEY3_DC\t0xfa\n#define CIR_CR_WAKE_CONTROL\t0xfb\n#define CIR_CR_WAKE_KEY12_ADDR\t0xfc\n#define CIR_CR_WAKE_KEY4_ADDR\t0xfd\n#define CIR_CR_WAKE_KEY5_ADDR\t0xfe\n\n#define CLASS_RX_ONLY\t\t0xff\n#define CLASS_RX_2TX\t\t0x66\n#define CLASS_RX_1TX\t\t0x33\n\n \n#define CIR_STATUS\t\t0x00\n#define CIR_RX_DATA\t\t0x01\n#define CIR_TX_CONTROL\t\t0x02\n#define CIR_TX_DATA\t\t0x03\n#define CIR_CONTROL\t\t0x04\n\n \n#define LOGICAL_DEV_ACPI\t0x01\n#define LDEV_ACPI_WAKE_EN_REG\t0xe8\n#define ACPI_WAKE_EN_CIR_BIT\t0x04\n\n#define LDEV_ACPI_PME_EN_REG\t0xf0\n#define LDEV_ACPI_PME_CLR_REG\t0xf1\n#define ACPI_PME_CIR_BIT\t0x02\n\n#define LDEV_ACPI_STATE_REG\t0xf4\n#define ACPI_STATE_CIR_BIT\t0x20\n\n \n#define CIR_STATUS_IRQ_EN\t0x80\n#define CIR_STATUS_TX_FINISH\t0x08\n#define CIR_STATUS_TX_UNDERRUN\t0x04\n#define CIR_STATUS_RX_TIMEOUT\t0x02\n#define CIR_STATUS_RX_RECEIVE\t0x01\n#define CIR_STATUS_IRQ_MASK\t0x0f\n\n \n#define CIR_TX_CONTROL_TX_START\t0x80\n#define CIR_TX_CONTROL_TX_END\t0x40\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}