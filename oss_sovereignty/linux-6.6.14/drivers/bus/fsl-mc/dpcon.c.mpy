{
  "module_name": "dpcon.c",
  "hash_id": "63ba2ffd73cf0d836983c771102c888fa569b071323518673d6f3ecb7f69b9f7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/bus/fsl-mc/dpcon.c",
  "human_readable_source": "\n \n#include <linux/kernel.h>\n#include <linux/fsl/mc.h>\n\n#include \"fsl-mc-private.h\"\n\n \nint dpcon_open(struct fsl_mc_io *mc_io,\n\t       u32 cmd_flags,\n\t       int dpcon_id,\n\t       u16 *token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpcon_cmd_open *dpcon_cmd;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_OPEN,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  0);\n\tdpcon_cmd = (struct dpcon_cmd_open *)cmd.params;\n\tdpcon_cmd->dpcon_id = cpu_to_le32(dpcon_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\t*token = mc_cmd_hdr_read_token(&cmd);\n\n\treturn 0;\n}\nEXPORT_SYMBOL_GPL(dpcon_open);\n\n \nint dpcon_close(struct fsl_mc_io *mc_io,\n\t\tu32 cmd_flags,\n\t\tu16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_CLOSE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(dpcon_close);\n\n \nint dpcon_enable(struct fsl_mc_io *mc_io,\n\t\t u32 cmd_flags,\n\t\t u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_ENABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(dpcon_enable);\n\n \nint dpcon_disable(struct fsl_mc_io *mc_io,\n\t\t  u32 cmd_flags,\n\t\t  u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_DISABLE,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(dpcon_disable);\n\n \nint dpcon_reset(struct fsl_mc_io *mc_io,\n\t\tu32 cmd_flags,\n\t\tu16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_RESET,\n\t\t\t\t\t  cmd_flags, token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(dpcon_reset);\n\n \nint dpcon_get_attributes(struct fsl_mc_io *mc_io,\n\t\t\t u32 cmd_flags,\n\t\t\t u16 token,\n\t\t\t struct dpcon_attr *attr)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpcon_rsp_get_attr *dpcon_rsp;\n\tint err;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_GET_ATTR,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\tdpcon_rsp = (struct dpcon_rsp_get_attr *)cmd.params;\n\tattr->id = le32_to_cpu(dpcon_rsp->id);\n\tattr->qbman_ch_id = le16_to_cpu(dpcon_rsp->qbman_ch_id);\n\tattr->num_priorities = dpcon_rsp->num_priorities;\n\n\treturn 0;\n}\nEXPORT_SYMBOL_GPL(dpcon_get_attributes);\n\n \nint dpcon_set_notification(struct fsl_mc_io *mc_io,\n\t\t\t   u32 cmd_flags,\n\t\t\t   u16 token,\n\t\t\t   struct dpcon_notification_cfg *cfg)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct dpcon_cmd_set_notification *dpcon_cmd;\n\n\t \n\tcmd.header = mc_encode_cmd_header(DPCON_CMDID_SET_NOTIFICATION,\n\t\t\t\t\t  cmd_flags,\n\t\t\t\t\t  token);\n\tdpcon_cmd = (struct dpcon_cmd_set_notification *)cmd.params;\n\tdpcon_cmd->dpio_id = cpu_to_le32(cfg->dpio_id);\n\tdpcon_cmd->priority = cfg->priority;\n\tdpcon_cmd->user_ctx = cpu_to_le64(cfg->user_ctx);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(dpcon_set_notification);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}