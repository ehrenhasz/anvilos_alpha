{
  "module_name": "obj-api.c",
  "hash_id": "18e375855dd5f9114e3b03913b3acb8a04f0a33ad19b5031e5c7a0c433a16f00",
  "original_prompt": "Ingested from linux-6.6.14/drivers/bus/fsl-mc/obj-api.c",
  "human_readable_source": "\n \n#include <linux/kernel.h>\n#include <linux/fsl/mc.h>\n\n#include \"fsl-mc-private.h\"\n\nstatic int fsl_mc_get_open_cmd_id(const char *type)\n{\n\tstatic const struct {\n\t\tint cmd_id;\n\t\tconst char *type;\n\t} dev_ids[] = {\n\t\t{ DPRTC_CMDID_OPEN, \"dprtc\" },\n\t\t{ DPRC_CMDID_OPEN, \"dprc\" },\n\t\t{ DPNI_CMDID_OPEN, \"dpni\" },\n\t\t{ DPIO_CMDID_OPEN, \"dpio\" },\n\t\t{ DPSW_CMDID_OPEN, \"dpsw\" },\n\t\t{ DPBP_CMDID_OPEN, \"dpbp\" },\n\t\t{ DPCON_CMDID_OPEN, \"dpcon\" },\n\t\t{ DPMCP_CMDID_OPEN, \"dpmcp\" },\n\t\t{ DPMAC_CMDID_OPEN, \"dpmac\" },\n\t\t{ DPSECI_CMDID_OPEN, \"dpseci\" },\n\t\t{ DPDMUX_CMDID_OPEN, \"dpdmux\" },\n\t\t{ DPDCEI_CMDID_OPEN, \"dpdcei\" },\n\t\t{ DPAIOP_CMDID_OPEN, \"dpaiop\" },\n\t\t{ DPCI_CMDID_OPEN, \"dpci\" },\n\t\t{ DPDMAI_CMDID_OPEN, \"dpdmai\" },\n\t\t{ DPDBG_CMDID_OPEN, \"dpdbg\" },\n\t\t{ 0, NULL }\n\t};\n\tint i;\n\n\tfor (i = 0; dev_ids[i].type; i++)\n\t\tif (!strcmp(dev_ids[i].type, type))\n\t\t\treturn dev_ids[i].cmd_id;\n\n\treturn -1;\n}\n\nint fsl_mc_obj_open(struct fsl_mc_io *mc_io,\n\t\t    u32 cmd_flags,\n\t\t    int obj_id,\n\t\t    char *obj_type,\n\t\t    u16 *token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\tstruct fsl_mc_obj_cmd_open *cmd_params;\n\tint err = 0;\n\tint cmd_id = fsl_mc_get_open_cmd_id(obj_type);\n\n\tif (cmd_id == -1)\n\t\treturn -ENODEV;\n\n\t \n\tcmd.header = mc_encode_cmd_header(cmd_id, cmd_flags, 0);\n\tcmd_params = (struct fsl_mc_obj_cmd_open *)cmd.params;\n\tcmd_params->obj_id = cpu_to_le32(obj_id);\n\n\t \n\terr = mc_send_command(mc_io, &cmd);\n\tif (err)\n\t\treturn err;\n\n\t \n\t*token = mc_cmd_hdr_read_token(&cmd);\n\n\treturn err;\n}\nEXPORT_SYMBOL_GPL(fsl_mc_obj_open);\n\nint fsl_mc_obj_close(struct fsl_mc_io *mc_io,\n\t\t     u32 cmd_flags,\n\t\t     u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(OBJ_CMDID_CLOSE, cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(fsl_mc_obj_close);\n\nint fsl_mc_obj_reset(struct fsl_mc_io *mc_io,\n\t\t     u32 cmd_flags,\n\t\t     u16 token)\n{\n\tstruct fsl_mc_command cmd = { 0 };\n\n\t \n\tcmd.header = mc_encode_cmd_header(OBJ_CMDID_RESET, cmd_flags,\n\t\t\t\t\t  token);\n\n\t \n\treturn mc_send_command(mc_io, &cmd);\n}\nEXPORT_SYMBOL_GPL(fsl_mc_obj_reset);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}