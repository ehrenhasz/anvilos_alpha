{
  "module_name": "console.c",
  "hash_id": "f475d34a68515efe23dbba93f56b1b1d7e2ace54e69c95ea86114ebb206f2444",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwtracing/stm/console.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/console.h>\n#include <linux/slab.h>\n#include <linux/stm.h>\n\nstatic int stm_console_link(struct stm_source_data *data);\nstatic void stm_console_unlink(struct stm_source_data *data);\n\nstatic struct stm_console {\n\tstruct stm_source_data\tdata;\n\tstruct console\t\tconsole;\n} stm_console = {\n\t.data\t= {\n\t\t.name\t\t= \"console\",\n\t\t.nr_chans\t= 1,\n\t\t.link\t\t= stm_console_link,\n\t\t.unlink\t\t= stm_console_unlink,\n\t},\n};\n\nstatic void\nstm_console_write(struct console *con, const char *buf, unsigned len)\n{\n\tstruct stm_console *sc = container_of(con, struct stm_console, console);\n\n\tstm_source_write(&sc->data, 0, buf, len);\n}\n\nstatic int stm_console_link(struct stm_source_data *data)\n{\n\tstruct stm_console *sc = container_of(data, struct stm_console, data);\n\n\tstrcpy(sc->console.name, \"stm_console\");\n\tsc->console.write = stm_console_write;\n\tsc->console.flags = CON_ENABLED | CON_PRINTBUFFER;\n\tregister_console(&sc->console);\n\n\treturn 0;\n}\n\nstatic void stm_console_unlink(struct stm_source_data *data)\n{\n\tstruct stm_console *sc = container_of(data, struct stm_console, data);\n\n\tunregister_console(&sc->console);\n}\n\nstatic int stm_console_init(void)\n{\n\treturn stm_source_register_device(NULL, &stm_console.data);\n}\n\nstatic void stm_console_exit(void)\n{\n\tstm_source_unregister_device(&stm_console.data);\n}\n\nmodule_init(stm_console_init);\nmodule_exit(stm_console_exit);\n\nMODULE_LICENSE(\"GPL v2\");\nMODULE_DESCRIPTION(\"stm_console driver\");\nMODULE_AUTHOR(\"Alexander Shishkin <alexander.shishkin@linux.intel.com>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}