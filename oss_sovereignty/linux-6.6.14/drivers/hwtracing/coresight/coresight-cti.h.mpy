{
  "module_name": "coresight-cti.h",
  "hash_id": "0622ceacd554426648ad964a5c9b10f925e35c14766a0e51708e3b2183878bdb",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwtracing/coresight/coresight-cti.h",
  "human_readable_source": " \n \n\n#ifndef _CORESIGHT_CORESIGHT_CTI_H\n#define _CORESIGHT_CORESIGHT_CTI_H\n\n#include <linux/coresight.h>\n#include <linux/device.h>\n#include <linux/fwnode.h>\n#include <linux/list.h>\n#include <linux/spinlock.h>\n#include <linux/sysfs.h>\n#include <linux/types.h>\n\n#include \"coresight-priv.h\"\n\n \n \n#define CTICONTROL\t\t0x000\n#define CTIINTACK\t\t0x010\n#define CTIAPPSET\t\t0x014\n#define CTIAPPCLEAR\t\t0x018\n#define CTIAPPPULSE\t\t0x01C\n#define CTIINEN(n)\t\t(0x020 + (4 * n))\n#define CTIOUTEN(n)\t\t(0x0A0 + (4 * n))\n#define CTITRIGINSTATUS\t\t0x130\n#define CTITRIGOUTSTATUS\t0x134\n#define CTICHINSTATUS\t\t0x138\n#define CTICHOUTSTATUS\t\t0x13C\n#define CTIGATE\t\t\t0x140\n#define ASICCTL\t\t\t0x144\n \n#define ITCHINACK\t\t0xEDC  \n#define ITTRIGINACK\t\t0xEE0  \n#define ITCHOUT\t\t\t0xEE4  \n#define ITTRIGOUT\t\t0xEE8  \n#define ITCHOUTACK\t\t0xEEC  \n#define ITTRIGOUTACK\t\t0xEF0  \n#define ITCHIN\t\t\t0xEF4  \n#define ITTRIGIN\t\t0xEF8  \n \n#define CTIDEVAFF0\t\t0xFA8\n#define CTIDEVAFF1\t\t0xFAC\n\n \n#define CTIINOUTEN_MAX\t\t32\n\n \nstruct cti_trig_grp {\n\tint nr_sigs;\n\tu32 used_mask;\n\tint sig_types[];\n};\n\n \nstruct cti_trig_con {\n\tstruct cti_trig_grp *con_in;\n\tstruct cti_trig_grp *con_out;\n\tstruct coresight_device *con_dev;\n\tconst char *con_dev_name;\n\tstruct list_head node;\n\tstruct attribute **con_attrs;\n\tstruct attribute_group *attr_group;\n};\n\n \nstruct cti_device {\n\tint nr_trig_con;\n\tu32 ctm_id;\n\tstruct list_head trig_cons;\n\tint cpu;\n\tconst struct attribute_group **con_groups;\n};\n\n \nstruct cti_config {\n\t \n\tint nr_ctm_channels;\n\tint nr_trig_max;\n\n\t \n\tint enable_req_count;\n\tbool hw_enabled;\n\tbool hw_powered;\n\n\t \n\tu32 trig_in_use;\n\tu32 trig_out_use;\n\tu32 trig_out_filter;\n\tbool trig_filter_enable;\n\tu8 xtrig_rchan_sel;\n\n\t \n\tu32 ctiappset;\n\tu8 ctiinout_sel;\n\tu32 ctiinen[CTIINOUTEN_MAX];\n\tu32 ctiouten[CTIINOUTEN_MAX];\n\tu32 ctigate;\n\tu32 asicctl;\n};\n\n \nstruct cti_drvdata {\n\tvoid __iomem *base;\n\tstruct coresight_device\t*csdev;\n\tstruct cti_device ctidev;\n\tspinlock_t spinlock;\n\tstruct cti_config config;\n\tstruct list_head node;\n\tvoid (*csdev_release)(struct device *dev);\n};\n\n \nenum cti_chan_op {\n\tCTI_CHAN_ATTACH,\n\tCTI_CHAN_DETACH,\n};\n\nenum cti_trig_dir {\n\tCTI_TRIG_IN,\n\tCTI_TRIG_OUT,\n};\n\nenum cti_chan_gate_op {\n\tCTI_GATE_CHAN_ENABLE,\n\tCTI_GATE_CHAN_DISABLE,\n};\n\nenum cti_chan_set_op {\n\tCTI_CHAN_SET,\n\tCTI_CHAN_CLR,\n\tCTI_CHAN_PULSE,\n};\n\n \nextern const struct attribute_group *coresight_cti_groups[];\nint cti_add_default_connection(struct device *dev,\n\t\t\t       struct cti_drvdata *drvdata);\nint cti_add_connection_entry(struct device *dev, struct cti_drvdata *drvdata,\n\t\t\t     struct cti_trig_con *tc,\n\t\t\t     struct coresight_device *csdev,\n\t\t\t     const char *assoc_dev_name);\nstruct cti_trig_con *cti_allocate_trig_con(struct device *dev, int in_sigs,\n\t\t\t\t\t   int out_sigs);\nint cti_enable(struct coresight_device *csdev, enum cs_mode mode, void *data);\nint cti_disable(struct coresight_device *csdev, void *data);\nvoid cti_write_all_hw_regs(struct cti_drvdata *drvdata);\nvoid cti_write_intack(struct device *dev, u32 ackval);\nvoid cti_write_single_reg(struct cti_drvdata *drvdata, int offset, u32 value);\nint cti_channel_trig_op(struct device *dev, enum cti_chan_op op,\n\t\t\tenum cti_trig_dir direction, u32 channel_idx,\n\t\t\tu32 trigger_idx);\nint cti_channel_gate_op(struct device *dev, enum cti_chan_gate_op op,\n\t\t\tu32 channel_idx);\nint cti_channel_setop(struct device *dev, enum cti_chan_set_op op,\n\t\t      u32 channel_idx);\nint cti_create_cons_sysfs(struct device *dev, struct cti_drvdata *drvdata);\nstruct coresight_platform_data *\ncoresight_cti_get_platform_data(struct device *dev);\nconst char *cti_plat_get_node_name(struct fwnode_handle *fwnode);\n\n \nstatic inline bool cti_active(struct cti_config *cfg)\n{\n\treturn cfg->hw_powered && cfg->hw_enabled;\n}\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}