{
  "module_name": "ultrasoc-smb.h",
  "hash_id": "e662805b94b831a6791dcc15561a9c0ca8abf845a4a383aaf74d9454e84970be",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwtracing/coresight/ultrasoc-smb.h",
  "human_readable_source": " \n \n\n#ifndef _ULTRASOC_SMB_H\n#define _ULTRASOC_SMB_H\n\n#include <linux/miscdevice.h>\n#include <linux/spinlock.h>\n\n \n#define SMB_GLB_CFG_REG\t\t0x00\n#define SMB_GLB_EN_REG\t\t0x04\n#define SMB_GLB_INT_REG\t\t0x08\n\n \n#define SMB_LB_CFG_LO_REG\t0x40\n#define SMB_LB_CFG_HI_REG\t0x44\n#define SMB_LB_INT_CTRL_REG\t0x48\n#define SMB_LB_INT_STS_REG\t0x4c\n#define SMB_LB_RD_ADDR_REG\t0x5c\n#define SMB_LB_WR_ADDR_REG\t0x60\n#define SMB_LB_PURGE_REG\t0x64\n\n \n#define SMB_GLB_CFG_BURST_LEN_MSK\tGENMASK(11, 4)\n#define SMB_GLB_CFG_IDLE_PRD_MSK\tGENMASK(15, 12)\n#define SMB_GLB_CFG_MEM_WR_MSK\t\tGENMASK(21, 16)\n#define SMB_GLB_CFG_MEM_RD_MSK\t\tGENMASK(27, 22)\n#define SMB_GLB_CFG_DEFAULT\t(FIELD_PREP(SMB_GLB_CFG_BURST_LEN_MSK, 0xf) | \\\n\t\t\t\t FIELD_PREP(SMB_GLB_CFG_IDLE_PRD_MSK, 0xf) | \\\n\t\t\t\t FIELD_PREP(SMB_GLB_CFG_MEM_WR_MSK, 0x3) | \\\n\t\t\t\t FIELD_PREP(SMB_GLB_CFG_MEM_RD_MSK, 0x1b))\n\n#define SMB_GLB_EN_HW_ENABLE\tBIT(0)\n\n \n#define SMB_GLB_INT_EN\t\tBIT(0)\n#define SMB_GLB_INT_PULSE\tBIT(1)  \n#define SMB_GLB_INT_ACT_H\tBIT(2)  \n#define SMB_GLB_INT_CFG\t\t(SMB_GLB_INT_EN | SMB_GLB_INT_PULSE | \\\n\t\t\t\t SMB_GLB_INT_ACT_H)\n\n \n#define SMB_LB_CFG_LO_EN\t\tBIT(0)\n#define SMB_LB_CFG_LO_SINGLE_END\tBIT(1)\n#define SMB_LB_CFG_LO_INIT\t\tBIT(8)\n#define SMB_LB_CFG_LO_CONT\t\tBIT(11)\n#define SMB_LB_CFG_LO_FLOW_MSK\t\tGENMASK(19, 16)\n#define SMB_LB_CFG_LO_DEFAULT\t(SMB_LB_CFG_LO_EN | SMB_LB_CFG_LO_SINGLE_END | \\\n\t\t\t\t SMB_LB_CFG_LO_INIT | SMB_LB_CFG_LO_CONT | \\\n\t\t\t\t FIELD_PREP(SMB_LB_CFG_LO_FLOW_MSK, 0xf))\n\n \n#define SMB_LB_CFG_HI_RANGE_UP_MSK\tGENMASK(15, 8)\n#define SMB_LB_CFG_HI_DEFAULT\tFIELD_PREP(SMB_LB_CFG_HI_RANGE_UP_MSK, 0xff)\n\n \n#define SMB_LB_INT_CTRL_EN\t\tBIT(0)\n#define SMB_LB_INT_CTRL_BUF_NOTE_MSK\tGENMASK(11, 8)\n#define SMB_LB_INT_CTRL_CFG\t(SMB_LB_INT_CTRL_EN | \\\n\t\t\t\t FIELD_PREP(SMB_LB_INT_CTRL_BUF_NOTE_MSK, 0xf))\n\n \n#define SMB_LB_INT_STS_NOT_EMPTY_MSK\tBIT(0)\n#define SMB_LB_INT_STS_BUF_RESET_MSK\tGENMASK(3, 0)\n#define SMB_LB_INT_STS_RESET\tFIELD_PREP(SMB_LB_INT_STS_BUF_RESET_MSK, 0xf)\n\n#define SMB_LB_PURGE_PURGED\tBIT(0)\n\n#define SMB_REG_ADDR_RES\t0\n#define SMB_BUF_ADDR_RES\t1\n#define SMB_BUF_ADDR_LO_MSK\tGENMASK(31, 0)\n\n \nstruct smb_data_buffer {\n\tvoid *buf_base;\n\tu32 buf_hw_base;\n\tunsigned long buf_size;\n\tunsigned long data_size;\n\tunsigned long buf_rdptr;\n};\n\n \nstruct smb_drv_data {\n\tvoid __iomem *base;\n\tstruct coresight_device\t*csdev;\n\tstruct smb_data_buffer sdb;\n\tstruct miscdevice miscdev;\n\tspinlock_t spinlock;\n\tbool reading;\n\tpid_t pid;\n\tenum cs_mode mode;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}