{
  "module_name": "coresight-etm4x.h",
  "hash_id": "52c9c0d344f4717dd016a396d983cd5d0129404c6341a662893d959205183931",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwtracing/coresight/coresight-etm4x.h",
  "human_readable_source": " \n \n\n#ifndef _CORESIGHT_CORESIGHT_ETM_H\n#define _CORESIGHT_CORESIGHT_ETM_H\n\n#include <asm/local.h>\n#include <linux/const.h>\n#include <linux/spinlock.h>\n#include <linux/types.h>\n#include \"coresight-priv.h\"\n\n \n \n \n#define TRCPRGCTLR\t\t\t0x004\n#define TRCPROCSELR\t\t\t0x008\n#define TRCSTATR\t\t\t0x00C\n#define TRCCONFIGR\t\t\t0x010\n#define TRCAUXCTLR\t\t\t0x018\n#define TRCEVENTCTL0R\t\t\t0x020\n#define TRCEVENTCTL1R\t\t\t0x024\n#define TRCRSR\t\t\t\t0x028\n#define TRCSTALLCTLR\t\t\t0x02C\n#define TRCTSCTLR\t\t\t0x030\n#define TRCSYNCPR\t\t\t0x034\n#define TRCCCCTLR\t\t\t0x038\n#define TRCBBCTLR\t\t\t0x03C\n#define TRCTRACEIDR\t\t\t0x040\n#define TRCQCTLR\t\t\t0x044\n \n#define TRCVICTLR\t\t\t0x080\n#define TRCVIIECTLR\t\t\t0x084\n#define TRCVISSCTLR\t\t\t0x088\n#define TRCVIPCSSCTLR\t\t\t0x08C\n#define TRCVDCTLR\t\t\t0x0A0\n#define TRCVDSACCTLR\t\t\t0x0A4\n#define TRCVDARCCTLR\t\t\t0x0A8\n \n#define TRCSEQEVRn(n)\t\t\t(0x100 + (n * 4))  \n#define TRCSEQRSTEVR\t\t\t0x118\n#define TRCSEQSTR\t\t\t0x11C\n#define TRCEXTINSELR\t\t\t0x120\n#define TRCEXTINSELRn(n)\t\t(0x120 + (n * 4))  \n#define TRCCNTRLDVRn(n)\t\t\t(0x140 + (n * 4))  \n#define TRCCNTCTLRn(n)\t\t\t(0x150 + (n * 4))  \n#define TRCCNTVRn(n)\t\t\t(0x160 + (n * 4))  \n \n#define TRCIDR8\t\t\t\t0x180\n#define TRCIDR9\t\t\t\t0x184\n#define TRCIDR10\t\t\t0x188\n#define TRCIDR11\t\t\t0x18C\n#define TRCIDR12\t\t\t0x190\n#define TRCIDR13\t\t\t0x194\n#define TRCIMSPEC0\t\t\t0x1C0\n#define TRCIMSPECn(n)\t\t\t(0x1C0 + (n * 4))  \n#define TRCIDR0\t\t\t\t0x1E0\n#define TRCIDR1\t\t\t\t0x1E4\n#define TRCIDR2\t\t\t\t0x1E8\n#define TRCIDR3\t\t\t\t0x1EC\n#define TRCIDR4\t\t\t\t0x1F0\n#define TRCIDR5\t\t\t\t0x1F4\n#define TRCIDR6\t\t\t\t0x1F8\n#define TRCIDR7\t\t\t\t0x1FC\n \n#define TRCRSCTLRn(n)\t\t\t(0x200 + (n * 4))\n \n#define TRCSSCCRn(n)\t\t\t(0x280 + (n * 4))\n#define TRCSSCSRn(n)\t\t\t(0x2A0 + (n * 4))\n#define TRCSSPCICRn(n)\t\t\t(0x2C0 + (n * 4))\n \n#define TRCOSLAR\t\t\t0x300\n#define TRCOSLSR\t\t\t0x304\n#define TRCPDCR\t\t\t\t0x310\n#define TRCPDSR\t\t\t\t0x314\n \n \n#define TRCACVRn(n)\t\t\t(0x400 + (n * 8))\n#define TRCACATRn(n)\t\t\t(0x480 + (n * 8))\n \n#define TRCDVCVRn(n)\t\t\t(0x500 + (n * 16))\n#define TRCDVCMRn(n)\t\t\t(0x580 + (n * 16))\n \n#define TRCCIDCVRn(n)\t\t\t(0x600 + (n * 8))\n#define TRCVMIDCVRn(n)\t\t\t(0x640 + (n * 8))\n#define TRCCIDCCTLR0\t\t\t0x680\n#define TRCCIDCCTLR1\t\t\t0x684\n#define TRCVMIDCCTLR0\t\t\t0x688\n#define TRCVMIDCCTLR1\t\t\t0x68C\n \n \n#define TRCITCTRL\t\t\t0xF00\n \n \n#define TRCCLAIMSET\t\t\t0xFA0\n#define TRCCLAIMCLR\t\t\t0xFA4\n \n#define TRCDEVAFF0\t\t\t0xFA8\n#define TRCDEVAFF1\t\t\t0xFAC\n#define TRCLAR\t\t\t\t0xFB0\n#define TRCLSR\t\t\t\t0xFB4\n#define TRCAUTHSTATUS\t\t\t0xFB8\n#define TRCDEVARCH\t\t\t0xFBC\n#define TRCDEVID\t\t\t0xFC8\n#define TRCDEVTYPE\t\t\t0xFCC\n#define TRCPIDR4\t\t\t0xFD0\n#define TRCPIDR5\t\t\t0xFD4\n#define TRCPIDR6\t\t\t0xFD8\n#define TRCPIDR7\t\t\t0xFDC\n#define TRCPIDR0\t\t\t0xFE0\n#define TRCPIDR1\t\t\t0xFE4\n#define TRCPIDR2\t\t\t0xFE8\n#define TRCPIDR3\t\t\t0xFEC\n#define TRCCIDR0\t\t\t0xFF0\n#define TRCCIDR1\t\t\t0xFF4\n#define TRCCIDR2\t\t\t0xFF8\n#define TRCCIDR3\t\t\t0xFFC\n\n#define TRCRSR_TA\t\t\tBIT(12)\n\n \n#define TRCIDR0_INSTP0_MASK\t\t\tGENMASK(2, 1)\n#define TRCIDR0_TRCBB\t\t\t\tBIT(5)\n#define TRCIDR0_TRCCOND\t\t\t\tBIT(6)\n#define TRCIDR0_TRCCCI\t\t\t\tBIT(7)\n#define TRCIDR0_RETSTACK\t\t\tBIT(9)\n#define TRCIDR0_NUMEVENT_MASK\t\t\tGENMASK(11, 10)\n#define TRCIDR0_QSUPP_MASK\t\t\tGENMASK(16, 15)\n#define TRCIDR0_TSSIZE_MASK\t\t\tGENMASK(28, 24)\n\n#define TRCIDR2_CIDSIZE_MASK\t\t\tGENMASK(9, 5)\n#define TRCIDR2_VMIDSIZE_MASK\t\t\tGENMASK(14, 10)\n#define TRCIDR2_CCSIZE_MASK\t\t\tGENMASK(28, 25)\n\n#define TRCIDR3_CCITMIN_MASK\t\t\tGENMASK(11, 0)\n#define TRCIDR3_EXLEVEL_S_MASK\t\t\tGENMASK(19, 16)\n#define TRCIDR3_EXLEVEL_NS_MASK\t\t\tGENMASK(23, 20)\n#define TRCIDR3_TRCERR\t\t\t\tBIT(24)\n#define TRCIDR3_SYNCPR\t\t\t\tBIT(25)\n#define TRCIDR3_STALLCTL\t\t\tBIT(26)\n#define TRCIDR3_SYSSTALL\t\t\tBIT(27)\n#define TRCIDR3_NUMPROC_LO_MASK\t\t\tGENMASK(30, 28)\n#define TRCIDR3_NUMPROC_HI_MASK\t\t\tGENMASK(13, 12)\n#define TRCIDR3_NOOVERFLOW\t\t\tBIT(31)\n\n#define TRCIDR4_NUMACPAIRS_MASK\t\t\tGENMASK(3, 0)\n#define TRCIDR4_NUMPC_MASK\t\t\tGENMASK(15, 12)\n#define TRCIDR4_NUMRSPAIR_MASK\t\t\tGENMASK(19, 16)\n#define TRCIDR4_NUMSSCC_MASK\t\t\tGENMASK(23, 20)\n#define TRCIDR4_NUMCIDC_MASK\t\t\tGENMASK(27, 24)\n#define TRCIDR4_NUMVMIDC_MASK\t\t\tGENMASK(31, 28)\n\n#define TRCIDR5_NUMEXTIN_MASK\t\t\tGENMASK(8, 0)\n#define TRCIDR5_TRACEIDSIZE_MASK\t\tGENMASK(21, 16)\n#define TRCIDR5_ATBTRIG\t\t\t\tBIT(22)\n#define TRCIDR5_LPOVERRIDE\t\t\tBIT(23)\n#define TRCIDR5_NUMSEQSTATE_MASK\t\tGENMASK(27, 25)\n#define TRCIDR5_NUMCNTR_MASK\t\t\tGENMASK(30, 28)\n\n#define TRCCONFIGR_INSTP0_LOAD\t\t\tBIT(1)\n#define TRCCONFIGR_INSTP0_STORE\t\t\tBIT(2)\n#define TRCCONFIGR_INSTP0_LOAD_STORE\t\t(TRCCONFIGR_INSTP0_LOAD | TRCCONFIGR_INSTP0_STORE)\n#define TRCCONFIGR_BB\t\t\t\tBIT(3)\n#define TRCCONFIGR_CCI\t\t\t\tBIT(4)\n#define TRCCONFIGR_CID\t\t\t\tBIT(6)\n#define TRCCONFIGR_VMID\t\t\t\tBIT(7)\n#define TRCCONFIGR_COND_MASK\t\t\tGENMASK(10, 8)\n#define TRCCONFIGR_TS\t\t\t\tBIT(11)\n#define TRCCONFIGR_RS\t\t\t\tBIT(12)\n#define TRCCONFIGR_QE_W_COUNTS\t\t\tBIT(13)\n#define TRCCONFIGR_QE_WO_COUNTS\t\t\tBIT(14)\n#define TRCCONFIGR_VMIDOPT\t\t\tBIT(15)\n#define TRCCONFIGR_DA\t\t\t\tBIT(16)\n#define TRCCONFIGR_DV\t\t\t\tBIT(17)\n\n#define TRCEVENTCTL1R_INSTEN_MASK\t\tGENMASK(3, 0)\n#define TRCEVENTCTL1R_INSTEN_0\t\t\tBIT(0)\n#define TRCEVENTCTL1R_INSTEN_1\t\t\tBIT(1)\n#define TRCEVENTCTL1R_INSTEN_2\t\t\tBIT(2)\n#define TRCEVENTCTL1R_INSTEN_3\t\t\tBIT(3)\n#define TRCEVENTCTL1R_ATB\t\t\tBIT(11)\n#define TRCEVENTCTL1R_LPOVERRIDE\t\tBIT(12)\n\n#define TRCSTALLCTLR_ISTALL\t\t\tBIT(8)\n#define TRCSTALLCTLR_INSTPRIORITY\t\tBIT(10)\n#define TRCSTALLCTLR_NOOVERFLOW\t\t\tBIT(13)\n\n#define TRCVICTLR_EVENT_MASK\t\t\tGENMASK(7, 0)\n#define TRCVICTLR_SSSTATUS\t\t\tBIT(9)\n#define TRCVICTLR_TRCRESET\t\t\tBIT(10)\n#define TRCVICTLR_TRCERR\t\t\tBIT(11)\n#define TRCVICTLR_EXLEVEL_MASK\t\t\tGENMASK(22, 16)\n#define TRCVICTLR_EXLEVEL_S_MASK\t\tGENMASK(19, 16)\n#define TRCVICTLR_EXLEVEL_NS_MASK\t\tGENMASK(22, 20)\n\n#define TRCACATRn_TYPE_MASK\t\t\tGENMASK(1, 0)\n#define TRCACATRn_CONTEXTTYPE_MASK\t\tGENMASK(3, 2)\n#define TRCACATRn_CONTEXTTYPE_CTXID\t\tBIT(2)\n#define TRCACATRn_CONTEXTTYPE_VMID\t\tBIT(3)\n#define TRCACATRn_CONTEXT_MASK\t\t\tGENMASK(6, 4)\n#define TRCACATRn_EXLEVEL_MASK\t\t\tGENMASK(14, 8)\n\n#define TRCSSCSRn_STATUS\t\t\tBIT(31)\n#define TRCSSCCRn_SAC_ARC_RST_MASK\t\tGENMASK(24, 0)\n\n#define TRCSSPCICRn_PC_MASK\t\t\tGENMASK(7, 0)\n\n#define TRCBBCTLR_MODE\t\t\t\tBIT(8)\n#define TRCBBCTLR_RANGE_MASK\t\t\tGENMASK(7, 0)\n\n#define TRCRSCTLRn_PAIRINV\t\t\tBIT(21)\n#define TRCRSCTLRn_INV\t\t\t\tBIT(20)\n#define TRCRSCTLRn_GROUP_MASK\t\t\tGENMASK(19, 16)\n#define TRCRSCTLRn_SELECT_MASK\t\t\tGENMASK(15, 0)\n\n \n#define ETM4x_OFFSET_TO_REG(x)\t\t((x) >> 2)\n\n#define ETM4x_CRn(n)\t\t\t(((n) >> 7) & 0x7)\n#define ETM4x_Op2(n)\t\t\t(((n) >> 4) & 0x7)\n#define ETM4x_CRm(n)\t\t\t((n) & 0xf)\n\n#include <asm/sysreg.h>\n#define ETM4x_REG_NUM_TO_SYSREG(n)\t\t\t\t\\\n\tsys_reg(2, 1, ETM4x_CRn(n), ETM4x_CRm(n), ETM4x_Op2(n))\n\n#define READ_ETM4x_REG(reg)\t\t\t\t\t\\\n\tread_sysreg_s(ETM4x_REG_NUM_TO_SYSREG((reg)))\n#define WRITE_ETM4x_REG(val, reg)\t\t\t\t\\\n\twrite_sysreg_s(val, ETM4x_REG_NUM_TO_SYSREG((reg)))\n\n#define read_etm4x_sysreg_const_offset(offset)\t\t\t\\\n\tREAD_ETM4x_REG(ETM4x_OFFSET_TO_REG(offset))\n\n#define write_etm4x_sysreg_const_offset(val, offset)\t\t\\\n\tWRITE_ETM4x_REG(val, ETM4x_OFFSET_TO_REG(offset))\n\n#define CASE_READ(res, x)\t\t\t\t\t\\\n\tcase (x): { (res) = read_etm4x_sysreg_const_offset((x)); break; }\n\n#define CASE_WRITE(val, x)\t\t\t\t\t\\\n\tcase (x): { write_etm4x_sysreg_const_offset((val), (x)); break; }\n\n#define CASE_NOP(__unused, x)\t\t\t\t\t\\\n\tcase (x):\t \n\n#define ETE_ONLY_SYSREG_LIST(op, val)\t\t\\\n\tCASE_##op((val), TRCRSR)\t\t\\\n\tCASE_##op((val), TRCEXTINSELRn(1))\t\\\n\tCASE_##op((val), TRCEXTINSELRn(2))\t\\\n\tCASE_##op((val), TRCEXTINSELRn(3))\n\n \n#define ETM4x_ONLY_SYSREG_LIST(op, val)\t\t\\\n\tCASE_##op((val), TRCPROCSELR)\t\t\\\n\tCASE_##op((val), TRCVDCTLR)\t\t\\\n\tCASE_##op((val), TRCVDSACCTLR)\t\t\\\n\tCASE_##op((val), TRCVDARCCTLR)\t\t\\\n\tCASE_##op((val), TRCOSLAR)\n\n#define ETM_COMMON_SYSREG_LIST(op, val)\t\t\\\n\tCASE_##op((val), TRCPRGCTLR)\t\t\\\n\tCASE_##op((val), TRCSTATR)\t\t\\\n\tCASE_##op((val), TRCCONFIGR)\t\t\\\n\tCASE_##op((val), TRCAUXCTLR)\t\t\\\n\tCASE_##op((val), TRCEVENTCTL0R)\t\t\\\n\tCASE_##op((val), TRCEVENTCTL1R)\t\t\\\n\tCASE_##op((val), TRCSTALLCTLR)\t\t\\\n\tCASE_##op((val), TRCTSCTLR)\t\t\\\n\tCASE_##op((val), TRCSYNCPR)\t\t\\\n\tCASE_##op((val), TRCCCCTLR)\t\t\\\n\tCASE_##op((val), TRCBBCTLR)\t\t\\\n\tCASE_##op((val), TRCTRACEIDR)\t\t\\\n\tCASE_##op((val), TRCQCTLR)\t\t\\\n\tCASE_##op((val), TRCVICTLR)\t\t\\\n\tCASE_##op((val), TRCVIIECTLR)\t\t\\\n\tCASE_##op((val), TRCVISSCTLR)\t\t\\\n\tCASE_##op((val), TRCVIPCSSCTLR)\t\t\\\n\tCASE_##op((val), TRCSEQEVRn(0))\t\t\\\n\tCASE_##op((val), TRCSEQEVRn(1))\t\t\\\n\tCASE_##op((val), TRCSEQEVRn(2))\t\t\\\n\tCASE_##op((val), TRCSEQRSTEVR)\t\t\\\n\tCASE_##op((val), TRCSEQSTR)\t\t\\\n\tCASE_##op((val), TRCEXTINSELR)\t\t\\\n\tCASE_##op((val), TRCCNTRLDVRn(0))\t\\\n\tCASE_##op((val), TRCCNTRLDVRn(1))\t\\\n\tCASE_##op((val), TRCCNTRLDVRn(2))\t\\\n\tCASE_##op((val), TRCCNTRLDVRn(3))\t\\\n\tCASE_##op((val), TRCCNTCTLRn(0))\t\\\n\tCASE_##op((val), TRCCNTCTLRn(1))\t\\\n\tCASE_##op((val), TRCCNTCTLRn(2))\t\\\n\tCASE_##op((val), TRCCNTCTLRn(3))\t\\\n\tCASE_##op((val), TRCCNTVRn(0))\t\t\\\n\tCASE_##op((val), TRCCNTVRn(1))\t\t\\\n\tCASE_##op((val), TRCCNTVRn(2))\t\t\\\n\tCASE_##op((val), TRCCNTVRn(3))\t\t\\\n\tCASE_##op((val), TRCIDR8)\t\t\\\n\tCASE_##op((val), TRCIDR9)\t\t\\\n\tCASE_##op((val), TRCIDR10)\t\t\\\n\tCASE_##op((val), TRCIDR11)\t\t\\\n\tCASE_##op((val), TRCIDR12)\t\t\\\n\tCASE_##op((val), TRCIDR13)\t\t\\\n\tCASE_##op((val), TRCIMSPECn(0))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(1))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(2))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(3))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(4))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(5))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(6))\t\t\\\n\tCASE_##op((val), TRCIMSPECn(7))\t\t\\\n\tCASE_##op((val), TRCIDR0)\t\t\\\n\tCASE_##op((val), TRCIDR1)\t\t\\\n\tCASE_##op((val), TRCIDR2)\t\t\\\n\tCASE_##op((val), TRCIDR3)\t\t\\\n\tCASE_##op((val), TRCIDR4)\t\t\\\n\tCASE_##op((val), TRCIDR5)\t\t\\\n\tCASE_##op((val), TRCIDR6)\t\t\\\n\tCASE_##op((val), TRCIDR7)\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(2))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(3))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(4))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(5))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(6))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(7))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(8))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(9))\t\t\\\n\tCASE_##op((val), TRCRSCTLRn(10))\t\\\n\tCASE_##op((val), TRCRSCTLRn(11))\t\\\n\tCASE_##op((val), TRCRSCTLRn(12))\t\\\n\tCASE_##op((val), TRCRSCTLRn(13))\t\\\n\tCASE_##op((val), TRCRSCTLRn(14))\t\\\n\tCASE_##op((val), TRCRSCTLRn(15))\t\\\n\tCASE_##op((val), TRCRSCTLRn(16))\t\\\n\tCASE_##op((val), TRCRSCTLRn(17))\t\\\n\tCASE_##op((val), TRCRSCTLRn(18))\t\\\n\tCASE_##op((val), TRCRSCTLRn(19))\t\\\n\tCASE_##op((val), TRCRSCTLRn(20))\t\\\n\tCASE_##op((val), TRCRSCTLRn(21))\t\\\n\tCASE_##op((val), TRCRSCTLRn(22))\t\\\n\tCASE_##op((val), TRCRSCTLRn(23))\t\\\n\tCASE_##op((val), TRCRSCTLRn(24))\t\\\n\tCASE_##op((val), TRCRSCTLRn(25))\t\\\n\tCASE_##op((val), TRCRSCTLRn(26))\t\\\n\tCASE_##op((val), TRCRSCTLRn(27))\t\\\n\tCASE_##op((val), TRCRSCTLRn(28))\t\\\n\tCASE_##op((val), TRCRSCTLRn(29))\t\\\n\tCASE_##op((val), TRCRSCTLRn(30))\t\\\n\tCASE_##op((val), TRCRSCTLRn(31))\t\\\n\tCASE_##op((val), TRCSSCCRn(0))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(1))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(2))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(3))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(4))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(5))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(6))\t\t\\\n\tCASE_##op((val), TRCSSCCRn(7))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(0))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(1))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(2))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(3))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(4))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(5))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(6))\t\t\\\n\tCASE_##op((val), TRCSSCSRn(7))\t\t\\\n\tCASE_##op((val), TRCSSPCICRn(0))\t\\\n\tCASE_##op((val), TRCSSPCICRn(1))\t\\\n\tCASE_##op((val), TRCSSPCICRn(2))\t\\\n\tCASE_##op((val), TRCSSPCICRn(3))\t\\\n\tCASE_##op((val), TRCSSPCICRn(4))\t\\\n\tCASE_##op((val), TRCSSPCICRn(5))\t\\\n\tCASE_##op((val), TRCSSPCICRn(6))\t\\\n\tCASE_##op((val), TRCSSPCICRn(7))\t\\\n\tCASE_##op((val), TRCOSLSR)\t\t\\\n\tCASE_##op((val), TRCACVRn(0))\t\t\\\n\tCASE_##op((val), TRCACVRn(1))\t\t\\\n\tCASE_##op((val), TRCACVRn(2))\t\t\\\n\tCASE_##op((val), TRCACVRn(3))\t\t\\\n\tCASE_##op((val), TRCACVRn(4))\t\t\\\n\tCASE_##op((val), TRCACVRn(5))\t\t\\\n\tCASE_##op((val), TRCACVRn(6))\t\t\\\n\tCASE_##op((val), TRCACVRn(7))\t\t\\\n\tCASE_##op((val), TRCACVRn(8))\t\t\\\n\tCASE_##op((val), TRCACVRn(9))\t\t\\\n\tCASE_##op((val), TRCACVRn(10))\t\t\\\n\tCASE_##op((val), TRCACVRn(11))\t\t\\\n\tCASE_##op((val), TRCACVRn(12))\t\t\\\n\tCASE_##op((val), TRCACVRn(13))\t\t\\\n\tCASE_##op((val), TRCACVRn(14))\t\t\\\n\tCASE_##op((val), TRCACVRn(15))\t\t\\\n\tCASE_##op((val), TRCACATRn(0))\t\t\\\n\tCASE_##op((val), TRCACATRn(1))\t\t\\\n\tCASE_##op((val), TRCACATRn(2))\t\t\\\n\tCASE_##op((val), TRCACATRn(3))\t\t\\\n\tCASE_##op((val), TRCACATRn(4))\t\t\\\n\tCASE_##op((val), TRCACATRn(5))\t\t\\\n\tCASE_##op((val), TRCACATRn(6))\t\t\\\n\tCASE_##op((val), TRCACATRn(7))\t\t\\\n\tCASE_##op((val), TRCACATRn(8))\t\t\\\n\tCASE_##op((val), TRCACATRn(9))\t\t\\\n\tCASE_##op((val), TRCACATRn(10))\t\t\\\n\tCASE_##op((val), TRCACATRn(11))\t\t\\\n\tCASE_##op((val), TRCACATRn(12))\t\t\\\n\tCASE_##op((val), TRCACATRn(13))\t\t\\\n\tCASE_##op((val), TRCACATRn(14))\t\t\\\n\tCASE_##op((val), TRCACATRn(15))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(0))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(1))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(2))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(3))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(4))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(5))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(6))\t\t\\\n\tCASE_##op((val), TRCDVCVRn(7))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(0))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(1))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(2))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(3))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(4))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(5))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(6))\t\t\\\n\tCASE_##op((val), TRCDVCMRn(7))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(0))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(1))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(2))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(3))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(4))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(5))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(6))\t\t\\\n\tCASE_##op((val), TRCCIDCVRn(7))\t\t\\\n\tCASE_##op((val), TRCVMIDCVRn(0))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(1))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(2))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(3))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(4))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(5))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(6))\t\\\n\tCASE_##op((val), TRCVMIDCVRn(7))\t\\\n\tCASE_##op((val), TRCCIDCCTLR0)\t\t\\\n\tCASE_##op((val), TRCCIDCCTLR1)\t\t\\\n\tCASE_##op((val), TRCVMIDCCTLR0)\t\t\\\n\tCASE_##op((val), TRCVMIDCCTLR1)\t\t\\\n\tCASE_##op((val), TRCCLAIMSET)\t\t\\\n\tCASE_##op((val), TRCCLAIMCLR)\t\t\\\n\tCASE_##op((val), TRCAUTHSTATUS)\t\t\\\n\tCASE_##op((val), TRCDEVARCH)\t\t\\\n\tCASE_##op((val), TRCDEVID)\n\n \n#define ETM_MMAP_LIST(op, val)\t\t\t\\\n\tCASE_##op((val), TRCDEVTYPE)\t\t\\\n\tCASE_##op((val), TRCPDCR)\t\t\\\n\tCASE_##op((val), TRCPDSR)\t\t\\\n\tCASE_##op((val), TRCDEVAFF0)\t\t\\\n\tCASE_##op((val), TRCDEVAFF1)\t\t\\\n\tCASE_##op((val), TRCLAR)\t\t\\\n\tCASE_##op((val), TRCLSR)\t\t\\\n\tCASE_##op((val), TRCITCTRL)\t\t\\\n\tCASE_##op((val), TRCPIDR4)\t\t\\\n\tCASE_##op((val), TRCPIDR0)\t\t\\\n\tCASE_##op((val), TRCPIDR1)\t\t\\\n\tCASE_##op((val), TRCPIDR2)\t\t\\\n\tCASE_##op((val), TRCPIDR3)\n\n#define ETM4x_READ_SYSREG_CASES(res)\t\t\\\n\tETM_COMMON_SYSREG_LIST(READ, (res))\t\\\n\tETM4x_ONLY_SYSREG_LIST(READ, (res))\n\n#define ETM4x_WRITE_SYSREG_CASES(val)\t\t\\\n\tETM_COMMON_SYSREG_LIST(WRITE, (val))\t\\\n\tETM4x_ONLY_SYSREG_LIST(WRITE, (val))\n\n#define ETM_COMMON_SYSREG_LIST_CASES\t\t\\\n\tETM_COMMON_SYSREG_LIST(NOP, __unused)\n\n#define ETM4x_ONLY_SYSREG_LIST_CASES\t\t\\\n\tETM4x_ONLY_SYSREG_LIST(NOP, __unused)\n\n#define ETM4x_SYSREG_LIST_CASES\t\t\t\\\n\tETM_COMMON_SYSREG_LIST_CASES\t\t\\\n\tETM4x_ONLY_SYSREG_LIST(NOP, __unused)\n\n#define ETM4x_MMAP_LIST_CASES\t\tETM_MMAP_LIST(NOP, __unused)\n\n \n#define ETE_READ_CASES(res)\t\t\t\\\n\tETM_COMMON_SYSREG_LIST(READ, (res))\t\\\n\tETE_ONLY_SYSREG_LIST(READ, (res))\n\n#define ETE_WRITE_CASES(val)\t\t\t\\\n\tETM_COMMON_SYSREG_LIST(WRITE, (val))\t\\\n\tETE_ONLY_SYSREG_LIST(WRITE, (val))\n\n#define ETE_ONLY_SYSREG_LIST_CASES\t\t\\\n\tETE_ONLY_SYSREG_LIST(NOP, __unused)\n\n#define read_etm4x_sysreg_offset(offset, _64bit)\t\t\t\t\\\n\t({\t\t\t\t\t\t\t\t\t\\\n\t\tu64 __val;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\t\\\n\t\tif (__is_constexpr((offset)))\t\t\t\t\t\\\n\t\t\t__val = read_etm4x_sysreg_const_offset((offset));\t\\\n\t\telse\t\t\t\t\t\t\t\t\\\n\t\t\t__val = etm4x_sysreg_read((offset), true, (_64bit));\t\\\n\t\t__val;\t\t\t\t\t\t\t\t\\\n\t })\n\n#define write_etm4x_sysreg_offset(val, offset, _64bit)\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (__builtin_constant_p((offset)))\t\t\t\\\n\t\t\twrite_etm4x_sysreg_const_offset((val),\t\t\\\n\t\t\t\t\t\t\t(offset));\t\\\n\t\telse\t\t\t\t\t\t\t\\\n\t\t\tetm4x_sysreg_write((val), (offset), true,\t\\\n\t\t\t\t\t   (_64bit));\t\t\t\\\n\t} while (0)\n\n\n#define etm4x_relaxed_read32(csa, offset)\t\t\t\t\\\n\t((u32)((csa)->io_mem ?\t\t\t\t\t\t\\\n\t\t readl_relaxed((csa)->base + (offset)) :\t\t\\\n\t\t read_etm4x_sysreg_offset((offset), false)))\n\n#define etm4x_relaxed_read64(csa, offset)\t\t\t\t\\\n\t((u64)((csa)->io_mem ?\t\t\t\t\t\t\\\n\t\t readq_relaxed((csa)->base + (offset)) :\t\t\\\n\t\t read_etm4x_sysreg_offset((offset), true)))\n\n#define etm4x_read32(csa, offset)\t\t\t\t\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tu32 __val = etm4x_relaxed_read32((csa), (offset));\t\\\n\t\t__io_ar(__val);\t\t\t\t\t\t\\\n\t\t__val;\t\t\t\t\t\t\t\\\n\t })\n\n#define etm4x_read64(csa, offset)\t\t\t\t\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tu64 __val = etm4x_relaxed_read64((csa), (offset));\t\\\n\t\t__io_ar(__val);\t\t\t\t\t\t\\\n\t\t__val;\t\t\t\t\t\t\t\\\n\t })\n\n#define etm4x_relaxed_write32(csa, val, offset)\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif ((csa)->io_mem)\t\t\t\t\t\\\n\t\t\twritel_relaxed((val), (csa)->base + (offset));\t\\\n\t\telse\t\t\t\t\t\t\t\\\n\t\t\twrite_etm4x_sysreg_offset((val), (offset),\t\\\n\t\t\t\t\t\t  false);\t\t\\\n\t} while (0)\n\n#define etm4x_relaxed_write64(csa, val, offset)\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif ((csa)->io_mem)\t\t\t\t\t\\\n\t\t\twriteq_relaxed((val), (csa)->base + (offset));\t\\\n\t\telse\t\t\t\t\t\t\t\\\n\t\t\twrite_etm4x_sysreg_offset((val), (offset),\t\\\n\t\t\t\t\t\t  true);\t\t\\\n\t} while (0)\n\n#define etm4x_write32(csa, val, offset)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\t__io_bw();\t\t\t\t\t\t\\\n\t\tetm4x_relaxed_write32((csa), (val), (offset));\t\t\\\n\t} while (0)\n\n#define etm4x_write64(csa, val, offset)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\t__io_bw();\t\t\t\t\t\t\\\n\t\tetm4x_relaxed_write64((csa), (val), (offset));\t\t\\\n\t} while (0)\n\n\n \n#define ETM_MAX_NR_PE\t\t\t8\n#define ETMv4_MAX_CNTR\t\t\t4\n#define ETM_MAX_SEQ_STATES\t\t4\n#define ETM_MAX_EXT_INP_SEL\t\t4\n#define ETM_MAX_EXT_INP\t\t\t256\n#define ETM_MAX_EXT_OUT\t\t\t4\n#define ETM_MAX_SINGLE_ADDR_CMP\t\t16\n#define ETM_MAX_ADDR_RANGE_CMP\t\t(ETM_MAX_SINGLE_ADDR_CMP / 2)\n#define ETM_MAX_DATA_VAL_CMP\t\t8\n#define ETMv4_MAX_CTXID_CMP\t\t8\n#define ETM_MAX_VMID_CMP\t\t8\n#define ETM_MAX_PE_CMP\t\t\t8\n#define ETM_MAX_RES_SEL\t\t\t32\n#define ETM_MAX_SS_CMP\t\t\t8\n\n#define ETMv4_SYNC_MASK\t\t\t0x1F\n#define ETM_CYC_THRESHOLD_MASK\t\t0xFFF\n#define ETM_CYC_THRESHOLD_DEFAULT       0x100\n#define ETMv4_EVENT_MASK\t\t0xFF\n#define ETM_CNTR_MAX_VAL\t\t0xFFFF\n#define ETM_TRACEID_MASK\t\t0x3f\n\n \n#define ETM_MODE_EXCLUDE\t\tBIT(0)\n#define ETM_MODE_LOAD\t\t\tBIT(1)\n#define ETM_MODE_STORE\t\t\tBIT(2)\n#define ETM_MODE_LOAD_STORE\t\tBIT(3)\n#define ETM_MODE_BB\t\t\tBIT(4)\n#define ETMv4_MODE_CYCACC\t\tBIT(5)\n#define ETMv4_MODE_CTXID\t\tBIT(6)\n#define ETM_MODE_VMID\t\t\tBIT(7)\n#define ETM_MODE_COND(val)\t\tBMVAL(val, 8, 10)\n#define ETMv4_MODE_TIMESTAMP\t\tBIT(11)\n#define ETM_MODE_RETURNSTACK\t\tBIT(12)\n#define ETM_MODE_QELEM(val)\t\tBMVAL(val, 13, 14)\n#define ETM_MODE_DATA_TRACE_ADDR\tBIT(15)\n#define ETM_MODE_DATA_TRACE_VAL\t\tBIT(16)\n#define ETM_MODE_ISTALL\t\t\tBIT(17)\n#define ETM_MODE_DSTALL\t\t\tBIT(18)\n#define ETM_MODE_ATB_TRIGGER\t\tBIT(19)\n#define ETM_MODE_LPOVERRIDE\t\tBIT(20)\n#define ETM_MODE_ISTALL_EN\t\tBIT(21)\n#define ETM_MODE_DSTALL_EN\t\tBIT(22)\n#define ETM_MODE_INSTPRIO\t\tBIT(23)\n#define ETM_MODE_NOOVERFLOW\t\tBIT(24)\n#define ETM_MODE_TRACE_RESET\t\tBIT(25)\n#define ETM_MODE_TRACE_ERR\t\tBIT(26)\n#define ETM_MODE_VIEWINST_STARTSTOP\tBIT(27)\n#define ETMv4_MODE_ALL\t\t\t(GENMASK(27, 0) | \\\n\t\t\t\t\t ETM_MODE_EXCL_KERN | \\\n\t\t\t\t\t ETM_MODE_EXCL_USER)\n\n \n#define ETM_OSLOCK_NI\t\t0b000\n#define ETM_OSLOCK_PRESENT\t0b010\n#define ETM_OSLOCK_PE\t\t0b100\n\n#define ETM_OSLSR_OSLM(oslsr)\t((((oslsr) & GENMASK(4, 3)) >> 2) | (oslsr & 0x1))\n\n \n#define ETM_DEVARCH_ARCHITECT_MASK\t\tGENMASK(31, 21)\n#define ETM_DEVARCH_ARCHITECT_ARM\t\t((0x4 << 28) | (0b0111011 << 21))\n#define ETM_DEVARCH_PRESENT\t\t\tBIT(20)\n#define ETM_DEVARCH_REVISION_SHIFT\t\t16\n#define ETM_DEVARCH_REVISION_MASK\t\tGENMASK(19, 16)\n#define ETM_DEVARCH_REVISION(x)\t\t\t\\\n\t(((x) & ETM_DEVARCH_REVISION_MASK) >> ETM_DEVARCH_REVISION_SHIFT)\n#define ETM_DEVARCH_ARCHID_MASK\t\t\tGENMASK(15, 0)\n#define ETM_DEVARCH_ARCHID_ARCH_VER_SHIFT\t12\n#define ETM_DEVARCH_ARCHID_ARCH_VER_MASK\tGENMASK(15, 12)\n#define ETM_DEVARCH_ARCHID_ARCH_VER(x)\t\t\\\n\t(((x) & ETM_DEVARCH_ARCHID_ARCH_VER_MASK) >> ETM_DEVARCH_ARCHID_ARCH_VER_SHIFT)\n\n#define ETM_DEVARCH_MAKE_ARCHID_ARCH_VER(ver)\t\t\t\\\n\t(((ver) << ETM_DEVARCH_ARCHID_ARCH_VER_SHIFT) & ETM_DEVARCH_ARCHID_ARCH_VER_MASK)\n\n#define ETM_DEVARCH_ARCHID_ARCH_PART(x)\t\t((x) & 0xfffUL)\n\n#define ETM_DEVARCH_MAKE_ARCHID(major)\t\t\t\\\n\t((ETM_DEVARCH_MAKE_ARCHID_ARCH_VER(major)) | ETM_DEVARCH_ARCHID_ARCH_PART(0xA13))\n\n#define ETM_DEVARCH_ARCHID_ETMv4x\t\tETM_DEVARCH_MAKE_ARCHID(0x4)\n#define ETM_DEVARCH_ARCHID_ETE\t\t\tETM_DEVARCH_MAKE_ARCHID(0x5)\n\n#define ETM_DEVARCH_ID_MASK\t\t\t\t\t\t\\\n\t(ETM_DEVARCH_ARCHITECT_MASK | ETM_DEVARCH_ARCHID_MASK | ETM_DEVARCH_PRESENT)\n#define ETM_DEVARCH_ETMv4x_ARCH\t\t\t\t\t\t\\\n\t(ETM_DEVARCH_ARCHITECT_ARM | ETM_DEVARCH_ARCHID_ETMv4x | ETM_DEVARCH_PRESENT)\n#define ETM_DEVARCH_ETE_ARCH\t\t\t\t\t\t\\\n\t(ETM_DEVARCH_ARCHITECT_ARM | ETM_DEVARCH_ARCHID_ETE | ETM_DEVARCH_PRESENT)\n\n#define CS_DEVTYPE_PE_TRACE\t\t0x00000013\n\n#define TRCSTATR_IDLE_BIT\t\t0\n#define TRCSTATR_PMSTABLE_BIT\t\t1\n#define ETM_DEFAULT_ADDR_COMP\t\t0\n\n#define TRCSSCSRn_PC\t\t\tBIT(3)\n\n \n#define TRCPDCR_PU\t\t\tBIT(3)\n\n#define TRCACATR_EXLEVEL_SHIFT\t\t8\n\n \n#define ETM_EXLEVEL_S_APP\t\tBIT(0)\t \n#define ETM_EXLEVEL_S_OS\t\tBIT(1)\t \n#define ETM_EXLEVEL_S_HYP\t\tBIT(2)\t \n#define ETM_EXLEVEL_S_MON\t\tBIT(3)\t \n#define ETM_EXLEVEL_NS_APP\t\tBIT(4)\t \n#define ETM_EXLEVEL_NS_OS\t\tBIT(5)\t \n#define ETM_EXLEVEL_NS_HYP\t\tBIT(6)\t \n\n \n#define TRCACATR_EXLEVEL_SHIFT\t\t8\n\n#define ETM_TRCIDR1_ARCH_MAJOR_SHIFT\t8\n#define ETM_TRCIDR1_ARCH_MAJOR_MASK\t(0xfU << ETM_TRCIDR1_ARCH_MAJOR_SHIFT)\n#define ETM_TRCIDR1_ARCH_MAJOR(x)\t\\\n\t(((x) & ETM_TRCIDR1_ARCH_MAJOR_MASK) >> ETM_TRCIDR1_ARCH_MAJOR_SHIFT)\n#define ETM_TRCIDR1_ARCH_MINOR_SHIFT\t4\n#define ETM_TRCIDR1_ARCH_MINOR_MASK\t(0xfU << ETM_TRCIDR1_ARCH_MINOR_SHIFT)\n#define ETM_TRCIDR1_ARCH_MINOR(x)\t\\\n\t(((x) & ETM_TRCIDR1_ARCH_MINOR_MASK) >> ETM_TRCIDR1_ARCH_MINOR_SHIFT)\n#define ETM_TRCIDR1_ARCH_SHIFT\t\tETM_TRCIDR1_ARCH_MINOR_SHIFT\n#define ETM_TRCIDR1_ARCH_MASK\t\t\\\n\t(ETM_TRCIDR1_ARCH_MAJOR_MASK | ETM_TRCIDR1_ARCH_MINOR_MASK)\n\n#define ETM_TRCIDR1_ARCH_ETMv4\t\t0x4\n\n \n#define ETM_ARCH_VERSION(major, minor)\t\t\\\n\t((((major) & 0xfU) << 4) | (((minor) & 0xfU)))\n#define ETM_ARCH_MAJOR_VERSION(arch)\t(((arch) >> 4) & 0xfU)\n#define ETM_ARCH_MINOR_VERSION(arch)\t((arch) & 0xfU)\n\n#define ETM_ARCH_V4\tETM_ARCH_VERSION(4, 0)\n#define ETM_ARCH_ETE\tETM_ARCH_VERSION(5, 0)\n\n \n#define ETM_ARCH_V4_3\tETM_ARCH_VERSION(4, 3)\n\nstatic inline u8 etm_devarch_to_arch(u32 devarch)\n{\n\treturn ETM_ARCH_VERSION(ETM_DEVARCH_ARCHID_ARCH_VER(devarch),\n\t\t\t\tETM_DEVARCH_REVISION(devarch));\n}\n\nenum etm_impdef_type {\n\tETM4_IMPDEF_HISI_CORE_COMMIT,\n\tETM4_IMPDEF_FEATURE_MAX,\n};\n\n \nstruct etmv4_config {\n\tu32\t\t\t\tmode;\n\tu32\t\t\t\tpe_sel;\n\tu32\t\t\t\tcfg;\n\tu32\t\t\t\teventctrl0;\n\tu32\t\t\t\teventctrl1;\n\tu32\t\t\t\tstall_ctrl;\n\tu32\t\t\t\tts_ctrl;\n\tu32\t\t\t\tsyncfreq;\n\tu32\t\t\t\tccctlr;\n\tu32\t\t\t\tbb_ctrl;\n\tu32\t\t\t\tvinst_ctrl;\n\tu32\t\t\t\tviiectlr;\n\tu32\t\t\t\tvissctlr;\n\tu32\t\t\t\tvipcssctlr;\n\tu8\t\t\t\tseq_idx;\n\tu32\t\t\t\tseq_ctrl[ETM_MAX_SEQ_STATES];\n\tu32\t\t\t\tseq_rst;\n\tu32\t\t\t\tseq_state;\n\tu8\t\t\t\tcntr_idx;\n\tu32\t\t\t\tcntrldvr[ETMv4_MAX_CNTR];\n\tu32\t\t\t\tcntr_ctrl[ETMv4_MAX_CNTR];\n\tu32\t\t\t\tcntr_val[ETMv4_MAX_CNTR];\n\tu8\t\t\t\tres_idx;\n\tu32\t\t\t\tres_ctrl[ETM_MAX_RES_SEL];\n\tu8\t\t\t\tss_idx;\n\tu32\t\t\t\tss_ctrl[ETM_MAX_SS_CMP];\n\tu32\t\t\t\tss_status[ETM_MAX_SS_CMP];\n\tu32\t\t\t\tss_pe_cmp[ETM_MAX_SS_CMP];\n\tu8\t\t\t\taddr_idx;\n\tu64\t\t\t\taddr_val[ETM_MAX_SINGLE_ADDR_CMP];\n\tu64\t\t\t\taddr_acc[ETM_MAX_SINGLE_ADDR_CMP];\n\tu8\t\t\t\taddr_type[ETM_MAX_SINGLE_ADDR_CMP];\n\tu8\t\t\t\tctxid_idx;\n\tu64\t\t\t\tctxid_pid[ETMv4_MAX_CTXID_CMP];\n\tu32\t\t\t\tctxid_mask0;\n\tu32\t\t\t\tctxid_mask1;\n\tu8\t\t\t\tvmid_idx;\n\tu64\t\t\t\tvmid_val[ETM_MAX_VMID_CMP];\n\tu32\t\t\t\tvmid_mask0;\n\tu32\t\t\t\tvmid_mask1;\n\tu32\t\t\t\text_inp;\n\tu8\t\t\t\ts_ex_level;\n};\n\n \nstruct etmv4_save_state {\n\tu32\ttrcprgctlr;\n\tu32\ttrcprocselr;\n\tu32\ttrcconfigr;\n\tu32\ttrcauxctlr;\n\tu32\ttrceventctl0r;\n\tu32\ttrceventctl1r;\n\tu32\ttrcstallctlr;\n\tu32\ttrctsctlr;\n\tu32\ttrcsyncpr;\n\tu32\ttrcccctlr;\n\tu32\ttrcbbctlr;\n\tu32\ttrctraceidr;\n\tu32\ttrcqctlr;\n\n\tu32\ttrcvictlr;\n\tu32\ttrcviiectlr;\n\tu32\ttrcvissctlr;\n\tu32\ttrcvipcssctlr;\n\tu32\ttrcvdctlr;\n\tu32\ttrcvdsacctlr;\n\tu32\ttrcvdarcctlr;\n\n\tu32\ttrcseqevr[ETM_MAX_SEQ_STATES];\n\tu32\ttrcseqrstevr;\n\tu32\ttrcseqstr;\n\tu32\ttrcextinselr;\n\tu32\ttrccntrldvr[ETMv4_MAX_CNTR];\n\tu32\ttrccntctlr[ETMv4_MAX_CNTR];\n\tu32\ttrccntvr[ETMv4_MAX_CNTR];\n\n\tu32\ttrcrsctlr[ETM_MAX_RES_SEL];\n\n\tu32\ttrcssccr[ETM_MAX_SS_CMP];\n\tu32\ttrcsscsr[ETM_MAX_SS_CMP];\n\tu32\ttrcsspcicr[ETM_MAX_SS_CMP];\n\n\tu64\ttrcacvr[ETM_MAX_SINGLE_ADDR_CMP];\n\tu64\ttrcacatr[ETM_MAX_SINGLE_ADDR_CMP];\n\tu64\ttrccidcvr[ETMv4_MAX_CTXID_CMP];\n\tu64\ttrcvmidcvr[ETM_MAX_VMID_CMP];\n\tu32\ttrccidcctlr0;\n\tu32\ttrccidcctlr1;\n\tu32\ttrcvmidcctlr0;\n\tu32\ttrcvmidcctlr1;\n\n\tu32\ttrcclaimset;\n\n\tu32\tcntr_val[ETMv4_MAX_CNTR];\n\tu32\tseq_state;\n\tu32\tvinst_ctrl;\n\tu32\tss_status[ETM_MAX_SS_CMP];\n\n\tu32\ttrcpdcr;\n};\n\n \nstruct etmv4_drvdata {\n\tstruct clk\t\t\t*pclk;\n\tvoid __iomem\t\t\t*base;\n\tstruct coresight_device\t\t*csdev;\n\tspinlock_t\t\t\tspinlock;\n\tlocal_t\t\t\t\tmode;\n\tint\t\t\t\tcpu;\n\tu8\t\t\t\tarch;\n\tu8\t\t\t\tnr_pe;\n\tu8\t\t\t\tnr_pe_cmp;\n\tu8\t\t\t\tnr_addr_cmp;\n\tu8\t\t\t\tnr_cntr;\n\tu8\t\t\t\tnr_ext_inp;\n\tu8\t\t\t\tnumcidc;\n\tu8\t\t\t\tnumvmidc;\n\tu8\t\t\t\tnrseqstate;\n\tu8\t\t\t\tnr_event;\n\tu8\t\t\t\tnr_resource;\n\tu8\t\t\t\tnr_ss_cmp;\n\tu8\t\t\t\ttrcid;\n\tu8\t\t\t\ttrcid_size;\n\tu8\t\t\t\tts_size;\n\tu8\t\t\t\tctxid_size;\n\tu8\t\t\t\tvmid_size;\n\tu8\t\t\t\tccsize;\n\tu16\t\t\t\tccitmin;\n\tu8\t\t\t\ts_ex_level;\n\tu8\t\t\t\tns_ex_level;\n\tu8\t\t\t\tq_support;\n\tu8\t\t\t\tos_lock_model;\n\tbool\t\t\t\tsticky_enable;\n\tbool\t\t\t\tboot_enable;\n\tbool\t\t\t\tos_unlock;\n\tbool\t\t\t\tinstrp0;\n\tbool\t\t\t\ttrcbb;\n\tbool\t\t\t\ttrccond;\n\tbool\t\t\t\tretstack;\n\tbool\t\t\t\ttrccci;\n\tbool\t\t\t\ttrc_error;\n\tbool\t\t\t\tsyncpr;\n\tbool\t\t\t\tstallctl;\n\tbool\t\t\t\tsysstall;\n\tbool\t\t\t\tnooverflow;\n\tbool\t\t\t\tatbtrig;\n\tbool\t\t\t\tlpoverride;\n\tu64\t\t\t\ttrfcr;\n\tstruct etmv4_config\t\tconfig;\n\tu64\t\t\t\tsave_trfcr;\n\tstruct etmv4_save_state\t\t*save_state;\n\tbool\t\t\t\tstate_needs_restore;\n\tbool\t\t\t\tskip_power_up;\n\tDECLARE_BITMAP(arch_features, ETM4_IMPDEF_FEATURE_MAX);\n};\n\n \nenum etm_addr_acctype {\n\tTRCACATRn_TYPE_ADDR,\n\tTRCACATRn_TYPE_DATA_LOAD_ADDR,\n\tTRCACATRn_TYPE_DATA_STORE_ADDR,\n\tTRCACATRn_TYPE_DATA_LOAD_STORE_ADDR,\n};\n\n \nenum etm_addr_ctxtype {\n\tETM_CTX_NONE,\n\tETM_CTX_CTXID,\n\tETM_CTX_VMID,\n\tETM_CTX_CTXID_VMID,\n};\n\nextern const struct attribute_group *coresight_etmv4_groups[];\nvoid etm4_config_trace_mode(struct etmv4_config *config);\n\nu64 etm4x_sysreg_read(u32 offset, bool _relaxed, bool _64bit);\nvoid etm4x_sysreg_write(u64 val, u32 offset, bool _relaxed, bool _64bit);\n\nstatic inline bool etm4x_is_ete(struct etmv4_drvdata *drvdata)\n{\n\treturn drvdata->arch >= ETM_ARCH_ETE;\n}\n\nint etm4_read_alloc_trace_id(struct etmv4_drvdata *drvdata);\nvoid etm4_release_trace_id(struct etmv4_drvdata *drvdata);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}