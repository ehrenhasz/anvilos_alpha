{
  "module_name": "acpi.c",
  "hash_id": "149ee11f7da308f5100bbab4993bc851c5d7e4a1212c8ebe97e890f172664503",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwtracing/intel_th/acpi.c",
  "human_readable_source": "\n \n\n#define pr_fmt(fmt)\tKBUILD_MODNAME \": \" fmt\n\n#include <linux/types.h>\n#include <linux/module.h>\n#include <linux/device.h>\n#include <linux/sysfs.h>\n#include <linux/platform_device.h>\n#include <linux/acpi.h>\n\n#include \"intel_th.h\"\n\n#define DRIVER_NAME \"intel_th_acpi\"\n\nstatic const struct intel_th_drvdata intel_th_acpi_pch = {\n\t.host_mode_only\t= 1,\n};\n\nstatic const struct intel_th_drvdata intel_th_acpi_uncore = {\n\t.host_mode_only\t= 1,\n};\n\nstatic const struct acpi_device_id intel_th_acpi_ids[] = {\n\t{ \"INTC1000\",\t(kernel_ulong_t)&intel_th_acpi_uncore },\n\t{ \"INTC1001\",\t(kernel_ulong_t)&intel_th_acpi_pch },\n\t{ \"\",\t\t0 },\n};\n\nMODULE_DEVICE_TABLE(acpi, intel_th_acpi_ids);\n\nstatic int intel_th_acpi_probe(struct platform_device *pdev)\n{\n\tstruct acpi_device *adev = ACPI_COMPANION(&pdev->dev);\n\tstruct resource resource[TH_MMIO_END];\n\tconst struct acpi_device_id *id;\n\tstruct intel_th *th;\n\tint i, r;\n\n\tid = acpi_match_device(intel_th_acpi_ids, &pdev->dev);\n\tif (!id)\n\t\treturn -ENODEV;\n\n\tfor (i = 0, r = 0; i < pdev->num_resources && r < TH_MMIO_END; i++)\n\t\tif (pdev->resource[i].flags &\n\t\t    (IORESOURCE_IRQ | IORESOURCE_MEM))\n\t\t\tresource[r++] = pdev->resource[i];\n\n\tth = intel_th_alloc(&pdev->dev, (void *)id->driver_data, resource, r);\n\tif (IS_ERR(th))\n\t\treturn PTR_ERR(th);\n\n\tadev->driver_data = th;\n\n\treturn 0;\n}\n\nstatic int intel_th_acpi_remove(struct platform_device *pdev)\n{\n\tstruct intel_th *th = platform_get_drvdata(pdev);\n\n\tintel_th_free(th);\n\n\treturn 0;\n}\n\nstatic struct platform_driver intel_th_acpi_driver = {\n\t.probe\t\t= intel_th_acpi_probe,\n\t.remove\t\t= intel_th_acpi_remove,\n\t.driver\t\t= {\n\t\t.name\t\t\t= DRIVER_NAME,\n\t\t.acpi_match_table\t= intel_th_acpi_ids,\n\t},\n};\n\nmodule_platform_driver(intel_th_acpi_driver);\n\nMODULE_LICENSE(\"GPL v2\");\nMODULE_DESCRIPTION(\"Intel(R) Trace Hub ACPI controller driver\");\nMODULE_AUTHOR(\"Alexander Shishkin <alexander.shishkin@intel.com>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}