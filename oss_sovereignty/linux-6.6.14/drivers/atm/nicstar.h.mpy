{
  "module_name": "nicstar.h",
  "hash_id": "bb510f252e4cd2d5c6aeeccea0d72d3c42f27fd78ddd73db694d39473041b5f6",
  "original_prompt": "Ingested from linux-6.6.14/drivers/atm/nicstar.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_NICSTAR_H_\n#define _LINUX_NICSTAR_H_\n\n \n\n#include <linux/types.h>\n#include <linux/pci.h>\n#include <linux/idr.h>\n#include <linux/uio.h>\n#include <linux/skbuff.h>\n#include <linux/atmdev.h>\n#include <linux/atm_nicstar.h>\n\n \n\n#define NS_MAX_CARDS 4\t\t \n\n#undef RCQ_SUPPORT\t\t \n\n#define NS_TST_NUM_ENTRIES 2340\t \n#define NS_TST_RESERVED 340\t \n\n#define NS_SMBUFSIZE 48\t\t \n#define NS_LGBUFSIZE 16384\t \n#define NS_RSQSIZE 8192\t\t \n#define NS_VPIBITS 2\t\t \n\n#define NS_MAX_RCTSIZE 4096\t \n\n\t\t\t\t \n#define NUM_SB 32\t\t \n#define NUM_LB 24\t\t \n#define NUM_HB 8\t\t \n#define NUM_IOVB 48\t\t \n\n\t \n#define MIN_SB 8\t\t \n#define MIN_LB 8\t\t \n#define MIN_HB 6\n#define MIN_IOVB 8\n\n\t \n#define MAX_SB 64\t\t \n#define MAX_LB 48\t\t \n#define MAX_HB 10\n#define MAX_IOVB 80\n\n\t \n#define TOP_SB 256\t\t \n#define TOP_LB 128\t\t \n#define TOP_HB 64\n#define TOP_IOVB 256\n\n#define MAX_TBD_PER_VC 1\t \n#define MAX_TBD_PER_SCQ 10\t \n\n#undef ENABLE_TSQFIE\n\n#define SCQFULL_TIMEOUT (5 * HZ)\n\n#define NS_POLL_PERIOD (HZ)\n\n#define PCR_TOLERANCE (1.0001)\n\n \n\n#define NICSTAR_EPROM_MAC_ADDR_OFFSET 0x6C\n#define NICSTAR_EPROM_MAC_ADDR_OFFSET_ALT 0xF6\n\n \n\n#define NS_IOREMAP_SIZE 4096\n\n \n#define BUF_SM\t\t0x00000000\t \n#define BUF_LG\t\t0x00000001\t \n#define BUF_NONE \t0xffffffff\t \n\n#define NS_HBUFSIZE 65568\t \n#define NS_MAX_IOVECS (2 + (65568 - NS_SMBUFSIZE) / \\\n                       (NS_LGBUFSIZE - (NS_LGBUFSIZE % 48)))\n#define NS_IOVBUFSIZE (NS_MAX_IOVECS * (sizeof(struct iovec)))\n\n#define NS_SMBUFSIZE_USABLE (NS_SMBUFSIZE - NS_SMBUFSIZE % 48)\n#define NS_LGBUFSIZE_USABLE (NS_LGBUFSIZE - NS_LGBUFSIZE % 48)\n\n#define NS_AAL0_HEADER (ATM_AAL0_SDU - ATM_CELL_PAYLOAD)\t \n\n#define NS_SMSKBSIZE (NS_SMBUFSIZE + NS_AAL0_HEADER)\n#define NS_LGSKBSIZE (NS_SMBUFSIZE + NS_LGBUFSIZE)\n\n \n\n \n\ntypedef struct ns_rsqe {\n\tu32 word_1;\n\tu32 buffer_handle;\n\tu32 final_aal5_crc32;\n\tu32 word_4;\n} ns_rsqe;\n\n#define ns_rsqe_vpi(ns_rsqep) \\\n        ((le32_to_cpu((ns_rsqep)->word_1) & 0x00FF0000) >> 16)\n#define ns_rsqe_vci(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_1) & 0x0000FFFF)\n\n#define NS_RSQE_VALID      0x80000000\n#define NS_RSQE_NZGFC      0x00004000\n#define NS_RSQE_EOPDU      0x00002000\n#define NS_RSQE_BUFSIZE    0x00001000\n#define NS_RSQE_CONGESTION 0x00000800\n#define NS_RSQE_CLP        0x00000400\n#define NS_RSQE_CRCERR     0x00000200\n\n#define NS_RSQE_BUFSIZE_SM 0x00000000\n#define NS_RSQE_BUFSIZE_LG 0x00001000\n\n#define ns_rsqe_valid(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_VALID)\n#define ns_rsqe_nzgfc(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_NZGFC)\n#define ns_rsqe_eopdu(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_EOPDU)\n#define ns_rsqe_bufsize(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_BUFSIZE)\n#define ns_rsqe_congestion(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_CONGESTION)\n#define ns_rsqe_clp(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_CLP)\n#define ns_rsqe_crcerr(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & NS_RSQE_CRCERR)\n\n#define ns_rsqe_cellcount(ns_rsqep) \\\n        (le32_to_cpu((ns_rsqep)->word_4) & 0x000001FF)\n#define ns_rsqe_init(ns_rsqep) \\\n        ((ns_rsqep)->word_4 = cpu_to_le32(0x00000000))\n\n#define NS_RSQ_NUM_ENTRIES (NS_RSQSIZE / 16)\n#define NS_RSQ_ALIGNMENT NS_RSQSIZE\n\n \n\ntypedef struct cell_payload {\n\tu32 word[12];\n} cell_payload;\n\ntypedef struct ns_rcqe {\n\tu32 word_1;\n\tu32 word_2;\n\tu32 word_3;\n\tu32 word_4;\n\tcell_payload payload;\n} ns_rcqe;\n\n#define NS_RCQE_SIZE 64\t\t \n\n#define ns_rcqe_islast(ns_rcqep) \\\n        (le32_to_cpu((ns_rcqep)->word_2) != 0x00000000)\n#define ns_rcqe_cellheader(ns_rcqep) \\\n        (le32_to_cpu((ns_rcqep)->word_1))\n#define ns_rcqe_nextbufhandle(ns_rcqep) \\\n        (le32_to_cpu((ns_rcqep)->word_2))\n\n \n\ntypedef struct ns_scqe {\n\tu32 word_1;\n\tu32 word_2;\n\tu32 word_3;\n\tu32 word_4;\n} ns_scqe;\n\n    \n\n#define NS_SCQE_TYPE_TBD 0x00000000\n#define NS_SCQE_TYPE_TSR 0x80000000\n\n#define NS_TBD_EOPDU 0x40000000\n#define NS_TBD_AAL0  0x00000000\n#define NS_TBD_AAL34 0x04000000\n#define NS_TBD_AAL5  0x08000000\n\n#define NS_TBD_VPI_MASK 0x0FF00000\n#define NS_TBD_VCI_MASK 0x000FFFF0\n#define NS_TBD_VC_MASK (NS_TBD_VPI_MASK | NS_TBD_VCI_MASK)\n\n#define NS_TBD_VPI_SHIFT 20\n#define NS_TBD_VCI_SHIFT 4\n\n#define ns_tbd_mkword_1(flags, m, n, buflen) \\\n      (cpu_to_le32((flags) | (m) << 23 | (n) << 16 | (buflen)))\n#define ns_tbd_mkword_1_novbr(flags, buflen) \\\n      (cpu_to_le32((flags) | (buflen) | 0x00810000))\n#define ns_tbd_mkword_3(control, pdulen) \\\n      (cpu_to_le32((control) << 16 | (pdulen)))\n#define ns_tbd_mkword_4(gfc, vpi, vci, pt, clp) \\\n      (cpu_to_le32((gfc) << 28 | (vpi) << 20 | (vci) << 4 | (pt) << 1 | (clp)))\n\n#define NS_TSR_INTENABLE 0x20000000\n\n#define NS_TSR_SCDISVBR 0xFFFF\t \n\n#define ns_tsr_mkword_1(flags) \\\n        (cpu_to_le32(NS_SCQE_TYPE_TSR | (flags)))\n#define ns_tsr_mkword_2(scdi, scqi) \\\n        (cpu_to_le32((scdi) << 16 | 0x00008000 | (scqi)))\n\n#define ns_scqe_is_tsr(ns_scqep) \\\n        (le32_to_cpu((ns_scqep)->word_1) & NS_SCQE_TYPE_TSR)\n\n#define VBR_SCQ_NUM_ENTRIES 512\n#define VBR_SCQSIZE 8192\n#define CBR_SCQ_NUM_ENTRIES 64\n#define CBR_SCQSIZE 1024\n\n#define NS_SCQE_SIZE 16\n\n \n\ntypedef struct ns_tsi {\n\tu32 word_1;\n\tu32 word_2;\n} ns_tsi;\n\n    \n\n#define NS_TSI_EMPTY          0x80000000\n#define NS_TSI_TIMESTAMP_MASK 0x00FFFFFF\n\n#define ns_tsi_isempty(ns_tsip) \\\n        (le32_to_cpu((ns_tsip)->word_2) & NS_TSI_EMPTY)\n#define ns_tsi_gettimestamp(ns_tsip) \\\n        (le32_to_cpu((ns_tsip)->word_2) & NS_TSI_TIMESTAMP_MASK)\n\n#define ns_tsi_init(ns_tsip) \\\n        ((ns_tsip)->word_2 = cpu_to_le32(NS_TSI_EMPTY))\n\n#define NS_TSQSIZE 8192\n#define NS_TSQ_NUM_ENTRIES 1024\n#define NS_TSQ_ALIGNMENT 8192\n\n#define NS_TSI_SCDISVBR NS_TSR_SCDISVBR\n\n#define ns_tsi_tmrof(ns_tsip) \\\n        (le32_to_cpu((ns_tsip)->word_1) == 0x00000000)\n#define ns_tsi_getscdindex(ns_tsip) \\\n        ((le32_to_cpu((ns_tsip)->word_1) & 0xFFFF0000) >> 16)\n#define ns_tsi_getscqpos(ns_tsip) \\\n        (le32_to_cpu((ns_tsip)->word_1) & 0x00007FFF)\n\n \n\n \n\ntypedef struct ns_rcte {\n\tu32 word_1;\n\tu32 buffer_handle;\n\tu32 dma_address;\n\tu32 aal5_crc32;\n} ns_rcte;\n\n#define NS_RCTE_BSFB            0x00200000\t \n#define NS_RCTE_NZGFC           0x00100000\n#define NS_RCTE_CONNECTOPEN     0x00080000\n#define NS_RCTE_AALMASK         0x00070000\n#define NS_RCTE_AAL0            0x00000000\n#define NS_RCTE_AAL34           0x00010000\n#define NS_RCTE_AAL5            0x00020000\n#define NS_RCTE_RCQ             0x00030000\n#define NS_RCTE_RAWCELLINTEN    0x00008000\n#define NS_RCTE_RXCONSTCELLADDR 0x00004000\n#define NS_RCTE_BUFFVALID       0x00002000\n#define NS_RCTE_FBDSIZE         0x00001000\n#define NS_RCTE_EFCI            0x00000800\n#define NS_RCTE_CLP             0x00000400\n#define NS_RCTE_CRCERROR        0x00000200\n#define NS_RCTE_CELLCOUNT_MASK  0x000001FF\n\n#define NS_RCTE_FBDSIZE_SM 0x00000000\n#define NS_RCTE_FBDSIZE_LG 0x00001000\n\n#define NS_RCT_ENTRY_SIZE 4\t \n\n    \n\n \n\ntypedef struct ns_fbd {\n\tu32 buffer_handle;\n\tu32 dma_address;\n} ns_fbd;\n\n \n\ntypedef u32 ns_tste;\n\n#define NS_TST_OPCODE_MASK 0x60000000\n\n#define NS_TST_OPCODE_NULL     0x00000000\t \n#define NS_TST_OPCODE_FIXED    0x20000000\t \n#define NS_TST_OPCODE_VARIABLE 0x40000000\n#define NS_TST_OPCODE_END      0x60000000\t \n\n#define ns_tste_make(opcode, sramad) (opcode | sramad)\n\n    \n\n \n\ntypedef struct ns_scd {\n\tu32 word_1;\n\tu32 word_2;\n\tu32 partial_aal5_crc;\n\tu32 reserved;\n\tns_scqe cache_a;\n\tns_scqe cache_b;\n} ns_scd;\n\n#define NS_SCD_BASE_MASK_VAR 0xFFFFE000\t \n#define NS_SCD_BASE_MASK_FIX 0xFFFFFC00\t \n#define NS_SCD_TAIL_MASK_VAR 0x00001FF0\n#define NS_SCD_TAIL_MASK_FIX 0x000003F0\n#define NS_SCD_HEAD_MASK_VAR 0x00001FF0\n#define NS_SCD_HEAD_MASK_FIX 0x000003F0\n#define NS_SCD_XMITFOREVER   0x02000000\n\n    \n\n \n\n#define NS_RCT           0x00000\n#define NS_RCT_32_END    0x03FFF\n#define NS_RCT_128_END   0x0FFFF\n#define NS_UNUSED_32     0x04000\n#define NS_UNUSED_128    0x10000\n#define NS_UNUSED_END    0x1BFFF\n#define NS_TST_FRSCD     0x1C000\n#define NS_TST_FRSCD_END 0x1E7DB\n#define NS_VRSCD2        0x1E7DC\n#define NS_VRSCD2_END    0x1E7E7\n#define NS_VRSCD1        0x1E7E8\n#define NS_VRSCD1_END    0x1E7F3\n#define NS_VRSCD0        0x1E7F4\n#define NS_VRSCD0_END    0x1E7FF\n#define NS_RXFIFO        0x1E800\n#define NS_RXFIFO_END    0x1F7FF\n#define NS_SMFBQ         0x1F800\n#define NS_SMFBQ_END     0x1FBFF\n#define NS_LGFBQ         0x1FC00\n#define NS_LGFBQ_END     0x1FFFF\n\n \n\n \n\nenum ns_regs {\n\tDR0 = 0x00,\t\t \n\tDR1 = 0x04,\t\t \n\tDR2 = 0x08,\t\t \n\tDR3 = 0x0C,\t\t \n\tCMD = 0x10,\t\t \n\tCFG = 0x14,\t\t \n\tSTAT = 0x18,\t\t \n\tRSQB = 0x1C,\t\t \n\tRSQT = 0x20,\t\t \n\tRSQH = 0x24,\t\t \n\tCDC = 0x28,\t\t \n\tVPEC = 0x2C,\t\t \n\tICC = 0x30,\t\t \n\tRAWCT = 0x34,\t\t \n\tTMR = 0x38,\t\t \n\tTSTB = 0x3C,\t\t \n\tTSQB = 0x40,\t\t \n\tTSQT = 0x44,\t\t \n\tTSQH = 0x48,\t\t \n\tGP = 0x4C,\t\t \n\tVPM = 0x50\t\t \n};\n\n \n\n \n\n#define NS_CMD_NO_OPERATION         0x00000000\n\t \n\n#define NS_CMD_OPENCLOSE_CONNECTION 0x20000000\n\t \n\n#define NS_CMD_WRITE_SRAM           0x40000000\n\t \n\n#define NS_CMD_READ_SRAM            0x50000000\n\t \n\n#define NS_CMD_WRITE_FREEBUFQ       0x60000000\n\t \n\n#define NS_CMD_READ_UTILITY         0x80000000\n\t \n\n#define NS_CMD_WRITE_UTILITY        0x90000000\n\t \n\n#define NS_CMD_OPEN_CONNECTION (NS_CMD_OPENCLOSE_CONNECTION | 0x00080000)\n#define NS_CMD_CLOSE_CONNECTION NS_CMD_OPENCLOSE_CONNECTION\n\n \n\n#define NS_CFG_SWRST          0x80000000\t \n#define NS_CFG_RXPATH         0x20000000\t \n#define NS_CFG_SMBUFSIZE_MASK 0x18000000\t \n#define NS_CFG_LGBUFSIZE_MASK 0x06000000\t \n#define NS_CFG_EFBIE          0x01000000\t \n#define NS_CFG_RSQSIZE_MASK   0x00C00000\t \n#define NS_CFG_ICACCEPT       0x00200000\t \n#define NS_CFG_IGNOREGFC      0x00100000\t \n#define NS_CFG_VPIBITS_MASK   0x000C0000\t \n#define NS_CFG_RCTSIZE_MASK   0x00030000\t \n#define NS_CFG_VCERRACCEPT    0x00008000\t \n#define NS_CFG_RXINT_MASK     0x00007000\t \n#define NS_CFG_RAWIE          0x00000800\t \n#define NS_CFG_RSQAFIE        0x00000400\t \n#define NS_CFG_RXRM           0x00000200\t \n#define NS_CFG_TMRROIE        0x00000080\t \n#define NS_CFG_TXEN           0x00000020\t \n#define NS_CFG_TXIE           0x00000010\t \n#define NS_CFG_TXURIE         0x00000008\t \n#define NS_CFG_UMODE          0x00000004\t \n#define NS_CFG_TSQFIE         0x00000002\t \n#define NS_CFG_PHYIE          0x00000001\t \n\n#define NS_CFG_SMBUFSIZE_48    0x00000000\n#define NS_CFG_SMBUFSIZE_96    0x08000000\n#define NS_CFG_SMBUFSIZE_240   0x10000000\n#define NS_CFG_SMBUFSIZE_2048  0x18000000\n\n#define NS_CFG_LGBUFSIZE_2048  0x00000000\n#define NS_CFG_LGBUFSIZE_4096  0x02000000\n#define NS_CFG_LGBUFSIZE_8192  0x04000000\n#define NS_CFG_LGBUFSIZE_16384 0x06000000\n\n#define NS_CFG_RSQSIZE_2048 0x00000000\n#define NS_CFG_RSQSIZE_4096 0x00400000\n#define NS_CFG_RSQSIZE_8192 0x00800000\n\n#define NS_CFG_VPIBITS_0 0x00000000\n#define NS_CFG_VPIBITS_1 0x00040000\n#define NS_CFG_VPIBITS_2 0x00080000\n#define NS_CFG_VPIBITS_8 0x000C0000\n\n#define NS_CFG_RCTSIZE_4096_ENTRIES  0x00000000\n#define NS_CFG_RCTSIZE_8192_ENTRIES  0x00010000\n#define NS_CFG_RCTSIZE_16384_ENTRIES 0x00020000\n\n#define NS_CFG_RXINT_NOINT   0x00000000\n#define NS_CFG_RXINT_NODELAY 0x00001000\n#define NS_CFG_RXINT_314US   0x00002000\n#define NS_CFG_RXINT_624US   0x00003000\n#define NS_CFG_RXINT_899US   0x00004000\n\n \n\n#define NS_STAT_SFBQC_MASK 0xFF000000\t \n#define NS_STAT_LFBQC_MASK 0x00FF0000\t \n#define NS_STAT_TSIF       0x00008000\t \n#define NS_STAT_TXICP      0x00004000\t \n#define NS_STAT_TSQF       0x00001000\t \n#define NS_STAT_TMROF      0x00000800\t \n#define NS_STAT_PHYI       0x00000400\t \n#define NS_STAT_CMDBZ      0x00000200\t \n#define NS_STAT_SFBQF      0x00000100\t \n#define NS_STAT_LFBQF      0x00000080\t \n#define NS_STAT_RSQF       0x00000040\t \n#define NS_STAT_EOPDU      0x00000020\t \n#define NS_STAT_RAWCF      0x00000010\t \n#define NS_STAT_SFBQE      0x00000008\t \n#define NS_STAT_LFBQE      0x00000004\t \n#define NS_STAT_RSQAF      0x00000002\t \n\n#define ns_stat_sfbqc_get(stat) (((stat) & NS_STAT_SFBQC_MASK) >> 23)\n#define ns_stat_lfbqc_get(stat) (((stat) & NS_STAT_LFBQC_MASK) >> 15)\n\n \n\n#define NS_TST0 NS_TST_FRSCD\n#define NS_TST1 (NS_TST_FRSCD + NS_TST_NUM_ENTRIES + 1)\n\n#define NS_FRSCD (NS_TST1 + NS_TST_NUM_ENTRIES + 1)\n#define NS_FRSCD_SIZE 12\t \n#define NS_FRSCD_NUM ((NS_TST_FRSCD_END + 1 - NS_FRSCD) / NS_FRSCD_SIZE)\n\n#if (NS_SMBUFSIZE == 48)\n#define NS_CFG_SMBUFSIZE NS_CFG_SMBUFSIZE_48\n#elif (NS_SMBUFSIZE == 96)\n#define NS_CFG_SMBUFSIZE NS_CFG_SMBUFSIZE_96\n#elif (NS_SMBUFSIZE == 240)\n#define NS_CFG_SMBUFSIZE NS_CFG_SMBUFSIZE_240\n#elif (NS_SMBUFSIZE == 2048)\n#define NS_CFG_SMBUFSIZE NS_CFG_SMBUFSIZE_2048\n#else\n#error NS_SMBUFSIZE is incorrect in nicstar.h\n#endif  \n\n#if (NS_LGBUFSIZE == 2048)\n#define NS_CFG_LGBUFSIZE NS_CFG_LGBUFSIZE_2048\n#elif (NS_LGBUFSIZE == 4096)\n#define NS_CFG_LGBUFSIZE NS_CFG_LGBUFSIZE_4096\n#elif (NS_LGBUFSIZE == 8192)\n#define NS_CFG_LGBUFSIZE NS_CFG_LGBUFSIZE_8192\n#elif (NS_LGBUFSIZE == 16384)\n#define NS_CFG_LGBUFSIZE NS_CFG_LGBUFSIZE_16384\n#else\n#error NS_LGBUFSIZE is incorrect in nicstar.h\n#endif  \n\n#if (NS_RSQSIZE == 2048)\n#define NS_CFG_RSQSIZE NS_CFG_RSQSIZE_2048\n#elif (NS_RSQSIZE == 4096)\n#define NS_CFG_RSQSIZE NS_CFG_RSQSIZE_4096\n#elif (NS_RSQSIZE == 8192)\n#define NS_CFG_RSQSIZE NS_CFG_RSQSIZE_8192\n#else\n#error NS_RSQSIZE is incorrect in nicstar.h\n#endif  \n\n#if (NS_VPIBITS == 0)\n#define NS_CFG_VPIBITS NS_CFG_VPIBITS_0\n#elif (NS_VPIBITS == 1)\n#define NS_CFG_VPIBITS NS_CFG_VPIBITS_1\n#elif (NS_VPIBITS == 2)\n#define NS_CFG_VPIBITS NS_CFG_VPIBITS_2\n#elif (NS_VPIBITS == 8)\n#define NS_CFG_VPIBITS NS_CFG_VPIBITS_8\n#else\n#error NS_VPIBITS is incorrect in nicstar.h\n#endif  \n\n#ifdef RCQ_SUPPORT\n#define NS_CFG_RAWIE_OPT NS_CFG_RAWIE\n#else\n#define NS_CFG_RAWIE_OPT 0x00000000\n#endif  \n\n#ifdef ENABLE_TSQFIE\n#define NS_CFG_TSQFIE_OPT NS_CFG_TSQFIE\n#else\n#define NS_CFG_TSQFIE_OPT 0x00000000\n#endif  \n\n \n\n#ifndef PCI_VENDOR_ID_IDT\n#define PCI_VENDOR_ID_IDT 0x111D\n#endif  \n\n#ifndef PCI_DEVICE_ID_IDT_IDT77201\n#define PCI_DEVICE_ID_IDT_IDT77201 0x0001\n#endif  \n\n \n\nstruct ns_skb_prv {\n\tu32 buf_type;\t\t \n\tu32 dma;\n\tint iovcnt;\n};\n\n#define NS_PRV_BUFTYPE(skb)   \\\n        (((struct ns_skb_prv *)(ATM_SKB(skb)+1))->buf_type)\n#define NS_PRV_DMA(skb) \\\n        (((struct ns_skb_prv *)(ATM_SKB(skb)+1))->dma)\n#define NS_PRV_IOVCNT(skb) \\\n        (((struct ns_skb_prv *)(ATM_SKB(skb)+1))->iovcnt)\n\ntypedef struct tsq_info {\n\tvoid *org;\n        dma_addr_t dma;\n\tns_tsi *base;\n\tns_tsi *next;\n\tns_tsi *last;\n} tsq_info;\n\ntypedef struct scq_info {\n\tvoid *org;\n\tdma_addr_t dma;\n\tns_scqe *base;\n\tns_scqe *last;\n\tns_scqe *next;\n\tvolatile ns_scqe *tail;\t \n\tunsigned num_entries;\n\tstruct sk_buff **skb;\t \n\tu32 scd;\t\t \n\tint tbd_count;\t\t \n\twait_queue_head_t scqfull_waitq;\n\tvolatile char full;\t \n\tspinlock_t lock;\t \n} scq_info;\n\ntypedef struct rsq_info {\n\tvoid *org;\n        dma_addr_t dma;\n\tns_rsqe *base;\n\tns_rsqe *next;\n\tns_rsqe *last;\n} rsq_info;\n\ntypedef struct skb_pool {\n\tvolatile int count;\t \n\tstruct sk_buff_head queue;\n} skb_pool;\n\n \n\ntypedef struct vc_map {\n\tvolatile unsigned int tx:1;\t \n\tvolatile unsigned int rx:1;\t \n\tstruct atm_vcc *tx_vcc, *rx_vcc;\n\tstruct sk_buff *rx_iov;\t \n\tscq_info *scq;\t\t \n\tu32 cbr_scd;\t\t \n\tint tbd_count;\n} vc_map;\n\ntypedef struct ns_dev {\n\tint index;\t\t \n\tint sram_size;\t\t \n\tvoid __iomem *membase;\t \n\tunsigned long max_pcr;\n\tint rct_size;\t\t \n\tint vpibits;\n\tint vcibits;\n\tstruct pci_dev *pcidev;\n\tstruct idr idr;\n\tstruct atm_dev *atmdev;\n\ttsq_info tsq;\n\trsq_info rsq;\n\tscq_info *scq0, *scq1, *scq2;\t \n\tskb_pool sbpool;\t \n\tskb_pool lbpool;\t \n\tskb_pool hbpool;\t \n\tskb_pool iovpool;\t \n\tvolatile int efbie;\t \n\tvolatile u32 tst_addr;\t \n\tvolatile int tst_free_entries;\n\tvc_map vcmap[NS_MAX_RCTSIZE];\n\tvc_map *tste2vc[NS_TST_NUM_ENTRIES];\n\tvc_map *scd2vc[NS_FRSCD_NUM];\n\tbuf_nr sbnr;\n\tbuf_nr lbnr;\n\tbuf_nr hbnr;\n\tbuf_nr iovnr;\n\tint sbfqc;\n\tint lbfqc;\n\tstruct sk_buff *sm_handle;\n\tu32 sm_addr;\n\tstruct sk_buff *lg_handle;\n\tu32 lg_addr;\n\tstruct sk_buff *rcbuf;\t \n        struct ns_rcqe *rawcell;\n\tu32 rawch;\t\t \n\tunsigned intcnt;\t \n\tspinlock_t int_lock;\t \n\tspinlock_t res_lock;\t \n} ns_dev;\n\n    \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}