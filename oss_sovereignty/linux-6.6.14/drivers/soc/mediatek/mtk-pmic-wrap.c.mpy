{
  "module_name": "mtk-pmic-wrap.c",
  "hash_id": "d577df98b52264413db3b75eebfef64ff84a63114be4025dfbf761f8a99a2f8f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/soc/mediatek/mtk-pmic-wrap.c",
  "human_readable_source": "\n \n#include <linux/clk.h>\n#include <linux/interrupt.h>\n#include <linux/io.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/of_platform.h>\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n#include <linux/reset.h>\n\n#define PWRAP_POLL_DELAY_US\t10\n#define PWRAP_POLL_TIMEOUT_US\t10000\n\n#define PWRAP_MT8135_BRIDGE_IORD_ARB_EN\t\t0x4\n#define PWRAP_MT8135_BRIDGE_WACS3_EN\t\t0x10\n#define PWRAP_MT8135_BRIDGE_INIT_DONE3\t\t0x14\n#define PWRAP_MT8135_BRIDGE_WACS4_EN\t\t0x24\n#define PWRAP_MT8135_BRIDGE_INIT_DONE4\t\t0x28\n#define PWRAP_MT8135_BRIDGE_INT_EN\t\t0x38\n#define PWRAP_MT8135_BRIDGE_TIMER_EN\t\t0x48\n#define PWRAP_MT8135_BRIDGE_WDT_UNIT\t\t0x50\n#define PWRAP_MT8135_BRIDGE_WDT_SRC_EN\t\t0x54\n\n \n#define PWRAP_GET_WACS_RDATA(x)\t\t(((x) >> 0) & 0x0000ffff)\n#define PWRAP_GET_WACS_ARB_FSM(x)\t(((x) >> 1) & 0x00000007)\n#define PWRAP_GET_WACS_FSM(x)\t\t(((x) >> 16) & 0x00000007)\n#define PWRAP_GET_WACS_REQ(x)\t\t(((x) >> 19) & 0x00000001)\n#define PWRAP_STATE_SYNC_IDLE0\t\tBIT(20)\n#define PWRAP_STATE_INIT_DONE0\t\tBIT(21)\n#define PWRAP_STATE_INIT_DONE0_MT8186\tBIT(22)\n#define PWRAP_STATE_INIT_DONE1\t\tBIT(15)\n\n \n#define PWRAP_WACS_FSM_IDLE\t\t0x00\n#define PWRAP_WACS_FSM_REQ\t\t0x02\n#define PWRAP_WACS_FSM_WFDLE\t\t0x04\n#define PWRAP_WACS_FSM_WFVLDCLR\t\t0x06\n#define PWRAP_WACS_INIT_DONE\t\t0x01\n#define PWRAP_WACS_WACS_SYNC_IDLE\t0x01\n#define PWRAP_WACS_SYNC_BUSY\t\t0x00\n\n \n#define PWRAP_DEW_READ_TEST_VAL\t\t0x5aa5\n#define PWRAP_DEW_COMP_READ_TEST_VAL\t0xa55a\n#define PWRAP_DEW_WRITE_TEST_VAL\t0xa55a\n\n \n#define PWRAP_MAN_CMD_SPI_WRITE_NEW\t(1 << 14)\n#define PWRAP_MAN_CMD_SPI_WRITE\t\t(1 << 13)\n#define PWRAP_MAN_CMD_OP_CSH\t\t(0x0 << 8)\n#define PWRAP_MAN_CMD_OP_CSL\t\t(0x1 << 8)\n#define PWRAP_MAN_CMD_OP_CK\t\t(0x2 << 8)\n#define PWRAP_MAN_CMD_OP_OUTS\t\t(0x8 << 8)\n#define PWRAP_MAN_CMD_OP_OUTD\t\t(0x9 << 8)\n#define PWRAP_MAN_CMD_OP_OUTQ\t\t(0xa << 8)\n\n \n#define PWRAP_WDT_SRC_EN_STAUPD_TRIG\t\t(1 << 25)\n#define PWRAP_WDT_SRC_EN_HARB_STAUPD_DLE\t(1 << 20)\n#define PWRAP_WDT_SRC_EN_HARB_STAUPD_ALE\t(1 << 6)\n#define PWRAP_WDT_SRC_MASK_ALL\t\t\t0xffffffff\n#define PWRAP_WDT_SRC_MASK_NO_STAUPD\t~(PWRAP_WDT_SRC_EN_STAUPD_TRIG | \\\n\t\t\t\t\t  PWRAP_WDT_SRC_EN_HARB_STAUPD_DLE | \\\n\t\t\t\t\t  PWRAP_WDT_SRC_EN_HARB_STAUPD_ALE)\n\n \n#define PWRAP_SLV_CAP_SPI\tBIT(0)\n#define PWRAP_SLV_CAP_DUALIO\tBIT(1)\n#define PWRAP_SLV_CAP_SECURITY\tBIT(2)\n#define HAS_CAP(_c, _x)\t(((_c) & (_x)) == (_x))\n\n \n#define PWRAP_CAP_BRIDGE\tBIT(0)\n#define PWRAP_CAP_RESET\t\tBIT(1)\n#define PWRAP_CAP_DCM\t\tBIT(2)\n#define PWRAP_CAP_INT1_EN\tBIT(3)\n#define PWRAP_CAP_WDT_SRC1\tBIT(4)\n#define PWRAP_CAP_ARB\t\tBIT(5)\n#define PWRAP_CAP_ARB_MT8186\tBIT(8)\n\n \nenum dew_regs {\n\tPWRAP_DEW_BASE,\n\tPWRAP_DEW_DIO_EN,\n\tPWRAP_DEW_READ_TEST,\n\tPWRAP_DEW_WRITE_TEST,\n\tPWRAP_DEW_CRC_EN,\n\tPWRAP_DEW_CRC_VAL,\n\tPWRAP_DEW_MON_GRP_SEL,\n\tPWRAP_DEW_CIPHER_KEY_SEL,\n\tPWRAP_DEW_CIPHER_IV_SEL,\n\tPWRAP_DEW_CIPHER_RDY,\n\tPWRAP_DEW_CIPHER_MODE,\n\tPWRAP_DEW_CIPHER_SWRST,\n\n\t \n\tPWRAP_DEW_CIPHER_EN,\n\tPWRAP_DEW_RDDMY_NO,\n\n\t \n\tPWRAP_SMT_CON1,\n\tPWRAP_DRV_CON1,\n\tPWRAP_FILTER_CON0,\n\tPWRAP_GPIO_PULLEN0_CLR,\n\tPWRAP_RG_SPI_CON0,\n\tPWRAP_RG_SPI_RECORD0,\n\tPWRAP_RG_SPI_CON2,\n\tPWRAP_RG_SPI_CON3,\n\tPWRAP_RG_SPI_CON4,\n\tPWRAP_RG_SPI_CON5,\n\tPWRAP_RG_SPI_CON6,\n\tPWRAP_RG_SPI_CON7,\n\tPWRAP_RG_SPI_CON8,\n\tPWRAP_RG_SPI_CON13,\n\tPWRAP_SPISLV_KEY,\n\n\t \n\tPWRAP_DEW_CRC_SWRST,\n\tPWRAP_DEW_RG_EN_RECORD,\n\tPWRAP_DEW_RECORD_CMD0,\n\tPWRAP_DEW_RECORD_CMD1,\n\tPWRAP_DEW_RECORD_CMD2,\n\tPWRAP_DEW_RECORD_CMD3,\n\tPWRAP_DEW_RECORD_CMD4,\n\tPWRAP_DEW_RECORD_CMD5,\n\tPWRAP_DEW_RECORD_WDATA0,\n\tPWRAP_DEW_RECORD_WDATA1,\n\tPWRAP_DEW_RECORD_WDATA2,\n\tPWRAP_DEW_RECORD_WDATA3,\n\tPWRAP_DEW_RECORD_WDATA4,\n\tPWRAP_DEW_RECORD_WDATA5,\n\tPWRAP_DEW_RG_ADDR_TARGET,\n\tPWRAP_DEW_RG_ADDR_MASK,\n\tPWRAP_DEW_RG_WDATA_TARGET,\n\tPWRAP_DEW_RG_WDATA_MASK,\n\tPWRAP_DEW_RG_SPI_RECORD_CLR,\n\tPWRAP_DEW_RG_CMD_ALERT_CLR,\n\n\t \n\tPWRAP_DEW_EVENT_OUT_EN,\n\tPWRAP_DEW_EVENT_SRC_EN,\n\tPWRAP_DEW_EVENT_SRC,\n\tPWRAP_DEW_EVENT_FLAG,\n\tPWRAP_DEW_MON_FLAG_SEL,\n\tPWRAP_DEW_EVENT_TEST,\n\tPWRAP_DEW_CIPHER_LOAD,\n\tPWRAP_DEW_CIPHER_START,\n};\n\nstatic const u32 mt6323_regs[] = {\n\t[PWRAP_DEW_BASE] =\t\t0x0000,\n\t[PWRAP_DEW_DIO_EN] =\t\t0x018a,\n\t[PWRAP_DEW_READ_TEST] =\t\t0x018c,\n\t[PWRAP_DEW_WRITE_TEST] =\t0x018e,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x0192,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0x0194,\n\t[PWRAP_DEW_MON_GRP_SEL] =\t0x0196,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x0198,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x019a,\n\t[PWRAP_DEW_CIPHER_EN] =\t\t0x019c,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x019e,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x01a0,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x01a2,\n\t[PWRAP_DEW_RDDMY_NO] =\t\t0x01a4,\n};\n\nstatic const u32 mt6331_regs[] = {\n\t[PWRAP_DEW_DIO_EN] =\t\t0x018c,\n\t[PWRAP_DEW_READ_TEST] =\t\t0x018e,\n\t[PWRAP_DEW_WRITE_TEST] =\t0x0190,\n\t[PWRAP_DEW_CRC_SWRST] =\t\t0x0192,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x0194,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0x0196,\n\t[PWRAP_DEW_MON_GRP_SEL] =\t0x0198,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x019a,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x019c,\n\t[PWRAP_DEW_CIPHER_EN] =\t\t0x019e,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x01a0,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x01a2,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x01a4,\n\t[PWRAP_DEW_RDDMY_NO] =\t\t0x01a6,\n};\n\nstatic const u32 mt6332_regs[] = {\n\t[PWRAP_DEW_DIO_EN] =\t\t0x80f6,\n\t[PWRAP_DEW_READ_TEST] =\t\t0x80f8,\n\t[PWRAP_DEW_WRITE_TEST] =\t0x80fa,\n\t[PWRAP_DEW_CRC_SWRST] =\t\t0x80fc,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x80fe,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0x8100,\n\t[PWRAP_DEW_MON_GRP_SEL] =\t0x8102,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x8104,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x8106,\n\t[PWRAP_DEW_CIPHER_EN] =\t\t0x8108,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x810a,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x810c,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x810e,\n\t[PWRAP_DEW_RDDMY_NO] =\t\t0x8110,\n};\n\nstatic const u32 mt6351_regs[] = {\n\t[PWRAP_DEW_DIO_EN] =\t\t0x02F2,\n\t[PWRAP_DEW_READ_TEST] =\t\t0x02F4,\n\t[PWRAP_DEW_WRITE_TEST] =\t0x02F6,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x02FA,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0x02FC,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x0300,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x0302,\n\t[PWRAP_DEW_CIPHER_EN] =\t\t0x0304,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x0306,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x0308,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x030A,\n\t[PWRAP_DEW_RDDMY_NO] =\t\t0x030C,\n};\n\nstatic const u32 mt6357_regs[] = {\n\t[PWRAP_DEW_DIO_EN] =            0x040A,\n\t[PWRAP_DEW_READ_TEST] =         0x040C,\n\t[PWRAP_DEW_WRITE_TEST] =        0x040E,\n\t[PWRAP_DEW_CRC_EN] =            0x0412,\n\t[PWRAP_DEW_CRC_VAL] =           0x0414,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =    0x0418,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =     0x041A,\n\t[PWRAP_DEW_CIPHER_EN] =         0x041C,\n\t[PWRAP_DEW_CIPHER_RDY] =        0x041E,\n\t[PWRAP_DEW_CIPHER_MODE] =       0x0420,\n\t[PWRAP_DEW_CIPHER_SWRST] =      0x0422,\n\t[PWRAP_DEW_RDDMY_NO] =          0x0424,\n};\n\nstatic const u32 mt6358_regs[] = {\n\t[PWRAP_SMT_CON1] =\t\t0x0030,\n\t[PWRAP_DRV_CON1] =\t\t0x0038,\n\t[PWRAP_FILTER_CON0] =\t\t0x0040,\n\t[PWRAP_GPIO_PULLEN0_CLR] =\t0x0098,\n\t[PWRAP_RG_SPI_CON0] =\t\t0x0408,\n\t[PWRAP_RG_SPI_RECORD0] =\t0x040a,\n\t[PWRAP_DEW_DIO_EN] =\t\t0x040c,\n\t[PWRAP_DEW_READ_TEST]\t=\t0x040e,\n\t[PWRAP_DEW_WRITE_TEST]\t=\t0x0410,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x0414,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x041a,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x041c,\n\t[PWRAP_DEW_CIPHER_EN]\t=\t0x041e,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x0420,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x0422,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x0424,\n\t[PWRAP_RG_SPI_CON2] =\t\t0x0432,\n\t[PWRAP_RG_SPI_CON3] =\t\t0x0434,\n\t[PWRAP_RG_SPI_CON4] =\t\t0x0436,\n\t[PWRAP_RG_SPI_CON5] =\t\t0x0438,\n\t[PWRAP_RG_SPI_CON6] =\t\t0x043a,\n\t[PWRAP_RG_SPI_CON7] =\t\t0x043c,\n\t[PWRAP_RG_SPI_CON8] =\t\t0x043e,\n\t[PWRAP_RG_SPI_CON13] =\t\t0x0448,\n\t[PWRAP_SPISLV_KEY] =\t\t0x044a,\n};\n\nstatic const u32 mt6359_regs[] = {\n\t[PWRAP_DEW_RG_EN_RECORD] =\t0x040a,\n\t[PWRAP_DEW_DIO_EN] =\t\t0x040c,\n\t[PWRAP_DEW_READ_TEST] =\t\t0x040e,\n\t[PWRAP_DEW_WRITE_TEST] =\t0x0410,\n\t[PWRAP_DEW_CRC_SWRST] =\t\t0x0412,\n\t[PWRAP_DEW_CRC_EN] =\t\t0x0414,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0x0416,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0x0418,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0x041a,\n\t[PWRAP_DEW_CIPHER_EN] =\t\t0x041c,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0x041e,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0x0420,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0x0422,\n\t[PWRAP_DEW_RDDMY_NO] =\t\t0x0424,\n\t[PWRAP_DEW_RECORD_CMD0] =\t0x0428,\n\t[PWRAP_DEW_RECORD_CMD1] =\t0x042a,\n\t[PWRAP_DEW_RECORD_CMD2] =\t0x042c,\n\t[PWRAP_DEW_RECORD_CMD3] =\t0x042e,\n\t[PWRAP_DEW_RECORD_CMD4] =\t0x0430,\n\t[PWRAP_DEW_RECORD_CMD5] =\t0x0432,\n\t[PWRAP_DEW_RECORD_WDATA0] =\t0x0434,\n\t[PWRAP_DEW_RECORD_WDATA1] =\t0x0436,\n\t[PWRAP_DEW_RECORD_WDATA2] =\t0x0438,\n\t[PWRAP_DEW_RECORD_WDATA3] =\t0x043a,\n\t[PWRAP_DEW_RECORD_WDATA4] =\t0x043c,\n\t[PWRAP_DEW_RECORD_WDATA5] =\t0x043e,\n\t[PWRAP_DEW_RG_ADDR_TARGET] =\t0x0440,\n\t[PWRAP_DEW_RG_ADDR_MASK] =\t0x0442,\n\t[PWRAP_DEW_RG_WDATA_TARGET] =\t0x0444,\n\t[PWRAP_DEW_RG_WDATA_MASK] =\t0x0446,\n\t[PWRAP_DEW_RG_SPI_RECORD_CLR] =\t0x0448,\n\t[PWRAP_DEW_RG_CMD_ALERT_CLR] =\t0x0448,\n\t[PWRAP_SPISLV_KEY] =\t\t0x044a,\n};\n\nstatic const u32 mt6397_regs[] = {\n\t[PWRAP_DEW_BASE] =\t\t0xbc00,\n\t[PWRAP_DEW_EVENT_OUT_EN] =\t0xbc00,\n\t[PWRAP_DEW_DIO_EN] =\t\t0xbc02,\n\t[PWRAP_DEW_EVENT_SRC_EN] =\t0xbc04,\n\t[PWRAP_DEW_EVENT_SRC] =\t\t0xbc06,\n\t[PWRAP_DEW_EVENT_FLAG] =\t0xbc08,\n\t[PWRAP_DEW_READ_TEST] =\t\t0xbc0a,\n\t[PWRAP_DEW_WRITE_TEST] =\t0xbc0c,\n\t[PWRAP_DEW_CRC_EN] =\t\t0xbc0e,\n\t[PWRAP_DEW_CRC_VAL] =\t\t0xbc10,\n\t[PWRAP_DEW_MON_GRP_SEL] =\t0xbc12,\n\t[PWRAP_DEW_MON_FLAG_SEL] =\t0xbc14,\n\t[PWRAP_DEW_EVENT_TEST] =\t0xbc16,\n\t[PWRAP_DEW_CIPHER_KEY_SEL] =\t0xbc18,\n\t[PWRAP_DEW_CIPHER_IV_SEL] =\t0xbc1a,\n\t[PWRAP_DEW_CIPHER_LOAD] =\t0xbc1c,\n\t[PWRAP_DEW_CIPHER_START] =\t0xbc1e,\n\t[PWRAP_DEW_CIPHER_RDY] =\t0xbc20,\n\t[PWRAP_DEW_CIPHER_MODE] =\t0xbc22,\n\t[PWRAP_DEW_CIPHER_SWRST] =\t0xbc24,\n};\n\nenum pwrap_regs {\n\tPWRAP_MUX_SEL,\n\tPWRAP_WRAP_EN,\n\tPWRAP_DIO_EN,\n\tPWRAP_SIDLY,\n\tPWRAP_CSHEXT_WRITE,\n\tPWRAP_CSHEXT_READ,\n\tPWRAP_CSLEXT_START,\n\tPWRAP_CSLEXT_END,\n\tPWRAP_STAUPD_PRD,\n\tPWRAP_STAUPD_GRPEN,\n\tPWRAP_STAUPD_MAN_TRIG,\n\tPWRAP_STAUPD_STA,\n\tPWRAP_WRAP_STA,\n\tPWRAP_HARB_INIT,\n\tPWRAP_HARB_HPRIO,\n\tPWRAP_HIPRIO_ARB_EN,\n\tPWRAP_HARB_STA0,\n\tPWRAP_HARB_STA1,\n\tPWRAP_MAN_EN,\n\tPWRAP_MAN_CMD,\n\tPWRAP_MAN_RDATA,\n\tPWRAP_MAN_VLDCLR,\n\tPWRAP_WACS0_EN,\n\tPWRAP_INIT_DONE0,\n\tPWRAP_WACS0_CMD,\n\tPWRAP_WACS0_RDATA,\n\tPWRAP_WACS0_VLDCLR,\n\tPWRAP_WACS1_EN,\n\tPWRAP_INIT_DONE1,\n\tPWRAP_WACS1_CMD,\n\tPWRAP_WACS1_RDATA,\n\tPWRAP_WACS1_VLDCLR,\n\tPWRAP_WACS2_EN,\n\tPWRAP_INIT_DONE2,\n\tPWRAP_WACS2_CMD,\n\tPWRAP_WACS2_RDATA,\n\tPWRAP_WACS2_VLDCLR,\n\tPWRAP_INT_EN,\n\tPWRAP_INT_FLG_RAW,\n\tPWRAP_INT_FLG,\n\tPWRAP_INT_CLR,\n\tPWRAP_SIG_ADR,\n\tPWRAP_SIG_MODE,\n\tPWRAP_SIG_VALUE,\n\tPWRAP_SIG_ERRVAL,\n\tPWRAP_CRC_EN,\n\tPWRAP_TIMER_EN,\n\tPWRAP_TIMER_STA,\n\tPWRAP_WDT_UNIT,\n\tPWRAP_WDT_SRC_EN,\n\tPWRAP_WDT_FLG,\n\tPWRAP_DEBUG_INT_SEL,\n\tPWRAP_CIPHER_KEY_SEL,\n\tPWRAP_CIPHER_IV_SEL,\n\tPWRAP_CIPHER_RDY,\n\tPWRAP_CIPHER_MODE,\n\tPWRAP_CIPHER_SWRST,\n\tPWRAP_DCM_EN,\n\tPWRAP_DCM_DBC_PRD,\n\tPWRAP_EINT_STA0_ADR,\n\tPWRAP_EINT_STA1_ADR,\n\tPWRAP_SWINF_2_WDATA_31_0,\n\tPWRAP_SWINF_2_RDATA_31_0,\n\n\t \n\tPWRAP_ADC_CMD_ADDR,\n\tPWRAP_PWRAP_ADC_CMD,\n\tPWRAP_ADC_RDY_ADDR,\n\tPWRAP_ADC_RDATA_ADDR1,\n\tPWRAP_ADC_RDATA_ADDR2,\n\n\t \n\tPWRAP_STA,\n\tPWRAP_CLR,\n\tPWRAP_DVFS_ADR8,\n\tPWRAP_DVFS_WDATA8,\n\tPWRAP_DVFS_ADR9,\n\tPWRAP_DVFS_WDATA9,\n\tPWRAP_DVFS_ADR10,\n\tPWRAP_DVFS_WDATA10,\n\tPWRAP_DVFS_ADR11,\n\tPWRAP_DVFS_WDATA11,\n\tPWRAP_DVFS_ADR12,\n\tPWRAP_DVFS_WDATA12,\n\tPWRAP_DVFS_ADR13,\n\tPWRAP_DVFS_WDATA13,\n\tPWRAP_DVFS_ADR14,\n\tPWRAP_DVFS_WDATA14,\n\tPWRAP_DVFS_ADR15,\n\tPWRAP_DVFS_WDATA15,\n\tPWRAP_EXT_CK,\n\tPWRAP_ADC_RDATA_ADDR,\n\tPWRAP_GPS_STA,\n\tPWRAP_SW_RST,\n\tPWRAP_DVFS_STEP_CTRL0,\n\tPWRAP_DVFS_STEP_CTRL1,\n\tPWRAP_DVFS_STEP_CTRL2,\n\tPWRAP_SPI2_CTRL,\n\n\t \n\tPWRAP_CSHEXT,\n\tPWRAP_EVENT_IN_EN,\n\tPWRAP_EVENT_DST_EN,\n\tPWRAP_RRARB_INIT,\n\tPWRAP_RRARB_EN,\n\tPWRAP_RRARB_STA0,\n\tPWRAP_RRARB_STA1,\n\tPWRAP_EVENT_STA,\n\tPWRAP_EVENT_STACLR,\n\tPWRAP_CIPHER_LOAD,\n\tPWRAP_CIPHER_START,\n\n\t \n\tPWRAP_RDDMY,\n\tPWRAP_SI_CK_CON,\n\tPWRAP_DVFS_ADR0,\n\tPWRAP_DVFS_WDATA0,\n\tPWRAP_DVFS_ADR1,\n\tPWRAP_DVFS_WDATA1,\n\tPWRAP_DVFS_ADR2,\n\tPWRAP_DVFS_WDATA2,\n\tPWRAP_DVFS_ADR3,\n\tPWRAP_DVFS_WDATA3,\n\tPWRAP_DVFS_ADR4,\n\tPWRAP_DVFS_WDATA4,\n\tPWRAP_DVFS_ADR5,\n\tPWRAP_DVFS_WDATA5,\n\tPWRAP_DVFS_ADR6,\n\tPWRAP_DVFS_WDATA6,\n\tPWRAP_DVFS_ADR7,\n\tPWRAP_DVFS_WDATA7,\n\tPWRAP_SPMINF_STA,\n\tPWRAP_CIPHER_EN,\n\n\t \n\tPWRAP_SI_SAMPLE_CTRL,\n\tPWRAP_CSLEXT_WRITE,\n\tPWRAP_CSLEXT_READ,\n\tPWRAP_EXT_CK_WRITE,\n\tPWRAP_STAUPD_CTRL,\n\tPWRAP_WACS_P2P_EN,\n\tPWRAP_INIT_DONE_P2P,\n\tPWRAP_WACS_MD32_EN,\n\tPWRAP_INIT_DONE_MD32,\n\tPWRAP_INT1_EN,\n\tPWRAP_INT1_FLG,\n\tPWRAP_INT1_CLR,\n\tPWRAP_WDT_SRC_EN_1,\n\tPWRAP_INT_GPS_AUXADC_CMD_ADDR,\n\tPWRAP_INT_GPS_AUXADC_CMD,\n\tPWRAP_INT_GPS_AUXADC_RDATA_ADDR,\n\tPWRAP_EXT_GPS_AUXADC_RDATA_ADDR,\n\tPWRAP_GPSINF_0_STA,\n\tPWRAP_GPSINF_1_STA,\n\n\t \n\tPWRAP_OP_TYPE,\n\tPWRAP_MSB_FIRST,\n};\n\nstatic int mt2701_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xc,\n\t[PWRAP_RDDMY] =\t\t\t0x18,\n\t[PWRAP_SI_CK_CON] =\t\t0x1c,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x20,\n\t[PWRAP_CSHEXT_READ] =\t\t0x24,\n\t[PWRAP_CSLEXT_START] =\t\t0x28,\n\t[PWRAP_CSLEXT_END] =\t\t0x2c,\n\t[PWRAP_STAUPD_PRD] =\t\t0x30,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x34,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x38,\n\t[PWRAP_STAUPD_STA] =\t\t0x3c,\n\t[PWRAP_WRAP_STA] =\t\t0x44,\n\t[PWRAP_HARB_INIT] =\t\t0x48,\n\t[PWRAP_HARB_HPRIO] =\t\t0x4c,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x50,\n\t[PWRAP_HARB_STA0] =\t\t0x54,\n\t[PWRAP_HARB_STA1] =\t\t0x58,\n\t[PWRAP_MAN_EN] =\t\t0x5c,\n\t[PWRAP_MAN_CMD] =\t\t0x60,\n\t[PWRAP_MAN_RDATA] =\t\t0x64,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x68,\n\t[PWRAP_WACS0_EN] =\t\t0x6c,\n\t[PWRAP_INIT_DONE0] =\t\t0x70,\n\t[PWRAP_WACS0_CMD] =\t\t0x74,\n\t[PWRAP_WACS0_RDATA] =\t\t0x78,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x7c,\n\t[PWRAP_WACS1_EN] =\t\t0x80,\n\t[PWRAP_INIT_DONE1] =\t\t0x84,\n\t[PWRAP_WACS1_CMD] =\t\t0x88,\n\t[PWRAP_WACS1_RDATA] =\t\t0x8c,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x90,\n\t[PWRAP_WACS2_EN] =\t\t0x94,\n\t[PWRAP_INIT_DONE2] =\t\t0x98,\n\t[PWRAP_WACS2_CMD] =\t\t0x9c,\n\t[PWRAP_WACS2_RDATA] =\t\t0xa0,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xa4,\n\t[PWRAP_INT_EN] =\t\t0xa8,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xac,\n\t[PWRAP_INT_FLG] =\t\t0xb0,\n\t[PWRAP_INT_CLR] =\t\t0xb4,\n\t[PWRAP_SIG_ADR] =\t\t0xb8,\n\t[PWRAP_SIG_MODE] =\t\t0xbc,\n\t[PWRAP_SIG_VALUE] =\t\t0xc0,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xc4,\n\t[PWRAP_CRC_EN] =\t\t0xc8,\n\t[PWRAP_TIMER_EN] =\t\t0xcc,\n\t[PWRAP_TIMER_STA] =\t\t0xd0,\n\t[PWRAP_WDT_UNIT] =\t\t0xd4,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xd8,\n\t[PWRAP_WDT_FLG] =\t\t0xdc,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xe0,\n\t[PWRAP_DVFS_ADR0] =\t\t0xe4,\n\t[PWRAP_DVFS_WDATA0] =\t\t0xe8,\n\t[PWRAP_DVFS_ADR1] =\t\t0xec,\n\t[PWRAP_DVFS_WDATA1] =\t\t0xf0,\n\t[PWRAP_DVFS_ADR2] =\t\t0xf4,\n\t[PWRAP_DVFS_WDATA2] =\t\t0xf8,\n\t[PWRAP_DVFS_ADR3] =\t\t0xfc,\n\t[PWRAP_DVFS_WDATA3] =\t\t0x100,\n\t[PWRAP_DVFS_ADR4] =\t\t0x104,\n\t[PWRAP_DVFS_WDATA4] =\t\t0x108,\n\t[PWRAP_DVFS_ADR5] =\t\t0x10c,\n\t[PWRAP_DVFS_WDATA5] =\t\t0x110,\n\t[PWRAP_DVFS_ADR6] =\t\t0x114,\n\t[PWRAP_DVFS_WDATA6] =\t\t0x118,\n\t[PWRAP_DVFS_ADR7] =\t\t0x11c,\n\t[PWRAP_DVFS_WDATA7] =\t\t0x120,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x124,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x128,\n\t[PWRAP_CIPHER_EN] =\t\t0x12c,\n\t[PWRAP_CIPHER_RDY] =\t\t0x130,\n\t[PWRAP_CIPHER_MODE] =\t\t0x134,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x138,\n\t[PWRAP_DCM_EN] =\t\t0x13c,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x140,\n\t[PWRAP_ADC_CMD_ADDR] =\t\t0x144,\n\t[PWRAP_PWRAP_ADC_CMD] =\t\t0x148,\n\t[PWRAP_ADC_RDY_ADDR] =\t\t0x14c,\n\t[PWRAP_ADC_RDATA_ADDR1] =\t0x150,\n\t[PWRAP_ADC_RDATA_ADDR2] =\t0x154,\n};\n\nstatic int mt6765_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_RDDMY] =\t\t\t0x20,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x24,\n\t[PWRAP_CSHEXT_READ] =\t\t0x28,\n\t[PWRAP_CSLEXT_START] =\t\t0x2C,\n\t[PWRAP_CSLEXT_END] =\t\t0x30,\n\t[PWRAP_STAUPD_PRD] =\t\t0x3C,\n\t[PWRAP_HARB_HPRIO] =\t\t0x68,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x6C,\n\t[PWRAP_MAN_EN] =\t\t0x7C,\n\t[PWRAP_MAN_CMD] =\t\t0x80,\n\t[PWRAP_WACS0_EN] =\t\t0x8C,\n\t[PWRAP_WACS1_EN] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x9C,\n\t[PWRAP_INIT_DONE2] =\t\t0xA0,\n\t[PWRAP_WACS2_CMD] =\t\t0xC20,\n\t[PWRAP_WACS2_RDATA] =\t\t0xC24,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xC28,\n\t[PWRAP_INT_EN] =\t\t0xB4,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xB8,\n\t[PWRAP_INT_FLG] =\t\t0xBC,\n\t[PWRAP_INT_CLR] =\t\t0xC0,\n\t[PWRAP_TIMER_EN] =\t\t0xE8,\n\t[PWRAP_WDT_UNIT] =\t\t0xF0,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xF4,\n\t[PWRAP_DCM_EN] =\t\t0x1DC,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x1E0,\n};\n\nstatic int mt6779_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_RDDMY] =\t\t\t0x20,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x24,\n\t[PWRAP_CSHEXT_READ] =\t\t0x28,\n\t[PWRAP_CSLEXT_WRITE] =\t\t0x2C,\n\t[PWRAP_CSLEXT_READ] =\t\t0x30,\n\t[PWRAP_EXT_CK_WRITE] =\t\t0x34,\n\t[PWRAP_STAUPD_CTRL] =\t\t0x3C,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x40,\n\t[PWRAP_EINT_STA0_ADR] =\t\t0x44,\n\t[PWRAP_HARB_HPRIO] =\t\t0x68,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x6C,\n\t[PWRAP_MAN_EN] =\t\t0x7C,\n\t[PWRAP_MAN_CMD] =\t\t0x80,\n\t[PWRAP_WACS0_EN] =\t\t0x8C,\n\t[PWRAP_INIT_DONE0] =\t\t0x90,\n\t[PWRAP_WACS1_EN] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x9C,\n\t[PWRAP_INIT_DONE1] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0xA0,\n\t[PWRAP_INT_EN] =\t\t0xBC,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xC0,\n\t[PWRAP_INT_FLG] =\t\t0xC4,\n\t[PWRAP_INT_CLR] =\t\t0xC8,\n\t[PWRAP_INT1_EN] =\t\t0xCC,\n\t[PWRAP_INT1_FLG] =\t\t0xD4,\n\t[PWRAP_INT1_CLR] =\t\t0xD8,\n\t[PWRAP_TIMER_EN] =\t\t0xF0,\n\t[PWRAP_WDT_UNIT] =\t\t0xF8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xFC,\n\t[PWRAP_WDT_SRC_EN_1] =\t\t0x100,\n\t[PWRAP_WACS2_CMD] =\t\t0xC20,\n\t[PWRAP_WACS2_RDATA] =\t\t0xC24,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xC28,\n};\n\nstatic int mt6795_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xc,\n\t[PWRAP_RDDMY] =\t\t\t0x10,\n\t[PWRAP_SI_CK_CON] =\t\t0x14,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t0x1c,\n\t[PWRAP_CSLEXT_START] =\t\t0x20,\n\t[PWRAP_CSLEXT_END] =\t\t0x24,\n\t[PWRAP_STAUPD_PRD] =\t\t0x28,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x2c,\n\t[PWRAP_EINT_STA0_ADR] =\t\t0x30,\n\t[PWRAP_EINT_STA1_ADR] =\t\t0x34,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x40,\n\t[PWRAP_STAUPD_STA] =\t\t0x44,\n\t[PWRAP_WRAP_STA] =\t\t0x48,\n\t[PWRAP_HARB_INIT] =\t\t0x4c,\n\t[PWRAP_HARB_HPRIO] =\t\t0x50,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x54,\n\t[PWRAP_HARB_STA0] =\t\t0x58,\n\t[PWRAP_HARB_STA1] =\t\t0x5c,\n\t[PWRAP_MAN_EN] =\t\t0x60,\n\t[PWRAP_MAN_CMD] =\t\t0x64,\n\t[PWRAP_MAN_RDATA] =\t\t0x68,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x6c,\n\t[PWRAP_WACS0_EN] =\t\t0x70,\n\t[PWRAP_INIT_DONE0] =\t\t0x74,\n\t[PWRAP_WACS0_CMD] =\t\t0x78,\n\t[PWRAP_WACS0_RDATA] =\t\t0x7c,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x80,\n\t[PWRAP_WACS1_EN] =\t\t0x84,\n\t[PWRAP_INIT_DONE1] =\t\t0x88,\n\t[PWRAP_WACS1_CMD] =\t\t0x8c,\n\t[PWRAP_WACS1_RDATA] =\t\t0x90,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0x9c,\n\t[PWRAP_WACS2_CMD] =\t\t0xa0,\n\t[PWRAP_WACS2_RDATA] =\t\t0xa4,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xa8,\n\t[PWRAP_INT_EN] =\t\t0xac,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xb0,\n\t[PWRAP_INT_FLG] =\t\t0xb4,\n\t[PWRAP_INT_CLR] =\t\t0xb8,\n\t[PWRAP_SIG_ADR] =\t\t0xbc,\n\t[PWRAP_SIG_MODE] =\t\t0xc0,\n\t[PWRAP_SIG_VALUE] =\t\t0xc4,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xc8,\n\t[PWRAP_CRC_EN] =\t\t0xcc,\n\t[PWRAP_TIMER_EN] =\t\t0xd0,\n\t[PWRAP_TIMER_STA] =\t\t0xd4,\n\t[PWRAP_WDT_UNIT] =\t\t0xd8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xdc,\n\t[PWRAP_WDT_FLG] =\t\t0xe0,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xe4,\n\t[PWRAP_DVFS_ADR0] =\t\t0xe8,\n\t[PWRAP_DVFS_WDATA0] =\t\t0xec,\n\t[PWRAP_DVFS_ADR1] =\t\t0xf0,\n\t[PWRAP_DVFS_WDATA1] =\t\t0xf4,\n\t[PWRAP_DVFS_ADR2] =\t\t0xf8,\n\t[PWRAP_DVFS_WDATA2] =\t\t0xfc,\n\t[PWRAP_DVFS_ADR3] =\t\t0x100,\n\t[PWRAP_DVFS_WDATA3] =\t\t0x104,\n\t[PWRAP_DVFS_ADR4] =\t\t0x108,\n\t[PWRAP_DVFS_WDATA4] =\t\t0x10c,\n\t[PWRAP_DVFS_ADR5] =\t\t0x110,\n\t[PWRAP_DVFS_WDATA5] =\t\t0x114,\n\t[PWRAP_DVFS_ADR6] =\t\t0x118,\n\t[PWRAP_DVFS_WDATA6] =\t\t0x11c,\n\t[PWRAP_DVFS_ADR7] =\t\t0x120,\n\t[PWRAP_DVFS_WDATA7] =\t\t0x124,\n\t[PWRAP_SPMINF_STA] =\t\t0x128,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x12c,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x130,\n\t[PWRAP_CIPHER_EN] =\t\t0x134,\n\t[PWRAP_CIPHER_RDY] =\t\t0x138,\n\t[PWRAP_CIPHER_MODE] =\t\t0x13c,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x140,\n\t[PWRAP_DCM_EN] =\t\t0x144,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x148,\n\t[PWRAP_EXT_CK] =\t\t0x14c,\n};\n\nstatic int mt6797_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xC,\n\t[PWRAP_RDDMY] =\t\t\t0x10,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t0x1C,\n\t[PWRAP_CSLEXT_START] =\t\t0x20,\n\t[PWRAP_CSLEXT_END] =\t\t0x24,\n\t[PWRAP_STAUPD_PRD] =\t\t0x28,\n\t[PWRAP_HARB_HPRIO] =\t\t0x50,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x54,\n\t[PWRAP_MAN_EN] =\t\t0x60,\n\t[PWRAP_MAN_CMD] =\t\t0x64,\n\t[PWRAP_WACS0_EN] =\t\t0x70,\n\t[PWRAP_WACS1_EN] =\t\t0x84,\n\t[PWRAP_WACS2_EN] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0x9C,\n\t[PWRAP_WACS2_CMD] =\t\t0xA0,\n\t[PWRAP_WACS2_RDATA] =\t\t0xA4,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xA8,\n\t[PWRAP_INT_EN] =\t\t0xC0,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xC4,\n\t[PWRAP_INT_FLG] =\t\t0xC8,\n\t[PWRAP_INT_CLR] =\t\t0xCC,\n\t[PWRAP_TIMER_EN] =\t\t0xF4,\n\t[PWRAP_WDT_UNIT] =\t\t0xFC,\n\t[PWRAP_WDT_SRC_EN] =\t\t0x100,\n\t[PWRAP_DCM_EN] =\t\t0x1CC,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x1D4,\n};\n\nstatic int mt6873_regs[] = {\n\t[PWRAP_INIT_DONE2] =\t\t0x0,\n\t[PWRAP_TIMER_EN] =\t\t0x3E0,\n\t[PWRAP_INT_EN] =\t\t0x448,\n\t[PWRAP_WACS2_CMD] =\t\t0xC80,\n\t[PWRAP_SWINF_2_WDATA_31_0] =\t0xC84,\n\t[PWRAP_SWINF_2_RDATA_31_0] =\t0xC94,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xCA4,\n\t[PWRAP_WACS2_RDATA] =\t\t0xCA8,\n};\n\nstatic int mt7622_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xC,\n\t[PWRAP_RDDMY] =\t\t\t0x10,\n\t[PWRAP_SI_CK_CON] =\t\t0x14,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t0x1C,\n\t[PWRAP_CSLEXT_START] =\t\t0x20,\n\t[PWRAP_CSLEXT_END] =\t\t0x24,\n\t[PWRAP_STAUPD_PRD] =\t\t0x28,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x2C,\n\t[PWRAP_EINT_STA0_ADR] =\t\t0x30,\n\t[PWRAP_EINT_STA1_ADR] =\t\t0x34,\n\t[PWRAP_STA] =\t\t\t0x38,\n\t[PWRAP_CLR] =\t\t\t0x3C,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x40,\n\t[PWRAP_STAUPD_STA] =\t\t0x44,\n\t[PWRAP_WRAP_STA] =\t\t0x48,\n\t[PWRAP_HARB_INIT] =\t\t0x4C,\n\t[PWRAP_HARB_HPRIO] =\t\t0x50,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x54,\n\t[PWRAP_HARB_STA0] =\t\t0x58,\n\t[PWRAP_HARB_STA1] =\t\t0x5C,\n\t[PWRAP_MAN_EN] =\t\t0x60,\n\t[PWRAP_MAN_CMD] =\t\t0x64,\n\t[PWRAP_MAN_RDATA] =\t\t0x68,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x6C,\n\t[PWRAP_WACS0_EN] =\t\t0x70,\n\t[PWRAP_INIT_DONE0] =\t\t0x74,\n\t[PWRAP_WACS0_CMD] =\t\t0x78,\n\t[PWRAP_WACS0_RDATA] =\t\t0x7C,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x80,\n\t[PWRAP_WACS1_EN] =\t\t0x84,\n\t[PWRAP_INIT_DONE1] =\t\t0x88,\n\t[PWRAP_WACS1_CMD] =\t\t0x8C,\n\t[PWRAP_WACS1_RDATA] =\t\t0x90,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0x9C,\n\t[PWRAP_WACS2_CMD] =\t\t0xA0,\n\t[PWRAP_WACS2_RDATA] =\t\t0xA4,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xA8,\n\t[PWRAP_INT_EN] =\t\t0xAC,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xB0,\n\t[PWRAP_INT_FLG] =\t\t0xB4,\n\t[PWRAP_INT_CLR] =\t\t0xB8,\n\t[PWRAP_SIG_ADR] =\t\t0xBC,\n\t[PWRAP_SIG_MODE] =\t\t0xC0,\n\t[PWRAP_SIG_VALUE] =\t\t0xC4,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xC8,\n\t[PWRAP_CRC_EN] =\t\t0xCC,\n\t[PWRAP_TIMER_EN] =\t\t0xD0,\n\t[PWRAP_TIMER_STA] =\t\t0xD4,\n\t[PWRAP_WDT_UNIT] =\t\t0xD8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xDC,\n\t[PWRAP_WDT_FLG] =\t\t0xE0,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xE4,\n\t[PWRAP_DVFS_ADR0] =\t\t0xE8,\n\t[PWRAP_DVFS_WDATA0] =\t\t0xEC,\n\t[PWRAP_DVFS_ADR1] =\t\t0xF0,\n\t[PWRAP_DVFS_WDATA1] =\t\t0xF4,\n\t[PWRAP_DVFS_ADR2] =\t\t0xF8,\n\t[PWRAP_DVFS_WDATA2] =\t\t0xFC,\n\t[PWRAP_DVFS_ADR3] =\t\t0x100,\n\t[PWRAP_DVFS_WDATA3] =\t\t0x104,\n\t[PWRAP_DVFS_ADR4] =\t\t0x108,\n\t[PWRAP_DVFS_WDATA4] =\t\t0x10C,\n\t[PWRAP_DVFS_ADR5] =\t\t0x110,\n\t[PWRAP_DVFS_WDATA5] =\t\t0x114,\n\t[PWRAP_DVFS_ADR6] =\t\t0x118,\n\t[PWRAP_DVFS_WDATA6] =\t\t0x11C,\n\t[PWRAP_DVFS_ADR7] =\t\t0x120,\n\t[PWRAP_DVFS_WDATA7] =\t\t0x124,\n\t[PWRAP_DVFS_ADR8] =\t\t0x128,\n\t[PWRAP_DVFS_WDATA8] =\t\t0x12C,\n\t[PWRAP_DVFS_ADR9] =\t\t0x130,\n\t[PWRAP_DVFS_WDATA9] =\t\t0x134,\n\t[PWRAP_DVFS_ADR10] =\t\t0x138,\n\t[PWRAP_DVFS_WDATA10] =\t\t0x13C,\n\t[PWRAP_DVFS_ADR11] =\t\t0x140,\n\t[PWRAP_DVFS_WDATA11] =\t\t0x144,\n\t[PWRAP_DVFS_ADR12] =\t\t0x148,\n\t[PWRAP_DVFS_WDATA12] =\t\t0x14C,\n\t[PWRAP_DVFS_ADR13] =\t\t0x150,\n\t[PWRAP_DVFS_WDATA13] =\t\t0x154,\n\t[PWRAP_DVFS_ADR14] =\t\t0x158,\n\t[PWRAP_DVFS_WDATA14] =\t\t0x15C,\n\t[PWRAP_DVFS_ADR15] =\t\t0x160,\n\t[PWRAP_DVFS_WDATA15] =\t\t0x164,\n\t[PWRAP_SPMINF_STA] =\t\t0x168,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x16C,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x170,\n\t[PWRAP_CIPHER_EN] =\t\t0x174,\n\t[PWRAP_CIPHER_RDY] =\t\t0x178,\n\t[PWRAP_CIPHER_MODE] =\t\t0x17C,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x180,\n\t[PWRAP_DCM_EN] =\t\t0x184,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x188,\n\t[PWRAP_EXT_CK] =\t\t0x18C,\n\t[PWRAP_ADC_CMD_ADDR] =\t\t0x190,\n\t[PWRAP_PWRAP_ADC_CMD] =\t\t0x194,\n\t[PWRAP_ADC_RDATA_ADDR] =\t0x198,\n\t[PWRAP_GPS_STA] =\t\t0x19C,\n\t[PWRAP_SW_RST] =\t\t0x1A0,\n\t[PWRAP_DVFS_STEP_CTRL0] =\t0x238,\n\t[PWRAP_DVFS_STEP_CTRL1] =\t0x23C,\n\t[PWRAP_DVFS_STEP_CTRL2] =\t0x240,\n\t[PWRAP_SPI2_CTRL] =\t\t0x244,\n};\n\nstatic int mt8135_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xc,\n\t[PWRAP_CSHEXT] =\t\t0x10,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x14,\n\t[PWRAP_CSHEXT_READ] =\t\t0x18,\n\t[PWRAP_CSLEXT_START] =\t\t0x1c,\n\t[PWRAP_CSLEXT_END] =\t\t0x20,\n\t[PWRAP_STAUPD_PRD] =\t\t0x24,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x28,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x2c,\n\t[PWRAP_STAUPD_STA] =\t\t0x30,\n\t[PWRAP_EVENT_IN_EN] =\t\t0x34,\n\t[PWRAP_EVENT_DST_EN] =\t\t0x38,\n\t[PWRAP_WRAP_STA] =\t\t0x3c,\n\t[PWRAP_RRARB_INIT] =\t\t0x40,\n\t[PWRAP_RRARB_EN] =\t\t0x44,\n\t[PWRAP_RRARB_STA0] =\t\t0x48,\n\t[PWRAP_RRARB_STA1] =\t\t0x4c,\n\t[PWRAP_HARB_INIT] =\t\t0x50,\n\t[PWRAP_HARB_HPRIO] =\t\t0x54,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x58,\n\t[PWRAP_HARB_STA0] =\t\t0x5c,\n\t[PWRAP_HARB_STA1] =\t\t0x60,\n\t[PWRAP_MAN_EN] =\t\t0x64,\n\t[PWRAP_MAN_CMD] =\t\t0x68,\n\t[PWRAP_MAN_RDATA] =\t\t0x6c,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x70,\n\t[PWRAP_WACS0_EN] =\t\t0x74,\n\t[PWRAP_INIT_DONE0] =\t\t0x78,\n\t[PWRAP_WACS0_CMD] =\t\t0x7c,\n\t[PWRAP_WACS0_RDATA] =\t\t0x80,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x84,\n\t[PWRAP_WACS1_EN] =\t\t0x88,\n\t[PWRAP_INIT_DONE1] =\t\t0x8c,\n\t[PWRAP_WACS1_CMD] =\t\t0x90,\n\t[PWRAP_WACS1_RDATA] =\t\t0x94,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x98,\n\t[PWRAP_WACS2_EN] =\t\t0x9c,\n\t[PWRAP_INIT_DONE2] =\t\t0xa0,\n\t[PWRAP_WACS2_CMD] =\t\t0xa4,\n\t[PWRAP_WACS2_RDATA] =\t\t0xa8,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xac,\n\t[PWRAP_INT_EN] =\t\t0xb0,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xb4,\n\t[PWRAP_INT_FLG] =\t\t0xb8,\n\t[PWRAP_INT_CLR] =\t\t0xbc,\n\t[PWRAP_SIG_ADR] =\t\t0xc0,\n\t[PWRAP_SIG_MODE] =\t\t0xc4,\n\t[PWRAP_SIG_VALUE] =\t\t0xc8,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xcc,\n\t[PWRAP_CRC_EN] =\t\t0xd0,\n\t[PWRAP_EVENT_STA] =\t\t0xd4,\n\t[PWRAP_EVENT_STACLR] =\t\t0xd8,\n\t[PWRAP_TIMER_EN] =\t\t0xdc,\n\t[PWRAP_TIMER_STA] =\t\t0xe0,\n\t[PWRAP_WDT_UNIT] =\t\t0xe4,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xe8,\n\t[PWRAP_WDT_FLG] =\t\t0xec,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xf0,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x134,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x138,\n\t[PWRAP_CIPHER_LOAD] =\t\t0x13c,\n\t[PWRAP_CIPHER_START] =\t\t0x140,\n\t[PWRAP_CIPHER_RDY] =\t\t0x144,\n\t[PWRAP_CIPHER_MODE] =\t\t0x148,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x14c,\n\t[PWRAP_DCM_EN] =\t\t0x15c,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x160,\n};\n\nstatic int mt8173_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xc,\n\t[PWRAP_RDDMY] =\t\t\t0x10,\n\t[PWRAP_SI_CK_CON] =\t\t0x14,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t0x1c,\n\t[PWRAP_CSLEXT_START] =\t\t0x20,\n\t[PWRAP_CSLEXT_END] =\t\t0x24,\n\t[PWRAP_STAUPD_PRD] =\t\t0x28,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x2c,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x40,\n\t[PWRAP_STAUPD_STA] =\t\t0x44,\n\t[PWRAP_WRAP_STA] =\t\t0x48,\n\t[PWRAP_HARB_INIT] =\t\t0x4c,\n\t[PWRAP_HARB_HPRIO] =\t\t0x50,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x54,\n\t[PWRAP_HARB_STA0] =\t\t0x58,\n\t[PWRAP_HARB_STA1] =\t\t0x5c,\n\t[PWRAP_MAN_EN] =\t\t0x60,\n\t[PWRAP_MAN_CMD] =\t\t0x64,\n\t[PWRAP_MAN_RDATA] =\t\t0x68,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x6c,\n\t[PWRAP_WACS0_EN] =\t\t0x70,\n\t[PWRAP_INIT_DONE0] =\t\t0x74,\n\t[PWRAP_WACS0_CMD] =\t\t0x78,\n\t[PWRAP_WACS0_RDATA] =\t\t0x7c,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x80,\n\t[PWRAP_WACS1_EN] =\t\t0x84,\n\t[PWRAP_INIT_DONE1] =\t\t0x88,\n\t[PWRAP_WACS1_CMD] =\t\t0x8c,\n\t[PWRAP_WACS1_RDATA] =\t\t0x90,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0x9c,\n\t[PWRAP_WACS2_CMD] =\t\t0xa0,\n\t[PWRAP_WACS2_RDATA] =\t\t0xa4,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xa8,\n\t[PWRAP_INT_EN] =\t\t0xac,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xb0,\n\t[PWRAP_INT_FLG] =\t\t0xb4,\n\t[PWRAP_INT_CLR] =\t\t0xb8,\n\t[PWRAP_SIG_ADR] =\t\t0xbc,\n\t[PWRAP_SIG_MODE] =\t\t0xc0,\n\t[PWRAP_SIG_VALUE] =\t\t0xc4,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xc8,\n\t[PWRAP_CRC_EN] =\t\t0xcc,\n\t[PWRAP_TIMER_EN] =\t\t0xd0,\n\t[PWRAP_TIMER_STA] =\t\t0xd4,\n\t[PWRAP_WDT_UNIT] =\t\t0xd8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xdc,\n\t[PWRAP_WDT_FLG] =\t\t0xe0,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xe4,\n\t[PWRAP_DVFS_ADR0] =\t\t0xe8,\n\t[PWRAP_DVFS_WDATA0] =\t\t0xec,\n\t[PWRAP_DVFS_ADR1] =\t\t0xf0,\n\t[PWRAP_DVFS_WDATA1] =\t\t0xf4,\n\t[PWRAP_DVFS_ADR2] =\t\t0xf8,\n\t[PWRAP_DVFS_WDATA2] =\t\t0xfc,\n\t[PWRAP_DVFS_ADR3] =\t\t0x100,\n\t[PWRAP_DVFS_WDATA3] =\t\t0x104,\n\t[PWRAP_DVFS_ADR4] =\t\t0x108,\n\t[PWRAP_DVFS_WDATA4] =\t\t0x10c,\n\t[PWRAP_DVFS_ADR5] =\t\t0x110,\n\t[PWRAP_DVFS_WDATA5] =\t\t0x114,\n\t[PWRAP_DVFS_ADR6] =\t\t0x118,\n\t[PWRAP_DVFS_WDATA6] =\t\t0x11c,\n\t[PWRAP_DVFS_ADR7] =\t\t0x120,\n\t[PWRAP_DVFS_WDATA7] =\t\t0x124,\n\t[PWRAP_SPMINF_STA] =\t\t0x128,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x12c,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x130,\n\t[PWRAP_CIPHER_EN] =\t\t0x134,\n\t[PWRAP_CIPHER_RDY] =\t\t0x138,\n\t[PWRAP_CIPHER_MODE] =\t\t0x13c,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x140,\n\t[PWRAP_DCM_EN] =\t\t0x144,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x148,\n};\n\nstatic int mt8183_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t\t0x8,\n\t[PWRAP_SI_SAMPLE_CTRL] =\t\t0xC,\n\t[PWRAP_RDDMY] =\t\t\t\t0x14,\n\t[PWRAP_CSHEXT_WRITE] =\t\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t\t0x1C,\n\t[PWRAP_CSLEXT_WRITE] =\t\t\t0x20,\n\t[PWRAP_CSLEXT_READ] =\t\t\t0x24,\n\t[PWRAP_EXT_CK_WRITE] =\t\t\t0x28,\n\t[PWRAP_STAUPD_CTRL] =\t\t\t0x30,\n\t[PWRAP_STAUPD_GRPEN] =\t\t\t0x34,\n\t[PWRAP_EINT_STA0_ADR] =\t\t\t0x38,\n\t[PWRAP_HARB_HPRIO] =\t\t\t0x5C,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t\t0x60,\n\t[PWRAP_MAN_EN] =\t\t\t0x70,\n\t[PWRAP_MAN_CMD] =\t\t\t0x74,\n\t[PWRAP_WACS0_EN] =\t\t\t0x80,\n\t[PWRAP_INIT_DONE0] =\t\t\t0x84,\n\t[PWRAP_WACS1_EN] =\t\t\t0x88,\n\t[PWRAP_INIT_DONE1] =\t\t\t0x8C,\n\t[PWRAP_WACS2_EN] =\t\t\t0x90,\n\t[PWRAP_INIT_DONE2] =\t\t\t0x94,\n\t[PWRAP_WACS_P2P_EN] =\t\t\t0xA0,\n\t[PWRAP_INIT_DONE_P2P] =\t\t\t0xA4,\n\t[PWRAP_WACS_MD32_EN] =\t\t\t0xA8,\n\t[PWRAP_INIT_DONE_MD32] =\t\t0xAC,\n\t[PWRAP_INT_EN] =\t\t\t0xB0,\n\t[PWRAP_INT_FLG] =\t\t\t0xB8,\n\t[PWRAP_INT_CLR] =\t\t\t0xBC,\n\t[PWRAP_INT1_EN] =\t\t\t0xC0,\n\t[PWRAP_INT1_FLG] =\t\t\t0xC8,\n\t[PWRAP_INT1_CLR] =\t\t\t0xCC,\n\t[PWRAP_SIG_ADR] =\t\t\t0xD0,\n\t[PWRAP_CRC_EN] =\t\t\t0xE0,\n\t[PWRAP_TIMER_EN] =\t\t\t0xE4,\n\t[PWRAP_WDT_UNIT] =\t\t\t0xEC,\n\t[PWRAP_WDT_SRC_EN] =\t\t\t0xF0,\n\t[PWRAP_WDT_SRC_EN_1] =\t\t\t0xF4,\n\t[PWRAP_INT_GPS_AUXADC_CMD_ADDR] =\t0x1DC,\n\t[PWRAP_INT_GPS_AUXADC_CMD] =\t\t0x1E0,\n\t[PWRAP_INT_GPS_AUXADC_RDATA_ADDR] =\t0x1E4,\n\t[PWRAP_EXT_GPS_AUXADC_RDATA_ADDR] =\t0x1E8,\n\t[PWRAP_GPSINF_0_STA] =\t\t\t0x1EC,\n\t[PWRAP_GPSINF_1_STA] =\t\t\t0x1F0,\n\t[PWRAP_WACS2_CMD] =\t\t\t0xC20,\n\t[PWRAP_WACS2_RDATA] =\t\t\t0xC24,\n\t[PWRAP_WACS2_VLDCLR] =\t\t\t0xC28,\n};\n\nstatic int mt8195_regs[] = {\n\t[PWRAP_INIT_DONE2] =\t\t0x0,\n\t[PWRAP_STAUPD_CTRL] =\t\t0x4C,\n\t[PWRAP_TIMER_EN] =\t\t0x3E4,\n\t[PWRAP_INT_EN] =\t\t0x420,\n\t[PWRAP_INT_FLG] =\t\t0x428,\n\t[PWRAP_INT_CLR] =\t\t0x42C,\n\t[PWRAP_INT1_EN] =\t\t0x450,\n\t[PWRAP_INT1_FLG] =\t\t0x458,\n\t[PWRAP_INT1_CLR] =\t\t0x45C,\n\t[PWRAP_WACS2_CMD] =\t\t0x880,\n\t[PWRAP_SWINF_2_WDATA_31_0] =\t0x884,\n\t[PWRAP_SWINF_2_RDATA_31_0] =\t0x894,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0x8A4,\n\t[PWRAP_WACS2_RDATA] =\t\t0x8A8,\n};\n\nstatic int mt8365_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x24,\n\t[PWRAP_CSHEXT_READ] =\t\t0x28,\n\t[PWRAP_STAUPD_PRD] =\t\t0x3c,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x40,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x58,\n\t[PWRAP_STAUPD_STA] =\t\t0x5c,\n\t[PWRAP_WRAP_STA] =\t\t0x60,\n\t[PWRAP_HARB_INIT] =\t\t0x64,\n\t[PWRAP_HARB_HPRIO] =\t\t0x68,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x6c,\n\t[PWRAP_HARB_STA0] =\t\t0x70,\n\t[PWRAP_HARB_STA1] =\t\t0x74,\n\t[PWRAP_MAN_EN] =\t\t0x7c,\n\t[PWRAP_MAN_CMD] =\t\t0x80,\n\t[PWRAP_MAN_RDATA] =\t\t0x84,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x88,\n\t[PWRAP_WACS0_EN] =\t\t0x8c,\n\t[PWRAP_INIT_DONE0] =\t\t0x90,\n\t[PWRAP_WACS0_CMD] =\t\t0xc00,\n\t[PWRAP_WACS0_RDATA] =\t\t0xc04,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0xc08,\n\t[PWRAP_WACS1_EN] =\t\t0x94,\n\t[PWRAP_INIT_DONE1] =\t\t0x98,\n\t[PWRAP_WACS2_EN] =\t\t0x9c,\n\t[PWRAP_INIT_DONE2] =\t\t0xa0,\n\t[PWRAP_WACS2_CMD] =\t\t0xc20,\n\t[PWRAP_WACS2_RDATA] =\t\t0xc24,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xc28,\n\t[PWRAP_INT_EN] =\t\t0xb4,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xb8,\n\t[PWRAP_INT_FLG] =\t\t0xbc,\n\t[PWRAP_INT_CLR] =\t\t0xc0,\n\t[PWRAP_SIG_ADR] =\t\t0xd4,\n\t[PWRAP_SIG_MODE] =\t\t0xd8,\n\t[PWRAP_SIG_VALUE] =\t\t0xdc,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xe0,\n\t[PWRAP_CRC_EN] =\t\t0xe4,\n\t[PWRAP_TIMER_EN] =\t\t0xe8,\n\t[PWRAP_TIMER_STA] =\t\t0xec,\n\t[PWRAP_WDT_UNIT] =\t\t0xf0,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xf4,\n\t[PWRAP_WDT_FLG] =\t\t0xfc,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0x104,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x1c4,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x1c8,\n\t[PWRAP_CIPHER_RDY] =\t\t0x1d0,\n\t[PWRAP_CIPHER_MODE] =\t\t0x1d4,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x1d8,\n\t[PWRAP_DCM_EN] =\t\t0x1dc,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x1e0,\n\t[PWRAP_EINT_STA0_ADR] =\t\t0x44,\n\t[PWRAP_EINT_STA1_ADR] =\t\t0x48,\n\t[PWRAP_INT1_EN] =\t\t0xc4,\n\t[PWRAP_INT1_FLG] =\t\t0xcc,\n\t[PWRAP_INT1_CLR] =\t\t0xd0,\n\t[PWRAP_WDT_SRC_EN_1] =\t\t0xf8,\n};\n\nstatic int mt8516_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_SIDLY] =\t\t\t0xc,\n\t[PWRAP_RDDMY] =\t\t\t0x10,\n\t[PWRAP_SI_CK_CON] =\t\t0x14,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x18,\n\t[PWRAP_CSHEXT_READ] =\t\t0x1c,\n\t[PWRAP_CSLEXT_START] =\t\t0x20,\n\t[PWRAP_CSLEXT_END] =\t\t0x24,\n\t[PWRAP_STAUPD_PRD] =\t\t0x28,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x2c,\n\t[PWRAP_STAUPD_MAN_TRIG] =\t0x40,\n\t[PWRAP_STAUPD_STA] =\t\t0x44,\n\t[PWRAP_WRAP_STA] =\t\t0x48,\n\t[PWRAP_HARB_INIT] =\t\t0x4c,\n\t[PWRAP_HARB_HPRIO] =\t\t0x50,\n\t[PWRAP_HIPRIO_ARB_EN] =\t\t0x54,\n\t[PWRAP_HARB_STA0] =\t\t0x58,\n\t[PWRAP_HARB_STA1] =\t\t0x5c,\n\t[PWRAP_MAN_EN] =\t\t0x60,\n\t[PWRAP_MAN_CMD] =\t\t0x64,\n\t[PWRAP_MAN_RDATA] =\t\t0x68,\n\t[PWRAP_MAN_VLDCLR] =\t\t0x6c,\n\t[PWRAP_WACS0_EN] =\t\t0x70,\n\t[PWRAP_INIT_DONE0] =\t\t0x74,\n\t[PWRAP_WACS0_CMD] =\t\t0x78,\n\t[PWRAP_WACS0_RDATA] =\t\t0x7c,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0x80,\n\t[PWRAP_WACS1_EN] =\t\t0x84,\n\t[PWRAP_INIT_DONE1] =\t\t0x88,\n\t[PWRAP_WACS1_CMD] =\t\t0x8c,\n\t[PWRAP_WACS1_RDATA] =\t\t0x90,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0x9c,\n\t[PWRAP_WACS2_CMD] =\t\t0xa0,\n\t[PWRAP_WACS2_RDATA] =\t\t0xa4,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xa8,\n\t[PWRAP_INT_EN] =\t\t0xac,\n\t[PWRAP_INT_FLG_RAW] =\t\t0xb0,\n\t[PWRAP_INT_FLG] =\t\t0xb4,\n\t[PWRAP_INT_CLR] =\t\t0xb8,\n\t[PWRAP_SIG_ADR] =\t\t0xbc,\n\t[PWRAP_SIG_MODE] =\t\t0xc0,\n\t[PWRAP_SIG_VALUE] =\t\t0xc4,\n\t[PWRAP_SIG_ERRVAL] =\t\t0xc8,\n\t[PWRAP_CRC_EN] =\t\t0xcc,\n\t[PWRAP_TIMER_EN] =\t\t0xd0,\n\t[PWRAP_TIMER_STA] =\t\t0xd4,\n\t[PWRAP_WDT_UNIT] =\t\t0xd8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xdc,\n\t[PWRAP_WDT_FLG] =\t\t0xe0,\n\t[PWRAP_DEBUG_INT_SEL] =\t\t0xe4,\n\t[PWRAP_DVFS_ADR0] =\t\t0xe8,\n\t[PWRAP_DVFS_WDATA0] =\t\t0xec,\n\t[PWRAP_DVFS_ADR1] =\t\t0xf0,\n\t[PWRAP_DVFS_WDATA1] =\t\t0xf4,\n\t[PWRAP_DVFS_ADR2] =\t\t0xf8,\n\t[PWRAP_DVFS_WDATA2] =\t\t0xfc,\n\t[PWRAP_DVFS_ADR3] =\t\t0x100,\n\t[PWRAP_DVFS_WDATA3] =\t\t0x104,\n\t[PWRAP_DVFS_ADR4] =\t\t0x108,\n\t[PWRAP_DVFS_WDATA4] =\t\t0x10c,\n\t[PWRAP_DVFS_ADR5] =\t\t0x110,\n\t[PWRAP_DVFS_WDATA5] =\t\t0x114,\n\t[PWRAP_DVFS_ADR6] =\t\t0x118,\n\t[PWRAP_DVFS_WDATA6] =\t\t0x11c,\n\t[PWRAP_DVFS_ADR7] =\t\t0x120,\n\t[PWRAP_DVFS_WDATA7] =\t\t0x124,\n\t[PWRAP_SPMINF_STA] =\t\t0x128,\n\t[PWRAP_CIPHER_KEY_SEL] =\t0x12c,\n\t[PWRAP_CIPHER_IV_SEL] =\t\t0x130,\n\t[PWRAP_CIPHER_EN] =\t\t0x134,\n\t[PWRAP_CIPHER_RDY] =\t\t0x138,\n\t[PWRAP_CIPHER_MODE] =\t\t0x13c,\n\t[PWRAP_CIPHER_SWRST] =\t\t0x140,\n\t[PWRAP_DCM_EN] =\t\t0x144,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x148,\n\t[PWRAP_SW_RST] =\t\t0x168,\n\t[PWRAP_OP_TYPE] =\t\t0x16c,\n\t[PWRAP_MSB_FIRST] =\t\t0x170,\n};\n\nstatic int mt8186_regs[] = {\n\t[PWRAP_MUX_SEL] =\t\t0x0,\n\t[PWRAP_WRAP_EN] =\t\t0x4,\n\t[PWRAP_DIO_EN] =\t\t0x8,\n\t[PWRAP_RDDMY] =\t\t\t0x20,\n\t[PWRAP_CSHEXT_WRITE] =\t\t0x24,\n\t[PWRAP_CSHEXT_READ] =\t\t0x28,\n\t[PWRAP_CSLEXT_WRITE] =\t\t0x2C,\n\t[PWRAP_CSLEXT_READ] =\t\t0x30,\n\t[PWRAP_EXT_CK_WRITE] =\t\t0x34,\n\t[PWRAP_STAUPD_CTRL] =\t\t0x3C,\n\t[PWRAP_STAUPD_GRPEN] =\t\t0x40,\n\t[PWRAP_EINT_STA0_ADR] =\t\t0x44,\n\t[PWRAP_EINT_STA1_ADR] =\t\t0x48,\n\t[PWRAP_INT_CLR] =\t\t0xC8,\n\t[PWRAP_INT_FLG] =\t\t0xC4,\n\t[PWRAP_MAN_EN] =\t\t0x7C,\n\t[PWRAP_MAN_CMD] =\t\t0x80,\n\t[PWRAP_WACS0_EN] =\t\t0x8C,\n\t[PWRAP_WACS1_EN] =\t\t0x94,\n\t[PWRAP_WACS2_EN] =\t\t0x9C,\n\t[PWRAP_INIT_DONE0] =\t\t0x90,\n\t[PWRAP_INIT_DONE1] =\t\t0x98,\n\t[PWRAP_INIT_DONE2] =\t\t0xA0,\n\t[PWRAP_INT_EN] =\t\t0xBC,\n\t[PWRAP_INT1_EN] =\t\t0xCC,\n\t[PWRAP_INT1_FLG] =\t\t0xD4,\n\t[PWRAP_INT1_CLR] =\t\t0xD8,\n\t[PWRAP_TIMER_EN] =\t\t0xF0,\n\t[PWRAP_WDT_UNIT] =\t\t0xF8,\n\t[PWRAP_WDT_SRC_EN] =\t\t0xFC,\n\t[PWRAP_WDT_SRC_EN_1] =\t\t0x100,\n\t[PWRAP_WDT_FLG] =\t\t0x104,\n\t[PWRAP_SPMINF_STA] =\t\t0x1B4,\n\t[PWRAP_DCM_EN] =\t\t0x1EC,\n\t[PWRAP_DCM_DBC_PRD] =\t\t0x1F0,\n\t[PWRAP_GPSINF_0_STA] =\t\t0x204,\n\t[PWRAP_GPSINF_1_STA] =\t\t0x208,\n\t[PWRAP_WACS0_CMD] =\t\t0xC00,\n\t[PWRAP_WACS0_RDATA] =\t\t0xC04,\n\t[PWRAP_WACS0_VLDCLR] =\t\t0xC08,\n\t[PWRAP_WACS1_CMD] =\t\t0xC10,\n\t[PWRAP_WACS1_RDATA] =\t\t0xC14,\n\t[PWRAP_WACS1_VLDCLR] =\t\t0xC18,\n\t[PWRAP_WACS2_CMD] =\t\t0xC20,\n\t[PWRAP_WACS2_RDATA] =\t\t0xC24,\n\t[PWRAP_WACS2_VLDCLR] =\t\t0xC28,\n};\n\nenum pmic_type {\n\tPMIC_MT6323,\n\tPMIC_MT6331,\n\tPMIC_MT6332,\n\tPMIC_MT6351,\n\tPMIC_MT6357,\n\tPMIC_MT6358,\n\tPMIC_MT6359,\n\tPMIC_MT6380,\n\tPMIC_MT6397,\n};\n\nenum pwrap_type {\n\tPWRAP_MT2701,\n\tPWRAP_MT6765,\n\tPWRAP_MT6779,\n\tPWRAP_MT6795,\n\tPWRAP_MT6797,\n\tPWRAP_MT6873,\n\tPWRAP_MT7622,\n\tPWRAP_MT8135,\n\tPWRAP_MT8173,\n\tPWRAP_MT8183,\n\tPWRAP_MT8186,\n\tPWRAP_MT8195,\n\tPWRAP_MT8365,\n\tPWRAP_MT8516,\n};\n\nstruct pmic_wrapper;\n\nstruct pwrap_slv_regops {\n\tconst struct regmap_config *regmap;\n\t \n\tint (*pwrap_read)(struct pmic_wrapper *wrp, u32 adr, u32 *rdata);\n\tint (*pwrap_write)(struct pmic_wrapper *wrp, u32 adr, u32 wdata);\n};\n\n \nstruct pwrap_slv_type {\n\tconst u32 *dew_regs;\n\tenum pmic_type type;\n\tconst u32 *comp_dew_regs;\n\tenum pmic_type comp_type;\n\tconst struct pwrap_slv_regops *regops;\n\tu32 caps;\n};\n\nstruct pmic_wrapper {\n\tstruct device *dev;\n\tvoid __iomem *base;\n\tstruct regmap *regmap;\n\tconst struct pmic_wrapper_type *master;\n\tconst struct pwrap_slv_type *slave;\n\tstruct clk *clk_spi;\n\tstruct clk *clk_wrap;\n\tstruct clk *clk_sys;\n\tstruct clk *clk_tmr;\n\tstruct reset_control *rstc;\n\n\tstruct reset_control *rstc_bridge;\n\tvoid __iomem *bridge_base;\n};\n\nstruct pmic_wrapper_type {\n\tint *regs;\n\tenum pwrap_type type;\n\tu32 arb_en_all;\n\tu32 int_en_all;\n\tu32 int1_en_all;\n\tu32 spi_w;\n\tu32 wdt_src;\n\t \n\tu32 caps;\n\tint (*init_reg_clock)(struct pmic_wrapper *wrp);\n\tint (*init_soc_specific)(struct pmic_wrapper *wrp);\n};\n\nstatic u32 pwrap_readl(struct pmic_wrapper *wrp, enum pwrap_regs reg)\n{\n\treturn readl(wrp->base + wrp->master->regs[reg]);\n}\n\nstatic void pwrap_writel(struct pmic_wrapper *wrp, u32 val, enum pwrap_regs reg)\n{\n\twritel(val, wrp->base + wrp->master->regs[reg]);\n}\n\nstatic u32 pwrap_get_fsm_state(struct pmic_wrapper *wrp)\n{\n\tu32 val;\n\n\tval = pwrap_readl(wrp, PWRAP_WACS2_RDATA);\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\treturn PWRAP_GET_WACS_ARB_FSM(val);\n\telse\n\t\treturn PWRAP_GET_WACS_FSM(val);\n}\n\nstatic bool pwrap_is_fsm_idle(struct pmic_wrapper *wrp)\n{\n\treturn pwrap_get_fsm_state(wrp) == PWRAP_WACS_FSM_IDLE;\n}\n\nstatic bool pwrap_is_fsm_vldclr(struct pmic_wrapper *wrp)\n{\n\treturn pwrap_get_fsm_state(wrp) == PWRAP_WACS_FSM_WFVLDCLR;\n}\n\n \nstatic inline void pwrap_leave_fsm_vldclr(struct pmic_wrapper *wrp)\n{\n\tif (pwrap_is_fsm_vldclr(wrp))\n\t\tpwrap_writel(wrp, 1, PWRAP_WACS2_VLDCLR);\n}\n\nstatic bool pwrap_is_sync_idle(struct pmic_wrapper *wrp)\n{\n\treturn pwrap_readl(wrp, PWRAP_WACS2_RDATA) & PWRAP_STATE_SYNC_IDLE0;\n}\n\nstatic bool pwrap_is_fsm_idle_and_sync_idle(struct pmic_wrapper *wrp)\n{\n\tu32 val = pwrap_readl(wrp, PWRAP_WACS2_RDATA);\n\n\treturn (PWRAP_GET_WACS_FSM(val) == PWRAP_WACS_FSM_IDLE) &&\n\t\t(val & PWRAP_STATE_SYNC_IDLE0);\n}\n\nstatic int pwrap_read16(struct pmic_wrapper *wrp, u32 adr, u32 *rdata)\n{\n\tbool tmp;\n\tint ret;\n\tu32 val;\n\n\tret = readx_poll_timeout(pwrap_is_fsm_idle, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tpwrap_leave_fsm_vldclr(wrp);\n\t\treturn ret;\n\t}\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\tval = adr;\n\telse\n\t\tval = (adr >> 1) << 16;\n\tpwrap_writel(wrp, val, PWRAP_WACS2_CMD);\n\n\tret = readx_poll_timeout(pwrap_is_fsm_vldclr, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret)\n\t\treturn ret;\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\tval = pwrap_readl(wrp, PWRAP_SWINF_2_RDATA_31_0);\n\telse\n\t\tval = pwrap_readl(wrp, PWRAP_WACS2_RDATA);\n\t*rdata = PWRAP_GET_WACS_RDATA(val);\n\n\tpwrap_writel(wrp, 1, PWRAP_WACS2_VLDCLR);\n\n\treturn 0;\n}\n\nstatic int pwrap_read32(struct pmic_wrapper *wrp, u32 adr, u32 *rdata)\n{\n\tbool tmp;\n\tint ret, msb;\n\n\t*rdata = 0;\n\tfor (msb = 0; msb < 2; msb++) {\n\t\tret = readx_poll_timeout(pwrap_is_fsm_idle, wrp, tmp, tmp,\n\t\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\n\t\tif (ret) {\n\t\t\tpwrap_leave_fsm_vldclr(wrp);\n\t\t\treturn ret;\n\t\t}\n\n\t\tpwrap_writel(wrp, ((msb << 30) | (adr << 16)),\n\t\t\t     PWRAP_WACS2_CMD);\n\n\t\tret = readx_poll_timeout(pwrap_is_fsm_vldclr, wrp, tmp, tmp,\n\t\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\t\tif (ret)\n\t\t\treturn ret;\n\n\t\t*rdata += (PWRAP_GET_WACS_RDATA(pwrap_readl(wrp,\n\t\t\t   PWRAP_WACS2_RDATA)) << (16 * msb));\n\n\t\tpwrap_writel(wrp, 1, PWRAP_WACS2_VLDCLR);\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_read(struct pmic_wrapper *wrp, u32 adr, u32 *rdata)\n{\n\treturn wrp->slave->regops->pwrap_read(wrp, adr, rdata);\n}\n\nstatic int pwrap_write16(struct pmic_wrapper *wrp, u32 adr, u32 wdata)\n{\n\tbool tmp;\n\tint ret;\n\n\tret = readx_poll_timeout(pwrap_is_fsm_idle, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tpwrap_leave_fsm_vldclr(wrp);\n\t\treturn ret;\n\t}\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB)) {\n\t\tpwrap_writel(wrp, wdata, PWRAP_SWINF_2_WDATA_31_0);\n\t\tpwrap_writel(wrp, BIT(29) | adr, PWRAP_WACS2_CMD);\n\t} else {\n\t\tpwrap_writel(wrp, BIT(31) | ((adr >> 1) << 16) | wdata,\n\t\t\t     PWRAP_WACS2_CMD);\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_write32(struct pmic_wrapper *wrp, u32 adr, u32 wdata)\n{\n\tbool tmp;\n\tint ret, msb, rdata;\n\n\tfor (msb = 0; msb < 2; msb++) {\n\t\tret = readx_poll_timeout(pwrap_is_fsm_idle, wrp, tmp, tmp,\n\t\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\t\tif (ret) {\n\t\t\tpwrap_leave_fsm_vldclr(wrp);\n\t\t\treturn ret;\n\t\t}\n\n\t\tpwrap_writel(wrp, (1 << 31) | (msb << 30) | (adr << 16) |\n\t\t\t     ((wdata >> (msb * 16)) & 0xffff),\n\t\t\t     PWRAP_WACS2_CMD);\n\n\t\t \n\t\tif (!msb)\n\t\t\tpwrap_read(wrp, adr, &rdata);\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_write(struct pmic_wrapper *wrp, u32 adr, u32 wdata)\n{\n\treturn wrp->slave->regops->pwrap_write(wrp, adr, wdata);\n}\n\nstatic int pwrap_regmap_read(void *context, u32 adr, u32 *rdata)\n{\n\treturn pwrap_read(context, adr, rdata);\n}\n\nstatic int pwrap_regmap_write(void *context, u32 adr, u32 wdata)\n{\n\treturn pwrap_write(context, adr, wdata);\n}\n\nstatic bool pwrap_pmic_read_test(struct pmic_wrapper *wrp, const u32 *dew_regs,\n\t\t\t\t u16 read_test_val)\n{\n\tbool is_success;\n\tu32 rdata;\n\n\tpwrap_read(wrp, dew_regs[PWRAP_DEW_READ_TEST], &rdata);\n\tis_success = ((rdata & U16_MAX) == read_test_val);\n\n\treturn is_success;\n}\n\nstatic int pwrap_reset_spislave(struct pmic_wrapper *wrp)\n{\n\tbool tmp;\n\tint ret, i;\n\n\tpwrap_writel(wrp, 0, PWRAP_HIPRIO_ARB_EN);\n\tpwrap_writel(wrp, 0, PWRAP_WRAP_EN);\n\tpwrap_writel(wrp, 1, PWRAP_MUX_SEL);\n\tpwrap_writel(wrp, 1, PWRAP_MAN_EN);\n\tpwrap_writel(wrp, 0, PWRAP_DIO_EN);\n\n\tpwrap_writel(wrp, wrp->master->spi_w | PWRAP_MAN_CMD_OP_CSL,\n\t\t\tPWRAP_MAN_CMD);\n\tpwrap_writel(wrp, wrp->master->spi_w | PWRAP_MAN_CMD_OP_OUTS,\n\t\t\tPWRAP_MAN_CMD);\n\tpwrap_writel(wrp, wrp->master->spi_w | PWRAP_MAN_CMD_OP_CSH,\n\t\t\tPWRAP_MAN_CMD);\n\n\tfor (i = 0; i < 4; i++)\n\t\tpwrap_writel(wrp, wrp->master->spi_w | PWRAP_MAN_CMD_OP_OUTS,\n\t\t\t\tPWRAP_MAN_CMD);\n\n\tret = readx_poll_timeout(pwrap_is_sync_idle, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tdev_err(wrp->dev, \"%s fail, ret=%d\\n\", __func__, ret);\n\t\treturn ret;\n\t}\n\n\tpwrap_writel(wrp, 0, PWRAP_MAN_EN);\n\tpwrap_writel(wrp, 0, PWRAP_MUX_SEL);\n\n\treturn 0;\n}\n\n \nstatic int pwrap_init_sidly(struct pmic_wrapper *wrp)\n{\n\tu32 i;\n\tu32 pass = 0;\n\tbool read_ok;\n\tsigned char dly[16] = {\n\t\t-1, 0, 1, 0, 2, -1, 1, 1, 3, -1, -1, -1, 3, -1, 2, 1\n\t};\n\n\tfor (i = 0; i < 4; i++) {\n\t\tpwrap_writel(wrp, i, PWRAP_SIDLY);\n\t\tread_ok = pwrap_pmic_read_test(wrp, wrp->slave->dew_regs,\n\t\t\t\t\t       PWRAP_DEW_READ_TEST_VAL);\n\t\tif (read_ok) {\n\t\t\tdev_dbg(wrp->dev, \"[Read Test] pass, SIDLY=%x\\n\", i);\n\t\t\tpass |= 1 << i;\n\t\t}\n\t}\n\n\tif (dly[pass] < 0) {\n\t\tdev_err(wrp->dev, \"sidly pass range 0x%x not continuous\\n\",\n\t\t\t\tpass);\n\t\treturn -EIO;\n\t}\n\n\tpwrap_writel(wrp, dly[pass], PWRAP_SIDLY);\n\n\treturn 0;\n}\n\nstatic int pwrap_init_dual_io(struct pmic_wrapper *wrp)\n{\n\tint ret;\n\tbool read_ok, tmp;\n\tbool comp_read_ok = true;\n\n\t \n\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_DIO_EN], 1);\n\tif (wrp->slave->comp_dew_regs)\n\t\tpwrap_write(wrp, wrp->slave->comp_dew_regs[PWRAP_DEW_DIO_EN], 1);\n\n\t \n\tret = readx_poll_timeout(pwrap_is_fsm_idle_and_sync_idle, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tdev_err(wrp->dev, \"%s fail, ret=%d\\n\", __func__, ret);\n\t\treturn ret;\n\t}\n\n\tpwrap_writel(wrp, 1, PWRAP_DIO_EN);\n\n\t \n\tread_ok = pwrap_pmic_read_test(wrp, wrp->slave->dew_regs, PWRAP_DEW_READ_TEST_VAL);\n\tif (wrp->slave->comp_dew_regs)\n\t\tcomp_read_ok = pwrap_pmic_read_test(wrp, wrp->slave->comp_dew_regs,\n\t\t\t\t\t\t    PWRAP_DEW_COMP_READ_TEST_VAL);\n\tif (!read_ok || !comp_read_ok) {\n\t\tdev_err(wrp->dev, \"Read failed on DIO mode. Main PMIC %s%s\\n\",\n\t\t\t!read_ok ? \"fail\" : \"success\",\n\t\t\twrp->slave->comp_dew_regs && !comp_read_ok ?\n\t\t\t\", Companion PMIC fail\" : \"\");\n\t\treturn -EFAULT;\n\t}\n\n\treturn 0;\n}\n\n \nstatic void pwrap_init_chip_select_ext(struct pmic_wrapper *wrp, u8 hext_write,\n\t\t\t\t       u8 hext_read, u8 lext_start,\n\t\t\t\t       u8 lext_end)\n{\n\t \n\tpwrap_writel(wrp, hext_write, PWRAP_CSHEXT_WRITE);\n\tpwrap_writel(wrp, hext_read, PWRAP_CSHEXT_READ);\n\n\t \n\tpwrap_writel(wrp, lext_start, PWRAP_CSLEXT_START);\n\tpwrap_writel(wrp, lext_end, PWRAP_CSLEXT_END);\n}\n\nstatic int pwrap_common_init_reg_clock(struct pmic_wrapper *wrp)\n{\n\tswitch (wrp->master->type) {\n\tcase PWRAP_MT6795:\n\t\tif (wrp->slave->type == PMIC_MT6331) {\n\t\t\tconst u32 *dew_regs = wrp->slave->dew_regs;\n\n\t\t\tpwrap_write(wrp, dew_regs[PWRAP_DEW_RDDMY_NO], 0x8);\n\n\t\t\tif (wrp->slave->comp_type == PMIC_MT6332) {\n\t\t\t\tdew_regs = wrp->slave->comp_dew_regs;\n\t\t\t\tpwrap_write(wrp, dew_regs[PWRAP_DEW_RDDMY_NO], 0x8);\n\t\t\t}\n\t\t}\n\t\tpwrap_writel(wrp, 0x88, PWRAP_RDDMY);\n\t\tpwrap_init_chip_select_ext(wrp, 15, 15, 15, 15);\n\t\tbreak;\n\tcase PWRAP_MT8173:\n\t\tpwrap_init_chip_select_ext(wrp, 0, 4, 2, 2);\n\t\tbreak;\n\tcase PWRAP_MT8135:\n\t\tpwrap_writel(wrp, 0x4, PWRAP_CSHEXT);\n\t\tpwrap_init_chip_select_ext(wrp, 0, 4, 0, 0);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_mt2701_init_reg_clock(struct pmic_wrapper *wrp)\n{\n\tswitch (wrp->slave->type) {\n\tcase PMIC_MT6397:\n\t\tpwrap_writel(wrp, 0xc, PWRAP_RDDMY);\n\t\tpwrap_init_chip_select_ext(wrp, 4, 0, 2, 2);\n\t\tbreak;\n\n\tcase PMIC_MT6323:\n\t\tpwrap_writel(wrp, 0x8, PWRAP_RDDMY);\n\t\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_RDDMY_NO],\n\t\t\t    0x8);\n\t\tpwrap_init_chip_select_ext(wrp, 5, 0, 2, 2);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic bool pwrap_is_cipher_ready(struct pmic_wrapper *wrp)\n{\n\treturn pwrap_readl(wrp, PWRAP_CIPHER_RDY) & 1;\n}\n\nstatic bool __pwrap_is_pmic_cipher_ready(struct pmic_wrapper *wrp, const u32 *dew_regs)\n{\n\tu32 rdata;\n\tint ret;\n\n\tret = pwrap_read(wrp, dew_regs[PWRAP_DEW_CIPHER_RDY], &rdata);\n\tif (ret)\n\t\treturn false;\n\n\treturn rdata == 1;\n}\n\n\nstatic bool pwrap_is_pmic_cipher_ready(struct pmic_wrapper *wrp)\n{\n\tbool ret = __pwrap_is_pmic_cipher_ready(wrp, wrp->slave->dew_regs);\n\n\tif (!ret)\n\t\treturn ret;\n\n\t \n\tif (wrp->slave->comp_dew_regs)\n\t\tret = __pwrap_is_pmic_cipher_ready(wrp, wrp->slave->comp_dew_regs);\n\n\treturn ret;\n}\n\nstatic void pwrap_config_cipher(struct pmic_wrapper *wrp, const u32 *dew_regs)\n{\n\tpwrap_write(wrp, dew_regs[PWRAP_DEW_CIPHER_SWRST], 0x1);\n\tpwrap_write(wrp, dew_regs[PWRAP_DEW_CIPHER_SWRST], 0x0);\n\tpwrap_write(wrp, dew_regs[PWRAP_DEW_CIPHER_KEY_SEL], 0x1);\n\tpwrap_write(wrp, dew_regs[PWRAP_DEW_CIPHER_IV_SEL], 0x2);\n}\n\nstatic int pwrap_init_cipher(struct pmic_wrapper *wrp)\n{\n\tint ret;\n\tbool tmp;\n\tu32 rdata = 0;\n\n\tpwrap_writel(wrp, 0x1, PWRAP_CIPHER_SWRST);\n\tpwrap_writel(wrp, 0x0, PWRAP_CIPHER_SWRST);\n\tpwrap_writel(wrp, 0x1, PWRAP_CIPHER_KEY_SEL);\n\tpwrap_writel(wrp, 0x2, PWRAP_CIPHER_IV_SEL);\n\n\tswitch (wrp->master->type) {\n\tcase PWRAP_MT8135:\n\t\tpwrap_writel(wrp, 1, PWRAP_CIPHER_LOAD);\n\t\tpwrap_writel(wrp, 1, PWRAP_CIPHER_START);\n\t\tbreak;\n\tcase PWRAP_MT2701:\n\tcase PWRAP_MT6765:\n\tcase PWRAP_MT6779:\n\tcase PWRAP_MT6795:\n\tcase PWRAP_MT6797:\n\tcase PWRAP_MT8173:\n\tcase PWRAP_MT8186:\n\tcase PWRAP_MT8365:\n\tcase PWRAP_MT8516:\n\t\tpwrap_writel(wrp, 1, PWRAP_CIPHER_EN);\n\t\tbreak;\n\tcase PWRAP_MT7622:\n\t\tpwrap_writel(wrp, 0, PWRAP_CIPHER_EN);\n\t\tbreak;\n\tcase PWRAP_MT6873:\n\tcase PWRAP_MT8183:\n\tcase PWRAP_MT8195:\n\t\tbreak;\n\t}\n\n\t \n\tpwrap_config_cipher(wrp, wrp->slave->dew_regs);\n\n\t \n\tif (wrp->slave->comp_type > 0)\n\t\tpwrap_config_cipher(wrp, wrp->slave->comp_dew_regs);\n\n\tswitch (wrp->slave->type) {\n\tcase PMIC_MT6397:\n\t\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CIPHER_LOAD],\n\t\t\t    0x1);\n\t\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CIPHER_START],\n\t\t\t    0x1);\n\t\tbreak;\n\tcase PMIC_MT6323:\n\tcase PMIC_MT6351:\n\tcase PMIC_MT6357:\n\t\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CIPHER_EN],\n\t\t\t    0x1);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\t \n\tret = readx_poll_timeout(pwrap_is_cipher_ready, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tdev_err(wrp->dev, \"cipher data ready@AP fail, ret=%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\t \n\tret = readx_poll_timeout(pwrap_is_pmic_cipher_ready, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tdev_err(wrp->dev,\n\t\t\t\"timeout waiting for cipher data ready@PMIC\\n\");\n\t\treturn ret;\n\t}\n\n\t \n\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CIPHER_MODE], 0x1);\n\tret = readx_poll_timeout(pwrap_is_fsm_idle_and_sync_idle, wrp, tmp, tmp,\n\t\t\t\t PWRAP_POLL_DELAY_US, PWRAP_POLL_TIMEOUT_US);\n\tif (ret) {\n\t\tdev_err(wrp->dev, \"cipher mode idle fail, ret=%d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tpwrap_writel(wrp, 1, PWRAP_CIPHER_MODE);\n\n\t \n\tif (pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_WRITE_TEST],\n\t\t\tPWRAP_DEW_WRITE_TEST_VAL) ||\n\t    pwrap_read(wrp, wrp->slave->dew_regs[PWRAP_DEW_WRITE_TEST],\n\t\t       &rdata) ||\n\t    (rdata != PWRAP_DEW_WRITE_TEST_VAL)) {\n\t\tdev_err(wrp->dev, \"rdata=0x%04X\\n\", rdata);\n\t\treturn -EFAULT;\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_init_security(struct pmic_wrapper *wrp)\n{\n\tu32 crc_val;\n\tint ret;\n\n\t \n\tret = pwrap_init_cipher(wrp);\n\tif (ret)\n\t\treturn ret;\n\n\t \n\tret = pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CRC_EN], 0x1);\n\tif (ret == 0 && wrp->slave->comp_dew_regs)\n\t\tret = pwrap_write(wrp, wrp->slave->comp_dew_regs[PWRAP_DEW_CRC_EN], 0x1);\n\n\tpwrap_writel(wrp, 0x1, PWRAP_CRC_EN);\n\tpwrap_writel(wrp, 0x0, PWRAP_SIG_MODE);\n\n\t \n\tcrc_val = wrp->slave->dew_regs[PWRAP_DEW_CRC_VAL];\n\tif (wrp->slave->comp_dew_regs)\n\t\tcrc_val |= wrp->slave->comp_dew_regs[PWRAP_DEW_CRC_VAL] << 16;\n\n\tpwrap_writel(wrp, crc_val, PWRAP_SIG_ADR);\n\n\t \n\tpwrap_writel(wrp,\n\t\t     wrp->master->arb_en_all, PWRAP_HIPRIO_ARB_EN);\n\n\treturn 0;\n}\n\nstatic int pwrap_mt8135_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\t \n\tpwrap_writel(wrp, 0x1, PWRAP_EVENT_IN_EN);\n\tpwrap_writel(wrp, 0xffff, PWRAP_EVENT_DST_EN);\n\twritel(0x7f, wrp->bridge_base + PWRAP_MT8135_BRIDGE_IORD_ARB_EN);\n\twritel(0x1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_WACS3_EN);\n\twritel(0x1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_WACS4_EN);\n\twritel(0x1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_WDT_UNIT);\n\twritel(0xffff, wrp->bridge_base + PWRAP_MT8135_BRIDGE_WDT_SRC_EN);\n\twritel(0x1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_TIMER_EN);\n\twritel(0x7ff, wrp->bridge_base + PWRAP_MT8135_BRIDGE_INT_EN);\n\n\t \n\tif (pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_EVENT_OUT_EN],\n\t\t\t0x1) ||\n\t    pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_EVENT_SRC_EN],\n\t\t\t0xffff)) {\n\t\tdev_err(wrp->dev, \"enable dewrap fail\\n\");\n\t\treturn -EFAULT;\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_mt8173_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\t \n\tif (pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_EVENT_OUT_EN],\n\t\t\t0x1) ||\n\t    pwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_EVENT_SRC_EN],\n\t\t\t0xffff)) {\n\t\tdev_err(wrp->dev, \"enable dewrap fail\\n\");\n\t\treturn -EFAULT;\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_mt2701_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\t \n\tswitch (wrp->slave->type) {\n\tcase PMIC_MT6323:\n\t\tpwrap_writel(wrp, 0x076c, PWRAP_ADC_CMD_ADDR);\n\t\tpwrap_writel(wrp, 0x8000, PWRAP_PWRAP_ADC_CMD);\n\t\tpwrap_writel(wrp, 0x072c, PWRAP_ADC_RDY_ADDR);\n\t\tpwrap_writel(wrp, 0x072e, PWRAP_ADC_RDATA_ADDR1);\n\t\tpwrap_writel(wrp, 0x0730, PWRAP_ADC_RDATA_ADDR2);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int pwrap_mt6795_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\tpwrap_writel(wrp, 0xf, PWRAP_STAUPD_GRPEN);\n\n\tif (wrp->slave->type == PMIC_MT6331)\n\t\tpwrap_writel(wrp, 0x1b4, PWRAP_EINT_STA0_ADR);\n\n\tif (wrp->slave->comp_type == PMIC_MT6332)\n\t\tpwrap_writel(wrp, 0x8112, PWRAP_EINT_STA1_ADR);\n\n\treturn 0;\n}\n\nstatic int pwrap_mt7622_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\tpwrap_writel(wrp, 0, PWRAP_STAUPD_PRD);\n\t \n\tpwrap_writel(wrp, 0x8000000, PWRAP_SPI2_CTRL);\n\n\treturn 0;\n}\n\nstatic int pwrap_mt8183_init_soc_specific(struct pmic_wrapper *wrp)\n{\n\tpwrap_writel(wrp, 0xf5, PWRAP_STAUPD_GRPEN);\n\n\tpwrap_write(wrp, wrp->slave->dew_regs[PWRAP_DEW_CRC_EN], 0x1);\n\tpwrap_writel(wrp, 1, PWRAP_CRC_EN);\n\tpwrap_writel(wrp, 0x416, PWRAP_SIG_ADR);\n\tpwrap_writel(wrp, 0x42e, PWRAP_EINT_STA0_ADR);\n\n\tpwrap_writel(wrp, 1, PWRAP_WACS_P2P_EN);\n\tpwrap_writel(wrp, 1, PWRAP_WACS_MD32_EN);\n\tpwrap_writel(wrp, 1, PWRAP_INIT_DONE_P2P);\n\tpwrap_writel(wrp, 1, PWRAP_INIT_DONE_MD32);\n\n\treturn 0;\n}\n\nstatic int pwrap_init(struct pmic_wrapper *wrp)\n{\n\tint ret;\n\n\tif (wrp->rstc)\n\t\treset_control_reset(wrp->rstc);\n\tif (wrp->rstc_bridge)\n\t\treset_control_reset(wrp->rstc_bridge);\n\n\tswitch (wrp->master->type) {\n\tcase PWRAP_MT6795:\n\t\tfallthrough;\n\tcase PWRAP_MT8173:\n\t\t \n\t\tpwrap_writel(wrp, 3, PWRAP_DCM_EN);\n\t\tpwrap_writel(wrp, 0, PWRAP_DCM_DBC_PRD);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\tif (HAS_CAP(wrp->slave->caps, PWRAP_SLV_CAP_SPI)) {\n\t\t \n\t\tret = pwrap_reset_spislave(wrp);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tpwrap_writel(wrp, 1, PWRAP_WRAP_EN);\n\n\tpwrap_writel(wrp, wrp->master->arb_en_all, PWRAP_HIPRIO_ARB_EN);\n\n\tpwrap_writel(wrp, 1, PWRAP_WACS2_EN);\n\n\tret = wrp->master->init_reg_clock(wrp);\n\tif (ret)\n\t\treturn ret;\n\n\tif (HAS_CAP(wrp->slave->caps, PWRAP_SLV_CAP_SPI)) {\n\t\t \n\t\tret = pwrap_init_sidly(wrp);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif (HAS_CAP(wrp->slave->caps, PWRAP_SLV_CAP_DUALIO)) {\n\t\t \n\t\tret = pwrap_init_dual_io(wrp);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif (HAS_CAP(wrp->slave->caps, PWRAP_SLV_CAP_SECURITY)) {\n\t\t \n\t\tret = pwrap_init_security(wrp);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\tif (wrp->master->type == PWRAP_MT8135)\n\t\tpwrap_writel(wrp, 0x7, PWRAP_RRARB_EN);\n\n\tpwrap_writel(wrp, 0x1, PWRAP_WACS0_EN);\n\tpwrap_writel(wrp, 0x1, PWRAP_WACS1_EN);\n\tpwrap_writel(wrp, 0x1, PWRAP_WACS2_EN);\n\tpwrap_writel(wrp, 0x5, PWRAP_STAUPD_PRD);\n\tpwrap_writel(wrp, 0xff, PWRAP_STAUPD_GRPEN);\n\n\tif (wrp->master->init_soc_specific) {\n\t\tret = wrp->master->init_soc_specific(wrp);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\t \n\tpwrap_writel(wrp, 1, PWRAP_INIT_DONE2);\n\tpwrap_writel(wrp, 1, PWRAP_INIT_DONE0);\n\tpwrap_writel(wrp, 1, PWRAP_INIT_DONE1);\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_BRIDGE)) {\n\t\twritel(1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_INIT_DONE3);\n\t\twritel(1, wrp->bridge_base + PWRAP_MT8135_BRIDGE_INIT_DONE4);\n\t}\n\n\treturn 0;\n}\n\nstatic irqreturn_t pwrap_interrupt(int irqno, void *dev_id)\n{\n\tu32 rdata;\n\tstruct pmic_wrapper *wrp = dev_id;\n\n\trdata = pwrap_readl(wrp, PWRAP_INT_FLG);\n\tdev_err(wrp->dev, \"unexpected interrupt int=0x%x\\n\", rdata);\n\tpwrap_writel(wrp, 0xffffffff, PWRAP_INT_CLR);\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_INT1_EN)) {\n\t\trdata = pwrap_readl(wrp, PWRAP_INT1_FLG);\n\t\tdev_err(wrp->dev, \"unexpected interrupt int1=0x%x\\n\", rdata);\n\t\tpwrap_writel(wrp, 0xffffffff, PWRAP_INT1_CLR);\n\t}\n\n\treturn IRQ_HANDLED;\n}\n\nstatic const struct regmap_config pwrap_regmap_config16 = {\n\t.reg_bits = 16,\n\t.val_bits = 16,\n\t.reg_stride = 2,\n\t.reg_read = pwrap_regmap_read,\n\t.reg_write = pwrap_regmap_write,\n\t.max_register = 0xffff,\n};\n\nstatic const struct regmap_config pwrap_regmap_config32 = {\n\t.reg_bits = 32,\n\t.val_bits = 32,\n\t.reg_stride = 4,\n\t.reg_read = pwrap_regmap_read,\n\t.reg_write = pwrap_regmap_write,\n\t.max_register = 0xffff,\n};\n\nstatic const struct pwrap_slv_regops pwrap_regops16 = {\n\t.pwrap_read = pwrap_read16,\n\t.pwrap_write = pwrap_write16,\n\t.regmap = &pwrap_regmap_config16,\n};\n\nstatic const struct pwrap_slv_regops pwrap_regops32 = {\n\t.pwrap_read = pwrap_read32,\n\t.pwrap_write = pwrap_write32,\n\t.regmap = &pwrap_regmap_config32,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6323 = {\n\t.dew_regs = mt6323_regs,\n\t.type = PMIC_MT6323,\n\t.regops = &pwrap_regops16,\n\t.caps = PWRAP_SLV_CAP_SPI | PWRAP_SLV_CAP_DUALIO |\n\t\tPWRAP_SLV_CAP_SECURITY,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6331 = {\n\t.dew_regs = mt6331_regs,\n\t.type = PMIC_MT6331,\n\t.comp_dew_regs = mt6332_regs,\n\t.comp_type = PMIC_MT6332,\n\t.regops = &pwrap_regops16,\n\t.caps = PWRAP_SLV_CAP_SPI | PWRAP_SLV_CAP_DUALIO |\n\t\tPWRAP_SLV_CAP_SECURITY,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6351 = {\n\t.dew_regs = mt6351_regs,\n\t.type = PMIC_MT6351,\n\t.regops = &pwrap_regops16,\n\t.caps = 0,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6357 = {\n\t.dew_regs = mt6357_regs,\n\t.type = PMIC_MT6357,\n\t.regops = &pwrap_regops16,\n\t.caps = 0,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6358 = {\n\t.dew_regs = mt6358_regs,\n\t.type = PMIC_MT6358,\n\t.regops = &pwrap_regops16,\n\t.caps = PWRAP_SLV_CAP_SPI | PWRAP_SLV_CAP_DUALIO,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6359 = {\n\t.dew_regs = mt6359_regs,\n\t.type = PMIC_MT6359,\n\t.regops = &pwrap_regops16,\n\t.caps = PWRAP_SLV_CAP_DUALIO,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6380 = {\n\t.dew_regs = NULL,\n\t.type = PMIC_MT6380,\n\t.regops = &pwrap_regops32,\n\t.caps = 0,\n};\n\nstatic const struct pwrap_slv_type pmic_mt6397 = {\n\t.dew_regs = mt6397_regs,\n\t.type = PMIC_MT6397,\n\t.regops = &pwrap_regops16,\n\t.caps = PWRAP_SLV_CAP_SPI | PWRAP_SLV_CAP_DUALIO |\n\t\tPWRAP_SLV_CAP_SECURITY,\n};\n\nstatic const struct of_device_id of_slave_match_tbl[] = {\n\t{ .compatible = \"mediatek,mt6323\", .data = &pmic_mt6323 },\n\t{ .compatible = \"mediatek,mt6331\", .data = &pmic_mt6331 },\n\t{ .compatible = \"mediatek,mt6351\", .data = &pmic_mt6351 },\n\t{ .compatible = \"mediatek,mt6357\", .data = &pmic_mt6357 },\n\t{ .compatible = \"mediatek,mt6358\", .data = &pmic_mt6358 },\n\t{ .compatible = \"mediatek,mt6359\", .data = &pmic_mt6359 },\n\n\t \n\t{ .compatible = \"mediatek,mt6380-regulator\", .data = &pmic_mt6380 },\n\t{ .compatible = \"mediatek,mt6397\", .data = &pmic_mt6397 },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, of_slave_match_tbl);\n\nstatic const struct pmic_wrapper_type pwrap_mt2701 = {\n\t.regs = mt2701_regs,\n\t.type = PWRAP_MT2701,\n\t.arb_en_all = 0x3f,\n\t.int_en_all = ~(u32)(BIT(31) | BIT(2)),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE_NEW,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_mt2701_init_reg_clock,\n\t.init_soc_specific = pwrap_mt2701_init_soc_specific,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt6765 = {\n\t.regs = mt6765_regs,\n\t.type = PWRAP_MT6765,\n\t.arb_en_all = 0x3fd35,\n\t.int_en_all = 0xffffffff,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt6779 = {\n\t.regs = mt6779_regs,\n\t.type = PWRAP_MT6779,\n\t.arb_en_all = 0xfbb7f,\n\t.int_en_all = 0xfffffffe,\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = 0,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt6795 = {\n\t.regs = mt6795_regs,\n\t.type = PWRAP_MT6795,\n\t.arb_en_all = 0x3f,\n\t.int_en_all = ~(u32)(BIT(31) | BIT(2) | BIT(1)),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_NO_STAUPD,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = pwrap_mt6795_init_soc_specific,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt6797 = {\n\t.regs = mt6797_regs,\n\t.type = PWRAP_MT6797,\n\t.arb_en_all = 0x01fff,\n\t.int_en_all = 0xffffffc6,\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt6873 = {\n\t.regs = mt6873_regs,\n\t.type = PWRAP_MT6873,\n\t.arb_en_all = 0x777f,\n\t.int_en_all = BIT(4) | BIT(5),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_ARB,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt7622 = {\n\t.regs = mt7622_regs,\n\t.type = PWRAP_MT7622,\n\t.arb_en_all = 0xff,\n\t.int_en_all = ~(u32)BIT(31),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = pwrap_mt7622_init_soc_specific,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt8135 = {\n\t.regs = mt8135_regs,\n\t.type = PWRAP_MT8135,\n\t.arb_en_all = 0x1ff,\n\t.int_en_all = ~(u32)(BIT(31) | BIT(1)),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_BRIDGE | PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = pwrap_mt8135_init_soc_specific,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt8173 = {\n\t.regs = mt8173_regs,\n\t.type = PWRAP_MT8173,\n\t.arb_en_all = 0x3f,\n\t.int_en_all = ~(u32)(BIT(31) | BIT(1)),\n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_NO_STAUPD,\n\t.caps = PWRAP_CAP_RESET | PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = pwrap_mt8173_init_soc_specific,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt8183 = {\n\t.regs = mt8183_regs,\n\t.type = PWRAP_MT8183,\n\t.arb_en_all = 0x3fa75,\n\t.int_en_all = 0xffffffff,\n\t.int1_en_all = 0xeef7ffff,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_INT1_EN | PWRAP_CAP_WDT_SRC1,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = pwrap_mt8183_init_soc_specific,\n};\n\nstatic struct pmic_wrapper_type pwrap_mt8195 = {\n\t.regs = mt8195_regs,\n\t.type = PWRAP_MT8195,\n\t.arb_en_all = 0x777f,  \n\t.int_en_all = 0x180000,  \n\t.int1_en_all = 0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_INT1_EN | PWRAP_CAP_ARB,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct pmic_wrapper_type pwrap_mt8365 = {\n\t.regs = mt8365_regs,\n\t.type = PWRAP_MT8365,\n\t.arb_en_all = 0x3ffff,\n\t.int_en_all = 0x7f1fffff,\n\t.int1_en_all = 0x0,\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_INT1_EN | PWRAP_CAP_WDT_SRC1,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic struct pmic_wrapper_type pwrap_mt8516 = {\n\t.regs = mt8516_regs,\n\t.type = PWRAP_MT8516,\n\t.arb_en_all = 0xff,\n\t.int_en_all = ~(u32)(BIT(31) | BIT(2)),\n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_DCM,\n\t.init_reg_clock = pwrap_mt2701_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic struct pmic_wrapper_type pwrap_mt8186 = {\n\t.regs = mt8186_regs,\n\t.type = PWRAP_MT8186,\n\t.arb_en_all = 0xfb27f,\n\t.int_en_all = 0xfffffffe,  \n\t.int1_en_all =  0x000017ff,  \n\t.spi_w = PWRAP_MAN_CMD_SPI_WRITE,\n\t.wdt_src = PWRAP_WDT_SRC_MASK_ALL,\n\t.caps = PWRAP_CAP_INT1_EN | PWRAP_CAP_ARB_MT8186,\n\t.init_reg_clock = pwrap_common_init_reg_clock,\n\t.init_soc_specific = NULL,\n};\n\nstatic const struct of_device_id of_pwrap_match_tbl[] = {\n\t{ .compatible = \"mediatek,mt2701-pwrap\", .data = &pwrap_mt2701 },\n\t{ .compatible = \"mediatek,mt6765-pwrap\", .data = &pwrap_mt6765 },\n\t{ .compatible = \"mediatek,mt6779-pwrap\", .data = &pwrap_mt6779 },\n\t{ .compatible = \"mediatek,mt6795-pwrap\", .data = &pwrap_mt6795 },\n\t{ .compatible = \"mediatek,mt6797-pwrap\", .data = &pwrap_mt6797 },\n\t{ .compatible = \"mediatek,mt6873-pwrap\", .data = &pwrap_mt6873 },\n\t{ .compatible = \"mediatek,mt7622-pwrap\", .data = &pwrap_mt7622 },\n\t{ .compatible = \"mediatek,mt8135-pwrap\", .data = &pwrap_mt8135 },\n\t{ .compatible = \"mediatek,mt8173-pwrap\", .data = &pwrap_mt8173 },\n\t{ .compatible = \"mediatek,mt8183-pwrap\", .data = &pwrap_mt8183 },\n\t{ .compatible = \"mediatek,mt8186-pwrap\", .data = &pwrap_mt8186 },\n\t{ .compatible = \"mediatek,mt8195-pwrap\", .data = &pwrap_mt8195 },\n\t{ .compatible = \"mediatek,mt8365-pwrap\", .data = &pwrap_mt8365 },\n\t{ .compatible = \"mediatek,mt8516-pwrap\", .data = &pwrap_mt8516 },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, of_pwrap_match_tbl);\n\nstatic int pwrap_probe(struct platform_device *pdev)\n{\n\tint ret, irq;\n\tu32 mask_done;\n\tstruct pmic_wrapper *wrp;\n\tstruct device_node *np = pdev->dev.of_node;\n\tconst struct of_device_id *of_slave_id = NULL;\n\n\tif (np->child)\n\t\tof_slave_id = of_match_node(of_slave_match_tbl, np->child);\n\n\tif (!of_slave_id) {\n\t\tdev_dbg(&pdev->dev, \"slave pmic should be defined in dts\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\twrp = devm_kzalloc(&pdev->dev, sizeof(*wrp), GFP_KERNEL);\n\tif (!wrp)\n\t\treturn -ENOMEM;\n\n\tplatform_set_drvdata(pdev, wrp);\n\n\twrp->master = of_device_get_match_data(&pdev->dev);\n\twrp->slave = of_slave_id->data;\n\twrp->dev = &pdev->dev;\n\n\twrp->base = devm_platform_ioremap_resource_byname(pdev, \"pwrap\");\n\tif (IS_ERR(wrp->base))\n\t\treturn PTR_ERR(wrp->base);\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_RESET)) {\n\t\twrp->rstc = devm_reset_control_get(wrp->dev, \"pwrap\");\n\t\tif (IS_ERR(wrp->rstc)) {\n\t\t\tret = PTR_ERR(wrp->rstc);\n\t\t\tdev_dbg(wrp->dev, \"cannot get pwrap reset: %d\\n\", ret);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_BRIDGE)) {\n\t\twrp->bridge_base = devm_platform_ioremap_resource_byname(pdev, \"pwrap-bridge\");\n\t\tif (IS_ERR(wrp->bridge_base))\n\t\t\treturn PTR_ERR(wrp->bridge_base);\n\n\t\twrp->rstc_bridge = devm_reset_control_get(wrp->dev,\n\t\t\t\t\t\t\t  \"pwrap-bridge\");\n\t\tif (IS_ERR(wrp->rstc_bridge)) {\n\t\t\tret = PTR_ERR(wrp->rstc_bridge);\n\t\t\tdev_dbg(wrp->dev,\n\t\t\t\t\"cannot get pwrap-bridge reset: %d\\n\", ret);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\twrp->clk_spi = devm_clk_get(wrp->dev, \"spi\");\n\tif (IS_ERR(wrp->clk_spi)) {\n\t\tdev_dbg(wrp->dev, \"failed to get clock: %ld\\n\",\n\t\t\tPTR_ERR(wrp->clk_spi));\n\t\treturn PTR_ERR(wrp->clk_spi);\n\t}\n\n\twrp->clk_wrap = devm_clk_get(wrp->dev, \"wrap\");\n\tif (IS_ERR(wrp->clk_wrap)) {\n\t\tdev_dbg(wrp->dev, \"failed to get clock: %ld\\n\",\n\t\t\tPTR_ERR(wrp->clk_wrap));\n\t\treturn PTR_ERR(wrp->clk_wrap);\n\t}\n\n\twrp->clk_sys = devm_clk_get_optional(wrp->dev, \"sys\");\n\tif (IS_ERR(wrp->clk_sys)) {\n\t\treturn dev_err_probe(wrp->dev, PTR_ERR(wrp->clk_sys),\n\t\t\t\t     \"failed to get clock: %pe\\n\",\n\t\t\t\t     wrp->clk_sys);\n\t}\n\n\twrp->clk_tmr = devm_clk_get_optional(wrp->dev, \"tmr\");\n\tif (IS_ERR(wrp->clk_tmr)) {\n\t\treturn dev_err_probe(wrp->dev, PTR_ERR(wrp->clk_tmr),\n\t\t\t\t     \"failed to get clock: %pe\\n\",\n\t\t\t\t     wrp->clk_tmr);\n\t}\n\n\tret = clk_prepare_enable(wrp->clk_spi);\n\tif (ret)\n\t\treturn ret;\n\n\tret = clk_prepare_enable(wrp->clk_wrap);\n\tif (ret)\n\t\tgoto err_out1;\n\n\tret = clk_prepare_enable(wrp->clk_sys);\n\tif (ret)\n\t\tgoto err_out2;\n\n\tret = clk_prepare_enable(wrp->clk_tmr);\n\tif (ret)\n\t\tgoto err_out3;\n\n\t \n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_DCM)) {\n\t\tpwrap_writel(wrp, 1, PWRAP_DCM_EN);\n\t\tpwrap_writel(wrp, 0, PWRAP_DCM_DBC_PRD);\n\t}\n\n\t \n\tif (!pwrap_readl(wrp, PWRAP_INIT_DONE2)) {\n\t\tret = pwrap_init(wrp);\n\t\tif (ret) {\n\t\t\tdev_dbg(wrp->dev, \"init failed with %d\\n\", ret);\n\t\t\tgoto err_out4;\n\t\t}\n\t}\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\tmask_done = PWRAP_STATE_INIT_DONE1;\n\telse if (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB_MT8186))\n\t\tmask_done = PWRAP_STATE_INIT_DONE0_MT8186;\n\telse\n\t\tmask_done = PWRAP_STATE_INIT_DONE0;\n\n\tif (!(pwrap_readl(wrp, PWRAP_WACS2_RDATA) & mask_done)) {\n\t\tdev_dbg(wrp->dev, \"initialization isn't finished\\n\");\n\t\tret = -ENODEV;\n\t\tgoto err_out4;\n\t}\n\n\t \n\tif (!HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\tpwrap_writel(wrp, 0xf, PWRAP_WDT_UNIT);\n\n\t \n\tpwrap_writel(wrp, wrp->master->wdt_src, PWRAP_WDT_SRC_EN);\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_WDT_SRC1))\n\t\tpwrap_writel(wrp, wrp->master->wdt_src, PWRAP_WDT_SRC_EN_1);\n\n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_ARB))\n\t\tpwrap_writel(wrp, 0x3, PWRAP_TIMER_EN);\n\telse\n\t\tpwrap_writel(wrp, 0x1, PWRAP_TIMER_EN);\n\n\tpwrap_writel(wrp, wrp->master->int_en_all, PWRAP_INT_EN);\n\t \n\tif (HAS_CAP(wrp->master->caps, PWRAP_CAP_INT1_EN))\n\t\tpwrap_writel(wrp, wrp->master->int1_en_all, PWRAP_INT1_EN);\n\n\tirq = platform_get_irq(pdev, 0);\n\tif (irq < 0) {\n\t\tret = irq;\n\t\tgoto err_out2;\n\t}\n\n\tret = devm_request_irq(wrp->dev, irq, pwrap_interrupt,\n\t\t\t       IRQF_TRIGGER_HIGH,\n\t\t\t       \"mt-pmic-pwrap\", wrp);\n\tif (ret)\n\t\tgoto err_out4;\n\n\twrp->regmap = devm_regmap_init(wrp->dev, NULL, wrp, wrp->slave->regops->regmap);\n\tif (IS_ERR(wrp->regmap)) {\n\t\tret = PTR_ERR(wrp->regmap);\n\t\tgoto err_out2;\n\t}\n\n\tret = of_platform_populate(np, NULL, NULL, wrp->dev);\n\tif (ret) {\n\t\tdev_dbg(wrp->dev, \"failed to create child devices at %pOF\\n\",\n\t\t\t\tnp);\n\t\tgoto err_out4;\n\t}\n\n\treturn 0;\n\nerr_out4:\n\tclk_disable_unprepare(wrp->clk_tmr);\nerr_out3:\n\tclk_disable_unprepare(wrp->clk_sys);\nerr_out2:\n\tclk_disable_unprepare(wrp->clk_wrap);\nerr_out1:\n\tclk_disable_unprepare(wrp->clk_spi);\n\n\treturn ret;\n}\n\nstatic struct platform_driver pwrap_drv = {\n\t.driver = {\n\t\t.name = \"mt-pmic-pwrap\",\n\t\t.of_match_table = of_pwrap_match_tbl,\n\t},\n\t.probe = pwrap_probe,\n};\n\nmodule_platform_driver(pwrap_drv);\n\nMODULE_AUTHOR(\"Flora Fu, MediaTek\");\nMODULE_DESCRIPTION(\"MediaTek MT8135 PMIC Wrapper Driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}