{
  "module_name": "rpm-proc.c",
  "hash_id": "05c82331a0849531722c6782f176617339351882330f788fc99ebeab04c843b3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/soc/qcom/rpm-proc.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/of_platform.h>\n#include <linux/platform_device.h>\n#include <linux/rpmsg/qcom_smd.h>\n\nstatic int rpm_proc_probe(struct platform_device *pdev)\n{\n\tstruct qcom_smd_edge *edge = NULL;\n\tstruct device *dev = &pdev->dev;\n\tstruct device_node *edge_node;\n\tint ret;\n\n\tedge_node = of_get_child_by_name(dev->of_node, \"smd-edge\");\n\tif (edge_node) {\n\t\tedge = qcom_smd_register_edge(dev, edge_node);\n\t\tof_node_put(edge_node);\n\t\tif (IS_ERR(edge))\n\t\t\treturn dev_err_probe(dev, PTR_ERR(edge),\n\t\t\t\t\t     \"Failed to register smd-edge\\n\");\n\t}\n\n\tret = devm_of_platform_populate(dev);\n\tif (ret) {\n\t\tdev_err(dev, \"Failed to populate child devices: %d\\n\", ret);\n\t\tgoto err;\n\t}\n\n\tplatform_set_drvdata(pdev, edge);\n\treturn 0;\nerr:\n\tif (edge)\n\t\tqcom_smd_unregister_edge(edge);\n\treturn ret;\n}\n\nstatic void rpm_proc_remove(struct platform_device *pdev)\n{\n\tstruct qcom_smd_edge *edge = platform_get_drvdata(pdev);\n\n\tif (edge)\n\t\tqcom_smd_unregister_edge(edge);\n}\n\nstatic const struct of_device_id rpm_proc_of_match[] = {\n\t{ .compatible = \"qcom,rpm-proc\", },\n\t{   }\n};\nMODULE_DEVICE_TABLE(of, rpm_proc_of_match);\n\nstatic struct platform_driver rpm_proc_driver = {\n\t.probe = rpm_proc_probe,\n\t.remove_new = rpm_proc_remove,\n\t.driver = {\n\t\t.name = \"qcom-rpm-proc\",\n\t\t.of_match_table = rpm_proc_of_match,\n\t},\n};\n\nstatic int __init rpm_proc_init(void)\n{\n\treturn platform_driver_register(&rpm_proc_driver);\n}\narch_initcall(rpm_proc_init);\n\nstatic void __exit rpm_proc_exit(void)\n{\n\tplatform_driver_unregister(&rpm_proc_driver);\n}\nmodule_exit(rpm_proc_exit);\n\nMODULE_DESCRIPTION(\"Qualcomm RPM processor/subsystem driver\");\nMODULE_AUTHOR(\"Stephan Gerhold <stephan@gerhold.net>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}