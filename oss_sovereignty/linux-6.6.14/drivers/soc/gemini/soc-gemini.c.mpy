{
  "module_name": "soc-gemini.c",
  "hash_id": "2f2d97d8f062324a9e0a42f7bd6da09d07d8ae73419891d78ff3942595499452",
  "original_prompt": "Ingested from linux-6.6.14/drivers/soc/gemini/soc-gemini.c",
  "human_readable_source": "\n \n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/mfd/syscon.h>\n#include <linux/regmap.h>\n#include <linux/of.h>\n\n#define GLOBAL_WORD_ID\t\t\t\t0x00\n#define GEMINI_GLOBAL_ARB1_CTRL\t\t\t0x2c\n#define GEMINI_ARB1_BURST_MASK\t\t\tGENMASK(21, 16)\n#define GEMINI_ARB1_BURST_SHIFT\t\t\t16\n \n#define GEMINI_ARB1_PRIO_MASK\t\t\tGENMASK(9, 0)\n#define GEMINI_ARB1_DMAC_HIGH_PRIO\t\tBIT(0)\n#define GEMINI_ARB1_IDE_HIGH_PRIO\t\tBIT(1)\n#define GEMINI_ARB1_RAID_HIGH_PRIO\t\tBIT(2)\n#define GEMINI_ARB1_SECURITY_HIGH_PRIO\t\tBIT(3)\n#define GEMINI_ARB1_GMAC0_HIGH_PRIO\t\tBIT(4)\n#define GEMINI_ARB1_GMAC1_HIGH_PRIO\t\tBIT(5)\n#define GEMINI_ARB1_USB0_HIGH_PRIO\t\tBIT(6)\n#define GEMINI_ARB1_USB1_HIGH_PRIO\t\tBIT(7)\n#define GEMINI_ARB1_PCI_HIGH_PRIO\t\tBIT(8)\n#define GEMINI_ARB1_TVE_HIGH_PRIO\t\tBIT(9)\n\n#define GEMINI_DEFAULT_BURST_SIZE\t\t0x20\n#define GEMINI_DEFAULT_PRIO\t\t\t(GEMINI_ARB1_GMAC0_HIGH_PRIO | \\\n\t\t\t\t\t\t GEMINI_ARB1_GMAC1_HIGH_PRIO)\n\nstatic int __init gemini_soc_init(void)\n{\n\tstruct regmap *map;\n\tu32 rev;\n\tu32 val;\n\tint ret;\n\n\t \n\tif (!of_machine_is_compatible(\"cortina,gemini\"))\n\t\treturn 0;\n\n\tmap = syscon_regmap_lookup_by_compatible(\"cortina,gemini-syscon\");\n\tif (IS_ERR(map))\n\t\treturn PTR_ERR(map);\n\tret = regmap_read(map, GLOBAL_WORD_ID, &rev);\n\tif (ret)\n\t\treturn ret;\n\n\tval = (GEMINI_DEFAULT_BURST_SIZE << GEMINI_ARB1_BURST_SHIFT) |\n\t\tGEMINI_DEFAULT_PRIO;\n\n\t \n\tregmap_update_bits(map,\n\t\t\t   GEMINI_GLOBAL_ARB1_CTRL,\n\t\t\t   GEMINI_ARB1_BURST_MASK | GEMINI_ARB1_PRIO_MASK,\n\t\t\t   val);\n\n\tpr_info(\"Gemini SoC %04x revision %02x, set arbitration %08x\\n\",\n\t\trev >> 8, rev & 0xff, val);\n\n\treturn 0;\n}\nsubsys_initcall(gemini_soc_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}