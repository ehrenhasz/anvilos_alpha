{
  "module_name": "zram_drv.h",
  "hash_id": "72acd4dcf56d5f1e975c4aa4c58c49ed0ff8f135f99da8d935e74dc3d4cdecbd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/block/zram/zram_drv.h",
  "human_readable_source": " \n\n#ifndef _ZRAM_DRV_H_\n#define _ZRAM_DRV_H_\n\n#include <linux/rwsem.h>\n#include <linux/zsmalloc.h>\n#include <linux/crypto.h>\n\n#include \"zcomp.h\"\n\n#define SECTORS_PER_PAGE_SHIFT\t(PAGE_SHIFT - SECTOR_SHIFT)\n#define SECTORS_PER_PAGE\t(1 << SECTORS_PER_PAGE_SHIFT)\n#define ZRAM_LOGICAL_BLOCK_SHIFT 12\n#define ZRAM_LOGICAL_BLOCK_SIZE\t(1 << ZRAM_LOGICAL_BLOCK_SHIFT)\n#define ZRAM_SECTOR_PER_LOGICAL_BLOCK\t\\\n\t(1 << (ZRAM_LOGICAL_BLOCK_SHIFT - SECTOR_SHIFT))\n\n\n \n#define ZRAM_FLAG_SHIFT (PAGE_SHIFT + 1)\n\n \n#define ZRAM_COMP_PRIORITY_MASK\t0x3\n\n \nenum zram_pageflags {\n\t \n\tZRAM_LOCK = ZRAM_FLAG_SHIFT,\n\tZRAM_SAME,\t \n\tZRAM_WB,\t \n\tZRAM_UNDER_WB,\t \n\tZRAM_HUGE,\t \n\tZRAM_IDLE,\t \n\tZRAM_INCOMPRESSIBLE,  \n\n\tZRAM_COMP_PRIORITY_BIT1,  \n\tZRAM_COMP_PRIORITY_BIT2,  \n\n\t__NR_ZRAM_PAGEFLAGS,\n};\n\n \n\n \nstruct zram_table_entry {\n\tunion {\n\t\tunsigned long handle;\n\t\tunsigned long element;\n\t};\n\tunsigned long flags;\n#ifdef CONFIG_ZRAM_MEMORY_TRACKING\n\tktime_t ac_time;\n#endif\n};\n\nstruct zram_stats {\n\tatomic64_t compr_data_size;\t \n\tatomic64_t failed_reads;\t \n\tatomic64_t failed_writes;\t \n\tatomic64_t notify_free;\t \n\tatomic64_t same_pages;\t\t \n\tatomic64_t huge_pages;\t\t \n\tatomic64_t huge_pages_since;\t \n\tatomic64_t pages_stored;\t \n\tatomic_long_t max_used_pages;\t \n\tatomic64_t writestall;\t\t \n\tatomic64_t miss_free;\t\t \n#ifdef\tCONFIG_ZRAM_WRITEBACK\n\tatomic64_t bd_count;\t\t \n\tatomic64_t bd_reads;\t\t \n\tatomic64_t bd_writes;\t\t \n#endif\n};\n\n#ifdef CONFIG_ZRAM_MULTI_COMP\n#define ZRAM_PRIMARY_COMP\t0U\n#define ZRAM_SECONDARY_COMP\t1U\n#define ZRAM_MAX_COMPS\t4U\n#else\n#define ZRAM_PRIMARY_COMP\t0U\n#define ZRAM_SECONDARY_COMP\t0U\n#define ZRAM_MAX_COMPS\t1U\n#endif\n\nstruct zram {\n\tstruct zram_table_entry *table;\n\tstruct zs_pool *mem_pool;\n\tstruct zcomp *comps[ZRAM_MAX_COMPS];\n\tstruct gendisk *disk;\n\t \n\tstruct rw_semaphore init_lock;\n\t \n\tunsigned long limit_pages;\n\n\tstruct zram_stats stats;\n\t \n\tu64 disksize;\t \n\tconst char *comp_algs[ZRAM_MAX_COMPS];\n\ts8 num_active_comps;\n\t \n\tbool claim;  \n#ifdef CONFIG_ZRAM_WRITEBACK\n\tstruct file *backing_dev;\n\tspinlock_t wb_limit_lock;\n\tbool wb_limit_enable;\n\tu64 bd_wb_limit;\n\tstruct block_device *bdev;\n\tunsigned long *bitmap;\n\tunsigned long nr_pages;\n#endif\n#ifdef CONFIG_ZRAM_MEMORY_TRACKING\n\tstruct dentry *debugfs_dir;\n#endif\n};\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}