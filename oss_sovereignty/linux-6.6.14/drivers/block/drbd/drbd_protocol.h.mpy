{
  "module_name": "drbd_protocol.h",
  "hash_id": "d8ebd9f5c942402ebeb79d1c64adf386dd9ad0a97c63608092a0d7f19f20eb3c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/block/drbd/drbd_protocol.h",
  "human_readable_source": " \n#ifndef __DRBD_PROTOCOL_H\n#define __DRBD_PROTOCOL_H\n\nenum drbd_packet {\n\t \n\tP_DATA\t\t      = 0x00,\n\tP_DATA_REPLY\t      = 0x01,  \n\tP_RS_DATA_REPLY\t      = 0x02,  \n\tP_BARRIER\t      = 0x03,\n\tP_BITMAP\t      = 0x04,\n\tP_BECOME_SYNC_TARGET  = 0x05,\n\tP_BECOME_SYNC_SOURCE  = 0x06,\n\tP_UNPLUG_REMOTE\t      = 0x07,  \n\tP_DATA_REQUEST\t      = 0x08,  \n\tP_RS_DATA_REQUEST     = 0x09,  \n\tP_SYNC_PARAM\t      = 0x0a,\n\tP_PROTOCOL\t      = 0x0b,\n\tP_UUIDS\t\t      = 0x0c,\n\tP_SIZES\t\t      = 0x0d,\n\tP_STATE\t\t      = 0x0e,\n\tP_SYNC_UUID\t      = 0x0f,\n\tP_AUTH_CHALLENGE      = 0x10,\n\tP_AUTH_RESPONSE\t      = 0x11,\n\tP_STATE_CHG_REQ\t      = 0x12,\n\n\t \n\tP_PING\t\t      = 0x13,\n\tP_PING_ACK\t      = 0x14,\n\tP_RECV_ACK\t      = 0x15,  \n\tP_WRITE_ACK\t      = 0x16,  \n\tP_RS_WRITE_ACK\t      = 0x17,  \n\tP_SUPERSEDED\t      = 0x18,  \n\tP_NEG_ACK\t      = 0x19,  \n\tP_NEG_DREPLY\t      = 0x1a,  \n\tP_NEG_RS_DREPLY\t      = 0x1b,  \n\tP_BARRIER_ACK\t      = 0x1c,\n\tP_STATE_CHG_REPLY     = 0x1d,\n\n\t \n\n\tP_OV_REQUEST\t      = 0x1e,  \n\tP_OV_REPLY\t      = 0x1f,\n\tP_OV_RESULT\t      = 0x20,  \n\tP_CSUM_RS_REQUEST     = 0x21,  \n\tP_RS_IS_IN_SYNC\t      = 0x22,  \n\tP_SYNC_PARAM89\t      = 0x23,  \n\tP_COMPRESSED_BITMAP   = 0x24,  \n\t \n\t \n\tP_DELAY_PROBE         = 0x27,  \n\tP_OUT_OF_SYNC         = 0x28,  \n\tP_RS_CANCEL           = 0x29,  \n\tP_CONN_ST_CHG_REQ     = 0x2a,  \n\tP_CONN_ST_CHG_REPLY   = 0x2b,  \n\tP_RETRY_WRITE\t      = 0x2c,  \n\tP_PROTOCOL_UPDATE     = 0x2d,  \n         \n\n\t \n\tP_TRIM                = 0x31,\n\n\t \n\tP_RS_THIN_REQ         = 0x32,  \n\tP_RS_DEALLOCATED      = 0x33,  \n\n\t \n\tP_WSAME               = 0x34,\n\n\t \n\tP_ZEROES              = 0x36,  \n\n\t \n\n\tP_MAY_IGNORE\t      = 0x100,  \n\tP_MAX_OPT_CMD\t      = 0x101,\n\n\t \n\n\tP_INITIAL_META\t      = 0xfff1,  \n\tP_INITIAL_DATA\t      = 0xfff2,  \n\n\tP_CONNECTION_FEATURES = 0xfffe\t \n};\n\n#ifndef __packed\n#define __packed __attribute__((packed))\n#endif\n\n \nstruct p_header80 {\n\tu32\t  magic;\n\tu16\t  command;\n\tu16\t  length;\t \n} __packed;\n\n \nstruct p_header95 {\n\tu16\t  magic;\t \n\tu16\t  command;\n\tu32\t  length;\n} __packed;\n\nstruct p_header100 {\n\tu32\t  magic;\n\tu16\t  volume;\n\tu16\t  command;\n\tu32\t  length;\n\tu32\t  pad;\n} __packed;\n\n \n#define DP_HARDBARRIER\t      1  \n#define DP_RW_SYNC\t      2  \n#define DP_MAY_SET_IN_SYNC    4\n#define DP_UNPLUG             8  \n#define DP_FUA               16  \n#define DP_FLUSH             32  \n#define DP_DISCARD           64  \n#define DP_SEND_RECEIVE_ACK 128  \n#define DP_SEND_WRITE_ACK   256  \n#define DP_WSAME            512  \n#define DP_ZEROES          1024  \n\n \n\nstruct p_data {\n\tu64\t    sector;     \n\tu64\t    block_id;   \n\tu32\t    seq_num;\n\tu32\t    dp_flags;\n} __packed;\n\nstruct p_trim {\n\tstruct p_data p_data;\n\tu32\t    size;\t \n} __packed;\n\nstruct p_wsame {\n\tstruct p_data p_data;\n\tu32           size;      \n} __packed;\n\n \nstruct p_block_ack {\n\tu64\t    sector;\n\tu64\t    block_id;\n\tu32\t    blksize;\n\tu32\t    seq_num;\n} __packed;\n\nstruct p_block_req {\n\tu64 sector;\n\tu64 block_id;\n\tu32 blksize;\n\tu32 pad;\t \n} __packed;\n\n \n\n \n#define DRBD_FF_TRIM 1\n\n \n#define DRBD_FF_THIN_RESYNC 2\n\n \n#define DRBD_FF_WSAME 4\n\n \n#define DRBD_FF_WZEROES 8\n\n\nstruct p_connection_features {\n\tu32 protocol_min;\n\tu32 feature_flags;\n\tu32 protocol_max;\n\n\t \n\n\tu32 _pad;\n\tu64 reserved[7];\n} __packed;\n\nstruct p_barrier {\n\tu32 barrier;\t \n\tu32 pad;\t \n} __packed;\n\nstruct p_barrier_ack {\n\tu32 barrier;\n\tu32 set_size;\n} __packed;\n\nstruct p_rs_param {\n\tu32 resync_rate;\n\n\t       \n\tchar verify_alg[];\n} __packed;\n\nstruct p_rs_param_89 {\n\tu32 resync_rate;\n\t \n\tchar verify_alg[SHARED_SECRET_MAX];\n\tchar csums_alg[SHARED_SECRET_MAX];\n} __packed;\n\nstruct p_rs_param_95 {\n\tu32 resync_rate;\n\tstruct_group(algs,\n\t\tchar verify_alg[SHARED_SECRET_MAX];\n\t\tchar csums_alg[SHARED_SECRET_MAX];\n\t);\n\tu32 c_plan_ahead;\n\tu32 c_delay_target;\n\tu32 c_fill_target;\n\tu32 c_max_rate;\n} __packed;\n\nenum drbd_conn_flags {\n\tCF_DISCARD_MY_DATA = 1,\n\tCF_DRY_RUN = 2,\n};\n\nstruct p_protocol {\n\tu32 protocol;\n\tu32 after_sb_0p;\n\tu32 after_sb_1p;\n\tu32 after_sb_2p;\n\tu32 conn_flags;\n\tu32 two_primaries;\n\n\t \n\tchar integrity_alg[];\n\n} __packed;\n\nstruct p_uuids {\n\tu64 uuid[UI_EXTENDED_SIZE];\n} __packed;\n\nstruct p_rs_uuid {\n\tu64\t    uuid;\n} __packed;\n\n \nstruct o_qlim {\n\t \n\tu32 physical_block_size;\n\n\t \n\tu32 logical_block_size;\n\n\t \n\n\t \n\tu32 alignment_offset;\n\tu32 io_min;\n\tu32 io_opt;\n\n\t \n\n\t \n\tu8 discard_enabled;\n\tu8 discard_zeroes_data;\n\tu8 write_same_capable;\n\tu8 _pad;\n} __packed;\n\nstruct p_sizes {\n\tu64\t    d_size;   \n\tu64\t    u_size;   \n\tu64\t    c_size;   \n\tu32\t    max_bio_size;   \n\tu16\t    queue_order_type;   \n\tu16\t    dds_flags;  \n\n\t \n\tstruct o_qlim qlim[];\n} __packed;\n\nstruct p_state {\n\tu32\t    state;\n} __packed;\n\nstruct p_req_state {\n\tu32\t    mask;\n\tu32\t    val;\n} __packed;\n\nstruct p_req_state_reply {\n\tu32\t    retcode;\n} __packed;\n\nstruct p_drbd06_param {\n\tu64\t  size;\n\tu32\t  state;\n\tu32\t  blksize;\n\tu32\t  protocol;\n\tu32\t  version;\n\tu32\t  gen_cnt[5];\n\tu32\t  bit_map_gen[5];\n} __packed;\n\nstruct p_block_desc {\n\tu64 sector;\n\tu32 blksize;\n\tu32 pad;\t \n} __packed;\n\n \nenum drbd_bitmap_code {\n\t \n\tRLE_VLI_Bits = 2,\n};\n\nstruct p_compressed_bm {\n\t \n\tu8 encoding;\n\n\tu8 code[];\n} __packed;\n\nstruct p_delay_probe93 {\n\tu32     seq_num;  \n\tu32     offset;   \n} __packed;\n\n \n#define DRBD_SOCKET_BUFFER_SIZE 4096\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}