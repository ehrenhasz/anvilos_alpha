{
  "module_name": "rnbd-srv.h",
  "hash_id": "8c410c9033f710660537a3c74743d4c6bdb807624cb10e71441c2fb984dda294",
  "original_prompt": "Ingested from linux-6.6.14/drivers/block/rnbd/rnbd-srv.h",
  "human_readable_source": " \n \n#ifndef RNBD_SRV_H\n#define RNBD_SRV_H\n\n#include <linux/types.h>\n#include <linux/idr.h>\n#include <linux/kref.h>\n\n#include <rtrs.h>\n#include \"rnbd-proto.h\"\n#include \"rnbd-log.h\"\n\nstruct rnbd_srv_session {\n\t \n\tstruct list_head        list;\n\tstruct rtrs_srv_sess\t*rtrs;\n\tchar\t\t\tsessname[NAME_MAX];\n\tint\t\t\tqueue_depth;\n\n\tstruct xarray\t\tindex_idr;\n\tstruct mutex\t\tlock;\n\tu8\t\t\tver;\n};\n\nstruct rnbd_srv_dev {\n\t \n\tstruct list_head                list;\n\tstruct kobject                  dev_kobj;\n\tstruct kobject                  *dev_sessions_kobj;\n\tstruct kref                     kref;\n\tchar\t\t\t\tname[NAME_MAX];\n\t \n\tstruct list_head\t\tsess_dev_list;\n\tstruct mutex\t\t\tlock;\n\tint\t\t\t\topen_write_cnt;\n};\n\n \nstruct rnbd_srv_sess_dev {\n\t \n\tstruct list_head\t\tdev_list;\n\tstruct block_device\t\t*bdev;\n\tstruct rnbd_srv_session\t\t*sess;\n\tstruct rnbd_srv_dev\t\t*dev;\n\tstruct kobject                  kobj;\n\tu32                             device_id;\n\tbool\t\t\t\tkeep_id;\n\tbool\t\t\t\treadonly;\n\tstruct kref\t\t\tkref;\n\tstruct completion               *destroy_comp;\n\tchar\t\t\t\tpathname[NAME_MAX];\n\tenum rnbd_access_mode\t\taccess_mode;\n};\n\nvoid rnbd_srv_sess_dev_force_close(struct rnbd_srv_sess_dev *sess_dev,\n\t\t\t\t   struct kobj_attribute *attr);\n \n\nint rnbd_srv_create_dev_sysfs(struct rnbd_srv_dev *dev,\n\t\t\t      struct block_device *bdev);\nvoid rnbd_srv_destroy_dev_sysfs(struct rnbd_srv_dev *dev);\nint rnbd_srv_create_dev_session_sysfs(struct rnbd_srv_sess_dev *sess_dev);\nvoid rnbd_srv_destroy_dev_session_sysfs(struct rnbd_srv_sess_dev *sess_dev);\nint rnbd_srv_create_sysfs_files(void);\nvoid rnbd_srv_destroy_sysfs_files(void);\nvoid rnbd_destroy_sess_dev(struct rnbd_srv_sess_dev *sess_dev, bool keep_id);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}