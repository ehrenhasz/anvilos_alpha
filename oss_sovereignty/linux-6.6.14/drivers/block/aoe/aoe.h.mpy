{
  "module_name": "aoe.h",
  "hash_id": "227cd554721679499cf34067df1b40caaf9903d66785047628297607e5215e0e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/block/aoe/aoe.h",
  "human_readable_source": " \n#include <linux/blk-mq.h>\n\n#define VERSION \"85\"\n#define AOE_MAJOR 152\n#define DEVICE_NAME \"aoe\"\n\n \n#ifndef AOE_PARTITIONS\n#define AOE_PARTITIONS (16)\n#endif\n\n#define WHITESPACE \" \\t\\v\\f\\n,\"\n\nenum {\n\tAOECMD_ATA,\n\tAOECMD_CFG,\n\tAOECMD_VEND_MIN = 0xf0,\n\n\tAOEFL_RSP = (1<<3),\n\tAOEFL_ERR = (1<<2),\n\n\tAOEAFL_EXT = (1<<6),\n\tAOEAFL_DEV = (1<<4),\n\tAOEAFL_ASYNC = (1<<1),\n\tAOEAFL_WRITE = (1<<0),\n\n\tAOECCMD_READ = 0,\n\tAOECCMD_TEST,\n\tAOECCMD_PTEST,\n\tAOECCMD_SET,\n\tAOECCMD_FSET,\n\n\tAOE_HVER = 0x10,\n};\n\nstruct aoe_hdr {\n\tunsigned char dst[6];\n\tunsigned char src[6];\n\t__be16 type;\n\tunsigned char verfl;\n\tunsigned char err;\n\t__be16 major;\n\tunsigned char minor;\n\tunsigned char cmd;\n\t__be32 tag;\n};\n\nstruct aoe_atahdr {\n\tunsigned char aflags;\n\tunsigned char errfeat;\n\tunsigned char scnt;\n\tunsigned char cmdstat;\n\tunsigned char lba0;\n\tunsigned char lba1;\n\tunsigned char lba2;\n\tunsigned char lba3;\n\tunsigned char lba4;\n\tunsigned char lba5;\n\tunsigned char res[2];\n};\n\nstruct aoe_cfghdr {\n\t__be16 bufcnt;\n\t__be16 fwver;\n\tunsigned char scnt;\n\tunsigned char aoeccmd;\n\tunsigned char cslen[2];\n};\n\nenum {\n\tDEVFL_UP = 1,\t \n\tDEVFL_TKILL = (1<<1),\t \n\tDEVFL_EXT = (1<<2),\t \n\tDEVFL_GDALLOC = (1<<3),\t \n\tDEVFL_GD_NOW = (1<<4),\t \n\tDEVFL_KICKME = (1<<5),\t \n\tDEVFL_NEWSIZE = (1<<6),\t \n\tDEVFL_FREEING = (1<<7),\t \n\tDEVFL_FREED = (1<<8),\t \n};\n\nenum {\n\tDEFAULTBCNT = 2 * 512,\t \n\tMIN_BUFS = 16,\n\tNTARGETS = 4,\n\tNAOEIFS = 8,\n\tNSKBPOOLMAX = 256,\n\tNFACTIVE = 61,\n\n\tTIMERTICK = HZ / 10,\n\tRTTSCALE = 8,\n\tRTTDSCALE = 3,\n\tRTTAVG_INIT = USEC_PER_SEC / 4 << RTTSCALE,\n\tRTTDEV_INIT = RTTAVG_INIT / 4,\n\n\tHARD_SCORN_SECS = 10,\t \n\tMAX_TAINT = 1000,\t \n};\n\nstruct aoe_req {\n\tunsigned long nr_bios;\n};\n\nstruct buf {\n\tulong nframesout;\n\tstruct bio *bio;\n\tstruct bvec_iter iter;\n\tstruct request *rq;\n};\n\nenum frame_flags {\n\tFFL_PROBE = 1,\n};\n\nstruct frame {\n\tstruct list_head head;\n\tu32 tag;\n\tktime_t sent;\t\t\t \n\tulong waited;\n\tulong waited_total;\n\tstruct aoetgt *t;\t\t \n\tstruct sk_buff *skb;\t\t \n\tstruct sk_buff *r_skb;\t\t \n\tstruct buf *buf;\n\tstruct bvec_iter iter;\n\tchar flags;\n};\n\nstruct aoeif {\n\tstruct net_device *nd;\n\tulong lost;\n\tint bcnt;\n};\n\nstruct aoetgt {\n\tunsigned char addr[6];\n\tushort nframes;\t\t \n\tstruct aoedev *d;\t\t\t \n\tstruct list_head ffree;\t\t\t \n\tstruct aoeif ifs[NAOEIFS];\n\tstruct aoeif *ifp;\t \n\tushort nout;\t\t \n\tushort maxout;\t\t \n\tushort next_cwnd;\t \n\tushort ssthresh;\t \n\tulong falloc;\t\t \n\tint taint;\t\t \n\tint minbcnt;\n\tint wpkts, rpkts;\n\tchar nout_probes;\n};\n\nstruct aoedev {\n\tstruct aoedev *next;\n\tulong sysminor;\n\tulong aoemajor;\n\tu32 rttavg;\t\t \n\tu32 rttdev;\t\t \n\tu16 aoeminor;\n\tu16 flags;\n\tu16 nopen;\t\t \n\tu16 fw_ver;\t\t \n\tu16 lasttag;\t\t \n\tu16 useme;\n\tulong ref;\n\tstruct work_struct work; \n\tstruct gendisk *gd;\n\tstruct dentry *debugfs;\n\tstruct request_queue *blkq;\n\tstruct list_head rq_list;\n\tstruct blk_mq_tag_set tag_set;\n\tstruct hd_geometry geo;\n\tsector_t ssize;\n\tstruct timer_list timer;\n\tspinlock_t lock;\n\tstruct sk_buff_head skbpool;\n\tmempool_t *bufpool;\t \n\tstruct {\t\t \n\t\tstruct buf *buf;\n\t\tstruct bio *nxbio;\n\t\tstruct request *rq;\n\t} ip;\n\tulong maxbcnt;\n\tstruct list_head factive[NFACTIVE];\t \n\tstruct list_head rexmitq;  \n\tstruct aoetgt **targets;\n\tulong ntargets;\t\t \n\tstruct aoetgt **tgt;\t \n\tulong kicked;\n\tchar ident[512];\n};\n\n \nstruct ktstate {\n\tstruct completion rendez;\n\tstruct task_struct *task;\n\twait_queue_head_t *waitq;\n\tint (*fn) (int);\n\tchar name[12];\n\tspinlock_t *lock;\n\tint id;\n\tint active;\n};\n\nint aoeblk_init(void);\nvoid aoeblk_exit(void);\nvoid aoeblk_gdalloc(void *);\nvoid aoedisk_rm_debugfs(struct aoedev *d);\n\nint aoechr_init(void);\nvoid aoechr_exit(void);\nvoid aoechr_error(char *);\n\nvoid aoecmd_work(struct aoedev *d);\nvoid aoecmd_cfg(ushort aoemajor, unsigned char aoeminor);\nstruct sk_buff *aoecmd_ata_rsp(struct sk_buff *);\nvoid aoecmd_cfg_rsp(struct sk_buff *);\nvoid aoecmd_sleepwork(struct work_struct *);\nvoid aoecmd_wreset(struct aoetgt *t);\nvoid aoecmd_cleanslate(struct aoedev *);\nvoid aoecmd_exit(void);\nint aoecmd_init(void);\nstruct sk_buff *aoecmd_ata_id(struct aoedev *);\nvoid aoe_freetframe(struct frame *);\nvoid aoe_flush_iocq(void);\nvoid aoe_flush_iocq_by_index(int);\nvoid aoe_end_request(struct aoedev *, struct request *, int);\nint aoe_ktstart(struct ktstate *k);\nvoid aoe_ktstop(struct ktstate *k);\n\nint aoedev_init(void);\nvoid aoedev_exit(void);\nstruct aoedev *aoedev_by_aoeaddr(ulong maj, int min, int do_alloc);\nvoid aoedev_downdev(struct aoedev *d);\nint aoedev_flush(const char __user *str, size_t size);\nvoid aoe_failbuf(struct aoedev *, struct buf *);\nvoid aoedev_put(struct aoedev *);\n\nint aoenet_init(void);\nvoid aoenet_exit(void);\nvoid aoenet_xmit(struct sk_buff_head *);\nint is_aoe_netif(struct net_device *ifp);\nint set_aoe_iflist(const char __user *str, size_t size);\n\nextern struct workqueue_struct *aoe_wq;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}