{
  "module_name": "aoemain.c",
  "hash_id": "b5ea48315b98b06f6b6082a1564907b2c0ec30d8e7d7ddc8e473ce493c994072",
  "original_prompt": "Ingested from linux-6.6.14/drivers/block/aoe/aoemain.c",
  "human_readable_source": " \n \n\n#include <linux/hdreg.h>\n#include <linux/blkdev.h>\n#include <linux/module.h>\n#include <linux/skbuff.h>\n#include \"aoe.h\"\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Sam Hopkins <sah@coraid.com>\");\nMODULE_DESCRIPTION(\"AoE block/char driver for 2.6.2 and newer 2.6 kernels\");\nMODULE_VERSION(VERSION);\n\nstatic struct timer_list timer;\nstruct workqueue_struct *aoe_wq;\n\nstatic void discover_timer(struct timer_list *t)\n{\n\tmod_timer(t, jiffies + HZ * 60);  \n\n\taoecmd_cfg(0xffff, 0xff);\n}\n\nstatic void __exit\naoe_exit(void)\n{\n\tdel_timer_sync(&timer);\n\n\taoenet_exit();\n\tunregister_blkdev(AOE_MAJOR, DEVICE_NAME);\n\taoecmd_exit();\n\taoechr_exit();\n\taoedev_exit();\n\taoeblk_exit();\t\t \n\tdestroy_workqueue(aoe_wq);\n}\n\nstatic int __init\naoe_init(void)\n{\n\tint ret;\n\n\taoe_wq = alloc_workqueue(\"aoe_wq\", 0, 0);\n\tif (!aoe_wq)\n\t\treturn -ENOMEM;\n\n\tret = aoedev_init();\n\tif (ret)\n\t\tgoto dev_fail;\n\tret = aoechr_init();\n\tif (ret)\n\t\tgoto chr_fail;\n\tret = aoeblk_init();\n\tif (ret)\n\t\tgoto blk_fail;\n\tret = aoenet_init();\n\tif (ret)\n\t\tgoto net_fail;\n\tret = aoecmd_init();\n\tif (ret)\n\t\tgoto cmd_fail;\n\tret = register_blkdev(AOE_MAJOR, DEVICE_NAME);\n\tif (ret < 0) {\n\t\tprintk(KERN_ERR \"aoe: can't register major\\n\");\n\t\tgoto blkreg_fail;\n\t}\n\tprintk(KERN_INFO \"aoe: AoE v%s initialised.\\n\", VERSION);\n\n\ttimer_setup(&timer, discover_timer, 0);\n\tdiscover_timer(&timer);\n\treturn 0;\n blkreg_fail:\n\taoecmd_exit();\n cmd_fail:\n\taoenet_exit();\n net_fail:\n\taoeblk_exit();\n blk_fail:\n\taoechr_exit();\n chr_fail:\n\taoedev_exit();\n dev_fail:\n\tdestroy_workqueue(aoe_wq);\n\n\tprintk(KERN_INFO \"aoe: initialisation failure.\\n\");\n\treturn ret;\n}\n\nmodule_init(aoe_init);\nmodule_exit(aoe_exit);\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}