{
  "module_name": "hpilo.h",
  "hash_id": "37dfed795ea665a70cdfe8e5b44ad4058a7f90484638a2440756343cd4caf5b2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/misc/hpilo.h",
  "human_readable_source": " \n \n#ifndef __HPILO_H\n#define __HPILO_H\n\n#define ILO_NAME \"hpilo\"\n\n \n#define PCI_REV_ID_NECHES\t7\n\n \n#define MAX_CCB\t       24\n \n#define MIN_CCB\t\t8\n \n#define MAX_ILO_DEV\t1\n \n#define MAX_OPEN\t(MAX_CCB * MAX_ILO_DEV)\n \n#define MAX_WAIT_TIME\t10000\n \n#define WAIT_TIME\t10\n \n#define MAX_WAIT\t(MAX_WAIT_TIME / WAIT_TIME)\n\n \nstruct ilo_hwinfo {\n\t \n\tchar __iomem *mmio_vaddr;\n\n\t \n\tchar __iomem *db_vaddr;\n\n\t \n\tchar __iomem *ram_vaddr;\n\n\t \n\tstruct ccb_data *ccb_alloc[MAX_CCB];\n\n\tstruct pci_dev *ilo_dev;\n\n\t \n\tspinlock_t open_lock;\n\tspinlock_t alloc_lock;\n\tspinlock_t fifo_lock;\n\n\tstruct cdev cdev;\n};\n\n \n#define DB_IRQ\t\t0xB2\n \n#define DB_OUT\t\t0xD4\n \n#define DB_RESET\t26\n\n \n#define ILOSW_CCB_SZ\t64\n#define ILOHW_CCB_SZ \t128\nstruct ccb {\n\tunion {\n\t\tchar *send_fifobar;\n\t\tu64 send_fifobar_pa;\n\t} ccb_u1;\n\tunion {\n\t\tchar *send_desc;\n\t\tu64 send_desc_pa;\n\t} ccb_u2;\n\tu64 send_ctrl;\n\n\tunion {\n\t\tchar *recv_fifobar;\n\t\tu64 recv_fifobar_pa;\n\t} ccb_u3;\n\tunion {\n\t\tchar *recv_desc;\n\t\tu64 recv_desc_pa;\n\t} ccb_u4;\n\tu64 recv_ctrl;\n\n\tunion {\n\t\tchar __iomem *db_base;\n\t\tu64 padding5;\n\t} ccb_u5;\n\n\tu64 channel;\n\n\t \n};\n\n \n#define SENDQ\t\t1\n#define RECVQ \t\t2\n#define NR_QENTRY    \t4\n#define L2_QENTRY_SZ \t12\n\n \n#define CTRL_BITPOS_L2SZ             0\n#define CTRL_BITPOS_FIFOINDEXMASK    4\n#define CTRL_BITPOS_DESCLIMIT        18\n#define CTRL_BITPOS_A                30\n#define CTRL_BITPOS_G                31\n\n \n#define L2_DB_SIZE\t\t14\n#define ONE_DB_SIZE\t\t(1 << L2_DB_SIZE)\n\n \nstruct ccb_data {\n\t \n\tstruct ccb  driver_ccb;\n\n\t \n\tstruct ccb  ilo_ccb;\n\n\t \n\tstruct ccb __iomem *mapped_ccb;\n\n\t \n\tvoid       *dma_va;\n\tdma_addr_t  dma_pa;\n\tsize_t      dma_size;\n\n\t \n\tstruct ilo_hwinfo *ilo_hw;\n\n\t \n\twait_queue_head_t ccb_waitq;\n\n\t \n\tint\t    ccb_cnt;\n\n\t \n\tint\t    ccb_excl;\n};\n\n \n#define ILO_START_ALIGN\t4096\n#define ILO_CACHE_SZ \t 128\nstruct fifo {\n\tu64 nrents;\t \n\tu64 imask;   \n\tu64 merge;\t \n\tu64 reset;\t \n\tu8  pad_0[ILO_CACHE_SZ - (sizeof(u64) * 4)];\n\n\tu64 head;\n\tu8  pad_1[ILO_CACHE_SZ - (sizeof(u64))];\n\n\tu64 tail;\n\tu8  pad_2[ILO_CACHE_SZ - (sizeof(u64))];\n\n\tu64 fifobar[];\n};\n\n \n#define FIFOHANDLESIZE (sizeof(struct fifo))\n#define FIFOBARTOHANDLE(_fifo) \\\n\t((struct fifo *)(((char *)(_fifo)) - FIFOHANDLESIZE))\n\n \n#define ENTRY_BITPOS_QWORDS      0\n \n#define ENTRY_BITPOS_DESCRIPTOR  10\n \n#define ENTRY_BITPOS_C           22\n \n#define ENTRY_BITPOS_O           23\n\n#define ENTRY_BITS_QWORDS        10\n#define ENTRY_BITS_DESCRIPTOR    12\n#define ENTRY_BITS_C             1\n#define ENTRY_BITS_O             1\n#define ENTRY_BITS_TOTAL\t\\\n\t(ENTRY_BITS_C + ENTRY_BITS_O + \\\n\t ENTRY_BITS_QWORDS + ENTRY_BITS_DESCRIPTOR)\n\n \n#define ENTRY_MASK ((1 << ENTRY_BITS_TOTAL) - 1)\n#define ENTRY_MASK_C (((1 << ENTRY_BITS_C) - 1) << ENTRY_BITPOS_C)\n#define ENTRY_MASK_O (((1 << ENTRY_BITS_O) - 1) << ENTRY_BITPOS_O)\n#define ENTRY_MASK_QWORDS \\\n\t(((1 << ENTRY_BITS_QWORDS) - 1) << ENTRY_BITPOS_QWORDS)\n#define ENTRY_MASK_DESCRIPTOR \\\n\t(((1 << ENTRY_BITS_DESCRIPTOR) - 1) << ENTRY_BITPOS_DESCRIPTOR)\n\n#define ENTRY_MASK_NOSTATE (ENTRY_MASK >> (ENTRY_BITS_C + ENTRY_BITS_O))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}