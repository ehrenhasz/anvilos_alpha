{
  "module_name": "core.h",
  "hash_id": "15a1d3ab15116775d9f30d18e5d17398fbdaf18138ae34b2c5ba44aa48937d72",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mtd/spi-nor/core.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_MTD_SPI_NOR_INTERNAL_H\n#define __LINUX_MTD_SPI_NOR_INTERNAL_H\n\n#include \"sfdp.h\"\n\n#define SPI_NOR_MAX_ID_LEN\t6\n\n \n#define SPI_NOR_READID_OP(naddr, ndummy, buf, len)\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_RDID, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_ADDR(naddr, 0, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_DUMMY(ndummy, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_IN(len, buf, 0))\n\n#define SPI_NOR_WREN_OP\t\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_WREN, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_WRDI_OP\t\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_WRDI, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_RDSR_OP(buf)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_RDSR, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_IN(1, buf, 0))\n\n#define SPI_NOR_WRSR_OP(buf, len)\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_WRSR, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_OUT(len, buf, 0))\n\n#define SPI_NOR_RDSR2_OP(buf)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_RDSR2, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_OUT(1, buf, 0))\n\n#define SPI_NOR_WRSR2_OP(buf)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_WRSR2, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_OUT(1, buf, 0))\n\n#define SPI_NOR_RDCR_OP(buf)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_RDCR, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_IN(1, buf, 0))\n\n#define SPI_NOR_EN4B_EX4B_OP(enable)\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(enable ? SPINOR_OP_EN4B : SPINOR_OP_EX4B, 0),\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_BRWR_OP(buf)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_BRWR, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_OUT(1, buf, 0))\n\n#define SPI_NOR_GBULK_OP\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_GBULK, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_CHIP_ERASE_OP\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_CHIP_ERASE, 0),\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_SECTOR_ERASE_OP(opcode, addr_nbytes, addr)\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(opcode, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_ADDR(addr_nbytes, addr, 0),\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPI_NOR_READ_OP(opcode)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(opcode, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_ADDR(3, 0, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_DUMMY(1, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_IN(2, NULL, 0))\n\n#define SPI_NOR_PP_OP(opcode)\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(opcode, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_ADDR(3, 0, 0),\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_DATA_OUT(2, NULL, 0))\n\n#define SPINOR_SRSTEN_OP\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_SRSTEN, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n#define SPINOR_SRST_OP\t\t\t\t\t\t\t\\\n\tSPI_MEM_OP(SPI_MEM_OP_CMD(SPINOR_OP_SRST, 0),\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DUMMY,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_ADDR,\t\t\t\t\t\\\n\t\t   SPI_MEM_OP_NO_DATA)\n\n \nenum spi_nor_option_flags {\n\tSNOR_F_HAS_SR_TB\t= BIT(0),\n\tSNOR_F_NO_OP_CHIP_ERASE\t= BIT(1),\n\tSNOR_F_BROKEN_RESET\t= BIT(2),\n\tSNOR_F_4B_OPCODES\t= BIT(3),\n\tSNOR_F_HAS_4BAIT\t= BIT(4),\n\tSNOR_F_HAS_LOCK\t\t= BIT(5),\n\tSNOR_F_HAS_16BIT_SR\t= BIT(6),\n\tSNOR_F_NO_READ_CR\t= BIT(7),\n\tSNOR_F_HAS_SR_TB_BIT6\t= BIT(8),\n\tSNOR_F_HAS_4BIT_BP      = BIT(9),\n\tSNOR_F_HAS_SR_BP3_BIT6  = BIT(10),\n\tSNOR_F_IO_MODE_EN_VOLATILE = BIT(11),\n\tSNOR_F_SOFT_RESET\t= BIT(12),\n\tSNOR_F_SWP_IS_VOLATILE\t= BIT(13),\n\tSNOR_F_RWW\t\t= BIT(14),\n\tSNOR_F_ECC\t\t= BIT(15),\n\tSNOR_F_NO_WP\t\t= BIT(16),\n};\n\nstruct spi_nor_read_command {\n\tu8\t\t\tnum_mode_clocks;\n\tu8\t\t\tnum_wait_states;\n\tu8\t\t\topcode;\n\tenum spi_nor_protocol\tproto;\n};\n\nstruct spi_nor_pp_command {\n\tu8\t\t\topcode;\n\tenum spi_nor_protocol\tproto;\n};\n\nenum spi_nor_read_command_index {\n\tSNOR_CMD_READ,\n\tSNOR_CMD_READ_FAST,\n\tSNOR_CMD_READ_1_1_1_DTR,\n\n\t \n\tSNOR_CMD_READ_1_1_2,\n\tSNOR_CMD_READ_1_2_2,\n\tSNOR_CMD_READ_2_2_2,\n\tSNOR_CMD_READ_1_2_2_DTR,\n\n\t \n\tSNOR_CMD_READ_1_1_4,\n\tSNOR_CMD_READ_1_4_4,\n\tSNOR_CMD_READ_4_4_4,\n\tSNOR_CMD_READ_1_4_4_DTR,\n\n\t \n\tSNOR_CMD_READ_1_1_8,\n\tSNOR_CMD_READ_1_8_8,\n\tSNOR_CMD_READ_8_8_8,\n\tSNOR_CMD_READ_1_8_8_DTR,\n\tSNOR_CMD_READ_8_8_8_DTR,\n\n\tSNOR_CMD_READ_MAX\n};\n\nenum spi_nor_pp_command_index {\n\tSNOR_CMD_PP,\n\n\t \n\tSNOR_CMD_PP_1_1_4,\n\tSNOR_CMD_PP_1_4_4,\n\tSNOR_CMD_PP_4_4_4,\n\n\t \n\tSNOR_CMD_PP_1_1_8,\n\tSNOR_CMD_PP_1_8_8,\n\tSNOR_CMD_PP_8_8_8,\n\tSNOR_CMD_PP_8_8_8_DTR,\n\n\tSNOR_CMD_PP_MAX\n};\n\n \nstruct spi_nor_erase_type {\n\tu32\tsize;\n\tu32\tsize_shift;\n\tu32\tsize_mask;\n\tu8\topcode;\n\tu8\tidx;\n};\n\n \nstruct spi_nor_erase_command {\n\tstruct list_head\tlist;\n\tu32\t\t\tcount;\n\tu32\t\t\tsize;\n\tu8\t\t\topcode;\n};\n\n \nstruct spi_nor_erase_region {\n\tu64\t\toffset;\n\tu64\t\tsize;\n};\n\n#define SNOR_ERASE_TYPE_MAX\t4\n#define SNOR_ERASE_TYPE_MASK\tGENMASK_ULL(SNOR_ERASE_TYPE_MAX - 1, 0)\n\n#define SNOR_LAST_REGION\tBIT(4)\n#define SNOR_OVERLAID_REGION\tBIT(5)\n\n#define SNOR_ERASE_FLAGS_MAX\t6\n#define SNOR_ERASE_FLAGS_MASK\tGENMASK_ULL(SNOR_ERASE_FLAGS_MAX - 1, 0)\n\n \nstruct spi_nor_erase_map {\n\tstruct spi_nor_erase_region\t*regions;\n\tstruct spi_nor_erase_region\tuniform_region;\n\tstruct spi_nor_erase_type\terase_type[SNOR_ERASE_TYPE_MAX];\n\tu8\t\t\t\tuniform_erase_type;\n};\n\n \nstruct spi_nor_locking_ops {\n\tint (*lock)(struct spi_nor *nor, loff_t ofs, uint64_t len);\n\tint (*unlock)(struct spi_nor *nor, loff_t ofs, uint64_t len);\n\tint (*is_locked)(struct spi_nor *nor, loff_t ofs, uint64_t len);\n};\n\n \nstruct spi_nor_otp_organization {\n\tsize_t len;\n\tloff_t base;\n\tloff_t offset;\n\tunsigned int n_regions;\n};\n\n \nstruct spi_nor_otp_ops {\n\tint (*read)(struct spi_nor *nor, loff_t addr, size_t len, u8 *buf);\n\tint (*write)(struct spi_nor *nor, loff_t addr, size_t len,\n\t\t     const u8 *buf);\n\tint (*lock)(struct spi_nor *nor, unsigned int region);\n\tint (*erase)(struct spi_nor *nor, loff_t addr);\n\tint (*is_locked)(struct spi_nor *nor, unsigned int region);\n};\n\n \nstruct spi_nor_otp {\n\tconst struct spi_nor_otp_organization *org;\n\tconst struct spi_nor_otp_ops *ops;\n};\n\n \nstruct spi_nor_flash_parameter {\n\tu64\t\t\t\tbank_size;\n\tu64\t\t\t\tsize;\n\tu32\t\t\t\twritesize;\n\tu32\t\t\t\tpage_size;\n\tu8\t\t\t\taddr_nbytes;\n\tu8\t\t\t\taddr_mode_nbytes;\n\tu8\t\t\t\trdsr_dummy;\n\tu8\t\t\t\trdsr_addr_nbytes;\n\tu8\t\t\t\tn_dice;\n\tu32\t\t\t\t*vreg_offset;\n\n\tstruct spi_nor_hwcaps\t\thwcaps;\n\tstruct spi_nor_read_command\treads[SNOR_CMD_READ_MAX];\n\tstruct spi_nor_pp_command\tpage_programs[SNOR_CMD_PP_MAX];\n\n\tstruct spi_nor_erase_map        erase_map;\n\tstruct spi_nor_otp\t\totp;\n\n\tint (*set_octal_dtr)(struct spi_nor *nor, bool enable);\n\tint (*quad_enable)(struct spi_nor *nor);\n\tint (*set_4byte_addr_mode)(struct spi_nor *nor, bool enable);\n\tu32 (*convert_addr)(struct spi_nor *nor, u32 addr);\n\tint (*setup)(struct spi_nor *nor, const struct spi_nor_hwcaps *hwcaps);\n\tint (*ready)(struct spi_nor *nor);\n\n\tconst struct spi_nor_locking_ops *locking_ops;\n\tvoid *priv;\n};\n\n \nstruct spi_nor_fixups {\n\tvoid (*default_init)(struct spi_nor *nor);\n\tint (*post_bfpt)(struct spi_nor *nor,\n\t\t\t const struct sfdp_parameter_header *bfpt_header,\n\t\t\t const struct sfdp_bfpt *bfpt);\n\tint (*post_sfdp)(struct spi_nor *nor);\n\tint (*late_init)(struct spi_nor *nor);\n};\n\n \nstruct flash_info {\n\tchar *name;\n\tu8 id[SPI_NOR_MAX_ID_LEN];\n\tu8 id_len;\n\tunsigned sector_size;\n\tu16 n_sectors;\n\tu16 page_size;\n\tu8 n_banks;\n\tu8 addr_nbytes;\n\n\tbool parse_sfdp;\n\tu16 flags;\n#define SPI_NOR_HAS_LOCK\t\tBIT(0)\n#define SPI_NOR_HAS_TB\t\t\tBIT(1)\n#define SPI_NOR_TB_SR_BIT6\t\tBIT(2)\n#define SPI_NOR_4BIT_BP\t\t\tBIT(3)\n#define SPI_NOR_BP3_SR_BIT6\t\tBIT(4)\n#define SPI_NOR_SWP_IS_VOLATILE\t\tBIT(5)\n#define SPI_NOR_NO_ERASE\t\tBIT(6)\n#define NO_CHIP_ERASE\t\t\tBIT(7)\n#define SPI_NOR_NO_FR\t\t\tBIT(8)\n#define SPI_NOR_QUAD_PP\t\t\tBIT(9)\n#define SPI_NOR_RWW\t\t\tBIT(10)\n\n\tu8 no_sfdp_flags;\n#define SPI_NOR_SKIP_SFDP\t\tBIT(0)\n#define SECT_4K\t\t\t\tBIT(1)\n#define SPI_NOR_DUAL_READ\t\tBIT(3)\n#define SPI_NOR_QUAD_READ\t\tBIT(4)\n#define SPI_NOR_OCTAL_READ\t\tBIT(5)\n#define SPI_NOR_OCTAL_DTR_READ\t\tBIT(6)\n#define SPI_NOR_OCTAL_DTR_PP\t\tBIT(7)\n\n\tu8 fixup_flags;\n#define SPI_NOR_4B_OPCODES\t\tBIT(0)\n#define SPI_NOR_IO_MODE_EN_VOLATILE\tBIT(1)\n\n\tu8 mfr_flags;\n\n\tconst struct spi_nor_otp_organization otp_org;\n\tconst struct spi_nor_fixups *fixups;\n};\n\n#define SPI_NOR_ID_2ITEMS(_id) ((_id) >> 8) & 0xff, (_id) & 0xff\n#define SPI_NOR_ID_3ITEMS(_id) ((_id) >> 16) & 0xff, SPI_NOR_ID_2ITEMS(_id)\n\n#define SPI_NOR_ID(_jedec_id, _ext_id)\t\t\t\t\t\\\n\t.id = { SPI_NOR_ID_3ITEMS(_jedec_id), SPI_NOR_ID_2ITEMS(_ext_id) }, \\\n\t.id_len = !(_jedec_id) ? 0 : (3 + ((_ext_id) ? 2 : 0))\n\n#define SPI_NOR_ID6(_jedec_id, _ext_id)\t\t\t\t\t\\\n\t.id = { SPI_NOR_ID_3ITEMS(_jedec_id), SPI_NOR_ID_3ITEMS(_ext_id) }, \\\n\t.id_len = 6\n\n#define SPI_NOR_GEOMETRY(_sector_size, _n_sectors, _n_banks)\t\t\\\n\t.sector_size = (_sector_size),\t\t\t\t\t\\\n\t.n_sectors = (_n_sectors),\t\t\t\t\t\\\n\t.page_size = 256,\t\t\t\t\t\t\\\n\t.n_banks = (_n_banks)\n\n \n#define INFO(_jedec_id, _ext_id, _sector_size, _n_sectors)\t\t\\\n\tSPI_NOR_ID((_jedec_id), (_ext_id)),\t\t\t\t\\\n\tSPI_NOR_GEOMETRY((_sector_size), (_n_sectors), 1),\n\n#define INFOB(_jedec_id, _ext_id, _sector_size, _n_sectors, _n_banks)\t\\\n\tSPI_NOR_ID((_jedec_id), (_ext_id)),\t\t\t\t\\\n\tSPI_NOR_GEOMETRY((_sector_size), (_n_sectors), (_n_banks)),\n\n#define INFO6(_jedec_id, _ext_id, _sector_size, _n_sectors)\t\t\\\n\tSPI_NOR_ID6((_jedec_id), (_ext_id)),\t\t\t\t\\\n\tSPI_NOR_GEOMETRY((_sector_size), (_n_sectors), 1),\n\n#define CAT25_INFO(_sector_size, _n_sectors, _page_size, _addr_nbytes)\t\\\n\t\t.sector_size = (_sector_size),\t\t\t\t\\\n\t\t.n_sectors = (_n_sectors),\t\t\t\t\\\n\t\t.page_size = (_page_size),\t\t\t\t\\\n\t\t.n_banks = 1,\t\t\t\t\t\t\\\n\t\t.addr_nbytes = (_addr_nbytes),\t\t\t\t\\\n\t\t.flags = SPI_NOR_NO_ERASE | SPI_NOR_NO_FR,\t\t\\\n\n#define OTP_INFO(_len, _n_regions, _base, _offset)\t\t\t\\\n\t\t.otp_org = {\t\t\t\t\t\t\\\n\t\t\t.len = (_len),\t\t\t\t\t\\\n\t\t\t.base = (_base),\t\t\t\t\\\n\t\t\t.offset = (_offset),\t\t\t\t\\\n\t\t\t.n_regions = (_n_regions),\t\t\t\\\n\t\t},\n\n#define PARSE_SFDP\t\t\t\t\t\t\t\\\n\t.parse_sfdp = true,\t\t\t\t\t\t\\\n\n#define FLAGS(_flags)\t\t\t\t\t\t\t\\\n\t\t.flags = (_flags),\t\t\t\t\t\\\n\n#define NO_SFDP_FLAGS(_no_sfdp_flags)\t\t\t\t\t\\\n\t\t.no_sfdp_flags = (_no_sfdp_flags),\t\t\t\\\n\n#define FIXUP_FLAGS(_fixup_flags)\t\t\t\t\t\\\n\t\t.fixup_flags = (_fixup_flags),\t\t\t\t\\\n\n#define MFR_FLAGS(_mfr_flags)\t\t\t\t\t\t\\\n\t\t.mfr_flags = (_mfr_flags),\t\t\t\t\\\n\n \nstruct spi_nor_manufacturer {\n\tconst char *name;\n\tconst struct flash_info *parts;\n\tunsigned int nparts;\n\tconst struct spi_nor_fixups *fixups;\n};\n\n \nstruct sfdp {\n\tsize_t\tnum_dwords;\n\tu32\t*dwords;\n};\n\n \nextern const struct spi_nor_manufacturer spi_nor_atmel;\nextern const struct spi_nor_manufacturer spi_nor_catalyst;\nextern const struct spi_nor_manufacturer spi_nor_eon;\nextern const struct spi_nor_manufacturer spi_nor_esmt;\nextern const struct spi_nor_manufacturer spi_nor_everspin;\nextern const struct spi_nor_manufacturer spi_nor_fujitsu;\nextern const struct spi_nor_manufacturer spi_nor_gigadevice;\nextern const struct spi_nor_manufacturer spi_nor_intel;\nextern const struct spi_nor_manufacturer spi_nor_issi;\nextern const struct spi_nor_manufacturer spi_nor_macronix;\nextern const struct spi_nor_manufacturer spi_nor_micron;\nextern const struct spi_nor_manufacturer spi_nor_st;\nextern const struct spi_nor_manufacturer spi_nor_spansion;\nextern const struct spi_nor_manufacturer spi_nor_sst;\nextern const struct spi_nor_manufacturer spi_nor_winbond;\nextern const struct spi_nor_manufacturer spi_nor_xilinx;\nextern const struct spi_nor_manufacturer spi_nor_xmc;\n\nextern const struct attribute_group *spi_nor_sysfs_groups[];\n\nvoid spi_nor_spimem_setup_op(const struct spi_nor *nor,\n\t\t\t     struct spi_mem_op *op,\n\t\t\t     const enum spi_nor_protocol proto);\nint spi_nor_write_enable(struct spi_nor *nor);\nint spi_nor_write_disable(struct spi_nor *nor);\nint spi_nor_set_4byte_addr_mode_en4b_ex4b(struct spi_nor *nor, bool enable);\nint spi_nor_set_4byte_addr_mode_wren_en4b_ex4b(struct spi_nor *nor,\n\t\t\t\t\t       bool enable);\nint spi_nor_set_4byte_addr_mode_brwr(struct spi_nor *nor, bool enable);\nint spi_nor_set_4byte_addr_mode(struct spi_nor *nor, bool enable);\nint spi_nor_wait_till_ready(struct spi_nor *nor);\nint spi_nor_global_block_unlock(struct spi_nor *nor);\nint spi_nor_prep_and_lock(struct spi_nor *nor);\nvoid spi_nor_unlock_and_unprep(struct spi_nor *nor);\nint spi_nor_sr1_bit6_quad_enable(struct spi_nor *nor);\nint spi_nor_sr2_bit1_quad_enable(struct spi_nor *nor);\nint spi_nor_sr2_bit7_quad_enable(struct spi_nor *nor);\nint spi_nor_read_id(struct spi_nor *nor, u8 naddr, u8 ndummy, u8 *id,\n\t\t    enum spi_nor_protocol reg_proto);\nint spi_nor_read_sr(struct spi_nor *nor, u8 *sr);\nint spi_nor_sr_ready(struct spi_nor *nor);\nint spi_nor_read_cr(struct spi_nor *nor, u8 *cr);\nint spi_nor_write_sr(struct spi_nor *nor, const u8 *sr, size_t len);\nint spi_nor_write_sr_and_check(struct spi_nor *nor, u8 sr1);\nint spi_nor_write_16bit_cr_and_check(struct spi_nor *nor, u8 cr);\n\nssize_t spi_nor_read_data(struct spi_nor *nor, loff_t from, size_t len,\n\t\t\t  u8 *buf);\nssize_t spi_nor_write_data(struct spi_nor *nor, loff_t to, size_t len,\n\t\t\t   const u8 *buf);\nint spi_nor_read_any_reg(struct spi_nor *nor, struct spi_mem_op *op,\n\t\t\t enum spi_nor_protocol proto);\nint spi_nor_write_any_volatile_reg(struct spi_nor *nor, struct spi_mem_op *op,\n\t\t\t\t   enum spi_nor_protocol proto);\nint spi_nor_erase_sector(struct spi_nor *nor, u32 addr);\n\nint spi_nor_otp_read_secr(struct spi_nor *nor, loff_t addr, size_t len, u8 *buf);\nint spi_nor_otp_write_secr(struct spi_nor *nor, loff_t addr, size_t len,\n\t\t\t   const u8 *buf);\nint spi_nor_otp_erase_secr(struct spi_nor *nor, loff_t addr);\nint spi_nor_otp_lock_sr2(struct spi_nor *nor, unsigned int region);\nint spi_nor_otp_is_locked_sr2(struct spi_nor *nor, unsigned int region);\n\nint spi_nor_hwcaps_read2cmd(u32 hwcaps);\nint spi_nor_hwcaps_pp2cmd(u32 hwcaps);\nu8 spi_nor_convert_3to4_read(u8 opcode);\nvoid spi_nor_set_read_settings(struct spi_nor_read_command *read,\n\t\t\t       u8 num_mode_clocks,\n\t\t\t       u8 num_wait_states,\n\t\t\t       u8 opcode,\n\t\t\t       enum spi_nor_protocol proto);\nvoid spi_nor_set_pp_settings(struct spi_nor_pp_command *pp, u8 opcode,\n\t\t\t     enum spi_nor_protocol proto);\n\nvoid spi_nor_set_erase_type(struct spi_nor_erase_type *erase, u32 size,\n\t\t\t    u8 opcode);\nvoid spi_nor_mask_erase_type(struct spi_nor_erase_type *erase);\nstruct spi_nor_erase_region *\nspi_nor_region_next(struct spi_nor_erase_region *region);\nvoid spi_nor_init_uniform_erase_map(struct spi_nor_erase_map *map,\n\t\t\t\t    u8 erase_mask, u64 flash_size);\n\nint spi_nor_post_bfpt_fixups(struct spi_nor *nor,\n\t\t\t     const struct sfdp_parameter_header *bfpt_header,\n\t\t\t     const struct sfdp_bfpt *bfpt);\n\nvoid spi_nor_init_default_locking_ops(struct spi_nor *nor);\nvoid spi_nor_try_unlock_all(struct spi_nor *nor);\nvoid spi_nor_set_mtd_locking_ops(struct spi_nor *nor);\nvoid spi_nor_set_mtd_otp_ops(struct spi_nor *nor);\n\nint spi_nor_controller_ops_read_reg(struct spi_nor *nor, u8 opcode,\n\t\t\t\t    u8 *buf, size_t len);\nint spi_nor_controller_ops_write_reg(struct spi_nor *nor, u8 opcode,\n\t\t\t\t     const u8 *buf, size_t len);\n\nint spi_nor_check_sfdp_signature(struct spi_nor *nor);\nint spi_nor_parse_sfdp(struct spi_nor *nor);\n\nstatic inline struct spi_nor *mtd_to_spi_nor(struct mtd_info *mtd)\n{\n\treturn container_of(mtd, struct spi_nor, mtd);\n}\n\n#ifdef CONFIG_DEBUG_FS\nvoid spi_nor_debugfs_register(struct spi_nor *nor);\nvoid spi_nor_debugfs_shutdown(void);\n#else\nstatic inline void spi_nor_debugfs_register(struct spi_nor *nor) {}\nstatic inline void spi_nor_debugfs_shutdown(void) {}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}