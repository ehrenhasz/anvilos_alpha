{
  "module_name": "issi.c",
  "hash_id": "0fe457d822c3bcb5806df1e73fa85768ceb4e2cb6920a1a6480d191fb2b66c31",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mtd/spi-nor/issi.c",
  "human_readable_source": "\n \n\n#include <linux/mtd/spi-nor.h>\n\n#include \"core.h\"\n\nstatic int\nis25lp256_post_bfpt_fixups(struct spi_nor *nor,\n\t\t\t   const struct sfdp_parameter_header *bfpt_header,\n\t\t\t   const struct sfdp_bfpt *bfpt)\n{\n\t \n\tif ((bfpt->dwords[SFDP_DWORD(1)] & BFPT_DWORD1_ADDRESS_BYTES_MASK) ==\n\t\tBFPT_DWORD1_ADDRESS_BYTES_3_ONLY)\n\t\tnor->params->addr_nbytes = 4;\n\n\treturn 0;\n}\n\nstatic const struct spi_nor_fixups is25lp256_fixups = {\n\t.post_bfpt = is25lp256_post_bfpt_fixups,\n};\n\nstatic int pm25lv_nor_late_init(struct spi_nor *nor)\n{\n\tstruct spi_nor_erase_map *map = &nor->params->erase_map;\n\tint i;\n\n\t \n\tfor (i = 0; i < SNOR_ERASE_TYPE_MAX; i++)\n\t\tif (map->erase_type[i].size == 4096)\n\t\t\tmap->erase_type[i].opcode = SPINOR_OP_BE_4K_PMC;\n\n\treturn 0;\n}\n\nstatic const struct spi_nor_fixups pm25lv_nor_fixups = {\n\t.late_init = pm25lv_nor_late_init,\n};\n\nstatic const struct flash_info issi_nor_parts[] = {\n\t \n\t{ \"is25cd512\",  INFO(0x7f9d20, 0, 32 * 1024,   2)\n\t\tNO_SFDP_FLAGS(SECT_4K) },\n\t{ \"is25lq040b\", INFO(0x9d4013, 0, 64 * 1024,   8)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25lp016d\", INFO(0x9d6015, 0, 64 * 1024,  32)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25lp080d\", INFO(0x9d6014, 0, 64 * 1024,  16)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25lp032\",  INFO(0x9d6016, 0, 64 * 1024,  64)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ) },\n\t{ \"is25lp064\",  INFO(0x9d6017, 0, 64 * 1024, 128)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ) },\n\t{ \"is25lp128\",  INFO(0x9d6018, 0, 64 * 1024, 256)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ) },\n\t{ \"is25lp256\",  INFO(0x9d6019, 0, 64 * 1024, 512)\n\t\tPARSE_SFDP\n\t\tFIXUP_FLAGS(SPI_NOR_4B_OPCODES)\n\t\t.fixups = &is25lp256_fixups },\n\t{ \"is25wp032\",  INFO(0x9d7016, 0, 64 * 1024,  64)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25wp064\",  INFO(0x9d7017, 0, 64 * 1024, 128)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25wp128\",  INFO(0x9d7018, 0, 64 * 1024, 256)\n\t\tNO_SFDP_FLAGS(SECT_4K | SPI_NOR_DUAL_READ | SPI_NOR_QUAD_READ) },\n\t{ \"is25wp256\", INFO(0x9d7019, 0, 0, 0)\n\t\tPARSE_SFDP\n\t\tFIXUP_FLAGS(SPI_NOR_4B_OPCODES)\n\t\tFLAGS(SPI_NOR_QUAD_PP)\n\t\t.fixups = &is25lp256_fixups },\n\n\t \n\t{ \"pm25lv512\",   INFO(0,        0, 32 * 1024,    2)\n\t\tNO_SFDP_FLAGS(SECT_4K)\n\t\t.fixups = &pm25lv_nor_fixups\n\t},\n\t{ \"pm25lv010\",   INFO(0,        0, 32 * 1024,    4)\n\t\tNO_SFDP_FLAGS(SECT_4K)\n\t\t.fixups = &pm25lv_nor_fixups\n\t},\n\t{ \"pm25lq032\",   INFO(0x7f9d46, 0, 64 * 1024,   64)\n\t\tNO_SFDP_FLAGS(SECT_4K) },\n};\n\nstatic void issi_nor_default_init(struct spi_nor *nor)\n{\n\tnor->params->quad_enable = spi_nor_sr1_bit6_quad_enable;\n}\n\nstatic const struct spi_nor_fixups issi_fixups = {\n\t.default_init = issi_nor_default_init,\n};\n\nconst struct spi_nor_manufacturer spi_nor_issi = {\n\t.name = \"issi\",\n\t.parts = issi_nor_parts,\n\t.nparts = ARRAY_SIZE(issi_nor_parts),\n\t.fixups = &issi_fixups,\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}