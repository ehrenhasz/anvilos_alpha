{
  "module_name": "docg3.h",
  "hash_id": "f5979ef2e0f1f917a5cf37205847c8b5e81499e6d5ccf97e51d2c19900a356b5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mtd/devices/docg3.h",
  "human_readable_source": " \n \n\n#ifndef _MTD_DOCG3_H\n#define _MTD_DOCG3_H\n\n#include <linux/mtd/mtd.h>\n\n \n#define DOC_IOSPACE_IPL\t\t\t0x0000\n#define DOC_IOSPACE_DATA\t\t0x0800\n#define DOC_IOSPACE_SIZE\t\t0x2000\n\n \n\n#define DOC_ADDR_PAGE_MASK\t\t0x3f\n#define DOC_ADDR_BLOCK_SHIFT\t\t6\n#define DOC_LAYOUT_NBPLANES\t\t2\n#define DOC_LAYOUT_PAGES_PER_BLOCK\t64\n#define DOC_LAYOUT_PAGE_SIZE\t\t512\n#define DOC_LAYOUT_OOB_SIZE\t\t16\n#define DOC_LAYOUT_WEAR_SIZE\t\t8\n#define DOC_LAYOUT_PAGE_OOB_SIZE\t\t\t\t\\\n\t(DOC_LAYOUT_PAGE_SIZE + DOC_LAYOUT_OOB_SIZE)\n#define DOC_LAYOUT_WEAR_OFFSET\t\t(DOC_LAYOUT_PAGE_OOB_SIZE * 2)\n#define DOC_LAYOUT_BLOCK_SIZE\t\t\t\t\t\\\n\t(DOC_LAYOUT_PAGES_PER_BLOCK * DOC_LAYOUT_PAGE_SIZE)\n\n \n#define DOC_ECC_BCH_M\t\t\t14\n#define DOC_ECC_BCH_T\t\t\t4\n#define DOC_ECC_BCH_PRIMPOLY\t\t0x4443\n#define DOC_ECC_BCH_SIZE\t\t7\n#define DOC_ECC_BCH_COVERED_BYTES\t\t\t\t\\\n\t(DOC_LAYOUT_PAGE_SIZE + DOC_LAYOUT_OOB_PAGEINFO_SZ +\t\\\n\t DOC_LAYOUT_OOB_HAMMING_SZ)\n#define DOC_ECC_BCH_TOTAL_BYTES\t\t\t\t\t\\\n\t(DOC_ECC_BCH_COVERED_BYTES + DOC_LAYOUT_OOB_BCH_SZ)\n\n \n#define DOC_LAYOUT_BLOCK_BBT\t\t0\n#define DOC_LAYOUT_BLOCK_OTP\t\t0\n#define DOC_LAYOUT_BLOCK_FIRST_DATA\t6\n\n#define DOC_LAYOUT_PAGE_BBT\t\t4\n\n \n#define DOC_LAYOUT_OOB_PAGEINFO_OFS\t0\n#define DOC_LAYOUT_OOB_HAMMING_OFS\t7\n#define DOC_LAYOUT_OOB_BCH_OFS\t\t8\n#define DOC_LAYOUT_OOB_UNUSED_OFS\t15\n#define DOC_LAYOUT_OOB_PAGEINFO_SZ\t7\n#define DOC_LAYOUT_OOB_HAMMING_SZ\t1\n#define DOC_LAYOUT_OOB_BCH_SZ\t\t7\n#define DOC_LAYOUT_OOB_UNUSED_SZ\t1\n\n\n#define DOC_CHIPID_G3\t\t\t0x200\n#define DOC_ERASE_MARK\t\t\t0xaa\n#define DOC_MAX_NBFLOORS\t\t4\n \n#define DOC_CHIPID\t\t\t0x1000\n#define DOC_TEST\t\t\t0x1004\n#define DOC_BUSLOCK\t\t\t0x1006\n#define DOC_ENDIANCONTROL\t\t0x1008\n#define DOC_DEVICESELECT\t\t0x100a\n#define DOC_ASICMODE\t\t\t0x100c\n#define DOC_CONFIGURATION\t\t0x100e\n#define DOC_INTERRUPTCONTROL\t\t0x1010\n#define DOC_READADDRESS\t\t\t0x101a\n#define DOC_DATAEND\t\t\t0x101e\n#define DOC_INTERRUPTSTATUS\t\t0x1020\n\n#define DOC_FLASHSEQUENCE\t\t0x1032\n#define DOC_FLASHCOMMAND\t\t0x1034\n#define DOC_FLASHADDRESS\t\t0x1036\n#define DOC_FLASHCONTROL\t\t0x1038\n#define DOC_NOP\t\t\t\t0x103e\n\n#define DOC_ECCCONF0\t\t\t0x1040\n#define DOC_ECCCONF1\t\t\t0x1042\n#define DOC_ECCPRESET\t\t\t0x1044\n#define DOC_HAMMINGPARITY\t\t0x1046\n#define DOC_BCH_HW_ECC(idx)\t\t(0x1048 + idx)\n\n#define DOC_PROTECTION\t\t\t0x1056\n#define DOC_DPS0_KEY\t\t\t0x105c\n#define DOC_DPS1_KEY\t\t\t0x105e\n#define DOC_DPS0_ADDRLOW\t\t0x1060\n#define DOC_DPS0_ADDRHIGH\t\t0x1062\n#define DOC_DPS1_ADDRLOW\t\t0x1064\n#define DOC_DPS1_ADDRHIGH\t\t0x1066\n#define DOC_DPS0_STATUS\t\t\t0x106c\n#define DOC_DPS1_STATUS\t\t\t0x106e\n\n#define DOC_ASICMODECONFIRM\t\t0x1072\n#define DOC_CHIPID_INV\t\t\t0x1074\n#define DOC_POWERMODE\t\t\t0x107c\n\n \n#define DOC_SEQ_RESET\t\t\t0x00\n#define DOC_SEQ_PAGE_SIZE_532\t\t0x03\n#define DOC_SEQ_SET_FASTMODE\t\t0x05\n#define DOC_SEQ_SET_RELIABLEMODE\t0x09\n#define DOC_SEQ_READ\t\t\t0x12\n#define DOC_SEQ_SET_PLANE1\t\t0x0e\n#define DOC_SEQ_SET_PLANE2\t\t0x10\n#define DOC_SEQ_PAGE_SETUP\t\t0x1d\n#define DOC_SEQ_ERASE\t\t\t0x27\n#define DOC_SEQ_PLANES_STATUS\t\t0x31\n\n \n#define DOC_CMD_READ_PLANE1\t\t0x00\n#define DOC_CMD_SET_ADDR_READ\t\t0x05\n#define DOC_CMD_READ_ALL_PLANES\t\t0x30\n#define DOC_CMD_READ_PLANE2\t\t0x50\n#define DOC_CMD_READ_FLASH\t\t0xe0\n#define DOC_CMD_PAGE_SIZE_532\t\t0x3c\n\n#define DOC_CMD_PROG_BLOCK_ADDR\t\t0x60\n#define DOC_CMD_PROG_CYCLE1\t\t0x80\n#define DOC_CMD_PROG_CYCLE2\t\t0x10\n#define DOC_CMD_PROG_CYCLE3\t\t0x11\n#define DOC_CMD_ERASECYCLE2\t\t0xd0\n#define DOC_CMD_READ_STATUS\t\t0x70\n#define DOC_CMD_PLANES_STATUS\t\t0x71\n\n#define DOC_CMD_RELIABLE_MODE\t\t0x22\n#define DOC_CMD_FAST_MODE\t\t0xa2\n\n#define DOC_CMD_RESET\t\t\t0xff\n\n \n#define DOC_CTRL_VIOLATION\t\t0x20\n#define DOC_CTRL_CE\t\t\t0x10\n#define DOC_CTRL_UNKNOWN_BITS\t\t0x08\n#define DOC_CTRL_PROTECTION_ERROR\t0x04\n#define DOC_CTRL_SEQUENCE_ERROR\t\t0x02\n#define DOC_CTRL_FLASHREADY\t\t0x01\n\n \n#define DOC_ASICMODE_RESET\t\t0x00\n#define DOC_ASICMODE_NORMAL\t\t0x01\n#define DOC_ASICMODE_POWERDOWN\t\t0x02\n#define DOC_ASICMODE_MDWREN\t\t0x04\n#define DOC_ASICMODE_BDETCT_RESET\t0x08\n#define DOC_ASICMODE_RSTIN_RESET\t0x10\n#define DOC_ASICMODE_RAM_WE\t\t0x20\n\n \n#define DOC_ECCCONF0_WRITE_MODE\t\t0x0000\n#define DOC_ECCCONF0_READ_MODE\t\t0x8000\n#define DOC_ECCCONF0_AUTO_ECC_ENABLE\t0x4000\n#define DOC_ECCCONF0_HAMMING_ENABLE\t0x1000\n#define DOC_ECCCONF0_BCH_ENABLE\t\t0x0800\n#define DOC_ECCCONF0_DATA_BYTES_MASK\t0x07ff\n\n \n#define DOC_ECCCONF1_BCH_SYNDROM_ERR\t0x80\n#define DOC_ECCCONF1_UNKOWN1\t\t0x40\n#define DOC_ECCCONF1_PAGE_IS_WRITTEN\t0x20\n#define DOC_ECCCONF1_UNKOWN3\t\t0x10\n#define DOC_ECCCONF1_HAMMING_BITS_MASK\t0x0f\n\n \n#define DOC_PROTECT_FOUNDRY_OTP_LOCK\t0x01\n#define DOC_PROTECT_CUSTOMER_OTP_LOCK\t0x02\n#define DOC_PROTECT_LOCK_INPUT\t\t0x04\n#define DOC_PROTECT_STICKY_LOCK\t\t0x08\n#define DOC_PROTECT_PROTECTION_ENABLED\t0x10\n#define DOC_PROTECT_IPL_DOWNLOAD_LOCK\t0x20\n#define DOC_PROTECT_PROTECTION_ERROR\t0x80\n\n \n#define DOC_DPS_OTP_PROTECTED\t\t0x01\n#define DOC_DPS_READ_PROTECTED\t\t0x02\n#define DOC_DPS_WRITE_PROTECTED\t\t0x04\n#define DOC_DPS_HW_LOCK_ENABLED\t\t0x08\n#define DOC_DPS_KEY_OK\t\t\t0x80\n\n \n#define DOC_CONF_IF_CFG\t\t\t0x80\n#define DOC_CONF_MAX_ID_MASK\t\t0x30\n#define DOC_CONF_VCCQ_3V\t\t0x01\n\n \n#define DOC_READADDR_INC\t\t0x8000\n#define DOC_READADDR_ONE_BYTE\t\t0x4000\n#define DOC_READADDR_ADDR_MASK\t\t0x1fff\n\n \n#define DOC_POWERDOWN_READY\t\t0x80\n\n \n#define DOC_PLANES_STATUS_FAIL\t\t0x01\n#define DOC_PLANES_STATUS_PLANE0_KO\t0x02\n#define DOC_PLANES_STATUS_PLANE1_KO\t0x04\n\n \n#define DOC_LAYOUT_DPS_KEY_LENGTH\t8\n\n \nstruct docg3_cascade {\n\tstruct mtd_info *floors[DOC_MAX_NBFLOORS];\n\tvoid __iomem *base;\n\tstruct bch_control *bch;\n\tstruct mutex lock;\n};\n\n \nstruct docg3 {\n\tstruct device *dev;\n\tstruct docg3_cascade *cascade;\n\tunsigned int device_id:4;\n\tunsigned int if_cfg:1;\n\tunsigned int reliable:2;\n\tint max_block;\n\tu8 *bbt;\n\tloff_t oob_write_ofs;\n\tint oob_autoecc;\n\tu8 oob_write_buf[DOC_LAYOUT_OOB_SIZE];\n};\n\n#define doc_err(fmt, arg...) dev_err(docg3->dev, (fmt), ## arg)\n#define doc_info(fmt, arg...) dev_info(docg3->dev, (fmt), ## arg)\n#define doc_dbg(fmt, arg...) dev_dbg(docg3->dev, (fmt), ## arg)\n#define doc_vdbg(fmt, arg...) dev_vdbg(docg3->dev, (fmt), ## arg)\n#endif\n\n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM docg3\n\n#if !defined(_MTD_DOCG3_TRACE) || defined(TRACE_HEADER_MULTI_READ)\n#define _MTD_DOCG3_TRACE\n\n#include <linux/tracepoint.h>\n\nTRACE_EVENT(docg3_io,\n\t    TP_PROTO(int op, int width, u16 reg, int val),\n\t    TP_ARGS(op, width, reg, val),\n\t    TP_STRUCT__entry(\n\t\t    __field(int, op)\n\t\t    __field(unsigned char, width)\n\t\t    __field(u16, reg)\n\t\t    __field(int, val)),\n\t    TP_fast_assign(\n\t\t    __entry->op = op;\n\t\t    __entry->width = width;\n\t\t    __entry->reg = reg;\n\t\t    __entry->val = val;),\n\t    TP_printk(\"docg3: %s%02d reg=%04x, val=%04x\",\n\t\t      __entry->op ? \"write\" : \"read\", __entry->width,\n\t\t      __entry->reg, __entry->val)\n\t);\n#endif\n\n \n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE docg3\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}