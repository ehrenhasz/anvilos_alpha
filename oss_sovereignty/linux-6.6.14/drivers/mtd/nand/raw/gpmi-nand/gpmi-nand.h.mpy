{
  "module_name": "gpmi-nand.h",
  "hash_id": "c7ad8a5203c0480f3fd59cfcd98a5f5d36cb744b7815ec43178ece86aa52a5e4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.h",
  "human_readable_source": " \n \n#ifndef __DRIVERS_MTD_NAND_GPMI_NAND_H\n#define __DRIVERS_MTD_NAND_GPMI_NAND_H\n\n#include <linux/mtd/rawnand.h>\n#include <linux/platform_device.h>\n#include <linux/dma-mapping.h>\n#include <linux/dmaengine.h>\n\n#define GPMI_CLK_MAX 5  \nstruct resources {\n\tvoid __iomem  *gpmi_regs;\n\tvoid __iomem  *bch_regs;\n\tunsigned int  dma_low_channel;\n\tunsigned int  dma_high_channel;\n\tstruct clk    *clock[GPMI_CLK_MAX];\n};\n\n \nstruct bch_geometry {\n\tunsigned int  gf_len;\n\tunsigned int  ecc_strength;\n\tunsigned int  page_size;\n\tunsigned int  metadata_size;\n\tunsigned int  ecc0_chunk_size;\n\tunsigned int  eccn_chunk_size;\n\tunsigned int  ecc_chunk_count;\n\tunsigned int  payload_size;\n\tunsigned int  auxiliary_size;\n\tunsigned int  auxiliary_status_offset;\n\tunsigned int  block_mark_byte_offset;\n\tunsigned int  block_mark_bit_offset;\n\tunsigned int  ecc_for_meta;  \n};\n\n \nstruct boot_rom_geometry {\n\tunsigned int  stride_size_in_pages;\n\tunsigned int  search_area_stride_exponent;\n};\n\nenum gpmi_type {\n\tIS_MX23,\n\tIS_MX28,\n\tIS_MX6Q,\n\tIS_MX6SX,\n\tIS_MX7D,\n};\n\nstruct gpmi_devdata {\n\tenum gpmi_type type;\n\tint bch_max_ecc_strength;\n\tint max_chain_delay;  \n\tconst char * const *clks;\n\tconst int clks_count;\n};\n\n \nstruct gpmi_nfc_hardware_timing {\n\tbool must_apply_timings;\n\tunsigned long int clk_rate;\n\tu32 timing0;\n\tu32 timing1;\n\tu32 ctrl1n;\n};\n\n#define GPMI_MAX_TRANSFERS\t8\n\nstruct gpmi_transfer {\n\tu8 cmdbuf[8];\n\tstruct scatterlist sgl;\n\tenum dma_data_direction direction;\n};\n\nstruct gpmi_nand_data {\n\t \n\tconst struct gpmi_devdata *devdata;\n\n\t \n\tstruct device\t\t*dev;\n\tstruct platform_device\t*pdev;\n\n\t \n\tstruct resources\tresources;\n\n\t \n\tstruct gpmi_nfc_hardware_timing hw;\n\n\t \n\tstruct bch_geometry\tbch_geometry;\n\tstruct completion\tbch_done;\n\n\t \n\tbool\t\t\tswap_block_mark;\n\tstruct boot_rom_geometry rom_geometry;\n\n\t \n\tstruct nand_controller\tbase;\n\tstruct nand_chip\tnand;\n\n\tstruct gpmi_transfer\ttransfers[GPMI_MAX_TRANSFERS];\n\tint\t\t\tntransfers;\n\n\tbool\t\t\tbch;\n\tuint32_t\t\tbch_flashlayout0;\n\tuint32_t\t\tbch_flashlayout1;\n\n\tchar\t\t\t*data_buffer_dma;\n\n\tvoid\t\t\t*auxiliary_virt;\n\tdma_addr_t\t\tauxiliary_phys;\n\n\tvoid\t\t\t*raw_buffer;\n\n\t \n#define DMA_CHANS\t\t8\n\tstruct dma_chan\t\t*dma_chans[DMA_CHANS];\n\tstruct completion\tdma_done;\n};\n\n \n#define STATUS_GOOD\t\t0x00\n#define STATUS_ERASED\t\t0xff\n#define STATUS_UNCORRECTABLE\t0xfe\n\n \n#define GPMI_IS_MX23(x)\t\t((x)->devdata->type == IS_MX23)\n#define GPMI_IS_MX28(x)\t\t((x)->devdata->type == IS_MX28)\n#define GPMI_IS_MX6Q(x)\t\t((x)->devdata->type == IS_MX6Q)\n#define GPMI_IS_MX6SX(x)\t((x)->devdata->type == IS_MX6SX)\n#define GPMI_IS_MX7D(x)\t\t((x)->devdata->type == IS_MX7D)\n\n#define GPMI_IS_MX6(x)\t\t(GPMI_IS_MX6Q(x) || GPMI_IS_MX6SX(x) || \\\n\t\t\t\t GPMI_IS_MX7D(x))\n#define GPMI_IS_MXS(x)\t\t(GPMI_IS_MX23(x) || GPMI_IS_MX28(x))\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}