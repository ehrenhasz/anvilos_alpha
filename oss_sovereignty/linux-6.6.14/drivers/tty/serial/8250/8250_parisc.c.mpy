{
  "module_name": "8250_parisc.c",
  "hash_id": "3d06789240ee072456870596e2ad33551cfb7a2676c1ed2b0dc7e131db46c2a3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/tty/serial/8250/8250_parisc.c",
  "human_readable_source": "\n \n\n#include <linux/errno.h>\n#include <linux/init.h>\n#include <linux/interrupt.h>\n#include <linux/ioport.h>\n#include <linux/module.h>\n#include <linux/serial_core.h>\n#include <linux/signal.h>\n#include <linux/types.h>\n\n#include <asm/hardware.h>\n#include <asm/parisc-device.h>\n#include <asm/io.h>\n\n#include \"8250.h\"\n\nstatic int __init serial_init_chip(struct parisc_device *dev)\n{\n\tstruct uart_8250_port uart;\n\tunsigned long address;\n\tint err;\n\n#if defined(CONFIG_64BIT) && defined(CONFIG_IOSAPIC)\n\tif (!dev->irq && (dev->id.sversion == 0xad))\n\t\tdev->irq = iosapic_serial_irq(dev);\n#endif\n\n\tif (!dev->irq) {\n\t\t \n\t\tif (parisc_parent(dev)->id.hw_type != HPHW_IOA)\n\t\t\tdev_info(&dev->dev,\n\t\t\t\t\"Serial: device 0x%llx not configured.\\n\"\n\t\t\t\t\"Enable support for Wax, Lasi, Asp or Dino.\\n\",\n\t\t\t\t(unsigned long long)dev->hpa.start);\n\t\treturn -ENODEV;\n\t}\n\n\taddress = dev->hpa.start;\n\tif (dev->id.sversion != 0x8d)\n\t\taddress += 0x800;\n\n\tmemset(&uart, 0, sizeof(uart));\n\tuart.port.iotype\t= UPIO_MEM;\n\t \n\tuart.port.uartclk\t= (dev->id.sversion != 0xad) ?\n\t\t\t\t\t7272727 : 1843200;\n\tuart.port.mapbase\t= address;\n\tuart.port.membase\t= ioremap(address, 16);\n\tif (!uart.port.membase) {\n\t\tdev_warn(&dev->dev, \"Failed to map memory\\n\");\n\t\treturn -ENOMEM;\n\t}\n\tuart.port.irq\t= dev->irq;\n\tuart.port.flags\t= UPF_BOOT_AUTOCONF;\n\tuart.port.dev\t= &dev->dev;\n\n\terr = serial8250_register_8250_port(&uart);\n\tif (err < 0) {\n\t\tdev_warn(&dev->dev,\n\t\t\t\"serial8250_register_8250_port returned error %d\\n\",\n\t\t\terr);\n\t\tiounmap(uart.port.membase);\n\t\treturn err;\n\t}\n\n\treturn 0;\n}\n\nstatic const struct parisc_device_id serial_tbl[] __initconst = {\n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, HVERSION_ANY_ID, 0x00075 },\n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, HVERSION_ANY_ID, 0x0008c },\n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, HVERSION_ANY_ID, 0x0008d },\n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, HVERSION_ANY_ID, 0x000ad },\n\t{ 0 }\n};\n\n \nstatic const struct parisc_device_id lasi_tbl[] __initconst = {\n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x03B, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x03C, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x03D, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x03E, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x03F, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x046, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x047, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x04E, 0x0008C },  \n\t{ HPHW_FIO, HVERSION_REV_ANY_ID, 0x056, 0x0008C },  \n\t{ 0 }\n};\n\n\nMODULE_DEVICE_TABLE(parisc, serial_tbl);\n\nstatic struct parisc_driver lasi_driver __refdata = {\n\t.name\t\t= \"serial_1\",\n\t.id_table\t= lasi_tbl,\n\t.probe\t\t= serial_init_chip,\n};\n\nstatic struct parisc_driver serial_driver __refdata = {\n\t.name\t\t= \"serial\",\n\t.id_table\t= serial_tbl,\n\t.probe\t\t= serial_init_chip,\n};\n\nstatic int __init probe_serial_gsc(void)\n{\n\tregister_parisc_driver(&lasi_driver);\n\tregister_parisc_driver(&serial_driver);\n\treturn 0;\n}\n\nmodule_init(probe_serial_gsc);\n\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}