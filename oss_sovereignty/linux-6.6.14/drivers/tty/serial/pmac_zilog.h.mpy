{
  "module_name": "pmac_zilog.h",
  "hash_id": "555482c095258dfba570048a43f15abad64bb22c46612388425de9dbae6609e5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/tty/serial/pmac_zilog.h",
  "human_readable_source": " \n#ifndef __PMAC_ZILOG_H__\n#define __PMAC_ZILOG_H__\n\n \n#define MAX_ZS_PORTS\t4\n\n \n#define NUM_ZSREGS    17\n\nstruct uart_pmac_port {\n\tstruct uart_port\t\tport;\n\tstruct uart_pmac_port\t\t*mate;\n\n#ifdef CONFIG_PPC_PMAC\n\t \n\tstruct macio_dev\t\t*dev;\n\t \n\tstruct device_node\t\t*node;\n#else\n\tstruct platform_device\t\t*pdev;\n#endif\n\n\t \n\tint\t\t\t\tport_type;\n\tu8\t\t\t\tcurregs[NUM_ZSREGS];\n\n\tunsigned int\t\t\tflags;\n#define PMACZILOG_FLAG_IS_CONS\t\t0x00000001\n#define PMACZILOG_FLAG_IS_KGDB\t\t0x00000002\n#define PMACZILOG_FLAG_MODEM_STATUS\t0x00000004\n#define PMACZILOG_FLAG_IS_CHANNEL_A\t0x00000008\n#define PMACZILOG_FLAG_REGS_HELD\t0x00000010\n#define PMACZILOG_FLAG_TX_STOPPED\t0x00000020\n#define PMACZILOG_FLAG_TX_ACTIVE\t0x00000040\n#define PMACZILOG_FLAG_IS_IRDA\t\t0x00000100\n#define PMACZILOG_FLAG_IS_INTMODEM\t0x00000200\n#define PMACZILOG_FLAG_RSRC_REQUESTED\t0x00000800\n#define PMACZILOG_FLAG_IS_OPEN\t\t0x00002000\n#define PMACZILOG_FLAG_IS_EXTCLK\t0x00008000\n#define PMACZILOG_FLAG_BREAK\t\t0x00010000\n\n\tunsigned char\t\t\tparity_mask;\n\tunsigned char\t\t\tprev_status;\n\n\tvolatile u8\t\t\t__iomem *control_reg;\n\tvolatile u8\t\t\t__iomem *data_reg;\n\n\tunsigned char\t\t\tirq_name[8];\n};\n\n#define to_pmz(p) ((struct uart_pmac_port *)(p))\n\nstatic inline struct uart_pmac_port *pmz_get_port_A(struct uart_pmac_port *uap)\n{\n\tif (uap->flags & PMACZILOG_FLAG_IS_CHANNEL_A)\n\t\treturn uap;\n\treturn uap->mate;\n}\n\n \nstatic inline u8 read_zsreg(struct uart_pmac_port *port, u8 reg)\n{\n\tif (reg != 0)\n\t\twriteb(reg, port->control_reg);\n\treturn readb(port->control_reg);\n}\n\nstatic inline void write_zsreg(struct uart_pmac_port *port, u8 reg, u8 value)\n{\n\tif (reg != 0)\n\t\twriteb(reg, port->control_reg);\n\twriteb(value, port->control_reg);\n}\n\nstatic inline u8 read_zsdata(struct uart_pmac_port *port)\n{\n\treturn readb(port->data_reg);\n}\n\nstatic inline void write_zsdata(struct uart_pmac_port *port, u8 data)\n{\n\twriteb(data, port->data_reg);\n}\n\nstatic inline void zssync(struct uart_pmac_port *port)\n{\n\t(void)readb(port->control_reg);\n}\n\n \n#define BRG_TO_BPS(brg, freq) ((freq) / 2 / ((brg) + 2))\n#define BPS_TO_BRG(bps, freq) ((((freq) + (bps)) / (2 * (bps))) - 2)\n\n#define ZS_CLOCK         3686400\t \n\n \n\n#define\tFLAG\t0x7e\n\n \n#define\tR0\t0\t\t \n#define\tR1\t1\n#define\tR2\t2\n#define\tR3\t3\n#define\tR4\t4\n#define\tR5\t5\n#define\tR6\t6\n#define\tR7\t7\n#define\tR8\t8\n#define\tR9\t9\n#define\tR10\t10\n#define\tR11\t11\n#define\tR12\t12\n#define\tR13\t13\n#define\tR14\t14\n#define\tR15\t15\n#define\tR7P\t16\n\n#define\tNULLCODE\t0\t \n#define\tPOINT_HIGH\t0x8\t \n#define\tRES_EXT_INT\t0x10\t \n#define\tSEND_ABORT\t0x18\t \n#define\tRES_RxINT_FC\t0x20\t \n#define\tRES_Tx_P\t0x28\t \n#define\tERR_RES\t\t0x30\t \n#define\tRES_H_IUS\t0x38\t \n\n#define\tRES_Rx_CRC\t0x40\t \n#define\tRES_Tx_CRC\t0x80\t \n#define\tRES_EOM_L\t0xC0\t \n\n \n\n#define\tEXT_INT_ENAB\t0x1\t \n#define\tTxINT_ENAB\t0x2\t \n#define\tPAR_SPEC\t0x4\t \n\n#define\tRxINT_DISAB\t0\t \n#define\tRxINT_FCERR\t0x8\t \n#define\tINT_ALL_Rx\t0x10\t \n#define\tINT_ERR_Rx\t0x18\t \n#define RxINT_MASK\t0x18\n\n#define\tWT_RDY_RT\t0x20\t \n#define\tWT_FN_RDYFN\t0x40\t \n#define\tWT_RDY_ENAB\t0x80\t \n\n \n\n \n\n#define\tRxENABLE\t0x1\t \n#define\tSYNC_L_INH\t0x2\t \n#define\tADD_SM\t\t0x4\t \n#define\tRxCRC_ENAB\t0x8\t \n#define\tENT_HM\t\t0x10\t \n#define\tAUTO_ENAB\t0x20\t \n#define\tRx5\t\t0x0\t \n#define\tRx7\t\t0x40\t \n#define\tRx6\t\t0x80\t \n#define\tRx8\t\t0xc0\t \n#define RxN_MASK\t0xc0\n\n \n\n#define\tPAR_ENAB\t0x1\t \n#define\tPAR_EVEN\t0x2\t \n\n#define\tSYNC_ENAB\t0\t \n#define\tSB1\t\t0x4\t \n#define\tSB15\t\t0x8\t \n#define\tSB2\t\t0xc\t \n#define SB_MASK\t\t0xc\n\n#define\tMONSYNC\t\t0\t \n#define\tBISYNC\t\t0x10\t \n#define\tSDLC\t\t0x20\t \n#define\tEXTSYNC\t\t0x30\t \n\n#define\tX1CLK\t\t0x0\t \n#define\tX16CLK\t\t0x40\t \n#define\tX32CLK\t\t0x80\t \n#define\tX64CLK\t\t0xC0\t \n#define XCLK_MASK\t0xC0\n\n \n\n#define\tTxCRC_ENAB\t0x1\t \n#define\tRTS\t\t0x2\t \n#define\tSDLC_CRC\t0x4\t \n#define\tTxENABLE\t0x8\t \n#define\tSND_BRK\t\t0x10\t \n#define\tTx5\t\t0x0\t \n#define\tTx7\t\t0x20\t \n#define\tTx6\t\t0x40\t \n#define\tTx8\t\t0x60\t \n#define TxN_MASK\t0x60\n#define\tDTR\t\t0x80\t \n\n \n\n \n\n \n#define\tENEXREAD\t0x40\t \n\n \n\n \n#define\tVIS\t1\t \n#define\tNV\t2\t \n#define\tDLC\t4\t \n#define\tMIE\t8\t \n#define\tSTATHI\t0x10\t \n#define\tNORESET\t0\t \n#define\tCHRB\t0x40\t \n#define\tCHRA\t0x80\t \n#define\tFHWRES\t0xc0\t \n\n \n#define\tBIT6\t1\t \n#define\tLOOPMODE 2\t \n#define\tABUNDER\t4\t \n#define\tMARKIDLE 8\t \n#define\tGAOP\t0x10\t \n#define\tNRZ\t0\t \n#define\tNRZI\t0x20\t \n#define\tFM1\t0x40\t \n#define\tFM0\t0x60\t \n#define\tCRCPS\t0x80\t \n\n \n#define\tTRxCXT\t0\t \n#define\tTRxCTC\t1\t \n#define\tTRxCBR\t2\t \n#define\tTRxCDP\t3\t \n#define\tTRxCOI\t4\t \n#define\tTCRTxCP\t0\t \n#define\tTCTRxCP\t8\t \n#define\tTCBR\t0x10\t \n#define\tTCDPLL\t0x18\t \n#define\tRCRTxCP\t0\t \n#define\tRCTRxCP\t0x20\t \n#define\tRCBR\t0x40\t \n#define\tRCDPLL\t0x60\t \n#define\tRTxCX\t0x80\t \n\n \n\n \n\n \n#define\tBRENAB\t1\t \n#define\tBRSRC\t2\t \n#define\tDTRREQ\t4\t \n#define\tAUTOECHO 8\t \n#define\tLOOPBAK\t0x10\t \n#define\tSEARCH\t0x20\t \n#define\tRMC\t0x40\t \n#define\tDISDPLL\t0x60\t \n#define\tSSBR\t0x80\t \n#define\tSSRTxC\t0xa0\t \n#define\tSFMM\t0xc0\t \n#define\tSNRZI\t0xe0\t \n\n \n#define\tEN85C30\t1\t \n#define\tZCIE\t2\t \n#define\tENSTFIFO 4\t \n#define\tDCDIE\t8\t \n#define\tSYNCIE\t0x10\t \n#define\tCTSIE\t0x20\t \n#define\tTxUIE\t0x40\t \n#define\tBRKIE\t0x80\t \n\n\n \n#define\tRx_CH_AV\t0x1\t \n#define\tZCOUNT\t\t0x2\t \n#define\tTx_BUF_EMP\t0x4\t \n#define\tDCD\t\t0x8\t \n#define\tSYNC_HUNT\t0x10\t \n#define\tCTS\t\t0x20\t \n#define\tTxEOM\t\t0x40\t \n#define\tBRK_ABRT\t0x80\t \n\n \n#define\tALL_SNT\t\t0x1\t \n \n#define\tRES3\t\t0x8\t \n#define\tRES4\t\t0x4\t \n#define\tRES5\t\t0xc\t \n#define\tRES6\t\t0x2\t \n#define\tRES7\t\t0xa\t \n#define\tRES8\t\t0x6\t \n#define\tRES18\t\t0xe\t \n#define\tRES28\t\t0x0\t \n \n#define\tPAR_ERR\t\t0x10\t \n#define\tRx_OVR\t\t0x20\t \n#define\tCRC_ERR\t\t0x40\t \n#define\tEND_FR\t\t0x80\t \n\n \n#define\tCHB_Tx_EMPTY\t0x00\n#define\tCHB_EXT_STAT\t0x02\n#define\tCHB_Rx_AVAIL\t0x04\n#define\tCHB_SPECIAL\t0x06\n#define\tCHA_Tx_EMPTY\t0x08\n#define\tCHA_EXT_STAT\t0x0a\n#define\tCHA_Rx_AVAIL\t0x0c\n#define\tCHA_SPECIAL\t0x0e\n#define\tSTATUS_MASK\t0x06\n\n \n#define\tCHBEXT\t0x1\t\t \n#define\tCHBTxIP\t0x2\t\t \n#define\tCHBRxIP\t0x4\t\t \n#define\tCHAEXT\t0x8\t\t \n#define\tCHATxIP\t0x10\t\t \n#define\tCHARxIP\t0x20\t\t \n\n \n\n \n#define\tONLOOP\t2\t\t \n#define\tLOOPSEND 0x10\t\t \n#define\tCLK2MIS\t0x40\t\t \n#define\tCLK1MIS\t0x80\t\t \n\n \n\n \n\n \n\n \n#define ZS_CLEARERR(port)    (write_zsreg(port, 0, ERR_RES))\n#define ZS_CLEARFIFO(port)   do {                       \\\n\t\t\t\t     read_zsdata(port); \\\n\t\t\t\t     read_zsdata(port); \\\n\t\t\t\t     read_zsdata(port); \\\n\t\t\t\t} while(0)\n\n#define ZS_IS_CONS(UP)\t\t\t((UP)->flags & PMACZILOG_FLAG_IS_CONS)\n#define ZS_IS_KGDB(UP)\t\t\t((UP)->flags & PMACZILOG_FLAG_IS_KGDB)\n#define ZS_IS_CHANNEL_A(UP)\t\t((UP)->flags & PMACZILOG_FLAG_IS_CHANNEL_A)\n#define ZS_REGS_HELD(UP)\t\t((UP)->flags & PMACZILOG_FLAG_REGS_HELD)\n#define ZS_TX_STOPPED(UP)\t\t((UP)->flags & PMACZILOG_FLAG_TX_STOPPED)\n#define ZS_TX_ACTIVE(UP)\t\t((UP)->flags & PMACZILOG_FLAG_TX_ACTIVE)\n#define ZS_WANTS_MODEM_STATUS(UP)\t((UP)->flags & PMACZILOG_FLAG_MODEM_STATUS)\n#define ZS_IS_IRDA(UP)\t\t\t((UP)->flags & PMACZILOG_FLAG_IS_IRDA)\n#define ZS_IS_INTMODEM(UP)\t\t((UP)->flags & PMACZILOG_FLAG_IS_INTMODEM)\n#define ZS_IS_OPEN(UP)\t\t\t((UP)->flags & PMACZILOG_FLAG_IS_OPEN)\n#define ZS_IS_EXTCLK(UP)\t\t((UP)->flags & PMACZILOG_FLAG_IS_EXTCLK)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}