{
  "module_name": "cpm_uart.h",
  "hash_id": "2cbc92b0bfc5d60b2874994be8eb58e007a31f19b2c5fed12d0cae1d3a762df2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/tty/serial/cpm_uart.h",
  "human_readable_source": " \n \n#ifndef CPM_UART_H\n#define CPM_UART_H\n\n#include <linux/platform_device.h>\n\nstruct gpio_desc;\n\n#if defined(CONFIG_CPM2)\n#include \"asm/cpm2.h\"\n#elif defined(CONFIG_CPM1)\n#include \"asm/cpm1.h\"\n#endif\n\n#define DPRAM_BASE\t((u8 __iomem *)cpm_muram_addr(0))\n\n#define SERIAL_CPM_MAJOR\t204\n#define SERIAL_CPM_MINOR\t46\n\n#define IS_SMC(pinfo)\t\t(pinfo->flags & FLAG_SMC)\n#define FLAG_SMC\t0x00000002\n#define FLAG_CONSOLE\t0x00000001\n\n#define UART_NR\t\t6\n\n#define RX_NUM_FIFO\t4\n#define RX_BUF_SIZE\t32\n#define TX_NUM_FIFO\t4\n#define TX_BUF_SIZE\t32\n\n#define GPIO_CTS\t0\n#define GPIO_RTS\t1\n#define GPIO_DCD\t2\n#define GPIO_DSR\t3\n#define GPIO_DTR\t4\n#define GPIO_RI\t\t5\n\n#define NUM_GPIOS\t(GPIO_RI+1)\n\nstruct uart_cpm_port {\n\tstruct uart_port\tport;\n\tu16\t\t\trx_nrfifos;\n\tu16\t\t\trx_fifosize;\n\tu16\t\t\ttx_nrfifos;\n\tu16\t\t\ttx_fifosize;\n\tsmc_t __iomem\t\t*smcp;\n\tsmc_uart_t __iomem\t*smcup;\n\tscc_t __iomem\t\t*sccp;\n\tscc_uart_t __iomem\t*sccup;\n\tcbd_t __iomem\t\t*rx_bd_base;\n\tcbd_t __iomem\t\t*rx_cur;\n\tcbd_t __iomem\t\t*tx_bd_base;\n\tcbd_t __iomem\t\t*tx_cur;\n\tunsigned char\t\t*tx_buf;\n\tunsigned char\t\t*rx_buf;\n\tu32\t\t\tflags;\n\tstruct clk\t\t*clk;\n\tu8\t\t\tbrg;\n\tuint\t\t\t dp_addr;\n\tvoid\t\t\t*mem_addr;\n\tdma_addr_t\t\t dma_addr;\n\tu32\t\t\tmem_size;\n\t \n\tint\t\t\twait_closing;\n\t \n\tu32\t\t\tcommand;\n\tstruct gpio_desc\t*gpios[NUM_GPIOS];\n};\n\n \nstatic inline unsigned long cpu2cpm_addr(void *addr,\n                                         struct uart_cpm_port *pinfo)\n{\n\tint offset;\n\tu32 val = (u32)addr;\n\tu32 mem = (u32)pinfo->mem_addr;\n\t \n\tif (likely(val >= mem && val < mem + pinfo->mem_size)) {\n\t\toffset = val - mem;\n\t\treturn pinfo->dma_addr + offset;\n\t}\n\t \n\tBUG();\n\treturn 0;\n}\n\nstatic inline void *cpm2cpu_addr(unsigned long addr,\n                                 struct uart_cpm_port *pinfo)\n{\n\tint offset;\n\tu32 val = addr;\n\tu32 dma = (u32)pinfo->dma_addr;\n\t \n\tif (likely(val >= dma && val < dma + pinfo->mem_size)) {\n\t\toffset = val - dma;\n\t\treturn pinfo->mem_addr + offset;\n\t}\n\t \n\tBUG();\n\treturn NULL;\n}\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}