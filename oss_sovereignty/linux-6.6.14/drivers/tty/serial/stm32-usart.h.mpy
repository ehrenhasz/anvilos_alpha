{
  "module_name": "stm32-usart.h",
  "hash_id": "821e84628f1e419f6766520a94a26eb40a70cd2615441f31525dd0748ac58b5f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/tty/serial/stm32-usart.h",
  "human_readable_source": " \n \n\n#define DRIVER_NAME \"stm32-usart\"\n\nstruct stm32_usart_offsets {\n\tu8 cr1;\n\tu8 cr2;\n\tu8 cr3;\n\tu8 brr;\n\tu8 gtpr;\n\tu8 rtor;\n\tu8 rqr;\n\tu8 isr;\n\tu8 icr;\n\tu8 rdr;\n\tu8 tdr;\n};\n\nstruct stm32_usart_config {\n\tu8 uart_enable_bit;  \n\tbool has_7bits_data;\n\tbool has_swap;\n\tbool has_wakeup;\n\tbool has_fifo;\n\tint fifosize;\n};\n\nstruct stm32_usart_info {\n\tstruct stm32_usart_offsets ofs;\n\tstruct stm32_usart_config cfg;\n};\n\n#define UNDEF_REG 0xff\n\n \n#define USART_SR_PE\t\tBIT(0)\n#define USART_SR_FE\t\tBIT(1)\n#define USART_SR_NE\t\tBIT(2)\t\t \n#define USART_SR_ORE\t\tBIT(3)\n#define USART_SR_IDLE\t\tBIT(4)\n#define USART_SR_RXNE\t\tBIT(5)\n#define USART_SR_TC\t\tBIT(6)\n#define USART_SR_TXE\t\tBIT(7)\n#define USART_SR_CTSIF\t\tBIT(9)\n#define USART_SR_CTS\t\tBIT(10)\t\t \n#define USART_SR_RTOF\t\tBIT(11)\t\t \n#define USART_SR_EOBF\t\tBIT(12)\t\t \n#define USART_SR_ABRE\t\tBIT(14)\t\t \n#define USART_SR_ABRF\t\tBIT(15)\t\t \n#define USART_SR_BUSY\t\tBIT(16)\t\t \n#define USART_SR_CMF\t\tBIT(17)\t\t \n#define USART_SR_SBKF\t\tBIT(18)\t\t \n#define USART_SR_WUF\t\tBIT(20)\t\t \n#define USART_SR_TEACK\t\tBIT(21)\t\t \n#define USART_SR_ERR_MASK\t(USART_SR_ORE | USART_SR_NE | USART_SR_FE |\\\n\t\t\t\t USART_SR_PE)\n \n#define USART_SR_DUMMY_RX\tBIT(16)\n\n \n#define USART_DR_MASK\t\tGENMASK(8, 0)\n\n \n#define USART_BRR_DIV_F_MASK\tGENMASK(3, 0)\n#define USART_BRR_DIV_M_MASK\tGENMASK(15, 4)\n#define USART_BRR_DIV_M_SHIFT\t4\n#define USART_BRR_04_R_SHIFT\t1\n\n \n#define USART_CR1_SBK\t\tBIT(0)\n#define USART_CR1_RWU\t\tBIT(1)\t\t \n#define USART_CR1_UESM\t\tBIT(1)\t\t \n#define USART_CR1_RE\t\tBIT(2)\n#define USART_CR1_TE\t\tBIT(3)\n#define USART_CR1_IDLEIE\tBIT(4)\n#define USART_CR1_RXNEIE\tBIT(5)\n#define USART_CR1_TCIE\t\tBIT(6)\n#define USART_CR1_TXEIE\t\tBIT(7)\n#define USART_CR1_PEIE\t\tBIT(8)\n#define USART_CR1_PS\t\tBIT(9)\n#define USART_CR1_PCE\t\tBIT(10)\n#define USART_CR1_WAKE\t\tBIT(11)\n#define USART_CR1_M0\t\tBIT(12)\t\t \n#define USART_CR1_MME\t\tBIT(13)\t\t \n#define USART_CR1_CMIE\t\tBIT(14)\t\t \n#define USART_CR1_OVER8\t\tBIT(15)\n#define USART_CR1_DEDT_MASK\tGENMASK(20, 16)\t \n#define USART_CR1_DEAT_MASK\tGENMASK(25, 21)\t \n#define USART_CR1_RTOIE\t\tBIT(26)\t\t \n#define USART_CR1_EOBIE\t\tBIT(27)\t\t \n#define USART_CR1_M1\t\tBIT(28)\t\t \n#define USART_CR1_IE_MASK\t(GENMASK(8, 4) | BIT(14) | BIT(26) | BIT(27))\n#define USART_CR1_FIFOEN\tBIT(29)\t\t \n#define USART_CR1_DEAT_SHIFT 21\n#define USART_CR1_DEDT_SHIFT 16\n\n \n#define USART_CR2_ADD_MASK\tGENMASK(3, 0)\t \n#define USART_CR2_ADDM7\t\tBIT(4)\t\t \n#define USART_CR2_LBCL\t\tBIT(8)\n#define USART_CR2_CPHA\t\tBIT(9)\n#define USART_CR2_CPOL\t\tBIT(10)\n#define USART_CR2_CLKEN\t\tBIT(11)\n#define USART_CR2_STOP_2B\tBIT(13)\n#define USART_CR2_STOP_MASK\tGENMASK(13, 12)\n#define USART_CR2_LINEN\t\tBIT(14)\n#define USART_CR2_SWAP\t\tBIT(15)\t\t \n#define USART_CR2_RXINV\t\tBIT(16)\t\t \n#define USART_CR2_TXINV\t\tBIT(17)\t\t \n#define USART_CR2_DATAINV\tBIT(18)\t\t \n#define USART_CR2_MSBFIRST\tBIT(19)\t\t \n#define USART_CR2_ABREN\t\tBIT(20)\t\t \n#define USART_CR2_ABRMOD_MASK\tGENMASK(22, 21)\t \n#define USART_CR2_RTOEN\t\tBIT(23)\t\t \n#define USART_CR2_ADD_F7_MASK\tGENMASK(31, 24)\t \n\n \n#define USART_CR3_EIE\t\tBIT(0)\n#define USART_CR3_IREN\t\tBIT(1)\n#define USART_CR3_IRLP\t\tBIT(2)\n#define USART_CR3_HDSEL\t\tBIT(3)\n#define USART_CR3_NACK\t\tBIT(4)\n#define USART_CR3_SCEN\t\tBIT(5)\n#define USART_CR3_DMAR\t\tBIT(6)\n#define USART_CR3_DMAT\t\tBIT(7)\n#define USART_CR3_RTSE\t\tBIT(8)\n#define USART_CR3_CTSE\t\tBIT(9)\n#define USART_CR3_CTSIE\t\tBIT(10)\n#define USART_CR3_ONEBIT\tBIT(11)\n#define USART_CR3_OVRDIS\tBIT(12)\t\t \n#define USART_CR3_DDRE\t\tBIT(13)\t\t \n#define USART_CR3_DEM\t\tBIT(14)\t\t \n#define USART_CR3_DEP\t\tBIT(15)\t\t \n#define USART_CR3_SCARCNT_MASK\tGENMASK(19, 17)\t \n#define USART_CR3_WUS_MASK\tGENMASK(21, 20)\t \n#define USART_CR3_WUS_START_BIT\tBIT(21)\t\t \n#define USART_CR3_WUFIE\t\tBIT(22)\t\t \n#define USART_CR3_TXFTIE\tBIT(23)\t\t \n#define USART_CR3_TCBGTIE\tBIT(24)\t\t \n#define USART_CR3_RXFTCFG_MASK\tGENMASK(27, 25)\t \n#define USART_CR3_RXFTCFG_SHIFT\t25\t\t \n#define USART_CR3_RXFTIE\tBIT(28)\t\t \n#define USART_CR3_TXFTCFG_MASK\tGENMASK(31, 29)\t \n#define USART_CR3_TXFTCFG_SHIFT\t29\t\t \n\n \n#define USART_GTPR_PSC_MASK\tGENMASK(7, 0)\n#define USART_GTPR_GT_MASK\tGENMASK(15, 8)\n\n \n#define USART_RTOR_RTO_MASK\tGENMASK(23, 0)\t \n#define USART_RTOR_BLEN_MASK\tGENMASK(31, 24)\t \n\n \n#define USART_RQR_ABRRQ\t\tBIT(0)\t\t \n#define USART_RQR_SBKRQ\t\tBIT(1)\t\t \n#define USART_RQR_MMRQ\t\tBIT(2)\t\t \n#define USART_RQR_RXFRQ\t\tBIT(3)\t\t \n#define USART_RQR_TXFRQ\t\tBIT(4)\t\t \n\n \n#define USART_ICR_PECF\t\tBIT(0)\t\t \n#define USART_ICR_FECF\t\tBIT(1)\t\t \n#define USART_ICR_ORECF\t\tBIT(3)\t\t \n#define USART_ICR_IDLECF\tBIT(4)\t\t \n#define USART_ICR_TCCF\t\tBIT(6)\t\t \n#define USART_ICR_CTSCF\t\tBIT(9)\t\t \n#define USART_ICR_RTOCF\t\tBIT(11)\t\t \n#define USART_ICR_EOBCF\t\tBIT(12)\t\t \n#define USART_ICR_CMCF\t\tBIT(17)\t\t \n#define USART_ICR_WUCF\t\tBIT(20)\t\t \n\n#define STM32_SERIAL_NAME \"ttySTM\"\n#define STM32_MAX_PORTS 8\n\n#define RX_BUF_L 4096\t\t  \n#define RX_BUF_P (RX_BUF_L / 2)\t  \n#define TX_BUF_L RX_BUF_L\t  \n\n#define STM32_USART_TIMEOUT_USEC USEC_PER_SEC  \n\nstruct stm32_port {\n\tstruct uart_port port;\n\tstruct clk *clk;\n\tconst struct stm32_usart_info *info;\n\tstruct dma_chan *rx_ch;   \n\tdma_addr_t rx_dma_buf;    \n\tunsigned char *rx_buf;    \n\tstruct dma_chan *tx_ch;   \n\tdma_addr_t tx_dma_buf;    \n\tunsigned char *tx_buf;    \n\tu32 cr1_irq;\t\t  \n\tu32 cr3_irq;\t\t  \n\tint last_res;\n\tbool tx_dma_busy;\t  \n\tbool rx_dma_busy;\t  \n\tbool throttled;\t\t  \n\tbool hw_flow_control;\n\tbool swap;\t\t  \n\tbool fifoen;\n\tint rxftcfg;\t\t \n\tint txftcfg;\t\t \n\tbool wakeup_src;\n\tint rdr_mask;\t\t \n\tstruct mctrl_gpios *gpios;  \n\tstruct dma_tx_state rx_dma_state;\n};\n\nstatic struct stm32_port stm32_ports[STM32_MAX_PORTS];\nstatic struct uart_driver stm32_usart_driver;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}