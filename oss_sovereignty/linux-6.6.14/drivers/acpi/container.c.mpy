{
  "module_name": "container.c",
  "hash_id": "f01744e259306a823ef3b79d12156de1b7b0a59fad3a4f9372d412f88470ecd1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/container.c",
  "human_readable_source": "\n \n#include <linux/acpi.h>\n#include <linux/container.h>\n\n#include \"internal.h\"\n\nstatic const struct acpi_device_id container_device_ids[] = {\n\t{\"ACPI0004\", 0},\n\t{\"PNP0A05\", 0},\n\t{\"PNP0A06\", 0},\n\t{\"\", 0},\n};\n\n#ifdef CONFIG_ACPI_CONTAINER\n\nstatic int check_offline(struct acpi_device *adev, void *not_used)\n{\n\tif (acpi_scan_is_offline(adev, false))\n\t\treturn 0;\n\n\treturn -EBUSY;\n}\n\nstatic int acpi_container_offline(struct container_dev *cdev)\n{\n\t \n\treturn acpi_dev_for_each_child(ACPI_COMPANION(&cdev->dev), check_offline, NULL);\n}\n\nstatic void acpi_container_release(struct device *dev)\n{\n\tkfree(to_container_dev(dev));\n}\n\nstatic int container_device_attach(struct acpi_device *adev,\n\t\t\t\t   const struct acpi_device_id *not_used)\n{\n\tstruct container_dev *cdev;\n\tstruct device *dev;\n\tint ret;\n\n\tif (adev->flags.is_dock_station)\n\t\treturn 0;\n\n\tcdev = kzalloc(sizeof(*cdev), GFP_KERNEL);\n\tif (!cdev)\n\t\treturn -ENOMEM;\n\n\tcdev->offline = acpi_container_offline;\n\tdev = &cdev->dev;\n\tdev->bus = &container_subsys;\n\tdev_set_name(dev, \"%s\", dev_name(&adev->dev));\n\tACPI_COMPANION_SET(dev, adev);\n\tdev->release = acpi_container_release;\n\tret = device_register(dev);\n\tif (ret) {\n\t\tput_device(dev);\n\t\treturn ret;\n\t}\n\tadev->driver_data = dev;\n\treturn 1;\n}\n\nstatic void container_device_detach(struct acpi_device *adev)\n{\n\tstruct device *dev = acpi_driver_data(adev);\n\n\tadev->driver_data = NULL;\n\tif (dev)\n\t\tdevice_unregister(dev);\n}\n\nstatic void container_device_online(struct acpi_device *adev)\n{\n\tstruct device *dev = acpi_driver_data(adev);\n\n\tkobject_uevent(&dev->kobj, KOBJ_ONLINE);\n}\n\nstatic struct acpi_scan_handler container_handler = {\n\t.ids = container_device_ids,\n\t.attach = container_device_attach,\n\t.detach = container_device_detach,\n\t.hotplug = {\n\t\t.enabled = true,\n\t\t.demand_offline = true,\n\t\t.notify_online = container_device_online,\n\t},\n};\n\nvoid __init acpi_container_init(void)\n{\n\tacpi_scan_add_handler(&container_handler);\n}\n\n#else\n\nstatic struct acpi_scan_handler container_handler = {\n\t.ids = container_device_ids,\n};\n\nvoid __init acpi_container_init(void)\n{\n\tacpi_scan_add_handler_with_hotplug(&container_handler, \"container\");\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}