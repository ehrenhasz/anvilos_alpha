{
  "module_name": "nsload.c",
  "hash_id": "8fc6f7b01ec434053935c3a31a781c946d0671dc45653c39740af681275f0799",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/nsload.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acnamesp.h\"\n#include \"acdispat.h\"\n#include \"actables.h\"\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_NAMESPACE\nACPI_MODULE_NAME(\"nsload\")\n\n \n#ifdef ACPI_FUTURE_IMPLEMENTATION\nacpi_status acpi_ns_unload_namespace(acpi_handle handle);\n\nstatic acpi_status acpi_ns_delete_subtree(acpi_handle start_handle);\n#endif\n\n \n\nacpi_status\nacpi_ns_load_table(u32 table_index, struct acpi_namespace_node *node)\n{\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(ns_load_table);\n\n\t \n\n\tif (acpi_tb_is_table_loaded(table_index)) {\n\t\tstatus = AE_ALREADY_EXISTS;\n\t\tgoto unlock;\n\t}\n\n\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t  \"**** Loading table into namespace ****\\n\"));\n\n\tstatus = acpi_tb_allocate_owner_id(table_index);\n\tif (ACPI_FAILURE(status)) {\n\t\tgoto unlock;\n\t}\n\n\t \n\tstatus = acpi_ns_parse_table(table_index, node);\n\tif (ACPI_SUCCESS(status)) {\n\t\tacpi_tb_set_table_loaded_flag(table_index, TRUE);\n\t} else {\n\t\t \n\t\tacpi_ns_delete_namespace_by_owner(acpi_gbl_root_table_list.\n\t\t\t\t\t\t  tables[table_index].owner_id);\n\n\t\tacpi_tb_release_owner_id(table_index);\n\t\treturn_ACPI_STATUS(status);\n\t}\n\nunlock:\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\t \n\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t  \"**** Begin Table Object Initialization\\n\"));\n\n\tacpi_ex_enter_interpreter();\n\tstatus = acpi_ds_initialize_objects(table_index, node);\n\tacpi_ex_exit_interpreter();\n\n\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t  \"**** Completed Table Object Initialization\\n\"));\n\n\treturn_ACPI_STATUS(status);\n}\n\n#ifdef ACPI_OBSOLETE_FUNCTIONS\n \n\nacpi_status acpi_ns_load_namespace(void)\n{\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(acpi_load_name_space);\n\n\t \n\n\tif (acpi_gbl_DSDT == NULL) {\n\t\tACPI_ERROR((AE_INFO, \"DSDT is not in memory\"));\n\t\treturn_ACPI_STATUS(AE_NO_ACPI_TABLES);\n\t}\n\n\t \n\tstatus = acpi_ns_load_table_by_type(ACPI_TABLE_ID_DSDT);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\t \n\n\t(void)acpi_ns_load_table_by_type(ACPI_TABLE_ID_SSDT);\n\t(void)acpi_ns_load_table_by_type(ACPI_TABLE_ID_PSDT);\n\n\tACPI_DEBUG_PRINT_RAW((ACPI_DB_INIT,\n\t\t\t      \"ACPI Namespace successfully loaded at root %p\\n\",\n\t\t\t      acpi_gbl_root_node));\n\n\treturn_ACPI_STATUS(status);\n}\n#endif\n\n#ifdef ACPI_FUTURE_IMPLEMENTATION\n \n\nstatic acpi_status acpi_ns_delete_subtree(acpi_handle start_handle)\n{\n\tacpi_status status;\n\tacpi_handle child_handle;\n\tacpi_handle parent_handle;\n\tacpi_handle next_child_handle;\n\tacpi_handle dummy;\n\tu32 level;\n\n\tACPI_FUNCTION_TRACE(ns_delete_subtree);\n\n\tparent_handle = start_handle;\n\tchild_handle = NULL;\n\tlevel = 1;\n\n\t \n\twhile (level > 0) {\n\n\t\t \n\n\t\tstatus = acpi_get_next_object(ACPI_TYPE_ANY, parent_handle,\n\t\t\t\t\t      child_handle, &next_child_handle);\n\n\t\tchild_handle = next_child_handle;\n\n\t\t \n\n\t\tif (ACPI_SUCCESS(status)) {\n\n\t\t\t \n\n\t\t\tif (ACPI_SUCCESS\n\t\t\t    (acpi_get_next_object\n\t\t\t     (ACPI_TYPE_ANY, child_handle, NULL, &dummy))) {\n\t\t\t\t \n\t\t\t\tlevel++;\n\t\t\t\tparent_handle = child_handle;\n\t\t\t\tchild_handle = NULL;\n\t\t\t}\n\t\t} else {\n\t\t\t \n\t\t\tlevel--;\n\n\t\t\t \n\n\t\t\tacpi_ns_delete_children(child_handle);\n\n\t\t\tchild_handle = parent_handle;\n\t\t\tstatus = acpi_get_parent(parent_handle, &parent_handle);\n\t\t\tif (ACPI_FAILURE(status)) {\n\t\t\t\treturn_ACPI_STATUS(status);\n\t\t\t}\n\t\t}\n\t}\n\n\t \n\n\tacpi_ns_remove_node(child_handle);\n\treturn_ACPI_STATUS(AE_OK);\n}\n\n \n\nacpi_status acpi_ns_unload_namespace(acpi_handle handle)\n{\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(ns_unload_name_space);\n\n\t \n\n\tif (!acpi_gbl_root_node) {\n\t\treturn_ACPI_STATUS(AE_NO_NAMESPACE);\n\t}\n\n\tif (!handle) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\n\tstatus = acpi_ns_delete_subtree(handle);\n\treturn_ACPI_STATUS(status);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}