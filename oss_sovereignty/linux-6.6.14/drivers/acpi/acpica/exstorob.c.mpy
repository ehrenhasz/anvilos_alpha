{
  "module_name": "exstorob.c",
  "hash_id": "feafc0931d9f903c2912511a11a64f380081b5b799dd7a4c391d1732b25fc3b7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/exstorob.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_EXECUTER\nACPI_MODULE_NAME(\"exstorob\")\n\n \nacpi_status\nacpi_ex_store_buffer_to_buffer(union acpi_operand_object *source_desc,\n\t\t\t       union acpi_operand_object *target_desc)\n{\n\tu32 length;\n\tu8 *buffer;\n\n\tACPI_FUNCTION_TRACE_PTR(ex_store_buffer_to_buffer, source_desc);\n\n\t \n\n\tif (source_desc == target_desc) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tbuffer = ACPI_CAST_PTR(u8, source_desc->buffer.pointer);\n\tlength = source_desc->buffer.length;\n\n\t \n\tif ((target_desc->buffer.length == 0) ||\n\t    (target_desc->common.flags & AOPOBJ_STATIC_POINTER)) {\n\t\ttarget_desc->buffer.pointer = ACPI_ALLOCATE(length);\n\t\tif (!target_desc->buffer.pointer) {\n\t\t\treturn_ACPI_STATUS(AE_NO_MEMORY);\n\t\t}\n\n\t\ttarget_desc->buffer.length = length;\n\t}\n\n\t \n\n\tif (length <= target_desc->buffer.length) {\n\n\t\t \n\n\t\tmemset(target_desc->buffer.pointer, 0,\n\t\t       target_desc->buffer.length);\n\t\tmemcpy(target_desc->buffer.pointer, buffer, length);\n\n#ifdef ACPI_OBSOLETE_BEHAVIOR\n\t\t \n\n\t\t \n\t\tif (original_src_type == ACPI_TYPE_STRING) {\n\n\t\t\t \n\n\t\t\ttarget_desc->buffer.length = length;\n\t\t}\n#endif\n\t} else {\n\t\t \n\n\t\tmemcpy(target_desc->buffer.pointer, buffer,\n\t\t       target_desc->buffer.length);\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t\t  \"Truncating source buffer from %X to %X\\n\",\n\t\t\t\t  length, target_desc->buffer.length));\n\t}\n\n\t \n\n\ttarget_desc->buffer.flags = source_desc->buffer.flags;\n\ttarget_desc->common.flags &= ~AOPOBJ_STATIC_POINTER;\n\treturn_ACPI_STATUS(AE_OK);\n}\n\n \n\nacpi_status\nacpi_ex_store_string_to_string(union acpi_operand_object *source_desc,\n\t\t\t       union acpi_operand_object *target_desc)\n{\n\tu32 length;\n\tu8 *buffer;\n\n\tACPI_FUNCTION_TRACE_PTR(ex_store_string_to_string, source_desc);\n\n\t \n\n\tif (source_desc == target_desc) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tbuffer = ACPI_CAST_PTR(u8, source_desc->string.pointer);\n\tlength = source_desc->string.length;\n\n\t \n\tif ((length < target_desc->string.length) &&\n\t    (!(target_desc->common.flags & AOPOBJ_STATIC_POINTER))) {\n\t\t \n\t\tmemset(target_desc->string.pointer, 0,\n\t\t       (acpi_size)target_desc->string.length + 1);\n\t\tmemcpy(target_desc->string.pointer, buffer, length);\n\t} else {\n\t\t \n\t\tif (target_desc->string.pointer &&\n\t\t    (!(target_desc->common.flags & AOPOBJ_STATIC_POINTER))) {\n\n\t\t\t \n\n\t\t\tACPI_FREE(target_desc->string.pointer);\n\t\t}\n\n\t\ttarget_desc->string.pointer =\n\t\t    ACPI_ALLOCATE_ZEROED((acpi_size)length + 1);\n\n\t\tif (!target_desc->string.pointer) {\n\t\t\treturn_ACPI_STATUS(AE_NO_MEMORY);\n\t\t}\n\n\t\ttarget_desc->common.flags &= ~AOPOBJ_STATIC_POINTER;\n\t\tmemcpy(target_desc->string.pointer, buffer, length);\n\t}\n\n\t \n\n\ttarget_desc->string.length = length;\n\treturn_ACPI_STATUS(AE_OK);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}