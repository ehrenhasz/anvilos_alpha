{
  "module_name": "exsystem.c",
  "hash_id": "f4edf509123cbe6f2e06b973437f069ea286ccf12c34f7372429a32d2193dd48",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/exsystem.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_EXECUTER\nACPI_MODULE_NAME(\"exsystem\")\n\n \nacpi_status acpi_ex_system_wait_semaphore(acpi_semaphore semaphore, u16 timeout)\n{\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(ex_system_wait_semaphore);\n\n\tstatus = acpi_os_wait_semaphore(semaphore, 1, ACPI_DO_NOT_WAIT);\n\tif (ACPI_SUCCESS(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (status == AE_TIME) {\n\n\t\t \n\n\t\tacpi_ex_exit_interpreter();\n\t\tstatus = acpi_os_wait_semaphore(semaphore, 1, timeout);\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_EXEC,\n\t\t\t\t  \"*** Thread awake after blocking, %s\\n\",\n\t\t\t\t  acpi_format_exception(status)));\n\n\t\t \n\n\t\tacpi_ex_enter_interpreter();\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\n \n\nacpi_status acpi_ex_system_wait_mutex(acpi_mutex mutex, u16 timeout)\n{\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(ex_system_wait_mutex);\n\n\tstatus = acpi_os_acquire_mutex(mutex, ACPI_DO_NOT_WAIT);\n\tif (ACPI_SUCCESS(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (status == AE_TIME) {\n\n\t\t \n\n\t\tacpi_ex_exit_interpreter();\n\t\tstatus = acpi_os_acquire_mutex(mutex, timeout);\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_EXEC,\n\t\t\t\t  \"*** Thread awake after blocking, %s\\n\",\n\t\t\t\t  acpi_format_exception(status)));\n\n\t\t \n\n\t\tacpi_ex_enter_interpreter();\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\n \n\nacpi_status acpi_ex_system_do_stall(u32 how_long_us)\n{\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_ENTRY();\n\n\tif (how_long_us > 255) {\n\t\t \n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Time parameter is too large (%u)\", how_long_us));\n\t\tstatus = AE_AML_OPERAND_VALUE;\n\t} else {\n\t\tif (how_long_us > 100) {\n\t\t\tACPI_WARNING((AE_INFO,\n\t\t\t\t      \"Time parameter %u us > 100 us violating ACPI spec, please fix the firmware.\",\n\t\t\t\t      how_long_us));\n\t\t}\n\t\tacpi_os_stall(how_long_us);\n\t}\n\n\treturn (status);\n}\n\n \n\nacpi_status acpi_ex_system_do_sleep(u64 how_long_ms)\n{\n\tACPI_FUNCTION_ENTRY();\n\n\t \n\n\tacpi_ex_exit_interpreter();\n\n\t \n\tif (how_long_ms > ACPI_MAX_SLEEP) {\n\t\thow_long_ms = ACPI_MAX_SLEEP;\n\t}\n\n\tacpi_os_sleep(how_long_ms);\n\n\t \n\n\tacpi_ex_enter_interpreter();\n\treturn (AE_OK);\n}\n\n \n\nacpi_status acpi_ex_system_signal_event(union acpi_operand_object * obj_desc)\n{\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE(ex_system_signal_event);\n\n\tif (obj_desc) {\n\t\tstatus =\n\t\t    acpi_os_signal_semaphore(obj_desc->event.os_semaphore, 1);\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\n \n\nacpi_status\nacpi_ex_system_wait_event(union acpi_operand_object *time_desc,\n\t\t\t  union acpi_operand_object *obj_desc)\n{\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE(ex_system_wait_event);\n\n\tif (obj_desc) {\n\t\tstatus =\n\t\t    acpi_ex_system_wait_semaphore(obj_desc->event.os_semaphore,\n\t\t\t\t\t\t  (u16) time_desc->integer.\n\t\t\t\t\t\t  value);\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\n \n\nacpi_status acpi_ex_system_reset_event(union acpi_operand_object *obj_desc)\n{\n\tacpi_status status = AE_OK;\n\tacpi_semaphore temp_semaphore;\n\n\tACPI_FUNCTION_ENTRY();\n\n\t \n\tstatus =\n\t    acpi_os_create_semaphore(ACPI_NO_UNIT_LIMIT, 0, &temp_semaphore);\n\tif (ACPI_SUCCESS(status)) {\n\t\t(void)acpi_os_delete_semaphore(obj_desc->event.os_semaphore);\n\t\tobj_desc->event.os_semaphore = temp_semaphore;\n\t}\n\n\treturn (status);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}