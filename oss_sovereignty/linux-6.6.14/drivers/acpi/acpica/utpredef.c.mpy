{
  "module_name": "utpredef.c",
  "hash_id": "6d213520d4b1f64b4b7d91fa16302e429290b7d262eddceca691a2ba36f9b3d0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/utpredef.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acpredef.h\"\n\n#define _COMPONENT          ACPI_UTILITIES\nACPI_MODULE_NAME(\"utpredef\")\n\n \nstatic const char *ut_rtype_names[] = {\n\t\"/Integer\",\n\t\"/String\",\n\t\"/Buffer\",\n\t\"/Package\",\n\t\"/Reference\",\n};\n\n \n\nconst union acpi_predefined_info *acpi_ut_get_next_predefined_method(const union\n\t\t\t\t\t\t\t\t     acpi_predefined_info\n\t\t\t\t\t\t\t\t     *this_name)\n{\n\n\t \n\tif ((this_name->info.expected_btypes & ACPI_RTYPE_PACKAGE) &&\n\t    (this_name->info.expected_btypes != ACPI_RTYPE_ALL)) {\n\t\tthis_name++;\n\t}\n\n\tthis_name++;\n\treturn (this_name);\n}\n\n \n\nconst union acpi_predefined_info *acpi_ut_match_predefined_method(char *name)\n{\n\tconst union acpi_predefined_info *this_name;\n\n\t \n\n\tif (name[0] != '_') {\n\t\treturn (NULL);\n\t}\n\n\t \n\n\tthis_name = acpi_gbl_predefined_methods;\n\twhile (this_name->info.name[0]) {\n\t\tif (ACPI_COMPARE_NAMESEG(name, this_name->info.name)) {\n\t\t\treturn (this_name);\n\t\t}\n\n\t\tthis_name = acpi_ut_get_next_predefined_method(this_name);\n\t}\n\n\treturn (NULL);\t\t \n}\n\n \n\nvoid acpi_ut_get_expected_return_types(char *buffer, u32 expected_btypes)\n{\n\tu32 this_rtype;\n\tu32 i;\n\tu32 j;\n\n\tif (!expected_btypes) {\n\t\tstrcpy(buffer, \"NONE\");\n\t\treturn;\n\t}\n\n\tj = 1;\n\tbuffer[0] = 0;\n\tthis_rtype = ACPI_RTYPE_INTEGER;\n\n\tfor (i = 0; i < ACPI_NUM_RTYPES; i++) {\n\n\t\t \n\n\t\tif (expected_btypes & this_rtype) {\n\t\t\tstrcat(buffer, &ut_rtype_names[i][j]);\n\t\t\tj = 0;\t \n\t\t}\n\n\t\tthis_rtype <<= 1;\t \n\t}\n}\n\n \n\n#if (defined ACPI_ASL_COMPILER || defined ACPI_HELP_APP)\n\n \n\nstatic u32 acpi_ut_get_argument_types(char *buffer, u16 argument_types);\n\n \n\nstatic const char *ut_external_type_names[] =\t \n{\n\t\", Type_ANY\",\n\t\", Integer\",\n\t\", String\",\n\t\", Buffer\",\n\t\", Package\"\n};\n\n \n\nstatic const char *ut_resource_type_names[] = {\n\t\"/1\",\n\t\"/2\",\n\t\"/3\",\n\t\"/8\",\n\t\"/16\",\n\t\"/32\",\n\t\"/64\",\n\t\"/variable\",\n};\n\n \n\nconst union acpi_predefined_info *acpi_ut_match_resource_name(char *name)\n{\n\tconst union acpi_predefined_info *this_name;\n\n\t \n\tif (name[0] != '_') {\n\t\treturn (NULL);\n\t}\n\n\t \n\n\tthis_name = acpi_gbl_resource_names;\n\twhile (this_name->info.name[0]) {\n\t\tif (ACPI_COMPARE_NAMESEG(name, this_name->info.name)) {\n\t\t\treturn (this_name);\n\t\t}\n\n\t\tthis_name++;\n\t}\n\n\treturn (NULL);\t\t \n}\n\n \n\nvoid\nacpi_ut_display_predefined_method(char *buffer,\n\t\t\t\t  const union acpi_predefined_info *this_name,\n\t\t\t\t  u8 multi_line)\n{\n\tu32 arg_count;\n\n\t \n\targ_count = acpi_ut_get_argument_types(buffer,\n\t\t\t\t\t       this_name->info.argument_list);\n\n\tif (multi_line) {\n\t\tprintf(\"      \");\n\t}\n\n\tprintf(\"%4.4s    Requires %s%u argument%s\",\n\t       this_name->info.name,\n\t       (this_name->info.argument_list & ARG_COUNT_IS_MINIMUM) ?\n\t       \"(at least) \" : \"\", arg_count, arg_count != 1 ? \"s\" : \"\");\n\n\t \n\n\tif (arg_count > 0) {\n\t\tprintf(\" (%s)\", buffer);\n\t}\n\n\tif (multi_line) {\n\t\tprintf(\"\\n    \");\n\t}\n\n\t \n\n\tif (this_name->info.expected_btypes) {\n\t\tacpi_ut_get_expected_return_types(buffer,\n\t\t\t\t\t\t  this_name->info.\n\t\t\t\t\t\t  expected_btypes);\n\t\tprintf(\"  Return value types: %s\\n\", buffer);\n\t} else {\n\t\tprintf(\"  No return value\\n\");\n\t}\n}\n\n \n\nstatic u32 acpi_ut_get_argument_types(char *buffer, u16 argument_types)\n{\n\tu16 this_argument_type;\n\tu16 sub_index;\n\tu16 arg_count;\n\tu32 i;\n\n\t*buffer = 0;\n\tsub_index = 2;\n\n\t \n\n\targ_count = METHOD_GET_ARG_COUNT(argument_types);\n\tif (arg_count > METHOD_PREDEF_ARGS_MAX) {\n\t\tprintf(\"**** Invalid argument count (%u) \"\n\t\t       \"in predefined info structure\\n\", arg_count);\n\t\treturn (arg_count);\n\t}\n\n\t \n\n\tfor (i = 0; i < arg_count; i++) {\n\t\tthis_argument_type = METHOD_GET_NEXT_TYPE(argument_types);\n\n\t\tif (this_argument_type > METHOD_MAX_ARG_TYPE) {\n\t\t\tprintf(\"**** Invalid argument type (%u) \"\n\t\t\t       \"in predefined info structure\\n\",\n\t\t\t       this_argument_type);\n\t\t\treturn (arg_count);\n\t\t}\n\n\t\tstrcat(buffer,\n\t\t       ut_external_type_names[this_argument_type] + sub_index);\n\t\tsub_index = 0;\n\t}\n\n\treturn (arg_count);\n}\n\n \n\nu32 acpi_ut_get_resource_bit_width(char *buffer, u16 types)\n{\n\tu32 i;\n\tu16 sub_index;\n\tu32 found;\n\n\t*buffer = 0;\n\tsub_index = 1;\n\tfound = 0;\n\n\tfor (i = 0; i < NUM_RESOURCE_WIDTHS; i++) {\n\t\tif (types & 1) {\n\t\t\tstrcat(buffer, &(ut_resource_type_names[i][sub_index]));\n\t\t\tsub_index = 0;\n\t\t\tfound++;\n\t\t}\n\n\t\ttypes >>= 1;\n\t}\n\n\treturn (found);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}