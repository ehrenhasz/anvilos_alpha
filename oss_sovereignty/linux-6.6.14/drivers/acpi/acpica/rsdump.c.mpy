{
  "module_name": "rsdump.c",
  "hash_id": "c116c0c12abcb28900a48b5061a2829d4d772d75edb4941512bf2be4d70cd5f0",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/rsdump.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acresrc.h\"\n\n#define _COMPONENT          ACPI_RESOURCES\nACPI_MODULE_NAME(\"rsdump\")\n\n \n \nstatic void acpi_rs_out_string(const char *title, const char *value);\n\nstatic void acpi_rs_out_integer8(const char *title, u8 value);\n\nstatic void acpi_rs_out_integer16(const char *title, u16 value);\n\nstatic void acpi_rs_out_integer32(const char *title, u32 value);\n\nstatic void acpi_rs_out_integer64(const char *title, u64 value);\n\nstatic void acpi_rs_out_title(const char *title);\n\nstatic void acpi_rs_dump_byte_list(u16 length, u8 *data);\n\nstatic void acpi_rs_dump_word_list(u16 length, u16 *data);\n\nstatic void acpi_rs_dump_dword_list(u8 length, u32 *data);\n\nstatic void acpi_rs_dump_short_byte_list(u8 length, u8 *data);\n\nstatic void\nacpi_rs_dump_resource_source(struct acpi_resource_source *resource_source);\n\nstatic void\nacpi_rs_dump_resource_label(char *title,\n\t\t\t    struct acpi_resource_label *resource_label);\n\nstatic void acpi_rs_dump_address_common(union acpi_resource_data *resource);\n\nstatic void\nacpi_rs_dump_descriptor(void *resource, struct acpi_rsdump_info *table);\n\n \n\nvoid acpi_rs_dump_resource_list(struct acpi_resource *resource_list)\n{\n\tu32 count = 0;\n\tu32 type;\n\n\tACPI_FUNCTION_ENTRY();\n\n\t \n\n\tif (!ACPI_IS_DEBUG_ENABLED(ACPI_LV_RESOURCES, _COMPONENT)) {\n\t\treturn;\n\t}\n\n\t \n\n\tdo {\n\t\tacpi_os_printf(\"\\n[%02X] \", count);\n\t\tcount++;\n\n\t\t \n\n\t\ttype = resource_list->type;\n\t\tif (type > ACPI_RESOURCE_TYPE_MAX) {\n\t\t\tacpi_os_printf\n\t\t\t    (\"Invalid descriptor type (%X) in resource list\\n\",\n\t\t\t     resource_list->type);\n\t\t\treturn;\n\t\t} else if (!resource_list->type) {\n\t\t\tACPI_ERROR((AE_INFO, \"Invalid Zero Resource Type\"));\n\t\t\treturn;\n\t\t}\n\n\t\t \n\n\t\tif (!resource_list->length) {\n\t\t\tacpi_os_printf\n\t\t\t    (\"Invalid zero length descriptor in resource list\\n\");\n\t\t\treturn;\n\t\t}\n\n\t\t \n\n\t\tif (type == ACPI_RESOURCE_TYPE_SERIAL_BUS) {\n\t\t\tacpi_rs_dump_descriptor(&resource_list->data,\n\t\t\t\t\t\tacpi_gbl_dump_serial_bus_dispatch\n\t\t\t\t\t\t[resource_list->data.\n\t\t\t\t\t\t common_serial_bus.type]);\n\t\t} else {\n\t\t\tacpi_rs_dump_descriptor(&resource_list->data,\n\t\t\t\t\t\tacpi_gbl_dump_resource_dispatch\n\t\t\t\t\t\t[type]);\n\t\t}\n\n\t\t \n\n\t\tresource_list = ACPI_NEXT_RESOURCE(resource_list);\n\n\t\t \n\n\t} while (type != ACPI_RESOURCE_TYPE_END_TAG);\n}\n\n \n\nvoid acpi_rs_dump_irq_list(u8 *route_table)\n{\n\tstruct acpi_pci_routing_table *prt_element;\n\tu8 count;\n\n\tACPI_FUNCTION_ENTRY();\n\n\t \n\n\tif (!ACPI_IS_DEBUG_ENABLED(ACPI_LV_RESOURCES, _COMPONENT)) {\n\t\treturn;\n\t}\n\n\tprt_element = ACPI_CAST_PTR(struct acpi_pci_routing_table, route_table);\n\n\t \n\n\tfor (count = 0; prt_element->length; count++) {\n\t\tacpi_os_printf(\"\\n[%02X] PCI IRQ Routing Table Package\\n\",\n\t\t\t       count);\n\t\tacpi_rs_dump_descriptor(prt_element, acpi_rs_dump_prt);\n\n\t\tprt_element = ACPI_ADD_PTR(struct acpi_pci_routing_table,\n\t\t\t\t\t   prt_element, prt_element->length);\n\t}\n}\n\n \n\nstatic void\nacpi_rs_dump_descriptor(void *resource, struct acpi_rsdump_info *table)\n{\n\tu8 *target = NULL;\n\tu8 *previous_target;\n\tconst char *name;\n\tu8 count;\n\n\t \n\n\tcount = table->offset;\n\n\twhile (count) {\n\t\tprevious_target = target;\n\t\ttarget = ACPI_ADD_PTR(u8, resource, table->offset);\n\t\tname = table->name;\n\n\t\tswitch (table->opcode) {\n\t\tcase ACPI_RSD_TITLE:\n\t\t\t \n\t\t\tif (table->name) {\n\t\t\t\tacpi_os_printf(\"%s Resource\\n\", name);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\t \n\n\t\tcase ACPI_RSD_LITERAL:\n\n\t\t\tacpi_rs_out_string(name,\n\t\t\t\t\t   ACPI_CAST_PTR(char, table->pointer));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_STRING:\n\n\t\t\tacpi_rs_out_string(name, ACPI_CAST_PTR(char, target));\n\t\t\tbreak;\n\n\t\t\t \n\n\t\tcase ACPI_RSD_UINT8:\n\n\t\t\tif (table->pointer) {\n\t\t\t\tacpi_rs_out_string(name,\n\t\t\t\t\t\t   table->pointer[*target]);\n\t\t\t} else {\n\t\t\t\tacpi_rs_out_integer8(name, ACPI_GET8(target));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_UINT16:\n\n\t\t\tacpi_rs_out_integer16(name, ACPI_GET16(target));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_UINT32:\n\n\t\t\tacpi_rs_out_integer32(name, ACPI_GET32(target));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_UINT64:\n\n\t\t\tacpi_rs_out_integer64(name, ACPI_GET64(target));\n\t\t\tbreak;\n\n\t\t\t \n\n\t\tcase ACPI_RSD_1BITFLAG:\n\n\t\t\tacpi_rs_out_string(name,\n\t\t\t\t\t   table->pointer[*target & 0x01]);\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_2BITFLAG:\n\n\t\t\tacpi_rs_out_string(name,\n\t\t\t\t\t   table->pointer[*target & 0x03]);\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_3BITFLAG:\n\n\t\t\tacpi_rs_out_string(name,\n\t\t\t\t\t   table->pointer[*target & 0x07]);\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_6BITFLAG:\n\n\t\t\tacpi_rs_out_integer8(name, (ACPI_GET8(target) & 0x3F));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_SHORTLIST:\n\t\t\t \n\t\t\tif (previous_target) {\n\t\t\t\tacpi_rs_out_title(name);\n\t\t\t\tacpi_rs_dump_short_byte_list(*previous_target,\n\t\t\t\t\t\t\t     target);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_SHORTLISTX:\n\t\t\t \n\t\t\tif (previous_target) {\n\t\t\t\tacpi_rs_out_title(name);\n\t\t\t\tacpi_rs_dump_short_byte_list(*previous_target,\n\t\t\t\t\t\t\t     *\n\t\t\t\t\t\t\t     (ACPI_CAST_INDIRECT_PTR\n\t\t\t\t\t\t\t      (u8, target)));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_LONGLIST:\n\t\t\t \n\t\t\tif (previous_target) {\n\t\t\t\tacpi_rs_dump_byte_list(ACPI_GET16\n\t\t\t\t\t\t       (previous_target),\n\t\t\t\t\t\t       target);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_DWORDLIST:\n\t\t\t \n\t\t\tif (previous_target) {\n\t\t\t\tacpi_rs_dump_dword_list(*previous_target,\n\t\t\t\t\t\t\tACPI_CAST_PTR(u32,\n\t\t\t\t\t\t\t\t      target));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_WORDLIST:\n\t\t\t \n\t\t\tif (previous_target) {\n\t\t\t\tacpi_rs_dump_word_list(*previous_target,\n\t\t\t\t\t\t       *(ACPI_CAST_INDIRECT_PTR\n\t\t\t\t\t\t\t (u16, target)));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_ADDRESS:\n\t\t\t \n\t\t\tacpi_rs_dump_address_common(ACPI_CAST_PTR\n\t\t\t\t\t\t    (union acpi_resource_data,\n\t\t\t\t\t\t     target));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_SOURCE:\n\t\t\t \n\t\t\tacpi_rs_dump_resource_source(ACPI_CAST_PTR\n\t\t\t\t\t\t     (struct\n\t\t\t\t\t\t\t\t   acpi_resource_source,\n\t\t\t\t\t\t\t\t   target));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_LABEL:\n\t\t\t \n\t\t\tacpi_rs_dump_resource_label(\"Resource Label\",\n\t\t\t\t\t\t    ACPI_CAST_PTR(struct\n\t\t\t\t\t\t\t\t  acpi_resource_label,\n\t\t\t\t\t\t\t\t  target));\n\t\t\tbreak;\n\n\t\tcase ACPI_RSD_SOURCE_LABEL:\n\t\t\t \n\t\t\tacpi_rs_dump_resource_label(\"Resource Source Label\",\n\t\t\t\t\t\t    ACPI_CAST_PTR(struct\n\t\t\t\t\t\t\t\t  acpi_resource_label,\n\t\t\t\t\t\t\t\t  target));\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tacpi_os_printf(\"**** Invalid table opcode [%X] ****\\n\",\n\t\t\t\t       table->opcode);\n\t\t\treturn;\n\t\t}\n\n\t\ttable++;\n\t\tcount--;\n\t}\n}\n\n \n\nstatic void\nacpi_rs_dump_resource_source(struct acpi_resource_source *resource_source)\n{\n\tACPI_FUNCTION_ENTRY();\n\n\tif (resource_source->index == 0xFF) {\n\t\treturn;\n\t}\n\n\tacpi_rs_out_integer8(\"Resource Source Index\", resource_source->index);\n\n\tacpi_rs_out_string(\"Resource Source\",\n\t\t\t   resource_source->string_ptr ?\n\t\t\t   resource_source->string_ptr : \"[Not Specified]\");\n}\n\n \n\nstatic void\nacpi_rs_dump_resource_label(char *title,\n\t\t\t    struct acpi_resource_label *resource_label)\n{\n\tACPI_FUNCTION_ENTRY();\n\n\tacpi_rs_out_string(title,\n\t\t\t   resource_label->string_ptr ?\n\t\t\t   resource_label->string_ptr : \"[Not Specified]\");\n}\n\n \n\nstatic void acpi_rs_dump_address_common(union acpi_resource_data *resource)\n{\n\tACPI_FUNCTION_ENTRY();\n\n\t \n\n\tswitch (resource->address.resource_type) {\n\tcase ACPI_MEMORY_RANGE:\n\n\t\tacpi_rs_dump_descriptor(resource, acpi_rs_dump_memory_flags);\n\t\tbreak;\n\n\tcase ACPI_IO_RANGE:\n\n\t\tacpi_rs_dump_descriptor(resource, acpi_rs_dump_io_flags);\n\t\tbreak;\n\n\tcase ACPI_BUS_NUMBER_RANGE:\n\n\t\tacpi_rs_out_string(\"Resource Type\", \"Bus Number Range\");\n\t\tbreak;\n\n\tdefault:\n\n\t\tacpi_rs_out_integer8(\"Resource Type\",\n\t\t\t\t     (u8) resource->address.resource_type);\n\t\tbreak;\n\t}\n\n\t \n\n\tacpi_rs_dump_descriptor(resource, acpi_rs_dump_general_flags);\n}\n\n \n\nstatic void acpi_rs_out_string(const char *title, const char *value)\n{\n\n\tacpi_os_printf(\"%27s : %s\", title, value);\n\tif (!*value) {\n\t\tacpi_os_printf(\"[NULL NAMESTRING]\");\n\t}\n\tacpi_os_printf(\"\\n\");\n}\n\nstatic void acpi_rs_out_integer8(const char *title, u8 value)\n{\n\tacpi_os_printf(\"%27s : %2.2X\\n\", title, value);\n}\n\nstatic void acpi_rs_out_integer16(const char *title, u16 value)\n{\n\n\tacpi_os_printf(\"%27s : %4.4X\\n\", title, value);\n}\n\nstatic void acpi_rs_out_integer32(const char *title, u32 value)\n{\n\n\tacpi_os_printf(\"%27s : %8.8X\\n\", title, value);\n}\n\nstatic void acpi_rs_out_integer64(const char *title, u64 value)\n{\n\n\tacpi_os_printf(\"%27s : %8.8X%8.8X\\n\", title, ACPI_FORMAT_UINT64(value));\n}\n\nstatic void acpi_rs_out_title(const char *title)\n{\n\n\tacpi_os_printf(\"%27s : \", title);\n}\n\n \n\nstatic void acpi_rs_dump_byte_list(u16 length, u8 * data)\n{\n\tu16 i;\n\n\tfor (i = 0; i < length; i++) {\n\t\tacpi_os_printf(\"%25s%2.2X : %2.2X\\n\", \"Byte\", i, data[i]);\n\t}\n}\n\nstatic void acpi_rs_dump_short_byte_list(u8 length, u8 * data)\n{\n\tu8 i;\n\n\tfor (i = 0; i < length; i++) {\n\t\tacpi_os_printf(\"%X \", data[i]);\n\t}\n\n\tacpi_os_printf(\"\\n\");\n}\n\nstatic void acpi_rs_dump_dword_list(u8 length, u32 * data)\n{\n\tu8 i;\n\n\tfor (i = 0; i < length; i++) {\n\t\tacpi_os_printf(\"%25s%2.2X : %8.8X\\n\", \"Dword\", i, data[i]);\n\t}\n}\n\nstatic void acpi_rs_dump_word_list(u16 length, u16 *data)\n{\n\tu16 i;\n\n\tfor (i = 0; i < length; i++) {\n\t\tacpi_os_printf(\"%25s%2.2X : %4.4X\\n\", \"Word\", i, data[i]);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}