{
  "module_name": "evxfevnt.c",
  "hash_id": "cd15aacaf4491bdc9f3af45a7cab600a2fb8b2864d10b4934e6adcf948bb19f5",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/evxfevnt.c",
  "human_readable_source": "\n \n\n#define EXPORT_ACPI_INTERFACES\n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"actables.h\"\n\n#define _COMPONENT          ACPI_EVENTS\nACPI_MODULE_NAME(\"evxfevnt\")\n\n#if (!ACPI_REDUCED_HARDWARE)\t \n \nacpi_status acpi_enable(void)\n{\n\tacpi_status status;\n\tint retry;\n\n\tACPI_FUNCTION_TRACE(acpi_enable);\n\n\t \n\n\tif (acpi_gbl_fadt_index == ACPI_INVALID_TABLE_INDEX) {\n\t\treturn_ACPI_STATUS(AE_NO_ACPI_TABLES);\n\t}\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tif (acpi_hw_get_mode() == ACPI_SYS_MODE_ACPI) {\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INIT,\n\t\t\t\t  \"System is already in ACPI mode\\n\"));\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tstatus = acpi_hw_set_mode(ACPI_SYS_MODE_ACPI);\n\tif (ACPI_FAILURE(status)) {\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Could not transition to ACPI mode\"));\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\t \n\n\tfor (retry = 0; retry < 30000; ++retry) {\n\t\tif (acpi_hw_get_mode() == ACPI_SYS_MODE_ACPI) {\n\t\t\tif (retry != 0)\n\t\t\t\tACPI_WARNING((AE_INFO,\n\t\t\t\t\"Platform took > %d00 usec to enter ACPI mode\", retry));\n\t\t\treturn_ACPI_STATUS(AE_OK);\n\t\t}\n\t\tacpi_os_stall(100);\t \n\t}\n\n\tACPI_ERROR((AE_INFO, \"Hardware did not enter ACPI mode\"));\n\treturn_ACPI_STATUS(AE_NO_HARDWARE_RESPONSE);\n}\n\nACPI_EXPORT_SYMBOL(acpi_enable)\n\n \nacpi_status acpi_disable(void)\n{\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE(acpi_disable);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\tif (acpi_hw_get_mode() == ACPI_SYS_MODE_LEGACY) {\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INIT,\n\t\t\t\t  \"System is already in legacy (non-ACPI) mode\\n\"));\n\t} else {\n\t\t \n\n\t\tstatus = acpi_hw_set_mode(ACPI_SYS_MODE_LEGACY);\n\n\t\tif (ACPI_FAILURE(status)) {\n\t\t\tACPI_ERROR((AE_INFO,\n\t\t\t\t    \"Could not exit ACPI mode to legacy mode\"));\n\t\t\treturn_ACPI_STATUS(status);\n\t\t}\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INIT, \"ACPI mode disabled\\n\"));\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\nACPI_EXPORT_SYMBOL(acpi_disable)\n\n \nacpi_status acpi_enable_event(u32 event, u32 flags)\n{\n\tacpi_status status = AE_OK;\n\tu32 value;\n\n\tACPI_FUNCTION_TRACE(acpi_enable_event);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tif (event > ACPI_EVENT_MAX) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\tstatus =\n\t    acpi_write_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t    enable_register_id, ACPI_ENABLE_EVENT);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\t \n\n\tstatus =\n\t    acpi_read_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t   enable_register_id, &value);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (value != 1) {\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Could not enable %s event\",\n\t\t\t    acpi_ut_get_event_name(event)));\n\t\treturn_ACPI_STATUS(AE_NO_HARDWARE_RESPONSE);\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\nACPI_EXPORT_SYMBOL(acpi_enable_event)\n\n \nacpi_status acpi_disable_event(u32 event, u32 flags)\n{\n\tacpi_status status = AE_OK;\n\tu32 value;\n\n\tACPI_FUNCTION_TRACE(acpi_disable_event);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tif (event > ACPI_EVENT_MAX) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\tstatus =\n\t    acpi_write_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t    enable_register_id, ACPI_DISABLE_EVENT);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tstatus =\n\t    acpi_read_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t   enable_register_id, &value);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (value != 0) {\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Could not disable %s events\",\n\t\t\t    acpi_ut_get_event_name(event)));\n\t\treturn_ACPI_STATUS(AE_NO_HARDWARE_RESPONSE);\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\nACPI_EXPORT_SYMBOL(acpi_disable_event)\n\n \nacpi_status acpi_clear_event(u32 event)\n{\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE(acpi_clear_event);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\n\tif (event > ACPI_EVENT_MAX) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\tstatus =\n\t    acpi_write_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t    status_register_id, ACPI_CLEAR_STATUS);\n\n\treturn_ACPI_STATUS(status);\n}\n\nACPI_EXPORT_SYMBOL(acpi_clear_event)\n\n \nacpi_status acpi_get_event_status(u32 event, acpi_event_status * event_status)\n{\n\tacpi_status status;\n\tacpi_event_status local_event_status = 0;\n\tu32 in_byte;\n\n\tACPI_FUNCTION_TRACE(acpi_get_event_status);\n\n\tif (!event_status) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\n\tif (event > ACPI_EVENT_MAX) {\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\t \n\n\tif (acpi_gbl_fixed_event_handlers[event].handler) {\n\t\tlocal_event_status |= ACPI_EVENT_FLAG_HAS_HANDLER;\n\t}\n\n\t \n\n\tstatus =\n\t    acpi_read_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t   enable_register_id, &in_byte);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (in_byte) {\n\t\tlocal_event_status |=\n\t\t    (ACPI_EVENT_FLAG_ENABLED | ACPI_EVENT_FLAG_ENABLE_SET);\n\t}\n\n\t \n\n\tstatus =\n\t    acpi_read_bit_register(acpi_gbl_fixed_event_info[event].\n\t\t\t\t   status_register_id, &in_byte);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (in_byte) {\n\t\tlocal_event_status |= ACPI_EVENT_FLAG_STATUS_SET;\n\t}\n\n\t(*event_status) = local_event_status;\n\treturn_ACPI_STATUS(AE_OK);\n}\n\nACPI_EXPORT_SYMBOL(acpi_get_event_status)\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}