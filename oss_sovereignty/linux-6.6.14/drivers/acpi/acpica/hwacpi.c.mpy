{
  "module_name": "hwacpi.c",
  "hash_id": "997a4024a0420cb3298ca485dd858ec6eb1123e9bd7776985edf1e206784c46b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/hwacpi.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n\n#define _COMPONENT          ACPI_HARDWARE\nACPI_MODULE_NAME(\"hwacpi\")\n\n#if (!ACPI_REDUCED_HARDWARE)\t \n \nacpi_status acpi_hw_set_mode(u32 mode)\n{\n\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(hw_set_mode);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\t \n\tif (!acpi_gbl_FADT.smi_command) {\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"No SMI_CMD in FADT, mode transition failed\"));\n\t\treturn_ACPI_STATUS(AE_NO_HARDWARE_RESPONSE);\n\t}\n\n\t \n\tif (!acpi_gbl_FADT.acpi_enable && !acpi_gbl_FADT.acpi_disable) {\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"No ACPI mode transition supported in this system \"\n\t\t\t    \"(enable/disable both zero)\"));\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\tswitch (mode) {\n\tcase ACPI_SYS_MODE_ACPI:\n\n\t\t \n\n\t\tstatus = acpi_hw_write_port(acpi_gbl_FADT.smi_command,\n\t\t\t\t\t    (u32) acpi_gbl_FADT.acpi_enable, 8);\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t\t  \"Attempting to enable ACPI mode\\n\"));\n\t\tbreak;\n\n\tcase ACPI_SYS_MODE_LEGACY:\n\t\t \n\t\tstatus = acpi_hw_write_port(acpi_gbl_FADT.smi_command,\n\t\t\t\t\t    (u32)acpi_gbl_FADT.acpi_disable, 8);\n\t\tACPI_DEBUG_PRINT((ACPI_DB_INFO,\n\t\t\t\t  \"Attempting to enable Legacy (non-ACPI) mode\\n\"));\n\t\tbreak;\n\n\tdefault:\n\n\t\treturn_ACPI_STATUS(AE_BAD_PARAMETER);\n\t}\n\n\tif (ACPI_FAILURE(status)) {\n\t\tACPI_EXCEPTION((AE_INFO, status,\n\t\t\t\t\"Could not write ACPI mode change\"));\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\treturn_ACPI_STATUS(AE_OK);\n}\n\n \n\nu32 acpi_hw_get_mode(void)\n{\n\tacpi_status status;\n\tu32 value;\n\n\tACPI_FUNCTION_TRACE(hw_get_mode);\n\n\t \n\n\tif (acpi_gbl_reduced_hardware) {\n\t\treturn_UINT32(ACPI_SYS_MODE_ACPI);\n\t}\n\n\t \n\tif (!acpi_gbl_FADT.smi_command) {\n\t\treturn_UINT32(ACPI_SYS_MODE_ACPI);\n\t}\n\n\tstatus = acpi_read_bit_register(ACPI_BITREG_SCI_ENABLE, &value);\n\tif (ACPI_FAILURE(status)) {\n\t\treturn_UINT32(ACPI_SYS_MODE_LEGACY);\n\t}\n\n\tif (value) {\n\t\treturn_UINT32(ACPI_SYS_MODE_ACPI);\n\t} else {\n\t\treturn_UINT32(ACPI_SYS_MODE_LEGACY);\n\t}\n}\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}