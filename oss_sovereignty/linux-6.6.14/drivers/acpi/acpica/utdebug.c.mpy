{
  "module_name": "utdebug.c",
  "hash_id": "b92cdd38af3a09261841efbd2c330678c3580864a94f439b5a5171d3a5ca9afd",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/utdebug.c",
  "human_readable_source": "\n \n\n#define EXPORT_ACPI_INTERFACES\n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_UTILITIES\nACPI_MODULE_NAME(\"utdebug\")\n\n#ifdef ACPI_DEBUG_OUTPUT\nstatic acpi_thread_id acpi_gbl_previous_thread_id = (acpi_thread_id) 0xFFFFFFFF;\nstatic const char *acpi_gbl_function_entry_prefix = \"----Entry\";\nstatic const char *acpi_gbl_function_exit_prefix = \"----Exit-\";\n\n \n\nvoid acpi_ut_init_stack_ptr_trace(void)\n{\n\tacpi_size current_sp;\n\n#pragma GCC diagnostic push\n#if defined(__GNUC__) && __GNUC__ >= 12\n#pragma GCC diagnostic ignored \"-Wdangling-pointer=\"\n#endif\n\tacpi_gbl_entry_stack_pointer = &current_sp;\n#pragma GCC diagnostic pop\n}\n\n \n\nvoid acpi_ut_track_stack_ptr(void)\n{\n\tacpi_size current_sp;\n\n\tif (&current_sp < acpi_gbl_lowest_stack_pointer) {\n\t\tacpi_gbl_lowest_stack_pointer = &current_sp;\n\t}\n\n\tif (acpi_gbl_nesting_level > acpi_gbl_deepest_nesting) {\n\t\tacpi_gbl_deepest_nesting = acpi_gbl_nesting_level;\n\t}\n}\n\n \n\nstatic const char *acpi_ut_trim_function_name(const char *function_name)\n{\n\n\t \n\n\tif (*(ACPI_CAST_PTR(u32, function_name)) == ACPI_PREFIX_MIXED) {\n\n\t\t \n\n\t\treturn (function_name + 4);\n\t}\n\n\tif (*(ACPI_CAST_PTR(u32, function_name)) == ACPI_PREFIX_LOWER) {\n\n\t\t \n\n\t\treturn (function_name + 5);\n\t}\n\n\treturn (function_name);\n}\n\n \n\nvoid ACPI_INTERNAL_VAR_XFACE\nacpi_debug_print(u32 requested_debug_level,\n\t\t u32 line_number,\n\t\t const char *function_name,\n\t\t const char *module_name,\n\t\t u32 component_id, const char *format, ...)\n{\n\tacpi_thread_id thread_id;\n\tva_list args;\n#ifdef ACPI_APPLICATION\n\tint fill_count;\n#endif\n\n\t \n\n\tif (!ACPI_IS_DEBUG_ENABLED(requested_debug_level, component_id)) {\n\t\treturn;\n\t}\n\n\t \n\tthread_id = acpi_os_get_thread_id();\n\tif (thread_id != acpi_gbl_previous_thread_id) {\n\t\tif (ACPI_LV_THREADS & acpi_dbg_level) {\n\t\t\tacpi_os_printf\n\t\t\t    (\"\\n**** Context Switch from TID %u to TID %u ****\\n\\n\",\n\t\t\t     (u32)acpi_gbl_previous_thread_id, (u32)thread_id);\n\t\t}\n\n\t\tacpi_gbl_previous_thread_id = thread_id;\n\t\tacpi_gbl_nesting_level = 0;\n\t}\n\n\t \n\tacpi_os_printf(\"%9s-%04d \", module_name, line_number);\n\n#ifdef ACPI_APPLICATION\n\t \n\tif (ACPI_LV_THREADS & acpi_dbg_level) {\n\t\tacpi_os_printf(\"[%u] \", (u32)thread_id);\n\t}\n\n\tfill_count = 48 - acpi_gbl_nesting_level -\n\t    strlen(acpi_ut_trim_function_name(function_name));\n\tif (fill_count < 0) {\n\t\tfill_count = 0;\n\t}\n\n\tacpi_os_printf(\"[%02d] %*s\",\n\t\t       acpi_gbl_nesting_level, acpi_gbl_nesting_level + 1, \" \");\n\tacpi_os_printf(\"%s%*s: \",\n\t\t       acpi_ut_trim_function_name(function_name), fill_count,\n\t\t       \" \");\n\n#else\n\tacpi_os_printf(\"%-22.22s: \", acpi_ut_trim_function_name(function_name));\n#endif\n\n\tva_start(args, format);\n\tacpi_os_vprintf(format, args);\n\tva_end(args);\n}\n\nACPI_EXPORT_SYMBOL(acpi_debug_print)\n\n \nvoid ACPI_INTERNAL_VAR_XFACE\nacpi_debug_print_raw(u32 requested_debug_level,\n\t\t     u32 line_number,\n\t\t     const char *function_name,\n\t\t     const char *module_name,\n\t\t     u32 component_id, const char *format, ...)\n{\n\tva_list args;\n\n\t \n\n\tif (!ACPI_IS_DEBUG_ENABLED(requested_debug_level, component_id)) {\n\t\treturn;\n\t}\n\n\tva_start(args, format);\n\tacpi_os_vprintf(format, args);\n\tva_end(args);\n}\n\nACPI_EXPORT_SYMBOL(acpi_debug_print_raw)\n\n \nvoid\nacpi_ut_trace(u32 line_number,\n\t      const char *function_name,\n\t      const char *module_name, u32 component_id)\n{\n\n\tacpi_gbl_nesting_level++;\n\tacpi_ut_track_stack_ptr();\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s\\n\",\n\t\t\t\t acpi_gbl_function_entry_prefix);\n\t}\n}\n\nACPI_EXPORT_SYMBOL(acpi_ut_trace)\n\n \nvoid\nacpi_ut_trace_ptr(u32 line_number,\n\t\t  const char *function_name,\n\t\t  const char *module_name,\n\t\t  u32 component_id, const void *pointer)\n{\n\n\tacpi_gbl_nesting_level++;\n\tacpi_ut_track_stack_ptr();\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %p\\n\",\n\t\t\t\t acpi_gbl_function_entry_prefix, pointer);\n\t}\n}\n\n \n\nvoid\nacpi_ut_trace_str(u32 line_number,\n\t\t  const char *function_name,\n\t\t  const char *module_name, u32 component_id, const char *string)\n{\n\n\tacpi_gbl_nesting_level++;\n\tacpi_ut_track_stack_ptr();\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %s\\n\",\n\t\t\t\t acpi_gbl_function_entry_prefix, string);\n\t}\n}\n\n \n\nvoid\nacpi_ut_trace_u32(u32 line_number,\n\t\t  const char *function_name,\n\t\t  const char *module_name, u32 component_id, u32 integer)\n{\n\n\tacpi_gbl_nesting_level++;\n\tacpi_ut_track_stack_ptr();\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %08X\\n\",\n\t\t\t\t acpi_gbl_function_entry_prefix, integer);\n\t}\n}\n\n \n\nvoid\nacpi_ut_exit(u32 line_number,\n\t     const char *function_name,\n\t     const char *module_name, u32 component_id)\n{\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s\\n\",\n\t\t\t\t acpi_gbl_function_exit_prefix);\n\t}\n\n\tif (acpi_gbl_nesting_level) {\n\t\tacpi_gbl_nesting_level--;\n\t}\n}\n\nACPI_EXPORT_SYMBOL(acpi_ut_exit)\n\n \nvoid\nacpi_ut_status_exit(u32 line_number,\n\t\t    const char *function_name,\n\t\t    const char *module_name,\n\t\t    u32 component_id, acpi_status status)\n{\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tif (ACPI_SUCCESS(status)) {\n\t\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t\t line_number, function_name,\n\t\t\t\t\t module_name, component_id, \"%s %s\\n\",\n\t\t\t\t\t acpi_gbl_function_exit_prefix,\n\t\t\t\t\t acpi_format_exception(status));\n\t\t} else {\n\t\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t\t line_number, function_name,\n\t\t\t\t\t module_name, component_id,\n\t\t\t\t\t \"%s ****Exception****: %s\\n\",\n\t\t\t\t\t acpi_gbl_function_exit_prefix,\n\t\t\t\t\t acpi_format_exception(status));\n\t\t}\n\t}\n\n\tif (acpi_gbl_nesting_level) {\n\t\tacpi_gbl_nesting_level--;\n\t}\n}\n\nACPI_EXPORT_SYMBOL(acpi_ut_status_exit)\n\n \nvoid\nacpi_ut_value_exit(u32 line_number,\n\t\t   const char *function_name,\n\t\t   const char *module_name, u32 component_id, u64 value)\n{\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %8.8X%8.8X\\n\",\n\t\t\t\t acpi_gbl_function_exit_prefix,\n\t\t\t\t ACPI_FORMAT_UINT64(value));\n\t}\n\n\tif (acpi_gbl_nesting_level) {\n\t\tacpi_gbl_nesting_level--;\n\t}\n}\n\nACPI_EXPORT_SYMBOL(acpi_ut_value_exit)\n\n \nvoid\nacpi_ut_ptr_exit(u32 line_number,\n\t\t const char *function_name,\n\t\t const char *module_name, u32 component_id, u8 *ptr)\n{\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %p\\n\",\n\t\t\t\t acpi_gbl_function_exit_prefix, ptr);\n\t}\n\n\tif (acpi_gbl_nesting_level) {\n\t\tacpi_gbl_nesting_level--;\n\t}\n}\n\n \n\nvoid\nacpi_ut_str_exit(u32 line_number,\n\t\t const char *function_name,\n\t\t const char *module_name, u32 component_id, const char *string)\n{\n\n\t \n\n\tif (ACPI_IS_DEBUG_ENABLED(ACPI_LV_FUNCTIONS, component_id)) {\n\t\tacpi_debug_print(ACPI_LV_FUNCTIONS,\n\t\t\t\t line_number, function_name, module_name,\n\t\t\t\t component_id, \"%s %s\\n\",\n\t\t\t\t acpi_gbl_function_exit_prefix, string);\n\t}\n\n\tif (acpi_gbl_nesting_level) {\n\t\tacpi_gbl_nesting_level--;\n\t}\n}\n\n \n\nvoid\nacpi_trace_point(acpi_trace_event_type type, u8 begin, u8 *aml, char *pathname)\n{\n\n\tACPI_FUNCTION_ENTRY();\n\n\tacpi_ex_trace_point(type, begin, aml, pathname);\n\n#ifdef ACPI_USE_SYSTEM_TRACER\n\tacpi_os_trace_point(type, begin, aml, pathname);\n#endif\n}\n\nACPI_EXPORT_SYMBOL(acpi_trace_point)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}