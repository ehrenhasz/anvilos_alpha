{
  "module_name": "exresnte.c",
  "hash_id": "4cde61b20ca4abe45742004698eb55e0f07f957a4981daf7c380b40f139906af",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/exresnte.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acdispat.h\"\n#include \"acinterp.h\"\n#include \"acnamesp.h\"\n\n#define _COMPONENT          ACPI_EXECUTER\nACPI_MODULE_NAME(\"exresnte\")\n\n \nacpi_status\nacpi_ex_resolve_node_to_value(struct acpi_namespace_node **object_ptr,\n\t\t\t      struct acpi_walk_state *walk_state)\n{\n\tacpi_status status = AE_OK;\n\tunion acpi_operand_object *source_desc;\n\tunion acpi_operand_object *obj_desc = NULL;\n\tstruct acpi_namespace_node *node;\n\tacpi_object_type entry_type;\n\n\tACPI_FUNCTION_TRACE(ex_resolve_node_to_value);\n\n\t \n\tnode = *object_ptr;\n\tsource_desc = acpi_ns_get_attached_object(node);\n\tentry_type = acpi_ns_get_type((acpi_handle)node);\n\n\tACPI_DEBUG_PRINT((ACPI_DB_EXEC, \"Entry=%p SourceDesc=%p [%s]\\n\",\n\t\t\t  node, source_desc,\n\t\t\t  acpi_ut_get_type_name(entry_type)));\n\n\tif ((entry_type == ACPI_TYPE_LOCAL_ALIAS) ||\n\t    (entry_type == ACPI_TYPE_LOCAL_METHOD_ALIAS)) {\n\n\t\t \n\n\t\tnode = ACPI_CAST_PTR(struct acpi_namespace_node, node->object);\n\t\tsource_desc = acpi_ns_get_attached_object(node);\n\t\tentry_type = acpi_ns_get_type((acpi_handle)node);\n\t\t*object_ptr = node;\n\t}\n\n\t \n\tif ((entry_type == ACPI_TYPE_DEVICE) ||\n\t    (entry_type == ACPI_TYPE_THERMAL) ||\n\t    (entry_type == ACPI_TYPE_METHOD) ||\n\t    (node->flags & (ANOBJ_METHOD_ARG | ANOBJ_METHOD_LOCAL))) {\n\t\treturn_ACPI_STATUS(AE_OK);\n\t}\n\n\tif (!source_desc) {\n\t\tACPI_ERROR((AE_INFO, \"No object attached to node [%4.4s] %p\",\n\t\t\t    node->name.ascii, node));\n\t\treturn_ACPI_STATUS(AE_AML_UNINITIALIZED_NODE);\n\t}\n\n\t \n\tswitch (entry_type) {\n\tcase ACPI_TYPE_PACKAGE:\n\n\t\tif (source_desc->common.type != ACPI_TYPE_PACKAGE) {\n\t\t\tACPI_ERROR((AE_INFO, \"Object not a Package, type %s\",\n\t\t\t\t    acpi_ut_get_object_type_name(source_desc)));\n\t\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\t\t}\n\n\t\tstatus = acpi_ds_get_package_arguments(source_desc);\n\t\tif (ACPI_SUCCESS(status)) {\n\n\t\t\t \n\n\t\t\tobj_desc = source_desc;\n\t\t\tacpi_ut_add_reference(obj_desc);\n\t\t}\n\t\tbreak;\n\n\tcase ACPI_TYPE_BUFFER:\n\n\t\tif (source_desc->common.type != ACPI_TYPE_BUFFER) {\n\t\t\tACPI_ERROR((AE_INFO, \"Object not a Buffer, type %s\",\n\t\t\t\t    acpi_ut_get_object_type_name(source_desc)));\n\t\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\t\t}\n\n\t\tstatus = acpi_ds_get_buffer_arguments(source_desc);\n\t\tif (ACPI_SUCCESS(status)) {\n\n\t\t\t \n\n\t\t\tobj_desc = source_desc;\n\t\t\tacpi_ut_add_reference(obj_desc);\n\t\t}\n\t\tbreak;\n\n\tcase ACPI_TYPE_STRING:\n\n\t\tif (source_desc->common.type != ACPI_TYPE_STRING) {\n\t\t\tACPI_ERROR((AE_INFO, \"Object not a String, type %s\",\n\t\t\t\t    acpi_ut_get_object_type_name(source_desc)));\n\t\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\t\t}\n\n\t\t \n\n\t\tobj_desc = source_desc;\n\t\tacpi_ut_add_reference(obj_desc);\n\t\tbreak;\n\n\tcase ACPI_TYPE_INTEGER:\n\n\t\tif (source_desc->common.type != ACPI_TYPE_INTEGER) {\n\t\t\tACPI_ERROR((AE_INFO, \"Object not a Integer, type %s\",\n\t\t\t\t    acpi_ut_get_object_type_name(source_desc)));\n\t\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\t\t}\n\n\t\t \n\n\t\tobj_desc = source_desc;\n\t\tacpi_ut_add_reference(obj_desc);\n\t\tbreak;\n\n\tcase ACPI_TYPE_BUFFER_FIELD:\n\tcase ACPI_TYPE_LOCAL_REGION_FIELD:\n\tcase ACPI_TYPE_LOCAL_BANK_FIELD:\n\tcase ACPI_TYPE_LOCAL_INDEX_FIELD:\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_EXEC,\n\t\t\t\t  \"FieldRead Node=%p SourceDesc=%p Type=%X\\n\",\n\t\t\t\t  node, source_desc, entry_type));\n\n\t\tstatus =\n\t\t    acpi_ex_read_data_from_field(walk_state, source_desc,\n\t\t\t\t\t\t &obj_desc);\n\t\tbreak;\n\n\t\t \n\n\tcase ACPI_TYPE_MUTEX:\n\tcase ACPI_TYPE_POWER:\n\tcase ACPI_TYPE_PROCESSOR:\n\tcase ACPI_TYPE_EVENT:\n\tcase ACPI_TYPE_REGION:\n\n\t\t \n\n\t\tobj_desc = source_desc;\n\t\tacpi_ut_add_reference(obj_desc);\n\t\tbreak;\n\n\t\t \n\n\tcase ACPI_TYPE_ANY:\n\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Untyped entry %p, no attached object!\", node));\n\n\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\t \n\n\tcase ACPI_TYPE_LOCAL_REFERENCE:\n\n\t\tswitch (source_desc->reference.class) {\n\t\tcase ACPI_REFCLASS_TABLE:\t \n\t\tcase ACPI_REFCLASS_REFOF:\n\t\tcase ACPI_REFCLASS_INDEX:\n\n\t\t\t \n\n\t\t\tobj_desc = source_desc;\n\t\t\tacpi_ut_add_reference(obj_desc);\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\t \n\n\t\t\tACPI_ERROR((AE_INFO,\n\t\t\t\t    \"Unsupported Reference type 0x%X\",\n\t\t\t\t    source_desc->reference.class));\n\n\t\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\t\t}\n\t\tbreak;\n\n\tdefault:\n\n\t\t \n\n\t\tACPI_ERROR((AE_INFO,\n\t\t\t    \"Node %p - Unknown object type 0x%X\",\n\t\t\t    node, entry_type));\n\n\t\treturn_ACPI_STATUS(AE_AML_OPERAND_TYPE);\n\n\t}\t\t\t \n\n\t \n\n\t*object_ptr = (void *)obj_desc;\n\treturn_ACPI_STATUS(status);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}