{
  "module_name": "extrace.c",
  "hash_id": "add2a2f2d2ee53cae494ed845bf029ff06eb6507b24e13b284c52bbee5394293",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/extrace.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acnamesp.h\"\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_EXECUTER\nACPI_MODULE_NAME(\"extrace\")\n\nstatic union acpi_operand_object *acpi_gbl_trace_method_object = NULL;\n\n \n\n#ifdef ACPI_DEBUG_OUTPUT\nstatic const char *acpi_ex_get_trace_event_name(acpi_trace_event_type type);\n#endif\n\n \n\nstatic u8 acpi_ex_interpreter_trace_enabled(char *name)\n{\n\n\t \n\n\tif (!(acpi_gbl_trace_flags & ACPI_TRACE_ENABLED)) {\n\t\treturn (FALSE);\n\t}\n\n\t \n\tif (acpi_gbl_trace_method_object) {\n\t\treturn (TRUE);\n\t}\n\n\tif (name &&\n\t    (acpi_gbl_trace_method_name &&\n\t     strcmp(acpi_gbl_trace_method_name, name))) {\n\t\treturn (FALSE);\n\t}\n\n\tif ((acpi_gbl_trace_flags & ACPI_TRACE_ONESHOT) &&\n\t    !acpi_gbl_trace_method_name) {\n\t\treturn (FALSE);\n\t}\n\n\treturn (TRUE);\n}\n\n \n\n#ifdef ACPI_DEBUG_OUTPUT\n\nstatic const char *acpi_ex_get_trace_event_name(acpi_trace_event_type type)\n{\n\n\tswitch (type) {\n\tcase ACPI_TRACE_AML_METHOD:\n\n\t\treturn \"Method\";\n\n\tcase ACPI_TRACE_AML_OPCODE:\n\n\t\treturn \"Opcode\";\n\n\tcase ACPI_TRACE_AML_REGION:\n\n\t\treturn \"Region\";\n\n\tdefault:\n\n\t\treturn \"\";\n\t}\n}\n\n#endif\n\n \n\nvoid\nacpi_ex_trace_point(acpi_trace_event_type type,\n\t\t    u8 begin, u8 *aml, char *pathname)\n{\n\n\tACPI_FUNCTION_NAME(ex_trace_point);\n\n\tif (pathname) {\n\t\tACPI_DEBUG_PRINT((ACPI_DB_TRACE_POINT,\n\t\t\t\t  \"%s %s [0x%p:%s] execution.\\n\",\n\t\t\t\t  acpi_ex_get_trace_event_name(type),\n\t\t\t\t  begin ? \"Begin\" : \"End\", aml, pathname));\n\t} else {\n\t\tACPI_DEBUG_PRINT((ACPI_DB_TRACE_POINT,\n\t\t\t\t  \"%s %s [0x%p] execution.\\n\",\n\t\t\t\t  acpi_ex_get_trace_event_name(type),\n\t\t\t\t  begin ? \"Begin\" : \"End\", aml));\n\t}\n}\n\n \n\nvoid\nacpi_ex_start_trace_method(struct acpi_namespace_node *method_node,\n\t\t\t   union acpi_operand_object *obj_desc,\n\t\t\t   struct acpi_walk_state *walk_state)\n{\n\tchar *pathname = NULL;\n\tu8 enabled = FALSE;\n\n\tACPI_FUNCTION_NAME(ex_start_trace_method);\n\n\tif (method_node) {\n\t\tpathname = acpi_ns_get_normalized_pathname(method_node, TRUE);\n\t}\n\n\tenabled = acpi_ex_interpreter_trace_enabled(pathname);\n\tif (enabled && !acpi_gbl_trace_method_object) {\n\t\tacpi_gbl_trace_method_object = obj_desc;\n\t\tacpi_gbl_original_dbg_level = acpi_dbg_level;\n\t\tacpi_gbl_original_dbg_layer = acpi_dbg_layer;\n\t\tacpi_dbg_level = ACPI_TRACE_LEVEL_ALL;\n\t\tacpi_dbg_layer = ACPI_TRACE_LAYER_ALL;\n\n\t\tif (acpi_gbl_trace_dbg_level) {\n\t\t\tacpi_dbg_level = acpi_gbl_trace_dbg_level;\n\t\t}\n\n\t\tif (acpi_gbl_trace_dbg_layer) {\n\t\t\tacpi_dbg_layer = acpi_gbl_trace_dbg_layer;\n\t\t}\n\t}\n\n\tif (enabled) {\n\t\tACPI_TRACE_POINT(ACPI_TRACE_AML_METHOD, TRUE,\n\t\t\t\t obj_desc ? obj_desc->method.aml_start : NULL,\n\t\t\t\t pathname);\n\t}\n\n\tif (pathname) {\n\t\tACPI_FREE(pathname);\n\t}\n}\n\n \n\nvoid\nacpi_ex_stop_trace_method(struct acpi_namespace_node *method_node,\n\t\t\t  union acpi_operand_object *obj_desc,\n\t\t\t  struct acpi_walk_state *walk_state)\n{\n\tchar *pathname = NULL;\n\tu8 enabled;\n\n\tACPI_FUNCTION_NAME(ex_stop_trace_method);\n\n\tif (method_node) {\n\t\tpathname = acpi_ns_get_normalized_pathname(method_node, TRUE);\n\t}\n\n\tenabled = acpi_ex_interpreter_trace_enabled(NULL);\n\n\tif (enabled) {\n\t\tACPI_TRACE_POINT(ACPI_TRACE_AML_METHOD, FALSE,\n\t\t\t\t obj_desc ? obj_desc->method.aml_start : NULL,\n\t\t\t\t pathname);\n\t}\n\n\t \n\n\tif (acpi_gbl_trace_method_object == obj_desc) {\n\n\t\t \n\n\t\tif (acpi_gbl_trace_flags & ACPI_TRACE_ONESHOT) {\n\t\t\tacpi_gbl_trace_method_name = NULL;\n\t\t}\n\n\t\tacpi_dbg_level = acpi_gbl_original_dbg_level;\n\t\tacpi_dbg_layer = acpi_gbl_original_dbg_layer;\n\t\tacpi_gbl_trace_method_object = NULL;\n\t}\n\n\tif (pathname) {\n\t\tACPI_FREE(pathname);\n\t}\n}\n\n \n\nvoid\nacpi_ex_start_trace_opcode(union acpi_parse_object *op,\n\t\t\t   struct acpi_walk_state *walk_state)\n{\n\n\tACPI_FUNCTION_NAME(ex_start_trace_opcode);\n\n\tif (acpi_ex_interpreter_trace_enabled(NULL) &&\n\t    (acpi_gbl_trace_flags & ACPI_TRACE_OPCODE)) {\n\t\tACPI_TRACE_POINT(ACPI_TRACE_AML_OPCODE, TRUE,\n\t\t\t\t op->common.aml, op->common.aml_op_name);\n\t}\n}\n\n \n\nvoid\nacpi_ex_stop_trace_opcode(union acpi_parse_object *op,\n\t\t\t  struct acpi_walk_state *walk_state)\n{\n\n\tACPI_FUNCTION_NAME(ex_stop_trace_opcode);\n\n\tif (acpi_ex_interpreter_trace_enabled(NULL) &&\n\t    (acpi_gbl_trace_flags & ACPI_TRACE_OPCODE)) {\n\t\tACPI_TRACE_POINT(ACPI_TRACE_AML_OPCODE, FALSE,\n\t\t\t\t op->common.aml, op->common.aml_op_name);\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}