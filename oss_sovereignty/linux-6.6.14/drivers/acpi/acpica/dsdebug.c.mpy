{
  "module_name": "dsdebug.c",
  "hash_id": "6aae56426e48d092518845527b8293835077b5725f9bcada79b8c5a60b438c76",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/dsdebug.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acdispat.h\"\n#include \"acnamesp.h\"\n#ifdef ACPI_DISASSEMBLER\n#include \"acdisasm.h\"\n#endif\n#include \"acinterp.h\"\n\n#define _COMPONENT          ACPI_DISPATCHER\nACPI_MODULE_NAME(\"dsdebug\")\n\n#if defined(ACPI_DEBUG_OUTPUT) || defined(ACPI_DEBUGGER)\n \nstatic void\nacpi_ds_print_node_pathname(struct acpi_namespace_node *node,\n\t\t\t    const char *message);\n\n \n\nstatic void\nacpi_ds_print_node_pathname(struct acpi_namespace_node *node,\n\t\t\t    const char *message)\n{\n\tstruct acpi_buffer buffer;\n\tacpi_status status;\n\n\tACPI_FUNCTION_TRACE(ds_print_node_pathname);\n\n\tif (!node) {\n\t\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, \"[NULL NAME]\"));\n\t\treturn_VOID;\n\t}\n\n\t \n\n\tbuffer.length = ACPI_ALLOCATE_LOCAL_BUFFER;\n\n\tstatus = acpi_ns_handle_to_pathname(node, &buffer, TRUE);\n\tif (ACPI_SUCCESS(status)) {\n\t\tif (message) {\n\t\t\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, \"%s \",\n\t\t\t\t\t      message));\n\t\t}\n\n\t\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, \"[%s] (Node %p)\",\n\t\t\t\t      (char *)buffer.pointer, node));\n\t\tACPI_FREE(buffer.pointer);\n\t}\n\n\treturn_VOID;\n}\n\n \n\nvoid\nacpi_ds_dump_method_stack(acpi_status status,\n\t\t\t  struct acpi_walk_state *walk_state,\n\t\t\t  union acpi_parse_object *op)\n{\n\tunion acpi_parse_object *next;\n\tstruct acpi_thread_state *thread;\n\tstruct acpi_walk_state *next_walk_state;\n\tstruct acpi_namespace_node *previous_method = NULL;\n\tunion acpi_operand_object *method_desc;\n\n\tACPI_FUNCTION_TRACE(ds_dump_method_stack);\n\n\t \n\n\tif (ACPI_CNTL_EXCEPTION(status)) {\n\t\treturn_VOID;\n\t}\n\n\t \n\n\tif (walk_state->deferred_node) {\n\t\tACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\n\t\t\t\t  \"Executing subtree for Buffer/Package/Region\\n\"));\n\t\treturn_VOID;\n\t}\n\n\t \n\tthread = walk_state->thread;\n\tif (!thread) {\n\t\treturn_VOID;\n\t}\n\n\t \n\n\tACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\n\t\t\t  \"\\n**** Exception %s during execution of method \",\n\t\t\t  acpi_format_exception(status)));\n\n\tacpi_ds_print_node_pathname(walk_state->method_node, NULL);\n\n\t \n\n\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH,\n\t\t\t      \"\\n\\nMethod Execution Stack:\\n\"));\n\tnext_walk_state = thread->walk_state_list;\n\n\t \n\n\twhile (next_walk_state) {\n\t\tmethod_desc = next_walk_state->method_desc;\n\t\tif (method_desc) {\n\t\t\tacpi_ex_stop_trace_method((struct acpi_namespace_node *)\n\t\t\t\t\t\t  method_desc->method.node,\n\t\t\t\t\t\t  method_desc, walk_state);\n\t\t}\n\n\t\tACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\n\t\t\t\t  \"    Method [%4.4s] executing: \",\n\t\t\t\t  acpi_ut_get_node_name(next_walk_state->\n\t\t\t\t\t\t\tmethod_node)));\n\n\t\t \n\n\t\tif (next_walk_state == walk_state) {\n\t\t\tif (op) {\n\n\t\t\t\t \n\n\t\t\t\tnext = op->common.next;\n\t\t\t\top->common.next = NULL;\n\n#ifdef ACPI_DISASSEMBLER\n\t\t\t\tif (walk_state->method_node !=\n\t\t\t\t    acpi_gbl_root_node) {\n\n\t\t\t\t\t \n\n\t\t\t\t\tacpi_os_printf(\"Failed at \");\n\t\t\t\t\tacpi_dm_disassemble(next_walk_state, op,\n\t\t\t\t\t\t\t    ACPI_UINT32_MAX);\n\t\t\t\t}\n#endif\n\t\t\t\top->common.next = next;\n\t\t\t}\n\t\t} else {\n\t\t\t \n\t\t\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH,\n\t\t\t\t\t      \"Call to method \"));\n\t\t\tacpi_ds_print_node_pathname(previous_method, NULL);\n\t\t}\n\n\t\tprevious_method = next_walk_state->method_node;\n\t\tnext_walk_state = next_walk_state->next;\n\t\tACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, \"\\n\"));\n\t}\n\n\treturn_VOID;\n}\n\n#else\nvoid\nacpi_ds_dump_method_stack(acpi_status status,\n\t\t\t  struct acpi_walk_state *walk_state,\n\t\t\t  union acpi_parse_object *op)\n{\n\treturn;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}