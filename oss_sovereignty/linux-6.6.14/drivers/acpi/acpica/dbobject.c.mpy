{
  "module_name": "dbobject.c",
  "hash_id": "a0a64abcae5df6f3c7494532d9fafba3483ce94de62892122274cff4a121bd5b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/dbobject.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acnamesp.h\"\n#include \"acdebug.h\"\n\n#define _COMPONENT          ACPI_CA_DEBUGGER\nACPI_MODULE_NAME(\"dbobject\")\n\n \nstatic void acpi_db_decode_node(struct acpi_namespace_node *node);\n\n \n\nvoid\nacpi_db_dump_method_info(acpi_status status, struct acpi_walk_state *walk_state)\n{\n\tstruct acpi_thread_state *thread;\n\tstruct acpi_namespace_node *node;\n\n\tnode = walk_state->method_node;\n\n\t \n\n\tif (node == acpi_gbl_root_node) {\n\t\treturn;\n\t}\n\n\t \n\n\tif (ACPI_CNTL_EXCEPTION(status)) {\n\t\treturn;\n\t}\n\n\t \n\n\tif (walk_state->deferred_node) {\n\t\tacpi_os_printf(\"Executing subtree for Buffer/Package/Region\\n\");\n\t\treturn;\n\t}\n\n\t \n\tthread = walk_state->thread;\n\tif (!thread) {\n\t\treturn;\n\t}\n\n\t \n\n\tacpi_os_printf(\"\\n\");\n\tacpi_db_decode_locals(walk_state);\n\tacpi_os_printf(\"\\n\");\n\tacpi_db_decode_arguments(walk_state);\n\tacpi_os_printf(\"\\n\");\n}\n\n \n\nvoid acpi_db_decode_internal_object(union acpi_operand_object *obj_desc)\n{\n\tu32 i;\n\n\tif (!obj_desc) {\n\t\tacpi_os_printf(\" Uninitialized\");\n\t\treturn;\n\t}\n\n\tif (ACPI_GET_DESCRIPTOR_TYPE(obj_desc) != ACPI_DESC_TYPE_OPERAND) {\n\t\tacpi_os_printf(\" %p [%s]\", obj_desc,\n\t\t\t       acpi_ut_get_descriptor_name(obj_desc));\n\t\treturn;\n\t}\n\n\tacpi_os_printf(\" %s\", acpi_ut_get_object_type_name(obj_desc));\n\n\tswitch (obj_desc->common.type) {\n\tcase ACPI_TYPE_INTEGER:\n\n\t\tacpi_os_printf(\" %8.8X%8.8X\",\n\t\t\t       ACPI_FORMAT_UINT64(obj_desc->integer.value));\n\t\tbreak;\n\n\tcase ACPI_TYPE_STRING:\n\n\t\tacpi_os_printf(\"(%u) \\\"%.60s\",\n\t\t\t       obj_desc->string.length,\n\t\t\t       obj_desc->string.pointer);\n\n\t\tif (obj_desc->string.length > 60) {\n\t\t\tacpi_os_printf(\"...\");\n\t\t} else {\n\t\t\tacpi_os_printf(\"\\\"\");\n\t\t}\n\t\tbreak;\n\n\tcase ACPI_TYPE_BUFFER:\n\n\t\tacpi_os_printf(\"(%u)\", obj_desc->buffer.length);\n\t\tfor (i = 0; (i < 8) && (i < obj_desc->buffer.length); i++) {\n\t\t\tacpi_os_printf(\" %2.2X\", obj_desc->buffer.pointer[i]);\n\t\t}\n\t\tbreak;\n\n\tdefault:\n\n\t\tacpi_os_printf(\" %p\", obj_desc);\n\t\tbreak;\n\t}\n}\n\n \n\nstatic void acpi_db_decode_node(struct acpi_namespace_node *node)\n{\n\n\tacpi_os_printf(\"<Node>          Name %4.4s\",\n\t\t       acpi_ut_get_node_name(node));\n\n\tif (node->flags & ANOBJ_METHOD_ARG) {\n\t\tacpi_os_printf(\" [Method Arg]\");\n\t}\n\tif (node->flags & ANOBJ_METHOD_LOCAL) {\n\t\tacpi_os_printf(\" [Method Local]\");\n\t}\n\n\tswitch (node->type) {\n\n\t\t \n\n\tcase ACPI_TYPE_DEVICE:\n\n\t\tacpi_os_printf(\" Device\");\n\t\tbreak;\n\n\tcase ACPI_TYPE_THERMAL:\n\n\t\tacpi_os_printf(\" Thermal Zone\");\n\t\tbreak;\n\n\tdefault:\n\n\t\tacpi_db_decode_internal_object(acpi_ns_get_attached_object\n\t\t\t\t\t       (node));\n\t\tbreak;\n\t}\n}\n\n \n\nvoid\nacpi_db_display_internal_object(union acpi_operand_object *obj_desc,\n\t\t\t\tstruct acpi_walk_state *walk_state)\n{\n\tu8 type;\n\n\tacpi_os_printf(\"%p \", obj_desc);\n\n\tif (!obj_desc) {\n\t\tacpi_os_printf(\"<Null Object>\\n\");\n\t\treturn;\n\t}\n\n\t \n\n\tswitch (ACPI_GET_DESCRIPTOR_TYPE(obj_desc)) {\n\tcase ACPI_DESC_TYPE_PARSER:\n\n\t\tacpi_os_printf(\"<Parser> \");\n\t\tbreak;\n\n\tcase ACPI_DESC_TYPE_NAMED:\n\n\t\tacpi_db_decode_node((struct acpi_namespace_node *)obj_desc);\n\t\tbreak;\n\n\tcase ACPI_DESC_TYPE_OPERAND:\n\n\t\ttype = obj_desc->common.type;\n\t\tif (type > ACPI_TYPE_LOCAL_MAX) {\n\t\t\tacpi_os_printf(\" Type %X [Invalid Type]\", (u32)type);\n\t\t\treturn;\n\t\t}\n\n\t\t \n\n\t\tswitch (obj_desc->common.type) {\n\t\tcase ACPI_TYPE_LOCAL_REFERENCE:\n\n\t\t\tacpi_os_printf(\"[%s] \",\n\t\t\t\t       acpi_ut_get_reference_name(obj_desc));\n\n\t\t\t \n\n\t\t\tswitch (obj_desc->reference.class) {\n\t\t\tcase ACPI_REFCLASS_LOCAL:\n\n\t\t\t\tacpi_os_printf(\"%X \",\n\t\t\t\t\t       obj_desc->reference.value);\n\t\t\t\tif (walk_state) {\n\t\t\t\t\tobj_desc = walk_state->local_variables\n\t\t\t\t\t    [obj_desc->reference.value].object;\n\t\t\t\t\tacpi_os_printf(\"%p\", obj_desc);\n\t\t\t\t\tacpi_db_decode_internal_object\n\t\t\t\t\t    (obj_desc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ACPI_REFCLASS_ARG:\n\n\t\t\t\tacpi_os_printf(\"%X \",\n\t\t\t\t\t       obj_desc->reference.value);\n\t\t\t\tif (walk_state) {\n\t\t\t\t\tobj_desc = walk_state->arguments\n\t\t\t\t\t    [obj_desc->reference.value].object;\n\t\t\t\t\tacpi_os_printf(\"%p\", obj_desc);\n\t\t\t\t\tacpi_db_decode_internal_object\n\t\t\t\t\t    (obj_desc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ACPI_REFCLASS_INDEX:\n\n\t\t\t\tswitch (obj_desc->reference.target_type) {\n\t\t\t\tcase ACPI_TYPE_BUFFER_FIELD:\n\n\t\t\t\t\tacpi_os_printf(\"%p\",\n\t\t\t\t\t\t       obj_desc->reference.\n\t\t\t\t\t\t       object);\n\t\t\t\t\tacpi_db_decode_internal_object\n\t\t\t\t\t    (obj_desc->reference.object);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACPI_TYPE_PACKAGE:\n\n\t\t\t\t\tacpi_os_printf(\"%p\",\n\t\t\t\t\t\t       obj_desc->reference.\n\t\t\t\t\t\t       where);\n\t\t\t\t\tif (!obj_desc->reference.where) {\n\t\t\t\t\t\tacpi_os_printf\n\t\t\t\t\t\t    (\" Uninitialized WHERE pointer\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tacpi_db_decode_internal_object(*\n\t\t\t\t\t\t\t\t\t       (obj_desc->\n\t\t\t\t\t\t\t\t\t\treference.\n\t\t\t\t\t\t\t\t\t\twhere));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tacpi_os_printf\n\t\t\t\t\t    (\"Unknown index target type\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ACPI_REFCLASS_REFOF:\n\n\t\t\t\tif (!obj_desc->reference.object) {\n\t\t\t\t\tacpi_os_printf\n\t\t\t\t\t    (\"Uninitialized reference subobject pointer\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t \n\n\t\t\t\tswitch (ACPI_GET_DESCRIPTOR_TYPE\n\t\t\t\t\t(obj_desc->reference.object)) {\n\t\t\t\tcase ACPI_DESC_TYPE_NAMED:\n\n\t\t\t\t\tacpi_db_decode_node(obj_desc->reference.\n\t\t\t\t\t\t\t    object);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACPI_DESC_TYPE_OPERAND:\n\n\t\t\t\t\tacpi_db_decode_internal_object\n\t\t\t\t\t    (obj_desc->reference.object);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ACPI_REFCLASS_NAME:\n\n\t\t\t\tacpi_db_decode_node(obj_desc->reference.node);\n\t\t\t\tbreak;\n\n\t\t\tcase ACPI_REFCLASS_DEBUG:\n\t\t\tcase ACPI_REFCLASS_TABLE:\n\n\t\t\t\tacpi_os_printf(\"\\n\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\t \n\n\t\t\t\tacpi_os_printf(\"%2.2X\\n\",\n\t\t\t\t\t       obj_desc->reference.class);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tacpi_os_printf(\"<Obj>          \");\n\t\t\tacpi_db_decode_internal_object(obj_desc);\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\n\tdefault:\n\n\t\tacpi_os_printf(\"<Not a valid ACPI Object Descriptor> [%s]\",\n\t\t\t       acpi_ut_get_descriptor_name(obj_desc));\n\t\tbreak;\n\t}\n\n\tacpi_os_printf(\"\\n\");\n}\n\n \n\nvoid acpi_db_decode_locals(struct acpi_walk_state *walk_state)\n{\n\tu32 i;\n\tunion acpi_operand_object *obj_desc;\n\tstruct acpi_namespace_node *node;\n\tu8 display_locals = FALSE;\n\n\tnode = walk_state->method_node;\n\n\t \n\n\tif (node == acpi_gbl_root_node) {\n\t\treturn;\n\t}\n\n\tif (!node) {\n\t\tacpi_os_printf\n\t\t    (\"No method node (Executing subtree for buffer or opregion)\\n\");\n\t\treturn;\n\t}\n\n\tif (node->type != ACPI_TYPE_METHOD) {\n\t\tacpi_os_printf(\"Executing subtree for Buffer/Package/Region\\n\");\n\t\treturn;\n\t}\n\n\t \n\n\tfor (i = 0; i < ACPI_METHOD_NUM_LOCALS; i++) {\n\t\tobj_desc = walk_state->local_variables[i].object;\n\t\tif (obj_desc) {\n\t\t\tdisplay_locals = TRUE;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t \n\n\tif (display_locals) {\n\t\tacpi_os_printf\n\t\t    (\"\\nInitialized Local Variables for Method [%4.4s]:\\n\",\n\t\t     acpi_ut_get_node_name(node));\n\n\t\tfor (i = 0; i < ACPI_METHOD_NUM_LOCALS; i++) {\n\t\t\tobj_desc = walk_state->local_variables[i].object;\n\t\t\tif (obj_desc) {\n\t\t\t\tacpi_os_printf(\"  Local%X: \", i);\n\t\t\t\tacpi_db_display_internal_object(obj_desc,\n\t\t\t\t\t\t\t\twalk_state);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tacpi_os_printf\n\t\t    (\"No Local Variables are initialized for Method [%4.4s]\\n\",\n\t\t     acpi_ut_get_node_name(node));\n\t}\n}\n\n \n\nvoid acpi_db_decode_arguments(struct acpi_walk_state *walk_state)\n{\n\tu32 i;\n\tunion acpi_operand_object *obj_desc;\n\tstruct acpi_namespace_node *node;\n\tu8 display_args = FALSE;\n\n\tnode = walk_state->method_node;\n\n\t \n\n\tif (node == acpi_gbl_root_node) {\n\t\treturn;\n\t}\n\n\tif (!node) {\n\t\tacpi_os_printf\n\t\t    (\"No method node (Executing subtree for buffer or opregion)\\n\");\n\t\treturn;\n\t}\n\n\tif (node->type != ACPI_TYPE_METHOD) {\n\t\tacpi_os_printf(\"Executing subtree for Buffer/Package/Region\\n\");\n\t\treturn;\n\t}\n\n\t \n\n\tfor (i = 0; i < ACPI_METHOD_NUM_ARGS; i++) {\n\t\tobj_desc = walk_state->arguments[i].object;\n\t\tif (obj_desc) {\n\t\t\tdisplay_args = TRUE;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t \n\n\tif (display_args) {\n\t\tacpi_os_printf(\"Initialized Arguments for Method [%4.4s]:  \"\n\t\t\t       \"(%X arguments defined for method invocation)\\n\",\n\t\t\t       acpi_ut_get_node_name(node),\n\t\t\t       node->object->method.param_count);\n\n\t\tfor (i = 0; i < ACPI_METHOD_NUM_ARGS; i++) {\n\t\t\tobj_desc = walk_state->arguments[i].object;\n\t\t\tif (obj_desc) {\n\t\t\t\tacpi_os_printf(\"  Arg%u:   \", i);\n\t\t\t\tacpi_db_display_internal_object(obj_desc,\n\t\t\t\t\t\t\t\twalk_state);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tacpi_os_printf\n\t\t    (\"No Arguments are initialized for method [%4.4s]\\n\",\n\t\t     acpi_ut_get_node_name(node));\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}