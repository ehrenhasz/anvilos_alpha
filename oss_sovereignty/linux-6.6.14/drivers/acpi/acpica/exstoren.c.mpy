{
  "module_name": "exstoren.c",
  "hash_id": "cc93ec66d78c0c1b77881229a1f351fabb5fe094879ca39197e93953c62aa970",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/exstoren.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acinterp.h\"\n#include \"amlcode.h\"\n\n#define _COMPONENT          ACPI_EXECUTER\nACPI_MODULE_NAME(\"exstoren\")\n\n \nacpi_status\nacpi_ex_resolve_object(union acpi_operand_object **source_desc_ptr,\n\t\t       acpi_object_type target_type,\n\t\t       struct acpi_walk_state *walk_state)\n{\n\tunion acpi_operand_object *source_desc = *source_desc_ptr;\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE(ex_resolve_object);\n\n\t \n\n\tswitch (target_type) {\n\tcase ACPI_TYPE_BUFFER_FIELD:\n\tcase ACPI_TYPE_LOCAL_REGION_FIELD:\n\tcase ACPI_TYPE_LOCAL_BANK_FIELD:\n\tcase ACPI_TYPE_LOCAL_INDEX_FIELD:\n\t\t \n\tcase ACPI_TYPE_INTEGER:\n\tcase ACPI_TYPE_STRING:\n\tcase ACPI_TYPE_BUFFER:\n\t\t \n\t\tif (source_desc->common.type == ACPI_TYPE_LOCAL_REFERENCE) {\n\n\t\t\t \n\n\t\t\tstatus =\n\t\t\t    acpi_ex_resolve_to_value(source_desc_ptr,\n\t\t\t\t\t\t     walk_state);\n\t\t\tif (ACPI_FAILURE(status)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t \n\n\t\tif (walk_state->opcode == AML_COPY_OBJECT_OP) {\n\t\t\tbreak;\n\t\t}\n\n\t\t \n\n\t\tif ((source_desc->common.type != ACPI_TYPE_INTEGER) &&\n\t\t    (source_desc->common.type != ACPI_TYPE_BUFFER) &&\n\t\t    (source_desc->common.type != ACPI_TYPE_STRING) &&\n\t\t    !((source_desc->common.type == ACPI_TYPE_LOCAL_REFERENCE) &&\n\t\t      (source_desc->reference.class == ACPI_REFCLASS_TABLE))) {\n\n\t\t\t \n\n\t\t\tACPI_ERROR((AE_INFO,\n\t\t\t\t    \"Cannot assign type [%s] to [%s] (must be type Int/Str/Buf)\",\n\t\t\t\t    acpi_ut_get_object_type_name(source_desc),\n\t\t\t\t    acpi_ut_get_type_name(target_type)));\n\n\t\t\tstatus = AE_AML_OPERAND_TYPE;\n\t\t}\n\t\tbreak;\n\n\tcase ACPI_TYPE_LOCAL_ALIAS:\n\tcase ACPI_TYPE_LOCAL_METHOD_ALIAS:\n\t\t \n\t\tACPI_ERROR((AE_INFO, \"Store into an unresolved Alias object\"));\n\t\tstatus = AE_AML_INTERNAL;\n\t\tbreak;\n\n\tcase ACPI_TYPE_PACKAGE:\n\tdefault:\n\t\t \n\t\tbreak;\n\t}\n\n\treturn_ACPI_STATUS(status);\n}\n\n \n\nacpi_status\nacpi_ex_store_object_to_object(union acpi_operand_object *source_desc,\n\t\t\t       union acpi_operand_object *dest_desc,\n\t\t\t       union acpi_operand_object **new_desc,\n\t\t\t       struct acpi_walk_state *walk_state)\n{\n\tunion acpi_operand_object *actual_src_desc;\n\tacpi_status status = AE_OK;\n\n\tACPI_FUNCTION_TRACE_PTR(ex_store_object_to_object, source_desc);\n\n\tactual_src_desc = source_desc;\n\tif (!dest_desc) {\n\t\t \n\t\tstatus =\n\t\t    acpi_ut_copy_iobject_to_iobject(actual_src_desc, new_desc,\n\t\t\t\t\t\t    walk_state);\n\t\treturn_ACPI_STATUS(status);\n\t}\n\n\tif (source_desc->common.type != dest_desc->common.type) {\n\t\t \n\t\tstatus = acpi_ex_convert_to_target_type(dest_desc->common.type,\n\t\t\t\t\t\t\tsource_desc,\n\t\t\t\t\t\t\t&actual_src_desc,\n\t\t\t\t\t\t\twalk_state);\n\t\tif (ACPI_FAILURE(status)) {\n\t\t\treturn_ACPI_STATUS(status);\n\t\t}\n\n\t\tif (source_desc == actual_src_desc) {\n\t\t\t \n\t\t\t*new_desc = source_desc;\n\t\t\treturn_ACPI_STATUS(AE_OK);\n\t\t}\n\t}\n\n\t \n\tswitch (dest_desc->common.type) {\n\tcase ACPI_TYPE_INTEGER:\n\n\t\tdest_desc->integer.value = actual_src_desc->integer.value;\n\n\t\t \n\n\t\t(void)acpi_ex_truncate_for32bit_table(dest_desc);\n\t\tbreak;\n\n\tcase ACPI_TYPE_STRING:\n\n\t\tstatus =\n\t\t    acpi_ex_store_string_to_string(actual_src_desc, dest_desc);\n\t\tbreak;\n\n\tcase ACPI_TYPE_BUFFER:\n\n\t\tstatus =\n\t\t    acpi_ex_store_buffer_to_buffer(actual_src_desc, dest_desc);\n\t\tbreak;\n\n\tcase ACPI_TYPE_PACKAGE:\n\n\t\tstatus =\n\t\t    acpi_ut_copy_iobject_to_iobject(actual_src_desc, &dest_desc,\n\t\t\t\t\t\t    walk_state);\n\t\tbreak;\n\n\tdefault:\n\t\t \n\t\tACPI_WARNING((AE_INFO, \"Store into type [%s] not implemented\",\n\t\t\t      acpi_ut_get_object_type_name(dest_desc)));\n\n\t\tstatus = AE_NOT_IMPLEMENTED;\n\t\tbreak;\n\t}\n\n\tif (actual_src_desc != source_desc) {\n\n\t\t \n\n\t\tacpi_ut_remove_reference(actual_src_desc);\n\t}\n\n\t*new_desc = dest_desc;\n\treturn_ACPI_STATUS(status);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}