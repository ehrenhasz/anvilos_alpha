{
  "module_name": "pstree.c",
  "hash_id": "b666b1dd4a83fd295862ae670f97a55226f8ae874fb7800016e5e5655f40d65b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/acpi/acpica/pstree.c",
  "human_readable_source": "\n \n\n#include <acpi/acpi.h>\n#include \"accommon.h\"\n#include \"acparser.h\"\n#include \"amlcode.h\"\n#include \"acconvert.h\"\n\n#define _COMPONENT          ACPI_PARSER\nACPI_MODULE_NAME(\"pstree\")\n\n \n#ifdef ACPI_OBSOLETE_FUNCTIONS\nunion acpi_parse_object *acpi_ps_get_child(union acpi_parse_object *op);\n#endif\n\n \n\nunion acpi_parse_object *acpi_ps_get_arg(union acpi_parse_object *op, u32 argn)\n{\n\tunion acpi_parse_object *arg = NULL;\n\tconst struct acpi_opcode_info *op_info;\n\n\tACPI_FUNCTION_ENTRY();\n\n \n\t \n\n\top_info = acpi_ps_get_opcode_info(op->common.aml_opcode);\n\tif (op_info->class == AML_CLASS_UNKNOWN) {\n\n\t\t \n\n\t\treturn (NULL);\n\t}\n\n\t \n\n\tif (!(op_info->flags & AML_HAS_ARGS)) {\n\n\t\t \n\n\t\treturn (NULL);\n\t}\n\n\t \n\n\targ = op->common.value.arg;\n\twhile (arg && argn) {\n\t\targn--;\n\t\targ = arg->common.next;\n\t}\n\n\treturn (arg);\n}\n\n \n\nvoid\nacpi_ps_append_arg(union acpi_parse_object *op, union acpi_parse_object *arg)\n{\n\tunion acpi_parse_object *prev_arg;\n\tconst struct acpi_opcode_info *op_info;\n\n\tACPI_FUNCTION_TRACE(ps_append_arg);\n\n\tif (!op) {\n\t\treturn_VOID;\n\t}\n\n\t \n\n\top_info = acpi_ps_get_opcode_info(op->common.aml_opcode);\n\tif (op_info->class == AML_CLASS_UNKNOWN) {\n\n\t\t \n\n\t\tACPI_ERROR((AE_INFO, \"Invalid AML Opcode: 0x%2.2X\",\n\t\t\t    op->common.aml_opcode));\n\t\treturn_VOID;\n\t}\n\n\t \n\n\tif (!(op_info->flags & AML_HAS_ARGS)) {\n\n\t\t \n\n\t\treturn_VOID;\n\t}\n\n\t \n\n\tif (op->common.value.arg) {\n\n\t\t \n\n\t\tprev_arg = op->common.value.arg;\n\t\twhile (prev_arg->common.next) {\n\t\t\tprev_arg = prev_arg->common.next;\n\t\t}\n\t\tprev_arg->common.next = arg;\n\t} else {\n\t\t \n\n\t\top->common.value.arg = arg;\n\t}\n\n\t \n\n\twhile (arg) {\n\t\targ->common.parent = op;\n\t\targ = arg->common.next;\n\n\t\top->common.arg_list_length++;\n\t}\n\n\treturn_VOID;\n}\n\n \n\nunion acpi_parse_object *acpi_ps_get_depth_next(union acpi_parse_object *origin,\n\t\t\t\t\t\tunion acpi_parse_object *op)\n{\n\tunion acpi_parse_object *next = NULL;\n\tunion acpi_parse_object *parent;\n\tunion acpi_parse_object *arg;\n\n\tACPI_FUNCTION_ENTRY();\n\n\tif (!op) {\n\t\treturn (NULL);\n\t}\n\n\t \n\n\tnext = acpi_ps_get_arg(op, 0);\n\tif (next) {\n\t\tASL_CV_LABEL_FILENODE(next);\n\t\treturn (next);\n\t}\n\n\t \n\n\tnext = op->common.next;\n\tif (next) {\n\t\tASL_CV_LABEL_FILENODE(next);\n\t\treturn (next);\n\t}\n\n\t \n\n\tparent = op->common.parent;\n\n\twhile (parent) {\n\t\targ = acpi_ps_get_arg(parent, 0);\n\t\twhile (arg && (arg != origin) && (arg != op)) {\n\n\t\t\tASL_CV_LABEL_FILENODE(arg);\n\t\t\targ = arg->common.next;\n\t\t}\n\n\t\tif (arg == origin) {\n\n\t\t\t \n\n\t\t\treturn (NULL);\n\t\t}\n\n\t\tif (parent->common.next) {\n\n\t\t\t \n\n\t\t\tASL_CV_LABEL_FILENODE(parent->common.next);\n\t\t\treturn (parent->common.next);\n\t\t}\n\n\t\top = parent;\n\t\tparent = parent->common.parent;\n\t}\n\n\tASL_CV_LABEL_FILENODE(next);\n\treturn (next);\n}\n\n#ifdef ACPI_OBSOLETE_FUNCTIONS\n \n\nunion acpi_parse_object *acpi_ps_get_child(union acpi_parse_object *op)\n{\n\tunion acpi_parse_object *child = NULL;\n\n\tACPI_FUNCTION_ENTRY();\n\n\tswitch (op->common.aml_opcode) {\n\tcase AML_SCOPE_OP:\n\tcase AML_ELSE_OP:\n\tcase AML_DEVICE_OP:\n\tcase AML_THERMAL_ZONE_OP:\n\tcase AML_INT_METHODCALL_OP:\n\n\t\tchild = acpi_ps_get_arg(op, 0);\n\t\tbreak;\n\n\tcase AML_BUFFER_OP:\n\tcase AML_PACKAGE_OP:\n\tcase AML_VARIABLE_PACKAGE_OP:\n\tcase AML_METHOD_OP:\n\tcase AML_IF_OP:\n\tcase AML_WHILE_OP:\n\tcase AML_FIELD_OP:\n\n\t\tchild = acpi_ps_get_arg(op, 1);\n\t\tbreak;\n\n\tcase AML_POWER_RESOURCE_OP:\n\tcase AML_INDEX_FIELD_OP:\n\n\t\tchild = acpi_ps_get_arg(op, 2);\n\t\tbreak;\n\n\tcase AML_PROCESSOR_OP:\n\tcase AML_BANK_FIELD_OP:\n\n\t\tchild = acpi_ps_get_arg(op, 3);\n\t\tbreak;\n\n\tdefault:\n\n\t\t \n\n\t\tbreak;\n\t}\n\n\treturn (child);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}