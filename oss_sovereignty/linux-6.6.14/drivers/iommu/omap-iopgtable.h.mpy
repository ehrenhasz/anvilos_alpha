{
  "module_name": "omap-iopgtable.h",
  "hash_id": "a458fe05db87c28ba516acfbb8a8c443625388974152a49f0da8817daf5d5e13",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iommu/omap-iopgtable.h",
  "human_readable_source": " \n \n\n#ifndef _OMAP_IOPGTABLE_H\n#define _OMAP_IOPGTABLE_H\n\n#include <linux/bitops.h>\n\n \n#define IOPGD_SHIFT\t\t20\n#define IOPGD_SIZE\t\tBIT(IOPGD_SHIFT)\n#define IOPGD_MASK\t\t(~(IOPGD_SIZE - 1))\n\n \n#define IOSECTION_SHIFT\t\t20\n#define IOSECTION_SIZE\t\tBIT(IOSECTION_SHIFT)\n#define IOSECTION_MASK\t\t(~(IOSECTION_SIZE - 1))\n\n \n#define IOSUPER_SHIFT\t\t24\n#define IOSUPER_SIZE\t\tBIT(IOSUPER_SHIFT)\n#define IOSUPER_MASK\t\t(~(IOSUPER_SIZE - 1))\n\n#define PTRS_PER_IOPGD\t\t(1UL << (32 - IOPGD_SHIFT))\n#define IOPGD_TABLE_SIZE\t(PTRS_PER_IOPGD * sizeof(u32))\n\n \n#define IOPTE_SHIFT\t\t12\n#define IOPTE_SIZE\t\tBIT(IOPTE_SHIFT)\n#define IOPTE_MASK\t\t(~(IOPTE_SIZE - 1))\n\n \n#define IOLARGE_SHIFT\t\t16\n#define IOLARGE_SIZE\t\tBIT(IOLARGE_SHIFT)\n#define IOLARGE_MASK\t\t(~(IOLARGE_SIZE - 1))\n\n#define PTRS_PER_IOPTE\t\t(1UL << (IOPGD_SHIFT - IOPTE_SHIFT))\n#define IOPTE_TABLE_SIZE\t(PTRS_PER_IOPTE * sizeof(u32))\n\n#define IOPAGE_MASK\t\tIOPTE_MASK\n\n \nstatic inline phys_addr_t omap_iommu_translate(unsigned long d, dma_addr_t va,\n\t\t\t\t\t       dma_addr_t mask)\n{\n\treturn (d & mask) | (va & (~mask));\n}\n\n \n#define IOPGD_TABLE\t\t(1)\n#define IOPGD_SECTION\t\t(2)\n#define IOPGD_SUPER\t\t(BIT(18) | IOPGD_SECTION)\n\n#define iopgd_is_table(x)\t(((x) & 3) == IOPGD_TABLE)\n#define iopgd_is_section(x)\t(((x) & (1 << 18 | 3)) == IOPGD_SECTION)\n#define iopgd_is_super(x)\t(((x) & (1 << 18 | 3)) == IOPGD_SUPER)\n\n#define IOPTE_SMALL\t\t(2)\n#define IOPTE_LARGE\t\t(1)\n\n#define iopte_is_small(x)\t(((x) & 2) == IOPTE_SMALL)\n#define iopte_is_large(x)\t(((x) & 3) == IOPTE_LARGE)\n\n \n#define iopgd_index(da)\t\t(((da) >> IOPGD_SHIFT) & (PTRS_PER_IOPGD - 1))\n#define iopgd_offset(obj, da)\t((obj)->iopgd + iopgd_index(da))\n\n#define iopgd_page_paddr(iopgd)\t(*iopgd & ~((1 << 10) - 1))\n#define iopgd_page_vaddr(iopgd)\t((u32 *)phys_to_virt(iopgd_page_paddr(iopgd)))\n\n \n#define iopte_index(da)\t\t(((da) >> IOPTE_SHIFT) & (PTRS_PER_IOPTE - 1))\n#define iopte_offset(iopgd, da)\t(iopgd_page_vaddr(iopgd) + iopte_index(da))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}