{
  "module_name": "quirks.c",
  "hash_id": "d2f2875aa9d67114036d1e02b7bc2c3e5a540ea4a0d0a63c2b599253138ac2d7",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iommu/amd/quirks.c",
  "human_readable_source": " \n\n \n\n#ifdef CONFIG_DMI\n#include <linux/dmi.h>\n\n#include \"amd_iommu.h\"\n\n#define IVHD_SPECIAL_IOAPIC\t\t1\n\nstruct ivrs_quirk_entry {\n\tu8 id;\n\tu32 devid;\n};\n\nenum {\n\tDELL_INSPIRON_7375 = 0,\n\tDELL_LATITUDE_5495,\n\tLENOVO_IDEAPAD_330S_15ARR,\n};\n\nstatic const struct ivrs_quirk_entry ivrs_ioapic_quirks[][3] __initconst = {\n\t \n\t[DELL_INSPIRON_7375] = {\n\t\t{ .id = 4, .devid = 0xa0 },\n\t\t{ .id = 5, .devid = 0x2 },\n\t\t{}\n\t},\n\t \n\t[DELL_LATITUDE_5495] = {\n\t\t{ .id = 4, .devid = 0xa0 },\n\t\t{}\n\t},\n\t \n\t[LENOVO_IDEAPAD_330S_15ARR] = {\n\t\t{ .id = 32, .devid = 0xa0 },\n\t\t{}\n\t},\n\t{}\n};\n\nstatic int __init ivrs_ioapic_quirk_cb(const struct dmi_system_id *d)\n{\n\tconst struct ivrs_quirk_entry *i;\n\n\tfor (i = d->driver_data; i->id != 0 && i->devid != 0; i++)\n\t\tadd_special_device(IVHD_SPECIAL_IOAPIC, i->id, (u32 *)&i->devid, 0);\n\n\treturn 0;\n}\n\nstatic const struct dmi_system_id ivrs_quirks[] __initconst = {\n\t{\n\t\t.callback = ivrs_ioapic_quirk_cb,\n\t\t.ident = \"Dell Inspiron 7375\",\n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"Dell Inc.\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"Inspiron 7375\"),\n\t\t},\n\t\t.driver_data = (void *)&ivrs_ioapic_quirks[DELL_INSPIRON_7375],\n\t},\n\t{\n\t\t.callback = ivrs_ioapic_quirk_cb,\n\t\t.ident = \"Dell Latitude 5495\",\n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"Dell Inc.\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"Latitude 5495\"),\n\t\t},\n\t\t.driver_data = (void *)&ivrs_ioapic_quirks[DELL_LATITUDE_5495],\n\t},\n\t{\n\t\t \n\t\t.callback = ivrs_ioapic_quirk_cb,\n\t\t.ident = \"Acer Aspire A315-41\",\n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"Acer\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"Aspire A315-41\"),\n\t\t},\n\t\t.driver_data = (void *)&ivrs_ioapic_quirks[DELL_LATITUDE_5495],\n\t},\n\t{\n\t\t.callback = ivrs_ioapic_quirk_cb,\n\t\t.ident = \"Lenovo ideapad 330S-15ARR\",\n\t\t.matches = {\n\t\t\tDMI_MATCH(DMI_SYS_VENDOR, \"LENOVO\"),\n\t\t\tDMI_MATCH(DMI_PRODUCT_NAME, \"81FB\"),\n\t\t},\n\t\t.driver_data = (void *)&ivrs_ioapic_quirks[LENOVO_IDEAPAD_330S_15ARR],\n\t},\n\t{}\n};\n\nvoid __init amd_iommu_apply_ivrs_quirks(void)\n{\n\tdmi_check_system(ivrs_quirks);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}