{
  "module_name": "io-pgtable.c",
  "hash_id": "a48c8859b61ecd4248bded5fbb2855d27947aae84a9a586aeddf711e0f24674e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/iommu/io-pgtable.c",
  "human_readable_source": "\n \n\n#include <linux/bug.h>\n#include <linux/io-pgtable.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n\nstatic const struct io_pgtable_init_fns *\nio_pgtable_init_table[IO_PGTABLE_NUM_FMTS] = {\n#ifdef CONFIG_IOMMU_IO_PGTABLE_LPAE\n\t[ARM_32_LPAE_S1] = &io_pgtable_arm_32_lpae_s1_init_fns,\n\t[ARM_32_LPAE_S2] = &io_pgtable_arm_32_lpae_s2_init_fns,\n\t[ARM_64_LPAE_S1] = &io_pgtable_arm_64_lpae_s1_init_fns,\n\t[ARM_64_LPAE_S2] = &io_pgtable_arm_64_lpae_s2_init_fns,\n\t[ARM_MALI_LPAE] = &io_pgtable_arm_mali_lpae_init_fns,\n#endif\n#ifdef CONFIG_IOMMU_IO_PGTABLE_DART\n\t[APPLE_DART] = &io_pgtable_apple_dart_init_fns,\n\t[APPLE_DART2] = &io_pgtable_apple_dart_init_fns,\n#endif\n#ifdef CONFIG_IOMMU_IO_PGTABLE_ARMV7S\n\t[ARM_V7S] = &io_pgtable_arm_v7s_init_fns,\n#endif\n#ifdef CONFIG_AMD_IOMMU\n\t[AMD_IOMMU_V1] = &io_pgtable_amd_iommu_v1_init_fns,\n\t[AMD_IOMMU_V2] = &io_pgtable_amd_iommu_v2_init_fns,\n#endif\n};\n\nstruct io_pgtable_ops *alloc_io_pgtable_ops(enum io_pgtable_fmt fmt,\n\t\t\t\t\t    struct io_pgtable_cfg *cfg,\n\t\t\t\t\t    void *cookie)\n{\n\tstruct io_pgtable *iop;\n\tconst struct io_pgtable_init_fns *fns;\n\n\tif (fmt >= IO_PGTABLE_NUM_FMTS)\n\t\treturn NULL;\n\n\tfns = io_pgtable_init_table[fmt];\n\tif (!fns)\n\t\treturn NULL;\n\n\tiop = fns->alloc(cfg, cookie);\n\tif (!iop)\n\t\treturn NULL;\n\n\tiop->fmt\t= fmt;\n\tiop->cookie\t= cookie;\n\tiop->cfg\t= *cfg;\n\n\treturn &iop->ops;\n}\nEXPORT_SYMBOL_GPL(alloc_io_pgtable_ops);\n\n \nvoid free_io_pgtable_ops(struct io_pgtable_ops *ops)\n{\n\tstruct io_pgtable *iop;\n\n\tif (!ops)\n\t\treturn;\n\n\tiop = io_pgtable_ops_to_pgtable(ops);\n\tio_pgtable_tlb_flush_all(iop);\n\tio_pgtable_init_table[iop->fmt]->free(iop);\n}\nEXPORT_SYMBOL_GPL(free_io_pgtable_ops);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}