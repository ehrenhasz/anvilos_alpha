{
  "module_name": "vpu_jsm_api.h",
  "hash_id": "81ccd32d919435579f2ce63b39af426e2dba6259fcc746b2a841d426fc3fde0c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/accel/ivpu/vpu_jsm_api.h",
  "human_readable_source": " \n \n\n \n#ifndef VPU_JSM_API_H\n#define VPU_JSM_API_H\n\n \n#define VPU_JSM_API_VER_MAJOR 3\n\n \n#define VPU_JSM_API_VER_MINOR 0\n\n \n#define VPU_JSM_API_VER_PATCH 1\n\n \n#define VPU_JSM_API_VER_INDEX 4\n\n \n#define VPU_HWS_NUM_PRIORITY_BANDS 4\n\n \n#define VPU_MAX_ENGINE_RESET_IMPACTED_CONTEXTS 3\n\n \n#pragma pack(push, 1)\n\n \n#define VPU_ENGINE_COMPUTE 0\n#define VPU_ENGINE_COPY\t   1\n#define VPU_ENGINE_NB\t   2\n\n \n#define VPU_JSM_STATUS_SUCCESS\t\t\t\t 0x0U\n#define VPU_JSM_STATUS_PARSING_ERR\t\t\t 0x1U\n#define VPU_JSM_STATUS_PROCESSING_ERR\t\t\t 0x2U\n#define VPU_JSM_STATUS_PREEMPTED\t\t\t 0x3U\n#define VPU_JSM_STATUS_ABORTED\t\t\t\t 0x4U\n#define VPU_JSM_STATUS_USER_CTX_VIOL_ERR\t\t 0x5U\n#define VPU_JSM_STATUS_GLOBAL_CTX_VIOL_ERR\t\t 0x6U\n#define VPU_JSM_STATUS_MVNCI_WRONG_INPUT_FORMAT\t\t 0x7U\n#define VPU_JSM_STATUS_MVNCI_UNSUPPORTED_NETWORK_ELEMENT 0x8U\n#define VPU_JSM_STATUS_MVNCI_INVALID_HANDLE\t\t 0x9U\n#define VPU_JSM_STATUS_MVNCI_OUT_OF_RESOURCES\t\t 0xAU\n#define VPU_JSM_STATUS_MVNCI_NOT_IMPLEMENTED\t\t 0xBU\n#define VPU_JSM_STATUS_MVNCI_INTERNAL_ERROR\t\t 0xCU\n \n#define VPU_JSM_STATUS_PREEMPTED_MID_INFERENCE\t\t 0xDU\n\n \n#define VPU_IPC_CHAN_ASYNC_CMD 0\n#define VPU_IPC_CHAN_GEN_CMD   10\n#define VPU_IPC_CHAN_JOB_RET   11\n\n \n#define VPU_JOB_FLAGS_NULL_SUBMISSION_MASK 0x00000001\n\n \n#define VPU_JOB_RESERVED_BYTES\t     16\n \n#define VPU_JOB_QUEUE_RESERVED_BYTES 52\n\n \n#define VPU_TRACE_ENTITY_NAME_MAX_LEN 32\n\n \n#define VPU_DYNDBG_CMD_MAX_LEN 96\n\n \nstruct vpu_job_queue_entry {\n\tu64 batch_buf_addr;  \n\tu32 job_id;\t   \n\tu32 flags;  \n\tu64 root_page_table_addr;  \n\tu64 root_page_table_update_counter;  \n\tu64 preemption_buffer_address;  \n\tu64 preemption_buffer_size;  \n\tu8 reserved_0[VPU_JOB_RESERVED_BYTES];\n};\n\n \nstruct vpu_job_queue_header {\n\tu32 engine_idx;\n\tu32 head;\n\tu32 tail;\n\tu8 reserved_0[VPU_JOB_QUEUE_RESERVED_BYTES];\n};\n\n \nstruct vpu_job_queue {\n\tstruct vpu_job_queue_header header;\n\tstruct vpu_job_queue_entry job[];\n};\n\n \nenum vpu_trace_entity_type {\n\t \n\tVPU_TRACE_ENTITY_TYPE_DESTINATION = 1,\n\t \n\tVPU_TRACE_ENTITY_TYPE_HW_COMPONENT = 2,\n};\n\n \nenum vpu_ipc_msg_type {\n\tVPU_JSM_MSG_UNKNOWN = 0xFFFFFFFF,\n\t \n\tVPU_JSM_MSG_ASYNC_CMD = 0x1100,\n\tVPU_JSM_MSG_ENGINE_RESET = VPU_JSM_MSG_ASYNC_CMD,\n\tVPU_JSM_MSG_ENGINE_PREEMPT = 0x1101,\n\tVPU_JSM_MSG_REGISTER_DB = 0x1102,\n\tVPU_JSM_MSG_UNREGISTER_DB = 0x1103,\n\tVPU_JSM_MSG_QUERY_ENGINE_HB = 0x1104,\n\tVPU_JSM_MSG_GET_POWER_LEVEL_COUNT = 0x1105,\n\tVPU_JSM_MSG_GET_POWER_LEVEL = 0x1106,\n\tVPU_JSM_MSG_SET_POWER_LEVEL = 0x1107,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_OPEN = 0x1108,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_CLOSE = 0x1109,\n\t \n\tVPU_JSM_MSG_TRACE_SET_CONFIG = 0x110a,\n\t \n\tVPU_JSM_MSG_TRACE_GET_CONFIG = 0x110b,\n\t \n\tVPU_JSM_MSG_TRACE_GET_CAPABILITY = 0x110c,\n\t \n\tVPU_JSM_MSG_TRACE_GET_NAME = 0x110d,\n\t \n\tVPU_JSM_MSG_SSID_RELEASE = 0x110e,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_START = 0x110f,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_STOP = 0x1110,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_UPDATE = 0x1111,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_INFO = 0x1112,\n\t \n\tVPU_JSM_MSG_SET_PRIORITY_BAND_SETUP = 0x1113,\n\t \n\tVPU_JSM_MSG_CREATE_CMD_QUEUE = 0x1114,\n\t \n\tVPU_JSM_MSG_DESTROY_CMD_QUEUE = 0x1115,\n\t \n\tVPU_JSM_MSG_SET_CONTEXT_SCHED_PROPERTIES = 0x1116,\n\t \n\tVPU_JSM_MSG_HWS_REGISTER_DB = 0x1117,\n\t \n\tVPU_JSM_MSG_GENERAL_CMD = 0x1200,\n\tVPU_JSM_MSG_BLOB_DEINIT = VPU_JSM_MSG_GENERAL_CMD,\n\t \n\tVPU_JSM_MSG_DYNDBG_CONTROL = 0x1201,\n\t \n\tVPU_JSM_MSG_JOB_DONE = 0x2100,\n\t \n\tVPU_JSM_MSG_ASYNC_CMD_DONE = 0x2200,\n\tVPU_JSM_MSG_ENGINE_RESET_DONE = VPU_JSM_MSG_ASYNC_CMD_DONE,\n\tVPU_JSM_MSG_ENGINE_PREEMPT_DONE = 0x2201,\n\tVPU_JSM_MSG_REGISTER_DB_DONE = 0x2202,\n\tVPU_JSM_MSG_UNREGISTER_DB_DONE = 0x2203,\n\tVPU_JSM_MSG_QUERY_ENGINE_HB_DONE = 0x2204,\n\tVPU_JSM_MSG_GET_POWER_LEVEL_COUNT_DONE = 0x2205,\n\tVPU_JSM_MSG_GET_POWER_LEVEL_DONE = 0x2206,\n\tVPU_JSM_MSG_SET_POWER_LEVEL_DONE = 0x2207,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_OPEN_DONE = 0x2208,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_CLOSE_DONE = 0x2209,\n\t \n\tVPU_JSM_MSG_TRACE_SET_CONFIG_RSP = 0x220a,\n\t \n\tVPU_JSM_MSG_TRACE_GET_CONFIG_RSP = 0x220b,\n\t \n\tVPU_JSM_MSG_TRACE_GET_CAPABILITY_RSP = 0x220c,\n\t \n\tVPU_JSM_MSG_TRACE_GET_NAME_RSP = 0x220d,\n\t \n\tVPU_JSM_MSG_SSID_RELEASE_DONE = 0x220e,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_START_DONE = 0x220f,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_STOP_DONE = 0x2210,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_UPDATE_DONE = 0x2211,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_INFO_DONE = 0x2212,\n\t \n\tVPU_JSM_MSG_METRIC_STREAMER_NOTIFICATION = 0x2213,\n\t \n\tVPU_JSM_MSG_SET_PRIORITY_BAND_SETUP_RSP = 0x2214,\n\t \n\tVPU_JSM_MSG_CREATE_CMD_QUEUE_RSP = 0x2215,\n\t \n\tVPU_JSM_MSG_DESTROY_CMD_QUEUE_RSP = 0x2216,\n\t \n\tVPU_JSM_MSG_SET_CONTEXT_SCHED_PROPERTIES_RSP = 0x2217,\n\t \n\tVPU_JSM_MSG_GENERAL_CMD_DONE = 0x2300,\n\tVPU_JSM_MSG_BLOB_DEINIT_DONE = VPU_JSM_MSG_GENERAL_CMD_DONE,\n\t \n\tVPU_JSM_MSG_DYNDBG_CONTROL_RSP = 0x2301,\n};\n\nenum vpu_ipc_msg_status { VPU_JSM_MSG_FREE, VPU_JSM_MSG_ALLOCATED };\n\n \nstruct vpu_ipc_msg_payload_engine_reset {\n\t \n\tu32 engine_idx;\n\t \n\tu32 reserved_0;\n};\n\nstruct vpu_ipc_msg_payload_engine_preempt {\n\t \n\tu32 engine_idx;\n\t \n\tu32 preempt_id;\n};\n\n \nstruct vpu_ipc_msg_payload_register_db {\n\t \n\tu32 db_idx;\n\t \n\tu32 reserved_0;\n\t \n\tu64 jobq_base;\n\t \n\tu32 jobq_size;\n\t \n\tu32 host_ssid;\n};\n\n \nstruct vpu_ipc_msg_payload_unregister_db {\n\t \n\tu32 db_idx;\n\t \n\tu32 reserved_0;\n};\n\nstruct vpu_ipc_msg_payload_query_engine_hb {\n\t \n\tu32 engine_idx;\n\t \n\tu32 reserved_0;\n};\n\nstruct vpu_ipc_msg_payload_power_level {\n\t \n\tu32 power_level;\n\t \n\tu32 reserved_0;\n};\n\nstruct vpu_ipc_msg_payload_ssid_release {\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved_0;\n};\n\n \nstruct vpu_jsm_metric_streamer_start {\n\t \n\tu64 metric_group_mask;\n\t \n\tu64 sampling_rate;\n\t \n\tu32 notify_sample_count;\n\tu32 reserved_0;\n\t \n\tu64 buffer_addr;\n\tu64 buffer_size;\n\t \n\tu64 next_buffer_addr;\n\tu64 next_buffer_size;\n};\n\n \nstruct vpu_jsm_metric_streamer_stop {\n\t \n\tu64 metric_group_mask;\n};\n\n \nstruct vpu_jsm_metric_streamer_update {\n\t \n\tu64 metric_group_mask;\n\t \n\tu64 buffer_addr;\n\tu64 buffer_size;\n\t \n\tu64 next_buffer_addr;\n\tu64 next_buffer_size;\n};\n\nstruct vpu_ipc_msg_payload_blob_deinit {\n\t \n\tu64 blob_id;\n};\n\nstruct vpu_ipc_msg_payload_job_done {\n\t \n\tu32 engine_idx;\n\t \n\tu32 db_idx;\n\t \n\tu32 job_id;\n\t \n\tu32 job_status;\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved_0;\n\t \n\tu64 cmdq_id;\n};\n\nstruct vpu_jsm_engine_reset_context {\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved_0;\n\t \n\tu64 cmdq_id;\n\t \n\tu64 flags;\n};\n\nstruct vpu_ipc_msg_payload_engine_reset_done {\n\t \n\tu32 engine_idx;\n\t \n\tu32 num_impacted_contexts;\n\t \n\tstruct vpu_jsm_engine_reset_context\n\t\timpacted_contexts[VPU_MAX_ENGINE_RESET_IMPACTED_CONTEXTS];\n};\n\nstruct vpu_ipc_msg_payload_engine_preempt_done {\n\t \n\tu32 engine_idx;\n\t \n\tu32 preempt_id;\n};\n\n \nstruct vpu_ipc_msg_payload_register_db_done {\n\t \n\tu32 db_idx;\n\t \n\tu32 reserved_0;\n};\n\n \nstruct vpu_ipc_msg_payload_unregister_db_done {\n\t \n\tu32 db_idx;\n\t \n\tu32 reserved_0;\n};\n\nstruct vpu_ipc_msg_payload_query_engine_hb_done {\n\t \n\tu32 engine_idx;\n\t \n\tu32 reserved_0;\n\t \n\tu64 heartbeat;\n};\n\nstruct vpu_ipc_msg_payload_get_power_level_count_done {\n\t \n\tu32 power_level_count;\n\t \n\tu32 reserved_0;\n\t \n\tu8 power_limit[16];\n};\n\nstruct vpu_ipc_msg_payload_blob_deinit_done {\n\t \n\tu64 blob_id;\n};\n\n \nstruct vpu_ipc_msg_payload_hws_priority_band_setup {\n\t \n\tu32 grace_period[VPU_HWS_NUM_PRIORITY_BANDS];\n\t \n\tu64 process_quantum[VPU_HWS_NUM_PRIORITY_BANDS];\n\t \n\tu64 process_grace_period[VPU_HWS_NUM_PRIORITY_BANDS];\n\t \n\tu32 normal_band_percentage;\n\t \n\tu32 reserved_0;\n};\n\n \nstruct vpu_ipc_msg_payload_hws_create_cmdq {\n\t \n\tu64 process_id;\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved;\n\t \n\tu64 cmdq_id;\n\t \n\tu64 cmdq_base;\n\t \n\tu32 cmdq_size;\n\t \n\tu32 reserved_0;\n};\n\n \nstruct vpu_ipc_msg_payload_hws_create_cmdq_rsp {\n\t \n\tu64 process_id;\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved;\n\t \n\tu64 cmdq_id;\n};\n\n \nstruct vpu_ipc_msg_payload_hws_destroy_cmdq {\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved;\n\t \n\tu64 cmdq_id;\n};\n\n \nstruct vpu_ipc_msg_payload_hws_set_context_sched_properties {\n\t \n\tu32 host_ssid;\n\t \n\tu32 reserved_0;\n\t \n\tu64 cmdq_id;\n\t \n\tu32 priority_band;\n\t \n\tu32 realtime_priority_level;\n\t \n\tu32 in_process_priority;\n\t \n\tu32 reserved_1;\n\t \n\tu64 context_quantum;\n\t \n\tu64 grace_period_same_priority;\n\t \n\tu64 grace_period_lower_priority;\n};\n\n \nstruct vpu_jsm_hws_register_db {\n\t \n\tu32 db_id;\n\t \n\tu32 host_ssid;\n\t \n\tu64 cmdq_id;\n\t \n\tu64 cmdq_base;\n\t \n\tu64 cmdq_size;\n};\n\n \nstruct vpu_ipc_msg_payload_trace_config {\n\t \n\tu32 trace_level;\n\t \n\tu32 trace_destination_mask;\n\t \n\tu64 trace_hw_component_mask;\n\tu64 reserved_0;  \n};\n\n \nstruct vpu_ipc_msg_payload_trace_capability_rsp {\n\tu32 trace_destination_mask;  \n\tu32 reserved_0;\n\tu64 trace_hw_component_mask;  \n\tu64 reserved_1;  \n};\n\n \nstruct vpu_ipc_msg_payload_trace_get_name {\n\t \n\tu32 entity_type;\n\tu32 reserved_0;\n\t \n\tu64 entity_id;\n};\n\n \nstruct vpu_ipc_msg_payload_trace_get_name_rsp {\n\t \n\tu32 entity_type;\n\tu32 reserved_0;\n\t \n\tu64 entity_id;\n\t \n\tu64 reserved_1;\n\t \n\tchar entity_name[VPU_TRACE_ENTITY_NAME_MAX_LEN];\n};\n\n \nstruct vpu_jsm_metric_streamer_done {\n\t \n\tu64 metric_group_mask;\n\t \n\tu32 sample_size;\n\tu32 reserved_0;\n\t \n\tu32 samples_collected;\n\t \n\tu32 samples_dropped;\n\t \n\tu64 buffer_addr;\n\t \n\tu64 bytes_written;\n};\n\n \nstruct vpu_jsm_metric_group_descriptor {\n\t \n\tu32 next_metric_group_info_offset;\n\t \n\tu32 next_metric_counter_info_offset;\n\t \n\tu32 group_id;\n\t \n\tu32 num_counters;\n\t \n\tu32 metric_group_data_size;\n\t \n\tu32 domain;\n\t \n\tu32 name_string_size;\n\t \n\tu32 description_string_size;\n\tu64 reserved_0;\n\t \n};\n\n \nstruct vpu_jsm_metric_counter_descriptor {\n\t \n\tu32 next_metric_counter_info_offset;\n\t \n\tu32 metric_data_offset;\n\t \n\tu32 metric_data_size;\n\t \n\tu32 tier;\n\t \n\tu32 metric_type;\n\t \n\tu32 metric_value_type;\n\t \n\tu32 name_string_size;\n\t \n\tu32 description_string_size;\n\t \n\tu32 component_string_size;\n\t \n\tu32 units_string_size;\n\tu64 reserved_0;\n\t \n};\n\n \nstruct vpu_ipc_msg_payload_dyndbg_control {\n\t \n\tchar dyndbg_cmd[VPU_DYNDBG_CMD_MAX_LEN];\n};\n\n \nunion vpu_ipc_msg_payload {\n\tstruct vpu_ipc_msg_payload_engine_reset engine_reset;\n\tstruct vpu_ipc_msg_payload_engine_preempt engine_preempt;\n\tstruct vpu_ipc_msg_payload_register_db register_db;\n\tstruct vpu_ipc_msg_payload_unregister_db unregister_db;\n\tstruct vpu_ipc_msg_payload_query_engine_hb query_engine_hb;\n\tstruct vpu_ipc_msg_payload_power_level power_level;\n\tstruct vpu_jsm_metric_streamer_start metric_streamer_start;\n\tstruct vpu_jsm_metric_streamer_stop metric_streamer_stop;\n\tstruct vpu_jsm_metric_streamer_update metric_streamer_update;\n\tstruct vpu_ipc_msg_payload_blob_deinit blob_deinit;\n\tstruct vpu_ipc_msg_payload_ssid_release ssid_release;\n\tstruct vpu_jsm_hws_register_db hws_register_db;\n\tstruct vpu_ipc_msg_payload_job_done job_done;\n\tstruct vpu_ipc_msg_payload_engine_reset_done engine_reset_done;\n\tstruct vpu_ipc_msg_payload_engine_preempt_done engine_preempt_done;\n\tstruct vpu_ipc_msg_payload_register_db_done register_db_done;\n\tstruct vpu_ipc_msg_payload_unregister_db_done unregister_db_done;\n\tstruct vpu_ipc_msg_payload_query_engine_hb_done query_engine_hb_done;\n\tstruct vpu_ipc_msg_payload_get_power_level_count_done get_power_level_count_done;\n\tstruct vpu_jsm_metric_streamer_done metric_streamer_done;\n\tstruct vpu_ipc_msg_payload_blob_deinit_done blob_deinit_done;\n\tstruct vpu_ipc_msg_payload_trace_config trace_config;\n\tstruct vpu_ipc_msg_payload_trace_capability_rsp trace_capability;\n\tstruct vpu_ipc_msg_payload_trace_get_name trace_get_name;\n\tstruct vpu_ipc_msg_payload_trace_get_name_rsp trace_get_name_rsp;\n\tstruct vpu_ipc_msg_payload_dyndbg_control dyndbg_control;\n\tstruct vpu_ipc_msg_payload_hws_priority_band_setup hws_priority_band_setup;\n\tstruct vpu_ipc_msg_payload_hws_create_cmdq hws_create_cmdq;\n\tstruct vpu_ipc_msg_payload_hws_create_cmdq_rsp hws_create_cmdq_rsp;\n\tstruct vpu_ipc_msg_payload_hws_destroy_cmdq hws_destroy_cmdq;\n\tstruct vpu_ipc_msg_payload_hws_set_context_sched_properties\n\t\thws_set_context_sched_properties;\n};\n\n \nstruct vpu_jsm_msg {\n\t \n\tu64 reserved_0;\n\t \n\tu32 type;\n\t \n\tu32 status;\n\t \n\tu32 request_id;\n\t \n\tu32 result;\n\tu64 reserved_1;\n\t \n\tunion vpu_ipc_msg_payload payload;\n};\n\n#pragma pack(pop)\n\n#endif\n\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}