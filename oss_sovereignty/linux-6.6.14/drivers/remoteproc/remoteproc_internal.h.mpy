{
  "module_name": "remoteproc_internal.h",
  "hash_id": "b69acb980bc93ddc1eb47d85700b7f5a0e0a1dcd688ed516360698902844a044",
  "original_prompt": "Ingested from linux-6.6.14/drivers/remoteproc/remoteproc_internal.h",
  "human_readable_source": " \n \n\n#ifndef REMOTEPROC_INTERNAL_H\n#define REMOTEPROC_INTERNAL_H\n\n#include <linux/irqreturn.h>\n#include <linux/firmware.h>\n\nstruct rproc;\n\nstruct rproc_debug_trace {\n\tstruct rproc *rproc;\n\tstruct dentry *tfile;\n\tstruct list_head node;\n\tstruct rproc_mem_entry trace_mem;\n};\n\n \nstruct rproc_vdev_data {\n\tu32 rsc_offset;\n\tunsigned int id;\n\tu32 index;\n\tstruct fw_rsc_vdev *rsc;\n};\n\nstatic inline bool rproc_has_feature(struct rproc *rproc, unsigned int feature)\n{\n\treturn test_bit(feature, rproc->features);\n}\n\nstatic inline int rproc_set_feature(struct rproc *rproc, unsigned int feature)\n{\n\tif (feature >= RPROC_MAX_FEATURES)\n\t\treturn -EINVAL;\n\n\tset_bit(feature, rproc->features);\n\n\treturn 0;\n}\n\n \nvoid rproc_release(struct kref *kref);\nint rproc_of_parse_firmware(struct device *dev, int index,\n\t\t\t    const char **fw_name);\n\n \nirqreturn_t rproc_vq_interrupt(struct rproc *rproc, int vq_id);\n\n \nvoid rproc_remove_trace_file(struct dentry *tfile);\nstruct dentry *rproc_create_trace_file(const char *name, struct rproc *rproc,\n\t\t\t\t       struct rproc_debug_trace *trace);\nvoid rproc_delete_debug_dir(struct rproc *rproc);\nvoid rproc_create_debug_dir(struct rproc *rproc);\nvoid rproc_init_debugfs(void);\nvoid rproc_exit_debugfs(void);\n\n \nextern struct class rproc_class;\nint rproc_init_sysfs(void);\nvoid rproc_exit_sysfs(void);\n\n#ifdef CONFIG_REMOTEPROC_CDEV\nvoid rproc_init_cdev(void);\nvoid rproc_exit_cdev(void);\nint rproc_char_device_add(struct rproc *rproc);\nvoid rproc_char_device_remove(struct rproc *rproc);\n#else\nstatic inline void rproc_init_cdev(void)\n{\n}\n\nstatic inline void rproc_exit_cdev(void)\n{\n}\n\n \nstatic inline int rproc_char_device_add(struct rproc *rproc)\n{\n\treturn 0;\n}\n\nstatic inline void  rproc_char_device_remove(struct rproc *rproc)\n{\n}\n#endif\n\nvoid rproc_free_vring(struct rproc_vring *rvring);\nint rproc_alloc_vring(struct rproc_vdev *rvdev, int i);\nint rproc_parse_vring(struct rproc_vdev *rvdev, struct fw_rsc_vdev *rsc, int i);\n\nphys_addr_t rproc_va_to_pa(void *cpu_addr);\nint rproc_trigger_recovery(struct rproc *rproc);\n\nint rproc_elf_sanity_check(struct rproc *rproc, const struct firmware *fw);\nu64 rproc_elf_get_boot_addr(struct rproc *rproc, const struct firmware *fw);\nint rproc_elf_load_segments(struct rproc *rproc, const struct firmware *fw);\nint rproc_elf_load_rsc_table(struct rproc *rproc, const struct firmware *fw);\nstruct resource_table *rproc_elf_find_loaded_rsc_table(struct rproc *rproc,\n\t\t\t\t\t\t       const struct firmware *fw);\nstruct rproc_mem_entry *\nrproc_find_carveout_by_name(struct rproc *rproc, const char *name, ...);\nvoid rproc_add_rvdev(struct rproc *rproc, struct rproc_vdev *rvdev);\nvoid rproc_remove_rvdev(struct rproc_vdev *rvdev);\n\nstatic inline int rproc_prepare_device(struct rproc *rproc)\n{\n\tif (rproc->ops->prepare)\n\t\treturn rproc->ops->prepare(rproc);\n\n\treturn 0;\n}\n\nstatic inline int rproc_unprepare_device(struct rproc *rproc)\n{\n\tif (rproc->ops->unprepare)\n\t\treturn rproc->ops->unprepare(rproc);\n\n\treturn 0;\n}\n\nstatic inline int rproc_attach_device(struct rproc *rproc)\n{\n\tif (rproc->ops->attach)\n\t\treturn rproc->ops->attach(rproc);\n\n\treturn 0;\n}\n\nstatic inline\nint rproc_fw_sanity_check(struct rproc *rproc, const struct firmware *fw)\n{\n\tif (rproc->ops->sanity_check)\n\t\treturn rproc->ops->sanity_check(rproc, fw);\n\n\treturn 0;\n}\n\nstatic inline\nu64 rproc_get_boot_addr(struct rproc *rproc, const struct firmware *fw)\n{\n\tif (rproc->ops->get_boot_addr)\n\t\treturn rproc->ops->get_boot_addr(rproc, fw);\n\n\treturn 0;\n}\n\nstatic inline\nint rproc_load_segments(struct rproc *rproc, const struct firmware *fw)\n{\n\tif (rproc->ops->load)\n\t\treturn rproc->ops->load(rproc, fw);\n\n\treturn -EINVAL;\n}\n\nstatic inline int rproc_parse_fw(struct rproc *rproc, const struct firmware *fw)\n{\n\tif (rproc->ops->parse_fw)\n\t\treturn rproc->ops->parse_fw(rproc, fw);\n\n\treturn 0;\n}\n\nstatic inline\nint rproc_handle_rsc(struct rproc *rproc, u32 rsc_type, void *rsc, int offset,\n\t\t     int avail)\n{\n\tif (rproc->ops->handle_rsc)\n\t\treturn rproc->ops->handle_rsc(rproc, rsc_type, rsc, offset,\n\t\t\t\t\t      avail);\n\n\treturn RSC_IGNORED;\n}\n\nstatic inline\nstruct resource_table *rproc_find_loaded_rsc_table(struct rproc *rproc,\n\t\t\t\t\t\t   const struct firmware *fw)\n{\n\tif (rproc->ops->find_loaded_rsc_table)\n\t\treturn rproc->ops->find_loaded_rsc_table(rproc, fw);\n\n\treturn NULL;\n}\n\nstatic inline\nstruct resource_table *rproc_get_loaded_rsc_table(struct rproc *rproc,\n\t\t\t\t\t\t  size_t *size)\n{\n\tif (rproc->ops->get_loaded_rsc_table)\n\t\treturn rproc->ops->get_loaded_rsc_table(rproc, size);\n\n\treturn NULL;\n}\n\nstatic inline\nbool rproc_u64_fit_in_size_t(u64 val)\n{\n\tif (sizeof(size_t) == sizeof(u64))\n\t\treturn true;\n\n\treturn (val <= (size_t) -1);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}