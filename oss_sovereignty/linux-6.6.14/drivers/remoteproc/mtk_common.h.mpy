{
  "module_name": "mtk_common.h",
  "hash_id": "b46bf6b3dc62d801fda9afc756387f526dd2c3f49d42d0e22c08c044b12cf76e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/remoteproc/mtk_common.h",
  "human_readable_source": " \n \n\n#ifndef __RPROC_MTK_COMMON_H\n#define __RPROC_MTK_COMMON_H\n\n#include <linux/interrupt.h>\n#include <linux/kernel.h>\n#include <linux/platform_device.h>\n#include <linux/remoteproc.h>\n#include <linux/remoteproc/mtk_scp.h>\n\n#define MT8183_SW_RSTN\t\t\t0x0\n#define MT8183_SW_RSTN_BIT\t\tBIT(0)\n#define MT8183_SCP_TO_HOST\t\t0x1C\n#define MT8183_SCP_IPC_INT_BIT\t\tBIT(0)\n#define MT8183_SCP_WDT_INT_BIT\t\tBIT(8)\n#define MT8183_HOST_TO_SCP\t\t0x28\n#define MT8183_HOST_IPC_INT_BIT\t\tBIT(0)\n#define MT8183_WDT_CFG\t\t\t0x84\n#define MT8183_SCP_CLK_SW_SEL\t\t0x4000\n#define MT8183_SCP_CLK_DIV_SEL\t\t0x4024\n#define MT8183_SCP_SRAM_PDN\t\t0x402C\n#define MT8183_SCP_L1_SRAM_PD\t\t0x4080\n#define MT8183_SCP_TCM_TAIL_SRAM_PD\t0x4094\n\n#define MT8183_SCP_CACHE_SEL(x)\t\t(0x14000 + (x) * 0x3000)\n#define MT8183_SCP_CACHE_CON\t\tMT8183_SCP_CACHE_SEL(0)\n#define MT8183_SCP_DCACHE_CON\t\tMT8183_SCP_CACHE_SEL(1)\n#define MT8183_SCP_CACHESIZE_8KB\tBIT(8)\n#define MT8183_SCP_CACHE_CON_WAYEN\tBIT(10)\n\n#define MT8186_SCP_L1_SRAM_PD_P1\t0x40B0\n#define MT8186_SCP_L1_SRAM_PD_p2\t0x40B4\n\n#define MT8192_L2TCM_SRAM_PD_0\t\t0x10C0\n#define MT8192_L2TCM_SRAM_PD_1\t\t0x10C4\n#define MT8192_L2TCM_SRAM_PD_2\t\t0x10C8\n#define MT8192_L1TCM_SRAM_PDN\t\t0x102C\n#define MT8192_CPU0_SRAM_PD\t\t0x1080\n\n#define MT8192_SCP2APMCU_IPC_SET\t0x4080\n#define MT8192_SCP2APMCU_IPC_CLR\t0x4084\n#define MT8192_SCP_IPC_INT_BIT\t\tBIT(0)\n#define MT8192_SCP2SPM_IPC_CLR\t\t0x4094\n#define MT8192_GIPC_IN_SET\t\t0x4098\n#define MT8192_HOST_IPC_INT_BIT\t\tBIT(0)\n\n#define MT8192_CORE0_SW_RSTN_CLR\t0x10000\n#define MT8192_CORE0_SW_RSTN_SET\t0x10004\n#define MT8192_CORE0_MEM_ATT_PREDEF\t0x10008\n#define MT8192_CORE0_WDT_IRQ\t\t0x10030\n#define MT8192_CORE0_WDT_CFG\t\t0x10034\n\n#define MT8195_L1TCM_SRAM_PDN_RESERVED_RSI_BITS\t\tGENMASK(7, 4)\n\n#define SCP_FW_VER_LEN\t\t\t32\n#define SCP_SHARE_BUFFER_SIZE\t\t288\n\nstruct scp_run {\n\tu32 signaled;\n\ts8 fw_ver[SCP_FW_VER_LEN];\n\tu32 dec_capability;\n\tu32 enc_capability;\n\twait_queue_head_t wq;\n};\n\nstruct scp_ipi_desc {\n\t \n\tstruct mutex lock;\n\tscp_ipi_handler_t handler;\n\tvoid *priv;\n};\n\nstruct mtk_scp;\n\nstruct mtk_scp_of_data {\n\tint (*scp_clk_get)(struct mtk_scp *scp);\n\tint (*scp_before_load)(struct mtk_scp *scp);\n\tvoid (*scp_irq_handler)(struct mtk_scp *scp);\n\tvoid (*scp_reset_assert)(struct mtk_scp *scp);\n\tvoid (*scp_reset_deassert)(struct mtk_scp *scp);\n\tvoid (*scp_stop)(struct mtk_scp *scp);\n\tvoid *(*scp_da_to_va)(struct mtk_scp *scp, u64 da, size_t len);\n\n\tu32 host_to_scp_reg;\n\tu32 host_to_scp_int_bit;\n\n\tsize_t ipi_buf_offset;\n};\n\nstruct mtk_scp {\n\tstruct device *dev;\n\tstruct rproc *rproc;\n\tstruct clk *clk;\n\tvoid __iomem *reg_base;\n\tvoid __iomem *sram_base;\n\tsize_t sram_size;\n\tphys_addr_t sram_phys;\n\tvoid __iomem *l1tcm_base;\n\tsize_t l1tcm_size;\n\tphys_addr_t l1tcm_phys;\n\n\tconst struct mtk_scp_of_data *data;\n\n\tstruct mtk_share_obj __iomem *recv_buf;\n\tstruct mtk_share_obj __iomem *send_buf;\n\tstruct scp_run run;\n\t \n\tstruct mutex send_lock;\n\tstruct scp_ipi_desc ipi_desc[SCP_IPI_MAX];\n\tbool ipi_id_ack[SCP_IPI_MAX];\n\twait_queue_head_t ack_wq;\n\n\tvoid *cpu_addr;\n\tdma_addr_t dma_addr;\n\tsize_t dram_size;\n\n\tstruct rproc_subdev *rpmsg_subdev;\n};\n\n \nstruct mtk_share_obj {\n\tu32 id;\n\tu32 len;\n\tu8 share_buf[SCP_SHARE_BUFFER_SIZE];\n};\n\nvoid scp_memcpy_aligned(void __iomem *dst, const void *src, unsigned int len);\nvoid scp_ipi_lock(struct mtk_scp *scp, u32 id);\nvoid scp_ipi_unlock(struct mtk_scp *scp, u32 id);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}