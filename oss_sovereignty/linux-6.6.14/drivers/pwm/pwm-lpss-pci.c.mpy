{
  "module_name": "pwm-lpss-pci.c",
  "hash_id": "e561b9a5195cc800267e2d41755ab08791802f206785938f17a40f383474d1e2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/pwm/pwm-lpss-pci.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pci.h>\n#include <linux/pm_runtime.h>\n\n#include \"pwm-lpss.h\"\n\nstatic int pwm_lpss_probe_pci(struct pci_dev *pdev,\n\t\t\t      const struct pci_device_id *id)\n{\n\tconst struct pwm_lpss_boardinfo *info;\n\tstruct pwm_lpss_chip *lpwm;\n\tint err;\n\n\terr = pcim_enable_device(pdev);\n\tif (err < 0)\n\t\treturn err;\n\n\terr = pcim_iomap_regions(pdev, BIT(0), pci_name(pdev));\n\tif (err)\n\t\treturn err;\n\n\tinfo = (struct pwm_lpss_boardinfo *)id->driver_data;\n\tlpwm = devm_pwm_lpss_probe(&pdev->dev, pcim_iomap_table(pdev)[0], info);\n\tif (IS_ERR(lpwm))\n\t\treturn PTR_ERR(lpwm);\n\n\tpci_set_drvdata(pdev, lpwm);\n\n\tpm_runtime_put(&pdev->dev);\n\tpm_runtime_allow(&pdev->dev);\n\n\treturn 0;\n}\n\nstatic void pwm_lpss_remove_pci(struct pci_dev *pdev)\n{\n\tpm_runtime_forbid(&pdev->dev);\n\tpm_runtime_get_sync(&pdev->dev);\n}\n\nstatic int pwm_lpss_runtime_suspend_pci(struct device *dev)\n{\n\t \n\treturn 0;\n}\n\nstatic int pwm_lpss_runtime_resume_pci(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic DEFINE_RUNTIME_DEV_PM_OPS(pwm_lpss_pci_pm,\n\t\t\t\t pwm_lpss_runtime_suspend_pci,\n\t\t\t\t pwm_lpss_runtime_resume_pci,\n\t\t\t\t NULL);\n\nstatic const struct pci_device_id pwm_lpss_pci_ids[] = {\n\t{ PCI_VDEVICE(INTEL, 0x0ac8), (unsigned long)&pwm_lpss_bxt_info},\n\t{ PCI_VDEVICE(INTEL, 0x0f08), (unsigned long)&pwm_lpss_byt_info},\n\t{ PCI_VDEVICE(INTEL, 0x0f09), (unsigned long)&pwm_lpss_byt_info},\n\t{ PCI_VDEVICE(INTEL, 0x11a5), (unsigned long)&pwm_lpss_tng_info},\n\t{ PCI_VDEVICE(INTEL, 0x1ac8), (unsigned long)&pwm_lpss_bxt_info},\n\t{ PCI_VDEVICE(INTEL, 0x2288), (unsigned long)&pwm_lpss_bsw_info},\n\t{ PCI_VDEVICE(INTEL, 0x2289), (unsigned long)&pwm_lpss_bsw_info},\n\t{ PCI_VDEVICE(INTEL, 0x31c8), (unsigned long)&pwm_lpss_bxt_info},\n\t{ PCI_VDEVICE(INTEL, 0x5ac8), (unsigned long)&pwm_lpss_bxt_info},\n\t{ },\n};\nMODULE_DEVICE_TABLE(pci, pwm_lpss_pci_ids);\n\nstatic struct pci_driver pwm_lpss_driver_pci = {\n\t.name = \"pwm-lpss\",\n\t.id_table = pwm_lpss_pci_ids,\n\t.probe = pwm_lpss_probe_pci,\n\t.remove = pwm_lpss_remove_pci,\n\t.driver = {\n\t\t.pm = pm_ptr(&pwm_lpss_pci_pm),\n\t},\n};\nmodule_pci_driver(pwm_lpss_driver_pci);\n\nMODULE_DESCRIPTION(\"PWM PCI driver for Intel LPSS\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_IMPORT_NS(PWM_LPSS);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}