{
  "module_name": "ntb_hw_gen4.h",
  "hash_id": "4e396cb4267a9e1db7331cb3d9b655a0105b7195a3a6cf2f4274d57c486915f2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/ntb/hw/intel/ntb_hw_gen4.h",
  "human_readable_source": " \n \n#ifndef _NTB_INTEL_GEN4_H_\n#define _NTB_INTEL_GEN4_H_\n\n#include \"ntb_hw_intel.h\"\n\n \n#define PCI_DEVICE_REVISION_ICX_MIN\t0x2\n#define PCI_DEVICE_REVISION_ICX_MAX\t0xF\n\n \n \n#define GEN4_IMBAR23SZ_OFFSET\t\t0x00c4\n#define GEN4_IMBAR45SZ_OFFSET\t\t0x00c5\n#define GEN4_EMBAR23SZ_OFFSET\t\t0x00c6\n#define GEN4_EMBAR45SZ_OFFSET\t\t0x00c7\n#define GEN4_DEVCTRL_OFFSET\t\t0x0048\n#define GEN4_DEVSTS_OFFSET\t\t0x004a\n#define GEN4_UNCERRSTS_OFFSET\t\t0x0104\n#define GEN4_CORERRSTS_OFFSET\t\t0x0110\n\n \n#define GEN4_NTBCNTL_OFFSET\t\t0x0000\n#define GEN4_IM23XBASE_OFFSET\t\t0x0010\t \n#define GEN4_IM23XLMT_OFFSET\t\t0x0018   \n#define GEN4_IM45XBASE_OFFSET\t\t0x0020\t \n#define GEN4_IM45XLMT_OFFSET\t\t0x0028   \n#define GEN4_IM_INT_STATUS_OFFSET\t0x0040\n#define GEN4_IM_INT_DISABLE_OFFSET\t0x0048\n#define GEN4_INTVEC_OFFSET\t\t0x0050   \n#define GEN4_IM23XBASEIDX_OFFSET\t0x0074\n#define GEN4_IM45XBASEIDX_OFFSET\t0x0076\n#define GEN4_IM_SPAD_OFFSET\t\t0x0080   \n#define GEN4_IM_SPAD_SEM_OFFSET\t\t0x00c0\t \n#define GEN4_IM_SPAD_STICKY_OFFSET\t0x00c4   \n#define GEN4_IM_DOORBELL_OFFSET\t\t0x0100   \n#define GEN4_LTR_SWSEL_OFFSET\t\t0x30ec\n#define GEN4_LTR_ACTIVE_OFFSET\t\t0x30f0\n#define GEN4_LTR_IDLE_OFFSET\t\t0x30f4\n#define GEN4_EM_SPAD_OFFSET\t\t0x8080\n \n#define GEN4_LINK_CTRL_OFFSET\t\t0xb050\n#define GEN4_LINK_STATUS_OFFSET\t\t0xb052\n#define GEN4_PPD0_OFFSET\t\t0xb0d4\n#define GEN4_PPD1_OFFSET\t\t0xb4c0\n#define GEN4_LTSSMSTATEJMP\t\t0xf040\n\n#define GEN4_PPD_CLEAR_TRN\t\t0x0001\n#define GEN4_PPD_LINKTRN\t\t0x0008\n#define GEN4_PPD_CONN_MASK\t\t0x0300\n#define SPR_PPD_CONN_MASK\t\t0x0700\n#define GEN4_PPD_CONN_B2B\t\t0x0200\n#define GEN4_PPD_DEV_MASK\t\t0x1000\n#define GEN4_PPD_DEV_DSD\t\t0x1000\n#define GEN4_PPD_DEV_USD\t\t0x0000\n#define SPR_PPD_DEV_MASK\t\t0x4000\n#define SPR_PPD_DEV_DSD \t\t0x4000\n#define SPR_PPD_DEV_USD \t\t0x0000\n#define GEN4_LINK_CTRL_LINK_DISABLE\t0x0010\n\n#define GEN4_SLOTSTS\t\t\t0xb05a\n#define GEN4_SLOTSTS_DLLSCS\t\t0x100\n\n#define GEN4_PPD_TOPO_MASK\t(GEN4_PPD_CONN_MASK | GEN4_PPD_DEV_MASK)\n#define GEN4_PPD_TOPO_B2B_USD\t(GEN4_PPD_CONN_B2B | GEN4_PPD_DEV_USD)\n#define GEN4_PPD_TOPO_B2B_DSD\t(GEN4_PPD_CONN_B2B | GEN4_PPD_DEV_DSD)\n\n#define SPR_PPD_TOPO_MASK\t(SPR_PPD_CONN_MASK | SPR_PPD_DEV_MASK)\n#define SPR_PPD_TOPO_B2B_USD\t(GEN4_PPD_CONN_B2B | SPR_PPD_DEV_USD)\n#define SPR_PPD_TOPO_B2B_DSD\t(GEN4_PPD_CONN_B2B | SPR_PPD_DEV_DSD)\n\n#define GEN4_DB_COUNT\t\t\t32\n#define GEN4_DB_LINK\t\t\t32\n#define GEN4_DB_LINK_BIT\t\tBIT_ULL(GEN4_DB_LINK)\n#define GEN4_DB_MSIX_VECTOR_COUNT\t33\n#define GEN4_DB_MSIX_VECTOR_SHIFT\t1\n#define GEN4_DB_TOTAL_SHIFT\t\t33\n#define GEN4_SPAD_COUNT\t\t\t16\n\n#define NTB_CTL_E2I_BAR23_SNOOP\t\t0x000004\n#define NTB_CTL_E2I_BAR23_NOSNOOP\t0x000008\n#define NTB_CTL_I2E_BAR23_SNOOP\t\t0x000010\n#define NTB_CTL_I2E_BAR23_NOSNOOP\t0x000020\n#define NTB_CTL_E2I_BAR45_SNOOP\t\t0x000040\n#define NTB_CTL_E2I_BAR45_NOSNOO\t0x000080\n#define NTB_CTL_I2E_BAR45_SNOOP\t\t0x000100\n#define NTB_CTL_I2E_BAR45_NOSNOOP\t0x000200\n#define NTB_CTL_BUSNO_DIS_INC\t\t0x000400\n#define NTB_CTL_LINK_DOWN\t\t0x010000\n\n#define NTB_SJC_FORCEDETECT\t\t0x000004\n\n#define NTB_LTR_SWSEL_ACTIVE\t\t0x0\n#define NTB_LTR_SWSEL_IDLE\t\t0x1\n\n#define NTB_LTR_NS_SHIFT\t\t16\n#define NTB_LTR_ACTIVE_VAL\t\t0x0000   \n#define NTB_LTR_ACTIVE_LATSCALE\t\t0x0800   \n#define NTB_LTR_ACTIVE_REQMNT\t\t0x8000   \n\n#define NTB_LTR_IDLE_VAL\t\t0x0258   \n#define NTB_LTR_IDLE_LATSCALE\t\t0x0800   \n#define NTB_LTR_IDLE_REQMNT\t\t0x8000   \n\nssize_t ndev_ntb4_debugfs_read(struct file *filp, char __user *ubuf,\n\t\t\t\t      size_t count, loff_t *offp);\nint gen4_init_dev(struct intel_ntb_dev *ndev);\nssize_t ndev_ntb4_debugfs_read(struct file *filp, char __user *ubuf,\n\t\t\t\t      size_t count, loff_t *offp);\n\nextern const struct ntb_dev_ops intel_ntb4_ops;\n\nstatic inline int pdev_is_ICX(struct pci_dev *pdev)\n{\n\tif (pdev_is_gen4(pdev) &&\n\t    pdev->revision >= PCI_DEVICE_REVISION_ICX_MIN &&\n\t    pdev->revision <= PCI_DEVICE_REVISION_ICX_MAX)\n\t\treturn 1;\n\treturn 0;\n}\n\nstatic inline int pdev_is_SPR(struct pci_dev *pdev)\n{\n\tif (pdev_is_gen4(pdev) &&\n\t    pdev->revision > PCI_DEVICE_REVISION_ICX_MAX)\n\t\treturn 1;\n\treturn 0;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}