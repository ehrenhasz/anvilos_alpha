{
  "module_name": "max16064.c",
  "hash_id": "aab774145fe0d1062eb5971b7f36ecbadb9e4b9781e68296b9d0bd5f474b4b9e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/pmbus/max16064.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/err.h>\n#include <linux/i2c.h>\n#include \"pmbus.h\"\n\n#define MAX16064_MFR_VOUT_PEAK\t\t0xd4\n#define MAX16064_MFR_TEMPERATURE_PEAK\t0xd6\n\nstatic int max16064_read_word_data(struct i2c_client *client, int page,\n\t\t\t\t   int phase, int reg)\n{\n\tint ret;\n\n\tswitch (reg) {\n\tcase PMBUS_VIRT_READ_VOUT_MAX:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX16064_MFR_VOUT_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_TEMP_MAX:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX16064_MFR_TEMPERATURE_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_VOUT_HISTORY:\n\tcase PMBUS_VIRT_RESET_TEMP_HISTORY:\n\t\tret = 0;\n\t\tbreak;\n\tdefault:\n\t\tret = -ENODATA;\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic int max16064_write_word_data(struct i2c_client *client, int page,\n\t\t\t\t    int reg, u16 word)\n{\n\tint ret;\n\n\tswitch (reg) {\n\tcase PMBUS_VIRT_RESET_VOUT_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX16064_MFR_VOUT_PEAK, 0);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_TEMP_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX16064_MFR_TEMPERATURE_PEAK,\n\t\t\t\t\t    0xffff);\n\t\tbreak;\n\tdefault:\n\t\tret = -ENODATA;\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic struct pmbus_driver_info max16064_info = {\n\t.pages = 4,\n\t.format[PSC_VOLTAGE_IN] = direct,\n\t.format[PSC_VOLTAGE_OUT] = direct,\n\t.format[PSC_TEMPERATURE] = direct,\n\t.m[PSC_VOLTAGE_IN] = 19995,\n\t.b[PSC_VOLTAGE_IN] = 0,\n\t.R[PSC_VOLTAGE_IN] = -1,\n\t.m[PSC_VOLTAGE_OUT] = 19995,\n\t.b[PSC_VOLTAGE_OUT] = 0,\n\t.R[PSC_VOLTAGE_OUT] = -1,\n\t.m[PSC_TEMPERATURE] = -7612,\n\t.b[PSC_TEMPERATURE] = 335,\n\t.R[PSC_TEMPERATURE] = -3,\n\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_TEMP\n\t\t| PMBUS_HAVE_STATUS_VOUT | PMBUS_HAVE_STATUS_TEMP,\n\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t.read_word_data = max16064_read_word_data,\n\t.write_word_data = max16064_write_word_data,\n};\n\nstatic int max16064_probe(struct i2c_client *client)\n{\n\treturn pmbus_do_probe(client, &max16064_info);\n}\n\nstatic const struct i2c_device_id max16064_id[] = {\n\t{\"max16064\", 0},\n\t{}\n};\n\nMODULE_DEVICE_TABLE(i2c, max16064_id);\n\n \nstatic struct i2c_driver max16064_driver = {\n\t.driver = {\n\t\t   .name = \"max16064\",\n\t\t   },\n\t.probe = max16064_probe,\n\t.id_table = max16064_id,\n};\n\nmodule_i2c_driver(max16064_driver);\n\nMODULE_AUTHOR(\"Guenter Roeck\");\nMODULE_DESCRIPTION(\"PMBus driver for Maxim MAX16064\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(PMBUS);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}