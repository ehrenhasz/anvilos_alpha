{
  "module_name": "tps546d24.c",
  "hash_id": "8f8677081c3fae214a1445eee2daa18b0659d1b2b3cba6997bd33b7ef02d451f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/pmbus/tps546d24.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/i2c.h>\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pmbus.h>\n#include \"pmbus.h\"\n\nstatic struct pmbus_driver_info tps546d24_info = {\n\t.pages = 1,\n\t.format[PSC_VOLTAGE_IN] = linear,\n\t.format[PSC_VOLTAGE_OUT] = linear,\n\t.format[PSC_TEMPERATURE] = linear,\n\t.format[PSC_CURRENT_OUT] = linear,\n\t.func[0] = PMBUS_HAVE_VIN | PMBUS_HAVE_IIN\n\t\t\t| PMBUS_HAVE_IOUT | PMBUS_HAVE_VOUT\n\t\t\t| PMBUS_HAVE_STATUS_IOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t\t| PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n};\n\nstatic int tps546d24_probe(struct i2c_client *client)\n{\n\tint reg;\n\n\treg = i2c_smbus_read_byte_data(client, PMBUS_VOUT_MODE);\n\tif (reg < 0)\n\t\treturn reg;\n\n\tif (reg & 0x80) {\n\t\tint err;\n\n\t\terr = i2c_smbus_write_byte_data(client, PMBUS_VOUT_MODE, reg & 0x7f);\n\t\tif (err < 0)\n\t\t\treturn err;\n\t}\n\treturn pmbus_do_probe(client, &tps546d24_info);\n}\n\nstatic const struct i2c_device_id tps546d24_id[] = {\n\t{\"tps546d24\", 0},\n\t{}\n};\nMODULE_DEVICE_TABLE(i2c, tps546d24_id);\n\nstatic const struct of_device_id __maybe_unused tps546d24_of_match[] = {\n\t{.compatible = \"ti,tps546d24\"},\n\t{}\n};\nMODULE_DEVICE_TABLE(of, tps546d24_of_match);\n\n \nstatic struct i2c_driver tps546d24_driver = {\n\t.driver = {\n\t\t   .name = \"tps546d24\",\n\t\t   .of_match_table = of_match_ptr(tps546d24_of_match),\n\t   },\n\t.probe = tps546d24_probe,\n\t.id_table = tps546d24_id,\n};\n\nmodule_i2c_driver(tps546d24_driver);\n\nMODULE_AUTHOR(\"Duke Du <dukedu83@gmail.com>\");\nMODULE_DESCRIPTION(\"PMBus driver for TI tps546d24\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(PMBUS);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}