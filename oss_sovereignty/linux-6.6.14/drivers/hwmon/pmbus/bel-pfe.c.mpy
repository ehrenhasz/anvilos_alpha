{
  "module_name": "bel-pfe.c",
  "hash_id": "e2f235a286fdd8bd13b91d18cd84543dd321d2bb1633fcb9cb73614b7a14ca93",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/pmbus/bel-pfe.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/i2c.h>\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pmbus.h>\n\n#include \"pmbus.h\"\n\nenum chips {pfe1100, pfe3000};\n\n \nstatic struct pmbus_platform_data pfe_plat_data = {\n\t.flags = PMBUS_SKIP_STATUS_CHECK,\n};\n\nstatic struct pmbus_driver_info pfe_driver_info[] = {\n\t[pfe1100] = {\n\t\t.pages = 1,\n\t\t.format[PSC_VOLTAGE_IN] = linear,\n\t\t.format[PSC_VOLTAGE_OUT] = linear,\n\t\t.format[PSC_CURRENT_IN] = linear,\n\t\t.format[PSC_CURRENT_OUT] = linear,\n\t\t.format[PSC_POWER] = linear,\n\t\t.format[PSC_TEMPERATURE] = linear,\n\t\t.format[PSC_FAN] = linear,\n\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT |\n\t\t\t   PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT |\n\t\t\t   PMBUS_HAVE_POUT |\n\t\t\t   PMBUS_HAVE_VIN | PMBUS_HAVE_IIN |\n\t\t\t   PMBUS_HAVE_PIN | PMBUS_HAVE_STATUS_INPUT |\n\t\t\t   PMBUS_HAVE_TEMP | PMBUS_HAVE_TEMP2 |\n\t\t\t   PMBUS_HAVE_STATUS_TEMP |\n\t\t\t   PMBUS_HAVE_FAN12,\n\t},\n\n\t[pfe3000] = {\n\t\t.pages = 7,\n\t\t.format[PSC_VOLTAGE_IN] = linear,\n\t\t.format[PSC_VOLTAGE_OUT] = linear,\n\t\t.format[PSC_CURRENT_IN] = linear,\n\t\t.format[PSC_CURRENT_OUT] = linear,\n\t\t.format[PSC_POWER] = linear,\n\t\t.format[PSC_TEMPERATURE] = linear,\n\t\t.format[PSC_FAN] = linear,\n\n\t\t \n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT |\n\t\t\t   PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT |\n\t\t\t   PMBUS_HAVE_POUT | PMBUS_HAVE_FAN12 |\n\t\t\t   PMBUS_HAVE_VIN | PMBUS_HAVE_IIN |\n\t\t\t   PMBUS_HAVE_PIN | PMBUS_HAVE_STATUS_INPUT |\n\t\t\t   PMBUS_HAVE_TEMP | PMBUS_HAVE_TEMP2 |\n\t\t\t   PMBUS_HAVE_TEMP3 | PMBUS_HAVE_STATUS_TEMP |\n\t\t\t   PMBUS_HAVE_VCAP,\n\n\t\t \n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT |\n\t\t\t   PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT |\n\t\t\t   PMBUS_HAVE_PIN | PMBUS_HAVE_STATUS_INPUT |\n\t\t\t   PMBUS_HAVE_POUT,\n\n\t\t \n\t\t.func[2] = PMBUS_HAVE_VOUT,\n\t\t.func[4] = PMBUS_HAVE_VOUT,\n\t\t.func[5] = PMBUS_HAVE_VOUT,\n\t\t.func[6] = PMBUS_HAVE_VOUT,\n\t},\n};\n\nstatic const struct i2c_device_id pfe_device_id[];\n\nstatic int pfe_pmbus_probe(struct i2c_client *client)\n{\n\tint model;\n\n\tmodel = (int)i2c_match_id(pfe_device_id, client)->driver_data;\n\tclient->dev.platform_data = &pfe_plat_data;\n\n\t \n\tif (model == pfe3000)\n\t\ti2c_smbus_write_byte_data(client, PMBUS_PAGE, 0);\n\n\treturn pmbus_do_probe(client, &pfe_driver_info[model]);\n}\n\nstatic const struct i2c_device_id pfe_device_id[] = {\n\t{\"pfe1100\", pfe1100},\n\t{\"pfe3000\", pfe3000},\n\t{}\n};\n\nMODULE_DEVICE_TABLE(i2c, pfe_device_id);\n\nstatic struct i2c_driver pfe_pmbus_driver = {\n\t.driver = {\n\t\t   .name = \"bel-pfe\",\n\t},\n\t.probe = pfe_pmbus_probe,\n\t.id_table = pfe_device_id,\n};\n\nmodule_i2c_driver(pfe_pmbus_driver);\n\nMODULE_AUTHOR(\"Tao Ren <rentao.bupt@gmail.com>\");\nMODULE_DESCRIPTION(\"PMBus driver for BEL PFE Family Power Supplies\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(PMBUS);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}