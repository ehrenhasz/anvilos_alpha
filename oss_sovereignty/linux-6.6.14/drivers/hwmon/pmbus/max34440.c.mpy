{
  "module_name": "max34440.c",
  "hash_id": "8ffa3d021ebd90e0618dc45b254273663b395516ae97816a67037b7a931f2afa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/pmbus/max34440.c",
  "human_readable_source": "\n \n\n#include <linux/bitops.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/err.h>\n#include <linux/i2c.h>\n#include \"pmbus.h\"\n\nenum chips { max34440, max34441, max34446, max34451, max34460, max34461 };\n\n#define MAX34440_MFR_VOUT_PEAK\t\t0xd4\n#define MAX34440_MFR_IOUT_PEAK\t\t0xd5\n#define MAX34440_MFR_TEMPERATURE_PEAK\t0xd6\n#define MAX34440_MFR_VOUT_MIN\t\t0xd7\n\n#define MAX34446_MFR_POUT_PEAK\t\t0xe0\n#define MAX34446_MFR_POUT_AVG\t\t0xe1\n#define MAX34446_MFR_IOUT_AVG\t\t0xe2\n#define MAX34446_MFR_TEMPERATURE_AVG\t0xe3\n\n#define MAX34440_STATUS_OC_WARN\t\tBIT(0)\n#define MAX34440_STATUS_OC_FAULT\tBIT(1)\n#define MAX34440_STATUS_OT_FAULT\tBIT(5)\n#define MAX34440_STATUS_OT_WARN\t\tBIT(6)\n\n \n#define MAX34440_IOUT_OC_WARN_LIMIT\t0x46\n#define MAX34440_IOUT_OC_FAULT_LIMIT\t0x4A\n\n#define MAX34451_MFR_CHANNEL_CONFIG\t0xe4\n#define MAX34451_MFR_CHANNEL_CONFIG_SEL_MASK\t0x3f\n\nstruct max34440_data {\n\tint id;\n\tstruct pmbus_driver_info info;\n};\n\n#define to_max34440_data(x)  container_of(x, struct max34440_data, info)\n\nstatic const struct i2c_device_id max34440_id[];\n\nstatic int max34440_read_word_data(struct i2c_client *client, int page,\n\t\t\t\t   int phase, int reg)\n{\n\tint ret;\n\tconst struct pmbus_driver_info *info = pmbus_get_driver_info(client);\n\tconst struct max34440_data *data = to_max34440_data(info);\n\n\tswitch (reg) {\n\tcase PMBUS_IOUT_OC_FAULT_LIMIT:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_IOUT_OC_FAULT_LIMIT);\n\t\tbreak;\n\tcase PMBUS_IOUT_OC_WARN_LIMIT:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_IOUT_OC_WARN_LIMIT);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_VOUT_MIN:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_MFR_VOUT_MIN);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_VOUT_MAX:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_MFR_VOUT_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_IOUT_AVG:\n\t\tif (data->id != max34446 && data->id != max34451)\n\t\t\treturn -ENXIO;\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34446_MFR_IOUT_AVG);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_IOUT_MAX:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_MFR_IOUT_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_POUT_AVG:\n\t\tif (data->id != max34446)\n\t\t\treturn -ENXIO;\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34446_MFR_POUT_AVG);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_POUT_MAX:\n\t\tif (data->id != max34446)\n\t\t\treturn -ENXIO;\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34446_MFR_POUT_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_TEMP_AVG:\n\t\tif (data->id != max34446 && data->id != max34460 &&\n\t\t    data->id != max34461)\n\t\t\treturn -ENXIO;\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34446_MFR_TEMPERATURE_AVG);\n\t\tbreak;\n\tcase PMBUS_VIRT_READ_TEMP_MAX:\n\t\tret = pmbus_read_word_data(client, page, phase,\n\t\t\t\t\t   MAX34440_MFR_TEMPERATURE_PEAK);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_POUT_HISTORY:\n\t\tif (data->id != max34446)\n\t\t\treturn -ENXIO;\n\t\tret = 0;\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_VOUT_HISTORY:\n\tcase PMBUS_VIRT_RESET_IOUT_HISTORY:\n\tcase PMBUS_VIRT_RESET_TEMP_HISTORY:\n\t\tret = 0;\n\t\tbreak;\n\tdefault:\n\t\tret = -ENODATA;\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic int max34440_write_word_data(struct i2c_client *client, int page,\n\t\t\t\t    int reg, u16 word)\n{\n\tconst struct pmbus_driver_info *info = pmbus_get_driver_info(client);\n\tconst struct max34440_data *data = to_max34440_data(info);\n\tint ret;\n\n\tswitch (reg) {\n\tcase PMBUS_IOUT_OC_FAULT_LIMIT:\n\t\tret = pmbus_write_word_data(client, page, MAX34440_IOUT_OC_FAULT_LIMIT,\n\t\t\t\t\t    word);\n\t\tbreak;\n\tcase PMBUS_IOUT_OC_WARN_LIMIT:\n\t\tret = pmbus_write_word_data(client, page, MAX34440_IOUT_OC_WARN_LIMIT,\n\t\t\t\t\t    word);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_POUT_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34446_MFR_POUT_PEAK, 0);\n\t\tif (ret)\n\t\t\tbreak;\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34446_MFR_POUT_AVG, 0);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_VOUT_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34440_MFR_VOUT_MIN, 0x7fff);\n\t\tif (ret)\n\t\t\tbreak;\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34440_MFR_VOUT_PEAK, 0);\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_IOUT_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34440_MFR_IOUT_PEAK, 0);\n\t\tif (!ret && (data->id == max34446 || data->id == max34451))\n\t\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\tMAX34446_MFR_IOUT_AVG, 0);\n\n\t\tbreak;\n\tcase PMBUS_VIRT_RESET_TEMP_HISTORY:\n\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\t    MAX34440_MFR_TEMPERATURE_PEAK,\n\t\t\t\t\t    0x8000);\n\t\tif (!ret && data->id == max34446)\n\t\t\tret = pmbus_write_word_data(client, page,\n\t\t\t\t\tMAX34446_MFR_TEMPERATURE_AVG, 0);\n\t\tbreak;\n\tdefault:\n\t\tret = -ENODATA;\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic int max34440_read_byte_data(struct i2c_client *client, int page, int reg)\n{\n\tint ret = 0;\n\tint mfg_status;\n\n\tif (page >= 0) {\n\t\tret = pmbus_set_page(client, page, 0xff);\n\t\tif (ret < 0)\n\t\t\treturn ret;\n\t}\n\n\tswitch (reg) {\n\tcase PMBUS_STATUS_IOUT:\n\t\tmfg_status = pmbus_read_word_data(client, 0, 0xff,\n\t\t\t\t\t\t  PMBUS_STATUS_MFR_SPECIFIC);\n\t\tif (mfg_status < 0)\n\t\t\treturn mfg_status;\n\t\tif (mfg_status & MAX34440_STATUS_OC_WARN)\n\t\t\tret |= PB_IOUT_OC_WARNING;\n\t\tif (mfg_status & MAX34440_STATUS_OC_FAULT)\n\t\t\tret |= PB_IOUT_OC_FAULT;\n\t\tbreak;\n\tcase PMBUS_STATUS_TEMPERATURE:\n\t\tmfg_status = pmbus_read_word_data(client, 0, 0xff,\n\t\t\t\t\t\t  PMBUS_STATUS_MFR_SPECIFIC);\n\t\tif (mfg_status < 0)\n\t\t\treturn mfg_status;\n\t\tif (mfg_status & MAX34440_STATUS_OT_WARN)\n\t\t\tret |= PB_TEMP_OT_WARNING;\n\t\tif (mfg_status & MAX34440_STATUS_OT_FAULT)\n\t\t\tret |= PB_TEMP_OT_FAULT;\n\t\tbreak;\n\tdefault:\n\t\tret = -ENODATA;\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic int max34451_set_supported_funcs(struct i2c_client *client,\n\t\t\t\t\t struct max34440_data *data)\n{\n\t \n\n\tint page, rv;\n\n\tfor (page = 0; page < 16; page++) {\n\t\trv = i2c_smbus_write_byte_data(client, PMBUS_PAGE, page);\n\t\tif (rv < 0)\n\t\t\treturn rv;\n\n\t\trv = i2c_smbus_read_word_data(client,\n\t\t\t\t\t      MAX34451_MFR_CHANNEL_CONFIG);\n\t\tif (rv < 0)\n\t\t\treturn rv;\n\n\t\tswitch (rv & MAX34451_MFR_CHANNEL_CONFIG_SEL_MASK) {\n\t\tcase 0x10:\n\t\tcase 0x20:\n\t\t\tdata->info.func[page] = PMBUS_HAVE_VOUT |\n\t\t\t\tPMBUS_HAVE_STATUS_VOUT;\n\t\t\tbreak;\n\t\tcase 0x21:\n\t\t\tdata->info.func[page] = PMBUS_HAVE_VOUT;\n\t\t\tbreak;\n\t\tcase 0x22:\n\t\t\tdata->info.func[page] = PMBUS_HAVE_IOUT |\n\t\t\t\tPMBUS_HAVE_STATUS_IOUT;\n\t\t\tbreak;\n\t\tcase 0x23:\n\t\t\tdata->info.func[page] = PMBUS_HAVE_IOUT;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic struct pmbus_driver_info max34440_info[] = {\n\t[max34440] = {\n\t\t.pages = 14,\n\t\t.format[PSC_VOLTAGE_IN] = direct,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.format[PSC_CURRENT_OUT] = direct,\n\t\t.m[PSC_VOLTAGE_IN] = 1,\n\t\t.b[PSC_VOLTAGE_IN] = 0,\n\t\t.R[PSC_VOLTAGE_IN] = 3,\t     \n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,     \n\t\t.m[PSC_CURRENT_OUT] = 1,\n\t\t.b[PSC_CURRENT_OUT] = 0,\n\t\t.R[PSC_CURRENT_OUT] = 3,     \n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[4] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[5] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[6] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[7] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[8] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[9] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[10] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[11] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[12] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[13] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_byte_data = max34440_read_byte_data,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n\t[max34441] = {\n\t\t.pages = 12,\n\t\t.format[PSC_VOLTAGE_IN] = direct,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.format[PSC_CURRENT_OUT] = direct,\n\t\t.format[PSC_FAN] = direct,\n\t\t.m[PSC_VOLTAGE_IN] = 1,\n\t\t.b[PSC_VOLTAGE_IN] = 0,\n\t\t.R[PSC_VOLTAGE_IN] = 3,\n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,\n\t\t.m[PSC_CURRENT_OUT] = 1,\n\t\t.b[PSC_CURRENT_OUT] = 0,\n\t\t.R[PSC_CURRENT_OUT] = 3,\n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t.m[PSC_FAN] = 1,\n\t\t.b[PSC_FAN] = 0,\n\t\t.R[PSC_FAN] = 0,\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[4] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[5] = PMBUS_HAVE_FAN12 | PMBUS_HAVE_STATUS_FAN12,\n\t\t.func[6] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[7] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[8] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[9] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[10] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[11] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_byte_data = max34440_read_byte_data,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n\t[max34446] = {\n\t\t.pages = 7,\n\t\t.format[PSC_VOLTAGE_IN] = direct,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.format[PSC_CURRENT_OUT] = direct,\n\t\t.format[PSC_POWER] = direct,\n\t\t.m[PSC_VOLTAGE_IN] = 1,\n\t\t.b[PSC_VOLTAGE_IN] = 0,\n\t\t.R[PSC_VOLTAGE_IN] = 3,\n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,\n\t\t.m[PSC_CURRENT_OUT] = 1,\n\t\t.b[PSC_CURRENT_OUT] = 0,\n\t\t.R[PSC_CURRENT_OUT] = 3,\n\t\t.m[PSC_POWER] = 1,\n\t\t.b[PSC_POWER] = 0,\n\t\t.R[PSC_POWER] = 3,\n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT | PMBUS_HAVE_POUT,\n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT | PMBUS_HAVE_POUT,\n\t\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT\n\t\t  | PMBUS_HAVE_IOUT | PMBUS_HAVE_STATUS_IOUT,\n\t\t.func[4] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[5] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[6] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_byte_data = max34440_read_byte_data,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n\t[max34451] = {\n\t\t.pages = 21,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.format[PSC_CURRENT_OUT] = direct,\n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,\n\t\t.m[PSC_CURRENT_OUT] = 1,\n\t\t.b[PSC_CURRENT_OUT] = 0,\n\t\t.R[PSC_CURRENT_OUT] = 2,\n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t \n\t\t.func[16] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[17] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[18] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[19] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[20] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n\t[max34460] = {\n\t\t.pages = 18,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,\n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[4] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[5] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[6] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[7] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[8] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[9] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[10] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[11] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[13] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[14] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[15] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[16] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[17] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n\t[max34461] = {\n\t\t.pages = 23,\n\t\t.format[PSC_VOLTAGE_OUT] = direct,\n\t\t.format[PSC_TEMPERATURE] = direct,\n\t\t.m[PSC_VOLTAGE_OUT] = 1,\n\t\t.b[PSC_VOLTAGE_OUT] = 0,\n\t\t.R[PSC_VOLTAGE_OUT] = 3,\n\t\t.m[PSC_TEMPERATURE] = 1,\n\t\t.b[PSC_TEMPERATURE] = 0,\n\t\t.R[PSC_TEMPERATURE] = 2,\n\t\t.func[0] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[1] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[2] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[3] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[4] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[5] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[6] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[7] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[8] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[9] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[10] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[11] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[12] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[13] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[14] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t.func[15] = PMBUS_HAVE_VOUT | PMBUS_HAVE_STATUS_VOUT,\n\t\t \n\t\t.func[17] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[18] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[19] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[20] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.func[21] = PMBUS_HAVE_TEMP | PMBUS_HAVE_STATUS_TEMP,\n\t\t.read_word_data = max34440_read_word_data,\n\t\t.write_word_data = max34440_write_word_data,\n\t},\n};\n\nstatic int max34440_probe(struct i2c_client *client)\n{\n\tstruct max34440_data *data;\n\tint rv;\n\n\tdata = devm_kzalloc(&client->dev, sizeof(struct max34440_data),\n\t\t\t    GFP_KERNEL);\n\tif (!data)\n\t\treturn -ENOMEM;\n\tdata->id = i2c_match_id(max34440_id, client)->driver_data;\n\tdata->info = max34440_info[data->id];\n\n\tif (data->id == max34451) {\n\t\trv = max34451_set_supported_funcs(client, data);\n\t\tif (rv)\n\t\t\treturn rv;\n\t}\n\n\treturn pmbus_do_probe(client, &data->info);\n}\n\nstatic const struct i2c_device_id max34440_id[] = {\n\t{\"max34440\", max34440},\n\t{\"max34441\", max34441},\n\t{\"max34446\", max34446},\n\t{\"max34451\", max34451},\n\t{\"max34460\", max34460},\n\t{\"max34461\", max34461},\n\t{}\n};\nMODULE_DEVICE_TABLE(i2c, max34440_id);\n\n \nstatic struct i2c_driver max34440_driver = {\n\t.driver = {\n\t\t   .name = \"max34440\",\n\t\t   },\n\t.probe = max34440_probe,\n\t.id_table = max34440_id,\n};\n\nmodule_i2c_driver(max34440_driver);\n\nMODULE_AUTHOR(\"Guenter Roeck\");\nMODULE_DESCRIPTION(\"PMBus driver for Maxim MAX34440/MAX34441\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(PMBUS);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}