{
  "module_name": "pmbus.h",
  "hash_id": "2067a69cae3301ecb794f629d55e41a9ebf568c4bbab46634ee4128d56257db4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/pmbus/pmbus.h",
  "human_readable_source": " \n \n\n#ifndef PMBUS_H\n#define PMBUS_H\n\n#include <linux/bitops.h>\n#include <linux/regulator/driver.h>\n\n \nenum pmbus_regs {\n\tPMBUS_PAGE\t\t\t= 0x00,\n\tPMBUS_OPERATION\t\t\t= 0x01,\n\tPMBUS_ON_OFF_CONFIG\t\t= 0x02,\n\tPMBUS_CLEAR_FAULTS\t\t= 0x03,\n\tPMBUS_PHASE\t\t\t= 0x04,\n\n\tPMBUS_WRITE_PROTECT\t\t= 0x10,\n\n\tPMBUS_CAPABILITY\t\t= 0x19,\n\tPMBUS_QUERY\t\t\t= 0x1A,\n\tPMBUS_SMBALERT_MASK\t\t= 0x1B,\n\tPMBUS_VOUT_MODE\t\t\t= 0x20,\n\tPMBUS_VOUT_COMMAND\t\t= 0x21,\n\tPMBUS_VOUT_TRIM\t\t\t= 0x22,\n\tPMBUS_VOUT_CAL_OFFSET\t\t= 0x23,\n\tPMBUS_VOUT_MAX\t\t\t= 0x24,\n\tPMBUS_VOUT_MARGIN_HIGH\t\t= 0x25,\n\tPMBUS_VOUT_MARGIN_LOW\t\t= 0x26,\n\tPMBUS_VOUT_TRANSITION_RATE\t= 0x27,\n\tPMBUS_VOUT_DROOP\t\t= 0x28,\n\tPMBUS_VOUT_SCALE_LOOP\t\t= 0x29,\n\tPMBUS_VOUT_SCALE_MONITOR\t= 0x2A,\n\n\tPMBUS_COEFFICIENTS\t\t= 0x30,\n\tPMBUS_POUT_MAX\t\t\t= 0x31,\n\n\tPMBUS_FAN_CONFIG_12\t\t= 0x3A,\n\tPMBUS_FAN_COMMAND_1\t\t= 0x3B,\n\tPMBUS_FAN_COMMAND_2\t\t= 0x3C,\n\tPMBUS_FAN_CONFIG_34\t\t= 0x3D,\n\tPMBUS_FAN_COMMAND_3\t\t= 0x3E,\n\tPMBUS_FAN_COMMAND_4\t\t= 0x3F,\n\n\tPMBUS_VOUT_OV_FAULT_LIMIT\t= 0x40,\n\tPMBUS_VOUT_OV_FAULT_RESPONSE\t= 0x41,\n\tPMBUS_VOUT_OV_WARN_LIMIT\t= 0x42,\n\tPMBUS_VOUT_UV_WARN_LIMIT\t= 0x43,\n\tPMBUS_VOUT_UV_FAULT_LIMIT\t= 0x44,\n\tPMBUS_VOUT_UV_FAULT_RESPONSE\t= 0x45,\n\tPMBUS_IOUT_OC_FAULT_LIMIT\t= 0x46,\n\tPMBUS_IOUT_OC_FAULT_RESPONSE\t= 0x47,\n\tPMBUS_IOUT_OC_LV_FAULT_LIMIT\t= 0x48,\n\tPMBUS_IOUT_OC_LV_FAULT_RESPONSE\t= 0x49,\n\tPMBUS_IOUT_OC_WARN_LIMIT\t= 0x4A,\n\tPMBUS_IOUT_UC_FAULT_LIMIT\t= 0x4B,\n\tPMBUS_IOUT_UC_FAULT_RESPONSE\t= 0x4C,\n\n\tPMBUS_OT_FAULT_LIMIT\t\t= 0x4F,\n\tPMBUS_OT_FAULT_RESPONSE\t\t= 0x50,\n\tPMBUS_OT_WARN_LIMIT\t\t= 0x51,\n\tPMBUS_UT_WARN_LIMIT\t\t= 0x52,\n\tPMBUS_UT_FAULT_LIMIT\t\t= 0x53,\n\tPMBUS_UT_FAULT_RESPONSE\t\t= 0x54,\n\tPMBUS_VIN_OV_FAULT_LIMIT\t= 0x55,\n\tPMBUS_VIN_OV_FAULT_RESPONSE\t= 0x56,\n\tPMBUS_VIN_OV_WARN_LIMIT\t\t= 0x57,\n\tPMBUS_VIN_UV_WARN_LIMIT\t\t= 0x58,\n\tPMBUS_VIN_UV_FAULT_LIMIT\t= 0x59,\n\n\tPMBUS_IIN_OC_FAULT_LIMIT\t= 0x5B,\n\tPMBUS_IIN_OC_WARN_LIMIT\t\t= 0x5D,\n\n\tPMBUS_POUT_OP_FAULT_LIMIT\t= 0x68,\n\tPMBUS_POUT_OP_WARN_LIMIT\t= 0x6A,\n\tPMBUS_PIN_OP_WARN_LIMIT\t\t= 0x6B,\n\n\tPMBUS_STATUS_BYTE\t\t= 0x78,\n\tPMBUS_STATUS_WORD\t\t= 0x79,\n\tPMBUS_STATUS_VOUT\t\t= 0x7A,\n\tPMBUS_STATUS_IOUT\t\t= 0x7B,\n\tPMBUS_STATUS_INPUT\t\t= 0x7C,\n\tPMBUS_STATUS_TEMPERATURE\t= 0x7D,\n\tPMBUS_STATUS_CML\t\t= 0x7E,\n\tPMBUS_STATUS_OTHER\t\t= 0x7F,\n\tPMBUS_STATUS_MFR_SPECIFIC\t= 0x80,\n\tPMBUS_STATUS_FAN_12\t\t= 0x81,\n\tPMBUS_STATUS_FAN_34\t\t= 0x82,\n\n\tPMBUS_READ_VIN\t\t\t= 0x88,\n\tPMBUS_READ_IIN\t\t\t= 0x89,\n\tPMBUS_READ_VCAP\t\t\t= 0x8A,\n\tPMBUS_READ_VOUT\t\t\t= 0x8B,\n\tPMBUS_READ_IOUT\t\t\t= 0x8C,\n\tPMBUS_READ_TEMPERATURE_1\t= 0x8D,\n\tPMBUS_READ_TEMPERATURE_2\t= 0x8E,\n\tPMBUS_READ_TEMPERATURE_3\t= 0x8F,\n\tPMBUS_READ_FAN_SPEED_1\t\t= 0x90,\n\tPMBUS_READ_FAN_SPEED_2\t\t= 0x91,\n\tPMBUS_READ_FAN_SPEED_3\t\t= 0x92,\n\tPMBUS_READ_FAN_SPEED_4\t\t= 0x93,\n\tPMBUS_READ_DUTY_CYCLE\t\t= 0x94,\n\tPMBUS_READ_FREQUENCY\t\t= 0x95,\n\tPMBUS_READ_POUT\t\t\t= 0x96,\n\tPMBUS_READ_PIN\t\t\t= 0x97,\n\n\tPMBUS_REVISION\t\t\t= 0x98,\n\tPMBUS_MFR_ID\t\t\t= 0x99,\n\tPMBUS_MFR_MODEL\t\t\t= 0x9A,\n\tPMBUS_MFR_REVISION\t\t= 0x9B,\n\tPMBUS_MFR_LOCATION\t\t= 0x9C,\n\tPMBUS_MFR_DATE\t\t\t= 0x9D,\n\tPMBUS_MFR_SERIAL\t\t= 0x9E,\n\n\tPMBUS_MFR_VIN_MIN\t\t= 0xA0,\n\tPMBUS_MFR_VIN_MAX\t\t= 0xA1,\n\tPMBUS_MFR_IIN_MAX\t\t= 0xA2,\n\tPMBUS_MFR_PIN_MAX\t\t= 0xA3,\n\tPMBUS_MFR_VOUT_MIN\t\t= 0xA4,\n\tPMBUS_MFR_VOUT_MAX\t\t= 0xA5,\n\tPMBUS_MFR_IOUT_MAX\t\t= 0xA6,\n\tPMBUS_MFR_POUT_MAX\t\t= 0xA7,\n\n\tPMBUS_IC_DEVICE_ID\t\t= 0xAD,\n\tPMBUS_IC_DEVICE_REV\t\t= 0xAE,\n\n\tPMBUS_MFR_MAX_TEMP_1\t\t= 0xC0,\n\tPMBUS_MFR_MAX_TEMP_2\t\t= 0xC1,\n\tPMBUS_MFR_MAX_TEMP_3\t\t= 0xC2,\n\n \n\tPMBUS_VIRT_BASE\t\t\t= 0x100,\n\tPMBUS_VIRT_READ_TEMP_AVG,\n\tPMBUS_VIRT_READ_TEMP_MIN,\n\tPMBUS_VIRT_READ_TEMP_MAX,\n\tPMBUS_VIRT_RESET_TEMP_HISTORY,\n\tPMBUS_VIRT_READ_VIN_AVG,\n\tPMBUS_VIRT_READ_VIN_MIN,\n\tPMBUS_VIRT_READ_VIN_MAX,\n\tPMBUS_VIRT_RESET_VIN_HISTORY,\n\tPMBUS_VIRT_READ_IIN_AVG,\n\tPMBUS_VIRT_READ_IIN_MIN,\n\tPMBUS_VIRT_READ_IIN_MAX,\n\tPMBUS_VIRT_RESET_IIN_HISTORY,\n\tPMBUS_VIRT_READ_PIN_AVG,\n\tPMBUS_VIRT_READ_PIN_MIN,\n\tPMBUS_VIRT_READ_PIN_MAX,\n\tPMBUS_VIRT_RESET_PIN_HISTORY,\n\tPMBUS_VIRT_READ_POUT_AVG,\n\tPMBUS_VIRT_READ_POUT_MIN,\n\tPMBUS_VIRT_READ_POUT_MAX,\n\tPMBUS_VIRT_RESET_POUT_HISTORY,\n\tPMBUS_VIRT_READ_VOUT_AVG,\n\tPMBUS_VIRT_READ_VOUT_MIN,\n\tPMBUS_VIRT_READ_VOUT_MAX,\n\tPMBUS_VIRT_RESET_VOUT_HISTORY,\n\tPMBUS_VIRT_READ_IOUT_AVG,\n\tPMBUS_VIRT_READ_IOUT_MIN,\n\tPMBUS_VIRT_READ_IOUT_MAX,\n\tPMBUS_VIRT_RESET_IOUT_HISTORY,\n\tPMBUS_VIRT_READ_TEMP2_AVG,\n\tPMBUS_VIRT_READ_TEMP2_MIN,\n\tPMBUS_VIRT_READ_TEMP2_MAX,\n\tPMBUS_VIRT_RESET_TEMP2_HISTORY,\n\n\tPMBUS_VIRT_READ_VMON,\n\tPMBUS_VIRT_VMON_UV_WARN_LIMIT,\n\tPMBUS_VIRT_VMON_OV_WARN_LIMIT,\n\tPMBUS_VIRT_VMON_UV_FAULT_LIMIT,\n\tPMBUS_VIRT_VMON_OV_FAULT_LIMIT,\n\tPMBUS_VIRT_STATUS_VMON,\n\n\t \n\tPMBUS_VIRT_FAN_TARGET_1,\n\tPMBUS_VIRT_FAN_TARGET_2,\n\tPMBUS_VIRT_FAN_TARGET_3,\n\tPMBUS_VIRT_FAN_TARGET_4,\n\tPMBUS_VIRT_PWM_1,\n\tPMBUS_VIRT_PWM_2,\n\tPMBUS_VIRT_PWM_3,\n\tPMBUS_VIRT_PWM_4,\n\tPMBUS_VIRT_PWM_ENABLE_1,\n\tPMBUS_VIRT_PWM_ENABLE_2,\n\tPMBUS_VIRT_PWM_ENABLE_3,\n\tPMBUS_VIRT_PWM_ENABLE_4,\n\n\t \n\tPMBUS_VIRT_SAMPLES,\n\tPMBUS_VIRT_IN_SAMPLES,\n\tPMBUS_VIRT_CURR_SAMPLES,\n\tPMBUS_VIRT_POWER_SAMPLES,\n\tPMBUS_VIRT_TEMP_SAMPLES,\n};\n\n \n#define PB_OPERATION_CONTROL_ON\t\tBIT(7)\n\n \n#define PB_WP_ALL\tBIT(7)\t \n#define PB_WP_OP\tBIT(6)\t \n#define PB_WP_VOUT\tBIT(5)\t \n\n#define PB_WP_ANY\t(PB_WP_ALL | PB_WP_OP | PB_WP_VOUT)\n\n \n#define PB_CAPABILITY_SMBALERT\t\tBIT(4)\n#define PB_CAPABILITY_ERROR_CHECK\tBIT(7)\n\n \n#define PB_VOUT_MODE_MODE_MASK\t\t0xe0\n#define PB_VOUT_MODE_PARAM_MASK\t\t0x1f\n\n#define PB_VOUT_MODE_LINEAR\t\t0x00\n#define PB_VOUT_MODE_VID\t\t0x20\n#define PB_VOUT_MODE_DIRECT\t\t0x40\n\n \n#define PB_FAN_2_PULSE_MASK\t\t(BIT(0) | BIT(1))\n#define PB_FAN_2_RPM\t\t\tBIT(2)\n#define PB_FAN_2_INSTALLED\t\tBIT(3)\n#define PB_FAN_1_PULSE_MASK\t\t(BIT(4) | BIT(5))\n#define PB_FAN_1_RPM\t\t\tBIT(6)\n#define PB_FAN_1_INSTALLED\t\tBIT(7)\n\nenum pmbus_fan_mode { percent = 0, rpm };\n\n \n#define PB_STATUS_NONE_ABOVE\t\tBIT(0)\n#define PB_STATUS_CML\t\t\tBIT(1)\n#define PB_STATUS_TEMPERATURE\t\tBIT(2)\n#define PB_STATUS_VIN_UV\t\tBIT(3)\n#define PB_STATUS_IOUT_OC\t\tBIT(4)\n#define PB_STATUS_VOUT_OV\t\tBIT(5)\n#define PB_STATUS_OFF\t\t\tBIT(6)\n#define PB_STATUS_BUSY\t\t\tBIT(7)\n\n \n#define PB_STATUS_UNKNOWN\t\tBIT(8)\n#define PB_STATUS_OTHER\t\t\tBIT(9)\n#define PB_STATUS_FANS\t\t\tBIT(10)\n#define PB_STATUS_POWER_GOOD_N\t\tBIT(11)\n#define PB_STATUS_WORD_MFR\t\tBIT(12)\n#define PB_STATUS_INPUT\t\t\tBIT(13)\n#define PB_STATUS_IOUT_POUT\t\tBIT(14)\n#define PB_STATUS_VOUT\t\t\tBIT(15)\n\n \n#define PB_POUT_OP_WARNING\t\tBIT(0)\n#define PB_POUT_OP_FAULT\t\tBIT(1)\n#define PB_POWER_LIMITING\t\tBIT(2)\n#define PB_CURRENT_SHARE_FAULT\t\tBIT(3)\n#define PB_IOUT_UC_FAULT\t\tBIT(4)\n#define PB_IOUT_OC_WARNING\t\tBIT(5)\n#define PB_IOUT_OC_LV_FAULT\t\tBIT(6)\n#define PB_IOUT_OC_FAULT\t\tBIT(7)\n\n \n#define PB_VOLTAGE_VIN_OFF\t\tBIT(3)\n#define PB_VOLTAGE_UV_FAULT\t\tBIT(4)\n#define PB_VOLTAGE_UV_WARNING\t\tBIT(5)\n#define PB_VOLTAGE_OV_WARNING\t\tBIT(6)\n#define PB_VOLTAGE_OV_FAULT\t\tBIT(7)\n\n \n#define PB_PIN_OP_WARNING\t\tBIT(0)\n#define PB_IIN_OC_WARNING\t\tBIT(1)\n#define PB_IIN_OC_FAULT\t\t\tBIT(2)\n\n \n#define PB_TEMP_UT_FAULT\t\tBIT(4)\n#define PB_TEMP_UT_WARNING\t\tBIT(5)\n#define PB_TEMP_OT_WARNING\t\tBIT(6)\n#define PB_TEMP_OT_FAULT\t\tBIT(7)\n\n \n#define PB_FAN_AIRFLOW_WARNING\t\tBIT(0)\n#define PB_FAN_AIRFLOW_FAULT\t\tBIT(1)\n#define PB_FAN_FAN2_SPEED_OVERRIDE\tBIT(2)\n#define PB_FAN_FAN1_SPEED_OVERRIDE\tBIT(3)\n#define PB_FAN_FAN2_WARNING\t\tBIT(4)\n#define PB_FAN_FAN1_WARNING\t\tBIT(5)\n#define PB_FAN_FAN2_FAULT\t\tBIT(6)\n#define PB_FAN_FAN1_FAULT\t\tBIT(7)\n\n \n#define PB_CML_FAULT_OTHER_MEM_LOGIC\tBIT(0)\n#define PB_CML_FAULT_OTHER_COMM\t\tBIT(1)\n#define PB_CML_FAULT_PROCESSOR\t\tBIT(3)\n#define PB_CML_FAULT_MEMORY\t\tBIT(4)\n#define PB_CML_FAULT_PACKET_ERROR\tBIT(5)\n#define PB_CML_FAULT_INVALID_DATA\tBIT(6)\n#define PB_CML_FAULT_INVALID_COMMAND\tBIT(7)\n\nenum pmbus_sensor_classes {\n\tPSC_VOLTAGE_IN = 0,\n\tPSC_VOLTAGE_OUT,\n\tPSC_CURRENT_IN,\n\tPSC_CURRENT_OUT,\n\tPSC_POWER,\n\tPSC_TEMPERATURE,\n\tPSC_FAN,\n\tPSC_PWM,\n\tPSC_NUM_CLASSES\t\t \n};\n\n#define PMBUS_PAGES\t32\t \n#define PMBUS_PHASES\t10\t \n\n \n#define PMBUS_HAVE_VIN\t\tBIT(0)\n#define PMBUS_HAVE_VCAP\t\tBIT(1)\n#define PMBUS_HAVE_VOUT\t\tBIT(2)\n#define PMBUS_HAVE_IIN\t\tBIT(3)\n#define PMBUS_HAVE_IOUT\t\tBIT(4)\n#define PMBUS_HAVE_PIN\t\tBIT(5)\n#define PMBUS_HAVE_POUT\t\tBIT(6)\n#define PMBUS_HAVE_FAN12\tBIT(7)\n#define PMBUS_HAVE_FAN34\tBIT(8)\n#define PMBUS_HAVE_TEMP\t\tBIT(9)\n#define PMBUS_HAVE_TEMP2\tBIT(10)\n#define PMBUS_HAVE_TEMP3\tBIT(11)\n#define PMBUS_HAVE_STATUS_VOUT\tBIT(12)\n#define PMBUS_HAVE_STATUS_IOUT\tBIT(13)\n#define PMBUS_HAVE_STATUS_INPUT\tBIT(14)\n#define PMBUS_HAVE_STATUS_TEMP\tBIT(15)\n#define PMBUS_HAVE_STATUS_FAN12\tBIT(16)\n#define PMBUS_HAVE_STATUS_FAN34\tBIT(17)\n#define PMBUS_HAVE_VMON\t\tBIT(18)\n#define PMBUS_HAVE_STATUS_VMON\tBIT(19)\n#define PMBUS_HAVE_PWM12\tBIT(20)\n#define PMBUS_HAVE_PWM34\tBIT(21)\n#define PMBUS_HAVE_SAMPLES\tBIT(22)\n\n#define PMBUS_PHASE_VIRTUAL\tBIT(30)\t \n#define PMBUS_PAGE_VIRTUAL\tBIT(31)\t \n\nenum pmbus_data_format { linear = 0, ieee754, direct, vid };\nenum vrm_version { vr11 = 0, vr12, vr13, imvp9, amd625mv };\n\nstruct pmbus_driver_info {\n\tint pages;\t\t \n\tu8 phases[PMBUS_PAGES];\t \n\tenum pmbus_data_format format[PSC_NUM_CLASSES];\n\tenum vrm_version vrm_version[PMBUS_PAGES];  \n\t \n\tint m[PSC_NUM_CLASSES];\t \n\tint b[PSC_NUM_CLASSES];\t \n\tint R[PSC_NUM_CLASSES];\t \n\n\tu32 func[PMBUS_PAGES];\t \n\tu32 pfunc[PMBUS_PHASES]; \n\t \n\tint (*read_byte_data)(struct i2c_client *client, int page, int reg);\n\tint (*read_word_data)(struct i2c_client *client, int page, int phase,\n\t\t\t      int reg);\n\tint (*write_byte_data)(struct i2c_client *client, int page, int reg,\n\t\t\t      u8 byte);\n\tint (*write_word_data)(struct i2c_client *client, int page, int reg,\n\t\t\t       u16 word);\n\tint (*write_byte)(struct i2c_client *client, int page, u8 value);\n\t \n\tint (*identify)(struct i2c_client *client,\n\t\t\tstruct pmbus_driver_info *info);\n\n\t \n\tint num_regulators;\n\tconst struct regulator_desc *reg_desc;\n\n\t \n\tconst struct attribute_group **groups;\n};\n\n \n\nextern const struct regulator_ops pmbus_regulator_ops;\n\n \n#define PMBUS_REGULATOR_STEP(_name, _id, _voltages, _step, _min_uV)  \\\n\t[_id] = {\t\t\t\t\t\t\\\n\t\t.name = (_name # _id),\t\t\t\t\\\n\t\t.id = (_id),\t\t\t\t\t\\\n\t\t.of_match = of_match_ptr(_name # _id),\t\t\\\n\t\t.regulators_node = of_match_ptr(\"regulators\"),\t\\\n\t\t.ops = &pmbus_regulator_ops,\t\t\t\\\n\t\t.type = REGULATOR_VOLTAGE,\t\t\t\\\n\t\t.owner = THIS_MODULE,\t\t\t\t\\\n\t\t.n_voltages = _voltages,\t\t\t\\\n\t\t.uV_step = _step,\t\t\t\t\\\n\t\t.min_uV = _min_uV,\t\t\t\t\\\n\t}\n\n#define PMBUS_REGULATOR(_name, _id)   PMBUS_REGULATOR_STEP(_name, _id, 0, 0, 0)\n\n \n\nvoid pmbus_clear_cache(struct i2c_client *client);\nvoid pmbus_set_update(struct i2c_client *client, u8 reg, bool update);\nint pmbus_set_page(struct i2c_client *client, int page, int phase);\nint pmbus_read_word_data(struct i2c_client *client, int page, int phase,\n\t\t\t u8 reg);\nint pmbus_write_word_data(struct i2c_client *client, int page, u8 reg,\n\t\t\t  u16 word);\nint pmbus_read_byte_data(struct i2c_client *client, int page, u8 reg);\nint pmbus_write_byte(struct i2c_client *client, int page, u8 value);\nint pmbus_write_byte_data(struct i2c_client *client, int page, u8 reg,\n\t\t\t  u8 value);\nint pmbus_update_byte_data(struct i2c_client *client, int page, u8 reg,\n\t\t\t   u8 mask, u8 value);\nvoid pmbus_clear_faults(struct i2c_client *client);\nbool pmbus_check_byte_register(struct i2c_client *client, int page, int reg);\nbool pmbus_check_word_register(struct i2c_client *client, int page, int reg);\nint pmbus_do_probe(struct i2c_client *client, struct pmbus_driver_info *info);\nconst struct pmbus_driver_info *pmbus_get_driver_info(struct i2c_client\n\t\t\t\t\t\t      *client);\nint pmbus_get_fan_rate_device(struct i2c_client *client, int page, int id,\n\t\t\t      enum pmbus_fan_mode mode);\nint pmbus_get_fan_rate_cached(struct i2c_client *client, int page, int id,\n\t\t\t      enum pmbus_fan_mode mode);\nint pmbus_lock_interruptible(struct i2c_client *client);\nvoid pmbus_unlock(struct i2c_client *client);\nint pmbus_update_fan(struct i2c_client *client, int page, int id,\n\t\t     u8 config, u8 mask, u16 command);\nstruct dentry *pmbus_get_debugfs_dir(struct i2c_client *client);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}