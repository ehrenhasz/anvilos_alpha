{
  "module_name": "adt7410.c",
  "hash_id": "836e7ad3bc52825bd5118d890ad425b8865ff5bfd99443b13ace666311933fc1",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/adt7410.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/i2c.h>\n#include <linux/regmap.h>\n\n#include \"adt7x10.h\"\n\nstatic bool adt7410_regmap_is_volatile(struct device *dev, unsigned int reg)\n{\n\tswitch (reg) {\n\tcase ADT7X10_TEMPERATURE:\n\tcase ADT7X10_STATUS:\n\t\treturn true;\n\tdefault:\n\t\treturn false;\n\t}\n}\n\nstatic int adt7410_reg_read(void *context, unsigned int reg, unsigned int *val)\n{\n\tstruct i2c_client *client = context;\n\tint regval;\n\n\tswitch (reg) {\n\tcase ADT7X10_TEMPERATURE:\n\tcase ADT7X10_T_ALARM_HIGH:\n\tcase ADT7X10_T_ALARM_LOW:\n\tcase ADT7X10_T_CRIT:\n\t\tregval = i2c_smbus_read_word_swapped(client, reg);\n\t\tbreak;\n\tdefault:\n\t\tregval = i2c_smbus_read_byte_data(client, reg);\n\t\tbreak;\n\t}\n\tif (regval < 0)\n\t\treturn regval;\n\t*val = regval;\n\treturn 0;\n}\n\nstatic int adt7410_reg_write(void *context, unsigned int reg, unsigned int val)\n{\n\tstruct i2c_client *client = context;\n\tint ret;\n\n\tswitch (reg) {\n\tcase ADT7X10_TEMPERATURE:\n\tcase ADT7X10_T_ALARM_HIGH:\n\tcase ADT7X10_T_ALARM_LOW:\n\tcase ADT7X10_T_CRIT:\n\t\tret = i2c_smbus_write_word_swapped(client, reg, val);\n\t\tbreak;\n\tdefault:\n\t\tret = i2c_smbus_write_byte_data(client, reg, val);\n\t\tbreak;\n\t}\n\treturn ret;\n}\n\nstatic const struct regmap_config adt7410_regmap_config = {\n\t.reg_bits = 8,\n\t.val_bits = 16,\n\t.max_register = ADT7X10_ID,\n\t.cache_type = REGCACHE_RBTREE,\n\t.volatile_reg = adt7410_regmap_is_volatile,\n\t.reg_read = adt7410_reg_read,\n\t.reg_write = adt7410_reg_write,\n};\n\nstatic int adt7410_i2c_probe(struct i2c_client *client)\n{\n\tstruct regmap *regmap;\n\n\tregmap = devm_regmap_init(&client->dev, NULL, client,\n\t\t\t\t  &adt7410_regmap_config);\n\tif (IS_ERR(regmap))\n\t\treturn PTR_ERR(regmap);\n\n\treturn adt7x10_probe(&client->dev, client->name, client->irq, regmap);\n}\n\nstatic const struct i2c_device_id adt7410_ids[] = {\n\t{ \"adt7410\", 0 },\n\t{ \"adt7420\", 0 },\n\t{}\n};\nMODULE_DEVICE_TABLE(i2c, adt7410_ids);\n\nstatic struct i2c_driver adt7410_driver = {\n\t.class\t\t= I2C_CLASS_HWMON,\n\t.driver = {\n\t\t.name\t= \"adt7410\",\n\t\t.pm\t= pm_sleep_ptr(&adt7x10_dev_pm_ops),\n\t},\n\t.probe\t\t= adt7410_i2c_probe,\n\t.id_table\t= adt7410_ids,\n\t.address_list\t= I2C_ADDRS(0x48, 0x49, 0x4a, 0x4b),\n};\nmodule_i2c_driver(adt7410_driver);\n\nMODULE_AUTHOR(\"Lars-Peter Clausen <lars@metafoo.de>\");\nMODULE_DESCRIPTION(\"ADT7410/AD7420 driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}