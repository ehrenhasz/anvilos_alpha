{
  "module_name": "common.h",
  "hash_id": "89f304ad6df706d03fa681160095f4dd463db46e08a3ede0061e6568789e20c2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/hwmon/occ/common.h",
  "human_readable_source": " \n \n\n#ifndef OCC_COMMON_H\n#define OCC_COMMON_H\n\n#include <linux/hwmon-sysfs.h>\n#include <linux/mutex.h>\n#include <linux/sysfs.h>\n\nstruct device;\n\n#define OCC_RESP_DATA_BYTES\t\t4089\n\n \nstruct occ_response {\n\tu8 seq_no;\n\tu8 cmd_type;\n\tu8 return_status;\n\t__be16 data_length;\n\tu8 data[OCC_RESP_DATA_BYTES];\n\t__be16 checksum;\n} __packed;\n\nstruct occ_sensor_data_block_header {\n\tu8 eye_catcher[4];\n\tu8 reserved;\n\tu8 sensor_format;\n\tu8 sensor_length;\n\tu8 num_sensors;\n} __packed;\n\nstruct occ_sensor_data_block {\n\tstruct occ_sensor_data_block_header header;\n\tu32 data;\n} __packed;\n\nstruct occ_poll_response_header {\n\tu8 status;\n\tu8 ext_status;\n\tu8 occs_present;\n\tu8 config_data;\n\tu8 occ_state;\n\tu8 mode;\n\tu8 ips_status;\n\tu8 error_log_id;\n\t__be32 error_log_start_address;\n\t__be16 error_log_length;\n\tu16 reserved;\n\tu8 occ_code_level[16];\n\tu8 eye_catcher[6];\n\tu8 num_sensor_data_blocks;\n\tu8 sensor_data_block_header_version;\n} __packed;\n\nstruct occ_poll_response {\n\tstruct occ_poll_response_header header;\n\tstruct occ_sensor_data_block block;\n} __packed;\n\nstruct occ_sensor {\n\tu8 num_sensors;\n\tu8 version;\n\tvoid *data;\t \n};\n\n \nstruct occ_sensors {\n\tstruct occ_sensor temp;\n\tstruct occ_sensor freq;\n\tstruct occ_sensor power;\n\tstruct occ_sensor caps;\n\tstruct occ_sensor extended;\n};\n\n \nstruct occ_attribute {\n\tchar name[32];\n\tstruct sensor_device_attribute_2 sensor;\n};\n\nstruct occ {\n\tstruct device *bus_dev;\n\n\tstruct occ_response resp;\n\tstruct occ_sensors sensors;\n\n\tint powr_sample_time_us;\t \n\tu8 poll_cmd_data;\t\t \n\tint (*send_cmd)(struct occ *occ, u8 *cmd, size_t len, void *resp,\n\t\t\tsize_t resp_len);\n\n\tunsigned long next_update;\n\tstruct mutex lock;\t\t \n\n\tstruct device *hwmon;\n\tstruct occ_attribute *attrs;\n\tstruct attribute_group group;\n\tconst struct attribute_group *groups[2];\n\n\tbool active;\n\tint error;                       \n\tint last_error;\t\t\t \n\tunsigned int error_count;        \n\tunsigned long last_safe;         \n\n\t \n\tint prev_error;\n\tu8 prev_stat;\n\tu8 prev_ext_stat;\n\tu8 prev_occs_present;\n\tu8 prev_ips_status;\n\tu8 prev_mode;\n};\n\nint occ_active(struct occ *occ, bool active);\nint occ_setup(struct occ *occ);\nint occ_setup_sysfs(struct occ *occ);\nvoid occ_shutdown(struct occ *occ);\nvoid occ_shutdown_sysfs(struct occ *occ);\nvoid occ_sysfs_poll_done(struct occ *occ);\nint occ_update_response(struct occ *occ);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}