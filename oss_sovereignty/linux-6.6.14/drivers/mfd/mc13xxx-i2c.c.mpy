{
  "module_name": "mc13xxx-i2c.c",
  "hash_id": "ccd0b04a8fdbf375942049506b9549bb58579e5b59f37e54fdfb9a1813fd2534",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/mc13xxx-i2c.c",
  "human_readable_source": "\n \n\n#include <linux/slab.h>\n#include <linux/module.h>\n#include <linux/platform_device.h>\n#include <linux/mfd/core.h>\n#include <linux/mfd/mc13xxx.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/i2c.h>\n#include <linux/err.h>\n\n#include \"mc13xxx.h\"\n\nstatic const struct i2c_device_id mc13xxx_i2c_device_id[] = {\n\t{\n\t\t.name = \"mc13892\",\n\t\t.driver_data = (kernel_ulong_t)&mc13xxx_variant_mc13892,\n\t}, {\n\t\t.name = \"mc34708\",\n\t\t.driver_data = (kernel_ulong_t)&mc13xxx_variant_mc34708,\n\t}, {\n\t\t \n\t}\n};\nMODULE_DEVICE_TABLE(i2c, mc13xxx_i2c_device_id);\n\nstatic const struct of_device_id mc13xxx_dt_ids[] = {\n\t{\n\t\t.compatible = \"fsl,mc13892\",\n\t\t.data = &mc13xxx_variant_mc13892,\n\t}, {\n\t\t.compatible = \"fsl,mc34708\",\n\t\t.data = &mc13xxx_variant_mc34708,\n\t}, {\n\t\t \n\t}\n};\nMODULE_DEVICE_TABLE(of, mc13xxx_dt_ids);\n\nstatic const struct regmap_config mc13xxx_regmap_i2c_config = {\n\t.reg_bits = 8,\n\t.val_bits = 24,\n\n\t.max_register = MC13XXX_NUMREGS,\n\n\t.cache_type = REGCACHE_NONE,\n};\n\nstatic int mc13xxx_i2c_probe(struct i2c_client *client)\n{\n\tstruct mc13xxx *mc13xxx;\n\tint ret;\n\n\tmc13xxx = devm_kzalloc(&client->dev, sizeof(*mc13xxx), GFP_KERNEL);\n\tif (!mc13xxx)\n\t\treturn -ENOMEM;\n\n\tdev_set_drvdata(&client->dev, mc13xxx);\n\n\tmc13xxx->irq = client->irq;\n\n\tmc13xxx->regmap = devm_regmap_init_i2c(client,\n\t\t\t\t\t       &mc13xxx_regmap_i2c_config);\n\tif (IS_ERR(mc13xxx->regmap)) {\n\t\tret = PTR_ERR(mc13xxx->regmap);\n\t\tdev_err(&client->dev, \"Failed to initialize regmap: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tmc13xxx->variant = i2c_get_match_data(client);\n\n\treturn mc13xxx_common_init(&client->dev);\n}\n\nstatic void mc13xxx_i2c_remove(struct i2c_client *client)\n{\n\tmc13xxx_common_exit(&client->dev);\n}\n\nstatic struct i2c_driver mc13xxx_i2c_driver = {\n\t.id_table = mc13xxx_i2c_device_id,\n\t.driver = {\n\t\t.name = \"mc13xxx\",\n\t\t.of_match_table = mc13xxx_dt_ids,\n\t},\n\t.probe = mc13xxx_i2c_probe,\n\t.remove = mc13xxx_i2c_remove,\n};\n\nstatic int __init mc13xxx_i2c_init(void)\n{\n\treturn i2c_add_driver(&mc13xxx_i2c_driver);\n}\nsubsys_initcall(mc13xxx_i2c_init);\n\nstatic void __exit mc13xxx_i2c_exit(void)\n{\n\ti2c_del_driver(&mc13xxx_i2c_driver);\n}\nmodule_exit(mc13xxx_i2c_exit);\n\nMODULE_DESCRIPTION(\"i2c driver for Freescale MC13XXX PMIC\");\nMODULE_AUTHOR(\"Marc Reilly <marc@cpdesign.com.au\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}