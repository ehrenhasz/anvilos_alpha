{
  "module_name": "intel-lpss-acpi.c",
  "hash_id": "bb033aaa7ca7513ef3f570faa0e027c8152f3659f848ba8791f4f37fec74c17e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/intel-lpss-acpi.c",
  "human_readable_source": "\n \n\n#include <linux/acpi.h>\n#include <linux/ioport.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/pm_runtime.h>\n#include <linux/platform_device.h>\n#include <linux/property.h>\n#include <linux/pxa2xx_ssp.h>\n\n#include \"intel-lpss.h\"\n\nstatic const struct property_entry spt_spi_properties[] = {\n\tPROPERTY_ENTRY_U32(\"intel,spi-pxa2xx-type\", LPSS_SPT_SSP),\n\t{ }\n};\n\nstatic const struct software_node spt_spi_node = {\n\t.properties = spt_spi_properties,\n};\n\nstatic const struct intel_lpss_platform_info spt_info = {\n\t.clk_rate = 120000000,\n\t.swnode = &spt_spi_node,\n};\n\nstatic const struct property_entry spt_i2c_properties[] = {\n\tPROPERTY_ENTRY_U32(\"i2c-sda-hold-time-ns\", 230),\n\t{ },\n};\n\nstatic const struct software_node spt_i2c_node = {\n\t.properties = spt_i2c_properties,\n};\n\nstatic const struct intel_lpss_platform_info spt_i2c_info = {\n\t.clk_rate = 120000000,\n\t.swnode = &spt_i2c_node,\n};\n\nstatic const struct property_entry uart_properties[] = {\n\tPROPERTY_ENTRY_U32(\"reg-io-width\", 4),\n\tPROPERTY_ENTRY_U32(\"reg-shift\", 2),\n\tPROPERTY_ENTRY_BOOL(\"snps,uart-16550-compatible\"),\n\t{ },\n};\n\nstatic const struct software_node uart_node = {\n\t.properties = uart_properties,\n};\n\nstatic const struct intel_lpss_platform_info spt_uart_info = {\n\t.clk_rate = 120000000,\n\t.clk_con_id = \"baudclk\",\n\t.swnode = &uart_node,\n};\n\nstatic const struct property_entry bxt_spi_properties[] = {\n\tPROPERTY_ENTRY_U32(\"intel,spi-pxa2xx-type\", LPSS_BXT_SSP),\n\t{ }\n};\n\nstatic const struct software_node bxt_spi_node = {\n\t.properties = bxt_spi_properties,\n};\n\nstatic const struct intel_lpss_platform_info bxt_info = {\n\t.clk_rate = 100000000,\n\t.swnode = &bxt_spi_node,\n};\n\nstatic const struct property_entry bxt_i2c_properties[] = {\n\tPROPERTY_ENTRY_U32(\"i2c-sda-hold-time-ns\", 42),\n\tPROPERTY_ENTRY_U32(\"i2c-sda-falling-time-ns\", 171),\n\tPROPERTY_ENTRY_U32(\"i2c-scl-falling-time-ns\", 208),\n\t{ },\n};\n\nstatic const struct software_node bxt_i2c_node = {\n\t.properties = bxt_i2c_properties,\n};\n\nstatic const struct intel_lpss_platform_info bxt_i2c_info = {\n\t.clk_rate = 133000000,\n\t.swnode = &bxt_i2c_node,\n};\n\nstatic const struct property_entry apl_i2c_properties[] = {\n\tPROPERTY_ENTRY_U32(\"i2c-sda-hold-time-ns\", 207),\n\tPROPERTY_ENTRY_U32(\"i2c-sda-falling-time-ns\", 171),\n\tPROPERTY_ENTRY_U32(\"i2c-scl-falling-time-ns\", 208),\n\t{ },\n};\n\nstatic const struct software_node apl_i2c_node = {\n\t.properties = apl_i2c_properties,\n};\n\nstatic const struct intel_lpss_platform_info apl_i2c_info = {\n\t.clk_rate = 133000000,\n\t.swnode = &apl_i2c_node,\n};\n\nstatic const struct property_entry cnl_spi_properties[] = {\n\tPROPERTY_ENTRY_U32(\"intel,spi-pxa2xx-type\", LPSS_CNL_SSP),\n\t{ }\n};\n\nstatic const struct software_node cnl_spi_node = {\n\t.properties = cnl_spi_properties,\n};\n\nstatic const struct intel_lpss_platform_info cnl_info = {\n\t.clk_rate = 120000000,\n\t.swnode = &cnl_spi_node,\n};\n\nstatic const struct intel_lpss_platform_info cnl_i2c_info = {\n\t.clk_rate = 216000000,\n\t.swnode = &spt_i2c_node,\n};\n\nstatic const struct acpi_device_id intel_lpss_acpi_ids[] = {\n\t \n\t{ \"INT3440\", (kernel_ulong_t)&spt_info },\n\t{ \"INT3441\", (kernel_ulong_t)&spt_info },\n\t{ \"INT3442\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3443\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3444\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3445\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3446\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3447\", (kernel_ulong_t)&spt_i2c_info },\n\t{ \"INT3448\", (kernel_ulong_t)&spt_uart_info },\n\t{ \"INT3449\", (kernel_ulong_t)&spt_uart_info },\n\t{ \"INT344A\", (kernel_ulong_t)&spt_uart_info },\n\t \n\t{ \"INT34B0\", (kernel_ulong_t)&cnl_info },\n\t{ \"INT34B1\", (kernel_ulong_t)&cnl_info },\n\t{ \"INT34B2\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B3\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B4\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B5\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B6\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B7\", (kernel_ulong_t)&cnl_i2c_info },\n\t{ \"INT34B8\", (kernel_ulong_t)&spt_uart_info },\n\t{ \"INT34B9\", (kernel_ulong_t)&spt_uart_info },\n\t{ \"INT34BA\", (kernel_ulong_t)&spt_uart_info },\n\t{ \"INT34BC\", (kernel_ulong_t)&cnl_info },\n\t \n\t{ \"80860AAC\", (kernel_ulong_t)&bxt_i2c_info },\n\t{ \"80860ABC\", (kernel_ulong_t)&bxt_info },\n\t{ \"80860AC2\", (kernel_ulong_t)&bxt_info },\n\t \n\t{ \"80865AAC\", (kernel_ulong_t)&apl_i2c_info },\n\t{ \"80865ABC\", (kernel_ulong_t)&bxt_info },\n\t{ \"80865AC2\", (kernel_ulong_t)&bxt_info },\n\t{ }\n};\nMODULE_DEVICE_TABLE(acpi, intel_lpss_acpi_ids);\n\nstatic int intel_lpss_acpi_probe(struct platform_device *pdev)\n{\n\tstruct intel_lpss_platform_info *info;\n\tconst struct acpi_device_id *id;\n\tint ret;\n\n\tid = acpi_match_device(intel_lpss_acpi_ids, &pdev->dev);\n\tif (!id)\n\t\treturn -ENODEV;\n\n\tinfo = devm_kmemdup(&pdev->dev, (void *)id->driver_data, sizeof(*info),\n\t\t\t    GFP_KERNEL);\n\tif (!info)\n\t\treturn -ENOMEM;\n\n\tinfo->mem = platform_get_resource(pdev, IORESOURCE_MEM, 0);\n\tif (!info->mem)\n\t\treturn -ENODEV;\n\n\tinfo->irq = platform_get_irq(pdev, 0);\n\n\tret = intel_lpss_probe(&pdev->dev, info);\n\tif (ret)\n\t\treturn ret;\n\n\tpm_runtime_set_active(&pdev->dev);\n\tpm_runtime_enable(&pdev->dev);\n\n\treturn 0;\n}\n\nstatic int intel_lpss_acpi_remove(struct platform_device *pdev)\n{\n\tintel_lpss_remove(&pdev->dev);\n\tpm_runtime_disable(&pdev->dev);\n\n\treturn 0;\n}\n\nstatic INTEL_LPSS_PM_OPS(intel_lpss_acpi_pm_ops);\n\nstatic struct platform_driver intel_lpss_acpi_driver = {\n\t.probe = intel_lpss_acpi_probe,\n\t.remove = intel_lpss_acpi_remove,\n\t.driver = {\n\t\t.name = \"intel-lpss\",\n\t\t.acpi_match_table = intel_lpss_acpi_ids,\n\t\t.pm = &intel_lpss_acpi_pm_ops,\n\t},\n};\n\nmodule_platform_driver(intel_lpss_acpi_driver);\n\nMODULE_AUTHOR(\"Andy Shevchenko <andriy.shevchenko@linux.intel.com>\");\nMODULE_AUTHOR(\"Mika Westerberg <mika.westerberg@linux.intel.com>\");\nMODULE_DESCRIPTION(\"Intel LPSS ACPI driver\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}