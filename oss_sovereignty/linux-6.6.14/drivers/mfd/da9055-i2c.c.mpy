{
  "module_name": "da9055-i2c.c",
  "hash_id": "ba056683457595813aa66cd3f3a1fe2bb5a49dd3dbf4346bf46e76351e1ea6c3",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/da9055-i2c.c",
  "human_readable_source": "\n  \n\n#include <linux/module.h>\n#include <linux/device.h>\n#include <linux/i2c.h>\n#include <linux/err.h>\n#include <linux/of.h>\n\n#include <linux/mfd/da9055/core.h>\n\nstatic int da9055_i2c_probe(struct i2c_client *i2c)\n{\n\tstruct da9055 *da9055;\n\tint ret;\n\n\tda9055 = devm_kzalloc(&i2c->dev, sizeof(struct da9055), GFP_KERNEL);\n\tif (!da9055)\n\t\treturn -ENOMEM;\n\n\tda9055->regmap = devm_regmap_init_i2c(i2c, &da9055_regmap_config);\n\tif (IS_ERR(da9055->regmap)) {\n\t\tret = PTR_ERR(da9055->regmap);\n\t\tdev_err(&i2c->dev, \"Failed to allocate register map: %d\\n\",\n\t\t\tret);\n\t\treturn ret;\n\t}\n\n\tda9055->dev = &i2c->dev;\n\tda9055->chip_irq = i2c->irq;\n\n\ti2c_set_clientdata(i2c, da9055);\n\n\treturn da9055_device_init(da9055);\n}\n\nstatic void da9055_i2c_remove(struct i2c_client *i2c)\n{\n\tstruct da9055 *da9055 = i2c_get_clientdata(i2c);\n\n\tda9055_device_exit(da9055);\n}\n\n \nstatic const struct i2c_device_id da9055_i2c_id[] = {\n\t{\"da9055-pmic\", 0},\n\t{ }\n};\nMODULE_DEVICE_TABLE(i2c, da9055_i2c_id);\n\nstatic const struct of_device_id da9055_of_match[] = {\n\t{ .compatible = \"dlg,da9055-pmic\", },\n\t{ }\n};\n\nstatic struct i2c_driver da9055_i2c_driver = {\n\t.probe = da9055_i2c_probe,\n\t.remove = da9055_i2c_remove,\n\t.id_table = da9055_i2c_id,\n\t.driver = {\n\t\t.name = \"da9055-pmic\",\n\t\t.of_match_table = da9055_of_match,\n\t},\n};\n\nstatic int __init da9055_i2c_init(void)\n{\n\tint ret;\n\n\tret = i2c_add_driver(&da9055_i2c_driver);\n\tif (ret != 0) {\n\t\tpr_err(\"DA9055 I2C registration failed %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\nsubsys_initcall(da9055_i2c_init);\n\nstatic void __exit da9055_i2c_exit(void)\n{\n\ti2c_del_driver(&da9055_i2c_driver);\n}\nmodule_exit(da9055_i2c_exit);\n\nMODULE_AUTHOR(\"David Dajun Chen <dchen@diasemi.com>\");\nMODULE_DESCRIPTION(\"I2C driver for Dialog DA9055 PMIC\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}