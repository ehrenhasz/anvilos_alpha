{
  "module_name": "rdc321x-southbridge.c",
  "hash_id": "0b831dd44972a9c8e0fe204030929bb827199d3d43eb72a93b4b2fefa33e470e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/rdc321x-southbridge.c",
  "human_readable_source": "\n \n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/platform_device.h>\n#include <linux/pci.h>\n#include <linux/mfd/core.h>\n#include <linux/mfd/rdc321x.h>\n\nstatic struct rdc321x_wdt_pdata rdc321x_wdt_pdata;\n\nstatic const struct resource rdc321x_wdt_resource[] = {\n\t{\n\t\t.name\t= \"wdt-reg\",\n\t\t.start\t= RDC321X_WDT_CTRL,\n\t\t.end\t= RDC321X_WDT_CTRL + 0x3,\n\t\t.flags\t= IORESOURCE_IO,\n\t}\n};\n\nstatic struct rdc321x_gpio_pdata rdc321x_gpio_pdata = {\n\t.max_gpios\t= RDC321X_NUM_GPIO,\n};\n\nstatic const struct resource rdc321x_gpio_resources[] = {\n\t{\n\t\t.name\t= \"gpio-reg1\",\n\t\t.start\t= RDC321X_GPIO_CTRL_REG1,\n\t\t.end\t= RDC321X_GPIO_CTRL_REG1 + 0x7,\n\t\t.flags\t= IORESOURCE_IO,\n\t}, {\n\t\t.name\t= \"gpio-reg2\",\n\t\t.start\t= RDC321X_GPIO_CTRL_REG2,\n\t\t.end\t= RDC321X_GPIO_CTRL_REG2 + 0x7,\n\t\t.flags\t= IORESOURCE_IO,\n\t}\n};\n\nstatic const struct mfd_cell rdc321x_sb_cells[] = {\n\t{\n\t\t.name\t\t= \"rdc321x-wdt\",\n\t\t.resources\t= rdc321x_wdt_resource,\n\t\t.num_resources\t= ARRAY_SIZE(rdc321x_wdt_resource),\n\t\t.platform_data\t= &rdc321x_wdt_pdata,\n\t\t.pdata_size\t= sizeof(rdc321x_wdt_pdata),\n\t}, {\n\t\t.name\t\t= \"rdc321x-gpio\",\n\t\t.resources\t= rdc321x_gpio_resources,\n\t\t.num_resources\t= ARRAY_SIZE(rdc321x_gpio_resources),\n\t\t.platform_data\t= &rdc321x_gpio_pdata,\n\t\t.pdata_size\t= sizeof(rdc321x_gpio_pdata),\n\t},\n};\n\nstatic int rdc321x_sb_probe(struct pci_dev *pdev,\n\t\t\t\t\tconst struct pci_device_id *ent)\n{\n\tint err;\n\n\terr = pci_enable_device(pdev);\n\tif (err) {\n\t\tdev_err(&pdev->dev, \"failed to enable device\\n\");\n\t\treturn err;\n\t}\n\n\trdc321x_gpio_pdata.sb_pdev = pdev;\n\trdc321x_wdt_pdata.sb_pdev = pdev;\n\n\treturn devm_mfd_add_devices(&pdev->dev, -1,\n\t\t\t\t    rdc321x_sb_cells,\n\t\t\t\t    ARRAY_SIZE(rdc321x_sb_cells),\n\t\t\t\t    NULL, 0, NULL);\n}\n\nstatic const struct pci_device_id rdc321x_sb_table[] = {\n\t{ PCI_DEVICE(PCI_VENDOR_ID_RDC, PCI_DEVICE_ID_RDC_R6030) },\n\t{}\n};\nMODULE_DEVICE_TABLE(pci, rdc321x_sb_table);\n\nstatic struct pci_driver rdc321x_sb_driver = {\n\t.name\t\t= \"RDC321x Southbridge\",\n\t.id_table\t= rdc321x_sb_table,\n\t.probe\t\t= rdc321x_sb_probe,\n};\n\nmodule_pci_driver(rdc321x_sb_driver);\n\nMODULE_AUTHOR(\"Florian Fainelli <florian@openwrt.org>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_DESCRIPTION(\"RDC R-321x MFD southbridge driver\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}