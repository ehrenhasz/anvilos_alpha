{
  "module_name": "da9063-i2c.c",
  "hash_id": "6f99b0e7aa5debc829f3755bd0d1dc580fdd9042d087888454d73e25536e2cd2",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/da9063-i2c.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/i2c.h>\n#include <linux/regmap.h>\n#include <linux/delay.h>\n#include <linux/slab.h>\n#include <linux/err.h>\n\n#include <linux/mfd/core.h>\n#include <linux/mfd/da9063/core.h>\n#include <linux/mfd/da9063/registers.h>\n\n#include <linux/of.h>\n#include <linux/regulator/of_regulator.h>\n\n \n\n#define DA9063_REG_PAGE_SIZE\t\t0x100\n#define DA9063_REG_PAGED_ADDR_MASK\t0xFF\n\nenum da9063_page_sel_buf_fmt {\n\tDA9063_PAGE_SEL_BUF_PAGE_REG = 0,\n\tDA9063_PAGE_SEL_BUF_PAGE_VAL,\n\tDA9063_PAGE_SEL_BUF_SIZE,\n};\n\nenum da9063_paged_read_msgs {\n\tDA9063_PAGED_READ_MSG_PAGE_SEL = 0,\n\tDA9063_PAGED_READ_MSG_REG_SEL,\n\tDA9063_PAGED_READ_MSG_DATA,\n\tDA9063_PAGED_READ_MSG_CNT,\n};\n\nstatic int da9063_i2c_blockreg_read(struct i2c_client *client, u16 addr,\n\t\t\t\t    u8 *buf, int count)\n{\n\tstruct i2c_msg xfer[DA9063_PAGED_READ_MSG_CNT];\n\tu8 page_sel_buf[DA9063_PAGE_SEL_BUF_SIZE];\n\tu8 page_num, paged_addr;\n\tint ret;\n\n\t \n\tpage_num = (addr / DA9063_REG_PAGE_SIZE);\n\tif (page_num > 1) {\n\t\tdev_err(&client->dev, \"Invalid register address provided\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tpaged_addr = (addr % DA9063_REG_PAGE_SIZE) & DA9063_REG_PAGED_ADDR_MASK;\n\tpage_sel_buf[DA9063_PAGE_SEL_BUF_PAGE_REG] = DA9063_REG_PAGE_CON;\n\tpage_sel_buf[DA9063_PAGE_SEL_BUF_PAGE_VAL] =\n\t\t(page_num << DA9063_I2C_PAGE_SEL_SHIFT) & DA9063_REG_PAGE_MASK;\n\n\t \n\txfer[DA9063_PAGED_READ_MSG_PAGE_SEL].addr = client->addr;\n\txfer[DA9063_PAGED_READ_MSG_PAGE_SEL].flags = 0;\n\txfer[DA9063_PAGED_READ_MSG_PAGE_SEL].len = DA9063_PAGE_SEL_BUF_SIZE;\n\txfer[DA9063_PAGED_READ_MSG_PAGE_SEL].buf = page_sel_buf;\n\n\t \n\txfer[DA9063_PAGED_READ_MSG_REG_SEL].addr = client->addr;\n\txfer[DA9063_PAGED_READ_MSG_REG_SEL].flags = 0;\n\txfer[DA9063_PAGED_READ_MSG_REG_SEL].len = sizeof(paged_addr);\n\txfer[DA9063_PAGED_READ_MSG_REG_SEL].buf = &paged_addr;\n\n\t \n\txfer[DA9063_PAGED_READ_MSG_DATA].addr = client->addr;\n\txfer[DA9063_PAGED_READ_MSG_DATA].flags = I2C_M_RD;\n\txfer[DA9063_PAGED_READ_MSG_DATA].len = count;\n\txfer[DA9063_PAGED_READ_MSG_DATA].buf = buf;\n\n\tret = i2c_transfer(client->adapter, xfer, DA9063_PAGED_READ_MSG_CNT);\n\tif (ret < 0) {\n\t\tdev_err(&client->dev, \"Paged block read failed: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tif (ret != DA9063_PAGED_READ_MSG_CNT) {\n\t\tdev_err(&client->dev, \"Paged block read failed to complete\\n\");\n\t\treturn -EIO;\n\t}\n\n\treturn 0;\n}\n\nenum {\n\tDA9063_DEV_ID_REG = 0,\n\tDA9063_VAR_ID_REG,\n\tDA9063_CHIP_ID_REGS,\n};\n\nstatic int da9063_get_device_type(struct i2c_client *i2c, struct da9063 *da9063)\n{\n\tu8 buf[DA9063_CHIP_ID_REGS];\n\tint ret;\n\n\tret = da9063_i2c_blockreg_read(i2c, DA9063_REG_DEVICE_ID, buf,\n\t\t\t\t       DA9063_CHIP_ID_REGS);\n\tif (ret)\n\t\treturn ret;\n\n\tif (buf[DA9063_DEV_ID_REG] != PMIC_CHIP_ID_DA9063) {\n\t\tdev_err(da9063->dev,\n\t\t\t\"Invalid chip device ID: 0x%02x\\n\",\n\t\t\tbuf[DA9063_DEV_ID_REG]);\n\t\treturn -ENODEV;\n\t}\n\n\tdev_info(da9063->dev,\n\t\t \"Device detected (chip-ID: 0x%02X, var-ID: 0x%02X)\\n\",\n\t\t buf[DA9063_DEV_ID_REG], buf[DA9063_VAR_ID_REG]);\n\n\tda9063->variant_code =\n\t\t(buf[DA9063_VAR_ID_REG] & DA9063_VARIANT_ID_MRC_MASK)\n\t\t>> DA9063_VARIANT_ID_MRC_SHIFT;\n\n\treturn 0;\n}\n\n \n\nstatic const struct regmap_range da9063_ad_readable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_AD_REG_SECOND_D),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_T_OFFSET, DA9063_AD_REG_GP_ID_19),\n\tregmap_reg_range(DA9063_REG_DEVICE_ID, DA9063_REG_VARIANT_ID),\n};\n\nstatic const struct regmap_range da9063_ad_writeable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_PAGE_CON),\n\tregmap_reg_range(DA9063_REG_FAULT_LOG, DA9063_REG_VSYS_MON),\n\tregmap_reg_range(DA9063_REG_COUNT_S, DA9063_AD_REG_ALARM_Y),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_CONFIG_I, DA9063_AD_REG_MON_REG_4),\n\tregmap_reg_range(DA9063_AD_REG_GP_ID_0, DA9063_AD_REG_GP_ID_19),\n};\n\nstatic const struct regmap_range da9063_ad_volatile_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_EVENT_D),\n\tregmap_reg_range(DA9063_REG_CONTROL_A, DA9063_REG_CONTROL_B),\n\tregmap_reg_range(DA9063_REG_CONTROL_E, DA9063_REG_CONTROL_F),\n\tregmap_reg_range(DA9063_REG_BCORE2_CONT, DA9063_REG_LDO11_CONT),\n\tregmap_reg_range(DA9063_REG_DVC_1, DA9063_REG_ADC_MAN),\n\tregmap_reg_range(DA9063_REG_ADC_RES_L, DA9063_AD_REG_SECOND_D),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_SEQ),\n\tregmap_reg_range(DA9063_REG_EN_32K, DA9063_REG_EN_32K),\n\tregmap_reg_range(DA9063_AD_REG_MON_REG_5, DA9063_AD_REG_MON_REG_6),\n};\n\nstatic const struct regmap_access_table da9063_ad_readable_table = {\n\t.yes_ranges = da9063_ad_readable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_ad_readable_ranges),\n};\n\nstatic const struct regmap_access_table da9063_ad_writeable_table = {\n\t.yes_ranges = da9063_ad_writeable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_ad_writeable_ranges),\n};\n\nstatic const struct regmap_access_table da9063_ad_volatile_table = {\n\t.yes_ranges = da9063_ad_volatile_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_ad_volatile_ranges),\n};\n\nstatic const struct regmap_range da9063_bb_readable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_BB_REG_SECOND_D),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_T_OFFSET, DA9063_BB_REG_GP_ID_19),\n\tregmap_reg_range(DA9063_REG_DEVICE_ID, DA9063_REG_VARIANT_ID),\n};\n\nstatic const struct regmap_range da9063_bb_writeable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_PAGE_CON),\n\tregmap_reg_range(DA9063_REG_FAULT_LOG, DA9063_REG_VSYS_MON),\n\tregmap_reg_range(DA9063_REG_COUNT_S, DA9063_BB_REG_ALARM_Y),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_CONFIG_I, DA9063_BB_REG_MON_REG_4),\n\tregmap_reg_range(DA9063_BB_REG_GP_ID_0, DA9063_BB_REG_GP_ID_19),\n};\n\nstatic const struct regmap_range da9063_bb_da_volatile_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_EVENT_D),\n\tregmap_reg_range(DA9063_REG_CONTROL_A, DA9063_REG_CONTROL_B),\n\tregmap_reg_range(DA9063_REG_CONTROL_E, DA9063_REG_CONTROL_F),\n\tregmap_reg_range(DA9063_REG_BCORE2_CONT, DA9063_REG_LDO11_CONT),\n\tregmap_reg_range(DA9063_REG_DVC_1, DA9063_REG_ADC_MAN),\n\tregmap_reg_range(DA9063_REG_ADC_RES_L, DA9063_BB_REG_SECOND_D),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_SEQ),\n\tregmap_reg_range(DA9063_REG_EN_32K, DA9063_REG_EN_32K),\n\tregmap_reg_range(DA9063_BB_REG_MON_REG_5, DA9063_BB_REG_MON_REG_6),\n};\n\nstatic const struct regmap_access_table da9063_bb_readable_table = {\n\t.yes_ranges = da9063_bb_readable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_bb_readable_ranges),\n};\n\nstatic const struct regmap_access_table da9063_bb_writeable_table = {\n\t.yes_ranges = da9063_bb_writeable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_bb_writeable_ranges),\n};\n\nstatic const struct regmap_access_table da9063_bb_da_volatile_table = {\n\t.yes_ranges = da9063_bb_da_volatile_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_bb_da_volatile_ranges),\n};\n\nstatic const struct regmap_range da9063l_bb_readable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_MON_A10_RES),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_T_OFFSET, DA9063_BB_REG_GP_ID_19),\n\tregmap_reg_range(DA9063_REG_DEVICE_ID, DA9063_REG_VARIANT_ID),\n};\n\nstatic const struct regmap_range da9063l_bb_writeable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_PAGE_CON),\n\tregmap_reg_range(DA9063_REG_FAULT_LOG, DA9063_REG_VSYS_MON),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_CONFIG_I, DA9063_BB_REG_MON_REG_4),\n\tregmap_reg_range(DA9063_BB_REG_GP_ID_0, DA9063_BB_REG_GP_ID_19),\n};\n\nstatic const struct regmap_range da9063l_bb_da_volatile_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_EVENT_D),\n\tregmap_reg_range(DA9063_REG_CONTROL_A, DA9063_REG_CONTROL_B),\n\tregmap_reg_range(DA9063_REG_CONTROL_E, DA9063_REG_CONTROL_F),\n\tregmap_reg_range(DA9063_REG_BCORE2_CONT, DA9063_REG_LDO11_CONT),\n\tregmap_reg_range(DA9063_REG_DVC_1, DA9063_REG_ADC_MAN),\n\tregmap_reg_range(DA9063_REG_ADC_RES_L, DA9063_REG_MON_A10_RES),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_SEQ),\n\tregmap_reg_range(DA9063_REG_EN_32K, DA9063_REG_EN_32K),\n\tregmap_reg_range(DA9063_BB_REG_MON_REG_5, DA9063_BB_REG_MON_REG_6),\n};\n\nstatic const struct regmap_access_table da9063l_bb_readable_table = {\n\t.yes_ranges = da9063l_bb_readable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063l_bb_readable_ranges),\n};\n\nstatic const struct regmap_access_table da9063l_bb_writeable_table = {\n\t.yes_ranges = da9063l_bb_writeable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063l_bb_writeable_ranges),\n};\n\nstatic const struct regmap_access_table da9063l_bb_da_volatile_table = {\n\t.yes_ranges = da9063l_bb_da_volatile_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063l_bb_da_volatile_ranges),\n};\n\nstatic const struct regmap_range da9063_da_readable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_BB_REG_SECOND_D),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_T_OFFSET, DA9063_BB_REG_GP_ID_11),\n\tregmap_reg_range(DA9063_REG_DEVICE_ID, DA9063_REG_VARIANT_ID),\n};\n\nstatic const struct regmap_range da9063_da_writeable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_PAGE_CON),\n\tregmap_reg_range(DA9063_REG_FAULT_LOG, DA9063_REG_VSYS_MON),\n\tregmap_reg_range(DA9063_REG_COUNT_S, DA9063_BB_REG_ALARM_Y),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_CONFIG_I, DA9063_BB_REG_MON_REG_4),\n\tregmap_reg_range(DA9063_BB_REG_GP_ID_0, DA9063_BB_REG_GP_ID_11),\n};\n\nstatic const struct regmap_access_table da9063_da_readable_table = {\n\t.yes_ranges = da9063_da_readable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_da_readable_ranges),\n};\n\nstatic const struct regmap_access_table da9063_da_writeable_table = {\n\t.yes_ranges = da9063_da_writeable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063_da_writeable_ranges),\n};\n\nstatic const struct regmap_range da9063l_da_readable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_MON_A10_RES),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_T_OFFSET, DA9063_BB_REG_GP_ID_11),\n\tregmap_reg_range(DA9063_REG_DEVICE_ID, DA9063_REG_VARIANT_ID),\n};\n\nstatic const struct regmap_range da9063l_da_writeable_ranges[] = {\n\tregmap_reg_range(DA9063_REG_PAGE_CON, DA9063_REG_PAGE_CON),\n\tregmap_reg_range(DA9063_REG_FAULT_LOG, DA9063_REG_VSYS_MON),\n\tregmap_reg_range(DA9063_REG_SEQ, DA9063_REG_ID_32_31),\n\tregmap_reg_range(DA9063_REG_SEQ_A, DA9063_REG_AUTO3_LOW),\n\tregmap_reg_range(DA9063_REG_CONFIG_I, DA9063_BB_REG_MON_REG_4),\n\tregmap_reg_range(DA9063_BB_REG_GP_ID_0, DA9063_BB_REG_GP_ID_11),\n};\n\nstatic const struct regmap_access_table da9063l_da_readable_table = {\n\t.yes_ranges = da9063l_da_readable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063l_da_readable_ranges),\n};\n\nstatic const struct regmap_access_table da9063l_da_writeable_table = {\n\t.yes_ranges = da9063l_da_writeable_ranges,\n\t.n_yes_ranges = ARRAY_SIZE(da9063l_da_writeable_ranges),\n};\n\nstatic const struct regmap_range_cfg da9063_range_cfg[] = {\n\t{\n\t\t.range_min = DA9063_REG_PAGE_CON,\n\t\t.range_max = DA9063_REG_CONFIG_ID,\n\t\t.selector_reg = DA9063_REG_PAGE_CON,\n\t\t.selector_mask = 1 << DA9063_I2C_PAGE_SEL_SHIFT,\n\t\t.selector_shift = DA9063_I2C_PAGE_SEL_SHIFT,\n\t\t.window_start = 0,\n\t\t.window_len = 256,\n\t}\n};\n\nstatic struct regmap_config da9063_regmap_config = {\n\t.reg_bits = 8,\n\t.val_bits = 8,\n\t.ranges = da9063_range_cfg,\n\t.num_ranges = ARRAY_SIZE(da9063_range_cfg),\n\t.max_register = DA9063_REG_CONFIG_ID,\n\n\t.cache_type = REGCACHE_RBTREE,\n};\n\nstatic const struct of_device_id da9063_dt_ids[] = {\n\t{ .compatible = \"dlg,da9063\", },\n\t{ .compatible = \"dlg,da9063l\", },\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, da9063_dt_ids);\nstatic int da9063_i2c_probe(struct i2c_client *i2c)\n{\n\tconst struct i2c_device_id *id = i2c_client_get_device_id(i2c);\n\tstruct da9063 *da9063;\n\tint ret;\n\n\tda9063 = devm_kzalloc(&i2c->dev, sizeof(struct da9063), GFP_KERNEL);\n\tif (da9063 == NULL)\n\t\treturn -ENOMEM;\n\n\ti2c_set_clientdata(i2c, da9063);\n\tda9063->dev = &i2c->dev;\n\tda9063->chip_irq = i2c->irq;\n\tda9063->type = id->driver_data;\n\n\tret = da9063_get_device_type(i2c, da9063);\n\tif (ret)\n\t\treturn ret;\n\n\tswitch (da9063->type) {\n\tcase PMIC_TYPE_DA9063:\n\t\tswitch (da9063->variant_code) {\n\t\tcase PMIC_DA9063_AD:\n\t\t\tda9063_regmap_config.rd_table =\n\t\t\t\t&da9063_ad_readable_table;\n\t\t\tda9063_regmap_config.wr_table =\n\t\t\t\t&da9063_ad_writeable_table;\n\t\t\tda9063_regmap_config.volatile_table =\n\t\t\t\t&da9063_ad_volatile_table;\n\t\t\tbreak;\n\t\tcase PMIC_DA9063_BB:\n\t\tcase PMIC_DA9063_CA:\n\t\t\tda9063_regmap_config.rd_table =\n\t\t\t\t&da9063_bb_readable_table;\n\t\t\tda9063_regmap_config.wr_table =\n\t\t\t\t&da9063_bb_writeable_table;\n\t\t\tda9063_regmap_config.volatile_table =\n\t\t\t\t&da9063_bb_da_volatile_table;\n\t\t\tbreak;\n\t\tcase PMIC_DA9063_DA:\n\t\tcase PMIC_DA9063_EA:\n\t\t\tda9063_regmap_config.rd_table =\n\t\t\t\t&da9063_da_readable_table;\n\t\t\tda9063_regmap_config.wr_table =\n\t\t\t\t&da9063_da_writeable_table;\n\t\t\tda9063_regmap_config.volatile_table =\n\t\t\t\t&da9063_bb_da_volatile_table;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(da9063->dev,\n\t\t\t\t\"Chip variant not supported for DA9063\\n\");\n\t\t\treturn -ENODEV;\n\t\t}\n\t\tbreak;\n\tcase PMIC_TYPE_DA9063L:\n\t\tswitch (da9063->variant_code) {\n\t\tcase PMIC_DA9063_BB:\n\t\tcase PMIC_DA9063_CA:\n\t\t\tda9063_regmap_config.rd_table =\n\t\t\t\t&da9063l_bb_readable_table;\n\t\t\tda9063_regmap_config.wr_table =\n\t\t\t\t&da9063l_bb_writeable_table;\n\t\t\tda9063_regmap_config.volatile_table =\n\t\t\t\t&da9063l_bb_da_volatile_table;\n\t\t\tbreak;\n\t\tcase PMIC_DA9063_DA:\n\t\tcase PMIC_DA9063_EA:\n\t\t\tda9063_regmap_config.rd_table =\n\t\t\t\t&da9063l_da_readable_table;\n\t\t\tda9063_regmap_config.wr_table =\n\t\t\t\t&da9063l_da_writeable_table;\n\t\t\tda9063_regmap_config.volatile_table =\n\t\t\t\t&da9063l_bb_da_volatile_table;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(da9063->dev,\n\t\t\t\t\"Chip variant not supported for DA9063L\\n\");\n\t\t\treturn -ENODEV;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\tdev_err(da9063->dev, \"Chip type not supported\\n\");\n\t\treturn -ENODEV;\n\t}\n\n\tda9063->regmap = devm_regmap_init_i2c(i2c, &da9063_regmap_config);\n\tif (IS_ERR(da9063->regmap)) {\n\t\tret = PTR_ERR(da9063->regmap);\n\t\tdev_err(da9063->dev, \"Failed to allocate register map: %d\\n\",\n\t\t\tret);\n\t\treturn ret;\n\t}\n\n\t \n\tif (i2c_check_functionality(i2c->adapter, I2C_FUNC_I2C)) {\n\t\tret = regmap_clear_bits(da9063->regmap, DA9063_REG_CONFIG_J,\n\t\t\t\t\tDA9063_TWOWIRE_TO);\n\t\tif (ret < 0) {\n\t\t\tdev_err(da9063->dev, \"Failed to set Two-Wire Bus Mode.\\n\");\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\treturn da9063_device_init(da9063, i2c->irq);\n}\n\nstatic const struct i2c_device_id da9063_i2c_id[] = {\n\t{ \"da9063\", PMIC_TYPE_DA9063 },\n\t{ \"da9063l\", PMIC_TYPE_DA9063L },\n\t{},\n};\nMODULE_DEVICE_TABLE(i2c, da9063_i2c_id);\n\nstatic struct i2c_driver da9063_i2c_driver = {\n\t.driver = {\n\t\t.name = \"da9063\",\n\t\t.of_match_table = da9063_dt_ids,\n\t},\n\t.probe = da9063_i2c_probe,\n\t.id_table = da9063_i2c_id,\n};\n\nmodule_i2c_driver(da9063_i2c_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}