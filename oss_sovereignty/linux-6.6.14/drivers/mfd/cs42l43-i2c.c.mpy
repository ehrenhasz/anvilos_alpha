{
  "module_name": "cs42l43-i2c.c",
  "hash_id": "13580e8fff77abca383016007b333aa1ed9150a8d3fd2abe30dbedebebe07c18",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/cs42l43-i2c.c",
  "human_readable_source": "\n \n\n#include <linux/err.h>\n#include <linux/errno.h>\n#include <linux/i2c.h>\n#include <linux/mfd/cs42l43-regs.h>\n#include <linux/module.h>\n\n#include \"cs42l43.h\"\n\nstatic const struct regmap_config cs42l43_i2c_regmap = {\n\t.reg_bits\t\t= 32,\n\t.reg_stride\t\t= 4,\n\t.val_bits\t\t= 32,\n\t.reg_format_endian\t= REGMAP_ENDIAN_BIG,\n\t.val_format_endian\t= REGMAP_ENDIAN_BIG,\n\n\t.max_register\t\t= CS42L43_MCU_RAM_MAX,\n\t.readable_reg\t\t= cs42l43_readable_register,\n\t.volatile_reg\t\t= cs42l43_volatile_register,\n\t.precious_reg\t\t= cs42l43_precious_register,\n\n\t.cache_type\t\t= REGCACHE_MAPLE,\n\t.reg_defaults\t\t= cs42l43_reg_default,\n\t.num_reg_defaults\t= ARRAY_SIZE(cs42l43_reg_default),\n};\n\nstatic int cs42l43_i2c_probe(struct i2c_client *i2c)\n{\n\tstruct cs42l43 *cs42l43;\n\tint ret;\n\n\tcs42l43 = devm_kzalloc(&i2c->dev, sizeof(*cs42l43), GFP_KERNEL);\n\tif (!cs42l43)\n\t\treturn -ENOMEM;\n\n\tcs42l43->dev = &i2c->dev;\n\tcs42l43->irq = i2c->irq;\n\t \n\tcs42l43->attached = true;\n\n\tcs42l43->regmap = devm_regmap_init_i2c(i2c, &cs42l43_i2c_regmap);\n\tif (IS_ERR(cs42l43->regmap)) {\n\t\tret = PTR_ERR(cs42l43->regmap);\n\t\tdev_err(cs42l43->dev, \"Failed to allocate regmap: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn cs42l43_dev_probe(cs42l43);\n}\n\nstatic void cs42l43_i2c_remove(struct i2c_client *i2c)\n{\n\tstruct cs42l43 *cs42l43 = dev_get_drvdata(&i2c->dev);\n\n\tcs42l43_dev_remove(cs42l43);\n}\n\n#if IS_ENABLED(CONFIG_OF)\nstatic const struct of_device_id cs42l43_of_match[] = {\n\t{ .compatible = \"cirrus,cs42l43\", },\n\t{}\n};\nMODULE_DEVICE_TABLE(of, cs42l43_of_match);\n#endif\n\n#if IS_ENABLED(CONFIG_ACPI)\nstatic const struct acpi_device_id cs42l43_acpi_match[] = {\n\t{ \"CSC4243\", 0 },\n\t{}\n};\nMODULE_DEVICE_TABLE(acpi, cs42l43_acpi_match);\n#endif\n\nstatic struct i2c_driver cs42l43_i2c_driver = {\n\t.driver = {\n\t\t.name\t\t\t= \"cs42l43\",\n\t\t.pm\t\t\t= pm_ptr(&cs42l43_pm_ops),\n\t\t.of_match_table\t\t= of_match_ptr(cs42l43_of_match),\n\t\t.acpi_match_table\t= ACPI_PTR(cs42l43_acpi_match),\n\t},\n\n\t.probe\t\t= cs42l43_i2c_probe,\n\t.remove\t\t= cs42l43_i2c_remove,\n};\nmodule_i2c_driver(cs42l43_i2c_driver);\n\nMODULE_IMPORT_NS(MFD_CS42L43);\n\nMODULE_DESCRIPTION(\"CS42L43 I2C Driver\");\nMODULE_AUTHOR(\"Charles Keepax <ckeepax@opensource.cirrus.com>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}