{
  "module_name": "axp20x-rsb.c",
  "hash_id": "441cbaebeaf58a8c0de79b5604443bd8b6b906902115a1d010c6f70a31d2d7aa",
  "original_prompt": "Ingested from linux-6.6.14/drivers/mfd/axp20x-rsb.c",
  "human_readable_source": "\n \n\n#include <linux/acpi.h>\n#include <linux/err.h>\n#include <linux/mfd/axp20x.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/regmap.h>\n#include <linux/slab.h>\n#include <linux/sunxi-rsb.h>\n\nstatic int axp20x_rsb_probe(struct sunxi_rsb_device *rdev)\n{\n\tstruct axp20x_dev *axp20x;\n\tint ret;\n\n\taxp20x = devm_kzalloc(&rdev->dev, sizeof(*axp20x), GFP_KERNEL);\n\tif (!axp20x)\n\t\treturn -ENOMEM;\n\n\taxp20x->dev = &rdev->dev;\n\taxp20x->irq = rdev->irq;\n\tdev_set_drvdata(&rdev->dev, axp20x);\n\n\tret = axp20x_match_device(axp20x);\n\tif (ret)\n\t\treturn ret;\n\n\taxp20x->regmap = devm_regmap_init_sunxi_rsb(rdev, axp20x->regmap_cfg);\n\tif (IS_ERR(axp20x->regmap)) {\n\t\tret = PTR_ERR(axp20x->regmap);\n\t\tdev_err(&rdev->dev, \"regmap init failed: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn axp20x_device_probe(axp20x);\n}\n\nstatic void axp20x_rsb_remove(struct sunxi_rsb_device *rdev)\n{\n\tstruct axp20x_dev *axp20x = sunxi_rsb_device_get_drvdata(rdev);\n\n\taxp20x_device_remove(axp20x);\n}\n\nstatic const struct of_device_id axp20x_rsb_of_match[] = {\n\t{ .compatible = \"x-powers,axp223\", .data = (void *)AXP223_ID },\n\t{ .compatible = \"x-powers,axp803\", .data = (void *)AXP803_ID },\n\t{ .compatible = \"x-powers,axp806\", .data = (void *)AXP806_ID },\n\t{ .compatible = \"x-powers,axp809\", .data = (void *)AXP809_ID },\n\t{ .compatible = \"x-powers,axp813\", .data = (void *)AXP813_ID },\n\t{ },\n};\nMODULE_DEVICE_TABLE(of, axp20x_rsb_of_match);\n\nstatic struct sunxi_rsb_driver axp20x_rsb_driver = {\n\t.driver = {\n\t\t.name\t= \"axp20x-rsb\",\n\t\t.of_match_table\t= of_match_ptr(axp20x_rsb_of_match),\n\t},\n\t.probe\t= axp20x_rsb_probe,\n\t.remove\t= axp20x_rsb_remove,\n};\nmodule_sunxi_rsb_driver(axp20x_rsb_driver);\n\nMODULE_DESCRIPTION(\"PMIC MFD sunXi RSB driver for AXP20X\");\nMODULE_AUTHOR(\"Chen-Yu Tsai <wens@csie.org>\");\nMODULE_LICENSE(\"GPL v2\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}