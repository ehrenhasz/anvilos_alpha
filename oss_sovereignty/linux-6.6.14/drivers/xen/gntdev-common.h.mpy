{
  "module_name": "gntdev-common.h",
  "hash_id": "5f54d678e32ed3f298055781879c0f38a169eda90f016d340c9c17773b81cea9",
  "original_prompt": "Ingested from linux-6.6.14/drivers/xen/gntdev-common.h",
  "human_readable_source": " \n\n \n\n#ifndef _GNTDEV_COMMON_H\n#define _GNTDEV_COMMON_H\n\n#include <linux/mm.h>\n#include <linux/mman.h>\n#include <linux/mmu_notifier.h>\n#include <linux/types.h>\n#include <xen/interface/event_channel.h>\n#include <xen/grant_table.h>\n\nstruct gntdev_dmabuf_priv;\n\nstruct gntdev_priv {\n\t \n\tstruct list_head maps;\n\t \n\tstruct mutex lock;\n\n#ifdef CONFIG_XEN_GRANT_DMA_ALLOC\n\t \n\tstruct device *dma_dev;\n#endif\n\n#ifdef CONFIG_XEN_GNTDEV_DMABUF\n\tstruct gntdev_dmabuf_priv *dmabuf_priv;\n#endif\n};\n\nstruct gntdev_unmap_notify {\n\tint flags;\n\t \n\tint addr;\n\tevtchn_port_t event;\n};\n\nstruct gntdev_grant_map {\n\tatomic_t in_use;\n\tstruct mmu_interval_notifier notifier;\n\tbool notifier_init;\n\tstruct list_head next;\n\tint index;\n\tint count;\n\tint flags;\n\trefcount_t users;\n\tstruct gntdev_unmap_notify notify;\n\tstruct ioctl_gntdev_grant_ref *grants;\n\tstruct gnttab_map_grant_ref   *map_ops;\n\tstruct gnttab_unmap_grant_ref *unmap_ops;\n\tstruct gnttab_map_grant_ref   *kmap_ops;\n\tstruct gnttab_unmap_grant_ref *kunmap_ops;\n\tbool *being_removed;\n\tstruct page **pages;\n\tunsigned long pages_vm_start;\n\n#ifdef CONFIG_XEN_GRANT_DMA_ALLOC\n\t \n\n\tstruct device *dma_dev;\n\t \n\tint dma_flags;\n\tvoid *dma_vaddr;\n\tdma_addr_t dma_bus_addr;\n\t \n\txen_pfn_t *frames;\n#endif\n\n\t \n\tatomic_t live_grants;\n\t \n\tstruct gntab_unmap_queue_data unmap_data;\n};\n\nstruct gntdev_grant_map *gntdev_alloc_map(struct gntdev_priv *priv, int count,\n\t\t\t\t\t  int dma_flags);\n\nvoid gntdev_add_map(struct gntdev_priv *priv, struct gntdev_grant_map *add);\n\nvoid gntdev_put_map(struct gntdev_priv *priv, struct gntdev_grant_map *map);\n\nbool gntdev_test_page_count(unsigned int count);\n\nint gntdev_map_grant_pages(struct gntdev_grant_map *map);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}