{
  "module_name": "conf_space.h",
  "hash_id": "bdfa35b79bcfb4752a9c7ec88d524af1ca94ba4a91f2e136d988a2901b3b910e",
  "original_prompt": "Ingested from linux-6.6.14/drivers/xen/xen-pciback/conf_space.h",
  "human_readable_source": " \n \n\n#ifndef __XEN_PCIBACK_CONF_SPACE_H__\n#define __XEN_PCIBACK_CONF_SPACE_H__\n\n#include <linux/list.h>\n#include <linux/err.h>\n\n \ntypedef void *(*conf_field_init) (struct pci_dev *dev, int offset);\ntypedef void (*conf_field_reset) (struct pci_dev *dev, int offset, void *data);\ntypedef void (*conf_field_free) (struct pci_dev *dev, int offset, void *data);\n\ntypedef int (*conf_dword_write) (struct pci_dev *dev, int offset, u32 value,\n\t\t\t\t void *data);\ntypedef int (*conf_word_write) (struct pci_dev *dev, int offset, u16 value,\n\t\t\t\tvoid *data);\ntypedef int (*conf_byte_write) (struct pci_dev *dev, int offset, u8 value,\n\t\t\t\tvoid *data);\ntypedef int (*conf_dword_read) (struct pci_dev *dev, int offset, u32 *value,\n\t\t\t\tvoid *data);\ntypedef int (*conf_word_read) (struct pci_dev *dev, int offset, u16 *value,\n\t\t\t       void *data);\ntypedef int (*conf_byte_read) (struct pci_dev *dev, int offset, u8 *value,\n\t\t\t       void *data);\n\n \nstruct config_field {\n\tunsigned int offset;\n\tunsigned int size;\n\tunsigned int mask;\n\tconf_field_init init;\n\tconf_field_reset reset;\n\tconf_field_free release;\n\tvoid (*clean) (struct config_field *field);\n\tunion {\n\t\tstruct {\n\t\t\tconf_dword_write write;\n\t\t\tconf_dword_read read;\n\t\t} dw;\n\t\tstruct {\n\t\t\tconf_word_write write;\n\t\t\tconf_word_read read;\n\t\t} w;\n\t\tstruct {\n\t\t\tconf_byte_write write;\n\t\t\tconf_byte_read read;\n\t\t} b;\n\t} u;\n\tstruct list_head list;\n};\n\nstruct config_field_entry {\n\tstruct list_head list;\n\tconst struct config_field *field;\n\tunsigned int base_offset;\n\tvoid *data;\n};\n\n#define INTERRUPT_TYPE_NONE (0)\n#define INTERRUPT_TYPE_INTX (1<<0)\n#define INTERRUPT_TYPE_MSI  (1<<1)\n#define INTERRUPT_TYPE_MSIX (1<<2)\n\nextern bool xen_pcibk_permissive;\n\n#define OFFSET(cfg_entry) ((cfg_entry)->base_offset+(cfg_entry)->field->offset)\n\n \nint xen_pcibk_config_add_field_offset(struct pci_dev *dev,\n\t\t\t\t    const struct config_field *field,\n\t\t\t\t    unsigned int offset);\n\nstatic inline int xen_pcibk_config_add_field(struct pci_dev *dev,\n\t\t\t\t\t   const struct config_field *field)\n{\n\treturn xen_pcibk_config_add_field_offset(dev, field, 0);\n}\n\nstatic inline int xen_pcibk_config_add_fields(struct pci_dev *dev,\n\t\t\t\t\t    const struct config_field *field)\n{\n\tint i, err = 0;\n\tfor (i = 0; field[i].size != 0; i++) {\n\t\terr = xen_pcibk_config_add_field(dev, &field[i]);\n\t\tif (err)\n\t\t\tbreak;\n\t}\n\treturn err;\n}\n\nstatic inline int xen_pcibk_config_add_fields_offset(struct pci_dev *dev,\n\t\t\t\t\tconst struct config_field *field,\n\t\t\t\t\tunsigned int offset)\n{\n\tint i, err = 0;\n\tfor (i = 0; field[i].size != 0; i++) {\n\t\terr = xen_pcibk_config_add_field_offset(dev, &field[i], offset);\n\t\tif (err)\n\t\t\tbreak;\n\t}\n\treturn err;\n}\n\n \nint xen_pcibk_read_config_byte(struct pci_dev *dev, int offset, u8 *value,\n\t\t\t       void *data);\nint xen_pcibk_read_config_word(struct pci_dev *dev, int offset, u16 *value,\n\t\t\t       void *data);\nint xen_pcibk_read_config_dword(struct pci_dev *dev, int offset, u32 *value,\n\t\t\t\tvoid *data);\nint xen_pcibk_write_config_byte(struct pci_dev *dev, int offset, u8 value,\n\t\t\t\t void *data);\nint xen_pcibk_write_config_word(struct pci_dev *dev, int offset, u16 value,\n\t\t\t\tvoid *data);\nint xen_pcibk_write_config_dword(struct pci_dev *dev, int offset, u32 value,\n\t\t\t\t void *data);\n\nint xen_pcibk_config_capability_init(void);\n\nint xen_pcibk_config_header_add_fields(struct pci_dev *dev);\nint xen_pcibk_config_capability_add_fields(struct pci_dev *dev);\n\nint xen_pcibk_get_interrupt_type(struct pci_dev *dev);\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}