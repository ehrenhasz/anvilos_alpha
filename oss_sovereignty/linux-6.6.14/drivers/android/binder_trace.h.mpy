{
  "module_name": "binder_trace.h",
  "hash_id": "0640f8ebec0c13f091353b2592bfc7ba31e305dcda0cd3b2ee72514a2baf773f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/android/binder_trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM binder\n\n#if !defined(_BINDER_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _BINDER_TRACE_H\n\n#include <linux/tracepoint.h>\n\nstruct binder_buffer;\nstruct binder_node;\nstruct binder_proc;\nstruct binder_alloc;\nstruct binder_ref_data;\nstruct binder_thread;\nstruct binder_transaction;\n\nTRACE_EVENT(binder_ioctl,\n\tTP_PROTO(unsigned int cmd, unsigned long arg),\n\tTP_ARGS(cmd, arg),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, cmd)\n\t\t__field(unsigned long, arg)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cmd = cmd;\n\t\t__entry->arg = arg;\n\t),\n\tTP_printk(\"cmd=0x%x arg=0x%lx\", __entry->cmd, __entry->arg)\n);\n\nDECLARE_EVENT_CLASS(binder_lock_class,\n\tTP_PROTO(const char *tag),\n\tTP_ARGS(tag),\n\tTP_STRUCT__entry(\n\t\t__field(const char *, tag)\n\t),\n\tTP_fast_assign(\n\t\t__entry->tag = tag;\n\t),\n\tTP_printk(\"tag=%s\", __entry->tag)\n);\n\n#define DEFINE_BINDER_LOCK_EVENT(name)\t\\\nDEFINE_EVENT(binder_lock_class, name,\t\\\n\tTP_PROTO(const char *func), \\\n\tTP_ARGS(func))\n\nDEFINE_BINDER_LOCK_EVENT(binder_lock);\nDEFINE_BINDER_LOCK_EVENT(binder_locked);\nDEFINE_BINDER_LOCK_EVENT(binder_unlock);\n\nDECLARE_EVENT_CLASS(binder_function_return_class,\n\tTP_PROTO(int ret),\n\tTP_ARGS(ret),\n\tTP_STRUCT__entry(\n\t\t__field(int, ret)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ret = ret;\n\t),\n\tTP_printk(\"ret=%d\", __entry->ret)\n);\n\n#define DEFINE_BINDER_FUNCTION_RETURN_EVENT(name)\t\\\nDEFINE_EVENT(binder_function_return_class, name,\t\\\n\tTP_PROTO(int ret), \\\n\tTP_ARGS(ret))\n\nDEFINE_BINDER_FUNCTION_RETURN_EVENT(binder_ioctl_done);\nDEFINE_BINDER_FUNCTION_RETURN_EVENT(binder_write_done);\nDEFINE_BINDER_FUNCTION_RETURN_EVENT(binder_read_done);\n\nTRACE_EVENT(binder_wait_for_work,\n\tTP_PROTO(bool proc_work, bool transaction_stack, bool thread_todo),\n\tTP_ARGS(proc_work, transaction_stack, thread_todo),\n\n\tTP_STRUCT__entry(\n\t\t__field(bool, proc_work)\n\t\t__field(bool, transaction_stack)\n\t\t__field(bool, thread_todo)\n\t),\n\tTP_fast_assign(\n\t\t__entry->proc_work = proc_work;\n\t\t__entry->transaction_stack = transaction_stack;\n\t\t__entry->thread_todo = thread_todo;\n\t),\n\tTP_printk(\"proc_work=%d transaction_stack=%d thread_todo=%d\",\n\t\t  __entry->proc_work, __entry->transaction_stack,\n\t\t  __entry->thread_todo)\n);\n\nTRACE_EVENT(binder_txn_latency_free,\n\tTP_PROTO(struct binder_transaction *t,\n\t\t int from_proc, int from_thread,\n\t\t int to_proc, int to_thread),\n\tTP_ARGS(t, from_proc, from_thread, to_proc, to_thread),\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, from_proc)\n\t\t__field(int, from_thread)\n\t\t__field(int, to_proc)\n\t\t__field(int, to_thread)\n\t\t__field(unsigned int, code)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->from_proc = from_proc;\n\t\t__entry->from_thread = from_thread;\n\t\t__entry->to_proc = to_proc;\n\t\t__entry->to_thread = to_thread;\n\t\t__entry->code = t->code;\n\t\t__entry->flags = t->flags;\n\t),\n\tTP_printk(\"transaction=%d from %d:%d to %d:%d flags=0x%x code=0x%x\",\n\t\t  __entry->debug_id, __entry->from_proc, __entry->from_thread,\n\t\t  __entry->to_proc, __entry->to_thread, __entry->code,\n\t\t  __entry->flags)\n);\n\nTRACE_EVENT(binder_transaction,\n\tTP_PROTO(bool reply, struct binder_transaction *t,\n\t\t struct binder_node *target_node),\n\tTP_ARGS(reply, t, target_node),\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, target_node)\n\t\t__field(int, to_proc)\n\t\t__field(int, to_thread)\n\t\t__field(int, reply)\n\t\t__field(unsigned int, code)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->target_node = target_node ? target_node->debug_id : 0;\n\t\t__entry->to_proc = t->to_proc->pid;\n\t\t__entry->to_thread = t->to_thread ? t->to_thread->pid : 0;\n\t\t__entry->reply = reply;\n\t\t__entry->code = t->code;\n\t\t__entry->flags = t->flags;\n\t),\n\tTP_printk(\"transaction=%d dest_node=%d dest_proc=%d dest_thread=%d reply=%d flags=0x%x code=0x%x\",\n\t\t  __entry->debug_id, __entry->target_node,\n\t\t  __entry->to_proc, __entry->to_thread,\n\t\t  __entry->reply, __entry->flags, __entry->code)\n);\n\nTRACE_EVENT(binder_transaction_received,\n\tTP_PROTO(struct binder_transaction *t),\n\tTP_ARGS(t),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t),\n\tTP_printk(\"transaction=%d\", __entry->debug_id)\n);\n\nTRACE_EVENT(binder_transaction_node_to_ref,\n\tTP_PROTO(struct binder_transaction *t, struct binder_node *node,\n\t\t struct binder_ref_data *rdata),\n\tTP_ARGS(t, node, rdata),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, node_debug_id)\n\t\t__field(binder_uintptr_t, node_ptr)\n\t\t__field(int, ref_debug_id)\n\t\t__field(uint32_t, ref_desc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->node_debug_id = node->debug_id;\n\t\t__entry->node_ptr = node->ptr;\n\t\t__entry->ref_debug_id = rdata->debug_id;\n\t\t__entry->ref_desc = rdata->desc;\n\t),\n\tTP_printk(\"transaction=%d node=%d src_ptr=0x%016llx ==> dest_ref=%d dest_desc=%d\",\n\t\t  __entry->debug_id, __entry->node_debug_id,\n\t\t  (u64)__entry->node_ptr,\n\t\t  __entry->ref_debug_id, __entry->ref_desc)\n);\n\nTRACE_EVENT(binder_transaction_ref_to_node,\n\tTP_PROTO(struct binder_transaction *t, struct binder_node *node,\n\t\t struct binder_ref_data *rdata),\n\tTP_ARGS(t, node, rdata),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, ref_debug_id)\n\t\t__field(uint32_t, ref_desc)\n\t\t__field(int, node_debug_id)\n\t\t__field(binder_uintptr_t, node_ptr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->ref_debug_id = rdata->debug_id;\n\t\t__entry->ref_desc = rdata->desc;\n\t\t__entry->node_debug_id = node->debug_id;\n\t\t__entry->node_ptr = node->ptr;\n\t),\n\tTP_printk(\"transaction=%d node=%d src_ref=%d src_desc=%d ==> dest_ptr=0x%016llx\",\n\t\t  __entry->debug_id, __entry->node_debug_id,\n\t\t  __entry->ref_debug_id, __entry->ref_desc,\n\t\t  (u64)__entry->node_ptr)\n);\n\nTRACE_EVENT(binder_transaction_ref_to_ref,\n\tTP_PROTO(struct binder_transaction *t, struct binder_node *node,\n\t\t struct binder_ref_data *src_ref,\n\t\t struct binder_ref_data *dest_ref),\n\tTP_ARGS(t, node, src_ref, dest_ref),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, node_debug_id)\n\t\t__field(int, src_ref_debug_id)\n\t\t__field(uint32_t, src_ref_desc)\n\t\t__field(int, dest_ref_debug_id)\n\t\t__field(uint32_t, dest_ref_desc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->node_debug_id = node->debug_id;\n\t\t__entry->src_ref_debug_id = src_ref->debug_id;\n\t\t__entry->src_ref_desc = src_ref->desc;\n\t\t__entry->dest_ref_debug_id = dest_ref->debug_id;\n\t\t__entry->dest_ref_desc = dest_ref->desc;\n\t),\n\tTP_printk(\"transaction=%d node=%d src_ref=%d src_desc=%d ==> dest_ref=%d dest_desc=%d\",\n\t\t  __entry->debug_id, __entry->node_debug_id,\n\t\t  __entry->src_ref_debug_id, __entry->src_ref_desc,\n\t\t  __entry->dest_ref_debug_id, __entry->dest_ref_desc)\n);\n\nTRACE_EVENT(binder_transaction_fd_send,\n\tTP_PROTO(struct binder_transaction *t, int fd, size_t offset),\n\tTP_ARGS(t, fd, offset),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, fd)\n\t\t__field(size_t, offset)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->fd = fd;\n\t\t__entry->offset = offset;\n\t),\n\tTP_printk(\"transaction=%d src_fd=%d offset=%zu\",\n\t\t  __entry->debug_id, __entry->fd, __entry->offset)\n);\n\nTRACE_EVENT(binder_transaction_fd_recv,\n\tTP_PROTO(struct binder_transaction *t, int fd, size_t offset),\n\tTP_ARGS(t, fd, offset),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(int, fd)\n\t\t__field(size_t, offset)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = t->debug_id;\n\t\t__entry->fd = fd;\n\t\t__entry->offset = offset;\n\t),\n\tTP_printk(\"transaction=%d dest_fd=%d offset=%zu\",\n\t\t  __entry->debug_id, __entry->fd, __entry->offset)\n);\n\nDECLARE_EVENT_CLASS(binder_buffer_class,\n\tTP_PROTO(struct binder_buffer *buf),\n\tTP_ARGS(buf),\n\tTP_STRUCT__entry(\n\t\t__field(int, debug_id)\n\t\t__field(size_t, data_size)\n\t\t__field(size_t, offsets_size)\n\t\t__field(size_t, extra_buffers_size)\n\t),\n\tTP_fast_assign(\n\t\t__entry->debug_id = buf->debug_id;\n\t\t__entry->data_size = buf->data_size;\n\t\t__entry->offsets_size = buf->offsets_size;\n\t\t__entry->extra_buffers_size = buf->extra_buffers_size;\n\t),\n\tTP_printk(\"transaction=%d data_size=%zd offsets_size=%zd extra_buffers_size=%zd\",\n\t\t  __entry->debug_id, __entry->data_size, __entry->offsets_size,\n\t\t  __entry->extra_buffers_size)\n);\n\nDEFINE_EVENT(binder_buffer_class, binder_transaction_alloc_buf,\n\tTP_PROTO(struct binder_buffer *buffer),\n\tTP_ARGS(buffer));\n\nDEFINE_EVENT(binder_buffer_class, binder_transaction_buffer_release,\n\tTP_PROTO(struct binder_buffer *buffer),\n\tTP_ARGS(buffer));\n\nDEFINE_EVENT(binder_buffer_class, binder_transaction_failed_buffer_release,\n\tTP_PROTO(struct binder_buffer *buffer),\n\tTP_ARGS(buffer));\n\nDEFINE_EVENT(binder_buffer_class, binder_transaction_update_buffer_release,\n\t     TP_PROTO(struct binder_buffer *buffer),\n\t     TP_ARGS(buffer));\n\nTRACE_EVENT(binder_update_page_range,\n\tTP_PROTO(struct binder_alloc *alloc, bool allocate,\n\t\t void __user *start, void __user *end),\n\tTP_ARGS(alloc, allocate, start, end),\n\tTP_STRUCT__entry(\n\t\t__field(int, proc)\n\t\t__field(bool, allocate)\n\t\t__field(size_t, offset)\n\t\t__field(size_t, size)\n\t),\n\tTP_fast_assign(\n\t\t__entry->proc = alloc->pid;\n\t\t__entry->allocate = allocate;\n\t\t__entry->offset = start - alloc->buffer;\n\t\t__entry->size = end - start;\n\t),\n\tTP_printk(\"proc=%d allocate=%d offset=%zu size=%zu\",\n\t\t  __entry->proc, __entry->allocate,\n\t\t  __entry->offset, __entry->size)\n);\n\nDECLARE_EVENT_CLASS(binder_lru_page_class,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index),\n\tTP_STRUCT__entry(\n\t\t__field(int, proc)\n\t\t__field(size_t, page_index)\n\t),\n\tTP_fast_assign(\n\t\t__entry->proc = alloc->pid;\n\t\t__entry->page_index = page_index;\n\t),\n\tTP_printk(\"proc=%d page_index=%zu\",\n\t\t  __entry->proc, __entry->page_index)\n);\n\nDEFINE_EVENT(binder_lru_page_class, binder_alloc_lru_start,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_alloc_lru_end,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_free_lru_start,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_free_lru_end,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_alloc_page_start,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_alloc_page_end,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_unmap_user_start,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_unmap_user_end,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_unmap_kernel_start,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nDEFINE_EVENT(binder_lru_page_class, binder_unmap_kernel_end,\n\tTP_PROTO(const struct binder_alloc *alloc, size_t page_index),\n\tTP_ARGS(alloc, page_index));\n\nTRACE_EVENT(binder_command,\n\tTP_PROTO(uint32_t cmd),\n\tTP_ARGS(cmd),\n\tTP_STRUCT__entry(\n\t\t__field(uint32_t, cmd)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cmd = cmd;\n\t),\n\tTP_printk(\"cmd=0x%x %s\",\n\t\t  __entry->cmd,\n\t\t  _IOC_NR(__entry->cmd) < ARRAY_SIZE(binder_command_strings) ?\n\t\t\t  binder_command_strings[_IOC_NR(__entry->cmd)] :\n\t\t\t  \"unknown\")\n);\n\nTRACE_EVENT(binder_return,\n\tTP_PROTO(uint32_t cmd),\n\tTP_ARGS(cmd),\n\tTP_STRUCT__entry(\n\t\t__field(uint32_t, cmd)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cmd = cmd;\n\t),\n\tTP_printk(\"cmd=0x%x %s\",\n\t\t  __entry->cmd,\n\t\t  _IOC_NR(__entry->cmd) < ARRAY_SIZE(binder_return_strings) ?\n\t\t\t  binder_return_strings[_IOC_NR(__entry->cmd)] :\n\t\t\t  \"unknown\")\n);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE binder_trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}