{
  "module_name": "spi-fsl-lib.h",
  "hash_id": "764817488d1b9ffae48e8ecade86f52286dce97321f2bf5c660b284944a60500",
  "original_prompt": "Ingested from linux-6.6.14/drivers/spi/spi-fsl-lib.h",
  "human_readable_source": " \n \n#ifndef __SPI_FSL_LIB_H__\n#define __SPI_FSL_LIB_H__\n\n#include <asm/io.h>\n\n \nstruct mpc8xxx_spi {\n\tstruct device *dev;\n\tvoid __iomem *reg_base;\n\n\t \n\tconst void *tx;\n\tvoid *rx;\n\n\tint subblock;\n\tstruct spi_pram __iomem *pram;\n#ifdef CONFIG_FSL_SOC\n\tstruct cpm_buf_desc __iomem *tx_bd;\n\tstruct cpm_buf_desc __iomem *rx_bd;\n#endif\n\n\tstruct spi_transfer *xfer_in_progress;\n\n\t \n\tdma_addr_t tx_dma;\n\tdma_addr_t rx_dma;\n\tbool map_tx_dma;\n\tbool map_rx_dma;\n\n\tdma_addr_t dma_dummy_tx;\n\tdma_addr_t dma_dummy_rx;\n\n\t \n\tvoid (*get_rx) (u32 rx_data, struct mpc8xxx_spi *);\n\tu32(*get_tx) (struct mpc8xxx_spi *);\n\n\tunsigned int count;\n\tunsigned int irq;\n\n\tunsigned nsecs;\t\t \n\n\tu32 spibrg;\t\t \n\tu32 rx_shift;\t\t \n\tu32 tx_shift;\t\t \n\n\tunsigned int flags;\n\n#if IS_ENABLED(CONFIG_SPI_FSL_SPI)\n\tint type;\n\tint native_chipselects;\n\tu8 max_bits_per_word;\n\n\tvoid (*set_shifts)(u32 *rx_shift, u32 *tx_shift,\n\t\t\t   int bits_per_word, int msb_first);\n#endif\n\n\tstruct completion done;\n};\n\nstruct spi_mpc8xxx_cs {\n\t \n\tvoid (*get_rx) (u32 rx_data, struct mpc8xxx_spi *);\n\tu32 (*get_tx) (struct mpc8xxx_spi *);\n\tu32 rx_shift;\t\t \n\tu32 tx_shift;\t\t \n\tu32 hw_mode;\t\t \n};\n\nstatic inline void mpc8xxx_spi_write_reg(__be32 __iomem *reg, u32 val)\n{\n\tiowrite32be(val, reg);\n}\n\nstatic inline u32 mpc8xxx_spi_read_reg(__be32 __iomem *reg)\n{\n\treturn ioread32be(reg);\n}\n\nstruct mpc8xxx_spi_probe_info {\n\tstruct fsl_spi_platform_data pdata;\n\t__be32 __iomem *immr_spi_cs;\n};\n\nextern u32 mpc8xxx_spi_tx_buf_u8(struct mpc8xxx_spi *mpc8xxx_spi);\nextern u32 mpc8xxx_spi_tx_buf_u16(struct mpc8xxx_spi *mpc8xxx_spi);\nextern u32 mpc8xxx_spi_tx_buf_u32(struct mpc8xxx_spi *mpc8xxx_spi);\nextern void mpc8xxx_spi_rx_buf_u8(u32 data, struct mpc8xxx_spi *mpc8xxx_spi);\nextern void mpc8xxx_spi_rx_buf_u16(u32 data, struct mpc8xxx_spi *mpc8xxx_spi);\nextern void mpc8xxx_spi_rx_buf_u32(u32 data, struct mpc8xxx_spi *mpc8xxx_spi);\n\nextern struct mpc8xxx_spi_probe_info *to_of_pinfo(\n\t\tstruct fsl_spi_platform_data *pdata);\nextern const char *mpc8xxx_spi_strmode(unsigned int flags);\nextern void mpc8xxx_spi_probe(struct device *dev, struct resource *mem,\n\t\tunsigned int irq);\nextern int of_mpc8xxx_spi_probe(struct platform_device *ofdev);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}