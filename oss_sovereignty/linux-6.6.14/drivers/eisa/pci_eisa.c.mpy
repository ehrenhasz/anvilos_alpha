{
  "module_name": "pci_eisa.c",
  "hash_id": "f60b044eb8f80fce4d27276130a8e71afff888b9632d5452759d680a2739913a",
  "original_prompt": "Ingested from linux-6.6.14/drivers/eisa/pci_eisa.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/device.h>\n#include <linux/eisa.h>\n#include <linux/pci.h>\n#include <linux/module.h>\n#include <linux/init.h>\n\n \nstatic struct eisa_root_device pci_eisa_root;\n\nstatic int __init pci_eisa_init(struct pci_dev *pdev)\n{\n\tstruct resource *res, *bus_res = NULL;\n\tint rc;\n\n\tif ((rc = pci_enable_device (pdev))) {\n\t\tdev_err(&pdev->dev, \"Could not enable device\\n\");\n\t\treturn rc;\n\t}\n\n\t \n\tpci_bus_for_each_resource(pdev->bus, res)\n\t\tif (res && (res->flags & IORESOURCE_IO)) {\n\t\t\tbus_res = res;\n\t\t\tbreak;\n\t\t}\n\n\tif (!bus_res) {\n\t\tdev_err(&pdev->dev, \"No resources available\\n\");\n\t\treturn -1;\n\t}\n\n\tpci_eisa_root.dev\t\t= &pdev->dev;\n\tpci_eisa_root.res\t\t= bus_res;\n\tpci_eisa_root.bus_base_addr\t= bus_res->start;\n\tpci_eisa_root.slots\t\t= EISA_MAX_SLOTS;\n\tpci_eisa_root.dma_mask\t\t= pdev->dma_mask;\n\tdev_set_drvdata(pci_eisa_root.dev, &pci_eisa_root);\n\n\tif (eisa_root_register (&pci_eisa_root)) {\n\t\tdev_err(&pdev->dev, \"Could not register EISA root\\n\");\n\t\treturn -1;\n\t}\n\n\treturn 0;\n}\n\n \nstatic int __init pci_eisa_init_early(void)\n{\n\tstruct pci_dev *dev = NULL;\n\tint ret;\n\n\tfor_each_pci_dev(dev)\n\t\tif ((dev->class >> 8) == PCI_CLASS_BRIDGE_EISA) {\n\t\t\tret = pci_eisa_init(dev);\n\t\t\tif (ret)\n\t\t\t\treturn ret;\n\t\t}\n\n\treturn 0;\n}\nsubsys_initcall_sync(pci_eisa_init_early);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}