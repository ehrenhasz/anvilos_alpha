{
  "module_name": "k3-udma.h",
  "hash_id": "d000dcb8c61b3664f650967e2c44677e34fe405a543c595791d345427bd4d06c",
  "original_prompt": "Ingested from linux-6.6.14/drivers/dma/ti/k3-udma.h",
  "human_readable_source": " \n \n\n#ifndef K3_UDMA_H_\n#define K3_UDMA_H_\n\n#include <linux/soc/ti/ti_sci_protocol.h>\n\n \n#define UDMA_REV_REG\t\t\t0x0\n#define UDMA_PERF_CTL_REG\t\t0x4\n#define UDMA_EMU_CTL_REG\t\t0x8\n#define UDMA_PSIL_TO_REG\t\t0x10\n#define UDMA_UTC_CTL_REG\t\t0x1c\n#define UDMA_CAP_REG(i)\t\t\t(0x20 + ((i) * 4))\n#define UDMA_RX_FLOW_ID_FW_OES_REG\t0x80\n#define UDMA_RX_FLOW_ID_FW_STATUS_REG\t0x88\n\n \n#define UDMA_CHAN_RT_CTL_REG\t\t0x0\n#define UDMA_CHAN_RT_SWTRIG_REG\t\t0x8\n#define UDMA_CHAN_RT_STDATA_REG\t\t0x80\n\n#define UDMA_CHAN_RT_PEER_REG(i)\t(0x200 + ((i) * 0x4))\n#define UDMA_CHAN_RT_PEER_STATIC_TR_XY_REG\t\\\n\tUDMA_CHAN_RT_PEER_REG(0)\t \n#define UDMA_CHAN_RT_PEER_STATIC_TR_Z_REG\t\\\n\tUDMA_CHAN_RT_PEER_REG(1)\t \n#define UDMA_CHAN_RT_PEER_BCNT_REG\t\t\\\n\tUDMA_CHAN_RT_PEER_REG(4)\t \n#define UDMA_CHAN_RT_PEER_RT_EN_REG\t\t\\\n\tUDMA_CHAN_RT_PEER_REG(8)\t \n\n#define UDMA_CHAN_RT_PCNT_REG\t\t0x400\n#define UDMA_CHAN_RT_BCNT_REG\t\t0x408\n#define UDMA_CHAN_RT_SBCNT_REG\t\t0x410\n\n \n#define UDMA_CAP2_TCHAN_CNT(val)\t((val) & 0x1ff)\n#define UDMA_CAP2_ECHAN_CNT(val)\t(((val) >> 9) & 0x1ff)\n#define UDMA_CAP2_RCHAN_CNT(val)\t(((val) >> 18) & 0x1ff)\n#define UDMA_CAP3_RFLOW_CNT(val)\t((val) & 0x3fff)\n#define UDMA_CAP3_HCHAN_CNT(val)\t(((val) >> 14) & 0x1ff)\n#define UDMA_CAP3_UCHAN_CNT(val)\t(((val) >> 23) & 0x1ff)\n\n#define BCDMA_CAP2_BCHAN_CNT(val)\t((val) & 0x1ff)\n#define BCDMA_CAP2_TCHAN_CNT(val)\t(((val) >> 9) & 0x1ff)\n#define BCDMA_CAP2_RCHAN_CNT(val)\t(((val) >> 18) & 0x1ff)\n#define BCDMA_CAP3_HBCHAN_CNT(val)\t(((val) >> 14) & 0x1ff)\n#define BCDMA_CAP3_UBCHAN_CNT(val)\t(((val) >> 23) & 0x1ff)\n#define BCDMA_CAP4_HRCHAN_CNT(val)\t((val) & 0xff)\n#define BCDMA_CAP4_URCHAN_CNT(val)\t(((val) >> 8) & 0xff)\n#define BCDMA_CAP4_HTCHAN_CNT(val)\t(((val) >> 16) & 0xff)\n#define BCDMA_CAP4_UTCHAN_CNT(val)\t(((val) >> 24) & 0xff)\n\n#define PKTDMA_CAP4_TFLOW_CNT(val)\t((val) & 0x3fff)\n\n \n#define UDMA_CHAN_RT_CTL_EN\t\tBIT(31)\n#define UDMA_CHAN_RT_CTL_TDOWN\t\tBIT(30)\n#define UDMA_CHAN_RT_CTL_PAUSE\t\tBIT(29)\n#define UDMA_CHAN_RT_CTL_FTDOWN\t\tBIT(28)\n#define UDMA_CHAN_RT_CTL_ERROR\t\tBIT(0)\n\n \n#define UDMA_PEER_RT_EN_ENABLE\t\tBIT(31)\n#define UDMA_PEER_RT_EN_TEARDOWN\tBIT(30)\n#define UDMA_PEER_RT_EN_PAUSE\t\tBIT(29)\n#define UDMA_PEER_RT_EN_FLUSH\t\tBIT(28)\n#define UDMA_PEER_RT_EN_IDLE\t\tBIT(1)\n\n \n#define PDMA_STATIC_TR_X_MASK\t\tGENMASK(26, 24)\n#define PDMA_STATIC_TR_X_SHIFT\t\t(24)\n#define PDMA_STATIC_TR_Y_MASK\t\tGENMASK(11, 0)\n#define PDMA_STATIC_TR_Y_SHIFT\t\t(0)\n\n#define PDMA_STATIC_TR_Y(x)\t\\\n\t(((x) << PDMA_STATIC_TR_Y_SHIFT) & PDMA_STATIC_TR_Y_MASK)\n#define PDMA_STATIC_TR_X(x)\t\\\n\t(((x) << PDMA_STATIC_TR_X_SHIFT) & PDMA_STATIC_TR_X_MASK)\n\n#define PDMA_STATIC_TR_XY_ACC32\t\tBIT(30)\n#define PDMA_STATIC_TR_XY_BURST\t\tBIT(31)\n\n \n#define PDMA_STATIC_TR_Z(x, mask)\t((x) & (mask))\n\n \n#define K3_ADDRESS_ASEL_SHIFT\t\t48\n\nstruct udma_dev;\nstruct udma_tchan;\nstruct udma_rchan;\nstruct udma_rflow;\n\nenum udma_rm_range {\n\tRM_RANGE_BCHAN = 0,\n\tRM_RANGE_TCHAN,\n\tRM_RANGE_RCHAN,\n\tRM_RANGE_RFLOW,\n\tRM_RANGE_TFLOW,\n\tRM_RANGE_LAST,\n};\n\nstruct udma_tisci_rm {\n\tconst struct ti_sci_handle *tisci;\n\tconst struct ti_sci_rm_udmap_ops *tisci_udmap_ops;\n\tu32  tisci_dev_id;\n\n\t \n\tconst struct ti_sci_rm_psil_ops *tisci_psil_ops;\n\tu32  tisci_navss_dev_id;\n\n\tstruct ti_sci_resource *rm_ranges[RM_RANGE_LAST];\n};\n\n \nint xudma_navss_psil_pair(struct udma_dev *ud, u32 src_thread, u32 dst_thread);\nint xudma_navss_psil_unpair(struct udma_dev *ud, u32 src_thread,\n\t\t\t    u32 dst_thread);\n\nstruct udma_dev *of_xudma_dev_get(struct device_node *np, const char *property);\nstruct device *xudma_get_device(struct udma_dev *ud);\nstruct k3_ringacc *xudma_get_ringacc(struct udma_dev *ud);\nvoid xudma_dev_put(struct udma_dev *ud);\nu32 xudma_dev_get_psil_base(struct udma_dev *ud);\nstruct udma_tisci_rm *xudma_dev_get_tisci_rm(struct udma_dev *ud);\n\nint xudma_alloc_gp_rflow_range(struct udma_dev *ud, int from, int cnt);\nint xudma_free_gp_rflow_range(struct udma_dev *ud, int from, int cnt);\n\nstruct udma_tchan *xudma_tchan_get(struct udma_dev *ud, int id);\nstruct udma_rchan *xudma_rchan_get(struct udma_dev *ud, int id);\nstruct udma_rflow *xudma_rflow_get(struct udma_dev *ud, int id);\n\nvoid xudma_tchan_put(struct udma_dev *ud, struct udma_tchan *p);\nvoid xudma_rchan_put(struct udma_dev *ud, struct udma_rchan *p);\nvoid xudma_rflow_put(struct udma_dev *ud, struct udma_rflow *p);\n\nint xudma_tchan_get_id(struct udma_tchan *p);\nint xudma_rchan_get_id(struct udma_rchan *p);\nint xudma_rflow_get_id(struct udma_rflow *p);\n\nu32 xudma_tchanrt_read(struct udma_tchan *tchan, int reg);\nvoid xudma_tchanrt_write(struct udma_tchan *tchan, int reg, u32 val);\nu32 xudma_rchanrt_read(struct udma_rchan *rchan, int reg);\nvoid xudma_rchanrt_write(struct udma_rchan *rchan, int reg, u32 val);\nbool xudma_rflow_is_gp(struct udma_dev *ud, int id);\nint xudma_get_rflow_ring_offset(struct udma_dev *ud);\n\nint xudma_is_pktdma(struct udma_dev *ud);\n\nint xudma_pktdma_tflow_get_irq(struct udma_dev *ud, int udma_tflow_id);\nint xudma_pktdma_rflow_get_irq(struct udma_dev *ud, int udma_rflow_id);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}