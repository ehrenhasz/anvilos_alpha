{
  "module_name": "sf-pdma.h",
  "hash_id": "7645193343265219ec9cbccc8b1b10e80bf91e8c539969c667bd16be74fb04e8",
  "original_prompt": "Ingested from linux-6.6.14/drivers/dma/sf-pdma/sf-pdma.h",
  "human_readable_source": " \n \n#ifndef _SF_PDMA_H\n#define _SF_PDMA_H\n\n#include <linux/dmaengine.h>\n#include <linux/dma-direction.h>\n\n#include \"../dmaengine.h\"\n#include \"../virt-dma.h\"\n\n#define PDMA_MAX_NR_CH\t\t\t\t\t4\n\n#define PDMA_BASE_ADDR\t\t\t\t\t0x3000000\n#define PDMA_CHAN_OFFSET\t\t\t\t0x1000\n\n \n#define PDMA_CTRL\t\t\t\t\t0x000\n#define PDMA_XFER_TYPE\t\t\t\t\t0x004\n#define PDMA_XFER_SIZE\t\t\t\t\t0x008\n#define PDMA_DST_ADDR\t\t\t\t\t0x010\n#define PDMA_SRC_ADDR\t\t\t\t\t0x018\n#define PDMA_ACT_TYPE\t\t\t\t\t0x104  \n#define PDMA_REMAINING_BYTE\t\t\t\t0x108  \n#define PDMA_CUR_DST_ADDR\t\t\t\t0x110  \n#define PDMA_CUR_SRC_ADDR\t\t\t\t0x118  \n\n \n#define PDMA_CLEAR_CTRL\t\t\t\t\t0x0\n#define PDMA_CLAIM_MASK\t\t\t\t\tGENMASK(0, 0)\n#define PDMA_RUN_MASK\t\t\t\t\tGENMASK(1, 1)\n#define PDMA_ENABLE_DONE_INT_MASK\t\t\tGENMASK(14, 14)\n#define PDMA_ENABLE_ERR_INT_MASK\t\t\tGENMASK(15, 15)\n#define PDMA_DONE_STATUS_MASK\t\t\t\tGENMASK(30, 30)\n#define PDMA_ERR_STATUS_MASK\t\t\t\tGENMASK(31, 31)\n\n \n#define PDMA_FULL_SPEED\t\t\t\t\t0xFF000008\n\n \n#define MAX_RETRY\t\t\t\t\t1\n\n#define SF_PDMA_REG_BASE(ch)\t(pdma->membase + (PDMA_CHAN_OFFSET * (ch)))\n\nstruct pdma_regs {\n\t \n\tvoid __iomem *ctrl;\t\t \n\n\tvoid __iomem *xfer_type;\t \n\tvoid __iomem *xfer_size;\t \n\tvoid __iomem *dst_addr;\t\t \n\tvoid __iomem *src_addr;\t\t \n\n\t \n\tvoid __iomem *act_type;\t\t \n\tvoid __iomem *residue;\t\t \n\tvoid __iomem *cur_dst_addr;\t \n\tvoid __iomem *cur_src_addr;\t \n};\n\nstruct sf_pdma_desc {\n\tu32\t\t\t\txfer_type;\n\tu64\t\t\t\txfer_size;\n\tu64\t\t\t\tdst_addr;\n\tu64\t\t\t\tsrc_addr;\n\tstruct virt_dma_desc\t\tvdesc;\n\tstruct sf_pdma_chan\t\t*chan;\n\tenum dma_transfer_direction\tdirn;\n\tstruct dma_async_tx_descriptor *async_tx;\n};\n\nenum sf_pdma_pm_state {\n\tRUNNING = 0,\n\tSUSPENDED,\n};\n\nstruct sf_pdma_chan {\n\tstruct virt_dma_chan\t\tvchan;\n\tenum dma_status\t\t\tstatus;\n\tenum sf_pdma_pm_state\t\tpm_state;\n\tu32\t\t\t\tslave_id;\n\tstruct sf_pdma\t\t\t*pdma;\n\tstruct sf_pdma_desc\t\t*desc;\n\tstruct dma_slave_config\t\tcfg;\n\tu32\t\t\t\tattr;\n\tdma_addr_t\t\t\tdma_dev_addr;\n\tu32\t\t\t\tdma_dev_size;\n\tstruct tasklet_struct\t\tdone_tasklet;\n\tstruct tasklet_struct\t\terr_tasklet;\n\tstruct pdma_regs\t\tregs;\n\tspinlock_t\t\t\tlock;  \n\tbool\t\t\t\txfer_err;\n\tint\t\t\t\ttxirq;\n\tint\t\t\t\terrirq;\n\tint\t\t\t\tretries;\n};\n\nstruct sf_pdma {\n\tstruct dma_device       dma_dev;\n\tvoid __iomem            *membase;\n\tvoid __iomem            *mappedbase;\n\tu32\t\t\tn_chans;\n\tstruct sf_pdma_chan\tchans[];\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}