{
  "module_name": "adma.h",
  "hash_id": "ab69989e2c46d6b9367b960970ad18a58a65b0965cb97a508d4100ddc3c5f72f",
  "original_prompt": "Ingested from linux-6.6.14/drivers/dma/ppc4xx/adma.h",
  "human_readable_source": " \n \n\n#ifndef _PPC440SPE_ADMA_H\n#define _PPC440SPE_ADMA_H\n\n#include <linux/types.h>\n#include \"dma.h\"\n#include \"xor.h\"\n\n#define to_ppc440spe_adma_chan(chan) \\\n\t\tcontainer_of(chan, struct ppc440spe_adma_chan, common)\n#define to_ppc440spe_adma_device(dev) \\\n\t\tcontainer_of(dev, struct ppc440spe_adma_device, common)\n#define tx_to_ppc440spe_adma_slot(tx) \\\n\t\tcontainer_of(tx, struct ppc440spe_adma_desc_slot, async_tx)\n\n \n#define PPC440SPE_DEFAULT_POLY\t0x4d\n\n#define PPC440SPE_ADMA_ENGINES_NUM\t(XOR_ENGINES_NUM + DMA_ENGINES_NUM)\n\n#define PPC440SPE_ADMA_WATCHDOG_MSEC\t3\n#define PPC440SPE_ADMA_THRESHOLD\t1\n\n#define PPC440SPE_DMA0_ID\t0\n#define PPC440SPE_DMA1_ID\t1\n#define PPC440SPE_XOR_ID\t2\n\n#define PPC440SPE_ADMA_DMA_MAX_BYTE_COUNT\t0xFFFFFFUL\n \n#define PPC440SPE_ADMA_XOR_MAX_BYTE_COUNT\t(1 << 31)\n#define PPC440SPE_ADMA_ZERO_SUM_MAX_BYTE_COUNT PPC440SPE_ADMA_XOR_MAX_BYTE_COUNT\n\n#define PPC440SPE_RXOR_RUN\t0\n\n#define MQ0_CF2H_RXOR_BS_MASK\t0x1FF\n\n#undef ADMA_LL_DEBUG\n\n \nstruct ppc440spe_adma_device {\n\tstruct device *dev;\n\tstruct dma_regs __iomem *dma_reg;\n\tstruct xor_regs __iomem *xor_reg;\n\tstruct i2o_regs __iomem *i2o_reg;\n\tint id;\n\tvoid *dma_desc_pool_virt;\n\tdma_addr_t dma_desc_pool;\n\tsize_t pool_size;\n\tint irq;\n\tint err_irq;\n\tstruct dma_device common;\n};\n\n \nstruct ppc440spe_adma_chan {\n\tspinlock_t lock;\n\tstruct ppc440spe_adma_device *device;\n\tstruct list_head chain;\n\tstruct dma_chan common;\n\tstruct list_head all_slots;\n\tstruct ppc440spe_adma_desc_slot *last_used;\n\tint pending;\n\tint slots_allocated;\n\tint hw_chain_inited;\n\tstruct tasklet_struct irq_tasklet;\n\tu8 needs_unmap;\n\tstruct page *pdest_page;\n\tstruct page *qdest_page;\n\tdma_addr_t pdest;\n\tdma_addr_t qdest;\n};\n\nstruct ppc440spe_rxor {\n\tu32 addrl;\n\tu32 addrh;\n\tint len;\n\tint xor_count;\n\tint addr_count;\n\tint desc_count;\n\tint state;\n};\n\n \nstruct ppc440spe_adma_desc_slot {\n\tdma_addr_t phys;\n\tstruct ppc440spe_adma_desc_slot *group_head;\n\tstruct ppc440spe_adma_desc_slot *hw_next;\n\tstruct dma_async_tx_descriptor async_tx;\n\tstruct list_head slot_node;\n\tstruct list_head chain_node;  \n\tstruct list_head group_list;  \n\tunsigned int unmap_len;\n\tvoid *hw_desc;\n\tu16 stride;\n\tu16 idx;\n\tu16 slot_cnt;\n\tu8 src_cnt;\n\tu8 dst_cnt;\n\tu8 slots_per_op;\n\tu8 descs_per_op;\n\tunsigned long flags;\n\tunsigned long reverse_flags[8];\n\n#define PPC440SPE_DESC_INT\t0\t \n#define PPC440SPE_ZERO_P\t1\t \n#define PPC440SPE_ZERO_Q\t2\t \n#define PPC440SPE_COHERENT\t3\t \n\n#define PPC440SPE_DESC_WXOR\t4\t \n#define PPC440SPE_DESC_RXOR\t5\t \n\n#define PPC440SPE_DESC_RXOR123\t8\t \n#define PPC440SPE_DESC_RXOR124\t9\t \n#define PPC440SPE_DESC_RXOR125\t10\t \n#define PPC440SPE_DESC_RXOR12\t11\t \n#define PPC440SPE_DESC_RXOR_REV\t12\t \n\n#define PPC440SPE_DESC_PCHECK\t13\n#define PPC440SPE_DESC_QCHECK\t14\n\n#define PPC440SPE_DESC_RXOR_MSK\t0x3\n\n\tstruct ppc440spe_rxor rxor_cursor;\n\n\tunion {\n\t\tu32 *xor_check_result;\n\t\tu32 *crc32_result;\n\t};\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}