{
  "module_name": "hsu.h",
  "hash_id": "54070f737628306431e973d6353502a6e171ba2fd2b25daef506ed9316c30fc4",
  "original_prompt": "Ingested from linux-6.6.14/drivers/dma/hsu/hsu.h",
  "human_readable_source": " \n \n\n#ifndef __DMA_HSU_H__\n#define __DMA_HSU_H__\n\n#include <linux/bits.h>\n#include <linux/container_of.h>\n#include <linux/io.h>\n#include <linux/types.h>\n\n#include <linux/dma/hsu.h>\n\n#include \"../virt-dma.h\"\n\n#define HSU_CH_SR\t\t0x00\t\t\t \n#define HSU_CH_CR\t\t0x04\t\t\t \n#define HSU_CH_DCR\t\t0x08\t\t\t \n#define HSU_CH_BSR\t\t0x10\t\t\t \n#define HSU_CH_MTSR\t\t0x14\t\t\t \n#define HSU_CH_DxSAR(x)\t\t(0x20 + 8 * (x))\t \n#define HSU_CH_DxTSR(x)\t\t(0x24 + 8 * (x))\t \n#define HSU_CH_D0SAR\t\t0x20\t\t\t \n#define HSU_CH_D0TSR\t\t0x24\t\t\t \n#define HSU_CH_D1SAR\t\t0x28\n#define HSU_CH_D1TSR\t\t0x2c\n#define HSU_CH_D2SAR\t\t0x30\n#define HSU_CH_D2TSR\t\t0x34\n#define HSU_CH_D3SAR\t\t0x38\n#define HSU_CH_D3TSR\t\t0x3c\n\n#define HSU_DMA_CHAN_NR_DESC\t4\n#define HSU_DMA_CHAN_LENGTH\t0x40\n\n \n#define HSU_CH_SR_DESCTO(x)\tBIT(8 + (x))\n#define HSU_CH_SR_DESCTO_ANY\tGENMASK(11, 8)\n#define HSU_CH_SR_CHE\t\tBIT(15)\n#define HSU_CH_SR_DESCE(x)\tBIT(16 + (x))\n#define HSU_CH_SR_DESCE_ANY\tGENMASK(19, 16)\n#define HSU_CH_SR_CDESC_ANY\tGENMASK(31, 30)\n\n \n#define HSU_CH_CR_CHA\t\tBIT(0)\n#define HSU_CH_CR_CHD\t\tBIT(1)\n\n \n#define HSU_CH_DCR_DESCA(x)\tBIT(0 + (x))\n#define HSU_CH_DCR_CHSOD(x)\tBIT(8 + (x))\n#define HSU_CH_DCR_CHSOTO\tBIT(14)\n#define HSU_CH_DCR_CHSOE\tBIT(15)\n#define HSU_CH_DCR_CHDI(x)\tBIT(16 + (x))\n#define HSU_CH_DCR_CHEI\t\tBIT(23)\n#define HSU_CH_DCR_CHTOI(x)\tBIT(24 + (x))\n\n \n#define HSU_CH_DxTSR_MASK\tGENMASK(15, 0)\n#define HSU_CH_DxTSR_TSR(x)\t((x) & HSU_CH_DxTSR_MASK)\n\nstruct hsu_dma_sg {\n\tdma_addr_t addr;\n\tunsigned int len;\n};\n\nstruct hsu_dma_desc {\n\tstruct virt_dma_desc vdesc;\n\tenum dma_transfer_direction direction;\n\tstruct hsu_dma_sg *sg;\n\tunsigned int nents;\n\tsize_t length;\n\tunsigned int active;\n\tenum dma_status status;\n};\n\nstatic inline struct hsu_dma_desc *to_hsu_dma_desc(struct virt_dma_desc *vdesc)\n{\n\treturn container_of(vdesc, struct hsu_dma_desc, vdesc);\n}\n\nstruct hsu_dma_chan {\n\tstruct virt_dma_chan vchan;\n\n\tvoid __iomem *reg;\n\n\t \n\tenum dma_transfer_direction direction;\n\tstruct dma_slave_config config;\n\n\tstruct hsu_dma_desc *desc;\n};\n\nstatic inline struct hsu_dma_chan *to_hsu_dma_chan(struct dma_chan *chan)\n{\n\treturn container_of(chan, struct hsu_dma_chan, vchan.chan);\n}\n\nstatic inline u32 hsu_chan_readl(struct hsu_dma_chan *hsuc, int offset)\n{\n\treturn readl(hsuc->reg + offset);\n}\n\nstatic inline void hsu_chan_writel(struct hsu_dma_chan *hsuc, int offset,\n\t\t\t\t   u32 value)\n{\n\twritel(value, hsuc->reg + offset);\n}\n\nstruct hsu_dma {\n\tstruct dma_device\t\tdma;\n\n\t \n\tstruct hsu_dma_chan\t\t*chan;\n\tunsigned short\t\t\tnr_channels;\n};\n\nstatic inline struct hsu_dma *to_hsu_dma(struct dma_device *ddev)\n{\n\treturn container_of(ddev, struct hsu_dma, dma);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}