{
  "module_name": "dpaa2-qdma.h",
  "hash_id": "8eda4d9cd5d9b19bf216ec4c19581b3d4a01734b0a3c4e9feb7faa0dacf494ae",
  "original_prompt": "Ingested from linux-6.6.14/drivers/dma/fsl-dpaa2-qdma/dpaa2-qdma.h",
  "human_readable_source": " \n \n\n#ifndef __DPAA2_QDMA_H\n#define __DPAA2_QDMA_H\n\n#define DPAA2_QDMA_STORE_SIZE 16\n#define NUM_CH 8\n\nstruct dpaa2_qdma_sd_d {\n\tu32 rsv:32;\n\tunion {\n\t\tstruct {\n\t\t\tu32 ssd:12;  \n\t\t\tu32 sss:12;  \n\t\t\tu32 rsv1:8;\n\t\t} sdf;\n\t\tstruct {\n\t\t\tu32 dsd:12;  \n\t\t\tu32 dss:12;  \n\t\t\tu32 rsv2:8;\n\t\t} ddf;\n\t} df;\n\tu32 rbpcmd;\t \n\tu32 cmd;\n} __attribute__((__packed__));\n\n \n \n#define QDMA_SD_CMD_RDTTYPE_COHERENT (0xb << 28)\n \n \n#define QDMA_DD_CMD_WRTTYPE_COHERENT (0x6 << 28)\n#define LX2160_QDMA_DD_CMD_WRTTYPE_COHERENT (0xb << 28)\n\n#define QMAN_FD_FMT_ENABLE\tBIT(0)  \n#define QMAN_FD_BMT_ENABLE\tBIT(15)  \n#define QMAN_FD_BMT_DISABLE\t(0)  \n#define QMAN_FD_SL_DISABLE\t(0)  \n#define QMAN_FD_SL_ENABLE\tBIT(14)  \n\n#define QDMA_FINAL_BIT_DISABLE\t(0)  \n#define QDMA_FINAL_BIT_ENABLE\tBIT(31)  \n\n#define QDMA_FD_SHORT_FORMAT\tBIT(11)  \n#define QDMA_FD_LONG_FORMAT\t(0)  \n#define QDMA_SER_DISABLE\t(8)  \n#define QDMA_SER_CTX\t\tBIT(8)  \n#define QDMA_SER_DEST\t\t(2 << 8)  \n#define QDMA_SER_BOTH\t\t(3 << 8)  \n#define QDMA_FD_SPF_ENALBE\tBIT(30)  \n\n#define QMAN_FD_VA_ENABLE\tBIT(14)  \n#define QMAN_FD_VA_DISABLE\t(0) \n \n#define QMAN_FD_CBMT_ENABLE\tBIT(15)\n#define QMAN_FD_CBMT_DISABLE\t(0)  \n#define QMAN_FD_SC_DISABLE\t(0)  \n\n#define QDMA_FL_FMT_SBF\t\t(0x0)  \n#define QDMA_FL_FMT_SGE\t\t(0x2)  \n#define QDMA_FL_BMT_ENABLE\tBIT(15)  \n#define QDMA_FL_BMT_DISABLE\t(0x0)  \n#define QDMA_FL_SL_LONG\t\t(0x0) \n#define QDMA_FL_SL_SHORT\t(0x1)  \n#define QDMA_FL_F\t\t(0x1) \n\n \nstruct dpaa2_qdma_chan {\n\tstruct dpaa2_qdma_engine\t*qdma;\n\tstruct virt_dma_chan\t\tvchan;\n\tstruct virt_dma_desc\t\tvdesc;\n\tenum dma_status\t\t\tstatus;\n\tu32\t\t\t\tfqid;\n\n\t \n\tspinlock_t\t\t\tqueue_lock;\n\tstruct dma_pool\t\t\t*fd_pool;\n\tstruct dma_pool\t\t\t*fl_pool;\n\tstruct dma_pool\t\t\t*sdd_pool;\n\n\tstruct list_head\t\tcomp_used;\n\tstruct list_head\t\tcomp_free;\n\n};\n\nstruct dpaa2_qdma_comp {\n\tdma_addr_t\t\tfd_bus_addr;\n\tdma_addr_t\t\tfl_bus_addr;\n\tdma_addr_t\t\tdesc_bus_addr;\n\tstruct dpaa2_fd\t\t*fd_virt_addr;\n\tstruct dpaa2_fl_entry\t*fl_virt_addr;\n\tstruct dpaa2_qdma_sd_d\t*desc_virt_addr;\n\tstruct dpaa2_qdma_chan\t*qchan;\n\tstruct virt_dma_desc\tvdesc;\n\tstruct list_head\tlist;\n};\n\nstruct dpaa2_qdma_engine {\n\tstruct dma_device\tdma_dev;\n\tu32\t\t\tn_chans;\n\tstruct dpaa2_qdma_chan\tchans[NUM_CH];\n\tint\t\t\tqdma_wrtype_fixup;\n\tint\t\t\tdesc_allocated;\n\n\tstruct dpaa2_qdma_priv *priv;\n};\n\n \nstruct dpaa2_qdma_priv {\n\tint dpqdma_id;\n\n\tstruct iommu_domain\t*iommu_domain;\n\tstruct dpdmai_attr\tdpdmai_attr;\n\tstruct device\t\t*dev;\n\tstruct fsl_mc_io\t*mc_io;\n\tstruct fsl_mc_device\t*dpdmai_dev;\n\tu8\t\t\tnum_pairs;\n\n\tstruct dpaa2_qdma_engine\t*dpaa2_qdma;\n\tstruct dpaa2_qdma_priv_per_prio\t*ppriv;\n\n\tstruct dpdmai_rx_queue_attr rx_queue_attr[DPDMAI_PRIO_NUM];\n\tu32 tx_fqid[DPDMAI_PRIO_NUM];\n};\n\nstruct dpaa2_qdma_priv_per_prio {\n\tint req_fqid;\n\tint rsp_fqid;\n\tint prio;\n\n\tstruct dpaa2_io_store *store;\n\tstruct dpaa2_io_notification_ctx nctx;\n\n\tstruct dpaa2_qdma_priv *priv;\n};\n\nstatic struct soc_device_attribute soc_fixup_tuning[] = {\n\t{ .family = \"QorIQ LX2160A\"},\n\t{   }\n};\n\n \n#define FD_POOL_SIZE (sizeof(struct dpaa2_fd) + \\\n\t\tsizeof(struct dpaa2_fl_entry) * 3 + \\\n\t\tsizeof(struct dpaa2_qdma_sd_d) * 2)\n\nstatic void dpaa2_dpdmai_free_channels(struct dpaa2_qdma_engine *dpaa2_qdma);\nstatic void dpaa2_dpdmai_free_comp(struct dpaa2_qdma_chan *qchan,\n\t\t\t\t   struct list_head *head);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}