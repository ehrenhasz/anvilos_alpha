{
  "module_name": "mite.h",
  "hash_id": "716b80e77d7db588119a70916f553e33c2d0a0784459fe743828e3a5dbce5828",
  "original_prompt": "Ingested from linux-6.6.14/drivers/comedi/drivers/mite.h",
  "human_readable_source": " \n \n\n#ifndef _MITE_H_\n#define _MITE_H_\n\n#include <linux/spinlock.h>\n\n#define MAX_MITE_DMA_CHANNELS 8\n\nstruct comedi_device;\nstruct comedi_subdevice;\nstruct device;\nstruct pci_dev;\n\nstruct mite_dma_desc {\n\t__le32 count;\n\t__le32 addr;\n\t__le32 next;\n\tu32 dar;\n};\n\nstruct mite_ring {\n\tstruct device *hw_dev;\n\tunsigned int n_links;\n\tstruct mite_dma_desc *descs;\n\tdma_addr_t dma_addr;\n};\n\nstruct mite_channel {\n\tstruct mite *mite;\n\tunsigned int channel;\n\tint dir;\n\tint done;\n\tstruct mite_ring *ring;\n};\n\nstruct mite {\n\tstruct pci_dev *pcidev;\n\tvoid __iomem *mmio;\n\tstruct mite_channel channels[MAX_MITE_DMA_CHANNELS];\n\tint num_channels;\n\tunsigned int fifo_size;\n\t \n\tspinlock_t lock;\n};\n\nu32 mite_bytes_in_transit(struct mite_channel *mite_chan);\n\nvoid mite_sync_dma(struct mite_channel *mite_chan, struct comedi_subdevice *s);\nvoid mite_ack_linkc(struct mite_channel *mite_chan, struct comedi_subdevice *s,\n\t\t    bool sync);\nint mite_done(struct mite_channel *mite_chan);\n\nvoid mite_dma_arm(struct mite_channel *mite_chan);\nvoid mite_dma_disarm(struct mite_channel *mite_chan);\n\nvoid mite_prep_dma(struct mite_channel *mite_chan,\n\t\t   unsigned int num_device_bits, unsigned int num_memory_bits);\n\nstruct mite_channel *mite_request_channel_in_range(struct mite *mite,\n\t\t\t\t\t\t   struct mite_ring *ring,\n\t\t\t\t\t\t   unsigned int min_channel,\n\t\t\t\t\t\t   unsigned int max_channel);\nstruct mite_channel *mite_request_channel(struct mite *mite,\n\t\t\t\t\t  struct mite_ring *ring);\nvoid mite_release_channel(struct mite_channel *mite_chan);\n\nint mite_init_ring_descriptors(struct mite_ring *ring,\n\t\t\t       struct comedi_subdevice *s, unsigned int nbytes);\nint mite_buf_change(struct mite_ring *ring, struct comedi_subdevice *s);\n\nstruct mite_ring *mite_alloc_ring(struct mite *mite);\nvoid mite_free_ring(struct mite_ring *ring);\n\nstruct mite *mite_attach(struct comedi_device *dev, bool use_win1);\nvoid mite_detach(struct mite *mite);\n\n \n#define MITE_IODWBSR\t\t0xc0\t \n#define MITE_IODWBSR_1\t\t0xc4\t \n#define WENAB\t\t\tBIT(7)\t \n#define MITE_IODWCR_1\t\t0xf4\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}