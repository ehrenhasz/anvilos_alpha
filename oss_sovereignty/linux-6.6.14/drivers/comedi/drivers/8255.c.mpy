{
  "module_name": "8255.c",
  "hash_id": "8bdd1c87001afb3e6904fbe7d80b4b6f5875a338eff5b33a12b4c2ddea129b9b",
  "original_prompt": "Ingested from linux-6.6.14/drivers/comedi/drivers/8255.c",
  "human_readable_source": "\n \n\n \n\n#include <linux/module.h>\n#include <linux/comedi/comedidev.h>\n#include <linux/comedi/comedi_8255.h>\n\nstatic int dev_8255_attach(struct comedi_device *dev,\n\t\t\t   struct comedi_devconfig *it)\n{\n\tstruct comedi_subdevice *s;\n\tunsigned long iobase;\n\tint ret;\n\tint i;\n\n\tfor (i = 0; i < COMEDI_NDEVCONFOPTS; i++) {\n\t\tiobase = it->options[i];\n\t\tif (!iobase)\n\t\t\tbreak;\n\t}\n\tif (i == 0) {\n\t\tdev_warn(dev->class_dev, \"no devices specified\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tret = comedi_alloc_subdevices(dev, i);\n\tif (ret)\n\t\treturn ret;\n\n\tfor (i = 0; i < dev->n_subdevices; i++) {\n\t\ts = &dev->subdevices[i];\n\t\tiobase = it->options[i];\n\n\t\t \n\t\tret = __comedi_request_region(dev, iobase, I8255_SIZE);\n\t\tif (ret) {\n\t\t\ts->type = COMEDI_SUBD_UNUSED;\n\t\t} else {\n\t\t\tret = subdev_8255_init(dev, s, NULL, iobase);\n\t\t\tif (ret) {\n\t\t\t\t \n\t\t\t\trelease_region(iobase, I8255_SIZE);\n\t\t\t\ts->type = COMEDI_SUBD_UNUSED;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic void dev_8255_detach(struct comedi_device *dev)\n{\n\tstruct comedi_subdevice *s;\n\tint i;\n\n\tfor (i = 0; i < dev->n_subdevices; i++) {\n\t\ts = &dev->subdevices[i];\n\t\tif (s->type != COMEDI_SUBD_UNUSED) {\n\t\t\tunsigned long regbase = subdev_8255_regbase(s);\n\n\t\t\trelease_region(regbase, I8255_SIZE);\n\t\t}\n\t}\n}\n\nstatic struct comedi_driver dev_8255_driver = {\n\t.driver_name\t= \"8255\",\n\t.module\t\t= THIS_MODULE,\n\t.attach\t\t= dev_8255_attach,\n\t.detach\t\t= dev_8255_detach,\n};\nmodule_comedi_driver(dev_8255_driver);\n\nMODULE_AUTHOR(\"Comedi https://www.comedi.org\");\nMODULE_DESCRIPTION(\"Comedi driver for standalone 8255 devices\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}