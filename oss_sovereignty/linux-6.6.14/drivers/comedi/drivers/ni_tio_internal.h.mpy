{
  "module_name": "ni_tio_internal.h",
  "hash_id": "482b3752b547e004baeea62784c5338e9577ecab1f869dce31afe8c89b7ab872",
  "original_prompt": "Ingested from linux-6.6.14/drivers/comedi/drivers/ni_tio_internal.h",
  "human_readable_source": " \n \n\n#ifndef _COMEDI_NI_TIO_INTERNAL_H\n#define _COMEDI_NI_TIO_INTERNAL_H\n\n#include \"ni_tio.h\"\n\n#define NITIO_AUTO_INC_REG(x)\t\t(NITIO_G0_AUTO_INC + (x))\n#define GI_AUTO_INC_MASK\t\t0xff\n#define NITIO_CMD_REG(x)\t\t(NITIO_G0_CMD + (x))\n#define GI_ARM\t\t\t\tBIT(0)\n#define GI_SAVE_TRACE\t\t\tBIT(1)\n#define GI_LOAD\t\t\t\tBIT(2)\n#define GI_DISARM\t\t\tBIT(4)\n#define GI_CNT_DIR(x)\t\t\t(((x) & 0x3) << 5)\n#define GI_CNT_DIR_MASK\t\t\tGI_CNT_DIR(3)\n#define GI_WRITE_SWITCH\t\t\tBIT(7)\n#define GI_SYNC_GATE\t\t\tBIT(8)\n#define GI_LITTLE_BIG_ENDIAN\t\tBIT(9)\n#define GI_BANK_SWITCH_START\t\tBIT(10)\n#define GI_BANK_SWITCH_MODE\t\tBIT(11)\n#define GI_BANK_SWITCH_ENABLE\t\tBIT(12)\n#define GI_ARM_COPY\t\t\tBIT(13)\n#define GI_SAVE_TRACE_COPY\t\tBIT(14)\n#define GI_DISARM_COPY\t\t\tBIT(15)\n#define NITIO_HW_SAVE_REG(x)\t\t(NITIO_G0_HW_SAVE + (x))\n#define NITIO_SW_SAVE_REG(x)\t\t(NITIO_G0_SW_SAVE + (x))\n#define NITIO_MODE_REG(x)\t\t(NITIO_G0_MODE + (x))\n#define GI_GATING_MODE(x)\t\t(((x) & 0x3) << 0)\n#define GI_GATING_DISABLED\t\tGI_GATING_MODE(0)\n#define GI_LEVEL_GATING\t\t\tGI_GATING_MODE(1)\n#define GI_RISING_EDGE_GATING\t\tGI_GATING_MODE(2)\n#define GI_FALLING_EDGE_GATING\t\tGI_GATING_MODE(3)\n#define GI_GATING_MODE_MASK\t\tGI_GATING_MODE(3)\n#define GI_GATE_ON_BOTH_EDGES\t\tBIT(2)\n#define GI_EDGE_GATE_MODE(x)\t\t(((x) & 0x3) << 3)\n#define GI_EDGE_GATE_STARTS_STOPS\tGI_EDGE_GATE_MODE(0)\n#define GI_EDGE_GATE_STOPS_STARTS\tGI_EDGE_GATE_MODE(1)\n#define GI_EDGE_GATE_STARTS\t\tGI_EDGE_GATE_MODE(2)\n#define GI_EDGE_GATE_NO_STARTS_OR_STOPS\tGI_EDGE_GATE_MODE(3)\n#define GI_EDGE_GATE_MODE_MASK\t\tGI_EDGE_GATE_MODE(3)\n#define GI_STOP_MODE(x)\t\t\t(((x) & 0x3) << 5)\n#define GI_STOP_ON_GATE\t\t\tGI_STOP_MODE(0)\n#define GI_STOP_ON_GATE_OR_TC\t\tGI_STOP_MODE(1)\n#define GI_STOP_ON_GATE_OR_SECOND_TC\tGI_STOP_MODE(2)\n#define GI_STOP_MODE_MASK\t\tGI_STOP_MODE(3)\n#define GI_LOAD_SRC_SEL\t\t\tBIT(7)\n#define GI_OUTPUT_MODE(x)\t\t(((x) & 0x3) << 8)\n#define GI_OUTPUT_TC_PULSE\t\tGI_OUTPUT_MODE(1)\n#define GI_OUTPUT_TC_TOGGLE\t\tGI_OUTPUT_MODE(2)\n#define GI_OUTPUT_TC_OR_GATE_TOGGLE\tGI_OUTPUT_MODE(3)\n#define GI_OUTPUT_MODE_MASK\t\tGI_OUTPUT_MODE(3)\n#define GI_COUNTING_ONCE(x)\t\t(((x) & 0x3) << 10)\n#define GI_NO_HARDWARE_DISARM\t\tGI_COUNTING_ONCE(0)\n#define GI_DISARM_AT_TC\t\t\tGI_COUNTING_ONCE(1)\n#define GI_DISARM_AT_GATE\t\tGI_COUNTING_ONCE(2)\n#define GI_DISARM_AT_TC_OR_GATE\t\tGI_COUNTING_ONCE(3)\n#define GI_COUNTING_ONCE_MASK\t\tGI_COUNTING_ONCE(3)\n#define GI_LOADING_ON_TC\t\tBIT(12)\n#define GI_GATE_POL_INVERT\t\tBIT(13)\n#define GI_LOADING_ON_GATE\t\tBIT(14)\n#define GI_RELOAD_SRC_SWITCHING\t\tBIT(15)\n#define NITIO_LOADA_REG(x)\t\t(NITIO_G0_LOADA + (x))\n#define NITIO_LOADB_REG(x)\t\t(NITIO_G0_LOADB + (x))\n#define NITIO_INPUT_SEL_REG(x)\t\t(NITIO_G0_INPUT_SEL + (x))\n#define GI_READ_ACKS_IRQ\t\tBIT(0)\n#define GI_WRITE_ACKS_IRQ\t\tBIT(1)\n#define GI_BITS_TO_SRC(x)\t\t(((x) >> 2) & 0x1f)\n#define GI_SRC_SEL(x)\t\t\t(((x) & 0x1f) << 2)\n#define GI_SRC_SEL_MASK\t\t\tGI_SRC_SEL(0x1f)\n#define GI_BITS_TO_GATE(x)\t\t(((x) >> 7) & 0x1f)\n#define GI_GATE_SEL(x)\t\t\t(((x) & 0x1f) << 7)\n#define GI_GATE_SEL_MASK\t\tGI_GATE_SEL(0x1f)\n#define GI_GATE_SEL_LOAD_SRC\t\tBIT(12)\n#define GI_OR_GATE\t\t\tBIT(13)\n#define GI_OUTPUT_POL_INVERT\t\tBIT(14)\n#define GI_SRC_POL_INVERT\t\tBIT(15)\n#define NITIO_CNT_MODE_REG(x)\t\t(NITIO_G0_CNT_MODE + (x))\n#define GI_CNT_MODE(x)\t\t\t(((x) & 0x7) << 0)\n#define GI_CNT_MODE_NORMAL\t\tGI_CNT_MODE(0)\n#define GI_CNT_MODE_QUADX1\t\tGI_CNT_MODE(1)\n#define GI_CNT_MODE_QUADX2\t\tGI_CNT_MODE(2)\n#define GI_CNT_MODE_QUADX4\t\tGI_CNT_MODE(3)\n#define GI_CNT_MODE_TWO_PULSE\t\tGI_CNT_MODE(4)\n#define GI_CNT_MODE_SYNC_SRC\t\tGI_CNT_MODE(6)\n#define GI_CNT_MODE_MASK\t\tGI_CNT_MODE(7)\n#define GI_INDEX_MODE\t\t\tBIT(4)\n#define GI_INDEX_PHASE(x)\t\t(((x) & 0x3) << 5)\n#define GI_INDEX_PHASE_MASK\t\tGI_INDEX_PHASE(3)\n#define GI_HW_ARM_ENA\t\t\tBIT(7)\n#define GI_HW_ARM_SEL(x)\t\t((x) << 8)\n#define GI_660X_HW_ARM_SEL_MASK\t\tGI_HW_ARM_SEL(0x7)\n#define GI_M_HW_ARM_SEL_MASK\t\tGI_HW_ARM_SEL(0x1f)\n#define GI_660X_PRESCALE_X8\t\tBIT(12)\n#define GI_M_PRESCALE_X8\t\tBIT(13)\n#define GI_660X_ALT_SYNC\t\tBIT(13)\n#define GI_M_ALT_SYNC\t\t\tBIT(14)\n#define GI_660X_PRESCALE_X2\t\tBIT(14)\n#define GI_M_PRESCALE_X2\t\tBIT(15)\n#define NITIO_GATE2_REG(x)\t\t(NITIO_G0_GATE2 + (x))\n#define GI_GATE2_MODE\t\t\tBIT(0)\n#define GI_BITS_TO_GATE2(x)\t\t(((x) >> 7) & 0x1f)\n#define GI_GATE2_SEL(x)\t\t\t(((x) & 0x1f) << 7)\n#define GI_GATE2_SEL_MASK\t\tGI_GATE2_SEL(0x1f)\n#define GI_GATE2_POL_INVERT\t\tBIT(13)\n#define GI_GATE2_SUBSEL\t\t\tBIT(14)\n#define GI_SRC_SUBSEL\t\t\tBIT(15)\n#define NITIO_SHARED_STATUS_REG(x)\t(NITIO_G01_STATUS + ((x) / 2))\n#define GI_SAVE(x)\t\t\t(((x) % 2) ? BIT(1) : BIT(0))\n#define GI_COUNTING(x)\t\t\t(((x) % 2) ? BIT(3) : BIT(2))\n#define GI_NEXT_LOAD_SRC(x)\t\t(((x) % 2) ? BIT(5) : BIT(4))\n#define GI_STALE_DATA(x)\t\t(((x) % 2) ? BIT(7) : BIT(6))\n#define GI_ARMED(x)\t\t\t(((x) % 2) ? BIT(9) : BIT(8))\n#define GI_NO_LOAD_BETWEEN_GATES(x)\t(((x) % 2) ? BIT(11) : BIT(10))\n#define GI_TC_ERROR(x)\t\t\t(((x) % 2) ? BIT(13) : BIT(12))\n#define GI_GATE_ERROR(x)\t\t(((x) % 2) ? BIT(15) : BIT(14))\n#define NITIO_RESET_REG(x)\t\t(NITIO_G01_RESET + ((x) / 2))\n#define GI_RESET(x)\t\t\tBIT(2 + ((x) % 2))\n#define NITIO_STATUS1_REG(x)\t\t(NITIO_G01_STATUS1 + ((x) / 2))\n#define NITIO_STATUS2_REG(x)\t\t(NITIO_G01_STATUS2 + ((x) / 2))\n#define GI_OUTPUT(x)\t\t\t(((x) % 2) ? BIT(1) : BIT(0))\n#define GI_HW_SAVE(x)\t\t\t(((x) % 2) ? BIT(13) : BIT(12))\n#define GI_PERMANENT_STALE(x)\t\t(((x) % 2) ? BIT(15) : BIT(14))\n#define NITIO_DMA_CFG_REG(x)\t\t(NITIO_G0_DMA_CFG + (x))\n#define GI_DMA_ENABLE\t\t\tBIT(0)\n#define GI_DMA_WRITE\t\t\tBIT(1)\n#define GI_DMA_INT_ENA\t\t\tBIT(2)\n#define GI_DMA_RESET\t\t\tBIT(3)\n#define GI_DMA_BANKSW_ERROR\t\tBIT(4)\n#define NITIO_DMA_STATUS_REG(x)\t\t(NITIO_G0_DMA_STATUS + (x))\n#define GI_DMA_READBANK\t\t\tBIT(13)\n#define GI_DRQ_ERROR\t\t\tBIT(14)\n#define GI_DRQ_STATUS\t\t\tBIT(15)\n#define NITIO_ABZ_REG(x)\t\t(NITIO_G0_ABZ + (x))\n#define NITIO_INT_ACK_REG(x)\t\t(NITIO_G0_INT_ACK + (x))\n#define GI_GATE_ERROR_CONFIRM(x)\t(((x) % 2) ? BIT(1) : BIT(5))\n#define GI_TC_ERROR_CONFIRM(x)\t\t(((x) % 2) ? BIT(2) : BIT(6))\n#define GI_TC_INTERRUPT_ACK\t\tBIT(14)\n#define GI_GATE_INTERRUPT_ACK\t\tBIT(15)\n#define NITIO_STATUS_REG(x)\t\t(NITIO_G0_STATUS + (x))\n#define GI_GATE_INTERRUPT\t\tBIT(2)\n#define GI_TC\t\t\t\tBIT(3)\n#define GI_INTERRUPT\t\t\tBIT(15)\n#define NITIO_INT_ENA_REG(x)\t\t(NITIO_G0_INT_ENA + (x))\n#define GI_TC_INTERRUPT_ENABLE(x)\t(((x) % 2) ? BIT(9) : BIT(6))\n#define GI_GATE_INTERRUPT_ENABLE(x)\t(((x) % 2) ? BIT(10) : BIT(8))\n\nvoid ni_tio_write(struct ni_gpct *counter, unsigned int value,\n\t\t  enum ni_gpct_register);\nunsigned int ni_tio_read(struct ni_gpct *counter, enum ni_gpct_register);\n\nstatic inline bool\nni_tio_counting_mode_registers_present(const struct ni_gpct_device *counter_dev)\n{\n\t \n\treturn counter_dev->variant != ni_gpct_variant_e_series;\n}\n\nvoid ni_tio_set_bits(struct ni_gpct *counter, enum ni_gpct_register reg,\n\t\t     unsigned int mask, unsigned int value);\nunsigned int ni_tio_get_soft_copy(const struct ni_gpct *counter,\n\t\t\t\t  enum ni_gpct_register reg);\n\nint ni_tio_arm(struct ni_gpct *counter, bool arm, unsigned int start_trigger);\nint ni_tio_set_gate_src(struct ni_gpct *counter, unsigned int gate,\n\t\t\tunsigned int src);\nint ni_tio_set_gate_src_raw(struct ni_gpct *counter, unsigned int gate,\n\t\t\t    unsigned int src);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}