{
  "module_name": "interface.h",
  "hash_id": "f884ebfddc28b8c9ed607b8fc00ad4e7555878e5e5d3485738a0cd8fbe6e89ef",
  "original_prompt": "Ingested from linux-6.6.14/sound/aoa/soundbus/i2sbus/interface.h",
  "human_readable_source": " \n \n#ifndef __I2SBUS_INTERFACE_H\n#define __I2SBUS_INTERFACE_H\n\n \n\n#define __PAD(m,n) u8 __pad##m[n]\n#define _PAD(line, n) __PAD(line, n)\n#define PAD(n) _PAD(__LINE__, (n))\nstruct i2s_interface_regs {\n\t__le32 intr_ctl;\t \n\tPAD(12);\n\t__le32 serial_format;\t \n\tPAD(12);\n\t__le32 codec_msg_out;\t \n\tPAD(12);\n\t__le32 codec_msg_in;\t \n\tPAD(12);\n\t__le32 frame_count;\t \n\tPAD(12);\n\t__le32 frame_match;\t \n\tPAD(12);\n\t__le32 data_word_sizes;\t \n\tPAD(12);\n\t__le32 peak_level_sel;\t \n\tPAD(12);\n\t__le32 peak_level_in0;\t \n\tPAD(12);\n\t__le32 peak_level_in1;\t \n\tPAD(12);\n\t \n}  __attribute__((__packed__));\n\n \n#define I2S_REG_INTR_CTL\t\t0x00\n#\tdefine I2S_INT_FRAME_COUNT\t\t(1<<31)\n#\tdefine I2S_PENDING_FRAME_COUNT\t\t(1<<30)\n#\tdefine I2S_INT_MESSAGE_FLAG\t\t(1<<29)\n#\tdefine I2S_PENDING_MESSAGE_FLAG\t\t(1<<28)\n#\tdefine I2S_INT_NEW_PEAK\t\t\t(1<<27)\n#\tdefine I2S_PENDING_NEW_PEAK\t\t(1<<26)\n#\tdefine I2S_INT_CLOCKS_STOPPED\t\t(1<<25)\n#\tdefine I2S_PENDING_CLOCKS_STOPPED\t(1<<24)\n#\tdefine I2S_INT_EXTERNAL_SYNC_ERROR\t(1<<23)\n#\tdefine I2S_PENDING_EXTERNAL_SYNC_ERROR\t(1<<22)\n#\tdefine I2S_INT_EXTERNAL_SYNC_OK\t\t(1<<21)\n#\tdefine I2S_PENDING_EXTERNAL_SYNC_OK\t(1<<20)\n#\tdefine I2S_INT_NEW_SAMPLE_RATE\t\t(1<<19)\n#\tdefine I2S_PENDING_NEW_SAMPLE_RATE\t(1<<18)\n#\tdefine I2S_INT_STATUS_FLAG\t\t(1<<17)\n#\tdefine I2S_PENDING_STATUS_FLAG\t\t(1<<16)\n\n \n#define I2S_REG_SERIAL_FORMAT\t\t0x10\n \n#\tdefine I2S_SF_CLOCK_SOURCE_SHIFT\t30\n#\tdefine I2S_SF_CLOCK_SOURCE_MASK\t\t(3<<I2S_SF_CLOCK_SOURCE_SHIFT)\n#\tdefine I2S_SF_CLOCK_SOURCE_18MHz\t(0<<I2S_SF_CLOCK_SOURCE_SHIFT)\n#\tdefine I2S_SF_CLOCK_SOURCE_45MHz\t(1<<I2S_SF_CLOCK_SOURCE_SHIFT)\n#\tdefine I2S_SF_CLOCK_SOURCE_49MHz\t(2<<I2S_SF_CLOCK_SOURCE_SHIFT)\n \n#define I2S_CLOCK_SPEED_18MHz\t18432000\n#define I2S_CLOCK_SPEED_45MHz\t45158400\n#define I2S_CLOCK_SPEED_49MHz\t49152000\n \n#\tdefine I2S_SF_MCLKDIV_SHIFT\t\t24\n#\tdefine I2S_SF_MCLKDIV_MASK\t\t(0x1F<<I2S_SF_MCLKDIV_SHIFT)\n#\tdefine I2S_SF_MCLKDIV_1\t\t\t(0x14<<I2S_SF_MCLKDIV_SHIFT)\n#\tdefine I2S_SF_MCLKDIV_3\t\t\t(0x13<<I2S_SF_MCLKDIV_SHIFT)\n#\tdefine I2S_SF_MCLKDIV_5\t\t\t(0x12<<I2S_SF_MCLKDIV_SHIFT)\n#\tdefine I2S_SF_MCLKDIV_14\t\t(0x0E<<I2S_SF_MCLKDIV_SHIFT)\n#\tdefine I2S_SF_MCLKDIV_OTHER(div)\t(((div/2-1)<<I2S_SF_MCLKDIV_SHIFT)&I2S_SF_MCLKDIV_MASK)\nstatic inline int i2s_sf_mclkdiv(int div, int *out)\n{\n\tint d;\n\n\tswitch(div) {\n\tcase 1: *out |= I2S_SF_MCLKDIV_1; return 0;\n\tcase 3: *out |= I2S_SF_MCLKDIV_3; return 0;\n\tcase 5: *out |= I2S_SF_MCLKDIV_5; return 0;\n\tcase 14: *out |= I2S_SF_MCLKDIV_14; return 0;\n\tdefault:\n\t\tif (div%2) return -1;\n\t\td = div/2-1;\n\t\tif (d == 0x14 || d == 0x13 || d == 0x12 || d == 0x0E)\n\t\t\treturn -1;\n\t\t*out |= I2S_SF_MCLKDIV_OTHER(div);\n\t\treturn 0;\n\t}\n}\n \n#\tdefine I2S_SF_SCLKDIV_SHIFT\t\t20\n#\tdefine I2S_SF_SCLKDIV_MASK\t\t(0xF<<I2S_SF_SCLKDIV_SHIFT)\n#\tdefine I2S_SF_SCLKDIV_1\t\t\t(8<<I2S_SF_SCLKDIV_SHIFT)\n#\tdefine I2S_SF_SCLKDIV_3\t\t\t(9<<I2S_SF_SCLKDIV_SHIFT)\n#\tdefine I2S_SF_SCLKDIV_OTHER(div)\t(((div/2-1)<<I2S_SF_SCLKDIV_SHIFT)&I2S_SF_SCLKDIV_MASK)\nstatic inline int i2s_sf_sclkdiv(int div, int *out)\n{\n\tint d;\n\n\tswitch(div) {\n\tcase 1: *out |= I2S_SF_SCLKDIV_1; return 0;\n\tcase 3: *out |= I2S_SF_SCLKDIV_3; return 0;\n\tdefault:\n\t\tif (div%2) return -1;\n\t\td = div/2-1;\n\t\tif (d == 8 || d == 9) return -1;\n\t\t*out |= I2S_SF_SCLKDIV_OTHER(div);\n\t\treturn 0;\n\t}\n}\n#\tdefine I2S_SF_SCLK_MASTER\t\t(1<<19)\n \n#\tdefine I2S_SF_SERIAL_FORMAT_SHIFT\t16\n#\tdefine I2S_SF_SERIAL_FORMAT_MASK\t(7<<I2S_SF_SERIAL_FORMAT_SHIFT)\n#\tdefine I2S_SF_SERIAL_FORMAT_SONY\t(0<<I2S_SF_SERIAL_FORMAT_SHIFT)\n#\tdefine I2S_SF_SERIAL_FORMAT_I2S_64X\t(1<<I2S_SF_SERIAL_FORMAT_SHIFT)\n#\tdefine I2S_SF_SERIAL_FORMAT_I2S_32X\t(2<<I2S_SF_SERIAL_FORMAT_SHIFT)\n#\tdefine I2S_SF_SERIAL_FORMAT_I2S_DAV\t(4<<I2S_SF_SERIAL_FORMAT_SHIFT)\n#\tdefine I2S_SF_SERIAL_FORMAT_I2S_SILABS\t(5<<I2S_SF_SERIAL_FORMAT_SHIFT)\n \n#\tdefine I2S_SF_EXT_SAMPLE_FREQ_INT_SHIFT\t12\n#\tdefine I2S_SF_EXT_SAMPLE_FREQ_INT_MASK\t(0xF<<I2S_SF_SAMPLE_FREQ_INT_SHIFT)\n \n#\tdefine I2S_SF_EXT_SAMPLE_FREQ_MASK\t0xFFF\n\n \n#define I2S_REG_CODEC_MSG_OUT\t\t0x20\n\n \n#define I2S_REG_CODEC_MSG_IN\t\t0x30\n\n \n#define I2S_REG_FRAME_COUNT\t\t0x40\n\n \n#define I2S_REG_FRAME_MATCH\t\t0x50\n\n \n#define I2S_REG_DATA_WORD_SIZES\t\t0x60\n \n#\tdefine I2S_DWS_NUM_CHANNELS_IN_SHIFT\t24\n#\tdefine I2S_DWS_NUM_CHANNELS_IN_MASK\t(0x1F<<I2S_DWS_NUM_CHANNELS_IN_SHIFT)\n \n#\tdefine I2S_DWS_DATA_IN_SIZE_SHIFT\t16\n#\tdefine I2S_DWS_DATA_IN_16BIT\t\t(0<<I2S_DWS_DATA_IN_SIZE_SHIFT)\n#\tdefine I2S_DWS_DATA_IN_24BIT\t\t(3<<I2S_DWS_DATA_IN_SIZE_SHIFT)\n \n#\tdefine I2S_DWS_NUM_CHANNELS_OUT_SHIFT\t8\n#\tdefine I2S_DWS_NUM_CHANNELS_OUT_MASK\t(0x1F<<I2S_DWS_NUM_CHANNELS_OUT_SHIFT)\n \n#\tdefine I2S_DWS_DATA_OUT_SIZE_SHIFT\t0\n#\tdefine I2S_DWS_DATA_OUT_16BIT\t\t(0<<I2S_DWS_DATA_OUT_SIZE_SHIFT)\n#\tdefine I2S_DWS_DATA_OUT_24BIT\t\t(3<<I2S_DWS_DATA_OUT_SIZE_SHIFT)\n\n\n \n#define I2S_REG_PEAK_LEVEL_SEL\t\t0x70\n\n \n#define I2S_REG_PEAK_LEVEL_IN0\t\t0x80\n\n \n#define I2S_REG_PEAK_LEVEL_IN1\t\t0x90\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}