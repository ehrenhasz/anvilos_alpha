{
  "module_name": "sun50i-codec-analog.c",
  "hash_id": "2dc651a1c9f255bf5f2f7b9b7000028bbcf0d6a0b65e9d47b831933a58087bad",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sunxi/sun50i-codec-analog.c",
  "human_readable_source": "\n \n\n#include <linux/io.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/of.h>\n#include <linux/of_device.h>\n#include <linux/platform_device.h>\n#include <linux/regmap.h>\n\n#include <sound/soc.h>\n#include <sound/soc-dapm.h>\n#include <sound/tlv.h>\n\n#include \"sun8i-adda-pr-regmap.h\"\n\n \n#define SUN50I_ADDA_HP_CTRL\t\t0x00\n#define SUN50I_ADDA_HP_CTRL_PA_CLK_GATE\t\t7\n#define SUN50I_ADDA_HP_CTRL_HPPA_EN\t\t6\n#define SUN50I_ADDA_HP_CTRL_HPVOL\t\t0\n\n#define SUN50I_ADDA_OL_MIX_CTRL\t\t0x01\n#define SUN50I_ADDA_OL_MIX_CTRL_MIC1\t\t6\n#define SUN50I_ADDA_OL_MIX_CTRL_MIC2\t\t5\n#define SUN50I_ADDA_OL_MIX_CTRL_PHONE\t\t4\n#define SUN50I_ADDA_OL_MIX_CTRL_PHONEN\t\t3\n#define SUN50I_ADDA_OL_MIX_CTRL_LINEINL\t\t2\n#define SUN50I_ADDA_OL_MIX_CTRL_DACL\t\t1\n#define SUN50I_ADDA_OL_MIX_CTRL_DACR\t\t0\n\n#define SUN50I_ADDA_OR_MIX_CTRL\t\t0x02\n#define SUN50I_ADDA_OR_MIX_CTRL_MIC1\t\t6\n#define SUN50I_ADDA_OR_MIX_CTRL_MIC2\t\t5\n#define SUN50I_ADDA_OR_MIX_CTRL_PHONE\t\t4\n#define SUN50I_ADDA_OR_MIX_CTRL_PHONEP\t\t3\n#define SUN50I_ADDA_OR_MIX_CTRL_LINEINR\t\t2\n#define SUN50I_ADDA_OR_MIX_CTRL_DACR\t\t1\n#define SUN50I_ADDA_OR_MIX_CTRL_DACL\t\t0\n\n#define SUN50I_ADDA_EARPIECE_CTRL0\t0x03\n#define SUN50I_ADDA_EARPIECE_CTRL0_EAR_RAMP_TIME\t4\n#define SUN50I_ADDA_EARPIECE_CTRL0_ESPSR\t\t0\n\n#define SUN50I_ADDA_EARPIECE_CTRL1\t0x04\n#define SUN50I_ADDA_EARPIECE_CTRL1_ESPPA_EN\t7\n#define SUN50I_ADDA_EARPIECE_CTRL1_ESPPA_MUTE\t6\n#define SUN50I_ADDA_EARPIECE_CTRL1_ESP_VOL\t0\n\n#define SUN50I_ADDA_LINEOUT_CTRL0\t0x05\n#define SUN50I_ADDA_LINEOUT_CTRL0_LEN\t\t7\n#define SUN50I_ADDA_LINEOUT_CTRL0_REN\t\t6\n#define SUN50I_ADDA_LINEOUT_CTRL0_LSRC_SEL\t5\n#define SUN50I_ADDA_LINEOUT_CTRL0_RSRC_SEL\t4\n\n#define SUN50I_ADDA_LINEOUT_CTRL1\t0x06\n#define SUN50I_ADDA_LINEOUT_CTRL1_VOL\t\t0\n\n#define SUN50I_ADDA_MIC1_CTRL\t\t0x07\n#define SUN50I_ADDA_MIC1_CTRL_MIC1G\t\t4\n#define SUN50I_ADDA_MIC1_CTRL_MIC1AMPEN\t\t3\n#define SUN50I_ADDA_MIC1_CTRL_MIC1BOOST\t\t0\n\n#define SUN50I_ADDA_MIC2_CTRL\t\t0x08\n#define SUN50I_ADDA_MIC2_CTRL_MIC2G\t\t4\n#define SUN50I_ADDA_MIC2_CTRL_MIC2AMPEN\t\t3\n#define SUN50I_ADDA_MIC2_CTRL_MIC2BOOST\t\t0\n\n#define SUN50I_ADDA_LINEIN_CTRL\t\t0x09\n#define SUN50I_ADDA_LINEIN_CTRL_LINEING\t\t0\n\n#define SUN50I_ADDA_MIX_DAC_CTRL\t0x0a\n#define SUN50I_ADDA_MIX_DAC_CTRL_DACAREN\t7\n#define SUN50I_ADDA_MIX_DAC_CTRL_DACALEN\t6\n#define SUN50I_ADDA_MIX_DAC_CTRL_RMIXEN\t\t5\n#define SUN50I_ADDA_MIX_DAC_CTRL_LMIXEN\t\t4\n#define SUN50I_ADDA_MIX_DAC_CTRL_RHPPAMUTE\t3\n#define SUN50I_ADDA_MIX_DAC_CTRL_LHPPAMUTE\t2\n#define SUN50I_ADDA_MIX_DAC_CTRL_RHPIS\t\t1\n#define SUN50I_ADDA_MIX_DAC_CTRL_LHPIS\t\t0\n\n#define SUN50I_ADDA_L_ADCMIX_SRC\t0x0b\n#define SUN50I_ADDA_L_ADCMIX_SRC_MIC1\t\t6\n#define SUN50I_ADDA_L_ADCMIX_SRC_MIC2\t\t5\n#define SUN50I_ADDA_L_ADCMIX_SRC_PHONE\t\t4\n#define SUN50I_ADDA_L_ADCMIX_SRC_PHONEN\t\t3\n#define SUN50I_ADDA_L_ADCMIX_SRC_LINEINL\t2\n#define SUN50I_ADDA_L_ADCMIX_SRC_OMIXRL\t\t1\n#define SUN50I_ADDA_L_ADCMIX_SRC_OMIXRR\t\t0\n\n#define SUN50I_ADDA_R_ADCMIX_SRC\t0x0c\n#define SUN50I_ADDA_R_ADCMIX_SRC_MIC1\t\t6\n#define SUN50I_ADDA_R_ADCMIX_SRC_MIC2\t\t5\n#define SUN50I_ADDA_R_ADCMIX_SRC_PHONE\t\t4\n#define SUN50I_ADDA_R_ADCMIX_SRC_PHONEP\t\t3\n#define SUN50I_ADDA_R_ADCMIX_SRC_LINEINR\t2\n#define SUN50I_ADDA_R_ADCMIX_SRC_OMIXR\t\t1\n#define SUN50I_ADDA_R_ADCMIX_SRC_OMIXL\t\t0\n\n#define SUN50I_ADDA_ADC_CTRL\t\t0x0d\n#define SUN50I_ADDA_ADC_CTRL_ADCREN\t\t7\n#define SUN50I_ADDA_ADC_CTRL_ADCLEN\t\t6\n#define SUN50I_ADDA_ADC_CTRL_ADCG\t\t0\n\n#define SUN50I_ADDA_HS_MBIAS_CTRL\t0x0e\n#define SUN50I_ADDA_HS_MBIAS_CTRL_MMICBIASEN\t7\n\n#define SUN50I_ADDA_JACK_MIC_CTRL\t0x1d\n#define SUN50I_ADDA_JACK_MIC_CTRL_INNERRESEN\t6\n#define SUN50I_ADDA_JACK_MIC_CTRL_HMICBIASEN\t5\n\n \nstatic const struct snd_kcontrol_new sun50i_a64_codec_mixer_controls[] = {\n\tSOC_DAPM_DOUBLE_R(\"Mic1 Playback Switch\",\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OR_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL_MIC1, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Mic2 Playback Switch\",\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OR_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL_MIC2, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Line In Playback Switch\",\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OR_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL_LINEINL, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"DAC Playback Switch\",\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OR_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL_DACL, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"DAC Reversed Playback Switch\",\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OR_MIX_CTRL,\n\t\t\t  SUN50I_ADDA_OL_MIX_CTRL_DACR, 1, 0),\n};\n\n \nstatic const struct snd_kcontrol_new sun50i_codec_adc_mixer_controls[] = {\n\tSOC_DAPM_DOUBLE_R(\"Mic1 Capture Switch\",\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_R_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC_MIC1, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Mic2 Capture Switch\",\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_R_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC_MIC2, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Line In Capture Switch\",\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_R_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC_LINEINL, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Mixer Capture Switch\",\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_R_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC_OMIXRL, 1, 0),\n\tSOC_DAPM_DOUBLE_R(\"Mixer Reversed Capture Switch\",\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_R_ADCMIX_SRC,\n\t\t\t  SUN50I_ADDA_L_ADCMIX_SRC_OMIXRR, 1, 0),\n};\n\nstatic const DECLARE_TLV_DB_SCALE(sun50i_codec_out_mixer_pregain_scale,\n\t\t\t\t  -450, 150, 0);\nstatic const DECLARE_TLV_DB_RANGE(sun50i_codec_mic_gain_scale,\n\t0, 0, TLV_DB_SCALE_ITEM(0, 0, 0),\n\t1, 7, TLV_DB_SCALE_ITEM(2400, 300, 0),\n);\n\nstatic const DECLARE_TLV_DB_SCALE(sun50i_codec_hp_vol_scale, -6300, 100, 1);\n\nstatic const DECLARE_TLV_DB_RANGE(sun50i_codec_lineout_vol_scale,\n\t0, 1, TLV_DB_SCALE_ITEM(TLV_DB_GAIN_MUTE, 0, 1),\n\t2, 31, TLV_DB_SCALE_ITEM(-4350, 150, 0),\n);\n\nstatic const DECLARE_TLV_DB_RANGE(sun50i_codec_earpiece_vol_scale,\n\t0, 1, TLV_DB_SCALE_ITEM(TLV_DB_GAIN_MUTE, 0, 1),\n\t2, 31, TLV_DB_SCALE_ITEM(-4350, 150, 0),\n);\n\n \nstatic const struct snd_kcontrol_new sun50i_a64_codec_controls[] = {\n\tSOC_SINGLE_TLV(\"Headphone Playback Volume\",\n\t\t       SUN50I_ADDA_HP_CTRL,\n\t\t       SUN50I_ADDA_HP_CTRL_HPVOL, 0x3f, 0,\n\t\t       sun50i_codec_hp_vol_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"Mic1 Playback Volume\", SUN50I_ADDA_MIC1_CTRL,\n\t\t       SUN50I_ADDA_MIC1_CTRL_MIC1G,\n\t\t       0x7, 0, sun50i_codec_out_mixer_pregain_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"Mic1 Boost Volume\", SUN50I_ADDA_MIC1_CTRL,\n\t\t       SUN50I_ADDA_MIC1_CTRL_MIC1BOOST, 0x7, 0,\n\t\t       sun50i_codec_mic_gain_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"Mic2 Playback Volume\",\n\t\t       SUN50I_ADDA_MIC2_CTRL, SUN50I_ADDA_MIC2_CTRL_MIC2G,\n\t\t       0x7, 0, sun50i_codec_out_mixer_pregain_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"Mic2 Boost Volume\", SUN50I_ADDA_MIC2_CTRL,\n\t\t       SUN50I_ADDA_MIC2_CTRL_MIC2BOOST, 0x7, 0,\n\t\t       sun50i_codec_mic_gain_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"ADC Gain Capture Volume\", SUN50I_ADDA_ADC_CTRL,\n\t\t       SUN50I_ADDA_ADC_CTRL_ADCG, 0x7, 0,\n\t\t       sun50i_codec_out_mixer_pregain_scale),\n\n\t \n\tSOC_SINGLE_TLV(\"Line In Playback Volume\", SUN50I_ADDA_LINEIN_CTRL,\n\t\t       SUN50I_ADDA_LINEIN_CTRL_LINEING,\n\t\t       0x7, 0, sun50i_codec_out_mixer_pregain_scale),\n\n\tSOC_SINGLE_TLV(\"Line Out Playback Volume\",\n\t\t       SUN50I_ADDA_LINEOUT_CTRL1,\n\t\t       SUN50I_ADDA_LINEOUT_CTRL1_VOL, 0x1f, 0,\n\t\t       sun50i_codec_lineout_vol_scale),\n\n\tSOC_SINGLE_TLV(\"Earpiece Playback Volume\",\n\t\t       SUN50I_ADDA_EARPIECE_CTRL1,\n\t\t       SUN50I_ADDA_EARPIECE_CTRL1_ESP_VOL, 0x1f, 0,\n\t\t       sun50i_codec_earpiece_vol_scale),\n};\n\nstatic const char * const sun50i_codec_hp_src_enum_text[] = {\n\t\"DAC\", \"Mixer\",\n};\n\nstatic SOC_ENUM_DOUBLE_DECL(sun50i_codec_hp_src_enum,\n\t\t\t    SUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\t    SUN50I_ADDA_MIX_DAC_CTRL_LHPIS,\n\t\t\t    SUN50I_ADDA_MIX_DAC_CTRL_RHPIS,\n\t\t\t    sun50i_codec_hp_src_enum_text);\n\nstatic const struct snd_kcontrol_new sun50i_codec_hp_src[] = {\n\tSOC_DAPM_ENUM(\"Headphone Source Playback Route\",\n\t\t      sun50i_codec_hp_src_enum),\n};\n\nstatic const struct snd_kcontrol_new sun50i_codec_hp_switch =\n\tSOC_DAPM_DOUBLE(\"Headphone Playback Switch\",\n\t\t\tSUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\tSUN50I_ADDA_MIX_DAC_CTRL_LHPPAMUTE,\n\t\t\tSUN50I_ADDA_MIX_DAC_CTRL_RHPPAMUTE, 1, 0);\n\nstatic const char * const sun50i_codec_lineout_src_enum_text[] = {\n\t\"Stereo\", \"Mono Differential\",\n};\n\nstatic SOC_ENUM_DOUBLE_DECL(sun50i_codec_lineout_src_enum,\n\t\t\t    SUN50I_ADDA_LINEOUT_CTRL0,\n\t\t\t    SUN50I_ADDA_LINEOUT_CTRL0_LSRC_SEL,\n\t\t\t    SUN50I_ADDA_LINEOUT_CTRL0_RSRC_SEL,\n\t\t\t    sun50i_codec_lineout_src_enum_text);\n\nstatic const struct snd_kcontrol_new sun50i_codec_lineout_src[] = {\n\tSOC_DAPM_ENUM(\"Line Out Source Playback Route\",\n\t\t      sun50i_codec_lineout_src_enum),\n};\n\nstatic const struct snd_kcontrol_new sun50i_codec_lineout_switch =\n\tSOC_DAPM_DOUBLE(\"Line Out Playback Switch\",\n\t\t\tSUN50I_ADDA_LINEOUT_CTRL0,\n\t\t\tSUN50I_ADDA_LINEOUT_CTRL0_LEN,\n\t\t\tSUN50I_ADDA_LINEOUT_CTRL0_REN, 1, 0);\n\nstatic const char * const sun50i_codec_earpiece_src_enum_text[] = {\n\t\"DACR\", \"DACL\", \"Right Mixer\", \"Left Mixer\",\n};\n\nstatic SOC_ENUM_SINGLE_DECL(sun50i_codec_earpiece_src_enum,\n\t\t\t    SUN50I_ADDA_EARPIECE_CTRL0,\n\t\t\t    SUN50I_ADDA_EARPIECE_CTRL0_ESPSR,\n\t\t\t    sun50i_codec_earpiece_src_enum_text);\n\nstatic const struct snd_kcontrol_new sun50i_codec_earpiece_src[] = {\n\tSOC_DAPM_ENUM(\"Earpiece Source Playback Route\",\n\t\t      sun50i_codec_earpiece_src_enum),\n};\n\nstatic const struct snd_kcontrol_new sun50i_codec_earpiece_switch[] = {\n\tSOC_DAPM_SINGLE(\"Earpiece Playback Switch\",\n\t\t\tSUN50I_ADDA_EARPIECE_CTRL1,\n\t\t\tSUN50I_ADDA_EARPIECE_CTRL1_ESPPA_MUTE, 1, 0),\n};\n\nstatic const struct snd_soc_dapm_widget sun50i_a64_codec_widgets[] = {\n\t \n\tSND_SOC_DAPM_DAC(\"Left DAC\", NULL, SUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\t SUN50I_ADDA_MIX_DAC_CTRL_DACALEN, 0),\n\tSND_SOC_DAPM_DAC(\"Right DAC\", NULL, SUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\t SUN50I_ADDA_MIX_DAC_CTRL_DACAREN, 0),\n\t \n\tSND_SOC_DAPM_ADC(\"Left ADC\", NULL, SUN50I_ADDA_ADC_CTRL,\n\t\t\t SUN50I_ADDA_ADC_CTRL_ADCLEN, 0),\n\tSND_SOC_DAPM_ADC(\"Right ADC\", NULL, SUN50I_ADDA_ADC_CTRL,\n\t\t\t SUN50I_ADDA_ADC_CTRL_ADCREN, 0),\n\t \n\n\tSND_SOC_DAPM_REGULATOR_SUPPLY(\"cpvdd\", 0, 0),\n\tSND_SOC_DAPM_MUX(\"Left Headphone Source\",\n\t\t\t SND_SOC_NOPM, 0, 0, sun50i_codec_hp_src),\n\tSND_SOC_DAPM_MUX(\"Right Headphone Source\",\n\t\t\t SND_SOC_NOPM, 0, 0, sun50i_codec_hp_src),\n\tSND_SOC_DAPM_SWITCH(\"Left Headphone Switch\",\n\t\t\t    SND_SOC_NOPM, 0, 0, &sun50i_codec_hp_switch),\n\tSND_SOC_DAPM_SWITCH(\"Right Headphone Switch\",\n\t\t\t    SND_SOC_NOPM, 0, 0, &sun50i_codec_hp_switch),\n\tSND_SOC_DAPM_OUT_DRV(\"Left Headphone Amp\",\n\t\t\t     SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_OUT_DRV(\"Right Headphone Amp\",\n\t\t\t     SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_SUPPLY(\"Headphone Amp\", SUN50I_ADDA_HP_CTRL,\n\t\t\t     SUN50I_ADDA_HP_CTRL_HPPA_EN, 0, NULL, 0),\n\tSND_SOC_DAPM_OUTPUT(\"HP\"),\n\n\tSND_SOC_DAPM_MUX(\"Left Line Out Source\",\n\t\t\t SND_SOC_NOPM, 0, 0, sun50i_codec_lineout_src),\n\tSND_SOC_DAPM_MUX(\"Right Line Out Source\",\n\t\t\t SND_SOC_NOPM, 0, 0, sun50i_codec_lineout_src),\n\tSND_SOC_DAPM_SWITCH(\"Left Line Out Switch\",\n\t\t\t    SND_SOC_NOPM, 0, 0, &sun50i_codec_lineout_switch),\n\tSND_SOC_DAPM_SWITCH(\"Right Line Out Switch\",\n\t\t\t    SND_SOC_NOPM, 0, 0, &sun50i_codec_lineout_switch),\n\tSND_SOC_DAPM_OUTPUT(\"LINEOUT\"),\n\n\tSND_SOC_DAPM_MUX(\"Earpiece Source Playback Route\",\n\t\t\t SND_SOC_NOPM, 0, 0, sun50i_codec_earpiece_src),\n\tSOC_MIXER_NAMED_CTL_ARRAY(\"Earpiece Switch\",\n\t\t\t\t  SND_SOC_NOPM, 0, 0,\n\t\t\t\t  sun50i_codec_earpiece_switch),\n\tSND_SOC_DAPM_OUT_DRV(\"Earpiece Amp\", SUN50I_ADDA_EARPIECE_CTRL1,\n\t\t\t     SUN50I_ADDA_EARPIECE_CTRL1_ESPPA_EN, 0, NULL, 0),\n\tSND_SOC_DAPM_OUTPUT(\"EARPIECE\"),\n\n\t \n\tSND_SOC_DAPM_INPUT(\"MIC1\"),\n\n\t \n\tSND_SOC_DAPM_SUPPLY(\"MBIAS\", SUN50I_ADDA_HS_MBIAS_CTRL,\n\t\t\t    SUN50I_ADDA_HS_MBIAS_CTRL_MMICBIASEN,\n\t\t\t    0, NULL, 0),\n\n\t \n\tSND_SOC_DAPM_PGA(\"Mic1 Amplifier\", SUN50I_ADDA_MIC1_CTRL,\n\t\t\t SUN50I_ADDA_MIC1_CTRL_MIC1AMPEN, 0, NULL, 0),\n\n\t \n\tSND_SOC_DAPM_INPUT(\"MIC2\"),\n\n\t \n\tSND_SOC_DAPM_SUPPLY(\"HBIAS\", SUN50I_ADDA_JACK_MIC_CTRL,\n\t\t\t    SUN50I_ADDA_JACK_MIC_CTRL_HMICBIASEN,\n\t\t\t    0, NULL, 0),\n\n\t \n\tSND_SOC_DAPM_PGA(\"Mic2 Amplifier\", SUN50I_ADDA_MIC2_CTRL,\n\t\t\t SUN50I_ADDA_MIC2_CTRL_MIC2AMPEN, 0, NULL, 0),\n\n\t \n\tSND_SOC_DAPM_INPUT(\"LINEIN\"),\n\n\t \n\tSND_SOC_DAPM_MIXER(\"Left Mixer\", SUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\t   SUN50I_ADDA_MIX_DAC_CTRL_LMIXEN, 0,\n\t\t\t   sun50i_a64_codec_mixer_controls,\n\t\t\t   ARRAY_SIZE(sun50i_a64_codec_mixer_controls)),\n\tSND_SOC_DAPM_MIXER(\"Right Mixer\", SUN50I_ADDA_MIX_DAC_CTRL,\n\t\t\t   SUN50I_ADDA_MIX_DAC_CTRL_RMIXEN, 0,\n\t\t\t   sun50i_a64_codec_mixer_controls,\n\t\t\t   ARRAY_SIZE(sun50i_a64_codec_mixer_controls)),\n\tSND_SOC_DAPM_MIXER(\"Left ADC Mixer\", SND_SOC_NOPM, 0, 0,\n\t\t\t   sun50i_codec_adc_mixer_controls,\n\t\t\t   ARRAY_SIZE(sun50i_codec_adc_mixer_controls)),\n\tSND_SOC_DAPM_MIXER(\"Right ADC Mixer\", SND_SOC_NOPM, 0, 0,\n\t\t\t   sun50i_codec_adc_mixer_controls,\n\t\t\t   ARRAY_SIZE(sun50i_codec_adc_mixer_controls)),\n};\n\nstatic const struct snd_soc_dapm_route sun50i_a64_codec_routes[] = {\n\t \n\t{ \"Left Mixer\", \"Mic1 Playback Switch\", \"Mic1 Amplifier\" },\n\t{ \"Left Mixer\", \"Mic2 Playback Switch\", \"Mic2 Amplifier\" },\n\t{ \"Left Mixer\", \"Line In Playback Switch\", \"LINEIN\" },\n\t{ \"Left Mixer\", \"DAC Playback Switch\", \"Left DAC\" },\n\t{ \"Left Mixer\", \"DAC Reversed Playback Switch\", \"Right DAC\" },\n\n\t \n\t{ \"Right Mixer\", \"Mic1 Playback Switch\", \"Mic1 Amplifier\" },\n\t{ \"Right Mixer\", \"Mic2 Playback Switch\", \"Mic2 Amplifier\" },\n\t{ \"Right Mixer\", \"Line In Playback Switch\", \"LINEIN\" },\n\t{ \"Right Mixer\", \"DAC Playback Switch\", \"Right DAC\" },\n\t{ \"Right Mixer\", \"DAC Reversed Playback Switch\", \"Left DAC\" },\n\n\t \n\t{ \"Left ADC Mixer\", \"Mic1 Capture Switch\", \"Mic1 Amplifier\" },\n\t{ \"Left ADC Mixer\", \"Mic2 Capture Switch\", \"Mic2 Amplifier\" },\n\t{ \"Left ADC Mixer\", \"Line In Capture Switch\", \"LINEIN\" },\n\t{ \"Left ADC Mixer\", \"Mixer Capture Switch\", \"Left Mixer\" },\n\t{ \"Left ADC Mixer\", \"Mixer Reversed Capture Switch\", \"Right Mixer\" },\n\n\t \n\t{ \"Right ADC Mixer\", \"Mic1 Capture Switch\", \"Mic1 Amplifier\" },\n\t{ \"Right ADC Mixer\", \"Mic2 Capture Switch\", \"Mic2 Amplifier\" },\n\t{ \"Right ADC Mixer\", \"Line In Capture Switch\", \"LINEIN\" },\n\t{ \"Right ADC Mixer\", \"Mixer Capture Switch\", \"Right Mixer\" },\n\t{ \"Right ADC Mixer\", \"Mixer Reversed Capture Switch\", \"Left Mixer\" },\n\n\t \n\t{ \"Left ADC\", NULL, \"Left ADC Mixer\" },\n\t{ \"Right ADC\", NULL, \"Right ADC Mixer\" },\n\n\t \n\t{ \"Left Headphone Source\", \"DAC\", \"Left DAC\" },\n\t{ \"Left Headphone Source\", \"Mixer\", \"Left Mixer\" },\n\t{ \"Left Headphone Switch\", \"Headphone Playback Switch\", \"Left Headphone Source\" },\n\t{ \"Left Headphone Amp\", NULL, \"Left Headphone Switch\" },\n\t{ \"Left Headphone Amp\", NULL, \"Headphone Amp\" },\n\t{ \"HP\", NULL, \"Left Headphone Amp\" },\n\n\t{ \"Right Headphone Source\", \"DAC\", \"Right DAC\" },\n\t{ \"Right Headphone Source\", \"Mixer\", \"Right Mixer\" },\n\t{ \"Right Headphone Switch\", \"Headphone Playback Switch\", \"Right Headphone Source\" },\n\t{ \"Right Headphone Amp\", NULL, \"Right Headphone Switch\" },\n\t{ \"Right Headphone Amp\", NULL, \"Headphone Amp\" },\n\t{ \"HP\", NULL, \"Right Headphone Amp\" },\n\n\t{ \"Headphone Amp\", NULL, \"cpvdd\" },\n\n\t \n\t{ \"Mic1 Amplifier\", NULL, \"MIC1\"},\n\n\t \n\t{ \"Mic2 Amplifier\", NULL, \"MIC2\"},\n\n\t \n\t{ \"Left Line Out Source\", \"Stereo\", \"Left Mixer\" },\n\t{ \"Left Line Out Source\", \"Mono Differential\", \"Left Mixer\" },\n\t{ \"Left Line Out Source\", \"Mono Differential\", \"Right Mixer\" },\n\t{ \"Left Line Out Switch\", \"Line Out Playback Switch\", \"Left Line Out Source\" },\n\t{ \"LINEOUT\", NULL, \"Left Line Out Switch\" },\n\n\t{ \"Right Line Out Switch\", \"Line Out Playback Switch\", \"Right Mixer\" },\n\t{ \"Right Line Out Source\", \"Stereo\", \"Right Line Out Switch\" },\n\t{ \"Right Line Out Source\", \"Mono Differential\", \"Left Line Out Switch\" },\n\t{ \"LINEOUT\", NULL, \"Right Line Out Source\" },\n\n\t \n\t{ \"Earpiece Source Playback Route\", \"DACL\", \"Left DAC\" },\n\t{ \"Earpiece Source Playback Route\", \"DACR\", \"Right DAC\" },\n\t{ \"Earpiece Source Playback Route\", \"Left Mixer\", \"Left Mixer\" },\n\t{ \"Earpiece Source Playback Route\", \"Right Mixer\", \"Right Mixer\" },\n\t{ \"Earpiece Switch\", \"Earpiece Playback Switch\", \"Earpiece Source Playback Route\" },\n\t{ \"Earpiece Amp\", NULL, \"Earpiece Switch\" },\n\t{ \"EARPIECE\", NULL, \"Earpiece Amp\" },\n};\n\nstatic int sun50i_a64_codec_suspend(struct snd_soc_component *component)\n{\n\treturn regmap_update_bits(component->regmap, SUN50I_ADDA_HP_CTRL,\n\t\t\t\t  BIT(SUN50I_ADDA_HP_CTRL_PA_CLK_GATE),\n\t\t\t\t  BIT(SUN50I_ADDA_HP_CTRL_PA_CLK_GATE));\n}\n\nstatic int sun50i_a64_codec_resume(struct snd_soc_component *component)\n{\n\treturn regmap_update_bits(component->regmap, SUN50I_ADDA_HP_CTRL,\n\t\t\t\t  BIT(SUN50I_ADDA_HP_CTRL_PA_CLK_GATE), 0);\n}\n\nstatic const struct snd_soc_component_driver sun50i_codec_analog_cmpnt_drv = {\n\t.controls\t\t= sun50i_a64_codec_controls,\n\t.num_controls\t\t= ARRAY_SIZE(sun50i_a64_codec_controls),\n\t.dapm_widgets\t\t= sun50i_a64_codec_widgets,\n\t.num_dapm_widgets\t= ARRAY_SIZE(sun50i_a64_codec_widgets),\n\t.dapm_routes\t\t= sun50i_a64_codec_routes,\n\t.num_dapm_routes\t= ARRAY_SIZE(sun50i_a64_codec_routes),\n\t.suspend\t\t= sun50i_a64_codec_suspend,\n\t.resume\t\t\t= sun50i_a64_codec_resume,\n};\n\nstatic const struct of_device_id sun50i_codec_analog_of_match[] = {\n\t{\n\t\t.compatible = \"allwinner,sun50i-a64-codec-analog\",\n\t},\n\t{}\n};\nMODULE_DEVICE_TABLE(of, sun50i_codec_analog_of_match);\n\nstatic int sun50i_codec_analog_probe(struct platform_device *pdev)\n{\n\tstruct regmap *regmap;\n\tvoid __iomem *base;\n\tbool enable;\n\n\tbase = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(base)) {\n\t\tdev_err(&pdev->dev, \"Failed to map the registers\\n\");\n\t\treturn PTR_ERR(base);\n\t}\n\n\tregmap = sun8i_adda_pr_regmap_init(&pdev->dev, base);\n\tif (IS_ERR(regmap)) {\n\t\tdev_err(&pdev->dev, \"Failed to create regmap\\n\");\n\t\treturn PTR_ERR(regmap);\n\t}\n\n\tenable = device_property_read_bool(&pdev->dev,\n\t\t\t\t\t   \"allwinner,internal-bias-resistor\");\n\tregmap_update_bits(regmap, SUN50I_ADDA_JACK_MIC_CTRL,\n\t\t\t   BIT(SUN50I_ADDA_JACK_MIC_CTRL_INNERRESEN),\n\t\t\t   enable << SUN50I_ADDA_JACK_MIC_CTRL_INNERRESEN);\n\n\treturn devm_snd_soc_register_component(&pdev->dev,\n\t\t\t\t\t       &sun50i_codec_analog_cmpnt_drv,\n\t\t\t\t\t       NULL, 0);\n}\n\nstatic struct platform_driver sun50i_codec_analog_driver = {\n\t.driver = {\n\t\t.name = \"sun50i-codec-analog\",\n\t\t.of_match_table = sun50i_codec_analog_of_match,\n\t},\n\t.probe = sun50i_codec_analog_probe,\n};\nmodule_platform_driver(sun50i_codec_analog_driver);\n\nMODULE_DESCRIPTION(\"Allwinner internal codec analog controls driver for A64\");\nMODULE_AUTHOR(\"Vasily Khoruzhick <anarsoul@gmail.com>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_ALIAS(\"platform:sun50i-codec-analog\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}