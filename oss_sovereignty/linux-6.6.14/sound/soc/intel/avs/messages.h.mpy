{
  "module_name": "messages.h",
  "hash_id": "7a775df2a08c05b98823ec162377a4c75eeafa68fc3d55692b9a06d7ffa8b7b4",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/intel/avs/messages.h",
  "human_readable_source": " \n \n\n#ifndef __SOUND_SOC_INTEL_AVS_MSGS_H\n#define __SOUND_SOC_INTEL_AVS_MSGS_H\n\nstruct avs_dev;\n\n#define AVS_MAILBOX_SIZE 4096\n\nenum avs_msg_target {\n\tAVS_FW_GEN_MSG = 0,\n\tAVS_MOD_MSG = 1\n};\n\nenum avs_msg_direction {\n\tAVS_MSG_REQUEST = 0,\n\tAVS_MSG_REPLY = 1\n};\n\nenum avs_global_msg_type {\n\tAVS_GLB_ROM_CONTROL = 1,\n\tAVS_GLB_LOAD_MULTIPLE_MODULES = 15,\n\tAVS_GLB_UNLOAD_MULTIPLE_MODULES = 16,\n\tAVS_GLB_CREATE_PIPELINE = 17,\n\tAVS_GLB_DELETE_PIPELINE = 18,\n\tAVS_GLB_SET_PIPELINE_STATE = 19,\n\tAVS_GLB_GET_PIPELINE_STATE = 20,\n\tAVS_GLB_LOAD_LIBRARY = 24,\n\tAVS_GLB_NOTIFICATION = 27,\n};\n\nunion avs_global_msg {\n\tu64 val;\n\tstruct {\n\t\tunion {\n\t\t\tu32 primary;\n\t\t\tstruct {\n\t\t\t\tu32 rsvd:24;\n\t\t\t\tu32 global_msg_type:5;\n\t\t\t\tu32 msg_direction:1;\n\t\t\t\tu32 msg_target:1;\n\t\t\t};\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 rom_ctrl_msg_type:9;\n\t\t\t\tu32 dma_id:5;\n\t\t\t\tu32 purge_request:1;\n\t\t\t} boot_cfg;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 mod_cnt:8;\n\t\t\t} load_multi_mods;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 ppl_mem_size:11;\n\t\t\t\tu32 ppl_priority:5;\n\t\t\t\tu32 instance_id:8;\n\t\t\t} create_ppl;\n\t\t\tstruct {\n\t\t\t\tu32 rsvd:16;\n\t\t\t\tu32 instance_id:8;\n\t\t\t} ppl;  \n\t\t\tstruct {\n\t\t\t\tu32 state:16;\n\t\t\t\tu32 ppl_id:8;\n\t\t\t} set_ppl_state;\n\t\t\tstruct {\n\t\t\t\tu32 ppl_id:8;\n\t\t\t} get_ppl_state;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 dma_id:5;\n\t\t\t\tu32 rsvd:11;\n\t\t\t\tu32 lib_id:4;\n\t\t\t} load_lib;\n\t\t};\n\t\tunion {\n\t\t\tu32 val;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 lp:1;  \n\t\t\t\tu32 rsvd:3;\n\t\t\t\tu32 attributes:16;  \n\t\t\t} create_ppl;\n\t\t} ext;\n\t};\n} __packed;\n\nstruct avs_tlv {\n\tu32 type;\n\tu32 length;\n\tu32 value[];\n} __packed;\n\nenum avs_module_msg_type {\n\tAVS_MOD_INIT_INSTANCE = 0,\n\tAVS_MOD_LARGE_CONFIG_GET = 3,\n\tAVS_MOD_LARGE_CONFIG_SET = 4,\n\tAVS_MOD_BIND = 5,\n\tAVS_MOD_UNBIND = 6,\n\tAVS_MOD_SET_DX = 7,\n\tAVS_MOD_SET_D0IX = 8,\n\tAVS_MOD_DELETE_INSTANCE = 11,\n};\n\nunion avs_module_msg {\n\tu64 val;\n\tstruct {\n\t\tunion {\n\t\t\tu32 primary;\n\t\t\tstruct {\n\t\t\t\tu32 module_id:16;\n\t\t\t\tu32 instance_id:8;\n\t\t\t\tu32 module_msg_type:5;\n\t\t\t\tu32 msg_direction:1;\n\t\t\t\tu32 msg_target:1;\n\t\t\t};\n\t\t};\n\t\tunion {\n\t\t\tu32 val;\n\t\t\tstruct {\n\t\t\t\tu32 param_block_size:16;\n\t\t\t\tu32 ppl_instance_id:8;\n\t\t\t\tu32 core_id:4;\n\t\t\t\tu32 proc_domain:1;\n\t\t\t} init_instance;\n\t\t\tstruct {\n\t\t\t\tu32 data_off_size:20;\n\t\t\t\tu32 large_param_id:8;\n\t\t\t\tu32 final_block:1;\n\t\t\t\tu32 init_block:1;\n\t\t\t} large_config;\n\t\t\tstruct {\n\t\t\t\tu32 dst_module_id:16;\n\t\t\t\tu32 dst_instance_id:8;\n\t\t\t\tu32 dst_queue:3;\n\t\t\t\tu32 src_queue:3;\n\t\t\t} bind_unbind;\n\t\t\tstruct {\n\t\t\t\tu32 wake:1;\n\t\t\t\tu32 streaming:1;\n\t\t\t} set_d0ix;\n\t\t} ext;\n\t};\n} __packed;\n\n#define AVS_IPC_NOT_SUPPORTED 15\n\nunion avs_reply_msg {\n\tu64 val;\n\tstruct {\n\t\tunion {\n\t\t\tu32 primary;\n\t\t\tstruct {\n\t\t\t\tu32 status:24;\n\t\t\t\tu32 global_msg_type:5;\n\t\t\t\tu32 msg_direction:1;\n\t\t\t\tu32 msg_target:1;\n\t\t\t};\n\t\t};\n\t\tunion {\n\t\t\tu32 val;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 err_mod_id:16;\n\t\t\t} load_multi_mods;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 state:5;\n\t\t\t} get_ppl_state;\n\t\t\t \n\t\t\tstruct {\n\t\t\t\tu32 data_off_size:20;\n\t\t\t\tu32 large_param_id:8;\n\t\t\t\tu32 final_block:1;\n\t\t\t\tu32 init_block:1;\n\t\t\t} large_config;\n\t\t} ext;\n\t};\n} __packed;\n\nenum avs_notify_msg_type {\n\tAVS_NOTIFY_PHRASE_DETECTED = 4,\n\tAVS_NOTIFY_RESOURCE_EVENT = 5,\n\tAVS_NOTIFY_LOG_BUFFER_STATUS = 6,\n\tAVS_NOTIFY_FW_READY = 8,\n\tAVS_NOTIFY_EXCEPTION_CAUGHT = 10,\n\tAVS_NOTIFY_MODULE_EVENT = 12,\n};\n\nunion avs_notify_msg {\n\tu64 val;\n\tstruct {\n\t\tunion {\n\t\t\tu32 primary;\n\t\t\tstruct {\n\t\t\t\tu32 rsvd:16;\n\t\t\t\tu32 notify_msg_type:8;\n\t\t\t\tu32 global_msg_type:5;\n\t\t\t\tu32 msg_direction:1;\n\t\t\t\tu32 msg_target:1;\n\t\t\t};\n\t\t\tstruct {\n\t\t\t\tu16 rsvd:12;\n\t\t\t\tu16 core:4;\n\t\t\t} log;\n\t\t};\n\t\tunion {\n\t\t\tu32 val;\n\t\t\tstruct {\n\t\t\t\tu32 core_id:2;\n\t\t\t\tu32 stack_dump_size:16;\n\t\t\t} coredump;\n\t\t} ext;\n\t};\n} __packed;\n\n#define AVS_MSG(hdr) { .val = hdr }\n\n#define AVS_GLOBAL_REQUEST(msg_type)\t\t\\\n{\t\t\t\t\t\t\\\n\t.global_msg_type = AVS_GLB_##msg_type,\t\\\n\t.msg_direction = AVS_MSG_REQUEST,\t\\\n\t.msg_target = AVS_FW_GEN_MSG,\t\t\\\n}\n\n#define AVS_MODULE_REQUEST(msg_type)\t\t\\\n{\t\t\t\t\t\t\\\n\t.module_msg_type = AVS_MOD_##msg_type,\t\\\n\t.msg_direction = AVS_MSG_REQUEST,\t\\\n\t.msg_target = AVS_MOD_MSG,\t\t\\\n}\n\n#define AVS_NOTIFICATION(msg_type)\t\t\\\n{\t\t\t\t\t\t\\\n\t.notify_msg_type = AVS_NOTIFY_##msg_type,\\\n\t.global_msg_type = AVS_GLB_NOTIFICATION,\\\n\t.msg_direction = AVS_MSG_REPLY,\t\t\\\n\t.msg_target = AVS_FW_GEN_MSG,\t\t\\\n}\n\n#define avs_msg_is_reply(hdr) \\\n({ \\\n\tunion avs_reply_msg __msg = AVS_MSG(hdr); \\\n\t__msg.msg_direction == AVS_MSG_REPLY && \\\n\t__msg.global_msg_type != AVS_GLB_NOTIFICATION; \\\n})\n\n \n\nstruct avs_notify_voice_data {\n\tu16 kpd_score;\n\tu16 reserved;\n} __packed;\n\nstruct avs_notify_res_data {\n\tu32 resource_type;\n\tu32 resource_id;\n\tu32 event_type;\n\tu32 reserved;\n\tu32 data[6];\n} __packed;\n\nstruct avs_notify_mod_data {\n\tu32 module_instance_id;\n\tu32 event_id;\n\tu32 data_size;\n\tu32 data[];\n} __packed;\n\n \nenum avs_rom_control_msg_type {\n\tAVS_ROM_SET_BOOT_CONFIG = 0,\n};\n\nint avs_ipc_set_boot_config(struct avs_dev *adev, u32 dma_id, u32 purge);\n\n \nint avs_ipc_load_modules(struct avs_dev *adev, u16 *mod_ids, u32 num_mod_ids);\nint avs_ipc_unload_modules(struct avs_dev *adev, u16 *mod_ids, u32 num_mod_ids);\nint avs_ipc_load_library(struct avs_dev *adev, u32 dma_id, u32 lib_id);\n\n \nenum avs_pipeline_state {\n\tAVS_PPL_STATE_INVALID,\n\tAVS_PPL_STATE_UNINITIALIZED,\n\tAVS_PPL_STATE_RESET,\n\tAVS_PPL_STATE_PAUSED,\n\tAVS_PPL_STATE_RUNNING,\n};\n\nint avs_ipc_create_pipeline(struct avs_dev *adev, u16 req_size, u8 priority,\n\t\t\t    u8 instance_id, bool lp, u16 attributes);\nint avs_ipc_delete_pipeline(struct avs_dev *adev, u8 instance_id);\nint avs_ipc_set_pipeline_state(struct avs_dev *adev, u8 instance_id,\n\t\t\t       enum avs_pipeline_state state);\nint avs_ipc_get_pipeline_state(struct avs_dev *adev, u8 instance_id,\n\t\t\t       enum avs_pipeline_state *state);\n\n \nint avs_ipc_init_instance(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t\t  u8 ppl_id, u8 core_id, u8 domain,\n\t\t\t  void *param, u32 param_size);\nint avs_ipc_delete_instance(struct avs_dev *adev, u16 module_id, u8 instance_id);\nint avs_ipc_bind(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t u16 dst_module_id, u8 dst_instance_id,\n\t\t u8 dst_queue, u8 src_queue);\nint avs_ipc_unbind(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t   u16 dst_module_id, u8 dst_instance_id,\n\t\t   u8 dst_queue, u8 src_queue);\nint avs_ipc_set_large_config(struct avs_dev *adev, u16 module_id,\n\t\t\t     u8 instance_id, u8 param_id,\n\t\t\t     u8 *request, size_t request_size);\nint avs_ipc_get_large_config(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t\t     u8 param_id, u8 *request_data, size_t request_size,\n\t\t\t     u8 **reply_data, size_t *reply_size);\n\n \nstruct avs_dxstate_info {\n\tu32 core_mask;\t \n\tu32 dx_mask;\t \n} __packed;\n\nint avs_ipc_set_dx(struct avs_dev *adev, u32 core_mask, bool powerup);\nint avs_ipc_set_d0ix(struct avs_dev *adev, bool enable_pg, bool streaming);\n\n \n\n#define AVS_BASEFW_MOD_ID\t0\n#define AVS_BASEFW_INST_ID\t0\n\nenum avs_basefw_runtime_param {\n\tAVS_BASEFW_ENABLE_LOGS = 6,\n\tAVS_BASEFW_FIRMWARE_CONFIG = 7,\n\tAVS_BASEFW_HARDWARE_CONFIG = 8,\n\tAVS_BASEFW_MODULES_INFO = 9,\n\tAVS_BASEFW_LIBRARIES_INFO = 16,\n\tAVS_BASEFW_SYSTEM_TIME = 20,\n};\n\nenum avs_log_enable {\n\tAVS_LOG_DISABLE = 0,\n\tAVS_LOG_ENABLE = 1\n};\n\nenum avs_skl_log_priority {\n\tAVS_SKL_LOG_CRITICAL = 1,\n\tAVS_SKL_LOG_HIGH,\n\tAVS_SKL_LOG_MEDIUM,\n\tAVS_SKL_LOG_LOW,\n\tAVS_SKL_LOG_VERBOSE,\n};\n\nstruct skl_log_state {\n\tu32 enable;\n\tu32 min_priority;\n} __packed;\n\nstruct skl_log_state_info {\n\tu32 core_mask;\n\tstruct skl_log_state logs_core[];\n} __packed;\n\nstruct apl_log_state_info {\n\tu32 aging_timer_period;\n\tu32 fifo_full_timer_period;\n\tu32 core_mask;\n\tstruct skl_log_state logs_core[];\n} __packed;\n\nint avs_ipc_set_enable_logs(struct avs_dev *adev, u8 *log_info, size_t size);\n\nstruct avs_fw_version {\n\tu16 major;\n\tu16 minor;\n\tu16 hotfix;\n\tu16 build;\n};\n\nenum avs_fw_cfg_params {\n\tAVS_FW_CFG_FW_VERSION = 0,\n\tAVS_FW_CFG_MEMORY_RECLAIMED,\n\tAVS_FW_CFG_SLOW_CLOCK_FREQ_HZ,\n\tAVS_FW_CFG_FAST_CLOCK_FREQ_HZ,\n\tAVS_FW_CFG_DMA_BUFFER_CONFIG,\n\tAVS_FW_CFG_ALH_SUPPORT_LEVEL,\n\tAVS_FW_CFG_IPC_DL_MAILBOX_BYTES,\n\tAVS_FW_CFG_IPC_UL_MAILBOX_BYTES,\n\tAVS_FW_CFG_TRACE_LOG_BYTES,\n\tAVS_FW_CFG_MAX_PPL_COUNT,\n\tAVS_FW_CFG_MAX_ASTATE_COUNT,\n\tAVS_FW_CFG_MAX_MODULE_PIN_COUNT,\n\tAVS_FW_CFG_MODULES_COUNT,\n\tAVS_FW_CFG_MAX_MOD_INST_COUNT,\n\tAVS_FW_CFG_MAX_LL_TASKS_PER_PRI_COUNT,\n\tAVS_FW_CFG_LL_PRI_COUNT,\n\tAVS_FW_CFG_MAX_DP_TASKS_COUNT,\n\tAVS_FW_CFG_MAX_LIBS_COUNT,\n\tAVS_FW_CFG_SCHEDULER_CONFIG,\n\tAVS_FW_CFG_XTAL_FREQ_HZ,\n\tAVS_FW_CFG_CLOCKS_CONFIG,\n\tAVS_FW_CFG_RESERVED,\n\tAVS_FW_CFG_POWER_GATING_POLICY,\n\tAVS_FW_CFG_ASSERT_MODE,\n};\n\nstruct avs_fw_cfg {\n\tstruct avs_fw_version fw_version;\n\tu32 memory_reclaimed;\n\tu32 slow_clock_freq_hz;\n\tu32 fast_clock_freq_hz;\n\tu32 alh_support;\n\tu32 ipc_dl_mailbox_bytes;\n\tu32 ipc_ul_mailbox_bytes;\n\tu32 trace_log_bytes;\n\tu32 max_ppl_count;\n\tu32 max_astate_count;\n\tu32 max_module_pin_count;\n\tu32 modules_count;\n\tu32 max_mod_inst_count;\n\tu32 max_ll_tasks_per_pri_count;\n\tu32 ll_pri_count;\n\tu32 max_dp_tasks_count;\n\tu32 max_libs_count;\n\tu32 xtal_freq_hz;\n\tu32 power_gating_policy;\n};\n\nint avs_ipc_get_fw_config(struct avs_dev *adev, struct avs_fw_cfg *cfg);\n\nenum avs_hw_cfg_params {\n\tAVS_HW_CFG_AVS_VER,\n\tAVS_HW_CFG_DSP_CORES,\n\tAVS_HW_CFG_MEM_PAGE_BYTES,\n\tAVS_HW_CFG_TOTAL_PHYS_MEM_PAGES,\n\tAVS_HW_CFG_I2S_CAPS,\n\tAVS_HW_CFG_GPDMA_CAPS,\n\tAVS_HW_CFG_GATEWAY_COUNT,\n\tAVS_HW_CFG_HP_EBB_COUNT,\n\tAVS_HW_CFG_LP_EBB_COUNT,\n\tAVS_HW_CFG_EBB_SIZE_BYTES,\n};\n\nenum avs_iface_version {\n\tAVS_AVS_VER_1_5 = 0x10005,\n\tAVS_AVS_VER_1_8 = 0x10008,\n};\n\nenum avs_i2s_version {\n\tAVS_I2S_VER_15_SKYLAKE   = 0x00000,\n\tAVS_I2S_VER_15_BROXTON   = 0x10000,\n\tAVS_I2S_VER_15_BROXTON_P = 0x20000,\n\tAVS_I2S_VER_18_KBL_CNL   = 0x30000,\n};\n\nstruct avs_i2s_caps {\n\tu32 i2s_version;\n\tu32 ctrl_count;\n\tu32 *ctrl_base_addr;\n};\n\nstruct avs_hw_cfg {\n\tu32 avs_version;\n\tu32 dsp_cores;\n\tu32 mem_page_bytes;\n\tu32 total_phys_mem_pages;\n\tstruct avs_i2s_caps i2s_caps;\n\tu32 gateway_count;\n\tu32 hp_ebb_count;\n\tu32 lp_ebb_count;\n\tu32 ebb_size_bytes;\n};\n\nint avs_ipc_get_hw_config(struct avs_dev *adev, struct avs_hw_cfg *cfg);\n\n#define AVS_MODULE_LOAD_TYPE_BUILTIN\t0\n#define AVS_MODULE_LOAD_TYPE_LOADABLE\t1\n#define AVS_MODULE_STATE_LOADED\t\tBIT(0)\n\nstruct avs_module_type {\n\tu32 load_type:4;\n\tu32 auto_start:1;\n\tu32 domain_ll:1;\n\tu32 domain_dp:1;\n\tu32 lib_code:1;\n\tu32 rsvd:24;\n} __packed;\n\nunion avs_segment_flags {\n\tu32 ul;\n\tstruct {\n\t\tu32 contents:1;\n\t\tu32 alloc:1;\n\t\tu32 load:1;\n\t\tu32 readonly:1;\n\t\tu32 code:1;\n\t\tu32 data:1;\n\t\tu32 rsvd_1:2;\n\t\tu32 type:4;\n\t\tu32 rsvd_2:4;\n\t\tu32 length:16;\n\t};\n} __packed;\n\nstruct avs_segment_desc {\n\tunion avs_segment_flags flags;\n\tu32 v_base_addr;\n\tu32 file_offset;\n} __packed;\n\nstruct avs_module_entry {\n\tu16 module_id;\n\tu16 state_flags;\n\tu8 name[8];\n\tguid_t uuid;\n\tstruct avs_module_type type;\n\tu8 hash[32];\n\tu32 entry_point;\n\tu16 cfg_offset;\n\tu16 cfg_count;\n\tu32 affinity_mask;\n\tu16 instance_max_count;\n\tu16 instance_bss_size;\n\tstruct avs_segment_desc segments[3];\n} __packed;\n\nstruct avs_mods_info {\n\tu32 count;\n\tstruct avs_module_entry entries[];\n} __packed;\n\nstatic inline bool avs_module_entry_is_loaded(struct avs_module_entry *mentry)\n{\n\treturn mentry->type.load_type == AVS_MODULE_LOAD_TYPE_BUILTIN ||\n\t       mentry->state_flags & AVS_MODULE_STATE_LOADED;\n}\n\nint avs_ipc_get_modules_info(struct avs_dev *adev, struct avs_mods_info **info);\n\nstruct avs_sys_time {\n\tu32 val_l;\n\tu32 val_u;\n} __packed;\n\nint avs_ipc_set_system_time(struct avs_dev *adev);\n\n \n\n#define AVS_MIXIN_MOD_UUID \\\n\tGUID_INIT(0x39656EB2, 0x3B71, 0x4049, 0x8D, 0x3F, 0xF9, 0x2C, 0xD5, 0xC4, 0x3C, 0x09)\n\n#define AVS_MIXOUT_MOD_UUID \\\n\tGUID_INIT(0x3C56505A, 0x24D7, 0x418F, 0xBD, 0xDC, 0xC1, 0xF5, 0xA3, 0xAC, 0x2A, 0xE0)\n\n#define AVS_COPIER_MOD_UUID \\\n\tGUID_INIT(0x9BA00C83, 0xCA12, 0x4A83, 0x94, 0x3C, 0x1F, 0xA2, 0xE8, 0x2F, 0x9D, 0xDA)\n\n#define AVS_PEAKVOL_MOD_UUID \\\n\tGUID_INIT(0x8A171323, 0x94A3, 0x4E1D, 0xAF, 0xE9, 0xFE, 0x5D, 0xBA, 0xa4, 0xC3, 0x93)\n\n#define AVS_GAIN_MOD_UUID \\\n\tGUID_INIT(0x61BCA9A8, 0x18D0, 0x4A18, 0x8E, 0x7B, 0x26, 0x39, 0x21, 0x98, 0x04, 0xB7)\n\n#define AVS_KPBUFF_MOD_UUID \\\n\tGUID_INIT(0xA8A0CB32, 0x4A77, 0x4DB1, 0x85, 0xC7, 0x53, 0xD7, 0xEE, 0x07, 0xBC, 0xE6)\n\n#define AVS_MICSEL_MOD_UUID \\\n\tGUID_INIT(0x32FE92C1, 0x1E17, 0x4FC2, 0x97, 0x58, 0xC7, 0xF3, 0x54, 0x2E, 0x98, 0x0A)\n\n#define AVS_MUX_MOD_UUID \\\n\tGUID_INIT(0x64CE6E35, 0x857A, 0x4878, 0xAC, 0xE8, 0xE2, 0xA2, 0xF4, 0x2e, 0x30, 0x69)\n\n#define AVS_UPDWMIX_MOD_UUID \\\n\tGUID_INIT(0x42F8060C, 0x832F, 0x4DBF, 0xB2, 0x47, 0x51, 0xE9, 0x61, 0x99, 0x7b, 0x35)\n\n#define AVS_SRCINTC_MOD_UUID \\\n\tGUID_INIT(0xE61BB28D, 0x149A, 0x4C1F, 0xB7, 0x09, 0x46, 0x82, 0x3E, 0xF5, 0xF5, 0xAE)\n\n#define AVS_PROBE_MOD_UUID \\\n\tGUID_INIT(0x7CAD0808, 0xAB10, 0xCD23, 0xEF, 0x45, 0x12, 0xAB, 0x34, 0xCD, 0x56, 0xEF)\n\n#define AVS_AEC_MOD_UUID \\\n\tGUID_INIT(0x46CB87FB, 0xD2C9, 0x4970, 0x96, 0xD2, 0x6D, 0x7E, 0x61, 0x4B, 0xB6, 0x05)\n\n#define AVS_ASRC_MOD_UUID \\\n\tGUID_INIT(0x66B4402D, 0xB468, 0x42F2, 0x81, 0xA7, 0xB3, 0x71, 0x21, 0x86, 0x3D, 0xD4)\n\n#define AVS_INTELWOV_MOD_UUID \\\n\tGUID_INIT(0xEC774FA9, 0x28D3, 0x424A, 0x90, 0xE4, 0x69, 0xF9, 0x84, 0xF1, 0xEE, 0xB7)\n\n \nenum avs_channel_index {\n\tAVS_CHANNEL_LEFT = 0,\n\tAVS_CHANNEL_RIGHT = 1,\n\tAVS_CHANNEL_CENTER = 2,\n\tAVS_CHANNEL_LEFT_SURROUND = 3,\n\tAVS_CHANNEL_CENTER_SURROUND = 3,\n\tAVS_CHANNEL_RIGHT_SURROUND = 4,\n\tAVS_CHANNEL_LFE = 7,\n\tAVS_CHANNEL_INVALID = 0xF,\n};\n\nenum avs_channel_config {\n\tAVS_CHANNEL_CONFIG_MONO = 0,\n\tAVS_CHANNEL_CONFIG_STEREO = 1,\n\tAVS_CHANNEL_CONFIG_2_1 = 2,\n\tAVS_CHANNEL_CONFIG_3_0 = 3,\n\tAVS_CHANNEL_CONFIG_3_1 = 4,\n\tAVS_CHANNEL_CONFIG_QUATRO = 5,\n\tAVS_CHANNEL_CONFIG_4_0 = 6,\n\tAVS_CHANNEL_CONFIG_5_0 = 7,\n\tAVS_CHANNEL_CONFIG_5_1 = 8,\n\tAVS_CHANNEL_CONFIG_DUAL_MONO = 9,\n\tAVS_CHANNEL_CONFIG_I2S_DUAL_STEREO_0 = 10,\n\tAVS_CHANNEL_CONFIG_I2S_DUAL_STEREO_1 = 11,\n\tAVS_CHANNEL_CONFIG_7_1 = 12,\n\tAVS_CHANNEL_CONFIG_INVALID\n};\n\nenum avs_interleaving {\n\tAVS_INTERLEAVING_PER_CHANNEL = 0,\n\tAVS_INTERLEAVING_PER_SAMPLE = 1,\n};\n\nenum avs_sample_type {\n\tAVS_SAMPLE_TYPE_INT_MSB = 0,\n\tAVS_SAMPLE_TYPE_INT_LSB = 1,\n\tAVS_SAMPLE_TYPE_INT_SIGNED = 2,\n\tAVS_SAMPLE_TYPE_INT_UNSIGNED = 3,\n\tAVS_SAMPLE_TYPE_FLOAT = 4,\n};\n\n#define AVS_CHANNELS_MAX\t8\n#define AVS_ALL_CHANNELS_MASK\tUINT_MAX\n\nstruct avs_audio_format {\n\tu32 sampling_freq;\n\tu32 bit_depth;\n\tu32 channel_map;\n\tu32 channel_config;\n\tu32 interleaving;\n\tu32 num_channels:8;\n\tu32 valid_bit_depth:8;\n\tu32 sample_type:8;\n\tu32 reserved:8;\n} __packed;\n\nstruct avs_modcfg_base {\n\tu32 cpc;\n\tu32 ibs;\n\tu32 obs;\n\tu32 is_pages;\n\tstruct avs_audio_format audio_fmt;\n} __packed;\n\nstruct avs_pin_format {\n\tu32 pin_index;\n\tu32 iobs;\n\tstruct avs_audio_format audio_fmt;\n} __packed;\n\nstruct avs_modcfg_ext {\n\tstruct avs_modcfg_base base;\n\tu16 num_input_pins;\n\tu16 num_output_pins;\n\tu8 reserved[12];\n\t \n\tstruct avs_pin_format pin_fmts[];\n} __packed;\n\nenum avs_dma_type {\n\tAVS_DMA_HDA_HOST_OUTPUT = 0,\n\tAVS_DMA_HDA_HOST_INPUT = 1,\n\tAVS_DMA_HDA_LINK_OUTPUT = 8,\n\tAVS_DMA_HDA_LINK_INPUT = 9,\n\tAVS_DMA_DMIC_LINK_INPUT = 11,\n\tAVS_DMA_I2S_LINK_OUTPUT = 12,\n\tAVS_DMA_I2S_LINK_INPUT = 13,\n};\n\nunion avs_virtual_index {\n\tu8 val;\n\tstruct {\n\t\tu8 time_slot:4;\n\t\tu8 instance:4;\n\t} i2s;\n\tstruct {\n\t\tu8 queue_id:3;\n\t\tu8 time_slot:2;\n\t\tu8 instance:3;\n\t} dmic;\n} __packed;\n\nunion avs_connector_node_id {\n\tu32 val;\n\tstruct {\n\t\tu32 vindex:8;\n\t\tu32 dma_type:5;\n\t\tu32 rsvd:19;\n\t};\n} __packed;\n\n#define INVALID_PIPELINE_ID\t0xFF\n#define INVALID_NODE_ID \\\n\t((union avs_connector_node_id) { UINT_MAX })\n\nunion avs_gtw_attributes {\n\tu32 val;\n\tstruct {\n\t\tu32 lp_buffer_alloc:1;\n\t\tu32 rsvd:31;\n\t};\n} __packed;\n\nstruct avs_copier_gtw_cfg {\n\tunion avs_connector_node_id node_id;\n\tu32 dma_buffer_size;\n\tu32 config_length;\n\tstruct {\n\t\tunion avs_gtw_attributes attrs;\n\t\tu32 blob[];\n\t} config;\n} __packed;\n\nstruct avs_copier_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_audio_format out_fmt;\n\tu32 feature_mask;\n\tstruct avs_copier_gtw_cfg gtw_cfg;\n} __packed;\n\nstruct avs_volume_cfg {\n\tu32 channel_id;\n\tu32 target_volume;\n\tu32 curve_type;\n\tu32 reserved;  \n\tu64 curve_duration;\n} __packed;\n\nstruct avs_peakvol_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_volume_cfg vols[];\n} __packed;\n\nstruct avs_micsel_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_audio_format out_fmt;\n} __packed;\n\nstruct avs_mux_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_audio_format ref_fmt;\n\tstruct avs_audio_format out_fmt;\n} __packed;\n\nstruct avs_updown_mixer_cfg {\n\tstruct avs_modcfg_base base;\n\tu32 out_channel_config;\n\tu32 coefficients_select;\n\ts32 coefficients[AVS_CHANNELS_MAX];\n\tu32 channel_map;\n} __packed;\n\nstruct avs_src_cfg {\n\tstruct avs_modcfg_base base;\n\tu32 out_freq;\n} __packed;\n\nstruct avs_probe_gtw_cfg {\n\tunion avs_connector_node_id node_id;\n\tu32 dma_buffer_size;\n} __packed;\n\nstruct avs_probe_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_probe_gtw_cfg gtw_cfg;\n} __packed;\n\nstruct avs_aec_cfg {\n\tstruct avs_modcfg_base base;\n\tstruct avs_audio_format ref_fmt;\n\tstruct avs_audio_format out_fmt;\n\tu32 cpc_lp_mode;\n} __packed;\n\nstruct avs_asrc_cfg {\n\tstruct avs_modcfg_base base;\n\tu32 out_freq;\n\tu32 rsvd0:1;\n\tu32 mode:1;\n\tu32 rsvd2:2;\n\tu32 disable_jitter_buffer:1;\n\tu32 rsvd3:27;\n} __packed;\n\nstruct avs_wov_cfg {\n\tstruct avs_modcfg_base base;\n\tu32 cpc_lp_mode;\n} __packed;\n\n \n\nenum avs_copier_runtime_param {\n\tAVS_COPIER_SET_SINK_FORMAT = 2,\n};\n\nstruct avs_copier_sink_format {\n\tu32 sink_id;\n\tstruct avs_audio_format src_fmt;\n\tstruct avs_audio_format sink_fmt;\n} __packed;\n\nint avs_ipc_copier_set_sink_format(struct avs_dev *adev, u16 module_id,\n\t\t\t\t   u8 instance_id, u32 sink_id,\n\t\t\t\t   const struct avs_audio_format *src_fmt,\n\t\t\t\t   const struct avs_audio_format *sink_fmt);\n\nenum avs_peakvol_runtime_param {\n\tAVS_PEAKVOL_VOLUME = 0,\n};\n\nenum avs_audio_curve_type {\n\tAVS_AUDIO_CURVE_NONE = 0,\n\tAVS_AUDIO_CURVE_WINDOWS_FADE = 1,\n};\n\nint avs_ipc_peakvol_set_volume(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t\t       struct avs_volume_cfg *vol);\nint avs_ipc_peakvol_get_volume(struct avs_dev *adev, u16 module_id, u8 instance_id,\n\t\t\t       struct avs_volume_cfg **vols, size_t *num_vols);\n\n#define AVS_PROBE_INST_ID\t0\n\nenum avs_probe_runtime_param {\n\tAVS_PROBE_INJECTION_DMA = 1,\n\tAVS_PROBE_INJECTION_DMA_DETACH,\n\tAVS_PROBE_POINTS,\n\tAVS_PROBE_POINTS_DISCONNECT,\n};\n\nstruct avs_probe_dma {\n\tunion avs_connector_node_id node_id;\n\tu32 dma_buffer_size;\n} __packed;\n\nenum avs_probe_type {\n\tAVS_PROBE_TYPE_INPUT = 0,\n\tAVS_PROBE_TYPE_OUTPUT,\n\tAVS_PROBE_TYPE_INTERNAL\n};\n\nunion avs_probe_point_id {\n\tu32 value;\n\tstruct {\n\t\tu32 module_id:16;\n\t\tu32 instance_id:8;\n\t\tu32 type:2;\n\t\tu32 index:6;\n\t} id;\n} __packed;\n\nenum avs_connection_purpose {\n\tAVS_CONNECTION_PURPOSE_EXTRACT = 0,\n\tAVS_CONNECTION_PURPOSE_INJECT,\n\tAVS_CONNECTION_PURPOSE_INJECT_REEXTRACT,\n};\n\nstruct avs_probe_point_desc {\n\tunion avs_probe_point_id id;\n\tu32 purpose;\n\tunion avs_connector_node_id node_id;\n} __packed;\n\nint avs_ipc_probe_get_dma(struct avs_dev *adev, struct avs_probe_dma **dmas, size_t *num_dmas);\nint avs_ipc_probe_attach_dma(struct avs_dev *adev, struct avs_probe_dma *dmas, size_t num_dmas);\nint avs_ipc_probe_detach_dma(struct avs_dev *adev, union avs_connector_node_id *node_ids,\n\t\t\t     size_t num_node_ids);\nint avs_ipc_probe_get_points(struct avs_dev *adev, struct avs_probe_point_desc **descs,\n\t\t\t     size_t *num_descs);\nint avs_ipc_probe_connect_points(struct avs_dev *adev, struct avs_probe_point_desc *descs,\n\t\t\t\t size_t num_descs);\nint avs_ipc_probe_disconnect_points(struct avs_dev *adev, union avs_probe_point_id *ids,\n\t\t\t\t    size_t num_ids);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}