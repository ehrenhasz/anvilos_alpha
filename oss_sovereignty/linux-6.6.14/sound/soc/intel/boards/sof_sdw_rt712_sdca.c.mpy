{
  "module_name": "sof_sdw_rt712_sdca.c",
  "hash_id": "694f9c7dd51a687642794000e06c468250b86f734c9bca92030bb1ad23f47c1c",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/intel/boards/sof_sdw_rt712_sdca.c",
  "human_readable_source": "\n\n\n \n\n#include <linux/device.h>\n#include <linux/errno.h>\n#include <linux/soundwire/sdw.h>\n#include <linux/soundwire/sdw_type.h>\n#include <sound/control.h>\n#include <sound/soc.h>\n#include <sound/soc-acpi.h>\n#include <sound/soc-dapm.h>\n#include \"sof_sdw_common.h\"\n\nstatic const struct snd_soc_dapm_widget rt712_spk_widgets[] = {\n\tSND_SOC_DAPM_SPK(\"Speaker\", NULL),\n};\n\n \nstatic const struct snd_soc_dapm_route rt712_spk_map[] = {\n\t{ \"Speaker\", NULL, \"rt712 SPOL\" },\n\t{ \"Speaker\", NULL, \"rt712 SPOR\" },\n};\n\nstatic const struct snd_kcontrol_new rt712_spk_controls[] = {\n\tSOC_DAPM_PIN_SWITCH(\"Speaker\"),\n};\n\nstatic int rt712_spk_init(struct snd_soc_pcm_runtime *rtd)\n{\n\tstruct snd_soc_card *card = rtd->card;\n\tint ret;\n\n\tcard->components = devm_kasprintf(card->dev, GFP_KERNEL,\n\t\t\t\t\t  \"%s spk:rt712\",\n\t\t\t\t\t  card->components);\n\tif (!card->components)\n\t\treturn -ENOMEM;\n\n\tret = snd_soc_add_card_controls(card, rt712_spk_controls,\n\t\t\t\t\tARRAY_SIZE(rt712_spk_controls));\n\tif (ret) {\n\t\tdev_err(card->dev, \"rt712 spk controls addition failed: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = snd_soc_dapm_new_controls(&card->dapm, rt712_spk_widgets,\n\t\t\t\t\tARRAY_SIZE(rt712_spk_widgets));\n\tif (ret) {\n\t\tdev_err(card->dev, \"rt712 spk widgets addition failed: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = snd_soc_dapm_add_routes(&card->dapm, rt712_spk_map, ARRAY_SIZE(rt712_spk_map));\n\tif (ret)\n\t\tdev_err(rtd->dev, \"failed to add SPK map: %d\\n\", ret);\n\n\treturn ret;\n}\n\nint sof_sdw_rt712_spk_init(struct snd_soc_card *card,\n\t\t\t   const struct snd_soc_acpi_link_adr *link,\n\t\t\t   struct snd_soc_dai_link *dai_links,\n\t\t\t   struct sof_sdw_codec_info *info,\n\t\t\t   bool playback)\n{\n\tdai_links->init = rt712_spk_init;\n\n\treturn 0;\n}\n\nstatic int rt712_sdca_dmic_rtd_init(struct snd_soc_pcm_runtime *rtd)\n{\n\tstruct snd_soc_card *card = rtd->card;\n\n\tcard->components = devm_kasprintf(card->dev, GFP_KERNEL,\n\t\t\t\t\t  \"%s mic:rt712-sdca-dmic\",\n\t\t\t\t\t  card->components);\n\tif (!card->components)\n\t\treturn -ENOMEM;\n\n\treturn 0;\n}\n\nint sof_sdw_rt712_sdca_dmic_init(struct snd_soc_card *card,\n\t\t\t\t const struct snd_soc_acpi_link_adr *link,\n\t\t\t\t struct snd_soc_dai_link *dai_links,\n\t\t\t\t struct sof_sdw_codec_info *info,\n\t\t\t\t bool playback)\n{\n\tdai_links->init = rt712_sdca_dmic_rtd_init;\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}