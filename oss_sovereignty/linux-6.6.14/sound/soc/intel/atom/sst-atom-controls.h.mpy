{
  "module_name": "sst-atom-controls.h",
  "hash_id": "8b690a38dbf692cc768ebe638dc4fd2f3cb98a2da4febf3db4cfba3262ef810e",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/intel/atom/sst-atom-controls.h",
  "human_readable_source": " \n \n\n#ifndef __SST_ATOM_CONTROLS_H__\n#define __SST_ATOM_CONTROLS_H__\n\n#include <sound/soc.h>\n#include <sound/tlv.h>\n\nenum {\n\tMERR_DPCM_AUDIO = 0,\n\tMERR_DPCM_DEEP_BUFFER,\n\tMERR_DPCM_COMPR,\n};\n\n \n#define SST_MIX_IP(x)\t\t(x)\n\n#define SST_IP_MODEM\t\tSST_MIX_IP(0)\n#define SST_IP_BT\t\tSST_MIX_IP(1)\n#define SST_IP_CODEC0\t\tSST_MIX_IP(2)\n#define SST_IP_CODEC1\t\tSST_MIX_IP(3)\n#define SST_IP_LOOP0\t\tSST_MIX_IP(4)\n#define SST_IP_LOOP1\t\tSST_MIX_IP(5)\n#define SST_IP_LOOP2\t\tSST_MIX_IP(6)\n#define SST_IP_PROBE\t\tSST_MIX_IP(7)\n#define SST_IP_VOIP\t\tSST_MIX_IP(12)\n#define SST_IP_PCM0\t\tSST_MIX_IP(13)\n#define SST_IP_PCM1\t\tSST_MIX_IP(14)\n#define SST_IP_MEDIA0\t\tSST_MIX_IP(17)\n#define SST_IP_MEDIA1\t\tSST_MIX_IP(18)\n#define SST_IP_MEDIA2\t\tSST_MIX_IP(19)\n#define SST_IP_MEDIA3\t\tSST_MIX_IP(20)\n\n#define SST_IP_LAST\t\tSST_IP_MEDIA3\n\n#define SST_SWM_INPUT_COUNT\t(SST_IP_LAST + 1)\n#define SST_CMD_SWM_MAX_INPUTS\t6\n\n#define SST_PATH_ID_SHIFT\t8\n#define SST_DEFAULT_LOCATION_ID\t0xFFFF\n#define SST_DEFAULT_CELL_NBR\t0xFF\n#define SST_DEFAULT_MODULE_ID\t0xFFFF\n\n \nenum sst_path_index {\n\tSST_PATH_INDEX_MODEM_OUT                = (0x00 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_CODEC_OUT0               = (0x02 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_CODEC_OUT1               = (0x03 << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_SPROT_LOOP_OUT           = (0x04 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA_LOOP1_OUT          = (0x05 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA_LOOP2_OUT          = (0x06 << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_VOIP_OUT                 = (0x0C << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_PCM0_OUT                 = (0x0D << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_PCM1_OUT                 = (0x0E << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_PCM2_OUT                 = (0x0F << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_MEDIA0_OUT               = (0x12 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA1_OUT               = (0x13 << SST_PATH_ID_SHIFT),\n\n\n\t \n\tSST_PATH_INDEX_MODEM_IN                 = (0x80 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_CODEC_IN0                = (0x82 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_CODEC_IN1                = (0x83 << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_SPROT_LOOP_IN            = (0x84 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA_LOOP1_IN           = (0x85 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA_LOOP2_IN           = (0x86 << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_VOIP_IN                  = (0x8C << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_PCM0_IN                  = (0x8D << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_PCM1_IN                  = (0x8E << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_MEDIA0_IN                = (0x8F << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA1_IN                = (0x90 << SST_PATH_ID_SHIFT),\n\tSST_PATH_INDEX_MEDIA2_IN                = (0x91 << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_MEDIA3_IN\t\t= (0x9C << SST_PATH_ID_SHIFT),\n\n\tSST_PATH_INDEX_RESERVED                 = (0xFF << SST_PATH_ID_SHIFT),\n};\n\n \nenum sst_swm_inputs {\n\tSST_SWM_IN_MODEM\t= (SST_PATH_INDEX_MODEM_IN\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_CODEC0\t= (SST_PATH_INDEX_CODEC_IN0\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_CODEC1\t= (SST_PATH_INDEX_CODEC_IN1\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_SPROT_LOOP\t= (SST_PATH_INDEX_SPROT_LOOP_IN\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_MEDIA_LOOP1\t= (SST_PATH_INDEX_MEDIA_LOOP1_IN  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_MEDIA_LOOP2\t= (SST_PATH_INDEX_MEDIA_LOOP2_IN  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_VOIP\t\t= (SST_PATH_INDEX_VOIP_IN\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_PCM0\t\t= (SST_PATH_INDEX_PCM0_IN\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_PCM1\t\t= (SST_PATH_INDEX_PCM1_IN\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_IN_MEDIA0\t= (SST_PATH_INDEX_MEDIA0_IN\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_IN_MEDIA1\t= (SST_PATH_INDEX_MEDIA1_IN\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_IN_MEDIA2\t= (SST_PATH_INDEX_MEDIA2_IN\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_IN_MEDIA3\t= (SST_PATH_INDEX_MEDIA3_IN\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_IN_END\t\t= (SST_PATH_INDEX_RESERVED\t  | SST_DEFAULT_CELL_NBR)\n};\n\n \nenum sst_swm_outputs {\n\tSST_SWM_OUT_MODEM\t= (SST_PATH_INDEX_MODEM_OUT\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_CODEC0\t= (SST_PATH_INDEX_CODEC_OUT0\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_CODEC1\t= (SST_PATH_INDEX_CODEC_OUT1\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_SPROT_LOOP\t= (SST_PATH_INDEX_SPROT_LOOP_OUT  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_MEDIA_LOOP1\t= (SST_PATH_INDEX_MEDIA_LOOP1_OUT | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_MEDIA_LOOP2\t= (SST_PATH_INDEX_MEDIA_LOOP2_OUT | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_VOIP\t= (SST_PATH_INDEX_VOIP_OUT\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_PCM0\t= (SST_PATH_INDEX_PCM0_OUT\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_PCM1\t= (SST_PATH_INDEX_PCM1_OUT\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_PCM2\t= (SST_PATH_INDEX_PCM2_OUT\t  | SST_DEFAULT_CELL_NBR),\n\tSST_SWM_OUT_MEDIA0\t= (SST_PATH_INDEX_MEDIA0_OUT\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_OUT_MEDIA1\t= (SST_PATH_INDEX_MEDIA1_OUT\t  | SST_DEFAULT_CELL_NBR),  \n\tSST_SWM_OUT_END\t\t= (SST_PATH_INDEX_RESERVED\t  | SST_DEFAULT_CELL_NBR),\n};\n\nenum sst_ipc_msg {\n\tSST_IPC_IA_CMD = 1,\n\tSST_IPC_IA_SET_PARAMS,\n\tSST_IPC_IA_GET_PARAMS,\n};\n\nenum sst_cmd_type {\n\tSST_CMD_BYTES_SET = 1,\n\tSST_CMD_BYTES_GET = 2,\n};\n\nenum sst_task {\n\tSST_TASK_SBA = 1,\n\tSST_TASK_MMX = 3,\n};\n\nenum sst_type {\n\tSST_TYPE_CMD = 1,\n\tSST_TYPE_PARAMS,\n};\n\nenum sst_flag {\n\tSST_FLAG_BLOCKED = 1,\n\tSST_FLAG_NONBLOCK,\n};\n\n \nenum sst_gain_index {\n\t \n\tSST_GAIN_INDEX_CODEC_OUT0,\n\tSST_GAIN_INDEX_CODEC_OUT1,\n\tSST_GAIN_INDEX_CODEC_IN0,\n\tSST_GAIN_INDEX_CODEC_IN1,\n\n\tSST_GAIN_INDEX_SPROT_LOOP_OUT,\n\tSST_GAIN_INDEX_MEDIA_LOOP1_OUT,\n\tSST_GAIN_INDEX_MEDIA_LOOP2_OUT,\n\n\tSST_GAIN_INDEX_PCM0_IN_LEFT,\n\tSST_GAIN_INDEX_PCM0_IN_RIGHT,\n\n\tSST_GAIN_INDEX_PCM1_OUT_LEFT,\n\tSST_GAIN_INDEX_PCM1_OUT_RIGHT,\n\tSST_GAIN_INDEX_PCM1_IN_LEFT,\n\tSST_GAIN_INDEX_PCM1_IN_RIGHT,\n\tSST_GAIN_INDEX_PCM2_OUT_LEFT,\n\n\tSST_GAIN_INDEX_PCM2_OUT_RIGHT,\n\tSST_GAIN_INDEX_VOIP_OUT,\n\tSST_GAIN_INDEX_VOIP_IN,\n\n\t \n\tSST_GAIN_INDEX_MEDIA0_IN_LEFT,\n\tSST_GAIN_INDEX_MEDIA0_IN_RIGHT,\n\tSST_GAIN_INDEX_MEDIA1_IN_LEFT,\n\tSST_GAIN_INDEX_MEDIA1_IN_RIGHT,\n\n\tSST_GAIN_INDEX_MEDIA2_IN_LEFT,\n\tSST_GAIN_INDEX_MEDIA2_IN_RIGHT,\n\n\tSST_GAIN_INDEX_GAIN_END\n};\n\n \nenum sst_module_id {\n\tSST_MODULE_ID_PCM\t\t  = 0x0001,\n\tSST_MODULE_ID_MP3\t\t  = 0x0002,\n\tSST_MODULE_ID_MP24\t\t  = 0x0003,\n\tSST_MODULE_ID_AAC\t\t  = 0x0004,\n\tSST_MODULE_ID_AACP\t\t  = 0x0005,\n\tSST_MODULE_ID_EAACP\t\t  = 0x0006,\n\tSST_MODULE_ID_WMA9\t\t  = 0x0007,\n\tSST_MODULE_ID_WMA10\t\t  = 0x0008,\n\tSST_MODULE_ID_WMA10P\t\t  = 0x0009,\n\tSST_MODULE_ID_RA\t\t  = 0x000A,\n\tSST_MODULE_ID_DDAC3\t\t  = 0x000B,\n\tSST_MODULE_ID_TRUE_HD\t\t  = 0x000C,\n\tSST_MODULE_ID_HD_PLUS\t\t  = 0x000D,\n\n\tSST_MODULE_ID_SRC\t\t  = 0x0064,\n\tSST_MODULE_ID_DOWNMIX\t\t  = 0x0066,\n\tSST_MODULE_ID_GAIN_CELL\t\t  = 0x0067,\n\tSST_MODULE_ID_SPROT\t\t  = 0x006D,\n\tSST_MODULE_ID_BASS_BOOST\t  = 0x006E,\n\tSST_MODULE_ID_STEREO_WDNG\t  = 0x006F,\n\tSST_MODULE_ID_AV_REMOVAL\t  = 0x0070,\n\tSST_MODULE_ID_MIC_EQ\t\t  = 0x0071,\n\tSST_MODULE_ID_SPL\t\t  = 0x0072,\n\tSST_MODULE_ID_ALGO_VTSV           = 0x0073,\n\tSST_MODULE_ID_NR\t\t  = 0x0076,\n\tSST_MODULE_ID_BWX\t\t  = 0x0077,\n\tSST_MODULE_ID_DRP\t\t  = 0x0078,\n\tSST_MODULE_ID_MDRP\t\t  = 0x0079,\n\n\tSST_MODULE_ID_ANA\t\t  = 0x007A,\n\tSST_MODULE_ID_AEC\t\t  = 0x007B,\n\tSST_MODULE_ID_NR_SNS\t\t  = 0x007C,\n\tSST_MODULE_ID_SER\t\t  = 0x007D,\n\tSST_MODULE_ID_AGC\t\t  = 0x007E,\n\n\tSST_MODULE_ID_CNI\t\t  = 0x007F,\n\tSST_MODULE_ID_CONTEXT_ALGO_AWARE  = 0x0080,\n\tSST_MODULE_ID_FIR_24\t\t  = 0x0081,\n\tSST_MODULE_ID_IIR_24\t\t  = 0x0082,\n\n\tSST_MODULE_ID_ASRC\t\t  = 0x0083,\n\tSST_MODULE_ID_TONE_GEN\t\t  = 0x0084,\n\tSST_MODULE_ID_BMF\t\t  = 0x0086,\n\tSST_MODULE_ID_EDL\t\t  = 0x0087,\n\tSST_MODULE_ID_GLC\t\t  = 0x0088,\n\n\tSST_MODULE_ID_FIR_16\t\t  = 0x0089,\n\tSST_MODULE_ID_IIR_16\t\t  = 0x008A,\n\tSST_MODULE_ID_DNR\t\t  = 0x008B,\n\n\tSST_MODULE_ID_VIRTUALIZER\t  = 0x008C,\n\tSST_MODULE_ID_VISUALIZATION\t  = 0x008D,\n\tSST_MODULE_ID_LOUDNESS_OPTIMIZER  = 0x008E,\n\tSST_MODULE_ID_REVERBERATION\t  = 0x008F,\n\n\tSST_MODULE_ID_CNI_TX\t\t  = 0x0090,\n\tSST_MODULE_ID_REF_LINE\t\t  = 0x0091,\n\tSST_MODULE_ID_VOLUME\t\t  = 0x0092,\n\tSST_MODULE_ID_FILT_DCR\t\t  = 0x0094,\n\tSST_MODULE_ID_SLV\t\t  = 0x009A,\n\tSST_MODULE_ID_NLF\t\t  = 0x009B,\n\tSST_MODULE_ID_TNR\t\t  = 0x009C,\n\tSST_MODULE_ID_WNR\t\t  = 0x009D,\n\n\tSST_MODULE_ID_LOG\t\t  = 0xFF00,\n\n\tSST_MODULE_ID_TASK\t\t  = 0xFFFF,\n};\n\nenum sst_cmd {\n\tSBA_IDLE\t\t= 14,\n\tSBA_VB_SET_SPEECH_PATH\t= 26,\n\tMMX_SET_GAIN\t\t= 33,\n\tSBA_VB_SET_GAIN\t\t= 33,\n\tFBA_VB_RX_CNI\t\t= 35,\n\tMMX_SET_GAIN_TIMECONST\t= 36,\n\tSBA_VB_SET_TIMECONST\t= 36,\n\tSBA_VB_START\t\t= 85,\n\tSBA_SET_SWM\t\t= 114,\n\tSBA_SET_MDRP            = 116,\n\tSBA_HW_SET_SSP\t\t= 117,\n\tSBA_SET_MEDIA_LOOP_MAP\t= 118,\n\tSBA_SET_MEDIA_PATH\t= 119,\n\tMMX_SET_MEDIA_PATH\t= 119,\n\tSBA_VB_LPRO             = 126,\n\tSBA_VB_SET_FIR          = 128,\n\tSBA_VB_SET_IIR          = 129,\n\tSBA_SET_SSP_SLOT_MAP\t= 130,\n};\n\nenum sst_dsp_switch {\n\tSST_SWITCH_OFF = 0,\n\tSST_SWITCH_ON = 3,\n};\n\nenum sst_path_switch {\n\tSST_PATH_OFF = 0,\n\tSST_PATH_ON = 1,\n};\n\nenum sst_swm_state {\n\tSST_SWM_OFF = 0,\n\tSST_SWM_ON = 3,\n};\n\n#define SST_FILL_LOCATION_IDS(dst, cell_idx, pipe_id)\t\tdo {\t\\\n\t\tdst.location_id.p.cell_nbr_idx = (cell_idx);\t\t\\\n\t\tdst.location_id.p.path_id = (pipe_id);\t\t\t\\\n\t} while (0)\n#define SST_FILL_LOCATION_ID(dst, loc_id)\t\t\t\t(\\\n\tdst.location_id.f = (loc_id))\n#define SST_FILL_MODULE_ID(dst, mod_id)\t\t\t\t\t(\\\n\tdst.module_id = (mod_id))\n\n#define SST_FILL_DESTINATION1(dst, id)\t\t\t\tdo {\t\\\n\t\tSST_FILL_LOCATION_ID(dst, (id) & 0xFFFF);\t\t\\\n\t\tSST_FILL_MODULE_ID(dst, ((id) & 0xFFFF0000) >> 16);\t\\\n\t} while (0)\n#define SST_FILL_DESTINATION2(dst, loc_id, mod_id)\t\tdo {\t\\\n\t\tSST_FILL_LOCATION_ID(dst, loc_id);\t\t\t\\\n\t\tSST_FILL_MODULE_ID(dst, mod_id);\t\t\t\\\n\t} while (0)\n#define SST_FILL_DESTINATION3(dst, cell_idx, path_id, mod_id)\tdo {\t\\\n\t\tSST_FILL_LOCATION_IDS(dst, cell_idx, path_id);\t\t\\\n\t\tSST_FILL_MODULE_ID(dst, mod_id);\t\t\t\\\n\t} while (0)\n\n#define SST_FILL_DESTINATION(level, dst, ...)\t\t\t\t\\\n\tSST_FILL_DESTINATION##level(dst, __VA_ARGS__)\n#define SST_FILL_DEFAULT_DESTINATION(dst)\t\t\t\t\\\n\tSST_FILL_DESTINATION(2, dst, SST_DEFAULT_LOCATION_ID, SST_DEFAULT_MODULE_ID)\n\nstruct sst_destination_id {\n\tunion sst_location_id {\n\t\tstruct {\n\t\t\tu8 cell_nbr_idx;\t \n\t\t\tu8 path_id;\t\t \n\t\t} __packed\tp;\t\t \n\t\tu16\t\tf;\t\t \n\t} __packed location_id;\n\tu16\t   module_id;\n} __packed;\nstruct sst_dsp_header {\n\tstruct sst_destination_id dst;\n\tu16 command_id;\n\tu16 length;\n} __packed;\n\n \nstruct sst_cmd_generic {\n\tstruct sst_dsp_header header;\n} __packed;\n\nstruct swm_input_ids {\n\tstruct sst_destination_id input_id;\n} __packed;\n\nstruct sst_cmd_set_swm {\n\tstruct sst_dsp_header header;\n\tstruct sst_destination_id output_id;\n\tu16    switch_state;\n\tu16    nb_inputs;\n\tstruct swm_input_ids input[SST_CMD_SWM_MAX_INPUTS];\n} __packed;\n\nstruct sst_cmd_set_media_path {\n\tstruct sst_dsp_header header;\n\tu16    switch_state;\n} __packed;\n\nstruct pcm_cfg {\n\t\tu8 s_length:2;\n\t\tu8 rate:3;\n\t\tu8 format:3;\n} __packed;\n\nstruct sst_cmd_set_speech_path {\n\tstruct sst_dsp_header header;\n\tu16    switch_state;\n\tstruct {\n\t\tu16 rsvd:8;\n\t\tstruct pcm_cfg cfg;\n\t} config;\n} __packed;\n\nstruct gain_cell {\n\tstruct sst_destination_id dest;\n\ts16 cell_gain_left;\n\ts16 cell_gain_right;\n\tu16 gain_time_constant;\n} __packed;\n\n#define NUM_GAIN_CELLS 1\nstruct sst_cmd_set_gain_dual {\n\tstruct sst_dsp_header header;\n\tu16    gain_cell_num;\n\tstruct gain_cell cell_gains[NUM_GAIN_CELLS];\n} __packed;\nstruct sst_cmd_set_params {\n\tstruct sst_destination_id dst;\n\tu16 command_id;\n\tchar params[];\n} __packed;\n\n\nstruct sst_cmd_sba_vb_start {\n\tstruct sst_dsp_header header;\n} __packed;\n\nunion sba_media_loop_params {\n\tstruct {\n\t\tu16 rsvd:8;\n\t\tstruct pcm_cfg cfg;\n\t} part;\n\tu16 full;\n} __packed;\n\nstruct sst_cmd_sba_set_media_loop_map {\n\tstruct\tsst_dsp_header header;\n\tu16\tswitch_state;\n\tunion\tsba_media_loop_params param;\n\tu16\tmap;\n} __packed;\n\nstruct sst_cmd_tone_stop {\n\tstruct\tsst_dsp_header header;\n\tu16\tswitch_state;\n} __packed;\n\nenum sst_ssp_mode {\n\tSSP_MODE_PROVIDER = 0,\n\tSSP_MODE_CONSUMER = 1,\n};\n\nenum sst_ssp_pcm_mode {\n\tSSP_PCM_MODE_NORMAL = 0,\n\tSSP_PCM_MODE_NETWORK = 1,\n};\n\nenum sst_ssp_duplex {\n\tSSP_DUPLEX = 0,\n\tSSP_RX = 1,\n\tSSP_TX = 2,\n};\n\nenum sst_ssp_fs_frequency {\n\tSSP_FS_8_KHZ = 0,\n\tSSP_FS_16_KHZ = 1,\n\tSSP_FS_44_1_KHZ = 2,\n\tSSP_FS_48_KHZ = 3,\n};\n\nenum sst_ssp_fs_polarity {\n\tSSP_FS_ACTIVE_LOW = 0,\n\tSSP_FS_ACTIVE_HIGH = 1,\n};\n\nenum sst_ssp_protocol {\n\tSSP_MODE_PCM = 0,\n\tSSP_MODE_I2S = 1,\n};\n\nenum sst_ssp_port_id {\n\tSSP_MODEM = 0,\n\tSSP_BT = 1,\n\tSSP_FM = 2,\n\tSSP_CODEC = 3,\n};\n\nstruct sst_cmd_sba_hw_set_ssp {\n\tstruct sst_dsp_header header;\n\tu16 selection;\t\t\t \n\n\tu16 switch_state;\n\n\tu16 nb_bits_per_slots:6;         \n\tu16 nb_slots:4;\t\t\t \n\tu16 mode:3;\t\t\t \n\tu16 duplex:3;\n\n\tu16 active_tx_slot_map:8;        \n\tu16 reserved1:8;\n\n\tu16 active_rx_slot_map:8;        \n\tu16 reserved2:8;\n\n\tu16 frame_sync_frequency;\n\n\tu16 frame_sync_polarity:8;\n\tu16 data_polarity:8;\n\n\tu16 frame_sync_width;            \n\tu16 ssp_protocol:8;\n\tu16 start_delay:8;\t\t \n} __packed;\n\n#define SST_MAX_TDM_SLOTS 8\n\nstruct sst_param_sba_ssp_slot_map {\n\tstruct sst_dsp_header header;\n\n\tu16 param_id;\n\tu16 param_len;\n\tu16 ssp_index;\n\n\tu8 rx_slot_map[SST_MAX_TDM_SLOTS];\n\tu8 tx_slot_map[SST_MAX_TDM_SLOTS];\n} __packed;\n\nenum {\n\tSST_PROBE_EXTRACTOR = 0,\n\tSST_PROBE_INJECTOR = 1,\n};\n\n \n\n#define SST_MODULE_GAIN 1\n#define SST_MODULE_ALGO 2\n\n#define SST_FMT_MONO 0\n#define SST_FMT_STEREO 3\n\n \nenum {\n\tSST_SSP0 = 0,\n\tSST_SSP1,\n\tSST_SSP2,\n\tSST_SSP_LAST = SST_SSP2,\n};\n\n#define SST_NUM_SSPS\t\t(SST_SSP_LAST + 1)\t \n#define SST_MAX_SSP_MUX\t\t2\t\t\t \n#define SST_MAX_SSP_DOMAINS\t2\t\t\t \n\nstruct sst_module {\n\tstruct snd_kcontrol *kctl;\n\tstruct list_head node;\n};\n\nstruct sst_ssp_config {\n\tu8 ssp_id;\n\tu8 bits_per_slot;\n\tu8 slots;\n\tu8 ssp_mode;\n\tu8 pcm_mode;\n\tu8 duplex;\n\tu8 ssp_protocol;\n\tu8 fs_frequency;\n\tu8 active_slot_map;\n\tu8 start_delay;\n\tu16 fs_width;\n\tu8 frame_sync_polarity;\n\tu8 data_polarity;\n};\n\nstruct sst_ssp_cfg {\n\tconst u8 ssp_number;\n\tconst int *mux_shift;\n\tconst int (*domain_shift)[SST_MAX_SSP_MUX];\n\tconst struct sst_ssp_config (*ssp_config)[SST_MAX_SSP_MUX][SST_MAX_SSP_DOMAINS];\n};\n\nstruct sst_ids {\n\tu16 location_id;\n\tu16 module_id;\n\tu8  task_id;\n\tu8  format;\n\tu8  reg;\n\tconst char *parent_wname;\n\tstruct snd_soc_dapm_widget *parent_w;\n\tstruct list_head algo_list;\n\tstruct list_head gain_list;\n\tconst struct sst_pcm_format *pcm_fmt;\n};\n\n\n#define SST_AIF_IN(wname, wevent)\t\t\t\t\t\t\t\\\n{\t.id = snd_soc_dapm_aif_in, .name = wname, .sname = NULL,\t\t\t\\\n\t.reg = SND_SOC_NOPM, .shift = 0,\t\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD,\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = 0, .location_id = 0 }\t\t\\\n}\n\n#define SST_AIF_OUT(wname, wevent)\t\t\t\t\t\t\t\\\n{\t.id = snd_soc_dapm_aif_out, .name = wname, .sname = NULL,\t\t\t\\\n\t.reg = SND_SOC_NOPM, .shift = 0,\t\t\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD,\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = 0, .location_id = 0 }\t\t\\\n}\n\n#define SST_INPUT(wname, wevent)\t\t\t\t\t\t\t\\\n{\t.id = snd_soc_dapm_input, .name = wname, .sname = NULL,\t\t\t\t\\\n\t.reg = SND_SOC_NOPM, .shift = 0,\t\t\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD,\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = 0, .location_id = 0 }\t\t\\\n}\n\n#define SST_OUTPUT(wname, wevent)\t\t\t\t\t\t\t\\\n{\t.id = snd_soc_dapm_output, .name = wname, .sname = NULL,\t\t\t\\\n\t.reg = SND_SOC_NOPM, .shift = 0,\t\t\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD,\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = 0, .location_id = 0 }\t\t\\\n}\n\n#define SST_DAPM_OUTPUT(wname, wloc_id, wtask_id, wformat, wevent)                      \\\n{\t.id = snd_soc_dapm_output, .name = wname, .sname = NULL,                        \\\n\t.reg = SND_SOC_NOPM, .shift = 0,\t\t\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD,   \\\n\t.priv = (void *)&(struct sst_ids) { .location_id = wloc_id, .task_id = wtask_id,\\\n\t\t\t\t\t\t.pcm_fmt = wformat, }\t\t\t\\\n}\n\n#define SST_PATH(wname, wtask, wloc_id, wevent, wflags)\t\t\t\t\t\\\n{\t.id = snd_soc_dapm_pga, .name = wname, .reg = SND_SOC_NOPM, .shift = 0,\t\t\\\n\t.kcontrol_news = NULL, .num_kcontrols = 0,\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = wflags,\t\t\t\t\t\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = wtask, .location_id = wloc_id, }\t\\\n}\n\n#define SST_LINKED_PATH(wname, wtask, wloc_id, linked_wname, wevent, wflags)\t\t\\\n{\t.id = snd_soc_dapm_pga, .name = wname, .reg = SND_SOC_NOPM, .shift = 0,\t\t\\\n\t.kcontrol_news = NULL, .num_kcontrols = 0,\t\t\t\t\\\n\t.on_val = 1, .off_val = 0,\t\t\t\t\t\t\t\\\n\t.event = wevent, .event_flags = wflags,\t\t\t\t\t\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = wtask, .location_id = wloc_id,\t\\\n\t\t\t\t\t.parent_wname = linked_wname}\t\t\t\\\n}\n\n#define SST_PATH_MEDIA_LOOP(wname, wtask, wloc_id, wformat, wevent, wflags)             \\\n{\t.id = snd_soc_dapm_pga, .name = wname, .reg = SND_SOC_NOPM, .shift = 0,         \\\n\t.kcontrol_news = NULL, .num_kcontrols = 0,                         \\\n\t.event = wevent, .event_flags = wflags,                                         \\\n\t.priv = (void *)&(struct sst_ids) { .task_id = wtask, .location_id = wloc_id,\t\\\n\t\t\t\t\t    .format = wformat,}\t\t\t\t\\\n}\n\n \n#define SST_PATH_INPUT(name, task_id, loc_id, event)\t\t\t\t\t\\\n\tSST_PATH(name, task_id, loc_id, event, SND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_PRE_PMD)\n\n#define SST_PATH_LINKED_INPUT(name, task_id, loc_id, linked_wname, event)\t\t\\\n\tSST_LINKED_PATH(name, task_id, loc_id, linked_wname, event,\t\t\t\\\n\t\t\t\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_PRE_PMD)\n\n#define SST_PATH_OUTPUT(name, task_id, loc_id, event)\t\t\t\t\t\\\n\tSST_PATH(name, task_id, loc_id, event, SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD)\n\n#define SST_PATH_LINKED_OUTPUT(name, task_id, loc_id, linked_wname, event)\t\t\\\n\tSST_LINKED_PATH(name, task_id, loc_id, linked_wname, event,\t\t\t\\\n\t\t\t\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD)\n\n#define SST_PATH_MEDIA_LOOP_OUTPUT(name, task_id, loc_id, format, event)\t\t\\\n\tSST_PATH_MEDIA_LOOP(name, task_id, loc_id, format, event, SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD)\n\n\n#define SST_SWM_MIXER(wname, wreg, wtask, wloc_id, wcontrols, wevent)\t\t\t\\\n{\t.id = snd_soc_dapm_mixer, .name = wname, .reg = SND_SOC_NOPM, .shift = 0,\t\\\n\t.kcontrol_news = wcontrols, .num_kcontrols = ARRAY_SIZE(wcontrols),\\\n\t.event = wevent, .event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD |\t\\\n\t\t\t\t\tSND_SOC_DAPM_POST_REG,\t\t\t\t\\\n\t.priv = (void *)&(struct sst_ids) { .task_id = wtask, .location_id = wloc_id,\t\\\n\t\t\t\t\t    .reg = wreg }\t\t\t\t\\\n}\n\nenum sst_gain_kcontrol_type {\n\tSST_GAIN_TLV,\n\tSST_GAIN_MUTE,\n\tSST_GAIN_RAMP_DURATION,\n};\n\nstruct sst_gain_mixer_control {\n\tbool stereo;\n\tenum sst_gain_kcontrol_type type;\n\tstruct sst_gain_value *gain_val;\n\tint max;\n\tint min;\n\tu16 instance_id;\n\tu16 module_id;\n\tu16 pipe_id;\n\tu16 task_id;\n\tchar pname[SNDRV_CTL_ELEM_ID_NAME_MAXLEN];\n\tstruct snd_soc_dapm_widget *w;\n};\n\nstruct sst_gain_value {\n\tu16 ramp_duration;\n\ts16 l_gain;\n\ts16 r_gain;\n\tbool mute;\n};\n#define SST_GAIN_VOLUME_DEFAULT\t\t(-1440)\n#define SST_GAIN_RAMP_DURATION_DEFAULT\t5  \n#define SST_GAIN_MUTE_DEFAULT\t\ttrue\n\n#define SST_GAIN_KCONTROL_TLV(xname, xhandler_get, xhandler_put, \\\n\t\t\t      xmod, xpipe, xinstance, xtask, tlv_array, xgain_val, \\\n\t\t\t      xmin, xmax, xpname) \\\n\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \\\n\t.access = SNDRV_CTL_ELEM_ACCESS_TLV_READ | \\\n\t\t  SNDRV_CTL_ELEM_ACCESS_READWRITE, \\\n\t.tlv.p = (tlv_array), \\\n\t.info = sst_gain_ctl_info,\\\n\t.get = xhandler_get, .put = xhandler_put, \\\n\t.private_value = (unsigned long)&(struct sst_gain_mixer_control) \\\n\t{ .stereo = true, .max = xmax, .min = xmin, .type = SST_GAIN_TLV, \\\n\t  .module_id = xmod, .pipe_id = xpipe, .task_id = xtask,\\\n\t  .instance_id = xinstance, .gain_val = xgain_val, .pname = xpname}\n\n#define SST_GAIN_KCONTROL_INT(xname, xhandler_get, xhandler_put, \\\n\t\t\t      xmod, xpipe, xinstance, xtask, xtype, xgain_val, \\\n\t\t\t      xmin, xmax, xpname) \\\n\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \\\n\t.info = sst_gain_ctl_info, \\\n\t.get = xhandler_get, .put = xhandler_put, \\\n\t.private_value = (unsigned long)&(struct sst_gain_mixer_control) \\\n\t{ .stereo = false, .max = xmax, .min = xmin, .type = xtype, \\\n\t  .module_id = xmod, .pipe_id = xpipe, .task_id = xtask,\\\n\t  .instance_id = xinstance, .gain_val = xgain_val, .pname =  xpname}\n\n#define SST_GAIN_KCONTROL_BOOL(xname, xhandler_get, xhandler_put,\\\n\t\t\t       xmod, xpipe, xinstance, xtask, xgain_val, xpname) \\\n\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \\\n\t.info = snd_soc_info_bool_ext, \\\n\t.get = xhandler_get, .put = xhandler_put, \\\n\t.private_value = (unsigned long)&(struct sst_gain_mixer_control) \\\n\t{ .stereo = false, .type = SST_GAIN_MUTE, \\\n\t  .module_id = xmod, .pipe_id = xpipe, .task_id = xtask,\\\n\t  .instance_id = xinstance, .gain_val = xgain_val, .pname = xpname}\n#define SST_CONTROL_NAME(xpname, xmname, xinstance, xtype) \\\n\txpname \" \" xmname \" \" #xinstance \" \" xtype\n\n#define SST_COMBO_CONTROL_NAME(xpname, xmname, xinstance, xtype, xsubmodule) \\\n\txpname \" \" xmname \" \" #xinstance \" \" xtype \" \" xsubmodule\n\n \n#define SST_GAIN_KCONTROLS(xpname, xmname, xmin_gain, xmax_gain, xmin_tc, xmax_tc, \\\n\t\t\t   xhandler_get, xhandler_put, \\\n\t\t\t   xmod, xpipe, xinstance, xtask, tlv_array, xgain_val) \\\n\t{ SST_GAIN_KCONTROL_INT(SST_CONTROL_NAME(xpname, xmname, xinstance, \"Ramp Delay\"), \\\n\t\txhandler_get, xhandler_put, xmod, xpipe, xinstance, xtask, SST_GAIN_RAMP_DURATION, \\\n\t\txgain_val, xmin_tc, xmax_tc, xpname) }, \\\n\t{ SST_GAIN_KCONTROL_BOOL(SST_CONTROL_NAME(xpname, xmname, xinstance, \"Switch\"), \\\n\t\txhandler_get, xhandler_put, xmod, xpipe, xinstance, xtask, \\\n\t\txgain_val, xpname) } ,\\\n\t{ SST_GAIN_KCONTROL_TLV(SST_CONTROL_NAME(xpname, xmname, xinstance, \"Volume\"), \\\n\t\txhandler_get, xhandler_put, xmod, xpipe, xinstance, xtask, tlv_array, \\\n\t\txgain_val, xmin_gain, xmax_gain, xpname) }\n\n#define SST_GAIN_TC_MIN\t\t5\n#define SST_GAIN_TC_MAX\t\t5000\n#define SST_GAIN_MIN_VALUE\t-1440  \n#define SST_GAIN_MAX_VALUE\t360\n\nenum sst_algo_kcontrol_type {\n\tSST_ALGO_PARAMS,\n\tSST_ALGO_BYPASS,\n};\n\nstruct sst_algo_control {\n\tenum sst_algo_kcontrol_type type;\n\tint max;\n\tu16 module_id;\n\tu16 pipe_id;\n\tu16 task_id;\n\tu16 cmd_id;\n\tbool bypass;\n\tunsigned char *params;\n\tstruct snd_soc_dapm_widget *w;\n};\n\n \n#define SST_ALGO_CTL_VALUE(xcount, xtype, xpipe, xmod, xtask, xcmd)\t\t\t\\\n\t(struct sst_algo_control){\t\t\t\t\t\t\t\\\n\t\t.max = xcount + sizeof(u16), .type = xtype, .module_id = xmod,\t\t\t\\\n\t\t.pipe_id = xpipe, .task_id = xtask, .cmd_id = xcmd,\t\t\t\\\n\t}\n\n#define SST_ALGO_KCONTROL(xname, xcount, xmod, xpipe,\t\t\t\t\t\\\n\t\t\t  xtask, xcmd, xtype, xinfo, xget, xput)\t\t\t\\\n{\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER,\t\t\t\t\t\t\\\n\t.name =  xname,\t\t\t\t\t\t\t\t\t\\\n\t.info = xinfo, .get = xget, .put = xput,\t\t\t\t\t\\\n\t.private_value = (unsigned long)&\t\t\t\t\t\t\\\n\t\t\tSST_ALGO_CTL_VALUE(xcount, xtype, xpipe,\t\t\t\\\n\t\t\t\t\t   xmod, xtask, xcmd),\t\t\t\t\\\n}\n\n#define SST_ALGO_KCONTROL_BYTES(xpname, xmname, xcount, xmod,\t\t\t\t\\\n\t\t\t\txpipe, xinstance, xtask, xcmd)\t\t\t\t\\\n\tSST_ALGO_KCONTROL(SST_CONTROL_NAME(xpname, xmname, xinstance, \"params\"),\t\\\n\t\t\t  xcount, xmod, xpipe, xtask, xcmd, SST_ALGO_PARAMS,\t\t\\\n\t\t\t  sst_algo_bytes_ctl_info,\t\t\t\t\t\\\n\t\t\t  sst_algo_control_get, sst_algo_control_set)\n\n#define SST_ALGO_KCONTROL_BOOL(xpname, xmname, xmod, xpipe, xinstance, xtask)\t\t\\\n\tSST_ALGO_KCONTROL(SST_CONTROL_NAME(xpname, xmname, xinstance, \"bypass\"),\t\\\n\t\t\t  0, xmod, xpipe, xtask, 0, SST_ALGO_BYPASS,\t\t\t\\\n\t\t\t  snd_soc_info_bool_ext,\t\t\t\t\t\\\n\t\t\t  sst_algo_control_get, sst_algo_control_set)\n\n#define SST_ALGO_BYPASS_PARAMS(xpname, xmname, xcount, xmod, xpipe,\t\t\t\\\n\t\t\t\txinstance, xtask, xcmd)\t\t\t\t\t\\\n\tSST_ALGO_KCONTROL_BOOL(xpname, xmname, xmod, xpipe, xinstance, xtask),\t\t\\\n\tSST_ALGO_KCONTROL_BYTES(xpname, xmname, xcount, xmod, xpipe, xinstance, xtask, xcmd)\n\n#define SST_COMBO_ALGO_KCONTROL_BYTES(xpname, xmname, xsubmod, xcount, xmod,\t\t\\\n\t\t\t\t      xpipe, xinstance, xtask, xcmd)\t\t\t\\\n\tSST_ALGO_KCONTROL(SST_COMBO_CONTROL_NAME(xpname, xmname, xinstance, \"params\",\t\\\n\t\t\t\t\t\t xsubmod),\t\t\t\t\\\n\t\t\t  xcount, xmod, xpipe, xtask, xcmd, SST_ALGO_PARAMS,\t\t\\\n\t\t\t  sst_algo_bytes_ctl_info,\t\t\t\t\t\\\n\t\t\t  sst_algo_control_get, sst_algo_control_set)\n\n\nstruct sst_enum {\n\tbool tx;\n\tunsigned short reg;\n\tunsigned int max;\n\tconst char * const *texts;\n\tstruct snd_soc_dapm_widget *w;\n};\n\n \n#define SST_SSP_SLOT_ENUM(s_ch_no, is_tx, xtexts) \\\n\t(struct sst_enum){ .reg = s_ch_no, .tx = is_tx, .max = 4+1, .texts = xtexts, }\n\n#define SST_SLOT_CTL_NAME(xpname, xmname, s_ch_name) \\\n\txpname \" \" xmname \" \" s_ch_name\n\n#define SST_SSP_SLOT_CTL(xpname, xmname, s_ch_name, s_ch_no, is_tx, xtexts, xget, xput) \\\n{\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n\t.name = SST_SLOT_CTL_NAME(xpname, xmname, s_ch_name), \\\n\t.info = sst_slot_enum_info, \\\n\t.get = xget, .put = xput, \\\n\t.private_value = (unsigned long)&SST_SSP_SLOT_ENUM(s_ch_no, is_tx, xtexts), \\\n}\n\n#define SST_MUX_CTL_NAME(xpname, xinstance) \\\n\txpname \" \" #xinstance\n\n#define SST_SSP_MUX_ENUM(xreg, xshift, xtexts) \\\n\t(struct soc_enum) SOC_ENUM_DOUBLE(xreg, xshift, xshift, ARRAY_SIZE(xtexts), xtexts)\n\n#define SST_SSP_MUX_CTL(xpname, xinstance, xreg, xshift, xtexts) \\\n\tSOC_DAPM_ENUM(SST_MUX_CTL_NAME(xpname, xinstance), \\\n\t\t\t  SST_SSP_MUX_ENUM(xreg, xshift, xtexts))\n\nint sst_fill_ssp_slot(struct snd_soc_dai *dai, unsigned int tx_mask,\n\t\t\t\tunsigned int rx_mask, int slots, int slot_width);\nint sst_fill_ssp_config(struct snd_soc_dai *dai, unsigned int fmt);\nvoid sst_fill_ssp_defaults(struct snd_soc_dai *dai);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}