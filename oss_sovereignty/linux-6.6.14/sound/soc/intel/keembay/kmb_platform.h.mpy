{
  "module_name": "kmb_platform.h",
  "hash_id": "99314d241c77ccad707b14100d614f000f9fb0dd3001286111dd8de368719911",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/intel/keembay/kmb_platform.h",
  "human_readable_source": " \n \n\n#ifndef KMB_PLATFORM_H_\n#define KMB_PLATFORM_H_\n\n#include <linux/bits.h>\n#include <linux/bitfield.h>\n#include <linux/types.h>\n#include <sound/dmaengine_pcm.h>\n\n \n \n#define IER\t\t0x000\n#define IRER\t\t0x004\n#define ITER\t\t0x008\n#define CER\t\t0x00C\n#define CCR\t\t0x010\n#define RXFFR\t\t0x014\n#define TXFFR\t\t0x018\n\n \n#define ISR_TXFO\tBIT(5)\n#define ISR_TXFE\tBIT(4)\n#define ISR_RXFO\tBIT(1)\n#define ISR_RXDA\tBIT(0)\n\n \n#define LRBR_LTHR(x)\t(0x40 * (x) + 0x020)\n#define RRBR_RTHR(x)\t(0x40 * (x) + 0x024)\n#define RER(x)\t\t(0x40 * (x) + 0x028)\n#define TER(x)\t\t(0x40 * (x) + 0x02C)\n#define RCR(x)\t\t(0x40 * (x) + 0x030)\n#define TCR(x)\t\t(0x40 * (x) + 0x034)\n#define ISR(x)\t\t(0x40 * (x) + 0x038)\n#define IMR(x)\t\t(0x40 * (x) + 0x03C)\n#define ROR(x)\t\t(0x40 * (x) + 0x040)\n#define TOR(x)\t\t(0x40 * (x) + 0x044)\n#define RFCR(x)\t\t(0x40 * (x) + 0x048)\n#define TFCR(x)\t\t(0x40 * (x) + 0x04C)\n#define RFF(x)\t\t(0x40 * (x) + 0x050)\n#define TFF(x)\t\t(0x40 * (x) + 0x054)\n\n \n#define I2S_COMP_PARAM_2\t0x01F0\n#define I2S_COMP_PARAM_1\t0x01F4\n#define I2S_COMP_VERSION\t0x01F8\n#define I2S_COMP_TYPE\t\t0x01FC\n\n \n#define I2S_GEN_CFG_0\t\t0x000\n#define PSS_CPR_RST_EN\t\t0x010\n#define PSS_CPR_RST_SET\t\t0x014\n#define PSS_CPR_CLK_CLR\t\t0x000\n#define PSS_CPR_AUX_RST_EN\t0x070\n\n#define CLOCK_PROVIDER_MODE\tBIT(13)\n\n \n#define TX_INT_FLAG\t\tGENMASK(5, 4)\n#define RX_INT_FLAG\t\tGENMASK(1, 0)\n \n#define\tCOMP1_TX_WORDSIZE_3(r)\t\tFIELD_GET(GENMASK(27, 25), (r))\n#define\tCOMP1_TX_WORDSIZE_2(r)\t\tFIELD_GET(GENMASK(24, 22), (r))\n#define\tCOMP1_TX_WORDSIZE_1(r)\t\tFIELD_GET(GENMASK(21, 19), (r))\n#define\tCOMP1_TX_WORDSIZE_0(r)\t\tFIELD_GET(GENMASK(18, 16), (r))\n#define\tCOMP1_RX_ENABLED(r)\t\tFIELD_GET(BIT(6), (r))\n#define\tCOMP1_TX_ENABLED(r)\t\tFIELD_GET(BIT(5), (r))\n#define\tCOMP1_MODE_EN(r)\t\tFIELD_GET(BIT(4), (r))\n#define\tCOMP1_APB_DATA_WIDTH(r)\t\tFIELD_GET(GENMASK(1, 0), (r))\n#define\tCOMP2_RX_WORDSIZE_3(r)\t\tFIELD_GET(GENMASK(12, 10), (r))\n#define\tCOMP2_RX_WORDSIZE_2(r)\t\tFIELD_GET(GENMASK(9, 7), (r))\n#define\tCOMP2_RX_WORDSIZE_1(r)\t\tFIELD_GET(GENMASK(5, 3), (r))\n#define\tCOMP2_RX_WORDSIZE_0(r)\t\tFIELD_GET(GENMASK(2, 0), (r))\n\n \n#define\tCOMP1_TX_CHANNELS(r)\t(FIELD_GET(GENMASK(10, 9), (r)) + 1)\n#define\tCOMP1_RX_CHANNELS(r)\t(FIELD_GET(GENMASK(8, 7), (r)) + 1)\n#define\tCOMP1_FIFO_DEPTH(r)\t(FIELD_GET(GENMASK(3, 2), (r)) + 1)\n\n \n#define\tCOMP_MAX_WORDSIZE\t8\t \n\n#define MAX_CHANNEL_NUM\t\t8\n#define MIN_CHANNEL_NUM\t\t2\n#define MAX_ISR\t\t\t4\n\n#define TWO_CHANNEL_SUPPORT\t2\t \n#define FOUR_CHANNEL_SUPPORT\t4\t \n#define SIX_CHANNEL_SUPPORT\t6\t \n#define EIGHT_CHANNEL_SUPPORT\t8\t \n\n#define DWC_I2S_PLAY\tBIT(0)\n#define DWC_I2S_RECORD\tBIT(1)\n#define DW_I2S_CONSUMER\tBIT(2)\n#define DW_I2S_PROVIDER\tBIT(3)\n\n#define I2S_RXDMA\t0x01C0\n#define I2S_RRXDMA\t0x01C4\n#define I2S_TXDMA\t0x01C8\n#define I2S_RTXDMA\t0x01CC\n#define I2S_DMACR\t0x0200\n#define I2S_DMAEN_RXBLOCK\t(1 << 16)\n#define I2S_DMAEN_TXBLOCK\t(1 << 17)\n\n \nstruct i2s_clk_config_data {\n\tint chan_nr;\n\tu32 data_width;\n\tu32 sample_rate;\n};\n\nstruct kmb_i2s_info {\n\tvoid __iomem *i2s_base;\n\tvoid __iomem *pss_base;\n\tstruct clk *clk_i2s;\n\tstruct clk *clk_apb;\n\tint active;\n\tunsigned int capability;\n\tunsigned int i2s_reg_comp1;\n\tunsigned int i2s_reg_comp2;\n\tstruct device *dev;\n\tu32 ccr;\n\tu32 xfer_resolution;\n\tu32 fifo_th;\n\tbool clock_provider;\n\t \n\tstruct snd_dmaengine_dai_dma_data play_dma_data;\n\tstruct snd_dmaengine_dai_dma_data capture_dma_data;\n\n\tstruct i2s_clk_config_data config;\n\tint (*i2s_clk_cfg)(struct i2s_clk_config_data *config);\n\n\t \n\tbool use_pio;\n\tstruct snd_pcm_substream *tx_substream;\n\tstruct snd_pcm_substream *rx_substream;\n\tunsigned int tx_ptr;\n\tunsigned int rx_ptr;\n\tbool iec958_fmt;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}