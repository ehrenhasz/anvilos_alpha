{
  "module_name": "skl.h",
  "hash_id": "ee6ecce4e7273673f160f1d3eec74df8292fb99a637d7c0845febd304ae84597",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/intel/skylake/skl.h",
  "human_readable_source": " \n \n\n#ifndef __SOUND_SOC_SKL_H\n#define __SOUND_SOC_SKL_H\n\n#include <sound/hda_register.h>\n#include <sound/hdaudio_ext.h>\n#include <sound/hda_codec.h>\n#include <sound/soc.h>\n#include \"skl-ssp-clk.h\"\n#include \"skl-sst-ipc.h\"\n\n#define SKL_SUSPEND_DELAY 2000\n\n#define SKL_MAX_ASTATE_CFG\t\t3\n\n#define AZX_PCIREG_PGCTL\t\t0x44\n#define AZX_PGCTL_LSRMD_MASK\t\t(1 << 4)\n#define AZX_PGCTL_ADSPPGD\t\tBIT(2)\n#define AZX_PCIREG_CGCTL\t\t0x48\n#define AZX_CGCTL_MISCBDCGE_MASK\t(1 << 6)\n#define AZX_CGCTL_ADSPDCGE\t\tBIT(1)\n \n#define AZX_REG_VS_D0I3C_CIP      0x1  \n#define AZX_REG_VS_D0I3C_I3       0x4  \n#define SKL_MAX_DMACTRL_CFG\t18\n#define DMA_CLK_CONTROLS\t1\n#define DMA_TRANSMITION_START\t2\n#define DMA_TRANSMITION_STOP\t3\n\n#define AZX_VS_EM2_DUM\t\t\tBIT(23)\n#define AZX_REG_VS_EM2_L1SEN\t\tBIT(13)\n\nstruct skl_debug;\n\nstruct skl_astate_param {\n\tu32 kcps;\n\tu32 clk_src;\n};\n\nstruct skl_astate_config {\n\tu32 count;\n\tstruct skl_astate_param astate_table[];\n};\n\nstruct skl_fw_config {\n\tstruct skl_astate_config *astate_cfg;\n};\n\nstruct skl_dev {\n\tstruct hda_bus hbus;\n\tstruct pci_dev *pci;\n\n\tunsigned int init_done:1;  \n\tstruct platform_device *dmic_dev;\n\tstruct platform_device *i2s_dev;\n\tstruct platform_device *clk_dev;\n\tstruct snd_soc_component *component;\n\tstruct snd_soc_dai_driver *dais;\n\n\tstruct nhlt_acpi_table *nhlt;  \n\n\tstruct list_head ppl_list;\n\tstruct list_head bind_list;\n\n\tconst char *fw_name;\n\tchar tplg_name[64];\n\tunsigned short pci_id;\n\n\tint supend_active;\n\n\tstruct work_struct probe_work;\n\n\tstruct skl_debug *debugfs;\n\tu8 nr_modules;\n\tstruct skl_module **modules;\n\tbool use_tplg_pcm;\n\tstruct skl_fw_config cfg;\n\tstruct snd_soc_acpi_mach *mach;\n\n\tstruct device *dev;\n\tstruct sst_dsp *dsp;\n\n\t \n\twait_queue_head_t boot_wait;\n\tbool boot_complete;\n\n\t \n\twait_queue_head_t mod_load_wait;\n\tbool mod_load_complete;\n\tbool mod_load_status;\n\n\t \n\tstruct sst_generic_ipc ipc;\n\n\t \n\tvoid (*enable_miscbdcge)(struct device *dev, bool enable);\n\t \n\tbool miscbdcg_disabled;\n\n\t \n\tstruct list_head uuid_list;\n\n\t \n\tbool fw_loaded;\n\n\t \n\tbool is_first_boot;\n\n\t \n\tstruct skl_dsp_cores cores;\n\n\t \n\tstruct skl_lib_info  lib_info[SKL_MAX_LIB];\n\tint lib_count;\n\n\t \n\tvoid (*update_d0i3c)(struct device *dev, bool enable);\n\n\tstruct skl_d0i3_data d0i3;\n\n\tconst struct skl_dsp_ops *dsp_ops;\n\n\t \n\tvoid (*clock_power_gating)(struct device *dev, bool enable);\n};\n\n#define skl_to_bus(s)  (&(s)->hbus.core)\n#define bus_to_skl(bus) container_of(bus, struct skl_dev, hbus.core)\n\n#define skl_to_hbus(s) (&(s)->hbus)\n#define hbus_to_skl(hbus) container_of((hbus), struct skl_dev, (hbus))\n\n \nstruct skl_dma_params {\n\tu32 format;\n\tu8 stream_tag;\n};\n\nstruct skl_machine_pdata {\n\tbool use_tplg_pcm;  \n};\n\nstruct skl_dsp_ops {\n\tint id;\n\tunsigned int num_cores;\n\tstruct skl_dsp_loader_ops (*loader_ops)(void);\n\tint (*init)(struct device *dev, void __iomem *mmio_base,\n\t\t\tint irq, const char *fw_name,\n\t\t\tstruct skl_dsp_loader_ops loader_ops,\n\t\t\tstruct skl_dev **skl_sst);\n\tint (*init_fw)(struct device *dev, struct skl_dev *skl);\n\tvoid (*cleanup)(struct device *dev, struct skl_dev *skl);\n};\n\nint skl_platform_unregister(struct device *dev);\nint skl_platform_register(struct device *dev);\n\nint skl_nhlt_update_topology_bin(struct skl_dev *skl);\nint skl_init_dsp(struct skl_dev *skl);\nint skl_free_dsp(struct skl_dev *skl);\nint skl_suspend_late_dsp(struct skl_dev *skl);\nint skl_suspend_dsp(struct skl_dev *skl);\nint skl_resume_dsp(struct skl_dev *skl);\nvoid skl_cleanup_resources(struct skl_dev *skl);\nconst struct skl_dsp_ops *skl_get_dsp_ops(int pci_id);\nvoid skl_update_d0i3c(struct device *dev, bool enable);\nint skl_nhlt_create_sysfs(struct skl_dev *skl);\nvoid skl_nhlt_remove_sysfs(struct skl_dev *skl);\nvoid skl_get_clks(struct skl_dev *skl, struct skl_ssp_clk *ssp_clks);\nstruct skl_clk_parent_src *skl_get_parent_clk(u8 clk_id);\nint skl_dsp_set_dma_control(struct skl_dev *skl, u32 *caps,\n\t\t\t\tu32 caps_size, u32 node_id);\n\nstruct skl_module_cfg;\n\n#ifdef CONFIG_DEBUG_FS\nstruct skl_debug *skl_debugfs_init(struct skl_dev *skl);\nvoid skl_debugfs_exit(struct skl_dev *skl);\nvoid skl_debug_init_module(struct skl_debug *d,\n\t\t\tstruct snd_soc_dapm_widget *w,\n\t\t\tstruct skl_module_cfg *mconfig);\n#else\nstatic inline struct skl_debug *skl_debugfs_init(struct skl_dev *skl)\n{\n\treturn NULL;\n}\n\nstatic inline void skl_debugfs_exit(struct skl_dev *skl)\n{}\n\nstatic inline void skl_debug_init_module(struct skl_debug *d,\n\t\t\t\t\t struct snd_soc_dapm_widget *w,\n\t\t\t\t\t struct skl_module_cfg *mconfig)\n{}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}