{
  "module_name": "siu.h",
  "hash_id": "5b5e0f2c0296d0de8f5529c3a39d19dcd1a8d5a224ea9ead41da29029c540524",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sh/siu.h",
  "human_readable_source": "\n\n\n\n\n\n\n#ifndef SIU_H\n#define SIU_H\n\n \n\n#define YRAM0_SIZE\t\t(0x0040 / 4)\t\t \n#define YRAM1_SIZE\t\t(0x0080 / 4)\t\t \n#define YRAM2_SIZE\t\t(0x0040 / 4)\t\t \n#define YRAM3_SIZE\t\t(0x0080 / 4)\t\t \n#define YRAM4_SIZE\t\t(0x0080 / 4)\t\t \n#define YRAM_DEF_SIZE\t\t(YRAM0_SIZE + YRAM1_SIZE + YRAM2_SIZE + \\\n\t\t\t\t YRAM3_SIZE + YRAM4_SIZE)\n#define YRAM_FIR_SIZE\t\t(0x0400 / 4)\t\t \n#define YRAM_IIR_SIZE\t\t(0x0200 / 4)\t\t \n\n#define XRAM0_SIZE\t\t(0x0400 / 4)\t\t \n#define XRAM1_SIZE\t\t(0x0200 / 4)\t\t \n#define XRAM2_SIZE\t\t(0x0200 / 4)\t\t \n\n \n#define PRAM0_SIZE\t\t(0x0100 / 4)\t\t \n#define PRAM1_SIZE\t\t((0x2000 - 0x0100) / 4)\t \n\n#include <linux/types.h>\n\nstruct siu_spb_param {\n\t__u32\tab1a;\t \n\t__u32\tab0a;\t \n\t__u32\tdir;\t \n\t__u32\tevent;\t \n\t__u32\tstfifo;\t \n\t__u32\ttrdat;\t \n};\n\nstruct siu_firmware {\n\t__u32\t\t\tyram_fir_coeff[YRAM_FIR_SIZE];\n\t__u32\t\t\tpram0[PRAM0_SIZE];\n\t__u32\t\t\tpram1[PRAM1_SIZE];\n\t__u32\t\t\tyram0[YRAM0_SIZE];\n\t__u32\t\t\tyram1[YRAM1_SIZE];\n\t__u32\t\t\tyram2[YRAM2_SIZE];\n\t__u32\t\t\tyram3[YRAM3_SIZE];\n\t__u32\t\t\tyram4[YRAM4_SIZE];\n\t__u32\t\t\tspbpar_num;\n\tstruct siu_spb_param\tspbpar[32];\n};\n\n#ifdef __KERNEL__\n\n#include <linux/dmaengine.h>\n#include <linux/interrupt.h>\n#include <linux/io.h>\n#include <linux/sh_dma.h>\n\n#include <sound/core.h>\n#include <sound/pcm.h>\n#include <sound/soc.h>\n\n#define SIU_PERIOD_BYTES_MAX\t8192\t\t \n#define SIU_PERIOD_BYTES_MIN\t256\t\t \n#define SIU_PERIODS_MAX\t\t64\t\t \n#define SIU_PERIODS_MIN\t\t4\t\t \n#define SIU_BUFFER_BYTES_MAX\t(SIU_PERIOD_BYTES_MAX * SIU_PERIODS_MAX)\n\n \nenum {\n\tSIU_PORT_A,\n\tSIU_PORT_B,\n\tSIU_PORT_NUM,\n};\n\n \nenum {\n\tSIU_CLKA_PLL,\n\tSIU_CLKA_EXT,\n\tSIU_CLKB_PLL,\n\tSIU_CLKB_EXT\n};\n\nstruct device;\nstruct siu_info {\n\tstruct device\t\t*dev;\n\tint\t\t\tport_id;\n\tu32 __iomem\t\t*pram;\n\tu32 __iomem\t\t*xram;\n\tu32 __iomem\t\t*yram;\n\tu32 __iomem\t\t*reg;\n\tstruct siu_firmware\tfw;\n};\n\nstruct siu_stream {\n\tstruct work_struct\t\twork;\n\tstruct snd_pcm_substream\t*substream;\n\tsnd_pcm_format_t\t\tformat;\n\tsize_t\t\t\t\tbuf_bytes;\n\tsize_t\t\t\t\tperiod_bytes;\n\tint\t\t\t\tcur_period;\t \n\tu32\t\t\t\tvolume;\n\tsnd_pcm_sframes_t\t\txfer_cnt;\t \n\tu8\t\t\t\trw_flg;\t\t \n\t \n\tstruct dma_chan\t\t\t*chan;\t\t \n\tstruct dma_async_tx_descriptor\t*tx_desc;\n\tdma_cookie_t\t\t\tcookie;\n\tstruct sh_dmae_slave\t\tparam;\n};\n\nstruct siu_port {\n\tunsigned long\t\tplay_cap;\t \n\tstruct snd_pcm\t\t*pcm;\n\tstruct siu_stream\tplayback;\n\tstruct siu_stream\tcapture;\n\tu32\t\t\tstfifo;\t\t \n\tu32\t\t\ttrdat;\t\t \n};\n\nextern struct siu_port *siu_ports[SIU_PORT_NUM];\n\nstatic inline struct siu_port *siu_port_info(struct snd_pcm_substream *substream)\n{\n\tstruct platform_device *pdev =\n\t\tto_platform_device(substream->pcm->card->dev);\n\treturn siu_ports[pdev->id];\n}\n\n \nstatic inline void siu_write32(u32 __iomem *addr, u32 val)\n{\n\t__raw_writel(val, addr);\n}\n\nstatic inline u32 siu_read32(u32 __iomem *addr)\n{\n\treturn __raw_readl(addr);\n}\n\n \n#define SIU_IFCTL\t(0x000 / sizeof(u32))\n#define SIU_SRCTL\t(0x004 / sizeof(u32))\n#define SIU_SFORM\t(0x008 / sizeof(u32))\n#define SIU_CKCTL\t(0x00c / sizeof(u32))\n#define SIU_TRDAT\t(0x010 / sizeof(u32))\n#define SIU_STFIFO\t(0x014 / sizeof(u32))\n#define SIU_DPAK\t(0x01c / sizeof(u32))\n#define SIU_CKREV\t(0x020 / sizeof(u32))\n#define SIU_EVNTC\t(0x028 / sizeof(u32))\n#define SIU_SBCTL\t(0x040 / sizeof(u32))\n#define SIU_SBPSET\t(0x044 / sizeof(u32))\n#define SIU_SBFSTS\t(0x068 / sizeof(u32))\n#define SIU_SBDVCA\t(0x06c / sizeof(u32))\n#define SIU_SBDVCB\t(0x070 / sizeof(u32))\n#define SIU_SBACTIV\t(0x074 / sizeof(u32))\n#define SIU_DMAIA\t(0x090 / sizeof(u32))\n#define SIU_DMAIB\t(0x094 / sizeof(u32))\n#define SIU_DMAOA\t(0x098 / sizeof(u32))\n#define SIU_DMAOB\t(0x09c / sizeof(u32))\n#define SIU_DMAML\t(0x0a0 / sizeof(u32))\n#define SIU_SPSTS\t(0x0cc / sizeof(u32))\n#define SIU_SPCTL\t(0x0d0 / sizeof(u32))\n#define SIU_BRGASEL\t(0x100 / sizeof(u32))\n#define SIU_BRRA\t(0x104 / sizeof(u32))\n#define SIU_BRGBSEL\t(0x108 / sizeof(u32))\n#define SIU_BRRB\t(0x10c / sizeof(u32))\n\nextern const struct snd_soc_component_driver siu_component;\nextern struct siu_info *siu_i2s_data;\n\nint siu_init_port(int port, struct siu_port **port_info, struct snd_card *card);\nvoid siu_free_port(struct siu_port *port_info);\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}