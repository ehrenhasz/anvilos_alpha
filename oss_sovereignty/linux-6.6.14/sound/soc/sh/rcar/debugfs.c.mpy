{
  "module_name": "debugfs.c",
  "hash_id": "ce88d6a64834bd5064052652d0b9f9ba23e18db575c316c3fa3a131145e2a633",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sh/rcar/debugfs.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n\n\n\n#ifdef CONFIG_DEBUG_FS\n\n#include <linux/debugfs.h>\n#include \"rsnd.h\"\n\nstatic int rsnd_debugfs_show(struct seq_file *m, void *v)\n{\n\tstruct rsnd_dai_stream *io = m->private;\n\tstruct rsnd_mod *mod = rsnd_io_to_mod_ssi(io);\n\tstruct rsnd_priv *priv = rsnd_mod_to_priv(mod);\n\tint i;\n\n\t \n\trsnd_adg_clk_dbg_info(priv, m);\n\n\tfor_each_rsnd_mod(i, mod, io) {\n\t\tu32 *status = mod->ops->get_status(mod, io, mod->type);\n\n\t\tseq_printf(m, \"name: %s\\n\", rsnd_mod_name(mod));\n\t\tseq_printf(m, \"status: %08x\\n\", *status);\n\n\t\tif (mod->ops->debug_info)\n\t\t\tmod->ops->debug_info(m, io, mod);\n\t}\n\n\treturn 0;\n}\nDEFINE_SHOW_ATTRIBUTE(rsnd_debugfs);\n\nvoid rsnd_debugfs_reg_show(struct seq_file *m, phys_addr_t _addr,\n\t\t\t   void __iomem *base, int offset, int size)\n{\n\tint i, j;\n\n\tfor (i = 0; i < size; i += 0x10) {\n\t\tphys_addr_t addr = _addr + offset + i;\n\n\t\tseq_printf(m, \"%pa:\", &addr);\n\t\tfor (j = 0; j < 0x10; j += 0x4)\n\t\t\tseq_printf(m, \" %08x\", __raw_readl(base + offset + i + j));\n\t\tseq_puts(m, \"\\n\");\n\t}\n}\n\nvoid rsnd_debugfs_mod_reg_show(struct seq_file *m, struct rsnd_mod *mod,\n\t\t\t       int reg_id, int offset, int size)\n{\n\tstruct rsnd_priv *priv = rsnd_mod_to_priv(mod);\n\n\trsnd_debugfs_reg_show(m,\n\t\t\t      rsnd_gen_get_phy_addr(priv, reg_id),\n\t\t\t      rsnd_gen_get_base_addr(priv, reg_id),\n\t\t\t      offset, size);\n}\n\nint rsnd_debugfs_probe(struct snd_soc_component *component)\n{\n\tstruct rsnd_priv *priv = dev_get_drvdata(component->dev);\n\tstruct rsnd_dai *rdai;\n\tstruct dentry *dir;\n\tchar name[64];\n\tint i;\n\n\t \n\tif (rsnd_is_gen1(priv))\n\t\treturn 0;\n\n\tfor_each_rsnd_dai(rdai, priv, i) {\n\t\t \n\t\tsnprintf(name, sizeof(name), \"rdai%d\", i);\n\t\tdir = debugfs_create_dir(name, component->debugfs_root);\n\n\t\tdebugfs_create_file(\"playback\", 0444, dir, &rdai->playback, &rsnd_debugfs_fops);\n\t\tdebugfs_create_file(\"capture\",  0444, dir, &rdai->capture,  &rsnd_debugfs_fops);\n\t}\n\n\treturn 0;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}