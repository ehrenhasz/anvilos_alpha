{
  "module_name": "gen.c",
  "hash_id": "cf7412c37e53b83ac44510254cd62637489a36f473267158b2b7854965a9bc92",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sh/rcar/gen.c",
  "human_readable_source": "\n\n\n\n\n\n\n \n\n#include \"rsnd.h\"\n\nstruct rsnd_gen {\n\tstruct rsnd_gen_ops *ops;\n\n\t \n\tvoid __iomem *base[RSND_BASE_MAX];\n\tphys_addr_t res[RSND_BASE_MAX];\n\tstruct regmap *regmap[RSND_BASE_MAX];\n\n\t \n\tstruct regmap_field *regs[REG_MAX];\n\tconst char *reg_name[REG_MAX];\n};\n\n#define rsnd_priv_to_gen(p)\t((struct rsnd_gen *)(p)->gen)\n#define rsnd_reg_name(gen, id)\t((gen)->reg_name[id])\n\nstruct rsnd_regmap_field_conf {\n\tint idx;\n\tunsigned int reg_offset;\n\tunsigned int id_offset;\n\tconst char *reg_name;\n};\n\n#define RSND_REG_SET(id, offset, _id_offset, n)\t\\\n{\t\t\t\t\t\t\\\n\t.idx = id,\t\t\t\t\\\n\t.reg_offset = offset,\t\t\t\\\n\t.id_offset = _id_offset,\t\t\\\n\t.reg_name = n,\t\t\t\t\\\n}\n \n#define RSND_GEN_S_REG(id, offset)\t\\\n\tRSND_REG_SET(id, offset, 0, #id)\n\n \n#define RSND_GEN_M_REG(id, offset, _id_offset)\t\\\n\tRSND_REG_SET(id, offset, _id_offset, #id)\n\n \nstatic int rsnd_is_accessible_reg(struct rsnd_priv *priv,\n\t\t\t\t  struct rsnd_gen *gen, enum rsnd_reg reg)\n{\n\tif (!gen->regs[reg]) {\n\t\tstruct device *dev = rsnd_priv_to_dev(priv);\n\n\t\tdev_err(dev, \"unsupported register access %x\\n\", reg);\n\t\treturn 0;\n\t}\n\n\treturn 1;\n}\n\nstatic int rsnd_mod_id_cmd(struct rsnd_mod *mod)\n{\n\tif (mod->ops->id_cmd)\n\t\treturn mod->ops->id_cmd(mod);\n\n\treturn rsnd_mod_id(mod);\n}\n\nu32 rsnd_mod_read(struct rsnd_mod *mod, enum rsnd_reg reg)\n{\n\tstruct rsnd_priv *priv = rsnd_mod_to_priv(mod);\n\tstruct device *dev = rsnd_priv_to_dev(priv);\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\tu32 val;\n\n\tif (!rsnd_is_accessible_reg(priv, gen, reg))\n\t\treturn 0;\n\n\tregmap_fields_read(gen->regs[reg], rsnd_mod_id_cmd(mod), &val);\n\n\tdev_dbg(dev, \"r %s - %-18s (%4d) : %08x\\n\",\n\t\trsnd_mod_name(mod),\n\t\trsnd_reg_name(gen, reg), reg, val);\n\n\treturn val;\n}\n\nvoid rsnd_mod_write(struct rsnd_mod *mod,\n\t\t    enum rsnd_reg reg, u32 data)\n{\n\tstruct rsnd_priv *priv = rsnd_mod_to_priv(mod);\n\tstruct device *dev = rsnd_priv_to_dev(priv);\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\n\tif (!rsnd_is_accessible_reg(priv, gen, reg))\n\t\treturn;\n\n\tregmap_fields_force_write(gen->regs[reg], rsnd_mod_id_cmd(mod), data);\n\n\tdev_dbg(dev, \"w %s - %-18s (%4d) : %08x\\n\",\n\t\trsnd_mod_name(mod),\n\t\trsnd_reg_name(gen, reg), reg, data);\n}\n\nvoid rsnd_mod_bset(struct rsnd_mod *mod,\n\t\t   enum rsnd_reg reg, u32 mask, u32 data)\n{\n\tstruct rsnd_priv *priv = rsnd_mod_to_priv(mod);\n\tstruct device *dev = rsnd_priv_to_dev(priv);\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\n\tif (!rsnd_is_accessible_reg(priv, gen, reg))\n\t\treturn;\n\n\tregmap_fields_force_update_bits(gen->regs[reg],\n\t\t\t\t\trsnd_mod_id_cmd(mod), mask, data);\n\n\tdev_dbg(dev, \"b %s - %-18s (%4d) : %08x/%08x\\n\",\n\t\trsnd_mod_name(mod),\n\t\trsnd_reg_name(gen, reg), reg, data, mask);\n\n}\n\nphys_addr_t rsnd_gen_get_phy_addr(struct rsnd_priv *priv, int reg_id)\n{\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\n\treturn\tgen->res[reg_id];\n}\n\n#ifdef CONFIG_DEBUG_FS\nvoid __iomem *rsnd_gen_get_base_addr(struct rsnd_priv *priv, int reg_id)\n{\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\n\treturn\tgen->base[reg_id];\n}\n#endif\n\n#define rsnd_gen_regmap_init(priv, id_size, reg_id, name, conf)\t\t\\\n\t_rsnd_gen_regmap_init(priv, id_size, reg_id, name, conf, ARRAY_SIZE(conf))\nstatic int _rsnd_gen_regmap_init(struct rsnd_priv *priv,\n\t\t\t\t int id_size,\n\t\t\t\t int reg_id,\n\t\t\t\t const char *name,\n\t\t\t\t const struct rsnd_regmap_field_conf *conf,\n\t\t\t\t int conf_size)\n{\n\tstruct platform_device *pdev = rsnd_priv_to_pdev(priv);\n\tstruct rsnd_gen *gen = rsnd_priv_to_gen(priv);\n\tstruct device *dev = rsnd_priv_to_dev(priv);\n\tstruct resource *res;\n\tstruct regmap_config regc;\n\tstruct regmap_field *regs;\n\tstruct regmap *regmap;\n\tstruct reg_field regf;\n\tvoid __iomem *base;\n\tint i;\n\n\tmemset(&regc, 0, sizeof(regc));\n\tregc.reg_bits = 32;\n\tregc.val_bits = 32;\n\tregc.reg_stride = 4;\n\tregc.name = name;\n\n\tres = platform_get_resource_byname(pdev, IORESOURCE_MEM, name);\n\tif (!res)\n\t\tres = platform_get_resource(pdev, IORESOURCE_MEM, reg_id);\n\tif (!res)\n\t\treturn -ENODEV;\n\n\tbase = devm_ioremap_resource(dev, res);\n\tif (IS_ERR(base))\n\t\treturn PTR_ERR(base);\n\n\tregmap = devm_regmap_init_mmio(dev, base, &regc);\n\tif (IS_ERR(regmap))\n\t\treturn PTR_ERR(regmap);\n\n\t \n\tgen->base[reg_id] = base;\n\tgen->regmap[reg_id] = regmap;\n\tgen->res[reg_id] = res->start;\n\n\tfor (i = 0; i < conf_size; i++) {\n\n\t\tregf.reg\t= conf[i].reg_offset;\n\t\tregf.id_offset\t= conf[i].id_offset;\n\t\tregf.lsb\t= 0;\n\t\tregf.msb\t= 31;\n\t\tregf.id_size\t= id_size;\n\n\t\tregs = devm_regmap_field_alloc(dev, regmap, regf);\n\t\tif (IS_ERR(regs))\n\t\t\treturn PTR_ERR(regs);\n\n\t\t \n\t\tgen->regs[conf[i].idx] = regs;\n\t\tgen->reg_name[conf[i].idx] = conf[i].reg_name;\n\t}\n\n\treturn 0;\n}\n\n \nstatic int rsnd_gen4_probe(struct rsnd_priv *priv)\n{\n\tstatic const struct rsnd_regmap_field_conf conf_ssiu[] = {\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE0,\t0x850),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE2,\t0x858),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE4,\t0x890),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE6,\t0x898),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS0,\t\t0x840),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS2,\t\t0x848),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS4,\t\t0x880),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS6,\t\t0x888),\n\n\t\tRSND_GEN_S_REG(SSI_BUSIF0_MODE,\t\t0x0),\n\t\tRSND_GEN_S_REG(SSI_BUSIF0_ADINR,\t0x4),\n\t\tRSND_GEN_S_REG(SSI_BUSIF0_DALIGN,\t0x8),\n\t\tRSND_GEN_S_REG(SSI_BUSIF1_MODE,\t\t0x20),\n\t\tRSND_GEN_S_REG(SSI_BUSIF1_ADINR,\t0x24),\n\t\tRSND_GEN_S_REG(SSI_BUSIF1_DALIGN,\t0x28),\n\t\tRSND_GEN_S_REG(SSI_BUSIF2_MODE,\t\t0x40),\n\t\tRSND_GEN_S_REG(SSI_BUSIF2_ADINR,\t0x44),\n\t\tRSND_GEN_S_REG(SSI_BUSIF2_DALIGN,\t0x48),\n\t\tRSND_GEN_S_REG(SSI_BUSIF3_MODE,\t\t0x60),\n\t\tRSND_GEN_S_REG(SSI_BUSIF3_ADINR,\t0x64),\n\t\tRSND_GEN_S_REG(SSI_BUSIF3_DALIGN,\t0x68),\n\t\tRSND_GEN_S_REG(SSI_BUSIF4_MODE,\t\t0x500),\n\t\tRSND_GEN_S_REG(SSI_BUSIF4_ADINR,\t0x504),\n\t\tRSND_GEN_S_REG(SSI_BUSIF4_DALIGN,\t0x508),\n\t\tRSND_GEN_S_REG(SSI_BUSIF5_MODE,\t\t0x520),\n\t\tRSND_GEN_S_REG(SSI_BUSIF5_ADINR,\t0x524),\n\t\tRSND_GEN_S_REG(SSI_BUSIF5_DALIGN,\t0x528),\n\t\tRSND_GEN_S_REG(SSI_BUSIF6_MODE,\t\t0x540),\n\t\tRSND_GEN_S_REG(SSI_BUSIF6_ADINR,\t0x544),\n\t\tRSND_GEN_S_REG(SSI_BUSIF6_DALIGN,\t0x548),\n\t\tRSND_GEN_S_REG(SSI_BUSIF7_MODE,\t\t0x560),\n\t\tRSND_GEN_S_REG(SSI_BUSIF7_ADINR,\t0x564),\n\t\tRSND_GEN_S_REG(SSI_BUSIF7_DALIGN,\t0x568),\n\t\tRSND_GEN_S_REG(SSI_CTRL,\t\t0x010),\n\t\tRSND_GEN_S_REG(SSI_INT_ENABLE,\t\t0x018),\n\t\tRSND_GEN_S_REG(SSI_MODE,\t\t0x00c),\n\t\tRSND_GEN_S_REG(SSI_MODE2,\t\t0xa0c),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_adg[] = {\n\t\tRSND_GEN_S_REG(BRRA,\t\t\t0x00),\n\t\tRSND_GEN_S_REG(BRRB,\t\t\t0x04),\n\t\tRSND_GEN_S_REG(BRGCKR,\t\t\t0x08),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL0,\t\t0x0c),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_ssi[] = {\n\t\tRSND_GEN_S_REG(SSICR,\t\t\t0x00),\n\t\tRSND_GEN_S_REG(SSISR,\t\t\t0x04),\n\t\tRSND_GEN_S_REG(SSITDR,\t\t\t0x08),\n\t\tRSND_GEN_S_REG(SSIRDR,\t\t\t0x0c),\n\t\tRSND_GEN_S_REG(SSIWSR,\t\t\t0x20),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_sdmc[] = {\n\t\tRSND_GEN_M_REG(SSI_BUSIF,\t\t0x0, 0x8000),\n\t};\n\tint ret_adg  = rsnd_gen_regmap_init(priv, 10, RSND_GEN4_ADG,  \"adg\",  conf_adg);\n\tint ret_ssiu = rsnd_gen_regmap_init(priv, 10, RSND_GEN4_SSIU, \"ssiu\", conf_ssiu);\n\tint ret_ssi  = rsnd_gen_regmap_init(priv, 10, RSND_GEN4_SSI,  \"ssi\",  conf_ssi);\n\tint ret_sdmc = rsnd_gen_regmap_init(priv, 10, RSND_GEN4_SDMC, \"sdmc\", conf_sdmc);\n\n\treturn ret_adg | ret_ssiu | ret_ssi | ret_sdmc;\n}\n\n \nstatic int rsnd_gen2_probe(struct rsnd_priv *priv)\n{\n\tstatic const struct rsnd_regmap_field_conf conf_ssiu[] = {\n\t\tRSND_GEN_S_REG(SSI_MODE0,\t0x800),\n\t\tRSND_GEN_S_REG(SSI_MODE1,\t0x804),\n\t\tRSND_GEN_S_REG(SSI_MODE2,\t0x808),\n\t\tRSND_GEN_S_REG(SSI_CONTROL,\t0x810),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS0,\t0x840),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS1,\t0x844),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS2,\t0x848),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS3,\t0x84c),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS4,\t0x880),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS5,\t0x884),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS6,\t0x888),\n\t\tRSND_GEN_S_REG(SSI_SYS_STATUS7,\t0x88c),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE0, 0x850),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE1, 0x854),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE2, 0x858),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE3, 0x85c),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE4, 0x890),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE5, 0x894),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE6, 0x898),\n\t\tRSND_GEN_S_REG(SSI_SYS_INT_ENABLE7, 0x89c),\n\t\tRSND_GEN_S_REG(HDMI0_SEL,\t0x9e0),\n\t\tRSND_GEN_S_REG(HDMI1_SEL,\t0x9e4),\n\n\t\t \n\t\tRSND_GEN_M_REG(SSI_BUSIF0_MODE,\t\t0x0,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF0_ADINR,\t0x4,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF0_DALIGN,\t0x8,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF1_MODE,\t\t0x20,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF1_ADINR,\t0x24,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF1_DALIGN,\t0x28,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF2_MODE,\t\t0x40,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF2_ADINR,\t0x44,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF2_DALIGN,\t0x48,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF3_MODE,\t\t0x60,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF3_ADINR,\t0x64,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF3_DALIGN,\t0x68,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF4_MODE,\t\t0x500,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF4_ADINR,\t0x504,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF4_DALIGN,\t0x508,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF5_MODE,\t\t0x520,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF5_ADINR,\t0x524,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF5_DALIGN,\t0x528,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF6_MODE,\t\t0x540,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF6_ADINR,\t0x544,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF6_DALIGN,\t0x548,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF7_MODE,\t\t0x560,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF7_ADINR,\t0x564,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_BUSIF7_DALIGN,\t0x568,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_MODE,\t\t0xc,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_CTRL,\t\t0x10,\t0x80),\n\t\tRSND_GEN_M_REG(SSI_INT_ENABLE,\t\t0x18,\t0x80),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF0_MODE,\t0x48c),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF0_ADINR,\t0x484),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF0_DALIGN,\t0x488),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF1_MODE,\t0x4a0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF1_ADINR,\t0x4a4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF1_DALIGN,\t0x4a8),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF2_MODE,\t0x4c0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF2_ADINR,\t0x4c4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF2_DALIGN,\t0x4c8),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF3_MODE,\t0x4e0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF3_ADINR,\t0x4e4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF3_DALIGN,\t0x4e8),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF4_MODE,\t0xd80),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF4_ADINR,\t0xd84),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF4_DALIGN,\t0xd88),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF5_MODE,\t0xda0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF5_ADINR,\t0xda4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF5_DALIGN,\t0xda8),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF6_MODE,\t0xdc0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF6_ADINR,\t0xdc4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF6_DALIGN,\t0xdc8),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF7_MODE,\t0xde0),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF7_ADINR,\t0xde4),\n\t\tRSND_GEN_S_REG(SSI9_BUSIF7_DALIGN,\t0xde8),\n\t};\n\n\tstatic const struct rsnd_regmap_field_conf conf_scu[] = {\n\t\tRSND_GEN_M_REG(SRC_I_BUSIF_MODE,0x0,\t0x20),\n\t\tRSND_GEN_M_REG(SRC_O_BUSIF_MODE,0x4,\t0x20),\n\t\tRSND_GEN_M_REG(SRC_BUSIF_DALIGN,0x8,\t0x20),\n\t\tRSND_GEN_M_REG(SRC_ROUTE_MODE0,\t0xc,\t0x20),\n\t\tRSND_GEN_M_REG(SRC_CTRL,\t0x10,\t0x20),\n\t\tRSND_GEN_M_REG(SRC_INT_ENABLE0,\t0x18,\t0x20),\n\t\tRSND_GEN_M_REG(CMD_BUSIF_MODE,\t0x184,\t0x20),\n\t\tRSND_GEN_M_REG(CMD_BUSIF_DALIGN,0x188,\t0x20),\n\t\tRSND_GEN_M_REG(CMD_ROUTE_SLCT,\t0x18c,\t0x20),\n\t\tRSND_GEN_M_REG(CMD_CTRL,\t0x190,\t0x20),\n\t\tRSND_GEN_S_REG(SCU_SYS_STATUS0,\t0x1c8),\n\t\tRSND_GEN_S_REG(SCU_SYS_INT_EN0,\t0x1cc),\n\t\tRSND_GEN_S_REG(SCU_SYS_STATUS1,\t0x1d0),\n\t\tRSND_GEN_S_REG(SCU_SYS_INT_EN1,\t0x1d4),\n\t\tRSND_GEN_M_REG(SRC_SWRSR,\t0x200,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_SRCIR,\t0x204,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_ADINR,\t0x214,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_IFSCR,\t0x21c,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_IFSVR,\t0x220,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_SRCCR,\t0x224,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_BSDSR,\t0x22c,\t0x40),\n\t\tRSND_GEN_M_REG(SRC_BSISR,\t0x238,\t0x40),\n\t\tRSND_GEN_M_REG(CTU_SWRSR,\t0x500,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_CTUIR,\t0x504,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_ADINR,\t0x508,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_CPMDR,\t0x510,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SCMDR,\t0x514,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV00R,\t0x518,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV01R,\t0x51c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV02R,\t0x520,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV03R,\t0x524,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV04R,\t0x528,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV05R,\t0x52c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV06R,\t0x530,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV07R,\t0x534,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV10R,\t0x538,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV11R,\t0x53c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV12R,\t0x540,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV13R,\t0x544,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV14R,\t0x548,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV15R,\t0x54c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV16R,\t0x550,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV17R,\t0x554,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV20R,\t0x558,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV21R,\t0x55c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV22R,\t0x560,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV23R,\t0x564,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV24R,\t0x568,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV25R,\t0x56c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV26R,\t0x570,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV27R,\t0x574,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV30R,\t0x578,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV31R,\t0x57c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV32R,\t0x580,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV33R,\t0x584,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV34R,\t0x588,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV35R,\t0x58c,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV36R,\t0x590,\t0x100),\n\t\tRSND_GEN_M_REG(CTU_SV37R,\t0x594,\t0x100),\n\t\tRSND_GEN_M_REG(MIX_SWRSR,\t0xd00,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MIXIR,\t0xd04,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_ADINR,\t0xd08,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MIXMR,\t0xd10,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MVPDR,\t0xd14,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MDBAR,\t0xd18,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MDBBR,\t0xd1c,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MDBCR,\t0xd20,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MDBDR,\t0xd24,\t0x40),\n\t\tRSND_GEN_M_REG(MIX_MDBER,\t0xd28,\t0x40),\n\t\tRSND_GEN_M_REG(DVC_SWRSR,\t0xe00,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_DVUIR,\t0xe04,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_ADINR,\t0xe08,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_DVUCR,\t0xe10,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_ZCMCR,\t0xe14,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VRCTR,\t0xe18,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VRPDR,\t0xe1c,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VRDBR,\t0xe20,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL0R,\t0xe28,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL1R,\t0xe2c,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL2R,\t0xe30,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL3R,\t0xe34,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL4R,\t0xe38,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL5R,\t0xe3c,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL6R,\t0xe40,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_VOL7R,\t0xe44,\t0x100),\n\t\tRSND_GEN_M_REG(DVC_DVUER,\t0xe48,\t0x100),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_adg[] = {\n\t\tRSND_GEN_S_REG(BRRA,\t\t0x00),\n\t\tRSND_GEN_S_REG(BRRB,\t\t0x04),\n\t\tRSND_GEN_S_REG(BRGCKR,\t\t0x08),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL0,\t0x0c),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL1,\t0x10),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL2,\t0x14),\n\t\tRSND_GEN_S_REG(DIV_EN,\t\t0x30),\n\t\tRSND_GEN_S_REG(SRCIN_TIMSEL0,\t0x34),\n\t\tRSND_GEN_S_REG(SRCIN_TIMSEL1,\t0x38),\n\t\tRSND_GEN_S_REG(SRCIN_TIMSEL2,\t0x3c),\n\t\tRSND_GEN_S_REG(SRCIN_TIMSEL3,\t0x40),\n\t\tRSND_GEN_S_REG(SRCIN_TIMSEL4,\t0x44),\n\t\tRSND_GEN_S_REG(SRCOUT_TIMSEL0,\t0x48),\n\t\tRSND_GEN_S_REG(SRCOUT_TIMSEL1,\t0x4c),\n\t\tRSND_GEN_S_REG(SRCOUT_TIMSEL2,\t0x50),\n\t\tRSND_GEN_S_REG(SRCOUT_TIMSEL3,\t0x54),\n\t\tRSND_GEN_S_REG(SRCOUT_TIMSEL4,\t0x58),\n\t\tRSND_GEN_S_REG(CMDOUT_TIMSEL,\t0x5c),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_ssi[] = {\n\t\tRSND_GEN_M_REG(SSICR,\t\t0x00,\t0x40),\n\t\tRSND_GEN_M_REG(SSISR,\t\t0x04,\t0x40),\n\t\tRSND_GEN_M_REG(SSITDR,\t\t0x08,\t0x40),\n\t\tRSND_GEN_M_REG(SSIRDR,\t\t0x0c,\t0x40),\n\t\tRSND_GEN_M_REG(SSIWSR,\t\t0x20,\t0x40),\n\t};\n\tint ret_ssiu;\n\tint ret_scu;\n\tint ret_adg;\n\tint ret_ssi;\n\n\tret_ssiu = rsnd_gen_regmap_init(priv, 10, RSND_GEN2_SSIU, \"ssiu\", conf_ssiu);\n\tret_scu  = rsnd_gen_regmap_init(priv, 10, RSND_GEN2_SCU,  \"scu\",  conf_scu);\n\tret_adg  = rsnd_gen_regmap_init(priv, 10, RSND_GEN2_ADG,  \"adg\",  conf_adg);\n\tret_ssi  = rsnd_gen_regmap_init(priv, 10, RSND_GEN2_SSI,  \"ssi\",  conf_ssi);\n\tif (ret_ssiu < 0 ||\n\t    ret_scu  < 0 ||\n\t    ret_adg  < 0 ||\n\t    ret_ssi  < 0)\n\t\treturn ret_ssiu | ret_scu | ret_adg | ret_ssi;\n\n\treturn 0;\n}\n\n \n\nstatic int rsnd_gen1_probe(struct rsnd_priv *priv)\n{\n\tstatic const struct rsnd_regmap_field_conf conf_adg[] = {\n\t\tRSND_GEN_S_REG(BRRA,\t\t0x00),\n\t\tRSND_GEN_S_REG(BRRB,\t\t0x04),\n\t\tRSND_GEN_S_REG(BRGCKR,\t\t0x08),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL0,\t0x0c),\n\t\tRSND_GEN_S_REG(AUDIO_CLK_SEL1,\t0x10),\n\t};\n\tstatic const struct rsnd_regmap_field_conf conf_ssi[] = {\n\t\tRSND_GEN_M_REG(SSICR,\t\t0x00,\t0x40),\n\t\tRSND_GEN_M_REG(SSISR,\t\t0x04,\t0x40),\n\t\tRSND_GEN_M_REG(SSITDR,\t\t0x08,\t0x40),\n\t\tRSND_GEN_M_REG(SSIRDR,\t\t0x0c,\t0x40),\n\t\tRSND_GEN_M_REG(SSIWSR,\t\t0x20,\t0x40),\n\t};\n\tint ret_adg;\n\tint ret_ssi;\n\n\tret_adg  = rsnd_gen_regmap_init(priv, 9, RSND_GEN1_ADG, \"adg\", conf_adg);\n\tret_ssi  = rsnd_gen_regmap_init(priv, 9, RSND_GEN1_SSI, \"ssi\", conf_ssi);\n\tif (ret_adg  < 0 ||\n\t    ret_ssi  < 0)\n\t\treturn ret_adg | ret_ssi;\n\n\treturn 0;\n}\n\n \nint rsnd_gen_probe(struct rsnd_priv *priv)\n{\n\tstruct device *dev = rsnd_priv_to_dev(priv);\n\tstruct rsnd_gen *gen;\n\tint ret;\n\n\tgen = devm_kzalloc(dev, sizeof(*gen), GFP_KERNEL);\n\tif (!gen)\n\t\treturn -ENOMEM;\n\n\tpriv->gen = gen;\n\n\tret = -ENODEV;\n\tif (rsnd_is_gen1(priv))\n\t\tret = rsnd_gen1_probe(priv);\n\telse if (rsnd_is_gen2(priv) ||\n\t\t rsnd_is_gen3(priv))\n\t\tret = rsnd_gen2_probe(priv);\n\telse if (rsnd_is_gen4(priv))\n\t\tret = rsnd_gen4_probe(priv);\n\n\tif (ret < 0)\n\t\tdev_err(dev, \"unknown generation R-Car sound device\\n\");\n\n\treturn ret;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}