{
  "module_name": "cs42l43.h",
  "hash_id": "4a73beab8eea793efbee9d6b77ddb0be3b922c116668b975823b18b23f129f51",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/cs42l43.h",
  "human_readable_source": " \n \n\n#include <linux/clk.h>\n#include <linux/completion.h>\n#include <linux/device.h>\n#include <linux/mutex.h>\n#include <linux/regmap.h>\n#include <linux/soundwire/sdw.h>\n#include <linux/types.h>\n#include <sound/cs42l43.h>\n#include <sound/pcm.h>\n#include <sound/soc-jack.h>\n\n#ifndef CS42L43_ASOC_INT_H\n#define CS42L43_ASOC_INT_H\n\n#define CS42L43_INTERNAL_SYSCLK\t\t24576000\n#define CS42L43_DEFAULT_SLOTS\t\t0x3F\n\n#define CS42L43_PLL_TIMEOUT_MS\t\t200\n#define CS42L43_SPK_TIMEOUT_MS\t\t100\n#define CS42L43_HP_TIMEOUT_MS\t\t2000\n#define CS42L43_LOAD_TIMEOUT_MS\t\t1000\n\n#define CS42L43_ASP_MAX_CHANNELS\t6\n#define CS42L43_N_EQ_COEFFS\t\t15\n\n#define CS42L43_N_BUTTONS\t6\n\nstruct cs42l43_codec {\n\tstruct device *dev;\n\tstruct cs42l43 *core;\n\tstruct snd_soc_component *component;\n\n\tstruct clk *mclk;\n\n\tint n_slots;\n\tint slot_width;\n\tint tx_slots[CS42L43_ASP_MAX_CHANNELS];\n\tint rx_slots[CS42L43_ASP_MAX_CHANNELS];\n\tstruct snd_pcm_hw_constraint_list constraint;\n\n\tu32 eq_coeffs[CS42L43_N_EQ_COEFFS];\n\n\tunsigned int refclk_src;\n\tunsigned int refclk_freq;\n\tstruct completion pll_ready;\n\n\tunsigned int decim_cache[4];\n\tunsigned int adc_ena;\n\tunsigned int hp_ena;\n\n\tstruct completion hp_startup;\n\tstruct completion hp_shutdown;\n\tstruct completion spkr_shutdown;\n\tstruct completion spkl_shutdown;\n\tstruct completion spkr_startup;\n\tstruct completion spkl_startup;\n\t\n\tstruct mutex spk_vu_lock;\n\n\t\n\tstruct mutex jack_lock;\n\tstruct snd_soc_jack *jack_hp;\n\n\tbool use_ring_sense;\n\tunsigned int tip_debounce_ms;\n\tunsigned int bias_low;\n\tunsigned int bias_sense_ua;\n\tunsigned int bias_ramp_ms;\n\tunsigned int detect_us;\n\tunsigned int buttons[CS42L43_N_BUTTONS];\n\n\tstruct delayed_work tip_sense_work;\n\tstruct delayed_work bias_sense_timeout;\n\tstruct delayed_work button_press_work;\n\tstruct work_struct button_release_work;\n\tstruct completion type_detect;\n\tstruct completion load_detect;\n\n\tbool load_detect_running;\n\tbool button_detect_running;\n\tbool jack_present;\n\tint jack_override;\n};\n\n#if IS_REACHABLE(CONFIG_SND_SOC_CS42L43_SDW)\n\nint cs42l43_sdw_add_peripheral(struct snd_pcm_substream *substream,\n\t\t\t       struct snd_pcm_hw_params *params,\n\t\t\t       struct snd_soc_dai *dai);\nint cs42l43_sdw_remove_peripheral(struct snd_pcm_substream *substream,\n\t\t\t\t  struct snd_soc_dai *dai);\nint cs42l43_sdw_set_stream(struct snd_soc_dai *dai, void *sdw_stream, int direction);\n\n#else\n\nstatic inline int cs42l43_sdw_add_peripheral(struct snd_pcm_substream *substream,\n\t\t\t\t\t     struct snd_pcm_hw_params *params,\n\t\t\t\t\t     struct snd_soc_dai *dai)\n{\n\treturn -EINVAL;\n}\n\n#define cs42l43_sdw_remove_peripheral NULL\n#define cs42l43_sdw_set_stream NULL\n\n#endif\n\nint cs42l43_set_jack(struct snd_soc_component *component,\n\t\t     struct snd_soc_jack *jack, void *d);\nvoid cs42l43_bias_sense_timeout(struct work_struct *work);\nvoid cs42l43_tip_sense_work(struct work_struct *work);\nvoid cs42l43_button_press_work(struct work_struct *work);\nvoid cs42l43_button_release_work(struct work_struct *work);\nirqreturn_t cs42l43_bias_detect_clamp(int irq, void *data);\nirqreturn_t cs42l43_button_press(int irq, void *data);\nirqreturn_t cs42l43_button_release(int irq, void *data);\nirqreturn_t cs42l43_tip_sense(int irq, void *data);\nint cs42l43_jack_get(struct snd_kcontrol *kcontrol, struct snd_ctl_elem_value *ucontrol);\nint cs42l43_jack_put(struct snd_kcontrol *kcontrol, struct snd_ctl_elem_value *ucontrol);\n\nextern const struct soc_enum cs42l43_jack_enum;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}