{
  "module_name": "wcd9335.c",
  "hash_id": "f6c1d4825913a71c4c30552fc6d990c31020b97274952ba0ee81b15c84e35b96",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/wcd9335.c",
  "human_readable_source": "\n\n\n\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/platform_device.h>\n#include <linux/device.h>\n#include <linux/wait.h>\n#include <linux/bitops.h>\n#include <linux/regulator/consumer.h>\n#include <linux/clk.h>\n#include <linux/delay.h>\n#include <linux/kernel.h>\n#include <linux/slimbus.h>\n#include <sound/soc.h>\n#include <sound/pcm_params.h>\n#include <sound/soc-dapm.h>\n#include <linux/of_gpio.h>\n#include <linux/of.h>\n#include <linux/of_irq.h>\n#include <sound/tlv.h>\n#include <sound/info.h>\n#include \"wcd9335.h\"\n#include \"wcd-clsh-v2.h\"\n\n#include <dt-bindings/sound/qcom,wcd9335.h>\n\n#define WCD9335_RATES_MASK (SNDRV_PCM_RATE_8000 | SNDRV_PCM_RATE_16000 |\\\n\t\t\t    SNDRV_PCM_RATE_32000 | SNDRV_PCM_RATE_48000 |\\\n\t\t\t    SNDRV_PCM_RATE_96000 | SNDRV_PCM_RATE_192000)\n \n#define WCD9335_FRAC_RATES_MASK (SNDRV_PCM_RATE_44100)\n#define WCD9335_FORMATS_S16_S24_LE (SNDRV_PCM_FMTBIT_S16_LE | \\\n\t\t\t\t  SNDRV_PCM_FMTBIT_S24_LE)\n\n \n#define SLAVE_PORT_WATER_MARK_6BYTES  0\n#define SLAVE_PORT_WATER_MARK_9BYTES  1\n#define SLAVE_PORT_WATER_MARK_12BYTES 2\n#define SLAVE_PORT_WATER_MARK_15BYTES 3\n#define SLAVE_PORT_WATER_MARK_SHIFT 1\n#define SLAVE_PORT_ENABLE           1\n#define SLAVE_PORT_DISABLE          0\n#define WCD9335_SLIM_WATER_MARK_VAL \\\n\t((SLAVE_PORT_WATER_MARK_12BYTES << SLAVE_PORT_WATER_MARK_SHIFT) | \\\n\t (SLAVE_PORT_ENABLE))\n\n#define WCD9335_SLIM_NUM_PORT_REG 3\n#define WCD9335_SLIM_PGD_PORT_INT_TX_EN0 (WCD9335_SLIM_PGD_PORT_INT_EN0 + 2)\n\n#define WCD9335_MCLK_CLK_12P288MHZ\t12288000\n#define WCD9335_MCLK_CLK_9P6MHZ\t\t9600000\n\n#define WCD9335_SLIM_CLOSE_TIMEOUT 1000\n#define WCD9335_SLIM_IRQ_OVERFLOW (1 << 0)\n#define WCD9335_SLIM_IRQ_UNDERFLOW (1 << 1)\n#define WCD9335_SLIM_IRQ_PORT_CLOSED (1 << 2)\n\n#define WCD9335_NUM_INTERPOLATORS 9\n#define WCD9335_RX_START\t16\n#define WCD9335_SLIM_CH_START 128\n#define WCD9335_MAX_MICBIAS 4\n#define WCD9335_MAX_VALID_ADC_MUX  13\n#define WCD9335_INVALID_ADC_MUX 9\n\n#define  TX_HPF_CUT_OFF_FREQ_MASK\t0x60\n#define  CF_MIN_3DB_4HZ\t\t\t0x0\n#define  CF_MIN_3DB_75HZ\t\t0x1\n#define  CF_MIN_3DB_150HZ\t\t0x2\n#define WCD9335_DMIC_CLK_DIV_2  0x0\n#define WCD9335_DMIC_CLK_DIV_3  0x1\n#define WCD9335_DMIC_CLK_DIV_4  0x2\n#define WCD9335_DMIC_CLK_DIV_6  0x3\n#define WCD9335_DMIC_CLK_DIV_8  0x4\n#define WCD9335_DMIC_CLK_DIV_16  0x5\n#define WCD9335_DMIC_CLK_DRIVE_DEFAULT 0x02\n#define WCD9335_AMIC_PWR_LEVEL_LP 0\n#define WCD9335_AMIC_PWR_LEVEL_DEFAULT 1\n#define WCD9335_AMIC_PWR_LEVEL_HP 2\n#define WCD9335_AMIC_PWR_LVL_MASK 0x60\n#define WCD9335_AMIC_PWR_LVL_SHIFT 0x5\n\n#define WCD9335_DEC_PWR_LVL_MASK 0x06\n#define WCD9335_DEC_PWR_LVL_LP 0x02\n#define WCD9335_DEC_PWR_LVL_HP 0x04\n#define WCD9335_DEC_PWR_LVL_DF 0x00\n\n#define WCD9335_SLIM_RX_CH(p) \\\n\t{.port = p + WCD9335_RX_START, .shift = p,}\n\n#define WCD9335_SLIM_TX_CH(p) \\\n\t{.port = p, .shift = p,}\n\n \n#define WCD9335_CALCULATE_VOUT_D(req_mv) (((req_mv - 650) * 10) / 25)\n\n#define WCD9335_INTERPOLATOR_PATH(id)\t\t\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX0\", \"SLIM RX0\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX1\", \"SLIM RX1\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX2\", \"SLIM RX2\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX3\", \"SLIM RX3\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX4\", \"SLIM RX4\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX5\", \"SLIM RX5\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX6\", \"SLIM RX6\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP0\", \"RX7\", \"SLIM RX7\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX0\", \"SLIM RX0\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX1\", \"SLIM RX1\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX2\", \"SLIM RX2\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX3\", \"SLIM RX3\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX4\", \"SLIM RX4\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX5\", \"SLIM RX5\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX6\", \"SLIM RX6\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP1\", \"RX7\", \"SLIM RX7\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX0\", \"SLIM RX0\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX1\", \"SLIM RX1\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX2\", \"SLIM RX2\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX3\", \"SLIM RX3\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX4\", \"SLIM RX4\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX5\", \"SLIM RX5\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX6\", \"SLIM RX6\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1 INP2\", \"RX7\", \"SLIM RX7\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX0\", \"SLIM RX0\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX1\", \"SLIM RX1\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX2\", \"SLIM RX2\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX3\", \"SLIM RX3\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX4\", \"SLIM RX4\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX5\", \"SLIM RX5\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX6\", \"SLIM RX6\"},\t\\\n\t{\"RX INT\" #id \"_2 MUX\", \"RX7\", \"SLIM RX7\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1\", NULL, \"RX INT\" #id \"_1 MIX1 INP0\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1\", NULL, \"RX INT\" #id \"_1 MIX1 INP1\"},\t\\\n\t{\"RX INT\" #id \"_1 MIX1\", NULL, \"RX INT\" #id \"_1 MIX1 INP2\"},\t\\\n\t{\"RX INT\" #id \" SEC MIX\", NULL, \"RX INT\" #id \"_2 MUX\"},\t\t\\\n\t{\"RX INT\" #id \" SEC MIX\", NULL, \"RX INT\" #id \"_1 MIX1\"},\t\\\n\t{\"RX INT\" #id \" MIX2\", NULL, \"RX INT\" #id \" SEC MIX\"},\t\t\\\n\t{\"RX INT\" #id \" INTERP\", NULL, \"RX INT\" #id \" MIX2\"}\n\n#define WCD9335_ADC_MUX_PATH(id)\t\t\t\\\n\t{\"AIF1_CAP Mixer\", \"SLIM TX\" #id, \"SLIM TX\" #id \" MUX\"}, \\\n\t{\"AIF2_CAP Mixer\", \"SLIM TX\" #id, \"SLIM TX\" #id \" MUX\"}, \\\n\t{\"AIF3_CAP Mixer\", \"SLIM TX\" #id, \"SLIM TX\" #id \" MUX\"}, \\\n\t{\"SLIM TX\" #id \" MUX\", \"DEC\" #id, \"ADC MUX\" #id}, \\\n\t{\"ADC MUX\" #id, \"DMIC\", \"DMIC MUX\" #id},\t\\\n\t{\"ADC MUX\" #id, \"AMIC\", \"AMIC MUX\" #id},\t\\\n\t{\"DMIC MUX\" #id, \"DMIC0\", \"DMIC0\"},\t\t\\\n\t{\"DMIC MUX\" #id, \"DMIC1\", \"DMIC1\"},\t\t\\\n\t{\"DMIC MUX\" #id, \"DMIC2\", \"DMIC2\"},\t\t\\\n\t{\"DMIC MUX\" #id, \"DMIC3\", \"DMIC3\"},\t\t\\\n\t{\"DMIC MUX\" #id, \"DMIC4\", \"DMIC4\"},\t\t\\\n\t{\"DMIC MUX\" #id, \"DMIC5\", \"DMIC5\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC1\", \"ADC1\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC2\", \"ADC2\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC3\", \"ADC3\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC4\", \"ADC4\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC5\", \"ADC5\"},\t\t\\\n\t{\"AMIC MUX\" #id, \"ADC6\", \"ADC6\"}\n\nenum {\n\tWCD9335_RX0 = 0,\n\tWCD9335_RX1,\n\tWCD9335_RX2,\n\tWCD9335_RX3,\n\tWCD9335_RX4,\n\tWCD9335_RX5,\n\tWCD9335_RX6,\n\tWCD9335_RX7,\n\tWCD9335_RX8,\n\tWCD9335_RX9,\n\tWCD9335_RX10,\n\tWCD9335_RX11,\n\tWCD9335_RX12,\n\tWCD9335_RX_MAX,\n};\n\nenum {\n\tWCD9335_TX0 = 0,\n\tWCD9335_TX1,\n\tWCD9335_TX2,\n\tWCD9335_TX3,\n\tWCD9335_TX4,\n\tWCD9335_TX5,\n\tWCD9335_TX6,\n\tWCD9335_TX7,\n\tWCD9335_TX8,\n\tWCD9335_TX9,\n\tWCD9335_TX10,\n\tWCD9335_TX11,\n\tWCD9335_TX12,\n\tWCD9335_TX13,\n\tWCD9335_TX14,\n\tWCD9335_TX15,\n\tWCD9335_TX_MAX,\n};\n\nenum {\n\tSIDO_SOURCE_INTERNAL = 0,\n\tSIDO_SOURCE_RCO_BG,\n};\n\nenum wcd9335_sido_voltage {\n\tSIDO_VOLTAGE_SVS_MV = 950,\n\tSIDO_VOLTAGE_NOMINAL_MV = 1100,\n};\n\nenum {\n\tCOMPANDER_1,  \n\tCOMPANDER_2,  \n\tCOMPANDER_3,  \n\tCOMPANDER_4,  \n\tCOMPANDER_5,  \n\tCOMPANDER_6,  \n\tCOMPANDER_7,  \n\tCOMPANDER_8,  \n\tCOMPANDER_MAX,\n};\n\nenum {\n\tINTn_2_INP_SEL_ZERO = 0,\n\tINTn_2_INP_SEL_RX0,\n\tINTn_2_INP_SEL_RX1,\n\tINTn_2_INP_SEL_RX2,\n\tINTn_2_INP_SEL_RX3,\n\tINTn_2_INP_SEL_RX4,\n\tINTn_2_INP_SEL_RX5,\n\tINTn_2_INP_SEL_RX6,\n\tINTn_2_INP_SEL_RX7,\n\tINTn_2_INP_SEL_PROXIMITY,\n};\n\nenum {\n\tINTn_1_MIX_INP_SEL_ZERO = 0,\n\tINTn_1_MIX_INP_SEL_DEC0,\n\tINTn_1_MIX_INP_SEL_DEC1,\n\tINTn_1_MIX_INP_SEL_IIR0,\n\tINTn_1_MIX_INP_SEL_IIR1,\n\tINTn_1_MIX_INP_SEL_RX0,\n\tINTn_1_MIX_INP_SEL_RX1,\n\tINTn_1_MIX_INP_SEL_RX2,\n\tINTn_1_MIX_INP_SEL_RX3,\n\tINTn_1_MIX_INP_SEL_RX4,\n\tINTn_1_MIX_INP_SEL_RX5,\n\tINTn_1_MIX_INP_SEL_RX6,\n\tINTn_1_MIX_INP_SEL_RX7,\n\n};\n\nenum {\n\tINTERP_EAR = 0,\n\tINTERP_HPHL,\n\tINTERP_HPHR,\n\tINTERP_LO1,\n\tINTERP_LO2,\n\tINTERP_LO3,\n\tINTERP_LO4,\n\tINTERP_SPKR1,\n\tINTERP_SPKR2,\n};\n\nenum wcd_clock_type {\n\tWCD_CLK_OFF,\n\tWCD_CLK_RCO,\n\tWCD_CLK_MCLK,\n};\n\nenum {\n\tMIC_BIAS_1 = 1,\n\tMIC_BIAS_2,\n\tMIC_BIAS_3,\n\tMIC_BIAS_4\n};\n\nenum {\n\tMICB_PULLUP_ENABLE,\n\tMICB_PULLUP_DISABLE,\n\tMICB_ENABLE,\n\tMICB_DISABLE,\n};\n\nstruct wcd9335_slim_ch {\n\tu32 ch_num;\n\tu16 port;\n\tu16 shift;\n\tstruct list_head list;\n};\n\nstruct wcd_slim_codec_dai_data {\n\tstruct list_head slim_ch_list;\n\tstruct slim_stream_config sconfig;\n\tstruct slim_stream_runtime *sruntime;\n};\n\nstruct wcd9335_codec {\n\tstruct device *dev;\n\tstruct clk *mclk;\n\tstruct clk *native_clk;\n\tu32 mclk_rate;\n\tu8 version;\n\n\tstruct slim_device *slim;\n\tstruct slim_device *slim_ifc_dev;\n\tstruct regmap *regmap;\n\tstruct regmap *if_regmap;\n\tstruct regmap_irq_chip_data *irq_data;\n\n\tstruct wcd9335_slim_ch rx_chs[WCD9335_RX_MAX];\n\tstruct wcd9335_slim_ch tx_chs[WCD9335_TX_MAX];\n\tu32 num_rx_port;\n\tu32 num_tx_port;\n\n\tint sido_input_src;\n\tenum wcd9335_sido_voltage sido_voltage;\n\n\tstruct wcd_slim_codec_dai_data dai[NUM_CODEC_DAIS];\n\tstruct snd_soc_component *component;\n\n\tint master_bias_users;\n\tint clk_mclk_users;\n\tint clk_rco_users;\n\tint sido_ccl_cnt;\n\tenum wcd_clock_type clk_type;\n\n\tstruct wcd_clsh_ctrl *clsh_ctrl;\n\tu32 hph_mode;\n\tint prim_int_users[WCD9335_NUM_INTERPOLATORS];\n\n\tint comp_enabled[COMPANDER_MAX];\n\n\tint intr1;\n\tint reset_gpio;\n\tstruct regulator_bulk_data supplies[WCD9335_MAX_SUPPLY];\n\n\tunsigned int rx_port_value[WCD9335_RX_MAX];\n\tunsigned int tx_port_value[WCD9335_TX_MAX];\n\tint hph_l_gain;\n\tint hph_r_gain;\n\tu32 rx_bias_count;\n\n\t \n\tint micb_ref[WCD9335_MAX_MICBIAS];\n\tint pullup_ref[WCD9335_MAX_MICBIAS];\n\n\tint dmic_0_1_clk_cnt;\n\tint dmic_2_3_clk_cnt;\n\tint dmic_4_5_clk_cnt;\n\tint dmic_sample_rate;\n\tint mad_dmic_sample_rate;\n\n\tint native_clk_users;\n};\n\nstruct wcd9335_irq {\n\tint irq;\n\tirqreturn_t (*handler)(int irq, void *data);\n\tchar *name;\n};\n\nstatic const struct wcd9335_slim_ch wcd9335_tx_chs[WCD9335_TX_MAX] = {\n\tWCD9335_SLIM_TX_CH(0),\n\tWCD9335_SLIM_TX_CH(1),\n\tWCD9335_SLIM_TX_CH(2),\n\tWCD9335_SLIM_TX_CH(3),\n\tWCD9335_SLIM_TX_CH(4),\n\tWCD9335_SLIM_TX_CH(5),\n\tWCD9335_SLIM_TX_CH(6),\n\tWCD9335_SLIM_TX_CH(7),\n\tWCD9335_SLIM_TX_CH(8),\n\tWCD9335_SLIM_TX_CH(9),\n\tWCD9335_SLIM_TX_CH(10),\n\tWCD9335_SLIM_TX_CH(11),\n\tWCD9335_SLIM_TX_CH(12),\n\tWCD9335_SLIM_TX_CH(13),\n\tWCD9335_SLIM_TX_CH(14),\n\tWCD9335_SLIM_TX_CH(15),\n};\n\nstatic const struct wcd9335_slim_ch wcd9335_rx_chs[WCD9335_RX_MAX] = {\n\tWCD9335_SLIM_RX_CH(0),\t  \n\tWCD9335_SLIM_RX_CH(1),\t  \n\tWCD9335_SLIM_RX_CH(2),\n\tWCD9335_SLIM_RX_CH(3),\n\tWCD9335_SLIM_RX_CH(4),\n\tWCD9335_SLIM_RX_CH(5),\n\tWCD9335_SLIM_RX_CH(6),\n\tWCD9335_SLIM_RX_CH(7),\n\tWCD9335_SLIM_RX_CH(8),\n\tWCD9335_SLIM_RX_CH(9),\n\tWCD9335_SLIM_RX_CH(10),\n\tWCD9335_SLIM_RX_CH(11),\n\tWCD9335_SLIM_RX_CH(12),\n};\n\nstruct interp_sample_rate {\n\tint rate;\n\tint rate_val;\n};\n\nstatic struct interp_sample_rate int_mix_rate_val[] = {\n\t{48000, 0x4},\t \n\t{96000, 0x5},\t \n\t{192000, 0x6},\t \n};\n\nstatic struct interp_sample_rate int_prim_rate_val[] = {\n\t{8000, 0x0},\t \n\t{16000, 0x1},\t \n\t{24000, -EINVAL}, \n\t{32000, 0x3},\t \n\t{48000, 0x4},\t \n\t{96000, 0x5},\t \n\t{192000, 0x6},\t \n\t{384000, 0x7},\t \n\t{44100, 0x8},  \n};\n\nstruct wcd9335_reg_mask_val {\n\tu16 reg;\n\tu8 mask;\n\tu8 val;\n};\n\nstatic const struct wcd9335_reg_mask_val wcd9335_codec_reg_init[] = {\n\t \n\t{WCD9335_CDC_CLSH_K2_MSB, 0x0F, 0x00},\n\t{WCD9335_CDC_CLSH_K2_LSB, 0xFF, 0x60},\n\t{WCD9335_CPE_SS_DMIC_CFG, 0x80, 0x00},\n\t{WCD9335_CDC_BOOST0_BOOST_CTL, 0x70, 0x50},\n\t{WCD9335_CDC_BOOST1_BOOST_CTL, 0x70, 0x50},\n\t{WCD9335_CDC_RX7_RX_PATH_CFG1, 0x08, 0x08},\n\t{WCD9335_CDC_RX8_RX_PATH_CFG1, 0x08, 0x08},\n\t{WCD9335_ANA_LO_1_2, 0x3C, 0X3C},\n\t{WCD9335_DIFF_LO_COM_SWCAP_REFBUF_FREQ, 0x70, 0x00},\n\t{WCD9335_DIFF_LO_COM_PA_FREQ, 0x70, 0x40},\n\t{WCD9335_SOC_MAD_AUDIO_CTL_2, 0x03, 0x03},\n\t{WCD9335_CDC_TOP_TOP_CFG1, 0x02, 0x02},\n\t{WCD9335_CDC_TOP_TOP_CFG1, 0x01, 0x01},\n\t{WCD9335_EAR_CMBUFF, 0x08, 0x00},\n\t{WCD9335_CDC_TX9_SPKR_PROT_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_TX10_SPKR_PROT_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_TX11_SPKR_PROT_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_TX12_SPKR_PROT_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_COMPANDER7_CTL3, 0x80, 0x80},\n\t{WCD9335_CDC_COMPANDER8_CTL3, 0x80, 0x80},\n\t{WCD9335_CDC_COMPANDER7_CTL7, 0x01, 0x01},\n\t{WCD9335_CDC_COMPANDER8_CTL7, 0x01, 0x01},\n\t{WCD9335_CDC_RX0_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX1_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX2_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX3_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX4_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX5_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX6_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX7_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX8_RX_PATH_CFG0, 0x01, 0x01},\n\t{WCD9335_CDC_RX0_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX1_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX2_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX3_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX4_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX5_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX6_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX7_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_CDC_RX8_RX_PATH_MIX_CFG, 0x01, 0x01},\n\t{WCD9335_VBADC_IBIAS_FE, 0x0C, 0x08},\n\t{WCD9335_RCO_CTRL_2, 0x0F, 0x08},\n\t{WCD9335_RX_BIAS_FLYB_MID_RST, 0xF0, 0x10},\n\t{WCD9335_FLYBACK_CTRL_1, 0x20, 0x20},\n\t{WCD9335_HPH_OCP_CTL, 0xFF, 0x5A},\n\t{WCD9335_HPH_L_TEST, 0x01, 0x01},\n\t{WCD9335_HPH_R_TEST, 0x01, 0x01},\n\t{WCD9335_CDC_BOOST0_BOOST_CFG1, 0x3F, 0x12},\n\t{WCD9335_CDC_BOOST0_BOOST_CFG2, 0x1C, 0x08},\n\t{WCD9335_CDC_COMPANDER7_CTL7, 0x1E, 0x18},\n\t{WCD9335_CDC_BOOST1_BOOST_CFG1, 0x3F, 0x12},\n\t{WCD9335_CDC_BOOST1_BOOST_CFG2, 0x1C, 0x08},\n\t{WCD9335_CDC_COMPANDER8_CTL7, 0x1E, 0x18},\n\t{WCD9335_CDC_TX0_TX_PATH_SEC7, 0xFF, 0x45},\n\t{WCD9335_CDC_RX0_RX_PATH_SEC0, 0xFC, 0xF4},\n\t{WCD9335_HPH_REFBUFF_LP_CTL, 0x08, 0x08},\n\t{WCD9335_HPH_REFBUFF_LP_CTL, 0x06, 0x02},\n};\n\n \nstatic const char * const cf_text[] = {\n\t\"CF_NEG_3DB_4HZ\", \"CF_NEG_3DB_75HZ\", \"CF_NEG_3DB_150HZ\"\n};\n\nstatic const char * const rx_cf_text[] = {\n\t\"CF_NEG_3DB_4HZ\", \"CF_NEG_3DB_75HZ\", \"CF_NEG_3DB_150HZ\",\n\t\"CF_NEG_3DB_0P48HZ\"\n};\n\nstatic const char * const rx_int0_7_mix_mux_text[] = {\n\t\"ZERO\", \"RX0\", \"RX1\", \"RX2\", \"RX3\", \"RX4\", \"RX5\",\n\t\"RX6\", \"RX7\", \"PROXIMITY\"\n};\n\nstatic const char * const rx_int_mix_mux_text[] = {\n\t\"ZERO\", \"RX0\", \"RX1\", \"RX2\", \"RX3\", \"RX4\", \"RX5\",\n\t\"RX6\", \"RX7\"\n};\n\nstatic const char * const rx_prim_mix_text[] = {\n\t\"ZERO\", \"DEC0\", \"DEC1\", \"IIR0\", \"IIR1\", \"RX0\", \"RX1\", \"RX2\",\n\t\"RX3\", \"RX4\", \"RX5\", \"RX6\", \"RX7\"\n};\n\nstatic const char * const rx_int_dem_inp_mux_text[] = {\n\t\"NORMAL_DSM_OUT\", \"CLSH_DSM_OUT\",\n};\n\nstatic const char * const rx_int0_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT0 MIX2\",\n};\n\nstatic const char * const rx_int1_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT1 MIX2\",\n};\n\nstatic const char * const rx_int2_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT2 MIX2\",\n};\n\nstatic const char * const rx_int3_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT3 MIX2\",\n};\n\nstatic const char * const rx_int4_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT4 MIX2\",\n};\n\nstatic const char * const rx_int5_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT5 MIX2\",\n};\n\nstatic const char * const rx_int6_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT6 MIX2\",\n};\n\nstatic const char * const rx_int7_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT7 MIX2\",\n};\n\nstatic const char * const rx_int8_interp_mux_text[] = {\n\t\"ZERO\", \"RX INT8 SEC MIX\"\n};\n\nstatic const char * const rx_hph_mode_mux_text[] = {\n\t\"Class H Invalid\", \"Class-H Hi-Fi\", \"Class-H Low Power\", \"Class-AB\",\n\t\"Class-H Hi-Fi Low Power\"\n};\n\nstatic const char *const slim_rx_mux_text[] = {\n\t\"ZERO\", \"AIF1_PB\", \"AIF2_PB\", \"AIF3_PB\", \"AIF4_PB\",\n};\n\nstatic const char * const adc_mux_text[] = {\n\t\"DMIC\", \"AMIC\", \"ANC_FB_TUNE1\", \"ANC_FB_TUNE2\"\n};\n\nstatic const char * const dmic_mux_text[] = {\n\t\"ZERO\", \"DMIC0\", \"DMIC1\", \"DMIC2\", \"DMIC3\", \"DMIC4\", \"DMIC5\",\n\t\"SMIC0\", \"SMIC1\", \"SMIC2\", \"SMIC3\"\n};\n\nstatic const char * const dmic_mux_alt_text[] = {\n\t\"ZERO\", \"DMIC0\", \"DMIC1\", \"DMIC2\", \"DMIC3\", \"DMIC4\", \"DMIC5\",\n};\n\nstatic const char * const amic_mux_text[] = {\n\t\"ZERO\", \"ADC1\", \"ADC2\", \"ADC3\", \"ADC4\", \"ADC5\", \"ADC6\"\n};\n\nstatic const char * const sb_tx0_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX0\", \"DEC0\", \"DEC0_192\"\n};\n\nstatic const char * const sb_tx1_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX1\", \"DEC1\", \"DEC1_192\"\n};\n\nstatic const char * const sb_tx2_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX2\", \"DEC2\", \"DEC2_192\"\n};\n\nstatic const char * const sb_tx3_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX3\", \"DEC3\", \"DEC3_192\"\n};\n\nstatic const char * const sb_tx4_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX4\", \"DEC4\", \"DEC4_192\"\n};\n\nstatic const char * const sb_tx5_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX5\", \"DEC5\", \"DEC5_192\"\n};\n\nstatic const char * const sb_tx6_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX6\", \"DEC6\", \"DEC6_192\"\n};\n\nstatic const char * const sb_tx7_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX7\", \"DEC7\", \"DEC7_192\"\n};\n\nstatic const char * const sb_tx8_mux_text[] = {\n\t\"ZERO\", \"RX_MIX_TX8\", \"DEC8\", \"DEC8_192\"\n};\n\nstatic const DECLARE_TLV_DB_SCALE(digital_gain, -8400, 100, -8400);\nstatic const DECLARE_TLV_DB_SCALE(line_gain, 0, 7, 1);\nstatic const DECLARE_TLV_DB_SCALE(analog_gain, 0, 25, 1);\nstatic const DECLARE_TLV_DB_SCALE(ear_pa_gain, 0, 150, 0);\n\nstatic const struct soc_enum cf_dec0_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX0_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX1_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec2_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX2_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec3_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX3_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec4_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX4_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec5_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX5_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec6_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX6_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec7_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX7_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_dec8_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX8_TX_PATH_CFG0, 5, 3, cf_text);\n\nstatic const struct soc_enum cf_int0_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX0_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int0_2_enum, WCD9335_CDC_RX0_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int1_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX1_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int1_2_enum, WCD9335_CDC_RX1_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int2_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX2_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int2_2_enum, WCD9335_CDC_RX2_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int3_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX3_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int3_2_enum, WCD9335_CDC_RX3_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int4_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX4_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int4_2_enum, WCD9335_CDC_RX4_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int5_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX5_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int5_2_enum, WCD9335_CDC_RX5_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int6_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX6_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int6_2_enum, WCD9335_CDC_RX6_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int7_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX7_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int7_2_enum, WCD9335_CDC_RX7_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum cf_int8_1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX8_RX_PATH_CFG2, 0, 4, rx_cf_text);\n\nstatic SOC_ENUM_SINGLE_DECL(cf_int8_2_enum, WCD9335_CDC_RX8_RX_PATH_MIX_CFG, 2,\n\t\t     rx_cf_text);\n\nstatic const struct soc_enum rx_hph_mode_mux_enum =\n\tSOC_ENUM_SINGLE_EXT(ARRAY_SIZE(rx_hph_mode_mux_text),\n\t\t\t    rx_hph_mode_mux_text);\n\nstatic const struct soc_enum slim_rx_mux_enum =\n\tSOC_ENUM_SINGLE_EXT(ARRAY_SIZE(slim_rx_mux_text), slim_rx_mux_text);\n\nstatic const struct soc_enum rx_int0_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT0_CFG1, 0, 10,\n\t\t\trx_int0_7_mix_mux_text);\n\nstatic const struct soc_enum rx_int1_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT1_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int2_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT2_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int3_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT3_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int4_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT4_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int5_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT5_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int6_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT6_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int7_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT7_CFG1, 0, 10,\n\t\t\trx_int0_7_mix_mux_text);\n\nstatic const struct soc_enum rx_int8_2_mux_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT8_CFG1, 0, 9,\n\t\t\trx_int_mix_mux_text);\n\nstatic const struct soc_enum rx_int0_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT0_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int0_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT0_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int0_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT0_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int1_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT1_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int1_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT1_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int1_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT1_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int2_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT2_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int2_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT2_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int2_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT2_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int3_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT3_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int3_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT3_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int3_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT3_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int4_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT4_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int4_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT4_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int4_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT4_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int5_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT5_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int5_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT5_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int5_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT5_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int6_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT6_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int6_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT6_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int6_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT6_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int7_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT7_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int7_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT7_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int7_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT7_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int8_1_mix_inp0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT8_CFG0, 0, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int8_1_mix_inp1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT8_CFG0, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int8_1_mix_inp2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX_INP_MUX_RX_INT8_CFG1, 4, 13,\n\t\t\trx_prim_mix_text);\n\nstatic const struct soc_enum rx_int0_dem_inp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX0_RX_PATH_SEC0, 0,\n\t\t\tARRAY_SIZE(rx_int_dem_inp_mux_text),\n\t\t\trx_int_dem_inp_mux_text);\n\nstatic const struct soc_enum rx_int1_dem_inp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX1_RX_PATH_SEC0, 0,\n\t\t\tARRAY_SIZE(rx_int_dem_inp_mux_text),\n\t\t\trx_int_dem_inp_mux_text);\n\nstatic const struct soc_enum rx_int2_dem_inp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX2_RX_PATH_SEC0, 0,\n\t\t\tARRAY_SIZE(rx_int_dem_inp_mux_text),\n\t\t\trx_int_dem_inp_mux_text);\n\nstatic const struct soc_enum rx_int0_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX0_RX_PATH_CTL, 5, 2,\n\t\t\trx_int0_interp_mux_text);\n\nstatic const struct soc_enum rx_int1_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX1_RX_PATH_CTL, 5, 2,\n\t\t\trx_int1_interp_mux_text);\n\nstatic const struct soc_enum rx_int2_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX2_RX_PATH_CTL, 5, 2,\n\t\t\trx_int2_interp_mux_text);\n\nstatic const struct soc_enum rx_int3_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX3_RX_PATH_CTL, 5, 2,\n\t\t\trx_int3_interp_mux_text);\n\nstatic const struct soc_enum rx_int4_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX4_RX_PATH_CTL, 5, 2,\n\t\t\trx_int4_interp_mux_text);\n\nstatic const struct soc_enum rx_int5_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX5_RX_PATH_CTL, 5, 2,\n\t\t\trx_int5_interp_mux_text);\n\nstatic const struct soc_enum rx_int6_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX6_RX_PATH_CTL, 5, 2,\n\t\t\trx_int6_interp_mux_text);\n\nstatic const struct soc_enum rx_int7_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX7_RX_PATH_CTL, 5, 2,\n\t\t\trx_int7_interp_mux_text);\n\nstatic const struct soc_enum rx_int8_interp_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_RX8_RX_PATH_CTL, 5, 2,\n\t\t\trx_int8_interp_mux_text);\n\nstatic const struct soc_enum tx_adc_mux0_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG1, 0, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux1_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX1_CFG1, 0, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux2_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX2_CFG1, 0, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux3_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX3_CFG1, 0, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux4_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX4_CFG0, 6, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux5_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX5_CFG0, 6, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux6_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX6_CFG0, 6, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux7_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX7_CFG0, 6, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_adc_mux8_chain_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX8_CFG0, 6, 4,\n\t\t\tadc_mux_text);\n\nstatic const struct soc_enum tx_dmic_mux0_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG0, 3, 11,\n\t\t\tdmic_mux_text);\n\nstatic const struct soc_enum tx_dmic_mux1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX1_CFG0, 3, 11,\n\t\t\tdmic_mux_text);\n\nstatic const struct soc_enum tx_dmic_mux2_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX2_CFG0, 3, 11,\n\t\t\tdmic_mux_text);\n\nstatic const struct soc_enum tx_dmic_mux3_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX3_CFG0, 3, 11,\n\t\t\tdmic_mux_text);\n\nstatic const struct soc_enum tx_dmic_mux4_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX4_CFG0, 3, 7,\n\t\t\tdmic_mux_alt_text);\n\nstatic const struct soc_enum tx_dmic_mux5_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX5_CFG0, 3, 7,\n\t\t\tdmic_mux_alt_text);\n\nstatic const struct soc_enum tx_dmic_mux6_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX6_CFG0, 3, 7,\n\t\t\tdmic_mux_alt_text);\n\nstatic const struct soc_enum tx_dmic_mux7_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX7_CFG0, 3, 7,\n\t\t\tdmic_mux_alt_text);\n\nstatic const struct soc_enum tx_dmic_mux8_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX8_CFG0, 3, 7,\n\t\t\tdmic_mux_alt_text);\n\nstatic const struct soc_enum tx_amic_mux0_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux1_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX1_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux2_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX2_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux3_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX3_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux4_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX4_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux5_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX5_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux6_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX6_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux7_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX7_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum tx_amic_mux8_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_TX_INP_MUX_ADC_MUX8_CFG0, 0, 7,\n\t\t\tamic_mux_text);\n\nstatic const struct soc_enum sb_tx0_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG0, 0, 4,\n\t\t\tsb_tx0_mux_text);\n\nstatic const struct soc_enum sb_tx1_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG0, 2, 4,\n\t\t\tsb_tx1_mux_text);\n\nstatic const struct soc_enum sb_tx2_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG0, 4, 4,\n\t\t\tsb_tx2_mux_text);\n\nstatic const struct soc_enum sb_tx3_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG0, 6, 4,\n\t\t\tsb_tx3_mux_text);\n\nstatic const struct soc_enum sb_tx4_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG1, 0, 4,\n\t\t\tsb_tx4_mux_text);\n\nstatic const struct soc_enum sb_tx5_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG1, 2, 4,\n\t\t\tsb_tx5_mux_text);\n\nstatic const struct soc_enum sb_tx6_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG1, 4, 4,\n\t\t\tsb_tx6_mux_text);\n\nstatic const struct soc_enum sb_tx7_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG1, 6, 4,\n\t\t\tsb_tx7_mux_text);\n\nstatic const struct soc_enum sb_tx8_mux_enum =\n\tSOC_ENUM_SINGLE(WCD9335_CDC_IF_ROUTER_TX_MUX_CFG2, 0, 4,\n\t\t\tsb_tx8_mux_text);\n\nstatic const struct snd_kcontrol_new rx_int0_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT0_2 MUX Mux\", rx_int0_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int1_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT1_2 MUX Mux\", rx_int1_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int2_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT2_2 MUX Mux\", rx_int2_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int3_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT3_2 MUX Mux\", rx_int3_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int4_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT4_2 MUX Mux\", rx_int4_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int5_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT5_2 MUX Mux\", rx_int5_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int6_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT6_2 MUX Mux\", rx_int6_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int7_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT7_2 MUX Mux\", rx_int7_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int8_2_mux =\n\tSOC_DAPM_ENUM(\"RX INT8_2 MUX Mux\", rx_int8_2_mux_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int0_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT0_1 MIX1 INP0 Mux\", rx_int0_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int0_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT0_1 MIX1 INP1 Mux\", rx_int0_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int0_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT0_1 MIX1 INP2 Mux\", rx_int0_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int1_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT1_1 MIX1 INP0 Mux\", rx_int1_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int1_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT1_1 MIX1 INP1 Mux\", rx_int1_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int1_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT1_1 MIX1 INP2 Mux\", rx_int1_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int2_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT2_1 MIX1 INP0 Mux\", rx_int2_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int2_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT2_1 MIX1 INP1 Mux\", rx_int2_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int2_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT2_1 MIX1 INP2 Mux\", rx_int2_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int3_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT3_1 MIX1 INP0 Mux\", rx_int3_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int3_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT3_1 MIX1 INP1 Mux\", rx_int3_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int3_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT3_1 MIX1 INP2 Mux\", rx_int3_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int4_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT4_1 MIX1 INP0 Mux\", rx_int4_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int4_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT4_1 MIX1 INP1 Mux\", rx_int4_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int4_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT4_1 MIX1 INP2 Mux\", rx_int4_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int5_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT5_1 MIX1 INP0 Mux\", rx_int5_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int5_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT5_1 MIX1 INP1 Mux\", rx_int5_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int5_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT5_1 MIX1 INP2 Mux\", rx_int5_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int6_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT6_1 MIX1 INP0 Mux\", rx_int6_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int6_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT6_1 MIX1 INP1 Mux\", rx_int6_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int6_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT6_1 MIX1 INP2 Mux\", rx_int6_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int7_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT7_1 MIX1 INP0 Mux\", rx_int7_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int7_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT7_1 MIX1 INP1 Mux\", rx_int7_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int7_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT7_1 MIX1 INP2 Mux\", rx_int7_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int8_1_mix_inp0_mux =\n\tSOC_DAPM_ENUM(\"RX INT8_1 MIX1 INP0 Mux\", rx_int8_1_mix_inp0_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int8_1_mix_inp1_mux =\n\tSOC_DAPM_ENUM(\"RX INT8_1 MIX1 INP1 Mux\", rx_int8_1_mix_inp1_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int8_1_mix_inp2_mux =\n\tSOC_DAPM_ENUM(\"RX INT8_1 MIX1 INP2 Mux\", rx_int8_1_mix_inp2_chain_enum);\n\nstatic const struct snd_kcontrol_new rx_int0_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT0 INTERP Mux\", rx_int0_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int1_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT1 INTERP Mux\", rx_int1_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int2_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT2 INTERP Mux\", rx_int2_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int3_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT3 INTERP Mux\", rx_int3_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int4_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT4 INTERP Mux\", rx_int4_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int5_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT5 INTERP Mux\", rx_int5_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int6_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT6 INTERP Mux\", rx_int6_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int7_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT7 INTERP Mux\", rx_int7_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new rx_int8_interp_mux =\n\tSOC_DAPM_ENUM(\"RX INT8 INTERP Mux\", rx_int8_interp_mux_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux0 =\n\tSOC_DAPM_ENUM(\"DMIC MUX0 Mux\", tx_dmic_mux0_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux1 =\n\tSOC_DAPM_ENUM(\"DMIC MUX1 Mux\", tx_dmic_mux1_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux2 =\n\tSOC_DAPM_ENUM(\"DMIC MUX2 Mux\", tx_dmic_mux2_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux3 =\n\tSOC_DAPM_ENUM(\"DMIC MUX3 Mux\", tx_dmic_mux3_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux4 =\n\tSOC_DAPM_ENUM(\"DMIC MUX4 Mux\", tx_dmic_mux4_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux5 =\n\tSOC_DAPM_ENUM(\"DMIC MUX5 Mux\", tx_dmic_mux5_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux6 =\n\tSOC_DAPM_ENUM(\"DMIC MUX6 Mux\", tx_dmic_mux6_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux7 =\n\tSOC_DAPM_ENUM(\"DMIC MUX7 Mux\", tx_dmic_mux7_enum);\n\nstatic const struct snd_kcontrol_new tx_dmic_mux8 =\n\tSOC_DAPM_ENUM(\"DMIC MUX8 Mux\", tx_dmic_mux8_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux0 =\n\tSOC_DAPM_ENUM(\"AMIC MUX0 Mux\", tx_amic_mux0_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux1 =\n\tSOC_DAPM_ENUM(\"AMIC MUX1 Mux\", tx_amic_mux1_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux2 =\n\tSOC_DAPM_ENUM(\"AMIC MUX2 Mux\", tx_amic_mux2_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux3 =\n\tSOC_DAPM_ENUM(\"AMIC MUX3 Mux\", tx_amic_mux3_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux4 =\n\tSOC_DAPM_ENUM(\"AMIC MUX4 Mux\", tx_amic_mux4_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux5 =\n\tSOC_DAPM_ENUM(\"AMIC MUX5 Mux\", tx_amic_mux5_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux6 =\n\tSOC_DAPM_ENUM(\"AMIC MUX6 Mux\", tx_amic_mux6_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux7 =\n\tSOC_DAPM_ENUM(\"AMIC MUX7 Mux\", tx_amic_mux7_enum);\n\nstatic const struct snd_kcontrol_new tx_amic_mux8 =\n\tSOC_DAPM_ENUM(\"AMIC MUX8 Mux\", tx_amic_mux8_enum);\n\nstatic const struct snd_kcontrol_new sb_tx0_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX0 MUX Mux\", sb_tx0_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx1_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX1 MUX Mux\", sb_tx1_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx2_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX2 MUX Mux\", sb_tx2_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx3_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX3 MUX Mux\", sb_tx3_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx4_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX4 MUX Mux\", sb_tx4_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx5_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX5 MUX Mux\", sb_tx5_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx6_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX6 MUX Mux\", sb_tx6_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx7_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX7 MUX Mux\", sb_tx7_mux_enum);\n\nstatic const struct snd_kcontrol_new sb_tx8_mux =\n\tSOC_DAPM_ENUM(\"SLIM TX8 MUX Mux\", sb_tx8_mux_enum);\n\nstatic int slim_rx_mux_get(struct snd_kcontrol *kc,\n\t\t\t   struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_widget *w = snd_soc_dapm_kcontrol_widget(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(w->dapm->dev);\n\tu32 port_id = w->shift;\n\n\tucontrol->value.enumerated.item[0] = wcd->rx_port_value[port_id];\n\n\treturn 0;\n}\n\nstatic int slim_rx_mux_put(struct snd_kcontrol *kc,\n\t\t\t   struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_widget *w = snd_soc_dapm_kcontrol_widget(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(w->dapm->dev);\n\tstruct soc_enum *e = (struct soc_enum *)kc->private_value;\n\tstruct snd_soc_dapm_update *update = NULL;\n\tu32 port_id = w->shift;\n\n\tif (wcd->rx_port_value[port_id] == ucontrol->value.enumerated.item[0])\n\t\treturn 0;\n\n\twcd->rx_port_value[port_id] = ucontrol->value.enumerated.item[0];\n\n\t \n\tlist_del_init(&wcd->rx_chs[port_id].list);\n\n\tswitch (wcd->rx_port_value[port_id]) {\n\tcase 0:\n\t\t \n\t\tbreak;\n\tcase 1:\n\t\tlist_add_tail(&wcd->rx_chs[port_id].list,\n\t\t\t      &wcd->dai[AIF1_PB].slim_ch_list);\n\t\tbreak;\n\tcase 2:\n\t\tlist_add_tail(&wcd->rx_chs[port_id].list,\n\t\t\t      &wcd->dai[AIF2_PB].slim_ch_list);\n\t\tbreak;\n\tcase 3:\n\t\tlist_add_tail(&wcd->rx_chs[port_id].list,\n\t\t\t      &wcd->dai[AIF3_PB].slim_ch_list);\n\t\tbreak;\n\tcase 4:\n\t\tlist_add_tail(&wcd->rx_chs[port_id].list,\n\t\t\t      &wcd->dai[AIF4_PB].slim_ch_list);\n\t\tbreak;\n\tdefault:\n\t\tdev_err(wcd->dev, \"Unknown AIF %d\\n\", wcd->rx_port_value[port_id]);\n\t\tgoto err;\n\t}\n\n\tsnd_soc_dapm_mux_update_power(w->dapm, kc, wcd->rx_port_value[port_id],\n\t\t\t\t      e, update);\n\n\treturn 0;\nerr:\n\treturn -EINVAL;\n}\n\nstatic int slim_tx_mixer_get(struct snd_kcontrol *kc,\n\t\t\t     struct snd_ctl_elem_value *ucontrol)\n{\n\n\tstruct snd_soc_dapm_context *dapm = snd_soc_dapm_kcontrol_dapm(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(dapm->dev);\n\tstruct snd_soc_dapm_widget *widget = snd_soc_dapm_kcontrol_widget(kc);\n\tstruct soc_mixer_control *mixer =\n\t\t\t(struct soc_mixer_control *)kc->private_value;\n\tint dai_id = widget->shift;\n\tint port_id = mixer->shift;\n\n\tucontrol->value.integer.value[0] = wcd->tx_port_value[port_id] == dai_id;\n\n\treturn 0;\n}\n\nstatic int slim_tx_mixer_put(struct snd_kcontrol *kc,\n\t\t\t     struct snd_ctl_elem_value *ucontrol)\n{\n\n\tstruct snd_soc_dapm_widget *widget = snd_soc_dapm_kcontrol_widget(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(widget->dapm->dev);\n\tstruct snd_soc_dapm_update *update = NULL;\n\tstruct soc_mixer_control *mixer =\n\t\t\t(struct soc_mixer_control *)kc->private_value;\n\tint enable = ucontrol->value.integer.value[0];\n\tint dai_id = widget->shift;\n\tint port_id = mixer->shift;\n\n\tswitch (dai_id) {\n\tcase AIF1_CAP:\n\tcase AIF2_CAP:\n\tcase AIF3_CAP:\n\t\t \n\t\tif (enable && wcd->tx_port_value[port_id] != dai_id) {\n\t\t\twcd->tx_port_value[port_id] = dai_id;\n\t\t\tlist_add_tail(&wcd->tx_chs[port_id].list,\n\t\t\t\t\t&wcd->dai[dai_id].slim_ch_list);\n\t\t} else if (!enable && wcd->tx_port_value[port_id] == dai_id) {\n\t\t\twcd->tx_port_value[port_id] = -1;\n\t\t\tlist_del_init(&wcd->tx_chs[port_id].list);\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\tdev_err(wcd->dev, \"Unknown AIF %d\\n\", dai_id);\n\t\treturn -EINVAL;\n\t}\n\n\tsnd_soc_dapm_mixer_update_power(widget->dapm, kc, enable, update);\n\n\treturn 0;\n}\n\nstatic const struct snd_kcontrol_new slim_rx_mux[WCD9335_RX_MAX] = {\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX0 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX1 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX2 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX3 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX4 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX5 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX6 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n\tSOC_DAPM_ENUM_EXT(\"SLIM RX7 Mux\", slim_rx_mux_enum,\n\t\t\t  slim_rx_mux_get, slim_rx_mux_put),\n};\n\nstatic const struct snd_kcontrol_new aif1_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"SLIM TX0\", SND_SOC_NOPM, WCD9335_TX0, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX1\", SND_SOC_NOPM, WCD9335_TX1, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX2\", SND_SOC_NOPM, WCD9335_TX2, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX3\", SND_SOC_NOPM, WCD9335_TX3, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX4\", SND_SOC_NOPM, WCD9335_TX4, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX5\", SND_SOC_NOPM, WCD9335_TX5, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX6\", SND_SOC_NOPM, WCD9335_TX6, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX7\", SND_SOC_NOPM, WCD9335_TX7, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX8\", SND_SOC_NOPM, WCD9335_TX8, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX9\", SND_SOC_NOPM, WCD9335_TX9, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX10\", SND_SOC_NOPM, WCD9335_TX10, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX11\", SND_SOC_NOPM, WCD9335_TX11, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX13\", SND_SOC_NOPM, WCD9335_TX13, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n};\n\nstatic const struct snd_kcontrol_new aif2_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"SLIM TX0\", SND_SOC_NOPM, WCD9335_TX0, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX1\", SND_SOC_NOPM, WCD9335_TX1, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX2\", SND_SOC_NOPM, WCD9335_TX2, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX3\", SND_SOC_NOPM, WCD9335_TX3, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX4\", SND_SOC_NOPM, WCD9335_TX4, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX5\", SND_SOC_NOPM, WCD9335_TX5, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX6\", SND_SOC_NOPM, WCD9335_TX6, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX7\", SND_SOC_NOPM, WCD9335_TX7, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX8\", SND_SOC_NOPM, WCD9335_TX8, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX9\", SND_SOC_NOPM, WCD9335_TX9, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX10\", SND_SOC_NOPM, WCD9335_TX10, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX11\", SND_SOC_NOPM, WCD9335_TX11, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX13\", SND_SOC_NOPM, WCD9335_TX13, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n};\n\nstatic const struct snd_kcontrol_new aif3_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"SLIM TX0\", SND_SOC_NOPM, WCD9335_TX0, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX1\", SND_SOC_NOPM, WCD9335_TX1, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX2\", SND_SOC_NOPM, WCD9335_TX2, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX3\", SND_SOC_NOPM, WCD9335_TX3, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX4\", SND_SOC_NOPM, WCD9335_TX4, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX5\", SND_SOC_NOPM, WCD9335_TX5, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX6\", SND_SOC_NOPM, WCD9335_TX6, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX7\", SND_SOC_NOPM, WCD9335_TX7, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"SLIM TX8\", SND_SOC_NOPM, WCD9335_TX8, 1, 0,\n\t\t\tslim_tx_mixer_get, slim_tx_mixer_put),\n};\n\nstatic int wcd9335_put_dec_enum(struct snd_kcontrol *kc,\n\t\t\t\tstruct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_context *dapm = snd_soc_dapm_kcontrol_dapm(kc);\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(dapm);\n\tstruct soc_enum *e = (struct soc_enum *)kc->private_value;\n\tunsigned int val, reg, sel;\n\n\tval = ucontrol->value.enumerated.item[0];\n\n\tswitch (e->reg) {\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG1:\n\t\treg = WCD9335_CDC_TX0_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX1_CFG1:\n\t\treg = WCD9335_CDC_TX1_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX2_CFG1:\n\t\treg = WCD9335_CDC_TX2_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX3_CFG1:\n\t\treg = WCD9335_CDC_TX3_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX4_CFG0:\n\t\treg = WCD9335_CDC_TX4_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX5_CFG0:\n\t\treg = WCD9335_CDC_TX5_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX6_CFG0:\n\t\treg = WCD9335_CDC_TX6_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX7_CFG0:\n\t\treg = WCD9335_CDC_TX7_TX_PATH_CFG0;\n\t\tbreak;\n\tcase WCD9335_CDC_TX_INP_MUX_ADC_MUX8_CFG0:\n\t\treg = WCD9335_CDC_TX8_TX_PATH_CFG0;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\t \n\tsel = val ? WCD9335_CDC_TX_ADC_AMIC_SEL : WCD9335_CDC_TX_ADC_DMIC_SEL;\n\tsnd_soc_component_update_bits(component, reg,\n\t\t\t\t      WCD9335_CDC_TX_ADC_AMIC_DMIC_SEL_MASK,\n\t\t\t\t      sel);\n\n\treturn snd_soc_dapm_put_enum_double(kc, ucontrol);\n}\n\nstatic int wcd9335_int_dem_inp_mux_put(struct snd_kcontrol *kc,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct soc_enum *e = (struct soc_enum *)kc->private_value;\n\tstruct snd_soc_component *component;\n\tint reg, val;\n\n\tcomponent = snd_soc_dapm_kcontrol_component(kc);\n\tval = ucontrol->value.enumerated.item[0];\n\n\tif (e->reg == WCD9335_CDC_RX0_RX_PATH_SEC0)\n\t\treg = WCD9335_CDC_RX0_RX_PATH_CFG0;\n\telse if (e->reg == WCD9335_CDC_RX1_RX_PATH_SEC0)\n\t\treg = WCD9335_CDC_RX1_RX_PATH_CFG0;\n\telse if (e->reg == WCD9335_CDC_RX2_RX_PATH_SEC0)\n\t\treg = WCD9335_CDC_RX2_RX_PATH_CFG0;\n\telse\n\t\treturn -EINVAL;\n\n\t \n\tsnd_soc_component_update_bits(component, reg,\n\t\t\t\tWCD9335_CDC_RX_PATH_CFG0_DLY_ZN_EN_MASK,\n\t\t\t\tval ? WCD9335_CDC_RX_PATH_CFG0_DLY_ZN_EN : 0);\n\t \n\treturn snd_soc_dapm_put_enum_double(kc, ucontrol);\n}\n\nstatic const struct snd_kcontrol_new rx_int0_dem_inp_mux =\n\tSOC_DAPM_ENUM_EXT(\"RX INT0 DEM MUX Mux\", rx_int0_dem_inp_mux_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_int_dem_inp_mux_put);\n\nstatic const struct snd_kcontrol_new rx_int1_dem_inp_mux =\n\tSOC_DAPM_ENUM_EXT(\"RX INT1 DEM MUX Mux\", rx_int1_dem_inp_mux_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_int_dem_inp_mux_put);\n\nstatic const struct snd_kcontrol_new rx_int2_dem_inp_mux =\n\tSOC_DAPM_ENUM_EXT(\"RX INT2 DEM MUX Mux\", rx_int2_dem_inp_mux_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_int_dem_inp_mux_put);\n\nstatic const struct snd_kcontrol_new tx_adc_mux0 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX0 Mux\", tx_adc_mux0_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux1 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX1 Mux\", tx_adc_mux1_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux2 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX2 Mux\", tx_adc_mux2_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux3 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX3 Mux\", tx_adc_mux3_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux4 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX4 Mux\", tx_adc_mux4_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux5 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX5 Mux\", tx_adc_mux5_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux6 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX6 Mux\", tx_adc_mux6_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux7 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX7 Mux\", tx_adc_mux7_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic const struct snd_kcontrol_new tx_adc_mux8 =\n\tSOC_DAPM_ENUM_EXT(\"ADC MUX8 Mux\", tx_adc_mux8_chain_enum,\n\t\t\t  snd_soc_dapm_get_enum_double,\n\t\t\t  wcd9335_put_dec_enum);\n\nstatic int wcd9335_set_mix_interpolator_rate(struct snd_soc_dai *dai,\n\t\t\t\t\t     int rate_val,\n\t\t\t\t\t     u32 rate)\n{\n\tstruct snd_soc_component *component = dai->component;\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tstruct wcd9335_slim_ch *ch;\n\tint val, j;\n\n\tlist_for_each_entry(ch, &wcd->dai[dai->id].slim_ch_list, list) {\n\t\tfor (j = 0; j < WCD9335_NUM_INTERPOLATORS; j++) {\n\t\t\tval = snd_soc_component_read(component,\n\t\t\t\t\tWCD9335_CDC_RX_INP_MUX_RX_INT_CFG1(j)) &\n\t\t\t\t\tWCD9335_CDC_RX_INP_MUX_RX_INT_SEL_MASK;\n\n\t\t\tif (val == (ch->shift + INTn_2_INP_SEL_RX0))\n\t\t\t\tsnd_soc_component_update_bits(component,\n\t\t\t\t\t\tWCD9335_CDC_RX_PATH_MIX_CTL(j),\n\t\t\t\t\t\tWCD9335_CDC_MIX_PCM_RATE_MASK,\n\t\t\t\t\t\trate_val);\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_set_prim_interpolator_rate(struct snd_soc_dai *dai,\n\t\t\t\t\t      u8 rate_val,\n\t\t\t\t\t      u32 rate)\n{\n\tstruct snd_soc_component *comp = dai->component;\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tstruct wcd9335_slim_ch *ch;\n\tu8 cfg0, cfg1, inp0_sel, inp1_sel, inp2_sel;\n\tint inp, j;\n\n\tlist_for_each_entry(ch, &wcd->dai[dai->id].slim_ch_list, list) {\n\t\tinp = ch->shift + INTn_1_MIX_INP_SEL_RX0;\n\t\t \n\t\tfor (j = 0; j < WCD9335_NUM_INTERPOLATORS; j++) {\n\t\t\tcfg0 = snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CDC_RX_INP_MUX_RX_INT_CFG0(j));\n\t\t\tcfg1 = snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CDC_RX_INP_MUX_RX_INT_CFG1(j));\n\n\t\t\tinp0_sel = cfg0 &\n\t\t\t\t WCD9335_CDC_RX_INP_MUX_RX_INT_SEL_MASK;\n\t\t\tinp1_sel = (cfg0 >> 4) &\n\t\t\t\t WCD9335_CDC_RX_INP_MUX_RX_INT_SEL_MASK;\n\t\t\tinp2_sel = (cfg1 >> 4) &\n\t\t\t\t WCD9335_CDC_RX_INP_MUX_RX_INT_SEL_MASK;\n\n\t\t\tif ((inp0_sel == inp) ||  (inp1_sel == inp) ||\n\t\t\t    (inp2_sel == inp)) {\n\t\t\t\t \n\t\t\t\tif ((j == 0) && (rate == 44100))\n\t\t\t\t\tdev_info(wcd->dev,\n\t\t\t\t\t\t\"Cannot set 44.1KHz on INT0\\n\");\n\t\t\t\telse\n\t\t\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\t\tWCD9335_CDC_RX_PATH_CTL(j),\n\t\t\t\t\t\tWCD9335_CDC_MIX_PCM_RATE_MASK,\n\t\t\t\t\t\trate_val);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_set_interpolator_rate(struct snd_soc_dai *dai, u32 rate)\n{\n\tint i;\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(int_mix_rate_val); i++) {\n\t\tif (rate == int_mix_rate_val[i].rate) {\n\t\t\twcd9335_set_mix_interpolator_rate(dai,\n\t\t\t\t\tint_mix_rate_val[i].rate_val, rate);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(int_prim_rate_val); i++) {\n\t\tif (rate == int_prim_rate_val[i].rate) {\n\t\t\twcd9335_set_prim_interpolator_rate(dai,\n\t\t\t\t\tint_prim_rate_val[i].rate_val, rate);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_slim_set_hw_params(struct wcd9335_codec *wcd,\n\t\t\t\t struct wcd_slim_codec_dai_data *dai_data,\n\t\t\t\t int direction)\n{\n\tstruct list_head *slim_ch_list = &dai_data->slim_ch_list;\n\tstruct slim_stream_config *cfg = &dai_data->sconfig;\n\tstruct wcd9335_slim_ch *ch;\n\tu16 payload = 0;\n\tint ret, i;\n\n\tcfg->ch_count = 0;\n\tcfg->direction = direction;\n\tcfg->port_mask = 0;\n\n\t \n\tlist_for_each_entry(ch, slim_ch_list, list) {\n\t\tcfg->ch_count++;\n\t\tpayload |= 1 << ch->shift;\n\t\tcfg->port_mask |= BIT(ch->port);\n\t}\n\n\tcfg->chs = kcalloc(cfg->ch_count, sizeof(unsigned int), GFP_KERNEL);\n\tif (!cfg->chs)\n\t\treturn -ENOMEM;\n\n\ti = 0;\n\tlist_for_each_entry(ch, slim_ch_list, list) {\n\t\tcfg->chs[i++] = ch->ch_num;\n\t\tif (direction == SNDRV_PCM_STREAM_PLAYBACK) {\n\t\t\t \n\t\t\tret = regmap_write(wcd->if_regmap,\n\t\t\t\tWCD9335_SLIM_PGD_RX_PORT_MULTI_CHNL_0(ch->port),\n\t\t\t\tpayload);\n\n\t\t\tif (ret < 0)\n\t\t\t\tgoto err;\n\n\t\t\t \n\t\t\tret = regmap_write(wcd->if_regmap,\n\t\t\t\t\tWCD9335_SLIM_PGD_RX_PORT_CFG(ch->port),\n\t\t\t\t\tWCD9335_SLIM_WATER_MARK_VAL);\n\t\t\tif (ret < 0)\n\t\t\t\tgoto err;\n\t\t} else {\n\t\t\tret = regmap_write(wcd->if_regmap,\n\t\t\t\tWCD9335_SLIM_PGD_TX_PORT_MULTI_CHNL_0(ch->port),\n\t\t\t\tpayload & 0x00FF);\n\t\t\tif (ret < 0)\n\t\t\t\tgoto err;\n\n\t\t\t \n\t\t\tret = regmap_write(wcd->if_regmap,\n\t\t\t\tWCD9335_SLIM_PGD_TX_PORT_MULTI_CHNL_1(ch->port),\n\t\t\t\t(payload & 0xFF00)>>8);\n\t\t\tif (ret < 0)\n\t\t\t\tgoto err;\n\n\t\t\t \n\t\t\tret = regmap_write(wcd->if_regmap,\n\t\t\t\t\tWCD9335_SLIM_PGD_TX_PORT_CFG(ch->port),\n\t\t\t\t\tWCD9335_SLIM_WATER_MARK_VAL);\n\n\t\t\tif (ret < 0)\n\t\t\t\tgoto err;\n\t\t}\n\t}\n\n\tdai_data->sruntime = slim_stream_allocate(wcd->slim, \"WCD9335-SLIM\");\n\n\treturn 0;\n\nerr:\n\tdev_err(wcd->dev, \"Error Setting slim hw params\\n\");\n\tkfree(cfg->chs);\n\tcfg->chs = NULL;\n\n\treturn ret;\n}\n\nstatic int wcd9335_set_decimator_rate(struct snd_soc_dai *dai,\n\t\t\t\t      u8 rate_val, u32 rate)\n{\n\tstruct snd_soc_component *comp = dai->component;\n\tstruct wcd9335_codec *wcd = snd_soc_component_get_drvdata(comp);\n\tu8 shift = 0, shift_val = 0, tx_mux_sel;\n\tstruct wcd9335_slim_ch *ch;\n\tint tx_port, tx_port_reg;\n\tint decimator = -1;\n\n\tlist_for_each_entry(ch, &wcd->dai[dai->id].slim_ch_list, list) {\n\t\ttx_port = ch->port;\n\t\tif ((tx_port == 12) || (tx_port >= 14)) {\n\t\t\tdev_err(wcd->dev, \"Invalid SLIM TX%u port DAI ID:%d\\n\",\n\t\t\t\ttx_port, dai->id);\n\t\t\treturn -EINVAL;\n\t\t}\n\t\t \n\t\tif (tx_port < 4) {\n\t\t\ttx_port_reg = WCD9335_CDC_IF_ROUTER_TX_MUX_CFG0;\n\t\t\tshift = (tx_port << 1);\n\t\t\tshift_val = 0x03;\n\t\t} else if (tx_port < 8) {\n\t\t\ttx_port_reg = WCD9335_CDC_IF_ROUTER_TX_MUX_CFG1;\n\t\t\tshift = ((tx_port - 4) << 1);\n\t\t\tshift_val = 0x03;\n\t\t} else if (tx_port < 11) {\n\t\t\ttx_port_reg = WCD9335_CDC_IF_ROUTER_TX_MUX_CFG2;\n\t\t\tshift = ((tx_port - 8) << 1);\n\t\t\tshift_val = 0x03;\n\t\t} else if (tx_port == 11) {\n\t\t\ttx_port_reg = WCD9335_CDC_IF_ROUTER_TX_MUX_CFG3;\n\t\t\tshift = 0;\n\t\t\tshift_val = 0x0F;\n\t\t} else   {\n\t\t\ttx_port_reg = WCD9335_CDC_IF_ROUTER_TX_MUX_CFG3;\n\t\t\tshift = 4;\n\t\t\tshift_val = 0x03;\n\t\t}\n\n\t\ttx_mux_sel = snd_soc_component_read(comp, tx_port_reg) &\n\t\t\t\t\t\t      (shift_val << shift);\n\n\t\ttx_mux_sel = tx_mux_sel >> shift;\n\t\tif (tx_port <= 8) {\n\t\t\tif ((tx_mux_sel == 0x2) || (tx_mux_sel == 0x3))\n\t\t\t\tdecimator = tx_port;\n\t\t} else if (tx_port <= 10) {\n\t\t\tif ((tx_mux_sel == 0x1) || (tx_mux_sel == 0x2))\n\t\t\t\tdecimator = ((tx_port == 9) ? 7 : 6);\n\t\t} else if (tx_port == 11) {\n\t\t\tif ((tx_mux_sel >= 1) && (tx_mux_sel < 7))\n\t\t\t\tdecimator = tx_mux_sel - 1;\n\t\t} else if (tx_port == 13) {\n\t\t\tif ((tx_mux_sel == 0x1) || (tx_mux_sel == 0x2))\n\t\t\t\tdecimator = 5;\n\t\t}\n\n\t\tif (decimator >= 0) {\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_TX_PATH_CTL(decimator),\n\t\t\t\t\tWCD9335_CDC_TX_PATH_CTL_PCM_RATE_MASK,\n\t\t\t\t\trate_val);\n\t\t} else if ((tx_port <= 8) && (tx_mux_sel == 0x01)) {\n\t\t\t \n\t\t\tdev_err(wcd->dev, \"RX_MIX_TX%u going to SLIM TX%u\\n\",\n\t\t\t\ttx_port, tx_port);\n\t\t} else {\n\t\t\tdev_err(wcd->dev, \"ERROR: Invalid decimator: %d\\n\",\n\t\t\t\tdecimator);\n\t\t\treturn -EINVAL;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_hw_params(struct snd_pcm_substream *substream,\n\t\t\t   struct snd_pcm_hw_params *params,\n\t\t\t   struct snd_soc_dai *dai)\n{\n\tstruct wcd9335_codec *wcd;\n\tint ret, tx_fs_rate = 0;\n\n\twcd = snd_soc_component_get_drvdata(dai->component);\n\n\tswitch (substream->stream) {\n\tcase SNDRV_PCM_STREAM_PLAYBACK:\n\t\tret = wcd9335_set_interpolator_rate(dai, params_rate(params));\n\t\tif (ret) {\n\t\t\tdev_err(wcd->dev, \"cannot set sample rate: %u\\n\",\n\t\t\t\tparams_rate(params));\n\t\t\treturn ret;\n\t\t}\n\t\tswitch (params_width(params)) {\n\t\tcase 16 ... 24:\n\t\t\twcd->dai[dai->id].sconfig.bps = params_width(params);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(wcd->dev, \"%s: Invalid format 0x%x\\n\",\n\t\t\t\t__func__, params_width(params));\n\t\t\treturn -EINVAL;\n\t\t}\n\t\tbreak;\n\n\tcase SNDRV_PCM_STREAM_CAPTURE:\n\t\tswitch (params_rate(params)) {\n\t\tcase 8000:\n\t\t\ttx_fs_rate = 0;\n\t\t\tbreak;\n\t\tcase 16000:\n\t\t\ttx_fs_rate = 1;\n\t\t\tbreak;\n\t\tcase 32000:\n\t\t\ttx_fs_rate = 3;\n\t\t\tbreak;\n\t\tcase 48000:\n\t\t\ttx_fs_rate = 4;\n\t\t\tbreak;\n\t\tcase 96000:\n\t\t\ttx_fs_rate = 5;\n\t\t\tbreak;\n\t\tcase 192000:\n\t\t\ttx_fs_rate = 6;\n\t\t\tbreak;\n\t\tcase 384000:\n\t\t\ttx_fs_rate = 7;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(wcd->dev, \"%s: Invalid TX sample rate: %d\\n\",\n\t\t\t\t__func__, params_rate(params));\n\t\t\treturn -EINVAL;\n\n\t\t}\n\n\t\tret = wcd9335_set_decimator_rate(dai, tx_fs_rate,\n\t\t\t\t\t\tparams_rate(params));\n\t\tif (ret < 0) {\n\t\t\tdev_err(wcd->dev, \"Cannot set TX Decimator rate\\n\");\n\t\t\treturn ret;\n\t\t}\n\t\tswitch (params_width(params)) {\n\t\tcase 16 ... 32:\n\t\t\twcd->dai[dai->id].sconfig.bps = params_width(params);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdev_err(wcd->dev, \"%s: Invalid format 0x%x\\n\",\n\t\t\t\t__func__, params_width(params));\n\t\t\treturn -EINVAL;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\tdev_err(wcd->dev, \"Invalid stream type %d\\n\",\n\t\t\tsubstream->stream);\n\t\treturn -EINVAL;\n\t}\n\n\twcd->dai[dai->id].sconfig.rate = params_rate(params);\n\twcd9335_slim_set_hw_params(wcd, &wcd->dai[dai->id], substream->stream);\n\n\treturn 0;\n}\n\nstatic int wcd9335_trigger(struct snd_pcm_substream *substream, int cmd,\n\t\t\t   struct snd_soc_dai *dai)\n{\n\tstruct wcd_slim_codec_dai_data *dai_data;\n\tstruct wcd9335_codec *wcd;\n\tstruct slim_stream_config *cfg;\n\n\twcd = snd_soc_component_get_drvdata(dai->component);\n\n\tdai_data = &wcd->dai[dai->id];\n\n\tswitch (cmd) {\n\tcase SNDRV_PCM_TRIGGER_START:\n\tcase SNDRV_PCM_TRIGGER_RESUME:\n\tcase SNDRV_PCM_TRIGGER_PAUSE_RELEASE:\n\t\tcfg = &dai_data->sconfig;\n\t\tslim_stream_prepare(dai_data->sruntime, cfg);\n\t\tslim_stream_enable(dai_data->sruntime);\n\t\tbreak;\n\tcase SNDRV_PCM_TRIGGER_STOP:\n\tcase SNDRV_PCM_TRIGGER_SUSPEND:\n\tcase SNDRV_PCM_TRIGGER_PAUSE_PUSH:\n\t\tslim_stream_disable(dai_data->sruntime);\n\t\tslim_stream_unprepare(dai_data->sruntime);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_set_channel_map(struct snd_soc_dai *dai,\n\t\t\t\t   unsigned int tx_num, unsigned int *tx_slot,\n\t\t\t\t   unsigned int rx_num, unsigned int *rx_slot)\n{\n\tstruct wcd9335_codec *wcd;\n\tint i;\n\n\twcd = snd_soc_component_get_drvdata(dai->component);\n\n\tif (!tx_slot || !rx_slot) {\n\t\tdev_err(wcd->dev, \"Invalid tx_slot=%p, rx_slot=%p\\n\",\n\t\t\ttx_slot, rx_slot);\n\t\treturn -EINVAL;\n\t}\n\n\twcd->num_rx_port = rx_num;\n\tfor (i = 0; i < rx_num; i++) {\n\t\twcd->rx_chs[i].ch_num = rx_slot[i];\n\t\tINIT_LIST_HEAD(&wcd->rx_chs[i].list);\n\t}\n\n\twcd->num_tx_port = tx_num;\n\tfor (i = 0; i < tx_num; i++) {\n\t\twcd->tx_chs[i].ch_num = tx_slot[i];\n\t\tINIT_LIST_HEAD(&wcd->tx_chs[i].list);\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_get_channel_map(struct snd_soc_dai *dai,\n\t\t\t\t   unsigned int *tx_num, unsigned int *tx_slot,\n\t\t\t\t   unsigned int *rx_num, unsigned int *rx_slot)\n{\n\tstruct wcd9335_slim_ch *ch;\n\tstruct wcd9335_codec *wcd;\n\tint i = 0;\n\n\twcd = snd_soc_component_get_drvdata(dai->component);\n\n\tswitch (dai->id) {\n\tcase AIF1_PB:\n\tcase AIF2_PB:\n\tcase AIF3_PB:\n\tcase AIF4_PB:\n\t\tif (!rx_slot || !rx_num) {\n\t\t\tdev_err(wcd->dev, \"Invalid rx_slot %p or rx_num %p\\n\",\n\t\t\t\trx_slot, rx_num);\n\t\t\treturn -EINVAL;\n\t\t}\n\n\t\tlist_for_each_entry(ch, &wcd->dai[dai->id].slim_ch_list, list)\n\t\t\trx_slot[i++] = ch->ch_num;\n\n\t\t*rx_num = i;\n\t\tbreak;\n\tcase AIF1_CAP:\n\tcase AIF2_CAP:\n\tcase AIF3_CAP:\n\t\tif (!tx_slot || !tx_num) {\n\t\t\tdev_err(wcd->dev, \"Invalid tx_slot %p or tx_num %p\\n\",\n\t\t\t\ttx_slot, tx_num);\n\t\t\treturn -EINVAL;\n\t\t}\n\t\tlist_for_each_entry(ch, &wcd->dai[dai->id].slim_ch_list, list)\n\t\t\ttx_slot[i++] = ch->ch_num;\n\n\t\t*tx_num = i;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(wcd->dev, \"Invalid DAI ID %x\\n\", dai->id);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic const struct snd_soc_dai_ops wcd9335_dai_ops = {\n\t.hw_params = wcd9335_hw_params,\n\t.trigger = wcd9335_trigger,\n\t.set_channel_map = wcd9335_set_channel_map,\n\t.get_channel_map = wcd9335_get_channel_map,\n};\n\nstatic struct snd_soc_dai_driver wcd9335_slim_dais[] = {\n\t[0] = {\n\t\t.name = \"wcd9335_rx1\",\n\t\t.id = AIF1_PB,\n\t\t.playback = {\n\t\t\t.stream_name = \"AIF1 Playback\",\n\t\t\t.rates = WCD9335_RATES_MASK | WCD9335_FRAC_RATES_MASK |\n\t\t\t\t SNDRV_PCM_RATE_384000,\n\t\t\t.formats = WCD9335_FORMATS_S16_S24_LE,\n\t\t\t.rate_max = 384000,\n\t\t\t.rate_min = 8000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 2,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[1] = {\n\t\t.name = \"wcd9335_tx1\",\n\t\t.id = AIF1_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"AIF1 Capture\",\n\t\t\t.rates = WCD9335_RATES_MASK,\n\t\t\t.formats = SNDRV_PCM_FMTBIT_S16_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 192000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 4,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[2] = {\n\t\t.name = \"wcd9335_rx2\",\n\t\t.id = AIF2_PB,\n\t\t.playback = {\n\t\t\t.stream_name = \"AIF2 Playback\",\n\t\t\t.rates = WCD9335_RATES_MASK | WCD9335_FRAC_RATES_MASK |\n\t\t\t\t SNDRV_PCM_RATE_384000,\n\t\t\t.formats = WCD9335_FORMATS_S16_S24_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 384000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 2,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[3] = {\n\t\t.name = \"wcd9335_tx2\",\n\t\t.id = AIF2_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"AIF2 Capture\",\n\t\t\t.rates = WCD9335_RATES_MASK,\n\t\t\t.formats = SNDRV_PCM_FMTBIT_S16_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 192000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 4,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[4] = {\n\t\t.name = \"wcd9335_rx3\",\n\t\t.id = AIF3_PB,\n\t\t.playback = {\n\t\t\t.stream_name = \"AIF3 Playback\",\n\t\t\t.rates = WCD9335_RATES_MASK | WCD9335_FRAC_RATES_MASK |\n\t\t\t\t SNDRV_PCM_RATE_384000,\n\t\t\t.formats = WCD9335_FORMATS_S16_S24_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 384000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 2,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[5] = {\n\t\t.name = \"wcd9335_tx3\",\n\t\t.id = AIF3_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"AIF3 Capture\",\n\t\t\t.rates = WCD9335_RATES_MASK,\n\t\t\t.formats = SNDRV_PCM_FMTBIT_S16_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 192000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 4,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n\t[6] = {\n\t\t.name = \"wcd9335_rx4\",\n\t\t.id = AIF4_PB,\n\t\t.playback = {\n\t\t\t.stream_name = \"AIF4 Playback\",\n\t\t\t.rates = WCD9335_RATES_MASK | WCD9335_FRAC_RATES_MASK |\n\t\t\t\t SNDRV_PCM_RATE_384000,\n\t\t\t.formats = WCD9335_FORMATS_S16_S24_LE,\n\t\t\t.rate_min = 8000,\n\t\t\t.rate_max = 384000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 2,\n\t\t},\n\t\t.ops = &wcd9335_dai_ops,\n\t},\n};\n\nstatic int wcd9335_get_compander(struct snd_kcontrol *kc,\n\t\t\t       struct snd_ctl_elem_value *ucontrol)\n{\n\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kc);\n\tint comp = ((struct soc_mixer_control *)kc->private_value)->shift;\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\n\tucontrol->value.integer.value[0] = wcd->comp_enabled[comp];\n\treturn 0;\n}\n\nstatic int wcd9335_set_compander(struct snd_kcontrol *kc,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tint comp = ((struct soc_mixer_control *) kc->private_value)->shift;\n\tint value = ucontrol->value.integer.value[0];\n\tint sel;\n\n\twcd->comp_enabled[comp] = value;\n\tsel = value ? WCD9335_HPH_GAIN_SRC_SEL_COMPANDER :\n\t\tWCD9335_HPH_GAIN_SRC_SEL_REGISTER;\n\n\t \n\tswitch (comp) {\n\tcase COMPANDER_1:\n\t\t \n\t\tsnd_soc_component_update_bits(component, WCD9335_HPH_L_EN,\n\t\t\t\t      WCD9335_HPH_GAIN_SRC_SEL_MASK, sel);\n\t\tbreak;\n\tcase COMPANDER_2:\n\t\tsnd_soc_component_update_bits(component, WCD9335_HPH_R_EN,\n\t\t\t\t      WCD9335_HPH_GAIN_SRC_SEL_MASK, sel);\n\t\tbreak;\n\tcase COMPANDER_5:\n\t\tsnd_soc_component_update_bits(component, WCD9335_SE_LO_LO3_GAIN,\n\t\t\t\t      WCD9335_HPH_GAIN_SRC_SEL_MASK, sel);\n\t\tbreak;\n\tcase COMPANDER_6:\n\t\tsnd_soc_component_update_bits(component, WCD9335_SE_LO_LO4_GAIN,\n\t\t\t\t      WCD9335_HPH_GAIN_SRC_SEL_MASK, sel);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_rx_hph_mode_get(struct snd_kcontrol *kc,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\n\tucontrol->value.enumerated.item[0] = wcd->hph_mode;\n\n\treturn 0;\n}\n\nstatic int wcd9335_rx_hph_mode_put(struct snd_kcontrol *kc,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kc);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tu32 mode_val;\n\n\tmode_val = ucontrol->value.enumerated.item[0];\n\n\tif (mode_val == 0) {\n\t\tdev_err(wcd->dev, \"Invalid HPH Mode, default to ClSH HiFi\\n\");\n\t\tmode_val = CLS_H_HIFI;\n\t}\n\twcd->hph_mode = mode_val;\n\n\treturn 0;\n}\n\nstatic const struct snd_kcontrol_new wcd9335_snd_controls[] = {\n\t \n\tSOC_SINGLE_S8_TLV(\"RX0 Digital Volume\", WCD9335_CDC_RX0_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX1 Digital Volume\", WCD9335_CDC_RX1_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX2 Digital Volume\", WCD9335_CDC_RX2_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX3 Digital Volume\", WCD9335_CDC_RX3_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX4 Digital Volume\", WCD9335_CDC_RX4_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX5 Digital Volume\", WCD9335_CDC_RX5_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX6 Digital Volume\", WCD9335_CDC_RX6_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX7 Digital Volume\", WCD9335_CDC_RX7_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX8 Digital Volume\", WCD9335_CDC_RX8_RX_VOL_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX0 Mix Digital Volume\", WCD9335_CDC_RX0_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX1 Mix Digital Volume\", WCD9335_CDC_RX1_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX2 Mix Digital Volume\", WCD9335_CDC_RX2_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX3 Mix Digital Volume\", WCD9335_CDC_RX3_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX4 Mix Digital Volume\", WCD9335_CDC_RX4_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX5 Mix Digital Volume\", WCD9335_CDC_RX5_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX6 Mix Digital Volume\", WCD9335_CDC_RX6_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX7 Mix Digital Volume\", WCD9335_CDC_RX7_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"RX8 Mix Digital Volume\", WCD9335_CDC_RX8_RX_VOL_MIX_CTL,\n\t\t\t-84, 40, digital_gain),\n\tSOC_ENUM(\"RX INT0_1 HPF cut off\", cf_int0_1_enum),\n\tSOC_ENUM(\"RX INT0_2 HPF cut off\", cf_int0_2_enum),\n\tSOC_ENUM(\"RX INT1_1 HPF cut off\", cf_int1_1_enum),\n\tSOC_ENUM(\"RX INT1_2 HPF cut off\", cf_int1_2_enum),\n\tSOC_ENUM(\"RX INT2_1 HPF cut off\", cf_int2_1_enum),\n\tSOC_ENUM(\"RX INT2_2 HPF cut off\", cf_int2_2_enum),\n\tSOC_ENUM(\"RX INT3_1 HPF cut off\", cf_int3_1_enum),\n\tSOC_ENUM(\"RX INT3_2 HPF cut off\", cf_int3_2_enum),\n\tSOC_ENUM(\"RX INT4_1 HPF cut off\", cf_int4_1_enum),\n\tSOC_ENUM(\"RX INT4_2 HPF cut off\", cf_int4_2_enum),\n\tSOC_ENUM(\"RX INT5_1 HPF cut off\", cf_int5_1_enum),\n\tSOC_ENUM(\"RX INT5_2 HPF cut off\", cf_int5_2_enum),\n\tSOC_ENUM(\"RX INT6_1 HPF cut off\", cf_int6_1_enum),\n\tSOC_ENUM(\"RX INT6_2 HPF cut off\", cf_int6_2_enum),\n\tSOC_ENUM(\"RX INT7_1 HPF cut off\", cf_int7_1_enum),\n\tSOC_ENUM(\"RX INT7_2 HPF cut off\", cf_int7_2_enum),\n\tSOC_ENUM(\"RX INT8_1 HPF cut off\", cf_int8_1_enum),\n\tSOC_ENUM(\"RX INT8_2 HPF cut off\", cf_int8_2_enum),\n\tSOC_SINGLE_EXT(\"COMP1 Switch\", SND_SOC_NOPM, COMPANDER_1, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP2 Switch\", SND_SOC_NOPM, COMPANDER_2, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP3 Switch\", SND_SOC_NOPM, COMPANDER_3, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP4 Switch\", SND_SOC_NOPM, COMPANDER_4, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP5 Switch\", SND_SOC_NOPM, COMPANDER_5, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP6 Switch\", SND_SOC_NOPM, COMPANDER_6, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP7 Switch\", SND_SOC_NOPM, COMPANDER_7, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_SINGLE_EXT(\"COMP8 Switch\", SND_SOC_NOPM, COMPANDER_8, 1, 0,\n\t\t       wcd9335_get_compander, wcd9335_set_compander),\n\tSOC_ENUM_EXT(\"RX HPH Mode\", rx_hph_mode_mux_enum,\n\t\t       wcd9335_rx_hph_mode_get, wcd9335_rx_hph_mode_put),\n\n\t \n\tSOC_SINGLE_TLV(\"EAR PA Volume\", WCD9335_ANA_EAR, 4, 4, 1,\n\t\tear_pa_gain),\n\tSOC_SINGLE_TLV(\"HPHL Volume\", WCD9335_HPH_L_EN, 0, 20, 1,\n\t\tline_gain),\n\tSOC_SINGLE_TLV(\"HPHR Volume\", WCD9335_HPH_R_EN, 0, 20, 1,\n\t\tline_gain),\n\tSOC_SINGLE_TLV(\"LINEOUT1 Volume\", WCD9335_DIFF_LO_LO1_COMPANDER,\n\t\t\t3, 16, 1, line_gain),\n\tSOC_SINGLE_TLV(\"LINEOUT2 Volume\", WCD9335_DIFF_LO_LO2_COMPANDER,\n\t\t\t3, 16, 1, line_gain),\n\tSOC_SINGLE_TLV(\"LINEOUT3 Volume\", WCD9335_SE_LO_LO3_GAIN, 0, 20, 1,\n\t\t\tline_gain),\n\tSOC_SINGLE_TLV(\"LINEOUT4 Volume\", WCD9335_SE_LO_LO4_GAIN, 0, 20, 1,\n\t\t\tline_gain),\n\n\tSOC_SINGLE_TLV(\"ADC1 Volume\", WCD9335_ANA_AMIC1, 0, 20, 0,\n\t\t\tanalog_gain),\n\tSOC_SINGLE_TLV(\"ADC2 Volume\", WCD9335_ANA_AMIC2, 0, 20, 0,\n\t\t\tanalog_gain),\n\tSOC_SINGLE_TLV(\"ADC3 Volume\", WCD9335_ANA_AMIC3, 0, 20, 0,\n\t\t\tanalog_gain),\n\tSOC_SINGLE_TLV(\"ADC4 Volume\", WCD9335_ANA_AMIC4, 0, 20, 0,\n\t\t\tanalog_gain),\n\tSOC_SINGLE_TLV(\"ADC5 Volume\", WCD9335_ANA_AMIC5, 0, 20, 0,\n\t\t\tanalog_gain),\n\tSOC_SINGLE_TLV(\"ADC6 Volume\", WCD9335_ANA_AMIC6, 0, 20, 0,\n\t\t\tanalog_gain),\n\n\tSOC_ENUM(\"TX0 HPF cut off\", cf_dec0_enum),\n\tSOC_ENUM(\"TX1 HPF cut off\", cf_dec1_enum),\n\tSOC_ENUM(\"TX2 HPF cut off\", cf_dec2_enum),\n\tSOC_ENUM(\"TX3 HPF cut off\", cf_dec3_enum),\n\tSOC_ENUM(\"TX4 HPF cut off\", cf_dec4_enum),\n\tSOC_ENUM(\"TX5 HPF cut off\", cf_dec5_enum),\n\tSOC_ENUM(\"TX6 HPF cut off\", cf_dec6_enum),\n\tSOC_ENUM(\"TX7 HPF cut off\", cf_dec7_enum),\n\tSOC_ENUM(\"TX8 HPF cut off\", cf_dec8_enum),\n};\n\nstatic const struct snd_soc_dapm_route wcd9335_audio_map[] = {\n\t{\"SLIM RX0 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX1 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX2 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX3 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX4 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX5 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX6 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\t{\"SLIM RX7 MUX\", \"AIF1_PB\", \"AIF1 PB\"},\n\n\t{\"SLIM RX0 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX1 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX2 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX3 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX4 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX5 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX6 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\t{\"SLIM RX7 MUX\", \"AIF2_PB\", \"AIF2 PB\"},\n\n\t{\"SLIM RX0 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX1 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX2 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX3 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX4 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX5 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX6 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\t{\"SLIM RX7 MUX\", \"AIF3_PB\", \"AIF3 PB\"},\n\n\t{\"SLIM RX0 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX1 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX2 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX3 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX4 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX5 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX6 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\t{\"SLIM RX7 MUX\", \"AIF4_PB\", \"AIF4 PB\"},\n\n\t{\"SLIM RX0\", NULL, \"SLIM RX0 MUX\"},\n\t{\"SLIM RX1\", NULL, \"SLIM RX1 MUX\"},\n\t{\"SLIM RX2\", NULL, \"SLIM RX2 MUX\"},\n\t{\"SLIM RX3\", NULL, \"SLIM RX3 MUX\"},\n\t{\"SLIM RX4\", NULL, \"SLIM RX4 MUX\"},\n\t{\"SLIM RX5\", NULL, \"SLIM RX5 MUX\"},\n\t{\"SLIM RX6\", NULL, \"SLIM RX6 MUX\"},\n\t{\"SLIM RX7\", NULL, \"SLIM RX7 MUX\"},\n\n\tWCD9335_INTERPOLATOR_PATH(0),\n\tWCD9335_INTERPOLATOR_PATH(1),\n\tWCD9335_INTERPOLATOR_PATH(2),\n\tWCD9335_INTERPOLATOR_PATH(3),\n\tWCD9335_INTERPOLATOR_PATH(4),\n\tWCD9335_INTERPOLATOR_PATH(5),\n\tWCD9335_INTERPOLATOR_PATH(6),\n\tWCD9335_INTERPOLATOR_PATH(7),\n\tWCD9335_INTERPOLATOR_PATH(8),\n\n\t \n\t{\"RX INT0 DEM MUX\", \"CLSH_DSM_OUT\", \"RX INT0 INTERP\"},\n\t{\"RX INT0 DAC\", NULL, \"RX INT0 DEM MUX\"},\n\t{\"RX INT0 DAC\", NULL, \"RX_BIAS\"},\n\t{\"EAR PA\", NULL, \"RX INT0 DAC\"},\n\t{\"EAR\", NULL, \"EAR PA\"},\n\n\t \n\t{\"RX INT1 DEM MUX\", \"CLSH_DSM_OUT\", \"RX INT1 INTERP\"},\n\t{\"RX INT1 DAC\", NULL, \"RX INT1 DEM MUX\"},\n\t{\"RX INT1 DAC\", NULL, \"RX_BIAS\"},\n\t{\"HPHL PA\", NULL, \"RX INT1 DAC\"},\n\t{\"HPHL\", NULL, \"HPHL PA\"},\n\n\t \n\t{\"RX INT2 DEM MUX\", \"CLSH_DSM_OUT\", \"RX INT2 INTERP\"},\n\t{\"RX INT2 DAC\", NULL, \"RX INT2 DEM MUX\"},\n\t{\"RX INT2 DAC\", NULL, \"RX_BIAS\"},\n\t{\"HPHR PA\", NULL, \"RX INT2 DAC\"},\n\t{\"HPHR\", NULL, \"HPHR PA\"},\n\n\t \n\t{\"RX INT3 DAC\", NULL, \"RX INT3 INTERP\"},\n\t{\"RX INT3 DAC\", NULL, \"RX_BIAS\"},\n\t{\"LINEOUT1 PA\", NULL, \"RX INT3 DAC\"},\n\t{\"LINEOUT1\", NULL, \"LINEOUT1 PA\"},\n\n\t \n\t{\"RX INT4 DAC\", NULL, \"RX INT4 INTERP\"},\n\t{\"RX INT4 DAC\", NULL, \"RX_BIAS\"},\n\t{\"LINEOUT2 PA\", NULL, \"RX INT4 DAC\"},\n\t{\"LINEOUT2\", NULL, \"LINEOUT2 PA\"},\n\n\t \n\t{\"RX INT5 DAC\", NULL, \"RX INT5 INTERP\"},\n\t{\"RX INT5 DAC\", NULL, \"RX_BIAS\"},\n\t{\"LINEOUT3 PA\", NULL, \"RX INT5 DAC\"},\n\t{\"LINEOUT3\", NULL, \"LINEOUT3 PA\"},\n\n\t \n\t{\"RX INT6 DAC\", NULL, \"RX INT6 INTERP\"},\n\t{\"RX INT6 DAC\", NULL, \"RX_BIAS\"},\n\t{\"LINEOUT4 PA\", NULL, \"RX INT6 DAC\"},\n\t{\"LINEOUT4\", NULL, \"LINEOUT4 PA\"},\n\n\t \n\t{\"AIF1 CAP\", NULL, \"AIF1_CAP Mixer\"},\n\t{\"AIF2 CAP\", NULL, \"AIF2_CAP Mixer\"},\n\t{\"AIF3 CAP\", NULL, \"AIF3_CAP Mixer\"},\n\n\t \n\tWCD9335_ADC_MUX_PATH(0),\n\tWCD9335_ADC_MUX_PATH(1),\n\tWCD9335_ADC_MUX_PATH(2),\n\tWCD9335_ADC_MUX_PATH(3),\n\tWCD9335_ADC_MUX_PATH(4),\n\tWCD9335_ADC_MUX_PATH(5),\n\tWCD9335_ADC_MUX_PATH(6),\n\tWCD9335_ADC_MUX_PATH(7),\n\tWCD9335_ADC_MUX_PATH(8),\n\n\t \n\t{\"ADC1\", NULL, \"AMIC1\"},\n\t{\"ADC2\", NULL, \"AMIC2\"},\n\t{\"ADC3\", NULL, \"AMIC3\"},\n\t{\"ADC4\", NULL, \"AMIC4\"},\n\t{\"ADC5\", NULL, \"AMIC5\"},\n\t{\"ADC6\", NULL, \"AMIC6\"},\n};\n\nstatic int wcd9335_micbias_control(struct snd_soc_component *component,\n\t\t\t\t   int micb_num, int req, bool is_dapm)\n{\n\tstruct wcd9335_codec *wcd = snd_soc_component_get_drvdata(component);\n\tint micb_index = micb_num - 1;\n\tu16 micb_reg;\n\n\tif ((micb_index < 0) || (micb_index > WCD9335_MAX_MICBIAS - 1)) {\n\t\tdev_err(wcd->dev, \"Invalid micbias index, micb_ind:%d\\n\",\n\t\t\tmicb_index);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (micb_num) {\n\tcase MIC_BIAS_1:\n\t\tmicb_reg = WCD9335_ANA_MICB1;\n\t\tbreak;\n\tcase MIC_BIAS_2:\n\t\tmicb_reg = WCD9335_ANA_MICB2;\n\t\tbreak;\n\tcase MIC_BIAS_3:\n\t\tmicb_reg = WCD9335_ANA_MICB3;\n\t\tbreak;\n\tcase MIC_BIAS_4:\n\t\tmicb_reg = WCD9335_ANA_MICB4;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(component->dev, \"%s: Invalid micbias number: %d\\n\",\n\t\t\t__func__, micb_num);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (req) {\n\tcase MICB_PULLUP_ENABLE:\n\t\twcd->pullup_ref[micb_index]++;\n\t\tif ((wcd->pullup_ref[micb_index] == 1) &&\n\t\t    (wcd->micb_ref[micb_index] == 0))\n\t\t\tsnd_soc_component_update_bits(component, micb_reg,\n\t\t\t\t\t\t\t0xC0, 0x80);\n\t\tbreak;\n\tcase MICB_PULLUP_DISABLE:\n\t\twcd->pullup_ref[micb_index]--;\n\t\tif ((wcd->pullup_ref[micb_index] == 0) &&\n\t\t    (wcd->micb_ref[micb_index] == 0))\n\t\t\tsnd_soc_component_update_bits(component, micb_reg,\n\t\t\t\t\t\t\t0xC0, 0x00);\n\t\tbreak;\n\tcase MICB_ENABLE:\n\t\twcd->micb_ref[micb_index]++;\n\t\tif (wcd->micb_ref[micb_index] == 1)\n\t\t\tsnd_soc_component_update_bits(component, micb_reg,\n\t\t\t\t\t\t\t0xC0, 0x40);\n\t\tbreak;\n\tcase MICB_DISABLE:\n\t\twcd->micb_ref[micb_index]--;\n\t\tif ((wcd->micb_ref[micb_index] == 0) &&\n\t\t    (wcd->pullup_ref[micb_index] > 0))\n\t\t\tsnd_soc_component_update_bits(component, micb_reg,\n\t\t\t\t\t\t\t0xC0, 0x80);\n\t\telse if ((wcd->micb_ref[micb_index] == 0) &&\n\t\t\t (wcd->pullup_ref[micb_index] == 0)) {\n\t\t\tsnd_soc_component_update_bits(component, micb_reg,\n\t\t\t\t\t\t\t0xC0, 0x00);\n\t\t}\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int __wcd9335_codec_enable_micbias(struct snd_soc_dapm_widget *w,\n\t\t\t\t\tint event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tint micb_num;\n\n\tif (strnstr(w->name, \"MIC BIAS1\", sizeof(\"MIC BIAS1\")))\n\t\tmicb_num = MIC_BIAS_1;\n\telse if (strnstr(w->name, \"MIC BIAS2\", sizeof(\"MIC BIAS2\")))\n\t\tmicb_num = MIC_BIAS_2;\n\telse if (strnstr(w->name, \"MIC BIAS3\", sizeof(\"MIC BIAS3\")))\n\t\tmicb_num = MIC_BIAS_3;\n\telse if (strnstr(w->name, \"MIC BIAS4\", sizeof(\"MIC BIAS4\")))\n\t\tmicb_num = MIC_BIAS_4;\n\telse\n\t\treturn -EINVAL;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\t \n\t\twcd9335_micbias_control(comp, micb_num, MICB_ENABLE, true);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\t \n\t\tusleep_range(1000, 1100);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd9335_micbias_control(comp, micb_num, MICB_DISABLE, true);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_micbias(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\treturn __wcd9335_codec_enable_micbias(w, event);\n}\n\nstatic void wcd9335_codec_set_tx_hold(struct snd_soc_component *comp,\n\t\t\t\t      u16 amic_reg, bool set)\n{\n\tu8 mask = 0x20;\n\tu8 val;\n\n\tif (amic_reg == WCD9335_ANA_AMIC1 || amic_reg == WCD9335_ANA_AMIC3 ||\n\t    amic_reg == WCD9335_ANA_AMIC5)\n\t\tmask = 0x40;\n\n\tval = set ? mask : 0x00;\n\n\tswitch (amic_reg) {\n\tcase WCD9335_ANA_AMIC1:\n\tcase WCD9335_ANA_AMIC2:\n\t\tsnd_soc_component_update_bits(comp, WCD9335_ANA_AMIC2, mask,\n\t\t\t\t\t\tval);\n\t\tbreak;\n\tcase WCD9335_ANA_AMIC3:\n\tcase WCD9335_ANA_AMIC4:\n\t\tsnd_soc_component_update_bits(comp, WCD9335_ANA_AMIC4, mask,\n\t\t\t\t\t\tval);\n\t\tbreak;\n\tcase WCD9335_ANA_AMIC5:\n\tcase WCD9335_ANA_AMIC6:\n\t\tsnd_soc_component_update_bits(comp, WCD9335_ANA_AMIC6, mask,\n\t\t\t\t\t\tval);\n\t\tbreak;\n\tdefault:\n\t\tdev_err(comp->dev, \"%s: invalid amic: %d\\n\",\n\t\t\t__func__, amic_reg);\n\t\tbreak;\n\t}\n}\n\nstatic int wcd9335_codec_enable_adc(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\twcd9335_codec_set_tx_hold(comp, w->reg, true);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_find_amic_input(struct snd_soc_component *comp,\n\t\t\t\t\t int adc_mux_n)\n{\n\tint mux_sel, reg, mreg;\n\n\tif (adc_mux_n < 0 || adc_mux_n > WCD9335_MAX_VALID_ADC_MUX ||\n\t    adc_mux_n == WCD9335_INVALID_ADC_MUX)\n\t\treturn 0;\n\n\t \n\tif (adc_mux_n < 4) {\n\t\treg = WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG1 + 2 * adc_mux_n;\n\t\tmreg = WCD9335_CDC_TX_INP_MUX_ADC_MUX0_CFG0 + 2 * adc_mux_n;\n\t\tmux_sel = snd_soc_component_read(comp, reg) & 0x3;\n\t} else {\n\t\treg = WCD9335_CDC_TX_INP_MUX_ADC_MUX4_CFG0 + adc_mux_n - 4;\n\t\tmreg = reg;\n\t\tmux_sel = snd_soc_component_read(comp, reg) >> 6;\n\t}\n\n\tif (mux_sel != WCD9335_CDC_TX_INP_MUX_SEL_AMIC)\n\t\treturn 0;\n\n\treturn snd_soc_component_read(comp, mreg) & 0x07;\n}\n\nstatic u16 wcd9335_codec_get_amic_pwlvl_reg(struct snd_soc_component *comp,\n\t\t\t\t\t    int amic)\n{\n\tu16 pwr_level_reg = 0;\n\n\tswitch (amic) {\n\tcase 1:\n\tcase 2:\n\t\tpwr_level_reg = WCD9335_ANA_AMIC1;\n\t\tbreak;\n\n\tcase 3:\n\tcase 4:\n\t\tpwr_level_reg = WCD9335_ANA_AMIC3;\n\t\tbreak;\n\n\tcase 5:\n\tcase 6:\n\t\tpwr_level_reg = WCD9335_ANA_AMIC5;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(comp->dev, \"invalid amic: %d\\n\", amic);\n\t\tbreak;\n\t}\n\n\treturn pwr_level_reg;\n}\n\nstatic int wcd9335_codec_enable_dec(struct snd_soc_dapm_widget *w,\n\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tunsigned int decimator;\n\tchar *dec_adc_mux_name = NULL;\n\tchar *widget_name = NULL;\n\tchar *wname;\n\tint ret = 0, amic_n;\n\tu16 tx_vol_ctl_reg, pwr_level_reg = 0, dec_cfg_reg, hpf_gate_reg;\n\tu16 tx_gain_ctl_reg;\n\tchar *dec;\n\tu8 hpf_coff_freq;\n\n\twidget_name = kmemdup_nul(w->name, 15, GFP_KERNEL);\n\tif (!widget_name)\n\t\treturn -ENOMEM;\n\n\twname = widget_name;\n\tdec_adc_mux_name = strsep(&widget_name, \" \");\n\tif (!dec_adc_mux_name) {\n\t\tdev_err(comp->dev, \"%s: Invalid decimator = %s\\n\",\n\t\t\t__func__, w->name);\n\t\tret =  -EINVAL;\n\t\tgoto out;\n\t}\n\tdec_adc_mux_name = widget_name;\n\n\tdec = strpbrk(dec_adc_mux_name, \"012345678\");\n\tif (!dec) {\n\t\tdev_err(comp->dev, \"%s: decimator index not found\\n\",\n\t\t\t__func__);\n\t\tret =  -EINVAL;\n\t\tgoto out;\n\t}\n\n\tret = kstrtouint(dec, 10, &decimator);\n\tif (ret < 0) {\n\t\tdev_err(comp->dev, \"%s: Invalid decimator = %s\\n\",\n\t\t\t__func__, wname);\n\t\tret =  -EINVAL;\n\t\tgoto out;\n\t}\n\n\ttx_vol_ctl_reg = WCD9335_CDC_TX0_TX_PATH_CTL + 16 * decimator;\n\thpf_gate_reg = WCD9335_CDC_TX0_TX_PATH_SEC2 + 16 * decimator;\n\tdec_cfg_reg = WCD9335_CDC_TX0_TX_PATH_CFG0 + 16 * decimator;\n\ttx_gain_ctl_reg = WCD9335_CDC_TX0_TX_VOL_CTL + 16 * decimator;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\tamic_n = wcd9335_codec_find_amic_input(comp, decimator);\n\t\tif (amic_n)\n\t\t\tpwr_level_reg = wcd9335_codec_get_amic_pwlvl_reg(comp,\n\t\t\t\t\t\t\t\t       amic_n);\n\n\t\tif (pwr_level_reg) {\n\t\t\tswitch ((snd_soc_component_read(comp, pwr_level_reg) &\n\t\t\t\t\t      WCD9335_AMIC_PWR_LVL_MASK) >>\n\t\t\t\t\t      WCD9335_AMIC_PWR_LVL_SHIFT) {\n\t\t\tcase WCD9335_AMIC_PWR_LEVEL_LP:\n\t\t\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_MASK,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_LP);\n\t\t\t\tbreak;\n\n\t\t\tcase WCD9335_AMIC_PWR_LEVEL_HP:\n\t\t\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_MASK,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_HP);\n\t\t\t\tbreak;\n\t\t\tcase WCD9335_AMIC_PWR_LEVEL_DEFAULT:\n\t\t\tdefault:\n\t\t\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_MASK,\n\t\t\t\t\t\t    WCD9335_DEC_PWR_LVL_DF);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\thpf_coff_freq = (snd_soc_component_read(comp, dec_cfg_reg) &\n\t\t\t\t   TX_HPF_CUT_OFF_FREQ_MASK) >> 5;\n\n\t\tif (hpf_coff_freq != CF_MIN_3DB_150HZ)\n\t\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg,\n\t\t\t\t\t    TX_HPF_CUT_OFF_FREQ_MASK,\n\t\t\t\t\t    CF_MIN_3DB_150HZ << 5);\n\t\t \n\t\tsnd_soc_component_update_bits(comp, tx_vol_ctl_reg,\n\t\t\t\t\t\t0x10, 0x10);\n\t\t \n\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg, 0x08, 0x08);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\tsnd_soc_component_update_bits(comp, hpf_gate_reg, 0x01, 0x00);\n\n\t\tif (decimator == 0) {\n\t\t\tsnd_soc_component_write(comp,\n\t\t\t\t\tWCD9335_MBHC_ZDET_RAMP_CTL, 0x83);\n\t\t\tsnd_soc_component_write(comp,\n\t\t\t\t\tWCD9335_MBHC_ZDET_RAMP_CTL, 0xA3);\n\t\t\tsnd_soc_component_write(comp,\n\t\t\t\t\tWCD9335_MBHC_ZDET_RAMP_CTL, 0x83);\n\t\t\tsnd_soc_component_write(comp,\n\t\t\t\t\tWCD9335_MBHC_ZDET_RAMP_CTL, 0x03);\n\t\t}\n\n\t\tsnd_soc_component_update_bits(comp, hpf_gate_reg,\n\t\t\t\t\t\t0x01, 0x01);\n\t\tsnd_soc_component_update_bits(comp, tx_vol_ctl_reg,\n\t\t\t\t\t\t0x10, 0x00);\n\t\tsnd_soc_component_write(comp, tx_gain_ctl_reg,\n\t\t\t      snd_soc_component_read(comp, tx_gain_ctl_reg));\n\t\tbreak;\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\thpf_coff_freq = (snd_soc_component_read(comp, dec_cfg_reg) &\n\t\t\t\t   TX_HPF_CUT_OFF_FREQ_MASK) >> 5;\n\t\tsnd_soc_component_update_bits(comp, tx_vol_ctl_reg, 0x10, 0x10);\n\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg, 0x08, 0x00);\n\t\tif (hpf_coff_freq != CF_MIN_3DB_150HZ) {\n\t\t\tsnd_soc_component_update_bits(comp, dec_cfg_reg,\n\t\t\t\t\t\t      TX_HPF_CUT_OFF_FREQ_MASK,\n\t\t\t\t\t\t      hpf_coff_freq << 5);\n\t\t}\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\tsnd_soc_component_update_bits(comp, tx_vol_ctl_reg, 0x10, 0x00);\n\t\tbreak;\n\t}\nout:\n\tkfree(wname);\n\treturn ret;\n}\n\nstatic u8 wcd9335_get_dmic_clk_val(struct snd_soc_component *component,\n\t\t\t\t u32 mclk_rate, u32 dmic_clk_rate)\n{\n\tu32 div_factor;\n\tu8 dmic_ctl_val;\n\n\tdev_err(component->dev,\n\t\t\"%s: mclk_rate = %d, dmic_sample_rate = %d\\n\",\n\t\t__func__, mclk_rate, dmic_clk_rate);\n\n\t \n\tif (mclk_rate == WCD9335_MCLK_CLK_9P6MHZ)\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_2;\n\telse\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_3;\n\n\tif (dmic_clk_rate == 0) {\n\t\tdev_err(component->dev,\n\t\t\t\"%s: dmic_sample_rate cannot be 0\\n\",\n\t\t\t__func__);\n\t\tgoto done;\n\t}\n\n\tdiv_factor = mclk_rate / dmic_clk_rate;\n\tswitch (div_factor) {\n\tcase 2:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_2;\n\t\tbreak;\n\tcase 3:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_3;\n\t\tbreak;\n\tcase 4:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_4;\n\t\tbreak;\n\tcase 6:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_6;\n\t\tbreak;\n\tcase 8:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_8;\n\t\tbreak;\n\tcase 16:\n\t\tdmic_ctl_val = WCD9335_DMIC_CLK_DIV_16;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(component->dev,\n\t\t\t\"%s: Invalid div_factor %u, clk_rate(%u), dmic_rate(%u)\\n\",\n\t\t\t__func__, div_factor, mclk_rate, dmic_clk_rate);\n\t\tbreak;\n\t}\n\ndone:\n\treturn dmic_ctl_val;\n}\n\nstatic int wcd9335_codec_enable_dmic(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = snd_soc_component_get_drvdata(comp);\n\tu8  dmic_clk_en = 0x01;\n\tu16 dmic_clk_reg;\n\ts32 *dmic_clk_cnt;\n\tu8 dmic_rate_val, dmic_rate_shift = 1;\n\tunsigned int dmic;\n\tint ret;\n\tchar *wname;\n\n\twname = strpbrk(w->name, \"012345\");\n\tif (!wname) {\n\t\tdev_err(comp->dev, \"%s: widget not found\\n\", __func__);\n\t\treturn -EINVAL;\n\t}\n\n\tret = kstrtouint(wname, 10, &dmic);\n\tif (ret < 0) {\n\t\tdev_err(comp->dev, \"%s: Invalid DMIC line on the codec\\n\",\n\t\t\t__func__);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (dmic) {\n\tcase 0:\n\tcase 1:\n\t\tdmic_clk_cnt = &(wcd->dmic_0_1_clk_cnt);\n\t\tdmic_clk_reg = WCD9335_CPE_SS_DMIC0_CTL;\n\t\tbreak;\n\tcase 2:\n\tcase 3:\n\t\tdmic_clk_cnt = &(wcd->dmic_2_3_clk_cnt);\n\t\tdmic_clk_reg = WCD9335_CPE_SS_DMIC1_CTL;\n\t\tbreak;\n\tcase 4:\n\tcase 5:\n\t\tdmic_clk_cnt = &(wcd->dmic_4_5_clk_cnt);\n\t\tdmic_clk_reg = WCD9335_CPE_SS_DMIC2_CTL;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(comp->dev, \"%s: Invalid DMIC Selection\\n\",\n\t\t\t__func__);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\tdmic_rate_val =\n\t\t\twcd9335_get_dmic_clk_val(comp,\n\t\t\t\t\twcd->mclk_rate,\n\t\t\t\t\twcd->dmic_sample_rate);\n\n\t\t(*dmic_clk_cnt)++;\n\t\tif (*dmic_clk_cnt == 1) {\n\t\t\tsnd_soc_component_update_bits(comp, dmic_clk_reg,\n\t\t\t\t0x07 << dmic_rate_shift,\n\t\t\t\tdmic_rate_val << dmic_rate_shift);\n\t\t\tsnd_soc_component_update_bits(comp, dmic_clk_reg,\n\t\t\t\t\tdmic_clk_en, dmic_clk_en);\n\t\t}\n\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\tdmic_rate_val =\n\t\t\twcd9335_get_dmic_clk_val(comp,\n\t\t\t\t\twcd->mclk_rate,\n\t\t\t\t\twcd->mad_dmic_sample_rate);\n\t\t(*dmic_clk_cnt)--;\n\t\tif (*dmic_clk_cnt  == 0) {\n\t\t\tsnd_soc_component_update_bits(comp, dmic_clk_reg,\n\t\t\t\t\tdmic_clk_en, 0);\n\t\t\tsnd_soc_component_update_bits(comp, dmic_clk_reg,\n\t\t\t\t0x07 << dmic_rate_shift,\n\t\t\t\tdmic_rate_val << dmic_rate_shift);\n\t\t}\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic void wcd9335_codec_enable_int_port(struct wcd_slim_codec_dai_data *dai,\n\t\t\t\t\tstruct snd_soc_component *component)\n{\n\tint port_num = 0;\n\tunsigned short reg = 0;\n\tunsigned int val = 0;\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tstruct wcd9335_slim_ch *ch;\n\n\tlist_for_each_entry(ch, &dai->slim_ch_list, list) {\n\t\tif (ch->port >= WCD9335_RX_START) {\n\t\t\tport_num = ch->port - WCD9335_RX_START;\n\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_EN0 + (port_num / 8);\n\t\t} else {\n\t\t\tport_num = ch->port;\n\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_TX_EN0 + (port_num / 8);\n\t\t}\n\n\t\tregmap_read(wcd->if_regmap, reg, &val);\n\t\tif (!(val & BIT(port_num % 8)))\n\t\t\tregmap_write(wcd->if_regmap, reg,\n\t\t\t\t\tval | BIT(port_num % 8));\n\t}\n}\n\nstatic int wcd9335_codec_enable_slim(struct snd_soc_dapm_widget *w,\n\t\t\t\t       struct snd_kcontrol *kc,\n\t\t\t\t       int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = snd_soc_component_get_drvdata(comp);\n\tstruct wcd_slim_codec_dai_data *dai = &wcd->dai[w->shift];\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\twcd9335_codec_enable_int_port(dai, comp);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\tkfree(dai->sconfig.chs);\n\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_mix_path(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tu16 gain_reg;\n\tint offset_val = 0;\n\tint val = 0;\n\n\tswitch (w->reg) {\n\tcase WCD9335_CDC_RX0_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX0_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX1_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX1_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX2_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX2_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX3_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX3_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX4_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX4_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX5_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX5_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX6_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX6_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX7_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX7_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tcase WCD9335_CDC_RX8_RX_PATH_MIX_CTL:\n\t\tgain_reg = WCD9335_CDC_RX8_RX_VOL_MIX_CTL;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(comp->dev, \"%s: No gain register avail for %s\\n\",\n\t\t\t__func__, w->name);\n\t\treturn 0;\n\t}\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\tval = snd_soc_component_read(comp, gain_reg);\n\t\tval += offset_val;\n\t\tsnd_soc_component_write(comp, gain_reg, val);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic u16 wcd9335_interp_get_primary_reg(u16 reg, u16 *ind)\n{\n\tu16 prim_int_reg = WCD9335_CDC_RX0_RX_PATH_CTL;\n\n\tswitch (reg) {\n\tcase WCD9335_CDC_RX0_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX0_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX0_RX_PATH_CTL;\n\t\t*ind = 0;\n\t\tbreak;\n\tcase WCD9335_CDC_RX1_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX1_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX1_RX_PATH_CTL;\n\t\t*ind = 1;\n\t\tbreak;\n\tcase WCD9335_CDC_RX2_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX2_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX2_RX_PATH_CTL;\n\t\t*ind = 2;\n\t\tbreak;\n\tcase WCD9335_CDC_RX3_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX3_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX3_RX_PATH_CTL;\n\t\t*ind = 3;\n\t\tbreak;\n\tcase WCD9335_CDC_RX4_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX4_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX4_RX_PATH_CTL;\n\t\t*ind = 4;\n\t\tbreak;\n\tcase WCD9335_CDC_RX5_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX5_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX5_RX_PATH_CTL;\n\t\t*ind = 5;\n\t\tbreak;\n\tcase WCD9335_CDC_RX6_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX6_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX6_RX_PATH_CTL;\n\t\t*ind = 6;\n\t\tbreak;\n\tcase WCD9335_CDC_RX7_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX7_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX7_RX_PATH_CTL;\n\t\t*ind = 7;\n\t\tbreak;\n\tcase WCD9335_CDC_RX8_RX_PATH_CTL:\n\tcase WCD9335_CDC_RX8_RX_PATH_MIX_CTL:\n\t\tprim_int_reg = WCD9335_CDC_RX8_RX_PATH_CTL;\n\t\t*ind = 8;\n\t\tbreak;\n\t}\n\n\treturn prim_int_reg;\n}\n\nstatic void wcd9335_codec_hd2_control(struct snd_soc_component *component,\n\t\t\t\t    u16 prim_int_reg, int event)\n{\n\tu16 hd2_scale_reg;\n\tu16 hd2_enable_reg = 0;\n\n\tif (prim_int_reg == WCD9335_CDC_RX1_RX_PATH_CTL) {\n\t\thd2_scale_reg = WCD9335_CDC_RX1_RX_PATH_SEC3;\n\t\thd2_enable_reg = WCD9335_CDC_RX1_RX_PATH_CFG0;\n\t}\n\tif (prim_int_reg == WCD9335_CDC_RX2_RX_PATH_CTL) {\n\t\thd2_scale_reg = WCD9335_CDC_RX2_RX_PATH_SEC3;\n\t\thd2_enable_reg = WCD9335_CDC_RX2_RX_PATH_CFG0;\n\t}\n\n\tif (hd2_enable_reg && SND_SOC_DAPM_EVENT_ON(event)) {\n\t\tsnd_soc_component_update_bits(component, hd2_scale_reg,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_ALPHA_MASK,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_ALPHA_0P2500);\n\t\tsnd_soc_component_update_bits(component, hd2_scale_reg,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_SCALE_MASK,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_SCALE_2);\n\t\tsnd_soc_component_update_bits(component, hd2_enable_reg,\n\t\t\t\tWCD9335_CDC_RX_PATH_CFG_HD2_EN_MASK,\n\t\t\t\tWCD9335_CDC_RX_PATH_CFG_HD2_ENABLE);\n\t}\n\n\tif (hd2_enable_reg && SND_SOC_DAPM_EVENT_OFF(event)) {\n\t\tsnd_soc_component_update_bits(component, hd2_enable_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_HD2_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_HD2_DISABLE);\n\t\tsnd_soc_component_update_bits(component, hd2_scale_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_SCALE_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_SCALE_1);\n\t\tsnd_soc_component_update_bits(component, hd2_scale_reg,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_ALPHA_MASK,\n\t\t\t\tWCD9335_CDC_RX_PATH_SEC_HD2_ALPHA_0P0000);\n\t}\n}\n\nstatic int wcd9335_codec_enable_prim_interpolator(\n\t\t\t\t\t\tstruct snd_soc_component *comp,\n\t\t\t\t\t\tu16 reg, int event)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tu16 ind = 0;\n\tint prim_int_reg = wcd9335_interp_get_primary_reg(reg, &ind);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\twcd->prim_int_users[ind]++;\n\t\tif (wcd->prim_int_users[ind] == 1) {\n\t\t\tsnd_soc_component_update_bits(comp, prim_int_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_ENABLE);\n\t\t\twcd9335_codec_hd2_control(comp, prim_int_reg, event);\n\t\t\tsnd_soc_component_update_bits(comp, prim_int_reg,\n\t\t\t\t\tWCD9335_CDC_RX_CLK_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_CLK_ENABLE);\n\t\t}\n\n\t\tif ((reg != prim_int_reg) &&\n\t\t\t((snd_soc_component_read(comp, prim_int_reg)) &\n\t\t\t WCD9335_CDC_RX_PGA_MUTE_EN_MASK))\n\t\t\tsnd_soc_component_update_bits(comp, reg,\n\t\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_ENABLE);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd->prim_int_users[ind]--;\n\t\tif (wcd->prim_int_users[ind] == 0) {\n\t\t\tsnd_soc_component_update_bits(comp, prim_int_reg,\n\t\t\t\t\tWCD9335_CDC_RX_CLK_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_CLK_DISABLE);\n\t\t\tsnd_soc_component_update_bits(comp, prim_int_reg,\n\t\t\t\t\tWCD9335_CDC_RX_RESET_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_RESET_ENABLE);\n\t\t\tsnd_soc_component_update_bits(comp, prim_int_reg,\n\t\t\t\t\tWCD9335_CDC_RX_RESET_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_RESET_DISABLE);\n\t\t\twcd9335_codec_hd2_control(comp, prim_int_reg, event);\n\t\t}\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_config_compander(struct snd_soc_component *component,\n\t\t\t\t    int interp_n, int event)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tint comp;\n\tu16 comp_ctl0_reg, rx_path_cfg0_reg;\n\n\t \n\tif (!interp_n)\n\t\treturn 0;\n\n\tcomp = interp_n - 1;\n\tif (!wcd->comp_enabled[comp])\n\t\treturn 0;\n\n\tcomp_ctl0_reg = WCD9335_CDC_COMPANDER1_CTL(comp);\n\trx_path_cfg0_reg = WCD9335_CDC_RX1_RX_PATH_CFG(comp);\n\n\tif (SND_SOC_DAPM_EVENT_ON(event)) {\n\t\t \n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_CLK_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_CLK_ENABLE);\n\t\t \n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_ENABLE);\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_MASK,\n\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_DISABLE);\n\t\t \n\t\tsnd_soc_component_update_bits(component, rx_path_cfg0_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_CMP_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_CMP_ENABLE);\n\t}\n\n\tif (SND_SOC_DAPM_EVENT_OFF(event)) {\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_HALT_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_HALT);\n\t\tsnd_soc_component_update_bits(component, rx_path_cfg0_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_CMP_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PATH_CFG_CMP_DISABLE);\n\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_ENABLE);\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_MASK,\n\t\t\t\tWCD9335_CDC_COMPANDER_SOFT_RST_DISABLE);\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_CLK_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_CLK_DISABLE);\n\t\tsnd_soc_component_update_bits(component, comp_ctl0_reg,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_HALT_MASK,\n\t\t\t\t\tWCD9335_CDC_COMPANDER_NOHALT);\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_interpolator(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tu16 gain_reg;\n\tu16 reg;\n\tint val;\n\tint offset_val = 0;\n\n\tif (!(strcmp(w->name, \"RX INT0 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX0_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX0_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT1 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX1_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX1_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT2 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX2_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX2_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT3 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX3_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX3_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT4 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX4_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX4_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT5 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX5_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX5_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT6 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX6_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX6_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT7 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX7_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX7_RX_VOL_CTL;\n\t} else if (!(strcmp(w->name, \"RX INT8 INTERP\"))) {\n\t\treg = WCD9335_CDC_RX8_RX_PATH_CTL;\n\t\tgain_reg = WCD9335_CDC_RX8_RX_VOL_CTL;\n\t} else {\n\t\tdev_err(comp->dev, \"%s: Interpolator reg not found\\n\",\n\t\t\t__func__);\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\t \n\t\twcd9335_codec_enable_prim_interpolator(comp, reg, event);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\twcd9335_config_compander(comp, w->shift, event);\n\t\tval = snd_soc_component_read(comp, gain_reg);\n\t\tval += offset_val;\n\t\tsnd_soc_component_write(comp, gain_reg, val);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd9335_config_compander(comp, w->shift, event);\n\t\twcd9335_codec_enable_prim_interpolator(comp, reg, event);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic void wcd9335_codec_hph_mode_gain_opt(struct snd_soc_component *component,\n\t\t\t\t\t    u8 gain)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tu8 hph_l_en, hph_r_en;\n\tu8 l_val, r_val;\n\tu8 hph_pa_status;\n\tbool is_hphl_pa, is_hphr_pa;\n\n\thph_pa_status = snd_soc_component_read(component, WCD9335_ANA_HPH);\n\tis_hphl_pa = hph_pa_status >> 7;\n\tis_hphr_pa = (hph_pa_status & 0x40) >> 6;\n\n\thph_l_en = snd_soc_component_read(component, WCD9335_HPH_L_EN);\n\thph_r_en = snd_soc_component_read(component, WCD9335_HPH_R_EN);\n\n\tl_val = (hph_l_en & 0xC0) | 0x20 | gain;\n\tr_val = (hph_r_en & 0xC0) | 0x20 | gain;\n\n\t \n\tif ((l_val != hph_l_en) && !is_hphl_pa) {\n\t\tsnd_soc_component_write(component, WCD9335_HPH_L_EN, l_val);\n\t\twcd->hph_l_gain = hph_l_en & 0x1F;\n\t}\n\n\tif ((r_val != hph_r_en) && !is_hphr_pa) {\n\t\tsnd_soc_component_write(component, WCD9335_HPH_R_EN, r_val);\n\t\twcd->hph_r_gain = hph_r_en & 0x1F;\n\t}\n}\n\nstatic void wcd9335_codec_hph_lohifi_config(struct snd_soc_component *comp,\n\t\t\t\t\t  int event)\n{\n\tif (SND_SOC_DAPM_EVENT_ON(event)) {\n\t\tsnd_soc_component_update_bits(comp, WCD9335_RX_BIAS_HPH_PA,\n\t\t\t\t\tWCD9335_RX_BIAS_HPH_PA_AMP_5_UA_MASK,\n\t\t\t\t\t0x06);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_RX_BIAS_HPH_RDACBUFF_CNP2,\n\t\t\t\t\t0xF0, 0x40);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_1000);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_ENABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL1,\n\t\t\t\tWCD9335_HPH_PA_GM3_IB_SCALE_MASK,\n\t\t\t\t0x0C);\n\t\twcd9335_codec_hph_mode_gain_opt(comp, 0x11);\n\t}\n\n\tif (SND_SOC_DAPM_EVENT_OFF(event)) {\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_DISABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_500);\n\t\tsnd_soc_component_write(comp, WCD9335_RX_BIAS_HPH_RDACBUFF_CNP2,\n\t\t\t\t\t0x8A);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_RX_BIAS_HPH_PA,\n\t\t\t\t\tWCD9335_RX_BIAS_HPH_PA_AMP_5_UA_MASK,\n\t\t\t\t\t0x0A);\n\t}\n}\n\nstatic void wcd9335_codec_hph_lp_config(struct snd_soc_component *comp,\n\t\t\t\t      int event)\n{\n\tif (SND_SOC_DAPM_EVENT_ON(event)) {\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL1,\n\t\t\t\tWCD9335_HPH_PA_GM3_IB_SCALE_MASK,\n\t\t\t\t0x0C);\n\t\twcd9335_codec_hph_mode_gain_opt(comp, 0x10);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_1000);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_ENABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_PSRREH_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_PSRREH_ENABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_HPH_PSRR_ENH_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_HPH_PSRR_ENABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_RDAC_LDO_CTL,\n\t\t\t\tWCD9335_HPH_RDAC_N1P65_LD_OUTCTL_MASK,\n\t\t\t\tWCD9335_HPH_RDAC_N1P65_LD_OUTCTL_V_N1P60);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_RDAC_LDO_CTL,\n\t\t\t\tWCD9335_HPH_RDAC_1P65_LD_OUTCTL_MASK,\n\t\t\t\tWCD9335_HPH_RDAC_1P65_LD_OUTCTL_V_N1P60);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\tWCD9335_RX_BIAS_HPH_RDAC_LDO, 0x0F, 0x01);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\tWCD9335_RX_BIAS_HPH_RDAC_LDO, 0xF0, 0x10);\n\t}\n\n\tif (SND_SOC_DAPM_EVENT_OFF(event)) {\n\t\tsnd_soc_component_write(comp, WCD9335_RX_BIAS_HPH_RDAC_LDO,\n\t\t\t\t\t0x88);\n\t\tsnd_soc_component_write(comp, WCD9335_HPH_RDAC_LDO_CTL,\n\t\t\t\t\t0x33);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_HPH_PSRR_ENH_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_HPH_PSRR_DISABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_PSRREH_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_PSRREH_DISABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_DISABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_500);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_R_EN,\n\t\t\t\tWCD9335_HPH_CONST_SEL_L_MASK,\n\t\t\t\tWCD9335_HPH_CONST_SEL_L_HQ_PATH);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_L_EN,\n\t\t\t\tWCD9335_HPH_CONST_SEL_L_MASK,\n\t\t\t\tWCD9335_HPH_CONST_SEL_L_HQ_PATH);\n\t}\n}\n\nstatic void wcd9335_codec_hph_hifi_config(struct snd_soc_component *comp,\n\t\t\t\t\tint event)\n{\n\tif (SND_SOC_DAPM_EVENT_ON(event)) {\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_1000);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_ENABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL1,\n\t\t\t\tWCD9335_HPH_PA_GM3_IB_SCALE_MASK,\n\t\t\t\t0x0C);\n\t\twcd9335_codec_hph_mode_gain_opt(comp, 0x11);\n\t}\n\n\tif (SND_SOC_DAPM_EVENT_OFF(event)) {\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_PA_CTL2,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_MASK,\n\t\t\tWCD9335_HPH_PA_CTL2_FORCE_IQCTRL_DISABLE);\n\t\tsnd_soc_component_update_bits(comp, WCD9335_HPH_CNP_WG_CTL,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_MASK,\n\t\t\t\tWCD9335_HPH_CNP_WG_CTL_CURR_LDIV_RATIO_500);\n\t}\n}\n\nstatic void wcd9335_codec_hph_mode_config(struct snd_soc_component *component,\n\t\t\t\t\t  int event, int mode)\n{\n\tswitch (mode) {\n\tcase CLS_H_LP:\n\t\twcd9335_codec_hph_lp_config(component, event);\n\t\tbreak;\n\tcase CLS_H_LOHIFI:\n\t\twcd9335_codec_hph_lohifi_config(component, event);\n\t\tbreak;\n\tcase CLS_H_HIFI:\n\t\twcd9335_codec_hph_hifi_config(component, event);\n\t\tbreak;\n\t}\n}\n\nstatic int wcd9335_codec_hphl_dac_event(struct snd_soc_dapm_widget *w,\n\t\t\t\t\tstruct snd_kcontrol *kc,\n\t\t\t\t\tint event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tint hph_mode = wcd->hph_mode;\n\tu8 dem_inp;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\t \n\t\tdem_inp = snd_soc_component_read(comp,\n\t\t\t\tWCD9335_CDC_RX1_RX_PATH_SEC0) & 0x03;\n\t\tif (((hph_mode == CLS_H_HIFI) || (hph_mode == CLS_H_LOHIFI) ||\n\t\t\t\t(hph_mode == CLS_H_LP)) && (dem_inp != 0x01)) {\n\t\t\tdev_err(comp->dev, \"Incorrect DEM Input\\n\");\n\t\t\treturn -EINVAL;\n\t\t}\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_PRE_DAC,\n\t\t\t\t\tWCD_CLSH_STATE_HPHL,\n\t\t\t\t\t((hph_mode == CLS_H_LOHIFI) ?\n\t\t\t\t\t CLS_H_HIFI : hph_mode));\n\n\t\twcd9335_codec_hph_mode_config(comp, event, hph_mode);\n\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\tusleep_range(1000, 1100);\n\t\tbreak;\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(1000, 1100);\n\n\t\tif (!(wcd_clsh_ctrl_get_state(wcd->clsh_ctrl) &\n\t\t\t\tWCD_CLSH_STATE_HPHR))\n\t\t\twcd9335_codec_hph_mode_config(comp, event, hph_mode);\n\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_POST_PA,\n\t\t\t\tWCD_CLSH_STATE_HPHL,\n\t\t\t\t((hph_mode == CLS_H_LOHIFI) ?\n\t\t\t\t CLS_H_HIFI : hph_mode));\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_lineout_dac_event(struct snd_soc_dapm_widget *w,\n\t\t\t\t\t   struct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_PRE_DAC,\n\t\t\t\t\tWCD_CLSH_STATE_LO, CLS_AB);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_POST_PA,\n\t\t\t\t\tWCD_CLSH_STATE_LO, CLS_AB);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_ear_dac_event(struct snd_soc_dapm_widget *w,\n\t\t\t\t       struct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_PRE_DAC,\n\t\t\t\t\tWCD_CLSH_STATE_EAR, CLS_H_NORMAL);\n\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_POST_PA,\n\t\t\t\t\tWCD_CLSH_STATE_EAR, CLS_H_NORMAL);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic void wcd9335_codec_hph_post_pa_config(struct wcd9335_codec *wcd,\n\t\t\t\t\t     int mode, int event)\n{\n\tu8 scale_val = 0;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\tswitch (mode) {\n\t\tcase CLS_H_HIFI:\n\t\t\tscale_val = 0x3;\n\t\t\tbreak;\n\t\tcase CLS_H_LOHIFI:\n\t\t\tscale_val = 0x1;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\tscale_val = 0x6;\n\t\tbreak;\n\t}\n\n\tif (scale_val)\n\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\tWCD9335_HPH_PA_CTL1,\n\t\t\t\t\tWCD9335_HPH_PA_GM3_IB_SCALE_MASK,\n\t\t\t\t\tscale_val << 1);\n\tif (SND_SOC_DAPM_EVENT_ON(event)) {\n\t\tif (wcd->comp_enabled[COMPANDER_1] ||\n\t\t    wcd->comp_enabled[COMPANDER_2]) {\n\t\t\t \n\t\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\tWCD9335_HPH_L_EN,\n\t\t\t\t\tWCD9335_HPH_GAIN_SRC_SEL_MASK,\n\t\t\t\t\tWCD9335_HPH_GAIN_SRC_SEL_COMPANDER);\n\t\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\tWCD9335_HPH_R_EN,\n\t\t\t\t\tWCD9335_HPH_GAIN_SRC_SEL_MASK,\n\t\t\t\t\tWCD9335_HPH_GAIN_SRC_SEL_COMPANDER);\n\t\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\tWCD9335_HPH_AUTO_CHOP,\n\t\t\t\t\tWCD9335_HPH_AUTO_CHOP_MASK,\n\t\t\t\t\tWCD9335_HPH_AUTO_CHOP_FORCE_ENABLE);\n\t\t}\n\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\t\tWCD9335_HPH_L_EN,\n\t\t\t\t\t\tWCD9335_HPH_PA_GAIN_MASK,\n\t\t\t\t\t\twcd->hph_l_gain);\n\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\t\t\tWCD9335_HPH_R_EN,\n\t\t\t\t\t\tWCD9335_HPH_PA_GAIN_MASK,\n\t\t\t\t\t\twcd->hph_r_gain);\n\t}\n\n\tif (SND_SOC_DAPM_EVENT_OFF(event))\n\t\tsnd_soc_component_update_bits(wcd->component,\n\t\t\t\tWCD9335_HPH_AUTO_CHOP,\n\t\t\t\tWCD9335_HPH_AUTO_CHOP_MASK,\n\t\t\t\tWCD9335_HPH_AUTO_CHOP_ENABLE_BY_CMPDR_GAIN);\n}\n\nstatic int wcd9335_codec_hphr_dac_event(struct snd_soc_dapm_widget *w,\n\t\t\t\t      struct snd_kcontrol *kc,\n\t\t\t\t      int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tint hph_mode = wcd->hph_mode;\n\tu8 dem_inp;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\n\t\t \n\t\tdem_inp = snd_soc_component_read(comp,\n\t\t\t\tWCD9335_CDC_RX2_RX_PATH_SEC0) &\n\t\t\t\tWCD9335_CDC_RX_PATH_DEM_INP_SEL_MASK;\n\t\tif (((hph_mode == CLS_H_HIFI) || (hph_mode == CLS_H_LOHIFI) ||\n\t\t     (hph_mode == CLS_H_LP)) && (dem_inp != 0x01)) {\n\t\t\tdev_err(comp->dev, \"DEM Input not set correctly, hph_mode: %d\\n\",\n\t\t\t\thph_mode);\n\t\t\treturn -EINVAL;\n\t\t}\n\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl,\n\t\t\t     WCD_CLSH_EVENT_PRE_DAC,\n\t\t\t     WCD_CLSH_STATE_HPHR,\n\t\t\t     ((hph_mode == CLS_H_LOHIFI) ?\n\t\t\t       CLS_H_HIFI : hph_mode));\n\n\t\twcd9335_codec_hph_mode_config(comp, event, hph_mode);\n\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(1000, 1100);\n\n\t\tif (!(wcd_clsh_ctrl_get_state(wcd->clsh_ctrl) &\n\t\t\t\t\tWCD_CLSH_STATE_HPHL))\n\t\t\twcd9335_codec_hph_mode_config(comp, event, hph_mode);\n\n\t\twcd_clsh_ctrl_set_state(wcd->clsh_ctrl, WCD_CLSH_EVENT_POST_PA,\n\t\t\t     WCD_CLSH_STATE_HPHR, ((hph_mode == CLS_H_LOHIFI) ?\n\t\t\t\t\t\tCLS_H_HIFI : hph_mode));\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_hphl_pa(struct snd_soc_dapm_widget *w,\n\t\t\t\t      struct snd_kcontrol *kc,\n\t\t\t\t      int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tint hph_mode = wcd->hph_mode;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\t \n\t\tusleep_range(7000, 7100);\n\n\t\twcd9335_codec_hph_post_pa_config(wcd, hph_mode, event);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_RX1_RX_PATH_CTL,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\n\t\t \n\t\tif ((snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CDC_RX1_RX_PATH_MIX_CTL)) &\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK)\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\t    WCD9335_CDC_RX1_RX_PATH_MIX_CTL,\n\t\t\t\t\t    WCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\t    WCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\n\t\tbreak;\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\twcd9335_codec_hph_post_pa_config(wcd, hph_mode, event);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(5000, 5500);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_lineout_pa(struct snd_soc_dapm_widget *w,\n\t\t\t\t\t struct snd_kcontrol *kc,\n\t\t\t\t\t int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tint vol_reg = 0, mix_vol_reg = 0;\n\n\tif (w->reg == WCD9335_ANA_LO_1_2) {\n\t\tif (w->shift == 7) {\n\t\t\tvol_reg = WCD9335_CDC_RX3_RX_PATH_CTL;\n\t\t\tmix_vol_reg = WCD9335_CDC_RX3_RX_PATH_MIX_CTL;\n\t\t} else if (w->shift == 6) {\n\t\t\tvol_reg = WCD9335_CDC_RX4_RX_PATH_CTL;\n\t\t\tmix_vol_reg = WCD9335_CDC_RX4_RX_PATH_MIX_CTL;\n\t\t}\n\t} else if (w->reg == WCD9335_ANA_LO_3_4) {\n\t\tif (w->shift == 7) {\n\t\t\tvol_reg = WCD9335_CDC_RX5_RX_PATH_CTL;\n\t\t\tmix_vol_reg = WCD9335_CDC_RX5_RX_PATH_MIX_CTL;\n\t\t} else if (w->shift == 6) {\n\t\t\tvol_reg = WCD9335_CDC_RX6_RX_PATH_CTL;\n\t\t\tmix_vol_reg = WCD9335_CDC_RX6_RX_PATH_MIX_CTL;\n\t\t}\n\t} else {\n\t\tdev_err(comp->dev, \"Error enabling lineout PA\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\t \n\t\tusleep_range(5000, 5500);\n\t\tsnd_soc_component_update_bits(comp, vol_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\n\t\t \n\t\tif ((snd_soc_component_read(comp, mix_vol_reg)) &\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK)\n\t\t\tsnd_soc_component_update_bits(comp,  mix_vol_reg,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(5000, 5500);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic void wcd9335_codec_init_flyback(struct snd_soc_component *component)\n{\n\tsnd_soc_component_update_bits(component, WCD9335_HPH_L_EN,\n\t\t\t\t\tWCD9335_HPH_CONST_SEL_L_MASK,\n\t\t\t\t\tWCD9335_HPH_CONST_SEL_L_BYPASS);\n\tsnd_soc_component_update_bits(component, WCD9335_HPH_R_EN,\n\t\t\t\t\tWCD9335_HPH_CONST_SEL_L_MASK,\n\t\t\t\t\tWCD9335_HPH_CONST_SEL_L_BYPASS);\n\tsnd_soc_component_update_bits(component, WCD9335_RX_BIAS_FLYB_BUFF,\n\t\t\t\t\tWCD9335_RX_BIAS_FLYB_VPOS_5_UA_MASK,\n\t\t\t\t\tWCD9335_RX_BIAS_FLYB_I_0P0_UA);\n\tsnd_soc_component_update_bits(component, WCD9335_RX_BIAS_FLYB_BUFF,\n\t\t\t\t\tWCD9335_RX_BIAS_FLYB_VNEG_5_UA_MASK,\n\t\t\t\t\tWCD9335_RX_BIAS_FLYB_I_0P0_UA);\n}\n\nstatic int wcd9335_codec_enable_rx_bias(struct snd_soc_dapm_widget *w,\n\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\twcd->rx_bias_count++;\n\t\tif (wcd->rx_bias_count == 1) {\n\t\t\twcd9335_codec_init_flyback(comp);\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\t\tWCD9335_ANA_RX_SUPPLIES,\n\t\t\t\t\t\tWCD9335_ANA_RX_BIAS_ENABLE_MASK,\n\t\t\t\t\t\tWCD9335_ANA_RX_BIAS_ENABLE);\n\t\t}\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\twcd->rx_bias_count--;\n\t\tif (!wcd->rx_bias_count)\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_ANA_RX_SUPPLIES,\n\t\t\t\t\tWCD9335_ANA_RX_BIAS_ENABLE_MASK,\n\t\t\t\t\tWCD9335_ANA_RX_BIAS_DISABLE);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_hphr_pa(struct snd_soc_dapm_widget *w,\n\t\t\t\t\tstruct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\tint hph_mode = wcd->hph_mode;\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\t \n\t\tusleep_range(7000, 7100);\n\t\twcd9335_codec_hph_post_pa_config(wcd, hph_mode, event);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_RX2_RX_PATH_CTL,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\t\t \n\t\tif ((snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CDC_RX2_RX_PATH_MIX_CTL)) &\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK)\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_RX2_RX_PATH_MIX_CTL,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\n\t\tbreak;\n\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\twcd9335_codec_hph_post_pa_config(wcd, hph_mode, event);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(5000, 5500);\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_ear_pa(struct snd_soc_dapm_widget *w,\n\t\t\t\t       struct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\t \n\t\tusleep_range(5000, 5500);\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_RX0_RX_PATH_CTL,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\t\t \n\t\tif ((snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CDC_RX0_RX_PATH_MIX_CTL)) &\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK)\n\t\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\t\tWCD9335_CDC_RX0_RX_PATH_MIX_CTL,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_EN_MASK,\n\t\t\t\t\tWCD9335_CDC_RX_PGA_MUTE_DISABLE);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\t \n\t\tusleep_range(5000, 5500);\n\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic irqreturn_t wcd9335_slimbus_irq(int irq, void *data)\n{\n\tstruct wcd9335_codec *wcd = data;\n\tunsigned long status = 0;\n\tint i, j, port_id;\n\tunsigned int val, int_val = 0;\n\tirqreturn_t ret = IRQ_NONE;\n\tbool tx;\n\tunsigned short reg = 0;\n\n\tfor (i = WCD9335_SLIM_PGD_PORT_INT_STATUS_RX_0, j = 0;\n\t     i <= WCD9335_SLIM_PGD_PORT_INT_STATUS_TX_1; i++, j++) {\n\t\tregmap_read(wcd->if_regmap, i, &val);\n\t\tstatus |= ((u32)val << (8 * j));\n\t}\n\n\tfor_each_set_bit(j, &status, 32) {\n\t\ttx = (j >= 16);\n\t\tport_id = (tx ? j - 16 : j);\n\t\tregmap_read(wcd->if_regmap,\n\t\t\t\tWCD9335_SLIM_PGD_PORT_INT_RX_SOURCE0 + j, &val);\n\t\tif (val) {\n\t\t\tif (!tx)\n\t\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_EN0 +\n\t\t\t\t\t(port_id / 8);\n\t\t\telse\n\t\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_TX_EN0 +\n\t\t\t\t\t(port_id / 8);\n\t\t\tregmap_read(\n\t\t\t\twcd->if_regmap, reg, &int_val);\n\t\t\t \n\t\t\tif (!(int_val & (1 << (port_id % 8))))\n\t\t\t\tcontinue;\n\t\t}\n\n\t\tif (val & WCD9335_SLIM_IRQ_OVERFLOW)\n\t\t\tdev_err_ratelimited(wcd->dev,\n\t\t\t   \"%s: overflow error on %s port %d, value %x\\n\",\n\t\t\t   __func__, (tx ? \"TX\" : \"RX\"), port_id, val);\n\n\t\tif (val & WCD9335_SLIM_IRQ_UNDERFLOW)\n\t\t\tdev_err_ratelimited(wcd->dev,\n\t\t\t   \"%s: underflow error on %s port %d, value %x\\n\",\n\t\t\t   __func__, (tx ? \"TX\" : \"RX\"), port_id, val);\n\n\t\tif ((val & WCD9335_SLIM_IRQ_OVERFLOW) ||\n\t\t\t(val & WCD9335_SLIM_IRQ_UNDERFLOW)) {\n\t\t\tif (!tx)\n\t\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_EN0 +\n\t\t\t\t\t(port_id / 8);\n\t\t\telse\n\t\t\t\treg = WCD9335_SLIM_PGD_PORT_INT_TX_EN0 +\n\t\t\t\t\t(port_id / 8);\n\t\t\tregmap_read(\n\t\t\t\twcd->if_regmap, reg, &int_val);\n\t\t\tif (int_val & (1 << (port_id % 8))) {\n\t\t\t\tint_val = int_val ^ (1 << (port_id % 8));\n\t\t\t\tregmap_write(wcd->if_regmap,\n\t\t\t\t\treg, int_val);\n\t\t\t}\n\t\t}\n\n\t\tregmap_write(wcd->if_regmap,\n\t\t\t\tWCD9335_SLIM_PGD_PORT_INT_CLR_RX_0 + (j / 8),\n\t\t\t\tBIT(j % 8));\n\t\tret = IRQ_HANDLED;\n\t}\n\n\treturn ret;\n}\n\nstatic struct wcd9335_irq wcd9335_irqs[] = {\n\t{\n\t\t.irq = WCD9335_IRQ_SLIMBUS,\n\t\t.handler = wcd9335_slimbus_irq,\n\t\t.name = \"SLIM Slave\",\n\t},\n};\n\nstatic int wcd9335_setup_irqs(struct wcd9335_codec *wcd)\n{\n\tint irq, ret, i;\n\n\tfor (i = 0; i < ARRAY_SIZE(wcd9335_irqs); i++) {\n\t\tirq = regmap_irq_get_virq(wcd->irq_data, wcd9335_irqs[i].irq);\n\t\tif (irq < 0) {\n\t\t\tdev_err(wcd->dev, \"Failed to get %s\\n\",\n\t\t\t\t\twcd9335_irqs[i].name);\n\t\t\treturn irq;\n\t\t}\n\n\t\tret = devm_request_threaded_irq(wcd->dev, irq, NULL,\n\t\t\t\t\t\twcd9335_irqs[i].handler,\n\t\t\t\t\t\tIRQF_TRIGGER_RISING |\n\t\t\t\t\t\tIRQF_ONESHOT,\n\t\t\t\t\t\twcd9335_irqs[i].name, wcd);\n\t\tif (ret) {\n\t\t\tdev_err(wcd->dev, \"Failed to request %s\\n\",\n\t\t\t\t\twcd9335_irqs[i].name);\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\t \n\tfor (i = 0; i < WCD9335_SLIM_NUM_PORT_REG; i++)\n\t\tregmap_write(wcd->if_regmap, WCD9335_SLIM_PGD_PORT_INT_EN0 + i,\n\t\t\t     0xFF);\n\n\treturn ret;\n}\n\nstatic void wcd9335_teardown_irqs(struct wcd9335_codec *wcd)\n{\n\tint i;\n\n\t \n\tfor (i = 0; i < WCD9335_SLIM_NUM_PORT_REG; i++)\n\t\tregmap_write(wcd->if_regmap, WCD9335_SLIM_PGD_PORT_INT_EN0 + i,\n\t\t\t     0x00);\n}\n\nstatic void wcd9335_cdc_sido_ccl_enable(struct wcd9335_codec *wcd,\n\t\t\t\t\tbool ccl_flag)\n{\n\tstruct snd_soc_component *comp = wcd->component;\n\n\tif (ccl_flag) {\n\t\tif (++wcd->sido_ccl_cnt == 1)\n\t\t\tsnd_soc_component_write(comp, WCD9335_SIDO_SIDO_CCL_10,\n\t\t\t\t\tWCD9335_SIDO_SIDO_CCL_DEF_VALUE);\n\t} else {\n\t\tif (wcd->sido_ccl_cnt == 0) {\n\t\t\tdev_err(wcd->dev, \"sido_ccl already disabled\\n\");\n\t\t\treturn;\n\t\t}\n\t\tif (--wcd->sido_ccl_cnt == 0)\n\t\t\tsnd_soc_component_write(comp, WCD9335_SIDO_SIDO_CCL_10,\n\t\t\t\tWCD9335_SIDO_SIDO_CCL_10_ICHARG_PWR_SEL_C320FF);\n\t}\n}\n\nstatic int wcd9335_enable_master_bias(struct wcd9335_codec *wcd)\n{\n\twcd->master_bias_users++;\n\tif (wcd->master_bias_users == 1) {\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\t\tWCD9335_ANA_BIAS_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_BIAS_ENABLE);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_ENABLE);\n\t\t \n\t\tusleep_range(1000, 1100);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_DISABLE);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_CTL_MODE,\n\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_CTL_MODE_MANUAL);\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_enable_mclk(struct wcd9335_codec *wcd)\n{\n\t \n\tif (wcd->master_bias_users <= 0)\n\t\treturn -EINVAL;\n\n\tif (((wcd->clk_mclk_users == 0) && (wcd->clk_type == WCD_CLK_MCLK)) ||\n\t    ((wcd->clk_mclk_users > 0) && (wcd->clk_type != WCD_CLK_MCLK))) {\n\t\tdev_err(wcd->dev, \"Error enabling MCLK, clk_type: %d\\n\",\n\t\t\twcd->clk_type);\n\t\treturn -EINVAL;\n\t}\n\n\tif (++wcd->clk_mclk_users == 1) {\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_EXT_CLKBUF_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_EXT_CLKBUF_ENABLE);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_SRC_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_SRC_EXTERNAL);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_ENABLE);\n\t\tregmap_update_bits(wcd->regmap,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_FS_CNT_CONTROL,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_FS_CNT_EN_MASK,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_FS_CNT_ENABLE);\n\t\tregmap_update_bits(wcd->regmap,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_MCLK_CONTROL,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_MCLK_EN_MASK,\n\t\t\t\t   WCD9335_CDC_CLK_RST_CTRL_MCLK_ENABLE);\n\t\t \n\t\tusleep_range(10, 15);\n\t}\n\n\twcd->clk_type = WCD_CLK_MCLK;\n\n\treturn 0;\n}\n\nstatic int wcd9335_disable_mclk(struct wcd9335_codec *wcd)\n{\n\tif (wcd->clk_mclk_users <= 0)\n\t\treturn -EINVAL;\n\n\tif (--wcd->clk_mclk_users == 0) {\n\t\tif (wcd->clk_rco_users > 0) {\n\t\t\t \n\t\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_SRC_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_SRC_RCO);\n\t\t\twcd->clk_type = WCD_CLK_RCO;\n\t\t} else {\n\t\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_MCLK_DISABLE);\n\t\t\twcd->clk_type = WCD_CLK_OFF;\n\t\t}\n\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_CLK_TOP,\n\t\t\t\t\tWCD9335_ANA_CLK_EXT_CLKBUF_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_CLK_EXT_CLKBUF_DISABLE);\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_disable_master_bias(struct wcd9335_codec *wcd)\n{\n\tif (wcd->master_bias_users <= 0)\n\t\treturn -EINVAL;\n\n\twcd->master_bias_users--;\n\tif (wcd->master_bias_users == 0) {\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\tWCD9335_ANA_BIAS_EN_MASK,\n\t\t\t\tWCD9335_ANA_BIAS_DISABLE);\n\t\tregmap_update_bits(wcd->regmap, WCD9335_ANA_BIAS,\n\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_CTL_MODE,\n\t\t\t\tWCD9335_ANA_BIAS_PRECHRG_CTL_MODE_MANUAL);\n\t}\n\treturn 0;\n}\n\nstatic int wcd9335_cdc_req_mclk_enable(struct wcd9335_codec *wcd,\n\t\t\t\t     bool enable)\n{\n\tint ret = 0;\n\n\tif (enable) {\n\t\twcd9335_cdc_sido_ccl_enable(wcd, true);\n\t\tret = clk_prepare_enable(wcd->mclk);\n\t\tif (ret) {\n\t\t\tdev_err(wcd->dev, \"%s: ext clk enable failed\\n\",\n\t\t\t\t__func__);\n\t\t\tgoto err;\n\t\t}\n\t\t \n\t\twcd9335_enable_master_bias(wcd);\n\t\t \n\t\twcd9335_enable_mclk(wcd);\n\n\t} else {\n\t\t \n\t\twcd9335_disable_mclk(wcd);\n\t\t \n\t\twcd9335_disable_master_bias(wcd);\n\t\tclk_disable_unprepare(wcd->mclk);\n\t\twcd9335_cdc_sido_ccl_enable(wcd, false);\n\t}\nerr:\n\treturn ret;\n}\n\nstatic void wcd9335_codec_apply_sido_voltage(struct wcd9335_codec *wcd,\n\t\t\t\t\t     enum wcd9335_sido_voltage req_mv)\n{\n\tstruct snd_soc_component *comp = wcd->component;\n\tint vout_d_val;\n\n\tif (req_mv == wcd->sido_voltage)\n\t\treturn;\n\n\t \n\tvout_d_val = WCD9335_CALCULATE_VOUT_D(req_mv) &\n\t\t\tWCD9335_ANA_BUCK_VOUT_MASK;\n\tsnd_soc_component_write(comp, WCD9335_ANA_BUCK_VOUT_D, vout_d_val);\n\tsnd_soc_component_update_bits(comp, WCD9335_ANA_BUCK_CTL,\n\t\t\t\tWCD9335_ANA_BUCK_CTL_RAMP_START_MASK,\n\t\t\t\tWCD9335_ANA_BUCK_CTL_RAMP_START_ENABLE);\n\n\t \n\tusleep_range(1000, 1100);\n\twcd->sido_voltage = req_mv;\n\tsnd_soc_component_update_bits(comp, WCD9335_ANA_BUCK_CTL,\n\t\t\t\tWCD9335_ANA_BUCK_CTL_RAMP_START_MASK,\n\t\t\t\tWCD9335_ANA_BUCK_CTL_RAMP_START_DISABLE);\n}\n\nstatic int wcd9335_codec_update_sido_voltage(struct wcd9335_codec *wcd,\n\t\t\t\t\t     enum wcd9335_sido_voltage req_mv)\n{\n\tint ret = 0;\n\n\t \n\tret = wcd9335_cdc_req_mclk_enable(wcd, true);\n\tif (ret) {\n\t\tdev_err(wcd->dev, \"Ext clk enable failed\\n\");\n\t\tgoto err;\n\t}\n\n\twcd9335_codec_apply_sido_voltage(wcd, req_mv);\n\twcd9335_cdc_req_mclk_enable(wcd, false);\n\nerr:\n\treturn ret;\n}\n\nstatic int _wcd9335_codec_enable_mclk(struct snd_soc_component *component,\n\t\t\t\t      int enable)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tint ret;\n\n\tif (enable) {\n\t\tret = wcd9335_cdc_req_mclk_enable(wcd, true);\n\t\tif (ret)\n\t\t\treturn ret;\n\n\t\twcd9335_codec_apply_sido_voltage(wcd,\n\t\t\t\tSIDO_VOLTAGE_NOMINAL_MV);\n\t} else {\n\t\twcd9335_codec_update_sido_voltage(wcd,\n\t\t\t\t\twcd->sido_voltage);\n\t\twcd9335_cdc_req_mclk_enable(wcd, false);\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_codec_enable_mclk(struct snd_soc_dapm_widget *w,\n\t\t\t\t     struct snd_kcontrol *kc, int event)\n{\n\tstruct snd_soc_component *comp = snd_soc_dapm_to_component(w->dapm);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\treturn _wcd9335_codec_enable_mclk(comp, true);\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\treturn _wcd9335_codec_enable_mclk(comp, false);\n\t}\n\n\treturn 0;\n}\n\nstatic const struct snd_soc_dapm_widget wcd9335_dapm_widgets[] = {\n\t \n\tSND_SOC_DAPM_OUTPUT(\"EAR\"),\n\tSND_SOC_DAPM_OUTPUT(\"HPHL\"),\n\tSND_SOC_DAPM_OUTPUT(\"HPHR\"),\n\tSND_SOC_DAPM_OUTPUT(\"LINEOUT1\"),\n\tSND_SOC_DAPM_OUTPUT(\"LINEOUT2\"),\n\tSND_SOC_DAPM_OUTPUT(\"LINEOUT3\"),\n\tSND_SOC_DAPM_OUTPUT(\"LINEOUT4\"),\n\tSND_SOC_DAPM_AIF_IN_E(\"AIF1 PB\", \"AIF1 Playback\", 0, SND_SOC_NOPM,\n\t\t\t\tAIF1_PB, 0, wcd9335_codec_enable_slim,\n\t\t\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_AIF_IN_E(\"AIF2 PB\", \"AIF2 Playback\", 0, SND_SOC_NOPM,\n\t\t\t\tAIF2_PB, 0, wcd9335_codec_enable_slim,\n\t\t\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_AIF_IN_E(\"AIF3 PB\", \"AIF3 Playback\", 0, SND_SOC_NOPM,\n\t\t\t\tAIF3_PB, 0, wcd9335_codec_enable_slim,\n\t\t\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_AIF_IN_E(\"AIF4 PB\", \"AIF4 Playback\", 0, SND_SOC_NOPM,\n\t\t\t\tAIF4_PB, 0, wcd9335_codec_enable_slim,\n\t\t\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX(\"SLIM RX0 MUX\", SND_SOC_NOPM, WCD9335_RX0, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX0]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX1 MUX\", SND_SOC_NOPM, WCD9335_RX1, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX1]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX2 MUX\", SND_SOC_NOPM, WCD9335_RX2, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX2]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX3 MUX\", SND_SOC_NOPM, WCD9335_RX3, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX3]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX4 MUX\", SND_SOC_NOPM, WCD9335_RX4, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX4]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX5 MUX\", SND_SOC_NOPM, WCD9335_RX5, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX5]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX6 MUX\", SND_SOC_NOPM, WCD9335_RX6, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX6]),\n\tSND_SOC_DAPM_MUX(\"SLIM RX7 MUX\", SND_SOC_NOPM, WCD9335_RX7, 0,\n\t\t\t\t&slim_rx_mux[WCD9335_RX7]),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX0\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX3\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX4\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX5\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX6\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"SLIM RX7\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MUX_E(\"RX INT0_2 MUX\", WCD9335_CDC_RX0_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int0_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT1_2 MUX\", WCD9335_CDC_RX1_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int1_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT2_2 MUX\", WCD9335_CDC_RX2_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int2_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT3_2 MUX\", WCD9335_CDC_RX3_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int3_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT4_2 MUX\", WCD9335_CDC_RX4_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int4_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT5_2 MUX\", WCD9335_CDC_RX5_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int5_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT6_2 MUX\", WCD9335_CDC_RX6_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int6_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT7_2 MUX\", WCD9335_CDC_RX7_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int7_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX_E(\"RX INT8_2 MUX\", WCD9335_CDC_RX8_RX_PATH_MIX_CTL,\n\t\t\t5, 0, &rx_int8_2_mux, wcd9335_codec_enable_mix_path,\n\t\t\tSND_SOC_DAPM_POST_PMU),\n\tSND_SOC_DAPM_MUX(\"RX INT0_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int0_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT0_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int0_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT0_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int0_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT1_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int1_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT1_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int1_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT1_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int1_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT2_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int2_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT2_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int2_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT2_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int2_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT3_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int3_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT3_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int3_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT3_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int3_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT4_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int4_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT4_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int4_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT4_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int4_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT5_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int5_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT5_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int5_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT5_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int5_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT6_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int6_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT6_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int6_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT6_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int6_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT7_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int7_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT7_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int7_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT7_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int7_1_mix_inp2_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT8_1 MIX1 INP0\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int8_1_mix_inp0_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT8_1 MIX1 INP1\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int8_1_mix_inp1_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT8_1 MIX1 INP2\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int8_1_mix_inp2_mux),\n\n\tSND_SOC_DAPM_MIXER(\"RX INT0_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT0 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT1_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT1 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT2_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT2 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT3_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT3 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT4_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT4 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT5_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT5 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT6_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT6 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT7_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT7 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT8_1 MIX1\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT8 SEC MIX\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\n\tSND_SOC_DAPM_MIXER(\"RX INT0 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT1 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT2 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT3 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT4 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT5 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT6 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT7 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\tSND_SOC_DAPM_MIXER(\"RX INT8 MIX2\", SND_SOC_NOPM, 0, 0, NULL, 0),\n\n\tSND_SOC_DAPM_MUX(\"RX INT0 DEM MUX\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int0_dem_inp_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT1 DEM MUX\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int1_dem_inp_mux),\n\tSND_SOC_DAPM_MUX(\"RX INT2 DEM MUX\", SND_SOC_NOPM, 0, 0,\n\t\t&rx_int2_dem_inp_mux),\n\n\tSND_SOC_DAPM_MUX_E(\"RX INT0 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_EAR, 0, &rx_int0_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT1 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_HPHL, 0, &rx_int1_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT2 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_HPHR, 0, &rx_int2_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT3 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_LO1, 0, &rx_int3_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT4 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_LO2, 0, &rx_int4_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT5 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_LO3, 0, &rx_int5_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT6 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_LO4, 0, &rx_int6_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT7 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_SPKR1, 0, &rx_int7_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_MUX_E(\"RX INT8 INTERP\", SND_SOC_NOPM,\n\t\tINTERP_SPKR2, 0, &rx_int8_interp_mux,\n\t\twcd9335_codec_enable_interpolator,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_DAC_E(\"RX INT0 DAC\", NULL, SND_SOC_NOPM,\n\t\t0, 0, wcd9335_codec_ear_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT1 DAC\", NULL, WCD9335_ANA_HPH,\n\t\t5, 0, wcd9335_codec_hphl_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT2 DAC\", NULL, WCD9335_ANA_HPH,\n\t\t4, 0, wcd9335_codec_hphr_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\tSND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT3 DAC\", NULL, SND_SOC_NOPM,\n\t\t0, 0, wcd9335_codec_lineout_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT4 DAC\", NULL, SND_SOC_NOPM,\n\t\t0, 0, wcd9335_codec_lineout_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT5 DAC\", NULL, SND_SOC_NOPM,\n\t\t0, 0, wcd9335_codec_lineout_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_DAC_E(\"RX INT6 DAC\", NULL, SND_SOC_NOPM,\n\t\t0, 0, wcd9335_codec_lineout_dac_event,\n\t\tSND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"HPHL PA\", WCD9335_ANA_HPH, 7, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_hphl_pa,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"HPHR PA\", WCD9335_ANA_HPH, 6, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_hphr_pa,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"EAR PA\", WCD9335_ANA_EAR, 7, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_ear_pa,\n\t\t\t   SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"LINEOUT1 PA\", WCD9335_ANA_LO_1_2, 7, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_lineout_pa,\n\t\t\t   SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"LINEOUT2 PA\", WCD9335_ANA_LO_1_2, 6, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_lineout_pa,\n\t\t\t   SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"LINEOUT3 PA\", WCD9335_ANA_LO_3_4, 7, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_lineout_pa,\n\t\t\t   SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_PGA_E(\"LINEOUT4 PA\", WCD9335_ANA_LO_3_4, 6, 0, NULL, 0,\n\t\t\t   wcd9335_codec_enable_lineout_pa,\n\t\t\t   SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_SUPPLY(\"RX_BIAS\", SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_rx_bias, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_SUPPLY(\"MCLK\",  SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_mclk, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\t \n\tSND_SOC_DAPM_INPUT(\"AMIC1\"),\n\tSND_SOC_DAPM_INPUT(\"AMIC2\"),\n\tSND_SOC_DAPM_INPUT(\"AMIC3\"),\n\tSND_SOC_DAPM_INPUT(\"AMIC4\"),\n\tSND_SOC_DAPM_INPUT(\"AMIC5\"),\n\tSND_SOC_DAPM_INPUT(\"AMIC6\"),\n\n\tSND_SOC_DAPM_AIF_OUT_E(\"AIF1 CAP\", \"AIF1 Capture\", 0, SND_SOC_NOPM,\n\t\tAIF1_CAP, 0, wcd9335_codec_enable_slim,\n\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_AIF_OUT_E(\"AIF2 CAP\", \"AIF2 Capture\", 0, SND_SOC_NOPM,\n\t\tAIF2_CAP, 0, wcd9335_codec_enable_slim,\n\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_AIF_OUT_E(\"AIF3 CAP\", \"AIF3 Capture\", 0, SND_SOC_NOPM,\n\t\tAIF3_CAP, 0, wcd9335_codec_enable_slim,\n\t\tSND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_SUPPLY(\"MIC BIAS1\", SND_SOC_NOPM, 0, 0,\n\t\t\t       wcd9335_codec_enable_micbias,\n\t\t\t       SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t       SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_SUPPLY(\"MIC BIAS2\", SND_SOC_NOPM, 0, 0,\n\t\t\t       wcd9335_codec_enable_micbias,\n\t\t\t       SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t       SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_SUPPLY(\"MIC BIAS3\", SND_SOC_NOPM, 0, 0,\n\t\t\t       wcd9335_codec_enable_micbias,\n\t\t\t       SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t       SND_SOC_DAPM_POST_PMD),\n\tSND_SOC_DAPM_SUPPLY(\"MIC BIAS4\", SND_SOC_NOPM, 0, 0,\n\t\t\t       wcd9335_codec_enable_micbias,\n\t\t\t       SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t       SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"ADC1\", NULL, WCD9335_ANA_AMIC1, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\tSND_SOC_DAPM_ADC_E(\"ADC2\", NULL, WCD9335_ANA_AMIC2, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\tSND_SOC_DAPM_ADC_E(\"ADC3\", NULL, WCD9335_ANA_AMIC3, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\tSND_SOC_DAPM_ADC_E(\"ADC4\", NULL, WCD9335_ANA_AMIC4, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\tSND_SOC_DAPM_ADC_E(\"ADC5\", NULL, WCD9335_ANA_AMIC5, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\tSND_SOC_DAPM_ADC_E(\"ADC6\", NULL, WCD9335_ANA_AMIC6, 7, 0,\n\t\t\t   wcd9335_codec_enable_adc, SND_SOC_DAPM_PRE_PMU),\n\n\t \n\tSND_SOC_DAPM_ADC_E(\"DMIC0\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"DMIC1\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"DMIC2\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"DMIC3\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"DMIC4\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_ADC_E(\"DMIC5\", NULL, SND_SOC_NOPM, 0, 0,\n\t\twcd9335_codec_enable_dmic, SND_SOC_DAPM_PRE_PMU |\n\t\tSND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX(\"DMIC MUX0\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux0),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX1\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux1),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX2\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux2),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX3\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux3),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX4\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux4),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX5\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux5),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX6\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux6),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX7\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux7),\n\tSND_SOC_DAPM_MUX(\"DMIC MUX8\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_dmic_mux8),\n\n\tSND_SOC_DAPM_MUX(\"AMIC MUX0\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux0),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX1\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux1),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX2\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux2),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX3\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux3),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX4\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux4),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX5\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux5),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX6\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux6),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX7\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux7),\n\tSND_SOC_DAPM_MUX(\"AMIC MUX8\", SND_SOC_NOPM, 0, 0,\n\t\t&tx_amic_mux8),\n\n\tSND_SOC_DAPM_MIXER(\"AIF1_CAP Mixer\", SND_SOC_NOPM, AIF1_CAP, 0,\n\t\taif1_cap_mixer, ARRAY_SIZE(aif1_cap_mixer)),\n\n\tSND_SOC_DAPM_MIXER(\"AIF2_CAP Mixer\", SND_SOC_NOPM, AIF2_CAP, 0,\n\t\taif2_cap_mixer, ARRAY_SIZE(aif2_cap_mixer)),\n\n\tSND_SOC_DAPM_MIXER(\"AIF3_CAP Mixer\", SND_SOC_NOPM, AIF3_CAP, 0,\n\t\taif3_cap_mixer, ARRAY_SIZE(aif3_cap_mixer)),\n\n\tSND_SOC_DAPM_MUX(\"SLIM TX0 MUX\", SND_SOC_NOPM, WCD9335_TX0, 0,\n\t\t&sb_tx0_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX1 MUX\", SND_SOC_NOPM, WCD9335_TX1, 0,\n\t\t&sb_tx1_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX2 MUX\", SND_SOC_NOPM, WCD9335_TX2, 0,\n\t\t&sb_tx2_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX3 MUX\", SND_SOC_NOPM, WCD9335_TX3, 0,\n\t\t&sb_tx3_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX4 MUX\", SND_SOC_NOPM, WCD9335_TX4, 0,\n\t\t&sb_tx4_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX5 MUX\", SND_SOC_NOPM, WCD9335_TX5, 0,\n\t\t&sb_tx5_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX6 MUX\", SND_SOC_NOPM, WCD9335_TX6, 0,\n\t\t&sb_tx6_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX7 MUX\", SND_SOC_NOPM, WCD9335_TX7, 0,\n\t\t&sb_tx7_mux),\n\tSND_SOC_DAPM_MUX(\"SLIM TX8 MUX\", SND_SOC_NOPM, WCD9335_TX8, 0,\n\t\t&sb_tx8_mux),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX0\", WCD9335_CDC_TX0_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux0, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX1\", WCD9335_CDC_TX1_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux1, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX2\", WCD9335_CDC_TX2_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux2, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX3\", WCD9335_CDC_TX3_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux3, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX4\", WCD9335_CDC_TX4_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux4, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX5\", WCD9335_CDC_TX5_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux5, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX6\", WCD9335_CDC_TX6_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux6, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX7\", WCD9335_CDC_TX7_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux7, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"ADC MUX8\", WCD9335_CDC_TX8_TX_PATH_CTL, 5, 0,\n\t\t\t   &tx_adc_mux8, wcd9335_codec_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n};\n\nstatic void wcd9335_enable_sido_buck(struct snd_soc_component *component)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\n\tsnd_soc_component_update_bits(component, WCD9335_ANA_RCO,\n\t\t\t\t\tWCD9335_ANA_RCO_BG_EN_MASK,\n\t\t\t\t\tWCD9335_ANA_RCO_BG_ENABLE);\n\tsnd_soc_component_update_bits(component, WCD9335_ANA_BUCK_CTL,\n\t\t\t\t\tWCD9335_ANA_BUCK_CTL_VOUT_D_IREF_MASK,\n\t\t\t\t\tWCD9335_ANA_BUCK_CTL_VOUT_D_IREF_EXT);\n\t \n\tusleep_range(100, 110);\n\tsnd_soc_component_update_bits(component, WCD9335_ANA_BUCK_CTL,\n\t\t\t\t\tWCD9335_ANA_BUCK_CTL_VOUT_D_VREF_MASK,\n\t\t\t\t\tWCD9335_ANA_BUCK_CTL_VOUT_D_VREF_EXT);\n\t \n\tusleep_range(100, 110);\n\twcd->sido_input_src = SIDO_SOURCE_RCO_BG;\n}\n\nstatic int wcd9335_enable_efuse_sensing(struct snd_soc_component *comp)\n{\n\t_wcd9335_codec_enable_mclk(comp, true);\n\tsnd_soc_component_update_bits(comp,\n\t\t\t\tWCD9335_CHIP_TIER_CTRL_EFUSE_CTL,\n\t\t\t\tWCD9335_CHIP_TIER_CTRL_EFUSE_EN_MASK,\n\t\t\t\tWCD9335_CHIP_TIER_CTRL_EFUSE_ENABLE);\n\t \n\tusleep_range(5000, 5500);\n\n\tif (!(snd_soc_component_read(comp,\n\t\t\t\t\tWCD9335_CHIP_TIER_CTRL_EFUSE_STATUS) &\n\t\t\t\t\tWCD9335_CHIP_TIER_CTRL_EFUSE_EN_MASK))\n\t\tWARN(1, \"%s: Efuse sense is not complete\\n\", __func__);\n\n\twcd9335_enable_sido_buck(comp);\n\t_wcd9335_codec_enable_mclk(comp, false);\n\n\treturn 0;\n}\n\nstatic void wcd9335_codec_init(struct snd_soc_component *component)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tint i;\n\n\t \n\tregmap_update_bits(wcd->regmap, WCD9335_CODEC_RPM_CLK_GATE,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_GATE_MCLK_GATE_MASK, 0);\n\n\tregmap_update_bits(wcd->regmap, WCD9335_CODEC_RPM_CLK_MCLK_CFG,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_MCLK_MASK,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_9P6MHZ);\n\n\tfor (i = 0; i < ARRAY_SIZE(wcd9335_codec_reg_init); i++)\n\t\tsnd_soc_component_update_bits(component,\n\t\t\t\t\twcd9335_codec_reg_init[i].reg,\n\t\t\t\t\twcd9335_codec_reg_init[i].mask,\n\t\t\t\t\twcd9335_codec_reg_init[i].val);\n\n\twcd9335_enable_efuse_sensing(component);\n}\n\nstatic int wcd9335_codec_probe(struct snd_soc_component *component)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(component->dev);\n\tint ret;\n\tint i;\n\n\tsnd_soc_component_init_regmap(component, wcd->regmap);\n\t \n\twcd->clsh_ctrl = wcd_clsh_ctrl_alloc(component, WCD9335);\n\tif (IS_ERR(wcd->clsh_ctrl))\n\t\treturn PTR_ERR(wcd->clsh_ctrl);\n\n\t \n\twcd->hph_mode = CLS_H_HIFI;\n\twcd->component = component;\n\n\twcd9335_codec_init(component);\n\n\tfor (i = 0; i < NUM_CODEC_DAIS; i++)\n\t\tINIT_LIST_HEAD(&wcd->dai[i].slim_ch_list);\n\n\tret = wcd9335_setup_irqs(wcd);\n\tif (ret)\n\t\tgoto free_clsh_ctrl;\n\n\treturn 0;\n\nfree_clsh_ctrl:\n\twcd_clsh_ctrl_free(wcd->clsh_ctrl);\n\treturn ret;\n}\n\nstatic void wcd9335_codec_remove(struct snd_soc_component *comp)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\n\twcd_clsh_ctrl_free(wcd->clsh_ctrl);\n\twcd9335_teardown_irqs(wcd);\n}\n\nstatic int wcd9335_codec_set_sysclk(struct snd_soc_component *comp,\n\t\t\t\t    int clk_id, int source,\n\t\t\t\t    unsigned int freq, int dir)\n{\n\tstruct wcd9335_codec *wcd = dev_get_drvdata(comp->dev);\n\n\twcd->mclk_rate = freq;\n\n\tif (wcd->mclk_rate == WCD9335_MCLK_CLK_12P288MHZ)\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_MCLK_MASK,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_12P288MHZ);\n\telse if (wcd->mclk_rate == WCD9335_MCLK_CLK_9P6MHZ)\n\t\tsnd_soc_component_update_bits(comp,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_MCLK_MASK,\n\t\t\t\tWCD9335_CODEC_RPM_CLK_MCLK_CFG_9P6MHZ);\n\n\treturn clk_set_rate(wcd->mclk, freq);\n}\n\nstatic const struct snd_soc_component_driver wcd9335_component_drv = {\n\t.probe = wcd9335_codec_probe,\n\t.remove = wcd9335_codec_remove,\n\t.set_sysclk = wcd9335_codec_set_sysclk,\n\t.controls = wcd9335_snd_controls,\n\t.num_controls = ARRAY_SIZE(wcd9335_snd_controls),\n\t.dapm_widgets = wcd9335_dapm_widgets,\n\t.num_dapm_widgets = ARRAY_SIZE(wcd9335_dapm_widgets),\n\t.dapm_routes = wcd9335_audio_map,\n\t.num_dapm_routes = ARRAY_SIZE(wcd9335_audio_map),\n\t.endianness = 1,\n};\n\nstatic int wcd9335_probe(struct wcd9335_codec *wcd)\n{\n\tstruct device *dev = wcd->dev;\n\n\tmemcpy(wcd->rx_chs, wcd9335_rx_chs, sizeof(wcd9335_rx_chs));\n\tmemcpy(wcd->tx_chs, wcd9335_tx_chs, sizeof(wcd9335_tx_chs));\n\n\twcd->sido_input_src = SIDO_SOURCE_INTERNAL;\n\twcd->sido_voltage = SIDO_VOLTAGE_NOMINAL_MV;\n\n\treturn devm_snd_soc_register_component(dev, &wcd9335_component_drv,\n\t\t\t\t\t       wcd9335_slim_dais,\n\t\t\t\t\t       ARRAY_SIZE(wcd9335_slim_dais));\n}\n\nstatic const struct regmap_range_cfg wcd9335_ranges[] = {\n\t{\n\t\t.name = \"WCD9335\",\n\t\t.range_min =  0x0,\n\t\t.range_max =  WCD9335_MAX_REGISTER,\n\t\t.selector_reg = WCD9335_SEL_REGISTER,\n\t\t.selector_mask = 0xff,\n\t\t.selector_shift = 0,\n\t\t.window_start = 0x800,\n\t\t.window_len = 0x100,\n\t},\n};\n\nstatic bool wcd9335_is_volatile_register(struct device *dev, unsigned int reg)\n{\n\tswitch (reg) {\n\tcase WCD9335_INTR_PIN1_STATUS0...WCD9335_INTR_PIN2_CLEAR3:\n\tcase WCD9335_ANA_MBHC_RESULT_3:\n\tcase WCD9335_ANA_MBHC_RESULT_2:\n\tcase WCD9335_ANA_MBHC_RESULT_1:\n\tcase WCD9335_ANA_MBHC_MECH:\n\tcase WCD9335_ANA_MBHC_ELECT:\n\tcase WCD9335_ANA_MBHC_ZDET:\n\tcase WCD9335_ANA_MICB2:\n\tcase WCD9335_ANA_RCO:\n\tcase WCD9335_ANA_BIAS:\n\t\treturn true;\n\tdefault:\n\t\treturn false;\n\t}\n}\n\nstatic struct regmap_config wcd9335_regmap_config = {\n\t.reg_bits = 16,\n\t.val_bits = 8,\n\t.cache_type = REGCACHE_MAPLE,\n\t.max_register = WCD9335_MAX_REGISTER,\n\t.can_multi_write = true,\n\t.ranges = wcd9335_ranges,\n\t.num_ranges = ARRAY_SIZE(wcd9335_ranges),\n\t.volatile_reg = wcd9335_is_volatile_register,\n};\n\nstatic const struct regmap_range_cfg wcd9335_ifc_ranges[] = {\n\t{\n\t\t.name = \"WCD9335-IFC-DEV\",\n\t\t.range_min =  0x0,\n\t\t.range_max = WCD9335_MAX_REGISTER,\n\t\t.selector_reg = WCD9335_SEL_REGISTER,\n\t\t.selector_mask = 0xfff,\n\t\t.selector_shift = 0,\n\t\t.window_start = 0x800,\n\t\t.window_len = 0x400,\n\t},\n};\n\nstatic struct regmap_config wcd9335_ifc_regmap_config = {\n\t.reg_bits = 16,\n\t.val_bits = 8,\n\t.can_multi_write = true,\n\t.max_register = WCD9335_MAX_REGISTER,\n\t.ranges = wcd9335_ifc_ranges,\n\t.num_ranges = ARRAY_SIZE(wcd9335_ifc_ranges),\n};\n\nstatic const struct regmap_irq wcd9335_codec_irqs[] = {\n\t \n\t[WCD9335_IRQ_SLIMBUS] = {\n\t\t.reg_offset = 0,\n\t\t.mask = BIT(0),\n\t\t.type = {\n\t\t\t.type_reg_offset = 0,\n\t\t\t.types_supported = IRQ_TYPE_EDGE_BOTH,\n\t\t\t.type_reg_mask\t= BIT(0),\n\t\t},\n\t},\n};\n\nstatic const unsigned int wcd9335_config_regs[] = {\n\tWCD9335_INTR_LEVEL0,\n};\n\nstatic const struct regmap_irq_chip wcd9335_regmap_irq1_chip = {\n\t.name = \"wcd9335_pin1_irq\",\n\t.status_base = WCD9335_INTR_PIN1_STATUS0,\n\t.mask_base = WCD9335_INTR_PIN1_MASK0,\n\t.ack_base = WCD9335_INTR_PIN1_CLEAR0,\n\t.num_regs = 4,\n\t.irqs = wcd9335_codec_irqs,\n\t.num_irqs = ARRAY_SIZE(wcd9335_codec_irqs),\n\t.config_base = wcd9335_config_regs,\n\t.num_config_bases = ARRAY_SIZE(wcd9335_config_regs),\n\t.num_config_regs = 4,\n\t.set_type_config = regmap_irq_set_type_config_simple,\n};\n\nstatic int wcd9335_parse_dt(struct wcd9335_codec *wcd)\n{\n\tstruct device *dev = wcd->dev;\n\tstruct device_node *np = dev->of_node;\n\tint ret;\n\n\twcd->reset_gpio = of_get_named_gpio(np,\t\"reset-gpios\", 0);\n\tif (wcd->reset_gpio < 0) {\n\t\tdev_err(dev, \"Reset GPIO missing from DT\\n\");\n\t\treturn wcd->reset_gpio;\n\t}\n\n\twcd->mclk = devm_clk_get(dev, \"mclk\");\n\tif (IS_ERR(wcd->mclk)) {\n\t\tdev_err(dev, \"mclk not found\\n\");\n\t\treturn PTR_ERR(wcd->mclk);\n\t}\n\n\twcd->native_clk = devm_clk_get(dev, \"slimbus\");\n\tif (IS_ERR(wcd->native_clk)) {\n\t\tdev_err(dev, \"slimbus clock not found\\n\");\n\t\treturn PTR_ERR(wcd->native_clk);\n\t}\n\n\twcd->supplies[0].supply = \"vdd-buck\";\n\twcd->supplies[1].supply = \"vdd-buck-sido\";\n\twcd->supplies[2].supply = \"vdd-tx\";\n\twcd->supplies[3].supply = \"vdd-rx\";\n\twcd->supplies[4].supply = \"vdd-io\";\n\n\tret = regulator_bulk_get(dev, WCD9335_MAX_SUPPLY, wcd->supplies);\n\tif (ret) {\n\t\tdev_err(dev, \"Failed to get supplies: err = %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_power_on_reset(struct wcd9335_codec *wcd)\n{\n\tstruct device *dev = wcd->dev;\n\tint ret;\n\n\tret = regulator_bulk_enable(WCD9335_MAX_SUPPLY, wcd->supplies);\n\tif (ret) {\n\t\tdev_err(dev, \"Failed to get supplies: err = %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\t \n\tusleep_range(600, 650);\n\n\tgpio_direction_output(wcd->reset_gpio, 0);\n\tmsleep(20);\n\tgpio_set_value(wcd->reset_gpio, 1);\n\tmsleep(20);\n\n\treturn 0;\n}\n\nstatic int wcd9335_bring_up(struct wcd9335_codec *wcd)\n{\n\tstruct regmap *rm = wcd->regmap;\n\tint val, byte0;\n\n\tregmap_read(rm, WCD9335_CHIP_TIER_CTRL_EFUSE_VAL_OUT0, &val);\n\tregmap_read(rm, WCD9335_CHIP_TIER_CTRL_CHIP_ID_BYTE0, &byte0);\n\n\tif ((val < 0) || (byte0 < 0)) {\n\t\tdev_err(wcd->dev, \"WCD9335 CODEC version detection fail!\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tif (byte0 == 0x1) {\n\t\tdev_info(wcd->dev, \"WCD9335 CODEC version is v2.0\\n\");\n\t\twcd->version = WCD9335_VERSION_2_0;\n\t\tregmap_write(rm, WCD9335_CODEC_RPM_RST_CTL, 0x01);\n\t\tregmap_write(rm, WCD9335_SIDO_SIDO_TEST_2, 0x00);\n\t\tregmap_write(rm, WCD9335_SIDO_SIDO_CCL_8, 0x6F);\n\t\tregmap_write(rm, WCD9335_BIAS_VBG_FINE_ADJ, 0x65);\n\t\tregmap_write(rm, WCD9335_CODEC_RPM_PWR_CDC_DIG_HM_CTL, 0x5);\n\t\tregmap_write(rm, WCD9335_CODEC_RPM_PWR_CDC_DIG_HM_CTL, 0x7);\n\t\tregmap_write(rm, WCD9335_CODEC_RPM_PWR_CDC_DIG_HM_CTL, 0x3);\n\t\tregmap_write(rm, WCD9335_CODEC_RPM_RST_CTL, 0x3);\n\t} else {\n\t\tdev_err(wcd->dev, \"WCD9335 CODEC version not supported\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\treturn 0;\n}\n\nstatic int wcd9335_irq_init(struct wcd9335_codec *wcd)\n{\n\tint ret;\n\n\t \n\twcd->intr1 = of_irq_get_byname(wcd->dev->of_node, \"intr1\");\n\tif (wcd->intr1 < 0)\n\t\treturn dev_err_probe(wcd->dev, wcd->intr1,\n\t\t\t\t     \"Unable to configure IRQ\\n\");\n\n\tret = devm_regmap_add_irq_chip(wcd->dev, wcd->regmap, wcd->intr1,\n\t\t\t\t IRQF_TRIGGER_HIGH, 0,\n\t\t\t\t &wcd9335_regmap_irq1_chip, &wcd->irq_data);\n\tif (ret)\n\t\treturn dev_err_probe(wcd->dev, ret, \"Failed to register IRQ chip\\n\");\n\n\treturn 0;\n}\n\nstatic int wcd9335_slim_probe(struct slim_device *slim)\n{\n\tstruct device *dev = &slim->dev;\n\tstruct wcd9335_codec *wcd;\n\tint ret;\n\n\twcd = devm_kzalloc(dev, sizeof(*wcd), GFP_KERNEL);\n\tif (!wcd)\n\t\treturn\t-ENOMEM;\n\n\twcd->dev = dev;\n\tret = wcd9335_parse_dt(wcd);\n\tif (ret) {\n\t\tdev_err(dev, \"Error parsing DT: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tret = wcd9335_power_on_reset(wcd);\n\tif (ret)\n\t\treturn ret;\n\n\tdev_set_drvdata(dev, wcd);\n\n\treturn 0;\n}\n\nstatic int wcd9335_slim_status(struct slim_device *sdev,\n\t\t\t       enum slim_device_status status)\n{\n\tstruct device *dev = &sdev->dev;\n\tstruct device_node *ifc_dev_np;\n\tstruct wcd9335_codec *wcd;\n\tint ret;\n\n\twcd = dev_get_drvdata(dev);\n\n\tifc_dev_np = of_parse_phandle(dev->of_node, \"slim-ifc-dev\", 0);\n\tif (!ifc_dev_np) {\n\t\tdev_err(dev, \"No Interface device found\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\twcd->slim = sdev;\n\twcd->slim_ifc_dev = of_slim_get_device(sdev->ctrl, ifc_dev_np);\n\tof_node_put(ifc_dev_np);\n\tif (!wcd->slim_ifc_dev) {\n\t\tdev_err(dev, \"Unable to get SLIM Interface device\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tslim_get_logical_addr(wcd->slim_ifc_dev);\n\n\twcd->regmap = regmap_init_slimbus(sdev, &wcd9335_regmap_config);\n\tif (IS_ERR(wcd->regmap))\n\t\treturn dev_err_probe(dev, PTR_ERR(wcd->regmap),\n\t\t\t\t     \"Failed to allocate slim register map\\n\");\n\n\twcd->if_regmap = regmap_init_slimbus(wcd->slim_ifc_dev,\n\t\t\t\t\t\t  &wcd9335_ifc_regmap_config);\n\tif (IS_ERR(wcd->if_regmap))\n\t\treturn dev_err_probe(dev, PTR_ERR(wcd->if_regmap),\n\t\t\t\t     \"Failed to allocate ifc register map\\n\");\n\n\tret = wcd9335_bring_up(wcd);\n\tif (ret) {\n\t\tdev_err(dev, \"Failed to bringup WCD9335\\n\");\n\t\treturn ret;\n\t}\n\n\tret = wcd9335_irq_init(wcd);\n\tif (ret)\n\t\treturn ret;\n\n\twcd9335_probe(wcd);\n\n\treturn 0;\n}\n\nstatic const struct slim_device_id wcd9335_slim_id[] = {\n\t{SLIM_MANF_ID_QCOM, SLIM_PROD_CODE_WCD9335, 0x1, 0x0},\n\t{}\n};\nMODULE_DEVICE_TABLE(slim, wcd9335_slim_id);\n\nstatic struct slim_driver wcd9335_slim_driver = {\n\t.driver = {\n\t\t.name = \"wcd9335-slim\",\n\t},\n\t.probe = wcd9335_slim_probe,\n\t.device_status = wcd9335_slim_status,\n\t.id_table = wcd9335_slim_id,\n};\n\nmodule_slim_driver(wcd9335_slim_driver);\nMODULE_DESCRIPTION(\"WCD9335 slim driver\");\nMODULE_LICENSE(\"GPL v2\");\nMODULE_ALIAS(\"slim:217:1a0:*\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}