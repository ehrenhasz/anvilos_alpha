{
  "module_name": "wm_adsp.h",
  "hash_id": "04c9bcea036e9e5fd4a247842b1634bd36187c4d4152a492956d637fc5d995b9",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/wm_adsp.h",
  "human_readable_source": " \n \n\n#ifndef __WM_ADSP_H\n#define __WM_ADSP_H\n\n#include <linux/firmware/cirrus/cs_dsp.h>\n#include <linux/firmware/cirrus/wmfw.h>\n\n#include <sound/soc.h>\n#include <sound/soc-dapm.h>\n#include <sound/compress_driver.h>\n\n \n#define WM_ADSP_COMPR_OK                 0\n#define WM_ADSP_COMPR_VOICE_TRIGGER      1\n\nstruct wm_adsp_compr;\nstruct wm_adsp_compr_buf;\n\nstruct wm_adsp {\n\tstruct cs_dsp cs_dsp;\n\tconst char *part;\n\tconst char *fwf_name;\n\tconst char *system_name;\n\tstruct snd_soc_component *component;\n\n\tunsigned int sys_config_size;\n\n\tint fw;\n\tbool wmfw_optional;\n\n\tstruct work_struct boot_work;\n\tint (*pre_run)(struct wm_adsp *dsp);\n\n\tbool preloaded;\n\tbool fatal_error;\n\n\tstruct list_head compr_list;\n\tstruct list_head buffer_list;\n\n\t \n\tbool toggle_preload;\n};\n\n#define WM_ADSP1(wname, num) \\\n\tSND_SOC_DAPM_PGA_E(wname, SND_SOC_NOPM, num, 0, NULL, 0, \\\n\t\twm_adsp1_event, SND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_PRE_PMD)\n\n#define WM_ADSP2_PRELOAD_SWITCH(wname, num) \\\n\tSOC_SINGLE_EXT(wname \" Preload Switch\", SND_SOC_NOPM, num, 1, 0, \\\n\t\twm_adsp2_preloader_get, wm_adsp2_preloader_put)\n\n#define WM_ADSP2(wname, num, event_fn) \\\n\tSND_SOC_DAPM_SPK(wname \" Preload\", NULL), \\\n{\t.id = snd_soc_dapm_supply, .name = wname \" Preloader\", \\\n\t.reg = SND_SOC_NOPM, .shift = num, .event = event_fn, \\\n\t.event_flags = SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_PRE_PMD, \\\n\t.subseq = 100,   }, \\\n{\t.id = snd_soc_dapm_out_drv, .name = wname, \\\n\t.reg = SND_SOC_NOPM, .shift = num, .event = wm_adsp_event, \\\n\t.event_flags = SND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_PRE_PMD }\n\n#define WM_ADSP_FW_CONTROL(dspname, num) \\\n\tSOC_ENUM_EXT(dspname \" Firmware\", wm_adsp_fw_enum[num], \\\n\t\t     wm_adsp_fw_get, wm_adsp_fw_put)\n\nextern const struct soc_enum wm_adsp_fw_enum[];\n\nint wm_adsp1_init(struct wm_adsp *dsp);\nint wm_adsp2_init(struct wm_adsp *dsp);\nvoid wm_adsp2_remove(struct wm_adsp *dsp);\nint wm_adsp2_component_probe(struct wm_adsp *dsp, struct snd_soc_component *component);\nint wm_adsp2_component_remove(struct wm_adsp *dsp, struct snd_soc_component *component);\nint wm_halo_init(struct wm_adsp *dsp);\n\nint wm_adsp1_event(struct snd_soc_dapm_widget *w,\n\t\t   struct snd_kcontrol *kcontrol, int event);\n\nint wm_adsp_early_event(struct snd_soc_dapm_widget *w,\n\t\t\tstruct snd_kcontrol *kcontrol, int event);\n\nint wm_adsp_power_up(struct wm_adsp *dsp, bool load_firmware);\nvoid wm_adsp_power_down(struct wm_adsp *dsp);\n\nirqreturn_t wm_adsp2_bus_error(int irq, void *data);\nirqreturn_t wm_halo_bus_error(int irq, void *data);\nirqreturn_t wm_halo_wdt_expire(int irq, void *data);\n\nint wm_adsp_event(struct snd_soc_dapm_widget *w,\n\t\t  struct snd_kcontrol *kcontrol, int event);\n\nint wm_adsp2_set_dspclk(struct snd_soc_dapm_widget *w, unsigned int freq);\n\nint wm_adsp2_preloader_get(struct snd_kcontrol *kcontrol,\n\t\t\t   struct snd_ctl_elem_value *ucontrol);\nint wm_adsp2_preloader_put(struct snd_kcontrol *kcontrol,\n\t\t\t   struct snd_ctl_elem_value *ucontrol);\nint wm_adsp_fw_get(struct snd_kcontrol *kcontrol,\n\t\t   struct snd_ctl_elem_value *ucontrol);\nint wm_adsp_fw_put(struct snd_kcontrol *kcontrol,\n\t\t   struct snd_ctl_elem_value *ucontrol);\n\nint wm_adsp_compr_open(struct wm_adsp *dsp, struct snd_compr_stream *stream);\nint wm_adsp_compr_free(struct snd_soc_component *component,\n\t\t       struct snd_compr_stream *stream);\nint wm_adsp_compr_set_params(struct snd_soc_component *component,\n\t\t\t     struct snd_compr_stream *stream,\n\t\t\t     struct snd_compr_params *params);\nint wm_adsp_compr_get_caps(struct snd_soc_component *component,\n\t\t\t   struct snd_compr_stream *stream,\n\t\t\t   struct snd_compr_caps *caps);\nint wm_adsp_compr_trigger(struct snd_soc_component *component,\n\t\t\t  struct snd_compr_stream *stream, int cmd);\nint wm_adsp_compr_handle_irq(struct wm_adsp *dsp);\nint wm_adsp_compr_pointer(struct snd_soc_component *component,\n\t\t\t  struct snd_compr_stream *stream,\n\t\t\t  struct snd_compr_tstamp *tstamp);\nint wm_adsp_compr_copy(struct snd_soc_component *component,\n\t\t       struct snd_compr_stream *stream,\n\t\t       char __user *buf, size_t count);\nint wm_adsp_write_ctl(struct wm_adsp *dsp, const char *name,  int type,\n\t\t      unsigned int alg, void *buf, size_t len);\nint wm_adsp_read_ctl(struct wm_adsp *dsp, const char *name,  int type,\n\t\t      unsigned int alg, void *buf, size_t len);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}