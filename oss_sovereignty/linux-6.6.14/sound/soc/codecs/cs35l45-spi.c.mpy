{
  "module_name": "cs35l45-spi.c",
  "hash_id": "dd0e56fd59cd936356ed162c99a9c2515b88d4dc049c68dec44bd83a510b21fe",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/cs35l45-spi.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n#include <linux/device.h>\n#include <linux/module.h>\n#include <linux/regmap.h>\n#include <linux/spi/spi.h>\n\n#include \"cs35l45.h\"\n\nstatic int cs35l45_spi_probe(struct spi_device *spi)\n{\n\tstruct cs35l45_private *cs35l45;\n\tstruct device *dev = &spi->dev;\n\tint ret;\n\n\tcs35l45 = devm_kzalloc(dev, sizeof(struct cs35l45_private), GFP_KERNEL);\n\tif (cs35l45 == NULL)\n\t\treturn -ENOMEM;\n\n\tspi->max_speed_hz = CS35L45_SPI_MAX_FREQ;\n\tspi_setup(spi);\n\n\tspi_set_drvdata(spi, cs35l45);\n\tcs35l45->regmap = devm_regmap_init_spi(spi, &cs35l45_spi_regmap);\n\tif (IS_ERR(cs35l45->regmap)) {\n\t\tret = PTR_ERR(cs35l45->regmap);\n\t\tdev_err(dev, \"Failed to allocate register map: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tcs35l45->dev = dev;\n\tcs35l45->irq = spi->irq;\n\tcs35l45->bus_type = CONTROL_BUS_SPI;\n\n\treturn cs35l45_probe(cs35l45);\n}\n\nstatic void cs35l45_spi_remove(struct spi_device *spi)\n{\n\tstruct cs35l45_private *cs35l45 = spi_get_drvdata(spi);\n\n\tcs35l45_remove(cs35l45);\n}\n\nstatic const struct of_device_id cs35l45_of_match[] = {\n\t{ .compatible = \"cirrus,cs35l45\" },\n\t{},\n};\nMODULE_DEVICE_TABLE(of, cs35l45_of_match);\n\nstatic const struct spi_device_id cs35l45_id_spi[] = {\n\t{ \"cs35l45\", 0 },\n\t{}\n};\nMODULE_DEVICE_TABLE(spi, cs35l45_id_spi);\n\nstatic struct spi_driver cs35l45_spi_driver = {\n\t.driver = {\n\t\t.name\t\t= \"cs35l45\",\n\t\t.of_match_table = cs35l45_of_match,\n\t\t.pm\t\t= pm_ptr(&cs35l45_pm_ops),\n\t},\n\t.id_table\t= cs35l45_id_spi,\n\t.probe\t\t= cs35l45_spi_probe,\n\t.remove\t\t= cs35l45_spi_remove,\n};\nmodule_spi_driver(cs35l45_spi_driver);\n\nMODULE_DESCRIPTION(\"SPI CS35L45 driver\");\nMODULE_AUTHOR(\"James Schulman, Cirrus Logic Inc, <james.schulman@cirrus.com>\");\nMODULE_LICENSE(\"GPL\");\nMODULE_IMPORT_NS(SND_SOC_CS35L45);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}