{
  "module_name": "tda7419.c",
  "hash_id": "fa90f757eba5d46cb03f1a239bf4a3504171a65ffcc5c9461bab62577b050414",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/tda7419.c",
  "human_readable_source": "\n \n\n#include <linux/i2c.h>\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/regmap.h>\n#include <sound/core.h>\n#include <sound/control.h>\n#include <sound/soc.h>\n#include <sound/tlv.h>\n\n#define TDA7419_MAIN_SRC_REG\t\t0x00\n#define TDA7419_LOUDNESS_REG\t\t0x01\n#define TDA7419_MUTE_CLK_REG\t\t0x02\n#define TDA7419_VOLUME_REG\t\t0x03\n#define TDA7419_TREBLE_REG\t\t0x04\n#define TDA7419_MIDDLE_REG\t\t0x05\n#define TDA7419_BASS_REG\t\t0x06\n#define TDA7419_SECOND_SRC_REG\t\t0x07\n#define TDA7419_SUB_MID_BASS_REG\t0x08\n#define TDA7419_MIXING_GAIN_REG\t\t0x09\n#define TDA7419_ATTENUATOR_LF_REG\t0x0a\n#define TDA7419_ATTENUATOR_RF_REG\t0x0b\n#define TDA7419_ATTENUATOR_LR_REG\t0x0c\n#define TDA7419_ATTENUATOR_RR_REG\t0x0d\n#define TDA7419_MIXING_LEVEL_REG\t0x0e\n#define TDA7419_ATTENUATOR_SUB_REG\t0x0f\n#define TDA7419_SA_CLK_AC_REG\t\t0x10\n#define TDA7419_TESTING_REG\t\t0x11\n\n#define TDA7419_MAIN_SRC_SEL\t\t0\n#define TDA7419_MAIN_SRC_GAIN\t\t3\n#define TDA7419_MAIN_SRC_AUTOZERO\t7\n\n#define TDA7419_LOUDNESS_ATTEN\t\t0\n#define TDA7419_LOUDNESS_CENTER_FREQ\t4\n#define TDA7419_LOUDNESS_BOOST\t\t6\n#define TDA7419_LOUDNESS_SOFT_STEP\t7\n\n#define TDA7419_VOLUME_SOFT_STEP\t7\n\n#define TDA7419_SOFT_MUTE\t\t0\n#define TDA7419_MUTE_INFLUENCE\t\t1\n#define TDA7419_SOFT_MUTE_TIME\t\t2\n#define TDA7419_SOFT_STEP_TIME\t\t4\n#define TDA7419_CLK_FAST_MODE\t\t7\n\n#define TDA7419_TREBLE_CENTER_FREQ\t5\n#define TDA7419_REF_OUT_SELECT\t\t7\n\n#define TDA7419_MIDDLE_Q_FACTOR\t\t5\n#define TDA7419_MIDDLE_SOFT_STEP\t7\n\n#define TDA7419_BASS_Q_FACTOR\t\t5\n#define TDA7419_BASS_SOFT_STEP\t\t7\n\n#define TDA7419_SECOND_SRC_SEL\t\t0\n#define TDA7419_SECOND_SRC_GAIN\t\t3\n#define TDA7419_REAR_SPKR_SRC\t\t7\n\n#define TDA7419_SUB_CUT_OFF_FREQ\t0\n#define TDA7419_MIDDLE_CENTER_FREQ\t2\n#define TDA7419_BASS_CENTER_FREQ\t4\n#define TDA7419_BASS_DC_MODE\t\t6\n#define TDA7419_SMOOTHING_FILTER\t7\n\n#define TDA7419_MIX_LF\t\t\t0\n#define TDA7419_MIX_RF\t\t\t1\n#define TDA7419_MIX_ENABLE\t\t2\n#define TDA7419_SUB_ENABLE\t\t3\n#define TDA7419_HPF_GAIN\t\t4\n\n#define TDA7419_SA_Q_FACTOR\t\t0\n#define TDA7419_RESET_MODE\t\t1\n#define TDA7419_SA_SOURCE\t\t2\n#define TDA7419_SA_RUN\t\t\t3\n#define TDA7419_RESET\t\t\t4\n#define TDA7419_CLK_SOURCE\t\t5\n#define TDA7419_COUPLING_MODE\t\t6\n\nstruct tda7419_data {\n\tstruct regmap *regmap;\n};\n\nstatic bool tda7419_readable_reg(struct device *dev, unsigned int reg)\n{\n\treturn false;\n}\n\nstatic const struct reg_default tda7419_regmap_defaults[] = {\n\t{ TDA7419_MAIN_SRC_REG,\t0xfe },\n\t{ TDA7419_LOUDNESS_REG, 0xfe },\n\t{ TDA7419_MUTE_CLK_REG, 0xfe },\n\t{ TDA7419_VOLUME_REG, 0xfe },\n\t{ TDA7419_TREBLE_REG, 0xfe },\n\t{ TDA7419_MIDDLE_REG, 0xfe },\n\t{ TDA7419_BASS_REG, 0xfe },\n\t{ TDA7419_SECOND_SRC_REG, 0xfe },\n\t{ TDA7419_SUB_MID_BASS_REG, 0xfe },\n\t{ TDA7419_MIXING_GAIN_REG, 0xfe },\n\t{ TDA7419_ATTENUATOR_LF_REG, 0xfe },\n\t{ TDA7419_ATTENUATOR_RF_REG, 0xfe },\n\t{ TDA7419_ATTENUATOR_LR_REG, 0xfe },\n\t{ TDA7419_ATTENUATOR_RR_REG, 0xfe },\n\t{ TDA7419_MIXING_LEVEL_REG, 0xfe },\n\t{ TDA7419_ATTENUATOR_SUB_REG, 0xfe },\n\t{ TDA7419_SA_CLK_AC_REG, 0xfe },\n\t{ TDA7419_TESTING_REG, 0xfe },\n};\n\nstatic const struct regmap_config tda7419_regmap_config = {\n\t.reg_bits = 8,\n\t.val_bits = 8,\n\t.max_register = TDA7419_TESTING_REG,\n\t.cache_type = REGCACHE_RBTREE,\n\t.readable_reg = tda7419_readable_reg,\n\t.reg_defaults = tda7419_regmap_defaults,\n\t.num_reg_defaults = ARRAY_SIZE(tda7419_regmap_defaults),\n};\n\nstruct tda7419_vol_control {\n\tint min, max;\n\tunsigned int reg, rreg, mask, thresh;\n\tunsigned int invert:1;\n};\n\nstatic inline bool tda7419_vol_is_stereo(struct tda7419_vol_control *tvc)\n{\n\tif (tvc->reg == tvc->rreg)\n\t\treturn false;\n\n\treturn true;\n}\n\nstatic int tda7419_vol_info(struct snd_kcontrol *kcontrol,\n\tstruct snd_ctl_elem_info *uinfo)\n{\n\tstruct tda7419_vol_control *tvc =\n\t\t(struct tda7419_vol_control *)kcontrol->private_value;\n\n\tuinfo->type = SNDRV_CTL_ELEM_TYPE_INTEGER;\n\tuinfo->count = tda7419_vol_is_stereo(tvc) ? 2 : 1;\n\tuinfo->value.integer.min = tvc->min;\n\tuinfo->value.integer.max = tvc->max;\n\n\treturn 0;\n}\n\nstatic inline int tda7419_vol_get_value(int val, unsigned int mask,\n\t\t\t\t\tint min, int thresh,\n\t\t\t\t\tunsigned int invert)\n{\n\tval &= mask;\n\tif (val < thresh) {\n\t\tif (invert)\n\t\t\tval = 0 - val;\n\t} else if (val > thresh) {\n\t\tif (invert)\n\t\t\tval = val - thresh;\n\t\telse\n\t\t\tval = thresh - val;\n\t}\n\n\tif (val < min)\n\t\tval = min;\n\n\treturn val;\n}\n\nstatic int tda7419_vol_get(struct snd_kcontrol *kcontrol,\n\t\t\t   struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_kcontrol_chip(kcontrol);\n\tstruct tda7419_vol_control *tvc =\n\t\t(struct tda7419_vol_control *)kcontrol->private_value;\n\tunsigned int reg = tvc->reg;\n\tunsigned int rreg = tvc->rreg;\n\tunsigned int mask = tvc->mask;\n\tint min = tvc->min;\n\tint thresh = tvc->thresh;\n\tunsigned int invert = tvc->invert;\n\tint val;\n\n\tval = snd_soc_component_read(component, reg);\n\tucontrol->value.integer.value[0] =\n\t\ttda7419_vol_get_value(val, mask, min, thresh, invert);\n\n\tif (tda7419_vol_is_stereo(tvc)) {\n\t\tval = snd_soc_component_read(component, rreg);\n\t\tucontrol->value.integer.value[1] =\n\t\t\ttda7419_vol_get_value(val, mask, min, thresh, invert);\n\t}\n\n\treturn 0;\n}\n\nstatic inline int tda7419_vol_put_value(int val, int thresh,\n\t\t\t\t\tunsigned int invert)\n{\n\tif (val < 0) {\n\t\tif (invert)\n\t\t\tval = abs(val);\n\t\telse\n\t\t\tval = thresh - val;\n\t} else if ((val > 0) && invert) {\n\t\tval += thresh;\n\t}\n\n\treturn val;\n}\n\nstatic int tda7419_vol_put(struct snd_kcontrol *kcontrol,\n\t\t\t   struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component =\n\t\tsnd_kcontrol_chip(kcontrol);\n\tstruct tda7419_vol_control *tvc =\n\t\t(struct tda7419_vol_control *)kcontrol->private_value;\n\tunsigned int reg = tvc->reg;\n\tunsigned int rreg = tvc->rreg;\n\tunsigned int mask = tvc->mask;\n\tint thresh = tvc->thresh;\n\tunsigned int invert = tvc->invert;\n\tint val;\n\tint ret;\n\n\tval = tda7419_vol_put_value(ucontrol->value.integer.value[0],\n\t\t\t\t    thresh, invert);\n\tret = snd_soc_component_update_bits(component, reg,\n\t\t\t\t\t    mask, val);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tif (tda7419_vol_is_stereo(tvc)) {\n\t\tval = tda7419_vol_put_value(ucontrol->value.integer.value[1],\n\t\t\t\t\t    thresh, invert);\n\t\tret = snd_soc_component_update_bits(component, rreg,\n\t\t\t\t\t\t    mask, val);\n\t}\n\n\treturn ret;\n}\n\n#define TDA7419_SINGLE_VALUE(xreg, xmask, xmin, xmax, xthresh, xinvert) \\\n\t((unsigned long)&(struct tda7419_vol_control) \\\n\t{.reg = xreg, .rreg = xreg, .mask = xmask, .min = xmin, \\\n\t .max = xmax, .thresh = xthresh, .invert = xinvert})\n\n#define TDA7419_DOUBLE_R_VALUE(xregl, xregr, xmask, xmin, xmax, xthresh, \\\n\t\t\t       xinvert) \\\n\t((unsigned long)&(struct tda7419_vol_control) \\\n\t{.reg = xregl, .rreg = xregr, .mask = xmask, .min = xmin, \\\n\t .max = xmax, .thresh = xthresh, .invert = xinvert})\n\n#define TDA7419_SINGLE_TLV(xname, xreg, xmask, xmin, xmax, xthresh, \\\n\t\t\t   xinvert, xtlv_array) \\\n{\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n\t.name = xname, \\\n\t.access = SNDRV_CTL_ELEM_ACCESS_TLV_READ | \\\n\t\tSNDRV_CTL_ELEM_ACCESS_READWRITE, \\\n\t.tlv.p = (xtlv_array), \\\n\t.info = tda7419_vol_info, \\\n\t.get = tda7419_vol_get, \\\n\t.put = tda7419_vol_put, \\\n\t.private_value = TDA7419_SINGLE_VALUE(xreg, xmask, xmin, \\\n\t\t\t\t\t      xmax, xthresh, xinvert), \\\n}\n\n#define TDA7419_DOUBLE_R_TLV(xname, xregl, xregr, xmask, xmin, xmax, \\\n\t\t\t     xthresh, xinvert, xtlv_array) \\\n{\t.iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n\t.name = xname, \\\n\t.access = SNDRV_CTL_ELEM_ACCESS_TLV_READ | \\\n\t\tSNDRV_CTL_ELEM_ACCESS_READWRITE, \\\n\t.tlv.p = (xtlv_array), \\\n\t.info = tda7419_vol_info, \\\n\t.get = tda7419_vol_get, \\\n\t.put = tda7419_vol_put, \\\n\t.private_value = TDA7419_DOUBLE_R_VALUE(xregl, xregr, xmask, \\\n\t\t\t\t\t\txmin, xmax, xthresh, \\\n\t\t\t\t\t\txinvert), \\\n}\n\nstatic const char * const enum_src_sel[] = {\n\t\"QD\", \"SE1\", \"SE2\", \"SE3\", \"SE\", \"Mute\", \"Mute\", \"Mute\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_main_src_sel,\n\tTDA7419_MAIN_SRC_REG, TDA7419_MAIN_SRC_SEL, enum_src_sel);\nstatic const struct snd_kcontrol_new soc_mux_main_src_sel =\n\tSOC_DAPM_ENUM(\"Main Source Select\", soc_enum_main_src_sel);\nstatic DECLARE_TLV_DB_SCALE(tlv_src_gain, 0, 100, 0);\nstatic DECLARE_TLV_DB_SCALE(tlv_loudness_atten, -1500, 100, 0);\nstatic const char * const enum_loudness_center_freq[] = {\n\t\"Flat\", \"400 Hz\", \"800 Hz\", \"2400 Hz\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_loudness_center_freq,\n\tTDA7419_LOUDNESS_REG, TDA7419_LOUDNESS_CENTER_FREQ,\n\tenum_loudness_center_freq);\nstatic const char * const enum_mute_influence[] = {\n\t\"Pin and IIC\", \"IIC\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_mute_influence,\n\tTDA7419_MUTE_CLK_REG, TDA7419_MUTE_INFLUENCE, enum_mute_influence);\nstatic const char * const enum_soft_mute_time[] = {\n\t\"0.48 ms\", \"0.96 ms\", \"123 ms\", \"123 ms\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_soft_mute_time,\n\tTDA7419_MUTE_CLK_REG, TDA7419_SOFT_MUTE_TIME, enum_soft_mute_time);\nstatic const char * const enum_soft_step_time[] = {\n\t\"0.160 ms\", \"0.321 ms\", \"0.642 ms\", \"1.28 ms\",\n\t\"2.56 ms\", \"5.12 ms\", \"10.24 ms\", \"20.48 ms\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_soft_step_time,\n\tTDA7419_MUTE_CLK_REG, TDA7419_SOFT_STEP_TIME, enum_soft_step_time);\nstatic DECLARE_TLV_DB_SCALE(tlv_volume, -8000, 100, 1);\nstatic const char * const enum_treble_center_freq[] = {\n\t\"10.0 kHz\", \"12.5 kHz\", \"15.0 kHz\", \"17.5 kHz\"};\nstatic DECLARE_TLV_DB_SCALE(tlv_filter, -1500, 100, 0);\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_treble_center_freq,\n\tTDA7419_TREBLE_REG, TDA7419_TREBLE_CENTER_FREQ,\n\tenum_treble_center_freq);\nstatic const char * const enum_ref_out_select[] = {\n\t\"External Vref (4 V)\", \"Internal Vref (3.3 V)\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_ref_out_select,\n\tTDA7419_TREBLE_REG, TDA7419_REF_OUT_SELECT, enum_ref_out_select);\nstatic const char * const enum_middle_q_factor[] = {\n\t\"0.5\", \"0.75\", \"1.0\", \"1.25\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_middle_q_factor,\n\tTDA7419_MIDDLE_REG, TDA7419_MIDDLE_Q_FACTOR, enum_middle_q_factor);\nstatic const char * const enum_bass_q_factor[] = {\n\t\"1.0\", \"1.25\", \"1.5\", \"2.0\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_bass_q_factor,\n\tTDA7419_BASS_REG, TDA7419_BASS_Q_FACTOR, enum_bass_q_factor);\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_second_src_sel,\n\tTDA7419_SECOND_SRC_REG, TDA7419_SECOND_SRC_SEL, enum_src_sel);\nstatic const struct snd_kcontrol_new soc_mux_second_src_sel =\n\tSOC_DAPM_ENUM(\"Second Source Select\", soc_enum_second_src_sel);\nstatic const char * const enum_rear_spkr_src[] = {\n\t\"Main\", \"Second\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_rear_spkr_src,\n\tTDA7419_SECOND_SRC_REG, TDA7419_REAR_SPKR_SRC, enum_rear_spkr_src);\nstatic const struct snd_kcontrol_new soc_mux_rear_spkr_src =\n\tSOC_DAPM_ENUM(\"Rear Speaker Source\", soc_enum_rear_spkr_src);\nstatic const char * const enum_sub_cut_off_freq[] = {\n\t\"Flat\", \"80 Hz\", \"120 Hz\", \"160 Hz\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_sub_cut_off_freq,\n\tTDA7419_SUB_MID_BASS_REG, TDA7419_SUB_CUT_OFF_FREQ,\n\tenum_sub_cut_off_freq);\nstatic const char * const enum_middle_center_freq[] = {\n\t\"500 Hz\", \"1000 Hz\", \"1500 Hz\", \"2500 Hz\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_middle_center_freq,\n\tTDA7419_SUB_MID_BASS_REG, TDA7419_MIDDLE_CENTER_FREQ,\n\tenum_middle_center_freq);\nstatic const char * const enum_bass_center_freq[] = {\n\t\"60 Hz\", \"80 Hz\", \"100 Hz\", \"200 Hz\"};\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_bass_center_freq,\n\tTDA7419_SUB_MID_BASS_REG, TDA7419_BASS_CENTER_FREQ,\n\tenum_bass_center_freq);\nstatic const char * const enum_sa_q_factor[] = {\n\t\"3.5\", \"1.75\" };\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_sa_q_factor,\n\tTDA7419_SA_CLK_AC_REG, TDA7419_SA_Q_FACTOR, enum_sa_q_factor);\nstatic const char * const enum_reset_mode[] = {\n\t\"IIC\", \"Auto\" };\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_reset_mode,\n\tTDA7419_SA_CLK_AC_REG, TDA7419_RESET_MODE, enum_reset_mode);\nstatic const char * const enum_sa_src[] = {\n\t\"Bass\", \"In Gain\" };\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_sa_src,\n\tTDA7419_SA_CLK_AC_REG, TDA7419_SA_SOURCE, enum_sa_src);\nstatic const char * const enum_clk_src[] = {\n\t\"Internal\", \"External\" };\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_clk_src,\n\tTDA7419_SA_CLK_AC_REG, TDA7419_CLK_SOURCE, enum_clk_src);\nstatic const char * const enum_coupling_mode[] = {\n\t\"DC Coupling (without HPF)\", \"AC Coupling after In Gain\",\n\t\"DC Coupling (with HPF)\", \"AC Coupling after Bass\" };\nstatic SOC_ENUM_SINGLE_DECL(soc_enum_coupling_mode,\n\tTDA7419_SA_CLK_AC_REG, TDA7419_COUPLING_MODE, enum_coupling_mode);\n\n \nstatic struct snd_kcontrol_new tda7419_controls[] = {\nSOC_SINGLE_TLV(\"Main Source Capture Volume\", TDA7419_MAIN_SRC_REG,\n\t       TDA7419_MAIN_SRC_GAIN, 15, 0, tlv_src_gain),\nSOC_SINGLE(\"Main Source AutoZero Switch\", TDA7419_MAIN_SRC_REG,\n\t   TDA7419_MAIN_SRC_AUTOZERO, 1, 1),\nSOC_SINGLE_TLV(\"Loudness Playback Volume\", TDA7419_LOUDNESS_REG,\n\t       TDA7419_LOUDNESS_ATTEN, 15, 1, tlv_loudness_atten),\nSOC_ENUM(\"Loudness Center Frequency\", soc_enum_loudness_center_freq),\nSOC_SINGLE(\"Loudness High Boost Switch\", TDA7419_LOUDNESS_REG,\n\t   TDA7419_LOUDNESS_BOOST, 1, 1),\nSOC_SINGLE(\"Loudness Soft Step Switch\", TDA7419_LOUDNESS_REG,\n\t   TDA7419_LOUDNESS_SOFT_STEP, 1, 1),\nSOC_SINGLE(\"Soft Mute Switch\", TDA7419_MUTE_CLK_REG, TDA7419_SOFT_MUTE, 1, 1),\nSOC_ENUM(\"Mute Influence\", soc_enum_mute_influence),\nSOC_ENUM(\"Soft Mute Time\", soc_enum_soft_mute_time),\nSOC_ENUM(\"Soft Step Time\", soc_enum_soft_step_time),\nSOC_SINGLE(\"Clock Fast Mode Switch\", TDA7419_MUTE_CLK_REG,\n\t   TDA7419_CLK_FAST_MODE, 1, 1),\nTDA7419_SINGLE_TLV(\"Master Playback Volume\", TDA7419_VOLUME_REG,\n\t\t   0x7f, -80, 15, 0x10, 0, tlv_volume),\nSOC_SINGLE(\"Volume Soft Step Switch\", TDA7419_VOLUME_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nTDA7419_SINGLE_TLV(\"Treble Playback Volume\", TDA7419_TREBLE_REG,\n\t\t   0x1f, -15, 15, 0x10, 1, tlv_filter),\nSOC_ENUM(\"Treble Center Frequency\", soc_enum_treble_center_freq),\nSOC_ENUM(\"Reference Output Select\", soc_enum_ref_out_select),\nTDA7419_SINGLE_TLV(\"Middle Playback Volume\", TDA7419_MIDDLE_REG,\n\t\t   0x1f, -15, 15, 0x10, 1, tlv_filter),\nSOC_ENUM(\"Middle Q Factor\", soc_enum_middle_q_factor),\nSOC_SINGLE(\"Middle Soft Step Switch\", TDA7419_MIDDLE_REG,\n\t   TDA7419_MIDDLE_SOFT_STEP, 1, 1),\nTDA7419_SINGLE_TLV(\"Bass Playback Volume\", TDA7419_BASS_REG,\n\t\t   0x1f, -15, 15, 0x10, 1, tlv_filter),\nSOC_ENUM(\"Bass Q Factor\", soc_enum_bass_q_factor),\nSOC_SINGLE(\"Bass Soft Step Switch\", TDA7419_BASS_REG,\n\t   TDA7419_BASS_SOFT_STEP, 1, 1),\nSOC_SINGLE_TLV(\"Second Source Capture Volume\", TDA7419_SECOND_SRC_REG,\n\t       TDA7419_SECOND_SRC_GAIN, 15, 0, tlv_src_gain),\nSOC_ENUM(\"Subwoofer Cut-off Frequency\", soc_enum_sub_cut_off_freq),\nSOC_ENUM(\"Middle Center Frequency\", soc_enum_middle_center_freq),\nSOC_ENUM(\"Bass Center Frequency\", soc_enum_bass_center_freq),\nSOC_SINGLE(\"Bass DC Mode Switch\", TDA7419_SUB_MID_BASS_REG,\n\t   TDA7419_BASS_DC_MODE, 1, 1),\nSOC_SINGLE(\"Smoothing Filter Switch\", TDA7419_SUB_MID_BASS_REG,\n\t   TDA7419_SMOOTHING_FILTER, 1, 1),\nTDA7419_DOUBLE_R_TLV(\"Front Speaker Playback Volume\", TDA7419_ATTENUATOR_LF_REG,\n\t\t     TDA7419_ATTENUATOR_RF_REG, 0x7f, -80, 15, 0x10, 0,\n\t\t     tlv_volume),\nSOC_SINGLE(\"Left Front Soft Step Switch\", TDA7419_ATTENUATOR_LF_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nSOC_SINGLE(\"Right Front Soft Step Switch\", TDA7419_ATTENUATOR_RF_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nTDA7419_DOUBLE_R_TLV(\"Rear Speaker Playback Volume\", TDA7419_ATTENUATOR_LR_REG,\n\t\t     TDA7419_ATTENUATOR_RR_REG, 0x7f, -80, 15, 0x10, 0,\n\t\t     tlv_volume),\nSOC_SINGLE(\"Left Rear Soft Step Switch\", TDA7419_ATTENUATOR_LR_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nSOC_SINGLE(\"Right Rear Soft Step Switch\", TDA7419_ATTENUATOR_RR_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nTDA7419_SINGLE_TLV(\"Mixing Capture Volume\", TDA7419_MIXING_LEVEL_REG,\n\t\t   0x7f, -80, 15, 0x10, 0, tlv_volume),\nSOC_SINGLE(\"Mixing Level Soft Step Switch\", TDA7419_MIXING_LEVEL_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nTDA7419_SINGLE_TLV(\"Subwoofer Playback Volume\", TDA7419_ATTENUATOR_SUB_REG,\n\t\t   0x7f, -80, 15, 0x10, 0, tlv_volume),\nSOC_SINGLE(\"Subwoofer Soft Step Switch\", TDA7419_ATTENUATOR_SUB_REG,\n\t   TDA7419_VOLUME_SOFT_STEP, 1, 1),\nSOC_ENUM(\"Spectrum Analyzer Q Factor\", soc_enum_sa_q_factor),\nSOC_ENUM(\"Spectrum Analyzer Reset Mode\", soc_enum_reset_mode),\nSOC_ENUM(\"Spectrum Analyzer Source\", soc_enum_sa_src),\nSOC_SINGLE(\"Spectrum Analyzer Run Switch\", TDA7419_SA_CLK_AC_REG,\n\t   TDA7419_SA_RUN, 1, 1),\nSOC_SINGLE(\"Spectrum Analyzer Reset Switch\", TDA7419_SA_CLK_AC_REG,\n\t   TDA7419_RESET, 1, 1),\nSOC_ENUM(\"Clock Source\", soc_enum_clk_src),\nSOC_ENUM(\"Coupling Mode\", soc_enum_coupling_mode),\n};\n\nstatic const struct snd_kcontrol_new soc_mixer_lf_output_controls[] = {\n\tSOC_DAPM_SINGLE(\"Mix to LF Speaker Switch\",\n\t\t\tTDA7419_MIXING_GAIN_REG,\n\t\t\tTDA7419_MIX_LF, 1, 1),\n};\n\nstatic const struct snd_kcontrol_new soc_mixer_rf_output_controls[] = {\n\tSOC_DAPM_SINGLE(\"Mix to RF Speaker Switch\",\n\t\t\tTDA7419_MIXING_GAIN_REG,\n\t\t\tTDA7419_MIX_RF, 1, 1),\n};\n\nstatic const struct snd_kcontrol_new soc_mix_enable_switch_controls[] = {\n\tSOC_DAPM_SINGLE(\"Switch\", TDA7419_MIXING_GAIN_REG,\n\t\t\tTDA7419_MIX_ENABLE, 1, 1),\n};\n\nstatic const struct snd_kcontrol_new soc_sub_enable_switch_controls[] = {\n\tSOC_DAPM_SINGLE(\"Switch\", TDA7419_MIXING_GAIN_REG,\n\t\t\tTDA7419_MIX_ENABLE, 1, 1),\n};\n\nstatic const struct snd_soc_dapm_widget tda7419_dapm_widgets[] = {\n\tSND_SOC_DAPM_INPUT(\"SE3L\"),\n\tSND_SOC_DAPM_INPUT(\"SE3R\"),\n\tSND_SOC_DAPM_INPUT(\"SE2L\"),\n\tSND_SOC_DAPM_INPUT(\"SE2R\"),\n\tSND_SOC_DAPM_INPUT(\"SE1L\"),\n\tSND_SOC_DAPM_INPUT(\"SE1R\"),\n\tSND_SOC_DAPM_INPUT(\"DIFFL\"),\n\tSND_SOC_DAPM_INPUT(\"DIFFR\"),\n\tSND_SOC_DAPM_INPUT(\"MIX\"),\n\n\tSND_SOC_DAPM_MUX(\"Main Source Select\", SND_SOC_NOPM,\n\t\t\t 0, 0, &soc_mux_main_src_sel),\n\tSND_SOC_DAPM_MUX(\"Second Source Select\", SND_SOC_NOPM,\n\t\t\t 0, 0, &soc_mux_second_src_sel),\n\tSND_SOC_DAPM_MUX(\"Rear Speaker Source\", SND_SOC_NOPM,\n\t\t\t 0, 0, &soc_mux_rear_spkr_src),\n\n\tSND_SOC_DAPM_SWITCH(\"Mix Enable\", SND_SOC_NOPM,\n\t\t\t0, 0, &soc_mix_enable_switch_controls[0]),\n\tSND_SOC_DAPM_MIXER_NAMED_CTL(\"LF Output Mixer\", SND_SOC_NOPM,\n\t\t\t0, 0, &soc_mixer_lf_output_controls[0],\n\t\t\tARRAY_SIZE(soc_mixer_lf_output_controls)),\n\tSND_SOC_DAPM_MIXER_NAMED_CTL(\"RF Output Mixer\", SND_SOC_NOPM,\n\t\t\t0, 0, &soc_mixer_rf_output_controls[0],\n\t\t\tARRAY_SIZE(soc_mixer_rf_output_controls)),\n\n\tSND_SOC_DAPM_SWITCH(\"Subwoofer Enable\",\n\t\t\tSND_SOC_NOPM, 0, 0,\n\t\t\t&soc_sub_enable_switch_controls[0]),\n\n\tSND_SOC_DAPM_OUTPUT(\"OUTLF\"),\n\tSND_SOC_DAPM_OUTPUT(\"OUTRF\"),\n\tSND_SOC_DAPM_OUTPUT(\"OUTLR\"),\n\tSND_SOC_DAPM_OUTPUT(\"OUTRR\"),\n\tSND_SOC_DAPM_OUTPUT(\"OUTSW\"),\n};\n\nstatic const struct snd_soc_dapm_route tda7419_dapm_routes[] = {\n\t{\"Main Source Select\", \"SE3\", \"SE3L\"},\n\t{\"Main Source Select\", \"SE3\", \"SE3R\"},\n\t{\"Main Source Select\", \"SE2\", \"SE2L\"},\n\t{\"Main Source Select\", \"SE2\", \"SE2R\"},\n\t{\"Main Source Select\", \"SE1\", \"SE1L\"},\n\t{\"Main Source Select\", \"SE1\", \"SE1R\"},\n\t{\"Main Source Select\", \"SE\", \"DIFFL\"},\n\t{\"Main Source Select\", \"SE\", \"DIFFR\"},\n\t{\"Main Source Select\", \"QD\", \"DIFFL\"},\n\t{\"Main Source Select\", \"QD\", \"DIFFR\"},\n\n\t{\"Second Source Select\", \"SE3\", \"SE3L\"},\n\t{\"Second Source Select\", \"SE3\", \"SE3R\"},\n\t{\"Second Source Select\", \"SE2\", \"SE2L\"},\n\t{\"Second Source Select\", \"SE2\", \"SE2R\"},\n\t{\"Second Source Select\", \"SE1\", \"SE1L\"},\n\t{\"Second Source Select\", \"SE1\", \"SE1R\"},\n\t{\"Second Source Select\", \"SE\", \"DIFFL\"},\n\t{\"Second Source Select\", \"SE\", \"DIFFR\"},\n\t{\"Second Source Select\", \"QD\", \"DIFFL\"},\n\t{\"Second Source Select\", \"QD\", \"DIFFR\"},\n\n\t{\"Rear Speaker Source\", \"Main\", \"Main Source Select\"},\n\t{\"Rear Speaker Source\", \"Second\", \"Second Source Select\"},\n\n\t{\"Subwoofer Enable\", \"Switch\", \"Main Source Select\"},\n\n\t{\"Mix Enable\", \"Switch\", \"MIX\"},\n\n\t{\"LF Output Mixer\", NULL, \"Main Source Select\"},\n\t{\"LF Output Mixer\", \"Mix to LF Speaker Switch\", \"Mix Enable\"},\n\t{\"RF Output Mixer\", NULL, \"Main Source Select\"},\n\t{\"RF Output Mixer\", \"Mix to RF Speaker Switch\", \"Mix Enable\"},\n\n\t{\"OUTLF\", NULL, \"LF Output Mixer\"},\n\t{\"OUTRF\", NULL, \"RF Output Mixer\"},\n\t{\"OUTLR\", NULL, \"Rear Speaker Source\"},\n\t{\"OUTRR\", NULL, \"Rear Speaker Source\"},\n\t{\"OUTSW\", NULL, \"Subwoofer Enable\"},\n};\n\nstatic const struct snd_soc_component_driver tda7419_component_driver = {\n\t.name\t\t\t= \"tda7419\",\n\t.controls\t\t= tda7419_controls,\n\t.num_controls\t\t= ARRAY_SIZE(tda7419_controls),\n\t.dapm_widgets\t\t= tda7419_dapm_widgets,\n\t.num_dapm_widgets\t= ARRAY_SIZE(tda7419_dapm_widgets),\n\t.dapm_routes\t\t= tda7419_dapm_routes,\n\t.num_dapm_routes\t= ARRAY_SIZE(tda7419_dapm_routes),\n};\n\nstatic int tda7419_probe(struct i2c_client *i2c)\n{\n\tstruct tda7419_data *tda7419;\n\tint i, ret;\n\n\ttda7419 = devm_kzalloc(&i2c->dev,\n\t\t\t       sizeof(struct tda7419_data),\n\t\t\t       GFP_KERNEL);\n\tif (tda7419 == NULL)\n\t\treturn -ENOMEM;\n\n\ti2c_set_clientdata(i2c, tda7419);\n\n\ttda7419->regmap = devm_regmap_init_i2c(i2c, &tda7419_regmap_config);\n\tif (IS_ERR(tda7419->regmap)) {\n\t\tret = PTR_ERR(tda7419->regmap);\n\t\tdev_err(&i2c->dev, \"error initializing regmap: %d\\n\",\n\t\t\t\tret);\n\t\treturn ret;\n\t}\n\n\t \n\tfor (i = 0; i < ARRAY_SIZE(tda7419_regmap_defaults); i++)\n\t\tregmap_write(tda7419->regmap,\n\t\t\t     tda7419_regmap_defaults[i].reg,\n\t\t\t     tda7419_regmap_defaults[i].def);\n\n\tret = devm_snd_soc_register_component(&i2c->dev,\n\t\t&tda7419_component_driver, NULL, 0);\n\tif (ret < 0) {\n\t\tdev_err(&i2c->dev, \"error registering component: %d\\n\",\n\t\t\t\tret);\n\t}\n\n\treturn ret;\n}\n\nstatic const struct i2c_device_id tda7419_i2c_id[] = {\n\t{ \"tda7419\", 0 },\n\t{ }\n};\nMODULE_DEVICE_TABLE(i2c, tda7419_i2c_id);\n\nstatic const struct of_device_id tda7419_of_match[] = {\n\t{ .compatible = \"st,tda7419\" },\n\t{ },\n};\n\nstatic struct i2c_driver tda7419_driver = {\n\t.driver = {\n\t\t.name   = \"tda7419\",\n\t\t.of_match_table = tda7419_of_match,\n\t},\n\t.probe          = tda7419_probe,\n\t.id_table       = tda7419_i2c_id,\n};\n\nmodule_i2c_driver(tda7419_driver);\n\nMODULE_AUTHOR(\"Matt Porter <mporter@konsulko.com>\");\nMODULE_DESCRIPTION(\"TDA7419 audio processor driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}