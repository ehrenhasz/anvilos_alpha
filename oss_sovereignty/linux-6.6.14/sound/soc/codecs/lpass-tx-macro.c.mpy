{
  "module_name": "lpass-tx-macro.c",
  "hash_id": "61ed6b769257ecdae2383ecde740a743213ff7207f83ab87906bb8a1482c86e4",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/lpass-tx-macro.c",
  "human_readable_source": "\n\n\n#include <linux/module.h>\n#include <linux/init.h>\n#include <linux/clk.h>\n#include <linux/io.h>\n#include <linux/platform_device.h>\n#include <linux/pm_runtime.h>\n#include <linux/regmap.h>\n#include <sound/soc.h>\n#include <sound/soc-dapm.h>\n#include <sound/tlv.h>\n#include <linux/of_clk.h>\n#include <linux/clk-provider.h>\n\n#include \"lpass-macro-common.h\"\n\n#define CDC_TX_CLK_RST_CTRL_MCLK_CONTROL (0x0000)\n#define CDC_TX_MCLK_EN_MASK\t\tBIT(0)\n#define CDC_TX_MCLK_ENABLE\t\tBIT(0)\n#define CDC_TX_CLK_RST_CTRL_FS_CNT_CONTROL (0x0004)\n#define CDC_TX_FS_CNT_EN_MASK\t\tBIT(0)\n#define CDC_TX_FS_CNT_ENABLE\t\tBIT(0)\n#define CDC_TX_CLK_RST_CTRL_SWR_CONTROL\t(0x0008)\n#define CDC_TX_SWR_RESET_MASK\t\tBIT(1)\n#define CDC_TX_SWR_RESET_ENABLE\t\tBIT(1)\n#define CDC_TX_SWR_CLK_EN_MASK\t\tBIT(0)\n#define CDC_TX_SWR_CLK_ENABLE\t\tBIT(0)\n#define CDC_TX_TOP_CSR_TOP_CFG0\t\t(0x0080)\n#define CDC_TX_TOP_CSR_ANC_CFG\t\t(0x0084)\n#define CDC_TX_TOP_CSR_SWR_CTRL\t\t(0x0088)\n#define CDC_TX_TOP_CSR_FREQ_MCLK\t(0x0090)\n#define CDC_TX_TOP_CSR_DEBUG_BUS\t(0x0094)\n#define CDC_TX_TOP_CSR_DEBUG_EN\t\t(0x0098)\n#define CDC_TX_TOP_CSR_TX_I2S_CTL\t(0x00A4)\n#define CDC_TX_TOP_CSR_I2S_CLK\t\t(0x00A8)\n#define CDC_TX_TOP_CSR_I2S_RESET\t(0x00AC)\n#define CDC_TX_TOP_CSR_SWR_DMICn_CTL(n)\t(0x00C0 + n * 0x4)\n#define CDC_TX_TOP_CSR_SWR_DMIC0_CTL\t(0x00C0)\n#define CDC_TX_SWR_DMIC_CLK_SEL_MASK\tGENMASK(3, 1)\n#define CDC_TX_TOP_CSR_SWR_DMIC1_CTL\t(0x00C4)\n#define CDC_TX_TOP_CSR_SWR_DMIC2_CTL\t(0x00C8)\n#define CDC_TX_TOP_CSR_SWR_DMIC3_CTL\t(0x00CC)\n#define CDC_TX_TOP_CSR_SWR_AMIC0_CTL\t(0x00D0)\n#define CDC_TX_TOP_CSR_SWR_AMIC1_CTL\t(0x00D4)\n#define CDC_TX_INP_MUX_ADC_MUXn_CFG0(n)\t(0x0100 + 0x8 * n)\n#define CDC_TX_MACRO_SWR_MIC_MUX_SEL_MASK GENMASK(3, 0)\n#define CDC_TX_MACRO_DMIC_MUX_SEL_MASK GENMASK(7, 4)\n#define CDC_TX_INP_MUX_ADC_MUX0_CFG0\t(0x0100)\n#define CDC_TX_INP_MUX_ADC_MUXn_CFG1(n)\t(0x0104 + 0x8 * n)\n#define CDC_TX_INP_MUX_ADC_MUX0_CFG1\t(0x0104)\n#define CDC_TX_INP_MUX_ADC_MUX1_CFG0\t(0x0108)\n#define CDC_TX_INP_MUX_ADC_MUX1_CFG1\t(0x010C)\n#define CDC_TX_INP_MUX_ADC_MUX2_CFG0\t(0x0110)\n#define CDC_TX_INP_MUX_ADC_MUX2_CFG1\t(0x0114)\n#define CDC_TX_INP_MUX_ADC_MUX3_CFG0\t(0x0118)\n#define CDC_TX_INP_MUX_ADC_MUX3_CFG1\t(0x011C)\n#define CDC_TX_INP_MUX_ADC_MUX4_CFG0\t(0x0120)\n#define CDC_TX_INP_MUX_ADC_MUX4_CFG1\t(0x0124)\n#define CDC_TX_INP_MUX_ADC_MUX5_CFG0\t(0x0128)\n#define CDC_TX_INP_MUX_ADC_MUX5_CFG1\t(0x012C)\n#define CDC_TX_INP_MUX_ADC_MUX6_CFG0\t(0x0130)\n#define CDC_TX_INP_MUX_ADC_MUX6_CFG1\t(0x0134)\n#define CDC_TX_INP_MUX_ADC_MUX7_CFG0\t(0x0138)\n#define CDC_TX_INP_MUX_ADC_MUX7_CFG1\t(0x013C)\n#define CDC_TX_ANC0_CLK_RESET_CTL\t(0x0200)\n#define CDC_TX_ANC0_MODE_1_CTL\t\t(0x0204)\n#define CDC_TX_ANC0_MODE_2_CTL\t\t(0x0208)\n#define CDC_TX_ANC0_FF_SHIFT\t\t(0x020C)\n#define CDC_TX_ANC0_FB_SHIFT\t\t(0x0210)\n#define CDC_TX_ANC0_LPF_FF_A_CTL\t(0x0214)\n#define CDC_TX_ANC0_LPF_FF_B_CTL\t(0x0218)\n#define CDC_TX_ANC0_LPF_FB_CTL\t\t(0x021C)\n#define CDC_TX_ANC0_SMLPF_CTL\t\t(0x0220)\n#define CDC_TX_ANC0_DCFLT_SHIFT_CTL\t(0x0224)\n#define CDC_TX_ANC0_IIR_ADAPT_CTL\t(0x0228)\n#define CDC_TX_ANC0_IIR_COEFF_1_CTL\t(0x022C)\n#define CDC_TX_ANC0_IIR_COEFF_2_CTL\t(0x0230)\n#define CDC_TX_ANC0_FF_A_GAIN_CTL\t(0x0234)\n#define CDC_TX_ANC0_FF_B_GAIN_CTL\t(0x0238)\n#define CDC_TX_ANC0_FB_GAIN_CTL\t\t(0x023C)\n#define CDC_TXn_TX_PATH_CTL(n)\t\t(0x0400 + 0x80 * n)\n#define CDC_TXn_PCM_RATE_MASK\t\tGENMASK(3, 0)\n#define CDC_TXn_PGA_MUTE_MASK\t\tBIT(4)\n#define CDC_TXn_CLK_EN_MASK\t\tBIT(5)\n#define CDC_TX0_TX_PATH_CTL\t\t(0x0400)\n#define CDC_TXn_TX_PATH_CFG0(n)\t\t(0x0404 + 0x80 * n)\n#define CDC_TX0_TX_PATH_CFG0\t\t(0x0404)\n#define CDC_TXn_PH_EN_MASK\t\tBIT(0)\n#define CDC_TXn_ADC_MODE_MASK\t\tGENMASK(2, 1)\n#define CDC_TXn_HPF_CUT_FREQ_MASK\tGENMASK(6, 5)\n#define CDC_TXn_ADC_DMIC_SEL_MASK\tBIT(7)\n#define CDC_TX0_TX_PATH_CFG1\t\t(0x0408)\n#define CDC_TXn_TX_VOL_CTL(n)\t\t(0x040C + 0x80 * n)\n#define CDC_TX0_TX_VOL_CTL\t\t(0x040C)\n#define CDC_TX0_TX_PATH_SEC0\t\t(0x0410)\n#define CDC_TX0_TX_PATH_SEC1\t\t(0x0414)\n#define CDC_TXn_TX_PATH_SEC2(n)\t\t(0x0418 + 0x80 * n)\n#define CDC_TXn_HPF_F_CHANGE_MASK\t BIT(1)\n#define CDC_TXn_HPF_ZERO_GATE_MASK\t BIT(0)\n#define CDC_TX0_TX_PATH_SEC2\t\t(0x0418)\n#define CDC_TX0_TX_PATH_SEC3\t\t(0x041C)\n#define CDC_TX0_TX_PATH_SEC4\t\t(0x0420)\n#define CDC_TX0_TX_PATH_SEC5\t\t(0x0424)\n#define CDC_TX0_TX_PATH_SEC6\t\t(0x0428)\n#define CDC_TX0_TX_PATH_SEC7\t\t(0x042C)\n#define CDC_TX0_MBHC_CTL_EN_MASK\tBIT(6)\n#define CDC_TX1_TX_PATH_CTL\t\t(0x0480)\n#define CDC_TX1_TX_PATH_CFG0\t\t(0x0484)\n#define CDC_TX1_TX_PATH_CFG1\t\t(0x0488)\n#define CDC_TX1_TX_VOL_CTL\t\t(0x048C)\n#define CDC_TX1_TX_PATH_SEC0\t\t(0x0490)\n#define CDC_TX1_TX_PATH_SEC1\t\t(0x0494)\n#define CDC_TX1_TX_PATH_SEC2\t\t(0x0498)\n#define CDC_TX1_TX_PATH_SEC3\t\t(0x049C)\n#define CDC_TX1_TX_PATH_SEC4\t\t(0x04A0)\n#define CDC_TX1_TX_PATH_SEC5\t\t(0x04A4)\n#define CDC_TX1_TX_PATH_SEC6\t\t(0x04A8)\n#define CDC_TX2_TX_PATH_CTL\t\t(0x0500)\n#define CDC_TX2_TX_PATH_CFG0\t\t(0x0504)\n#define CDC_TX2_TX_PATH_CFG1\t\t(0x0508)\n#define CDC_TX2_TX_VOL_CTL\t\t(0x050C)\n#define CDC_TX2_TX_PATH_SEC0\t\t(0x0510)\n#define CDC_TX2_TX_PATH_SEC1\t\t(0x0514)\n#define CDC_TX2_TX_PATH_SEC2\t\t(0x0518)\n#define CDC_TX2_TX_PATH_SEC3\t\t(0x051C)\n#define CDC_TX2_TX_PATH_SEC4\t\t(0x0520)\n#define CDC_TX2_TX_PATH_SEC5\t\t(0x0524)\n#define CDC_TX2_TX_PATH_SEC6\t\t(0x0528)\n#define CDC_TX3_TX_PATH_CTL\t\t(0x0580)\n#define CDC_TX3_TX_PATH_CFG0\t\t(0x0584)\n#define CDC_TX3_TX_PATH_CFG1\t\t(0x0588)\n#define CDC_TX3_TX_VOL_CTL\t\t(0x058C)\n#define CDC_TX3_TX_PATH_SEC0\t\t(0x0590)\n#define CDC_TX3_TX_PATH_SEC1\t\t(0x0594)\n#define CDC_TX3_TX_PATH_SEC2\t\t(0x0598)\n#define CDC_TX3_TX_PATH_SEC3\t\t(0x059C)\n#define CDC_TX3_TX_PATH_SEC4\t\t(0x05A0)\n#define CDC_TX3_TX_PATH_SEC5\t\t(0x05A4)\n#define CDC_TX3_TX_PATH_SEC6\t\t(0x05A8)\n#define CDC_TX4_TX_PATH_CTL\t\t(0x0600)\n#define CDC_TX4_TX_PATH_CFG0\t\t(0x0604)\n#define CDC_TX4_TX_PATH_CFG1\t\t(0x0608)\n#define CDC_TX4_TX_VOL_CTL\t\t(0x060C)\n#define CDC_TX4_TX_PATH_SEC0\t\t(0x0610)\n#define CDC_TX4_TX_PATH_SEC1\t\t(0x0614)\n#define CDC_TX4_TX_PATH_SEC2\t\t(0x0618)\n#define CDC_TX4_TX_PATH_SEC3\t\t(0x061C)\n#define CDC_TX4_TX_PATH_SEC4\t\t(0x0620)\n#define CDC_TX4_TX_PATH_SEC5\t\t(0x0624)\n#define CDC_TX4_TX_PATH_SEC6\t\t(0x0628)\n#define CDC_TX5_TX_PATH_CTL\t\t(0x0680)\n#define CDC_TX5_TX_PATH_CFG0\t\t(0x0684)\n#define CDC_TX5_TX_PATH_CFG1\t\t(0x0688)\n#define CDC_TX5_TX_VOL_CTL\t\t(0x068C)\n#define CDC_TX5_TX_PATH_SEC0\t\t(0x0690)\n#define CDC_TX5_TX_PATH_SEC1\t\t(0x0694)\n#define CDC_TX5_TX_PATH_SEC2\t\t(0x0698)\n#define CDC_TX5_TX_PATH_SEC3\t\t(0x069C)\n#define CDC_TX5_TX_PATH_SEC4\t\t(0x06A0)\n#define CDC_TX5_TX_PATH_SEC5\t\t(0x06A4)\n#define CDC_TX5_TX_PATH_SEC6\t\t(0x06A8)\n#define CDC_TX6_TX_PATH_CTL\t\t(0x0700)\n#define CDC_TX6_TX_PATH_CFG0\t\t(0x0704)\n#define CDC_TX6_TX_PATH_CFG1\t\t(0x0708)\n#define CDC_TX6_TX_VOL_CTL\t\t(0x070C)\n#define CDC_TX6_TX_PATH_SEC0\t\t(0x0710)\n#define CDC_TX6_TX_PATH_SEC1\t\t(0x0714)\n#define CDC_TX6_TX_PATH_SEC2\t\t(0x0718)\n#define CDC_TX6_TX_PATH_SEC3\t\t(0x071C)\n#define CDC_TX6_TX_PATH_SEC4\t\t(0x0720)\n#define CDC_TX6_TX_PATH_SEC5\t\t(0x0724)\n#define CDC_TX6_TX_PATH_SEC6\t\t(0x0728)\n#define CDC_TX7_TX_PATH_CTL\t\t(0x0780)\n#define CDC_TX7_TX_PATH_CFG0\t\t(0x0784)\n#define CDC_TX7_TX_PATH_CFG1\t\t(0x0788)\n#define CDC_TX7_TX_VOL_CTL\t\t(0x078C)\n#define CDC_TX7_TX_PATH_SEC0\t\t(0x0790)\n#define CDC_TX7_TX_PATH_SEC1\t\t(0x0794)\n#define CDC_TX7_TX_PATH_SEC2\t\t(0x0798)\n#define CDC_TX7_TX_PATH_SEC3\t\t(0x079C)\n#define CDC_TX7_TX_PATH_SEC4\t\t(0x07A0)\n#define CDC_TX7_TX_PATH_SEC5\t\t(0x07A4)\n#define CDC_TX7_TX_PATH_SEC6\t\t(0x07A8)\n#define TX_MAX_OFFSET\t\t\t(0x07A8)\n\n#define TX_MACRO_RATES (SNDRV_PCM_RATE_8000 | SNDRV_PCM_RATE_16000 |\\\n\t\t\tSNDRV_PCM_RATE_32000 | SNDRV_PCM_RATE_48000 |\\\n\t\t\tSNDRV_PCM_RATE_96000 | SNDRV_PCM_RATE_192000)\n#define TX_MACRO_FORMATS (SNDRV_PCM_FMTBIT_S16_LE |\\\n\t\t\tSNDRV_PCM_FMTBIT_S24_LE |\\\n\t\t\tSNDRV_PCM_FMTBIT_S24_3LE)\n\n#define  CF_MIN_3DB_4HZ\t\t\t0x0\n#define  CF_MIN_3DB_75HZ\t\t0x1\n#define  CF_MIN_3DB_150HZ\t\t0x2\n#define\tTX_ADC_MAX\t5\n#define TX_ADC_TO_DMIC(n) ((n - TX_ADC_MAX)/2)\n#define NUM_DECIMATORS 8\n#define TX_NUM_CLKS_MAX\t5\n#define TX_MACRO_DMIC_UNMUTE_DELAY_MS\t40\n#define TX_MACRO_AMIC_UNMUTE_DELAY_MS\t100\n#define TX_MACRO_DMIC_HPF_DELAY_MS\t300\n#define TX_MACRO_AMIC_HPF_DELAY_MS\t300\n#define MCLK_FREQ\t\t19200000\n\nenum {\n\tTX_MACRO_AIF_INVALID = 0,\n\tTX_MACRO_AIF1_CAP,\n\tTX_MACRO_AIF2_CAP,\n\tTX_MACRO_AIF3_CAP,\n\tTX_MACRO_MAX_DAIS\n};\n\nenum {\n\tTX_MACRO_DEC0,\n\tTX_MACRO_DEC1,\n\tTX_MACRO_DEC2,\n\tTX_MACRO_DEC3,\n\tTX_MACRO_DEC4,\n\tTX_MACRO_DEC5,\n\tTX_MACRO_DEC6,\n\tTX_MACRO_DEC7,\n\tTX_MACRO_DEC_MAX,\n};\n\nenum {\n\tTX_MACRO_CLK_DIV_2,\n\tTX_MACRO_CLK_DIV_3,\n\tTX_MACRO_CLK_DIV_4,\n\tTX_MACRO_CLK_DIV_6,\n\tTX_MACRO_CLK_DIV_8,\n\tTX_MACRO_CLK_DIV_16,\n};\n\nenum {\n\tMSM_DMIC,\n\tSWR_MIC,\n\tANC_FB_TUNE1\n};\n\nstruct tx_mute_work {\n\tstruct tx_macro *tx;\n\tu8 decimator;\n\tstruct delayed_work dwork;\n};\n\nstruct hpf_work {\n\tstruct tx_macro *tx;\n\tu8 decimator;\n\tu8 hpf_cut_off_freq;\n\tstruct delayed_work dwork;\n};\n\nstruct tx_macro {\n\tstruct device *dev;\n\tstruct snd_soc_component *component;\n\tstruct hpf_work tx_hpf_work[NUM_DECIMATORS];\n\tstruct tx_mute_work tx_mute_dwork[NUM_DECIMATORS];\n\tunsigned long active_ch_mask[TX_MACRO_MAX_DAIS];\n\tunsigned long active_ch_cnt[TX_MACRO_MAX_DAIS];\n\tint active_decimator[TX_MACRO_MAX_DAIS];\n\tstruct regmap *regmap;\n\tstruct clk *mclk;\n\tstruct clk *npl;\n\tstruct clk *macro;\n\tstruct clk *dcodec;\n\tstruct clk *fsgen;\n\tstruct clk_hw hw;\n\tbool dec_active[NUM_DECIMATORS];\n\tint tx_mclk_users;\n\tu16 dmic_clk_div;\n\tbool bcs_enable;\n\tint dec_mode[NUM_DECIMATORS];\n\tstruct lpass_macro *pds;\n\tbool bcs_clk_en;\n};\n#define to_tx_macro(_hw) container_of(_hw, struct tx_macro, hw)\n\nstatic const DECLARE_TLV_DB_SCALE(digital_gain, -8400, 100, -8400);\n\nstatic struct reg_default tx_defaults[] = {\n\t \n\t{ CDC_TX_CLK_RST_CTRL_MCLK_CONTROL, 0x00 },\n\t{ CDC_TX_CLK_RST_CTRL_FS_CNT_CONTROL, 0x00 },\n\t{ CDC_TX_CLK_RST_CTRL_SWR_CONTROL, 0x00},\n\t{ CDC_TX_TOP_CSR_TOP_CFG0, 0x00},\n\t{ CDC_TX_TOP_CSR_ANC_CFG, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_CTRL, 0x00},\n\t{ CDC_TX_TOP_CSR_FREQ_MCLK, 0x00},\n\t{ CDC_TX_TOP_CSR_DEBUG_BUS, 0x00},\n\t{ CDC_TX_TOP_CSR_DEBUG_EN, 0x00},\n\t{ CDC_TX_TOP_CSR_TX_I2S_CTL, 0x0C},\n\t{ CDC_TX_TOP_CSR_I2S_CLK, 0x00},\n\t{ CDC_TX_TOP_CSR_I2S_RESET, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_DMIC0_CTL, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_DMIC1_CTL, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_DMIC2_CTL, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_DMIC3_CTL, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_AMIC0_CTL, 0x00},\n\t{ CDC_TX_TOP_CSR_SWR_AMIC1_CTL, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX0_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX0_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX1_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX1_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX2_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX2_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX3_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX3_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX4_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX4_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX5_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX5_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX6_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX6_CFG1, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX7_CFG0, 0x00},\n\t{ CDC_TX_INP_MUX_ADC_MUX7_CFG1, 0x00},\n\t{ CDC_TX_ANC0_CLK_RESET_CTL, 0x00},\n\t{ CDC_TX_ANC0_MODE_1_CTL, 0x00},\n\t{ CDC_TX_ANC0_MODE_2_CTL, 0x00},\n\t{ CDC_TX_ANC0_FF_SHIFT, 0x00},\n\t{ CDC_TX_ANC0_FB_SHIFT, 0x00},\n\t{ CDC_TX_ANC0_LPF_FF_A_CTL, 0x00},\n\t{ CDC_TX_ANC0_LPF_FF_B_CTL, 0x00},\n\t{ CDC_TX_ANC0_LPF_FB_CTL, 0x00},\n\t{ CDC_TX_ANC0_SMLPF_CTL, 0x00},\n\t{ CDC_TX_ANC0_DCFLT_SHIFT_CTL, 0x00},\n\t{ CDC_TX_ANC0_IIR_ADAPT_CTL, 0x00},\n\t{ CDC_TX_ANC0_IIR_COEFF_1_CTL, 0x00},\n\t{ CDC_TX_ANC0_IIR_COEFF_2_CTL, 0x00},\n\t{ CDC_TX_ANC0_FF_A_GAIN_CTL, 0x00},\n\t{ CDC_TX_ANC0_FF_B_GAIN_CTL, 0x00},\n\t{ CDC_TX_ANC0_FB_GAIN_CTL, 0x00},\n\t{ CDC_TX0_TX_PATH_CTL, 0x04},\n\t{ CDC_TX0_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX0_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX0_TX_VOL_CTL, 0x00},\n\t{ CDC_TX0_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX0_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX0_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX0_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX0_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX0_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX0_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX0_TX_PATH_SEC7, 0x25},\n\t{ CDC_TX1_TX_PATH_CTL, 0x04},\n\t{ CDC_TX1_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX1_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX1_TX_VOL_CTL, 0x00},\n\t{ CDC_TX1_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX1_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX1_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX1_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX1_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX1_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX1_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX2_TX_PATH_CTL, 0x04},\n\t{ CDC_TX2_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX2_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX2_TX_VOL_CTL, 0x00},\n\t{ CDC_TX2_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX2_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX2_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX2_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX2_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX2_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX2_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX3_TX_PATH_CTL, 0x04},\n\t{ CDC_TX3_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX3_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX3_TX_VOL_CTL, 0x00},\n\t{ CDC_TX3_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX3_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX3_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX3_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX3_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX3_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX3_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX4_TX_PATH_CTL, 0x04},\n\t{ CDC_TX4_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX4_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX4_TX_VOL_CTL, 0x00},\n\t{ CDC_TX4_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX4_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX4_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX4_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX4_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX4_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX4_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX5_TX_PATH_CTL, 0x04},\n\t{ CDC_TX5_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX5_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX5_TX_VOL_CTL, 0x00},\n\t{ CDC_TX5_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX5_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX5_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX5_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX5_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX5_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX5_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX6_TX_PATH_CTL, 0x04},\n\t{ CDC_TX6_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX6_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX6_TX_VOL_CTL, 0x00},\n\t{ CDC_TX6_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX6_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX6_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX6_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX6_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX6_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX6_TX_PATH_SEC6, 0x00},\n\t{ CDC_TX7_TX_PATH_CTL, 0x04},\n\t{ CDC_TX7_TX_PATH_CFG0, 0x10},\n\t{ CDC_TX7_TX_PATH_CFG1, 0x0B},\n\t{ CDC_TX7_TX_VOL_CTL, 0x00},\n\t{ CDC_TX7_TX_PATH_SEC0, 0x00},\n\t{ CDC_TX7_TX_PATH_SEC1, 0x00},\n\t{ CDC_TX7_TX_PATH_SEC2, 0x01},\n\t{ CDC_TX7_TX_PATH_SEC3, 0x3C},\n\t{ CDC_TX7_TX_PATH_SEC4, 0x20},\n\t{ CDC_TX7_TX_PATH_SEC5, 0x00},\n\t{ CDC_TX7_TX_PATH_SEC6, 0x00},\n};\n\nstatic bool tx_is_volatile_register(struct device *dev, unsigned int reg)\n{\n\t \n\tswitch (reg) {\n\tcase CDC_TX_TOP_CSR_SWR_DMIC0_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC1_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC2_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC3_CTL:\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nstatic bool tx_is_rw_register(struct device *dev, unsigned int reg)\n{\n\tswitch (reg) {\n\tcase CDC_TX_CLK_RST_CTRL_MCLK_CONTROL:\n\tcase CDC_TX_CLK_RST_CTRL_FS_CNT_CONTROL:\n\tcase CDC_TX_CLK_RST_CTRL_SWR_CONTROL:\n\tcase CDC_TX_TOP_CSR_TOP_CFG0:\n\tcase CDC_TX_TOP_CSR_ANC_CFG:\n\tcase CDC_TX_TOP_CSR_SWR_CTRL:\n\tcase CDC_TX_TOP_CSR_FREQ_MCLK:\n\tcase CDC_TX_TOP_CSR_DEBUG_BUS:\n\tcase CDC_TX_TOP_CSR_DEBUG_EN:\n\tcase CDC_TX_TOP_CSR_TX_I2S_CTL:\n\tcase CDC_TX_TOP_CSR_I2S_CLK:\n\tcase CDC_TX_TOP_CSR_I2S_RESET:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC0_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC1_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC2_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_DMIC3_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_AMIC0_CTL:\n\tcase CDC_TX_TOP_CSR_SWR_AMIC1_CTL:\n\tcase CDC_TX_ANC0_CLK_RESET_CTL:\n\tcase CDC_TX_ANC0_MODE_1_CTL:\n\tcase CDC_TX_ANC0_MODE_2_CTL:\n\tcase CDC_TX_ANC0_FF_SHIFT:\n\tcase CDC_TX_ANC0_FB_SHIFT:\n\tcase CDC_TX_ANC0_LPF_FF_A_CTL:\n\tcase CDC_TX_ANC0_LPF_FF_B_CTL:\n\tcase CDC_TX_ANC0_LPF_FB_CTL:\n\tcase CDC_TX_ANC0_SMLPF_CTL:\n\tcase CDC_TX_ANC0_DCFLT_SHIFT_CTL:\n\tcase CDC_TX_ANC0_IIR_ADAPT_CTL:\n\tcase CDC_TX_ANC0_IIR_COEFF_1_CTL:\n\tcase CDC_TX_ANC0_IIR_COEFF_2_CTL:\n\tcase CDC_TX_ANC0_FF_A_GAIN_CTL:\n\tcase CDC_TX_ANC0_FF_B_GAIN_CTL:\n\tcase CDC_TX_ANC0_FB_GAIN_CTL:\n\tcase CDC_TX_INP_MUX_ADC_MUX0_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX0_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX1_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX1_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX2_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX2_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX3_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX3_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX4_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX4_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX5_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX5_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX6_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX6_CFG1:\n\tcase CDC_TX_INP_MUX_ADC_MUX7_CFG0:\n\tcase CDC_TX_INP_MUX_ADC_MUX7_CFG1:\n\tcase CDC_TX0_TX_PATH_CTL:\n\tcase CDC_TX0_TX_PATH_CFG0:\n\tcase CDC_TX0_TX_PATH_CFG1:\n\tcase CDC_TX0_TX_VOL_CTL:\n\tcase CDC_TX0_TX_PATH_SEC0:\n\tcase CDC_TX0_TX_PATH_SEC1:\n\tcase CDC_TX0_TX_PATH_SEC2:\n\tcase CDC_TX0_TX_PATH_SEC3:\n\tcase CDC_TX0_TX_PATH_SEC4:\n\tcase CDC_TX0_TX_PATH_SEC5:\n\tcase CDC_TX0_TX_PATH_SEC6:\n\tcase CDC_TX0_TX_PATH_SEC7:\n\tcase CDC_TX1_TX_PATH_CTL:\n\tcase CDC_TX1_TX_PATH_CFG0:\n\tcase CDC_TX1_TX_PATH_CFG1:\n\tcase CDC_TX1_TX_VOL_CTL:\n\tcase CDC_TX1_TX_PATH_SEC0:\n\tcase CDC_TX1_TX_PATH_SEC1:\n\tcase CDC_TX1_TX_PATH_SEC2:\n\tcase CDC_TX1_TX_PATH_SEC3:\n\tcase CDC_TX1_TX_PATH_SEC4:\n\tcase CDC_TX1_TX_PATH_SEC5:\n\tcase CDC_TX1_TX_PATH_SEC6:\n\tcase CDC_TX2_TX_PATH_CTL:\n\tcase CDC_TX2_TX_PATH_CFG0:\n\tcase CDC_TX2_TX_PATH_CFG1:\n\tcase CDC_TX2_TX_VOL_CTL:\n\tcase CDC_TX2_TX_PATH_SEC0:\n\tcase CDC_TX2_TX_PATH_SEC1:\n\tcase CDC_TX2_TX_PATH_SEC2:\n\tcase CDC_TX2_TX_PATH_SEC3:\n\tcase CDC_TX2_TX_PATH_SEC4:\n\tcase CDC_TX2_TX_PATH_SEC5:\n\tcase CDC_TX2_TX_PATH_SEC6:\n\tcase CDC_TX3_TX_PATH_CTL:\n\tcase CDC_TX3_TX_PATH_CFG0:\n\tcase CDC_TX3_TX_PATH_CFG1:\n\tcase CDC_TX3_TX_VOL_CTL:\n\tcase CDC_TX3_TX_PATH_SEC0:\n\tcase CDC_TX3_TX_PATH_SEC1:\n\tcase CDC_TX3_TX_PATH_SEC2:\n\tcase CDC_TX3_TX_PATH_SEC3:\n\tcase CDC_TX3_TX_PATH_SEC4:\n\tcase CDC_TX3_TX_PATH_SEC5:\n\tcase CDC_TX3_TX_PATH_SEC6:\n\tcase CDC_TX4_TX_PATH_CTL:\n\tcase CDC_TX4_TX_PATH_CFG0:\n\tcase CDC_TX4_TX_PATH_CFG1:\n\tcase CDC_TX4_TX_VOL_CTL:\n\tcase CDC_TX4_TX_PATH_SEC0:\n\tcase CDC_TX4_TX_PATH_SEC1:\n\tcase CDC_TX4_TX_PATH_SEC2:\n\tcase CDC_TX4_TX_PATH_SEC3:\n\tcase CDC_TX4_TX_PATH_SEC4:\n\tcase CDC_TX4_TX_PATH_SEC5:\n\tcase CDC_TX4_TX_PATH_SEC6:\n\tcase CDC_TX5_TX_PATH_CTL:\n\tcase CDC_TX5_TX_PATH_CFG0:\n\tcase CDC_TX5_TX_PATH_CFG1:\n\tcase CDC_TX5_TX_VOL_CTL:\n\tcase CDC_TX5_TX_PATH_SEC0:\n\tcase CDC_TX5_TX_PATH_SEC1:\n\tcase CDC_TX5_TX_PATH_SEC2:\n\tcase CDC_TX5_TX_PATH_SEC3:\n\tcase CDC_TX5_TX_PATH_SEC4:\n\tcase CDC_TX5_TX_PATH_SEC5:\n\tcase CDC_TX5_TX_PATH_SEC6:\n\tcase CDC_TX6_TX_PATH_CTL:\n\tcase CDC_TX6_TX_PATH_CFG0:\n\tcase CDC_TX6_TX_PATH_CFG1:\n\tcase CDC_TX6_TX_VOL_CTL:\n\tcase CDC_TX6_TX_PATH_SEC0:\n\tcase CDC_TX6_TX_PATH_SEC1:\n\tcase CDC_TX6_TX_PATH_SEC2:\n\tcase CDC_TX6_TX_PATH_SEC3:\n\tcase CDC_TX6_TX_PATH_SEC4:\n\tcase CDC_TX6_TX_PATH_SEC5:\n\tcase CDC_TX6_TX_PATH_SEC6:\n\tcase CDC_TX7_TX_PATH_CTL:\n\tcase CDC_TX7_TX_PATH_CFG0:\n\tcase CDC_TX7_TX_PATH_CFG1:\n\tcase CDC_TX7_TX_VOL_CTL:\n\tcase CDC_TX7_TX_PATH_SEC0:\n\tcase CDC_TX7_TX_PATH_SEC1:\n\tcase CDC_TX7_TX_PATH_SEC2:\n\tcase CDC_TX7_TX_PATH_SEC3:\n\tcase CDC_TX7_TX_PATH_SEC4:\n\tcase CDC_TX7_TX_PATH_SEC5:\n\tcase CDC_TX7_TX_PATH_SEC6:\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nstatic const struct regmap_config tx_regmap_config = {\n\t.name = \"tx_macro\",\n\t.reg_bits = 16,\n\t.val_bits = 32,\n\t.reg_stride = 4,\n\t.cache_type = REGCACHE_FLAT,\n\t.max_register = TX_MAX_OFFSET,\n\t.reg_defaults = tx_defaults,\n\t.num_reg_defaults = ARRAY_SIZE(tx_defaults),\n\t.writeable_reg = tx_is_rw_register,\n\t.volatile_reg = tx_is_volatile_register,\n\t.readable_reg = tx_is_rw_register,\n};\n\nstatic int tx_macro_mclk_enable(struct tx_macro *tx,\n\t\t\t\tbool mclk_enable)\n{\n\tstruct regmap *regmap = tx->regmap;\n\n\tif (mclk_enable) {\n\t\tif (tx->tx_mclk_users == 0) {\n\t\t\t \n\t\t\tregmap_update_bits(regmap, CDC_TX_TOP_CSR_FREQ_MCLK, 0x01, 0x01);\n\t\t\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_MCLK_CONTROL,\n\t\t\t\t\t   CDC_TX_MCLK_EN_MASK,\n\t\t\t\t\t   CDC_TX_MCLK_ENABLE);\n\t\t\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_FS_CNT_CONTROL,\n\t\t\t\t\t   CDC_TX_FS_CNT_EN_MASK,\n\t\t\t\t\t   CDC_TX_FS_CNT_ENABLE);\n\t\t\tregcache_mark_dirty(regmap);\n\t\t\tregcache_sync(regmap);\n\t\t}\n\t\ttx->tx_mclk_users++;\n\t} else {\n\t\tif (tx->tx_mclk_users <= 0) {\n\t\t\tdev_err(tx->dev, \"clock already disabled\\n\");\n\t\t\ttx->tx_mclk_users = 0;\n\t\t\tgoto exit;\n\t\t}\n\t\ttx->tx_mclk_users--;\n\t\tif (tx->tx_mclk_users == 0) {\n\t\t\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_FS_CNT_CONTROL,\n\t\t\t\t\t   CDC_TX_FS_CNT_EN_MASK, 0x0);\n\t\t\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_MCLK_CONTROL,\n\t\t\t\t\t   CDC_TX_MCLK_EN_MASK, 0x0);\n\t\t}\n\t}\nexit:\n\treturn 0;\n}\n\nstatic bool is_amic_enabled(struct snd_soc_component *component, u8 decimator)\n{\n\tu16 adc_mux_reg, adc_reg, adc_n;\n\n\tadc_mux_reg = CDC_TX_INP_MUX_ADC_MUXn_CFG1(decimator);\n\n\tif (snd_soc_component_read(component, adc_mux_reg) & SWR_MIC) {\n\t\tadc_reg = CDC_TX_INP_MUX_ADC_MUXn_CFG0(decimator);\n\t\tadc_n = snd_soc_component_read_field(component, adc_reg,\n\t\t\t\t\t     CDC_TX_MACRO_SWR_MIC_MUX_SEL_MASK);\n\t\tif (adc_n < TX_ADC_MAX)\n\t\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nstatic void tx_macro_tx_hpf_corner_freq_callback(struct work_struct *work)\n{\n\tstruct delayed_work *hpf_delayed_work;\n\tstruct hpf_work *hpf_work;\n\tstruct tx_macro *tx;\n\tstruct snd_soc_component *component;\n\tu16 dec_cfg_reg, hpf_gate_reg;\n\tu8 hpf_cut_off_freq;\n\n\thpf_delayed_work = to_delayed_work(work);\n\thpf_work = container_of(hpf_delayed_work, struct hpf_work, dwork);\n\ttx = hpf_work->tx;\n\tcomponent = tx->component;\n\thpf_cut_off_freq = hpf_work->hpf_cut_off_freq;\n\n\tdec_cfg_reg = CDC_TXn_TX_PATH_CFG0(hpf_work->decimator);\n\thpf_gate_reg = CDC_TXn_TX_PATH_SEC2(hpf_work->decimator);\n\n\tif (is_amic_enabled(component, hpf_work->decimator)) {\n\t\tsnd_soc_component_write_field(component,\n\t\t\t\tdec_cfg_reg,\n\t\t\t\tCDC_TXn_HPF_CUT_FREQ_MASK,\n\t\t\t\thpf_cut_off_freq);\n\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x02);\n\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x01);\n\t} else {\n\t\tsnd_soc_component_write_field(component, dec_cfg_reg,\n\t\t\t\t\t      CDC_TXn_HPF_CUT_FREQ_MASK,\n\t\t\t\t\t      hpf_cut_off_freq);\n\t\tsnd_soc_component_write_field(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK, 0x1);\n\t\t \n\t\tusleep_range(1000, 1010);\n\t\tsnd_soc_component_write_field(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK, 0x0);\n\t}\n}\n\nstatic void tx_macro_mute_update_callback(struct work_struct *work)\n{\n\tstruct tx_mute_work *tx_mute_dwork;\n\tstruct snd_soc_component *component;\n\tstruct tx_macro *tx;\n\tstruct delayed_work *delayed_work;\n\tu8 decimator;\n\n\tdelayed_work = to_delayed_work(work);\n\ttx_mute_dwork = container_of(delayed_work, struct tx_mute_work, dwork);\n\ttx = tx_mute_dwork->tx;\n\tcomponent = tx->component;\n\tdecimator = tx_mute_dwork->decimator;\n\n\tsnd_soc_component_write_field(component, CDC_TXn_TX_PATH_CTL(decimator),\n\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x0);\n}\n\nstatic int tx_macro_mclk_event(struct snd_soc_dapm_widget *w,\n\t\t\t       struct snd_kcontrol *kcontrol, int event)\n{\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(w->dapm);\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\ttx_macro_mclk_enable(tx, true);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\ttx_macro_mclk_enable(tx, false);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn 0;\n}\n\nstatic int tx_macro_put_dec_enum(struct snd_kcontrol *kcontrol,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_widget *widget = snd_soc_dapm_kcontrol_widget(kcontrol);\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(widget->dapm);\n\tstruct soc_enum *e = (struct soc_enum *)kcontrol->private_value;\n\tunsigned int val, dmic;\n\tu16 mic_sel_reg;\n\tu16 dmic_clk_reg;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tval = ucontrol->value.enumerated.item[0];\n\tif (val >= e->items)\n\t\treturn -EINVAL;\n\n\tswitch (e->reg) {\n\tcase CDC_TX_INP_MUX_ADC_MUX0_CFG0:\n\t\tmic_sel_reg = CDC_TX0_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX1_CFG0:\n\t\tmic_sel_reg = CDC_TX1_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX2_CFG0:\n\t\tmic_sel_reg = CDC_TX2_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX3_CFG0:\n\t\tmic_sel_reg = CDC_TX3_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX4_CFG0:\n\t\tmic_sel_reg = CDC_TX4_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX5_CFG0:\n\t\tmic_sel_reg = CDC_TX5_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX6_CFG0:\n\t\tmic_sel_reg = CDC_TX6_TX_PATH_CFG0;\n\t\tbreak;\n\tcase CDC_TX_INP_MUX_ADC_MUX7_CFG0:\n\t\tmic_sel_reg = CDC_TX7_TX_PATH_CFG0;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(component->dev, \"Error in configuration!!\\n\");\n\t\treturn -EINVAL;\n\t}\n\n\tif (val != 0) {\n\t\tif (widget->shift) {  \n\t\t\tsnd_soc_component_write_field(component, mic_sel_reg,\n\t\t\t\t\t\t      CDC_TXn_ADC_DMIC_SEL_MASK, 1);\n\t\t} else if (val < 5) {\n\t\t\tsnd_soc_component_write_field(component, mic_sel_reg,\n\t\t\t\t\t\t      CDC_TXn_ADC_DMIC_SEL_MASK, 0);\n\t\t} else {\n\t\t\tsnd_soc_component_write_field(component, mic_sel_reg,\n\t\t\t\t\t\t      CDC_TXn_ADC_DMIC_SEL_MASK, 1);\n\t\t\tdmic = TX_ADC_TO_DMIC(val);\n\t\t\tdmic_clk_reg = CDC_TX_TOP_CSR_SWR_DMICn_CTL(dmic);\n\t\t\tsnd_soc_component_write_field(component, dmic_clk_reg,\n\t\t\t\t\t\tCDC_TX_SWR_DMIC_CLK_SEL_MASK,\n\t\t\t\t\t\ttx->dmic_clk_div);\n\t\t}\n\t}\n\n\treturn snd_soc_dapm_put_enum_double(kcontrol, ucontrol);\n}\n\nstatic int tx_macro_tx_mixer_get(struct snd_kcontrol *kcontrol,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_widget *widget = snd_soc_dapm_kcontrol_widget(kcontrol);\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(widget->dapm);\n\tstruct soc_mixer_control *mc = (struct soc_mixer_control *)kcontrol->private_value;\n\tu32 dai_id = widget->shift;\n\tu32 dec_id = mc->shift;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tif (test_bit(dec_id, &tx->active_ch_mask[dai_id]))\n\t\tucontrol->value.integer.value[0] = 1;\n\telse\n\t\tucontrol->value.integer.value[0] = 0;\n\n\treturn 0;\n}\n\nstatic int tx_macro_tx_mixer_put(struct snd_kcontrol *kcontrol,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_dapm_widget *widget = snd_soc_dapm_kcontrol_widget(kcontrol);\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(widget->dapm);\n\tstruct snd_soc_dapm_update *update = NULL;\n\tstruct soc_mixer_control *mc = (struct soc_mixer_control *)kcontrol->private_value;\n\tu32 dai_id = widget->shift;\n\tu32 dec_id = mc->shift;\n\tu32 enable = ucontrol->value.integer.value[0];\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tif (enable) {\n\t\tif (tx->active_decimator[dai_id] == dec_id)\n\t\t\treturn 0;\n\n\t\tset_bit(dec_id, &tx->active_ch_mask[dai_id]);\n\t\ttx->active_ch_cnt[dai_id]++;\n\t\ttx->active_decimator[dai_id] = dec_id;\n\t} else {\n\t\tif (tx->active_decimator[dai_id] == -1)\n\t\t\treturn 0;\n\n\t\ttx->active_ch_cnt[dai_id]--;\n\t\tclear_bit(dec_id, &tx->active_ch_mask[dai_id]);\n\t\ttx->active_decimator[dai_id] = -1;\n\t}\n\tsnd_soc_dapm_mixer_update_power(widget->dapm, kcontrol, enable, update);\n\n\treturn 1;\n}\n\nstatic int tx_macro_enable_dec(struct snd_soc_dapm_widget *w,\n\t\t\t       struct snd_kcontrol *kcontrol, int event)\n{\n\tstruct snd_soc_component *component = snd_soc_dapm_to_component(w->dapm);\n\tu8 decimator;\n\tu16 tx_vol_ctl_reg, dec_cfg_reg, hpf_gate_reg, tx_gain_ctl_reg;\n\tu8 hpf_cut_off_freq;\n\tint hpf_delay = TX_MACRO_DMIC_HPF_DELAY_MS;\n\tint unmute_delay = TX_MACRO_DMIC_UNMUTE_DELAY_MS;\n\tu16 adc_mux_reg, adc_reg, adc_n, dmic;\n\tu16 dmic_clk_reg;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tdecimator = w->shift;\n\ttx_vol_ctl_reg = CDC_TXn_TX_PATH_CTL(decimator);\n\thpf_gate_reg = CDC_TXn_TX_PATH_SEC2(decimator);\n\tdec_cfg_reg = CDC_TXn_TX_PATH_CFG0(decimator);\n\ttx_gain_ctl_reg = CDC_TXn_TX_VOL_CTL(decimator);\n\n\tswitch (event) {\n\tcase SND_SOC_DAPM_PRE_PMU:\n\t\tadc_mux_reg = CDC_TX_INP_MUX_ADC_MUXn_CFG1(decimator);\n\t\tif (snd_soc_component_read(component, adc_mux_reg) & SWR_MIC) {\n\t\t\tadc_reg = CDC_TX_INP_MUX_ADC_MUXn_CFG0(decimator);\n\t\t\tadc_n = snd_soc_component_read(component, adc_reg) &\n\t\t\t\tCDC_TX_MACRO_SWR_MIC_MUX_SEL_MASK;\n\t\t\tif (adc_n >= TX_ADC_MAX) {\n\t\t\t\tdmic = TX_ADC_TO_DMIC(adc_n);\n\t\t\t\tdmic_clk_reg = CDC_TX_TOP_CSR_SWR_DMICn_CTL(dmic);\n\n\t\t\t\tsnd_soc_component_write_field(component, dmic_clk_reg,\n\t\t\t\t\t\t\tCDC_TX_SWR_DMIC_CLK_SEL_MASK,\n\t\t\t\t\t\t\ttx->dmic_clk_div);\n\t\t\t}\n\t\t}\n\t\tsnd_soc_component_write_field(component, dec_cfg_reg,\n\t\t\t\t\t      CDC_TXn_ADC_MODE_MASK,\n\t\t\t\t\t      tx->dec_mode[decimator]);\n\t\t \n\t\tsnd_soc_component_write_field(component, tx_vol_ctl_reg,\n\t\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x1);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMU:\n\t\tsnd_soc_component_write_field(component, tx_vol_ctl_reg,\n\t\t\t\t\t     CDC_TXn_CLK_EN_MASK, 0x1);\n\t\tif (!is_amic_enabled(component, decimator)) {\n\t\t\tsnd_soc_component_update_bits(component, hpf_gate_reg, 0x01, 0x00);\n\t\t\t \n\t\t\tusleep_range(1000, 1010);\n\t\t}\n\t\thpf_cut_off_freq = snd_soc_component_read_field(component, dec_cfg_reg,\n\t\t\t\t\t\t\t\tCDC_TXn_HPF_CUT_FREQ_MASK);\n\n\t\ttx->tx_hpf_work[decimator].hpf_cut_off_freq =\n\t\t\t\t\t\thpf_cut_off_freq;\n\n\t\tif (hpf_cut_off_freq != CF_MIN_3DB_150HZ)\n\t\t\tsnd_soc_component_write_field(component, dec_cfg_reg,\n\t\t\t\t\t\t      CDC_TXn_HPF_CUT_FREQ_MASK,\n\t\t\t\t\t\t      CF_MIN_3DB_150HZ);\n\n\t\tif (is_amic_enabled(component, decimator)) {\n\t\t\thpf_delay = TX_MACRO_AMIC_HPF_DELAY_MS;\n\t\t\tunmute_delay = TX_MACRO_AMIC_UNMUTE_DELAY_MS;\n\t\t}\n\t\t \n\t\tqueue_delayed_work(system_freezable_wq,\n\t\t\t\t   &tx->tx_mute_dwork[decimator].dwork,\n\t\t\t\t   msecs_to_jiffies(unmute_delay));\n\t\tif (tx->tx_hpf_work[decimator].hpf_cut_off_freq != CF_MIN_3DB_150HZ) {\n\t\t\tqueue_delayed_work(system_freezable_wq,\n\t\t\t\t&tx->tx_hpf_work[decimator].dwork,\n\t\t\t\tmsecs_to_jiffies(hpf_delay));\n\t\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x02);\n\t\t\tif (!is_amic_enabled(component, decimator))\n\t\t\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t\t      0x00);\n\t\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x01);\n\n\t\t\t \n\t\t\tusleep_range(6000, 6010);\n\t\t}\n\t\t \n\t\tsnd_soc_component_write(component, tx_gain_ctl_reg,\n\t\t\t      snd_soc_component_read(component,\n\t\t\t\t\ttx_gain_ctl_reg));\n\t\tif (tx->bcs_enable) {\n\t\t\tsnd_soc_component_update_bits(component, dec_cfg_reg,\n\t\t\t\t\t0x01, 0x01);\n\t\t\ttx->bcs_clk_en = true;\n\t\t}\n\t\tbreak;\n\tcase SND_SOC_DAPM_PRE_PMD:\n\t\thpf_cut_off_freq =\n\t\t\ttx->tx_hpf_work[decimator].hpf_cut_off_freq;\n\t\tsnd_soc_component_write_field(component, tx_vol_ctl_reg,\n\t\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x1);\n\t\tif (cancel_delayed_work_sync(\n\t\t    &tx->tx_hpf_work[decimator].dwork)) {\n\t\t\tif (hpf_cut_off_freq != CF_MIN_3DB_150HZ) {\n\t\t\t\tsnd_soc_component_write_field(\n\t\t\t\t\t\tcomponent, dec_cfg_reg,\n\t\t\t\t\t\tCDC_TXn_HPF_CUT_FREQ_MASK,\n\t\t\t\t\t\thpf_cut_off_freq);\n\t\t\t\tif (is_amic_enabled(component, decimator))\n\t\t\t\t\tsnd_soc_component_update_bits(component,\n\t\t\t\t\t      hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x02);\n\t\t\t\telse\n\t\t\t\t\tsnd_soc_component_update_bits(component,\n\t\t\t\t\t      hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x03);\n\n\t\t\t\t \n\t\t\t\tusleep_range(1000, 1010);\n\t\t\t\tsnd_soc_component_update_bits(component, hpf_gate_reg,\n\t\t\t\t\t      CDC_TXn_HPF_F_CHANGE_MASK |\n\t\t\t\t\t      CDC_TXn_HPF_ZERO_GATE_MASK,\n\t\t\t\t\t      0x1);\n\t\t\t}\n\t\t}\n\t\tcancel_delayed_work_sync(&tx->tx_mute_dwork[decimator].dwork);\n\t\tbreak;\n\tcase SND_SOC_DAPM_POST_PMD:\n\t\tsnd_soc_component_write_field(component, tx_vol_ctl_reg,\n\t\t\t\t\t      CDC_TXn_CLK_EN_MASK, 0x0);\n\t\tsnd_soc_component_write_field(component, dec_cfg_reg,\n\t\t\t\t\t      CDC_TXn_ADC_MODE_MASK, 0x0);\n\t\tsnd_soc_component_write_field(component, tx_vol_ctl_reg,\n\t\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x0);\n\t\tif (tx->bcs_enable) {\n\t\t\tsnd_soc_component_write_field(component, dec_cfg_reg,\n\t\t\t\t\t\t      CDC_TXn_PH_EN_MASK, 0x0);\n\t\t\tsnd_soc_component_write_field(component,\n\t\t\t\t\t\t      CDC_TX0_TX_PATH_SEC7,\n\t\t\t\t\t\t      CDC_TX0_MBHC_CTL_EN_MASK,\n\t\t\t\t\t\t      0x0);\n\t\t\ttx->bcs_clk_en = false;\n\t\t}\n\t\tbreak;\n\t}\n\treturn 0;\n}\n\nstatic int tx_macro_dec_mode_get(struct snd_kcontrol *kcontrol,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kcontrol);\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\tstruct soc_enum *e = (struct soc_enum *)kcontrol->private_value;\n\tint path = e->shift_l;\n\n\tucontrol->value.integer.value[0] = tx->dec_mode[path];\n\n\treturn 0;\n}\n\nstatic int tx_macro_dec_mode_put(struct snd_kcontrol *kcontrol,\n\t\t\t\t struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kcontrol);\n\tint value = ucontrol->value.integer.value[0];\n\tstruct soc_enum *e = (struct soc_enum *)kcontrol->private_value;\n\tint path = e->shift_l;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tif (tx->dec_mode[path] == value)\n\t\treturn 0;\n\n\ttx->dec_mode[path] = value;\n\n\treturn 1;\n}\n\nstatic int tx_macro_get_bcs(struct snd_kcontrol *kcontrol,\n\t\t\t    struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kcontrol);\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tucontrol->value.integer.value[0] = tx->bcs_enable;\n\n\treturn 0;\n}\n\nstatic int tx_macro_set_bcs(struct snd_kcontrol *kcontrol,\n\t\t\t    struct snd_ctl_elem_value *ucontrol)\n{\n\tstruct snd_soc_component *component = snd_soc_kcontrol_component(kcontrol);\n\tint value = ucontrol->value.integer.value[0];\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\ttx->bcs_enable = value;\n\n\treturn 0;\n}\n\nstatic int tx_macro_hw_params(struct snd_pcm_substream *substream,\n\t\t\t      struct snd_pcm_hw_params *params,\n\t\t\t      struct snd_soc_dai *dai)\n{\n\tstruct snd_soc_component *component = dai->component;\n\tu32 sample_rate;\n\tu8 decimator;\n\tint tx_fs_rate;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tsample_rate = params_rate(params);\n\tswitch (sample_rate) {\n\tcase 8000:\n\t\ttx_fs_rate = 0;\n\t\tbreak;\n\tcase 16000:\n\t\ttx_fs_rate = 1;\n\t\tbreak;\n\tcase 32000:\n\t\ttx_fs_rate = 3;\n\t\tbreak;\n\tcase 48000:\n\t\ttx_fs_rate = 4;\n\t\tbreak;\n\tcase 96000:\n\t\ttx_fs_rate = 5;\n\t\tbreak;\n\tcase 192000:\n\t\ttx_fs_rate = 6;\n\t\tbreak;\n\tcase 384000:\n\t\ttx_fs_rate = 7;\n\t\tbreak;\n\tdefault:\n\t\tdev_err(component->dev, \"%s: Invalid TX sample rate: %d\\n\",\n\t\t\t__func__, params_rate(params));\n\t\treturn -EINVAL;\n\t}\n\n\tfor_each_set_bit(decimator, &tx->active_ch_mask[dai->id], TX_MACRO_DEC_MAX)\n\t\tsnd_soc_component_update_bits(component, CDC_TXn_TX_PATH_CTL(decimator),\n\t\t\t\t\t      CDC_TXn_PCM_RATE_MASK,\n\t\t\t\t\t      tx_fs_rate);\n\treturn 0;\n}\n\nstatic int tx_macro_get_channel_map(struct snd_soc_dai *dai,\n\t\t\t\t    unsigned int *tx_num, unsigned int *tx_slot,\n\t\t\t\t    unsigned int *rx_num, unsigned int *rx_slot)\n{\n\tstruct snd_soc_component *component = dai->component;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\n\tswitch (dai->id) {\n\tcase TX_MACRO_AIF1_CAP:\n\tcase TX_MACRO_AIF2_CAP:\n\tcase TX_MACRO_AIF3_CAP:\n\t\t*tx_slot = tx->active_ch_mask[dai->id];\n\t\t*tx_num = tx->active_ch_cnt[dai->id];\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n\treturn 0;\n}\n\nstatic int tx_macro_digital_mute(struct snd_soc_dai *dai, int mute, int stream)\n{\n\tstruct snd_soc_component *component = dai->component;\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(component);\n\tu8 decimator;\n\n\t \n\tif (tx->active_decimator[dai->id] == -1)\n\t\treturn 0;\n\n\tdecimator = tx->active_decimator[dai->id];\n\n\tif (mute)\n\t\tsnd_soc_component_write_field(component,\n\t\t\t\t\t      CDC_TXn_TX_PATH_CTL(decimator),\n\t\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x1);\n\telse\n\t\tsnd_soc_component_update_bits(component,\n\t\t\t\t\t      CDC_TXn_TX_PATH_CTL(decimator),\n\t\t\t\t\t      CDC_TXn_PGA_MUTE_MASK, 0x0);\n\n\treturn 0;\n}\n\nstatic const struct snd_soc_dai_ops tx_macro_dai_ops = {\n\t.hw_params = tx_macro_hw_params,\n\t.get_channel_map = tx_macro_get_channel_map,\n\t.mute_stream = tx_macro_digital_mute,\n};\n\nstatic struct snd_soc_dai_driver tx_macro_dai[] = {\n\t{\n\t\t.name = \"tx_macro_tx1\",\n\t\t.id = TX_MACRO_AIF1_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"TX_AIF1 Capture\",\n\t\t\t.rates = TX_MACRO_RATES,\n\t\t\t.formats = TX_MACRO_FORMATS,\n\t\t\t.rate_max = 192000,\n\t\t\t.rate_min = 8000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 8,\n\t\t},\n\t\t.ops = &tx_macro_dai_ops,\n\t},\n\t{\n\t\t.name = \"tx_macro_tx2\",\n\t\t.id = TX_MACRO_AIF2_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"TX_AIF2 Capture\",\n\t\t\t.rates = TX_MACRO_RATES,\n\t\t\t.formats = TX_MACRO_FORMATS,\n\t\t\t.rate_max = 192000,\n\t\t\t.rate_min = 8000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 8,\n\t\t},\n\t\t.ops = &tx_macro_dai_ops,\n\t},\n\t{\n\t\t.name = \"tx_macro_tx3\",\n\t\t.id = TX_MACRO_AIF3_CAP,\n\t\t.capture = {\n\t\t\t.stream_name = \"TX_AIF3 Capture\",\n\t\t\t.rates = TX_MACRO_RATES,\n\t\t\t.formats = TX_MACRO_FORMATS,\n\t\t\t.rate_max = 192000,\n\t\t\t.rate_min = 8000,\n\t\t\t.channels_min = 1,\n\t\t\t.channels_max = 8,\n\t\t},\n\t\t.ops = &tx_macro_dai_ops,\n\t},\n};\n\nstatic const char * const adc_mux_text[] = {\n\t\"MSM_DMIC\", \"SWR_MIC\", \"ANC_FB_TUNE1\"\n};\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dec0_enum, CDC_TX_INP_MUX_ADC_MUX0_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec1_enum, CDC_TX_INP_MUX_ADC_MUX1_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec2_enum, CDC_TX_INP_MUX_ADC_MUX2_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec3_enum, CDC_TX_INP_MUX_ADC_MUX3_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec4_enum, CDC_TX_INP_MUX_ADC_MUX4_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec5_enum, CDC_TX_INP_MUX_ADC_MUX5_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec6_enum, CDC_TX_INP_MUX_ADC_MUX6_CFG1,\n\t\t   0, adc_mux_text);\nstatic SOC_ENUM_SINGLE_DECL(tx_dec7_enum, CDC_TX_INP_MUX_ADC_MUX7_CFG1,\n\t\t   0, adc_mux_text);\n\nstatic const struct snd_kcontrol_new tx_dec0_mux = SOC_DAPM_ENUM(\"tx_dec0\", tx_dec0_enum);\nstatic const struct snd_kcontrol_new tx_dec1_mux = SOC_DAPM_ENUM(\"tx_dec1\", tx_dec1_enum);\nstatic const struct snd_kcontrol_new tx_dec2_mux = SOC_DAPM_ENUM(\"tx_dec2\", tx_dec2_enum);\nstatic const struct snd_kcontrol_new tx_dec3_mux = SOC_DAPM_ENUM(\"tx_dec3\", tx_dec3_enum);\nstatic const struct snd_kcontrol_new tx_dec4_mux = SOC_DAPM_ENUM(\"tx_dec4\", tx_dec4_enum);\nstatic const struct snd_kcontrol_new tx_dec5_mux = SOC_DAPM_ENUM(\"tx_dec5\", tx_dec5_enum);\nstatic const struct snd_kcontrol_new tx_dec6_mux = SOC_DAPM_ENUM(\"tx_dec6\", tx_dec6_enum);\nstatic const struct snd_kcontrol_new tx_dec7_mux = SOC_DAPM_ENUM(\"tx_dec7\", tx_dec7_enum);\n\nstatic const char * const smic_mux_text[] = {\n\t\"ZERO\", \"ADC0\", \"ADC1\", \"ADC2\", \"ADC3\", \"SWR_DMIC0\",\n\t\"SWR_DMIC1\", \"SWR_DMIC2\", \"SWR_DMIC3\", \"SWR_DMIC4\",\n\t\"SWR_DMIC5\", \"SWR_DMIC6\", \"SWR_DMIC7\"\n};\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic0_enum, CDC_TX_INP_MUX_ADC_MUX0_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic1_enum, CDC_TX_INP_MUX_ADC_MUX1_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic2_enum, CDC_TX_INP_MUX_ADC_MUX2_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic3_enum, CDC_TX_INP_MUX_ADC_MUX3_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic4_enum, CDC_TX_INP_MUX_ADC_MUX4_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic5_enum, CDC_TX_INP_MUX_ADC_MUX5_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic6_enum, CDC_TX_INP_MUX_ADC_MUX6_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_smic7_enum, CDC_TX_INP_MUX_ADC_MUX7_CFG0,\n\t\t\t0, smic_mux_text);\n\nstatic const struct snd_kcontrol_new tx_smic0_mux = SOC_DAPM_ENUM_EXT(\"tx_smic0\", tx_smic0_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic1_mux = SOC_DAPM_ENUM_EXT(\"tx_smic1\", tx_smic1_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic2_mux = SOC_DAPM_ENUM_EXT(\"tx_smic2\", tx_smic2_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic3_mux = SOC_DAPM_ENUM_EXT(\"tx_smic3\", tx_smic3_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic4_mux = SOC_DAPM_ENUM_EXT(\"tx_smic4\", tx_smic4_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic5_mux = SOC_DAPM_ENUM_EXT(\"tx_smic5\", tx_smic5_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic6_mux = SOC_DAPM_ENUM_EXT(\"tx_smic6\", tx_smic6_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_smic7_mux = SOC_DAPM_ENUM_EXT(\"tx_smic7\", tx_smic7_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\n\nstatic const char * const dmic_mux_text[] = {\n\t\"ZERO\", \"DMIC0\", \"DMIC1\", \"DMIC2\", \"DMIC3\",\n\t\"DMIC4\", \"DMIC5\", \"DMIC6\", \"DMIC7\"\n};\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic0_enum, CDC_TX_INP_MUX_ADC_MUX0_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic1_enum, CDC_TX_INP_MUX_ADC_MUX1_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic2_enum, CDC_TX_INP_MUX_ADC_MUX2_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic3_enum, CDC_TX_INP_MUX_ADC_MUX3_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic4_enum, CDC_TX_INP_MUX_ADC_MUX4_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic5_enum, CDC_TX_INP_MUX_ADC_MUX5_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic6_enum, CDC_TX_INP_MUX_ADC_MUX6_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic SOC_ENUM_SINGLE_DECL(tx_dmic7_enum, CDC_TX_INP_MUX_ADC_MUX7_CFG0,\n\t\t\t4, dmic_mux_text);\n\nstatic const struct snd_kcontrol_new tx_dmic0_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic0\", tx_dmic0_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic1_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic1\", tx_dmic1_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic2_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic2\", tx_dmic2_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic3_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic3\", tx_dmic3_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic4_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic4\", tx_dmic4_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic5_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic5\", tx_dmic5_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic6_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic6\", tx_dmic6_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\nstatic const struct snd_kcontrol_new tx_dmic7_mux = SOC_DAPM_ENUM_EXT(\"tx_dmic7\", tx_dmic7_enum,\n\t\t\tsnd_soc_dapm_get_enum_double, tx_macro_put_dec_enum);\n\nstatic const char * const dec_mode_mux_text[] = {\n\t\"ADC_DEFAULT\", \"ADC_LOW_PWR\", \"ADC_HIGH_PERF\",\n};\n\nstatic const struct soc_enum dec_mode_mux_enum[] = {\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 0, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 1, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 2,  ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 3, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 4, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 5, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 6, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n\tSOC_ENUM_SINGLE(SND_SOC_NOPM, 7, ARRAY_SIZE(dec_mode_mux_text),\n\t\t\tdec_mode_mux_text),\n};\n\nstatic const struct snd_kcontrol_new tx_aif1_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"DEC0\", SND_SOC_NOPM, TX_MACRO_DEC0, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC1\", SND_SOC_NOPM, TX_MACRO_DEC1, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC2\", SND_SOC_NOPM, TX_MACRO_DEC2, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC3\", SND_SOC_NOPM, TX_MACRO_DEC3, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC4\", SND_SOC_NOPM, TX_MACRO_DEC4, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC5\", SND_SOC_NOPM, TX_MACRO_DEC5, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC6\", SND_SOC_NOPM, TX_MACRO_DEC6, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC7\", SND_SOC_NOPM, TX_MACRO_DEC7, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n};\n\nstatic const struct snd_kcontrol_new tx_aif2_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"DEC0\", SND_SOC_NOPM, TX_MACRO_DEC0, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC1\", SND_SOC_NOPM, TX_MACRO_DEC1, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC2\", SND_SOC_NOPM, TX_MACRO_DEC2, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC3\", SND_SOC_NOPM, TX_MACRO_DEC3, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC4\", SND_SOC_NOPM, TX_MACRO_DEC4, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC5\", SND_SOC_NOPM, TX_MACRO_DEC5, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC6\", SND_SOC_NOPM, TX_MACRO_DEC6, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC7\", SND_SOC_NOPM, TX_MACRO_DEC7, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n};\n\nstatic const struct snd_kcontrol_new tx_aif3_cap_mixer[] = {\n\tSOC_SINGLE_EXT(\"DEC0\", SND_SOC_NOPM, TX_MACRO_DEC0, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC1\", SND_SOC_NOPM, TX_MACRO_DEC1, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC2\", SND_SOC_NOPM, TX_MACRO_DEC2, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC3\", SND_SOC_NOPM, TX_MACRO_DEC3, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC4\", SND_SOC_NOPM, TX_MACRO_DEC4, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC5\", SND_SOC_NOPM, TX_MACRO_DEC5, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC6\", SND_SOC_NOPM, TX_MACRO_DEC6, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n\tSOC_SINGLE_EXT(\"DEC7\", SND_SOC_NOPM, TX_MACRO_DEC7, 1, 0,\n\t\t\ttx_macro_tx_mixer_get, tx_macro_tx_mixer_put),\n};\n\nstatic const struct snd_soc_dapm_widget tx_macro_dapm_widgets[] = {\n\tSND_SOC_DAPM_AIF_OUT(\"TX_AIF1 CAP\", \"TX_AIF1 Capture\", 0,\n\t\tSND_SOC_NOPM, TX_MACRO_AIF1_CAP, 0),\n\n\tSND_SOC_DAPM_AIF_OUT(\"TX_AIF2 CAP\", \"TX_AIF2 Capture\", 0,\n\t\tSND_SOC_NOPM, TX_MACRO_AIF2_CAP, 0),\n\n\tSND_SOC_DAPM_AIF_OUT(\"TX_AIF3 CAP\", \"TX_AIF3 Capture\", 0,\n\t\tSND_SOC_NOPM, TX_MACRO_AIF3_CAP, 0),\n\n\tSND_SOC_DAPM_MIXER(\"TX_AIF1_CAP Mixer\", SND_SOC_NOPM, TX_MACRO_AIF1_CAP, 0,\n\t\ttx_aif1_cap_mixer, ARRAY_SIZE(tx_aif1_cap_mixer)),\n\n\tSND_SOC_DAPM_MIXER(\"TX_AIF2_CAP Mixer\", SND_SOC_NOPM, TX_MACRO_AIF2_CAP, 0,\n\t\ttx_aif2_cap_mixer, ARRAY_SIZE(tx_aif2_cap_mixer)),\n\n\tSND_SOC_DAPM_MIXER(\"TX_AIF3_CAP Mixer\", SND_SOC_NOPM, TX_MACRO_AIF3_CAP, 0,\n\t\ttx_aif3_cap_mixer, ARRAY_SIZE(tx_aif3_cap_mixer)),\n\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX0\", SND_SOC_NOPM, 0, 0, &tx_smic0_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX1\", SND_SOC_NOPM, 0, 0, &tx_smic1_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX2\", SND_SOC_NOPM, 0, 0, &tx_smic2_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX3\", SND_SOC_NOPM, 0, 0, &tx_smic3_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX4\", SND_SOC_NOPM, 0, 0, &tx_smic4_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX5\", SND_SOC_NOPM, 0, 0, &tx_smic5_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX6\", SND_SOC_NOPM, 0, 0, &tx_smic6_mux),\n\tSND_SOC_DAPM_MUX(\"TX SMIC MUX7\", SND_SOC_NOPM, 0, 0, &tx_smic7_mux),\n\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX0\", SND_SOC_NOPM, 4, 0, &tx_dmic0_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX1\", SND_SOC_NOPM, 4, 0, &tx_dmic1_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX2\", SND_SOC_NOPM, 4, 0, &tx_dmic2_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX3\", SND_SOC_NOPM, 4, 0, &tx_dmic3_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX4\", SND_SOC_NOPM, 4, 0, &tx_dmic4_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX5\", SND_SOC_NOPM, 4, 0, &tx_dmic5_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX6\", SND_SOC_NOPM, 4, 0, &tx_dmic6_mux),\n\tSND_SOC_DAPM_MUX(\"TX DMIC MUX7\", SND_SOC_NOPM, 4, 0, &tx_dmic7_mux),\n\n\tSND_SOC_DAPM_INPUT(\"TX SWR_ADC0\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_ADC1\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_ADC2\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_ADC3\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC0\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC1\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC2\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC3\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC4\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC5\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC6\"),\n\tSND_SOC_DAPM_INPUT(\"TX SWR_DMIC7\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC0\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC1\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC2\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC3\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC4\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC5\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC6\"),\n\tSND_SOC_DAPM_INPUT(\"TX DMIC7\"),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC0 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC0, 0,\n\t\t\t   &tx_dec0_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC1 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC1, 0,\n\t\t\t   &tx_dec1_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC2 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC2, 0,\n\t\t\t   &tx_dec2_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC3 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC3, 0,\n\t\t\t   &tx_dec3_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC4 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC4, 0,\n\t\t\t   &tx_dec4_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC5 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC5, 0,\n\t\t\t   &tx_dec5_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC6 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC6, 0,\n\t\t\t   &tx_dec6_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_MUX_E(\"TX DEC7 MUX\", SND_SOC_NOPM,\n\t\t\t   TX_MACRO_DEC7, 0,\n\t\t\t   &tx_dec7_mux, tx_macro_enable_dec,\n\t\t\t   SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMU |\n\t\t\t   SND_SOC_DAPM_PRE_PMD | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_SUPPLY_S(\"TX_MCLK\", 0, SND_SOC_NOPM, 0, 0,\n\ttx_macro_mclk_event, SND_SOC_DAPM_PRE_PMU | SND_SOC_DAPM_POST_PMD),\n\n\tSND_SOC_DAPM_SUPPLY_S(\"TX_SWR_CLK\", 0, SND_SOC_NOPM, 0, 0, NULL, 0),\n\n\tSND_SOC_DAPM_SUPPLY_S(\"VA_SWR_CLK\", 0, SND_SOC_NOPM, 0, 0,\n\t\t\tNULL, 0),\n};\n\nstatic const struct snd_soc_dapm_route tx_audio_map[] = {\n\t{\"TX_AIF1 CAP\", NULL, \"TX_MCLK\"},\n\t{\"TX_AIF2 CAP\", NULL, \"TX_MCLK\"},\n\t{\"TX_AIF3 CAP\", NULL, \"TX_MCLK\"},\n\n\t{\"TX_AIF1 CAP\", NULL, \"TX_AIF1_CAP Mixer\"},\n\t{\"TX_AIF2 CAP\", NULL, \"TX_AIF2_CAP Mixer\"},\n\t{\"TX_AIF3 CAP\", NULL, \"TX_AIF3_CAP Mixer\"},\n\n\t{\"TX_AIF1_CAP Mixer\", \"DEC0\", \"TX DEC0 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC1\", \"TX DEC1 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC2\", \"TX DEC2 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC3\", \"TX DEC3 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC4\", \"TX DEC4 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC5\", \"TX DEC5 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC6\", \"TX DEC6 MUX\"},\n\t{\"TX_AIF1_CAP Mixer\", \"DEC7\", \"TX DEC7 MUX\"},\n\n\t{\"TX_AIF2_CAP Mixer\", \"DEC0\", \"TX DEC0 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC1\", \"TX DEC1 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC2\", \"TX DEC2 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC3\", \"TX DEC3 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC4\", \"TX DEC4 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC5\", \"TX DEC5 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC6\", \"TX DEC6 MUX\"},\n\t{\"TX_AIF2_CAP Mixer\", \"DEC7\", \"TX DEC7 MUX\"},\n\n\t{\"TX_AIF3_CAP Mixer\", \"DEC0\", \"TX DEC0 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC1\", \"TX DEC1 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC2\", \"TX DEC2 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC3\", \"TX DEC3 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC4\", \"TX DEC4 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC5\", \"TX DEC5 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC6\", \"TX DEC6 MUX\"},\n\t{\"TX_AIF3_CAP Mixer\", \"DEC7\", \"TX DEC7 MUX\"},\n\n\t{\"TX DEC0 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC1 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC2 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC3 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC4 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC5 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC6 MUX\", NULL, \"TX_MCLK\"},\n\t{\"TX DEC7 MUX\", NULL, \"TX_MCLK\"},\n\n\t{\"TX DEC0 MUX\", \"MSM_DMIC\", \"TX DMIC MUX0\"},\n\t{\"TX DMIC MUX0\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX0\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX0\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX0\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX0\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX0\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX0\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX0\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC0 MUX\", \"SWR_MIC\", \"TX SMIC MUX0\"},\n\t{\"TX SMIC MUX0\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX0\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX0\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX0\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX0\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX0\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC1 MUX\", \"MSM_DMIC\", \"TX DMIC MUX1\"},\n\t{\"TX DMIC MUX1\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX1\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX1\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX1\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX1\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX1\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX1\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX1\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC1 MUX\", \"SWR_MIC\", \"TX SMIC MUX1\"},\n\t{\"TX SMIC MUX1\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX1\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX1\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX1\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX1\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX1\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC2 MUX\", \"MSM_DMIC\", \"TX DMIC MUX2\"},\n\t{\"TX DMIC MUX2\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX2\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX2\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX2\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX2\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX2\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX2\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX2\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC2 MUX\", \"SWR_MIC\", \"TX SMIC MUX2\"},\n\t{\"TX SMIC MUX2\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX2\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX2\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX2\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX2\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX2\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC3 MUX\", \"MSM_DMIC\", \"TX DMIC MUX3\"},\n\t{\"TX DMIC MUX3\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX3\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX3\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX3\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX3\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX3\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX3\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX3\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC3 MUX\", \"SWR_MIC\", \"TX SMIC MUX3\"},\n\t{\"TX SMIC MUX3\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX3\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX3\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX3\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX3\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX3\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC4 MUX\", \"MSM_DMIC\", \"TX DMIC MUX4\"},\n\t{\"TX DMIC MUX4\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX4\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX4\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX4\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX4\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX4\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX4\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX4\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC4 MUX\", \"SWR_MIC\", \"TX SMIC MUX4\"},\n\t{\"TX SMIC MUX4\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX4\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX4\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX4\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX4\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX4\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC5 MUX\", \"MSM_DMIC\", \"TX DMIC MUX5\"},\n\t{\"TX DMIC MUX5\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX5\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX5\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX5\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX5\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX5\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX5\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX5\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC5 MUX\", \"SWR_MIC\", \"TX SMIC MUX5\"},\n\t{\"TX SMIC MUX5\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX5\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX5\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX5\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX5\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX5\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC6 MUX\", \"MSM_DMIC\", \"TX DMIC MUX6\"},\n\t{\"TX DMIC MUX6\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX6\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX6\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX6\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX6\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX6\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX6\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX6\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC6 MUX\", \"SWR_MIC\", \"TX SMIC MUX6\"},\n\t{\"TX SMIC MUX6\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX6\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX6\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX6\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX6\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX6\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n\n\t{\"TX DEC7 MUX\", \"MSM_DMIC\", \"TX DMIC MUX7\"},\n\t{\"TX DMIC MUX7\", \"DMIC0\", \"TX DMIC0\"},\n\t{\"TX DMIC MUX7\", \"DMIC1\", \"TX DMIC1\"},\n\t{\"TX DMIC MUX7\", \"DMIC2\", \"TX DMIC2\"},\n\t{\"TX DMIC MUX7\", \"DMIC3\", \"TX DMIC3\"},\n\t{\"TX DMIC MUX7\", \"DMIC4\", \"TX DMIC4\"},\n\t{\"TX DMIC MUX7\", \"DMIC5\", \"TX DMIC5\"},\n\t{\"TX DMIC MUX7\", \"DMIC6\", \"TX DMIC6\"},\n\t{\"TX DMIC MUX7\", \"DMIC7\", \"TX DMIC7\"},\n\n\t{\"TX DEC7 MUX\", \"SWR_MIC\", \"TX SMIC MUX7\"},\n\t{\"TX SMIC MUX7\", NULL, \"TX_SWR_CLK\"},\n\t{\"TX SMIC MUX7\", \"ADC0\", \"TX SWR_ADC0\"},\n\t{\"TX SMIC MUX7\", \"ADC1\", \"TX SWR_ADC1\"},\n\t{\"TX SMIC MUX7\", \"ADC2\", \"TX SWR_ADC2\"},\n\t{\"TX SMIC MUX7\", \"ADC3\", \"TX SWR_ADC3\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC0\", \"TX SWR_DMIC0\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC1\", \"TX SWR_DMIC1\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC2\", \"TX SWR_DMIC2\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC3\", \"TX SWR_DMIC3\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC4\", \"TX SWR_DMIC4\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC5\", \"TX SWR_DMIC5\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC6\", \"TX SWR_DMIC6\"},\n\t{\"TX SMIC MUX7\", \"SWR_DMIC7\", \"TX SWR_DMIC7\"},\n};\n\nstatic const struct snd_kcontrol_new tx_macro_snd_controls[] = {\n\tSOC_SINGLE_S8_TLV(\"TX_DEC0 Volume\",\n\t\t\t  CDC_TX0_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC1 Volume\",\n\t\t\t  CDC_TX1_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC2 Volume\",\n\t\t\t  CDC_TX2_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC3 Volume\",\n\t\t\t  CDC_TX3_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC4 Volume\",\n\t\t\t  CDC_TX4_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC5 Volume\",\n\t\t\t  CDC_TX5_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC6 Volume\",\n\t\t\t  CDC_TX6_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\tSOC_SINGLE_S8_TLV(\"TX_DEC7 Volume\",\n\t\t\t  CDC_TX7_TX_VOL_CTL,\n\t\t\t  -84, 40, digital_gain),\n\n\tSOC_ENUM_EXT(\"DEC0 MODE\", dec_mode_mux_enum[0],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC1 MODE\", dec_mode_mux_enum[1],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC2 MODE\", dec_mode_mux_enum[2],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC3 MODE\", dec_mode_mux_enum[3],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC4 MODE\", dec_mode_mux_enum[4],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC5 MODE\", dec_mode_mux_enum[5],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC6 MODE\", dec_mode_mux_enum[6],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_ENUM_EXT(\"DEC7 MODE\", dec_mode_mux_enum[7],\n\t\t\ttx_macro_dec_mode_get, tx_macro_dec_mode_put),\n\n\tSOC_SINGLE_EXT(\"DEC0_BCS Switch\", SND_SOC_NOPM, 0, 1, 0,\n\t\t       tx_macro_get_bcs, tx_macro_set_bcs),\n};\n\nstatic int tx_macro_component_probe(struct snd_soc_component *comp)\n{\n\tstruct tx_macro *tx = snd_soc_component_get_drvdata(comp);\n\tint i;\n\n\tsnd_soc_component_init_regmap(comp, tx->regmap);\n\n\tfor (i = 0; i < NUM_DECIMATORS; i++) {\n\t\ttx->tx_hpf_work[i].tx = tx;\n\t\ttx->tx_hpf_work[i].decimator = i;\n\t\tINIT_DELAYED_WORK(&tx->tx_hpf_work[i].dwork,\n\t\t\ttx_macro_tx_hpf_corner_freq_callback);\n\t}\n\n\tfor (i = 0; i < NUM_DECIMATORS; i++) {\n\t\ttx->tx_mute_dwork[i].tx = tx;\n\t\ttx->tx_mute_dwork[i].decimator = i;\n\t\tINIT_DELAYED_WORK(&tx->tx_mute_dwork[i].dwork,\n\t\t\t  tx_macro_mute_update_callback);\n\t}\n\ttx->component = comp;\n\n\tsnd_soc_component_update_bits(comp, CDC_TX0_TX_PATH_SEC7, 0x3F,\n\t\t\t\t      0x0A);\n\t \n\tsnd_soc_component_update_bits(comp, CDC_TX_TOP_CSR_SWR_AMIC0_CTL, 0xFF, 0x00);\n\tsnd_soc_component_update_bits(comp, CDC_TX_TOP_CSR_SWR_AMIC1_CTL, 0xFF, 0x00);\n\n\treturn 0;\n}\n\nstatic int swclk_gate_enable(struct clk_hw *hw)\n{\n\tstruct tx_macro *tx = to_tx_macro(hw);\n\tstruct regmap *regmap = tx->regmap;\n\tint ret;\n\n\tret = clk_prepare_enable(tx->mclk);\n\tif (ret) {\n\t\tdev_err(tx->dev, \"failed to enable mclk\\n\");\n\t\treturn ret;\n\t}\n\n\ttx_macro_mclk_enable(tx, true);\n\n\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL,\n\t\t\t   CDC_TX_SWR_CLK_EN_MASK,\n\t\t\t   CDC_TX_SWR_CLK_ENABLE);\n\treturn 0;\n}\n\nstatic void swclk_gate_disable(struct clk_hw *hw)\n{\n\tstruct tx_macro *tx = to_tx_macro(hw);\n\tstruct regmap *regmap = tx->regmap;\n\n\tregmap_update_bits(regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL,\n\t\t\t   CDC_TX_SWR_CLK_EN_MASK, 0x0);\n\n\ttx_macro_mclk_enable(tx, false);\n\tclk_disable_unprepare(tx->mclk);\n}\n\nstatic int swclk_gate_is_enabled(struct clk_hw *hw)\n{\n\tstruct tx_macro *tx = to_tx_macro(hw);\n\tint ret, val;\n\n\tregmap_read(tx->regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL, &val);\n\tret = val & BIT(0);\n\n\treturn ret;\n}\n\nstatic unsigned long swclk_recalc_rate(struct clk_hw *hw,\n\t\t\t\t       unsigned long parent_rate)\n{\n\treturn parent_rate / 2;\n}\n\nstatic const struct clk_ops swclk_gate_ops = {\n\t.prepare = swclk_gate_enable,\n\t.unprepare = swclk_gate_disable,\n\t.is_enabled = swclk_gate_is_enabled,\n\t.recalc_rate = swclk_recalc_rate,\n\n};\n\nstatic int tx_macro_register_mclk_output(struct tx_macro *tx)\n{\n\tstruct device *dev = tx->dev;\n\tconst char *parent_clk_name = NULL;\n\tconst char *clk_name = \"lpass-tx-mclk\";\n\tstruct clk_hw *hw;\n\tstruct clk_init_data init;\n\tint ret;\n\n\tif (tx->npl)\n\t\tparent_clk_name = __clk_get_name(tx->npl);\n\telse\n\t\tparent_clk_name = __clk_get_name(tx->mclk);\n\n\tinit.name = clk_name;\n\tinit.ops = &swclk_gate_ops;\n\tinit.flags = 0;\n\tinit.parent_names = &parent_clk_name;\n\tinit.num_parents = 1;\n\ttx->hw.init = &init;\n\thw = &tx->hw;\n\tret = devm_clk_hw_register(dev, hw);\n\tif (ret)\n\t\treturn ret;\n\n\treturn devm_of_clk_add_hw_provider(dev, of_clk_hw_simple_get, hw);\n}\n\nstatic const struct snd_soc_component_driver tx_macro_component_drv = {\n\t.name = \"RX-MACRO\",\n\t.probe = tx_macro_component_probe,\n\t.controls = tx_macro_snd_controls,\n\t.num_controls = ARRAY_SIZE(tx_macro_snd_controls),\n\t.dapm_widgets = tx_macro_dapm_widgets,\n\t.num_dapm_widgets = ARRAY_SIZE(tx_macro_dapm_widgets),\n\t.dapm_routes = tx_audio_map,\n\t.num_dapm_routes = ARRAY_SIZE(tx_audio_map),\n};\n\nstatic int tx_macro_probe(struct platform_device *pdev)\n{\n\tstruct device *dev = &pdev->dev;\n\tstruct device_node *np = dev->of_node;\n\tkernel_ulong_t flags;\n\tstruct tx_macro *tx;\n\tvoid __iomem *base;\n\tint ret, reg;\n\n\tflags = (kernel_ulong_t)device_get_match_data(dev);\n\n\ttx = devm_kzalloc(dev, sizeof(*tx), GFP_KERNEL);\n\tif (!tx)\n\t\treturn -ENOMEM;\n\n\ttx->macro = devm_clk_get_optional(dev, \"macro\");\n\tif (IS_ERR(tx->macro))\n\t\treturn dev_err_probe(dev, PTR_ERR(tx->macro), \"unable to get macro clock\\n\");\n\n\ttx->dcodec = devm_clk_get_optional(dev, \"dcodec\");\n\tif (IS_ERR(tx->dcodec))\n\t\treturn dev_err_probe(dev, PTR_ERR(tx->dcodec), \"unable to get dcodec clock\\n\");\n\n\ttx->mclk = devm_clk_get(dev, \"mclk\");\n\tif (IS_ERR(tx->mclk))\n\t\treturn dev_err_probe(dev, PTR_ERR(tx->mclk), \"unable to get mclk clock\\n\");\n\n\tif (flags & LPASS_MACRO_FLAG_HAS_NPL_CLOCK) {\n\t\ttx->npl = devm_clk_get(dev, \"npl\");\n\t\tif (IS_ERR(tx->npl))\n\t\t\treturn dev_err_probe(dev, PTR_ERR(tx->npl), \"unable to get npl clock\\n\");\n\t}\n\n\ttx->fsgen = devm_clk_get(dev, \"fsgen\");\n\tif (IS_ERR(tx->fsgen))\n\t\treturn dev_err_probe(dev, PTR_ERR(tx->fsgen), \"unable to get fsgen clock\\n\");\n\n\ttx->pds = lpass_macro_pds_init(dev);\n\tif (IS_ERR(tx->pds))\n\t\treturn PTR_ERR(tx->pds);\n\n\tbase = devm_platform_ioremap_resource(pdev, 0);\n\tif (IS_ERR(base)) {\n\t\tret = PTR_ERR(base);\n\t\tgoto err;\n\t}\n\n\t \n\tif (of_device_is_compatible(np, \"qcom,sc7280-lpass-tx-macro\")) {\n\t\tfor (reg = 0; reg < ARRAY_SIZE(tx_defaults); reg++) {\n\t\t\tswitch (tx_defaults[reg].reg) {\n\t\t\tcase CDC_TX_TOP_CSR_SWR_AMIC0_CTL:\n\t\t\tcase CDC_TX_TOP_CSR_SWR_AMIC1_CTL:\n\t\t\t\ttx_defaults[reg].def = 0x0E;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\ttx->regmap = devm_regmap_init_mmio(dev, base, &tx_regmap_config);\n\tif (IS_ERR(tx->regmap)) {\n\t\tret = PTR_ERR(tx->regmap);\n\t\tgoto err;\n\t}\n\n\tdev_set_drvdata(dev, tx);\n\n\ttx->dev = dev;\n\n\t \n\ttx->active_decimator[TX_MACRO_AIF1_CAP] = -1;\n\ttx->active_decimator[TX_MACRO_AIF2_CAP] = -1;\n\ttx->active_decimator[TX_MACRO_AIF3_CAP] = -1;\n\n\t \n\tclk_set_rate(tx->mclk, MCLK_FREQ);\n\tclk_set_rate(tx->npl, MCLK_FREQ);\n\n\tret = clk_prepare_enable(tx->macro);\n\tif (ret)\n\t\tgoto err;\n\n\tret = clk_prepare_enable(tx->dcodec);\n\tif (ret)\n\t\tgoto err_dcodec;\n\n\tret = clk_prepare_enable(tx->mclk);\n\tif (ret)\n\t\tgoto err_mclk;\n\n\tret = clk_prepare_enable(tx->npl);\n\tif (ret)\n\t\tgoto err_npl;\n\n\tret = clk_prepare_enable(tx->fsgen);\n\tif (ret)\n\t\tgoto err_fsgen;\n\n\t \n\tregmap_update_bits(tx->regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL,\n\t\t\t   CDC_TX_SWR_RESET_MASK, CDC_TX_SWR_RESET_ENABLE);\n\n\tregmap_update_bits(tx->regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL,\n\t\t\t   CDC_TX_SWR_CLK_EN_MASK,\n\t\t\t   CDC_TX_SWR_CLK_ENABLE);\n\tregmap_update_bits(tx->regmap, CDC_TX_CLK_RST_CTRL_SWR_CONTROL,\n\t\t\t   CDC_TX_SWR_RESET_MASK, 0x0);\n\n\tret = devm_snd_soc_register_component(dev, &tx_macro_component_drv,\n\t\t\t\t\t      tx_macro_dai,\n\t\t\t\t\t      ARRAY_SIZE(tx_macro_dai));\n\tif (ret)\n\t\tgoto err_clkout;\n\n\tpm_runtime_set_autosuspend_delay(dev, 3000);\n\tpm_runtime_use_autosuspend(dev);\n\tpm_runtime_mark_last_busy(dev);\n\tpm_runtime_set_active(dev);\n\tpm_runtime_enable(dev);\n\n\tret = tx_macro_register_mclk_output(tx);\n\tif (ret)\n\t\tgoto err_clkout;\n\n\treturn 0;\n\nerr_clkout:\n\tclk_disable_unprepare(tx->fsgen);\nerr_fsgen:\n\tclk_disable_unprepare(tx->npl);\nerr_npl:\n\tclk_disable_unprepare(tx->mclk);\nerr_mclk:\n\tclk_disable_unprepare(tx->dcodec);\nerr_dcodec:\n\tclk_disable_unprepare(tx->macro);\nerr:\n\tlpass_macro_pds_exit(tx->pds);\n\n\treturn ret;\n}\n\nstatic void tx_macro_remove(struct platform_device *pdev)\n{\n\tstruct tx_macro *tx = dev_get_drvdata(&pdev->dev);\n\n\tclk_disable_unprepare(tx->macro);\n\tclk_disable_unprepare(tx->dcodec);\n\tclk_disable_unprepare(tx->mclk);\n\tclk_disable_unprepare(tx->npl);\n\tclk_disable_unprepare(tx->fsgen);\n\n\tlpass_macro_pds_exit(tx->pds);\n}\n\nstatic int __maybe_unused tx_macro_runtime_suspend(struct device *dev)\n{\n\tstruct tx_macro *tx = dev_get_drvdata(dev);\n\n\tregcache_cache_only(tx->regmap, true);\n\tregcache_mark_dirty(tx->regmap);\n\n\tclk_disable_unprepare(tx->fsgen);\n\tclk_disable_unprepare(tx->npl);\n\tclk_disable_unprepare(tx->mclk);\n\n\treturn 0;\n}\n\nstatic int __maybe_unused tx_macro_runtime_resume(struct device *dev)\n{\n\tstruct tx_macro *tx = dev_get_drvdata(dev);\n\tint ret;\n\n\tret = clk_prepare_enable(tx->mclk);\n\tif (ret) {\n\t\tdev_err(dev, \"unable to prepare mclk\\n\");\n\t\treturn ret;\n\t}\n\n\tret = clk_prepare_enable(tx->npl);\n\tif (ret) {\n\t\tdev_err(dev, \"unable to prepare npl\\n\");\n\t\tgoto err_npl;\n\t}\n\n\tret = clk_prepare_enable(tx->fsgen);\n\tif (ret) {\n\t\tdev_err(dev, \"unable to prepare fsgen\\n\");\n\t\tgoto err_fsgen;\n\t}\n\n\tregcache_cache_only(tx->regmap, false);\n\tregcache_sync(tx->regmap);\n\n\treturn 0;\nerr_fsgen:\n\tclk_disable_unprepare(tx->npl);\nerr_npl:\n\tclk_disable_unprepare(tx->mclk);\n\n\treturn ret;\n}\n\nstatic const struct dev_pm_ops tx_macro_pm_ops = {\n\tSET_RUNTIME_PM_OPS(tx_macro_runtime_suspend, tx_macro_runtime_resume, NULL)\n};\n\nstatic const struct of_device_id tx_macro_dt_match[] = {\n\t{\n\t\t.compatible = \"qcom,sc7280-lpass-tx-macro\",\n\t\t.data = (void *)LPASS_MACRO_FLAG_HAS_NPL_CLOCK,\n\t}, {\n\t\t.compatible = \"qcom,sm8250-lpass-tx-macro\",\n\t\t.data = (void *)LPASS_MACRO_FLAG_HAS_NPL_CLOCK,\n\t}, {\n\t\t.compatible = \"qcom,sm8450-lpass-tx-macro\",\n\t\t.data = (void *)LPASS_MACRO_FLAG_HAS_NPL_CLOCK,\n\t}, {\n\t\t.compatible = \"qcom,sm8550-lpass-tx-macro\",\n\t}, {\n\t\t.compatible = \"qcom,sc8280xp-lpass-tx-macro\",\n\t\t.data = (void *)LPASS_MACRO_FLAG_HAS_NPL_CLOCK,\n\t},\n\t{ }\n};\nMODULE_DEVICE_TABLE(of, tx_macro_dt_match);\nstatic struct platform_driver tx_macro_driver = {\n\t.driver = {\n\t\t.name = \"tx_macro\",\n\t\t.of_match_table = tx_macro_dt_match,\n\t\t.suppress_bind_attrs = true,\n\t\t.pm = &tx_macro_pm_ops,\n\t},\n\t.probe = tx_macro_probe,\n\t.remove_new = tx_macro_remove,\n};\n\nmodule_platform_driver(tx_macro_driver);\n\nMODULE_DESCRIPTION(\"TX macro driver\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}