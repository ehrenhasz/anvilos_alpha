{
  "module_name": "cs35l41-spi.c",
  "hash_id": "764b9d2de6a33897a6202288fbc5e463df706c1e0ca5c6534a984e70519e0378",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/codecs/cs35l41-spi.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n#include <linux/acpi.h>\n#include <linux/delay.h>\n#include <linux/init.h>\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/moduleparam.h>\n#include <linux/platform_device.h>\n#include <linux/spi/spi.h>\n\n#include \"cs35l41.h\"\n\nstatic const struct spi_device_id cs35l41_id_spi[] = {\n\t{ \"cs35l40\", 0 },\n\t{ \"cs35l41\", 0 },\n\t{ \"cs35l51\", 0 },\n\t{ \"cs35l53\", 0 },\n\t{}\n};\n\nMODULE_DEVICE_TABLE(spi, cs35l41_id_spi);\n\nstatic int cs35l41_spi_probe(struct spi_device *spi)\n{\n\tconst struct regmap_config *regmap_config = &cs35l41_regmap_spi;\n\tstruct cs35l41_hw_cfg *hw_cfg = dev_get_platdata(&spi->dev);\n\tstruct cs35l41_private *cs35l41;\n\tint ret;\n\n\tcs35l41 = devm_kzalloc(&spi->dev, sizeof(struct cs35l41_private), GFP_KERNEL);\n\tif (!cs35l41)\n\t\treturn -ENOMEM;\n\n\tspi->max_speed_hz = CS35L41_SPI_MAX_FREQ;\n\tspi_setup(spi);\n\n\tspi_set_drvdata(spi, cs35l41);\n\tcs35l41->regmap = devm_regmap_init_spi(spi, regmap_config);\n\tif (IS_ERR(cs35l41->regmap)) {\n\t\tret = PTR_ERR(cs35l41->regmap);\n\t\tdev_err(&spi->dev, \"Failed to allocate register map: %d\\n\", ret);\n\t\treturn ret;\n\t}\n\n\tcs35l41->dev = &spi->dev;\n\tcs35l41->irq = spi->irq;\n\n\treturn cs35l41_probe(cs35l41, hw_cfg);\n}\n\nstatic void cs35l41_spi_remove(struct spi_device *spi)\n{\n\tstruct cs35l41_private *cs35l41 = spi_get_drvdata(spi);\n\n\tcs35l41_remove(cs35l41);\n}\n\n#ifdef CONFIG_OF\nstatic const struct of_device_id cs35l41_of_match[] = {\n\t{ .compatible = \"cirrus,cs35l40\" },\n\t{ .compatible = \"cirrus,cs35l41\" },\n\t{},\n};\nMODULE_DEVICE_TABLE(of, cs35l41_of_match);\n#endif\n\n#ifdef CONFIG_ACPI\nstatic const struct acpi_device_id cs35l41_acpi_match[] = {\n\t{ \"CSC3541\", 0 },  \n\t{ \"CLSA3541\", 0 },  \n\t{},\n};\nMODULE_DEVICE_TABLE(acpi, cs35l41_acpi_match);\n#endif\n\nstatic struct spi_driver cs35l41_spi_driver = {\n\t.driver = {\n\t\t.name\t\t= \"cs35l41\",\n\t\t.pm\t\t= &cs35l41_pm_ops,\n\t\t.of_match_table = of_match_ptr(cs35l41_of_match),\n\t\t.acpi_match_table = ACPI_PTR(cs35l41_acpi_match),\n\t},\n\t.id_table\t= cs35l41_id_spi,\n\t.probe\t\t= cs35l41_spi_probe,\n\t.remove\t\t= cs35l41_spi_remove,\n};\n\nmodule_spi_driver(cs35l41_spi_driver);\n\nMODULE_DESCRIPTION(\"SPI CS35L41 driver\");\nMODULE_AUTHOR(\"David Rhodes, Cirrus Logic Inc, <david.rhodes@cirrus.com>\");\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}