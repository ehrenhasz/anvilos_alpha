{
  "module_name": "local.h",
  "hash_id": "4b9024ead3c0222cd3136b1308f97e4a90626e672039e1cb4d4bbfed8e83a349",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/dwc/local.h",
  "human_readable_source": " \n\n#ifndef __DESIGNWARE_LOCAL_H\n#define __DESIGNWARE_LOCAL_H\n\n#include <linux/clk.h>\n#include <linux/device.h>\n#include <linux/types.h>\n#include <sound/dmaengine_pcm.h>\n#include <sound/pcm.h>\n#include <sound/designware_i2s.h>\n\n \n#define IER\t\t0x000\n#define IRER\t\t0x004\n#define ITER\t\t0x008\n#define CER\t\t0x00C\n#define CCR\t\t0x010\n#define RXFFR\t\t0x014\n#define TXFFR\t\t0x018\n\n \n#define IER_TDM_SLOTS_SHIFT\t8\n#define IER_FRAME_OFF_SHIFT\t5\n#define IER_FRAME_OFF\tBIT(5)\n#define IER_INTF_TYPE\tBIT(1)\n#define IER_IEN\t\tBIT(0)\n\n \n#define ISR_TXFO\tBIT(5)\n#define ISR_TXFE\tBIT(4)\n#define ISR_RXFO\tBIT(1)\n#define ISR_RXDA\tBIT(0)\n\n \n#define LRBR_LTHR(x)\t(0x40 * x + 0x020)\n#define RRBR_RTHR(x)\t(0x40 * x + 0x024)\n#define RER(x)\t\t(0x40 * x + 0x028)\n#define TER(x)\t\t(0x40 * x + 0x02C)\n#define RCR(x)\t\t(0x40 * x + 0x030)\n#define TCR(x)\t\t(0x40 * x + 0x034)\n#define ISR(x)\t\t(0x40 * x + 0x038)\n#define IMR(x)\t\t(0x40 * x + 0x03C)\n#define ROR(x)\t\t(0x40 * x + 0x040)\n#define TOR(x)\t\t(0x40 * x + 0x044)\n#define RFCR(x)\t\t(0x40 * x + 0x048)\n#define TFCR(x)\t\t(0x40 * x + 0x04C)\n#define RFF(x)\t\t(0x40 * x + 0x050)\n#define TFF(x)\t\t(0x40 * x + 0x054)\n#define RSLOT_TSLOT(x)\t(0x4 * (x) + 0x224)\n\n \n#define RER_RXSLOT_SHIFT\t8\n#define RER_RXCHEN\tBIT(0)\n\n \n#define TER_TXSLOT_SHIFT\t8\n#define TER_TXCHEN\tBIT(0)\n\n \n#define I2S_COMP_PARAM_2\t0x01F0\n#define I2S_COMP_PARAM_1\t0x01F4\n#define I2S_COMP_VERSION\t0x01F8\n#define I2S_COMP_TYPE\t\t0x01FC\n\n#define I2S_RRXDMA\t\t0x01C4\n#define I2S_RTXDMA\t\t0x01CC\n#define I2S_DMACR\t\t0x0200\n#define I2S_DMAEN_RXBLOCK\t(1 << 16)\n#define I2S_DMAEN_TXBLOCK\t(1 << 17)\n\n \n#define\tCOMP1_TX_WORDSIZE_3(r)\t(((r) & GENMASK(27, 25)) >> 25)\n#define\tCOMP1_TX_WORDSIZE_2(r)\t(((r) & GENMASK(24, 22)) >> 22)\n#define\tCOMP1_TX_WORDSIZE_1(r)\t(((r) & GENMASK(21, 19)) >> 19)\n#define\tCOMP1_TX_WORDSIZE_0(r)\t(((r) & GENMASK(18, 16)) >> 16)\n#define\tCOMP1_TX_CHANNELS(r)\t(((r) & GENMASK(10, 9)) >> 9)\n#define\tCOMP1_RX_CHANNELS(r)\t(((r) & GENMASK(8, 7)) >> 7)\n#define\tCOMP1_RX_ENABLED(r)\t(((r) & BIT(6)) >> 6)\n#define\tCOMP1_TX_ENABLED(r)\t(((r) & BIT(5)) >> 5)\n#define\tCOMP1_MODE_EN(r)\t(((r) & BIT(4)) >> 4)\n#define\tCOMP1_FIFO_DEPTH_GLOBAL(r)\t(((r) & GENMASK(3, 2)) >> 2)\n#define\tCOMP1_APB_DATA_WIDTH(r)\t(((r) & GENMASK(1, 0)) >> 0)\n\n#define\tCOMP2_RX_WORDSIZE_3(r)\t(((r) & GENMASK(12, 10)) >> 10)\n#define\tCOMP2_RX_WORDSIZE_2(r)\t(((r) & GENMASK(9, 7)) >> 7)\n#define\tCOMP2_RX_WORDSIZE_1(r)\t(((r) & GENMASK(5, 3)) >> 3)\n#define\tCOMP2_RX_WORDSIZE_0(r)\t(((r) & GENMASK(2, 0)) >> 0)\n\n \n#define\tCOMP_MAX_WORDSIZE\t(1 << 3)\n#define\tCOMP_MAX_DATA_WIDTH\t(1 << 2)\n\n#define MAX_CHANNEL_NUM\t\t8\n#define MIN_CHANNEL_NUM\t\t2\n\nunion dw_i2s_snd_dma_data {\n\tstruct i2s_dma_data pd;\n\tstruct snd_dmaengine_dai_dma_data dt;\n};\n\nstruct dw_i2s_dev {\n\tvoid __iomem *i2s_base;\n\tstruct clk *clk;\n\tstruct reset_control *reset;\n\tint active;\n\tunsigned int capability;\n\tunsigned int quirks;\n\tunsigned int i2s_reg_comp1;\n\tunsigned int i2s_reg_comp2;\n\tstruct device *dev;\n\tu32 ccr;\n\tu32 xfer_resolution;\n\tu32 fifo_th;\n\tu32 l_reg;\n\tu32 r_reg;\n\tbool is_jh7110;  \n\n\t \n\tunion dw_i2s_snd_dma_data play_dma_data;\n\tunion dw_i2s_snd_dma_data capture_dma_data;\n\tstruct i2s_clk_config_data config;\n\tint (*i2s_clk_cfg)(struct i2s_clk_config_data *config);\n\n\t \n\tbool use_pio;\n\n\t \n\tu32 tdm_slots;\n\tu32 tdm_mask;\n\tu32 frame_offset;\n\n\tstruct snd_pcm_substream __rcu *tx_substream;\n\tstruct snd_pcm_substream __rcu *rx_substream;\n\tunsigned int (*tx_fn)(struct dw_i2s_dev *dev,\n\t\t\tstruct snd_pcm_runtime *runtime, unsigned int tx_ptr,\n\t\t\tbool *period_elapsed);\n\tunsigned int (*rx_fn)(struct dw_i2s_dev *dev,\n\t\t\tstruct snd_pcm_runtime *runtime, unsigned int rx_ptr,\n\t\t\tbool *period_elapsed);\n\tunsigned int tx_ptr;\n\tunsigned int rx_ptr;\n};\n\n#if IS_ENABLED(CONFIG_SND_DESIGNWARE_PCM)\nvoid dw_pcm_push_tx(struct dw_i2s_dev *dev);\nvoid dw_pcm_pop_rx(struct dw_i2s_dev *dev);\nint dw_pcm_register(struct platform_device *pdev);\n#else\nstatic inline void dw_pcm_push_tx(struct dw_i2s_dev *dev) { }\nstatic inline void dw_pcm_pop_rx(struct dw_i2s_dev *dev) { }\nstatic inline int dw_pcm_register(struct platform_device *pdev)\n{\n\treturn -EINVAL;\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}