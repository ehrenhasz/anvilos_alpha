{
  "module_name": "stm32_sai.h",
  "hash_id": "f80d9c1d2e3c62e155701460d92803a3abae463241840d58bf5e5392c3e406bc",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/stm/stm32_sai.h",
  "human_readable_source": " \n \n\n#include <linux/bitfield.h>\n\n \n\n \n#define STM_SAI_GCR\t\t0x00\n\n \n#define STM_SAI_CR1_REGX\t0x00\t \n#define STM_SAI_CR2_REGX\t0x04\n#define STM_SAI_FRCR_REGX\t0x08\n#define STM_SAI_SLOTR_REGX\t0x0C\n#define STM_SAI_IMR_REGX\t0x10\n#define STM_SAI_SR_REGX\t\t0x14\n#define STM_SAI_CLRFR_REGX\t0x18\n#define STM_SAI_DR_REGX\t\t0x1C\n\n \n#define STM_SAI_PDMCR_REGX\t0x40\n#define STM_SAI_PDMLY_REGX\t0x44\n\n \n#define STM_SAI_HWCFGR\t\t0x3F0\n#define STM_SAI_VERR\t\t0x3F4\n#define STM_SAI_IDR\t\t0x3F8\n#define STM_SAI_SIDR\t\t0x3FC\n\n \n#define SAI_GCR_SYNCIN_SHIFT\t0\n#define SAI_GCR_SYNCIN_WDTH\t2\n#define SAI_GCR_SYNCIN_MASK\tGENMASK(1, SAI_GCR_SYNCIN_SHIFT)\n#define SAI_GCR_SYNCIN_MAX\tFIELD_GET(SAI_GCR_SYNCIN_MASK,\\\n\t\t\t\tSAI_GCR_SYNCIN_MASK)\n\n#define SAI_GCR_SYNCOUT_SHIFT\t4\n#define SAI_GCR_SYNCOUT_MASK\tGENMASK(5, SAI_GCR_SYNCOUT_SHIFT)\n\n \n#define SAI_XCR1_RX_TX_SHIFT\t0\n#define SAI_XCR1_RX_TX\t\tBIT(SAI_XCR1_RX_TX_SHIFT)\n#define SAI_XCR1_SLAVE_SHIFT\t1\n#define SAI_XCR1_SLAVE\t\tBIT(SAI_XCR1_SLAVE_SHIFT)\n\n#define SAI_XCR1_PRTCFG_SHIFT\t2\n#define SAI_XCR1_PRTCFG_MASK\tGENMASK(3, SAI_XCR1_PRTCFG_SHIFT)\n#define SAI_XCR1_PRTCFG_SET(x)\t((x) << SAI_XCR1_PRTCFG_SHIFT)\n\n#define SAI_XCR1_DS_SHIFT\t5\n#define SAI_XCR1_DS_MASK\tGENMASK(7, SAI_XCR1_DS_SHIFT)\n#define SAI_XCR1_DS_SET(x)\t((x) << SAI_XCR1_DS_SHIFT)\n\n#define SAI_XCR1_LSBFIRST_SHIFT\t8\n#define SAI_XCR1_LSBFIRST\tBIT(SAI_XCR1_LSBFIRST_SHIFT)\n#define SAI_XCR1_CKSTR_SHIFT\t9\n#define SAI_XCR1_CKSTR\t\tBIT(SAI_XCR1_CKSTR_SHIFT)\n\n#define SAI_XCR1_SYNCEN_SHIFT\t10\n#define SAI_XCR1_SYNCEN_MASK\tGENMASK(11, SAI_XCR1_SYNCEN_SHIFT)\n#define SAI_XCR1_SYNCEN_SET(x)\t((x) << SAI_XCR1_SYNCEN_SHIFT)\n\n#define SAI_XCR1_MONO_SHIFT\t12\n#define SAI_XCR1_MONO\t\tBIT(SAI_XCR1_MONO_SHIFT)\n#define SAI_XCR1_OUTDRIV_SHIFT\t13\n#define SAI_XCR1_OUTDRIV\tBIT(SAI_XCR1_OUTDRIV_SHIFT)\n#define SAI_XCR1_SAIEN_SHIFT\t16\n#define SAI_XCR1_SAIEN\t\tBIT(SAI_XCR1_SAIEN_SHIFT)\n#define SAI_XCR1_DMAEN_SHIFT\t17\n#define SAI_XCR1_DMAEN\t\tBIT(SAI_XCR1_DMAEN_SHIFT)\n#define SAI_XCR1_NODIV_SHIFT\t19\n#define SAI_XCR1_NODIV\t\tBIT(SAI_XCR1_NODIV_SHIFT)\n\n#define SAI_XCR1_MCKDIV_SHIFT\t20\n#define SAI_XCR1_MCKDIV_WIDTH(x)\t(((x) == STM_SAI_STM32F4) ? 4 : 6)\n#define SAI_XCR1_MCKDIV_MASK(x) GENMASK((SAI_XCR1_MCKDIV_SHIFT + (x) - 1),\\\n\t\t\t\tSAI_XCR1_MCKDIV_SHIFT)\n#define SAI_XCR1_MCKDIV_SET(x)\t((x) << SAI_XCR1_MCKDIV_SHIFT)\n#define SAI_XCR1_MCKDIV_MAX(x)\t((1 << SAI_XCR1_MCKDIV_WIDTH(x)) - 1)\n\n#define SAI_XCR1_OSR_SHIFT\t26\n#define SAI_XCR1_OSR\t\tBIT(SAI_XCR1_OSR_SHIFT)\n\n#define SAI_XCR1_MCKEN_SHIFT\t27\n#define SAI_XCR1_MCKEN\t\tBIT(SAI_XCR1_MCKEN_SHIFT)\n\n \n#define SAI_XCR2_FTH_SHIFT\t0\n#define SAI_XCR2_FTH_MASK\tGENMASK(2, SAI_XCR2_FTH_SHIFT)\n#define SAI_XCR2_FTH_SET(x)\t((x) << SAI_XCR2_FTH_SHIFT)\n\n#define SAI_XCR2_FFLUSH_SHIFT\t3\n#define SAI_XCR2_FFLUSH\t\tBIT(SAI_XCR2_FFLUSH_SHIFT)\n#define SAI_XCR2_TRIS_SHIFT\t4\n#define SAI_XCR2_TRIS\t\tBIT(SAI_XCR2_TRIS_SHIFT)\n#define SAI_XCR2_MUTE_SHIFT\t5\n#define SAI_XCR2_MUTE\t\tBIT(SAI_XCR2_MUTE_SHIFT)\n#define SAI_XCR2_MUTEVAL_SHIFT\t6\n#define SAI_XCR2_MUTEVAL\tBIT(SAI_XCR2_MUTEVAL_SHIFT)\n\n#define SAI_XCR2_MUTECNT_SHIFT\t7\n#define SAI_XCR2_MUTECNT_MASK\tGENMASK(12, SAI_XCR2_MUTECNT_SHIFT)\n#define SAI_XCR2_MUTECNT_SET(x)\t((x) << SAI_XCR2_MUTECNT_SHIFT)\n\n#define SAI_XCR2_CPL_SHIFT\t13\n#define SAI_XCR2_CPL\t\tBIT(SAI_XCR2_CPL_SHIFT)\n\n#define SAI_XCR2_COMP_SHIFT\t14\n#define SAI_XCR2_COMP_MASK\tGENMASK(15, SAI_XCR2_COMP_SHIFT)\n#define SAI_XCR2_COMP_SET(x)\t((x) << SAI_XCR2_COMP_SHIFT)\n\n \n#define SAI_XFRCR_FRL_SHIFT\t0\n#define SAI_XFRCR_FRL_MASK\tGENMASK(7, SAI_XFRCR_FRL_SHIFT)\n#define SAI_XFRCR_FRL_SET(x)\t((x) << SAI_XFRCR_FRL_SHIFT)\n\n#define SAI_XFRCR_FSALL_SHIFT\t8\n#define SAI_XFRCR_FSALL_MASK\tGENMASK(14, SAI_XFRCR_FSALL_SHIFT)\n#define SAI_XFRCR_FSALL_SET(x)\t((x) << SAI_XFRCR_FSALL_SHIFT)\n\n#define SAI_XFRCR_FSDEF_SHIFT\t16\n#define SAI_XFRCR_FSDEF\t\tBIT(SAI_XFRCR_FSDEF_SHIFT)\n#define SAI_XFRCR_FSPOL_SHIFT\t17\n#define SAI_XFRCR_FSPOL\t\tBIT(SAI_XFRCR_FSPOL_SHIFT)\n#define SAI_XFRCR_FSOFF_SHIFT\t18\n#define SAI_XFRCR_FSOFF\t\tBIT(SAI_XFRCR_FSOFF_SHIFT)\n\n \n#define SAI_XSLOTR_FBOFF_SHIFT\t0\n#define SAI_XSLOTR_FBOFF_MASK\tGENMASK(4, SAI_XSLOTR_FBOFF_SHIFT)\n#define SAI_XSLOTR_FBOFF_SET(x)\t((x) << SAI_XSLOTR_FBOFF_SHIFT)\n\n#define SAI_XSLOTR_SLOTSZ_SHIFT\t6\n#define SAI_XSLOTR_SLOTSZ_MASK\tGENMASK(7, SAI_XSLOTR_SLOTSZ_SHIFT)\n#define SAI_XSLOTR_SLOTSZ_SET(x)\t((x) << SAI_XSLOTR_SLOTSZ_SHIFT)\n\n#define SAI_XSLOTR_NBSLOT_SHIFT 8\n#define SAI_XSLOTR_NBSLOT_MASK\tGENMASK(11, SAI_XSLOTR_NBSLOT_SHIFT)\n#define SAI_XSLOTR_NBSLOT_SET(x) ((x) << SAI_XSLOTR_NBSLOT_SHIFT)\n\n#define SAI_XSLOTR_SLOTEN_SHIFT\t16\n#define SAI_XSLOTR_SLOTEN_WIDTH\t16\n#define SAI_XSLOTR_SLOTEN_MASK\tGENMASK(31, SAI_XSLOTR_SLOTEN_SHIFT)\n#define SAI_XSLOTR_SLOTEN_SET(x) ((x) << SAI_XSLOTR_SLOTEN_SHIFT)\n\n \n#define SAI_XIMR_OVRUDRIE\tBIT(0)\n#define SAI_XIMR_MUTEDETIE\tBIT(1)\n#define SAI_XIMR_WCKCFGIE\tBIT(2)\n#define SAI_XIMR_FREQIE\t\tBIT(3)\n#define SAI_XIMR_CNRDYIE\tBIT(4)\n#define SAI_XIMR_AFSDETIE\tBIT(5)\n#define SAI_XIMR_LFSDETIE\tBIT(6)\n\n#define SAI_XIMR_SHIFT\t0\n#define SAI_XIMR_MASK\t\tGENMASK(6, SAI_XIMR_SHIFT)\n\n \n#define SAI_XSR_OVRUDR\t\tBIT(0)\n#define SAI_XSR_MUTEDET\t\tBIT(1)\n#define SAI_XSR_WCKCFG\t\tBIT(2)\n#define SAI_XSR_FREQ\t\tBIT(3)\n#define SAI_XSR_CNRDY\t\tBIT(4)\n#define SAI_XSR_AFSDET\t\tBIT(5)\n#define SAI_XSR_LFSDET\t\tBIT(6)\n\n#define SAI_XSR_SHIFT\t0\n#define SAI_XSR_MASK\t\tGENMASK(6, SAI_XSR_SHIFT)\n\n \n#define SAI_XCLRFR_COVRUDR\tBIT(0)\n#define SAI_XCLRFR_CMUTEDET\tBIT(1)\n#define SAI_XCLRFR_CWCKCFG\tBIT(2)\n#define SAI_XCLRFR_CFREQ\tBIT(3)\n#define SAI_XCLRFR_CCNRDY\tBIT(4)\n#define SAI_XCLRFR_CAFSDET\tBIT(5)\n#define SAI_XCLRFR_CLFSDET\tBIT(6)\n\n#define SAI_XCLRFR_SHIFT\t0\n#define SAI_XCLRFR_MASK\t\tGENMASK(6, SAI_XCLRFR_SHIFT)\n\n \n#define SAI_PDMCR_PDMEN\t\tBIT(0)\n\n#define SAI_PDMCR_MICNBR_SHIFT\t4\n#define SAI_PDMCR_MICNBR_MASK\tGENMASK(5, SAI_PDMCR_MICNBR_SHIFT)\n#define SAI_PDMCR_MICNBR_SET(x)\t((x) << SAI_PDMCR_MICNBR_SHIFT)\n\n#define SAI_PDMCR_CKEN1\t\tBIT(8)\n#define SAI_PDMCR_CKEN2\t\tBIT(9)\n#define SAI_PDMCR_CKEN3\t\tBIT(10)\n#define SAI_PDMCR_CKEN4\t\tBIT(11)\n\n \n#define SAI_PDMDLY_1L_SHIFT\t0\n#define SAI_PDMDLY_1L_MASK\tGENMASK(2, SAI_PDMDLY_1L_SHIFT)\n#define SAI_PDMDLY_1L_WIDTH\t3\n\n#define SAI_PDMDLY_1R_SHIFT\t4\n#define SAI_PDMDLY_1R_MASK\tGENMASK(6, SAI_PDMDLY_1R_SHIFT)\n#define SAI_PDMDLY_1R_WIDTH\t3\n\n#define SAI_PDMDLY_2L_SHIFT\t8\n#define SAI_PDMDLY_2L_MASK\tGENMASK(10, SAI_PDMDLY_2L_SHIFT)\n#define SAI_PDMDLY_2L_WIDTH\t3\n\n#define SAI_PDMDLY_2R_SHIFT\t12\n#define SAI_PDMDLY_2R_MASK\tGENMASK(14, SAI_PDMDLY_2R_SHIFT)\n#define SAI_PDMDLY_2R_WIDTH\t3\n\n#define SAI_PDMDLY_3L_SHIFT\t16\n#define SAI_PDMDLY_3L_MASK\tGENMASK(18, SAI_PDMDLY_3L_SHIFT)\n#define SAI_PDMDLY_3L_WIDTH\t3\n\n#define SAI_PDMDLY_3R_SHIFT\t20\n#define SAI_PDMDLY_3R_MASK\tGENMASK(22, SAI_PDMDLY_3R_SHIFT)\n#define SAI_PDMDLY_3R_WIDTH\t3\n\n#define SAI_PDMDLY_4L_SHIFT\t24\n#define SAI_PDMDLY_4L_MASK\tGENMASK(26, SAI_PDMDLY_4L_SHIFT)\n#define SAI_PDMDLY_4L_WIDTH\t3\n\n#define SAI_PDMDLY_4R_SHIFT\t28\n#define SAI_PDMDLY_4R_MASK\tGENMASK(30, SAI_PDMDLY_4R_SHIFT)\n#define SAI_PDMDLY_4R_WIDTH\t3\n\n \n\n \n#define SAI_HWCFGR_FIFO_SIZE\tGENMASK(7, 0)\n#define SAI_HWCFGR_SPDIF_PDM\tGENMASK(11, 8)\n#define SAI_HWCFGR_REGOUT\tGENMASK(19, 12)\n\n \n#define SAI_VERR_MIN_MASK\tGENMASK(3, 0)\n#define SAI_VERR_MAJ_MASK\tGENMASK(7, 4)\n\n \n#define SAI_IDR_ID_MASK\t\tGENMASK(31, 0)\n\n \n#define SAI_SIDR_ID_MASK\tGENMASK(31, 0)\n\n#define SAI_IPIDR_NUMBER\t0x00130031\n\n \n#define STM_SAI_STM32F4\t\tBIT(4)\n \n#define STM_SAI_STM32H7\t\t0x0\n\n#define STM_SAI_IS_F4(ip)\t((ip)->conf.version == STM_SAI_STM32F4)\n#define STM_SAI_HAS_SPDIF_PDM(ip)\\\n\t\t\t\t((ip)->pdata->conf.has_spdif_pdm)\n\nenum stm32_sai_syncout {\n\tSTM_SAI_SYNC_OUT_NONE,\n\tSTM_SAI_SYNC_OUT_A,\n\tSTM_SAI_SYNC_OUT_B,\n};\n\n \nstruct stm32_sai_conf {\n\tu32 version;\n\tu32 fifo_size;\n\tbool has_spdif_pdm;\n};\n\n \nstruct stm32_sai_data {\n\tstruct platform_device *pdev;\n\tvoid __iomem *base;\n\tstruct clk *pclk;\n\tstruct clk *clk_x8k;\n\tstruct clk *clk_x11k;\n\tstruct stm32_sai_conf conf;\n\tint irq;\n\tint (*set_sync)(struct stm32_sai_data *sai,\n\t\t\tstruct device_node *np_provider, int synco, int synci);\n\tu32 gcr;\n};\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}