{
  "module_name": "imx-ssi.h",
  "hash_id": "1ef6d8208757c803382ada17bfd4f4a26ee2816d2bf6f1fca37d3eebd9db834b",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/fsl/imx-ssi.h",
  "human_readable_source": " \n\n#ifndef _IMX_SSI_H\n#define _IMX_SSI_H\n\n#define SSI_STX0\t0x00\n#define SSI_STX1\t0x04\n#define SSI_SRX0\t0x08\n#define SSI_SRX1\t0x0c\n\n#define SSI_SCR\t\t0x10\n#define SSI_SCR_CLK_IST\t\t(1 << 9)\n#define SSI_SCR_CLK_IST_SHIFT\t9\n#define SSI_SCR_TCH_EN\t\t(1 << 8)\n#define SSI_SCR_SYS_CLK_EN\t(1 << 7)\n#define SSI_SCR_I2S_MODE_NORM\t(0 << 5)\n#define SSI_SCR_I2S_MODE_MSTR\t(1 << 5)\n#define SSI_SCR_I2S_MODE_SLAVE\t(2 << 5)\n#define SSI_I2S_MODE_MASK\t(3 << 5)\n#define SSI_SCR_SYN\t\t(1 << 4)\n#define SSI_SCR_NET\t\t(1 << 3)\n#define SSI_SCR_RE\t\t(1 << 2)\n#define SSI_SCR_TE\t\t(1 << 1)\n#define SSI_SCR_SSIEN\t\t(1 << 0)\n\n#define SSI_SISR\t0x14\n#define SSI_SISR_MASK\t\t((1 << 19) - 1)\n#define SSI_SISR_CMDAU\t\t(1 << 18)\n#define SSI_SISR_CMDDU\t\t(1 << 17)\n#define SSI_SISR_RXT\t\t(1 << 16)\n#define SSI_SISR_RDR1\t\t(1 << 15)\n#define SSI_SISR_RDR0\t\t(1 << 14)\n#define SSI_SISR_TDE1\t\t(1 << 13)\n#define SSI_SISR_TDE0\t\t(1 << 12)\n#define SSI_SISR_ROE1\t\t(1 << 11)\n#define SSI_SISR_ROE0\t\t(1 << 10)\n#define SSI_SISR_TUE1\t\t(1 << 9)\n#define SSI_SISR_TUE0\t\t(1 << 8)\n#define SSI_SISR_TFS\t\t(1 << 7)\n#define SSI_SISR_RFS\t\t(1 << 6)\n#define SSI_SISR_TLS\t\t(1 << 5)\n#define SSI_SISR_RLS\t\t(1 << 4)\n#define SSI_SISR_RFF1\t\t(1 << 3)\n#define SSI_SISR_RFF0\t\t(1 << 2)\n#define SSI_SISR_TFE1\t\t(1 << 1)\n#define SSI_SISR_TFE0\t\t(1 << 0)\n\n#define SSI_SIER\t0x18\n#define SSI_SIER_RDMAE\t\t(1 << 22)\n#define SSI_SIER_RIE\t\t(1 << 21)\n#define SSI_SIER_TDMAE\t\t(1 << 20)\n#define SSI_SIER_TIE\t\t(1 << 19)\n#define SSI_SIER_CMDAU_EN\t(1 << 18)\n#define SSI_SIER_CMDDU_EN\t(1 << 17)\n#define SSI_SIER_RXT_EN\t\t(1 << 16)\n#define SSI_SIER_RDR1_EN\t(1 << 15)\n#define SSI_SIER_RDR0_EN\t(1 << 14)\n#define SSI_SIER_TDE1_EN\t(1 << 13)\n#define SSI_SIER_TDE0_EN\t(1 << 12)\n#define SSI_SIER_ROE1_EN\t(1 << 11)\n#define SSI_SIER_ROE0_EN\t(1 << 10)\n#define SSI_SIER_TUE1_EN\t(1 << 9)\n#define SSI_SIER_TUE0_EN\t(1 << 8)\n#define SSI_SIER_TFS_EN\t\t(1 << 7)\n#define SSI_SIER_RFS_EN\t\t(1 << 6)\n#define SSI_SIER_TLS_EN\t\t(1 << 5)\n#define SSI_SIER_RLS_EN\t\t(1 << 4)\n#define SSI_SIER_RFF1_EN\t(1 << 3)\n#define SSI_SIER_RFF0_EN\t(1 << 2)\n#define SSI_SIER_TFE1_EN\t(1 << 1)\n#define SSI_SIER_TFE0_EN\t(1 << 0)\n\n#define SSI_STCR\t0x1c\n#define SSI_STCR_TXBIT0\t\t(1 << 9)\n#define SSI_STCR_TFEN1\t\t(1 << 8)\n#define SSI_STCR_TFEN0\t\t(1 << 7)\n#define SSI_FIFO_ENABLE_0_SHIFT 7\n#define SSI_STCR_TFDIR\t\t(1 << 6)\n#define SSI_STCR_TXDIR\t\t(1 << 5)\n#define SSI_STCR_TSHFD\t\t(1 << 4)\n#define SSI_STCR_TSCKP\t\t(1 << 3)\n#define SSI_STCR_TFSI\t\t(1 << 2)\n#define SSI_STCR_TFSL\t\t(1 << 1)\n#define SSI_STCR_TEFS\t\t(1 << 0)\n\n#define SSI_SRCR\t0x20\n#define SSI_SRCR_RXBIT0\t\t(1 << 9)\n#define SSI_SRCR_RFEN1\t\t(1 << 8)\n#define SSI_SRCR_RFEN0\t\t(1 << 7)\n#define SSI_FIFO_ENABLE_0_SHIFT 7\n#define SSI_SRCR_RFDIR\t\t(1 << 6)\n#define SSI_SRCR_RXDIR\t\t(1 << 5)\n#define SSI_SRCR_RSHFD\t\t(1 << 4)\n#define SSI_SRCR_RSCKP\t\t(1 << 3)\n#define SSI_SRCR_RFSI\t\t(1 << 2)\n#define SSI_SRCR_RFSL\t\t(1 << 1)\n#define SSI_SRCR_REFS\t\t(1 << 0)\n\n#define SSI_SRCCR\t\t0x28\n#define SSI_SRCCR_DIV2\t\t(1 << 18)\n#define SSI_SRCCR_PSR\t\t(1 << 17)\n#define SSI_SRCCR_WL(x)\t\t((((x) - 2) >> 1) << 13)\n#define SSI_SRCCR_DC(x)\t\t(((x) & 0x1f) << 8)\n#define SSI_SRCCR_PM(x)\t\t(((x) & 0xff) << 0)\n#define SSI_SRCCR_WL_MASK\t(0xf << 13)\n#define SSI_SRCCR_DC_MASK\t(0x1f << 8)\n#define SSI_SRCCR_PM_MASK\t(0xff << 0)\n\n#define SSI_STCCR\t\t0x24\n#define SSI_STCCR_DIV2\t\t(1 << 18)\n#define SSI_STCCR_PSR\t\t(1 << 17)\n#define SSI_STCCR_WL(x)\t\t((((x) - 2) >> 1) << 13)\n#define SSI_STCCR_DC(x)\t\t(((x) & 0x1f) << 8)\n#define SSI_STCCR_PM(x)\t\t(((x) & 0xff) << 0)\n#define SSI_STCCR_WL_MASK\t(0xf << 13)\n#define SSI_STCCR_DC_MASK\t(0x1f << 8)\n#define SSI_STCCR_PM_MASK\t(0xff << 0)\n\n#define SSI_SFCSR\t0x2c\n#define SSI_SFCSR_RFCNT1(x)\t(((x) & 0xf) << 28)\n#define SSI_RX_FIFO_1_COUNT_SHIFT 28\n#define SSI_SFCSR_TFCNT1(x)\t(((x) & 0xf) << 24)\n#define SSI_TX_FIFO_1_COUNT_SHIFT 24\n#define SSI_SFCSR_RFWM1(x)\t(((x) & 0xf) << 20)\n#define SSI_SFCSR_TFWM1(x)\t(((x) & 0xf) << 16)\n#define SSI_SFCSR_RFCNT0(x)\t(((x) & 0xf) << 12)\n#define SSI_RX_FIFO_0_COUNT_SHIFT 12\n#define SSI_SFCSR_TFCNT0(x)\t(((x) & 0xf) <<  8)\n#define SSI_TX_FIFO_0_COUNT_SHIFT 8\n#define SSI_SFCSR_RFWM0(x)\t(((x) & 0xf) <<  4)\n#define SSI_SFCSR_TFWM0(x)\t(((x) & 0xf) <<  0)\n#define SSI_SFCSR_RFWM0_MASK\t(0xf <<  4)\n#define SSI_SFCSR_TFWM0_MASK\t(0xf <<  0)\n\n#define SSI_STR\t\t0x30\n#define SSI_STR_TEST\t\t(1 << 15)\n#define SSI_STR_RCK2TCK\t\t(1 << 14)\n#define SSI_STR_RFS2TFS\t\t(1 << 13)\n#define SSI_STR_RXSTATE(x)\t(((x) & 0xf) << 8)\n#define SSI_STR_TXD2RXD\t\t(1 <<  7)\n#define SSI_STR_TCK2RCK\t\t(1 <<  6)\n#define SSI_STR_TFS2RFS\t\t(1 <<  5)\n#define SSI_STR_TXSTATE(x)\t(((x) & 0xf) << 0)\n\n#define SSI_SOR\t\t0x34\n#define SSI_SOR_CLKOFF\t\t(1 << 6)\n#define SSI_SOR_RX_CLR\t\t(1 << 5)\n#define SSI_SOR_TX_CLR\t\t(1 << 4)\n#define SSI_SOR_INIT\t\t(1 << 3)\n#define SSI_SOR_WAIT(x)\t\t(((x) & 0x3) << 1)\n#define SSI_SOR_WAIT_MASK\t(0x3 << 1)\n#define SSI_SOR_SYNRST\t\t(1 << 0)\n\n#define SSI_SACNT\t0x38\n#define SSI_SACNT_FRDIV(x)\t(((x) & 0x3f) << 5)\n#define SSI_SACNT_WR\t\t(1 << 4)\n#define SSI_SACNT_RD\t\t(1 << 3)\n#define SSI_SACNT_TIF\t\t(1 << 2)\n#define SSI_SACNT_FV\t\t(1 << 1)\n#define SSI_SACNT_AC97EN\t(1 << 0)\n\n#define SSI_SACADD\t0x3c\n#define SSI_SACDAT\t0x40\n#define SSI_SATAG\t0x44\n#define SSI_STMSK\t0x48\n#define SSI_SRMSK\t0x4c\n#define SSI_SACCST\t0x50\n#define SSI_SACCEN\t0x54\n#define SSI_SACCDIS\t0x58\n\n \n#define IMX_SSP_SYS_CLK\t\t0\n\n \n#define IMX_SSI_TX_DIV_2\t0\n#define IMX_SSI_TX_DIV_PSR\t1\n#define IMX_SSI_TX_DIV_PM\t2\n#define IMX_SSI_RX_DIV_2\t3\n#define IMX_SSI_RX_DIV_PSR\t4\n#define IMX_SSI_RX_DIV_PM\t5\n\n#define DRV_NAME \"imx-ssi\"\n\n#include <linux/dmaengine.h>\n#include <linux/dma/imx-dma.h>\n#include <sound/dmaengine_pcm.h>\n#include \"imx-pcm.h\"\n\nstruct imx_ssi {\n\tstruct platform_device *ac97_dev;\n\n\tstruct snd_soc_dai *imx_ac97;\n\tstruct clk *clk;\n\tvoid __iomem *base;\n\tint irq;\n\tint fiq_enable;\n\tunsigned int offset;\n\n\tunsigned int flags;\n\n\tvoid (*ac97_reset) (struct snd_ac97 *ac97);\n\tvoid (*ac97_warm_reset)(struct snd_ac97 *ac97);\n\n\tstruct snd_dmaengine_dai_dma_data dma_params_rx;\n\tstruct snd_dmaengine_dai_dma_data dma_params_tx;\n\tstruct imx_dma_data filter_data_tx;\n\tstruct imx_dma_data filter_data_rx;\n\tstruct imx_pcm_fiq_params fiq_params;\n\n\tint fiq_init;\n\tint dma_init;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}