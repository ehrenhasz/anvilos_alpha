{
  "module_name": "fsl_sai.h",
  "hash_id": "5e30b63d9c10766360b0c71463b47ccc0c078b0afed8184cd5cd6a90dcee5b69",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/fsl/fsl_sai.h",
  "human_readable_source": " \n \n\n#ifndef __FSL_SAI_H\n#define __FSL_SAI_H\n\n#include <linux/dma/imx-dma.h>\n#include <sound/dmaengine_pcm.h>\n\n#define FSL_SAI_FORMATS (SNDRV_PCM_FMTBIT_S16_LE |\\\n\t\t\t SNDRV_PCM_FMTBIT_S20_3LE |\\\n\t\t\t SNDRV_PCM_FMTBIT_S24_LE |\\\n\t\t\t SNDRV_PCM_FMTBIT_S32_LE |\\\n\t\t\t SNDRV_PCM_FMTBIT_DSD_U8 |\\\n\t\t\t SNDRV_PCM_FMTBIT_DSD_U16_LE |\\\n\t\t\t SNDRV_PCM_FMTBIT_DSD_U32_LE)\n\n \n#define FSL_SAI_VERID\t0x00  \n#define FSL_SAI_PARAM\t0x04  \n#define FSL_SAI_TCSR(ofs)\t(0x00 + ofs)  \n#define FSL_SAI_TCR1(ofs)\t(0x04 + ofs)  \n#define FSL_SAI_TCR2(ofs)\t(0x08 + ofs)  \n#define FSL_SAI_TCR3(ofs)\t(0x0c + ofs)  \n#define FSL_SAI_TCR4(ofs)\t(0x10 + ofs)  \n#define FSL_SAI_TCR5(ofs)\t(0x14 + ofs)  \n#define FSL_SAI_TDR0\t0x20  \n#define FSL_SAI_TDR1\t0x24  \n#define FSL_SAI_TDR2\t0x28  \n#define FSL_SAI_TDR3\t0x2C  \n#define FSL_SAI_TDR4\t0x30  \n#define FSL_SAI_TDR5\t0x34  \n#define FSL_SAI_TDR6\t0x38  \n#define FSL_SAI_TDR7\t0x3C  \n#define FSL_SAI_TFR0\t0x40  \n#define FSL_SAI_TFR1\t0x44  \n#define FSL_SAI_TFR2\t0x48  \n#define FSL_SAI_TFR3\t0x4C  \n#define FSL_SAI_TFR4\t0x50  \n#define FSL_SAI_TFR5\t0x54  \n#define FSL_SAI_TFR6\t0x58  \n#define FSL_SAI_TFR7\t0x5C  \n#define FSL_SAI_TMR\t0x60  \n#define FSL_SAI_TTCTL\t0x70  \n#define FSL_SAI_TTCTN\t0x74  \n#define FSL_SAI_TBCTN\t0x78  \n#define FSL_SAI_TTCAP\t0x7C  \n#define FSL_SAI_RCSR(ofs)\t(0x80 + ofs)  \n#define FSL_SAI_RCR1(ofs)\t(0x84 + ofs) \n#define FSL_SAI_RCR2(ofs)\t(0x88 + ofs)  \n#define FSL_SAI_RCR3(ofs)\t(0x8c + ofs)  \n#define FSL_SAI_RCR4(ofs)\t(0x90 + ofs)  \n#define FSL_SAI_RCR5(ofs)\t(0x94 + ofs)  \n#define FSL_SAI_RDR0\t0xa0  \n#define FSL_SAI_RDR1\t0xa4  \n#define FSL_SAI_RDR2\t0xa8  \n#define FSL_SAI_RDR3\t0xac  \n#define FSL_SAI_RDR4\t0xb0  \n#define FSL_SAI_RDR5\t0xb4  \n#define FSL_SAI_RDR6\t0xb8  \n#define FSL_SAI_RDR7\t0xbc  \n#define FSL_SAI_RFR0\t0xc0  \n#define FSL_SAI_RFR1\t0xc4  \n#define FSL_SAI_RFR2\t0xc8  \n#define FSL_SAI_RFR3\t0xcc  \n#define FSL_SAI_RFR4\t0xd0  \n#define FSL_SAI_RFR5\t0xd4  \n#define FSL_SAI_RFR6\t0xd8  \n#define FSL_SAI_RFR7\t0xdc  \n#define FSL_SAI_RMR\t0xe0  \n#define FSL_SAI_RTCTL\t0xf0  \n#define FSL_SAI_RTCTN\t0xf4  \n#define FSL_SAI_RBCTN\t0xf8  \n#define FSL_SAI_RTCAP\t0xfc  \n\n#define FSL_SAI_MCTL\t0x100  \n#define FSL_SAI_MDIV\t0x104  \n\n#define FSL_SAI_xCSR(tx, ofs)\t(tx ? FSL_SAI_TCSR(ofs) : FSL_SAI_RCSR(ofs))\n#define FSL_SAI_xCR1(tx, ofs)\t(tx ? FSL_SAI_TCR1(ofs) : FSL_SAI_RCR1(ofs))\n#define FSL_SAI_xCR2(tx, ofs)\t(tx ? FSL_SAI_TCR2(ofs) : FSL_SAI_RCR2(ofs))\n#define FSL_SAI_xCR3(tx, ofs)\t(tx ? FSL_SAI_TCR3(ofs) : FSL_SAI_RCR3(ofs))\n#define FSL_SAI_xCR4(tx, ofs)\t(tx ? FSL_SAI_TCR4(ofs) : FSL_SAI_RCR4(ofs))\n#define FSL_SAI_xCR5(tx, ofs)\t(tx ? FSL_SAI_TCR5(ofs) : FSL_SAI_RCR5(ofs))\n#define FSL_SAI_xDR0(tx)\t(tx ? FSL_SAI_TDR0 : FSL_SAI_RDR0)\n#define FSL_SAI_xFR0(tx)\t(tx ? FSL_SAI_TFR0 : FSL_SAI_RFR0)\n#define FSL_SAI_xMR(tx)\t\t(tx ? FSL_SAI_TMR : FSL_SAI_RMR)\n\n \n#define FSL_SAI_CSR_TERE\tBIT(31)\n#define FSL_SAI_CSR_SE\t\tBIT(30)\n#define FSL_SAI_CSR_BCE\t\tBIT(28)\n#define FSL_SAI_CSR_FR\t\tBIT(25)\n#define FSL_SAI_CSR_SR\t\tBIT(24)\n#define FSL_SAI_CSR_xF_SHIFT\t16\n#define FSL_SAI_CSR_xF_W_SHIFT\t18\n#define FSL_SAI_CSR_xF_MASK\t(0x1f << FSL_SAI_CSR_xF_SHIFT)\n#define FSL_SAI_CSR_xF_W_MASK\t(0x7 << FSL_SAI_CSR_xF_W_SHIFT)\n#define FSL_SAI_CSR_WSF\t\tBIT(20)\n#define FSL_SAI_CSR_SEF\t\tBIT(19)\n#define FSL_SAI_CSR_FEF\t\tBIT(18)\n#define FSL_SAI_CSR_FWF\t\tBIT(17)\n#define FSL_SAI_CSR_FRF\t\tBIT(16)\n#define FSL_SAI_CSR_xIE_SHIFT\t8\n#define FSL_SAI_CSR_xIE_MASK\t(0x1f << FSL_SAI_CSR_xIE_SHIFT)\n#define FSL_SAI_CSR_WSIE\tBIT(12)\n#define FSL_SAI_CSR_SEIE\tBIT(11)\n#define FSL_SAI_CSR_FEIE\tBIT(10)\n#define FSL_SAI_CSR_FWIE\tBIT(9)\n#define FSL_SAI_CSR_FRIE\tBIT(8)\n#define FSL_SAI_CSR_FRDE\tBIT(0)\n\n \n#define FSL_SAI_CR1_RFW_MASK(x)\t((x) - 1)\n\n \n#define FSL_SAI_CR2_SYNC\tBIT(30)\n#define FSL_SAI_CR2_BCI\t\tBIT(28)\n#define FSL_SAI_CR2_MSEL_MASK\t(0x3 << 26)\n#define FSL_SAI_CR2_MSEL_BUS\t0\n#define FSL_SAI_CR2_MSEL_MCLK1\tBIT(26)\n#define FSL_SAI_CR2_MSEL_MCLK2\tBIT(27)\n#define FSL_SAI_CR2_MSEL_MCLK3\t(BIT(26) | BIT(27))\n#define FSL_SAI_CR2_MSEL(ID)\t((ID) << 26)\n#define FSL_SAI_CR2_BCP\t\tBIT(25)\n#define FSL_SAI_CR2_BCD_MSTR\tBIT(24)\n#define FSL_SAI_CR2_BYP\t\tBIT(23)  \n#define FSL_SAI_CR2_DIV_MASK\t0xff\n\n \n#define FSL_SAI_CR3_TRCE(x)     ((x) << 16)\n#define FSL_SAI_CR3_TRCE_MASK\tGENMASK(23, 16)\n#define FSL_SAI_CR3_WDFL(x)\t(x)\n#define FSL_SAI_CR3_WDFL_MASK\t0x1f\n\n \n\n#define FSL_SAI_CR4_FCONT\tBIT(28)\n#define FSL_SAI_CR4_FCOMB_SHIFT BIT(26)\n#define FSL_SAI_CR4_FCOMB_SOFT  BIT(27)\n#define FSL_SAI_CR4_FCOMB_MASK  (0x3 << 26)\n#define FSL_SAI_CR4_FPACK_8     (0x2 << 24)\n#define FSL_SAI_CR4_FPACK_16    (0x3 << 24)\n#define FSL_SAI_CR4_FRSZ(x)\t(((x) - 1) << 16)\n#define FSL_SAI_CR4_FRSZ_MASK\t(0x1f << 16)\n#define FSL_SAI_CR4_SYWD(x)\t(((x) - 1) << 8)\n#define FSL_SAI_CR4_SYWD_MASK\t(0x1f << 8)\n#define FSL_SAI_CR4_CHMOD       BIT(5)\n#define FSL_SAI_CR4_CHMOD_MASK  BIT(5)\n#define FSL_SAI_CR4_MF\t\tBIT(4)\n#define FSL_SAI_CR4_FSE\t\tBIT(3)\n#define FSL_SAI_CR4_FSP\t\tBIT(1)\n#define FSL_SAI_CR4_FSD_MSTR\tBIT(0)\n\n \n#define FSL_SAI_CR5_WNW(x)\t(((x) - 1) << 24)\n#define FSL_SAI_CR5_WNW_MASK\t(0x1f << 24)\n#define FSL_SAI_CR5_W0W(x)\t(((x) - 1) << 16)\n#define FSL_SAI_CR5_W0W_MASK\t(0x1f << 16)\n#define FSL_SAI_CR5_FBT(x)\t((x) << 8)\n#define FSL_SAI_CR5_FBT_MASK\t(0x1f << 8)\n\n \n#define FSL_SAI_MCTL_MCLK_EN\tBIT(30)\t \n#define FSL_SAI_MCTL_MSEL_MASK\t(0x3 << 24)\n#define FSL_SAI_MCTL_MSEL(ID)   ((ID) << 24)\n#define FSL_SAI_MCTL_MSEL_BUS\t0\n#define FSL_SAI_MCTL_MSEL_MCLK1\tBIT(24)\n#define FSL_SAI_MCTL_MSEL_MCLK2\tBIT(25)\n#define FSL_SAI_MCTL_MSEL_MCLK3\t(BIT(24) | BIT(25))\n#define FSL_SAI_MCTL_DIV_EN\tBIT(23)\n#define FSL_SAI_MCTL_DIV_MASK\t0xFF\n\n \n#define FSL_SAI_VERID_MAJOR_SHIFT   24\n#define FSL_SAI_VERID_MAJOR_MASK    GENMASK(31, 24)\n#define FSL_SAI_VERID_MINOR_SHIFT   16\n#define FSL_SAI_VERID_MINOR_MASK    GENMASK(23, 16)\n#define FSL_SAI_VERID_FEATURE_SHIFT 0\n#define FSL_SAI_VERID_FEATURE_MASK  GENMASK(15, 0)\n#define FSL_SAI_VERID_EFIFO_EN\t    BIT(0)\n#define FSL_SAI_VERID_TSTMP_EN\t    BIT(1)\n\n \n#define FSL_SAI_PARAM_SPF_SHIFT\t    16\n#define FSL_SAI_PARAM_SPF_MASK\t    GENMASK(19, 16)\n#define FSL_SAI_PARAM_WPF_SHIFT\t    8\n#define FSL_SAI_PARAM_WPF_MASK\t    GENMASK(11, 8)\n#define FSL_SAI_PARAM_DLN_MASK\t    GENMASK(3, 0)\n\n \n#define FSL_SAI_MDIV_MASK\t    0xFFFFF\n\n \n#define FSL_SAI_xTCTL_TSEN         BIT(0)\n#define FSL_SAI_xTCTL_TSINC        BIT(1)\n#define FSL_SAI_xTCTL_RTSC         BIT(8)\n#define FSL_SAI_xTCTL_RBC          BIT(9)\n\n \n#define FSL_SAI_DMA\t\tBIT(0)\n#define FSL_SAI_USE_AC97\tBIT(1)\n#define FSL_SAI_NET\t\tBIT(2)\n#define FSL_SAI_TRA_SYN\t\tBIT(3)\n#define FSL_SAI_REC_SYN\t\tBIT(4)\n#define FSL_SAI_USE_I2S_SLAVE\tBIT(5)\n\n \n#define FSL_SAI_CLK_BUS\t\t0\n#define FSL_SAI_CLK_MAST1\t1\n#define FSL_SAI_CLK_MAST2\t2\n#define FSL_SAI_CLK_MAST3\t3\n\n#define FSL_SAI_MCLK_MAX\t4\n\n \n#define FSL_SAI_MAXBURST_TX 6\n#define FSL_SAI_MAXBURST_RX 6\n\n#define PMQOS_CPU_LATENCY   BIT(0)\n\n \n#define FSL_SAI_DL_NUM\t\t(8)\n \n#define FSL_SAI_DL_DEFAULT\t(0)\n#define FSL_SAI_DL_I2S\t\tBIT(0)\n#define FSL_SAI_DL_PDM\t\tBIT(1)\n\nstruct fsl_sai_soc_data {\n\tbool use_imx_pcm;\n\tbool use_edma;\n\tbool mclk0_is_mclk1;\n\tbool mclk_with_tere;\n\tunsigned int fifo_depth;\n\tunsigned int pins;\n\tunsigned int reg_offset;\n\tunsigned int flags;\n\tunsigned int max_register;\n\tunsigned int max_burst[2];\n};\n\n \nstruct fsl_sai_verid {\n\tu32 version;\n\tu32 feature;\n};\n\n \nstruct fsl_sai_param {\n\tu32 slot_num;\n\tu32 fifo_depth;\n\tu32 dataline;\n};\n\nstruct fsl_sai_dl_cfg {\n\tunsigned int type;\n\tunsigned int pins[2];\n\tunsigned int mask[2];\n\tunsigned int start_off[2];\n\tunsigned int next_off[2];\n};\n\nstruct fsl_sai {\n\tstruct platform_device *pdev;\n\tstruct regmap *regmap;\n\tstruct clk *bus_clk;\n\tstruct clk *mclk_clk[FSL_SAI_MCLK_MAX];\n\tstruct clk *pll8k_clk;\n\tstruct clk *pll11k_clk;\n\tstruct resource *res;\n\n\tbool is_consumer_mode;\n\tbool is_lsb_first;\n\tbool is_dsp_mode;\n\tbool is_pdm_mode;\n\tbool is_multi_fifo_dma;\n\tbool synchronous[2];\n\tstruct fsl_sai_dl_cfg *dl_cfg;\n\tunsigned int dl_cfg_cnt;\n\tbool mclk_direction_output;\n\n\tunsigned int mclk_id[2];\n\tunsigned int mclk_streams;\n\tunsigned int slots;\n\tunsigned int slot_width;\n\tunsigned int bclk_ratio;\n\n\tconst struct fsl_sai_soc_data *soc_data;\n\tstruct snd_soc_dai_driver cpu_dai_drv;\n\tstruct snd_dmaengine_dai_dma_data dma_params_rx;\n\tstruct snd_dmaengine_dai_dma_data dma_params_tx;\n\tstruct fsl_sai_verid verid;\n\tstruct fsl_sai_param param;\n\tstruct pm_qos_request pm_qos_req;\n\tstruct pinctrl *pinctrl;\n\tstruct pinctrl_state *pins_state;\n\tstruct sdma_peripheral_config audio_config[2];\n};\n\n#define TX 1\n#define RX 0\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}