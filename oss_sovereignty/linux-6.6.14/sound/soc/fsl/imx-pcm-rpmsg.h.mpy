{
  "module_name": "imx-pcm-rpmsg.h",
  "hash_id": "0b1bce069434728c94f7534b64a29d5102b00a6ab4f5189ea079a4921328de77",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/fsl/imx-pcm-rpmsg.h",
  "human_readable_source": " \n \n\n#ifndef _IMX_PCM_RPMSG_H\n#define _IMX_PCM_RPMSG_H\n\n#include <linux/pm_qos.h>\n#include <linux/interrupt.h>\n#include <sound/dmaengine_pcm.h>\n\n#define RPMSG_TIMEOUT 1000\n\n \n#define TX_OPEN\t\t0x0\n#define\tTX_START\t0x1\n#define\tTX_PAUSE\t0x2\n#define\tTX_RESTART\t0x3\n#define\tTX_TERMINATE\t0x4\n#define\tTX_CLOSE\t0x5\n#define TX_HW_PARAM\t0x6\n#define\tTX_BUFFER\t0x7\n#define\tTX_SUSPEND\t0x8\n#define\tTX_RESUME\t0x9\n\n#define\tRX_OPEN\t\t0xA\n#define\tRX_START\t0xB\n#define\tRX_PAUSE\t0xC\n#define\tRX_RESTART\t0xD\n#define\tRX_TERMINATE\t0xE\n#define\tRX_CLOSE\t0xF\n#define\tRX_HW_PARAM\t0x10\n#define\tRX_BUFFER\t0x11\n#define\tRX_SUSPEND\t0x12\n#define\tRX_RESUME\t0x13\n#define SET_CODEC_VALUE 0x14\n#define GET_CODEC_VALUE 0x15\n#define\tTX_POINTER\t0x16\n#define\tRX_POINTER\t0x17\n \n#define MSG_TYPE_A_NUM  0x18\n\n \n#define\tTX_PERIOD_DONE\t0x0\n#define\tRX_PERIOD_DONE\t0x1\n \n#define MSG_TYPE_C_NUM  0x2\n\n#define MSG_MAX_NUM     (MSG_TYPE_A_NUM + MSG_TYPE_C_NUM)\n\n#define MSG_TYPE_A\t0x0\n#define MSG_TYPE_B\t0x1\n#define MSG_TYPE_C\t0x2\n\n#define RESP_NONE\t\t0x0\n#define RESP_NOT_ALLOWED\t0x1\n#define\tRESP_SUCCESS\t\t0x2\n#define\tRESP_FAILED\t\t0x3\n\n#define\tRPMSG_S16_LE\t\t0x0\n#define\tRPMSG_S24_LE\t\t0x1\n#define\tRPMSG_S32_LE\t\t0x2\n#define\tRPMSG_DSD_U16_LE\t49   \n#define\tRPMSG_DSD_U24_LE\t0x4\n#define\tRPMSG_DSD_U32_LE\t50   \n\n#define\tRPMSG_CH_LEFT\t\t0x0\n#define\tRPMSG_CH_RIGHT\t\t0x1\n#define\tRPMSG_CH_STEREO\t\t0x2\n\n#define WORK_MAX_NUM    0x30\n\n \n#define IMX_RMPSG_LIFECYCLE     1\n#define IMX_RPMSG_PMIC          2\n#define IMX_RPMSG_AUDIO         3\n#define IMX_RPMSG_KEY           4\n#define IMX_RPMSG_GPIO          5\n#define IMX_RPMSG_RTC           6\n#define IMX_RPMSG_SENSOR        7\n\n \n#define IMX_RMPSG_MAJOR         1\n#define IMX_RMPSG_MINOR         0\n\n#define TX SNDRV_PCM_STREAM_PLAYBACK\n#define RX SNDRV_PCM_STREAM_CAPTURE\n\n \nstruct rpmsg_head {\n\tu8 cate;\n\tu8 major;\n\tu8 minor;\n\tu8 type;\n\tu8 cmd;\n\tu8 reserved[5];\n} __packed;\n\n \nstruct param_s {\n\tunsigned char audioindex;\n\tunsigned char format;\n\tunsigned char channels;\n\tunsigned int  rate;\n\tunsigned int  buffer_addr;\n\tunsigned int  buffer_size;\n\tunsigned int  period_size;\n\tunsigned int  buffer_tail;\n} __packed;\n\n \nstruct param_r {\n\tunsigned char audioindex;\n\tunsigned char resp;\n\tunsigned char reserved1[1];\n\tunsigned int  buffer_offset;\n\tunsigned int  reg_addr;\n\tunsigned int  reg_data;\n\tunsigned char reserved2[4];\n\tunsigned int  buffer_tail;\n} __packed;\n\n \nstruct rpmsg_s_msg {\n\tstruct rpmsg_head header;\n\tstruct param_s    param;\n};\n\n \nstruct rpmsg_r_msg {\n\tstruct rpmsg_head header;\n\tstruct param_r    param;\n};\n\n \nstruct rpmsg_msg {\n\tstruct rpmsg_s_msg  s_msg;\n\tstruct rpmsg_r_msg  r_msg;\n};\n\n \nstruct work_of_rpmsg {\n\tstruct rpmsg_info   *info;\n\t \n\tstruct rpmsg_msg    msg;\n\tstruct work_struct  work;\n};\n\n \nstruct stream_timer {\n\tstruct timer_list   timer;\n\tstruct rpmsg_info   *info;\n\tstruct snd_pcm_substream *substream;\n};\n\ntypedef void (*dma_callback)(void *arg);\n\n \nstruct rpmsg_info {\n\tstruct rpmsg_device      *rpdev;\n\tstruct device            *dev;\n\tstruct completion        cmd_complete;\n\tstruct pm_qos_request    pm_qos_req;\n\n\t \n\tstruct rpmsg_r_msg       r_msg;\n\tstruct rpmsg_msg         msg[MSG_MAX_NUM];\n\t \n\tstruct rpmsg_msg         notify[2];\n\tbool                     notify_updated[2];\n\n\tstruct workqueue_struct  *rpmsg_wq;\n\tstruct work_of_rpmsg\t work_list[WORK_MAX_NUM];\n\tint                      work_write_index;\n\tint                      work_read_index;\n\tint                      msg_drop_count[2];\n\tint                      num_period[2];\n\tvoid                     *callback_param[2];\n\tdma_callback             callback[2];\n\tint (*send_message)(struct rpmsg_msg *msg, struct rpmsg_info *info);\n\tspinlock_t               lock[2];  \n\tspinlock_t               wq_lock;  \n\tstruct mutex             msg_lock;  \n\tstruct stream_timer      stream_timer[2];\n};\n\n#define IMX_PCM_DRV_NAME \"imx_pcm_rpmsg\"\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}