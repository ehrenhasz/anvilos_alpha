{
  "module_name": "efika-audio-fabric.c",
  "hash_id": "c70b286b44262f9ba1229f342ecedbad92fee083bfebdb07a9d5106933f2ce5d",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/fsl/efika-audio-fabric.c",
  "human_readable_source": " \n\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/interrupt.h>\n#include <linux/device.h>\n#include <linux/delay.h>\n#include <linux/of_device.h>\n#include <linux/of_platform.h>\n#include <linux/dma-mapping.h>\n\n#include <sound/core.h>\n#include <sound/pcm.h>\n#include <sound/pcm_params.h>\n#include <sound/initval.h>\n#include <sound/soc.h>\n\n#include \"mpc5200_dma.h\"\n\n#define DRV_NAME \"efika-audio-fabric\"\n\nSND_SOC_DAILINK_DEFS(analog,\n\tDAILINK_COMP_ARRAY(COMP_CPU(\"mpc5200-psc-ac97.0\")),\n\tDAILINK_COMP_ARRAY(COMP_CODEC(\"stac9766-codec\",\n\t\t\t\t      \"stac9766-hifi-analog\")),\n\tDAILINK_COMP_ARRAY(COMP_PLATFORM(\"mpc5200-pcm-audio\")));\n\nSND_SOC_DAILINK_DEFS(iec958,\n\tDAILINK_COMP_ARRAY(COMP_CPU(\"mpc5200-psc-ac97.1\")),\n\tDAILINK_COMP_ARRAY(COMP_CODEC(\"stac9766-codec\",\n\t\t\t\t      \"stac9766-hifi-IEC958\")),\n\tDAILINK_COMP_ARRAY(COMP_PLATFORM(\"mpc5200-pcm-audio\")));\n\nstatic struct snd_soc_dai_link efika_fabric_dai[] = {\n{\n\t.name = \"AC97\",\n\t.stream_name = \"AC97 Analog\",\n\tSND_SOC_DAILINK_REG(analog),\n},\n{\n\t.name = \"AC97\",\n\t.stream_name = \"AC97 IEC958\",\n\tSND_SOC_DAILINK_REG(iec958),\n},\n};\n\nstatic struct snd_soc_card card = {\n\t.name = \"Efika\",\n\t.owner = THIS_MODULE,\n\t.dai_link = efika_fabric_dai,\n\t.num_links = ARRAY_SIZE(efika_fabric_dai),\n};\n\nstatic __init int efika_fabric_init(void)\n{\n\tstruct platform_device *pdev;\n\tint rc;\n\n\tif (!of_machine_is_compatible(\"bplan,efika\"))\n\t\treturn -ENODEV;\n\n\tpdev = platform_device_alloc(\"soc-audio\", 1);\n\tif (!pdev) {\n\t\tpr_err(\"efika_fabric_init: platform_device_alloc() failed\\n\");\n\t\treturn -ENODEV;\n\t}\n\n\tplatform_set_drvdata(pdev, &card);\n\n\trc = platform_device_add(pdev);\n\tif (rc) {\n\t\tpr_err(\"efika_fabric_init: platform_device_add() failed\\n\");\n\t\tplatform_device_put(pdev);\n\t\treturn -ENODEV;\n\t}\n\treturn 0;\n}\n\nmodule_init(efika_fabric_init);\n\n\nMODULE_AUTHOR(\"Jon Smirl <jonsmirl@gmail.com>\");\nMODULE_DESCRIPTION(DRV_NAME \": mpc5200 Efika fabric driver\");\nMODULE_LICENSE(\"GPL\");\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}