{
  "module_name": "aio.h",
  "hash_id": "9065aa8097a1c226c01c9bd2997cc2fa088ee99ebe8ac64faa70443ccb54d187",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/uniphier/aio.h",
  "human_readable_source": " \n \n\n#ifndef SND_UNIPHIER_AIO_H__\n#define SND_UNIPHIER_AIO_H__\n\n#include <linux/spinlock.h>\n#include <linux/types.h>\n#include <sound/pcm.h>\n#include <sound/soc.h>\n#include <sound/soc-dai.h>\n\nstruct platform_device;\n\nenum ID_PORT_TYPE {\n\tPORT_TYPE_UNKNOWN,\n\tPORT_TYPE_I2S,\n\tPORT_TYPE_SPDIF,\n\tPORT_TYPE_EVE,\n\tPORT_TYPE_CONV,\n};\n\nenum ID_PORT_DIR {\n\tPORT_DIR_OUTPUT,\n\tPORT_DIR_INPUT,\n};\n\nenum IEC61937_PC {\n\tIEC61937_PC_AC3   = 0x0001,\n\tIEC61937_PC_PAUSE = 0x0003,\n\tIEC61937_PC_MPA   = 0x0004,\n\tIEC61937_PC_MP3   = 0x0005,\n\tIEC61937_PC_DTS1  = 0x000b,\n\tIEC61937_PC_DTS2  = 0x000c,\n\tIEC61937_PC_DTS3  = 0x000d,\n\tIEC61937_PC_AAC   = 0x0007,\n};\n\n \n#define IEC61937_FRM_STR_AC3       1536\n#define IEC61937_FRM_STR_MPA       1152\n#define IEC61937_FRM_STR_MP3       1152\n#define IEC61937_FRM_STR_DTS1      512\n#define IEC61937_FRM_STR_DTS2      1024\n#define IEC61937_FRM_STR_DTS3      2048\n#define IEC61937_FRM_STR_AAC       1024\n\n \n#define IEC61937_FRM_PAU_AC3       3\n#define IEC61937_FRM_PAU_MPA       32\n#define IEC61937_FRM_PAU_MP3       32\n#define IEC61937_FRM_PAU_DTS1      3\n#define IEC61937_FRM_PAU_DTS2      3\n#define IEC61937_FRM_PAU_DTS3      3\n#define IEC61937_FRM_PAU_AAC       32\n\n \n#define IEC61937_HEADER_SIGN       0x1f4e72f8\n\n#define AUD_HW_PCMIN1    0\n#define AUD_HW_PCMIN2    1\n#define AUD_HW_PCMIN3    2\n#define AUD_HW_IECIN1    3\n#define AUD_HW_DIECIN1   4\n\n#define AUD_NAME_PCMIN1     \"aio-pcmin1\"\n#define AUD_NAME_PCMIN2     \"aio-pcmin2\"\n#define AUD_NAME_PCMIN3     \"aio-pcmin3\"\n#define AUD_NAME_IECIN1     \"aio-iecin1\"\n#define AUD_NAME_DIECIN1    \"aio-diecin1\"\n\n#define AUD_HW_HPCMOUT1    0\n#define AUD_HW_PCMOUT1     1\n#define AUD_HW_PCMOUT2     2\n#define AUD_HW_PCMOUT3     3\n#define AUD_HW_EPCMOUT1    4\n#define AUD_HW_EPCMOUT2    5\n#define AUD_HW_EPCMOUT3    6\n#define AUD_HW_EPCMOUT6    9\n#define AUD_HW_HIECOUT1    10\n#define AUD_HW_IECOUT1     11\n#define AUD_HW_CMASTER     31\n\n#define AUD_NAME_HPCMOUT1        \"aio-hpcmout1\"\n#define AUD_NAME_PCMOUT1         \"aio-pcmout1\"\n#define AUD_NAME_PCMOUT2         \"aio-pcmout2\"\n#define AUD_NAME_PCMOUT3         \"aio-pcmout3\"\n#define AUD_NAME_EPCMOUT1        \"aio-epcmout1\"\n#define AUD_NAME_EPCMOUT2        \"aio-epcmout2\"\n#define AUD_NAME_EPCMOUT3        \"aio-epcmout3\"\n#define AUD_NAME_EPCMOUT6        \"aio-epcmout6\"\n#define AUD_NAME_HIECOUT1        \"aio-hiecout1\"\n#define AUD_NAME_IECOUT1         \"aio-iecout1\"\n#define AUD_NAME_CMASTER         \"aio-cmaster\"\n#define AUD_NAME_HIECCOMPOUT1    \"aio-hieccompout1\"\n#define AUD_NAME_IECCOMPOUT1     \"aio-ieccompout1\"\n\n#define AUD_GNAME_HDMI    \"aio-hdmi\"\n#define AUD_GNAME_LINE    \"aio-line\"\n#define AUD_GNAME_AUX     \"aio-aux\"\n#define AUD_GNAME_IEC     \"aio-iec\"\n\n#define AUD_CLK_IO        0\n#define AUD_CLK_A1        1\n#define AUD_CLK_F1        2\n#define AUD_CLK_A2        3\n#define AUD_CLK_F2        4\n#define AUD_CLK_A         5\n#define AUD_CLK_F         6\n#define AUD_CLK_APLL      7\n#define AUD_CLK_RX0       8\n#define AUD_CLK_USB0      9\n#define AUD_CLK_HSC0      10\n\n#define AUD_PLL_A1        0\n#define AUD_PLL_F1        1\n#define AUD_PLL_A2        2\n#define AUD_PLL_F2        3\n#define AUD_PLL_APLL      4\n#define AUD_PLL_RX0       5\n#define AUD_PLL_USB0      6\n#define AUD_PLL_HSC0      7\n\n#define AUD_PLLDIV_1_2    0\n#define AUD_PLLDIV_1_3    1\n#define AUD_PLLDIV_1_1    2\n#define AUD_PLLDIV_2_3    3\n\n#define AUD_VOL_INIT         0x4000  \n#define AUD_VOL_MAX          0xffff  \n#define AUD_VOL_FADE_TIME    20  \n\n#define AUD_RING_SIZE            (128 * 1024)\n\n#define AUD_MIN_FRAGMENT         4\n#define AUD_MAX_FRAGMENT         8\n#define AUD_MIN_FRAGMENT_SIZE    (4 * 1024)\n#define AUD_MAX_FRAGMENT_SIZE    (16 * 1024)\n\n \n#define AUD_MAX_SLOTSEL    5\n\n \nstruct uniphier_aio_selector {\n\tint map;\n\tint hw;\n};\n\n \nstruct uniphier_aio_swmap {\n\tint type;\n\tint dir;\n\n\tstruct uniphier_aio_selector ch;\n\tstruct uniphier_aio_selector rb;\n\tstruct uniphier_aio_selector iport;\n\tstruct uniphier_aio_selector iif;\n\tstruct uniphier_aio_selector oport;\n\tstruct uniphier_aio_selector oif;\n\tstruct uniphier_aio_selector och;\n};\n\nstruct uniphier_aio_spec {\n\tconst char *name;\n\tconst char *gname;\n\tstruct uniphier_aio_swmap swm;\n};\n\nstruct uniphier_aio_pll {\n\tbool enable;\n\tunsigned int freq;\n};\n\nstruct uniphier_aio_chip_spec {\n\tconst struct uniphier_aio_spec *specs;\n\tint num_specs;\n\tconst struct uniphier_aio_pll *plls;\n\tint num_plls;\n\tstruct snd_soc_dai_driver *dais;\n\tint num_dais;\n\n\t \n\tint addr_ext;\n};\n\nstruct uniphier_aio_sub {\n\tstruct uniphier_aio *aio;\n\n\t \n\tspinlock_t lock;\n\n\tconst struct uniphier_aio_swmap *swm;\n\tconst struct uniphier_aio_spec *spec;\n\n\t \n\tstruct snd_pcm_substream *substream;\n\tstruct snd_pcm_hw_params params;\n\tint vol;\n\n\t \n\tstruct snd_compr_stream *cstream;\n\tstruct snd_compr_params cparams;\n\tunsigned char *compr_area;\n\tdma_addr_t compr_addr;\n\tsize_t compr_bytes;\n\tint pass_through;\n\tenum IEC61937_PC iec_pc;\n\tbool iec_header;\n\n\t \n\tbool use_mmap;\n\tint setting;\n\tint running;\n\tu64 rd_offs;\n\tu64 wr_offs;\n\tu32 threshold;\n\tu64 rd_org;\n\tu64 wr_org;\n\tu64 rd_total;\n\tu64 wr_total;\n};\n\nstruct uniphier_aio {\n\tstruct uniphier_aio_chip *chip;\n\n\tstruct uniphier_aio_sub sub[2];\n\n\tunsigned int fmt;\n\t \n\tint clk_in;\n\tint clk_out;\n\t \n\tint pll_in;\n\tint pll_out;\n\t \n\tint plldiv;\n};\n\nstruct uniphier_aio_chip {\n\tstruct platform_device *pdev;\n\tconst struct uniphier_aio_chip_spec *chip_spec;\n\n\tstruct uniphier_aio *aios;\n\tint num_aios;\n\tint num_wup_aios;\n\tstruct uniphier_aio_pll *plls;\n\tint num_plls;\n\n\tstruct clk *clk;\n\tstruct reset_control *rst;\n\tstruct regmap *regmap;\n\tstruct regmap *regmap_sg;\n\tint active;\n};\n\nstatic inline struct uniphier_aio *uniphier_priv(struct snd_soc_dai *dai)\n{\n\tstruct uniphier_aio_chip *chip = snd_soc_dai_get_drvdata(dai);\n\n\treturn &chip->aios[dai->id];\n}\n\nint uniphier_aiodma_soc_register_platform(struct platform_device *pdev);\nextern const struct snd_compress_ops uniphier_aio_compress_ops;\n\nint uniphier_aio_probe(struct platform_device *pdev);\nint uniphier_aio_remove(struct platform_device *pdev);\nextern const struct snd_soc_dai_ops uniphier_aio_i2s_ld11_ops;\nextern const struct snd_soc_dai_ops uniphier_aio_i2s_pxs2_ops;\nextern const struct snd_soc_dai_ops uniphier_aio_spdif_ld11_ops;\nextern const struct snd_soc_dai_ops uniphier_aio_spdif_ld11_ops2;\nextern const struct snd_soc_dai_ops uniphier_aio_spdif_pxs2_ops;\nextern const struct snd_soc_dai_ops uniphier_aio_spdif_pxs2_ops2;\n\nu64 aio_rb_cnt(struct uniphier_aio_sub *sub);\nu64 aio_rbt_cnt_to_end(struct uniphier_aio_sub *sub);\nu64 aio_rb_space(struct uniphier_aio_sub *sub);\nu64 aio_rb_space_to_end(struct uniphier_aio_sub *sub);\n\nvoid aio_iecout_set_enable(struct uniphier_aio_chip *chip, bool enable);\nint aio_chip_set_pll(struct uniphier_aio_chip *chip, int pll_id,\n\t\t     unsigned int freq);\nvoid aio_chip_init(struct uniphier_aio_chip *chip);\nint aio_init(struct uniphier_aio_sub *sub);\nvoid aio_port_reset(struct uniphier_aio_sub *sub);\nint aio_port_set_param(struct uniphier_aio_sub *sub, int pass_through,\n\t\t       const struct snd_pcm_hw_params *params);\nvoid aio_port_set_enable(struct uniphier_aio_sub *sub, int enable);\nint aio_port_get_volume(struct uniphier_aio_sub *sub);\nvoid aio_port_set_volume(struct uniphier_aio_sub *sub, int vol);\nint aio_if_set_param(struct uniphier_aio_sub *sub, int pass_through);\nint aio_oport_set_stream_type(struct uniphier_aio_sub *sub,\n\t\t\t      enum IEC61937_PC pc);\nvoid aio_src_reset(struct uniphier_aio_sub *sub);\nint aio_src_set_param(struct uniphier_aio_sub *sub,\n\t\t      const struct snd_pcm_hw_params *params);\nint aio_srcif_set_param(struct uniphier_aio_sub *sub);\nint aio_srcch_set_param(struct uniphier_aio_sub *sub);\nvoid aio_srcch_set_enable(struct uniphier_aio_sub *sub, int enable);\n\nint aiodma_ch_set_param(struct uniphier_aio_sub *sub);\nvoid aiodma_ch_set_enable(struct uniphier_aio_sub *sub, int enable);\nint aiodma_rb_set_threshold(struct uniphier_aio_sub *sub, u64 size, u32 th);\nint aiodma_rb_set_buffer(struct uniphier_aio_sub *sub, u64 start, u64 end,\n\t\t\t int period);\nvoid aiodma_rb_sync(struct uniphier_aio_sub *sub, u64 start, u64 size,\n\t\t    int period);\nbool aiodma_rb_is_irq(struct uniphier_aio_sub *sub);\nvoid aiodma_rb_clear_irq(struct uniphier_aio_sub *sub);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}