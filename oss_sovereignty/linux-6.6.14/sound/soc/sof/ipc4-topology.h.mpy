{
  "module_name": "ipc4-topology.h",
  "hash_id": "67bc5dc99f82145b9f599fdc219a8c8cf97b7af0724eb270d281cb809cd9fa3c",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sof/ipc4-topology.h",
  "human_readable_source": " \n \n\n#ifndef __INCLUDE_SOUND_SOF_IPC4_TOPOLOGY_H__\n#define __INCLUDE_SOUND_SOF_IPC4_TOPOLOGY_H__\n\n#include <sound/sof/ipc4/header.h>\n\n#define SOF_IPC4_FW_PAGE_SIZE BIT(12)\n#define SOF_IPC4_FW_PAGE(x) ((((x) + BIT(12) - 1) & ~(BIT(12) - 1)) >> 12)\n#define SOF_IPC4_FW_ROUNDUP(x) (((x) + BIT(6) - 1) & (~(BIT(6) - 1)))\n\n#define SOF_IPC4_MODULE_LOAD_TYPE\t\tGENMASK(3, 0)\n#define SOF_IPC4_MODULE_AUTO_START\t\tBIT(4)\n \n#define SOF_IPC4_MODULE_LL\t\tBIT(5)\n#define SOF_IPC4_MODULE_DP\t\tBIT(6)\n#define SOF_IPC4_MODULE_LIB_CODE\t\tBIT(7)\n#define SOF_IPC4_MODULE_INIT_CONFIG_MASK\tGENMASK(11, 8)\n\n#define SOF_IPC4_MODULE_INIT_CONFIG_TYPE_BASE_CFG\t\t0\n#define SOF_IPC4_MODULE_INIT_CONFIG_TYPE_BASE_CFG_WITH_EXT\t1\n\n#define SOF_IPC4_MODULE_INSTANCE_LIST_ITEM_SIZE 12\n#define SOF_IPC4_PIPELINE_OBJECT_SIZE 448\n#define SOF_IPC4_DATA_QUEUE_OBJECT_SIZE 128\n#define SOF_IPC4_LL_TASK_OBJECT_SIZE 72\n#define SOF_IPC4_DP_TASK_OBJECT_SIZE 104\n#define SOF_IPC4_DP_TASK_LIST_SIZE (12 + 8)\n#define SOF_IPC4_LL_TASK_LIST_ITEM_SIZE 12\n#define SOF_IPC4_FW_MAX_PAGE_COUNT 20\n#define SOF_IPC4_FW_MAX_QUEUE_COUNT 8\n\n \n#define SOF_IPC4_NODE_INDEX_MASK\t0xFF\n#define SOF_IPC4_NODE_INDEX(x)\t((x) & SOF_IPC4_NODE_INDEX_MASK)\n#define SOF_IPC4_NODE_TYPE(x)  ((x) << 8)\n\n \n#define SOF_IPC4_NODE_INDEX_INTEL_SSP(x) (((x) & 0xf) << 4)\n\n \n#define SOF_IPC4_NODE_INDEX_INTEL_DMIC(x) ((x) & 0x7)\n\n#define SOF_IPC4_GAIN_ALL_CHANNELS_MASK 0xffffffff\n#define SOF_IPC4_VOL_ZERO_DB\t0x7fffffff\n\n#define SOF_IPC4_DMA_DEVICE_MAX_COUNT 16\n\n#define SOF_IPC4_INVALID_NODE_ID\t0xffffffff\n\n \n#define SOF_IPC4_MIN_DMA_BUFFER_SIZE\t2\n\n \n#define ALH_MULTI_GTW_BASE\t0x50\n \n#define ALH_MULTI_GTW_COUNT\t8\n\nenum sof_ipc4_copier_module_config_params {\n \n\tSOF_IPC4_COPIER_MODULE_CFG_PARAM_TIMESTAMP_INIT = 1,\n \n\tSOF_IPC4_COPIER_MODULE_CFG_PARAM_SET_SINK_FORMAT,\n \n\tSOF_IPC4_COPIER_MODULE_CFG_PARAM_DATA_SEGMENT_ENABLED,\n \n\tSOF_IPC4_COPIER_MODULE_CFG_PARAM_LLP_READING,\n \n\tSOF_IPC4_COPIER_MODULE_CFG_PARAM_LLP_READING_EXTENDED,\n \n\tSOF_IPC4_COPIER_MODULE_CFG_ATTENUATION,\n};\n\nstruct sof_ipc4_copier_config_set_sink_format {\n \n\tu32 sink_id;\n \n\tstruct sof_ipc4_audio_format source_fmt;\n \n\tstruct sof_ipc4_audio_format sink_fmt;\n} __packed __aligned(4);\n\n \nstruct sof_ipc4_pipeline {\n\tuint32_t priority;\n\tuint32_t lp_mode;\n\tuint32_t mem_usage;\n\tuint32_t core_id;\n\tint state;\n\tbool use_chain_dma;\n\tstruct sof_ipc4_msg msg;\n\tbool skip_during_fe_trigger;\n};\n\n \nstruct ipc4_pipeline_set_state_data {\n\tu32 count;\n\tDECLARE_FLEX_ARRAY(u32, pipeline_instance_ids);\n} __packed;\n\n \nstruct sof_ipc4_pin_format {\n\tu32 pin_index;\n\tu32 buffer_size;\n\tstruct sof_ipc4_audio_format audio_fmt;\n};\n\n \nstruct sof_ipc4_available_audio_format {\n\tstruct sof_ipc4_pin_format *output_pin_fmts;\n\tstruct sof_ipc4_pin_format *input_pin_fmts;\n\tu32 num_input_formats;\n\tu32 num_output_formats;\n};\n\n \nstruct sof_copier_gateway_cfg {\n\tuint32_t node_id;\n\tuint32_t dma_buffer_size;\n\tuint32_t config_length;\n\tuint32_t config_data[];\n};\n\n \nstruct sof_ipc4_copier_data {\n\tstruct sof_ipc4_base_module_cfg base_config;\n\tstruct sof_ipc4_audio_format out_format;\n\tuint32_t copier_feature_mask;\n\tstruct sof_copier_gateway_cfg gtw_cfg;\n};\n\n \nstruct sof_ipc4_gtw_attributes {\n\tuint32_t lp_buffer_alloc : 1;\n\tuint32_t alloc_from_reg_file : 1;\n\tuint32_t rsvd : 30;\n};\n\n \nstruct sof_ipc4_dma_device_stream_ch_map {\n\tuint32_t device;\n\tuint32_t channel_mask;\n};\n\n \nstruct sof_ipc4_dma_stream_ch_map {\n\tuint32_t device_count;\n\tstruct sof_ipc4_dma_device_stream_ch_map mapping[SOF_IPC4_DMA_DEVICE_MAX_COUNT];\n} __packed;\n\n#define SOF_IPC4_DMA_METHOD_HDA   1\n#define SOF_IPC4_DMA_METHOD_GPDMA 2  \n\n \nstruct sof_ipc4_dma_config {\n\tuint8_t dma_method;\n\tuint8_t pre_allocated_by_host;\n\tuint16_t rsvd;\n\tuint32_t dma_channel_id;\n\tuint32_t stream_id;\n\tstruct sof_ipc4_dma_stream_ch_map dma_stream_channel_map;\n\tuint32_t dma_priv_config_size;\n\tuint8_t dma_priv_config[];\n} __packed;\n\n#define SOF_IPC4_GTW_DMA_CONFIG_ID 0x1000\n\n \nstruct sof_ipc4_dma_config_tlv {\n\tuint32_t type;\n\tuint32_t length;\n\tstruct sof_ipc4_dma_config dma_config;\n} __packed;\n\n \nstruct sof_ipc4_alh_configuration_blob {\n\tstruct sof_ipc4_gtw_attributes gw_attr;\n\tstruct sof_ipc4_dma_stream_ch_map alh_cfg;\n};\n\n \nstruct sof_ipc4_copier {\n\tstruct sof_ipc4_copier_data data;\n\tu32 *copier_config;\n\tuint32_t ipc_config_size;\n\tvoid *ipc_config_data;\n\tstruct sof_ipc4_available_audio_format available_fmt;\n\tu32 frame_fmt;\n\tstruct sof_ipc4_msg msg;\n\tstruct sof_ipc4_gtw_attributes *gtw_attr;\n\tu32 dai_type;\n\tint dai_index;\n\tstruct sof_ipc4_dma_config_tlv dma_config_tlv;\n};\n\n \nstruct sof_ipc4_ctrl_value_chan {\n\tu32 channel;\n\tu32 value;\n};\n\n \nstruct sof_ipc4_control_data {\n\tstruct sof_ipc4_msg msg;\n\tint index;\n\n\tunion {\n\t\tDECLARE_FLEX_ARRAY(struct sof_ipc4_ctrl_value_chan, chanv);\n\t\tDECLARE_FLEX_ARRAY(struct sof_abi_hdr, data);\n\t};\n};\n\n \nstruct sof_ipc4_gain_params {\n\tuint32_t channels;\n\tuint32_t init_val;\n\tuint32_t curve_type;\n\tuint32_t reserved;\n\tuint32_t curve_duration_l;\n\tuint32_t curve_duration_h;\n} __packed __aligned(4);\n\n \nstruct sof_ipc4_gain_data {\n\tstruct sof_ipc4_base_module_cfg base_config;\n\tstruct sof_ipc4_gain_params params;\n} __packed __aligned(4);\n\n \nstruct sof_ipc4_gain {\n\tstruct sof_ipc4_gain_data data;\n\tstruct sof_ipc4_available_audio_format available_fmt;\n\tstruct sof_ipc4_msg msg;\n};\n\n \nstruct sof_ipc4_mixer {\n\tstruct sof_ipc4_base_module_cfg base_config;\n\tstruct sof_ipc4_available_audio_format available_fmt;\n\tstruct sof_ipc4_msg msg;\n};\n\n \nstruct sof_ipc4_src_data {\n\tstruct sof_ipc4_base_module_cfg base_config;\n\tuint32_t sink_rate;\n} __packed __aligned(4);\n\n \nstruct sof_ipc4_src {\n\tstruct sof_ipc4_src_data data;\n\tstruct sof_ipc4_available_audio_format available_fmt;\n\tstruct sof_ipc4_msg msg;\n};\n\n \nstruct sof_ipc4_base_module_cfg_ext {\n\tu16 num_input_pin_fmts;\n\tu16 num_output_pin_fmts;\n\tu8 reserved[12];\n\tDECLARE_FLEX_ARRAY(struct sof_ipc4_pin_format, pin_formats);\n} __packed;\n\n \nstruct sof_ipc4_process {\n\tstruct sof_ipc4_base_module_cfg base_config;\n\tstruct sof_ipc4_base_module_cfg_ext *base_config_ext;\n\tstruct sof_ipc4_audio_format output_format;\n\tstruct sof_ipc4_available_audio_format available_fmt;\n\tvoid *ipc_config_data;\n\tuint32_t ipc_config_size;\n\tstruct sof_ipc4_msg msg;\n\tu32 base_config_ext_size;\n\tu32 init_config;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}