{
  "module_name": "pci-tgl.c",
  "hash_id": "ab203f8f851021df345a3607ec4b59d56830deb8c0770d110ac56c5752b6187c",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sof/intel/pci-tgl.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n\n\n#include <linux/module.h>\n#include <linux/pci.h>\n#include <sound/soc-acpi.h>\n#include <sound/soc-acpi-intel-match.h>\n#include <sound/sof.h>\n#include \"../ops.h\"\n#include \"../sof-pci-dev.h\"\n\n \n#include \"hda.h\"\n\nstatic const struct sof_dev_desc tgl_desc = {\n\t.machines               = snd_soc_acpi_intel_tgl_machines,\n\t.alt_machines\t\t= snd_soc_acpi_intel_tgl_sdw_machines,\n\t.use_acpi_target_states\t= true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &tgl_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/tgl\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/tgl\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-tgl.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-tgl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc tglh_desc = {\n\t.machines               = snd_soc_acpi_intel_tgl_machines,\n\t.alt_machines\t\t= snd_soc_acpi_intel_tgl_sdw_machines,\n\t.use_acpi_target_states\t= true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &tglh_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/tgl-h\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/tgl-h\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-tgl-h.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-tgl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc ehl_desc = {\n\t.machines               = snd_soc_acpi_intel_ehl_machines,\n\t.use_acpi_target_states\t= true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &ehl_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/ehl\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/ehl\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-ehl.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-ehl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc adls_desc = {\n\t.machines               = snd_soc_acpi_intel_adl_machines,\n\t.alt_machines           = snd_soc_acpi_intel_adl_sdw_machines,\n\t.use_acpi_target_states\t= true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &adls_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/adl-s\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/adl-s\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-adl-s.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-adl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc adl_desc = {\n\t.machines               = snd_soc_acpi_intel_adl_machines,\n\t.alt_machines           = snd_soc_acpi_intel_adl_sdw_machines,\n\t.use_acpi_target_states = true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &tgl_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/adl\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/adl\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-adl.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-adl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc adl_n_desc = {\n\t.machines               = snd_soc_acpi_intel_adl_machines,\n\t.alt_machines           = snd_soc_acpi_intel_adl_sdw_machines,\n\t.use_acpi_target_states = true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &tgl_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/adl-n\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/adl-n\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-adl-n.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-adl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc rpls_desc = {\n\t.machines               = snd_soc_acpi_intel_rpl_machines,\n\t.alt_machines           = snd_soc_acpi_intel_rpl_sdw_machines,\n\t.use_acpi_target_states\t= true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &adls_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/rpl-s\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/rpl-s\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-rpl-s.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-rpl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\nstatic const struct sof_dev_desc rpl_desc = {\n\t.machines               = snd_soc_acpi_intel_rpl_machines,\n\t.alt_machines           = snd_soc_acpi_intel_rpl_sdw_machines,\n\t.use_acpi_target_states = true,\n\t.resindex_lpe_base      = 0,\n\t.resindex_pcicfg_base   = -1,\n\t.resindex_imr_base      = -1,\n\t.irqindex_host_ipc      = -1,\n\t.chip_info = &tgl_chip_info,\n\t.ipc_supported_mask\t= BIT(SOF_IPC) | BIT(SOF_INTEL_IPC4),\n\t.ipc_default\t\t= SOF_IPC,\n\t.dspless_mode_supported\t= true,\t\t \n\t.default_fw_path = {\n\t\t[SOF_IPC] = \"intel/sof\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs/rpl\",\n\t},\n\t.default_lib_path = {\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-lib/rpl\",\n\t},\n\t.default_tplg_path = {\n\t\t[SOF_IPC] = \"intel/sof-tplg\",\n\t\t[SOF_INTEL_IPC4] = \"intel/avs-tplg\",\n\t},\n\t.default_fw_filename = {\n\t\t[SOF_IPC] = \"sof-rpl.ri\",\n\t\t[SOF_INTEL_IPC4] = \"dsp_basefw.bin\",\n\t},\n\t.nocodec_tplg_filename = \"sof-rpl-nocodec.tplg\",\n\t.ops = &sof_tgl_ops,\n\t.ops_init = sof_tgl_ops_init,\n\t.ops_free = hda_ops_free,\n};\n\n \nstatic const struct pci_device_id sof_pci_ids[] = {\n\t{ PCI_DEVICE_DATA(INTEL, HDA_TGL_LP, &tgl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_TGL_H, &tglh_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_EHL_0, &ehl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_EHL_3, &ehl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_S, &adls_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_RPL_S, &rpls_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_P, &adl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_PS, &adl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_RPL_P_0, &rpl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_RPL_P_1, &rpl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_M, &adl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_PX, &adl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_RPL_M, &rpl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_RPL_PX, &rpl_desc) },\n\t{ PCI_DEVICE_DATA(INTEL, HDA_ADL_N, &adl_n_desc) },\n\t{ 0, }\n};\nMODULE_DEVICE_TABLE(pci, sof_pci_ids);\n\n \nstatic struct pci_driver snd_sof_pci_intel_tgl_driver = {\n\t.name = \"sof-audio-pci-intel-tgl\",\n\t.id_table = sof_pci_ids,\n\t.probe = hda_pci_intel_probe,\n\t.remove = sof_pci_remove,\n\t.shutdown = sof_pci_shutdown,\n\t.driver = {\n\t\t.pm = &sof_pci_pm,\n\t},\n};\nmodule_pci_driver(snd_sof_pci_intel_tgl_driver);\n\nMODULE_LICENSE(\"Dual BSD/GPL\");\nMODULE_IMPORT_NS(SND_SOC_SOF_INTEL_HDA_COMMON);\nMODULE_IMPORT_NS(SND_SOC_SOF_PCI_DEV);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}