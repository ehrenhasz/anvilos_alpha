{
  "module_name": "shim.h",
  "hash_id": "94c7327391521569e11625fe7e407eaad10f291356190f265ec2dd4ff8dc20d7",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/sof/intel/shim.h",
  "human_readable_source": " \n \n\n#ifndef __SOF_INTEL_SHIM_H\n#define __SOF_INTEL_SHIM_H\n\nenum sof_intel_hw_ip_version {\n\tSOF_INTEL_TANGIER,\n\tSOF_INTEL_BAYTRAIL,\n\tSOF_INTEL_BROADWELL,\n\tSOF_INTEL_CAVS_1_5,\t \n\tSOF_INTEL_CAVS_1_5_PLUS, \n\tSOF_INTEL_CAVS_1_8,\t \n\tSOF_INTEL_CAVS_2_0,\t \n\tSOF_INTEL_CAVS_2_5,\t \n\tSOF_INTEL_ACE_1_0,\t \n\tSOF_INTEL_ACE_2_0,\t \n};\n\n \n\n#define SHIM_CSR\t\t(SHIM_OFFSET + 0x00)\n#define SHIM_PISR\t\t(SHIM_OFFSET + 0x08)\n#define SHIM_PIMR\t\t(SHIM_OFFSET + 0x10)\n#define SHIM_ISRX\t\t(SHIM_OFFSET + 0x18)\n#define SHIM_ISRD\t\t(SHIM_OFFSET + 0x20)\n#define SHIM_IMRX\t\t(SHIM_OFFSET + 0x28)\n#define SHIM_IMRD\t\t(SHIM_OFFSET + 0x30)\n#define SHIM_IPCX\t\t(SHIM_OFFSET + 0x38)\n#define SHIM_IPCD\t\t(SHIM_OFFSET + 0x40)\n#define SHIM_ISRSC\t\t(SHIM_OFFSET + 0x48)\n#define SHIM_ISRLPESC\t\t(SHIM_OFFSET + 0x50)\n#define SHIM_IMRSC\t\t(SHIM_OFFSET + 0x58)\n#define SHIM_IMRLPESC\t\t(SHIM_OFFSET + 0x60)\n#define SHIM_IPCSC\t\t(SHIM_OFFSET + 0x68)\n#define SHIM_IPCLPESC\t\t(SHIM_OFFSET + 0x70)\n#define SHIM_CLKCTL\t\t(SHIM_OFFSET + 0x78)\n#define SHIM_CSR2\t\t(SHIM_OFFSET + 0x80)\n#define SHIM_LTRC\t\t(SHIM_OFFSET + 0xE0)\n#define SHIM_HMDC\t\t(SHIM_OFFSET + 0xE8)\n\n#define SHIM_PWMCTRL\t\t0x1000\n\n \n\n \n#define SHIM_CSR_RST\t\tBIT(1)\n#define SHIM_CSR_SBCS0\t\tBIT(2)\n#define SHIM_CSR_SBCS1\t\tBIT(3)\n#define SHIM_CSR_DCS(x)\t\t((x) << 4)\n#define SHIM_CSR_DCS_MASK\t(0x7 << 4)\n#define SHIM_CSR_STALL\t\tBIT(10)\n#define SHIM_CSR_S0IOCS\t\tBIT(21)\n#define SHIM_CSR_S1IOCS\t\tBIT(23)\n#define SHIM_CSR_LPCS\t\tBIT(31)\n#define SHIM_CSR_24MHZ_LPCS \\\n\t(SHIM_CSR_SBCS0 | SHIM_CSR_SBCS1 | SHIM_CSR_LPCS)\n#define SHIM_CSR_24MHZ_NO_LPCS\t(SHIM_CSR_SBCS0 | SHIM_CSR_SBCS1)\n#define SHIM_BYT_CSR_RST\tBIT(0)\n#define SHIM_BYT_CSR_VECTOR_SEL\tBIT(1)\n#define SHIM_BYT_CSR_STALL\tBIT(2)\n#define SHIM_BYT_CSR_PWAITMODE\tBIT(3)\n\n \n#define SHIM_ISRX_BUSY\t\tBIT(1)\n#define SHIM_ISRX_DONE\t\tBIT(0)\n#define SHIM_BYT_ISRX_REQUEST\tBIT(1)\n\n \n#define SHIM_ISRD_BUSY\t\tBIT(1)\n#define SHIM_ISRD_DONE\t\tBIT(0)\n\n \n#define SHIM_IMRX_BUSY\t\tBIT(1)\n#define SHIM_IMRX_DONE\t\tBIT(0)\n#define SHIM_BYT_IMRX_REQUEST\tBIT(1)\n\n \n#define SHIM_IMRD_DONE\t\tBIT(0)\n#define SHIM_IMRD_BUSY\t\tBIT(1)\n#define SHIM_IMRD_SSP0\t\tBIT(16)\n#define SHIM_IMRD_DMAC0\t\tBIT(21)\n#define SHIM_IMRD_DMAC1\t\tBIT(22)\n#define SHIM_IMRD_DMAC\t\t(SHIM_IMRD_DMAC0 | SHIM_IMRD_DMAC1)\n\n \n#define\tSHIM_IPCX_DONE\t\tBIT(30)\n#define\tSHIM_IPCX_BUSY\t\tBIT(31)\n#define SHIM_BYT_IPCX_DONE\tBIT_ULL(62)\n#define SHIM_BYT_IPCX_BUSY\tBIT_ULL(63)\n\n \n#define\tSHIM_IPCD_DONE\t\tBIT(30)\n#define\tSHIM_IPCD_BUSY\t\tBIT(31)\n#define SHIM_BYT_IPCD_DONE\tBIT_ULL(62)\n#define SHIM_BYT_IPCD_BUSY\tBIT_ULL(63)\n\n \n#define SHIM_CLKCTL_SMOS(x)\t((x) << 24)\n#define SHIM_CLKCTL_MASK\t(3 << 24)\n#define SHIM_CLKCTL_DCPLCG\tBIT(18)\n#define SHIM_CLKCTL_SCOE1\tBIT(17)\n#define SHIM_CLKCTL_SCOE0\tBIT(16)\n\n \n#define SHIM_CSR2_SDFD_SSP0\tBIT(1)\n#define SHIM_CSR2_SDFD_SSP1\tBIT(2)\n\n \n#define SHIM_LTRC_VAL(x)\t((x) << 0)\n\n \n#define SHIM_HMDC_HDDA0(x)\t((x) << 0)\n#define SHIM_HMDC_HDDA1(x)\t((x) << 7)\n#define SHIM_HMDC_HDDA_E0_CH0\t1\n#define SHIM_HMDC_HDDA_E0_CH1\t2\n#define SHIM_HMDC_HDDA_E0_CH2\t4\n#define SHIM_HMDC_HDDA_E0_CH3\t8\n#define SHIM_HMDC_HDDA_E1_CH0\tSHIM_HMDC_HDDA1(SHIM_HMDC_HDDA_E0_CH0)\n#define SHIM_HMDC_HDDA_E1_CH1\tSHIM_HMDC_HDDA1(SHIM_HMDC_HDDA_E0_CH1)\n#define SHIM_HMDC_HDDA_E1_CH2\tSHIM_HMDC_HDDA1(SHIM_HMDC_HDDA_E0_CH2)\n#define SHIM_HMDC_HDDA_E1_CH3\tSHIM_HMDC_HDDA1(SHIM_HMDC_HDDA_E0_CH3)\n#define SHIM_HMDC_HDDA_E0_ALLCH\t\\\n\t(SHIM_HMDC_HDDA_E0_CH0 | SHIM_HMDC_HDDA_E0_CH1 | \\\n\t SHIM_HMDC_HDDA_E0_CH2 | SHIM_HMDC_HDDA_E0_CH3)\n#define SHIM_HMDC_HDDA_E1_ALLCH\t\\\n\t(SHIM_HMDC_HDDA_E1_CH0 | SHIM_HMDC_HDDA_E1_CH1 | \\\n\t SHIM_HMDC_HDDA_E1_CH2 | SHIM_HMDC_HDDA_E1_CH3)\n\n \n#define PCI_VDRTCTL0\t\t0xa0\n#define PCI_VDRTCTL1\t\t0xa4\n#define PCI_VDRTCTL2\t\t0xa8\n#define PCI_VDRTCTL3\t\t0xaC\n\n \n#define PCI_VDRTCL0_D3PGD\t\tBIT(0)\n#define PCI_VDRTCL0_D3SRAMPGD\t\tBIT(1)\n#define PCI_VDRTCL0_DSRAMPGE_SHIFT\t12\n#define PCI_VDRTCL0_DSRAMPGE_MASK\tGENMASK(PCI_VDRTCL0_DSRAMPGE_SHIFT + 19,\\\n\t\t\t\t\t\tPCI_VDRTCL0_DSRAMPGE_SHIFT)\n#define PCI_VDRTCL0_ISRAMPGE_SHIFT\t2\n#define PCI_VDRTCL0_ISRAMPGE_MASK\tGENMASK(PCI_VDRTCL0_ISRAMPGE_SHIFT + 9,\\\n\t\t\t\t\t\tPCI_VDRTCL0_ISRAMPGE_SHIFT)\n\n \n#define PCI_VDRTCL2_DCLCGE\t\tBIT(1)\n#define PCI_VDRTCL2_DTCGE\t\tBIT(10)\n#define PCI_VDRTCL2_APLLSE_MASK\t\tBIT(31)\n\n \n#define PCI_PMCS\t\t0x84\n#define PCI_PMCS_PS_MASK\t0x3\n\n \n#define SOF_INTEL_PROCEN_FMT_QUIRK BIT(0)\n\n \nstruct sof_intel_dsp_desc {\n\tint cores_num;\n\tint host_managed_cores_mask;\n\tint init_core_mask;  \n\tint ipc_req;\n\tint ipc_req_mask;\n\tint ipc_ack;\n\tint ipc_ack_mask;\n\tint ipc_ctl;\n\tint rom_status_reg;\n\tint rom_init_timeout;\n\tint ssp_count;\t\t\t \n\tint ssp_base_offset;\t\t \n\tu32 sdw_shim_base;\n\tu32 sdw_alh_base;\n\tu32 d0i3_offset;\n\tu32 quirks;\n\tenum sof_intel_hw_ip_version hw_ip_version;\n\tint (*read_sdw_lcount)(struct snd_sof_dev *sdev);\n\tvoid (*enable_sdw_irq)(struct snd_sof_dev *sdev, bool enable);\n\tbool (*check_sdw_irq)(struct snd_sof_dev *sdev);\n\tbool (*check_sdw_wakeen_irq)(struct snd_sof_dev *sdev);\n\tbool (*check_ipc_irq)(struct snd_sof_dev *sdev);\n\tint (*power_down_dsp)(struct snd_sof_dev *sdev);\n\tint (*disable_interrupts)(struct snd_sof_dev *sdev);\n\tint (*cl_init)(struct snd_sof_dev *sdev, int stream_tag, bool imr_boot);\n};\n\nextern struct snd_sof_dsp_ops sof_tng_ops;\n\nextern const struct sof_intel_dsp_desc tng_chip_info;\n\nstruct sof_intel_stream {\n\tsize_t posn_offset;\n};\n\nstatic inline const struct sof_intel_dsp_desc *get_chip_info(struct snd_sof_pdata *pdata)\n{\n\tconst struct sof_dev_desc *desc = pdata->desc;\n\n\treturn desc->chip_info;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}