{
  "module_name": "mtk-base-afe.h",
  "hash_id": "c75617e00cd245fc256e40d8abbc0a6c345a58a979d640a4ad220471f3e6dcf7",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/mediatek/common/mtk-base-afe.h",
  "human_readable_source": " \n \n\n#ifndef _MTK_BASE_AFE_H_\n#define _MTK_BASE_AFE_H_\n\n#include <linux/soc/mediatek/mtk_sip_svc.h>\n\n#define MTK_STREAM_NUM (SNDRV_PCM_STREAM_LAST + 1)\n#define MTK_SIP_AUDIO_CONTROL MTK_SIP_SMC_CMD(0x517)\n\n \nenum mtk_audio_smc_call_op {\n\tMTK_AUDIO_SMC_OP_INIT = 0,\n\tMTK_AUDIO_SMC_OP_DRAM_REQUEST,\n\tMTK_AUDIO_SMC_OP_DRAM_RELEASE,\n\tMTK_AUDIO_SMC_OP_SRAM_REQUEST,\n\tMTK_AUDIO_SMC_OP_SRAM_RELEASE,\n\tMTK_AUDIO_SMC_OP_ADSP_REQUEST,\n\tMTK_AUDIO_SMC_OP_ADSP_RELEASE,\n\tMTK_AUDIO_SMC_OP_DOMAIN_SIDEBANDS,\n\tMTK_AUDIO_SMC_OP_BTCVSD_WRITE,\n\tMTK_AUDIO_SMC_OP_BTCVSD_UPDATE_CTRL_CLEAR,\n\tMTK_AUDIO_SMC_OP_BTCVSD_UPDATE_CTRL_UNDERFLOW,\n\tMTK_AUDIO_SMC_OP_NUM\n};\n\nstruct mtk_base_memif_data {\n\tint id;\n\tconst char *name;\n\tint reg_ofs_base;\n\tint reg_ofs_cur;\n\tint reg_ofs_end;\n\tint reg_ofs_base_msb;\n\tint reg_ofs_cur_msb;\n\tint reg_ofs_end_msb;\n\tint fs_reg;\n\tint fs_shift;\n\tint fs_maskbit;\n\tint mono_reg;\n\tint mono_shift;\n\tint mono_invert;\n\tint quad_ch_reg;\n\tint quad_ch_mask;\n\tint quad_ch_shift;\n\tint int_odd_flag_reg;\n\tint int_odd_flag_shift;\n\tint enable_reg;\n\tint enable_shift;\n\tint hd_reg;\n\tint hd_shift;\n\tint hd_align_reg;\n\tint hd_align_mshift;\n\tint msb_reg;\n\tint msb_shift;\n\tint msb_end_reg;\n\tint msb_end_shift;\n\tint agent_disable_reg;\n\tint agent_disable_shift;\n\tint ch_num_reg;\n\tint ch_num_shift;\n\tint ch_num_maskbit;\n\t \n\tint pbuf_reg;\n\tint pbuf_mask;\n\tint pbuf_shift;\n\tint minlen_reg;\n\tint minlen_mask;\n\tint minlen_shift;\n};\n\nstruct mtk_base_irq_data {\n\tint id;\n\tint irq_cnt_reg;\n\tint irq_cnt_shift;\n\tint irq_cnt_maskbit;\n\tint irq_fs_reg;\n\tint irq_fs_shift;\n\tint irq_fs_maskbit;\n\tint irq_en_reg;\n\tint irq_en_shift;\n\tint irq_clr_reg;\n\tint irq_clr_shift;\n\tint irq_status_shift;\n};\n\nstruct device;\nstruct list_head;\nstruct mtk_base_afe_memif;\nstruct mtk_base_afe_irq;\nstruct mtk_base_afe_dai;\nstruct regmap;\nstruct snd_pcm_substream;\nstruct snd_soc_dai;\n\nstruct mtk_base_afe {\n\tvoid __iomem *base_addr;\n\tstruct device *dev;\n\tstruct regmap *regmap;\n\tstruct mutex irq_alloc_lock;  \n\n\tunsigned int const *reg_back_up_list;\n\tunsigned int *reg_back_up;\n\tunsigned int reg_back_up_list_num;\n\n\tint (*runtime_suspend)(struct device *dev);\n\tint (*runtime_resume)(struct device *dev);\n\tbool suspended;\n\n\tstruct mtk_base_afe_memif *memif;\n\tint memif_size;\n\tstruct mtk_base_afe_irq *irqs;\n\tint irqs_size;\n\tint memif_32bit_supported;\n\n\tstruct list_head sub_dais;\n\tstruct snd_soc_dai_driver *dai_drivers;\n\tunsigned int num_dai_drivers;\n\n\tconst struct snd_pcm_hardware *mtk_afe_hardware;\n\tint (*memif_fs)(struct snd_pcm_substream *substream,\n\t\t\tunsigned int rate);\n\tint (*irq_fs)(struct snd_pcm_substream *substream,\n\t\t      unsigned int rate);\n\tint (*get_dai_fs)(struct mtk_base_afe *afe,\n\t\t\t  int dai_id, unsigned int rate);\n\tint (*get_memif_pbuf_size)(struct snd_pcm_substream *substream);\n\n\tint (*request_dram_resource)(struct device *dev);\n\tint (*release_dram_resource)(struct device *dev);\n\n\tvoid *platform_priv;\n};\n\nstruct mtk_base_afe_memif {\n\tunsigned int phys_buf_addr;\n\tint buffer_size;\n\tstruct snd_pcm_substream *substream;\n\tconst struct mtk_base_memif_data *data;\n\tint irq_usage;\n\tint const_irq;\n\tunsigned char *dma_area;\n\tdma_addr_t dma_addr;\n\tsize_t dma_bytes;\n};\n\nstruct mtk_base_afe_irq {\n\tconst struct mtk_base_irq_data *irq_data;\n\tint irq_occupyed;\n};\n\nstruct mtk_base_afe_dai {\n\tstruct snd_soc_dai_driver *dai_drivers;\n\tunsigned int num_dai_drivers;\n\n\tconst struct snd_kcontrol_new *controls;\n\tunsigned int num_controls;\n\tconst struct snd_soc_dapm_widget *dapm_widgets;\n\tunsigned int num_dapm_widgets;\n\tconst struct snd_soc_dapm_route *dapm_routes;\n\tunsigned int num_dapm_routes;\n\n\tstruct list_head list;\n};\n\n#endif\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}