{
  "module_name": "mt8192-afe-control.c",
  "hash_id": "9eeb4745979c951d96deeed05772d3d44f817f92cc122d75415e38765e223a10",
  "original_prompt": "Ingested from linux-6.6.14/sound/soc/mediatek/mt8192/mt8192-afe-control.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n#include \"mt8192-afe-common.h\"\n\nenum {\n\tMTK_AFE_RATE_8K = 0,\n\tMTK_AFE_RATE_11K = 1,\n\tMTK_AFE_RATE_12K = 2,\n\tMTK_AFE_RATE_384K = 3,\n\tMTK_AFE_RATE_16K = 4,\n\tMTK_AFE_RATE_22K = 5,\n\tMTK_AFE_RATE_24K = 6,\n\tMTK_AFE_RATE_352K = 7,\n\tMTK_AFE_RATE_32K = 8,\n\tMTK_AFE_RATE_44K = 9,\n\tMTK_AFE_RATE_48K = 10,\n\tMTK_AFE_RATE_88K = 11,\n\tMTK_AFE_RATE_96K = 12,\n\tMTK_AFE_RATE_176K = 13,\n\tMTK_AFE_RATE_192K = 14,\n\tMTK_AFE_RATE_260K = 15,\n};\n\nenum {\n\tMTK_AFE_DAI_MEMIF_RATE_8K = 0,\n\tMTK_AFE_DAI_MEMIF_RATE_16K = 1,\n\tMTK_AFE_DAI_MEMIF_RATE_32K = 2,\n\tMTK_AFE_DAI_MEMIF_RATE_48K = 3,\n};\n\nenum {\n\tMTK_AFE_PCM_RATE_8K = 0,\n\tMTK_AFE_PCM_RATE_16K = 1,\n\tMTK_AFE_PCM_RATE_32K = 2,\n\tMTK_AFE_PCM_RATE_48K = 3,\n};\n\nunsigned int mt8192_general_rate_transform(struct device *dev,\n\t\t\t\t\t   unsigned int rate)\n{\n\tswitch (rate) {\n\tcase 8000:\n\t\treturn MTK_AFE_RATE_8K;\n\tcase 11025:\n\t\treturn MTK_AFE_RATE_11K;\n\tcase 12000:\n\t\treturn MTK_AFE_RATE_12K;\n\tcase 16000:\n\t\treturn MTK_AFE_RATE_16K;\n\tcase 22050:\n\t\treturn MTK_AFE_RATE_22K;\n\tcase 24000:\n\t\treturn MTK_AFE_RATE_24K;\n\tcase 32000:\n\t\treturn MTK_AFE_RATE_32K;\n\tcase 44100:\n\t\treturn MTK_AFE_RATE_44K;\n\tcase 48000:\n\t\treturn MTK_AFE_RATE_48K;\n\tcase 88200:\n\t\treturn MTK_AFE_RATE_88K;\n\tcase 96000:\n\t\treturn MTK_AFE_RATE_96K;\n\tcase 176400:\n\t\treturn MTK_AFE_RATE_176K;\n\tcase 192000:\n\t\treturn MTK_AFE_RATE_192K;\n\tcase 260000:\n\t\treturn MTK_AFE_RATE_260K;\n\tcase 352800:\n\t\treturn MTK_AFE_RATE_352K;\n\tcase 384000:\n\t\treturn MTK_AFE_RATE_384K;\n\tdefault:\n\t\tdev_warn(dev, \"%s(), rate %u invalid, use %d!!!\\n\",\n\t\t\t __func__,\n\t\t\t rate, MTK_AFE_RATE_48K);\n\t\treturn MTK_AFE_RATE_48K;\n\t}\n}\n\nstatic unsigned int dai_memif_rate_transform(struct device *dev,\n\t\t\t\t\t     unsigned int rate)\n{\n\tswitch (rate) {\n\tcase 8000:\n\t\treturn MTK_AFE_DAI_MEMIF_RATE_8K;\n\tcase 16000:\n\t\treturn MTK_AFE_DAI_MEMIF_RATE_16K;\n\tcase 32000:\n\t\treturn MTK_AFE_DAI_MEMIF_RATE_32K;\n\tcase 48000:\n\t\treturn MTK_AFE_DAI_MEMIF_RATE_48K;\n\tdefault:\n\t\tdev_warn(dev, \"%s(), rate %u invalid, use %d!!!\\n\",\n\t\t\t __func__,\n\t\t\t rate, MTK_AFE_DAI_MEMIF_RATE_16K);\n\t\treturn MTK_AFE_DAI_MEMIF_RATE_16K;\n\t}\n}\n\nstatic unsigned int pcm_rate_transform(struct device *dev,\n\t\t\t\t       unsigned int rate)\n{\n\tswitch (rate) {\n\tcase 8000:\n\t\treturn MTK_AFE_PCM_RATE_8K;\n\tcase 16000:\n\t\treturn MTK_AFE_PCM_RATE_16K;\n\tcase 32000:\n\t\treturn MTK_AFE_PCM_RATE_32K;\n\tcase 48000:\n\t\treturn MTK_AFE_PCM_RATE_48K;\n\tdefault:\n\t\tdev_warn(dev, \"%s(), rate %u invalid, use %d!!!\\n\",\n\t\t\t __func__,\n\t\t\t rate, MTK_AFE_PCM_RATE_32K);\n\t\treturn MTK_AFE_PCM_RATE_32K;\n\t}\n}\n\nunsigned int mt8192_rate_transform(struct device *dev,\n\t\t\t\t   unsigned int rate, int aud_blk)\n{\n\tswitch (aud_blk) {\n\tcase MT8192_MEMIF_DAI:\n\tcase MT8192_MEMIF_MOD_DAI:\n\t\treturn dai_memif_rate_transform(dev, rate);\n\tcase MT8192_DAI_PCM_1:\n\tcase MT8192_DAI_PCM_2:\n\t\treturn pcm_rate_transform(dev, rate);\n\tdefault:\n\t\treturn mt8192_general_rate_transform(dev, rate);\n\t}\n}\n\nint mt8192_dai_set_priv(struct mtk_base_afe *afe, int id,\n\t\t\tint priv_size, const void *priv_data)\n{\n\tstruct mt8192_afe_private *afe_priv = afe->platform_priv;\n\tvoid *temp_data;\n\n\ttemp_data = devm_kzalloc(afe->dev,\n\t\t\t\t priv_size,\n\t\t\t\t GFP_KERNEL);\n\tif (!temp_data)\n\t\treturn -ENOMEM;\n\n\tif (priv_data)\n\t\tmemcpy(temp_data, priv_data, priv_size);\n\n\tafe_priv->dai_priv[id] = temp_data;\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}