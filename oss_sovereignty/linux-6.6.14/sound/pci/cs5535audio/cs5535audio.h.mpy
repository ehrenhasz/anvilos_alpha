{
  "module_name": "cs5535audio.h",
  "hash_id": "11ddd3ea18771f823b2bd789db81170ed92b28481dbde0bc15260571720d8c9c",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/cs5535audio/cs5535audio.h",
  "human_readable_source": " \n#ifndef __SOUND_CS5535AUDIO_H\n#define __SOUND_CS5535AUDIO_H\n\n#define cs_writel(cs5535au, reg, val)\toutl(val, (cs5535au)->port + reg)\n#define cs_writeb(cs5535au, reg, val)\toutb(val, (cs5535au)->port + reg)\n#define cs_readl(cs5535au, reg)\t\tinl((cs5535au)->port + reg)\n#define cs_readw(cs5535au, reg)\t\tinw((cs5535au)->port + reg)\n#define cs_readb(cs5535au, reg)\t\tinb((cs5535au)->port + reg)\n\n#define CS5535AUDIO_MAX_DESCRIPTORS\t128\n\n \n#define ACC_GPIO_STATUS\t\t\t0x00\n#define ACC_CODEC_STATUS\t\t0x08\n#define ACC_CODEC_CNTL\t\t\t0x0C\n#define ACC_IRQ_STATUS\t\t\t0x12\n#define ACC_BM0_CMD\t\t\t0x20\n#define ACC_BM1_CMD\t\t\t0x28\n#define ACC_BM0_PRD\t\t\t0x24\n#define ACC_BM1_PRD\t\t\t0x2C\n#define ACC_BM0_STATUS\t\t\t0x21\n#define ACC_BM1_STATUS\t\t\t0x29\n#define ACC_BM0_PNTR\t\t\t0x60\n#define ACC_BM1_PNTR\t\t\t0x64\n\n \n \n#define IRQ_STS \t\t\t0\n#define WU_IRQ_STS \t\t\t1\n#define BM0_IRQ_STS \t\t\t2\n#define BM1_IRQ_STS \t\t\t3\n \n#define EOP\t\t\t\t(1<<0)\n#define BM_EOP_ERR\t\t\t(1<<1)\n \n#define BM_CTL_EN\t\t\t0x01\n#define BM_CTL_PAUSE\t\t\t0x03\n#define BM_CTL_DIS\t\t\t0x00\n#define BM_CTL_BYTE_ORD_LE\t\t0x00\n#define BM_CTL_BYTE_ORD_BE\t\t0x04\n \n#define CMD_MASK\t\t\t0xFF00FFFF\n#define CMD_NEW\t\t\t\t0x00010000\n#define STS_NEW\t\t\t\t0x00020000\n#define PRM_RDY_STS\t\t\t0x00800000\n#define ACC_CODEC_CNTL_WR_CMD\t\t(~0x80000000)\n#define ACC_CODEC_CNTL_RD_CMD\t\t0x80000000\n#define ACC_CODEC_CNTL_LNK_SHUTDOWN\t0x00040000\n#define ACC_CODEC_CNTL_LNK_WRM_RST\t0x00020000\n#define PRD_JMP\t\t\t\t0x2000\n#define PRD_EOP\t\t\t\t0x4000\n#define PRD_EOT\t\t\t\t0x8000\n\nenum { CS5535AUDIO_DMA_PLAYBACK, CS5535AUDIO_DMA_CAPTURE, NUM_CS5535AUDIO_DMAS };\n\nstruct cs5535audio;\n\nstruct cs5535audio_dma_ops {\n\tint type;\n\tvoid (*enable_dma)(struct cs5535audio *cs5535au);\n\tvoid (*disable_dma)(struct cs5535audio *cs5535au);\n\tvoid (*pause_dma)(struct cs5535audio *cs5535au);\n\tvoid (*setup_prd)(struct cs5535audio *cs5535au, u32 prd_addr);\n\tu32 (*read_prd)(struct cs5535audio *cs5535au);\n\tu32 (*read_dma_pntr)(struct cs5535audio *cs5535au);\n};\n\nstruct cs5535audio_dma_desc {\n\t__le32 addr;\n\t__le16 size;\n\t__le16 ctlreserved;\n};\n\nstruct cs5535audio_dma {\n\tconst struct cs5535audio_dma_ops *ops;\n\tstruct snd_dma_buffer desc_buf;\n\tstruct snd_pcm_substream *substream;\n\tunsigned int buf_addr, buf_bytes;\n\tunsigned int period_bytes, periods;\n\tu32 saved_prd;\n\tint pcm_open_flag;\n};\n\nstruct cs5535audio {\n\tstruct snd_card *card;\n\tstruct snd_ac97 *ac97;\n\tstruct snd_pcm *pcm;\n\tint irq;\n\tstruct pci_dev *pci;\n\tunsigned long port;\n\tspinlock_t reg_lock;\n\tstruct snd_pcm_substream *playback_substream;\n\tstruct snd_pcm_substream *capture_substream;\n\tstruct cs5535audio_dma dmas[NUM_CS5535AUDIO_DMAS];\n};\n\nextern const struct dev_pm_ops snd_cs5535audio_pm;\n\n#ifdef CONFIG_OLPC\nvoid olpc_prequirks(struct snd_card *card,\n\t\t    struct snd_ac97_template *ac97);\nint olpc_quirks(struct snd_card *card, struct snd_ac97 *ac97);\nvoid olpc_quirks_cleanup(void);\nvoid olpc_analog_input(struct snd_ac97 *ac97, int on);\nvoid olpc_mic_bias(struct snd_ac97 *ac97, int on);\n\nstatic inline void olpc_capture_open(struct snd_ac97 *ac97)\n{\n\t \n\tolpc_analog_input(ac97, 0);\n\t \n\tolpc_mic_bias(ac97, 1);\n}\n\nstatic inline void olpc_capture_close(struct snd_ac97 *ac97)\n{\n\t \n\tolpc_analog_input(ac97, 0);\n\t \n\tolpc_mic_bias(ac97, 0);\n}\n#else\nstatic inline void olpc_prequirks(struct snd_card *card,\n\t\tstruct snd_ac97_template *ac97) { }\nstatic inline int olpc_quirks(struct snd_card *card, struct snd_ac97 *ac97)\n{\n\treturn 0;\n}\nstatic inline void olpc_quirks_cleanup(void) { }\nstatic inline void olpc_analog_input(struct snd_ac97 *ac97, int on) { }\nstatic inline void olpc_mic_bias(struct snd_ac97 *ac97, int on) { }\nstatic inline void olpc_capture_open(struct snd_ac97 *ac97) { }\nstatic inline void olpc_capture_close(struct snd_ac97 *ac97) { }\n#endif\n\nint snd_cs5535audio_pcm(struct cs5535audio *cs5535audio);\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}