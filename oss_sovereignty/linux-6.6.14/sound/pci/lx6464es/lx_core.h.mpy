{
  "module_name": "lx_core.h",
  "hash_id": "6e0102945135df0a1816f68961905b54254ff0cbcbf2551ef0d831c51797e248",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/lx6464es/lx_core.h",
  "human_readable_source": " \n \n\n#ifndef LX_CORE_H\n#define LX_CORE_H\n\n#include <linux/interrupt.h>\n\n#include \"lx_defs.h\"\n\n#define REG_CRM_NUMBER\t\t12\n\nstruct lx6464es;\n\n \n\n \nenum {\n\teReg_BASE,\n\teReg_CSM,\n\teReg_CRM1,\n\teReg_CRM2,\n\teReg_CRM3,\n\teReg_CRM4,\n\teReg_CRM5,\n\teReg_CRM6,\n\teReg_CRM7,\n\teReg_CRM8,\n\teReg_CRM9,\n\teReg_CRM10,\n\teReg_CRM11,\n\teReg_CRM12,\n\n\teReg_ICR,\n\teReg_CVR,\n\teReg_ISR,\n\teReg_RXHTXH,\n\teReg_RXMTXM,\n\teReg_RHLTXL,\n\teReg_RESETDSP,\n\n\teReg_CSUF,\n\teReg_CSES,\n\teReg_CRESMSB,\n\teReg_CRESLSB,\n\teReg_ADMACESMSB,\n\teReg_ADMACESLSB,\n\teReg_CONFES,\n\n\teMaxPortLx\n};\n\nunsigned long lx_dsp_reg_read(struct lx6464es *chip, int port);\nvoid lx_dsp_reg_write(struct lx6464es *chip, int port, unsigned data);\n\n \nenum {\n    ePLX_PCICR,\n\n    ePLX_MBOX0,\n    ePLX_MBOX1,\n    ePLX_MBOX2,\n    ePLX_MBOX3,\n    ePLX_MBOX4,\n    ePLX_MBOX5,\n    ePLX_MBOX6,\n    ePLX_MBOX7,\n\n    ePLX_L2PCIDB,\n    ePLX_IRQCS,\n    ePLX_CHIPSC,\n\n    eMaxPort\n};\n\nunsigned long lx_plx_reg_read(struct lx6464es *chip, int port);\nvoid lx_plx_reg_write(struct lx6464es *chip, int port, u32 data);\n\n \nstruct lx_rmh {\n\tu16\tcmd_len;\t \n\tu16\tstat_len;\t \n\tu16\tdsp_stat;\t \n\tu16\tcmd_idx;\t \n\tu32\tcmd[REG_CRM_NUMBER];\n\tu32\tstat[REG_CRM_NUMBER];\n};\n\n\n \nint lx_dsp_get_version(struct lx6464es *chip, u32 *rdsp_version);\nint lx_dsp_get_clock_frequency(struct lx6464es *chip, u32 *rfreq);\nint lx_dsp_set_granularity(struct lx6464es *chip, u32 gran);\nint lx_dsp_read_async_events(struct lx6464es *chip, u32 *data);\nint lx_dsp_get_mac(struct lx6464es *chip);\n\n\n \nint lx_pipe_allocate(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t     int channels);\nint lx_pipe_release(struct lx6464es *chip, u32 pipe, int is_capture);\nint lx_pipe_sample_count(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t\t u64 *rsample_count);\nint lx_pipe_state(struct lx6464es *chip, u32 pipe, int is_capture, u16 *rstate);\nint lx_pipe_stop(struct lx6464es *chip, u32 pipe, int is_capture);\nint lx_pipe_start(struct lx6464es *chip, u32 pipe, int is_capture);\nint lx_pipe_pause(struct lx6464es *chip, u32 pipe, int is_capture);\n\nint lx_pipe_wait_for_start(struct lx6464es *chip, u32 pipe, int is_capture);\nint lx_pipe_wait_for_idle(struct lx6464es *chip, u32 pipe, int is_capture);\n\n \nint lx_stream_set_format(struct lx6464es *chip, struct snd_pcm_runtime *runtime,\n\t\t\t u32 pipe, int is_capture);\nint lx_stream_state(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t    int *rstate);\nint lx_stream_sample_position(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t\t      u64 *r_bytepos);\n\nint lx_stream_set_state(struct lx6464es *chip, u32 pipe,\n\t\t\tint is_capture, enum stream_state_t state);\n\nstatic inline int lx_stream_start(struct lx6464es *chip, u32 pipe,\n\t\t\t\t  int is_capture)\n{\n\tsnd_printdd(\"->lx_stream_start\\n\");\n\treturn lx_stream_set_state(chip, pipe, is_capture, SSTATE_RUN);\n}\n\nstatic inline int lx_stream_pause(struct lx6464es *chip, u32 pipe,\n\t\t\t\t  int is_capture)\n{\n\tsnd_printdd(\"->lx_stream_pause\\n\");\n\treturn lx_stream_set_state(chip, pipe, is_capture, SSTATE_PAUSE);\n}\n\nstatic inline int lx_stream_stop(struct lx6464es *chip, u32 pipe,\n\t\t\t\t int is_capture)\n{\n\tsnd_printdd(\"->lx_stream_stop\\n\");\n\treturn lx_stream_set_state(chip, pipe, is_capture, SSTATE_STOP);\n}\n\n \nint lx_buffer_ask(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t  u32 *r_needed, u32 *r_freed, u32 *size_array);\nint lx_buffer_give(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t   u32 buffer_size, u32 buf_address_lo, u32 buf_address_hi,\n\t\t   u32 *r_buffer_index);\nint lx_buffer_free(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t   u32 *r_buffer_size);\nint lx_buffer_cancel(struct lx6464es *chip, u32 pipe, int is_capture,\n\t\t     u32 buffer_index);\n\n \nint lx_level_unmute(struct lx6464es *chip, int is_capture, int unmute);\nint lx_level_peaks(struct lx6464es *chip, int is_capture, int channels,\n\t\t   u32 *r_levels);\n\n\n \nirqreturn_t lx_interrupt(int irq, void *dev_id);\nirqreturn_t lx_threaded_irq(int irq, void *dev_id);\nvoid lx_irq_enable(struct lx6464es *chip);\nvoid lx_irq_disable(struct lx6464es *chip);\n\n\n \n#define HEADER_FMT_BASE\t\tHEADER_FMT_BASE_LIN\n#define HEADER_FMT_BASE_LIN\t0xFED00000\n#define HEADER_FMT_BASE_FLOAT\t0xFAD00000\n#define HEADER_FMT_MONO\t\t0x00000080  \n#define HEADER_FMT_INTEL\t0x00008000\n#define HEADER_FMT_16BITS\t0x00002000\n#define HEADER_FMT_24BITS\t0x00004000\n#define HEADER_FMT_UPTO11\t0x00000200  \n#define HEADER_FMT_UPTO32\t0x00000100  \n\n\n#define BIT_FMP_HEADER          23\n#define BIT_FMP_SD              22\n#define BIT_FMP_MULTICHANNEL    19\n\n#define START_STATE             1\n#define PAUSE_STATE             0\n\n\n\n\n\n \n \n#define START_PAUSE_IMMEDIATE           0\n#define START_PAUSE_ON_SYNCHRO          1\n#define START_PAUSE_ON_TIME_CODE        2\n\n\n \n#define START_STATE             1\n#define PAUSE_STATE             0\n\nstatic inline void unpack_pointer(dma_addr_t ptr, u32 *r_low, u32 *r_high)\n{\n\t*r_low = (u32)(ptr & 0xffffffff);\n#if BITS_PER_LONG == 32\n\t*r_high = 0;\n#else\n\t*r_high = (u32)((u64)ptr>>32);\n#endif\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}