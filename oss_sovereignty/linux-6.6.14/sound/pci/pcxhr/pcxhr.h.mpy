{
  "module_name": "pcxhr.h",
  "hash_id": "73b9066e7d3848adece9fa5e129fb3867296c756c083346bc7d7a1bd0bcfed2b",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/pcxhr/pcxhr.h",
  "human_readable_source": " \n \n\n#ifndef __SOUND_PCXHR_H\n#define __SOUND_PCXHR_H\n\n#include <linux/interrupt.h>\n#include <linux/mutex.h>\n#include <sound/pcm.h>\n\n#define PCXHR_DRIVER_VERSION\t\t0x000906\t \n#define PCXHR_DRIVER_VERSION_STRING\t\"0.9.6\"\t\t \n\n\n#define PCXHR_MAX_CARDS\t\t6\n#define PCXHR_PLAYBACK_STREAMS\t4\n\n#define PCXHR_GRANULARITY\t96\t \n \n#define PCXHR_GRANULARITY_MIN\t96\n \n#define PCXHR_GRANULARITY_HR22\t192\t \n\nstruct snd_pcxhr;\nstruct pcxhr_mgr;\n\nstruct pcxhr_stream;\nstruct pcxhr_pipe;\n\nenum pcxhr_clock_type {\n\tPCXHR_CLOCK_TYPE_INTERNAL = 0,\n\tPCXHR_CLOCK_TYPE_WORD_CLOCK,\n\tPCXHR_CLOCK_TYPE_AES_SYNC,\n\tPCXHR_CLOCK_TYPE_AES_1,\n\tPCXHR_CLOCK_TYPE_AES_2,\n\tPCXHR_CLOCK_TYPE_AES_3,\n\tPCXHR_CLOCK_TYPE_AES_4,\n\tPCXHR_CLOCK_TYPE_MAX = PCXHR_CLOCK_TYPE_AES_4,\n\tHR22_CLOCK_TYPE_INTERNAL = PCXHR_CLOCK_TYPE_INTERNAL,\n\tHR22_CLOCK_TYPE_AES_SYNC,\n\tHR22_CLOCK_TYPE_AES_1,\n\tHR22_CLOCK_TYPE_MAX = HR22_CLOCK_TYPE_AES_1,\n};\n\nstruct pcxhr_mgr {\n\tunsigned int num_cards;\n\tstruct snd_pcxhr *chip[PCXHR_MAX_CARDS];\n\n\tstruct pci_dev *pci;\n\n\tint irq;\n\n\tint granularity;\n\n\t \n\tunsigned long port[3];\n\n\t \n\tchar name[40];\t\t\t \n\n\tstruct pcxhr_rmh *prmh;\n\n\tstruct mutex lock;\t\t \n\tstruct mutex msg_lock;\t\t \n\n\tstruct mutex setup_mutex;\t \n\tstruct mutex mixer_mutex;\t \n\n\t \n\tunsigned int dsp_loaded;\t \n\tunsigned int dsp_version;\t \n\tint playback_chips;\n\tint capture_chips;\n\tint fw_file_set;\n\tint firmware_num;\n\tunsigned int is_hr_stereo:1;\n\tunsigned int board_has_aes1:1;\t \n\tunsigned int board_has_analog:1;  \n\tunsigned int board_has_mic:1;  \n\tunsigned int board_aes_in_192k:1; \n\tunsigned int mono_capture:1;  \n\tunsigned int capture_ltc:1;  \n\n\tstruct snd_dma_buffer hostport;\n\n\tenum pcxhr_clock_type use_clock_type;\t \n\tenum pcxhr_clock_type cur_clock_type;\t \n\tint sample_rate;\n\tint ref_count_rate;\n\tint timer_toggle;\t\t \n\tint dsp_time_last;\t\t \n\tint dsp_time_err;\t\t \n\tunsigned int src_it_dsp;\t \n\tunsigned int io_num_reg_cont;\t \n\tunsigned int codec_speed;\t \n\tunsigned int sample_rate_real;\t \n\tint last_reg_stat;\n\tint async_err_stream_xrun;\n\tint async_err_pipe_xrun;\n\tint async_err_other_last;\n\n\tunsigned char xlx_cfg;\t\t \n\tunsigned char xlx_selmic;\t \n\tunsigned char dsp_reset;\t \n};\n\n\nenum pcxhr_stream_status {\n\tPCXHR_STREAM_STATUS_FREE,\n\tPCXHR_STREAM_STATUS_OPEN,\n\tPCXHR_STREAM_STATUS_SCHEDULE_RUN,\n\tPCXHR_STREAM_STATUS_STARTED,\n\tPCXHR_STREAM_STATUS_RUNNING,\n\tPCXHR_STREAM_STATUS_SCHEDULE_STOP,\n\tPCXHR_STREAM_STATUS_STOPPED,\n\tPCXHR_STREAM_STATUS_PAUSED\n};\n\nstruct pcxhr_stream {\n\tstruct snd_pcm_substream *substream;\n\tsnd_pcm_format_t format;\n\tstruct pcxhr_pipe *pipe;\n\n\tenum pcxhr_stream_status status;\t \n\n\tu_int64_t timer_abs_periods;\t \n\tu_int32_t timer_period_frag;\t \n\tu_int32_t timer_buf_periods;\t \n\tint timer_is_synced;\t\t \n\n\tint channels;\n};\n\n\nenum pcxhr_pipe_status {\n\tPCXHR_PIPE_UNDEFINED,\n\tPCXHR_PIPE_DEFINED\n};\n\nstruct pcxhr_pipe {\n\tenum pcxhr_pipe_status status;\n\tint is_capture;\t\t \n\tint first_audio;\t \n};\n\n\nstruct snd_pcxhr {\n\tstruct snd_card *card;\n\tstruct pcxhr_mgr *mgr;\n\tint chip_idx;\t\t \n\n\tstruct snd_pcm *pcm;\t\t \n\n\tstruct pcxhr_pipe playback_pipe;\t \n\tstruct pcxhr_pipe capture_pipe[2];\t \n\n\tstruct pcxhr_stream playback_stream[PCXHR_PLAYBACK_STREAMS];\n\tstruct pcxhr_stream capture_stream[2];\t \n\tint nb_streams_play;\n\tint nb_streams_capt;\n\n\tint analog_playback_active[2];\t \n\tint analog_playback_volume[2];\t \n\tint analog_capture_volume[2];\t \n\tint digital_playback_active[PCXHR_PLAYBACK_STREAMS][2];\n\tint digital_playback_volume[PCXHR_PLAYBACK_STREAMS][2];\n\tint digital_capture_volume[2];\t \n\tint monitoring_active[2];\t \n\tint monitoring_volume[2];\t \n\tint audio_capture_source;\t \n\tint mic_volume;\t\t\t \n\tint mic_boost;\t\t\t \n\tint mic_active;\t\t\t \n\tint analog_capture_active;\t \n\tint phantom_power;\t\t \n\n\tunsigned char aes_bits[5];\t \n};\n\nstruct pcxhr_hostport\n{\n\tchar purgebuffer[6];\n\tchar reserved[2];\n};\n\n \nint pcxhr_create_pcm(struct snd_pcxhr *chip);\nint pcxhr_set_clock(struct pcxhr_mgr *mgr, unsigned int rate);\nint pcxhr_get_external_clock(struct pcxhr_mgr *mgr,\n\t\t\t     enum pcxhr_clock_type clock_type,\n\t\t\t     int *sample_rate);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}