{
  "module_name": "mixart.h",
  "hash_id": "fed7f0f1becce4cba03ae0d95f197cbad2a57d7057e31c4da6f65ab1f1ba8325",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/mixart/mixart.h",
  "human_readable_source": " \n \n\n#ifndef __SOUND_MIXART_H\n#define __SOUND_MIXART_H\n\n#include <linux/interrupt.h>\n#include <linux/mutex.h>\n#include <sound/pcm.h>\n\n#define MIXART_DRIVER_VERSION\t0x000100\t \n\n\n \n\nstruct mixart_uid {\n\tu32 object_id;\n\tu32 desc;\n};\n\nstruct mem_area {\n\tunsigned long phys;\n\tvoid __iomem *virt;\n\tstruct resource *res;\n};\n\n\nstruct mixart_route {\n\tunsigned char connected;\n\tunsigned char phase_inv;\n\tint volume;\n};\n\n\n \n#define MIXART_MOTHERBOARD_XLX_INDEX  0\n#define MIXART_MOTHERBOARD_ELF_INDEX  1\n#define MIXART_AESEBUBOARD_XLX_INDEX  2\n#define MIXART_HARDW_FILES_MAX_INDEX  3   \n\n#define MIXART_MAX_CARDS\t4\n#define MSG_FIFO_SIZE           16\n\n#define MIXART_MAX_PHYS_CONNECTORS  (MIXART_MAX_CARDS * 2 * 2)  \n\nstruct mixart_mgr {\n\tunsigned int num_cards;\n\tstruct snd_mixart *chip[MIXART_MAX_CARDS];\n\n\tstruct pci_dev *pci;\n\n\tint irq;\n\n\t \n\tstruct mem_area mem[2];\n\n\t \n\tu32 pending_event;\n\twait_queue_head_t msg_sleep;\n\n\t \n\tu32 msg_fifo[MSG_FIFO_SIZE];\n\tint msg_fifo_readptr;\n\tint msg_fifo_writeptr;\n\tatomic_t msg_processed;        \n\n\tstruct mutex lock;               \n\tstruct mutex msg_lock;\t\t \n\n\tstruct mutex setup_mutex;  \n\n\t \n\tunsigned int dsp_loaded;       \n\tunsigned int board_type;       \n\n\tstruct snd_dma_buffer flowinfo;\n\tstruct snd_dma_buffer bufferinfo;\n\n\tstruct mixart_uid         uid_console_manager;\n\tint sample_rate;\n\tint ref_count_rate;\n\n\tstruct mutex mixer_mutex;  \n\n};\n\n\n#define MIXART_STREAM_STATUS_FREE\t0\n#define MIXART_STREAM_STATUS_OPEN\t1\n#define MIXART_STREAM_STATUS_RUNNING\t2\n#define MIXART_STREAM_STATUS_DRAINING\t3\n#define MIXART_STREAM_STATUS_PAUSE\t4\n\n#define MIXART_PLAYBACK_STREAMS\t\t4\n#define MIXART_CAPTURE_STREAMS\t\t1\n\n#define MIXART_PCM_ANALOG\t\t0\n#define MIXART_PCM_DIGITAL\t\t1\n#define MIXART_PCM_TOTAL\t\t2\n\n#define MIXART_MAX_STREAM_PER_CARD  (MIXART_PCM_TOTAL * (MIXART_PLAYBACK_STREAMS + MIXART_CAPTURE_STREAMS) )\n\n\n#define MIXART_NOTIFY_CARD_MASK\t\t0xF000\n#define MIXART_NOTIFY_CARD_OFFSET\t12\n#define MIXART_NOTIFY_PCM_MASK\t\t0x0F00\n#define MIXART_NOTIFY_PCM_OFFSET\t8\n#define MIXART_NOTIFY_CAPT_MASK\t\t0x0080\n#define MIXART_NOTIFY_SUBS_MASK\t\t0x007F\n\n\nstruct mixart_stream {\n\tstruct snd_pcm_substream *substream;\n\tstruct mixart_pipe *pipe;\n\tint pcm_number;\n\n\tint status;       \n\n\tu64  abs_period_elapsed;   \n\tu32  buf_periods;          \n\tu32  buf_period_frag;      \n\n\tint channels;\n};\n\n\nenum mixart_pipe_status {\n\tPIPE_UNDEFINED,\n\tPIPE_STOPPED,\n\tPIPE_RUNNING,\n\tPIPE_CLOCK_SET\n};\n\nstruct mixart_pipe {\n\tstruct mixart_uid group_uid;\t\t\t \n\tint          stream_count;\n\tstruct mixart_uid uid_left_connector;\t \n\tstruct mixart_uid uid_right_connector;\n\tenum mixart_pipe_status status;\n\tint references;              \n\tint monitoring;              \n};\n\n\nstruct snd_mixart {\n\tstruct snd_card *card;\n\tstruct mixart_mgr *mgr;\n\tint chip_idx;                \n\tstruct snd_hwdep *hwdep;\t     \n\n\tstruct snd_pcm *pcm;              \n\tstruct snd_pcm *pcm_dig;          \n\n\t \n\tstruct mixart_pipe pipe_in_ana;\n\tstruct mixart_pipe pipe_out_ana;\n\n\t \n\tstruct mixart_pipe pipe_in_dig;\n\tstruct mixart_pipe pipe_out_dig;\n\n\tstruct mixart_stream playback_stream[MIXART_PCM_TOTAL][MIXART_PLAYBACK_STREAMS];  \n\tstruct mixart_stream capture_stream[MIXART_PCM_TOTAL];                            \n\n\t \n\tstruct mixart_uid uid_out_analog_physio;\n\tstruct mixart_uid uid_in_analog_physio;\n\n\tint analog_playback_active[2];\t\t \n\tint analog_playback_volume[2];\t\t \n\tint analog_capture_volume[2];\t\t \n\tint digital_playback_active[2*MIXART_PLAYBACK_STREAMS][2];\t \n\tint digital_playback_volume[2*MIXART_PLAYBACK_STREAMS][2];\t \n\tint digital_capture_volume[2][2];\t \n\tint monitoring_active[2];\t\t \n\tint monitoring_volume[2];\t\t \n};\n\nstruct mixart_bufferinfo\n{\n\tu32 buffer_address;\n\tu32 reserved[5];\n\tu32 available_length;\n\tu32 buffer_id;\n};\n\nstruct mixart_flowinfo\n{\n\tu32 bufferinfo_array_phy_address;\n\tu32 reserved[11];\n\tu32 bufferinfo_count;\n\tu32 capture;\n};\n\n \nint snd_mixart_create_pcm(struct snd_mixart * chip);\nstruct mixart_pipe *snd_mixart_add_ref_pipe(struct snd_mixart *chip, int pcm_number, int capture, int monitoring);\nint snd_mixart_kill_ref_pipe(struct mixart_mgr *mgr, struct mixart_pipe *pipe, int monitoring);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}