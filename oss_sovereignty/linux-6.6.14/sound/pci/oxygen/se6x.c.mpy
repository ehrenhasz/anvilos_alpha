{
  "module_name": "se6x.c",
  "hash_id": "6ada7013e3b6891daea0b3562b7236f501f332cd7c751d8e7754179d504525da",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/oxygen/se6x.c",
  "human_readable_source": "\n \n\n \n\n#include <linux/pci.h>\n#include <linux/module.h>\n#include <sound/core.h>\n#include <sound/control.h>\n#include <sound/initval.h>\n#include <sound/pcm.h>\n#include \"oxygen.h\"\n\nMODULE_AUTHOR(\"Clemens Ladisch <clemens@ladisch.de>\");\nMODULE_DESCRIPTION(\"Studio Evolution SE6X driver\");\nMODULE_LICENSE(\"GPL v2\");\n\nstatic int index[SNDRV_CARDS] = SNDRV_DEFAULT_IDX;\nstatic char *id[SNDRV_CARDS] = SNDRV_DEFAULT_STR;\nstatic bool enable[SNDRV_CARDS] = SNDRV_DEFAULT_ENABLE_PNP;\n\nmodule_param_array(index, int, NULL, 0444);\nMODULE_PARM_DESC(index, \"card index\");\nmodule_param_array(id, charp, NULL, 0444);\nMODULE_PARM_DESC(id, \"ID string\");\nmodule_param_array(enable, bool, NULL, 0444);\nMODULE_PARM_DESC(enable, \"enable card\");\n\nstatic const struct pci_device_id se6x_ids[] = {\n\t{ OXYGEN_PCI_SUBID(0x13f6, 0x8788) },\n\t{ }\n};\nMODULE_DEVICE_TABLE(pci, se6x_ids);\n\nstatic void se6x_init(struct oxygen *chip)\n{\n\toxygen_set_bits16(chip, OXYGEN_GPIO_CONTROL, 0x005);\n\n\tsnd_component_add(chip->card, \"PCM1792A\");\n\tsnd_component_add(chip->card, \"PCM1804\");\n}\n\nstatic int se6x_control_filter(struct snd_kcontrol_new *template)\n{\n\t \n\tif (!strncmp(template->name, \"Master Playback \", 16))\n\t\treturn 1;\n\treturn 0;\n}\n\nstatic void se6x_cleanup(struct oxygen *chip)\n{\n}\n\nstatic void set_pcm1792a_params(struct oxygen *chip,\n\t\t\t\tstruct snd_pcm_hw_params *params)\n{\n\t \n}\n\nstatic void set_pcm1804_params(struct oxygen *chip,\n\t\t\t       struct snd_pcm_hw_params *params)\n{\n}\n\nstatic unsigned int se6x_adjust_dac_routing(struct oxygen *chip,\n\t\t\t\t\t    unsigned int play_routing)\n{\n\t \n\treturn ( play_routing       & OXYGEN_PLAY_DAC0_SOURCE_MASK) |\n\t       ((play_routing << 2) & OXYGEN_PLAY_DAC1_SOURCE_MASK);\n}\n\nstatic const struct oxygen_model model_se6x = {\n\t.shortname = \"Studio Evolution SE6X\",\n\t.longname = \"C-Media Oxygen HD Audio\",\n\t.chip = \"CMI8787\",\n\t.init = se6x_init,\n\t.control_filter = se6x_control_filter,\n\t.cleanup = se6x_cleanup,\n\t.set_dac_params = set_pcm1792a_params,\n\t.set_adc_params = set_pcm1804_params,\n\t.adjust_dac_routing = se6x_adjust_dac_routing,\n\t.device_config = PLAYBACK_0_TO_I2S |\n\t\t\t CAPTURE_0_FROM_I2S_1 |\n\t\t\t CAPTURE_2_FROM_I2S_2 |\n\t\t\t CAPTURE_3_FROM_I2S_3,\n\t.dac_channels_pcm = 2,\n\t.function_flags = OXYGEN_FUNCTION_SPI,\n\t.dac_mclks = OXYGEN_MCLKS(256, 128, 128),\n\t.adc_mclks = OXYGEN_MCLKS(256, 256, 128),\n\t.dac_i2s_format = OXYGEN_I2S_FORMAT_LJUST,\n\t.adc_i2s_format = OXYGEN_I2S_FORMAT_I2S,\n};\n\nstatic int se6x_get_model(struct oxygen *chip,\n\t\t\t  const struct pci_device_id *pci_id)\n{\n\tchip->model = model_se6x;\n\treturn 0;\n}\n\nstatic int se6x_probe(struct pci_dev *pci, const struct pci_device_id *pci_id)\n{\n\tstatic int dev;\n\tint err;\n\n\tif (dev >= SNDRV_CARDS)\n\t\treturn -ENODEV;\n\tif (!enable[dev]) {\n\t\t++dev;\n\t\treturn -ENOENT;\n\t}\n\terr = oxygen_pci_probe(pci, index[dev], id[dev], THIS_MODULE,\n\t\t\t       se6x_ids, se6x_get_model);\n\tif (err >= 0)\n\t\t++dev;\n\treturn err;\n}\n\nstatic struct pci_driver se6x_driver = {\n\t.name = KBUILD_MODNAME,\n\t.id_table = se6x_ids,\n\t.probe = se6x_probe,\n#ifdef CONFIG_PM_SLEEP\n\t.driver = {\n\t\t.pm = &oxygen_pci_pm,\n\t},\n#endif\n\t.shutdown = oxygen_pci_shutdown,\n};\n\nmodule_pci_driver(se6x_driver);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}