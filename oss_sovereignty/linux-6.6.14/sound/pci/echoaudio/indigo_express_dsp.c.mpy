{
  "module_name": "indigo_express_dsp.c",
  "hash_id": "0979dce070602ea85830af40809c67500536db00f9322b5d729d14d93e753aa8",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/echoaudio/indigo_express_dsp.c",
  "human_readable_source": " \n\nstatic int set_sample_rate(struct echoaudio *chip, u32 rate)\n{\n\tu32 clock, control_reg, old_control_reg;\n\n\tif (wait_handshake(chip))\n\t\treturn -EIO;\n\n\told_control_reg = le32_to_cpu(chip->comm_page->control_register);\n\tcontrol_reg = old_control_reg & ~INDIGO_EXPRESS_CLOCK_MASK;\n\n\tswitch (rate) {\n\tcase 32000:\n\t\tclock = INDIGO_EXPRESS_32000;\n\t\tbreak;\n\tcase 44100:\n\t\tclock = INDIGO_EXPRESS_44100;\n\t\tbreak;\n\tcase 48000:\n\t\tclock = INDIGO_EXPRESS_48000;\n\t\tbreak;\n\tcase 64000:\n\t\tclock = INDIGO_EXPRESS_32000|INDIGO_EXPRESS_DOUBLE_SPEED;\n\t\tbreak;\n\tcase 88200:\n\t\tclock = INDIGO_EXPRESS_44100|INDIGO_EXPRESS_DOUBLE_SPEED;\n\t\tbreak;\n\tcase 96000:\n\t\tclock = INDIGO_EXPRESS_48000|INDIGO_EXPRESS_DOUBLE_SPEED;\n\t\tbreak;\n\tdefault:\n\t\treturn -EINVAL;\n\t}\n\n\tcontrol_reg |= clock;\n\tif (control_reg != old_control_reg) {\n\t\tdev_dbg(chip->card->dev,\n\t\t\t\"set_sample_rate: %d clock %d\\n\", rate, clock);\n\t\tchip->comm_page->control_register = cpu_to_le32(control_reg);\n\t\tchip->sample_rate = rate;\n\t\tclear_handshake(chip);\n\t\treturn send_vector(chip, DSP_VC_UPDATE_CLOCKS);\n\t}\n\treturn 0;\n}\n\n\n\n \nstatic int set_vmixer_gain(struct echoaudio *chip, u16 output, u16 pipe,\n\t\t\t   int gain)\n{\n\tint index;\n\n\tif (snd_BUG_ON(pipe >= num_pipes_out(chip) ||\n\t\t       output >= num_busses_out(chip)))\n\t\treturn -EINVAL;\n\n\tif (wait_handshake(chip))\n\t\treturn -EIO;\n\n\tchip->vmixer_gain[output][pipe] = gain;\n\tindex = output * num_pipes_out(chip) + pipe;\n\tchip->comm_page->vmixer[index] = gain;\n\n\tdev_dbg(chip->card->dev,\n\t\t\"set_vmixer_gain: pipe %d, out %d = %d\\n\", pipe, output, gain);\n\treturn 0;\n}\n\n\n\n \nstatic int update_vmixer_level(struct echoaudio *chip)\n{\n\tif (wait_handshake(chip))\n\t\treturn -EIO;\n\tclear_handshake(chip);\n\treturn send_vector(chip, DSP_VC_SET_VMIXER_GAIN);\n}\n\n\n\nstatic u32 detect_input_clocks(const struct echoaudio *chip)\n{\n\treturn ECHO_CLOCK_BIT_INTERNAL;\n}\n\n\n\n \nstatic int load_asic(struct echoaudio *chip)\n{\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}