{
  "module_name": "au88x0.h",
  "hash_id": "e908789eb516eccb8b2b7ce25bb997bd38acc49d456f7d472a984e600718531c",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/au88x0/au88x0.h",
  "human_readable_source": " \n \n \n#ifndef __SOUND_AU88X0_H\n#define __SOUND_AU88X0_H\n\n#include <linux/pci.h>\n#include <linux/io.h>\n#include <sound/core.h>\n#include <sound/pcm.h>\n#include <sound/rawmidi.h>\n#include <sound/mpu401.h>\n#include <sound/hwdep.h>\n#include <sound/ac97_codec.h>\n#include <sound/tlv.h>\n\n#ifndef CHIP_AU8820\n#include \"au88x0_eq.h\"\n#include \"au88x0_a3d.h\"\n#endif\n#ifndef CHIP_AU8810\n#include \"au88x0_wt.h\"\n#endif\n\n#define\thwread(x,y) readl((x)+(y))\n#define\thwwrite(x,y,z) writel((z),(x)+(y))\n\n \n#define\tMIDI_CLOCK_DIV\t\t0x61\n \n#define\tMPU401_RESET\t\t0xff\n#define\tMPU401_ENTER_UART\t0x3f\n#define\tMPU401_ACK\t\t0xfe\n\n\n#define\tSRC_RATIO(x,y)\t\t((((x<<15)/y) + 1)/2)\n\n \n#define FIFO_STOP 0\n#define FIFO_START 1\n#define FIFO_PAUSE 2\n\n \n#define IRQ_ERR_MASK\t0x00ff\n#define IRQ_FATAL\t0x0001\n#define IRQ_PARITY\t0x0002\n#define IRQ_REG\t\t0x0004\n#define IRQ_FIFO\t0x0008\n#define IRQ_DMA\t\t0x0010\n#define IRQ_PCMOUT\t0x0020\t \n#define IRQ_TIMER\t0x1000\n#define IRQ_MIDI\t0x2000\n#define IRQ_MODEM\t0x4000\n\n \n#define VORTEX_RESOURCE_DMA\t0x00000000\n#define VORTEX_RESOURCE_SRC\t0x00000001\n#define VORTEX_RESOURCE_MIXIN\t0x00000002\n#define VORTEX_RESOURCE_MIXOUT\t0x00000003\n#define VORTEX_RESOURCE_A3D\t0x00000004\n#define VORTEX_RESOURCE_LAST\t0x00000005\n\n \n#define VORTEX_CODEC_ID_SHIFT\t24\n#define VORTEX_CODEC_WRITE\t0x00800000\n#define VORTEX_CODEC_ADDSHIFT \t16\n#define VORTEX_CODEC_ADDMASK\t0x7f0000\n#define VORTEX_CODEC_DATSHIFT\t0\n#define VORTEX_CODEC_DATMASK\t0xffff\n\n \n\n#define VORTEX_IS_QUAD(x) ((x)->isquad)\n \n#define IS_BAD_CHIP(x) (\\\n\t(x->rev == 0xfe && x->device == PCI_DEVICE_ID_AUREAL_VORTEX_2) || \\\n\t(x->rev == 0xfe && x->device == PCI_DEVICE_ID_AUREAL_ADVANTAGE))\n\n\n \n#define VORTEX_PCM_ADB\t\t0\n#define VORTEX_PCM_SPDIF\t1\n#define VORTEX_PCM_A3D\t\t2\n#define VORTEX_PCM_WT\t\t3\n#define VORTEX_PCM_I2S\t\t4\n#define VORTEX_PCM_LAST\t\t5\n\n#define MIX_CAPT(x) (vortex->mixcapt[x])\n#define MIX_PLAYB(x) (vortex->mixplayb[x])\n#define MIX_SPDIF(x) (vortex->mixspdif[x])\n\n#define NR_WTPB 0x20\t\t \n#define NR_PCM\t0x10\n\nstruct pcm_vol {\n\tstruct snd_kcontrol *kctl;\n\tint active;\n\tint dma;\n\tint mixin[4];\n\tint vol[4];\n};\n\n \ntypedef struct {\n\t\n\tint fifo_enabled;\t \n\tint fifo_status;\t \n\tu32 dma_ctrl;\t\t \n\tint dma_unknown;\t \n\tint cfg0;\n\tint cfg1;\n\n\tint nr_ch;\t\t \n\tint type;\t\t \n\tint dma;\t\t \n\tint dir;\t\t \n\tu32 resources[5];\n\n\t \n\tint nr_periods;\n\tint period_bytes;\n\tint period_real;\n\tint period_virt;\n\n\tstruct snd_pcm_substream *substream;\n} stream_t;\n\ntypedef struct snd_vortex vortex_t;\nstruct snd_vortex {\n\t \n\tstruct snd_card *card;\n\tstruct snd_pcm *pcm[VORTEX_PCM_LAST];\n\n\tstruct snd_rawmidi *rmidi;\t \n\tstruct snd_ac97 *codec;\n\n\t \n\tstream_t dma_adb[NR_ADB];\n\tint spdif_sr;\n#ifndef CHIP_AU8810\n\tstream_t dma_wt[NR_WT];\n\twt_voice_t wt_voice[NR_WT];\t \n\ts8 mixwt[(NR_WT / NR_WTPB) * 6];\t \n#endif\n\n\t \n\ts8 mixcapt[2];\n\ts8 mixplayb[4];\n#ifndef CHIP_AU8820\n\ts8 mixspdif[2];\n\ts8 mixa3d[2];\t \n\ts8 mixxtlk[2];\t \n#endif\n\tu32 fixed_res[5];\n\n#ifndef CHIP_AU8820\n\t \n\teqlzr_t eq;\n\t \n\ta3dsrc_t a3d[NR_A3D];\n\t \n\tint xt_mode;\t\t \n#endif\n\tstruct pcm_vol pcm_vol[NR_PCM];\n\n\tint isquad;\t\t \n\n\t \n\tstruct gameport *gameport;\n\n\t \n\tunsigned long io;\n\tvoid __iomem *mmio;\n\tunsigned int irq;\n\tspinlock_t lock;\n\n\t \n\tstruct pci_dev *pci_dev;\n\tu16 vendor;\n\tu16 device;\n\tu8 rev;\n};\n\n \n\n \nstatic void vortex_adb_setsrc(vortex_t * vortex, int adbdma,\n\t\t\t      unsigned int cvrt, int dir);\n\n \nstatic void vortex_adbdma_setbuffers(vortex_t * vortex, int adbdma,\n\t\t\t\t     int size, int count);\nstatic void vortex_adbdma_setmode(vortex_t * vortex, int adbdma, int ie,\n\t\t\t\t  int dir, int fmt, int d,\n\t\t\t\t  u32 offset);\nstatic void vortex_adbdma_setstartbuffer(vortex_t * vortex, int adbdma, int sb);\n#ifndef CHIP_AU8810\nstatic void vortex_wtdma_setbuffers(vortex_t * vortex, int wtdma,\n\t\t\t\t    int size, int count);\nstatic void vortex_wtdma_setmode(vortex_t * vortex, int wtdma, int ie, int fmt, int d,\t \n\t\t\t\t u32 offset);\nstatic void vortex_wtdma_setstartbuffer(vortex_t * vortex, int wtdma, int sb);\n#endif\n\nstatic void vortex_adbdma_startfifo(vortex_t * vortex, int adbdma);\n\nstatic void vortex_adbdma_pausefifo(vortex_t * vortex, int adbdma);\nstatic void vortex_adbdma_resumefifo(vortex_t * vortex, int adbdma);\nstatic inline int vortex_adbdma_getlinearpos(vortex_t * vortex, int adbdma);\nstatic void vortex_adbdma_resetup(vortex_t *vortex, int adbdma);\n\n#ifndef CHIP_AU8810\nstatic void vortex_wtdma_startfifo(vortex_t * vortex, int wtdma);\nstatic void vortex_wtdma_stopfifo(vortex_t * vortex, int wtdma);\nstatic void vortex_wtdma_pausefifo(vortex_t * vortex, int wtdma);\nstatic void vortex_wtdma_resumefifo(vortex_t * vortex, int wtdma);\nstatic inline int vortex_wtdma_getlinearpos(vortex_t * vortex, int wtdma);\n#endif\n\n \nstatic void vortex_codec_init(vortex_t * vortex);\nstatic void vortex_codec_write(struct snd_ac97 * codec, unsigned short addr,\n\t\t\t       unsigned short data);\nstatic unsigned short vortex_codec_read(struct snd_ac97 * codec, unsigned short addr);\nstatic void vortex_spdif_init(vortex_t * vortex, int spdif_sr, int spdif_mode);\n\nstatic int vortex_core_init(vortex_t * card);\nstatic int vortex_core_shutdown(vortex_t * card);\nstatic void vortex_enable_int(vortex_t * card);\nstatic irqreturn_t vortex_interrupt(int irq, void *dev_id);\nstatic int vortex_alsafmt_aspfmt(snd_pcm_format_t alsafmt, vortex_t *v);\n\n \nstatic void vortex_connect_default(vortex_t * vortex, int en);\nstatic int vortex_adb_allocroute(vortex_t * vortex, int dma, int nr_ch,\n\t\t\t\t int dir, int type, int subdev);\nstatic int vortex_adb_checkinout(vortex_t * vortex, int resmap[], int out,\n\t\t\t\t int restype);\n#ifndef CHIP_AU8810\nstatic int vortex_wt_allocroute(vortex_t * vortex, int dma, int nr_ch);\nstatic void vortex_wt_connect(vortex_t * vortex, int en);\nstatic void vortex_wt_init(vortex_t * vortex);\n#endif\n\nstatic void vortex_route(vortex_t * vortex, int en, unsigned char channel,\n\t\t\t unsigned char source, unsigned char dest);\n#if 0\nstatic void vortex_routes(vortex_t * vortex, int en, unsigned char channel,\n\t\t\t  unsigned char source, unsigned char dest0,\n\t\t\t  unsigned char dest1);\n#endif\nstatic void vortex_connection_mixin_mix(vortex_t * vortex, int en,\n\t\t\t\t\tunsigned char mixin,\n\t\t\t\t\tunsigned char mix, int a);\nstatic void vortex_mix_setinputvolumebyte(vortex_t * vortex,\n\t\t\t\t\t  unsigned char mix, int mixin,\n\t\t\t\t\t  unsigned char vol);\nstatic void vortex_mix_setvolumebyte(vortex_t * vortex, unsigned char mix,\n\t\t\t\t     unsigned char vol);\n\n \n#ifndef CHIP_AU8820\nstatic void vortex_Vort3D_enable(vortex_t * v);\nstatic void vortex_Vort3D_disable(vortex_t * v);\nstatic void vortex_Vort3D_connect(vortex_t * vortex, int en);\nstatic void vortex_Vort3D_InitializeSource(a3dsrc_t *a, int en, vortex_t *v);\n#endif\n\n \nstatic int vortex_gameport_register(vortex_t * card);\nstatic void vortex_gameport_unregister(vortex_t * card);\n#ifndef CHIP_AU8820\nstatic int vortex_eq_init(vortex_t * vortex);\nstatic int vortex_eq_free(vortex_t * vortex);\n#endif\n \nstatic int snd_vortex_new_pcm(vortex_t * vortex, int idx, int nr);\nstatic int snd_vortex_mixer(vortex_t * vortex);\nstatic int snd_vortex_midi(vortex_t * vortex);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}