{
  "module_name": "amp.c",
  "hash_id": "4488cc802dbf826db8ca1936e8bf16f48a536a6da3eee996b61d7b24d0564834",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/ice1712/amp.c",
  "human_readable_source": "\n       \n\n#include <linux/delay.h>\n#include <linux/interrupt.h>\n#include <linux/init.h>\n#include <sound/core.h>\n\n#include \"ice1712.h\"\n#include \"envy24ht.h\"\n#include \"amp.h\"\n\nstatic void wm_put(struct snd_ice1712 *ice, int reg, unsigned short val)\n{\n\tunsigned short cval;\n\tcval = (reg << 9) | val;\n\tsnd_vt1724_write_i2c(ice, WM_DEV, cval >> 8, cval & 0xff);\n}\n\nstatic int snd_vt1724_amp_init(struct snd_ice1712 *ice)\n{\n\tstatic const unsigned short wm_inits[] = {\n\t\tWM_ATTEN_L,\t0x0000,\t \n\t\tWM_ATTEN_R,\t0x0000,\t \n\t\tWM_DAC_CTRL,\t0x0008,\t \n\t\tWM_INT_CTRL,\t0x0001,  \t\n\t};\n\n\tunsigned int i;\n\n\t \n\n\t \n\tice->num_total_dacs = 6;\n\tice->num_total_adcs = 2;\n\n\t \n\tif (ice->eeprom.subvendor == VT1724_SUBDEVICE_AV710) {\n\t\tfor (i = 0; i < ARRAY_SIZE(wm_inits); i += 2)\n\t\t\twm_put(ice, wm_inits[i], wm_inits[i+1]);\n\t}\n\n\treturn 0;\n}\n\nstatic int snd_vt1724_amp_add_controls(struct snd_ice1712 *ice)\n{\n\tif (ice->ac97)\n\t\t \n\t\tsnd_ac97_write_cache(ice->ac97, 0x5a,\n\t\t\tsnd_ac97_read(ice->ac97, 0x5a) & ~0x8000);\n\treturn 0;\n}\n\n\n \nstruct snd_ice1712_card_info snd_vt1724_amp_cards[] = {\n\t{\n\t\t.subvendor = VT1724_SUBDEVICE_AV710,\n\t\t.name = \"Chaintech AV-710\",\n\t\t.model = \"av710\",\n\t\t.chip_init = snd_vt1724_amp_init,\n\t\t.build_controls = snd_vt1724_amp_add_controls,\n\t},\n\t{\n\t\t.subvendor = VT1724_SUBDEVICE_AUDIO2000,\n\t\t.name = \"AMP Ltd AUDIO2000\",\n\t\t.model = \"amp2000\",\n\t\t.chip_init = snd_vt1724_amp_init,\n\t\t.build_controls = snd_vt1724_amp_add_controls,\n\t},\n\t{ }  \n};\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}