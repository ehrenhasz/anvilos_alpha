{
  "module_name": "cs35l41_hda_property.c",
  "hash_id": "bb77c1897f3aa38870622b9271dc16774c42a340d1199bd283367190f07c9729",
  "original_prompt": "Ingested from linux-6.6.14/sound/pci/hda/cs35l41_hda_property.c",
  "human_readable_source": "\n\n\n\n\n\n\n\n#include <linux/gpio/consumer.h>\n#include <linux/string.h>\n#include \"cs35l41_hda_property.h\"\n\n \nstatic int lenovo_legion_no_acpi(struct cs35l41_hda *cs35l41, struct device *physdev, int id,\n\t\t\t\t const char *hid)\n{\n\tstruct cs35l41_hw_cfg *hw_cfg = &cs35l41->hw_cfg;\n\n\t \n\tcs35l41->index = id == 0x40 ? 0 : 1;\n\tcs35l41->channel_index = 0;\n\tcs35l41->reset_gpio = gpiod_get_index(physdev, NULL, 0, GPIOD_OUT_HIGH);\n\tcs35l41->speaker_id = cs35l41_get_speaker_id(physdev, 0, 0, 2);\n\thw_cfg->spk_pos = cs35l41->index;\n\thw_cfg->gpio2.func = CS35L41_INTERRUPT;\n\thw_cfg->gpio2.valid = true;\n\thw_cfg->valid = true;\n\n\tif (strcmp(hid, \"CLSA0100\") == 0) {\n\t\thw_cfg->bst_type = CS35L41_EXT_BOOST_NO_VSPK_SWITCH;\n\t} else if (strcmp(hid, \"CLSA0101\") == 0) {\n\t\thw_cfg->bst_type = CS35L41_EXT_BOOST;\n\t\thw_cfg->gpio1.func = CS35l41_VSPK_SWITCH;\n\t\thw_cfg->gpio1.valid = true;\n\t}\n\n\treturn 0;\n}\n\n \nstatic int hp_vision_acpi_fix(struct cs35l41_hda *cs35l41, struct device *physdev, int id,\n\t\t\t      const char *hid)\n{\n\tstruct cs35l41_hw_cfg *hw_cfg = &cs35l41->hw_cfg;\n\n\tdev_info(cs35l41->dev, \"Adding DSD properties for %s\\n\", cs35l41->acpi_subsystem_id);\n\n\tcs35l41->index = id;\n\tcs35l41->channel_index = 0;\n\tcs35l41->reset_gpio = gpiod_get_index(physdev, NULL, 1, GPIOD_OUT_HIGH);\n\tcs35l41->speaker_id = -ENOENT;\n\thw_cfg->spk_pos = cs35l41->index ? 1 : 0; \n\thw_cfg->gpio1.func = CS35L41_NOT_USED;\n\thw_cfg->gpio1.valid = true;\n\thw_cfg->gpio2.func = CS35L41_INTERRUPT;\n\thw_cfg->gpio2.valid = true;\n\thw_cfg->bst_type = CS35L41_INT_BOOST;\n\thw_cfg->bst_ind = 1000;\n\thw_cfg->bst_ipk = 4500;\n\thw_cfg->bst_cap = 24;\n\thw_cfg->valid = true;\n\n\treturn 0;\n}\n\nstruct cs35l41_prop_model {\n\tconst char *hid;\n\tconst char *ssid;\n\tint (*add_prop)(struct cs35l41_hda *cs35l41, struct device *physdev, int id,\n\t\t\tconst char *hid);\n};\n\nstatic const struct cs35l41_prop_model cs35l41_prop_model_table[] = {\n\t{ \"CLSA0100\", NULL, lenovo_legion_no_acpi },\n\t{ \"CLSA0101\", NULL, lenovo_legion_no_acpi },\n\t{ \"CSC3551\", \"103C89C6\", hp_vision_acpi_fix },\n\t{}\n};\n\nint cs35l41_add_dsd_properties(struct cs35l41_hda *cs35l41, struct device *physdev, int id,\n\t\t\t       const char *hid)\n{\n\tconst struct cs35l41_prop_model *model;\n\n\tfor (model = cs35l41_prop_model_table; model->hid; model++) {\n\t\tif (!strcmp(model->hid, hid) &&\n\t\t    (!model->ssid ||\n\t\t     (cs35l41->acpi_subsystem_id &&\n\t\t      !strcmp(model->ssid, cs35l41->acpi_subsystem_id))))\n\t\t\treturn model->add_prop(cs35l41, physdev, id, hid);\n\t}\n\n\treturn -ENOENT;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}