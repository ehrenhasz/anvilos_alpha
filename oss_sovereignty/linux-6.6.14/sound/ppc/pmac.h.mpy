{
  "module_name": "pmac.h",
  "hash_id": "a62483ee1b60fb5b3accdd7d7fa9e0357a61d9b09bdf0a7e22be8d69133214e3",
  "original_prompt": "Ingested from linux-6.6.14/sound/ppc/pmac.h",
  "human_readable_source": " \n \n\n\n#ifndef __PMAC_H\n#define __PMAC_H\n\n#include <sound/control.h>\n#include <sound/pcm.h>\n#include \"awacs.h\"\n\n#include <linux/adb.h>\n#ifdef CONFIG_ADB_CUDA\n#include <linux/cuda.h>\n#endif\n#ifdef CONFIG_ADB_PMU\n#include <linux/pmu.h>\n#endif\n#include <linux/nvram.h>\n#include <linux/tty.h>\n#include <linux/vt_kern.h>\n#include <asm/dbdma.h>\n#include <asm/prom.h>\n#include <asm/machdep.h>\n#include <asm/pmac_feature.h>\n\n \n#define PMAC_MAX_FRAGS\t\t32\n\n\n#define PMAC_SUPPORT_AUTOMUTE\n\n \nstruct pmac_dbdma {\n\tdma_addr_t dma_base;\n\tdma_addr_t addr;\n\tstruct dbdma_cmd __iomem *cmds;\n\tvoid *space;\n\tint size;\n};\n\n \nstruct pmac_stream {\n\tint running;\t \n\n\tint stream;\t \n\n\tint dma_size;  \n\tint period_size;  \n\tint buffer_size;  \n\tint nperiods, cur_period;\n\n\tstruct pmac_dbdma cmd;\n\tvolatile struct dbdma_regs __iomem *dma;\n\n\tstruct snd_pcm_substream *substream;\n\n\tunsigned int cur_freqs;\t\t \n\tunsigned int cur_formats;\t \n};\n\n\n \n\nenum snd_pmac_model {\n\tPMAC_AWACS, PMAC_SCREAMER, PMAC_BURGUNDY, PMAC_DACA, PMAC_TUMBLER,\n\tPMAC_SNAPPER\n};\n\nstruct snd_pmac {\n\tstruct snd_card *card;\n\n\t \n\tstruct device_node *node;\n\tstruct pci_dev *pdev;\n\tunsigned int revision;\n\tunsigned int manufacturer;\n\tunsigned int subframe;\n\tunsigned int device_id;\n\tenum snd_pmac_model model;\n\n\tunsigned int has_iic : 1;\n\tunsigned int is_pbook_3400 : 1;\n\tunsigned int is_pbook_G3 : 1;\n\tunsigned int is_k2 : 1;\n\n\tunsigned int can_byte_swap : 1;\n\tunsigned int can_duplex : 1;\n\tunsigned int can_capture : 1;\n\n\tunsigned int auto_mute : 1;\n\tunsigned int initialized : 1;\n\tunsigned int feature_is_set : 1;\n\n\tunsigned int requested;\n\tstruct resource rsrc[3];\n\n\tint num_freqs;\n\tconst int *freq_table;\n\tunsigned int freqs_ok;\t\t \n\tunsigned int formats_ok;\t \n\tint active;\n\tint rate_index;\n\tint format;\t\t\t \n\n\tspinlock_t reg_lock;\n\tvolatile struct awacs_regs __iomem *awacs;\n\tint awacs_reg[8];  \n\tunsigned int hp_stat_mask;\n\n\tunsigned char __iomem *latch_base;\n\tunsigned char __iomem *macio_base;\n\n\tstruct pmac_stream playback;\n\tstruct pmac_stream capture;\n\n\tstruct pmac_dbdma extra_dma;\n\n\tint irq, tx_irq, rx_irq;\n\n\tstruct snd_pcm *pcm;\n\n\tstruct pmac_beep *beep;\n\n\tunsigned int control_mask;\t \n\n\t \n\tvoid *mixer_data;\n\tvoid (*mixer_free)(struct snd_pmac *);\n\tstruct snd_kcontrol *master_sw_ctl;\n\tstruct snd_kcontrol *speaker_sw_ctl;\n\tstruct snd_kcontrol *drc_sw_ctl;\t \n\tstruct snd_kcontrol *hp_detect_ctl;\n\tstruct snd_kcontrol *lineout_sw_ctl;\n\n\t \n\tvoid (*set_format)(struct snd_pmac *chip);\n\tvoid (*update_automute)(struct snd_pmac *chip, int do_notify);\n\tint (*detect_headphone)(struct snd_pmac *chip);\n#ifdef CONFIG_PM\n\tvoid (*suspend)(struct snd_pmac *chip);\n\tvoid (*resume)(struct snd_pmac *chip);\n#endif\n\n};\n\n\n \nint snd_pmac_new(struct snd_card *card, struct snd_pmac **chip_return);\nint snd_pmac_pcm_new(struct snd_pmac *chip);\nint snd_pmac_attach_beep(struct snd_pmac *chip);\nvoid snd_pmac_detach_beep(struct snd_pmac *chip);\nvoid snd_pmac_beep_stop(struct snd_pmac *chip);\nunsigned int snd_pmac_rate_index(struct snd_pmac *chip, struct pmac_stream *rec, unsigned int rate);\n\nvoid snd_pmac_beep_dma_start(struct snd_pmac *chip, int bytes, unsigned long addr, int speed);\nvoid snd_pmac_beep_dma_stop(struct snd_pmac *chip);\n\n#ifdef CONFIG_PM\nvoid snd_pmac_suspend(struct snd_pmac *chip);\nvoid snd_pmac_resume(struct snd_pmac *chip);\n#endif\n\n \nint snd_pmac_awacs_init(struct snd_pmac *chip);\nint snd_pmac_burgundy_init(struct snd_pmac *chip);\nint snd_pmac_daca_init(struct snd_pmac *chip);\nint snd_pmac_tumbler_init(struct snd_pmac *chip);\nint snd_pmac_tumbler_post_init(void);\n\n \nstruct pmac_keywest {\n\tint addr;\n\tstruct i2c_client *client;\n\tint id;\n\tint (*init_client)(struct pmac_keywest *i2c);\n\tchar *name;\n};\n\nint snd_pmac_keywest_init(struct pmac_keywest *i2c);\nvoid snd_pmac_keywest_cleanup(struct pmac_keywest *i2c);\n\n \n#define snd_pmac_boolean_stereo_info\tsnd_ctl_boolean_stereo_info\n#define snd_pmac_boolean_mono_info\tsnd_ctl_boolean_mono_info\n\nint snd_pmac_add_automute(struct snd_pmac *chip);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}