{
  "module_name": "hda_bus_type.c",
  "hash_id": "65e0cbe991fbe9da019e622716c6617d69aa517d91e7f1b2ec27a55ab4ac7143",
  "original_prompt": "Ingested from linux-6.6.14/sound/hda/hda_bus_type.c",
  "human_readable_source": "\n \n#include <linux/init.h>\n#include <linux/device.h>\n#include <linux/module.h>\n#include <linux/mod_devicetable.h>\n#include <linux/export.h>\n#include <sound/hdaudio.h>\n\nMODULE_DESCRIPTION(\"HD-audio bus\");\nMODULE_LICENSE(\"GPL\");\n\n \nconst struct hda_device_id *\nhdac_get_device_id(struct hdac_device *hdev, struct hdac_driver *drv)\n{\n\tif (drv->id_table) {\n\t\tconst struct hda_device_id *id  = drv->id_table;\n\n\t\twhile (id->vendor_id) {\n\t\t\tif (hdev->vendor_id == id->vendor_id &&\n\t\t\t\t(!id->rev_id || id->rev_id == hdev->revision_id))\n\t\t\t\treturn id;\n\t\t\tid++;\n\t\t}\n\t}\n\n\treturn NULL;\n}\nEXPORT_SYMBOL_GPL(hdac_get_device_id);\n\nstatic int hdac_codec_match(struct hdac_device *dev, struct hdac_driver *drv)\n{\n\tif (hdac_get_device_id(dev, drv))\n\t\treturn 1;\n\telse\n\t\treturn 0;\n}\n\nstatic int hda_bus_match(struct device *dev, struct device_driver *drv)\n{\n\tstruct hdac_device *hdev = dev_to_hdac_dev(dev);\n\tstruct hdac_driver *hdrv = drv_to_hdac_driver(drv);\n\n\tif (hdev->type != hdrv->type)\n\t\treturn 0;\n\n\t \n\tif (hdrv->match)\n\t\treturn hdrv->match(hdev, hdrv);\n\telse\n\t\treturn hdac_codec_match(hdev, hdrv);\n\treturn 1;\n}\n\nstatic int hda_uevent(const struct device *dev, struct kobj_uevent_env *env)\n{\n\tchar modalias[32];\n\n\tsnd_hdac_codec_modalias(dev_to_hdac_dev(dev), modalias,\n\t\t\t\tsizeof(modalias));\n\tif (add_uevent_var(env, \"MODALIAS=%s\", modalias))\n\t\treturn -ENOMEM;\n\treturn 0;\n}\n\nstruct bus_type snd_hda_bus_type = {\n\t.name = \"hdaudio\",\n\t.match = hda_bus_match,\n\t.uevent = hda_uevent,\n};\nEXPORT_SYMBOL_GPL(snd_hda_bus_type);\n\nstatic int __init hda_bus_init(void)\n{\n\treturn bus_register(&snd_hda_bus_type);\n}\n\nstatic void __exit hda_bus_exit(void)\n{\n\tbus_unregister(&snd_hda_bus_type);\n}\n\nsubsys_initcall(hda_bus_init);\nmodule_exit(hda_bus_exit);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}