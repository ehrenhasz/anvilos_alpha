{
  "module_name": "hdac_ext_bus.c",
  "hash_id": "e8b0feb6b1aad594e5be68468afc848a372a771c0aa3f4103a84d052b37a47d3",
  "original_prompt": "Ingested from linux-6.6.14/sound/hda/ext/hdac_ext_bus.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n#include <linux/slab.h>\n#include <linux/io.h>\n#include <sound/hdaudio_ext.h>\n\nMODULE_DESCRIPTION(\"HDA extended core\");\nMODULE_LICENSE(\"GPL v2\");\n\n \nint snd_hdac_ext_bus_init(struct hdac_bus *bus, struct device *dev,\n\t\t\tconst struct hdac_bus_ops *ops,\n\t\t\tconst struct hdac_ext_bus_ops *ext_ops)\n{\n\tint ret;\n\n\tret = snd_hdac_bus_init(bus, dev, ops);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tbus->ext_ops = ext_ops;\n\t \n\tbus->idx = 0;\n\tbus->cmd_dma_state = true;\n\n\treturn 0;\n}\nEXPORT_SYMBOL_GPL(snd_hdac_ext_bus_init);\n\n \nvoid snd_hdac_ext_bus_exit(struct hdac_bus *bus)\n{\n\tsnd_hdac_bus_exit(bus);\n\tWARN_ON(!list_empty(&bus->hlink_list));\n}\nEXPORT_SYMBOL_GPL(snd_hdac_ext_bus_exit);\n\n \nvoid snd_hdac_ext_bus_device_remove(struct hdac_bus *bus)\n{\n\tstruct hdac_device *codec, *__codec;\n\t \n\tlist_for_each_entry_safe(codec, __codec, &bus->codec_list, list) {\n\t\tsnd_hdac_device_unregister(codec);\n\t\tput_device(&codec->dev);\n\t}\n}\nEXPORT_SYMBOL_GPL(snd_hdac_ext_bus_device_remove);\n#define dev_to_hdac(dev) (container_of((dev), \\\n\t\t\tstruct hdac_device, dev))\n\nstatic inline struct hdac_driver *get_hdrv(struct device *dev)\n{\n\tstruct hdac_driver *hdrv = drv_to_hdac_driver(dev->driver);\n\treturn hdrv;\n}\n\nstatic inline struct hdac_device *get_hdev(struct device *dev)\n{\n\tstruct hdac_device *hdev = dev_to_hdac_dev(dev);\n\treturn hdev;\n}\n\nstatic int hda_ext_drv_probe(struct device *dev)\n{\n\treturn (get_hdrv(dev))->probe(get_hdev(dev));\n}\n\nstatic int hdac_ext_drv_remove(struct device *dev)\n{\n\treturn (get_hdrv(dev))->remove(get_hdev(dev));\n}\n\nstatic void hdac_ext_drv_shutdown(struct device *dev)\n{\n\treturn (get_hdrv(dev))->shutdown(get_hdev(dev));\n}\n\n \nint snd_hda_ext_driver_register(struct hdac_driver *drv)\n{\n\tdrv->type = HDA_DEV_ASOC;\n\tdrv->driver.bus = &snd_hda_bus_type;\n\t \n\n\tif (drv->probe)\n\t\tdrv->driver.probe = hda_ext_drv_probe;\n\tif (drv->remove)\n\t\tdrv->driver.remove = hdac_ext_drv_remove;\n\tif (drv->shutdown)\n\t\tdrv->driver.shutdown = hdac_ext_drv_shutdown;\n\n\treturn driver_register(&drv->driver);\n}\nEXPORT_SYMBOL_GPL(snd_hda_ext_driver_register);\n\n \nvoid snd_hda_ext_driver_unregister(struct hdac_driver *drv)\n{\n\tdriver_unregister(&drv->driver);\n}\nEXPORT_SYMBOL_GPL(snd_hda_ext_driver_unregister);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}