{
  "module_name": "amdtp-stream-trace.h",
  "hash_id": "62041d2ec290d8fbdb7afba45fd9a97387648c7f352de2725f77448b4a6167d1",
  "original_prompt": "Ingested from linux-6.6.14/sound/firewire/amdtp-stream-trace.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM\t\tsnd_firewire_lib\n\n#if !defined(_AMDTP_STREAM_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _AMDTP_STREAM_TRACE_H\n\n#include <linux/tracepoint.h>\n\nTRACE_EVENT(amdtp_packet,\n\tTP_PROTO(const struct amdtp_stream *s, u32 cycles, const __be32 *cip_header, unsigned int payload_length, unsigned int data_blocks, unsigned int data_block_counter, unsigned int packet_index, unsigned int index, u32 curr_cycle_time),\n\tTP_ARGS(s, cycles, cip_header, payload_length, data_blocks, data_block_counter, packet_index, index, curr_cycle_time),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, cycle_time)\n\t\t__field(unsigned int, second)\n\t\t__field(unsigned int, cycle)\n\t\t__field(int, channel)\n\t\t__field(int, src)\n\t\t__field(int, dest)\n\t\t__dynamic_array(u8, cip_header, cip_header ? 8 : 0)\n\t\t__field(unsigned int, payload_quadlets)\n\t\t__field(unsigned int, data_blocks)\n\t\t__field(unsigned int, data_block_counter)\n\t\t__field(unsigned int, packet_index)\n\t\t__field(unsigned int, irq)\n\t\t__field(unsigned int, index)\n\t),\n\tTP_fast_assign(\n\t\t__entry->cycle_time = curr_cycle_time;\n\t\t__entry->second = cycles / CYCLES_PER_SECOND;\n\t\t__entry->cycle = cycles % CYCLES_PER_SECOND;\n\t\t__entry->channel = s->context->channel;\n\t\tif (s->direction == AMDTP_IN_STREAM) {\n\t\t\t__entry->src = fw_parent_device(s->unit)->node_id;\n\t\t\t__entry->dest = fw_parent_device(s->unit)->card->node_id;\n\t\t} else {\n\t\t\t__entry->src = fw_parent_device(s->unit)->card->node_id;\n\t\t\t__entry->dest = fw_parent_device(s->unit)->node_id;\n\t\t}\n\t\tif (cip_header) {\n\t\t\tmemcpy(__get_dynamic_array(cip_header), cip_header,\n\t\t\t       __get_dynamic_array_len(cip_header));\n\t\t}\n\t\t__entry->payload_quadlets = payload_length / sizeof(__be32);\n\t\t__entry->data_blocks = data_blocks;\n\t\t__entry->data_block_counter = data_block_counter,\n\t\t__entry->packet_index = packet_index;\n\t\t__entry->irq = !!in_softirq();\n\t\t__entry->index = index;\n\t),\n\tTP_printk(\n\t\t\"%08x %02u %04u %04x %04x %02d %03u %02u %03u %02u %01u %02u %s\",\n\t\t__entry->cycle_time,\n\t\t__entry->second,\n\t\t__entry->cycle,\n\t\t__entry->src,\n\t\t__entry->dest,\n\t\t__entry->channel,\n\t\t__entry->payload_quadlets,\n\t\t__entry->data_blocks,\n\t\t__entry->data_block_counter,\n\t\t__entry->packet_index,\n\t\t__entry->irq,\n\t\t__entry->index,\n\t\t__print_array(__get_dynamic_array(cip_header),\n\t\t\t      __get_dynamic_array_len(cip_header), 1))\n);\n\n#endif\n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH\t.\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE\tamdtp-stream-trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}