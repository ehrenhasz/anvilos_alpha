{
  "module_name": "card.h",
  "hash_id": "11973d0a5a302d37816b25db9b57597876937e283816587efe3215c401bdcbdc",
  "original_prompt": "Ingested from linux-6.6.14/sound/usb/card.h",
  "human_readable_source": " \n#ifndef __USBAUDIO_CARD_H\n#define __USBAUDIO_CARD_H\n\n#define MAX_NR_RATES\t1024\n#define MAX_PACKS\t6\t\t \n#define MAX_PACKS_HS\t(MAX_PACKS * 8)\t \n#define MAX_URBS\t12\n#define SYNC_URBS\t4\t \n#define MAX_QUEUE\t18\t \n\nstruct audioformat {\n\tstruct list_head list;\n\tu64 formats;\t\t\t \n\tunsigned int channels;\t\t \n\tunsigned int fmt_type;\t\t \n\tunsigned int fmt_bits;\t\t \n\tunsigned int frame_size;\t \n\tunsigned char iface;\t\t \n\tunsigned char altsetting;\t \n\tunsigned char ep_idx;\t\t \n\tunsigned char altset_idx;\t \n\tunsigned char attributes;\t \n\tunsigned char endpoint;\t\t \n\tunsigned char ep_attr;\t\t \n\tbool implicit_fb;\t\t \n\tunsigned char sync_ep;\t\t \n\tunsigned char sync_iface;\t \n\tunsigned char sync_altsetting;\t \n\tunsigned char sync_ep_idx;\t \n\tunsigned char datainterval;\t \n\tunsigned char protocol;\t\t \n\tunsigned int maxpacksize;\t \n\tunsigned int rates;\t\t \n\tunsigned int rate_min, rate_max;\t \n\tunsigned int nr_rates;\t\t \n\tunsigned int *rate_table;\t \n\tunsigned char clock;\t\t \n\tstruct snd_pcm_chmap_elem *chmap;  \n\tbool dsd_dop;\t\t\t \n\tbool dsd_bitrev;\t\t \n\tbool dsd_raw;\t\t\t \n};\n\nstruct snd_usb_substream;\nstruct snd_usb_iface_ref;\nstruct snd_usb_clock_ref;\nstruct snd_usb_endpoint;\nstruct snd_usb_power_domain;\n\nstruct snd_urb_ctx {\n\tstruct urb *urb;\n\tunsigned int buffer_size;\t \n\tstruct snd_usb_substream *subs;\n\tstruct snd_usb_endpoint *ep;\n\tint index;\t \n\tint packets;\t \n\tint queued;\t \n\tint packet_size[MAX_PACKS_HS];  \n\tstruct list_head ready_list;\n};\n\nstruct snd_usb_endpoint {\n\tstruct snd_usb_audio *chip;\n\tstruct snd_usb_iface_ref *iface_ref;\n\tstruct snd_usb_clock_ref *clock_ref;\n\n\tint opened;\t\t \n\tatomic_t running;\t \n\tint ep_num;\t\t \n\tint type;\t\t \n\n\tunsigned char iface;\t\t \n\tunsigned char altsetting;\t \n\tunsigned char ep_idx;\t\t \n\n\tatomic_t state;\t\t \n\n\tint (*prepare_data_urb) (struct snd_usb_substream *subs,\n\t\t\t\t struct urb *urb,\n\t\t\t\t bool in_stream_lock);\n\tvoid (*retire_data_urb) (struct snd_usb_substream *subs,\n\t\t\t\t struct urb *urb);\n\n\tstruct snd_usb_substream *data_subs;\n\tstruct snd_usb_endpoint *sync_source;\n\tstruct snd_usb_endpoint *sync_sink;\n\n\tstruct snd_urb_ctx urb[MAX_URBS];\n\n\tstruct snd_usb_packet_info {\n\t\tuint32_t packet_size[MAX_PACKS_HS];\n\t\tint packets;\n\t} next_packet[MAX_URBS];\n\tunsigned int next_packet_head;\t \n\tunsigned int next_packet_queued;  \n\tstruct list_head ready_playback_urbs;  \n\n\tunsigned int nurbs;\t\t \n\tunsigned long active_mask;\t \n\tunsigned long unlink_mask;\t \n\tatomic_t submitted_urbs;\t \n\tchar *syncbuf;\t\t\t \n\tdma_addr_t sync_dma;\t\t \n\n\tunsigned int pipe;\t\t \n\tunsigned int packsize[2];\t \n\tunsigned int sample_rem;\t \n\tunsigned int sample_accum;\t \n\tunsigned int pps;\t\t \n\tunsigned int freqn;\t\t \n\tunsigned int freqm;\t\t \n\tint\t   freqshift;\t\t \n\tunsigned int freqmax;\t\t \n\tunsigned int phase;\t\t \n\tunsigned int maxpacksize;\t \n\tunsigned int maxframesize;       \n\tunsigned int max_urb_frames;\t \n\tunsigned int curpacksize;\t \n\tunsigned int curframesize;       \n\tunsigned int syncmaxsize;\t \n\tunsigned int fill_max:1;\t \n\tunsigned int tenor_fb_quirk:1;\t \n\tunsigned int datainterval;       \n\tunsigned int syncinterval;\t \n\tunsigned char silence_value;\n\tunsigned int stride;\n\tint skip_packets;\t\t \n\tbool implicit_fb_sync;\t\t \n\tbool lowlatency_playback;\t \n\tbool need_setup;\t\t \n\tbool need_prepare;\t\t \n\tbool fixed_rate;\t\t \n\n\t \n\tconst struct audioformat *cur_audiofmt;\n\tunsigned int cur_rate;\n\tsnd_pcm_format_t cur_format;\n\tunsigned int cur_channels;\n\tunsigned int cur_frame_bytes;\n\tunsigned int cur_period_frames;\n\tunsigned int cur_period_bytes;\n\tunsigned int cur_buffer_periods;\n\n\tspinlock_t lock;\n\tstruct list_head list;\n};\n\nstruct media_ctl;\n\nstruct snd_usb_substream {\n\tstruct snd_usb_stream *stream;\n\tstruct usb_device *dev;\n\tstruct snd_pcm_substream *pcm_substream;\n\tint direction;\t \n\tint endpoint;\t \n\tconst struct audioformat *cur_audiofmt;\t \n\tstruct snd_usb_power_domain *str_pd;\t \n\tunsigned int channels_max;\t \n\tunsigned int txfr_quirk:1;\t \n\tunsigned int tx_length_quirk:1;\t \n\tunsigned int fmt_type;\t\t \n\tunsigned int pkt_offset_adj;\t \n\tunsigned int stream_offset_adj;\t \n\n\tunsigned int running: 1;\t \n\tunsigned int period_elapsed_pending;\t \n\n\tunsigned int buffer_bytes;\t \n\tunsigned int inflight_bytes;\t \n\tunsigned int hwptr_done;\t \n\tunsigned int transfer_done;\t \n\tunsigned int frame_limit;\t \n\n\t \n\tunsigned int ep_num;\t\t \n\tstruct snd_usb_endpoint *data_endpoint;\n\tstruct snd_usb_endpoint *sync_endpoint;\n\tunsigned long flags;\n\tunsigned int speed;\t\t \n\n\tu64 formats;\t\t\t \n\tunsigned int num_formats;\t\t \n\tstruct list_head fmt_list;\t \n\tspinlock_t lock;\n\n\tunsigned int last_frame_number;\t \n\n\tstruct {\n\t\tint marker;\n\t\tint channel;\n\t\tint byte_idx;\n\t} dsd_dop;\n\n\tbool trigger_tstamp_pending_update;  \n\tbool lowlatency_playback;\t \n\tstruct media_ctl *media_ctl;\n};\n\nstruct snd_usb_stream {\n\tstruct snd_usb_audio *chip;\n\tstruct snd_pcm *pcm;\n\tint pcm_index;\n\tunsigned int fmt_type;\t\t \n\tstruct snd_usb_substream substream[2];\n\tstruct list_head list;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}