{
  "module_name": "driver.h",
  "hash_id": "3173b3f10ff766a76639576864092221be5a23089b6baad81d630852355e2f97",
  "original_prompt": "Ingested from linux-6.6.14/sound/usb/line6/driver.h",
  "human_readable_source": " \n \n\n#ifndef DRIVER_H\n#define DRIVER_H\n\n#include <linux/usb.h>\n#include <linux/mutex.h>\n#include <linux/kfifo.h>\n#include <sound/core.h>\n\n#include \"midi.h\"\n\n \n#define USB_LOW_INTERVALS_PER_SECOND 1000\n#define USB_LOW_ISO_BUFFERS 2\n\n \n#define USB_HIGH_INTERVALS_PER_SECOND 8000\n#define USB_HIGH_ISO_BUFFERS 16\n\n \n#define LINE6_FALLBACK_INTERVAL 10\n#define LINE6_FALLBACK_MAXPACKETSIZE 16\n\n#define LINE6_TIMEOUT 1000\n#define LINE6_BUFSIZE_LISTEN 64\n#define LINE6_MIDI_MESSAGE_MAXLEN 256\n\n#define LINE6_RAW_MESSAGES_MAXCOUNT_ORDER 7\n \n#define LINE6_RAW_MESSAGES_MAXCOUNT (1 << LINE6_RAW_MESSAGES_MAXCOUNT_ORDER)\n\n\n#if LINE6_BUFSIZE_LISTEN > 65535\n#error \"Use dynamic fifo instead\"\n#endif\n\n \n#define LINE6_PARAM_CHANGE   0xb0\n#define LINE6_PROGRAM_CHANGE 0xc0\n#define LINE6_SYSEX_BEGIN    0xf0\n#define LINE6_SYSEX_END      0xf7\n#define LINE6_RESET          0xff\n\n \n#define LINE6_CHANNEL_HOST   0x00\n\n \n#define LINE6_CHANNEL_DEVICE 0x02\n\n#define LINE6_CHANNEL_UNKNOWN 5\t \n\n#define LINE6_CHANNEL_MASK 0x0f\n\nextern const unsigned char line6_midi_id[3];\n\n#define SYSEX_DATA_OFS (sizeof(line6_midi_id) + 3)\n#define SYSEX_EXTRA_SIZE (sizeof(line6_midi_id) + 4)\n\n \nstruct line6_properties {\n\t \n\tconst char *id;\n\n\t \n\tconst char *name;\n\n\t \n\tint capabilities;\n\n\tint altsetting;\n\n\tunsigned int ctrl_if;\n\tunsigned int ep_ctrl_r;\n\tunsigned int ep_ctrl_w;\n\tunsigned int ep_audio_r;\n\tunsigned int ep_audio_w;\n};\n\n \nenum {\n\t \n\tLINE6_CAP_CONTROL =\t1 << 0,\n\t \n\tLINE6_CAP_PCM =\t\t1 << 1,\n\t \n\tLINE6_CAP_HWMON =\t1 << 2,\n\t \n\tLINE6_CAP_IN_NEEDS_OUT = 1 << 3,\n\t \n\tLINE6_CAP_CONTROL_MIDI = 1 << 4,\n\t \n\tLINE6_CAP_CONTROL_INFO = 1 << 5,\n\t \n\tLINE6_CAP_HWMON_CTL =\t1 << 6,\n};\n\n \nstruct usb_line6 {\n\t \n\tstruct usb_device *usbdev;\n\n\t \n\tconst struct line6_properties *properties;\n\n\t \n\tint interval;\n\t \n\tint intervals_per_second;\n\n\t \n\tint iso_buffers;\n\n\t \n\tint max_packet_size;\n\n\t \n\tstruct device *ifcdev;\n\n\t \n\tstruct snd_card *card;\n\n\t \n\tstruct snd_line6_pcm *line6pcm;\n\n\t \n\tstruct snd_line6_midi *line6midi;\n\n\t \n\tstruct urb *urb_listen;\n\n\t \n\tunsigned char *buffer_listen;\n\n\t \n\tunsigned char *buffer_message;\n\n\t \n\tint message_length;\n\n\t \n\tstruct {\n\t\tstruct mutex read_lock;\n\t\twait_queue_head_t wait_queue;\n\t\tunsigned int active:1;\n\t\tunsigned int nonblock:1;\n\t\tSTRUCT_KFIFO_REC_2(LINE6_BUFSIZE_LISTEN * LINE6_RAW_MESSAGES_MAXCOUNT)\n\t\t\tfifo;\n\t} messages;\n\n\t \n\tstruct delayed_work startup_work;\n\n\t \n\tvoid (*process_message)(struct usb_line6 *);\n\tvoid (*disconnect)(struct usb_line6 *line6);\n\tvoid (*startup)(struct usb_line6 *line6);\n};\n\nextern char *line6_alloc_sysex_buffer(struct usb_line6 *line6, int code1,\n\t\t\t\t      int code2, int size);\nextern int line6_read_data(struct usb_line6 *line6, unsigned address,\n\t\t\t   void *data, unsigned datalen);\nextern int line6_read_serial_number(struct usb_line6 *line6,\n\t\t\t\t    u32 *serial_number);\nextern int line6_send_raw_message(struct usb_line6 *line6,\n\t\t\t\t\tconst char *buffer, int size);\nextern int line6_send_raw_message_async(struct usb_line6 *line6,\n\t\t\t\t\tconst char *buffer, int size);\nextern int line6_send_sysex_message(struct usb_line6 *line6,\n\t\t\t\t    const char *buffer, int size);\nextern int line6_version_request_async(struct usb_line6 *line6);\nextern int line6_write_data(struct usb_line6 *line6, unsigned address,\n\t\t\t    void *data, unsigned datalen);\n\nint line6_probe(struct usb_interface *interface,\n\t\tconst struct usb_device_id *id,\n\t\tconst char *driver_name,\n\t\tconst struct line6_properties *properties,\n\t\tint (*private_init)(struct usb_line6 *, const struct usb_device_id *id),\n\t\tsize_t data_size);\n\nvoid line6_disconnect(struct usb_interface *interface);\n\n#ifdef CONFIG_PM\nint line6_suspend(struct usb_interface *interface, pm_message_t message);\nint line6_resume(struct usb_interface *interface);\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}