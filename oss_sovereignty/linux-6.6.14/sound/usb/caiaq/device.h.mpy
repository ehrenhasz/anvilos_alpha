{
  "module_name": "device.h",
  "hash_id": "0c13565f1549477d97f752d4fd4cc159b63b987f2073a046bd1b58bf65f89390",
  "original_prompt": "Ingested from linux-6.6.14/sound/usb/caiaq/device.h",
  "human_readable_source": " \n#ifndef CAIAQ_DEVICE_H\n#define CAIAQ_DEVICE_H\n\n#include \"../usbaudio.h\"\n\n#define USB_VID_NATIVEINSTRUMENTS 0x17cc\n\n#define USB_PID_RIGKONTROL2\t\t0x1969\n#define USB_PID_RIGKONTROL3\t\t0x1940\n#define USB_PID_KORECONTROLLER\t\t0x4711\n#define USB_PID_KORECONTROLLER2\t\t0x4712\n#define USB_PID_AK1\t\t\t0x0815\n#define USB_PID_AUDIO2DJ\t\t0x041c\n#define USB_PID_AUDIO4DJ\t\t0x0839\n#define USB_PID_AUDIO8DJ\t\t0x1978\n#define USB_PID_SESSIONIO\t\t0x1915\n#define USB_PID_GUITARRIGMOBILE\t\t0x0d8d\n#define USB_PID_TRAKTORKONTROLX1\t0x2305\n#define USB_PID_TRAKTORKONTROLS4\t0xbaff\n#define USB_PID_TRAKTORAUDIO2\t\t0x041d\n#define USB_PID_MASCHINECONTROLLER  0x0808\n\n#define EP1_BUFSIZE 64\n#define EP4_BUFSIZE 512\n#define CAIAQ_USB_STR_LEN 0xff\n#define MAX_STREAMS 32\n\n#define MODNAME \"snd-usb-caiaq\"\n\n#define EP1_CMD_GET_DEVICE_INFO\t0x1\n#define EP1_CMD_READ_ERP\t0x2\n#define EP1_CMD_READ_ANALOG\t0x3\n#define EP1_CMD_READ_IO\t\t0x4\n#define EP1_CMD_WRITE_IO\t0x5\n#define EP1_CMD_MIDI_READ\t0x6\n#define EP1_CMD_MIDI_WRITE\t0x7\n#define EP1_CMD_AUDIO_PARAMS\t0x9\n#define EP1_CMD_AUTO_MSG\t0xb\n#define EP1_CMD_DIMM_LEDS       0xc\n\nstruct caiaq_device_spec {\n\tunsigned short fw_version;\n\tunsigned char hw_subtype;\n\tunsigned char num_erp;\n\tunsigned char num_analog_in;\n\tunsigned char num_digital_in;\n\tunsigned char num_digital_out;\n\tunsigned char num_analog_audio_out;\n\tunsigned char num_analog_audio_in;\n\tunsigned char num_digital_audio_out;\n\tunsigned char num_digital_audio_in;\n\tunsigned char num_midi_out;\n\tunsigned char num_midi_in;\n\tunsigned char data_alignment;\n} __attribute__ ((packed));\n\nstruct snd_usb_caiaq_cb_info;\n\nstruct snd_usb_caiaqdev {\n\tstruct snd_usb_audio chip;\n\n\tstruct urb ep1_in_urb;\n\tstruct urb midi_out_urb;\n\tstruct urb **data_urbs_in;\n\tstruct urb **data_urbs_out;\n\tstruct snd_usb_caiaq_cb_info *data_cb_info;\n\n\tunsigned char ep1_in_buf[EP1_BUFSIZE];\n\tunsigned char ep1_out_buf[EP1_BUFSIZE];\n\tunsigned char midi_out_buf[EP1_BUFSIZE];\n\n\tstruct caiaq_device_spec spec;\n\tspinlock_t spinlock;\n\twait_queue_head_t ep1_wait_queue;\n\twait_queue_head_t prepare_wait_queue;\n\tint spec_received, audio_parm_answer;\n\tint midi_out_active;\n\n\tchar vendor_name[CAIAQ_USB_STR_LEN];\n\tchar product_name[CAIAQ_USB_STR_LEN];\n\n\tint n_streams, n_audio_in, n_audio_out;\n\tint streaming, first_packet, output_running;\n\tint audio_in_buf_pos[MAX_STREAMS];\n\tint audio_out_buf_pos[MAX_STREAMS];\n\tint period_in_count[MAX_STREAMS];\n\tint period_out_count[MAX_STREAMS];\n\tint input_panic, output_panic, warned;\n\tchar *audio_in_buf, *audio_out_buf;\n\tunsigned int samplerates, bpp;\n\tunsigned long outurb_active_mask;\n\n\tstruct snd_pcm_substream *sub_playback[MAX_STREAMS];\n\tstruct snd_pcm_substream *sub_capture[MAX_STREAMS];\n\n\t \n\tunsigned char control_state[256];\n\tunsigned char ep8_out_buf[2];\n\n\t \n#ifdef CONFIG_SND_USB_CAIAQ_INPUT\n\tstruct input_dev *input_dev;\n\tchar phys[64];\t\t\t \n\tunsigned short keycode[128];\n\tstruct urb *ep4_in_urb;\n\tunsigned char ep4_in_buf[EP4_BUFSIZE];\n#endif\n\n\t \n\tstruct snd_pcm *pcm;\n\tstruct snd_pcm_hardware pcm_info;\n\tstruct snd_rawmidi *rmidi;\n\tstruct snd_rawmidi_substream *midi_receive_substream;\n\tstruct snd_rawmidi_substream *midi_out_substream;\n};\n\nstruct snd_usb_caiaq_cb_info {\n\tstruct snd_usb_caiaqdev *cdev;\n\tint index;\n};\n\n#define caiaqdev(c) ((struct snd_usb_caiaqdev*)(c)->private_data)\n#define caiaqdev_to_dev(d)\t(d->chip.card->dev)\n\nint snd_usb_caiaq_set_audio_params (struct snd_usb_caiaqdev *cdev, int rate, int depth, int bbp);\nint snd_usb_caiaq_set_auto_msg (struct snd_usb_caiaqdev *cdev, int digital, int analog, int erp);\nint snd_usb_caiaq_send_command(struct snd_usb_caiaqdev *cdev,\n\t\t\t       unsigned char command,\n\t\t\t       const unsigned char *buffer,\n\t\t\t       int len);\nint snd_usb_caiaq_send_command_bank(struct snd_usb_caiaqdev *cdev,\n\t\t\t       unsigned char command,\n\t\t\t       unsigned char bank,\n\t\t\t       const unsigned char *buffer,\n\t\t\t       int len);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}