{
  "module_name": "dmasound.h",
  "hash_id": "2f3411c3fb8ed7d24fdaf2878304f7349da36daeae258d48d839893767157dbe",
  "original_prompt": "Ingested from linux-6.6.14/sound/oss/dmasound/dmasound.h",
  "human_readable_source": " \n#ifndef _dmasound_h_\n \n#define _dmasound_h_\n\n#include <linux/types.h>\n\n#define SND_NDEVS\t256\t \n#define SND_DEV_CTL\t0\t \n#define SND_DEV_SEQ\t1\t \n#define SND_DEV_MIDIN\t2\t \n#define SND_DEV_DSP\t3\t \n#define SND_DEV_AUDIO\t4\t \n#define SND_DEV_DSP16\t5\t \n#define SND_DEV_STATUS\t6\t \n \n#define SND_DEV_SEQ2\t8\t \n#define SND_DEV_SNDPROC 9\t \n#define SND_DEV_PSS\tSND_DEV_SNDPROC\n\n \n#define DEBUG_DMASOUND 1\n\n#define MAX_AUDIO_DEV\t5\n#define MAX_MIXER_DEV\t4\n#define MAX_SYNTH_DEV\t3\n#define MAX_MIDI_DEV\t6\n#define MAX_TIMER_DEV\t3\n\n#define MAX_CATCH_RADIUS\t10\n\n#define le2be16(x)\t(((x)<<8 & 0xff00) | ((x)>>8 & 0x00ff))\n#define le2be16dbl(x)\t(((x)<<8 & 0xff00ff00) | ((x)>>8 & 0x00ff00ff))\n\n#define IOCTL_IN(arg, ret) \\\n\tdo { int error = get_user(ret, (int __user *)(arg)); \\\n\t\tif (error) return error; \\\n\t} while (0)\n#define IOCTL_OUT(arg, ret)\tioctl_return((int __user *)(arg), ret)\n\nstatic inline int ioctl_return(int __user *addr, int value)\n{\n\treturn value < 0 ? value : put_user(value, addr);\n}\n\n\n     \n\n#undef HAS_8BIT_TABLES\n\n#if defined(CONFIG_DMASOUND_ATARI) || defined(CONFIG_DMASOUND_ATARI_MODULE) ||\\\n    defined(CONFIG_DMASOUND_PAULA) || defined(CONFIG_DMASOUND_PAULA_MODULE) ||\\\n    defined(CONFIG_DMASOUND_Q40) || defined(CONFIG_DMASOUND_Q40_MODULE)\n#define HAS_8BIT_TABLES\n#define MIN_BUFFERS\t4\n#define MIN_BUFSIZE\t(1<<12)\t \n#define MIN_FRAG_SIZE\t8\t \n#define MAX_BUFSIZE\t(1<<17)\t \n#define MAX_FRAG_SIZE\t15\t \n\n#else  \n\n#define MIN_BUFFERS\t2\n#define MIN_BUFSIZE\t(1<<8)\t \n#define MIN_FRAG_SIZE\t8\n#define MAX_BUFSIZE\t(1<<18)\t \n#define MAX_FRAG_SIZE\t16\t \n#endif\n\n#define DEFAULT_N_BUFFERS 4\n#define DEFAULT_BUFF_SIZE (1<<15)\n\n     \n\nextern int dmasound_init(void);\nextern void dmasound_deinit(void);\n\n \n\ntypedef struct {\n    int format;\t\t \n    int stereo;\t\t \n    int size;\t\t \n    int speed;\t\t \n} SETTINGS;\n\n     \n\ntypedef struct {\n    const char *name;\n    const char *name2;\n    struct module *owner;\n    void *(*dma_alloc)(unsigned int, gfp_t);\n    void (*dma_free)(void *, unsigned int);\n    int (*irqinit)(void);\n    void (*irqcleanup)(void);\n    void (*init)(void);\n    void (*silence)(void);\n    int (*setFormat)(int);\n    int (*setVolume)(int);\n    int (*setBass)(int);\n    int (*setTreble)(int);\n    int (*setGain)(int);\n    void (*play)(void);\n    void (*record)(void);\t\t \n    void (*mixer_init)(void);\t\t \n    int (*mixer_ioctl)(u_int, u_long);\t \n    int (*write_sq_setup)(void);\t \n    int (*read_sq_setup)(void);\t\t \n    int (*sq_open)(fmode_t);\t\t \n    int (*state_info)(char *, size_t);\t \n    void (*abort_read)(void);\t\t \n    int min_dsp_speed;\n    int max_dsp_speed;\n    int version ;\n    int hardware_afmts ;\t\t \n\t\t\t\t\t \n    int capabilities ;\t\t \n    SETTINGS default_hard ;\t \n    SETTINGS default_soft ;\t \n} MACHINE;\n\n     \n\ntypedef struct {\n    ssize_t (*ct_ulaw)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_alaw)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_s8)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_u8)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_s16be)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_u16be)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_s16le)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n    ssize_t (*ct_u16le)(const u_char __user *, size_t, u_char *, ssize_t *, ssize_t);\n} TRANS;\n\nstruct sound_settings {\n    MACHINE mach;\t \n    SETTINGS hard;\t \n    SETTINGS soft;\t \n    SETTINGS dsp;\t \n    TRANS *trans_write;\t \n    int volume_left;\t \n    int volume_right;\n    int bass;\t\t \n    int treble;\n    int gain;\n    int minDev;\t\t \n    spinlock_t lock;\n};\n\nextern struct sound_settings dmasound;\n\n#ifdef HAS_8BIT_TABLES\nextern char dmasound_ulaw2dma8[];\nextern char dmasound_alaw2dma8[];\n#endif\n\n     \n\nstatic inline int dmasound_set_volume(int volume)\n{\n\treturn dmasound.mach.setVolume(volume);\n}\n\nstatic inline int dmasound_set_bass(int bass)\n{\n\treturn dmasound.mach.setBass ? dmasound.mach.setBass(bass) : 50;\n}\n\nstatic inline int dmasound_set_treble(int treble)\n{\n\treturn dmasound.mach.setTreble ? dmasound.mach.setTreble(treble) : 50;\n}\n\nstatic inline int dmasound_set_gain(int gain)\n{\n\treturn dmasound.mach.setGain ? dmasound.mach.setGain(gain) : 100;\n}\n\n\n     \n\nstruct sound_queue {\n     \n    int numBufs;\t\t \n    int bufSize;\t\t \n    char **buffers;\n\n     \n    int locked ;\t\t \n    int user_frags ;\t\t \n    int user_frag_size ;\t \n    int max_count;\t\t \n    int block_size;\t\t \n    int max_active;\t\t \n\n     \n    int front, rear, count;\n    int rear_size;\n     \n    int active;\n    wait_queue_head_t action_queue, open_queue, sync_queue;\n    int non_blocking;\n    int busy, syncing, xruns, died;\n};\n\n#define WAKE_UP(queue)\t\t(wake_up_interruptible(&queue))\n\nextern struct sound_queue dmasound_write_sq;\n#define write_sq\tdmasound_write_sq\n\nextern int dmasound_catchRadius;\n#define catchRadius\tdmasound_catchRadius\n\n \n#define BS_VAL 1\n\n#define SW_INPUT_VOLUME_SCALE\t4\n#define SW_INPUT_VOLUME_DEFAULT\t(128 / SW_INPUT_VOLUME_SCALE)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}