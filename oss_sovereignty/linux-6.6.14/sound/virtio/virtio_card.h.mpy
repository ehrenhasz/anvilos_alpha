{
  "module_name": "virtio_card.h",
  "hash_id": "a789892453149ad41917bf8b3f7ea91aee93c5f168ffc86d6f3a996a21fa495b",
  "original_prompt": "Ingested from linux-6.6.14/sound/virtio/virtio_card.h",
  "human_readable_source": " \n \n#ifndef VIRTIO_SND_CARD_H\n#define VIRTIO_SND_CARD_H\n\n#include <linux/slab.h>\n#include <linux/virtio.h>\n#include <sound/core.h>\n#include <uapi/linux/virtio_snd.h>\n\n#include \"virtio_ctl_msg.h\"\n#include \"virtio_pcm.h\"\n\n#define VIRTIO_SND_CARD_DRIVER\t\"virtio-snd\"\n#define VIRTIO_SND_CARD_NAME\t\"VirtIO SoundCard\"\n#define VIRTIO_SND_PCM_NAME\t\"VirtIO PCM\"\n\nstruct virtio_jack;\nstruct virtio_pcm_substream;\n\n \nstruct virtio_snd_queue {\n\tspinlock_t lock;\n\tstruct virtqueue *vqueue;\n};\n\n \nstruct virtio_snd {\n\tstruct virtio_device *vdev;\n\tstruct virtio_snd_queue queues[VIRTIO_SND_VQ_MAX];\n\tstruct snd_card *card;\n\tstruct list_head ctl_msgs;\n\tstruct virtio_snd_event *event_msgs;\n\tstruct list_head pcm_list;\n\tstruct virtio_jack *jacks;\n\tu32 njacks;\n\tstruct virtio_pcm_substream *substreams;\n\tu32 nsubstreams;\n\tstruct virtio_snd_chmap_info *chmaps;\n\tu32 nchmaps;\n};\n\n \nextern u32 virtsnd_msg_timeout_ms;\n\nstatic inline struct virtio_snd_queue *\nvirtsnd_control_queue(struct virtio_snd *snd)\n{\n\treturn &snd->queues[VIRTIO_SND_VQ_CONTROL];\n}\n\nstatic inline struct virtio_snd_queue *\nvirtsnd_event_queue(struct virtio_snd *snd)\n{\n\treturn &snd->queues[VIRTIO_SND_VQ_EVENT];\n}\n\nstatic inline struct virtio_snd_queue *\nvirtsnd_tx_queue(struct virtio_snd *snd)\n{\n\treturn &snd->queues[VIRTIO_SND_VQ_TX];\n}\n\nstatic inline struct virtio_snd_queue *\nvirtsnd_rx_queue(struct virtio_snd *snd)\n{\n\treturn &snd->queues[VIRTIO_SND_VQ_RX];\n}\n\nstatic inline struct virtio_snd_queue *\nvirtsnd_pcm_queue(struct virtio_pcm_substream *vss)\n{\n\tif (vss->direction == SNDRV_PCM_STREAM_PLAYBACK)\n\t\treturn virtsnd_tx_queue(vss->snd);\n\telse\n\t\treturn virtsnd_rx_queue(vss->snd);\n}\n\nint virtsnd_jack_parse_cfg(struct virtio_snd *snd);\n\nint virtsnd_jack_build_devs(struct virtio_snd *snd);\n\nvoid virtsnd_jack_event(struct virtio_snd *snd,\n\t\t\tstruct virtio_snd_event *event);\n\nint virtsnd_chmap_parse_cfg(struct virtio_snd *snd);\n\nint virtsnd_chmap_build_devs(struct virtio_snd *snd);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}