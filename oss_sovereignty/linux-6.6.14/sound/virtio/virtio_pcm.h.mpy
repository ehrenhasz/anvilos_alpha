{
  "module_name": "virtio_pcm.h",
  "hash_id": "7603613131ba46e6ab5cdb74e5ef32509b5fc710bd3f5bc21911f6bf88c357ad",
  "original_prompt": "Ingested from linux-6.6.14/sound/virtio/virtio_pcm.h",
  "human_readable_source": " \n \n#ifndef VIRTIO_SND_PCM_H\n#define VIRTIO_SND_PCM_H\n\n#include <linux/atomic.h>\n#include <linux/virtio_config.h>\n#include <sound/pcm.h>\n\nstruct virtio_pcm;\nstruct virtio_pcm_msg;\n\n \nstruct virtio_pcm_substream {\n\tstruct virtio_snd *snd;\n\tu32 nid;\n\tu32 sid;\n\tu32 direction;\n\tu32 features;\n\tstruct snd_pcm_substream *substream;\n\tstruct snd_pcm_hardware hw;\n\tstruct work_struct elapsed_period;\n\tspinlock_t lock;\n\tsize_t buffer_bytes;\n\tsize_t hw_ptr;\n\tbool xfer_enabled;\n\tbool xfer_xrun;\n\tbool stopped;\n\tbool suspended;\n\tstruct virtio_pcm_msg **msgs;\n\tunsigned int nmsgs;\n\tint msg_last_enqueued;\n\tunsigned int msg_count;\n\twait_queue_head_t msg_empty;\n};\n\n \nstruct virtio_pcm_stream {\n\tstruct virtio_pcm_substream **substreams;\n\tu32 nsubstreams;\n\tstruct snd_pcm_chmap_elem *chmaps;\n\tu32 nchmaps;\n};\n\n \nstruct virtio_pcm {\n\tstruct list_head list;\n\tu32 nid;\n\tstruct snd_pcm *pcm;\n\tstruct virtio_pcm_stream streams[SNDRV_PCM_STREAM_LAST + 1];\n};\n\nextern const struct snd_pcm_ops virtsnd_pcm_ops;\n\nint virtsnd_pcm_validate(struct virtio_device *vdev);\n\nint virtsnd_pcm_parse_cfg(struct virtio_snd *snd);\n\nint virtsnd_pcm_build_devs(struct virtio_snd *snd);\n\nvoid virtsnd_pcm_event(struct virtio_snd *snd, struct virtio_snd_event *event);\n\nvoid virtsnd_pcm_tx_notify_cb(struct virtqueue *vqueue);\n\nvoid virtsnd_pcm_rx_notify_cb(struct virtqueue *vqueue);\n\nstruct virtio_pcm *virtsnd_pcm_find(struct virtio_snd *snd, u32 nid);\n\nstruct virtio_pcm *virtsnd_pcm_find_or_create(struct virtio_snd *snd, u32 nid);\n\nstruct virtio_snd_msg *\nvirtsnd_pcm_ctl_msg_alloc(struct virtio_pcm_substream *vss,\n\t\t\t  unsigned int command, gfp_t gfp);\n\nint virtsnd_pcm_msg_alloc(struct virtio_pcm_substream *vss,\n\t\t\t  unsigned int periods, unsigned int period_bytes);\n\nvoid virtsnd_pcm_msg_free(struct virtio_pcm_substream *vss);\n\nint virtsnd_pcm_msg_send(struct virtio_pcm_substream *vss);\n\nunsigned int virtsnd_pcm_msg_pending_num(struct virtio_pcm_substream *vss);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}