{
  "module_name": "opl4_local.h",
  "hash_id": "60278befce34c017bb489c551a17faf425730368c5e92423eaeebf37eca66724",
  "original_prompt": "Ingested from linux-6.6.14/sound/drivers/opl4/opl4_local.h",
  "human_readable_source": " \n\n#ifndef __OPL4_LOCAL_H\n#define __OPL4_LOCAL_H\n\n#include <sound/opl4.h>\n\n \n\n#define OPL4_REG_TEST0\t\t\t0x00\n#define OPL4_REG_TEST1\t\t\t0x01\n\n#define OPL4_REG_MEMORY_CONFIGURATION\t0x02\n#define   OPL4_MODE_BIT\t\t\t0x01\n#define   OPL4_MTYPE_BIT\t\t0x02\n#define   OPL4_TONE_HEADER_MASK\t\t0x1c\n#define   OPL4_DEVICE_ID_MASK\t\t0xe0\n\n#define OPL4_REG_MEMORY_ADDRESS_HIGH\t0x03\n#define OPL4_REG_MEMORY_ADDRESS_MID\t0x04\n#define OPL4_REG_MEMORY_ADDRESS_LOW\t0x05\n#define OPL4_REG_MEMORY_DATA\t\t0x06\n\n \n#define OPL4_REG_TONE_NUMBER\t\t0x08\n\n \n#define OPL4_REG_F_NUMBER\t\t0x20\n#define   OPL4_TONE_NUMBER_BIT8\t\t0x01\n#define   OPL4_F_NUMBER_LOW_MASK\t0xfe\n\n \n#define OPL4_REG_OCTAVE\t\t\t0x38\n#define   OPL4_F_NUMBER_HIGH_MASK\t0x07\n#define   OPL4_BLOCK_MASK\t\t0xf0\n#define   OPL4_PSEUDO_REVERB_BIT\t0x08\n\n \n#define OPL4_REG_LEVEL\t\t\t0x50\n#define   OPL4_TOTAL_LEVEL_MASK\t\t0xfe\n#define   OPL4_LEVEL_DIRECT_BIT\t\t0x01\n\n \n#define OPL4_REG_MISC\t\t\t0x68\n#define   OPL4_KEY_ON_BIT\t\t0x80\n#define   OPL4_DAMP_BIT\t\t\t0x40\n#define   OPL4_LFO_RESET_BIT\t\t0x20\n#define   OPL4_OUTPUT_CHANNEL_BIT\t0x10\n#define   OPL4_PAN_POT_MASK\t\t0x0f\n\n \n#define OPL4_REG_LFO_VIBRATO\t\t0x80\n#define   OPL4_LFO_FREQUENCY_MASK\t0x38\n#define   OPL4_VIBRATO_DEPTH_MASK\t0x07\n#define   OPL4_CHORUS_SEND_MASK\t\t0xc0  \n\n \n#define OPL4_REG_ATTACK_DECAY1\t\t0x98\n#define   OPL4_ATTACK_RATE_MASK\t\t0xf0\n#define   OPL4_DECAY1_RATE_MASK\t\t0x0f\n\n \n#define OPL4_REG_LEVEL_DECAY2\t\t0xb0\n#define   OPL4_DECAY_LEVEL_MASK\t\t0xf0\n#define   OPL4_DECAY2_RATE_MASK\t\t0x0f\n\n \n#define OPL4_REG_RELEASE_CORRECTION\t0xc8\n#define   OPL4_RELEASE_RATE_MASK\t0x0f\n#define   OPL4_RATE_INTERPOLATION_MASK\t0xf0\n\n \n#define OPL4_REG_TREMOLO\t\t0xe0\n#define   OPL4_TREMOLO_DEPTH_MASK\t0x07\n#define   OPL4_REVERB_SEND_MASK\t\t0xe0  \n\n \n#define OPL4_REG_MIX_CONTROL_FM\t\t0xf8\n#define OPL4_REG_MIX_CONTROL_PCM\t0xf9\n#define   OPL4_MIX_LEFT_MASK\t\t0x07\n#define   OPL4_MIX_RIGHT_MASK\t\t0x38\n\n#define OPL4_REG_ATC\t\t\t0xfa\n#define   OPL4_ATC_BIT\t\t\t0x01  \n\n \n#define OPL4_STATUS_BUSY\t\t0x01\n#define OPL4_STATUS_LOAD\t\t0x02\n\n\n#define OPL4_MAX_VOICES 24\n\n#define SNDRV_SEQ_DEV_ID_OPL4 \"opl4-synth\"\n\n\nstruct opl4_sound {\n\tu16 tone;\n\ts16 pitch_offset;\n\tu8 key_scaling;\n\ts8 panpot;\n\tu8 vibrato;\n\tu8 tone_attenuate;\n\tu8 volume_factor;\n\tu8 reg_lfo_vibrato;\n\tu8 reg_attack_decay1;\n\tu8 reg_level_decay2;\n\tu8 reg_release_correction;\n\tu8 reg_tremolo;\n};\n\nstruct opl4_region {\n\tu8 key_min, key_max;\n\tstruct opl4_sound sound;\n};\n\nstruct opl4_region_ptr {\n\tint count;\n\tconst struct opl4_region *regions;\n};\n\nstruct opl4_voice {\n\tstruct list_head list;\n\tint number;\n\tstruct snd_midi_channel *chan;\n\tint note;\n\tint velocity;\n\tconst struct opl4_sound *sound;\n\tu8 level_direct;\n\tu8 reg_f_number;\n\tu8 reg_misc;\n\tu8 reg_lfo_vibrato;\n};\n\nstruct snd_opl4 {\n\tunsigned long fm_port;\n\tunsigned long pcm_port;\n\tstruct resource *res_fm_port;\n\tstruct resource *res_pcm_port;\n\tunsigned short hardware;\n\tspinlock_t reg_lock;\n\tstruct snd_card *card;\n\n#ifdef CONFIG_SND_PROC_FS\n\tstruct snd_info_entry *proc_entry;\n\tint memory_access;\n#endif\n\tstruct mutex access_mutex;\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER)\n\tint used;\n\n\tint seq_dev_num;\n\tint seq_client;\n\tstruct snd_seq_device *seq_dev;\n\n\tstruct snd_midi_channel_set *chset;\n\tstruct opl4_voice voices[OPL4_MAX_VOICES];\n\tstruct list_head off_voices;\n\tstruct list_head on_voices;\n#endif\n};\n\n \nvoid snd_opl4_write(struct snd_opl4 *opl4, u8 reg, u8 value);\nu8 snd_opl4_read(struct snd_opl4 *opl4, u8 reg);\nvoid snd_opl4_read_memory(struct snd_opl4 *opl4, char *buf, int offset, int size);\nvoid snd_opl4_write_memory(struct snd_opl4 *opl4, const char *buf, int offset, int size);\n\n \nint snd_opl4_create_mixer(struct snd_opl4 *opl4);\n\n#ifdef CONFIG_SND_PROC_FS\n \nint snd_opl4_create_proc(struct snd_opl4 *opl4);\nvoid snd_opl4_free_proc(struct snd_opl4 *opl4);\n#else\nstatic inline int snd_opl4_create_proc(struct snd_opl4 *opl4) { return 0; }\nstatic inline void snd_opl4_free_proc(struct snd_opl4 *opl4) {}\n#endif\n\n \nextern int volume_boost;\n\n \nvoid snd_opl4_synth_reset(struct snd_opl4 *opl4);\nvoid snd_opl4_synth_shutdown(struct snd_opl4 *opl4);\nvoid snd_opl4_note_on(void *p, int note, int vel, struct snd_midi_channel *chan);\nvoid snd_opl4_note_off(void *p, int note, int vel, struct snd_midi_channel *chan);\nvoid snd_opl4_terminate_note(void *p, int note, struct snd_midi_channel *chan);\nvoid snd_opl4_control(void *p, int type, struct snd_midi_channel *chan);\nvoid snd_opl4_sysex(void *p, unsigned char *buf, int len, int parsed, struct snd_midi_channel_set *chset);\n\n \nint snd_yrw801_detect(struct snd_opl4 *opl4);\nextern const struct opl4_region_ptr snd_yrw801_regions[];\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}