{
  "module_name": "msnd.h",
  "hash_id": "5e87c60eef2565adef13e3db692f6ca94ce0869ef1e768c42b3c571a6aa1e37b",
  "original_prompt": "Ingested from linux-6.6.14/sound/isa/msnd/msnd.h",
  "human_readable_source": " \n \n#ifndef __MSND_H\n#define __MSND_H\n\n#define DEFSAMPLERATE\t\t44100\n#define DEFSAMPLESIZE\t\tSNDRV_PCM_FORMAT_S16\n#define DEFCHANNELS\t\t1\n\n#define SRAM_BANK_SIZE\t\t0x8000\n#define SRAM_CNTL_START\t\t0x7F00\n#define SMA_STRUCT_START\t0x7F40\n\n#define DSP_BASE_ADDR\t\t0x4000\n#define DSP_BANK_BASE\t\t0x4000\n\n#define AGND\t\t\t0x01\n#define SIGNAL\t\t\t0x02\n\n#define EXT_DSP_BIT_DCAL\t0x0001\n#define EXT_DSP_BIT_MIDI_CON\t0x0002\n\n#define BUFFSIZE\t\t0x8000\n#define HOSTQ_SIZE\t\t0x40\n\n#define DAP_BUFF_SIZE\t\t0x2400\n\n#define DAPQ_STRUCT_SIZE\t0x10\n#define DARQ_STRUCT_SIZE\t0x10\n#define DAPQ_BUFF_SIZE\t\t(3 * 0x10)\n#define DARQ_BUFF_SIZE\t\t(3 * 0x10)\n#define MODQ_BUFF_SIZE\t\t0x400\n\n#define DAPQ_DATA_BUFF\t\t0x6C00\n#define DARQ_DATA_BUFF\t\t0x6C30\n#define MODQ_DATA_BUFF\t\t0x6C60\n#define MIDQ_DATA_BUFF\t\t0x7060\n\n#define DAPQ_OFFSET\t\tSRAM_CNTL_START\n#define DARQ_OFFSET\t\t(SRAM_CNTL_START + 0x08)\n#define MODQ_OFFSET\t\t(SRAM_CNTL_START + 0x10)\n#define MIDQ_OFFSET\t\t(SRAM_CNTL_START + 0x18)\n#define DSPQ_OFFSET\t\t(SRAM_CNTL_START + 0x20)\n\n#define\tHP_ICR\t\t\t0x00\n#define\tHP_CVR\t\t\t0x01\n#define\tHP_ISR\t\t\t0x02\n#define\tHP_IVR\t\t\t0x03\n#define HP_NU\t\t\t0x04\n#define HP_INFO\t\t\t0x04\n#define\tHP_TXH\t\t\t0x05\n#define\tHP_RXH\t\t\t0x05\n#define\tHP_TXM\t\t\t0x06\n#define\tHP_RXM\t\t\t0x06\n#define\tHP_TXL\t\t\t0x07\n#define\tHP_RXL\t\t\t0x07\n\n#define HP_ICR_DEF\t\t0x00\n#define HP_CVR_DEF\t\t0x12\n#define HP_ISR_DEF\t\t0x06\n#define HP_IVR_DEF\t\t0x0f\n#define HP_NU_DEF\t\t0x00\n\n#define\tHP_IRQM\t\t\t0x09\n\n#define\tHPR_BLRC\t\t0x08\n#define\tHPR_SPR1\t\t0x09\n#define\tHPR_SPR2\t\t0x0A\n#define\tHPR_TCL0\t\t0x0B\n#define\tHPR_TCL1\t\t0x0C\n#define\tHPR_TCL2\t\t0x0D\n#define\tHPR_TCL3\t\t0x0E\n#define\tHPR_TCL4\t\t0x0F\n\n#define\tHPICR_INIT\t\t0x80\n#define HPICR_HM1\t\t0x40\n#define HPICR_HM0\t\t0x20\n#define HPICR_HF1\t\t0x10\n#define HPICR_HF0\t\t0x08\n#define\tHPICR_TREQ\t\t0x02\n#define\tHPICR_RREQ\t\t0x01\n\n#define HPCVR_HC\t\t0x80\n\n#define\tHPISR_HREQ\t\t0x80\n#define HPISR_DMA\t\t0x40\n#define HPISR_HF3\t\t0x10\n#define HPISR_HF2\t\t0x08\n#define\tHPISR_TRDY\t\t0x04\n#define\tHPISR_TXDE\t\t0x02\n#define\tHPISR_RXDF\t\t0x01\n\n#define\tHPIO_290\t\t0\n#define\tHPIO_260\t\t1\n#define\tHPIO_250\t\t2\n#define\tHPIO_240\t\t3\n#define\tHPIO_230\t\t4\n#define\tHPIO_220\t\t5\n#define\tHPIO_210\t\t6\n#define\tHPIO_3E0\t\t7\n\n#define\tHPMEM_NONE\t\t0\n#define\tHPMEM_B000\t\t1\n#define\tHPMEM_C800\t\t2\n#define\tHPMEM_D000\t\t3\n#define\tHPMEM_D400\t\t4\n#define\tHPMEM_D800\t\t5\n#define\tHPMEM_E000\t\t6\n#define\tHPMEM_E800\t\t7\n\n#define\tHPIRQ_NONE\t\t0\n#define HPIRQ_5\t\t\t1\n#define HPIRQ_7\t\t\t2\n#define HPIRQ_9\t\t\t3\n#define HPIRQ_10\t\t4\n#define HPIRQ_11\t\t5\n#define HPIRQ_12\t\t6\n#define HPIRQ_15\t\t7\n\n#define\tHIMT_PLAY_DONE\t\t0x00\n#define\tHIMT_RECORD_DONE\t0x01\n#define\tHIMT_MIDI_EOS\t\t0x02\n#define\tHIMT_MIDI_OUT\t\t0x03\n\n#define\tHIMT_MIDI_IN_UCHAR\t0x0E\n#define\tHIMT_DSP\t\t0x0F\n\n#define\tHDEX_BASE\t       \t0x92\n#define\tHDEX_PLAY_START\t\t(0 + HDEX_BASE)\n#define\tHDEX_PLAY_STOP\t\t(1 + HDEX_BASE)\n#define\tHDEX_PLAY_PAUSE\t\t(2 + HDEX_BASE)\n#define\tHDEX_PLAY_RESUME\t(3 + HDEX_BASE)\n#define\tHDEX_RECORD_START\t(4 + HDEX_BASE)\n#define\tHDEX_RECORD_STOP\t(5 + HDEX_BASE)\n#define\tHDEX_MIDI_IN_START \t(6 + HDEX_BASE)\n#define\tHDEX_MIDI_IN_STOP\t(7 + HDEX_BASE)\n#define\tHDEX_MIDI_OUT_START\t(8 + HDEX_BASE)\n#define\tHDEX_MIDI_OUT_STOP\t(9 + HDEX_BASE)\n#define\tHDEX_AUX_REQ\t\t(10 + HDEX_BASE)\n\n#define\tHDEXAR_CLEAR_PEAKS\t1\n#define\tHDEXAR_IN_SET_POTS\t2\n#define\tHDEXAR_AUX_SET_POTS\t3\n#define\tHDEXAR_CAL_A_TO_D\t4\n#define\tHDEXAR_RD_EXT_DSP_BITS\t5\n\n \n#define\tHDEXAR_SET_ANA_IN\t0\n#define\tHDEXAR_SET_SYNTH_IN\t4\n#define\tHDEXAR_READ_DAT_IN\t5\n#define\tHDEXAR_MIC_SET_POTS\t6\n#define\tHDEXAR_SET_DAT_IN\t7\n\n#define HDEXAR_SET_SYNTH_48\t8\n#define HDEXAR_SET_SYNTH_44\t9\n\n#define HIWORD(l)\t\t((u16)((((u32)(l)) >> 16) & 0xFFFF))\n#define LOWORD(l)\t\t((u16)(u32)(l))\n#define HIBYTE(w)\t\t((u8)(((u16)(w) >> 8) & 0xFF))\n#define LOBYTE(w)\t\t((u8)(w))\n#define MAKELONG(low, hi)\t((long)(((u16)(low))|(((u32)((u16)(hi)))<<16)))\n#define MAKEWORD(low, hi)\t((u16)(((u8)(low))|(((u16)((u8)(hi)))<<8)))\n\n#define PCTODSP_OFFSET(w)\t(u16)((w)/2)\n#define PCTODSP_BASED(w)\t(u16)(((w)/2) + DSP_BASE_ADDR)\n#define DSPTOPC_BASED(w)\t(((w) - DSP_BASE_ADDR) * 2)\n\n#ifdef SLOWIO\n#  undef outb\n#  undef inb\n#  define outb\t\t\toutb_p\n#  define inb\t\t\tinb_p\n#endif\n\n \n#define JQS_wStart\t\t0x00\n#define JQS_wSize\t\t0x02\n#define JQS_wHead\t\t0x04\n#define JQS_wTail\t\t0x06\n#define JQS__size\t\t0x08\n\n \n#define DAQDS_wStart\t\t0x00\n#define DAQDS_wSize\t\t0x02\n#define DAQDS_wFormat\t\t0x04\n#define DAQDS_wSampleSize\t0x06\n#define DAQDS_wChannels\t\t0x08\n#define DAQDS_wSampleRate\t0x0A\n#define DAQDS_wIntMsg\t\t0x0C\n#define DAQDS_wFlags\t\t0x0E\n#define DAQDS__size\t\t0x10\n\n#include <sound/pcm.h>\n\nstruct snd_msnd {\n\tvoid __iomem\t\t*mappedbase;\n\tint\t\t\tplay_period_bytes;\n\tint\t\t\tplayLimit;\n\tint\t\t\tplayPeriods;\n\tint \t\t\tplayDMAPos;\n\tint\t\t\tbanksPlayed;\n\tint \t\t\tcaptureDMAPos;\n\tint\t\t\tcapturePeriodBytes;\n\tint\t\t\tcaptureLimit;\n\tint\t\t\tcapturePeriods;\n\tstruct snd_card\t\t*card;\n\tvoid\t\t\t*msndmidi_mpu;\n\tstruct snd_rawmidi\t*rmidi;\n\n\t \n\tlong io;\n\tint memid, irqid;\n\tint irq, irq_ref;\n\tunsigned long base;\n\n\t \n\tvoid __iomem\t*SMA;\n\tvoid __iomem\t*DAPQ;\n\tvoid __iomem\t*DARQ;\n\tvoid __iomem\t*MODQ;\n\tvoid __iomem\t*MIDQ;\n\tvoid __iomem\t*DSPQ;\n\tint dspq_data_buff, dspq_buff_size;\n\n\t \n\tenum { msndClassic, msndPinnacle } type;\n\tfmode_t mode;\n\tunsigned long flags;\n#define F_RESETTING\t\t\t0\n#define F_HAVEDIGITAL\t\t\t1\n#define F_AUDIO_WRITE_INUSE\t\t2\n#define F_WRITING\t\t\t3\n#define F_WRITEBLOCK\t\t\t4\n#define F_WRITEFLUSH\t\t\t5\n#define F_AUDIO_READ_INUSE\t\t6\n#define F_READING\t\t\t7\n#define F_READBLOCK\t\t\t8\n#define F_EXT_MIDI_INUSE\t\t9\n#define F_HDR_MIDI_INUSE\t\t10\n#define F_DISABLE_WRITE_NDELAY\t\t11\n\tspinlock_t lock;\n\tspinlock_t mixer_lock;\n\tint nresets;\n\tunsigned recsrc;\n#define LEVEL_ENTRIES 32\n\tint left_levels[LEVEL_ENTRIES];\n\tint right_levels[LEVEL_ENTRIES];\n\tint calibrate_signal;\n\tint play_sample_size, play_sample_rate, play_channels;\n\tint play_ndelay;\n\tint capture_sample_size, capture_sample_rate, capture_channels;\n\tint capture_ndelay;\n\tu8 bCurrentMidiPatch;\n\n\tint last_playbank, last_recbank;\n\tstruct snd_pcm_substream *playback_substream;\n\tstruct snd_pcm_substream *capture_substream;\n\n};\n\nvoid snd_msnd_init_queue(void __iomem *base, int start, int size);\n\nint snd_msnd_send_dsp_cmd(struct snd_msnd *chip, u8 cmd);\nint snd_msnd_send_word(struct snd_msnd *chip,\n\t\t\t   unsigned char high,\n\t\t\t   unsigned char mid,\n\t\t\t   unsigned char low);\nint snd_msnd_upload_host(struct snd_msnd *chip,\n\t\t\t     const u8 *bin, int len);\nint snd_msnd_enable_irq(struct snd_msnd *chip);\nint snd_msnd_disable_irq(struct snd_msnd *chip);\nvoid snd_msnd_dsp_halt(struct snd_msnd *chip, struct file *file);\nint snd_msnd_DAPQ(struct snd_msnd *chip, int start);\nint snd_msnd_DARQ(struct snd_msnd *chip, int start);\nint snd_msnd_pcm(struct snd_card *card, int device);\n\nint snd_msndmidi_new(struct snd_card *card, int device);\nvoid snd_msndmidi_input_read(void *mpu);\n\nvoid snd_msndmix_setup(struct snd_msnd *chip);\nint snd_msndmix_new(struct snd_card *card);\nint snd_msndmix_force_recsrc(struct snd_msnd *chip, int recsrc);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}