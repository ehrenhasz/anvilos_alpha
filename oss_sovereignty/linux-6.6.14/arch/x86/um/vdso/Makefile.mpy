{
  "module_name": "Makefile",
  "hash_id": "a2fcef8a2cb7a1d46f676e5fb4e0b4edc66f78935b9fd86df791490965a307b4",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/um/vdso/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n#\n# Building vDSO images for x86.\n#\n\n# do not instrument on vdso because KASAN is not compatible with user mode\nKASAN_SANITIZE\t\t\t:= n\n\n# Prevents link failures: __sanitizer_cov_trace_pc() is not linked in.\nKCOV_INSTRUMENT                := n\n\nVDSO64-y\t\t:= y\n\nvdso-install-$(VDSO64-y)\t+= vdso.so\n\n\n# files to link into the vdso\nvobjs-y := vdso-note.o um_vdso.o\n\n# files to link into kernel\nobj-$(VDSO64-y)\t\t\t+= vdso.o vma.o\n\nvobjs := $(foreach F,$(vobjs-y),$(obj)/$F)\n\n$(obj)/vdso.o: $(obj)/vdso.so\n\ntargets += vdso.so vdso.so.dbg vdso.lds $(vobjs-y)\n\nCPPFLAGS_vdso.lds += -P -C\n\nVDSO_LDFLAGS_vdso.lds = -m64 -Wl,-soname=linux-vdso.so.1 \\\n       -Wl,-z,max-page-size=4096\n\n$(obj)/vdso.o: $(src)/vdso.S $(obj)/vdso.so\n\n$(obj)/vdso.so.dbg: $(obj)/vdso.lds $(vobjs) FORCE\n\t$(call if_changed,vdso)\n\n$(obj)/%.so: OBJCOPYFLAGS := -S\n$(obj)/%.so: $(obj)/%.so.dbg FORCE\n\t$(call if_changed,objcopy)\n\n#\n# Don't omit frame pointers for ease of userspace debugging, but do\n# optimize sibling calls.\n#\nCFL := $(PROFILING) -mcmodel=small -fPIC -O2 -fasynchronous-unwind-tables -m64 \\\n       $(filter -g%,$(KBUILD_CFLAGS)) -fno-stack-protector \\\n       -fno-omit-frame-pointer -foptimize-sibling-calls\n\n$(vobjs): KBUILD_CFLAGS += $(CFL)\n\n#\n# vDSO code runs in userspace and -pg doesn't help with profiling anyway.\n#\nCFLAGS_REMOVE_vdso-note.o = -pg -fprofile-arcs -ftest-coverage\nCFLAGS_REMOVE_um_vdso.o = -pg -fprofile-arcs -ftest-coverage\n\n#\n# The DSO images are built using a special linker script.\n#\nquiet_cmd_vdso = VDSO    $@\n      cmd_vdso = $(CC) -nostdlib -o $@ \\\n\t\t       $(CC_FLAGS_LTO) $(VDSO_LDFLAGS) $(VDSO_LDFLAGS_$(filter %.lds,$(^F))) \\\n\t\t       -Wl,-T,$(filter %.lds,$^) $(filter %.o,$^) && \\\n\t\t sh $(srctree)/$(src)/checkundef.sh '$(NM)' '$@'\n\nVDSO_LDFLAGS = -fPIC -shared -Wl,--hash-style=sysv -z noexecstack\nGCOV_PROFILE := n\n\n#\n# Install the unstripped copy of vdso*.so listed in $(vdso-install-y).\n#\nquiet_cmd_vdso_install = INSTALL $@\n      cmd_vdso_install = cp $(obj)/$@.dbg $(MODLIB)/vdso/$@\n$(vdso-install-y): %.so: $(obj)/%.so.dbg FORCE\n\t@mkdir -p $(MODLIB)/vdso\n\t$(call cmd,vdso_install)\n\nPHONY += vdso_install $(vdso-install-y)\nvdso_install: $(vdso-install-y)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}