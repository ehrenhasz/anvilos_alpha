{
  "module_name": "geos.c",
  "hash_id": "7f0701b55c2e346050449d24c2321a236bf56aeeca2d9b1bbae1a019329decdb",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/platform/geode/geos.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/init.h>\n#include <linux/io.h>\n#include <linux/string.h>\n#include <linux/leds.h>\n#include <linux/platform_device.h>\n#include <linux/input.h>\n#include <linux/gpio_keys.h>\n#include <linux/gpio/machine.h>\n#include <linux/dmi.h>\n\n#include <asm/geode.h>\n\nstatic struct gpio_keys_button geos_gpio_buttons[] = {\n\t{\n\t\t.code = KEY_RESTART,\n\t\t.gpio = 3,\n\t\t.active_low = 1,\n\t\t.desc = \"Reset button\",\n\t\t.type = EV_KEY,\n\t\t.wakeup = 0,\n\t\t.debounce_interval = 100,\n\t\t.can_disable = 0,\n\t}\n};\nstatic struct gpio_keys_platform_data geos_buttons_data = {\n\t.buttons = geos_gpio_buttons,\n\t.nbuttons = ARRAY_SIZE(geos_gpio_buttons),\n\t.poll_interval = 20,\n};\n\nstatic struct platform_device geos_buttons_dev = {\n\t.name = \"gpio-keys-polled\",\n\t.id = 1,\n\t.dev = {\n\t\t.platform_data = &geos_buttons_data,\n\t}\n};\n\nstatic struct gpio_led geos_leds[] = {\n\t{\n\t\t.name = \"geos:1\",\n\t\t.default_trigger = \"default-on\",\n\t},\n\t{\n\t\t.name = \"geos:2\",\n\t\t.default_trigger = \"default-off\",\n\t},\n\t{\n\t\t.name = \"geos:3\",\n\t\t.default_trigger = \"default-off\",\n\t},\n};\n\nstatic struct gpio_led_platform_data geos_leds_data = {\n\t.num_leds = ARRAY_SIZE(geos_leds),\n\t.leds = geos_leds,\n};\n\nstatic struct gpiod_lookup_table geos_leds_gpio_table = {\n\t.dev_id = \"leds-gpio\",\n\t.table = {\n\t\t \n\t\tGPIO_LOOKUP_IDX(\"cs5535-gpio\", 6, NULL, 0, GPIO_ACTIVE_LOW),\n\t\tGPIO_LOOKUP_IDX(\"cs5535-gpio\", 25, NULL, 1, GPIO_ACTIVE_LOW),\n\t\tGPIO_LOOKUP_IDX(\"cs5535-gpio\", 27, NULL, 2, GPIO_ACTIVE_LOW),\n\t\t{ }\n\t},\n};\n\nstatic struct platform_device geos_leds_dev = {\n\t.name = \"leds-gpio\",\n\t.id = -1,\n\t.dev.platform_data = &geos_leds_data,\n};\n\nstatic struct platform_device *geos_devs[] __initdata = {\n\t&geos_buttons_dev,\n\t&geos_leds_dev,\n};\n\nstatic void __init register_geos(void)\n{\n\t \n\tgpiod_add_lookup_table(&geos_leds_gpio_table);\n\tplatform_add_devices(geos_devs, ARRAY_SIZE(geos_devs));\n}\n\nstatic int __init geos_init(void)\n{\n\tconst char *vendor, *product;\n\n\tif (!is_geode())\n\t\treturn 0;\n\n\tvendor = dmi_get_system_info(DMI_SYS_VENDOR);\n\tif (!vendor || strcmp(vendor, \"Traverse Technologies\"))\n\t\treturn 0;\n\n\tproduct = dmi_get_system_info(DMI_PRODUCT_NAME);\n\tif (!product || strcmp(product, \"Geos\"))\n\t\treturn 0;\n\n\tprintk(KERN_INFO \"%s: system is recognized as \\\"%s %s\\\"\\n\",\n\t       KBUILD_MODNAME, vendor, product);\n\n\tregister_geos();\n\n\treturn 0;\n}\ndevice_initcall(geos_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}