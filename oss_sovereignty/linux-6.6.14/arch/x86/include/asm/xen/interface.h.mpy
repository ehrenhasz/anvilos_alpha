{
  "module_name": "interface.h",
  "hash_id": "7da9538b7b885fc98467e72232b5cbab418805492e55ff2dbc07cd999d673dbe",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/xen/interface.h",
  "human_readable_source": " \n\n#ifndef _ASM_X86_XEN_INTERFACE_H\n#define _ASM_X86_XEN_INTERFACE_H\n\n \n#ifdef __XEN__\n#define __DEFINE_GUEST_HANDLE(name, type) \\\n    typedef struct { type *p; } __guest_handle_ ## name\n#else\n#define __DEFINE_GUEST_HANDLE(name, type) \\\n    typedef type * __guest_handle_ ## name\n#endif\n\n#define DEFINE_GUEST_HANDLE_STRUCT(name) \\\n\t__DEFINE_GUEST_HANDLE(name, struct name)\n#define DEFINE_GUEST_HANDLE(name) __DEFINE_GUEST_HANDLE(name, name)\n#define GUEST_HANDLE(name)        __guest_handle_ ## name\n\n#ifdef __XEN__\n#if defined(__i386__)\n#define set_xen_guest_handle(hnd, val)\t\t\t\\\n\tdo {\t\t\t\t\t\t\\\n\t\tif (sizeof(hnd) == 8)\t\t\t\\\n\t\t\t*(uint64_t *)&(hnd) = 0;\t\\\n\t\t(hnd).p = val;\t\t\t\t\\\n\t} while (0)\n#elif defined(__x86_64__)\n#define set_xen_guest_handle(hnd, val)\tdo { (hnd).p = val; } while (0)\n#endif\n#else\n#if defined(__i386__)\n#define set_xen_guest_handle(hnd, val)\t\t\t\\\n\tdo {\t\t\t\t\t\t\\\n\t\tif (sizeof(hnd) == 8)\t\t\t\\\n\t\t\t*(uint64_t *)&(hnd) = 0;\t\\\n\t\t(hnd) = val;\t\t\t\t\\\n\t} while (0)\n#elif defined(__x86_64__)\n#define set_xen_guest_handle(hnd, val)\tdo { (hnd) = val; } while (0)\n#endif\n#endif\n\n#ifndef __ASSEMBLY__\n \ntypedef unsigned long xen_pfn_t;\n#define PRI_xen_pfn \"lx\"\ntypedef unsigned long xen_ulong_t;\n#define PRI_xen_ulong \"lx\"\ntypedef long xen_long_t;\n#define PRI_xen_long \"lx\"\n\n \n__DEFINE_GUEST_HANDLE(uchar, unsigned char);\n__DEFINE_GUEST_HANDLE(uint,  unsigned int);\nDEFINE_GUEST_HANDLE(char);\nDEFINE_GUEST_HANDLE(int);\nDEFINE_GUEST_HANDLE(void);\nDEFINE_GUEST_HANDLE(uint64_t);\nDEFINE_GUEST_HANDLE(uint32_t);\nDEFINE_GUEST_HANDLE(xen_pfn_t);\nDEFINE_GUEST_HANDLE(xen_ulong_t);\n#endif\n\n#ifndef HYPERVISOR_VIRT_START\n#define HYPERVISOR_VIRT_START mk_unsigned_long(__HYPERVISOR_VIRT_START)\n#endif\n\n#define MACH2PHYS_VIRT_START  mk_unsigned_long(__MACH2PHYS_VIRT_START)\n#define MACH2PHYS_VIRT_END    mk_unsigned_long(__MACH2PHYS_VIRT_END)\n#define MACH2PHYS_NR_ENTRIES  ((MACH2PHYS_VIRT_END-MACH2PHYS_VIRT_START)>>__MACH2PHYS_SHIFT)\n\n \n#define MAX_VIRT_CPUS 32\n\n \n \n#define FIRST_RESERVED_GDT_PAGE  14\n#define FIRST_RESERVED_GDT_BYTE  (FIRST_RESERVED_GDT_PAGE * 4096)\n#define FIRST_RESERVED_GDT_ENTRY (FIRST_RESERVED_GDT_BYTE / 8)\n\n \n#define TI_GET_DPL(_ti)\t\t((_ti)->flags & 3)\n#define TI_GET_IF(_ti)\t\t((_ti)->flags & 4)\n#define TI_SET_DPL(_ti, _dpl)\t((_ti)->flags |= (_dpl))\n#define TI_SET_IF(_ti, _if)\t((_ti)->flags |= ((!!(_if))<<2))\n\n#ifndef __ASSEMBLY__\nstruct trap_info {\n    uint8_t       vector;   \n    uint8_t       flags;    \n    uint16_t      cs;       \n    unsigned long address;  \n};\nDEFINE_GUEST_HANDLE_STRUCT(trap_info);\n\nstruct arch_shared_info {\n\t \n\tunsigned long max_pfn;\n\t \n\txen_pfn_t pfn_to_mfn_frame_list_list;\n\tunsigned long nmi_reason;\n\t \n\tunsigned long p2m_cr3;\t\t \n\tunsigned long p2m_vaddr;\t \n\tunsigned long p2m_generation;\t \n#ifdef CONFIG_X86_32\n\tuint32_t wc_sec_hi;\n#endif\n};\n#endif\t \n\n#ifdef CONFIG_X86_32\n#include <asm/xen/interface_32.h>\n#else\n#include <asm/xen/interface_64.h>\n#endif\n\n#include <asm/pvclock-abi.h>\n\n#ifndef __ASSEMBLY__\n \nstruct vcpu_guest_context {\n     \n    struct { char x[512]; } fpu_ctxt;        \n#define VGCF_I387_VALID                (1<<0)\n#define VGCF_IN_KERNEL                 (1<<2)\n#define _VGCF_i387_valid               0\n#define VGCF_i387_valid                (1<<_VGCF_i387_valid)\n#define _VGCF_in_kernel                2\n#define VGCF_in_kernel                 (1<<_VGCF_in_kernel)\n#define _VGCF_failsafe_disables_events 3\n#define VGCF_failsafe_disables_events  (1<<_VGCF_failsafe_disables_events)\n#define _VGCF_syscall_disables_events  4\n#define VGCF_syscall_disables_events   (1<<_VGCF_syscall_disables_events)\n#define _VGCF_online                   5\n#define VGCF_online                    (1<<_VGCF_online)\n    unsigned long flags;                     \n    struct cpu_user_regs user_regs;          \n    struct trap_info trap_ctxt[256];         \n    unsigned long ldt_base, ldt_ents;        \n    unsigned long gdt_frames[16], gdt_ents;  \n    unsigned long kernel_ss, kernel_sp;      \n     \n    unsigned long ctrlreg[8];                \n    unsigned long debugreg[8];               \n#ifdef __i386__\n    unsigned long event_callback_cs;         \n    unsigned long event_callback_eip;\n    unsigned long failsafe_callback_cs;      \n    unsigned long failsafe_callback_eip;\n#else\n    unsigned long event_callback_eip;\n    unsigned long failsafe_callback_eip;\n    unsigned long syscall_callback_eip;\n#endif\n    unsigned long vm_assist;                 \n#ifdef __x86_64__\n     \n    uint64_t      fs_base;\n    uint64_t      gs_base_kernel;\n    uint64_t      gs_base_user;\n#endif\n};\nDEFINE_GUEST_HANDLE_STRUCT(vcpu_guest_context);\n\n \nstruct xen_pmu_amd_ctxt {\n\t \n\tuint32_t counters;\n\tuint32_t ctrls;\n\n\t \n#if defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L\n\tuint64_t regs[];\n#elif defined(__GNUC__)\n\tuint64_t regs[0];\n#endif\n};\n\n \nstruct xen_pmu_cntr_pair {\n\tuint64_t counter;\n\tuint64_t control;\n};\n\nstruct xen_pmu_intel_ctxt {\n\t \n\tuint32_t fixed_counters;\n\tuint32_t arch_counters;\n\n\t \n\tuint64_t global_ctrl;\n\tuint64_t global_ovf_ctrl;\n\tuint64_t global_status;\n\tuint64_t fixed_ctrl;\n\tuint64_t ds_area;\n\tuint64_t pebs_enable;\n\tuint64_t debugctl;\n\n\t \n#if defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L\n\tuint64_t regs[];\n#elif defined(__GNUC__)\n\tuint64_t regs[0];\n#endif\n};\n\n \nstruct xen_pmu_regs {\n\tuint64_t ip;\n\tuint64_t sp;\n\tuint64_t flags;\n\tuint16_t cs;\n\tuint16_t ss;\n\tuint8_t cpl;\n\tuint8_t pad[3];\n};\n\n \n#define PMU_CACHED\t   (1<<0)  \n#define PMU_SAMPLE_USER\t   (1<<1)  \n#define PMU_SAMPLE_REAL\t   (1<<2)  \n#define PMU_SAMPLE_PV\t   (1<<3)  \n\n \nstruct xen_pmu_arch {\n\tunion {\n\t\t \n\t\tstruct xen_pmu_regs regs;\n\t\t \n#define XENPMU_REGS_PAD_SZ  64\n\t\tuint8_t pad[XENPMU_REGS_PAD_SZ];\n\t} r;\n\n\t \n\tuint64_t pmu_flags;\n\n\t \n\tunion {\n\t\tuint32_t lapic_lvtpc;\n\t\tuint64_t pad;\n\t} l;\n\n\t \n\tunion {\n\t\tstruct xen_pmu_amd_ctxt amd;\n\t\tstruct xen_pmu_intel_ctxt intel;\n\n\t\t \n#define XENPMU_CTXT_PAD_SZ  128\n\t\tuint8_t pad[XENPMU_CTXT_PAD_SZ];\n\t} c;\n};\n\n#endif\t \n\n \n#include <asm/emulate_prefix.h>\n\n#define XEN_EMULATE_PREFIX __ASM_FORM(.byte __XEN_EMULATE_PREFIX ;)\n#define XEN_CPUID          XEN_EMULATE_PREFIX __ASM_FORM(cpuid)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}