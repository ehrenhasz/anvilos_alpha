{
  "module_name": "irqflags.h",
  "hash_id": "6f966a0acae7cee94f806dd3ca9d31054f87608930ed95e9584e2173ee660847",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/irqflags.h",
  "human_readable_source": " \n#ifndef _X86_IRQFLAGS_H_\n#define _X86_IRQFLAGS_H_\n\n#include <asm/processor-flags.h>\n\n#ifndef __ASSEMBLY__\n\n#include <asm/nospec-branch.h>\n\n \n\n \nextern inline unsigned long native_save_fl(void);\nextern __always_inline unsigned long native_save_fl(void)\n{\n\tunsigned long flags;\n\n\t \n\tasm volatile(\"# __raw_save_flags\\n\\t\"\n\t\t     \"pushf ; pop %0\"\n\t\t     : \"=rm\" (flags)\n\t\t     :  \n\t\t     : \"memory\");\n\n\treturn flags;\n}\n\nstatic __always_inline void native_irq_disable(void)\n{\n\tasm volatile(\"cli\": : :\"memory\");\n}\n\nstatic __always_inline void native_irq_enable(void)\n{\n\tasm volatile(\"sti\": : :\"memory\");\n}\n\nstatic __always_inline void native_safe_halt(void)\n{\n\tmds_idle_clear_cpu_buffers();\n\tasm volatile(\"sti; hlt\": : :\"memory\");\n}\n\nstatic __always_inline void native_halt(void)\n{\n\tmds_idle_clear_cpu_buffers();\n\tasm volatile(\"hlt\": : :\"memory\");\n}\n\n#endif\n\n#ifdef CONFIG_PARAVIRT_XXL\n#include <asm/paravirt.h>\n#else\n#ifndef __ASSEMBLY__\n#include <linux/types.h>\n\nstatic __always_inline unsigned long arch_local_save_flags(void)\n{\n\treturn native_save_fl();\n}\n\nstatic __always_inline void arch_local_irq_disable(void)\n{\n\tnative_irq_disable();\n}\n\nstatic __always_inline void arch_local_irq_enable(void)\n{\n\tnative_irq_enable();\n}\n\n \nstatic __always_inline void arch_safe_halt(void)\n{\n\tnative_safe_halt();\n}\n\n \nstatic __always_inline void halt(void)\n{\n\tnative_halt();\n}\n\n \nstatic __always_inline unsigned long arch_local_irq_save(void)\n{\n\tunsigned long flags = arch_local_save_flags();\n\tarch_local_irq_disable();\n\treturn flags;\n}\n#else\n\n#ifdef CONFIG_X86_64\n#ifdef CONFIG_DEBUG_ENTRY\n#define SAVE_FLAGS\t\tpushfq; popq %rax\n#endif\n\n#endif\n\n#endif  \n#endif  \n\n#ifndef __ASSEMBLY__\nstatic __always_inline int arch_irqs_disabled_flags(unsigned long flags)\n{\n\treturn !(flags & X86_EFLAGS_IF);\n}\n\nstatic __always_inline int arch_irqs_disabled(void)\n{\n\tunsigned long flags = arch_local_save_flags();\n\n\treturn arch_irqs_disabled_flags(flags);\n}\n\nstatic __always_inline void arch_local_irq_restore(unsigned long flags)\n{\n\tif (!arch_irqs_disabled_flags(flags))\n\t\tarch_local_irq_enable();\n}\n#endif  \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}