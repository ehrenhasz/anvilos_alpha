{
  "module_name": "idtentry.h",
  "hash_id": "94c59ebf5b2b4d83753e9e14a8668395157afb0e962e6ba5113216e53728e2c8",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/idtentry.h",
  "human_readable_source": " \n#ifndef _ASM_X86_IDTENTRY_H\n#define _ASM_X86_IDTENTRY_H\n\n \n#include <asm/trapnr.h>\n\n#define IDT_ALIGN\t(8 * (1 + HAS_KERNEL_IBT))\n\n#ifndef __ASSEMBLY__\n#include <linux/entry-common.h>\n#include <linux/hardirq.h>\n\n#include <asm/irq_stack.h>\n\n \n#define DECLARE_IDTENTRY(vector, func)\t\t\t\t\t\\\n\tasmlinkage void asm_##func(void);\t\t\t\t\\\n\tasmlinkage void xen_asm_##func(void);\t\t\t\t\\\n\t__visible void func(struct pt_regs *regs)\n\n \n#define DEFINE_IDTENTRY(func)\t\t\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs);\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tirqentry_state_t state = irqentry_enter(regs);\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tinstrumentation_begin();\t\t\t\t\t\\\n\t__##func (regs);\t\t\t\t\t\t\\\n\tinstrumentation_end();\t\t\t\t\t\t\\\n\tirqentry_exit(regs, state);\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs)\n\n \n#define DECLARE_IDTENTRY_SW\tDECLARE_IDTENTRY\n#define DEFINE_IDTENTRY_SW\tDEFINE_IDTENTRY\n\n \n#define DECLARE_IDTENTRY_ERRORCODE(vector, func)\t\t\t\\\n\tasmlinkage void asm_##func(void);\t\t\t\t\\\n\tasmlinkage void xen_asm_##func(void);\t\t\t\t\\\n\t__visible void func(struct pt_regs *regs, unsigned long error_code)\n\n \n#define DEFINE_IDTENTRY_ERRORCODE(func)\t\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs,\t\t\\\n\t\t\t\t     unsigned long error_code);\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs,\t\t\t\\\n\t\t\t    unsigned long error_code)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tirqentry_state_t state = irqentry_enter(regs);\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tinstrumentation_begin();\t\t\t\t\t\\\n\t__##func (regs, error_code);\t\t\t\t\t\\\n\tinstrumentation_end();\t\t\t\t\t\t\\\n\tirqentry_exit(regs, state);\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs,\t\t\\\n\t\t\t\t     unsigned long error_code)\n\n \n#define DECLARE_IDTENTRY_RAW(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n \n#define DEFINE_IDTENTRY_RAW(func)\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs)\n\n \n#define DECLARE_IDTENTRY_RAW_ERRORCODE(vector, func)\t\t\t\\\n\tDECLARE_IDTENTRY_ERRORCODE(vector, func)\n\n \n#define DEFINE_IDTENTRY_RAW_ERRORCODE(func)\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs, unsigned long error_code)\n\n \n#define DECLARE_IDTENTRY_IRQ(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY_ERRORCODE(vector, func)\n\n \n#define DEFINE_IDTENTRY_IRQ(func)\t\t\t\t\t\\\nstatic void __##func(struct pt_regs *regs, u32 vector);\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs,\t\t\t\\\n\t\t\t    unsigned long error_code)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tirqentry_state_t state = irqentry_enter(regs);\t\t\t\\\n\tu32 vector = (u32)(u8)error_code;\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tinstrumentation_begin();\t\t\t\t\t\\\n\tkvm_set_cpu_l1tf_flush_l1d();\t\t\t\t\t\\\n\trun_irq_on_irqstack_cond(__##func, regs, vector);\t\t\\\n\tinstrumentation_end();\t\t\t\t\t\t\\\n\tirqentry_exit(regs, state);\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic noinline void __##func(struct pt_regs *regs, u32 vector)\n\n \n#define DECLARE_IDTENTRY_SYSVEC(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n \n#define DEFINE_IDTENTRY_SYSVEC(func)\t\t\t\t\t\\\nstatic void __##func(struct pt_regs *regs);\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tirqentry_state_t state = irqentry_enter(regs);\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tinstrumentation_begin();\t\t\t\t\t\\\n\tkvm_set_cpu_l1tf_flush_l1d();\t\t\t\t\t\\\n\trun_sysvec_on_irqstack_cond(__##func, regs);\t\t\t\\\n\tinstrumentation_end();\t\t\t\t\t\t\\\n\tirqentry_exit(regs, state);\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic noinline void __##func(struct pt_regs *regs)\n\n \n#define DEFINE_IDTENTRY_SYSVEC_SIMPLE(func)\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs);\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs)\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tirqentry_state_t state = irqentry_enter(regs);\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tinstrumentation_begin();\t\t\t\t\t\\\n\t__irq_enter_raw();\t\t\t\t\t\t\\\n\tkvm_set_cpu_l1tf_flush_l1d();\t\t\t\t\t\\\n\t__##func (regs);\t\t\t\t\t\t\\\n\t__irq_exit_raw();\t\t\t\t\t\t\\\n\tinstrumentation_end();\t\t\t\t\t\t\\\n\tirqentry_exit(regs, state);\t\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic __always_inline void __##func(struct pt_regs *regs)\n\n \n#define DECLARE_IDTENTRY_XENCB(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n#ifdef CONFIG_X86_64\n \n#define DECLARE_IDTENTRY_IST(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY_RAW(vector, func);\t\t\t\t\\\n\t__visible void noist_##func(struct pt_regs *regs)\n\n \n#define DECLARE_IDTENTRY_VC(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY_RAW_ERRORCODE(vector, func);\t\t\t\\\n\t__visible noinstr void kernel_##func(struct pt_regs *regs, unsigned long error_code);\t\\\n\t__visible noinstr void   user_##func(struct pt_regs *regs, unsigned long error_code)\n\n \n#define DEFINE_IDTENTRY_IST(func)\t\t\t\t\t\\\n\tDEFINE_IDTENTRY_RAW(func)\n\n \n#define DEFINE_IDTENTRY_NOIST(func)\t\t\t\t\t\\\n\tDEFINE_IDTENTRY_RAW(noist_##func)\n\n \n#define DECLARE_IDTENTRY_DF(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY_RAW_ERRORCODE(vector, func)\n\n \n#define DEFINE_IDTENTRY_DF(func)\t\t\t\t\t\\\n\tDEFINE_IDTENTRY_RAW_ERRORCODE(func)\n\n \n#define DEFINE_IDTENTRY_VC_KERNEL(func)\t\t\t\t\\\n\tDEFINE_IDTENTRY_RAW_ERRORCODE(kernel_##func)\n\n \n#define DEFINE_IDTENTRY_VC_USER(func)\t\t\t\t\\\n\tDEFINE_IDTENTRY_RAW_ERRORCODE(user_##func)\n\n#else\t \n\n \n#define DECLARE_IDTENTRY_DF(vector, func)\t\t\t\t\\\n\tasmlinkage void asm_##func(void);\t\t\t\t\\\n\t__visible void func(struct pt_regs *regs,\t\t\t\\\n\t\t\t    unsigned long error_code,\t\t\t\\\n\t\t\t    unsigned long address)\n\n \n#define DEFINE_IDTENTRY_DF(func)\t\t\t\t\t\\\n__visible noinstr void func(struct pt_regs *regs,\t\t\t\\\n\t\t\t    unsigned long error_code,\t\t\t\\\n\t\t\t    unsigned long address)\n\n#endif\t \n\n \n#define DECLARE_IDTENTRY_NMI\t\tDECLARE_IDTENTRY_RAW\n#define DEFINE_IDTENTRY_NMI\t\tDEFINE_IDTENTRY_RAW\n\n#ifdef CONFIG_X86_64\n#define DECLARE_IDTENTRY_MCE\t\tDECLARE_IDTENTRY_IST\n#define DEFINE_IDTENTRY_MCE\t\tDEFINE_IDTENTRY_IST\n#define DEFINE_IDTENTRY_MCE_USER\tDEFINE_IDTENTRY_NOIST\n\n#define DECLARE_IDTENTRY_DEBUG\t\tDECLARE_IDTENTRY_IST\n#define DEFINE_IDTENTRY_DEBUG\t\tDEFINE_IDTENTRY_IST\n#define DEFINE_IDTENTRY_DEBUG_USER\tDEFINE_IDTENTRY_NOIST\n#endif\n\n#else  \n\n \n#define DECLARE_IDTENTRY(vector, func)\t\t\t\t\t\\\n\tidtentry vector asm_##func func has_error_code=0\n\n#define DECLARE_IDTENTRY_ERRORCODE(vector, func)\t\t\t\\\n\tidtentry vector asm_##func func has_error_code=1\n\n \n#define DECLARE_IDTENTRY_SW(vector, func)\n\n#define DECLARE_IDTENTRY_RAW(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n#define DECLARE_IDTENTRY_RAW_ERRORCODE(vector, func)\t\t\t\\\n\tDECLARE_IDTENTRY_ERRORCODE(vector, func)\n\n \n#define DECLARE_IDTENTRY_IRQ(vector, func)\t\t\t\t\\\n\tidtentry_irq vector func\n\n \n#define DECLARE_IDTENTRY_SYSVEC(vector, func)\t\t\t\t\\\n\tidtentry_sysvec vector func\n\n#ifdef CONFIG_X86_64\n# define DECLARE_IDTENTRY_MCE(vector, func)\t\t\t\t\\\n\tidtentry_mce_db vector asm_##func func\n\n# define DECLARE_IDTENTRY_DEBUG(vector, func)\t\t\t\t\\\n\tidtentry_mce_db vector asm_##func func\n\n# define DECLARE_IDTENTRY_DF(vector, func)\t\t\t\t\\\n\tidtentry_df vector asm_##func func\n\n# define DECLARE_IDTENTRY_XENCB(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n# define DECLARE_IDTENTRY_VC(vector, func)\t\t\t\t\\\n\tidtentry_vc vector asm_##func func\n\n#else\n# define DECLARE_IDTENTRY_MCE(vector, func)\t\t\t\t\\\n\tDECLARE_IDTENTRY(vector, func)\n\n \n# define DECLARE_IDTENTRY_DF(vector, func)\n\n \n# define DECLARE_IDTENTRY_XENCB(vector, func)\n\n#endif\n\n \n#define DECLARE_IDTENTRY_NMI(vector, func)\n\n \n\t.align IDT_ALIGN\nSYM_CODE_START(irq_entries_start)\n    vector=FIRST_EXTERNAL_VECTOR\n    .rept NR_EXTERNAL_VECTORS\n\tUNWIND_HINT_IRET_REGS\n0 :\n\tENDBR\n\t.byte\t0x6a, vector\n\tjmp\tasm_common_interrupt\n\t \n\t.fill 0b + IDT_ALIGN - ., 1, 0xcc\n\tvector = vector+1\n    .endr\nSYM_CODE_END(irq_entries_start)\n\n#ifdef CONFIG_X86_LOCAL_APIC\n\t.align IDT_ALIGN\nSYM_CODE_START(spurious_entries_start)\n    vector=FIRST_SYSTEM_VECTOR\n    .rept NR_SYSTEM_VECTORS\n\tUNWIND_HINT_IRET_REGS\n0 :\n\tENDBR\n\t.byte\t0x6a, vector\n\tjmp\tasm_spurious_interrupt\n\t \n\t.fill 0b + IDT_ALIGN - ., 1, 0xcc\n\tvector = vector+1\n    .endr\nSYM_CODE_END(spurious_entries_start)\n#endif\n\n#endif  \n\n \n\n \n#define X86_TRAP_OTHER\t\t0xFFFF\n\n \nDECLARE_IDTENTRY(X86_TRAP_DE,\t\texc_divide_error);\nDECLARE_IDTENTRY(X86_TRAP_OF,\t\texc_overflow);\nDECLARE_IDTENTRY(X86_TRAP_BR,\t\texc_bounds);\nDECLARE_IDTENTRY(X86_TRAP_NM,\t\texc_device_not_available);\nDECLARE_IDTENTRY(X86_TRAP_OLD_MF,\texc_coproc_segment_overrun);\nDECLARE_IDTENTRY(X86_TRAP_SPURIOUS,\texc_spurious_interrupt_bug);\nDECLARE_IDTENTRY(X86_TRAP_MF,\t\texc_coprocessor_error);\nDECLARE_IDTENTRY(X86_TRAP_XF,\t\texc_simd_coprocessor_error);\n\n \nDECLARE_IDTENTRY_SW(X86_TRAP_IRET,\tiret_error);\n\n \nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_TS,\texc_invalid_tss);\nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_NP,\texc_segment_not_present);\nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_SS,\texc_stack_segment);\nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_GP,\texc_general_protection);\nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_AC,\texc_alignment_check);\n\n \nDECLARE_IDTENTRY_RAW(X86_TRAP_UD,\t\texc_invalid_op);\nDECLARE_IDTENTRY_RAW(X86_TRAP_BP,\t\texc_int3);\nDECLARE_IDTENTRY_RAW_ERRORCODE(X86_TRAP_PF,\texc_page_fault);\n\n#if defined(CONFIG_IA32_EMULATION)\nDECLARE_IDTENTRY_RAW(IA32_SYSCALL_VECTOR,\tint80_emulation);\n#endif\n\n#ifdef CONFIG_X86_MCE\n#ifdef CONFIG_X86_64\nDECLARE_IDTENTRY_MCE(X86_TRAP_MC,\texc_machine_check);\n#else\nDECLARE_IDTENTRY_RAW(X86_TRAP_MC,\texc_machine_check);\n#endif\n#ifdef CONFIG_XEN_PV\nDECLARE_IDTENTRY_RAW(X86_TRAP_MC,\txenpv_exc_machine_check);\n#endif\n#endif\n\n \n\n#if IS_ENABLED(CONFIG_KVM_INTEL)\n \nDECLARE_IDTENTRY(X86_TRAP_NMI,\t\texc_nmi_kvm_vmx);\n#endif\n\nDECLARE_IDTENTRY_NMI(X86_TRAP_NMI,\texc_nmi);\n#ifdef CONFIG_XEN_PV\nDECLARE_IDTENTRY_RAW(X86_TRAP_NMI,\txenpv_exc_nmi);\n#endif\n\n \n#ifdef CONFIG_X86_64\nDECLARE_IDTENTRY_DEBUG(X86_TRAP_DB,\texc_debug);\n#else\nDECLARE_IDTENTRY_RAW(X86_TRAP_DB,\texc_debug);\n#endif\n#ifdef CONFIG_XEN_PV\nDECLARE_IDTENTRY_RAW(X86_TRAP_DB,\txenpv_exc_debug);\n#endif\n\n \nDECLARE_IDTENTRY_DF(X86_TRAP_DF,\texc_double_fault);\n#ifdef CONFIG_XEN_PV\nDECLARE_IDTENTRY_RAW_ERRORCODE(X86_TRAP_DF,\txenpv_exc_double_fault);\n#endif\n\n \n#ifdef CONFIG_X86_CET\nDECLARE_IDTENTRY_ERRORCODE(X86_TRAP_CP,\texc_control_protection);\n#endif\n\n \n#ifdef CONFIG_AMD_MEM_ENCRYPT\nDECLARE_IDTENTRY_VC(X86_TRAP_VC,\texc_vmm_communication);\n#endif\n\n#ifdef CONFIG_XEN_PV\nDECLARE_IDTENTRY_XENCB(X86_TRAP_OTHER,\texc_xen_hypervisor_callback);\nDECLARE_IDTENTRY_RAW(X86_TRAP_OTHER,\texc_xen_unknown_trap);\n#endif\n\n#ifdef CONFIG_INTEL_TDX_GUEST\nDECLARE_IDTENTRY(X86_TRAP_VE,\t\texc_virtualization_exception);\n#endif\n\n \nDECLARE_IDTENTRY_IRQ(X86_TRAP_OTHER,\tcommon_interrupt);\n#ifdef CONFIG_X86_LOCAL_APIC\nDECLARE_IDTENTRY_IRQ(X86_TRAP_OTHER,\tspurious_interrupt);\n#endif\n\n \n#ifdef CONFIG_X86_LOCAL_APIC\nDECLARE_IDTENTRY_SYSVEC(ERROR_APIC_VECTOR,\t\tsysvec_error_interrupt);\nDECLARE_IDTENTRY_SYSVEC(SPURIOUS_APIC_VECTOR,\t\tsysvec_spurious_apic_interrupt);\nDECLARE_IDTENTRY_SYSVEC(LOCAL_TIMER_VECTOR,\t\tsysvec_apic_timer_interrupt);\nDECLARE_IDTENTRY_SYSVEC(X86_PLATFORM_IPI_VECTOR,\tsysvec_x86_platform_ipi);\n#endif\n\n#ifdef CONFIG_SMP\nDECLARE_IDTENTRY(RESCHEDULE_VECTOR,\t\t\tsysvec_reschedule_ipi);\nDECLARE_IDTENTRY_SYSVEC(REBOOT_VECTOR,\t\t\tsysvec_reboot);\nDECLARE_IDTENTRY_SYSVEC(CALL_FUNCTION_SINGLE_VECTOR,\tsysvec_call_function_single);\nDECLARE_IDTENTRY_SYSVEC(CALL_FUNCTION_VECTOR,\t\tsysvec_call_function);\n#endif\n\n#ifdef CONFIG_X86_LOCAL_APIC\n# ifdef CONFIG_X86_MCE_THRESHOLD\nDECLARE_IDTENTRY_SYSVEC(THRESHOLD_APIC_VECTOR,\t\tsysvec_threshold);\n# endif\n\n# ifdef CONFIG_X86_MCE_AMD\nDECLARE_IDTENTRY_SYSVEC(DEFERRED_ERROR_VECTOR,\t\tsysvec_deferred_error);\n# endif\n\n# ifdef CONFIG_X86_THERMAL_VECTOR\nDECLARE_IDTENTRY_SYSVEC(THERMAL_APIC_VECTOR,\t\tsysvec_thermal);\n# endif\n\n# ifdef CONFIG_IRQ_WORK\nDECLARE_IDTENTRY_SYSVEC(IRQ_WORK_VECTOR,\t\tsysvec_irq_work);\n# endif\n#endif\n\n#ifdef CONFIG_HAVE_KVM\nDECLARE_IDTENTRY_SYSVEC(POSTED_INTR_VECTOR,\t\tsysvec_kvm_posted_intr_ipi);\nDECLARE_IDTENTRY_SYSVEC(POSTED_INTR_WAKEUP_VECTOR,\tsysvec_kvm_posted_intr_wakeup_ipi);\nDECLARE_IDTENTRY_SYSVEC(POSTED_INTR_NESTED_VECTOR,\tsysvec_kvm_posted_intr_nested_ipi);\n#endif\n\n#if IS_ENABLED(CONFIG_HYPERV)\nDECLARE_IDTENTRY_SYSVEC(HYPERVISOR_CALLBACK_VECTOR,\tsysvec_hyperv_callback);\nDECLARE_IDTENTRY_SYSVEC(HYPERV_REENLIGHTENMENT_VECTOR,\tsysvec_hyperv_reenlightenment);\nDECLARE_IDTENTRY_SYSVEC(HYPERV_STIMER0_VECTOR,\tsysvec_hyperv_stimer0);\n#endif\n\n#if IS_ENABLED(CONFIG_ACRN_GUEST)\nDECLARE_IDTENTRY_SYSVEC(HYPERVISOR_CALLBACK_VECTOR,\tsysvec_acrn_hv_callback);\n#endif\n\n#ifdef CONFIG_XEN_PVHVM\nDECLARE_IDTENTRY_SYSVEC(HYPERVISOR_CALLBACK_VECTOR,\tsysvec_xen_hvm_callback);\n#endif\n\n#ifdef CONFIG_KVM_GUEST\nDECLARE_IDTENTRY_SYSVEC(HYPERVISOR_CALLBACK_VECTOR,\tsysvec_kvm_asyncpf_interrupt);\n#endif\n\n#undef X86_TRAP_OTHER\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}