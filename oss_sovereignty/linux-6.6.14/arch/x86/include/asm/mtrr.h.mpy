{
  "module_name": "mtrr.h",
  "hash_id": "3a156734c618efef2b1231bb685bca585a6a3c247252a221b03fe2b734ecee6c",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/mtrr.h",
  "human_readable_source": " \n#ifndef _ASM_X86_MTRR_H\n#define _ASM_X86_MTRR_H\n\n#include <linux/bits.h>\n#include <uapi/asm/mtrr.h>\n\n \n#define MTRR_CAP_VCNT\t\tGENMASK(7, 0)\n#define MTRR_CAP_FIX\t\tBIT_MASK(8)\n#define MTRR_CAP_WC\t\tBIT_MASK(10)\n\n#define MTRR_DEF_TYPE_TYPE\tGENMASK(7, 0)\n#define MTRR_DEF_TYPE_FE\tBIT_MASK(10)\n#define MTRR_DEF_TYPE_E\t\tBIT_MASK(11)\n\n#define MTRR_DEF_TYPE_ENABLE\t(MTRR_DEF_TYPE_FE | MTRR_DEF_TYPE_E)\n#define MTRR_DEF_TYPE_DISABLE\t~(MTRR_DEF_TYPE_TYPE | MTRR_DEF_TYPE_ENABLE)\n\n#define MTRR_PHYSBASE_TYPE\tGENMASK(7, 0)\n#define MTRR_PHYSBASE_RSVD\tGENMASK(11, 8)\n\n#define MTRR_PHYSMASK_RSVD\tGENMASK(10, 0)\n#define MTRR_PHYSMASK_V\t\tBIT_MASK(11)\n\nstruct mtrr_state_type {\n\tstruct mtrr_var_range var_ranges[MTRR_MAX_VAR_RANGES];\n\tmtrr_type fixed_ranges[MTRR_NUM_FIXED_RANGES];\n\tunsigned char enabled;\n\tbool have_fixed;\n\tmtrr_type def_type;\n};\n\n \n# ifdef CONFIG_MTRR\nvoid mtrr_bp_init(void);\nvoid mtrr_overwrite_state(struct mtrr_var_range *var, unsigned int num_var,\n\t\t\t  mtrr_type def_type);\nextern u8 mtrr_type_lookup(u64 addr, u64 end, u8 *uniform);\nextern void mtrr_save_fixed_ranges(void *);\nextern void mtrr_save_state(void);\nextern int mtrr_add(unsigned long base, unsigned long size,\n\t\t    unsigned int type, bool increment);\nextern int mtrr_add_page(unsigned long base, unsigned long size,\n\t\t\t unsigned int type, bool increment);\nextern int mtrr_del(int reg, unsigned long base, unsigned long size);\nextern int mtrr_del_page(int reg, unsigned long base, unsigned long size);\nextern void mtrr_bp_restore(void);\nextern int mtrr_trim_uncached_memory(unsigned long end_pfn);\nextern int amd_special_default_mtrr(void);\nvoid mtrr_disable(void);\nvoid mtrr_enable(void);\nvoid mtrr_generic_set_state(void);\n#  else\nstatic inline void mtrr_overwrite_state(struct mtrr_var_range *var,\n\t\t\t\t\tunsigned int num_var,\n\t\t\t\t\tmtrr_type def_type)\n{\n}\n\nstatic inline u8 mtrr_type_lookup(u64 addr, u64 end, u8 *uniform)\n{\n\t \n\t*uniform = 1;\n\n\treturn MTRR_TYPE_UNCACHABLE;\n}\n#define mtrr_save_fixed_ranges(arg) do {} while (0)\n#define mtrr_save_state() do {} while (0)\nstatic inline int mtrr_add(unsigned long base, unsigned long size,\n\t\t\t   unsigned int type, bool increment)\n{\n    return -ENODEV;\n}\nstatic inline int mtrr_add_page(unsigned long base, unsigned long size,\n\t\t\t\tunsigned int type, bool increment)\n{\n    return -ENODEV;\n}\nstatic inline int mtrr_del(int reg, unsigned long base, unsigned long size)\n{\n    return -ENODEV;\n}\nstatic inline int mtrr_del_page(int reg, unsigned long base, unsigned long size)\n{\n    return -ENODEV;\n}\nstatic inline int mtrr_trim_uncached_memory(unsigned long end_pfn)\n{\n\treturn 0;\n}\n#define mtrr_bp_init() do {} while (0)\n#define mtrr_bp_restore() do {} while (0)\n#define mtrr_disable() do {} while (0)\n#define mtrr_enable() do {} while (0)\n#define mtrr_generic_set_state() do {} while (0)\n#  endif\n\n#ifdef CONFIG_COMPAT\n#include <linux/compat.h>\n\nstruct mtrr_sentry32 {\n    compat_ulong_t base;     \n    compat_uint_t size;     \n    compat_uint_t type;      \n};\n\nstruct mtrr_gentry32 {\n    compat_ulong_t regnum;    \n    compat_uint_t base;     \n    compat_uint_t size;     \n    compat_uint_t type;      \n};\n\n#define MTRR_IOCTL_BASE 'M'\n\n#define MTRRIOC32_ADD_ENTRY      _IOW(MTRR_IOCTL_BASE,  0, struct mtrr_sentry32)\n#define MTRRIOC32_SET_ENTRY      _IOW(MTRR_IOCTL_BASE,  1, struct mtrr_sentry32)\n#define MTRRIOC32_DEL_ENTRY      _IOW(MTRR_IOCTL_BASE,  2, struct mtrr_sentry32)\n#define MTRRIOC32_GET_ENTRY      _IOWR(MTRR_IOCTL_BASE, 3, struct mtrr_gentry32)\n#define MTRRIOC32_KILL_ENTRY     _IOW(MTRR_IOCTL_BASE,  4, struct mtrr_sentry32)\n#define MTRRIOC32_ADD_PAGE_ENTRY _IOW(MTRR_IOCTL_BASE,  5, struct mtrr_sentry32)\n#define MTRRIOC32_SET_PAGE_ENTRY _IOW(MTRR_IOCTL_BASE,  6, struct mtrr_sentry32)\n#define MTRRIOC32_DEL_PAGE_ENTRY _IOW(MTRR_IOCTL_BASE,  7, struct mtrr_sentry32)\n#define MTRRIOC32_GET_PAGE_ENTRY _IOWR(MTRR_IOCTL_BASE, 8, struct mtrr_gentry32)\n#define MTRRIOC32_KILL_PAGE_ENTRY\t\t\\\n\t\t\t\t _IOW(MTRR_IOCTL_BASE,  9, struct mtrr_sentry32)\n#endif  \n\n \n#define MTRR_STATE_SHIFT\t\t10\n#define MTRR_STATE_MTRR_FIXED_ENABLED\t(MTRR_DEF_TYPE_FE >> MTRR_STATE_SHIFT)\n#define MTRR_STATE_MTRR_ENABLED\t\t(MTRR_DEF_TYPE_E >> MTRR_STATE_SHIFT)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}