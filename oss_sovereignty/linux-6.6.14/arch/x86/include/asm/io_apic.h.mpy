{
  "module_name": "io_apic.h",
  "hash_id": "29cb81344cb3b0751932d3b6833b910e770071fda683bf12dd3a8ab8f035b875",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/io_apic.h",
  "human_readable_source": " \n#ifndef _ASM_X86_IO_APIC_H\n#define _ASM_X86_IO_APIC_H\n\n#include <linux/types.h>\n#include <asm/mpspec.h>\n#include <asm/apicdef.h>\n#include <asm/irq_vectors.h>\n#include <asm/x86_init.h>\n \n\n \nunion IO_APIC_reg_00 {\n\tu32\traw;\n\tstruct {\n\t\tu32\t__reserved_2\t: 14,\n\t\t\tLTS\t\t:  1,\n\t\t\tdelivery_type\t:  1,\n\t\t\t__reserved_1\t:  8,\n\t\t\tID\t\t:  8;\n\t} __attribute__ ((packed)) bits;\n};\n\nunion IO_APIC_reg_01 {\n\tu32\traw;\n\tstruct {\n\t\tu32\tversion\t\t:  8,\n\t\t\t__reserved_2\t:  7,\n\t\t\tPRQ\t\t:  1,\n\t\t\tentries\t\t:  8,\n\t\t\t__reserved_1\t:  8;\n\t} __attribute__ ((packed)) bits;\n};\n\nunion IO_APIC_reg_02 {\n\tu32\traw;\n\tstruct {\n\t\tu32\t__reserved_2\t: 24,\n\t\t\tarbitration\t:  4,\n\t\t\t__reserved_1\t:  4;\n\t} __attribute__ ((packed)) bits;\n};\n\nunion IO_APIC_reg_03 {\n\tu32\traw;\n\tstruct {\n\t\tu32\tboot_DT\t\t:  1,\n\t\t\t__reserved_1\t: 31;\n\t} __attribute__ ((packed)) bits;\n};\n\nstruct IO_APIC_route_entry {\n\tunion {\n\t\tstruct {\n\t\t\tu64\tvector\t\t\t:  8,\n\t\t\t\tdelivery_mode\t\t:  3,\n\t\t\t\tdest_mode_logical\t:  1,\n\t\t\t\tdelivery_status\t\t:  1,\n\t\t\t\tactive_low\t\t:  1,\n\t\t\t\tirr\t\t\t:  1,\n\t\t\t\tis_level\t\t:  1,\n\t\t\t\tmasked\t\t\t:  1,\n\t\t\t\treserved_0\t\t: 15,\n\t\t\t\treserved_1\t\t: 17,\n\t\t\t\tvirt_destid_8_14\t:  7,\n\t\t\t\tdestid_0_7\t\t:  8;\n\t\t};\n\t\tstruct {\n\t\t\tu64\tir_shared_0\t\t:  8,\n\t\t\t\tir_zero\t\t\t:  3,\n\t\t\t\tir_index_15\t\t:  1,\n\t\t\t\tir_shared_1\t\t:  5,\n\t\t\t\tir_reserved_0\t\t: 31,\n\t\t\t\tir_format\t\t:  1,\n\t\t\t\tir_index_0_14\t\t: 15;\n\t\t};\n\t\tstruct {\n\t\t\tu64\tw1\t\t\t: 32,\n\t\t\t\tw2\t\t\t: 32;\n\t\t};\n\t};\n} __attribute__ ((packed));\n\nstruct irq_alloc_info;\nstruct ioapic_domain_cfg;\n\n#define\tIOAPIC_MAP_ALLOC\t\t0x1\n#define\tIOAPIC_MAP_CHECK\t\t0x2\n\n#ifdef CONFIG_X86_IO_APIC\n\n \nextern int nr_ioapics;\n\nextern int mpc_ioapic_id(int ioapic);\nextern unsigned int mpc_ioapic_addr(int ioapic);\n\n \nextern int mp_irq_entries;\n\n \nextern struct mpc_intsrc mp_irqs[MAX_IRQ_SOURCES];\n\n \nextern bool ioapic_is_disabled;\n\n \nextern int noioapicquirk;\n\n \nextern int noioapicreroute;\n\nextern u32 gsi_top;\n\nextern unsigned long io_apic_irqs;\n\n#define IO_APIC_IRQ(x) (((x) >= NR_IRQS_LEGACY) || ((1 << (x)) & io_apic_irqs))\n\n \n#define io_apic_assign_pci_irqs \\\n\t(mp_irq_entries && !ioapic_is_disabled && io_apic_irqs)\n\nstruct irq_cfg;\nextern void ioapic_insert_resources(void);\nextern int arch_early_ioapic_init(void);\n\nextern int save_ioapic_entries(void);\nextern void mask_ioapic_entries(void);\nextern int restore_ioapic_entries(void);\n\nextern void setup_ioapic_ids_from_mpc(void);\nextern void setup_ioapic_ids_from_mpc_nocheck(void);\n\nextern int mp_find_ioapic(u32 gsi);\nextern int mp_find_ioapic_pin(int ioapic, u32 gsi);\nextern int mp_map_gsi_to_irq(u32 gsi, unsigned int flags,\n\t\t\t     struct irq_alloc_info *info);\nextern void mp_unmap_irq(int irq);\nextern int mp_register_ioapic(int id, u32 address, u32 gsi_base,\n\t\t\t      struct ioapic_domain_cfg *cfg);\nextern int mp_unregister_ioapic(u32 gsi_base);\nextern int mp_ioapic_registered(u32 gsi_base);\n\nextern void ioapic_set_alloc_attr(struct irq_alloc_info *info,\n\t\t\t\t  int node, int trigger, int polarity);\n\nextern void mp_save_irq(struct mpc_intsrc *m);\n\nextern void disable_ioapic_support(void);\n\nextern void __init io_apic_init_mappings(void);\nextern unsigned int native_io_apic_read(unsigned int apic, unsigned int reg);\nextern void native_restore_boot_irq_mode(void);\n\nstatic inline unsigned int io_apic_read(unsigned int apic, unsigned int reg)\n{\n\treturn x86_apic_ops.io_apic_read(apic, reg);\n}\n\nextern void setup_IO_APIC(void);\nextern void enable_IO_APIC(void);\nextern void clear_IO_APIC(void);\nextern void restore_boot_irq_mode(void);\nextern int IO_APIC_get_PCI_irq_vector(int bus, int devfn, int pin);\nextern void print_IO_APICs(void);\n#else   \n\n#define IO_APIC_IRQ(x)\t\t0\n#define io_apic_assign_pci_irqs 0\n#define setup_ioapic_ids_from_mpc x86_init_noop\n#define nr_ioapics\t\t(0)\nstatic inline void ioapic_insert_resources(void) { }\nstatic inline int arch_early_ioapic_init(void) { return 0; }\nstatic inline void print_IO_APICs(void) {}\n#define gsi_top (NR_IRQS_LEGACY)\nstatic inline int mp_find_ioapic(u32 gsi) { return 0; }\nstatic inline int mp_map_gsi_to_irq(u32 gsi, unsigned int flags,\n\t\t\t\t    struct irq_alloc_info *info)\n{\n\treturn gsi;\n}\n\nstatic inline void mp_unmap_irq(int irq) { }\n\nstatic inline int save_ioapic_entries(void)\n{\n\treturn -ENOMEM;\n}\n\nstatic inline void mask_ioapic_entries(void) { }\nstatic inline int restore_ioapic_entries(void)\n{\n\treturn -ENOMEM;\n}\n\nstatic inline void mp_save_irq(struct mpc_intsrc *m) { }\nstatic inline void disable_ioapic_support(void) { }\nstatic inline void io_apic_init_mappings(void) { }\n#define native_io_apic_read\t\tNULL\n#define native_restore_boot_irq_mode\tNULL\n\nstatic inline void setup_IO_APIC(void) { }\nstatic inline void enable_IO_APIC(void) { }\nstatic inline void restore_boot_irq_mode(void) { }\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}