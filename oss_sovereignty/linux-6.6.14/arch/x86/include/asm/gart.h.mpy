{
  "module_name": "gart.h",
  "hash_id": "ec6087667a568ae5e65bcf539fbd899e9b09696fee626259d3880141630cd8e6",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/gart.h",
  "human_readable_source": " \n#ifndef _ASM_X86_GART_H\n#define _ASM_X86_GART_H\n\n#include <asm/e820/api.h>\n\nextern void set_up_gart_resume(u32, u32);\n\nextern int fallback_aper_order;\nextern int fallback_aper_force;\nextern int fix_aperture;\n\n \n#define GPTE_VALID\t1\n#define GPTE_COHERENT\t2\n\n \n#define GARTEN\t\t(1<<0)\n#define DISGARTCPU\t(1<<4)\n#define DISGARTIO\t(1<<5)\n#define DISTLBWALKPRB\t(1<<6)\n\n \n#define INVGART\t\t(1<<0)\n#define GARTPTEERR\t(1<<1)\n\n \n#define AMD64_GARTAPERTURECTL\t0x90\n#define AMD64_GARTAPERTUREBASE\t0x94\n#define AMD64_GARTTABLEBASE\t0x98\n#define AMD64_GARTCACHECTL\t0x9c\n\n#ifdef CONFIG_GART_IOMMU\nextern int gart_iommu_aperture;\nextern int gart_iommu_aperture_allowed;\nextern int gart_iommu_aperture_disabled;\n\nextern void early_gart_iommu_check(void);\nextern int gart_iommu_init(void);\nextern void __init gart_parse_options(char *);\nvoid gart_iommu_hole_init(void);\n\n#else\n#define gart_iommu_aperture            0\n#define gart_iommu_aperture_allowed    0\n#define gart_iommu_aperture_disabled   1\n\nstatic inline void early_gart_iommu_check(void)\n{\n}\nstatic inline void gart_parse_options(char *options)\n{\n}\nstatic inline void gart_iommu_hole_init(void)\n{\n}\n#endif\n\nextern int agp_amd64_init(void);\n\nstatic inline void gart_set_size_and_enable(struct pci_dev *dev, u32 order)\n{\n\tu32 ctl;\n\n\t \n\tctl = order << 1;\n\n\tpci_write_config_dword(dev, AMD64_GARTAPERTURECTL, ctl);\n}\n\nstatic inline void enable_gart_translation(struct pci_dev *dev, u64 addr)\n{\n\tu32 tmp, ctl;\n\n\t \n\taddr >>= 12;\n\ttmp = (u32) addr<<4;\n\ttmp &= ~0xf;\n\tpci_write_config_dword(dev, AMD64_GARTTABLEBASE, tmp);\n\n\t \n\tpci_read_config_dword(dev, AMD64_GARTAPERTURECTL, &ctl);\n\tctl |= GARTEN | DISTLBWALKPRB;\n\tctl &= ~(DISGARTCPU | DISGARTIO);\n\tpci_write_config_dword(dev, AMD64_GARTAPERTURECTL, ctl);\n}\n\nstatic inline int aperture_valid(u64 aper_base, u32 aper_size, u32 min_size)\n{\n\tif (!aper_base)\n\t\treturn 0;\n\n\tif (aper_base + aper_size > 0x100000000ULL) {\n\t\tprintk(KERN_INFO \"Aperture beyond 4GB. Ignoring.\\n\");\n\t\treturn 0;\n\t}\n\tif (e820__mapped_any(aper_base, aper_base + aper_size, E820_TYPE_RAM)) {\n\t\tprintk(KERN_INFO \"Aperture pointing to e820 RAM. Ignoring.\\n\");\n\t\treturn 0;\n\t}\n\tif (aper_size < min_size) {\n\t\tprintk(KERN_INFO \"Aperture too small (%d MB) than (%d MB)\\n\",\n\t\t\t\t aper_size>>20, min_size>>20);\n\t\treturn 0;\n\t}\n\n\treturn 1;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}