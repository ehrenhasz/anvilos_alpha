{
  "module_name": "xor.h",
  "hash_id": "5bd93918c60a382fa0eecd0f33721014e4cdbb50f0f62ffea5733d1f232afd28",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/include/asm/xor.h",
  "human_readable_source": " \n#ifndef _ASM_X86_XOR_H\n#define _ASM_X86_XOR_H\n\n \n\n \n\n \n\n \n\n#include <asm/fpu/api.h>\n\n#ifdef CONFIG_X86_32\n \n# define XOR_CONSTANT_CONSTRAINT \"i\"\n#else\n# define XOR_CONSTANT_CONSTRAINT \"re\"\n#endif\n\n#define OFFS(x)\t\t\"16*(\"#x\")\"\n#define PF_OFFS(x)\t\"256+16*(\"#x\")\"\n#define PF0(x)\t\t\"\tprefetchnta \"PF_OFFS(x)\"(%[p1])\t\t;\\n\"\n#define LD(x, y)\t\"\tmovaps \"OFFS(x)\"(%[p1]), %%xmm\"#y\"\t;\\n\"\n#define ST(x, y)\t\"\tmovaps %%xmm\"#y\", \"OFFS(x)\"(%[p1])\t;\\n\"\n#define PF1(x)\t\t\"\tprefetchnta \"PF_OFFS(x)\"(%[p2])\t\t;\\n\"\n#define PF2(x)\t\t\"\tprefetchnta \"PF_OFFS(x)\"(%[p3])\t\t;\\n\"\n#define PF3(x)\t\t\"\tprefetchnta \"PF_OFFS(x)\"(%[p4])\t\t;\\n\"\n#define PF4(x)\t\t\"\tprefetchnta \"PF_OFFS(x)\"(%[p5])\t\t;\\n\"\n#define XO1(x, y)\t\"\txorps \"OFFS(x)\"(%[p2]), %%xmm\"#y\"\t;\\n\"\n#define XO2(x, y)\t\"\txorps \"OFFS(x)\"(%[p3]), %%xmm\"#y\"\t;\\n\"\n#define XO3(x, y)\t\"\txorps \"OFFS(x)\"(%[p4]), %%xmm\"#y\"\t;\\n\"\n#define XO4(x, y)\t\"\txorps \"OFFS(x)\"(%[p5]), %%xmm\"#y\"\t;\\n\"\n#define NOP(x)\n\n#define BLK64(pf, op, i)\t\t\t\t\\\n\t\tpf(i)\t\t\t\t\t\\\n\t\top(i, 0)\t\t\t\t\\\n\t\t\top(i + 1, 1)\t\t\t\\\n\t\t\t\top(i + 2, 2)\t\t\\\n\t\t\t\t\top(i + 3, 3)\n\nstatic void\nxor_sse_2(unsigned long bytes, unsigned long * __restrict p1,\n\t  const unsigned long * __restrict p2)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i)\t\t\t\t\t\\\n\t\tLD(i, 0)\t\t\t\t\\\n\t\t\tLD(i + 1, 1)\t\t\t\\\n\t\tPF1(i)\t\t\t\t\t\\\n\t\t\t\tPF1(i + 2)\t\t\\\n\t\t\t\tLD(i + 2, 2)\t\t\\\n\t\t\t\t\tLD(i + 3, 3)\t\\\n\t\tPF0(i + 4)\t\t\t\t\\\n\t\t\t\tPF0(i + 6)\t\t\\\n\t\tXO1(i, 0)\t\t\t\t\\\n\t\t\tXO1(i + 1, 1)\t\t\t\\\n\t\t\t\tXO1(i + 2, 2)\t\t\\\n\t\t\t\t\tXO1(i + 3, 3)\t\\\n\t\tST(i, 0)\t\t\t\t\\\n\t\t\tST(i + 1, 1)\t\t\t\\\n\t\t\t\tST(i + 2, 2)\t\t\\\n\t\t\t\t\tST(i + 3, 3)\t\\\n\n\n\t\tPF0(0)\n\t\t\t\tPF0(2)\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines),\n\t  [p1] \"+r\" (p1), [p2] \"+r\" (p2)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_2_pf64(unsigned long bytes, unsigned long * __restrict p1,\n\t       const unsigned long * __restrict p2)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i)\t\t\t\\\n\t\tBLK64(PF0, LD, i)\t\\\n\t\tBLK64(PF1, XO1, i)\t\\\n\t\tBLK64(NOP, ST, i)\t\\\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines),\n\t  [p1] \"+r\" (p1), [p2] \"+r\" (p2)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_3(unsigned long bytes, unsigned long * __restrict p1,\n\t  const unsigned long * __restrict p2,\n\t  const unsigned long * __restrict p3)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i) \\\n\t\tPF1(i)\t\t\t\t\t\\\n\t\t\t\tPF1(i + 2)\t\t\\\n\t\tLD(i, 0)\t\t\t\t\\\n\t\t\tLD(i + 1, 1)\t\t\t\\\n\t\t\t\tLD(i + 2, 2)\t\t\\\n\t\t\t\t\tLD(i + 3, 3)\t\\\n\t\tPF2(i)\t\t\t\t\t\\\n\t\t\t\tPF2(i + 2)\t\t\\\n\t\tPF0(i + 4)\t\t\t\t\\\n\t\t\t\tPF0(i + 6)\t\t\\\n\t\tXO1(i, 0)\t\t\t\t\\\n\t\t\tXO1(i + 1, 1)\t\t\t\\\n\t\t\t\tXO1(i + 2, 2)\t\t\\\n\t\t\t\t\tXO1(i + 3, 3)\t\\\n\t\tXO2(i, 0)\t\t\t\t\\\n\t\t\tXO2(i + 1, 1)\t\t\t\\\n\t\t\t\tXO2(i + 2, 2)\t\t\\\n\t\t\t\t\tXO2(i + 3, 3)\t\\\n\t\tST(i, 0)\t\t\t\t\\\n\t\t\tST(i + 1, 1)\t\t\t\\\n\t\t\t\tST(i + 2, 2)\t\t\\\n\t\t\t\t\tST(i + 3, 3)\t\\\n\n\n\t\tPF0(0)\n\t\t\t\tPF0(2)\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines),\n\t  [p1] \"+r\" (p1), [p2] \"+r\" (p2), [p3] \"+r\" (p3)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_3_pf64(unsigned long bytes, unsigned long * __restrict p1,\n\t       const unsigned long * __restrict p2,\n\t       const unsigned long * __restrict p3)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i)\t\t\t\\\n\t\tBLK64(PF0, LD, i)\t\\\n\t\tBLK64(PF1, XO1, i)\t\\\n\t\tBLK64(PF2, XO2, i)\t\\\n\t\tBLK64(NOP, ST, i)\t\\\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines),\n\t  [p1] \"+r\" (p1), [p2] \"+r\" (p2), [p3] \"+r\" (p3)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_4(unsigned long bytes, unsigned long * __restrict p1,\n\t  const unsigned long * __restrict p2,\n\t  const unsigned long * __restrict p3,\n\t  const unsigned long * __restrict p4)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i) \\\n\t\tPF1(i)\t\t\t\t\t\\\n\t\t\t\tPF1(i + 2)\t\t\\\n\t\tLD(i, 0)\t\t\t\t\\\n\t\t\tLD(i + 1, 1)\t\t\t\\\n\t\t\t\tLD(i + 2, 2)\t\t\\\n\t\t\t\t\tLD(i + 3, 3)\t\\\n\t\tPF2(i)\t\t\t\t\t\\\n\t\t\t\tPF2(i + 2)\t\t\\\n\t\tXO1(i, 0)\t\t\t\t\\\n\t\t\tXO1(i + 1, 1)\t\t\t\\\n\t\t\t\tXO1(i + 2, 2)\t\t\\\n\t\t\t\t\tXO1(i + 3, 3)\t\\\n\t\tPF3(i)\t\t\t\t\t\\\n\t\t\t\tPF3(i + 2)\t\t\\\n\t\tPF0(i + 4)\t\t\t\t\\\n\t\t\t\tPF0(i + 6)\t\t\\\n\t\tXO2(i, 0)\t\t\t\t\\\n\t\t\tXO2(i + 1, 1)\t\t\t\\\n\t\t\t\tXO2(i + 2, 2)\t\t\\\n\t\t\t\t\tXO2(i + 3, 3)\t\\\n\t\tXO3(i, 0)\t\t\t\t\\\n\t\t\tXO3(i + 1, 1)\t\t\t\\\n\t\t\t\tXO3(i + 2, 2)\t\t\\\n\t\t\t\t\tXO3(i + 3, 3)\t\\\n\t\tST(i, 0)\t\t\t\t\\\n\t\t\tST(i + 1, 1)\t\t\t\\\n\t\t\t\tST(i + 2, 2)\t\t\\\n\t\t\t\t\tST(i + 3, 3)\t\\\n\n\n\t\tPF0(0)\n\t\t\t\tPF0(2)\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       add %[inc], %[p4]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines), [p1] \"+r\" (p1),\n\t  [p2] \"+r\" (p2), [p3] \"+r\" (p3), [p4] \"+r\" (p4)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_4_pf64(unsigned long bytes, unsigned long * __restrict p1,\n\t       const unsigned long * __restrict p2,\n\t       const unsigned long * __restrict p3,\n\t       const unsigned long * __restrict p4)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i)\t\t\t\\\n\t\tBLK64(PF0, LD, i)\t\\\n\t\tBLK64(PF1, XO1, i)\t\\\n\t\tBLK64(PF2, XO2, i)\t\\\n\t\tBLK64(PF3, XO3, i)\t\\\n\t\tBLK64(NOP, ST, i)\t\\\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       add %[inc], %[p4]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines), [p1] \"+r\" (p1),\n\t  [p2] \"+r\" (p2), [p3] \"+r\" (p3), [p4] \"+r\" (p4)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_5(unsigned long bytes, unsigned long * __restrict p1,\n\t  const unsigned long * __restrict p2,\n\t  const unsigned long * __restrict p3,\n\t  const unsigned long * __restrict p4,\n\t  const unsigned long * __restrict p5)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i) \\\n\t\tPF1(i)\t\t\t\t\t\\\n\t\t\t\tPF1(i + 2)\t\t\\\n\t\tLD(i, 0)\t\t\t\t\\\n\t\t\tLD(i + 1, 1)\t\t\t\\\n\t\t\t\tLD(i + 2, 2)\t\t\\\n\t\t\t\t\tLD(i + 3, 3)\t\\\n\t\tPF2(i)\t\t\t\t\t\\\n\t\t\t\tPF2(i + 2)\t\t\\\n\t\tXO1(i, 0)\t\t\t\t\\\n\t\t\tXO1(i + 1, 1)\t\t\t\\\n\t\t\t\tXO1(i + 2, 2)\t\t\\\n\t\t\t\t\tXO1(i + 3, 3)\t\\\n\t\tPF3(i)\t\t\t\t\t\\\n\t\t\t\tPF3(i + 2)\t\t\\\n\t\tXO2(i, 0)\t\t\t\t\\\n\t\t\tXO2(i + 1, 1)\t\t\t\\\n\t\t\t\tXO2(i + 2, 2)\t\t\\\n\t\t\t\t\tXO2(i + 3, 3)\t\\\n\t\tPF4(i)\t\t\t\t\t\\\n\t\t\t\tPF4(i + 2)\t\t\\\n\t\tPF0(i + 4)\t\t\t\t\\\n\t\t\t\tPF0(i + 6)\t\t\\\n\t\tXO3(i, 0)\t\t\t\t\\\n\t\t\tXO3(i + 1, 1)\t\t\t\\\n\t\t\t\tXO3(i + 2, 2)\t\t\\\n\t\t\t\t\tXO3(i + 3, 3)\t\\\n\t\tXO4(i, 0)\t\t\t\t\\\n\t\t\tXO4(i + 1, 1)\t\t\t\\\n\t\t\t\tXO4(i + 2, 2)\t\t\\\n\t\t\t\t\tXO4(i + 3, 3)\t\\\n\t\tST(i, 0)\t\t\t\t\\\n\t\t\tST(i + 1, 1)\t\t\t\\\n\t\t\t\tST(i + 2, 2)\t\t\\\n\t\t\t\t\tST(i + 3, 3)\t\\\n\n\n\t\tPF0(0)\n\t\t\t\tPF0(2)\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       add %[inc], %[p4]       ;\\n\"\n\t\"       add %[inc], %[p5]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines), [p1] \"+r\" (p1), [p2] \"+r\" (p2),\n\t  [p3] \"+r\" (p3), [p4] \"+r\" (p4), [p5] \"+r\" (p5)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic void\nxor_sse_5_pf64(unsigned long bytes, unsigned long * __restrict p1,\n\t       const unsigned long * __restrict p2,\n\t       const unsigned long * __restrict p3,\n\t       const unsigned long * __restrict p4,\n\t       const unsigned long * __restrict p5)\n{\n\tunsigned long lines = bytes >> 8;\n\n\tkernel_fpu_begin();\n\n\tasm volatile(\n#undef BLOCK\n#define BLOCK(i)\t\t\t\\\n\t\tBLK64(PF0, LD, i)\t\\\n\t\tBLK64(PF1, XO1, i)\t\\\n\t\tBLK64(PF2, XO2, i)\t\\\n\t\tBLK64(PF3, XO3, i)\t\\\n\t\tBLK64(PF4, XO4, i)\t\\\n\t\tBLK64(NOP, ST, i)\t\\\n\n\t\" .align 32\t\t\t;\\n\"\n\t\" 1:                            ;\\n\"\n\n\t\tBLOCK(0)\n\t\tBLOCK(4)\n\t\tBLOCK(8)\n\t\tBLOCK(12)\n\n\t\"       add %[inc], %[p1]       ;\\n\"\n\t\"       add %[inc], %[p2]       ;\\n\"\n\t\"       add %[inc], %[p3]       ;\\n\"\n\t\"       add %[inc], %[p4]       ;\\n\"\n\t\"       add %[inc], %[p5]       ;\\n\"\n\t\"       dec %[cnt]              ;\\n\"\n\t\"       jnz 1b                  ;\\n\"\n\t: [cnt] \"+r\" (lines), [p1] \"+r\" (p1), [p2] \"+r\" (p2),\n\t  [p3] \"+r\" (p3), [p4] \"+r\" (p4), [p5] \"+r\" (p5)\n\t: [inc] XOR_CONSTANT_CONSTRAINT (256UL)\n\t: \"memory\");\n\n\tkernel_fpu_end();\n}\n\nstatic struct xor_block_template xor_block_sse_pf64 = {\n\t.name = \"prefetch64-sse\",\n\t.do_2 = xor_sse_2_pf64,\n\t.do_3 = xor_sse_3_pf64,\n\t.do_4 = xor_sse_4_pf64,\n\t.do_5 = xor_sse_5_pf64,\n};\n\n#undef LD\n#undef XO1\n#undef XO2\n#undef XO3\n#undef XO4\n#undef ST\n#undef NOP\n#undef BLK64\n#undef BLOCK\n\n#undef XOR_CONSTANT_CONSTRAINT\n\n#ifdef CONFIG_X86_32\n# include <asm/xor_32.h>\n#else\n# include <asm/xor_64.h>\n#endif\n\n#define XOR_SELECT_TEMPLATE(FASTEST) \\\n\tAVX_SELECT(FASTEST)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}