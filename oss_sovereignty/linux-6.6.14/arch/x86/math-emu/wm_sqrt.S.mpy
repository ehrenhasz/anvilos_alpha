{
  "module_name": "wm_sqrt.S",
  "hash_id": "e3c2f75ffe41f003d59096c52fff4a6fd0d6e3013776d287809ebc728e085a0f",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/math-emu/wm_sqrt.S",
  "human_readable_source": " \n\t.file\t\"wm_sqrt.S\"\n \n\n \n\n#include \"exception.h\"\n#include \"fpu_emu.h\"\n\n\n#ifndef NON_REENTRANT_FPU\n \n#define FPU_accum_3\t-4(%ebp)\t \n#define FPU_accum_2\t-8(%ebp)\n#define FPU_accum_1\t-12(%ebp)\n#define FPU_accum_0\t-16(%ebp)\n\n \n#define FPU_fsqrt_arg_2\t-20(%ebp)\t \n#define FPU_fsqrt_arg_1\t-24(%ebp)\n#define FPU_fsqrt_arg_0\t-28(%ebp)\t \n\n#else\n \n.data\n\t.align 4,0\nFPU_accum_3:\n\t.long\t0\t\t \nFPU_accum_2:\n\t.long\t0\nFPU_accum_1:\n\t.long\t0\nFPU_accum_0:\n\t.long\t0\n\n \nFPU_fsqrt_arg_2:\n\t.long\t0\t\t \nFPU_fsqrt_arg_1:\n\t.long\t0\nFPU_fsqrt_arg_0:\n\t.long\t0\t\t \n#endif   \n\n\n.text\nSYM_FUNC_START(wm_sqrt)\n\tpushl\t%ebp\n\tmovl\t%esp,%ebp\n#ifndef NON_REENTRANT_FPU\n\tsubl\t$28,%esp\n#endif  \n\tpushl\t%esi\n\tpushl\t%edi\n\tpushl\t%ebx\n\n\tmovl\tPARAM1,%esi\n\n\tmovl\tSIGH(%esi),%eax\n\tmovl\tSIGL(%esi),%ecx\n\txorl\t%edx,%edx\n\n \n\n\tcmpw\tEXP_BIAS,EXP(%esi)\n\tjnz\tsqrt_arg_ge_2\n\n\tshrl\t$1,%eax\t\t\t \n\trcrl\t$1,%ecx\n\trcrl\t$1,%edx\n\nsqrt_arg_ge_2:\n \n\n\tmovl\t%eax,FPU_fsqrt_arg_2\t\t \n\tmovl\t%ecx,FPU_fsqrt_arg_1\n\tmovl\t%edx,FPU_fsqrt_arg_0\n\n \n\tshrl\t$1,%eax\n\taddl\t$0x40000000,%eax\n\tmovl\t$0xaaaaaaaa,%ecx\n\tmull\t%ecx\n\tshll\t%edx\t\t\t \n\ttestl\t$0x80000000,%edx\t \n\tjnz\tsqrt_prelim_no_adjust\n\n\tmovl\t$0x80000000,%edx\t \n\nsqrt_prelim_no_adjust:\n\tmovl\t%edx,%esi\t \n\n \n\n\tmovl\tFPU_fsqrt_arg_2,%ecx\t \n\n \n\n \n\tshrl\t%ecx\t\t \n\t\t\t\t \n\n\tmovl\t%ecx,%edx\t \n\tdivl\t%esi\t\t \n\tshrl\t%esi\t\t \n\taddl\t%eax,%esi\t \n\n\tmovl\t%ecx,%edx\n\tdivl\t%esi\n\tshrl\t%esi\n\taddl\t%eax,%esi\n\n\tmovl\t%ecx,%edx\n\tdivl\t%esi\n\tshrl\t%esi\n\taddl\t%eax,%esi\n\n \n\n \n\tmovl\t%esi,%eax\n\tmull\t%esi\n \n\n\tmovl\tFPU_fsqrt_arg_1,%ecx\n\tsubl\t%ecx,%eax\n\tmovl\tFPU_fsqrt_arg_2,%ecx\t \n\tsbbl\t%ecx,%edx\n\tjnc\tsqrt_stage_2_positive\n\n \n\tnotl\t%edx\n\tnotl\t%eax\n\taddl\t$1,%eax\n\tadcl\t$0,%edx\n\n\tdivl\t%esi\n\tmovl\t%eax,%ecx\n\n\tmovl\t%edx,%eax\n\tdivl\t%esi\n\tjmp\tsqrt_stage_2_finish\n\nsqrt_stage_2_positive:\n\tdivl\t%esi\n\tmovl\t%eax,%ecx\n\n\tmovl\t%edx,%eax\n\tdivl\t%esi\n\n\tnotl\t%ecx\n\tnotl\t%eax\n\taddl\t$1,%eax\n\tadcl\t$0,%ecx\n\nsqrt_stage_2_finish:\n\tsarl\t$1,%ecx\t\t \n\trcrl\t$1,%eax\n\n\t \n\tmovl\t%eax,%edi\n\taddl\t%ecx,%esi\n\n\tjnz\tsqrt_stage_2_done\t \n\n#ifdef PARANOID\n \n\tcmpl\t$0xffffffff,FPU_fsqrt_arg_1\n\tjnz\tsqrt_stage_2_error\n#endif  \n\n \n\txorl\t%eax,%eax\n\tdecl\t%eax\n\tmovl\t%eax,%edi\n\tmovl\t%eax,%esi\n\tmovl\t$0x7fffffff,%eax\n\tjmp\tsqrt_round_result\n\n#ifdef PARANOID\nsqrt_stage_2_error:\n\tpushl\tEX_INTERNAL|0x213\n\tcall\tEXCEPTION\n#endif   \n\nsqrt_stage_2_done:\n\n \n\n \n\tmovl\t%edi,%eax\t\t \n\tmull\t%edi\n\tmovl\t%edx,FPU_accum_1\n\n\tmovl\t%esi,%eax\n\tmull\t%esi\n\tmovl\t%edx,FPU_accum_3\n\tmovl\t%eax,FPU_accum_2\n\n\tmovl\t%edi,%eax\n\tmull\t%esi\n\taddl\t%eax,FPU_accum_1\n\tadcl\t%edx,FPU_accum_2\n\tadcl\t$0,FPU_accum_3\n\n \n \n\taddl\t%eax,FPU_accum_1\n\tadcl\t%edx,FPU_accum_2\n\tadcl\t$0,FPU_accum_3\n\n \n\n\tmovl\tFPU_fsqrt_arg_0,%eax\t\t \n\tsubl\t%eax,FPU_accum_1\n\tmovl\tFPU_fsqrt_arg_1,%eax\n\tsbbl\t%eax,FPU_accum_2\n\tmovl\tFPU_fsqrt_arg_2,%eax\t\t \n\tsbbl\t%eax,FPU_accum_3\n\tjnc\tsqrt_stage_3_positive\n\n \n\tnotl\tFPU_accum_1\n\tnotl\tFPU_accum_2\n\tnotl\tFPU_accum_3\n\taddl\t$1,FPU_accum_1\n\tadcl\t$0,FPU_accum_2\n\n#ifdef PARANOID\n\tadcl\t$0,FPU_accum_3\t \n\tjz\tsqrt_stage_3_no_error\n\nsqrt_stage_3_error:\n\tpushl\tEX_INTERNAL|0x207\n\tcall\tEXCEPTION\n\nsqrt_stage_3_no_error:\n#endif  \n\n\tmovl\tFPU_accum_2,%edx\n\tmovl\tFPU_accum_1,%eax\n\tdivl\t%esi\n\tmovl\t%eax,%ecx\n\n\tmovl\t%edx,%eax\n\tdivl\t%esi\n\n\tsarl\t$1,%ecx\t\t \n\trcrl\t$1,%eax\n\n\t \n\n\taddl\t%ecx,%edi\n\tadcl\t$0,%esi\n\n\tjmp\tsqrt_stage_3_finished\n\nsqrt_stage_3_positive:\n\tmovl\tFPU_accum_2,%edx\n\tmovl\tFPU_accum_1,%eax\n\tdivl\t%esi\n\tmovl\t%eax,%ecx\n\n\tmovl\t%edx,%eax\n\tdivl\t%esi\n\n\tsarl\t$1,%ecx\t\t \n\trcrl\t$1,%eax\n\n\t \n\n\tnotl\t%eax\t\t \n\tnotl\t%ecx\n\taddl\t$1,%eax\n\tadcl\t$0,%ecx\t\t \n\tadcl\t$0xffffffff,%esi\n\n\taddl\t%ecx,%edi\n\tadcl\t$0,%esi\n\nsqrt_stage_3_finished:\n\n \n\tcmpl\t$0xffffffe0,%eax\n\tja\tsqrt_near_exact_x\n\n\tcmpl\t$0x00000020,%eax\n\tjb\tsqrt_near_exact\n\n\tcmpl\t$0x7fffffe0,%eax\n\tjb\tsqrt_round_result\n\n\tcmpl\t$0x80000020,%eax\n\tjb\tsqrt_get_more_precision\n\nsqrt_round_result:\n \n\tmovl\t%eax,%edx\n\tmovl\t%esi,%eax\n\tmovl\t%edi,%ebx\n\tmovl\tPARAM1,%edi\n\tmovw\tEXP_BIAS,EXP(%edi)\t \n\tjmp\tfpu_reg_round\n\n\nsqrt_near_exact_x:\n \n\taddl\t$1,%edi\n\tadcl\t$0,%esi\n\nsqrt_near_exact:\n \n\tmovl\t%edi,%eax\t\t \n\tmull\t%edi\n\tmovl\t%edx,%ebx\t\t \n\tmovl\t%eax,%ecx\t\t \n\n\tmovl\t%edi,%eax\n\tmull\t%esi\n\taddl\t%eax,%ebx\n\taddl\t%eax,%ebx\n\n#ifdef PARANOID\n\tcmp\t$0xffffffb0,%ebx\n\tjb\tsqrt_near_exact_ok\n\n\tcmp\t$0x00000050,%ebx\n\tja\tsqrt_near_exact_ok\n\n\tpushl\tEX_INTERNAL|0x214\n\tcall\tEXCEPTION\n\nsqrt_near_exact_ok:\n#endif   \n\n\tor\t%ebx,%ebx\n\tjs\tsqrt_near_exact_small\n\n\tjnz\tsqrt_near_exact_large\n\n\tor\t%ebx,%edx\n\tjnz\tsqrt_near_exact_large\n\n \n\txorl\t%eax,%eax\n\tjmp\tsqrt_round_result\n\nsqrt_near_exact_small:\n \n\tmovl\t$0x000000ff,%eax\n\tjmp\tsqrt_round_result\n\t\nsqrt_near_exact_large:\n \n\tsubl\t$1,%edi\n\tsbbl\t$0,%esi\n\tmovl\t$0xffffff00,%eax\n\tjmp\tsqrt_round_result\n\n\nsqrt_get_more_precision:\n \n\tstc\t\t\t \n\trcll\t$1,%edi\t\t \n\trcll\t$1,%esi\n\n\tmovl\t%edi,%eax\t\t \n\tmull\t%edi\n\tmovl\t%edx,%ebx\t\t \n\tmovl\t%eax,%ecx\t\t \n\n\tmovl\t%edi,%eax\n\tmull\t%esi\n\taddl\t%eax,%ebx\n\taddl\t%eax,%ebx\n\n \n\tstc\t\t\t \n\trcrl\t$1,%esi\t\t \n\trcrl\t$1,%edi\n\n#ifdef PARANOID\n\tcmp\t$0xffffff60,%ebx\n\tjb\tsqrt_more_prec_ok\n\n\tcmp\t$0x000000a0,%ebx\n\tja\tsqrt_more_prec_ok\n\n\tpushl\tEX_INTERNAL|0x215\n\tcall\tEXCEPTION\n\nsqrt_more_prec_ok:\n#endif   \n\n\tor\t%ebx,%ebx\n\tjs\tsqrt_more_prec_small\n\n\tjnz\tsqrt_more_prec_large\n\n\tor\t%ebx,%ecx\n\tjnz\tsqrt_more_prec_large\n\n \n\tmovl\t$0x80000000,%eax\n\tjmp\tsqrt_round_result\n\nsqrt_more_prec_small:\n \n\tmovl\t$0x800000ff,%eax\n\tjmp\tsqrt_round_result\n\t\nsqrt_more_prec_large:\n \n\tmovl\t$0x7fffff00,%eax\n\tjmp\tsqrt_round_result\nSYM_FUNC_END(wm_sqrt)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}