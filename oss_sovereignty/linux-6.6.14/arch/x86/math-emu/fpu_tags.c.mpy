{
  "module_name": "fpu_tags.c",
  "hash_id": "833c6d1049a7d707ef660f08cbc02901f5a19c5895c7cd22b87cf1ffd51b2647",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/math-emu/fpu_tags.c",
  "human_readable_source": "\n \n\n#include \"fpu_emu.h\"\n#include \"fpu_system.h\"\n#include \"exception.h\"\n\nvoid FPU_pop(void)\n{\n\tfpu_tag_word |= 3 << ((top & 7) * 2);\n\ttop++;\n}\n\nint FPU_gettag0(void)\n{\n\treturn (fpu_tag_word >> ((top & 7) * 2)) & 3;\n}\n\nint FPU_gettagi(int stnr)\n{\n\treturn (fpu_tag_word >> (((top + stnr) & 7) * 2)) & 3;\n}\n\nint FPU_gettag(int regnr)\n{\n\treturn (fpu_tag_word >> ((regnr & 7) * 2)) & 3;\n}\n\nvoid FPU_settag0(int tag)\n{\n\tint regnr = top;\n\tregnr &= 7;\n\tfpu_tag_word &= ~(3 << (regnr * 2));\n\tfpu_tag_word |= (tag & 3) << (regnr * 2);\n}\n\nvoid FPU_settagi(int stnr, int tag)\n{\n\tint regnr = stnr + top;\n\tregnr &= 7;\n\tfpu_tag_word &= ~(3 << (regnr * 2));\n\tfpu_tag_word |= (tag & 3) << (regnr * 2);\n}\n\nvoid FPU_settag(int regnr, int tag)\n{\n\tregnr &= 7;\n\tfpu_tag_word &= ~(3 << (regnr * 2));\n\tfpu_tag_word |= (tag & 3) << (regnr * 2);\n}\n\nint FPU_Special(FPU_REG const *ptr)\n{\n\tint exp = exponent(ptr);\n\n\tif (exp == EXP_BIAS + EXP_UNDER)\n\t\treturn TW_Denormal;\n\telse if (exp != EXP_BIAS + EXP_OVER)\n\t\treturn TW_NaN;\n\telse if ((ptr->sigh == 0x80000000) && (ptr->sigl == 0))\n\t\treturn TW_Infinity;\n\treturn TW_NaN;\n}\n\nint isNaN(FPU_REG const *ptr)\n{\n\treturn ((exponent(ptr) == EXP_BIAS + EXP_OVER)\n\t\t&& !((ptr->sigh == 0x80000000) && (ptr->sigl == 0)));\n}\n\nint FPU_empty_i(int stnr)\n{\n\tint regnr = (top + stnr) & 7;\n\n\treturn ((fpu_tag_word >> (regnr * 2)) & 3) == TAG_Empty;\n}\n\nint FPU_stackoverflow(FPU_REG ** st_new_ptr)\n{\n\t*st_new_ptr = &st(-1);\n\n\treturn ((fpu_tag_word >> (((top - 1) & 7) * 2)) & 3) != TAG_Empty;\n}\n\nvoid FPU_copy_to_regi(FPU_REG const *r, u_char tag, int stnr)\n{\n\treg_copy(r, &st(stnr));\n\tFPU_settagi(stnr, tag);\n}\n\nvoid FPU_copy_to_reg1(FPU_REG const *r, u_char tag)\n{\n\treg_copy(r, &st(1));\n\tFPU_settagi(1, tag);\n}\n\nvoid FPU_copy_to_reg0(FPU_REG const *r, u_char tag)\n{\n\tint regnr = top;\n\tregnr &= 7;\n\n\treg_copy(r, &st(0));\n\n\tfpu_tag_word &= ~(3 << (regnr * 2));\n\tfpu_tag_word |= (tag & 3) << (regnr * 2);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}