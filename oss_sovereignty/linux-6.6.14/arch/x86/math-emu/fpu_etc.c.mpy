{
  "module_name": "fpu_etc.c",
  "hash_id": "d4863425dbd89e5a6788d4194b8459f2671003113cbef9c270e544250ee3a69b",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/math-emu/fpu_etc.c",
  "human_readable_source": "\n \n\n#include \"fpu_system.h\"\n#include \"exception.h\"\n#include \"fpu_emu.h\"\n#include \"status_w.h\"\n#include \"reg_constant.h\"\n\nstatic void fchs(FPU_REG *st0_ptr, u_char st0tag)\n{\n\tif (st0tag ^ TAG_Empty) {\n\t\tsignbyte(st0_ptr) ^= SIGN_NEG;\n\t\tclear_C1();\n\t} else\n\t\tFPU_stack_underflow();\n}\n\nstatic void fabs(FPU_REG *st0_ptr, u_char st0tag)\n{\n\tif (st0tag ^ TAG_Empty) {\n\t\tsetpositive(st0_ptr);\n\t\tclear_C1();\n\t} else\n\t\tFPU_stack_underflow();\n}\n\nstatic void ftst_(FPU_REG *st0_ptr, u_char st0tag)\n{\n\tswitch (st0tag) {\n\tcase TAG_Zero:\n\t\tsetcc(SW_C3);\n\t\tbreak;\n\tcase TAG_Valid:\n\t\tif (getsign(st0_ptr) == SIGN_POS)\n\t\t\tsetcc(0);\n\t\telse\n\t\t\tsetcc(SW_C0);\n\t\tbreak;\n\tcase TAG_Special:\n\t\tswitch (FPU_Special(st0_ptr)) {\n\t\tcase TW_Denormal:\n\t\t\tif (getsign(st0_ptr) == SIGN_POS)\n\t\t\t\tsetcc(0);\n\t\t\telse\n\t\t\t\tsetcc(SW_C0);\n\t\t\tif (denormal_operand() < 0) {\n#ifdef PECULIAR_486\n\t\t\t\t \n\t\t\t\tif (getsign(st0_ptr) == SIGN_POS)\n\t\t\t\t\tsetcc(SW_C3);\n#endif  \n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase TW_NaN:\n\t\t\tsetcc(SW_C0 | SW_C2 | SW_C3);\t \n\t\t\tEXCEPTION(EX_Invalid);\n\t\t\tbreak;\n\t\tcase TW_Infinity:\n\t\t\tif (getsign(st0_ptr) == SIGN_POS)\n\t\t\t\tsetcc(0);\n\t\t\telse\n\t\t\t\tsetcc(SW_C0);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tsetcc(SW_C0 | SW_C2 | SW_C3);\t \n\t\t\tEXCEPTION(EX_INTERNAL | 0x14);\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase TAG_Empty:\n\t\tsetcc(SW_C0 | SW_C2 | SW_C3);\n\t\tEXCEPTION(EX_StackUnder);\n\t\tbreak;\n\t}\n}\n\nstatic void fxam(FPU_REG *st0_ptr, u_char st0tag)\n{\n\tint c = 0;\n\tswitch (st0tag) {\n\tcase TAG_Empty:\n\t\tc = SW_C3 | SW_C0;\n\t\tbreak;\n\tcase TAG_Zero:\n\t\tc = SW_C3;\n\t\tbreak;\n\tcase TAG_Valid:\n\t\tc = SW_C2;\n\t\tbreak;\n\tcase TAG_Special:\n\t\tswitch (FPU_Special(st0_ptr)) {\n\t\tcase TW_Denormal:\n\t\t\tc = SW_C2 | SW_C3;\t \n\t\t\tbreak;\n\t\tcase TW_NaN:\n\t\t\t \n\t\t\tif ((st0_ptr->sigh & 0x80000000)\n\t\t\t    && (exponent(st0_ptr) == EXP_OVER))\n\t\t\t\tc = SW_C0;\n\t\t\tbreak;\n\t\tcase TW_Infinity:\n\t\t\tc = SW_C2 | SW_C0;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (getsign(st0_ptr) == SIGN_NEG)\n\t\tc |= SW_C1;\n\tsetcc(c);\n}\n\nstatic FUNC_ST0 const fp_etc_table[] = {\n\tfchs, fabs, (FUNC_ST0) FPU_illegal, (FUNC_ST0) FPU_illegal,\n\tftst_, fxam, (FUNC_ST0) FPU_illegal, (FUNC_ST0) FPU_illegal\n};\n\nvoid FPU_etc(void)\n{\n\t(fp_etc_table[FPU_rm]) (&st(0), FPU_gettag0());\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}