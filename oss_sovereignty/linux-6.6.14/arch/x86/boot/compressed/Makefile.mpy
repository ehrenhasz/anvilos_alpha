{
  "module_name": "Makefile",
  "hash_id": "6f61f9f79356d4ccd954604dfddaaae76c989a4dcca98942576cd57402b24f08",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/boot/compressed/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n#\n# linux/arch/x86/boot/compressed/Makefile\n#\n# create a compressed vmlinux image from the original vmlinux\n#\n# vmlinuz is:\n#\tdecompression code (*.o)\n#\tasm globals (piggy.S), including:\n#\t\tvmlinux.bin.(gz|bz2|lzma|...)\n#\n# vmlinux.bin is:\n#\tvmlinux stripped of debugging and comments\n# vmlinux.bin.all is:\n#\tvmlinux.bin + vmlinux.relocs\n# vmlinux.bin.(gz|bz2|lzma|...) is:\n#\t(see scripts/Makefile.lib size_append)\n#\tcompressed vmlinux.bin.all + u32 size of vmlinux.bin.all\n\n# Sanitizer runtimes are unavailable and cannot be linked for early boot code.\nKASAN_SANITIZE\t\t\t:= n\nKCSAN_SANITIZE\t\t\t:= n\nKMSAN_SANITIZE\t\t\t:= n\nOBJECT_FILES_NON_STANDARD\t:= y\n\n# Prevents link failures: __sanitizer_cov_trace_pc() is not linked in.\nKCOV_INSTRUMENT\t\t:= n\n\ntargets := vmlinux vmlinux.bin vmlinux.bin.gz vmlinux.bin.bz2 vmlinux.bin.lzma \\\n\tvmlinux.bin.xz vmlinux.bin.lzo vmlinux.bin.lz4 vmlinux.bin.zst\n\n# CLANG_FLAGS must come before any cc-disable-warning or cc-option calls in\n# case of cross compiling, as it has the '--target=' flag, which is needed to\n# avoid errors with '-march=i386', and future flags may depend on the target to\n# be valid.\nKBUILD_CFLAGS := -m$(BITS) -O2 $(CLANG_FLAGS)\nKBUILD_CFLAGS += -fno-strict-aliasing -fPIE\nKBUILD_CFLAGS += -Wundef\nKBUILD_CFLAGS += -DDISABLE_BRANCH_PROFILING\ncflags-$(CONFIG_X86_32) := -march=i386\ncflags-$(CONFIG_X86_64) := -mcmodel=small -mno-red-zone\nKBUILD_CFLAGS += $(cflags-y)\nKBUILD_CFLAGS += -mno-mmx -mno-sse\nKBUILD_CFLAGS += -ffreestanding -fshort-wchar\nKBUILD_CFLAGS += -fno-stack-protector\nKBUILD_CFLAGS += $(call cc-disable-warning, address-of-packed-member)\nKBUILD_CFLAGS += $(call cc-disable-warning, gnu)\nKBUILD_CFLAGS += -Wno-pointer-sign\nKBUILD_CFLAGS += $(call cc-option,-fmacro-prefix-map=$(srctree)/=)\nKBUILD_CFLAGS += -fno-asynchronous-unwind-tables\nKBUILD_CFLAGS += -D__DISABLE_EXPORTS\n# Disable relocation relaxation in case the link is not PIE.\nKBUILD_CFLAGS += $(call cc-option,-Wa$(comma)-mrelax-relocations=no)\nKBUILD_CFLAGS += -include $(srctree)/include/linux/hidden.h\n\n# sev.c indirectly inludes inat-table.h which is generated during\n# compilation and stored in $(objtree). Add the directory to the includes so\n# that the compiler finds it even with out-of-tree builds (make O=/some/path).\nCFLAGS_sev.o += -I$(objtree)/arch/x86/lib/\n\nKBUILD_AFLAGS  := $(KBUILD_CFLAGS) -D__ASSEMBLY__\nGCOV_PROFILE := n\nUBSAN_SANITIZE :=n\n\nKBUILD_LDFLAGS := -m elf_$(UTS_MACHINE)\nKBUILD_LDFLAGS += $(call ld-option,--no-ld-generated-unwind-info)\n# Compressed kernel should be built as PIE since it may be loaded at any\n# address by the bootloader.\nLDFLAGS_vmlinux := -pie $(call ld-option, --no-dynamic-linker)\nifdef CONFIG_LD_ORPHAN_WARN\nLDFLAGS_vmlinux += --orphan-handling=$(CONFIG_LD_ORPHAN_WARN_LEVEL)\nendif\nLDFLAGS_vmlinux += -z noexecstack\nifeq ($(CONFIG_LD_IS_BFD),y)\nLDFLAGS_vmlinux += $(call ld-option,--no-warn-rwx-segments)\nendif\nifeq ($(CONFIG_EFI_STUB),y)\n# ensure that the static EFI stub library will be pulled in, even if it is\n# never referenced explicitly from the startup code\nLDFLAGS_vmlinux += -u efi_pe_entry\nendif\nLDFLAGS_vmlinux += -T\n\nhostprogs\t:= mkpiggy\nHOST_EXTRACFLAGS += -I$(srctree)/tools/include\n\nsed-voffset := -e 's/^\\([0-9a-fA-F]*\\) [ABCDGRSTVW] \\(_text\\|__bss_start\\|_end\\)$$/\\#define VO_\\2 _AC(0x\\1,UL)/p'\n\nquiet_cmd_voffset = VOFFSET $@\n      cmd_voffset = $(NM) $< | sed -n $(sed-voffset) > $@\n\ntargets += ../voffset.h\n\n$(obj)/../voffset.h: vmlinux FORCE\n\t$(call if_changed,voffset)\n\n$(obj)/misc.o: $(obj)/../voffset.h\n\nvmlinux-objs-y := $(obj)/vmlinux.lds $(obj)/kernel_info.o $(obj)/head_$(BITS).o \\\n\t$(obj)/misc.o $(obj)/string.o $(obj)/cmdline.o $(obj)/error.o \\\n\t$(obj)/piggy.o $(obj)/cpuflags.o\n\nvmlinux-objs-$(CONFIG_EARLY_PRINTK) += $(obj)/early_serial_console.o\nvmlinux-objs-$(CONFIG_RANDOMIZE_BASE) += $(obj)/kaslr.o\nifdef CONFIG_X86_64\n\tvmlinux-objs-y += $(obj)/ident_map_64.o\n\tvmlinux-objs-y += $(obj)/idt_64.o $(obj)/idt_handlers_64.o\n\tvmlinux-objs-$(CONFIG_AMD_MEM_ENCRYPT) += $(obj)/mem_encrypt.o\n\tvmlinux-objs-y += $(obj)/pgtable_64.o\n\tvmlinux-objs-$(CONFIG_AMD_MEM_ENCRYPT) += $(obj)/sev.o\nendif\n\nvmlinux-objs-$(CONFIG_ACPI) += $(obj)/acpi.o\nvmlinux-objs-$(CONFIG_INTEL_TDX_GUEST) += $(obj)/tdx.o $(obj)/tdcall.o $(obj)/tdx-shared.o\nvmlinux-objs-$(CONFIG_UNACCEPTED_MEMORY) += $(obj)/mem.o\n\nvmlinux-objs-$(CONFIG_EFI) += $(obj)/efi.o\nvmlinux-objs-$(CONFIG_EFI_MIXED) += $(obj)/efi_mixed.o\nvmlinux-objs-$(CONFIG_EFI_STUB) += $(objtree)/drivers/firmware/efi/libstub/lib.a\n\n$(obj)/vmlinux: $(vmlinux-objs-y) FORCE\n\t$(call if_changed,ld)\n\nOBJCOPYFLAGS_vmlinux.bin :=  -R .comment -S\n$(obj)/vmlinux.bin: vmlinux FORCE\n\t$(call if_changed,objcopy)\n\ntargets += $(patsubst $(obj)/%,%,$(vmlinux-objs-y)) vmlinux.bin.all vmlinux.relocs\n\n# vmlinux.relocs is created by the vmlinux postlink step.\n$(obj)/vmlinux.relocs: vmlinux\n\t@true\n\nvmlinux.bin.all-y := $(obj)/vmlinux.bin\nvmlinux.bin.all-$(CONFIG_X86_NEED_RELOCS) += $(obj)/vmlinux.relocs\n\n$(obj)/vmlinux.bin.gz: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,gzip)\n$(obj)/vmlinux.bin.bz2: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,bzip2_with_size)\n$(obj)/vmlinux.bin.lzma: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,lzma_with_size)\n$(obj)/vmlinux.bin.xz: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,xzkern_with_size)\n$(obj)/vmlinux.bin.lzo: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,lzo_with_size)\n$(obj)/vmlinux.bin.lz4: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,lz4_with_size)\n$(obj)/vmlinux.bin.zst: $(vmlinux.bin.all-y) FORCE\n\t$(call if_changed,zstd22_with_size)\n\nsuffix-$(CONFIG_KERNEL_GZIP)\t:= gz\nsuffix-$(CONFIG_KERNEL_BZIP2)\t:= bz2\nsuffix-$(CONFIG_KERNEL_LZMA)\t:= lzma\nsuffix-$(CONFIG_KERNEL_XZ)\t:= xz\nsuffix-$(CONFIG_KERNEL_LZO) \t:= lzo\nsuffix-$(CONFIG_KERNEL_LZ4) \t:= lz4\nsuffix-$(CONFIG_KERNEL_ZSTD)\t:= zst\n\nquiet_cmd_mkpiggy = MKPIGGY $@\n      cmd_mkpiggy = $(obj)/mkpiggy $< > $@\n\ntargets += piggy.S\n$(obj)/piggy.S: $(obj)/vmlinux.bin.$(suffix-y) $(obj)/mkpiggy FORCE\n\t$(call if_changed,mkpiggy)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}