{
  "module_name": "physaddr.c",
  "hash_id": "9f2dbea6ec2e866bdf97ed7ebcc563074e2d162159a050665bbb5f6c3d75ae7c",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/mm/physaddr.c",
  "human_readable_source": "\n#include <linux/memblock.h>\n#include <linux/mmdebug.h>\n#include <linux/export.h>\n#include <linux/mm.h>\n\n#include <asm/page.h>\n#include <linux/vmalloc.h>\n\n#include \"physaddr.h\"\n\n#ifdef CONFIG_X86_64\n\n#ifdef CONFIG_DEBUG_VIRTUAL\nunsigned long __phys_addr(unsigned long x)\n{\n\tunsigned long y = x - __START_KERNEL_map;\n\n\t \n\tif (unlikely(x > y)) {\n\t\tx = y + phys_base;\n\n\t\tVIRTUAL_BUG_ON(y >= KERNEL_IMAGE_SIZE);\n\t} else {\n\t\tx = y + (__START_KERNEL_map - PAGE_OFFSET);\n\n\t\t \n\t\tVIRTUAL_BUG_ON((x > y) || !phys_addr_valid(x));\n\t}\n\n\treturn x;\n}\nEXPORT_SYMBOL(__phys_addr);\n\nunsigned long __phys_addr_symbol(unsigned long x)\n{\n\tunsigned long y = x - __START_KERNEL_map;\n\n\t \n\tVIRTUAL_BUG_ON(y >= KERNEL_IMAGE_SIZE);\n\n\treturn y + phys_base;\n}\nEXPORT_SYMBOL(__phys_addr_symbol);\n#endif\n\nbool __virt_addr_valid(unsigned long x)\n{\n\tunsigned long y = x - __START_KERNEL_map;\n\n\t \n\tif (unlikely(x > y)) {\n\t\tx = y + phys_base;\n\n\t\tif (y >= KERNEL_IMAGE_SIZE)\n\t\t\treturn false;\n\t} else {\n\t\tx = y + (__START_KERNEL_map - PAGE_OFFSET);\n\n\t\t \n\t\tif ((x > y) || !phys_addr_valid(x))\n\t\t\treturn false;\n\t}\n\n\treturn pfn_valid(x >> PAGE_SHIFT);\n}\nEXPORT_SYMBOL(__virt_addr_valid);\n\n#else\n\n#ifdef CONFIG_DEBUG_VIRTUAL\nunsigned long __phys_addr(unsigned long x)\n{\n\tunsigned long phys_addr = x - PAGE_OFFSET;\n\t \n\tVIRTUAL_BUG_ON(x < PAGE_OFFSET);\n\tVIRTUAL_BUG_ON(__vmalloc_start_set && is_vmalloc_addr((void *) x));\n\t \n\tif (max_low_pfn) {\n\t\tVIRTUAL_BUG_ON((phys_addr >> PAGE_SHIFT) > max_low_pfn);\n\t\tBUG_ON(slow_virt_to_phys((void *)x) != phys_addr);\n\t}\n\treturn phys_addr;\n}\nEXPORT_SYMBOL(__phys_addr);\n#endif\n\nbool __virt_addr_valid(unsigned long x)\n{\n\tif (x < PAGE_OFFSET)\n\t\treturn false;\n\tif (__vmalloc_start_set && is_vmalloc_addr((void *) x))\n\t\treturn false;\n\tif (x >= FIXADDR_START)\n\t\treturn false;\n\treturn pfn_valid((x - PAGE_OFFSET) >> PAGE_SHIFT);\n}\nEXPORT_SYMBOL(__virt_addr_valid);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}