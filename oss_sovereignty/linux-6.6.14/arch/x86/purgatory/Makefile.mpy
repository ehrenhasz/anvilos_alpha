{
  "module_name": "Makefile",
  "hash_id": "b3e10e959033d1b602c057f346c7375d708afebe5588886d8e15f3bccc46c1b7",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/purgatory/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\nOBJECT_FILES_NON_STANDARD := y\n\npurgatory-y := purgatory.o stack.o setup-x86_$(BITS).o sha256.o entry64.o string.o\n\ntargets += $(purgatory-y)\nPURGATORY_OBJS = $(addprefix $(obj)/,$(purgatory-y))\n\n$(obj)/string.o: $(srctree)/arch/x86/boot/compressed/string.c FORCE\n\t$(call if_changed_rule,cc_o_c)\n\n$(obj)/sha256.o: $(srctree)/lib/crypto/sha256.c FORCE\n\t$(call if_changed_rule,cc_o_c)\n\nCFLAGS_sha256.o := -D__DISABLE_EXPORTS -D__NO_FORTIFY\n\n# When profile-guided optimization is enabled, llvm emits two different\n# overlapping text sections, which is not supported by kexec. Remove profile\n# optimization flags.\nKBUILD_CFLAGS := $(filter-out -fprofile-sample-use=% -fprofile-use=%,$(KBUILD_CFLAGS))\n\n# When LTO is enabled, llvm emits many text sections, which is not supported\n# by kexec. Remove -flto=* flags.\nKBUILD_CFLAGS := $(filter-out $(CC_FLAGS_LTO),$(KBUILD_CFLAGS))\n\n# When linking purgatory.ro with -r unresolved symbols are not checked,\n# also link a purgatory.chk binary without -r to check for unresolved symbols.\nPURGATORY_LDFLAGS := -e purgatory_start -z nodefaultlib\nLDFLAGS_purgatory.ro := -r $(PURGATORY_LDFLAGS)\nLDFLAGS_purgatory.chk := $(PURGATORY_LDFLAGS)\ntargets += purgatory.ro purgatory.chk\n\n# Sanitizer, etc. runtimes are unavailable and cannot be linked here.\nGCOV_PROFILE\t:= n\nKASAN_SANITIZE\t:= n\nUBSAN_SANITIZE\t:= n\nKCSAN_SANITIZE\t:= n\nKMSAN_SANITIZE\t:= n\nKCOV_INSTRUMENT := n\n\n# These are adjustments to the compiler flags used for objects that\n# make up the standalone purgatory.ro\n\nPURGATORY_CFLAGS_REMOVE := -mcmodel=kernel\nPURGATORY_CFLAGS := -mcmodel=large -ffreestanding -fno-zero-initialized-in-bss -g0\nPURGATORY_CFLAGS += $(DISABLE_STACKLEAK_PLUGIN) -DDISABLE_BRANCH_PROFILING\nPURGATORY_CFLAGS += -fno-stack-protector\n\n# Default KBUILD_CFLAGS can have -pg option set when FTRACE is enabled. That\n# in turn leaves some undefined symbols like __fentry__ in purgatory and not\n# sure how to relocate those.\nifdef CONFIG_FUNCTION_TRACER\nPURGATORY_CFLAGS_REMOVE\t\t+= $(CC_FLAGS_FTRACE)\nendif\n\nifdef CONFIG_STACKPROTECTOR\nPURGATORY_CFLAGS_REMOVE\t\t+= -fstack-protector\nendif\n\nifdef CONFIG_STACKPROTECTOR_STRONG\nPURGATORY_CFLAGS_REMOVE\t\t+= -fstack-protector-strong\nendif\n\nifdef CONFIG_RETPOLINE\nPURGATORY_CFLAGS_REMOVE\t\t+= $(RETPOLINE_CFLAGS)\nendif\n\nifdef CONFIG_CFI_CLANG\nPURGATORY_CFLAGS_REMOVE\t\t+= $(CC_FLAGS_CFI)\nendif\n\nCFLAGS_REMOVE_purgatory.o\t+= $(PURGATORY_CFLAGS_REMOVE)\nCFLAGS_purgatory.o\t\t+= $(PURGATORY_CFLAGS)\n\nCFLAGS_REMOVE_sha256.o\t\t+= $(PURGATORY_CFLAGS_REMOVE)\nCFLAGS_sha256.o\t\t\t+= $(PURGATORY_CFLAGS)\n\nCFLAGS_REMOVE_string.o\t\t+= $(PURGATORY_CFLAGS_REMOVE)\nCFLAGS_string.o\t\t\t+= $(PURGATORY_CFLAGS)\n\nasflags-remove-y\t\t+= $(foreach x, -g -gdwarf-4 -gdwarf-5, $(x) -Wa,$(x))\n\n$(obj)/purgatory.ro: $(PURGATORY_OBJS) FORCE\n\t\t$(call if_changed,ld)\n\n$(obj)/purgatory.chk: $(obj)/purgatory.ro FORCE\n\t\t$(call if_changed,ld)\n\n$(obj)/kexec-purgatory.o: $(obj)/purgatory.ro $(obj)/purgatory.chk\n\nobj-y += kexec-purgatory.o\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}