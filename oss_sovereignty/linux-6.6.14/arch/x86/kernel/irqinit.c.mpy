{
  "module_name": "irqinit.c",
  "hash_id": "b611ecb6ddf7be1768a158526a14c69af21bafff1ec0421efa7b6c4eb4e792c9",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/irqinit.c",
  "human_readable_source": "\n#include <linux/linkage.h>\n#include <linux/errno.h>\n#include <linux/signal.h>\n#include <linux/sched.h>\n#include <linux/ioport.h>\n#include <linux/interrupt.h>\n#include <linux/irq.h>\n#include <linux/timex.h>\n#include <linux/random.h>\n#include <linux/kprobes.h>\n#include <linux/init.h>\n#include <linux/kernel_stat.h>\n#include <linux/device.h>\n#include <linux/bitops.h>\n#include <linux/acpi.h>\n#include <linux/io.h>\n#include <linux/delay.h>\n#include <linux/pgtable.h>\n\n#include <linux/atomic.h>\n#include <asm/timer.h>\n#include <asm/hw_irq.h>\n#include <asm/desc.h>\n#include <asm/io_apic.h>\n#include <asm/acpi.h>\n#include <asm/apic.h>\n#include <asm/setup.h>\n#include <asm/i8259.h>\n#include <asm/traps.h>\n#include <asm/prom.h>\n\n \n\n \n\nDEFINE_PER_CPU(vector_irq_t, vector_irq) = {\n\t[0 ... NR_VECTORS - 1] = VECTOR_UNUSED,\n};\n\nvoid __init init_ISA_irqs(void)\n{\n\tstruct irq_chip *chip = legacy_pic->chip;\n\tint i;\n\n\t \n\tinit_bsp_APIC();\n\n\tlegacy_pic->init(0);\n\n\tfor (i = 0; i < nr_legacy_irqs(); i++) {\n\t\tirq_set_chip_and_handler(i, chip, handle_level_irq);\n\t\tirq_set_status_flags(i, IRQ_LEVEL);\n\t}\n}\n\nvoid __init init_IRQ(void)\n{\n\tint i;\n\n\t \n\tfor (i = 0; i < nr_legacy_irqs(); i++)\n\t\tper_cpu(vector_irq, 0)[ISA_IRQ_VECTOR(i)] = irq_to_desc(i);\n\n\tBUG_ON(irq_init_percpu_irqstack(smp_processor_id()));\n\n\tx86_init.irqs.intr_init();\n}\n\nvoid __init native_init_IRQ(void)\n{\n\t \n\tx86_init.irqs.pre_vector_init();\n\n\tidt_setup_apic_and_irq_gates();\n\tlapic_assign_system_vectors();\n\n\tif (!acpi_ioapic && !of_ioapic && nr_legacy_irqs()) {\n\t\t \n\t\tif (request_irq(2, no_action, IRQF_NO_THREAD, \"cascade\", NULL))\n\t\t\tpr_err(\"%s: request_irq() failed\\n\", \"cascade\");\n\t}\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}