{
  "module_name": "init.c",
  "hash_id": "6fcc9a7b94601b28411331375b66c1c93caabb6cd1792ebebaa23fb9d0096760",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/apic/init.c",
  "human_readable_source": "\n#define pr_fmt(fmt) \"APIC: \" fmt\n\n#include <asm/apic.h>\n\n#include \"local.h\"\n\n \n#define DEFINE_APIC_CALL(__cb)\t\t\t\t\t\t\\\n\tDEFINE_STATIC_CALL_NULL(apic_call_##__cb, *apic->__cb)\n\nDEFINE_APIC_CALL(eoi);\nDEFINE_APIC_CALL(native_eoi);\nDEFINE_APIC_CALL(icr_read);\nDEFINE_APIC_CALL(icr_write);\nDEFINE_APIC_CALL(read);\nDEFINE_APIC_CALL(send_IPI);\nDEFINE_APIC_CALL(send_IPI_mask);\nDEFINE_APIC_CALL(send_IPI_mask_allbutself);\nDEFINE_APIC_CALL(send_IPI_allbutself);\nDEFINE_APIC_CALL(send_IPI_all);\nDEFINE_APIC_CALL(send_IPI_self);\nDEFINE_APIC_CALL(wait_icr_idle);\nDEFINE_APIC_CALL(wakeup_secondary_cpu);\nDEFINE_APIC_CALL(wakeup_secondary_cpu_64);\nDEFINE_APIC_CALL(write);\n\nEXPORT_STATIC_CALL_TRAMP_GPL(apic_call_send_IPI_mask);\nEXPORT_STATIC_CALL_TRAMP_GPL(apic_call_send_IPI_self);\n\n \nstruct apic_override __x86_apic_override __initdata;\n\n#define apply_override(__cb)\t\t\t\t\t\\\n\tif (__x86_apic_override.__cb)\t\t\t\t\\\n\t\tapic->__cb = __x86_apic_override.__cb\n\nstatic __init void restore_override_callbacks(void)\n{\n\tapply_override(eoi);\n\tapply_override(native_eoi);\n\tapply_override(write);\n\tapply_override(read);\n\tapply_override(send_IPI);\n\tapply_override(send_IPI_mask);\n\tapply_override(send_IPI_mask_allbutself);\n\tapply_override(send_IPI_allbutself);\n\tapply_override(send_IPI_all);\n\tapply_override(send_IPI_self);\n\tapply_override(icr_read);\n\tapply_override(icr_write);\n\tapply_override(wakeup_secondary_cpu);\n\tapply_override(wakeup_secondary_cpu_64);\n}\n\n#define update_call(__cb)\t\t\t\t\t\\\n\tstatic_call_update(apic_call_##__cb, *apic->__cb)\n\nstatic __init void update_static_calls(void)\n{\n\tupdate_call(eoi);\n\tupdate_call(native_eoi);\n\tupdate_call(write);\n\tupdate_call(read);\n\tupdate_call(send_IPI);\n\tupdate_call(send_IPI_mask);\n\tupdate_call(send_IPI_mask_allbutself);\n\tupdate_call(send_IPI_allbutself);\n\tupdate_call(send_IPI_all);\n\tupdate_call(send_IPI_self);\n\tupdate_call(icr_read);\n\tupdate_call(icr_write);\n\tupdate_call(wait_icr_idle);\n\tupdate_call(wakeup_secondary_cpu);\n\tupdate_call(wakeup_secondary_cpu_64);\n}\n\nvoid __init apic_setup_apic_calls(void)\n{\n\t \n\tapic->native_eoi = apic->eoi;\n\tupdate_static_calls();\n\tpr_info(\"Static calls initialized\\n\");\n}\n\nvoid __init apic_install_driver(struct apic *driver)\n{\n\tif (apic == driver)\n\t\treturn;\n\n\tapic = driver;\n\n\tif (IS_ENABLED(CONFIG_X86_X2APIC) && apic->x2apic_set_max_apicid)\n\t\tapic->max_apic_id = x2apic_max_apicid;\n\n\t \n\tif (!apic->native_eoi)\n\t\tapic->native_eoi = apic->eoi;\n\n\t \n\trestore_override_callbacks();\n\tupdate_static_calls();\n\n\tpr_info(\"Switched APIC routing to: %s\\n\", driver->name);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}