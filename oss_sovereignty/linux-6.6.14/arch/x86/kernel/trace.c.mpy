{
  "module_name": "trace.c",
  "hash_id": "708a857e30a08a8bf8265f8dd0fd3685dac796feb05c20c610abf668c5619db4",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/trace.c",
  "human_readable_source": "#include <asm/trace/irq_vectors.h>\n#include <linux/trace.h>\n\n#if defined(CONFIG_OSNOISE_TRACER) && defined(CONFIG_X86_LOCAL_APIC)\n \nstatic void trace_intel_irq_entry(void *data, int vector)\n{\n\tosnoise_trace_irq_entry(vector);\n}\n\n \nstatic void trace_intel_irq_exit(void *data, int vector)\n{\n\tchar *vector_desc = (char *) data;\n\n\tosnoise_trace_irq_exit(vector, vector_desc);\n}\n\n \nint osnoise_arch_register(void)\n{\n\tint ret;\n\n\tret = register_trace_local_timer_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_err;\n\n\tret = register_trace_local_timer_exit(trace_intel_irq_exit, \"local_timer\");\n\tif (ret)\n\t\tgoto out_timer_entry;\n\n#ifdef CONFIG_X86_THERMAL_VECTOR\n\tret = register_trace_thermal_apic_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_timer_exit;\n\n\tret = register_trace_thermal_apic_exit(trace_intel_irq_exit, \"thermal_apic\");\n\tif (ret)\n\t\tgoto out_thermal_entry;\n#endif  \n\n#ifdef CONFIG_X86_MCE_AMD\n\tret = register_trace_deferred_error_apic_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_thermal_exit;\n\n\tret = register_trace_deferred_error_apic_exit(trace_intel_irq_exit, \"deferred_error\");\n\tif (ret)\n\t\tgoto out_deferred_entry;\n#endif\n\n#ifdef CONFIG_X86_MCE_THRESHOLD\n\tret = register_trace_threshold_apic_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_deferred_exit;\n\n\tret = register_trace_threshold_apic_exit(trace_intel_irq_exit, \"threshold_apic\");\n\tif (ret)\n\t\tgoto out_threshold_entry;\n#endif  \n\n#ifdef CONFIG_SMP\n\tret = register_trace_call_function_single_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_threshold_exit;\n\n\tret = register_trace_call_function_single_exit(trace_intel_irq_exit,\n\t\t\t\t\t\t       \"call_function_single\");\n\tif (ret)\n\t\tgoto out_call_function_single_entry;\n\n\tret = register_trace_call_function_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_call_function_single_exit;\n\n\tret = register_trace_call_function_exit(trace_intel_irq_exit, \"call_function\");\n\tif (ret)\n\t\tgoto out_call_function_entry;\n\n\tret = register_trace_reschedule_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_call_function_exit;\n\n\tret = register_trace_reschedule_exit(trace_intel_irq_exit, \"reschedule\");\n\tif (ret)\n\t\tgoto out_reschedule_entry;\n#endif  \n\n#ifdef CONFIG_IRQ_WORK\n\tret = register_trace_irq_work_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_reschedule_exit;\n\n\tret = register_trace_irq_work_exit(trace_intel_irq_exit, \"irq_work\");\n\tif (ret)\n\t\tgoto out_irq_work_entry;\n#endif\n\n\tret = register_trace_x86_platform_ipi_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_irq_work_exit;\n\n\tret = register_trace_x86_platform_ipi_exit(trace_intel_irq_exit, \"x86_platform_ipi\");\n\tif (ret)\n\t\tgoto out_x86_ipi_entry;\n\n\tret = register_trace_error_apic_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_x86_ipi_exit;\n\n\tret = register_trace_error_apic_exit(trace_intel_irq_exit, \"error_apic\");\n\tif (ret)\n\t\tgoto out_error_apic_entry;\n\n\tret = register_trace_spurious_apic_entry(trace_intel_irq_entry, NULL);\n\tif (ret)\n\t\tgoto out_error_apic_exit;\n\n\tret = register_trace_spurious_apic_exit(trace_intel_irq_exit, \"spurious_apic\");\n\tif (ret)\n\t\tgoto out_spurious_apic_entry;\n\n\treturn 0;\n\nout_spurious_apic_entry:\n\tunregister_trace_spurious_apic_entry(trace_intel_irq_entry, NULL);\nout_error_apic_exit:\n\tunregister_trace_error_apic_exit(trace_intel_irq_exit, \"error_apic\");\nout_error_apic_entry:\n\tunregister_trace_error_apic_entry(trace_intel_irq_entry, NULL);\nout_x86_ipi_exit:\n\tunregister_trace_x86_platform_ipi_exit(trace_intel_irq_exit, \"x86_platform_ipi\");\nout_x86_ipi_entry:\n\tunregister_trace_x86_platform_ipi_entry(trace_intel_irq_entry, NULL);\nout_irq_work_exit:\n\n#ifdef CONFIG_IRQ_WORK\n\tunregister_trace_irq_work_exit(trace_intel_irq_exit, \"irq_work\");\nout_irq_work_entry:\n\tunregister_trace_irq_work_entry(trace_intel_irq_entry, NULL);\nout_reschedule_exit:\n#endif\n\n#ifdef CONFIG_SMP\n\tunregister_trace_reschedule_exit(trace_intel_irq_exit, \"reschedule\");\nout_reschedule_entry:\n\tunregister_trace_reschedule_entry(trace_intel_irq_entry, NULL);\nout_call_function_exit:\n\tunregister_trace_call_function_exit(trace_intel_irq_exit, \"call_function\");\nout_call_function_entry:\n\tunregister_trace_call_function_entry(trace_intel_irq_entry, NULL);\nout_call_function_single_exit:\n\tunregister_trace_call_function_single_exit(trace_intel_irq_exit, \"call_function_single\");\nout_call_function_single_entry:\n\tunregister_trace_call_function_single_entry(trace_intel_irq_entry, NULL);\nout_threshold_exit:\n#endif\n\n#ifdef CONFIG_X86_MCE_THRESHOLD\n\tunregister_trace_threshold_apic_exit(trace_intel_irq_exit, \"threshold_apic\");\nout_threshold_entry:\n\tunregister_trace_threshold_apic_entry(trace_intel_irq_entry, NULL);\nout_deferred_exit:\n#endif\n\n#ifdef CONFIG_X86_MCE_AMD\n\tunregister_trace_deferred_error_apic_exit(trace_intel_irq_exit, \"deferred_error\");\nout_deferred_entry:\n\tunregister_trace_deferred_error_apic_entry(trace_intel_irq_entry, NULL);\nout_thermal_exit:\n#endif  \n\n#ifdef CONFIG_X86_THERMAL_VECTOR\n\tunregister_trace_thermal_apic_exit(trace_intel_irq_exit, \"thermal_apic\");\nout_thermal_entry:\n\tunregister_trace_thermal_apic_entry(trace_intel_irq_entry, NULL);\nout_timer_exit:\n#endif  \n\n\tunregister_trace_local_timer_exit(trace_intel_irq_exit, \"local_timer\");\nout_timer_entry:\n\tunregister_trace_local_timer_entry(trace_intel_irq_entry, NULL);\nout_err:\n\treturn -EINVAL;\n}\n\nvoid osnoise_arch_unregister(void)\n{\n\tunregister_trace_spurious_apic_exit(trace_intel_irq_exit, \"spurious_apic\");\n\tunregister_trace_spurious_apic_entry(trace_intel_irq_entry, NULL);\n\tunregister_trace_error_apic_exit(trace_intel_irq_exit, \"error_apic\");\n\tunregister_trace_error_apic_entry(trace_intel_irq_entry, NULL);\n\tunregister_trace_x86_platform_ipi_exit(trace_intel_irq_exit, \"x86_platform_ipi\");\n\tunregister_trace_x86_platform_ipi_entry(trace_intel_irq_entry, NULL);\n\n#ifdef CONFIG_IRQ_WORK\n\tunregister_trace_irq_work_exit(trace_intel_irq_exit, \"irq_work\");\n\tunregister_trace_irq_work_entry(trace_intel_irq_entry, NULL);\n#endif\n\n#ifdef CONFIG_SMP\n\tunregister_trace_reschedule_exit(trace_intel_irq_exit, \"reschedule\");\n\tunregister_trace_reschedule_entry(trace_intel_irq_entry, NULL);\n\tunregister_trace_call_function_exit(trace_intel_irq_exit, \"call_function\");\n\tunregister_trace_call_function_entry(trace_intel_irq_entry, NULL);\n\tunregister_trace_call_function_single_exit(trace_intel_irq_exit, \"call_function_single\");\n\tunregister_trace_call_function_single_entry(trace_intel_irq_entry, NULL);\n#endif\n\n#ifdef CONFIG_X86_MCE_THRESHOLD\n\tunregister_trace_threshold_apic_exit(trace_intel_irq_exit, \"threshold_apic\");\n\tunregister_trace_threshold_apic_entry(trace_intel_irq_entry, NULL);\n#endif\n\n#ifdef CONFIG_X86_MCE_AMD\n\tunregister_trace_deferred_error_apic_exit(trace_intel_irq_exit, \"deferred_error\");\n\tunregister_trace_deferred_error_apic_entry(trace_intel_irq_entry, NULL);\n#endif\n\n#ifdef CONFIG_X86_THERMAL_VECTOR\n\tunregister_trace_thermal_apic_exit(trace_intel_irq_exit, \"thermal_apic\");\n\tunregister_trace_thermal_apic_entry(trace_intel_irq_entry, NULL);\n#endif  \n\n\tunregister_trace_local_timer_exit(trace_intel_irq_exit, \"local_timer\");\n\tunregister_trace_local_timer_entry(trace_intel_irq_entry, NULL);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}