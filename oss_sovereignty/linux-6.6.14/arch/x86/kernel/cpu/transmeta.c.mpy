{
  "module_name": "transmeta.c",
  "hash_id": "56441d2c29cded17cc07484c41ad554dc746ac9387ff5c63d30c52308a82fbc0",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/cpu/transmeta.c",
  "human_readable_source": "\n#include <linux/kernel.h>\n#include <linux/sched.h>\n#include <linux/sched/clock.h>\n#include <linux/mm.h>\n#include <asm/cpufeature.h>\n#include <asm/msr.h>\n#include \"cpu.h\"\n\nstatic void early_init_transmeta(struct cpuinfo_x86 *c)\n{\n\tu32 xlvl;\n\n\t \n\txlvl = cpuid_eax(0x80860000);\n\tif ((xlvl & 0xffff0000) == 0x80860000) {\n\t\tif (xlvl >= 0x80860001)\n\t\t\tc->x86_capability[CPUID_8086_0001_EDX] = cpuid_edx(0x80860001);\n\t}\n}\n\nstatic void init_transmeta(struct cpuinfo_x86 *c)\n{\n\tunsigned int cap_mask, uk, max, dummy;\n\tunsigned int cms_rev1, cms_rev2;\n\tunsigned int cpu_rev, cpu_freq = 0, cpu_flags, new_cpu_rev;\n\tchar cpu_info[65];\n\n\tearly_init_transmeta(c);\n\n\tcpu_detect_cache_sizes(c);\n\n\t \n\tmax = cpuid_eax(0x80860000);\n\tcpu_rev = 0;\n\tif (max >= 0x80860001) {\n\t\tcpuid(0x80860001, &dummy, &cpu_rev, &cpu_freq, &cpu_flags);\n\t\tif (cpu_rev != 0x02000000) {\n\t\t\tpr_info(\"CPU: Processor revision %u.%u.%u.%u, %u MHz\\n\",\n\t\t\t\t(cpu_rev >> 24) & 0xff,\n\t\t\t\t(cpu_rev >> 16) & 0xff,\n\t\t\t\t(cpu_rev >> 8) & 0xff,\n\t\t\t\tcpu_rev & 0xff,\n\t\t\t\tcpu_freq);\n\t\t}\n\t}\n\tif (max >= 0x80860002) {\n\t\tcpuid(0x80860002, &new_cpu_rev, &cms_rev1, &cms_rev2, &dummy);\n\t\tif (cpu_rev == 0x02000000) {\n\t\t\tpr_info(\"CPU: Processor revision %08X, %u MHz\\n\",\n\t\t\t\tnew_cpu_rev, cpu_freq);\n\t\t}\n\t\tpr_info(\"CPU: Code Morphing Software revision %u.%u.%u-%u-%u\\n\",\n\t\t       (cms_rev1 >> 24) & 0xff,\n\t\t       (cms_rev1 >> 16) & 0xff,\n\t\t       (cms_rev1 >> 8) & 0xff,\n\t\t       cms_rev1 & 0xff,\n\t\t       cms_rev2);\n\t}\n\tif (max >= 0x80860006) {\n\t\tcpuid(0x80860003,\n\t\t      (void *)&cpu_info[0],\n\t\t      (void *)&cpu_info[4],\n\t\t      (void *)&cpu_info[8],\n\t\t      (void *)&cpu_info[12]);\n\t\tcpuid(0x80860004,\n\t\t      (void *)&cpu_info[16],\n\t\t      (void *)&cpu_info[20],\n\t\t      (void *)&cpu_info[24],\n\t\t      (void *)&cpu_info[28]);\n\t\tcpuid(0x80860005,\n\t\t      (void *)&cpu_info[32],\n\t\t      (void *)&cpu_info[36],\n\t\t      (void *)&cpu_info[40],\n\t\t      (void *)&cpu_info[44]);\n\t\tcpuid(0x80860006,\n\t\t      (void *)&cpu_info[48],\n\t\t      (void *)&cpu_info[52],\n\t\t      (void *)&cpu_info[56],\n\t\t      (void *)&cpu_info[60]);\n\t\tcpu_info[64] = '\\0';\n\t\tpr_info(\"CPU: %s\\n\", cpu_info);\n\t}\n\n\t \n\trdmsr(0x80860004, cap_mask, uk);\n\twrmsr(0x80860004, ~0, uk);\n\tc->x86_capability[CPUID_1_EDX] = cpuid_edx(0x00000001);\n\twrmsr(0x80860004, cap_mask, uk);\n\n\t \n\tset_cpu_cap(c, X86_FEATURE_CONSTANT_TSC);\n\n#ifdef CONFIG_SYSCTL\n\t \n\trandomize_va_space = 0;\n#endif\n}\n\nstatic const struct cpu_dev transmeta_cpu_dev = {\n\t.c_vendor\t= \"Transmeta\",\n\t.c_ident\t= { \"GenuineTMx86\", \"TransmetaCPU\" },\n\t.c_early_init\t= early_init_transmeta,\n\t.c_init\t\t= init_transmeta,\n\t.c_x86_vendor\t= X86_VENDOR_TRANSMETA,\n};\n\ncpu_dev_register(transmeta_cpu_dev);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}