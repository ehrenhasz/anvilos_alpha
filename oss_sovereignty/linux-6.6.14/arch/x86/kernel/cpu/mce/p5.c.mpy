{
  "module_name": "p5.c",
  "hash_id": "7dbf9b19762240c3265cd7b5f64e1981adbd3bff1255603c02ee107fdd039574",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/cpu/mce/p5.c",
  "human_readable_source": "\n \n#include <linux/interrupt.h>\n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/smp.h>\n#include <linux/hardirq.h>\n\n#include <asm/processor.h>\n#include <asm/traps.h>\n#include <asm/tlbflush.h>\n#include <asm/mce.h>\n#include <asm/msr.h>\n\n#include \"internal.h\"\n\n \nint mce_p5_enabled __read_mostly;\n\n \nnoinstr void pentium_machine_check(struct pt_regs *regs)\n{\n\tu32 loaddr, hi, lotype;\n\n\tinstrumentation_begin();\n\trdmsr(MSR_IA32_P5_MC_ADDR, loaddr, hi);\n\trdmsr(MSR_IA32_P5_MC_TYPE, lotype, hi);\n\n\tpr_emerg(\"CPU#%d: Machine Check Exception:  0x%8X (type 0x%8X).\\n\",\n\t\t smp_processor_id(), loaddr, lotype);\n\n\tif (lotype & (1<<5)) {\n\t\tpr_emerg(\"CPU#%d: Possible thermal failure (CPU on fire ?).\\n\",\n\t\t\t smp_processor_id());\n\t}\n\n\tadd_taint(TAINT_MACHINE_CHECK, LOCKDEP_NOW_UNRELIABLE);\n\tinstrumentation_end();\n}\n\n \nvoid intel_p5_mcheck_init(struct cpuinfo_x86 *c)\n{\n\tu32 l, h;\n\n\t \n\tif (!mce_p5_enabled)\n\t\treturn;\n\n\t \n\tif (!cpu_has(c, X86_FEATURE_MCE))\n\t\treturn;\n\n\t \n\trdmsr(MSR_IA32_P5_MC_ADDR, l, h);\n\trdmsr(MSR_IA32_P5_MC_TYPE, l, h);\n\tpr_info(\"Intel old style machine check architecture supported.\\n\");\n\n\t \n\tcr4_set_bits(X86_CR4_MCE);\n\tpr_info(\"Intel old style machine check reporting enabled on CPU#%d.\\n\",\n\t\tsmp_processor_id());\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}