{
  "module_name": "reboot_fixups_32.c",
  "hash_id": "b5d4af52effd3762965ab4395b65b1eea2eb2f6afb69ccef0bc7398a297795c9",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kernel/reboot_fixups_32.c",
  "human_readable_source": "\n \n\n#include <asm/delay.h>\n#include <linux/pci.h>\n#include <linux/interrupt.h>\n#include <asm/reboot_fixups.h>\n#include <asm/msr.h>\n#include <linux/cs5535.h>\n\nstatic void cs5530a_warm_reset(struct pci_dev *dev)\n{\n\t \n\tpci_write_config_byte(dev, 0x44, 0x1);\n\tudelay(50);  \n\treturn;\n}\n\nstatic void cs5536_warm_reset(struct pci_dev *dev)\n{\n\t \n\twrmsrl(MSR_DIVIL_SOFT_RESET, 1ULL);\n\tudelay(50);  \n}\n\nstatic void rdc321x_reset(struct pci_dev *dev)\n{\n\tunsigned i;\n\t \n\toutl(0x80003840, 0xCF8);\n\t \n\ti = inl(0xCFC);\n\t \n\ti |= 0x1600;\n\toutl(i, 0xCFC);\n\toutb(1, 0x92);\n}\n\nstatic void ce4100_reset(struct pci_dev *dev)\n{\n\tint i;\n\n\tfor (i = 0; i < 10; i++) {\n\t\toutb(0x2, 0xcf9);\n\t\tudelay(50);\n\t}\n}\n\nstruct device_fixup {\n\tunsigned int vendor;\n\tunsigned int device;\n\tvoid (*reboot_fixup)(struct pci_dev *);\n};\n\n \n#define PCI_DEVICE_ID_INTEL_CE4100\t0x0708\n\nstatic const struct device_fixup fixups_table[] = {\n{ PCI_VENDOR_ID_CYRIX, PCI_DEVICE_ID_CYRIX_5530_LEGACY, cs5530a_warm_reset },\n{ PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_CS5536_ISA, cs5536_warm_reset },\n{ PCI_VENDOR_ID_NS, PCI_DEVICE_ID_NS_SC1100_BRIDGE, cs5530a_warm_reset },\n{ PCI_VENDOR_ID_RDC, PCI_DEVICE_ID_RDC_R6030, rdc321x_reset },\n{ PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_CE4100, ce4100_reset },\n};\n\n \nvoid mach_reboot_fixups(void)\n{\n\tconst struct device_fixup *cur;\n\tstruct pci_dev *dev;\n\tint i;\n\n\t \n\tif (in_interrupt())\n\t\treturn;\n\n\tfor (i=0; i < ARRAY_SIZE(fixups_table); i++) {\n\t\tcur = &(fixups_table[i]);\n\t\tdev = pci_get_device(cur->vendor, cur->device, NULL);\n\t\tif (!dev)\n\t\t\tcontinue;\n\n\t\tcur->reboot_fixup(dev);\n\t\tpci_dev_put(dev);\n\t}\n}\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}