{
  "module_name": "uncore_discovery.h",
  "hash_id": "7e2441b4c33d277c6c8655883c61038cf7a096632b23c98ec71e9fa8bbac8d21",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/events/intel/uncore_discovery.h",
  "human_readable_source": " \n\n \n#define UNCORE_DISCOVERY_TABLE_DEVICE\t\t0x09a7\n \n#define UNCORE_EXT_CAP_ID_DISCOVERY\t\t0x23\n \n#define UNCORE_DISCOVERY_DVSEC_OFFSET\t\t0x8\n \n#define UNCORE_DISCOVERY_DVSEC_ID_MASK\t\t0xffff\n \n#define UNCORE_DISCOVERY_DVSEC_ID_PMON\t\t0x1\n \n#define UNCORE_DISCOVERY_DVSEC2_OFFSET\t\t0xc\n \n#define UNCORE_DISCOVERY_DVSEC2_BIR_MASK\t0x7\n \n#define UNCORE_DISCOVERY_BIR_BASE\t\t0x10\n \n#define UNCORE_DISCOVERY_BIR_STEP\t\t0x4\n \n#define UNCORE_DISCOVERY_GLOBAL_MAP_SIZE\t0x20\n\n#define UNCORE_DISCOVERY_PCI_DOMAIN_OFFSET\t28\n#define UNCORE_DISCOVERY_PCI_DOMAIN(data)\t\t\t\\\n\t\t((data >> UNCORE_DISCOVERY_PCI_DOMAIN_OFFSET) & 0x7)\n#define UNCORE_DISCOVERY_PCI_BUS_OFFSET\t\t20\n#define UNCORE_DISCOVERY_PCI_BUS(data)\t\t\t\t\\\n\t\t((data >> UNCORE_DISCOVERY_PCI_BUS_OFFSET) & 0xff)\n#define UNCORE_DISCOVERY_PCI_DEVFN_OFFSET\t12\n#define UNCORE_DISCOVERY_PCI_DEVFN(data)\t\t\t\\\n\t\t((data >> UNCORE_DISCOVERY_PCI_DEVFN_OFFSET) & 0xff)\n#define UNCORE_DISCOVERY_PCI_BOX_CTRL(data)\t(data & 0xfff)\n\n\n#define uncore_discovery_invalid_unit(unit)\t\t\t\\\n\t(!unit.table1 || !unit.ctl || \\\n\t unit.table1 == -1ULL || unit.ctl == -1ULL ||\t\\\n\t unit.table3 == -1ULL)\n\n#define GENERIC_PMON_CTL_EV_SEL_MASK\t0x000000ff\n#define GENERIC_PMON_CTL_UMASK_MASK\t0x0000ff00\n#define GENERIC_PMON_CTL_EDGE_DET\t(1 << 18)\n#define GENERIC_PMON_CTL_INVERT\t\t(1 << 23)\n#define GENERIC_PMON_CTL_TRESH_MASK\t0xff000000\n#define GENERIC_PMON_RAW_EVENT_MASK\t(GENERIC_PMON_CTL_EV_SEL_MASK | \\\n\t\t\t\t\t GENERIC_PMON_CTL_UMASK_MASK | \\\n\t\t\t\t\t GENERIC_PMON_CTL_EDGE_DET | \\\n\t\t\t\t\t GENERIC_PMON_CTL_INVERT | \\\n\t\t\t\t\t GENERIC_PMON_CTL_TRESH_MASK)\n\n#define GENERIC_PMON_BOX_CTL_FRZ\t(1 << 0)\n#define GENERIC_PMON_BOX_CTL_RST_CTRL\t(1 << 8)\n#define GENERIC_PMON_BOX_CTL_RST_CTRS\t(1 << 9)\n#define GENERIC_PMON_BOX_CTL_INT\t(GENERIC_PMON_BOX_CTL_RST_CTRL | \\\n\t\t\t\t\t GENERIC_PMON_BOX_CTL_RST_CTRS)\n\nenum uncore_access_type {\n\tUNCORE_ACCESS_MSR\t= 0,\n\tUNCORE_ACCESS_MMIO,\n\tUNCORE_ACCESS_PCI,\n\n\tUNCORE_ACCESS_MAX,\n};\n\nstruct uncore_global_discovery {\n\tunion {\n\t\tu64\ttable1;\n\t\tstruct {\n\t\t\tu64\ttype : 8,\n\t\t\t\tstride : 8,\n\t\t\t\tmax_units : 10,\n\t\t\t\t__reserved_1 : 36,\n\t\t\t\taccess_type : 2;\n\t\t};\n\t};\n\n\tu64\tctl;\t\t \n\n\tunion {\n\t\tu64\ttable3;\n\t\tstruct {\n\t\t\tu64\tstatus_offset : 8,\n\t\t\t\tnum_status : 16,\n\t\t\t\t__reserved_2 : 40;\n\t\t};\n\t};\n};\n\nstruct uncore_unit_discovery {\n\tunion {\n\t\tu64\ttable1;\n\t\tstruct {\n\t\t\tu64\tnum_regs : 8,\n\t\t\t\tctl_offset : 8,\n\t\t\t\tbit_width : 8,\n\t\t\t\tctr_offset : 8,\n\t\t\t\tstatus_offset : 8,\n\t\t\t\t__reserved_1 : 22,\n\t\t\t\taccess_type : 2;\n\t\t\t};\n\t\t};\n\n\tu64\tctl;\t\t \n\n\tunion {\n\t\tu64\ttable3;\n\t\tstruct {\n\t\t\tu64\tbox_type : 16,\n\t\t\t\tbox_id : 16,\n\t\t\t\t__reserved_2 : 32;\n\t\t};\n\t};\n};\n\nstruct intel_uncore_discovery_type {\n\tstruct rb_node\tnode;\n\tenum uncore_access_type\taccess_type;\n\tu64\t\tbox_ctrl;\t \n\tu64\t\t*box_ctrl_die;\t \n\tu16\t\ttype;\t\t \n\tu8\t\tnum_counters;\n\tu8\t\tcounter_width;\n\tu8\t\tctl_offset;\t \n\tu8\t\tctr_offset;\t \n\tu16\t\tnum_boxes;\t \n\tunsigned int\t*ids;\t\t \n\tunsigned int\t*box_offset;\t \n};\n\nbool intel_uncore_has_discovery_tables(int *ignore);\nvoid intel_uncore_clear_discovery_tables(void);\nvoid intel_uncore_generic_uncore_cpu_init(void);\nint intel_uncore_generic_uncore_pci_init(void);\nvoid intel_uncore_generic_uncore_mmio_init(void);\n\nvoid intel_generic_uncore_msr_init_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_msr_disable_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_msr_enable_box(struct intel_uncore_box *box);\n\nvoid intel_generic_uncore_mmio_init_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_mmio_disable_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_mmio_enable_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_mmio_disable_event(struct intel_uncore_box *box,\n\t\t\t\t\t     struct perf_event *event);\nvoid intel_generic_uncore_mmio_enable_event(struct intel_uncore_box *box,\n\t\t\t\t\t    struct perf_event *event);\n\nvoid intel_generic_uncore_pci_init_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_pci_disable_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_pci_enable_box(struct intel_uncore_box *box);\nvoid intel_generic_uncore_pci_disable_event(struct intel_uncore_box *box,\n\t\t\t\t\t    struct perf_event *event);\nu64 intel_generic_uncore_pci_read_counter(struct intel_uncore_box *box,\n\t\t\t\t\t  struct perf_event *event);\n\nstruct intel_uncore_type **\nintel_uncore_generic_init_uncores(enum uncore_access_type type_id, int num_extra);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}