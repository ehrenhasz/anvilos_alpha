{
  "module_name": "trace.h",
  "hash_id": "ff66d792f110b11d76d21a6faa186a3f9e9dfd98b43d6fa9cf8f322114920c41",
  "original_prompt": "Ingested from linux-6.6.14/arch/x86/kvm/trace.h",
  "human_readable_source": " \n#if !defined(_TRACE_KVM_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_KVM_H\n\n#include <linux/tracepoint.h>\n#include <asm/vmx.h>\n#include <asm/svm.h>\n#include <asm/clocksource.h>\n#include <asm/pvclock-abi.h>\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM kvm\n\n \nTRACE_EVENT(kvm_entry,\n\tTP_PROTO(struct kvm_vcpu *vcpu),\n\tTP_ARGS(vcpu),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\tunsigned long,\trip\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id        = vcpu->vcpu_id;\n\t\t__entry->rip\t\t= kvm_rip_read(vcpu);\n\t),\n\n\tTP_printk(\"vcpu %u, rip 0x%lx\", __entry->vcpu_id, __entry->rip)\n);\n\n \nTRACE_EVENT(kvm_hypercall,\n\tTP_PROTO(unsigned long nr, unsigned long a0, unsigned long a1,\n\t\t unsigned long a2, unsigned long a3),\n\tTP_ARGS(nr, a0, a1, a2, a3),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long, \tnr\t\t)\n\t\t__field(\tunsigned long,\ta0\t\t)\n\t\t__field(\tunsigned long,\ta1\t\t)\n\t\t__field(\tunsigned long,\ta2\t\t)\n\t\t__field(\tunsigned long,\ta3\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nr\t\t= nr;\n\t\t__entry->a0\t\t= a0;\n\t\t__entry->a1\t\t= a1;\n\t\t__entry->a2\t\t= a2;\n\t\t__entry->a3\t\t= a3;\n\t),\n\n\tTP_printk(\"nr 0x%lx a0 0x%lx a1 0x%lx a2 0x%lx a3 0x%lx\",\n\t\t __entry->nr, __entry->a0, __entry->a1,  __entry->a2,\n\t\t __entry->a3)\n);\n\n \nTRACE_EVENT(kvm_hv_hypercall,\n\tTP_PROTO(__u16 code, bool fast,  __u16 var_cnt, __u16 rep_cnt,\n\t\t __u16 rep_idx, __u64 ingpa, __u64 outgpa),\n\tTP_ARGS(code, fast, var_cnt, rep_cnt, rep_idx, ingpa, outgpa),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u16,\t\trep_cnt\t\t)\n\t\t__field(\t__u16,\t\trep_idx\t\t)\n\t\t__field(\t__u64,\t\tingpa\t\t)\n\t\t__field(\t__u64,\t\toutgpa\t\t)\n\t\t__field(\t__u16, \t\tcode\t\t)\n\t\t__field(\t__u16,\t\tvar_cnt\t\t)\n\t\t__field(\tbool,\t\tfast\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rep_cnt\t= rep_cnt;\n\t\t__entry->rep_idx\t= rep_idx;\n\t\t__entry->ingpa\t\t= ingpa;\n\t\t__entry->outgpa\t\t= outgpa;\n\t\t__entry->code\t\t= code;\n\t\t__entry->var_cnt\t= var_cnt;\n\t\t__entry->fast\t\t= fast;\n\t),\n\n\tTP_printk(\"code 0x%x %s var_cnt 0x%x rep_cnt 0x%x idx 0x%x in 0x%llx out 0x%llx\",\n\t\t  __entry->code, __entry->fast ? \"fast\" : \"slow\",\n\t\t  __entry->var_cnt, __entry->rep_cnt, __entry->rep_idx,\n\t\t  __entry->ingpa, __entry->outgpa)\n);\n\nTRACE_EVENT(kvm_hv_hypercall_done,\n\tTP_PROTO(u64 result),\n\tTP_ARGS(result),\n\n\tTP_STRUCT__entry(\n\t\t__field(__u64, result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->result\t= result;\n\t),\n\n\tTP_printk(\"result 0x%llx\", __entry->result)\n);\n\n \nTRACE_EVENT(kvm_xen_hypercall,\n\t    TP_PROTO(u8 cpl, unsigned long nr,\n\t\t     unsigned long a0, unsigned long a1, unsigned long a2,\n\t\t     unsigned long a3, unsigned long a4, unsigned long a5),\n\t    TP_ARGS(cpl, nr, a0, a1, a2, a3, a4, a5),\n\n\tTP_STRUCT__entry(\n\t\t__field(u8, cpl)\n\t\t__field(unsigned long, nr)\n\t\t__field(unsigned long, a0)\n\t\t__field(unsigned long, a1)\n\t\t__field(unsigned long, a2)\n\t\t__field(unsigned long, a3)\n\t\t__field(unsigned long, a4)\n\t\t__field(unsigned long, a5)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->cpl = cpl;\n\t\t__entry->nr = nr;\n\t\t__entry->a0 = a0;\n\t\t__entry->a1 = a1;\n\t\t__entry->a2 = a2;\n\t\t__entry->a3 = a3;\n\t\t__entry->a4 = a4;\n\t\t__entry->a4 = a5;\n\t),\n\n\tTP_printk(\"cpl %d nr 0x%lx a0 0x%lx a1 0x%lx a2 0x%lx a3 0x%lx a4 0x%lx a5 %lx\",\n\t\t  __entry->cpl, __entry->nr,\n\t\t  __entry->a0, __entry->a1, __entry->a2,\n\t\t  __entry->a3, __entry->a4, __entry->a5)\n);\n\n\n\n \n\n#define KVM_PIO_IN   0\n#define KVM_PIO_OUT  1\n\nTRACE_EVENT(kvm_pio,\n\tTP_PROTO(unsigned int rw, unsigned int port, unsigned int size,\n\t\t unsigned int count, const void *data),\n\tTP_ARGS(rw, port, size, count, data),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int, \trw\t\t)\n\t\t__field(\tunsigned int, \tport\t\t)\n\t\t__field(\tunsigned int, \tsize\t\t)\n\t\t__field(\tunsigned int,\tcount\t\t)\n\t\t__field(\tunsigned int,\tval\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rw\t\t= rw;\n\t\t__entry->port\t\t= port;\n\t\t__entry->size\t\t= size;\n\t\t__entry->count\t\t= count;\n\t\tif (size == 1)\n\t\t\t__entry->val\t= *(unsigned char *)data;\n\t\telse if (size == 2)\n\t\t\t__entry->val\t= *(unsigned short *)data;\n\t\telse\n\t\t\t__entry->val\t= *(unsigned int *)data;\n\t),\n\n\tTP_printk(\"pio_%s at 0x%x size %d count %d val 0x%x %s\",\n\t\t  __entry->rw ? \"write\" : \"read\",\n\t\t  __entry->port, __entry->size, __entry->count, __entry->val,\n\t\t  __entry->count > 1 ? \"(...)\" : \"\")\n);\n\n \nTRACE_EVENT(kvm_fast_mmio,\n\tTP_PROTO(u64 gpa),\n\tTP_ARGS(gpa),\n\n\tTP_STRUCT__entry(\n\t\t__field(u64,\tgpa)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->gpa\t\t= gpa;\n\t),\n\n\tTP_printk(\"fast mmio at gpa 0x%llx\", __entry->gpa)\n);\n\n \nTRACE_EVENT(kvm_cpuid,\n\tTP_PROTO(unsigned int function, unsigned int index, unsigned long rax,\n\t\t unsigned long rbx, unsigned long rcx, unsigned long rdx,\n\t\t bool found, bool used_max_basic),\n\tTP_ARGS(function, index, rax, rbx, rcx, rdx, found, used_max_basic),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tfunction\t)\n\t\t__field(\tunsigned int,\tindex\t\t)\n\t\t__field(\tunsigned long,\trax\t\t)\n\t\t__field(\tunsigned long,\trbx\t\t)\n\t\t__field(\tunsigned long,\trcx\t\t)\n\t\t__field(\tunsigned long,\trdx\t\t)\n\t\t__field(\tbool,\t\tfound\t\t)\n\t\t__field(\tbool,\t\tused_max_basic\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->function\t= function;\n\t\t__entry->index\t\t= index;\n\t\t__entry->rax\t\t= rax;\n\t\t__entry->rbx\t\t= rbx;\n\t\t__entry->rcx\t\t= rcx;\n\t\t__entry->rdx\t\t= rdx;\n\t\t__entry->found\t\t= found;\n\t\t__entry->used_max_basic\t= used_max_basic;\n\t),\n\n\tTP_printk(\"func %x idx %x rax %lx rbx %lx rcx %lx rdx %lx, cpuid entry %s%s\",\n\t\t  __entry->function, __entry->index, __entry->rax,\n\t\t  __entry->rbx, __entry->rcx, __entry->rdx,\n\t\t  __entry->found ? \"found\" : \"not found\",\n\t\t  __entry->used_max_basic ? \", used max basic\" : \"\")\n);\n\n#define AREG(x) { APIC_##x, \"APIC_\" #x }\n\n#define kvm_trace_symbol_apic\t\t\t\t\t\t    \\\n\tAREG(ID), AREG(LVR), AREG(TASKPRI), AREG(ARBPRI), AREG(PROCPRI),    \\\n\tAREG(EOI), AREG(RRR), AREG(LDR), AREG(DFR), AREG(SPIV), AREG(ISR),  \\\n\tAREG(TMR), AREG(IRR), AREG(ESR), AREG(ICR), AREG(ICR2), AREG(LVTT), \\\n\tAREG(LVTTHMR), AREG(LVTPC), AREG(LVT0), AREG(LVT1), AREG(LVTERR),   \\\n\tAREG(TMICT), AREG(TMCCT), AREG(TDCR), AREG(SELF_IPI), AREG(EFEAT),  \\\n\tAREG(ECTRL)\n \nTRACE_EVENT(kvm_apic,\n\tTP_PROTO(unsigned int rw, unsigned int reg, u64 val),\n\tTP_ARGS(rw, reg, val),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\trw\t\t)\n\t\t__field(\tunsigned int,\treg\t\t)\n\t\t__field(\tu64,\t\tval\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rw\t\t= rw;\n\t\t__entry->reg\t\t= reg;\n\t\t__entry->val\t\t= val;\n\t),\n\n\tTP_printk(\"apic_%s %s = 0x%llx\",\n\t\t  __entry->rw ? \"write\" : \"read\",\n\t\t  __print_symbolic(__entry->reg, kvm_trace_symbol_apic),\n\t\t  __entry->val)\n);\n\n#define trace_kvm_apic_read(reg, val)\t\ttrace_kvm_apic(0, reg, val)\n#define trace_kvm_apic_write(reg, val)\t\ttrace_kvm_apic(1, reg, val)\n\n#define KVM_ISA_VMX   1\n#define KVM_ISA_SVM   2\n\n#define kvm_print_exit_reason(exit_reason, isa)\t\t\t\t\\\n\t(isa == KVM_ISA_VMX) ?\t\t\t\t\t\t\\\n\t__print_symbolic(exit_reason & 0xffff, VMX_EXIT_REASONS) :\t\\\n\t__print_symbolic(exit_reason, SVM_EXIT_REASONS),\t\t\\\n\t(isa == KVM_ISA_VMX && exit_reason & ~0xffff) ? \" \" : \"\",\t\\\n\t(isa == KVM_ISA_VMX) ?\t\t\t\t\t\t\\\n\t__print_flags(exit_reason & ~0xffff, \" \", VMX_EXIT_REASON_FLAGS) : \"\"\n\n#define TRACE_EVENT_KVM_EXIT(name)\t\t\t\t\t     \\\nTRACE_EVENT(name,\t\t\t\t\t\t\t     \\\n\tTP_PROTO(struct kvm_vcpu *vcpu, u32 isa),\t\t\t     \\\n\tTP_ARGS(vcpu, isa),\t\t\t\t\t\t     \\\n\t\t\t\t\t\t\t\t\t     \\\n\tTP_STRUCT__entry(\t\t\t\t\t\t     \\\n\t\t__field(\tunsigned int,\texit_reason\t)\t     \\\n\t\t__field(\tunsigned long,\tguest_rip\t)\t     \\\n\t\t__field(\tu32,\t        isa             )\t     \\\n\t\t__field(\tu64,\t        info1           )\t     \\\n\t\t__field(\tu64,\t        info2           )\t     \\\n\t\t__field(\tu32,\t        intr_info\t)\t     \\\n\t\t__field(\tu32,\t        error_code\t)\t     \\\n\t\t__field(\tunsigned int,\tvcpu_id         )\t     \\\n\t),\t\t\t\t\t\t\t\t     \\\n\t\t\t\t\t\t\t\t\t     \\\n\tTP_fast_assign(\t\t\t\t\t\t\t     \\\n\t\t__entry->guest_rip\t= kvm_rip_read(vcpu);\t\t     \\\n\t\t__entry->isa            = isa;\t\t\t\t     \\\n\t\t__entry->vcpu_id        = vcpu->vcpu_id;\t\t     \\\n\t\tstatic_call(kvm_x86_get_exit_info)(vcpu,\t\t     \\\n\t\t\t\t\t  &__entry->exit_reason,\t     \\\n\t\t\t\t\t  &__entry->info1,\t\t     \\\n\t\t\t\t\t  &__entry->info2,\t\t     \\\n\t\t\t\t\t  &__entry->intr_info,\t\t     \\\n\t\t\t\t\t  &__entry->error_code);\t     \\\n\t),\t\t\t\t\t\t\t\t     \\\n\t\t\t\t\t\t\t\t\t     \\\n\tTP_printk(\"vcpu %u reason %s%s%s rip 0x%lx info1 0x%016llx \"\t     \\\n\t\t  \"info2 0x%016llx intr_info 0x%08x error_code 0x%08x\",\t     \\\n\t\t  __entry->vcpu_id,\t\t\t\t\t     \\\n\t\t  kvm_print_exit_reason(__entry->exit_reason, __entry->isa), \\\n\t\t  __entry->guest_rip, __entry->info1, __entry->info2,\t     \\\n\t\t  __entry->intr_info, __entry->error_code)\t\t     \\\n)\n\n \nTRACE_EVENT_KVM_EXIT(kvm_exit);\n\n \nTRACE_EVENT(kvm_inj_virq,\n\tTP_PROTO(unsigned int vector, bool soft, bool reinjected),\n\tTP_ARGS(vector, soft, reinjected),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvector\t\t)\n\t\t__field(\tbool,\t\tsoft\t\t)\n\t\t__field(\tbool,\t\treinjected\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vector\t\t= vector;\n\t\t__entry->soft\t\t= soft;\n\t\t__entry->reinjected\t= reinjected;\n\t),\n\n\tTP_printk(\"%s 0x%x%s\",\n\t\t  __entry->soft ? \"Soft/INTn\" : \"IRQ\", __entry->vector,\n\t\t  __entry->reinjected ? \" [reinjected]\" : \"\")\n);\n\n#define EXS(x) { x##_VECTOR, \"#\" #x }\n\n#define kvm_trace_sym_exc\t\t\t\t\t\t\\\n\tEXS(DE), EXS(DB), EXS(BP), EXS(OF), EXS(BR), EXS(UD), EXS(NM),\t\\\n\tEXS(DF), EXS(TS), EXS(NP), EXS(SS), EXS(GP), EXS(PF),\t\t\\\n\tEXS(MF), EXS(AC), EXS(MC)\n\n \nTRACE_EVENT(kvm_inj_exception,\n\tTP_PROTO(unsigned exception, bool has_error, unsigned error_code,\n\t\t bool reinjected),\n\tTP_ARGS(exception, has_error, error_code, reinjected),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tu8,\texception\t)\n\t\t__field(\tu8,\thas_error\t)\n\t\t__field(\tu32,\terror_code\t)\n\t\t__field(\tbool,\treinjected\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->exception\t= exception;\n\t\t__entry->has_error\t= has_error;\n\t\t__entry->error_code\t= error_code;\n\t\t__entry->reinjected\t= reinjected;\n\t),\n\n\tTP_printk(\"%s%s%s%s%s\",\n\t\t  __print_symbolic(__entry->exception, kvm_trace_sym_exc),\n\t\t  !__entry->has_error ? \"\" : \" (\",\n\t\t  !__entry->has_error ? \"\" : __print_symbolic(__entry->error_code, { }),\n\t\t  !__entry->has_error ? \"\" : \")\",\n\t\t  __entry->reinjected ? \" [reinjected]\" : \"\")\n);\n\n \nTRACE_EVENT(kvm_page_fault,\n\tTP_PROTO(struct kvm_vcpu *vcpu, u64 fault_address, u64 error_code),\n\tTP_ARGS(vcpu, fault_address, error_code),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\tunsigned long,\tguest_rip\t)\n\t\t__field(\tu64,\t\tfault_address\t)\n\t\t__field(\tu64,\t\terror_code\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t= vcpu->vcpu_id;\n\t\t__entry->guest_rip\t= kvm_rip_read(vcpu);\n\t\t__entry->fault_address\t= fault_address;\n\t\t__entry->error_code\t= error_code;\n\t),\n\n\tTP_printk(\"vcpu %u rip 0x%lx address 0x%016llx error_code 0x%llx\",\n\t\t  __entry->vcpu_id, __entry->guest_rip,\n\t\t  __entry->fault_address, __entry->error_code)\n);\n\n \nTRACE_EVENT(kvm_msr,\n\tTP_PROTO(unsigned write, u32 ecx, u64 data, bool exception),\n\tTP_ARGS(write, ecx, data, exception),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned,\twrite\t\t)\n\t\t__field(\tu32,\t\tecx\t\t)\n\t\t__field(\tu64,\t\tdata\t\t)\n\t\t__field(\tu8,\t\texception\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->write\t\t= write;\n\t\t__entry->ecx\t\t= ecx;\n\t\t__entry->data\t\t= data;\n\t\t__entry->exception\t= exception;\n\t),\n\n\tTP_printk(\"msr_%s %x = 0x%llx%s\",\n\t\t  __entry->write ? \"write\" : \"read\",\n\t\t  __entry->ecx, __entry->data,\n\t\t  __entry->exception ? \" (#GP)\" : \"\")\n);\n\n#define trace_kvm_msr_read(ecx, data)      trace_kvm_msr(0, ecx, data, false)\n#define trace_kvm_msr_write(ecx, data)     trace_kvm_msr(1, ecx, data, false)\n#define trace_kvm_msr_read_ex(ecx)         trace_kvm_msr(0, ecx, 0, true)\n#define trace_kvm_msr_write_ex(ecx, data)  trace_kvm_msr(1, ecx, data, true)\n\n \nTRACE_EVENT(kvm_cr,\n\tTP_PROTO(unsigned int rw, unsigned int cr, unsigned long val),\n\tTP_ARGS(rw, cr, val),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\trw\t\t)\n\t\t__field(\tunsigned int,\tcr\t\t)\n\t\t__field(\tunsigned long,\tval\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rw\t\t= rw;\n\t\t__entry->cr\t\t= cr;\n\t\t__entry->val\t\t= val;\n\t),\n\n\tTP_printk(\"cr_%s %x = 0x%lx\",\n\t\t  __entry->rw ? \"write\" : \"read\",\n\t\t  __entry->cr, __entry->val)\n);\n\n#define trace_kvm_cr_read(cr, val)\t\ttrace_kvm_cr(0, cr, val)\n#define trace_kvm_cr_write(cr, val)\t\ttrace_kvm_cr(1, cr, val)\n\nTRACE_EVENT(kvm_pic_set_irq,\n\t    TP_PROTO(__u8 chip, __u8 pin, __u8 elcr, __u8 imr, bool coalesced),\n\t    TP_ARGS(chip, pin, elcr, imr, coalesced),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u8,\t\tchip\t\t)\n\t\t__field(\t__u8,\t\tpin\t\t)\n\t\t__field(\t__u8,\t\telcr\t\t)\n\t\t__field(\t__u8,\t\timr\t\t)\n\t\t__field(\tbool,\t\tcoalesced\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->chip\t\t= chip;\n\t\t__entry->pin\t\t= pin;\n\t\t__entry->elcr\t\t= elcr;\n\t\t__entry->imr\t\t= imr;\n\t\t__entry->coalesced\t= coalesced;\n\t),\n\n\tTP_printk(\"chip %u pin %u (%s%s)%s\",\n\t\t  __entry->chip, __entry->pin,\n\t\t  (__entry->elcr & (1 << __entry->pin)) ? \"level\":\"edge\",\n\t\t  (__entry->imr & (1 << __entry->pin)) ? \"|masked\":\"\",\n\t\t  __entry->coalesced ? \" (coalesced)\" : \"\")\n);\n\n#define kvm_apic_dst_shorthand\t\t\\\n\t{0x0, \"dst\"},\t\t\t\\\n\t{0x1, \"self\"},\t\t\t\\\n\t{0x2, \"all\"},\t\t\t\\\n\t{0x3, \"all-but-self\"}\n\nTRACE_EVENT(kvm_apic_ipi,\n\t    TP_PROTO(__u32 icr_low, __u32 dest_id),\n\t    TP_ARGS(icr_low, dest_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\ticr_low\t\t)\n\t\t__field(\t__u32,\t\tdest_id\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->icr_low\t= icr_low;\n\t\t__entry->dest_id\t= dest_id;\n\t),\n\n\tTP_printk(\"dst %x vec %u (%s|%s|%s|%s|%s)\",\n\t\t  __entry->dest_id, (u8)__entry->icr_low,\n\t\t  __print_symbolic((__entry->icr_low >> 8 & 0x7),\n\t\t\t\t   kvm_deliver_mode),\n\t\t  (__entry->icr_low & (1<<11)) ? \"logical\" : \"physical\",\n\t\t  (__entry->icr_low & (1<<14)) ? \"assert\" : \"de-assert\",\n\t\t  (__entry->icr_low & (1<<15)) ? \"level\" : \"edge\",\n\t\t  __print_symbolic((__entry->icr_low >> 18 & 0x3),\n\t\t\t\t   kvm_apic_dst_shorthand))\n);\n\nTRACE_EVENT(kvm_apic_accept_irq,\n\t    TP_PROTO(__u32 apicid, __u16 dm, __u16 tm, __u8 vec),\n\t    TP_ARGS(apicid, dm, tm, vec),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\tapicid\t\t)\n\t\t__field(\t__u16,\t\tdm\t\t)\n\t\t__field(\t__u16,\t\ttm\t\t)\n\t\t__field(\t__u8,\t\tvec\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->apicid\t\t= apicid;\n\t\t__entry->dm\t\t= dm;\n\t\t__entry->tm\t\t= tm;\n\t\t__entry->vec\t\t= vec;\n\t),\n\n\tTP_printk(\"apicid %x vec %u (%s|%s)\",\n\t\t  __entry->apicid, __entry->vec,\n\t\t  __print_symbolic((__entry->dm >> 8 & 0x7), kvm_deliver_mode),\n\t\t  __entry->tm ? \"level\" : \"edge\")\n);\n\nTRACE_EVENT(kvm_eoi,\n\t    TP_PROTO(struct kvm_lapic *apic, int vector),\n\t    TP_ARGS(apic, vector),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\tapicid\t\t)\n\t\t__field(\tint,\t\tvector\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->apicid\t\t= apic->vcpu->vcpu_id;\n\t\t__entry->vector\t\t= vector;\n\t),\n\n\tTP_printk(\"apicid %x vector %d\", __entry->apicid, __entry->vector)\n);\n\nTRACE_EVENT(kvm_pv_eoi,\n\t    TP_PROTO(struct kvm_lapic *apic, int vector),\n\t    TP_ARGS(apic, vector),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\tapicid\t\t)\n\t\t__field(\tint,\t\tvector\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->apicid\t\t= apic->vcpu->vcpu_id;\n\t\t__entry->vector\t\t= vector;\n\t),\n\n\tTP_printk(\"apicid %x vector %d\", __entry->apicid, __entry->vector)\n);\n\n \nTRACE_EVENT(kvm_nested_vmenter,\n\t    TP_PROTO(__u64 rip, __u64 vmcb, __u64 nested_rip, __u32 int_ctl,\n\t\t     __u32 event_inj, bool tdp_enabled, __u64 guest_tdp_pgd,\n\t\t     __u64 guest_cr3, __u32 isa),\n\t    TP_ARGS(rip, vmcb, nested_rip, int_ctl, event_inj, tdp_enabled,\n\t\t    guest_tdp_pgd, guest_cr3, isa),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\t\trip\t\t)\n\t\t__field(\t__u64,\t\tvmcb\t\t)\n\t\t__field(\t__u64,\t\tnested_rip\t)\n\t\t__field(\t__u32,\t\tint_ctl\t\t)\n\t\t__field(\t__u32,\t\tevent_inj\t)\n\t\t__field(\tbool,\t\ttdp_enabled\t)\n\t\t__field(\t__u64,\t\tguest_pgd\t)\n\t\t__field(\t__u32,\t\tisa\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rip\t\t= rip;\n\t\t__entry->vmcb\t\t= vmcb;\n\t\t__entry->nested_rip\t= nested_rip;\n\t\t__entry->int_ctl\t= int_ctl;\n\t\t__entry->event_inj\t= event_inj;\n\t\t__entry->tdp_enabled\t= tdp_enabled;\n\t\t__entry->guest_pgd\t= tdp_enabled ? guest_tdp_pgd : guest_cr3;\n\t\t__entry->isa\t\t= isa;\n\t),\n\n\tTP_printk(\"rip: 0x%016llx %s: 0x%016llx nested_rip: 0x%016llx \"\n\t\t  \"int_ctl: 0x%08x event_inj: 0x%08x nested_%s=%s %s: 0x%016llx\",\n\t\t  __entry->rip,\n\t\t  __entry->isa == KVM_ISA_VMX ? \"vmcs\" : \"vmcb\",\n\t\t  __entry->vmcb,\n\t\t  __entry->nested_rip,\n\t\t  __entry->int_ctl,\n\t\t  __entry->event_inj,\n\t\t  __entry->isa == KVM_ISA_VMX ? \"ept\" : \"npt\",\n\t\t  __entry->tdp_enabled ? \"y\" : \"n\",\n\t\t  !__entry->tdp_enabled ? \"guest_cr3\" :\n\t\t  __entry->isa == KVM_ISA_VMX ? \"nested_eptp\" : \"nested_cr3\",\n\t\t  __entry->guest_pgd)\n);\n\nTRACE_EVENT(kvm_nested_intercepts,\n\t    TP_PROTO(__u16 cr_read, __u16 cr_write, __u32 exceptions,\n\t\t     __u32 intercept1, __u32 intercept2, __u32 intercept3),\n\t    TP_ARGS(cr_read, cr_write, exceptions, intercept1,\n\t\t    intercept2, intercept3),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u16,\t\tcr_read\t\t)\n\t\t__field(\t__u16,\t\tcr_write\t)\n\t\t__field(\t__u32,\t\texceptions\t)\n\t\t__field(\t__u32,\t\tintercept1\t)\n\t\t__field(\t__u32,\t\tintercept2\t)\n\t\t__field(\t__u32,\t\tintercept3\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->cr_read\t= cr_read;\n\t\t__entry->cr_write\t= cr_write;\n\t\t__entry->exceptions\t= exceptions;\n\t\t__entry->intercept1\t= intercept1;\n\t\t__entry->intercept2\t= intercept2;\n\t\t__entry->intercept3\t= intercept3;\n\t),\n\n\tTP_printk(\"cr_read: %04x cr_write: %04x excp: %08x \"\n\t\t  \"intercepts: %08x %08x %08x\",\n\t\t  __entry->cr_read, __entry->cr_write, __entry->exceptions,\n\t\t  __entry->intercept1, __entry->intercept2, __entry->intercept3)\n);\n \nTRACE_EVENT_KVM_EXIT(kvm_nested_vmexit);\n\n \nTRACE_EVENT(kvm_nested_vmexit_inject,\n\t    TP_PROTO(__u32 exit_code,\n\t\t     __u64 exit_info1, __u64 exit_info2,\n\t\t     __u32 exit_int_info, __u32 exit_int_info_err, __u32 isa),\n\t    TP_ARGS(exit_code, exit_info1, exit_info2,\n\t\t    exit_int_info, exit_int_info_err, isa),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\texit_code\t\t)\n\t\t__field(\t__u64,\t\texit_info1\t\t)\n\t\t__field(\t__u64,\t\texit_info2\t\t)\n\t\t__field(\t__u32,\t\texit_int_info\t\t)\n\t\t__field(\t__u32,\t\texit_int_info_err\t)\n\t\t__field(\t__u32,\t\tisa\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->exit_code\t\t= exit_code;\n\t\t__entry->exit_info1\t\t= exit_info1;\n\t\t__entry->exit_info2\t\t= exit_info2;\n\t\t__entry->exit_int_info\t\t= exit_int_info;\n\t\t__entry->exit_int_info_err\t= exit_int_info_err;\n\t\t__entry->isa\t\t\t= isa;\n\t),\n\n\tTP_printk(\"reason: %s%s%s ext_inf1: 0x%016llx \"\n\t\t  \"ext_inf2: 0x%016llx ext_int: 0x%08x ext_int_err: 0x%08x\",\n\t\t  kvm_print_exit_reason(__entry->exit_code, __entry->isa),\n\t\t  __entry->exit_info1, __entry->exit_info2,\n\t\t  __entry->exit_int_info, __entry->exit_int_info_err)\n);\n\n \nTRACE_EVENT(kvm_nested_intr_vmexit,\n\t    TP_PROTO(__u64 rip),\n\t    TP_ARGS(rip),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\trip\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rip\t=\trip\n\t),\n\n\tTP_printk(\"rip: 0x%016llx\", __entry->rip)\n);\n\n \nTRACE_EVENT(kvm_invlpga,\n\t    TP_PROTO(__u64 rip, int asid, u64 address),\n\t    TP_ARGS(rip, asid, address),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\trip\t)\n\t\t__field(\tint,\tasid\t)\n\t\t__field(\t__u64,\taddress\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rip\t\t=\trip;\n\t\t__entry->asid\t\t=\tasid;\n\t\t__entry->address\t=\taddress;\n\t),\n\n\tTP_printk(\"rip: 0x%016llx asid: %d address: 0x%016llx\",\n\t\t  __entry->rip, __entry->asid, __entry->address)\n);\n\n \nTRACE_EVENT(kvm_skinit,\n\t    TP_PROTO(__u64 rip, __u32 slb),\n\t    TP_ARGS(rip, slb),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\trip\t)\n\t\t__field(\t__u32,\tslb\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->rip\t\t=\trip;\n\t\t__entry->slb\t\t=\tslb;\n\t),\n\n\tTP_printk(\"rip: 0x%016llx slb: 0x%08x\",\n\t\t  __entry->rip, __entry->slb)\n);\n\n#define KVM_EMUL_INSN_F_CR0_PE (1 << 0)\n#define KVM_EMUL_INSN_F_EFL_VM (1 << 1)\n#define KVM_EMUL_INSN_F_CS_D   (1 << 2)\n#define KVM_EMUL_INSN_F_CS_L   (1 << 3)\n\n#define kvm_trace_symbol_emul_flags\t                  \\\n\t{ 0,   \t\t\t    \"real\" },\t\t  \\\n\t{ KVM_EMUL_INSN_F_CR0_PE\t\t\t  \\\n\t  | KVM_EMUL_INSN_F_EFL_VM, \"vm16\" },\t\t  \\\n\t{ KVM_EMUL_INSN_F_CR0_PE,   \"prot16\" },\t\t  \\\n\t{ KVM_EMUL_INSN_F_CR0_PE\t\t\t  \\\n\t  | KVM_EMUL_INSN_F_CS_D,   \"prot32\" },\t\t  \\\n\t{ KVM_EMUL_INSN_F_CR0_PE\t\t\t  \\\n\t  | KVM_EMUL_INSN_F_CS_L,   \"prot64\" }\n\n#define kei_decode_mode(mode) ({\t\t\t\\\n\tu8 flags = 0xff;\t\t\t\t\\\n\tswitch (mode) {\t\t\t\t\t\\\n\tcase X86EMUL_MODE_REAL:\t\t\t\t\\\n\t\tflags = 0;\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\\\n\tcase X86EMUL_MODE_VM86:\t\t\t\t\\\n\t\tflags = KVM_EMUL_INSN_F_EFL_VM;\t\t\\\n\t\tbreak;\t\t\t\t\t\\\n\tcase X86EMUL_MODE_PROT16:\t\t\t\\\n\t\tflags = KVM_EMUL_INSN_F_CR0_PE;\t\t\\\n\t\tbreak;\t\t\t\t\t\\\n\tcase X86EMUL_MODE_PROT32:\t\t\t\\\n\t\tflags = KVM_EMUL_INSN_F_CR0_PE\t\t\\\n\t\t\t| KVM_EMUL_INSN_F_CS_D;\t\t\\\n\t\tbreak;\t\t\t\t\t\\\n\tcase X86EMUL_MODE_PROT64:\t\t\t\\\n\t\tflags = KVM_EMUL_INSN_F_CR0_PE\t\t\\\n\t\t\t| KVM_EMUL_INSN_F_CS_L;\t\t\\\n\t\tbreak;\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\\\n\tflags;\t\t\t\t\t\t\\\n\t})\n\nTRACE_EVENT(kvm_emulate_insn,\n\tTP_PROTO(struct kvm_vcpu *vcpu, __u8 failed),\n\tTP_ARGS(vcpu, failed),\n\n\tTP_STRUCT__entry(\n\t\t__field(    __u64, rip                       )\n\t\t__field(    __u32, csbase                    )\n\t\t__field(    __u8,  len                       )\n\t\t__array(    __u8,  insn,    15\t             )\n\t\t__field(    __u8,  flags       \t   \t     )\n\t\t__field(    __u8,  failed                    )\n\t\t),\n\n\tTP_fast_assign(\n\t\t__entry->csbase = static_call(kvm_x86_get_segment_base)(vcpu, VCPU_SREG_CS);\n\t\t__entry->len = vcpu->arch.emulate_ctxt->fetch.ptr\n\t\t\t       - vcpu->arch.emulate_ctxt->fetch.data;\n\t\t__entry->rip = vcpu->arch.emulate_ctxt->_eip - __entry->len;\n\t\tmemcpy(__entry->insn,\n\t\t       vcpu->arch.emulate_ctxt->fetch.data,\n\t\t       15);\n\t\t__entry->flags = kei_decode_mode(vcpu->arch.emulate_ctxt->mode);\n\t\t__entry->failed = failed;\n\t\t),\n\n\tTP_printk(\"%x:%llx:%s (%s)%s\",\n\t\t  __entry->csbase, __entry->rip,\n\t\t  __print_hex(__entry->insn, __entry->len),\n\t\t  __print_symbolic(__entry->flags,\n\t\t\t\t   kvm_trace_symbol_emul_flags),\n\t\t  __entry->failed ? \" failed\" : \"\"\n\t\t)\n\t);\n\n#define trace_kvm_emulate_insn_start(vcpu) trace_kvm_emulate_insn(vcpu, 0)\n#define trace_kvm_emulate_insn_failed(vcpu) trace_kvm_emulate_insn(vcpu, 1)\n\nTRACE_EVENT(\n\tvcpu_match_mmio,\n\tTP_PROTO(gva_t gva, gpa_t gpa, bool write, bool gpa_match),\n\tTP_ARGS(gva, gpa, write, gpa_match),\n\n\tTP_STRUCT__entry(\n\t\t__field(gva_t, gva)\n\t\t__field(gpa_t, gpa)\n\t\t__field(bool, write)\n\t\t__field(bool, gpa_match)\n\t\t),\n\n\tTP_fast_assign(\n\t\t__entry->gva = gva;\n\t\t__entry->gpa = gpa;\n\t\t__entry->write = write;\n\t\t__entry->gpa_match = gpa_match\n\t\t),\n\n\tTP_printk(\"gva %#lx gpa %#llx %s %s\", __entry->gva, __entry->gpa,\n\t\t  __entry->write ? \"Write\" : \"Read\",\n\t\t  __entry->gpa_match ? \"GPA\" : \"GVA\")\n);\n\nTRACE_EVENT(kvm_write_tsc_offset,\n\tTP_PROTO(unsigned int vcpu_id, __u64 previous_tsc_offset,\n\t\t __u64 next_tsc_offset),\n\tTP_ARGS(vcpu_id, previous_tsc_offset, next_tsc_offset),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\tvcpu_id\t\t\t\t)\n\t\t__field(\t__u64,\tprevious_tsc_offset\t\t)\n\t\t__field(\t__u64,\tnext_tsc_offset\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t\t= vcpu_id;\n\t\t__entry->previous_tsc_offset\t= previous_tsc_offset;\n\t\t__entry->next_tsc_offset\t= next_tsc_offset;\n\t),\n\n\tTP_printk(\"vcpu=%u prev=%llu next=%llu\", __entry->vcpu_id,\n\t\t  __entry->previous_tsc_offset, __entry->next_tsc_offset)\n);\n\n#ifdef CONFIG_X86_64\n\n#define host_clocks\t\t\t\t\t\\\n\t{VDSO_CLOCKMODE_NONE, \"none\"},\t\t\t\\\n\t{VDSO_CLOCKMODE_TSC,  \"tsc\"}\t\t\t\\\n\nTRACE_EVENT(kvm_update_master_clock,\n\tTP_PROTO(bool use_master_clock, unsigned int host_clock, bool offset_matched),\n\tTP_ARGS(use_master_clock, host_clock, offset_matched),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tbool,\tuse_master_clock\t)\n\t\t__field(\tunsigned int,\thost_clock\t\t)\n\t\t__field(\t\tbool,\toffset_matched\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->use_master_clock\t= use_master_clock;\n\t\t__entry->host_clock\t\t= host_clock;\n\t\t__entry->offset_matched\t\t= offset_matched;\n\t),\n\n\tTP_printk(\"masterclock %d hostclock %s offsetmatched %u\",\n\t\t  __entry->use_master_clock,\n\t\t  __print_symbolic(__entry->host_clock, host_clocks),\n\t\t  __entry->offset_matched)\n);\n\nTRACE_EVENT(kvm_track_tsc,\n\tTP_PROTO(unsigned int vcpu_id, unsigned int nr_matched,\n\t\t unsigned int online_vcpus, bool use_master_clock,\n\t\t unsigned int host_clock),\n\tTP_ARGS(vcpu_id, nr_matched, online_vcpus, use_master_clock,\n\t\thost_clock),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t\t)\n\t\t__field(\tunsigned int,\tnr_vcpus_matched_tsc\t)\n\t\t__field(\tunsigned int,\tonline_vcpus\t\t)\n\t\t__field(\tbool,\t\tuse_master_clock\t)\n\t\t__field(\tunsigned int,\thost_clock\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t\t= vcpu_id;\n\t\t__entry->nr_vcpus_matched_tsc\t= nr_matched;\n\t\t__entry->online_vcpus\t\t= online_vcpus;\n\t\t__entry->use_master_clock\t= use_master_clock;\n\t\t__entry->host_clock\t\t= host_clock;\n\t),\n\n\tTP_printk(\"vcpu_id %u masterclock %u offsetmatched %u nr_online %u\"\n\t\t  \" hostclock %s\",\n\t\t  __entry->vcpu_id, __entry->use_master_clock,\n\t\t  __entry->nr_vcpus_matched_tsc, __entry->online_vcpus,\n\t\t  __print_symbolic(__entry->host_clock, host_clocks))\n);\n\n#endif  \n\n \nTRACE_EVENT(kvm_pml_full,\n\tTP_PROTO(unsigned int vcpu_id),\n\tTP_ARGS(vcpu_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t\t= vcpu_id;\n\t),\n\n\tTP_printk(\"vcpu %d: PML full\", __entry->vcpu_id)\n);\n\nTRACE_EVENT(kvm_ple_window_update,\n\tTP_PROTO(unsigned int vcpu_id, unsigned int new, unsigned int old),\n\tTP_ARGS(vcpu_id, new, old),\n\n\tTP_STRUCT__entry(\n\t\t__field(        unsigned int,   vcpu_id         )\n\t\t__field(        unsigned int,       new         )\n\t\t__field(        unsigned int,       old         )\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id        = vcpu_id;\n\t\t__entry->new            = new;\n\t\t__entry->old            = old;\n\t),\n\n\tTP_printk(\"vcpu %u old %u new %u (%s)\",\n\t          __entry->vcpu_id, __entry->old, __entry->new,\n\t\t  __entry->old < __entry->new ? \"growed\" : \"shrinked\")\n);\n\nTRACE_EVENT(kvm_pvclock_update,\n\tTP_PROTO(unsigned int vcpu_id, struct pvclock_vcpu_time_info *pvclock),\n\tTP_ARGS(vcpu_id, pvclock),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t\t)\n\t\t__field(\t__u32,\t\tversion\t\t\t)\n\t\t__field(\t__u64,\t\ttsc_timestamp\t\t)\n\t\t__field(\t__u64,\t\tsystem_time\t\t)\n\t\t__field(\t__u32,\t\ttsc_to_system_mul\t)\n\t\t__field(\t__s8,\t\ttsc_shift\t\t)\n\t\t__field(\t__u8,\t\tflags\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t   = vcpu_id;\n\t\t__entry->version\t   = pvclock->version;\n\t\t__entry->tsc_timestamp\t   = pvclock->tsc_timestamp;\n\t\t__entry->system_time\t   = pvclock->system_time;\n\t\t__entry->tsc_to_system_mul = pvclock->tsc_to_system_mul;\n\t\t__entry->tsc_shift\t   = pvclock->tsc_shift;\n\t\t__entry->flags\t\t   = pvclock->flags;\n\t),\n\n\tTP_printk(\"vcpu_id %u, pvclock { version %u, tsc_timestamp 0x%llx, \"\n\t\t  \"system_time 0x%llx, tsc_to_system_mul 0x%x, tsc_shift %d, \"\n\t\t  \"flags 0x%x }\",\n\t\t  __entry->vcpu_id,\n\t\t  __entry->version,\n\t\t  __entry->tsc_timestamp,\n\t\t  __entry->system_time,\n\t\t  __entry->tsc_to_system_mul,\n\t\t  __entry->tsc_shift,\n\t\t  __entry->flags)\n);\n\nTRACE_EVENT(kvm_wait_lapic_expire,\n\tTP_PROTO(unsigned int vcpu_id, s64 delta),\n\tTP_ARGS(vcpu_id, delta),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\ts64,\t\tdelta\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t   = vcpu_id;\n\t\t__entry->delta             = delta;\n\t),\n\n\tTP_printk(\"vcpu %u: delta %lld (%s)\",\n\t\t  __entry->vcpu_id,\n\t\t  __entry->delta,\n\t\t  __entry->delta < 0 ? \"early\" : \"late\")\n);\n\nTRACE_EVENT(kvm_smm_transition,\n\tTP_PROTO(unsigned int vcpu_id, u64 smbase, bool entering),\n\tTP_ARGS(vcpu_id, smbase, entering),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\tu64,\t\tsmbase\t\t)\n\t\t__field(\tbool,\t\tentering\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t= vcpu_id;\n\t\t__entry->smbase\t\t= smbase;\n\t\t__entry->entering\t= entering;\n\t),\n\n\tTP_printk(\"vcpu %u: %s SMM, smbase 0x%llx\",\n\t\t  __entry->vcpu_id,\n\t\t  __entry->entering ? \"entering\" : \"leaving\",\n\t\t  __entry->smbase)\n);\n\n \nTRACE_EVENT(kvm_pi_irte_update,\n\tTP_PROTO(unsigned int host_irq, unsigned int vcpu_id,\n\t\t unsigned int gsi, unsigned int gvec,\n\t\t u64 pi_desc_addr, bool set),\n\tTP_ARGS(host_irq, vcpu_id, gsi, gvec, pi_desc_addr, set),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\thost_irq\t)\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\tunsigned int,\tgsi\t\t)\n\t\t__field(\tunsigned int,\tgvec\t\t)\n\t\t__field(\tu64,\t\tpi_desc_addr\t)\n\t\t__field(\tbool,\t\tset\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->host_irq\t= host_irq;\n\t\t__entry->vcpu_id\t= vcpu_id;\n\t\t__entry->gsi\t\t= gsi;\n\t\t__entry->gvec\t\t= gvec;\n\t\t__entry->pi_desc_addr\t= pi_desc_addr;\n\t\t__entry->set\t\t= set;\n\t),\n\n\tTP_printk(\"VT-d PI is %s for irq %u, vcpu %u, gsi: 0x%x, \"\n\t\t  \"gvec: 0x%x, pi_desc_addr: 0x%llx\",\n\t\t  __entry->set ? \"enabled and being updated\" : \"disabled\",\n\t\t  __entry->host_irq,\n\t\t  __entry->vcpu_id,\n\t\t  __entry->gsi,\n\t\t  __entry->gvec,\n\t\t  __entry->pi_desc_addr)\n);\n\n \nTRACE_EVENT(kvm_hv_notify_acked_sint,\n\tTP_PROTO(int vcpu_id, u32 sint),\n\tTP_ARGS(vcpu_id, sint),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, sint)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->sint = sint;\n\t),\n\n\tTP_printk(\"vcpu_id %d sint %u\", __entry->vcpu_id, __entry->sint)\n);\n\n \nTRACE_EVENT(kvm_hv_synic_set_irq,\n\tTP_PROTO(int vcpu_id, u32 sint, int vector, int ret),\n\tTP_ARGS(vcpu_id, sint, vector, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, sint)\n\t\t__field(int, vector)\n\t\t__field(int, ret)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->sint = sint;\n\t\t__entry->vector = vector;\n\t\t__entry->ret = ret;\n\t),\n\n\tTP_printk(\"vcpu_id %d sint %u vector %d ret %d\",\n\t\t  __entry->vcpu_id, __entry->sint, __entry->vector,\n\t\t  __entry->ret)\n);\n\n \nTRACE_EVENT(kvm_hv_synic_send_eoi,\n\tTP_PROTO(int vcpu_id, int vector),\n\tTP_ARGS(vcpu_id, vector),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, sint)\n\t\t__field(int, vector)\n\t\t__field(int, ret)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->vector\t= vector;\n\t),\n\n\tTP_printk(\"vcpu_id %d vector %d\", __entry->vcpu_id, __entry->vector)\n);\n\n \nTRACE_EVENT(kvm_hv_synic_set_msr,\n\tTP_PROTO(int vcpu_id, u32 msr, u64 data, bool host),\n\tTP_ARGS(vcpu_id, msr, data, host),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, msr)\n\t\t__field(u64, data)\n\t\t__field(bool, host)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->msr = msr;\n\t\t__entry->data = data;\n\t\t__entry->host = host\n\t),\n\n\tTP_printk(\"vcpu_id %d msr 0x%x data 0x%llx host %d\",\n\t\t  __entry->vcpu_id, __entry->msr, __entry->data, __entry->host)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_set_config,\n\tTP_PROTO(int vcpu_id, int timer_index, u64 config, bool host),\n\tTP_ARGS(vcpu_id, timer_index, config, host),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t\t__field(u64, config)\n\t\t__field(bool, host)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t\t__entry->config = config;\n\t\t__entry->host = host;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d config 0x%llx host %d\",\n\t\t  __entry->vcpu_id, __entry->timer_index, __entry->config,\n\t\t  __entry->host)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_set_count,\n\tTP_PROTO(int vcpu_id, int timer_index, u64 count, bool host),\n\tTP_ARGS(vcpu_id, timer_index, count, host),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t\t__field(u64, count)\n\t\t__field(bool, host)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t\t__entry->count = count;\n\t\t__entry->host = host;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d count %llu host %d\",\n\t\t  __entry->vcpu_id, __entry->timer_index, __entry->count,\n\t\t  __entry->host)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_start_periodic,\n\tTP_PROTO(int vcpu_id, int timer_index, u64 time_now, u64 exp_time),\n\tTP_ARGS(vcpu_id, timer_index, time_now, exp_time),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t\t__field(u64, time_now)\n\t\t__field(u64, exp_time)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t\t__entry->time_now = time_now;\n\t\t__entry->exp_time = exp_time;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d time_now %llu exp_time %llu\",\n\t\t  __entry->vcpu_id, __entry->timer_index, __entry->time_now,\n\t\t  __entry->exp_time)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_start_one_shot,\n\tTP_PROTO(int vcpu_id, int timer_index, u64 time_now, u64 count),\n\tTP_ARGS(vcpu_id, timer_index, time_now, count),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t\t__field(u64, time_now)\n\t\t__field(u64, count)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t\t__entry->time_now = time_now;\n\t\t__entry->count = count;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d time_now %llu count %llu\",\n\t\t  __entry->vcpu_id, __entry->timer_index, __entry->time_now,\n\t\t  __entry->count)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_callback,\n\tTP_PROTO(int vcpu_id, int timer_index),\n\tTP_ARGS(vcpu_id, timer_index),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d\",\n\t\t  __entry->vcpu_id, __entry->timer_index)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_expiration,\n\tTP_PROTO(int vcpu_id, int timer_index, int direct, int msg_send_result),\n\tTP_ARGS(vcpu_id, timer_index, direct, msg_send_result),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t\t__field(int, direct)\n\t\t__field(int, msg_send_result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t\t__entry->direct = direct;\n\t\t__entry->msg_send_result = msg_send_result;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d direct %d send result %d\",\n\t\t  __entry->vcpu_id, __entry->timer_index,\n\t\t  __entry->direct, __entry->msg_send_result)\n);\n\n \nTRACE_EVENT(kvm_hv_stimer_cleanup,\n\tTP_PROTO(int vcpu_id, int timer_index),\n\tTP_ARGS(vcpu_id, timer_index),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(int, timer_index)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->timer_index = timer_index;\n\t),\n\n\tTP_printk(\"vcpu_id %d timer %d\",\n\t\t  __entry->vcpu_id, __entry->timer_index)\n);\n\nTRACE_EVENT(kvm_apicv_inhibit_changed,\n\t    TP_PROTO(int reason, bool set, unsigned long inhibits),\n\t    TP_ARGS(reason, set, inhibits),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, reason)\n\t\t__field(bool, set)\n\t\t__field(unsigned long, inhibits)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->reason = reason;\n\t\t__entry->set = set;\n\t\t__entry->inhibits = inhibits;\n\t),\n\n\tTP_printk(\"%s reason=%u, inhibits=0x%lx\",\n\t\t  __entry->set ? \"set\" : \"cleared\",\n\t\t  __entry->reason, __entry->inhibits)\n);\n\nTRACE_EVENT(kvm_apicv_accept_irq,\n\t    TP_PROTO(__u32 apicid, __u16 dm, __u16 tm, __u8 vec),\n\t    TP_ARGS(apicid, dm, tm, vec),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\tapicid\t\t)\n\t\t__field(\t__u16,\t\tdm\t\t)\n\t\t__field(\t__u16,\t\ttm\t\t)\n\t\t__field(\t__u8,\t\tvec\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->apicid\t\t= apicid;\n\t\t__entry->dm\t\t= dm;\n\t\t__entry->tm\t\t= tm;\n\t\t__entry->vec\t\t= vec;\n\t),\n\n\tTP_printk(\"apicid %x vec %u (%s|%s)\",\n\t\t  __entry->apicid, __entry->vec,\n\t\t  __print_symbolic((__entry->dm >> 8 & 0x7), kvm_deliver_mode),\n\t\t  __entry->tm ? \"level\" : \"edge\")\n);\n\n \nTRACE_EVENT(kvm_avic_incomplete_ipi,\n\t    TP_PROTO(u32 vcpu, u32 icrh, u32 icrl, u32 id, u32 index),\n\t    TP_ARGS(vcpu, icrh, icrl, id, index),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vcpu)\n\t\t__field(u32, icrh)\n\t\t__field(u32, icrl)\n\t\t__field(u32, id)\n\t\t__field(u32, index)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu = vcpu;\n\t\t__entry->icrh = icrh;\n\t\t__entry->icrl = icrl;\n\t\t__entry->id = id;\n\t\t__entry->index = index;\n\t),\n\n\tTP_printk(\"vcpu=%u, icrh:icrl=%#010x:%08x, id=%u, index=%u\",\n\t\t  __entry->vcpu, __entry->icrh, __entry->icrl,\n\t\t  __entry->id, __entry->index)\n);\n\nTRACE_EVENT(kvm_avic_unaccelerated_access,\n\t    TP_PROTO(u32 vcpu, u32 offset, bool ft, bool rw, u32 vec),\n\t    TP_ARGS(vcpu, offset, ft, rw, vec),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vcpu)\n\t\t__field(u32, offset)\n\t\t__field(bool, ft)\n\t\t__field(bool, rw)\n\t\t__field(u32, vec)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu = vcpu;\n\t\t__entry->offset = offset;\n\t\t__entry->ft = ft;\n\t\t__entry->rw = rw;\n\t\t__entry->vec = vec;\n\t),\n\n\tTP_printk(\"vcpu=%u, offset=%#x(%s), %s, %s, vec=%#x\",\n\t\t  __entry->vcpu,\n\t\t  __entry->offset,\n\t\t  __print_symbolic(__entry->offset, kvm_trace_symbol_apic),\n\t\t  __entry->ft ? \"trap\" : \"fault\",\n\t\t  __entry->rw ? \"write\" : \"read\",\n\t\t  __entry->vec)\n);\n\nTRACE_EVENT(kvm_avic_ga_log,\n\t    TP_PROTO(u32 vmid, u32 vcpuid),\n\t    TP_ARGS(vmid, vcpuid),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vmid)\n\t\t__field(u32, vcpuid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vmid = vmid;\n\t\t__entry->vcpuid = vcpuid;\n\t),\n\n\tTP_printk(\"vmid=%u, vcpuid=%u\",\n\t\t  __entry->vmid, __entry->vcpuid)\n);\n\nTRACE_EVENT(kvm_avic_kick_vcpu_slowpath,\n\t    TP_PROTO(u32 icrh, u32 icrl, u32 index),\n\t    TP_ARGS(icrh, icrl, index),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, icrh)\n\t\t__field(u32, icrl)\n\t\t__field(u32, index)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->icrh = icrh;\n\t\t__entry->icrl = icrl;\n\t\t__entry->index = index;\n\t),\n\n\tTP_printk(\"icrh:icrl=%#08x:%08x, index=%u\",\n\t\t  __entry->icrh, __entry->icrl, __entry->index)\n);\n\nTRACE_EVENT(kvm_avic_doorbell,\n\t    TP_PROTO(u32 vcpuid, u32 apicid),\n\t    TP_ARGS(vcpuid, apicid),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vcpuid)\n\t\t__field(u32, apicid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpuid = vcpuid;\n\t\t__entry->apicid = apicid;\n\t),\n\n\tTP_printk(\"vcpuid=%u, apicid=%u\",\n\t\t  __entry->vcpuid, __entry->apicid)\n);\n\nTRACE_EVENT(kvm_hv_timer_state,\n\t\tTP_PROTO(unsigned int vcpu_id, unsigned int hv_timer_in_use),\n\t\tTP_ARGS(vcpu_id, hv_timer_in_use),\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, vcpu_id)\n\t\t\t__field(unsigned int, hv_timer_in_use)\n\t\t\t),\n\t\tTP_fast_assign(\n\t\t\t__entry->vcpu_id = vcpu_id;\n\t\t\t__entry->hv_timer_in_use = hv_timer_in_use;\n\t\t\t),\n\t\tTP_printk(\"vcpu_id %x hv_timer %x\",\n\t\t\t__entry->vcpu_id,\n\t\t\t__entry->hv_timer_in_use)\n);\n\n \nTRACE_EVENT(kvm_hv_flush_tlb,\n\tTP_PROTO(u64 processor_mask, u64 address_space, u64 flags, bool guest_mode),\n\tTP_ARGS(processor_mask, address_space, flags, guest_mode),\n\n\tTP_STRUCT__entry(\n\t\t__field(u64, processor_mask)\n\t\t__field(u64, address_space)\n\t\t__field(u64, flags)\n\t\t__field(bool, guest_mode)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->processor_mask = processor_mask;\n\t\t__entry->address_space = address_space;\n\t\t__entry->flags = flags;\n\t\t__entry->guest_mode = guest_mode;\n\t),\n\n\tTP_printk(\"processor_mask 0x%llx address_space 0x%llx flags 0x%llx %s\",\n\t\t  __entry->processor_mask, __entry->address_space,\n\t\t  __entry->flags, __entry->guest_mode ? \"(L2)\" : \"\")\n);\n\n \nTRACE_EVENT(kvm_hv_flush_tlb_ex,\n\tTP_PROTO(u64 valid_bank_mask, u64 format, u64 address_space, u64 flags, bool guest_mode),\n\tTP_ARGS(valid_bank_mask, format, address_space, flags, guest_mode),\n\n\tTP_STRUCT__entry(\n\t\t__field(u64, valid_bank_mask)\n\t\t__field(u64, format)\n\t\t__field(u64, address_space)\n\t\t__field(u64, flags)\n\t\t__field(bool, guest_mode)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->valid_bank_mask = valid_bank_mask;\n\t\t__entry->format = format;\n\t\t__entry->address_space = address_space;\n\t\t__entry->flags = flags;\n\t\t__entry->guest_mode = guest_mode;\n\t),\n\n\tTP_printk(\"valid_bank_mask 0x%llx format 0x%llx \"\n\t\t  \"address_space 0x%llx flags 0x%llx %s\",\n\t\t  __entry->valid_bank_mask, __entry->format,\n\t\t  __entry->address_space, __entry->flags,\n\t\t  __entry->guest_mode ? \"(L2)\" : \"\")\n);\n\n \nTRACE_EVENT(kvm_hv_send_ipi,\n\tTP_PROTO(u32 vector, u64 processor_mask),\n\tTP_ARGS(vector, processor_mask),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vector)\n\t\t__field(u64, processor_mask)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vector = vector;\n\t\t__entry->processor_mask = processor_mask;\n\t),\n\n\tTP_printk(\"vector %x processor_mask 0x%llx\",\n\t\t  __entry->vector, __entry->processor_mask)\n);\n\nTRACE_EVENT(kvm_hv_send_ipi_ex,\n\tTP_PROTO(u32 vector, u64 format, u64 valid_bank_mask),\n\tTP_ARGS(vector, format, valid_bank_mask),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, vector)\n\t\t__field(u64, format)\n\t\t__field(u64, valid_bank_mask)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vector = vector;\n\t\t__entry->format = format;\n\t\t__entry->valid_bank_mask = valid_bank_mask;\n\t),\n\n\tTP_printk(\"vector %x format %llx valid_bank_mask 0x%llx\",\n\t\t  __entry->vector, __entry->format,\n\t\t  __entry->valid_bank_mask)\n);\n\nTRACE_EVENT(kvm_pv_tlb_flush,\n\tTP_PROTO(unsigned int vcpu_id, bool need_flush_tlb),\n\tTP_ARGS(vcpu_id, need_flush_tlb),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tvcpu_id\t\t)\n\t\t__field(\tbool,\tneed_flush_tlb\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id\t= vcpu_id;\n\t\t__entry->need_flush_tlb = need_flush_tlb;\n\t),\n\n\tTP_printk(\"vcpu %u need_flush_tlb %s\", __entry->vcpu_id,\n\t\t__entry->need_flush_tlb ? \"true\" : \"false\")\n);\n\n \nTRACE_EVENT(kvm_nested_vmenter_failed,\n\tTP_PROTO(const char *msg, u32 err),\n\tTP_ARGS(msg, err),\n\n\tTP_STRUCT__entry(\n\t\t__string(msg, msg)\n\t\t__field(u32, err)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(msg, msg);\n\t\t__entry->err = err;\n\t),\n\n\tTP_printk(\"%s%s\", __get_str(msg), !__entry->err ? \"\" :\n\t\t__print_symbolic(__entry->err, VMX_VMENTER_INSTRUCTION_ERRORS))\n);\n\n \nTRACE_EVENT(kvm_hv_syndbg_set_msr,\n\tTP_PROTO(int vcpu_id, u32 vp_index, u32 msr, u64 data),\n\tTP_ARGS(vcpu_id, vp_index, msr, data),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, vp_index)\n\t\t__field(u32, msr)\n\t\t__field(u64, data)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->vp_index = vp_index;\n\t\t__entry->msr = msr;\n\t\t__entry->data = data;\n\t),\n\n\tTP_printk(\"vcpu_id %d vp_index %u msr 0x%x data 0x%llx\",\n\t\t  __entry->vcpu_id, __entry->vp_index, __entry->msr,\n\t\t  __entry->data)\n);\n\n \nTRACE_EVENT(kvm_hv_syndbg_get_msr,\n\tTP_PROTO(int vcpu_id, u32 vp_index, u32 msr, u64 data),\n\tTP_ARGS(vcpu_id, vp_index, msr, data),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, vcpu_id)\n\t\t__field(u32, vp_index)\n\t\t__field(u32, msr)\n\t\t__field(u64, data)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id = vcpu_id;\n\t\t__entry->vp_index = vp_index;\n\t\t__entry->msr = msr;\n\t\t__entry->data = data;\n\t),\n\n\tTP_printk(\"vcpu_id %d vp_index %u msr 0x%x data 0x%llx\",\n\t\t  __entry->vcpu_id, __entry->vp_index, __entry->msr,\n\t\t  __entry->data)\n);\n\n \nTRACE_EVENT(kvm_vmgexit_enter,\n\tTP_PROTO(unsigned int vcpu_id, struct ghcb *ghcb),\n\tTP_ARGS(vcpu_id, ghcb),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, vcpu_id)\n\t\t__field(u64, exit_reason)\n\t\t__field(u64, info1)\n\t\t__field(u64, info2)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id     = vcpu_id;\n\t\t__entry->exit_reason = ghcb->save.sw_exit_code;\n\t\t__entry->info1       = ghcb->save.sw_exit_info_1;\n\t\t__entry->info2       = ghcb->save.sw_exit_info_2;\n\t),\n\n\tTP_printk(\"vcpu %u, exit_reason %llx, exit_info1 %llx, exit_info2 %llx\",\n\t\t  __entry->vcpu_id, __entry->exit_reason,\n\t\t  __entry->info1, __entry->info2)\n);\n\n \nTRACE_EVENT(kvm_vmgexit_exit,\n\tTP_PROTO(unsigned int vcpu_id, struct ghcb *ghcb),\n\tTP_ARGS(vcpu_id, ghcb),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, vcpu_id)\n\t\t__field(u64, exit_reason)\n\t\t__field(u64, info1)\n\t\t__field(u64, info2)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id     = vcpu_id;\n\t\t__entry->exit_reason = ghcb->save.sw_exit_code;\n\t\t__entry->info1       = ghcb->save.sw_exit_info_1;\n\t\t__entry->info2       = ghcb->save.sw_exit_info_2;\n\t),\n\n\tTP_printk(\"vcpu %u, exit_reason %llx, exit_info1 %llx, exit_info2 %llx\",\n\t\t  __entry->vcpu_id, __entry->exit_reason,\n\t\t  __entry->info1, __entry->info2)\n);\n\n \nTRACE_EVENT(kvm_vmgexit_msr_protocol_enter,\n\tTP_PROTO(unsigned int vcpu_id, u64 ghcb_gpa),\n\tTP_ARGS(vcpu_id, ghcb_gpa),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, vcpu_id)\n\t\t__field(u64, ghcb_gpa)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id  = vcpu_id;\n\t\t__entry->ghcb_gpa = ghcb_gpa;\n\t),\n\n\tTP_printk(\"vcpu %u, ghcb_gpa %016llx\",\n\t\t  __entry->vcpu_id, __entry->ghcb_gpa)\n);\n\n \nTRACE_EVENT(kvm_vmgexit_msr_protocol_exit,\n\tTP_PROTO(unsigned int vcpu_id, u64 ghcb_gpa, int result),\n\tTP_ARGS(vcpu_id, ghcb_gpa, result),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, vcpu_id)\n\t\t__field(u64, ghcb_gpa)\n\t\t__field(int, result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->vcpu_id  = vcpu_id;\n\t\t__entry->ghcb_gpa = ghcb_gpa;\n\t\t__entry->result   = result;\n\t),\n\n\tTP_printk(\"vcpu %u, ghcb_gpa %016llx, result %d\",\n\t\t  __entry->vcpu_id, __entry->ghcb_gpa, __entry->result)\n);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH ../../arch/x86/kvm\n#undef TRACE_INCLUDE_FILE\n#define TRACE_INCLUDE_FILE trace\n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}