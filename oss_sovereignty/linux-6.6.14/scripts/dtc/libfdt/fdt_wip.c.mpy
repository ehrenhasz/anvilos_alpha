{
  "module_name": "fdt_wip.c",
  "hash_id": "2c7ca6a6ceebc94b81f9def8d4a34cd2e1bd263c79a47993e84cd3d42ea261f7",
  "original_prompt": "Ingested from linux-6.6.14/scripts/dtc/libfdt/fdt_wip.c",
  "human_readable_source": "\n \n#include \"libfdt_env.h\"\n\n#include <fdt.h>\n#include <libfdt.h>\n\n#include \"libfdt_internal.h\"\n\nint fdt_setprop_inplace_namelen_partial(void *fdt, int nodeoffset,\n\t\t\t\t\tconst char *name, int namelen,\n\t\t\t\t\tuint32_t idx, const void *val,\n\t\t\t\t\tint len)\n{\n\tvoid *propval;\n\tint proplen;\n\n\tpropval = fdt_getprop_namelen_w(fdt, nodeoffset, name, namelen,\n\t\t\t\t\t&proplen);\n\tif (!propval)\n\t\treturn proplen;\n\n\tif ((unsigned)proplen < (len + idx))\n\t\treturn -FDT_ERR_NOSPACE;\n\n\tmemcpy((char *)propval + idx, val, len);\n\treturn 0;\n}\n\nint fdt_setprop_inplace(void *fdt, int nodeoffset, const char *name,\n\t\t\tconst void *val, int len)\n{\n\tconst void *propval;\n\tint proplen;\n\n\tpropval = fdt_getprop(fdt, nodeoffset, name, &proplen);\n\tif (!propval)\n\t\treturn proplen;\n\n\tif (proplen != len)\n\t\treturn -FDT_ERR_NOSPACE;\n\n\treturn fdt_setprop_inplace_namelen_partial(fdt, nodeoffset, name,\n\t\t\t\t\t\t   strlen(name), 0,\n\t\t\t\t\t\t   val, len);\n}\n\nstatic void fdt_nop_region_(void *start, int len)\n{\n\tfdt32_t *p;\n\n\tfor (p = start; (char *)p < ((char *)start + len); p++)\n\t\t*p = cpu_to_fdt32(FDT_NOP);\n}\n\nint fdt_nop_property(void *fdt, int nodeoffset, const char *name)\n{\n\tstruct fdt_property *prop;\n\tint len;\n\n\tprop = fdt_get_property_w(fdt, nodeoffset, name, &len);\n\tif (!prop)\n\t\treturn len;\n\n\tfdt_nop_region_(prop, len + sizeof(*prop));\n\n\treturn 0;\n}\n\nint fdt_node_end_offset_(void *fdt, int offset)\n{\n\tint depth = 0;\n\n\twhile ((offset >= 0) && (depth >= 0))\n\t\toffset = fdt_next_node(fdt, offset, &depth);\n\n\treturn offset;\n}\n\nint fdt_nop_node(void *fdt, int nodeoffset)\n{\n\tint endoffset;\n\n\tendoffset = fdt_node_end_offset_(fdt, nodeoffset);\n\tif (endoffset < 0)\n\t\treturn endoffset;\n\n\tfdt_nop_region_(fdt_offset_ptr_w(fdt, nodeoffset, 0),\n\t\t\tendoffset - nodeoffset);\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}