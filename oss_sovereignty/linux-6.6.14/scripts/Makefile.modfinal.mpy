{
  "module_name": "Makefile.modfinal",
  "hash_id": "8c776b7318632c5accec8a49ea3119c00e6c0c7aa2883a8e628a0c2d776a731c",
  "original_prompt": "Ingested from linux-6.6.14/scripts/Makefile.modfinal",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\n# ===========================================================================\n# Module final link\n# ===========================================================================\n\nPHONY := __modfinal\n__modfinal:\n\ninclude include/config/auto.conf\ninclude $(srctree)/scripts/Kbuild.include\n\n# for c_flags\ninclude $(srctree)/scripts/Makefile.lib\n\n# find all modules listed in modules.order\nmodules := $(call read-file, $(MODORDER))\n\n__modfinal: $(modules:%.o=%.ko)\n\t@:\n\n# modname and part-of-module are set to make c_flags define proper module flags\nmodname = $(notdir $(@:.mod.o=))\npart-of-module = y\n\nquiet_cmd_cc_o_c = CC [M]  $@\n      cmd_cc_o_c = $(CC) $(filter-out $(CC_FLAGS_CFI) $(CFLAGS_GCOV), $(c_flags)) -c -o $@ $<\n\n%.mod.o: %.mod.c FORCE\n\t$(call if_changed_dep,cc_o_c)\n\nARCH_POSTLINK := $(wildcard $(srctree)/arch/$(SRCARCH)/Makefile.postlink)\n\nquiet_cmd_ld_ko_o = LD [M]  $@\n      cmd_ld_ko_o +=\t\t\t\t\t\t\t\\\n\t$(LD) -r $(KBUILD_LDFLAGS)\t\t\t\t\t\\\n\t\t$(KBUILD_LDFLAGS_MODULE) $(LDFLAGS_MODULE)\t\t\\\n\t\t-T scripts/module.lds -o $@ $(filter %.o, $^);\t\t\\\n\t$(if $(ARCH_POSTLINK), $(MAKE) -f $(ARCH_POSTLINK) $@, true)\n\nquiet_cmd_btf_ko = BTF [M] $@\n      cmd_btf_ko = \t\t\t\t\t\t\t\\\n\tif [ ! -f vmlinux ]; then\t\t\t\t\t\\\n\t\tprintf \"Skipping BTF generation for %s due to unavailability of vmlinux\\n\" $@ 1>&2; \\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tLLVM_OBJCOPY=\"$(OBJCOPY)\" $(PAHOLE) -J $(PAHOLE_FLAGS) --btf_base vmlinux $@; \\\n\t\t$(RESOLVE_BTFIDS) -b vmlinux $@; \t\t\t\\\n\tfi;\n\n# Same as newer-prereqs, but allows to exclude specified extra dependencies\nnewer_prereqs_except = $(filter-out $(PHONY) $(1),$?)\n\n# Same as if_changed, but allows to exclude specified extra dependencies\nif_changed_except = $(if $(call newer_prereqs_except,$(2))$(cmd-check),      \\\n\t$(cmd);                                                              \\\n\tprintf '%s\\n' 'savedcmd_$@ := $(make-cmd)' > $(dot-target).cmd, @:)\n\n# Re-generate module BTFs if either module's .ko or vmlinux changed\n%.ko: %.o %.mod.o scripts/module.lds $(and $(CONFIG_DEBUG_INFO_BTF_MODULES),$(KBUILD_BUILTIN),vmlinux) FORCE\n\t+$(call if_changed_except,ld_ko_o,vmlinux)\nifdef CONFIG_DEBUG_INFO_BTF_MODULES\n\t+$(if $(newer-prereqs),$(call cmd,btf_ko))\nendif\n\ntargets += $(modules:%.o=%.ko) $(modules:%.o=%.mod.o)\n\n# Add FORCE to the prequisites of a target to force it to be always rebuilt.\n# ---------------------------------------------------------------------------\n\nPHONY += FORCE\nFORCE:\n\n# Read all saved command lines and dependencies for the $(targets) we\n# may be building above, using $(if_changed{,_dep}). As an\n# optimization, we don't need to read them if the target does not\n# exist, we will rebuild anyway in that case.\n\nexisting-targets := $(wildcard $(sort $(targets)))\n\n-include $(foreach f,$(existing-targets),$(dir $(f)).$(notdir $(f)).cmd)\n\n.PHONY: $(PHONY)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}