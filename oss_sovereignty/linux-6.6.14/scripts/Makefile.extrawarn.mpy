{
  "module_name": "Makefile.extrawarn",
  "hash_id": "5a18624833ed1dc47b6fe289f4c2fff47b4256cf2490e273dbeccbafab3e322c",
  "original_prompt": "Ingested from linux-6.6.14/scripts/Makefile.extrawarn",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n# ==========================================================================\n# make W=... settings\n#\n# There are four warning groups enabled by W=1, W=2, W=3, and W=e\n# They are independent, and can be combined like W=12 or W=123e.\n# ==========================================================================\n\n# Default set of warnings, always enabled\nKBUILD_CFLAGS += -Wall\nKBUILD_CFLAGS += -Wundef\nKBUILD_CFLAGS += -Werror=implicit-function-declaration\nKBUILD_CFLAGS += -Werror=implicit-int\nKBUILD_CFLAGS += -Werror=return-type\nKBUILD_CFLAGS += -Werror=strict-prototypes\nKBUILD_CFLAGS += -Wno-format-security\nKBUILD_CFLAGS += -Wno-trigraphs\nKBUILD_CFLAGS += $(call cc-disable-warning,frame-address,)\nKBUILD_CFLAGS += $(call cc-disable-warning, address-of-packed-member)\n\nifneq ($(CONFIG_FRAME_WARN),0)\nKBUILD_CFLAGS += -Wframe-larger-than=$(CONFIG_FRAME_WARN)\nendif\n\nKBUILD_CPPFLAGS-$(CONFIG_WERROR) += -Werror\nKBUILD_CPPFLAGS += $(KBUILD_CPPFLAGS-y)\nKBUILD_CFLAGS-$(CONFIG_CC_NO_ARRAY_BOUNDS) += -Wno-array-bounds\n\nifdef CONFIG_CC_IS_CLANG\n# The kernel builds with '-std=gnu11' so use of GNU extensions is acceptable.\nKBUILD_CFLAGS += -Wno-gnu\nelse\n\n# gcc inanely warns about local variables called 'main'\nKBUILD_CFLAGS += -Wno-main\nendif\n\n# These warnings generated too much noise in a regular build.\n# Use make W=1 to enable them (see scripts/Makefile.extrawarn)\nKBUILD_CFLAGS += $(call cc-disable-warning, unused-but-set-variable)\nKBUILD_CFLAGS += $(call cc-disable-warning, unused-const-variable)\n\n# These result in bogus false positives\nKBUILD_CFLAGS += $(call cc-disable-warning, dangling-pointer)\n\n# Variable Length Arrays (VLAs) should not be used anywhere in the kernel\nKBUILD_CFLAGS += -Wvla\n\n# disable pointer signed / unsigned warnings in gcc 4.0\nKBUILD_CFLAGS += -Wno-pointer-sign\n\n# In order to make sure new function cast mismatches are not introduced\n# in the kernel (to avoid tripping CFI checking), the kernel should be\n# globally built with -Wcast-function-type.\nKBUILD_CFLAGS += $(call cc-option, -Wcast-function-type)\n\n# The allocators already balk at large sizes, so silence the compiler\n# warnings for bounds checks involving those possible values. While\n# -Wno-alloc-size-larger-than would normally be used here, earlier versions\n# of gcc (<9.1) weirdly don't handle the option correctly when _other_\n# warnings are produced (?!). Using -Walloc-size-larger-than=SIZE_MAX\n# doesn't work (as it is documented to), silently resolving to \"0\" prior to\n# version 9.1 (and producing an error more recently). Numeric values larger\n# than PTRDIFF_MAX also don't work prior to version 9.1, which are silently\n# ignored, continuing to default to PTRDIFF_MAX. So, left with no other\n# choice, we must perform a versioned check to disable this warning.\n# https://lore.kernel.org/lkml/20210824115859.187f272f@canb.auug.org.au\nKBUILD_CFLAGS-$(call gcc-min-version, 90100) += -Wno-alloc-size-larger-than\nKBUILD_CFLAGS += $(KBUILD_CFLAGS-y) $(CONFIG_CC_IMPLICIT_FALLTHROUGH)\n\n# Prohibit date/time macros, which would make the build non-deterministic\nKBUILD_CFLAGS += -Werror=date-time\n\n# enforce correct pointer usage\nKBUILD_CFLAGS += $(call cc-option,-Werror=incompatible-pointer-types)\n\n# Require designated initializers for all marked structures\nKBUILD_CFLAGS += $(call cc-option,-Werror=designated-init)\n\n# Warn if there is an enum types mismatch\nKBUILD_CFLAGS += $(call cc-option,-Wenum-conversion)\n\n# backward compatibility\nKBUILD_EXTRA_WARN ?= $(KBUILD_ENABLE_EXTRA_GCC_CHECKS)\n\nifeq (\"$(origin W)\", \"command line\")\n  KBUILD_EXTRA_WARN := $(W)\nendif\n\nexport KBUILD_EXTRA_WARN\n\n#\n# W=1 - warnings which may be relevant and do not occur too often\n#\nifneq ($(findstring 1, $(KBUILD_EXTRA_WARN)),)\n\nKBUILD_CFLAGS += -Wextra -Wunused -Wno-unused-parameter\nKBUILD_CFLAGS += -Wmissing-declarations\nKBUILD_CFLAGS += $(call cc-option, -Wrestrict)\nKBUILD_CFLAGS += -Wmissing-format-attribute\nKBUILD_CFLAGS += -Wmissing-prototypes\nKBUILD_CFLAGS += -Wold-style-definition\nKBUILD_CFLAGS += -Wmissing-include-dirs\nKBUILD_CFLAGS += $(call cc-option, -Wunused-but-set-variable)\nKBUILD_CFLAGS += $(call cc-option, -Wunused-const-variable)\nKBUILD_CFLAGS += $(call cc-option, -Wpacked-not-aligned)\nKBUILD_CFLAGS += $(call cc-option, -Wformat-overflow)\nKBUILD_CFLAGS += $(call cc-option, -Wformat-truncation)\nKBUILD_CFLAGS += $(call cc-option, -Wstringop-overflow)\nKBUILD_CFLAGS += $(call cc-option, -Wstringop-truncation)\n\nKBUILD_CPPFLAGS += -Wundef\nKBUILD_CPPFLAGS += -DKBUILD_EXTRA_WARN1\n\nelse\n\n# Some diagnostics enabled by default are noisy.\n# Suppress them by using -Wno... except for W=1.\nKBUILD_CFLAGS += $(call cc-disable-warning, unused-but-set-variable)\nKBUILD_CFLAGS += $(call cc-disable-warning, unused-const-variable)\nKBUILD_CFLAGS += $(call cc-disable-warning, restrict)\nKBUILD_CFLAGS += $(call cc-disable-warning, packed-not-aligned)\nKBUILD_CFLAGS += $(call cc-disable-warning, format-overflow)\nKBUILD_CFLAGS += $(call cc-disable-warning, format-truncation)\nKBUILD_CFLAGS += $(call cc-disable-warning, stringop-overflow)\nKBUILD_CFLAGS += $(call cc-disable-warning, stringop-truncation)\n\nifdef CONFIG_CC_IS_CLANG\n# Clang before clang-16 would warn on default argument promotions.\nifneq ($(call clang-min-version, 160000),y)\n# Disable -Wformat\nKBUILD_CFLAGS += -Wno-format\n# Then re-enable flags that were part of the -Wformat group that aren't\n# problematic.\nKBUILD_CFLAGS += -Wformat-extra-args -Wformat-invalid-specifier\nKBUILD_CFLAGS += -Wformat-zero-length -Wnonnull\n# Requires clang-12+.\nifeq ($(call clang-min-version, 120000),y)\nKBUILD_CFLAGS += -Wformat-insufficient-args\nendif\nendif\nKBUILD_CFLAGS += $(call cc-disable-warning, pointer-to-enum-cast)\nKBUILD_CFLAGS += -Wno-tautological-constant-out-of-range-compare\nKBUILD_CFLAGS += $(call cc-disable-warning, unaligned-access)\nKBUILD_CFLAGS += $(call cc-disable-warning, cast-function-type-strict)\nendif\n\nendif\n\n#\n# W=2 - warnings which occur quite often but may still be relevant\n#\nifneq ($(findstring 2, $(KBUILD_EXTRA_WARN)),)\n\nKBUILD_CFLAGS += -Wdisabled-optimization\nKBUILD_CFLAGS += -Wshadow\nKBUILD_CFLAGS += $(call cc-option, -Wlogical-op)\nKBUILD_CFLAGS += -Wmissing-field-initializers\nKBUILD_CFLAGS += -Wtype-limits\nKBUILD_CFLAGS += $(call cc-option, -Wmaybe-uninitialized)\nKBUILD_CFLAGS += $(call cc-option, -Wunused-macros)\n\nifdef CONFIG_CC_IS_CLANG\nKBUILD_CFLAGS += -Winitializer-overrides\nendif\n\nKBUILD_CPPFLAGS += -DKBUILD_EXTRA_WARN2\n\nelse\n\n# The following turn off the warnings enabled by -Wextra\nKBUILD_CFLAGS += -Wno-missing-field-initializers\nKBUILD_CFLAGS += -Wno-type-limits\nKBUILD_CFLAGS += -Wno-shift-negative-value\n\nifdef CONFIG_CC_IS_CLANG\nKBUILD_CFLAGS += -Wno-initializer-overrides\nelse\nKBUILD_CFLAGS += -Wno-maybe-uninitialized\nendif\n\nendif\n\n#\n# W=3 - more obscure warnings, can most likely be ignored\n#\nifneq ($(findstring 3, $(KBUILD_EXTRA_WARN)),)\n\nKBUILD_CFLAGS += -Wbad-function-cast\nKBUILD_CFLAGS += -Wcast-align\nKBUILD_CFLAGS += -Wcast-qual\nKBUILD_CFLAGS += -Wconversion\nKBUILD_CFLAGS += -Wpacked\nKBUILD_CFLAGS += -Wpadded\nKBUILD_CFLAGS += -Wpointer-arith\nKBUILD_CFLAGS += -Wredundant-decls\nKBUILD_CFLAGS += -Wsign-compare\nKBUILD_CFLAGS += -Wswitch-default\nKBUILD_CFLAGS += $(call cc-option, -Wpacked-bitfield-compat)\n\nKBUILD_CPPFLAGS += -DKBUILD_EXTRA_WARN3\n\nelse\n\n# The following turn off the warnings enabled by -Wextra\nKBUILD_CFLAGS += -Wno-sign-compare\n\nendif\n\n#\n# W=e - error out on warnings\n#\nifneq ($(findstring e, $(KBUILD_EXTRA_WARN)),)\n\nKBUILD_CFLAGS += -Werror\n\nendif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}