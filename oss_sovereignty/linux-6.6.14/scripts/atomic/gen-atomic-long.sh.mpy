{
  "module_name": "gen-atomic-long.sh",
  "hash_id": "5eb021a728817a49f43efd21c294a622ba4e825f1723ec1acd50218397a4c4b9",
  "original_prompt": "Ingested from linux-6.6.14/scripts/atomic/gen-atomic-long.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n\nATOMICDIR=$(dirname $0)\n\n. ${ATOMICDIR}/atomic-tbl.sh\n\n#gen_cast(arg, int, atomic)\ngen_cast()\n{\n\tlocal arg=\"$1\"; shift\n\tlocal int=\"$1\"; shift\n\tlocal atomic=\"$1\"; shift\n\n\t[ \"${arg%%:*}\" = \"p\" ] || return\n\n\tprintf \"($(gen_param_type \"${arg}\" \"${int}\" \"${atomic}\"))\"\n}\n\n#gen_args_cast(int, atomic, arg...)\ngen_args_cast()\n{\n\tlocal int=\"$1\"; shift\n\tlocal atomic=\"$1\"; shift\n\n\twhile [ \"$#\" -gt 0 ]; do\n\t\tlocal cast=\"$(gen_cast \"$1\" \"${int}\" \"${atomic}\")\"\n\t\tlocal arg=\"$(gen_param_name \"$1\")\"\n\t\tprintf \"${cast}${arg}\"\n\t\t[ \"$#\" -gt 1 ] && printf \", \"\n\t\tshift;\n\tdone\n}\n\n#gen_proto_order_variant(meta, pfx, name, sfx, order, arg...)\ngen_proto_order_variant()\n{\n\tlocal meta=\"$1\"; shift\n\tlocal pfx=\"$1\"; shift\n\tlocal name=\"$1\"; shift\n\tlocal sfx=\"$1\"; shift\n\tlocal order=\"$1\"; shift\n\n\tlocal atomicname=\"${pfx}${name}${sfx}${order}\"\n\n\tlocal ret=\"$(gen_ret_type \"${meta}\" \"long\")\"\n\tlocal params=\"$(gen_params \"long\" \"atomic_long\" \"$@\")\"\n\tlocal argscast_32=\"$(gen_args_cast \"int\" \"atomic\" \"$@\")\"\n\tlocal argscast_64=\"$(gen_args_cast \"s64\" \"atomic64\" \"$@\")\"\n\tlocal retstmt=\"$(gen_ret_stmt \"${meta}\")\"\n\n\tgen_kerneldoc \"raw_\" \"${meta}\" \"${pfx}\" \"${name}\" \"${sfx}\" \"${order}\" \"atomic_long\" \"long\" \"$@\"\n\ncat <<EOF\nstatic __always_inline ${ret}\nraw_atomic_long_${atomicname}(${params})\n{\n#ifdef CONFIG_64BIT\n\t${retstmt}raw_atomic64_${atomicname}(${argscast_64});\n#else\n\t${retstmt}raw_atomic_${atomicname}(${argscast_32});\n#endif\n}\n\nEOF\n}\n\ncat << EOF\n// SPDX-License-Identifier: GPL-2.0\n\n// Generated by $0\n// DO NOT MODIFY THIS FILE DIRECTLY\n\n#ifndef _LINUX_ATOMIC_LONG_H\n#define _LINUX_ATOMIC_LONG_H\n\n#include <linux/compiler.h>\n#include <asm/types.h>\n\n#ifdef CONFIG_64BIT\ntypedef atomic64_t atomic_long_t;\n#define ATOMIC_LONG_INIT(i)\t\tATOMIC64_INIT(i)\n#define atomic_long_cond_read_acquire\tatomic64_cond_read_acquire\n#define atomic_long_cond_read_relaxed\tatomic64_cond_read_relaxed\n#else\ntypedef atomic_t atomic_long_t;\n#define ATOMIC_LONG_INIT(i)\t\tATOMIC_INIT(i)\n#define atomic_long_cond_read_acquire\tatomic_cond_read_acquire\n#define atomic_long_cond_read_relaxed\tatomic_cond_read_relaxed\n#endif\n\nEOF\n\ngrep '^[a-z]' \"$1\" | while read name meta args; do\n\tgen_proto \"${meta}\" \"${name}\" ${args}\ndone\n\ncat <<EOF\n#endif /* _LINUX_ATOMIC_LONG_H */\nEOF\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}