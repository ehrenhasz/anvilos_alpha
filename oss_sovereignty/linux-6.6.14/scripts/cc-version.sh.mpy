{
  "module_name": "cc-version.sh",
  "hash_id": "2e7a69d846a36a3aa79db0e3d4910a38d1d1d4627bd69f7498b446b52069ca73",
  "original_prompt": "Ingested from linux-6.6.14/scripts/cc-version.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n#\n# Print the C compiler name and its version in a 5 or 6-digit form.\n# Also, perform the minimum version check.\n\nset -e\n\n# Print the C compiler name and some version components.\nget_c_compiler_info()\n{\n\tcat <<- EOF | \"$@\" -E -P -x c - 2>/dev/null\n\t#if defined(__clang__)\n\tClang\t__clang_major__  __clang_minor__  __clang_patchlevel__\n\t#elif defined(__GNUC__)\n\tGCC\t__GNUC__  __GNUC_MINOR__  __GNUC_PATCHLEVEL__\n\t#else\n\tunknown\n\t#endif\n\tEOF\n}\n\n# Convert the version string x.y.z to a canonical 5 or 6-digit form.\nget_canonical_version()\n{\n\tIFS=.\n\tset -- $1\n\techo $((10000 * $1 + 100 * $2 + $3))\n}\n\n# $@ instead of $1 because multiple words might be given, e.g. CC=\"ccache gcc\".\norig_args=\"$@\"\nset -- $(get_c_compiler_info \"$@\")\n\nname=$1\n\nmin_tool_version=$(dirname $0)/min-tool-version.sh\n\ncase \"$name\" in\nGCC)\n\tversion=$2.$3.$4\n\tmin_version=$($min_tool_version gcc)\n\t;;\nClang)\n\tversion=$2.$3.$4\n\tmin_version=$($min_tool_version llvm)\n\t;;\n*)\n\techo \"$orig_args: unknown C compiler\" >&2\n\texit 1\n\t;;\nesac\n\ncversion=$(get_canonical_version $version)\nmin_cversion=$(get_canonical_version $min_version)\n\nif [ \"$cversion\" -lt \"$min_cversion\" ]; then\n\techo >&2 \"***\"\n\techo >&2 \"*** C compiler is too old.\"\n\techo >&2 \"***   Your $name version:    $version\"\n\techo >&2 \"***   Minimum $name version: $min_version\"\n\techo >&2 \"***\"\n\texit 1\nfi\n\necho $name $cversion\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}