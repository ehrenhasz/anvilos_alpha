{
  "module_name": "config.py",
  "hash_id": "02c333e9247f339e18fdcf29b1ca1c7865a84663a50d8280d1d0ec7fb95f95d8",
  "original_prompt": "Ingested from linux-6.6.14/scripts/gdb/linux/config.py",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n#\n# Copyright 2019 Google LLC.\n\nimport gdb\nimport zlib\n\nfrom linux import utils\n\n\nclass LxConfigDump(gdb.Command):\n    \"\"\"Output kernel config to the filename specified as the command\n       argument. Equivalent to 'zcat /proc/config.gz > config.txt' on\n       a running target\"\"\"\n\n    def __init__(self):\n        super(LxConfigDump, self).__init__(\"lx-configdump\", gdb.COMMAND_DATA,\n                                           gdb.COMPLETE_FILENAME)\n\n    def invoke(self, arg, from_tty):\n        if len(arg) == 0:\n            filename = \"config.txt\"\n        else:\n            filename = arg\n\n        try:\n            py_config_ptr = gdb.parse_and_eval(\"&kernel_config_data\")\n            py_config_ptr_end = gdb.parse_and_eval(\"&kernel_config_data_end\")\n            py_config_size = py_config_ptr_end - py_config_ptr\n        except gdb.error as e:\n            raise gdb.GdbError(\"Can't find config, enable CONFIG_IKCONFIG?\")\n\n        inf = gdb.inferiors()[0]\n        zconfig_buf = utils.read_memoryview(inf, py_config_ptr,\n                                            py_config_size).tobytes()\n\n        config_buf = zlib.decompress(zconfig_buf, 16)\n        with open(filename, 'wb') as f:\n            f.write(config_buf)\n\n        gdb.write(\"Dumped config to \" + filename + \"\\n\")\n\n\nLxConfigDump()\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}