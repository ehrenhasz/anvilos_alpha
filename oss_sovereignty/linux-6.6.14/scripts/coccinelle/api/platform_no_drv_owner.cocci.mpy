{
  "module_name": "platform_no_drv_owner.cocci",
  "hash_id": "e9599e58234c8a72335908b6f6b4eb48649b81c35da206c45d1088385f181c2e",
  "original_prompt": "Ingested from linux-6.6.14/scripts/coccinelle/api/platform_no_drv_owner.cocci",
  "human_readable_source": "// SPDX-License-Identifier: GPL-2.0-only\n/// Remove .owner field if calls are used which set it automatically\n///\n// Confidence: High\n// Copyright: (C) 2014 Wolfram Sang.\n\nvirtual patch\nvirtual context\nvirtual org\nvirtual report\n\n@match1@\ndeclarer name module_i2c_driver;\ndeclarer name module_platform_driver;\ndeclarer name module_platform_driver_probe;\nidentifier __driver;\n@@\n(\n\tmodule_i2c_driver(__driver);\n|\n\tmodule_platform_driver(__driver);\n|\n\tmodule_platform_driver_probe(__driver, ...);\n)\n\n@fix1 depends on match1 && patch && !context && !org && !report@\nidentifier match1.__driver;\n@@\n\tstatic struct platform_driver __driver = {\n\t\t.driver = {\n-\t\t\t.owner = THIS_MODULE,\n\t\t}\n\t};\n\n@fix1_i2c depends on match1 && patch && !context && !org && !report@\nidentifier match1.__driver;\n@@\n\tstatic struct i2c_driver __driver = {\n\t\t.driver = {\n-\t\t\t.owner = THIS_MODULE,\n\t\t}\n\t};\n\n@match2@\nidentifier __driver;\n@@\n(\n\tplatform_driver_register(&__driver)\n|\n\tplatform_driver_probe(&__driver, ...)\n|\n\tplatform_create_bundle(&__driver, ...)\n|\n\ti2c_add_driver(&__driver)\n)\n\n@fix2 depends on match2 && patch && !context && !org && !report@\nidentifier match2.__driver;\n@@\n\tstatic struct platform_driver __driver = {\n\t\t.driver = {\n-\t\t\t.owner = THIS_MODULE,\n\t\t}\n\t};\n\n@fix2_i2c depends on match2 && patch && !context && !org && !report@\nidentifier match2.__driver;\n@@\n\tstatic struct i2c_driver __driver = {\n\t\t.driver = {\n-\t\t\t.owner = THIS_MODULE,\n\t\t}\n\t};\n\n// ----------------------------------------------------------------------------\n\n@fix1_context depends on match1 && !patch && (context || org || report)@\nidentifier match1.__driver;\nposition j0;\n@@\n\n \tstatic struct platform_driver __driver = {\n\t\t.driver = {\n*\t\t\t.owner@j0 = THIS_MODULE,\n\t\t}\n\t};\n\n@fix1_i2c_context depends on match1 && !patch && (context || org || report)@\nidentifier match1.__driver;\nposition j0;\n@@\n\n\tstatic struct i2c_driver __driver = {\n\t\t.driver = {\n*\t\t\t.owner@j0 = THIS_MODULE,\n\t\t}\n\t};\n\n@fix2_context depends on match2 && !patch && (context || org || report)@\nidentifier match2.__driver;\nposition j0;\n@@\n\n \tstatic struct platform_driver __driver = {\n\t\t.driver = {\n*\t\t\t.owner@j0 = THIS_MODULE,\n\t\t}\n\t};\n\n@fix2_i2c_context depends on match2 && !patch && (context || org || report)@\nidentifier match2.__driver;\nposition j0;\n@@\n\n\tstatic struct i2c_driver __driver = {\n\t\t.driver = {\n*\t\t\t.owner@j0 = THIS_MODULE,\n\t\t}\n\t};\n\n// ----------------------------------------------------------------------------\n\n@script:python fix1_org depends on org@\nj0 << fix1_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.org.print_todo(j0[0], msg)\n\n@script:python fix1_i2c_org depends on org@\nj0 << fix1_i2c_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.org.print_todo(j0[0], msg)\n\n@script:python fix2_org depends on org@\nj0 << fix2_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.org.print_todo(j0[0], msg)\n\n@script:python fix2_i2c_org depends on org@\nj0 << fix2_i2c_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.org.print_todo(j0[0], msg)\n\n// ----------------------------------------------------------------------------\n\n@script:python fix1_report depends on report@\nj0 << fix1_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.report.print_report(j0[0], msg)\n\n@script:python fix1_i2c_report depends on report@\nj0 << fix1_i2c_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.report.print_report(j0[0], msg)\n\n@script:python fix2_report depends on report@\nj0 << fix2_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.report.print_report(j0[0], msg)\n\n@script:python fix2_i2c_report depends on report@\nj0 << fix2_i2c_context.j0;\n@@\n\nmsg = \"No need to set .owner here. The core will do it.\"\ncoccilib.report.print_report(j0[0], msg)\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}