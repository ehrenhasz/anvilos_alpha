{
  "module_name": "cond_no_effect.cocci",
  "hash_id": "6c9a7458e07cb4a72cbb491a7a61a2d5f8bf8816764f184aca2db2feaabbbbc2",
  "original_prompt": "Ingested from linux-6.6.14/scripts/coccinelle/misc/cond_no_effect.cocci",
  "human_readable_source": "// SPDX-License-Identifier: GPL-2.0-only\n///Find conditions where if and else branch are functionally\n// identical.\n//\n// There can be false positives in cases where the positional\n// information is used (as with lockdep) or where the identity\n// is a placeholder for not yet handled cases.\n// Unfortunately there also seems to be a tendency to use\n// the last if else/else as a \"default behavior\" - which some\n// might consider a legitimate coding pattern. From discussion\n// on kernelnewbies though it seems that this is not really an\n// accepted pattern and if at all it would need to be commented\n//\n// In the Linux kernel it does not seem to actually report\n// false positives except for those that were documented as\n// being intentional.\n// the two known cases are:\n//   arch/sh/kernel/traps_64.c:read_opcode()\n//        } else if ((pc & 1) == 0) {\n//              /* SHcompact */\n//              /* TODO : provide handling for this.  We don't really support\n//                 user-mode SHcompact yet, and for a kernel fault, this would\n//                 have to come from a module built for SHcompact.  */\n//              return -EFAULT;\n//      } else {\n//              /* misaligned */\n//              return -EFAULT;\n//      }\n//   fs/kernfs/file.c:kernfs_fop_open()\n//       * Both paths of the branch look the same.  They're supposed to\n//       * look that way and give @of->mutex different static lockdep keys.\n//       */\n//      if (has_mmap)\n//              mutex_init(&of->mutex);\n//      else\n//              mutex_init(&of->mutex);\n//\n// All other cases look like bugs or at least lack of documentation\n//\n// Confidence: Moderate\n// Copyright: (C) 2016 Nicholas Mc Guire, OSADL.\n// Comments:\n// Options: --no-includes --include-headers\n\nvirtual org\nvirtual report\n\n@cond@\nstatement S1;\nposition p;\n@@\n\n* if@p (...) S1 else S1\n\n@script:python depends on org@\np << cond.p;\n@@\n\ncocci.print_main(\"WARNING: possible condition with no effect (if == else)\",p)\n\n@script:python depends on report@\np << cond.p;\n@@\n\ncoccilib.report.print_report(p[0],\"WARNING: possible condition with no effect (if == else)\")\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}