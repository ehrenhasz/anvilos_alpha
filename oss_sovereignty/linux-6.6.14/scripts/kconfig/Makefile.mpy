{
  "module_name": "Makefile",
  "hash_id": "d0edf2abf5a8f66fa325495d6bcbb3a6ccded01af08f56cde5944c9a47c37f6b",
  "original_prompt": "Ingested from linux-6.6.14/scripts/kconfig/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n# ===========================================================================\n# Kernel configuration targets\n# These targets are used from top-level makefile\n\nifdef KBUILD_KCONFIG\nKconfig := $(KBUILD_KCONFIG)\nelse\nKconfig := Kconfig\nendif\n\nifndef KBUILD_DEFCONFIG\nKBUILD_DEFCONFIG := defconfig\nendif\n\nifeq ($(quiet),silent_)\nsilent := -s\nendif\n\nexport KCONFIG_DEFCONFIG_LIST :=\nifndef cross_compiling\nkernel-release := $(shell uname -r)\nKCONFIG_DEFCONFIG_LIST += \\\n\t/lib/modules/$(kernel-release)/.config \\\n\t/etc/kernel-config \\\n\t/boot/config-$(kernel-release)\nendif\nKCONFIG_DEFCONFIG_LIST += arch/$(SRCARCH)/configs/$(KBUILD_DEFCONFIG)\n\n# We need this, in case the user has it in its environment\nunexport CONFIG_\n\nconfig-prog\t:= conf\nmenuconfig-prog\t:= mconf\nnconfig-prog\t:= nconf\ngconfig-prog\t:= gconf\nxconfig-prog\t:= qconf\n\ndefine config_rule\nPHONY += $(1)\n$(1): $(obj)/$($(1)-prog)\n\t$(Q)$$< $(silent) $(Kconfig)\n\nPHONY += build_$(1)\nbuild_$(1): $(obj)/$($(1)-prog)\nendef\n\n$(foreach c, config menuconfig nconfig gconfig xconfig, $(eval $(call config_rule,$(c))))\n\nPHONY += localmodconfig localyesconfig\nlocalyesconfig localmodconfig: $(obj)/conf\n\t$(Q)$(PERL) $(srctree)/$(src)/streamline_config.pl --$@ $(srctree) $(Kconfig) > .tmp.config\n\t$(Q)if [ -f .config ]; then \t\t\t\t\\\n\t\tcmp -s .tmp.config .config ||\t\t\t\\\n\t\t(mv -f .config .config.old.1;\t\t\t\\\n\t\t mv -f .tmp.config .config;\t\t\t\\\n\t\t $< $(silent) --oldconfig $(Kconfig);\t\t\\\n\t\t mv -f .config.old.1 .config.old)\t\t\\\n\telse\t\t\t\t\t\t\t\\\n\t\tmv -f .tmp.config .config;\t\t\t\\\n\t\t$< $(silent) --oldconfig $(Kconfig);\t\t\\\n\tfi\n\t$(Q)rm -f .tmp.config\n\n# These targets map 1:1 to the commandline options of 'conf'\n#\n# Note:\n#  syncconfig has become an internal implementation detail and is now\n#  deprecated for external use\nsimple-targets := oldconfig allnoconfig allyesconfig allmodconfig \\\n\talldefconfig randconfig listnewconfig olddefconfig syncconfig \\\n\thelpnewconfig yes2modconfig mod2yesconfig mod2noconfig\n\nPHONY += $(simple-targets)\n\n$(simple-targets): $(obj)/conf\n\t$(Q)$< $(silent) --$@ $(Kconfig)\n\nPHONY += savedefconfig defconfig\n\nsavedefconfig: $(obj)/conf\n\t$(Q)$< $(silent) --$@=defconfig $(Kconfig)\n\ndefconfig: $(obj)/conf\nifneq ($(wildcard $(srctree)/arch/$(SRCARCH)/configs/$(KBUILD_DEFCONFIG)),)\n\t@$(kecho) \"*** Default configuration is based on '$(KBUILD_DEFCONFIG)'\"\n\t$(Q)$< $(silent) --defconfig=arch/$(SRCARCH)/configs/$(KBUILD_DEFCONFIG) $(Kconfig)\nelse\n\t@$(kecho) \"*** Default configuration is based on target '$(KBUILD_DEFCONFIG)'\"\n\t$(Q)$(MAKE) -f $(srctree)/Makefile $(KBUILD_DEFCONFIG)\nendif\n\n%_defconfig: $(obj)/conf\n\t$(Q)$< $(silent) --defconfig=arch/$(SRCARCH)/configs/$@ $(Kconfig)\n\nconfigfiles = $(wildcard $(srctree)/kernel/configs/$(1) $(srctree)/arch/$(SRCARCH)/configs/$(1))\nall-config-fragments = $(call configfiles,*.config)\nconfig-fragments = $(call configfiles,$@)\n\n%.config: $(obj)/conf\n\t$(if $(config-fragments),, $(error $@ fragment does not exists on this architecture))\n\t$(Q)$(CONFIG_SHELL) $(srctree)/scripts/kconfig/merge_config.sh -m .config $(config-fragments)\n\t$(Q)$(MAKE) -f $(srctree)/Makefile olddefconfig\n\nPHONY += tinyconfig\ntinyconfig:\n\t$(Q)KCONFIG_ALLCONFIG=kernel/configs/tiny-base.config $(MAKE) -f $(srctree)/Makefile allnoconfig\n\t$(Q)$(MAKE) -f $(srctree)/Makefile tiny.config\n\n# CHECK: -o cache_dir=<path> working?\nPHONY += testconfig\ntestconfig: $(obj)/conf\n\t$(Q)$(PYTHON3) -B -m pytest $(srctree)/$(src)/tests \\\n\t-o cache_dir=$(abspath $(obj)/tests/.cache) \\\n\t$(if $(findstring 1,$(KBUILD_VERBOSE)),--capture=no)\nclean-files += tests/.cache\n\n# Help text used by make help\nhelp:\n\t@echo  'Configuration targets:'\n\t@echo  '  config\t  - Update current config utilising a line-oriented program'\n\t@echo  '  nconfig         - Update current config utilising a ncurses menu based program'\n\t@echo  '  menuconfig\t  - Update current config utilising a menu based program'\n\t@echo  '  xconfig\t  - Update current config utilising a Qt based front-end'\n\t@echo  '  gconfig\t  - Update current config utilising a GTK+ based front-end'\n\t@echo  '  oldconfig\t  - Update current config utilising a provided .config as base'\n\t@echo  '  localmodconfig  - Update current config disabling modules not loaded'\n\t@echo  '                    except those preserved by LMC_KEEP environment variable'\n\t@echo  '  localyesconfig  - Update current config converting local mods to core'\n\t@echo  '                    except those preserved by LMC_KEEP environment variable'\n\t@echo  '  defconfig\t  - New config with default from ARCH supplied defconfig'\n\t@echo  '  savedefconfig   - Save current config as ./defconfig (minimal config)'\n\t@echo  '  allnoconfig\t  - New config where all options are answered with no'\n\t@echo  '  allyesconfig\t  - New config where all options are accepted with yes'\n\t@echo  '  allmodconfig\t  - New config selecting modules when possible'\n\t@echo  '  alldefconfig    - New config with all symbols set to default'\n\t@echo  '  randconfig\t  - New config with random answer to all options'\n\t@echo  '  yes2modconfig\t  - Change answers from yes to mod if possible'\n\t@echo  '  mod2yesconfig\t  - Change answers from mod to yes if possible'\n\t@echo  '  mod2noconfig\t  - Change answers from mod to no if possible'\n\t@echo  '  listnewconfig   - List new options'\n\t@echo  '  helpnewconfig   - List new options and help text'\n\t@echo  '  olddefconfig\t  - Same as oldconfig but sets new symbols to their'\n\t@echo  '                    default value without prompting'\n\t@echo  '  tinyconfig\t  - Configure the tiniest possible kernel'\n\t@echo  '  testconfig\t  - Run Kconfig unit tests (requires python3 and pytest)'\n\t@echo  ''\n\t@echo  'Configuration topic targets:'\n\t@$(foreach f, $(all-config-fragments), \\\n\t\tif help=$$(grep -m1 '^# Help: ' $(f)); then \\\n\t\t\tprintf '  %-25s - %s\\n' '$(notdir $(f))' \"$${help#*: }\"; \\\n\t\tfi;)\n\n# ===========================================================================\n# object files used by all kconfig flavours\ncommon-objs\t:= confdata.o expr.o lexer.lex.o menu.o parser.tab.o \\\n\t\t   preprocess.o symbol.o util.o\n\n$(obj)/lexer.lex.o: $(obj)/parser.tab.h\nHOSTCFLAGS_lexer.lex.o\t:= -I $(srctree)/$(src)\nHOSTCFLAGS_parser.tab.o\t:= -I $(srctree)/$(src)\n\n# conf: Used for defconfig, oldconfig and related targets\nhostprogs\t+= conf\nconf-objs\t:= conf.o $(common-objs)\n\n# nconf: Used for the nconfig target based on ncurses\nhostprogs\t+= nconf\nnconf-objs\t:= nconf.o nconf.gui.o $(common-objs)\n\nHOSTLDLIBS_nconf       = $(call read-file, $(obj)/nconf-libs)\nHOSTCFLAGS_nconf.o     = $(call read-file, $(obj)/nconf-cflags)\nHOSTCFLAGS_nconf.gui.o = $(call read-file, $(obj)/nconf-cflags)\n\n$(obj)/nconf: | $(obj)/nconf-libs\n$(obj)/nconf.o $(obj)/nconf.gui.o: | $(obj)/nconf-cflags\n\n# mconf: Used for the menuconfig target based on lxdialog\nhostprogs\t+= mconf\nlxdialog\t:= $(addprefix lxdialog/, \\\n\t\t     checklist.o inputbox.o menubox.o textbox.o util.o yesno.o)\nmconf-objs\t:= mconf.o $(lxdialog) $(common-objs)\n\nHOSTLDLIBS_mconf = $(call read-file, $(obj)/mconf-libs)\n$(foreach f, mconf.o $(lxdialog), \\\n  $(eval HOSTCFLAGS_$f = $$(call read-file, $(obj)/mconf-cflags)))\n\n$(obj)/mconf: | $(obj)/mconf-libs\n$(addprefix $(obj)/, mconf.o $(lxdialog)): | $(obj)/mconf-cflags\n\n# qconf: Used for the xconfig target based on Qt\nhostprogs\t+= qconf\nqconf-cxxobjs\t:= qconf.o qconf-moc.o\nqconf-objs\t:= images.o $(common-objs)\n\nHOSTLDLIBS_qconf         = $(call read-file, $(obj)/qconf-libs)\nHOSTCXXFLAGS_qconf.o     = -std=c++11 -fPIC $(call read-file, $(obj)/qconf-cflags)\nHOSTCXXFLAGS_qconf-moc.o = -std=c++11 -fPIC $(call read-file, $(obj)/qconf-cflags)\n$(obj)/qconf: | $(obj)/qconf-libs\n$(obj)/qconf.o $(obj)/qconf-moc.o: | $(obj)/qconf-cflags\n\nquiet_cmd_moc = MOC     $@\n      cmd_moc = $(call read-file, $(obj)/qconf-bin)/moc $< -o $@\n\n$(obj)/qconf-moc.cc: $(src)/qconf.h FORCE | $(obj)/qconf-bin\n\t$(call if_changed,moc)\n\ntargets += qconf-moc.cc\n\n# gconf: Used for the gconfig target based on GTK+\nhostprogs\t+= gconf\ngconf-objs\t:= gconf.o images.o $(common-objs)\n\nHOSTLDLIBS_gconf   = $(call read-file, $(obj)/gconf-libs)\nHOSTCFLAGS_gconf.o = $(call read-file, $(obj)/gconf-cflags)\n\n$(obj)/gconf: | $(obj)/gconf-libs\n$(obj)/gconf.o: | $(obj)/gconf-cflags\n\n# check if necessary packages are available, and configure build flags\ncmd_conf_cfg = $< $(addprefix $(obj)/$*conf-, cflags libs bin); touch $(obj)/$*conf-bin\n\n$(obj)/%conf-cflags $(obj)/%conf-libs $(obj)/%conf-bin: $(src)/%conf-cfg.sh\n\t$(call cmd,conf_cfg)\n\nclean-files += *conf-cflags *conf-libs *conf-bin\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}