{
  "module_name": "buildtar",
  "hash_id": "c2f4629895571cd153ec9a1ebf387042a0c5a60790f18e59d0d6e45438a25125",
  "original_prompt": "Ingested from linux-6.6.14/scripts/package/buildtar",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n\n#\n# buildtar 0.0.5\n#\n# (C) 2004-2006 by Jan-Benedict Glaw <jbglaw@lug-owl.de>\n#\n# This script is used to compile a tarball from the currently\n# prepared kernel. Based upon the builddeb script from\n# Wichert Akkerman <wichert@wiggy.net>.\n#\n\nset -e\n\n#\n# Some variables and settings used throughout the script\n#\ntmpdir=$1\n\n#\n# Clean-up and re-create the temporary directory\n#\nrm -rf -- \"${tmpdir}\"\nmkdir -p -- \"${tmpdir}/boot\"\ndirs=boot\n\n\n#\n# Try to install dtbs\n#\nif grep -q '^CONFIG_OF_EARLY_FLATTREE=y' include/config/auto.conf; then\n\t# Only some architectures with OF support have this target\n\tif [ -d \"${srctree}/arch/${SRCARCH}/boot/dts\" ]; then\n\t\t$MAKE ARCH=\"${ARCH}\" -f ${srctree}/Makefile INSTALL_DTBS_PATH=\"${tmpdir}/boot/dtbs/${KERNELRELEASE}\" dtbs_install\n    fi\nfi\n\n\n#\n# Try to install modules\n#\nif grep -q '^CONFIG_MODULES=y' include/config/auto.conf; then\n\tmake ARCH=\"${ARCH}\" -f ${srctree}/Makefile INSTALL_MOD_PATH=\"${tmpdir}\" modules_install\n\tdirs=\"$dirs lib\"\nfi\n\n\n#\n# Install basic kernel files\n#\ncp -v -- \"${objtree}/System.map\" \"${tmpdir}/boot/System.map-${KERNELRELEASE}\"\ncp -v -- \"${KCONFIG_CONFIG}\" \"${tmpdir}/boot/config-${KERNELRELEASE}\"\ncp -v -- \"${objtree}/vmlinux\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\n\n#\n# Install arch-specific kernel image(s)\n#\ncase \"${ARCH}\" in\n\tx86|i386|x86_64)\n\t\t[ -f \"${objtree}/arch/x86/boot/bzImage\" ] && cp -v -- \"${objtree}/arch/x86/boot/bzImage\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\t;;\n\talpha)\n\t\t[ -f \"${objtree}/arch/alpha/boot/vmlinux.gz\" ] && cp -v -- \"${objtree}/arch/alpha/boot/vmlinux.gz\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\t;;\n\tparisc*)\n\t\t[ -f \"${KBUILD_IMAGE}\" ] && cp -v -- \"${KBUILD_IMAGE}\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\t[ -f \"${objtree}/lifimage\" ] && cp -v -- \"${objtree}/lifimage\" \"${tmpdir}/boot/lifimage-${KERNELRELEASE}\"\n\t\t;;\n\tmips)\n\t\tif [ -f \"${objtree}/arch/mips/boot/compressed/vmlinux.bin\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/compressed/vmlinux.bin\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/arch/mips/boot/compressed/vmlinux.ecoff\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/compressed/vmlinux.ecoff\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/arch/mips/boot/compressed/vmlinux.srec\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/compressed/vmlinux.srec\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/vmlinux.32\" ]; then\n\t\t\tcp -v -- \"${objtree}/vmlinux.32\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/vmlinux.64\" ]; then\n\t\t\tcp -v -- \"${objtree}/vmlinux.64\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/arch/mips/boot/vmlinux.bin\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/vmlinux.bin\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/arch/mips/boot/vmlinux.ecoff\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/vmlinux.ecoff\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/arch/mips/boot/vmlinux.srec\" ]; then\n\t\t\tcp -v -- \"${objtree}/arch/mips/boot/vmlinux.srec\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\telif [ -f \"${objtree}/vmlinux\" ]; then\n\t\t\tcp -v -- \"${objtree}/vmlinux\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\tfi\n\t\t;;\n\tarm64)\n\t\tfor i in Image.bz2 Image.gz Image.lz4 Image.lzma Image.lzo vmlinuz.efi ; do\n\t\t\tif [ -f \"${objtree}/arch/arm64/boot/${i}\" ] ; then\n\t\t\t\tcp -v -- \"${objtree}/arch/arm64/boot/${i}\" \"${tmpdir}/boot/vmlinuz-${KERNELRELEASE}\"\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\t\t;;\n\triscv)\n\t\tfor i in Image.bz2 Image.gz Image; do\n\t\t\tif [ -f \"${objtree}/arch/riscv/boot/${i}\" ] ; then\n\t\t\t\tcp -v -- \"${objtree}/arch/riscv/boot/${i}\" \"${tmpdir}/boot/vmlinux-${KERNELRELEASE}\"\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\t\t;;\n\t*)\n\t\t[ -f \"${KBUILD_IMAGE}\" ] && cp -v -- \"${KBUILD_IMAGE}\" \"${tmpdir}/boot/vmlinux-kbuild-${KERNELRELEASE}\"\n\t\techo \"\" >&2\n\t\techo '** ** **  WARNING  ** ** **' >&2\n\t\techo \"\" >&2\n\t\techo \"Your architecture did not define any architecture-dependent files\" >&2\n\t\techo \"to be placed into the tarball. Please add those to ${0} ...\" >&2\n\t\techo \"\" >&2\n\t\tsleep 5\n\t\t;;\nesac\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}