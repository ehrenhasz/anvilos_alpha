{
  "module_name": "checkdeclares.pl",
  "hash_id": "c116e42effa3b69bf57673086b3ff004e2a40dd4b2b97ec39c3a33de237d01b3",
  "original_prompt": "Ingested from linux-6.6.14/scripts/checkdeclares.pl",
  "human_readable_source": "#!/usr/bin/env perl\n# SPDX-License-Identifier: GPL-2.0\n#\n# checkdeclares: find struct declared more than once\n#\n# Copyright 2021 Wan Jiabing<wanjiabing@vivo.com>\n# Inspired by checkincludes.pl\n#\n# This script checks for duplicate struct declares.\n# Note that this will not take into consideration macros so\n# you should run this only if you know you do have real dups\n# and do not have them under #ifdef's.\n# You could also just review the results.\n\nuse strict;\n\nsub usage {\n\tprint \"Usage: checkdeclares.pl file1.h ...\\n\";\n\tprint \"Warns of struct declaration duplicates\\n\";\n\texit 1;\n}\n\nif ($#ARGV < 0) {\n\tusage();\n}\n\nmy $dup_counter = 0;\n\nforeach my $file (@ARGV) {\n\topen(my $f, '<', $file)\n\t    or die \"Cannot open $file: $!.\\n\";\n\n\tmy %declaredstructs = ();\n\n\twhile (<$f>) {\n\t\tif (m/^\\s*struct\\s*(\\w*);$/o) {\n\t\t\t++$declaredstructs{$1};\n\t\t}\n\t}\n\n\tclose($f);\n\n\tforeach my $structname (keys %declaredstructs) {\n\t\tif ($declaredstructs{$structname} > 1) {\n\t\t\tprint \"$file: struct $structname is declared more than once.\\n\";\n\t\t\t++$dup_counter;\n\t\t}\n\t}\n}\n\nif ($dup_counter == 0) {\n\tprint \"No duplicate struct declares found.\\n\";\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}