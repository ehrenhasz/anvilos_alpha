{
  "module_name": "kobject-example.c",
  "hash_id": "9b8ad2adfc9f54024b2ffba2881ff7d0a8df19850fea15b617f65a109580e3d4",
  "original_prompt": "Ingested from linux-6.6.14/samples/kobject/kobject-example.c",
  "human_readable_source": "\n \n#include <linux/kobject.h>\n#include <linux/string.h>\n#include <linux/sysfs.h>\n#include <linux/module.h>\n#include <linux/init.h>\n\n \n\nstatic int foo;\nstatic int baz;\nstatic int bar;\n\n \nstatic ssize_t foo_show(struct kobject *kobj, struct kobj_attribute *attr,\n\t\t\tchar *buf)\n{\n\treturn sysfs_emit(buf, \"%d\\n\", foo);\n}\n\nstatic ssize_t foo_store(struct kobject *kobj, struct kobj_attribute *attr,\n\t\t\t const char *buf, size_t count)\n{\n\tint ret;\n\n\tret = kstrtoint(buf, 10, &foo);\n\tif (ret < 0)\n\t\treturn ret;\n\n\treturn count;\n}\n\n \nstatic struct kobj_attribute foo_attribute =\n\t__ATTR(foo, 0664, foo_show, foo_store);\n\n \nstatic ssize_t b_show(struct kobject *kobj, struct kobj_attribute *attr,\n\t\t      char *buf)\n{\n\tint var;\n\n\tif (strcmp(attr->attr.name, \"baz\") == 0)\n\t\tvar = baz;\n\telse\n\t\tvar = bar;\n\treturn sysfs_emit(buf, \"%d\\n\", var);\n}\n\nstatic ssize_t b_store(struct kobject *kobj, struct kobj_attribute *attr,\n\t\t       const char *buf, size_t count)\n{\n\tint var, ret;\n\n\tret = kstrtoint(buf, 10, &var);\n\tif (ret < 0)\n\t\treturn ret;\n\n\tif (strcmp(attr->attr.name, \"baz\") == 0)\n\t\tbaz = var;\n\telse\n\t\tbar = var;\n\treturn count;\n}\n\nstatic struct kobj_attribute baz_attribute =\n\t__ATTR(baz, 0664, b_show, b_store);\nstatic struct kobj_attribute bar_attribute =\n\t__ATTR(bar, 0664, b_show, b_store);\n\n\n \nstatic struct attribute *attrs[] = {\n\t&foo_attribute.attr,\n\t&baz_attribute.attr,\n\t&bar_attribute.attr,\n\tNULL,\t \n};\n\n \nstatic struct attribute_group attr_group = {\n\t.attrs = attrs,\n};\n\nstatic struct kobject *example_kobj;\n\nstatic int __init example_init(void)\n{\n\tint retval;\n\n\t \n\texample_kobj = kobject_create_and_add(\"kobject_example\", kernel_kobj);\n\tif (!example_kobj)\n\t\treturn -ENOMEM;\n\n\t \n\tretval = sysfs_create_group(example_kobj, &attr_group);\n\tif (retval)\n\t\tkobject_put(example_kobj);\n\n\treturn retval;\n}\n\nstatic void __exit example_exit(void)\n{\n\tkobject_put(example_kobj);\n}\n\nmodule_init(example_init);\nmodule_exit(example_exit);\nMODULE_LICENSE(\"GPL v2\");\nMODULE_AUTHOR(\"Greg Kroah-Hartman <greg@kroah.com>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}