{
  "module_name": "acrn.h",
  "hash_id": "ffd4b10bd9fc9381a40d83d4079ed5116ff9bbb2e42ea9d86c9578a4af784e99",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/acrn.h",
  "human_readable_source": " \n \n\n#ifndef _UAPI_ACRN_H\n#define _UAPI_ACRN_H\n\n#include <linux/types.h>\n\n#define ACRN_IO_REQUEST_MAX\t\t16\n\n#define ACRN_IOREQ_STATE_PENDING\t0\n#define ACRN_IOREQ_STATE_COMPLETE\t1\n#define ACRN_IOREQ_STATE_PROCESSING\t2\n#define ACRN_IOREQ_STATE_FREE\t\t3\n\n#define ACRN_IOREQ_TYPE_PORTIO\t\t0\n#define ACRN_IOREQ_TYPE_MMIO\t\t1\n#define ACRN_IOREQ_TYPE_PCICFG\t\t2\n\n#define ACRN_IOREQ_DIR_READ\t\t0\n#define ACRN_IOREQ_DIR_WRITE\t\t1\n\n \nstruct acrn_mmio_request {\n\t__u32\tdirection;\n\t__u32\treserved;\n\t__u64\taddress;\n\t__u64\tsize;\n\t__u64\tvalue;\n};\n\n \nstruct acrn_pio_request {\n\t__u32\tdirection;\n\t__u32\treserved;\n\t__u64\taddress;\n\t__u64\tsize;\n\t__u32\tvalue;\n};\n\n \nstruct acrn_pci_request {\n\t__u32\tdirection;\n\t__u32\treserved[3];\n\t__u64\tsize;\n\t__u32\tvalue;\n\t__u32\tbus;\n\t__u32\tdev;\n\t__u32\tfunc;\n\t__u32\treg;\n};\n\n \nstruct acrn_io_request {\n\t__u32\ttype;\n\t__u32\tcompletion_polling;\n\t__u32\treserved0[14];\n\tunion {\n\t\tstruct acrn_pio_request\t\tpio_request;\n\t\tstruct acrn_pci_request\t\tpci_request;\n\t\tstruct acrn_mmio_request\tmmio_request;\n\t\t__u64\t\t\t\tdata[8];\n\t} reqs;\n\t__u32\treserved1;\n\t__u32\tkernel_handled;\n\t__u32\tprocessed;\n} __attribute__((aligned(256)));\n\nstruct acrn_io_request_buffer {\n\tunion {\n\t\tstruct acrn_io_request\treq_slot[ACRN_IO_REQUEST_MAX];\n\t\t__u8\t\t\treserved[4096];\n\t};\n};\n\n \nstruct acrn_ioreq_notify {\n\t__u16\tvmid;\n\t__u16\treserved;\n\t__u32\tvcpu;\n};\n\n \nstruct acrn_vm_creation {\n\t__u16\tvmid;\n\t__u16\treserved0;\n\t__u16\tvcpu_num;\n\t__u16\treserved1;\n\t__u8\tuuid[16];\n\t__u64\tvm_flag;\n\t__u64\tioreq_buf;\n\t__u64\tcpu_affinity;\n};\n\n \nstruct acrn_gp_regs {\n\t__le64\trax;\n\t__le64\trcx;\n\t__le64\trdx;\n\t__le64\trbx;\n\t__le64\trsp;\n\t__le64\trbp;\n\t__le64\trsi;\n\t__le64\trdi;\n\t__le64\tr8;\n\t__le64\tr9;\n\t__le64\tr10;\n\t__le64\tr11;\n\t__le64\tr12;\n\t__le64\tr13;\n\t__le64\tr14;\n\t__le64\tr15;\n};\n\n \nstruct acrn_descriptor_ptr {\n\t__le16\tlimit;\n\t__le64\tbase;\n\t__le16\treserved[3];\n} __attribute__ ((__packed__));\n\n \nstruct acrn_regs {\n\tstruct acrn_gp_regs\t\tgprs;\n\tstruct acrn_descriptor_ptr\tgdt;\n\tstruct acrn_descriptor_ptr\tidt;\n\n\t__le64\t\t\t\trip;\n\t__le64\t\t\t\tcs_base;\n\t__le64\t\t\t\tcr0;\n\t__le64\t\t\t\tcr4;\n\t__le64\t\t\t\tcr3;\n\t__le64\t\t\t\tia32_efer;\n\t__le64\t\t\t\trflags;\n\t__le64\t\t\t\treserved_64[4];\n\n\t__le32\t\t\t\tcs_ar;\n\t__le32\t\t\t\tcs_limit;\n\t__le32\t\t\t\treserved_32[3];\n\n\t__le16\t\t\t\tcs_sel;\n\t__le16\t\t\t\tss_sel;\n\t__le16\t\t\t\tds_sel;\n\t__le16\t\t\t\tes_sel;\n\t__le16\t\t\t\tfs_sel;\n\t__le16\t\t\t\tgs_sel;\n\t__le16\t\t\t\tldt_sel;\n\t__le16\t\t\t\ttr_sel;\n};\n\n \nstruct acrn_vcpu_regs {\n\t__u16\t\t\tvcpu_id;\n\t__u16\t\t\treserved[3];\n\tstruct acrn_regs\tvcpu_regs;\n};\n\n#define\tACRN_MEM_ACCESS_RIGHT_MASK\t0x00000007U\n#define\tACRN_MEM_ACCESS_READ\t\t0x00000001U\n#define\tACRN_MEM_ACCESS_WRITE\t\t0x00000002U\n#define\tACRN_MEM_ACCESS_EXEC\t\t0x00000004U\n#define\tACRN_MEM_ACCESS_RWX\t\t(ACRN_MEM_ACCESS_READ  | \\\n\t\t\t\t\t ACRN_MEM_ACCESS_WRITE | \\\n\t\t\t\t\t ACRN_MEM_ACCESS_EXEC)\n\n#define\tACRN_MEM_TYPE_MASK\t\t0x000007C0U\n#define\tACRN_MEM_TYPE_WB\t\t0x00000040U\n#define\tACRN_MEM_TYPE_WT\t\t0x00000080U\n#define\tACRN_MEM_TYPE_UC\t\t0x00000100U\n#define\tACRN_MEM_TYPE_WC\t\t0x00000200U\n#define\tACRN_MEM_TYPE_WP\t\t0x00000400U\n\n \n#define\tACRN_MEMMAP_RAM\t\t\t0\n#define\tACRN_MEMMAP_MMIO\t\t1\n\n \nstruct acrn_vm_memmap {\n\t__u32\ttype;\n\t__u32\tattr;\n\t__u64\tuser_vm_pa;\n\tunion {\n\t\t__u64\tservice_vm_pa;\n\t\t__u64\tvma_base;\n\t};\n\t__u64\tlen;\n};\n\n \n#define ACRN_PTDEV_IRQ_INTX\t0\n#define ACRN_PTDEV_IRQ_MSI\t1\n#define ACRN_PTDEV_IRQ_MSIX\t2\n \nstruct acrn_ptdev_irq {\n\t__u32\ttype;\n\t__u16\tvirt_bdf;\n\t__u16\tphys_bdf;\n\n\tstruct {\n\t\t__u32\tvirt_pin;\n\t\t__u32\tphys_pin;\n\t\t__u32\tis_pic_pin;\n\t} intx;\n};\n\n \n#define ACRN_PTDEV_QUIRK_ASSIGN\t(1U << 0)\n\n#define ACRN_MMIODEV_RES_NUM\t3\n#define ACRN_PCI_NUM_BARS\t6\n \nstruct acrn_pcidev {\n\t__u32\ttype;\n\t__u16\tvirt_bdf;\n\t__u16\tphys_bdf;\n\t__u8\tintr_line;\n\t__u8\tintr_pin;\n\t__u32\tbar[ACRN_PCI_NUM_BARS];\n};\n\n \nstruct acrn_mmiodev {\n\t__u8\tname[8];\n\tstruct {\n\t\t__u64\tuser_vm_pa;\n\t\t__u64\tservice_vm_pa;\n\t\t__u64\tsize;\n\t\t__u64\tmem_type;\n\t} res[ACRN_MMIODEV_RES_NUM];\n};\n\n \nstruct acrn_vdev {\n\t \n\tunion {\n\t\t__u64 value;\n\t\tstruct {\n\t\t\t__le16 vendor;\n\t\t\t__le16 device;\n\t\t\t__le32 legacy_id;\n\t\t} fields;\n\t} id;\n\n\t__u64\tslot;\n\t__u32\tio_addr[ACRN_PCI_NUM_BARS];\n\t__u32\tio_size[ACRN_PCI_NUM_BARS];\n\t__u8\targs[128];\n};\n\n \nstruct acrn_msi_entry {\n\t__u64\tmsi_addr;\n\t__u64\tmsi_data;\n};\n\nstruct acrn_acpi_generic_address {\n\t__u8\tspace_id;\n\t__u8\tbit_width;\n\t__u8\tbit_offset;\n\t__u8\taccess_size;\n\t__u64\taddress;\n} __attribute__ ((__packed__));\n\n \nstruct acrn_cstate_data {\n\tstruct acrn_acpi_generic_address\tcx_reg;\n\t__u8\t\t\t\t\ttype;\n\t__u32\t\t\t\t\tlatency;\n\t__u64\t\t\t\t\tpower;\n};\n\n \nstruct acrn_pstate_data {\n\t__u64\tcore_frequency;\n\t__u64\tpower;\n\t__u64\ttransition_latency;\n\t__u64\tbus_master_latency;\n\t__u64\tcontrol;\n\t__u64\tstatus;\n};\n\n#define PMCMD_TYPE_MASK\t\t0x000000ff\nenum acrn_pm_cmd_type {\n\tACRN_PMCMD_GET_PX_CNT,\n\tACRN_PMCMD_GET_PX_DATA,\n\tACRN_PMCMD_GET_CX_CNT,\n\tACRN_PMCMD_GET_CX_DATA,\n};\n\n#define ACRN_IOEVENTFD_FLAG_PIO\t\t0x01\n#define ACRN_IOEVENTFD_FLAG_DATAMATCH\t0x02\n#define ACRN_IOEVENTFD_FLAG_DEASSIGN\t0x04\n \nstruct acrn_ioeventfd {\n\t__u32\tfd;\n\t__u32\tflags;\n\t__u64\taddr;\n\t__u32\tlen;\n\t__u32\treserved;\n\t__u64\tdata;\n};\n\n#define ACRN_IRQFD_FLAG_DEASSIGN\t0x01\n \nstruct acrn_irqfd {\n\t__s32\t\t\tfd;\n\t__u32\t\t\tflags;\n\tstruct acrn_msi_entry\tmsi;\n};\n\n \n#define ACRN_IOCTL_TYPE\t\t\t0xA2\n\n \n#define ACRN_IOCTL_CREATE_VM\t\t\\\n\t_IOWR(ACRN_IOCTL_TYPE, 0x10, struct acrn_vm_creation)\n#define ACRN_IOCTL_DESTROY_VM\t\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x11)\n#define ACRN_IOCTL_START_VM\t\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x12)\n#define ACRN_IOCTL_PAUSE_VM\t\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x13)\n#define ACRN_IOCTL_RESET_VM\t\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x15)\n#define ACRN_IOCTL_SET_VCPU_REGS\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x16, struct acrn_vcpu_regs)\n\n#define ACRN_IOCTL_INJECT_MSI\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x23, struct acrn_msi_entry)\n#define ACRN_IOCTL_VM_INTR_MONITOR\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x24, unsigned long)\n#define ACRN_IOCTL_SET_IRQLINE\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x25, __u64)\n\n#define ACRN_IOCTL_NOTIFY_REQUEST_FINISH \\\n\t_IOW(ACRN_IOCTL_TYPE, 0x31, struct acrn_ioreq_notify)\n#define ACRN_IOCTL_CREATE_IOREQ_CLIENT\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x32)\n#define ACRN_IOCTL_ATTACH_IOREQ_CLIENT\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x33)\n#define ACRN_IOCTL_DESTROY_IOREQ_CLIENT\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x34)\n#define ACRN_IOCTL_CLEAR_VM_IOREQ\t\\\n\t_IO(ACRN_IOCTL_TYPE, 0x35)\n\n#define ACRN_IOCTL_SET_MEMSEG\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x41, struct acrn_vm_memmap)\n#define ACRN_IOCTL_UNSET_MEMSEG\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x42, struct acrn_vm_memmap)\n\n#define ACRN_IOCTL_SET_PTDEV_INTR\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x53, struct acrn_ptdev_irq)\n#define ACRN_IOCTL_RESET_PTDEV_INTR\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x54, struct acrn_ptdev_irq)\n#define ACRN_IOCTL_ASSIGN_PCIDEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x55, struct acrn_pcidev)\n#define ACRN_IOCTL_DEASSIGN_PCIDEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x56, struct acrn_pcidev)\n#define ACRN_IOCTL_ASSIGN_MMIODEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x57, struct acrn_mmiodev)\n#define ACRN_IOCTL_DEASSIGN_MMIODEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x58, struct acrn_mmiodev)\n#define ACRN_IOCTL_CREATE_VDEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x59, struct acrn_vdev)\n#define ACRN_IOCTL_DESTROY_VDEV\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x5A, struct acrn_vdev)\n\n#define ACRN_IOCTL_PM_GET_CPU_STATE\t\\\n\t_IOWR(ACRN_IOCTL_TYPE, 0x60, __u64)\n\n#define ACRN_IOCTL_IOEVENTFD\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x70, struct acrn_ioeventfd)\n#define ACRN_IOCTL_IRQFD\t\t\\\n\t_IOW(ACRN_IOCTL_TYPE, 0x71, struct acrn_irqfd)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}