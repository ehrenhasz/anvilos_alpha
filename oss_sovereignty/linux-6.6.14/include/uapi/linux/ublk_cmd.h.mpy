{
  "module_name": "ublk_cmd.h",
  "hash_id": "7a4fc28357ee6e808d26c1f0c8aa4ed2418a3c4f0e19eae897ceaefbea9e388f",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/ublk_cmd.h",
  "human_readable_source": " \n#ifndef USER_BLK_DRV_CMD_INC_H\n#define USER_BLK_DRV_CMD_INC_H\n\n#include <linux/types.h>\n\n \n\n \n#define\tUBLK_CMD_GET_QUEUE_AFFINITY\t0x01\n#define\tUBLK_CMD_GET_DEV_INFO\t0x02\n#define\tUBLK_CMD_ADD_DEV\t\t0x04\n#define\tUBLK_CMD_DEL_DEV\t\t0x05\n#define\tUBLK_CMD_START_DEV\t0x06\n#define\tUBLK_CMD_STOP_DEV\t0x07\n#define\tUBLK_CMD_SET_PARAMS\t0x08\n#define\tUBLK_CMD_GET_PARAMS\t0x09\n#define\tUBLK_CMD_START_USER_RECOVERY\t0x10\n#define\tUBLK_CMD_END_USER_RECOVERY\t0x11\n#define\tUBLK_CMD_GET_DEV_INFO2\t\t0x12\n\n \n#define UBLK_U_CMD_GET_QUEUE_AFFINITY\t\\\n\t_IOR('u', UBLK_CMD_GET_QUEUE_AFFINITY, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_GET_DEV_INFO\t\t\\\n\t_IOR('u', UBLK_CMD_GET_DEV_INFO, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_ADD_DEV\t\t\\\n\t_IOWR('u', UBLK_CMD_ADD_DEV, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_DEL_DEV\t\t\\\n\t_IOWR('u', UBLK_CMD_DEL_DEV, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_START_DEV\t\t\\\n\t_IOWR('u', UBLK_CMD_START_DEV, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_STOP_DEV\t\t\\\n\t_IOWR('u', UBLK_CMD_STOP_DEV, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_SET_PARAMS\t\t\\\n\t_IOWR('u', UBLK_CMD_SET_PARAMS, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_GET_PARAMS\t\t\\\n\t_IOR('u', UBLK_CMD_GET_PARAMS, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_START_USER_RECOVERY\t\\\n\t_IOWR('u', UBLK_CMD_START_USER_RECOVERY, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_END_USER_RECOVERY\t\\\n\t_IOWR('u', UBLK_CMD_END_USER_RECOVERY, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_GET_DEV_INFO2\t\\\n\t_IOR('u', UBLK_CMD_GET_DEV_INFO2, struct ublksrv_ctrl_cmd)\n#define UBLK_U_CMD_GET_FEATURES\t\\\n\t_IOR('u', 0x13, struct ublksrv_ctrl_cmd)\n\n \n#define UBLK_FEATURES_LEN  8\n\n \n\n \n#define\tUBLK_IO_FETCH_REQ\t\t0x20\n#define\tUBLK_IO_COMMIT_AND_FETCH_REQ\t0x21\n#define\tUBLK_IO_NEED_GET_DATA\t0x22\n\n \n#define\tUBLK_U_IO_FETCH_REQ\t\t\\\n\t_IOWR('u', UBLK_IO_FETCH_REQ, struct ublksrv_io_cmd)\n#define\tUBLK_U_IO_COMMIT_AND_FETCH_REQ\t\\\n\t_IOWR('u', UBLK_IO_COMMIT_AND_FETCH_REQ, struct ublksrv_io_cmd)\n#define\tUBLK_U_IO_NEED_GET_DATA\t\t\\\n\t_IOWR('u', UBLK_IO_NEED_GET_DATA, struct ublksrv_io_cmd)\n\n \n#define UBLK_IO_RES_OK\t\t\t0\n#define UBLK_IO_RES_NEED_GET_DATA\t1\n#define UBLK_IO_RES_ABORT\t\t(-ENODEV)\n\n#define UBLKSRV_CMD_BUF_OFFSET\t0\n#define UBLKSRV_IO_BUF_OFFSET\t0x80000000\n\n \n#define UBLK_MAX_QUEUE_DEPTH\t4096\n\n \n#define UBLK_IO_BUF_OFF\t\t0\n#define UBLK_IO_BUF_BITS\t25\n#define UBLK_IO_BUF_BITS_MASK\t((1ULL << UBLK_IO_BUF_BITS) - 1)\n\n \n#define UBLK_TAG_OFF\t\tUBLK_IO_BUF_BITS\n#define UBLK_TAG_BITS\t\t16\n#define UBLK_TAG_BITS_MASK\t((1ULL << UBLK_TAG_BITS) - 1)\n\n \n#define UBLK_QID_OFF\t\t(UBLK_TAG_OFF + UBLK_TAG_BITS)\n#define UBLK_QID_BITS\t\t12\n#define UBLK_QID_BITS_MASK\t((1ULL << UBLK_QID_BITS) - 1)\n\n#define UBLK_MAX_NR_QUEUES\t(1U << UBLK_QID_BITS)\n\n#define UBLKSRV_IO_BUF_TOTAL_BITS\t(UBLK_QID_OFF + UBLK_QID_BITS)\n#define UBLKSRV_IO_BUF_TOTAL_SIZE\t(1ULL << UBLKSRV_IO_BUF_TOTAL_BITS)\n\n \n#define UBLK_F_SUPPORT_ZERO_COPY\t(1ULL << 0)\n\n \n#define UBLK_F_URING_CMD_COMP_IN_TASK\t(1ULL << 1)\n\n \n#define UBLK_F_NEED_GET_DATA (1UL << 2)\n\n#define UBLK_F_USER_RECOVERY\t(1UL << 3)\n\n#define UBLK_F_USER_RECOVERY_REISSUE\t(1UL << 4)\n\n \n#define UBLK_F_UNPRIVILEGED_DEV\t(1UL << 5)\n\n \n#define UBLK_F_CMD_IOCTL_ENCODE\t(1UL << 6)\n\n \n#define UBLK_F_USER_COPY\t(1UL << 7)\n\n \n#define UBLK_F_ZONED (1ULL << 8)\n\n \n#define UBLK_S_DEV_DEAD\t0\n#define UBLK_S_DEV_LIVE\t1\n#define UBLK_S_DEV_QUIESCED\t2\n\n \nstruct ublksrv_ctrl_cmd {\n\t \n\t__u32\tdev_id;\n\n\t \n\t__u16\tqueue_id;\n\t \n\t__u16\tlen;\n\t__u64\taddr;\n\n\t \n\t__u64\tdata[1];\n\n\t \n\t__u16\tdev_path_len;\n\t__u16\tpad;\n\t__u32\treserved;\n};\n\nstruct ublksrv_ctrl_dev_info {\n\t__u16\tnr_hw_queues;\n\t__u16\tqueue_depth;\n\t__u16\tstate;\n\t__u16\tpad0;\n\n\t__u32\tmax_io_buf_bytes;\n\t__u32\tdev_id;\n\n\t__s32\tublksrv_pid;\n\t__u32\tpad1;\n\n\t__u64\tflags;\n\n\t \n\t__u64\tublksrv_flags;\n\n\t__u32\towner_uid;\t \n\t__u32\towner_gid;\t \n\t__u64\treserved1;\n\t__u64   reserved2;\n};\n\n#define\t\tUBLK_IO_OP_READ\t\t0\n#define\t\tUBLK_IO_OP_WRITE\t\t1\n#define\t\tUBLK_IO_OP_FLUSH\t\t2\n#define\t\tUBLK_IO_OP_DISCARD\t\t3\n#define\t\tUBLK_IO_OP_WRITE_SAME\t\t4\n#define\t\tUBLK_IO_OP_WRITE_ZEROES\t\t5\n#define\t\tUBLK_IO_OP_ZONE_OPEN\t\t10\n#define\t\tUBLK_IO_OP_ZONE_CLOSE\t\t11\n#define\t\tUBLK_IO_OP_ZONE_FINISH\t\t12\n#define\t\tUBLK_IO_OP_ZONE_APPEND\t\t13\n#define\t\tUBLK_IO_OP_ZONE_RESET_ALL\t14\n#define\t\tUBLK_IO_OP_ZONE_RESET\t\t15\n \n#define\t\tUBLK_IO_OP_REPORT_ZONES\t\t18\n\n#define\t\tUBLK_IO_F_FAILFAST_DEV\t\t(1U << 8)\n#define\t\tUBLK_IO_F_FAILFAST_TRANSPORT\t(1U << 9)\n#define\t\tUBLK_IO_F_FAILFAST_DRIVER\t(1U << 10)\n#define\t\tUBLK_IO_F_META\t\t\t(1U << 11)\n#define\t\tUBLK_IO_F_FUA\t\t\t(1U << 13)\n#define\t\tUBLK_IO_F_NOUNMAP\t\t(1U << 15)\n#define\t\tUBLK_IO_F_SWAP\t\t\t(1U << 16)\n\n \nstruct ublksrv_io_desc {\n\t \n\t__u32\t\top_flags;\n\n\tunion {\n\t\t__u32\t\tnr_sectors;\n\t\t__u32\t\tnr_zones;  \n\t};\n\n\t \n\t__u64\t\tstart_sector;\n\n\t \n\t__u64\t\taddr;\n};\n\nstatic inline __u8 ublksrv_get_op(const struct ublksrv_io_desc *iod)\n{\n\treturn iod->op_flags & 0xff;\n}\n\nstatic inline __u32 ublksrv_get_flags(const struct ublksrv_io_desc *iod)\n{\n\treturn iod->op_flags >> 8;\n}\n\n \nstruct ublksrv_io_cmd {\n\t__u16\tq_id;\n\n\t \n\t__u16\ttag;\n\n\t \n\t__s32\tresult;\n\n\tunion {\n\t\t \n\t\t__u64\taddr;\n\t\t__u64\tzone_append_lba;\n\t};\n};\n\nstruct ublk_param_basic {\n#define UBLK_ATTR_READ_ONLY            (1 << 0)\n#define UBLK_ATTR_ROTATIONAL           (1 << 1)\n#define UBLK_ATTR_VOLATILE_CACHE       (1 << 2)\n#define UBLK_ATTR_FUA                  (1 << 3)\n\t__u32\tattrs;\n\t__u8\tlogical_bs_shift;\n\t__u8\tphysical_bs_shift;\n\t__u8\tio_opt_shift;\n\t__u8\tio_min_shift;\n\n\t__u32\tmax_sectors;\n\t__u32\tchunk_sectors;\n\n\t__u64   dev_sectors;\n\t__u64   virt_boundary_mask;\n};\n\nstruct ublk_param_discard {\n\t__u32\tdiscard_alignment;\n\n\t__u32\tdiscard_granularity;\n\t__u32\tmax_discard_sectors;\n\n\t__u32\tmax_write_zeroes_sectors;\n\t__u16\tmax_discard_segments;\n\t__u16\treserved0;\n};\n\n \nstruct ublk_param_devt {\n\t__u32   char_major;\n\t__u32   char_minor;\n\t__u32   disk_major;\n\t__u32   disk_minor;\n};\n\nstruct ublk_param_zoned {\n\t__u32\tmax_open_zones;\n\t__u32\tmax_active_zones;\n\t__u32\tmax_zone_append_sectors;\n\t__u8\treserved[20];\n};\n\nstruct ublk_params {\n\t \n\t__u32\tlen;\n#define UBLK_PARAM_TYPE_BASIC           (1 << 0)\n#define UBLK_PARAM_TYPE_DISCARD         (1 << 1)\n#define UBLK_PARAM_TYPE_DEVT            (1 << 2)\n#define UBLK_PARAM_TYPE_ZONED           (1 << 3)\n\t__u32\ttypes;\t\t\t \n\n\tstruct ublk_param_basic\t\tbasic;\n\tstruct ublk_param_discard\tdiscard;\n\tstruct ublk_param_devt\t\tdevt;\n\tstruct ublk_param_zoned\tzoned;\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}