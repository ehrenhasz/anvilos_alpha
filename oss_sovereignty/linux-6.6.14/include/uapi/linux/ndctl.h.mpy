{
  "module_name": "ndctl.h",
  "hash_id": "140550c897a8e0938f264a1bc83dc17c40596992a275d498ac92a806365cdfcc",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/ndctl.h",
  "human_readable_source": " \n#ifndef __NDCTL_H__\n#define __NDCTL_H__\n\n#include <linux/types.h>\n\nstruct nd_cmd_dimm_flags {\n\t__u32 status;\n\t__u32 flags;\n} __packed;\n\nstruct nd_cmd_get_config_size {\n\t__u32 status;\n\t__u32 config_size;\n\t__u32 max_xfer;\n} __packed;\n\nstruct nd_cmd_get_config_data_hdr {\n\t__u32 in_offset;\n\t__u32 in_length;\n\t__u32 status;\n\t__u8 out_buf[];\n} __packed;\n\nstruct nd_cmd_set_config_hdr {\n\t__u32 in_offset;\n\t__u32 in_length;\n\t__u8 in_buf[];\n} __packed;\n\nstruct nd_cmd_vendor_hdr {\n\t__u32 opcode;\n\t__u32 in_length;\n\t__u8 in_buf[];\n} __packed;\n\nstruct nd_cmd_vendor_tail {\n\t__u32 status;\n\t__u32 out_length;\n\t__u8 out_buf[];\n} __packed;\n\nstruct nd_cmd_ars_cap {\n\t__u64 address;\n\t__u64 length;\n\t__u32 status;\n\t__u32 max_ars_out;\n\t__u32 clear_err_unit;\n\t__u16 flags;\n\t__u16 reserved;\n} __packed;\n\nstruct nd_cmd_ars_start {\n\t__u64 address;\n\t__u64 length;\n\t__u16 type;\n\t__u8 flags;\n\t__u8 reserved[5];\n\t__u32 status;\n\t__u32 scrub_time;\n} __packed;\n\nstruct nd_cmd_ars_status {\n\t__u32 status;\n\t__u32 out_length;\n\t__u64 address;\n\t__u64 length;\n\t__u64 restart_address;\n\t__u64 restart_length;\n\t__u16 type;\n\t__u16 flags;\n\t__u32 num_records;\n\tstruct nd_ars_record {\n\t\t__u32 handle;\n\t\t__u32 reserved;\n\t\t__u64 err_address;\n\t\t__u64 length;\n\t} __packed records[];\n} __packed;\n\nstruct nd_cmd_clear_error {\n\t__u64 address;\n\t__u64 length;\n\t__u32 status;\n\t__u8 reserved[4];\n\t__u64 cleared;\n} __packed;\n\nenum {\n\tND_CMD_IMPLEMENTED = 0,\n\n\t \n\tND_CMD_ARS_CAP = 1,\n\tND_CMD_ARS_START = 2,\n\tND_CMD_ARS_STATUS = 3,\n\tND_CMD_CLEAR_ERROR = 4,\n\n\t \n\tND_CMD_SMART = 1,\n\tND_CMD_SMART_THRESHOLD = 2,\n\tND_CMD_DIMM_FLAGS = 3,\n\tND_CMD_GET_CONFIG_SIZE = 4,\n\tND_CMD_GET_CONFIG_DATA = 5,\n\tND_CMD_SET_CONFIG_DATA = 6,\n\tND_CMD_VENDOR_EFFECT_LOG_SIZE = 7,\n\tND_CMD_VENDOR_EFFECT_LOG = 8,\n\tND_CMD_VENDOR = 9,\n\tND_CMD_CALL = 10,\n};\n\nenum {\n\tND_ARS_VOLATILE = 1,\n\tND_ARS_PERSISTENT = 2,\n\tND_ARS_RETURN_PREV_DATA = 1 << 1,\n\tND_CONFIG_LOCKED = 1,\n};\n\nstatic inline const char *nvdimm_bus_cmd_name(unsigned cmd)\n{\n\tswitch (cmd) {\n\tcase ND_CMD_ARS_CAP:\t\treturn \"ars_cap\";\n\tcase ND_CMD_ARS_START:\t\treturn \"ars_start\";\n\tcase ND_CMD_ARS_STATUS:\t\treturn \"ars_status\";\n\tcase ND_CMD_CLEAR_ERROR:\treturn \"clear_error\";\n\tcase ND_CMD_CALL:\t\treturn \"cmd_call\";\n\tdefault:\t\t\treturn \"unknown\";\n\t}\n}\n\nstatic inline const char *nvdimm_cmd_name(unsigned cmd)\n{\n\tswitch (cmd) {\n\tcase ND_CMD_SMART:\t\t\treturn \"smart\";\n\tcase ND_CMD_SMART_THRESHOLD:\t\treturn \"smart_thresh\";\n\tcase ND_CMD_DIMM_FLAGS:\t\t\treturn \"flags\";\n\tcase ND_CMD_GET_CONFIG_SIZE:\t\treturn \"get_size\";\n\tcase ND_CMD_GET_CONFIG_DATA:\t\treturn \"get_data\";\n\tcase ND_CMD_SET_CONFIG_DATA:\t\treturn \"set_data\";\n\tcase ND_CMD_VENDOR_EFFECT_LOG_SIZE:\treturn \"effect_size\";\n\tcase ND_CMD_VENDOR_EFFECT_LOG:\t\treturn \"effect_log\";\n\tcase ND_CMD_VENDOR:\t\t\treturn \"vendor\";\n\tcase ND_CMD_CALL:\t\t\treturn \"cmd_call\";\n\tdefault:\t\t\t\treturn \"unknown\";\n\t}\n}\n\n#define ND_IOCTL 'N'\n\n#define ND_IOCTL_DIMM_FLAGS\t\t_IOWR(ND_IOCTL, ND_CMD_DIMM_FLAGS,\\\n\t\t\t\t\tstruct nd_cmd_dimm_flags)\n\n#define ND_IOCTL_GET_CONFIG_SIZE\t_IOWR(ND_IOCTL, ND_CMD_GET_CONFIG_SIZE,\\\n\t\t\t\t\tstruct nd_cmd_get_config_size)\n\n#define ND_IOCTL_GET_CONFIG_DATA\t_IOWR(ND_IOCTL, ND_CMD_GET_CONFIG_DATA,\\\n\t\t\t\t\tstruct nd_cmd_get_config_data_hdr)\n\n#define ND_IOCTL_SET_CONFIG_DATA\t_IOWR(ND_IOCTL, ND_CMD_SET_CONFIG_DATA,\\\n\t\t\t\t\tstruct nd_cmd_set_config_hdr)\n\n#define ND_IOCTL_VENDOR\t\t\t_IOWR(ND_IOCTL, ND_CMD_VENDOR,\\\n\t\t\t\t\tstruct nd_cmd_vendor_hdr)\n\n#define ND_IOCTL_ARS_CAP\t\t_IOWR(ND_IOCTL, ND_CMD_ARS_CAP,\\\n\t\t\t\t\tstruct nd_cmd_ars_cap)\n\n#define ND_IOCTL_ARS_START\t\t_IOWR(ND_IOCTL, ND_CMD_ARS_START,\\\n\t\t\t\t\tstruct nd_cmd_ars_start)\n\n#define ND_IOCTL_ARS_STATUS\t\t_IOWR(ND_IOCTL, ND_CMD_ARS_STATUS,\\\n\t\t\t\t\tstruct nd_cmd_ars_status)\n\n#define ND_IOCTL_CLEAR_ERROR\t\t_IOWR(ND_IOCTL, ND_CMD_CLEAR_ERROR,\\\n\t\t\t\t\tstruct nd_cmd_clear_error)\n\n#define ND_DEVICE_DIMM 1             \n#define ND_DEVICE_REGION_PMEM 2      \n#define ND_DEVICE_REGION_BLK 3       \n#define ND_DEVICE_NAMESPACE_IO 4     \n#define ND_DEVICE_NAMESPACE_PMEM 5   \n#define ND_DEVICE_DAX_PMEM 7         \n\nenum nd_driver_flags {\n\tND_DRIVER_DIMM            = 1 << ND_DEVICE_DIMM,\n\tND_DRIVER_REGION_PMEM     = 1 << ND_DEVICE_REGION_PMEM,\n\tND_DRIVER_REGION_BLK      = 1 << ND_DEVICE_REGION_BLK,\n\tND_DRIVER_NAMESPACE_IO    = 1 << ND_DEVICE_NAMESPACE_IO,\n\tND_DRIVER_NAMESPACE_PMEM  = 1 << ND_DEVICE_NAMESPACE_PMEM,\n\tND_DRIVER_DAX_PMEM\t  = 1 << ND_DEVICE_DAX_PMEM,\n};\n\nenum ars_masks {\n\tARS_STATUS_MASK = 0x0000FFFF,\n\tARS_EXT_STATUS_SHIFT = 16,\n};\n\n \n\nstruct nd_cmd_pkg {\n\t__u64   nd_family;\t\t \n\t__u64   nd_command;\n\t__u32   nd_size_in;\t\t \n\t__u32   nd_size_out;\t\t \n\t__u32   nd_reserved2[9];\t \n\t__u32   nd_fw_size;\t\t \n\tunsigned char nd_payload[];\t \n};\n\n \n#define NVDIMM_FAMILY_INTEL 0\n#define NVDIMM_FAMILY_HPE1 1\n#define NVDIMM_FAMILY_HPE2 2\n#define NVDIMM_FAMILY_MSFT 3\n#define NVDIMM_FAMILY_HYPERV 4\n#define NVDIMM_FAMILY_PAPR 5\n#define NVDIMM_FAMILY_MAX NVDIMM_FAMILY_PAPR\n\n#define NVDIMM_BUS_FAMILY_NFIT 0\n#define NVDIMM_BUS_FAMILY_INTEL 1\n#define NVDIMM_BUS_FAMILY_MAX NVDIMM_BUS_FAMILY_INTEL\n\n#define ND_IOCTL_CALL\t\t\t_IOWR(ND_IOCTL, ND_CMD_CALL,\\\n\t\t\t\t\tstruct nd_cmd_pkg)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}