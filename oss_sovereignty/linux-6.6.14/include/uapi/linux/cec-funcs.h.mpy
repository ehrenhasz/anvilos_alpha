{
  "module_name": "cec-funcs.h",
  "hash_id": "d7639f7f98f1af8d32e4e03eb88ac2c227b6247ae036d48b9babce9ba8a71d38",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/cec-funcs.h",
  "human_readable_source": " \n \n\n#ifndef _CEC_UAPI_FUNCS_H\n#define _CEC_UAPI_FUNCS_H\n\n#include <linux/cec.h>\n\n \nstatic inline void cec_msg_active_source(struct cec_msg *msg, __u16 phys_addr)\n{\n\tmsg->len = 4;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_ACTIVE_SOURCE;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n}\n\nstatic inline void cec_ops_active_source(const struct cec_msg *msg,\n\t\t\t\t\t __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_image_view_on(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_IMAGE_VIEW_ON;\n}\n\nstatic inline void cec_msg_text_view_on(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_TEXT_VIEW_ON;\n}\n\n\n \nstatic inline void cec_msg_inactive_source(struct cec_msg *msg,\n\t\t\t\t\t   __u16 phys_addr)\n{\n\tmsg->len = 4;\n\tmsg->msg[1] = CEC_MSG_INACTIVE_SOURCE;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n}\n\nstatic inline void cec_ops_inactive_source(const struct cec_msg *msg,\n\t\t\t\t\t   __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_request_active_source(struct cec_msg *msg,\n\t\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_REQUEST_ACTIVE_SOURCE;\n\tmsg->reply = reply ? CEC_MSG_ACTIVE_SOURCE : 0;\n}\n\nstatic inline void cec_msg_routing_information(struct cec_msg *msg,\n\t\t\t\t\t       __u16 phys_addr)\n{\n\tmsg->len = 4;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_ROUTING_INFORMATION;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n}\n\nstatic inline void cec_ops_routing_information(const struct cec_msg *msg,\n\t\t\t\t\t       __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_routing_change(struct cec_msg *msg,\n\t\t\t\t\t  int reply,\n\t\t\t\t\t  __u16 orig_phys_addr,\n\t\t\t\t\t  __u16 new_phys_addr)\n{\n\tmsg->len = 6;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_ROUTING_CHANGE;\n\tmsg->msg[2] = orig_phys_addr >> 8;\n\tmsg->msg[3] = orig_phys_addr & 0xff;\n\tmsg->msg[4] = new_phys_addr >> 8;\n\tmsg->msg[5] = new_phys_addr & 0xff;\n\tmsg->reply = reply ? CEC_MSG_ROUTING_INFORMATION : 0;\n}\n\nstatic inline void cec_ops_routing_change(const struct cec_msg *msg,\n\t\t\t\t\t  __u16 *orig_phys_addr,\n\t\t\t\t\t  __u16 *new_phys_addr)\n{\n\t*orig_phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*new_phys_addr = (msg->msg[4] << 8) | msg->msg[5];\n}\n\nstatic inline void cec_msg_set_stream_path(struct cec_msg *msg, __u16 phys_addr)\n{\n\tmsg->len = 4;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_SET_STREAM_PATH;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n}\n\nstatic inline void cec_ops_set_stream_path(const struct cec_msg *msg,\n\t\t\t\t\t   __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\n\n \nstatic inline void cec_msg_standby(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_STANDBY;\n}\n\n\n \nstatic inline void cec_msg_record_off(struct cec_msg *msg, int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_RECORD_OFF;\n\tmsg->reply = reply ? CEC_MSG_RECORD_STATUS : 0;\n}\n\nstruct cec_op_arib_data {\n\t__u16 transport_id;\n\t__u16 service_id;\n\t__u16 orig_network_id;\n};\n\nstruct cec_op_atsc_data {\n\t__u16 transport_id;\n\t__u16 program_number;\n};\n\nstruct cec_op_dvb_data {\n\t__u16 transport_id;\n\t__u16 service_id;\n\t__u16 orig_network_id;\n};\n\nstruct cec_op_channel_data {\n\t__u8 channel_number_fmt;\n\t__u16 major;\n\t__u16 minor;\n};\n\nstruct cec_op_digital_service_id {\n\t__u8 service_id_method;\n\t__u8 dig_bcast_system;\n\tunion {\n\t\tstruct cec_op_arib_data arib;\n\t\tstruct cec_op_atsc_data atsc;\n\t\tstruct cec_op_dvb_data dvb;\n\t\tstruct cec_op_channel_data channel;\n\t};\n};\n\nstruct cec_op_record_src {\n\t__u8 type;\n\tunion {\n\t\tstruct cec_op_digital_service_id digital;\n\t\tstruct {\n\t\t\t__u8 ana_bcast_type;\n\t\t\t__u16 ana_freq;\n\t\t\t__u8 bcast_system;\n\t\t} analog;\n\t\tstruct {\n\t\t\t__u8 plug;\n\t\t} ext_plug;\n\t\tstruct {\n\t\t\t__u16 phys_addr;\n\t\t} ext_phys_addr;\n\t};\n};\n\nstatic inline void cec_set_digital_service_id(__u8 *msg,\n\t      const struct cec_op_digital_service_id *digital)\n{\n\t*msg++ = (digital->service_id_method << 7) | digital->dig_bcast_system;\n\tif (digital->service_id_method == CEC_OP_SERVICE_ID_METHOD_BY_CHANNEL) {\n\t\t*msg++ = (digital->channel.channel_number_fmt << 2) |\n\t\t\t (digital->channel.major >> 8);\n\t\t*msg++ = digital->channel.major & 0xff;\n\t\t*msg++ = digital->channel.minor >> 8;\n\t\t*msg++ = digital->channel.minor & 0xff;\n\t\t*msg++ = 0;\n\t\t*msg++ = 0;\n\t\treturn;\n\t}\n\tswitch (digital->dig_bcast_system) {\n\tcase CEC_OP_DIG_SERVICE_BCAST_SYSTEM_ATSC_GEN:\n\tcase CEC_OP_DIG_SERVICE_BCAST_SYSTEM_ATSC_CABLE:\n\tcase CEC_OP_DIG_SERVICE_BCAST_SYSTEM_ATSC_SAT:\n\tcase CEC_OP_DIG_SERVICE_BCAST_SYSTEM_ATSC_T:\n\t\t*msg++ = digital->atsc.transport_id >> 8;\n\t\t*msg++ = digital->atsc.transport_id & 0xff;\n\t\t*msg++ = digital->atsc.program_number >> 8;\n\t\t*msg++ = digital->atsc.program_number & 0xff;\n\t\t*msg++ = 0;\n\t\t*msg++ = 0;\n\t\tbreak;\n\tdefault:\n\t\t*msg++ = digital->dvb.transport_id >> 8;\n\t\t*msg++ = digital->dvb.transport_id & 0xff;\n\t\t*msg++ = digital->dvb.service_id >> 8;\n\t\t*msg++ = digital->dvb.service_id & 0xff;\n\t\t*msg++ = digital->dvb.orig_network_id >> 8;\n\t\t*msg++ = digital->dvb.orig_network_id & 0xff;\n\t\tbreak;\n\t}\n}\n\nstatic inline void cec_get_digital_service_id(const __u8 *msg,\n\t      struct cec_op_digital_service_id *digital)\n{\n\tdigital->service_id_method = msg[0] >> 7;\n\tdigital->dig_bcast_system = msg[0] & 0x7f;\n\tif (digital->service_id_method == CEC_OP_SERVICE_ID_METHOD_BY_CHANNEL) {\n\t\tdigital->channel.channel_number_fmt = msg[1] >> 2;\n\t\tdigital->channel.major = ((msg[1] & 3) << 6) | msg[2];\n\t\tdigital->channel.minor = (msg[3] << 8) | msg[4];\n\t\treturn;\n\t}\n\tdigital->dvb.transport_id = (msg[1] << 8) | msg[2];\n\tdigital->dvb.service_id = (msg[3] << 8) | msg[4];\n\tdigital->dvb.orig_network_id = (msg[5] << 8) | msg[6];\n}\n\nstatic inline void cec_msg_record_on_own(struct cec_msg *msg)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_RECORD_ON;\n\tmsg->msg[2] = CEC_OP_RECORD_SRC_OWN;\n}\n\nstatic inline void cec_msg_record_on_digital(struct cec_msg *msg,\n\t\t\t     const struct cec_op_digital_service_id *digital)\n{\n\tmsg->len = 10;\n\tmsg->msg[1] = CEC_MSG_RECORD_ON;\n\tmsg->msg[2] = CEC_OP_RECORD_SRC_DIGITAL;\n\tcec_set_digital_service_id(msg->msg + 3, digital);\n}\n\nstatic inline void cec_msg_record_on_analog(struct cec_msg *msg,\n\t\t\t\t\t    __u8 ana_bcast_type,\n\t\t\t\t\t    __u16 ana_freq,\n\t\t\t\t\t    __u8 bcast_system)\n{\n\tmsg->len = 7;\n\tmsg->msg[1] = CEC_MSG_RECORD_ON;\n\tmsg->msg[2] = CEC_OP_RECORD_SRC_ANALOG;\n\tmsg->msg[3] = ana_bcast_type;\n\tmsg->msg[4] = ana_freq >> 8;\n\tmsg->msg[5] = ana_freq & 0xff;\n\tmsg->msg[6] = bcast_system;\n}\n\nstatic inline void cec_msg_record_on_plug(struct cec_msg *msg,\n\t\t\t\t\t  __u8 plug)\n{\n\tmsg->len = 4;\n\tmsg->msg[1] = CEC_MSG_RECORD_ON;\n\tmsg->msg[2] = CEC_OP_RECORD_SRC_EXT_PLUG;\n\tmsg->msg[3] = plug;\n}\n\nstatic inline void cec_msg_record_on_phys_addr(struct cec_msg *msg,\n\t\t\t\t\t       __u16 phys_addr)\n{\n\tmsg->len = 5;\n\tmsg->msg[1] = CEC_MSG_RECORD_ON;\n\tmsg->msg[2] = CEC_OP_RECORD_SRC_EXT_PHYS_ADDR;\n\tmsg->msg[3] = phys_addr >> 8;\n\tmsg->msg[4] = phys_addr & 0xff;\n}\n\nstatic inline void cec_msg_record_on(struct cec_msg *msg,\n\t\t\t\t     int reply,\n\t\t\t\t     const struct cec_op_record_src *rec_src)\n{\n\tswitch (rec_src->type) {\n\tcase CEC_OP_RECORD_SRC_OWN:\n\t\tcec_msg_record_on_own(msg);\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_DIGITAL:\n\t\tcec_msg_record_on_digital(msg, &rec_src->digital);\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_ANALOG:\n\t\tcec_msg_record_on_analog(msg,\n\t\t\t\t\t rec_src->analog.ana_bcast_type,\n\t\t\t\t\t rec_src->analog.ana_freq,\n\t\t\t\t\t rec_src->analog.bcast_system);\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_EXT_PLUG:\n\t\tcec_msg_record_on_plug(msg, rec_src->ext_plug.plug);\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_EXT_PHYS_ADDR:\n\t\tcec_msg_record_on_phys_addr(msg,\n\t\t\t\t\t    rec_src->ext_phys_addr.phys_addr);\n\t\tbreak;\n\t}\n\tmsg->reply = reply ? CEC_MSG_RECORD_STATUS : 0;\n}\n\nstatic inline void cec_ops_record_on(const struct cec_msg *msg,\n\t\t\t\t     struct cec_op_record_src *rec_src)\n{\n\trec_src->type = msg->msg[2];\n\tswitch (rec_src->type) {\n\tcase CEC_OP_RECORD_SRC_OWN:\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_DIGITAL:\n\t\tcec_get_digital_service_id(msg->msg + 3, &rec_src->digital);\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_ANALOG:\n\t\trec_src->analog.ana_bcast_type = msg->msg[3];\n\t\trec_src->analog.ana_freq =\n\t\t\t(msg->msg[4] << 8) | msg->msg[5];\n\t\trec_src->analog.bcast_system = msg->msg[6];\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_EXT_PLUG:\n\t\trec_src->ext_plug.plug = msg->msg[3];\n\t\tbreak;\n\tcase CEC_OP_RECORD_SRC_EXT_PHYS_ADDR:\n\t\trec_src->ext_phys_addr.phys_addr =\n\t\t\t(msg->msg[3] << 8) | msg->msg[4];\n\t\tbreak;\n\t}\n}\n\nstatic inline void cec_msg_record_status(struct cec_msg *msg, __u8 rec_status)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_RECORD_STATUS;\n\tmsg->msg[2] = rec_status;\n}\n\nstatic inline void cec_ops_record_status(const struct cec_msg *msg,\n\t\t\t\t\t __u8 *rec_status)\n{\n\t*rec_status = msg->msg[2];\n}\n\nstatic inline void cec_msg_record_tv_screen(struct cec_msg *msg,\n\t\t\t\t\t    int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_RECORD_TV_SCREEN;\n\tmsg->reply = reply ? CEC_MSG_RECORD_ON : 0;\n}\n\n\n \nstatic inline void cec_msg_timer_status(struct cec_msg *msg,\n\t\t\t\t\t__u8 timer_overlap_warning,\n\t\t\t\t\t__u8 media_info,\n\t\t\t\t\t__u8 prog_info,\n\t\t\t\t\t__u8 prog_error,\n\t\t\t\t\t__u8 duration_hr,\n\t\t\t\t\t__u8 duration_min)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_TIMER_STATUS;\n\tmsg->msg[2] = (timer_overlap_warning << 7) |\n\t\t(media_info << 5) |\n\t\t(prog_info ? 0x10 : 0) |\n\t\t(prog_info ? prog_info : prog_error);\n\tif (prog_info == CEC_OP_PROG_INFO_NOT_ENOUGH_SPACE ||\n\t    prog_info == CEC_OP_PROG_INFO_MIGHT_NOT_BE_ENOUGH_SPACE ||\n\t    prog_error == CEC_OP_PROG_ERROR_DUPLICATE) {\n\t\tmsg->len += 2;\n\t\tmsg->msg[3] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\t\tmsg->msg[4] = ((duration_min / 10) << 4) | (duration_min % 10);\n\t}\n}\n\nstatic inline void cec_ops_timer_status(const struct cec_msg *msg,\n\t\t\t\t\t__u8 *timer_overlap_warning,\n\t\t\t\t\t__u8 *media_info,\n\t\t\t\t\t__u8 *prog_info,\n\t\t\t\t\t__u8 *prog_error,\n\t\t\t\t\t__u8 *duration_hr,\n\t\t\t\t\t__u8 *duration_min)\n{\n\t*timer_overlap_warning = msg->msg[2] >> 7;\n\t*media_info = (msg->msg[2] >> 5) & 3;\n\tif (msg->msg[2] & 0x10) {\n\t\t*prog_info = msg->msg[2] & 0xf;\n\t\t*prog_error = 0;\n\t} else {\n\t\t*prog_info = 0;\n\t\t*prog_error = msg->msg[2] & 0xf;\n\t}\n\tif (*prog_info == CEC_OP_PROG_INFO_NOT_ENOUGH_SPACE ||\n\t    *prog_info == CEC_OP_PROG_INFO_MIGHT_NOT_BE_ENOUGH_SPACE ||\n\t    *prog_error == CEC_OP_PROG_ERROR_DUPLICATE) {\n\t\t*duration_hr = (msg->msg[3] >> 4) * 10 + (msg->msg[3] & 0xf);\n\t\t*duration_min = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t} else {\n\t\t*duration_hr = *duration_min = 0;\n\t}\n}\n\nstatic inline void cec_msg_timer_cleared_status(struct cec_msg *msg,\n\t\t\t\t\t\t__u8 timer_cleared_status)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_TIMER_CLEARED_STATUS;\n\tmsg->msg[2] = timer_cleared_status;\n}\n\nstatic inline void cec_ops_timer_cleared_status(const struct cec_msg *msg,\n\t\t\t\t\t\t__u8 *timer_cleared_status)\n{\n\t*timer_cleared_status = msg->msg[2];\n}\n\nstatic inline void cec_msg_clear_analogue_timer(struct cec_msg *msg,\n\t\t\t\t\t\tint reply,\n\t\t\t\t\t\t__u8 day,\n\t\t\t\t\t\t__u8 month,\n\t\t\t\t\t\t__u8 start_hr,\n\t\t\t\t\t\t__u8 start_min,\n\t\t\t\t\t\t__u8 duration_hr,\n\t\t\t\t\t\t__u8 duration_min,\n\t\t\t\t\t\t__u8 recording_seq,\n\t\t\t\t\t\t__u8 ana_bcast_type,\n\t\t\t\t\t\t__u16 ana_freq,\n\t\t\t\t\t\t__u8 bcast_system)\n{\n\tmsg->len = 13;\n\tmsg->msg[1] = CEC_MSG_CLEAR_ANALOGUE_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tmsg->msg[9] = ana_bcast_type;\n\tmsg->msg[10] = ana_freq >> 8;\n\tmsg->msg[11] = ana_freq & 0xff;\n\tmsg->msg[12] = bcast_system;\n\tmsg->reply = reply ? CEC_MSG_TIMER_CLEARED_STATUS : 0;\n}\n\nstatic inline void cec_ops_clear_analogue_timer(const struct cec_msg *msg,\n\t\t\t\t\t\t__u8 *day,\n\t\t\t\t\t\t__u8 *month,\n\t\t\t\t\t\t__u8 *start_hr,\n\t\t\t\t\t\t__u8 *start_min,\n\t\t\t\t\t\t__u8 *duration_hr,\n\t\t\t\t\t\t__u8 *duration_min,\n\t\t\t\t\t\t__u8 *recording_seq,\n\t\t\t\t\t\t__u8 *ana_bcast_type,\n\t\t\t\t\t\t__u16 *ana_freq,\n\t\t\t\t\t\t__u8 *bcast_system)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\t*ana_bcast_type = msg->msg[9];\n\t*ana_freq = (msg->msg[10] << 8) | msg->msg[11];\n\t*bcast_system = msg->msg[12];\n}\n\nstatic inline void cec_msg_clear_digital_timer(struct cec_msg *msg,\n\t\t\t\tint reply,\n\t\t\t\t__u8 day,\n\t\t\t\t__u8 month,\n\t\t\t\t__u8 start_hr,\n\t\t\t\t__u8 start_min,\n\t\t\t\t__u8 duration_hr,\n\t\t\t\t__u8 duration_min,\n\t\t\t\t__u8 recording_seq,\n\t\t\t\tconst struct cec_op_digital_service_id *digital)\n{\n\tmsg->len = 16;\n\tmsg->reply = reply ? CEC_MSG_TIMER_CLEARED_STATUS : 0;\n\tmsg->msg[1] = CEC_MSG_CLEAR_DIGITAL_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tcec_set_digital_service_id(msg->msg + 9, digital);\n}\n\nstatic inline void cec_ops_clear_digital_timer(const struct cec_msg *msg,\n\t\t\t\t__u8 *day,\n\t\t\t\t__u8 *month,\n\t\t\t\t__u8 *start_hr,\n\t\t\t\t__u8 *start_min,\n\t\t\t\t__u8 *duration_hr,\n\t\t\t\t__u8 *duration_min,\n\t\t\t\t__u8 *recording_seq,\n\t\t\t\tstruct cec_op_digital_service_id *digital)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\tcec_get_digital_service_id(msg->msg + 9, digital);\n}\n\nstatic inline void cec_msg_clear_ext_timer(struct cec_msg *msg,\n\t\t\t\t\t   int reply,\n\t\t\t\t\t   __u8 day,\n\t\t\t\t\t   __u8 month,\n\t\t\t\t\t   __u8 start_hr,\n\t\t\t\t\t   __u8 start_min,\n\t\t\t\t\t   __u8 duration_hr,\n\t\t\t\t\t   __u8 duration_min,\n\t\t\t\t\t   __u8 recording_seq,\n\t\t\t\t\t   __u8 ext_src_spec,\n\t\t\t\t\t   __u8 plug,\n\t\t\t\t\t   __u16 phys_addr)\n{\n\tmsg->len = 13;\n\tmsg->msg[1] = CEC_MSG_CLEAR_EXT_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tmsg->msg[9] = ext_src_spec;\n\tmsg->msg[10] = plug;\n\tmsg->msg[11] = phys_addr >> 8;\n\tmsg->msg[12] = phys_addr & 0xff;\n\tmsg->reply = reply ? CEC_MSG_TIMER_CLEARED_STATUS : 0;\n}\n\nstatic inline void cec_ops_clear_ext_timer(const struct cec_msg *msg,\n\t\t\t\t\t   __u8 *day,\n\t\t\t\t\t   __u8 *month,\n\t\t\t\t\t   __u8 *start_hr,\n\t\t\t\t\t   __u8 *start_min,\n\t\t\t\t\t   __u8 *duration_hr,\n\t\t\t\t\t   __u8 *duration_min,\n\t\t\t\t\t   __u8 *recording_seq,\n\t\t\t\t\t   __u8 *ext_src_spec,\n\t\t\t\t\t   __u8 *plug,\n\t\t\t\t\t   __u16 *phys_addr)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\t*ext_src_spec = msg->msg[9];\n\t*plug = msg->msg[10];\n\t*phys_addr = (msg->msg[11] << 8) | msg->msg[12];\n}\n\nstatic inline void cec_msg_set_analogue_timer(struct cec_msg *msg,\n\t\t\t\t\t      int reply,\n\t\t\t\t\t      __u8 day,\n\t\t\t\t\t      __u8 month,\n\t\t\t\t\t      __u8 start_hr,\n\t\t\t\t\t      __u8 start_min,\n\t\t\t\t\t      __u8 duration_hr,\n\t\t\t\t\t      __u8 duration_min,\n\t\t\t\t\t      __u8 recording_seq,\n\t\t\t\t\t      __u8 ana_bcast_type,\n\t\t\t\t\t      __u16 ana_freq,\n\t\t\t\t\t      __u8 bcast_system)\n{\n\tmsg->len = 13;\n\tmsg->msg[1] = CEC_MSG_SET_ANALOGUE_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tmsg->msg[9] = ana_bcast_type;\n\tmsg->msg[10] = ana_freq >> 8;\n\tmsg->msg[11] = ana_freq & 0xff;\n\tmsg->msg[12] = bcast_system;\n\tmsg->reply = reply ? CEC_MSG_TIMER_STATUS : 0;\n}\n\nstatic inline void cec_ops_set_analogue_timer(const struct cec_msg *msg,\n\t\t\t\t\t      __u8 *day,\n\t\t\t\t\t      __u8 *month,\n\t\t\t\t\t      __u8 *start_hr,\n\t\t\t\t\t      __u8 *start_min,\n\t\t\t\t\t      __u8 *duration_hr,\n\t\t\t\t\t      __u8 *duration_min,\n\t\t\t\t\t      __u8 *recording_seq,\n\t\t\t\t\t      __u8 *ana_bcast_type,\n\t\t\t\t\t      __u16 *ana_freq,\n\t\t\t\t\t      __u8 *bcast_system)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\t*ana_bcast_type = msg->msg[9];\n\t*ana_freq = (msg->msg[10] << 8) | msg->msg[11];\n\t*bcast_system = msg->msg[12];\n}\n\nstatic inline void cec_msg_set_digital_timer(struct cec_msg *msg,\n\t\t\tint reply,\n\t\t\t__u8 day,\n\t\t\t__u8 month,\n\t\t\t__u8 start_hr,\n\t\t\t__u8 start_min,\n\t\t\t__u8 duration_hr,\n\t\t\t__u8 duration_min,\n\t\t\t__u8 recording_seq,\n\t\t\tconst struct cec_op_digital_service_id *digital)\n{\n\tmsg->len = 16;\n\tmsg->reply = reply ? CEC_MSG_TIMER_STATUS : 0;\n\tmsg->msg[1] = CEC_MSG_SET_DIGITAL_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tcec_set_digital_service_id(msg->msg + 9, digital);\n}\n\nstatic inline void cec_ops_set_digital_timer(const struct cec_msg *msg,\n\t\t\t__u8 *day,\n\t\t\t__u8 *month,\n\t\t\t__u8 *start_hr,\n\t\t\t__u8 *start_min,\n\t\t\t__u8 *duration_hr,\n\t\t\t__u8 *duration_min,\n\t\t\t__u8 *recording_seq,\n\t\t\tstruct cec_op_digital_service_id *digital)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\tcec_get_digital_service_id(msg->msg + 9, digital);\n}\n\nstatic inline void cec_msg_set_ext_timer(struct cec_msg *msg,\n\t\t\t\t\t int reply,\n\t\t\t\t\t __u8 day,\n\t\t\t\t\t __u8 month,\n\t\t\t\t\t __u8 start_hr,\n\t\t\t\t\t __u8 start_min,\n\t\t\t\t\t __u8 duration_hr,\n\t\t\t\t\t __u8 duration_min,\n\t\t\t\t\t __u8 recording_seq,\n\t\t\t\t\t __u8 ext_src_spec,\n\t\t\t\t\t __u8 plug,\n\t\t\t\t\t __u16 phys_addr)\n{\n\tmsg->len = 13;\n\tmsg->msg[1] = CEC_MSG_SET_EXT_TIMER;\n\tmsg->msg[2] = day;\n\tmsg->msg[3] = month;\n\t \n\tmsg->msg[4] = ((start_hr / 10) << 4) | (start_hr % 10);\n\tmsg->msg[5] = ((start_min / 10) << 4) | (start_min % 10);\n\tmsg->msg[6] = ((duration_hr / 10) << 4) | (duration_hr % 10);\n\tmsg->msg[7] = ((duration_min / 10) << 4) | (duration_min % 10);\n\tmsg->msg[8] = recording_seq;\n\tmsg->msg[9] = ext_src_spec;\n\tmsg->msg[10] = plug;\n\tmsg->msg[11] = phys_addr >> 8;\n\tmsg->msg[12] = phys_addr & 0xff;\n\tmsg->reply = reply ? CEC_MSG_TIMER_STATUS : 0;\n}\n\nstatic inline void cec_ops_set_ext_timer(const struct cec_msg *msg,\n\t\t\t\t\t __u8 *day,\n\t\t\t\t\t __u8 *month,\n\t\t\t\t\t __u8 *start_hr,\n\t\t\t\t\t __u8 *start_min,\n\t\t\t\t\t __u8 *duration_hr,\n\t\t\t\t\t __u8 *duration_min,\n\t\t\t\t\t __u8 *recording_seq,\n\t\t\t\t\t __u8 *ext_src_spec,\n\t\t\t\t\t __u8 *plug,\n\t\t\t\t\t __u16 *phys_addr)\n{\n\t*day = msg->msg[2];\n\t*month = msg->msg[3];\n\t \n\t*start_hr = (msg->msg[4] >> 4) * 10 + (msg->msg[4] & 0xf);\n\t*start_min = (msg->msg[5] >> 4) * 10 + (msg->msg[5] & 0xf);\n\t*duration_hr = (msg->msg[6] >> 4) * 10 + (msg->msg[6] & 0xf);\n\t*duration_min = (msg->msg[7] >> 4) * 10 + (msg->msg[7] & 0xf);\n\t*recording_seq = msg->msg[8];\n\t*ext_src_spec = msg->msg[9];\n\t*plug = msg->msg[10];\n\t*phys_addr = (msg->msg[11] << 8) | msg->msg[12];\n}\n\nstatic inline void cec_msg_set_timer_program_title(struct cec_msg *msg,\n\t\t\t\t\t\t   const char *prog_title)\n{\n\tunsigned int len = strlen(prog_title);\n\n\tif (len > 14)\n\t\tlen = 14;\n\tmsg->len = 2 + len;\n\tmsg->msg[1] = CEC_MSG_SET_TIMER_PROGRAM_TITLE;\n\tmemcpy(msg->msg + 2, prog_title, len);\n}\n\nstatic inline void cec_ops_set_timer_program_title(const struct cec_msg *msg,\n\t\t\t\t\t\t   char *prog_title)\n{\n\tunsigned int len = msg->len > 2 ? msg->len - 2 : 0;\n\n\tif (len > 14)\n\t\tlen = 14;\n\tmemcpy(prog_title, msg->msg + 2, len);\n\tprog_title[len] = '\\0';\n}\n\n \nstatic inline void cec_msg_cec_version(struct cec_msg *msg, __u8 cec_version)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_CEC_VERSION;\n\tmsg->msg[2] = cec_version;\n}\n\nstatic inline void cec_ops_cec_version(const struct cec_msg *msg,\n\t\t\t\t       __u8 *cec_version)\n{\n\t*cec_version = msg->msg[2];\n}\n\nstatic inline void cec_msg_get_cec_version(struct cec_msg *msg,\n\t\t\t\t\t   int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GET_CEC_VERSION;\n\tmsg->reply = reply ? CEC_MSG_CEC_VERSION : 0;\n}\n\nstatic inline void cec_msg_report_physical_addr(struct cec_msg *msg,\n\t\t\t\t\t__u16 phys_addr, __u8 prim_devtype)\n{\n\tmsg->len = 5;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_REPORT_PHYSICAL_ADDR;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n\tmsg->msg[4] = prim_devtype;\n}\n\nstatic inline void cec_ops_report_physical_addr(const struct cec_msg *msg,\n\t\t\t\t\t__u16 *phys_addr, __u8 *prim_devtype)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*prim_devtype = msg->msg[4];\n}\n\nstatic inline void cec_msg_give_physical_addr(struct cec_msg *msg,\n\t\t\t\t\t      int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_PHYSICAL_ADDR;\n\tmsg->reply = reply ? CEC_MSG_REPORT_PHYSICAL_ADDR : 0;\n}\n\nstatic inline void cec_msg_set_menu_language(struct cec_msg *msg,\n\t\t\t\t\t     const char *language)\n{\n\tmsg->len = 5;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_SET_MENU_LANGUAGE;\n\tmemcpy(msg->msg + 2, language, 3);\n}\n\nstatic inline void cec_ops_set_menu_language(const struct cec_msg *msg,\n\t\t\t\t\t     char *language)\n{\n\tmemcpy(language, msg->msg + 2, 3);\n\tlanguage[3] = '\\0';\n}\n\nstatic inline void cec_msg_get_menu_language(struct cec_msg *msg,\n\t\t\t\t\t     int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GET_MENU_LANGUAGE;\n\tmsg->reply = reply ? CEC_MSG_SET_MENU_LANGUAGE : 0;\n}\n\n \nstatic inline void cec_msg_report_features(struct cec_msg *msg,\n\t\t\t\t__u8 cec_version, __u8 all_device_types,\n\t\t\t\t__u8 rc_profile, __u8 dev_features)\n{\n\tmsg->len = 6;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_REPORT_FEATURES;\n\tmsg->msg[2] = cec_version;\n\tmsg->msg[3] = all_device_types;\n\tmsg->msg[4] = rc_profile;\n\tmsg->msg[5] = dev_features;\n}\n\nstatic inline void cec_ops_report_features(const struct cec_msg *msg,\n\t\t\t__u8 *cec_version, __u8 *all_device_types,\n\t\t\tconst __u8 **rc_profile, const __u8 **dev_features)\n{\n\tconst __u8 *p = &msg->msg[4];\n\n\t*cec_version = msg->msg[2];\n\t*all_device_types = msg->msg[3];\n\t*rc_profile = p;\n\t*dev_features = NULL;\n\twhile (p < &msg->msg[14] && (*p & CEC_OP_FEAT_EXT))\n\t\tp++;\n\tif (!(*p & CEC_OP_FEAT_EXT)) {\n\t\t*dev_features = p + 1;\n\t\twhile (p < &msg->msg[15] && (*p & CEC_OP_FEAT_EXT))\n\t\t\tp++;\n\t}\n\tif (*p & CEC_OP_FEAT_EXT)\n\t\t*rc_profile = *dev_features = NULL;\n}\n\nstatic inline void cec_msg_give_features(struct cec_msg *msg,\n\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_FEATURES;\n\tmsg->reply = reply ? CEC_MSG_REPORT_FEATURES : 0;\n}\n\n \nstatic inline void cec_msg_deck_control(struct cec_msg *msg,\n\t\t\t\t\t__u8 deck_control_mode)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_DECK_CONTROL;\n\tmsg->msg[2] = deck_control_mode;\n}\n\nstatic inline void cec_ops_deck_control(const struct cec_msg *msg,\n\t\t\t\t\t__u8 *deck_control_mode)\n{\n\t*deck_control_mode = msg->msg[2];\n}\n\nstatic inline void cec_msg_deck_status(struct cec_msg *msg,\n\t\t\t\t       __u8 deck_info)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_DECK_STATUS;\n\tmsg->msg[2] = deck_info;\n}\n\nstatic inline void cec_ops_deck_status(const struct cec_msg *msg,\n\t\t\t\t       __u8 *deck_info)\n{\n\t*deck_info = msg->msg[2];\n}\n\nstatic inline void cec_msg_give_deck_status(struct cec_msg *msg,\n\t\t\t\t\t    int reply,\n\t\t\t\t\t    __u8 status_req)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_GIVE_DECK_STATUS;\n\tmsg->msg[2] = status_req;\n\tmsg->reply = (reply && status_req != CEC_OP_STATUS_REQ_OFF) ?\n\t\t\t\tCEC_MSG_DECK_STATUS : 0;\n}\n\nstatic inline void cec_ops_give_deck_status(const struct cec_msg *msg,\n\t\t\t\t\t    __u8 *status_req)\n{\n\t*status_req = msg->msg[2];\n}\n\nstatic inline void cec_msg_play(struct cec_msg *msg,\n\t\t\t\t__u8 play_mode)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_PLAY;\n\tmsg->msg[2] = play_mode;\n}\n\nstatic inline void cec_ops_play(const struct cec_msg *msg,\n\t\t\t\t__u8 *play_mode)\n{\n\t*play_mode = msg->msg[2];\n}\n\n\n \nstruct cec_op_tuner_device_info {\n\t__u8 rec_flag;\n\t__u8 tuner_display_info;\n\t__u8 is_analog;\n\tunion {\n\t\tstruct cec_op_digital_service_id digital;\n\t\tstruct {\n\t\t\t__u8 ana_bcast_type;\n\t\t\t__u16 ana_freq;\n\t\t\t__u8 bcast_system;\n\t\t} analog;\n\t};\n};\n\nstatic inline void cec_msg_tuner_device_status_analog(struct cec_msg *msg,\n\t\t\t\t\t\t      __u8 rec_flag,\n\t\t\t\t\t\t      __u8 tuner_display_info,\n\t\t\t\t\t\t      __u8 ana_bcast_type,\n\t\t\t\t\t\t      __u16 ana_freq,\n\t\t\t\t\t\t      __u8 bcast_system)\n{\n\tmsg->len = 7;\n\tmsg->msg[1] = CEC_MSG_TUNER_DEVICE_STATUS;\n\tmsg->msg[2] = (rec_flag << 7) | tuner_display_info;\n\tmsg->msg[3] = ana_bcast_type;\n\tmsg->msg[4] = ana_freq >> 8;\n\tmsg->msg[5] = ana_freq & 0xff;\n\tmsg->msg[6] = bcast_system;\n}\n\nstatic inline void cec_msg_tuner_device_status_digital(struct cec_msg *msg,\n\t\t   __u8 rec_flag, __u8 tuner_display_info,\n\t\t   const struct cec_op_digital_service_id *digital)\n{\n\tmsg->len = 10;\n\tmsg->msg[1] = CEC_MSG_TUNER_DEVICE_STATUS;\n\tmsg->msg[2] = (rec_flag << 7) | tuner_display_info;\n\tcec_set_digital_service_id(msg->msg + 3, digital);\n}\n\nstatic inline void cec_msg_tuner_device_status(struct cec_msg *msg,\n\t\t\tconst struct cec_op_tuner_device_info *tuner_dev_info)\n{\n\tif (tuner_dev_info->is_analog)\n\t\tcec_msg_tuner_device_status_analog(msg,\n\t\t\ttuner_dev_info->rec_flag,\n\t\t\ttuner_dev_info->tuner_display_info,\n\t\t\ttuner_dev_info->analog.ana_bcast_type,\n\t\t\ttuner_dev_info->analog.ana_freq,\n\t\t\ttuner_dev_info->analog.bcast_system);\n\telse\n\t\tcec_msg_tuner_device_status_digital(msg,\n\t\t\ttuner_dev_info->rec_flag,\n\t\t\ttuner_dev_info->tuner_display_info,\n\t\t\t&tuner_dev_info->digital);\n}\n\nstatic inline void cec_ops_tuner_device_status(const struct cec_msg *msg,\n\t\t\t\tstruct cec_op_tuner_device_info *tuner_dev_info)\n{\n\ttuner_dev_info->is_analog = msg->len < 10;\n\ttuner_dev_info->rec_flag = msg->msg[2] >> 7;\n\ttuner_dev_info->tuner_display_info = msg->msg[2] & 0x7f;\n\tif (tuner_dev_info->is_analog) {\n\t\ttuner_dev_info->analog.ana_bcast_type = msg->msg[3];\n\t\ttuner_dev_info->analog.ana_freq = (msg->msg[4] << 8) | msg->msg[5];\n\t\ttuner_dev_info->analog.bcast_system = msg->msg[6];\n\t\treturn;\n\t}\n\tcec_get_digital_service_id(msg->msg + 3, &tuner_dev_info->digital);\n}\n\nstatic inline void cec_msg_give_tuner_device_status(struct cec_msg *msg,\n\t\t\t\t\t\t    int reply,\n\t\t\t\t\t\t    __u8 status_req)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_GIVE_TUNER_DEVICE_STATUS;\n\tmsg->msg[2] = status_req;\n\tmsg->reply = (reply && status_req != CEC_OP_STATUS_REQ_OFF) ?\n\t\t\t\tCEC_MSG_TUNER_DEVICE_STATUS : 0;\n}\n\nstatic inline void cec_ops_give_tuner_device_status(const struct cec_msg *msg,\n\t\t\t\t\t\t    __u8 *status_req)\n{\n\t*status_req = msg->msg[2];\n}\n\nstatic inline void cec_msg_select_analogue_service(struct cec_msg *msg,\n\t\t\t\t\t\t   __u8 ana_bcast_type,\n\t\t\t\t\t\t   __u16 ana_freq,\n\t\t\t\t\t\t   __u8 bcast_system)\n{\n\tmsg->len = 6;\n\tmsg->msg[1] = CEC_MSG_SELECT_ANALOGUE_SERVICE;\n\tmsg->msg[2] = ana_bcast_type;\n\tmsg->msg[3] = ana_freq >> 8;\n\tmsg->msg[4] = ana_freq & 0xff;\n\tmsg->msg[5] = bcast_system;\n}\n\nstatic inline void cec_ops_select_analogue_service(const struct cec_msg *msg,\n\t\t\t\t\t\t   __u8 *ana_bcast_type,\n\t\t\t\t\t\t   __u16 *ana_freq,\n\t\t\t\t\t\t   __u8 *bcast_system)\n{\n\t*ana_bcast_type = msg->msg[2];\n\t*ana_freq = (msg->msg[3] << 8) | msg->msg[4];\n\t*bcast_system = msg->msg[5];\n}\n\nstatic inline void cec_msg_select_digital_service(struct cec_msg *msg,\n\t\t\t\tconst struct cec_op_digital_service_id *digital)\n{\n\tmsg->len = 9;\n\tmsg->msg[1] = CEC_MSG_SELECT_DIGITAL_SERVICE;\n\tcec_set_digital_service_id(msg->msg + 2, digital);\n}\n\nstatic inline void cec_ops_select_digital_service(const struct cec_msg *msg,\n\t\t\t\tstruct cec_op_digital_service_id *digital)\n{\n\tcec_get_digital_service_id(msg->msg + 2, digital);\n}\n\nstatic inline void cec_msg_tuner_step_decrement(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_TUNER_STEP_DECREMENT;\n}\n\nstatic inline void cec_msg_tuner_step_increment(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_TUNER_STEP_INCREMENT;\n}\n\n\n \nstatic inline void cec_msg_device_vendor_id(struct cec_msg *msg, __u32 vendor_id)\n{\n\tmsg->len = 5;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_DEVICE_VENDOR_ID;\n\tmsg->msg[2] = vendor_id >> 16;\n\tmsg->msg[3] = (vendor_id >> 8) & 0xff;\n\tmsg->msg[4] = vendor_id & 0xff;\n}\n\nstatic inline void cec_ops_device_vendor_id(const struct cec_msg *msg,\n\t\t\t\t\t    __u32 *vendor_id)\n{\n\t*vendor_id = (msg->msg[2] << 16) | (msg->msg[3] << 8) | msg->msg[4];\n}\n\nstatic inline void cec_msg_give_device_vendor_id(struct cec_msg *msg,\n\t\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_DEVICE_VENDOR_ID;\n\tmsg->reply = reply ? CEC_MSG_DEVICE_VENDOR_ID : 0;\n}\n\nstatic inline void cec_msg_vendor_command(struct cec_msg *msg,\n\t\t\t\t\t  __u8 size, const __u8 *vendor_cmd)\n{\n\tif (size > 14)\n\t\tsize = 14;\n\tmsg->len = 2 + size;\n\tmsg->msg[1] = CEC_MSG_VENDOR_COMMAND;\n\tmemcpy(msg->msg + 2, vendor_cmd, size);\n}\n\nstatic inline void cec_ops_vendor_command(const struct cec_msg *msg,\n\t\t\t\t\t  __u8 *size,\n\t\t\t\t\t  const __u8 **vendor_cmd)\n{\n\t*size = msg->len - 2;\n\n\tif (*size > 14)\n\t\t*size = 14;\n\t*vendor_cmd = msg->msg + 2;\n}\n\nstatic inline void cec_msg_vendor_command_with_id(struct cec_msg *msg,\n\t\t\t\t\t\t  __u32 vendor_id, __u8 size,\n\t\t\t\t\t\t  const __u8 *vendor_cmd)\n{\n\tif (size > 11)\n\t\tsize = 11;\n\tmsg->len = 5 + size;\n\tmsg->msg[1] = CEC_MSG_VENDOR_COMMAND_WITH_ID;\n\tmsg->msg[2] = vendor_id >> 16;\n\tmsg->msg[3] = (vendor_id >> 8) & 0xff;\n\tmsg->msg[4] = vendor_id & 0xff;\n\tmemcpy(msg->msg + 5, vendor_cmd, size);\n}\n\nstatic inline void cec_ops_vendor_command_with_id(const struct cec_msg *msg,\n\t\t\t\t\t\t  __u32 *vendor_id,  __u8 *size,\n\t\t\t\t\t\t  const __u8 **vendor_cmd)\n{\n\t*size = msg->len - 5;\n\n\tif (*size > 11)\n\t\t*size = 11;\n\t*vendor_id = (msg->msg[2] << 16) | (msg->msg[3] << 8) | msg->msg[4];\n\t*vendor_cmd = msg->msg + 5;\n}\n\nstatic inline void cec_msg_vendor_remote_button_down(struct cec_msg *msg,\n\t\t\t\t\t\t     __u8 size,\n\t\t\t\t\t\t     const __u8 *rc_code)\n{\n\tif (size > 14)\n\t\tsize = 14;\n\tmsg->len = 2 + size;\n\tmsg->msg[1] = CEC_MSG_VENDOR_REMOTE_BUTTON_DOWN;\n\tmemcpy(msg->msg + 2, rc_code, size);\n}\n\nstatic inline void cec_ops_vendor_remote_button_down(const struct cec_msg *msg,\n\t\t\t\t\t\t     __u8 *size,\n\t\t\t\t\t\t     const __u8 **rc_code)\n{\n\t*size = msg->len - 2;\n\n\tif (*size > 14)\n\t\t*size = 14;\n\t*rc_code = msg->msg + 2;\n}\n\nstatic inline void cec_msg_vendor_remote_button_up(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_VENDOR_REMOTE_BUTTON_UP;\n}\n\n\n \nstatic inline void cec_msg_set_osd_string(struct cec_msg *msg,\n\t\t\t\t\t  __u8 disp_ctl,\n\t\t\t\t\t  const char *osd)\n{\n\tunsigned int len = strlen(osd);\n\n\tif (len > 13)\n\t\tlen = 13;\n\tmsg->len = 3 + len;\n\tmsg->msg[1] = CEC_MSG_SET_OSD_STRING;\n\tmsg->msg[2] = disp_ctl;\n\tmemcpy(msg->msg + 3, osd, len);\n}\n\nstatic inline void cec_ops_set_osd_string(const struct cec_msg *msg,\n\t\t\t\t\t  __u8 *disp_ctl,\n\t\t\t\t\t  char *osd)\n{\n\tunsigned int len = msg->len > 3 ? msg->len - 3 : 0;\n\n\t*disp_ctl = msg->msg[2];\n\tif (len > 13)\n\t\tlen = 13;\n\tmemcpy(osd, msg->msg + 3, len);\n\tosd[len] = '\\0';\n}\n\n\n \nstatic inline void cec_msg_set_osd_name(struct cec_msg *msg, const char *name)\n{\n\tunsigned int len = strlen(name);\n\n\tif (len > 14)\n\t\tlen = 14;\n\tmsg->len = 2 + len;\n\tmsg->msg[1] = CEC_MSG_SET_OSD_NAME;\n\tmemcpy(msg->msg + 2, name, len);\n}\n\nstatic inline void cec_ops_set_osd_name(const struct cec_msg *msg,\n\t\t\t\t\tchar *name)\n{\n\tunsigned int len = msg->len > 2 ? msg->len - 2 : 0;\n\n\tif (len > 14)\n\t\tlen = 14;\n\tmemcpy(name, msg->msg + 2, len);\n\tname[len] = '\\0';\n}\n\nstatic inline void cec_msg_give_osd_name(struct cec_msg *msg,\n\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_OSD_NAME;\n\tmsg->reply = reply ? CEC_MSG_SET_OSD_NAME : 0;\n}\n\n\n \nstatic inline void cec_msg_menu_status(struct cec_msg *msg,\n\t\t\t\t       __u8 menu_state)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_MENU_STATUS;\n\tmsg->msg[2] = menu_state;\n}\n\nstatic inline void cec_ops_menu_status(const struct cec_msg *msg,\n\t\t\t\t       __u8 *menu_state)\n{\n\t*menu_state = msg->msg[2];\n}\n\nstatic inline void cec_msg_menu_request(struct cec_msg *msg,\n\t\t\t\t\tint reply,\n\t\t\t\t\t__u8 menu_req)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_MENU_REQUEST;\n\tmsg->msg[2] = menu_req;\n\tmsg->reply = reply ? CEC_MSG_MENU_STATUS : 0;\n}\n\nstatic inline void cec_ops_menu_request(const struct cec_msg *msg,\n\t\t\t\t\t__u8 *menu_req)\n{\n\t*menu_req = msg->msg[2];\n}\n\nstruct cec_op_ui_command {\n\t__u8 ui_cmd;\n\t__u8 has_opt_arg;\n\tunion {\n\t\tstruct cec_op_channel_data channel_identifier;\n\t\t__u8 ui_broadcast_type;\n\t\t__u8 ui_sound_presentation_control;\n\t\t__u8 play_mode;\n\t\t__u8 ui_function_media;\n\t\t__u8 ui_function_select_av_input;\n\t\t__u8 ui_function_select_audio_input;\n\t};\n};\n\nstatic inline void cec_msg_user_control_pressed(struct cec_msg *msg,\n\t\t\t\t\tconst struct cec_op_ui_command *ui_cmd)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_USER_CONTROL_PRESSED;\n\tmsg->msg[2] = ui_cmd->ui_cmd;\n\tif (!ui_cmd->has_opt_arg)\n\t\treturn;\n\tswitch (ui_cmd->ui_cmd) {\n\tcase CEC_OP_UI_CMD_SELECT_BROADCAST_TYPE:\n\tcase CEC_OP_UI_CMD_SELECT_SOUND_PRESENTATION:\n\tcase CEC_OP_UI_CMD_PLAY_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_MEDIA_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_AV_INPUT_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_AUDIO_INPUT_FUNCTION:\n\t\t \n\t\tmsg->len++;\n\t\tmsg->msg[3] = ui_cmd->play_mode;\n\t\tbreak;\n\tcase CEC_OP_UI_CMD_TUNE_FUNCTION:\n\t\tmsg->len += 4;\n\t\tmsg->msg[3] = (ui_cmd->channel_identifier.channel_number_fmt << 2) |\n\t\t\t      (ui_cmd->channel_identifier.major >> 8);\n\t\tmsg->msg[4] = ui_cmd->channel_identifier.major & 0xff;\n\t\tmsg->msg[5] = ui_cmd->channel_identifier.minor >> 8;\n\t\tmsg->msg[6] = ui_cmd->channel_identifier.minor & 0xff;\n\t\tbreak;\n\t}\n}\n\nstatic inline void cec_ops_user_control_pressed(const struct cec_msg *msg,\n\t\t\t\t\t\tstruct cec_op_ui_command *ui_cmd)\n{\n\tui_cmd->ui_cmd = msg->msg[2];\n\tui_cmd->has_opt_arg = 0;\n\tif (msg->len == 3)\n\t\treturn;\n\tswitch (ui_cmd->ui_cmd) {\n\tcase CEC_OP_UI_CMD_SELECT_BROADCAST_TYPE:\n\tcase CEC_OP_UI_CMD_SELECT_SOUND_PRESENTATION:\n\tcase CEC_OP_UI_CMD_PLAY_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_MEDIA_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_AV_INPUT_FUNCTION:\n\tcase CEC_OP_UI_CMD_SELECT_AUDIO_INPUT_FUNCTION:\n\t\t \n\t\tui_cmd->play_mode = msg->msg[3];\n\t\tui_cmd->has_opt_arg = 1;\n\t\tbreak;\n\tcase CEC_OP_UI_CMD_TUNE_FUNCTION:\n\t\tif (msg->len < 7)\n\t\t\tbreak;\n\t\tui_cmd->has_opt_arg = 1;\n\t\tui_cmd->channel_identifier.channel_number_fmt = msg->msg[3] >> 2;\n\t\tui_cmd->channel_identifier.major = ((msg->msg[3] & 3) << 6) | msg->msg[4];\n\t\tui_cmd->channel_identifier.minor = (msg->msg[5] << 8) | msg->msg[6];\n\t\tbreak;\n\t}\n}\n\nstatic inline void cec_msg_user_control_released(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_USER_CONTROL_RELEASED;\n}\n\n \n\n \nstatic inline void cec_msg_report_power_status(struct cec_msg *msg,\n\t\t\t\t\t       __u8 pwr_state)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_REPORT_POWER_STATUS;\n\tmsg->msg[2] = pwr_state;\n}\n\nstatic inline void cec_ops_report_power_status(const struct cec_msg *msg,\n\t\t\t\t\t       __u8 *pwr_state)\n{\n\t*pwr_state = msg->msg[2];\n}\n\nstatic inline void cec_msg_give_device_power_status(struct cec_msg *msg,\n\t\t\t\t\t\t    int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_DEVICE_POWER_STATUS;\n\tmsg->reply = reply ? CEC_MSG_REPORT_POWER_STATUS : 0;\n}\n\n \nstatic inline void cec_msg_feature_abort(struct cec_msg *msg,\n\t\t\t\t\t __u8 abort_msg, __u8 reason)\n{\n\tmsg->len = 4;\n\tmsg->msg[1] = CEC_MSG_FEATURE_ABORT;\n\tmsg->msg[2] = abort_msg;\n\tmsg->msg[3] = reason;\n}\n\nstatic inline void cec_ops_feature_abort(const struct cec_msg *msg,\n\t\t\t\t\t __u8 *abort_msg, __u8 *reason)\n{\n\t*abort_msg = msg->msg[2];\n\t*reason = msg->msg[3];\n}\n\n \nstatic inline void cec_msg_reply_feature_abort(struct cec_msg *msg, __u8 reason)\n{\n\tcec_msg_set_reply_to(msg, msg);\n\tmsg->len = 4;\n\tmsg->msg[2] = msg->msg[1];\n\tmsg->msg[3] = reason;\n\tmsg->msg[1] = CEC_MSG_FEATURE_ABORT;\n}\n\nstatic inline void cec_msg_abort(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_ABORT;\n}\n\n\n \nstatic inline void cec_msg_report_audio_status(struct cec_msg *msg,\n\t\t\t\t\t       __u8 aud_mute_status,\n\t\t\t\t\t       __u8 aud_vol_status)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_REPORT_AUDIO_STATUS;\n\tmsg->msg[2] = (aud_mute_status << 7) | (aud_vol_status & 0x7f);\n}\n\nstatic inline void cec_ops_report_audio_status(const struct cec_msg *msg,\n\t\t\t\t\t       __u8 *aud_mute_status,\n\t\t\t\t\t       __u8 *aud_vol_status)\n{\n\t*aud_mute_status = msg->msg[2] >> 7;\n\t*aud_vol_status = msg->msg[2] & 0x7f;\n}\n\nstatic inline void cec_msg_give_audio_status(struct cec_msg *msg,\n\t\t\t\t\t     int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_AUDIO_STATUS;\n\tmsg->reply = reply ? CEC_MSG_REPORT_AUDIO_STATUS : 0;\n}\n\nstatic inline void cec_msg_set_system_audio_mode(struct cec_msg *msg,\n\t\t\t\t\t\t __u8 sys_aud_status)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_SET_SYSTEM_AUDIO_MODE;\n\tmsg->msg[2] = sys_aud_status;\n}\n\nstatic inline void cec_ops_set_system_audio_mode(const struct cec_msg *msg,\n\t\t\t\t\t\t __u8 *sys_aud_status)\n{\n\t*sys_aud_status = msg->msg[2];\n}\n\nstatic inline void cec_msg_system_audio_mode_request(struct cec_msg *msg,\n\t\t\t\t\t\t     int reply,\n\t\t\t\t\t\t     __u16 phys_addr)\n{\n\tmsg->len = phys_addr == 0xffff ? 2 : 4;\n\tmsg->msg[1] = CEC_MSG_SYSTEM_AUDIO_MODE_REQUEST;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n\tmsg->reply = reply ? CEC_MSG_SET_SYSTEM_AUDIO_MODE : 0;\n\n}\n\nstatic inline void cec_ops_system_audio_mode_request(const struct cec_msg *msg,\n\t\t\t\t\t\t     __u16 *phys_addr)\n{\n\tif (msg->len < 4)\n\t\t*phys_addr = 0xffff;\n\telse\n\t\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_system_audio_mode_status(struct cec_msg *msg,\n\t\t\t\t\t\t    __u8 sys_aud_status)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_SYSTEM_AUDIO_MODE_STATUS;\n\tmsg->msg[2] = sys_aud_status;\n}\n\nstatic inline void cec_ops_system_audio_mode_status(const struct cec_msg *msg,\n\t\t\t\t\t\t    __u8 *sys_aud_status)\n{\n\t*sys_aud_status = msg->msg[2];\n}\n\nstatic inline void cec_msg_give_system_audio_mode_status(struct cec_msg *msg,\n\t\t\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_GIVE_SYSTEM_AUDIO_MODE_STATUS;\n\tmsg->reply = reply ? CEC_MSG_SYSTEM_AUDIO_MODE_STATUS : 0;\n}\n\nstatic inline void cec_msg_report_short_audio_descriptor(struct cec_msg *msg,\n\t\t\t\t\t__u8 num_descriptors,\n\t\t\t\t\tconst __u32 *descriptors)\n{\n\tunsigned int i;\n\n\tif (num_descriptors > 4)\n\t\tnum_descriptors = 4;\n\tmsg->len = 2 + num_descriptors * 3;\n\tmsg->msg[1] = CEC_MSG_REPORT_SHORT_AUDIO_DESCRIPTOR;\n\tfor (i = 0; i < num_descriptors; i++) {\n\t\tmsg->msg[2 + i * 3] = (descriptors[i] >> 16) & 0xff;\n\t\tmsg->msg[3 + i * 3] = (descriptors[i] >> 8) & 0xff;\n\t\tmsg->msg[4 + i * 3] = descriptors[i] & 0xff;\n\t}\n}\n\nstatic inline void cec_ops_report_short_audio_descriptor(const struct cec_msg *msg,\n\t\t\t\t\t\t\t __u8 *num_descriptors,\n\t\t\t\t\t\t\t __u32 *descriptors)\n{\n\tunsigned int i;\n\n\t*num_descriptors = (msg->len - 2) / 3;\n\tif (*num_descriptors > 4)\n\t\t*num_descriptors = 4;\n\tfor (i = 0; i < *num_descriptors; i++)\n\t\tdescriptors[i] = (msg->msg[2 + i * 3] << 16) |\n\t\t\t(msg->msg[3 + i * 3] << 8) |\n\t\t\tmsg->msg[4 + i * 3];\n}\n\nstatic inline void cec_msg_request_short_audio_descriptor(struct cec_msg *msg,\n\t\t\t\t\tint reply,\n\t\t\t\t\t__u8 num_descriptors,\n\t\t\t\t\tconst __u8 *audio_format_id,\n\t\t\t\t\tconst __u8 *audio_format_code)\n{\n\tunsigned int i;\n\n\tif (num_descriptors > 4)\n\t\tnum_descriptors = 4;\n\tmsg->len = 2 + num_descriptors;\n\tmsg->msg[1] = CEC_MSG_REQUEST_SHORT_AUDIO_DESCRIPTOR;\n\tmsg->reply = reply ? CEC_MSG_REPORT_SHORT_AUDIO_DESCRIPTOR : 0;\n\tfor (i = 0; i < num_descriptors; i++)\n\t\tmsg->msg[2 + i] = (audio_format_id[i] << 6) |\n\t\t\t\t  (audio_format_code[i] & 0x3f);\n}\n\nstatic inline void cec_ops_request_short_audio_descriptor(const struct cec_msg *msg,\n\t\t\t\t\t__u8 *num_descriptors,\n\t\t\t\t\t__u8 *audio_format_id,\n\t\t\t\t\t__u8 *audio_format_code)\n{\n\tunsigned int i;\n\n\t*num_descriptors = msg->len - 2;\n\tif (*num_descriptors > 4)\n\t\t*num_descriptors = 4;\n\tfor (i = 0; i < *num_descriptors; i++) {\n\t\taudio_format_id[i] = msg->msg[2 + i] >> 6;\n\t\taudio_format_code[i] = msg->msg[2 + i] & 0x3f;\n\t}\n}\n\nstatic inline void cec_msg_set_audio_volume_level(struct cec_msg *msg,\n\t\t\t\t\t\t  __u8 audio_volume_level)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_SET_AUDIO_VOLUME_LEVEL;\n\tmsg->msg[2] = audio_volume_level;\n}\n\nstatic inline void cec_ops_set_audio_volume_level(const struct cec_msg *msg,\n\t\t\t\t\t\t  __u8 *audio_volume_level)\n{\n\t*audio_volume_level = msg->msg[2];\n}\n\n\n \nstatic inline void cec_msg_set_audio_rate(struct cec_msg *msg,\n\t\t\t\t\t  __u8 audio_rate)\n{\n\tmsg->len = 3;\n\tmsg->msg[1] = CEC_MSG_SET_AUDIO_RATE;\n\tmsg->msg[2] = audio_rate;\n}\n\nstatic inline void cec_ops_set_audio_rate(const struct cec_msg *msg,\n\t\t\t\t\t  __u8 *audio_rate)\n{\n\t*audio_rate = msg->msg[2];\n}\n\n\n \nstatic inline void cec_msg_report_arc_initiated(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_REPORT_ARC_INITIATED;\n}\n\nstatic inline void cec_msg_initiate_arc(struct cec_msg *msg,\n\t\t\t\t\tint reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_INITIATE_ARC;\n\tmsg->reply = reply ? CEC_MSG_REPORT_ARC_INITIATED : 0;\n}\n\nstatic inline void cec_msg_request_arc_initiation(struct cec_msg *msg,\n\t\t\t\t\t\t  int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_REQUEST_ARC_INITIATION;\n\tmsg->reply = reply ? CEC_MSG_INITIATE_ARC : 0;\n}\n\nstatic inline void cec_msg_report_arc_terminated(struct cec_msg *msg)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_REPORT_ARC_TERMINATED;\n}\n\nstatic inline void cec_msg_terminate_arc(struct cec_msg *msg,\n\t\t\t\t\t int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_TERMINATE_ARC;\n\tmsg->reply = reply ? CEC_MSG_REPORT_ARC_TERMINATED : 0;\n}\n\nstatic inline void cec_msg_request_arc_termination(struct cec_msg *msg,\n\t\t\t\t\t\t   int reply)\n{\n\tmsg->len = 2;\n\tmsg->msg[1] = CEC_MSG_REQUEST_ARC_TERMINATION;\n\tmsg->reply = reply ? CEC_MSG_TERMINATE_ARC : 0;\n}\n\n\n \n \nstatic inline void cec_msg_report_current_latency(struct cec_msg *msg,\n\t\t\t\t\t\t  __u16 phys_addr,\n\t\t\t\t\t\t  __u8 video_latency,\n\t\t\t\t\t\t  __u8 low_latency_mode,\n\t\t\t\t\t\t  __u8 audio_out_compensated,\n\t\t\t\t\t\t  __u8 audio_out_delay)\n{\n\tmsg->len = 6;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_REPORT_CURRENT_LATENCY;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n\tmsg->msg[4] = video_latency;\n\tmsg->msg[5] = (low_latency_mode << 2) | audio_out_compensated;\n\tif (audio_out_compensated == 3)\n\t\tmsg->msg[msg->len++] = audio_out_delay;\n}\n\nstatic inline void cec_ops_report_current_latency(const struct cec_msg *msg,\n\t\t\t\t\t\t  __u16 *phys_addr,\n\t\t\t\t\t\t  __u8 *video_latency,\n\t\t\t\t\t\t  __u8 *low_latency_mode,\n\t\t\t\t\t\t  __u8 *audio_out_compensated,\n\t\t\t\t\t\t  __u8 *audio_out_delay)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*video_latency = msg->msg[4];\n\t*low_latency_mode = (msg->msg[5] >> 2) & 1;\n\t*audio_out_compensated = msg->msg[5] & 3;\n\tif (*audio_out_compensated == 3 && msg->len >= 7)\n\t\t*audio_out_delay = msg->msg[6];\n\telse\n\t\t*audio_out_delay = 1;\n}\n\nstatic inline void cec_msg_request_current_latency(struct cec_msg *msg,\n\t\t\t\t\t\t   int reply,\n\t\t\t\t\t\t   __u16 phys_addr)\n{\n\tmsg->len = 4;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_REQUEST_CURRENT_LATENCY;\n\tmsg->msg[2] = phys_addr >> 8;\n\tmsg->msg[3] = phys_addr & 0xff;\n\tmsg->reply = reply ? CEC_MSG_REPORT_CURRENT_LATENCY : 0;\n}\n\nstatic inline void cec_ops_request_current_latency(const struct cec_msg *msg,\n\t\t\t\t\t\t   __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\n\n \nstatic inline void cec_msg_cdc_hec_inquire_state(struct cec_msg *msg,\n\t\t\t\t\t\t __u16 phys_addr1,\n\t\t\t\t\t\t __u16 phys_addr2)\n{\n\tmsg->len = 9;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_INQUIRE_STATE;\n\tmsg->msg[5] = phys_addr1 >> 8;\n\tmsg->msg[6] = phys_addr1 & 0xff;\n\tmsg->msg[7] = phys_addr2 >> 8;\n\tmsg->msg[8] = phys_addr2 & 0xff;\n}\n\nstatic inline void cec_ops_cdc_hec_inquire_state(const struct cec_msg *msg,\n\t\t\t\t\t\t __u16 *phys_addr,\n\t\t\t\t\t\t __u16 *phys_addr1,\n\t\t\t\t\t\t __u16 *phys_addr2)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*phys_addr1 = (msg->msg[5] << 8) | msg->msg[6];\n\t*phys_addr2 = (msg->msg[7] << 8) | msg->msg[8];\n}\n\nstatic inline void cec_msg_cdc_hec_report_state(struct cec_msg *msg,\n\t\t\t\t\t\t__u16 target_phys_addr,\n\t\t\t\t\t\t__u8 hec_func_state,\n\t\t\t\t\t\t__u8 host_func_state,\n\t\t\t\t\t\t__u8 enc_func_state,\n\t\t\t\t\t\t__u8 cdc_errcode,\n\t\t\t\t\t\t__u8 has_field,\n\t\t\t\t\t\t__u16 hec_field)\n{\n\tmsg->len = has_field ? 10 : 8;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_REPORT_STATE;\n\tmsg->msg[5] = target_phys_addr >> 8;\n\tmsg->msg[6] = target_phys_addr & 0xff;\n\tmsg->msg[7] = (hec_func_state << 6) |\n\t\t      (host_func_state << 4) |\n\t\t      (enc_func_state << 2) |\n\t\t      cdc_errcode;\n\tif (has_field) {\n\t\tmsg->msg[8] = hec_field >> 8;\n\t\tmsg->msg[9] = hec_field & 0xff;\n\t}\n}\n\nstatic inline void cec_ops_cdc_hec_report_state(const struct cec_msg *msg,\n\t\t\t\t\t\t__u16 *phys_addr,\n\t\t\t\t\t\t__u16 *target_phys_addr,\n\t\t\t\t\t\t__u8 *hec_func_state,\n\t\t\t\t\t\t__u8 *host_func_state,\n\t\t\t\t\t\t__u8 *enc_func_state,\n\t\t\t\t\t\t__u8 *cdc_errcode,\n\t\t\t\t\t\t__u8 *has_field,\n\t\t\t\t\t\t__u16 *hec_field)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*target_phys_addr = (msg->msg[5] << 8) | msg->msg[6];\n\t*hec_func_state = msg->msg[7] >> 6;\n\t*host_func_state = (msg->msg[7] >> 4) & 3;\n\t*enc_func_state = (msg->msg[7] >> 4) & 3;\n\t*cdc_errcode = msg->msg[7] & 3;\n\t*has_field = msg->len >= 10;\n\t*hec_field = *has_field ? ((msg->msg[8] << 8) | msg->msg[9]) : 0;\n}\n\nstatic inline void cec_msg_cdc_hec_set_state(struct cec_msg *msg,\n\t\t\t\t\t     __u16 phys_addr1,\n\t\t\t\t\t     __u16 phys_addr2,\n\t\t\t\t\t     __u8 hec_set_state,\n\t\t\t\t\t     __u16 phys_addr3,\n\t\t\t\t\t     __u16 phys_addr4,\n\t\t\t\t\t     __u16 phys_addr5)\n{\n\tmsg->len = 10;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_INQUIRE_STATE;\n\tmsg->msg[5] = phys_addr1 >> 8;\n\tmsg->msg[6] = phys_addr1 & 0xff;\n\tmsg->msg[7] = phys_addr2 >> 8;\n\tmsg->msg[8] = phys_addr2 & 0xff;\n\tmsg->msg[9] = hec_set_state;\n\tif (phys_addr3 != CEC_PHYS_ADDR_INVALID) {\n\t\tmsg->msg[msg->len++] = phys_addr3 >> 8;\n\t\tmsg->msg[msg->len++] = phys_addr3 & 0xff;\n\t\tif (phys_addr4 != CEC_PHYS_ADDR_INVALID) {\n\t\t\tmsg->msg[msg->len++] = phys_addr4 >> 8;\n\t\t\tmsg->msg[msg->len++] = phys_addr4 & 0xff;\n\t\t\tif (phys_addr5 != CEC_PHYS_ADDR_INVALID) {\n\t\t\t\tmsg->msg[msg->len++] = phys_addr5 >> 8;\n\t\t\t\tmsg->msg[msg->len++] = phys_addr5 & 0xff;\n\t\t\t}\n\t\t}\n\t}\n}\n\nstatic inline void cec_ops_cdc_hec_set_state(const struct cec_msg *msg,\n\t\t\t\t\t     __u16 *phys_addr,\n\t\t\t\t\t     __u16 *phys_addr1,\n\t\t\t\t\t     __u16 *phys_addr2,\n\t\t\t\t\t     __u8 *hec_set_state,\n\t\t\t\t\t     __u16 *phys_addr3,\n\t\t\t\t\t     __u16 *phys_addr4,\n\t\t\t\t\t     __u16 *phys_addr5)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*phys_addr1 = (msg->msg[5] << 8) | msg->msg[6];\n\t*phys_addr2 = (msg->msg[7] << 8) | msg->msg[8];\n\t*hec_set_state = msg->msg[9];\n\t*phys_addr3 = *phys_addr4 = *phys_addr5 = CEC_PHYS_ADDR_INVALID;\n\tif (msg->len >= 12)\n\t\t*phys_addr3 = (msg->msg[10] << 8) | msg->msg[11];\n\tif (msg->len >= 14)\n\t\t*phys_addr4 = (msg->msg[12] << 8) | msg->msg[13];\n\tif (msg->len >= 16)\n\t\t*phys_addr5 = (msg->msg[14] << 8) | msg->msg[15];\n}\n\nstatic inline void cec_msg_cdc_hec_set_state_adjacent(struct cec_msg *msg,\n\t\t\t\t\t\t      __u16 phys_addr1,\n\t\t\t\t\t\t      __u8 hec_set_state)\n{\n\tmsg->len = 8;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_SET_STATE_ADJACENT;\n\tmsg->msg[5] = phys_addr1 >> 8;\n\tmsg->msg[6] = phys_addr1 & 0xff;\n\tmsg->msg[7] = hec_set_state;\n}\n\nstatic inline void cec_ops_cdc_hec_set_state_adjacent(const struct cec_msg *msg,\n\t\t\t\t\t\t      __u16 *phys_addr,\n\t\t\t\t\t\t      __u16 *phys_addr1,\n\t\t\t\t\t\t      __u8 *hec_set_state)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*phys_addr1 = (msg->msg[5] << 8) | msg->msg[6];\n\t*hec_set_state = msg->msg[7];\n}\n\nstatic inline void cec_msg_cdc_hec_request_deactivation(struct cec_msg *msg,\n\t\t\t\t\t\t\t__u16 phys_addr1,\n\t\t\t\t\t\t\t__u16 phys_addr2,\n\t\t\t\t\t\t\t__u16 phys_addr3)\n{\n\tmsg->len = 11;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_REQUEST_DEACTIVATION;\n\tmsg->msg[5] = phys_addr1 >> 8;\n\tmsg->msg[6] = phys_addr1 & 0xff;\n\tmsg->msg[7] = phys_addr2 >> 8;\n\tmsg->msg[8] = phys_addr2 & 0xff;\n\tmsg->msg[9] = phys_addr3 >> 8;\n\tmsg->msg[10] = phys_addr3 & 0xff;\n}\n\nstatic inline void cec_ops_cdc_hec_request_deactivation(const struct cec_msg *msg,\n\t\t\t\t\t\t\t__u16 *phys_addr,\n\t\t\t\t\t\t\t__u16 *phys_addr1,\n\t\t\t\t\t\t\t__u16 *phys_addr2,\n\t\t\t\t\t\t\t__u16 *phys_addr3)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*phys_addr1 = (msg->msg[5] << 8) | msg->msg[6];\n\t*phys_addr2 = (msg->msg[7] << 8) | msg->msg[8];\n\t*phys_addr3 = (msg->msg[9] << 8) | msg->msg[10];\n}\n\nstatic inline void cec_msg_cdc_hec_notify_alive(struct cec_msg *msg)\n{\n\tmsg->len = 5;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_NOTIFY_ALIVE;\n}\n\nstatic inline void cec_ops_cdc_hec_notify_alive(const struct cec_msg *msg,\n\t\t\t\t\t\t__u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_cdc_hec_discover(struct cec_msg *msg)\n{\n\tmsg->len = 5;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HEC_DISCOVER;\n}\n\nstatic inline void cec_ops_cdc_hec_discover(const struct cec_msg *msg,\n\t\t\t\t\t    __u16 *phys_addr)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n}\n\nstatic inline void cec_msg_cdc_hpd_set_state(struct cec_msg *msg,\n\t\t\t\t\t     __u8 input_port,\n\t\t\t\t\t     __u8 hpd_state)\n{\n\tmsg->len = 6;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HPD_SET_STATE;\n\tmsg->msg[5] = (input_port << 4) | hpd_state;\n}\n\nstatic inline void cec_ops_cdc_hpd_set_state(const struct cec_msg *msg,\n\t\t\t\t\t    __u16 *phys_addr,\n\t\t\t\t\t    __u8 *input_port,\n\t\t\t\t\t    __u8 *hpd_state)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*input_port = msg->msg[5] >> 4;\n\t*hpd_state = msg->msg[5] & 0xf;\n}\n\nstatic inline void cec_msg_cdc_hpd_report_state(struct cec_msg *msg,\n\t\t\t\t\t\t__u8 hpd_state,\n\t\t\t\t\t\t__u8 hpd_error)\n{\n\tmsg->len = 6;\n\tmsg->msg[0] |= 0xf;  \n\tmsg->msg[1] = CEC_MSG_CDC_MESSAGE;\n\t \n\tmsg->msg[4] = CEC_MSG_CDC_HPD_REPORT_STATE;\n\tmsg->msg[5] = (hpd_state << 4) | hpd_error;\n}\n\nstatic inline void cec_ops_cdc_hpd_report_state(const struct cec_msg *msg,\n\t\t\t\t\t\t__u16 *phys_addr,\n\t\t\t\t\t\t__u8 *hpd_state,\n\t\t\t\t\t\t__u8 *hpd_error)\n{\n\t*phys_addr = (msg->msg[2] << 8) | msg->msg[3];\n\t*hpd_state = msg->msg[5] >> 4;\n\t*hpd_error = msg->msg[5] & 0xf;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}