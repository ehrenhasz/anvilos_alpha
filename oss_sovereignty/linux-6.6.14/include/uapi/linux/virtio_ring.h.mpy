{
  "module_name": "virtio_ring.h",
  "hash_id": "5d7de2524fc425379a9701ba6711eb394653b99bb6b196fd028477913f84a82c",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/virtio_ring.h",
  "human_readable_source": "#ifndef _UAPI_LINUX_VIRTIO_RING_H\n#define _UAPI_LINUX_VIRTIO_RING_H\n \n#ifndef __KERNEL__\n#include <stdint.h>\n#endif\n#include <linux/types.h>\n#include <linux/virtio_types.h>\n\n \n#define VRING_DESC_F_NEXT\t1\n \n#define VRING_DESC_F_WRITE\t2\n \n#define VRING_DESC_F_INDIRECT\t4\n\n \n#define VRING_PACKED_DESC_F_AVAIL\t7\n#define VRING_PACKED_DESC_F_USED\t15\n\n \n#define VRING_USED_F_NO_NOTIFY\t1\n \n#define VRING_AVAIL_F_NO_INTERRUPT\t1\n\n \n#define VRING_PACKED_EVENT_FLAG_ENABLE\t0x0\n \n#define VRING_PACKED_EVENT_FLAG_DISABLE\t0x1\n \n#define VRING_PACKED_EVENT_FLAG_DESC\t0x2\n\n \n#define VRING_PACKED_EVENT_F_WRAP_CTR\t15\n\n \n#define VIRTIO_RING_F_INDIRECT_DESC\t28\n\n \n \n#define VIRTIO_RING_F_EVENT_IDX\t\t29\n\n \n#define VRING_AVAIL_ALIGN_SIZE 2\n#define VRING_USED_ALIGN_SIZE 4\n#define VRING_DESC_ALIGN_SIZE 16\n\n \nstruct vring_desc {\n\t__virtio64 addr;\n\t__virtio32 len;\n\t__virtio16 flags;\n\t__virtio16 next;\n};\n\nstruct vring_avail {\n\t__virtio16 flags;\n\t__virtio16 idx;\n\t__virtio16 ring[];\n};\n\n \nstruct vring_used_elem {\n\t \n\t__virtio32 id;\n\t \n\t__virtio32 len;\n};\n\ntypedef struct vring_used_elem __attribute__((aligned(VRING_USED_ALIGN_SIZE)))\n\tvring_used_elem_t;\n\nstruct vring_used {\n\t__virtio16 flags;\n\t__virtio16 idx;\n\tvring_used_elem_t ring[];\n};\n\n \ntypedef struct vring_desc __attribute__((aligned(VRING_DESC_ALIGN_SIZE)))\n\tvring_desc_t;\ntypedef struct vring_avail __attribute__((aligned(VRING_AVAIL_ALIGN_SIZE)))\n\tvring_avail_t;\ntypedef struct vring_used __attribute__((aligned(VRING_USED_ALIGN_SIZE)))\n\tvring_used_t;\n\nstruct vring {\n\tunsigned int num;\n\n\tvring_desc_t *desc;\n\n\tvring_avail_t *avail;\n\n\tvring_used_t *used;\n};\n\n#ifndef VIRTIO_RING_NO_LEGACY\n\n \n \n#define vring_used_event(vr) ((vr)->avail->ring[(vr)->num])\n#define vring_avail_event(vr) (*(__virtio16 *)&(vr)->used->ring[(vr)->num])\n\nstatic inline void vring_init(struct vring *vr, unsigned int num, void *p,\n\t\t\t      unsigned long align)\n{\n\tvr->num = num;\n\tvr->desc = p;\n\tvr->avail = (struct vring_avail *)((char *)p + num * sizeof(struct vring_desc));\n\tvr->used = (void *)(((uintptr_t)&vr->avail->ring[num] + sizeof(__virtio16)\n\t\t+ align-1) & ~(align - 1));\n}\n\nstatic inline unsigned vring_size(unsigned int num, unsigned long align)\n{\n\treturn ((sizeof(struct vring_desc) * num + sizeof(__virtio16) * (3 + num)\n\t\t + align - 1) & ~(align - 1))\n\t\t+ sizeof(__virtio16) * 3 + sizeof(struct vring_used_elem) * num;\n}\n\n#endif  \n\n \n \nstatic inline int vring_need_event(__u16 event_idx, __u16 new_idx, __u16 old)\n{\n\t \n\treturn (__u16)(new_idx - event_idx - 1) < (__u16)(new_idx - old);\n}\n\nstruct vring_packed_desc_event {\n\t \n\t__le16 off_wrap;\n\t \n\t__le16 flags;\n};\n\nstruct vring_packed_desc {\n\t \n\t__le64 addr;\n\t \n\t__le32 len;\n\t \n\t__le16 id;\n\t \n\t__le16 flags;\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}