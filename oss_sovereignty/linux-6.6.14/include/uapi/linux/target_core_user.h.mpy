{
  "module_name": "target_core_user.h",
  "hash_id": "ab730d8a3b825edc2c461c82a80bc43a5ca6002514eb847d5dfedd0b1633e5d2",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/target_core_user.h",
  "human_readable_source": " \n#ifndef __TARGET_CORE_USER_H\n#define __TARGET_CORE_USER_H\n\n \n\n#include <linux/types.h>\n#include <linux/uio.h>\n\n#define TCMU_VERSION \"2.0\"\n\n \n\n#define TCMU_MAILBOX_VERSION 2\n#define ALIGN_SIZE 64  \n#define TCMU_MAILBOX_FLAG_CAP_OOOC (1 << 0)  \n#define TCMU_MAILBOX_FLAG_CAP_READ_LEN (1 << 1)  \n#define TCMU_MAILBOX_FLAG_CAP_TMR (1 << 2)  \n#define TCMU_MAILBOX_FLAG_CAP_KEEP_BUF (1<<3)  \n\nstruct tcmu_mailbox {\n\t__u16 version;\n\t__u16 flags;\n\t__u32 cmdr_off;\n\t__u32 cmdr_size;\n\n\t__u32 cmd_head;\n\n\t \n\t__u32 cmd_tail __attribute__((__aligned__(ALIGN_SIZE)));\n\n} __packed;\n\nenum tcmu_opcode {\n\tTCMU_OP_PAD = 0,\n\tTCMU_OP_CMD,\n\tTCMU_OP_TMR,\n};\n\n \nstruct tcmu_cmd_entry_hdr {\n\t__u32 len_op;\n\t__u16 cmd_id;\n\t__u8 kflags;\n#define TCMU_UFLAG_UNKNOWN_OP 0x1\n#define TCMU_UFLAG_READ_LEN   0x2\n#define TCMU_UFLAG_KEEP_BUF   0x4\n\t__u8 uflags;\n\n} __packed;\n\n#define TCMU_OP_MASK 0x7\n\nstatic inline enum tcmu_opcode tcmu_hdr_get_op(__u32 len_op)\n{\n\treturn len_op & TCMU_OP_MASK;\n}\n\nstatic inline void tcmu_hdr_set_op(__u32 *len_op, enum tcmu_opcode op)\n{\n\t*len_op &= ~TCMU_OP_MASK;\n\t*len_op |= (op & TCMU_OP_MASK);\n}\n\nstatic inline __u32 tcmu_hdr_get_len(__u32 len_op)\n{\n\treturn len_op & ~TCMU_OP_MASK;\n}\n\nstatic inline void tcmu_hdr_set_len(__u32 *len_op, __u32 len)\n{\n\t*len_op &= TCMU_OP_MASK;\n\t*len_op |= len;\n}\n\n \n#define TCMU_SENSE_BUFFERSIZE 96\n\nstruct tcmu_cmd_entry {\n\tstruct tcmu_cmd_entry_hdr hdr;\n\n\tunion {\n\t\tstruct {\n\t\t\t__u32 iov_cnt;\n\t\t\t__u32 iov_bidi_cnt;\n\t\t\t__u32 iov_dif_cnt;\n\t\t\t__u64 cdb_off;\n\t\t\t__u64 __pad1;\n\t\t\t__u64 __pad2;\n\t\t\t__DECLARE_FLEX_ARRAY(struct iovec, iov);\n\t\t} req;\n\t\tstruct {\n\t\t\t__u8 scsi_status;\n\t\t\t__u8 __pad1;\n\t\t\t__u16 __pad2;\n\t\t\t__u32 read_len;\n\t\t\tchar sense_buffer[TCMU_SENSE_BUFFERSIZE];\n\t\t} rsp;\n\t};\n\n} __packed;\n\nstruct tcmu_tmr_entry {\n\tstruct tcmu_cmd_entry_hdr hdr;\n\n#define TCMU_TMR_UNKNOWN\t\t0\n#define TCMU_TMR_ABORT_TASK\t\t1\n#define TCMU_TMR_ABORT_TASK_SET\t\t2\n#define TCMU_TMR_CLEAR_ACA\t\t3\n#define TCMU_TMR_CLEAR_TASK_SET\t\t4\n#define TCMU_TMR_LUN_RESET\t\t5\n#define TCMU_TMR_TARGET_WARM_RESET\t6\n#define TCMU_TMR_TARGET_COLD_RESET\t7\n \n#define TCMU_TMR_LUN_RESET_PRO\t\t128\n\t__u8 tmr_type;\n\n\t__u8 __pad1;\n\t__u16 __pad2;\n\t__u32 cmd_cnt;\n\t__u64 __pad3;\n\t__u64 __pad4;\n\t__u16 cmd_ids[];\n} __packed;\n\n#define TCMU_OP_ALIGN_SIZE sizeof(__u64)\n\nenum tcmu_genl_cmd {\n\tTCMU_CMD_UNSPEC,\n\tTCMU_CMD_ADDED_DEVICE,\n\tTCMU_CMD_REMOVED_DEVICE,\n\tTCMU_CMD_RECONFIG_DEVICE,\n\tTCMU_CMD_ADDED_DEVICE_DONE,\n\tTCMU_CMD_REMOVED_DEVICE_DONE,\n\tTCMU_CMD_RECONFIG_DEVICE_DONE,\n\tTCMU_CMD_SET_FEATURES,\n\t__TCMU_CMD_MAX,\n};\n#define TCMU_CMD_MAX (__TCMU_CMD_MAX - 1)\n\nenum tcmu_genl_attr {\n\tTCMU_ATTR_UNSPEC,\n\tTCMU_ATTR_DEVICE,\n\tTCMU_ATTR_MINOR,\n\tTCMU_ATTR_PAD,\n\tTCMU_ATTR_DEV_CFG,\n\tTCMU_ATTR_DEV_SIZE,\n\tTCMU_ATTR_WRITECACHE,\n\tTCMU_ATTR_CMD_STATUS,\n\tTCMU_ATTR_DEVICE_ID,\n\tTCMU_ATTR_SUPP_KERN_CMD_REPLY,\n\t__TCMU_ATTR_MAX,\n};\n#define TCMU_ATTR_MAX (__TCMU_ATTR_MAX - 1)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}