{
  "module_name": "md_p.h",
  "hash_id": "9dfee0792ee69e1df14118e65b5b7cbedd644611c86d965c6724067f313153b3",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/raid/md_p.h",
  "human_readable_source": " \n \n\n#ifndef _MD_P_H\n#define _MD_P_H\n\n#include <linux/types.h>\n#include <asm/byteorder.h>\n\n \n\n \n#define MD_RESERVED_BYTES\t\t(64 * 1024)\n#define MD_RESERVED_SECTORS\t\t(MD_RESERVED_BYTES / 512)\n\n#define MD_NEW_SIZE_SECTORS(x)\t\t((x & ~(MD_RESERVED_SECTORS - 1)) - MD_RESERVED_SECTORS)\n\n#define MD_SB_BYTES\t\t\t4096\n#define MD_SB_WORDS\t\t\t(MD_SB_BYTES / 4)\n#define MD_SB_SECTORS\t\t\t(MD_SB_BYTES / 512)\n\n \n#define\tMD_SB_GENERIC_OFFSET\t\t0\n#define MD_SB_PERSONALITY_OFFSET\t64\n#define MD_SB_DISKS_OFFSET\t\t128\n#define MD_SB_DESCRIPTOR_OFFSET\t\t992\n\n#define MD_SB_GENERIC_CONSTANT_WORDS\t32\n#define MD_SB_GENERIC_STATE_WORDS\t32\n#define MD_SB_GENERIC_WORDS\t\t(MD_SB_GENERIC_CONSTANT_WORDS + MD_SB_GENERIC_STATE_WORDS)\n#define MD_SB_PERSONALITY_WORDS\t\t64\n#define MD_SB_DESCRIPTOR_WORDS\t\t32\n#define MD_SB_DISKS\t\t\t27\n#define MD_SB_DISKS_WORDS\t\t(MD_SB_DISKS*MD_SB_DESCRIPTOR_WORDS)\n#define MD_SB_RESERVED_WORDS\t\t(1024 - MD_SB_GENERIC_WORDS - MD_SB_PERSONALITY_WORDS - MD_SB_DISKS_WORDS - MD_SB_DESCRIPTOR_WORDS)\n#define MD_SB_EQUAL_WORDS\t\t(MD_SB_GENERIC_WORDS + MD_SB_PERSONALITY_WORDS + MD_SB_DISKS_WORDS)\n\n \n#define MD_DISK_FAULTY\t\t0  \n#define MD_DISK_ACTIVE\t\t1  \n#define MD_DISK_SYNC\t\t2  \n#define MD_DISK_REMOVED\t\t3  \n#define MD_DISK_CLUSTER_ADD     4  \n#define MD_DISK_CANDIDATE\t5  \n#define MD_DISK_FAILFAST\t10  \n\n#define\tMD_DISK_WRITEMOSTLY\t9  \n#define MD_DISK_JOURNAL\t\t18  \n\n#define MD_DISK_ROLE_SPARE\t0xffff\n#define MD_DISK_ROLE_FAULTY\t0xfffe\n#define MD_DISK_ROLE_JOURNAL\t0xfffd\n#define MD_DISK_ROLE_MAX\t0xff00  \n\ntypedef struct mdp_device_descriptor_s {\n\t__u32 number;\t\t \n\t__u32 major;\t\t \n\t__u32 minor;\t\t \n\t__u32 raid_disk;\t \n\t__u32 state;\t\t \n\t__u32 reserved[MD_SB_DESCRIPTOR_WORDS - 5];\n} mdp_disk_t;\n\n#define MD_SB_MAGIC\t\t0xa92b4efc\n\n \n#define MD_SB_CLEAN\t\t0\n#define MD_SB_ERRORS\t\t1\n\n#define\tMD_SB_CLUSTERED\t\t5  \n#define\tMD_SB_BITMAP_PRESENT\t8  \n\n \n\n\ntypedef struct mdp_superblock_s {\n\t \n\t__u32 md_magic;\t\t \n\t__u32 major_version;\t \n\t__u32 minor_version;\t \n\t__u32 patch_version;\t \n\t__u32 gvalid_words;\t \n\t__u32 set_uuid0;\t \n\t__u32 ctime;\t\t \n\t__u32 level;\t\t \n\t__u32 size;\t\t \n\t__u32 nr_disks;\t\t \n\t__u32 raid_disks;\t \n\t__u32 md_minor;\t\t \n\t__u32 not_persistent;\t \n\t__u32 set_uuid1;\t \n\t__u32 set_uuid2;\t \n\t__u32 set_uuid3;\t \n\t__u32 gstate_creserved[MD_SB_GENERIC_CONSTANT_WORDS - 16];\n\n\t \n\t__u32 utime;\t\t \n\t__u32 state;\t\t \n\t__u32 active_disks;\t \n\t__u32 working_disks;\t \n\t__u32 failed_disks;\t \n\t__u32 spare_disks;\t \n\t__u32 sb_csum;\t\t \n#if defined(__BYTE_ORDER) ? __BYTE_ORDER == __BIG_ENDIAN : defined(__BIG_ENDIAN)\n\t__u32 events_hi;\t \n\t__u32 events_lo;\t \n\t__u32 cp_events_hi;\t \n\t__u32 cp_events_lo;\t \n#elif defined(__BYTE_ORDER) ? __BYTE_ORDER == __LITTLE_ENDIAN : defined(__LITTLE_ENDIAN)\n\t__u32 events_lo;\t \n\t__u32 events_hi;\t \n\t__u32 cp_events_lo;\t \n\t__u32 cp_events_hi;\t \n#else\n#error unspecified endianness\n#endif\n\t__u32 recovery_cp;\t \n\t \n\t__u64 reshape_position;\t \n\t__u32 new_level;\t \n\t__u32 delta_disks;\t \n\t__u32 new_layout;\t \n\t__u32 new_chunk;\t \n\t__u32 gstate_sreserved[MD_SB_GENERIC_STATE_WORDS - 18];\n\n\t \n\t__u32 layout;\t\t \n\t__u32 chunk_size;\t \n\t__u32 root_pv;\t\t \n\t__u32 root_block;\t \n\t__u32 pstate_reserved[MD_SB_PERSONALITY_WORDS - 4];\n\n\t \n\tmdp_disk_t disks[MD_SB_DISKS];\n\n\t \n\t__u32 reserved[MD_SB_RESERVED_WORDS];\n\n\t \n\tmdp_disk_t this_disk;\n\n} mdp_super_t;\n\nstatic inline __u64 md_event(mdp_super_t *sb) {\n\t__u64 ev = sb->events_hi;\n\treturn (ev<<32)| sb->events_lo;\n}\n\n#define MD_SUPERBLOCK_1_TIME_SEC_MASK ((1ULL<<40) - 1)\n\n \nstruct mdp_superblock_1 {\n\t \n\t__le32\tmagic;\t\t \n\t__le32\tmajor_version;\t \n\t__le32\tfeature_map;\t \n\t__le32\tpad0;\t\t \n\n\t__u8\tset_uuid[16];\t \n\tchar\tset_name[32];\t \n\n\t__le64\tctime;\t\t \n\t__le32\tlevel;\t\t \n\t__le32\tlayout;\t\t \n\t__le64\tsize;\t\t \n\n\t__le32\tchunksize;\t \n\t__le32\traid_disks;\n\tunion {\n\t\t__le32\tbitmap_offset;\t \n\n\t\t \n\t\tstruct {\n\t\t\t__le16 offset;  \n\t\t\t__le16 size;  \n\t\t} ppl;\n\t};\n\n\t \n\t__le32\tnew_level;\t \n\t__le64\treshape_position;\t \n\t__le32\tdelta_disks;\t \n\t__le32\tnew_layout;\t \n\t__le32\tnew_chunk;\t \n\t__le32  new_offset;\t \n\n\t \n\t__le64\tdata_offset;\t \n\t__le64\tdata_size;\t \n\t__le64\tsuper_offset;\t \n\tunion {\n\t\t__le64\trecovery_offset; \n\t\t__le64\tjournal_tail; \n\t};\n\t__le32\tdev_number;\t \n\t__le32\tcnt_corrected_read;  \n\t__u8\tdevice_uuid[16];  \n\t__u8\tdevflags;\t \n#define\tWriteMostly1\t1\t \n#define\tFailFast1\t2\t \n\t \n\t__u8\tbblog_shift;\t \n\t__le16\tbblog_size;\t \n\t__le32\tbblog_offset;\t \n\n\t \n\t__le64\tutime;\t\t \n\t__le64\tevents;\t\t \n\t__le64\tresync_offset;\t \n\t__le32\tsb_csum;\t \n\t__le32\tmax_dev;\t \n\t__u8\tpad3[64-32];\t \n\n\t \n\t__le16\tdev_roles[];\t \n};\n\n \n#define MD_FEATURE_BITMAP_OFFSET\t1\n#define\tMD_FEATURE_RECOVERY_OFFSET\t2  \n#define\tMD_FEATURE_RESHAPE_ACTIVE\t4\n#define\tMD_FEATURE_BAD_BLOCKS\t\t8  \n#define\tMD_FEATURE_REPLACEMENT\t\t16  \n#define\tMD_FEATURE_RESHAPE_BACKWARDS\t32  \n#define\tMD_FEATURE_NEW_OFFSET\t\t64  \n#define\tMD_FEATURE_RECOVERY_BITMAP\t128  \n#define\tMD_FEATURE_CLUSTERED\t\t256  \n#define\tMD_FEATURE_JOURNAL\t\t512  \n#define\tMD_FEATURE_PPL\t\t\t1024  \n#define\tMD_FEATURE_MULTIPLE_PPLS\t2048  \n#define\tMD_FEATURE_RAID0_LAYOUT\t\t4096  \n#define\tMD_FEATURE_ALL\t\t\t(MD_FEATURE_BITMAP_OFFSET\t\\\n\t\t\t\t\t|MD_FEATURE_RECOVERY_OFFSET\t\\\n\t\t\t\t\t|MD_FEATURE_RESHAPE_ACTIVE\t\\\n\t\t\t\t\t|MD_FEATURE_BAD_BLOCKS\t\t\\\n\t\t\t\t\t|MD_FEATURE_REPLACEMENT\t\t\\\n\t\t\t\t\t|MD_FEATURE_RESHAPE_BACKWARDS\t\\\n\t\t\t\t\t|MD_FEATURE_NEW_OFFSET\t\t\\\n\t\t\t\t\t|MD_FEATURE_RECOVERY_BITMAP\t\\\n\t\t\t\t\t|MD_FEATURE_CLUSTERED\t\t\\\n\t\t\t\t\t|MD_FEATURE_JOURNAL\t\t\\\n\t\t\t\t\t|MD_FEATURE_PPL\t\t\t\\\n\t\t\t\t\t|MD_FEATURE_MULTIPLE_PPLS\t\\\n\t\t\t\t\t|MD_FEATURE_RAID0_LAYOUT\t\\\n\t\t\t\t\t)\n\nstruct r5l_payload_header {\n\t__le16 type;\n\t__le16 flags;\n} __attribute__ ((__packed__));\n\nenum r5l_payload_type {\n\tR5LOG_PAYLOAD_DATA = 0,\n\tR5LOG_PAYLOAD_PARITY = 1,\n\tR5LOG_PAYLOAD_FLUSH = 2,\n};\n\nstruct r5l_payload_data_parity {\n\tstruct r5l_payload_header header;\n\t__le32 size;\t\t \n\t__le64 location;\t \n\t__le32 checksum[];\n} __attribute__ ((__packed__));\n\nenum r5l_payload_data_parity_flag {\n\tR5LOG_PAYLOAD_FLAG_DISCARD = 1,  \n\t \n\tR5LOG_PAYLOAD_FLAG_RESHAPED = 2,\n\tR5LOG_PAYLOAD_FLAG_RESHAPING = 3,\n};\n\nstruct r5l_payload_flush {\n\tstruct r5l_payload_header header;\n\t__le32 size;  \n\t__le64 flush_stripes[];\n} __attribute__ ((__packed__));\n\nenum r5l_payload_flush_flag {\n\tR5LOG_PAYLOAD_FLAG_FLUSH_STRIPE = 1,  \n};\n\nstruct r5l_meta_block {\n\t__le32 magic;\n\t__le32 checksum;\n\t__u8 version;\n\t__u8 __zero_pading_1;\n\t__le16 __zero_pading_2;\n\t__le32 meta_size;  \n\n\t__le64 seq;\n\t__le64 position;  \n\tstruct r5l_payload_header payloads[];\n} __attribute__ ((__packed__));\n\n#define R5LOG_VERSION 0x1\n#define R5LOG_MAGIC 0x6433c509\n\nstruct ppl_header_entry {\n\t__le64 data_sector;\t \n\t__le32 pp_size;\t\t \n\t__le32 data_size;\t \n\t__le32 parity_disk;\t \n\t__le32 checksum;\t \n} __attribute__ ((__packed__));\n\n#define PPL_HEADER_SIZE 4096\n#define PPL_HDR_RESERVED 512\n#define PPL_HDR_ENTRY_SPACE \\\n\t(PPL_HEADER_SIZE - PPL_HDR_RESERVED - 4 * sizeof(__le32) - sizeof(__le64))\n#define PPL_HDR_MAX_ENTRIES \\\n\t(PPL_HDR_ENTRY_SPACE / sizeof(struct ppl_header_entry))\n\nstruct ppl_header {\n\t__u8 reserved[PPL_HDR_RESERVED]; \n\t__le32 signature;\t\t \n\t__le32 padding;\t\t\t \n\t__le64 generation;\t\t \n\t__le32 entries_count;\t\t \n\t__le32 checksum;\t\t \n\tstruct ppl_header_entry entries[PPL_HDR_MAX_ENTRIES];\n} __attribute__ ((__packed__));\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}