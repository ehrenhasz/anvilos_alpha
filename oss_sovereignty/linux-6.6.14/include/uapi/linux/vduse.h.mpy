{
  "module_name": "vduse.h",
  "hash_id": "84ce7447c97e111c41b367ac3c96bbea5987f17ba2bd5c1df40c13ff45f6ab7e",
  "original_prompt": "Ingested from linux-6.6.14/include/uapi/linux/vduse.h",
  "human_readable_source": " \n#ifndef _UAPI_VDUSE_H_\n#define _UAPI_VDUSE_H_\n\n#include <linux/types.h>\n\n#define VDUSE_BASE\t0x81\n\n \n\n#define VDUSE_API_VERSION\t0\n\n \n#define VDUSE_GET_API_VERSION\t_IOR(VDUSE_BASE, 0x00, __u64)\n\n \n#define VDUSE_SET_API_VERSION\t_IOW(VDUSE_BASE, 0x01, __u64)\n\n \nstruct vduse_dev_config {\n#define VDUSE_NAME_MAX\t256\n\tchar name[VDUSE_NAME_MAX];\n\t__u32 vendor_id;\n\t__u32 device_id;\n\t__u64 features;\n\t__u32 vq_num;\n\t__u32 vq_align;\n\t__u32 reserved[13];\n\t__u32 config_size;\n\t__u8 config[];\n};\n\n \n#define VDUSE_CREATE_DEV\t_IOW(VDUSE_BASE, 0x02, struct vduse_dev_config)\n\n \n#define VDUSE_DESTROY_DEV\t_IOW(VDUSE_BASE, 0x03, char[VDUSE_NAME_MAX])\n\n \n\n \nstruct vduse_iotlb_entry {\n\t__u64 offset;\n\t__u64 start;\n\t__u64 last;\n#define VDUSE_ACCESS_RO 0x1\n#define VDUSE_ACCESS_WO 0x2\n#define VDUSE_ACCESS_RW 0x3\n\t__u8 perm;\n};\n\n \n#define VDUSE_IOTLB_GET_FD\t_IOWR(VDUSE_BASE, 0x10, struct vduse_iotlb_entry)\n\n \n#define VDUSE_DEV_GET_FEATURES\t_IOR(VDUSE_BASE, 0x11, __u64)\n\n \nstruct vduse_config_data {\n\t__u32 offset;\n\t__u32 length;\n\t__u8 buffer[];\n};\n\n \n#define VDUSE_DEV_SET_CONFIG\t_IOW(VDUSE_BASE, 0x12, struct vduse_config_data)\n\n \n#define VDUSE_DEV_INJECT_CONFIG_IRQ\t_IO(VDUSE_BASE, 0x13)\n\n \nstruct vduse_vq_config {\n\t__u32 index;\n\t__u16 max_size;\n\t__u16 reserved[13];\n};\n\n \n#define VDUSE_VQ_SETUP\t\t_IOW(VDUSE_BASE, 0x14, struct vduse_vq_config)\n\n \nstruct vduse_vq_state_split {\n\t__u16 avail_index;\n};\n\n \nstruct vduse_vq_state_packed {\n\t__u16 last_avail_counter;\n\t__u16 last_avail_idx;\n\t__u16 last_used_counter;\n\t__u16 last_used_idx;\n};\n\n \nstruct vduse_vq_info {\n\t__u32 index;\n\t__u32 num;\n\t__u64 desc_addr;\n\t__u64 driver_addr;\n\t__u64 device_addr;\n\tunion {\n\t\tstruct vduse_vq_state_split split;\n\t\tstruct vduse_vq_state_packed packed;\n\t};\n\t__u8 ready;\n};\n\n \n#define VDUSE_VQ_GET_INFO\t_IOWR(VDUSE_BASE, 0x15, struct vduse_vq_info)\n\n \nstruct vduse_vq_eventfd {\n\t__u32 index;\n#define VDUSE_EVENTFD_DEASSIGN -1\n\tint fd;\n};\n\n \n#define VDUSE_VQ_SETUP_KICKFD\t_IOW(VDUSE_BASE, 0x16, struct vduse_vq_eventfd)\n\n \n#define VDUSE_VQ_INJECT_IRQ\t_IOW(VDUSE_BASE, 0x17, __u32)\n\n \nstruct vduse_iova_umem {\n\t__u64 uaddr;\n\t__u64 iova;\n\t__u64 size;\n\t__u64 reserved[3];\n};\n\n \n#define VDUSE_IOTLB_REG_UMEM\t_IOW(VDUSE_BASE, 0x18, struct vduse_iova_umem)\n\n \n#define VDUSE_IOTLB_DEREG_UMEM\t_IOW(VDUSE_BASE, 0x19, struct vduse_iova_umem)\n\n \nstruct vduse_iova_info {\n\t__u64 start;\n\t__u64 last;\n#define VDUSE_IOVA_CAP_UMEM (1 << 0)\n\t__u64 capability;\n\t__u64 reserved[3];\n};\n\n \n#define VDUSE_IOTLB_GET_INFO\t_IOWR(VDUSE_BASE, 0x1a, struct vduse_iova_info)\n\n \n\n \nenum vduse_req_type {\n\tVDUSE_GET_VQ_STATE,\n\tVDUSE_SET_STATUS,\n\tVDUSE_UPDATE_IOTLB,\n};\n\n \nstruct vduse_vq_state {\n\t__u32 index;\n\tunion {\n\t\tstruct vduse_vq_state_split split;\n\t\tstruct vduse_vq_state_packed packed;\n\t};\n};\n\n \nstruct vduse_dev_status {\n\t__u8 status;\n};\n\n \nstruct vduse_iova_range {\n\t__u64 start;\n\t__u64 last;\n};\n\n \nstruct vduse_dev_request {\n\t__u32 type;\n\t__u32 request_id;\n\t__u32 reserved[4];\n\tunion {\n\t\tstruct vduse_vq_state vq_state;\n\t\tstruct vduse_dev_status s;\n\t\tstruct vduse_iova_range iova;\n\t\t__u32 padding[32];\n\t};\n};\n\n \nstruct vduse_dev_response {\n\t__u32 request_id;\n#define VDUSE_REQ_RESULT_OK\t0x00\n#define VDUSE_REQ_RESULT_FAILED\t0x01\n\t__u32 result;\n\t__u32 reserved[4];\n\tunion {\n\t\tstruct vduse_vq_state vq_state;\n\t\t__u32 padding[32];\n\t};\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}