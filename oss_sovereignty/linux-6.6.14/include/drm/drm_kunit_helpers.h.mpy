{
  "module_name": "drm_kunit_helpers.h",
  "hash_id": "33581f1734e436fef6212e6095b76378eddc2193db29dba67ad60d98c1defcf5",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_kunit_helpers.h",
  "human_readable_source": "\n\n#ifndef DRM_KUNIT_HELPERS_H_\n#define DRM_KUNIT_HELPERS_H_\n\n#include <linux/device.h>\n\n#include <kunit/test.h>\n\nstruct drm_device;\nstruct kunit;\n\nstruct device *drm_kunit_helper_alloc_device(struct kunit *test);\nvoid drm_kunit_helper_free_device(struct kunit *test, struct device *dev);\n\nstruct drm_device *\n__drm_kunit_helper_alloc_drm_device_with_driver(struct kunit *test,\n\t\t\t\t\t\tstruct device *dev,\n\t\t\t\t\t\tsize_t size, size_t offset,\n\t\t\t\t\t\tconst struct drm_driver *driver);\n\n \n#define drm_kunit_helper_alloc_drm_device_with_driver(_test, _dev, _type, _member, _drv)\t\\\n\t((_type *)__drm_kunit_helper_alloc_drm_device_with_driver(_test, _dev,\t\t\t\\\n\t\t\t\t\t\t       sizeof(_type),\t\t\t\t\\\n\t\t\t\t\t\t       offsetof(_type, _member),\t\t\\\n\t\t\t\t\t\t       _drv))\n\nstatic inline struct drm_device *\n__drm_kunit_helper_alloc_drm_device(struct kunit *test,\n\t\t\t\t    struct device *dev,\n\t\t\t\t    size_t size, size_t offset,\n\t\t\t\t    u32 features)\n{\n\tstruct drm_driver *driver;\n\n\tdriver = devm_kzalloc(dev, sizeof(*driver), GFP_KERNEL);\n\tKUNIT_ASSERT_NOT_NULL(test, driver);\n\n\tdriver->driver_features = features;\n\n\treturn __drm_kunit_helper_alloc_drm_device_with_driver(test, dev,\n\t\t\t\t\t\t\t       size, offset,\n\t\t\t\t\t\t\t       driver);\n}\n\n \n#define drm_kunit_helper_alloc_drm_device(_test, _dev, _type, _member, _feat)\t\\\n\t((_type *)__drm_kunit_helper_alloc_drm_device(_test, _dev,\t\t\\\n\t\t\t\t\t\t      sizeof(_type),\t\t\\\n\t\t\t\t\t\t      offsetof(_type, _member),\t\\\n\t\t\t\t\t\t      _feat))\nstruct drm_modeset_acquire_ctx *\ndrm_kunit_helper_acquire_ctx_alloc(struct kunit *test);\n\nstruct drm_atomic_state *\ndrm_kunit_helper_atomic_state_alloc(struct kunit *test,\n\t\t\t\t    struct drm_device *drm,\n\t\t\t\t    struct drm_modeset_acquire_ctx *ctx);\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}