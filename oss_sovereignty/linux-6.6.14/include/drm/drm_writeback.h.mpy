{
  "module_name": "drm_writeback.h",
  "hash_id": "eedaae49eb088c227358145c201af46422a3b8fa32316a1647ff4b0210e1d4c0",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_writeback.h",
  "human_readable_source": " \n \n\n#ifndef __DRM_WRITEBACK_H__\n#define __DRM_WRITEBACK_H__\n#include <drm/drm_connector.h>\n#include <drm/drm_encoder.h>\n#include <linux/workqueue.h>\n\n \nstruct drm_writeback_connector {\n\t \n\tstruct drm_connector base;\n\n\t \n\tstruct drm_encoder encoder;\n\n\t \n\tstruct drm_property_blob *pixel_formats_blob_ptr;\n\n\t \n\tspinlock_t job_lock;\n\n\t \n\tstruct list_head job_queue;\n\n\t \n\tunsigned int fence_context;\n\t \n\tspinlock_t fence_lock;\n\t \n\tunsigned long fence_seqno;\n\t \n\tchar timeline_name[32];\n};\n\n \nstruct drm_writeback_job {\n\t \n\tstruct drm_writeback_connector *connector;\n\n\t \n\tbool prepared;\n\n\t \n\tstruct work_struct cleanup_work;\n\n\t \n\tstruct list_head list_entry;\n\n\t \n\tstruct drm_framebuffer *fb;\n\n\t \n\tstruct dma_fence *out_fence;\n\n\t \n\tvoid *priv;\n};\n\nstatic inline struct drm_writeback_connector *\ndrm_connector_to_writeback(struct drm_connector *connector)\n{\n\treturn container_of(connector, struct drm_writeback_connector, base);\n}\n\nint drm_writeback_connector_init(struct drm_device *dev,\n\t\t\t\t struct drm_writeback_connector *wb_connector,\n\t\t\t\t const struct drm_connector_funcs *con_funcs,\n\t\t\t\t const struct drm_encoder_helper_funcs *enc_helper_funcs,\n\t\t\t\t const u32 *formats, int n_formats,\n\t\t\t\t u32 possible_crtcs);\n\nint drm_writeback_connector_init_with_encoder(struct drm_device *dev,\n\t\t\t\tstruct drm_writeback_connector *wb_connector,\n\t\t\t\tstruct drm_encoder *enc,\n\t\t\t\tconst struct drm_connector_funcs *con_funcs, const u32 *formats,\n\t\t\t\tint n_formats);\n\nint drm_writeback_set_fb(struct drm_connector_state *conn_state,\n\t\t\t struct drm_framebuffer *fb);\n\nint drm_writeback_prepare_job(struct drm_writeback_job *job);\n\nvoid drm_writeback_queue_job(struct drm_writeback_connector *wb_connector,\n\t\t\t     struct drm_connector_state *conn_state);\n\nvoid drm_writeback_cleanup_job(struct drm_writeback_job *job);\n\nvoid\ndrm_writeback_signal_completion(struct drm_writeback_connector *wb_connector,\n\t\t\t\tint status);\n\nstruct dma_fence *\ndrm_writeback_get_out_fence(struct drm_writeback_connector *wb_connector);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}