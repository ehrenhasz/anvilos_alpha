{
  "module_name": "drm_exec.h",
  "hash_id": "039132d55c03508793fdc292cc1e2fc92562a62d973654f2a6a29904e0ebd750",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_exec.h",
  "human_readable_source": " \n\n#ifndef __DRM_EXEC_H__\n#define __DRM_EXEC_H__\n\n#include <linux/compiler.h>\n#include <linux/ww_mutex.h>\n\n#define DRM_EXEC_INTERRUPTIBLE_WAIT\tBIT(0)\n#define DRM_EXEC_IGNORE_DUPLICATES\tBIT(1)\n\nstruct drm_gem_object;\n\n \nstruct drm_exec {\n\t \n\tuint32_t\t\tflags;\n\n\t \n\tstruct ww_acquire_ctx\tticket;\n\n\t \n\tunsigned int\t\tnum_objects;\n\n\t \n\tunsigned int\t\tmax_objects;\n\n\t \n\tstruct drm_gem_object\t**objects;\n\n\t \n\tstruct drm_gem_object\t*contended;\n\n\t \n\tstruct drm_gem_object *prelocked;\n};\n\n \nstatic inline struct drm_gem_object *\ndrm_exec_obj(struct drm_exec *exec, unsigned long index)\n{\n\treturn index < exec->num_objects ? exec->objects[index] : NULL;\n}\n\n \n#define drm_exec_for_each_locked_object(exec, index, obj)\t\t\\\n\tfor ((index) = 0; ((obj) = drm_exec_obj(exec, index)); ++(index))\n\n \n#define drm_exec_for_each_locked_object_reverse(exec, index, obj)\t\\\n\tfor ((index) = (exec)->num_objects - 1;\t\t\t\t\\\n\t     ((obj) = drm_exec_obj(exec, index)); --(index))\n\n \n#define drm_exec_until_all_locked(exec)\t\t\t\t\t\\\n__PASTE(__drm_exec_, __LINE__):\t\t\t\t\t\t\\\n\tfor (void *__drm_exec_retry_ptr; ({\t\t\t\t\\\n\t\t__drm_exec_retry_ptr = &&__PASTE(__drm_exec_, __LINE__);\\\n\t\t(void)__drm_exec_retry_ptr;\t\t\t\t\\\n\t\tdrm_exec_cleanup(exec);\t\t\t\t\t\\\n\t});)\n\n \n#define drm_exec_retry_on_contention(exec)\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\\\n\t\tif (unlikely(drm_exec_is_contended(exec)))\t\\\n\t\t\tgoto *__drm_exec_retry_ptr;\t\t\\\n\t} while (0)\n\n \nstatic inline bool drm_exec_is_contended(struct drm_exec *exec)\n{\n\treturn !!exec->contended;\n}\n\nvoid drm_exec_init(struct drm_exec *exec, uint32_t flags);\nvoid drm_exec_fini(struct drm_exec *exec);\nbool drm_exec_cleanup(struct drm_exec *exec);\nint drm_exec_lock_obj(struct drm_exec *exec, struct drm_gem_object *obj);\nvoid drm_exec_unlock_obj(struct drm_exec *exec, struct drm_gem_object *obj);\nint drm_exec_prepare_obj(struct drm_exec *exec, struct drm_gem_object *obj,\n\t\t\t unsigned int num_fences);\nint drm_exec_prepare_array(struct drm_exec *exec,\n\t\t\t   struct drm_gem_object **objects,\n\t\t\t   unsigned int num_objects,\n\t\t\t   unsigned int num_fences);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}