{
  "module_name": "drm_gem_vram_helper.h",
  "hash_id": "a4294509933f3d9424c54c743667dd3623389da8c35a2ce4b62c58a2c65a81ac",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_gem_vram_helper.h",
  "human_readable_source": " \n\n#ifndef DRM_GEM_VRAM_HELPER_H\n#define DRM_GEM_VRAM_HELPER_H\n\n#include <drm/drm_file.h>\n#include <drm/drm_gem.h>\n#include <drm/drm_gem_ttm_helper.h>\n#include <drm/drm_ioctl.h>\n#include <drm/drm_modes.h>\n#include <drm/ttm/ttm_bo.h>\n#include <drm/ttm/ttm_placement.h>\n\n#include <linux/container_of.h>\n#include <linux/iosys-map.h>\n\nstruct drm_mode_create_dumb;\nstruct drm_plane;\nstruct drm_plane_state;\nstruct drm_simple_display_pipe;\nstruct filp;\nstruct vm_area_struct;\n\n#define DRM_GEM_VRAM_PL_FLAG_SYSTEM\t(1 << 0)\n#define DRM_GEM_VRAM_PL_FLAG_VRAM\t(1 << 1)\n#define DRM_GEM_VRAM_PL_FLAG_TOPDOWN\t(1 << 2)\n\n \n\n \nstruct drm_gem_vram_object {\n\tstruct ttm_buffer_object bo;\n\tstruct iosys_map map;\n\n\t \n\tunsigned int vmap_use_count;\n\n\t \n\tstruct ttm_placement placement;\n\tstruct ttm_place placements[2];\n};\n\n \nstatic inline struct drm_gem_vram_object *drm_gem_vram_of_bo(\n\tstruct ttm_buffer_object *bo)\n{\n\treturn container_of(bo, struct drm_gem_vram_object, bo);\n}\n\n \nstatic inline struct drm_gem_vram_object *drm_gem_vram_of_gem(\n\tstruct drm_gem_object *gem)\n{\n\treturn container_of(gem, struct drm_gem_vram_object, bo.base);\n}\n\nstruct drm_gem_vram_object *drm_gem_vram_create(struct drm_device *dev,\n\t\t\t\t\t\tsize_t size,\n\t\t\t\t\t\tunsigned long pg_align);\nvoid drm_gem_vram_put(struct drm_gem_vram_object *gbo);\ns64 drm_gem_vram_offset(struct drm_gem_vram_object *gbo);\nint drm_gem_vram_pin(struct drm_gem_vram_object *gbo, unsigned long pl_flag);\nint drm_gem_vram_unpin(struct drm_gem_vram_object *gbo);\nint drm_gem_vram_vmap(struct drm_gem_vram_object *gbo, struct iosys_map *map);\nvoid drm_gem_vram_vunmap(struct drm_gem_vram_object *gbo,\n\t\t\t struct iosys_map *map);\n\nint drm_gem_vram_fill_create_dumb(struct drm_file *file,\n\t\t\t\t  struct drm_device *dev,\n\t\t\t\t  unsigned long pg_align,\n\t\t\t\t  unsigned long pitch_align,\n\t\t\t\t  struct drm_mode_create_dumb *args);\n\n \n\nint drm_gem_vram_driver_dumb_create(struct drm_file *file,\n\t\t\t\t    struct drm_device *dev,\n\t\t\t\t    struct drm_mode_create_dumb *args);\n\n \nint\ndrm_gem_vram_plane_helper_prepare_fb(struct drm_plane *plane,\n\t\t\t\t     struct drm_plane_state *new_state);\nvoid\ndrm_gem_vram_plane_helper_cleanup_fb(struct drm_plane *plane,\n\t\t\t\t     struct drm_plane_state *old_state);\n\n \n#define DRM_GEM_VRAM_PLANE_HELPER_FUNCS \\\n\t.prepare_fb = drm_gem_vram_plane_helper_prepare_fb, \\\n\t.cleanup_fb = drm_gem_vram_plane_helper_cleanup_fb\n\n \n\nint drm_gem_vram_simple_display_pipe_prepare_fb(\n\tstruct drm_simple_display_pipe *pipe,\n\tstruct drm_plane_state *new_state);\n\nvoid drm_gem_vram_simple_display_pipe_cleanup_fb(\n\tstruct drm_simple_display_pipe *pipe,\n\tstruct drm_plane_state *old_state);\n\n \n#define DRM_GEM_VRAM_DRIVER \\\n\t.debugfs_init\t = drm_vram_mm_debugfs_init, \\\n\t.dumb_create\t = drm_gem_vram_driver_dumb_create, \\\n\t.dumb_map_offset = drm_gem_ttm_dumb_map_offset\n\n \n\n \nstruct drm_vram_mm {\n\tuint64_t vram_base;\n\tsize_t vram_size;\n\n\tstruct ttm_device bdev;\n};\n\n \nstatic inline struct drm_vram_mm *drm_vram_mm_of_bdev(\n\tstruct ttm_device *bdev)\n{\n\treturn container_of(bdev, struct drm_vram_mm, bdev);\n}\n\nvoid drm_vram_mm_debugfs_init(struct drm_minor *minor);\n\n \n\nint drmm_vram_helper_init(struct drm_device *dev, uint64_t vram_base,\n\t\t\t  size_t vram_size);\n\n \n\nenum drm_mode_status\ndrm_vram_helper_mode_valid(struct drm_device *dev,\n\t\t\t   const struct drm_display_mode *mode);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}