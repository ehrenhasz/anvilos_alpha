{
  "module_name": "drm_gem_dma_helper.h",
  "hash_id": "8bfa9a3ab744fc9876dbe3ed9871777d2063b689e96f661e223ec8d5c3615900",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_gem_dma_helper.h",
  "human_readable_source": " \n#ifndef __DRM_GEM_DMA_HELPER_H__\n#define __DRM_GEM_DMA_HELPER_H__\n\n#include <drm/drm_file.h>\n#include <drm/drm_ioctl.h>\n#include <drm/drm_gem.h>\n\nstruct drm_mode_create_dumb;\n\n \nstruct drm_gem_dma_object {\n\tstruct drm_gem_object base;\n\tdma_addr_t dma_addr;\n\tstruct sg_table *sgt;\n\n\t \n\tvoid *vaddr;\n\n\tbool map_noncoherent;\n};\n\n#define to_drm_gem_dma_obj(gem_obj) \\\n\tcontainer_of(gem_obj, struct drm_gem_dma_object, base)\n\nstruct drm_gem_dma_object *drm_gem_dma_create(struct drm_device *drm,\n\t\t\t\t\t      size_t size);\nvoid drm_gem_dma_free(struct drm_gem_dma_object *dma_obj);\nvoid drm_gem_dma_print_info(const struct drm_gem_dma_object *dma_obj,\n\t\t\t    struct drm_printer *p, unsigned int indent);\nstruct sg_table *drm_gem_dma_get_sg_table(struct drm_gem_dma_object *dma_obj);\nint drm_gem_dma_vmap(struct drm_gem_dma_object *dma_obj,\n\t\t     struct iosys_map *map);\nint drm_gem_dma_mmap(struct drm_gem_dma_object *dma_obj, struct vm_area_struct *vma);\n\nextern const struct vm_operations_struct drm_gem_dma_vm_ops;\n\n \n\n \nstatic inline void drm_gem_dma_object_free(struct drm_gem_object *obj)\n{\n\tstruct drm_gem_dma_object *dma_obj = to_drm_gem_dma_obj(obj);\n\n\tdrm_gem_dma_free(dma_obj);\n}\n\n \nstatic inline void drm_gem_dma_object_print_info(struct drm_printer *p, unsigned int indent,\n\t\t\t\t\t\t const struct drm_gem_object *obj)\n{\n\tconst struct drm_gem_dma_object *dma_obj = to_drm_gem_dma_obj(obj);\n\n\tdrm_gem_dma_print_info(dma_obj, p, indent);\n}\n\n \nstatic inline struct sg_table *drm_gem_dma_object_get_sg_table(struct drm_gem_object *obj)\n{\n\tstruct drm_gem_dma_object *dma_obj = to_drm_gem_dma_obj(obj);\n\n\treturn drm_gem_dma_get_sg_table(dma_obj);\n}\n\n \nstatic inline int drm_gem_dma_object_vmap(struct drm_gem_object *obj,\n\t\t\t\t\t  struct iosys_map *map)\n{\n\tstruct drm_gem_dma_object *dma_obj = to_drm_gem_dma_obj(obj);\n\n\treturn drm_gem_dma_vmap(dma_obj, map);\n}\n\n \nstatic inline int drm_gem_dma_object_mmap(struct drm_gem_object *obj, struct vm_area_struct *vma)\n{\n\tstruct drm_gem_dma_object *dma_obj = to_drm_gem_dma_obj(obj);\n\n\treturn drm_gem_dma_mmap(dma_obj, vma);\n}\n\n \n\n \nint drm_gem_dma_dumb_create_internal(struct drm_file *file_priv,\n\t\t\t\t     struct drm_device *drm,\n\t\t\t\t     struct drm_mode_create_dumb *args);\n\n \nint drm_gem_dma_dumb_create(struct drm_file *file_priv,\n\t\t\t    struct drm_device *drm,\n\t\t\t    struct drm_mode_create_dumb *args);\n\nstruct drm_gem_object *\ndrm_gem_dma_prime_import_sg_table(struct drm_device *dev,\n\t\t\t\t  struct dma_buf_attachment *attach,\n\t\t\t\t  struct sg_table *sgt);\n\n \n#define DRM_GEM_DMA_DRIVER_OPS_WITH_DUMB_CREATE(dumb_create_func) \\\n\t.dumb_create\t\t   = (dumb_create_func), \\\n\t.gem_prime_import_sg_table = drm_gem_dma_prime_import_sg_table\n\n \n#define DRM_GEM_DMA_DRIVER_OPS \\\n\tDRM_GEM_DMA_DRIVER_OPS_WITH_DUMB_CREATE(drm_gem_dma_dumb_create)\n\n \n#define DRM_GEM_DMA_DRIVER_OPS_VMAP_WITH_DUMB_CREATE(dumb_create_func) \\\n\t.dumb_create\t\t   = (dumb_create_func), \\\n\t.gem_prime_import_sg_table = drm_gem_dma_prime_import_sg_table_vmap\n\n \n#define DRM_GEM_DMA_DRIVER_OPS_VMAP \\\n\tDRM_GEM_DMA_DRIVER_OPS_VMAP_WITH_DUMB_CREATE(drm_gem_dma_dumb_create)\n\nstruct drm_gem_object *\ndrm_gem_dma_prime_import_sg_table_vmap(struct drm_device *drm,\n\t\t\t\t       struct dma_buf_attachment *attach,\n\t\t\t\t       struct sg_table *sgt);\n\n \n\n#ifndef CONFIG_MMU\nunsigned long drm_gem_dma_get_unmapped_area(struct file *filp,\n\t\t\t\t\t    unsigned long addr,\n\t\t\t\t\t    unsigned long len,\n\t\t\t\t\t    unsigned long pgoff,\n\t\t\t\t\t    unsigned long flags);\n#define DRM_GEM_DMA_UNMAPPED_AREA_FOPS \\\n\t.get_unmapped_area\t= drm_gem_dma_get_unmapped_area,\n#else\n#define DRM_GEM_DMA_UNMAPPED_AREA_FOPS\n#endif\n\n \n#define DEFINE_DRM_GEM_DMA_FOPS(name) \\\n\tstatic const struct file_operations name = {\\\n\t\t.owner\t\t= THIS_MODULE,\\\n\t\t.open\t\t= drm_open,\\\n\t\t.release\t= drm_release,\\\n\t\t.unlocked_ioctl\t= drm_ioctl,\\\n\t\t.compat_ioctl\t= drm_compat_ioctl,\\\n\t\t.poll\t\t= drm_poll,\\\n\t\t.read\t\t= drm_read,\\\n\t\t.llseek\t\t= noop_llseek,\\\n\t\t.mmap\t\t= drm_gem_mmap,\\\n\t\tDRM_GEM_DMA_UNMAPPED_AREA_FOPS \\\n\t}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}