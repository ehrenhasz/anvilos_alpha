{
  "module_name": "drm_syncobj.h",
  "hash_id": "b4a4149ca0cd388d69b71f4e80d44a62207dbe35d865789c829bce92d58e238f",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_syncobj.h",
  "human_readable_source": " \n#ifndef __DRM_SYNCOBJ_H__\n#define __DRM_SYNCOBJ_H__\n\n#include <linux/dma-fence.h>\n#include <linux/dma-fence-chain.h>\n\nstruct drm_file;\n\n \nstruct drm_syncobj {\n\t \n\tstruct kref refcount;\n\t \n\tstruct dma_fence __rcu *fence;\n\t \n\tstruct list_head cb_list;\n\t \n\tstruct list_head ev_fd_list;\n\t \n\tspinlock_t lock;\n\t \n\tstruct file *file;\n};\n\nvoid drm_syncobj_free(struct kref *kref);\n\n \nstatic inline void\ndrm_syncobj_get(struct drm_syncobj *obj)\n{\n\tkref_get(&obj->refcount);\n}\n\n \nstatic inline void\ndrm_syncobj_put(struct drm_syncobj *obj)\n{\n\tkref_put(&obj->refcount, drm_syncobj_free);\n}\n\n \nstatic inline struct dma_fence *\ndrm_syncobj_fence_get(struct drm_syncobj *syncobj)\n{\n\tstruct dma_fence *fence;\n\n\trcu_read_lock();\n\tfence = dma_fence_get_rcu_safe(&syncobj->fence);\n\trcu_read_unlock();\n\n\treturn fence;\n}\n\nstruct drm_syncobj *drm_syncobj_find(struct drm_file *file_private,\n\t\t\t\t     u32 handle);\nvoid drm_syncobj_add_point(struct drm_syncobj *syncobj,\n\t\t\t   struct dma_fence_chain *chain,\n\t\t\t   struct dma_fence *fence,\n\t\t\t   uint64_t point);\nvoid drm_syncobj_replace_fence(struct drm_syncobj *syncobj,\n\t\t\t       struct dma_fence *fence);\nint drm_syncobj_find_fence(struct drm_file *file_private,\n\t\t\t   u32 handle, u64 point, u64 flags,\n\t\t\t   struct dma_fence **fence);\nvoid drm_syncobj_free(struct kref *kref);\nint drm_syncobj_create(struct drm_syncobj **out_syncobj, uint32_t flags,\n\t\t       struct dma_fence *fence);\nint drm_syncobj_get_handle(struct drm_file *file_private,\n\t\t\t   struct drm_syncobj *syncobj, u32 *handle);\nint drm_syncobj_get_fd(struct drm_syncobj *syncobj, int *p_fd);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}