{
  "module_name": "drm_atomic_helper.h",
  "hash_id": "8cdcfe1b65d78fea0ab3aac54760be42c5d2e1acc4d0039823b72b2622bf4450",
  "original_prompt": "Ingested from linux-6.6.14/include/drm/drm_atomic_helper.h",
  "human_readable_source": " \n\n#ifndef DRM_ATOMIC_HELPER_H_\n#define DRM_ATOMIC_HELPER_H_\n\n#include <drm/drm_crtc.h>\n#include <drm/drm_modeset_helper_vtables.h>\n#include <drm/drm_modeset_helper.h>\n#include <drm/drm_atomic_state_helper.h>\n#include <drm/drm_util.h>\n\n \n#define DRM_PLANE_NO_SCALING (1<<16)\n\nstruct drm_atomic_state;\nstruct drm_private_obj;\nstruct drm_private_state;\n\nint drm_atomic_helper_check_modeset(struct drm_device *dev,\n\t\t\t\tstruct drm_atomic_state *state);\nint\ndrm_atomic_helper_check_wb_encoder_state(struct drm_encoder *encoder,\n\t\t\t\t\t struct drm_connector_state *conn_state);\nint drm_atomic_helper_check_plane_state(struct drm_plane_state *plane_state,\n\t\t\t\t\tconst struct drm_crtc_state *crtc_state,\n\t\t\t\t\tint min_scale,\n\t\t\t\t\tint max_scale,\n\t\t\t\t\tbool can_position,\n\t\t\t\t\tbool can_update_disabled);\nint drm_atomic_helper_check_planes(struct drm_device *dev,\n\t\t\t       struct drm_atomic_state *state);\nint drm_atomic_helper_check_crtc_primary_plane(struct drm_crtc_state *crtc_state);\nint drm_atomic_helper_check(struct drm_device *dev,\n\t\t\t    struct drm_atomic_state *state);\nvoid drm_atomic_helper_commit_tail(struct drm_atomic_state *state);\nvoid drm_atomic_helper_commit_tail_rpm(struct drm_atomic_state *state);\nint drm_atomic_helper_commit(struct drm_device *dev,\n\t\t\t     struct drm_atomic_state *state,\n\t\t\t     bool nonblock);\nint drm_atomic_helper_async_check(struct drm_device *dev,\n\t\t\t\t  struct drm_atomic_state *state);\nvoid drm_atomic_helper_async_commit(struct drm_device *dev,\n\t\t\t\t    struct drm_atomic_state *state);\n\nint drm_atomic_helper_wait_for_fences(struct drm_device *dev,\n\t\t\t\t\tstruct drm_atomic_state *state,\n\t\t\t\t\tbool pre_swap);\n\nvoid drm_atomic_helper_wait_for_vblanks(struct drm_device *dev,\n\t\t\t\t\tstruct drm_atomic_state *old_state);\n\nvoid drm_atomic_helper_wait_for_flip_done(struct drm_device *dev,\n\t\t\t\t\t  struct drm_atomic_state *old_state);\n\nvoid\ndrm_atomic_helper_update_legacy_modeset_state(struct drm_device *dev,\n\t\t\t\t\t      struct drm_atomic_state *old_state);\n\nvoid\ndrm_atomic_helper_calc_timestamping_constants(struct drm_atomic_state *state);\n\nvoid drm_atomic_helper_commit_modeset_disables(struct drm_device *dev,\n\t\t\t\t\t       struct drm_atomic_state *state);\nvoid drm_atomic_helper_commit_modeset_enables(struct drm_device *dev,\n\t\t\t\t\t  struct drm_atomic_state *old_state);\n\nint drm_atomic_helper_prepare_planes(struct drm_device *dev,\n\t\t\t\t     struct drm_atomic_state *state);\nvoid drm_atomic_helper_unprepare_planes(struct drm_device *dev,\n\t\t\t\t\tstruct drm_atomic_state *state);\n\n#define DRM_PLANE_COMMIT_ACTIVE_ONLY\t\t\tBIT(0)\n#define DRM_PLANE_COMMIT_NO_DISABLE_AFTER_MODESET\tBIT(1)\n\nvoid drm_atomic_helper_commit_planes(struct drm_device *dev,\n\t\t\t\t     struct drm_atomic_state *state,\n\t\t\t\t     uint32_t flags);\nvoid drm_atomic_helper_cleanup_planes(struct drm_device *dev,\n\t\t\t\t      struct drm_atomic_state *old_state);\nvoid drm_atomic_helper_commit_planes_on_crtc(struct drm_crtc_state *old_crtc_state);\nvoid\ndrm_atomic_helper_disable_planes_on_crtc(struct drm_crtc_state *old_crtc_state,\n\t\t\t\t\t bool atomic);\n\nint __must_check drm_atomic_helper_swap_state(struct drm_atomic_state *state,\n\t\t\t\t\t      bool stall);\n\n \nint drm_atomic_helper_setup_commit(struct drm_atomic_state *state,\n\t\t\t\t   bool nonblock);\nvoid drm_atomic_helper_wait_for_dependencies(struct drm_atomic_state *state);\nvoid drm_atomic_helper_fake_vblank(struct drm_atomic_state *state);\nvoid drm_atomic_helper_commit_hw_done(struct drm_atomic_state *state);\nvoid drm_atomic_helper_commit_cleanup_done(struct drm_atomic_state *state);\n\n \nint drm_atomic_helper_update_plane(struct drm_plane *plane,\n\t\t\t\t   struct drm_crtc *crtc,\n\t\t\t\t   struct drm_framebuffer *fb,\n\t\t\t\t   int crtc_x, int crtc_y,\n\t\t\t\t   unsigned int crtc_w, unsigned int crtc_h,\n\t\t\t\t   uint32_t src_x, uint32_t src_y,\n\t\t\t\t   uint32_t src_w, uint32_t src_h,\n\t\t\t\t   struct drm_modeset_acquire_ctx *ctx);\nint drm_atomic_helper_disable_plane(struct drm_plane *plane,\n\t\t\t\t    struct drm_modeset_acquire_ctx *ctx);\nint drm_atomic_helper_set_config(struct drm_mode_set *set,\n\t\t\t\t struct drm_modeset_acquire_ctx *ctx);\n\nint drm_atomic_helper_disable_all(struct drm_device *dev,\n\t\t\t\t  struct drm_modeset_acquire_ctx *ctx);\nvoid drm_atomic_helper_shutdown(struct drm_device *dev);\nstruct drm_atomic_state *\ndrm_atomic_helper_duplicate_state(struct drm_device *dev,\n\t\t\t\t  struct drm_modeset_acquire_ctx *ctx);\nstruct drm_atomic_state *drm_atomic_helper_suspend(struct drm_device *dev);\nint drm_atomic_helper_commit_duplicated_state(struct drm_atomic_state *state,\n\t\t\t\t\t      struct drm_modeset_acquire_ctx *ctx);\nint drm_atomic_helper_resume(struct drm_device *dev,\n\t\t\t     struct drm_atomic_state *state);\n\nint drm_atomic_helper_page_flip(struct drm_crtc *crtc,\n\t\t\t\tstruct drm_framebuffer *fb,\n\t\t\t\tstruct drm_pending_vblank_event *event,\n\t\t\t\tuint32_t flags,\n\t\t\t\tstruct drm_modeset_acquire_ctx *ctx);\nint drm_atomic_helper_page_flip_target(\n\t\t\t\tstruct drm_crtc *crtc,\n\t\t\t\tstruct drm_framebuffer *fb,\n\t\t\t\tstruct drm_pending_vblank_event *event,\n\t\t\t\tuint32_t flags,\n\t\t\t\tuint32_t target,\n\t\t\t\tstruct drm_modeset_acquire_ctx *ctx);\n\n \n#define drm_atomic_crtc_for_each_plane(plane, crtc) \\\n\tdrm_for_each_plane_mask(plane, (crtc)->dev, (crtc)->state->plane_mask)\n\n \n#define drm_atomic_crtc_state_for_each_plane(plane, crtc_state) \\\n\tdrm_for_each_plane_mask(plane, (crtc_state)->state->dev, (crtc_state)->plane_mask)\n\n \n#define drm_atomic_crtc_state_for_each_plane_state(plane, plane_state, crtc_state) \\\n\tdrm_for_each_plane_mask(plane, (crtc_state)->state->dev, (crtc_state)->plane_mask) \\\n\t\tfor_each_if ((plane_state = \\\n\t\t\t      __drm_atomic_get_current_plane_state((crtc_state)->state, \\\n\t\t\t\t\t\t\t\t   plane)))\n\n \nstatic inline bool drm_atomic_plane_enabling(struct drm_plane_state *old_plane_state,\n\t\t\t\t\t     struct drm_plane_state *new_plane_state)\n{\n\t \n\tWARN_ON((!new_plane_state->crtc && new_plane_state->fb) ||\n\t\t(new_plane_state->crtc && !new_plane_state->fb));\n\n\treturn !old_plane_state->crtc && new_plane_state->crtc;\n}\n\n \nstatic inline bool\ndrm_atomic_plane_disabling(struct drm_plane_state *old_plane_state,\n\t\t\t   struct drm_plane_state *new_plane_state)\n{\n\t \n\tWARN_ON((new_plane_state->crtc == NULL && new_plane_state->fb != NULL) ||\n\t\t(new_plane_state->crtc != NULL && new_plane_state->fb == NULL));\n\n\treturn old_plane_state->crtc && !new_plane_state->crtc;\n}\n\nu32 *\ndrm_atomic_helper_bridge_propagate_bus_fmt(struct drm_bridge *bridge,\n\t\t\t\t\tstruct drm_bridge_state *bridge_state,\n\t\t\t\t\tstruct drm_crtc_state *crtc_state,\n\t\t\t\t\tstruct drm_connector_state *conn_state,\n\t\t\t\t\tu32 output_fmt,\n\t\t\t\t\tunsigned int *num_input_fmts);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}