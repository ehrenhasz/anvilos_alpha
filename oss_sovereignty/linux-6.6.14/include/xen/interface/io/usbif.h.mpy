{
  "module_name": "usbif.h",
  "hash_id": "f0a4c6672eb2e8bb917a515e0753ea15011bb2bf9b3d74fde365aa3c7d0e93d2",
  "original_prompt": "Ingested from linux-6.6.14/include/xen/interface/io/usbif.h",
  "human_readable_source": " \n\n \n\n#ifndef __XEN_PUBLIC_IO_USBIF_H__\n#define __XEN_PUBLIC_IO_USBIF_H__\n\n#include \"ring.h\"\n#include \"../grant_table.h\"\n\n \n\nenum xenusb_spec_version {\n\tXENUSB_VER_UNKNOWN = 0,\n\tXENUSB_VER_USB11,\n\tXENUSB_VER_USB20,\n\tXENUSB_VER_USB30,\t \n};\n\n \n\n#define XENUSB_PIPE_PORT_MASK\t0x0000001f\n#define XENUSB_PIPE_UNLINK\t0x00000020\n#define XENUSB_PIPE_DIR\t\t0x00000080\n#define XENUSB_PIPE_DEV_MASK\t0x0000007f\n#define XENUSB_PIPE_DEV_SHIFT\t8\n#define XENUSB_PIPE_EP_MASK\t0x0000000f\n#define XENUSB_PIPE_EP_SHIFT\t15\n#define XENUSB_PIPE_TYPE_MASK\t0x00000003\n#define XENUSB_PIPE_TYPE_SHIFT\t30\n#define XENUSB_PIPE_TYPE_ISOC\t0\n#define XENUSB_PIPE_TYPE_INT\t1\n#define XENUSB_PIPE_TYPE_CTRL\t2\n#define XENUSB_PIPE_TYPE_BULK\t3\n\n#define xenusb_pipeportnum(pipe)\t\t((pipe) & XENUSB_PIPE_PORT_MASK)\n#define xenusb_setportnum_pipe(pipe, portnum)\t((pipe) | (portnum))\n\n#define xenusb_pipeunlink(pipe)\t\t\t((pipe) & XENUSB_PIPE_UNLINK)\n#define xenusb_pipesubmit(pipe)\t\t\t(!xenusb_pipeunlink(pipe))\n#define xenusb_setunlink_pipe(pipe)\t\t((pipe) | XENUSB_PIPE_UNLINK)\n\n#define xenusb_pipein(pipe)\t\t\t((pipe) & XENUSB_PIPE_DIR)\n#define xenusb_pipeout(pipe)\t\t\t(!xenusb_pipein(pipe))\n\n#define xenusb_pipedevice(pipe)\t\t\t\\\n\t(((pipe) >> XENUSB_PIPE_DEV_SHIFT) & XENUSB_PIPE_DEV_MASK)\n\n#define xenusb_pipeendpoint(pipe)\t\t\\\n\t(((pipe) >> XENUSB_PIPE_EP_SHIFT) & XENUSB_PIPE_EP_MASK)\n\n#define xenusb_pipetype(pipe)\t\t\t\\\n\t(((pipe) >> XENUSB_PIPE_TYPE_SHIFT) & XENUSB_PIPE_TYPE_MASK)\n#define xenusb_pipeisoc(pipe)\t(xenusb_pipetype(pipe) == XENUSB_PIPE_TYPE_ISOC)\n#define xenusb_pipeint(pipe)\t(xenusb_pipetype(pipe) == XENUSB_PIPE_TYPE_INT)\n#define xenusb_pipectrl(pipe)\t(xenusb_pipetype(pipe) == XENUSB_PIPE_TYPE_CTRL)\n#define xenusb_pipebulk(pipe)\t(xenusb_pipetype(pipe) == XENUSB_PIPE_TYPE_BULK)\n\n#define XENUSB_MAX_SEGMENTS_PER_REQUEST (16)\n#define XENUSB_MAX_PORTNR\t\t31\n#define XENUSB_RING_SIZE\t\t4096\n\n \nstruct xenusb_request_segment {\n\tgrant_ref_t gref;\n\tuint16_t offset;\n\tuint16_t length;\n};\n\nstruct xenusb_urb_request {\n\tuint16_t id;\t\t\t \n\tuint16_t nr_buffer_segs;\t \n\n\t \n\tuint32_t pipe;\n\tuint16_t transfer_flags;\n#define XENUSB_SHORT_NOT_OK\t0x0001\n\tuint16_t buffer_length;\n\tunion {\n\t\tuint8_t ctrl[8];\t \n\n\t\tstruct {\n\t\t\tuint16_t interval;\t \n\t\t\tuint16_t start_frame;\t \n\t\t\tuint16_t number_of_packets;\t \n\t\t\tuint16_t nr_frame_desc_segs;\t \n\t\t} isoc;\n\n\t\tstruct {\n\t\t\tuint16_t interval;\t \n\t\t\tuint16_t pad[3];\n\t\t} intr;\n\n\t\tstruct {\n\t\t\tuint16_t unlink_id;\t \n\t\t\tuint16_t pad[3];\n\t\t} unlink;\n\n\t} u;\n\n\t \n\tstruct xenusb_request_segment seg[XENUSB_MAX_SEGMENTS_PER_REQUEST];\n};\n\nstruct xenusb_urb_response {\n\tuint16_t id;\t\t \n\tuint16_t start_frame;\t \n\tint32_t status;\t\t \n#define XENUSB_STATUS_OK\t0\n#define XENUSB_STATUS_NODEV\t(-19)\n#define XENUSB_STATUS_INVAL\t(-22)\n#define XENUSB_STATUS_STALL\t(-32)\n#define XENUSB_STATUS_IOERROR\t(-71)\n#define XENUSB_STATUS_BABBLE\t(-75)\n#define XENUSB_STATUS_SHUTDOWN\t(-108)\n\tint32_t actual_length;\t \n\tint32_t error_count;\t \n};\n\nDEFINE_RING_TYPES(xenusb_urb, struct xenusb_urb_request, struct xenusb_urb_response);\n#define XENUSB_URB_RING_SIZE __CONST_RING_SIZE(xenusb_urb, XENUSB_RING_SIZE)\n\n \nstruct xenusb_conn_request {\n\tuint16_t id;\n};\n\nstruct xenusb_conn_response {\n\tuint16_t id;\t\t \n\tuint8_t portnum;\t \n\tuint8_t speed;\t\t \n#define XENUSB_SPEED_NONE\t0\n#define XENUSB_SPEED_LOW\t1\n#define XENUSB_SPEED_FULL\t2\n#define XENUSB_SPEED_HIGH\t3\n};\n\nDEFINE_RING_TYPES(xenusb_conn, struct xenusb_conn_request, struct xenusb_conn_response);\n#define XENUSB_CONN_RING_SIZE __CONST_RING_SIZE(xenusb_conn, XENUSB_RING_SIZE)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}