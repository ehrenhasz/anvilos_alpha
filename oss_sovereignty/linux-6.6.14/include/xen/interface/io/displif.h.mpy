{
  "module_name": "displif.h",
  "hash_id": "dcd1bad23f2e9f37371bc7e0813eb0fa1b71f6e7c2c878af5a946b495985ba46",
  "original_prompt": "Ingested from linux-6.6.14/include/xen/interface/io/displif.h",
  "human_readable_source": " \n \n\n#ifndef __XEN_PUBLIC_IO_DISPLIF_H__\n#define __XEN_PUBLIC_IO_DISPLIF_H__\n\n#include \"ring.h\"\n#include \"../grant_table.h\"\n\n \n#define XENDISPL_PROTOCOL_VERSION\t\"2\"\n#define XENDISPL_PROTOCOL_VERSION_INT\t 2\n\n \n\n \n\n#define XENDISPL_OP_DBUF_CREATE\t\t0x10\n#define XENDISPL_OP_DBUF_DESTROY\t0x11\n#define XENDISPL_OP_FB_ATTACH\t\t0x12\n#define XENDISPL_OP_FB_DETACH\t\t0x13\n#define XENDISPL_OP_SET_CONFIG\t\t0x14\n#define XENDISPL_OP_PG_FLIP\t\t0x15\n \n#define XENDISPL_OP_GET_EDID\t\t0x16\n\n \n#define XENDISPL_EVT_PG_FLIP\t\t0x00\n\n \n#define XENDISPL_DRIVER_NAME\t\t\"vdispl\"\n\n#define XENDISPL_LIST_SEPARATOR\t\t\",\"\n#define XENDISPL_RESOLUTION_SEPARATOR\t\"x\"\n\n#define XENDISPL_FIELD_BE_VERSIONS\t\"versions\"\n#define XENDISPL_FIELD_FE_VERSION\t\"version\"\n#define XENDISPL_FIELD_REQ_RING_REF\t\"req-ring-ref\"\n#define XENDISPL_FIELD_REQ_CHANNEL\t\"req-event-channel\"\n#define XENDISPL_FIELD_EVT_RING_REF\t\"evt-ring-ref\"\n#define XENDISPL_FIELD_EVT_CHANNEL\t\"evt-event-channel\"\n#define XENDISPL_FIELD_RESOLUTION\t\"resolution\"\n#define XENDISPL_FIELD_BE_ALLOC\t\t\"be-alloc\"\n#define XENDISPL_FIELD_UNIQUE_ID\t\"unique-id\"\n\n#define XENDISPL_EDID_BLOCK_SIZE\t128\n#define XENDISPL_EDID_BLOCK_COUNT\t256\n#define XENDISPL_EDID_MAX_SIZE\t\t(XENDISPL_EDID_BLOCK_SIZE * XENDISPL_EDID_BLOCK_COUNT)\n\n \n\n#define XENDISPL_DBUF_FLG_REQ_ALLOC\t(1 << 0)\n\nstruct xendispl_dbuf_create_req {\n\tuint64_t dbuf_cookie;\n\tuint32_t width;\n\tuint32_t height;\n\tuint32_t bpp;\n\tuint32_t buffer_sz;\n\tuint32_t flags;\n\tgrant_ref_t gref_directory;\n\tuint32_t data_ofs;\n};\n\n \n\nstruct xendispl_page_directory {\n\tgrant_ref_t gref_dir_next_page;\n\tgrant_ref_t gref[1];  \n};\n\n \n\nstruct xendispl_dbuf_destroy_req {\n\tuint64_t dbuf_cookie;\n};\n\n \n\nstruct xendispl_fb_attach_req {\n\tuint64_t dbuf_cookie;\n\tuint64_t fb_cookie;\n\tuint32_t width;\n\tuint32_t height;\n\tuint32_t pixel_format;\n};\n\n \n\nstruct xendispl_fb_detach_req {\n\tuint64_t fb_cookie;\n};\n\n \n\nstruct xendispl_set_config_req {\n\tuint64_t fb_cookie;\n\tuint32_t x;\n\tuint32_t y;\n\tuint32_t width;\n\tuint32_t height;\n\tuint32_t bpp;\n};\n\n \n\nstruct xendispl_page_flip_req {\n\tuint64_t fb_cookie;\n};\n\n \n\nstruct xendispl_get_edid_req {\n\tuint32_t buffer_sz;\n\tgrant_ref_t gref_directory;\n};\n\n \n\nstruct xendispl_get_edid_resp {\n\tuint32_t edid_sz;\n};\n\n \n\nstruct xendispl_pg_flip_evt {\n\tuint64_t fb_cookie;\n};\n\nstruct xendispl_req {\n\tuint16_t id;\n\tuint8_t operation;\n\tuint8_t reserved[5];\n\tunion {\n\t\tstruct xendispl_dbuf_create_req dbuf_create;\n\t\tstruct xendispl_dbuf_destroy_req dbuf_destroy;\n\t\tstruct xendispl_fb_attach_req fb_attach;\n\t\tstruct xendispl_fb_detach_req fb_detach;\n\t\tstruct xendispl_set_config_req set_config;\n\t\tstruct xendispl_page_flip_req pg_flip;\n\t\tstruct xendispl_get_edid_req get_edid;\n\t\tuint8_t reserved[56];\n\t} op;\n};\n\nstruct xendispl_resp {\n\tuint16_t id;\n\tuint8_t operation;\n\tuint8_t reserved;\n\tint32_t status;\n\tunion {\n\t\tstruct xendispl_get_edid_resp get_edid;\n\t\tuint8_t reserved1[56];\n\t} op;\n};\n\nstruct xendispl_evt {\n\tuint16_t id;\n\tuint8_t type;\n\tuint8_t reserved[5];\n\tunion {\n\t\tstruct xendispl_pg_flip_evt pg_flip;\n\t\tuint8_t reserved[56];\n\t} op;\n};\n\nDEFINE_RING_TYPES(xen_displif, struct xendispl_req, struct xendispl_resp);\n\n \n\nstruct xendispl_event_page {\n\tuint32_t in_cons;\n\tuint32_t in_prod;\n\tuint8_t reserved[56];\n};\n\n#define XENDISPL_EVENT_PAGE_SIZE XEN_PAGE_SIZE\n#define XENDISPL_IN_RING_OFFS (sizeof(struct xendispl_event_page))\n#define XENDISPL_IN_RING_SIZE (XENDISPL_EVENT_PAGE_SIZE - XENDISPL_IN_RING_OFFS)\n#define XENDISPL_IN_RING_LEN (XENDISPL_IN_RING_SIZE / sizeof(struct xendispl_evt))\n#define XENDISPL_IN_RING(page) \\\n\t((struct xendispl_evt *)((char *)(page) + XENDISPL_IN_RING_OFFS))\n#define XENDISPL_IN_RING_REF(page, idx) \\\n\t(XENDISPL_IN_RING((page))[(idx) % XENDISPL_IN_RING_LEN])\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}