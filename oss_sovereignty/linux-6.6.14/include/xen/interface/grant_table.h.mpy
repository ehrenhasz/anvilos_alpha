{
  "module_name": "grant_table.h",
  "hash_id": "69ad49c37da3f23964828787cb7dc36c2caddfeeda2bc75568381e4611af5a97",
  "original_prompt": "Ingested from linux-6.6.14/include/xen/interface/grant_table.h",
  "human_readable_source": " \n \n\n#ifndef __XEN_PUBLIC_GRANT_TABLE_H__\n#define __XEN_PUBLIC_GRANT_TABLE_H__\n\n#include <xen/interface/xen.h>\n\n \n\n \n\n \ntypedef uint32_t grant_ref_t;\n\n \n\n \nstruct grant_entry_v1 {\n     \n    uint16_t flags;\n     \n    domid_t  domid;\n     \n    uint32_t frame;\n};\n\n \n#define GNTTAB_NR_RESERVED_ENTRIES     8\n#define GNTTAB_RESERVED_CONSOLE        0\n#define GNTTAB_RESERVED_XENSTORE       1\n\n \n#define GTF_invalid         (0U<<0)\n#define GTF_permit_access   (1U<<0)\n#define GTF_accept_transfer (2U<<0)\n#define GTF_transitive      (3U<<0)\n#define GTF_type_mask       (3U<<0)\n\n \n#define _GTF_readonly       (2)\n#define GTF_readonly        (1U<<_GTF_readonly)\n#define _GTF_reading        (3)\n#define GTF_reading         (1U<<_GTF_reading)\n#define _GTF_writing        (4)\n#define GTF_writing         (1U<<_GTF_writing)\n#define _GTF_PWT            (5)\n#define GTF_PWT             (1U<<_GTF_PWT)\n#define _GTF_PCD            (6)\n#define GTF_PCD             (1U<<_GTF_PCD)\n#define _GTF_PAT            (7)\n#define GTF_PAT             (1U<<_GTF_PAT)\n#define _GTF_sub_page       (8)\n#define GTF_sub_page        (1U<<_GTF_sub_page)\n\n \n#define _GTF_transfer_committed (2)\n#define GTF_transfer_committed  (1U<<_GTF_transfer_committed)\n#define _GTF_transfer_completed (3)\n#define GTF_transfer_completed  (1U<<_GTF_transfer_completed)\n\n \n\n \nstruct grant_entry_header {\n    uint16_t flags;\n    domid_t  domid;\n};\n\n \nunion grant_entry_v2 {\n    struct grant_entry_header hdr;\n\n     \n    struct {\n        struct grant_entry_header hdr;\n        uint32_t pad0;\n        uint64_t frame;\n    } full_page;\n\n     \n    struct {\n        struct grant_entry_header hdr;\n        uint16_t page_off;\n        uint16_t length;\n        uint64_t frame;\n    } sub_page;\n\n     \n    struct {\n        struct grant_entry_header hdr;\n        domid_t trans_domid;\n        uint16_t pad0;\n        grant_ref_t gref;\n    } transitive;\n\n    uint32_t __spacer[4];  \n};\n\ntypedef uint16_t grant_status_t;\n\n \n\n#define GNTTABOP_map_grant_ref        0\n#define GNTTABOP_unmap_grant_ref      1\n#define GNTTABOP_setup_table          2\n#define GNTTABOP_dump_table           3\n#define GNTTABOP_transfer             4\n#define GNTTABOP_copy                 5\n#define GNTTABOP_query_size           6\n#define GNTTABOP_unmap_and_replace    7\n#define GNTTABOP_set_version          8\n#define GNTTABOP_get_status_frames    9\n#define GNTTABOP_get_version          10\n#define GNTTABOP_swap_grant_ref\t      11\n#define GNTTABOP_cache_flush\t      12\n \n\n \ntypedef uint32_t grant_handle_t;\n\n \nstruct gnttab_map_grant_ref {\n     \n    uint64_t host_addr;\n    uint32_t flags;                \n    grant_ref_t ref;\n    domid_t  dom;\n     \n    int16_t  status;               \n    grant_handle_t handle;\n    uint64_t dev_bus_addr;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_map_grant_ref);\n\n \nstruct gnttab_unmap_grant_ref {\n     \n    uint64_t host_addr;\n    uint64_t dev_bus_addr;\n    grant_handle_t handle;\n     \n    int16_t  status;               \n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_unmap_grant_ref);\n\n \nstruct gnttab_setup_table {\n     \n    domid_t  dom;\n    uint32_t nr_frames;\n     \n    int16_t  status;               \n    GUEST_HANDLE(xen_pfn_t) frame_list;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_setup_table);\n\n \nstruct gnttab_dump_table {\n     \n    domid_t dom;\n     \n    int16_t status;                \n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_dump_table);\n\n \nstruct gnttab_transfer {\n     \n    xen_pfn_t     mfn;\n    domid_t       domid;\n    grant_ref_t   ref;\n     \n    int16_t       status;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_transfer);\n\n \n\n#define _GNTCOPY_source_gref      (0)\n#define GNTCOPY_source_gref       (1<<_GNTCOPY_source_gref)\n#define _GNTCOPY_dest_gref        (1)\n#define GNTCOPY_dest_gref         (1<<_GNTCOPY_dest_gref)\n\nstruct gnttab_copy {\n     \n    struct gnttab_copy_ptr {\n        union {\n            grant_ref_t ref;\n            xen_pfn_t   gmfn;\n        } u;\n        domid_t  domid;\n        uint16_t offset;\n    } source, dest;\n    uint16_t      len;\n    uint16_t      flags;           \n     \n    int16_t       status;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_copy);\n\n \nstruct gnttab_query_size {\n     \n    domid_t  dom;\n     \n    uint32_t nr_frames;\n    uint32_t max_nr_frames;\n    int16_t  status;               \n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_query_size);\n\n \nstruct gnttab_unmap_and_replace {\n     \n    uint64_t host_addr;\n    uint64_t new_addr;\n    grant_handle_t handle;\n     \n    int16_t  status;               \n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_unmap_and_replace);\n\n \nstruct gnttab_set_version {\n     \n    uint32_t version;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_set_version);\n\n \nstruct gnttab_get_status_frames {\n     \n    uint32_t nr_frames;\n    domid_t  dom;\n     \n    int16_t  status;               \n    GUEST_HANDLE(uint64_t) frame_list;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_get_status_frames);\n\n \nstruct gnttab_get_version {\n     \n    domid_t dom;\n    uint16_t pad;\n     \n    uint32_t version;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_get_version);\n\n \nstruct gnttab_swap_grant_ref {\n     \n    grant_ref_t ref_a;\n    grant_ref_t ref_b;\n     \n    int16_t status;              \n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_swap_grant_ref);\n\n \nstruct gnttab_cache_flush {\n    union {\n        uint64_t dev_bus_addr;\n        grant_ref_t ref;\n    } a;\n    uint16_t offset;  \n    uint16_t length;  \n#define GNTTAB_CACHE_CLEAN          (1u<<0)\n#define GNTTAB_CACHE_INVAL          (1u<<1)\n#define GNTTAB_CACHE_SOURCE_GREF    (1u<<31)\n    uint32_t op;\n};\nDEFINE_GUEST_HANDLE_STRUCT(gnttab_cache_flush);\n\n \n  \n#define _GNTMAP_device_map      (0)\n#define GNTMAP_device_map       (1<<_GNTMAP_device_map)\n  \n#define _GNTMAP_host_map        (1)\n#define GNTMAP_host_map         (1<<_GNTMAP_host_map)\n  \n#define _GNTMAP_readonly        (2)\n#define GNTMAP_readonly         (1<<_GNTMAP_readonly)\n  \n#define _GNTMAP_application_map (3)\n#define GNTMAP_application_map  (1<<_GNTMAP_application_map)\n\n  \n#define _GNTMAP_contains_pte    (4)\n#define GNTMAP_contains_pte     (1<<_GNTMAP_contains_pte)\n\n \n#define _GNTMAP_guest_avail0    (16)\n#define GNTMAP_guest_avail_mask ((uint32_t)~0 << _GNTMAP_guest_avail0)\n\n \n#define GNTST_okay             (0)   \n#define GNTST_general_error    (-1)  \n#define GNTST_bad_domain       (-2)  \n#define GNTST_bad_gntref       (-3)  \n#define GNTST_bad_handle       (-4)  \n#define GNTST_bad_virt_addr    (-5)  \n#define GNTST_bad_dev_addr     (-6)  \n#define GNTST_no_device_space  (-7)  \n#define GNTST_permission_denied (-8)  \n#define GNTST_bad_page         (-9)  \n#define GNTST_bad_copy_arg    (-10)  \n#define GNTST_address_too_big (-11)  \n#define GNTST_eagain          (-12)  \n#define GNTST_no_space        (-13)  \n\n#define GNTTABOP_error_msgs {                   \\\n    \"okay\",                                     \\\n    \"undefined error\",                          \\\n    \"unrecognised domain id\",                   \\\n    \"invalid grant reference\",                  \\\n    \"invalid mapping handle\",                   \\\n    \"invalid virtual address\",                  \\\n    \"invalid device address\",                   \\\n    \"no spare translation slot in the I/O MMU\", \\\n    \"permission denied\",                        \\\n    \"bad page\",                                 \\\n    \"copy arguments cross page boundary\",       \\\n    \"page address size too large\",              \\\n    \"operation not done; try again\",            \\\n    \"out of space\",                             \\\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}