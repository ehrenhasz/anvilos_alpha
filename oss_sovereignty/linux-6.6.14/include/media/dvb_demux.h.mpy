{
  "module_name": "dvb_demux.h",
  "hash_id": "34677ab486a6d8d7199f88294dde9f29737381204accbb0d8c1e5bc0b9b5015f",
  "original_prompt": "Ingested from linux-6.6.14/include/media/dvb_demux.h",
  "human_readable_source": " \n\n#ifndef _DVB_DEMUX_H_\n#define _DVB_DEMUX_H_\n\n#include <linux/time.h>\n#include <linux/timer.h>\n#include <linux/spinlock.h>\n#include <linux/mutex.h>\n\n#include <media/demux.h>\n\n \nenum dvb_dmx_filter_type {\n\tDMX_TYPE_TS,\n\tDMX_TYPE_SEC,\n};\n\n \nenum dvb_dmx_state {\n\tDMX_STATE_FREE,\n\tDMX_STATE_ALLOCATED,\n\tDMX_STATE_READY,\n\tDMX_STATE_GO,\n};\n\n#define DVB_DEMUX_MASK_MAX 18\n\n#define MAX_PID 0x1fff\n\n#define SPEED_PKTS_INTERVAL 50000\n\n \n\nstruct dvb_demux_filter {\n\tstruct dmx_section_filter filter;\n\tu8 maskandmode[DMX_MAX_FILTER_SIZE];\n\tu8 maskandnotmode[DMX_MAX_FILTER_SIZE];\n\tbool doneq;\n\n\tstruct dvb_demux_filter *next;\n\tstruct dvb_demux_feed *feed;\n\tint index;\n\tenum dvb_dmx_state state;\n\tenum dvb_dmx_filter_type type;\n\n\t \n\tu16 hw_handle;\n};\n\n \nstruct dvb_demux_feed {\n\tunion {\n\t\tstruct dmx_ts_feed ts;\n\t\tstruct dmx_section_feed sec;\n\t} feed;\n\n\tunion {\n\t\tdmx_ts_cb ts;\n\t\tdmx_section_cb sec;\n\t} cb;\n\n\tstruct dvb_demux *demux;\n\tvoid *priv;\n\tenum dvb_dmx_filter_type type;\n\tenum dvb_dmx_state state;\n\tu16 pid;\n\n\tktime_t timeout;\n\tstruct dvb_demux_filter *filter;\n\n\tu32 buffer_flags;\n\n\tenum ts_filter_type ts_type;\n\tenum dmx_ts_pes pes_type;\n\n\tint cc;\n\tbool pusi_seen;\n\n\tu16 peslen;\n\n\tstruct list_head list_head;\n\tunsigned int index;\n};\n\n \nstruct dvb_demux {\n\tstruct dmx_demux dmx;\n\tvoid *priv;\n\tint filternum;\n\tint feednum;\n\tint (*start_feed)(struct dvb_demux_feed *feed);\n\tint (*stop_feed)(struct dvb_demux_feed *feed);\n\tint (*write_to_decoder)(struct dvb_demux_feed *feed,\n\t\t\t\t const u8 *buf, size_t len);\n\tu32 (*check_crc32)(struct dvb_demux_feed *feed,\n\t\t\t    const u8 *buf, size_t len);\n\tvoid (*memcopy)(struct dvb_demux_feed *feed, u8 *dst,\n\t\t\t const u8 *src, size_t len);\n\n\tint users;\n#define MAX_DVB_DEMUX_USERS 10\n\tstruct dvb_demux_filter *filter;\n\tstruct dvb_demux_feed *feed;\n\n\tstruct list_head frontend_list;\n\n\tstruct dvb_demux_feed *pesfilter[DMX_PES_OTHER];\n\tu16 pids[DMX_PES_OTHER];\n\n#define DMX_MAX_PID 0x2000\n\tstruct list_head feed_list;\n\tu8 tsbuf[204];\n\tint tsbufp;\n\n\tstruct mutex mutex;\n\tspinlock_t lock;\n\n\tuint8_t *cnt_storage;  \n\n\tktime_t speed_last_time;  \n\tuint32_t speed_pkts_cnt;  \n\n\t \n\tint playing;\n\tint recording;\n};\n\n \nint dvb_dmx_init(struct dvb_demux *demux);\n\n \nvoid dvb_dmx_release(struct dvb_demux *demux);\n\n \nvoid dvb_dmx_swfilter_packets(struct dvb_demux *demux, const u8 *buf,\n\t\t\t      size_t count);\n\n \nvoid dvb_dmx_swfilter(struct dvb_demux *demux, const u8 *buf, size_t count);\n\n \nvoid dvb_dmx_swfilter_204(struct dvb_demux *demux, const u8 *buf,\n\t\t\t  size_t count);\n\n \nvoid dvb_dmx_swfilter_raw(struct dvb_demux *demux, const u8 *buf,\n\t\t\t  size_t count);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}