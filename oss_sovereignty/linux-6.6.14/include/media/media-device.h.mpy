{
  "module_name": "media-device.h",
  "hash_id": "709f51f9e387d3f3e888de191a67217cb6bc59de5d97d26fad14de918c9bcd87",
  "original_prompt": "Ingested from linux-6.6.14/include/media/media-device.h",
  "human_readable_source": " \n \n\n#ifndef _MEDIA_DEVICE_H\n#define _MEDIA_DEVICE_H\n\n#include <linux/list.h>\n#include <linux/mutex.h>\n#include <linux/pci.h>\n#include <linux/platform_device.h>\n\n#include <media/media-devnode.h>\n#include <media/media-entity.h>\n\nstruct ida;\nstruct media_device;\n\n \nstruct media_entity_notify {\n\tstruct list_head list;\n\tvoid *notify_data;\n\tvoid (*notify)(struct media_entity *entity, void *notify_data);\n};\n\n \nstruct media_device_ops {\n\tint (*link_notify)(struct media_link *link, u32 flags,\n\t\t\t   unsigned int notification);\n\tstruct media_request *(*req_alloc)(struct media_device *mdev);\n\tvoid (*req_free)(struct media_request *req);\n\tint (*req_validate)(struct media_request *req);\n\tvoid (*req_queue)(struct media_request *req);\n};\n\n \nstruct media_device {\n\t \n\tstruct device *dev;\n\tstruct media_devnode *devnode;\n\n\tchar model[32];\n\tchar driver_name[32];\n\tchar serial[40];\n\tchar bus_info[32];\n\tu32 hw_revision;\n\n\tu64 topology_version;\n\n\tu32 id;\n\tstruct ida entity_internal_idx;\n\tint entity_internal_idx_max;\n\n\tstruct list_head entities;\n\tstruct list_head interfaces;\n\tstruct list_head pads;\n\tstruct list_head links;\n\n\t \n\tstruct list_head entity_notify;\n\n\t \n\tstruct mutex graph_mutex;\n\tstruct media_graph pm_count_walk;\n\n\tvoid *source_priv;\n\tint (*enable_source)(struct media_entity *entity,\n\t\t\t     struct media_pipeline *pipe);\n\tvoid (*disable_source)(struct media_entity *entity);\n\n\tconst struct media_device_ops *ops;\n\n\tstruct mutex req_queue_mutex;\n\tatomic_t request_id;\n};\n\n \nstruct usb_device;\n\n#ifdef CONFIG_MEDIA_CONTROLLER\n\n \n#define MEDIA_DEV_NOTIFY_PRE_LINK_CH\t0\n#define MEDIA_DEV_NOTIFY_POST_LINK_CH\t1\n\n \nvoid media_device_init(struct media_device *mdev);\n\n \nvoid media_device_cleanup(struct media_device *mdev);\n\n \nint __must_check __media_device_register(struct media_device *mdev,\n\t\t\t\t\t struct module *owner);\n\n\n \n#define media_device_register(mdev) __media_device_register(mdev, THIS_MODULE)\n\n \nvoid media_device_unregister(struct media_device *mdev);\n\n \nint __must_check media_device_register_entity(struct media_device *mdev,\n\t\t\t\t\t      struct media_entity *entity);\n\n \nvoid media_device_unregister_entity(struct media_entity *entity);\n\n \n\nvoid media_device_register_entity_notify(struct media_device *mdev,\n\t\t\t\t\tstruct media_entity_notify *nptr);\n\n \nvoid media_device_unregister_entity_notify(struct media_device *mdev,\n\t\t\t\t\tstruct media_entity_notify *nptr);\n\n \n#define media_device_for_each_entity(entity, mdev)\t\t\t\\\n\tlist_for_each_entry(entity, &(mdev)->entities, graph_obj.list)\n\n \n#define media_device_for_each_intf(intf, mdev)\t\t\t\\\n\tlist_for_each_entry(intf, &(mdev)->interfaces, graph_obj.list)\n\n \n#define media_device_for_each_pad(pad, mdev)\t\t\t\\\n\tlist_for_each_entry(pad, &(mdev)->pads, graph_obj.list)\n\n \n#define media_device_for_each_link(link, mdev)\t\t\t\\\n\tlist_for_each_entry(link, &(mdev)->links, graph_obj.list)\n\n \nvoid media_device_pci_init(struct media_device *mdev,\n\t\t\t   struct pci_dev *pci_dev,\n\t\t\t   const char *name);\n \nvoid __media_device_usb_init(struct media_device *mdev,\n\t\t\t     struct usb_device *udev,\n\t\t\t     const char *board_name,\n\t\t\t     const char *driver_name);\n\n#else\nstatic inline int media_device_register(struct media_device *mdev)\n{\n\treturn 0;\n}\nstatic inline void media_device_unregister(struct media_device *mdev)\n{\n}\nstatic inline int media_device_register_entity(struct media_device *mdev,\n\t\t\t\t\t\tstruct media_entity *entity)\n{\n\treturn 0;\n}\nstatic inline void media_device_unregister_entity(struct media_entity *entity)\n{\n}\nstatic inline void media_device_register_entity_notify(\n\t\t\t\t\tstruct media_device *mdev,\n\t\t\t\t\tstruct media_entity_notify *nptr)\n{\n}\nstatic inline void media_device_unregister_entity_notify(\n\t\t\t\t\tstruct media_device *mdev,\n\t\t\t\t\tstruct media_entity_notify *nptr)\n{\n}\n\nstatic inline void media_device_pci_init(struct media_device *mdev,\n\t\t\t\t\t struct pci_dev *pci_dev,\n\t\t\t\t\t char *name)\n{\n}\n\nstatic inline void __media_device_usb_init(struct media_device *mdev,\n\t\t\t\t\t   struct usb_device *udev,\n\t\t\t\t\t   char *board_name,\n\t\t\t\t\t   char *driver_name)\n{\n}\n\n#endif  \n\n \n#define media_device_usb_init(mdev, udev, name) \\\n\t__media_device_usb_init(mdev, udev, name, KBUILD_MODNAME)\n\n \nstatic inline void\nmedia_set_bus_info(char *bus_info, size_t bus_info_size, struct device *dev)\n{\n\tif (!dev)\n\t\tstrscpy(bus_info, \"no bus info\", bus_info_size);\n\telse if (dev_is_platform(dev))\n\t\tsnprintf(bus_info, bus_info_size, \"platform:%s\", dev_name(dev));\n\telse if (dev_is_pci(dev))\n\t\tsnprintf(bus_info, bus_info_size, \"PCI:%s\", dev_name(dev));\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}