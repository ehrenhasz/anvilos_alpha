{
  "module_name": "ipu-bridge.h",
  "hash_id": "16293a7512d01e23f23b1267b2544bb5647a67321690eac923349c94d0040e40",
  "original_prompt": "Ingested from linux-6.6.14/include/media/ipu-bridge.h",
  "human_readable_source": " \n \n#ifndef __IPU_BRIDGE_H\n#define __IPU_BRIDGE_H\n\n#include <linux/property.h>\n#include <linux/types.h>\n#include <media/v4l2-fwnode.h>\n\n#define IPU_HID\t\t\t\t\"INT343E\"\n#define IPU_MAX_LANES\t\t\t\t4\n#define IPU_MAX_PORTS\t\t\t\t4\n#define MAX_NUM_LINK_FREQS\t\t\t3\n\n \n#define IPU_SENSOR_ROTATION_NORMAL\t\t0\n#define IPU_SENSOR_ROTATION_INVERTED\t\t1\n\n#define IPU_SENSOR_CONFIG(_HID, _NR, ...)\t\\\n\t(const struct ipu_sensor_config) {\t\\\n\t\t.hid = _HID,\t\t\t\\\n\t\t.nr_link_freqs = _NR,\t\t\\\n\t\t.link_freqs = { __VA_ARGS__ }\t\\\n\t}\n\n#define NODE_SENSOR(_HID, _PROPS)\t\t\\\n\t(const struct software_node) {\t\t\\\n\t\t.name = _HID,\t\t\t\\\n\t\t.properties = _PROPS,\t\t\\\n\t}\n\n#define NODE_PORT(_PORT, _SENSOR_NODE)\t\t\\\n\t(const struct software_node) {\t\t\\\n\t\t.name = _PORT,\t\t\t\\\n\t\t.parent = _SENSOR_NODE,\t\t\\\n\t}\n\n#define NODE_ENDPOINT(_EP, _PORT, _PROPS)\t\\\n\t(const struct software_node) {\t\t\\\n\t\t.name = _EP,\t\t\t\\\n\t\t.parent = _PORT,\t\t\\\n\t\t.properties = _PROPS,\t\t\\\n\t}\n\n#define NODE_VCM(_TYPE)\t\t\t\t\\\n\t(const struct software_node) {\t\t\\\n\t\t.name = _TYPE,\t\t\t\\\n\t}\n\nenum ipu_sensor_swnodes {\n\tSWNODE_SENSOR_HID,\n\tSWNODE_SENSOR_PORT,\n\tSWNODE_SENSOR_ENDPOINT,\n\tSWNODE_IPU_PORT,\n\tSWNODE_IPU_ENDPOINT,\n\t \n\tSWNODE_IVSC_HID,\n\tSWNODE_IVSC_SENSOR_PORT,\n\tSWNODE_IVSC_SENSOR_ENDPOINT,\n\tSWNODE_IVSC_IPU_PORT,\n\tSWNODE_IVSC_IPU_ENDPOINT,\n\tSWNODE_VCM,\n\tSWNODE_COUNT\n};\n\n \nstruct ipu_sensor_ssdb {\n\tu8 version;\n\tu8 sku;\n\tu8 guid_csi2[16];\n\tu8 devfunction;\n\tu8 bus;\n\tu32 dphylinkenfuses;\n\tu32 clockdiv;\n\tu8 link;\n\tu8 lanes;\n\tu32 csiparams[10];\n\tu32 maxlanespeed;\n\tu8 sensorcalibfileidx;\n\tu8 sensorcalibfileidxInMBZ[3];\n\tu8 romtype;\n\tu8 vcmtype;\n\tu8 platforminfo;\n\tu8 platformsubinfo;\n\tu8 flash;\n\tu8 privacyled;\n\tu8 degree;\n\tu8 mipilinkdefined;\n\tu32 mclkspeed;\n\tu8 controllogicid;\n\tu8 reserved1[3];\n\tu8 mclkport;\n\tu8 reserved2[13];\n} __packed;\n\nstruct ipu_property_names {\n\tchar clock_frequency[16];\n\tchar rotation[9];\n\tchar orientation[12];\n\tchar bus_type[9];\n\tchar data_lanes[11];\n\tchar remote_endpoint[16];\n\tchar link_frequencies[17];\n};\n\nstruct ipu_node_names {\n\tchar port[7];\n\tchar ivsc_sensor_port[7];\n\tchar ivsc_ipu_port[7];\n\tchar endpoint[11];\n\tchar remote_port[9];\n\tchar vcm[16];\n};\n\nstruct ipu_sensor_config {\n\tconst char *hid;\n\tconst u8 nr_link_freqs;\n\tconst u64 link_freqs[MAX_NUM_LINK_FREQS];\n};\n\nstruct ipu_sensor {\n\t \n\tchar name[ACPI_ID_LEN + 4];\n\tstruct acpi_device *adev;\n\n\tstruct device *csi_dev;\n\tstruct acpi_device *ivsc_adev;\n\tchar ivsc_name[ACPI_ID_LEN + 4];\n\n\t \n\tconst struct software_node *group[SWNODE_COUNT + 1];\n\tstruct software_node swnodes[SWNODE_COUNT];\n\tstruct ipu_node_names node_names;\n\n\tu8 link;\n\tu8 lanes;\n\tu32 mclkspeed;\n\tu32 rotation;\n\tenum v4l2_fwnode_orientation orientation;\n\tconst char *vcm_type;\n\n\tstruct ipu_property_names prop_names;\n\tstruct property_entry ep_properties[5];\n\tstruct property_entry dev_properties[5];\n\tstruct property_entry ipu_properties[3];\n\tstruct property_entry ivsc_properties[1];\n\tstruct property_entry ivsc_sensor_ep_properties[4];\n\tstruct property_entry ivsc_ipu_ep_properties[4];\n\n\tstruct software_node_ref_args local_ref[1];\n\tstruct software_node_ref_args remote_ref[1];\n\tstruct software_node_ref_args vcm_ref[1];\n\tstruct software_node_ref_args ivsc_sensor_ref[1];\n\tstruct software_node_ref_args ivsc_ipu_ref[1];\n};\n\ntypedef int (*ipu_parse_sensor_fwnode_t)(struct acpi_device *adev,\n\t\t\t\t\t struct ipu_sensor *sensor);\n\nstruct ipu_bridge {\n\tstruct device *dev;\n\tipu_parse_sensor_fwnode_t parse_sensor_fwnode;\n\tchar ipu_node_name[ACPI_ID_LEN];\n\tstruct software_node ipu_hid_node;\n\tu32 data_lanes[4];\n\tunsigned int n_sensors;\n\tstruct ipu_sensor sensors[IPU_MAX_PORTS];\n};\n\n#if IS_ENABLED(CONFIG_IPU_BRIDGE)\nint ipu_bridge_init(struct device *dev,\n\t\t    ipu_parse_sensor_fwnode_t parse_sensor_fwnode);\nint ipu_bridge_parse_ssdb(struct acpi_device *adev, struct ipu_sensor *sensor);\nint ipu_bridge_instantiate_vcm(struct device *sensor);\n#else\n \n#define ipu_bridge_init(dev, parse_sensor_fwnode)\t(0)\nstatic inline int ipu_bridge_instantiate_vcm(struct device *s) { return 0; }\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}