{
  "module_name": "dvb_vb2.h",
  "hash_id": "0a12024d22362fe88f64870cedc30133aaba34cbde7e5bc48e891c956f2c7924",
  "original_prompt": "Ingested from linux-6.6.14/include/media/dvb_vb2.h",
  "human_readable_source": " \n\n#ifndef _DVB_VB2_H\n#define _DVB_VB2_H\n\n#include <linux/mutex.h>\n#include <linux/poll.h>\n#include <linux/dvb/dmx.h>\n#include <media/videobuf2-core.h>\n#include <media/videobuf2-dma-contig.h>\n#include <media/videobuf2-vmalloc.h>\n\n \nenum dvb_buf_type {\n\tDVB_BUF_TYPE_CAPTURE        = 1,\n};\n\n \nenum dvb_vb2_states {\n\tDVB_VB2_STATE_NONE\t= 0x0,\n\tDVB_VB2_STATE_INIT\t= 0x1,\n\tDVB_VB2_STATE_REQBUFS\t= 0x2,\n\tDVB_VB2_STATE_STREAMON\t= 0x4,\n};\n\n#define DVB_VB2_NAME_MAX (20)\n\n \nstruct dvb_buffer {\n\tstruct vb2_buffer\tvb;\n\tstruct list_head\tlist;\n};\n\n \nstruct dvb_vb2_ctx {\n\tstruct vb2_queue\tvb_q;\n\tstruct mutex\t\tmutex;\n\tspinlock_t\t\tslock;\n\tstruct list_head\tdvb_q;\n\tstruct dvb_buffer\t*buf;\n\tint\toffset;\n\tint\tremain;\n\tint\tstate;\n\tint\tbuf_siz;\n\tint\tbuf_cnt;\n\tint\tnonblocking;\n\n\tenum dmx_buffer_flags flags;\n\tu32\tcount;\n\n\tchar\tname[DVB_VB2_NAME_MAX + 1];\n};\n\n#ifndef CONFIG_DVB_MMAP\nstatic inline int dvb_vb2_init(struct dvb_vb2_ctx *ctx,\n\t\t\t       const char *name, int non_blocking)\n{\n\treturn 0;\n};\nstatic inline int dvb_vb2_release(struct dvb_vb2_ctx *ctx)\n{\n\treturn 0;\n};\n#define dvb_vb2_is_streaming(ctx) (0)\n#define dvb_vb2_fill_buffer(ctx, file, wait, flags) (0)\n\nstatic inline __poll_t dvb_vb2_poll(struct dvb_vb2_ctx *ctx,\n\t\t\t\t    struct file *file,\n\t\t\t\t    poll_table *wait)\n{\n\treturn 0;\n}\n#else\n \nint dvb_vb2_init(struct dvb_vb2_ctx *ctx, const char *name, int non_blocking);\n\n \nint dvb_vb2_release(struct dvb_vb2_ctx *ctx);\n\n \nint dvb_vb2_is_streaming(struct dvb_vb2_ctx *ctx);\n\n \nint dvb_vb2_fill_buffer(struct dvb_vb2_ctx *ctx,\n\t\t\tconst unsigned char *src, int len,\n\t\t\tenum dmx_buffer_flags *buffer_flags);\n\n \n__poll_t dvb_vb2_poll(struct dvb_vb2_ctx *ctx, struct file *file,\n\t\t      poll_table *wait);\n#endif\n\n \nint dvb_vb2_stream_on(struct dvb_vb2_ctx *ctx);\n \nint dvb_vb2_stream_off(struct dvb_vb2_ctx *ctx);\n\n \nint dvb_vb2_reqbufs(struct dvb_vb2_ctx *ctx, struct dmx_requestbuffers *req);\n\n \nint dvb_vb2_querybuf(struct dvb_vb2_ctx *ctx, struct dmx_buffer *b);\n\n \nint dvb_vb2_expbuf(struct dvb_vb2_ctx *ctx, struct dmx_exportbuffer *exp);\n\n \nint dvb_vb2_qbuf(struct dvb_vb2_ctx *ctx, struct dmx_buffer *b);\n\n \nint dvb_vb2_dqbuf(struct dvb_vb2_ctx *ctx, struct dmx_buffer *b);\n\n \nint dvb_vb2_mmap(struct dvb_vb2_ctx *ctx, struct vm_area_struct *vma);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}