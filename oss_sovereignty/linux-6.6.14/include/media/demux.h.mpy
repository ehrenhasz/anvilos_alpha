{
  "module_name": "demux.h",
  "hash_id": "3fe9d7e3b8cdc853ffaa11b7b2fcaf24ee3574c78be068fc8eb77190fc4baa6e",
  "original_prompt": "Ingested from linux-6.6.14/include/media/demux.h",
  "human_readable_source": " \n\n#ifndef __DEMUX_H\n#define __DEMUX_H\n\n#include <linux/types.h>\n#include <linux/errno.h>\n#include <linux/list.h>\n#include <linux/time.h>\n#include <linux/dvb/dmx.h>\n\n \n\n \n\n#ifndef DMX_MAX_FILTER_SIZE\n#define DMX_MAX_FILTER_SIZE 18\n#endif\n\n \n\n#ifndef DMX_MAX_SECTION_SIZE\n#define DMX_MAX_SECTION_SIZE 4096\n#endif\n#ifndef DMX_MAX_SECFEED_SIZE\n#define DMX_MAX_SECFEED_SIZE (DMX_MAX_SECTION_SIZE + 188)\n#endif\n\n \n\n \nenum ts_filter_type {\n\tTS_PACKET = 1,\n\tTS_PAYLOAD_ONLY = 2,\n\tTS_DECODER = 4,\n\tTS_DEMUX = 8,\n};\n\n \nstruct dmx_ts_feed {\n\tint is_filtering;\n\tstruct dmx_demux *parent;\n\tvoid *priv;\n\tint (*set)(struct dmx_ts_feed *feed,\n\t\t   u16 pid,\n\t\t   int type,\n\t\t   enum dmx_ts_pes pes_type,\n\t\t   ktime_t timeout);\n\tint (*start_filtering)(struct dmx_ts_feed *feed);\n\tint (*stop_filtering)(struct dmx_ts_feed *feed);\n};\n\n \n\n \nstruct dmx_section_filter {\n\tu8 filter_value[DMX_MAX_FILTER_SIZE];\n\tu8 filter_mask[DMX_MAX_FILTER_SIZE];\n\tu8 filter_mode[DMX_MAX_FILTER_SIZE];\n\tstruct dmx_section_feed *parent;\n\n\tvoid *priv;\n};\n\n \nstruct dmx_section_feed {\n\tint is_filtering;\n\tstruct dmx_demux *parent;\n\tvoid *priv;\n\n\tint check_crc;\n\n\t \n\tu32 crc_val;\n\n\tu8 *secbuf;\n\tu8 secbuf_base[DMX_MAX_SECFEED_SIZE];\n\tu16 secbufp, seclen, tsfeedp;\n\n\t \n\tint (*set)(struct dmx_section_feed *feed,\n\t\t   u16 pid,\n\t\t   int check_crc);\n\tint (*allocate_filter)(struct dmx_section_feed *feed,\n\t\t\t       struct dmx_section_filter **filter);\n\tint (*release_filter)(struct dmx_section_feed *feed,\n\t\t\t      struct dmx_section_filter *filter);\n\tint (*start_filtering)(struct dmx_section_feed *feed);\n\tint (*stop_filtering)(struct dmx_section_feed *feed);\n};\n\n \ntypedef int (*dmx_ts_cb)(const u8 *buffer1,\n\t\t\t size_t buffer1_length,\n\t\t\t const u8 *buffer2,\n\t\t\t size_t buffer2_length,\n\t\t\t struct dmx_ts_feed *source,\n\t\t\t u32 *buffer_flags);\n\n \ntypedef int (*dmx_section_cb)(const u8 *buffer1,\n\t\t\t      size_t buffer1_len,\n\t\t\t      const u8 *buffer2,\n\t\t\t      size_t buffer2_len,\n\t\t\t      struct dmx_section_filter *source,\n\t\t\t      u32 *buffer_flags);\n\n \n\n \nenum dmx_frontend_source {\n\tDMX_MEMORY_FE,\n\tDMX_FRONTEND_0,\n};\n\n \nstruct dmx_frontend {\n\tstruct list_head connectivity_list;\n\tenum dmx_frontend_source source;\n};\n\n \n\n \nenum dmx_demux_caps {\n\tDMX_TS_FILTERING = 1,\n\tDMX_SECTION_FILTERING = 4,\n\tDMX_MEMORY_BASED_FILTERING = 8,\n};\n\n \n\n \n#define DMX_FE_ENTRY(list) \\\n\tlist_entry(list, struct dmx_frontend, connectivity_list)\n\n \nstruct dmx_demux {\n\tenum dmx_demux_caps capabilities;\n\tstruct dmx_frontend *frontend;\n\tvoid *priv;\n\tint (*open)(struct dmx_demux *demux);\n\tint (*close)(struct dmx_demux *demux);\n\tint (*write)(struct dmx_demux *demux, const char __user *buf,\n\t\t     size_t count);\n\tint (*allocate_ts_feed)(struct dmx_demux *demux,\n\t\t\t\tstruct dmx_ts_feed **feed,\n\t\t\t\tdmx_ts_cb callback);\n\tint (*release_ts_feed)(struct dmx_demux *demux,\n\t\t\t       struct dmx_ts_feed *feed);\n\tint (*allocate_section_feed)(struct dmx_demux *demux,\n\t\t\t\t     struct dmx_section_feed **feed,\n\t\t\t\t     dmx_section_cb callback);\n\tint (*release_section_feed)(struct dmx_demux *demux,\n\t\t\t\t    struct dmx_section_feed *feed);\n\tint (*add_frontend)(struct dmx_demux *demux,\n\t\t\t    struct dmx_frontend *frontend);\n\tint (*remove_frontend)(struct dmx_demux *demux,\n\t\t\t       struct dmx_frontend *frontend);\n\tstruct list_head *(*get_frontends)(struct dmx_demux *demux);\n\tint (*connect_frontend)(struct dmx_demux *demux,\n\t\t\t\tstruct dmx_frontend *frontend);\n\tint (*disconnect_frontend)(struct dmx_demux *demux);\n\n\tint (*get_pes_pids)(struct dmx_demux *demux, u16 *pids);\n\n\t \n\n\t \n\tint (*get_stc)(struct dmx_demux *demux, unsigned int num,\n\t\t       u64 *stc, unsigned int *base);\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}