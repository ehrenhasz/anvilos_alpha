{
  "module_name": "dvb_ringbuffer.h",
  "hash_id": "08fe4b80d7f40da0de6c17bf8e36edea15c9823ab22710363269e3f591687163",
  "original_prompt": "Ingested from linux-6.6.14/include/media/dvb_ringbuffer.h",
  "human_readable_source": " \n\n#ifndef _DVB_RINGBUFFER_H_\n#define _DVB_RINGBUFFER_H_\n\n#include <linux/spinlock.h>\n#include <linux/wait.h>\n\n \nstruct dvb_ringbuffer {\n\tu8               *data;\n\tssize_t           size;\n\tssize_t           pread;\n\tssize_t           pwrite;\n\tint               error;\n\n\twait_queue_head_t queue;\n\tspinlock_t        lock;\n};\n\n#define DVB_RINGBUFFER_PKTHDRSIZE 3\n\n \nextern void dvb_ringbuffer_init(struct dvb_ringbuffer *rbuf, void *data,\n\t\t\t\tsize_t len);\n\n \nextern int dvb_ringbuffer_empty(struct dvb_ringbuffer *rbuf);\n\n \nextern ssize_t dvb_ringbuffer_free(struct dvb_ringbuffer *rbuf);\n\n \nextern ssize_t dvb_ringbuffer_avail(struct dvb_ringbuffer *rbuf);\n\n \nextern void dvb_ringbuffer_reset(struct dvb_ringbuffer *rbuf);\n\n \n\n \nextern void dvb_ringbuffer_flush(struct dvb_ringbuffer *rbuf);\n\n \nextern void dvb_ringbuffer_flush_spinlock_wakeup(struct dvb_ringbuffer *rbuf);\n\n \n#define DVB_RINGBUFFER_PEEK(rbuf, offs)\t\\\n\t\t\t((rbuf)->data[((rbuf)->pread + (offs)) % (rbuf)->size])\n\n \n#define DVB_RINGBUFFER_SKIP(rbuf, num)\t{\\\n\t\t\t(rbuf)->pread = ((rbuf)->pread + (num)) % (rbuf)->size;\\\n}\n\n \nextern ssize_t dvb_ringbuffer_read_user(struct dvb_ringbuffer *rbuf,\n\t\t\t\t   u8 __user *buf, size_t len);\n\n \nextern void dvb_ringbuffer_read(struct dvb_ringbuffer *rbuf,\n\t\t\t\t   u8 *buf, size_t len);\n\n \n\n \n#define DVB_RINGBUFFER_WRITE_BYTE(rbuf, byte)\t\\\n\t\t\t{ (rbuf)->data[(rbuf)->pwrite] = (byte); \\\n\t\t\t(rbuf)->pwrite = ((rbuf)->pwrite + 1) % (rbuf)->size; }\n\n \nextern ssize_t dvb_ringbuffer_write(struct dvb_ringbuffer *rbuf, const u8 *buf,\n\t\t\t\t    size_t len);\n\n \nextern ssize_t dvb_ringbuffer_write_user(struct dvb_ringbuffer *rbuf,\n\t\t\t\t\t const u8 __user *buf, size_t len);\n\n \nextern ssize_t dvb_ringbuffer_pkt_write(struct dvb_ringbuffer *rbuf, u8 *buf,\n\t\t\t\t\tsize_t len);\n\n \nextern ssize_t dvb_ringbuffer_pkt_read_user(struct dvb_ringbuffer *rbuf,\n\t\t\t\t\t    size_t idx,\n\t\t\t\t\t    int offset, u8 __user *buf,\n\t\t\t\t\t    size_t len);\n\n \nextern ssize_t dvb_ringbuffer_pkt_read(struct dvb_ringbuffer *rbuf, size_t idx,\n\t\t\t\t       int offset, u8 *buf, size_t len);\n\n \nextern void dvb_ringbuffer_pkt_dispose(struct dvb_ringbuffer *rbuf, size_t idx);\n\n \nextern ssize_t dvb_ringbuffer_pkt_next(struct dvb_ringbuffer *rbuf,\n\t\t\t\t       size_t idx, size_t *pktlen);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}