{
  "module_name": "dvb_frontend.h",
  "hash_id": "28fac3efe4a516af9424f77924781ab1fcd0145c5e952b9277b3a31a00a49965",
  "original_prompt": "Ingested from linux-6.6.14/include/media/dvb_frontend.h",
  "human_readable_source": " \n\n#ifndef _DVB_FRONTEND_H_\n#define _DVB_FRONTEND_H_\n\n#include <linux/types.h>\n#include <linux/sched.h>\n#include <linux/ioctl.h>\n#include <linux/i2c.h>\n#include <linux/module.h>\n#include <linux/errno.h>\n#include <linux/delay.h>\n#include <linux/mutex.h>\n#include <linux/slab.h>\n#include <linux/bitops.h>\n\n#include <linux/dvb/frontend.h>\n\n#include <media/dvbdev.h>\n\n \n#define MAX_DELSYS\t8\n\n \n#define kHz 1000UL\n#define MHz 1000000UL\n\n \nstruct dvb_frontend_tune_settings {\n\tint min_delay_ms;\n\tint step_size;\n\tint max_drift;\n};\n\nstruct dvb_frontend;\n\n \nstruct dvb_tuner_info {\n\tchar name[128];\n\n\tu32 frequency_min_hz;\n\tu32 frequency_max_hz;\n\tu32 frequency_step_hz;\n\n\tu32 bandwidth_min;\n\tu32 bandwidth_max;\n\tu32 bandwidth_step;\n};\n\n \nstruct analog_parameters {\n\tunsigned int frequency;\n\tunsigned int mode;\n\tunsigned int audmode;\n\tu64 std;\n};\n\n \nenum dvbfe_algo {\n\tDVBFE_ALGO_HW\t\t\t= BIT(0),\n\tDVBFE_ALGO_SW\t\t\t= BIT(1),\n\tDVBFE_ALGO_CUSTOM\t\t= BIT(2),\n\tDVBFE_ALGO_RECOVERY\t\t= BIT(31),\n};\n\n \nenum dvbfe_search {\n\tDVBFE_ALGO_SEARCH_SUCCESS\t= BIT(0),\n\tDVBFE_ALGO_SEARCH_ASLEEP\t= BIT(1),\n\tDVBFE_ALGO_SEARCH_FAILED\t= BIT(2),\n\tDVBFE_ALGO_SEARCH_INVALID\t= BIT(3),\n\tDVBFE_ALGO_SEARCH_AGAIN\t\t= BIT(4),\n\tDVBFE_ALGO_SEARCH_ERROR\t\t= BIT(31),\n};\n\n \nstruct dvb_tuner_ops {\n\n\tstruct dvb_tuner_info info;\n\n\tvoid (*release)(struct dvb_frontend *fe);\n\tint (*init)(struct dvb_frontend *fe);\n\tint (*sleep)(struct dvb_frontend *fe);\n\tint (*suspend)(struct dvb_frontend *fe);\n\tint (*resume)(struct dvb_frontend *fe);\n\n\t \n\tint (*set_params)(struct dvb_frontend *fe);\n\tint (*set_analog_params)(struct dvb_frontend *fe, struct analog_parameters *p);\n\n\tint (*set_config)(struct dvb_frontend *fe, void *priv_cfg);\n\n\tint (*get_frequency)(struct dvb_frontend *fe, u32 *frequency);\n\tint (*get_bandwidth)(struct dvb_frontend *fe, u32 *bandwidth);\n\tint (*get_if_frequency)(struct dvb_frontend *fe, u32 *frequency);\n\n#define TUNER_STATUS_LOCKED 1\n#define TUNER_STATUS_STEREO 2\n\tint (*get_status)(struct dvb_frontend *fe, u32 *status);\n\tint (*get_rf_strength)(struct dvb_frontend *fe, u16 *strength);\n\tint (*get_afc)(struct dvb_frontend *fe, s32 *afc);\n\n\t \n\tint (*calc_regs)(struct dvb_frontend *fe, u8 *buf, int buf_len);\n\n\t \n\tint (*set_frequency)(struct dvb_frontend *fe, u32 frequency);\n\tint (*set_bandwidth)(struct dvb_frontend *fe, u32 bandwidth);\n};\n\n \nstruct analog_demod_info {\n\tchar *name;\n};\n\n \nstruct analog_demod_ops {\n\n\tstruct analog_demod_info info;\n\n\tvoid (*set_params)(struct dvb_frontend *fe,\n\t\t\t   struct analog_parameters *params);\n\tint  (*has_signal)(struct dvb_frontend *fe, u16 *signal);\n\tint  (*get_afc)(struct dvb_frontend *fe, s32 *afc);\n\tvoid (*tuner_status)(struct dvb_frontend *fe);\n\tvoid (*standby)(struct dvb_frontend *fe);\n\tvoid (*release)(struct dvb_frontend *fe);\n\tint  (*i2c_gate_ctrl)(struct dvb_frontend *fe, int enable);\n\n\t \n\tint (*set_config)(struct dvb_frontend *fe, void *priv_cfg);\n};\n\nstruct dtv_frontend_properties;\n\n \nstruct dvb_frontend_internal_info {\n\tchar\tname[128];\n\tu32\tfrequency_min_hz;\n\tu32\tfrequency_max_hz;\n\tu32\tfrequency_stepsize_hz;\n\tu32\tfrequency_tolerance_hz;\n\tu32\tsymbol_rate_min;\n\tu32\tsymbol_rate_max;\n\tu32\tsymbol_rate_tolerance;\n\tenum fe_caps caps;\n};\n\n \nstruct dvb_frontend_ops {\n\tstruct dvb_frontend_internal_info info;\n\n\tu8 delsys[MAX_DELSYS];\n\n\tvoid (*detach)(struct dvb_frontend *fe);\n\tvoid (*release)(struct dvb_frontend* fe);\n\tvoid (*release_sec)(struct dvb_frontend* fe);\n\n\tint (*init)(struct dvb_frontend* fe);\n\tint (*sleep)(struct dvb_frontend* fe);\n\tint (*suspend)(struct dvb_frontend *fe);\n\tint (*resume)(struct dvb_frontend *fe);\n\n\tint (*write)(struct dvb_frontend* fe, const u8 buf[], int len);\n\n\t \n\tint (*tune)(struct dvb_frontend* fe,\n\t\t    bool re_tune,\n\t\t    unsigned int mode_flags,\n\t\t    unsigned int *delay,\n\t\t    enum fe_status *status);\n\n\t \n\tenum dvbfe_algo (*get_frontend_algo)(struct dvb_frontend *fe);\n\n\t \n\tint (*set_frontend)(struct dvb_frontend *fe);\n\tint (*get_tune_settings)(struct dvb_frontend* fe, struct dvb_frontend_tune_settings* settings);\n\n\tint (*get_frontend)(struct dvb_frontend *fe,\n\t\t\t    struct dtv_frontend_properties *props);\n\n\tint (*read_status)(struct dvb_frontend *fe, enum fe_status *status);\n\tint (*read_ber)(struct dvb_frontend* fe, u32* ber);\n\tint (*read_signal_strength)(struct dvb_frontend* fe, u16* strength);\n\tint (*read_snr)(struct dvb_frontend* fe, u16* snr);\n\tint (*read_ucblocks)(struct dvb_frontend* fe, u32* ucblocks);\n\n\tint (*diseqc_reset_overload)(struct dvb_frontend* fe);\n\tint (*diseqc_send_master_cmd)(struct dvb_frontend* fe, struct dvb_diseqc_master_cmd* cmd);\n\tint (*diseqc_recv_slave_reply)(struct dvb_frontend* fe, struct dvb_diseqc_slave_reply* reply);\n\tint (*diseqc_send_burst)(struct dvb_frontend *fe,\n\t\t\t\t enum fe_sec_mini_cmd minicmd);\n\tint (*set_tone)(struct dvb_frontend *fe, enum fe_sec_tone_mode tone);\n\tint (*set_voltage)(struct dvb_frontend *fe,\n\t\t\t   enum fe_sec_voltage voltage);\n\tint (*enable_high_lnb_voltage)(struct dvb_frontend* fe, long arg);\n\tint (*dishnetwork_send_legacy_command)(struct dvb_frontend* fe, unsigned long cmd);\n\tint (*i2c_gate_ctrl)(struct dvb_frontend* fe, int enable);\n\tint (*ts_bus_ctrl)(struct dvb_frontend* fe, int acquire);\n\tint (*set_lna)(struct dvb_frontend *);\n\n\t \n\tenum dvbfe_search (*search)(struct dvb_frontend *fe);\n\n\tstruct dvb_tuner_ops tuner_ops;\n\tstruct analog_demod_ops analog_ops;\n};\n\n#ifdef __DVB_CORE__\n#define MAX_EVENT 8\n\n \nstruct dvb_fe_events {\n\tstruct dvb_frontend_event events[MAX_EVENT];\n\tint\t\t\t  eventw;\n\tint\t\t\t  eventr;\n\tint\t\t\t  overflow;\n\twait_queue_head_t\t  wait_queue;\n\tstruct mutex\t\t  mtx;\n};\n#endif\n\n \nstruct dtv_frontend_properties {\n\tu32\t\t\tfrequency;\n\tenum fe_modulation\tmodulation;\n\n\tenum fe_sec_voltage\tvoltage;\n\tenum fe_sec_tone_mode\tsectone;\n\tenum fe_spectral_inversion inversion;\n\tenum fe_code_rate\tfec_inner;\n\tenum fe_transmit_mode\ttransmission_mode;\n\tu32\t\t\tbandwidth_hz;\t \n\tenum fe_guard_interval\tguard_interval;\n\tenum fe_hierarchy\thierarchy;\n\tu32\t\t\tsymbol_rate;\n\tenum fe_code_rate\tcode_rate_HP;\n\tenum fe_code_rate\tcode_rate_LP;\n\n\tenum fe_pilot\t\tpilot;\n\tenum fe_rolloff\t\trolloff;\n\n\tenum fe_delivery_system\tdelivery_system;\n\n\tenum fe_interleaving\tinterleaving;\n\n\t \n\tu8\t\t\tisdbt_partial_reception;\n\tu8\t\t\tisdbt_sb_mode;\n\tu8\t\t\tisdbt_sb_subchannel;\n\tu32\t\t\tisdbt_sb_segment_idx;\n\tu32\t\t\tisdbt_sb_segment_count;\n\tu8\t\t\tisdbt_layer_enabled;\n\tstruct {\n\t    u8\t\t\tsegment_count;\n\t    enum fe_code_rate\tfec;\n\t    enum fe_modulation\tmodulation;\n\t    u8\t\t\tinterleaving;\n\t} layer[3];\n\n\t \n\tu32\t\t\tstream_id;\n\n\t \n\tu32\t\t\tscrambling_sequence_index;\n\n\t \n\tu8\t\t\tatscmh_fic_ver;\n\tu8\t\t\tatscmh_parade_id;\n\tu8\t\t\tatscmh_nog;\n\tu8\t\t\tatscmh_tnog;\n\tu8\t\t\tatscmh_sgn;\n\tu8\t\t\tatscmh_prc;\n\n\tu8\t\t\tatscmh_rs_frame_mode;\n\tu8\t\t\tatscmh_rs_frame_ensemble;\n\tu8\t\t\tatscmh_rs_code_mode_pri;\n\tu8\t\t\tatscmh_rs_code_mode_sec;\n\tu8\t\t\tatscmh_sccc_block_mode;\n\tu8\t\t\tatscmh_sccc_code_mode_a;\n\tu8\t\t\tatscmh_sccc_code_mode_b;\n\tu8\t\t\tatscmh_sccc_code_mode_c;\n\tu8\t\t\tatscmh_sccc_code_mode_d;\n\n\tu32\t\t\tlna;\n\n\t \n\tstruct dtv_fe_stats\tstrength;\n\tstruct dtv_fe_stats\tcnr;\n\tstruct dtv_fe_stats\tpre_bit_error;\n\tstruct dtv_fe_stats\tpre_bit_count;\n\tstruct dtv_fe_stats\tpost_bit_error;\n\tstruct dtv_fe_stats\tpost_bit_count;\n\tstruct dtv_fe_stats\tblock_error;\n\tstruct dtv_fe_stats\tblock_count;\n};\n\n#define DVB_FE_NO_EXIT  0\n#define DVB_FE_NORMAL_EXIT      1\n#define DVB_FE_DEVICE_REMOVED   2\n#define DVB_FE_DEVICE_RESUME    3\n\n \n\nstruct dvb_frontend {\n\tstruct kref refcount;\n\tstruct dvb_frontend_ops ops;\n\tstruct dvb_adapter *dvb;\n\tvoid *demodulator_priv;\n\tvoid *tuner_priv;\n\tvoid *frontend_priv;\n\tvoid *sec_priv;\n\tvoid *analog_demod_priv;\n\tstruct dtv_frontend_properties dtv_property_cache;\n#define DVB_FRONTEND_COMPONENT_TUNER 0\n#define DVB_FRONTEND_COMPONENT_DEMOD 1\n\tint (*callback)(void *adapter_priv, int component, int cmd, int arg);\n\tint id;\n\tunsigned int exit;\n};\n\n \nint dvb_register_frontend(struct dvb_adapter *dvb,\n\t\t\t\t struct dvb_frontend *fe);\n\n \nint dvb_unregister_frontend(struct dvb_frontend *fe);\n\n \nvoid dvb_frontend_detach(struct dvb_frontend *fe);\n\n \nint dvb_frontend_suspend(struct dvb_frontend *fe);\n\n \nint dvb_frontend_resume(struct dvb_frontend *fe);\n\n \nvoid dvb_frontend_reinitialise(struct dvb_frontend *fe);\n\n \nvoid dvb_frontend_sleep_until(ktime_t *waketime, u32 add_usec);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}