{
  "module_name": "smc.h",
  "hash_id": "488f7aabd3ce27722612c7818d623ebd4dd09991c0dc14230ee3ac71273f3a2f",
  "original_prompt": "Ingested from linux-6.6.14/include/net/smc.h",
  "human_readable_source": " \n \n#ifndef _SMC_H\n#define _SMC_H\n\n#include <linux/device.h>\n#include <linux/spinlock.h>\n#include <linux/types.h>\n#include <linux/wait.h>\n#include \"linux/ism.h\"\n\nstruct sock;\n\n#define SMC_MAX_PNETID_LEN\t16\t \n\nstruct smc_hashinfo {\n\trwlock_t lock;\n\tstruct hlist_head ht;\n};\n\nint smc_hash_sk(struct sock *sk);\nvoid smc_unhash_sk(struct sock *sk);\n\n \nstruct smcd_dmb {\n\tu64 dmb_tok;\n\tu64 rgid;\n\tu32 dmb_len;\n\tu32 sba_idx;\n\tu32 vlan_valid;\n\tu32 vlan_id;\n\tvoid *cpu_addr;\n\tdma_addr_t dma_addr;\n};\n\n#define ISM_EVENT_DMB\t0\n#define ISM_EVENT_GID\t1\n#define ISM_EVENT_SWR\t2\n\n#define ISM_RESERVED_VLANID\t0x1FFF\n\n#define ISM_ERROR\t0xFFFF\n\nstruct smcd_dev;\nstruct ism_client;\n\nstruct smcd_ops {\n\tint (*query_remote_gid)(struct smcd_dev *dev, u64 rgid, u32 vid_valid,\n\t\t\t\tu32 vid);\n\tint (*register_dmb)(struct smcd_dev *dev, struct smcd_dmb *dmb,\n\t\t\t    struct ism_client *client);\n\tint (*unregister_dmb)(struct smcd_dev *dev, struct smcd_dmb *dmb);\n\tint (*add_vlan_id)(struct smcd_dev *dev, u64 vlan_id);\n\tint (*del_vlan_id)(struct smcd_dev *dev, u64 vlan_id);\n\tint (*set_vlan_required)(struct smcd_dev *dev);\n\tint (*reset_vlan_required)(struct smcd_dev *dev);\n\tint (*signal_event)(struct smcd_dev *dev, u64 rgid, u32 trigger_irq,\n\t\t\t    u32 event_code, u64 info);\n\tint (*move_data)(struct smcd_dev *dev, u64 dmb_tok, unsigned int idx,\n\t\t\t bool sf, unsigned int offset, void *data,\n\t\t\t unsigned int size);\n\tint (*supports_v2)(void);\n\tu8* (*get_system_eid)(void);\n\tu64 (*get_local_gid)(struct smcd_dev *dev);\n\tu16 (*get_chid)(struct smcd_dev *dev);\n\tstruct device* (*get_dev)(struct smcd_dev *dev);\n};\n\nstruct smcd_dev {\n\tconst struct smcd_ops *ops;\n\tvoid *priv;\n\tstruct list_head list;\n\tspinlock_t lock;\n\tstruct smc_connection **conn;\n\tstruct list_head vlan;\n\tstruct workqueue_struct *event_wq;\n\tu8 pnetid[SMC_MAX_PNETID_LEN];\n\tbool pnetid_by_user;\n\tstruct list_head lgr_list;\n\tspinlock_t lgr_lock;\n\tatomic_t lgr_cnt;\n\twait_queue_head_t lgrs_deleted;\n\tu8 going_away : 1;\n};\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}