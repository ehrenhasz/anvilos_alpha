{
  "module_name": "codel.h",
  "hash_id": "6cc6532c37fe0b31c3983eabb71cfb395064477905e406d0dad33afac4b80093",
  "original_prompt": "Ingested from linux-6.6.14/include/net/codel.h",
  "human_readable_source": "#ifndef __NET_SCHED_CODEL_H\n#define __NET_SCHED_CODEL_H\n\n \n\n#include <linux/types.h>\n#include <linux/ktime.h>\n#include <linux/skbuff.h>\n\n \n\n\n \ntypedef u32 codel_time_t;\ntypedef s32 codel_tdiff_t;\n#define CODEL_SHIFT 10\n#define MS2TIME(a) ((a * NSEC_PER_MSEC) >> CODEL_SHIFT)\n\nstatic inline codel_time_t codel_get_time(void)\n{\n\tu64 ns = ktime_get_ns();\n\n\treturn ns >> CODEL_SHIFT;\n}\n\n \n#define codel_time_after(a, b)\t\t\t\t\t\t\\\n\t(typecheck(codel_time_t, a) &&\t\t\t\t\t\\\n\t typecheck(codel_time_t, b) &&\t\t\t\t\t\\\n\t ((s32)((a) - (b)) > 0))\n#define codel_time_before(a, b) \tcodel_time_after(b, a)\n\n#define codel_time_after_eq(a, b)\t\t\t\t\t\\\n\t(typecheck(codel_time_t, a) &&\t\t\t\t\t\\\n\t typecheck(codel_time_t, b) &&\t\t\t\t\t\\\n\t ((s32)((a) - (b)) >= 0))\n#define codel_time_before_eq(a, b)\tcodel_time_after_eq(b, a)\n\nstatic inline u32 codel_time_to_us(codel_time_t val)\n{\n\tu64 valns = ((u64)val << CODEL_SHIFT);\n\n\tdo_div(valns, NSEC_PER_USEC);\n\treturn (u32)valns;\n}\n\n \nstruct codel_params {\n\tcodel_time_t\ttarget;\n\tcodel_time_t\tce_threshold;\n\tcodel_time_t\tinterval;\n\tu32\t\tmtu;\n\tbool\t\tecn;\n\tu8\t\tce_threshold_selector;\n\tu8\t\tce_threshold_mask;\n};\n\n \nstruct codel_vars {\n\tu32\t\tcount;\n\tu32\t\tlastcount;\n\tbool\t\tdropping;\n\tu16\t\trec_inv_sqrt;\n\tcodel_time_t\tfirst_above_time;\n\tcodel_time_t\tdrop_next;\n\tcodel_time_t\tldelay;\n};\n\n#define REC_INV_SQRT_BITS (8 * sizeof(u16))  \n \n#define REC_INV_SQRT_SHIFT (32 - REC_INV_SQRT_BITS)\n\n \nstruct codel_stats {\n\tu32\t\tmaxpacket;\n\tu32\t\tdrop_count;\n\tu32\t\tdrop_len;\n\tu32\t\tecn_mark;\n\tu32\t\tce_mark;\n};\n\n#define CODEL_DISABLED_THRESHOLD INT_MAX\n\ntypedef u32 (*codel_skb_len_t)(const struct sk_buff *skb);\ntypedef codel_time_t (*codel_skb_time_t)(const struct sk_buff *skb);\ntypedef void (*codel_skb_drop_t)(struct sk_buff *skb, void *ctx);\ntypedef struct sk_buff * (*codel_skb_dequeue_t)(struct codel_vars *vars,\n\t\t\t\t\t\tvoid *ctx);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}