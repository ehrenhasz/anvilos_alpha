{
  "module_name": "dst_ops.h",
  "hash_id": "f2ea016bfef8fa6c4b3002b1ce8b6d53ce516a90af11c221d095be3a54ff19f3",
  "original_prompt": "Ingested from linux-6.6.14/include/net/dst_ops.h",
  "human_readable_source": " \n#ifndef _NET_DST_OPS_H\n#define _NET_DST_OPS_H\n#include <linux/types.h>\n#include <linux/percpu_counter.h>\n#include <linux/cache.h>\n\nstruct dst_entry;\nstruct kmem_cachep;\nstruct net_device;\nstruct sk_buff;\nstruct sock;\nstruct net;\n\nstruct dst_ops {\n\tunsigned short\t\tfamily;\n\tunsigned int\t\tgc_thresh;\n\n\tvoid\t\t\t(*gc)(struct dst_ops *ops);\n\tstruct dst_entry *\t(*check)(struct dst_entry *, __u32 cookie);\n\tunsigned int\t\t(*default_advmss)(const struct dst_entry *);\n\tunsigned int\t\t(*mtu)(const struct dst_entry *);\n\tu32 *\t\t\t(*cow_metrics)(struct dst_entry *, unsigned long);\n\tvoid\t\t\t(*destroy)(struct dst_entry *);\n\tvoid\t\t\t(*ifdown)(struct dst_entry *,\n\t\t\t\t\t  struct net_device *dev);\n\tstruct dst_entry *\t(*negative_advice)(struct dst_entry *);\n\tvoid\t\t\t(*link_failure)(struct sk_buff *);\n\tvoid\t\t\t(*update_pmtu)(struct dst_entry *dst, struct sock *sk,\n\t\t\t\t\t       struct sk_buff *skb, u32 mtu,\n\t\t\t\t\t       bool confirm_neigh);\n\tvoid\t\t\t(*redirect)(struct dst_entry *dst, struct sock *sk,\n\t\t\t\t\t    struct sk_buff *skb);\n\tint\t\t\t(*local_out)(struct net *net, struct sock *sk, struct sk_buff *skb);\n\tstruct neighbour *\t(*neigh_lookup)(const struct dst_entry *dst,\n\t\t\t\t\t\tstruct sk_buff *skb,\n\t\t\t\t\t\tconst void *daddr);\n\tvoid\t\t\t(*confirm_neigh)(const struct dst_entry *dst,\n\t\t\t\t\t\t const void *daddr);\n\n\tstruct kmem_cache\t*kmem_cachep;\n\n\tstruct percpu_counter\tpcpuc_entries ____cacheline_aligned_in_smp;\n};\n\nstatic inline int dst_entries_get_fast(struct dst_ops *dst)\n{\n\treturn percpu_counter_read_positive(&dst->pcpuc_entries);\n}\n\nstatic inline int dst_entries_get_slow(struct dst_ops *dst)\n{\n\treturn percpu_counter_sum_positive(&dst->pcpuc_entries);\n}\n\n#define DST_PERCPU_COUNTER_BATCH 32\nstatic inline void dst_entries_add(struct dst_ops *dst, int val)\n{\n\tpercpu_counter_add_batch(&dst->pcpuc_entries, val,\n\t\t\t\t DST_PERCPU_COUNTER_BATCH);\n}\n\nstatic inline int dst_entries_init(struct dst_ops *dst)\n{\n\treturn percpu_counter_init(&dst->pcpuc_entries, 0, GFP_KERNEL);\n}\n\nstatic inline void dst_entries_destroy(struct dst_ops *dst)\n{\n\tpercpu_counter_destroy(&dst->pcpuc_entries);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}