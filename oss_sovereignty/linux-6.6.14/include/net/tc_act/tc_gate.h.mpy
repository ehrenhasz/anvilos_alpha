{
  "module_name": "tc_gate.h",
  "hash_id": "c7d0d2d3c29e25d1b40669a3a6fad5495092c36e62b010900151d88af3d154ce",
  "original_prompt": "Ingested from linux-6.6.14/include/net/tc_act/tc_gate.h",
  "human_readable_source": " \n \n\n#ifndef __NET_TC_GATE_H\n#define __NET_TC_GATE_H\n\n#include <net/act_api.h>\n#include <linux/tc_act/tc_gate.h>\n\nstruct action_gate_entry {\n\tu8\t\t\tgate_state;\n\tu32\t\t\tinterval;\n\ts32\t\t\tipv;\n\ts32\t\t\tmaxoctets;\n};\n\nstruct tcfg_gate_entry {\n\tint\t\t\tindex;\n\tu8\t\t\tgate_state;\n\tu32\t\t\tinterval;\n\ts32\t\t\tipv;\n\ts32\t\t\tmaxoctets;\n\tstruct list_head\tlist;\n};\n\nstruct tcf_gate_params {\n\ts32\t\t\ttcfg_priority;\n\tu64\t\t\ttcfg_basetime;\n\tu64\t\t\ttcfg_cycletime;\n\tu64\t\t\ttcfg_cycletime_ext;\n\tu32\t\t\ttcfg_flags;\n\ts32\t\t\ttcfg_clockid;\n\tsize_t\t\t\tnum_entries;\n\tstruct list_head\tentries;\n};\n\n#define GATE_ACT_GATE_OPEN\tBIT(0)\n#define GATE_ACT_PENDING\tBIT(1)\n\nstruct tcf_gate {\n\tstruct tc_action\tcommon;\n\tstruct tcf_gate_params\tparam;\n\tu8\t\t\tcurrent_gate_status;\n\tktime_t\t\t\tcurrent_close_time;\n\tu32\t\t\tcurrent_entry_octets;\n\ts32\t\t\tcurrent_max_octets;\n\tstruct tcfg_gate_entry\t*next_entry;\n\tstruct hrtimer\t\thitimer;\n\tenum tk_offsets\t\ttk_offset;\n};\n\n#define to_gate(a) ((struct tcf_gate *)a)\n\nstatic inline bool is_tcf_gate(const struct tc_action *a)\n{\n#ifdef CONFIG_NET_CLS_ACT\n\tif (a->ops && a->ops->id == TCA_ID_GATE)\n\t\treturn true;\n#endif\n\treturn false;\n}\n\nstatic inline s32 tcf_gate_prio(const struct tc_action *a)\n{\n\ts32 tcfg_prio;\n\n\ttcfg_prio = to_gate(a)->param.tcfg_priority;\n\n\treturn tcfg_prio;\n}\n\nstatic inline u64 tcf_gate_basetime(const struct tc_action *a)\n{\n\tu64 tcfg_basetime;\n\n\ttcfg_basetime = to_gate(a)->param.tcfg_basetime;\n\n\treturn tcfg_basetime;\n}\n\nstatic inline u64 tcf_gate_cycletime(const struct tc_action *a)\n{\n\tu64 tcfg_cycletime;\n\n\ttcfg_cycletime = to_gate(a)->param.tcfg_cycletime;\n\n\treturn tcfg_cycletime;\n}\n\nstatic inline u64 tcf_gate_cycletimeext(const struct tc_action *a)\n{\n\tu64 tcfg_cycletimeext;\n\n\ttcfg_cycletimeext = to_gate(a)->param.tcfg_cycletime_ext;\n\n\treturn tcfg_cycletimeext;\n}\n\nstatic inline u32 tcf_gate_num_entries(const struct tc_action *a)\n{\n\tu32 num_entries;\n\n\tnum_entries = to_gate(a)->param.num_entries;\n\n\treturn num_entries;\n}\n\nstatic inline struct action_gate_entry\n\t\t\t*tcf_gate_get_list(const struct tc_action *a)\n{\n\tstruct action_gate_entry *oe;\n\tstruct tcf_gate_params *p;\n\tstruct tcfg_gate_entry *entry;\n\tu32 num_entries;\n\tint i = 0;\n\n\tp = &to_gate(a)->param;\n\tnum_entries = p->num_entries;\n\n\tlist_for_each_entry(entry, &p->entries, list)\n\t\ti++;\n\n\tif (i != num_entries)\n\t\treturn NULL;\n\n\toe = kcalloc(num_entries, sizeof(*oe), GFP_ATOMIC);\n\tif (!oe)\n\t\treturn NULL;\n\n\ti = 0;\n\tlist_for_each_entry(entry, &p->entries, list) {\n\t\toe[i].gate_state = entry->gate_state;\n\t\toe[i].interval = entry->interval;\n\t\toe[i].ipv = entry->ipv;\n\t\toe[i].maxoctets = entry->maxoctets;\n\t\ti++;\n\t}\n\n\treturn oe;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}