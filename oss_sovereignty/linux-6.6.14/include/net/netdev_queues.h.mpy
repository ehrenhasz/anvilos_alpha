{
  "module_name": "netdev_queues.h",
  "hash_id": "3eeaf37ce6566d6825121934787b503b1d49b6b003b5a3e3fdcb1b16aaa3ce5c",
  "original_prompt": "Ingested from linux-6.6.14/include/net/netdev_queues.h",
  "human_readable_source": " \n#ifndef _LINUX_NET_QUEUES_H\n#define _LINUX_NET_QUEUES_H\n\n#include <linux/netdevice.h>\n\n \n\n#define netif_txq_try_stop(txq, get_desc, start_thrs)\t\t\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tint _res;\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tnetif_tx_stop_queue(txq);\t\t\t\t\\\n\t\t \t\t\t\t\t\t\t\\\n\t\tsmp_mb__after_atomic();\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\t \t\t\t\t\t\t\t\\\n\t\t_res = 0;\t\t\t\t\t\t\\\n\t\tif (unlikely(get_desc >= start_thrs)) {\t\t\t\\\n\t\t\tnetif_tx_start_queue(txq);\t\t\t\\\n\t\t\t_res = -1;\t\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\t_res;\t\t\t\t\t\t\t\\\n\t})\t\t\t\t\t\t\t\t\\\n\n \n#define netif_txq_maybe_stop(txq, get_desc, stop_thrs, start_thrs)\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tint _res;\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\t_res = 1;\t\t\t\t\t\t\\\n\t\tif (unlikely(get_desc < stop_thrs))\t\t\t\\\n\t\t\t_res = netif_txq_try_stop(txq, get_desc, start_thrs); \\\n\t\t_res;\t\t\t\t\t\t\t\\\n\t})\t\t\t\t\t\t\t\t\\\n\n \nstatic inline void\nnetdev_txq_completed_mb(struct netdev_queue *dev_queue,\n\t\t\tunsigned int pkts, unsigned int bytes)\n{\n\tif (IS_ENABLED(CONFIG_BQL))\n\t\tnetdev_tx_completed_queue(dev_queue, pkts, bytes);\n\telse if (bytes)\n\t\tsmp_mb();\n}\n\n \n#define __netif_txq_completed_wake(txq, pkts, bytes,\t\t\t\\\n\t\t\t\t   get_desc, start_thrs, down_cond)\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tint _res;\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\t \t\t\t\t\t\t\t\\\n\t\tnetdev_txq_completed_mb(txq, pkts, bytes);\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\t_res = -1;\t\t\t\t\t\t\\\n\t\tif (pkts && likely(get_desc >= start_thrs)) {\t\t\\\n\t\t\t_res = 1;\t\t\t\t\t\\\n\t\t\tif (unlikely(netif_tx_queue_stopped(txq)) &&\t\\\n\t\t\t    !(down_cond)) {\t\t\t\t\\\n\t\t\t\tnetif_tx_wake_queue(txq);\t\t\\\n\t\t\t\t_res = 0;\t\t\t\t\\\n\t\t\t}\t\t\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\t_res;\t\t\t\t\t\t\t\\\n\t})\n\n#define netif_txq_completed_wake(txq, pkts, bytes, get_desc, start_thrs) \\\n\t__netif_txq_completed_wake(txq, pkts, bytes, get_desc, start_thrs, false)\n\n \n\n#define netif_subqueue_try_stop(dev, idx, get_desc, start_thrs)\t\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tstruct netdev_queue *txq;\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\ttxq = netdev_get_tx_queue(dev, idx);\t\t\t\\\n\t\tnetif_txq_try_stop(txq, get_desc, start_thrs);\t\t\\\n\t})\n\n#define netif_subqueue_maybe_stop(dev, idx, get_desc, stop_thrs, start_thrs) \\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tstruct netdev_queue *txq;\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\ttxq = netdev_get_tx_queue(dev, idx);\t\t\t\\\n\t\tnetif_txq_maybe_stop(txq, get_desc, stop_thrs, start_thrs); \\\n\t})\n\n#define netif_subqueue_completed_wake(dev, idx, pkts, bytes,\t\t\\\n\t\t\t\t      get_desc, start_thrs)\t\t\\\n\t({\t\t\t\t\t\t\t\t\\\n\t\tstruct netdev_queue *txq;\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\ttxq = netdev_get_tx_queue(dev, idx);\t\t\t\\\n\t\tnetif_txq_completed_wake(txq, pkts, bytes,\t\t\\\n\t\t\t\t\t get_desc, start_thrs);\t\t\\\n\t})\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}