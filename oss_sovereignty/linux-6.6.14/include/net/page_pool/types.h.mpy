{
  "module_name": "types.h",
  "hash_id": "375c0e730052448172d61fd742a230fc2c6c71a52eafb1eb2628c83429013855",
  "original_prompt": "Ingested from linux-6.6.14/include/net/page_pool/types.h",
  "human_readable_source": " \n\n#ifndef _NET_PAGE_POOL_TYPES_H\n#define _NET_PAGE_POOL_TYPES_H\n\n#include <linux/dma-direction.h>\n#include <linux/ptr_ring.h>\n\n#define PP_FLAG_DMA_MAP\t\tBIT(0)  \n#define PP_FLAG_DMA_SYNC_DEV\tBIT(1)  \n#define PP_FLAG_PAGE_FRAG\tBIT(2)  \n#define PP_FLAG_ALL\t\t(PP_FLAG_DMA_MAP |\\\n\t\t\t\t PP_FLAG_DMA_SYNC_DEV |\\\n\t\t\t\t PP_FLAG_PAGE_FRAG)\n\n \n#define PP_ALLOC_CACHE_SIZE\t128\n#define PP_ALLOC_CACHE_REFILL\t64\nstruct pp_alloc_cache {\n\tu32 count;\n\tstruct page *cache[PP_ALLOC_CACHE_SIZE];\n};\n\n \nstruct page_pool_params {\n\tunsigned int\tflags;\n\tunsigned int\torder;\n\tunsigned int\tpool_size;\n\tint\t\tnid;\n\tstruct device\t*dev;\n\tstruct napi_struct *napi;\n\tenum dma_data_direction dma_dir;\n\tunsigned int\tmax_len;\n\tunsigned int\toffset;\n \n\tvoid (*init_callback)(struct page *page, void *arg);\n\tvoid *init_arg;\n};\n\n#ifdef CONFIG_PAGE_POOL_STATS\n \nstruct page_pool_alloc_stats {\n\tu64 fast;\n\tu64 slow;\n\tu64 slow_high_order;\n\tu64 empty;\n\tu64 refill;\n\tu64 waive;\n};\n\n \nstruct page_pool_recycle_stats {\n\tu64 cached;\n\tu64 cache_full;\n\tu64 ring;\n\tu64 ring_full;\n\tu64 released_refcnt;\n};\n\n \nstruct page_pool_stats {\n\tstruct page_pool_alloc_stats alloc_stats;\n\tstruct page_pool_recycle_stats recycle_stats;\n};\n#endif\n\nstruct page_pool {\n\tstruct page_pool_params p;\n\n\tlong frag_users;\n\tstruct page *frag_page;\n\tunsigned int frag_offset;\n\tu32 pages_state_hold_cnt;\n\n\tstruct delayed_work release_dw;\n\tvoid (*disconnect)(void *pool);\n\tunsigned long defer_start;\n\tunsigned long defer_warn;\n\n#ifdef CONFIG_PAGE_POOL_STATS\n\t \n\tstruct page_pool_alloc_stats alloc_stats;\n#endif\n\tu32 xdp_mem_id;\n\n\t \n\tstruct pp_alloc_cache alloc ____cacheline_aligned_in_smp;\n\n\t \n\tstruct ptr_ring ring;\n\n#ifdef CONFIG_PAGE_POOL_STATS\n\t \n\tstruct page_pool_recycle_stats __percpu *recycle_stats;\n#endif\n\tatomic_t pages_state_release_cnt;\n\n\t \n\trefcount_t user_cnt;\n\n\tu64 destroy_cnt;\n};\n\nstruct page *page_pool_alloc_pages(struct page_pool *pool, gfp_t gfp);\nstruct page *page_pool_alloc_frag(struct page_pool *pool, unsigned int *offset,\n\t\t\t\t  unsigned int size, gfp_t gfp);\nstruct page_pool *page_pool_create(const struct page_pool_params *params);\n\nstruct xdp_mem_info;\n\n#ifdef CONFIG_PAGE_POOL\nvoid page_pool_unlink_napi(struct page_pool *pool);\nvoid page_pool_destroy(struct page_pool *pool);\nvoid page_pool_use_xdp_mem(struct page_pool *pool, void (*disconnect)(void *),\n\t\t\t   struct xdp_mem_info *mem);\nvoid page_pool_put_page_bulk(struct page_pool *pool, void **data,\n\t\t\t     int count);\n#else\nstatic inline void page_pool_unlink_napi(struct page_pool *pool)\n{\n}\n\nstatic inline void page_pool_destroy(struct page_pool *pool)\n{\n}\n\nstatic inline void page_pool_use_xdp_mem(struct page_pool *pool,\n\t\t\t\t\t void (*disconnect)(void *),\n\t\t\t\t\t struct xdp_mem_info *mem)\n{\n}\n\nstatic inline void page_pool_put_page_bulk(struct page_pool *pool, void **data,\n\t\t\t\t\t   int count)\n{\n}\n#endif\n\nvoid page_pool_put_defragged_page(struct page_pool *pool, struct page *page,\n\t\t\t\t  unsigned int dma_sync_size,\n\t\t\t\t  bool allow_direct);\n\nstatic inline bool is_page_pool_compiled_in(void)\n{\n#ifdef CONFIG_PAGE_POOL\n\treturn true;\n#else\n\treturn false;\n#endif\n}\n\n \nvoid page_pool_update_nid(struct page_pool *pool, int new_nid);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}