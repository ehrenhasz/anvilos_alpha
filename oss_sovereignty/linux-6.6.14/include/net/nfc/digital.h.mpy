{
  "module_name": "digital.h",
  "hash_id": "d379cbce3f5a4f9db450cad27e352c98ec57bad0b79c680918a9679272b7e093",
  "original_prompt": "Ingested from linux-6.6.14/include/net/nfc/digital.h",
  "human_readable_source": " \n \n\n#ifndef __NFC_DIGITAL_H\n#define __NFC_DIGITAL_H\n\n#include <linux/skbuff.h>\n#include <net/nfc/nfc.h>\n\n \nenum {\n\tNFC_DIGITAL_CONFIG_RF_TECH = 0,\n\tNFC_DIGITAL_CONFIG_FRAMING,\n};\n\n \nenum {\n\tNFC_DIGITAL_RF_TECH_106A = 0,\n\tNFC_DIGITAL_RF_TECH_212F,\n\tNFC_DIGITAL_RF_TECH_424F,\n\tNFC_DIGITAL_RF_TECH_ISO15693,\n\tNFC_DIGITAL_RF_TECH_106B,\n\n\tNFC_DIGITAL_RF_TECH_LAST,\n};\n\n \nenum {\n\tNFC_DIGITAL_FRAMING_NFCA_SHORT = 0,\n\tNFC_DIGITAL_FRAMING_NFCA_STANDARD,\n\tNFC_DIGITAL_FRAMING_NFCA_STANDARD_WITH_CRC_A,\n\tNFC_DIGITAL_FRAMING_NFCA_ANTICOL_COMPLETE,\n\n\tNFC_DIGITAL_FRAMING_NFCA_T1T,\n\tNFC_DIGITAL_FRAMING_NFCA_T2T,\n\tNFC_DIGITAL_FRAMING_NFCA_T4T,\n\tNFC_DIGITAL_FRAMING_NFCA_NFC_DEP,\n\n\tNFC_DIGITAL_FRAMING_NFCF,\n\tNFC_DIGITAL_FRAMING_NFCF_T3T,\n\tNFC_DIGITAL_FRAMING_NFCF_NFC_DEP,\n\tNFC_DIGITAL_FRAMING_NFC_DEP_ACTIVATED,\n\n\tNFC_DIGITAL_FRAMING_ISO15693_INVENTORY,\n\tNFC_DIGITAL_FRAMING_ISO15693_T5T,\n\n\tNFC_DIGITAL_FRAMING_NFCB,\n\tNFC_DIGITAL_FRAMING_NFCB_T4T,\n\n\tNFC_DIGITAL_FRAMING_LAST,\n};\n\n#define DIGITAL_MDAA_NFCID1_SIZE 3\n\nstruct digital_tg_mdaa_params {\n\tu16 sens_res;\n\tu8 nfcid1[DIGITAL_MDAA_NFCID1_SIZE];\n\tu8 sel_res;\n\n\tu8 nfcid2[NFC_NFCID2_MAXSIZE];\n\tu16 sc;\n};\n\nstruct nfc_digital_dev;\n\n \ntypedef void (*nfc_digital_cmd_complete_t)(struct nfc_digital_dev *ddev,\n\t\t\t\t\t   void *arg, struct sk_buff *resp);\n\n \nstruct nfc_digital_ops {\n\tint (*in_configure_hw)(struct nfc_digital_dev *ddev, int type,\n\t\t\t       int param);\n\tint (*in_send_cmd)(struct nfc_digital_dev *ddev, struct sk_buff *skb,\n\t\t\t   u16 timeout, nfc_digital_cmd_complete_t cb,\n\t\t\t   void *arg);\n\n\tint (*tg_configure_hw)(struct nfc_digital_dev *ddev, int type,\n\t\t\t       int param);\n\tint (*tg_send_cmd)(struct nfc_digital_dev *ddev, struct sk_buff *skb,\n\t\t\t   u16 timeout, nfc_digital_cmd_complete_t cb,\n\t\t\t   void *arg);\n\tint (*tg_listen)(struct nfc_digital_dev *ddev, u16 timeout,\n\t\t\t nfc_digital_cmd_complete_t cb, void *arg);\n\tint (*tg_listen_mdaa)(struct nfc_digital_dev *ddev,\n\t\t\t      struct digital_tg_mdaa_params *mdaa_params,\n\t\t\t      u16 timeout, nfc_digital_cmd_complete_t cb,\n\t\t\t      void *arg);\n\tint (*tg_listen_md)(struct nfc_digital_dev *ddev, u16 timeout,\n\t\t\t    nfc_digital_cmd_complete_t cb, void *arg);\n\tint (*tg_get_rf_tech)(struct nfc_digital_dev *ddev, u8 *rf_tech);\n\n\tint (*switch_rf)(struct nfc_digital_dev *ddev, bool on);\n\tvoid (*abort_cmd)(struct nfc_digital_dev *ddev);\n};\n\n#define NFC_DIGITAL_POLL_MODE_COUNT_MAX\t6  \n\ntypedef int (*digital_poll_t)(struct nfc_digital_dev *ddev, u8 rf_tech);\n\nstruct digital_poll_tech {\n\tu8 rf_tech;\n\tdigital_poll_t poll_func;\n};\n\n \n#define NFC_DIGITAL_DRV_CAPS_IN_CRC\t0x0001\n#define NFC_DIGITAL_DRV_CAPS_TG_CRC\t0x0002\n\nstruct nfc_digital_dev {\n\tstruct nfc_dev *nfc_dev;\n\tconst struct nfc_digital_ops *ops;\n\n\tu32 protocols;\n\n\tint tx_headroom;\n\tint tx_tailroom;\n\n\tu32 driver_capabilities;\n\tvoid *driver_data;\n\n\tstruct digital_poll_tech poll_techs[NFC_DIGITAL_POLL_MODE_COUNT_MAX];\n\tu8 poll_tech_count;\n\tu8 poll_tech_index;\n\tstruct mutex poll_lock;\n\n\tstruct work_struct cmd_work;\n\tstruct work_struct cmd_complete_work;\n\tstruct list_head cmd_queue;\n\tstruct mutex cmd_lock;\n\n\tstruct delayed_work poll_work;\n\n\tu8 curr_protocol;\n\tu8 curr_rf_tech;\n\tu8 curr_nfc_dep_pni;\n\tu8 did;\n\tu16 dep_rwt;\n\n\tu8 local_payload_max;\n\tu8 remote_payload_max;\n\n\tstruct sk_buff *chaining_skb;\n\tstruct digital_data_exch *data_exch;\n\n\tint atn_count;\n\tint nack_count;\n\n\tstruct sk_buff *saved_skb;\n\n\tu16 target_fsc;\n\n\tint (*skb_check_crc)(struct sk_buff *skb);\n\tvoid (*skb_add_crc)(struct sk_buff *skb);\n};\n\nstruct nfc_digital_dev *nfc_digital_allocate_device(const struct nfc_digital_ops *ops,\n\t\t\t\t\t\t    __u32 supported_protocols,\n\t\t\t\t\t\t    __u32 driver_capabilities,\n\t\t\t\t\t\t    int tx_headroom,\n\t\t\t\t\t\t    int tx_tailroom);\nvoid nfc_digital_free_device(struct nfc_digital_dev *ndev);\nint nfc_digital_register_device(struct nfc_digital_dev *ndev);\nvoid nfc_digital_unregister_device(struct nfc_digital_dev *ndev);\n\nstatic inline void nfc_digital_set_parent_dev(struct nfc_digital_dev *ndev,\n\t\t\t\t\t      struct device *dev)\n{\n\tnfc_set_parent_dev(ndev->nfc_dev, dev);\n}\n\nstatic inline void nfc_digital_set_drvdata(struct nfc_digital_dev *dev,\n\t\t\t\t\t   void *data)\n{\n\tdev->driver_data = data;\n}\n\nstatic inline void *nfc_digital_get_drvdata(struct nfc_digital_dev *dev)\n{\n\treturn dev->driver_data;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}