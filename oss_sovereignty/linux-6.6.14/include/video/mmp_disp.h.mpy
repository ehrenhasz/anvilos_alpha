{
  "module_name": "mmp_disp.h",
  "hash_id": "d95808141641dd3fd947480829d1446753b5a54e88a831c28fa963408ff1f0a8",
  "original_prompt": "Ingested from linux-6.6.14/include/video/mmp_disp.h",
  "human_readable_source": " \n \n\n#ifndef _MMP_DISP_H_\n#define _MMP_DISP_H_\n#include <linux/kthread.h>\n\nenum {\n\tPIXFMT_UYVY = 0,\n\tPIXFMT_VYUY,\n\tPIXFMT_YUYV,\n\tPIXFMT_YUV422P,\n\tPIXFMT_YVU422P,\n\tPIXFMT_YUV420P,\n\tPIXFMT_YVU420P,\n\tPIXFMT_RGB565 = 0x100,\n\tPIXFMT_BGR565,\n\tPIXFMT_RGB1555,\n\tPIXFMT_BGR1555,\n\tPIXFMT_RGB888PACK,\n\tPIXFMT_BGR888PACK,\n\tPIXFMT_RGB888UNPACK,\n\tPIXFMT_BGR888UNPACK,\n\tPIXFMT_RGBA888,\n\tPIXFMT_BGRA888,\n\tPIXFMT_RGB666,  \n\tPIXFMT_PSEUDOCOLOR = 0x200,\n};\n\nstatic inline int pixfmt_to_stride(int pix_fmt)\n{\n\tswitch (pix_fmt) {\n\tcase PIXFMT_RGB565:\n\tcase PIXFMT_BGR565:\n\tcase PIXFMT_RGB1555:\n\tcase PIXFMT_BGR1555:\n\tcase PIXFMT_UYVY:\n\tcase PIXFMT_VYUY:\n\tcase PIXFMT_YUYV:\n\t\treturn 2;\n\tcase PIXFMT_RGB888UNPACK:\n\tcase PIXFMT_BGR888UNPACK:\n\tcase PIXFMT_RGBA888:\n\tcase PIXFMT_BGRA888:\n\t\treturn 4;\n\tcase PIXFMT_RGB888PACK:\n\tcase PIXFMT_BGR888PACK:\n\t\treturn 3;\n\tcase PIXFMT_YUV422P:\n\tcase PIXFMT_YVU422P:\n\tcase PIXFMT_YUV420P:\n\tcase PIXFMT_YVU420P:\n\tcase PIXFMT_PSEUDOCOLOR:\n\t\treturn 1;\n\tdefault:\n\t\treturn 0;\n\t}\n}\n\n \n \nstruct mmp_win {\n\t \n\tu16\txsrc;\n\tu16\tysrc;\n\tu16\txdst;\n\tu16\tydst;\n\tu16\txpos;\n\tu16\typos;\n\tu16\tleft_crop;\n\tu16\tright_crop;\n\tu16\tup_crop;\n\tu16\tbottom_crop;\n\tint\tpix_fmt;\n\t \n\tu32\tpitch[3];\n};\n\nstruct mmp_addr {\n\t \n\tu32\tphys[6];\n};\n\n \nstruct mmp_mode {\n\tconst char *name;\n\tu32 refresh;\n\tu32 xres;\n\tu32 yres;\n\tu32 left_margin;\n\tu32 right_margin;\n\tu32 upper_margin;\n\tu32 lower_margin;\n\tu32 hsync_len;\n\tu32 vsync_len;\n\tu32 hsync_invert;\n\tu32 vsync_invert;\n\tu32 invert_pixclock;\n\tu32 pixclock_freq;\n\tint pix_fmt_out;\n};\n\n \nstruct mmp_path;\nstruct mmp_overlay;\nstruct mmp_panel;\n\n \nenum {\n\tMMP_OFF = 0,\n\tMMP_ON,\n};\n\nstatic inline const char *stat_name(int stat)\n{\n\tswitch (stat) {\n\tcase MMP_OFF:\n\t\treturn \"OFF\";\n\tcase MMP_ON:\n\t\treturn \"ON\";\n\tdefault:\n\t\treturn \"UNKNOWNSTAT\";\n\t}\n}\n\nstruct mmp_overlay_ops {\n\t \n\tvoid (*set_fetch)(struct mmp_overlay *overlay, int fetch_id);\n\tvoid (*set_onoff)(struct mmp_overlay *overlay, int status);\n\tvoid (*set_win)(struct mmp_overlay *overlay, struct mmp_win *win);\n\tint (*set_addr)(struct mmp_overlay *overlay, struct mmp_addr *addr);\n};\n\n \nstruct mmp_overlay {\n\tint id;\n\tconst char *name;\n\tstruct mmp_path *path;\n\n\t \n\tint dmafetch_id;\n\tstruct mmp_addr addr;\n\tstruct mmp_win win;\n\n\t \n\tint open_count;\n\tint status;\n\tstruct mutex access_ok;\n\n\tstruct mmp_overlay_ops *ops;\n};\n\n \nenum {\n\tPANELTYPE_ACTIVE = 0,\n\tPANELTYPE_SMART,\n\tPANELTYPE_TV,\n\tPANELTYPE_DSI_CMD,\n\tPANELTYPE_DSI_VIDEO,\n};\n\nstruct mmp_panel {\n\t \n\tstruct list_head node;\n\tconst char *name;\n\t \n\tconst char *plat_path_name;\n\tstruct device *dev;\n\tint panel_type;\n\tvoid *plat_data;\n\tint (*get_modelist)(struct mmp_panel *panel,\n\t\t\tstruct mmp_mode **modelist);\n\tvoid (*set_mode)(struct mmp_panel *panel,\n\t\t\tstruct mmp_mode *mode);\n\tvoid (*set_onoff)(struct mmp_panel *panel,\n\t\t\tint status);\n};\n\nstruct mmp_path_ops {\n\tint (*check_status)(struct mmp_path *path);\n\tstruct mmp_overlay *(*get_overlay)(struct mmp_path *path,\n\t\t\tint overlay_id);\n\tint (*get_modelist)(struct mmp_path *path,\n\t\t\tstruct mmp_mode **modelist);\n\n\t \n\tvoid (*set_mode)(struct mmp_path *path, struct mmp_mode *mode);\n\tvoid (*set_onoff)(struct mmp_path *path, int status);\n\t \n};\n\n \nenum {\n\tPATH_OUT_PARALLEL,\n\tPATH_OUT_DSI,\n\tPATH_OUT_HDMI,\n};\n\n \nstruct mmp_path {\n\t \n\tstruct list_head node;\n\n\t \n\tstruct device *dev;\n\n\tint id;\n\tconst char *name;\n\tint output_type;\n\tstruct mmp_panel *panel;\n\tvoid *plat_data;\n\n\t \n\tstruct mmp_mode mode;\n\n\t \n\tint open_count;\n\tint status;\n\tstruct mutex access_ok;\n\n\tstruct mmp_path_ops ops;\n\n\t \n\tint overlay_num;\n\tstruct mmp_overlay overlays[] __counted_by(overlay_num);\n};\n\nextern struct mmp_path *mmp_get_path(const char *name);\nstatic inline void mmp_path_set_mode(struct mmp_path *path,\n\t\tstruct mmp_mode *mode)\n{\n\tif (path)\n\t\tpath->ops.set_mode(path, mode);\n}\nstatic inline void mmp_path_set_onoff(struct mmp_path *path, int status)\n{\n\tif (path)\n\t\tpath->ops.set_onoff(path, status);\n}\nstatic inline int mmp_path_get_modelist(struct mmp_path *path,\n\t\tstruct mmp_mode **modelist)\n{\n\tif (path)\n\t\treturn path->ops.get_modelist(path, modelist);\n\treturn 0;\n}\nstatic inline struct mmp_overlay *mmp_path_get_overlay(\n\t\tstruct mmp_path *path, int overlay_id)\n{\n\tif (path)\n\t\treturn path->ops.get_overlay(path, overlay_id);\n\treturn NULL;\n}\nstatic inline void mmp_overlay_set_fetch(struct mmp_overlay *overlay,\n\t\tint fetch_id)\n{\n\tif (overlay)\n\t\toverlay->ops->set_fetch(overlay, fetch_id);\n}\nstatic inline void mmp_overlay_set_onoff(struct mmp_overlay *overlay,\n\t\tint status)\n{\n\tif (overlay)\n\t\toverlay->ops->set_onoff(overlay, status);\n}\nstatic inline void mmp_overlay_set_win(struct mmp_overlay *overlay,\n\t\tstruct mmp_win *win)\n{\n\tif (overlay)\n\t\toverlay->ops->set_win(overlay, win);\n}\nstatic inline int mmp_overlay_set_addr(struct mmp_overlay *overlay,\n\t\tstruct mmp_addr *addr)\n{\n\tif (overlay)\n\t\treturn overlay->ops->set_addr(overlay, addr);\n\treturn 0;\n}\n\n \nstruct mmp_path_info {\n\t \n\tconst char *name;\n\tstruct device *dev;\n\tint id;\n\tint output_type;\n\tint overlay_num;\n\tvoid (*set_mode)(struct mmp_path *path, struct mmp_mode *mode);\n\tvoid (*set_onoff)(struct mmp_path *path, int status);\n\tstruct mmp_overlay_ops *overlay_ops;\n\tvoid *plat_data;\n};\n\nextern struct mmp_path *mmp_register_path(\n\t\tstruct mmp_path_info *info);\nextern void mmp_unregister_path(struct mmp_path *path);\nextern void mmp_register_panel(struct mmp_panel *panel);\nextern void mmp_unregister_panel(struct mmp_panel *panel);\n\n \n \nstruct mmp_buffer_driver_mach_info {\n\tconst char\t*name;\n\tconst char\t*path_name;\n\tint\toverlay_id;\n\tint\tdmafetch_id;\n\tint\tdefault_pixfmt;\n};\n\n \nstruct mmp_mach_path_config {\n\tconst char *name;\n\tint overlay_num;\n\tint output_type;\n\tu32 path_config;\n\tu32 link_config;\n\tu32 dsi_rbswap;\n};\n\nstruct mmp_mach_plat_info {\n\tconst char *name;\n\tconst char *clk_name;\n\tint path_num;\n\tstruct mmp_mach_path_config *paths;\n};\n\n \nstruct mmp_mach_panel_info {\n\tconst char *name;\n\tvoid (*plat_set_onoff)(int status);\n\tconst char *plat_path_name;\n};\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}