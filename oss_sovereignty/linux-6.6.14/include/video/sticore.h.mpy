{
  "module_name": "sticore.h",
  "hash_id": "042c4b8cb2c971f0561b2f777e029de3844db1fa30b3c9d85ec80f85ec0e6181",
  "original_prompt": "Ingested from linux-6.6.14/include/video/sticore.h",
  "human_readable_source": " \n#ifndef STICORE_H\n#define STICORE_H\n\nstruct fb_info;\n\n \n\n#define MAX_STI_ROMS 4\t\t \n\n#define STI_REGION_MAX 8\t \n#define STI_DEV_NAME_LENGTH 32\n#define STI_MONITOR_MAX 256\n\n#define STI_FONT_HPROMAN8 1\n#define STI_FONT_KANA8 2\n\n#define ALT_CODE_TYPE_UNKNOWN 0x00\t \n#define ALT_CODE_TYPE_PA_RISC_64 0x01\n\n \n\n#include <asm/io.h>\n\n#define STI_WAIT 1\n\n#define STI_PTR(p)\t( virt_to_phys(p) )\n\n#define sti_onscreen_x(sti) (sti->glob_cfg->onscreen_x)\n#define sti_onscreen_y(sti) (sti->glob_cfg->onscreen_y)\n\n \n#define sti_font_x(sti) (PTR_STI(sti->font)->width)\n#define sti_font_y(sti) (PTR_STI(sti->font)->height)\n\n#ifdef CONFIG_64BIT\n#define STI_LOWMEM\t(GFP_KERNEL | GFP_DMA)\n#else\n#define STI_LOWMEM\t(GFP_KERNEL)\n#endif\n\n\n \n\ntypedef union region {\n\tstruct {\n\t\tu32 offset\t: 14;\t \n\t\tu32 sys_only\t: 1;\t \n\t\tu32 cache\t: 1;\t \n\t\tu32 btlb\t: 1;\t \n\t\tu32 last\t: 1;\t \n\t\tu32 length\t: 14;\t \n\t} region_desc;\n\n\tu32 region;\t\t\t \n} region_t;\n\n#define REGION_OFFSET_TO_PHYS( rt, hpa ) \\\n\t(((rt).region_desc.offset << 12) + (hpa))\n\nstruct sti_glob_cfg_ext {\n\t u8 curr_mon;\t\t\t \n\t u8 friendly_boot;\t\t \n\ts16 power;\t\t\t \n\ts32 freq_ref;\t\t\t \n\tu32 *sti_mem_addr;\t\t \n\tu32 *future_ptr;\t\t \n};\n\nstruct sti_glob_cfg {\n\ts32 text_planes;\t\t \n\ts16 onscreen_x;\t\t\t \n\ts16 onscreen_y;\t\t\t \n\ts16 offscreen_x;\t\t \n\ts16 offscreen_y;\t\t \n\ts16 total_x;\t\t\t \n\ts16 total_y;\t\t\t \n\tu32 *region_ptrs[STI_REGION_MAX];  \n\ts32 reent_lvl;\t\t\t \n\tu32 *save_addr;\t\t\t \n\tu32 *ext_ptr;\t\t\t \n};\n\n\n \n\nstruct sti_init_flags {\n\tu32 wait : 1;\t\t \n\tu32 reset : 1;\t\t \n\tu32 text : 1;\t\t \n\tu32 nontext : 1;\t \n\tu32 clear : 1;\t\t \n\tu32 cmap_blk : 1;\t \n\tu32 enable_be_timer : 1;  \n\tu32 enable_be_int : 1;\t \n\tu32 no_chg_tx : 1;\t \n\tu32 no_chg_ntx : 1;\t \n\tu32 no_chg_bet : 1;\t \n\tu32 no_chg_bei : 1;\t \n\tu32 init_cmap_tx : 1;\t \n\tu32 cmt_chg : 1;\t \n\tu32 retain_ie : 1;\t \n\tu32 caller_bootrom : 1;\t \n\tu32 caller_kernel : 1;\t \n\tu32 caller_other : 1;\t \n\tu32 pad\t: 14;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_init_inptr_ext {\n\tu8  config_mon_type;\t \n\tu8  pad[1];\t\t \n\tu16 inflight_data;\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_init_inptr {\n\ts32 text_planes;\t \n\tu32 *ext_ptr;\t\t \n};\n\n\nstruct sti_init_outptr {\n\ts32 errno;\t\t \n\ts32 text_planes;\t \n\tu32 *future_ptr;\t \n};\n\n\n\n \n\nstruct sti_conf_flags {\n\tu32 wait : 1;\t\t \n\tu32 pad : 31;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_conf_inptr {\n\tu32 *future_ptr;\t \n};\n\nstruct sti_conf_outptr_ext {\n\tu32 crt_config[3];\t \n\tu32 crt_hdw[3];\n\tu32 *future_ptr;\n};\n\nstruct sti_conf_outptr {\n\ts32 errno;\t\t \n\ts16 onscreen_x;\t\t \n\ts16 onscreen_y;\t\t \n\ts16 offscreen_x;\t \n\ts16 offscreen_y;\t \n\ts16 total_x;\t\t \n\ts16 total_y;\t\t \n\ts32 bits_per_pixel;\t \n\ts32 bits_used;\t\t \n\ts32 planes;\t\t \n\t u8 dev_name[STI_DEV_NAME_LENGTH];  \n\tu32 attributes;\t\t \n\tu32 *ext_ptr;\t\t \n};\n\nstruct sti_rom {\n\t u8 type[4];\n\t u8 res004;\n\t u8 num_mons;\n\t u8 revno[2];\n\tu32 graphics_id[2];\n\n\tu32 font_start;\n\tu32 statesize;\n\tu32 last_addr;\n\tu32 region_list;\n\n\tu16 reentsize;\n\tu16 maxtime;\n\tu32 mon_tbl_addr;\n\tu32 user_data_addr;\n\tu32 sti_mem_req;\n\n\tu32 user_data_size;\n\tu16 power;\n\t u8 bus_support;\n\t u8 ext_bus_support;\n\t u8 alt_code_type;\n\t u8 ext_dd_struct[3];\n\tu32 cfb_addr;\n\n\tu32 init_graph;\n\tu32 state_mgmt;\n\tu32 font_unpmv;\n\tu32 block_move;\n\tu32 self_test;\n\tu32 excep_hdlr;\n\tu32 inq_conf;\n\tu32 set_cm_entry;\n\tu32 dma_ctrl;\n\t u8 res040[7 * 4];\n\n\tu32 init_graph_addr;\n\tu32 state_mgmt_addr;\n\tu32 font_unp_addr;\n\tu32 block_move_addr;\n\tu32 self_test_addr;\n\tu32 excep_hdlr_addr;\n\tu32 inq_conf_addr;\n\tu32 set_cm_entry_addr;\n\tu32 image_unpack_addr;\n\tu32 pa_risx_addrs[7];\n};\n\nstruct sti_rom_font {\n\tu16 first_char;\n\tu16 last_char;\n\t u8 width;\n\t u8 height;\n\t u8 font_type;\t\t \n\t u8 bytes_per_char;\n\ts32 next_font;\t\t \n\t u8 underline_height;\n\t u8 underline_pos;\n\t u8 res008[2];\n};\n\n \n\nstruct sti_cooked_font {\n\tstruct sti_rom_font *raw;\t \n\tvoid *raw_ptr;\t\t\t \n\tstruct sti_cooked_font *next_font;\n\tint height, width;\n\tint refcount;\n\tu32 crc;\n};\n\nstruct sti_cooked_rom {\n        struct sti_rom *raw;\n\tstruct sti_cooked_font *font_start;\n};\n\n \n\nstruct sti_font_inptr {\n\tu32 *font_start_addr;\t \n\ts16 index;\t\t \n\tu8 fg_color;\t\t \n\tu8 bg_color;\t\t \n\ts16 dest_x;\t\t \n\ts16 dest_y;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_font_flags {\n\tu32 wait : 1;\t\t \n\tu32 non_text : 1;\t \n\tu32 pad : 30;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_font_outptr {\n\ts32 errno;\t\t \n\tu32 *future_ptr;\t \n};\n\n \n\nstruct sti_blkmv_flags {\n\tu32 wait : 1;\t\t \n\tu32 color : 1;\t\t \n\tu32 clear : 1;\t\t \n\tu32 non_text : 1;\t \n\tu32 pad : 28;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_blkmv_inptr {\n\tu8 fg_color;\t\t \n\tu8 bg_color;\t\t \n\ts16 src_x;\t\t \n\ts16 src_y;\t\t \n\ts16 dest_x;\t\t \n\ts16 dest_y;\t\t \n\ts16 width;\t\t \n\ts16 height;\t\t \n\tu32 *future_ptr;\t \n};\n\nstruct sti_blkmv_outptr {\n\ts32 errno;\t\t \n\tu32 *future_ptr;\t \n};\n\n\n \n\nstruct sti_all_data {\n\tstruct sti_glob_cfg glob_cfg;\n\tstruct sti_glob_cfg_ext glob_cfg_ext;\n\n\tstruct sti_conf_inptr\t\tinq_inptr;\n\tstruct sti_conf_outptr\t\tinq_outptr;  \n\tstruct sti_conf_outptr_ext\tinq_outptr_ext;\n\n\tstruct sti_init_inptr_ext\tinit_inptr_ext;\n\tstruct sti_init_inptr\t\tinit_inptr;\n\tstruct sti_init_outptr\t\tinit_outptr;\n\n\tstruct sti_blkmv_inptr\t\tblkmv_inptr;\n\tstruct sti_blkmv_outptr\t\tblkmv_outptr;\n\n\tstruct sti_font_inptr\t\tfont_inptr;\n\tstruct sti_font_outptr\t\tfont_outptr;\n\n\t \n\tunsigned long save_addr[1024 / sizeof(unsigned long)];\n\t    \n\tunsigned long sti_mem_addr[256 / sizeof(unsigned long)];\n\t \n};\n\n \n\nstruct sti_struct {\n\tspinlock_t lock;\n\n\t \n\tint sti_mem_request;\n\tu32 graphics_id[2];\n\n\tstruct sti_cooked_rom *rom;\n\n\tunsigned long font_unpmv;\n\tunsigned long block_move;\n\tunsigned long init_graph;\n\tunsigned long inq_conf;\n\tint do_call64;\t\t\t \n\n\t \n\tint text_planes;\n\tregion_t regions[STI_REGION_MAX];\n\tunsigned long regions_phys[STI_REGION_MAX];\n\n\tstruct sti_glob_cfg *glob_cfg;\t \n\n\tint wordmode;\n\tstruct sti_cooked_font *font;\t \n\n\tstruct pci_dev *pd;\n\n\t \n\tu8 rm_entry[16];  \n\n\t \n\tstruct fb_info *info;\n\n\t \n\tstruct sti_all_data *sti_data;\n\n\t \n\tchar pa_path[24];\n};\n\n\n \n\nstruct sti_struct *sti_get_rom(unsigned int index);  \nvoid sti_font_convert_bytemode(struct sti_struct *sti, struct sti_cooked_font *f);\n\n\n \n\nint sti_call(const struct sti_struct *sti, unsigned long func,\n\t\tconst void *flags, void *inptr, void *outptr,\n\t\tstruct sti_glob_cfg *glob_cfg);\n\n\n \n\nvoid sti_putc(struct sti_struct *sti, int c, int y, int x,\n\t\tstruct sti_cooked_font *font);\nvoid sti_set(struct sti_struct *sti, int src_y, int src_x,\n\t\tint height, int width, u8 color);\nvoid sti_clear(struct sti_struct *sti, int src_y, int src_x,\n\t\tint height, int width, int c, struct sti_cooked_font *font);\nvoid sti_bmove(struct sti_struct *sti, int src_y, int src_x,\n\t\tint dst_y, int dst_x, int height, int width,\n\t\tstruct sti_cooked_font *font);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}