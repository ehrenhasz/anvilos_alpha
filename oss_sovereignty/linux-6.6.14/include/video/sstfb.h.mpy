{
  "module_name": "sstfb.h",
  "hash_id": "7e2b95d5beee26d5698f8ffbdcfbe03b473261cfb69418874a0ddf1ac11d2dae",
  "original_prompt": "Ingested from linux-6.6.14/include/video/sstfb.h",
  "human_readable_source": " \n \n\n\n#ifndef _SSTFB_H_\n#define _SSTFB_H_\n\n \n\n#ifdef SST_DEBUG\n#  define dprintk(X...)\t\tprintk(\"sstfb: \" X)\n#  define SST_DEBUG_REG  1\n#  define SST_DEBUG_FUNC 1\n#  define SST_DEBUG_VAR  1\n#else\n#  define dprintk(X...)\t\tno_printk(X)\n#  define SST_DEBUG_REG  0\n#  define SST_DEBUG_FUNC 0\n#  define SST_DEBUG_VAR  0\n#endif\n\n#if (SST_DEBUG_REG > 0)\n#  define r_dprintk(X...)\tdprintk(X)\n#else\n#  define r_dprintk(X...)\n#endif\n#if (SST_DEBUG_REG > 1)\n#  define r_ddprintk(X...)\tdprintk(\" \" X)\n#else\n#  define r_ddprintk(X...)\n#endif\n\n#if (SST_DEBUG_FUNC > 0)\n#  define f_dprintk(X...)\tdprintk(X)\n#else\n#  define f_dprintk(X...)\n#endif\n#if (SST_DEBUG_FUNC > 1)\n#  define f_ddprintk(X...)\tdprintk(\" \" X)\n#else\n#  define f_ddprintk(X...)\tno_printk(X)\n#endif\n#if (SST_DEBUG_FUNC > 2)\n#  define f_dddprintk(X...)\tdprintk(\" \" X)\n#else\n#  define f_dddprintk(X...)\n#endif\n\n#if (SST_DEBUG_VAR > 0)\n#  define v_dprintk(X...)\tdprintk(X)\n#  define print_var(V, X...)\t\\\n   {\t\t\t\t\\\n     dprintk(X);\t\t\\\n     printk(\" :\\n\");\t\t\\\n     sst_dbg_print_var(V);\t\\\n   }\n#else\n#  define v_dprintk(X...)\n#  define print_var(X,Y...)\n#endif\n\n#define POW2(x)\t\t(1ul<<(x))\n\n \n\n \n#define PCI_INIT_ENABLE\t\t0x40\n#  define PCI_EN_INIT_WR\t  BIT(0)\n#  define PCI_EN_FIFO_WR\t  BIT(1)\n#  define PCI_REMAP_DAC\t\t  BIT(2)\n#define PCI_VCLK_ENABLE\t\t0xc0\t \n#define PCI_VCLK_DISABLE\t0xe0\n\n \n#define STATUS\t\t\t0x0000\n#  define STATUS_FBI_BUSY\t  BIT(7)\n#define FBZMODE\t\t\t0x0110\n#  define EN_CLIPPING\t\t  BIT(0)\t \n#  define EN_RGB_WRITE\t\t  BIT(9)\t \n#  define EN_ALPHA_WRITE\t  BIT(10)\n#  define ENGINE_INVERT_Y\t  BIT(17)\t \n#define LFBMODE\t\t\t0x0114\n#  define LFB_565\t\t  0\t\t \n#  define LFB_888\t\t  4\t\t \n#  define LFB_8888\t\t  5\t\t \n#  define WR_BUFF_FRONT\t\t  0\t\t \n#  define WR_BUFF_BACK\t\t  (1 << 4)\t \n#  define RD_BUFF_FRONT\t\t  0\t\t \n#  define RD_BUFF_BACK\t\t  (1 << 6)\t \n#  define EN_PXL_PIPELINE\t  BIT(8)\t \n#  define LFB_WORD_SWIZZLE_WR\t  BIT(11)\t \n#  define LFB_BYTE_SWIZZLE_WR\t  BIT(12)\t \n#  define LFB_INVERT_Y\t\t  BIT(13)\t \n#  define LFB_WORD_SWIZZLE_RD\t  BIT(15)\t \n#  define LFB_BYTE_SWIZZLE_RD\t  BIT(16)\t \n#define CLIP_LEFT_RIGHT\t\t0x0118\n#define CLIP_LOWY_HIGHY\t\t0x011c\n#define NOPCMD\t\t\t0x0120\n#define FASTFILLCMD\t\t0x0124\n#define SWAPBUFFCMD\t\t0x0128\n#define FBIINIT4\t\t0x0200\t\t \n#  define FAST_PCI_READS\t  0\t\t \n#  define SLOW_PCI_READS\t  BIT(0)\t \n#  define LFB_READ_AHEAD\t  BIT(1)\n#define BACKPORCH\t\t0x0208\n#define VIDEODIMENSIONS\t\t0x020c\n#define FBIINIT0\t\t0x0210\t\t \n#  define DIS_VGA_PASSTHROUGH\t  BIT(0)\n#  define FBI_RESET\t\t  BIT(1)\n#  define FIFO_RESET\t\t  BIT(2)\n#define FBIINIT1\t\t0x0214\t\t \n#  define VIDEO_MASK\t\t  0x8080010f\t \n#  define FAST_PCI_WRITES\t  0\t\t \n#  define SLOW_PCI_WRITES\t  BIT(1)\t \n#  define EN_LFB_READ\t\t  BIT(3)\n#  define TILES_IN_X_SHIFT\t  4\n#  define VIDEO_RESET\t\t  BIT(8)\n#  define EN_BLANKING\t\t  BIT(12)\n#  define EN_DATA_OE\t\t  BIT(13)\n#  define EN_BLANK_OE\t\t  BIT(14)\n#  define EN_HVSYNC_OE\t\t  BIT(15)\n#  define EN_DCLK_OE\t\t  BIT(16)\n#  define SEL_INPUT_VCLK_2X\t  0\t\t \n#  define SEL_INPUT_VCLK_SLAVE\t  BIT(17)\n#  define SEL_SOURCE_VCLK_SLAVE\t  0\t\t \n#  define SEL_SOURCE_VCLK_2X_DIV2 (0x01 << 20)\n#  define SEL_SOURCE_VCLK_2X_SEL  (0x02 << 20)\n#  define EN_24BPP\t\t  BIT(22)\n#  define TILES_IN_X_MSB_SHIFT\t  24\t\t \n#  define VCLK_2X_SEL_DEL_SHIFT\t  27\t\t \n#  define VCLK_DEL_SHIFT\t  29\t\t \n#define FBIINIT2\t\t0x0218\t\t \n#  define EN_FAST_RAS_READ\t  BIT(5)\n#  define EN_DRAM_OE\t\t  BIT(6)\n#  define EN_FAST_RD_AHEAD_WR\t  BIT(7)\n#  define VIDEO_OFFSET_SHIFT\t  11\t\t \n#  define SWAP_DACVSYNC\t\t  0\n#  define SWAP_DACDATA0\t\t  (1 << 9)\n#  define SWAP_FIFO_STALL\t  (2 << 9)\n#  define EN_RD_AHEAD_FIFO\t  BIT(21)\n#  define EN_DRAM_REFRESH\t  BIT(22)\n#  define DRAM_REFRESH_16\t  (0x30 << 23)\t \n#define DAC_READ\t\tFBIINIT2\t \n#define FBIINIT3\t\t0x021c\t\t \n#  define DISABLE_TEXTURE\t  BIT(6)\n#  define Y_SWAP_ORIGIN_SHIFT\t  22\t\t \n#define HSYNC\t\t\t0x0220\n#define VSYNC\t\t\t0x0224\n#define DAC_DATA\t\t0x022c\n#  define DAC_READ_CMD\t\t  BIT(11)\t \n#define FBIINIT5\t\t0x0244\t\t \n#  define FBIINIT5_MASK\t\t  0xfa40ffff     \n#  define HDOUBLESCAN\t\t  BIT(20)\n#  define VDOUBLESCAN\t\t  BIT(21)\n#  define HSYNC_HIGH \t\t  BIT(23)\n#  define VSYNC_HIGH \t\t  BIT(24)\n#  define INTERLACE\t\t  BIT(26)\n#define FBIINIT6\t\t0x0248\t\t \n#  define TILES_IN_X_LSB_SHIFT\t  30\t\t \n#define FBIINIT7\t\t0x024c\t\t \n\n#define BLTSRCBASEADDR\t\t0x02c0\t \n#define BLTDSTBASEADDR\t\t0x02c4\t \n#define BLTXYSTRIDES\t\t0x02c8\t \n#define BLTSRCCHROMARANGE\t0x02cc\t \n#define BLTDSTCHROMARANGE\t0x02d0\t \n#define BLTCLIPX\t\t0x02d4\t \n#define BLTCLIPY\t\t0x02d8\t \n#define BLTSRCXY\t\t0x02e0\t \n#define BLTDSTXY\t\t0x02e4\t \n#define BLTSIZE\t\t\t0x02e8\t \n#define BLTROP\t\t\t0x02ec\t \n#  define BLTROP_COPY\t\t  0x0cccc\n#  define BLTROP_INVERT\t\t  0x05555\n#  define BLTROP_XOR\t\t  0x06666\n#define BLTCOLOR\t\t0x02f0\t \n#define BLTCOMMAND\t\t0x02f8\t \n# define BLT_SCR2SCR_BITBLT\t  0\t   \n# define BLT_CPU2SCR_BITBLT\t  1\t   \n# define BLT_RECFILL_BITBLT\t  2\t   \n# define BLT_16BPP_FMT\t\t  2\t   \n#define BLTDATA\t\t\t0x02fc\t \n#  define LAUNCH_BITBLT\t\t  BIT(31)  \n\n \n#define DACREG_WMA\t\t0x0\t \n#define DACREG_LUT\t\t0x01\t \n#define DACREG_RMR\t\t0x02\t \n#define DACREG_RMA\t\t0x03\t \n \n#define DACREG_ADDR_I\t\tDACREG_WMA\n#define DACREG_DATA_I\t\tDACREG_RMR\n#define DACREG_RMR_I\t\t0x00\n#define DACREG_CR0_I\t\t0x01\n#  define DACREG_CR0_EN_INDEXED\t  BIT(0)\t \n#  define DACREG_CR0_8BIT\t  BIT(1)\t \n#  define DACREG_CR0_PWDOWN\t  BIT(3)\t \n#  define DACREG_CR0_16BPP\t  0x30\t\t \n#  define DACREG_CR0_24BPP\t  0x50\t\t \n#define\tDACREG_CR1_I\t\t0x05\n#define DACREG_CC_I\t\t0x06\n#  define DACREG_CC_CLKA\t  BIT(7)\t \n#  define DACREG_CC_CLKA_C\t  (2<<4)\t \n#  define DACREG_CC_CLKB\t  BIT(3)\t \n#  define DACREG_CC_CLKB_D\t  3\t\t \n#define DACREG_AC0_I\t\t0x48\t\t \n#define DACREG_AC1_I\t\t0x49\n#define DACREG_BD0_I\t\t0x6c\t\t \n#define DACREG_BD1_I\t\t0x6d\n\n \n#define DACREG_MIR_TI\t\t0x97\n#define DACREG_DIR_TI\t\t0x09\n#define DACREG_MIR_ATT\t\t0x84\n#define DACREG_DIR_ATT\t\t0x09\n \n#define DACREG_ICS_PLLWMA\t0x04\t \n#define DACREG_ICS_PLLDATA\t0x05\t \n#define DACREG_ICS_CMD\t\t0x06\t \n#  define DACREG_ICS_CMD_16BPP\t  0x50\t \n#  define DACREG_ICS_CMD_24BPP\t  0x70\t \n#  define DACREG_ICS_CMD_PWDOWN BIT(0)\t \n#define DACREG_ICS_PLLRMA\t0x07\t \n \n#define DACREG_ICS_PLL_CLK0_1_INI 0x55\t \n#define DACREG_ICS_PLL_CLK0_7_INI 0x71\t \n#define DACREG_ICS_PLL_CLK1_B_INI 0x79\t \n#define DACREG_ICS_PLL_CTRL\t0x0e\n#  define DACREG_ICS_CLK0\t  BIT(5)\n#  define DACREG_ICS_CLK0_0\t  0\n#  define DACREG_ICS_CLK1_A\t  0\t \n\n \n#define FBIINIT0_DEFAULT DIS_VGA_PASSTHROUGH\n\n#define FBIINIT1_DEFAULT \t\\\n\t(\t\t\t\\\n\t  FAST_PCI_WRITES\t\\\n \t\\\n\t| VIDEO_RESET\t\t\\\n\t| 10 << TILES_IN_X_SHIFT\\\n\t| SEL_SOURCE_VCLK_2X_SEL\\\n\t| EN_LFB_READ\t\t\\\n\t)\n\n#define FBIINIT2_DEFAULT\t\\\n\t(\t\t\t\\\n\t SWAP_DACVSYNC\t\t\\\n\t| EN_DRAM_OE\t\t\\\n\t| DRAM_REFRESH_16\t\\\n\t| EN_DRAM_REFRESH\t\\\n\t| EN_FAST_RAS_READ\t\\\n\t| EN_RD_AHEAD_FIFO\t\\\n\t| EN_FAST_RD_AHEAD_WR\t\\\n\t)\n\n#define FBIINIT3_DEFAULT \t\\\n\t( DISABLE_TEXTURE )\n\n#define FBIINIT4_DEFAULT\t\\\n\t(\t\t\t\\\n\t  FAST_PCI_READS\t\\\n \t\\\n\t| LFB_READ_AHEAD\t\\\n\t)\n \n#define FBIINIT6_DEFAULT\t(0x0)\n\n \n\n \n#define SSTFB_SET_VGAPASS\t_IOW('F', 0xdd, __u32)\n#define SSTFB_GET_VGAPASS\t_IOR('F', 0xdd, __u32)\n\n\n \nenum {\n\tVID_CLOCK=0,\n\tGFX_CLOCK=1,\n};\n\n \n#define DAC_FREF\t14318\t \n#define VCO_MAX\t\t260000\n\n \n\nstruct pll_timing {\n\tunsigned int m;\n\tunsigned int n;\n\tunsigned int p;\n};\n\nstruct dac_switch {\n\tconst char *name;\n\tint (*detect) (struct fb_info *info);\n\tint (*set_pll) (struct fb_info *info, const struct pll_timing *t, const int clock);\n\tvoid (*set_vidmod) (struct fb_info *info, const int bpp);\n};\n\nstruct sst_spec {\n\tchar * name;\n\tint default_gfx_clock;\t \n\tint max_gfxclk; \t \n};\n\nstruct sstfb_par {\n\tu32 palette[16];\n\tunsigned int yDim;\n\tunsigned int hSyncOn;\t \n\tunsigned int hSyncOff;\t \n\tunsigned int hBackPorch; \n\tunsigned int vSyncOn;\n\tunsigned int vSyncOff;\n\tunsigned int vBackPorch;\n\tstruct pll_timing pll;\n\tunsigned int tiles_in_X; \n\tu8 __iomem *mmio_vbase;\n\tstruct dac_switch \tdac_sw;\t \n\tstruct pci_dev\t\t*dev;\n\tint\ttype;\n\tu8\trevision;\n\tu8\tvgapass;\t \n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}