{
  "module_name": "ocxl.h",
  "hash_id": "cff0cb97601ba4493407265a6eac1cddec0eb0ec6f203ef1192738bf72e56ce7",
  "original_prompt": "Ingested from linux-6.6.14/include/misc/ocxl.h",
  "human_readable_source": "\n\n#ifndef _MISC_OCXL_H_\n#define _MISC_OCXL_H_\n\n#include <linux/pci.h>\n\n \n\n#define OCXL_AFU_NAME_SZ      (24+1)   \n\n\nstruct ocxl_afu_config {\n\tu8 idx;\n\tint dvsec_afu_control_pos;  \n\tchar name[OCXL_AFU_NAME_SZ];\n\tu8 version_major;\n\tu8 version_minor;\n\tu8 afuc_type;\n\tu8 afum_type;\n\tu8 profile;\n\tu8 global_mmio_bar;      \n\tu64 global_mmio_offset;\n\tu32 global_mmio_size;\n\tu8 pp_mmio_bar;          \n\tu64 pp_mmio_offset;\n\tu32 pp_mmio_stride;\n\tu64 lpc_mem_offset;\n\tu64 lpc_mem_size;\n\tu64 special_purpose_mem_offset;\n\tu64 special_purpose_mem_size;\n\tu8 pasid_supported_log;\n\tu16 actag_supported;\n};\n\nstruct ocxl_fn_config {\n\tint dvsec_tl_pos;        \n\tint dvsec_function_pos;  \n\tint dvsec_afu_info_pos;  \n\ts8 max_pasid_log;\n\ts8 max_afu_index;\n};\n\nenum ocxl_endian {\n\tOCXL_BIG_ENDIAN = 0,     \n\tOCXL_LITTLE_ENDIAN = 1,  \n\tOCXL_HOST_ENDIAN = 2,    \n};\n\n\nstruct ocxl_afu;\nstruct ocxl_fn;\nstruct ocxl_context;\n\n\n\n \nstruct ocxl_fn *ocxl_function_open(struct pci_dev *dev);\n\n \nstruct list_head *ocxl_function_afu_list(struct ocxl_fn *fn);\n\n \nstruct ocxl_afu *ocxl_function_fetch_afu(struct ocxl_fn *fn, u8 afu_idx);\n\n \nvoid ocxl_afu_get(struct ocxl_afu *afu);\n\n \nvoid ocxl_afu_put(struct ocxl_afu *afu);\n\n\n \nconst struct ocxl_fn_config *ocxl_function_config(struct ocxl_fn *fn);\n\n \nvoid ocxl_function_close(struct ocxl_fn *fn);\n\n\n\n \nint ocxl_context_alloc(struct ocxl_context **context, struct ocxl_afu *afu,\n\t\t\tstruct address_space *mapping);\n\n \nvoid ocxl_context_free(struct ocxl_context *ctx);\n\n \nint ocxl_context_attach(struct ocxl_context *ctx, u64 amr,\n\t\t\t\tstruct mm_struct *mm);\n\n \nint ocxl_context_detach(struct ocxl_context *ctx);\n\n\n\n \nint ocxl_afu_irq_alloc(struct ocxl_context *ctx, int *irq_id);\n\n \nint ocxl_afu_irq_free(struct ocxl_context *ctx, int irq_id);\n\n \nu64 ocxl_afu_irq_get_addr(struct ocxl_context *ctx, int irq_id);\n\n \nint ocxl_irq_set_handler(struct ocxl_context *ctx, int irq_id,\n\t\tirqreturn_t (*handler)(void *private),\n\t\tvoid (*free_private)(void *private),\n\t\tvoid *private);\n\n\n\n \nstruct ocxl_afu_config *ocxl_afu_config(struct ocxl_afu *afu);\n\n \nvoid ocxl_afu_set_private(struct ocxl_afu *afu, void *private);\n\n \nvoid *ocxl_afu_get_private(struct ocxl_afu *afu);\n\n\n \nint ocxl_global_mmio_read32(struct ocxl_afu *afu, size_t offset,\n\t\t\t    enum ocxl_endian endian, u32 *val);\n\n \nint ocxl_global_mmio_read64(struct ocxl_afu *afu, size_t offset,\n\t\t\t    enum ocxl_endian endian, u64 *val);\n\n \nint ocxl_global_mmio_write32(struct ocxl_afu *afu, size_t offset,\n\t\t\t     enum ocxl_endian endian, u32 val);\n\n \nint ocxl_global_mmio_write64(struct ocxl_afu *afu, size_t offset,\n\t\t\t     enum ocxl_endian endian, u64 val);\n\n \nint ocxl_global_mmio_set32(struct ocxl_afu *afu, size_t offset,\n\t\t\t   enum ocxl_endian endian, u32 mask);\n\n \nint ocxl_global_mmio_set64(struct ocxl_afu *afu, size_t offset,\n\t\t\t   enum ocxl_endian endian, u64 mask);\n\n \nint ocxl_global_mmio_clear32(struct ocxl_afu *afu, size_t offset,\n\t\t\t     enum ocxl_endian endian, u32 mask);\n\n \nint ocxl_global_mmio_clear64(struct ocxl_afu *afu, size_t offset,\n\t\t\t     enum ocxl_endian endian, u64 mask);\n\n\n\n \nint ocxl_config_read_afu(struct pci_dev *dev,\n\t\t\t\tstruct ocxl_fn_config *fn,\n\t\t\t\tstruct ocxl_afu_config *afu,\n\t\t\t\tu8 afu_idx);\n\n \nvoid ocxl_config_set_afu_pasid(struct pci_dev *dev,\n\t\t\t\tint afu_control_offset,\n\t\t\t\tint pasid_base, u32 pasid_count_log);\n\n \nint ocxl_config_get_actag_info(struct pci_dev *dev,\n\t\t\t\tu16 *base, u16 *enabled, u16 *supported);\n\n \nvoid ocxl_config_set_actag(struct pci_dev *dev, int func_offset,\n\t\t\t\tu32 actag_base, u32 actag_count);\n\n \nvoid ocxl_config_set_afu_actag(struct pci_dev *dev,\n\t\t\t\tint afu_control_offset,\n\t\t\t\tint actag_base, int actag_count);\n\n \nvoid ocxl_config_set_afu_state(struct pci_dev *dev,\n\t\t\t\tint afu_control_offset, int enable);\n\n \nint ocxl_config_set_TL(struct pci_dev *dev, int tl_dvsec);\n\n \nint ocxl_config_terminate_pasid(struct pci_dev *dev,\n\t\t\t\tint afu_control_offset, int pasid);\n\n \nint ocxl_config_read_function(struct pci_dev *dev,\n\t\t\t\tstruct ocxl_fn_config *fn);\n\n \nint ocxl_link_setup(struct pci_dev *dev, int PE_mask,\n\t\t\tvoid **link_handle);\n\n \nvoid ocxl_link_release(struct pci_dev *dev, void *link_handle);\n\n \nint ocxl_link_add_pe(void *link_handle, int pasid, u32 pidr, u32 tidr,\n\t\tu64 amr, u16 bdf, struct mm_struct *mm,\n\t\tvoid (*xsl_err_cb)(void *data, u64 addr, u64 dsisr),\n\t\tvoid *xsl_err_data);\n\n \nint ocxl_link_remove_pe(void *link_handle, int pasid);\n\n \nint ocxl_link_irq_alloc(void *link_handle, int *hw_irq);\n\n \nvoid ocxl_link_free_irq(void *link_handle, int hw_irq);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}