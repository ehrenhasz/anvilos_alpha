{
  "module_name": "nubus.h",
  "hash_id": "109ea4c8672007876b2796d42c4d67c5e9fc7305de7ff799a424569c33bb9b40",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/nubus.h",
  "human_readable_source": " \n \n\n#ifndef LINUX_NUBUS_H\n#define LINUX_NUBUS_H\n\n#include <linux/device.h>\n#include <asm/nubus.h>\n#include <uapi/linux/nubus.h>\n\nstruct proc_dir_entry;\nstruct seq_file;\n\nstruct nubus_dir {\n\tunsigned char *base;\n\tunsigned char *ptr;\n\tint done;\n\tint mask;\n\tstruct proc_dir_entry *procdir;\n};\n\nstruct nubus_dirent {\n\tunsigned char *base;\n\tunsigned char type;\n\t__u32 data;\t \n\tint mask;\n};\n\nstruct nubus_board {\n\tstruct device dev;\n\n\t \n\tint slot;\n\t \n\tchar name[64];\n\n\t \n\tunsigned char *fblock;\n\t \n\tunsigned char *directory;\n\n\tunsigned long slot_addr;\n\t \n\tunsigned long doffset;\n\t \n\tunsigned long rom_length;\n\t \n\tunsigned long crc;\n\tunsigned char rev;\n\tunsigned char format;\n\tunsigned char lanes;\n\n\t \n\tstruct proc_dir_entry *procdir;\n};\n\nstruct nubus_rsrc {\n\tstruct list_head list;\n\n\t \n\tunsigned char resid;\n\t \n\tunsigned short category;\n\tunsigned short type;\n\tunsigned short dr_sw;\n\tunsigned short dr_hw;\n\n\t \n\tunsigned char *directory;\n\t \n\tstruct nubus_board *board;\n};\n\n \nextern struct list_head nubus_func_rsrcs;\n\nstruct nubus_driver {\n\tstruct device_driver driver;\n\tint (*probe)(struct nubus_board *board);\n\tvoid (*remove)(struct nubus_board *board);\n};\n\nextern struct bus_type nubus_bus_type;\n\n \n#ifdef CONFIG_PROC_FS\nextern bool nubus_populate_procfs;\nvoid nubus_proc_init(void);\nstruct proc_dir_entry *nubus_proc_add_board(struct nubus_board *board);\nstruct proc_dir_entry *nubus_proc_add_rsrc_dir(struct proc_dir_entry *procdir,\n\t\t\t\t\t       const struct nubus_dirent *ent,\n\t\t\t\t\t       struct nubus_board *board);\nvoid nubus_proc_add_rsrc_mem(struct proc_dir_entry *procdir,\n\t\t\t     const struct nubus_dirent *ent,\n\t\t\t     unsigned int size);\nvoid nubus_proc_add_rsrc(struct proc_dir_entry *procdir,\n\t\t\t const struct nubus_dirent *ent);\n#else\nstatic inline void nubus_proc_init(void) {}\nstatic inline\nstruct proc_dir_entry *nubus_proc_add_board(struct nubus_board *board)\n{ return NULL; }\nstatic inline\nstruct proc_dir_entry *nubus_proc_add_rsrc_dir(struct proc_dir_entry *procdir,\n\t\t\t\t\t       const struct nubus_dirent *ent,\n\t\t\t\t\t       struct nubus_board *board)\n{ return NULL; }\nstatic inline void nubus_proc_add_rsrc_mem(struct proc_dir_entry *procdir,\n\t\t\t\t\t   const struct nubus_dirent *ent,\n\t\t\t\t\t   unsigned int size) {}\nstatic inline void nubus_proc_add_rsrc(struct proc_dir_entry *procdir,\n\t\t\t\t       const struct nubus_dirent *ent) {}\n#endif\n\nstruct nubus_rsrc *nubus_first_rsrc_or_null(void);\nstruct nubus_rsrc *nubus_next_rsrc_or_null(struct nubus_rsrc *from);\n\n#define for_each_func_rsrc(f) \\\n\tfor (f = nubus_first_rsrc_or_null(); f; f = nubus_next_rsrc_or_null(f))\n\n#define for_each_board_func_rsrc(b, f) \\\n\tfor_each_func_rsrc(f) if (f->board != b) {} else\n\n \n\n \nint nubus_get_root_dir(const struct nubus_board *board,\n\t\t       struct nubus_dir *dir);\n \nint nubus_get_board_dir(const struct nubus_board *board,\n\t\t\tstruct nubus_dir *dir);\n \nint nubus_get_func_dir(const struct nubus_rsrc *fres, struct nubus_dir *dir);\n\n \nint nubus_readdir(struct nubus_dir *dir,\n\t\t  struct nubus_dirent *ent);\nint nubus_find_rsrc(struct nubus_dir *dir,\n\t\t    unsigned char rsrc_type,\n\t\t    struct nubus_dirent *ent);\nint nubus_rewinddir(struct nubus_dir *dir);\n\n \nint nubus_get_subdir(const struct nubus_dirent *ent,\n\t\t     struct nubus_dir *dir);\nvoid nubus_get_rsrc_mem(void *dest, const struct nubus_dirent *dirent,\n\t\t\tunsigned int len);\nunsigned int nubus_get_rsrc_str(char *dest, const struct nubus_dirent *dirent,\n\t\t\t\tunsigned int len);\nvoid nubus_seq_write_rsrc_mem(struct seq_file *m,\n\t\t\t      const struct nubus_dirent *dirent,\n\t\t\t      unsigned int len);\nunsigned char *nubus_dirptr(const struct nubus_dirent *nd);\n\n \nint nubus_parent_device_register(void);\nint nubus_device_register(struct nubus_board *board);\nint nubus_driver_register(struct nubus_driver *ndrv);\nvoid nubus_driver_unregister(struct nubus_driver *ndrv);\nint nubus_proc_show(struct seq_file *m, void *data);\n\nstatic inline void nubus_set_drvdata(struct nubus_board *board, void *data)\n{\n\tdev_set_drvdata(&board->dev, data);\n}\n\nstatic inline void *nubus_get_drvdata(struct nubus_board *board)\n{\n\treturn dev_get_drvdata(&board->dev);\n}\n\n \nstatic inline void *nubus_slot_addr(int slot)\n{\n\treturn (void *)(0xF0000000 | (slot << 24));\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}