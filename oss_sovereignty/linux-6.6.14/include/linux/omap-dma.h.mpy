{
  "module_name": "omap-dma.h",
  "hash_id": "972825bd66666533e9891752675d17b69ec3c2366116edfef6830796ead3c230",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/omap-dma.h",
  "human_readable_source": " \n#ifndef __LINUX_OMAP_DMA_H\n#define __LINUX_OMAP_DMA_H\n \n\n#include <linux/platform_device.h>\n\n#define INT_DMA_LCD\t\t\t(NR_IRQS_LEGACY + 25)\n\n#define OMAP1_DMA_TOUT_IRQ\t\t(1 << 0)\n#define OMAP_DMA_DROP_IRQ\t\t(1 << 1)\n#define OMAP_DMA_HALF_IRQ\t\t(1 << 2)\n#define OMAP_DMA_FRAME_IRQ\t\t(1 << 3)\n#define OMAP_DMA_LAST_IRQ\t\t(1 << 4)\n#define OMAP_DMA_BLOCK_IRQ\t\t(1 << 5)\n#define OMAP1_DMA_SYNC_IRQ\t\t(1 << 6)\n#define OMAP2_DMA_PKT_IRQ\t\t(1 << 7)\n#define OMAP2_DMA_TRANS_ERR_IRQ\t\t(1 << 8)\n#define OMAP2_DMA_SECURE_ERR_IRQ\t(1 << 9)\n#define OMAP2_DMA_SUPERVISOR_ERR_IRQ\t(1 << 10)\n#define OMAP2_DMA_MISALIGNED_ERR_IRQ\t(1 << 11)\n\n#define OMAP_DMA_CCR_EN\t\t\t(1 << 7)\n#define OMAP_DMA_CCR_RD_ACTIVE\t\t(1 << 9)\n#define OMAP_DMA_CCR_WR_ACTIVE\t\t(1 << 10)\n#define OMAP_DMA_CCR_SEL_SRC_DST_SYNC\t(1 << 24)\n#define OMAP_DMA_CCR_BUFFERING_DISABLE\t(1 << 25)\n\n#define OMAP_DMA_DATA_TYPE_S8\t\t0x00\n#define OMAP_DMA_DATA_TYPE_S16\t\t0x01\n#define OMAP_DMA_DATA_TYPE_S32\t\t0x02\n\n#define OMAP_DMA_SYNC_ELEMENT\t\t0x00\n#define OMAP_DMA_SYNC_FRAME\t\t0x01\n#define OMAP_DMA_SYNC_BLOCK\t\t0x02\n#define OMAP_DMA_SYNC_PACKET\t\t0x03\n\n#define OMAP_DMA_DST_SYNC_PREFETCH\t0x02\n#define OMAP_DMA_SRC_SYNC\t\t0x01\n#define OMAP_DMA_DST_SYNC\t\t0x00\n\n#define OMAP_DMA_PORT_EMIFF\t\t0x00\n#define OMAP_DMA_PORT_EMIFS\t\t0x01\n#define OMAP_DMA_PORT_OCP_T1\t\t0x02\n#define OMAP_DMA_PORT_TIPB\t\t0x03\n#define OMAP_DMA_PORT_OCP_T2\t\t0x04\n#define OMAP_DMA_PORT_MPUI\t\t0x05\n\n#define OMAP_DMA_AMODE_CONSTANT\t\t0x00\n#define OMAP_DMA_AMODE_POST_INC\t\t0x01\n#define OMAP_DMA_AMODE_SINGLE_IDX\t0x02\n#define OMAP_DMA_AMODE_DOUBLE_IDX\t0x03\n\n#define DMA_DEFAULT_FIFO_DEPTH\t\t0x10\n#define DMA_DEFAULT_ARB_RATE\t\t0x01\n \n#define DMA_THREAD_RESERVE_NORM\t\t(0x00 << 12)  \n#define DMA_THREAD_RESERVE_ONET\t\t(0x01 << 12)\n#define DMA_THREAD_RESERVE_TWOT\t\t(0x02 << 12)\n#define DMA_THREAD_RESERVE_THREET\t(0x03 << 12)\n#define DMA_THREAD_FIFO_NONE\t\t(0x00 << 14)  \n#define DMA_THREAD_FIFO_75\t\t(0x01 << 14)\n#define DMA_THREAD_FIFO_25\t\t(0x02 << 14)\n#define DMA_THREAD_FIFO_50\t\t(0x03 << 14)\n\n \n#define DMA_SYSCONFIG_MIDLEMODE_MASK\t\t(3 << 12)\n#define DMA_SYSCONFIG_CLOCKACTIVITY_MASK\t(3 << 8)\n#define DMA_SYSCONFIG_EMUFREE\t\t\t(1 << 5)\n#define DMA_SYSCONFIG_SIDLEMODE_MASK\t\t(3 << 3)\n#define DMA_SYSCONFIG_SOFTRESET\t\t\t(1 << 2)\n#define DMA_SYSCONFIG_AUTOIDLE\t\t\t(1 << 0)\n\n#define DMA_SYSCONFIG_MIDLEMODE(n)\t\t((n) << 12)\n#define DMA_SYSCONFIG_SIDLEMODE(n)\t\t((n) << 3)\n\n#define DMA_IDLEMODE_SMARTIDLE\t\t\t0x2\n#define DMA_IDLEMODE_NO_IDLE\t\t\t0x1\n#define DMA_IDLEMODE_FORCE_IDLE\t\t\t0x0\n\n \n#ifndef CONFIG_ARCH_OMAP1\n#define OMAP_DMA_STATIC_CHAIN\t\t0x1\n#define OMAP_DMA_DYNAMIC_CHAIN\t\t0x2\n#define OMAP_DMA_CHAIN_ACTIVE\t\t0x1\n#define OMAP_DMA_CHAIN_INACTIVE\t\t0x0\n#endif\n\n#define DMA_CH_PRIO_HIGH\t\t0x1\n#define DMA_CH_PRIO_LOW\t\t\t0x0  \n\n \n#define IS_DMA_ERRATA(id)\t\t(errata & (id))\n#define SET_DMA_ERRATA(id)\t\t(errata |= (id))\n\n#define DMA_ERRATA_IFRAME_BUFFERING\tBIT(0x0)\n#define DMA_ERRATA_PARALLEL_CHANNELS\tBIT(0x1)\n#define DMA_ERRATA_i378\t\t\tBIT(0x2)\n#define DMA_ERRATA_i541\t\t\tBIT(0x3)\n#define DMA_ERRATA_i88\t\t\tBIT(0x4)\n#define DMA_ERRATA_3_3\t\t\tBIT(0x5)\n#define DMA_ROMCODE_BUG\t\t\tBIT(0x6)\n\n \n#define DMA_LINKED_LCH\t\t\tBIT(0x0)\n#define GLOBAL_PRIORITY\t\t\tBIT(0x1)\n#define RESERVE_CHANNEL\t\t\tBIT(0x2)\n#define IS_CSSA_32\t\t\tBIT(0x3)\n#define IS_CDSA_32\t\t\tBIT(0x4)\n#define IS_RW_PRIORITY\t\t\tBIT(0x5)\n#define ENABLE_1510_MODE\t\tBIT(0x6)\n#define SRC_PORT\t\t\tBIT(0x7)\n#define DST_PORT\t\t\tBIT(0x8)\n#define SRC_INDEX\t\t\tBIT(0x9)\n#define DST_INDEX\t\t\tBIT(0xa)\n#define IS_BURST_ONLY4\t\t\tBIT(0xb)\n#define CLEAR_CSR_ON_READ\t\tBIT(0xc)\n#define IS_WORD_16\t\t\tBIT(0xd)\n#define ENABLE_16XX_MODE\t\tBIT(0xe)\n#define HS_CHANNELS_RESERVED\t\tBIT(0xf)\n\n \n#define DMA_HAS_TRANSPARENT_CAPS\t(0x1 << 18)\n#define DMA_HAS_CONSTANT_FILL_CAPS\t(0x1 << 19)\n#define DMA_HAS_DESCRIPTOR_CAPS\t\t(0x3 << 20)\n\nenum omap_reg_offsets {\n\nGCR,\t\tGSCR,\t\tGRST1,\t\tHW_ID,\nPCH2_ID,\tPCH0_ID,\tPCH1_ID,\tPCHG_ID,\nPCHD_ID,\tCAPS_0,\t\tCAPS_1,\t\tCAPS_2,\nCAPS_3,\t\tCAPS_4,\t\tPCH2_SR,\tPCH0_SR,\nPCH1_SR,\tPCHD_SR,\tREVISION,\tIRQSTATUS_L0,\nIRQSTATUS_L1,\tIRQSTATUS_L2,\tIRQSTATUS_L3,\tIRQENABLE_L0,\nIRQENABLE_L1,\tIRQENABLE_L2,\tIRQENABLE_L3,\tSYSSTATUS,\nOCP_SYSCONFIG,\n\n \nCPC, CCR2, LCH_CTRL,\n\n \nCSDP,\t\tCCR,\t\tCICR,\t\tCSR,\nCEN,\t\tCFN,\t\tCSFI,\t\tCSEI,\nCSAC,\t\tCDAC,\t\tCDEI,\nCDFI,\t\tCLNK_CTRL,\n\n \nCSSA,\t\tCDSA,\t\tCOLOR,\nCCEN,\t\tCCFN,\n\n \nCDP,\t\tCNDP,\t\tCCDN,\n\n};\n\nenum omap_dma_burst_mode {\n\tOMAP_DMA_DATA_BURST_DIS = 0,\n\tOMAP_DMA_DATA_BURST_4,\n\tOMAP_DMA_DATA_BURST_8,\n\tOMAP_DMA_DATA_BURST_16,\n};\n\nenum end_type {\n\tOMAP_DMA_LITTLE_ENDIAN = 0,\n\tOMAP_DMA_BIG_ENDIAN\n};\n\nenum omap_dma_color_mode {\n\tOMAP_DMA_COLOR_DIS = 0,\n\tOMAP_DMA_CONSTANT_FILL,\n\tOMAP_DMA_TRANSPARENT_COPY\n};\n\nenum omap_dma_write_mode {\n\tOMAP_DMA_WRITE_NON_POSTED = 0,\n\tOMAP_DMA_WRITE_POSTED,\n\tOMAP_DMA_WRITE_LAST_NON_POSTED\n};\n\nenum omap_dma_channel_mode {\n\tOMAP_DMA_LCH_2D = 0,\n\tOMAP_DMA_LCH_G,\n\tOMAP_DMA_LCH_P,\n\tOMAP_DMA_LCH_PD\n};\n\nstruct omap_dma_channel_params {\n\tint data_type;\t\t \n\tint elem_count;\t\t \n\tint frame_count;\t \n\n\tint src_port;\t\t \n\tint src_amode;\t\t \n\tunsigned long src_start;\t \n\tint src_ei;\t\t \n\tint src_fi;\t\t \n\n\tint dst_port;\t\t \n\tint dst_amode;\t\t \n\tunsigned long dst_start;\t \n\tint dst_ei;\t\t \n\tint dst_fi;\t\t \n\n\tint trigger;\t\t \n\tint sync_mode;\t\t \n\tint src_or_dst_synch;\t \n\n\tint ie;\t\t\t \n\n\tunsigned char read_prio; \n\tunsigned char write_prio; \n\n#ifndef CONFIG_ARCH_OMAP1\n\tenum omap_dma_burst_mode burst_mode;  \n#endif\n};\n\nstruct omap_dma_lch {\n\tint next_lch;\n\tint dev_id;\n\tu16 saved_csr;\n\tu16 enabled_irqs;\n\tconst char *dev_name;\n\tvoid (*callback)(int lch, u16 ch_status, void *data);\n\tvoid *data;\n\tlong flags;\n\tint state;\n\tint chain_id;\n\tint status;\n};\n\nstruct omap_dma_dev_attr {\n\tu32 dev_caps;\n\tu16 lch_count;\n\tu16 chan_count;\n};\n\nenum {\n\tOMAP_DMA_REG_NONE,\n\tOMAP_DMA_REG_16BIT,\n\tOMAP_DMA_REG_2X16BIT,\n\tOMAP_DMA_REG_32BIT,\n};\n\nstruct omap_dma_reg {\n\tu16\toffset;\n\tu8\tstride;\n\tu8\ttype;\n};\n\n#define SDMA_FILTER_PARAM(hw_req)\t((int[]) { (hw_req) })\nstruct dma_slave_map;\n\n \nstruct omap_system_dma_plat_info {\n\tconst struct omap_dma_reg *reg_map;\n\tunsigned channel_stride;\n\tstruct omap_dma_dev_attr *dma_attr;\n\tu32 errata;\n\tvoid (*show_dma_caps)(void);\n\tvoid (*clear_lch_regs)(int lch);\n\tvoid (*clear_dma)(int lch);\n\tvoid (*dma_write)(u32 val, int reg, int lch);\n\tu32 (*dma_read)(int reg, int lch);\n\n\tconst struct dma_slave_map *slave_map;\n\tint slavecnt;\n};\n\n#ifdef CONFIG_ARCH_OMAP2PLUS\n#define dma_omap2plus()\t1\n#else\n#define dma_omap2plus()\t0\n#endif\n#define dma_omap1()\t(!dma_omap2plus())\n#define __dma_omap15xx(d) (dma_omap1() && (d)->dev_caps & ENABLE_1510_MODE)\n#define __dma_omap16xx(d) (dma_omap1() && (d)->dev_caps & ENABLE_16XX_MODE)\n#define dma_omap15xx()\t__dma_omap15xx(d)\n#define dma_omap16xx()\t__dma_omap16xx(d)\n\nextern struct omap_system_dma_plat_info *omap_get_plat_info(void);\n\n#if defined(CONFIG_ARCH_OMAP1)\nextern void omap_set_dma_priority(int lch, int dst_port, int priority);\n#else\nstatic inline void omap_set_dma_priority(int lch, int dst_port, int priority)\n{\n}\n#endif\n\nextern int omap_request_dma(int dev_id, const char *dev_name,\n\t\t\tvoid (*callback)(int lch, u16 ch_status, void *data),\n\t\t\tvoid *data, int *dma_ch);\nextern void omap_free_dma(int ch);\n#if IS_ENABLED(CONFIG_USB_OMAP)\nextern void omap_disable_dma_irq(int ch, u16 irq_bits);\nextern void omap_start_dma(int lch);\nextern void omap_stop_dma(int lch);\nextern void omap_set_dma_transfer_params(int lch, int data_type,\n\t\t\t\t\t int elem_count, int frame_count,\n\t\t\t\t\t int sync_mode,\n\t\t\t\t\t int dma_trigger, int src_or_dst_synch);\nextern void omap_set_dma_channel_mode(int lch, enum omap_dma_channel_mode mode);\n\nextern void omap_set_dma_src_params(int lch, int src_port, int src_amode,\n\t\t\t\t    unsigned long src_start,\n\t\t\t\t    int src_ei, int src_fi);\nextern void omap_set_dma_src_data_pack(int lch, int enable);\nextern void omap_set_dma_src_burst_mode(int lch,\n\t\t\t\t\tenum omap_dma_burst_mode burst_mode);\n\nextern void omap_set_dma_dest_params(int lch, int dest_port, int dest_amode,\n\t\t\t\t     unsigned long dest_start,\n\t\t\t\t     int dst_ei, int dst_fi);\nextern void omap_set_dma_dest_data_pack(int lch, int enable);\nextern void omap_set_dma_dest_burst_mode(int lch,\n\t\t\t\t\t enum omap_dma_burst_mode burst_mode);\n\nextern dma_addr_t omap_get_dma_src_pos(int lch);\nextern dma_addr_t omap_get_dma_dst_pos(int lch);\nextern int omap_get_dma_active_status(int lch);\n#endif\n\nextern int omap_dma_running(void);\n\n#if IS_ENABLED(CONFIG_FB_OMAP)\nextern int omap_lcd_dma_running(void);\n#else\nstatic inline int omap_lcd_dma_running(void)\n{\n\treturn 0;\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}