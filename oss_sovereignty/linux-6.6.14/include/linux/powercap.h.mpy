{
  "module_name": "powercap.h",
  "hash_id": "8eb9a2316799a1f417ba24b5d5a5baccf9c40fa7e685c9401168b495e892d11e",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/powercap.h",
  "human_readable_source": " \n \n\n#ifndef __POWERCAP_H__\n#define __POWERCAP_H__\n\n#include <linux/device.h>\n#include <linux/idr.h>\n\n \n\nstruct powercap_control_type;\nstruct powercap_zone;\nstruct powercap_zone_constraint;\n\n \nstruct powercap_control_type_ops {\n\tint (*set_enable) (struct powercap_control_type *, bool mode);\n\tint (*get_enable) (struct powercap_control_type *, bool *mode);\n\tint (*release) (struct powercap_control_type *);\n};\n\n \nstruct powercap_control_type {\n\tstruct device dev;\n\tstruct idr idr;\n\tint nr_zones;\n\tconst struct powercap_control_type_ops *ops;\n\tstruct mutex lock;\n\tbool allocated;\n\tstruct list_head node;\n};\n\n \nstruct powercap_zone_ops {\n\tint (*get_max_energy_range_uj) (struct powercap_zone *, u64 *);\n\tint (*get_energy_uj) (struct powercap_zone *, u64 *);\n\tint (*reset_energy_uj) (struct powercap_zone *);\n\tint (*get_max_power_range_uw) (struct powercap_zone *, u64 *);\n\tint (*get_power_uw) (struct powercap_zone *, u64 *);\n\tint (*set_enable) (struct powercap_zone *, bool mode);\n\tint (*get_enable) (struct powercap_zone *, bool *mode);\n\tint (*release) (struct powercap_zone *);\n};\n\n#define\tPOWERCAP_ZONE_MAX_ATTRS\t\t6\n#define\tPOWERCAP_CONSTRAINTS_ATTRS\t8\n#define MAX_CONSTRAINTS_PER_ZONE\t10\n \nstruct powercap_zone {\n\tint id;\n\tchar *name;\n\tvoid *control_type_inst;\n\tconst struct powercap_zone_ops *ops;\n\tstruct device dev;\n\tint const_id_cnt;\n\tstruct idr idr;\n\tstruct idr *parent_idr;\n\tvoid *private_data;\n\tstruct attribute **zone_dev_attrs;\n\tint zone_attr_count;\n\tstruct attribute_group dev_zone_attr_group;\n\tconst struct attribute_group *dev_attr_groups[2];  \n\tbool allocated;\n\tstruct powercap_zone_constraint *constraints;\n};\n\n \nstruct powercap_zone_constraint_ops {\n\tint (*set_power_limit_uw) (struct powercap_zone *, int, u64);\n\tint (*get_power_limit_uw) (struct powercap_zone *, int, u64 *);\n\tint (*set_time_window_us) (struct powercap_zone *, int, u64);\n\tint (*get_time_window_us) (struct powercap_zone *, int, u64 *);\n\tint (*get_max_power_uw) (struct powercap_zone *, int, u64 *);\n\tint (*get_min_power_uw) (struct powercap_zone *, int, u64 *);\n\tint (*get_max_time_window_us) (struct powercap_zone *, int, u64 *);\n\tint (*get_min_time_window_us) (struct powercap_zone *, int, u64 *);\n\tconst char *(*get_name) (struct powercap_zone *, int);\n};\n\n \nstruct powercap_zone_constraint {\n\tint id;\n\tstruct powercap_zone *power_zone;\n\tconst struct powercap_zone_constraint_ops *ops;\n};\n\n\n \n#define POWERCAP_GET_DEV(power_zone)\t(&power_zone->dev)\n\n \nstatic inline void powercap_set_zone_data(struct powercap_zone *power_zone,\n\t\t\t\t\t\tvoid *pdata)\n{\n\tif (power_zone)\n\t\tpower_zone->private_data = pdata;\n}\n\n \nstatic inline void *powercap_get_zone_data(struct powercap_zone *power_zone)\n{\n\tif (power_zone)\n\t\treturn power_zone->private_data;\n\treturn NULL;\n}\n\n \nstruct powercap_control_type *powercap_register_control_type(\n\t\t\t\tstruct powercap_control_type *control_type,\n\t\t\t\tconst char *name,\n\t\t\t\tconst struct powercap_control_type_ops *ops);\n\n \nint powercap_unregister_control_type(struct powercap_control_type *instance);\n\n \n\n \nstruct powercap_zone *powercap_register_zone(\n\t\t\tstruct powercap_zone *power_zone,\n\t\t\tstruct powercap_control_type *control_type,\n\t\t\tconst char *name,\n\t\t\tstruct powercap_zone *parent,\n\t\t\tconst struct powercap_zone_ops *ops,\n\t\t\tint nr_constraints,\n\t\t\tconst struct powercap_zone_constraint_ops *const_ops);\n\n \nint powercap_unregister_zone(struct powercap_control_type *control_type,\n\t\t\t\tstruct powercap_zone *power_zone);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}