{
  "module_name": "tty_driver.h",
  "hash_id": "a24f33199d706a53bd9bdb3056e20a77f28b3009b45221b45ca9814812692856",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/tty_driver.h",
  "human_readable_source": " \n#ifndef _LINUX_TTY_DRIVER_H\n#define _LINUX_TTY_DRIVER_H\n\n#include <linux/export.h>\n#include <linux/fs.h>\n#include <linux/kref.h>\n#include <linux/list.h>\n#include <linux/cdev.h>\n#include <linux/uaccess.h>\n#include <linux/termios.h>\n#include <linux/seq_file.h>\n\nstruct tty_struct;\nstruct tty_driver;\nstruct serial_icounter_struct;\nstruct serial_struct;\n\n \nstruct tty_operations {\n\tstruct tty_struct * (*lookup)(struct tty_driver *driver,\n\t\t\tstruct file *filp, int idx);\n\tint  (*install)(struct tty_driver *driver, struct tty_struct *tty);\n\tvoid (*remove)(struct tty_driver *driver, struct tty_struct *tty);\n\tint  (*open)(struct tty_struct * tty, struct file * filp);\n\tvoid (*close)(struct tty_struct * tty, struct file * filp);\n\tvoid (*shutdown)(struct tty_struct *tty);\n\tvoid (*cleanup)(struct tty_struct *tty);\n\tssize_t (*write)(struct tty_struct *tty, const u8 *buf, size_t count);\n\tint  (*put_char)(struct tty_struct *tty, u8 ch);\n\tvoid (*flush_chars)(struct tty_struct *tty);\n\tunsigned int (*write_room)(struct tty_struct *tty);\n\tunsigned int (*chars_in_buffer)(struct tty_struct *tty);\n\tint  (*ioctl)(struct tty_struct *tty,\n\t\t    unsigned int cmd, unsigned long arg);\n\tlong (*compat_ioctl)(struct tty_struct *tty,\n\t\t\t     unsigned int cmd, unsigned long arg);\n\tvoid (*set_termios)(struct tty_struct *tty, const struct ktermios *old);\n\tvoid (*throttle)(struct tty_struct * tty);\n\tvoid (*unthrottle)(struct tty_struct * tty);\n\tvoid (*stop)(struct tty_struct *tty);\n\tvoid (*start)(struct tty_struct *tty);\n\tvoid (*hangup)(struct tty_struct *tty);\n\tint (*break_ctl)(struct tty_struct *tty, int state);\n\tvoid (*flush_buffer)(struct tty_struct *tty);\n\tvoid (*set_ldisc)(struct tty_struct *tty);\n\tvoid (*wait_until_sent)(struct tty_struct *tty, int timeout);\n\tvoid (*send_xchar)(struct tty_struct *tty, char ch);\n\tint (*tiocmget)(struct tty_struct *tty);\n\tint (*tiocmset)(struct tty_struct *tty,\n\t\t\tunsigned int set, unsigned int clear);\n\tint (*resize)(struct tty_struct *tty, struct winsize *ws);\n\tint (*get_icount)(struct tty_struct *tty,\n\t\t\t\tstruct serial_icounter_struct *icount);\n\tint  (*get_serial)(struct tty_struct *tty, struct serial_struct *p);\n\tint  (*set_serial)(struct tty_struct *tty, struct serial_struct *p);\n\tvoid (*show_fdinfo)(struct tty_struct *tty, struct seq_file *m);\n#ifdef CONFIG_CONSOLE_POLL\n\tint (*poll_init)(struct tty_driver *driver, int line, char *options);\n\tint (*poll_get_char)(struct tty_driver *driver, int line);\n\tvoid (*poll_put_char)(struct tty_driver *driver, int line, char ch);\n#endif\n\tint (*proc_show)(struct seq_file *m, void *driver);\n} __randomize_layout;\n\n \nstruct tty_driver {\n\tstruct kref kref;\n\tstruct cdev **cdevs;\n\tstruct module\t*owner;\n\tconst char\t*driver_name;\n\tconst char\t*name;\n\tint\tname_base;\n\tint\tmajor;\n\tint\tminor_start;\n\tunsigned int\tnum;\n\tshort\ttype;\n\tshort\tsubtype;\n\tstruct ktermios init_termios;\n\tunsigned long\tflags;\n\tstruct proc_dir_entry *proc_entry;\n\tstruct tty_driver *other;\n\n\t \n\tstruct tty_struct **ttys;\n\tstruct tty_port **ports;\n\tstruct ktermios **termios;\n\tvoid *driver_state;\n\n\t \n\n\tconst struct tty_operations *ops;\n\tstruct list_head tty_drivers;\n} __randomize_layout;\n\nextern struct list_head tty_drivers;\n\nstruct tty_driver *__tty_alloc_driver(unsigned int lines, struct module *owner,\n\t\tunsigned long flags);\nstruct tty_driver *tty_find_polling_driver(char *name, int *line);\n\nvoid tty_driver_kref_put(struct tty_driver *driver);\n\n \n#define tty_alloc_driver(lines, flags) \\\n\t\t__tty_alloc_driver(lines, THIS_MODULE, flags)\n\nstatic inline struct tty_driver *tty_driver_kref_get(struct tty_driver *d)\n{\n\tkref_get(&d->kref);\n\treturn d;\n}\n\nstatic inline void tty_set_operations(struct tty_driver *driver,\n\t\tconst struct tty_operations *op)\n{\n\tdriver->ops = op;\n}\n\n \n#define TTY_DRIVER_INSTALLED\t\t0x0001\n#define TTY_DRIVER_RESET_TERMIOS\t0x0002\n#define TTY_DRIVER_REAL_RAW\t\t0x0004\n#define TTY_DRIVER_DYNAMIC_DEV\t\t0x0008\n#define TTY_DRIVER_DEVPTS_MEM\t\t0x0010\n#define TTY_DRIVER_HARDWARE_BREAK\t0x0020\n#define TTY_DRIVER_DYNAMIC_ALLOC\t0x0040\n#define TTY_DRIVER_UNNUMBERED_NODE\t0x0080\n\n \n#define TTY_DRIVER_TYPE_SYSTEM\t\t0x0001\n#define TTY_DRIVER_TYPE_CONSOLE\t\t0x0002\n#define TTY_DRIVER_TYPE_SERIAL\t\t0x0003\n#define TTY_DRIVER_TYPE_PTY\t\t0x0004\n#define TTY_DRIVER_TYPE_SCC\t\t0x0005\t \n#define TTY_DRIVER_TYPE_SYSCONS\t\t0x0006\n\n \n#define SYSTEM_TYPE_TTY\t\t\t0x0001\n#define SYSTEM_TYPE_CONSOLE\t\t0x0002\n#define SYSTEM_TYPE_SYSCONS\t\t0x0003\n#define SYSTEM_TYPE_SYSPTMX\t\t0x0004\n\n \n#define PTY_TYPE_MASTER\t\t\t0x0001\n#define PTY_TYPE_SLAVE\t\t\t0x0002\n\n \n#define SERIAL_TYPE_NORMAL\t1\n\nint tty_register_driver(struct tty_driver *driver);\nvoid tty_unregister_driver(struct tty_driver *driver);\nstruct device *tty_register_device(struct tty_driver *driver, unsigned index,\n\t\tstruct device *dev);\nstruct device *tty_register_device_attr(struct tty_driver *driver,\n\t\tunsigned index, struct device *device, void *drvdata,\n\t\tconst struct attribute_group **attr_grp);\nvoid tty_unregister_device(struct tty_driver *driver, unsigned index);\n\n#ifdef CONFIG_PROC_FS\nvoid proc_tty_register_driver(struct tty_driver *);\nvoid proc_tty_unregister_driver(struct tty_driver *);\n#else\nstatic inline void proc_tty_register_driver(struct tty_driver *d) {}\nstatic inline void proc_tty_unregister_driver(struct tty_driver *d) {}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}