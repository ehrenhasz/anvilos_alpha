{
  "module_name": "kallsyms.h",
  "hash_id": "7f181efa39c2781ffbc7852fe2b5b3d402ea43fb66096774de0984bf000023bf",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/kallsyms.h",
  "human_readable_source": " \n \n#ifndef _LINUX_KALLSYMS_H\n#define _LINUX_KALLSYMS_H\n\n#include <linux/errno.h>\n#include <linux/buildid.h>\n#include <linux/kernel.h>\n#include <linux/stddef.h>\n#include <linux/mm.h>\n#include <linux/module.h>\n\n#include <asm/sections.h>\n\n#define KSYM_NAME_LEN 512\n#define KSYM_SYMBOL_LEN (sizeof(\"%s+%#lx/%#lx [%s %s]\") + \\\n\t\t\t(KSYM_NAME_LEN - 1) + \\\n\t\t\t2*(BITS_PER_LONG*3/10) + (MODULE_NAME_LEN - 1) + \\\n\t\t\t(BUILD_ID_SIZE_MAX * 2) + 1)\n\nstruct cred;\nstruct module;\n\nstatic inline int is_kernel_text(unsigned long addr)\n{\n\tif (__is_kernel_text(addr))\n\t\treturn 1;\n\treturn in_gate_area_no_mm(addr);\n}\n\nstatic inline int is_kernel(unsigned long addr)\n{\n\tif (__is_kernel(addr))\n\t\treturn 1;\n\treturn in_gate_area_no_mm(addr);\n}\n\nstatic inline int is_ksym_addr(unsigned long addr)\n{\n\tif (IS_ENABLED(CONFIG_KALLSYMS_ALL))\n\t\treturn is_kernel(addr);\n\n\treturn is_kernel_text(addr) || is_kernel_inittext(addr);\n}\n\nstatic inline void *dereference_symbol_descriptor(void *ptr)\n{\n#ifdef CONFIG_HAVE_FUNCTION_DESCRIPTORS\n\tstruct module *mod;\n\n\tptr = dereference_kernel_function_descriptor(ptr);\n\tif (is_ksym_addr((unsigned long)ptr))\n\t\treturn ptr;\n\n\tpreempt_disable();\n\tmod = __module_address((unsigned long)ptr);\n\tpreempt_enable();\n\n\tif (mod)\n\t\tptr = dereference_module_function_descriptor(mod, ptr);\n#endif\n\treturn ptr;\n}\n\n \nextern bool kallsyms_show_value(const struct cred *cred);\n\n#ifdef CONFIG_KALLSYMS\nunsigned long kallsyms_sym_address(int idx);\nint kallsyms_on_each_symbol(int (*fn)(void *, const char *, unsigned long),\n\t\t\t    void *data);\nint kallsyms_on_each_match_symbol(int (*fn)(void *, unsigned long),\n\t\t\t\t  const char *name, void *data);\n\n \nunsigned long kallsyms_lookup_name(const char *name);\n\nextern int kallsyms_lookup_size_offset(unsigned long addr,\n\t\t\t\t  unsigned long *symbolsize,\n\t\t\t\t  unsigned long *offset);\n\n \nconst char *kallsyms_lookup(unsigned long addr,\n\t\t\t    unsigned long *symbolsize,\n\t\t\t    unsigned long *offset,\n\t\t\t    char **modname, char *namebuf);\n\n \nextern int sprint_symbol(char *buffer, unsigned long address);\nextern int sprint_symbol_build_id(char *buffer, unsigned long address);\nextern int sprint_symbol_no_offset(char *buffer, unsigned long address);\nextern int sprint_backtrace(char *buffer, unsigned long address);\nextern int sprint_backtrace_build_id(char *buffer, unsigned long address);\n\nint lookup_symbol_name(unsigned long addr, char *symname);\n\n#else  \n\nstatic inline unsigned long kallsyms_lookup_name(const char *name)\n{\n\treturn 0;\n}\n\nstatic inline int kallsyms_lookup_size_offset(unsigned long addr,\n\t\t\t\t\t      unsigned long *symbolsize,\n\t\t\t\t\t      unsigned long *offset)\n{\n\treturn 0;\n}\n\nstatic inline const char *kallsyms_lookup(unsigned long addr,\n\t\t\t\t\t  unsigned long *symbolsize,\n\t\t\t\t\t  unsigned long *offset,\n\t\t\t\t\t  char **modname, char *namebuf)\n{\n\treturn NULL;\n}\n\nstatic inline int sprint_symbol(char *buffer, unsigned long addr)\n{\n\t*buffer = '\\0';\n\treturn 0;\n}\n\nstatic inline int sprint_symbol_build_id(char *buffer, unsigned long address)\n{\n\t*buffer = '\\0';\n\treturn 0;\n}\n\nstatic inline int sprint_symbol_no_offset(char *buffer, unsigned long addr)\n{\n\t*buffer = '\\0';\n\treturn 0;\n}\n\nstatic inline int sprint_backtrace(char *buffer, unsigned long addr)\n{\n\t*buffer = '\\0';\n\treturn 0;\n}\n\nstatic inline int sprint_backtrace_build_id(char *buffer, unsigned long addr)\n{\n\t*buffer = '\\0';\n\treturn 0;\n}\n\nstatic inline int lookup_symbol_name(unsigned long addr, char *symname)\n{\n\treturn -ERANGE;\n}\n\nstatic inline int kallsyms_on_each_symbol(int (*fn)(void *, const char *, unsigned long),\n\t\t\t\t\t  void *data)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int kallsyms_on_each_match_symbol(int (*fn)(void *, unsigned long),\n\t\t\t\t\t\tconst char *name, void *data)\n{\n\treturn -EOPNOTSUPP;\n}\n#endif  \n\nstatic inline void print_ip_sym(const char *loglvl, unsigned long ip)\n{\n\tprintk(\"%s[<%px>] %pS\\n\", loglvl, (void *) ip, (void *) ip);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}