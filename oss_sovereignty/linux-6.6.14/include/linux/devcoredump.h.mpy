{
  "module_name": "devcoredump.h",
  "hash_id": "9c2f4ae64f5f28dc0ec4a3a4ff19b3c599a05ad89c20a9d5d7b5f4e754288ec6",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/devcoredump.h",
  "human_readable_source": " \n \n#ifndef __DEVCOREDUMP_H\n#define __DEVCOREDUMP_H\n\n#include <linux/device.h>\n#include <linux/module.h>\n#include <linux/vmalloc.h>\n\n#include <linux/scatterlist.h>\n#include <linux/slab.h>\n\n \nstatic inline void _devcd_free_sgtable(struct scatterlist *table)\n{\n\tint i;\n\tstruct page *page;\n\tstruct scatterlist *iter;\n\tstruct scatterlist *delete_iter;\n\n\t \n\titer = table;\n\tfor_each_sg(table, iter, sg_nents(table), i) {\n\t\tpage = sg_page(iter);\n\t\tif (page)\n\t\t\t__free_page(page);\n\t}\n\n\t \n\titer = table;\n\tdelete_iter = table;\t \n\twhile (!sg_is_last(iter)) {\n\t\titer++;\n\t\tif (sg_is_chain(iter)) {\n\t\t\titer = sg_chain_ptr(iter);\n\t\t\tkfree(delete_iter);\n\t\t\tdelete_iter = iter;\n\t\t}\n\t}\n\n\t \n\tkfree(delete_iter);\n}\n\n\n#ifdef CONFIG_DEV_COREDUMP\nvoid dev_coredumpv(struct device *dev, void *data, size_t datalen,\n\t\t   gfp_t gfp);\n\nvoid dev_coredumpm(struct device *dev, struct module *owner,\n\t\t   void *data, size_t datalen, gfp_t gfp,\n\t\t   ssize_t (*read)(char *buffer, loff_t offset, size_t count,\n\t\t\t\t   void *data, size_t datalen),\n\t\t   void (*free)(void *data));\n\nvoid dev_coredumpsg(struct device *dev, struct scatterlist *table,\n\t\t    size_t datalen, gfp_t gfp);\n#else\nstatic inline void dev_coredumpv(struct device *dev, void *data,\n\t\t\t\t size_t datalen, gfp_t gfp)\n{\n\tvfree(data);\n}\n\nstatic inline void\ndev_coredumpm(struct device *dev, struct module *owner,\n\t      void *data, size_t datalen, gfp_t gfp,\n\t      ssize_t (*read)(char *buffer, loff_t offset, size_t count,\n\t\t\t      void *data, size_t datalen),\n\t      void (*free)(void *data))\n{\n\tfree(data);\n}\n\nstatic inline void dev_coredumpsg(struct device *dev, struct scatterlist *table,\n\t\t\t\t  size_t datalen, gfp_t gfp)\n{\n\t_devcd_free_sgtable(table);\n}\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}