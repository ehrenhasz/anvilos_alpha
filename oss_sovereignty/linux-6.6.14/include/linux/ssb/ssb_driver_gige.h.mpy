{
  "module_name": "ssb_driver_gige.h",
  "hash_id": "b0ef8461e969798140079994856ff50f0b88f528b39b61c3120aa59da4360336",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/ssb/ssb_driver_gige.h",
  "human_readable_source": " \n#ifndef LINUX_SSB_DRIVER_GIGE_H_\n#define LINUX_SSB_DRIVER_GIGE_H_\n\n#include <linux/ssb/ssb.h>\n#include <linux/bug.h>\n#include <linux/pci.h>\n#include <linux/spinlock.h>\n\n\n#ifdef CONFIG_SSB_DRIVER_GIGE\n\n\n#define SSB_GIGE_PCIIO\t\t\t0x0000  \n#define SSB_GIGE_RESERVED\t\t0x0400  \n#define SSB_GIGE_PCICFG\t\t\t0x0800  \n#define SSB_GIGE_SHIM_FLUSHSTAT\t\t0x0C00  \n#define SSB_GIGE_SHIM_FLUSHRDA\t\t0x0C04  \n#define SSB_GIGE_SHIM_FLUSHTO\t\t0x0C08  \n#define SSB_GIGE_SHIM_BARRIER\t\t0x0C0C  \n#define SSB_GIGE_SHIM_MAOCPSI\t\t0x0C10  \n#define SSB_GIGE_SHIM_SIOCPMA\t\t0x0C14  \n\n \n#define SSB_GIGE_TMSHIGH_RGMII\t\t0x00010000  \n \n#define SSB_GIGE_TMSLOW_TXBYPASS\t0x00080000  \n#define SSB_GIGE_TMSLOW_RXBYPASS\t0x00100000  \n#define SSB_GIGE_TMSLOW_DLLEN\t\t0x01000000  \n\n \n#define SSB_GIGE_BFL_ROBOSWITCH\t\t0x0010\n\n\n#define SSB_GIGE_MEM_RES_NAME\t\t\"SSB Broadcom 47xx GigE memory\"\n#define SSB_GIGE_IO_RES_NAME\t\t\"SSB Broadcom 47xx GigE I/O\"\n\nstruct ssb_gige {\n\tstruct ssb_device *dev;\n\n\tspinlock_t lock;\n\n\t \n\tbool has_rgmii;\n\n\t \n\tstruct pci_controller pci_controller;\n\tstruct pci_ops pci_ops;\n\tstruct resource mem_resource;\n\tstruct resource io_resource;\n};\n\n \nextern bool pdev_is_ssb_gige_core(struct pci_dev *pdev);\n\n \nstatic inline struct ssb_gige * pdev_to_ssb_gige(struct pci_dev *pdev)\n{\n\tif (!pdev_is_ssb_gige_core(pdev))\n\t\treturn NULL;\n\treturn container_of(pdev->bus->ops, struct ssb_gige, pci_ops);\n}\n\n \nstatic inline bool ssb_gige_is_rgmii(struct pci_dev *pdev)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\treturn (dev ? dev->has_rgmii : 0);\n}\n\n \nstatic inline bool ssb_gige_have_roboswitch(struct pci_dev *pdev)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\tif (dev)\n\t\treturn !!(dev->dev->bus->sprom.boardflags_lo &\n\t\t\t  SSB_GIGE_BFL_ROBOSWITCH);\n\treturn false;\n}\n\n \nstatic inline bool ssb_gige_one_dma_at_once(struct pci_dev *pdev)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\tif (dev)\n\t\treturn ((dev->dev->bus->chip_id == 0x4785) &&\n\t\t\t(dev->dev->bus->chip_rev < 2));\n\treturn false;\n}\n\n \nstatic inline bool ssb_gige_must_flush_posted_writes(struct pci_dev *pdev)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\tif (dev)\n\t\treturn (dev->dev->bus->chip_id == 0x4785);\n\treturn false;\n}\n\n \nstatic inline int ssb_gige_get_macaddr(struct pci_dev *pdev, u8 *macaddr)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\tif (!dev)\n\t\treturn -ENODEV;\n\n\tmemcpy(macaddr, dev->dev->bus->sprom.et0mac, 6);\n\treturn 0;\n}\n\n \nstatic inline int ssb_gige_get_phyaddr(struct pci_dev *pdev)\n{\n\tstruct ssb_gige *dev = pdev_to_ssb_gige(pdev);\n\tif (!dev)\n\t\treturn -ENODEV;\n\n\treturn dev->dev->bus->sprom.et0phyaddr;\n}\n\nextern int ssb_gige_pcibios_plat_dev_init(struct ssb_device *sdev,\n\t\t\t\t\t  struct pci_dev *pdev);\nextern int ssb_gige_map_irq(struct ssb_device *sdev,\n\t\t\t    const struct pci_dev *pdev);\n\n \nextern int ssb_gige_init(void);\nstatic inline void ssb_gige_exit(void)\n{\n\t \n\tBUG();\n}\n\n\n#else  \n \n\n\nstatic inline int ssb_gige_pcibios_plat_dev_init(struct ssb_device *sdev,\n\t\t\t\t\t\t struct pci_dev *pdev)\n{\n\treturn -ENOSYS;\n}\nstatic inline int ssb_gige_map_irq(struct ssb_device *sdev,\n\t\t\t\t   const struct pci_dev *pdev)\n{\n\treturn -ENOSYS;\n}\nstatic inline int ssb_gige_init(void)\n{\n\treturn 0;\n}\nstatic inline void ssb_gige_exit(void)\n{\n}\n\nstatic inline bool pdev_is_ssb_gige_core(struct pci_dev *pdev)\n{\n\treturn false;\n}\nstatic inline struct ssb_gige * pdev_to_ssb_gige(struct pci_dev *pdev)\n{\n\treturn NULL;\n}\nstatic inline bool ssb_gige_is_rgmii(struct pci_dev *pdev)\n{\n\treturn false;\n}\nstatic inline bool ssb_gige_have_roboswitch(struct pci_dev *pdev)\n{\n\treturn false;\n}\nstatic inline bool ssb_gige_one_dma_at_once(struct pci_dev *pdev)\n{\n\treturn false;\n}\nstatic inline bool ssb_gige_must_flush_posted_writes(struct pci_dev *pdev)\n{\n\treturn false;\n}\nstatic inline int ssb_gige_get_macaddr(struct pci_dev *pdev, u8 *macaddr)\n{\n\treturn -ENODEV;\n}\nstatic inline int ssb_gige_get_phyaddr(struct pci_dev *pdev)\n{\n\treturn -ENODEV;\n}\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}