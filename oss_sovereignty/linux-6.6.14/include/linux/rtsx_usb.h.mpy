{
  "module_name": "rtsx_usb.h",
  "hash_id": "3fa6f733bb22a4b8b2942b542fdf7c7b57978d538923beffe8356436a7f7c0d1",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/rtsx_usb.h",
  "human_readable_source": " \n \n\n#ifndef __RTSX_USB_H\n#define __RTSX_USB_H\n\n#include <linux/usb.h>\n\n \n#define RTSX_USB_SD_CARD\t0\n#define RTSX_USB_MS_CARD\t1\n\n \n#define EP_BULK_OUT\t\t1\n#define EP_BULK_IN\t\t2\n#define EP_INTR_IN\t\t3\n\n \n#define RTSX_USB_REQ_REG_OP\t0x00\n#define RTSX_USB_REQ_POLL\t0x02\n\n \n#define MIN_DIV_N\t\t60\n#define MAX_DIV_N\t\t120\n\n#define MAX_PHASE\t\t15\n#define RX_TUNING_CNT\t\t3\n\n#define QFN24\t\t\t0\n#define LQFP48\t\t\t1\n#define CHECK_PKG(ucr, pkg)\t((ucr)->package == (pkg))\n\n \nstruct rtsx_ucr {\n\tu16\t\t\tvendor_id;\n\tu16\t\t\tproduct_id;\n\n\tint\t\t\tpackage;\n\tu8\t\t\tic_version;\n\tbool\t\t\tis_rts5179;\n\n\tunsigned int\t\tcur_clk;\n\n\tu8\t\t\t*cmd_buf;\n\tunsigned int\t\tcmd_idx;\n\tu8\t\t\t*rsp_buf;\n\n\tstruct usb_device\t*pusb_dev;\n\tstruct usb_interface\t*pusb_intf;\n\tstruct usb_sg_request\tcurrent_sg;\n\n\tstruct timer_list\tsg_timer;\n\tstruct mutex\t\tdev_mutex;\n};\n\n \n#define IOBUF_SIZE\t\t1024\n\n \nextern int rtsx_usb_get_card_status(struct rtsx_ucr *ucr, u16 *status);\n\nextern int rtsx_usb_read_register(struct rtsx_ucr *ucr, u16 addr, u8 *data);\nextern int rtsx_usb_write_register(struct rtsx_ucr *ucr, u16 addr, u8 mask,\n\t\tu8 data);\n\nextern int rtsx_usb_ep0_write_register(struct rtsx_ucr *ucr, u16 addr, u8 mask,\n\t\tu8 data);\nextern int rtsx_usb_ep0_read_register(struct rtsx_ucr *ucr, u16 addr,\n\t\tu8 *data);\n\nextern void rtsx_usb_add_cmd(struct rtsx_ucr *ucr, u8 cmd_type,\n\t\tu16 reg_addr, u8 mask, u8 data);\nextern int rtsx_usb_send_cmd(struct rtsx_ucr *ucr, u8 flag, int timeout);\nextern int rtsx_usb_get_rsp(struct rtsx_ucr *ucr, int rsp_len, int timeout);\nextern int rtsx_usb_transfer_data(struct rtsx_ucr *ucr, unsigned int pipe,\n\t\t\t      void *buf, unsigned int len, int use_sg,\n\t\t\t      unsigned int *act_len, int timeout);\n\nextern int rtsx_usb_read_ppbuf(struct rtsx_ucr *ucr, u8 *buf, int buf_len);\nextern int rtsx_usb_write_ppbuf(struct rtsx_ucr *ucr, u8 *buf, int buf_len);\nextern int rtsx_usb_switch_clock(struct rtsx_ucr *ucr, unsigned int card_clock,\n\t\tu8 ssc_depth, bool initial_mode, bool double_clk, bool vpclk);\nextern int rtsx_usb_card_exclusive_check(struct rtsx_ucr *ucr, int card);\n\n \n#define SD_CD\t\t0x01\n#define MS_CD\t\t0x02\n#define XD_CD\t\t0x04\n#define CD_MASK\t\t(SD_CD | MS_CD | XD_CD)\n#define SD_WP\t\t0x08\n\n \n#define READ_REG_CMD\t\t0\n#define WRITE_REG_CMD\t\t1\n#define CHECK_REG_CMD\t\t2\n\n#define PACKET_TYPE\t\t4\n#define CNT_H\t\t\t5\n#define CNT_L\t\t\t6\n#define STAGE_FLAG\t\t7\n#define CMD_OFFSET\t\t8\n#define SEQ_WRITE_DATA_OFFSET\t12\n\n#define BATCH_CMD\t\t0\n#define SEQ_READ\t\t1\n#define SEQ_WRITE\t\t2\n\n#define STAGE_R\t\t\t0x01\n#define STAGE_DI\t\t0x02\n#define STAGE_DO\t\t0x04\n#define STAGE_MS_STATUS\t\t0x08\n#define STAGE_XD_STATUS\t\t0x10\n#define MODE_C\t\t\t0x00\n#define MODE_CR\t\t\t(STAGE_R)\n#define MODE_CDIR\t\t(STAGE_R | STAGE_DI)\n#define MODE_CDOR\t\t(STAGE_R | STAGE_DO)\n\n#define EP0_OP_SHIFT\t\t14\n#define EP0_READ_REG_CMD\t2\n#define EP0_WRITE_REG_CMD\t3\n\n#define rtsx_usb_cmd_hdr_tag(ucr)\t\t\\\n\tdo {\t\t\t\t\t\\\n\t\tucr->cmd_buf[0] = 'R';\t\t\\\n\t\tucr->cmd_buf[1] = 'T';\t\t\\\n\t\tucr->cmd_buf[2] = 'C';\t\t\\\n\t\tucr->cmd_buf[3] = 'R';\t\t\\\n\t} while (0)\n\nstatic inline void rtsx_usb_init_cmd(struct rtsx_ucr *ucr)\n{\n\trtsx_usb_cmd_hdr_tag(ucr);\n\tucr->cmd_idx = 0;\n\tucr->cmd_buf[PACKET_TYPE] = BATCH_CMD;\n}\n\n \n#define FPDCTL\t\t\t\t0xFC00\n#define SSC_DIV_N_0\t\t\t0xFC07\n#define SSC_CTL1\t\t\t0xFC09\n#define SSC_CTL2\t\t\t0xFC0A\n#define CFG_MODE\t\t\t0xFC0E\n#define CFG_MODE_1\t\t\t0xFC0F\n#define RCCTL\t\t\t\t0xFC14\n#define SOF_WDOG\t\t\t0xFC28\n#define SYS_DUMMY0\t\t\t0xFC30\n\n#define MS_BLKEND\t\t\t0xFD30\n#define MS_READ_START\t\t\t0xFD31\n#define MS_READ_COUNT\t\t\t0xFD32\n#define MS_WRITE_START\t\t\t0xFD33\n#define MS_WRITE_COUNT\t\t\t0xFD34\n#define MS_COMMAND\t\t\t0xFD35\n#define MS_OLD_BLOCK_0\t\t\t0xFD36\n#define MS_OLD_BLOCK_1\t\t\t0xFD37\n#define MS_NEW_BLOCK_0\t\t\t0xFD38\n#define MS_NEW_BLOCK_1\t\t\t0xFD39\n#define MS_LOG_BLOCK_0\t\t\t0xFD3A\n#define MS_LOG_BLOCK_1\t\t\t0xFD3B\n#define MS_BUS_WIDTH\t\t\t0xFD3C\n#define MS_PAGE_START\t\t\t0xFD3D\n#define MS_PAGE_LENGTH\t\t\t0xFD3E\n#define MS_CFG\t\t\t\t0xFD40\n#define MS_TPC\t\t\t\t0xFD41\n#define MS_TRANS_CFG\t\t\t0xFD42\n#define MS_TRANSFER\t\t\t0xFD43\n#define MS_INT_REG\t\t\t0xFD44\n#define MS_BYTE_CNT\t\t\t0xFD45\n#define MS_SECTOR_CNT_L\t\t\t0xFD46\n#define MS_SECTOR_CNT_H\t\t\t0xFD47\n#define MS_DBUS_H\t\t\t0xFD48\n\n#define CARD_DMA1_CTL\t\t\t0xFD5C\n#define CARD_PULL_CTL1\t\t\t0xFD60\n#define CARD_PULL_CTL2\t\t\t0xFD61\n#define CARD_PULL_CTL3\t\t\t0xFD62\n#define CARD_PULL_CTL4\t\t\t0xFD63\n#define CARD_PULL_CTL5\t\t\t0xFD64\n#define CARD_PULL_CTL6\t\t\t0xFD65\n#define CARD_EXIST\t\t\t0xFD6F\n#define CARD_INT_PEND\t\t\t0xFD71\n\n#define LDO_POWER_CFG\t\t\t0xFD7B\n\n#define SD_CFG1\t\t\t\t0xFDA0\n#define SD_CFG2\t\t\t\t0xFDA1\n#define SD_CFG3\t\t\t\t0xFDA2\n#define SD_STAT1\t\t\t0xFDA3\n#define SD_STAT2\t\t\t0xFDA4\n#define SD_BUS_STAT\t\t\t0xFDA5\n#define SD_PAD_CTL\t\t\t0xFDA6\n#define SD_SAMPLE_POINT_CTL\t\t0xFDA7\n#define SD_PUSH_POINT_CTL\t\t0xFDA8\n#define SD_CMD0\t\t\t\t0xFDA9\n#define SD_CMD1\t\t\t\t0xFDAA\n#define SD_CMD2\t\t\t\t0xFDAB\n#define SD_CMD3\t\t\t\t0xFDAC\n#define SD_CMD4\t\t\t\t0xFDAD\n#define SD_CMD5\t\t\t\t0xFDAE\n#define SD_BYTE_CNT_L\t\t\t0xFDAF\n#define SD_BYTE_CNT_H\t\t\t0xFDB0\n#define SD_BLOCK_CNT_L\t\t\t0xFDB1\n#define SD_BLOCK_CNT_H\t\t\t0xFDB2\n#define SD_TRANSFER\t\t\t0xFDB3\n#define SD_CMD_STATE\t\t\t0xFDB5\n#define SD_DATA_STATE\t\t\t0xFDB6\n#define SD_VPCLK0_CTL\t\t\t0xFC2A\n#define SD_VPCLK1_CTL\t\t\t0xFC2B\n#define SD_DCMPS0_CTL\t\t\t0xFC2C\n#define SD_DCMPS1_CTL\t\t\t0xFC2D\n\n#define CARD_DMA1_CTL\t\t\t0xFD5C\n\n#define HW_VERSION\t\t\t0xFC01\n\n#define SSC_CLK_FPGA_SEL\t\t0xFC02\n#define CLK_DIV\t\t\t\t0xFC03\n#define SFSM_ED\t\t\t\t0xFC04\n\n#define CD_DEGLITCH_WIDTH\t\t0xFC20\n#define CD_DEGLITCH_EN\t\t\t0xFC21\n#define AUTO_DELINK_EN\t\t\t0xFC23\n\n#define FPGA_PULL_CTL\t\t\t0xFC1D\n#define CARD_CLK_SOURCE\t\t\t0xFC2E\n\n#define CARD_SHARE_MODE\t\t\t0xFD51\n#define CARD_DRIVE_SEL\t\t\t0xFD52\n#define CARD_STOP\t\t\t0xFD53\n#define CARD_OE\t\t\t\t0xFD54\n#define CARD_AUTO_BLINK\t\t\t0xFD55\n#define CARD_GPIO\t\t\t0xFD56\n#define SD30_DRIVE_SEL\t\t\t0xFD57\n\n#define CARD_DATA_SOURCE\t\t0xFD5D\n#define CARD_SELECT\t\t\t0xFD5E\n\n#define CARD_CLK_EN\t\t\t0xFD79\n#define CARD_PWR_CTL\t\t\t0xFD7A\n\n#define OCPCTL\t\t\t\t0xFD80\n#define OCPPARA1\t\t\t0xFD81\n#define OCPPARA2\t\t\t0xFD82\n#define OCPSTAT\t\t\t\t0xFD83\n\n#define HS_USB_STAT\t\t\t0xFE01\n#define HS_VCONTROL\t\t\t0xFE26\n#define HS_VSTAIN\t\t\t0xFE27\n#define HS_VLOADM\t\t\t0xFE28\n#define HS_VSTAOUT\t\t\t0xFE29\n\n#define MC_IRQ\t\t\t\t0xFF00\n#define MC_IRQEN\t\t\t0xFF01\n#define MC_FIFO_CTL\t\t\t0xFF02\n#define MC_FIFO_BC0\t\t\t0xFF03\n#define MC_FIFO_BC1\t\t\t0xFF04\n#define MC_FIFO_STAT\t\t\t0xFF05\n#define MC_FIFO_MODE\t\t\t0xFF06\n#define MC_FIFO_RD_PTR0\t\t\t0xFF07\n#define MC_FIFO_RD_PTR1\t\t\t0xFF08\n#define MC_DMA_CTL\t\t\t0xFF10\n#define MC_DMA_TC0\t\t\t0xFF11\n#define MC_DMA_TC1\t\t\t0xFF12\n#define MC_DMA_TC2\t\t\t0xFF13\n#define MC_DMA_TC3\t\t\t0xFF14\n#define MC_DMA_RST\t\t\t0xFF15\n\n#define RBUF_SIZE_MASK\t\t\t0xFBFF\n#define RBUF_BASE\t\t\t0xF000\n#define PPBUF_BASE1\t\t\t0xF800\n#define PPBUF_BASE2\t\t\t0xFA00\n\n \n#define POWER_OFF\t\t\t0x03\n#define PARTIAL_POWER_ON\t\t0x02\n#define POWER_ON\t\t\t0x00\n#define POWER_MASK\t\t\t0x03\n#define LDO3318_PWR_MASK\t\t0x0C\n#define LDO_ON\t\t\t\t0x00\n#define LDO_SUSPEND\t\t\t0x08\n#define LDO_OFF\t\t\t\t0x0C\n#define DV3318_AUTO_PWR_OFF\t\t0x10\n#define FORCE_LDO_POWERB\t\t0x60\n\n \n#define TUNE_SD18_MASK\t\t\t0x1C\n#define TUNE_SD18_1V7\t\t\t0x00\n#define TUNE_SD18_1V8\t\t\t(0x01 << 2)\n#define TUNE_SD18_1V9\t\t\t(0x02 << 2)\n#define TUNE_SD18_2V0\t\t\t(0x03 << 2)\n#define TUNE_SD18_2V7\t\t\t(0x04 << 2)\n#define TUNE_SD18_2V8\t\t\t(0x05 << 2)\n#define TUNE_SD18_2V9\t\t\t(0x06 << 2)\n#define TUNE_SD18_3V3\t\t\t(0x07 << 2)\n\n \n#define CLK_CHANGE\t\t\t0x80\n#define CLK_DIV_1\t\t\t0x00\n#define CLK_DIV_2\t\t\t0x01\n#define CLK_DIV_4\t\t\t0x02\n#define CLK_DIV_8\t\t\t0x03\n\n#define SSC_POWER_MASK\t\t\t0x01\n#define SSC_POWER_DOWN\t\t\t0x01\n#define SSC_POWER_ON\t\t\t0x00\n\n#define FPGA_VER\t\t\t0x80\n#define HW_VER_MASK\t\t\t0x0F\n\n#define EXTEND_DMA1_ASYNC_SIGNAL\t0x02\n\n \n#define XTAL_FREE\t\t\t0x80\n#define CLK_MODE_MASK\t\t\t0x03\n#define CLK_MODE_12M_XTAL\t\t0x00\n#define CLK_MODE_NON_XTAL\t\t0x01\n#define CLK_MODE_24M_OSC\t\t0x02\n#define CLK_MODE_48M_OSC\t\t0x03\n\n \n#define RTS5179\t\t\t\t0x02\n\n#define NYET_EN\t\t\t\t0x01\n#define NYET_MSAK\t\t\t0x01\n\n#define SD30_DRIVE_MASK\t\t\t0x07\n#define SD20_DRIVE_MASK\t\t\t0x03\n\n#define DISABLE_SD_CD\t\t\t0x08\n#define DISABLE_MS_CD\t\t\t0x10\n#define DISABLE_XD_CD\t\t\t0x20\n#define SD_CD_DEGLITCH_EN\t\t0x01\n#define MS_CD_DEGLITCH_EN\t\t0x02\n#define XD_CD_DEGLITCH_EN\t\t0x04\n\n#define\tCARD_SHARE_LQFP48\t\t0x04\n#define\tCARD_SHARE_QFN24\t\t0x00\n#define CARD_SHARE_LQFP_SEL\t\t0x04\n#define\tCARD_SHARE_XD\t\t\t0x00\n#define\tCARD_SHARE_SD\t\t\t0x01\n#define\tCARD_SHARE_MS\t\t\t0x02\n#define CARD_SHARE_MASK\t\t\t0x03\n\n\n \n#define DRIVER_TYPE_A\t\t\t0x05\n#define DRIVER_TYPE_B\t\t\t0x03\n#define DRIVER_TYPE_C\t\t\t0x02\n#define DRIVER_TYPE_D\t\t\t0x01\n\n \n#define\tSD_CLK_TOGGLE_EN\t\t0x80\n#define\tSD_CLK_FORCE_STOP\t        0x40\n#define\tSD_DAT3_STATUS\t\t        0x10\n#define\tSD_DAT2_STATUS\t\t        0x08\n#define\tSD_DAT1_STATUS\t\t        0x04\n#define\tSD_DAT0_STATUS\t\t        0x02\n#define\tSD_CMD_STATUS\t\t\t0x01\n\n \n#define\tSD_IO_USING_1V8\t\t        0x80\n#define\tSD_IO_USING_3V3\t\t        0x7F\n#define\tTYPE_A_DRIVING\t\t        0x00\n#define\tTYPE_B_DRIVING\t\t\t0x01\n#define\tTYPE_C_DRIVING\t\t\t0x02\n#define\tTYPE_D_DRIVING\t\t        0x03\n\n \n#define SD_CLK_EN\t\t\t0x04\n#define MS_CLK_EN\t\t\t0x08\n\n \n#define SD_MOD_SEL\t\t\t2\n#define MS_MOD_SEL\t\t\t3\n\n \n#define\tCARD_SHARE_LQFP48\t\t0x04\n#define\tCARD_SHARE_QFN24\t\t0x00\n#define CARD_SHARE_LQFP_SEL\t\t0x04\n#define\tCARD_SHARE_XD\t\t\t0x00\n#define\tCARD_SHARE_SD\t\t\t0x01\n#define\tCARD_SHARE_MS\t\t\t0x02\n#define CARD_SHARE_MASK\t\t\t0x03\n\n \n#define SSC_RSTB\t\t\t0x80\n#define SSC_8X_EN\t\t\t0x40\n#define SSC_FIX_FRAC\t\t\t0x20\n#define SSC_SEL_1M\t\t\t0x00\n#define SSC_SEL_2M\t\t\t0x08\n#define SSC_SEL_4M\t\t\t0x10\n#define SSC_SEL_8M\t\t\t0x18\n\n \n#define SSC_DEPTH_MASK\t\t\t0x03\n#define SSC_DEPTH_DISALBE\t\t0x00\n#define SSC_DEPTH_2M\t\t\t0x01\n#define SSC_DEPTH_1M\t\t\t0x02\n#define SSC_DEPTH_512K\t\t\t0x03\n\n \n#define PHASE_CHANGE\t\t\t0x80\n#define PHASE_NOT_RESET\t\t\t0x40\n\n \n#define\tSD_TRANSFER_START\t\t0x80\n#define\tSD_TRANSFER_END\t\t\t0x40\n#define SD_STAT_IDLE\t\t\t0x20\n#define\tSD_TRANSFER_ERR\t\t\t0x10\n#define\tSD_TM_NORMAL_WRITE\t\t0x00\n#define\tSD_TM_AUTO_WRITE_3\t\t0x01\n#define\tSD_TM_AUTO_WRITE_4\t\t0x02\n#define\tSD_TM_AUTO_READ_3\t\t0x05\n#define\tSD_TM_AUTO_READ_4\t\t0x06\n#define\tSD_TM_CMD_RSP\t\t\t0x08\n#define\tSD_TM_AUTO_WRITE_1\t\t0x09\n#define\tSD_TM_AUTO_WRITE_2\t\t0x0A\n#define\tSD_TM_NORMAL_READ\t\t0x0C\n#define\tSD_TM_AUTO_READ_1\t\t0x0D\n#define\tSD_TM_AUTO_READ_2\t\t0x0E\n#define\tSD_TM_AUTO_TUNING\t\t0x0F\n\n \n#define SD_CLK_DIVIDE_0\t\t\t0x00\n#define\tSD_CLK_DIVIDE_256\t\t0xC0\n#define\tSD_CLK_DIVIDE_128\t\t0x80\n#define SD_CLK_DIVIDE_MASK\t\t0xC0\n#define\tSD_BUS_WIDTH_1BIT\t\t0x00\n#define\tSD_BUS_WIDTH_4BIT\t\t0x01\n#define\tSD_BUS_WIDTH_8BIT\t\t0x02\n#define\tSD_ASYNC_FIFO_RST\t\t0x10\n#define\tSD_20_MODE\t\t\t0x00\n#define\tSD_DDR_MODE\t\t\t0x04\n#define\tSD_30_MODE\t\t\t0x08\n\n \n#define\tSD_CALCULATE_CRC7\t\t0x00\n#define\tSD_NO_CALCULATE_CRC7\t\t0x80\n#define\tSD_CHECK_CRC16\t\t\t0x00\n#define\tSD_NO_CHECK_CRC16\t\t0x40\n#define SD_WAIT_CRC_TO_EN\t\t0x20\n#define\tSD_WAIT_BUSY_END\t\t0x08\n#define\tSD_NO_WAIT_BUSY_END\t\t0x00\n#define\tSD_CHECK_CRC7\t\t\t0x00\n#define\tSD_NO_CHECK_CRC7\t\t0x04\n#define\tSD_RSP_LEN_0\t\t\t0x00\n#define\tSD_RSP_LEN_6\t\t\t0x01\n#define\tSD_RSP_LEN_17\t\t\t0x02\n#define\tSD_RSP_TYPE_R0\t\t\t0x04\n#define\tSD_RSP_TYPE_R1\t\t\t0x01\n#define\tSD_RSP_TYPE_R1b\t\t\t0x09\n#define\tSD_RSP_TYPE_R2\t\t\t0x02\n#define\tSD_RSP_TYPE_R3\t\t\t0x05\n#define\tSD_RSP_TYPE_R4\t\t\t0x05\n#define\tSD_RSP_TYPE_R5\t\t\t0x01\n#define\tSD_RSP_TYPE_R6\t\t\t0x01\n#define\tSD_RSP_TYPE_R7\t\t\t0x01\n\n \n#define\tSD_CRC7_ERR\t\t\t0x80\n#define\tSD_CRC16_ERR\t\t\t0x40\n#define\tSD_CRC_WRITE_ERR\t\t0x20\n#define\tSD_CRC_WRITE_ERR_MASK\t\t0x1C\n#define\tGET_CRC_TIME_OUT\t\t0x02\n#define\tSD_TUNING_COMPARE_ERR\t\t0x01\n\n \n#define SD_DATA_IDLE\t\t\t0x80\n\n \n#define PINGPONG_BUFFER\t\t\t0x01\n#define RING_BUFFER\t\t\t0x00\n\n \n#define SD_OUTPUT_EN\t\t\t0x04\n#define MS_OUTPUT_EN\t\t\t0x08\n\n \n#define SD_STOP\t\t\t\t0x04\n#define MS_STOP\t\t\t\t0x08\n#define SD_CLR_ERR\t\t\t0x40\n#define MS_CLR_ERR\t\t\t0x80\n\n \n#define CRC_FIX_CLK\t\t\t(0x00 << 0)\n#define CRC_VAR_CLK0\t\t\t(0x01 << 0)\n#define CRC_VAR_CLK1\t\t\t(0x02 << 0)\n#define SD30_FIX_CLK\t\t\t(0x00 << 2)\n#define SD30_VAR_CLK0\t\t\t(0x01 << 2)\n#define SD30_VAR_CLK1\t\t\t(0x02 << 2)\n#define SAMPLE_FIX_CLK\t\t\t(0x00 << 4)\n#define SAMPLE_VAR_CLK0\t\t\t(0x01 << 4)\n#define SAMPLE_VAR_CLK1\t\t\t(0x02 << 4)\n\n \n#define\tDDR_FIX_RX_DAT\t\t\t0x00\n#define\tDDR_VAR_RX_DAT\t\t\t0x80\n#define\tDDR_FIX_RX_DAT_EDGE\t\t0x00\n#define\tDDR_FIX_RX_DAT_14_DELAY\t\t0x40\n#define\tDDR_FIX_RX_CMD\t\t\t0x00\n#define\tDDR_VAR_RX_CMD\t\t\t0x20\n#define\tDDR_FIX_RX_CMD_POS_EDGE\t\t0x00\n#define\tDDR_FIX_RX_CMD_14_DELAY\t\t0x10\n#define\tSD20_RX_POS_EDGE\t\t0x00\n#define\tSD20_RX_14_DELAY\t\t0x08\n#define SD20_RX_SEL_MASK\t\t0x08\n\n \n#define\tDDR_FIX_TX_CMD_DAT\t\t0x00\n#define\tDDR_VAR_TX_CMD_DAT\t\t0x80\n#define\tDDR_FIX_TX_DAT_14_TSU\t\t0x00\n#define\tDDR_FIX_TX_DAT_12_TSU\t\t0x40\n#define\tDDR_FIX_TX_CMD_NEG_EDGE\t\t0x00\n#define\tDDR_FIX_TX_CMD_14_AHEAD\t\t0x20\n#define\tSD20_TX_NEG_EDGE\t\t0x00\n#define\tSD20_TX_14_AHEAD\t\t0x10\n#define SD20_TX_SEL_MASK\t\t0x10\n#define\tDDR_VAR_SDCLK_POL_SWAP\t\t0x01\n\n \n#define\tSAMPLE_TIME_RISING\t\t0x00\n#define\tSAMPLE_TIME_FALLING\t\t0x80\n#define\tPUSH_TIME_DEFAULT\t\t0x00\n#define\tPUSH_TIME_ODD\t\t\t0x40\n#define\tNO_EXTEND_TOGGLE\t\t0x00\n#define\tEXTEND_TOGGLE_CHK\t\t0x20\n#define\tMS_BUS_WIDTH_1\t\t\t0x00\n#define\tMS_BUS_WIDTH_4\t\t\t0x10\n#define\tMS_BUS_WIDTH_8\t\t\t0x18\n#define\tMS_2K_SECTOR_MODE\t\t0x04\n#define\tMS_512_SECTOR_MODE\t\t0x00\n#define\tMS_TOGGLE_TIMEOUT_EN\t\t0x00\n#define\tMS_TOGGLE_TIMEOUT_DISEN\t\t0x01\n#define MS_NO_CHECK_INT\t\t\t0x02\n\n \n#define\tWAIT_INT\t\t\t0x80\n#define\tNO_WAIT_INT\t\t\t0x00\n#define\tNO_AUTO_READ_INT_REG\t\t0x00\n#define\tAUTO_READ_INT_REG\t\t0x40\n#define\tMS_CRC16_ERR\t\t\t0x20\n#define\tMS_RDY_TIMEOUT\t\t\t0x10\n#define\tMS_INT_CMDNK\t\t\t0x08\n#define\tMS_INT_BREQ\t\t\t0x04\n#define\tMS_INT_ERR\t\t\t0x02\n#define\tMS_INT_CED\t\t\t0x01\n\n \n#define\tMS_TRANSFER_START\t\t0x80\n#define\tMS_TRANSFER_END\t\t\t0x40\n#define\tMS_TRANSFER_ERR\t\t\t0x20\n#define\tMS_BS_STATE\t\t\t0x10\n#define\tMS_TM_READ_BYTES\t\t0x00\n#define\tMS_TM_NORMAL_READ\t\t0x01\n#define\tMS_TM_WRITE_BYTES\t\t0x04\n#define\tMS_TM_NORMAL_WRITE\t\t0x05\n#define\tMS_TM_AUTO_READ\t\t\t0x08\n#define\tMS_TM_AUTO_WRITE\t\t0x0C\n#define MS_TM_SET_CMD\t\t\t0x06\n#define MS_TM_COPY_PAGE\t\t\t0x07\n#define MS_TM_MULTI_READ\t\t0x02\n#define MS_TM_MULTI_WRITE\t\t0x03\n\n \n#define FIFO_FLUSH\t\t\t0x01\n\n \n#define DMA_RESET  0x01\n\n \n#define DMA_TC_EQ_0\t\t\t0x80\n#define DMA_DIR_TO_CARD\t\t\t0x00\n#define DMA_DIR_FROM_CARD\t\t0x02\n#define DMA_EN\t\t\t\t0x01\n#define DMA_128\t\t\t\t(0 << 2)\n#define DMA_256\t\t\t\t(1 << 2)\n#define DMA_512\t\t\t\t(2 << 2)\n#define DMA_1024\t\t\t(3 << 2)\n#define DMA_PACK_SIZE_MASK\t\t0x0C\n\n \n#define XD_INT\t\t\t\t0x10\n#define MS_INT\t\t\t\t0x08\n#define SD_INT\t\t\t\t0x04\n\n \nstatic inline int rtsx_usb_turn_on_led(struct rtsx_ucr *ucr)\n{\n\treturn  rtsx_usb_ep0_write_register(ucr, CARD_GPIO, 0x03, 0x02);\n}\n\nstatic inline int rtsx_usb_turn_off_led(struct rtsx_ucr *ucr)\n{\n\treturn rtsx_usb_ep0_write_register(ucr, CARD_GPIO, 0x03, 0x03);\n}\n\n \nstatic inline void rtsx_usb_clear_fsm_err(struct rtsx_ucr *ucr)\n{\n\trtsx_usb_ep0_write_register(ucr, SFSM_ED, 0xf8, 0xf8);\n}\n\nstatic inline void rtsx_usb_clear_dma_err(struct rtsx_ucr *ucr)\n{\n\trtsx_usb_ep0_write_register(ucr, MC_FIFO_CTL,\n\t\t\tFIFO_FLUSH, FIFO_FLUSH);\n\trtsx_usb_ep0_write_register(ucr, MC_DMA_RST, DMA_RESET, DMA_RESET);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}