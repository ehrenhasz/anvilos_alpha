{
  "module_name": "arm-smccc.h",
  "hash_id": "a0aa0ec62a8f03a11211bef894befb17a428b6956e801d066b142a9c616a7892",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/arm-smccc.h",
  "human_readable_source": " \n \n#ifndef __LINUX_ARM_SMCCC_H\n#define __LINUX_ARM_SMCCC_H\n\n#include <linux/args.h>\n#include <linux/init.h>\n#include <uapi/linux/const.h>\n\n \n\n#define ARM_SMCCC_STD_CALL\t        _AC(0,U)\n#define ARM_SMCCC_FAST_CALL\t        _AC(1,U)\n#define ARM_SMCCC_TYPE_SHIFT\t\t31\n\n#define ARM_SMCCC_SMC_32\t\t0\n#define ARM_SMCCC_SMC_64\t\t1\n#define ARM_SMCCC_CALL_CONV_SHIFT\t30\n\n#define ARM_SMCCC_OWNER_MASK\t\t0x3F\n#define ARM_SMCCC_OWNER_SHIFT\t\t24\n\n#define ARM_SMCCC_FUNC_MASK\t\t0xFFFF\n\n#define ARM_SMCCC_IS_FAST_CALL(smc_val)\t\\\n\t((smc_val) & (ARM_SMCCC_FAST_CALL << ARM_SMCCC_TYPE_SHIFT))\n#define ARM_SMCCC_IS_64(smc_val) \\\n\t((smc_val) & (ARM_SMCCC_SMC_64 << ARM_SMCCC_CALL_CONV_SHIFT))\n#define ARM_SMCCC_FUNC_NUM(smc_val)\t((smc_val) & ARM_SMCCC_FUNC_MASK)\n#define ARM_SMCCC_OWNER_NUM(smc_val) \\\n\t(((smc_val) >> ARM_SMCCC_OWNER_SHIFT) & ARM_SMCCC_OWNER_MASK)\n\n#define ARM_SMCCC_CALL_VAL(type, calling_convention, owner, func_num) \\\n\t(((type) << ARM_SMCCC_TYPE_SHIFT) | \\\n\t((calling_convention) << ARM_SMCCC_CALL_CONV_SHIFT) | \\\n\t(((owner) & ARM_SMCCC_OWNER_MASK) << ARM_SMCCC_OWNER_SHIFT) | \\\n\t((func_num) & ARM_SMCCC_FUNC_MASK))\n\n#define ARM_SMCCC_OWNER_ARCH\t\t0\n#define ARM_SMCCC_OWNER_CPU\t\t1\n#define ARM_SMCCC_OWNER_SIP\t\t2\n#define ARM_SMCCC_OWNER_OEM\t\t3\n#define ARM_SMCCC_OWNER_STANDARD\t4\n#define ARM_SMCCC_OWNER_STANDARD_HYP\t5\n#define ARM_SMCCC_OWNER_VENDOR_HYP\t6\n#define ARM_SMCCC_OWNER_TRUSTED_APP\t48\n#define ARM_SMCCC_OWNER_TRUSTED_APP_END\t49\n#define ARM_SMCCC_OWNER_TRUSTED_OS\t50\n#define ARM_SMCCC_OWNER_TRUSTED_OS_END\t63\n\n#define ARM_SMCCC_FUNC_QUERY_CALL_UID  0xff01\n\n#define ARM_SMCCC_QUIRK_NONE\t\t0\n#define ARM_SMCCC_QUIRK_QCOM_A6\t\t1  \n\n#define ARM_SMCCC_VERSION_1_0\t\t0x10000\n#define ARM_SMCCC_VERSION_1_1\t\t0x10001\n#define ARM_SMCCC_VERSION_1_2\t\t0x10002\n#define ARM_SMCCC_VERSION_1_3\t\t0x10003\n\n#define ARM_SMCCC_1_3_SVE_HINT\t\t0x10000\n#define ARM_SMCCC_CALL_HINTS\t\tARM_SMCCC_1_3_SVE_HINT\n\n\n#define ARM_SMCCC_VERSION_FUNC_ID\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 0)\n\n#define ARM_SMCCC_ARCH_FEATURES_FUNC_ID\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 1)\n\n#define ARM_SMCCC_ARCH_SOC_ID\t\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 2)\n\n#define ARM_SMCCC_ARCH_WORKAROUND_1\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 0x8000)\n\n#define ARM_SMCCC_ARCH_WORKAROUND_2\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 0x7fff)\n\n#define ARM_SMCCC_ARCH_WORKAROUND_3\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   0, 0x3fff)\n\n#define ARM_SMCCC_VENDOR_HYP_CALL_UID_FUNC_ID\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_VENDOR_HYP,\t\t\t\\\n\t\t\t   ARM_SMCCC_FUNC_QUERY_CALL_UID)\n\n \n#define ARM_SMCCC_VENDOR_HYP_UID_KVM_REG_0\t0xb66fb428U\n#define ARM_SMCCC_VENDOR_HYP_UID_KVM_REG_1\t0xe911c52eU\n#define ARM_SMCCC_VENDOR_HYP_UID_KVM_REG_2\t0x564bcaa9U\n#define ARM_SMCCC_VENDOR_HYP_UID_KVM_REG_3\t0x743a004dU\n\n \n#define ARM_SMCCC_KVM_FUNC_FEATURES\t\t0\n#define ARM_SMCCC_KVM_FUNC_PTP\t\t\t1\n#define ARM_SMCCC_KVM_FUNC_FEATURES_2\t\t127\n#define ARM_SMCCC_KVM_NUM_FUNCS\t\t\t128\n\n#define ARM_SMCCC_VENDOR_HYP_KVM_FEATURES_FUNC_ID\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_VENDOR_HYP,\t\t\t\\\n\t\t\t   ARM_SMCCC_KVM_FUNC_FEATURES)\n\n#define SMCCC_ARCH_WORKAROUND_RET_UNAFFECTED\t1\n\n \n#define ARM_SMCCC_VENDOR_HYP_KVM_PTP_FUNC_ID\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_VENDOR_HYP,\t\t\t\\\n\t\t\t   ARM_SMCCC_KVM_FUNC_PTP)\n\n \n#define KVM_PTP_VIRT_COUNTER\t\t\t0\n#define KVM_PTP_PHYS_COUNTER\t\t\t1\n\n \n#define ARM_SMCCC_HV_PV_TIME_FEATURES\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_64,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD_HYP,\t\\\n\t\t\t   0x20)\n\n#define ARM_SMCCC_HV_PV_TIME_ST\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_64,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD_HYP,\t\\\n\t\t\t   0x21)\n\n \n#define ARM_SMCCC_TRNG_VERSION\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD,\t\t\\\n\t\t\t   0x50)\n\n#define ARM_SMCCC_TRNG_FEATURES\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD,\t\t\\\n\t\t\t   0x51)\n\n#define ARM_SMCCC_TRNG_GET_UUID\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD,\t\t\\\n\t\t\t   0x52)\n\n#define ARM_SMCCC_TRNG_RND32\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_32,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD,\t\t\\\n\t\t\t   0x53)\n\n#define ARM_SMCCC_TRNG_RND64\t\t\t\t\t\\\n\tARM_SMCCC_CALL_VAL(ARM_SMCCC_FAST_CALL,\t\t\t\\\n\t\t\t   ARM_SMCCC_SMC_64,\t\t\t\\\n\t\t\t   ARM_SMCCC_OWNER_STANDARD,\t\t\\\n\t\t\t   0x53)\n\n \n#define SMCCC_RET_SUCCESS\t\t\t0\n#define SMCCC_RET_NOT_SUPPORTED\t\t\t-1\n#define SMCCC_RET_NOT_REQUIRED\t\t\t-2\n#define SMCCC_RET_INVALID_PARAMETER\t\t-3\n\n#ifndef __ASSEMBLY__\n\n#include <linux/linkage.h>\n#include <linux/types.h>\n\nenum arm_smccc_conduit {\n\tSMCCC_CONDUIT_NONE,\n\tSMCCC_CONDUIT_SMC,\n\tSMCCC_CONDUIT_HVC,\n};\n\n \nenum arm_smccc_conduit arm_smccc_1_1_get_conduit(void);\n\n \nu32 arm_smccc_get_version(void);\n\nvoid __init arm_smccc_version_init(u32 version, enum arm_smccc_conduit conduit);\n\nextern u64 smccc_has_sve_hint;\n\n \ns32 arm_smccc_get_soc_id_version(void);\n\n \ns32 arm_smccc_get_soc_id_revision(void);\n\n \nstruct arm_smccc_res {\n\tunsigned long a0;\n\tunsigned long a1;\n\tunsigned long a2;\n\tunsigned long a3;\n};\n\n#ifdef CONFIG_ARM64\n \nstruct arm_smccc_1_2_regs {\n\tunsigned long a0;\n\tunsigned long a1;\n\tunsigned long a2;\n\tunsigned long a3;\n\tunsigned long a4;\n\tunsigned long a5;\n\tunsigned long a6;\n\tunsigned long a7;\n\tunsigned long a8;\n\tunsigned long a9;\n\tunsigned long a10;\n\tunsigned long a11;\n\tunsigned long a12;\n\tunsigned long a13;\n\tunsigned long a14;\n\tunsigned long a15;\n\tunsigned long a16;\n\tunsigned long a17;\n};\n\n \nasmlinkage void arm_smccc_1_2_hvc(const struct arm_smccc_1_2_regs *args,\n\t\t\t\t  struct arm_smccc_1_2_regs *res);\n\n \nasmlinkage void arm_smccc_1_2_smc(const struct arm_smccc_1_2_regs *args,\n\t\t\t\t  struct arm_smccc_1_2_regs *res);\n#endif\n\n \nstruct arm_smccc_quirk {\n\tint\tid;\n\tunion {\n\t\tunsigned long a6;\n\t} state;\n};\n\n \nasmlinkage unsigned long __arm_smccc_sve_check(unsigned long x0);\n\n \n#ifdef CONFIG_HAVE_ARM_SMCCC\nasmlinkage void __arm_smccc_smc(unsigned long a0, unsigned long a1,\n\t\t\tunsigned long a2, unsigned long a3, unsigned long a4,\n\t\t\tunsigned long a5, unsigned long a6, unsigned long a7,\n\t\t\tstruct arm_smccc_res *res, struct arm_smccc_quirk *quirk);\n#else\nstatic inline void __arm_smccc_smc(unsigned long a0, unsigned long a1,\n\t\t\tunsigned long a2, unsigned long a3, unsigned long a4,\n\t\t\tunsigned long a5, unsigned long a6, unsigned long a7,\n\t\t\tstruct arm_smccc_res *res, struct arm_smccc_quirk *quirk)\n{\n\t*res = (struct arm_smccc_res){};\n}\n#endif\n\n \nasmlinkage void __arm_smccc_hvc(unsigned long a0, unsigned long a1,\n\t\t\tunsigned long a2, unsigned long a3, unsigned long a4,\n\t\t\tunsigned long a5, unsigned long a6, unsigned long a7,\n\t\t\tstruct arm_smccc_res *res, struct arm_smccc_quirk *quirk);\n\n#define arm_smccc_smc(...) __arm_smccc_smc(__VA_ARGS__, NULL)\n\n#define arm_smccc_smc_quirk(...) __arm_smccc_smc(__VA_ARGS__)\n\n#define arm_smccc_hvc(...) __arm_smccc_hvc(__VA_ARGS__, NULL)\n\n#define arm_smccc_hvc_quirk(...) __arm_smccc_hvc(__VA_ARGS__)\n\n \n#ifdef CONFIG_ARM64\n\n#define SMCCC_SMC_INST\t\"smc\t#0\"\n#define SMCCC_HVC_INST\t\"hvc\t#0\"\n\n#elif defined(CONFIG_ARM)\n#include <asm/opcodes-sec.h>\n#include <asm/opcodes-virt.h>\n\n#define SMCCC_SMC_INST\t__SMC(0)\n#define SMCCC_HVC_INST\t__HVC(0)\n\n#endif\n\n \n#if defined(CONFIG_ARM64_SVE) && !defined(__KVM_NVHE_HYPERVISOR__)\n\n#define SMCCC_SVE_CHECK ALTERNATIVE(\"nop \\n\",  \"bl __arm_smccc_sve_check \\n\", \\\n\t\t\t\t    ARM64_SVE)\n#define smccc_sve_clobbers \"x16\", \"x30\", \"cc\",\n\n#else\n\n#define SMCCC_SVE_CHECK\n#define smccc_sve_clobbers\n\n#endif\n\n#define __constraint_read_2\t\"r\" (arg0)\n#define __constraint_read_3\t__constraint_read_2, \"r\" (arg1)\n#define __constraint_read_4\t__constraint_read_3, \"r\" (arg2)\n#define __constraint_read_5\t__constraint_read_4, \"r\" (arg3)\n#define __constraint_read_6\t__constraint_read_5, \"r\" (arg4)\n#define __constraint_read_7\t__constraint_read_6, \"r\" (arg5)\n#define __constraint_read_8\t__constraint_read_7, \"r\" (arg6)\n#define __constraint_read_9\t__constraint_read_8, \"r\" (arg7)\n\n#define __declare_arg_2(a0, res)\t\t\t\t\t\\\n\tstruct arm_smccc_res   *___res = res;\t\t\t\t\\\n\tregister unsigned long arg0 asm(\"r0\") = (u32)a0\n\n#define __declare_arg_3(a0, a1, res)\t\t\t\t\t\\\n\ttypeof(a1) __a1 = a1;\t\t\t\t\t\t\\\n\tstruct arm_smccc_res   *___res = res;\t\t\t\t\\\n\tregister unsigned long arg0 asm(\"r0\") = (u32)a0;\t\t\t\\\n\tregister typeof(a1) arg1 asm(\"r1\") = __a1\n\n#define __declare_arg_4(a0, a1, a2, res)\t\t\t\t\\\n\ttypeof(a1) __a1 = a1;\t\t\t\t\t\t\\\n\ttypeof(a2) __a2 = a2;\t\t\t\t\t\t\\\n\tstruct arm_smccc_res   *___res = res;\t\t\t\t\\\n\tregister unsigned long arg0 asm(\"r0\") = (u32)a0;\t\t\t\\\n\tregister typeof(a1) arg1 asm(\"r1\") = __a1;\t\t\t\\\n\tregister typeof(a2) arg2 asm(\"r2\") = __a2\n\n#define __declare_arg_5(a0, a1, a2, a3, res)\t\t\t\t\\\n\ttypeof(a1) __a1 = a1;\t\t\t\t\t\t\\\n\ttypeof(a2) __a2 = a2;\t\t\t\t\t\t\\\n\ttypeof(a3) __a3 = a3;\t\t\t\t\t\t\\\n\tstruct arm_smccc_res   *___res = res;\t\t\t\t\\\n\tregister unsigned long arg0 asm(\"r0\") = (u32)a0;\t\t\t\\\n\tregister typeof(a1) arg1 asm(\"r1\") = __a1;\t\t\t\\\n\tregister typeof(a2) arg2 asm(\"r2\") = __a2;\t\t\t\\\n\tregister typeof(a3) arg3 asm(\"r3\") = __a3\n\n#define __declare_arg_6(a0, a1, a2, a3, a4, res)\t\t\t\\\n\ttypeof(a4) __a4 = a4;\t\t\t\t\t\t\\\n\t__declare_arg_5(a0, a1, a2, a3, res);\t\t\t\t\\\n\tregister typeof(a4) arg4 asm(\"r4\") = __a4\n\n#define __declare_arg_7(a0, a1, a2, a3, a4, a5, res)\t\t\t\\\n\ttypeof(a5) __a5 = a5;\t\t\t\t\t\t\\\n\t__declare_arg_6(a0, a1, a2, a3, a4, res);\t\t\t\\\n\tregister typeof(a5) arg5 asm(\"r5\") = __a5\n\n#define __declare_arg_8(a0, a1, a2, a3, a4, a5, a6, res)\t\t\\\n\ttypeof(a6) __a6 = a6;\t\t\t\t\t\t\\\n\t__declare_arg_7(a0, a1, a2, a3, a4, a5, res);\t\t\t\\\n\tregister typeof(a6) arg6 asm(\"r6\") = __a6\n\n#define __declare_arg_9(a0, a1, a2, a3, a4, a5, a6, a7, res)\t\t\\\n\ttypeof(a7) __a7 = a7;\t\t\t\t\t\t\\\n\t__declare_arg_8(a0, a1, a2, a3, a4, a5, a6, res);\t\t\\\n\tregister typeof(a7) arg7 asm(\"r7\") = __a7\n\n \n#define __arm_smccc_1_1(inst, ...)\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tregister unsigned long r0 asm(\"r0\");\t\t\t\\\n\t\tregister unsigned long r1 asm(\"r1\");\t\t\t\\\n\t\tregister unsigned long r2 asm(\"r2\");\t\t\t\\\n\t\tregister unsigned long r3 asm(\"r3\"); \t\t\t\\\n\t\tCONCATENATE(__declare_arg_,\t\t\t\t\\\n\t\t\t    COUNT_ARGS(__VA_ARGS__))(__VA_ARGS__);\t\\\n\t\tasm volatile(SMCCC_SVE_CHECK\t\t\t\t\\\n\t\t\t     inst \"\\n\" :\t\t\t\t\\\n\t\t\t     \"=r\" (r0), \"=r\" (r1), \"=r\" (r2), \"=r\" (r3)\t\\\n\t\t\t     : CONCATENATE(__constraint_read_,\t\t\\\n\t\t\t\t\t   COUNT_ARGS(__VA_ARGS__))\t\\\n\t\t\t     : smccc_sve_clobbers \"memory\");\t\t\\\n\t\tif (___res)\t\t\t\t\t\t\\\n\t\t\t*___res = (typeof(*___res)){r0, r1, r2, r3};\t\\\n\t} while (0)\n\n \n#define arm_smccc_1_1_smc(...)\t__arm_smccc_1_1(SMCCC_SMC_INST, __VA_ARGS__)\n\n \n#define arm_smccc_1_1_hvc(...)\t__arm_smccc_1_1(SMCCC_HVC_INST, __VA_ARGS__)\n\n \n#define __fail_smccc_1_1(...)\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tCONCATENATE(__declare_arg_,\t\t\t\t\\\n\t\t\t    COUNT_ARGS(__VA_ARGS__))(__VA_ARGS__);\t\\\n\t\tasm (\"\" :\t\t\t\t\t\t\\\n\t\t     : CONCATENATE(__constraint_read_,\t\t\t\\\n\t\t\t\t   COUNT_ARGS(__VA_ARGS__))\t\t\\\n\t\t     : smccc_sve_clobbers \"memory\");\t\t\t\\\n\t\tif (___res)\t\t\t\t\t\t\\\n\t\t\t___res->a0 = SMCCC_RET_NOT_SUPPORTED;\t\t\\\n\t} while (0)\n\n \n#define arm_smccc_1_1_invoke(...) ({\t\t\t\t\t\\\n\t\tint method = arm_smccc_1_1_get_conduit();\t\t\\\n\t\tswitch (method) {\t\t\t\t\t\\\n\t\tcase SMCCC_CONDUIT_HVC:\t\t\t\t\t\\\n\t\t\tarm_smccc_1_1_hvc(__VA_ARGS__);\t\t\t\\\n\t\t\tbreak;\t\t\t\t\t\t\\\n\t\tcase SMCCC_CONDUIT_SMC:\t\t\t\t\t\\\n\t\t\tarm_smccc_1_1_smc(__VA_ARGS__);\t\t\t\\\n\t\t\tbreak;\t\t\t\t\t\t\\\n\t\tdefault:\t\t\t\t\t\t\\\n\t\t\t__fail_smccc_1_1(__VA_ARGS__);\t\t\t\\\n\t\t\tmethod = SMCCC_CONDUIT_NONE;\t\t\t\\\n\t\t\tbreak;\t\t\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\tmethod;\t\t\t\t\t\t\t\\\n\t})\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}