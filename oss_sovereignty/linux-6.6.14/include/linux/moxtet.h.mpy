{
  "module_name": "moxtet.h",
  "hash_id": "e161744d7e700ba6928fbde2ada81fc703b352070af2955e5598bf01a9db3e75",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/moxtet.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_MOXTET_H\n#define __LINUX_MOXTET_H\n\n#include <linux/device.h>\n#include <linux/irq.h>\n#include <linux/irqdomain.h>\n#include <linux/mutex.h>\n\n#define TURRIS_MOX_MAX_MODULES\t10\n\nenum turris_mox_cpu_module_id {\n\tTURRIS_MOX_CPU_ID_EMMC\t= 0x00,\n\tTURRIS_MOX_CPU_ID_SD\t= 0x10,\n};\n\nenum turris_mox_module_id {\n\tTURRIS_MOX_MODULE_FIRST\t\t= 0x01,\n\n\tTURRIS_MOX_MODULE_SFP\t\t= 0x01,\n\tTURRIS_MOX_MODULE_PCI\t\t= 0x02,\n\tTURRIS_MOX_MODULE_TOPAZ\t\t= 0x03,\n\tTURRIS_MOX_MODULE_PERIDOT\t= 0x04,\n\tTURRIS_MOX_MODULE_USB3\t\t= 0x05,\n\tTURRIS_MOX_MODULE_PCI_BRIDGE\t= 0x06,\n\n\tTURRIS_MOX_MODULE_LAST\t\t= 0x06,\n};\n\n#define MOXTET_NIRQS\t16\n\nextern struct bus_type moxtet_type;\n\nstruct moxtet {\n\tstruct device\t\t\t*dev;\n\tstruct mutex\t\t\tlock;\n\tu8\t\t\t\tmodules[TURRIS_MOX_MAX_MODULES];\n\tint\t\t\t\tcount;\n\tu8\t\t\t\ttx[TURRIS_MOX_MAX_MODULES];\n\tint\t\t\t\tdev_irq;\n\tstruct {\n\t\tstruct irq_domain\t*domain;\n\t\tstruct irq_chip\t\tchip;\n\t\tunsigned long\t\tmasked, exists;\n\t\tstruct moxtet_irqpos {\n\t\t\t\t\tu8 idx;\n\t\t\t\t\tu8 bit;\n\t\t} position[MOXTET_NIRQS];\n\t} irq;\n#ifdef CONFIG_DEBUG_FS\n\tstruct dentry\t\t\t*debugfs_root;\n#endif\n};\n\nstruct moxtet_driver {\n\tconst enum turris_mox_module_id\t*id_table;\n\tstruct device_driver\t\tdriver;\n};\n\nstatic inline struct moxtet_driver *\nto_moxtet_driver(struct device_driver *drv)\n{\n\tif (!drv)\n\t\treturn NULL;\n\treturn container_of(drv, struct moxtet_driver, driver);\n}\n\nextern int __moxtet_register_driver(struct module *owner,\n\t\t\t\t    struct moxtet_driver *mdrv);\n\nstatic inline void moxtet_unregister_driver(struct moxtet_driver *mdrv)\n{\n\tif (mdrv)\n\t\tdriver_unregister(&mdrv->driver);\n}\n\n#define moxtet_register_driver(driver) \\\n\t__moxtet_register_driver(THIS_MODULE, driver)\n\n#define module_moxtet_driver(__moxtet_driver) \\\n\tmodule_driver(__moxtet_driver, moxtet_register_driver, \\\n\t\t\tmoxtet_unregister_driver)\n\nstruct moxtet_device {\n\tstruct device\t\t\tdev;\n\tstruct moxtet\t\t\t*moxtet;\n\tenum turris_mox_module_id\tid;\n\tunsigned int\t\t\tidx;\n};\n\nextern int moxtet_device_read(struct device *dev);\nextern int moxtet_device_write(struct device *dev, u8 val);\nextern int moxtet_device_written(struct device *dev);\n\nstatic inline struct moxtet_device *\nto_moxtet_device(struct device *dev)\n{\n\tif (!dev)\n\t\treturn NULL;\n\treturn container_of(dev, struct moxtet_device, dev);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}