{
  "module_name": "length.h",
  "hash_id": "ef0f1c8168e7b22d33c20d7b80fff3846baf510f231a1ffa5843fcdaf0b9f247",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/can/length.h",
  "human_readable_source": " \n \n\n#ifndef _CAN_LENGTH_H\n#define _CAN_LENGTH_H\n\n#include <linux/bits.h>\n#include <linux/can.h>\n#include <linux/can/netlink.h>\n#include <linux/math.h>\n\n \n#define CAN_FRAME_HEADER_SFF_BITS 19\n\n \n#define CAN_FRAME_HEADER_EFF_BITS 39\n\n \n#define CANFD_FRAME_HEADER_SFF_BITS 22\n\n \n#define CANFD_FRAME_HEADER_EFF_BITS 41\n\n \n#define CAN_FRAME_CRC_FIELD_BITS 16\n\n \n#define CANFD_FRAME_CRC17_FIELD_BITS 28\n\n \n#define CANFD_FRAME_CRC21_FIELD_BITS 33\n\n \n#define CAN_FRAME_FOOTER_BITS 9\n\n \n#define CAN_INTERMISSION_BITS 3\n\n \n#define can_bitstuffing_len(destuffed_len)\t\t\t\\\n\t(destuffed_len + (destuffed_len - 1) / 4)\n\n#define __can_bitstuffing_len(bitstuffing, destuffed_len)\t\\\n\t(bitstuffing ? can_bitstuffing_len(destuffed_len) :\t\\\n\t\t       destuffed_len)\n\n#define __can_cc_frame_bits(is_eff, bitstuffing,\t\t\\\n\t\t\t    intermission, data_len)\t\t\\\n(\t\t\t\t\t\t\t\t\\\n\t__can_bitstuffing_len(bitstuffing,\t\t\t\\\n\t\t(is_eff ? CAN_FRAME_HEADER_EFF_BITS :\t\t\\\n\t\t\t  CAN_FRAME_HEADER_SFF_BITS) +\t\t\\\n\t\t(data_len) * BITS_PER_BYTE +\t\t\t\\\n\t\tCAN_FRAME_CRC_FIELD_BITS) +\t\t\t\\\n\tCAN_FRAME_FOOTER_BITS +\t\t\t\t\t\\\n\t(intermission ? CAN_INTERMISSION_BITS : 0)\t\t\\\n)\n\n#define __can_fd_frame_bits(is_eff, bitstuffing,\t\t\\\n\t\t\t    intermission, data_len)\t\t\\\n(\t\t\t\t\t\t\t\t\\\n\t__can_bitstuffing_len(bitstuffing,\t\t\t\\\n\t\t(is_eff ? CANFD_FRAME_HEADER_EFF_BITS :\t\t\\\n\t\t\t  CANFD_FRAME_HEADER_SFF_BITS) +\t\\\n\t\t(data_len) * BITS_PER_BYTE) +\t\t\t\\\n\t((data_len) <= 16 ?\t\t\t\t\t\\\n\t\tCANFD_FRAME_CRC17_FIELD_BITS :\t\t\t\\\n\t\tCANFD_FRAME_CRC21_FIELD_BITS) +\t\t\t\\\n\tCAN_FRAME_FOOTER_BITS +\t\t\t\t\t\\\n\t(intermission ? CAN_INTERMISSION_BITS : 0)\t\t\\\n)\n\n \n#define can_frame_bits(is_fd, is_eff, bitstuffing,\t\t\\\n\t\t       intermission, data_len)\t\t\t\\\n(\t\t\t\t\t\t\t\t\\\n\tis_fd ? __can_fd_frame_bits(is_eff, bitstuffing,\t\\\n\t\t\t\t    intermission, data_len) :\t\\\n\t\t__can_cc_frame_bits(is_eff, bitstuffing,\t\\\n\t\t\t\t    intermission, data_len)\t\\\n)\n\n \n#define can_frame_bytes(is_fd, is_eff, bitstuffing, data_len)\t\\\n\tDIV_ROUND_UP(can_frame_bits(is_fd, is_eff, bitstuffing,\t\\\n\t\t\t\t    true, data_len),\t\t\\\n\t\t     BITS_PER_BYTE)\n\n \n#define CAN_FRAME_LEN_MAX can_frame_bytes(false, true, false, CAN_MAX_DLEN)\n\n \n#define CANFD_FRAME_LEN_MAX can_frame_bytes(true, true, false, CANFD_MAX_DLEN)\n\n \n#define can_cc_dlc2len(dlc)\t(min_t(u8, (dlc), CAN_MAX_DLEN))\n\n \nstatic inline u8 can_get_cc_dlc(const struct can_frame *cf, const u32 ctrlmode)\n{\n\t \n\tif ((ctrlmode & CAN_CTRLMODE_CC_LEN8_DLC) &&\n\t    (cf->len == CAN_MAX_DLEN) &&\n\t    (cf->len8_dlc > CAN_MAX_DLEN && cf->len8_dlc <= CAN_MAX_RAW_DLC))\n\t\treturn cf->len8_dlc;\n\n\t \n\treturn cf->len;\n}\n\n \nstatic inline void can_frame_set_cc_len(struct can_frame *cf, const u8 dlc,\n\t\t\t\t\tconst u32 ctrlmode)\n{\n\t \n\tif (ctrlmode & CAN_CTRLMODE_CC_LEN8_DLC && dlc > CAN_MAX_DLEN)\n\t\tcf->len8_dlc = dlc;\n\n\t \n\tcf->len = can_cc_dlc2len(dlc);\n}\n\n \nu8 can_fd_dlc2len(u8 dlc);\n\n \nu8 can_fd_len2dlc(u8 len);\n\n \nunsigned int can_skb_get_frame_len(const struct sk_buff *skb);\n\n \nstatic inline u8 canfd_sanitize_len(u8 len)\n{\n\treturn can_fd_dlc2len(can_fd_len2dlc(len));\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}