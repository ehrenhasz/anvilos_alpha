{
  "module_name": "peak_canfd.h",
  "hash_id": "71e80cb3b864631cc5cf627d567ba1493a352a51eb8da84fca5e717bb36b7f8f",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/can/dev/peak_canfd.h",
  "human_readable_source": " \n \n#ifndef PUCAN_H\n#define PUCAN_H\n\n \n#define PUCAN_CMD_NOP\t\t\t0x000\n#define PUCAN_CMD_RESET_MODE\t\t0x001\n#define PUCAN_CMD_NORMAL_MODE\t\t0x002\n#define PUCAN_CMD_LISTEN_ONLY_MODE\t0x003\n#define PUCAN_CMD_TIMING_SLOW\t\t0x004\n#define PUCAN_CMD_TIMING_FAST\t\t0x005\n#define PUCAN_CMD_SET_STD_FILTER\t0x006\n#define PUCAN_CMD_RESERVED2\t\t0x007\n#define PUCAN_CMD_FILTER_STD\t\t0x008\n#define PUCAN_CMD_TX_ABORT\t\t0x009\n#define PUCAN_CMD_WR_ERR_CNT\t\t0x00a\n#define PUCAN_CMD_SET_EN_OPTION\t\t0x00b\n#define PUCAN_CMD_CLR_DIS_OPTION\t0x00c\n#define PUCAN_CMD_RX_BARRIER\t\t0x010\n#define PUCAN_CMD_END_OF_COLLECTION\t0x3ff\n\n \n#define PUCAN_MSG_CAN_RX\t\t0x0001\n#define PUCAN_MSG_ERROR\t\t\t0x0002\n#define PUCAN_MSG_STATUS\t\t0x0003\n#define PUCAN_MSG_BUSLOAD\t\t0x0004\n\n#define PUCAN_MSG_CACHE_CRITICAL\t0x0102\n\n \n#define PUCAN_MSG_CAN_TX\t\t0x1000\n\n \nstruct __packed pucan_command {\n\t__le16\topcode_channel;\n\tu16\targs[3];\n};\n\n \nstatic inline u16 pucan_cmd_get_opcode(struct pucan_command *c)\n{\n\treturn le16_to_cpu(c->opcode_channel) & 0x3ff;\n}\n\n#define PUCAN_TSLOW_BRP_BITS\t\t10\n#define PUCAN_TSLOW_TSGEG1_BITS\t\t8\n#define PUCAN_TSLOW_TSGEG2_BITS\t\t7\n#define PUCAN_TSLOW_SJW_BITS\t\t7\n\n#define PUCAN_TSLOW_BRP_MASK\t\t((1 << PUCAN_TSLOW_BRP_BITS) - 1)\n#define PUCAN_TSLOW_TSEG1_MASK\t\t((1 << PUCAN_TSLOW_TSGEG1_BITS) - 1)\n#define PUCAN_TSLOW_TSEG2_MASK\t\t((1 << PUCAN_TSLOW_TSGEG2_BITS) - 1)\n#define PUCAN_TSLOW_SJW_MASK\t\t((1 << PUCAN_TSLOW_SJW_BITS) - 1)\n\n \n#define PUCAN_TSLOW_SJW_T(s, t)\t\t(((s) & PUCAN_TSLOW_SJW_MASK) | \\\n\t\t\t\t\t\t\t\t((!!(t)) << 7))\n#define PUCAN_TSLOW_TSEG2(t)\t\t((t) & PUCAN_TSLOW_TSEG2_MASK)\n#define PUCAN_TSLOW_TSEG1(t)\t\t((t) & PUCAN_TSLOW_TSEG1_MASK)\n#define PUCAN_TSLOW_BRP(b)\t\t((b) & PUCAN_TSLOW_BRP_MASK)\n\nstruct __packed pucan_timing_slow {\n\t__le16\topcode_channel;\n\n\tu8\tewl;\t\t \n\tu8\tsjw_t;\t\t \n\tu8\ttseg2;\t\t \n\tu8\ttseg1;\t\t \n\n\t__le16\tbrp;\t\t \n};\n\n#define PUCAN_TFAST_BRP_BITS\t\t10\n#define PUCAN_TFAST_TSGEG1_BITS\t\t5\n#define PUCAN_TFAST_TSGEG2_BITS\t\t4\n#define PUCAN_TFAST_SJW_BITS\t\t4\n\n#define PUCAN_TFAST_BRP_MASK\t\t((1 << PUCAN_TFAST_BRP_BITS) - 1)\n#define PUCAN_TFAST_TSEG1_MASK\t\t((1 << PUCAN_TFAST_TSGEG1_BITS) - 1)\n#define PUCAN_TFAST_TSEG2_MASK\t\t((1 << PUCAN_TFAST_TSGEG2_BITS) - 1)\n#define PUCAN_TFAST_SJW_MASK\t\t((1 << PUCAN_TFAST_SJW_BITS) - 1)\n\n \n#define PUCAN_TFAST_SJW(s)\t\t((s) & PUCAN_TFAST_SJW_MASK)\n#define PUCAN_TFAST_TSEG2(t)\t\t((t) & PUCAN_TFAST_TSEG2_MASK)\n#define PUCAN_TFAST_TSEG1(t)\t\t((t) & PUCAN_TFAST_TSEG1_MASK)\n#define PUCAN_TFAST_BRP(b)\t\t((b) & PUCAN_TFAST_BRP_MASK)\n\nstruct __packed pucan_timing_fast {\n\t__le16\topcode_channel;\n\n\tu8\tunused;\n\tu8\tsjw;\t\t \n\tu8\ttseg2;\t\t \n\tu8\ttseg1;\t\t \n\n\t__le16\tbrp;\t\t \n};\n\n \n#define PUCAN_FLTSTD_ROW_IDX_BITS\t6\n\nstruct __packed pucan_filter_std {\n\t__le16\topcode_channel;\n\n\t__le16\tidx;\n\t__le32\tmask;\t\t \n};\n\n#define PUCAN_FLTSTD_ROW_IDX_MAX\t((1 << PUCAN_FLTSTD_ROW_IDX_BITS) - 1)\n\n \nstruct __packed pucan_std_filter {\n\t__le16\topcode_channel;\n\n\tu8\tunused;\n\tu8\tidx;\n\t__le32\tmask;\t\t \n};\n\n \n#define PUCAN_TX_ABORT_FLUSH\t\t0x0001\n\nstruct __packed pucan_tx_abort {\n\t__le16\topcode_channel;\n\n\t__le16\tflags;\n\tu32\tunused;\n};\n\n \n#define PUCAN_WRERRCNT_TE\t\t0x4000\t \n#define PUCAN_WRERRCNT_RE\t\t0x8000\t \n\nstruct __packed pucan_wr_err_cnt {\n\t__le16\topcode_channel;\n\n\t__le16\tsel_mask;\n\tu8\ttx_counter;\t \n\tu8\trx_counter;\t \n\n\tu16\tunused;\n};\n\n \n#define PUCAN_OPTION_ERROR\t\t0x0001\n#define PUCAN_OPTION_BUSLOAD\t\t0x0002\n#define PUCAN_OPTION_CANDFDISO\t\t0x0004\n\nstruct __packed pucan_options {\n\t__le16\topcode_channel;\n\n\t__le16\toptions;\n\tu32\tunused;\n};\n\n \nstruct __packed pucan_msg {\n\t__le16\tsize;\n\t__le16\ttype;\n\t__le32\tts_low;\n\t__le32\tts_high;\n};\n\n \n#define PUCAN_MSG_SELF_RECEIVE\t\t0x80\n#define PUCAN_MSG_ERROR_STATE_IND\t0x40\t \n#define PUCAN_MSG_BITRATE_SWITCH\t0x20\t \n#define PUCAN_MSG_EXT_DATA_LEN\t\t0x10\t \n#define PUCAN_MSG_SINGLE_SHOT\t\t0x08\n#define PUCAN_MSG_LOOPED_BACK\t\t0x04\n#define PUCAN_MSG_EXT_ID\t\t0x02\n#define PUCAN_MSG_RTR\t\t\t0x01\n\nstruct __packed pucan_rx_msg {\n\t__le16\tsize;\n\t__le16\ttype;\n\t__le32\tts_low;\n\t__le32\tts_high;\n\t__le32\ttag_low;\n\t__le32\ttag_high;\n\tu8\tchannel_dlc;\n\tu8\tclient;\n\t__le16\tflags;\n\t__le32\tcan_id;\n\tu8\td[];\n};\n\n \n#define PUCAN_ERMSG_BIT_ERROR\t\t0\n#define PUCAN_ERMSG_FORM_ERROR\t\t1\n#define PUCAN_ERMSG_STUFF_ERROR\t\t2\n#define PUCAN_ERMSG_OTHER_ERROR\t\t3\n#define PUCAN_ERMSG_ERR_CNT_DEC\t\t4\n\nstruct __packed pucan_error_msg {\n\t__le16\tsize;\n\t__le16\ttype;\n\t__le32\tts_low;\n\t__le32\tts_high;\n\tu8\tchannel_type_d;\n\tu8\tcode_g;\n\tu8\ttx_err_cnt;\n\tu8\trx_err_cnt;\n};\n\nstatic inline int pucan_error_get_channel(const struct pucan_error_msg *msg)\n{\n\treturn msg->channel_type_d & 0x0f;\n}\n\n#define PUCAN_RX_BARRIER\t\t0x10\n#define PUCAN_BUS_PASSIVE\t\t0x20\n#define PUCAN_BUS_WARNING\t\t0x40\n#define PUCAN_BUS_BUSOFF\t\t0x80\n\nstruct __packed pucan_status_msg {\n\t__le16\tsize;\n\t__le16\ttype;\n\t__le32\tts_low;\n\t__le32\tts_high;\n\tu8\tchannel_p_w_b;\n\tu8\tunused[3];\n};\n\nstatic inline int pucan_status_get_channel(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & 0x0f;\n}\n\nstatic inline int pucan_status_is_rx_barrier(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & PUCAN_RX_BARRIER;\n}\n\nstatic inline int pucan_status_is_passive(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & PUCAN_BUS_PASSIVE;\n}\n\nstatic inline int pucan_status_is_warning(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & PUCAN_BUS_WARNING;\n}\n\nstatic inline int pucan_status_is_busoff(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & PUCAN_BUS_BUSOFF;\n}\n\n \n#define PUCAN_MSG_CHANNEL_DLC(c, d)\t(((c) & 0xf) | ((d) << 4))\n\nstruct __packed pucan_tx_msg {\n\t__le16\tsize;\n\t__le16\ttype;\n\t__le32\ttag_low;\n\t__le32\ttag_high;\n\tu8\tchannel_dlc;\n\tu8\tclient;\n\t__le16\tflags;\n\t__le32\tcan_id;\n\tu8\td[];\n};\n\n \nstatic inline __le16 pucan_cmd_opcode_channel(int index, int opcode)\n{\n\treturn cpu_to_le16(((index) << 12) | ((opcode) & 0x3ff));\n}\n\n \nstatic inline int pucan_msg_get_channel(const struct pucan_rx_msg *msg)\n{\n\treturn msg->channel_dlc & 0xf;\n}\n\n \nstatic inline u8 pucan_msg_get_dlc(const struct pucan_rx_msg *msg)\n{\n\treturn msg->channel_dlc >> 4;\n}\n\nstatic inline int pucan_ermsg_get_channel(const struct pucan_error_msg *msg)\n{\n\treturn msg->channel_type_d & 0x0f;\n}\n\nstatic inline int pucan_stmsg_get_channel(const struct pucan_status_msg *msg)\n{\n\treturn msg->channel_p_w_b & 0x0f;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}