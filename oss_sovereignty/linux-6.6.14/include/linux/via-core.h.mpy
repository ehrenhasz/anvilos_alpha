{
  "module_name": "via-core.h",
  "hash_id": "d2f0fd42f65a71c96221fa64d20efc322bad17e72e4beb79fdab569f572642b1",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/via-core.h",
  "human_readable_source": " \n \n\n#ifndef __VIA_CORE_H__\n#define __VIA_CORE_H__\n#include <linux/types.h>\n#include <linux/io.h>\n#include <linux/spinlock.h>\n#include <linux/pci.h>\n\n \nenum via_port_type {\n\tVIA_PORT_NONE = 0,\n\tVIA_PORT_I2C,\n\tVIA_PORT_GPIO,\n};\n\nenum via_port_mode {\n\tVIA_MODE_OFF = 0,\n\tVIA_MODE_I2C,\t\t \n\tVIA_MODE_GPIO,\t \n};\n\nenum viafb_i2c_adap {\n\tVIA_PORT_26 = 0,\n\tVIA_PORT_31,\n\tVIA_PORT_25,\n\tVIA_PORT_2C,\n\tVIA_PORT_3D,\n};\n#define VIAFB_NUM_PORTS 5\n\nstruct via_port_cfg {\n\tenum via_port_type\ttype;\n\tenum via_port_mode\tmode;\n\tu16\t\t\tio_port;\n\tu8\t\t\tioport_index;\n};\n\n \nstruct viafb_pm_hooks {\n\tstruct list_head list;\n\tint (*suspend)(void *private);\n\tint (*resume)(void *private);\n\tvoid *private;\n};\n\nvoid viafb_pm_register(struct viafb_pm_hooks *hooks);\nvoid viafb_pm_unregister(struct viafb_pm_hooks *hooks);\n\n \nstruct viafb_dev {\n\tstruct pci_dev *pdev;\n\tint chip_type;\n\tstruct via_port_cfg *port_cfg;\n\t \n\tspinlock_t reg_lock;\n\t \n\tunsigned long fbmem_start;\n\tlong fbmem_len;\n\tvoid __iomem *fbmem;\n#if defined(CONFIG_VIDEO_VIA_CAMERA) || defined(CONFIG_VIDEO_VIA_CAMERA_MODULE)\n\tlong camera_fbmem_offset;\n\tlong camera_fbmem_size;\n#endif\n\t \n\tunsigned long engine_start;\n\tunsigned long engine_len;\n\tvoid __iomem *engine_mmio;\n\n};\n\n \n\nvoid viafb_irq_enable(u32 mask);\nvoid viafb_irq_disable(u32 mask);\n\n \n#define VDE_INTERRUPT\t0x200\t \n#define   VDE_I_DVISENSE  0x00000001   \n#define   VDE_I_VBLANK    0x00000002   \n#define   VDE_I_MCCFI\t  0x00000004   \n#define   VDE_I_VSYNC\t  0x00000008   \n#define   VDE_I_DMA0DDONE 0x00000010   \n#define   VDE_I_DMA0TDONE 0x00000020   \n#define   VDE_I_DMA1DDONE 0x00000040   \n#define   VDE_I_DMA1TDONE 0x00000080   \n#define   VDE_I_C1AV      0x00000100   \n#define   VDE_I_HQV0\t  0x00000200   \n#define   VDE_I_HQV1      0x00000400   \n#define   VDE_I_HQV1EN\t  0x00000800   \n#define   VDE_I_C0AV      0x00001000   \n#define   VDE_I_C0VBI     0x00002000   \n#define   VDE_I_C1VBI     0x00004000   \n#define   VDE_I_VSYNC2    0x00008000   \n#define   VDE_I_DVISNSEN  0x00010000   \n#define   VDE_I_VSYNC2EN  0x00020000   \n#define   VDE_I_MCCFIEN\t  0x00040000   \n#define   VDE_I_VSYNCEN   0x00080000   \n#define   VDE_I_DMA0DDEN  0x00100000   \n#define   VDE_I_DMA0TDEN  0x00200000   \n#define   VDE_I_DMA1DDEN  0x00400000   \n#define   VDE_I_DMA1TDEN  0x00800000   \n#define   VDE_I_C1AVEN    0x01000000   \n#define   VDE_I_HQV0EN\t  0x02000000   \n#define   VDE_I_C1VBIEN\t  0x04000000   \n#define   VDE_I_LVDSSI    0x08000000   \n#define   VDE_I_C0AVEN    0x10000000   \n#define   VDE_I_C0VBIEN   0x20000000   \n#define   VDE_I_LVDSSIEN  0x40000000   \n#define   VDE_I_ENABLE\t  0x80000000   \n\n#if defined(CONFIG_VIDEO_VIA_CAMERA) || defined(CONFIG_VIDEO_VIA_CAMERA_MODULE)\n \nint viafb_request_dma(void);\nvoid viafb_release_dma(void);\n \nint viafb_dma_copy_out_sg(unsigned int offset, struct scatterlist *sg, int nsg);\n\n \n#define VDMA_MR0\t0xe00\t\t \n#define   VDMA_MR_CHAIN   0x01\t\t \n#define   VDMA_MR_TDIE    0x02\t\t \n#define VDMA_CSR0\t0xe04\t\t \n#define\t  VDMA_C_ENABLE\t  0x01\t\t   \n#define\t  VDMA_C_START\t  0x02\t\t   \n#define\t  VDMA_C_ABORT\t  0x04\t\t   \n#define\t  VDMA_C_DONE\t  0x08\t\t   \n#define VDMA_MARL0\t0xe20\t\t \n#define VDMA_MARH0\t0xe24\t\t \n#define VDMA_DAR0\t0xe28\t\t \n#define VDMA_DQWCR0\t0xe2c\t\t \n#define VDMA_TMR0\t0xe30\t\t \n#define VDMA_DPRL0\t0xe34\t\t \n#define\t  VDMA_DPR_IN\t  0x08\t\t \n#define VDMA_DPRH0\t0xe38\n#define VDMA_PMR0\t(0xe00 + 0x134)  \n\n \n#define VGA_WIDTH\t640\n#define VGA_HEIGHT\t480\n#endif  \n\n \n\n#define VIAStatus   0x3DA   \n#define VIACR       0x3D4\n#define VIASR       0x3C4\n#define VIAGR       0x3CE\n#define VIAAR       0x3C0\n\nstatic inline u8 via_read_reg(u16 port, u8 index)\n{\n\toutb(index, port);\n\treturn inb(port + 1);\n}\n\nstatic inline void via_write_reg(u16 port, u8 index, u8 data)\n{\n\toutb(index, port);\n\toutb(data, port + 1);\n}\n\nstatic inline void via_write_reg_mask(u16 port, u8 index, u8 data, u8 mask)\n{\n\tu8 old;\n\n\toutb(index, port);\n\told = inb(port + 1);\n\toutb((data & mask) | (old & ~mask), port + 1);\n}\n\n#define VIA_MISC_REG_READ\t0x03CC\n#define VIA_MISC_REG_WRITE\t0x03C2\n\nstatic inline void via_write_misc_reg_mask(u8 data, u8 mask)\n{\n\tu8 old = inb(VIA_MISC_REG_READ);\n\toutb((data & mask) | (old & ~mask), VIA_MISC_REG_WRITE);\n}\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}