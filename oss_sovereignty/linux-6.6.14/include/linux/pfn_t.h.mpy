{
  "module_name": "pfn_t.h",
  "hash_id": "6bb76f57f886af2b85742bb133529791d9615399b26214e58bf87110fc8c3f5a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pfn_t.h",
  "human_readable_source": " \n#ifndef _LINUX_PFN_T_H_\n#define _LINUX_PFN_T_H_\n#include <linux/mm.h>\n\n \n#define PFN_FLAGS_MASK (((u64) (~PAGE_MASK)) << (BITS_PER_LONG_LONG - PAGE_SHIFT))\n#define PFN_SG_CHAIN (1ULL << (BITS_PER_LONG_LONG - 1))\n#define PFN_SG_LAST (1ULL << (BITS_PER_LONG_LONG - 2))\n#define PFN_DEV (1ULL << (BITS_PER_LONG_LONG - 3))\n#define PFN_MAP (1ULL << (BITS_PER_LONG_LONG - 4))\n#define PFN_SPECIAL (1ULL << (BITS_PER_LONG_LONG - 5))\n\n#define PFN_FLAGS_TRACE \\\n\t{ PFN_SPECIAL,\t\"SPECIAL\" }, \\\n\t{ PFN_SG_CHAIN,\t\"SG_CHAIN\" }, \\\n\t{ PFN_SG_LAST,\t\"SG_LAST\" }, \\\n\t{ PFN_DEV,\t\"DEV\" }, \\\n\t{ PFN_MAP,\t\"MAP\" }\n\nstatic inline pfn_t __pfn_to_pfn_t(unsigned long pfn, u64 flags)\n{\n\tpfn_t pfn_t = { .val = pfn | (flags & PFN_FLAGS_MASK), };\n\n\treturn pfn_t;\n}\n\n \nstatic inline pfn_t pfn_to_pfn_t(unsigned long pfn)\n{\n\treturn __pfn_to_pfn_t(pfn, 0);\n}\n\nstatic inline pfn_t phys_to_pfn_t(phys_addr_t addr, u64 flags)\n{\n\treturn __pfn_to_pfn_t(addr >> PAGE_SHIFT, flags);\n}\n\nstatic inline bool pfn_t_has_page(pfn_t pfn)\n{\n\treturn (pfn.val & PFN_MAP) == PFN_MAP || (pfn.val & PFN_DEV) == 0;\n}\n\nstatic inline unsigned long pfn_t_to_pfn(pfn_t pfn)\n{\n\treturn pfn.val & ~PFN_FLAGS_MASK;\n}\n\nstatic inline struct page *pfn_t_to_page(pfn_t pfn)\n{\n\tif (pfn_t_has_page(pfn))\n\t\treturn pfn_to_page(pfn_t_to_pfn(pfn));\n\treturn NULL;\n}\n\nstatic inline phys_addr_t pfn_t_to_phys(pfn_t pfn)\n{\n\treturn PFN_PHYS(pfn_t_to_pfn(pfn));\n}\n\nstatic inline pfn_t page_to_pfn_t(struct page *page)\n{\n\treturn pfn_to_pfn_t(page_to_pfn(page));\n}\n\nstatic inline int pfn_t_valid(pfn_t pfn)\n{\n\treturn pfn_valid(pfn_t_to_pfn(pfn));\n}\n\n#ifdef CONFIG_MMU\nstatic inline pte_t pfn_t_pte(pfn_t pfn, pgprot_t pgprot)\n{\n\treturn pfn_pte(pfn_t_to_pfn(pfn), pgprot);\n}\n#endif\n\n#ifdef CONFIG_TRANSPARENT_HUGEPAGE\nstatic inline pmd_t pfn_t_pmd(pfn_t pfn, pgprot_t pgprot)\n{\n\treturn pfn_pmd(pfn_t_to_pfn(pfn), pgprot);\n}\n\n#ifdef CONFIG_HAVE_ARCH_TRANSPARENT_HUGEPAGE_PUD\nstatic inline pud_t pfn_t_pud(pfn_t pfn, pgprot_t pgprot)\n{\n\treturn pfn_pud(pfn_t_to_pfn(pfn), pgprot);\n}\n#endif\n#endif\n\n#ifdef CONFIG_ARCH_HAS_PTE_DEVMAP\nstatic inline bool pfn_t_devmap(pfn_t pfn)\n{\n\tconst u64 flags = PFN_DEV|PFN_MAP;\n\n\treturn (pfn.val & flags) == flags;\n}\n#else\nstatic inline bool pfn_t_devmap(pfn_t pfn)\n{\n\treturn false;\n}\npte_t pte_mkdevmap(pte_t pte);\npmd_t pmd_mkdevmap(pmd_t pmd);\n#if defined(CONFIG_TRANSPARENT_HUGEPAGE) && \\\n\tdefined(CONFIG_HAVE_ARCH_TRANSPARENT_HUGEPAGE_PUD)\npud_t pud_mkdevmap(pud_t pud);\n#endif\n#endif  \n\n#ifdef CONFIG_ARCH_HAS_PTE_SPECIAL\nstatic inline bool pfn_t_special(pfn_t pfn)\n{\n\treturn (pfn.val & PFN_SPECIAL) == PFN_SPECIAL;\n}\n#else\nstatic inline bool pfn_t_special(pfn_t pfn)\n{\n\treturn false;\n}\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}