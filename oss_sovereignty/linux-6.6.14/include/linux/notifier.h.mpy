{
  "module_name": "notifier.h",
  "hash_id": "2434cd4bf061982a2f353e6fe7451ee7bc40dc0291b8a911c068c58f5da1986b",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/notifier.h",
  "human_readable_source": " \n \n \n#ifndef _LINUX_NOTIFIER_H\n#define _LINUX_NOTIFIER_H\n#include <linux/errno.h>\n#include <linux/mutex.h>\n#include <linux/rwsem.h>\n#include <linux/srcu.h>\n\n \n\nstruct notifier_block;\n\ntypedef\tint (*notifier_fn_t)(struct notifier_block *nb,\n\t\t\tunsigned long action, void *data);\n\nstruct notifier_block {\n\tnotifier_fn_t notifier_call;\n\tstruct notifier_block __rcu *next;\n\tint priority;\n};\n\nstruct atomic_notifier_head {\n\tspinlock_t lock;\n\tstruct notifier_block __rcu *head;\n};\n\nstruct blocking_notifier_head {\n\tstruct rw_semaphore rwsem;\n\tstruct notifier_block __rcu *head;\n};\n\nstruct raw_notifier_head {\n\tstruct notifier_block __rcu *head;\n};\n\nstruct srcu_notifier_head {\n\tstruct mutex mutex;\n\tstruct srcu_usage srcuu;\n\tstruct srcu_struct srcu;\n\tstruct notifier_block __rcu *head;\n};\n\n#define ATOMIC_INIT_NOTIFIER_HEAD(name) do {\t\\\n\t\tspin_lock_init(&(name)->lock);\t\\\n\t\t(name)->head = NULL;\t\t\\\n\t} while (0)\n#define BLOCKING_INIT_NOTIFIER_HEAD(name) do {\t\\\n\t\tinit_rwsem(&(name)->rwsem);\t\\\n\t\t(name)->head = NULL;\t\t\\\n\t} while (0)\n#define RAW_INIT_NOTIFIER_HEAD(name) do {\t\\\n\t\t(name)->head = NULL;\t\t\\\n\t} while (0)\n\n \nextern void srcu_init_notifier_head(struct srcu_notifier_head *nh);\n#define srcu_cleanup_notifier_head(name)\t\\\n\t\tcleanup_srcu_struct(&(name)->srcu);\n\n#define ATOMIC_NOTIFIER_INIT(name) {\t\t\t\t\\\n\t\t.lock = __SPIN_LOCK_UNLOCKED(name.lock),\t\\\n\t\t.head = NULL }\n#define BLOCKING_NOTIFIER_INIT(name) {\t\t\t\t\\\n\t\t.rwsem = __RWSEM_INITIALIZER((name).rwsem),\t\\\n\t\t.head = NULL }\n#define RAW_NOTIFIER_INIT(name)\t{\t\t\t\t\\\n\t\t.head = NULL }\n\n#define SRCU_NOTIFIER_INIT(name, pcpu)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.mutex = __MUTEX_INITIALIZER(name.mutex),\t\\\n\t\t.head = NULL,\t\t\t\t\t\\\n\t\t.srcuu = __SRCU_USAGE_INIT(name.srcuu),\t\t\\\n\t\t.srcu = __SRCU_STRUCT_INIT(name.srcu, name.srcuu, pcpu), \\\n\t}\n\n#define ATOMIC_NOTIFIER_HEAD(name)\t\t\t\t\\\n\tstruct atomic_notifier_head name =\t\t\t\\\n\t\tATOMIC_NOTIFIER_INIT(name)\n#define BLOCKING_NOTIFIER_HEAD(name)\t\t\t\t\\\n\tstruct blocking_notifier_head name =\t\t\t\\\n\t\tBLOCKING_NOTIFIER_INIT(name)\n#define RAW_NOTIFIER_HEAD(name)\t\t\t\t\t\\\n\tstruct raw_notifier_head name =\t\t\t\t\\\n\t\tRAW_NOTIFIER_INIT(name)\n\n#ifdef CONFIG_TREE_SRCU\n#define _SRCU_NOTIFIER_HEAD(name, mod)\t\t\t\t\\\n\tstatic DEFINE_PER_CPU(struct srcu_data, name##_head_srcu_data); \\\n\tmod struct srcu_notifier_head name =\t\t\t\\\n\t\t\tSRCU_NOTIFIER_INIT(name, name##_head_srcu_data)\n\n#else\n#define _SRCU_NOTIFIER_HEAD(name, mod)\t\t\t\t\\\n\tmod struct srcu_notifier_head name =\t\t\t\\\n\t\t\tSRCU_NOTIFIER_INIT(name, name)\n\n#endif\n\n#define SRCU_NOTIFIER_HEAD(name)\t\t\t\t\\\n\t_SRCU_NOTIFIER_HEAD(name,  )\n\n#define SRCU_NOTIFIER_HEAD_STATIC(name)\t\t\t\t\\\n\t_SRCU_NOTIFIER_HEAD(name, static)\n\n#ifdef __KERNEL__\n\nextern int atomic_notifier_chain_register(struct atomic_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int blocking_notifier_chain_register(struct blocking_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int raw_notifier_chain_register(struct raw_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int srcu_notifier_chain_register(struct srcu_notifier_head *nh,\n\t\tstruct notifier_block *nb);\n\nextern int atomic_notifier_chain_register_unique_prio(\n\t\tstruct atomic_notifier_head *nh, struct notifier_block *nb);\nextern int blocking_notifier_chain_register_unique_prio(\n\t\tstruct blocking_notifier_head *nh, struct notifier_block *nb);\n\nextern int atomic_notifier_chain_unregister(struct atomic_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int blocking_notifier_chain_unregister(struct blocking_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int raw_notifier_chain_unregister(struct raw_notifier_head *nh,\n\t\tstruct notifier_block *nb);\nextern int srcu_notifier_chain_unregister(struct srcu_notifier_head *nh,\n\t\tstruct notifier_block *nb);\n\nextern int atomic_notifier_call_chain(struct atomic_notifier_head *nh,\n\t\tunsigned long val, void *v);\nextern int blocking_notifier_call_chain(struct blocking_notifier_head *nh,\n\t\tunsigned long val, void *v);\nextern int raw_notifier_call_chain(struct raw_notifier_head *nh,\n\t\tunsigned long val, void *v);\nextern int srcu_notifier_call_chain(struct srcu_notifier_head *nh,\n\t\tunsigned long val, void *v);\n\nextern int blocking_notifier_call_chain_robust(struct blocking_notifier_head *nh,\n\t\tunsigned long val_up, unsigned long val_down, void *v);\nextern int raw_notifier_call_chain_robust(struct raw_notifier_head *nh,\n\t\tunsigned long val_up, unsigned long val_down, void *v);\n\nextern bool atomic_notifier_call_chain_is_empty(struct atomic_notifier_head *nh);\n\n#define NOTIFY_DONE\t\t0x0000\t\t \n#define NOTIFY_OK\t\t0x0001\t\t \n#define NOTIFY_STOP_MASK\t0x8000\t\t \n#define NOTIFY_BAD\t\t(NOTIFY_STOP_MASK|0x0002)\n\t\t\t\t\t\t \n \n#define NOTIFY_STOP\t\t(NOTIFY_OK|NOTIFY_STOP_MASK)\n\n \nstatic inline int notifier_from_errno(int err)\n{\n\tif (err)\n\t\treturn NOTIFY_STOP_MASK | (NOTIFY_OK - err);\n\n\treturn NOTIFY_OK;\n}\n\n \nstatic inline int notifier_to_errno(int ret)\n{\n\tret &= ~NOTIFY_STOP_MASK;\n\treturn ret > NOTIFY_OK ? NOTIFY_OK - ret : 0;\n}\n\n \n \n \n\n \n\n \n\n \n\n \n\n#define NETLINK_URELEASE\t0x0001\t \n\n \n#define KBD_KEYCODE\t\t0x0001  \n#define KBD_UNBOUND_KEYCODE\t0x0002  \n#define KBD_UNICODE\t\t0x0003  \n#define KBD_KEYSYM\t\t0x0004  \n#define KBD_POST_KEYSYM\t\t0x0005  \n\nextern struct blocking_notifier_head reboot_notifier_list;\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}