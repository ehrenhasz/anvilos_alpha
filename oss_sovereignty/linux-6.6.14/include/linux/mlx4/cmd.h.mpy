{
  "module_name": "cmd.h",
  "hash_id": "632ea25fcc6e1aefa5935fbf8c5926b9f5e16cb250dd56b5415e1fccd2ede31a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mlx4/cmd.h",
  "human_readable_source": " \n\n#ifndef MLX4_CMD_H\n#define MLX4_CMD_H\n\n#include <linux/dma-mapping.h>\n#include <linux/if_link.h>\n#include <linux/mlx4/device.h>\n#include <linux/netdevice.h>\n\nenum {\n\t \n\tMLX4_CMD_SYS_EN\t\t = 0x1,\n\tMLX4_CMD_SYS_DIS\t = 0x2,\n\tMLX4_CMD_MAP_FA\t\t = 0xfff,\n\tMLX4_CMD_UNMAP_FA\t = 0xffe,\n\tMLX4_CMD_RUN_FW\t\t = 0xff6,\n\tMLX4_CMD_MOD_STAT_CFG\t = 0x34,\n\tMLX4_CMD_QUERY_DEV_CAP\t = 0x3,\n\tMLX4_CMD_QUERY_FW\t = 0x4,\n\tMLX4_CMD_ENABLE_LAM\t = 0xff8,\n\tMLX4_CMD_DISABLE_LAM\t = 0xff7,\n\tMLX4_CMD_QUERY_DDR\t = 0x5,\n\tMLX4_CMD_QUERY_ADAPTER\t = 0x6,\n\tMLX4_CMD_INIT_HCA\t = 0x7,\n\tMLX4_CMD_CLOSE_HCA\t = 0x8,\n\tMLX4_CMD_INIT_PORT\t = 0x9,\n\tMLX4_CMD_CLOSE_PORT\t = 0xa,\n\tMLX4_CMD_QUERY_HCA\t = 0xb,\n\tMLX4_CMD_QUERY_PORT\t = 0x43,\n\tMLX4_CMD_SENSE_PORT\t = 0x4d,\n\tMLX4_CMD_HW_HEALTH_CHECK = 0x50,\n\tMLX4_CMD_SET_PORT\t = 0xc,\n\tMLX4_CMD_SET_NODE\t = 0x5a,\n\tMLX4_CMD_QUERY_FUNC\t = 0x56,\n\tMLX4_CMD_ACCESS_DDR\t = 0x2e,\n\tMLX4_CMD_MAP_ICM\t = 0xffa,\n\tMLX4_CMD_UNMAP_ICM\t = 0xff9,\n\tMLX4_CMD_MAP_ICM_AUX\t = 0xffc,\n\tMLX4_CMD_UNMAP_ICM_AUX\t = 0xffb,\n\tMLX4_CMD_SET_ICM_SIZE\t = 0xffd,\n\tMLX4_CMD_ACCESS_REG\t = 0x3b,\n\tMLX4_CMD_ALLOCATE_VPP\t = 0x80,\n\tMLX4_CMD_SET_VPORT_QOS\t = 0x81,\n\n\t \n\tMLX4_CMD_INFORM_FLR_DONE = 0x5b,\n\tMLX4_CMD_VIRT_PORT_MAP   = 0x5c,\n\tMLX4_CMD_GET_OP_REQ      = 0x59,\n\n\t \n\tMLX4_CMD_SW2HW_MPT\t = 0xd,\n\tMLX4_CMD_QUERY_MPT\t = 0xe,\n\tMLX4_CMD_HW2SW_MPT\t = 0xf,\n\tMLX4_CMD_READ_MTT\t = 0x10,\n\tMLX4_CMD_WRITE_MTT\t = 0x11,\n\tMLX4_CMD_SYNC_TPT\t = 0x2f,\n\n\t \n\tMLX4_CMD_MAP_EQ\t\t = 0x12,\n\tMLX4_CMD_SW2HW_EQ\t = 0x13,\n\tMLX4_CMD_HW2SW_EQ\t = 0x14,\n\tMLX4_CMD_QUERY_EQ\t = 0x15,\n\n\t \n\tMLX4_CMD_SW2HW_CQ\t = 0x16,\n\tMLX4_CMD_HW2SW_CQ\t = 0x17,\n\tMLX4_CMD_QUERY_CQ\t = 0x18,\n\tMLX4_CMD_MODIFY_CQ\t = 0x2c,\n\n\t \n\tMLX4_CMD_SW2HW_SRQ\t = 0x35,\n\tMLX4_CMD_HW2SW_SRQ\t = 0x36,\n\tMLX4_CMD_QUERY_SRQ\t = 0x37,\n\tMLX4_CMD_ARM_SRQ\t = 0x40,\n\n\t \n\tMLX4_CMD_RST2INIT_QP\t = 0x19,\n\tMLX4_CMD_INIT2RTR_QP\t = 0x1a,\n\tMLX4_CMD_RTR2RTS_QP\t = 0x1b,\n\tMLX4_CMD_RTS2RTS_QP\t = 0x1c,\n\tMLX4_CMD_SQERR2RTS_QP\t = 0x1d,\n\tMLX4_CMD_2ERR_QP\t = 0x1e,\n\tMLX4_CMD_RTS2SQD_QP\t = 0x1f,\n\tMLX4_CMD_SQD2SQD_QP\t = 0x38,\n\tMLX4_CMD_SQD2RTS_QP\t = 0x20,\n\tMLX4_CMD_2RST_QP\t = 0x21,\n\tMLX4_CMD_QUERY_QP\t = 0x22,\n\tMLX4_CMD_INIT2INIT_QP\t = 0x2d,\n\tMLX4_CMD_SUSPEND_QP\t = 0x32,\n\tMLX4_CMD_UNSUSPEND_QP\t = 0x33,\n\tMLX4_CMD_UPDATE_QP\t = 0x61,\n\t \n\tMLX4_CMD_CONF_SPECIAL_QP = 0x23,\n\tMLX4_CMD_MAD_IFC\t = 0x24,\n\tMLX4_CMD_MAD_DEMUX\t = 0x203,\n\n\t \n\tMLX4_CMD_READ_MCG\t = 0x25,\n\tMLX4_CMD_WRITE_MCG\t = 0x26,\n\tMLX4_CMD_MGID_HASH\t = 0x27,\n\n\t \n\tMLX4_CMD_DIAG_RPRT\t = 0x30,\n\tMLX4_CMD_NOP\t\t = 0x31,\n\tMLX4_CMD_CONFIG_DEV\t = 0x3a,\n\tMLX4_CMD_ACCESS_MEM\t = 0x2e,\n\tMLX4_CMD_SET_VEP\t = 0x52,\n\n\t \n\tMLX4_CMD_SET_VLAN_FLTR\t = 0x47,\n\tMLX4_CMD_SET_MCAST_FLTR\t = 0x48,\n\tMLX4_CMD_DUMP_ETH_STATS\t = 0x49,\n\n\t \n\tMLX4_CMD_ARM_COMM_CHANNEL = 0x57,\n\tMLX4_CMD_GEN_EQE\t = 0x58,\n\n\t \n\tMLX4_CMD_ALLOC_RES\t = 0xf00,\n\tMLX4_CMD_FREE_RES\t = 0xf01,\n\tMLX4_CMD_MCAST_ATTACH\t = 0xf05,\n\tMLX4_CMD_UCAST_ATTACH\t = 0xf06,\n\tMLX4_CMD_PROMISC         = 0xf08,\n\tMLX4_CMD_QUERY_FUNC_CAP  = 0xf0a,\n\tMLX4_CMD_QP_ATTACH\t = 0xf0b,\n\n\t \n\tMLX4_CMD_QUERY_DEBUG_MSG = 0x2a,\n\tMLX4_CMD_SET_DEBUG_MSG\t = 0x2b,\n\n\t \n\tMLX4_CMD_QUERY_IF_STAT\t = 0X54,\n\tMLX4_CMD_SET_IF_STAT\t = 0X55,\n\n\t \n\tMLX4_QP_FLOW_STEERING_ATTACH = 0x65,\n\tMLX4_QP_FLOW_STEERING_DETACH = 0x66,\n\tMLX4_FLOW_STEERING_IB_UC_QP_RANGE = 0x64,\n\n\t \n\tMLX4_CMD_CONGESTION_CTRL_OPCODE = 0x68,\n};\n\nenum {\n\tMLX4_CMD_TIME_CLASS_A\t= 60000,\n\tMLX4_CMD_TIME_CLASS_B\t= 60000,\n\tMLX4_CMD_TIME_CLASS_C\t= 60000,\n};\n\nenum {\n\t \n\tMLX4_GET_PORT_VIRT2PHY = 0x0,\n\tMLX4_SET_PORT_VIRT2PHY = 0x1,\n};\n\nenum {\n\tMLX4_MAILBOX_SIZE\t= 4096,\n\tMLX4_ACCESS_MEM_ALIGN\t= 256,\n};\n\nenum {\n\t \n\tMLX4_SET_PORT_IB_OPCODE\t\t= 0x0,\n\tMLX4_SET_PORT_ETH_OPCODE\t= 0x1,\n\tMLX4_SET_PORT_BEACON_OPCODE\t= 0x4,\n};\n\nenum {\n\t \n\tMLX4_SET_PORT_GENERAL   = 0x0,\n\tMLX4_SET_PORT_RQP_CALC  = 0x1,\n\tMLX4_SET_PORT_MAC_TABLE = 0x2,\n\tMLX4_SET_PORT_VLAN_TABLE = 0x3,\n\tMLX4_SET_PORT_PRIO_MAP  = 0x4,\n\tMLX4_SET_PORT_GID_TABLE = 0x5,\n\tMLX4_SET_PORT_PRIO2TC\t= 0x8,\n\tMLX4_SET_PORT_SCHEDULER = 0x9,\n\tMLX4_SET_PORT_VXLAN\t= 0xB,\n\tMLX4_SET_PORT_ROCE_ADDR\t= 0xD\n};\n\nenum {\n\tMLX4_CMD_MAD_DEMUX_CONFIG\t= 0,\n\tMLX4_CMD_MAD_DEMUX_QUERY_STATE\t= 1,\n\tMLX4_CMD_MAD_DEMUX_QUERY_RESTR\t= 2,  \n};\n\nenum {\n\tMLX4_CMD_WRAPPED,\n\tMLX4_CMD_NATIVE\n};\n\n \nenum mlx4_rx_csum_mode {\n\tMLX4_RX_CSUM_MODE_VAL_NON_TCP_UDP\t\t= 1UL << 0,\n\tMLX4_RX_CSUM_MODE_L4\t\t\t\t= 1UL << 1,\n\tMLX4_RX_CSUM_MODE_IP_OK_IP_NON_TCP_UDP\t\t= 1UL << 2,\n\tMLX4_RX_CSUM_MODE_MULTI_VLAN\t\t\t= 1UL << 3\n};\n\nstruct mlx4_config_dev_params {\n\tu16\tvxlan_udp_dport;\n\tu8\trx_csum_flags_port_1;\n\tu8\trx_csum_flags_port_2;\n};\n\nenum mlx4_en_congestion_control_algorithm {\n\tMLX4_CTRL_ALGO_802_1_QAU_REACTION_POINT = 0,\n};\n\nenum mlx4_en_congestion_control_opmod {\n\tMLX4_CONGESTION_CONTROL_GET_PARAMS,\n\tMLX4_CONGESTION_CONTROL_GET_STATISTICS,\n\tMLX4_CONGESTION_CONTROL_SET_PARAMS = 4,\n};\n\nstruct mlx4_dev;\n\nstruct mlx4_cmd_mailbox {\n\tvoid\t\t       *buf;\n\tdma_addr_t\t\tdma;\n};\n\nint __mlx4_cmd(struct mlx4_dev *dev, u64 in_param, u64 *out_param,\n\t       int out_is_imm, u32 in_modifier, u8 op_modifier,\n\t       u16 op, unsigned long timeout, int native);\n\n \nstatic inline int mlx4_cmd(struct mlx4_dev *dev, u64 in_param, u32 in_modifier,\n\t\t\t   u8 op_modifier, u16 op, unsigned long timeout,\n\t\t\t   int native)\n{\n\treturn __mlx4_cmd(dev, in_param, NULL, 0, in_modifier,\n\t\t\t  op_modifier, op, timeout, native);\n}\n\n \nstatic inline int mlx4_cmd_box(struct mlx4_dev *dev, u64 in_param, u64 out_param,\n\t\t\t       u32 in_modifier, u8 op_modifier, u16 op,\n\t\t\t       unsigned long timeout, int native)\n{\n\treturn __mlx4_cmd(dev, in_param, &out_param, 0, in_modifier,\n\t\t\t  op_modifier, op, timeout, native);\n}\n\n \nstatic inline int mlx4_cmd_imm(struct mlx4_dev *dev, u64 in_param, u64 *out_param,\n\t\t\t       u32 in_modifier, u8 op_modifier, u16 op,\n\t\t\t       unsigned long timeout, int native)\n{\n\treturn __mlx4_cmd(dev, in_param, out_param, 1, in_modifier,\n\t\t\t  op_modifier, op, timeout, native);\n}\n\nstruct mlx4_cmd_mailbox *mlx4_alloc_cmd_mailbox(struct mlx4_dev *dev);\nvoid mlx4_free_cmd_mailbox(struct mlx4_dev *dev, struct mlx4_cmd_mailbox *mailbox);\n\nint mlx4_get_counter_stats(struct mlx4_dev *dev, int counter_index,\n\t\t\t   struct mlx4_counter *counter_stats, int reset);\nint mlx4_get_vf_stats(struct mlx4_dev *dev, int port, int vf_idx,\n\t\t      struct ifla_vf_stats *vf_stats);\nu32 mlx4_comm_get_version(void);\nint mlx4_set_vf_mac(struct mlx4_dev *dev, int port, int vf, u8 *mac);\nint mlx4_set_vf_vlan(struct mlx4_dev *dev, int port, int vf, u16 vlan,\n\t\t     u8 qos, __be16 proto);\nint mlx4_set_vf_rate(struct mlx4_dev *dev, int port, int vf, int min_tx_rate,\n\t\t     int max_tx_rate);\nint mlx4_set_vf_spoofchk(struct mlx4_dev *dev, int port, int vf, bool setting);\nint mlx4_get_vf_config(struct mlx4_dev *dev, int port, int vf, struct ifla_vf_info *ivf);\nint mlx4_set_vf_link_state(struct mlx4_dev *dev, int port, int vf, int link_state);\nint mlx4_config_dev_retrieval(struct mlx4_dev *dev,\n\t\t\t      struct mlx4_config_dev_params *params);\nvoid mlx4_cmd_wake_completions(struct mlx4_dev *dev);\nvoid mlx4_report_internal_err_comm_event(struct mlx4_dev *dev);\n \nbool mlx4_get_slave_default_vlan(struct mlx4_dev *dev, int port, int slave,\n\t\t\t\t u16 *vlan, u8 *qos);\n\n#define MLX4_COMM_GET_IF_REV(cmd_chan_ver) (u8)((cmd_chan_ver) >> 8)\n#define COMM_CHAN_EVENT_INTERNAL_ERR (1 << 17)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}