{
  "module_name": "flex_proportions.h",
  "hash_id": "a38b2a8d231d8e180cd432192fdd5a5cf3a2908e795efd24d8b0b9c0ad4728a7",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/flex_proportions.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_FLEX_PROPORTIONS_H\n#define _LINUX_FLEX_PROPORTIONS_H\n\n#include <linux/percpu_counter.h>\n#include <linux/spinlock.h>\n#include <linux/seqlock.h>\n#include <linux/gfp.h>\n\n \n#define FPROP_FRAC_SHIFT 10\n#define FPROP_FRAC_BASE (1UL << FPROP_FRAC_SHIFT)\n\n \nstruct fprop_global {\n\t \n\tstruct percpu_counter events;\n\t \n\tunsigned int period;\n\t \n\tseqcount_t sequence;\n};\n\nint fprop_global_init(struct fprop_global *p, gfp_t gfp);\nvoid fprop_global_destroy(struct fprop_global *p);\nbool fprop_new_period(struct fprop_global *p, int periods);\n\n \nstruct fprop_local_single {\n\t \n\tunsigned long events;\n\t \n\tunsigned int period;\n\traw_spinlock_t lock;\t \n};\n\n#define INIT_FPROP_LOCAL_SINGLE(name)\t\t\t\\\n{\t.lock = __RAW_SPIN_LOCK_UNLOCKED(name.lock),\t\\\n}\n\nint fprop_local_init_single(struct fprop_local_single *pl);\nvoid fprop_local_destroy_single(struct fprop_local_single *pl);\nvoid __fprop_inc_single(struct fprop_global *p, struct fprop_local_single *pl);\nvoid fprop_fraction_single(struct fprop_global *p,\n\tstruct fprop_local_single *pl, unsigned long *numerator,\n\tunsigned long *denominator);\n\nstatic inline\nvoid fprop_inc_single(struct fprop_global *p, struct fprop_local_single *pl)\n{\n\tunsigned long flags;\n\n\tlocal_irq_save(flags);\n\t__fprop_inc_single(p, pl);\n\tlocal_irq_restore(flags);\n}\n\n \nstruct fprop_local_percpu {\n\t \n\tstruct percpu_counter events;\n\t \n\tunsigned int period;\n\traw_spinlock_t lock;\t \n};\n\nint fprop_local_init_percpu(struct fprop_local_percpu *pl, gfp_t gfp);\nvoid fprop_local_destroy_percpu(struct fprop_local_percpu *pl);\nvoid __fprop_add_percpu(struct fprop_global *p, struct fprop_local_percpu *pl,\n\t\tlong nr);\nvoid __fprop_add_percpu_max(struct fprop_global *p,\n\t\tstruct fprop_local_percpu *pl, int max_frac, long nr);\nvoid fprop_fraction_percpu(struct fprop_global *p,\n\tstruct fprop_local_percpu *pl, unsigned long *numerator,\n\tunsigned long *denominator);\n\nstatic inline\nvoid fprop_inc_percpu(struct fprop_global *p, struct fprop_local_percpu *pl)\n{\n\tunsigned long flags;\n\n\tlocal_irq_save(flags);\n\t__fprop_add_percpu(p, pl, 1);\n\tlocal_irq_restore(flags);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}