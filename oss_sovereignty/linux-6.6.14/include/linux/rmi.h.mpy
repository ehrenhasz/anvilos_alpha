{
  "module_name": "rmi.h",
  "hash_id": "83ccafc999dd7b2e0947a898a7dc61926b99153a7b117d6a8d8440ba4842b875",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/rmi.h",
  "human_readable_source": " \n \n\n#ifndef _RMI_H\n#define _RMI_H\n#include <linux/kernel.h>\n#include <linux/device.h>\n#include <linux/interrupt.h>\n#include <linux/input.h>\n#include <linux/kfifo.h>\n#include <linux/list.h>\n#include <linux/module.h>\n#include <linux/types.h>\n\n#define NAME_BUFFER_SIZE 256\n\n \nstruct rmi_2d_axis_alignment {\n\tbool swap_axes;\n\tbool flip_x;\n\tbool flip_y;\n\tu16 clip_x_low;\n\tu16 clip_y_low;\n\tu16 clip_x_high;\n\tu16 clip_y_high;\n\tu16 offset_x;\n\tu16 offset_y;\n\tu8 delta_x_threshold;\n\tu8 delta_y_threshold;\n};\n\n \nenum rmi_sensor_type {\n\trmi_sensor_default = 0,\n\trmi_sensor_touchscreen,\n\trmi_sensor_touchpad\n};\n\n#define RMI_F11_DISABLE_ABS_REPORT      BIT(0)\n\n \nstruct rmi_2d_sensor_platform_data {\n\tstruct rmi_2d_axis_alignment axis_align;\n\tenum rmi_sensor_type sensor_type;\n\tint x_mm;\n\tint y_mm;\n\tint disable_report_mask;\n\tu16 rezero_wait;\n\tbool topbuttonpad;\n\tbool kernel_tracking;\n\tint dmax;\n\tint dribble;\n\tint palm_detect;\n};\n\n \nstruct rmi_gpio_data {\n\tbool buttonpad;\n\tbool trackstick_buttons;\n\tbool disable;\n};\n\n\n \nenum rmi_reg_state {\n\tRMI_REG_STATE_DEFAULT = 0,\n\tRMI_REG_STATE_OFF = 1,\n\tRMI_REG_STATE_ON = 2\n};\n\n \nstruct rmi_f01_power_management {\n\tenum rmi_reg_state nosleep;\n\tu8 wakeup_threshold;\n\tu8 doze_holdoff;\n\tu8 doze_interval;\n};\n\n \nstruct rmi_device_platform_data_spi {\n\tu32 block_delay_us;\n\tu32 split_read_block_delay_us;\n\tu32 read_delay_us;\n\tu32 write_delay_us;\n\tu32 split_read_byte_delay_us;\n\tu32 pre_delay_us;\n\tu32 post_delay_us;\n\tu8 bits_per_word;\n\tu16 mode;\n\n\tvoid *cs_assert_data;\n\tint (*cs_assert)(const void *cs_assert_data, const bool assert);\n};\n\n \nstruct rmi_device_platform_data {\n\tint reset_delay_ms;\n\tint irq;\n\n\tstruct rmi_device_platform_data_spi spi_data;\n\n\t \n\tstruct rmi_2d_sensor_platform_data sensor_pdata;\n\tstruct rmi_f01_power_management power_management;\n\tstruct rmi_gpio_data gpio_data;\n};\n\n \nstruct rmi_function_descriptor {\n\tu16 query_base_addr;\n\tu16 command_base_addr;\n\tu16 control_base_addr;\n\tu16 data_base_addr;\n\tu8 interrupt_source_count;\n\tu8 function_number;\n\tu8 function_version;\n};\n\nstruct rmi_device;\n\n \nstruct rmi_transport_dev {\n\tstruct device *dev;\n\tstruct rmi_device *rmi_dev;\n\n\tconst char *proto_name;\n\tconst struct rmi_transport_ops *ops;\n\n\tstruct rmi_device_platform_data pdata;\n\n\tstruct input_dev *input;\n};\n\n \nstruct rmi_transport_ops {\n\tint (*write_block)(struct rmi_transport_dev *xport, u16 addr,\n\t\t\t   const void *buf, size_t len);\n\tint (*read_block)(struct rmi_transport_dev *xport, u16 addr,\n\t\t\t  void *buf, size_t len);\n\tint (*reset)(struct rmi_transport_dev *xport, u16 reset_addr);\n};\n\n \nstruct rmi_driver {\n\tstruct device_driver driver;\n\n\tint (*reset_handler)(struct rmi_device *rmi_dev);\n\tint (*clear_irq_bits)(struct rmi_device *rmi_dev, unsigned long *mask);\n\tint (*set_irq_bits)(struct rmi_device *rmi_dev, unsigned long *mask);\n\tint (*store_productid)(struct rmi_device *rmi_dev);\n\tint (*set_input_params)(struct rmi_device *rmi_dev,\n\t\t\tstruct input_dev *input);\n\tvoid *data;\n};\n\n \nstruct rmi_device {\n\tstruct device dev;\n\tint number;\n\n\tstruct rmi_driver *driver;\n\tstruct rmi_transport_dev *xport;\n\n};\n\nstruct rmi4_attn_data {\n\tunsigned long irq_status;\n\tsize_t size;\n\tvoid *data;\n};\n\nstruct rmi_driver_data {\n\tstruct list_head function_list;\n\n\tstruct rmi_device *rmi_dev;\n\n\tstruct rmi_function *f01_container;\n\tstruct rmi_function *f34_container;\n\tbool bootloader_mode;\n\n\tint num_of_irq_regs;\n\tint irq_count;\n\tvoid *irq_memory;\n\tunsigned long *irq_status;\n\tunsigned long *fn_irq_bits;\n\tunsigned long *current_irq_mask;\n\tunsigned long *new_irq_mask;\n\tstruct mutex irq_mutex;\n\tstruct input_dev *input;\n\n\tstruct irq_domain *irqdomain;\n\n\tu8 pdt_props;\n\n\tu8 num_rx_electrodes;\n\tu8 num_tx_electrodes;\n\n\tbool enabled;\n\tstruct mutex enabled_mutex;\n\n\tstruct rmi4_attn_data attn_data;\n\tDECLARE_KFIFO(attn_fifo, struct rmi4_attn_data, 16);\n};\n\nint rmi_register_transport_device(struct rmi_transport_dev *xport);\nvoid rmi_unregister_transport_device(struct rmi_transport_dev *xport);\n\nvoid rmi_set_attn_data(struct rmi_device *rmi_dev, unsigned long irq_status,\n\t\t       void *data, size_t size);\n\nint rmi_driver_suspend(struct rmi_device *rmi_dev, bool enable_wake);\nint rmi_driver_resume(struct rmi_device *rmi_dev, bool clear_wake);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}