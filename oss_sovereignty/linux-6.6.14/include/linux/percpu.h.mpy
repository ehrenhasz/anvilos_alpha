{
  "module_name": "percpu.h",
  "hash_id": "62a6506ff78f31ea5f3f0dc41955ef23052acdf8a0dda59c51f38fc33df3ea3a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/percpu.h",
  "human_readable_source": " \n#ifndef __LINUX_PERCPU_H\n#define __LINUX_PERCPU_H\n\n#include <linux/mmdebug.h>\n#include <linux/preempt.h>\n#include <linux/smp.h>\n#include <linux/cpumask.h>\n#include <linux/pfn.h>\n#include <linux/init.h>\n#include <linux/cleanup.h>\n\n#include <asm/percpu.h>\n\n \n#ifdef CONFIG_MODULES\n#define PERCPU_MODULE_RESERVE\t\t(8 << 10)\n#else\n#define PERCPU_MODULE_RESERVE\t\t0\n#endif\n\n \n#define PCPU_MIN_UNIT_SIZE\t\tPFN_ALIGN(32 << 10)\n\n \n#define PCPU_MIN_ALLOC_SHIFT\t\t2\n#define PCPU_MIN_ALLOC_SIZE\t\t(1 << PCPU_MIN_ALLOC_SHIFT)\n\n \n#define PCPU_BITMAP_BLOCK_SIZE\t\tPAGE_SIZE\n#define PCPU_BITMAP_BLOCK_BITS\t\t(PCPU_BITMAP_BLOCK_SIZE >>\t\\\n\t\t\t\t\t PCPU_MIN_ALLOC_SHIFT)\n\n#ifdef CONFIG_RANDOM_KMALLOC_CACHES\n#define PERCPU_DYNAMIC_SIZE_SHIFT      12\n#else\n#define PERCPU_DYNAMIC_SIZE_SHIFT      10\n#endif\n\n \n#define PERCPU_DYNAMIC_EARLY_SIZE\t(20 << PERCPU_DYNAMIC_SIZE_SHIFT)\n\n \n#if BITS_PER_LONG > 32\n#define PERCPU_DYNAMIC_RESERVE\t\t(28 << PERCPU_DYNAMIC_SIZE_SHIFT)\n#else\n#define PERCPU_DYNAMIC_RESERVE\t\t(20 << PERCPU_DYNAMIC_SIZE_SHIFT)\n#endif\n\nextern void *pcpu_base_addr;\nextern const unsigned long *pcpu_unit_offsets;\n\nstruct pcpu_group_info {\n\tint\t\t\tnr_units;\t \n\tunsigned long\t\tbase_offset;\t \n\tunsigned int\t\t*cpu_map;\t \n};\n\nstruct pcpu_alloc_info {\n\tsize_t\t\t\tstatic_size;\n\tsize_t\t\t\treserved_size;\n\tsize_t\t\t\tdyn_size;\n\tsize_t\t\t\tunit_size;\n\tsize_t\t\t\tatom_size;\n\tsize_t\t\t\talloc_size;\n\tsize_t\t\t\t__ai_size;\t \n\tint\t\t\tnr_groups;\t \n\tstruct pcpu_group_info\tgroups[];\n};\n\nenum pcpu_fc {\n\tPCPU_FC_AUTO,\n\tPCPU_FC_EMBED,\n\tPCPU_FC_PAGE,\n\n\tPCPU_FC_NR,\n};\nextern const char * const pcpu_fc_names[PCPU_FC_NR];\n\nextern enum pcpu_fc pcpu_chosen_fc;\n\ntypedef int (pcpu_fc_cpu_to_node_fn_t)(int cpu);\ntypedef int (pcpu_fc_cpu_distance_fn_t)(unsigned int from, unsigned int to);\n\nextern struct pcpu_alloc_info * __init pcpu_alloc_alloc_info(int nr_groups,\n\t\t\t\t\t\t\t     int nr_units);\nextern void __init pcpu_free_alloc_info(struct pcpu_alloc_info *ai);\n\nextern void __init pcpu_setup_first_chunk(const struct pcpu_alloc_info *ai,\n\t\t\t\t\t void *base_addr);\n\nextern int __init pcpu_embed_first_chunk(size_t reserved_size, size_t dyn_size,\n\t\t\t\tsize_t atom_size,\n\t\t\t\tpcpu_fc_cpu_distance_fn_t cpu_distance_fn,\n\t\t\t\tpcpu_fc_cpu_to_node_fn_t cpu_to_nd_fn);\n\n#ifdef CONFIG_NEED_PER_CPU_PAGE_FIRST_CHUNK\nvoid __init pcpu_populate_pte(unsigned long addr);\nextern int __init pcpu_page_first_chunk(size_t reserved_size,\n\t\t\t\tpcpu_fc_cpu_to_node_fn_t cpu_to_nd_fn);\n#endif\n\nextern void __percpu *__alloc_reserved_percpu(size_t size, size_t align) __alloc_size(1);\nextern bool __is_kernel_percpu_address(unsigned long addr, unsigned long *can_addr);\nextern bool is_kernel_percpu_address(unsigned long addr);\n\n#if !defined(CONFIG_SMP) || !defined(CONFIG_HAVE_SETUP_PER_CPU_AREA)\nextern void __init setup_per_cpu_areas(void);\n#endif\n\nextern void __percpu *__alloc_percpu_gfp(size_t size, size_t align, gfp_t gfp) __alloc_size(1);\nextern void __percpu *__alloc_percpu(size_t size, size_t align) __alloc_size(1);\nextern void free_percpu(void __percpu *__pdata);\n\nDEFINE_FREE(free_percpu, void __percpu *, free_percpu(_T))\n\nextern phys_addr_t per_cpu_ptr_to_phys(void *addr);\n\n#define alloc_percpu_gfp(type, gfp)\t\t\t\t\t\\\n\t(typeof(type) __percpu *)__alloc_percpu_gfp(sizeof(type),\t\\\n\t\t\t\t\t\t__alignof__(type), gfp)\n#define alloc_percpu(type)\t\t\t\t\t\t\\\n\t(typeof(type) __percpu *)__alloc_percpu(sizeof(type),\t\t\\\n\t\t\t\t\t\t__alignof__(type))\n\nextern unsigned long pcpu_nr_pages(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}