{
  "module_name": "bcma.h",
  "hash_id": "5cb308f3ca71496e97a174bba115d97756e557bef50cdc921615bba63c9b9a77",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/bcma/bcma.h",
  "human_readable_source": " \n#ifndef LINUX_BCMA_H_\n#define LINUX_BCMA_H_\n\n#include <linux/pci.h>\n#include <linux/mod_devicetable.h>\n\n#include <linux/bcma/bcma_driver_arm_c9.h>\n#include <linux/bcma/bcma_driver_chipcommon.h>\n#include <linux/bcma/bcma_driver_pci.h>\n#include <linux/bcma/bcma_driver_pcie2.h>\n#include <linux/bcma/bcma_driver_mips.h>\n#include <linux/bcma/bcma_driver_gmac_cmn.h>\n#include <linux/ssb/ssb.h>  \n\n#include <linux/bcma/bcma_regs.h>\n\nstruct bcma_device;\nstruct bcma_bus;\n\nenum bcma_hosttype {\n\tBCMA_HOSTTYPE_PCI,\n\tBCMA_HOSTTYPE_SDIO,\n\tBCMA_HOSTTYPE_SOC,\n};\n\nstruct bcma_chipinfo {\n\tu16 id;\n\tu8 rev;\n\tu8 pkg;\n};\n\nstruct bcma_boardinfo {\n\tu16 vendor;\n\tu16 type;\n};\n\nenum bcma_clkmode {\n\tBCMA_CLKMODE_FAST,\n\tBCMA_CLKMODE_DYNAMIC,\n};\n\nstruct bcma_host_ops {\n\tu8 (*read8)(struct bcma_device *core, u16 offset);\n\tu16 (*read16)(struct bcma_device *core, u16 offset);\n\tu32 (*read32)(struct bcma_device *core, u16 offset);\n\tvoid (*write8)(struct bcma_device *core, u16 offset, u8 value);\n\tvoid (*write16)(struct bcma_device *core, u16 offset, u16 value);\n\tvoid (*write32)(struct bcma_device *core, u16 offset, u32 value);\n#ifdef CONFIG_BCMA_BLOCKIO\n\tvoid (*block_read)(struct bcma_device *core, void *buffer,\n\t\t\t   size_t count, u16 offset, u8 reg_width);\n\tvoid (*block_write)(struct bcma_device *core, const void *buffer,\n\t\t\t    size_t count, u16 offset, u8 reg_width);\n#endif\n\t \n\tu32 (*aread32)(struct bcma_device *core, u16 offset);\n\tvoid (*awrite32)(struct bcma_device *core, u16 offset, u32 value);\n};\n\n \n#define BCMA_MANUF_ARM\t\t\t0x43B\n#define BCMA_MANUF_MIPS\t\t\t0x4A7\n#define BCMA_MANUF_BCM\t\t\t0x4BF\n\n \n#define BCMA_CL_SIM\t\t\t0x0\n#define BCMA_CL_EROM\t\t\t0x1\n#define BCMA_CL_CORESIGHT\t\t0x9\n#define BCMA_CL_VERIF\t\t\t0xB\n#define BCMA_CL_OPTIMO\t\t\t0xD\n#define BCMA_CL_GEN\t\t\t0xE\n#define BCMA_CL_PRIMECELL\t\t0xF\n\n \n#define BCMA_CORE_OOB_ROUTER\t\t0x367\t \n#define BCMA_CORE_4706_CHIPCOMMON\t0x500\n#define BCMA_CORE_NS_PCIEG2\t\t0x501\n#define BCMA_CORE_NS_DMA\t\t0x502\n#define BCMA_CORE_NS_SDIO3\t\t0x503\n#define BCMA_CORE_NS_USB20\t\t0x504\n#define BCMA_CORE_NS_USB30\t\t0x505\n#define BCMA_CORE_NS_A9JTAG\t\t0x506\n#define BCMA_CORE_NS_DDR23\t\t0x507\n#define BCMA_CORE_NS_ROM\t\t0x508\n#define BCMA_CORE_NS_NAND\t\t0x509\n#define BCMA_CORE_NS_QSPI\t\t0x50A\n#define BCMA_CORE_NS_CHIPCOMMON_B\t0x50B\n#define BCMA_CORE_4706_SOC_RAM\t\t0x50E\n#define BCMA_CORE_ARMCA9\t\t0x510\n#define BCMA_CORE_4706_MAC_GBIT\t\t0x52D\n#define BCMA_CORE_AMEMC\t\t\t0x52E\t \n#define BCMA_CORE_ALTA\t\t\t0x534\t \n#define BCMA_CORE_4706_MAC_GBIT_COMMON\t0x5DC\n#define BCMA_CORE_DDR23_PHY\t\t0x5DD\n#define BCMA_CORE_INVALID\t\t0x700\n#define BCMA_CORE_CHIPCOMMON\t\t0x800\n#define BCMA_CORE_ILINE20\t\t0x801\n#define BCMA_CORE_SRAM\t\t\t0x802\n#define BCMA_CORE_SDRAM\t\t\t0x803\n#define BCMA_CORE_PCI\t\t\t0x804\n#define BCMA_CORE_MIPS\t\t\t0x805\n#define BCMA_CORE_ETHERNET\t\t0x806\n#define BCMA_CORE_V90\t\t\t0x807\n#define BCMA_CORE_USB11_HOSTDEV\t\t0x808\n#define BCMA_CORE_ADSL\t\t\t0x809\n#define BCMA_CORE_ILINE100\t\t0x80A\n#define BCMA_CORE_IPSEC\t\t\t0x80B\n#define BCMA_CORE_UTOPIA\t\t0x80C\n#define BCMA_CORE_PCMCIA\t\t0x80D\n#define BCMA_CORE_INTERNAL_MEM\t\t0x80E\n#define BCMA_CORE_MEMC_SDRAM\t\t0x80F\n#define BCMA_CORE_OFDM\t\t\t0x810\n#define BCMA_CORE_EXTIF\t\t\t0x811\n#define BCMA_CORE_80211\t\t\t0x812\n#define BCMA_CORE_PHY_A\t\t\t0x813\n#define BCMA_CORE_PHY_B\t\t\t0x814\n#define BCMA_CORE_PHY_G\t\t\t0x815\n#define BCMA_CORE_MIPS_3302\t\t0x816\n#define BCMA_CORE_USB11_HOST\t\t0x817\n#define BCMA_CORE_USB11_DEV\t\t0x818\n#define BCMA_CORE_USB20_HOST\t\t0x819\n#define BCMA_CORE_USB20_DEV\t\t0x81A\n#define BCMA_CORE_SDIO_HOST\t\t0x81B\n#define BCMA_CORE_ROBOSWITCH\t\t0x81C\n#define BCMA_CORE_PARA_ATA\t\t0x81D\n#define BCMA_CORE_SATA_XORDMA\t\t0x81E\n#define BCMA_CORE_ETHERNET_GBIT\t\t0x81F\n#define BCMA_CORE_PCIE\t\t\t0x820\n#define BCMA_CORE_PHY_N\t\t\t0x821\n#define BCMA_CORE_SRAM_CTL\t\t0x822\n#define BCMA_CORE_MINI_MACPHY\t\t0x823\n#define BCMA_CORE_ARM_1176\t\t0x824\n#define BCMA_CORE_ARM_7TDMI\t\t0x825\n#define BCMA_CORE_PHY_LP\t\t0x826\n#define BCMA_CORE_PMU\t\t\t0x827\n#define BCMA_CORE_PHY_SSN\t\t0x828\n#define BCMA_CORE_SDIO_DEV\t\t0x829\n#define BCMA_CORE_ARM_CM3\t\t0x82A\n#define BCMA_CORE_PHY_HT\t\t0x82B\n#define BCMA_CORE_MIPS_74K\t\t0x82C\n#define BCMA_CORE_MAC_GBIT\t\t0x82D\n#define BCMA_CORE_DDR12_MEM_CTL\t\t0x82E\n#define BCMA_CORE_PCIE_RC\t\t0x82F\t \n#define BCMA_CORE_OCP_OCP_BRIDGE\t0x830\n#define BCMA_CORE_SHARED_COMMON\t\t0x831\n#define BCMA_CORE_OCP_AHB_BRIDGE\t0x832\n#define BCMA_CORE_SPI_HOST\t\t0x833\n#define BCMA_CORE_I2S\t\t\t0x834\n#define BCMA_CORE_SDR_DDR1_MEM_CTL\t0x835\t \n#define BCMA_CORE_SHIM\t\t\t0x837\t \n#define BCMA_CORE_PHY_AC\t\t0x83B\n#define BCMA_CORE_PCIE2\t\t\t0x83C\t \n#define BCMA_CORE_USB30_DEV\t\t0x83D\n#define BCMA_CORE_ARM_CR4\t\t0x83E\n#define BCMA_CORE_GCI\t\t\t0x840\n#define BCMA_CORE_CMEM\t\t\t0x846\t \n#define BCMA_CORE_ARM_CA7\t\t0x847\n#define BCMA_CORE_SYS_MEM\t\t0x849\n#define BCMA_CORE_DEFAULT\t\t0xFFF\n\n#define BCMA_MAX_NR_CORES\t\t16\n#define BCMA_CORE_SIZE\t\t\t0x1000\n\n \n#define BCMA_CHIP_ID_BCM4313\t0x4313\n#define BCMA_CHIP_ID_BCM43142\t43142\n#define BCMA_CHIP_ID_BCM43131\t43131\n#define BCMA_CHIP_ID_BCM43217\t43217\n#define BCMA_CHIP_ID_BCM43222\t43222\n#define BCMA_CHIP_ID_BCM43224\t43224\n#define  BCMA_PKG_ID_BCM43224_FAB_CSM\t0x8\n#define  BCMA_PKG_ID_BCM43224_FAB_SMIC\t0xa\n#define BCMA_CHIP_ID_BCM43225\t43225\n#define BCMA_CHIP_ID_BCM43227\t43227\n#define BCMA_CHIP_ID_BCM43228\t43228\n#define BCMA_CHIP_ID_BCM43421\t43421\n#define BCMA_CHIP_ID_BCM43428\t43428\n#define BCMA_CHIP_ID_BCM43431\t43431\n#define BCMA_CHIP_ID_BCM43460\t43460\n#define BCMA_CHIP_ID_BCM4331\t0x4331\n#define BCMA_CHIP_ID_BCM6362\t0x6362\n#define BCMA_CHIP_ID_BCM4360\t0x4360\n#define BCMA_CHIP_ID_BCM4352\t0x4352\n\n \n#define BCMA_CHIP_ID_BCM4706\t0x5300\n#define  BCMA_PKG_ID_BCM4706L\t1\n#define BCMA_CHIP_ID_BCM4716\t0x4716\n#define  BCMA_PKG_ID_BCM4716\t8\n#define  BCMA_PKG_ID_BCM4717\t9\n#define  BCMA_PKG_ID_BCM4718\t10\n#define BCMA_CHIP_ID_BCM47162\t47162\n#define BCMA_CHIP_ID_BCM4748\t0x4748\n#define BCMA_CHIP_ID_BCM4749\t0x4749\n#define BCMA_CHIP_ID_BCM5356\t0x5356\n#define BCMA_CHIP_ID_BCM5357\t0x5357\n#define  BCMA_PKG_ID_BCM5358\t9\n#define  BCMA_PKG_ID_BCM47186\t10\n#define  BCMA_PKG_ID_BCM5357\t11\n#define BCMA_CHIP_ID_BCM53572\t53572\n#define  BCMA_PKG_ID_BCM47188\t9\n#define BCMA_CHIP_ID_BCM4707\t53010\n#define  BCMA_PKG_ID_BCM4707\t1\n#define  BCMA_PKG_ID_BCM4708\t2\n#define  BCMA_PKG_ID_BCM4709\t0\n#define BCMA_CHIP_ID_BCM47094\t53030\n#define BCMA_CHIP_ID_BCM53018\t53018\n#define BCMA_CHIP_ID_BCM53573\t53573\n#define  BCMA_PKG_ID_BCM53573\t0\n#define  BCMA_PKG_ID_BCM47189\t1\n\n \n \n#define BCMA_BOARD_TYPE_BCM94313BU\t0X050F\n#define BCMA_BOARD_TYPE_BCM94313HM\t0X0510\n#define BCMA_BOARD_TYPE_BCM94313EPA\t0X0511\n#define BCMA_BOARD_TYPE_BCM94313HMG\t0X051C\n \n#define BCMA_BOARD_TYPE_BCM94716NR2\t0X04CD\n \n#define BCMA_BOARD_TYPE_BCM943224X21\t0X056E\n#define BCMA_BOARD_TYPE_BCM943224X21_FCC\t0X00D1\n#define BCMA_BOARD_TYPE_BCM943224X21B\t0X00E9\n#define BCMA_BOARD_TYPE_BCM943224M93\t0X008B\n#define BCMA_BOARD_TYPE_BCM943224M93A\t0X0090\n#define BCMA_BOARD_TYPE_BCM943224X16\t0X0093\n#define BCMA_BOARD_TYPE_BCM94322X9\t0X008D\n#define BCMA_BOARD_TYPE_BCM94322M35E\t0X008E\n \n#define BCMA_BOARD_TYPE_BCM943228BU8\t0X0540\n#define BCMA_BOARD_TYPE_BCM943228BU9\t0X0541\n#define BCMA_BOARD_TYPE_BCM943228BU\t0X0542\n#define BCMA_BOARD_TYPE_BCM943227HM4L\t0X0543\n#define BCMA_BOARD_TYPE_BCM943227HMB\t0X0544\n#define BCMA_BOARD_TYPE_BCM943228HM4L\t0X0545\n#define BCMA_BOARD_TYPE_BCM943228SD\t0X0573\n \n#define BCMA_BOARD_TYPE_BCM94331X19\t0X00D6\n#define BCMA_BOARD_TYPE_BCM94331X28\t0X00E4\n#define BCMA_BOARD_TYPE_BCM94331X28B\t0X010E\n#define BCMA_BOARD_TYPE_BCM94331PCIEBT3AX\t0X00E4\n#define BCMA_BOARD_TYPE_BCM94331X12_2G\t0X00EC\n#define BCMA_BOARD_TYPE_BCM94331X12_5G\t0X00ED\n#define BCMA_BOARD_TYPE_BCM94331X29B\t0X00EF\n#define BCMA_BOARD_TYPE_BCM94331CSAX\t0X00EF\n#define BCMA_BOARD_TYPE_BCM94331X19C\t0X00F5\n#define BCMA_BOARD_TYPE_BCM94331X33\t0X00F4\n#define BCMA_BOARD_TYPE_BCM94331BU\t0X0523\n#define BCMA_BOARD_TYPE_BCM94331S9BU\t0X0524\n#define BCMA_BOARD_TYPE_BCM94331MC\t0X0525\n#define BCMA_BOARD_TYPE_BCM94331MCI\t0X0526\n#define BCMA_BOARD_TYPE_BCM94331PCIEBT4\t0X0527\n#define BCMA_BOARD_TYPE_BCM94331HM\t0X0574\n#define BCMA_BOARD_TYPE_BCM94331PCIEDUAL\t0X059B\n#define BCMA_BOARD_TYPE_BCM94331MCH5\t0X05A9\n#define BCMA_BOARD_TYPE_BCM94331CS\t0X05C6\n#define BCMA_BOARD_TYPE_BCM94331CD\t0X05DA\n \n#define BCMA_BOARD_TYPE_BCM953572BU\t0X058D\n#define BCMA_BOARD_TYPE_BCM953572NR2\t0X058E\n#define BCMA_BOARD_TYPE_BCM947188NR2\t0X058F\n#define BCMA_BOARD_TYPE_BCM953572SDRNR2\t0X0590\n \n#define BCMA_BOARD_TYPE_BCM943142HM\t0X05E0\n\nstruct bcma_device {\n\tstruct bcma_bus *bus;\n\tstruct bcma_device_id id;\n\n\tstruct device dev;\n\tstruct device *dma_dev;\n\n\tunsigned int irq;\n\tbool dev_registered;\n\n\tu8 core_index;\n\tu8 core_unit;\n\n\tu32 addr;\n\tu32 addr_s[8];\n\tu32 wrap;\n\n\tvoid __iomem *io_addr;\n\tvoid __iomem *io_wrap;\n\n\tvoid *drvdata;\n\tstruct list_head list;\n};\n\nstatic inline void *bcma_get_drvdata(struct bcma_device *core)\n{\n\treturn core->drvdata;\n}\nstatic inline void bcma_set_drvdata(struct bcma_device *core, void *drvdata)\n{\n\tcore->drvdata = drvdata;\n}\n\nstruct bcma_driver {\n\tconst char *name;\n\tconst struct bcma_device_id *id_table;\n\n\tint (*probe)(struct bcma_device *dev);\n\tvoid (*remove)(struct bcma_device *dev);\n\tint (*suspend)(struct bcma_device *dev);\n\tint (*resume)(struct bcma_device *dev);\n\tvoid (*shutdown)(struct bcma_device *dev);\n\n\tstruct device_driver drv;\n};\nextern\nint __bcma_driver_register(struct bcma_driver *drv, struct module *owner);\n#define bcma_driver_register(drv) \\\n\t__bcma_driver_register(drv, THIS_MODULE)\n\nextern void bcma_driver_unregister(struct bcma_driver *drv);\n\n \n#define module_bcma_driver(__bcma_driver) \\\n\tmodule_driver(__bcma_driver, bcma_driver_register, \\\n\t\t\tbcma_driver_unregister)\n\n \nextern int bcma_arch_register_fallback_sprom(\n\t\tint (*sprom_callback)(struct bcma_bus *bus,\n\t\tstruct ssb_sprom *out));\n\nstruct bcma_bus {\n\tstruct device *dev;\n\n\t \n\tvoid __iomem *mmio;\n\n\tconst struct bcma_host_ops *ops;\n\n\tenum bcma_hosttype hosttype;\n\tbool host_is_pcie2;  \n\tstruct pci_dev *host_pci;  \n\n\tstruct bcma_chipinfo chipinfo;\n\n\tstruct bcma_boardinfo boardinfo;\n\n\tstruct bcma_device *mapped_core;\n\tstruct list_head cores;\n\tu8 nr_cores;\n\tu8 num;\n\n\tstruct bcma_drv_cc drv_cc;\n\tstruct bcma_drv_cc_b drv_cc_b;\n\tstruct bcma_drv_pci drv_pci[2];\n\tstruct bcma_drv_pcie2 drv_pcie2;\n\tstruct bcma_drv_mips drv_mips;\n\tstruct bcma_drv_gmac_cmn drv_gmac_cmn;\n\n\t \n\tstruct ssb_sprom sprom;\n};\n\nstatic inline u32 bcma_read8(struct bcma_device *core, u16 offset)\n{\n\treturn core->bus->ops->read8(core, offset);\n}\nstatic inline u32 bcma_read16(struct bcma_device *core, u16 offset)\n{\n\treturn core->bus->ops->read16(core, offset);\n}\nstatic inline u32 bcma_read32(struct bcma_device *core, u16 offset)\n{\n\treturn core->bus->ops->read32(core, offset);\n}\nstatic inline\nvoid bcma_write8(struct bcma_device *core, u16 offset, u32 value)\n{\n\tcore->bus->ops->write8(core, offset, value);\n}\nstatic inline\nvoid bcma_write16(struct bcma_device *core, u16 offset, u32 value)\n{\n\tcore->bus->ops->write16(core, offset, value);\n}\nstatic inline\nvoid bcma_write32(struct bcma_device *core, u16 offset, u32 value)\n{\n\tcore->bus->ops->write32(core, offset, value);\n}\n#ifdef CONFIG_BCMA_BLOCKIO\nstatic inline void bcma_block_read(struct bcma_device *core, void *buffer,\n\t\t\t\t   size_t count, u16 offset, u8 reg_width)\n{\n\tcore->bus->ops->block_read(core, buffer, count, offset, reg_width);\n}\nstatic inline void bcma_block_write(struct bcma_device *core,\n\t\t\t\t    const void *buffer, size_t count,\n\t\t\t\t    u16 offset, u8 reg_width)\n{\n\tcore->bus->ops->block_write(core, buffer, count, offset, reg_width);\n}\n#endif\nstatic inline u32 bcma_aread32(struct bcma_device *core, u16 offset)\n{\n\treturn core->bus->ops->aread32(core, offset);\n}\nstatic inline\nvoid bcma_awrite32(struct bcma_device *core, u16 offset, u32 value)\n{\n\tcore->bus->ops->awrite32(core, offset, value);\n}\n\nstatic inline void bcma_mask32(struct bcma_device *cc, u16 offset, u32 mask)\n{\n\tbcma_write32(cc, offset, bcma_read32(cc, offset) & mask);\n}\nstatic inline void bcma_set32(struct bcma_device *cc, u16 offset, u32 set)\n{\n\tbcma_write32(cc, offset, bcma_read32(cc, offset) | set);\n}\nstatic inline void bcma_maskset32(struct bcma_device *cc,\n\t\t\t\t  u16 offset, u32 mask, u32 set)\n{\n\tbcma_write32(cc, offset, (bcma_read32(cc, offset) & mask) | set);\n}\nstatic inline void bcma_mask16(struct bcma_device *cc, u16 offset, u16 mask)\n{\n\tbcma_write16(cc, offset, bcma_read16(cc, offset) & mask);\n}\nstatic inline void bcma_set16(struct bcma_device *cc, u16 offset, u16 set)\n{\n\tbcma_write16(cc, offset, bcma_read16(cc, offset) | set);\n}\nstatic inline void bcma_maskset16(struct bcma_device *cc,\n\t\t\t\t  u16 offset, u16 mask, u16 set)\n{\n\tbcma_write16(cc, offset, (bcma_read16(cc, offset) & mask) | set);\n}\n\nextern struct bcma_device *bcma_find_core_unit(struct bcma_bus *bus, u16 coreid,\n\t\t\t\t\t       u8 unit);\nstatic inline struct bcma_device *bcma_find_core(struct bcma_bus *bus,\n\t\t\t\t\t\t u16 coreid)\n{\n\treturn bcma_find_core_unit(bus, coreid, 0);\n}\n\n#ifdef CONFIG_BCMA_HOST_PCI\nextern void bcma_host_pci_up(struct bcma_bus *bus);\nextern void bcma_host_pci_down(struct bcma_bus *bus);\nextern int bcma_host_pci_irq_ctl(struct bcma_bus *bus,\n\t\t\t\t struct bcma_device *core, bool enable);\n#else\nstatic inline void bcma_host_pci_up(struct bcma_bus *bus)\n{\n}\nstatic inline void bcma_host_pci_down(struct bcma_bus *bus)\n{\n}\nstatic inline int bcma_host_pci_irq_ctl(struct bcma_bus *bus,\n\t\t\t\t\tstruct bcma_device *core, bool enable)\n{\n\tif (bus->hosttype == BCMA_HOSTTYPE_PCI)\n\t\treturn -ENOTSUPP;\n\treturn 0;\n}\n#endif\n\nextern bool bcma_core_is_enabled(struct bcma_device *core);\nextern void bcma_core_disable(struct bcma_device *core, u32 flags);\nextern int bcma_core_enable(struct bcma_device *core, u32 flags);\nextern void bcma_core_set_clockmode(struct bcma_device *core,\n\t\t\t\t    enum bcma_clkmode clkmode);\nextern void bcma_core_pll_ctl(struct bcma_device *core, u32 req, u32 status,\n\t\t\t      bool on);\nextern u32 bcma_chipco_pll_read(struct bcma_drv_cc *cc, u32 offset);\n#define BCMA_DMA_TRANSLATION_MASK\t0xC0000000\n#define  BCMA_DMA_TRANSLATION_NONE\t0x00000000\n#define  BCMA_DMA_TRANSLATION_DMA32_CMT\t0x40000000  \n#define  BCMA_DMA_TRANSLATION_DMA64_CMT\t0x80000000  \nextern u32 bcma_core_dma_translation(struct bcma_device *core);\n\nextern unsigned int bcma_core_irq(struct bcma_device *core, int num);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}