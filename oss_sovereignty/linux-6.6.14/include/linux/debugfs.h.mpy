{
  "module_name": "debugfs.h",
  "hash_id": "36364993211d969dc87af3389e35435df7ec5cc3363d56aa296e9b0a33b178cd",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/debugfs.h",
  "human_readable_source": "\n \n\n#ifndef _DEBUGFS_H_\n#define _DEBUGFS_H_\n\n#include <linux/fs.h>\n#include <linux/seq_file.h>\n\n#include <linux/types.h>\n#include <linux/compiler.h>\n\nstruct device;\nstruct file_operations;\n\nstruct debugfs_blob_wrapper {\n\tvoid *data;\n\tunsigned long size;\n};\n\nstruct debugfs_reg32 {\n\tchar *name;\n\tunsigned long offset;\n};\n\nstruct debugfs_regset32 {\n\tconst struct debugfs_reg32 *regs;\n\tint nregs;\n\tvoid __iomem *base;\n\tstruct device *dev;\t \n};\n\nstruct debugfs_u32_array {\n\tu32 *array;\n\tu32 n_elements;\n};\n\nextern struct dentry *arch_debugfs_dir;\n\n#define DEFINE_DEBUGFS_ATTRIBUTE_XSIGNED(__fops, __get, __set, __fmt, __is_signed)\t\\\nstatic int __fops ## _open(struct inode *inode, struct file *file)\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t__simple_attr_check_format(__fmt, 0ull);\t\t\t\\\n\treturn simple_attr_open(inode, file, __get, __set, __fmt);\t\\\n}\t\t\t\t\t\t\t\t\t\\\nstatic const struct file_operations __fops = {\t\t\t\t\\\n\t.owner\t = THIS_MODULE,\t\t\t\t\t\t\\\n\t.open\t = __fops ## _open,\t\t\t\t\t\\\n\t.release = simple_attr_release,\t\t\t\t\t\\\n\t.read\t = debugfs_attr_read,\t\t\t\t\t\\\n\t.write\t = (__is_signed) ? debugfs_attr_write_signed : debugfs_attr_write,\t\\\n\t.llseek  = no_llseek,\t\t\t\t\t\t\\\n}\n\n#define DEFINE_DEBUGFS_ATTRIBUTE(__fops, __get, __set, __fmt)\t\t\\\n\tDEFINE_DEBUGFS_ATTRIBUTE_XSIGNED(__fops, __get, __set, __fmt, false)\n\n#define DEFINE_DEBUGFS_ATTRIBUTE_SIGNED(__fops, __get, __set, __fmt)\t\\\n\tDEFINE_DEBUGFS_ATTRIBUTE_XSIGNED(__fops, __get, __set, __fmt, true)\n\ntypedef struct vfsmount *(*debugfs_automount_t)(struct dentry *, void *);\n\n#if defined(CONFIG_DEBUG_FS)\n\nstruct dentry *debugfs_lookup(const char *name, struct dentry *parent);\n\nstruct dentry *debugfs_create_file(const char *name, umode_t mode,\n\t\t\t\t   struct dentry *parent, void *data,\n\t\t\t\t   const struct file_operations *fops);\nstruct dentry *debugfs_create_file_unsafe(const char *name, umode_t mode,\n\t\t\t\t   struct dentry *parent, void *data,\n\t\t\t\t   const struct file_operations *fops);\n\nvoid debugfs_create_file_size(const char *name, umode_t mode,\n\t\t\t      struct dentry *parent, void *data,\n\t\t\t      const struct file_operations *fops,\n\t\t\t      loff_t file_size);\n\nstruct dentry *debugfs_create_dir(const char *name, struct dentry *parent);\n\nstruct dentry *debugfs_create_symlink(const char *name, struct dentry *parent,\n\t\t\t\t      const char *dest);\n\nstruct dentry *debugfs_create_automount(const char *name,\n\t\t\t\t\tstruct dentry *parent,\n\t\t\t\t\tdebugfs_automount_t f,\n\t\t\t\t\tvoid *data);\n\nvoid debugfs_remove(struct dentry *dentry);\n#define debugfs_remove_recursive debugfs_remove\n\nvoid debugfs_lookup_and_remove(const char *name, struct dentry *parent);\n\nconst struct file_operations *debugfs_real_fops(const struct file *filp);\n\nint debugfs_file_get(struct dentry *dentry);\nvoid debugfs_file_put(struct dentry *dentry);\n\nssize_t debugfs_attr_read(struct file *file, char __user *buf,\n\t\t\tsize_t len, loff_t *ppos);\nssize_t debugfs_attr_write(struct file *file, const char __user *buf,\n\t\t\tsize_t len, loff_t *ppos);\nssize_t debugfs_attr_write_signed(struct file *file, const char __user *buf,\n\t\t\tsize_t len, loff_t *ppos);\n\nstruct dentry *debugfs_rename(struct dentry *old_dir, struct dentry *old_dentry,\n                struct dentry *new_dir, const char *new_name);\n\nvoid debugfs_create_u8(const char *name, umode_t mode, struct dentry *parent,\n\t\t       u8 *value);\nvoid debugfs_create_u16(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu16 *value);\nvoid debugfs_create_u32(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu32 *value);\nvoid debugfs_create_u64(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu64 *value);\nvoid debugfs_create_ulong(const char *name, umode_t mode, struct dentry *parent,\n\t\t\t  unsigned long *value);\nvoid debugfs_create_x8(const char *name, umode_t mode, struct dentry *parent,\n\t\t       u8 *value);\nvoid debugfs_create_x16(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu16 *value);\nvoid debugfs_create_x32(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu32 *value);\nvoid debugfs_create_x64(const char *name, umode_t mode, struct dentry *parent,\n\t\t\tu64 *value);\nvoid debugfs_create_size_t(const char *name, umode_t mode,\n\t\t\t   struct dentry *parent, size_t *value);\nvoid debugfs_create_atomic_t(const char *name, umode_t mode,\n\t\t\t     struct dentry *parent, atomic_t *value);\nvoid debugfs_create_bool(const char *name, umode_t mode, struct dentry *parent,\n\t\t\t bool *value);\nvoid debugfs_create_str(const char *name, umode_t mode,\n\t\t\tstruct dentry *parent, char **value);\n\nstruct dentry *debugfs_create_blob(const char *name, umode_t mode,\n\t\t\t\t  struct dentry *parent,\n\t\t\t\t  struct debugfs_blob_wrapper *blob);\n\nvoid debugfs_create_regset32(const char *name, umode_t mode,\n\t\t\t     struct dentry *parent,\n\t\t\t     struct debugfs_regset32 *regset);\n\nvoid debugfs_print_regs32(struct seq_file *s, const struct debugfs_reg32 *regs,\n\t\t\t  int nregs, void __iomem *base, char *prefix);\n\nvoid debugfs_create_u32_array(const char *name, umode_t mode,\n\t\t\t      struct dentry *parent,\n\t\t\t      struct debugfs_u32_array *array);\n\nvoid debugfs_create_devm_seqfile(struct device *dev, const char *name,\n\t\t\t\t struct dentry *parent,\n\t\t\t\t int (*read_fn)(struct seq_file *s, void *data));\n\nbool debugfs_initialized(void);\n\nssize_t debugfs_read_file_bool(struct file *file, char __user *user_buf,\n\t\t\t       size_t count, loff_t *ppos);\n\nssize_t debugfs_write_file_bool(struct file *file, const char __user *user_buf,\n\t\t\t\tsize_t count, loff_t *ppos);\n\nssize_t debugfs_read_file_str(struct file *file, char __user *user_buf,\n\t\t\t      size_t count, loff_t *ppos);\n\n#else\n\n#include <linux/err.h>\n\n \n\nstatic inline struct dentry *debugfs_lookup(const char *name,\n\t\t\t\t\t    struct dentry *parent)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline struct dentry *debugfs_create_file(const char *name, umode_t mode,\n\t\t\t\t\tstruct dentry *parent, void *data,\n\t\t\t\t\tconst struct file_operations *fops)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline struct dentry *debugfs_create_file_unsafe(const char *name,\n\t\t\t\t\tumode_t mode, struct dentry *parent,\n\t\t\t\t\tvoid *data,\n\t\t\t\t\tconst struct file_operations *fops)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline void debugfs_create_file_size(const char *name, umode_t mode,\n\t\t\t\t\t    struct dentry *parent, void *data,\n\t\t\t\t\t    const struct file_operations *fops,\n\t\t\t\t\t    loff_t file_size)\n{ }\n\nstatic inline struct dentry *debugfs_create_dir(const char *name,\n\t\t\t\t\t\tstruct dentry *parent)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline struct dentry *debugfs_create_symlink(const char *name,\n\t\t\t\t\t\t    struct dentry *parent,\n\t\t\t\t\t\t    const char *dest)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline struct dentry *debugfs_create_automount(const char *name,\n\t\t\t\t\tstruct dentry *parent,\n\t\t\t\t\tdebugfs_automount_t f,\n\t\t\t\t\tvoid *data)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline void debugfs_remove(struct dentry *dentry)\n{ }\n\nstatic inline void debugfs_remove_recursive(struct dentry *dentry)\n{ }\n\nstatic inline void debugfs_lookup_and_remove(const char *name,\n\t\t\t\t\t     struct dentry *parent)\n{ }\n\nconst struct file_operations *debugfs_real_fops(const struct file *filp);\n\nstatic inline int debugfs_file_get(struct dentry *dentry)\n{\n\treturn 0;\n}\n\nstatic inline void debugfs_file_put(struct dentry *dentry)\n{ }\n\nstatic inline ssize_t debugfs_attr_read(struct file *file, char __user *buf,\n\t\t\t\t\tsize_t len, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\nstatic inline ssize_t debugfs_attr_write(struct file *file,\n\t\t\t\t\tconst char __user *buf,\n\t\t\t\t\tsize_t len, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\nstatic inline ssize_t debugfs_attr_write_signed(struct file *file,\n\t\t\t\t\tconst char __user *buf,\n\t\t\t\t\tsize_t len, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\nstatic inline struct dentry *debugfs_rename(struct dentry *old_dir, struct dentry *old_dentry,\n                struct dentry *new_dir, char *new_name)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline void debugfs_create_u8(const char *name, umode_t mode,\n\t\t\t\t     struct dentry *parent, u8 *value) { }\n\nstatic inline void debugfs_create_u16(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u16 *value) { }\n\nstatic inline void debugfs_create_u32(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u32 *value) { }\n\nstatic inline void debugfs_create_u64(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u64 *value) { }\n\nstatic inline void debugfs_create_ulong(const char *name, umode_t mode,\n\t\t\t\t\tstruct dentry *parent,\n\t\t\t\t\tunsigned long *value) { }\n\nstatic inline void debugfs_create_x8(const char *name, umode_t mode,\n\t\t\t\t     struct dentry *parent, u8 *value) { }\n\nstatic inline void debugfs_create_x16(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u16 *value) { }\n\nstatic inline void debugfs_create_x32(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u32 *value) { }\n\nstatic inline void debugfs_create_x64(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent, u64 *value) { }\n\nstatic inline void debugfs_create_size_t(const char *name, umode_t mode,\n\t\t\t\t\t struct dentry *parent, size_t *value)\n{ }\n\nstatic inline void debugfs_create_atomic_t(const char *name, umode_t mode,\n\t\t\t\t\t   struct dentry *parent,\n\t\t\t\t\t   atomic_t *value)\n{ }\n\nstatic inline void debugfs_create_bool(const char *name, umode_t mode,\n\t\t\t\t       struct dentry *parent, bool *value) { }\n\nstatic inline void debugfs_create_str(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent,\n\t\t\t\t      char **value)\n{ }\n\nstatic inline struct dentry *debugfs_create_blob(const char *name, umode_t mode,\n\t\t\t\t  struct dentry *parent,\n\t\t\t\t  struct debugfs_blob_wrapper *blob)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline void debugfs_create_regset32(const char *name, umode_t mode,\n\t\t\t\t\t   struct dentry *parent,\n\t\t\t\t\t   struct debugfs_regset32 *regset)\n{\n}\n\nstatic inline void debugfs_print_regs32(struct seq_file *s, const struct debugfs_reg32 *regs,\n\t\t\t int nregs, void __iomem *base, char *prefix)\n{\n}\n\nstatic inline bool debugfs_initialized(void)\n{\n\treturn false;\n}\n\nstatic inline void debugfs_create_u32_array(const char *name, umode_t mode,\n\t\t\t\t\t    struct dentry *parent,\n\t\t\t\t\t    struct debugfs_u32_array *array)\n{\n}\n\nstatic inline void debugfs_create_devm_seqfile(struct device *dev,\n\t\t\t\t\t       const char *name,\n\t\t\t\t\t       struct dentry *parent,\n\t\t\t\t\t       int (*read_fn)(struct seq_file *s,\n\t\t\t\t\t\t\t      void *data))\n{\n}\n\nstatic inline ssize_t debugfs_read_file_bool(struct file *file,\n\t\t\t\t\t     char __user *user_buf,\n\t\t\t\t\t     size_t count, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\nstatic inline ssize_t debugfs_write_file_bool(struct file *file,\n\t\t\t\t\t      const char __user *user_buf,\n\t\t\t\t\t      size_t count, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\nstatic inline ssize_t debugfs_read_file_str(struct file *file,\n\t\t\t\t\t    char __user *user_buf,\n\t\t\t\t\t    size_t count, loff_t *ppos)\n{\n\treturn -ENODEV;\n}\n\n#endif\n\n \nstatic inline void debugfs_create_xul(const char *name, umode_t mode,\n\t\t\t\t      struct dentry *parent,\n\t\t\t\t      unsigned long *value)\n{\n\tif (sizeof(*value) == sizeof(u32))\n\t\tdebugfs_create_x32(name, mode, parent, (u32 *)value);\n\telse\n\t\tdebugfs_create_x64(name, mode, parent, (u64 *)value);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}