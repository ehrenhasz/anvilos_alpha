{
  "module_name": "padata.h",
  "hash_id": "f5a710f8e8ee8b7fc01ea691f32c0731129ac0291b8868ace2e2254af7d6316d",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/padata.h",
  "human_readable_source": " \n \n\n#ifndef PADATA_H\n#define PADATA_H\n\n#include <linux/refcount.h>\n#include <linux/compiler_types.h>\n#include <linux/workqueue.h>\n#include <linux/spinlock.h>\n#include <linux/list.h>\n#include <linux/kobject.h>\n\n#define PADATA_CPU_SERIAL   0x01\n#define PADATA_CPU_PARALLEL 0x02\n\n \nstruct padata_priv {\n\tstruct list_head\tlist;\n\tstruct parallel_data\t*pd;\n\tint\t\t\tcb_cpu;\n\tunsigned int\t\tseq_nr;\n\tint\t\t\tinfo;\n\tvoid                    (*parallel)(struct padata_priv *padata);\n\tvoid                    (*serial)(struct padata_priv *padata);\n};\n\n \nstruct padata_list {\n\tstruct list_head        list;\n\tspinlock_t              lock;\n};\n\n \nstruct padata_serial_queue {\n       struct padata_list    serial;\n       struct work_struct    work;\n       struct parallel_data *pd;\n};\n\n \nstruct padata_cpumask {\n\tcpumask_var_t\tpcpu;\n\tcpumask_var_t\tcbcpu;\n};\n\n \nstruct parallel_data {\n\tstruct padata_shell\t\t*ps;\n\tstruct padata_list\t\t__percpu *reorder_list;\n\tstruct padata_serial_queue\t__percpu *squeue;\n\trefcount_t\t\t\trefcnt;\n\tunsigned int\t\t\tseq_nr;\n\tunsigned int\t\t\tprocessed;\n\tint\t\t\t\tcpu;\n\tstruct padata_cpumask\t\tcpumask;\n\tstruct work_struct\t\treorder_work;\n\tspinlock_t                      ____cacheline_aligned lock;\n};\n\n \nstruct padata_shell {\n\tstruct padata_instance\t\t*pinst;\n\tstruct parallel_data __rcu\t*pd;\n\tstruct parallel_data\t\t*opd;\n\tstruct list_head\t\tlist;\n};\n\n \nstruct padata_mt_job {\n\tvoid (*thread_fn)(unsigned long start, unsigned long end, void *arg);\n\tvoid\t\t\t*fn_arg;\n\tunsigned long\t\tstart;\n\tunsigned long\t\tsize;\n\tunsigned long\t\talign;\n\tunsigned long\t\tmin_chunk;\n\tint\t\t\tmax_threads;\n};\n\n \nstruct padata_instance {\n\tstruct hlist_node\t\tcpu_online_node;\n\tstruct hlist_node\t\tcpu_dead_node;\n\tstruct workqueue_struct\t\t*parallel_wq;\n\tstruct workqueue_struct\t\t*serial_wq;\n\tstruct list_head\t\tpslist;\n\tstruct padata_cpumask\t\tcpumask;\n\tstruct kobject                   kobj;\n\tstruct mutex\t\t\t lock;\n\tu8\t\t\t\t flags;\n#define\tPADATA_INIT\t1\n#define\tPADATA_RESET\t2\n#define\tPADATA_INVALID\t4\n};\n\n#ifdef CONFIG_PADATA\nextern void __init padata_init(void);\n#else\nstatic inline void __init padata_init(void) {}\n#endif\n\nextern struct padata_instance *padata_alloc(const char *name);\nextern void padata_free(struct padata_instance *pinst);\nextern struct padata_shell *padata_alloc_shell(struct padata_instance *pinst);\nextern void padata_free_shell(struct padata_shell *ps);\nextern int padata_do_parallel(struct padata_shell *ps,\n\t\t\t      struct padata_priv *padata, int *cb_cpu);\nextern void padata_do_serial(struct padata_priv *padata);\nextern void __init padata_do_multithreaded(struct padata_mt_job *job);\nextern int padata_set_cpumask(struct padata_instance *pinst, int cpumask_type,\n\t\t\t      cpumask_var_t cpumask);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}