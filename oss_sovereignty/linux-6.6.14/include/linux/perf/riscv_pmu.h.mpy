{
  "module_name": "riscv_pmu.h",
  "hash_id": "592c6f4699201ee3cae48a7953b92e8c59ab1644bb00b275c1f7e134abb5b197",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/perf/riscv_pmu.h",
  "human_readable_source": " \n \n\n#ifndef _RISCV_PMU_H\n#define _RISCV_PMU_H\n\n#include <linux/perf_event.h>\n#include <linux/ptrace.h>\n#include <linux/interrupt.h>\n\n#ifdef CONFIG_RISCV_PMU\n\n \n\n#define RISCV_MAX_COUNTERS\t64\n#define RISCV_OP_UNSUPP\t\t(-EOPNOTSUPP)\n#define RISCV_PMU_SBI_PDEV_NAME\t\"riscv-pmu-sbi\"\n#define RISCV_PMU_LEGACY_PDEV_NAME\t\"riscv-pmu-legacy\"\n\n#define RISCV_PMU_STOP_FLAG_RESET 1\n\n#define RISCV_PMU_CONFIG1_GUEST_EVENTS 0x1\n\nstruct cpu_hw_events {\n\t \n\tint\t\t\tn_events;\n\t \n\tint\t\tirq;\n\t \n\tstruct perf_event\t*events[RISCV_MAX_COUNTERS];\n\t \n\tDECLARE_BITMAP(used_hw_ctrs, RISCV_MAX_COUNTERS);\n\t \n\tDECLARE_BITMAP(used_fw_ctrs, RISCV_MAX_COUNTERS);\n};\n\nstruct riscv_pmu {\n\tstruct pmu\tpmu;\n\tchar\t\t*name;\n\n\tirqreturn_t\t(*handle_irq)(int irq_num, void *dev);\n\n\tunsigned long\tcmask;\n\tu64\t\t(*ctr_read)(struct perf_event *event);\n\tint\t\t(*ctr_get_idx)(struct perf_event *event);\n\tint\t\t(*ctr_get_width)(int idx);\n\tvoid\t\t(*ctr_clear_idx)(struct perf_event *event);\n\tvoid\t\t(*ctr_start)(struct perf_event *event, u64 init_val);\n\tvoid\t\t(*ctr_stop)(struct perf_event *event, unsigned long flag);\n\tint\t\t(*event_map)(struct perf_event *event, u64 *config);\n\tvoid\t\t(*event_init)(struct perf_event *event);\n\tvoid\t\t(*event_mapped)(struct perf_event *event, struct mm_struct *mm);\n\tvoid\t\t(*event_unmapped)(struct perf_event *event, struct mm_struct *mm);\n\tuint8_t\t\t(*csr_index)(struct perf_event *event);\n\n\tstruct cpu_hw_events\t__percpu *hw_events;\n\tstruct hlist_node\tnode;\n\tstruct notifier_block   riscv_pm_nb;\n};\n\n#define to_riscv_pmu(p) (container_of(p, struct riscv_pmu, pmu))\n\nvoid riscv_pmu_start(struct perf_event *event, int flags);\nvoid riscv_pmu_stop(struct perf_event *event, int flags);\nunsigned long riscv_pmu_ctr_read_csr(unsigned long csr);\nint riscv_pmu_event_set_period(struct perf_event *event);\nuint64_t riscv_pmu_ctr_get_width_mask(struct perf_event *event);\nu64 riscv_pmu_event_update(struct perf_event *event);\n#ifdef CONFIG_RISCV_PMU_LEGACY\nvoid riscv_pmu_legacy_skip_init(void);\n#else\nstatic inline void riscv_pmu_legacy_skip_init(void) {};\n#endif\nstruct riscv_pmu *riscv_pmu_alloc(void);\n#ifdef CONFIG_RISCV_PMU_SBI\nint riscv_pmu_get_hpm_info(u32 *hw_ctr_width, u32 *num_hw_ctr);\n#endif\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}