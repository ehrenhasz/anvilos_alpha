{
  "module_name": "rcuwait.h",
  "hash_id": "199cebd3e7e8ca3f8a6abe05907a3f8f06983fa7ba9ca293e053e51961f1281a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/rcuwait.h",
  "human_readable_source": " \n#ifndef _LINUX_RCUWAIT_H_\n#define _LINUX_RCUWAIT_H_\n\n#include <linux/rcupdate.h>\n#include <linux/sched/signal.h>\n\n \nstruct rcuwait {\n\tstruct task_struct __rcu *task;\n};\n\n#define __RCUWAIT_INITIALIZER(name)\t\t\\\n\t{ .task = NULL, }\n\nstatic inline void rcuwait_init(struct rcuwait *w)\n{\n\tw->task = NULL;\n}\n\n \nstatic inline int rcuwait_active(struct rcuwait *w)\n{\n\treturn !!rcu_access_pointer(w->task);\n}\n\nextern int rcuwait_wake_up(struct rcuwait *w);\n\n \n\nstatic inline void prepare_to_rcuwait(struct rcuwait *w)\n{\n\trcu_assign_pointer(w->task, current);\n}\n\nextern void finish_rcuwait(struct rcuwait *w);\n\n#define ___rcuwait_wait_event(w, condition, state, ret, cmd)\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tlong __ret = ret;\t\t\t\t\t\t\\\n\tprepare_to_rcuwait(w);\t\t\t\t\t\t\\\n\tfor (;;) {\t\t\t\t\t\t\t\\\n\t\t \t\t\t\t\t\t\t\\\n\t\tset_current_state(state);\t\t\t\t\\\n\t\tif (condition)\t\t\t\t\t\t\\\n\t\t\tbreak;\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tif (signal_pending_state(state, current)) {\t\t\\\n\t\t\t__ret = -EINTR;\t\t\t\t\t\\\n\t\t\tbreak;\t\t\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t\tcmd;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\tfinish_rcuwait(w);\t\t\t\t\t\t\\\n\t__ret;\t\t\t\t\t\t\t\t\\\n})\n\n#define rcuwait_wait_event(w, condition, state)\t\t\t\t\\\n\t___rcuwait_wait_event(w, condition, state, 0, schedule())\n\n#define __rcuwait_wait_event_timeout(w, condition, state, timeout)\t\\\n\t___rcuwait_wait_event(w, ___wait_cond_timeout(condition),\t\\\n\t\t\t      state, timeout,\t\t\t\t\\\n\t\t\t      __ret = schedule_timeout(__ret))\n\n#define rcuwait_wait_event_timeout(w, condition, state, timeout)\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tlong __ret = timeout;\t\t\t\t\t\t\\\n\tif (!___wait_cond_timeout(condition))\t\t\t\t\\\n\t\t__ret = __rcuwait_wait_event_timeout(w, condition,\t\\\n\t\t\t\t\t\t     state, timeout);\t\\\n\t__ret;\t\t\t\t\t\t\t\t\\\n})\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}