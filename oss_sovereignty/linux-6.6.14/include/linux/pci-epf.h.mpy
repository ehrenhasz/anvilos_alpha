{
  "module_name": "pci-epf.h",
  "hash_id": "752d21ce04b4f5536ea677af825764a422b75e7d66c4c465958d0b8de9cf0859",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pci-epf.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_PCI_EPF_H\n#define __LINUX_PCI_EPF_H\n\n#include <linux/configfs.h>\n#include <linux/device.h>\n#include <linux/mod_devicetable.h>\n#include <linux/pci.h>\n\nstruct pci_epf;\nenum pci_epc_interface_type;\n\nenum pci_barno {\n\tNO_BAR = -1,\n\tBAR_0,\n\tBAR_1,\n\tBAR_2,\n\tBAR_3,\n\tBAR_4,\n\tBAR_5,\n};\n\n \nstruct pci_epf_header {\n\tu16\tvendorid;\n\tu16\tdeviceid;\n\tu8\trevid;\n\tu8\tprogif_code;\n\tu8\tsubclass_code;\n\tu8\tbaseclass_code;\n\tu8\tcache_line_size;\n\tu16\tsubsys_vendor_id;\n\tu16\tsubsys_id;\n\tenum pci_interrupt_pin interrupt_pin;\n};\n\n \nstruct pci_epf_ops {\n\tint\t(*bind)(struct pci_epf *epf);\n\tvoid\t(*unbind)(struct pci_epf *epf);\n\tstruct config_group *(*add_cfs)(struct pci_epf *epf,\n\t\t\t\t\tstruct config_group *group);\n};\n\n \nstruct pci_epc_event_ops {\n\tint (*core_init)(struct pci_epf *epf);\n\tint (*link_up)(struct pci_epf *epf);\n\tint (*link_down)(struct pci_epf *epf);\n\tint (*bme)(struct pci_epf *epf);\n};\n\n \nstruct pci_epf_driver {\n\tint\t(*probe)(struct pci_epf *epf,\n\t\t\t const struct pci_epf_device_id *id);\n\tvoid\t(*remove)(struct pci_epf *epf);\n\n\tstruct device_driver\tdriver;\n\tstruct pci_epf_ops\t*ops;\n\tstruct module\t\t*owner;\n\tstruct list_head\tepf_group;\n\tconst struct pci_epf_device_id\t*id_table;\n};\n\n#define to_pci_epf_driver(drv) (container_of((drv), struct pci_epf_driver, \\\n\t\t\t\tdriver))\n\n \nstruct pci_epf_bar {\n\tdma_addr_t\tphys_addr;\n\tvoid\t\t*addr;\n\tsize_t\t\tsize;\n\tenum pci_barno\tbarno;\n\tint\t\tflags;\n};\n\n \nstruct pci_epf {\n\tstruct device\t\tdev;\n\tconst char\t\t*name;\n\tstruct pci_epf_header\t*header;\n\tstruct pci_epf_bar\tbar[6];\n\tu8\t\t\tmsi_interrupts;\n\tu16\t\t\tmsix_interrupts;\n\tu8\t\t\tfunc_no;\n\tu8\t\t\tvfunc_no;\n\n\tstruct pci_epc\t\t*epc;\n\tstruct pci_epf\t\t*epf_pf;\n\tstruct pci_epf_driver\t*driver;\n\tconst struct pci_epf_device_id *id;\n\tstruct list_head\tlist;\n\t \n\tstruct mutex\t\tlock;\n\n\t \n\tstruct pci_epc\t\t*sec_epc;\n\tstruct list_head\tsec_epc_list;\n\tstruct pci_epf_bar\tsec_epc_bar[6];\n\tu8\t\t\tsec_epc_func_no;\n\tstruct config_group\t*group;\n\tunsigned int\t\tis_bound;\n\tunsigned int\t\tis_vf;\n\tunsigned long\t\tvfunction_num_map;\n\tstruct list_head\tpci_vepf;\n\tconst struct pci_epc_event_ops *event_ops;\n};\n\n \nstruct pci_epf_msix_tbl {\n\tu64 msg_addr;\n\tu32 msg_data;\n\tu32 vector_ctrl;\n};\n\n#define to_pci_epf(epf_dev) container_of((epf_dev), struct pci_epf, dev)\n\n#define pci_epf_register_driver(driver)    \\\n\t\t__pci_epf_register_driver((driver), THIS_MODULE)\n\nstatic inline void epf_set_drvdata(struct pci_epf *epf, void *data)\n{\n\tdev_set_drvdata(&epf->dev, data);\n}\n\nstatic inline void *epf_get_drvdata(struct pci_epf *epf)\n{\n\treturn dev_get_drvdata(&epf->dev);\n}\n\nstruct pci_epf *pci_epf_create(const char *name);\nvoid pci_epf_destroy(struct pci_epf *epf);\nint __pci_epf_register_driver(struct pci_epf_driver *driver,\n\t\t\t      struct module *owner);\nvoid pci_epf_unregister_driver(struct pci_epf_driver *driver);\nvoid *pci_epf_alloc_space(struct pci_epf *epf, size_t size, enum pci_barno bar,\n\t\t\t  size_t align, enum pci_epc_interface_type type);\nvoid pci_epf_free_space(struct pci_epf *epf, void *addr, enum pci_barno bar,\n\t\t\tenum pci_epc_interface_type type);\nint pci_epf_bind(struct pci_epf *epf);\nvoid pci_epf_unbind(struct pci_epf *epf);\nint pci_epf_add_vepf(struct pci_epf *epf_pf, struct pci_epf *epf_vf);\nvoid pci_epf_remove_vepf(struct pci_epf *epf_pf, struct pci_epf *epf_vf);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}