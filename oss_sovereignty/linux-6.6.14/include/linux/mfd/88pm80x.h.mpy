{
  "module_name": "88pm80x.h",
  "hash_id": "0e12db9e87b56424a85606f5b794560c811de9e7903f10229287fd17b8e71eb6",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mfd/88pm80x.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_MFD_88PM80X_H\n#define __LINUX_MFD_88PM80X_H\n\n#include <linux/platform_device.h>\n#include <linux/interrupt.h>\n#include <linux/regmap.h>\n#include <linux/atomic.h>\n\nenum {\n\tCHIP_INVALID = 0,\n\tCHIP_PM800,\n\tCHIP_PM805,\n\tCHIP_PM860,\n\tCHIP_MAX,\n};\n\nenum {\n\tPM800_ID_BUCK1 = 0,\n\tPM800_ID_BUCK2,\n\tPM800_ID_BUCK3,\n\tPM800_ID_BUCK4,\n\tPM800_ID_BUCK5,\n\n\tPM800_ID_LDO1,\n\tPM800_ID_LDO2,\n\tPM800_ID_LDO3,\n\tPM800_ID_LDO4,\n\tPM800_ID_LDO5,\n\tPM800_ID_LDO6,\n\tPM800_ID_LDO7,\n\tPM800_ID_LDO8,\n\tPM800_ID_LDO9,\n\tPM800_ID_LDO10,\n\tPM800_ID_LDO11,\n\tPM800_ID_LDO12,\n\tPM800_ID_LDO13,\n\tPM800_ID_LDO14,\n\tPM800_ID_LDO15,\n\tPM800_ID_LDO16,\n\tPM800_ID_LDO17,\n\tPM800_ID_LDO18,\n\tPM800_ID_LDO19,\n\n\tPM800_ID_RG_MAX,\n};\n#define PM800_MAX_REGULATOR\tPM800_ID_RG_MAX\t \n#define PM800_NUM_BUCK (5)\t \n#define PM800_NUM_LDO (19)\t \n\n \n\n#define PM800_STATUS_1\t\t\t(0x01)\n#define PM800_ONKEY_STS1\t\tBIT(0)\n#define PM800_EXTON_STS1\t\tBIT(1)\n#define PM800_CHG_STS1\t\t\tBIT(2)\n#define PM800_BAT_STS1\t\t\tBIT(3)\n#define PM800_VBUS_STS1\t\t\tBIT(4)\n#define PM800_LDO_PGOOD_STS1\t\tBIT(5)\n#define PM800_BUCK_PGOOD_STS1\t\tBIT(6)\n\n#define PM800_STATUS_2\t\t\t(0x02)\n#define PM800_RTC_ALARM_STS2\t\tBIT(0)\n\n \n#define PM800_WAKEUP1\t\t\t(0x0D)\n\n#define PM800_WAKEUP2\t\t\t(0x0E)\n#define PM800_WAKEUP2_INV_INT\t\tBIT(0)\n#define PM800_WAKEUP2_INT_CLEAR\t\tBIT(1)\n#define PM800_WAKEUP2_INT_MASK\t\tBIT(2)\n\n#define PM800_POWER_UP_LOG\t\t(0x10)\n\n \n#define PM800_LOW_POWER1\t\t(0x20)\n#define PM800_LOW_POWER2\t\t(0x21)\n#define PM800_LOW_POWER_CONFIG3\t\t(0x22)\n#define PM800_LOW_POWER_CONFIG4\t\t(0x23)\n\n \n#define PM800_GPIO_0_1_CNTRL\t\t(0x30)\n#define PM800_GPIO0_VAL\t\t\tBIT(0)\n#define PM800_GPIO0_GPIO_MODE(x)\t(x << 1)\n#define PM800_GPIO1_VAL\t\t\tBIT(4)\n#define PM800_GPIO1_GPIO_MODE(x)\t(x << 5)\n\n#define PM800_GPIO_2_3_CNTRL\t\t(0x31)\n#define PM800_GPIO2_VAL\t\t\tBIT(0)\n#define PM800_GPIO2_GPIO_MODE(x)\t(x << 1)\n#define PM800_GPIO3_VAL\t\t\tBIT(4)\n#define PM800_GPIO3_GPIO_MODE(x)\t(x << 5)\n#define PM800_GPIO3_MODE_MASK\t\t0x1F\n#define PM800_GPIO3_HEADSET_MODE\tPM800_GPIO3_GPIO_MODE(6)\n\n#define PM800_GPIO_4_CNTRL\t\t(0x32)\n#define PM800_GPIO4_VAL\t\t\tBIT(0)\n#define PM800_GPIO4_GPIO_MODE(x)\t(x << 1)\n\n#define PM800_HEADSET_CNTRL\t\t(0x38)\n#define PM800_HEADSET_DET_EN\t\tBIT(7)\n#define PM800_HSDET_SLP\t\t\tBIT(1)\n \n#define PM800_PWM1\t\t\t(0x40)\n#define PM800_PWM2\t\t\t(0x41)\n#define PM800_PWM3\t\t\t(0x42)\n#define PM800_PWM4\t\t\t(0x43)\n\n \n#define PM800_RTC_CONTROL\t\t(0xD0)\n#define PM800_RTC_MISC1\t\t\t(0xE1)\n#define PM800_RTC_MISC2\t\t\t(0xE2)\n#define PM800_RTC_MISC3\t\t\t(0xE3)\n#define PM800_RTC_MISC4\t\t\t(0xE4)\n#define PM800_RTC_MISC5\t\t\t(0xE7)\n \n#define PM800_ALARM1_EN\t\t\tBIT(0)\n#define PM800_ALARM_WAKEUP\t\tBIT(4)\n#define PM800_ALARM\t\t\tBIT(5)\n#define PM800_RTC1_USE_XO\t\tBIT(7)\n\n \n\n \n#define PM800_SLEEP_BUCK1\t\t(0x30)\n\n \n#define PM800_BUCK_SLP1\t\t\t(0x5A)\n#define PM800_BUCK1_SLP1_SHIFT\t\t0\n#define PM800_BUCK1_SLP1_MASK\t\t(0x3 << PM800_BUCK1_SLP1_SHIFT)\n\n \n#define PM800_GPADC_MEAS_EN1\t\t(0x01)\n#define PM800_MEAS_EN1_VBAT\t\tBIT(2)\n#define PM800_GPADC_MEAS_EN2\t\t(0x02)\n#define PM800_MEAS_EN2_RFTMP\t\tBIT(0)\n#define PM800_MEAS_GP0_EN\t\tBIT(2)\n#define PM800_MEAS_GP1_EN\t\tBIT(3)\n#define PM800_MEAS_GP2_EN\t\tBIT(4)\n#define PM800_MEAS_GP3_EN\t\tBIT(5)\n#define PM800_MEAS_GP4_EN\t\tBIT(6)\n\n#define PM800_GPADC_MISC_CONFIG1\t(0x05)\n#define PM800_GPADC_MISC_CONFIG2\t(0x06)\n#define PM800_GPADC_MISC_GPFSM_EN\tBIT(0)\n#define PM800_GPADC_SLOW_MODE(x)\t(x << 3)\n\n#define PM800_GPADC_MISC_CONFIG3\t(0x09)\n#define PM800_GPADC_MISC_CONFIG4\t(0x0A)\n\n#define PM800_GPADC_PREBIAS1\t\t(0x0F)\n#define PM800_GPADC0_GP_PREBIAS_TIME(x)\t(x << 0)\n#define PM800_GPADC_PREBIAS2\t\t(0x10)\n\n#define PM800_GP_BIAS_ENA1\t\t(0x14)\n#define PM800_GPADC_GP_BIAS_EN0\t\tBIT(0)\n#define PM800_GPADC_GP_BIAS_EN1\t\tBIT(1)\n#define PM800_GPADC_GP_BIAS_EN2\t\tBIT(2)\n#define PM800_GPADC_GP_BIAS_EN3\t\tBIT(3)\n\n#define PM800_GP_BIAS_OUT1\t\t(0x15)\n#define PM800_BIAS_OUT_GP0\t\tBIT(0)\n#define PM800_BIAS_OUT_GP1\t\tBIT(1)\n#define PM800_BIAS_OUT_GP2\t\tBIT(2)\n#define PM800_BIAS_OUT_GP3\t\tBIT(3)\n\n#define PM800_GPADC0_LOW_TH\t\t0x20\n#define PM800_GPADC1_LOW_TH\t\t0x21\n#define PM800_GPADC2_LOW_TH\t\t0x22\n#define PM800_GPADC3_LOW_TH\t\t0x23\n#define PM800_GPADC4_LOW_TH\t\t0x24\n\n#define PM800_GPADC0_UPP_TH\t\t0x30\n#define PM800_GPADC1_UPP_TH\t\t0x31\n#define PM800_GPADC2_UPP_TH\t\t0x32\n#define PM800_GPADC3_UPP_TH\t\t0x33\n#define PM800_GPADC4_UPP_TH\t\t0x34\n\n#define PM800_VBBAT_MEAS1\t\t0x40\n#define PM800_VBBAT_MEAS2\t\t0x41\n#define PM800_VBAT_MEAS1\t\t0x42\n#define PM800_VBAT_MEAS2\t\t0x43\n#define PM800_VSYS_MEAS1\t\t0x44\n#define PM800_VSYS_MEAS2\t\t0x45\n#define PM800_VCHG_MEAS1\t\t0x46\n#define PM800_VCHG_MEAS2\t\t0x47\n#define PM800_TINT_MEAS1\t\t0x50\n#define PM800_TINT_MEAS2\t\t0x51\n#define PM800_PMOD_MEAS1\t\t0x52\n#define PM800_PMOD_MEAS2\t\t0x53\n\n#define PM800_GPADC0_MEAS1\t\t0x54\n#define PM800_GPADC0_MEAS2\t\t0x55\n#define PM800_GPADC1_MEAS1\t\t0x56\n#define PM800_GPADC1_MEAS2\t\t0x57\n#define PM800_GPADC2_MEAS1\t\t0x58\n#define PM800_GPADC2_MEAS2\t\t0x59\n#define PM800_GPADC3_MEAS1\t\t0x5A\n#define PM800_GPADC3_MEAS2\t\t0x5B\n#define PM800_GPADC4_MEAS1\t\t0x5C\n#define PM800_GPADC4_MEAS2\t\t0x5D\n\n#define PM800_GPADC4_AVG1\t\t0xA8\n#define PM800_GPADC4_AVG2\t\t0xA9\n\n \n#define PM805_MAIN_POWERUP\t\t(0x01)\n#define PM805_INT_STATUS0\t\t(0x02)\t \n\n#define PM805_STATUS0_INT_CLEAR\t\t(1 << 0)\n#define PM805_STATUS0_INV_INT\t\t(1 << 1)\n#define PM800_STATUS0_INT_MASK\t\t(1 << 2)\n\n#define PM805_INT_STATUS1\t\t(0x03)\n\n#define PM805_INT1_HP1_SHRT\t\tBIT(0)\n#define PM805_INT1_HP2_SHRT\t\tBIT(1)\n#define PM805_INT1_MIC_CONFLICT\t\tBIT(2)\n#define PM805_INT1_CLIP_FAULT\t\tBIT(3)\n#define PM805_INT1_LDO_OFF\t\tBIT(4)\n#define PM805_INT1_SRC_DPLL_LOCK\tBIT(5)\n\n#define PM805_INT_STATUS2\t\t(0x04)\n\n#define PM805_INT2_MIC_DET\t\tBIT(0)\n#define PM805_INT2_SHRT_BTN_DET\t\tBIT(1)\n#define PM805_INT2_VOLM_BTN_DET\t\tBIT(2)\n#define PM805_INT2_VOLP_BTN_DET\t\tBIT(3)\n#define PM805_INT2_RAW_PLL_FAULT\tBIT(4)\n#define PM805_INT2_FINE_PLL_FAULT\tBIT(5)\n\n#define PM805_INT_MASK1\t\t\t(0x05)\n#define PM805_INT_MASK2\t\t\t(0x06)\n#define PM805_SHRT_BTN_DET\t\tBIT(1)\n\n \n#define PM805_INT_REG_NUM\t\t(2)\n\n#define PM805_MIC_DET1\t\t\t(0x07)\n#define PM805_MIC_DET_EN_MIC_DET\tBIT(0)\n#define PM805_MIC_DET2\t\t\t(0x08)\n#define PM805_MIC_DET_STATUS1\t\t(0x09)\n\n#define PM805_MIC_DET_STATUS3\t\t(0x0A)\n#define PM805_AUTO_SEQ_STATUS1\t\t(0x0B)\n#define PM805_AUTO_SEQ_STATUS2\t\t(0x0C)\n\n#define PM805_ADC_SETTING1\t\t(0x10)\n#define PM805_ADC_SETTING2\t\t(0x11)\n#define PM805_ADC_SETTING3\t\t(0x11)\n#define PM805_ADC_GAIN1\t\t\t(0x12)\n#define PM805_ADC_GAIN2\t\t\t(0x13)\n#define PM805_DMIC_SETTING\t\t(0x15)\n#define PM805_DWS_SETTING\t\t(0x16)\n#define PM805_MIC_CONFLICT_STS\t\t(0x17)\n\n#define PM805_PDM_SETTING1\t\t(0x20)\n#define PM805_PDM_SETTING2\t\t(0x21)\n#define PM805_PDM_SETTING3\t\t(0x22)\n#define PM805_PDM_CONTROL1\t\t(0x23)\n#define PM805_PDM_CONTROL2\t\t(0x24)\n#define PM805_PDM_CONTROL3\t\t(0x25)\n\n#define PM805_HEADPHONE_SETTING\t\t(0x26)\n#define PM805_HEADPHONE_GAIN_A2A\t(0x27)\n#define PM805_HEADPHONE_SHORT_STATE\t(0x28)\n#define PM805_EARPHONE_SETTING\t\t(0x29)\n#define PM805_AUTO_SEQ_SETTING\t\t(0x2A)\n\nstruct pm80x_rtc_pdata {\n\tint\t\tvrtc;\n\tint\t\trtc_wakeup;\n};\n\nstruct pm80x_subchip {\n\tstruct i2c_client *power_page;\t \n\tstruct i2c_client *gpadc_page;\t \n\tstruct regmap *regmap_power;\n\tstruct regmap *regmap_gpadc;\n\tunsigned short power_page_addr;\t \n\tunsigned short gpadc_page_addr;\t \n};\n\nstruct pm80x_chip {\n\tstruct pm80x_subchip *subchip;\n\tstruct device *dev;\n\tstruct i2c_client *client;\n\tstruct i2c_client *companion;\n\tstruct regmap *regmap;\n\tstruct regmap_irq_chip *regmap_irq_chip;\n\tstruct regmap_irq_chip_data *irq_data;\n\tint type;\n\tint irq;\n\tint irq_mode;\n\tunsigned long wu_flag;\n\tspinlock_t lock;\n};\n\nstruct pm80x_platform_data {\n\tstruct pm80x_rtc_pdata *rtc;\n\t \n\tstruct regulator_init_data *regulators[PM800_ID_RG_MAX];\n\tunsigned int num_regulators;\n\tint irq_mode;\t\t \n\tint batt_det;\t\t \n\tint (*plat_config)(struct pm80x_chip *chip,\n\t\t\t\tstruct pm80x_platform_data *pdata);\n};\n\nextern const struct dev_pm_ops pm80x_pm_ops;\nextern const struct regmap_config pm80x_regmap_config;\n\nstatic inline int pm80x_request_irq(struct pm80x_chip *pm80x, int irq,\n\t\t\t\t     irq_handler_t handler, unsigned long flags,\n\t\t\t\t     const char *name, void *data)\n{\n\tif (!pm80x->irq_data)\n\t\treturn -EINVAL;\n\treturn request_threaded_irq(regmap_irq_get_virq(pm80x->irq_data, irq),\n\t\t\t\t    NULL, handler, flags, name, data);\n}\n\nstatic inline void pm80x_free_irq(struct pm80x_chip *pm80x, int irq, void *data)\n{\n\tif (!pm80x->irq_data)\n\t\treturn;\n\tfree_irq(regmap_irq_get_virq(pm80x->irq_data, irq), data);\n}\n\n#ifdef CONFIG_PM\nstatic inline int pm80x_dev_suspend(struct device *dev)\n{\n\tstruct platform_device *pdev = to_platform_device(dev);\n\tstruct pm80x_chip *chip = dev_get_drvdata(pdev->dev.parent);\n\tint irq = platform_get_irq(pdev, 0);\n\n\tif (device_may_wakeup(dev))\n\t\tset_bit(irq, &chip->wu_flag);\n\n\treturn 0;\n}\n\nstatic inline int pm80x_dev_resume(struct device *dev)\n{\n\tstruct platform_device *pdev = to_platform_device(dev);\n\tstruct pm80x_chip *chip = dev_get_drvdata(pdev->dev.parent);\n\tint irq = platform_get_irq(pdev, 0);\n\n\tif (device_may_wakeup(dev))\n\t\tclear_bit(irq, &chip->wu_flag);\n\n\treturn 0;\n}\n#endif\n\nextern int pm80x_init(struct i2c_client *client);\nextern int pm80x_deinit(void);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}