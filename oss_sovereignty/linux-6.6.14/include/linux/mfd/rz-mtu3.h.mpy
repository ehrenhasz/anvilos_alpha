{
  "module_name": "rz-mtu3.h",
  "hash_id": "13ff0593141eee9419e0d382cd35da6acdec87e1659131338d9234bf029a08eb",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mfd/rz-mtu3.h",
  "human_readable_source": " \n \n#ifndef __MFD_RZ_MTU3_H__\n#define __MFD_RZ_MTU3_H__\n\n#include <linux/clk.h>\n#include <linux/device.h>\n#include <linux/mutex.h>\n\n \n#define RZ_MTU3_TSTRA\t0x080  \n#define RZ_MTU3_TSTRB\t0x880  \n\n \n#define RZ_MTU3_TDDRA\t0x016  \n#define RZ_MTU3_TDDRB\t0x816  \n#define RZ_MTU3_TCDRA\t0x014  \n#define RZ_MTU3_TCDRB\t0x814  \n#define RZ_MTU3_TCBRA\t0x022  \n#define RZ_MTU3_TCBRB\t0x822  \n#define RZ_MTU3_TCNTSA\t0x020  \n#define RZ_MTU3_TCNTSB\t0x820  \n\n \n\n \n#define RZ_MTU3_TIER\t0  \n#define RZ_MTU3_NFCR\t1  \n#define RZ_MTU3_TSR\t2  \n#define RZ_MTU3_TCR\t3  \n#define RZ_MTU3_TCR2\t4  \n\n \n#define RZ_MTU3_TMDR1\t5\n#define RZ_MTU3_TMDR1_MD\t\tGENMASK(3, 0)\n#define RZ_MTU3_TMDR1_MD_NORMAL\t\tFIELD_PREP(RZ_MTU3_TMDR1_MD, 0)\n#define RZ_MTU3_TMDR1_MD_PWMMODE1\tFIELD_PREP(RZ_MTU3_TMDR1_MD, 2)\n\n#define RZ_MTU3_TIOR\t6  \n#define RZ_MTU3_TIORH\t6  \n#define RZ_MTU3_TIORL\t7  \n \n#define RZ_MTU3_TBTM\t8  \n\n \n#define RZ_MTU3_TSTR\t\t2  \n#define RZ_MTU3_TCNTCMPCLR\t3  \n#define RZ_MTU3_TCRU\t\t4  \n#define RZ_MTU3_TCR2U\t\t5  \n#define RZ_MTU3_TIORU\t\t6  \n#define RZ_MTU3_TCRV\t\t7  \n#define RZ_MTU3_TCR2V\t\t8  \n#define RZ_MTU3_TIORV\t\t9  \n#define RZ_MTU3_TCRW\t\t10  \n#define RZ_MTU3_TCR2W\t\t11  \n#define RZ_MTU3_TIORW\t\t12  \n\n \n#define RZ_MTU3_TCNT\t\t0  \n#define RZ_MTU3_TGRA\t\t1  \n#define RZ_MTU3_TGRB\t\t2  \n#define RZ_MTU3_TGRC\t\t3  \n#define RZ_MTU3_TGRD\t\t4  \n#define RZ_MTU3_TGRE\t\t5  \n#define RZ_MTU3_TGRF\t\t6  \n \n#define RZ_MTU3_TADCR\t\t7  \n#define RZ_MTU3_TADCORA\t\t8  \n#define RZ_MTU3_TADCORB\t\t9  \n#define RZ_MTU3_TADCOBRA\t10  \n#define RZ_MTU3_TADCOBRB\t11  \n\n \n#define RZ_MTU3_TCNTU\t\t0  \n#define RZ_MTU3_TGRU\t\t1  \n#define RZ_MTU3_TCNTV\t\t2  \n#define RZ_MTU3_TGRV\t\t3  \n#define RZ_MTU3_TCNTW\t\t4  \n#define RZ_MTU3_TGRW\t\t5  \n\n \n#define RZ_MTU3_TCNTLW\t\t0  \n#define RZ_MTU3_TGRALW\t\t1  \n#define RZ_MTU3_TGRBLW\t\t2  \n\n#define RZ_MTU3_TMDR3\t\t0x191  \n\n \n#define RZ_MTU3_TCR_CCLR\tGENMASK(7, 5)\n#define RZ_MTU3_TCR_CKEG\tGENMASK(4, 3)\n#define RZ_MTU3_TCR_TPCS\tGENMASK(2, 0)\n#define RZ_MTU3_TCR_CCLR_TGRA\tBIT(5)\n#define RZ_MTU3_TCR_CCLR_TGRC\tFIELD_PREP(RZ_MTU3_TCR_CCLR, 5)\n#define RZ_MTU3_TCR_CKEG_RISING\tFIELD_PREP(RZ_MTU3_TCR_CKEG, 0)\n\n#define RZ_MTU3_TIOR_IOB\t\t\tGENMASK(7, 4)\n#define RZ_MTU3_TIOR_IOA\t\t\tGENMASK(3, 0)\n#define RZ_MTU3_TIOR_OC_RETAIN\t\t\t0\n#define RZ_MTU3_TIOR_OC_INIT_OUT_LO_HI_OUT\t2\n#define RZ_MTU3_TIOR_OC_INIT_OUT_HI_TOGGLE_OUT\t7\n\n#define RZ_MTU3_TIOR_OC_IOA_H_COMP_MATCH \\\n\tFIELD_PREP(RZ_MTU3_TIOR_IOA, RZ_MTU3_TIOR_OC_INIT_OUT_LO_HI_OUT)\n#define RZ_MTU3_TIOR_OC_IOB_TOGGLE \\\n\tFIELD_PREP(RZ_MTU3_TIOR_IOB, RZ_MTU3_TIOR_OC_INIT_OUT_HI_TOGGLE_OUT)\n\nenum rz_mtu3_channels {\n\tRZ_MTU3_CHAN_0,\n\tRZ_MTU3_CHAN_1,\n\tRZ_MTU3_CHAN_2,\n\tRZ_MTU3_CHAN_3,\n\tRZ_MTU3_CHAN_4,\n\tRZ_MTU3_CHAN_5,\n\tRZ_MTU3_CHAN_6,\n\tRZ_MTU3_CHAN_7,\n\tRZ_MTU3_CHAN_8,\n\tRZ_MTU_NUM_CHANNELS\n};\n\n \nstruct rz_mtu3_channel {\n\tstruct device *dev;\n\tunsigned int channel_number;\n\tstruct mutex lock;\n\tbool is_busy;\n};\n\n \nstruct rz_mtu3 {\n\tstruct clk *clk;\n\tstruct rz_mtu3_channel channels[RZ_MTU_NUM_CHANNELS];\n\n\tvoid *priv_data;\n};\n\nstatic inline bool rz_mtu3_request_channel(struct rz_mtu3_channel *ch)\n{\n\tmutex_lock(&ch->lock);\n\tif (ch->is_busy) {\n\t\tmutex_unlock(&ch->lock);\n\t\treturn false;\n\t}\n\n\tch->is_busy = true;\n\tmutex_unlock(&ch->lock);\n\n\treturn true;\n}\n\nstatic inline void rz_mtu3_release_channel(struct rz_mtu3_channel *ch)\n{\n\tmutex_lock(&ch->lock);\n\tch->is_busy = false;\n\tmutex_unlock(&ch->lock);\n}\n\nbool rz_mtu3_is_enabled(struct rz_mtu3_channel *ch);\nvoid rz_mtu3_disable(struct rz_mtu3_channel *ch);\nint rz_mtu3_enable(struct rz_mtu3_channel *ch);\n\nu8 rz_mtu3_8bit_ch_read(struct rz_mtu3_channel *ch, u16 off);\nu16 rz_mtu3_16bit_ch_read(struct rz_mtu3_channel *ch, u16 off);\nu32 rz_mtu3_32bit_ch_read(struct rz_mtu3_channel *ch, u16 off);\nu16 rz_mtu3_shared_reg_read(struct rz_mtu3_channel *ch, u16 off);\n\nvoid rz_mtu3_8bit_ch_write(struct rz_mtu3_channel *ch, u16 off, u8 val);\nvoid rz_mtu3_16bit_ch_write(struct rz_mtu3_channel *ch, u16 off, u16 val);\nvoid rz_mtu3_32bit_ch_write(struct rz_mtu3_channel *ch, u16 off, u32 val);\nvoid rz_mtu3_shared_reg_write(struct rz_mtu3_channel *ch, u16 off, u16 val);\nvoid rz_mtu3_shared_reg_update_bit(struct rz_mtu3_channel *ch, u16 off,\n\t\t\t\t   u16 pos, u8 val);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}