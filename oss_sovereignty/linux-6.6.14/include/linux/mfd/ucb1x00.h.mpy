{
  "module_name": "ucb1x00.h",
  "hash_id": "df1319b993d0950de98cb34c98253e442048299417b3b359bc0e056fa3670eeb",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mfd/ucb1x00.h",
  "human_readable_source": " \n \n#ifndef UCB1200_H\n#define UCB1200_H\n\n#include <linux/device.h>\n#include <linux/mfd/mcp.h>\n#include <linux/gpio.h>\n#include <linux/gpio/driver.h>\n#include <linux/mutex.h>\n\n#define UCB_IO_DATA\t0x00\n#define UCB_IO_DIR\t0x01\n\n#define UCB_IO_0\t\t(1 << 0)\n#define UCB_IO_1\t\t(1 << 1)\n#define UCB_IO_2\t\t(1 << 2)\n#define UCB_IO_3\t\t(1 << 3)\n#define UCB_IO_4\t\t(1 << 4)\n#define UCB_IO_5\t\t(1 << 5)\n#define UCB_IO_6\t\t(1 << 6)\n#define UCB_IO_7\t\t(1 << 7)\n#define UCB_IO_8\t\t(1 << 8)\n#define UCB_IO_9\t\t(1 << 9)\n\n#define UCB_IE_RIS\t0x02\n#define UCB_IE_FAL\t0x03\n#define UCB_IE_STATUS\t0x04\n#define UCB_IE_CLEAR\t0x04\n#define UCB_IE_ADC\t\t(1 << 11)\n#define UCB_IE_TSPX\t\t(1 << 12)\n#define UCB_IE_TSMX\t\t(1 << 13)\n#define UCB_IE_TCLIP\t\t(1 << 14)\n#define UCB_IE_ACLIP\t\t(1 << 15)\n\n#define UCB_IRQ_TSPX\t\t12\n\n#define UCB_TC_A\t0x05\n#define UCB_TC_A_LOOP\t\t(1 << 7)\t \n#define UCB_TC_A_AMPL\t\t(1 << 7)\t \n\n#define UCB_TC_B\t0x06\n#define UCB_TC_B_VOICE_ENA\t(1 << 3)\n#define UCB_TC_B_CLIP\t\t(1 << 4)\n#define UCB_TC_B_ATT\t\t(1 << 6)\n#define UCB_TC_B_SIDE_ENA\t(1 << 11)\n#define UCB_TC_B_MUTE\t\t(1 << 13)\n#define UCB_TC_B_IN_ENA\t\t(1 << 14)\n#define UCB_TC_B_OUT_ENA\t(1 << 15)\n\n#define UCB_AC_A\t0x07\n#define UCB_AC_B\t0x08\n#define UCB_AC_B_LOOP\t\t(1 << 8)\n#define UCB_AC_B_MUTE\t\t(1 << 13)\n#define UCB_AC_B_IN_ENA\t\t(1 << 14)\n#define UCB_AC_B_OUT_ENA\t(1 << 15)\n\n#define UCB_TS_CR\t0x09\n#define UCB_TS_CR_TSMX_POW\t(1 << 0)\n#define UCB_TS_CR_TSPX_POW\t(1 << 1)\n#define UCB_TS_CR_TSMY_POW\t(1 << 2)\n#define UCB_TS_CR_TSPY_POW\t(1 << 3)\n#define UCB_TS_CR_TSMX_GND\t(1 << 4)\n#define UCB_TS_CR_TSPX_GND\t(1 << 5)\n#define UCB_TS_CR_TSMY_GND\t(1 << 6)\n#define UCB_TS_CR_TSPY_GND\t(1 << 7)\n#define UCB_TS_CR_MODE_INT\t(0 << 8)\n#define UCB_TS_CR_MODE_PRES\t(1 << 8)\n#define UCB_TS_CR_MODE_POS\t(2 << 8)\n#define UCB_TS_CR_BIAS_ENA\t(1 << 11)\n#define UCB_TS_CR_TSPX_LOW\t(1 << 12)\n#define UCB_TS_CR_TSMX_LOW\t(1 << 13)\n\n#define UCB_ADC_CR\t0x0a\n#define UCB_ADC_SYNC_ENA\t(1 << 0)\n#define UCB_ADC_VREFBYP_CON\t(1 << 1)\n#define UCB_ADC_INP_TSPX\t(0 << 2)\n#define UCB_ADC_INP_TSMX\t(1 << 2)\n#define UCB_ADC_INP_TSPY\t(2 << 2)\n#define UCB_ADC_INP_TSMY\t(3 << 2)\n#define UCB_ADC_INP_AD0\t\t(4 << 2)\n#define UCB_ADC_INP_AD1\t\t(5 << 2)\n#define UCB_ADC_INP_AD2\t\t(6 << 2)\n#define UCB_ADC_INP_AD3\t\t(7 << 2)\n#define UCB_ADC_EXT_REF\t\t(1 << 5)\n#define UCB_ADC_START\t\t(1 << 7)\n#define UCB_ADC_ENA\t\t(1 << 15)\n\n#define UCB_ADC_DATA\t0x0b\n#define UCB_ADC_DAT_VAL\t\t(1 << 15)\n#define UCB_ADC_DAT(x)\t\t(((x) & 0x7fe0) >> 5)\n\n#define UCB_ID\t\t0x0c\n#define UCB_ID_1200\t\t0x1004\n#define UCB_ID_1300\t\t0x1005\n#define UCB_ID_TC35143          0x9712\n\n#define UCB_MODE\t0x0d\n#define UCB_MODE_DYN_VFLAG_ENA\t(1 << 12)\n#define UCB_MODE_AUD_OFF_CAN\t(1 << 13)\n\nenum ucb1x00_reset {\n\tUCB_RST_PROBE,\n\tUCB_RST_RESUME,\n\tUCB_RST_SUSPEND,\n\tUCB_RST_REMOVE,\n\tUCB_RST_PROBE_FAIL,\n};\n\nstruct ucb1x00_plat_data {\n\tvoid\t\t\t(*reset)(enum ucb1x00_reset);\n\tunsigned\t\tirq_base;\n\tint\t\t\tgpio_base;\n\tunsigned\t\tcan_wakeup;\n};\n\nstruct ucb1x00 {\n\traw_spinlock_t\t\tirq_lock;\n\tstruct mcp\t\t*mcp;\n\tunsigned int\t\tirq;\n\tint\t\t\tirq_base;\n\tstruct mutex\t\tadc_mutex;\n\tspinlock_t\t\tio_lock;\n\tu16\t\t\tid;\n\tu16\t\t\tio_dir;\n\tu16\t\t\tio_out;\n\tu16\t\t\tadc_cr;\n\tu16\t\t\tirq_fal_enbl;\n\tu16\t\t\tirq_ris_enbl;\n\tu16\t\t\tirq_mask;\n\tu16\t\t\tirq_wake;\n\tstruct device\t\tdev;\n\tstruct list_head\tnode;\n\tstruct list_head\tdevs;\n\tstruct gpio_chip \tgpio;\n};\n\nstruct ucb1x00_driver;\n\nstruct ucb1x00_dev {\n\tstruct list_head\tdev_node;\n\tstruct list_head\tdrv_node;\n\tstruct ucb1x00\t\t*ucb;\n\tstruct ucb1x00_driver\t*drv;\n\tvoid\t\t\t*priv;\n};\n\nstruct ucb1x00_driver {\n\tstruct list_head\tnode;\n\tstruct list_head\tdevs;\n\tint\t(*add)(struct ucb1x00_dev *dev);\n\tvoid\t(*remove)(struct ucb1x00_dev *dev);\n\tint\t(*suspend)(struct ucb1x00_dev *dev);\n\tint\t(*resume)(struct ucb1x00_dev *dev);\n};\n\n#define classdev_to_ucb1x00(cd)\tcontainer_of(cd, struct ucb1x00, dev)\n\nint ucb1x00_register_driver(struct ucb1x00_driver *);\nvoid ucb1x00_unregister_driver(struct ucb1x00_driver *);\n\n \nstatic inline unsigned int ucb1x00_clkrate(struct ucb1x00 *ucb)\n{\n\treturn mcp_get_sclk_rate(ucb->mcp);\n}\n\n \nstatic inline void ucb1x00_enable(struct ucb1x00 *ucb)\n{\n\tmcp_enable(ucb->mcp);\n}\n\n \nstatic inline void ucb1x00_disable(struct ucb1x00 *ucb)\n{\n\tmcp_disable(ucb->mcp);\n}\n\n \nstatic inline void ucb1x00_reg_write(struct ucb1x00 *ucb, unsigned int reg, unsigned int val)\n{\n\tmcp_reg_write(ucb->mcp, reg, val);\n}\n\n \nstatic inline unsigned int ucb1x00_reg_read(struct ucb1x00 *ucb, unsigned int reg)\n{\n\treturn mcp_reg_read(ucb->mcp, reg);\n}\n \nstatic inline void ucb1x00_set_audio_divisor(struct ucb1x00 *ucb, unsigned int div)\n{\n\tmcp_set_audio_divisor(ucb->mcp, div);\n}\n\n \nstatic inline void ucb1x00_set_telecom_divisor(struct ucb1x00 *ucb, unsigned int div)\n{\n\tmcp_set_telecom_divisor(ucb->mcp, div);\n}\n\nvoid ucb1x00_io_set_dir(struct ucb1x00 *ucb, unsigned int, unsigned int);\nvoid ucb1x00_io_write(struct ucb1x00 *ucb, unsigned int, unsigned int);\nunsigned int ucb1x00_io_read(struct ucb1x00 *ucb);\n\n#define UCB_NOSYNC\t(0)\n#define UCB_SYNC\t(1)\n\nunsigned int ucb1x00_adc_read(struct ucb1x00 *ucb, int adc_channel, int sync);\nvoid ucb1x00_adc_enable(struct ucb1x00 *ucb);\nvoid ucb1x00_adc_disable(struct ucb1x00 *ucb);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}