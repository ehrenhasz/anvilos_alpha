{
  "module_name": "stm32-timers.h",
  "hash_id": "412d0554231285b923914b1fd721a8d74bd670e62a46f801c046466d8b9d8a1e",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mfd/stm32-timers.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_STM32_GPTIMER_H_\n#define _LINUX_STM32_GPTIMER_H_\n\n#include <linux/clk.h>\n#include <linux/dmaengine.h>\n#include <linux/dma-mapping.h>\n#include <linux/regmap.h>\n\n#define TIM_CR1\t\t0x00\t \n#define TIM_CR2\t\t0x04\t \n#define TIM_SMCR\t0x08\t \n#define TIM_DIER\t0x0C\t \n#define TIM_SR\t\t0x10\t \n#define TIM_EGR\t\t0x14\t \n#define TIM_CCMR1\t0x18\t \n#define TIM_CCMR2\t0x1C\t \n#define TIM_CCER\t0x20\t \n#define TIM_CNT\t\t0x24\t \n#define TIM_PSC\t\t0x28\t \n#define TIM_ARR\t\t0x2c\t \n#define TIM_CCR1\t0x34\t \n#define TIM_CCR2\t0x38\t \n#define TIM_CCR3\t0x3C\t \n#define TIM_CCR4\t0x40\t \n#define TIM_BDTR\t0x44\t \n#define TIM_DCR\t\t0x48\t \n#define TIM_DMAR\t0x4C\t \n#define TIM_TISEL\t0x68\t \n\n#define TIM_CR1_CEN\tBIT(0)\t \n#define TIM_CR1_DIR\tBIT(4)   \n#define TIM_CR1_ARPE\tBIT(7)\t \n#define TIM_CR2_MMS\t(BIT(4) | BIT(5) | BIT(6))  \n#define TIM_CR2_MMS2\tGENMASK(23, 20)  \n#define TIM_SMCR_SMS\t(BIT(0) | BIT(1) | BIT(2))  \n#define TIM_SMCR_TS\t(BIT(4) | BIT(5) | BIT(6))  \n#define TIM_DIER_UIE\tBIT(0)\t \n#define TIM_DIER_UDE\tBIT(8)   \n#define TIM_DIER_CC1DE\tBIT(9)   \n#define TIM_DIER_CC2DE\tBIT(10)  \n#define TIM_DIER_CC3DE\tBIT(11)  \n#define TIM_DIER_CC4DE\tBIT(12)  \n#define TIM_DIER_COMDE\tBIT(13)  \n#define TIM_DIER_TDE\tBIT(14)  \n#define TIM_SR_UIF\tBIT(0)\t \n#define TIM_EGR_UG\tBIT(0)\t \n#define TIM_CCMR_PE\tBIT(3)\t \n#define TIM_CCMR_M1\t(BIT(6) | BIT(5))   \n#define TIM_CCMR_CC1S\t\t(BIT(0) | BIT(1))  \n#define TIM_CCMR_IC1PSC\t\tGENMASK(3, 2)\t \n#define TIM_CCMR_CC2S\t\t(BIT(8) | BIT(9))  \n#define TIM_CCMR_IC2PSC\t\tGENMASK(11, 10)\t \n#define TIM_CCMR_CC1S_TI1\tBIT(0)\t \n#define TIM_CCMR_CC1S_TI2\tBIT(1)\t \n#define TIM_CCMR_CC2S_TI2\tBIT(8)\t \n#define TIM_CCMR_CC2S_TI1\tBIT(9)\t \n#define TIM_CCER_CC1E\tBIT(0)\t \n#define TIM_CCER_CC1P\tBIT(1)\t \n#define TIM_CCER_CC1NE\tBIT(2)\t \n#define TIM_CCER_CC1NP\tBIT(3)\t \n#define TIM_CCER_CC2E\tBIT(4)\t \n#define TIM_CCER_CC2P\tBIT(5)\t \n#define TIM_CCER_CC3E\tBIT(8)\t \n#define TIM_CCER_CC3P\tBIT(9)\t \n#define TIM_CCER_CC4E\tBIT(12)\t \n#define TIM_CCER_CC4P\tBIT(13)\t \n#define TIM_CCER_CCXE\t(BIT(0) | BIT(4) | BIT(8) | BIT(12))\n#define TIM_BDTR_BKE(x)\tBIT(12 + (x) * 12)  \n#define TIM_BDTR_BKP(x)\tBIT(13 + (x) * 12)  \n#define TIM_BDTR_AOE\tBIT(14)\t \n#define TIM_BDTR_MOE\tBIT(15)\t \n#define TIM_BDTR_BKF(x)\t(0xf << (16 + (x) * 4))\n#define TIM_DCR_DBA\tGENMASK(4, 0)\t \n#define TIM_DCR_DBL\tGENMASK(12, 8)\t \n\n#define MAX_TIM_PSC\t\t0xFFFF\n#define MAX_TIM_ICPSC\t\t0x3\n#define TIM_CR2_MMS_SHIFT\t4\n#define TIM_CR2_MMS2_SHIFT\t20\n#define TIM_SMCR_SMS_SLAVE_MODE_DISABLED\t0  \n#define TIM_SMCR_SMS_ENCODER_MODE_1\t\t1  \n#define TIM_SMCR_SMS_ENCODER_MODE_2\t\t2  \n#define TIM_SMCR_SMS_ENCODER_MODE_3\t\t3  \n#define TIM_SMCR_TS_SHIFT\t4\n#define TIM_BDTR_BKF_MASK\t0xF\n#define TIM_BDTR_BKF_SHIFT(x)\t(16 + (x) * 4)\n\nenum stm32_timers_dmas {\n\tSTM32_TIMERS_DMA_CH1,\n\tSTM32_TIMERS_DMA_CH2,\n\tSTM32_TIMERS_DMA_CH3,\n\tSTM32_TIMERS_DMA_CH4,\n\tSTM32_TIMERS_DMA_UP,\n\tSTM32_TIMERS_DMA_TRIG,\n\tSTM32_TIMERS_DMA_COM,\n\tSTM32_TIMERS_MAX_DMAS,\n};\n\n \nstruct stm32_timers_dma {\n\tstruct completion completion;\n\tphys_addr_t phys_base;\n\tstruct mutex lock;\n\tstruct dma_chan *chan;\n\tstruct dma_chan *chans[STM32_TIMERS_MAX_DMAS];\n};\n\nstruct stm32_timers {\n\tstruct clk *clk;\n\tstruct regmap *regmap;\n\tu32 max_arr;\n\tstruct stm32_timers_dma dma;  \n};\n\n#if IS_REACHABLE(CONFIG_MFD_STM32_TIMERS)\nint stm32_timers_dma_burst_read(struct device *dev, u32 *buf,\n\t\t\t\tenum stm32_timers_dmas id, u32 reg,\n\t\t\t\tunsigned int num_reg, unsigned int bursts,\n\t\t\t\tunsigned long tmo_ms);\n#else\nstatic inline int stm32_timers_dma_burst_read(struct device *dev, u32 *buf,\n\t\t\t\t\t      enum stm32_timers_dmas id,\n\t\t\t\t\t      u32 reg,\n\t\t\t\t\t      unsigned int num_reg,\n\t\t\t\t\t      unsigned int bursts,\n\t\t\t\t\t      unsigned long tmo_ms)\n{\n\treturn -ENODEV;\n}\n#endif\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}