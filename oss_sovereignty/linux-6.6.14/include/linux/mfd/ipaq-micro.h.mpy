{
  "module_name": "ipaq-micro.h",
  "hash_id": "e0d4ad32cf3c6f07f139163d7d8b1962292e3a1c33b8858b813e5a8a7742de40",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mfd/ipaq-micro.h",
  "human_readable_source": " \n \n\n#ifndef _MFD_IPAQ_MICRO_H_\n#define _MFD_IPAQ_MICRO_H_\n\n#include <linux/spinlock.h>\n#include <linux/completion.h>\n#include <linux/list.h>\n\n#define TX_BUF_SIZE\t32\n#define RX_BUF_SIZE\t16\n#define CHAR_SOF\t0x02\n\n \n#define MSG_VERSION\t\t0x0\n#define MSG_KEYBOARD\t\t0x2\n#define MSG_TOUCHSCREEN\t\t0x3\n#define MSG_EEPROM_READ\t\t0x4\n#define MSG_EEPROM_WRITE\t0x5\n#define MSG_THERMAL_SENSOR\t0x6\n#define MSG_NOTIFY_LED\t\t0x8\n#define MSG_BATTERY\t\t0x9\n#define MSG_SPI_READ\t\t0xb\n#define MSG_SPI_WRITE\t\t0xc\n#define MSG_BACKLIGHT\t\t0xd  \n#define MSG_CODEC_CTRL\t\t0xe  \n#define MSG_DISPLAY_CTRL\t0xf  \n\n \nenum rx_state {\n\tSTATE_SOF = 0,      \n\tSTATE_ID,           \n\tSTATE_DATA,         \n\tSTATE_CHKSUM        \n};\n\n \nstruct ipaq_micro_txdev {\n\tu8 len;\n\tu8 index;\n\tu8 buf[TX_BUF_SIZE];\n};\n\n \nstruct ipaq_micro_rxdev {\n\tenum rx_state state;\n\tunsigned char chksum;\n\tu8            id;\n\tunsigned int  len;\n\tunsigned int  index;\n\tu8            buf[RX_BUF_SIZE];\n};\n\n \nstruct ipaq_micro_msg {\n\tu8 id;\n\tu8 tx_len;\n\tu8 tx_data[TX_BUF_SIZE];\n\tu8 rx_len;\n\tu8 rx_data[RX_BUF_SIZE];\n\tstruct completion ack;\n\tstruct list_head node;\n};\n\n \nstruct ipaq_micro {\n\tstruct device *dev;\n\tvoid __iomem *base;\n\tvoid __iomem *sdlc;\n\tchar version[5];\n\tstruct ipaq_micro_txdev tx;\t \n\tstruct ipaq_micro_rxdev rx;\t \n\tspinlock_t lock;\n\tstruct ipaq_micro_msg *msg;\n\tstruct list_head queue;\n\tvoid (*key) (void *data, int len, unsigned char *rxdata);\n\tvoid *key_data;\n\tvoid (*ts) (void *data, int len, unsigned char *rxdata);\n\tvoid *ts_data;\n};\n\nextern int\nipaq_micro_tx_msg(struct ipaq_micro *micro, struct ipaq_micro_msg *msg);\n\nstatic inline int\nipaq_micro_tx_msg_sync(struct ipaq_micro *micro,\n\t\t       struct ipaq_micro_msg *msg)\n{\n\tint ret;\n\n\tinit_completion(&msg->ack);\n\tret = ipaq_micro_tx_msg(micro, msg);\n\twait_for_completion(&msg->ack);\n\n\treturn ret;\n}\n\nstatic inline int\nipaq_micro_tx_msg_async(struct ipaq_micro *micro,\n\t\t\tstruct ipaq_micro_msg *msg)\n{\n\tinit_completion(&msg->ack);\n\treturn ipaq_micro_tx_msg(micro, msg);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}