{
  "module_name": "thermal.h",
  "hash_id": "91667956a93608662e4cac34936929e57eebb49a41840b8a7ca09416fae5b54f",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/thermal.h",
  "human_readable_source": " \n \n\n#ifndef __THERMAL_H__\n#define __THERMAL_H__\n\n#include <linux/of.h>\n#include <linux/idr.h>\n#include <linux/device.h>\n#include <linux/sysfs.h>\n#include <linux/workqueue.h>\n#include <uapi/linux/thermal.h>\n\n \n#define THERMAL_CSTATE_INVALID -1UL\n\n \n#define THERMAL_NO_LIMIT\t((u32)~0)\n\n \n#define THERMAL_WEIGHT_DEFAULT 0\n\n \n#define THERMAL_TEMP_INVALID\t-274000\n\nstruct thermal_zone_device;\nstruct thermal_cooling_device;\nstruct thermal_instance;\nstruct thermal_attr;\n\nenum thermal_trend {\n\tTHERMAL_TREND_STABLE,  \n\tTHERMAL_TREND_RAISING,  \n\tTHERMAL_TREND_DROPPING,  \n};\n\n \nenum thermal_notify_event {\n\tTHERMAL_EVENT_UNSPECIFIED,  \n\tTHERMAL_EVENT_TEMP_SAMPLE,  \n\tTHERMAL_TRIP_VIOLATED,  \n\tTHERMAL_TRIP_CHANGED,  \n\tTHERMAL_DEVICE_DOWN,  \n\tTHERMAL_DEVICE_UP,  \n\tTHERMAL_DEVICE_POWER_CAPABILITY_CHANGED,  \n\tTHERMAL_TABLE_CHANGED,  \n\tTHERMAL_EVENT_KEEP_ALIVE,  \n};\n\n \nstruct thermal_trip {\n\tint temperature;\n\tint hysteresis;\n\tenum thermal_trip_type type;\n\tvoid *priv;\n};\n\nstruct thermal_zone_device_ops {\n\tint (*bind) (struct thermal_zone_device *,\n\t\t     struct thermal_cooling_device *);\n\tint (*unbind) (struct thermal_zone_device *,\n\t\t       struct thermal_cooling_device *);\n\tint (*get_temp) (struct thermal_zone_device *, int *);\n\tint (*set_trips) (struct thermal_zone_device *, int, int);\n\tint (*change_mode) (struct thermal_zone_device *,\n\t\tenum thermal_device_mode);\n\tint (*set_trip_temp) (struct thermal_zone_device *, int, int);\n\tint (*set_trip_hyst) (struct thermal_zone_device *, int, int);\n\tint (*get_crit_temp) (struct thermal_zone_device *, int *);\n\tint (*set_emul_temp) (struct thermal_zone_device *, int);\n\tint (*get_trend) (struct thermal_zone_device *,\n\t\t\t  const struct thermal_trip *, enum thermal_trend *);\n\tvoid (*hot)(struct thermal_zone_device *);\n\tvoid (*critical)(struct thermal_zone_device *);\n};\n\nstruct thermal_cooling_device_ops {\n\tint (*get_max_state) (struct thermal_cooling_device *, unsigned long *);\n\tint (*get_cur_state) (struct thermal_cooling_device *, unsigned long *);\n\tint (*set_cur_state) (struct thermal_cooling_device *, unsigned long);\n\tint (*get_requested_power)(struct thermal_cooling_device *, u32 *);\n\tint (*state2power)(struct thermal_cooling_device *, unsigned long, u32 *);\n\tint (*power2state)(struct thermal_cooling_device *, u32, unsigned long *);\n};\n\nstruct thermal_cooling_device {\n\tint id;\n\tchar *type;\n\tunsigned long max_state;\n\tstruct device device;\n\tstruct device_node *np;\n\tvoid *devdata;\n\tvoid *stats;\n\tconst struct thermal_cooling_device_ops *ops;\n\tbool updated;  \n\tstruct mutex lock;  \n\tstruct list_head thermal_instances;\n\tstruct list_head node;\n};\n\n \nstruct thermal_zone_device {\n\tint id;\n\tchar type[THERMAL_NAME_LENGTH];\n\tstruct device device;\n\tstruct attribute_group trips_attribute_group;\n\tstruct thermal_attr *trip_temp_attrs;\n\tstruct thermal_attr *trip_type_attrs;\n\tstruct thermal_attr *trip_hyst_attrs;\n\tenum thermal_device_mode mode;\n\tvoid *devdata;\n\tstruct thermal_trip *trips;\n\tint num_trips;\n\tunsigned long trips_disabled;\t \n\tunsigned long passive_delay_jiffies;\n\tunsigned long polling_delay_jiffies;\n\tint temperature;\n\tint last_temperature;\n\tint emul_temperature;\n\tint passive;\n\tint prev_low_trip;\n\tint prev_high_trip;\n\tatomic_t need_update;\n\tstruct thermal_zone_device_ops *ops;\n\tstruct thermal_zone_params *tzp;\n\tstruct thermal_governor *governor;\n\tvoid *governor_data;\n\tstruct list_head thermal_instances;\n\tstruct ida ida;\n\tstruct mutex lock;\n\tstruct list_head node;\n\tstruct delayed_work poll_queue;\n\tenum thermal_notify_event notify_event;\n};\n\n \nstruct thermal_governor {\n\tchar name[THERMAL_NAME_LENGTH];\n\tint (*bind_to_tz)(struct thermal_zone_device *tz);\n\tvoid (*unbind_from_tz)(struct thermal_zone_device *tz);\n\tint (*throttle)(struct thermal_zone_device *tz, int trip);\n\tstruct list_head\tgovernor_list;\n};\n\n \nstruct thermal_zone_params {\n\tchar governor_name[THERMAL_NAME_LENGTH];\n\n\t \n\tbool no_hwmon;\n\n\t \n\tu32 sustainable_power;\n\n\t \n\ts32 k_po;\n\n\t \n\ts32 k_pu;\n\n\t \n\ts32 k_i;\n\n\t \n\ts32 k_d;\n\n\t \n\ts32 integral_cutoff;\n\n\t \n\tint slope;\n\t \n\tint offset;\n};\n\n \n#ifdef CONFIG_THERMAL_OF\nstruct thermal_zone_device *devm_thermal_of_zone_register(struct device *dev, int id, void *data,\n\t\t\t\t\t\t\t  const struct thermal_zone_device_ops *ops);\n\nvoid devm_thermal_of_zone_unregister(struct device *dev, struct thermal_zone_device *tz);\n\n#else\n\nstatic inline\nstruct thermal_zone_device *devm_thermal_of_zone_register(struct device *dev, int id, void *data,\n\t\t\t\t\t\t\t  const struct thermal_zone_device_ops *ops)\n{\n\treturn ERR_PTR(-ENOTSUPP);\n}\n\nstatic inline void devm_thermal_of_zone_unregister(struct device *dev,\n\t\t\t\t\t\t   struct thermal_zone_device *tz)\n{\n}\n#endif\n\nint __thermal_zone_get_trip(struct thermal_zone_device *tz, int trip_id,\n\t\t\t    struct thermal_trip *trip);\nint thermal_zone_get_trip(struct thermal_zone_device *tz, int trip_id,\n\t\t\t  struct thermal_trip *trip);\n\nint thermal_zone_set_trip(struct thermal_zone_device *tz, int trip_id,\n\t\t\t  const struct thermal_trip *trip);\n\nint for_each_thermal_trip(struct thermal_zone_device *tz,\n\t\t\t  int (*cb)(struct thermal_trip *, void *),\n\t\t\t  void *data);\nint thermal_zone_get_num_trips(struct thermal_zone_device *tz);\n\nint thermal_zone_get_crit_temp(struct thermal_zone_device *tz, int *temp);\n\n#ifdef CONFIG_THERMAL_ACPI\nint thermal_acpi_active_trip_temp(struct acpi_device *adev, int id, int *ret_temp);\nint thermal_acpi_passive_trip_temp(struct acpi_device *adev, int *ret_temp);\nint thermal_acpi_hot_trip_temp(struct acpi_device *adev, int *ret_temp);\nint thermal_acpi_critical_trip_temp(struct acpi_device *adev, int *ret_temp);\n#endif\n\n#ifdef CONFIG_THERMAL\nstruct thermal_zone_device *thermal_zone_device_register_with_trips(\n\t\t\t\t\tconst char *type,\n\t\t\t\t\tstruct thermal_trip *trips,\n\t\t\t\t\tint num_trips, int mask,\n\t\t\t\t\tvoid *devdata,\n\t\t\t\t\tstruct thermal_zone_device_ops *ops,\n\t\t\t\t\tconst struct thermal_zone_params *tzp,\n\t\t\t\t\tint passive_delay, int polling_delay);\n\nstruct thermal_zone_device *thermal_tripless_zone_device_register(\n\t\t\t\t\tconst char *type,\n\t\t\t\t\tvoid *devdata,\n\t\t\t\t\tstruct thermal_zone_device_ops *ops,\n\t\t\t\t\tconst struct thermal_zone_params *tzp);\n\nvoid thermal_zone_device_unregister(struct thermal_zone_device *tz);\n\nvoid *thermal_zone_device_priv(struct thermal_zone_device *tzd);\nconst char *thermal_zone_device_type(struct thermal_zone_device *tzd);\nint thermal_zone_device_id(struct thermal_zone_device *tzd);\nstruct device *thermal_zone_device(struct thermal_zone_device *tzd);\n\nint thermal_zone_bind_cooling_device(struct thermal_zone_device *, int,\n\t\t\t\t     struct thermal_cooling_device *,\n\t\t\t\t     unsigned long, unsigned long,\n\t\t\t\t     unsigned int);\nint thermal_zone_unbind_cooling_device(struct thermal_zone_device *, int,\n\t\t\t\t       struct thermal_cooling_device *);\nvoid thermal_zone_device_update(struct thermal_zone_device *,\n\t\t\t\tenum thermal_notify_event);\nvoid thermal_zone_device_exec(struct thermal_zone_device *tz,\n\t\t\t      void (*cb)(struct thermal_zone_device *,\n\t\t\t\t\t unsigned long),\n\t\t\t      unsigned long data);\n\nstruct thermal_cooling_device *thermal_cooling_device_register(const char *,\n\t\tvoid *, const struct thermal_cooling_device_ops *);\nstruct thermal_cooling_device *\nthermal_of_cooling_device_register(struct device_node *np, const char *, void *,\n\t\t\t\t   const struct thermal_cooling_device_ops *);\nstruct thermal_cooling_device *\ndevm_thermal_of_cooling_device_register(struct device *dev,\n\t\t\t\tstruct device_node *np,\n\t\t\t\tchar *type, void *devdata,\n\t\t\t\tconst struct thermal_cooling_device_ops *ops);\nvoid thermal_cooling_device_update(struct thermal_cooling_device *);\nvoid thermal_cooling_device_unregister(struct thermal_cooling_device *);\nstruct thermal_zone_device *thermal_zone_get_zone_by_name(const char *name);\nint thermal_zone_get_temp(struct thermal_zone_device *tz, int *temp);\nint thermal_zone_get_slope(struct thermal_zone_device *tz);\nint thermal_zone_get_offset(struct thermal_zone_device *tz);\n\nint thermal_zone_device_enable(struct thermal_zone_device *tz);\nint thermal_zone_device_disable(struct thermal_zone_device *tz);\nvoid thermal_zone_device_critical(struct thermal_zone_device *tz);\n#else\nstatic inline struct thermal_zone_device *thermal_zone_device_register_with_trips(\n\t\t\t\t\tconst char *type,\n\t\t\t\t\tstruct thermal_trip *trips,\n\t\t\t\t\tint num_trips, int mask,\n\t\t\t\t\tvoid *devdata,\n\t\t\t\t\tstruct thermal_zone_device_ops *ops,\n\t\t\t\t\tconst struct thermal_zone_params *tzp,\n\t\t\t\t\tint passive_delay, int polling_delay)\n{ return ERR_PTR(-ENODEV); }\n\nstatic inline struct thermal_zone_device *thermal_tripless_zone_device_register(\n\t\t\t\t\tconst char *type,\n\t\t\t\t\tvoid *devdata,\n\t\t\t\t\tstruct thermal_zone_device_ops *ops,\n\t\t\t\t\tconst struct thermal_zone_params *tzp)\n{ return ERR_PTR(-ENODEV); }\n\nstatic inline void thermal_zone_device_unregister(struct thermal_zone_device *tz)\n{ }\n\nstatic inline struct thermal_cooling_device *\nthermal_cooling_device_register(const char *type, void *devdata,\n\tconst struct thermal_cooling_device_ops *ops)\n{ return ERR_PTR(-ENODEV); }\nstatic inline struct thermal_cooling_device *\nthermal_of_cooling_device_register(struct device_node *np,\n\tconst char *type, void *devdata,\n\tconst struct thermal_cooling_device_ops *ops)\n{ return ERR_PTR(-ENODEV); }\nstatic inline struct thermal_cooling_device *\ndevm_thermal_of_cooling_device_register(struct device *dev,\n\t\t\t\tstruct device_node *np,\n\t\t\t\tchar *type, void *devdata,\n\t\t\t\tconst struct thermal_cooling_device_ops *ops)\n{\n\treturn ERR_PTR(-ENODEV);\n}\nstatic inline void thermal_cooling_device_unregister(\n\tstruct thermal_cooling_device *cdev)\n{ }\nstatic inline struct thermal_zone_device *thermal_zone_get_zone_by_name(\n\t\tconst char *name)\n{ return ERR_PTR(-ENODEV); }\nstatic inline int thermal_zone_get_temp(\n\t\tstruct thermal_zone_device *tz, int *temp)\n{ return -ENODEV; }\nstatic inline int thermal_zone_get_slope(\n\t\tstruct thermal_zone_device *tz)\n{ return -ENODEV; }\nstatic inline int thermal_zone_get_offset(\n\t\tstruct thermal_zone_device *tz)\n{ return -ENODEV; }\n\nstatic inline void *thermal_zone_device_priv(struct thermal_zone_device *tz)\n{\n\treturn NULL;\n}\n\nstatic inline const char *thermal_zone_device_type(struct thermal_zone_device *tzd)\n{\n\treturn NULL;\n}\n\nstatic inline int thermal_zone_device_id(struct thermal_zone_device *tzd)\n{\n\treturn -ENODEV;\n}\n\nstatic inline int thermal_zone_device_enable(struct thermal_zone_device *tz)\n{ return -ENODEV; }\n\nstatic inline int thermal_zone_device_disable(struct thermal_zone_device *tz)\n{ return -ENODEV; }\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}