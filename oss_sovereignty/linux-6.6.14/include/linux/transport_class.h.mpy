{
  "module_name": "transport_class.h",
  "hash_id": "5955d2406beb050e5ef8e5d0a8daedd0058572491df2b392683b86b30ce630d1",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/transport_class.h",
  "human_readable_source": " \n \n\n#ifndef _TRANSPORT_CLASS_H_\n#define _TRANSPORT_CLASS_H_\n\n#include <linux/device.h>\n#include <linux/bug.h>\n#include <linux/attribute_container.h>\n\nstruct transport_container;\n\nstruct transport_class {\n\tstruct class class;\n\tint (*setup)(struct transport_container *, struct device *,\n\t\t     struct device *);\n\tint (*configure)(struct transport_container *, struct device *,\n\t\t\t struct device *);\n\tint (*remove)(struct transport_container *, struct device *,\n\t\t      struct device *);\n};\n\n#define DECLARE_TRANSPORT_CLASS(cls, nm, su, rm, cfg)\t\t\t\\\nstruct transport_class cls = {\t\t\t\t\t\t\\\n\t.class = {\t\t\t\t\t\t\t\\\n\t\t.name = nm,\t\t\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\t\\\n\t.setup = su,\t\t\t\t\t\t\t\\\n\t.remove = rm,\t\t\t\t\t\t\t\\\n\t.configure = cfg,\t\t\t\t\t\t\\\n}\n\n\nstruct anon_transport_class {\n\tstruct transport_class tclass;\n\tstruct attribute_container container;\n};\n\n#define DECLARE_ANON_TRANSPORT_CLASS(cls, mtch, cfg)\t\t\\\nstruct anon_transport_class cls = {\t\t\t\t\\\n\t.tclass = {\t\t\t\t\t\t\\\n\t\t.configure = cfg,\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\\\n\t. container = {\t\t\t\t\t\t\\\n\t\t.match = mtch,\t\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\\\n}\n\n#define class_to_transport_class(x) \\\n\tcontainer_of(x, struct transport_class, class)\n\nstruct transport_container {\n\tstruct attribute_container ac;\n\tconst struct attribute_group *statistics;\n};\n\n#define attribute_container_to_transport_container(x) \\\n\tcontainer_of(x, struct transport_container, ac)\n\nvoid transport_remove_device(struct device *);\nint transport_add_device(struct device *);\nvoid transport_setup_device(struct device *);\nvoid transport_configure_device(struct device *);\nvoid transport_destroy_device(struct device *);\n\nstatic inline int\ntransport_register_device(struct device *dev)\n{\n\tint ret;\n\n\ttransport_setup_device(dev);\n\tret = transport_add_device(dev);\n\tif (ret)\n\t\ttransport_destroy_device(dev);\n\n\treturn ret;\n}\n\nstatic inline void\ntransport_unregister_device(struct device *dev)\n{\n\ttransport_remove_device(dev);\n\ttransport_destroy_device(dev);\n}\n\nstatic inline int transport_container_register(struct transport_container *tc)\n{\n\treturn attribute_container_register(&tc->ac);\n}\n\nstatic inline void transport_container_unregister(struct transport_container *tc)\n{\n\tif (unlikely(attribute_container_unregister(&tc->ac)))\n\t\tBUG();\n}\n\nint transport_class_register(struct transport_class *);\nint anon_transport_class_register(struct anon_transport_class *);\nvoid transport_class_unregister(struct transport_class *);\nvoid anon_transport_class_unregister(struct anon_transport_class *);\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}