{
  "module_name": "pm_opp.h",
  "hash_id": "822d9ac89d059fbf8d6f49ff740a02268800a4737dc65fefbde71d472839bd37",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pm_opp.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_OPP_H__\n#define __LINUX_OPP_H__\n\n#include <linux/energy_model.h>\n#include <linux/err.h>\n#include <linux/notifier.h>\n\nstruct clk;\nstruct regulator;\nstruct dev_pm_opp;\nstruct device;\nstruct opp_table;\n\nenum dev_pm_opp_event {\n\tOPP_EVENT_ADD, OPP_EVENT_REMOVE, OPP_EVENT_ENABLE, OPP_EVENT_DISABLE,\n\tOPP_EVENT_ADJUST_VOLTAGE,\n};\n\n \nstruct dev_pm_opp_supply {\n\tunsigned long u_volt;\n\tunsigned long u_volt_min;\n\tunsigned long u_volt_max;\n\tunsigned long u_amp;\n\tunsigned long u_watt;\n};\n\n \nstruct dev_pm_opp_icc_bw {\n\tu32 avg;\n\tu32 peak;\n};\n\ntypedef int (*config_regulators_t)(struct device *dev,\n\t\t\tstruct dev_pm_opp *old_opp, struct dev_pm_opp *new_opp,\n\t\t\tstruct regulator **regulators, unsigned int count);\n\ntypedef int (*config_clks_t)(struct device *dev, struct opp_table *opp_table,\n\t\t\tstruct dev_pm_opp *opp, void *data, bool scaling_down);\n\n \nstruct dev_pm_opp_config {\n\t \n\tconst char * const *clk_names;\n\tconfig_clks_t config_clks;\n\tconst char *prop_name;\n\tconfig_regulators_t config_regulators;\n\tconst unsigned int *supported_hw;\n\tunsigned int supported_hw_count;\n\tconst char * const *regulator_names;\n\tconst char * const *genpd_names;\n\tstruct device ***virt_devs;\n};\n\n#if defined(CONFIG_PM_OPP)\n\nstruct opp_table *dev_pm_opp_get_opp_table(struct device *dev);\nvoid dev_pm_opp_put_opp_table(struct opp_table *opp_table);\n\nunsigned long dev_pm_opp_get_voltage(struct dev_pm_opp *opp);\n\nint dev_pm_opp_get_supplies(struct dev_pm_opp *opp, struct dev_pm_opp_supply *supplies);\n\nunsigned long dev_pm_opp_get_power(struct dev_pm_opp *opp);\n\nunsigned long dev_pm_opp_get_freq_indexed(struct dev_pm_opp *opp, u32 index);\n\nunsigned int dev_pm_opp_get_level(struct dev_pm_opp *opp);\n\nunsigned int dev_pm_opp_get_required_pstate(struct dev_pm_opp *opp,\n\t\t\t\t\t    unsigned int index);\n\nbool dev_pm_opp_is_turbo(struct dev_pm_opp *opp);\n\nint dev_pm_opp_get_opp_count(struct device *dev);\nunsigned long dev_pm_opp_get_max_clock_latency(struct device *dev);\nunsigned long dev_pm_opp_get_max_volt_latency(struct device *dev);\nunsigned long dev_pm_opp_get_max_transition_latency(struct device *dev);\nunsigned long dev_pm_opp_get_suspend_opp_freq(struct device *dev);\n\nstruct dev_pm_opp *dev_pm_opp_find_freq_exact(struct device *dev,\n\t\t\t\t\t      unsigned long freq,\n\t\t\t\t\t      bool available);\n\nstruct dev_pm_opp *\ndev_pm_opp_find_freq_exact_indexed(struct device *dev, unsigned long freq,\n\t\t\t\t   u32 index, bool available);\n\nstruct dev_pm_opp *dev_pm_opp_find_freq_floor(struct device *dev,\n\t\t\t\t\t      unsigned long *freq);\n\nstruct dev_pm_opp *dev_pm_opp_find_freq_floor_indexed(struct device *dev,\n\t\t\t\t\t\t      unsigned long *freq, u32 index);\n\nstruct dev_pm_opp *dev_pm_opp_find_freq_ceil(struct device *dev,\n\t\t\t\t\t     unsigned long *freq);\n\nstruct dev_pm_opp *dev_pm_opp_find_freq_ceil_indexed(struct device *dev,\n\t\t\t\t\t\t     unsigned long *freq, u32 index);\n\nstruct dev_pm_opp *dev_pm_opp_find_level_exact(struct device *dev,\n\t\t\t\t\t       unsigned int level);\n\nstruct dev_pm_opp *dev_pm_opp_find_level_ceil(struct device *dev,\n\t\t\t\t\t      unsigned int *level);\n\nstruct dev_pm_opp *dev_pm_opp_find_bw_ceil(struct device *dev,\n\t\t\t\t\t   unsigned int *bw, int index);\n\nstruct dev_pm_opp *dev_pm_opp_find_bw_floor(struct device *dev,\n\t\t\t\t\t   unsigned int *bw, int index);\n\nvoid dev_pm_opp_put(struct dev_pm_opp *opp);\n\nint dev_pm_opp_add(struct device *dev, unsigned long freq,\n\t\t   unsigned long u_volt);\nvoid dev_pm_opp_remove(struct device *dev, unsigned long freq);\nvoid dev_pm_opp_remove_all_dynamic(struct device *dev);\n\nint dev_pm_opp_adjust_voltage(struct device *dev, unsigned long freq,\n\t\t\t      unsigned long u_volt, unsigned long u_volt_min,\n\t\t\t      unsigned long u_volt_max);\n\nint dev_pm_opp_enable(struct device *dev, unsigned long freq);\n\nint dev_pm_opp_disable(struct device *dev, unsigned long freq);\n\nint dev_pm_opp_register_notifier(struct device *dev, struct notifier_block *nb);\nint dev_pm_opp_unregister_notifier(struct device *dev, struct notifier_block *nb);\n\nint dev_pm_opp_set_config(struct device *dev, struct dev_pm_opp_config *config);\nint devm_pm_opp_set_config(struct device *dev, struct dev_pm_opp_config *config);\nvoid dev_pm_opp_clear_config(int token);\nint dev_pm_opp_config_clks_simple(struct device *dev,\n\t\tstruct opp_table *opp_table, struct dev_pm_opp *opp, void *data,\n\t\tbool scaling_down);\n\nstruct dev_pm_opp *dev_pm_opp_xlate_required_opp(struct opp_table *src_table, struct opp_table *dst_table, struct dev_pm_opp *src_opp);\nint dev_pm_opp_xlate_performance_state(struct opp_table *src_table, struct opp_table *dst_table, unsigned int pstate);\nint dev_pm_opp_set_rate(struct device *dev, unsigned long target_freq);\nint dev_pm_opp_set_opp(struct device *dev, struct dev_pm_opp *opp);\nint dev_pm_opp_set_sharing_cpus(struct device *cpu_dev, const struct cpumask *cpumask);\nint dev_pm_opp_get_sharing_cpus(struct device *cpu_dev, struct cpumask *cpumask);\nvoid dev_pm_opp_remove_table(struct device *dev);\nvoid dev_pm_opp_cpumask_remove_table(const struct cpumask *cpumask);\nint dev_pm_opp_sync_regulators(struct device *dev);\n#else\nstatic inline struct opp_table *dev_pm_opp_get_opp_table(struct device *dev)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct opp_table *dev_pm_opp_get_opp_table_indexed(struct device *dev, int index)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline void dev_pm_opp_put_opp_table(struct opp_table *opp_table) {}\n\nstatic inline unsigned long dev_pm_opp_get_voltage(struct dev_pm_opp *opp)\n{\n\treturn 0;\n}\n\nstatic inline int dev_pm_opp_get_supplies(struct dev_pm_opp *opp, struct dev_pm_opp_supply *supplies)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline unsigned long dev_pm_opp_get_power(struct dev_pm_opp *opp)\n{\n\treturn 0;\n}\n\nstatic inline unsigned long dev_pm_opp_get_freq_indexed(struct dev_pm_opp *opp, u32 index)\n{\n\treturn 0;\n}\n\nstatic inline unsigned int dev_pm_opp_get_level(struct dev_pm_opp *opp)\n{\n\treturn 0;\n}\n\nstatic inline\nunsigned int dev_pm_opp_get_required_pstate(struct dev_pm_opp *opp,\n\t\t\t\t\t    unsigned int index)\n{\n\treturn 0;\n}\n\nstatic inline bool dev_pm_opp_is_turbo(struct dev_pm_opp *opp)\n{\n\treturn false;\n}\n\nstatic inline int dev_pm_opp_get_opp_count(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic inline unsigned long dev_pm_opp_get_max_clock_latency(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic inline unsigned long dev_pm_opp_get_max_volt_latency(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic inline unsigned long dev_pm_opp_get_max_transition_latency(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic inline unsigned long dev_pm_opp_get_suspend_opp_freq(struct device *dev)\n{\n\treturn 0;\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_freq_exact(struct device *dev,\n\t\t\t\t\tunsigned long freq, bool available)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *\ndev_pm_opp_find_freq_exact_indexed(struct device *dev, unsigned long freq,\n\t\t\t\t   u32 index, bool available)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_freq_floor(struct device *dev,\n\t\t\t\t\tunsigned long *freq)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *\ndev_pm_opp_find_freq_floor_indexed(struct device *dev, unsigned long *freq, u32 index)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_freq_ceil(struct device *dev,\n\t\t\t\t\tunsigned long *freq)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *\ndev_pm_opp_find_freq_ceil_indexed(struct device *dev, unsigned long *freq, u32 index)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_level_exact(struct device *dev,\n\t\t\t\t\tunsigned int level)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_level_ceil(struct device *dev,\n\t\t\t\t\tunsigned int *level)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_bw_ceil(struct device *dev,\n\t\t\t\t\tunsigned int *bw, int index)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_find_bw_floor(struct device *dev,\n\t\t\t\t\tunsigned int *bw, int index)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline void dev_pm_opp_put(struct dev_pm_opp *opp) {}\n\nstatic inline int dev_pm_opp_add(struct device *dev, unsigned long freq,\n\t\t\t\t\tunsigned long u_volt)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void dev_pm_opp_remove(struct device *dev, unsigned long freq)\n{\n}\n\nstatic inline void dev_pm_opp_remove_all_dynamic(struct device *dev)\n{\n}\n\nstatic inline int\ndev_pm_opp_adjust_voltage(struct device *dev, unsigned long freq,\n\t\t\t  unsigned long u_volt, unsigned long u_volt_min,\n\t\t\t  unsigned long u_volt_max)\n{\n\treturn 0;\n}\n\nstatic inline int dev_pm_opp_enable(struct device *dev, unsigned long freq)\n{\n\treturn 0;\n}\n\nstatic inline int dev_pm_opp_disable(struct device *dev, unsigned long freq)\n{\n\treturn 0;\n}\n\nstatic inline int dev_pm_opp_register_notifier(struct device *dev, struct notifier_block *nb)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_unregister_notifier(struct device *dev, struct notifier_block *nb)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_set_config(struct device *dev, struct dev_pm_opp_config *config)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int devm_pm_opp_set_config(struct device *dev, struct dev_pm_opp_config *config)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void dev_pm_opp_clear_config(int token) {}\n\nstatic inline int dev_pm_opp_config_clks_simple(struct device *dev,\n\t\tstruct opp_table *opp_table, struct dev_pm_opp *opp, void *data,\n\t\tbool scaling_down)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline struct dev_pm_opp *dev_pm_opp_xlate_required_opp(struct opp_table *src_table,\n\t\t\t\tstruct opp_table *dst_table, struct dev_pm_opp *src_opp)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline int dev_pm_opp_xlate_performance_state(struct opp_table *src_table, struct opp_table *dst_table, unsigned int pstate)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_set_rate(struct device *dev, unsigned long target_freq)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_set_opp(struct device *dev, struct dev_pm_opp *opp)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_set_sharing_cpus(struct device *cpu_dev, const struct cpumask *cpumask)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_get_sharing_cpus(struct device *cpu_dev, struct cpumask *cpumask)\n{\n\treturn -EINVAL;\n}\n\nstatic inline void dev_pm_opp_remove_table(struct device *dev)\n{\n}\n\nstatic inline void dev_pm_opp_cpumask_remove_table(const struct cpumask *cpumask)\n{\n}\n\nstatic inline int dev_pm_opp_sync_regulators(struct device *dev)\n{\n\treturn -EOPNOTSUPP;\n}\n\n#endif\t\t \n\n#if defined(CONFIG_PM_OPP) && defined(CONFIG_OF)\nint dev_pm_opp_of_add_table(struct device *dev);\nint dev_pm_opp_of_add_table_indexed(struct device *dev, int index);\nint devm_pm_opp_of_add_table_indexed(struct device *dev, int index);\nvoid dev_pm_opp_of_remove_table(struct device *dev);\nint devm_pm_opp_of_add_table(struct device *dev);\nint dev_pm_opp_of_cpumask_add_table(const struct cpumask *cpumask);\nvoid dev_pm_opp_of_cpumask_remove_table(const struct cpumask *cpumask);\nint dev_pm_opp_of_get_sharing_cpus(struct device *cpu_dev, struct cpumask *cpumask);\nstruct device_node *dev_pm_opp_of_get_opp_desc_node(struct device *dev);\nstruct device_node *dev_pm_opp_get_of_node(struct dev_pm_opp *opp);\nint of_get_required_opp_performance_state(struct device_node *np, int index);\nint dev_pm_opp_of_find_icc_paths(struct device *dev, struct opp_table *opp_table);\nint dev_pm_opp_of_register_em(struct device *dev, struct cpumask *cpus);\nstatic inline void dev_pm_opp_of_unregister_em(struct device *dev)\n{\n\tem_dev_unregister_perf_domain(dev);\n}\n#else\nstatic inline int dev_pm_opp_of_add_table(struct device *dev)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_of_add_table_indexed(struct device *dev, int index)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int devm_pm_opp_of_add_table_indexed(struct device *dev, int index)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void dev_pm_opp_of_remove_table(struct device *dev)\n{\n}\n\nstatic inline int devm_pm_opp_of_add_table(struct device *dev)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_of_cpumask_add_table(const struct cpumask *cpumask)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void dev_pm_opp_of_cpumask_remove_table(const struct cpumask *cpumask)\n{\n}\n\nstatic inline int dev_pm_opp_of_get_sharing_cpus(struct device *cpu_dev, struct cpumask *cpumask)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline struct device_node *dev_pm_opp_of_get_opp_desc_node(struct device *dev)\n{\n\treturn NULL;\n}\n\nstatic inline struct device_node *dev_pm_opp_get_of_node(struct dev_pm_opp *opp)\n{\n\treturn NULL;\n}\n\nstatic inline int dev_pm_opp_of_register_em(struct device *dev,\n\t\t\t\t\t    struct cpumask *cpus)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void dev_pm_opp_of_unregister_em(struct device *dev)\n{\n}\n\nstatic inline int of_get_required_opp_performance_state(struct device_node *np, int index)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int dev_pm_opp_of_find_icc_paths(struct device *dev, struct opp_table *opp_table)\n{\n\treturn -EOPNOTSUPP;\n}\n#endif\n\n \n\n \nstatic inline int dev_pm_opp_set_regulators(struct device *dev,\n\t\t\t\t\t    const char * const names[])\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.regulator_names = names,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_put_regulators(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\nstatic inline int devm_pm_opp_set_regulators(struct device *dev,\n\t\t\t\t\t     const char * const names[])\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.regulator_names = names,\n\t};\n\n\treturn devm_pm_opp_set_config(dev, &config);\n}\n\n \nstatic inline int dev_pm_opp_set_supported_hw(struct device *dev,\n\t\t\t\t\t      const u32 *versions,\n\t\t\t\t\t      unsigned int count)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.supported_hw = versions,\n\t\t.supported_hw_count = count,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_put_supported_hw(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\nstatic inline int devm_pm_opp_set_supported_hw(struct device *dev,\n\t\t\t\t\t       const u32 *versions,\n\t\t\t\t\t       unsigned int count)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.supported_hw = versions,\n\t\t.supported_hw_count = count,\n\t};\n\n\treturn devm_pm_opp_set_config(dev, &config);\n}\n\n \nstatic inline int dev_pm_opp_set_clkname(struct device *dev, const char *name)\n{\n\tconst char *names[] = { name, NULL };\n\tstruct dev_pm_opp_config config = {\n\t\t.clk_names = names,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_put_clkname(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\nstatic inline int devm_pm_opp_set_clkname(struct device *dev, const char *name)\n{\n\tconst char *names[] = { name, NULL };\n\tstruct dev_pm_opp_config config = {\n\t\t.clk_names = names,\n\t};\n\n\treturn devm_pm_opp_set_config(dev, &config);\n}\n\n \nstatic inline int dev_pm_opp_set_config_regulators(struct device *dev,\n\t\t\t\t\t\t   config_regulators_t helper)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.config_regulators = helper,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_put_config_regulators(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\n \nstatic inline int dev_pm_opp_attach_genpd(struct device *dev,\n\t\t\t\t\t  const char * const *names,\n\t\t\t\t\t  struct device ***virt_devs)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.genpd_names = names,\n\t\t.virt_devs = virt_devs,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_detach_genpd(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\nstatic inline int devm_pm_opp_attach_genpd(struct device *dev,\n\t\t\t\t\t   const char * const *names,\n\t\t\t\t\t   struct device ***virt_devs)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.genpd_names = names,\n\t\t.virt_devs = virt_devs,\n\t};\n\n\treturn devm_pm_opp_set_config(dev, &config);\n}\n\n \nstatic inline int dev_pm_opp_set_prop_name(struct device *dev, const char *name)\n{\n\tstruct dev_pm_opp_config config = {\n\t\t.prop_name = name,\n\t};\n\n\treturn dev_pm_opp_set_config(dev, &config);\n}\n\nstatic inline void dev_pm_opp_put_prop_name(int token)\n{\n\tdev_pm_opp_clear_config(token);\n}\n\nstatic inline unsigned long dev_pm_opp_get_freq(struct dev_pm_opp *opp)\n{\n\treturn dev_pm_opp_get_freq_indexed(opp, 0);\n}\n\n#endif\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}