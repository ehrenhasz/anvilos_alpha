{
  "module_name": "list_nulls.h",
  "hash_id": "38f23f36bff5fc59f6b4412477287cde7bd21431596b5b669ea73433147c5a4f",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/list_nulls.h",
  "human_readable_source": " \n#ifndef _LINUX_LIST_NULLS_H\n#define _LINUX_LIST_NULLS_H\n\n#include <linux/poison.h>\n#include <linux/const.h>\n\n \n\nstruct hlist_nulls_head {\n\tstruct hlist_nulls_node *first;\n};\n\nstruct hlist_nulls_node {\n\tstruct hlist_nulls_node *next, **pprev;\n};\n#define NULLS_MARKER(value) (1UL | (((long)value) << 1))\n#define INIT_HLIST_NULLS_HEAD(ptr, nulls) \\\n\t((ptr)->first = (struct hlist_nulls_node *) NULLS_MARKER(nulls))\n\n#define hlist_nulls_entry(ptr, type, member) container_of(ptr,type,member)\n\n#define hlist_nulls_entry_safe(ptr, type, member) \\\n\t({ typeof(ptr) ____ptr = (ptr); \\\n\t   !is_a_nulls(____ptr) ? hlist_nulls_entry(____ptr, type, member) : NULL; \\\n\t})\n \nstatic inline int is_a_nulls(const struct hlist_nulls_node *ptr)\n{\n\treturn ((unsigned long)ptr & 1);\n}\n\n \nstatic inline unsigned long get_nulls_value(const struct hlist_nulls_node *ptr)\n{\n\treturn ((unsigned long)ptr) >> 1;\n}\n\n \nstatic inline int hlist_nulls_unhashed(const struct hlist_nulls_node *h)\n{\n\treturn !h->pprev;\n}\n\n \nstatic inline int hlist_nulls_unhashed_lockless(const struct hlist_nulls_node *h)\n{\n\treturn !READ_ONCE(h->pprev);\n}\n\nstatic inline int hlist_nulls_empty(const struct hlist_nulls_head *h)\n{\n\treturn is_a_nulls(READ_ONCE(h->first));\n}\n\nstatic inline void hlist_nulls_add_head(struct hlist_nulls_node *n,\n\t\t\t\t\tstruct hlist_nulls_head *h)\n{\n\tstruct hlist_nulls_node *first = h->first;\n\n\tn->next = first;\n\tWRITE_ONCE(n->pprev, &h->first);\n\th->first = n;\n\tif (!is_a_nulls(first))\n\t\tWRITE_ONCE(first->pprev, &n->next);\n}\n\nstatic inline void __hlist_nulls_del(struct hlist_nulls_node *n)\n{\n\tstruct hlist_nulls_node *next = n->next;\n\tstruct hlist_nulls_node **pprev = n->pprev;\n\n\tWRITE_ONCE(*pprev, next);\n\tif (!is_a_nulls(next))\n\t\tWRITE_ONCE(next->pprev, pprev);\n}\n\nstatic inline void hlist_nulls_del(struct hlist_nulls_node *n)\n{\n\t__hlist_nulls_del(n);\n\tWRITE_ONCE(n->pprev, LIST_POISON2);\n}\n\n \n#define hlist_nulls_for_each_entry(tpos, pos, head, member)\t\t       \\\n\tfor (pos = (head)->first;\t\t\t\t\t       \\\n\t     (!is_a_nulls(pos)) &&\t\t\t\t\t       \\\n\t\t({ tpos = hlist_nulls_entry(pos, typeof(*tpos), member); 1;}); \\\n\t     pos = pos->next)\n\n \n#define hlist_nulls_for_each_entry_from(tpos, pos, member)\t\\\n\tfor (; (!is_a_nulls(pos)) && \t\t\t\t\\\n\t\t({ tpos = hlist_nulls_entry(pos, typeof(*tpos), member); 1;}); \\\n\t     pos = pos->next)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}