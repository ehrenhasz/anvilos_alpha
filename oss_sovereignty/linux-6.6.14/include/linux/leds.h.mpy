{
  "module_name": "leds.h",
  "hash_id": "e7f28e52055a106e5fce04153b6b6edcb4aced0474ac0230beea65a72db17506",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/leds.h",
  "human_readable_source": " \n \n#ifndef __LINUX_LEDS_H_INCLUDED\n#define __LINUX_LEDS_H_INCLUDED\n\n#include <dt-bindings/leds/common.h>\n#include <linux/device.h>\n#include <linux/mutex.h>\n#include <linux/rwsem.h>\n#include <linux/spinlock.h>\n#include <linux/timer.h>\n#include <linux/types.h>\n#include <linux/workqueue.h>\n\nstruct attribute_group;\nstruct device_node;\nstruct fwnode_handle;\nstruct gpio_desc;\nstruct kernfs_node;\nstruct led_pattern;\nstruct platform_device;\n\n \n\n \nenum led_brightness {\n\tLED_OFF\t\t= 0,\n\tLED_ON\t\t= 1,\n\tLED_HALF\t= 127,\n\tLED_FULL\t= 255,\n};\n\nenum led_default_state {\n\tLEDS_DEFSTATE_OFF\t= 0,\n\tLEDS_DEFSTATE_ON\t= 1,\n\tLEDS_DEFSTATE_KEEP\t= 2,\n};\n\n \nstruct led_lookup_data {\n\tstruct list_head list;\n\tconst char *provider;\n\tconst char *dev_id;\n\tconst char *con_id;\n};\n\nstruct led_init_data {\n\t \n\tstruct fwnode_handle *fwnode;\n\t \n\tconst char *default_label;\n\t \n\tconst char *devicename;\n\t \n\tbool devname_mandatory;\n};\n\n#if IS_ENABLED(CONFIG_NEW_LEDS)\nenum led_default_state led_init_default_state_get(struct fwnode_handle *fwnode);\n#else\nstatic inline enum led_default_state\nled_init_default_state_get(struct fwnode_handle *fwnode)\n{\n\treturn LEDS_DEFSTATE_OFF;\n}\n#endif\n\nstruct led_hw_trigger_type {\n\tint dummy;\n};\n\nstruct led_classdev {\n\tconst char\t\t*name;\n\tunsigned int brightness;\n\tunsigned int max_brightness;\n\tunsigned int color;\n\tint\t\t\t flags;\n\n\t \n#define LED_SUSPENDED\t\tBIT(0)\n#define LED_UNREGISTERING\tBIT(1)\n\t \n#define LED_CORE_SUSPENDRESUME\tBIT(16)\n#define LED_SYSFS_DISABLE\tBIT(17)\n#define LED_DEV_CAP_FLASH\tBIT(18)\n#define LED_HW_PLUGGABLE\tBIT(19)\n#define LED_PANIC_INDICATOR\tBIT(20)\n#define LED_BRIGHT_HW_CHANGED\tBIT(21)\n#define LED_RETAIN_AT_SHUTDOWN\tBIT(22)\n#define LED_INIT_DEFAULT_TRIGGER BIT(23)\n\n\t \n\tunsigned long\t\twork_flags;\n\n#define LED_BLINK_SW\t\t\t0\n#define LED_BLINK_ONESHOT\t\t1\n#define LED_BLINK_ONESHOT_STOP\t\t2\n#define LED_BLINK_INVERT\t\t3\n#define LED_BLINK_BRIGHTNESS_CHANGE \t4\n#define LED_BLINK_DISABLE\t\t5\n\t \n#define LED_SET_BRIGHTNESS_OFF\t\t6\n#define LED_SET_BRIGHTNESS\t\t7\n#define LED_SET_BLINK\t\t\t8\n\n\t \n\tvoid\t\t(*brightness_set)(struct led_classdev *led_cdev,\n\t\t\t\t\t  enum led_brightness brightness);\n\t \n\tint (*brightness_set_blocking)(struct led_classdev *led_cdev,\n\t\t\t\t       enum led_brightness brightness);\n\t \n\tenum led_brightness (*brightness_get)(struct led_classdev *led_cdev);\n\n\t \n\tint\t\t(*blink_set)(struct led_classdev *led_cdev,\n\t\t\t\t     unsigned long *delay_on,\n\t\t\t\t     unsigned long *delay_off);\n\n\tint (*pattern_set)(struct led_classdev *led_cdev,\n\t\t\t   struct led_pattern *pattern, u32 len, int repeat);\n\tint (*pattern_clear)(struct led_classdev *led_cdev);\n\n\tstruct device\t\t*dev;\n\tconst struct attribute_group\t**groups;\n\n\tstruct list_head\t node;\t\t\t \n\tconst char\t\t*default_trigger;\t \n\n\tunsigned long\t\t blink_delay_on, blink_delay_off;\n\tstruct timer_list\t blink_timer;\n\tint\t\t\t blink_brightness;\n\tint\t\t\t new_blink_brightness;\n\tvoid\t\t\t(*flash_resume)(struct led_classdev *led_cdev);\n\n\tstruct work_struct\tset_brightness_work;\n\tint\t\t\tdelayed_set_value;\n\tunsigned long\t\tdelayed_delay_on;\n\tunsigned long\t\tdelayed_delay_off;\n\n#ifdef CONFIG_LEDS_TRIGGERS\n\t \n\tstruct rw_semaphore\t trigger_lock;\n\n\tstruct led_trigger\t*trigger;\n\tstruct list_head\t trig_list;\n\tvoid\t\t\t*trigger_data;\n\t \n\tbool\t\t\tactivated;\n\n\t \n\tstruct led_hw_trigger_type\t*trigger_type;\n\n\t \n\tconst char\t\t*hw_control_trigger;\n\t \n\tint\t\t\t(*hw_control_is_supported)(struct led_classdev *led_cdev,\n\t\t\t\t\t\t\t   unsigned long flags);\n\t \n\tint\t\t\t(*hw_control_set)(struct led_classdev *led_cdev,\n\t\t\t\t\t\t  unsigned long flags);\n\t \n\tint\t\t\t(*hw_control_get)(struct led_classdev *led_cdev,\n\t\t\t\t\t\t  unsigned long *flags);\n\t \n\tstruct device\t\t*(*hw_control_get_device)(struct led_classdev *led_cdev);\n#endif\n\n#ifdef CONFIG_LEDS_BRIGHTNESS_HW_CHANGED\n\tint\t\t\t brightness_hw_changed;\n\tstruct kernfs_node\t*brightness_hw_changed_kn;\n#endif\n\n\t \n\tstruct mutex\t\tled_access;\n};\n\n \nint led_classdev_register_ext(struct device *parent,\n\t\t\t\t     struct led_classdev *led_cdev,\n\t\t\t\t     struct led_init_data *init_data);\n\n \nstatic inline int led_classdev_register(struct device *parent,\n\t\t\t\t\tstruct led_classdev *led_cdev)\n{\n\treturn led_classdev_register_ext(parent, led_cdev, NULL);\n}\n\n#if IS_ENABLED(CONFIG_LEDS_CLASS)\nint devm_led_classdev_register_ext(struct device *parent,\n\t\t\t\t\t  struct led_classdev *led_cdev,\n\t\t\t\t\t  struct led_init_data *init_data);\n#else\nstatic inline int\ndevm_led_classdev_register_ext(struct device *parent,\n\t\t\t       struct led_classdev *led_cdev,\n\t\t\t       struct led_init_data *init_data)\n{\n\treturn 0;\n}\n#endif\n\nstatic inline int devm_led_classdev_register(struct device *parent,\n\t\t\t\t\t     struct led_classdev *led_cdev)\n{\n\treturn devm_led_classdev_register_ext(parent, led_cdev, NULL);\n}\nvoid led_classdev_unregister(struct led_classdev *led_cdev);\nvoid devm_led_classdev_unregister(struct device *parent,\n\t\t\t\t  struct led_classdev *led_cdev);\nvoid led_classdev_suspend(struct led_classdev *led_cdev);\nvoid led_classdev_resume(struct led_classdev *led_cdev);\n\nvoid led_add_lookup(struct led_lookup_data *led_lookup);\nvoid led_remove_lookup(struct led_lookup_data *led_lookup);\n\nstruct led_classdev *__must_check led_get(struct device *dev, char *con_id);\nstruct led_classdev *__must_check devm_led_get(struct device *dev, char *con_id);\n\nextern struct led_classdev *of_led_get(struct device_node *np, int index);\nextern void led_put(struct led_classdev *led_cdev);\nstruct led_classdev *__must_check devm_of_led_get(struct device *dev,\n\t\t\t\t\t\t  int index);\nstruct led_classdev *__must_check devm_of_led_get_optional(struct device *dev,\n\t\t\t\t\t\t  int index);\n\n \nvoid led_blink_set(struct led_classdev *led_cdev, unsigned long *delay_on,\n\t\t   unsigned long *delay_off);\n\n \nvoid led_blink_set_nosleep(struct led_classdev *led_cdev, unsigned long delay_on,\n\t\t\t   unsigned long delay_off);\n\n \nvoid led_blink_set_oneshot(struct led_classdev *led_cdev,\n\t\t\t   unsigned long *delay_on, unsigned long *delay_off,\n\t\t\t   int invert);\n \nvoid led_set_brightness(struct led_classdev *led_cdev, unsigned int brightness);\n\n \nint led_set_brightness_sync(struct led_classdev *led_cdev, unsigned int value);\n\n \nint led_update_brightness(struct led_classdev *led_cdev);\n\n \nu32 *led_get_default_pattern(struct led_classdev *led_cdev, unsigned int *size);\n\n \nvoid led_sysfs_disable(struct led_classdev *led_cdev);\n\n \nvoid led_sysfs_enable(struct led_classdev *led_cdev);\n\n \nint led_compose_name(struct device *dev, struct led_init_data *init_data,\n\t\t     char *led_classdev_name);\n\n \nstatic inline bool led_sysfs_is_disabled(struct led_classdev *led_cdev)\n{\n\treturn led_cdev->flags & LED_SYSFS_DISABLE;\n}\n\n \n \n#define DEFINE_LED_TRIGGER(x)\t\tstatic struct led_trigger *x;\n#define DEFINE_LED_TRIGGER_GLOBAL(x)\tstruct led_trigger *x;\n\n#ifdef CONFIG_LEDS_TRIGGERS\n\n#define TRIG_NAME_MAX 50\n\nstruct led_trigger {\n\t \n\tconst char\t *name;\n\tint\t\t(*activate)(struct led_classdev *led_cdev);\n\tvoid\t\t(*deactivate)(struct led_classdev *led_cdev);\n\n\t \n\tstruct led_hw_trigger_type *trigger_type;\n\n\t \n\tspinlock_t\t  leddev_list_lock;\n\tstruct list_head  led_cdevs;\n\n\t \n\tstruct list_head  next_trig;\n\n\tconst struct attribute_group **groups;\n};\n\n \n#define led_trigger_get_led(dev)\t((struct led_classdev *)dev_get_drvdata((dev)))\n#define led_trigger_get_drvdata(dev)\t(led_get_trigger_data(led_trigger_get_led(dev)))\n\n \nint led_trigger_register(struct led_trigger *trigger);\nvoid led_trigger_unregister(struct led_trigger *trigger);\nint devm_led_trigger_register(struct device *dev,\n\t\t\t\t     struct led_trigger *trigger);\n\nvoid led_trigger_register_simple(const char *name,\n\t\t\t\tstruct led_trigger **trigger);\nvoid led_trigger_unregister_simple(struct led_trigger *trigger);\nvoid led_trigger_event(struct led_trigger *trigger,  enum led_brightness event);\nvoid led_trigger_blink(struct led_trigger *trigger, unsigned long delay_on,\n\t\t       unsigned long delay_off);\nvoid led_trigger_blink_oneshot(struct led_trigger *trigger,\n\t\t\t       unsigned long delay_on,\n\t\t\t       unsigned long delay_off,\n\t\t\t       int invert);\nvoid led_trigger_set_default(struct led_classdev *led_cdev);\nint led_trigger_set(struct led_classdev *led_cdev, struct led_trigger *trigger);\nvoid led_trigger_remove(struct led_classdev *led_cdev);\n\nstatic inline void led_set_trigger_data(struct led_classdev *led_cdev,\n\t\t\t\t\tvoid *trigger_data)\n{\n\tled_cdev->trigger_data = trigger_data;\n}\n\nstatic inline void *led_get_trigger_data(struct led_classdev *led_cdev)\n{\n\treturn led_cdev->trigger_data;\n}\n\n \nvoid led_trigger_rename_static(const char *name, struct led_trigger *trig);\n\n#define module_led_trigger(__led_trigger) \\\n\tmodule_driver(__led_trigger, led_trigger_register, \\\n\t\t      led_trigger_unregister)\n\n#else\n\n \nstruct led_trigger {};\n\n \nstatic inline void led_trigger_register_simple(const char *name,\n\t\t\t\t\tstruct led_trigger **trigger) {}\nstatic inline void led_trigger_unregister_simple(struct led_trigger *trigger) {}\nstatic inline void led_trigger_event(struct led_trigger *trigger,\n\t\t\t\tenum led_brightness event) {}\nstatic inline void led_trigger_blink(struct led_trigger *trigger,\n\t\t\t\t      unsigned long delay_on,\n\t\t\t\t      unsigned long delay_off) {}\nstatic inline void led_trigger_blink_oneshot(struct led_trigger *trigger,\n\t\t\t\t      unsigned long delay_on,\n\t\t\t\t      unsigned long delay_off,\n\t\t\t\t      int invert) {}\nstatic inline void led_trigger_set_default(struct led_classdev *led_cdev) {}\nstatic inline int led_trigger_set(struct led_classdev *led_cdev,\n\t\t\t\t  struct led_trigger *trigger)\n{\n\treturn 0;\n}\n\nstatic inline void led_trigger_remove(struct led_classdev *led_cdev) {}\nstatic inline void led_set_trigger_data(struct led_classdev *led_cdev) {}\nstatic inline void *led_get_trigger_data(struct led_classdev *led_cdev)\n{\n\treturn NULL;\n}\n\n#endif  \n\n \nenum led_trigger_netdev_modes {\n\tTRIGGER_NETDEV_LINK = 0,\n\tTRIGGER_NETDEV_LINK_10,\n\tTRIGGER_NETDEV_LINK_100,\n\tTRIGGER_NETDEV_LINK_1000,\n\tTRIGGER_NETDEV_HALF_DUPLEX,\n\tTRIGGER_NETDEV_FULL_DUPLEX,\n\tTRIGGER_NETDEV_TX,\n\tTRIGGER_NETDEV_RX,\n\n\t \n\t__TRIGGER_NETDEV_MAX,\n};\n\n \n#ifdef CONFIG_LEDS_TRIGGER_DISK\nvoid ledtrig_disk_activity(bool write);\n#else\nstatic inline void ledtrig_disk_activity(bool write) {}\n#endif\n\n#ifdef CONFIG_LEDS_TRIGGER_MTD\nvoid ledtrig_mtd_activity(void);\n#else\nstatic inline void ledtrig_mtd_activity(void) {}\n#endif\n\n#if defined(CONFIG_LEDS_TRIGGER_CAMERA) || defined(CONFIG_LEDS_TRIGGER_CAMERA_MODULE)\nvoid ledtrig_flash_ctrl(bool on);\nvoid ledtrig_torch_ctrl(bool on);\n#else\nstatic inline void ledtrig_flash_ctrl(bool on) {}\nstatic inline void ledtrig_torch_ctrl(bool on) {}\n#endif\n\n \nstruct led_info {\n\tconst char\t*name;\n\tconst char\t*default_trigger;\n\tint\t\tflags;\n};\n\nstruct led_platform_data {\n\tint\t\tnum_leds;\n\tstruct led_info\t*leds;\n};\n\nstruct led_properties {\n\tu32\t\tcolor;\n\tbool\t\tcolor_present;\n\tconst char\t*function;\n\tu32\t\tfunc_enum;\n\tbool\t\tfunc_enum_present;\n\tconst char\t*label;\n};\n\ntypedef int (*gpio_blink_set_t)(struct gpio_desc *desc, int state,\n\t\t\t\tunsigned long *delay_on,\n\t\t\t\tunsigned long *delay_off);\n\n \nstruct gpio_led {\n\tconst char *name;\n\tconst char *default_trigger;\n\tunsigned \tgpio;\n\tunsigned\tactive_low : 1;\n\tunsigned\tretain_state_suspended : 1;\n\tunsigned\tpanic_indicator : 1;\n\tunsigned\tdefault_state : 2;\n\tunsigned\tretain_state_shutdown : 1;\n\t \n\tstruct gpio_desc *gpiod;\n};\n#define LEDS_GPIO_DEFSTATE_OFF\t\tLEDS_DEFSTATE_OFF\n#define LEDS_GPIO_DEFSTATE_ON\t\tLEDS_DEFSTATE_ON\n#define LEDS_GPIO_DEFSTATE_KEEP\t\tLEDS_DEFSTATE_KEEP\n\nstruct gpio_led_platform_data {\n\tint \t\tnum_leds;\n\tconst struct gpio_led *leds;\n\n#define GPIO_LED_NO_BLINK_LOW\t0\t \n#define GPIO_LED_NO_BLINK_HIGH\t1\t \n#define GPIO_LED_BLINK\t\t2\t \n\tgpio_blink_set_t\tgpio_blink_set;\n};\n\n#ifdef CONFIG_NEW_LEDS\nstruct platform_device *gpio_led_register_device(\n\t\tint id, const struct gpio_led_platform_data *pdata);\n#else\nstatic inline struct platform_device *gpio_led_register_device(\n\t\tint id, const struct gpio_led_platform_data *pdata)\n{\n\treturn 0;\n}\n#endif\n\nenum cpu_led_event {\n\tCPU_LED_IDLE_START,\t \n\tCPU_LED_IDLE_END,\t \n\tCPU_LED_START,\t\t \n\tCPU_LED_STOP,\t\t \n\tCPU_LED_HALTED,\t\t \n};\n#ifdef CONFIG_LEDS_TRIGGER_CPU\nvoid ledtrig_cpu(enum cpu_led_event evt);\n#else\nstatic inline void ledtrig_cpu(enum cpu_led_event evt)\n{\n\treturn;\n}\n#endif\n\n#ifdef CONFIG_LEDS_BRIGHTNESS_HW_CHANGED\nvoid led_classdev_notify_brightness_hw_changed(\n\tstruct led_classdev *led_cdev, unsigned int brightness);\n#else\nstatic inline void led_classdev_notify_brightness_hw_changed(\n\tstruct led_classdev *led_cdev, enum led_brightness brightness) { }\n#endif\n\n \nstruct led_pattern {\n\tu32 delta_t;\n\tint brightness;\n};\n\nenum led_audio {\n\tLED_AUDIO_MUTE,\t\t \n\tLED_AUDIO_MICMUTE,\t \n\tNUM_AUDIO_LEDS\n};\n\n#if IS_ENABLED(CONFIG_LEDS_TRIGGER_AUDIO)\nenum led_brightness ledtrig_audio_get(enum led_audio type);\nvoid ledtrig_audio_set(enum led_audio type, enum led_brightness state);\n#else\nstatic inline enum led_brightness ledtrig_audio_get(enum led_audio type)\n{\n\treturn LED_OFF;\n}\nstatic inline void ledtrig_audio_set(enum led_audio type,\n\t\t\t\t     enum led_brightness state)\n{\n}\n#endif\n\n#endif\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}