{
  "module_name": "fwnode.h",
  "hash_id": "89bb64544598ae2bf7322a2949d6c11bc6f4a5b8d8cfadacbdf3135da2e7c9e9",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/fwnode.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_FWNODE_H_\n#define _LINUX_FWNODE_H_\n\n#include <linux/types.h>\n#include <linux/list.h>\n#include <linux/bits.h>\n#include <linux/err.h>\n\nstruct fwnode_operations;\nstruct device;\n\n \n#define FWNODE_FLAG_LINKS_ADDED\t\t\tBIT(0)\n#define FWNODE_FLAG_NOT_DEVICE\t\t\tBIT(1)\n#define FWNODE_FLAG_INITIALIZED\t\t\tBIT(2)\n#define FWNODE_FLAG_NEEDS_CHILD_BOUND_ON_ADD\tBIT(3)\n#define FWNODE_FLAG_BEST_EFFORT\t\t\tBIT(4)\n#define FWNODE_FLAG_VISITED\t\t\tBIT(5)\n\nstruct fwnode_handle {\n\tstruct fwnode_handle *secondary;\n\tconst struct fwnode_operations *ops;\n\tstruct device *dev;\n\tstruct list_head suppliers;\n\tstruct list_head consumers;\n\tu8 flags;\n};\n\n \n#define FWLINK_FLAG_CYCLE\t\t\tBIT(0)\n\nstruct fwnode_link {\n\tstruct fwnode_handle *supplier;\n\tstruct list_head s_hook;\n\tstruct fwnode_handle *consumer;\n\tstruct list_head c_hook;\n\tu8 flags;\n};\n\n \nstruct fwnode_endpoint {\n\tunsigned int port;\n\tunsigned int id;\n\tconst struct fwnode_handle *local_fwnode;\n};\n\n \n#define SWNODE_GRAPH_PORT_NAME_FMT\t\t\"port@%u\"\n#define SWNODE_GRAPH_ENDPOINT_NAME_FMT\t\t\"endpoint@%u\"\n\n#define NR_FWNODE_REFERENCE_ARGS\t8\n\n \nstruct fwnode_reference_args {\n\tstruct fwnode_handle *fwnode;\n\tunsigned int nargs;\n\tu64 args[NR_FWNODE_REFERENCE_ARGS];\n};\n\n \nstruct fwnode_operations {\n\tstruct fwnode_handle *(*get)(struct fwnode_handle *fwnode);\n\tvoid (*put)(struct fwnode_handle *fwnode);\n\tbool (*device_is_available)(const struct fwnode_handle *fwnode);\n\tconst void *(*device_get_match_data)(const struct fwnode_handle *fwnode,\n\t\t\t\t\t     const struct device *dev);\n\tbool (*device_dma_supported)(const struct fwnode_handle *fwnode);\n\tenum dev_dma_attr\n\t(*device_get_dma_attr)(const struct fwnode_handle *fwnode);\n\tbool (*property_present)(const struct fwnode_handle *fwnode,\n\t\t\t\t const char *propname);\n\tint (*property_read_int_array)(const struct fwnode_handle *fwnode,\n\t\t\t\t       const char *propname,\n\t\t\t\t       unsigned int elem_size, void *val,\n\t\t\t\t       size_t nval);\n\tint\n\t(*property_read_string_array)(const struct fwnode_handle *fwnode_handle,\n\t\t\t\t      const char *propname, const char **val,\n\t\t\t\t      size_t nval);\n\tconst char *(*get_name)(const struct fwnode_handle *fwnode);\n\tconst char *(*get_name_prefix)(const struct fwnode_handle *fwnode);\n\tstruct fwnode_handle *(*get_parent)(const struct fwnode_handle *fwnode);\n\tstruct fwnode_handle *\n\t(*get_next_child_node)(const struct fwnode_handle *fwnode,\n\t\t\t       struct fwnode_handle *child);\n\tstruct fwnode_handle *\n\t(*get_named_child_node)(const struct fwnode_handle *fwnode,\n\t\t\t\tconst char *name);\n\tint (*get_reference_args)(const struct fwnode_handle *fwnode,\n\t\t\t\t  const char *prop, const char *nargs_prop,\n\t\t\t\t  unsigned int nargs, unsigned int index,\n\t\t\t\t  struct fwnode_reference_args *args);\n\tstruct fwnode_handle *\n\t(*graph_get_next_endpoint)(const struct fwnode_handle *fwnode,\n\t\t\t\t   struct fwnode_handle *prev);\n\tstruct fwnode_handle *\n\t(*graph_get_remote_endpoint)(const struct fwnode_handle *fwnode);\n\tstruct fwnode_handle *\n\t(*graph_get_port_parent)(struct fwnode_handle *fwnode);\n\tint (*graph_parse_endpoint)(const struct fwnode_handle *fwnode,\n\t\t\t\t    struct fwnode_endpoint *endpoint);\n\tvoid __iomem *(*iomap)(struct fwnode_handle *fwnode, int index);\n\tint (*irq_get)(const struct fwnode_handle *fwnode, unsigned int index);\n\tint (*add_links)(struct fwnode_handle *fwnode);\n};\n\n#define fwnode_has_op(fwnode, op)\t\t\t\t\t\\\n\t(!IS_ERR_OR_NULL(fwnode) && (fwnode)->ops && (fwnode)->ops->op)\n\n#define fwnode_call_int_op(fwnode, op, ...)\t\t\t\t\\\n\t(fwnode_has_op(fwnode, op) ?\t\t\t\t\t\\\n\t (fwnode)->ops->op(fwnode, ## __VA_ARGS__) : (IS_ERR_OR_NULL(fwnode) ? -EINVAL : -ENXIO))\n\n#define fwnode_call_bool_op(fwnode, op, ...)\t\t\\\n\t(fwnode_has_op(fwnode, op) ?\t\t\t\\\n\t (fwnode)->ops->op(fwnode, ## __VA_ARGS__) : false)\n\n#define fwnode_call_ptr_op(fwnode, op, ...)\t\t\\\n\t(fwnode_has_op(fwnode, op) ?\t\t\t\\\n\t (fwnode)->ops->op(fwnode, ## __VA_ARGS__) : NULL)\n#define fwnode_call_void_op(fwnode, op, ...)\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (fwnode_has_op(fwnode, op))\t\t\t\t\\\n\t\t\t(fwnode)->ops->op(fwnode, ## __VA_ARGS__);\t\\\n\t} while (false)\n#define get_dev_from_fwnode(fwnode)\tget_device((fwnode)->dev)\n\nstatic inline void fwnode_init(struct fwnode_handle *fwnode,\n\t\t\t       const struct fwnode_operations *ops)\n{\n\tfwnode->ops = ops;\n\tINIT_LIST_HEAD(&fwnode->consumers);\n\tINIT_LIST_HEAD(&fwnode->suppliers);\n}\n\nstatic inline void fwnode_dev_initialized(struct fwnode_handle *fwnode,\n\t\t\t\t\t  bool initialized)\n{\n\tif (IS_ERR_OR_NULL(fwnode))\n\t\treturn;\n\n\tif (initialized)\n\t\tfwnode->flags |= FWNODE_FLAG_INITIALIZED;\n\telse\n\t\tfwnode->flags &= ~FWNODE_FLAG_INITIALIZED;\n}\n\nextern bool fw_devlink_is_strict(void);\nint fwnode_link_add(struct fwnode_handle *con, struct fwnode_handle *sup);\nvoid fwnode_links_purge(struct fwnode_handle *fwnode);\nvoid fw_devlink_purge_absent_suppliers(struct fwnode_handle *fwnode);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}