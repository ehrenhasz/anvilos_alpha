{
  "module_name": "rcupdate_trace.h",
  "hash_id": "475eff60aec983101428955acd3df83a6ac8f60c10335f8758efc917efcd5033",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/rcupdate_trace.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_RCUPDATE_TRACE_H\n#define __LINUX_RCUPDATE_TRACE_H\n\n#include <linux/sched.h>\n#include <linux/rcupdate.h>\n\nextern struct lockdep_map rcu_trace_lock_map;\n\n#ifdef CONFIG_DEBUG_LOCK_ALLOC\n\nstatic inline int rcu_read_lock_trace_held(void)\n{\n\treturn lock_is_held(&rcu_trace_lock_map);\n}\n\n#else  \n\nstatic inline int rcu_read_lock_trace_held(void)\n{\n\treturn 1;\n}\n\n#endif  \n\n#ifdef CONFIG_TASKS_TRACE_RCU\n\nvoid rcu_read_unlock_trace_special(struct task_struct *t);\n\n \nstatic inline void rcu_read_lock_trace(void)\n{\n\tstruct task_struct *t = current;\n\n\tWRITE_ONCE(t->trc_reader_nesting, READ_ONCE(t->trc_reader_nesting) + 1);\n\tbarrier();\n\tif (IS_ENABLED(CONFIG_TASKS_TRACE_RCU_READ_MB) &&\n\t    t->trc_reader_special.b.need_mb)\n\t\tsmp_mb(); \n\trcu_lock_acquire(&rcu_trace_lock_map);\n}\n\n \nstatic inline void rcu_read_unlock_trace(void)\n{\n\tint nesting;\n\tstruct task_struct *t = current;\n\n\trcu_lock_release(&rcu_trace_lock_map);\n\tnesting = READ_ONCE(t->trc_reader_nesting) - 1;\n\tbarrier(); \n\t\n\tWRITE_ONCE(t->trc_reader_nesting, INT_MIN + nesting);\n\tif (likely(!READ_ONCE(t->trc_reader_special.s)) || nesting) {\n\t\tWRITE_ONCE(t->trc_reader_nesting, nesting);\n\t\treturn;  \n\t}\n\tWARN_ON_ONCE(nesting != 0);\n\trcu_read_unlock_trace_special(t);\n}\n\nvoid call_rcu_tasks_trace(struct rcu_head *rhp, rcu_callback_t func);\nvoid synchronize_rcu_tasks_trace(void);\nvoid rcu_barrier_tasks_trace(void);\nstruct task_struct *get_rcu_tasks_trace_gp_kthread(void);\n#else\n \nstatic inline void call_rcu_tasks_trace(struct rcu_head *rhp, rcu_callback_t func) { BUG(); }\nstatic inline void rcu_read_lock_trace(void) { BUG(); }\nstatic inline void rcu_read_unlock_trace(void) { BUG(); }\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}