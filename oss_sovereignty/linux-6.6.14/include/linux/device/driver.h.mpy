{
  "module_name": "driver.h",
  "hash_id": "aa3ce06dfd957843d2889d39744bfc191a6c1d7fd7d542db01164a2bf9411249",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/device/driver.h",
  "human_readable_source": "\n \n\n#ifndef _DEVICE_DRIVER_H_\n#define _DEVICE_DRIVER_H_\n\n#include <linux/kobject.h>\n#include <linux/klist.h>\n#include <linux/pm.h>\n#include <linux/device/bus.h>\n#include <linux/module.h>\n\n \nenum probe_type {\n\tPROBE_DEFAULT_STRATEGY,\n\tPROBE_PREFER_ASYNCHRONOUS,\n\tPROBE_FORCE_SYNCHRONOUS,\n};\n\n \nstruct device_driver {\n\tconst char\t\t*name;\n\tconst struct bus_type\t*bus;\n\n\tstruct module\t\t*owner;\n\tconst char\t\t*mod_name;\t \n\n\tbool suppress_bind_attrs;\t \n\tenum probe_type probe_type;\n\n\tconst struct of_device_id\t*of_match_table;\n\tconst struct acpi_device_id\t*acpi_match_table;\n\n\tint (*probe) (struct device *dev);\n\tvoid (*sync_state)(struct device *dev);\n\tint (*remove) (struct device *dev);\n\tvoid (*shutdown) (struct device *dev);\n\tint (*suspend) (struct device *dev, pm_message_t state);\n\tint (*resume) (struct device *dev);\n\tconst struct attribute_group **groups;\n\tconst struct attribute_group **dev_groups;\n\n\tconst struct dev_pm_ops *pm;\n\tvoid (*coredump) (struct device *dev);\n\n\tstruct driver_private *p;\n};\n\n\nint __must_check driver_register(struct device_driver *drv);\nvoid driver_unregister(struct device_driver *drv);\n\nstruct device_driver *driver_find(const char *name, const struct bus_type *bus);\nbool __init driver_probe_done(void);\nvoid wait_for_device_probe(void);\nvoid __init wait_for_init_devices_probe(void);\n\n \n\nstruct driver_attribute {\n\tstruct attribute attr;\n\tssize_t (*show)(struct device_driver *driver, char *buf);\n\tssize_t (*store)(struct device_driver *driver, const char *buf,\n\t\t\t size_t count);\n};\n\n#define DRIVER_ATTR_RW(_name) \\\n\tstruct driver_attribute driver_attr_##_name = __ATTR_RW(_name)\n#define DRIVER_ATTR_RO(_name) \\\n\tstruct driver_attribute driver_attr_##_name = __ATTR_RO(_name)\n#define DRIVER_ATTR_WO(_name) \\\n\tstruct driver_attribute driver_attr_##_name = __ATTR_WO(_name)\n\nint __must_check driver_create_file(struct device_driver *driver,\n\t\t\t\t    const struct driver_attribute *attr);\nvoid driver_remove_file(struct device_driver *driver,\n\t\t\tconst struct driver_attribute *attr);\n\nint driver_set_override(struct device *dev, const char **override,\n\t\t\tconst char *s, size_t len);\nint __must_check driver_for_each_device(struct device_driver *drv, struct device *start,\n\t\t\t\t\tvoid *data, int (*fn)(struct device *dev, void *));\nstruct device *driver_find_device(struct device_driver *drv,\n\t\t\t\t  struct device *start, const void *data,\n\t\t\t\t  int (*match)(struct device *dev, const void *data));\n\n \nstatic inline struct device *driver_find_device_by_name(struct device_driver *drv,\n\t\t\t\t\t\t\tconst char *name)\n{\n\treturn driver_find_device(drv, NULL, name, device_match_name);\n}\n\n \nstatic inline struct device *\ndriver_find_device_by_of_node(struct device_driver *drv,\n\t\t\t      const struct device_node *np)\n{\n\treturn driver_find_device(drv, NULL, np, device_match_of_node);\n}\n\n \nstatic inline struct device *\ndriver_find_device_by_fwnode(struct device_driver *drv,\n\t\t\t     const struct fwnode_handle *fwnode)\n{\n\treturn driver_find_device(drv, NULL, fwnode, device_match_fwnode);\n}\n\n \nstatic inline struct device *driver_find_device_by_devt(struct device_driver *drv,\n\t\t\t\t\t\t\tdev_t devt)\n{\n\treturn driver_find_device(drv, NULL, &devt, device_match_devt);\n}\n\nstatic inline struct device *driver_find_next_device(struct device_driver *drv,\n\t\t\t\t\t\t     struct device *start)\n{\n\treturn driver_find_device(drv, start, NULL, device_match_any);\n}\n\n#ifdef CONFIG_ACPI\n \nstatic inline struct device *\ndriver_find_device_by_acpi_dev(struct device_driver *drv,\n\t\t\t       const struct acpi_device *adev)\n{\n\treturn driver_find_device(drv, NULL, adev, device_match_acpi_dev);\n}\n#else\nstatic inline struct device *\ndriver_find_device_by_acpi_dev(struct device_driver *drv, const void *adev)\n{\n\treturn NULL;\n}\n#endif\n\nvoid driver_deferred_probe_add(struct device *dev);\nint driver_deferred_probe_check_state(struct device *dev);\nvoid driver_init(void);\n\n \n#define module_driver(__driver, __register, __unregister, ...) \\\nstatic int __init __driver##_init(void) \\\n{ \\\n\treturn __register(&(__driver) , ##__VA_ARGS__); \\\n} \\\nmodule_init(__driver##_init); \\\nstatic void __exit __driver##_exit(void) \\\n{ \\\n\t__unregister(&(__driver) , ##__VA_ARGS__); \\\n} \\\nmodule_exit(__driver##_exit);\n\n \n#define builtin_driver(__driver, __register, ...) \\\nstatic int __init __driver##_init(void) \\\n{ \\\n\treturn __register(&(__driver) , ##__VA_ARGS__); \\\n} \\\ndevice_initcall(__driver##_init);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}