{
  "module_name": "log2.h",
  "hash_id": "b777a7806bd66b526b71f77c723fc207ac4e09cb12cfa258cb97dbe18a836e16",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/log2.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_LOG2_H\n#define _LINUX_LOG2_H\n\n#include <linux/types.h>\n#include <linux/bitops.h>\n\n \n#ifndef CONFIG_ARCH_HAS_ILOG2_U32\nstatic __always_inline __attribute__((const))\nint __ilog2_u32(u32 n)\n{\n\treturn fls(n) - 1;\n}\n#endif\n\n#ifndef CONFIG_ARCH_HAS_ILOG2_U64\nstatic __always_inline __attribute__((const))\nint __ilog2_u64(u64 n)\n{\n\treturn fls64(n) - 1;\n}\n#endif\n\n \nstatic inline __attribute__((const))\nbool is_power_of_2(unsigned long n)\n{\n\treturn (n != 0 && ((n & (n - 1)) == 0));\n}\n\n \nstatic inline __attribute__((const))\nunsigned long __roundup_pow_of_two(unsigned long n)\n{\n\treturn 1UL << fls_long(n - 1);\n}\n\n \nstatic inline __attribute__((const))\nunsigned long __rounddown_pow_of_two(unsigned long n)\n{\n\treturn 1UL << (fls_long(n) - 1);\n}\n\n \n#define const_ilog2(n)\t\t\t\t\\\n(\t\t\t\t\t\t\\\n\t__builtin_constant_p(n) ? (\t\t\\\n\t\t(n) < 2 ? 0 :\t\t\t\\\n\t\t(n) & (1ULL << 63) ? 63 :\t\\\n\t\t(n) & (1ULL << 62) ? 62 :\t\\\n\t\t(n) & (1ULL << 61) ? 61 :\t\\\n\t\t(n) & (1ULL << 60) ? 60 :\t\\\n\t\t(n) & (1ULL << 59) ? 59 :\t\\\n\t\t(n) & (1ULL << 58) ? 58 :\t\\\n\t\t(n) & (1ULL << 57) ? 57 :\t\\\n\t\t(n) & (1ULL << 56) ? 56 :\t\\\n\t\t(n) & (1ULL << 55) ? 55 :\t\\\n\t\t(n) & (1ULL << 54) ? 54 :\t\\\n\t\t(n) & (1ULL << 53) ? 53 :\t\\\n\t\t(n) & (1ULL << 52) ? 52 :\t\\\n\t\t(n) & (1ULL << 51) ? 51 :\t\\\n\t\t(n) & (1ULL << 50) ? 50 :\t\\\n\t\t(n) & (1ULL << 49) ? 49 :\t\\\n\t\t(n) & (1ULL << 48) ? 48 :\t\\\n\t\t(n) & (1ULL << 47) ? 47 :\t\\\n\t\t(n) & (1ULL << 46) ? 46 :\t\\\n\t\t(n) & (1ULL << 45) ? 45 :\t\\\n\t\t(n) & (1ULL << 44) ? 44 :\t\\\n\t\t(n) & (1ULL << 43) ? 43 :\t\\\n\t\t(n) & (1ULL << 42) ? 42 :\t\\\n\t\t(n) & (1ULL << 41) ? 41 :\t\\\n\t\t(n) & (1ULL << 40) ? 40 :\t\\\n\t\t(n) & (1ULL << 39) ? 39 :\t\\\n\t\t(n) & (1ULL << 38) ? 38 :\t\\\n\t\t(n) & (1ULL << 37) ? 37 :\t\\\n\t\t(n) & (1ULL << 36) ? 36 :\t\\\n\t\t(n) & (1ULL << 35) ? 35 :\t\\\n\t\t(n) & (1ULL << 34) ? 34 :\t\\\n\t\t(n) & (1ULL << 33) ? 33 :\t\\\n\t\t(n) & (1ULL << 32) ? 32 :\t\\\n\t\t(n) & (1ULL << 31) ? 31 :\t\\\n\t\t(n) & (1ULL << 30) ? 30 :\t\\\n\t\t(n) & (1ULL << 29) ? 29 :\t\\\n\t\t(n) & (1ULL << 28) ? 28 :\t\\\n\t\t(n) & (1ULL << 27) ? 27 :\t\\\n\t\t(n) & (1ULL << 26) ? 26 :\t\\\n\t\t(n) & (1ULL << 25) ? 25 :\t\\\n\t\t(n) & (1ULL << 24) ? 24 :\t\\\n\t\t(n) & (1ULL << 23) ? 23 :\t\\\n\t\t(n) & (1ULL << 22) ? 22 :\t\\\n\t\t(n) & (1ULL << 21) ? 21 :\t\\\n\t\t(n) & (1ULL << 20) ? 20 :\t\\\n\t\t(n) & (1ULL << 19) ? 19 :\t\\\n\t\t(n) & (1ULL << 18) ? 18 :\t\\\n\t\t(n) & (1ULL << 17) ? 17 :\t\\\n\t\t(n) & (1ULL << 16) ? 16 :\t\\\n\t\t(n) & (1ULL << 15) ? 15 :\t\\\n\t\t(n) & (1ULL << 14) ? 14 :\t\\\n\t\t(n) & (1ULL << 13) ? 13 :\t\\\n\t\t(n) & (1ULL << 12) ? 12 :\t\\\n\t\t(n) & (1ULL << 11) ? 11 :\t\\\n\t\t(n) & (1ULL << 10) ? 10 :\t\\\n\t\t(n) & (1ULL <<  9) ?  9 :\t\\\n\t\t(n) & (1ULL <<  8) ?  8 :\t\\\n\t\t(n) & (1ULL <<  7) ?  7 :\t\\\n\t\t(n) & (1ULL <<  6) ?  6 :\t\\\n\t\t(n) & (1ULL <<  5) ?  5 :\t\\\n\t\t(n) & (1ULL <<  4) ?  4 :\t\\\n\t\t(n) & (1ULL <<  3) ?  3 :\t\\\n\t\t(n) & (1ULL <<  2) ?  2 :\t\\\n\t\t1) :\t\t\t\t\\\n\t-1)\n\n \n#define ilog2(n) \\\n( \\\n\t__builtin_constant_p(n) ?\t\\\n\t((n) < 2 ? 0 :\t\t\t\\\n\t 63 - __builtin_clzll(n)) :\t\\\n\t(sizeof(n) <= 4) ?\t\t\\\n\t__ilog2_u32(n) :\t\t\\\n\t__ilog2_u64(n)\t\t\t\\\n )\n\n \n#define roundup_pow_of_two(n)\t\t\t\\\n(\t\t\t\t\t\t\\\n\t__builtin_constant_p(n) ? (\t\t\\\n\t\t((n) == 1) ? 1 :\t\t\\\n\t\t(1UL << (ilog2((n) - 1) + 1))\t\\\n\t\t\t\t   ) :\t\t\\\n\t__roundup_pow_of_two(n)\t\t\t\\\n )\n\n \n#define rounddown_pow_of_two(n)\t\t\t\\\n(\t\t\t\t\t\t\\\n\t__builtin_constant_p(n) ? (\t\t\\\n\t\t(1UL << ilog2(n))) :\t\t\\\n\t__rounddown_pow_of_two(n)\t\t\\\n )\n\nstatic inline __attribute_const__\nint __order_base_2(unsigned long n)\n{\n\treturn n > 1 ? ilog2(n - 1) + 1 : 0;\n}\n\n \n#define order_base_2(n)\t\t\t\t\\\n(\t\t\t\t\t\t\\\n\t__builtin_constant_p(n) ? (\t\t\\\n\t\t((n) == 0 || (n) == 1) ? 0 :\t\\\n\t\tilog2((n) - 1) + 1) :\t\t\\\n\t__order_base_2(n)\t\t\t\\\n)\n\nstatic inline __attribute__((const))\nint __bits_per(unsigned long n)\n{\n\tif (n < 2)\n\t\treturn 1;\n\tif (is_power_of_2(n))\n\t\treturn order_base_2(n) + 1;\n\treturn order_base_2(n);\n}\n\n \n#define bits_per(n)\t\t\t\t\\\n(\t\t\t\t\t\t\\\n\t__builtin_constant_p(n) ? (\t\t\\\n\t\t((n) == 0 || (n) == 1)\t\t\\\n\t\t\t? 1 : ilog2(n) + 1\t\\\n\t) :\t\t\t\t\t\\\n\t__bits_per(n)\t\t\t\t\\\n)\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}