{
  "module_name": "pds_adminq.h",
  "hash_id": "ada44516d7623486c37765d3e012ee34a1ae83af085746c71a175ebddefd0451",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pds/pds_adminq.h",
  "human_readable_source": " \n \n\n#ifndef _PDS_CORE_ADMINQ_H_\n#define _PDS_CORE_ADMINQ_H_\n\n#define PDSC_ADMINQ_MAX_POLL_INTERVAL\t256\n\nenum pds_core_adminq_flags {\n\tPDS_AQ_FLAG_FASTPOLL\t= BIT(1),\t \n};\n\n \nenum pds_core_adminq_opcode {\n\tPDS_AQ_CMD_NOP\t\t\t= 0,\n\n\t \n\tPDS_AQ_CMD_CLIENT_REG\t\t= 6,\n\tPDS_AQ_CMD_CLIENT_UNREG\t\t= 7,\n\tPDS_AQ_CMD_CLIENT_CMD\t\t= 8,\n\n\t \n\tPDS_AQ_CMD_LIF_IDENTIFY\t\t= 20,\n\tPDS_AQ_CMD_LIF_INIT\t\t= 21,\n\tPDS_AQ_CMD_LIF_RESET\t\t= 22,\n\tPDS_AQ_CMD_LIF_GETATTR\t\t= 23,\n\tPDS_AQ_CMD_LIF_SETATTR\t\t= 24,\n\tPDS_AQ_CMD_LIF_SETPHC\t\t= 25,\n\n\tPDS_AQ_CMD_RX_MODE_SET\t\t= 30,\n\tPDS_AQ_CMD_RX_FILTER_ADD\t= 31,\n\tPDS_AQ_CMD_RX_FILTER_DEL\t= 32,\n\n\t \n\tPDS_AQ_CMD_Q_IDENTIFY\t\t= 39,\n\tPDS_AQ_CMD_Q_INIT\t\t= 40,\n\tPDS_AQ_CMD_Q_CONTROL\t\t= 41,\n\n\t \n\tPDS_AQ_CMD_VF_GETATTR\t\t= 60,\n\tPDS_AQ_CMD_VF_SETATTR\t\t= 61,\n};\n\n \nenum pds_core_notifyq_opcode {\n\tPDS_EVENT_LINK_CHANGE\t\t= 1,\n\tPDS_EVENT_RESET\t\t\t= 2,\n\tPDS_EVENT_XCVR\t\t\t= 5,\n\tPDS_EVENT_CLIENT\t\t= 6,\n};\n\n#define PDS_COMP_COLOR_MASK  0x80\n\n \nstruct pds_core_notifyq_event {\n\t__le64 eid;\n\t__le16 ecode;\n};\n\n \nstruct pds_core_link_change_event {\n\t__le64 eid;\n\t__le16 ecode;\n\t__le16 link_status;\n\t__le32 link_speed;\t \n};\n\n \nstruct pds_core_reset_event {\n\t__le64 eid;\n\t__le16 ecode;\n\tu8     reset_code;\n\tu8     state;\n};\n\n \nstruct pds_core_client_event {\n\t__le64 eid;\n\t__le16 ecode;\n\t__le16 client_id;\n\tu8     client_event[54];\n};\n\n \nstruct pds_core_notifyq_cmd {\n\t__le32 data;\t \n};\n\n \nunion pds_core_notifyq_comp {\n\tstruct {\n\t\t__le64 eid;\n\t\t__le16 ecode;\n\t};\n\tstruct pds_core_notifyq_event     event;\n\tstruct pds_core_link_change_event link_change;\n\tstruct pds_core_reset_event       reset;\n\tu8     data[64];\n};\n\n#define PDS_DEVNAME_LEN\t\t32\n \nstruct pds_core_client_reg_cmd {\n\tu8     opcode;\n\tu8     rsvd[3];\n\tchar   devname[PDS_DEVNAME_LEN];\n\tu8     vif_type;\n};\n\n \nstruct pds_core_client_reg_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\t__le16 client_id;\n\tu8     rsvd1[9];\n\tu8     color;\n};\n\n \nstruct pds_core_client_unreg_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 client_id;\n};\n\n \nstruct pds_core_client_request_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 client_id;\n\tu8     client_cmd[60];\n};\n\n#define PDS_CORE_MAX_FRAGS\t\t16\n\n#define PDS_CORE_QCQ_F_INITED\t\tBIT(0)\n#define PDS_CORE_QCQ_F_SG\t\tBIT(1)\n#define PDS_CORE_QCQ_F_INTR\t\tBIT(2)\n#define PDS_CORE_QCQ_F_TX_STATS\t\tBIT(3)\n#define PDS_CORE_QCQ_F_RX_STATS\t\tBIT(4)\n#define PDS_CORE_QCQ_F_NOTIFYQ\t\tBIT(5)\n#define PDS_CORE_QCQ_F_CMB_RINGS\tBIT(6)\n#define PDS_CORE_QCQ_F_CORE\t\tBIT(7)\n\nenum pds_core_lif_type {\n\tPDS_CORE_LIF_TYPE_DEFAULT = 0,\n};\n\n#define PDS_CORE_IFNAMSIZ\t\t16\n\n \nenum pds_core_logical_qtype {\n\tPDS_CORE_QTYPE_ADMINQ  = 0,\n\tPDS_CORE_QTYPE_NOTIFYQ = 1,\n\tPDS_CORE_QTYPE_RXQ     = 2,\n\tPDS_CORE_QTYPE_TXQ     = 3,\n\tPDS_CORE_QTYPE_EQ      = 4,\n\n\tPDS_CORE_QTYPE_MAX     = 16    \n};\n\n \nunion pds_core_lif_config {\n\tstruct {\n\t\tu8     state;\n\t\tu8     rsvd[3];\n\t\tchar   name[PDS_CORE_IFNAMSIZ];\n\t\tu8     rsvd2[12];\n\t\t__le64 features;\n\t\t__le32 queue_count[PDS_CORE_QTYPE_MAX];\n\t} __packed;\n\t__le32 words[64];\n};\n\n \nstruct pds_core_lif_status {\n\t__le64 eid;\n\tu8     rsvd[56];\n};\n\n \nstruct pds_core_lif_info {\n\tunion pds_core_lif_config config;\n\tstruct pds_core_lif_status status;\n};\n\n \nstruct pds_core_lif_identity {\n\t__le64 features;\n\tu8     version;\n\tu8     hw_index;\n\tu8     rsvd[2];\n\t__le32 max_nb_sessions;\n\tu8     rsvd2[120];\n\tunion pds_core_lif_config config;\n};\n\n \nstruct pds_core_lif_identify_cmd {\n\tu8     opcode;\n\tu8     type;\n\t__le16 client_id;\n\tu8     ver;\n\tu8     rsvd[3];\n\t__le64 ident_pa;\n};\n\n \nstruct pds_core_lif_identify_comp {\n\tu8     status;\n\tu8     ver;\n\t__le16 bytes;\n\tu8     rsvd[11];\n\tu8     color;\n};\n\n \nstruct pds_core_lif_init_cmd {\n\tu8     opcode;\n\tu8     type;\n\t__le16 client_id;\n\t__le32 rsvd;\n\t__le64 info_pa;\n};\n\n \nstruct pds_core_lif_init_comp {\n\tu8 status;\n\tu8 rsvd;\n\t__le16 hw_index;\n\tu8     rsvd1[11];\n\tu8     color;\n};\n\n \nstruct pds_core_lif_reset_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 client_id;\n};\n\n \nenum pds_core_lif_attr {\n\tPDS_CORE_LIF_ATTR_STATE\t\t= 0,\n\tPDS_CORE_LIF_ATTR_NAME\t\t= 1,\n\tPDS_CORE_LIF_ATTR_FEATURES\t= 4,\n\tPDS_CORE_LIF_ATTR_STATS_CTRL\t= 6,\n};\n\n \nstruct pds_core_lif_setattr_cmd {\n\tu8     opcode;\n\tu8     attr;\n\t__le16 client_id;\n\tunion {\n\t\tu8      state;\n\t\tchar    name[PDS_CORE_IFNAMSIZ];\n\t\t__le64  features;\n\t\tu8      stats_ctl;\n\t\tu8      rsvd[60];\n\t} __packed;\n};\n\n \nstruct pds_core_lif_setattr_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\tunion {\n\t\t__le64  features;\n\t\tu8      rsvd2[11];\n\t} __packed;\n\tu8     color;\n};\n\n \nstruct pds_core_lif_getattr_cmd {\n\tu8     opcode;\n\tu8     attr;\n\t__le16 client_id;\n};\n\n \nstruct pds_core_lif_getattr_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\tunion {\n\t\tu8      state;\n\t\t__le64  features;\n\t\tu8      rsvd2[11];\n\t} __packed;\n\tu8     color;\n};\n\n \nstruct pds_core_q_identity {\n\tu8      version;\n\tu8      supported;\n\tu8      rsvd[6];\n#define PDS_CORE_QIDENT_F_CQ\t0x01\t \n\t__le64  features;\n\t__le16  desc_sz;\n\t__le16  comp_sz;\n\tu8      rsvd2[6];\n};\n\n \nstruct pds_core_q_identify_cmd {\n\tu8     opcode;\n\tu8     type;\n\t__le16 client_id;\n\tu8     ver;\n\tu8     rsvd[3];\n\t__le64 ident_pa;\n};\n\n \nstruct pds_core_q_identify_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\tu8     ver;\n\tu8     rsvd1[10];\n\tu8     color;\n};\n\n \nstruct pds_core_q_init_cmd {\n\tu8     opcode;\n\tu8     type;\n\t__le16 client_id;\n\tu8     ver;\n\tu8     rsvd[3];\n\t__le32 index;\n\t__le16 pid;\n\t__le16 intr_index;\n\t__le16 flags;\n#define PDS_CORE_QINIT_F_IRQ\t0x01\t \n#define PDS_CORE_QINIT_F_ENA\t0x02\t \n\tu8     cos;\n#define PDS_CORE_QSIZE_MIN_LG2\t2\n#define PDS_CORE_QSIZE_MAX_LG2\t12\n\tu8     ring_size;\n\t__le64 ring_base;\n\t__le64 cq_ring_base;\n} __packed;\n\n \nstruct pds_core_q_init_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\t__le32 hw_index;\n\tu8     hw_type;\n\tu8     rsvd2[6];\n\tu8     color;\n};\n\n \nenum pds_vdpa_cmd_opcode {\n\tPDS_VDPA_CMD_INIT\t\t= 48,\n\tPDS_VDPA_CMD_IDENT\t\t= 49,\n\tPDS_VDPA_CMD_RESET\t\t= 51,\n\tPDS_VDPA_CMD_VQ_RESET\t\t= 52,\n\tPDS_VDPA_CMD_VQ_INIT\t\t= 53,\n\tPDS_VDPA_CMD_STATUS_UPDATE\t= 54,\n\tPDS_VDPA_CMD_SET_FEATURES\t= 55,\n\tPDS_VDPA_CMD_SET_ATTR\t\t= 56,\n};\n\n \nstruct pds_vdpa_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n};\n\n \nstruct pds_vdpa_init_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n};\n\n \nstruct pds_vdpa_ident {\n\t__le64 hw_features;\n\t__le16 max_vqs;\n\t__le16 max_qlen;\n\t__le16 min_qlen;\n};\n\n \nstruct pds_vdpa_ident_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\t__le32 len;\n\t__le64 ident_pa;\n};\n\n \nstruct pds_vdpa_status_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n\tu8     status;\n};\n\n \nenum pds_vdpa_attr {\n\tPDS_VDPA_ATTR_MAC          = 1,\n\tPDS_VDPA_ATTR_MAX_VQ_PAIRS = 2,\n};\n\n \nstruct pds_vdpa_setattr_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n\tu8     attr;\n\tu8     pad[3];\n\tunion {\n\t\tu8 mac[6];\n\t\t__le16 max_vq_pairs;\n\t} __packed;\n};\n\n \nstruct pds_vdpa_vq_init_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n\t__le16 qid;\n\t__le16 len;\n\t__le64 desc_addr;\n\t__le64 avail_addr;\n\t__le64 used_addr;\n\t__le16 intr_index;\n\t__le16 avail_index;\n\t__le16 used_index;\n};\n\n \nstruct pds_vdpa_vq_init_comp {\n\tu8     status;\n\tu8     hw_qtype;\n\t__le16 hw_qindex;\n\tu8     rsvd[11];\n\tu8     color;\n};\n\n \nstruct pds_vdpa_vq_reset_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n\t__le16 qid;\n};\n\n \nstruct pds_vdpa_vq_reset_comp {\n\tu8     status;\n\tu8     rsvd0;\n\t__le16 avail_index;\n\t__le16 used_index;\n\tu8     rsvd[9];\n\tu8     color;\n};\n\n \nstruct pds_vdpa_set_features_cmd {\n\tu8     opcode;\n\tu8     vdpa_index;\n\t__le16 vf_id;\n\t__le32 rsvd;\n\t__le64 features;\n};\n\n#define PDS_LM_DEVICE_STATE_LENGTH\t\t65536\n#define PDS_LM_CHECK_DEVICE_STATE_LENGTH(X) \\\n\t\t\tPDS_CORE_SIZE_CHECK(union, PDS_LM_DEVICE_STATE_LENGTH, X)\n\n \nenum pds_lm_cmd_opcode {\n\tPDS_LM_CMD_HOST_VF_STATUS  = 1,\n\n\t \n\tPDS_LM_CMD_STATE_SIZE\t   = 16,\n\tPDS_LM_CMD_SUSPEND         = 18,\n\tPDS_LM_CMD_SUSPEND_STATUS  = 19,\n\tPDS_LM_CMD_RESUME          = 20,\n\tPDS_LM_CMD_SAVE            = 21,\n\tPDS_LM_CMD_RESTORE         = 22,\n\n\t \n\tPDS_LM_CMD_DIRTY_STATUS    = 32,\n\tPDS_LM_CMD_DIRTY_ENABLE    = 33,\n\tPDS_LM_CMD_DIRTY_DISABLE   = 34,\n\tPDS_LM_CMD_DIRTY_READ_SEQ  = 35,\n\tPDS_LM_CMD_DIRTY_WRITE_ACK = 36,\n};\n\n \nstruct pds_lm_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     rsvd2[56];\n};\n\n \nstruct pds_lm_state_size_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n};\n\n \nstruct pds_lm_state_size_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\tunion {\n\t\t__le64 size;\n\t\tu8     rsvd2[11];\n\t} __packed;\n\tu8     color;\n};\n\nenum pds_lm_suspend_resume_type {\n\tPDS_LM_SUSPEND_RESUME_TYPE_FULL = 0,\n\tPDS_LM_SUSPEND_RESUME_TYPE_P2P = 1,\n};\n\n \nstruct pds_lm_suspend_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     type;\n};\n\n \nstruct pds_lm_suspend_status_cmd {\n\tu8 opcode;\n\tu8 rsvd;\n\t__le16 vf_id;\n\tu8 type;\n};\n\n \nstruct pds_lm_resume_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     type;\n};\n\n \nstruct pds_lm_sg_elem {\n\t__le64 addr;\n\t__le32 len;\n\t__le16 rsvd[2];\n};\n\n \nstruct pds_lm_save_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     rsvd2[4];\n\t__le64 sgl_addr;\n\t__le32 num_sge;\n} __packed;\n\n \nstruct pds_lm_restore_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     rsvd2[4];\n\t__le64 sgl_addr;\n\t__le32 num_sge;\n} __packed;\n\n \nunion pds_lm_dev_state {\n\t__le32 words[PDS_LM_DEVICE_STATE_LENGTH / sizeof(__le32)];\n};\n\nenum pds_lm_host_vf_status {\n\tPDS_LM_STA_NONE = 0,\n\tPDS_LM_STA_IN_PROGRESS,\n\tPDS_LM_STA_MAX,\n};\n\n \nstruct pds_lm_dirty_region_info {\n\t__le64 dma_base;\n\t__le32 page_count;\n\tu8     page_size_log2;\n\tu8     rsvd[3];\n};\n\n \nstruct pds_lm_dirty_status_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     max_regions;\n\tu8     rsvd2[3];\n\t__le64 regions_dma;\n} __packed;\n\n \nenum pds_lm_dirty_bmp_type {\n\tPDS_LM_DIRTY_BMP_TYPE_NONE     = 0,\n\tPDS_LM_DIRTY_BMP_TYPE_SEQ_ACK  = 1,\n};\n\n \nstruct pds_lm_dirty_status_comp {\n\tu8     status;\n\tu8     rsvd;\n\t__le16 comp_index;\n\tu8     max_regions;\n\tu8     num_regions;\n\tu8     bmp_type;\n\tu8     rsvd2;\n\t__le32 bmp_type_mask;\n\tu8     rsvd3[3];\n\tu8     color;\n};\n\n \nstruct pds_lm_dirty_enable_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     bmp_type;\n\tu8     num_regions;\n\tu8     rsvd2[2];\n\t__le64 regions_dma;\n} __packed;\n\n \nstruct pds_lm_dirty_disable_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n};\n\n \nstruct pds_lm_dirty_seq_ack_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\t__le32 off_bytes;\n\t__le32 len_bytes;\n\t__le16 num_sge;\n\tu8     rsvd2[2];\n\t__le64 sgl_addr;\n} __packed;\n\n \nstruct pds_lm_host_vf_status_cmd {\n\tu8     opcode;\n\tu8     rsvd;\n\t__le16 vf_id;\n\tu8     status;\n};\n\nunion pds_core_adminq_cmd {\n\tu8     opcode;\n\tu8     bytes[64];\n\n\tstruct pds_core_client_reg_cmd     client_reg;\n\tstruct pds_core_client_unreg_cmd   client_unreg;\n\tstruct pds_core_client_request_cmd client_request;\n\n\tstruct pds_core_lif_identify_cmd  lif_ident;\n\tstruct pds_core_lif_init_cmd      lif_init;\n\tstruct pds_core_lif_reset_cmd     lif_reset;\n\tstruct pds_core_lif_setattr_cmd   lif_setattr;\n\tstruct pds_core_lif_getattr_cmd   lif_getattr;\n\n\tstruct pds_core_q_identify_cmd    q_ident;\n\tstruct pds_core_q_init_cmd        q_init;\n\n\tstruct pds_vdpa_cmd\t\t  vdpa;\n\tstruct pds_vdpa_init_cmd\t  vdpa_init;\n\tstruct pds_vdpa_ident_cmd\t  vdpa_ident;\n\tstruct pds_vdpa_status_cmd\t  vdpa_status;\n\tstruct pds_vdpa_setattr_cmd\t  vdpa_setattr;\n\tstruct pds_vdpa_set_features_cmd  vdpa_set_features;\n\tstruct pds_vdpa_vq_init_cmd\t  vdpa_vq_init;\n\tstruct pds_vdpa_vq_reset_cmd\t  vdpa_vq_reset;\n\n\tstruct pds_lm_suspend_cmd\t  lm_suspend;\n\tstruct pds_lm_suspend_status_cmd  lm_suspend_status;\n\tstruct pds_lm_resume_cmd\t  lm_resume;\n\tstruct pds_lm_state_size_cmd\t  lm_state_size;\n\tstruct pds_lm_save_cmd\t\t  lm_save;\n\tstruct pds_lm_restore_cmd\t  lm_restore;\n\tstruct pds_lm_host_vf_status_cmd  lm_host_vf_status;\n\tstruct pds_lm_dirty_status_cmd\t  lm_dirty_status;\n\tstruct pds_lm_dirty_enable_cmd\t  lm_dirty_enable;\n\tstruct pds_lm_dirty_disable_cmd\t  lm_dirty_disable;\n\tstruct pds_lm_dirty_seq_ack_cmd\t  lm_dirty_seq_ack;\n};\n\nunion pds_core_adminq_comp {\n\tstruct {\n\t\tu8     status;\n\t\tu8     rsvd;\n\t\t__le16 comp_index;\n\t\tu8     rsvd2[11];\n\t\tu8     color;\n\t};\n\tu32    words[4];\n\n\tstruct pds_core_client_reg_comp   client_reg;\n\n\tstruct pds_core_lif_identify_comp lif_ident;\n\tstruct pds_core_lif_init_comp     lif_init;\n\tstruct pds_core_lif_setattr_comp  lif_setattr;\n\tstruct pds_core_lif_getattr_comp  lif_getattr;\n\n\tstruct pds_core_q_identify_comp   q_ident;\n\tstruct pds_core_q_init_comp       q_init;\n\n\tstruct pds_vdpa_vq_init_comp\t  vdpa_vq_init;\n\tstruct pds_vdpa_vq_reset_comp\t  vdpa_vq_reset;\n\n\tstruct pds_lm_state_size_comp\t  lm_state_size;\n\tstruct pds_lm_dirty_status_comp\t  lm_dirty_status;\n};\n\n#ifndef __CHECKER__\nstatic_assert(sizeof(union pds_core_adminq_cmd) == 64);\nstatic_assert(sizeof(union pds_core_adminq_comp) == 16);\nstatic_assert(sizeof(union pds_core_notifyq_comp) == 64);\n#endif  \n\n \nstatic inline bool pdsc_color_match(u8 color, bool done_color)\n{\n\treturn (!!(color & PDS_COMP_COLOR_MASK)) == done_color;\n}\n\nstruct pdsc;\nint pdsc_adminq_post(struct pdsc *pdsc,\n\t\t     union pds_core_adminq_cmd *cmd,\n\t\t     union pds_core_adminq_comp *comp,\n\t\t     bool fast_poll);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}