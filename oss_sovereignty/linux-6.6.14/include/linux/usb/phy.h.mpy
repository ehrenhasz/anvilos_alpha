{
  "module_name": "phy.h",
  "hash_id": "2c496310858e2baabf06e6f2665dcf223ff8840bf26c8059a65bb7bfdf2a1376",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/usb/phy.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_USB_PHY_H\n#define __LINUX_USB_PHY_H\n\n#include <linux/extcon.h>\n#include <linux/notifier.h>\n#include <linux/usb.h>\n#include <uapi/linux/usb/charger.h>\n\nenum usb_phy_interface {\n\tUSBPHY_INTERFACE_MODE_UNKNOWN,\n\tUSBPHY_INTERFACE_MODE_UTMI,\n\tUSBPHY_INTERFACE_MODE_UTMIW,\n\tUSBPHY_INTERFACE_MODE_ULPI,\n\tUSBPHY_INTERFACE_MODE_SERIAL,\n\tUSBPHY_INTERFACE_MODE_HSIC,\n};\n\nenum usb_phy_events {\n\tUSB_EVENT_NONE,          \n\tUSB_EVENT_VBUS,          \n\tUSB_EVENT_ID,            \n\tUSB_EVENT_CHARGER,       \n\tUSB_EVENT_ENUMERATED,    \n};\n\n \nenum usb_phy_type {\n\tUSB_PHY_TYPE_UNDEFINED,\n\tUSB_PHY_TYPE_USB2,\n\tUSB_PHY_TYPE_USB3,\n};\n\n \nenum usb_otg_state {\n\tOTG_STATE_UNDEFINED = 0,\n\n\t \n\tOTG_STATE_B_IDLE,\n\tOTG_STATE_B_SRP_INIT,\n\tOTG_STATE_B_PERIPHERAL,\n\n\t \n\tOTG_STATE_B_WAIT_ACON,\n\tOTG_STATE_B_HOST,\n\n\t \n\tOTG_STATE_A_IDLE,\n\tOTG_STATE_A_WAIT_VRISE,\n\tOTG_STATE_A_WAIT_BCON,\n\tOTG_STATE_A_HOST,\n\tOTG_STATE_A_SUSPEND,\n\tOTG_STATE_A_PERIPHERAL,\n\tOTG_STATE_A_WAIT_VFALL,\n\tOTG_STATE_A_VBUS_ERR,\n};\n\nstruct usb_phy;\nstruct usb_otg;\n\n \nstruct usb_phy_io_ops {\n\tint (*read)(struct usb_phy *x, u32 reg);\n\tint (*write)(struct usb_phy *x, u32 val, u32 reg);\n};\n\nstruct usb_charger_current {\n\tunsigned int sdp_min;\n\tunsigned int sdp_max;\n\tunsigned int dcp_min;\n\tunsigned int dcp_max;\n\tunsigned int cdp_min;\n\tunsigned int cdp_max;\n\tunsigned int aca_min;\n\tunsigned int aca_max;\n};\n\nstruct usb_phy {\n\tstruct device\t\t*dev;\n\tconst char\t\t*label;\n\tunsigned int\t\t flags;\n\n\tenum usb_phy_type\ttype;\n\tenum usb_phy_events\tlast_event;\n\n\tstruct usb_otg\t\t*otg;\n\n\tstruct device\t\t*io_dev;\n\tstruct usb_phy_io_ops\t*io_ops;\n\tvoid __iomem\t\t*io_priv;\n\n\t \n\tstruct extcon_dev\t*edev;\n\tstruct extcon_dev\t*id_edev;\n\tstruct notifier_block\tvbus_nb;\n\tstruct notifier_block\tid_nb;\n\tstruct notifier_block\ttype_nb;\n\n\t \n\tenum usb_charger_type\tchg_type;\n\tenum usb_charger_state\tchg_state;\n\tstruct usb_charger_current\tchg_cur;\n\tstruct work_struct\t\tchg_work;\n\n\t \n\tstruct atomic_notifier_head\tnotifier;\n\n\t \n\tu16\t\t\tport_status;\n\tu16\t\t\tport_change;\n\n\t \n\tstruct list_head\thead;\n\n\t \n\tint\t(*init)(struct usb_phy *x);\n\tvoid\t(*shutdown)(struct usb_phy *x);\n\n\t \n\tint\t(*set_vbus)(struct usb_phy *x, int on);\n\n\t \n\tint\t(*set_power)(struct usb_phy *x,\n\t\t\t\tunsigned mA);\n\n\t \n\tint\t(*set_suspend)(struct usb_phy *x,\n\t\t\t\tint suspend);\n\n\t \n\tint\t(*set_wakeup)(struct usb_phy *x, bool enabled);\n\n\t \n\tint\t(*notify_connect)(struct usb_phy *x,\n\t\t\tenum usb_device_speed speed);\n\tint\t(*notify_disconnect)(struct usb_phy *x,\n\t\t\tenum usb_device_speed speed);\n\n\t \n\tenum usb_charger_type (*charger_detect)(struct usb_phy *x);\n};\n\n \nextern int usb_add_phy(struct usb_phy *, enum usb_phy_type type);\nextern int usb_add_phy_dev(struct usb_phy *);\nextern void usb_remove_phy(struct usb_phy *);\n\n \nstatic inline int usb_phy_io_read(struct usb_phy *x, u32 reg)\n{\n\tif (x && x->io_ops && x->io_ops->read)\n\t\treturn x->io_ops->read(x, reg);\n\n\treturn -EINVAL;\n}\n\nstatic inline int usb_phy_io_write(struct usb_phy *x, u32 val, u32 reg)\n{\n\tif (x && x->io_ops && x->io_ops->write)\n\t\treturn x->io_ops->write(x, val, reg);\n\n\treturn -EINVAL;\n}\n\nstatic inline int\nusb_phy_init(struct usb_phy *x)\n{\n\tif (x && x->init)\n\t\treturn x->init(x);\n\n\treturn 0;\n}\n\nstatic inline void\nusb_phy_shutdown(struct usb_phy *x)\n{\n\tif (x && x->shutdown)\n\t\tx->shutdown(x);\n}\n\nstatic inline int\nusb_phy_vbus_on(struct usb_phy *x)\n{\n\tif (!x || !x->set_vbus)\n\t\treturn 0;\n\n\treturn x->set_vbus(x, true);\n}\n\nstatic inline int\nusb_phy_vbus_off(struct usb_phy *x)\n{\n\tif (!x || !x->set_vbus)\n\t\treturn 0;\n\n\treturn x->set_vbus(x, false);\n}\n\n \n#if IS_ENABLED(CONFIG_USB_PHY)\nextern struct usb_phy *usb_get_phy(enum usb_phy_type type);\nextern struct usb_phy *devm_usb_get_phy(struct device *dev,\n\tenum usb_phy_type type);\nextern struct usb_phy *devm_usb_get_phy_by_phandle(struct device *dev,\n\tconst char *phandle, u8 index);\nextern struct usb_phy *devm_usb_get_phy_by_node(struct device *dev,\n\tstruct device_node *node, struct notifier_block *nb);\nextern void usb_put_phy(struct usb_phy *);\nextern void devm_usb_put_phy(struct device *dev, struct usb_phy *x);\nextern void usb_phy_set_event(struct usb_phy *x, unsigned long event);\nextern void usb_phy_set_charger_current(struct usb_phy *usb_phy,\n\t\t\t\t\tunsigned int mA);\nextern void usb_phy_get_charger_current(struct usb_phy *usb_phy,\n\t\t\t\t\tunsigned int *min, unsigned int *max);\nextern void usb_phy_set_charger_state(struct usb_phy *usb_phy,\n\t\t\t\t      enum usb_charger_state state);\n#else\nstatic inline struct usb_phy *usb_get_phy(enum usb_phy_type type)\n{\n\treturn ERR_PTR(-ENXIO);\n}\n\nstatic inline struct usb_phy *devm_usb_get_phy(struct device *dev,\n\tenum usb_phy_type type)\n{\n\treturn ERR_PTR(-ENXIO);\n}\n\nstatic inline struct usb_phy *devm_usb_get_phy_by_phandle(struct device *dev,\n\tconst char *phandle, u8 index)\n{\n\treturn ERR_PTR(-ENXIO);\n}\n\nstatic inline struct usb_phy *devm_usb_get_phy_by_node(struct device *dev,\n\tstruct device_node *node, struct notifier_block *nb)\n{\n\treturn ERR_PTR(-ENXIO);\n}\n\nstatic inline void usb_put_phy(struct usb_phy *x)\n{\n}\n\nstatic inline void devm_usb_put_phy(struct device *dev, struct usb_phy *x)\n{\n}\n\nstatic inline void usb_phy_set_event(struct usb_phy *x, unsigned long event)\n{\n}\n\nstatic inline void usb_phy_set_charger_current(struct usb_phy *usb_phy,\n\t\t\t\t\t       unsigned int mA)\n{\n}\n\nstatic inline void usb_phy_get_charger_current(struct usb_phy *usb_phy,\n\t\t\t\t\t       unsigned int *min,\n\t\t\t\t\t       unsigned int *max)\n{\n}\n\nstatic inline void usb_phy_set_charger_state(struct usb_phy *usb_phy,\n\t\t\t\t\t     enum usb_charger_state state)\n{\n}\n#endif\n\nstatic inline int\nusb_phy_set_power(struct usb_phy *x, unsigned mA)\n{\n\tif (!x)\n\t\treturn 0;\n\n\tusb_phy_set_charger_current(x, mA);\n\n\tif (x->set_power)\n\t\treturn x->set_power(x, mA);\n\treturn 0;\n}\n\n \nstatic inline int\nusb_phy_set_suspend(struct usb_phy *x, int suspend)\n{\n\tif (x && x->set_suspend != NULL)\n\t\treturn x->set_suspend(x, suspend);\n\telse\n\t\treturn 0;\n}\n\nstatic inline int\nusb_phy_set_wakeup(struct usb_phy *x, bool enabled)\n{\n\tif (x && x->set_wakeup)\n\t\treturn x->set_wakeup(x, enabled);\n\telse\n\t\treturn 0;\n}\n\nstatic inline int\nusb_phy_notify_connect(struct usb_phy *x, enum usb_device_speed speed)\n{\n\tif (x && x->notify_connect)\n\t\treturn x->notify_connect(x, speed);\n\telse\n\t\treturn 0;\n}\n\nstatic inline int\nusb_phy_notify_disconnect(struct usb_phy *x, enum usb_device_speed speed)\n{\n\tif (x && x->notify_disconnect)\n\t\treturn x->notify_disconnect(x, speed);\n\telse\n\t\treturn 0;\n}\n\n \nstatic inline int\nusb_register_notifier(struct usb_phy *x, struct notifier_block *nb)\n{\n\treturn atomic_notifier_chain_register(&x->notifier, nb);\n}\n\nstatic inline void\nusb_unregister_notifier(struct usb_phy *x, struct notifier_block *nb)\n{\n\tatomic_notifier_chain_unregister(&x->notifier, nb);\n}\n\nstatic inline const char *usb_phy_type_string(enum usb_phy_type type)\n{\n\tswitch (type) {\n\tcase USB_PHY_TYPE_USB2:\n\t\treturn \"USB2 PHY\";\n\tcase USB_PHY_TYPE_USB3:\n\t\treturn \"USB3 PHY\";\n\tdefault:\n\t\treturn \"UNKNOWN PHY TYPE\";\n\t}\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}