{
  "module_name": "tcpci.h",
  "hash_id": "000ecc012653e681480a694584832bfc730d23724e69aef227171279ac81139a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/usb/tcpci.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_USB_TCPCI_H\n#define __LINUX_USB_TCPCI_H\n\n#include <linux/usb/typec.h>\n#include <linux/usb/tcpm.h>\n\n#define TCPC_VENDOR_ID\t\t\t0x0\n#define TCPC_PRODUCT_ID\t\t\t0x2\n#define TCPC_BCD_DEV\t\t\t0x4\n#define TCPC_TC_REV\t\t\t0x6\n#define TCPC_PD_REV\t\t\t0x8\n#define TCPC_PD_INT_REV\t\t\t0xa\n\n#define TCPC_ALERT\t\t\t0x10\n#define TCPC_ALERT_EXTND\t\tBIT(14)\n#define TCPC_ALERT_EXTENDED_STATUS\tBIT(13)\n#define TCPC_ALERT_VBUS_DISCNCT\t\tBIT(11)\n#define TCPC_ALERT_RX_BUF_OVF\t\tBIT(10)\n#define TCPC_ALERT_FAULT\t\tBIT(9)\n#define TCPC_ALERT_V_ALARM_LO\t\tBIT(8)\n#define TCPC_ALERT_V_ALARM_HI\t\tBIT(7)\n#define TCPC_ALERT_TX_SUCCESS\t\tBIT(6)\n#define TCPC_ALERT_TX_DISCARDED\t\tBIT(5)\n#define TCPC_ALERT_TX_FAILED\t\tBIT(4)\n#define TCPC_ALERT_RX_HARD_RST\t\tBIT(3)\n#define TCPC_ALERT_RX_STATUS\t\tBIT(2)\n#define TCPC_ALERT_POWER_STATUS\t\tBIT(1)\n#define TCPC_ALERT_CC_STATUS\t\tBIT(0)\n\n#define TCPC_ALERT_MASK\t\t\t0x12\n#define TCPC_POWER_STATUS_MASK\t\t0x14\n#define TCPC_FAULT_STATUS_MASK\t\t0x15\n\n#define TCPC_EXTENDED_STATUS_MASK\t\t0x16\n#define TCPC_EXTENDED_STATUS_MASK_VSAFE0V\tBIT(0)\n\n#define TCPC_ALERT_EXTENDED_MASK\t0x17\n#define TCPC_SINK_FAST_ROLE_SWAP\tBIT(0)\n\n#define TCPC_CONFIG_STD_OUTPUT\t\t0x18\n\n#define TCPC_TCPC_CTRL\t\t\t0x19\n#define TCPC_TCPC_CTRL_ORIENTATION\tBIT(0)\n#define PLUG_ORNT_CC1\t\t\t0\n#define PLUG_ORNT_CC2\t\t\t1\n#define TCPC_TCPC_CTRL_BIST_TM\t\tBIT(1)\n#define TCPC_TCPC_CTRL_EN_LK4CONN_ALRT\tBIT(6)\n\n#define TCPC_EXTENDED_STATUS\t\t0x20\n#define TCPC_EXTENDED_STATUS_VSAFE0V\tBIT(0)\n\n#define TCPC_ROLE_CTRL\t\t\t0x1a\n#define TCPC_ROLE_CTRL_DRP\t\tBIT(6)\n#define TCPC_ROLE_CTRL_RP_VAL_SHIFT\t4\n#define TCPC_ROLE_CTRL_RP_VAL_MASK\t0x3\n#define TCPC_ROLE_CTRL_RP_VAL_DEF\t0x0\n#define TCPC_ROLE_CTRL_RP_VAL_1_5\t0x1\n#define TCPC_ROLE_CTRL_RP_VAL_3_0\t0x2\n#define TCPC_ROLE_CTRL_CC2_SHIFT\t2\n#define TCPC_ROLE_CTRL_CC2_MASK\t\t0x3\n#define TCPC_ROLE_CTRL_CC1_SHIFT\t0\n#define TCPC_ROLE_CTRL_CC1_MASK\t\t0x3\n#define TCPC_ROLE_CTRL_CC_RA\t\t0x0\n#define TCPC_ROLE_CTRL_CC_RP\t\t0x1\n#define TCPC_ROLE_CTRL_CC_RD\t\t0x2\n#define TCPC_ROLE_CTRL_CC_OPEN\t\t0x3\n\n#define TCPC_FAULT_CTRL\t\t\t0x1b\n\n#define TCPC_POWER_CTRL\t\t\t0x1c\n#define TCPC_POWER_CTRL_VCONN_ENABLE\tBIT(0)\n#define TCPC_POWER_CTRL_BLEED_DISCHARGE\tBIT(3)\n#define TCPC_POWER_CTRL_AUTO_DISCHARGE\tBIT(4)\n#define TCPC_DIS_VOLT_ALRM\t\tBIT(5)\n#define TCPC_POWER_CTRL_VBUS_VOLT_MON\tBIT(6)\n#define TCPC_FAST_ROLE_SWAP_EN\t\tBIT(7)\n\n#define TCPC_CC_STATUS\t\t\t0x1d\n#define TCPC_CC_STATUS_TOGGLING\t\tBIT(5)\n#define TCPC_CC_STATUS_TERM\t\tBIT(4)\n#define TCPC_CC_STATUS_TERM_RP\t\t0\n#define TCPC_CC_STATUS_TERM_RD\t\t1\n#define TCPC_CC_STATE_SRC_OPEN\t\t0\n#define TCPC_CC_STATUS_CC2_SHIFT\t2\n#define TCPC_CC_STATUS_CC2_MASK\t\t0x3\n#define TCPC_CC_STATUS_CC1_SHIFT\t0\n#define TCPC_CC_STATUS_CC1_MASK\t\t0x3\n\n#define TCPC_POWER_STATUS\t\t0x1e\n#define TCPC_POWER_STATUS_DBG_ACC_CON\tBIT(7)\n#define TCPC_POWER_STATUS_UNINIT\tBIT(6)\n#define TCPC_POWER_STATUS_SOURCING_VBUS\tBIT(4)\n#define TCPC_POWER_STATUS_VBUS_DET\tBIT(3)\n#define TCPC_POWER_STATUS_VBUS_PRES\tBIT(2)\n#define TCPC_POWER_STATUS_VCONN_PRES\tBIT(1)\n#define TCPC_POWER_STATUS_SINKING_VBUS\tBIT(0)\n\n#define TCPC_FAULT_STATUS\t\t0x1f\n#define TCPC_FAULT_STATUS_ALL_REG_RST_TO_DEFAULT BIT(7)\n\n#define TCPC_ALERT_EXTENDED\t\t0x21\n\n#define TCPC_COMMAND\t\t\t0x23\n#define TCPC_CMD_WAKE_I2C\t\t0x11\n#define TCPC_CMD_DISABLE_VBUS_DETECT\t0x22\n#define TCPC_CMD_ENABLE_VBUS_DETECT\t0x33\n#define TCPC_CMD_DISABLE_SINK_VBUS\t0x44\n#define TCPC_CMD_SINK_VBUS\t\t0x55\n#define TCPC_CMD_DISABLE_SRC_VBUS\t0x66\n#define TCPC_CMD_SRC_VBUS_DEFAULT\t0x77\n#define TCPC_CMD_SRC_VBUS_HIGH\t\t0x88\n#define TCPC_CMD_LOOK4CONNECTION\t0x99\n#define TCPC_CMD_RXONEMORE\t\t0xAA\n#define TCPC_CMD_I2C_IDLE\t\t0xFF\n\n#define TCPC_DEV_CAP_1\t\t\t0x24\n#define TCPC_DEV_CAP_2\t\t\t0x26\n#define TCPC_STD_INPUT_CAP\t\t0x28\n#define TCPC_STD_OUTPUT_CAP\t\t0x29\n\n#define TCPC_MSG_HDR_INFO\t\t0x2e\n#define TCPC_MSG_HDR_INFO_DATA_ROLE\tBIT(3)\n#define TCPC_MSG_HDR_INFO_PWR_ROLE\tBIT(0)\n#define TCPC_MSG_HDR_INFO_REV_SHIFT\t1\n#define TCPC_MSG_HDR_INFO_REV_MASK\t0x3\n\n#define TCPC_RX_DETECT\t\t\t0x2f\n#define TCPC_RX_DETECT_HARD_RESET\tBIT(5)\n#define TCPC_RX_DETECT_SOP\t\tBIT(0)\n#define TCPC_RX_DETECT_SOP1\t\tBIT(1)\n#define TCPC_RX_DETECT_SOP2\t\tBIT(2)\n#define TCPC_RX_DETECT_DBG1\t\tBIT(3)\n#define TCPC_RX_DETECT_DBG2\t\tBIT(4)\n\n#define TCPC_RX_BYTE_CNT\t\t0x30\n#define TCPC_RX_BUF_FRAME_TYPE\t\t0x31\n#define TCPC_RX_BUF_FRAME_TYPE_SOP\t0\n#define TCPC_RX_HDR\t\t\t0x32\n#define TCPC_RX_DATA\t\t\t0x34  \n\n#define TCPC_TRANSMIT\t\t\t0x50\n#define TCPC_TRANSMIT_RETRY_SHIFT\t4\n#define TCPC_TRANSMIT_RETRY_MASK\t0x3\n#define TCPC_TRANSMIT_TYPE_SHIFT\t0\n#define TCPC_TRANSMIT_TYPE_MASK\t\t0x7\n\n#define TCPC_TX_BYTE_CNT\t\t0x51\n#define TCPC_TX_HDR\t\t\t0x52\n#define TCPC_TX_DATA\t\t\t0x54  \n\n#define TCPC_VBUS_VOLTAGE\t\t\t0x70\n#define TCPC_VBUS_VOLTAGE_MASK\t\t\t0x3ff\n#define TCPC_VBUS_VOLTAGE_LSB_MV\t\t25\n#define TCPC_VBUS_SINK_DISCONNECT_THRESH\t0x72\n#define TCPC_VBUS_SINK_DISCONNECT_THRESH_LSB_MV\t25\n#define TCPC_VBUS_SINK_DISCONNECT_THRESH_MAX\t0x3ff\n#define TCPC_VBUS_STOP_DISCHARGE_THRESH\t\t0x74\n#define TCPC_VBUS_VOLTAGE_ALARM_HI_CFG\t\t0x76\n#define TCPC_VBUS_VOLTAGE_ALARM_LO_CFG\t\t0x78\n\n \n#define TCPC_TRANSMIT_BUFFER_MAX_LEN\t\t31\n\n#define tcpc_presenting_rd(reg, cc) \\\n\t(!(TCPC_ROLE_CTRL_DRP & (reg)) && \\\n\t (((reg) & (TCPC_ROLE_CTRL_## cc ##_MASK << TCPC_ROLE_CTRL_## cc ##_SHIFT)) == \\\n\t  (TCPC_ROLE_CTRL_CC_RD << TCPC_ROLE_CTRL_## cc ##_SHIFT)))\n\nstruct tcpci;\n\n \nstruct tcpci_data {\n\tstruct regmap *regmap;\n\tunsigned char TX_BUF_BYTE_x_hidden:1;\n\tunsigned char auto_discharge_disconnect:1;\n\tunsigned char vbus_vsafe0v:1;\n\n\tint (*init)(struct tcpci *tcpci, struct tcpci_data *data);\n\tint (*set_vconn)(struct tcpci *tcpci, struct tcpci_data *data,\n\t\t\t bool enable);\n\tint (*start_drp_toggling)(struct tcpci *tcpci, struct tcpci_data *data,\n\t\t\t\t  enum typec_cc_status cc);\n\tint (*set_vbus)(struct tcpci *tcpci, struct tcpci_data *data, bool source, bool sink);\n\tvoid (*frs_sourcing_vbus)(struct tcpci *tcpci, struct tcpci_data *data);\n\tvoid (*set_partner_usb_comm_capable)(struct tcpci *tcpci, struct tcpci_data *data,\n\t\t\t\t\t     bool capable);\n\tvoid (*check_contaminant)(struct tcpci *tcpci, struct tcpci_data *data);\n};\n\nstruct tcpci *tcpci_register_port(struct device *dev, struct tcpci_data *data);\nvoid tcpci_unregister_port(struct tcpci *tcpci);\nirqreturn_t tcpci_irq(struct tcpci *tcpci);\n\nstruct tcpm_port;\nstruct tcpm_port *tcpci_get_tcpm_port(struct tcpci *tcpci);\n\nstatic inline enum typec_cc_status tcpci_to_typec_cc(unsigned int cc, bool sink)\n{\n\tswitch (cc) {\n\tcase 0x1:\n\t\treturn sink ? TYPEC_CC_RP_DEF : TYPEC_CC_RA;\n\tcase 0x2:\n\t\treturn sink ? TYPEC_CC_RP_1_5 : TYPEC_CC_RD;\n\tcase 0x3:\n\t\tif (sink)\n\t\t\treturn TYPEC_CC_RP_3_0;\n\t\tfallthrough;\n\tcase 0x0:\n\tdefault:\n\t\treturn TYPEC_CC_OPEN;\n\t}\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}