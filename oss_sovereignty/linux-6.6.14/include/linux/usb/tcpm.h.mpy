{
  "module_name": "tcpm.h",
  "hash_id": "2bb500abccee328b1cde87fa9632eef685ed8c24df95f7fdad42479c58fdeef2",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/usb/tcpm.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_USB_TCPM_H\n#define __LINUX_USB_TCPM_H\n\n#include <linux/bitops.h>\n#include <linux/usb/typec.h>\n#include \"pd.h\"\n\nenum typec_cc_status {\n\tTYPEC_CC_OPEN,\n\tTYPEC_CC_RA,\n\tTYPEC_CC_RD,\n\tTYPEC_CC_RP_DEF,\n\tTYPEC_CC_RP_1_5,\n\tTYPEC_CC_RP_3_0,\n};\n\n \n#define SINK_TX_NG\tTYPEC_CC_RP_1_5\n#define SINK_TX_OK\tTYPEC_CC_RP_3_0\n\nenum typec_cc_polarity {\n\tTYPEC_POLARITY_CC1,\n\tTYPEC_POLARITY_CC2,\n};\n\n \n#define PD_T_TCPC_TX_TIMEOUT\t100\t\t \n#define PD_ROLE_SWAP_TIMEOUT\t(MSEC_PER_SEC * 10)\n#define PD_PPS_CTRL_TIMEOUT\t(MSEC_PER_SEC * 10)\n\nenum tcpm_transmit_status {\n\tTCPC_TX_SUCCESS = 0,\n\tTCPC_TX_DISCARDED = 1,\n\tTCPC_TX_FAILED = 2,\n};\n\nenum tcpm_transmit_type {\n\tTCPC_TX_SOP = 0,\n\tTCPC_TX_SOP_PRIME = 1,\n\tTCPC_TX_SOP_PRIME_PRIME = 2,\n\tTCPC_TX_SOP_DEBUG_PRIME = 3,\n\tTCPC_TX_SOP_DEBUG_PRIME_PRIME = 4,\n\tTCPC_TX_HARD_RESET = 5,\n\tTCPC_TX_CABLE_RESET = 6,\n\tTCPC_TX_BIST_MODE_2 = 7\n};\n\n \n#define TCPC_MUX_USB_ENABLED\t\tBIT(0)\t \n#define TCPC_MUX_DP_ENABLED\t\tBIT(1)\t \n#define TCPC_MUX_POLARITY_INVERTED\tBIT(2)\t \n\n \nstruct tcpc_dev {\n\tstruct fwnode_handle *fwnode;\n\n\tint (*init)(struct tcpc_dev *dev);\n\tint (*get_vbus)(struct tcpc_dev *dev);\n\tint (*get_current_limit)(struct tcpc_dev *dev);\n\tint (*set_cc)(struct tcpc_dev *dev, enum typec_cc_status cc);\n\tint (*apply_rc)(struct tcpc_dev *dev, enum typec_cc_status cc,\n\t\t\tenum typec_cc_polarity polarity);\n\tint (*get_cc)(struct tcpc_dev *dev, enum typec_cc_status *cc1,\n\t\t      enum typec_cc_status *cc2);\n\tint (*set_polarity)(struct tcpc_dev *dev,\n\t\t\t    enum typec_cc_polarity polarity);\n\tint (*set_vconn)(struct tcpc_dev *dev, bool on);\n\tint (*set_vbus)(struct tcpc_dev *dev, bool on, bool charge);\n\tint (*set_current_limit)(struct tcpc_dev *dev, u32 max_ma, u32 mv);\n\tint (*set_pd_rx)(struct tcpc_dev *dev, bool on);\n\tint (*set_roles)(struct tcpc_dev *dev, bool attached,\n\t\t\t enum typec_role role, enum typec_data_role data);\n\tint (*start_toggling)(struct tcpc_dev *dev,\n\t\t\t      enum typec_port_type port_type,\n\t\t\t      enum typec_cc_status cc);\n\tint (*try_role)(struct tcpc_dev *dev, int role);\n\tint (*pd_transmit)(struct tcpc_dev *dev, enum tcpm_transmit_type type,\n\t\t\t   const struct pd_message *msg, unsigned int negotiated_rev);\n\tint (*set_bist_data)(struct tcpc_dev *dev, bool on);\n\tint (*enable_frs)(struct tcpc_dev *dev, bool enable);\n\tvoid (*frs_sourcing_vbus)(struct tcpc_dev *dev);\n\tint (*enable_auto_vbus_discharge)(struct tcpc_dev *dev, bool enable);\n\tint (*set_auto_vbus_discharge_threshold)(struct tcpc_dev *dev, enum typec_pwr_opmode mode,\n\t\t\t\t\t\t bool pps_active, u32 requested_vbus_voltage);\n\tbool (*is_vbus_vsafe0v)(struct tcpc_dev *dev);\n\tvoid (*set_partner_usb_comm_capable)(struct tcpc_dev *dev, bool enable);\n\tvoid (*check_contaminant)(struct tcpc_dev *dev);\n};\n\nstruct tcpm_port;\n\nstruct tcpm_port *tcpm_register_port(struct device *dev, struct tcpc_dev *tcpc);\nvoid tcpm_unregister_port(struct tcpm_port *port);\n\nvoid tcpm_vbus_change(struct tcpm_port *port);\nvoid tcpm_cc_change(struct tcpm_port *port);\nvoid tcpm_sink_frs(struct tcpm_port *port);\nvoid tcpm_sourcing_vbus(struct tcpm_port *port);\nvoid tcpm_pd_receive(struct tcpm_port *port,\n\t\t     const struct pd_message *msg);\nvoid tcpm_pd_transmit_complete(struct tcpm_port *port,\n\t\t\t       enum tcpm_transmit_status status);\nvoid tcpm_pd_hard_reset(struct tcpm_port *port);\nvoid tcpm_tcpc_reset(struct tcpm_port *port);\nvoid tcpm_port_clean(struct tcpm_port *port);\nbool tcpm_port_is_toggling(struct tcpm_port *port);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}