{
  "module_name": "typec.h",
  "hash_id": "e67f41adab85c7f2673399904fa65780713dd5aaf1fd99477aa0cb1f1e5803f5",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/usb/typec.h",
  "human_readable_source": " \n\n#ifndef __LINUX_USB_TYPEC_H\n#define __LINUX_USB_TYPEC_H\n\n#include <linux/types.h>\n\n \n#define USB_TYPEC_REV_1_0\t0x100  \n#define USB_TYPEC_REV_1_1\t0x110  \n#define USB_TYPEC_REV_1_2\t0x120  \n#define USB_TYPEC_REV_1_3\t0x130  \n#define USB_TYPEC_REV_1_4\t0x140  \n#define USB_TYPEC_REV_2_0\t0x200  \n\nstruct typec_partner;\nstruct typec_cable;\nstruct typec_plug;\nstruct typec_port;\nstruct typec_altmode_ops;\n\nstruct fwnode_handle;\nstruct device;\n\nstruct usb_power_delivery;\nstruct usb_power_delivery_desc;\n\nenum typec_port_type {\n\tTYPEC_PORT_SRC,\n\tTYPEC_PORT_SNK,\n\tTYPEC_PORT_DRP,\n};\n\nenum typec_port_data {\n\tTYPEC_PORT_DFP,\n\tTYPEC_PORT_UFP,\n\tTYPEC_PORT_DRD,\n};\n\nenum typec_plug_type {\n\tUSB_PLUG_NONE,\n\tUSB_PLUG_TYPE_A,\n\tUSB_PLUG_TYPE_B,\n\tUSB_PLUG_TYPE_C,\n\tUSB_PLUG_CAPTIVE,\n};\n\nenum typec_data_role {\n\tTYPEC_DEVICE,\n\tTYPEC_HOST,\n};\n\nenum typec_role {\n\tTYPEC_SINK,\n\tTYPEC_SOURCE,\n};\n\nstatic inline int is_sink(enum typec_role role)\n{\n\treturn role == TYPEC_SINK;\n}\n\nstatic inline int is_source(enum typec_role role)\n{\n\treturn role == TYPEC_SOURCE;\n}\n\nenum typec_pwr_opmode {\n\tTYPEC_PWR_MODE_USB,\n\tTYPEC_PWR_MODE_1_5A,\n\tTYPEC_PWR_MODE_3_0A,\n\tTYPEC_PWR_MODE_PD,\n};\n\nenum typec_accessory {\n\tTYPEC_ACCESSORY_NONE,\n\tTYPEC_ACCESSORY_AUDIO,\n\tTYPEC_ACCESSORY_DEBUG,\n};\n\n#define TYPEC_MAX_ACCESSORY\t3\n\nenum typec_orientation {\n\tTYPEC_ORIENTATION_NONE,\n\tTYPEC_ORIENTATION_NORMAL,\n\tTYPEC_ORIENTATION_REVERSE,\n};\n\n \nstruct enter_usb_data {\n\tu32\t\t\teudo;\n\tunsigned char\t\tactive_link_training:1;\n};\n\n \nstruct usb_pd_identity {\n\tu32\t\t\tid_header;\n\tu32\t\t\tcert_stat;\n\tu32\t\t\tproduct;\n\tu32\t\t\tvdo[3];\n};\n\nint typec_partner_set_identity(struct typec_partner *partner);\nint typec_cable_set_identity(struct typec_cable *cable);\n\n \nstruct typec_altmode_desc {\n\tu16\t\t\tsvid;\n\tu8\t\t\tmode;\n\tu32\t\t\tvdo;\n\t \n\tenum typec_port_data\troles;\n};\n\nvoid typec_partner_set_pd_revision(struct typec_partner *partner, u16 pd_revision);\nint typec_partner_set_num_altmodes(struct typec_partner *partner, int num_altmodes);\nstruct typec_altmode\n*typec_partner_register_altmode(struct typec_partner *partner,\n\t\t\t\tconst struct typec_altmode_desc *desc);\nint typec_plug_set_num_altmodes(struct typec_plug *plug, int num_altmodes);\nstruct typec_altmode\n*typec_plug_register_altmode(struct typec_plug *plug,\n\t\t\t     const struct typec_altmode_desc *desc);\nstruct typec_altmode\n*typec_port_register_altmode(struct typec_port *port,\n\t\t\t     const struct typec_altmode_desc *desc);\n\nvoid typec_port_register_altmodes(struct typec_port *port,\n\tconst struct typec_altmode_ops *ops, void *drvdata,\n\tstruct typec_altmode **altmodes, size_t n);\n\nvoid typec_unregister_altmode(struct typec_altmode *altmode);\n\nstruct typec_port *typec_altmode2port(struct typec_altmode *alt);\n\nvoid typec_altmode_update_active(struct typec_altmode *alt, bool active);\n\nenum typec_plug_index {\n\tTYPEC_PLUG_SOP_P,\n\tTYPEC_PLUG_SOP_PP,\n};\n\n \nstruct typec_plug_desc {\n\tenum typec_plug_index\tindex;\n};\n\n \nstruct typec_cable_desc {\n\tenum typec_plug_type\ttype;\n\tunsigned int\t\tactive:1;\n\tstruct usb_pd_identity\t*identity;\n\tu16\t\t\tpd_revision;  \n\n};\n\n \nstruct typec_partner_desc {\n\tunsigned int\t\tusb_pd:1;\n\tenum typec_accessory\taccessory;\n\tstruct usb_pd_identity\t*identity;\n\tu16\t\t\tpd_revision;  \n};\n\n \nstruct typec_operations {\n\tint (*try_role)(struct typec_port *port, int role);\n\tint (*dr_set)(struct typec_port *port, enum typec_data_role role);\n\tint (*pr_set)(struct typec_port *port, enum typec_role role);\n\tint (*vconn_set)(struct typec_port *port, enum typec_role role);\n\tint (*port_type_set)(struct typec_port *port,\n\t\t\t     enum typec_port_type type);\n\tstruct usb_power_delivery **(*pd_get)(struct typec_port *port);\n\tint (*pd_set)(struct typec_port *port, struct usb_power_delivery *pd);\n};\n\nenum usb_pd_svdm_ver {\n\tSVDM_VER_1_0 = 0,\n\tSVDM_VER_2_0 = 1,\n\tSVDM_VER_MAX = SVDM_VER_2_0,\n};\n\n \nstruct typec_capability {\n\tenum typec_port_type\ttype;\n\tenum typec_port_data\tdata;\n\tu16\t\t\trevision;  \n\tu16\t\t\tpd_revision;  \n\tenum usb_pd_svdm_ver\tsvdm_version;\n\tint\t\t\tprefer_role;\n\tenum typec_accessory\taccessory[TYPEC_MAX_ACCESSORY];\n\tunsigned int\t\torientation_aware:1;\n\n\tstruct fwnode_handle\t*fwnode;\n\tvoid\t\t\t*driver_data;\n\n\tstruct usb_power_delivery *pd;\n\n\tconst struct typec_operations\t*ops;\n};\n\n \n#define TYPEC_NO_PREFERRED_ROLE\t(-1)\n\nstruct typec_port *typec_register_port(struct device *parent,\n\t\t\t\t       const struct typec_capability *cap);\nvoid typec_unregister_port(struct typec_port *port);\n\nstruct typec_partner *typec_register_partner(struct typec_port *port,\n\t\t\t\t\t     struct typec_partner_desc *desc);\nvoid typec_unregister_partner(struct typec_partner *partner);\n\nstruct typec_cable *typec_register_cable(struct typec_port *port,\n\t\t\t\t\t struct typec_cable_desc *desc);\nvoid typec_unregister_cable(struct typec_cable *cable);\n\nstruct typec_cable *typec_cable_get(struct typec_port *port);\nvoid typec_cable_put(struct typec_cable *cable);\nint typec_cable_is_active(struct typec_cable *cable);\n\nstruct typec_plug *typec_register_plug(struct typec_cable *cable,\n\t\t\t\t       struct typec_plug_desc *desc);\nvoid typec_unregister_plug(struct typec_plug *plug);\n\nvoid typec_set_data_role(struct typec_port *port, enum typec_data_role role);\nvoid typec_set_pwr_role(struct typec_port *port, enum typec_role role);\nvoid typec_set_vconn_role(struct typec_port *port, enum typec_role role);\nvoid typec_set_pwr_opmode(struct typec_port *port, enum typec_pwr_opmode mode);\n\nint typec_set_orientation(struct typec_port *port,\n\t\t\t  enum typec_orientation orientation);\nenum typec_orientation typec_get_orientation(struct typec_port *port);\nint typec_set_mode(struct typec_port *port, int mode);\n\nvoid *typec_get_drvdata(struct typec_port *port);\n\nint typec_get_fw_cap(struct typec_capability *cap,\n\t\t     struct fwnode_handle *fwnode);\n\nint typec_find_pwr_opmode(const char *name);\nint typec_find_orientation(const char *name);\nint typec_find_port_power_role(const char *name);\nint typec_find_power_role(const char *name);\nint typec_find_port_data_role(const char *name);\n\nvoid typec_partner_set_svdm_version(struct typec_partner *partner,\n\t\t\t\t    enum usb_pd_svdm_ver svdm_version);\nint typec_get_negotiated_svdm_version(struct typec_port *port);\n\nstruct usb_power_delivery *typec_partner_usb_power_delivery_register(struct typec_partner *partner,\n\t\t\t\t\t\t\tstruct usb_power_delivery_desc *desc);\n\nint typec_port_set_usb_power_delivery(struct typec_port *port, struct usb_power_delivery *pd);\nint typec_partner_set_usb_power_delivery(struct typec_partner *partner,\n\t\t\t\t\t struct usb_power_delivery *pd);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}