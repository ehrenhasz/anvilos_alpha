{
  "module_name": "cpu.h",
  "hash_id": "4fe55200189865556056a11520747dcb0e24f8adb597883cd5b7018ab9b25cc4",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/cpu.h",
  "human_readable_source": " \n \n#ifndef _LINUX_CPU_H_\n#define _LINUX_CPU_H_\n\n#include <linux/node.h>\n#include <linux/compiler.h>\n#include <linux/cpumask.h>\n#include <linux/cpuhotplug.h>\n#include <linux/cpu_smt.h>\n\nstruct device;\nstruct device_node;\nstruct attribute_group;\n\nstruct cpu {\n\tint node_id;\t\t \n\tint hotpluggable;\t \n\tstruct device dev;\n};\n\nextern void boot_cpu_init(void);\nextern void boot_cpu_hotplug_init(void);\nextern void cpu_init(void);\nextern void trap_init(void);\n\nextern int register_cpu(struct cpu *cpu, int num);\nextern struct device *get_cpu_device(unsigned cpu);\nextern bool cpu_is_hotpluggable(unsigned cpu);\nextern bool arch_match_cpu_phys_id(int cpu, u64 phys_id);\nextern bool arch_find_n_match_cpu_physical_id(struct device_node *cpun,\n\t\t\t\t\t      int cpu, unsigned int *thread);\n\nextern int cpu_add_dev_attr(struct device_attribute *attr);\nextern void cpu_remove_dev_attr(struct device_attribute *attr);\n\nextern int cpu_add_dev_attr_group(struct attribute_group *attrs);\nextern void cpu_remove_dev_attr_group(struct attribute_group *attrs);\n\nextern ssize_t cpu_show_meltdown(struct device *dev,\n\t\t\t\t struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_spectre_v1(struct device *dev,\n\t\t\t\t   struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_spectre_v2(struct device *dev,\n\t\t\t\t   struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_spec_store_bypass(struct device *dev,\n\t\t\t\t\t  struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_l1tf(struct device *dev,\n\t\t\t     struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_mds(struct device *dev,\n\t\t\t    struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_tsx_async_abort(struct device *dev,\n\t\t\t\t\tstruct device_attribute *attr,\n\t\t\t\t\tchar *buf);\nextern ssize_t cpu_show_itlb_multihit(struct device *dev,\n\t\t\t\t      struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_srbds(struct device *dev, struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_mmio_stale_data(struct device *dev,\n\t\t\t\t\tstruct device_attribute *attr,\n\t\t\t\t\tchar *buf);\nextern ssize_t cpu_show_retbleed(struct device *dev,\n\t\t\t\t struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_spec_rstack_overflow(struct device *dev,\n\t\t\t\t\t     struct device_attribute *attr, char *buf);\nextern ssize_t cpu_show_gds(struct device *dev,\n\t\t\t    struct device_attribute *attr, char *buf);\n\nextern __printf(4, 5)\nstruct device *cpu_device_create(struct device *parent, void *drvdata,\n\t\t\t\t const struct attribute_group **groups,\n\t\t\t\t const char *fmt, ...);\nextern int arch_register_cpu(int cpu);\nextern void arch_unregister_cpu(int cpu);\n#ifdef CONFIG_HOTPLUG_CPU\nextern void unregister_cpu(struct cpu *cpu);\nextern ssize_t arch_cpu_probe(const char *, size_t);\nextern ssize_t arch_cpu_release(const char *, size_t);\n#endif\n\n \n#define CPU_ONLINE\t\t0x0002  \n#define CPU_UP_PREPARE\t\t0x0003  \n#define CPU_DEAD\t\t0x0007  \n#define CPU_DEAD_FROZEN\t\t0x0008  \n#define CPU_POST_DEAD\t\t0x0009  \n#define CPU_BROKEN\t\t0x000B  \n\n#ifdef CONFIG_SMP\nextern bool cpuhp_tasks_frozen;\nint add_cpu(unsigned int cpu);\nint cpu_device_up(struct device *dev);\nvoid notify_cpu_starting(unsigned int cpu);\nextern void cpu_maps_update_begin(void);\nextern void cpu_maps_update_done(void);\nint bringup_hibernate_cpu(unsigned int sleep_cpu);\nvoid bringup_nonboot_cpus(unsigned int setup_max_cpus);\n\n#else\t \n#define cpuhp_tasks_frozen\t0\n\nstatic inline void cpu_maps_update_begin(void)\n{\n}\n\nstatic inline void cpu_maps_update_done(void)\n{\n}\n\nstatic inline int add_cpu(unsigned int cpu) { return 0;}\n\n#endif  \nextern struct bus_type cpu_subsys;\n\nextern int lockdep_is_cpus_held(void);\n\n#ifdef CONFIG_HOTPLUG_CPU\nextern void cpus_write_lock(void);\nextern void cpus_write_unlock(void);\nextern void cpus_read_lock(void);\nextern void cpus_read_unlock(void);\nextern int  cpus_read_trylock(void);\nextern void lockdep_assert_cpus_held(void);\nextern void cpu_hotplug_disable(void);\nextern void cpu_hotplug_enable(void);\nvoid clear_tasks_mm_cpumask(int cpu);\nint remove_cpu(unsigned int cpu);\nint cpu_device_down(struct device *dev);\nextern void smp_shutdown_nonboot_cpus(unsigned int primary_cpu);\n\n#else  \n\nstatic inline void cpus_write_lock(void) { }\nstatic inline void cpus_write_unlock(void) { }\nstatic inline void cpus_read_lock(void) { }\nstatic inline void cpus_read_unlock(void) { }\nstatic inline int  cpus_read_trylock(void) { return true; }\nstatic inline void lockdep_assert_cpus_held(void) { }\nstatic inline void cpu_hotplug_disable(void) { }\nstatic inline void cpu_hotplug_enable(void) { }\nstatic inline int remove_cpu(unsigned int cpu) { return -EPERM; }\nstatic inline void smp_shutdown_nonboot_cpus(unsigned int primary_cpu) { }\n#endif\t \n\n#ifdef CONFIG_PM_SLEEP_SMP\nextern int freeze_secondary_cpus(int primary);\nextern void thaw_secondary_cpus(void);\n\nstatic inline int suspend_disable_secondary_cpus(void)\n{\n\tint cpu = 0;\n\n\tif (IS_ENABLED(CONFIG_PM_SLEEP_SMP_NONZERO_CPU))\n\t\tcpu = -1;\n\n\treturn freeze_secondary_cpus(cpu);\n}\nstatic inline void suspend_enable_secondary_cpus(void)\n{\n\treturn thaw_secondary_cpus();\n}\n\n#else  \nstatic inline void thaw_secondary_cpus(void) {}\nstatic inline int suspend_disable_secondary_cpus(void) { return 0; }\nstatic inline void suspend_enable_secondary_cpus(void) { }\n#endif  \n\nvoid __noreturn cpu_startup_entry(enum cpuhp_state state);\n\nvoid cpu_idle_poll_ctrl(bool enable);\n\nbool cpu_in_idle(unsigned long pc);\n\nvoid arch_cpu_idle(void);\nvoid arch_cpu_idle_prepare(void);\nvoid arch_cpu_idle_enter(void);\nvoid arch_cpu_idle_exit(void);\nvoid __noreturn arch_cpu_idle_dead(void);\n\n#ifdef CONFIG_ARCH_HAS_CPU_FINALIZE_INIT\nvoid arch_cpu_finalize_init(void);\n#else\nstatic inline void arch_cpu_finalize_init(void) { }\n#endif\n\nvoid play_idle_precise(u64 duration_ns, u64 latency_ns);\n\nstatic inline void play_idle(unsigned long duration_us)\n{\n\tplay_idle_precise(duration_us * NSEC_PER_USEC, U64_MAX);\n}\n\n#ifdef CONFIG_HOTPLUG_CPU\nvoid cpuhp_report_idle_dead(void);\n#else\nstatic inline void cpuhp_report_idle_dead(void) { }\n#endif  \n\nextern bool cpu_mitigations_off(void);\nextern bool cpu_mitigations_auto_nosmt(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}