{
  "module_name": "nvmem-provider.h",
  "hash_id": "9125d0a392e5d120839d1d7a2aa18a604dbae5b9f9501771107a0776f51ef13e",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/nvmem-provider.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_NVMEM_PROVIDER_H\n#define _LINUX_NVMEM_PROVIDER_H\n\n#include <linux/device/driver.h>\n#include <linux/err.h>\n#include <linux/errno.h>\n#include <linux/gpio/consumer.h>\n\nstruct nvmem_device;\ntypedef int (*nvmem_reg_read_t)(void *priv, unsigned int offset,\n\t\t\t\tvoid *val, size_t bytes);\ntypedef int (*nvmem_reg_write_t)(void *priv, unsigned int offset,\n\t\t\t\t void *val, size_t bytes);\n \ntypedef int (*nvmem_cell_post_process_t)(void *priv, const char *id, int index,\n\t\t\t\t\t unsigned int offset, void *buf,\n\t\t\t\t\t size_t bytes);\n\nenum nvmem_type {\n\tNVMEM_TYPE_UNKNOWN = 0,\n\tNVMEM_TYPE_EEPROM,\n\tNVMEM_TYPE_OTP,\n\tNVMEM_TYPE_BATTERY_BACKED,\n\tNVMEM_TYPE_FRAM,\n};\n\n#define NVMEM_DEVID_NONE\t(-1)\n#define NVMEM_DEVID_AUTO\t(-2)\n\n \nstruct nvmem_keepout {\n\tunsigned int start;\n\tunsigned int end;\n\tunsigned char value;\n};\n\n \nstruct nvmem_cell_info {\n\tconst char\t\t*name;\n\tunsigned int\t\toffset;\n\tsize_t\t\t\traw_len;\n\tunsigned int\t\tbytes;\n\tunsigned int\t\tbit_offset;\n\tunsigned int\t\tnbits;\n\tstruct device_node\t*np;\n\tnvmem_cell_post_process_t read_post_process;\n\tvoid\t\t\t*priv;\n};\n\n \nstruct nvmem_config {\n\tstruct device\t\t*dev;\n\tconst char\t\t*name;\n\tint\t\t\tid;\n\tstruct module\t\t*owner;\n\tconst struct nvmem_cell_info\t*cells;\n\tint\t\t\tncells;\n\tconst struct nvmem_keepout *keepout;\n\tunsigned int\t\tnkeepout;\n\tenum nvmem_type\t\ttype;\n\tbool\t\t\tread_only;\n\tbool\t\t\troot_only;\n\tbool\t\t\tignore_wp;\n\tstruct nvmem_layout\t*layout;\n\tstruct device_node\t*of_node;\n\tbool\t\t\tno_of_node;\n\tnvmem_reg_read_t\treg_read;\n\tnvmem_reg_write_t\treg_write;\n\tint\tsize;\n\tint\tword_size;\n\tint\tstride;\n\tvoid\t*priv;\n\t \n\tbool\t\t\tcompat;\n\tstruct device\t\t*base_dev;\n};\n\n \nstruct nvmem_cell_table {\n\tconst char\t\t*nvmem_name;\n\tconst struct nvmem_cell_info\t*cells;\n\tsize_t\t\t\tncells;\n\tstruct list_head\tnode;\n};\n\n \nstruct nvmem_layout {\n\tconst char *name;\n\tconst struct of_device_id *of_match_table;\n\tint (*add_cells)(struct device *dev, struct nvmem_device *nvmem,\n\t\t\t struct nvmem_layout *layout);\n\tvoid (*fixup_cell_info)(struct nvmem_device *nvmem,\n\t\t\t\tstruct nvmem_layout *layout,\n\t\t\t\tstruct nvmem_cell_info *cell);\n\n\t \n\tstruct module *owner;\n\tstruct list_head node;\n};\n\n#if IS_ENABLED(CONFIG_NVMEM)\n\nstruct nvmem_device *nvmem_register(const struct nvmem_config *cfg);\nvoid nvmem_unregister(struct nvmem_device *nvmem);\n\nstruct nvmem_device *devm_nvmem_register(struct device *dev,\n\t\t\t\t\t const struct nvmem_config *cfg);\n\nvoid nvmem_add_cell_table(struct nvmem_cell_table *table);\nvoid nvmem_del_cell_table(struct nvmem_cell_table *table);\n\nint nvmem_add_one_cell(struct nvmem_device *nvmem,\n\t\t       const struct nvmem_cell_info *info);\n\nint __nvmem_layout_register(struct nvmem_layout *layout, struct module *owner);\n#define nvmem_layout_register(layout) \\\n\t__nvmem_layout_register(layout, THIS_MODULE)\nvoid nvmem_layout_unregister(struct nvmem_layout *layout);\n\nconst void *nvmem_layout_get_match_data(struct nvmem_device *nvmem,\n\t\t\t\t\tstruct nvmem_layout *layout);\n\n#else\n\nstatic inline struct nvmem_device *nvmem_register(const struct nvmem_config *c)\n{\n\treturn ERR_PTR(-EOPNOTSUPP);\n}\n\nstatic inline void nvmem_unregister(struct nvmem_device *nvmem) {}\n\nstatic inline struct nvmem_device *\ndevm_nvmem_register(struct device *dev, const struct nvmem_config *c)\n{\n\treturn nvmem_register(c);\n}\n\nstatic inline void nvmem_add_cell_table(struct nvmem_cell_table *table) {}\nstatic inline void nvmem_del_cell_table(struct nvmem_cell_table *table) {}\nstatic inline int nvmem_add_one_cell(struct nvmem_device *nvmem,\n\t\t\t\t     const struct nvmem_cell_info *info)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline int nvmem_layout_register(struct nvmem_layout *layout)\n{\n\treturn -EOPNOTSUPP;\n}\n\nstatic inline void nvmem_layout_unregister(struct nvmem_layout *layout) {}\n\nstatic inline const void *\nnvmem_layout_get_match_data(struct nvmem_device *nvmem,\n\t\t\t    struct nvmem_layout *layout)\n{\n\treturn NULL;\n}\n\n#endif  \n\n#define module_nvmem_layout_driver(__layout_driver)\t\t\\\n\tmodule_driver(__layout_driver, nvmem_layout_register,\t\\\n\t\t      nvmem_layout_unregister)\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}