{
  "module_name": "tty_port.h",
  "hash_id": "9cd1363baf1ce58ac6b11bd595b7cf8a70052cbac1618d8d9ef63c57f0b0795a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/tty_port.h",
  "human_readable_source": " \n#ifndef _LINUX_TTY_PORT_H\n#define _LINUX_TTY_PORT_H\n\n#include <linux/kfifo.h>\n#include <linux/kref.h>\n#include <linux/mutex.h>\n#include <linux/tty_buffer.h>\n#include <linux/wait.h>\n\nstruct attribute_group;\nstruct tty_driver;\nstruct tty_port;\nstruct tty_struct;\n\n \nstruct tty_port_operations {\n\tbool (*carrier_raised)(struct tty_port *port);\n\tvoid (*dtr_rts)(struct tty_port *port, bool active);\n\tvoid (*shutdown)(struct tty_port *port);\n\tint (*activate)(struct tty_port *port, struct tty_struct *tty);\n\tvoid (*destruct)(struct tty_port *port);\n};\n\nstruct tty_port_client_operations {\n\tsize_t (*receive_buf)(struct tty_port *port, const u8 *cp, const u8 *fp,\n\t\t\t      size_t count);\n\tvoid (*lookahead_buf)(struct tty_port *port, const u8 *cp,\n\t\t\t      const u8 *fp, size_t count);\n\tvoid (*write_wakeup)(struct tty_port *port);\n};\n\nextern const struct tty_port_client_operations tty_port_default_client_ops;\n\n \nstruct tty_port {\n\tstruct tty_bufhead\tbuf;\n\tstruct tty_struct\t*tty;\n\tstruct tty_struct\t*itty;\n\tconst struct tty_port_operations *ops;\n\tconst struct tty_port_client_operations *client_ops;\n\tspinlock_t\t\tlock;\n\tint\t\t\tblocked_open;\n\tint\t\t\tcount;\n\twait_queue_head_t\topen_wait;\n\twait_queue_head_t\tdelta_msr_wait;\n\tunsigned long\t\tflags;\n\tunsigned long\t\tiflags;\n\tunsigned char\t\tconsole:1;\n\tstruct mutex\t\tmutex;\n\tstruct mutex\t\tbuf_mutex;\n\tunsigned char\t\t*xmit_buf;\n\tDECLARE_KFIFO_PTR(xmit_fifo, unsigned char);\n\tunsigned int\t\tclose_delay;\n\tunsigned int\t\tclosing_wait;\n\tint\t\t\tdrain_delay;\n\tstruct kref\t\tkref;\n\tvoid\t\t\t*client_data;\n};\n\n \n#define TTY_PORT_INITIALIZED\t0\t \n#define TTY_PORT_SUSPENDED\t1\t \n#define TTY_PORT_ACTIVE\t\t2\t \n\n \n#define TTY_PORT_CTS_FLOW\t3\t \n#define TTY_PORT_CHECK_CD\t4\t \n#define TTY_PORT_KOPENED\t5\t \n\nvoid tty_port_init(struct tty_port *port);\nvoid tty_port_link_device(struct tty_port *port, struct tty_driver *driver,\n\t\tunsigned index);\nstruct device *tty_port_register_device(struct tty_port *port,\n\t\tstruct tty_driver *driver, unsigned index,\n\t\tstruct device *device);\nstruct device *tty_port_register_device_attr(struct tty_port *port,\n\t\tstruct tty_driver *driver, unsigned index,\n\t\tstruct device *device, void *drvdata,\n\t\tconst struct attribute_group **attr_grp);\nstruct device *tty_port_register_device_serdev(struct tty_port *port,\n\t\tstruct tty_driver *driver, unsigned index,\n\t\tstruct device *device);\nstruct device *tty_port_register_device_attr_serdev(struct tty_port *port,\n\t\tstruct tty_driver *driver, unsigned index,\n\t\tstruct device *device, void *drvdata,\n\t\tconst struct attribute_group **attr_grp);\nvoid tty_port_unregister_device(struct tty_port *port,\n\t\tstruct tty_driver *driver, unsigned index);\nint tty_port_alloc_xmit_buf(struct tty_port *port);\nvoid tty_port_free_xmit_buf(struct tty_port *port);\nvoid tty_port_destroy(struct tty_port *port);\nvoid tty_port_put(struct tty_port *port);\n\nstatic inline struct tty_port *tty_port_get(struct tty_port *port)\n{\n\tif (port && kref_get_unless_zero(&port->kref))\n\t\treturn port;\n\treturn NULL;\n}\n\n \nstatic inline bool tty_port_cts_enabled(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_CTS_FLOW, &port->iflags);\n}\n\nstatic inline void tty_port_set_cts_flow(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_CTS_FLOW, &port->iflags, val);\n}\n\nstatic inline bool tty_port_active(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_ACTIVE, &port->iflags);\n}\n\nstatic inline void tty_port_set_active(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_ACTIVE, &port->iflags, val);\n}\n\nstatic inline bool tty_port_check_carrier(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_CHECK_CD, &port->iflags);\n}\n\nstatic inline void tty_port_set_check_carrier(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_CHECK_CD, &port->iflags, val);\n}\n\nstatic inline bool tty_port_suspended(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_SUSPENDED, &port->iflags);\n}\n\nstatic inline void tty_port_set_suspended(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_SUSPENDED, &port->iflags, val);\n}\n\nstatic inline bool tty_port_initialized(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_INITIALIZED, &port->iflags);\n}\n\nstatic inline void tty_port_set_initialized(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_INITIALIZED, &port->iflags, val);\n}\n\nstatic inline bool tty_port_kopened(const struct tty_port *port)\n{\n\treturn test_bit(TTY_PORT_KOPENED, &port->iflags);\n}\n\nstatic inline void tty_port_set_kopened(struct tty_port *port, bool val)\n{\n\tassign_bit(TTY_PORT_KOPENED, &port->iflags, val);\n}\n\nstruct tty_struct *tty_port_tty_get(struct tty_port *port);\nvoid tty_port_tty_set(struct tty_port *port, struct tty_struct *tty);\nbool tty_port_carrier_raised(struct tty_port *port);\nvoid tty_port_raise_dtr_rts(struct tty_port *port);\nvoid tty_port_lower_dtr_rts(struct tty_port *port);\nvoid tty_port_hangup(struct tty_port *port);\nvoid tty_port_tty_hangup(struct tty_port *port, bool check_clocal);\nvoid tty_port_tty_wakeup(struct tty_port *port);\nint tty_port_block_til_ready(struct tty_port *port, struct tty_struct *tty,\n\t\tstruct file *filp);\nint tty_port_close_start(struct tty_port *port, struct tty_struct *tty,\n\t\tstruct file *filp);\nvoid tty_port_close_end(struct tty_port *port, struct tty_struct *tty);\nvoid tty_port_close(struct tty_port *port, struct tty_struct *tty,\n\t\tstruct file *filp);\nint tty_port_install(struct tty_port *port, struct tty_driver *driver,\n\t\tstruct tty_struct *tty);\nint tty_port_open(struct tty_port *port, struct tty_struct *tty,\n\t\tstruct file *filp);\n\nstatic inline int tty_port_users(struct tty_port *port)\n{\n\treturn port->count + port->blocked_open;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}