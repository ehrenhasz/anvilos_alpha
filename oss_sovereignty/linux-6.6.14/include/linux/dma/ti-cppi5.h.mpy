{
  "module_name": "ti-cppi5.h",
  "hash_id": "b3304fd04a8989b4c38fbc01c5dd492469504b5cb2a6544b69b3f36d3c06f562",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/dma/ti-cppi5.h",
  "human_readable_source": " \n \n\n#ifndef __TI_CPPI5_H__\n#define __TI_CPPI5_H__\n\n#include <linux/bitops.h>\n#include <linux/printk.h>\n#include <linux/bug.h>\n\n \nstruct cppi5_desc_hdr_t {\n\tu32 pkt_info0;\n\tu32 pkt_info1;\n\tu32 pkt_info2;\n\tu32 src_dst_tag;\n} __packed;\n\n \nstruct cppi5_host_desc_t {\n\tstruct cppi5_desc_hdr_t hdr;\n\tu64 next_desc;\n\tu64 buf_ptr;\n\tu32 buf_info1;\n\tu32 org_buf_len;\n\tu64 org_buf_ptr;\n\tu32 epib[];\n} __packed;\n\n#define CPPI5_DESC_MIN_ALIGN\t\t\t(16U)\n\n#define CPPI5_INFO0_HDESC_EPIB_SIZE\t\t(16U)\n#define CPPI5_INFO0_HDESC_PSDATA_MAX_SIZE\t(128U)\n\n#define CPPI5_INFO0_HDESC_TYPE_SHIFT\t\t(30U)\n#define CPPI5_INFO0_HDESC_TYPE_MASK\t\tGENMASK(31, 30)\n#define   CPPI5_INFO0_DESC_TYPE_VAL_HOST\t(1U)\n#define   CPPI5_INFO0_DESC_TYPE_VAL_MONO\t(2U)\n#define   CPPI5_INFO0_DESC_TYPE_VAL_TR\t\t(3U)\n#define CPPI5_INFO0_HDESC_EPIB_PRESENT\t\tBIT(29)\n \n#define CPPI5_INFO0_HDESC_PSINFO_LOCATION\tBIT(28)\n#define CPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT\t(22U)\n#define CPPI5_INFO0_HDESC_PSINFO_SIZE_MASK\tGENMASK(27, 22)\n#define CPPI5_INFO0_HDESC_PKTLEN_SHIFT\t\t(0)\n#define CPPI5_INFO0_HDESC_PKTLEN_MASK\t\tGENMASK(21, 0)\n\n#define CPPI5_INFO1_DESC_PKTERROR_SHIFT\t\t(28U)\n#define CPPI5_INFO1_DESC_PKTERROR_MASK\t\tGENMASK(31, 28)\n#define CPPI5_INFO1_HDESC_PSFLGS_SHIFT\t\t(24U)\n#define CPPI5_INFO1_HDESC_PSFLGS_MASK\t\tGENMASK(27, 24)\n#define CPPI5_INFO1_DESC_PKTID_SHIFT\t\t(14U)\n#define CPPI5_INFO1_DESC_PKTID_MASK\t\tGENMASK(23, 14)\n#define CPPI5_INFO1_DESC_FLOWID_SHIFT\t\t(0)\n#define CPPI5_INFO1_DESC_FLOWID_MASK\t\tGENMASK(13, 0)\n#define CPPI5_INFO1_DESC_FLOWID_DEFAULT\t\tCPPI5_INFO1_DESC_FLOWID_MASK\n\n#define CPPI5_INFO2_HDESC_PKTTYPE_SHIFT\t\t(27U)\n#define CPPI5_INFO2_HDESC_PKTTYPE_MASK\t\tGENMASK(31, 27)\n \n#define CPPI5_INFO2_HDESC_RETPOLICY\t\tBIT(18)\n \n#define CPPI5_INFO2_HDESC_EARLYRET\t\tBIT(17)\n \n#define CPPI5_INFO2_DESC_RETPUSHPOLICY\t\tBIT(16)\n#define CPPI5_INFO2_DESC_RETP_MASK\t\tGENMASK(18, 16)\n\n#define CPPI5_INFO2_DESC_RETQ_SHIFT\t\t(0)\n#define CPPI5_INFO2_DESC_RETQ_MASK\t\tGENMASK(15, 0)\n\n#define CPPI5_INFO3_DESC_SRCTAG_SHIFT\t\t(16U)\n#define CPPI5_INFO3_DESC_SRCTAG_MASK\t\tGENMASK(31, 16)\n#define CPPI5_INFO3_DESC_DSTTAG_SHIFT\t\t(0)\n#define CPPI5_INFO3_DESC_DSTTAG_MASK\t\tGENMASK(15, 0)\n\n#define CPPI5_BUFINFO1_HDESC_DATA_LEN_SHIFT\t(0)\n#define CPPI5_BUFINFO1_HDESC_DATA_LEN_MASK\tGENMASK(27, 0)\n\n#define CPPI5_OBUFINFO0_HDESC_BUF_LEN_SHIFT\t(0)\n#define CPPI5_OBUFINFO0_HDESC_BUF_LEN_MASK\tGENMASK(27, 0)\n\n \nstruct cppi5_desc_epib_t {\n\tu32 timestamp;\t \n\tu32 sw_info0;\t \n\tu32 sw_info1;\t \n\tu32 sw_info2;\t \n};\n\n \nstruct cppi5_monolithic_desc_t {\n\tstruct cppi5_desc_hdr_t hdr;\n\tu32 epib[];\n};\n\n#define CPPI5_INFO2_MDESC_DATA_OFFSET_SHIFT\t(18U)\n#define CPPI5_INFO2_MDESC_DATA_OFFSET_MASK\tGENMASK(26, 18)\n\n \n#define CPPI5_INFO0_TRDESC_RLDCNT_SHIFT\t\t(20U)\n#define CPPI5_INFO0_TRDESC_RLDCNT_MASK\t\tGENMASK(28, 20)\n#define CPPI5_INFO0_TRDESC_RLDCNT_MAX\t\t(0x1ff)\n#define CPPI5_INFO0_TRDESC_RLDCNT_INFINITE\tCPPI5_INFO0_TRDESC_RLDCNT_MAX\n#define CPPI5_INFO0_TRDESC_RLDIDX_SHIFT\t\t(14U)\n#define CPPI5_INFO0_TRDESC_RLDIDX_MASK\t\tGENMASK(19, 14)\n#define CPPI5_INFO0_TRDESC_RLDIDX_MAX\t\t(0x3f)\n#define CPPI5_INFO0_TRDESC_LASTIDX_SHIFT\t(0)\n#define CPPI5_INFO0_TRDESC_LASTIDX_MASK\t\tGENMASK(13, 0)\n\n#define CPPI5_INFO1_TRDESC_RECSIZE_SHIFT\t(24U)\n#define CPPI5_INFO1_TRDESC_RECSIZE_MASK\t\tGENMASK(26, 24)\n#define   CPPI5_INFO1_TRDESC_RECSIZE_VAL_16B\t(0)\n#define   CPPI5_INFO1_TRDESC_RECSIZE_VAL_32B\t(1U)\n#define   CPPI5_INFO1_TRDESC_RECSIZE_VAL_64B\t(2U)\n#define   CPPI5_INFO1_TRDESC_RECSIZE_VAL_128B\t(3U)\n\nstatic inline void cppi5_desc_dump(void *desc, u32 size)\n{\n\tprint_hex_dump(KERN_ERR, \"dump udmap_desc: \", DUMP_PREFIX_NONE,\n\t\t       32, 4, desc, size, false);\n}\n\n#define CPPI5_TDCM_MARKER\t\t\t(0x1)\n \nstatic inline bool cppi5_desc_is_tdcm(dma_addr_t paddr)\n{\n\treturn (paddr & CPPI5_TDCM_MARKER) ? true : false;\n}\n\n \nstatic inline u32 cppi5_desc_get_type(struct cppi5_desc_hdr_t *desc_hdr)\n{\n\treturn (desc_hdr->pkt_info0 & CPPI5_INFO0_HDESC_TYPE_MASK) >>\n\t\tCPPI5_INFO0_HDESC_TYPE_SHIFT;\n}\n\n \nstatic inline u32 cppi5_desc_get_errflags(struct cppi5_desc_hdr_t *desc_hdr)\n{\n\treturn (desc_hdr->pkt_info1 & CPPI5_INFO1_DESC_PKTERROR_MASK) >>\n\t\tCPPI5_INFO1_DESC_PKTERROR_SHIFT;\n}\n\n \nstatic inline void cppi5_desc_get_pktids(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t\t u32 *pkt_id, u32 *flow_id)\n{\n\t*pkt_id = (desc_hdr->pkt_info1 & CPPI5_INFO1_DESC_PKTID_MASK) >>\n\t\t   CPPI5_INFO1_DESC_PKTID_SHIFT;\n\t*flow_id = (desc_hdr->pkt_info1 & CPPI5_INFO1_DESC_FLOWID_MASK) >>\n\t\t    CPPI5_INFO1_DESC_FLOWID_SHIFT;\n}\n\n \nstatic inline void cppi5_desc_set_pktids(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t\t u32 pkt_id, u32 flow_id)\n{\n\tdesc_hdr->pkt_info1 &= ~(CPPI5_INFO1_DESC_PKTID_MASK |\n\t\t\t\t CPPI5_INFO1_DESC_FLOWID_MASK);\n\tdesc_hdr->pkt_info1 |= (pkt_id << CPPI5_INFO1_DESC_PKTID_SHIFT) &\n\t\t\t\tCPPI5_INFO1_DESC_PKTID_MASK;\n\tdesc_hdr->pkt_info1 |= (flow_id << CPPI5_INFO1_DESC_FLOWID_SHIFT) &\n\t\t\t\tCPPI5_INFO1_DESC_FLOWID_MASK;\n}\n\n \nstatic inline void cppi5_desc_set_retpolicy(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t\t    u32 flags, u32 return_ring_id)\n{\n\tdesc_hdr->pkt_info2 &= ~(CPPI5_INFO2_DESC_RETP_MASK |\n\t\t\t\t CPPI5_INFO2_DESC_RETQ_MASK);\n\tdesc_hdr->pkt_info2 |= flags & CPPI5_INFO2_DESC_RETP_MASK;\n\tdesc_hdr->pkt_info2 |= return_ring_id & CPPI5_INFO2_DESC_RETQ_MASK;\n}\n\n \nstatic inline void cppi5_desc_get_tags_ids(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t\t   u32 *src_tag_id, u32 *dst_tag_id)\n{\n\tif (src_tag_id)\n\t\t*src_tag_id = (desc_hdr->src_dst_tag &\n\t\t\t      CPPI5_INFO3_DESC_SRCTAG_MASK) >>\n\t\t\t      CPPI5_INFO3_DESC_SRCTAG_SHIFT;\n\tif (dst_tag_id)\n\t\t*dst_tag_id = desc_hdr->src_dst_tag &\n\t\t\t      CPPI5_INFO3_DESC_DSTTAG_MASK;\n}\n\n \nstatic inline void cppi5_desc_set_tags_ids(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t\t   u32 src_tag_id, u32 dst_tag_id)\n{\n\tdesc_hdr->src_dst_tag = (src_tag_id << CPPI5_INFO3_DESC_SRCTAG_SHIFT) &\n\t\t\t\tCPPI5_INFO3_DESC_SRCTAG_MASK;\n\tdesc_hdr->src_dst_tag |= dst_tag_id & CPPI5_INFO3_DESC_DSTTAG_MASK;\n}\n\n \nstatic inline u32 cppi5_hdesc_calc_size(bool epib, u32 psdata_size,\n\t\t\t\t\tu32 sw_data_size)\n{\n\tu32 desc_size;\n\n\tif (psdata_size > CPPI5_INFO0_HDESC_PSDATA_MAX_SIZE)\n\t\treturn 0;\n\n\tdesc_size = sizeof(struct cppi5_host_desc_t) + psdata_size +\n\t\t    sw_data_size;\n\n\tif (epib)\n\t\tdesc_size += CPPI5_INFO0_HDESC_EPIB_SIZE;\n\n\treturn ALIGN(desc_size, CPPI5_DESC_MIN_ALIGN);\n}\n\n \nstatic inline void cppi5_hdesc_init(struct cppi5_host_desc_t *desc, u32 flags,\n\t\t\t\t    u32 psdata_size)\n{\n\tdesc->hdr.pkt_info0 = (CPPI5_INFO0_DESC_TYPE_VAL_HOST <<\n\t\t\t       CPPI5_INFO0_HDESC_TYPE_SHIFT) | (flags);\n\tdesc->hdr.pkt_info0 |= ((psdata_size >> 2) <<\n\t\t\t\tCPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT) &\n\t\t\t\tCPPI5_INFO0_HDESC_PSINFO_SIZE_MASK;\n\tdesc->next_desc = 0;\n}\n\n \nstatic inline void cppi5_hdesc_update_flags(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t    u32 flags)\n{\n\tdesc->hdr.pkt_info0 &= ~(CPPI5_INFO0_HDESC_EPIB_PRESENT |\n\t\t\t\t CPPI5_INFO0_HDESC_PSINFO_LOCATION);\n\tdesc->hdr.pkt_info0 |= flags;\n}\n\n \nstatic inline void\ncppi5_hdesc_update_psdata_size(struct cppi5_host_desc_t *desc, u32 psdata_size)\n{\n\tdesc->hdr.pkt_info0 &= ~CPPI5_INFO0_HDESC_PSINFO_SIZE_MASK;\n\tdesc->hdr.pkt_info0 |= ((psdata_size >> 2) <<\n\t\t\t\tCPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT) &\n\t\t\t\tCPPI5_INFO0_HDESC_PSINFO_SIZE_MASK;\n}\n\n \nstatic inline u32 cppi5_hdesc_get_psdata_size(struct cppi5_host_desc_t *desc)\n{\n\tu32 psdata_size = 0;\n\n\tif (!(desc->hdr.pkt_info0 & CPPI5_INFO0_HDESC_PSINFO_LOCATION))\n\t\tpsdata_size = (desc->hdr.pkt_info0 &\n\t\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_MASK) >>\n\t\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT;\n\n\treturn (psdata_size << 2);\n}\n\n \nstatic inline u32 cppi5_hdesc_get_pktlen(struct cppi5_host_desc_t *desc)\n{\n\treturn (desc->hdr.pkt_info0 & CPPI5_INFO0_HDESC_PKTLEN_MASK);\n}\n\n \nstatic inline void cppi5_hdesc_set_pktlen(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t  u32 pkt_len)\n{\n\tdesc->hdr.pkt_info0 &= ~CPPI5_INFO0_HDESC_PKTLEN_MASK;\n\tdesc->hdr.pkt_info0 |= (pkt_len & CPPI5_INFO0_HDESC_PKTLEN_MASK);\n}\n\n \nstatic inline u32 cppi5_hdesc_get_psflags(struct cppi5_host_desc_t *desc)\n{\n\treturn (desc->hdr.pkt_info1 & CPPI5_INFO1_HDESC_PSFLGS_MASK) >>\n\t\tCPPI5_INFO1_HDESC_PSFLGS_SHIFT;\n}\n\n \nstatic inline void cppi5_hdesc_set_psflags(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t   u32 ps_flags)\n{\n\tdesc->hdr.pkt_info1 &= ~CPPI5_INFO1_HDESC_PSFLGS_MASK;\n\tdesc->hdr.pkt_info1 |= (ps_flags <<\n\t\t\t\tCPPI5_INFO1_HDESC_PSFLGS_SHIFT) &\n\t\t\t\tCPPI5_INFO1_HDESC_PSFLGS_MASK;\n}\n\n \nstatic inline u32 cppi5_hdesc_get_pkttype(struct cppi5_host_desc_t *desc)\n{\n\treturn (desc->hdr.pkt_info2 & CPPI5_INFO2_HDESC_PKTTYPE_MASK) >>\n\t\tCPPI5_INFO2_HDESC_PKTTYPE_SHIFT;\n}\n\n \nstatic inline void cppi5_hdesc_set_pkttype(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t   u32 pkt_type)\n{\n\tdesc->hdr.pkt_info2 &= ~CPPI5_INFO2_HDESC_PKTTYPE_MASK;\n\tdesc->hdr.pkt_info2 |=\n\t\t\t(pkt_type << CPPI5_INFO2_HDESC_PKTTYPE_SHIFT) &\n\t\t\t CPPI5_INFO2_HDESC_PKTTYPE_MASK;\n}\n\n \nstatic inline void cppi5_hdesc_attach_buf(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t  dma_addr_t buf, u32 buf_data_len,\n\t\t\t\t\t  dma_addr_t obuf, u32 obuf_len)\n{\n\tdesc->buf_ptr = buf;\n\tdesc->buf_info1 = buf_data_len & CPPI5_BUFINFO1_HDESC_DATA_LEN_MASK;\n\tdesc->org_buf_ptr = obuf;\n\tdesc->org_buf_len = obuf_len & CPPI5_OBUFINFO0_HDESC_BUF_LEN_MASK;\n}\n\nstatic inline void cppi5_hdesc_get_obuf(struct cppi5_host_desc_t *desc,\n\t\t\t\t\tdma_addr_t *obuf, u32 *obuf_len)\n{\n\t*obuf = desc->org_buf_ptr;\n\t*obuf_len = desc->org_buf_len & CPPI5_OBUFINFO0_HDESC_BUF_LEN_MASK;\n}\n\nstatic inline void cppi5_hdesc_reset_to_original(struct cppi5_host_desc_t *desc)\n{\n\tdesc->buf_ptr = desc->org_buf_ptr;\n\tdesc->buf_info1 = desc->org_buf_len;\n}\n\n \nstatic inline void cppi5_hdesc_link_hbdesc(struct cppi5_host_desc_t *desc,\n\t\t\t\t\t   dma_addr_t hbuf_desc)\n{\n\tdesc->next_desc = hbuf_desc;\n}\n\nstatic inline dma_addr_t\ncppi5_hdesc_get_next_hbdesc(struct cppi5_host_desc_t *desc)\n{\n\treturn (dma_addr_t)desc->next_desc;\n}\n\nstatic inline void cppi5_hdesc_reset_hbdesc(struct cppi5_host_desc_t *desc)\n{\n\tdesc->hdr = (struct cppi5_desc_hdr_t) { 0 };\n\tdesc->next_desc = 0;\n}\n\n \nstatic inline bool cppi5_hdesc_epib_present(struct cppi5_desc_hdr_t *desc_hdr)\n{\n\treturn !!(desc_hdr->pkt_info0 & CPPI5_INFO0_HDESC_EPIB_PRESENT);\n}\n\n \nstatic inline void *cppi5_hdesc_get_psdata(struct cppi5_host_desc_t *desc)\n{\n\tu32 psdata_size;\n\tvoid *psdata;\n\n\tif (desc->hdr.pkt_info0 & CPPI5_INFO0_HDESC_PSINFO_LOCATION)\n\t\treturn NULL;\n\n\tpsdata_size = (desc->hdr.pkt_info0 &\n\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_MASK) >>\n\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT;\n\n\tif (!psdata_size)\n\t\treturn NULL;\n\n\tpsdata = &desc->epib;\n\n\tif (cppi5_hdesc_epib_present(&desc->hdr))\n\t\tpsdata += CPPI5_INFO0_HDESC_EPIB_SIZE;\n\n\treturn psdata;\n}\n\n \nstatic inline void *cppi5_hdesc_get_swdata(struct cppi5_host_desc_t *desc)\n{\n\tu32 psdata_size = 0;\n\tvoid *swdata;\n\n\tif (!(desc->hdr.pkt_info0 & CPPI5_INFO0_HDESC_PSINFO_LOCATION))\n\t\tpsdata_size = (desc->hdr.pkt_info0 &\n\t\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_MASK) >>\n\t\t\t       CPPI5_INFO0_HDESC_PSINFO_SIZE_SHIFT;\n\n\tswdata = &desc->epib;\n\n\tif (cppi5_hdesc_epib_present(&desc->hdr))\n\t\tswdata += CPPI5_INFO0_HDESC_EPIB_SIZE;\n\n\tswdata += (psdata_size << 2);\n\n\treturn swdata;\n}\n\n \n\n#define CPPI5_TR_TYPE_SHIFT\t\t\t(0U)\n#define CPPI5_TR_TYPE_MASK\t\t\tGENMASK(3, 0)\n#define CPPI5_TR_STATIC\t\t\t\tBIT(4)\n#define CPPI5_TR_WAIT\t\t\t\tBIT(5)\n#define CPPI5_TR_EVENT_SIZE_SHIFT\t\t(6U)\n#define CPPI5_TR_EVENT_SIZE_MASK\t\tGENMASK(7, 6)\n#define CPPI5_TR_TRIGGER0_SHIFT\t\t\t(8U)\n#define CPPI5_TR_TRIGGER0_MASK\t\t\tGENMASK(9, 8)\n#define CPPI5_TR_TRIGGER0_TYPE_SHIFT\t\t(10U)\n#define CPPI5_TR_TRIGGER0_TYPE_MASK\t\tGENMASK(11, 10)\n#define CPPI5_TR_TRIGGER1_SHIFT\t\t\t(12U)\n#define CPPI5_TR_TRIGGER1_MASK\t\t\tGENMASK(13, 12)\n#define CPPI5_TR_TRIGGER1_TYPE_SHIFT\t\t(14U)\n#define CPPI5_TR_TRIGGER1_TYPE_MASK\t\tGENMASK(15, 14)\n#define CPPI5_TR_CMD_ID_SHIFT\t\t\t(16U)\n#define CPPI5_TR_CMD_ID_MASK\t\t\tGENMASK(23, 16)\n#define CPPI5_TR_CSF_FLAGS_SHIFT\t\t(24U)\n#define CPPI5_TR_CSF_FLAGS_MASK\t\t\tGENMASK(31, 24)\n#define   CPPI5_TR_CSF_SA_INDIRECT\t\tBIT(0)\n#define   CPPI5_TR_CSF_DA_INDIRECT\t\tBIT(1)\n#define   CPPI5_TR_CSF_SUPR_EVT\t\t\tBIT(2)\n#define   CPPI5_TR_CSF_EOL_ADV_SHIFT\t\t(4U)\n#define   CPPI5_TR_CSF_EOL_ADV_MASK\t\tGENMASK(6, 4)\n#define   CPPI5_TR_CSF_EOL_ICNT0\t\tBIT(4)\n#define   CPPI5_TR_CSF_EOP\t\t\tBIT(7)\n\n \nenum cppi5_tr_types {\n\tCPPI5_TR_TYPE0 = 0,\n\tCPPI5_TR_TYPE1,\n\tCPPI5_TR_TYPE2,\n\tCPPI5_TR_TYPE3,\n\tCPPI5_TR_TYPE4,\n\tCPPI5_TR_TYPE5,\n\t \n\tCPPI5_TR_TYPE8 = 8,\n\tCPPI5_TR_TYPE9,\n\tCPPI5_TR_TYPE10,\n\tCPPI5_TR_TYPE11,\n\t \n\tCPPI5_TR_TYPE15 = 15,\n\tCPPI5_TR_TYPE_MAX\n};\n\n \nenum cppi5_tr_event_size {\n\tCPPI5_TR_EVENT_SIZE_COMPLETION,\n\tCPPI5_TR_EVENT_SIZE_ICNT1_DEC,\n\tCPPI5_TR_EVENT_SIZE_ICNT2_DEC,\n\tCPPI5_TR_EVENT_SIZE_ICNT3_DEC,\n\tCPPI5_TR_EVENT_SIZE_MAX\n};\n\n \nenum cppi5_tr_trigger {\n\tCPPI5_TR_TRIGGER_NONE,\n\tCPPI5_TR_TRIGGER_GLOBAL0,\n\tCPPI5_TR_TRIGGER_GLOBAL1,\n\tCPPI5_TR_TRIGGER_LOCAL_EVENT,\n\tCPPI5_TR_TRIGGER_MAX\n};\n\n \nenum cppi5_tr_trigger_type {\n\tCPPI5_TR_TRIGGER_TYPE_ICNT1_DEC,\n\tCPPI5_TR_TRIGGER_TYPE_ICNT2_DEC,\n\tCPPI5_TR_TRIGGER_TYPE_ICNT3_DEC,\n\tCPPI5_TR_TRIGGER_TYPE_ALL,\n\tCPPI5_TR_TRIGGER_TYPE_MAX\n};\n\ntypedef u32 cppi5_tr_flags_t;\n\n \nstruct cppi5_tr_type0_t {\n\tcppi5_tr_flags_t flags;\n\tu16 icnt0;\n\tu16 _reserved;\n\tu64 addr;\n} __aligned(16) __packed;\n\n \nstruct cppi5_tr_type1_t {\n\tcppi5_tr_flags_t flags;\n\tu16 icnt0;\n\tu16 icnt1;\n\tu64 addr;\n\ts32 dim1;\n} __aligned(32) __packed;\n\n \nstruct cppi5_tr_type2_t {\n\tcppi5_tr_flags_t flags;\n\tu16 icnt0;\n\tu16 icnt1;\n\tu64 addr;\n\ts32 dim1;\n\tu16 icnt2;\n\tu16 _reserved;\n\ts32 dim2;\n} __aligned(32) __packed;\n\n \nstruct cppi5_tr_type3_t {\n\tcppi5_tr_flags_t flags;\n\tu16 icnt0;\n\tu16 icnt1;\n\tu64 addr;\n\ts32 dim1;\n\tu16 icnt2;\n\tu16 icnt3;\n\ts32 dim2;\n\ts32 dim3;\n} __aligned(32) __packed;\n\n \nstruct cppi5_tr_type15_t {\n\tcppi5_tr_flags_t flags;\n\tu16 icnt0;\n\tu16 icnt1;\n\tu64 addr;\n\ts32 dim1;\n\tu16 icnt2;\n\tu16 icnt3;\n\ts32 dim2;\n\ts32 dim3;\n\tu32 _reserved;\n\ts32 ddim1;\n\tu64 daddr;\n\ts32 ddim2;\n\ts32 ddim3;\n\tu16 dicnt0;\n\tu16 dicnt1;\n\tu16 dicnt2;\n\tu16 dicnt3;\n} __aligned(64) __packed;\n\n \nstruct cppi5_tr_resp_t {\n\tu8 status;\n\tu8 _reserved;\n\tu8 cmd_id;\n\tu8 flags;\n} __packed;\n\n#define CPPI5_TR_RESPONSE_STATUS_TYPE_SHIFT\t(0U)\n#define CPPI5_TR_RESPONSE_STATUS_TYPE_MASK\tGENMASK(3, 0)\n#define CPPI5_TR_RESPONSE_STATUS_INFO_SHIFT\t(4U)\n#define CPPI5_TR_RESPONSE_STATUS_INFO_MASK\tGENMASK(7, 4)\n#define CPPI5_TR_RESPONSE_CMDID_SHIFT\t\t(16U)\n#define CPPI5_TR_RESPONSE_CMDID_MASK\t\tGENMASK(23, 16)\n#define CPPI5_TR_RESPONSE_CFG_SPECIFIC_SHIFT\t(24U)\n#define CPPI5_TR_RESPONSE_CFG_SPECIFIC_MASK\tGENMASK(31, 24)\n\n \nenum cppi5_tr_resp_status_type {\n\tCPPI5_TR_RESPONSE_STATUS_NONE,\n\tCPPI5_TR_RESPONSE_STATUS_TRANSFER_ERR,\n\tCPPI5_TR_RESPONSE_STATUS_ABORTED_ERR,\n\tCPPI5_TR_RESPONSE_STATUS_SUBMISSION_ERR,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_ERR,\n\tCPPI5_TR_RESPONSE_STATUS_TRANSFER_EXCEPTION,\n\tCPPI5_TR_RESPONSE_STATUS__TEARDOWN_FLUSH,\n\tCPPI5_TR_RESPONSE_STATUS_MAX\n};\n\n \nenum cppi5_tr_resp_status_submission {\n\tCPPI5_TR_RESPONSE_STATUS_SUBMISSION_ICNT0,\n\tCPPI5_TR_RESPONSE_STATUS_SUBMISSION_FIFO_FULL,\n\tCPPI5_TR_RESPONSE_STATUS_SUBMISSION_OWN,\n\tCPPI5_TR_RESPONSE_STATUS_SUBMISSION_MAX\n};\n\n \nenum cppi5_tr_resp_status_unsupported {\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_TR_TYPE,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_STATIC,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_EOL,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_CFG_SPECIFIC,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_AMODE,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_ELTYPE,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_DFMT,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_SECTR,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_AMODE_SPECIFIC,\n\tCPPI5_TR_RESPONSE_STATUS_UNSUPPORTED_MAX\n};\n\n \nstatic inline size_t cppi5_trdesc_calc_size(u32 tr_count, u32 tr_size)\n{\n\t \n\treturn tr_size * (tr_count + 1) +\n\t\tsizeof(struct cppi5_tr_resp_t) * tr_count;\n}\n\n \nstatic inline void cppi5_trdesc_init(struct cppi5_desc_hdr_t *desc_hdr,\n\t\t\t\t     u32 tr_count, u32 tr_size, u32 reload_idx,\n\t\t\t\t     u32 reload_count)\n{\n\tdesc_hdr->pkt_info0 = CPPI5_INFO0_DESC_TYPE_VAL_TR <<\n\t\t\t      CPPI5_INFO0_HDESC_TYPE_SHIFT;\n\tdesc_hdr->pkt_info0 |=\n\t\t\t(reload_count << CPPI5_INFO0_TRDESC_RLDCNT_SHIFT) &\n\t\t\tCPPI5_INFO0_TRDESC_RLDCNT_MASK;\n\tdesc_hdr->pkt_info0 |=\n\t\t\t(reload_idx << CPPI5_INFO0_TRDESC_RLDIDX_SHIFT) &\n\t\t\tCPPI5_INFO0_TRDESC_RLDIDX_MASK;\n\tdesc_hdr->pkt_info0 |= (tr_count - 1) & CPPI5_INFO0_TRDESC_LASTIDX_MASK;\n\n\tdesc_hdr->pkt_info1 |= ((ffs(tr_size >> 4) - 1) <<\n\t\t\t\tCPPI5_INFO1_TRDESC_RECSIZE_SHIFT) &\n\t\t\t\tCPPI5_INFO1_TRDESC_RECSIZE_MASK;\n}\n\n \nstatic inline void cppi5_tr_init(cppi5_tr_flags_t *flags,\n\t\t\t\t enum cppi5_tr_types type, bool static_tr,\n\t\t\t\t bool wait, enum cppi5_tr_event_size event_size,\n\t\t\t\t u32 cmd_id)\n{\n\t*flags = type;\n\t*flags |= (event_size << CPPI5_TR_EVENT_SIZE_SHIFT) &\n\t\t  CPPI5_TR_EVENT_SIZE_MASK;\n\n\t*flags |= (cmd_id << CPPI5_TR_CMD_ID_SHIFT) &\n\t\t  CPPI5_TR_CMD_ID_MASK;\n\n\tif (static_tr && (type == CPPI5_TR_TYPE8 || type == CPPI5_TR_TYPE9))\n\t\t*flags |= CPPI5_TR_STATIC;\n\n\tif (wait)\n\t\t*flags |= CPPI5_TR_WAIT;\n}\n\n \nstatic inline void cppi5_tr_set_trigger(cppi5_tr_flags_t *flags,\n\t\tenum cppi5_tr_trigger trigger0,\n\t\tenum cppi5_tr_trigger_type trigger0_type,\n\t\tenum cppi5_tr_trigger trigger1,\n\t\tenum cppi5_tr_trigger_type trigger1_type)\n{\n\t*flags &= ~(CPPI5_TR_TRIGGER0_MASK | CPPI5_TR_TRIGGER0_TYPE_MASK |\n\t\t    CPPI5_TR_TRIGGER1_MASK | CPPI5_TR_TRIGGER1_TYPE_MASK);\n\t*flags |= (trigger0 << CPPI5_TR_TRIGGER0_SHIFT) &\n\t\t  CPPI5_TR_TRIGGER0_MASK;\n\t*flags |= (trigger0_type << CPPI5_TR_TRIGGER0_TYPE_SHIFT) &\n\t\t  CPPI5_TR_TRIGGER0_TYPE_MASK;\n\n\t*flags |= (trigger1 << CPPI5_TR_TRIGGER1_SHIFT) &\n\t\t  CPPI5_TR_TRIGGER1_MASK;\n\t*flags |= (trigger1_type << CPPI5_TR_TRIGGER1_TYPE_SHIFT) &\n\t\t  CPPI5_TR_TRIGGER1_TYPE_MASK;\n}\n\n \nstatic inline void cppi5_tr_csf_set(cppi5_tr_flags_t *flags, u32 csf)\n{\n\t*flags &= ~CPPI5_TR_CSF_FLAGS_MASK;\n\t*flags |= (csf << CPPI5_TR_CSF_FLAGS_SHIFT) &\n\t\t  CPPI5_TR_CSF_FLAGS_MASK;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}