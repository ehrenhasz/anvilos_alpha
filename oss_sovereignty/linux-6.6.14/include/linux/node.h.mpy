{
  "module_name": "node.h",
  "hash_id": "a083623da01bbac9895e02707f565f2d2f822ef06fbd2c9a82247d222e5dbf35",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/node.h",
  "human_readable_source": " \n \n#ifndef _LINUX_NODE_H_\n#define _LINUX_NODE_H_\n\n#include <linux/device.h>\n#include <linux/cpumask.h>\n#include <linux/list.h>\n\n \nstruct node_hmem_attrs {\n\tunsigned int read_bandwidth;\n\tunsigned int write_bandwidth;\n\tunsigned int read_latency;\n\tunsigned int write_latency;\n};\n\nenum cache_indexing {\n\tNODE_CACHE_DIRECT_MAP,\n\tNODE_CACHE_INDEXED,\n\tNODE_CACHE_OTHER,\n};\n\nenum cache_write_policy {\n\tNODE_CACHE_WRITE_BACK,\n\tNODE_CACHE_WRITE_THROUGH,\n\tNODE_CACHE_WRITE_OTHER,\n};\n\n \nstruct node_cache_attrs {\n\tenum cache_indexing indexing;\n\tenum cache_write_policy write_policy;\n\tu64 size;\n\tu16 line_size;\n\tu8 level;\n};\n\n#ifdef CONFIG_HMEM_REPORTING\nvoid node_add_cache(unsigned int nid, struct node_cache_attrs *cache_attrs);\nvoid node_set_perf_attrs(unsigned int nid, struct node_hmem_attrs *hmem_attrs,\n\t\t\t unsigned access);\n#else\nstatic inline void node_add_cache(unsigned int nid,\n\t\t\t\t  struct node_cache_attrs *cache_attrs)\n{\n}\n\nstatic inline void node_set_perf_attrs(unsigned int nid,\n\t\t\t\t       struct node_hmem_attrs *hmem_attrs,\n\t\t\t\t       unsigned access)\n{\n}\n#endif\n\nstruct node {\n\tstruct device\tdev;\n\tstruct list_head access_list;\n#ifdef CONFIG_HMEM_REPORTING\n\tstruct list_head cache_attrs;\n\tstruct device *cache_dev;\n#endif\n};\n\nstruct memory_block;\nextern struct node *node_devices[];\n\n#if defined(CONFIG_MEMORY_HOTPLUG) && defined(CONFIG_NUMA)\nvoid register_memory_blocks_under_node(int nid, unsigned long start_pfn,\n\t\t\t\t       unsigned long end_pfn,\n\t\t\t\t       enum meminit_context context);\n#else\nstatic inline void register_memory_blocks_under_node(int nid, unsigned long start_pfn,\n\t\t\t\t\t\t     unsigned long end_pfn,\n\t\t\t\t\t\t     enum meminit_context context)\n{\n}\n#endif\n\nextern void unregister_node(struct node *node);\n#ifdef CONFIG_NUMA\nextern void node_dev_init(void);\n \nextern int __register_one_node(int nid);\n\n \nstatic inline int register_one_node(int nid)\n{\n\tint error = 0;\n\n\tif (node_online(nid)) {\n\t\tstruct pglist_data *pgdat = NODE_DATA(nid);\n\t\tunsigned long start_pfn = pgdat->node_start_pfn;\n\t\tunsigned long end_pfn = start_pfn + pgdat->node_spanned_pages;\n\n\t\terror = __register_one_node(nid);\n\t\tif (error)\n\t\t\treturn error;\n\t\tregister_memory_blocks_under_node(nid, start_pfn, end_pfn,\n\t\t\t\t\t\t  MEMINIT_EARLY);\n\t}\n\n\treturn error;\n}\n\nextern void unregister_one_node(int nid);\nextern int register_cpu_under_node(unsigned int cpu, unsigned int nid);\nextern int unregister_cpu_under_node(unsigned int cpu, unsigned int nid);\nextern void unregister_memory_block_under_nodes(struct memory_block *mem_blk);\n\nextern int register_memory_node_under_compute_node(unsigned int mem_nid,\n\t\t\t\t\t\t   unsigned int cpu_nid,\n\t\t\t\t\t\t   unsigned access);\n#else\nstatic inline void node_dev_init(void)\n{\n}\nstatic inline int __register_one_node(int nid)\n{\n\treturn 0;\n}\nstatic inline int register_one_node(int nid)\n{\n\treturn 0;\n}\nstatic inline int unregister_one_node(int nid)\n{\n\treturn 0;\n}\nstatic inline int register_cpu_under_node(unsigned int cpu, unsigned int nid)\n{\n\treturn 0;\n}\nstatic inline int unregister_cpu_under_node(unsigned int cpu, unsigned int nid)\n{\n\treturn 0;\n}\nstatic inline void unregister_memory_block_under_nodes(struct memory_block *mem_blk)\n{\n}\n#endif\n\n#define to_node(device) container_of(device, struct node, dev)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}