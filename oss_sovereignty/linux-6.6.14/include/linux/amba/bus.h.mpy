{
  "module_name": "bus.h",
  "hash_id": "e1bcf78aaf01703b06a8d3109882e65a4fa2b088aa918075edab5dcdf553eb72",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/amba/bus.h",
  "human_readable_source": " \n \n#ifndef ASMARM_AMBA_H\n#define ASMARM_AMBA_H\n\n#include <linux/clk.h>\n#include <linux/device.h>\n#include <linux/mod_devicetable.h>\n#include <linux/err.h>\n#include <linux/resource.h>\n#include <linux/regulator/consumer.h>\n\n#define AMBA_NR_IRQS\t9\n#define AMBA_CID\t0xb105f00d\n#define CORESIGHT_CID\t0xb105900d\n\n \n\n \nstruct amba_cs_uci_id {\n\tunsigned int devarch;\n\tunsigned int devarch_mask;\n\tunsigned int devtype;\n\tvoid *data;\n};\n\n \n#define UCI_REG_DEVTYPE_OFFSET\t0xFCC\n#define UCI_REG_DEVARCH_OFFSET\t0xFBC\n\nstruct clk;\n\nstruct amba_device {\n\tstruct device\t\tdev;\n\tstruct resource\t\tres;\n\tstruct clk\t\t*pclk;\n\tstruct device_dma_parameters dma_parms;\n\tunsigned int\t\tperiphid;\n\tstruct mutex\t\tperiphid_lock;\n\tunsigned int\t\tcid;\n\tstruct amba_cs_uci_id\tuci;\n\tunsigned int\t\tirq[AMBA_NR_IRQS];\n\t \n\tconst char\t\t*driver_override;\n};\n\nstruct amba_driver {\n\tstruct device_driver\tdrv;\n\tint\t\t\t(*probe)(struct amba_device *, const struct amba_id *);\n\tvoid\t\t\t(*remove)(struct amba_device *);\n\tvoid\t\t\t(*shutdown)(struct amba_device *);\n\tconst struct amba_id\t*id_table;\n\t \n\tbool driver_managed_dma;\n};\n\n \nenum amba_vendor {\n\tAMBA_VENDOR_ARM = 0x41,\n\tAMBA_VENDOR_ST = 0x80,\n\tAMBA_VENDOR_QCOM = 0x51,\n\tAMBA_VENDOR_LSI = 0xb6,\n};\n\nextern struct bus_type amba_bustype;\n\n#define to_amba_device(d)\tcontainer_of_const(d, struct amba_device, dev)\n\n#define amba_get_drvdata(d)\tdev_get_drvdata(&d->dev)\n#define amba_set_drvdata(d,p)\tdev_set_drvdata(&d->dev, p)\n\n#ifdef CONFIG_ARM_AMBA\nint amba_driver_register(struct amba_driver *);\nvoid amba_driver_unregister(struct amba_driver *);\n#else\nstatic inline int amba_driver_register(struct amba_driver *drv)\n{\n\treturn -EINVAL;\n}\nstatic inline void amba_driver_unregister(struct amba_driver *drv)\n{\n}\n#endif\n\nstruct amba_device *amba_device_alloc(const char *, resource_size_t, size_t);\nvoid amba_device_put(struct amba_device *);\nint amba_device_add(struct amba_device *, struct resource *);\nint amba_device_register(struct amba_device *, struct resource *);\nvoid amba_device_unregister(struct amba_device *);\nint amba_request_regions(struct amba_device *, const char *);\nvoid amba_release_regions(struct amba_device *);\n\n \n#define AMBA_CONFIG_BITS(a) (((a) >> 24) & 0xff)\n#define AMBA_REV_BITS(a) (((a) >> 20) & 0x0f)\n#define AMBA_MANF_BITS(a) (((a) >> 12) & 0xff)\n#define AMBA_PART_BITS(a) ((a) & 0xfff)\n\n#define amba_config(d)\tAMBA_CONFIG_BITS((d)->periphid)\n#define amba_rev(d)\tAMBA_REV_BITS((d)->periphid)\n#define amba_manf(d)\tAMBA_MANF_BITS((d)->periphid)\n#define amba_part(d)\tAMBA_PART_BITS((d)->periphid)\n\n#define __AMBA_DEV(busid, data, mask)\t\t\t\t\\\n\t{\t\t\t\t\t\t\t\\\n\t\t.coherent_dma_mask = mask,\t\t\t\\\n\t\t.init_name = busid,\t\t\t\t\\\n\t\t.platform_data = data,\t\t\t\t\\\n\t}\n\n \n#define AMBA_APB_DEVICE(name, busid, id, base, irqs, data)\t\\\nstruct amba_device name##_device = {\t\t\t\t\\\n\t.dev = __AMBA_DEV(busid, data, 0),\t\t\t\\\n\t.res = DEFINE_RES_MEM(base, SZ_4K),\t\t\t\\\n\t.irq = irqs,\t\t\t\t\t\t\\\n\t.periphid = id,\t\t\t\t\t\t\\\n}\n\n \n#define AMBA_AHB_DEVICE(name, busid, id, base, irqs, data)\t\\\nstruct amba_device name##_device = {\t\t\t\t\\\n\t.dev = __AMBA_DEV(busid, data, ~0ULL),\t\t\t\\\n\t.res = DEFINE_RES_MEM(base, SZ_4K),\t\t\t\\\n\t.irq = irqs,\t\t\t\t\t\t\\\n\t.periphid = id,\t\t\t\t\t\t\\\n}\n\n \n#define module_amba_driver(__amba_drv) \\\n\tmodule_driver(__amba_drv, amba_driver_register, amba_driver_unregister)\n\n \n#define builtin_amba_driver(__amba_drv) \\\n\tbuiltin_driver(__amba_drv, amba_driver_register)\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}