{
  "module_name": "shdma-base.h",
  "hash_id": "c1e757acebed5bd4ec6399c7d246ed3620b06df12aea9a244727b85bc4df9c73",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/shdma-base.h",
  "human_readable_source": " \n\n#ifndef SHDMA_BASE_H\n#define SHDMA_BASE_H\n\n#include <linux/dmaengine.h>\n#include <linux/interrupt.h>\n#include <linux/list.h>\n#include <linux/types.h>\n\n \nenum shdma_pm_state {\n\tSHDMA_PM_ESTABLISHED,\n\tSHDMA_PM_BUSY,\n\tSHDMA_PM_PENDING,\n};\n\nstruct device;\n\n \n\nstruct shdma_slave {\n\tint slave_id;\n};\n\nstruct shdma_desc {\n\tstruct list_head node;\n\tstruct dma_async_tx_descriptor async_tx;\n\tenum dma_transfer_direction direction;\n\tsize_t partial;\n\tdma_cookie_t cookie;\n\tint chunks;\n\tint mark;\n\tbool cyclic;\t\t\t \n};\n\nstruct shdma_chan {\n\tspinlock_t chan_lock;\t\t \n\tstruct list_head ld_queue;\t \n\tstruct list_head ld_free;\t \n\tstruct dma_chan dma_chan;\t \n\tstruct device *dev;\t\t \n\tvoid *desc;\t\t\t \n\tint desc_num;\t\t\t \n\tsize_t max_xfer_len;\t\t \n\tint id;\t\t\t\t \n\tint irq;\t\t\t \n\tint slave_id;\t\t\t \n\tint real_slave_id;\t\t \n\tint hw_req;\t\t\t \n\tenum shdma_pm_state pm_state;\n};\n\n \nstruct shdma_ops {\n\tbool (*desc_completed)(struct shdma_chan *, struct shdma_desc *);\n\tvoid (*halt_channel)(struct shdma_chan *);\n\tbool (*channel_busy)(struct shdma_chan *);\n\tdma_addr_t (*slave_addr)(struct shdma_chan *);\n\tint (*desc_setup)(struct shdma_chan *, struct shdma_desc *,\n\t\t\t  dma_addr_t, dma_addr_t, size_t *);\n\tint (*set_slave)(struct shdma_chan *, int, dma_addr_t, bool);\n\tvoid (*setup_xfer)(struct shdma_chan *, int);\n\tvoid (*start_xfer)(struct shdma_chan *, struct shdma_desc *);\n\tstruct shdma_desc *(*embedded_desc)(void *, int);\n\tbool (*chan_irq)(struct shdma_chan *, int);\n\tsize_t (*get_partial)(struct shdma_chan *, struct shdma_desc *);\n};\n\nstruct shdma_dev {\n\tstruct dma_device dma_dev;\n\tstruct shdma_chan **schan;\n\tconst struct shdma_ops *ops;\n\tsize_t desc_size;\n};\n\n#define shdma_for_each_chan(c, d, i) for (i = 0, c = (d)->schan[0]; \\\n\t\t\t\ti < (d)->dma_dev.chancnt; c = (d)->schan[++i])\n\nint shdma_request_irq(struct shdma_chan *, int,\n\t\t\t   unsigned long, const char *);\nbool shdma_reset(struct shdma_dev *sdev);\nvoid shdma_chan_probe(struct shdma_dev *sdev,\n\t\t\t   struct shdma_chan *schan, int id);\nvoid shdma_chan_remove(struct shdma_chan *schan);\nint shdma_init(struct device *dev, struct shdma_dev *sdev,\n\t\t    int chan_num);\nvoid shdma_cleanup(struct shdma_dev *sdev);\n#if IS_ENABLED(CONFIG_SH_DMAE_BASE)\nbool shdma_chan_filter(struct dma_chan *chan, void *arg);\n#else\nstatic inline bool shdma_chan_filter(struct dma_chan *chan, void *arg)\n{\n\treturn false;\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}