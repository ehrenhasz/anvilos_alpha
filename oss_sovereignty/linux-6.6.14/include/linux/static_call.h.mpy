{
  "module_name": "static_call.h",
  "hash_id": "da750de1e2f2df3001037b8214b72ddaec171b9ab89eafa3f5a971a12d8fec2b",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/static_call.h",
  "human_readable_source": " \n#ifndef _LINUX_STATIC_CALL_H\n#define _LINUX_STATIC_CALL_H\n\n \n\n#include <linux/types.h>\n#include <linux/cpu.h>\n#include <linux/static_call_types.h>\n\n#ifdef CONFIG_HAVE_STATIC_CALL\n#include <asm/static_call.h>\n\n \nextern void arch_static_call_transform(void *site, void *tramp, void *func, bool tail);\n\n#define STATIC_CALL_TRAMP_ADDR(name) &STATIC_CALL_TRAMP(name)\n\n#else\n#define STATIC_CALL_TRAMP_ADDR(name) NULL\n#endif\n\n#define static_call_update(name, func)\t\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\ttypeof(&STATIC_CALL_TRAMP(name)) __F = (func);\t\t\t\\\n\t__static_call_update(&STATIC_CALL_KEY(name),\t\t\t\\\n\t\t\t     STATIC_CALL_TRAMP_ADDR(name), __F);\t\\\n})\n\n#define static_call_query(name) (READ_ONCE(STATIC_CALL_KEY(name).func))\n\n#ifdef CONFIG_HAVE_STATIC_CALL_INLINE\n\nextern int __init static_call_init(void);\n\nextern void static_call_force_reinit(void);\n\nstruct static_call_mod {\n\tstruct static_call_mod *next;\n\tstruct module *mod;  \n\tstruct static_call_site *sites;\n};\n\n \nstruct static_call_tramp_key {\n\ts32 tramp;\n\ts32 key;\n};\n\nextern void __static_call_update(struct static_call_key *key, void *tramp, void *func);\nextern int static_call_mod_init(struct module *mod);\nextern int static_call_text_reserved(void *start, void *end);\n\nextern long __static_call_return0(void);\n\n#define DEFINE_STATIC_CALL(name, _func)\t\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = _func,\t\t\t\t\t\t\\\n\t\t.type = 1,\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_TRAMP(name, _func)\n\n#define DEFINE_STATIC_CALL_NULL(name, _func)\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = NULL,\t\t\t\t\t\t\\\n\t\t.type = 1,\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_NULL_TRAMP(name)\n\n#define DEFINE_STATIC_CALL_RET0(name, _func)\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = __static_call_return0,\t\t\t\t\\\n\t\t.type = 1,\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_RET0_TRAMP(name)\n\n#define static_call_cond(name)\t(void)__static_call(name)\n\n#define EXPORT_STATIC_CALL(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_KEY(name));\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_TRAMP(name))\n#define EXPORT_STATIC_CALL_GPL(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_KEY(name));\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_TRAMP(name))\n\n \n#define EXPORT_STATIC_CALL_TRAMP(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_TRAMP(name));\t\t\t\t\\\n\tARCH_ADD_TRAMP_KEY(name)\n#define EXPORT_STATIC_CALL_TRAMP_GPL(name)\t\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_TRAMP(name));\t\t\t\\\n\tARCH_ADD_TRAMP_KEY(name)\n\n#elif defined(CONFIG_HAVE_STATIC_CALL)\n\nstatic inline int static_call_init(void) { return 0; }\n\n#define DEFINE_STATIC_CALL(name, _func)\t\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = _func,\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_TRAMP(name, _func)\n\n#define DEFINE_STATIC_CALL_NULL(name, _func)\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = NULL,\t\t\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_NULL_TRAMP(name)\n\n#define DEFINE_STATIC_CALL_RET0(name, _func)\t\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = __static_call_return0,\t\t\t\t\\\n\t};\t\t\t\t\t\t\t\t\\\n\tARCH_DEFINE_STATIC_CALL_RET0_TRAMP(name)\n\n#define static_call_cond(name)\t(void)__static_call(name)\n\nstatic inline\nvoid __static_call_update(struct static_call_key *key, void *tramp, void *func)\n{\n\tcpus_read_lock();\n\tWRITE_ONCE(key->func, func);\n\tarch_static_call_transform(NULL, tramp, func, false);\n\tcpus_read_unlock();\n}\n\nstatic inline int static_call_text_reserved(void *start, void *end)\n{\n\treturn 0;\n}\n\nextern long __static_call_return0(void);\n\n#define EXPORT_STATIC_CALL(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_KEY(name));\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_TRAMP(name))\n#define EXPORT_STATIC_CALL_GPL(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_KEY(name));\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_TRAMP(name))\n\n \n#define EXPORT_STATIC_CALL_TRAMP(name)\t\t\t\t\t\\\n\tEXPORT_SYMBOL(STATIC_CALL_TRAMP(name))\n#define EXPORT_STATIC_CALL_TRAMP_GPL(name)\t\t\t\t\\\n\tEXPORT_SYMBOL_GPL(STATIC_CALL_TRAMP(name))\n\n#else  \n\nstatic inline int static_call_init(void) { return 0; }\n\nstatic inline long __static_call_return0(void)\n{\n\treturn 0;\n}\n\n#define __DEFINE_STATIC_CALL(name, _func, _func_init)\t\t\t\\\n\tDECLARE_STATIC_CALL(name, _func);\t\t\t\t\\\n\tstruct static_call_key STATIC_CALL_KEY(name) = {\t\t\\\n\t\t.func = _func_init,\t\t\t\t\t\\\n\t}\n\n#define DEFINE_STATIC_CALL(name, _func)\t\t\t\t\t\\\n\t__DEFINE_STATIC_CALL(name, _func, _func)\n\n#define DEFINE_STATIC_CALL_NULL(name, _func)\t\t\t\t\\\n\t__DEFINE_STATIC_CALL(name, _func, NULL)\n\n#define DEFINE_STATIC_CALL_RET0(name, _func)\t\t\t\t\\\n\t__DEFINE_STATIC_CALL(name, _func, __static_call_return0)\n\nstatic inline void __static_call_nop(void) { }\n\n \n#define __static_call_cond(name)\t\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tvoid *func = READ_ONCE(STATIC_CALL_KEY(name).func);\t\t\\\n\tif (!func)\t\t\t\t\t\t\t\\\n\t\tfunc = &__static_call_nop;\t\t\t\t\\\n\t(typeof(STATIC_CALL_TRAMP(name))*)func;\t\t\t\t\\\n})\n\n#define static_call_cond(name)\t(void)__static_call_cond(name)\n\nstatic inline\nvoid __static_call_update(struct static_call_key *key, void *tramp, void *func)\n{\n\tWRITE_ONCE(key->func, func);\n}\n\nstatic inline int static_call_text_reserved(void *start, void *end)\n{\n\treturn 0;\n}\n\n#define EXPORT_STATIC_CALL(name)\tEXPORT_SYMBOL(STATIC_CALL_KEY(name))\n#define EXPORT_STATIC_CALL_GPL(name)\tEXPORT_SYMBOL_GPL(STATIC_CALL_KEY(name))\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}