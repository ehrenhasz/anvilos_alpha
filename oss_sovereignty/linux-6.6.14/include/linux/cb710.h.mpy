{
  "module_name": "cb710.h",
  "hash_id": "12887838774b5817ed9e556b0fdd6ee4f91ae9c55a85bf6edc018b84a0103aba",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/cb710.h",
  "human_readable_source": " \n \n#ifndef LINUX_CB710_DRIVER_H\n#define LINUX_CB710_DRIVER_H\n\n#include <linux/io.h>\n#include <linux/interrupt.h>\n#include <linux/spinlock.h>\n#include <linux/pci.h>\n#include <linux/platform_device.h>\n#include <linux/mmc/host.h>\n\nstruct cb710_slot;\n\ntypedef int (*cb710_irq_handler_t)(struct cb710_slot *);\n\n \nstruct cb710_slot {\n\tstruct platform_device\tpdev;\n\tvoid __iomem\t\t*iobase;\n\tcb710_irq_handler_t\tirq_handler;\n};\n\n \nstruct cb710_chip {\n\tstruct pci_dev\t\t*pdev;\n\tvoid __iomem\t\t*iobase;\n\tunsigned\t\tplatform_id;\n#ifdef CONFIG_CB710_DEBUG_ASSUMPTIONS\n\tatomic_t\t\tslot_refs_count;\n#endif\n\tunsigned\t\tslot_mask;\n\tunsigned\t\tslots;\n\tspinlock_t\t\tirq_lock;\n\tstruct cb710_slot\tslot[];\n};\n\n \n\n \n#define CB710_SLOT_MMC\t\t1\n#define CB710_SLOT_MS\t\t2\n#define CB710_SLOT_SM\t\t4\n\n \n#define CB710_PORT_ACCESSORS(t) \\\nstatic inline void cb710_write_port_##t(struct cb710_slot *slot,\t\\\n\tunsigned port, u##t value)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tiowrite##t(value, slot->iobase + port);\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic inline u##t cb710_read_port_##t(struct cb710_slot *slot,\t\t\\\n\tunsigned port)\t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\treturn ioread##t(slot->iobase + port);\t\t\t\t\\\n}\t\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\nstatic inline void cb710_modify_port_##t(struct cb710_slot *slot,\t\\\n\tunsigned port, u##t set, u##t clear)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tiowrite##t(\t\t\t\t\t\t\t\\\n\t\t(ioread##t(slot->iobase + port) & ~clear)|set,\t\t\\\n\t\tslot->iobase + port);\t\t\t\t\t\\\n}\n\nCB710_PORT_ACCESSORS(8)\nCB710_PORT_ACCESSORS(16)\nCB710_PORT_ACCESSORS(32)\n\nvoid cb710_pci_update_config_reg(struct pci_dev *pdev,\n\tint reg, uint32_t and, uint32_t xor);\nvoid cb710_set_irq_handler(struct cb710_slot *slot,\n\tcb710_irq_handler_t handler);\n\n \n\nstatic inline struct cb710_slot *cb710_pdev_to_slot(\n\tstruct platform_device *pdev)\n{\n\treturn container_of(pdev, struct cb710_slot, pdev);\n}\n\nstatic inline struct cb710_chip *cb710_slot_to_chip(struct cb710_slot *slot)\n{\n\treturn dev_get_drvdata(slot->pdev.dev.parent);\n}\n\nstatic inline struct device *cb710_slot_dev(struct cb710_slot *slot)\n{\n\treturn &slot->pdev.dev;\n}\n\nstatic inline struct device *cb710_chip_dev(struct cb710_chip *chip)\n{\n\treturn &chip->pdev->dev;\n}\n\n \n\n#ifdef CONFIG_CB710_DEBUG\nvoid cb710_dump_regs(struct cb710_chip *chip, unsigned dump);\n#else\n#define cb710_dump_regs(c, d) do {} while (0)\n#endif\n\n#define CB710_DUMP_REGS_MMC\t0x0F\n#define CB710_DUMP_REGS_MS\t0x30\n#define CB710_DUMP_REGS_SM\t0xC0\n#define CB710_DUMP_REGS_ALL\t0xFF\n#define CB710_DUMP_REGS_MASK\t0xFF\n\n#define CB710_DUMP_ACCESS_8\t0x100\n#define CB710_DUMP_ACCESS_16\t0x200\n#define CB710_DUMP_ACCESS_32\t0x400\n#define CB710_DUMP_ACCESS_ALL\t0x700\n#define CB710_DUMP_ACCESS_MASK\t0x700\n\n#endif  \n \n#ifndef LINUX_CB710_SG_H\n#define LINUX_CB710_SG_H\n\n#include <linux/highmem.h>\n#include <linux/scatterlist.h>\n\n \n\nuint32_t cb710_sg_dwiter_read_next_block(struct sg_mapping_iter *miter);\nvoid cb710_sg_dwiter_write_next_block(struct sg_mapping_iter *miter, uint32_t data);\n\n \nstatic inline void cb710_sg_dwiter_write_from_io(struct sg_mapping_iter *miter,\n\tvoid __iomem *port, size_t count)\n{\n\twhile (count-- > 0)\n\t\tcb710_sg_dwiter_write_next_block(miter, ioread32(port));\n}\n\n \nstatic inline void cb710_sg_dwiter_read_to_io(struct sg_mapping_iter *miter,\n\tvoid __iomem *port, size_t count)\n{\n\twhile (count-- > 0)\n\t\tiowrite32(cb710_sg_dwiter_read_next_block(miter), port);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}