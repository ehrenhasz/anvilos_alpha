{
  "module_name": "qed_ll2_if.h",
  "hash_id": "7048da7a695c55444db850fc55ad8399fa598cb6bf16b9c54917a8c159b0b942",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/qed/qed_ll2_if.h",
  "human_readable_source": " \n \n\n#ifndef _QED_LL2_IF_H\n#define _QED_LL2_IF_H\n\n#include <linux/types.h>\n#include <linux/interrupt.h>\n#include <linux/netdevice.h>\n#include <linux/pci.h>\n#include <linux/skbuff.h>\n#include <linux/kernel.h>\n#include <linux/slab.h>\n#include <linux/qed/qed_if.h>\n\nenum qed_ll2_conn_type {\n\tQED_LL2_TYPE_FCOE,\n\tQED_LL2_TYPE_TCP_ULP,\n\tQED_LL2_TYPE_TEST,\n\tQED_LL2_TYPE_OOO,\n\tQED_LL2_TYPE_RESERVED2,\n\tQED_LL2_TYPE_ROCE,\n\tQED_LL2_TYPE_IWARP,\n\tQED_LL2_TYPE_RESERVED3,\n\tMAX_QED_LL2_CONN_TYPE\n};\n\nenum qed_ll2_rx_conn_type {\n\tQED_LL2_RX_TYPE_LEGACY,\n\tQED_LL2_RX_TYPE_CTX,\n\tMAX_QED_LL2_RX_CONN_TYPE\n};\n\nenum qed_ll2_roce_flavor_type {\n\tQED_LL2_ROCE,\n\tQED_LL2_RROCE,\n\tMAX_QED_LL2_ROCE_FLAVOR_TYPE\n};\n\nenum qed_ll2_tx_dest {\n\tQED_LL2_TX_DEST_NW,  \n\tQED_LL2_TX_DEST_LB,  \n\tQED_LL2_TX_DEST_DROP,  \n\tQED_LL2_TX_DEST_MAX\n};\n\nenum qed_ll2_error_handle {\n\tQED_LL2_DROP_PACKET,\n\tQED_LL2_DO_NOTHING,\n\tQED_LL2_ASSERT,\n};\n\nstruct qed_ll2_stats {\n\tu64 gsi_invalid_hdr;\n\tu64 gsi_invalid_pkt_length;\n\tu64 gsi_unsupported_pkt_typ;\n\tu64 gsi_crcchksm_error;\n\n\tu64 packet_too_big_discard;\n\tu64 no_buff_discard;\n\n\tu64 rcv_ucast_bytes;\n\tu64 rcv_mcast_bytes;\n\tu64 rcv_bcast_bytes;\n\tu64 rcv_ucast_pkts;\n\tu64 rcv_mcast_pkts;\n\tu64 rcv_bcast_pkts;\n\n\tu64 sent_ucast_bytes;\n\tu64 sent_mcast_bytes;\n\tu64 sent_bcast_bytes;\n\tu64 sent_ucast_pkts;\n\tu64 sent_mcast_pkts;\n\tu64 sent_bcast_pkts;\n};\n\nstruct qed_ll2_comp_rx_data {\n\tvoid *cookie;\n\tdma_addr_t rx_buf_addr;\n\tu16 parse_flags;\n\tu16 err_flags;\n\tu16 vlan;\n\tbool b_last_packet;\n\tu8 connection_handle;\n\n\tunion {\n\t\tu16 packet_length;\n\t\tu16 data_length;\n\t} length;\n\n\tu32 opaque_data_0;\n\tu32 opaque_data_1;\n\n\t \n\tu32 src_qp;\n\tu16 qp_id;\n\n\tunion {\n\t\tu8 placement_offset;\n\t\tu8 data_length_error;\n\t} u;\n};\n\ntypedef\nvoid (*qed_ll2_complete_rx_packet_cb)(void *cxt,\n\t\t\t\t      struct qed_ll2_comp_rx_data *data);\n\ntypedef\nvoid (*qed_ll2_release_rx_packet_cb)(void *cxt,\n\t\t\t\t     u8 connection_handle,\n\t\t\t\t     void *cookie,\n\t\t\t\t     dma_addr_t rx_buf_addr,\n\t\t\t\t     bool b_last_packet);\n\ntypedef\nvoid (*qed_ll2_complete_tx_packet_cb)(void *cxt,\n\t\t\t\t      u8 connection_handle,\n\t\t\t\t      void *cookie,\n\t\t\t\t      dma_addr_t first_frag_addr,\n\t\t\t\t      bool b_last_fragment,\n\t\t\t\t      bool b_last_packet);\n\ntypedef\nvoid (*qed_ll2_release_tx_packet_cb)(void *cxt,\n\t\t\t\t     u8 connection_handle,\n\t\t\t\t     void *cookie,\n\t\t\t\t     dma_addr_t first_frag_addr,\n\t\t\t\t     bool b_last_fragment, bool b_last_packet);\n\ntypedef\nvoid (*qed_ll2_slowpath_cb)(void *cxt, u8 connection_handle,\n\t\t\t    u32 opaque_data_0, u32 opaque_data_1);\n\nstruct qed_ll2_cbs {\n\tqed_ll2_complete_rx_packet_cb rx_comp_cb;\n\tqed_ll2_release_rx_packet_cb rx_release_cb;\n\tqed_ll2_complete_tx_packet_cb tx_comp_cb;\n\tqed_ll2_release_tx_packet_cb tx_release_cb;\n\tqed_ll2_slowpath_cb slowpath_cb;\n\tvoid *cookie;\n};\n\nstruct qed_ll2_acquire_data_inputs {\n\tenum qed_ll2_rx_conn_type rx_conn_type;\n\tenum qed_ll2_conn_type conn_type;\n\tu16 mtu;\n\tu16 rx_num_desc;\n\tu16 rx_num_ooo_buffers;\n\tu8 rx_drop_ttl0_flg;\n\tu8 rx_vlan_removal_en;\n\tu16 tx_num_desc;\n\tu8 tx_max_bds_per_packet;\n\tu8 tx_tc;\n\tenum qed_ll2_tx_dest tx_dest;\n\tenum qed_ll2_error_handle ai_err_packet_too_big;\n\tenum qed_ll2_error_handle ai_err_no_buf;\n\tbool secondary_queue;\n\tu8 gsi_enable;\n};\n\nstruct qed_ll2_acquire_data {\n\tstruct qed_ll2_acquire_data_inputs input;\n\tconst struct qed_ll2_cbs *cbs;\n\n\t \n\tu8 *p_connection_handle;\n};\n\nstruct qed_ll2_tx_pkt_info {\n\tvoid *cookie;\n\tdma_addr_t first_frag;\n\tenum qed_ll2_tx_dest tx_dest;\n\tenum qed_ll2_roce_flavor_type qed_roce_flavor;\n\tu16 vlan;\n\tu16 l4_hdr_offset_w;\t \n\tu16 first_frag_len;\n\tu8 num_of_bds;\n\tu8 bd_flags;\n\tbool enable_ip_cksum;\n\tbool enable_l4_cksum;\n\tbool calc_ip_len;\n\tbool remove_stag;\n};\n\n#define QED_LL2_UNUSED_HANDLE   (0xff)\n\nstruct qed_ll2_cb_ops {\n\tint (*rx_cb)(void *, struct sk_buff *, u32, u32);\n\tint (*tx_cb)(void *, struct sk_buff *, bool);\n};\n\nstruct qed_ll2_params {\n\tu16 mtu;\n\tbool drop_ttl0_packets;\n\tbool rx_vlan_stripping;\n\tu8 tx_tc;\n\tbool frags_mapped;\n\tu8 ll2_mac_address[ETH_ALEN];\n};\n\nenum qed_ll2_xmit_flags {\n\t \n\tQED_LL2_XMIT_FLAGS_FIP_DISCOVERY\n};\n\nstruct qed_ll2_ops {\n \n\tint (*start)(struct qed_dev *cdev, struct qed_ll2_params *params);\n\n \n\tint (*stop)(struct qed_dev *cdev);\n\n \n\tint (*start_xmit)(struct qed_dev *cdev, struct sk_buff *skb,\n\t\t\t  unsigned long xmit_flags);\n\n \n\tvoid (*register_cb_ops)(struct qed_dev *cdev,\n\t\t\t\tconst struct qed_ll2_cb_ops *ops,\n\t\t\t\tvoid *cookie);\n\n \n\tint (*get_stats)(struct qed_dev *cdev, struct qed_ll2_stats *stats);\n};\n\n#ifdef CONFIG_QED_LL2\nint qed_ll2_alloc_if(struct qed_dev *);\nvoid qed_ll2_dealloc_if(struct qed_dev *);\n#else\nstatic const struct qed_ll2_ops qed_ll2_ops_pass = {\n\t.start = NULL,\n\t.stop = NULL,\n\t.start_xmit = NULL,\n\t.register_cb_ops = NULL,\n\t.get_stats = NULL,\n};\n\nstatic inline int qed_ll2_alloc_if(struct qed_dev *cdev)\n{\n\treturn 0;\n}\n\nstatic inline void qed_ll2_dealloc_if(struct qed_dev *cdev)\n{\n}\n#endif\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}