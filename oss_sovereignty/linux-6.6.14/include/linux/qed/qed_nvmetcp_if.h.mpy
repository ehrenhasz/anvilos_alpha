{
  "module_name": "qed_nvmetcp_if.h",
  "hash_id": "d2c0a844d0f37c5600b77f3d8932e5cd9ce09d52ed814111ae5383bc03a556b1",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/qed/qed_nvmetcp_if.h",
  "human_readable_source": " \n \n\n#ifndef _QED_NVMETCP_IF_H\n#define _QED_NVMETCP_IF_H\n#include <linux/types.h>\n#include <linux/qed/qed_if.h>\n#include <linux/qed/storage_common.h>\n#include <linux/qed/nvmetcp_common.h>\n\n#define QED_NVMETCP_MAX_IO_SIZE\t0x800000\n#define QED_NVMETCP_CMN_HDR_SIZE (sizeof(struct nvme_tcp_hdr))\n#define QED_NVMETCP_CMD_HDR_SIZE (sizeof(struct nvme_tcp_cmd_pdu))\n#define QED_NVMETCP_NON_IO_HDR_SIZE ((QED_NVMETCP_CMN_HDR_SIZE + 16))\n\ntypedef int (*nvmetcp_event_cb_t) (void *context,\n\t\t\t\t   u8 fw_event_code, void *fw_handle);\n\nstruct qed_dev_nvmetcp_info {\n\tstruct qed_dev_info common;\n\tu8 port_id;   \n\tu8 num_cqs;\n};\n\n#define MAX_TID_BLOCKS_NVMETCP (512)\nstruct qed_nvmetcp_tid {\n\tu32 size;\t\t \n\tu32 num_tids_per_block;\n\tu8 *blocks[MAX_TID_BLOCKS_NVMETCP];\n};\n\nstruct qed_nvmetcp_id_params {\n\tu8 mac[ETH_ALEN];\n\tu32 ip[4];\n\tu16 port;\n};\n\nstruct qed_nvmetcp_params_offload {\n\t \n\tdma_addr_t sq_pbl_addr;\n\tdma_addr_t nvmetcp_cccid_itid_table_addr;\n\tu16 nvmetcp_cccid_max_range;\n\tu8 default_cq;\n\n\t \n\tstruct qed_nvmetcp_id_params src;\n\tstruct qed_nvmetcp_id_params dst;\n\tu32 ka_timeout;\n\tu32 ka_interval;\n\tu32 max_rt_time;\n\tu32 cwnd;\n\tu16 mss;\n\tu16 vlan_id;\n\tbool timestamp_en;\n\tbool delayed_ack_en;\n\tbool tcp_keep_alive_en;\n\tbool ecn_en;\n\tu8 ip_version;\n\tu8 ka_max_probe_cnt;\n\tu8 ttl;\n\tu8 tos_or_tc;\n\tu8 rcv_wnd_scale;\n};\n\nstruct qed_nvmetcp_params_update {\n\tu32 max_io_size;\n\tu32 max_recv_pdu_length;\n\tu32 max_send_pdu_length;\n\n\t \n\n\tbool hdr_digest_en;\n\tbool data_digest_en;\n};\n\nstruct qed_nvmetcp_cb_ops {\n\tstruct qed_common_cb_ops common;\n};\n\nstruct nvmetcp_sge {\n\tstruct regpair sge_addr;  \n\t__le32 sge_len;  \n\t__le32 reserved;\n};\n\n \nstruct storage_sgl_task_params {\n\tstruct nvmetcp_sge *sgl;\n\tstruct regpair sgl_phys_addr;\n\tu32 total_buffer_size;\n\tu16 num_sges;\n\tbool small_mid_sge;\n};\n\n \nstruct nvmetcp_task_params {\n\tvoid *context;  \n\tstruct nvmetcp_wqe *sqe;\n\tu32 tx_io_size;  \n\tu32 rx_io_size;  \n\tu16 conn_icid;\n\tu16 itid;\n\tstruct regpair opq;  \n\tu16 host_cccid;\n\tu8 cq_rss_number;\n\tbool send_write_incapsule;\n};\n\n \nstruct qed_nvmetcp_ops {\n\tconst struct qed_common_ops *common;\n\n\tconst struct qed_ll2_ops *ll2;\n\n\tint (*fill_dev_info)(struct qed_dev *cdev,\n\t\t\t     struct qed_dev_nvmetcp_info *info);\n\n\tvoid (*register_ops)(struct qed_dev *cdev,\n\t\t\t     struct qed_nvmetcp_cb_ops *ops, void *cookie);\n\n\tint (*start)(struct qed_dev *cdev,\n\t\t     struct qed_nvmetcp_tid *tasks,\n\t\t     void *event_context, nvmetcp_event_cb_t async_event_cb);\n\n\tint (*stop)(struct qed_dev *cdev);\n\n\tint (*acquire_conn)(struct qed_dev *cdev,\n\t\t\t    u32 *handle,\n\t\t\t    u32 *fw_cid, void __iomem **p_doorbell);\n\n\tint (*release_conn)(struct qed_dev *cdev, u32 handle);\n\n\tint (*offload_conn)(struct qed_dev *cdev,\n\t\t\t    u32 handle,\n\t\t\t    struct qed_nvmetcp_params_offload *conn_info);\n\n\tint (*update_conn)(struct qed_dev *cdev,\n\t\t\t   u32 handle,\n\t\t\t   struct qed_nvmetcp_params_update *conn_info);\n\n\tint (*destroy_conn)(struct qed_dev *cdev, u32 handle, u8 abrt_conn);\n\n\tint (*clear_sq)(struct qed_dev *cdev, u32 handle);\n\n\tint (*add_src_tcp_port_filter)(struct qed_dev *cdev, u16 src_port);\n\n\tvoid (*remove_src_tcp_port_filter)(struct qed_dev *cdev, u16 src_port);\n\n\tint (*add_dst_tcp_port_filter)(struct qed_dev *cdev, u16 dest_port);\n\n\tvoid (*remove_dst_tcp_port_filter)(struct qed_dev *cdev, u16 dest_port);\n\n\tvoid (*clear_all_filters)(struct qed_dev *cdev);\n\n\tvoid (*init_read_io)(struct nvmetcp_task_params *task_params,\n\t\t\t     struct nvme_tcp_cmd_pdu *cmd_pdu_header,\n\t\t\t     struct nvme_command *nvme_cmd,\n\t\t\t     struct storage_sgl_task_params *sgl_task_params);\n\n\tvoid (*init_write_io)(struct nvmetcp_task_params *task_params,\n\t\t\t      struct nvme_tcp_cmd_pdu *cmd_pdu_header,\n\t\t\t      struct nvme_command *nvme_cmd,\n\t\t\t      struct storage_sgl_task_params *sgl_task_params);\n\n\tvoid (*init_icreq_exchange)(struct nvmetcp_task_params *task_params,\n\t\t\t\t    struct nvme_tcp_icreq_pdu *init_conn_req_pdu_hdr,\n\t\t\t\t    struct storage_sgl_task_params *tx_sgl_task_params,\n\t\t\t\t    struct storage_sgl_task_params *rx_sgl_task_params);\n\n\tvoid (*init_task_cleanup)(struct nvmetcp_task_params *task_params);\n};\n\nconst struct qed_nvmetcp_ops *qed_get_nvmetcp_ops(void);\nvoid qed_put_nvmetcp_ops(void);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}