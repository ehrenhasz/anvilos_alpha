{
  "module_name": "qed_eth_if.h",
  "hash_id": "2b83dd34e2d180c961598fbc82345f9c5a3eebc601e2f22cfdf3dc8ed691c420",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/qed/qed_eth_if.h",
  "human_readable_source": " \n \n\n#ifndef _QED_ETH_IF_H\n#define _QED_ETH_IF_H\n\n#include <linux/list.h>\n#include <linux/if_link.h>\n#include <linux/qed/eth_common.h>\n#include <linux/qed/qed_if.h>\n#include <linux/qed/qed_iov_if.h>\n\n \n#define QED_MIN_L2_CONS (2 + NUM_PHYS_TCS_4PORT_K2)\n#define QED_MAX_L2_CONS (64 * (QED_MIN_L2_CONS))\n\nstruct qed_queue_start_common_params {\n\t \n\tu8 vport_id;\n\tu16 queue_id;\n\n\t \n\tu8 stats_id;\n\n\tstruct qed_sb_info *p_sb;\n\tu8 sb_idx;\n\n\tu8 tc;\n};\n\nstruct qed_rxq_start_ret_params {\n\tvoid __iomem *p_prod;\n\tvoid *p_handle;\n};\n\nstruct qed_txq_start_ret_params {\n\tvoid __iomem *p_doorbell;\n\tvoid *p_handle;\n};\n\nenum qed_filter_config_mode {\n\tQED_FILTER_CONFIG_MODE_DISABLE,\n\tQED_FILTER_CONFIG_MODE_5_TUPLE,\n\tQED_FILTER_CONFIG_MODE_L4_PORT,\n\tQED_FILTER_CONFIG_MODE_IP_DEST,\n\tQED_FILTER_CONFIG_MODE_IP_SRC,\n};\n\nstruct qed_ntuple_filter_params {\n\t \n\tdma_addr_t addr;\n\n\t \n\tu16 length;\n\n\t \n#define QED_RFS_NTUPLE_QID_RSS ((u16)-1)\n\tu16 qid;\n\n\t \n\tbool b_is_vf;\n\tu8 vport_id;\n\tu8 vf_id;\n\n\t \n\tbool b_is_add;\n\n\t \n\tbool b_is_drop;\n};\n\nstruct qed_dev_eth_info {\n\tstruct qed_dev_info common;\n\n\tu8\tnum_queues;\n\tu8\tnum_tc;\n\n\tu8\tport_mac[ETH_ALEN];\n\tu16\tnum_vlan_filters;\n\tu16\tnum_mac_filters;\n\n\t \n\tbool is_legacy;\n\n\t \n\tbool xdp_supported;\n};\n\nstruct qed_update_vport_rss_params {\n\tvoid\t*rss_ind_table[128];\n\tu32\trss_key[10];\n\tu8\trss_caps;\n};\n\nstruct qed_update_vport_params {\n\tu8 vport_id;\n\tu8 update_vport_active_flg;\n\tu8 vport_active_flg;\n\tu8 update_tx_switching_flg;\n\tu8 tx_switching_flg;\n\tu8 update_accept_any_vlan_flg;\n\tu8 accept_any_vlan;\n\tu8 update_rss_flg;\n\tstruct qed_update_vport_rss_params rss_params;\n};\n\nstruct qed_start_vport_params {\n\tbool remove_inner_vlan;\n\tbool handle_ptp_pkts;\n\tbool gro_enable;\n\tbool drop_ttl0;\n\tu8 vport_id;\n\tu16 mtu;\n\tbool clear_stats;\n};\n\nenum qed_filter_rx_mode_type {\n\tQED_FILTER_RX_MODE_TYPE_REGULAR,\n\tQED_FILTER_RX_MODE_TYPE_MULTI_PROMISC,\n\tQED_FILTER_RX_MODE_TYPE_PROMISC,\n};\n\nenum qed_filter_xcast_params_type {\n\tQED_FILTER_XCAST_TYPE_ADD,\n\tQED_FILTER_XCAST_TYPE_DEL,\n\tQED_FILTER_XCAST_TYPE_REPLACE,\n};\n\nstruct qed_filter_ucast_params {\n\tenum qed_filter_xcast_params_type type;\n\tu8 vlan_valid;\n\tu16 vlan;\n\tu8 mac_valid;\n\tunsigned char mac[ETH_ALEN];\n};\n\nstruct qed_filter_mcast_params {\n\tenum qed_filter_xcast_params_type type;\n\tu8 num;\n\tunsigned char mac[64][ETH_ALEN];\n};\n\nenum qed_filter_type {\n\tQED_FILTER_TYPE_UCAST,\n\tQED_FILTER_TYPE_MCAST,\n\tQED_FILTER_TYPE_RX_MODE,\n\tQED_MAX_FILTER_TYPES,\n};\n\nstruct qed_tunn_params {\n\tu16 vxlan_port;\n\tu8 update_vxlan_port;\n\tu16 geneve_port;\n\tu8 update_geneve_port;\n};\n\nstruct qed_eth_cb_ops {\n\tstruct qed_common_cb_ops common;\n\tvoid (*force_mac) (void *dev, u8 *mac, bool forced);\n\tvoid (*ports_update)(void *dev, u16 vxlan_port, u16 geneve_port);\n};\n\n#define QED_MAX_PHC_DRIFT_PPB   291666666\n\nenum qed_ptp_filter_type {\n\tQED_PTP_FILTER_NONE,\n\tQED_PTP_FILTER_ALL,\n\tQED_PTP_FILTER_V1_L4_EVENT,\n\tQED_PTP_FILTER_V1_L4_GEN,\n\tQED_PTP_FILTER_V2_L4_EVENT,\n\tQED_PTP_FILTER_V2_L4_GEN,\n\tQED_PTP_FILTER_V2_L2_EVENT,\n\tQED_PTP_FILTER_V2_L2_GEN,\n\tQED_PTP_FILTER_V2_EVENT,\n\tQED_PTP_FILTER_V2_GEN\n};\n\nenum qed_ptp_hwtstamp_tx_type {\n\tQED_PTP_HWTSTAMP_TX_OFF,\n\tQED_PTP_HWTSTAMP_TX_ON,\n};\n\n#ifdef CONFIG_DCB\n \nstruct qed_eth_dcbnl_ops {\n\t \n\tint (*ieee_getpfc)(struct qed_dev *cdev, struct ieee_pfc *pfc);\n\tint (*ieee_setpfc)(struct qed_dev *cdev, struct ieee_pfc *pfc);\n\tint (*ieee_getets)(struct qed_dev *cdev, struct ieee_ets *ets);\n\tint (*ieee_setets)(struct qed_dev *cdev, struct ieee_ets *ets);\n\tint (*ieee_peer_getets)(struct qed_dev *cdev, struct ieee_ets *ets);\n\tint (*ieee_peer_getpfc)(struct qed_dev *cdev, struct ieee_pfc *pfc);\n\tint (*ieee_getapp)(struct qed_dev *cdev, struct dcb_app *app);\n\tint (*ieee_setapp)(struct qed_dev *cdev, struct dcb_app *app);\n\n\t \n\tu8 (*getstate)(struct qed_dev *cdev);\n\tu8 (*setstate)(struct qed_dev *cdev, u8 state);\n\tvoid (*getpgtccfgtx)(struct qed_dev *cdev, int prio, u8 *prio_type,\n\t\t\t     u8 *pgid, u8 *bw_pct, u8 *up_map);\n\tvoid (*getpgbwgcfgtx)(struct qed_dev *cdev, int pgid, u8 *bw_pct);\n\tvoid (*getpgtccfgrx)(struct qed_dev *cdev, int prio, u8 *prio_type,\n\t\t\t     u8 *pgid, u8 *bw_pct, u8 *up_map);\n\tvoid (*getpgbwgcfgrx)(struct qed_dev *cdev, int pgid, u8 *bw_pct);\n\tvoid (*getpfccfg)(struct qed_dev *cdev, int prio, u8 *setting);\n\tvoid (*setpfccfg)(struct qed_dev *cdev, int prio, u8 setting);\n\tu8 (*getcap)(struct qed_dev *cdev, int capid, u8 *cap);\n\tint (*getnumtcs)(struct qed_dev *cdev, int tcid, u8 *num);\n\tu8 (*getpfcstate)(struct qed_dev *cdev);\n\tint (*getapp)(struct qed_dev *cdev, u8 idtype, u16 id);\n\tu8 (*getfeatcfg)(struct qed_dev *cdev, int featid, u8 *flags);\n\n\t \n\tu8 (*getdcbx)(struct qed_dev *cdev);\n\tvoid (*setpgtccfgtx)(struct qed_dev *cdev, int prio,\n\t\t\t     u8 pri_type, u8 pgid, u8 bw_pct, u8 up_map);\n\tvoid (*setpgtccfgrx)(struct qed_dev *cdev, int prio,\n\t\t\t     u8 pri_type, u8 pgid, u8 bw_pct, u8 up_map);\n\tvoid (*setpgbwgcfgtx)(struct qed_dev *cdev, int pgid, u8 bw_pct);\n\tvoid (*setpgbwgcfgrx)(struct qed_dev *cdev, int pgid, u8 bw_pct);\n\tu8 (*setall)(struct qed_dev *cdev);\n\tint (*setnumtcs)(struct qed_dev *cdev, int tcid, u8 num);\n\tvoid (*setpfcstate)(struct qed_dev *cdev, u8 state);\n\tint (*setapp)(struct qed_dev *cdev, u8 idtype, u16 idval, u8 up);\n\tu8 (*setdcbx)(struct qed_dev *cdev, u8 state);\n\tu8 (*setfeatcfg)(struct qed_dev *cdev, int featid, u8 flags);\n\n\t \n\tint (*peer_getappinfo)(struct qed_dev *cdev,\n\t\t\t       struct dcb_peer_app_info *info,\n\t\t\t       u16 *app_count);\n\tint (*peer_getapptable)(struct qed_dev *cdev, struct dcb_app *table);\n\n\t \n\tint (*cee_peer_getpfc)(struct qed_dev *cdev, struct cee_pfc *pfc);\n\tint (*cee_peer_getpg)(struct qed_dev *cdev, struct cee_pg *pg);\n};\n#endif\n\nstruct qed_eth_ptp_ops {\n\tint (*cfg_filters)(struct qed_dev *, enum qed_ptp_filter_type,\n\t\t\t   enum qed_ptp_hwtstamp_tx_type);\n\tint (*read_rx_ts)(struct qed_dev *, u64 *);\n\tint (*read_tx_ts)(struct qed_dev *, u64 *);\n\tint (*read_cc)(struct qed_dev *, u64 *);\n\tint (*disable)(struct qed_dev *);\n\tint (*adjfreq)(struct qed_dev *, s32);\n\tint (*enable)(struct qed_dev *);\n};\n\nstruct qed_eth_ops {\n\tconst struct qed_common_ops *common;\n#ifdef CONFIG_QED_SRIOV\n\tconst struct qed_iov_hv_ops *iov;\n#endif\n#ifdef CONFIG_DCB\n\tconst struct qed_eth_dcbnl_ops *dcb;\n#endif\n\tconst struct qed_eth_ptp_ops *ptp;\n\n\tint (*fill_dev_info)(struct qed_dev *cdev,\n\t\t\t     struct qed_dev_eth_info *info);\n\n\tvoid (*register_ops)(struct qed_dev *cdev,\n\t\t\t     struct qed_eth_cb_ops *ops,\n\t\t\t     void *cookie);\n\n\t bool(*check_mac) (struct qed_dev *cdev, u8 *mac);\n\n\tint (*vport_start)(struct qed_dev *cdev,\n\t\t\t   struct qed_start_vport_params *params);\n\n\tint (*vport_stop)(struct qed_dev *cdev,\n\t\t\t  u8 vport_id);\n\n\tint (*vport_update)(struct qed_dev *cdev,\n\t\t\t    struct qed_update_vport_params *params);\n\n\tint (*q_rx_start)(struct qed_dev *cdev,\n\t\t\t  u8 rss_num,\n\t\t\t  struct qed_queue_start_common_params *params,\n\t\t\t  u16 bd_max_bytes,\n\t\t\t  dma_addr_t bd_chain_phys_addr,\n\t\t\t  dma_addr_t cqe_pbl_addr,\n\t\t\t  u16 cqe_pbl_size,\n\t\t\t  struct qed_rxq_start_ret_params *ret_params);\n\n\tint (*q_rx_stop)(struct qed_dev *cdev, u8 rss_id, void *handle);\n\n\tint (*q_tx_start)(struct qed_dev *cdev,\n\t\t\t  u8 rss_num,\n\t\t\t  struct qed_queue_start_common_params *params,\n\t\t\t  dma_addr_t pbl_addr,\n\t\t\t  u16 pbl_size,\n\t\t\t  struct qed_txq_start_ret_params *ret_params);\n\n\tint (*q_tx_stop)(struct qed_dev *cdev, u8 rss_id, void *handle);\n\n\tint (*filter_config_rx_mode)(struct qed_dev *cdev,\n\t\t\t\t     enum qed_filter_rx_mode_type type);\n\n\tint (*filter_config_ucast)(struct qed_dev *cdev,\n\t\t\t\t   struct qed_filter_ucast_params *params);\n\n\tint (*filter_config_mcast)(struct qed_dev *cdev,\n\t\t\t\t   struct qed_filter_mcast_params *params);\n\n\tint (*fastpath_stop)(struct qed_dev *cdev);\n\n\tint (*eth_cqe_completion)(struct qed_dev *cdev,\n\t\t\t\t  u8 rss_id,\n\t\t\t\t  struct eth_slow_path_rx_cqe *cqe);\n\n\tvoid (*get_vport_stats)(struct qed_dev *cdev,\n\t\t\t\tstruct qed_eth_stats *stats);\n\n\tint (*tunn_config)(struct qed_dev *cdev,\n\t\t\t   struct qed_tunn_params *params);\n\n\tint (*ntuple_filter_config)(struct qed_dev *cdev,\n\t\t\t\t    void *cookie,\n\t\t\t\t    struct qed_ntuple_filter_params *params);\n\n\tint (*configure_arfs_searcher)(struct qed_dev *cdev,\n\t\t\t\t       enum qed_filter_config_mode mode);\n\tint (*get_coalesce)(struct qed_dev *cdev, u16 *coal, void *handle);\n\tint (*req_bulletin_update_mac)(struct qed_dev *cdev, const u8 *mac);\n};\n\nconst struct qed_eth_ops *qed_get_eth_ops(void);\nvoid qed_put_eth_ops(void);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}