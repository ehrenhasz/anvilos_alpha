{
  "module_name": "ad_sigma_delta.h",
  "hash_id": "8767c7dc5703d0b6b67aa0b7ba87c1274b21f93df2f71f89b8747383efe49f8b",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/iio/adc/ad_sigma_delta.h",
  "human_readable_source": " \n \n#ifndef __AD_SIGMA_DELTA_H__\n#define __AD_SIGMA_DELTA_H__\n\nenum ad_sigma_delta_mode {\n\tAD_SD_MODE_CONTINUOUS = 0,\n\tAD_SD_MODE_SINGLE = 1,\n\tAD_SD_MODE_IDLE = 2,\n\tAD_SD_MODE_POWERDOWN = 3,\n};\n\n \nstruct ad_sd_calib_data {\n\tunsigned int mode;\n\tunsigned int channel;\n};\n\nstruct ad_sigma_delta;\nstruct device;\nstruct iio_dev;\n\n \nstruct ad_sigma_delta_info {\n\tint (*set_channel)(struct ad_sigma_delta *, unsigned int channel);\n\tint (*append_status)(struct ad_sigma_delta *, bool append);\n\tint (*set_mode)(struct ad_sigma_delta *, enum ad_sigma_delta_mode mode);\n\tint (*disable_all)(struct ad_sigma_delta *);\n\tint (*postprocess_sample)(struct ad_sigma_delta *, unsigned int raw_sample);\n\tbool has_registers;\n\tunsigned int addr_shift;\n\tunsigned int read_mask;\n\tunsigned int status_ch_mask;\n\tunsigned int data_reg;\n\tunsigned long irq_flags;\n\tunsigned int num_slots;\n};\n\n \nstruct ad_sigma_delta {\n\tstruct spi_device\t*spi;\n\tstruct iio_trigger\t*trig;\n\n \n\tstruct completion\tcompletion;\n\tbool\t\t\tirq_dis;\n\n\tbool\t\t\tbus_locked;\n\tbool\t\t\tkeep_cs_asserted;\n\n\tuint8_t\t\t\tcomm;\n\n\tconst struct ad_sigma_delta_info *info;\n\tunsigned int\t\tactive_slots;\n\tunsigned int\t\tcurrent_slot;\n\tunsigned int\t\tnum_slots;\n\tbool\t\t\tstatus_appended;\n\t \n\tunsigned int\t\t*slots;\n\tuint8_t\t\t\t*samples_buf;\n\n\t \n\tuint8_t\t\t\t\ttx_buf[4] ____cacheline_aligned;\n\tuint8_t\t\t\t\trx_buf[16] __aligned(8);\n};\n\nstatic inline int ad_sigma_delta_set_channel(struct ad_sigma_delta *sd,\n\tunsigned int channel)\n{\n\tif (sd->info->set_channel)\n\t\treturn sd->info->set_channel(sd, channel);\n\n\treturn 0;\n}\n\nstatic inline int ad_sigma_delta_append_status(struct ad_sigma_delta *sd, bool append)\n{\n\tint ret;\n\n\tif (sd->info->append_status) {\n\t\tret = sd->info->append_status(sd, append);\n\t\tif (ret < 0)\n\t\t\treturn ret;\n\n\t\tsd->status_appended = append;\n\t}\n\n\treturn 0;\n}\n\nstatic inline int ad_sigma_delta_disable_all(struct ad_sigma_delta *sd)\n{\n\tif (sd->info->disable_all)\n\t\treturn sd->info->disable_all(sd);\n\n\treturn 0;\n}\n\nstatic inline int ad_sigma_delta_set_mode(struct ad_sigma_delta *sd,\n\tunsigned int mode)\n{\n\tif (sd->info->set_mode)\n\t\treturn sd->info->set_mode(sd, mode);\n\n\treturn 0;\n}\n\nstatic inline int ad_sigma_delta_postprocess_sample(struct ad_sigma_delta *sd,\n\tunsigned int raw_sample)\n{\n\tif (sd->info->postprocess_sample)\n\t\treturn sd->info->postprocess_sample(sd, raw_sample);\n\n\treturn 0;\n}\n\nvoid ad_sd_set_comm(struct ad_sigma_delta *sigma_delta, uint8_t comm);\nint ad_sd_write_reg(struct ad_sigma_delta *sigma_delta, unsigned int reg,\n\tunsigned int size, unsigned int val);\nint ad_sd_read_reg(struct ad_sigma_delta *sigma_delta, unsigned int reg,\n\tunsigned int size, unsigned int *val);\n\nint ad_sd_reset(struct ad_sigma_delta *sigma_delta,\n\tunsigned int reset_length);\n\nint ad_sigma_delta_single_conversion(struct iio_dev *indio_dev,\n\tconst struct iio_chan_spec *chan, int *val);\nint ad_sd_calibrate(struct ad_sigma_delta *sigma_delta,\n\tunsigned int mode, unsigned int channel);\nint ad_sd_calibrate_all(struct ad_sigma_delta *sigma_delta,\n\tconst struct ad_sd_calib_data *cd, unsigned int n);\nint ad_sd_init(struct ad_sigma_delta *sigma_delta, struct iio_dev *indio_dev,\n\tstruct spi_device *spi, const struct ad_sigma_delta_info *info);\n\nint devm_ad_sd_setup_buffer_and_trigger(struct device *dev, struct iio_dev *indio_dev);\n\nint ad_sd_validate_trigger(struct iio_dev *indio_dev, struct iio_trigger *trig);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}