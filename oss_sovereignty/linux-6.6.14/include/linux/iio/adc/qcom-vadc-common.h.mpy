{
  "module_name": "qcom-vadc-common.h",
  "hash_id": "9c9b7a93876389ede7f030d0aafee9c4dc5e4a3d33effab07829ed0ab4eee7ae",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/iio/adc/qcom-vadc-common.h",
  "human_readable_source": " \n \n\n#ifndef QCOM_VADC_COMMON_H\n#define QCOM_VADC_COMMON_H\n\n#include <linux/math.h>\n#include <linux/types.h>\n\n#define VADC_CONV_TIME_MIN_US\t\t\t2000\n#define VADC_CONV_TIME_MAX_US\t\t\t2100\n\n \n#define VADC_MIN_ADC_CODE\t\t\t0x6000\n \n#define VADC_MAX_ADC_CODE\t\t\t0xa800\n\n#define VADC_ABSOLUTE_RANGE_UV\t\t\t625000\n#define VADC_RATIOMETRIC_RANGE\t\t\t1800\n\n#define VADC_DEF_PRESCALING\t\t\t0  \n#define VADC_DEF_DECIMATION\t\t\t0  \n#define VADC_DEF_HW_SETTLE_TIME\t\t\t0  \n#define VADC_DEF_AVG_SAMPLES\t\t\t0  \n#define VADC_DEF_CALIB_TYPE\t\t\tVADC_CALIB_ABSOLUTE\n\n#define VADC_DECIMATION_MIN\t\t\t512\n#define VADC_DECIMATION_MAX\t\t\t4096\n#define ADC5_DEF_VBAT_PRESCALING\t\t1  \n#define ADC5_DECIMATION_SHORT\t\t\t250\n#define ADC5_DECIMATION_MEDIUM\t\t\t420\n#define ADC5_DECIMATION_LONG\t\t\t840\n \n#define ADC5_DECIMATION_DEFAULT\t\t\t2\n#define ADC5_DECIMATION_SAMPLES_MAX\t\t3\n\n#define VADC_HW_SETTLE_DELAY_MAX\t\t10000\n#define VADC_HW_SETTLE_SAMPLES_MAX\t\t16\n#define VADC_AVG_SAMPLES_MAX\t\t\t512\n#define ADC5_AVG_SAMPLES_MAX\t\t\t16\n\n#define PMIC5_CHG_TEMP_SCALE_FACTOR\t\t377500\n#define PMIC5_SMB_TEMP_CONSTANT\t\t\t419400\n#define PMIC5_SMB_TEMP_SCALE_FACTOR\t\t356\n\n#define PMI_CHG_SCALE_1\t\t\t\t-138890\n#define PMI_CHG_SCALE_2\t\t\t\t391750000000LL\n\n#define VADC5_MAX_CODE\t\t\t\t0x7fff\n#define ADC5_FULL_SCALE_CODE\t\t\t0x70e4\n#define ADC5_USR_DATA_CHECK\t\t\t0x8000\n\n#define R_PU_100K\t\t\t\t100000\n#define RATIO_MAX_ADC7\t\t\t\tBIT(14)\n\n \nenum vadc_calibration {\n\tVADC_CALIB_ABSOLUTE = 0,\n\tVADC_CALIB_RATIOMETRIC\n};\n\n \nstruct vadc_linear_graph {\n\ts32 dy;\n\ts32 dx;\n\ts32 gnd;\n};\n\n \nenum vadc_scale_fn_type {\n\tSCALE_DEFAULT = 0,\n\tSCALE_THERM_100K_PULLUP,\n\tSCALE_PMIC_THERM,\n\tSCALE_XOTHERM,\n\tSCALE_PMI_CHG_TEMP,\n\tSCALE_HW_CALIB_DEFAULT,\n\tSCALE_HW_CALIB_THERM_100K_PULLUP,\n\tSCALE_HW_CALIB_XOTHERM,\n\tSCALE_HW_CALIB_THERM_100K_PU_PM7,\n\tSCALE_HW_CALIB_PMIC_THERM,\n\tSCALE_HW_CALIB_PMIC_THERM_PM7,\n\tSCALE_HW_CALIB_PM5_CHG_TEMP,\n\tSCALE_HW_CALIB_PM5_SMB_TEMP,\n\tSCALE_HW_CALIB_INVALID,\n};\n\nstruct adc5_data {\n\tconst u32\tfull_scale_code_volt;\n\tconst u32\tfull_scale_code_cur;\n\tconst struct adc5_channels *adc_chans;\n\tconst struct iio_info *info;\n\tunsigned int\t*decimation;\n\tunsigned int\t*hw_settle_1;\n\tunsigned int\t*hw_settle_2;\n};\n\nint qcom_vadc_scale(enum vadc_scale_fn_type scaletype,\n\t\t    const struct vadc_linear_graph *calib_graph,\n\t\t    const struct u32_fract *prescale,\n\t\t    bool absolute,\n\t\t    u16 adc_code, int *result_mdec);\n\nstruct qcom_adc5_scale_type {\n\tint (*scale_fn)(const struct u32_fract *prescale,\n\t\tconst struct adc5_data *data, u16 adc_code, int *result);\n};\n\nint qcom_adc5_hw_scale(enum vadc_scale_fn_type scaletype,\n\t\t    unsigned int prescale_ratio,\n\t\t    const struct adc5_data *data,\n\t\t    u16 adc_code, int *result_mdec);\n\nu16 qcom_adc_tm5_temp_volt_scale(unsigned int prescale_ratio,\n\t\t\t\t u32 full_scale_code_volt, int temp);\n\nu16 qcom_adc_tm5_gen2_temp_res_scale(int temp);\n\nint qcom_adc5_prescaling_from_dt(u32 num, u32 den);\n\nint qcom_adc5_hw_settle_time_from_dt(u32 value, const unsigned int *hw_settle);\n\nint qcom_adc5_avg_samples_from_dt(u32 value);\n\nint qcom_adc5_decimation_from_dt(u32 value, const unsigned int *decimation);\n\nint qcom_vadc_decimation_from_dt(u32 value);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}