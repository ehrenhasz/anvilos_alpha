{
  "module_name": "iio-gts-helper.h",
  "hash_id": "c4175693e35dfc35944cb5e33ab22d86fa07e28c579db3743ed6f762f6872b98",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/iio/iio-gts-helper.h",
  "human_readable_source": " \n \n\n#ifndef __IIO_GTS_HELPER__\n#define __IIO_GTS_HELPER__\n\n#include <linux/types.h>\n\nstruct device;\n\n \nstruct iio_gain_sel_pair {\n\tint gain;\n\tint sel;\n};\n\n \nstruct iio_itime_sel_mul {\n\tint time_us;\n\tint sel;\n\tint mul;\n};\n\nstruct iio_gts {\n\tu64 max_scale;\n\tconst struct iio_gain_sel_pair *hwgain_table;\n\tint num_hwgain;\n\tconst struct iio_itime_sel_mul *itime_table;\n\tint num_itime;\n\tint **per_time_avail_scale_tables;\n\tint *avail_all_scales_table;\n\tint num_avail_all_scales;\n\tint *avail_time_tables;\n\tint num_avail_time_tables;\n};\n\n#define GAIN_SCALE_GAIN(_gain, _sel)\t\t\t\\\n{\t\t\t\t\t\t\t\\\n\t.gain = (_gain),\t\t\t\t\\\n\t.sel = (_sel),\t\t\t\t\t\\\n}\n\n#define GAIN_SCALE_ITIME_US(_itime, _sel, _mul)\t\t\\\n{\t\t\t\t\t\t\t\\\n\t.time_us = (_itime),\t\t\t\t\\\n\t.sel = (_sel),\t\t\t\t\t\\\n\t.mul = (_mul),\t\t\t\t\t\\\n}\n\nstatic inline const struct iio_itime_sel_mul *\niio_gts_find_itime_by_time(struct iio_gts *gts, int time)\n{\n\tint i;\n\n\tif (!gts->num_itime)\n\t\treturn NULL;\n\n\tfor (i = 0; i < gts->num_itime; i++)\n\t\tif (gts->itime_table[i].time_us == time)\n\t\t\treturn &gts->itime_table[i];\n\n\treturn NULL;\n}\n\nstatic inline const struct iio_itime_sel_mul *\niio_gts_find_itime_by_sel(struct iio_gts *gts, int sel)\n{\n\tint i;\n\n\tfor (i = 0; i < gts->num_itime; i++)\n\t\tif (gts->itime_table[i].sel == sel)\n\t\t\treturn &gts->itime_table[i];\n\n\treturn NULL;\n}\n\nint devm_iio_init_iio_gts(struct device *dev, int max_scale_int, int max_scale_nano,\n\t\t\t  const struct iio_gain_sel_pair *gain_tbl, int num_gain,\n\t\t\t  const struct iio_itime_sel_mul *tim_tbl, int num_times,\n\t\t\t  struct iio_gts *gts);\n \nstatic inline int iio_gts_find_int_time_by_sel(struct iio_gts *gts, int sel)\n{\n\tconst struct iio_itime_sel_mul *itime;\n\n\titime = iio_gts_find_itime_by_sel(gts, sel);\n\tif (!itime)\n\t\treturn -EINVAL;\n\n\treturn itime->time_us;\n}\n\n \nstatic inline int iio_gts_find_sel_by_int_time(struct iio_gts *gts, int time)\n{\n\tconst struct iio_itime_sel_mul *itime;\n\n\titime = iio_gts_find_itime_by_time(gts, time);\n\tif (!itime)\n\t\treturn -EINVAL;\n\n\treturn itime->sel;\n}\n\n \nstatic inline bool iio_gts_valid_time(struct iio_gts *gts, int time_us)\n{\n\treturn iio_gts_find_itime_by_time(gts, time_us) != NULL;\n}\n\nint iio_gts_find_sel_by_gain(struct iio_gts *gts, int gain);\n\n \nstatic inline bool iio_gts_valid_gain(struct iio_gts *gts, int gain)\n{\n\treturn iio_gts_find_sel_by_gain(gts, gain) >= 0;\n}\n\nint iio_find_closest_gain_low(struct iio_gts *gts, int gain, bool *in_range);\nint iio_gts_find_gain_by_sel(struct iio_gts *gts, int sel);\nint iio_gts_get_min_gain(struct iio_gts *gts);\nint iio_gts_find_int_time_by_sel(struct iio_gts *gts, int sel);\nint iio_gts_find_sel_by_int_time(struct iio_gts *gts, int time);\n\nint iio_gts_total_gain_to_scale(struct iio_gts *gts, int total_gain,\n\t\t\t\tint *scale_int, int *scale_nano);\nint iio_gts_find_gain_sel_for_scale_using_time(struct iio_gts *gts, int time_sel,\n\t\t\t\t\t       int scale_int, int scale_nano,\n\t\t\t\t\t       int *gain_sel);\nint iio_gts_get_scale(struct iio_gts *gts, int gain, int time, int *scale_int,\n\t\t      int *scale_nano);\nint iio_gts_find_new_gain_sel_by_old_gain_time(struct iio_gts *gts,\n\t\t\t\t\t       int old_gain, int old_time_sel,\n\t\t\t\t\t       int new_time_sel, int *new_gain);\nint iio_gts_find_new_gain_by_old_gain_time(struct iio_gts *gts, int old_gain,\n\t\t\t\t\t   int old_time, int new_time,\n\t\t\t\t\t   int *new_gain);\nint iio_gts_avail_times(struct iio_gts *gts,  const int **vals, int *type,\n\t\t\tint *length);\nint iio_gts_all_avail_scales(struct iio_gts *gts, const int **vals, int *type,\n\t\t\t     int *length);\nint iio_gts_avail_scales_for_time(struct iio_gts *gts, int time,\n\t\t\t\t  const int **vals, int *type, int *length);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}