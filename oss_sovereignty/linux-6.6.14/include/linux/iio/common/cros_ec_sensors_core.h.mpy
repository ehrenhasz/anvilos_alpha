{
  "module_name": "cros_ec_sensors_core.h",
  "hash_id": "877dc43c950e3e67bbaa04ba7c34643a1c2784a21cbad6f592cb1989f82b408a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/iio/common/cros_ec_sensors_core.h",
  "human_readable_source": " \n \n\n#ifndef __CROS_EC_SENSORS_CORE_H\n#define __CROS_EC_SENSORS_CORE_H\n\n#include <linux/iio/iio.h>\n#include <linux/irqreturn.h>\n#include <linux/platform_data/cros_ec_commands.h>\n#include <linux/platform_data/cros_ec_proto.h>\n#include <linux/platform_data/cros_ec_sensorhub.h>\n\nenum {\n\tCROS_EC_SENSOR_X,\n\tCROS_EC_SENSOR_Y,\n\tCROS_EC_SENSOR_Z,\n\tCROS_EC_SENSOR_MAX_AXIS,\n};\n\n \n#define CROS_EC_SENSOR_BITS 16\n\n \n#define CROS_EC_SAMPLE_SIZE  (sizeof(s64) * 2)\n\ntypedef irqreturn_t (*cros_ec_sensors_capture_t)(int irq, void *p);\n\n \nstruct cros_ec_sensors_core_state {\n\tstruct cros_ec_device *ec;\n\tstruct mutex cmd_lock;\n\n\tstruct cros_ec_command *msg;\n\tstruct ec_params_motion_sense param;\n\tstruct ec_response_motion_sense *resp;\n\n\tenum motionsensor_type type;\n\n\tbool range_updated;\n\tint curr_range;\n\n\tstruct calib_data {\n\t\ts16 offset;\n\t\tu16 scale;\n\t} calib[CROS_EC_SENSOR_MAX_AXIS];\n\ts8 sign[CROS_EC_SENSOR_MAX_AXIS];\n\tu8 samples[CROS_EC_SAMPLE_SIZE] __aligned(8);\n\n\tint (*read_ec_sensors_data)(struct iio_dev *indio_dev,\n\t\t\t\t    unsigned long scan_mask, s16 *data);\n\n\tu32 fifo_max_event_count;\n\tint frequencies[6];\n};\n\nint cros_ec_sensors_read_lpc(struct iio_dev *indio_dev, unsigned long scan_mask,\n\t\t\t     s16 *data);\n\nint cros_ec_sensors_read_cmd(struct iio_dev *indio_dev, unsigned long scan_mask,\n\t\t\t     s16 *data);\n\nstruct platform_device;\nint cros_ec_sensors_core_init(struct platform_device *pdev,\n\t\t\t      struct iio_dev *indio_dev, bool physical_device,\n\t\t\t      cros_ec_sensors_capture_t trigger_capture);\n\nint cros_ec_sensors_core_register(struct device *dev,\n\t\t\t\t  struct iio_dev *indio_dev,\n\t\t\t\t  cros_ec_sensorhub_push_data_cb_t push_data);\n\nirqreturn_t cros_ec_sensors_capture(int irq, void *p);\nint cros_ec_sensors_push_data(struct iio_dev *indio_dev,\n\t\t\t      s16 *data,\n\t\t\t      s64 timestamp);\n\nint cros_ec_motion_send_host_cmd(struct cros_ec_sensors_core_state *st,\n\t\t\t\t u16 opt_length);\n\nint cros_ec_sensors_core_read(struct cros_ec_sensors_core_state *st,\n\t\t\t      struct iio_chan_spec const *chan,\n\t\t\t      int *val, int *val2, long mask);\n\nint cros_ec_sensors_core_read_avail(struct iio_dev *indio_dev,\n\t\t\t\t    struct iio_chan_spec const *chan,\n\t\t\t\t    const int **vals,\n\t\t\t\t    int *type,\n\t\t\t\t    int *length,\n\t\t\t\t    long mask);\n\nint cros_ec_sensors_core_write(struct cros_ec_sensors_core_state *st,\n\t\t\t       struct iio_chan_spec const *chan,\n\t\t\t       int val, int val2, long mask);\n\nextern const struct dev_pm_ops cros_ec_sensors_pm_ops;\n\n \nextern const struct iio_chan_spec_ext_info cros_ec_sensors_ext_info[];\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}