{
  "module_name": "proc_fs.h",
  "hash_id": "d109363943e25adce4b63b614dcfd37db3da01e4bcdce752963559762054d023",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/proc_fs.h",
  "human_readable_source": " \n \n#ifndef _LINUX_PROC_FS_H\n#define _LINUX_PROC_FS_H\n\n#include <linux/compiler.h>\n#include <linux/types.h>\n#include <linux/fs.h>\n\nstruct proc_dir_entry;\nstruct seq_file;\nstruct seq_operations;\n\nenum {\n\t \n#ifdef MODULE\n\tPROC_ENTRY_PERMANENT = 0U,\n#else\n\tPROC_ENTRY_PERMANENT = 1U << 0,\n#endif\n};\n\nstruct proc_ops {\n\tunsigned int proc_flags;\n\tint\t(*proc_open)(struct inode *, struct file *);\n\tssize_t\t(*proc_read)(struct file *, char __user *, size_t, loff_t *);\n\tssize_t (*proc_read_iter)(struct kiocb *, struct iov_iter *);\n\tssize_t\t(*proc_write)(struct file *, const char __user *, size_t, loff_t *);\n\t \n\tloff_t\t(*proc_lseek)(struct file *, loff_t, int);\n\tint\t(*proc_release)(struct inode *, struct file *);\n\t__poll_t (*proc_poll)(struct file *, struct poll_table_struct *);\n\tlong\t(*proc_ioctl)(struct file *, unsigned int, unsigned long);\n#ifdef CONFIG_COMPAT\n\tlong\t(*proc_compat_ioctl)(struct file *, unsigned int, unsigned long);\n#endif\n\tint\t(*proc_mmap)(struct file *, struct vm_area_struct *);\n\tunsigned long (*proc_get_unmapped_area)(struct file *, unsigned long, unsigned long, unsigned long, unsigned long);\n} __randomize_layout;\n\n \nenum proc_hidepid {\n\tHIDEPID_OFF\t  = 0,\n\tHIDEPID_NO_ACCESS = 1,\n\tHIDEPID_INVISIBLE = 2,\n\tHIDEPID_NOT_PTRACEABLE = 4,  \n};\n\n \nenum proc_pidonly {\n\tPROC_PIDONLY_OFF = 0,\n\tPROC_PIDONLY_ON  = 1,\n};\n\nstruct proc_fs_info {\n\tstruct pid_namespace *pid_ns;\n\tstruct dentry *proc_self;         \n\tstruct dentry *proc_thread_self;  \n\tkgid_t pid_gid;\n\tenum proc_hidepid hide_pid;\n\tenum proc_pidonly pidonly;\n};\n\nstatic inline struct proc_fs_info *proc_sb_info(struct super_block *sb)\n{\n\treturn sb->s_fs_info;\n}\n\n#ifdef CONFIG_PROC_FS\n\ntypedef int (*proc_write_t)(struct file *, char *, size_t);\n\nextern void proc_root_init(void);\nextern void proc_flush_pid(struct pid *);\n\nextern struct proc_dir_entry *proc_symlink(const char *,\n\t\tstruct proc_dir_entry *, const char *);\nstruct proc_dir_entry *_proc_mkdir(const char *, umode_t, struct proc_dir_entry *, void *, bool);\nextern struct proc_dir_entry *proc_mkdir(const char *, struct proc_dir_entry *);\nextern struct proc_dir_entry *proc_mkdir_data(const char *, umode_t,\n\t\t\t\t\t      struct proc_dir_entry *, void *);\nextern struct proc_dir_entry *proc_mkdir_mode(const char *, umode_t,\n\t\t\t\t\t      struct proc_dir_entry *);\nstruct proc_dir_entry *proc_create_mount_point(const char *name);\n\nstruct proc_dir_entry *proc_create_seq_private(const char *name, umode_t mode,\n\t\tstruct proc_dir_entry *parent, const struct seq_operations *ops,\n\t\tunsigned int state_size, void *data);\n#define proc_create_seq_data(name, mode, parent, ops, data) \\\n\tproc_create_seq_private(name, mode, parent, ops, 0, data)\n#define proc_create_seq(name, mode, parent, ops) \\\n\tproc_create_seq_private(name, mode, parent, ops, 0, NULL)\nstruct proc_dir_entry *proc_create_single_data(const char *name, umode_t mode,\n\t\tstruct proc_dir_entry *parent,\n\t\tint (*show)(struct seq_file *, void *), void *data);\n#define proc_create_single(name, mode, parent, show) \\\n\tproc_create_single_data(name, mode, parent, show, NULL)\n \nextern struct proc_dir_entry *proc_create_data(const char *, umode_t,\n\t\t\t\t\t       struct proc_dir_entry *,\n\t\t\t\t\t       const struct proc_ops *,\n\t\t\t\t\t       void *);\n\nstruct proc_dir_entry *proc_create(const char *name, umode_t mode, struct proc_dir_entry *parent, const struct proc_ops *proc_ops);\nextern void proc_set_size(struct proc_dir_entry *, loff_t);\nextern void proc_set_user(struct proc_dir_entry *, kuid_t, kgid_t);\n\n \nstatic inline void *pde_data(const struct inode *inode)\n{\n\treturn inode->i_private;\n}\n\nextern void *proc_get_parent_data(const struct inode *);\nextern void proc_remove(struct proc_dir_entry *);\nextern void remove_proc_entry(const char *, struct proc_dir_entry *);\nextern int remove_proc_subtree(const char *, struct proc_dir_entry *);\n\nstruct proc_dir_entry *proc_create_net_data(const char *name, umode_t mode,\n\t\tstruct proc_dir_entry *parent, const struct seq_operations *ops,\n\t\tunsigned int state_size, void *data);\n#define proc_create_net(name, mode, parent, ops, state_size) \\\n\tproc_create_net_data(name, mode, parent, ops, state_size, NULL)\nstruct proc_dir_entry *proc_create_net_single(const char *name, umode_t mode,\n\t\tstruct proc_dir_entry *parent,\n\t\tint (*show)(struct seq_file *, void *), void *data);\nstruct proc_dir_entry *proc_create_net_data_write(const char *name, umode_t mode,\n\t\t\t\t\t\t  struct proc_dir_entry *parent,\n\t\t\t\t\t\t  const struct seq_operations *ops,\n\t\t\t\t\t\t  proc_write_t write,\n\t\t\t\t\t\t  unsigned int state_size, void *data);\nstruct proc_dir_entry *proc_create_net_single_write(const char *name, umode_t mode,\n\t\t\t\t\t\t    struct proc_dir_entry *parent,\n\t\t\t\t\t\t    int (*show)(struct seq_file *, void *),\n\t\t\t\t\t\t    proc_write_t write,\n\t\t\t\t\t\t    void *data);\nextern struct pid *tgid_pidfd_to_pid(const struct file *file);\n\nstruct bpf_iter_aux_info;\nextern int bpf_iter_init_seq_net(void *priv_data, struct bpf_iter_aux_info *aux);\nextern void bpf_iter_fini_seq_net(void *priv_data);\n\n#ifdef CONFIG_PROC_PID_ARCH_STATUS\n \nint proc_pid_arch_status(struct seq_file *m, struct pid_namespace *ns,\n\t\t\tstruct pid *pid, struct task_struct *task);\n#endif  \n\nvoid arch_report_meminfo(struct seq_file *m);\nvoid arch_proc_pid_thread_features(struct seq_file *m, struct task_struct *task);\n\n#else  \n\nstatic inline void proc_root_init(void)\n{\n}\n\nstatic inline void proc_flush_pid(struct pid *pid)\n{\n}\n\nstatic inline struct proc_dir_entry *proc_symlink(const char *name,\n\t\tstruct proc_dir_entry *parent,const char *dest) { return NULL;}\nstatic inline struct proc_dir_entry *proc_mkdir(const char *name,\n\tstruct proc_dir_entry *parent) {return NULL;}\nstatic inline struct proc_dir_entry *proc_create_mount_point(const char *name) { return NULL; }\nstatic inline struct proc_dir_entry *_proc_mkdir(const char *name, umode_t mode,\n\t\tstruct proc_dir_entry *parent, void *data, bool force_lookup)\n{\n\treturn NULL;\n}\nstatic inline struct proc_dir_entry *proc_mkdir_data(const char *name,\n\tumode_t mode, struct proc_dir_entry *parent, void *data) { return NULL; }\nstatic inline struct proc_dir_entry *proc_mkdir_mode(const char *name,\n\tumode_t mode, struct proc_dir_entry *parent) { return NULL; }\n#define proc_create_seq_private(name, mode, parent, ops, size, data) ({NULL;})\n#define proc_create_seq_data(name, mode, parent, ops, data) ({NULL;})\n#define proc_create_seq(name, mode, parent, ops) ({NULL;})\n#define proc_create_single(name, mode, parent, show) ({NULL;})\n#define proc_create_single_data(name, mode, parent, show, data) ({NULL;})\n\nstatic inline struct proc_dir_entry *\nproc_create(const char *name, umode_t mode, struct proc_dir_entry *parent,\n\t    const struct proc_ops *proc_ops)\n{ return NULL; }\n\nstatic inline struct proc_dir_entry *\nproc_create_data(const char *name, umode_t mode, struct proc_dir_entry *parent,\n\t\t const struct proc_ops *proc_ops, void *data)\n{ return NULL; }\n\nstatic inline void proc_set_size(struct proc_dir_entry *de, loff_t size) {}\nstatic inline void proc_set_user(struct proc_dir_entry *de, kuid_t uid, kgid_t gid) {}\nstatic inline void *pde_data(const struct inode *inode) {BUG(); return NULL;}\nstatic inline void *proc_get_parent_data(const struct inode *inode) { BUG(); return NULL; }\n\nstatic inline void proc_remove(struct proc_dir_entry *de) {}\n#define remove_proc_entry(name, parent) do {} while (0)\nstatic inline int remove_proc_subtree(const char *name, struct proc_dir_entry *parent) { return 0; }\n\n#define proc_create_net_data(name, mode, parent, ops, state_size, data) ({NULL;})\n#define proc_create_net_data_write(name, mode, parent, ops, write, state_size, data) ({NULL;})\n#define proc_create_net(name, mode, parent, state_size, ops) ({NULL;})\n#define proc_create_net_single(name, mode, parent, show, data) ({NULL;})\n#define proc_create_net_single_write(name, mode, parent, show, write, data) ({NULL;})\n\nstatic inline struct pid *tgid_pidfd_to_pid(const struct file *file)\n{\n\treturn ERR_PTR(-EBADF);\n}\n\n#endif  \n\nstruct net;\n\nstatic inline struct proc_dir_entry *proc_net_mkdir(\n\tstruct net *net, const char *name, struct proc_dir_entry *parent)\n{\n\treturn _proc_mkdir(name, 0, parent, net, true);\n}\n\nstruct ns_common;\nint open_related_ns(struct ns_common *ns,\n\t\t   struct ns_common *(*get_ns)(struct ns_common *ns));\n\n \nstatic inline struct pid_namespace *proc_pid_ns(struct super_block *sb)\n{\n\treturn proc_sb_info(sb)->pid_ns;\n}\n\nbool proc_ns_file(const struct file *file);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}