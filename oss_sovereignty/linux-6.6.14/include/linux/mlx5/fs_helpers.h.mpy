{
  "module_name": "fs_helpers.h",
  "hash_id": "bf2eec0e50dfbfbcf23f66686bf75364eae64a93f3256c80c4f5a6f75d01bfbd",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mlx5/fs_helpers.h",
  "human_readable_source": " \n\n#ifndef _MLX5_FS_HELPERS_\n#define _MLX5_FS_HELPERS_\n\n#include <linux/mlx5/mlx5_ifc.h>\n\n#define MLX5_FS_IPV4_VERSION 4\n#define MLX5_FS_IPV6_VERSION 6\n\nstatic inline bool _mlx5_fs_is_outer_ipv_flow(struct mlx5_core_dev *mdev,\n\t\t\t\t\t      const u32 *match_c,\n\t\t\t\t\t      const u32 *match_v, int version)\n{\n\tint match_ipv = MLX5_CAP_FLOWTABLE_NIC_RX(mdev,\n\t\t\t\t\t\t  ft_field_support.outer_ip_version);\n\tconst void *headers_c = MLX5_ADDR_OF(fte_match_param, match_c,\n\t\t\t\t\t     outer_headers);\n\tconst void *headers_v = MLX5_ADDR_OF(fte_match_param, match_v,\n\t\t\t\t\t     outer_headers);\n\n\tif (!match_ipv) {\n\t\tu16 ethertype;\n\n\t\tswitch (version) {\n\t\tcase MLX5_FS_IPV4_VERSION:\n\t\t\tethertype = ETH_P_IP;\n\t\t\tbreak;\n\t\tcase MLX5_FS_IPV6_VERSION:\n\t\t\tethertype = ETH_P_IPV6;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t\t}\n\n\t\treturn MLX5_GET(fte_match_set_lyr_2_4, headers_c,\n\t\t\t\tethertype) == 0xffff &&\n\t\t\tMLX5_GET(fte_match_set_lyr_2_4, headers_v,\n\t\t\t\t ethertype) == ethertype;\n\t}\n\n\treturn MLX5_GET(fte_match_set_lyr_2_4, headers_c,\n\t\t\tip_version) == 0xf &&\n\t\tMLX5_GET(fte_match_set_lyr_2_4, headers_v,\n\t\t\t ip_version) == version;\n}\n\nstatic inline bool\nmlx5_fs_is_outer_ipv4_flow(struct mlx5_core_dev *mdev, const u32 *match_c,\n\t\t\t   const u32 *match_v)\n{\n\treturn _mlx5_fs_is_outer_ipv_flow(mdev, match_c, match_v,\n\t\t\t\t\t  MLX5_FS_IPV4_VERSION);\n}\n\nstatic inline bool\nmlx5_fs_is_outer_ipv6_flow(struct mlx5_core_dev *mdev, const u32 *match_c,\n\t\t\t   const u32 *match_v)\n{\n\treturn _mlx5_fs_is_outer_ipv_flow(mdev, match_c, match_v,\n\t\t\t\t\t  MLX5_FS_IPV6_VERSION);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}