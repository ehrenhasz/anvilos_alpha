{
  "module_name": "phy.h",
  "hash_id": "bb5f60aa7c4e9e774a529e8bdf37b6563745a383c785fd26ad967d1b255324c8",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/phy/phy.h",
  "human_readable_source": " \n \n\n#ifndef __DRIVERS_PHY_H\n#define __DRIVERS_PHY_H\n\n#include <linux/err.h>\n#include <linux/of.h>\n#include <linux/device.h>\n#include <linux/pm_runtime.h>\n#include <linux/regulator/consumer.h>\n\n#include <linux/phy/phy-dp.h>\n#include <linux/phy/phy-lvds.h>\n#include <linux/phy/phy-mipi-dphy.h>\n\nstruct phy;\n\nenum phy_mode {\n\tPHY_MODE_INVALID,\n\tPHY_MODE_USB_HOST,\n\tPHY_MODE_USB_HOST_LS,\n\tPHY_MODE_USB_HOST_FS,\n\tPHY_MODE_USB_HOST_HS,\n\tPHY_MODE_USB_HOST_SS,\n\tPHY_MODE_USB_DEVICE,\n\tPHY_MODE_USB_DEVICE_LS,\n\tPHY_MODE_USB_DEVICE_FS,\n\tPHY_MODE_USB_DEVICE_HS,\n\tPHY_MODE_USB_DEVICE_SS,\n\tPHY_MODE_USB_OTG,\n\tPHY_MODE_UFS_HS_A,\n\tPHY_MODE_UFS_HS_B,\n\tPHY_MODE_PCIE,\n\tPHY_MODE_ETHERNET,\n\tPHY_MODE_MIPI_DPHY,\n\tPHY_MODE_SATA,\n\tPHY_MODE_LVDS,\n\tPHY_MODE_DP\n};\n\nenum phy_media {\n\tPHY_MEDIA_DEFAULT,\n\tPHY_MEDIA_SR,\n\tPHY_MEDIA_DAC,\n};\n\n \nunion phy_configure_opts {\n\tstruct phy_configure_opts_mipi_dphy\tmipi_dphy;\n\tstruct phy_configure_opts_dp\t\tdp;\n\tstruct phy_configure_opts_lvds\t\tlvds;\n};\n\n \nstruct phy_ops {\n\tint\t(*init)(struct phy *phy);\n\tint\t(*exit)(struct phy *phy);\n\tint\t(*power_on)(struct phy *phy);\n\tint\t(*power_off)(struct phy *phy);\n\tint\t(*set_mode)(struct phy *phy, enum phy_mode mode, int submode);\n\tint\t(*set_media)(struct phy *phy, enum phy_media media);\n\tint\t(*set_speed)(struct phy *phy, int speed);\n\n\t \n\tint\t(*configure)(struct phy *phy, union phy_configure_opts *opts);\n\n\t \n\tint\t(*validate)(struct phy *phy, enum phy_mode mode, int submode,\n\t\t\t    union phy_configure_opts *opts);\n\tint\t(*reset)(struct phy *phy);\n\tint\t(*calibrate)(struct phy *phy);\n\tvoid\t(*release)(struct phy *phy);\n\tstruct module *owner;\n};\n\n \nstruct phy_attrs {\n\tu32\t\t\tbus_width;\n\tu32\t\t\tmax_link_rate;\n\tenum phy_mode\t\tmode;\n};\n\n \nstruct phy {\n\tstruct device\t\tdev;\n\tint\t\t\tid;\n\tconst struct phy_ops\t*ops;\n\tstruct mutex\t\tmutex;\n\tint\t\t\tinit_count;\n\tint\t\t\tpower_count;\n\tstruct phy_attrs\tattrs;\n\tstruct regulator\t*pwr;\n\tstruct dentry\t\t*debugfs;\n};\n\n \nstruct phy_provider {\n\tstruct device\t\t*dev;\n\tstruct device_node\t*children;\n\tstruct module\t\t*owner;\n\tstruct list_head\tlist;\n\tstruct phy * (*of_xlate)(struct device *dev,\n\t\tstruct of_phandle_args *args);\n};\n\n \nstruct phy_lookup {\n\tstruct list_head node;\n\tconst char *dev_id;\n\tconst char *con_id;\n\tstruct phy *phy;\n};\n\n#define\tto_phy(a)\t(container_of((a), struct phy, dev))\n\n#define\tof_phy_provider_register(dev, xlate)\t\\\n\t__of_phy_provider_register((dev), NULL, THIS_MODULE, (xlate))\n\n#define\tdevm_of_phy_provider_register(dev, xlate)\t\\\n\t__devm_of_phy_provider_register((dev), NULL, THIS_MODULE, (xlate))\n\n#define of_phy_provider_register_full(dev, children, xlate) \\\n\t__of_phy_provider_register(dev, children, THIS_MODULE, xlate)\n\n#define devm_of_phy_provider_register_full(dev, children, xlate) \\\n\t__devm_of_phy_provider_register(dev, children, THIS_MODULE, xlate)\n\nstatic inline void phy_set_drvdata(struct phy *phy, void *data)\n{\n\tdev_set_drvdata(&phy->dev, data);\n}\n\nstatic inline void *phy_get_drvdata(struct phy *phy)\n{\n\treturn dev_get_drvdata(&phy->dev);\n}\n\n#if IS_ENABLED(CONFIG_GENERIC_PHY)\nint phy_pm_runtime_get(struct phy *phy);\nint phy_pm_runtime_get_sync(struct phy *phy);\nint phy_pm_runtime_put(struct phy *phy);\nint phy_pm_runtime_put_sync(struct phy *phy);\nvoid phy_pm_runtime_allow(struct phy *phy);\nvoid phy_pm_runtime_forbid(struct phy *phy);\nint phy_init(struct phy *phy);\nint phy_exit(struct phy *phy);\nint phy_power_on(struct phy *phy);\nint phy_power_off(struct phy *phy);\nint phy_set_mode_ext(struct phy *phy, enum phy_mode mode, int submode);\n#define phy_set_mode(phy, mode) \\\n\tphy_set_mode_ext(phy, mode, 0)\nint phy_set_media(struct phy *phy, enum phy_media media);\nint phy_set_speed(struct phy *phy, int speed);\nint phy_configure(struct phy *phy, union phy_configure_opts *opts);\nint phy_validate(struct phy *phy, enum phy_mode mode, int submode,\n\t\t union phy_configure_opts *opts);\n\nstatic inline enum phy_mode phy_get_mode(struct phy *phy)\n{\n\treturn phy->attrs.mode;\n}\nint phy_reset(struct phy *phy);\nint phy_calibrate(struct phy *phy);\nstatic inline int phy_get_bus_width(struct phy *phy)\n{\n\treturn phy->attrs.bus_width;\n}\nstatic inline void phy_set_bus_width(struct phy *phy, int bus_width)\n{\n\tphy->attrs.bus_width = bus_width;\n}\nstruct phy *phy_get(struct device *dev, const char *string);\nstruct phy *devm_phy_get(struct device *dev, const char *string);\nstruct phy *devm_phy_optional_get(struct device *dev, const char *string);\nstruct phy *devm_of_phy_get(struct device *dev, struct device_node *np,\n\t\t\t    const char *con_id);\nstruct phy *devm_of_phy_optional_get(struct device *dev, struct device_node *np,\n\t\t\t\t     const char *con_id);\nstruct phy *devm_of_phy_get_by_index(struct device *dev, struct device_node *np,\n\t\t\t\t     int index);\nvoid of_phy_put(struct phy *phy);\nvoid phy_put(struct device *dev, struct phy *phy);\nvoid devm_phy_put(struct device *dev, struct phy *phy);\nstruct phy *of_phy_get(struct device_node *np, const char *con_id);\nstruct phy *of_phy_simple_xlate(struct device *dev,\n\tstruct of_phandle_args *args);\nstruct phy *phy_create(struct device *dev, struct device_node *node,\n\t\t       const struct phy_ops *ops);\nstruct phy *devm_phy_create(struct device *dev, struct device_node *node,\n\t\t\t    const struct phy_ops *ops);\nvoid phy_destroy(struct phy *phy);\nvoid devm_phy_destroy(struct device *dev, struct phy *phy);\nstruct phy_provider *__of_phy_provider_register(struct device *dev,\n\tstruct device_node *children, struct module *owner,\n\tstruct phy * (*of_xlate)(struct device *dev,\n\t\t\t\t struct of_phandle_args *args));\nstruct phy_provider *__devm_of_phy_provider_register(struct device *dev,\n\tstruct device_node *children, struct module *owner,\n\tstruct phy * (*of_xlate)(struct device *dev,\n\t\t\t\t struct of_phandle_args *args));\nvoid of_phy_provider_unregister(struct phy_provider *phy_provider);\nvoid devm_of_phy_provider_unregister(struct device *dev,\n\tstruct phy_provider *phy_provider);\nint phy_create_lookup(struct phy *phy, const char *con_id, const char *dev_id);\nvoid phy_remove_lookup(struct phy *phy, const char *con_id, const char *dev_id);\n#else\nstatic inline int phy_pm_runtime_get(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_pm_runtime_get_sync(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_pm_runtime_put(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_pm_runtime_put_sync(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline void phy_pm_runtime_allow(struct phy *phy)\n{\n\treturn;\n}\n\nstatic inline void phy_pm_runtime_forbid(struct phy *phy)\n{\n\treturn;\n}\n\nstatic inline int phy_init(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_exit(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_power_on(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_power_off(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_set_mode_ext(struct phy *phy, enum phy_mode mode,\n\t\t\t\t   int submode)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\n#define phy_set_mode(phy, mode) \\\n\tphy_set_mode_ext(phy, mode, 0)\n\nstatic inline int phy_set_media(struct phy *phy, enum phy_media media)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENODEV;\n}\n\nstatic inline int phy_set_speed(struct phy *phy, int speed)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENODEV;\n}\n\nstatic inline enum phy_mode phy_get_mode(struct phy *phy)\n{\n\treturn PHY_MODE_INVALID;\n}\n\nstatic inline int phy_reset(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_calibrate(struct phy *phy)\n{\n\tif (!phy)\n\t\treturn 0;\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_configure(struct phy *phy,\n\t\t\t\tunion phy_configure_opts *opts)\n{\n\tif (!phy)\n\t\treturn 0;\n\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_validate(struct phy *phy, enum phy_mode mode, int submode,\n\t\t\t       union phy_configure_opts *opts)\n{\n\tif (!phy)\n\t\treturn 0;\n\n\treturn -ENOSYS;\n}\n\nstatic inline int phy_get_bus_width(struct phy *phy)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline void phy_set_bus_width(struct phy *phy, int bus_width)\n{\n\treturn;\n}\n\nstatic inline struct phy *phy_get(struct device *dev, const char *string)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *devm_phy_get(struct device *dev, const char *string)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *devm_phy_optional_get(struct device *dev,\n\t\t\t\t\t\tconst char *string)\n{\n\treturn NULL;\n}\n\nstatic inline struct phy *devm_of_phy_get(struct device *dev,\n\t\t\t\t\t  struct device_node *np,\n\t\t\t\t\t  const char *con_id)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *devm_of_phy_optional_get(struct device *dev,\n\t\t\t\t\t\t   struct device_node *np,\n\t\t\t\t\t\t   const char *con_id)\n{\n\treturn NULL;\n}\n\nstatic inline struct phy *devm_of_phy_get_by_index(struct device *dev,\n\t\t\t\t\t\t   struct device_node *np,\n\t\t\t\t\t\t   int index)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline void of_phy_put(struct phy *phy)\n{\n}\n\nstatic inline void phy_put(struct device *dev, struct phy *phy)\n{\n}\n\nstatic inline void devm_phy_put(struct device *dev, struct phy *phy)\n{\n}\n\nstatic inline struct phy *of_phy_get(struct device_node *np, const char *con_id)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *of_phy_simple_xlate(struct device *dev,\n\tstruct of_phandle_args *args)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *phy_create(struct device *dev,\n\t\t\t\t     struct device_node *node,\n\t\t\t\t     const struct phy_ops *ops)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy *devm_phy_create(struct device *dev,\n\t\t\t\t\t  struct device_node *node,\n\t\t\t\t\t  const struct phy_ops *ops)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline void phy_destroy(struct phy *phy)\n{\n}\n\nstatic inline void devm_phy_destroy(struct device *dev, struct phy *phy)\n{\n}\n\nstatic inline struct phy_provider *__of_phy_provider_register(\n\tstruct device *dev, struct device_node *children, struct module *owner,\n\tstruct phy * (*of_xlate)(struct device *dev,\n\t\t\t\t struct of_phandle_args *args))\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct phy_provider *__devm_of_phy_provider_register(struct device\n\t*dev, struct device_node *children, struct module *owner,\n\tstruct phy * (*of_xlate)(struct device *dev,\n\t\t\t\t struct of_phandle_args *args))\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline void of_phy_provider_unregister(struct phy_provider *phy_provider)\n{\n}\n\nstatic inline void devm_of_phy_provider_unregister(struct device *dev,\n\tstruct phy_provider *phy_provider)\n{\n}\nstatic inline int\nphy_create_lookup(struct phy *phy, const char *con_id, const char *dev_id)\n{\n\treturn 0;\n}\nstatic inline void phy_remove_lookup(struct phy *phy, const char *con_id,\n\t\t\t\t     const char *dev_id) { }\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}