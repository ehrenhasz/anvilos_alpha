{
  "module_name": "crash_dump.h",
  "hash_id": "24505b7f2470e0cef670081936f32e9883eb503d540198da58e3c47c29deb242",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/crash_dump.h",
  "human_readable_source": " \n#ifndef LINUX_CRASH_DUMP_H\n#define LINUX_CRASH_DUMP_H\n\n#include <linux/kexec.h>\n#include <linux/proc_fs.h>\n#include <linux/elf.h>\n#include <linux/pgtable.h>\n#include <uapi/linux/vmcore.h>\n\n \n#define ELFCORE_ADDR_MAX\t(-1ULL)\n#define ELFCORE_ADDR_ERR\t(-2ULL)\n\nextern unsigned long long elfcorehdr_addr;\nextern unsigned long long elfcorehdr_size;\n\n#ifdef CONFIG_CRASH_DUMP\nextern int elfcorehdr_alloc(unsigned long long *addr, unsigned long long *size);\nextern void elfcorehdr_free(unsigned long long addr);\nextern ssize_t elfcorehdr_read(char *buf, size_t count, u64 *ppos);\nextern ssize_t elfcorehdr_read_notes(char *buf, size_t count, u64 *ppos);\nextern int remap_oldmem_pfn_range(struct vm_area_struct *vma,\n\t\t\t\t  unsigned long from, unsigned long pfn,\n\t\t\t\t  unsigned long size, pgprot_t prot);\n\nssize_t copy_oldmem_page(struct iov_iter *i, unsigned long pfn, size_t csize,\n\t\tunsigned long offset);\nssize_t copy_oldmem_page_encrypted(struct iov_iter *iter, unsigned long pfn,\n\t\t\t\t   size_t csize, unsigned long offset);\n\nvoid vmcore_cleanup(void);\n\n \n#ifndef vmcore_elf_check_arch_cross\n#define vmcore_elf_check_arch_cross(x) 0\n#endif\n\n \n#ifndef vmcore_elf32_check_arch\n#define vmcore_elf32_check_arch(x) elf_check_arch(x)\n#endif\n\n#ifndef vmcore_elf64_check_arch\n#define vmcore_elf64_check_arch(x) (elf_check_arch(x) || vmcore_elf_check_arch_cross(x))\n#endif\n\n \n\nstatic inline bool is_kdump_kernel(void)\n{\n\treturn elfcorehdr_addr != ELFCORE_ADDR_MAX;\n}\n\n \n\nstatic inline int is_vmcore_usable(void)\n{\n\treturn is_kdump_kernel() && elfcorehdr_addr != ELFCORE_ADDR_ERR ? 1 : 0;\n}\n\n \n\nstatic inline void vmcore_unusable(void)\n{\n\tif (is_kdump_kernel())\n\t\telfcorehdr_addr = ELFCORE_ADDR_ERR;\n}\n\n \nstruct vmcore_cb {\n\tbool (*pfn_is_ram)(struct vmcore_cb *cb, unsigned long pfn);\n\tstruct list_head next;\n};\nextern void register_vmcore_cb(struct vmcore_cb *cb);\nextern void unregister_vmcore_cb(struct vmcore_cb *cb);\n\n#else  \nstatic inline bool is_kdump_kernel(void) { return false; }\n#endif  \n\n \nstruct vmcoredd_data {\n\tchar dump_name[VMCOREDD_MAX_NAME_BYTES];  \n\tunsigned int size;                        \n\t \n\tint (*vmcoredd_callback)(struct vmcoredd_data *data, void *buf);\n};\n\n#ifdef CONFIG_PROC_VMCORE_DEVICE_DUMP\nint vmcore_add_device_dump(struct vmcoredd_data *data);\n#else\nstatic inline int vmcore_add_device_dump(struct vmcoredd_data *data)\n{\n\treturn -EOPNOTSUPP;\n}\n#endif  \n\n#ifdef CONFIG_PROC_VMCORE\nssize_t read_from_oldmem(struct iov_iter *iter, size_t count,\n\t\t\t u64 *ppos, bool encrypted);\n#else\nstatic inline ssize_t read_from_oldmem(struct iov_iter *iter, size_t count,\n\t\t\t\t       u64 *ppos, bool encrypted)\n{\n\treturn -EOPNOTSUPP;\n}\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}