{
  "module_name": "virtio_ring.h",
  "hash_id": "29da2b0dac4134619ba8868e9a05ab0cf32d595df9eecba34202b36458741466",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/virtio_ring.h",
  "human_readable_source": " \n#ifndef _LINUX_VIRTIO_RING_H\n#define _LINUX_VIRTIO_RING_H\n\n#include <asm/barrier.h>\n#include <linux/irqreturn.h>\n#include <uapi/linux/virtio_ring.h>\n\n \n\nstatic inline void virtio_mb(bool weak_barriers)\n{\n\tif (weak_barriers)\n\t\tvirt_mb();\n\telse\n\t\tmb();\n}\n\nstatic inline void virtio_rmb(bool weak_barriers)\n{\n\tif (weak_barriers)\n\t\tvirt_rmb();\n\telse\n\t\tdma_rmb();\n}\n\nstatic inline void virtio_wmb(bool weak_barriers)\n{\n\tif (weak_barriers)\n\t\tvirt_wmb();\n\telse\n\t\tdma_wmb();\n}\n\n#define virtio_store_mb(weak_barriers, p, v) \\\ndo { \\\n\tif (weak_barriers) { \\\n\t\tvirt_store_mb(*p, v); \\\n\t} else { \\\n\t\tWRITE_ONCE(*p, v); \\\n\t\tmb(); \\\n\t} \\\n} while (0) \\\n\nstruct virtio_device;\nstruct virtqueue;\nstruct device;\n\n \nstruct virtqueue *vring_create_virtqueue(unsigned int index,\n\t\t\t\t\t unsigned int num,\n\t\t\t\t\t unsigned int vring_align,\n\t\t\t\t\t struct virtio_device *vdev,\n\t\t\t\t\t bool weak_barriers,\n\t\t\t\t\t bool may_reduce_num,\n\t\t\t\t\t bool ctx,\n\t\t\t\t\t bool (*notify)(struct virtqueue *vq),\n\t\t\t\t\t void (*callback)(struct virtqueue *vq),\n\t\t\t\t\t const char *name);\n\n \nstruct virtqueue *vring_create_virtqueue_dma(unsigned int index,\n\t\t\t\t\t     unsigned int num,\n\t\t\t\t\t     unsigned int vring_align,\n\t\t\t\t\t     struct virtio_device *vdev,\n\t\t\t\t\t     bool weak_barriers,\n\t\t\t\t\t     bool may_reduce_num,\n\t\t\t\t\t     bool ctx,\n\t\t\t\t\t     bool (*notify)(struct virtqueue *vq),\n\t\t\t\t\t     void (*callback)(struct virtqueue *vq),\n\t\t\t\t\t     const char *name,\n\t\t\t\t\t     struct device *dma_dev);\n\n \nstruct virtqueue *vring_new_virtqueue(unsigned int index,\n\t\t\t\t      unsigned int num,\n\t\t\t\t      unsigned int vring_align,\n\t\t\t\t      struct virtio_device *vdev,\n\t\t\t\t      bool weak_barriers,\n\t\t\t\t      bool ctx,\n\t\t\t\t      void *pages,\n\t\t\t\t      bool (*notify)(struct virtqueue *vq),\n\t\t\t\t      void (*callback)(struct virtqueue *vq),\n\t\t\t\t      const char *name);\n\n \nvoid vring_del_virtqueue(struct virtqueue *vq);\n\n \nvoid vring_transport_features(struct virtio_device *vdev);\n\nirqreturn_t vring_interrupt(int irq, void *_vq);\n\nu32 vring_notification_data(struct virtqueue *_vq);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}