{
  "module_name": "fpga-mgr.h",
  "hash_id": "fa0bb23d2f2fb23ef72b37e2edb87fa6a3c4dfcb434f8728e3df71d50bf1fff4",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/fpga/fpga-mgr.h",
  "human_readable_source": " \n \n#ifndef _LINUX_FPGA_MGR_H\n#define _LINUX_FPGA_MGR_H\n\n#include <linux/mutex.h>\n#include <linux/platform_device.h>\n\nstruct fpga_manager;\nstruct sg_table;\n\n \nenum fpga_mgr_states {\n\t \n\tFPGA_MGR_STATE_UNKNOWN,\n\tFPGA_MGR_STATE_POWER_OFF,\n\tFPGA_MGR_STATE_POWER_UP,\n\tFPGA_MGR_STATE_RESET,\n\n\t \n\tFPGA_MGR_STATE_FIRMWARE_REQ,\n\tFPGA_MGR_STATE_FIRMWARE_REQ_ERR,\n\n\t \n\tFPGA_MGR_STATE_PARSE_HEADER,\n\tFPGA_MGR_STATE_PARSE_HEADER_ERR,\n\tFPGA_MGR_STATE_WRITE_INIT,\n\tFPGA_MGR_STATE_WRITE_INIT_ERR,\n\tFPGA_MGR_STATE_WRITE,\n\tFPGA_MGR_STATE_WRITE_ERR,\n\tFPGA_MGR_STATE_WRITE_COMPLETE,\n\tFPGA_MGR_STATE_WRITE_COMPLETE_ERR,\n\n\t \n\tFPGA_MGR_STATE_OPERATING,\n};\n\n \n#define FPGA_MGR_PARTIAL_RECONFIG\tBIT(0)\n#define FPGA_MGR_EXTERNAL_CONFIG\tBIT(1)\n#define FPGA_MGR_ENCRYPTED_BITSTREAM\tBIT(2)\n#define FPGA_MGR_BITSTREAM_LSB_FIRST\tBIT(3)\n#define FPGA_MGR_COMPRESSED_BITSTREAM\tBIT(4)\n\n \nstruct fpga_image_info {\n\tu32 flags;\n\tu32 enable_timeout_us;\n\tu32 disable_timeout_us;\n\tu32 config_complete_timeout_us;\n\tchar *firmware_name;\n\tstruct sg_table *sgt;\n\tconst char *buf;\n\tsize_t count;\n\tsize_t header_size;\n\tsize_t data_size;\n\tint region_id;\n\tstruct device *dev;\n#ifdef CONFIG_OF\n\tstruct device_node *overlay;\n#endif\n};\n\n \nstruct fpga_compat_id {\n\tu64 id_h;\n\tu64 id_l;\n};\n\n \nstruct fpga_manager_info {\n\tconst char *name;\n\tstruct fpga_compat_id *compat_id;\n\tconst struct fpga_manager_ops *mops;\n\tvoid *priv;\n};\n\n \nstruct fpga_manager_ops {\n\tsize_t initial_header_size;\n\tbool skip_header;\n\tenum fpga_mgr_states (*state)(struct fpga_manager *mgr);\n\tu64 (*status)(struct fpga_manager *mgr);\n\tint (*parse_header)(struct fpga_manager *mgr,\n\t\t\t    struct fpga_image_info *info,\n\t\t\t    const char *buf, size_t count);\n\tint (*write_init)(struct fpga_manager *mgr,\n\t\t\t  struct fpga_image_info *info,\n\t\t\t  const char *buf, size_t count);\n\tint (*write)(struct fpga_manager *mgr, const char *buf, size_t count);\n\tint (*write_sg)(struct fpga_manager *mgr, struct sg_table *sgt);\n\tint (*write_complete)(struct fpga_manager *mgr,\n\t\t\t      struct fpga_image_info *info);\n\tvoid (*fpga_remove)(struct fpga_manager *mgr);\n\tconst struct attribute_group **groups;\n};\n\n \n#define FPGA_MGR_STATUS_OPERATION_ERR\t\tBIT(0)\n#define FPGA_MGR_STATUS_CRC_ERR\t\t\tBIT(1)\n#define FPGA_MGR_STATUS_INCOMPATIBLE_IMAGE_ERR\tBIT(2)\n#define FPGA_MGR_STATUS_IP_PROTOCOL_ERR\t\tBIT(3)\n#define FPGA_MGR_STATUS_FIFO_OVERFLOW_ERR\tBIT(4)\n\n \nstruct fpga_manager {\n\tconst char *name;\n\tstruct device dev;\n\tstruct mutex ref_mutex;\n\tenum fpga_mgr_states state;\n\tstruct fpga_compat_id *compat_id;\n\tconst struct fpga_manager_ops *mops;\n\tvoid *priv;\n};\n\n#define to_fpga_manager(d) container_of(d, struct fpga_manager, dev)\n\nstruct fpga_image_info *fpga_image_info_alloc(struct device *dev);\n\nvoid fpga_image_info_free(struct fpga_image_info *info);\n\nint fpga_mgr_load(struct fpga_manager *mgr, struct fpga_image_info *info);\n\nint fpga_mgr_lock(struct fpga_manager *mgr);\nvoid fpga_mgr_unlock(struct fpga_manager *mgr);\n\nstruct fpga_manager *of_fpga_mgr_get(struct device_node *node);\n\nstruct fpga_manager *fpga_mgr_get(struct device *dev);\n\nvoid fpga_mgr_put(struct fpga_manager *mgr);\n\nstruct fpga_manager *\nfpga_mgr_register_full(struct device *parent, const struct fpga_manager_info *info);\n\nstruct fpga_manager *\nfpga_mgr_register(struct device *parent, const char *name,\n\t\t  const struct fpga_manager_ops *mops, void *priv);\nvoid fpga_mgr_unregister(struct fpga_manager *mgr);\n\nstruct fpga_manager *\ndevm_fpga_mgr_register_full(struct device *parent, const struct fpga_manager_info *info);\nstruct fpga_manager *\ndevm_fpga_mgr_register(struct device *parent, const char *name,\n\t\t       const struct fpga_manager_ops *mops, void *priv);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}