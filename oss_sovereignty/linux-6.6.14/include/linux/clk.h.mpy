{
  "module_name": "clk.h",
  "hash_id": "243b34d7981dd54d5ccea71e437fb5caff08dc11655bc391c5aa17d91ceb4d4f",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/clk.h",
  "human_readable_source": " \n \n#ifndef __LINUX_CLK_H\n#define __LINUX_CLK_H\n\n#include <linux/err.h>\n#include <linux/kernel.h>\n#include <linux/notifier.h>\n\nstruct device;\nstruct clk;\nstruct device_node;\nstruct of_phandle_args;\n\n \n#define PRE_RATE_CHANGE\t\t\tBIT(0)\n#define POST_RATE_CHANGE\t\tBIT(1)\n#define ABORT_RATE_CHANGE\t\tBIT(2)\n\n \nstruct clk_notifier {\n\tstruct clk\t\t\t*clk;\n\tstruct srcu_notifier_head\tnotifier_head;\n\tstruct list_head\t\tnode;\n};\n\n \nstruct clk_notifier_data {\n\tstruct clk\t\t*clk;\n\tunsigned long\t\told_rate;\n\tunsigned long\t\tnew_rate;\n};\n\n \nstruct clk_bulk_data {\n\tconst char\t\t*id;\n\tstruct clk\t\t*clk;\n};\n\n#ifdef CONFIG_COMMON_CLK\n\n \nint clk_notifier_register(struct clk *clk, struct notifier_block *nb);\n\n \nint clk_notifier_unregister(struct clk *clk, struct notifier_block *nb);\n\n \nint devm_clk_notifier_register(struct device *dev, struct clk *clk,\n\t\t\t       struct notifier_block *nb);\n\n \nlong clk_get_accuracy(struct clk *clk);\n\n \nint clk_set_phase(struct clk *clk, int degrees);\n\n \nint clk_get_phase(struct clk *clk);\n\n \nint clk_set_duty_cycle(struct clk *clk, unsigned int num, unsigned int den);\n\n \nint clk_get_scaled_duty_cycle(struct clk *clk, unsigned int scale);\n\n \nbool clk_is_match(const struct clk *p, const struct clk *q);\n\n \nint clk_rate_exclusive_get(struct clk *clk);\n\n \nvoid clk_rate_exclusive_put(struct clk *clk);\n\n#else\n\nstatic inline int clk_notifier_register(struct clk *clk,\n\t\t\t\t\tstruct notifier_block *nb)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline int clk_notifier_unregister(struct clk *clk,\n\t\t\t\t\t  struct notifier_block *nb)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline int devm_clk_notifier_register(struct device *dev,\n\t\t\t\t\t     struct clk *clk,\n\t\t\t\t\t     struct notifier_block *nb)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline long clk_get_accuracy(struct clk *clk)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline long clk_set_phase(struct clk *clk, int phase)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline long clk_get_phase(struct clk *clk)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline int clk_set_duty_cycle(struct clk *clk, unsigned int num,\n\t\t\t\t     unsigned int den)\n{\n\treturn -ENOTSUPP;\n}\n\nstatic inline unsigned int clk_get_scaled_duty_cycle(struct clk *clk,\n\t\t\t\t\t\t     unsigned int scale)\n{\n\treturn 0;\n}\n\nstatic inline bool clk_is_match(const struct clk *p, const struct clk *q)\n{\n\treturn p == q;\n}\n\nstatic inline int clk_rate_exclusive_get(struct clk *clk)\n{\n\treturn 0;\n}\n\nstatic inline void clk_rate_exclusive_put(struct clk *clk) {}\n\n#endif\n\n#ifdef CONFIG_HAVE_CLK_PREPARE\n \nint clk_prepare(struct clk *clk);\nint __must_check clk_bulk_prepare(int num_clks,\n\t\t\t\t  const struct clk_bulk_data *clks);\n\n \nbool clk_is_enabled_when_prepared(struct clk *clk);\n#else\nstatic inline int clk_prepare(struct clk *clk)\n{\n\tmight_sleep();\n\treturn 0;\n}\n\nstatic inline int __must_check\nclk_bulk_prepare(int num_clks, const struct clk_bulk_data *clks)\n{\n\tmight_sleep();\n\treturn 0;\n}\n\nstatic inline bool clk_is_enabled_when_prepared(struct clk *clk)\n{\n\treturn false;\n}\n#endif\n\n \n#ifdef CONFIG_HAVE_CLK_PREPARE\nvoid clk_unprepare(struct clk *clk);\nvoid clk_bulk_unprepare(int num_clks, const struct clk_bulk_data *clks);\n#else\nstatic inline void clk_unprepare(struct clk *clk)\n{\n\tmight_sleep();\n}\nstatic inline void clk_bulk_unprepare(int num_clks,\n\t\t\t\t      const struct clk_bulk_data *clks)\n{\n\tmight_sleep();\n}\n#endif\n\n#ifdef CONFIG_HAVE_CLK\n \nstruct clk *clk_get(struct device *dev, const char *id);\n\n \nint __must_check clk_bulk_get(struct device *dev, int num_clks,\n\t\t\t      struct clk_bulk_data *clks);\n \nint __must_check clk_bulk_get_all(struct device *dev,\n\t\t\t\t  struct clk_bulk_data **clks);\n\n \nint __must_check clk_bulk_get_optional(struct device *dev, int num_clks,\n\t\t\t\t       struct clk_bulk_data *clks);\n \nint __must_check devm_clk_bulk_get(struct device *dev, int num_clks,\n\t\t\t\t   struct clk_bulk_data *clks);\n \nint __must_check devm_clk_bulk_get_optional(struct device *dev, int num_clks,\n\t\t\t\t\t    struct clk_bulk_data *clks);\n \n\nint __must_check devm_clk_bulk_get_all(struct device *dev,\n\t\t\t\t       struct clk_bulk_data **clks);\n\n \nstruct clk *devm_clk_get(struct device *dev, const char *id);\n\n \nstruct clk *devm_clk_get_prepared(struct device *dev, const char *id);\n\n \nstruct clk *devm_clk_get_enabled(struct device *dev, const char *id);\n\n \nstruct clk *devm_clk_get_optional(struct device *dev, const char *id);\n\n \nstruct clk *devm_clk_get_optional_prepared(struct device *dev, const char *id);\n\n \nstruct clk *devm_clk_get_optional_enabled(struct device *dev, const char *id);\n\n \nstruct clk *devm_get_clk_from_child(struct device *dev,\n\t\t\t\t    struct device_node *np, const char *con_id);\n\n \nint clk_enable(struct clk *clk);\n\n \nint __must_check clk_bulk_enable(int num_clks,\n\t\t\t\t const struct clk_bulk_data *clks);\n\n \nvoid clk_disable(struct clk *clk);\n\n \nvoid clk_bulk_disable(int num_clks, const struct clk_bulk_data *clks);\n\n \nunsigned long clk_get_rate(struct clk *clk);\n\n \nvoid clk_put(struct clk *clk);\n\n \nvoid clk_bulk_put(int num_clks, struct clk_bulk_data *clks);\n\n \nvoid clk_bulk_put_all(int num_clks, struct clk_bulk_data *clks);\n\n \nvoid devm_clk_put(struct device *dev, struct clk *clk);\n\n \n\n\n \nlong clk_round_rate(struct clk *clk, unsigned long rate);\n\n \nint clk_set_rate(struct clk *clk, unsigned long rate);\n\n \nint clk_set_rate_exclusive(struct clk *clk, unsigned long rate);\n\n \nbool clk_has_parent(const struct clk *clk, const struct clk *parent);\n\n \nint clk_set_rate_range(struct clk *clk, unsigned long min, unsigned long max);\n\n \nint clk_set_min_rate(struct clk *clk, unsigned long rate);\n\n \nint clk_set_max_rate(struct clk *clk, unsigned long rate);\n\n \nint clk_set_parent(struct clk *clk, struct clk *parent);\n\n \nstruct clk *clk_get_parent(struct clk *clk);\n\n \nstruct clk *clk_get_sys(const char *dev_id, const char *con_id);\n\n \nint clk_save_context(void);\n\n \nvoid clk_restore_context(void);\n\n#else  \n\nstatic inline struct clk *clk_get(struct device *dev, const char *id)\n{\n\treturn NULL;\n}\n\nstatic inline int __must_check clk_bulk_get(struct device *dev, int num_clks,\n\t\t\t\t\t    struct clk_bulk_data *clks)\n{\n\treturn 0;\n}\n\nstatic inline int __must_check clk_bulk_get_optional(struct device *dev,\n\t\t\t\tint num_clks, struct clk_bulk_data *clks)\n{\n\treturn 0;\n}\n\nstatic inline int __must_check clk_bulk_get_all(struct device *dev,\n\t\t\t\t\t struct clk_bulk_data **clks)\n{\n\treturn 0;\n}\n\nstatic inline struct clk *devm_clk_get(struct device *dev, const char *id)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *devm_clk_get_prepared(struct device *dev,\n\t\t\t\t\t\tconst char *id)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *devm_clk_get_enabled(struct device *dev,\n\t\t\t\t\t       const char *id)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *devm_clk_get_optional(struct device *dev,\n\t\t\t\t\t\tconst char *id)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *devm_clk_get_optional_prepared(struct device *dev,\n\t\t\t\t\t\t\t const char *id)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *devm_clk_get_optional_enabled(struct device *dev,\n\t\t\t\t\t\t\tconst char *id)\n{\n\treturn NULL;\n}\n\nstatic inline int __must_check devm_clk_bulk_get(struct device *dev, int num_clks,\n\t\t\t\t\t\t struct clk_bulk_data *clks)\n{\n\treturn 0;\n}\n\nstatic inline int __must_check devm_clk_bulk_get_optional(struct device *dev,\n\t\t\t\tint num_clks, struct clk_bulk_data *clks)\n{\n\treturn 0;\n}\n\nstatic inline int __must_check devm_clk_bulk_get_all(struct device *dev,\n\t\t\t\t\t\t     struct clk_bulk_data **clks)\n{\n\n\treturn 0;\n}\n\nstatic inline struct clk *devm_get_clk_from_child(struct device *dev,\n\t\t\t\tstruct device_node *np, const char *con_id)\n{\n\treturn NULL;\n}\n\nstatic inline void clk_put(struct clk *clk) {}\n\nstatic inline void clk_bulk_put(int num_clks, struct clk_bulk_data *clks) {}\n\nstatic inline void clk_bulk_put_all(int num_clks, struct clk_bulk_data *clks) {}\n\nstatic inline void devm_clk_put(struct device *dev, struct clk *clk) {}\n\nstatic inline int clk_enable(struct clk *clk)\n{\n\treturn 0;\n}\n\nstatic inline int __must_check clk_bulk_enable(int num_clks,\n\t\t\t\t\t       const struct clk_bulk_data *clks)\n{\n\treturn 0;\n}\n\nstatic inline void clk_disable(struct clk *clk) {}\n\n\nstatic inline void clk_bulk_disable(int num_clks,\n\t\t\t\t    const struct clk_bulk_data *clks) {}\n\nstatic inline unsigned long clk_get_rate(struct clk *clk)\n{\n\treturn 0;\n}\n\nstatic inline int clk_set_rate(struct clk *clk, unsigned long rate)\n{\n\treturn 0;\n}\n\nstatic inline int clk_set_rate_exclusive(struct clk *clk, unsigned long rate)\n{\n\treturn 0;\n}\n\nstatic inline long clk_round_rate(struct clk *clk, unsigned long rate)\n{\n\treturn 0;\n}\n\nstatic inline bool clk_has_parent(struct clk *clk, struct clk *parent)\n{\n\treturn true;\n}\n\nstatic inline int clk_set_rate_range(struct clk *clk, unsigned long min,\n\t\t\t\t     unsigned long max)\n{\n\treturn 0;\n}\n\nstatic inline int clk_set_min_rate(struct clk *clk, unsigned long rate)\n{\n\treturn 0;\n}\n\nstatic inline int clk_set_max_rate(struct clk *clk, unsigned long rate)\n{\n\treturn 0;\n}\n\nstatic inline int clk_set_parent(struct clk *clk, struct clk *parent)\n{\n\treturn 0;\n}\n\nstatic inline struct clk *clk_get_parent(struct clk *clk)\n{\n\treturn NULL;\n}\n\nstatic inline struct clk *clk_get_sys(const char *dev_id, const char *con_id)\n{\n\treturn NULL;\n}\n\nstatic inline int clk_save_context(void)\n{\n\treturn 0;\n}\n\nstatic inline void clk_restore_context(void) {}\n\n#endif\n\n \nstatic inline int clk_prepare_enable(struct clk *clk)\n{\n\tint ret;\n\n\tret = clk_prepare(clk);\n\tif (ret)\n\t\treturn ret;\n\tret = clk_enable(clk);\n\tif (ret)\n\t\tclk_unprepare(clk);\n\n\treturn ret;\n}\n\n \nstatic inline void clk_disable_unprepare(struct clk *clk)\n{\n\tclk_disable(clk);\n\tclk_unprepare(clk);\n}\n\nstatic inline int __must_check\nclk_bulk_prepare_enable(int num_clks, const struct clk_bulk_data *clks)\n{\n\tint ret;\n\n\tret = clk_bulk_prepare(num_clks, clks);\n\tif (ret)\n\t\treturn ret;\n\tret = clk_bulk_enable(num_clks, clks);\n\tif (ret)\n\t\tclk_bulk_unprepare(num_clks, clks);\n\n\treturn ret;\n}\n\nstatic inline void clk_bulk_disable_unprepare(int num_clks,\n\t\t\t\t\t      const struct clk_bulk_data *clks)\n{\n\tclk_bulk_disable(num_clks, clks);\n\tclk_bulk_unprepare(num_clks, clks);\n}\n\n \nstatic inline int clk_drop_range(struct clk *clk)\n{\n\treturn clk_set_rate_range(clk, 0, ULONG_MAX);\n}\n\n \nstatic inline struct clk *clk_get_optional(struct device *dev, const char *id)\n{\n\tstruct clk *clk = clk_get(dev, id);\n\n\tif (clk == ERR_PTR(-ENOENT))\n\t\treturn NULL;\n\n\treturn clk;\n}\n\n#if defined(CONFIG_OF) && defined(CONFIG_COMMON_CLK)\nstruct clk *of_clk_get(struct device_node *np, int index);\nstruct clk *of_clk_get_by_name(struct device_node *np, const char *name);\nstruct clk *of_clk_get_from_provider(struct of_phandle_args *clkspec);\n#else\nstatic inline struct clk *of_clk_get(struct device_node *np, int index)\n{\n\treturn ERR_PTR(-ENOENT);\n}\nstatic inline struct clk *of_clk_get_by_name(struct device_node *np,\n\t\t\t\t\t     const char *name)\n{\n\treturn ERR_PTR(-ENOENT);\n}\nstatic inline struct clk *of_clk_get_from_provider(struct of_phandle_args *clkspec)\n{\n\treturn ERR_PTR(-ENOENT);\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}