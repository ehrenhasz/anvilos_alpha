{
  "module_name": "consumer.h",
  "hash_id": "f0da3a28cb3cb85aadefcfd8b1c9486e32f52ccaf57de37d1ac6f27ef62ad663",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/gpio/consumer.h",
  "human_readable_source": " \n#ifndef __LINUX_GPIO_CONSUMER_H\n#define __LINUX_GPIO_CONSUMER_H\n\n#include <linux/bits.h>\n#include <linux/types.h>\n\nstruct acpi_device;\nstruct device;\nstruct fwnode_handle;\n\nstruct gpio_array;\nstruct gpio_desc;\n\n \nstruct gpio_descs {\n\tstruct gpio_array *info;\n\tunsigned int ndescs;\n\tstruct gpio_desc *desc[];\n};\n\n#define GPIOD_FLAGS_BIT_DIR_SET\t\tBIT(0)\n#define GPIOD_FLAGS_BIT_DIR_OUT\t\tBIT(1)\n#define GPIOD_FLAGS_BIT_DIR_VAL\t\tBIT(2)\n#define GPIOD_FLAGS_BIT_OPEN_DRAIN\tBIT(3)\n#define GPIOD_FLAGS_BIT_NONEXCLUSIVE\tBIT(4)\n\n \nenum gpiod_flags {\n\tGPIOD_ASIS\t= 0,\n\tGPIOD_IN\t= GPIOD_FLAGS_BIT_DIR_SET,\n\tGPIOD_OUT_LOW\t= GPIOD_FLAGS_BIT_DIR_SET | GPIOD_FLAGS_BIT_DIR_OUT,\n\tGPIOD_OUT_HIGH\t= GPIOD_FLAGS_BIT_DIR_SET | GPIOD_FLAGS_BIT_DIR_OUT |\n\t\t\t  GPIOD_FLAGS_BIT_DIR_VAL,\n\tGPIOD_OUT_LOW_OPEN_DRAIN = GPIOD_OUT_LOW | GPIOD_FLAGS_BIT_OPEN_DRAIN,\n\tGPIOD_OUT_HIGH_OPEN_DRAIN = GPIOD_OUT_HIGH | GPIOD_FLAGS_BIT_OPEN_DRAIN,\n};\n\n#ifdef CONFIG_GPIOLIB\n\n \nint gpiod_count(struct device *dev, const char *con_id);\n\n \nstruct gpio_desc *__must_check gpiod_get(struct device *dev,\n\t\t\t\t\t const char *con_id,\n\t\t\t\t\t enum gpiod_flags flags);\nstruct gpio_desc *__must_check gpiod_get_index(struct device *dev,\n\t\t\t\t\t       const char *con_id,\n\t\t\t\t\t       unsigned int idx,\n\t\t\t\t\t       enum gpiod_flags flags);\nstruct gpio_desc *__must_check gpiod_get_optional(struct device *dev,\n\t\t\t\t\t\t  const char *con_id,\n\t\t\t\t\t\t  enum gpiod_flags flags);\nstruct gpio_desc *__must_check gpiod_get_index_optional(struct device *dev,\n\t\t\t\t\t\t\tconst char *con_id,\n\t\t\t\t\t\t\tunsigned int index,\n\t\t\t\t\t\t\tenum gpiod_flags flags);\nstruct gpio_descs *__must_check gpiod_get_array(struct device *dev,\n\t\t\t\t\t\tconst char *con_id,\n\t\t\t\t\t\tenum gpiod_flags flags);\nstruct gpio_descs *__must_check gpiod_get_array_optional(struct device *dev,\n\t\t\t\t\t\t\tconst char *con_id,\n\t\t\t\t\t\t\tenum gpiod_flags flags);\nvoid gpiod_put(struct gpio_desc *desc);\nvoid gpiod_put_array(struct gpio_descs *descs);\n\nstruct gpio_desc *__must_check devm_gpiod_get(struct device *dev,\n\t\t\t\t\t      const char *con_id,\n\t\t\t\t\t      enum gpiod_flags flags);\nstruct gpio_desc *__must_check devm_gpiod_get_index(struct device *dev,\n\t\t\t\t\t\t    const char *con_id,\n\t\t\t\t\t\t    unsigned int idx,\n\t\t\t\t\t\t    enum gpiod_flags flags);\nstruct gpio_desc *__must_check devm_gpiod_get_optional(struct device *dev,\n\t\t\t\t\t\t       const char *con_id,\n\t\t\t\t\t\t       enum gpiod_flags flags);\nstruct gpio_desc *__must_check\ndevm_gpiod_get_index_optional(struct device *dev, const char *con_id,\n\t\t\t      unsigned int index, enum gpiod_flags flags);\nstruct gpio_descs *__must_check devm_gpiod_get_array(struct device *dev,\n\t\t\t\t\t\t     const char *con_id,\n\t\t\t\t\t\t     enum gpiod_flags flags);\nstruct gpio_descs *__must_check\ndevm_gpiod_get_array_optional(struct device *dev, const char *con_id,\n\t\t\t      enum gpiod_flags flags);\nvoid devm_gpiod_put(struct device *dev, struct gpio_desc *desc);\nvoid devm_gpiod_unhinge(struct device *dev, struct gpio_desc *desc);\nvoid devm_gpiod_put_array(struct device *dev, struct gpio_descs *descs);\n\nint gpiod_get_direction(struct gpio_desc *desc);\nint gpiod_direction_input(struct gpio_desc *desc);\nint gpiod_direction_output(struct gpio_desc *desc, int value);\nint gpiod_direction_output_raw(struct gpio_desc *desc, int value);\nint gpiod_enable_hw_timestamp_ns(struct gpio_desc *desc, unsigned long flags);\nint gpiod_disable_hw_timestamp_ns(struct gpio_desc *desc, unsigned long flags);\n\n \nint gpiod_get_value(const struct gpio_desc *desc);\nint gpiod_get_array_value(unsigned int array_size,\n\t\t\t  struct gpio_desc **desc_array,\n\t\t\t  struct gpio_array *array_info,\n\t\t\t  unsigned long *value_bitmap);\nvoid gpiod_set_value(struct gpio_desc *desc, int value);\nint gpiod_set_array_value(unsigned int array_size,\n\t\t\t  struct gpio_desc **desc_array,\n\t\t\t  struct gpio_array *array_info,\n\t\t\t  unsigned long *value_bitmap);\nint gpiod_get_raw_value(const struct gpio_desc *desc);\nint gpiod_get_raw_array_value(unsigned int array_size,\n\t\t\t      struct gpio_desc **desc_array,\n\t\t\t      struct gpio_array *array_info,\n\t\t\t      unsigned long *value_bitmap);\nvoid gpiod_set_raw_value(struct gpio_desc *desc, int value);\nint gpiod_set_raw_array_value(unsigned int array_size,\n\t\t\t      struct gpio_desc **desc_array,\n\t\t\t      struct gpio_array *array_info,\n\t\t\t      unsigned long *value_bitmap);\n\n \nint gpiod_get_value_cansleep(const struct gpio_desc *desc);\nint gpiod_get_array_value_cansleep(unsigned int array_size,\n\t\t\t\t   struct gpio_desc **desc_array,\n\t\t\t\t   struct gpio_array *array_info,\n\t\t\t\t   unsigned long *value_bitmap);\nvoid gpiod_set_value_cansleep(struct gpio_desc *desc, int value);\nint gpiod_set_array_value_cansleep(unsigned int array_size,\n\t\t\t\t   struct gpio_desc **desc_array,\n\t\t\t\t   struct gpio_array *array_info,\n\t\t\t\t   unsigned long *value_bitmap);\nint gpiod_get_raw_value_cansleep(const struct gpio_desc *desc);\nint gpiod_get_raw_array_value_cansleep(unsigned int array_size,\n\t\t\t\t       struct gpio_desc **desc_array,\n\t\t\t\t       struct gpio_array *array_info,\n\t\t\t\t       unsigned long *value_bitmap);\nvoid gpiod_set_raw_value_cansleep(struct gpio_desc *desc, int value);\nint gpiod_set_raw_array_value_cansleep(unsigned int array_size,\n\t\t\t\t       struct gpio_desc **desc_array,\n\t\t\t\t       struct gpio_array *array_info,\n\t\t\t\t       unsigned long *value_bitmap);\n\nint gpiod_set_config(struct gpio_desc *desc, unsigned long config);\nint gpiod_set_debounce(struct gpio_desc *desc, unsigned int debounce);\nint gpiod_set_transitory(struct gpio_desc *desc, bool transitory);\nvoid gpiod_toggle_active_low(struct gpio_desc *desc);\n\nint gpiod_is_active_low(const struct gpio_desc *desc);\nint gpiod_cansleep(const struct gpio_desc *desc);\n\nint gpiod_to_irq(const struct gpio_desc *desc);\nint gpiod_set_consumer_name(struct gpio_desc *desc, const char *name);\n\n \nstruct gpio_desc *gpio_to_desc(unsigned gpio);\nint desc_to_gpio(const struct gpio_desc *desc);\n\nstruct gpio_desc *fwnode_gpiod_get_index(struct fwnode_handle *fwnode,\n\t\t\t\t\t const char *con_id, int index,\n\t\t\t\t\t enum gpiod_flags flags,\n\t\t\t\t\t const char *label);\nstruct gpio_desc *devm_fwnode_gpiod_get_index(struct device *dev,\n\t\t\t\t\t      struct fwnode_handle *child,\n\t\t\t\t\t      const char *con_id, int index,\n\t\t\t\t\t      enum gpiod_flags flags,\n\t\t\t\t\t      const char *label);\n\n#else  \n\n#include <linux/err.h>\n#include <linux/kernel.h>\n\n#include <asm/bug.h>\n\nstatic inline int gpiod_count(struct device *dev, const char *con_id)\n{\n\treturn 0;\n}\n\nstatic inline struct gpio_desc *__must_check gpiod_get(struct device *dev,\n\t\t\t\t\t\t       const char *con_id,\n\t\t\t\t\t\t       enum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\nstatic inline struct gpio_desc *__must_check\ngpiod_get_index(struct device *dev,\n\t\tconst char *con_id,\n\t\tunsigned int idx,\n\t\tenum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct gpio_desc *__must_check\ngpiod_get_optional(struct device *dev, const char *con_id,\n\t\t   enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline struct gpio_desc *__must_check\ngpiod_get_index_optional(struct device *dev, const char *con_id,\n\t\t\t unsigned int index, enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline struct gpio_descs *__must_check\ngpiod_get_array(struct device *dev, const char *con_id,\n\t\tenum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct gpio_descs *__must_check\ngpiod_get_array_optional(struct device *dev, const char *con_id,\n\t\t\t enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline void gpiod_put(struct gpio_desc *desc)\n{\n\tmight_sleep();\n\n\t \n\tWARN_ON(desc);\n}\n\nstatic inline void devm_gpiod_unhinge(struct device *dev,\n\t\t\t\t      struct gpio_desc *desc)\n{\n\tmight_sleep();\n\n\t \n\tWARN_ON(desc);\n}\n\nstatic inline void gpiod_put_array(struct gpio_descs *descs)\n{\n\tmight_sleep();\n\n\t \n\tWARN_ON(descs);\n}\n\nstatic inline struct gpio_desc *__must_check\ndevm_gpiod_get(struct device *dev,\n\t\t const char *con_id,\n\t\t enum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\nstatic inline\nstruct gpio_desc *__must_check\ndevm_gpiod_get_index(struct device *dev,\n\t\t       const char *con_id,\n\t\t       unsigned int idx,\n\t\t       enum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct gpio_desc *__must_check\ndevm_gpiod_get_optional(struct device *dev, const char *con_id,\n\t\t\t  enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline struct gpio_desc *__must_check\ndevm_gpiod_get_index_optional(struct device *dev, const char *con_id,\n\t\t\t\tunsigned int index, enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline struct gpio_descs *__must_check\ndevm_gpiod_get_array(struct device *dev, const char *con_id,\n\t\t     enum gpiod_flags flags)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline struct gpio_descs *__must_check\ndevm_gpiod_get_array_optional(struct device *dev, const char *con_id,\n\t\t\t      enum gpiod_flags flags)\n{\n\treturn NULL;\n}\n\nstatic inline void devm_gpiod_put(struct device *dev, struct gpio_desc *desc)\n{\n\tmight_sleep();\n\n\t \n\tWARN_ON(desc);\n}\n\nstatic inline void devm_gpiod_put_array(struct device *dev,\n\t\t\t\t\tstruct gpio_descs *descs)\n{\n\tmight_sleep();\n\n\t \n\tWARN_ON(descs);\n}\n\n\nstatic inline int gpiod_get_direction(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_direction_input(struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_direction_output(struct gpio_desc *desc, int value)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_direction_output_raw(struct gpio_desc *desc, int value)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_enable_hw_timestamp_ns(struct gpio_desc *desc,\n\t\t\t\t\t       unsigned long flags)\n{\n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_disable_hw_timestamp_ns(struct gpio_desc *desc,\n\t\t\t\t\t\tunsigned long flags)\n{\n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\nstatic inline int gpiod_get_value(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\nstatic inline int gpiod_get_array_value(unsigned int array_size,\n\t\t\t\t\tstruct gpio_desc **desc_array,\n\t\t\t\t\tstruct gpio_array *array_info,\n\t\t\t\t\tunsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline void gpiod_set_value(struct gpio_desc *desc, int value)\n{\n\t \n\tWARN_ON(desc);\n}\nstatic inline int gpiod_set_array_value(unsigned int array_size,\n\t\t\t\t\tstruct gpio_desc **desc_array,\n\t\t\t\t\tstruct gpio_array *array_info,\n\t\t\t\t\tunsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline int gpiod_get_raw_value(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\nstatic inline int gpiod_get_raw_array_value(unsigned int array_size,\n\t\t\t\t\t    struct gpio_desc **desc_array,\n\t\t\t\t\t    struct gpio_array *array_info,\n\t\t\t\t\t    unsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline void gpiod_set_raw_value(struct gpio_desc *desc, int value)\n{\n\t \n\tWARN_ON(desc);\n}\nstatic inline int gpiod_set_raw_array_value(unsigned int array_size,\n\t\t\t\t\t    struct gpio_desc **desc_array,\n\t\t\t\t\t    struct gpio_array *array_info,\n\t\t\t\t\t    unsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\n\nstatic inline int gpiod_get_value_cansleep(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\nstatic inline int gpiod_get_array_value_cansleep(unsigned int array_size,\n\t\t\t\t     struct gpio_desc **desc_array,\n\t\t\t\t     struct gpio_array *array_info,\n\t\t\t\t     unsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline void gpiod_set_value_cansleep(struct gpio_desc *desc, int value)\n{\n\t \n\tWARN_ON(desc);\n}\nstatic inline int gpiod_set_array_value_cansleep(unsigned int array_size,\n\t\t\t\t\t    struct gpio_desc **desc_array,\n\t\t\t\t\t    struct gpio_array *array_info,\n\t\t\t\t\t    unsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline int gpiod_get_raw_value_cansleep(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\nstatic inline int gpiod_get_raw_array_value_cansleep(unsigned int array_size,\n\t\t\t\t\t       struct gpio_desc **desc_array,\n\t\t\t\t\t       struct gpio_array *array_info,\n\t\t\t\t\t       unsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\nstatic inline void gpiod_set_raw_value_cansleep(struct gpio_desc *desc,\n\t\t\t\t\t\tint value)\n{\n\t \n\tWARN_ON(desc);\n}\nstatic inline int gpiod_set_raw_array_value_cansleep(unsigned int array_size,\n\t\t\t\t\t\tstruct gpio_desc **desc_array,\n\t\t\t\t\t\tstruct gpio_array *array_info,\n\t\t\t\t\t\tunsigned long *value_bitmap)\n{\n\t \n\tWARN_ON(desc_array);\n\treturn 0;\n}\n\nstatic inline int gpiod_set_config(struct gpio_desc *desc, unsigned long config)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\n\nstatic inline int gpiod_set_debounce(struct gpio_desc *desc, unsigned int debounce)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\n\nstatic inline int gpiod_set_transitory(struct gpio_desc *desc, bool transitory)\n{\n\t \n\tWARN_ON(desc);\n\treturn -ENOSYS;\n}\n\nstatic inline void gpiod_toggle_active_low(struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n}\n\nstatic inline int gpiod_is_active_low(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\nstatic inline int gpiod_cansleep(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn 0;\n}\n\nstatic inline int gpiod_to_irq(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn -EINVAL;\n}\n\nstatic inline int gpiod_set_consumer_name(struct gpio_desc *desc,\n\t\t\t\t\t  const char *name)\n{\n\t \n\tWARN_ON(desc);\n\treturn -EINVAL;\n}\n\nstatic inline struct gpio_desc *gpio_to_desc(unsigned gpio)\n{\n\treturn NULL;\n}\n\nstatic inline int desc_to_gpio(const struct gpio_desc *desc)\n{\n\t \n\tWARN_ON(desc);\n\treturn -EINVAL;\n}\n\nstatic inline\nstruct gpio_desc *fwnode_gpiod_get_index(struct fwnode_handle *fwnode,\n\t\t\t\t\t const char *con_id, int index,\n\t\t\t\t\t enum gpiod_flags flags,\n\t\t\t\t\t const char *label)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\nstatic inline\nstruct gpio_desc *devm_fwnode_gpiod_get_index(struct device *dev,\n\t\t\t\t\t      struct fwnode_handle *fwnode,\n\t\t\t\t\t      const char *con_id, int index,\n\t\t\t\t\t      enum gpiod_flags flags,\n\t\t\t\t\t      const char *label)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\n#endif  \n\nstatic inline\nstruct gpio_desc *devm_fwnode_gpiod_get(struct device *dev,\n\t\t\t\t\tstruct fwnode_handle *fwnode,\n\t\t\t\t\tconst char *con_id,\n\t\t\t\t\tenum gpiod_flags flags,\n\t\t\t\t\tconst char *label)\n{\n\treturn devm_fwnode_gpiod_get_index(dev, fwnode, con_id, 0,\n\t\t\t\t\t   flags, label);\n}\n\nstruct acpi_gpio_params {\n\tunsigned int crs_entry_index;\n\tunsigned int line_index;\n\tbool active_low;\n};\n\nstruct acpi_gpio_mapping {\n\tconst char *name;\n\tconst struct acpi_gpio_params *data;\n\tunsigned int size;\n\n \n#define ACPI_GPIO_QUIRK_NO_IO_RESTRICTION\tBIT(0)\n \n#define ACPI_GPIO_QUIRK_ONLY_GPIOIO\t\tBIT(1)\n \n#define ACPI_GPIO_QUIRK_ABSOLUTE_NUMBER\t\tBIT(2)\n\n\tunsigned int quirks;\n};\n\n#if IS_ENABLED(CONFIG_GPIOLIB) && IS_ENABLED(CONFIG_ACPI)\n\nint acpi_dev_add_driver_gpios(struct acpi_device *adev,\n\t\t\t      const struct acpi_gpio_mapping *gpios);\nvoid acpi_dev_remove_driver_gpios(struct acpi_device *adev);\n\nint devm_acpi_dev_add_driver_gpios(struct device *dev,\n\t\t\t\t   const struct acpi_gpio_mapping *gpios);\n\nstruct gpio_desc *acpi_get_and_request_gpiod(char *path, unsigned int pin, char *label);\n\n#else   \n\n#include <linux/err.h>\n\nstatic inline int acpi_dev_add_driver_gpios(struct acpi_device *adev,\n\t\t\t      const struct acpi_gpio_mapping *gpios)\n{\n\treturn -ENXIO;\n}\nstatic inline void acpi_dev_remove_driver_gpios(struct acpi_device *adev) {}\n\nstatic inline int devm_acpi_dev_add_driver_gpios(struct device *dev,\n\t\t\t      const struct acpi_gpio_mapping *gpios)\n{\n\treturn -ENXIO;\n}\n\nstatic inline struct gpio_desc *acpi_get_and_request_gpiod(char *path, unsigned int pin,\n\t\t\t\t\t\t\t   char *label)\n{\n\treturn ERR_PTR(-ENOSYS);\n}\n\n#endif  \n\n\n#if IS_ENABLED(CONFIG_GPIOLIB) && IS_ENABLED(CONFIG_GPIO_SYSFS)\n\nint gpiod_export(struct gpio_desc *desc, bool direction_may_change);\nint gpiod_export_link(struct device *dev, const char *name,\n\t\t      struct gpio_desc *desc);\nvoid gpiod_unexport(struct gpio_desc *desc);\n\n#else   \n\n#include <asm/errno.h>\n\nstatic inline int gpiod_export(struct gpio_desc *desc,\n\t\t\t       bool direction_may_change)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline int gpiod_export_link(struct device *dev, const char *name,\n\t\t\t\t    struct gpio_desc *desc)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline void gpiod_unexport(struct gpio_desc *desc)\n{\n}\n\n#endif  \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}