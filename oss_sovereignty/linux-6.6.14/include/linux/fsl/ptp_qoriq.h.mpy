{
  "module_name": "ptp_qoriq.h",
  "hash_id": "790d024df97a65f56f2940bec282f7135f1f9c31bcf0aee23fb1db12ac170b66",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/fsl/ptp_qoriq.h",
  "human_readable_source": "\n \n#ifndef __PTP_QORIQ_H__\n#define __PTP_QORIQ_H__\n\n#include <linux/io.h>\n#include <linux/interrupt.h>\n#include <linux/ptp_clock_kernel.h>\n\n \nstruct ctrl_regs {\n\tu32 tmr_ctrl;      \n\tu32 tmr_tevent;    \n\tu32 tmr_temask;    \n\tu32 tmr_pevent;    \n\tu32 tmr_pemask;    \n\tu32 tmr_stat;      \n\tu32 tmr_cnt_h;     \n\tu32 tmr_cnt_l;     \n\tu32 tmr_add;       \n\tu32 tmr_acc;       \n\tu32 tmr_prsc;      \n\tu8  res1[4];\n\tu32 tmroff_h;      \n\tu32 tmroff_l;      \n};\n\nstruct alarm_regs {\n\tu32 tmr_alarm1_h;  \n\tu32 tmr_alarm1_l;  \n\tu32 tmr_alarm2_h;  \n\tu32 tmr_alarm2_l;  \n};\n\nstruct fiper_regs {\n\tu32 tmr_fiper1;    \n\tu32 tmr_fiper2;    \n\tu32 tmr_fiper3;    \n};\n\nstruct etts_regs {\n\tu32 tmr_etts1_h;   \n\tu32 tmr_etts1_l;   \n\tu32 tmr_etts2_h;   \n\tu32 tmr_etts2_l;   \n};\n\nstruct ptp_qoriq_registers {\n\tstruct ctrl_regs __iomem *ctrl_regs;\n\tstruct alarm_regs __iomem *alarm_regs;\n\tstruct fiper_regs __iomem *fiper_regs;\n\tstruct etts_regs __iomem *etts_regs;\n};\n\n \n#define ETSEC_CTRL_REGS_OFFSET\t0x0\n#define ETSEC_ALARM_REGS_OFFSET\t0x40\n#define ETSEC_FIPER_REGS_OFFSET\t0x80\n#define ETSEC_ETTS_REGS_OFFSET\t0xa0\n\n#define CTRL_REGS_OFFSET\t0x80\n#define ALARM_REGS_OFFSET\t0xb8\n#define FIPER_REGS_OFFSET\t0xd0\n#define ETTS_REGS_OFFSET\t0xe0\n\n\n \n#define ALM1P                 (1<<31)  \n#define ALM2P                 (1<<30)  \n#define FIPERST               (1<<28)  \n#define PP1L                  (1<<27)  \n#define PP2L                  (1<<26)  \n#define TCLK_PERIOD_SHIFT     (16)  \n#define TCLK_PERIOD_MASK      (0x3ff)\n#define RTPE                  (1<<15)  \n#define FRD                   (1<<14)  \n#define ESFDP                 (1<<11)  \n#define ESFDE                 (1<<10)  \n#define ETEP2                 (1<<9)  \n#define ETEP1                 (1<<8)  \n#define COPH                  (1<<7)  \n#define CIPH                  (1<<6)  \n#define TMSR                  (1<<5)  \n#define BYP                   (1<<3)  \n#define TE                    (1<<2)  \n#define CKSEL_SHIFT           (0)     \n#define CKSEL_MASK            (0x3)\n\n \n#define ETS2                  (1<<25)  \n#define ETS1                  (1<<24)  \n#define ALM2                  (1<<17)  \n#define ALM1                  (1<<16)  \n#define PP1                   (1<<7)   \n#define PP2                   (1<<6)   \n#define PP3                   (1<<5)   \n\n \n#define ETS2EN                (1<<25)  \n#define ETS1EN                (1<<24)  \n#define ALM2EN                (1<<17)  \n#define ALM1EN                (1<<16)  \n#define PP1EN                 (1<<7)  \n#define PP2EN                 (1<<6)  \n\n \n#define TXP2                  (1<<9)  \n#define TXP1                  (1<<8)  \n#define RXP                   (1<<0)  \n\n \n#define TXP2EN                (1<<9)  \n#define TXP1EN                (1<<8)  \n#define RXPEN                 (1<<0)  \n\n \n#define STAT_VEC_SHIFT        (0)  \n#define STAT_VEC_MASK         (0x3f)\n#define ETS1_VLD              (1<<24)\n#define ETS2_VLD              (1<<25)\n\n \n#define PRSC_OCK_SHIFT        (0)  \n#define PRSC_OCK_MASK         (0xffff)\n\n\n#define DRIVER\t\t\"ptp_qoriq\"\n#define N_EXT_TS\t2\n\n#define DEFAULT_CKSEL\t\t1\n#define DEFAULT_TMR_PRSC\t2\n#define DEFAULT_FIPER1_PERIOD\t1000000000\n#define DEFAULT_FIPER2_PERIOD\t1000000000\n#define DEFAULT_FIPER3_PERIOD\t1000000000\n\nstruct ptp_qoriq {\n\tvoid __iomem *base;\n\tstruct ptp_qoriq_registers regs;\n\tspinlock_t lock;  \n\tstruct ptp_clock *clock;\n\tstruct ptp_clock_info caps;\n\tstruct resource *rsrc;\n\tstruct dentry *debugfs_root;\n\tstruct device *dev;\n\tbool extts_fifo_support;\n\tbool fiper3_support;\n\tbool etsec;\n\tint irq;\n\tint phc_index;\n\tu32 tclk_period;   \n\tu32 tmr_prsc;\n\tu32 tmr_add;\n\tu32 cksel;\n\tu32 tmr_fiper1;\n\tu32 tmr_fiper2;\n\tu32 tmr_fiper3;\n\tu32 (*read)(unsigned __iomem *addr);\n\tvoid (*write)(unsigned __iomem *addr, u32 val);\n};\n\nstatic inline u32 qoriq_read_be(unsigned __iomem *addr)\n{\n\treturn ioread32be(addr);\n}\n\nstatic inline void qoriq_write_be(unsigned __iomem *addr, u32 val)\n{\n\tiowrite32be(val, addr);\n}\n\nstatic inline u32 qoriq_read_le(unsigned __iomem *addr)\n{\n\treturn ioread32(addr);\n}\n\nstatic inline void qoriq_write_le(unsigned __iomem *addr, u32 val)\n{\n\tiowrite32(val, addr);\n}\n\nirqreturn_t ptp_qoriq_isr(int irq, void *priv);\nint ptp_qoriq_init(struct ptp_qoriq *ptp_qoriq, void __iomem *base,\n\t\t   const struct ptp_clock_info *caps);\nvoid ptp_qoriq_free(struct ptp_qoriq *ptp_qoriq);\nint ptp_qoriq_adjfine(struct ptp_clock_info *ptp, long scaled_ppm);\nint ptp_qoriq_adjtime(struct ptp_clock_info *ptp, s64 delta);\nint ptp_qoriq_gettime(struct ptp_clock_info *ptp, struct timespec64 *ts);\nint ptp_qoriq_settime(struct ptp_clock_info *ptp,\n\t\t      const struct timespec64 *ts);\nint ptp_qoriq_enable(struct ptp_clock_info *ptp,\n\t\t     struct ptp_clock_request *rq, int on);\nint extts_clean_up(struct ptp_qoriq *ptp_qoriq, int index, bool update_event);\n#ifdef CONFIG_DEBUG_FS\nvoid ptp_qoriq_create_debugfs(struct ptp_qoriq *ptp_qoriq);\nvoid ptp_qoriq_remove_debugfs(struct ptp_qoriq *ptp_qoriq);\n#else\nstatic inline void ptp_qoriq_create_debugfs(struct ptp_qoriq *ptp_qoriq)\n{ }\nstatic inline void ptp_qoriq_remove_debugfs(struct ptp_qoriq *ptp_qoriq)\n{ }\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}