{
  "module_name": "wilco-ec.h",
  "hash_id": "2703a8f859742ec4487f4aafa57329a6ffee274657126330d713d52a4a107103",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/platform_data/wilco-ec.h",
  "human_readable_source": " \n \n\n#ifndef WILCO_EC_H\n#define WILCO_EC_H\n\n#include <linux/mutex.h>\n#include <linux/types.h>\n\n \n#define WILCO_EC_FLAG_NO_RESPONSE\tBIT(0)  \n\n \n#define EC_MAILBOX_DATA_SIZE\t\t32\n\nstruct device;\nstruct resource;\nstruct platform_device;\n\n \nstruct wilco_ec_device {\n\tstruct device *dev;\n\tstruct mutex mailbox_lock;\n\tstruct resource *io_command;\n\tstruct resource *io_data;\n\tstruct resource *io_packet;\n\tvoid *data_buffer;\n\tsize_t data_size;\n\tstruct platform_device *debugfs_pdev;\n\tstruct platform_device *rtc_pdev;\n\tstruct platform_device *charger_pdev;\n\tstruct platform_device *telem_pdev;\n};\n\n \nstruct wilco_ec_request {\n\tu8 struct_version;\n\tu8 checksum;\n\tu16 mailbox_id;\n\tu8 mailbox_version;\n\tu8 reserved;\n\tu16 data_size;\n} __packed;\n\n \nstruct wilco_ec_response {\n\tu8 struct_version;\n\tu8 checksum;\n\tu16 result;\n\tu16 data_size;\n\tu8 reserved[2];\n\tu8 data[];\n} __packed;\n\n \nenum wilco_ec_msg_type {\n\tWILCO_EC_MSG_LEGACY = 0x00f0,\n\tWILCO_EC_MSG_PROPERTY = 0x00f2,\n\tWILCO_EC_MSG_TELEMETRY = 0x00f5,\n};\n\n \nstruct wilco_ec_message {\n\tenum wilco_ec_msg_type type;\n\tu8 flags;\n\tsize_t request_size;\n\tvoid *request_data;\n\tsize_t response_size;\n\tvoid *response_data;\n};\n\n \nint wilco_ec_mailbox(struct wilco_ec_device *ec, struct wilco_ec_message *msg);\n\n \nint wilco_keyboard_leds_init(struct wilco_ec_device *ec);\n\n \n\n#define WILCO_EC_PROPERTY_MAX_SIZE\t4\n\n \nstruct wilco_ec_property_msg {\n\tu32 property_id;\n\tint length;\n\tu8 data[WILCO_EC_PROPERTY_MAX_SIZE];\n};\n\n \nint wilco_ec_get_property(struct wilco_ec_device *ec,\n\t\t\t  struct wilco_ec_property_msg *prop_msg);\n\n \nint wilco_ec_set_property(struct wilco_ec_device *ec,\n\t\t\t  struct wilco_ec_property_msg *prop_msg);\n\n \nint wilco_ec_get_byte_property(struct wilco_ec_device *ec, u32 property_id,\n\t\t\t       u8 *val);\n\n \nint wilco_ec_set_byte_property(struct wilco_ec_device *ec, u32 property_id,\n\t\t\t       u8 val);\n\n \nint wilco_ec_add_sysfs(struct wilco_ec_device *ec);\nvoid wilco_ec_remove_sysfs(struct wilco_ec_device *ec);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}