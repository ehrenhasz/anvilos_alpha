{
  "module_name": "vtime.h",
  "hash_id": "f6a7b7eb19f9353e48b5a5d52b5e381a5a404c31b57dc910d813af2a94bb4ae8",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/vtime.h",
  "human_readable_source": " \n#ifndef _LINUX_KERNEL_VTIME_H\n#define _LINUX_KERNEL_VTIME_H\n\n#include <linux/context_tracking_state.h>\n#include <linux/sched.h>\n\n#ifdef CONFIG_VIRT_CPU_ACCOUNTING_NATIVE\n#include <asm/vtime.h>\n#endif\n\n \n#ifdef CONFIG_VIRT_CPU_ACCOUNTING\nextern void vtime_account_kernel(struct task_struct *tsk);\nextern void vtime_account_idle(struct task_struct *tsk);\n#endif  \n\n#ifdef CONFIG_VIRT_CPU_ACCOUNTING_GEN\nextern void arch_vtime_task_switch(struct task_struct *tsk);\nextern void vtime_user_enter(struct task_struct *tsk);\nextern void vtime_user_exit(struct task_struct *tsk);\nextern void vtime_guest_enter(struct task_struct *tsk);\nextern void vtime_guest_exit(struct task_struct *tsk);\nextern void vtime_init_idle(struct task_struct *tsk, int cpu);\n#else  \nstatic inline void vtime_user_enter(struct task_struct *tsk) { }\nstatic inline void vtime_user_exit(struct task_struct *tsk) { }\nstatic inline void vtime_guest_enter(struct task_struct *tsk) { }\nstatic inline void vtime_guest_exit(struct task_struct *tsk) { }\nstatic inline void vtime_init_idle(struct task_struct *tsk, int cpu) { }\n#endif\n\n#ifdef CONFIG_VIRT_CPU_ACCOUNTING_NATIVE\nextern void vtime_account_irq(struct task_struct *tsk, unsigned int offset);\nextern void vtime_account_softirq(struct task_struct *tsk);\nextern void vtime_account_hardirq(struct task_struct *tsk);\nextern void vtime_flush(struct task_struct *tsk);\n#else  \nstatic inline void vtime_account_irq(struct task_struct *tsk, unsigned int offset) { }\nstatic inline void vtime_account_softirq(struct task_struct *tsk) { }\nstatic inline void vtime_account_hardirq(struct task_struct *tsk) { }\nstatic inline void vtime_flush(struct task_struct *tsk) { }\n#endif\n\n \n#if defined(CONFIG_VIRT_CPU_ACCOUNTING_NATIVE)\n\nstatic inline bool vtime_accounting_enabled_this_cpu(void) { return true; }\nextern void vtime_task_switch(struct task_struct *prev);\n\nstatic __always_inline void vtime_account_guest_enter(void)\n{\n\tvtime_account_kernel(current);\n\tcurrent->flags |= PF_VCPU;\n}\n\nstatic __always_inline void vtime_account_guest_exit(void)\n{\n\tvtime_account_kernel(current);\n\tcurrent->flags &= ~PF_VCPU;\n}\n\n#elif defined(CONFIG_VIRT_CPU_ACCOUNTING_GEN)\n\n \nstatic inline bool vtime_accounting_enabled(void)\n{\n\treturn context_tracking_enabled();\n}\n\nstatic inline bool vtime_accounting_enabled_cpu(int cpu)\n{\n\treturn context_tracking_enabled_cpu(cpu);\n}\n\nstatic inline bool vtime_accounting_enabled_this_cpu(void)\n{\n\treturn context_tracking_enabled_this_cpu();\n}\n\nextern void vtime_task_switch_generic(struct task_struct *prev);\n\nstatic inline void vtime_task_switch(struct task_struct *prev)\n{\n\tif (vtime_accounting_enabled_this_cpu())\n\t\tvtime_task_switch_generic(prev);\n}\n\nstatic __always_inline void vtime_account_guest_enter(void)\n{\n\tif (vtime_accounting_enabled_this_cpu())\n\t\tvtime_guest_enter(current);\n\telse\n\t\tcurrent->flags |= PF_VCPU;\n}\n\nstatic __always_inline void vtime_account_guest_exit(void)\n{\n\tif (vtime_accounting_enabled_this_cpu())\n\t\tvtime_guest_exit(current);\n\telse\n\t\tcurrent->flags &= ~PF_VCPU;\n}\n\n#else  \n\nstatic inline bool vtime_accounting_enabled_this_cpu(void) { return false; }\nstatic inline void vtime_task_switch(struct task_struct *prev) { }\n\nstatic __always_inline void vtime_account_guest_enter(void)\n{\n\tcurrent->flags |= PF_VCPU;\n}\n\nstatic __always_inline void vtime_account_guest_exit(void)\n{\n\tcurrent->flags &= ~PF_VCPU;\n}\n\n#endif\n\n\n#ifdef CONFIG_IRQ_TIME_ACCOUNTING\nextern void irqtime_account_irq(struct task_struct *tsk, unsigned int offset);\n#else\nstatic inline void irqtime_account_irq(struct task_struct *tsk, unsigned int offset) { }\n#endif\n\nstatic inline void account_softirq_enter(struct task_struct *tsk)\n{\n\tvtime_account_irq(tsk, SOFTIRQ_OFFSET);\n\tirqtime_account_irq(tsk, SOFTIRQ_OFFSET);\n}\n\nstatic inline void account_softirq_exit(struct task_struct *tsk)\n{\n\tvtime_account_softirq(tsk);\n\tirqtime_account_irq(tsk, 0);\n}\n\nstatic inline void account_hardirq_enter(struct task_struct *tsk)\n{\n\tvtime_account_irq(tsk, HARDIRQ_OFFSET);\n\tirqtime_account_irq(tsk, HARDIRQ_OFFSET);\n}\n\nstatic inline void account_hardirq_exit(struct task_struct *tsk)\n{\n\tvtime_account_hardirq(tsk);\n\tirqtime_account_irq(tsk, 0);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}