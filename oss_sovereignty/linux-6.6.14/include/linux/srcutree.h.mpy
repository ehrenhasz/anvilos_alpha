{
  "module_name": "srcutree.h",
  "hash_id": "a1b23c346a9103ab73c7667f3959126b296fea5d03977e024c33351432114863",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/srcutree.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_SRCU_TREE_H\n#define _LINUX_SRCU_TREE_H\n\n#include <linux/rcu_node_tree.h>\n#include <linux/completion.h>\n\nstruct srcu_node;\nstruct srcu_struct;\n\n \nstruct srcu_data {\n\t \n\tatomic_long_t srcu_lock_count[2];\t \n\tatomic_long_t srcu_unlock_count[2];\t \n\tint srcu_nmi_safety;\t\t\t \n\n\t \n\tspinlock_t __private lock ____cacheline_internodealigned_in_smp;\n\tstruct rcu_segcblist srcu_cblist;\t \n\tunsigned long srcu_gp_seq_needed;\t \n\tunsigned long srcu_gp_seq_needed_exp;\t \n\tbool srcu_cblist_invoking;\t\t \n\tstruct timer_list delay_work;\t\t \n\tstruct work_struct work;\t\t \n\tstruct rcu_head srcu_barrier_head;\t \n\tstruct srcu_node *mynode;\t\t \n\tunsigned long grpmask;\t\t\t \n\t\t\t\t\t\t \n\tint cpu;\n\tstruct srcu_struct *ssp;\n};\n\n \nstruct srcu_node {\n\tspinlock_t __private lock;\n\tunsigned long srcu_have_cbs[4];\t\t \n\t\t\t\t\t\t \n\tunsigned long srcu_data_have_cbs[4];\t \n\tunsigned long srcu_gp_seq_needed_exp;\t \n\tstruct srcu_node *srcu_parent;\t\t \n\tint grplo;\t\t\t\t \n\tint grphi;\t\t\t\t \n};\n\n \nstruct srcu_usage {\n\tstruct srcu_node *node;\t\t\t \n\tstruct srcu_node *level[RCU_NUM_LVLS + 1];\n\t\t\t\t\t\t \n\tint srcu_size_state;\t\t\t \n\tstruct mutex srcu_cb_mutex;\t\t \n\tspinlock_t __private lock;\t\t \n\tstruct mutex srcu_gp_mutex;\t\t \n\tunsigned long srcu_gp_seq;\t\t \n\tunsigned long srcu_gp_seq_needed;\t \n\tunsigned long srcu_gp_seq_needed_exp;\t \n\tunsigned long srcu_gp_start;\t\t \n\tunsigned long srcu_last_gp_end;\t\t \n\tunsigned long srcu_size_jiffies;\t \n\tunsigned long srcu_n_lock_retries;\t \n\tunsigned long srcu_n_exp_nodelay;\t \n\tbool sda_is_static;\t\t\t \n\tunsigned long srcu_barrier_seq;\t\t \n\tstruct mutex srcu_barrier_mutex;\t \n\tstruct completion srcu_barrier_completion;\n\t\t\t\t\t\t \n\tatomic_t srcu_barrier_cpu_cnt;\t\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t \n\tunsigned long reschedule_jiffies;\n\tunsigned long reschedule_count;\n\tstruct delayed_work work;\n\tstruct srcu_struct *srcu_ssp;\n};\n\n \nstruct srcu_struct {\n\tunsigned int srcu_idx;\t\t\t \n\tstruct srcu_data __percpu *sda;\t\t \n\tstruct lockdep_map dep_map;\n\tstruct srcu_usage *srcu_sup;\t\t \n};\n\n\n\n\n\n\n#define SRCU_SIZE_SMALL\t\t0\t\n#define SRCU_SIZE_ALLOC\t\t1\t\n\t\t\t\t\t\n#define SRCU_SIZE_WAIT_BARRIER\t2\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n#define SRCU_SIZE_WAIT_CALL\t3\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n#define SRCU_SIZE_WAIT_CBS1\t4\t\n#define SRCU_SIZE_WAIT_CBS2\t5\t\n#define SRCU_SIZE_WAIT_CBS3\t6\t\n#define SRCU_SIZE_WAIT_CBS4\t7\t\n#define SRCU_SIZE_BIG\t\t8\t\n\t\t\t\t\t\n\n \n#define SRCU_STATE_IDLE\t\t0\n#define SRCU_STATE_SCAN1\t1\n#define SRCU_STATE_SCAN2\t2\n\n#define __SRCU_USAGE_INIT(name)\t\t\t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\t\t\t\\\n\t.lock = __SPIN_LOCK_UNLOCKED(name.lock),\t\t\t\t\t\t\\\n\t.srcu_gp_seq_needed = -1UL,\t\t\t\t\t\t\t\t\\\n\t.work = __DELAYED_WORK_INITIALIZER(name.work, NULL, 0),\t\t\t\t\t\\\n}\n\n#define __SRCU_STRUCT_INIT_COMMON(name, usage_name)\t\t\t\t\t\t\\\n\t.srcu_sup = &usage_name,\t\t\t\t\t\t\t\t\\\n\t__SRCU_DEP_MAP_INIT(name)\n\n#define __SRCU_STRUCT_INIT_MODULE(name, usage_name)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\t\t\t\\\n\t__SRCU_STRUCT_INIT_COMMON(name, usage_name)\t\t\t\t\t\t\\\n}\n\n#define __SRCU_STRUCT_INIT(name, usage_name, pcpu_name)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\t\t\t\\\n\t.sda = &pcpu_name,\t\t\t\t\t\t\t\t\t\\\n\t__SRCU_STRUCT_INIT_COMMON(name, usage_name)\t\t\t\t\t\t\\\n}\n\n \n#ifdef MODULE\n# define __DEFINE_SRCU(name, is_static)\t\t\t\t\t\t\t\t\\\n\tstatic struct srcu_usage name##_srcu_usage = __SRCU_USAGE_INIT(name##_srcu_usage);\t\\\n\tis_static struct srcu_struct name = __SRCU_STRUCT_INIT_MODULE(name, name##_srcu_usage);\t\\\n\textern struct srcu_struct * const __srcu_struct_##name;\t\t\t\t\t\\\n\tstruct srcu_struct * const __srcu_struct_##name\t\t\t\t\t\t\\\n\t\t__section(\"___srcu_struct_ptrs\") = &name\n#else\n# define __DEFINE_SRCU(name, is_static)\t\t\t\t\t\t\t\t\\\n\tstatic DEFINE_PER_CPU(struct srcu_data, name##_srcu_data);\t\t\t\t\\\n\tstatic struct srcu_usage name##_srcu_usage = __SRCU_USAGE_INIT(name##_srcu_usage);\t\\\n\tis_static struct srcu_struct name =\t\t\t\t\t\t\t\\\n\t\t__SRCU_STRUCT_INIT(name, name##_srcu_usage, name##_srcu_data)\n#endif\n#define DEFINE_SRCU(name)\t\t__DEFINE_SRCU(name,  )\n#define DEFINE_STATIC_SRCU(name)\t__DEFINE_SRCU(name, static)\n\nvoid synchronize_srcu_expedited(struct srcu_struct *ssp);\nvoid srcu_barrier(struct srcu_struct *ssp);\nvoid srcu_torture_stats_print(struct srcu_struct *ssp, char *tt, char *tf);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}