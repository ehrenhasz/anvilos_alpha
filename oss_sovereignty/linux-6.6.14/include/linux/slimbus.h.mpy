{
  "module_name": "slimbus.h",
  "hash_id": "e8bbdbc5014a4942eadaa9ac7dbb08d0f2f3eb8315662d9b48070ebdbb55c06e",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/slimbus.h",
  "human_readable_source": "\n \n\n#ifndef _LINUX_SLIMBUS_H\n#define _LINUX_SLIMBUS_H\n#include <linux/device.h>\n#include <linux/module.h>\n#include <linux/completion.h>\n#include <linux/mod_devicetable.h>\n\nextern struct bus_type slimbus_bus;\n\n \nstruct slim_eaddr {\n\tu8 instance;\n\tu8 dev_index;\n\tu16 prod_code;\n\tu16 manf_id;\n} __packed;\n\n \nenum slim_device_status {\n\tSLIM_DEVICE_STATUS_DOWN = 0,\n\tSLIM_DEVICE_STATUS_UP,\n\tSLIM_DEVICE_STATUS_RESERVED,\n};\n\nstruct slim_controller;\n\n \nstruct slim_device {\n\tstruct device\t\tdev;\n\tstruct slim_eaddr\te_addr;\n\tstruct slim_controller\t*ctrl;\n\tenum slim_device_status\tstatus;\n\tu8\t\t\tladdr;\n\tbool\t\t\tis_laddr_valid;\n\tstruct list_head\tstream_list;\n\tspinlock_t stream_list_lock;\n};\n\n#define to_slim_device(d) container_of(d, struct slim_device, dev)\n\n \n\nstruct slim_driver {\n\tint\t(*probe)(struct slim_device *sl);\n\tvoid\t(*remove)(struct slim_device *sl);\n\tvoid\t(*shutdown)(struct slim_device *sl);\n\tint\t(*device_status)(struct slim_device *sl,\n\t\t\t\t enum slim_device_status s);\n\tstruct device_driver\t\tdriver;\n\tconst struct slim_device_id\t*id_table;\n};\n#define to_slim_driver(d) container_of(d, struct slim_driver, driver)\n\n \nstruct slim_val_inf {\n\tu16\t\t\tstart_offset;\n\tu8\t\t\tnum_bytes;\n\tu8\t\t\t*rbuf;\n\tconst u8\t\t*wbuf;\n\tstruct\tcompletion\t*comp;\n};\n\n#define SLIM_DEVICE_MAX_CHANNELS\t256\n \n#define SLIM_DEVICE_MAX_PORTS\t\t32\n\n \nstruct slim_stream_config {\n\tunsigned int rate;\n\tunsigned int bps;\n\t \n\tunsigned int ch_count;\n\tunsigned int *chs;\n\t \n\tunsigned long port_mask;\n\tint direction;\n};\n\n \n#define slim_driver_register(drv) \\\n\t__slim_driver_register(drv, THIS_MODULE)\nint __slim_driver_register(struct slim_driver *drv, struct module *owner);\nvoid slim_driver_unregister(struct slim_driver *drv);\n\n \n#define module_slim_driver(__slim_driver) \\\n\tmodule_driver(__slim_driver, slim_driver_register, \\\n\t\t\tslim_driver_unregister)\n\nstatic inline void *slim_get_devicedata(const struct slim_device *dev)\n{\n\treturn dev_get_drvdata(&dev->dev);\n}\n\nstatic inline void slim_set_devicedata(struct slim_device *dev, void *data)\n{\n\tdev_set_drvdata(&dev->dev, data);\n}\n\nstruct slim_device *of_slim_get_device(struct slim_controller *ctrl,\n\t\t\t\t       struct device_node *np);\nstruct slim_device *slim_get_device(struct slim_controller *ctrl,\n\t\t\t\t    struct slim_eaddr *e_addr);\nint slim_get_logical_addr(struct slim_device *sbdev);\n\n \n#define SLIM_MSG_MC_REQUEST_INFORMATION          0x20\n#define SLIM_MSG_MC_REQUEST_CLEAR_INFORMATION    0x21\n#define SLIM_MSG_MC_REPLY_INFORMATION            0x24\n#define SLIM_MSG_MC_CLEAR_INFORMATION            0x28\n#define SLIM_MSG_MC_REPORT_INFORMATION           0x29\n\n \n#define SLIM_MSG_MC_REQUEST_VALUE                0x60\n#define SLIM_MSG_MC_REQUEST_CHANGE_VALUE         0x61\n#define SLIM_MSG_MC_REPLY_VALUE                  0x64\n#define SLIM_MSG_MC_CHANGE_VALUE                 0x68\n\nint slim_xfer_msg(struct slim_device *sbdev, struct slim_val_inf *msg,\n\t\t  u8 mc);\nint slim_readb(struct slim_device *sdev, u32 addr);\nint slim_writeb(struct slim_device *sdev, u32 addr, u8 value);\nint slim_read(struct slim_device *sdev, u32 addr, size_t count, u8 *val);\nint slim_write(struct slim_device *sdev, u32 addr, size_t count, u8 *val);\n\n \nstruct slim_stream_runtime;\nstruct slim_stream_runtime *slim_stream_allocate(struct slim_device *dev,\n\t\t\t\t\t\t const char *sname);\nint slim_stream_prepare(struct slim_stream_runtime *stream,\n\t\t\tstruct slim_stream_config *c);\nint slim_stream_enable(struct slim_stream_runtime *stream);\nint slim_stream_disable(struct slim_stream_runtime *stream);\nint slim_stream_unprepare(struct slim_stream_runtime *stream);\nint slim_stream_free(struct slim_stream_runtime *stream);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}