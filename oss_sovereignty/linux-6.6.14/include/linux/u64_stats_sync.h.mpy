{
  "module_name": "u64_stats_sync.h",
  "hash_id": "9a888666a7bd3942cdad06a1247b52d2e4920f0e74d0f3cbdbf00e71b224be58",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/u64_stats_sync.h",
  "human_readable_source": " \n#ifndef _LINUX_U64_STATS_SYNC_H\n#define _LINUX_U64_STATS_SYNC_H\n\n \n#include <linux/seqlock.h>\n\nstruct u64_stats_sync {\n#if BITS_PER_LONG == 32\n\tseqcount_t\tseq;\n#endif\n};\n\n#if BITS_PER_LONG == 64\n#include <asm/local64.h>\n\ntypedef struct {\n\tlocal64_t\tv;\n} u64_stats_t ;\n\nstatic inline u64 u64_stats_read(const u64_stats_t *p)\n{\n\treturn local64_read(&p->v);\n}\n\nstatic inline void u64_stats_set(u64_stats_t *p, u64 val)\n{\n\tlocal64_set(&p->v, val);\n}\n\nstatic inline void u64_stats_add(u64_stats_t *p, unsigned long val)\n{\n\tlocal64_add(val, &p->v);\n}\n\nstatic inline void u64_stats_inc(u64_stats_t *p)\n{\n\tlocal64_inc(&p->v);\n}\n\nstatic inline void u64_stats_init(struct u64_stats_sync *syncp) { }\nstatic inline void __u64_stats_update_begin(struct u64_stats_sync *syncp) { }\nstatic inline void __u64_stats_update_end(struct u64_stats_sync *syncp) { }\nstatic inline unsigned long __u64_stats_irqsave(void) { return 0; }\nstatic inline void __u64_stats_irqrestore(unsigned long flags) { }\nstatic inline unsigned int __u64_stats_fetch_begin(const struct u64_stats_sync *syncp)\n{\n\treturn 0;\n}\nstatic inline bool __u64_stats_fetch_retry(const struct u64_stats_sync *syncp,\n\t\t\t\t\t   unsigned int start)\n{\n\treturn false;\n}\n\n#else  \n\ntypedef struct {\n\tu64\t\tv;\n} u64_stats_t;\n\nstatic inline u64 u64_stats_read(const u64_stats_t *p)\n{\n\treturn p->v;\n}\n\nstatic inline void u64_stats_set(u64_stats_t *p, u64 val)\n{\n\tp->v = val;\n}\n\nstatic inline void u64_stats_add(u64_stats_t *p, unsigned long val)\n{\n\tp->v += val;\n}\n\nstatic inline void u64_stats_inc(u64_stats_t *p)\n{\n\tp->v++;\n}\n\nstatic inline void u64_stats_init(struct u64_stats_sync *syncp)\n{\n\tseqcount_init(&syncp->seq);\n}\n\nstatic inline void __u64_stats_update_begin(struct u64_stats_sync *syncp)\n{\n\tpreempt_disable_nested();\n\twrite_seqcount_begin(&syncp->seq);\n}\n\nstatic inline void __u64_stats_update_end(struct u64_stats_sync *syncp)\n{\n\twrite_seqcount_end(&syncp->seq);\n\tpreempt_enable_nested();\n}\n\nstatic inline unsigned long __u64_stats_irqsave(void)\n{\n\tunsigned long flags;\n\n\tlocal_irq_save(flags);\n\treturn flags;\n}\n\nstatic inline void __u64_stats_irqrestore(unsigned long flags)\n{\n\tlocal_irq_restore(flags);\n}\n\nstatic inline unsigned int __u64_stats_fetch_begin(const struct u64_stats_sync *syncp)\n{\n\treturn read_seqcount_begin(&syncp->seq);\n}\n\nstatic inline bool __u64_stats_fetch_retry(const struct u64_stats_sync *syncp,\n\t\t\t\t\t   unsigned int start)\n{\n\treturn read_seqcount_retry(&syncp->seq, start);\n}\n#endif  \n\nstatic inline void u64_stats_update_begin(struct u64_stats_sync *syncp)\n{\n\t__u64_stats_update_begin(syncp);\n}\n\nstatic inline void u64_stats_update_end(struct u64_stats_sync *syncp)\n{\n\t__u64_stats_update_end(syncp);\n}\n\nstatic inline unsigned long u64_stats_update_begin_irqsave(struct u64_stats_sync *syncp)\n{\n\tunsigned long flags = __u64_stats_irqsave();\n\n\t__u64_stats_update_begin(syncp);\n\treturn flags;\n}\n\nstatic inline void u64_stats_update_end_irqrestore(struct u64_stats_sync *syncp,\n\t\t\t\t\t\t   unsigned long flags)\n{\n\t__u64_stats_update_end(syncp);\n\t__u64_stats_irqrestore(flags);\n}\n\nstatic inline unsigned int u64_stats_fetch_begin(const struct u64_stats_sync *syncp)\n{\n\treturn __u64_stats_fetch_begin(syncp);\n}\n\nstatic inline bool u64_stats_fetch_retry(const struct u64_stats_sync *syncp,\n\t\t\t\t\t unsigned int start)\n{\n\treturn __u64_stats_fetch_retry(syncp, start);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}