{
  "module_name": "fs_context.h",
  "hash_id": "43cf74e300afe0b8a2d3e4955e409f2be57435210e45032aeab4e0733f16bbc6",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/fs_context.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_FS_CONTEXT_H\n#define _LINUX_FS_CONTEXT_H\n\n#include <linux/kernel.h>\n#include <linux/refcount.h>\n#include <linux/errno.h>\n#include <linux/security.h>\n#include <linux/mutex.h>\n\nstruct cred;\nstruct dentry;\nstruct file_operations;\nstruct file_system_type;\nstruct mnt_namespace;\nstruct net;\nstruct pid_namespace;\nstruct super_block;\nstruct user_namespace;\nstruct vfsmount;\nstruct path;\n\nenum fs_context_purpose {\n\tFS_CONTEXT_FOR_MOUNT,\t\t \n\tFS_CONTEXT_FOR_SUBMOUNT,\t \n\tFS_CONTEXT_FOR_RECONFIGURE,\t \n};\n\n \nenum fs_context_phase {\n\tFS_CONTEXT_CREATE_PARAMS,\t \n\tFS_CONTEXT_CREATING,\t\t \n\tFS_CONTEXT_AWAITING_MOUNT,\t \n\tFS_CONTEXT_AWAITING_RECONF,\t \n\tFS_CONTEXT_RECONF_PARAMS,\t \n\tFS_CONTEXT_RECONFIGURING,\t \n\tFS_CONTEXT_FAILED,\t\t \n};\n\n \nenum fs_value_type {\n\tfs_value_is_undefined,\n\tfs_value_is_flag,\t\t \n\tfs_value_is_string,\t\t \n\tfs_value_is_blob,\t\t \n\tfs_value_is_filename,\t\t \n\tfs_value_is_file,\t\t \n};\n\n \nstruct fs_parameter {\n\tconst char\t\t*key;\t\t \n\tenum fs_value_type\ttype:8;\t\t \n\tunion {\n\t\tchar\t\t*string;\n\t\tvoid\t\t*blob;\n\t\tstruct filename\t*name;\n\t\tstruct file\t*file;\n\t};\n\tsize_t\tsize;\n\tint\tdirfd;\n};\n\nstruct p_log {\n\tconst char *prefix;\n\tstruct fc_log *log;\n};\n\n \nstruct fs_context {\n\tconst struct fs_context_operations *ops;\n\tstruct mutex\t\tuapi_mutex;\t \n\tstruct file_system_type\t*fs_type;\n\tvoid\t\t\t*fs_private;\t \n\tvoid\t\t\t*sget_key;\n\tstruct dentry\t\t*root;\t\t \n\tstruct user_namespace\t*user_ns;\t \n\tstruct net\t\t*net_ns;\t \n\tconst struct cred\t*cred;\t\t \n\tstruct p_log\t\tlog;\t\t \n\tconst char\t\t*source;\t \n\tvoid\t\t\t*security;\t \n\tvoid\t\t\t*s_fs_info;\t \n\tunsigned int\t\tsb_flags;\t \n\tunsigned int\t\tsb_flags_mask;\t \n\tunsigned int\t\ts_iflags;\t \n\tenum fs_context_purpose\tpurpose:8;\n\tenum fs_context_phase\tphase:8;\t \n\tbool\t\t\tneed_free:1;\t \n\tbool\t\t\tglobal:1;\t \n\tbool\t\t\toldapi:1;\t \n\tbool\t\t\texclusive:1;     \n};\n\nstruct fs_context_operations {\n\tvoid (*free)(struct fs_context *fc);\n\tint (*dup)(struct fs_context *fc, struct fs_context *src_fc);\n\tint (*parse_param)(struct fs_context *fc, struct fs_parameter *param);\n\tint (*parse_monolithic)(struct fs_context *fc, void *data);\n\tint (*get_tree)(struct fs_context *fc);\n\tint (*reconfigure)(struct fs_context *fc);\n};\n\n \nextern struct fs_context *fs_context_for_mount(struct file_system_type *fs_type,\n\t\t\t\t\t\tunsigned int sb_flags);\nextern struct fs_context *fs_context_for_reconfigure(struct dentry *dentry,\n\t\t\t\t\t\tunsigned int sb_flags,\n\t\t\t\t\t\tunsigned int sb_flags_mask);\nextern struct fs_context *fs_context_for_submount(struct file_system_type *fs_type,\n\t\t\t\t\t\tstruct dentry *reference);\n\nextern struct fs_context *vfs_dup_fs_context(struct fs_context *fc);\nextern int vfs_parse_fs_param(struct fs_context *fc, struct fs_parameter *param);\nextern int vfs_parse_fs_string(struct fs_context *fc, const char *key,\n\t\t\t       const char *value, size_t v_size);\nint vfs_parse_monolithic_sep(struct fs_context *fc, void *data,\n\t\t\t     char *(*sep)(char **));\nextern int generic_parse_monolithic(struct fs_context *fc, void *data);\nextern int vfs_get_tree(struct fs_context *fc);\nextern void put_fs_context(struct fs_context *fc);\nextern int vfs_parse_fs_param_source(struct fs_context *fc,\n\t\t\t\t     struct fs_parameter *param);\nextern void fc_drop_locked(struct fs_context *fc);\nint reconfigure_single(struct super_block *s,\n\t\t       int flags, void *data);\n\nextern int get_tree_nodev(struct fs_context *fc,\n\t\t\t int (*fill_super)(struct super_block *sb,\n\t\t\t\t\t   struct fs_context *fc));\nextern int get_tree_single(struct fs_context *fc,\n\t\t\t int (*fill_super)(struct super_block *sb,\n\t\t\t\t\t   struct fs_context *fc));\nextern int get_tree_keyed(struct fs_context *fc,\n\t\t\t int (*fill_super)(struct super_block *sb,\n\t\t\t\t\t   struct fs_context *fc),\n\t\t\t void *key);\n\nint setup_bdev_super(struct super_block *sb, int sb_flags,\n\t\tstruct fs_context *fc);\nextern int get_tree_bdev(struct fs_context *fc,\n\t\t\t       int (*fill_super)(struct super_block *sb,\n\t\t\t\t\t\t struct fs_context *fc));\n\nextern const struct file_operations fscontext_fops;\n\n \nstruct fc_log {\n\trefcount_t\tusage;\n\tu8\t\thead;\t\t \n\tu8\t\ttail;\t\t \n\tu8\t\tneed_free;\t \n\tstruct module\t*owner;\t\t \n\tchar\t\t*buffer[8];\n};\n\nextern __attribute__((format(printf, 4, 5)))\nvoid logfc(struct fc_log *log, const char *prefix, char level, const char *fmt, ...);\n\n#define __logfc(fc, l, fmt, ...) logfc((fc)->log.log, NULL, \\\n\t\t\t\t\tl, fmt, ## __VA_ARGS__)\n#define __plog(p, l, fmt, ...) logfc((p)->log, (p)->prefix, \\\n\t\t\t\t\tl, fmt, ## __VA_ARGS__)\n \n#define infof(fc, fmt, ...) __logfc(fc, 'i', fmt, ## __VA_ARGS__)\n#define info_plog(p, fmt, ...) __plog(p, 'i', fmt, ## __VA_ARGS__)\n#define infofc(p, fmt, ...) __plog((&(fc)->log), 'i', fmt, ## __VA_ARGS__)\n\n \n#define warnf(fc, fmt, ...) __logfc(fc, 'w', fmt, ## __VA_ARGS__)\n#define warn_plog(p, fmt, ...) __plog(p, 'w', fmt, ## __VA_ARGS__)\n#define warnfc(fc, fmt, ...) __plog((&(fc)->log), 'w', fmt, ## __VA_ARGS__)\n\n \n#define errorf(fc, fmt, ...) __logfc(fc, 'e', fmt, ## __VA_ARGS__)\n#define error_plog(p, fmt, ...) __plog(p, 'e', fmt, ## __VA_ARGS__)\n#define errorfc(fc, fmt, ...) __plog((&(fc)->log), 'e', fmt, ## __VA_ARGS__)\n\n \n#define invalf(fc, fmt, ...) (errorf(fc, fmt, ## __VA_ARGS__), -EINVAL)\n#define inval_plog(p, fmt, ...) (error_plog(p, fmt, ## __VA_ARGS__), -EINVAL)\n#define invalfc(fc, fmt, ...) (errorfc(fc, fmt, ## __VA_ARGS__), -EINVAL)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}