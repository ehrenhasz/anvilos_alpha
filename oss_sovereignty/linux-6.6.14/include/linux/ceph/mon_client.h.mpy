{
  "module_name": "mon_client.h",
  "hash_id": "0ada56d4ed0d227903e8f9a1252cec6a61f4450c9a0882d02c7eadab41fd4bb1",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/ceph/mon_client.h",
  "human_readable_source": " \n#ifndef _FS_CEPH_MON_CLIENT_H\n#define _FS_CEPH_MON_CLIENT_H\n\n#include <linux/completion.h>\n#include <linux/kref.h>\n#include <linux/rbtree.h>\n\n#include <linux/ceph/messenger.h>\n\nstruct ceph_client;\nstruct ceph_mount_args;\nstruct ceph_auth_client;\n\n \nstruct ceph_monmap {\n\tstruct ceph_fsid fsid;\n\tu32 epoch;\n\tu32 num_mon;\n\tstruct ceph_entity_inst mon_inst[];\n};\n\nstruct ceph_mon_client;\nstruct ceph_mon_generic_request;\n\n\n \ntypedef void (*ceph_monc_request_func_t)(struct ceph_mon_client *monc,\n\t\t\t\t\t int newmon);\n\n \nstruct ceph_mon_request {\n\tstruct ceph_mon_client *monc;\n\tstruct delayed_work delayed_work;\n\tunsigned long delay;\n\tceph_monc_request_func_t do_request;\n};\n\ntypedef void (*ceph_monc_callback_t)(struct ceph_mon_generic_request *);\n\n \nstruct ceph_mon_generic_request {\n\tstruct ceph_mon_client *monc;\n\tstruct kref kref;\n\tu64 tid;\n\tstruct rb_node node;\n\tint result;\n\n\tstruct completion completion;\n\tceph_monc_callback_t complete_cb;\n\tu64 private_data;           \n\n\tstruct ceph_msg *request;   \n\tstruct ceph_msg *reply;     \n\n\tunion {\n\t\tstruct ceph_statfs *st;\n\t\tu64 newest;\n\t} u;\n};\n\nstruct ceph_mon_client {\n\tstruct ceph_client *client;\n\tstruct ceph_monmap *monmap;\n\n\tstruct mutex mutex;\n\tstruct delayed_work delayed_work;\n\n\tstruct ceph_auth_client *auth;\n\tstruct ceph_msg *m_auth, *m_auth_reply, *m_subscribe, *m_subscribe_ack;\n\tint pending_auth;\n\n\tbool hunting;\n\tint cur_mon;                        \n\tunsigned long sub_renew_after;\n\tunsigned long sub_renew_sent;\n\tstruct ceph_connection con;\n\n\tbool had_a_connection;\n\tint hunt_mult;  \n\n\t \n\tstruct rb_root generic_request_tree;\n\tu64 last_tid;\n\n\t \n\tstruct {\n\t\tstruct ceph_mon_subscribe_item item;\n\t\tbool want;\n\t\tu32 have;  \n\t} subs[4];\n\tint fs_cluster_id;  \n\n#ifdef CONFIG_DEBUG_FS\n\tstruct dentry *debugfs_file;\n#endif\n};\n\nextern int ceph_monmap_contains(struct ceph_monmap *m,\n\t\t\t\tstruct ceph_entity_addr *addr);\n\nextern int ceph_monc_init(struct ceph_mon_client *monc, struct ceph_client *cl);\nextern void ceph_monc_stop(struct ceph_mon_client *monc);\nextern void ceph_monc_reopen_session(struct ceph_mon_client *monc);\n\nenum {\n\tCEPH_SUB_MONMAP = 0,\n\tCEPH_SUB_OSDMAP,\n\tCEPH_SUB_FSMAP,\n\tCEPH_SUB_MDSMAP,\n};\n\nextern const char *ceph_sub_str[];\n\n \nbool ceph_monc_want_map(struct ceph_mon_client *monc, int sub, u32 epoch,\n\t\t\tbool continuous);\nvoid ceph_monc_got_map(struct ceph_mon_client *monc, int sub, u32 epoch);\nvoid ceph_monc_renew_subs(struct ceph_mon_client *monc);\n\nextern int ceph_monc_wait_osdmap(struct ceph_mon_client *monc, u32 epoch,\n\t\t\t\t unsigned long timeout);\n\nint ceph_monc_do_statfs(struct ceph_mon_client *monc, u64 data_pool,\n\t\t\tstruct ceph_statfs *buf);\n\nint ceph_monc_get_version(struct ceph_mon_client *monc, const char *what,\n\t\t\t  u64 *newest);\nint ceph_monc_get_version_async(struct ceph_mon_client *monc, const char *what,\n\t\t\t\tceph_monc_callback_t cb, u64 private_data);\n\nint ceph_monc_blocklist_add(struct ceph_mon_client *monc,\n\t\t\t    struct ceph_entity_addr *client_addr);\n\nextern int ceph_monc_open_session(struct ceph_mon_client *monc);\n\nextern int ceph_monc_validate_auth(struct ceph_mon_client *monc);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}