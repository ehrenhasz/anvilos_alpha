{
  "module_name": "ceph_fs.h",
  "hash_id": "e610783ff5ba26eee77b55cf615dcb6dec7526a7ac8d558e558ba38994d8b230",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/ceph/ceph_fs.h",
  "human_readable_source": " \n \n\n#ifndef CEPH_FS_H\n#define CEPH_FS_H\n\n#include <linux/ceph/msgr.h>\n#include <linux/ceph/rados.h>\n\n \n#define CEPH_OSDC_PROTOCOL   24  \n#define CEPH_MDSC_PROTOCOL   32  \n#define CEPH_MONC_PROTOCOL   15  \n\n\n#define CEPH_INO_ROOT   1\n#define CEPH_INO_CEPH   2             \n#define CEPH_INO_GLOBAL_SNAPREALM  3  \n\n \n#define CEPH_MAX_MON   31\n\n \nstruct ceph_file_layout_legacy {\n\t \n\t__le32 fl_stripe_unit;      \n\t__le32 fl_stripe_count;     \n\t__le32 fl_object_size;      \n\t__le32 fl_cas_hash;         \n\n\t \n\t__le32 fl_object_stripe_unit;   \n\n\t \n\t__le32 fl_unused;        \n\t__le32 fl_pg_pool;       \n} __attribute__ ((packed));\n\nstruct ceph_string;\n \nstruct ceph_file_layout {\n\t \n\tu32 stripe_unit;    \n\tu32 stripe_count;   \n\tu32 object_size;    \n\ts64 pool_id;         \n\tstruct ceph_string __rcu *pool_ns;  \n};\n\nextern int ceph_file_layout_is_valid(const struct ceph_file_layout *layout);\nextern void ceph_file_layout_from_legacy(struct ceph_file_layout *fl,\n\t\t\t\tstruct ceph_file_layout_legacy *legacy);\nextern void ceph_file_layout_to_legacy(struct ceph_file_layout *fl,\n\t\t\t\tstruct ceph_file_layout_legacy *legacy);\n\n#define CEPH_MIN_STRIPE_UNIT 65536\n\nstruct ceph_dir_layout {\n\t__u8   dl_dir_hash;    \n\t__u8   dl_unused1;\n\t__u16  dl_unused2;\n\t__u32  dl_unused3;\n} __attribute__ ((packed));\n\n \n#define CEPH_CRYPTO_NONE 0x0\n#define CEPH_CRYPTO_AES  0x1\n\n#define CEPH_AES_IV \"cephsageyudagreg\"\n\n \n#define CEPH_AUTH_UNKNOWN\t0x0\n#define CEPH_AUTH_NONE\t \t0x1\n#define CEPH_AUTH_CEPHX\t \t0x2\n\n#define CEPH_AUTH_MODE_NONE\t\t0\n#define CEPH_AUTH_MODE_AUTHORIZER\t1\n#define CEPH_AUTH_MODE_MON\t\t10\n\n \n#define CEPH_CON_MODE_UNKNOWN\t0x0\n#define CEPH_CON_MODE_CRC\t0x1\n#define CEPH_CON_MODE_SECURE\t0x2\n\n#define CEPH_AUTH_UID_DEFAULT ((__u64) -1)\n\nconst char *ceph_auth_proto_name(int proto);\nconst char *ceph_con_mode_name(int mode);\n\n \n\n \n\n \n#define CEPH_MSG_SHUTDOWN               1\n#define CEPH_MSG_PING                   2\n\n \n#define CEPH_MSG_MON_MAP                4\n#define CEPH_MSG_MON_GET_MAP            5\n#define CEPH_MSG_STATFS                 13\n#define CEPH_MSG_STATFS_REPLY           14\n#define CEPH_MSG_MON_SUBSCRIBE          15\n#define CEPH_MSG_MON_SUBSCRIBE_ACK      16\n#define CEPH_MSG_AUTH\t\t\t17\n#define CEPH_MSG_AUTH_REPLY\t\t18\n#define CEPH_MSG_MON_GET_VERSION        19\n#define CEPH_MSG_MON_GET_VERSION_REPLY  20\n\n \n#define CEPH_MSG_MDS_MAP                21\n#define CEPH_MSG_FS_MAP_USER            103\n\n#define CEPH_MSG_CLIENT_SESSION         22\n#define CEPH_MSG_CLIENT_RECONNECT       23\n\n#define CEPH_MSG_CLIENT_REQUEST         24\n#define CEPH_MSG_CLIENT_REQUEST_FORWARD 25\n#define CEPH_MSG_CLIENT_REPLY           26\n#define CEPH_MSG_CLIENT_METRICS         29\n#define CEPH_MSG_CLIENT_CAPS            0x310\n#define CEPH_MSG_CLIENT_LEASE           0x311\n#define CEPH_MSG_CLIENT_SNAP            0x312\n#define CEPH_MSG_CLIENT_CAPRELEASE      0x313\n#define CEPH_MSG_CLIENT_QUOTA           0x314\n\n \n#define CEPH_MSG_POOLOP_REPLY           48\n#define CEPH_MSG_POOLOP                 49\n\n \n#define CEPH_MSG_MON_COMMAND            50\n#define CEPH_MSG_MON_COMMAND_ACK        51\n\n \n#define CEPH_MSG_OSD_MAP                41\n#define CEPH_MSG_OSD_OP                 42\n#define CEPH_MSG_OSD_OPREPLY            43\n#define CEPH_MSG_WATCH_NOTIFY           44\n#define CEPH_MSG_OSD_BACKOFF            61\n\n\n \nenum {\n\tCEPH_WATCH_EVENT_NOTIFY\t\t  = 1,  \n\tCEPH_WATCH_EVENT_NOTIFY_COMPLETE  = 2,  \n\tCEPH_WATCH_EVENT_DISCONNECT       = 3,  \n};\n\n\nstruct ceph_mon_request_header {\n\t__le64 have_version;\n\t__le16 session_mon;\n\t__le64 session_mon_tid;\n} __attribute__ ((packed));\n\nstruct ceph_mon_statfs {\n\tstruct ceph_mon_request_header monhdr;\n\tstruct ceph_fsid fsid;\n\t__u8 contains_data_pool;\n\t__le64 data_pool;\n} __attribute__ ((packed));\n\nstruct ceph_statfs {\n\t__le64 kb, kb_used, kb_avail;\n\t__le64 num_objects;\n} __attribute__ ((packed));\n\nstruct ceph_mon_statfs_reply {\n\tstruct ceph_fsid fsid;\n\t__le64 version;\n\tstruct ceph_statfs st;\n} __attribute__ ((packed));\n\nstruct ceph_mon_command {\n\tstruct ceph_mon_request_header monhdr;\n\tstruct ceph_fsid fsid;\n\t__le32 num_strs;          \n\t__le32 str_len;\n\tchar str[];\n} __attribute__ ((packed));\n\nstruct ceph_osd_getmap {\n\tstruct ceph_mon_request_header monhdr;\n\tstruct ceph_fsid fsid;\n\t__le32 start;\n} __attribute__ ((packed));\n\nstruct ceph_mds_getmap {\n\tstruct ceph_mon_request_header monhdr;\n\tstruct ceph_fsid fsid;\n} __attribute__ ((packed));\n\nstruct ceph_client_mount {\n\tstruct ceph_mon_request_header monhdr;\n} __attribute__ ((packed));\n\n#define CEPH_SUBSCRIBE_ONETIME    1   \n\nstruct ceph_mon_subscribe_item {\n\t__le64 start;\n\t__u8 flags;\n} __attribute__ ((packed));\n\nstruct ceph_mon_subscribe_ack {\n\t__le32 duration;          \n\tstruct ceph_fsid fsid;\n} __attribute__ ((packed));\n\n#define CEPH_FS_CLUSTER_ID_NONE  -1\n\n \n#define CEPH_MDSMAP_DOWN    (1<<0)   \n\n \n#define CEPH_MDS_STATE_DNE          0   \n#define CEPH_MDS_STATE_STOPPED     -1   \n#define CEPH_MDS_STATE_BOOT        -4   \n#define CEPH_MDS_STATE_STANDBY     -5   \n#define CEPH_MDS_STATE_CREATING    -6   \n#define CEPH_MDS_STATE_STARTING    -7   \n#define CEPH_MDS_STATE_STANDBY_REPLAY -8  \n#define CEPH_MDS_STATE_REPLAYONCE   -9  \n\n#define CEPH_MDS_STATE_REPLAY       8   \n#define CEPH_MDS_STATE_RESOLVE      9   \n#define CEPH_MDS_STATE_RECONNECT    10  \n#define CEPH_MDS_STATE_REJOIN       11  \n#define CEPH_MDS_STATE_CLIENTREPLAY 12  \n#define CEPH_MDS_STATE_ACTIVE       13  \n#define CEPH_MDS_STATE_STOPPING     14  \n\nextern const char *ceph_mds_state_name(int s);\n\n\n \n#define CEPH_LOCK_DVERSION    1\n#define CEPH_LOCK_DN          2\n#define CEPH_LOCK_ISNAP       16\n#define CEPH_LOCK_IVERSION    32     \n#define CEPH_LOCK_IFILE       64\n#define CEPH_LOCK_IAUTH       128\n#define CEPH_LOCK_ILINK       256\n#define CEPH_LOCK_IDFT        512    \n#define CEPH_LOCK_INEST       1024   \n#define CEPH_LOCK_IXATTR      2048\n#define CEPH_LOCK_IFLOCK      4096   \n#define CEPH_LOCK_INO         8192   \n#define CEPH_LOCK_IPOLICY     16384  \n\n \nenum {\n\tCEPH_SESSION_REQUEST_OPEN,\n\tCEPH_SESSION_OPEN,\n\tCEPH_SESSION_REQUEST_CLOSE,\n\tCEPH_SESSION_CLOSE,\n\tCEPH_SESSION_REQUEST_RENEWCAPS,\n\tCEPH_SESSION_RENEWCAPS,\n\tCEPH_SESSION_STALE,\n\tCEPH_SESSION_RECALL_STATE,\n\tCEPH_SESSION_FLUSHMSG,\n\tCEPH_SESSION_FLUSHMSG_ACK,\n\tCEPH_SESSION_FORCE_RO,\n\tCEPH_SESSION_REJECT,\n\tCEPH_SESSION_REQUEST_FLUSH_MDLOG,\n};\n\n#define CEPH_SESSION_BLOCKLISTED\t(1 << 0)   \n\nextern const char *ceph_session_op_name(int op);\n\nstruct ceph_mds_session_head {\n\t__le32 op;\n\t__le64 seq;\n\tstruct ceph_timespec stamp;\n\t__le32 max_caps, max_leases;\n} __attribute__ ((packed));\n\n \n \n#define CEPH_MDS_OP_WRITE        0x001000\nenum {\n\tCEPH_MDS_OP_LOOKUP     = 0x00100,\n\tCEPH_MDS_OP_GETATTR    = 0x00101,\n\tCEPH_MDS_OP_LOOKUPHASH = 0x00102,\n\tCEPH_MDS_OP_LOOKUPPARENT = 0x00103,\n\tCEPH_MDS_OP_LOOKUPINO  = 0x00104,\n\tCEPH_MDS_OP_LOOKUPNAME = 0x00105,\n\tCEPH_MDS_OP_GETVXATTR  = 0x00106,\n\n\tCEPH_MDS_OP_SETXATTR   = 0x01105,\n\tCEPH_MDS_OP_RMXATTR    = 0x01106,\n\tCEPH_MDS_OP_SETLAYOUT  = 0x01107,\n\tCEPH_MDS_OP_SETATTR    = 0x01108,\n\tCEPH_MDS_OP_SETFILELOCK= 0x01109,\n\tCEPH_MDS_OP_GETFILELOCK= 0x00110,\n\tCEPH_MDS_OP_SETDIRLAYOUT=0x0110a,\n\n\tCEPH_MDS_OP_MKNOD      = 0x01201,\n\tCEPH_MDS_OP_LINK       = 0x01202,\n\tCEPH_MDS_OP_UNLINK     = 0x01203,\n\tCEPH_MDS_OP_RENAME     = 0x01204,\n\tCEPH_MDS_OP_MKDIR      = 0x01220,\n\tCEPH_MDS_OP_RMDIR      = 0x01221,\n\tCEPH_MDS_OP_SYMLINK    = 0x01222,\n\n\tCEPH_MDS_OP_CREATE     = 0x01301,\n\tCEPH_MDS_OP_OPEN       = 0x00302,\n\tCEPH_MDS_OP_READDIR    = 0x00305,\n\n\tCEPH_MDS_OP_LOOKUPSNAP = 0x00400,\n\tCEPH_MDS_OP_MKSNAP     = 0x01400,\n\tCEPH_MDS_OP_RMSNAP     = 0x01401,\n\tCEPH_MDS_OP_LSSNAP     = 0x00402,\n\tCEPH_MDS_OP_RENAMESNAP = 0x01403,\n};\n\nextern const char *ceph_mds_op_name(int op);\n\n#define CEPH_SETATTR_MODE              (1 << 0)\n#define CEPH_SETATTR_UID               (1 << 1)\n#define CEPH_SETATTR_GID               (1 << 2)\n#define CEPH_SETATTR_MTIME             (1 << 3)\n#define CEPH_SETATTR_ATIME             (1 << 4)\n#define CEPH_SETATTR_SIZE              (1 << 5)\n#define CEPH_SETATTR_CTIME             (1 << 6)\n#define CEPH_SETATTR_MTIME_NOW         (1 << 7)\n#define CEPH_SETATTR_ATIME_NOW         (1 << 8)\n#define CEPH_SETATTR_BTIME             (1 << 9)\n#define CEPH_SETATTR_KILL_SGUID        (1 << 10)\n#define CEPH_SETATTR_FSCRYPT_AUTH      (1 << 11)\n#define CEPH_SETATTR_FSCRYPT_FILE      (1 << 12)\n\n \n#define CEPH_XATTR_CREATE  (1 << 0)\n#define CEPH_XATTR_REPLACE (1 << 1)\n#define CEPH_XATTR_REMOVE  (1 << 31)\n\n \n#define CEPH_READDIR_REPLY_BITFLAGS\t(1<<0)\n\n \n#define CEPH_READDIR_FRAG_END\t\t(1<<0)\n#define CEPH_READDIR_FRAG_COMPLETE\t(1<<8)\n#define CEPH_READDIR_HASH_ORDER\t\t(1<<9)\n#define CEPH_READDIR_OFFSET_HASH\t(1<<10)\n\n \n#define CEPH_O_RDONLY\t\t00000000\n#define CEPH_O_WRONLY\t\t00000001\n#define CEPH_O_RDWR\t\t00000002\n#define CEPH_O_CREAT\t\t00000100\n#define CEPH_O_EXCL\t\t00000200\n#define CEPH_O_TRUNC\t\t00001000\n#define CEPH_O_DIRECTORY\t00200000\n#define CEPH_O_NOFOLLOW\t\t00400000\n\nunion ceph_mds_request_args {\n\tstruct {\n\t\t__le32 mask;                  \n\t} __attribute__ ((packed)) getattr;\n\tstruct {\n\t\t__le32 mode;\n\t\t__le32 uid;\n\t\t__le32 gid;\n\t\tstruct ceph_timespec mtime;\n\t\tstruct ceph_timespec atime;\n\t\t__le64 size, old_size;        \n\t\t__le32 mask;                  \n\t} __attribute__ ((packed)) setattr;\n\tstruct {\n\t\t__le32 frag;                  \n\t\t__le32 max_entries;           \n\t\t__le32 max_bytes;\n\t\t__le16 flags;\n\t\t__le32 offset_hash;\n\t} __attribute__ ((packed)) readdir;\n\tstruct {\n\t\t__le32 mode;\n\t\t__le32 rdev;\n\t} __attribute__ ((packed)) mknod;\n\tstruct {\n\t\t__le32 mode;\n\t} __attribute__ ((packed)) mkdir;\n\tstruct {\n\t\t__le32 flags;\n\t\t__le32 mode;\n\t\t__le32 stripe_unit;           \n\t\t__le32 stripe_count;          \n\t\t__le32 object_size;\n\t\t__le32 pool;\n\t\t__le32 mask;                  \n\t\t__le64 old_size;\n\t} __attribute__ ((packed)) open;\n\tstruct {\n\t\t__le32 flags;\n\t\t__le32 osdmap_epoch;  \n\t} __attribute__ ((packed)) setxattr;\n\tstruct {\n\t\tstruct ceph_file_layout_legacy layout;\n\t} __attribute__ ((packed)) setlayout;\n\tstruct {\n\t\t__u8 rule;  \n\t\t__u8 type;  \n\t\t__le64 owner;  \n\t\t__le64 pid;  \n\t\t__le64 start;  \n\t\t__le64 length;  \n\t\t__u8 wait;  \n\t} __attribute__ ((packed)) filelock_change;\n\tstruct {\n\t\t__le32 mask;                  \n\t\t__le64 snapid;\n\t\t__le64 parent;\n\t\t__le32 hash;\n\t} __attribute__ ((packed)) lookupino;\n} __attribute__ ((packed));\n\nunion ceph_mds_request_args_ext {\n\tunion ceph_mds_request_args old;\n\tstruct {\n\t\t__le32 mode;\n\t\t__le32 uid;\n\t\t__le32 gid;\n\t\tstruct ceph_timespec mtime;\n\t\tstruct ceph_timespec atime;\n\t\t__le64 size, old_size;        \n\t\t__le32 mask;                  \n\t\tstruct ceph_timespec btime;\n\t} __attribute__ ((packed)) setattr_ext;\n};\n\n#define CEPH_MDS_FLAG_REPLAY\t\t1  \n#define CEPH_MDS_FLAG_WANT_DENTRY\t2  \n#define CEPH_MDS_FLAG_ASYNC\t\t4  \n\nstruct ceph_mds_request_head_legacy {\n\t__le64 oldest_client_tid;\n\t__le32 mdsmap_epoch;            \n\t__le32 flags;                   \n\t__u8 num_retry, num_fwd;        \n\t__le16 num_releases;            \n\t__le32 op;                      \n\t__le32 caller_uid, caller_gid;\n\t__le64 ino;                     \n\tunion ceph_mds_request_args args;\n} __attribute__ ((packed));\n\n#define CEPH_MDS_REQUEST_HEAD_VERSION  2\n\nstruct ceph_mds_request_head_old {\n\t__le16 version;                 \n\t__le64 oldest_client_tid;\n\t__le32 mdsmap_epoch;            \n\t__le32 flags;                   \n\t__u8 num_retry, num_fwd;        \n\t__le16 num_releases;            \n\t__le32 op;                      \n\t__le32 caller_uid, caller_gid;\n\t__le64 ino;                     \n\tunion ceph_mds_request_args_ext args;\n} __attribute__ ((packed));\n\nstruct ceph_mds_request_head {\n\t__le16 version;                 \n\t__le64 oldest_client_tid;\n\t__le32 mdsmap_epoch;            \n\t__le32 flags;                   \n\t__u8 num_retry, num_fwd;        \n\t__le16 num_releases;            \n\t__le32 op;                      \n\t__le32 caller_uid, caller_gid;\n\t__le64 ino;                     \n\tunion ceph_mds_request_args_ext args;\n\n\t__le32 ext_num_retry;           \n\t__le32 ext_num_fwd;             \n} __attribute__ ((packed));\n\n \nstruct ceph_mds_request_release {\n\t__le64 ino, cap_id;             \n\t__le32 caps, wanted;            \n\t__le32 seq, issue_seq, mseq;\n\t__le32 dname_seq;               \n\t__le32 dname_len;               \n} __attribute__ ((packed));\n\n \nstruct ceph_mds_reply_head {\n\t__le32 op;\n\t__le32 result;\n\t__le32 mdsmap_epoch;\n\t__u8 safe;                      \n\t__u8 is_dentry, is_target;      \n} __attribute__ ((packed));\n\n \nstruct ceph_frag_tree_split {\n\t__le32 frag;                    \n\t__le32 by;                      \n} __attribute__ ((packed));\n\nstruct ceph_frag_tree_head {\n\t__le32 nsplits;                 \n\tstruct ceph_frag_tree_split splits[];\n} __attribute__ ((packed));\n\n \nstruct ceph_mds_reply_cap {\n\t__le32 caps, wanted;            \n\t__le64 cap_id;\n\t__le32 seq, mseq;\n\t__le64 realm;                   \n\t__u8 flags;                     \n} __attribute__ ((packed));\n\n#define CEPH_CAP_FLAG_AUTH\t(1 << 0)   \n#define CEPH_CAP_FLAG_RELEASE\t(1 << 1)   \n\n \nstruct ceph_mds_reply_inode {\n\t__le64 ino;\n\t__le64 snapid;\n\t__le32 rdev;\n\t__le64 version;                 \n\t__le64 xattr_version;           \n\tstruct ceph_mds_reply_cap cap;  \n\tstruct ceph_file_layout_legacy layout;\n\tstruct ceph_timespec ctime, mtime, atime;\n\t__le32 time_warp_seq;\n\t__le64 size, max_size, truncate_size;\n\t__le32 truncate_seq;\n\t__le32 mode, uid, gid;\n\t__le32 nlink;\n\t__le64 files, subdirs, rbytes, rfiles, rsubdirs;   \n\tstruct ceph_timespec rctime;\n\tstruct ceph_frag_tree_head fragtree;   \n} __attribute__ ((packed));\n \n\n \nstruct ceph_mds_reply_lease {\n\t__le16 mask;             \n\t__le32 duration_ms;      \n\t__le32 seq;\n} __attribute__ ((packed));\n\n#define CEPH_LEASE_VALID        (1 | 2)  \n#define CEPH_LEASE_PRIMARY_LINK 4        \n\nstruct ceph_mds_reply_dirfrag {\n\t__le32 frag;             \n\t__le32 auth;             \n\t__le32 ndist;            \n\t__le32 dist[];\n} __attribute__ ((packed));\n\n#define CEPH_LOCK_FCNTL\t\t1\n#define CEPH_LOCK_FLOCK\t\t2\n#define CEPH_LOCK_FCNTL_INTR    3\n#define CEPH_LOCK_FLOCK_INTR    4\n\n\n#define CEPH_LOCK_SHARED   1\n#define CEPH_LOCK_EXCL     2\n#define CEPH_LOCK_UNLOCK   4\n\nstruct ceph_filelock {\n\t__le64 start; \n\t__le64 length;  \n\t__le64 client;  \n\t__le64 owner;  \n\t__le64 pid;  \n\t__u8 type;  \n} __attribute__ ((packed));\n\n\n \n#define CEPH_FILE_MODE_PIN        0\n#define CEPH_FILE_MODE_RD         1\n#define CEPH_FILE_MODE_WR         2\n#define CEPH_FILE_MODE_RDWR       3   \n#define CEPH_FILE_MODE_LAZY       4   \n#define CEPH_FILE_MODE_BITS       4\n#define CEPH_FILE_MODE_MASK       ((1 << CEPH_FILE_MODE_BITS) - 1)\n\nint ceph_flags_to_mode(int flags);\n\n#define CEPH_INLINE_NONE\t((__u64)-1)\n\n \n#define CEPH_CAP_PIN         1   \n\n \n#define CEPH_CAP_GSHARED     1   \n#define CEPH_CAP_GEXCL       2   \n#define CEPH_CAP_GCACHE      4   \n#define CEPH_CAP_GRD         8   \n#define CEPH_CAP_GWR        16   \n#define CEPH_CAP_GBUFFER    32   \n#define CEPH_CAP_GWREXTEND  64   \n#define CEPH_CAP_GLAZYIO   128   \n\n#define CEPH_CAP_SIMPLE_BITS  2\n#define CEPH_CAP_FILE_BITS    8\n\n \n#define CEPH_CAP_SAUTH      2\n#define CEPH_CAP_SLINK      4\n#define CEPH_CAP_SXATTR     6\n#define CEPH_CAP_SFILE      8\n#define CEPH_CAP_SFLOCK    20\n\n#define CEPH_CAP_BITS      22\n\n \n#define CEPH_CAP_AUTH_SHARED  (CEPH_CAP_GSHARED  << CEPH_CAP_SAUTH)\n#define CEPH_CAP_AUTH_EXCL     (CEPH_CAP_GEXCL     << CEPH_CAP_SAUTH)\n#define CEPH_CAP_LINK_SHARED  (CEPH_CAP_GSHARED  << CEPH_CAP_SLINK)\n#define CEPH_CAP_LINK_EXCL     (CEPH_CAP_GEXCL     << CEPH_CAP_SLINK)\n#define CEPH_CAP_XATTR_SHARED (CEPH_CAP_GSHARED  << CEPH_CAP_SXATTR)\n#define CEPH_CAP_XATTR_EXCL    (CEPH_CAP_GEXCL     << CEPH_CAP_SXATTR)\n#define CEPH_CAP_FILE(x)    (x << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_SHARED   (CEPH_CAP_GSHARED   << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_EXCL     (CEPH_CAP_GEXCL     << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_CACHE    (CEPH_CAP_GCACHE    << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_RD       (CEPH_CAP_GRD       << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_WR       (CEPH_CAP_GWR       << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_BUFFER   (CEPH_CAP_GBUFFER   << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_WREXTEND (CEPH_CAP_GWREXTEND << CEPH_CAP_SFILE)\n#define CEPH_CAP_FILE_LAZYIO   (CEPH_CAP_GLAZYIO   << CEPH_CAP_SFILE)\n#define CEPH_CAP_FLOCK_SHARED  (CEPH_CAP_GSHARED   << CEPH_CAP_SFLOCK)\n#define CEPH_CAP_FLOCK_EXCL    (CEPH_CAP_GEXCL     << CEPH_CAP_SFLOCK)\n\n\n \n#define CEPH_STAT_CAP_INODE    CEPH_CAP_PIN\n#define CEPH_STAT_CAP_TYPE     CEPH_CAP_PIN   \n#define CEPH_STAT_CAP_SYMLINK  CEPH_CAP_PIN\n#define CEPH_STAT_CAP_UID      CEPH_CAP_AUTH_SHARED\n#define CEPH_STAT_CAP_GID      CEPH_CAP_AUTH_SHARED\n#define CEPH_STAT_CAP_MODE     CEPH_CAP_AUTH_SHARED\n#define CEPH_STAT_CAP_NLINK    CEPH_CAP_LINK_SHARED\n#define CEPH_STAT_CAP_LAYOUT   CEPH_CAP_FILE_SHARED\n#define CEPH_STAT_CAP_MTIME    CEPH_CAP_FILE_SHARED\n#define CEPH_STAT_CAP_SIZE     CEPH_CAP_FILE_SHARED\n#define CEPH_STAT_CAP_ATIME    CEPH_CAP_FILE_SHARED   \n#define CEPH_STAT_CAP_XATTR    CEPH_CAP_XATTR_SHARED\n#define CEPH_STAT_CAP_INODE_ALL (CEPH_CAP_PIN |\t\t\t\\\n\t\t\t\t CEPH_CAP_AUTH_SHARED |\t\\\n\t\t\t\t CEPH_CAP_LINK_SHARED |\t\\\n\t\t\t\t CEPH_CAP_FILE_SHARED |\t\\\n\t\t\t\t CEPH_CAP_XATTR_SHARED)\n#define CEPH_STAT_CAP_INLINE_DATA (CEPH_CAP_FILE_SHARED | \\\n\t\t\t\t   CEPH_CAP_FILE_RD)\n#define CEPH_STAT_RSTAT CEPH_CAP_FILE_WREXTEND\n\n#define CEPH_CAP_ANY_SHARED (CEPH_CAP_AUTH_SHARED |\t\t\t\\\n\t\t\t      CEPH_CAP_LINK_SHARED |\t\t\t\\\n\t\t\t      CEPH_CAP_XATTR_SHARED |\t\t\t\\\n\t\t\t      CEPH_CAP_FILE_SHARED)\n#define CEPH_CAP_ANY_RD   (CEPH_CAP_ANY_SHARED | CEPH_CAP_FILE_RD |\t\\\n\t\t\t   CEPH_CAP_FILE_CACHE)\n\n#define CEPH_CAP_ANY_EXCL (CEPH_CAP_AUTH_EXCL |\t\t\\\n\t\t\t   CEPH_CAP_LINK_EXCL |\t\t\\\n\t\t\t   CEPH_CAP_XATTR_EXCL |\t\\\n\t\t\t   CEPH_CAP_FILE_EXCL)\n#define CEPH_CAP_ANY_FILE_RD (CEPH_CAP_FILE_RD | CEPH_CAP_FILE_CACHE | \\\n\t\t\t      CEPH_CAP_FILE_SHARED)\n#define CEPH_CAP_ANY_FILE_WR (CEPH_CAP_FILE_WR | CEPH_CAP_FILE_BUFFER |\t\\\n\t\t\t      CEPH_CAP_FILE_EXCL)\n#define CEPH_CAP_ANY_WR   (CEPH_CAP_ANY_EXCL | CEPH_CAP_ANY_FILE_WR)\n#define CEPH_CAP_ANY      (CEPH_CAP_ANY_RD | CEPH_CAP_ANY_EXCL | \\\n\t\t\t   CEPH_CAP_ANY_FILE_WR | CEPH_CAP_FILE_LAZYIO | \\\n\t\t\t   CEPH_CAP_PIN)\n#define CEPH_CAP_ALL_FILE (CEPH_CAP_PIN | CEPH_CAP_ANY_SHARED | \\\n\t\t\t   CEPH_CAP_AUTH_EXCL | CEPH_CAP_XATTR_EXCL | \\\n\t\t\t   CEPH_CAP_ANY_FILE_RD | CEPH_CAP_ANY_FILE_WR)\n\n#define CEPH_CAP_LOCKS (CEPH_LOCK_IFILE | CEPH_LOCK_IAUTH | CEPH_LOCK_ILINK | \\\n\t\t\tCEPH_LOCK_IXATTR)\n\n \n#define CEPH_CAP_DIR_CREATE\tCEPH_CAP_FILE_CACHE\n#define CEPH_CAP_DIR_UNLINK\tCEPH_CAP_FILE_RD\n#define CEPH_CAP_ANY_DIR_OPS\t(CEPH_CAP_FILE_CACHE | CEPH_CAP_FILE_RD | \\\n\t\t\t\t CEPH_CAP_FILE_WREXTEND | CEPH_CAP_FILE_LAZYIO)\n\nint ceph_caps_for_mode(int mode);\n\nenum {\n\tCEPH_CAP_OP_GRANT,          \n\tCEPH_CAP_OP_REVOKE,         \n\tCEPH_CAP_OP_TRUNC,          \n\tCEPH_CAP_OP_EXPORT,         \n\tCEPH_CAP_OP_IMPORT,         \n\tCEPH_CAP_OP_UPDATE,         \n\tCEPH_CAP_OP_DROP,           \n\tCEPH_CAP_OP_FLUSH,          \n\tCEPH_CAP_OP_FLUSH_ACK,      \n\tCEPH_CAP_OP_FLUSHSNAP,      \n\tCEPH_CAP_OP_FLUSHSNAP_ACK,  \n\tCEPH_CAP_OP_RELEASE,        \n\tCEPH_CAP_OP_RENEW,          \n};\n\nextern const char *ceph_cap_op_name(int op);\n\n \n#define CEPH_CLIENT_CAPS_SYNC\t\t\t(1<<0)\n#define CEPH_CLIENT_CAPS_NO_CAPSNAP\t\t(1<<1)\n#define CEPH_CLIENT_CAPS_PENDING_CAPSNAP\t(1<<2)\n\n \nstruct ceph_mds_caps {\n\t__le32 op;                   \n\t__le64 ino, realm;\n\t__le64 cap_id;\n\t__le32 seq, issue_seq;\n\t__le32 caps, wanted, dirty;  \n\t__le32 migrate_seq;\n\t__le64 snap_follows;\n\t__le32 snap_trace_len;\n\n\t \n\t__le32 uid, gid, mode;\n\n\t \n\t__le32 nlink;\n\n\t \n\t__le32 xattr_len;\n\t__le64 xattr_version;\n\n\t \n\t__le64 size, max_size, truncate_size;\n\t__le32 truncate_seq;\n\tstruct ceph_timespec mtime, atime, ctime;\n\tstruct ceph_file_layout_legacy layout;\n\t__le32 time_warp_seq;\n} __attribute__ ((packed));\n\nstruct ceph_mds_cap_peer {\n\t__le64 cap_id;\n\t__le32 seq;\n\t__le32 mseq;\n\t__le32 mds;\n\t__u8   flags;\n} __attribute__ ((packed));\n\n \nstruct ceph_mds_cap_release {\n\t__le32 num;                 \n} __attribute__ ((packed));\n\nstruct ceph_mds_cap_item {\n\t__le64 ino;\n\t__le64 cap_id;\n\t__le32 migrate_seq, seq;\n} __attribute__ ((packed));\n\n#define CEPH_MDS_LEASE_REVOKE           1   \n#define CEPH_MDS_LEASE_RELEASE          2   \n#define CEPH_MDS_LEASE_RENEW            3   \n#define CEPH_MDS_LEASE_REVOKE_ACK       4   \n\nextern const char *ceph_lease_op_name(int o);\n\n \nstruct ceph_mds_lease {\n\t__u8 action;             \n\t__le16 mask;             \n\t__le64 ino;\n\t__le64 first, last;      \n\t__le32 seq;\n\t__le32 duration_ms;      \n} __attribute__ ((packed));\n \n\n \nstruct ceph_mds_cap_reconnect {\n\t__le64 cap_id;\n\t__le32 wanted;\n\t__le32 issued;\n\t__le64 snaprealm;\n\t__le64 pathbase;         \n\t__le32 flock_len;        \n} __attribute__ ((packed));\n \n\nstruct ceph_mds_cap_reconnect_v1 {\n\t__le64 cap_id;\n\t__le32 wanted;\n\t__le32 issued;\n\t__le64 size;\n\tstruct ceph_timespec mtime, atime;\n\t__le64 snaprealm;\n\t__le64 pathbase;         \n} __attribute__ ((packed));\n\nstruct ceph_mds_snaprealm_reconnect {\n\t__le64 ino;      \n\t__le64 seq;      \n\t__le64 parent;   \n} __attribute__ ((packed));\n\n \nenum {\n\tCEPH_SNAP_OP_UPDATE,   \n\tCEPH_SNAP_OP_CREATE,\n\tCEPH_SNAP_OP_DESTROY,\n\tCEPH_SNAP_OP_SPLIT,\n};\n\nextern const char *ceph_snap_op_name(int o);\n\n \nstruct ceph_mds_snap_head {\n\t__le32 op;                 \n\t__le64 split;              \n\t__le32 num_split_inos;     \n\t__le32 num_split_realms;   \n\t__le32 trace_len;          \n} __attribute__ ((packed));\n \n\n \nstruct ceph_mds_snap_realm {\n\t__le64 ino;            \n\t__le64 created;        \n\t__le64 parent;         \n\t__le64 parent_since;   \n\t__le64 seq;            \n\t__le32 num_snaps;\n\t__le32 num_prior_parent_snaps;\n} __attribute__ ((packed));\n \n\n \nstruct ceph_mds_quota {\n\t__le64 ino;\t\t \n\tstruct ceph_timespec rctime;\n\t__le64 rbytes;\t\t \n\t__le64 rfiles;\n\t__le64 rsubdirs;\n\t__u8 struct_v;\t\t \n\t__u8 struct_compat;\n\t__le32 struct_len;\n\t__le64 max_bytes;\t \n\t__le64 max_files;\t \n} __attribute__ ((packed));\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}