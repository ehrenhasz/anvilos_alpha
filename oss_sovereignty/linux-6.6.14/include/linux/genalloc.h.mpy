{
  "module_name": "genalloc.h",
  "hash_id": "ebd61b35372758c35e96ae6a792c734f5742e3b71c7c93007ee9d21ba2faa761",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/genalloc.h",
  "human_readable_source": " \n \n\n\n#ifndef __GENALLOC_H__\n#define __GENALLOC_H__\n\n#include <linux/types.h>\n#include <linux/spinlock_types.h>\n#include <linux/atomic.h>\n\nstruct device;\nstruct device_node;\nstruct gen_pool;\n\n \ntypedef unsigned long (*genpool_algo_t)(unsigned long *map,\n\t\t\tunsigned long size,\n\t\t\tunsigned long start,\n\t\t\tunsigned int nr,\n\t\t\tvoid *data, struct gen_pool *pool,\n\t\t\tunsigned long start_addr);\n\n \nstruct gen_pool {\n\tspinlock_t lock;\n\tstruct list_head chunks;\t \n\tint min_alloc_order;\t\t \n\n\tgenpool_algo_t algo;\t\t \n\tvoid *data;\n\n\tconst char *name;\n};\n\n \nstruct gen_pool_chunk {\n\tstruct list_head next_chunk;\t \n\tatomic_long_t avail;\n\tphys_addr_t phys_addr;\t\t \n\tvoid *owner;\t\t\t \n\tunsigned long start_addr;\t \n\tunsigned long end_addr;\t\t \n\tunsigned long bits[];\t\t \n};\n\n \nstruct genpool_data_align {\n\tint align;\t\t \n};\n\n \nstruct genpool_data_fixed {\n\tunsigned long offset;\t\t \n};\n\nextern struct gen_pool *gen_pool_create(int, int);\nextern phys_addr_t gen_pool_virt_to_phys(struct gen_pool *pool, unsigned long);\nextern int gen_pool_add_owner(struct gen_pool *, unsigned long, phys_addr_t,\n\t\t\t     size_t, int, void *);\n\nstatic inline int gen_pool_add_virt(struct gen_pool *pool, unsigned long addr,\n\t\tphys_addr_t phys, size_t size, int nid)\n{\n\treturn gen_pool_add_owner(pool, addr, phys, size, nid, NULL);\n}\n\n \nstatic inline int gen_pool_add(struct gen_pool *pool, unsigned long addr,\n\t\t\t       size_t size, int nid)\n{\n\treturn gen_pool_add_virt(pool, addr, -1, size, nid);\n}\nextern void gen_pool_destroy(struct gen_pool *);\nunsigned long gen_pool_alloc_algo_owner(struct gen_pool *pool, size_t size,\n\t\tgenpool_algo_t algo, void *data, void **owner);\n\nstatic inline unsigned long gen_pool_alloc_owner(struct gen_pool *pool,\n\t\tsize_t size, void **owner)\n{\n\treturn gen_pool_alloc_algo_owner(pool, size, pool->algo, pool->data,\n\t\t\towner);\n}\n\nstatic inline unsigned long gen_pool_alloc_algo(struct gen_pool *pool,\n\t\tsize_t size, genpool_algo_t algo, void *data)\n{\n\treturn gen_pool_alloc_algo_owner(pool, size, algo, data, NULL);\n}\n\n \nstatic inline unsigned long gen_pool_alloc(struct gen_pool *pool, size_t size)\n{\n\treturn gen_pool_alloc_algo(pool, size, pool->algo, pool->data);\n}\n\nextern void *gen_pool_dma_alloc(struct gen_pool *pool, size_t size,\n\t\tdma_addr_t *dma);\nextern void *gen_pool_dma_alloc_algo(struct gen_pool *pool, size_t size,\n\t\tdma_addr_t *dma, genpool_algo_t algo, void *data);\nextern void *gen_pool_dma_alloc_align(struct gen_pool *pool, size_t size,\n\t\tdma_addr_t *dma, int align);\nextern void *gen_pool_dma_zalloc(struct gen_pool *pool, size_t size, dma_addr_t *dma);\nextern void *gen_pool_dma_zalloc_algo(struct gen_pool *pool, size_t size,\n\t\tdma_addr_t *dma, genpool_algo_t algo, void *data);\nextern void *gen_pool_dma_zalloc_align(struct gen_pool *pool, size_t size,\n\t\tdma_addr_t *dma, int align);\nextern void gen_pool_free_owner(struct gen_pool *pool, unsigned long addr,\n\t\tsize_t size, void **owner);\nstatic inline void gen_pool_free(struct gen_pool *pool, unsigned long addr,\n                size_t size)\n{\n\tgen_pool_free_owner(pool, addr, size, NULL);\n}\n\nextern void gen_pool_for_each_chunk(struct gen_pool *,\n\tvoid (*)(struct gen_pool *, struct gen_pool_chunk *, void *), void *);\nextern size_t gen_pool_avail(struct gen_pool *);\nextern size_t gen_pool_size(struct gen_pool *);\n\nextern void gen_pool_set_algo(struct gen_pool *pool, genpool_algo_t algo,\n\t\tvoid *data);\n\nextern unsigned long gen_pool_first_fit(unsigned long *map, unsigned long size,\n\t\tunsigned long start, unsigned int nr, void *data,\n\t\tstruct gen_pool *pool, unsigned long start_addr);\n\nextern unsigned long gen_pool_fixed_alloc(unsigned long *map,\n\t\tunsigned long size, unsigned long start, unsigned int nr,\n\t\tvoid *data, struct gen_pool *pool, unsigned long start_addr);\n\nextern unsigned long gen_pool_first_fit_align(unsigned long *map,\n\t\tunsigned long size, unsigned long start, unsigned int nr,\n\t\tvoid *data, struct gen_pool *pool, unsigned long start_addr);\n\n\nextern unsigned long gen_pool_first_fit_order_align(unsigned long *map,\n\t\tunsigned long size, unsigned long start, unsigned int nr,\n\t\tvoid *data, struct gen_pool *pool, unsigned long start_addr);\n\nextern unsigned long gen_pool_best_fit(unsigned long *map, unsigned long size,\n\t\tunsigned long start, unsigned int nr, void *data,\n\t\tstruct gen_pool *pool, unsigned long start_addr);\n\n\nextern struct gen_pool *devm_gen_pool_create(struct device *dev,\n\t\tint min_alloc_order, int nid, const char *name);\nextern struct gen_pool *gen_pool_get(struct device *dev, const char *name);\n\nextern bool gen_pool_has_addr(struct gen_pool *pool, unsigned long start,\n\t\t\tsize_t size);\n\n#ifdef CONFIG_OF\nextern struct gen_pool *of_gen_pool_get(struct device_node *np,\n\tconst char *propname, int index);\n#else\nstatic inline struct gen_pool *of_gen_pool_get(struct device_node *np,\n\tconst char *propname, int index)\n{\n\treturn NULL;\n}\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}