{
  "module_name": "rwlock_api_smp.h",
  "hash_id": "489b01e22ab1b1aa5971fe8eca1fd0678c99d9120bb50f74d2959512742ead20",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/rwlock_api_smp.h",
  "human_readable_source": "#ifndef __LINUX_RWLOCK_API_SMP_H\n#define __LINUX_RWLOCK_API_SMP_H\n\n#ifndef __LINUX_SPINLOCK_API_SMP_H\n# error \"please don't include this file directly\"\n#endif\n\n \n\nvoid __lockfunc _raw_read_lock(rwlock_t *lock)\t\t__acquires(lock);\nvoid __lockfunc _raw_write_lock(rwlock_t *lock)\t\t__acquires(lock);\nvoid __lockfunc _raw_write_lock_nested(rwlock_t *lock, int subclass)\t__acquires(lock);\nvoid __lockfunc _raw_read_lock_bh(rwlock_t *lock)\t__acquires(lock);\nvoid __lockfunc _raw_write_lock_bh(rwlock_t *lock)\t__acquires(lock);\nvoid __lockfunc _raw_read_lock_irq(rwlock_t *lock)\t__acquires(lock);\nvoid __lockfunc _raw_write_lock_irq(rwlock_t *lock)\t__acquires(lock);\nunsigned long __lockfunc _raw_read_lock_irqsave(rwlock_t *lock)\n\t\t\t\t\t\t\t__acquires(lock);\nunsigned long __lockfunc _raw_write_lock_irqsave(rwlock_t *lock)\n\t\t\t\t\t\t\t__acquires(lock);\nint __lockfunc _raw_read_trylock(rwlock_t *lock);\nint __lockfunc _raw_write_trylock(rwlock_t *lock);\nvoid __lockfunc _raw_read_unlock(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc _raw_write_unlock(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc _raw_read_unlock_bh(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc _raw_write_unlock_bh(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc _raw_read_unlock_irq(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc _raw_write_unlock_irq(rwlock_t *lock)\t__releases(lock);\nvoid __lockfunc\n_raw_read_unlock_irqrestore(rwlock_t *lock, unsigned long flags)\n\t\t\t\t\t\t\t__releases(lock);\nvoid __lockfunc\n_raw_write_unlock_irqrestore(rwlock_t *lock, unsigned long flags)\n\t\t\t\t\t\t\t__releases(lock);\n\n#ifdef CONFIG_INLINE_READ_LOCK\n#define _raw_read_lock(lock) __raw_read_lock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_LOCK\n#define _raw_write_lock(lock) __raw_write_lock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_LOCK_BH\n#define _raw_read_lock_bh(lock) __raw_read_lock_bh(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_LOCK_BH\n#define _raw_write_lock_bh(lock) __raw_write_lock_bh(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_LOCK_IRQ\n#define _raw_read_lock_irq(lock) __raw_read_lock_irq(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_LOCK_IRQ\n#define _raw_write_lock_irq(lock) __raw_write_lock_irq(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_LOCK_IRQSAVE\n#define _raw_read_lock_irqsave(lock) __raw_read_lock_irqsave(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_LOCK_IRQSAVE\n#define _raw_write_lock_irqsave(lock) __raw_write_lock_irqsave(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_TRYLOCK\n#define _raw_read_trylock(lock) __raw_read_trylock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_TRYLOCK\n#define _raw_write_trylock(lock) __raw_write_trylock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_UNLOCK\n#define _raw_read_unlock(lock) __raw_read_unlock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_UNLOCK\n#define _raw_write_unlock(lock) __raw_write_unlock(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_UNLOCK_BH\n#define _raw_read_unlock_bh(lock) __raw_read_unlock_bh(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_UNLOCK_BH\n#define _raw_write_unlock_bh(lock) __raw_write_unlock_bh(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_UNLOCK_IRQ\n#define _raw_read_unlock_irq(lock) __raw_read_unlock_irq(lock)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_UNLOCK_IRQ\n#define _raw_write_unlock_irq(lock) __raw_write_unlock_irq(lock)\n#endif\n\n#ifdef CONFIG_INLINE_READ_UNLOCK_IRQRESTORE\n#define _raw_read_unlock_irqrestore(lock, flags) \\\n\t__raw_read_unlock_irqrestore(lock, flags)\n#endif\n\n#ifdef CONFIG_INLINE_WRITE_UNLOCK_IRQRESTORE\n#define _raw_write_unlock_irqrestore(lock, flags) \\\n\t__raw_write_unlock_irqrestore(lock, flags)\n#endif\n\nstatic inline int __raw_read_trylock(rwlock_t *lock)\n{\n\tpreempt_disable();\n\tif (do_raw_read_trylock(lock)) {\n\t\trwlock_acquire_read(&lock->dep_map, 0, 1, _RET_IP_);\n\t\treturn 1;\n\t}\n\tpreempt_enable();\n\treturn 0;\n}\n\nstatic inline int __raw_write_trylock(rwlock_t *lock)\n{\n\tpreempt_disable();\n\tif (do_raw_write_trylock(lock)) {\n\t\trwlock_acquire(&lock->dep_map, 0, 1, _RET_IP_);\n\t\treturn 1;\n\t}\n\tpreempt_enable();\n\treturn 0;\n}\n\n \n#if !defined(CONFIG_GENERIC_LOCKBREAK) || defined(CONFIG_DEBUG_LOCK_ALLOC)\n\nstatic inline void __raw_read_lock(rwlock_t *lock)\n{\n\tpreempt_disable();\n\trwlock_acquire_read(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_read_trylock, do_raw_read_lock);\n}\n\nstatic inline unsigned long __raw_read_lock_irqsave(rwlock_t *lock)\n{\n\tunsigned long flags;\n\n\tlocal_irq_save(flags);\n\tpreempt_disable();\n\trwlock_acquire_read(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_read_trylock, do_raw_read_lock);\n\treturn flags;\n}\n\nstatic inline void __raw_read_lock_irq(rwlock_t *lock)\n{\n\tlocal_irq_disable();\n\tpreempt_disable();\n\trwlock_acquire_read(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_read_trylock, do_raw_read_lock);\n}\n\nstatic inline void __raw_read_lock_bh(rwlock_t *lock)\n{\n\t__local_bh_disable_ip(_RET_IP_, SOFTIRQ_LOCK_OFFSET);\n\trwlock_acquire_read(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_read_trylock, do_raw_read_lock);\n}\n\nstatic inline unsigned long __raw_write_lock_irqsave(rwlock_t *lock)\n{\n\tunsigned long flags;\n\n\tlocal_irq_save(flags);\n\tpreempt_disable();\n\trwlock_acquire(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_write_trylock, do_raw_write_lock);\n\treturn flags;\n}\n\nstatic inline void __raw_write_lock_irq(rwlock_t *lock)\n{\n\tlocal_irq_disable();\n\tpreempt_disable();\n\trwlock_acquire(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_write_trylock, do_raw_write_lock);\n}\n\nstatic inline void __raw_write_lock_bh(rwlock_t *lock)\n{\n\t__local_bh_disable_ip(_RET_IP_, SOFTIRQ_LOCK_OFFSET);\n\trwlock_acquire(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_write_trylock, do_raw_write_lock);\n}\n\nstatic inline void __raw_write_lock(rwlock_t *lock)\n{\n\tpreempt_disable();\n\trwlock_acquire(&lock->dep_map, 0, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_write_trylock, do_raw_write_lock);\n}\n\nstatic inline void __raw_write_lock_nested(rwlock_t *lock, int subclass)\n{\n\tpreempt_disable();\n\trwlock_acquire(&lock->dep_map, subclass, 0, _RET_IP_);\n\tLOCK_CONTENDED(lock, do_raw_write_trylock, do_raw_write_lock);\n}\n\n#endif  \n\nstatic inline void __raw_write_unlock(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_write_unlock(lock);\n\tpreempt_enable();\n}\n\nstatic inline void __raw_read_unlock(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_read_unlock(lock);\n\tpreempt_enable();\n}\n\nstatic inline void\n__raw_read_unlock_irqrestore(rwlock_t *lock, unsigned long flags)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_read_unlock(lock);\n\tlocal_irq_restore(flags);\n\tpreempt_enable();\n}\n\nstatic inline void __raw_read_unlock_irq(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_read_unlock(lock);\n\tlocal_irq_enable();\n\tpreempt_enable();\n}\n\nstatic inline void __raw_read_unlock_bh(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_read_unlock(lock);\n\t__local_bh_enable_ip(_RET_IP_, SOFTIRQ_LOCK_OFFSET);\n}\n\nstatic inline void __raw_write_unlock_irqrestore(rwlock_t *lock,\n\t\t\t\t\t     unsigned long flags)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_write_unlock(lock);\n\tlocal_irq_restore(flags);\n\tpreempt_enable();\n}\n\nstatic inline void __raw_write_unlock_irq(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_write_unlock(lock);\n\tlocal_irq_enable();\n\tpreempt_enable();\n}\n\nstatic inline void __raw_write_unlock_bh(rwlock_t *lock)\n{\n\trwlock_release(&lock->dep_map, _RET_IP_);\n\tdo_raw_write_unlock(lock);\n\t__local_bh_enable_ip(_RET_IP_, SOFTIRQ_LOCK_OFFSET);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}