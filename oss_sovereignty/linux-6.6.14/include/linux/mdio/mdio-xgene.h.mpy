{
  "module_name": "mdio-xgene.h",
  "hash_id": "9873d22b1a2be29ca39cdba344ad71de666b74d3abc0bed5336fd4a1663e20de",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mdio/mdio-xgene.h",
  "human_readable_source": " \n \n\n#ifndef __MDIO_XGENE_H__\n#define __MDIO_XGENE_H__\n\n#include <linux/bits.h>\n#include <linux/spinlock.h>\n#include <linux/types.h>\n\n#define BLOCK_XG_MDIO_CSR_OFFSET\t0x5000\n#define BLOCK_DIAG_CSR_OFFSET\t\t0xd000\n#define XGENET_CONFIG_REG_ADDR\t\t0x20\n\n#define MAC_ADDR_REG_OFFSET\t\t0x00\n#define MAC_COMMAND_REG_OFFSET\t\t0x04\n#define MAC_WRITE_REG_OFFSET\t\t0x08\n#define MAC_READ_REG_OFFSET\t\t0x0c\n#define MAC_COMMAND_DONE_REG_OFFSET\t0x10\n\n#define CLKEN_OFFSET\t\t\t0x08\n#define SRST_OFFSET\t\t\t0x00\n\n#define MENET_CFG_MEM_RAM_SHUTDOWN_ADDR\t0x70\n#define MENET_BLOCK_MEM_RDY_ADDR\t0x74\n\n#define MAC_CONFIG_1_ADDR\t\t0x00\n#define MII_MGMT_COMMAND_ADDR\t\t0x24\n#define MII_MGMT_ADDRESS_ADDR\t\t0x28\n#define MII_MGMT_CONTROL_ADDR\t\t0x2c\n#define MII_MGMT_STATUS_ADDR\t\t0x30\n#define MII_MGMT_INDICATORS_ADDR\t0x34\n#define SOFT_RESET\t\t\tBIT(31)\n\n#define MII_MGMT_CONFIG_ADDR            0x20\n#define MII_MGMT_COMMAND_ADDR           0x24\n#define MII_MGMT_ADDRESS_ADDR           0x28\n#define MII_MGMT_CONTROL_ADDR           0x2c\n#define MII_MGMT_STATUS_ADDR            0x30\n#define MII_MGMT_INDICATORS_ADDR        0x34\n\n#define MIIM_COMMAND_ADDR               0x20\n#define MIIM_FIELD_ADDR                 0x24\n#define MIIM_CONFIGURATION_ADDR         0x28\n#define MIIM_LINKFAILVECTOR_ADDR        0x2c\n#define MIIM_INDICATOR_ADDR             0x30\n#define MIIMRD_FIELD_ADDR               0x34\n\n#define MDIO_CSR_OFFSET\t\t\t0x5000\n\n#define REG_ADDR_POS\t\t\t0\n#define REG_ADDR_LEN\t\t\t5\n#define PHY_ADDR_POS\t\t\t8\n#define PHY_ADDR_LEN\t\t\t5\n\n#define HSTMIIMWRDAT_POS\t\t0\n#define HSTMIIMWRDAT_LEN\t\t16\n#define HSTPHYADX_POS\t\t\t23\n#define HSTPHYADX_LEN\t\t\t5\n#define HSTREGADX_POS\t\t\t18\n#define HSTREGADX_LEN\t\t\t5\n#define HSTLDCMD\t\t\tBIT(3)\n#define HSTMIIMCMD_POS\t\t\t0\n#define HSTMIIMCMD_LEN\t\t\t3\n\n#define BUSY_MASK\t\t\tBIT(0)\n#define READ_CYCLE_MASK\t\t\tBIT(0)\n\nenum xgene_enet_cmd {\n\tXGENE_ENET_WR_CMD = BIT(31),\n\tXGENE_ENET_RD_CMD = BIT(30)\n};\n\nenum {\n\tMIIM_CMD_IDLE,\n\tMIIM_CMD_LEGACY_WRITE,\n\tMIIM_CMD_LEGACY_READ,\n};\n\nenum xgene_mdio_id {\n\tXGENE_MDIO_RGMII = 1,\n\tXGENE_MDIO_XFI\n};\n\nstruct xgene_mdio_pdata {\n\tstruct clk *clk;\n\tstruct device *dev;\n\tvoid __iomem *mac_csr_addr;\n\tvoid __iomem *diag_csr_addr;\n\tvoid __iomem *mdio_csr_addr;\n\tstruct mii_bus *mdio_bus;\n\tint mdio_id;\n\tspinlock_t mac_lock;  \n};\n\n \nstatic inline u64 xgene_enet_set_field_value(int pos, int len, u64 val)\n{\n\treturn (val & ((1ULL << len) - 1)) << pos;\n}\n\n#define SET_VAL(field, val) \\\n\t\txgene_enet_set_field_value(field ## _POS, field ## _LEN, val)\n\n#define SET_BIT(field) \\\n\t\txgene_enet_set_field_value(field ## _POS, 1, 1)\n\n \nstatic inline u64 xgene_enet_get_field_value(int pos, int len, u64 src)\n{\n\treturn (src >> pos) & ((1ULL << len) - 1);\n}\n\n#define GET_VAL(field, src) \\\n\t\txgene_enet_get_field_value(field ## _POS, field ## _LEN, src)\n\n#define GET_BIT(field, src) \\\n\t\txgene_enet_get_field_value(field ## _POS, 1, src)\n\nu32 xgene_mdio_rd_mac(struct xgene_mdio_pdata *pdata, u32 rd_addr);\nvoid xgene_mdio_wr_mac(struct xgene_mdio_pdata *pdata, u32 wr_addr, u32 data);\nint xgene_mdio_rgmii_read(struct mii_bus *bus, int phy_id, int reg);\nint xgene_mdio_rgmii_write(struct mii_bus *bus, int phy_id, int reg, u16 data);\nstruct phy_device *xgene_enet_phy_register(struct mii_bus *bus, int phy_addr);\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}