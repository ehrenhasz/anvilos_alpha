{
  "module_name": "knav_dma.h",
  "hash_id": "b1c93551c44d8203f7fbde7d93a2336f62e21449aa8fed961c96d02e72487f27",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/soc/ti/knav_dma.h",
  "human_readable_source": " \n \n\n#ifndef __SOC_TI_KEYSTONE_NAVIGATOR_DMA_H__\n#define __SOC_TI_KEYSTONE_NAVIGATOR_DMA_H__\n\n#include <linux/dmaengine.h>\n\n \n#define MASK(x)\t\t\t\t\t(BIT(x) - 1)\n#define KNAV_DMA_DESC_PKT_LEN_MASK\t\tMASK(22)\n#define KNAV_DMA_DESC_PKT_LEN_SHIFT\t\t0\n#define KNAV_DMA_DESC_PS_INFO_IN_SOP\t\tBIT(22)\n#define KNAV_DMA_DESC_PS_INFO_IN_DESC\t\t0\n#define KNAV_DMA_DESC_TAG_MASK\t\t\tMASK(8)\n#define KNAV_DMA_DESC_SAG_HI_SHIFT\t\t24\n#define KNAV_DMA_DESC_STAG_LO_SHIFT\t\t16\n#define KNAV_DMA_DESC_DTAG_HI_SHIFT\t\t8\n#define KNAV_DMA_DESC_DTAG_LO_SHIFT\t\t0\n#define KNAV_DMA_DESC_HAS_EPIB\t\t\tBIT(31)\n#define KNAV_DMA_DESC_NO_EPIB\t\t\t0\n#define KNAV_DMA_DESC_PSLEN_SHIFT\t\t24\n#define KNAV_DMA_DESC_PSLEN_MASK\t\tMASK(6)\n#define KNAV_DMA_DESC_ERR_FLAG_SHIFT\t\t20\n#define KNAV_DMA_DESC_ERR_FLAG_MASK\t\tMASK(4)\n#define KNAV_DMA_DESC_PSFLAG_SHIFT\t\t16\n#define KNAV_DMA_DESC_PSFLAG_MASK\t\tMASK(4)\n#define KNAV_DMA_DESC_RETQ_SHIFT\t\t0\n#define KNAV_DMA_DESC_RETQ_MASK\t\t\tMASK(14)\n#define KNAV_DMA_DESC_BUF_LEN_MASK\t\tMASK(22)\n#define KNAV_DMA_DESC_EFLAGS_MASK\t\tMASK(4)\n#define KNAV_DMA_DESC_EFLAGS_SHIFT\t\t20\n\n#define KNAV_DMA_NUM_EPIB_WORDS\t\t\t4\n#define KNAV_DMA_NUM_PS_WORDS\t\t\t16\n#define KNAV_DMA_NUM_SW_DATA_WORDS\t\t4\n#define KNAV_DMA_FDQ_PER_CHAN\t\t\t4\n\n \nenum knav_dma_tx_priority {\n\tDMA_PRIO_HIGH\t= 0,\n\tDMA_PRIO_MED_H,\n\tDMA_PRIO_MED_L,\n\tDMA_PRIO_LOW\n};\n\n \nenum knav_dma_rx_err_mode {\n\tDMA_DROP = 0,\n\tDMA_RETRY\n};\n\n \nenum knav_dma_rx_thresholds {\n\tDMA_THRESH_NONE\t\t= 0,\n\tDMA_THRESH_0\t\t= 1,\n\tDMA_THRESH_0_1\t\t= 3,\n\tDMA_THRESH_0_1_2\t= 7\n};\n\n \nenum knav_dma_desc_type {\n\tDMA_DESC_HOST = 0,\n\tDMA_DESC_MONOLITHIC = 2\n};\n\n \nstruct knav_dma_tx_cfg {\n\tbool\t\t\t\tfilt_einfo;\n\tbool\t\t\t\tfilt_pswords;\n\tenum knav_dma_tx_priority\tpriority;\n};\n\n \nstruct knav_dma_rx_cfg {\n\tbool\t\t\t\teinfo_present;\n\tbool\t\t\t\tpsinfo_present;\n\tenum knav_dma_rx_err_mode\terr_mode;\n\tenum knav_dma_desc_type\t\tdesc_type;\n\tbool\t\t\t\tpsinfo_at_sop;\n\tunsigned int\t\t\tsop_offset;\n\tunsigned int\t\t\tdst_q;\n\tenum knav_dma_rx_thresholds\tthresh;\n\tunsigned int\t\t\tfdq[KNAV_DMA_FDQ_PER_CHAN];\n\tunsigned int\t\t\tsz_thresh0;\n\tunsigned int\t\t\tsz_thresh1;\n\tunsigned int\t\t\tsz_thresh2;\n};\n\n \nstruct knav_dma_cfg {\n\tenum dma_transfer_direction direction;\n\tunion {\n\t\tstruct knav_dma_tx_cfg\ttx;\n\t\tstruct knav_dma_rx_cfg\trx;\n\t} u;\n};\n\n \nstruct knav_dma_desc {\n\t__le32\tdesc_info;\n\t__le32\ttag_info;\n\t__le32\tpacket_info;\n\t__le32\tbuff_len;\n\t__le32\tbuff;\n\t__le32\tnext_desc;\n\t__le32\torig_len;\n\t__le32\torig_buff;\n\t__le32\tepib[KNAV_DMA_NUM_EPIB_WORDS];\n\t__le32\tpsdata[KNAV_DMA_NUM_PS_WORDS];\n\tu32\tsw_data[KNAV_DMA_NUM_SW_DATA_WORDS];\n} ____cacheline_aligned;\n\n#if IS_ENABLED(CONFIG_KEYSTONE_NAVIGATOR_DMA)\nvoid *knav_dma_open_channel(struct device *dev, const char *name,\n\t\t\t\tstruct knav_dma_cfg *config);\nvoid knav_dma_close_channel(void *channel);\nint knav_dma_get_flow(void *channel);\nbool knav_dma_device_ready(void);\n#else\nstatic inline void *knav_dma_open_channel(struct device *dev, const char *name,\n\t\t\t\tstruct knav_dma_cfg *config)\n{\n\treturn (void *) NULL;\n}\nstatic inline void knav_dma_close_channel(void *channel)\n{}\n\nstatic inline int knav_dma_get_flow(void *channel)\n{\n\treturn -EINVAL;\n}\n\nstatic inline bool knav_dma_device_ready(void)\n{\n\treturn false;\n}\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}