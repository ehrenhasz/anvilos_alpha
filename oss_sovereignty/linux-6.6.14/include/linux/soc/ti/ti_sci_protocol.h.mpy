{
  "module_name": "ti_sci_protocol.h",
  "hash_id": "7494758721e72007bdcc22fa559da9a6eaf2a6fb8623902887114000acffc177",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/soc/ti/ti_sci_protocol.h",
  "human_readable_source": "\n \n\n#ifndef __TISCI_PROTOCOL_H\n#define __TISCI_PROTOCOL_H\n\n \nstruct ti_sci_version_info {\n\tu8 abi_major;\n\tu8 abi_minor;\n\tu16 firmware_revision;\n\tchar firmware_description[32];\n};\n\nstruct ti_sci_handle;\n\n \nstruct ti_sci_core_ops {\n\tint (*reboot_device)(const struct ti_sci_handle *handle);\n};\n\n \nstruct ti_sci_dev_ops {\n\tint (*get_device)(const struct ti_sci_handle *handle, u32 id);\n\tint (*get_device_exclusive)(const struct ti_sci_handle *handle, u32 id);\n\tint (*idle_device)(const struct ti_sci_handle *handle, u32 id);\n\tint (*idle_device_exclusive)(const struct ti_sci_handle *handle,\n\t\t\t\t     u32 id);\n\tint (*put_device)(const struct ti_sci_handle *handle, u32 id);\n\tint (*is_valid)(const struct ti_sci_handle *handle, u32 id);\n\tint (*get_context_loss_count)(const struct ti_sci_handle *handle,\n\t\t\t\t      u32 id, u32 *count);\n\tint (*is_idle)(const struct ti_sci_handle *handle, u32 id,\n\t\t       bool *requested_state);\n\tint (*is_stop)(const struct ti_sci_handle *handle, u32 id,\n\t\t       bool *req_state, bool *current_state);\n\tint (*is_on)(const struct ti_sci_handle *handle, u32 id,\n\t\t     bool *req_state, bool *current_state);\n\tint (*is_transitioning)(const struct ti_sci_handle *handle, u32 id,\n\t\t\t\tbool *current_state);\n\tint (*set_device_resets)(const struct ti_sci_handle *handle, u32 id,\n\t\t\t\t u32 reset_state);\n\tint (*get_device_resets)(const struct ti_sci_handle *handle, u32 id,\n\t\t\t\t u32 *reset_state);\n};\n\n \nstruct ti_sci_clk_ops {\n\tint (*get_clock)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t\t bool needs_ssc, bool can_change_freq,\n\t\t\t bool enable_input_term);\n\tint (*idle_clock)(const struct ti_sci_handle *handle, u32 did, u32 cid);\n\tint (*put_clock)(const struct ti_sci_handle *handle, u32 did, u32 cid);\n\tint (*is_auto)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t       bool *req_state);\n\tint (*is_on)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t     bool *req_state, bool *current_state);\n\tint (*is_off)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t      bool *req_state, bool *current_state);\n\tint (*set_parent)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t\t  u32 parent_id);\n\tint (*get_parent)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t\t  u32 *parent_id);\n\tint (*get_num_parents)(const struct ti_sci_handle *handle, u32 did,\n\t\t\t       u32 cid, u32 *num_parents);\n\tint (*get_best_match_freq)(const struct ti_sci_handle *handle, u32 did,\n\t\t\t\t   u32 cid, u64 min_freq, u64 target_freq,\n\t\t\t\t   u64 max_freq, u64 *match_freq);\n\tint (*set_freq)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t\tu64 min_freq, u64 target_freq, u64 max_freq);\n\tint (*get_freq)(const struct ti_sci_handle *handle, u32 did, u32 cid,\n\t\t\tu64 *current_freq);\n};\n\n \nstruct ti_sci_resource_desc {\n\tu16 start;\n\tu16 num;\n\tu16 start_sec;\n\tu16 num_sec;\n\tunsigned long *res_map;\n};\n\n \nstruct ti_sci_rm_core_ops {\n\tint (*get_range)(const struct ti_sci_handle *handle, u32 dev_id,\n\t\t\t u8 subtype, struct ti_sci_resource_desc *desc);\n\tint (*get_range_from_shost)(const struct ti_sci_handle *handle,\n\t\t\t\t    u32 dev_id, u8 subtype, u8 s_host,\n\t\t\t\t    struct ti_sci_resource_desc *desc);\n};\n\n#define TI_SCI_RESASG_SUBTYPE_IR_OUTPUT\t\t0\n#define TI_SCI_RESASG_SUBTYPE_IA_VINT\t\t0xa\n#define TI_SCI_RESASG_SUBTYPE_GLOBAL_EVENT_SEVT\t0xd\n \nstruct ti_sci_rm_irq_ops {\n\tint (*set_irq)(const struct ti_sci_handle *handle, u16 src_id,\n\t\t       u16 src_index, u16 dst_id, u16 dst_host_irq);\n\tint (*set_event_map)(const struct ti_sci_handle *handle, u16 src_id,\n\t\t\t     u16 src_index, u16 ia_id, u16 vint,\n\t\t\t     u16 global_event, u8 vint_status_bit);\n\tint (*free_irq)(const struct ti_sci_handle *handle, u16 src_id,\n\t\t\tu16 src_index, u16 dst_id, u16 dst_host_irq);\n\tint (*free_event_map)(const struct ti_sci_handle *handle, u16 src_id,\n\t\t\t      u16 src_index, u16 ia_id, u16 vint,\n\t\t\t      u16 global_event, u8 vint_status_bit);\n};\n\n \n#define TI_SCI_MSG_VALUE_RM_RING_ADDR_LO_VALID\tBIT(0)\n \n#define TI_SCI_MSG_VALUE_RM_RING_ADDR_HI_VALID\tBIT(1)\n  \n#define TI_SCI_MSG_VALUE_RM_RING_COUNT_VALID\tBIT(2)\n \n#define TI_SCI_MSG_VALUE_RM_RING_MODE_VALID\tBIT(3)\n \n#define TI_SCI_MSG_VALUE_RM_RING_SIZE_VALID\tBIT(4)\n \n#define TI_SCI_MSG_VALUE_RM_RING_ORDER_ID_VALID\tBIT(5)\n \n#define TI_SCI_MSG_VALUE_RM_RING_VIRTID_VALID\tBIT(6)\n \n#define TI_SCI_MSG_VALUE_RM_RING_ASEL_VALID\tBIT(7)\n\n#define TI_SCI_MSG_VALUE_RM_ALL_NO_ORDER \\\n\t(TI_SCI_MSG_VALUE_RM_RING_ADDR_LO_VALID | \\\n\tTI_SCI_MSG_VALUE_RM_RING_ADDR_HI_VALID | \\\n\tTI_SCI_MSG_VALUE_RM_RING_COUNT_VALID | \\\n\tTI_SCI_MSG_VALUE_RM_RING_MODE_VALID | \\\n\tTI_SCI_MSG_VALUE_RM_RING_SIZE_VALID | \\\n\tTI_SCI_MSG_VALUE_RM_RING_ASEL_VALID)\n\n \nstruct ti_sci_msg_rm_ring_cfg {\n\tu32 valid_params;\n\tu16 nav_id;\n\tu16 index;\n\tu32 addr_lo;\n\tu32 addr_hi;\n\tu32 count;\n\tu8 mode;\n\tu8 size;\n\tu8 order_id;\n\tu16 virtid;\n\tu8 asel;\n};\n\n \nstruct ti_sci_rm_ringacc_ops {\n\tint (*set_cfg)(const struct ti_sci_handle *handle,\n\t\t       const struct ti_sci_msg_rm_ring_cfg *params);\n};\n\n \nstruct ti_sci_rm_psil_ops {\n\tint (*pair)(const struct ti_sci_handle *handle, u32 nav_id,\n\t\t    u32 src_thread, u32 dst_thread);\n\tint (*unpair)(const struct ti_sci_handle *handle, u32 nav_id,\n\t\t      u32 src_thread, u32 dst_thread);\n};\n\n \n#define TI_SCI_RM_UDMAP_CHAN_TYPE_PKT_PBRR\t\t2\n#define TI_SCI_RM_UDMAP_CHAN_TYPE_PKT_PBRR_SB\t\t3\t \n#define TI_SCI_RM_UDMAP_CHAN_TYPE_3RDP_PBRR\t\t10\n#define TI_SCI_RM_UDMAP_CHAN_TYPE_3RDP_PBVR\t\t11\n#define TI_SCI_RM_UDMAP_CHAN_TYPE_3RDP_BCOPY_PBRR\t12\n#define TI_SCI_RM_UDMAP_CHAN_TYPE_3RDP_BCOPY_PBVR\t13\n\n#define TI_SCI_RM_UDMAP_RX_FLOW_DESC_HOST\t\t0\n#define TI_SCI_RM_UDMAP_RX_FLOW_DESC_MONO\t\t2\n\n#define TI_SCI_RM_UDMAP_CHAN_BURST_SIZE_64_BYTES\t1\n#define TI_SCI_RM_UDMAP_CHAN_BURST_SIZE_128_BYTES\t2\n#define TI_SCI_RM_UDMAP_CHAN_BURST_SIZE_256_BYTES\t3\n\n#define TI_SCI_RM_BCDMA_EXTENDED_CH_TYPE_TCHAN\t\t0\n#define TI_SCI_RM_BCDMA_EXTENDED_CH_TYPE_BCHAN\t\t1\n\n \n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_PAUSE_ON_ERR_VALID\t\tBIT(0)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_ATYPE_VALID                BIT(1)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_CHAN_TYPE_VALID            BIT(2)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_FETCH_SIZE_VALID           BIT(3)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_CQ_QNUM_VALID              BIT(4)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_PRIORITY_VALID             BIT(5)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_QOS_VALID                  BIT(6)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_ORDER_ID_VALID             BIT(7)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_SCHED_PRIORITY_VALID       BIT(8)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_BURST_SIZE_VALID\t\tBIT(14)\n\n \nstruct ti_sci_msg_rm_udmap_tx_ch_cfg {\n\tu32 valid_params;\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_FILT_EINFO_VALID        BIT(9)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_FILT_PSWORDS_VALID      BIT(10)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_SUPR_TDPKT_VALID        BIT(11)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_CREDIT_COUNT_VALID      BIT(12)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_FDEPTH_VALID            BIT(13)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_TX_TDTYPE_VALID            BIT(15)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_EXTENDED_CH_TYPE_VALID\tBIT(16)\n\tu16 nav_id;\n\tu16 index;\n\tu8 tx_pause_on_err;\n\tu8 tx_filt_einfo;\n\tu8 tx_filt_pswords;\n\tu8 tx_atype;\n\tu8 tx_chan_type;\n\tu8 tx_supr_tdpkt;\n\tu16 tx_fetch_size;\n\tu8 tx_credit_count;\n\tu16 txcq_qnum;\n\tu8 tx_priority;\n\tu8 tx_qos;\n\tu8 tx_orderid;\n\tu16 fdepth;\n\tu8 tx_sched_priority;\n\tu8 tx_burst_size;\n\tu8 tx_tdtype;\n\tu8 extended_ch_type;\n};\n\n \nstruct ti_sci_msg_rm_udmap_rx_ch_cfg {\n\tu32 valid_params;\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_RX_FLOWID_START_VALID      BIT(9)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_RX_FLOWID_CNT_VALID        BIT(10)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_RX_IGNORE_SHORT_VALID      BIT(11)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_CH_RX_IGNORE_LONG_VALID       BIT(12)\n\tu16 nav_id;\n\tu16 index;\n\tu16 rx_fetch_size;\n\tu16 rxcq_qnum;\n\tu8 rx_priority;\n\tu8 rx_qos;\n\tu8 rx_orderid;\n\tu8 rx_sched_priority;\n\tu16 flowid_start;\n\tu16 flowid_cnt;\n\tu8 rx_pause_on_err;\n\tu8 rx_atype;\n\tu8 rx_chan_type;\n\tu8 rx_ignore_short;\n\tu8 rx_ignore_long;\n\tu8 rx_burst_size;\n};\n\n \nstruct ti_sci_msg_rm_udmap_flow_cfg {\n\tu32 valid_params;\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_EINFO_PRESENT_VALID\tBIT(0)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_PSINFO_PRESENT_VALID     BIT(1)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_ERROR_HANDLING_VALID     BIT(2)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DESC_TYPE_VALID          BIT(3)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_SOP_OFFSET_VALID         BIT(4)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DEST_QNUM_VALID          BIT(5)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_SRC_TAG_HI_VALID         BIT(6)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_SRC_TAG_LO_VALID         BIT(7)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DEST_TAG_HI_VALID        BIT(8)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DEST_TAG_LO_VALID        BIT(9)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_SRC_TAG_HI_SEL_VALID     BIT(10)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_SRC_TAG_LO_SEL_VALID     BIT(11)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DEST_TAG_HI_SEL_VALID    BIT(12)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_DEST_TAG_LO_SEL_VALID    BIT(13)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_FDQ0_SZ0_QNUM_VALID      BIT(14)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_FDQ1_QNUM_VALID          BIT(15)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_FDQ2_QNUM_VALID          BIT(16)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_FDQ3_QNUM_VALID          BIT(17)\n#define TI_SCI_MSG_VALUE_RM_UDMAP_FLOW_PS_LOCATION_VALID        BIT(18)\n\tu16 nav_id;\n\tu16 flow_index;\n\tu8 rx_einfo_present;\n\tu8 rx_psinfo_present;\n\tu8 rx_error_handling;\n\tu8 rx_desc_type;\n\tu16 rx_sop_offset;\n\tu16 rx_dest_qnum;\n\tu8 rx_src_tag_hi;\n\tu8 rx_src_tag_lo;\n\tu8 rx_dest_tag_hi;\n\tu8 rx_dest_tag_lo;\n\tu8 rx_src_tag_hi_sel;\n\tu8 rx_src_tag_lo_sel;\n\tu8 rx_dest_tag_hi_sel;\n\tu8 rx_dest_tag_lo_sel;\n\tu16 rx_fdq0_sz0_qnum;\n\tu16 rx_fdq1_qnum;\n\tu16 rx_fdq2_qnum;\n\tu16 rx_fdq3_qnum;\n\tu8 rx_ps_location;\n};\n\n \nstruct ti_sci_rm_udmap_ops {\n\tint (*tx_ch_cfg)(const struct ti_sci_handle *handle,\n\t\t\t const struct ti_sci_msg_rm_udmap_tx_ch_cfg *params);\n\tint (*rx_ch_cfg)(const struct ti_sci_handle *handle,\n\t\t\t const struct ti_sci_msg_rm_udmap_rx_ch_cfg *params);\n\tint (*rx_flow_cfg)(const struct ti_sci_handle *handle,\n\t\t\t   const struct ti_sci_msg_rm_udmap_flow_cfg *params);\n};\n\n \nstruct ti_sci_proc_ops {\n\tint (*request)(const struct ti_sci_handle *handle, u8 pid);\n\tint (*release)(const struct ti_sci_handle *handle, u8 pid);\n\tint (*handover)(const struct ti_sci_handle *handle, u8 pid, u8 hid);\n\tint (*set_config)(const struct ti_sci_handle *handle, u8 pid,\n\t\t\t  u64 boot_vector, u32 cfg_set, u32 cfg_clr);\n\tint (*set_control)(const struct ti_sci_handle *handle, u8 pid,\n\t\t\t   u32 ctrl_set, u32 ctrl_clr);\n\tint (*get_status)(const struct ti_sci_handle *handle, u8 pid,\n\t\t\t  u64 *boot_vector, u32 *cfg_flags, u32 *ctrl_flags,\n\t\t\t  u32 *status_flags);\n};\n\n \nstruct ti_sci_ops {\n\tstruct ti_sci_core_ops core_ops;\n\tstruct ti_sci_dev_ops dev_ops;\n\tstruct ti_sci_clk_ops clk_ops;\n\tstruct ti_sci_rm_core_ops rm_core_ops;\n\tstruct ti_sci_rm_irq_ops rm_irq_ops;\n\tstruct ti_sci_rm_ringacc_ops rm_ring_ops;\n\tstruct ti_sci_rm_psil_ops rm_psil_ops;\n\tstruct ti_sci_rm_udmap_ops rm_udmap_ops;\n\tstruct ti_sci_proc_ops proc_ops;\n};\n\n \nstruct ti_sci_handle {\n\tstruct ti_sci_version_info version;\n\tstruct ti_sci_ops ops;\n};\n\n#define TI_SCI_RESOURCE_NULL\t0xffff\n\n \nstruct ti_sci_resource {\n\tu16 sets;\n\traw_spinlock_t lock;\n\tstruct ti_sci_resource_desc *desc;\n};\n\n#if IS_ENABLED(CONFIG_TI_SCI_PROTOCOL)\nconst struct ti_sci_handle *ti_sci_get_handle(struct device *dev);\nint ti_sci_put_handle(const struct ti_sci_handle *handle);\nconst struct ti_sci_handle *devm_ti_sci_get_handle(struct device *dev);\nconst struct ti_sci_handle *ti_sci_get_by_phandle(struct device_node *np,\n\t\t\t\t\t\t  const char *property);\nconst struct ti_sci_handle *devm_ti_sci_get_by_phandle(struct device *dev,\n\t\t\t\t\t\t       const char *property);\nu16 ti_sci_get_free_resource(struct ti_sci_resource *res);\nvoid ti_sci_release_resource(struct ti_sci_resource *res, u16 id);\nu32 ti_sci_get_num_resources(struct ti_sci_resource *res);\nstruct ti_sci_resource *\ndevm_ti_sci_get_of_resource(const struct ti_sci_handle *handle,\n\t\t\t    struct device *dev, u32 dev_id, char *of_prop);\nstruct ti_sci_resource *\ndevm_ti_sci_get_resource(const struct ti_sci_handle *handle, struct device *dev,\n\t\t\t u32 dev_id, u32 sub_type);\n\n#else\t \n\nstatic inline const struct ti_sci_handle *ti_sci_get_handle(struct device *dev)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline int ti_sci_put_handle(const struct ti_sci_handle *handle)\n{\n\treturn -EINVAL;\n}\n\nstatic inline\nconst struct ti_sci_handle *devm_ti_sci_get_handle(struct device *dev)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline\nconst struct ti_sci_handle *ti_sci_get_by_phandle(struct device_node *np,\n\t\t\t\t\t\t  const char *property)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline\nconst struct ti_sci_handle *devm_ti_sci_get_by_phandle(struct device *dev,\n\t\t\t\t\t\t       const char *property)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline u16 ti_sci_get_free_resource(struct ti_sci_resource *res)\n{\n\treturn TI_SCI_RESOURCE_NULL;\n}\n\nstatic inline void ti_sci_release_resource(struct ti_sci_resource *res, u16 id)\n{\n}\n\nstatic inline u32 ti_sci_get_num_resources(struct ti_sci_resource *res)\n{\n\treturn 0;\n}\n\nstatic inline struct ti_sci_resource *\ndevm_ti_sci_get_of_resource(const struct ti_sci_handle *handle,\n\t\t\t    struct device *dev, u32 dev_id, char *of_prop)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline struct ti_sci_resource *\ndevm_ti_sci_get_resource(const struct ti_sci_handle *handle, struct device *dev,\n\t\t\t u32 dev_id, u32 sub_type)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n#endif\t \n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}