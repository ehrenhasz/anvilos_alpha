{
  "module_name": "mtk-cmdq.h",
  "hash_id": "869b25486d8d249fc7678fb857418387d7bf4254aa20065771d88bdadb0ce5af",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/soc/mediatek/mtk-cmdq.h",
  "human_readable_source": " \n \n\n#ifndef __MTK_CMDQ_H__\n#define __MTK_CMDQ_H__\n\n#include <linux/mailbox_client.h>\n#include <linux/mailbox/mtk-cmdq-mailbox.h>\n#include <linux/timer.h>\n\n#define CMDQ_ADDR_HIGH(addr)\t((u32)(((addr) >> 16) & GENMASK(31, 0)))\n#define CMDQ_ADDR_LOW(addr)\t((u16)(addr) | BIT(1))\n\nstruct cmdq_pkt;\n\nstruct cmdq_client_reg {\n\tu8 subsys;\n\tu16 offset;\n\tu16 size;\n};\n\nstruct cmdq_client {\n\tstruct mbox_client client;\n\tstruct mbox_chan *chan;\n};\n\n#if IS_ENABLED(CONFIG_MTK_CMDQ)\n\n \nint cmdq_dev_get_client_reg(struct device *dev,\n\t\t\t    struct cmdq_client_reg *client_reg, int idx);\n\n \nstruct cmdq_client *cmdq_mbox_create(struct device *dev, int index);\n\n \nvoid cmdq_mbox_destroy(struct cmdq_client *client);\n\n \nstruct cmdq_pkt *cmdq_pkt_create(struct cmdq_client *client, size_t size);\n\n \nvoid cmdq_pkt_destroy(struct cmdq_pkt *pkt);\n\n \nint cmdq_pkt_write(struct cmdq_pkt *pkt, u8 subsys, u16 offset, u32 value);\n\n \nint cmdq_pkt_write_mask(struct cmdq_pkt *pkt, u8 subsys,\n\t\t\tu16 offset, u32 value, u32 mask);\n\n \nint cmdq_pkt_read_s(struct cmdq_pkt *pkt, u16 high_addr_reg_idx, u16 addr_low,\n\t\t    u16 reg_idx);\n\n \nint cmdq_pkt_write_s(struct cmdq_pkt *pkt, u16 high_addr_reg_idx,\n\t\t     u16 addr_low, u16 src_reg_idx);\n\n \nint cmdq_pkt_write_s_mask(struct cmdq_pkt *pkt, u16 high_addr_reg_idx,\n\t\t\t  u16 addr_low, u16 src_reg_idx, u32 mask);\n\n \nint cmdq_pkt_write_s_value(struct cmdq_pkt *pkt, u8 high_addr_reg_idx,\n\t\t\t   u16 addr_low, u32 value);\n\n \nint cmdq_pkt_write_s_mask_value(struct cmdq_pkt *pkt, u8 high_addr_reg_idx,\n\t\t\t\tu16 addr_low, u32 value, u32 mask);\n\n \nint cmdq_pkt_wfe(struct cmdq_pkt *pkt, u16 event, bool clear);\n\n \nint cmdq_pkt_clear_event(struct cmdq_pkt *pkt, u16 event);\n\n \nint cmdq_pkt_set_event(struct cmdq_pkt *pkt, u16 event);\n\n \nint cmdq_pkt_poll(struct cmdq_pkt *pkt, u8 subsys,\n\t\t  u16 offset, u32 value);\n\n \nint cmdq_pkt_poll_mask(struct cmdq_pkt *pkt, u8 subsys,\n\t\t       u16 offset, u32 value, u32 mask);\n\n \nint cmdq_pkt_assign(struct cmdq_pkt *pkt, u16 reg_idx, u32 value);\n\n \nint cmdq_pkt_jump(struct cmdq_pkt *pkt, dma_addr_t addr);\n\n \nint cmdq_pkt_finalize(struct cmdq_pkt *pkt);\n\n \nint cmdq_pkt_flush_async(struct cmdq_pkt *pkt);\n\n#else  \n\nstatic inline int cmdq_dev_get_client_reg(struct device *dev,\n\t\t\t\t\t  struct cmdq_client_reg *client_reg, int idx)\n{\n\treturn -ENODEV;\n}\n\nstatic inline struct cmdq_client *cmdq_mbox_create(struct device *dev, int index)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline void cmdq_mbox_destroy(struct cmdq_client *client) { }\n\nstatic inline  struct cmdq_pkt *cmdq_pkt_create(struct cmdq_client *client, size_t size)\n{\n\treturn ERR_PTR(-EINVAL);\n}\n\nstatic inline void cmdq_pkt_destroy(struct cmdq_pkt *pkt) { }\n\nstatic inline int cmdq_pkt_write(struct cmdq_pkt *pkt, u8 subsys, u16 offset, u32 value)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_write_mask(struct cmdq_pkt *pkt, u8 subsys,\n\t\t\t\t      u16 offset, u32 value, u32 mask)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_read_s(struct cmdq_pkt *pkt, u16 high_addr_reg_idx,\n\t\t\t\t  u16 addr_low, u16 reg_idx)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_write_s(struct cmdq_pkt *pkt, u16 high_addr_reg_idx,\n\t\t\t\t   u16 addr_low, u16 src_reg_idx)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_write_s_mask(struct cmdq_pkt *pkt, u16 high_addr_reg_idx,\n\t\t\t\t\tu16 addr_low, u16 src_reg_idx, u32 mask)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_write_s_value(struct cmdq_pkt *pkt, u8 high_addr_reg_idx,\n\t\t\t\t\t u16 addr_low, u32 value)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_write_s_mask_value(struct cmdq_pkt *pkt, u8 high_addr_reg_idx,\n\t\t\t\t\t      u16 addr_low, u32 value, u32 mask)\n{\n\treturn -ENOENT;\n}\n\nstatic inline int cmdq_pkt_wfe(struct cmdq_pkt *pkt, u16 event, bool clear)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_clear_event(struct cmdq_pkt *pkt, u16 event)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_set_event(struct cmdq_pkt *pkt, u16 event)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_poll(struct cmdq_pkt *pkt, u8 subsys,\n\t\t\t\tu16 offset, u32 value)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_poll_mask(struct cmdq_pkt *pkt, u8 subsys,\n\t\t\t\t     u16 offset, u32 value, u32 mask)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_assign(struct cmdq_pkt *pkt, u16 reg_idx, u32 value)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_jump(struct cmdq_pkt *pkt, dma_addr_t addr)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_finalize(struct cmdq_pkt *pkt)\n{\n\treturn -EINVAL;\n}\n\nstatic inline int cmdq_pkt_flush_async(struct cmdq_pkt *pkt)\n{\n\treturn -EINVAL;\n}\n\n#endif  \n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}