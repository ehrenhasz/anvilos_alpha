{
  "module_name": "sdw_intel.h",
  "hash_id": "14890b94ab860a0e60391fa1644b80a7fe0ea76a4e9a898e52168d2288671290",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/soundwire/sdw_intel.h",
  "human_readable_source": " \n \n\n#ifndef __SDW_INTEL_H\n#define __SDW_INTEL_H\n\n#include <linux/irqreturn.h>\n#include <linux/soundwire/sdw.h>\n\n \n\n#define SDW_SHIM_BASE\t\t\t0x2C000\n#define SDW_ALH_BASE\t\t\t0x2C800\n#define SDW_SHIM_BASE_ACE\t\t0x38000\n#define SDW_ALH_BASE_ACE\t\t0x24000\n#define SDW_LINK_BASE\t\t\t0x30000\n#define SDW_LINK_SIZE\t\t\t0x10000\n\n \n \n#define SDW_SHIM_LCAP\t\t\t0x0\n#define SDW_SHIM_LCAP_LCOUNT_MASK\tGENMASK(2, 0)\n\n \n#define SDW_SHIM_LCTL\t\t\t0x4\n\n#define SDW_SHIM_LCTL_SPA\t\tBIT(0)\n#define SDW_SHIM_LCTL_SPA_MASK\t\tGENMASK(3, 0)\n#define SDW_SHIM_LCTL_CPA\t\tBIT(8)\n#define SDW_SHIM_LCTL_CPA_MASK\t\tGENMASK(11, 8)\n\n \n#define SDW_SHIM_SYNC\t\t\t0xC\n\n#define SDW_SHIM_SYNC_SYNCPRD_VAL_24\t(24000 / SDW_CADENCE_GSYNC_KHZ - 1)\n#define SDW_SHIM_SYNC_SYNCPRD_VAL_38_4\t(38400 / SDW_CADENCE_GSYNC_KHZ - 1)\n#define SDW_SHIM_SYNC_SYNCPRD\t\tGENMASK(14, 0)\n#define SDW_SHIM_SYNC_SYNCCPU\t\tBIT(15)\n#define SDW_SHIM_SYNC_CMDSYNC_MASK\tGENMASK(19, 16)\n#define SDW_SHIM_SYNC_CMDSYNC\t\tBIT(16)\n#define SDW_SHIM_SYNC_SYNCGO\t\tBIT(24)\n\n \n#define SDW_SHIM_CTLSCAP(x)\t\t(0x010 + 0x60 * (x))\n#define SDW_SHIM_CTLS0CM(x)\t\t(0x012 + 0x60 * (x))\n#define SDW_SHIM_CTLS1CM(x)\t\t(0x014 + 0x60 * (x))\n#define SDW_SHIM_CTLS2CM(x)\t\t(0x016 + 0x60 * (x))\n#define SDW_SHIM_CTLS3CM(x)\t\t(0x018 + 0x60 * (x))\n\n \n#define SDW_SHIM_PCMSCAP(x)\t\t(0x020 + 0x60 * (x))\n\n#define SDW_SHIM_PCMSCAP_ISS\t\tGENMASK(3, 0)\n#define SDW_SHIM_PCMSCAP_OSS\t\tGENMASK(7, 4)\n#define SDW_SHIM_PCMSCAP_BSS\t\tGENMASK(12, 8)\n\n \n#define SDW_SHIM_PCMSYCHM(x, y)\t\t(0x022 + (0x60 * (x)) + (0x2 * (y)))\n\n \n#define SDW_SHIM_PCMSYCHC(x, y)\t\t(0x042 + (0x60 * (x)) + (0x2 * (y)))\n\n#define SDW_SHIM_PCMSYCM_LCHN\t\tGENMASK(3, 0)\n#define SDW_SHIM_PCMSYCM_HCHN\t\tGENMASK(7, 4)\n#define SDW_SHIM_PCMSYCM_STREAM\t\tGENMASK(13, 8)\n#define SDW_SHIM_PCMSYCM_DIR\t\tBIT(15)\n\n \n#define SDW_SHIM_IOCTL(x)\t\t(0x06C + 0x60 * (x))\n\n#define SDW_SHIM_IOCTL_MIF\t\tBIT(0)\n#define SDW_SHIM_IOCTL_CO\t\tBIT(1)\n#define SDW_SHIM_IOCTL_COE\t\tBIT(2)\n#define SDW_SHIM_IOCTL_DO\t\tBIT(3)\n#define SDW_SHIM_IOCTL_DOE\t\tBIT(4)\n#define SDW_SHIM_IOCTL_BKE\t\tBIT(5)\n#define SDW_SHIM_IOCTL_WPDD\t\tBIT(6)\n#define SDW_SHIM_IOCTL_CIBD\t\tBIT(8)\n#define SDW_SHIM_IOCTL_DIBD\t\tBIT(9)\n\n \n#define SDW_SHIM_WAKEEN\t\t\t0x190\n\n#define SDW_SHIM_WAKEEN_ENABLE\t\tBIT(0)\n\n \n#define SDW_SHIM_WAKESTS\t\t0x192\n\n#define SDW_SHIM_WAKESTS_STATUS\t\tBIT(0)\n\n \n#define SDW_SHIM_CTMCTL(x)\t\t(0x06E + 0x60 * (x))\n\n#define SDW_SHIM_CTMCTL_DACTQE\t\tBIT(0)\n#define SDW_SHIM_CTMCTL_DODS\t\tBIT(1)\n#define SDW_SHIM_CTMCTL_DOAIS\t\tGENMASK(4, 3)\n\n \n#define SDW_ALH_STRMZCFG(x)\t\t(0x000 + (0x4 * (x)))\n#define SDW_ALH_NUM_STREAMS\t\t64\n\n#define SDW_ALH_STRMZCFG_DMAT_VAL\t0x3\n#define SDW_ALH_STRMZCFG_DMAT\t\tGENMASK(7, 0)\n#define SDW_ALH_STRMZCFG_CHN\t\tGENMASK(19, 16)\n\n \n \n#define SDW_SHIM2_GENERIC_BASE(x)\t(0x00030000 + 0x8000 * (x))\n#define SDW_IP_BASE(x)\t\t\t(0x00030100 + 0x8000 * (x))\n#define SDW_SHIM2_VS_BASE(x)\t\t(0x00036000 + 0x8000 * (x))\n\n \n \n#define SDW_SHIM2_LECAP\t\t\t0x00\n#define SDW_SHIM2_LECAP_HDS\t\tBIT(0)\t\t \n#define SDW_SHIM2_LECAP_MLC\t\tGENMASK(3, 1)\t \n\n \n#define SDW_SHIM2_PCMSCAP\t\t0x10\n#define SDW_SHIM2_PCMSCAP_ISS\t\tGENMASK(3, 0)\t \n#define SDW_SHIM2_PCMSCAP_OSS\t\tGENMASK(7, 4)\t \n#define SDW_SHIM2_PCMSCAP_BSS\t\tGENMASK(12, 8)\t \n\n \n#define SDW_SHIM2_PCMSYCHC(y)\t\t(0x14 + (0x4 * (y)))\n#define SDW_SHIM2_PCMSYCHC_CS\t\tGENMASK(3, 0)\t \n\n \n#define SDW_SHIM2_PCMSYCHM(y)\t\t(0x16 + (0x4 * (y)))\n#define SDW_SHIM2_PCMSYCHM_LCHAN\tGENMASK(3, 0)\t \n#define SDW_SHIM2_PCMSYCHM_HCHAN\tGENMASK(7, 4)\t \n#define SDW_SHIM2_PCMSYCHM_STRM\t\tGENMASK(13, 8)\t \n#define SDW_SHIM2_PCMSYCHM_DIR\t\tBIT(15)\t\t \n\n \n#define SDW_SHIM2_INTEL_VS_LVSCTL\t0x04\n#define SDW_SHIM2_INTEL_VS_LVSCTL_FCG\tBIT(26)\n#define SDW_SHIM2_INTEL_VS_LVSCTL_MLCS\tGENMASK(29, 27)\n#define SDW_SHIM2_INTEL_VS_LVSCTL_DCGD\tBIT(30)\n#define SDW_SHIM2_INTEL_VS_LVSCTL_ICGD\tBIT(31)\n\n#define SDW_SHIM2_MLCS_XTAL_CLK\t\t0x0\n#define SDW_SHIM2_MLCS_CARDINAL_CLK\t0x1\n#define SDW_SHIM2_MLCS_AUDIO_PLL_CLK\t0x2\n#define SDW_SHIM2_MLCS_MCLK_INPUT_CLK\t0x3\n#define SDW_SHIM2_MLCS_WOV_RING_OSC_CLK 0x4\n\n#define SDW_SHIM2_INTEL_VS_WAKEEN\t0x08\n#define SDW_SHIM2_INTEL_VS_WAKEEN_PWE\tBIT(0)\n\n#define SDW_SHIM2_INTEL_VS_WAKESTS\t0x0A\n#define SDW_SHIM2_INTEL_VS_WAKEEN_PWS\tBIT(0)\n\n#define SDW_SHIM2_INTEL_VS_IOCTL\t0x0C\n#define SDW_SHIM2_INTEL_VS_IOCTL_MIF\tBIT(0)\n#define SDW_SHIM2_INTEL_VS_IOCTL_CO\tBIT(1)\n#define SDW_SHIM2_INTEL_VS_IOCTL_COE\tBIT(2)\n#define SDW_SHIM2_INTEL_VS_IOCTL_DO\tBIT(3)\n#define SDW_SHIM2_INTEL_VS_IOCTL_DOE\tBIT(4)\n#define SDW_SHIM2_INTEL_VS_IOCTL_BKE\tBIT(5)\n#define SDW_SHIM2_INTEL_VS_IOCTL_WPDD\tBIT(6)\n#define SDW_SHIM2_INTEL_VS_IOCTL_ODC\tBIT(7)\n#define SDW_SHIM2_INTEL_VS_IOCTL_CIBD\tBIT(8)\n#define SDW_SHIM2_INTEL_VS_IOCTL_DIBD\tBIT(9)\n#define SDW_SHIM2_INTEL_VS_IOCTL_HAMIFD\tBIT(10)\n\n#define SDW_SHIM2_INTEL_VS_ACTMCTL\t0x0E\n#define SDW_SHIM2_INTEL_VS_ACTMCTL_DACTQE\tBIT(0)\n#define SDW_SHIM2_INTEL_VS_ACTMCTL_DODS\t\tBIT(1)\n#define SDW_SHIM2_INTEL_VS_ACTMCTL_DODSE\tBIT(2)\n#define SDW_SHIM2_INTEL_VS_ACTMCTL_DOAIS\tGENMASK(4, 3)\n#define SDW_SHIM2_INTEL_VS_ACTMCTL_DOAISE\tBIT(5)\n\n \nstruct sdw_intel_stream_params_data {\n\tstruct snd_pcm_substream *substream;\n\tstruct snd_soc_dai *dai;\n\tstruct snd_pcm_hw_params *hw_params;\n\tint link_id;\n\tint alh_stream_id;\n};\n\n \nstruct sdw_intel_stream_free_data {\n\tstruct snd_pcm_substream *substream;\n\tstruct snd_soc_dai *dai;\n\tint link_id;\n};\n\n \nstruct sdw_intel_ops {\n\tint (*params_stream)(struct device *dev,\n\t\t\t     struct sdw_intel_stream_params_data *params_data);\n\tint (*free_stream)(struct device *dev,\n\t\t\t   struct sdw_intel_stream_free_data *free_data);\n\tint (*trigger)(struct snd_pcm_substream *substream, int cmd, struct snd_soc_dai *dai);\n};\n\n \nstruct sdw_intel_acpi_info {\n\tacpi_handle handle;\n\tint count;\n\tu32 link_mask;\n};\n\nstruct sdw_intel_link_dev;\n\n \n\n \n#define SDW_INTEL_CLK_STOP_NOT_ALLOWED\t\tBIT(0)\n\n \n#define SDW_INTEL_CLK_STOP_TEARDOWN\t\tBIT(1)\n\n \n#define SDW_INTEL_CLK_STOP_WAKE_CAPABLE_ONLY\tBIT(2)\n\n \n#define SDW_INTEL_CLK_STOP_BUS_RESET\t\tBIT(3)\n\nstruct hdac_bus;\n\n \nstruct sdw_intel_ctx {\n\tint count;\n\tvoid __iomem *mmio_base;\n\tu32 link_mask;\n\tint num_slaves;\n\tacpi_handle handle;\n\tstruct sdw_intel_link_dev **ldev;\n\tstruct sdw_extended_slave_id *ids;\n\tstruct list_head link_list;\n\tstruct mutex shim_lock;  \n\tu32 shim_mask;\n\tu32 shim_base;\n\tu32 alh_base;\n};\n\n \nstruct sdw_intel_res {\n\tconst struct sdw_intel_hw_ops *hw_ops;\n\tint count;\n\tvoid __iomem *mmio_base;\n\tint irq;\n\tacpi_handle handle;\n\tstruct device *parent;\n\tconst struct sdw_intel_ops *ops;\n\tstruct device *dev;\n\tu32 link_mask;\n\tu32 clock_stop_quirks;\n\tu32 shim_base;\n\tu32 alh_base;\n\tbool ext;\n\tstruct hdac_bus *hbus;\n\tstruct mutex *eml_lock;\n};\n\n \nint sdw_intel_acpi_scan(acpi_handle *parent_handle,\n\t\t\tstruct sdw_intel_acpi_info *info);\n\nvoid sdw_intel_process_wakeen_event(struct sdw_intel_ctx *ctx);\n\nstruct sdw_intel_ctx *\nsdw_intel_probe(struct sdw_intel_res *res);\n\nint sdw_intel_startup(struct sdw_intel_ctx *ctx);\n\nvoid sdw_intel_exit(struct sdw_intel_ctx *ctx);\n\nirqreturn_t sdw_intel_thread(int irq, void *dev_id);\n\n#define SDW_INTEL_QUIRK_MASK_BUS_DISABLE      BIT(1)\n\nstruct sdw_intel;\n\n \nstruct sdw_intel_hw_ops {\n\tvoid (*debugfs_init)(struct sdw_intel *sdw);\n\tvoid (*debugfs_exit)(struct sdw_intel *sdw);\n\n\tint (*register_dai)(struct sdw_intel *sdw);\n\n\tvoid (*check_clock_stop)(struct sdw_intel *sdw);\n\tint (*start_bus)(struct sdw_intel *sdw);\n\tint (*start_bus_after_reset)(struct sdw_intel *sdw);\n\tint (*start_bus_after_clock_stop)(struct sdw_intel *sdw);\n\tint (*stop_bus)(struct sdw_intel *sdw, bool clock_stop);\n\n\tint (*link_power_up)(struct sdw_intel *sdw);\n\tint (*link_power_down)(struct sdw_intel *sdw);\n\n\tint  (*shim_check_wake)(struct sdw_intel *sdw);\n\tvoid (*shim_wake)(struct sdw_intel *sdw, bool wake_enable);\n\n\tint (*pre_bank_switch)(struct sdw_intel *sdw);\n\tint (*post_bank_switch)(struct sdw_intel *sdw);\n\n\tvoid (*sync_arm)(struct sdw_intel *sdw);\n\tint (*sync_go_unlocked)(struct sdw_intel *sdw);\n\tint (*sync_go)(struct sdw_intel *sdw);\n\tbool (*sync_check_cmdsync_unlocked)(struct sdw_intel *sdw);\n\n\tvoid (*program_sdi)(struct sdw_intel *sdw, int dev_num);\n};\n\nextern const struct sdw_intel_hw_ops sdw_intel_cnl_hw_ops;\nextern const struct sdw_intel_hw_ops sdw_intel_lnl_hw_ops;\n\n \n\n#define SDW_INTEL_DEV_NUM_IDA_MIN           6\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}