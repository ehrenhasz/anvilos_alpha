{
  "module_name": "onenand.h",
  "hash_id": "175b97a67ee3c6a320b7ec2c02052d8d5d246c1296bbbc14c4a861b0f63f5bf5",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mtd/onenand.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_MTD_ONENAND_H\n#define __LINUX_MTD_ONENAND_H\n\n#include <linux/spinlock.h>\n#include <linux/completion.h>\n#include <linux/mtd/flashchip.h>\n#include <linux/mtd/onenand_regs.h>\n#include <linux/mtd/bbm.h>\n\n#define MAX_DIES\t\t2\n#define MAX_BUFFERRAM\t\t2\n\n \nextern int onenand_scan(struct mtd_info *mtd, int max_chips);\n \nextern void onenand_release(struct mtd_info *mtd);\n\n \nstruct onenand_bufferram {\n\tint\tblockpage;\n};\n\n \nstruct onenand_chip {\n\tvoid __iomem\t\t*base;\n\tunsigned\t\tdies;\n\tunsigned\t\tboundary[MAX_DIES];\n\tloff_t\t\t\tdiesize[MAX_DIES];\n\tunsigned int\t\tchipsize;\n\tunsigned int\t\tdevice_id;\n\tunsigned int\t\tversion_id;\n\tunsigned int\t\ttechnology;\n\tunsigned int\t\tdensity_mask;\n\tunsigned int\t\toptions;\n\tunsigned int\t\tbadblockpos;\n\n\tunsigned int\t\terase_shift;\n\tunsigned int\t\tpage_shift;\n\tunsigned int\t\tpage_mask;\n\tunsigned int\t\twritesize;\n\n\tunsigned int\t\tbufferram_index;\n\tstruct onenand_bufferram\tbufferram[MAX_BUFFERRAM];\n\n\tint (*command)(struct mtd_info *mtd, int cmd, loff_t address, size_t len);\n\tint (*wait)(struct mtd_info *mtd, int state);\n\tint (*bbt_wait)(struct mtd_info *mtd, int state);\n\tvoid (*unlock_all)(struct mtd_info *mtd);\n\tint (*read_bufferram)(struct mtd_info *mtd, int area,\n\t\t\tunsigned char *buffer, int offset, size_t count);\n\tint (*write_bufferram)(struct mtd_info *mtd, int area,\n\t\t\tconst unsigned char *buffer, int offset, size_t count);\n\tunsigned short (*read_word)(void __iomem *addr);\n\tvoid (*write_word)(unsigned short value, void __iomem *addr);\n\tvoid (*mmcontrol)(struct mtd_info *mtd, int sync_read);\n\tint (*chip_probe)(struct mtd_info *mtd);\n\tint (*block_markbad)(struct mtd_info *mtd, loff_t ofs);\n\tint (*scan_bbt)(struct mtd_info *mtd);\n\tint (*enable)(struct mtd_info *mtd);\n\tint (*disable)(struct mtd_info *mtd);\n\n\tstruct completion\tcomplete;\n\tint\t\t\tirq;\n\n\tspinlock_t\t\tchip_lock;\n\twait_queue_head_t\twq;\n\tflstate_t\t\tstate;\n\tunsigned char\t\t*page_buf;\n\tunsigned char\t\t*oob_buf;\n#ifdef CONFIG_MTD_ONENAND_VERIFY_WRITE\n\tunsigned char\t\t*verify_buf;\n#endif\n\n\tint\t\t\tsubpagesize;\n\n\tvoid\t\t\t*bbm;\n\n\tvoid\t\t\t*priv;\n\n\t \n\tunsigned int\t\tongoing;\n};\n\n \n#define ONENAND_PAGES_PER_BLOCK        (1<<6)\n\n#define ONENAND_CURRENT_BUFFERRAM(this)\t\t(this->bufferram_index)\n#define ONENAND_NEXT_BUFFERRAM(this)\t\t(this->bufferram_index ^ 1)\n#define ONENAND_SET_NEXT_BUFFERRAM(this)\t(this->bufferram_index ^= 1)\n#define ONENAND_SET_PREV_BUFFERRAM(this)\t(this->bufferram_index ^= 1)\n#define ONENAND_SET_BUFFERRAM0(this)\t\t(this->bufferram_index = 0)\n#define ONENAND_SET_BUFFERRAM1(this)\t\t(this->bufferram_index = 1)\n\n#define FLEXONENAND(this)\t\t\t\t\t\t\\\n\t(this->device_id & DEVICE_IS_FLEXONENAND)\n#define ONENAND_GET_SYS_CFG1(this)\t\t\t\t\t\\\n\t(this->read_word(this->base + ONENAND_REG_SYS_CFG1))\n#define ONENAND_SET_SYS_CFG1(v, this)\t\t\t\t\t\\\n\t(this->write_word(v, this->base + ONENAND_REG_SYS_CFG1))\n\n#define ONENAND_IS_DDP(this)\t\t\t\t\t\t\\\n\t(this->device_id & ONENAND_DEVICE_IS_DDP)\n\n#define ONENAND_IS_MLC(this)\t\t\t\t\t\t\\\n\t(this->technology & ONENAND_TECHNOLOGY_IS_MLC)\n\n#ifdef CONFIG_MTD_ONENAND_2X_PROGRAM\n#define ONENAND_IS_2PLANE(this)\t\t\t\t\t\t\\\n\t(this->options & ONENAND_HAS_2PLANE)\n#else\n#define ONENAND_IS_2PLANE(this)\t\t\t(0)\n#endif\n\n#define ONENAND_IS_CACHE_PROGRAM(this)\t\t\t\t\t\\\n\t(this->options & ONENAND_HAS_CACHE_PROGRAM)\n\n#define ONENAND_IS_NOP_1(this)\t\t\t\t\t\t\\\n\t(this->options & ONENAND_HAS_NOP_1)\n\n \n#define ONENAND_CHECK_BYTE_ACCESS(addr)\t\t(addr & 0x1)\n\n#define ONENAND_BADBLOCK_POS\t\t0\n\n \n#define ONENAND_HAS_CONT_LOCK\t\t(0x0001)\n#define ONENAND_HAS_UNLOCK_ALL\t\t(0x0002)\n#define ONENAND_HAS_2PLANE\t\t(0x0004)\n#define ONENAND_HAS_4KB_PAGE\t\t(0x0008)\n#define ONENAND_HAS_CACHE_PROGRAM\t(0x0010)\n#define ONENAND_HAS_NOP_1\t\t(0x0020)\n#define ONENAND_SKIP_UNLOCK_CHECK\t(0x0100)\n#define ONENAND_PAGEBUF_ALLOC\t\t(0x1000)\n#define ONENAND_OOBBUF_ALLOC\t\t(0x2000)\n#define ONENAND_SKIP_INITIAL_UNLOCKING\t(0x4000)\n\n#define ONENAND_IS_4KB_PAGE(this)\t\t\t\t\t\\\n\t(this->options & ONENAND_HAS_4KB_PAGE)\n\n \n#define ONENAND_MFR_SAMSUNG\t0xec\n#define ONENAND_MFR_NUMONYX\t0x20\n\n \nstruct onenand_manufacturers {\n        int id;\n        char *name;\n};\n\nint onenand_bbt_read_oob(struct mtd_info *mtd, loff_t from,\n\t\t\t struct mtd_oob_ops *ops);\nunsigned onenand_block(struct onenand_chip *this, loff_t addr);\nloff_t onenand_addr(struct onenand_chip *this, int block);\nint flexonenand_region(struct mtd_info *mtd, loff_t addr);\n\nstruct mtd_partition;\n\nstruct onenand_platform_data {\n\tvoid\t\t(*mmcontrol)(struct mtd_info *mtd, int sync_read);\n\tint\t\t(*read_bufferram)(struct mtd_info *mtd, int area,\n\t\t\tunsigned char *buffer, int offset, size_t count);\n\tstruct mtd_partition *parts;\n\tunsigned int\tnr_parts;\n};\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}