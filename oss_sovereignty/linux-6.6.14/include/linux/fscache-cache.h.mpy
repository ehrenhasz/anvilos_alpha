{
  "module_name": "fscache-cache.h",
  "hash_id": "e31034af95731ea12953d355d8baa71e73d877b30d6f4c8b49a0caeb278a7797",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/fscache-cache.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_FSCACHE_CACHE_H\n#define _LINUX_FSCACHE_CACHE_H\n\n#include <linux/fscache.h>\n\nenum fscache_cache_trace;\nenum fscache_cookie_trace;\nenum fscache_access_trace;\n\nenum fscache_cache_state {\n\tFSCACHE_CACHE_IS_NOT_PRESENT,\t \n\tFSCACHE_CACHE_IS_PREPARING,\t \n\tFSCACHE_CACHE_IS_ACTIVE,\t \n\tFSCACHE_CACHE_GOT_IOERROR,\t \n\tFSCACHE_CACHE_IS_WITHDRAWN,\t \n#define NR__FSCACHE_CACHE_STATE (FSCACHE_CACHE_IS_WITHDRAWN + 1)\n};\n\n \nstruct fscache_cache {\n\tconst struct fscache_cache_ops *ops;\n\tstruct list_head\tcache_link;\t \n\tvoid\t\t\t*cache_priv;\t \n\trefcount_t\t\tref;\n\tatomic_t\t\tn_volumes;\t \n\tatomic_t\t\tn_accesses;\t \n\tatomic_t\t\tobject_count;\t \n\tunsigned int\t\tdebug_id;\n\tenum fscache_cache_state state;\n\tchar\t\t\t*name;\n};\n\n \nstruct fscache_cache_ops {\n\t \n\tconst char *name;\n\n\t \n\tvoid (*acquire_volume)(struct fscache_volume *volume);\n\n\t \n\tvoid (*free_volume)(struct fscache_volume *volume);\n\n\t \n\tbool (*lookup_cookie)(struct fscache_cookie *cookie);\n\n\t \n\tvoid (*withdraw_cookie)(struct fscache_cookie *cookie);\n\n\t \n\tvoid (*resize_cookie)(struct netfs_cache_resources *cres,\n\t\t\t      loff_t new_size);\n\n\t \n\tbool (*invalidate_cookie)(struct fscache_cookie *cookie);\n\n\t \n\tbool (*begin_operation)(struct netfs_cache_resources *cres,\n\t\t\t\tenum fscache_want_state want_state);\n\n\t \n\tvoid (*prepare_to_write)(struct fscache_cookie *cookie);\n};\n\nextern struct workqueue_struct *fscache_wq;\nextern wait_queue_head_t fscache_clearance_waiters;\n\n \nextern struct rw_semaphore fscache_addremove_sem;\nextern struct fscache_cache *fscache_acquire_cache(const char *name);\nextern void fscache_relinquish_cache(struct fscache_cache *cache);\nextern int fscache_add_cache(struct fscache_cache *cache,\n\t\t\t     const struct fscache_cache_ops *ops,\n\t\t\t     void *cache_priv);\nextern void fscache_withdraw_cache(struct fscache_cache *cache);\nextern void fscache_withdraw_volume(struct fscache_volume *volume);\nextern void fscache_withdraw_cookie(struct fscache_cookie *cookie);\n\nextern void fscache_io_error(struct fscache_cache *cache);\n\nextern void fscache_end_volume_access(struct fscache_volume *volume,\n\t\t\t\t      struct fscache_cookie *cookie,\n\t\t\t\t      enum fscache_access_trace why);\n\nextern struct fscache_cookie *fscache_get_cookie(struct fscache_cookie *cookie,\n\t\t\t\t\t\t enum fscache_cookie_trace where);\nextern void fscache_put_cookie(struct fscache_cookie *cookie,\n\t\t\t       enum fscache_cookie_trace where);\nextern void fscache_end_cookie_access(struct fscache_cookie *cookie,\n\t\t\t\t      enum fscache_access_trace why);\nextern void fscache_cookie_lookup_negative(struct fscache_cookie *cookie);\nextern void fscache_resume_after_invalidation(struct fscache_cookie *cookie);\nextern void fscache_caching_failed(struct fscache_cookie *cookie);\nextern bool fscache_wait_for_operation(struct netfs_cache_resources *cred,\n\t\t\t\t       enum fscache_want_state state);\n\n \nstatic inline\nenum fscache_cookie_state fscache_cookie_state(struct fscache_cookie *cookie)\n{\n\treturn smp_load_acquire(&cookie->state);\n}\n\n \nstatic inline void *fscache_get_key(struct fscache_cookie *cookie)\n{\n\tif (cookie->key_len <= sizeof(cookie->inline_key))\n\t\treturn cookie->inline_key;\n\telse\n\t\treturn cookie->key;\n}\n\nstatic inline struct fscache_cookie *fscache_cres_cookie(struct netfs_cache_resources *cres)\n{\n\treturn cres->cache_priv;\n}\n\n \nstatic inline void fscache_count_object(struct fscache_cache *cache)\n{\n\tatomic_inc(&cache->object_count);\n}\n\n \nstatic inline void fscache_uncount_object(struct fscache_cache *cache)\n{\n\tif (atomic_dec_and_test(&cache->object_count))\n\t\twake_up_all(&fscache_clearance_waiters);\n}\n\n \nstatic inline void fscache_wait_for_objects(struct fscache_cache *cache)\n{\n\twait_event(fscache_clearance_waiters,\n\t\t   atomic_read(&cache->object_count) == 0);\n}\n\n#ifdef CONFIG_FSCACHE_STATS\nextern atomic_t fscache_n_read;\nextern atomic_t fscache_n_write;\nextern atomic_t fscache_n_no_write_space;\nextern atomic_t fscache_n_no_create_space;\nextern atomic_t fscache_n_culled;\n#define fscache_count_read() atomic_inc(&fscache_n_read)\n#define fscache_count_write() atomic_inc(&fscache_n_write)\n#define fscache_count_no_write_space() atomic_inc(&fscache_n_no_write_space)\n#define fscache_count_no_create_space() atomic_inc(&fscache_n_no_create_space)\n#define fscache_count_culled() atomic_inc(&fscache_n_culled)\n#else\n#define fscache_count_read() do {} while(0)\n#define fscache_count_write() do {} while(0)\n#define fscache_count_no_write_space() do {} while(0)\n#define fscache_count_no_create_space() do {} while(0)\n#define fscache_count_culled() do {} while(0)\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}