{
  "module_name": "bootconfig.h",
  "hash_id": "f42ada5f3f0712aee900ffed6ad968fab3b0b45dc5a979f539ce509ec4c0c3e6",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/bootconfig.h",
  "human_readable_source": " \n#ifndef _LINUX_XBC_H\n#define _LINUX_XBC_H\n \n\n#ifdef __KERNEL__\n#include <linux/kernel.h>\n#include <linux/types.h>\n#else  \n \n#endif\n\n#define BOOTCONFIG_MAGIC\t\"#BOOTCONFIG\\n\"\n#define BOOTCONFIG_MAGIC_LEN\t12\n#define BOOTCONFIG_ALIGN_SHIFT\t2\n#define BOOTCONFIG_ALIGN\t(1 << BOOTCONFIG_ALIGN_SHIFT)\n#define BOOTCONFIG_ALIGN_MASK\t(BOOTCONFIG_ALIGN - 1)\n\n \nstatic inline __init uint32_t xbc_calc_checksum(void *data, uint32_t size)\n{\n\tunsigned char *p = data;\n\tuint32_t ret = 0;\n\n\twhile (size--)\n\t\tret += *p++;\n\n\treturn ret;\n}\n\n \nstruct xbc_node {\n\tuint16_t next;\n\tuint16_t child;\n\tuint16_t parent;\n\tuint16_t data;\n} __attribute__ ((__packed__));\n\n#define XBC_KEY\t\t0\n#define XBC_VALUE\t(1 << 15)\n \n#define XBC_DATA_MAX\t(XBC_VALUE - 1)\n\n#define XBC_NODE_MAX\t8192\n#define XBC_KEYLEN_MAX\t256\n#define XBC_DEPTH_MAX\t16\n\n \nstruct xbc_node * __init xbc_root_node(void);\nint __init xbc_node_index(struct xbc_node *node);\nstruct xbc_node * __init xbc_node_get_parent(struct xbc_node *node);\nstruct xbc_node * __init xbc_node_get_child(struct xbc_node *node);\nstruct xbc_node * __init xbc_node_get_next(struct xbc_node *node);\nconst char * __init xbc_node_get_data(struct xbc_node *node);\n\n \nstatic inline __init bool xbc_node_is_value(struct xbc_node *node)\n{\n\treturn node->data & XBC_VALUE;\n}\n\n \nstatic inline __init bool xbc_node_is_key(struct xbc_node *node)\n{\n\treturn !xbc_node_is_value(node);\n}\n\n \nstatic inline __init bool xbc_node_is_array(struct xbc_node *node)\n{\n\treturn xbc_node_is_value(node) && node->child != 0;\n}\n\n \nstatic inline __init bool xbc_node_is_leaf(struct xbc_node *node)\n{\n\treturn xbc_node_is_key(node) &&\n\t\t(!node->child || xbc_node_is_value(xbc_node_get_child(node)));\n}\n\n \nstruct xbc_node * __init xbc_node_find_subkey(struct xbc_node *parent,\n\t\t\t\t\t     const char *key);\n\nconst char * __init xbc_node_find_value(struct xbc_node *parent,\n\t\t\t\t\tconst char *key,\n\t\t\t\t\tstruct xbc_node **vnode);\n\nstruct xbc_node * __init xbc_node_find_next_leaf(struct xbc_node *root,\n\t\t\t\t\t\t struct xbc_node *leaf);\n\nconst char * __init xbc_node_find_next_key_value(struct xbc_node *root,\n\t\t\t\t\t\t struct xbc_node **leaf);\n\n \nstatic inline const char * __init\nxbc_find_value(const char *key, struct xbc_node **vnode)\n{\n\treturn xbc_node_find_value(NULL, key, vnode);\n}\n\n \nstatic inline struct xbc_node * __init xbc_find_node(const char *key)\n{\n\treturn xbc_node_find_subkey(NULL, key);\n}\n\n \nstatic inline struct xbc_node * __init xbc_node_get_subkey(struct xbc_node *node)\n{\n\tstruct xbc_node *child = xbc_node_get_child(node);\n\n\tif (child && xbc_node_is_value(child))\n\t\treturn xbc_node_get_next(child);\n\telse\n\t\treturn child;\n}\n\n \n#define xbc_array_for_each_value(anode, value)\t\t\t\t\\\n\tfor (value = xbc_node_get_data(anode); anode != NULL ;\t\t\\\n\t     anode = xbc_node_get_child(anode),\t\t\t\t\\\n\t     value = anode ? xbc_node_get_data(anode) : NULL)\n\n \n#define xbc_node_for_each_child(parent, child)\t\t\t\t\\\n\tfor (child = xbc_node_get_child(parent); child != NULL ;\t\\\n\t     child = xbc_node_get_next(child))\n\n \n#define xbc_node_for_each_subkey(parent, child)\t\t\t\t\\\n\tfor (child = xbc_node_get_subkey(parent); child != NULL ;\t\\\n\t     child = xbc_node_get_next(child))\n\n \n#define xbc_node_for_each_array_value(node, key, anode, value)\t\t\\\n\tfor (value = xbc_node_find_value(node, key, &anode); value != NULL; \\\n\t     anode = xbc_node_get_child(anode),\t\t\t\t\\\n\t     value = anode ? xbc_node_get_data(anode) : NULL)\n\n \n#define xbc_node_for_each_key_value(node, knode, value)\t\t\t\\\n\tfor (knode = NULL, value = xbc_node_find_next_key_value(node, &knode);\\\n\t     knode != NULL; value = xbc_node_find_next_key_value(node, &knode))\n\n \n#define xbc_for_each_key_value(knode, value)\t\t\t\t\\\n\txbc_node_for_each_key_value(NULL, knode, value)\n\n \nint __init xbc_node_compose_key_after(struct xbc_node *root,\n\t\t\tstruct xbc_node *node, char *buf, size_t size);\n\n \nstatic inline int __init xbc_node_compose_key(struct xbc_node *node,\n\t\t\t\t\t      char *buf, size_t size)\n{\n\treturn xbc_node_compose_key_after(NULL, node, buf, size);\n}\n\n \nint __init xbc_init(const char *buf, size_t size, const char **emsg, int *epos);\n\n \nint __init xbc_get_info(int *node_size, size_t *data_size);\n\n \nvoid __init xbc_exit(void);\n\n \n#ifdef CONFIG_BOOT_CONFIG_EMBED\nconst char * __init xbc_get_embedded_bootconfig(size_t *size);\n#else\nstatic inline const char *xbc_get_embedded_bootconfig(size_t *size)\n{\n\treturn NULL;\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}