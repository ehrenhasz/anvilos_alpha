{
  "module_name": "clockchips.h",
  "hash_id": "9d4af298c289245c1d62acf81c4c6c165ec2485dbfe29cd2a7d48d8fa90491a3",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/clockchips.h",
  "human_readable_source": " \n \n#ifndef _LINUX_CLOCKCHIPS_H\n#define _LINUX_CLOCKCHIPS_H\n\n#ifdef CONFIG_GENERIC_CLOCKEVENTS\n\n# include <linux/clocksource.h>\n# include <linux/cpumask.h>\n# include <linux/ktime.h>\n# include <linux/notifier.h>\n\nstruct clock_event_device;\nstruct module;\n\n \nenum clock_event_state {\n\tCLOCK_EVT_STATE_DETACHED,\n\tCLOCK_EVT_STATE_SHUTDOWN,\n\tCLOCK_EVT_STATE_PERIODIC,\n\tCLOCK_EVT_STATE_ONESHOT,\n\tCLOCK_EVT_STATE_ONESHOT_STOPPED,\n};\n\n \n# define CLOCK_EVT_FEAT_PERIODIC\t0x000001\n# define CLOCK_EVT_FEAT_ONESHOT\t\t0x000002\n# define CLOCK_EVT_FEAT_KTIME\t\t0x000004\n\n \n# define CLOCK_EVT_FEAT_C3STOP\t\t0x000008\n# define CLOCK_EVT_FEAT_DUMMY\t\t0x000010\n\n \n# define CLOCK_EVT_FEAT_DYNIRQ\t\t0x000020\n# define CLOCK_EVT_FEAT_PERCPU\t\t0x000040\n\n \n# define CLOCK_EVT_FEAT_HRTIMER\t\t0x000080\n\n \nstruct clock_event_device {\n\tvoid\t\t\t(*event_handler)(struct clock_event_device *);\n\tint\t\t\t(*set_next_event)(unsigned long evt, struct clock_event_device *);\n\tint\t\t\t(*set_next_ktime)(ktime_t expires, struct clock_event_device *);\n\tktime_t\t\t\tnext_event;\n\tu64\t\t\tmax_delta_ns;\n\tu64\t\t\tmin_delta_ns;\n\tu32\t\t\tmult;\n\tu32\t\t\tshift;\n\tenum clock_event_state\tstate_use_accessors;\n\tunsigned int\t\tfeatures;\n\tunsigned long\t\tretries;\n\n\tint\t\t\t(*set_state_periodic)(struct clock_event_device *);\n\tint\t\t\t(*set_state_oneshot)(struct clock_event_device *);\n\tint\t\t\t(*set_state_oneshot_stopped)(struct clock_event_device *);\n\tint\t\t\t(*set_state_shutdown)(struct clock_event_device *);\n\tint\t\t\t(*tick_resume)(struct clock_event_device *);\n\n\tvoid\t\t\t(*broadcast)(const struct cpumask *mask);\n\tvoid\t\t\t(*suspend)(struct clock_event_device *);\n\tvoid\t\t\t(*resume)(struct clock_event_device *);\n\tunsigned long\t\tmin_delta_ticks;\n\tunsigned long\t\tmax_delta_ticks;\n\n\tconst char\t\t*name;\n\tint\t\t\trating;\n\tint\t\t\tirq;\n\tint\t\t\tbound_on;\n\tconst struct cpumask\t*cpumask;\n\tstruct list_head\tlist;\n\tstruct module\t\t*owner;\n} ____cacheline_aligned;\n\n \nstatic inline bool clockevent_state_detached(struct clock_event_device *dev)\n{\n\treturn dev->state_use_accessors == CLOCK_EVT_STATE_DETACHED;\n}\n\nstatic inline bool clockevent_state_shutdown(struct clock_event_device *dev)\n{\n\treturn dev->state_use_accessors == CLOCK_EVT_STATE_SHUTDOWN;\n}\n\nstatic inline bool clockevent_state_periodic(struct clock_event_device *dev)\n{\n\treturn dev->state_use_accessors == CLOCK_EVT_STATE_PERIODIC;\n}\n\nstatic inline bool clockevent_state_oneshot(struct clock_event_device *dev)\n{\n\treturn dev->state_use_accessors == CLOCK_EVT_STATE_ONESHOT;\n}\n\nstatic inline bool clockevent_state_oneshot_stopped(struct clock_event_device *dev)\n{\n\treturn dev->state_use_accessors == CLOCK_EVT_STATE_ONESHOT_STOPPED;\n}\n\n \nstatic inline unsigned long\ndiv_sc(unsigned long ticks, unsigned long nsec, int shift)\n{\n\tu64 tmp = ((u64)ticks) << shift;\n\n\tdo_div(tmp, nsec);\n\n\treturn (unsigned long) tmp;\n}\n\n \nextern u64 clockevent_delta2ns(unsigned long latch, struct clock_event_device *evt);\nextern void clockevents_register_device(struct clock_event_device *dev);\nextern int clockevents_unbind_device(struct clock_event_device *ced, int cpu);\n\nextern void clockevents_config_and_register(struct clock_event_device *dev,\n\t\t\t\t\t    u32 freq, unsigned long min_delta,\n\t\t\t\t\t    unsigned long max_delta);\n\nextern int clockevents_update_freq(struct clock_event_device *ce, u32 freq);\n\nstatic inline void\nclockevents_calc_mult_shift(struct clock_event_device *ce, u32 freq, u32 maxsec)\n{\n\treturn clocks_calc_mult_shift(&ce->mult, &ce->shift, NSEC_PER_SEC, freq, maxsec);\n}\n\nextern void clockevents_suspend(void);\nextern void clockevents_resume(void);\n\n# ifdef CONFIG_GENERIC_CLOCKEVENTS_BROADCAST\n#  ifdef CONFIG_ARCH_HAS_TICK_BROADCAST\nextern void tick_broadcast(const struct cpumask *mask);\n#  else\n#   define tick_broadcast\tNULL\n#  endif\nextern int tick_receive_broadcast(void);\n# endif\n\n# if defined(CONFIG_GENERIC_CLOCKEVENTS_BROADCAST) && defined(CONFIG_TICK_ONESHOT)\nextern void tick_setup_hrtimer_broadcast(void);\nextern int tick_check_broadcast_expired(void);\n# else\nstatic __always_inline int tick_check_broadcast_expired(void) { return 0; }\nstatic inline void tick_setup_hrtimer_broadcast(void) { }\n# endif\n\n#else  \n\nstatic inline void clockevents_suspend(void) { }\nstatic inline void clockevents_resume(void) { }\nstatic __always_inline int tick_check_broadcast_expired(void) { return 0; }\nstatic inline void tick_setup_hrtimer_broadcast(void) { }\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}