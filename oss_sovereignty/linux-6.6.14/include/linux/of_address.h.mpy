{
  "module_name": "of_address.h",
  "hash_id": "68aec9a65857adde993bb3d8a2326c7395d6eb2f95b14e20bc0b811beae313c6",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/of_address.h",
  "human_readable_source": " \n#ifndef __OF_ADDRESS_H\n#define __OF_ADDRESS_H\n#include <linux/ioport.h>\n#include <linux/errno.h>\n#include <linux/of.h>\n#include <linux/io.h>\n\nstruct of_bus;\n\nstruct of_pci_range_parser {\n\tstruct device_node *node;\n\tstruct of_bus *bus;\n\tconst __be32 *range;\n\tconst __be32 *end;\n\tint na;\n\tint ns;\n\tint pna;\n\tbool dma;\n};\n#define of_range_parser of_pci_range_parser\n\nstruct of_pci_range {\n\tunion {\n\t\tu64 pci_addr;\n\t\tu64 bus_addr;\n\t};\n\tu64 cpu_addr;\n\tu64 size;\n\tu32 flags;\n};\n#define of_range of_pci_range\n\n#define for_each_of_pci_range(parser, range) \\\n\tfor (; of_pci_range_parser_one(parser, range);)\n#define for_each_of_range for_each_of_pci_range\n\n \nstatic inline int of_range_count(const struct of_range_parser *parser)\n{\n\tif (!parser || !parser->node || !parser->range || parser->range == parser->end)\n\t\treturn 0;\n\treturn (parser->end - parser->range) / (parser->na + parser->pna + parser->ns);\n}\n\n \nextern u64 of_translate_dma_address(struct device_node *dev,\n\t\t\t\t    const __be32 *in_addr);\nextern const __be32 *of_translate_dma_region(struct device_node *dev, const __be32 *addr,\n\t\t\t\t\t     phys_addr_t *start, size_t *length);\n\n#ifdef CONFIG_OF_ADDRESS\nextern u64 of_translate_address(struct device_node *np, const __be32 *addr);\nextern int of_address_to_resource(struct device_node *dev, int index,\n\t\t\t\t  struct resource *r);\nextern void __iomem *of_iomap(struct device_node *device, int index);\nvoid __iomem *of_io_request_and_map(struct device_node *device,\n\t\t\t\t    int index, const char *name);\n\n \nextern const __be32 *__of_get_address(struct device_node *dev, int index, int bar_no,\n\t\t\t\t      u64 *size, unsigned int *flags);\n\nint of_property_read_reg(struct device_node *np, int idx, u64 *addr, u64 *size);\n\nextern int of_pci_range_parser_init(struct of_pci_range_parser *parser,\n\t\t\tstruct device_node *node);\nextern int of_pci_dma_range_parser_init(struct of_pci_range_parser *parser,\n\t\t\tstruct device_node *node);\nextern struct of_pci_range *of_pci_range_parser_one(\n\t\t\t\t\tstruct of_pci_range_parser *parser,\n\t\t\t\t\tstruct of_pci_range *range);\nextern int of_pci_address_to_resource(struct device_node *dev, int bar,\n\t\t\t\t      struct resource *r);\nextern int of_pci_range_to_resource(struct of_pci_range *range,\n\t\t\t\t    struct device_node *np,\n\t\t\t\t    struct resource *res);\nextern int of_range_to_resource(struct device_node *np, int index,\n\t\t\t\tstruct resource *res);\nextern bool of_dma_is_coherent(struct device_node *np);\n#else  \nstatic inline void __iomem *of_io_request_and_map(struct device_node *device,\n\t\t\t\t\t\t  int index, const char *name)\n{\n\treturn IOMEM_ERR_PTR(-EINVAL);\n}\n\nstatic inline u64 of_translate_address(struct device_node *np,\n\t\t\t\t       const __be32 *addr)\n{\n\treturn OF_BAD_ADDR;\n}\n\nstatic inline const __be32 *__of_get_address(struct device_node *dev, int index, int bar_no,\n\t\t\t\t\t     u64 *size, unsigned int *flags)\n{\n\treturn NULL;\n}\n\nstatic inline int of_property_read_reg(struct device_node *np, int idx, u64 *addr, u64 *size)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline int of_pci_range_parser_init(struct of_pci_range_parser *parser,\n\t\t\tstruct device_node *node)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline int of_pci_dma_range_parser_init(struct of_pci_range_parser *parser,\n\t\t\tstruct device_node *node)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline struct of_pci_range *of_pci_range_parser_one(\n\t\t\t\t\tstruct of_pci_range_parser *parser,\n\t\t\t\t\tstruct of_pci_range *range)\n{\n\treturn NULL;\n}\n\nstatic inline int of_pci_address_to_resource(struct device_node *dev, int bar,\n\t\t\t\t             struct resource *r)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline int of_pci_range_to_resource(struct of_pci_range *range,\n\t\t\t\t\t   struct device_node *np,\n\t\t\t\t\t   struct resource *res)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline int of_range_to_resource(struct device_node *np, int index,\n\t\t\t\t       struct resource *res)\n{\n\treturn -ENOSYS;\n}\n\nstatic inline bool of_dma_is_coherent(struct device_node *np)\n{\n\treturn false;\n}\n#endif  \n\n#ifdef CONFIG_OF\nextern int of_address_to_resource(struct device_node *dev, int index,\n\t\t\t\t  struct resource *r);\nvoid __iomem *of_iomap(struct device_node *node, int index);\n#else\nstatic inline int of_address_to_resource(struct device_node *dev, int index,\n\t\t\t\t\t struct resource *r)\n{\n\treturn -EINVAL;\n}\n\nstatic inline void __iomem *of_iomap(struct device_node *device, int index)\n{\n\treturn NULL;\n}\n#endif\n#define of_range_parser_init of_pci_range_parser_init\n\nstatic inline const __be32 *of_get_address(struct device_node *dev, int index,\n\t\t\t\t\t   u64 *size, unsigned int *flags)\n{\n\treturn __of_get_address(dev, index, -1, size, flags);\n}\n\nstatic inline const __be32 *of_get_pci_address(struct device_node *dev, int bar_no,\n\t\t\t\t\t       u64 *size, unsigned int *flags)\n{\n\treturn __of_get_address(dev, -1, bar_no, size, flags);\n}\n\nstatic inline int of_address_count(struct device_node *np)\n{\n\tstruct resource res;\n\tint count = 0;\n\n\twhile (of_address_to_resource(np, count, &res) == 0)\n\t\tcount++;\n\n\treturn count;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}