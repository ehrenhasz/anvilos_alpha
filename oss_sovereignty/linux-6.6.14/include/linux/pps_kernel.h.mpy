{
  "module_name": "pps_kernel.h",
  "hash_id": "30806fcda38c71bf796a7704f20dbe8e6104afd18667a7f49010c6cdb1f05950",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pps_kernel.h",
  "human_readable_source": " \n \n\n#ifndef LINUX_PPS_KERNEL_H\n#define LINUX_PPS_KERNEL_H\n\n#include <linux/pps.h>\n#include <linux/cdev.h>\n#include <linux/device.h>\n#include <linux/time.h>\n\n \n\nstruct pps_device;\n\n \nstruct pps_source_info {\n\tchar name[PPS_MAX_NAME_LEN];\t\t \n\tchar path[PPS_MAX_NAME_LEN];\t\t \n\tint mode;\t\t\t\t \n\n\tvoid (*echo)(struct pps_device *pps,\n\t\t\tint event, void *data);\t \n\n\tstruct module *owner;\n\tstruct device *dev;\t\t \n};\n\nstruct pps_event_time {\n#ifdef CONFIG_NTP_PPS\n\tstruct timespec64 ts_raw;\n#endif  \n\tstruct timespec64 ts_real;\n};\n\n \nstruct pps_device {\n\tstruct pps_source_info info;\t\t \n\n\tstruct pps_kparams params;\t\t \n\n\t__u32 assert_sequence;\t\t\t \n\t__u32 clear_sequence;\t\t\t \n\tstruct pps_ktime assert_tu;\n\tstruct pps_ktime clear_tu;\n\tint current_mode;\t\t\t \n\n\tunsigned int last_ev;\t\t\t \n\twait_queue_head_t queue;\t\t \n\n\tunsigned int id;\t\t\t \n\tvoid const *lookup_cookie;\t\t \n\tstruct cdev cdev;\n\tstruct device *dev;\n\tstruct fasync_struct *async_queue;\t \n\tspinlock_t lock;\n};\n\n \n\nextern const struct attribute_group *pps_groups[];\n\n \n\nextern int pps_register_cdev(struct pps_device *pps);\nextern void pps_unregister_cdev(struct pps_device *pps);\n\n \n\nextern struct pps_device *pps_register_source(\n\t\tstruct pps_source_info *info, int default_params);\nextern void pps_unregister_source(struct pps_device *pps);\nextern void pps_event(struct pps_device *pps,\n\t\tstruct pps_event_time *ts, int event, void *data);\n \nstruct pps_device *pps_lookup_dev(void const *cookie);\n\nstatic inline void timespec_to_pps_ktime(struct pps_ktime *kt,\n\t\tstruct timespec64 ts)\n{\n\tkt->sec = ts.tv_sec;\n\tkt->nsec = ts.tv_nsec;\n}\n\nstatic inline void pps_get_ts(struct pps_event_time *ts)\n{\n\tstruct system_time_snapshot snap;\n\n\tktime_get_snapshot(&snap);\n\tts->ts_real = ktime_to_timespec64(snap.real);\n#ifdef CONFIG_NTP_PPS\n\tts->ts_raw = ktime_to_timespec64(snap.raw);\n#endif\n}\n\n \nstatic inline void pps_sub_ts(struct pps_event_time *ts, struct timespec64 delta)\n{\n\tts->ts_real = timespec64_sub(ts->ts_real, delta);\n#ifdef CONFIG_NTP_PPS\n\tts->ts_raw = timespec64_sub(ts->ts_raw, delta);\n#endif\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}