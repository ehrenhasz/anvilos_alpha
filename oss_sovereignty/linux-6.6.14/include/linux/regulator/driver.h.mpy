{
  "module_name": "driver.h",
  "hash_id": "b6ff1f2005ceb6869e88c24051f0711bc21d59fbb60366d192b5600a6990730a",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/regulator/driver.h",
  "human_readable_source": " \n \n\n#ifndef __LINUX_REGULATOR_DRIVER_H_\n#define __LINUX_REGULATOR_DRIVER_H_\n\n#include <linux/device.h>\n#include <linux/linear_range.h>\n#include <linux/notifier.h>\n#include <linux/regulator/consumer.h>\n#include <linux/ww_mutex.h>\n\nstruct gpio_desc;\nstruct regmap;\nstruct regulator_dev;\nstruct regulator_config;\nstruct regulator_init_data;\nstruct regulator_enable_gpio;\n\nenum regulator_status {\n\tREGULATOR_STATUS_OFF,\n\tREGULATOR_STATUS_ON,\n\tREGULATOR_STATUS_ERROR,\n\t \n\tREGULATOR_STATUS_FAST,\n\tREGULATOR_STATUS_NORMAL,\n\tREGULATOR_STATUS_IDLE,\n\tREGULATOR_STATUS_STANDBY,\n\t \n\tREGULATOR_STATUS_BYPASS,\n\t \n\tREGULATOR_STATUS_UNDEFINED,\n};\n\nenum regulator_detection_severity {\n\t \n\tREGULATOR_SEVERITY_PROT,\n\t \n\tREGULATOR_SEVERITY_ERR,\n\t \n\tREGULATOR_SEVERITY_WARN,\n};\n\n \n#define REGULATOR_LINEAR_RANGE(_min_uV, _min_sel, _max_sel, _step_uV)\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t.min\t\t= _min_uV,\t\t\t\t\t\\\n\t.min_sel\t= _min_sel,\t\t\t\t\t\\\n\t.max_sel\t= _max_sel,\t\t\t\t\t\\\n\t.step\t\t= _step_uV,\t\t\t\t\t\\\n}\n\n \nstruct regulator_ops {\n\n\t \n\tint (*list_voltage) (struct regulator_dev *, unsigned selector);\n\n\t \n\tint (*set_voltage) (struct regulator_dev *, int min_uV, int max_uV,\n\t\t\t    unsigned *selector);\n\tint (*map_voltage)(struct regulator_dev *, int min_uV, int max_uV);\n\tint (*set_voltage_sel) (struct regulator_dev *, unsigned selector);\n\tint (*get_voltage) (struct regulator_dev *);\n\tint (*get_voltage_sel) (struct regulator_dev *);\n\n\t \n\tint (*set_current_limit) (struct regulator_dev *,\n\t\t\t\t int min_uA, int max_uA);\n\tint (*get_current_limit) (struct regulator_dev *);\n\n\tint (*set_input_current_limit) (struct regulator_dev *, int lim_uA);\n\tint (*set_over_current_protection)(struct regulator_dev *, int lim_uA,\n\t\t\t\t\t   int severity, bool enable);\n\tint (*set_over_voltage_protection)(struct regulator_dev *, int lim_uV,\n\t\t\t\t\t   int severity, bool enable);\n\tint (*set_under_voltage_protection)(struct regulator_dev *, int lim_uV,\n\t\t\t\t\t    int severity, bool enable);\n\tint (*set_thermal_protection)(struct regulator_dev *, int lim,\n\t\t\t\t      int severity, bool enable);\n\tint (*set_active_discharge)(struct regulator_dev *, bool enable);\n\n\t \n\tint (*enable) (struct regulator_dev *);\n\tint (*disable) (struct regulator_dev *);\n\tint (*is_enabled) (struct regulator_dev *);\n\n\t \n\tint (*set_mode) (struct regulator_dev *, unsigned int mode);\n\tunsigned int (*get_mode) (struct regulator_dev *);\n\n\t \n\tint (*get_error_flags)(struct regulator_dev *, unsigned int *flags);\n\n\t \n\tint (*enable_time) (struct regulator_dev *);\n\tint (*set_ramp_delay) (struct regulator_dev *, int ramp_delay);\n\tint (*set_voltage_time) (struct regulator_dev *, int old_uV,\n\t\t\t\t int new_uV);\n\tint (*set_voltage_time_sel) (struct regulator_dev *,\n\t\t\t\t     unsigned int old_selector,\n\t\t\t\t     unsigned int new_selector);\n\n\tint (*set_soft_start) (struct regulator_dev *);\n\n\t \n\tint (*get_status)(struct regulator_dev *);\n\n\t \n\tunsigned int (*get_optimum_mode) (struct regulator_dev *, int input_uV,\n\t\t\t\t\t  int output_uV, int load_uA);\n\t \n\tint (*set_load)(struct regulator_dev *, int load_uA);\n\n\t \n\tint (*set_bypass)(struct regulator_dev *dev, bool enable);\n\tint (*get_bypass)(struct regulator_dev *dev, bool *enable);\n\n\t \n\n\t \n\tint (*set_suspend_voltage) (struct regulator_dev *, int uV);\n\n\t \n\tint (*set_suspend_enable) (struct regulator_dev *);\n\tint (*set_suspend_disable) (struct regulator_dev *);\n\n\t \n\tint (*set_suspend_mode) (struct regulator_dev *, unsigned int mode);\n\n\tint (*resume)(struct regulator_dev *rdev);\n\n\tint (*set_pull_down) (struct regulator_dev *);\n};\n\n \nenum regulator_type {\n\tREGULATOR_VOLTAGE,\n\tREGULATOR_CURRENT,\n};\n\n \nstruct regulator_desc {\n\tconst char *name;\n\tconst char *supply_name;\n\tconst char *of_match;\n\tbool of_match_full_name;\n\tconst char *regulators_node;\n\tint (*of_parse_cb)(struct device_node *,\n\t\t\t    const struct regulator_desc *,\n\t\t\t    struct regulator_config *);\n\tint id;\n\tunsigned int continuous_voltage_range:1;\n\tunsigned n_voltages;\n\tunsigned int n_current_limits;\n\tconst struct regulator_ops *ops;\n\tint irq;\n\tenum regulator_type type;\n\tstruct module *owner;\n\n\tunsigned int min_uV;\n\tunsigned int uV_step;\n\tunsigned int linear_min_sel;\n\tint fixed_uV;\n\tunsigned int ramp_delay;\n\tint min_dropout_uV;\n\n\tconst struct linear_range *linear_ranges;\n\tconst unsigned int *linear_range_selectors_bitfield;\n\n\tint n_linear_ranges;\n\n\tconst unsigned int *volt_table;\n\tconst unsigned int *curr_table;\n\n\tunsigned int vsel_range_reg;\n\tunsigned int vsel_range_mask;\n\tunsigned int vsel_reg;\n\tunsigned int vsel_mask;\n\tunsigned int vsel_step;\n\tunsigned int csel_reg;\n\tunsigned int csel_mask;\n\tunsigned int apply_reg;\n\tunsigned int apply_bit;\n\tunsigned int enable_reg;\n\tunsigned int enable_mask;\n\tunsigned int enable_val;\n\tunsigned int disable_val;\n\tbool enable_is_inverted;\n\tunsigned int bypass_reg;\n\tunsigned int bypass_mask;\n\tunsigned int bypass_val_on;\n\tunsigned int bypass_val_off;\n\tunsigned int active_discharge_on;\n\tunsigned int active_discharge_off;\n\tunsigned int active_discharge_mask;\n\tunsigned int active_discharge_reg;\n\tunsigned int soft_start_reg;\n\tunsigned int soft_start_mask;\n\tunsigned int soft_start_val_on;\n\tunsigned int pull_down_reg;\n\tunsigned int pull_down_mask;\n\tunsigned int pull_down_val_on;\n\tunsigned int ramp_reg;\n\tunsigned int ramp_mask;\n\tconst unsigned int *ramp_delay_table;\n\tunsigned int n_ramp_values;\n\n\tunsigned int enable_time;\n\n\tunsigned int off_on_delay;\n\n\tunsigned int poll_enabled_time;\n\n\tunsigned int (*of_map_mode)(unsigned int mode);\n};\n\n \nstruct regulator_config {\n\tstruct device *dev;\n\tconst struct regulator_init_data *init_data;\n\tvoid *driver_data;\n\tstruct device_node *of_node;\n\tstruct regmap *regmap;\n\n\tstruct gpio_desc *ena_gpiod;\n};\n\n \nstruct regulator_err_state {\n\tstruct regulator_dev *rdev;\n\tunsigned long notifs;\n\tunsigned long errors;\n\tint possible_errs;\n};\n\n \nstruct regulator_irq_data {\n\tstruct regulator_err_state *states;\n\tint num_states;\n\tvoid *data;\n\tlong opaque;\n};\n\n \nstruct regulator_irq_desc {\n\tconst char *name;\n\tint fatal_cnt;\n\tint reread_ms;\n\tint irq_off_ms;\n\tbool skip_off;\n\tbool high_prio;\n\tvoid *data;\n\n\tint (*die)(struct regulator_irq_data *rid);\n\tint (*map_event)(int irq, struct regulator_irq_data *rid,\n\t\t\t  unsigned long *dev_mask);\n\tint (*renable)(struct regulator_irq_data *rid);\n};\n\n \nenum {\n\tREGULATOR_ERROR_CLEARED,\n\tREGULATOR_FAILED_RETRY,\n\tREGULATOR_ERROR_ON,\n};\n\n \nstruct coupling_desc {\n\tstruct regulator_dev **coupled_rdevs;\n\tstruct regulator_coupler *coupler;\n\tint n_resolved;\n\tint n_coupled;\n};\n\n \nstruct regulator_dev {\n\tconst struct regulator_desc *desc;\n\tint exclusive;\n\tu32 use_count;\n\tu32 open_count;\n\tu32 bypass_count;\n\n\t \n\tstruct list_head list;  \n\n\t \n\tstruct list_head consumer_list;  \n\n\tstruct coupling_desc coupling_desc;\n\n\tstruct blocking_notifier_head notifier;\n\tstruct ww_mutex mutex;  \n\tstruct task_struct *mutex_owner;\n\tint ref_cnt;\n\tstruct module *owner;\n\tstruct device dev;\n\tstruct regulation_constraints *constraints;\n\tstruct regulator *supply;\t \n\tconst char *supply_name;\n\tstruct regmap *regmap;\n\n\tstruct delayed_work disable_work;\n\n\tvoid *reg_data;\t\t \n\n\tstruct dentry *debugfs;\n\n\tstruct regulator_enable_gpio *ena_pin;\n\tunsigned int ena_gpio_state:1;\n\n\tunsigned int is_switch:1;\n\n\t \n\tktime_t last_off;\n\tint cached_err;\n\tbool use_cached_err;\n\tspinlock_t err_lock;\n};\n\n \nstatic inline int regulator_err2notif(int err)\n{\n\tswitch (err) {\n\tcase REGULATOR_ERROR_UNDER_VOLTAGE:\n\t\treturn REGULATOR_EVENT_UNDER_VOLTAGE;\n\tcase REGULATOR_ERROR_OVER_CURRENT:\n\t\treturn REGULATOR_EVENT_OVER_CURRENT;\n\tcase REGULATOR_ERROR_REGULATION_OUT:\n\t\treturn REGULATOR_EVENT_REGULATION_OUT;\n\tcase REGULATOR_ERROR_FAIL:\n\t\treturn REGULATOR_EVENT_FAIL;\n\tcase REGULATOR_ERROR_OVER_TEMP:\n\t\treturn REGULATOR_EVENT_OVER_TEMP;\n\tcase REGULATOR_ERROR_UNDER_VOLTAGE_WARN:\n\t\treturn REGULATOR_EVENT_UNDER_VOLTAGE_WARN;\n\tcase REGULATOR_ERROR_OVER_CURRENT_WARN:\n\t\treturn REGULATOR_EVENT_OVER_CURRENT_WARN;\n\tcase REGULATOR_ERROR_OVER_VOLTAGE_WARN:\n\t\treturn REGULATOR_EVENT_OVER_VOLTAGE_WARN;\n\tcase REGULATOR_ERROR_OVER_TEMP_WARN:\n\t\treturn REGULATOR_EVENT_OVER_TEMP_WARN;\n\t}\n\treturn 0;\n}\n\n\nstruct regulator_dev *\nregulator_register(struct device *dev,\n\t\t   const struct regulator_desc *regulator_desc,\n\t\t   const struct regulator_config *config);\nstruct regulator_dev *\ndevm_regulator_register(struct device *dev,\n\t\t\tconst struct regulator_desc *regulator_desc,\n\t\t\tconst struct regulator_config *config);\nvoid regulator_unregister(struct regulator_dev *rdev);\n\nint regulator_notifier_call_chain(struct regulator_dev *rdev,\n\t\t\t\t  unsigned long event, void *data);\nvoid *devm_regulator_irq_helper(struct device *dev,\n\t\t\t\tconst struct regulator_irq_desc *d, int irq,\n\t\t\t\tint irq_flags, int common_errs,\n\t\t\t\tint *per_rdev_errs, struct regulator_dev **rdev,\n\t\t\t\tint rdev_amount);\nvoid *regulator_irq_helper(struct device *dev,\n\t\t\t   const struct regulator_irq_desc *d, int irq,\n\t\t\t   int irq_flags, int common_errs, int *per_rdev_errs,\n\t\t\t   struct regulator_dev **rdev, int rdev_amount);\nvoid regulator_irq_helper_cancel(void **handle);\nint regulator_irq_map_event_simple(int irq, struct regulator_irq_data *rid,\n\t\t\t\t   unsigned long *dev_mask);\n\nvoid *rdev_get_drvdata(struct regulator_dev *rdev);\nstruct device *rdev_get_dev(struct regulator_dev *rdev);\nstruct regmap *rdev_get_regmap(struct regulator_dev *rdev);\nint rdev_get_id(struct regulator_dev *rdev);\n\nint regulator_mode_to_status(unsigned int);\n\nint regulator_list_voltage_linear(struct regulator_dev *rdev,\n\t\t\t\t  unsigned int selector);\nint regulator_list_voltage_pickable_linear_range(struct regulator_dev *rdev,\n\t\t\t\t\t\t   unsigned int selector);\nint regulator_list_voltage_linear_range(struct regulator_dev *rdev,\n\t\t\t\t\tunsigned int selector);\nint regulator_list_voltage_table(struct regulator_dev *rdev,\n\t\t\t\t  unsigned int selector);\nint regulator_map_voltage_linear(struct regulator_dev *rdev,\n\t\t\t\t  int min_uV, int max_uV);\nint regulator_map_voltage_pickable_linear_range(struct regulator_dev *rdev,\n\t\t\t\t\t\t  int min_uV, int max_uV);\nint regulator_map_voltage_linear_range(struct regulator_dev *rdev,\n\t\t\t\t       int min_uV, int max_uV);\nint regulator_map_voltage_iterate(struct regulator_dev *rdev,\n\t\t\t\t  int min_uV, int max_uV);\nint regulator_map_voltage_ascend(struct regulator_dev *rdev,\n\t\t\t\t  int min_uV, int max_uV);\nint regulator_get_voltage_sel_pickable_regmap(struct regulator_dev *rdev);\nint regulator_set_voltage_sel_pickable_regmap(struct regulator_dev *rdev,\n\t\t\t\t\t\tunsigned int sel);\nint regulator_get_voltage_sel_regmap(struct regulator_dev *rdev);\nint regulator_set_voltage_sel_regmap(struct regulator_dev *rdev, unsigned sel);\nint regulator_is_enabled_regmap(struct regulator_dev *rdev);\nint regulator_enable_regmap(struct regulator_dev *rdev);\nint regulator_disable_regmap(struct regulator_dev *rdev);\nint regulator_set_voltage_time_sel(struct regulator_dev *rdev,\n\t\t\t\t   unsigned int old_selector,\n\t\t\t\t   unsigned int new_selector);\nint regulator_set_bypass_regmap(struct regulator_dev *rdev, bool enable);\nint regulator_get_bypass_regmap(struct regulator_dev *rdev, bool *enable);\nint regulator_set_soft_start_regmap(struct regulator_dev *rdev);\nint regulator_set_pull_down_regmap(struct regulator_dev *rdev);\n\nint regulator_set_active_discharge_regmap(struct regulator_dev *rdev,\n\t\t\t\t\t  bool enable);\nint regulator_set_current_limit_regmap(struct regulator_dev *rdev,\n\t\t\t\t       int min_uA, int max_uA);\nint regulator_get_current_limit_regmap(struct regulator_dev *rdev);\nvoid *regulator_get_init_drvdata(struct regulator_init_data *reg_init_data);\nint regulator_find_closest_bigger(unsigned int target, const unsigned int *table,\n\t\t\t\t  unsigned int num_sel, unsigned int *sel);\nint regulator_set_ramp_delay_regmap(struct regulator_dev *rdev, int ramp_delay);\nint regulator_sync_voltage_rdev(struct regulator_dev *rdev);\n\n \nint regulator_desc_list_voltage_linear_range(const struct regulator_desc *desc,\n\t\t\t\t\t     unsigned int selector);\n\nint regulator_desc_list_voltage_linear(const struct regulator_desc *desc,\n\t\t\t\t       unsigned int selector);\n\n#ifdef CONFIG_REGULATOR\nconst char *rdev_get_name(struct regulator_dev *rdev);\n#else\nstatic inline const char *rdev_get_name(struct regulator_dev *rdev)\n{\n\treturn NULL;\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}