{
  "module_name": "mailbox_controller.h",
  "hash_id": "a385697465eb9f2755fecae7cfd36459d953b9cae4ebef3283b493e4a6099386",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/mailbox_controller.h",
  "human_readable_source": " \n\n#ifndef __MAILBOX_CONTROLLER_H\n#define __MAILBOX_CONTROLLER_H\n\n#include <linux/of.h>\n#include <linux/types.h>\n#include <linux/hrtimer.h>\n#include <linux/device.h>\n#include <linux/completion.h>\n\nstruct mbox_chan;\n\n \nstruct mbox_chan_ops {\n\tint (*send_data)(struct mbox_chan *chan, void *data);\n\tint (*flush)(struct mbox_chan *chan, unsigned long timeout);\n\tint (*startup)(struct mbox_chan *chan);\n\tvoid (*shutdown)(struct mbox_chan *chan);\n\tbool (*last_tx_done)(struct mbox_chan *chan);\n\tbool (*peek_data)(struct mbox_chan *chan);\n};\n\n \nstruct mbox_controller {\n\tstruct device *dev;\n\tconst struct mbox_chan_ops *ops;\n\tstruct mbox_chan *chans;\n\tint num_chans;\n\tbool txdone_irq;\n\tbool txdone_poll;\n\tunsigned txpoll_period;\n\tstruct mbox_chan *(*of_xlate)(struct mbox_controller *mbox,\n\t\t\t\t      const struct of_phandle_args *sp);\n\t \n\tstruct hrtimer poll_hrt;\n\tspinlock_t poll_hrt_lock;\n\tstruct list_head node;\n};\n\n \n#define MBOX_TX_QUEUE_LEN\t20\n\n \nstruct mbox_chan {\n\tstruct mbox_controller *mbox;\n\tunsigned txdone_method;\n\tstruct mbox_client *cl;\n\tstruct completion tx_complete;\n\tvoid *active_req;\n\tunsigned msg_count, msg_free;\n\tvoid *msg_data[MBOX_TX_QUEUE_LEN];\n\tspinlock_t lock;  \n\tvoid *con_priv;\n};\n\nint mbox_controller_register(struct mbox_controller *mbox);  \nvoid mbox_controller_unregister(struct mbox_controller *mbox);  \nvoid mbox_chan_received_data(struct mbox_chan *chan, void *data);  \nvoid mbox_chan_txdone(struct mbox_chan *chan, int r);  \n\nint devm_mbox_controller_register(struct device *dev,\n\t\t\t\t  struct mbox_controller *mbox);\nvoid devm_mbox_controller_unregister(struct device *dev,\n\t\t\t\t     struct mbox_controller *mbox);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}