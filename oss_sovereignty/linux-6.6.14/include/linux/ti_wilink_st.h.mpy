{
  "module_name": "ti_wilink_st.h",
  "hash_id": "233cf8a631baded1e445f06f2ff353b9ebf6fa3ee22cae944e15af667b57dd4c",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/ti_wilink_st.h",
  "human_readable_source": " \n \n\n#ifndef TI_WILINK_ST_H\n#define TI_WILINK_ST_H\n\n#include <linux/skbuff.h>\n\n \nenum proto_type {\n\tST_BT,\n\tST_FM,\n\tST_GPS,\n\tST_MAX_CHANNELS = 16,\n};\n\n \nstruct st_proto_s {\n\tenum proto_type type;\n\tlong (*recv) (void *, struct sk_buff *);\n\tunsigned char (*match_packet) (const unsigned char *data);\n\tvoid (*reg_complete_cb) (void *, int data);\n\tlong (*write) (struct sk_buff *skb);\n\tvoid *priv_data;\n\n\tunsigned char chnl_id;\n\tunsigned short max_frame_size;\n\tunsigned char hdr_len;\n\tunsigned char offset_len_in_hdr;\n\tunsigned char len_size;\n\tunsigned char reserve;\n};\n\nextern long st_register(struct st_proto_s *);\nextern long st_unregister(struct st_proto_s *);\n\n\n \n\n \n#define ST_NOTEMPTY\t1\n#define ST_EMPTY\t0\n\n \n#define ST_INITIALIZING\t\t1\n#define ST_REG_IN_PROGRESS\t2\n#define ST_REG_PENDING\t\t3\n#define ST_WAITING_FOR_RESP\t4\n\n \nstruct st_data_s {\n\tunsigned long st_state;\n\tstruct sk_buff *tx_skb;\n#define ST_TX_SENDING\t1\n#define ST_TX_WAKEUP\t2\n\tunsigned long tx_state;\n\tstruct st_proto_s *list[ST_MAX_CHANNELS];\n\tbool is_registered[ST_MAX_CHANNELS];\n\tunsigned long rx_state;\n\tunsigned long rx_count;\n\tstruct sk_buff *rx_skb;\n\tunsigned char rx_chnl;\n\tstruct sk_buff_head txq, tx_waitq;\n\tspinlock_t lock;\n\tunsigned char\tprotos_registered;\n\tunsigned long ll_state;\n\tvoid *kim_data;\n\tstruct tty_struct *tty;\n\tstruct work_struct work_write_wakeup;\n};\n\n \nint st_get_uart_wr_room(struct st_data_s *st_gdata);\n \nint st_int_write(struct st_data_s*, const unsigned char*, int);\n\n \nlong st_write(struct sk_buff *);\n\n \nvoid st_ll_send_frame(enum proto_type, struct sk_buff *);\n\n \nvoid st_tx_wakeup(struct st_data_s *st_data);\n\n \nint st_core_init(struct st_data_s **);\nvoid st_core_exit(struct st_data_s *);\n\n \nvoid st_kim_ref(struct st_data_s **, int);\n\n#define GPS_STUB_TEST\n#ifdef GPS_STUB_TEST\nint gps_chrdrv_stub_write(const unsigned char*, int);\nvoid gps_chrdrv_stub_init(void);\n#endif\n\n \n\n \n#define LDISC_TIME\t1000\n#define CMD_RESP_TIME\t800\n#define CMD_WR_TIME\t5000\n#define MAKEWORD(a, b)  ((unsigned short)(((unsigned char)(a)) \\\n\t| ((unsigned short)((unsigned char)(b))) << 8))\n\n#define GPIO_HIGH 1\n#define GPIO_LOW  0\n\n \n#define POR_RETRY_COUNT 5\n\n \nstruct chip_version {\n\tunsigned short full;\n\tunsigned short chip;\n\tunsigned short min_ver;\n\tunsigned short maj_ver;\n};\n\n#define UART_DEV_NAME_LEN 32\n \nstruct kim_data_s {\n\tlong uim_pid;\n\tstruct platform_device *kim_pdev;\n\tstruct completion kim_rcvd, ldisc_installed;\n\tchar resp_buffer[30];\n\tconst struct firmware *fw_entry;\n\tunsigned nshutdown;\n\tunsigned long rx_state;\n\tunsigned long rx_count;\n\tstruct sk_buff *rx_skb;\n\tstruct st_data_s *core_data;\n\tstruct chip_version version;\n\tunsigned char ldisc_install;\n\tunsigned char dev_name[UART_DEV_NAME_LEN + 1];\n\tunsigned flow_cntrl;\n\tunsigned baud_rate;\n};\n\n \nlong st_kim_start(void *);\nlong st_kim_stop(void *);\n\nvoid st_kim_complete(void *);\nvoid kim_st_list_protocols(struct st_data_s *, void *);\nvoid st_kim_recv(void *disc_data, const u8 *data, size_t count);\n\n\n \n#define ACTION_SEND_COMMAND     1\n#define ACTION_WAIT_EVENT       2\n#define ACTION_SERIAL           3\n#define ACTION_DELAY            4\n#define ACTION_RUN_SCRIPT       5\n#define ACTION_REMARKS          6\n\n \nstruct bts_header {\n\tu32 magic;\n\tu32 version;\n\tu8 future[24];\n\tu8 actions[];\n} __attribute__ ((packed));\n\n \nstruct bts_action {\n\tu16 type;\n\tu16 size;\n\tu8 data[];\n} __attribute__ ((packed));\n\nstruct bts_action_send {\n\tu8 data[0];\n} __attribute__ ((packed));\n\nstruct bts_action_wait {\n\tu32 msec;\n\tu32 size;\n\tu8 data[];\n} __attribute__ ((packed));\n\nstruct bts_action_delay {\n\tu32 msec;\n} __attribute__ ((packed));\n\nstruct bts_action_serial {\n\tu32 baud;\n\tu32 flow_control;\n} __attribute__ ((packed));\n\n \nstruct hci_command {\n\tu8 prefix;\n\tu16 opcode;\n\tu8 plen;\n\tu32 speed;\n} __attribute__ ((packed));\n\n \n\n \n#define ST_W4_PACKET_TYPE       0\n#define ST_W4_HEADER\t\t1\n#define ST_W4_DATA\t\t2\n\n \n#define ST_LL_ASLEEP               0\n#define ST_LL_ASLEEP_TO_AWAKE      1\n#define ST_LL_AWAKE                2\n#define ST_LL_AWAKE_TO_ASLEEP      3\n#define ST_LL_INVALID\t\t   4\n\n \n#define LL_SLEEP_IND\t0x30\n#define LL_SLEEP_ACK\t0x31\n#define LL_WAKE_UP_IND\t0x32\n#define LL_WAKE_UP_ACK\t0x33\n\n \nlong st_ll_init(struct st_data_s *);\nlong st_ll_deinit(struct st_data_s *);\n\n \nvoid st_ll_enable(struct st_data_s *);\nvoid st_ll_disable(struct st_data_s *);\n\n \nunsigned long st_ll_getstate(struct st_data_s *);\nunsigned long st_ll_sleep_state(struct st_data_s *, unsigned char);\nvoid st_ll_wakeup(struct st_data_s *);\n\n \n\nstruct fm_event_hdr {\n\tu8 plen;\n} __attribute__ ((packed));\n\n#define FM_MAX_FRAME_SIZE 0xFF\t \n#define FM_EVENT_HDR_SIZE 1\t \n#define ST_FM_CH8_PKT 0x8\n\n \nstruct gps_event_hdr {\n\tu8 opcode;\n\tu16 plen;\n} __attribute__ ((packed));\n\n \nstruct ti_st_plat_data {\n\tu32 nshutdown_gpio;\n\tunsigned char dev_name[UART_DEV_NAME_LEN];  \n\tu32 flow_cntrl;  \n\tu32 baud_rate;\n\tint (*suspend)(struct platform_device *, pm_message_t);\n\tint (*resume)(struct platform_device *);\n\tint (*chip_enable) (struct kim_data_s *);\n\tint (*chip_disable) (struct kim_data_s *);\n\tint (*chip_asleep) (struct kim_data_s *);\n\tint (*chip_awake) (struct kim_data_s *);\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}