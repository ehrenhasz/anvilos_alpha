{
  "module_name": "iversion.h",
  "hash_id": "1c95130a899cd56b3ca00c71f676077da86af5e68cbf8217015f3eb7839f965c",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/iversion.h",
  "human_readable_source": " \n#ifndef _LINUX_IVERSION_H\n#define _LINUX_IVERSION_H\n\n#include <linux/fs.h>\n\n \n\n \n#define I_VERSION_QUERIED_SHIFT\t(1)\n#define I_VERSION_QUERIED\t(1ULL << (I_VERSION_QUERIED_SHIFT - 1))\n#define I_VERSION_INCREMENT\t(1ULL << I_VERSION_QUERIED_SHIFT)\n\n \nstatic inline void\ninode_set_iversion_raw(struct inode *inode, u64 val)\n{\n\tatomic64_set(&inode->i_version, val);\n}\n\n \nstatic inline u64\ninode_peek_iversion_raw(const struct inode *inode)\n{\n\treturn atomic64_read(&inode->i_version);\n}\n\n \nstatic inline void\ninode_set_max_iversion_raw(struct inode *inode, u64 val)\n{\n\tu64 cur = inode_peek_iversion_raw(inode);\n\n\tdo {\n\t\tif (cur > val)\n\t\t\tbreak;\n\t} while (!atomic64_try_cmpxchg(&inode->i_version, &cur, val));\n}\n\n \nstatic inline void\ninode_set_iversion(struct inode *inode, u64 val)\n{\n\tinode_set_iversion_raw(inode, val << I_VERSION_QUERIED_SHIFT);\n}\n\n \nstatic inline void\ninode_set_iversion_queried(struct inode *inode, u64 val)\n{\n\tinode_set_iversion_raw(inode, (val << I_VERSION_QUERIED_SHIFT) |\n\t\t\t\tI_VERSION_QUERIED);\n}\n\nbool inode_maybe_inc_iversion(struct inode *inode, bool force);\n\n \nstatic inline void\ninode_inc_iversion(struct inode *inode)\n{\n\tinode_maybe_inc_iversion(inode, true);\n}\n\n \nstatic inline bool\ninode_iversion_need_inc(struct inode *inode)\n{\n\treturn inode_peek_iversion_raw(inode) & I_VERSION_QUERIED;\n}\n\n \nstatic inline void\ninode_inc_iversion_raw(struct inode *inode)\n{\n\tatomic64_inc(&inode->i_version);\n}\n\n \nstatic inline u64\ninode_peek_iversion(const struct inode *inode)\n{\n\treturn inode_peek_iversion_raw(inode) >> I_VERSION_QUERIED_SHIFT;\n}\n\n \nstatic inline u64 time_to_chattr(struct timespec64 *t)\n{\n\tu64 chattr = t->tv_sec;\n\n\tchattr <<= 32;\n\tchattr += t->tv_nsec;\n\treturn chattr;\n}\n\nu64 inode_query_iversion(struct inode *inode);\n\n \nstatic inline bool\ninode_eq_iversion_raw(const struct inode *inode, u64 old)\n{\n\treturn inode_peek_iversion_raw(inode) == old;\n}\n\n \nstatic inline bool\ninode_eq_iversion(const struct inode *inode, u64 old)\n{\n\treturn inode_peek_iversion(inode) == old;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}