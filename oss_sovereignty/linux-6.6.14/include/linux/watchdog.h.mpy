{
  "module_name": "watchdog.h",
  "hash_id": "1cc9cde5c7c37cee81813a4a9c605597a802c57634e6fddfa0995a873812efd3",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/watchdog.h",
  "human_readable_source": " \n \n#ifndef _LINUX_WATCHDOG_H\n#define _LINUX_WATCHDOG_H\n\n\n#include <linux/bitops.h>\n#include <linux/cdev.h>\n#include <linux/device.h>\n#include <linux/kernel.h>\n#include <linux/notifier.h>\n#include <uapi/linux/watchdog.h>\n\nstruct watchdog_ops;\nstruct watchdog_device;\nstruct watchdog_core_data;\nstruct watchdog_governor;\n\n \nstruct watchdog_ops {\n\tstruct module *owner;\n\t \n\tint (*start)(struct watchdog_device *);\n\t \n\tint (*stop)(struct watchdog_device *);\n\tint (*ping)(struct watchdog_device *);\n\tunsigned int (*status)(struct watchdog_device *);\n\tint (*set_timeout)(struct watchdog_device *, unsigned int);\n\tint (*set_pretimeout)(struct watchdog_device *, unsigned int);\n\tunsigned int (*get_timeleft)(struct watchdog_device *);\n\tint (*restart)(struct watchdog_device *, unsigned long, void *);\n\tlong (*ioctl)(struct watchdog_device *, unsigned int, unsigned long);\n};\n\n \nstruct watchdog_device {\n\tint id;\n\tstruct device *parent;\n\tconst struct attribute_group **groups;\n\tconst struct watchdog_info *info;\n\tconst struct watchdog_ops *ops;\n\tconst struct watchdog_governor *gov;\n\tunsigned int bootstatus;\n\tunsigned int timeout;\n\tunsigned int pretimeout;\n\tunsigned int min_timeout;\n\tunsigned int max_timeout;\n\tunsigned int min_hw_heartbeat_ms;\n\tunsigned int max_hw_heartbeat_ms;\n\tstruct notifier_block reboot_nb;\n\tstruct notifier_block restart_nb;\n\tstruct notifier_block pm_nb;\n\tvoid *driver_data;\n\tstruct watchdog_core_data *wd_data;\n\tunsigned long status;\n \n#define WDOG_ACTIVE\t\t0\t \n#define WDOG_NO_WAY_OUT\t\t1\t \n#define WDOG_STOP_ON_REBOOT\t2\t \n#define WDOG_HW_RUNNING\t\t3\t \n#define WDOG_STOP_ON_UNREGISTER\t4\t \n#define WDOG_NO_PING_ON_SUSPEND\t5\t \n\tstruct list_head deferred;\n};\n\n#define WATCHDOG_NOWAYOUT\t\tIS_BUILTIN(CONFIG_WATCHDOG_NOWAYOUT)\n#define WATCHDOG_NOWAYOUT_INIT_STATUS\t(WATCHDOG_NOWAYOUT << WDOG_NO_WAY_OUT)\n\n \nstatic inline bool watchdog_active(struct watchdog_device *wdd)\n{\n\treturn test_bit(WDOG_ACTIVE, &wdd->status);\n}\n\n \nstatic inline bool watchdog_hw_running(struct watchdog_device *wdd)\n{\n\treturn test_bit(WDOG_HW_RUNNING, &wdd->status);\n}\n\n \nstatic inline void watchdog_set_nowayout(struct watchdog_device *wdd, bool nowayout)\n{\n\tif (nowayout)\n\t\tset_bit(WDOG_NO_WAY_OUT, &wdd->status);\n}\n\n \nstatic inline void watchdog_stop_on_reboot(struct watchdog_device *wdd)\n{\n\tset_bit(WDOG_STOP_ON_REBOOT, &wdd->status);\n}\n\n \nstatic inline void watchdog_stop_on_unregister(struct watchdog_device *wdd)\n{\n\tset_bit(WDOG_STOP_ON_UNREGISTER, &wdd->status);\n}\n\n \nstatic inline void watchdog_stop_ping_on_suspend(struct watchdog_device *wdd)\n{\n\tset_bit(WDOG_NO_PING_ON_SUSPEND, &wdd->status);\n}\n\n \nstatic inline bool watchdog_timeout_invalid(struct watchdog_device *wdd, unsigned int t)\n{\n\t \n\treturn t > UINT_MAX / 1000 || t < wdd->min_timeout ||\n\t\t(!wdd->max_hw_heartbeat_ms && wdd->max_timeout &&\n\t\t t > wdd->max_timeout);\n}\n\n \nstatic inline bool watchdog_pretimeout_invalid(struct watchdog_device *wdd,\n\t\t\t\t\t       unsigned int t)\n{\n\treturn t && wdd->timeout && t >= wdd->timeout;\n}\n\n \nstatic inline void watchdog_set_drvdata(struct watchdog_device *wdd, void *data)\n{\n\twdd->driver_data = data;\n}\n\nstatic inline void *watchdog_get_drvdata(struct watchdog_device *wdd)\n{\n\treturn wdd->driver_data;\n}\n\n \n#if IS_ENABLED(CONFIG_WATCHDOG_PRETIMEOUT_GOV)\nvoid watchdog_notify_pretimeout(struct watchdog_device *wdd);\n#else\nstatic inline void watchdog_notify_pretimeout(struct watchdog_device *wdd)\n{\n\tpr_alert(\"watchdog%d: pretimeout event\\n\", wdd->id);\n}\n#endif\n\n \nvoid watchdog_set_restart_priority(struct watchdog_device *wdd, int priority);\nextern int watchdog_init_timeout(struct watchdog_device *wdd,\n\t\t\t\t  unsigned int timeout_parm, struct device *dev);\nextern int watchdog_register_device(struct watchdog_device *);\nextern void watchdog_unregister_device(struct watchdog_device *);\nint watchdog_dev_suspend(struct watchdog_device *wdd);\nint watchdog_dev_resume(struct watchdog_device *wdd);\n\nint watchdog_set_last_hw_keepalive(struct watchdog_device *, unsigned int);\n\n \nint devm_watchdog_register_device(struct device *dev, struct watchdog_device *);\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}