{
  "module_name": "poll.h",
  "hash_id": "d928b913c98d3517c6e3e50f37b6f82a00507d7c140b7ee11be13e4839a0262d",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/poll.h",
  "human_readable_source": " \n#ifndef _LINUX_POLL_H\n#define _LINUX_POLL_H\n\n\n#include <linux/compiler.h>\n#include <linux/ktime.h>\n#include <linux/wait.h>\n#include <linux/string.h>\n#include <linux/fs.h>\n#include <linux/uaccess.h>\n#include <uapi/linux/poll.h>\n#include <uapi/linux/eventpoll.h>\n\n \n#ifdef __clang__\n#define MAX_STACK_ALLOC 768\n#else\n#define MAX_STACK_ALLOC 832\n#endif\n#define FRONTEND_STACK_ALLOC\t256\n#define SELECT_STACK_ALLOC\tFRONTEND_STACK_ALLOC\n#define POLL_STACK_ALLOC\tFRONTEND_STACK_ALLOC\n#define WQUEUES_STACK_ALLOC\t(MAX_STACK_ALLOC - FRONTEND_STACK_ALLOC)\n#define N_INLINE_POLL_ENTRIES\t(WQUEUES_STACK_ALLOC / sizeof(struct poll_table_entry))\n\n#define DEFAULT_POLLMASK (EPOLLIN | EPOLLOUT | EPOLLRDNORM | EPOLLWRNORM)\n\nstruct poll_table_struct;\n\n \ntypedef void (*poll_queue_proc)(struct file *, wait_queue_head_t *, struct poll_table_struct *);\n\n \ntypedef struct poll_table_struct {\n\tpoll_queue_proc _qproc;\n\t__poll_t _key;\n} poll_table;\n\nstatic inline void poll_wait(struct file * filp, wait_queue_head_t * wait_address, poll_table *p)\n{\n\tif (p && p->_qproc && wait_address)\n\t\tp->_qproc(filp, wait_address, p);\n}\n\n \nstatic inline bool poll_does_not_wait(const poll_table *p)\n{\n\treturn p == NULL || p->_qproc == NULL;\n}\n\n \nstatic inline __poll_t poll_requested_events(const poll_table *p)\n{\n\treturn p ? p->_key : ~(__poll_t)0;\n}\n\nstatic inline void init_poll_funcptr(poll_table *pt, poll_queue_proc qproc)\n{\n\tpt->_qproc = qproc;\n\tpt->_key   = ~(__poll_t)0;  \n}\n\nstatic inline bool file_can_poll(struct file *file)\n{\n\treturn file->f_op->poll;\n}\n\nstatic inline __poll_t vfs_poll(struct file *file, struct poll_table_struct *pt)\n{\n\tif (unlikely(!file->f_op->poll))\n\t\treturn DEFAULT_POLLMASK;\n\treturn file->f_op->poll(file, pt);\n}\n\nstruct poll_table_entry {\n\tstruct file *filp;\n\t__poll_t key;\n\twait_queue_entry_t wait;\n\twait_queue_head_t *wait_address;\n};\n\n \nstruct poll_wqueues {\n\tpoll_table pt;\n\tstruct poll_table_page *table;\n\tstruct task_struct *polling_task;\n\tint triggered;\n\tint error;\n\tint inline_index;\n\tstruct poll_table_entry inline_entries[N_INLINE_POLL_ENTRIES];\n};\n\nextern void poll_initwait(struct poll_wqueues *pwq);\nextern void poll_freewait(struct poll_wqueues *pwq);\nextern u64 select_estimate_accuracy(struct timespec64 *tv);\n\n#define MAX_INT64_SECONDS (((s64)(~((u64)0)>>1)/HZ)-1)\n\nextern int core_sys_select(int n, fd_set __user *inp, fd_set __user *outp,\n\t\t\t   fd_set __user *exp, struct timespec64 *end_time);\n\nextern int poll_select_set_timeout(struct timespec64 *to, time64_t sec,\n\t\t\t\t   long nsec);\n\n#define __MAP(v, from, to) \\\n\t(from < to ? (v & from) * (to/from) : (v & from) / (from/to))\n\nstatic inline __u16 mangle_poll(__poll_t val)\n{\n\t__u16 v = (__force __u16)val;\n#define M(X) __MAP(v, (__force __u16)EPOLL##X, POLL##X)\n\treturn M(IN) | M(OUT) | M(PRI) | M(ERR) | M(NVAL) |\n\t\tM(RDNORM) | M(RDBAND) | M(WRNORM) | M(WRBAND) |\n\t\tM(HUP) | M(RDHUP) | M(MSG);\n#undef M\n}\n\nstatic inline __poll_t demangle_poll(u16 val)\n{\n#define M(X) (__force __poll_t)__MAP(val, POLL##X, (__force __u16)EPOLL##X)\n\treturn M(IN) | M(OUT) | M(PRI) | M(ERR) | M(NVAL) |\n\t\tM(RDNORM) | M(RDBAND) | M(WRNORM) | M(WRBAND) |\n\t\tM(HUP) | M(RDHUP) | M(MSG);\n#undef M\n}\n#undef __MAP\n\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}