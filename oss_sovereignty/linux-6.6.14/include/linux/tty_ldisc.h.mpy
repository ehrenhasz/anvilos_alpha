{
  "module_name": "tty_ldisc.h",
  "hash_id": "f1e6044b807d2b23a39e8170086461e220ba0cc65c2d2c25d1ab399981667482",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/tty_ldisc.h",
  "human_readable_source": " \n#ifndef _LINUX_TTY_LDISC_H\n#define _LINUX_TTY_LDISC_H\n\nstruct tty_struct;\n\n#include <linux/fs.h>\n#include <linux/wait.h>\n#include <linux/atomic.h>\n#include <linux/list.h>\n#include <linux/lockdep.h>\n#include <linux/seq_file.h>\n\n \nstruct ld_semaphore {\n\tatomic_long_t\t\tcount;\n\traw_spinlock_t\t\twait_lock;\n\tunsigned int\t\twait_readers;\n\tstruct list_head\tread_wait;\n\tstruct list_head\twrite_wait;\n#ifdef CONFIG_DEBUG_LOCK_ALLOC\n\tstruct lockdep_map\tdep_map;\n#endif\n};\n\nvoid __init_ldsem(struct ld_semaphore *sem, const char *name,\n\t\t\t struct lock_class_key *key);\n\n#define init_ldsem(sem)\t\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\\\n\tstatic struct lock_class_key __key;\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t__init_ldsem((sem), #sem, &__key);\t\t\t\\\n} while (0)\n\n\nint ldsem_down_read(struct ld_semaphore *sem, long timeout);\nint ldsem_down_read_trylock(struct ld_semaphore *sem);\nint ldsem_down_write(struct ld_semaphore *sem, long timeout);\nint ldsem_down_write_trylock(struct ld_semaphore *sem);\nvoid ldsem_up_read(struct ld_semaphore *sem);\nvoid ldsem_up_write(struct ld_semaphore *sem);\n\n#ifdef CONFIG_DEBUG_LOCK_ALLOC\nint ldsem_down_read_nested(struct ld_semaphore *sem, int subclass,\n\t\tlong timeout);\nint ldsem_down_write_nested(struct ld_semaphore *sem, int subclass,\n\t\tlong timeout);\n#else\n# define ldsem_down_read_nested(sem, subclass, timeout)\t\t\\\n\t\tldsem_down_read(sem, timeout)\n# define ldsem_down_write_nested(sem, subclass, timeout)\t\\\n\t\tldsem_down_write(sem, timeout)\n#endif\n\n \nstruct tty_ldisc_ops {\n\tchar\t*name;\n\tint\tnum;\n\n\t \n\tint\t(*open)(struct tty_struct *tty);\n\tvoid\t(*close)(struct tty_struct *tty);\n\tvoid\t(*flush_buffer)(struct tty_struct *tty);\n\tssize_t\t(*read)(struct tty_struct *tty, struct file *file, u8 *buf,\n\t\t\tsize_t nr, void **cookie, unsigned long offset);\n\tssize_t\t(*write)(struct tty_struct *tty, struct file *file,\n\t\t\t const u8 *buf, size_t nr);\n\tint\t(*ioctl)(struct tty_struct *tty, unsigned int cmd,\n\t\t\tunsigned long arg);\n\tint\t(*compat_ioctl)(struct tty_struct *tty, unsigned int cmd,\n\t\t\tunsigned long arg);\n\tvoid\t(*set_termios)(struct tty_struct *tty, const struct ktermios *old);\n\t__poll_t (*poll)(struct tty_struct *tty, struct file *file,\n\t\t\t     struct poll_table_struct *wait);\n\tvoid\t(*hangup)(struct tty_struct *tty);\n\n\t \n\tvoid\t(*receive_buf)(struct tty_struct *tty, const u8 *cp,\n\t\t\t       const u8 *fp, size_t count);\n\tvoid\t(*write_wakeup)(struct tty_struct *tty);\n\tvoid\t(*dcd_change)(struct tty_struct *tty, bool active);\n\tsize_t\t(*receive_buf2)(struct tty_struct *tty, const u8 *cp,\n\t\t\t\tconst u8 *fp, size_t count);\n\tvoid\t(*lookahead_buf)(struct tty_struct *tty, const u8 *cp,\n\t\t\t\t const u8 *fp, size_t count);\n\n\tstruct  module *owner;\n};\n\nstruct tty_ldisc {\n\tstruct tty_ldisc_ops *ops;\n\tstruct tty_struct *tty;\n};\n\n#define MODULE_ALIAS_LDISC(ldisc) \\\n\tMODULE_ALIAS(\"tty-ldisc-\" __stringify(ldisc))\n\nextern const struct seq_operations tty_ldiscs_seq_ops;\n\nstruct tty_ldisc *tty_ldisc_ref(struct tty_struct *);\nvoid tty_ldisc_deref(struct tty_ldisc *);\nstruct tty_ldisc *tty_ldisc_ref_wait(struct tty_struct *);\n\nvoid tty_ldisc_flush(struct tty_struct *tty);\n\nint tty_register_ldisc(struct tty_ldisc_ops *new_ldisc);\nvoid tty_unregister_ldisc(struct tty_ldisc_ops *ldisc);\nint tty_set_ldisc(struct tty_struct *tty, int disc);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}