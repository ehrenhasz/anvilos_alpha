{
  "module_name": "pktcdvd.h",
  "hash_id": "65904efa3aa7fbb91da5f09b75b0c1eacded2396657cc017ec66b6759f292a14",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/pktcdvd.h",
  "human_readable_source": " \n#ifndef __PKTCDVD_H\n#define __PKTCDVD_H\n\n#include <linux/blkdev.h>\n#include <linux/completion.h>\n#include <linux/cdrom.h>\n#include <linux/kobject.h>\n#include <linux/sysfs.h>\n#include <linux/mempool.h>\n#include <uapi/linux/pktcdvd.h>\n\n \n#define PKT_WRITE_CONGESTION_ON    10000\n#define PKT_WRITE_CONGESTION_OFF   9000\n\n\nstruct packet_settings\n{\n\t__u32\t\t\tsize;\t\t \n\t__u8\t\t\tfp;\t\t \n\t__u8\t\t\tlink_loss;\t \n\t__u8\t\t\twrite_type;\n\t__u8\t\t\ttrack_mode;\n\t__u8\t\t\tblock_mode;\n};\n\n \nstruct packet_stats\n{\n\tunsigned long\t\tpkt_started;\n\tunsigned long\t\tpkt_ended;\n\tunsigned long\t\tsecs_w;\n\tunsigned long\t\tsecs_rg;\n\tunsigned long\t\tsecs_r;\n};\n\nstruct packet_cdrw\n{\n\tstruct list_head\tpkt_free_list;\n\tstruct list_head\tpkt_active_list;\n\tspinlock_t\t\tactive_list_lock;  \n\tstruct task_struct\t*thread;\n\tatomic_t\t\tpending_bios;\n};\n\n \n#define HI_SPEED_SWITCH 512\n\nstruct packet_iosched\n{\n\tatomic_t\t\tattention;\t \n\tint\t\t\twriting;\t \n\tspinlock_t\t\tlock;\t\t \n\tstruct bio_list\t\tread_queue;\n\tstruct bio_list\t\twrite_queue;\n\tsector_t\t\tlast_write;\t \n\tint\t\t\tsuccessive_reads;\n};\n\n \n#if (PAGE_SIZE % CD_FRAMESIZE) != 0\n#error \"PAGE_SIZE must be a multiple of CD_FRAMESIZE\"\n#endif\n#define PACKET_MAX_SIZE\t\t128\n#define FRAMES_PER_PAGE\t\t(PAGE_SIZE / CD_FRAMESIZE)\n#define PACKET_MAX_SECTORS\t(PACKET_MAX_SIZE * CD_FRAMESIZE >> 9)\n\nenum packet_data_state {\n\tPACKET_IDLE_STATE,\t\t\t \n\tPACKET_WAITING_STATE,\t\t\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t \n\tPACKET_READ_WAIT_STATE,\t\t\t \n\tPACKET_WRITE_WAIT_STATE,\t\t \n\tPACKET_RECOVERY_STATE,\t\t\t \n\tPACKET_FINISHED_STATE,\t\t\t \n\n\tPACKET_NUM_STATES\t\t\t \n};\n\n \nstruct pktcdvd_device;\n\nstruct packet_data\n{\n\tstruct list_head\tlist;\n\n\tspinlock_t\t\tlock;\t\t \n\t\t\t\t\t\t \n\n\tstruct bio_list\t\torig_bios;\t \n\t\t\t\t\t\t \n\tint\t\t\twrite_size;\t \n\t\t\t\t\t\t \n\n\tstruct bio\t\t*w_bio;\t\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t \n\tsector_t\t\tsector;\t\t \n\tint\t\t\tframes;\t\t \n\n\tenum packet_data_state\tstate;\t\t \n\tatomic_t\t\trun_sm;\t\t \n\t\t\t\t\t\t \n\tlong\t\t\tsleep_time;\t \n\t\t\t\t\t\t \n\n\tatomic_t\t\tio_wait;\t \n\tatomic_t\t\tio_errors;\t \n\n\tstruct bio\t\t*r_bios[PACKET_MAX_SIZE];  \n\tstruct page\t\t*pages[PACKET_MAX_SIZE / FRAMES_PER_PAGE];\n\n\tint\t\t\tcache_valid;\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t \n\n\tint\t\t\tid;\t\t \n\tstruct pktcdvd_device\t*pd;\n};\n\nstruct pkt_rb_node {\n\tstruct rb_node\t\trb_node;\n\tstruct bio\t\t*bio;\n};\n\nstruct packet_stacked_data\n{\n\tstruct bio\t\t*bio;\t\t \n\tstruct pktcdvd_device\t*pd;\n};\n#define PSD_POOL_SIZE\t\t64\n\nstruct pktcdvd_device\n{\n\tstruct block_device\t*bdev;\t\t \n\tdev_t\t\t\tpkt_dev;\t \n\tstruct packet_settings\tsettings;\n\tstruct packet_stats\tstats;\n\tint\t\t\trefcnt;\t\t \n\tint\t\t\twrite_speed;\t \n\tint\t\t\tread_speed;\t \n\tunsigned long\t\toffset;\t\t \n\t__u8\t\t\tmode_offset;\t \n\t__u8\t\t\ttype;\n\tunsigned long\t\tflags;\n\t__u16\t\t\tmmc3_profile;\n\t__u32\t\t\tnwa;\t\t \n\t__u32\t\t\tlra;\t\t \n\tstruct packet_cdrw\tcdrw;\n\twait_queue_head_t\twqueue;\n\n\tspinlock_t\t\tlock;\t\t \n\tstruct rb_root\t\tbio_queue;\t \n\tint\t\t\tbio_queue_size;\t \n\tbool\t\t\tcongested;\t \n\tsector_t\t\tcurrent_sector;\t \n\tatomic_t\t\tscan_queue;\t \n\t\t\t\t\t\t \n\tmempool_t\t\trb_pool;\t \n\n\tstruct packet_iosched   iosched;\n\tstruct gendisk\t\t*disk;\n\n\tint\t\t\twrite_congestion_off;\n\tint\t\t\twrite_congestion_on;\n\n\tstruct device\t\t*dev;\t\t \n\n\tstruct dentry\t\t*dfs_d_root;\t \n\tstruct dentry\t\t*dfs_f_info;\t \n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}