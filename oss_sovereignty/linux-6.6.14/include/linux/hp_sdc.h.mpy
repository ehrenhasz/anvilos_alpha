{
  "module_name": "hp_sdc.h",
  "hash_id": "d511ff6fb3a98e90436d95e0a28be9350b56d695c1b130e34e8cf6407ce6f08d",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/hp_sdc.h",
  "human_readable_source": " \n\n#ifndef _LINUX_HP_SDC_H\n#define _LINUX_HP_SDC_H\n\n#include <linux/interrupt.h>\n#include <linux/types.h>\n#include <linux/time.h>\n#include <linux/timer.h>\n#if defined(__hppa__)\n#include <asm/hardware.h>\n#endif\n\n\n \n#define HP_SDC_MAX_REG_DELAY 20000\n\ntypedef void (hp_sdc_irqhook) (int irq, void *dev_id, \n\t\t\t       uint8_t status, uint8_t data);\n\nint hp_sdc_request_timer_irq(hp_sdc_irqhook *callback);\nint hp_sdc_request_hil_irq(hp_sdc_irqhook *callback);\nint hp_sdc_request_cooked_irq(hp_sdc_irqhook *callback);\nint hp_sdc_release_timer_irq(hp_sdc_irqhook *callback);\nint hp_sdc_release_hil_irq(hp_sdc_irqhook *callback);\nint hp_sdc_release_cooked_irq(hp_sdc_irqhook *callback);\n\ntypedef struct {\n\tint actidx;\t \n\tint idx;\t \n\tint endidx;\t \n\tuint8_t *seq;\t \n\tunion {\n\t  hp_sdc_irqhook   *irqhook;\t \n\t  struct semaphore *semaphore;\t \n\t} act;\n} hp_sdc_transaction;\nint __hp_sdc_enqueue_transaction(hp_sdc_transaction *this);\nint hp_sdc_enqueue_transaction(hp_sdc_transaction *this);\nint hp_sdc_dequeue_transaction(hp_sdc_transaction *this);\n\n \n#define HP_SDC_ACT_PRECMD\t0x01\t\t \n#define HP_SDC_ACT_DATAREG\t0x02\t\t \n#define HP_SDC_ACT_DATAOUT\t0x04\t\t \n#define HP_SDC_ACT_POSTCMD      0x08             \n#define HP_SDC_ACT_DATAIN\t0x10\t\t \n#define HP_SDC_ACT_DURING\t0x1f\n#define HP_SDC_ACT_SEMAPHORE    0x20             \n#define HP_SDC_ACT_CALLBACK\t0x40\t\t \n#define HP_SDC_ACT_DEALLOC\t0x80\t\t \n#define HP_SDC_ACT_AFTER\t0xe0\n#define HP_SDC_ACT_DEAD\t\t0x60\t\t \n\n \n#define HP_SDC_STATUS_IBF\t0x02\t \n\n#define HP_SDC_STATUS_IRQMASK\t0xf0\t \n#define HP_SDC_STATUS_PERIODIC  0x10     \n#define HP_SDC_STATUS_USERTIMER 0x20     \n#define HP_SDC_STATUS_TIMER     0x30     \n#define HP_SDC_STATUS_REG\t0x40\t \n#define HP_SDC_STATUS_HILCMD    0x50\t \n#define HP_SDC_STATUS_HILDATA   0x60\t \n#define HP_SDC_STATUS_PUP\t0x70\t \n#define HP_SDC_STATUS_KCOOKED\t0x80\t \n#define HP_SDC_STATUS_KRPG\t0xc0\t \n#define HP_SDC_STATUS_KMOD_SUP\t0x10\t \n#define HP_SDC_STATUS_KMOD_CUP\t0x20\t \n\n#define HP_SDC_NMISTATUS_FHS\t0x40\t \n\n \n\n#define HP_SDC_USE\t\t0x02\t \n#define HP_SDC_IM\t\t0x04\t \n#define HP_SDC_CFG\t\t0x11\t \n#define HP_SDC_KBLANGUAGE\t0x12\t \n\n#define HP_SDC_D0\t\t0x70\t \n#define HP_SDC_D1\t\t0x71\t \n#define HP_SDC_D2\t\t0x72\t \n#define HP_SDC_D3\t\t0x73\t \n#define HP_SDC_VT1\t\t0x74\t \n#define HP_SDC_VT2\t\t0x75\t \n#define HP_SDC_VT3\t\t0x76\t \n#define HP_SDC_VT4\t\t0x77\t \n#define HP_SDC_KBN\t\t0x78\t \n#define HP_SDC_KBC\t\t0x79\t \n#define HP_SDC_LPS\t\t0x7a\t \n#define HP_SDC_LPC\t\t0x7b\t \n#define HP_SDC_RSV  \t\t0x7c\t \n#define HP_SDC_LPR\t\t0x7d     \n#define HP_SDC_XTD\t\t0x7e     \n#define HP_SDC_STR\t\t0x7f     \n\n \n#define HP_SDC_USE_LOOP\t\t0x04\t \n\n#define HP_SDC_IM_MASK          0x1f     \n#define HP_SDC_IM_FH\t\t0x10\t \n#define HP_SDC_IM_PT\t\t0x08\t \n#define HP_SDC_IM_TIMERS\t0x04\t \n#define HP_SDC_IM_RESET\t\t0x02\t \n#define HP_SDC_IM_HIL\t\t0x01\t \n\n#define HP_SDC_CFG_ROLLOVER\t0x08\t \n#define HP_SDC_CFG_KBD\t\t0x10\t \n#define HP_SDC_CFG_NEW\t\t0x20\t \n#define HP_SDC_CFG_KBD_OLD\t0x03\t \n#define HP_SDC_CFG_KBD_NEW\t0x07\t \n#define HP_SDC_CFG_REV\t\t0x40\t \n#define HP_SDC_CFG_IDPROM\t0x80\t \n\n#define HP_SDC_LPS_NDEV\t\t0x07\t \n#define HP_SDC_LPS_ACSUCC\t0x08\t \n#define HP_SDC_LPS_ACFAIL\t0x80\t \n\n#define HP_SDC_LPC_APE_IPF\t0x01\t \n#define HP_SDC_LPC_ARCONERR\t0x02\t \n#define HP_SDC_LPC_ARCQUIET\t0x03\t \n#define HP_SDC_LPC_COOK\t\t0x10\t \n#define HP_SDC_LPC_RC\t\t0x80\t \n\n#define HP_SDC_XTD_REV\t\t0x07\t \n#define HP_SDC_XTD_REV_STRINGS(val, str) \\\nswitch (val) {\t\t\t\t\t\t\\\n\tcase 0x1: str = \"1820-3712\"; break;\t\t\\\n\tcase 0x2: str = \"1820-4379\"; break;\t\t\\\n\tcase 0x3: str = \"1820-4784\"; break;\t\t\\\n\tdefault: str = \"unknown\";\t\t\t\\\n};\n#define HP_SDC_XTD_BEEPER\t0x08\t \n#define HP_SDC_XTD_BBRTC\t0x20\t \n\n#define HP_SDC_CMD_LOAD_RT\t0x31\t \n#define HP_SDC_CMD_LOAD_FHS\t0x36\t \n#define HP_SDC_CMD_LOAD_MT\t0x38\t \n#define HP_SDC_CMD_LOAD_DT\t0x3B\t \n#define HP_SDC_CMD_LOAD_CT\t0x3E\t \n\n#define HP_SDC_CMD_SET_IM\t0x40     \n\n \n#define HP_SDC_CMD_READ_RAM\t0x00\t \n#define HP_SDC_CMD_READ_USE\t0x02\t \n#define HP_SDC_CMD_READ_IM\t0x04\t \n#define HP_SDC_CMD_READ_KCC\t0x11\t \n#define HP_SDC_CMD_READ_KLC\t0x12\t \n#define HP_SDC_CMD_READ_T1\t0x13\t \n#define HP_SDC_CMD_READ_T2\t0x14\t \n#define HP_SDC_CMD_READ_T3\t0x15\t \n#define HP_SDC_CMD_READ_T4\t0x16\t \n#define HP_SDC_CMD_READ_T5\t0x17\t \n#define HP_SDC_CMD_READ_D0\t0xf0\t \n#define HP_SDC_CMD_READ_D1\t0xf1\t \n#define HP_SDC_CMD_READ_D2\t0xf2\t \n#define HP_SDC_CMD_READ_D3\t0xf3\t \n#define HP_SDC_CMD_READ_VT1\t0xf4\t \n#define HP_SDC_CMD_READ_VT2\t0xf5\t \n#define HP_SDC_CMD_READ_VT3\t0xf6\t \n#define HP_SDC_CMD_READ_VT4\t0xf7\t \n#define HP_SDC_CMD_READ_KBN\t0xf8\t \n#define HP_SDC_CMD_READ_KBC\t0xf9\t \n#define HP_SDC_CMD_READ_LPS\t0xfa\t \n#define HP_SDC_CMD_READ_LPC\t0xfb\t \n#define HP_SDC_CMD_READ_RSV\t0xfc\t \n#define HP_SDC_CMD_READ_LPR\t0xfd\t \n#define HP_SDC_CMD_READ_XTD\t0xfe\t \n#define HP_SDC_CMD_READ_STR\t0xff\t \n\n#define HP_SDC_CMD_SET_ARD\t0xA0\t \n#define HP_SDC_CMD_SET_ARR\t0xA2\t \n#define HP_SDC_CMD_SET_BELL\t0xA3\t \n#define HP_SDC_CMD_SET_RPGR\t0xA6\t \n#define HP_SDC_CMD_SET_RTMS\t0xAD\t \n#define HP_SDC_CMD_SET_RTD\t0xAF\t \n#define HP_SDC_CMD_SET_FHS\t0xB2\t \n#define HP_SDC_CMD_SET_MT\t0xB4\t \n#define HP_SDC_CMD_SET_DT\t0xB7\t \n#define HP_SDC_CMD_SET_CT\t0xBA\t \n#define HP_SDC_CMD_SET_RAMP\t0xC1\t \n#define HP_SDC_CMD_SET_D0\t0xe0\t \n#define HP_SDC_CMD_SET_D1\t0xe1\t \n#define HP_SDC_CMD_SET_D2\t0xe2\t \n#define HP_SDC_CMD_SET_D3\t0xe3\t \n#define HP_SDC_CMD_SET_VT1\t0xe4\t \n#define HP_SDC_CMD_SET_VT2\t0xe5\t \n#define HP_SDC_CMD_SET_VT3\t0xe6\t \n#define HP_SDC_CMD_SET_VT4\t0xe7\t \n#define HP_SDC_CMD_SET_KBN\t0xe8\t \n#define HP_SDC_CMD_SET_KBC\t0xe9\t \n#define HP_SDC_CMD_SET_LPS\t0xea\t \n#define HP_SDC_CMD_SET_LPC\t0xeb\t \n#define HP_SDC_CMD_SET_RSV\t0xec\t \n#define HP_SDC_CMD_SET_LPR\t0xed\t \n#define HP_SDC_CMD_SET_XTD\t0xee\t \n#define HP_SDC_CMD_SET_STR\t0xef\t \n\n#define HP_SDC_CMD_DO_RTCW\t0xc2\t \n#define HP_SDC_CMD_DO_RTCR\t0xc3\t \n#define HP_SDC_CMD_DO_BEEP\t0xc4\t \n#define HP_SDC_CMD_DO_HIL\t0xc5\t \n\n \n#define HP_SDC_DATA\t\t0x40\t \n#define HP_SDC_HIL_CMD\t\t0x50\t \n#define HP_SDC_HIL_R1MASK\t0x0f\t \n#define HP_SDC_HIL_AUTO\t\t0x10\t    \n#define HP_SDC_HIL_ISERR\t0x80\t \n#define HP_SDC_HIL_RC_DONE\t0x80\t \n#define HP_SDC_HIL_ERR\t\t0x81\t \n#define HP_SDC_HIL_TO\t\t0x82\t \n#define HP_SDC_HIL_RC\t\t0x84\t \n#define HP_SDC_HIL_DAT\t\t0x60\t \n\n\ntypedef struct {\n\trwlock_t\tibf_lock;\n\trwlock_t\tlock;\t\t \n\trwlock_t\trtq_lock;\t \n\trwlock_t\thook_lock;\t \n\n\tunsigned int\tirq, nmi;\t \n\tunsigned long\tbase_io, status_io, data_io;  \n\n\tuint8_t\t\tim;\t\t \n\tint\t\tset_im; \t \n\n\tint\t\tibf;\t\t \n\tuint8_t\t\twi;\t\t \n\tuint8_t\t\tr7[4];           \n\tuint8_t\t\tr11, r7e;\t \n\n\thp_sdc_irqhook\t*timer, *reg, *hil, *pup, *cooked;\n\n#define HP_SDC_QUEUE_LEN 16\n\thp_sdc_transaction *tq[HP_SDC_QUEUE_LEN];  \n\n\tint\t\trcurr, rqty;\t \n\tktime_t\t\trtime;\t\t \n\tint\t\twcurr;\t\t \n\n\tint\t\tdev_err;\t \n#if defined(__hppa__)\n\tstruct parisc_device\t*dev;\n#elif defined(__mc68000__)\n\tvoid\t\t*dev;\n#else\n#error No support for device registration on this arch yet.\n#endif\n\n\tstruct timer_list kicker;\t \n\tstruct tasklet_struct\ttask;\n\n} hp_i8042_sdc;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}