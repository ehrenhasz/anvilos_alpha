{
  "module_name": "nvme-fc-driver.h",
  "hash_id": "0994023132e8374cc01ea7f0eeca270a70a1078e7f5d34fb6152c9daaaaf1920",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/nvme-fc-driver.h",
  "human_readable_source": " \n \n\n#ifndef _NVME_FC_DRIVER_H\n#define _NVME_FC_DRIVER_H 1\n\n#include <linux/scatterlist.h>\n#include <linux/blk-mq.h>\n\n\n \n\n \nstruct nvmefc_ls_req {\n\tvoid\t\t\t*rqstaddr;\n\tdma_addr_t\t\trqstdma;\n\tu32\t\t\trqstlen;\n\tvoid\t\t\t*rspaddr;\n\tdma_addr_t\t\trspdma;\n\tu32\t\t\trsplen;\n\tu32\t\t\ttimeout;\n\n\tvoid\t\t\t*private;\n\n\tvoid (*done)(struct nvmefc_ls_req *req, int status);\n\n} __aligned(sizeof(u64));\t \n\n\n \nstruct nvmefc_ls_rsp {\n\tvoid\t\t*rspbuf;\n\tdma_addr_t\trspdma;\n\tu16\t\trsplen;\n\n\tvoid (*done)(struct nvmefc_ls_rsp *rsp);\n\tvoid\t\t*nvme_fc_private;\t \n};\n\n\n\n \n\n\n \nstruct nvme_fc_port_info {\n\tu64\t\t\tnode_name;\n\tu64\t\t\tport_name;\n\tu32\t\t\tport_role;\n\tu32\t\t\tport_id;\n\tu32\t\t\tdev_loss_tmo;\n};\n\nenum nvmefc_fcp_datadir {\n\tNVMEFC_FCP_NODATA,\t \n\tNVMEFC_FCP_WRITE,\n\tNVMEFC_FCP_READ,\n};\n\n\n \nstruct nvmefc_fcp_req {\n\tvoid\t\t\t*cmdaddr;\n\tvoid\t\t\t*rspaddr;\n\tdma_addr_t\t\tcmddma;\n\tdma_addr_t\t\trspdma;\n\tu16\t\t\tcmdlen;\n\tu16\t\t\trsplen;\n\n\tu32\t\t\tpayload_length;\n\tstruct sg_table\t\tsg_table;\n\tstruct scatterlist\t*first_sgl;\n\tint\t\t\tsg_cnt;\n\tenum nvmefc_fcp_datadir\tio_dir;\n\n\tvoid (*done)(struct nvmefc_fcp_req *req);\n\n\tvoid\t\t\t*private;\n\n\t__le16\t\t\tsqid;\n\n\tu16\t\t\trcv_rsplen;\n\tu32\t\t\ttransferred_length;\n\tu32\t\t\tstatus;\n} __aligned(sizeof(u64));\t \n\n\n \nenum nvme_fc_obj_state {\n\tFC_OBJSTATE_UNKNOWN,\n\tFC_OBJSTATE_NOTPRESENT,\n\tFC_OBJSTATE_ONLINE,\n\tFC_OBJSTATE_OFFLINE,\t\t \n\tFC_OBJSTATE_BLOCKED,\n\tFC_OBJSTATE_BYPASSED,\n\tFC_OBJSTATE_DIAGNOSTICS,\n\tFC_OBJSTATE_LINKDOWN,\n\tFC_OBJSTATE_ERROR,\n\tFC_OBJSTATE_LOOPBACK,\n\tFC_OBJSTATE_DELETED,\n};\n\n\n \nstruct nvme_fc_local_port {\n\t \n\tu32 port_num;\n\tu32 port_role;\n\tu64 node_name;\n\tu64 port_name;\n\n\tvoid *private;\n\n\t \n\tu32 port_id;\n\tenum nvme_fc_obj_state port_state;\n} __aligned(sizeof(u64));\t \n\n\n \nstruct nvme_fc_remote_port {\n\t \n\tu32 port_num;\n\tu32 port_role;\n\tu64 node_name;\n\tu64 port_name;\n\tstruct nvme_fc_local_port *localport;\n\tvoid *private;\n\tu32 dev_loss_tmo;\n\n\t \n\tu32 port_id;\n\tenum nvme_fc_obj_state port_state;\n} __aligned(sizeof(u64));\t \n\n\n \nstruct nvme_fc_port_template {\n\t \n\tvoid\t(*localport_delete)(struct nvme_fc_local_port *);\n\tvoid\t(*remoteport_delete)(struct nvme_fc_remote_port *);\n\tint\t(*create_queue)(struct nvme_fc_local_port *,\n\t\t\t\tunsigned int qidx, u16 qsize,\n\t\t\t\tvoid **handle);\n\tvoid\t(*delete_queue)(struct nvme_fc_local_port *,\n\t\t\t\tunsigned int qidx, void *handle);\n\tint\t(*ls_req)(struct nvme_fc_local_port *,\n\t\t\t\tstruct nvme_fc_remote_port *,\n\t\t\t\tstruct nvmefc_ls_req *);\n\tint\t(*fcp_io)(struct nvme_fc_local_port *,\n\t\t\t\tstruct nvme_fc_remote_port *,\n\t\t\t\tvoid *hw_queue_handle,\n\t\t\t\tstruct nvmefc_fcp_req *);\n\tvoid\t(*ls_abort)(struct nvme_fc_local_port *,\n\t\t\t\tstruct nvme_fc_remote_port *,\n\t\t\t\tstruct nvmefc_ls_req *);\n\tvoid\t(*fcp_abort)(struct nvme_fc_local_port *,\n\t\t\t\tstruct nvme_fc_remote_port *,\n\t\t\t\tvoid *hw_queue_handle,\n\t\t\t\tstruct nvmefc_fcp_req *);\n\tint\t(*xmt_ls_rsp)(struct nvme_fc_local_port *localport,\n\t\t\t\tstruct nvme_fc_remote_port *rport,\n\t\t\t\tstruct nvmefc_ls_rsp *ls_rsp);\n\tvoid\t(*map_queues)(struct nvme_fc_local_port *localport,\n\t\t\t      struct blk_mq_queue_map *map);\n\n\tu32\tmax_hw_queues;\n\tu16\tmax_sgl_segments;\n\tu16\tmax_dif_sgl_segments;\n\tu64\tdma_boundary;\n\n\t \n\tu32\tlocal_priv_sz;\n\tu32\tremote_priv_sz;\n\tu32\tlsrqst_priv_sz;\n\tu32\tfcprqst_priv_sz;\n};\n\n\n \n\nint nvme_fc_register_localport(struct nvme_fc_port_info *pinfo,\n\t\t\tstruct nvme_fc_port_template *template,\n\t\t\tstruct device *dev,\n\t\t\tstruct nvme_fc_local_port **lport_p);\n\nint nvme_fc_unregister_localport(struct nvme_fc_local_port *localport);\n\nint nvme_fc_register_remoteport(struct nvme_fc_local_port *localport,\n\t\t\tstruct nvme_fc_port_info *pinfo,\n\t\t\tstruct nvme_fc_remote_port **rport_p);\n\nint nvme_fc_unregister_remoteport(struct nvme_fc_remote_port *remoteport);\n\nvoid nvme_fc_rescan_remoteport(struct nvme_fc_remote_port *remoteport);\n\nint nvme_fc_set_remoteport_devloss(struct nvme_fc_remote_port *remoteport,\n\t\t\tu32 dev_loss_tmo);\n\n \nint nvme_fc_rcv_ls_req(struct nvme_fc_remote_port *remoteport,\n\t\t\tstruct nvmefc_ls_rsp *lsrsp,\n\t\t\tvoid *lsreqbuf, u32 lsreqbuf_len);\n\n\n \nchar *nvme_fc_io_getuuid(struct nvmefc_fcp_req *req);\n\n \n\n \nstruct nvmet_fc_port_info {\n\tu64\t\t\tnode_name;\n\tu64\t\t\tport_name;\n\tu32\t\t\tport_id;\n};\n\n\n \nenum {\n\tNVMET_FCOP_READDATA\t= 1,\t \n\tNVMET_FCOP_WRITEDATA\t= 2,\t \n\tNVMET_FCOP_READDATA_RSP\t= 3,\t \n\tNVMET_FCOP_RSP\t\t= 4,\t \n};\n\n \nstruct nvmefc_tgt_fcp_req {\n\tu8\t\t\top;\n\tu16\t\t\thwqid;\n\tu32\t\t\toffset;\n\tu32\t\t\ttimeout;\n\tu32\t\t\ttransfer_length;\n\tstruct fc_ba_rjt\tba_rjt;\n\tstruct scatterlist\t*sg;\n\tint\t\t\tsg_cnt;\n\tvoid\t\t\t*rspaddr;\n\tdma_addr_t\t\trspdma;\n\tu16\t\t\trsplen;\n\n\tvoid (*done)(struct nvmefc_tgt_fcp_req *);\n\n\tvoid *nvmet_fc_private;\t\t \n\n\tu32\t\t\ttransferred_length;\n\tint\t\t\tfcp_error;\n};\n\n\n \nenum {\n\tNVMET_FCTGTFEAT_READDATA_RSP = (1 << 0),\n\t\t \n};\n\n\n \nstruct nvmet_fc_target_port {\n\t \n\tu32 port_num;\n\tu64 node_name;\n\tu64 port_name;\n\n\tvoid *private;\n\n\t \n\tu32 port_id;\n\tenum nvme_fc_obj_state port_state;\n} __aligned(sizeof(u64));\t \n\n\n \nstruct nvmet_fc_target_template {\n\tvoid (*targetport_delete)(struct nvmet_fc_target_port *tgtport);\n\tint (*xmt_ls_rsp)(struct nvmet_fc_target_port *tgtport,\n\t\t\t\tstruct nvmefc_ls_rsp *ls_rsp);\n\tint (*fcp_op)(struct nvmet_fc_target_port *tgtport,\n\t\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq);\n\tvoid (*fcp_abort)(struct nvmet_fc_target_port *tgtport,\n\t\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq);\n\tvoid (*fcp_req_release)(struct nvmet_fc_target_port *tgtport,\n\t\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq);\n\tvoid (*defer_rcv)(struct nvmet_fc_target_port *tgtport,\n\t\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq);\n\tvoid (*discovery_event)(struct nvmet_fc_target_port *tgtport);\n\tint  (*ls_req)(struct nvmet_fc_target_port *targetport,\n\t\t\t\tvoid *hosthandle, struct nvmefc_ls_req *lsreq);\n\tvoid (*ls_abort)(struct nvmet_fc_target_port *targetport,\n\t\t\t\tvoid *hosthandle, struct nvmefc_ls_req *lsreq);\n\tvoid (*host_release)(void *hosthandle);\n\n\tu32\tmax_hw_queues;\n\tu16\tmax_sgl_segments;\n\tu16\tmax_dif_sgl_segments;\n\tu64\tdma_boundary;\n\n\tu32\ttarget_features;\n\n\t \n\tu32\ttarget_priv_sz;\n\tu32\tlsrqst_priv_sz;\n};\n\n\nint nvmet_fc_register_targetport(struct nvmet_fc_port_info *portinfo,\n\t\t\tstruct nvmet_fc_target_template *template,\n\t\t\tstruct device *dev,\n\t\t\tstruct nvmet_fc_target_port **tgtport_p);\n\nint nvmet_fc_unregister_targetport(struct nvmet_fc_target_port *tgtport);\n\n \nint nvmet_fc_rcv_ls_req(struct nvmet_fc_target_port *tgtport,\n\t\t\tvoid *hosthandle,\n\t\t\tstruct nvmefc_ls_rsp *rsp,\n\t\t\tvoid *lsreqbuf, u32 lsreqbuf_len);\n\n \nvoid nvmet_fc_invalidate_host(struct nvmet_fc_target_port *tgtport,\n\t\t\tvoid *hosthandle);\n\n \nint nvmet_fc_rcv_fcp_req(struct nvmet_fc_target_port *tgtport,\n\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq,\n\t\t\tvoid *cmdiubuf, u32 cmdiubuf_len);\n\nvoid nvmet_fc_rcv_fcp_abort(struct nvmet_fc_target_port *tgtport,\n\t\t\tstruct nvmefc_tgt_fcp_req *fcpreq);\n \n#define NVME_FC_FEAT_UUID\t0x0001\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}