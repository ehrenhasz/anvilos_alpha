{
  "module_name": "netpoll.h",
  "hash_id": "a68bd6b8f9e75f25cba3ba32923e3ad590d52c3c8b3d9fb068c317303dce0183",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/netpoll.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_NETPOLL_H\n#define _LINUX_NETPOLL_H\n\n#include <linux/netdevice.h>\n#include <linux/interrupt.h>\n#include <linux/rcupdate.h>\n#include <linux/list.h>\n#include <linux/refcount.h>\n\nunion inet_addr {\n\t__u32\t\tall[4];\n\t__be32\t\tip;\n\t__be32\t\tip6[4];\n\tstruct in_addr\tin;\n\tstruct in6_addr\tin6;\n};\n\nstruct netpoll {\n\tstruct net_device *dev;\n\tnetdevice_tracker dev_tracker;\n\tchar dev_name[IFNAMSIZ];\n\tconst char *name;\n\n\tunion inet_addr local_ip, remote_ip;\n\tbool ipv6;\n\tu16 local_port, remote_port;\n\tu8 remote_mac[ETH_ALEN];\n};\n\nstruct netpoll_info {\n\trefcount_t refcnt;\n\n\tstruct semaphore dev_lock;\n\n\tstruct sk_buff_head txq;\n\n\tstruct delayed_work tx_work;\n\n\tstruct netpoll *netpoll;\n\tstruct rcu_head rcu;\n};\n\n#ifdef CONFIG_NETPOLL\nvoid netpoll_poll_dev(struct net_device *dev);\nvoid netpoll_poll_disable(struct net_device *dev);\nvoid netpoll_poll_enable(struct net_device *dev);\n#else\nstatic inline void netpoll_poll_disable(struct net_device *dev) { return; }\nstatic inline void netpoll_poll_enable(struct net_device *dev) { return; }\n#endif\n\nvoid netpoll_send_udp(struct netpoll *np, const char *msg, int len);\nvoid netpoll_print_options(struct netpoll *np);\nint netpoll_parse_options(struct netpoll *np, char *opt);\nint __netpoll_setup(struct netpoll *np, struct net_device *ndev);\nint netpoll_setup(struct netpoll *np);\nvoid __netpoll_cleanup(struct netpoll *np);\nvoid __netpoll_free(struct netpoll *np);\nvoid netpoll_cleanup(struct netpoll *np);\nnetdev_tx_t netpoll_send_skb(struct netpoll *np, struct sk_buff *skb);\n\n#ifdef CONFIG_NETPOLL\nstatic inline void *netpoll_poll_lock(struct napi_struct *napi)\n{\n\tstruct net_device *dev = napi->dev;\n\n\tif (dev && dev->npinfo) {\n\t\tint owner = smp_processor_id();\n\n\t\twhile (cmpxchg(&napi->poll_owner, -1, owner) != -1)\n\t\t\tcpu_relax();\n\n\t\treturn napi;\n\t}\n\treturn NULL;\n}\n\nstatic inline void netpoll_poll_unlock(void *have)\n{\n\tstruct napi_struct *napi = have;\n\n\tif (napi)\n\t\tsmp_store_release(&napi->poll_owner, -1);\n}\n\nstatic inline bool netpoll_tx_running(struct net_device *dev)\n{\n\treturn irqs_disabled();\n}\n\n#else\nstatic inline void *netpoll_poll_lock(struct napi_struct *napi)\n{\n\treturn NULL;\n}\nstatic inline void netpoll_poll_unlock(void *have)\n{\n}\nstatic inline bool netpoll_tx_running(struct net_device *dev)\n{\n\treturn false;\n}\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}