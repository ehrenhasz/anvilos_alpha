{
  "module_name": "badblocks.h",
  "hash_id": "868475689ff5cd70421b6416df7fcaf66eb80cece7003b2338987f19f97a86f2",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/badblocks.h",
  "human_readable_source": " \n#ifndef _LINUX_BADBLOCKS_H\n#define _LINUX_BADBLOCKS_H\n\n#include <linux/seqlock.h>\n#include <linux/device.h>\n#include <linux/kernel.h>\n#include <linux/stddef.h>\n#include <linux/types.h>\n\n#define BB_LEN_MASK\t(0x00000000000001FFULL)\n#define BB_OFFSET_MASK\t(0x7FFFFFFFFFFFFE00ULL)\n#define BB_ACK_MASK\t(0x8000000000000000ULL)\n#define BB_MAX_LEN\t512\n#define BB_OFFSET(x)\t(((x) & BB_OFFSET_MASK) >> 9)\n#define BB_LEN(x)\t(((x) & BB_LEN_MASK) + 1)\n#define BB_ACK(x)\t(!!((x) & BB_ACK_MASK))\n#define BB_MAKE(a, l, ack) (((a)<<9) | ((l)-1) | ((u64)(!!(ack)) << 63))\n\n \n#define MAX_BADBLOCKS\t(PAGE_SIZE/8)\n\nstruct badblocks {\n\tstruct device *dev;\t \n\tint count;\t\t \n\tint unacked_exist;\t \n\tint shift;\t\t \n\tu64 *page;\t\t \n\tint changed;\n\tseqlock_t lock;\n\tsector_t sector;\n\tsector_t size;\t\t \n};\n\nint badblocks_check(struct badblocks *bb, sector_t s, int sectors,\n\t\t   sector_t *first_bad, int *bad_sectors);\nint badblocks_set(struct badblocks *bb, sector_t s, int sectors,\n\t\t\tint acknowledged);\nint badblocks_clear(struct badblocks *bb, sector_t s, int sectors);\nvoid ack_all_badblocks(struct badblocks *bb);\nssize_t badblocks_show(struct badblocks *bb, char *page, int unack);\nssize_t badblocks_store(struct badblocks *bb, const char *page, size_t len,\n\t\t\tint unack);\nint badblocks_init(struct badblocks *bb, int enable);\nvoid badblocks_exit(struct badblocks *bb);\nstruct device;\nint devm_init_badblocks(struct device *dev, struct badblocks *bb);\nstatic inline void devm_exit_badblocks(struct device *dev, struct badblocks *bb)\n{\n\tif (bb->dev != dev) {\n\t\tdev_WARN_ONCE(dev, 1, \"%s: badblocks instance not associated\\n\",\n\t\t\t\t__func__);\n\t\treturn;\n\t}\n\tbadblocks_exit(bb);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}