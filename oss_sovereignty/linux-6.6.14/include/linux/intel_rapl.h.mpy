{
  "module_name": "intel_rapl.h",
  "hash_id": "28b66b8af1da4dcd455542a3b9b2a9854d0fcf4a43a190b35ebfe8dd164b3854",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/intel_rapl.h",
  "human_readable_source": " \n \n\n#ifndef __INTEL_RAPL_H__\n#define __INTEL_RAPL_H__\n\n#include <linux/types.h>\n#include <linux/powercap.h>\n#include <linux/cpuhotplug.h>\n\nenum rapl_if_type {\n\tRAPL_IF_MSR,\t \n\tRAPL_IF_MMIO,\t \n\tRAPL_IF_TPMI,\t \n};\n\nenum rapl_domain_type {\n\tRAPL_DOMAIN_PACKAGE,\t \n\tRAPL_DOMAIN_PP0,\t \n\tRAPL_DOMAIN_PP1,\t \n\tRAPL_DOMAIN_DRAM,\t \n\tRAPL_DOMAIN_PLATFORM,\t \n\tRAPL_DOMAIN_MAX,\n};\n\nenum rapl_domain_reg_id {\n\tRAPL_DOMAIN_REG_LIMIT,\n\tRAPL_DOMAIN_REG_STATUS,\n\tRAPL_DOMAIN_REG_PERF,\n\tRAPL_DOMAIN_REG_POLICY,\n\tRAPL_DOMAIN_REG_INFO,\n\tRAPL_DOMAIN_REG_PL4,\n\tRAPL_DOMAIN_REG_UNIT,\n\tRAPL_DOMAIN_REG_PL2,\n\tRAPL_DOMAIN_REG_MAX,\n};\n\nstruct rapl_domain;\n\nenum rapl_primitives {\n\tPOWER_LIMIT1,\n\tPOWER_LIMIT2,\n\tPOWER_LIMIT4,\n\tENERGY_COUNTER,\n\tFW_LOCK,\n\tFW_HIGH_LOCK,\n\tPL1_LOCK,\n\tPL2_LOCK,\n\tPL4_LOCK,\n\n\tPL1_ENABLE,\t\t \n\tPL1_CLAMP,\t\t \n\tPL2_ENABLE,\t\t \n\tPL2_CLAMP,\n\tPL4_ENABLE,\t\t \n\n\tTIME_WINDOW1,\t\t \n\tTIME_WINDOW2,\t\t \n\tTHERMAL_SPEC_POWER,\n\tMAX_POWER,\n\n\tMIN_POWER,\n\tMAX_TIME_WINDOW,\n\tTHROTTLED_TIME,\n\tPRIORITY_LEVEL,\n\n\tPSYS_POWER_LIMIT1,\n\tPSYS_POWER_LIMIT2,\n\tPSYS_PL1_ENABLE,\n\tPSYS_PL2_ENABLE,\n\tPSYS_TIME_WINDOW1,\n\tPSYS_TIME_WINDOW2,\n\t \n\tAVERAGE_POWER,\n\tNR_RAPL_PRIMITIVES,\n};\n\nstruct rapl_domain_data {\n\tu64 primitives[NR_RAPL_PRIMITIVES];\n\tunsigned long timestamp;\n};\n\n#define NR_POWER_LIMITS\t(POWER_LIMIT4 + 1)\n\nstruct rapl_power_limit {\n\tstruct powercap_zone_constraint *constraint;\n\tstruct rapl_domain *domain;\n\tconst char *name;\n\tbool locked;\n\tu64 last_power_limit;\n};\n\nstruct rapl_package;\n\n#define RAPL_DOMAIN_NAME_LENGTH 16\n\nunion rapl_reg {\n\tvoid __iomem *mmio;\n\tu32 msr;\n\tu64 val;\n};\n\nstruct rapl_domain {\n\tchar name[RAPL_DOMAIN_NAME_LENGTH];\n\tenum rapl_domain_type id;\n\tunion rapl_reg regs[RAPL_DOMAIN_REG_MAX];\n\tstruct powercap_zone power_zone;\n\tstruct rapl_domain_data rdd;\n\tstruct rapl_power_limit rpl[NR_POWER_LIMITS];\n\tu64 attr_map;\t\t \n\tunsigned int state;\n\tunsigned int power_unit;\n\tunsigned int energy_unit;\n\tunsigned int time_unit;\n\tstruct rapl_package *rp;\n};\n\nstruct reg_action {\n\tunion rapl_reg reg;\n\tu64 mask;\n\tu64 value;\n\tint err;\n};\n\n \nstruct rapl_if_priv {\n\tenum rapl_if_type type;\n\tstruct powercap_control_type *control_type;\n\tenum cpuhp_state pcap_rapl_online;\n\tunion rapl_reg reg_unit;\n\tunion rapl_reg regs[RAPL_DOMAIN_MAX][RAPL_DOMAIN_REG_MAX];\n\tint limits[RAPL_DOMAIN_MAX];\n\tint (*read_raw)(int id, struct reg_action *ra);\n\tint (*write_raw)(int id, struct reg_action *ra);\n\tvoid *defaults;\n\tvoid *rpi;\n};\n\n \n#define PACKAGE_DOMAIN_NAME_LENGTH 30\n\nstruct rapl_package {\n\tunsigned int id;\t \n\tunsigned int nr_domains;\n\tunsigned long domain_map;\t \n\tstruct rapl_domain *domains;\t \n\tstruct powercap_zone *power_zone;\t \n\tunsigned long power_limit_irq;\t \n\tstruct list_head plist;\n\tint lead_cpu;\t\t \n\t \n\tstruct cpumask cpumask;\n\tchar name[PACKAGE_DOMAIN_NAME_LENGTH];\n\tstruct rapl_if_priv *priv;\n};\n\nstruct rapl_package *rapl_find_package_domain(int id, struct rapl_if_priv *priv, bool id_is_cpu);\nstruct rapl_package *rapl_add_package(int id, struct rapl_if_priv *priv, bool id_is_cpu);\nvoid rapl_remove_package(struct rapl_package *rp);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}