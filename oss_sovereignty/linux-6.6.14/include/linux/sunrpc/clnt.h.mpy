{
  "module_name": "clnt.h",
  "hash_id": "d2defaa7c66e58cd9de9f39b71f2a52dcba9b0603b47abb761e29ce60b5f621b",
  "original_prompt": "Ingested from linux-6.6.14/include/linux/sunrpc/clnt.h",
  "human_readable_source": " \n \n\n#ifndef _LINUX_SUNRPC_CLNT_H\n#define _LINUX_SUNRPC_CLNT_H\n\n#include <linux/types.h>\n#include <linux/socket.h>\n#include <linux/in.h>\n#include <linux/in6.h>\n#include <linux/refcount.h>\n\n#include <linux/sunrpc/msg_prot.h>\n#include <linux/sunrpc/sched.h>\n#include <linux/sunrpc/xprt.h>\n#include <linux/sunrpc/auth.h>\n#include <linux/sunrpc/stats.h>\n#include <linux/sunrpc/xdr.h>\n#include <linux/sunrpc/timer.h>\n#include <linux/sunrpc/rpc_pipe_fs.h>\n#include <asm/signal.h>\n#include <linux/path.h>\n#include <net/ipv6.h>\n#include <linux/sunrpc/xprtmultipath.h>\n\nstruct rpc_inode;\nstruct rpc_sysfs_client {\n\tstruct kobject kobject;\n\tstruct net *net;\n\tstruct rpc_clnt *clnt;\n\tstruct rpc_xprt_switch *xprt_switch;\n};\n\n\n \nstruct rpc_clnt {\n\trefcount_t\t\tcl_count;\t \n\tunsigned int\t\tcl_clid;\t \n\tstruct list_head\tcl_clients;\t \n\tstruct list_head\tcl_tasks;\t \n\tatomic_t\t\tcl_pid;\t\t \n\tspinlock_t\t\tcl_lock;\t \n\tstruct rpc_xprt __rcu *\tcl_xprt;\t \n\tconst struct rpc_procinfo *cl_procinfo;\t \n\tu32\t\t\tcl_prog,\t \n\t\t\t\tcl_vers,\t \n\t\t\t\tcl_maxproc;\t \n\n\tstruct rpc_auth *\tcl_auth;\t \n\tstruct rpc_stat *\tcl_stats;\t \n\tstruct rpc_iostats *\tcl_metrics;\t \n\n\tunsigned int\t\tcl_softrtry : 1, \n\t\t\t\tcl_softerr  : 1, \n\t\t\t\tcl_discrtry : 1, \n\t\t\t\tcl_noretranstimeo: 1, \n\t\t\t\tcl_autobind : 1, \n\t\t\t\tcl_chatty   : 1, \n\t\t\t\tcl_shutdown : 1; \n\tstruct xprtsec_parms\tcl_xprtsec;\t \n\n\tstruct rpc_rtt *\tcl_rtt;\t\t \n\tconst struct rpc_timeout *cl_timeout;\t \n\n\tatomic_t\t\tcl_swapper;\t \n\tint\t\t\tcl_nodelen;\t \n\tchar \t\t\tcl_nodename[UNX_MAXNODENAME+1];\n\tstruct rpc_pipe_dir_head cl_pipedir_objects;\n\tstruct rpc_clnt *\tcl_parent;\t \n\tstruct rpc_rtt\t\tcl_rtt_default;\n\tstruct rpc_timeout\tcl_timeout_default;\n\tconst struct rpc_program *cl_program;\n\tconst char *\t\tcl_principal;\t \n#if IS_ENABLED(CONFIG_SUNRPC_DEBUG)\n\tstruct dentry\t\t*cl_debugfs;\t \n#endif\n\tstruct rpc_sysfs_client *cl_sysfs;\t \n\t \n\tunion {\n\t\tstruct rpc_xprt_iter\tcl_xpi;\n\t\tstruct work_struct\tcl_work;\n\t};\n\tconst struct cred\t*cl_cred;\n\tunsigned int\t\tcl_max_connect;  \n\tstruct super_block *pipefs_sb;\n};\n\n \n#define RPC_MAXVERSION\t\t4\nstruct rpc_program {\n\tconst char *\t\tname;\t\t \n\tu32\t\t\tnumber;\t\t \n\tunsigned int\t\tnrvers;\t\t \n\tconst struct rpc_version **\tversion;\t \n\tstruct rpc_stat *\tstats;\t\t \n\tconst char *\t\tpipe_dir_name;\t \n};\n\nstruct rpc_version {\n\tu32\t\t\tnumber;\t\t \n\tunsigned int\t\tnrprocs;\t \n\tconst struct rpc_procinfo *procs;\t \n\tunsigned int\t\t*counts;\t \n};\n\n \nstruct rpc_procinfo {\n\tu32\t\t\tp_proc;\t\t \n\tkxdreproc_t\t\tp_encode;\t \n\tkxdrdproc_t\t\tp_decode;\t \n\tunsigned int\t\tp_arglen;\t \n\tunsigned int\t\tp_replen;\t \n\tunsigned int\t\tp_timer;\t \n\tu32\t\t\tp_statidx;\t \n\tconst char *\t\tp_name;\t\t \n};\n\nstruct rpc_create_args {\n\tstruct net\t\t*net;\n\tint\t\t\tprotocol;\n\tstruct sockaddr\t\t*address;\n\tsize_t\t\t\taddrsize;\n\tstruct sockaddr\t\t*saddress;\n\tconst struct rpc_timeout *timeout;\n\tconst char\t\t*servername;\n\tconst char\t\t*nodename;\n\tconst struct rpc_program *program;\n\tu32\t\t\tprognumber;\t \n\tu32\t\t\tversion;\n\trpc_authflavor_t\tauthflavor;\n\tu32\t\t\tnconnect;\n\tunsigned long\t\tflags;\n\tchar\t\t\t*client_name;\n\tstruct svc_xprt\t\t*bc_xprt;\t \n\tconst struct cred\t*cred;\n\tunsigned int\t\tmax_connect;\n\tstruct xprtsec_parms\txprtsec;\n\tunsigned long\t\tconnect_timeout;\n\tunsigned long\t\treconnect_timeout;\n};\n\nstruct rpc_add_xprt_test {\n\tvoid (*add_xprt_test)(struct rpc_clnt *clnt,\n\t\tstruct rpc_xprt *xprt,\n\t\tvoid *calldata);\n\tvoid *data;\n};\n\n \n#define RPC_CLNT_CREATE_HARDRTRY\t(1UL << 0)\n#define RPC_CLNT_CREATE_AUTOBIND\t(1UL << 2)\n#define RPC_CLNT_CREATE_NONPRIVPORT\t(1UL << 3)\n#define RPC_CLNT_CREATE_NOPING\t\t(1UL << 4)\n#define RPC_CLNT_CREATE_DISCRTRY\t(1UL << 5)\n#define RPC_CLNT_CREATE_QUIET\t\t(1UL << 6)\n#define RPC_CLNT_CREATE_INFINITE_SLOTS\t(1UL << 7)\n#define RPC_CLNT_CREATE_NO_IDLE_TIMEOUT\t(1UL << 8)\n#define RPC_CLNT_CREATE_NO_RETRANS_TIMEOUT\t(1UL << 9)\n#define RPC_CLNT_CREATE_SOFTERR\t\t(1UL << 10)\n#define RPC_CLNT_CREATE_REUSEPORT\t(1UL << 11)\n#define RPC_CLNT_CREATE_CONNECTED\t(1UL << 12)\n\nstruct rpc_clnt *rpc_create(struct rpc_create_args *args);\nstruct rpc_clnt\t*rpc_bind_new_program(struct rpc_clnt *,\n\t\t\t\tconst struct rpc_program *, u32);\nstruct rpc_clnt *rpc_clone_client(struct rpc_clnt *);\nstruct rpc_clnt *rpc_clone_client_set_auth(struct rpc_clnt *,\n\t\t\t\trpc_authflavor_t);\nint\t\trpc_switch_client_transport(struct rpc_clnt *,\n\t\t\t\tstruct xprt_create *,\n\t\t\t\tconst struct rpc_timeout *);\n\nvoid\t\trpc_shutdown_client(struct rpc_clnt *);\nvoid\t\trpc_release_client(struct rpc_clnt *);\nvoid\t\trpc_task_release_transport(struct rpc_task *);\nvoid\t\trpc_task_release_client(struct rpc_task *);\nstruct rpc_xprt\t*rpc_task_get_xprt(struct rpc_clnt *clnt,\n\t\tstruct rpc_xprt *xprt);\n\nint\t\trpcb_create_local(struct net *);\nvoid\t\trpcb_put_local(struct net *);\nint\t\trpcb_register(struct net *, u32, u32, int, unsigned short);\nint\t\trpcb_v4_register(struct net *net, const u32 program,\n\t\t\t\t const u32 version,\n\t\t\t\t const struct sockaddr *address,\n\t\t\t\t const char *netid);\nvoid\t\trpcb_getport_async(struct rpc_task *);\n\nvoid rpc_prepare_reply_pages(struct rpc_rqst *req, struct page **pages,\n\t\t\t     unsigned int base, unsigned int len,\n\t\t\t     unsigned int hdrsize);\nvoid\t\trpc_call_start(struct rpc_task *);\nint\t\trpc_call_async(struct rpc_clnt *clnt,\n\t\t\t       const struct rpc_message *msg, int flags,\n\t\t\t       const struct rpc_call_ops *tk_ops,\n\t\t\t       void *calldata);\nint\t\trpc_call_sync(struct rpc_clnt *clnt,\n\t\t\t      const struct rpc_message *msg, int flags);\nstruct rpc_task *rpc_call_null(struct rpc_clnt *clnt, struct rpc_cred *cred,\n\t\t\t       int flags);\nint\t\trpc_restart_call_prepare(struct rpc_task *);\nint\t\trpc_restart_call(struct rpc_task *);\nvoid\t\trpc_setbufsize(struct rpc_clnt *, unsigned int, unsigned int);\nstruct net *\trpc_net_ns(struct rpc_clnt *);\nsize_t\t\trpc_max_payload(struct rpc_clnt *);\nsize_t\t\trpc_max_bc_payload(struct rpc_clnt *);\nunsigned int\trpc_num_bc_slots(struct rpc_clnt *);\nvoid\t\trpc_force_rebind(struct rpc_clnt *);\nsize_t\t\trpc_peeraddr(struct rpc_clnt *, struct sockaddr *, size_t);\nconst char\t*rpc_peeraddr2str(struct rpc_clnt *, enum rpc_display_format_t);\nint\t\trpc_localaddr(struct rpc_clnt *, struct sockaddr *, size_t);\n\nint \t\trpc_clnt_iterate_for_each_xprt(struct rpc_clnt *clnt,\n\t\t\tint (*fn)(struct rpc_clnt *, struct rpc_xprt *, void *),\n\t\t\tvoid *data);\n\nint \t\trpc_clnt_test_and_add_xprt(struct rpc_clnt *clnt,\n\t\t\tstruct rpc_xprt_switch *xps,\n\t\t\tstruct rpc_xprt *xprt,\n\t\t\tvoid *dummy);\nint\t\trpc_clnt_add_xprt(struct rpc_clnt *, struct xprt_create *,\n\t\t\tint (*setup)(struct rpc_clnt *,\n\t\t\t\tstruct rpc_xprt_switch *,\n\t\t\t\tstruct rpc_xprt *,\n\t\t\t\tvoid *),\n\t\t\tvoid *data);\nvoid\t\trpc_set_connect_timeout(struct rpc_clnt *clnt,\n\t\t\tunsigned long connect_timeout,\n\t\t\tunsigned long reconnect_timeout);\n\nint\t\trpc_clnt_setup_test_and_add_xprt(struct rpc_clnt *,\n\t\t\tstruct rpc_xprt_switch *,\n\t\t\tstruct rpc_xprt *,\n\t\t\tvoid *);\nvoid\t\trpc_clnt_manage_trunked_xprts(struct rpc_clnt *);\nvoid\t\trpc_clnt_probe_trunked_xprts(struct rpc_clnt *,\n\t\t\tstruct rpc_add_xprt_test *);\n\nconst char *rpc_proc_name(const struct rpc_task *task);\n\nvoid rpc_clnt_xprt_switch_put(struct rpc_clnt *);\nvoid rpc_clnt_xprt_switch_add_xprt(struct rpc_clnt *, struct rpc_xprt *);\nvoid rpc_clnt_xprt_switch_remove_xprt(struct rpc_clnt *, struct rpc_xprt *);\nbool rpc_clnt_xprt_switch_has_addr(struct rpc_clnt *clnt,\n\t\t\tconst struct sockaddr *sap);\nvoid rpc_clnt_xprt_set_online(struct rpc_clnt *clnt, struct rpc_xprt *xprt);\nvoid rpc_clnt_disconnect(struct rpc_clnt *clnt);\nvoid rpc_cleanup_clids(void);\n\nstatic inline int rpc_reply_expected(struct rpc_task *task)\n{\n\treturn (task->tk_msg.rpc_proc != NULL) &&\n\t\t(task->tk_msg.rpc_proc->p_decode != NULL);\n}\n\nstatic inline void rpc_task_close_connection(struct rpc_task *task)\n{\n\tif (task->tk_xprt)\n\t\txprt_force_disconnect(task->tk_xprt);\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}