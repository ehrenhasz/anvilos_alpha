{
  "module_name": "kvm.h",
  "hash_id": "f73d8cae6220674fc6bd40dd52c04ff3af9c213bc0bb0797d25d1633b1fb687f",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/kvm.h",
  "human_readable_source": " \n#if !defined(_TRACE_KVM_MAIN_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_KVM_MAIN_H\n\n#include <linux/tracepoint.h>\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM kvm\n\n#define ERSN(x) { KVM_EXIT_##x, \"KVM_EXIT_\" #x }\n\n#define kvm_trace_exit_reason\t\t\t\t\t\t\\\n\tERSN(UNKNOWN), ERSN(EXCEPTION), ERSN(IO), ERSN(HYPERCALL),\t\\\n\tERSN(DEBUG), ERSN(HLT), ERSN(MMIO), ERSN(IRQ_WINDOW_OPEN),\t\\\n\tERSN(SHUTDOWN), ERSN(FAIL_ENTRY), ERSN(INTR), ERSN(SET_TPR),\t\\\n\tERSN(TPR_ACCESS), ERSN(S390_SIEIC), ERSN(S390_RESET), ERSN(DCR),\\\n\tERSN(NMI), ERSN(INTERNAL_ERROR), ERSN(OSI), ERSN(PAPR_HCALL),\t\\\n\tERSN(S390_UCONTROL), ERSN(WATCHDOG), ERSN(S390_TSCH), ERSN(EPR),\\\n\tERSN(SYSTEM_EVENT), ERSN(S390_STSI), ERSN(IOAPIC_EOI),          \\\n\tERSN(HYPERV), ERSN(ARM_NISV), ERSN(X86_RDMSR), ERSN(X86_WRMSR)\n\nTRACE_EVENT(kvm_userspace_exit,\n\t    TP_PROTO(__u32 reason, int errno),\n\t    TP_ARGS(reason, errno),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u32,\t\treason\t\t)\n\t\t__field(\tint,\t\terrno\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->reason\t\t= reason;\n\t\t__entry->errno\t\t= errno;\n\t),\n\n\tTP_printk(\"reason %s (%d)\",\n\t\t  __entry->errno < 0 ?\n\t\t  (__entry->errno == -EINTR ? \"restart\" : \"error\") :\n\t\t  __print_symbolic(__entry->reason, kvm_trace_exit_reason),\n\t\t  __entry->errno < 0 ? -__entry->errno : __entry->reason)\n);\n\nTRACE_EVENT(kvm_vcpu_wakeup,\n\t    TP_PROTO(__u64 ns, bool waited, bool valid),\n\t    TP_ARGS(ns, waited, valid),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\t\tns\t\t)\n\t\t__field(\tbool,\t\twaited\t\t)\n\t\t__field(\tbool,\t\tvalid\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->ns\t\t= ns;\n\t\t__entry->waited\t\t= waited;\n\t\t__entry->valid\t\t= valid;\n\t),\n\n\tTP_printk(\"%s time %lld ns, polling %s\",\n\t\t  __entry->waited ? \"wait\" : \"poll\",\n\t\t  __entry->ns,\n\t\t  __entry->valid ? \"valid\" : \"invalid\")\n);\n\n#if defined(CONFIG_HAVE_KVM_IRQFD)\nTRACE_EVENT(kvm_set_irq,\n\tTP_PROTO(unsigned int gsi, int level, int irq_source_id),\n\tTP_ARGS(gsi, level, irq_source_id),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tgsi\t\t)\n\t\t__field(\tint,\t\tlevel\t\t)\n\t\t__field(\tint,\t\tirq_source_id\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->gsi\t\t= gsi;\n\t\t__entry->level\t\t= level;\n\t\t__entry->irq_source_id\t= irq_source_id;\n\t),\n\n\tTP_printk(\"gsi %u level %d source %d\",\n\t\t  __entry->gsi, __entry->level, __entry->irq_source_id)\n);\n#endif  \n\n#if defined(__KVM_HAVE_IOAPIC)\n#define kvm_deliver_mode\t\t\\\n\t{0x0, \"Fixed\"},\t\t\t\\\n\t{0x1, \"LowPrio\"},\t\t\\\n\t{0x2, \"SMI\"},\t\t\t\\\n\t{0x3, \"Res3\"},\t\t\t\\\n\t{0x4, \"NMI\"},\t\t\t\\\n\t{0x5, \"INIT\"},\t\t\t\\\n\t{0x6, \"SIPI\"},\t\t\t\\\n\t{0x7, \"ExtINT\"}\n\nTRACE_EVENT(kvm_ioapic_set_irq,\n\t    TP_PROTO(__u64 e, int pin, bool coalesced),\n\t    TP_ARGS(e, pin, coalesced),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\t\te\t\t)\n\t\t__field(\tint,\t\tpin\t\t)\n\t\t__field(\tbool,\t\tcoalesced\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->e\t\t= e;\n\t\t__entry->pin\t\t= pin;\n\t\t__entry->coalesced\t= coalesced;\n\t),\n\n\tTP_printk(\"pin %u dst %x vec %u (%s|%s|%s%s)%s\",\n\t\t  __entry->pin, (u8)(__entry->e >> 56), (u8)__entry->e,\n\t\t  __print_symbolic((__entry->e >> 8 & 0x7), kvm_deliver_mode),\n\t\t  (__entry->e & (1<<11)) ? \"logical\" : \"physical\",\n\t\t  (__entry->e & (1<<15)) ? \"level\" : \"edge\",\n\t\t  (__entry->e & (1<<16)) ? \"|masked\" : \"\",\n\t\t  __entry->coalesced ? \" (coalesced)\" : \"\")\n);\n\nTRACE_EVENT(kvm_ioapic_delayed_eoi_inj,\n\t    TP_PROTO(__u64 e),\n\t    TP_ARGS(e),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\t\te\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->e\t\t= e;\n\t),\n\n\tTP_printk(\"dst %x vec %u (%s|%s|%s%s)\",\n\t\t  (u8)(__entry->e >> 56), (u8)__entry->e,\n\t\t  __print_symbolic((__entry->e >> 8 & 0x7), kvm_deliver_mode),\n\t\t  (__entry->e & (1<<11)) ? \"logical\" : \"physical\",\n\t\t  (__entry->e & (1<<15)) ? \"level\" : \"edge\",\n\t\t  (__entry->e & (1<<16)) ? \"|masked\" : \"\")\n);\n\nTRACE_EVENT(kvm_msi_set_irq,\n\t    TP_PROTO(__u64 address, __u64 data),\n\t    TP_ARGS(address, data),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t__u64,\t\taddress\t\t)\n\t\t__field(\t__u64,\t\tdata\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->address\t= address;\n\t\t__entry->data\t\t= data;\n\t),\n\n\tTP_printk(\"dst %llx vec %u (%s|%s|%s%s)\",\n\t\t  (u8)(__entry->address >> 12) | ((__entry->address >> 32) & 0xffffff00),\n\t\t  (u8)__entry->data,\n\t\t  __print_symbolic((__entry->data >> 8 & 0x7), kvm_deliver_mode),\n\t\t  (__entry->address & (1<<2)) ? \"logical\" : \"physical\",\n\t\t  (__entry->data & (1<<15)) ? \"level\" : \"edge\",\n\t\t  (__entry->address & (1<<3)) ? \"|rh\" : \"\")\n);\n\n#define kvm_irqchips\t\t\t\t\t\t\\\n\t{KVM_IRQCHIP_PIC_MASTER,\t\"PIC master\"},\t\t\\\n\t{KVM_IRQCHIP_PIC_SLAVE,\t\t\"PIC slave\"},\t\t\\\n\t{KVM_IRQCHIP_IOAPIC,\t\t\"IOAPIC\"}\n\n#endif  \n\n#if defined(CONFIG_HAVE_KVM_IRQFD)\n\n#ifdef kvm_irqchips\n#define kvm_ack_irq_string \"irqchip %s pin %u\"\n#define kvm_ack_irq_parm  __print_symbolic(__entry->irqchip, kvm_irqchips), __entry->pin\n#else\n#define kvm_ack_irq_string \"irqchip %d pin %u\"\n#define kvm_ack_irq_parm  __entry->irqchip, __entry->pin\n#endif\n\nTRACE_EVENT(kvm_ack_irq,\n\tTP_PROTO(unsigned int irqchip, unsigned int pin),\n\tTP_ARGS(irqchip, pin),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\tirqchip\t\t)\n\t\t__field(\tunsigned int,\tpin\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->irqchip\t= irqchip;\n\t\t__entry->pin\t\t= pin;\n\t),\n\n\tTP_printk(kvm_ack_irq_string, kvm_ack_irq_parm)\n);\n\n#endif  \n\n\n\n#define KVM_TRACE_MMIO_READ_UNSATISFIED 0\n#define KVM_TRACE_MMIO_READ 1\n#define KVM_TRACE_MMIO_WRITE 2\n\n#define kvm_trace_symbol_mmio \\\n\t{ KVM_TRACE_MMIO_READ_UNSATISFIED, \"unsatisfied-read\" }, \\\n\t{ KVM_TRACE_MMIO_READ, \"read\" }, \\\n\t{ KVM_TRACE_MMIO_WRITE, \"write\" }\n\nTRACE_EVENT(kvm_mmio,\n\tTP_PROTO(int type, int len, u64 gpa, void *val),\n\tTP_ARGS(type, len, gpa, val),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tu32,\ttype\t\t)\n\t\t__field(\tu32,\tlen\t\t)\n\t\t__field(\tu64,\tgpa\t\t)\n\t\t__field(\tu64,\tval\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->type\t\t= type;\n\t\t__entry->len\t\t= len;\n\t\t__entry->gpa\t\t= gpa;\n\t\t__entry->val\t\t= 0;\n\t\tif (val)\n\t\t\tmemcpy(&__entry->val, val,\n\t\t\t       min_t(u32, sizeof(__entry->val), len));\n\t),\n\n\tTP_printk(\"mmio %s len %u gpa 0x%llx val 0x%llx\",\n\t\t  __print_symbolic(__entry->type, kvm_trace_symbol_mmio),\n\t\t  __entry->len, __entry->gpa, __entry->val)\n);\n\n#define kvm_fpu_load_symbol\t\\\n\t{0, \"unload\"},\t\t\\\n\t{1, \"load\"}\n\nTRACE_EVENT(kvm_fpu,\n\tTP_PROTO(int load),\n\tTP_ARGS(load),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tu32,\t        load\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->load\t\t= load;\n\t),\n\n\tTP_printk(\"%s\", __print_symbolic(__entry->load, kvm_fpu_load_symbol))\n);\n\n#ifdef CONFIG_KVM_ASYNC_PF\nDECLARE_EVENT_CLASS(kvm_async_get_page_class,\n\n\tTP_PROTO(u64 gva, u64 gfn),\n\n\tTP_ARGS(gva, gfn),\n\n\tTP_STRUCT__entry(\n\t\t__field(__u64, gva)\n\t\t__field(u64, gfn)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->gva = gva;\n\t\t__entry->gfn = gfn;\n\t),\n\n\tTP_printk(\"gva = %#llx, gfn = %#llx\", __entry->gva, __entry->gfn)\n);\n\nDEFINE_EVENT(kvm_async_get_page_class, kvm_try_async_get_page,\n\n\tTP_PROTO(u64 gva, u64 gfn),\n\n\tTP_ARGS(gva, gfn)\n);\n\nDEFINE_EVENT(kvm_async_get_page_class, kvm_async_pf_repeated_fault,\n\n\tTP_PROTO(u64 gva, u64 gfn),\n\n\tTP_ARGS(gva, gfn)\n);\n\nDECLARE_EVENT_CLASS(kvm_async_pf_nopresent_ready,\n\n\tTP_PROTO(u64 token, u64 gva),\n\n\tTP_ARGS(token, gva),\n\n\tTP_STRUCT__entry(\n\t\t__field(__u64, token)\n\t\t__field(__u64, gva)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->token = token;\n\t\t__entry->gva = gva;\n\t),\n\n\tTP_printk(\"token %#llx gva %#llx\", __entry->token, __entry->gva)\n\n);\n\nDEFINE_EVENT(kvm_async_pf_nopresent_ready, kvm_async_pf_not_present,\n\n\tTP_PROTO(u64 token, u64 gva),\n\n\tTP_ARGS(token, gva)\n);\n\nDEFINE_EVENT(kvm_async_pf_nopresent_ready, kvm_async_pf_ready,\n\n\tTP_PROTO(u64 token, u64 gva),\n\n\tTP_ARGS(token, gva)\n);\n\nTRACE_EVENT(\n\tkvm_async_pf_completed,\n\tTP_PROTO(unsigned long address, u64 gva),\n\tTP_ARGS(address, gva),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, address)\n\t\t__field(u64, gva)\n\t\t),\n\n\tTP_fast_assign(\n\t\t__entry->address = address;\n\t\t__entry->gva = gva;\n\t\t),\n\n\tTP_printk(\"gva %#llx address %#lx\",  __entry->gva,\n\t\t  __entry->address)\n);\n\n#endif\n\nTRACE_EVENT(kvm_halt_poll_ns,\n\tTP_PROTO(bool grow, unsigned int vcpu_id, unsigned int new,\n\t\t unsigned int old),\n\tTP_ARGS(grow, vcpu_id, new, old),\n\n\tTP_STRUCT__entry(\n\t\t__field(bool, grow)\n\t\t__field(unsigned int, vcpu_id)\n\t\t__field(unsigned int, new)\n\t\t__field(unsigned int, old)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->grow           = grow;\n\t\t__entry->vcpu_id        = vcpu_id;\n\t\t__entry->new            = new;\n\t\t__entry->old            = old;\n\t),\n\n\tTP_printk(\"vcpu %u: halt_poll_ns %u (%s %u)\",\n\t\t\t__entry->vcpu_id,\n\t\t\t__entry->new,\n\t\t\t__entry->grow ? \"grow\" : \"shrink\",\n\t\t\t__entry->old)\n);\n\n#define trace_kvm_halt_poll_ns_grow(vcpu_id, new, old) \\\n\ttrace_kvm_halt_poll_ns(true, vcpu_id, new, old)\n#define trace_kvm_halt_poll_ns_shrink(vcpu_id, new, old) \\\n\ttrace_kvm_halt_poll_ns(false, vcpu_id, new, old)\n\nTRACE_EVENT(kvm_dirty_ring_push,\n\tTP_PROTO(struct kvm_dirty_ring *ring, u32 slot, u64 offset),\n\tTP_ARGS(ring, slot, offset),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, index)\n\t\t__field(u32, dirty_index)\n\t\t__field(u32, reset_index)\n\t\t__field(u32, slot)\n\t\t__field(u64, offset)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->index          = ring->index;\n\t\t__entry->dirty_index    = ring->dirty_index;\n\t\t__entry->reset_index    = ring->reset_index;\n\t\t__entry->slot           = slot;\n\t\t__entry->offset         = offset;\n\t),\n\n\tTP_printk(\"ring %d: dirty 0x%x reset 0x%x \"\n\t\t  \"slot %u offset 0x%llx (used %u)\",\n\t\t  __entry->index, __entry->dirty_index,\n\t\t  __entry->reset_index,  __entry->slot, __entry->offset,\n\t\t  __entry->dirty_index - __entry->reset_index)\n);\n\nTRACE_EVENT(kvm_dirty_ring_reset,\n\tTP_PROTO(struct kvm_dirty_ring *ring),\n\tTP_ARGS(ring),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, index)\n\t\t__field(u32, dirty_index)\n\t\t__field(u32, reset_index)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->index          = ring->index;\n\t\t__entry->dirty_index    = ring->dirty_index;\n\t\t__entry->reset_index    = ring->reset_index;\n\t),\n\n\tTP_printk(\"ring %d: dirty 0x%x reset 0x%x (used %u)\",\n\t\t  __entry->index, __entry->dirty_index, __entry->reset_index,\n\t\t  __entry->dirty_index - __entry->reset_index)\n);\n\nTRACE_EVENT(kvm_dirty_ring_exit,\n\tTP_PROTO(struct kvm_vcpu *vcpu),\n\tTP_ARGS(vcpu),\n\n\tTP_STRUCT__entry(\n\t    __field(int, vcpu_id)\n\t),\n\n\tTP_fast_assign(\n\t    __entry->vcpu_id = vcpu->vcpu_id;\n\t),\n\n\tTP_printk(\"vcpu %d\", __entry->vcpu_id)\n);\n\nTRACE_EVENT(kvm_unmap_hva_range,\n\tTP_PROTO(unsigned long start, unsigned long end),\n\tTP_ARGS(start, end),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tstart\t\t)\n\t\t__field(\tunsigned long,\tend\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->start\t\t= start;\n\t\t__entry->end\t\t= end;\n\t),\n\n\tTP_printk(\"mmu notifier unmap range: %#016lx -- %#016lx\",\n\t\t  __entry->start, __entry->end)\n);\n\nTRACE_EVENT(kvm_set_spte_hva,\n\tTP_PROTO(unsigned long hva),\n\tTP_ARGS(hva),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\thva\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->hva\t\t= hva;\n\t),\n\n\tTP_printk(\"mmu notifier set pte hva: %#016lx\", __entry->hva)\n);\n\nTRACE_EVENT(kvm_age_hva,\n\tTP_PROTO(unsigned long start, unsigned long end),\n\tTP_ARGS(start, end),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tstart\t\t)\n\t\t__field(\tunsigned long,\tend\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->start\t\t= start;\n\t\t__entry->end\t\t= end;\n\t),\n\n\tTP_printk(\"mmu notifier age hva: %#016lx -- %#016lx\",\n\t\t  __entry->start, __entry->end)\n);\n\nTRACE_EVENT(kvm_test_age_hva,\n\tTP_PROTO(unsigned long hva),\n\tTP_ARGS(hva),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\thva\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->hva\t\t= hva;\n\t),\n\n\tTP_printk(\"mmu notifier test age hva: %#016lx\", __entry->hva)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}