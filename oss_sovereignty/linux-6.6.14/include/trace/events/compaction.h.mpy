{
  "module_name": "compaction.h",
  "hash_id": "8d97c0d8ca0ac20d4c12c06b4b5eafcfd81a13931c9974b6eb97dd53e6c89274",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/compaction.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM compaction\n\n#if !defined(_TRACE_COMPACTION_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_COMPACTION_H\n\n#include <linux/types.h>\n#include <linux/list.h>\n#include <linux/tracepoint.h>\n#include <trace/events/mmflags.h>\n\n\nDECLARE_EVENT_CLASS(mm_compaction_isolate_template,\n\n\tTP_PROTO(\n\t\tunsigned long start_pfn,\n\t\tunsigned long end_pfn,\n\t\tunsigned long nr_scanned,\n\t\tunsigned long nr_taken),\n\n\tTP_ARGS(start_pfn, end_pfn, nr_scanned, nr_taken),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, start_pfn)\n\t\t__field(unsigned long, end_pfn)\n\t\t__field(unsigned long, nr_scanned)\n\t\t__field(unsigned long, nr_taken)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->start_pfn = start_pfn;\n\t\t__entry->end_pfn = end_pfn;\n\t\t__entry->nr_scanned = nr_scanned;\n\t\t__entry->nr_taken = nr_taken;\n\t),\n\n\tTP_printk(\"range=(0x%lx ~ 0x%lx) nr_scanned=%lu nr_taken=%lu\",\n\t\t__entry->start_pfn,\n\t\t__entry->end_pfn,\n\t\t__entry->nr_scanned,\n\t\t__entry->nr_taken)\n);\n\nDEFINE_EVENT(mm_compaction_isolate_template, mm_compaction_isolate_migratepages,\n\n\tTP_PROTO(\n\t\tunsigned long start_pfn,\n\t\tunsigned long end_pfn,\n\t\tunsigned long nr_scanned,\n\t\tunsigned long nr_taken),\n\n\tTP_ARGS(start_pfn, end_pfn, nr_scanned, nr_taken)\n);\n\nDEFINE_EVENT(mm_compaction_isolate_template, mm_compaction_isolate_freepages,\n\n\tTP_PROTO(\n\t\tunsigned long start_pfn,\n\t\tunsigned long end_pfn,\n\t\tunsigned long nr_scanned,\n\t\tunsigned long nr_taken),\n\n\tTP_ARGS(start_pfn, end_pfn, nr_scanned, nr_taken)\n);\n\nDEFINE_EVENT(mm_compaction_isolate_template, mm_compaction_fast_isolate_freepages,\n\n\tTP_PROTO(\n\t\tunsigned long start_pfn,\n\t\tunsigned long end_pfn,\n\t\tunsigned long nr_scanned,\n\t\tunsigned long nr_taken),\n\n\tTP_ARGS(start_pfn, end_pfn, nr_scanned, nr_taken)\n);\n\n#ifdef CONFIG_COMPACTION\nTRACE_EVENT(mm_compaction_migratepages,\n\n\tTP_PROTO(struct compact_control *cc,\n\t\tunsigned int nr_succeeded),\n\n\tTP_ARGS(cc, nr_succeeded),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, nr_migrated)\n\t\t__field(unsigned long, nr_failed)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nr_migrated = nr_succeeded;\n\t\t__entry->nr_failed = cc->nr_migratepages - nr_succeeded;\n\t),\n\n\tTP_printk(\"nr_migrated=%lu nr_failed=%lu\",\n\t\t__entry->nr_migrated,\n\t\t__entry->nr_failed)\n);\n\nTRACE_EVENT(mm_compaction_begin,\n\tTP_PROTO(struct compact_control *cc, unsigned long zone_start,\n\t\tunsigned long zone_end, bool sync),\n\n\tTP_ARGS(cc, zone_start, zone_end, sync),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, zone_start)\n\t\t__field(unsigned long, migrate_pfn)\n\t\t__field(unsigned long, free_pfn)\n\t\t__field(unsigned long, zone_end)\n\t\t__field(bool, sync)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->zone_start = zone_start;\n\t\t__entry->migrate_pfn = cc->migrate_pfn;\n\t\t__entry->free_pfn = cc->free_pfn;\n\t\t__entry->zone_end = zone_end;\n\t\t__entry->sync = sync;\n\t),\n\n\tTP_printk(\"zone_start=0x%lx migrate_pfn=0x%lx free_pfn=0x%lx zone_end=0x%lx, mode=%s\",\n\t\t__entry->zone_start,\n\t\t__entry->migrate_pfn,\n\t\t__entry->free_pfn,\n\t\t__entry->zone_end,\n\t\t__entry->sync ? \"sync\" : \"async\")\n);\n\nTRACE_EVENT(mm_compaction_end,\n\tTP_PROTO(struct compact_control *cc, unsigned long zone_start,\n\t\tunsigned long zone_end, bool sync,\n\t\tint status),\n\n\tTP_ARGS(cc, zone_start, zone_end, sync, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, zone_start)\n\t\t__field(unsigned long, migrate_pfn)\n\t\t__field(unsigned long, free_pfn)\n\t\t__field(unsigned long, zone_end)\n\t\t__field(bool, sync)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->zone_start = zone_start;\n\t\t__entry->migrate_pfn = cc->migrate_pfn;\n\t\t__entry->free_pfn = cc->free_pfn;\n\t\t__entry->zone_end = zone_end;\n\t\t__entry->sync = sync;\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(\"zone_start=0x%lx migrate_pfn=0x%lx free_pfn=0x%lx zone_end=0x%lx, mode=%s status=%s\",\n\t\t__entry->zone_start,\n\t\t__entry->migrate_pfn,\n\t\t__entry->free_pfn,\n\t\t__entry->zone_end,\n\t\t__entry->sync ? \"sync\" : \"async\",\n\t\t__print_symbolic(__entry->status, COMPACTION_STATUS))\n);\n\nTRACE_EVENT(mm_compaction_try_to_compact_pages,\n\n\tTP_PROTO(\n\t\tint order,\n\t\tgfp_t gfp_mask,\n\t\tint prio),\n\n\tTP_ARGS(order, gfp_mask, prio),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, order)\n\t\t__field(unsigned long, gfp_mask)\n\t\t__field(int, prio)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->order = order;\n\t\t__entry->gfp_mask = (__force unsigned long)gfp_mask;\n\t\t__entry->prio = prio;\n\t),\n\n\tTP_printk(\"order=%d gfp_mask=%s priority=%d\",\n\t\t__entry->order,\n\t\tshow_gfp_flags(__entry->gfp_mask),\n\t\t__entry->prio)\n);\n\nDECLARE_EVENT_CLASS(mm_compaction_suitable_template,\n\n\tTP_PROTO(struct zone *zone,\n\t\tint order,\n\t\tint ret),\n\n\tTP_ARGS(zone, order, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(enum zone_type, idx)\n\t\t__field(int, order)\n\t\t__field(int, ret)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = zone_to_nid(zone);\n\t\t__entry->idx = zone_idx(zone);\n\t\t__entry->order = order;\n\t\t__entry->ret = ret;\n\t),\n\n\tTP_printk(\"node=%d zone=%-8s order=%d ret=%s\",\n\t\t__entry->nid,\n\t\t__print_symbolic(__entry->idx, ZONE_TYPE),\n\t\t__entry->order,\n\t\t__print_symbolic(__entry->ret, COMPACTION_STATUS))\n);\n\nDEFINE_EVENT(mm_compaction_suitable_template, mm_compaction_finished,\n\n\tTP_PROTO(struct zone *zone,\n\t\tint order,\n\t\tint ret),\n\n\tTP_ARGS(zone, order, ret)\n);\n\nDEFINE_EVENT(mm_compaction_suitable_template, mm_compaction_suitable,\n\n\tTP_PROTO(struct zone *zone,\n\t\tint order,\n\t\tint ret),\n\n\tTP_ARGS(zone, order, ret)\n);\n\nDECLARE_EVENT_CLASS(mm_compaction_defer_template,\n\n\tTP_PROTO(struct zone *zone, int order),\n\n\tTP_ARGS(zone, order),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(enum zone_type, idx)\n\t\t__field(int, order)\n\t\t__field(unsigned int, considered)\n\t\t__field(unsigned int, defer_shift)\n\t\t__field(int, order_failed)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = zone_to_nid(zone);\n\t\t__entry->idx = zone_idx(zone);\n\t\t__entry->order = order;\n\t\t__entry->considered = zone->compact_considered;\n\t\t__entry->defer_shift = zone->compact_defer_shift;\n\t\t__entry->order_failed = zone->compact_order_failed;\n\t),\n\n\tTP_printk(\"node=%d zone=%-8s order=%d order_failed=%d consider=%u limit=%lu\",\n\t\t__entry->nid,\n\t\t__print_symbolic(__entry->idx, ZONE_TYPE),\n\t\t__entry->order,\n\t\t__entry->order_failed,\n\t\t__entry->considered,\n\t\t1UL << __entry->defer_shift)\n);\n\nDEFINE_EVENT(mm_compaction_defer_template, mm_compaction_deferred,\n\n\tTP_PROTO(struct zone *zone, int order),\n\n\tTP_ARGS(zone, order)\n);\n\nDEFINE_EVENT(mm_compaction_defer_template, mm_compaction_defer_compaction,\n\n\tTP_PROTO(struct zone *zone, int order),\n\n\tTP_ARGS(zone, order)\n);\n\nDEFINE_EVENT(mm_compaction_defer_template, mm_compaction_defer_reset,\n\n\tTP_PROTO(struct zone *zone, int order),\n\n\tTP_ARGS(zone, order)\n);\n\nTRACE_EVENT(mm_compaction_kcompactd_sleep,\n\n\tTP_PROTO(int nid),\n\n\tTP_ARGS(nid),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t),\n\n\tTP_printk(\"nid=%d\", __entry->nid)\n);\n\nDECLARE_EVENT_CLASS(kcompactd_wake_template,\n\n\tTP_PROTO(int nid, int order, enum zone_type highest_zoneidx),\n\n\tTP_ARGS(nid, order, highest_zoneidx),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(int, order)\n\t\t__field(enum zone_type, highest_zoneidx)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t\t__entry->order = order;\n\t\t__entry->highest_zoneidx = highest_zoneidx;\n\t),\n\n\t \n\tTP_printk(\"nid=%d order=%d classzone_idx=%-8s\",\n\t\t__entry->nid,\n\t\t__entry->order,\n\t\t__print_symbolic(__entry->highest_zoneidx, ZONE_TYPE))\n);\n\nDEFINE_EVENT(kcompactd_wake_template, mm_compaction_wakeup_kcompactd,\n\n\tTP_PROTO(int nid, int order, enum zone_type highest_zoneidx),\n\n\tTP_ARGS(nid, order, highest_zoneidx)\n);\n\nDEFINE_EVENT(kcompactd_wake_template, mm_compaction_kcompactd_wake,\n\n\tTP_PROTO(int nid, int order, enum zone_type highest_zoneidx),\n\n\tTP_ARGS(nid, order, highest_zoneidx)\n);\n#endif\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}