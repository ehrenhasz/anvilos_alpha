{
  "module_name": "sunrpc.h",
  "hash_id": "c07ae62ffe619b1e4328f0e559f15b3cb26599c3880bfe36f0e94c52f57d37cb",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/sunrpc.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM sunrpc\n\n#if !defined(_TRACE_SUNRPC_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_SUNRPC_H\n\n#include <linux/sunrpc/sched.h>\n#include <linux/sunrpc/clnt.h>\n#include <linux/sunrpc/svc.h>\n#include <linux/sunrpc/xprtsock.h>\n#include <linux/sunrpc/svc_xprt.h>\n#include <net/tcp_states.h>\n#include <linux/net.h>\n#include <linux/tracepoint.h>\n\n#include <trace/misc/sunrpc.h>\n\nTRACE_DEFINE_ENUM(SOCK_STREAM);\nTRACE_DEFINE_ENUM(SOCK_DGRAM);\nTRACE_DEFINE_ENUM(SOCK_RAW);\nTRACE_DEFINE_ENUM(SOCK_RDM);\nTRACE_DEFINE_ENUM(SOCK_SEQPACKET);\nTRACE_DEFINE_ENUM(SOCK_DCCP);\nTRACE_DEFINE_ENUM(SOCK_PACKET);\n\n#define show_socket_type(type)\t\t\t\t\t\\\n\t__print_symbolic(type,\t\t\t\t\t\\\n\t\t{ SOCK_STREAM,\t\t\"STREAM\" },\t\t\\\n\t\t{ SOCK_DGRAM,\t\t\"DGRAM\" },\t\t\\\n\t\t{ SOCK_RAW,\t\t\"RAW\" },\t\t\\\n\t\t{ SOCK_RDM,\t\t\"RDM\" },\t\t\\\n\t\t{ SOCK_SEQPACKET,\t\"SEQPACKET\" },\t\t\\\n\t\t{ SOCK_DCCP,\t\t\"DCCP\" },\t\t\\\n\t\t{ SOCK_PACKET,\t\t\"PACKET\" })\n\n \nTRACE_DEFINE_ENUM(AF_UNSPEC);\nTRACE_DEFINE_ENUM(AF_UNIX);\nTRACE_DEFINE_ENUM(AF_LOCAL);\nTRACE_DEFINE_ENUM(AF_INET);\nTRACE_DEFINE_ENUM(AF_INET6);\n\n#define rpc_show_address_family(family)\t\t\t\t\\\n\t__print_symbolic(family,\t\t\t\t\\\n\t\t{ AF_UNSPEC,\t\t\"AF_UNSPEC\" },\t\t\\\n\t\t{ AF_UNIX,\t\t\"AF_UNIX\" },\t\t\\\n\t\t{ AF_LOCAL,\t\t\"AF_LOCAL\" },\t\t\\\n\t\t{ AF_INET,\t\t\"AF_INET\" },\t\t\\\n\t\t{ AF_INET6,\t\t\"AF_INET6\" })\n\nDECLARE_EVENT_CLASS(rpc_xdr_buf_class,\n\tTP_PROTO(\n\t\tconst struct rpc_task *task,\n\t\tconst struct xdr_buf *xdr\n\t),\n\n\tTP_ARGS(task, xdr),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(const void *, head_base)\n\t\t__field(size_t, head_len)\n\t\t__field(const void *, tail_base)\n\t\t__field(size_t, tail_len)\n\t\t__field(unsigned int, page_base)\n\t\t__field(unsigned int, page_len)\n\t\t__field(unsigned int, msg_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client ?\n\t\t\t\t     task->tk_client->cl_clid : -1;\n\t\t__entry->head_base = xdr->head[0].iov_base;\n\t\t__entry->head_len = xdr->head[0].iov_len;\n\t\t__entry->tail_base = xdr->tail[0].iov_base;\n\t\t__entry->tail_len = xdr->tail[0].iov_len;\n\t\t__entry->page_base = xdr->page_base;\n\t\t__entry->page_len = xdr->page_len;\n\t\t__entry->msg_len = xdr->len;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" head=[%p,%zu] page=%u(%u) tail=[%p,%zu] len=%u\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->head_base, __entry->head_len,\n\t\t__entry->page_len, __entry->page_base,\n\t\t__entry->tail_base, __entry->tail_len,\n\t\t__entry->msg_len\n\t)\n);\n\n#define DEFINE_RPCXDRBUF_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(rpc_xdr_buf_class,\t\t\t\t\\\n\t\t\t\trpc_xdr_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tconst struct rpc_task *task,\t\\\n\t\t\t\t\tconst struct xdr_buf *xdr\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(task, xdr))\n\nDEFINE_RPCXDRBUF_EVENT(sendto);\nDEFINE_RPCXDRBUF_EVENT(recvfrom);\nDEFINE_RPCXDRBUF_EVENT(reply_pages);\n\n\nDECLARE_EVENT_CLASS(rpc_clnt_class,\n\tTP_PROTO(\n\t\tconst struct rpc_clnt *clnt\n\t),\n\n\tTP_ARGS(clnt),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, client_id)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = clnt->cl_clid;\n\t),\n\n\tTP_printk(\"client=\" SUNRPC_TRACE_CLID_SPECIFIER, __entry->client_id)\n);\n\n#define DEFINE_RPC_CLNT_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(rpc_clnt_class,\t\t\t\t\\\n\t\t\t\trpc_clnt_##name,\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tconst struct rpc_clnt *clnt\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(clnt))\n\nDEFINE_RPC_CLNT_EVENT(free);\nDEFINE_RPC_CLNT_EVENT(killall);\nDEFINE_RPC_CLNT_EVENT(shutdown);\nDEFINE_RPC_CLNT_EVENT(release);\nDEFINE_RPC_CLNT_EVENT(replace_xprt);\nDEFINE_RPC_CLNT_EVENT(replace_xprt_err);\n\nTRACE_DEFINE_ENUM(RPC_XPRTSEC_NONE);\nTRACE_DEFINE_ENUM(RPC_XPRTSEC_TLS_X509);\n\n#define rpc_show_xprtsec_policy(policy)\t\t\t\t\t\\\n\t__print_symbolic(policy,\t\t\t\t\t\\\n\t\t{ RPC_XPRTSEC_NONE,\t\t\"none\" },\t\t\\\n\t\t{ RPC_XPRTSEC_TLS_ANON,\t\t\"tls-anon\" },\t\t\\\n\t\t{ RPC_XPRTSEC_TLS_X509,\t\t\"tls-x509\" })\n\n#define rpc_show_create_flags(flags)\t\t\t\t\t\\\n\t__print_flags(flags, \"|\",\t\t\t\t\t\\\n\t\t{ RPC_CLNT_CREATE_HARDRTRY,\t\"HARDRTRY\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_AUTOBIND,\t\"AUTOBIND\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_NONPRIVPORT,\t\"NONPRIVPORT\" },\t\\\n\t\t{ RPC_CLNT_CREATE_NOPING,\t\"NOPING\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_DISCRTRY,\t\"DISCRTRY\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_QUIET,\t\"QUIET\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_INFINITE_SLOTS,\t\t\t\\\n\t\t\t\t\t\t\"INFINITE_SLOTS\" },\t\\\n\t\t{ RPC_CLNT_CREATE_NO_IDLE_TIMEOUT,\t\t\t\\\n\t\t\t\t\t\t\"NO_IDLE_TIMEOUT\" },\t\\\n\t\t{ RPC_CLNT_CREATE_NO_RETRANS_TIMEOUT,\t\t\t\\\n\t\t\t\t\t\t\"NO_RETRANS_TIMEOUT\" },\t\\\n\t\t{ RPC_CLNT_CREATE_SOFTERR,\t\"SOFTERR\" },\t\t\\\n\t\t{ RPC_CLNT_CREATE_REUSEPORT,\t\"REUSEPORT\" })\n\nTRACE_EVENT(rpc_clnt_new,\n\tTP_PROTO(\n\t\tconst struct rpc_clnt *clnt,\n\t\tconst struct rpc_xprt *xprt,\n\t\tconst struct rpc_create_args *args\n\t),\n\n\tTP_ARGS(clnt, xprt, args),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned long, xprtsec)\n\t\t__field(unsigned long, flags)\n\t\t__string(program, clnt->cl_program->name)\n\t\t__string(server, xprt->servername)\n\t\t__string(addr, xprt->address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xprt->address_strings[RPC_DISPLAY_PORT])\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = clnt->cl_clid;\n\t\t__entry->xprtsec = args->xprtsec.policy;\n\t\t__entry->flags = args->flags;\n\t\t__assign_str(program, clnt->cl_program->name);\n\t\t__assign_str(server, xprt->servername);\n\t\t__assign_str(addr, xprt->address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xprt->address_strings[RPC_DISPLAY_PORT]);\n\t),\n\n\tTP_printk(\"client=\" SUNRPC_TRACE_CLID_SPECIFIER \" peer=[%s]:%s\"\n\t\t\" program=%s server=%s xprtsec=%s flags=%s\",\n\t\t__entry->client_id, __get_str(addr), __get_str(port),\n\t\t__get_str(program), __get_str(server),\n\t\trpc_show_xprtsec_policy(__entry->xprtsec),\n\t\trpc_show_create_flags(__entry->flags)\n\t)\n);\n\nTRACE_EVENT(rpc_clnt_new_err,\n\tTP_PROTO(\n\t\tconst char *program,\n\t\tconst char *server,\n\t\tint error\n\t),\n\n\tTP_ARGS(program, server, error),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, error)\n\t\t__string(program, program)\n\t\t__string(server, server)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->error = error;\n\t\t__assign_str(program, program);\n\t\t__assign_str(server, server);\n\t),\n\n\tTP_printk(\"program=%s server=%s error=%d\",\n\t\t__get_str(program), __get_str(server), __entry->error)\n);\n\nTRACE_EVENT(rpc_clnt_clone_err,\n\tTP_PROTO(\n\t\tconst struct rpc_clnt *clnt,\n\t\tint error\n\t),\n\n\tTP_ARGS(clnt, error),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, error)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = clnt->cl_clid;\n\t\t__entry->error = error;\n\t),\n\n\tTP_printk(\"client=\" SUNRPC_TRACE_CLID_SPECIFIER \" error=%d\",\n\t\t__entry->client_id, __entry->error)\n);\n\n\nTRACE_DEFINE_ENUM(RPC_AUTH_OK);\nTRACE_DEFINE_ENUM(RPC_AUTH_BADCRED);\nTRACE_DEFINE_ENUM(RPC_AUTH_REJECTEDCRED);\nTRACE_DEFINE_ENUM(RPC_AUTH_BADVERF);\nTRACE_DEFINE_ENUM(RPC_AUTH_REJECTEDVERF);\nTRACE_DEFINE_ENUM(RPC_AUTH_TOOWEAK);\nTRACE_DEFINE_ENUM(RPCSEC_GSS_CREDPROBLEM);\nTRACE_DEFINE_ENUM(RPCSEC_GSS_CTXPROBLEM);\n\n#define rpc_show_auth_stat(status)\t\t\t\t\t\\\n\t__print_symbolic(status,\t\t\t\t\t\\\n\t\t{ RPC_AUTH_OK,\t\t\t\"AUTH_OK\" },\t\t\\\n\t\t{ RPC_AUTH_BADCRED,\t\t\"BADCRED\" },\t\t\\\n\t\t{ RPC_AUTH_REJECTEDCRED,\t\"REJECTEDCRED\" },\t\\\n\t\t{ RPC_AUTH_BADVERF,\t\t\"BADVERF\" },\t\t\\\n\t\t{ RPC_AUTH_REJECTEDVERF,\t\"REJECTEDVERF\" },\t\\\n\t\t{ RPC_AUTH_TOOWEAK,\t\t\"TOOWEAK\" },\t\t\\\n\t\t{ RPCSEC_GSS_CREDPROBLEM,\t\"GSS_CREDPROBLEM\" },\t\\\n\t\t{ RPCSEC_GSS_CTXPROBLEM,\t\"GSS_CTXPROBLEM\" })\t\\\n\nDECLARE_EVENT_CLASS(rpc_task_status,\n\n\tTP_PROTO(const struct rpc_task *task),\n\n\tTP_ARGS(task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->status = task->tk_status;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER \" status=%d\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->status)\n);\n#define DEFINE_RPC_STATUS_EVENT(name) \\\n\tDEFINE_EVENT(rpc_task_status, rpc_##name##_status, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_task *task \\\n\t\t\t), \\\n\t\t\tTP_ARGS(task))\n\nDEFINE_RPC_STATUS_EVENT(call);\nDEFINE_RPC_STATUS_EVENT(connect);\nDEFINE_RPC_STATUS_EVENT(timeout);\nDEFINE_RPC_STATUS_EVENT(retry_refresh);\nDEFINE_RPC_STATUS_EVENT(refresh);\n\nTRACE_EVENT(rpc_request,\n\tTP_PROTO(const struct rpc_task *task),\n\n\tTP_ARGS(task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, version)\n\t\t__field(bool, async)\n\t\t__string(progname, task->tk_client->cl_program->name)\n\t\t__string(procname, rpc_proc_name(task))\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->version = task->tk_client->cl_vers;\n\t\t__entry->async = RPC_IS_ASYNC(task);\n\t\t__assign_str(progname, task->tk_client->cl_program->name);\n\t\t__assign_str(procname, rpc_proc_name(task));\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER \" %sv%d %s (%ssync)\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__get_str(progname), __entry->version,\n\t\t__get_str(procname), __entry->async ? \"a\": \"\"\n\t\t)\n);\n\n#define rpc_show_task_flags(flags)\t\t\t\t\t\\\n\t__print_flags(flags, \"|\",\t\t\t\t\t\\\n\t\t{ RPC_TASK_ASYNC, \"ASYNC\" },\t\t\t\t\\\n\t\t{ RPC_TASK_SWAPPER, \"SWAPPER\" },\t\t\t\\\n\t\t{ RPC_TASK_MOVEABLE, \"MOVEABLE\" },\t\t\t\\\n\t\t{ RPC_TASK_NULLCREDS, \"NULLCREDS\" },\t\t\t\\\n\t\t{ RPC_CALL_MAJORSEEN, \"MAJORSEEN\" },\t\t\t\\\n\t\t{ RPC_TASK_DYNAMIC, \"DYNAMIC\" },\t\t\t\\\n\t\t{ RPC_TASK_NO_ROUND_ROBIN, \"NO_ROUND_ROBIN\" },\t\t\\\n\t\t{ RPC_TASK_SOFT, \"SOFT\" },\t\t\t\t\\\n\t\t{ RPC_TASK_SOFTCONN, \"SOFTCONN\" },\t\t\t\\\n\t\t{ RPC_TASK_SENT, \"SENT\" },\t\t\t\t\\\n\t\t{ RPC_TASK_TIMEOUT, \"TIMEOUT\" },\t\t\t\\\n\t\t{ RPC_TASK_NOCONNECT, \"NOCONNECT\" },\t\t\t\\\n\t\t{ RPC_TASK_NO_RETRANS_TIMEOUT, \"NORTO\" },\t\t\\\n\t\t{ RPC_TASK_CRED_NOREF, \"CRED_NOREF\" })\n\n#define rpc_show_runstate(flags)\t\t\t\t\t\\\n\t__print_flags(flags, \"|\",\t\t\t\t\t\\\n\t\t{ (1UL << RPC_TASK_RUNNING), \"RUNNING\" },\t\t\\\n\t\t{ (1UL << RPC_TASK_QUEUED), \"QUEUED\" },\t\t\t\\\n\t\t{ (1UL << RPC_TASK_ACTIVE), \"ACTIVE\" },\t\t\t\\\n\t\t{ (1UL << RPC_TASK_NEED_XMIT), \"NEED_XMIT\" },\t\t\\\n\t\t{ (1UL << RPC_TASK_NEED_RECV), \"NEED_RECV\" },\t\t\\\n\t\t{ (1UL << RPC_TASK_MSG_PIN_WAIT), \"MSG_PIN_WAIT\" },\t\\\n\t\t{ (1UL << RPC_TASK_SIGNALLED), \"SIGNALLED\" })\n\nDECLARE_EVENT_CLASS(rpc_task_running,\n\n\tTP_PROTO(const struct rpc_task *task, const void *action),\n\n\tTP_ARGS(task, action),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(const void *, action)\n\t\t__field(unsigned long, runstate)\n\t\t__field(int, status)\n\t\t__field(unsigned short, flags)\n\t\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = task->tk_client ?\n\t\t\t\t     task->tk_client->cl_clid : -1;\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->action = action;\n\t\t__entry->runstate = task->tk_runstate;\n\t\t__entry->status = task->tk_status;\n\t\t__entry->flags = task->tk_flags;\n\t\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" flags=%s runstate=%s status=%d action=%ps\",\n\t\t__entry->task_id, __entry->client_id,\n\t\trpc_show_task_flags(__entry->flags),\n\t\trpc_show_runstate(__entry->runstate),\n\t\t__entry->status,\n\t\t__entry->action\n\t\t)\n);\n#define DEFINE_RPC_RUNNING_EVENT(name) \\\n\tDEFINE_EVENT(rpc_task_running, rpc_task_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_task *task, \\\n\t\t\t\tconst void *action \\\n\t\t\t), \\\n\t\t\tTP_ARGS(task, action))\n\nDEFINE_RPC_RUNNING_EVENT(begin);\nDEFINE_RPC_RUNNING_EVENT(run_action);\nDEFINE_RPC_RUNNING_EVENT(sync_sleep);\nDEFINE_RPC_RUNNING_EVENT(sync_wake);\nDEFINE_RPC_RUNNING_EVENT(complete);\nDEFINE_RPC_RUNNING_EVENT(timeout);\nDEFINE_RPC_RUNNING_EVENT(signalled);\nDEFINE_RPC_RUNNING_EVENT(end);\nDEFINE_RPC_RUNNING_EVENT(call_done);\n\nDECLARE_EVENT_CLASS(rpc_task_queued,\n\n\tTP_PROTO(const struct rpc_task *task, const struct rpc_wait_queue *q),\n\n\tTP_ARGS(task, q),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned long, timeout)\n\t\t__field(unsigned long, runstate)\n\t\t__field(int, status)\n\t\t__field(unsigned short, flags)\n\t\t__string(q_name, rpc_qname(q))\n\t\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = task->tk_client ?\n\t\t\t\t     task->tk_client->cl_clid : -1;\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->timeout = rpc_task_timeout(task);\n\t\t__entry->runstate = task->tk_runstate;\n\t\t__entry->status = task->tk_status;\n\t\t__entry->flags = task->tk_flags;\n\t\t__assign_str(q_name, rpc_qname(q));\n\t\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" flags=%s runstate=%s status=%d timeout=%lu queue=%s\",\n\t\t__entry->task_id, __entry->client_id,\n\t\trpc_show_task_flags(__entry->flags),\n\t\trpc_show_runstate(__entry->runstate),\n\t\t__entry->status,\n\t\t__entry->timeout,\n\t\t__get_str(q_name)\n\t\t)\n);\n#define DEFINE_RPC_QUEUED_EVENT(name) \\\n\tDEFINE_EVENT(rpc_task_queued, rpc_task_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_task *task, \\\n\t\t\t\tconst struct rpc_wait_queue *q \\\n\t\t\t), \\\n\t\t\tTP_ARGS(task, q))\n\nDEFINE_RPC_QUEUED_EVENT(sleep);\nDEFINE_RPC_QUEUED_EVENT(wakeup);\n\nDECLARE_EVENT_CLASS(rpc_failure,\n\n\tTP_PROTO(const struct rpc_task *task),\n\n\tTP_ARGS(task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER,\n\t\t__entry->task_id, __entry->client_id)\n);\n\n#define DEFINE_RPC_FAILURE(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(rpc_failure, rpc_bad_##name,\t\t\t\\\n\t\t\tTP_PROTO(\t\t\t\t\t\\\n\t\t\t\tconst struct rpc_task *task\t\t\\\n\t\t\t),\t\t\t\t\t\t\\\n\t\t\tTP_ARGS(task))\n\nDEFINE_RPC_FAILURE(callhdr);\nDEFINE_RPC_FAILURE(verifier);\n\nDECLARE_EVENT_CLASS(rpc_reply_event,\n\n\tTP_PROTO(\n\t\tconst struct rpc_task *task\n\t),\n\n\tTP_ARGS(task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(u32, xid)\n\t\t__string(progname, task->tk_client->cl_program->name)\n\t\t__field(u32, version)\n\t\t__string(procname, rpc_proc_name(task))\n\t\t__string(servername, task->tk_xprt->servername)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->xid = be32_to_cpu(task->tk_rqstp->rq_xid);\n\t\t__assign_str(progname, task->tk_client->cl_program->name);\n\t\t__entry->version = task->tk_client->cl_vers;\n\t\t__assign_str(procname, rpc_proc_name(task));\n\t\t__assign_str(servername, task->tk_xprt->servername);\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" server=%s xid=0x%08x %sv%d %s\",\n\t\t__entry->task_id, __entry->client_id, __get_str(servername),\n\t\t__entry->xid, __get_str(progname), __entry->version,\n\t\t__get_str(procname))\n)\n\n#define DEFINE_RPC_REPLY_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(rpc_reply_event, rpc__##name,\t\t\t\\\n\t\t\tTP_PROTO(\t\t\t\t\t\\\n\t\t\t\tconst struct rpc_task *task\t\t\\\n\t\t\t),\t\t\t\t\t\t\\\n\t\t\tTP_ARGS(task))\n\nDEFINE_RPC_REPLY_EVENT(prog_unavail);\nDEFINE_RPC_REPLY_EVENT(prog_mismatch);\nDEFINE_RPC_REPLY_EVENT(proc_unavail);\nDEFINE_RPC_REPLY_EVENT(garbage_args);\nDEFINE_RPC_REPLY_EVENT(unparsable);\nDEFINE_RPC_REPLY_EVENT(mismatch);\nDEFINE_RPC_REPLY_EVENT(stale_creds);\nDEFINE_RPC_REPLY_EVENT(bad_creds);\nDEFINE_RPC_REPLY_EVENT(auth_tooweak);\n\n#define DEFINE_RPCB_ERROR_EVENT(name)\t\t\t\t\t\\\n\tDEFINE_EVENT(rpc_reply_event, rpcb_##name##_err,\t\t\\\n\t\t\tTP_PROTO(\t\t\t\t\t\\\n\t\t\t\tconst struct rpc_task *task\t\t\\\n\t\t\t),\t\t\t\t\t\t\\\n\t\t\tTP_ARGS(task))\n\nDEFINE_RPCB_ERROR_EVENT(prog_unavail);\nDEFINE_RPCB_ERROR_EVENT(timeout);\nDEFINE_RPCB_ERROR_EVENT(bind_version);\nDEFINE_RPCB_ERROR_EVENT(unreachable);\nDEFINE_RPCB_ERROR_EVENT(unrecognized);\n\nTRACE_EVENT(rpc_buf_alloc,\n\tTP_PROTO(\n\t\tconst struct rpc_task *task,\n\t\tint status\n\t),\n\n\tTP_ARGS(task, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(size_t, callsize)\n\t\t__field(size_t, recvsize)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->callsize = task->tk_rqstp->rq_callsize;\n\t\t__entry->recvsize = task->tk_rqstp->rq_rcvsize;\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" callsize=%zu recvsize=%zu status=%d\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->callsize, __entry->recvsize, __entry->status\n\t)\n);\n\nTRACE_EVENT(rpc_call_rpcerror,\n\tTP_PROTO(\n\t\tconst struct rpc_task *task,\n\t\tint tk_status,\n\t\tint rpc_status\n\t),\n\n\tTP_ARGS(task, tk_status, rpc_status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, tk_status)\n\t\t__field(int, rpc_status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->tk_status = tk_status;\n\t\t__entry->rpc_status = rpc_status;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" tk_status=%d rpc_status=%d\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->tk_status, __entry->rpc_status)\n);\n\nTRACE_EVENT(rpc_stats_latency,\n\n\tTP_PROTO(\n\t\tconst struct rpc_task *task,\n\t\tktime_t backlog,\n\t\tktime_t rtt,\n\t\tktime_t execute\n\t),\n\n\tTP_ARGS(task, backlog, rtt, execute),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(u32, xid)\n\t\t__field(int, version)\n\t\t__string(progname, task->tk_client->cl_program->name)\n\t\t__string(procname, rpc_proc_name(task))\n\t\t__field(unsigned long, backlog)\n\t\t__field(unsigned long, rtt)\n\t\t__field(unsigned long, execute)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->xid = be32_to_cpu(task->tk_rqstp->rq_xid);\n\t\t__entry->version = task->tk_client->cl_vers;\n\t\t__assign_str(progname, task->tk_client->cl_program->name);\n\t\t__assign_str(procname, rpc_proc_name(task));\n\t\t__entry->backlog = ktime_to_us(backlog);\n\t\t__entry->rtt = ktime_to_us(rtt);\n\t\t__entry->execute = ktime_to_us(execute);\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" xid=0x%08x %sv%d %s backlog=%lu rtt=%lu execute=%lu\",\n\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t__get_str(progname), __entry->version, __get_str(procname),\n\t\t__entry->backlog, __entry->rtt, __entry->execute)\n);\n\nTRACE_EVENT(rpc_xdr_overflow,\n\tTP_PROTO(\n\t\tconst struct xdr_stream *xdr,\n\t\tsize_t requested\n\t),\n\n\tTP_ARGS(xdr, requested),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, version)\n\t\t__field(size_t, requested)\n\t\t__field(const void *, end)\n\t\t__field(const void *, p)\n\t\t__field(const void *, head_base)\n\t\t__field(size_t, head_len)\n\t\t__field(const void *, tail_base)\n\t\t__field(size_t, tail_len)\n\t\t__field(unsigned int, page_len)\n\t\t__field(unsigned int, len)\n\t\t__string(progname, xdr->rqst ?\n\t\t\t xdr->rqst->rq_task->tk_client->cl_program->name : \"unknown\")\n\t\t__string(procedure, xdr->rqst ?\n\t\t\t xdr->rqst->rq_task->tk_msg.rpc_proc->p_name : \"unknown\")\n\t),\n\n\tTP_fast_assign(\n\t\tif (xdr->rqst) {\n\t\t\tconst struct rpc_task *task = xdr->rqst->rq_task;\n\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t\t__assign_str(progname,\n\t\t\t\t     task->tk_client->cl_program->name);\n\t\t\t__entry->version = task->tk_client->cl_vers;\n\t\t\t__assign_str(procedure, task->tk_msg.rpc_proc->p_name);\n\t\t} else {\n\t\t\t__entry->task_id = -1;\n\t\t\t__entry->client_id = -1;\n\t\t\t__assign_str(progname, \"unknown\");\n\t\t\t__entry->version = 0;\n\t\t\t__assign_str(procedure, \"unknown\");\n\t\t}\n\t\t__entry->requested = requested;\n\t\t__entry->end = xdr->end;\n\t\t__entry->p = xdr->p;\n\t\t__entry->head_base = xdr->buf->head[0].iov_base,\n\t\t__entry->head_len = xdr->buf->head[0].iov_len,\n\t\t__entry->page_len = xdr->buf->page_len,\n\t\t__entry->tail_base = xdr->buf->tail[0].iov_base,\n\t\t__entry->tail_len = xdr->buf->tail[0].iov_len,\n\t\t__entry->len = xdr->buf->len;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" %sv%d %s requested=%zu p=%p end=%p xdr=[%p,%zu]/%u/[%p,%zu]/%u\\n\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__get_str(progname), __entry->version, __get_str(procedure),\n\t\t__entry->requested, __entry->p, __entry->end,\n\t\t__entry->head_base, __entry->head_len,\n\t\t__entry->page_len,\n\t\t__entry->tail_base, __entry->tail_len,\n\t\t__entry->len\n\t)\n);\n\nTRACE_EVENT(rpc_xdr_alignment,\n\tTP_PROTO(\n\t\tconst struct xdr_stream *xdr,\n\t\tsize_t offset,\n\t\tunsigned int copied\n\t),\n\n\tTP_ARGS(xdr, offset, copied),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, version)\n\t\t__field(size_t, offset)\n\t\t__field(unsigned int, copied)\n\t\t__field(const void *, head_base)\n\t\t__field(size_t, head_len)\n\t\t__field(const void *, tail_base)\n\t\t__field(size_t, tail_len)\n\t\t__field(unsigned int, page_len)\n\t\t__field(unsigned int, len)\n\t\t__string(progname,\n\t\t\t xdr->rqst->rq_task->tk_client->cl_program->name)\n\t\t__string(procedure,\n\t\t\t xdr->rqst->rq_task->tk_msg.rpc_proc->p_name)\n\t),\n\n\tTP_fast_assign(\n\t\tconst struct rpc_task *task = xdr->rqst->rq_task;\n\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__assign_str(progname,\n\t\t\t     task->tk_client->cl_program->name);\n\t\t__entry->version = task->tk_client->cl_vers;\n\t\t__assign_str(procedure, task->tk_msg.rpc_proc->p_name);\n\n\t\t__entry->offset = offset;\n\t\t__entry->copied = copied;\n\t\t__entry->head_base = xdr->buf->head[0].iov_base,\n\t\t__entry->head_len = xdr->buf->head[0].iov_len,\n\t\t__entry->page_len = xdr->buf->page_len,\n\t\t__entry->tail_base = xdr->buf->tail[0].iov_base,\n\t\t__entry->tail_len = xdr->buf->tail[0].iov_len,\n\t\t__entry->len = xdr->buf->len;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" %sv%d %s offset=%zu copied=%u xdr=[%p,%zu]/%u/[%p,%zu]/%u\\n\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__get_str(progname), __entry->version, __get_str(procedure),\n\t\t__entry->offset, __entry->copied,\n\t\t__entry->head_base, __entry->head_len,\n\t\t__entry->page_len,\n\t\t__entry->tail_base, __entry->tail_len,\n\t\t__entry->len\n\t)\n);\n\n \n#undef EM\n#undef EMe\n#define EM(a, b)\tTRACE_DEFINE_ENUM(a);\n#define EMe(a, b)\tTRACE_DEFINE_ENUM(a);\n\n#define RPC_SHOW_SOCKET\t\t\t\t\\\n\tEM( SS_FREE, \"FREE\" )\t\t\t\\\n\tEM( SS_UNCONNECTED, \"UNCONNECTED\" )\t\\\n\tEM( SS_CONNECTING, \"CONNECTING\" )\t\\\n\tEM( SS_CONNECTED, \"CONNECTED\" )\t\t\\\n\tEMe( SS_DISCONNECTING, \"DISCONNECTING\" )\n\n#define rpc_show_socket_state(state) \\\n\t__print_symbolic(state, RPC_SHOW_SOCKET)\n\nRPC_SHOW_SOCKET\n\n#define RPC_SHOW_SOCK\t\t\t\t\\\n\tEM( TCP_ESTABLISHED, \"ESTABLISHED\" )\t\\\n\tEM( TCP_SYN_SENT, \"SYN_SENT\" )\t\t\\\n\tEM( TCP_SYN_RECV, \"SYN_RECV\" )\t\t\\\n\tEM( TCP_FIN_WAIT1, \"FIN_WAIT1\" )\t\\\n\tEM( TCP_FIN_WAIT2, \"FIN_WAIT2\" )\t\\\n\tEM( TCP_TIME_WAIT, \"TIME_WAIT\" )\t\\\n\tEM( TCP_CLOSE, \"CLOSE\" )\t\t\\\n\tEM( TCP_CLOSE_WAIT, \"CLOSE_WAIT\" )\t\\\n\tEM( TCP_LAST_ACK, \"LAST_ACK\" )\t\t\\\n\tEM( TCP_LISTEN, \"LISTEN\" )\t\t\\\n\tEMe( TCP_CLOSING, \"CLOSING\" )\n\n#define rpc_show_sock_state(state) \\\n\t__print_symbolic(state, RPC_SHOW_SOCK)\n\nRPC_SHOW_SOCK\n\n\n#include <trace/events/net_probe_common.h>\n\n \n#undef EM\n#undef EMe\n#define EM(a, b)\t{a, b},\n#define EMe(a, b)\t{a, b}\n\nDECLARE_EVENT_CLASS(xs_socket_event,\n\n\t\tTP_PROTO(\n\t\t\tstruct rpc_xprt *xprt,\n\t\t\tstruct socket *socket\n\t\t),\n\n\t\tTP_ARGS(xprt, socket),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, socket_state)\n\t\t\t__field(unsigned int, sock_state)\n\t\t\t__field(unsigned long long, ino)\n\t\t\t__array(__u8, saddr, sizeof(struct sockaddr_in6))\n\t\t\t__array(__u8, daddr, sizeof(struct sockaddr_in6))\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tstruct inode *inode = SOCK_INODE(socket);\n\t\t\tconst struct sock *sk = socket->sk;\n\t\t\tconst struct inet_sock *inet = inet_sk(sk);\n\n\t\t\tmemset(__entry->saddr, 0, sizeof(struct sockaddr_in6));\n\t\t\tmemset(__entry->daddr, 0, sizeof(struct sockaddr_in6));\n\n\t\t\tTP_STORE_ADDR_PORTS(__entry, inet, sk);\n\n\t\t\t__entry->socket_state = socket->state;\n\t\t\t__entry->sock_state = socket->sk->sk_state;\n\t\t\t__entry->ino = (unsigned long long)inode->i_ino;\n\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"socket:[%llu] srcaddr=%pISpc dstaddr=%pISpc \"\n\t\t\t\"state=%u (%s) sk_state=%u (%s)\",\n\t\t\t__entry->ino,\n\t\t\t__entry->saddr,\n\t\t\t__entry->daddr,\n\t\t\t__entry->socket_state,\n\t\t\trpc_show_socket_state(__entry->socket_state),\n\t\t\t__entry->sock_state,\n\t\t\trpc_show_sock_state(__entry->sock_state)\n\t\t)\n);\n#define DEFINE_RPC_SOCKET_EVENT(name) \\\n\tDEFINE_EVENT(xs_socket_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tstruct rpc_xprt *xprt, \\\n\t\t\t\tstruct socket *socket \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, socket))\n\nDECLARE_EVENT_CLASS(xs_socket_event_done,\n\n\t\tTP_PROTO(\n\t\t\tstruct rpc_xprt *xprt,\n\t\t\tstruct socket *socket,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(xprt, socket, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(int, error)\n\t\t\t__field(unsigned int, socket_state)\n\t\t\t__field(unsigned int, sock_state)\n\t\t\t__field(unsigned long long, ino)\n\t\t\t__array(__u8, saddr, sizeof(struct sockaddr_in6))\n\t\t\t__array(__u8, daddr, sizeof(struct sockaddr_in6))\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tstruct inode *inode = SOCK_INODE(socket);\n\t\t\tconst struct sock *sk = socket->sk;\n\t\t\tconst struct inet_sock *inet = inet_sk(sk);\n\n\t\t\tmemset(__entry->saddr, 0, sizeof(struct sockaddr_in6));\n\t\t\tmemset(__entry->daddr, 0, sizeof(struct sockaddr_in6));\n\n\t\t\tTP_STORE_ADDR_PORTS(__entry, inet, sk);\n\n\t\t\t__entry->socket_state = socket->state;\n\t\t\t__entry->sock_state = socket->sk->sk_state;\n\t\t\t__entry->ino = (unsigned long long)inode->i_ino;\n\t\t\t__entry->error = error;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d socket:[%llu] srcaddr=%pISpc dstaddr=%pISpc \"\n\t\t\t\"state=%u (%s) sk_state=%u (%s)\",\n\t\t\t__entry->error,\n\t\t\t__entry->ino,\n\t\t\t__entry->saddr,\n\t\t\t__entry->daddr,\n\t\t\t__entry->socket_state,\n\t\t\trpc_show_socket_state(__entry->socket_state),\n\t\t\t__entry->sock_state,\n\t\t\trpc_show_sock_state(__entry->sock_state)\n\t\t)\n);\n#define DEFINE_RPC_SOCKET_EVENT_DONE(name) \\\n\tDEFINE_EVENT(xs_socket_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tstruct rpc_xprt *xprt, \\\n\t\t\t\tstruct socket *socket, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, socket, error))\n\nDEFINE_RPC_SOCKET_EVENT(rpc_socket_state_change);\nDEFINE_RPC_SOCKET_EVENT_DONE(rpc_socket_connect);\nDEFINE_RPC_SOCKET_EVENT_DONE(rpc_socket_error);\nDEFINE_RPC_SOCKET_EVENT_DONE(rpc_socket_reset_connection);\nDEFINE_RPC_SOCKET_EVENT(rpc_socket_close);\nDEFINE_RPC_SOCKET_EVENT(rpc_socket_shutdown);\n\nTRACE_EVENT(rpc_socket_nospace,\n\tTP_PROTO(\n\t\tconst struct rpc_rqst *rqst,\n\t\tconst struct sock_xprt *transport\n\t),\n\n\tTP_ARGS(rqst, transport),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned int, total)\n\t\t__field(unsigned int, remaining)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = rqst->rq_task->tk_pid;\n\t\t__entry->client_id = rqst->rq_task->tk_client->cl_clid;\n\t\t__entry->total = rqst->rq_slen;\n\t\t__entry->remaining = rqst->rq_slen - transport->xmit.offset;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" total=%u remaining=%u\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->total, __entry->remaining\n\t)\n);\n\n#define rpc_show_xprt_state(x)\t\t\t\t\t\t\\\n\t__print_flags(x, \"|\",\t\t\t\t\t\t\\\n\t\t{ BIT(XPRT_LOCKED),\t\t\"LOCKED\" },\t\t\\\n\t\t{ BIT(XPRT_CONNECTED),\t\t\"CONNECTED\" },\t\t\\\n\t\t{ BIT(XPRT_CONNECTING),\t\t\"CONNECTING\" },\t\t\\\n\t\t{ BIT(XPRT_CLOSE_WAIT),\t\t\"CLOSE_WAIT\" },\t\t\\\n\t\t{ BIT(XPRT_BOUND),\t\t\"BOUND\" },\t\t\\\n\t\t{ BIT(XPRT_BINDING),\t\t\"BINDING\" },\t\t\\\n\t\t{ BIT(XPRT_CLOSING),\t\t\"CLOSING\" },\t\t\\\n\t\t{ BIT(XPRT_OFFLINE),\t\t\"OFFLINE\" },\t\t\\\n\t\t{ BIT(XPRT_REMOVE),\t\t\"REMOVE\" },\t\t\\\n\t\t{ BIT(XPRT_CONGESTED),\t\t\"CONGESTED\" },\t\t\\\n\t\t{ BIT(XPRT_CWND_WAIT),\t\t\"CWND_WAIT\" },\t\t\\\n\t\t{ BIT(XPRT_WRITE_SPACE),\t\"WRITE_SPACE\" },\t\\\n\t\t{ BIT(XPRT_SND_IS_COOKIE),\t\"SND_IS_COOKIE\" })\n\nDECLARE_EVENT_CLASS(rpc_xprt_lifetime_class,\n\tTP_PROTO(\n\t\tconst struct rpc_xprt *xprt\n\t),\n\n\tTP_ARGS(xprt),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, state)\n\t\t__string(addr, xprt->address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xprt->address_strings[RPC_DISPLAY_PORT])\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state = xprt->state;\n\t\t__assign_str(addr, xprt->address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xprt->address_strings[RPC_DISPLAY_PORT]);\n\t),\n\n\tTP_printk(\"peer=[%s]:%s state=%s\",\n\t\t__get_str(addr), __get_str(port),\n\t\trpc_show_xprt_state(__entry->state))\n);\n\n#define DEFINE_RPC_XPRT_LIFETIME_EVENT(name) \\\n\tDEFINE_EVENT(rpc_xprt_lifetime_class, \\\n\t\t\txprt_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_xprt *xprt \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt))\n\nDEFINE_RPC_XPRT_LIFETIME_EVENT(create);\nDEFINE_RPC_XPRT_LIFETIME_EVENT(connect);\nDEFINE_RPC_XPRT_LIFETIME_EVENT(disconnect_auto);\nDEFINE_RPC_XPRT_LIFETIME_EVENT(disconnect_done);\nDEFINE_RPC_XPRT_LIFETIME_EVENT(disconnect_force);\nDEFINE_RPC_XPRT_LIFETIME_EVENT(destroy);\n\nDECLARE_EVENT_CLASS(rpc_xprt_event,\n\tTP_PROTO(\n\t\tconst struct rpc_xprt *xprt,\n\t\t__be32 xid,\n\t\tint status\n\t),\n\n\tTP_ARGS(xprt, xid, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, xid)\n\t\t__field(int, status)\n\t\t__string(addr, xprt->address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xprt->address_strings[RPC_DISPLAY_PORT])\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->xid = be32_to_cpu(xid);\n\t\t__entry->status = status;\n\t\t__assign_str(addr, xprt->address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xprt->address_strings[RPC_DISPLAY_PORT]);\n\t),\n\n\tTP_printk(\"peer=[%s]:%s xid=0x%08x status=%d\", __get_str(addr),\n\t\t\t__get_str(port), __entry->xid,\n\t\t\t__entry->status)\n);\n#define DEFINE_RPC_XPRT_EVENT(name) \\\n\tDEFINE_EVENT(rpc_xprt_event, xprt_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_xprt *xprt, \\\n\t\t\t\t__be32 xid, \\\n\t\t\t\tint status \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, xid, status))\n\nDEFINE_RPC_XPRT_EVENT(timer);\nDEFINE_RPC_XPRT_EVENT(lookup_rqst);\n\nTRACE_EVENT(xprt_transmit,\n\tTP_PROTO(\n\t\tconst struct rpc_rqst *rqst,\n\t\tint status\n\t),\n\n\tTP_ARGS(rqst, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(u32, xid)\n\t\t__field(u32, seqno)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = rqst->rq_task->tk_pid;\n\t\t__entry->client_id = rqst->rq_task->tk_client ?\n\t\t\trqst->rq_task->tk_client->cl_clid : -1;\n\t\t__entry->xid = be32_to_cpu(rqst->rq_xid);\n\t\t__entry->seqno = rqst->rq_seqno;\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" xid=0x%08x seqno=%u status=%d\",\n\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t__entry->seqno, __entry->status)\n);\n\nTRACE_EVENT(xprt_retransmit,\n\tTP_PROTO(\n\t\tconst struct rpc_rqst *rqst\n\t),\n\n\tTP_ARGS(rqst),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(u32, xid)\n\t\t__field(int, ntrans)\n\t\t__field(int, version)\n\t\t__field(unsigned long, timeout)\n\t\t__string(progname,\n\t\t\t rqst->rq_task->tk_client->cl_program->name)\n\t\t__string(procname, rpc_proc_name(rqst->rq_task))\n\t),\n\n\tTP_fast_assign(\n\t\tstruct rpc_task *task = rqst->rq_task;\n\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client ?\n\t\t\ttask->tk_client->cl_clid : -1;\n\t\t__entry->xid = be32_to_cpu(rqst->rq_xid);\n\t\t__entry->ntrans = rqst->rq_ntrans;\n\t\t__entry->timeout = task->tk_timeout;\n\t\t__assign_str(progname,\n\t\t\t     task->tk_client->cl_program->name);\n\t\t__entry->version = task->tk_client->cl_vers;\n\t\t__assign_str(procname, rpc_proc_name(task));\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" xid=0x%08x %sv%d %s ntrans=%d timeout=%lu\",\n\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t__get_str(progname), __entry->version, __get_str(procname),\n\t\t__entry->ntrans, __entry->timeout\n\t)\n);\n\nTRACE_EVENT(xprt_ping,\n\tTP_PROTO(const struct rpc_xprt *xprt, int status),\n\n\tTP_ARGS(xprt, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, status)\n\t\t__string(addr, xprt->address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xprt->address_strings[RPC_DISPLAY_PORT])\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->status = status;\n\t\t__assign_str(addr, xprt->address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xprt->address_strings[RPC_DISPLAY_PORT]);\n\t),\n\n\tTP_printk(\"peer=[%s]:%s status=%d\",\n\t\t\t__get_str(addr), __get_str(port), __entry->status)\n);\n\nDECLARE_EVENT_CLASS(xprt_writelock_event,\n\tTP_PROTO(\n\t\tconst struct rpc_xprt *xprt, const struct rpc_task *task\n\t),\n\n\tTP_ARGS(xprt, task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned int, snd_task_id)\n\t),\n\n\tTP_fast_assign(\n\t\tif (task) {\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client ?\n\t\t\t\t\t     task->tk_client->cl_clid : -1;\n\t\t} else {\n\t\t\t__entry->task_id = -1;\n\t\t\t__entry->client_id = -1;\n\t\t}\n\t\tif (xprt->snd_task &&\n\t\t    !test_bit(XPRT_SND_IS_COOKIE, &xprt->state))\n\t\t\t__entry->snd_task_id = xprt->snd_task->tk_pid;\n\t\telse\n\t\t\t__entry->snd_task_id = -1;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" snd_task:\" SUNRPC_TRACE_PID_SPECIFIER,\n\t\t\t__entry->task_id, __entry->client_id,\n\t\t\t__entry->snd_task_id)\n);\n\n#define DEFINE_WRITELOCK_EVENT(name) \\\n\tDEFINE_EVENT(xprt_writelock_event, xprt_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_xprt *xprt, \\\n\t\t\t\tconst struct rpc_task *task \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, task))\n\nDEFINE_WRITELOCK_EVENT(reserve_xprt);\nDEFINE_WRITELOCK_EVENT(release_xprt);\n\nDECLARE_EVENT_CLASS(xprt_cong_event,\n\tTP_PROTO(\n\t\tconst struct rpc_xprt *xprt, const struct rpc_task *task\n\t),\n\n\tTP_ARGS(xprt, task),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned int, snd_task_id)\n\t\t__field(unsigned long, cong)\n\t\t__field(unsigned long, cwnd)\n\t\t__field(bool, wait)\n\t),\n\n\tTP_fast_assign(\n\t\tif (task) {\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client ?\n\t\t\t\t\t     task->tk_client->cl_clid : -1;\n\t\t} else {\n\t\t\t__entry->task_id = -1;\n\t\t\t__entry->client_id = -1;\n\t\t}\n\t\tif (xprt->snd_task &&\n\t\t    !test_bit(XPRT_SND_IS_COOKIE, &xprt->state))\n\t\t\t__entry->snd_task_id = xprt->snd_task->tk_pid;\n\t\telse\n\t\t\t__entry->snd_task_id = -1;\n\n\t\t__entry->cong = xprt->cong;\n\t\t__entry->cwnd = xprt->cwnd;\n\t\t__entry->wait = test_bit(XPRT_CWND_WAIT, &xprt->state);\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" snd_task:\" SUNRPC_TRACE_PID_SPECIFIER\n\t\t  \" cong=%lu cwnd=%lu%s\",\n\t\t\t__entry->task_id, __entry->client_id,\n\t\t\t__entry->snd_task_id, __entry->cong, __entry->cwnd,\n\t\t\t__entry->wait ? \" (wait)\" : \"\")\n);\n\n#define DEFINE_CONG_EVENT(name) \\\n\tDEFINE_EVENT(xprt_cong_event, xprt_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_xprt *xprt, \\\n\t\t\t\tconst struct rpc_task *task \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, task))\n\nDEFINE_CONG_EVENT(reserve_cong);\nDEFINE_CONG_EVENT(release_cong);\nDEFINE_CONG_EVENT(get_cong);\nDEFINE_CONG_EVENT(put_cong);\n\nTRACE_EVENT(xprt_reserve,\n\tTP_PROTO(\n\t\tconst struct rpc_rqst *rqst\n\t),\n\n\tTP_ARGS(rqst),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(u32, xid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = rqst->rq_task->tk_pid;\n\t\t__entry->client_id = rqst->rq_task->tk_client->cl_clid;\n\t\t__entry->xid = be32_to_cpu(rqst->rq_xid);\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER \" xid=0x%08x\",\n\t\t__entry->task_id, __entry->client_id, __entry->xid\n\t)\n);\n\nTRACE_EVENT(xs_data_ready,\n\tTP_PROTO(\n\t\tconst struct rpc_xprt *xprt\n\t),\n\n\tTP_ARGS(xprt),\n\n\tTP_STRUCT__entry(\n\t\t__string(addr, xprt->address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xprt->address_strings[RPC_DISPLAY_PORT])\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(addr, xprt->address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xprt->address_strings[RPC_DISPLAY_PORT]);\n\t),\n\n\tTP_printk(\"peer=[%s]:%s\", __get_str(addr), __get_str(port))\n);\n\nTRACE_EVENT(xs_stream_read_data,\n\tTP_PROTO(struct rpc_xprt *xprt, ssize_t err, size_t total),\n\n\tTP_ARGS(xprt, err, total),\n\n\tTP_STRUCT__entry(\n\t\t__field(ssize_t, err)\n\t\t__field(size_t, total)\n\t\t__string(addr, xprt ? xprt->address_strings[RPC_DISPLAY_ADDR] :\n\t\t\t\t\"(null)\")\n\t\t__string(port, xprt ? xprt->address_strings[RPC_DISPLAY_PORT] :\n\t\t\t\t\"(null)\")\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->err = err;\n\t\t__entry->total = total;\n\t\t__assign_str(addr, xprt ?\n\t\t\txprt->address_strings[RPC_DISPLAY_ADDR] : \"(null)\");\n\t\t__assign_str(port, xprt ?\n\t\t\txprt->address_strings[RPC_DISPLAY_PORT] : \"(null)\");\n\t),\n\n\tTP_printk(\"peer=[%s]:%s err=%zd total=%zu\", __get_str(addr),\n\t\t\t__get_str(port), __entry->err, __entry->total)\n);\n\nTRACE_EVENT(xs_stream_read_request,\n\tTP_PROTO(struct sock_xprt *xs),\n\n\tTP_ARGS(xs),\n\n\tTP_STRUCT__entry(\n\t\t__string(addr, xs->xprt.address_strings[RPC_DISPLAY_ADDR])\n\t\t__string(port, xs->xprt.address_strings[RPC_DISPLAY_PORT])\n\t\t__field(u32, xid)\n\t\t__field(unsigned long, copied)\n\t\t__field(unsigned int, reclen)\n\t\t__field(unsigned int, offset)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(addr, xs->xprt.address_strings[RPC_DISPLAY_ADDR]);\n\t\t__assign_str(port, xs->xprt.address_strings[RPC_DISPLAY_PORT]);\n\t\t__entry->xid = be32_to_cpu(xs->recv.xid);\n\t\t__entry->copied = xs->recv.copied;\n\t\t__entry->reclen = xs->recv.len;\n\t\t__entry->offset = xs->recv.offset;\n\t),\n\n\tTP_printk(\"peer=[%s]:%s xid=0x%08x copied=%lu reclen=%u offset=%u\",\n\t\t\t__get_str(addr), __get_str(port), __entry->xid,\n\t\t\t__entry->copied, __entry->reclen, __entry->offset)\n);\n\nTRACE_EVENT(rpcb_getport,\n\tTP_PROTO(\n\t\tconst struct rpc_clnt *clnt,\n\t\tconst struct rpc_task *task,\n\t\tunsigned int bind_version\n\t),\n\n\tTP_ARGS(clnt, task, bind_version),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(unsigned int, program)\n\t\t__field(unsigned int, version)\n\t\t__field(int, protocol)\n\t\t__field(unsigned int, bind_version)\n\t\t__string(servername, task->tk_xprt->servername)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = clnt->cl_clid;\n\t\t__entry->program = clnt->cl_prog;\n\t\t__entry->version = clnt->cl_vers;\n\t\t__entry->protocol = task->tk_xprt->prot;\n\t\t__entry->bind_version = bind_version;\n\t\t__assign_str(servername, task->tk_xprt->servername);\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t  \" server=%s program=%u version=%u protocol=%d bind_version=%u\",\n\t\t__entry->task_id, __entry->client_id, __get_str(servername),\n\t\t__entry->program, __entry->version, __entry->protocol,\n\t\t__entry->bind_version\n\t)\n);\n\nTRACE_EVENT(rpcb_setport,\n\tTP_PROTO(\n\t\tconst struct rpc_task *task,\n\t\tint status,\n\t\tunsigned short port\n\t),\n\n\tTP_ARGS(task, status, port),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, task_id)\n\t\t__field(unsigned int, client_id)\n\t\t__field(int, status)\n\t\t__field(unsigned short, port)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->task_id = task->tk_pid;\n\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t__entry->status = status;\n\t\t__entry->port = port;\n\t),\n\n\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER \" status=%d port=%u\",\n\t\t__entry->task_id, __entry->client_id,\n\t\t__entry->status, __entry->port\n\t)\n);\n\nTRACE_EVENT(pmap_register,\n\tTP_PROTO(\n\t\tu32 program,\n\t\tu32 version,\n\t\tint protocol,\n\t\tunsigned short port\n\t),\n\n\tTP_ARGS(program, version, protocol, port),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, program)\n\t\t__field(unsigned int, version)\n\t\t__field(int, protocol)\n\t\t__field(unsigned int, port)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->program = program;\n\t\t__entry->version = version;\n\t\t__entry->protocol = protocol;\n\t\t__entry->port = port;\n\t),\n\n\tTP_printk(\"program=%u version=%u protocol=%d port=%u\",\n\t\t__entry->program, __entry->version,\n\t\t__entry->protocol, __entry->port\n\t)\n);\n\nTRACE_EVENT(rpcb_register,\n\tTP_PROTO(\n\t\tu32 program,\n\t\tu32 version,\n\t\tconst char *addr,\n\t\tconst char *netid\n\t),\n\n\tTP_ARGS(program, version, addr, netid),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, program)\n\t\t__field(unsigned int, version)\n\t\t__string(addr, addr)\n\t\t__string(netid, netid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->program = program;\n\t\t__entry->version = version;\n\t\t__assign_str(addr, addr);\n\t\t__assign_str(netid, netid);\n\t),\n\n\tTP_printk(\"program=%u version=%u addr=%s netid=%s\",\n\t\t__entry->program, __entry->version,\n\t\t__get_str(addr), __get_str(netid)\n\t)\n);\n\nTRACE_EVENT(rpcb_unregister,\n\tTP_PROTO(\n\t\tu32 program,\n\t\tu32 version,\n\t\tconst char *netid\n\t),\n\n\tTP_ARGS(program, version, netid),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, program)\n\t\t__field(unsigned int, version)\n\t\t__string(netid, netid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->program = program;\n\t\t__entry->version = version;\n\t\t__assign_str(netid, netid);\n\t),\n\n\tTP_printk(\"program=%u version=%u netid=%s\",\n\t\t__entry->program, __entry->version, __get_str(netid)\n\t)\n);\n\n \n\nDECLARE_EVENT_CLASS(rpc_tls_class,\n\tTP_PROTO(\n\t\tconst struct rpc_clnt *clnt,\n\t\tconst struct rpc_xprt *xprt\n\t),\n\n\tTP_ARGS(clnt, xprt),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, requested_policy)\n\t\t__field(u32, version)\n\t\t__string(servername, xprt->servername)\n\t\t__string(progname, clnt->cl_program->name)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->requested_policy = clnt->cl_xprtsec.policy;\n\t\t__entry->version = clnt->cl_vers;\n\t\t__assign_str(servername, xprt->servername);\n\t\t__assign_str(progname, clnt->cl_program->name)\n\t),\n\n\tTP_printk(\"server=%s %sv%u requested_policy=%s\",\n\t\t__get_str(servername), __get_str(progname), __entry->version,\n\t\trpc_show_xprtsec_policy(__entry->requested_policy)\n\t)\n);\n\n#define DEFINE_RPC_TLS_EVENT(name) \\\n\tDEFINE_EVENT(rpc_tls_class, rpc_tls_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct rpc_clnt *clnt, \\\n\t\t\t\tconst struct rpc_xprt *xprt \\\n\t\t\t), \\\n\t\t\tTP_ARGS(clnt, xprt))\n\nDEFINE_RPC_TLS_EVENT(unavailable);\nDEFINE_RPC_TLS_EVENT(not_started);\n\n\n \nDECLARE_EVENT_CLASS(svc_xdr_msg_class,\n\tTP_PROTO(\n\t\tconst struct xdr_buf *xdr\n\t),\n\n\tTP_ARGS(xdr),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, xid)\n\t\t__field(const void *, head_base)\n\t\t__field(size_t, head_len)\n\t\t__field(const void *, tail_base)\n\t\t__field(size_t, tail_len)\n\t\t__field(unsigned int, page_len)\n\t\t__field(unsigned int, msg_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__be32 *p = (__be32 *)xdr->head[0].iov_base;\n\n\t\t__entry->xid = be32_to_cpu(*p);\n\t\t__entry->head_base = p;\n\t\t__entry->head_len = xdr->head[0].iov_len;\n\t\t__entry->tail_base = xdr->tail[0].iov_base;\n\t\t__entry->tail_len = xdr->tail[0].iov_len;\n\t\t__entry->page_len = xdr->page_len;\n\t\t__entry->msg_len = xdr->len;\n\t),\n\n\tTP_printk(\"xid=0x%08x head=[%p,%zu] page=%u tail=[%p,%zu] len=%u\",\n\t\t__entry->xid,\n\t\t__entry->head_base, __entry->head_len, __entry->page_len,\n\t\t__entry->tail_base, __entry->tail_len, __entry->msg_len\n\t)\n);\n\n#define DEFINE_SVCXDRMSG_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(svc_xdr_msg_class,\t\t\t\t\\\n\t\t\t\tsvc_xdr_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\tconst struct xdr_buf *xdr\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(xdr))\n\nDEFINE_SVCXDRMSG_EVENT(recvfrom);\n\n \nDECLARE_EVENT_CLASS(svc_xdr_buf_class,\n\tTP_PROTO(\n\t\t__be32 xid,\n\t\tconst struct xdr_buf *xdr\n\t),\n\n\tTP_ARGS(xid, xdr),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, xid)\n\t\t__field(const void *, head_base)\n\t\t__field(size_t, head_len)\n\t\t__field(const void *, tail_base)\n\t\t__field(size_t, tail_len)\n\t\t__field(unsigned int, page_base)\n\t\t__field(unsigned int, page_len)\n\t\t__field(unsigned int, msg_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->xid = be32_to_cpu(xid);\n\t\t__entry->head_base = xdr->head[0].iov_base;\n\t\t__entry->head_len = xdr->head[0].iov_len;\n\t\t__entry->tail_base = xdr->tail[0].iov_base;\n\t\t__entry->tail_len = xdr->tail[0].iov_len;\n\t\t__entry->page_base = xdr->page_base;\n\t\t__entry->page_len = xdr->page_len;\n\t\t__entry->msg_len = xdr->len;\n\t),\n\n\tTP_printk(\"xid=0x%08x head=[%p,%zu] page=%u(%u) tail=[%p,%zu] len=%u\",\n\t\t__entry->xid,\n\t\t__entry->head_base, __entry->head_len,\n\t\t__entry->page_len, __entry->page_base,\n\t\t__entry->tail_base, __entry->tail_len,\n\t\t__entry->msg_len\n\t)\n);\n\n#define DEFINE_SVCXDRBUF_EVENT(name)\t\t\t\t\t\\\n\t\tDEFINE_EVENT(svc_xdr_buf_class,\t\t\t\t\\\n\t\t\t\tsvc_xdr_##name,\t\t\t\t\\\n\t\t\t\tTP_PROTO(\t\t\t\t\\\n\t\t\t\t\t__be32 xid,\t\t\t\\\n\t\t\t\t\tconst struct xdr_buf *xdr\t\\\n\t\t\t\t),\t\t\t\t\t\\\n\t\t\t\tTP_ARGS(xid, xdr))\n\nDEFINE_SVCXDRBUF_EVENT(sendto);\n\n \n#define SVC_RQST_FLAG_LIST\t\t\t\t\t\t\\\n\tsvc_rqst_flag(SECURE)\t\t\t\t\t\t\\\n\tsvc_rqst_flag(LOCAL)\t\t\t\t\t\t\\\n\tsvc_rqst_flag(USEDEFERRAL)\t\t\t\t\t\\\n\tsvc_rqst_flag(DROPME)\t\t\t\t\t\t\\\n\tsvc_rqst_flag(SPLICE_OK)\t\t\t\t\t\\\n\tsvc_rqst_flag(VICTIM)\t\t\t\t\t\t\\\n\tsvc_rqst_flag(BUSY)\t\t\t\t\t\t\\\n\tsvc_rqst_flag_end(DATA)\n\n#undef svc_rqst_flag\n#undef svc_rqst_flag_end\n#define svc_rqst_flag(x)\tTRACE_DEFINE_ENUM(RQ_##x);\n#define svc_rqst_flag_end(x)\tTRACE_DEFINE_ENUM(RQ_##x);\n\nSVC_RQST_FLAG_LIST\n\n#undef svc_rqst_flag\n#undef svc_rqst_flag_end\n#define svc_rqst_flag(x)\t{ BIT(RQ_##x), #x },\n#define svc_rqst_flag_end(x)\t{ BIT(RQ_##x), #x }\n\n#define show_rqstp_flags(flags)\t\t\t\t\t\t\\\n\t\t__print_flags(flags, \"|\", SVC_RQST_FLAG_LIST)\n\nTRACE_DEFINE_ENUM(SVC_GARBAGE);\nTRACE_DEFINE_ENUM(SVC_SYSERR);\nTRACE_DEFINE_ENUM(SVC_VALID);\nTRACE_DEFINE_ENUM(SVC_NEGATIVE);\nTRACE_DEFINE_ENUM(SVC_OK);\nTRACE_DEFINE_ENUM(SVC_DROP);\nTRACE_DEFINE_ENUM(SVC_CLOSE);\nTRACE_DEFINE_ENUM(SVC_DENIED);\nTRACE_DEFINE_ENUM(SVC_PENDING);\nTRACE_DEFINE_ENUM(SVC_COMPLETE);\n\n#define show_svc_auth_status(status)\t\t\t\\\n\t__print_symbolic(status,\t\t\t\\\n\t\t{ SVC_GARBAGE,\t\"SVC_GARBAGE\" },\t\\\n\t\t{ SVC_SYSERR,\t\"SVC_SYSERR\" },\t\t\\\n\t\t{ SVC_VALID,\t\"SVC_VALID\" },\t\t\\\n\t\t{ SVC_NEGATIVE,\t\"SVC_NEGATIVE\" },\t\\\n\t\t{ SVC_OK,\t\"SVC_OK\" },\t\t\\\n\t\t{ SVC_DROP,\t\"SVC_DROP\" },\t\t\\\n\t\t{ SVC_CLOSE,\t\"SVC_CLOSE\" },\t\t\\\n\t\t{ SVC_DENIED,\t\"SVC_DENIED\" },\t\t\\\n\t\t{ SVC_PENDING,\t\"SVC_PENDING\" },\t\\\n\t\t{ SVC_COMPLETE,\t\"SVC_COMPLETE\" })\n\n#define SVC_RQST_ENDPOINT_FIELDS(r) \\\n\t\t__sockaddr(server, (r)->rq_xprt->xpt_locallen) \\\n\t\t__sockaddr(client, (r)->rq_xprt->xpt_remotelen) \\\n\t\t__field(unsigned int, netns_ino) \\\n\t\t__field(u32, xid)\n\n#define SVC_RQST_ENDPOINT_ASSIGNMENTS(r) \\\n\t\tdo { \\\n\t\t\tstruct svc_xprt *xprt = (r)->rq_xprt; \\\n\t\t\t__assign_sockaddr(server, &xprt->xpt_local, \\\n\t\t\t\t\t  xprt->xpt_locallen); \\\n\t\t\t__assign_sockaddr(client, &xprt->xpt_remote, \\\n\t\t\t\t\t  xprt->xpt_remotelen); \\\n\t\t\t__entry->netns_ino = xprt->xpt_net->ns.inum; \\\n\t\t\t__entry->xid = be32_to_cpu((r)->rq_xid); \\\n\t\t} while (0)\n\n#define SVC_RQST_ENDPOINT_FORMAT \\\n\t\t\"xid=0x%08x server=%pISpc client=%pISpc\"\n\n#define SVC_RQST_ENDPOINT_VARARGS \\\n\t\t__entry->xid, __get_sockaddr(server), __get_sockaddr(client)\n\nTRACE_EVENT_CONDITION(svc_authenticate,\n\tTP_PROTO(\n\t\tconst struct svc_rqst *rqst,\n\t\tenum svc_auth_status auth_res\n\t),\n\n\tTP_ARGS(rqst, auth_res),\n\n\tTP_CONDITION(auth_res != SVC_OK && auth_res != SVC_COMPLETE),\n\n\tTP_STRUCT__entry(\n\t\tSVC_RQST_ENDPOINT_FIELDS(rqst)\n\n\t\t__field(unsigned long, svc_status)\n\t\t__field(unsigned long, auth_stat)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_RQST_ENDPOINT_ASSIGNMENTS(rqst);\n\n\t\t__entry->svc_status = auth_res;\n\t\t__entry->auth_stat = be32_to_cpu(rqst->rq_auth_stat);\n\t),\n\n\tTP_printk(SVC_RQST_ENDPOINT_FORMAT\n\t\t\" auth_res=%s auth_stat=%s\",\n\t\tSVC_RQST_ENDPOINT_VARARGS,\n\t\tshow_svc_auth_status(__entry->svc_status),\n\t\trpc_show_auth_stat(__entry->auth_stat))\n);\n\nTRACE_EVENT(svc_process,\n\tTP_PROTO(const struct svc_rqst *rqst, const char *name),\n\n\tTP_ARGS(rqst, name),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, xid)\n\t\t__field(u32, vers)\n\t\t__field(u32, proc)\n\t\t__string(service, name)\n\t\t__string(procedure, svc_proc_name(rqst))\n\t\t__string(addr, rqst->rq_xprt ?\n\t\t\t rqst->rq_xprt->xpt_remotebuf : \"(null)\")\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->xid = be32_to_cpu(rqst->rq_xid);\n\t\t__entry->vers = rqst->rq_vers;\n\t\t__entry->proc = rqst->rq_proc;\n\t\t__assign_str(service, name);\n\t\t__assign_str(procedure, svc_proc_name(rqst));\n\t\t__assign_str(addr, rqst->rq_xprt ?\n\t\t\t     rqst->rq_xprt->xpt_remotebuf : \"(null)\");\n\t),\n\n\tTP_printk(\"addr=%s xid=0x%08x service=%s vers=%u proc=%s\",\n\t\t\t__get_str(addr), __entry->xid,\n\t\t\t__get_str(service), __entry->vers,\n\t\t\t__get_str(procedure)\n\t)\n);\n\nDECLARE_EVENT_CLASS(svc_rqst_event,\n\tTP_PROTO(\n\t\tconst struct svc_rqst *rqst\n\t),\n\n\tTP_ARGS(rqst),\n\n\tTP_STRUCT__entry(\n\t\tSVC_RQST_ENDPOINT_FIELDS(rqst)\n\n\t\t__field(unsigned long, flags)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_RQST_ENDPOINT_ASSIGNMENTS(rqst);\n\n\t\t__entry->flags = rqst->rq_flags;\n\t),\n\n\tTP_printk(SVC_RQST_ENDPOINT_FORMAT \" flags=%s\",\n\t\tSVC_RQST_ENDPOINT_VARARGS,\n\t\tshow_rqstp_flags(__entry->flags))\n);\n#define DEFINE_SVC_RQST_EVENT(name) \\\n\tDEFINE_EVENT(svc_rqst_event, svc_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct svc_rqst *rqst \\\n\t\t\t), \\\n\t\t\tTP_ARGS(rqst))\n\nDEFINE_SVC_RQST_EVENT(defer);\nDEFINE_SVC_RQST_EVENT(drop);\n\nDECLARE_EVENT_CLASS(svc_rqst_status,\n\tTP_PROTO(\n\t\tconst struct svc_rqst *rqst,\n\t\tint status\n\t),\n\n\tTP_ARGS(rqst, status),\n\n\tTP_STRUCT__entry(\n\t\tSVC_RQST_ENDPOINT_FIELDS(rqst)\n\n\t\t__field(int, status)\n\t\t__field(unsigned long, flags)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_RQST_ENDPOINT_ASSIGNMENTS(rqst);\n\n\t\t__entry->status = status;\n\t\t__entry->flags = rqst->rq_flags;\n\t),\n\n\tTP_printk(SVC_RQST_ENDPOINT_FORMAT \" status=%d flags=%s\",\n\t\tSVC_RQST_ENDPOINT_VARARGS,\n\t\t__entry->status, show_rqstp_flags(__entry->flags))\n);\n\nDEFINE_EVENT(svc_rqst_status, svc_send,\n\tTP_PROTO(const struct svc_rqst *rqst, int status),\n\tTP_ARGS(rqst, status));\n\nTRACE_EVENT(svc_replace_page_err,\n\tTP_PROTO(const struct svc_rqst *rqst),\n\n\tTP_ARGS(rqst),\n\tTP_STRUCT__entry(\n\t\tSVC_RQST_ENDPOINT_FIELDS(rqst)\n\n\t\t__field(const void *, begin)\n\t\t__field(const void *, respages)\n\t\t__field(const void *, nextpage)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_RQST_ENDPOINT_ASSIGNMENTS(rqst);\n\n\t\t__entry->begin = rqst->rq_pages;\n\t\t__entry->respages = rqst->rq_respages;\n\t\t__entry->nextpage = rqst->rq_next_page;\n\t),\n\n\tTP_printk(SVC_RQST_ENDPOINT_FORMAT \" begin=%p respages=%p nextpage=%p\",\n\t\tSVC_RQST_ENDPOINT_VARARGS,\n\t\t__entry->begin, __entry->respages, __entry->nextpage)\n);\n\nTRACE_EVENT(svc_stats_latency,\n\tTP_PROTO(\n\t\tconst struct svc_rqst *rqst\n\t),\n\n\tTP_ARGS(rqst),\n\n\tTP_STRUCT__entry(\n\t\tSVC_RQST_ENDPOINT_FIELDS(rqst)\n\n\t\t__field(unsigned long, execute)\n\t\t__string(procedure, svc_proc_name(rqst))\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_RQST_ENDPOINT_ASSIGNMENTS(rqst);\n\n\t\t__entry->execute = ktime_to_us(ktime_sub(ktime_get(),\n\t\t\t\t\t\t\t rqst->rq_stime));\n\t\t__assign_str(procedure, svc_proc_name(rqst));\n\t),\n\n\tTP_printk(SVC_RQST_ENDPOINT_FORMAT \" proc=%s execute-us=%lu\",\n\t\tSVC_RQST_ENDPOINT_VARARGS,\n\t\t__get_str(procedure), __entry->execute)\n);\n\n \n#define SVC_XPRT_FLAG_LIST\t\t\t\t\t\t\\\n\tsvc_xprt_flag(BUSY)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(CONN)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(CLOSE)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(DATA)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(TEMP)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(DEAD)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(CHNGBUF)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(DEFERRED)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(OLD)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(LISTENER)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(CACHE_AUTH)\t\t\t\t\t\\\n\tsvc_xprt_flag(LOCAL)\t\t\t\t\t\t\\\n\tsvc_xprt_flag(KILL_TEMP)\t\t\t\t\t\\\n\tsvc_xprt_flag(CONG_CTRL)\t\t\t\t\t\\\n\tsvc_xprt_flag(HANDSHAKE)\t\t\t\t\t\\\n\tsvc_xprt_flag(TLS_SESSION)\t\t\t\t\t\\\n\tsvc_xprt_flag_end(PEER_AUTH)\n\n#undef svc_xprt_flag\n#undef svc_xprt_flag_end\n#define svc_xprt_flag(x)\tTRACE_DEFINE_ENUM(XPT_##x);\n#define svc_xprt_flag_end(x)\tTRACE_DEFINE_ENUM(XPT_##x);\n\nSVC_XPRT_FLAG_LIST\n\n#undef svc_xprt_flag\n#undef svc_xprt_flag_end\n#define svc_xprt_flag(x)\t{ BIT(XPT_##x), #x },\n#define svc_xprt_flag_end(x)\t{ BIT(XPT_##x), #x }\n\n#define show_svc_xprt_flags(flags)\t\t\t\t\t\\\n\t__print_flags(flags, \"|\", SVC_XPRT_FLAG_LIST)\n\nTRACE_EVENT(svc_xprt_create_err,\n\tTP_PROTO(\n\t\tconst char *program,\n\t\tconst char *protocol,\n\t\tstruct sockaddr *sap,\n\t\tsize_t salen,\n\t\tconst struct svc_xprt *xprt\n\t),\n\n\tTP_ARGS(program, protocol, sap, salen, xprt),\n\n\tTP_STRUCT__entry(\n\t\t__field(long, error)\n\t\t__string(program, program)\n\t\t__string(protocol, protocol)\n\t\t__sockaddr(addr, salen)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->error = PTR_ERR(xprt);\n\t\t__assign_str(program, program);\n\t\t__assign_str(protocol, protocol);\n\t\t__assign_sockaddr(addr, sap, salen);\n\t),\n\n\tTP_printk(\"addr=%pISpc program=%s protocol=%s error=%ld\",\n\t\t__get_sockaddr(addr), __get_str(program), __get_str(protocol),\n\t\t__entry->error)\n);\n\n#define SVC_XPRT_ENDPOINT_FIELDS(x) \\\n\t\t__sockaddr(server, (x)->xpt_locallen) \\\n\t\t__sockaddr(client, (x)->xpt_remotelen) \\\n\t\t__field(unsigned long, flags) \\\n\t\t__field(unsigned int, netns_ino)\n\n#define SVC_XPRT_ENDPOINT_ASSIGNMENTS(x) \\\n\t\tdo { \\\n\t\t\t__assign_sockaddr(server, &(x)->xpt_local, \\\n\t\t\t\t\t  (x)->xpt_locallen); \\\n\t\t\t__assign_sockaddr(client, &(x)->xpt_remote, \\\n\t\t\t\t\t  (x)->xpt_remotelen); \\\n\t\t\t__entry->flags = (x)->xpt_flags; \\\n\t\t\t__entry->netns_ino = (x)->xpt_net->ns.inum; \\\n\t\t} while (0)\n\n#define SVC_XPRT_ENDPOINT_FORMAT \\\n\t\t\"server=%pISpc client=%pISpc flags=%s\"\n\n#define SVC_XPRT_ENDPOINT_VARARGS \\\n\t\t__get_sockaddr(server), __get_sockaddr(client), \\\n\t\tshow_svc_xprt_flags(__entry->flags)\n\nTRACE_EVENT(svc_xprt_enqueue,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tunsigned long flags\n\t),\n\n\tTP_ARGS(xprt, flags),\n\n\tTP_STRUCT__entry(\n\t\tSVC_XPRT_ENDPOINT_FIELDS(xprt)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_sockaddr(server, &xprt->xpt_local,\n\t\t\t\t  xprt->xpt_locallen);\n\t\t__assign_sockaddr(client, &xprt->xpt_remote,\n\t\t\t\t  xprt->xpt_remotelen);\n\t\t__entry->flags = flags;\n\t\t__entry->netns_ino = xprt->xpt_net->ns.inum;\n\t),\n\n\tTP_printk(SVC_XPRT_ENDPOINT_FORMAT, SVC_XPRT_ENDPOINT_VARARGS)\n);\n\nTRACE_EVENT(svc_xprt_dequeue,\n\tTP_PROTO(\n\t\tconst struct svc_rqst *rqst\n\t),\n\n\tTP_ARGS(rqst),\n\n\tTP_STRUCT__entry(\n\t\tSVC_XPRT_ENDPOINT_FIELDS(rqst->rq_xprt)\n\n\t\t__field(unsigned long, wakeup)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_XPRT_ENDPOINT_ASSIGNMENTS(rqst->rq_xprt);\n\n\t\t__entry->wakeup = ktime_to_us(ktime_sub(ktime_get(),\n\t\t\t\t\t\t\trqst->rq_qtime));\n\t),\n\n\tTP_printk(SVC_XPRT_ENDPOINT_FORMAT \" wakeup-us=%lu\",\n\t\tSVC_XPRT_ENDPOINT_VARARGS, __entry->wakeup)\n);\n\nDECLARE_EVENT_CLASS(svc_xprt_event,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt\n\t),\n\n\tTP_ARGS(xprt),\n\n\tTP_STRUCT__entry(\n\t\tSVC_XPRT_ENDPOINT_FIELDS(xprt)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_XPRT_ENDPOINT_ASSIGNMENTS(xprt);\n\t),\n\n\tTP_printk(SVC_XPRT_ENDPOINT_FORMAT, SVC_XPRT_ENDPOINT_VARARGS)\n);\n\n#define DEFINE_SVC_XPRT_EVENT(name) \\\n\tDEFINE_EVENT(svc_xprt_event, svc_xprt_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct svc_xprt *xprt \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt))\n\nDEFINE_SVC_XPRT_EVENT(no_write_space);\nDEFINE_SVC_XPRT_EVENT(close);\nDEFINE_SVC_XPRT_EVENT(detach);\nDEFINE_SVC_XPRT_EVENT(free);\n\n#define DEFINE_SVC_TLS_EVENT(name) \\\n\tDEFINE_EVENT(svc_xprt_event, svc_tls_##name, \\\n\t\tTP_PROTO(const struct svc_xprt *xprt), \\\n\t\tTP_ARGS(xprt))\n\nDEFINE_SVC_TLS_EVENT(start);\nDEFINE_SVC_TLS_EVENT(upcall);\nDEFINE_SVC_TLS_EVENT(unavailable);\nDEFINE_SVC_TLS_EVENT(not_started);\nDEFINE_SVC_TLS_EVENT(timed_out);\n\nTRACE_EVENT(svc_xprt_accept,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tconst char *service\n\t),\n\n\tTP_ARGS(xprt, service),\n\n\tTP_STRUCT__entry(\n\t\tSVC_XPRT_ENDPOINT_FIELDS(xprt)\n\n\t\t__string(protocol, xprt->xpt_class->xcl_name)\n\t\t__string(service, service)\n\t),\n\n\tTP_fast_assign(\n\t\tSVC_XPRT_ENDPOINT_ASSIGNMENTS(xprt);\n\n\t\t__assign_str(protocol, xprt->xpt_class->xcl_name);\n\t\t__assign_str(service, service);\n\t),\n\n\tTP_printk(SVC_XPRT_ENDPOINT_FORMAT \" protocol=%s service=%s\",\n\t\tSVC_XPRT_ENDPOINT_VARARGS,\n\t\t__get_str(protocol), __get_str(service)\n\t)\n);\n\nTRACE_EVENT(svc_wake_up,\n\tTP_PROTO(int pid),\n\n\tTP_ARGS(pid),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, pid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->pid = pid;\n\t),\n\n\tTP_printk(\"pid=%d\", __entry->pid)\n);\n\nTRACE_EVENT(svc_alloc_arg_err,\n\tTP_PROTO(\n\t\tunsigned int requested,\n\t\tunsigned int allocated\n\t),\n\n\tTP_ARGS(requested, allocated),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, requested)\n\t\t__field(unsigned int, allocated)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->requested = requested;\n\t\t__entry->allocated = allocated;\n\t),\n\n\tTP_printk(\"requested=%u allocated=%u\",\n\t\t__entry->requested, __entry->allocated)\n);\n\nDECLARE_EVENT_CLASS(svc_deferred_event,\n\tTP_PROTO(\n\t\tconst struct svc_deferred_req *dr\n\t),\n\n\tTP_ARGS(dr),\n\n\tTP_STRUCT__entry(\n\t\t__field(const void *, dr)\n\t\t__field(u32, xid)\n\t\t__sockaddr(addr, dr->addrlen)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dr = dr;\n\t\t__entry->xid = be32_to_cpu(*(__be32 *)dr->args);\n\t\t__assign_sockaddr(addr, &dr->addr, dr->addrlen);\n\t),\n\n\tTP_printk(\"addr=%pISpc dr=%p xid=0x%08x\", __get_sockaddr(addr),\n\t\t__entry->dr, __entry->xid)\n);\n\n#define DEFINE_SVC_DEFERRED_EVENT(name) \\\n\tDEFINE_EVENT(svc_deferred_event, svc_defer_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct svc_deferred_req *dr \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dr))\n\nDEFINE_SVC_DEFERRED_EVENT(drop);\nDEFINE_SVC_DEFERRED_EVENT(queue);\nDEFINE_SVC_DEFERRED_EVENT(recv);\n\nDECLARE_EVENT_CLASS(svcsock_lifetime_class,\n\tTP_PROTO(\n\t\tconst void *svsk,\n\t\tconst struct socket *socket\n\t),\n\tTP_ARGS(svsk, socket),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, netns_ino)\n\t\t__field(const void *, svsk)\n\t\t__field(const void *, sk)\n\t\t__field(unsigned long, type)\n\t\t__field(unsigned long, family)\n\t\t__field(unsigned long, state)\n\t),\n\tTP_fast_assign(\n\t\tstruct sock *sk = socket->sk;\n\n\t\t__entry->netns_ino = sock_net(sk)->ns.inum;\n\t\t__entry->svsk = svsk;\n\t\t__entry->sk = sk;\n\t\t__entry->type = socket->type;\n\t\t__entry->family = sk->sk_family;\n\t\t__entry->state = sk->sk_state;\n\t),\n\tTP_printk(\"svsk=%p type=%s family=%s%s\",\n\t\t__entry->svsk, show_socket_type(__entry->type),\n\t\trpc_show_address_family(__entry->family),\n\t\t__entry->state == TCP_LISTEN ? \" (listener)\" : \"\"\n\t)\n);\n#define DEFINE_SVCSOCK_LIFETIME_EVENT(name) \\\n\tDEFINE_EVENT(svcsock_lifetime_class, name, \\\n\t\tTP_PROTO( \\\n\t\t\tconst void *svsk, \\\n\t\t\tconst struct socket *socket \\\n\t\t), \\\n\t\tTP_ARGS(svsk, socket))\n\nDEFINE_SVCSOCK_LIFETIME_EVENT(svcsock_new);\nDEFINE_SVCSOCK_LIFETIME_EVENT(svcsock_free);\n\nTRACE_EVENT(svcsock_marker,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\t__be32 marker\n\t),\n\n\tTP_ARGS(xprt, marker),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, length)\n\t\t__field(bool, last)\n\t\t__string(addr, xprt->xpt_remotebuf)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->length = be32_to_cpu(marker) & RPC_FRAGMENT_SIZE_MASK;\n\t\t__entry->last = be32_to_cpu(marker) & RPC_LAST_STREAM_FRAGMENT;\n\t\t__assign_str(addr, xprt->xpt_remotebuf);\n\t),\n\n\tTP_printk(\"addr=%s length=%u%s\", __get_str(addr),\n\t\t__entry->length, __entry->last ? \" (last)\" : \"\")\n);\n\nDECLARE_EVENT_CLASS(svcsock_class,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tssize_t result\n\t),\n\n\tTP_ARGS(xprt, result),\n\n\tTP_STRUCT__entry(\n\t\t__field(ssize_t, result)\n\t\t__field(unsigned long, flags)\n\t\t__string(addr, xprt->xpt_remotebuf)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->result = result;\n\t\t__entry->flags = xprt->xpt_flags;\n\t\t__assign_str(addr, xprt->xpt_remotebuf);\n\t),\n\n\tTP_printk(\"addr=%s result=%zd flags=%s\", __get_str(addr),\n\t\t__entry->result, show_svc_xprt_flags(__entry->flags)\n\t)\n);\n\n#define DEFINE_SVCSOCK_EVENT(name) \\\n\tDEFINE_EVENT(svcsock_class, svcsock_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct svc_xprt *xprt, \\\n\t\t\t\tssize_t result \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, result))\n\nDEFINE_SVCSOCK_EVENT(udp_send);\nDEFINE_SVCSOCK_EVENT(udp_recv);\nDEFINE_SVCSOCK_EVENT(udp_recv_err);\nDEFINE_SVCSOCK_EVENT(tcp_send);\nDEFINE_SVCSOCK_EVENT(tcp_recv);\nDEFINE_SVCSOCK_EVENT(tcp_recv_eagain);\nDEFINE_SVCSOCK_EVENT(tcp_recv_err);\nDEFINE_SVCSOCK_EVENT(data_ready);\nDEFINE_SVCSOCK_EVENT(write_space);\n\nTRACE_EVENT(svcsock_tcp_recv_short,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tu32 expected,\n\t\tu32 received\n\t),\n\n\tTP_ARGS(xprt, expected, received),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, expected)\n\t\t__field(u32, received)\n\t\t__field(unsigned long, flags)\n\t\t__string(addr, xprt->xpt_remotebuf)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->expected = expected;\n\t\t__entry->received = received;\n\t\t__entry->flags = xprt->xpt_flags;\n\t\t__assign_str(addr, xprt->xpt_remotebuf);\n\t),\n\n\tTP_printk(\"addr=%s flags=%s expected=%u received=%u\",\n\t\t__get_str(addr), show_svc_xprt_flags(__entry->flags),\n\t\t__entry->expected, __entry->received\n\t)\n);\n\nTRACE_EVENT(svcsock_tcp_state,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tconst struct socket *socket\n\t),\n\n\tTP_ARGS(xprt, socket),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, socket_state)\n\t\t__field(unsigned long, sock_state)\n\t\t__field(unsigned long, flags)\n\t\t__string(addr, xprt->xpt_remotebuf)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->socket_state = socket->state;\n\t\t__entry->sock_state = socket->sk->sk_state;\n\t\t__entry->flags = xprt->xpt_flags;\n\t\t__assign_str(addr, xprt->xpt_remotebuf);\n\t),\n\n\tTP_printk(\"addr=%s state=%s sk_state=%s flags=%s\", __get_str(addr),\n\t\trpc_show_socket_state(__entry->socket_state),\n\t\trpc_show_sock_state(__entry->sock_state),\n\t\tshow_svc_xprt_flags(__entry->flags)\n\t)\n);\n\nDECLARE_EVENT_CLASS(svcsock_accept_class,\n\tTP_PROTO(\n\t\tconst struct svc_xprt *xprt,\n\t\tconst char *service,\n\t\tlong status\n\t),\n\n\tTP_ARGS(xprt, service, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(long, status)\n\t\t__string(service, service)\n\t\t__field(unsigned int, netns_ino)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->status = status;\n\t\t__assign_str(service, service);\n\t\t__entry->netns_ino = xprt->xpt_net->ns.inum;\n\t),\n\n\tTP_printk(\"addr=listener service=%s status=%ld\",\n\t\t__get_str(service), __entry->status\n\t)\n);\n\n#define DEFINE_ACCEPT_EVENT(name) \\\n\tDEFINE_EVENT(svcsock_accept_class, svcsock_##name##_err, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct svc_xprt *xprt, \\\n\t\t\t\tconst char *service, \\\n\t\t\t\tlong status \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xprt, service, status))\n\nDEFINE_ACCEPT_EVENT(accept);\nDEFINE_ACCEPT_EVENT(getpeername);\n\nDECLARE_EVENT_CLASS(cache_event,\n\tTP_PROTO(\n\t\tconst struct cache_detail *cd,\n\t\tconst struct cache_head *h\n\t),\n\n\tTP_ARGS(cd, h),\n\n\tTP_STRUCT__entry(\n\t\t__field(const struct cache_head *, h)\n\t\t__string(name, cd->name)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->h = h;\n\t\t__assign_str(name, cd->name);\n\t),\n\n\tTP_printk(\"cache=%s entry=%p\", __get_str(name), __entry->h)\n);\n#define DEFINE_CACHE_EVENT(name) \\\n\tDEFINE_EVENT(cache_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct cache_detail *cd, \\\n\t\t\t\tconst struct cache_head *h \\\n\t\t\t), \\\n\t\t\tTP_ARGS(cd, h))\nDEFINE_CACHE_EVENT(cache_entry_expired);\nDEFINE_CACHE_EVENT(cache_entry_upcall);\nDEFINE_CACHE_EVENT(cache_entry_update);\nDEFINE_CACHE_EVENT(cache_entry_make_negative);\nDEFINE_CACHE_EVENT(cache_entry_no_listener);\n\nDECLARE_EVENT_CLASS(register_class,\n\tTP_PROTO(\n\t\tconst char *program,\n\t\tconst u32 version,\n\t\tconst int family,\n\t\tconst unsigned short protocol,\n\t\tconst unsigned short port,\n\t\tint error\n\t),\n\n\tTP_ARGS(program, version, family, protocol, port, error),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, version)\n\t\t__field(unsigned long, family)\n\t\t__field(unsigned short, protocol)\n\t\t__field(unsigned short, port)\n\t\t__field(int, error)\n\t\t__string(program, program)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->version = version;\n\t\t__entry->family = family;\n\t\t__entry->protocol = protocol;\n\t\t__entry->port = port;\n\t\t__entry->error = error;\n\t\t__assign_str(program, program);\n\t),\n\n\tTP_printk(\"program=%sv%u proto=%s port=%u family=%s error=%d\",\n\t\t__get_str(program), __entry->version,\n\t\t__entry->protocol == IPPROTO_UDP ? \"udp\" : \"tcp\",\n\t\t__entry->port, rpc_show_address_family(__entry->family),\n\t\t__entry->error\n\t)\n);\n\n#define DEFINE_REGISTER_EVENT(name) \\\n\tDEFINE_EVENT(register_class, svc_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst char *program, \\\n\t\t\t\tconst u32 version, \\\n\t\t\t\tconst int family, \\\n\t\t\t\tconst unsigned short protocol, \\\n\t\t\t\tconst unsigned short port, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(program, version, family, protocol, \\\n\t\t\t\tport, error))\n\nDEFINE_REGISTER_EVENT(register);\nDEFINE_REGISTER_EVENT(noregister);\n\nTRACE_EVENT(svc_unregister,\n\tTP_PROTO(\n\t\tconst char *program,\n\t\tconst u32 version,\n\t\tint error\n\t),\n\n\tTP_ARGS(program, version, error),\n\n\tTP_STRUCT__entry(\n\t\t__field(u32, version)\n\t\t__field(int, error)\n\t\t__string(program, program)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->version = version;\n\t\t__entry->error = error;\n\t\t__assign_str(program, program);\n\t),\n\n\tTP_printk(\"program=%sv%u error=%d\",\n\t\t__get_str(program), __entry->version, __entry->error\n\t)\n);\n\n#endif  \n\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}