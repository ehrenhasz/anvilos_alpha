{
  "module_name": "fs_dax.h",
  "hash_id": "c33579e0698bbc2e223d2aaeb99ea4727d3778aa29993085e8bc0852b5bf4ff1",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/fs_dax.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM fs_dax\n\n#if !defined(_TRACE_FS_DAX_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_FS_DAX_H\n\n#include <linux/tracepoint.h>\n\nDECLARE_EVENT_CLASS(dax_pmd_fault_class,\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf,\n\t\tpgoff_t max_pgoff, int result),\n\tTP_ARGS(inode, vmf, max_pgoff, result),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long, vm_start)\n\t\t__field(unsigned long, vm_end)\n\t\t__field(unsigned long, vm_flags)\n\t\t__field(unsigned long, address)\n\t\t__field(pgoff_t, pgoff)\n\t\t__field(pgoff_t, max_pgoff)\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, flags)\n\t\t__field(int, result)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->vm_start = vmf->vma->vm_start;\n\t\t__entry->vm_end = vmf->vma->vm_end;\n\t\t__entry->vm_flags = vmf->vma->vm_flags;\n\t\t__entry->address = vmf->address;\n\t\t__entry->flags = vmf->flags;\n\t\t__entry->pgoff = vmf->pgoff;\n\t\t__entry->max_pgoff = max_pgoff;\n\t\t__entry->result = result;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx %s %s address %#lx vm_start \"\n\t\t\t\"%#lx vm_end %#lx pgoff %#lx max_pgoff %#lx %s\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->vm_flags & VM_SHARED ? \"shared\" : \"private\",\n\t\t__print_flags(__entry->flags, \"|\", FAULT_FLAG_TRACE),\n\t\t__entry->address,\n\t\t__entry->vm_start,\n\t\t__entry->vm_end,\n\t\t__entry->pgoff,\n\t\t__entry->max_pgoff,\n\t\t__print_flags(__entry->result, \"|\", VM_FAULT_RESULT_TRACE)\n\t)\n)\n\n#define DEFINE_PMD_FAULT_EVENT(name) \\\nDEFINE_EVENT(dax_pmd_fault_class, name, \\\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, \\\n\t\tpgoff_t max_pgoff, int result), \\\n\tTP_ARGS(inode, vmf, max_pgoff, result))\n\nDEFINE_PMD_FAULT_EVENT(dax_pmd_fault);\nDEFINE_PMD_FAULT_EVENT(dax_pmd_fault_done);\n\nDECLARE_EVENT_CLASS(dax_pmd_load_hole_class,\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf,\n\t\tstruct page *zero_page,\n\t\tvoid *radix_entry),\n\tTP_ARGS(inode, vmf, zero_page, radix_entry),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long, vm_flags)\n\t\t__field(unsigned long, address)\n\t\t__field(struct page *, zero_page)\n\t\t__field(void *, radix_entry)\n\t\t__field(dev_t, dev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->vm_flags = vmf->vma->vm_flags;\n\t\t__entry->address = vmf->address;\n\t\t__entry->zero_page = zero_page;\n\t\t__entry->radix_entry = radix_entry;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx %s address %#lx zero_page %p \"\n\t\t\t\"radix_entry %#lx\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->vm_flags & VM_SHARED ? \"shared\" : \"private\",\n\t\t__entry->address,\n\t\t__entry->zero_page,\n\t\t(unsigned long)__entry->radix_entry\n\t)\n)\n\n#define DEFINE_PMD_LOAD_HOLE_EVENT(name) \\\nDEFINE_EVENT(dax_pmd_load_hole_class, name, \\\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, \\\n\t\tstruct page *zero_page, void *radix_entry), \\\n\tTP_ARGS(inode, vmf, zero_page, radix_entry))\n\nDEFINE_PMD_LOAD_HOLE_EVENT(dax_pmd_load_hole);\nDEFINE_PMD_LOAD_HOLE_EVENT(dax_pmd_load_hole_fallback);\n\nDECLARE_EVENT_CLASS(dax_pmd_insert_mapping_class,\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf,\n\t\tlong length, pfn_t pfn, void *radix_entry),\n\tTP_ARGS(inode, vmf, length, pfn, radix_entry),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long, vm_flags)\n\t\t__field(unsigned long, address)\n\t\t__field(long, length)\n\t\t__field(u64, pfn_val)\n\t\t__field(void *, radix_entry)\n\t\t__field(dev_t, dev)\n\t\t__field(int, write)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->vm_flags = vmf->vma->vm_flags;\n\t\t__entry->address = vmf->address;\n\t\t__entry->write = vmf->flags & FAULT_FLAG_WRITE;\n\t\t__entry->length = length;\n\t\t__entry->pfn_val = pfn.val;\n\t\t__entry->radix_entry = radix_entry;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx %s %s address %#lx length %#lx \"\n\t\t\t\"pfn %#llx %s radix_entry %#lx\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->vm_flags & VM_SHARED ? \"shared\" : \"private\",\n\t\t__entry->write ? \"write\" : \"read\",\n\t\t__entry->address,\n\t\t__entry->length,\n\t\t__entry->pfn_val & ~PFN_FLAGS_MASK,\n\t\t__print_flags_u64(__entry->pfn_val & PFN_FLAGS_MASK, \"|\",\n\t\t\tPFN_FLAGS_TRACE),\n\t\t(unsigned long)__entry->radix_entry\n\t)\n)\n\n#define DEFINE_PMD_INSERT_MAPPING_EVENT(name) \\\nDEFINE_EVENT(dax_pmd_insert_mapping_class, name, \\\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, \\\n\t\tlong length, pfn_t pfn, void *radix_entry), \\\n\tTP_ARGS(inode, vmf, length, pfn, radix_entry))\n\nDEFINE_PMD_INSERT_MAPPING_EVENT(dax_pmd_insert_mapping);\n\nDECLARE_EVENT_CLASS(dax_pte_fault_class,\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, int result),\n\tTP_ARGS(inode, vmf, result),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long, vm_flags)\n\t\t__field(unsigned long, address)\n\t\t__field(pgoff_t, pgoff)\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, flags)\n\t\t__field(int, result)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->vm_flags = vmf->vma->vm_flags;\n\t\t__entry->address = vmf->address;\n\t\t__entry->flags = vmf->flags;\n\t\t__entry->pgoff = vmf->pgoff;\n\t\t__entry->result = result;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx %s %s address %#lx pgoff %#lx %s\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->vm_flags & VM_SHARED ? \"shared\" : \"private\",\n\t\t__print_flags(__entry->flags, \"|\", FAULT_FLAG_TRACE),\n\t\t__entry->address,\n\t\t__entry->pgoff,\n\t\t__print_flags(__entry->result, \"|\", VM_FAULT_RESULT_TRACE)\n\t)\n)\n\n#define DEFINE_PTE_FAULT_EVENT(name) \\\nDEFINE_EVENT(dax_pte_fault_class, name, \\\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, int result), \\\n\tTP_ARGS(inode, vmf, result))\n\nDEFINE_PTE_FAULT_EVENT(dax_pte_fault);\nDEFINE_PTE_FAULT_EVENT(dax_pte_fault_done);\nDEFINE_PTE_FAULT_EVENT(dax_load_hole);\nDEFINE_PTE_FAULT_EVENT(dax_insert_pfn_mkwrite_no_entry);\nDEFINE_PTE_FAULT_EVENT(dax_insert_pfn_mkwrite);\n\nTRACE_EVENT(dax_insert_mapping,\n\tTP_PROTO(struct inode *inode, struct vm_fault *vmf, void *radix_entry),\n\tTP_ARGS(inode, vmf, radix_entry),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long, vm_flags)\n\t\t__field(unsigned long, address)\n\t\t__field(void *, radix_entry)\n\t\t__field(dev_t, dev)\n\t\t__field(int, write)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->vm_flags = vmf->vma->vm_flags;\n\t\t__entry->address = vmf->address;\n\t\t__entry->write = vmf->flags & FAULT_FLAG_WRITE;\n\t\t__entry->radix_entry = radix_entry;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx %s %s address %#lx radix_entry %#lx\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->vm_flags & VM_SHARED ? \"shared\" : \"private\",\n\t\t__entry->write ? \"write\" : \"read\",\n\t\t__entry->address,\n\t\t(unsigned long)__entry->radix_entry\n\t)\n)\n\nDECLARE_EVENT_CLASS(dax_writeback_range_class,\n\tTP_PROTO(struct inode *inode, pgoff_t start_index, pgoff_t end_index),\n\tTP_ARGS(inode, start_index, end_index),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(pgoff_t, start_index)\n\t\t__field(pgoff_t, end_index)\n\t\t__field(dev_t, dev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->start_index = start_index;\n\t\t__entry->end_index = end_index;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx pgoff %#lx-%#lx\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->start_index,\n\t\t__entry->end_index\n\t)\n)\n\n#define DEFINE_WRITEBACK_RANGE_EVENT(name) \\\nDEFINE_EVENT(dax_writeback_range_class, name, \\\n\tTP_PROTO(struct inode *inode, pgoff_t start_index, pgoff_t end_index),\\\n\tTP_ARGS(inode, start_index, end_index))\n\nDEFINE_WRITEBACK_RANGE_EVENT(dax_writeback_range);\nDEFINE_WRITEBACK_RANGE_EVENT(dax_writeback_range_done);\n\nTRACE_EVENT(dax_writeback_one,\n\tTP_PROTO(struct inode *inode, pgoff_t pgoff, pgoff_t pglen),\n\tTP_ARGS(inode, pgoff, pglen),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(pgoff_t, pgoff)\n\t\t__field(pgoff_t, pglen)\n\t\t__field(dev_t, dev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->pgoff = pgoff;\n\t\t__entry->pglen = pglen;\n\t),\n\tTP_printk(\"dev %d:%d ino %#lx pgoff %#lx pglen %#lx\",\n\t\tMAJOR(__entry->dev),\n\t\tMINOR(__entry->dev),\n\t\t__entry->ino,\n\t\t__entry->pgoff,\n\t\t__entry->pglen\n\t)\n)\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}