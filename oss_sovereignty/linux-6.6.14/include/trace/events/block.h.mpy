{
  "module_name": "block.h",
  "hash_id": "03d9a88651e604801e1b7ce906cd0c4736c0e4ff5def039f9fc5563c8e4628df",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/block.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM block\n\n#if !defined(_TRACE_BLOCK_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_BLOCK_H\n\n#include <linux/blktrace_api.h>\n#include <linux/blkdev.h>\n#include <linux/buffer_head.h>\n#include <linux/tracepoint.h>\n\n#define RWBS_LEN\t8\n\n#ifdef CONFIG_BUFFER_HEAD\nDECLARE_EVENT_CLASS(block_buffer,\n\n\tTP_PROTO(struct buffer_head *bh),\n\n\tTP_ARGS(bh),\n\n\tTP_STRUCT__entry (\n\t\t__field(  dev_t,\tdev\t\t\t)\n\t\t__field(  sector_t,\tsector\t\t\t)\n\t\t__field(  size_t,\tsize\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= bh->b_bdev->bd_dev;\n\t\t__entry->sector\t\t= bh->b_blocknr;\n\t\t__entry->size\t\t= bh->b_size;\n\t),\n\n\tTP_printk(\"%d,%d sector=%llu size=%zu\",\n\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t(unsigned long long)__entry->sector, __entry->size\n\t)\n);\n\n \nDEFINE_EVENT(block_buffer, block_touch_buffer,\n\n\tTP_PROTO(struct buffer_head *bh),\n\n\tTP_ARGS(bh)\n);\n\n \nDEFINE_EVENT(block_buffer, block_dirty_buffer,\n\n\tTP_PROTO(struct buffer_head *bh),\n\n\tTP_ARGS(bh)\n);\n#endif  \n\n \nTRACE_EVENT(block_rq_requeue,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq),\n\n\tTP_STRUCT__entry(\n\t\t__field(  dev_t,\tdev\t\t\t)\n\t\t__field(  sector_t,\tsector\t\t\t)\n\t\t__field(  unsigned int,\tnr_sector\t\t)\n\t\t__array(  char,\t\trwbs,\tRWBS_LEN\t)\n\t\t__dynamic_array( char,\tcmd,\t1\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t   = rq->q->disk ? disk_devt(rq->q->disk) : 0;\n\t\t__entry->sector    = blk_rq_trace_sector(rq);\n\t\t__entry->nr_sector = blk_rq_trace_nr_sectors(rq);\n\n\t\tblk_fill_rwbs(__entry->rwbs, rq->cmd_flags);\n\t\t__get_str(cmd)[0] = '\\0';\n\t),\n\n\tTP_printk(\"%d,%d %s (%s) %llu + %u [%d]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->rwbs, __get_str(cmd),\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector, 0)\n);\n\nDECLARE_EVENT_CLASS(block_rq_completion,\n\n\tTP_PROTO(struct request *rq, blk_status_t error, unsigned int nr_bytes),\n\n\tTP_ARGS(rq, error, nr_bytes),\n\n\tTP_STRUCT__entry(\n\t\t__field(  dev_t,\tdev\t\t\t)\n\t\t__field(  sector_t,\tsector\t\t\t)\n\t\t__field(  unsigned int,\tnr_sector\t\t)\n\t\t__field(  int\t,\terror\t\t\t)\n\t\t__array(  char,\t\trwbs,\tRWBS_LEN\t)\n\t\t__dynamic_array( char,\tcmd,\t1\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t   = rq->q->disk ? disk_devt(rq->q->disk) : 0;\n\t\t__entry->sector    = blk_rq_pos(rq);\n\t\t__entry->nr_sector = nr_bytes >> 9;\n\t\t__entry->error     = blk_status_to_errno(error);\n\n\t\tblk_fill_rwbs(__entry->rwbs, rq->cmd_flags);\n\t\t__get_str(cmd)[0] = '\\0';\n\t),\n\n\tTP_printk(\"%d,%d %s (%s) %llu + %u [%d]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->rwbs, __get_str(cmd),\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector, __entry->error)\n);\n\n \nDEFINE_EVENT(block_rq_completion, block_rq_complete,\n\n\tTP_PROTO(struct request *rq, blk_status_t error, unsigned int nr_bytes),\n\n\tTP_ARGS(rq, error, nr_bytes)\n);\n\n \nDEFINE_EVENT(block_rq_completion, block_rq_error,\n\n\tTP_PROTO(struct request *rq, blk_status_t error, unsigned int nr_bytes),\n\n\tTP_ARGS(rq, error, nr_bytes)\n);\n\nDECLARE_EVENT_CLASS(block_rq,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq),\n\n\tTP_STRUCT__entry(\n\t\t__field(  dev_t,\tdev\t\t\t)\n\t\t__field(  sector_t,\tsector\t\t\t)\n\t\t__field(  unsigned int,\tnr_sector\t\t)\n\t\t__field(  unsigned int,\tbytes\t\t\t)\n\t\t__array(  char,\t\trwbs,\tRWBS_LEN\t)\n\t\t__array(  char,         comm,   TASK_COMM_LEN   )\n\t\t__dynamic_array( char,\tcmd,\t1\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t   = rq->q->disk ? disk_devt(rq->q->disk) : 0;\n\t\t__entry->sector    = blk_rq_trace_sector(rq);\n\t\t__entry->nr_sector = blk_rq_trace_nr_sectors(rq);\n\t\t__entry->bytes     = blk_rq_bytes(rq);\n\n\t\tblk_fill_rwbs(__entry->rwbs, rq->cmd_flags);\n\t\t__get_str(cmd)[0] = '\\0';\n\t\tmemcpy(__entry->comm, current->comm, TASK_COMM_LEN);\n\t),\n\n\tTP_printk(\"%d,%d %s %u (%s) %llu + %u [%s]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->rwbs, __entry->bytes, __get_str(cmd),\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector, __entry->comm)\n);\n\n \nDEFINE_EVENT(block_rq, block_rq_insert,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq)\n);\n\n \nDEFINE_EVENT(block_rq, block_rq_issue,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq)\n);\n\n \nDEFINE_EVENT(block_rq, block_rq_merge,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq)\n);\n\n \nDEFINE_EVENT(block_rq, block_io_start,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq)\n);\n\n \nDEFINE_EVENT(block_rq, block_io_done,\n\n\tTP_PROTO(struct request *rq),\n\n\tTP_ARGS(rq)\n);\n\n \nTRACE_EVENT(block_bio_complete,\n\n\tTP_PROTO(struct request_queue *q, struct bio *bio),\n\n\tTP_ARGS(q, bio),\n\n\tTP_STRUCT__entry(\n\t\t__field( dev_t,\t\tdev\t\t)\n\t\t__field( sector_t,\tsector\t\t)\n\t\t__field( unsigned,\tnr_sector\t)\n\t\t__field( int,\t\terror\t\t)\n\t\t__array( char,\t\trwbs,\tRWBS_LEN)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= bio_dev(bio);\n\t\t__entry->sector\t\t= bio->bi_iter.bi_sector;\n\t\t__entry->nr_sector\t= bio_sectors(bio);\n\t\t__entry->error\t\t= blk_status_to_errno(bio->bi_status);\n\t\tblk_fill_rwbs(__entry->rwbs, bio->bi_opf);\n\t),\n\n\tTP_printk(\"%d,%d %s %llu + %u [%d]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->rwbs,\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector, __entry->error)\n);\n\nDECLARE_EVENT_CLASS(block_bio,\n\n\tTP_PROTO(struct bio *bio),\n\n\tTP_ARGS(bio),\n\n\tTP_STRUCT__entry(\n\t\t__field( dev_t,\t\tdev\t\t\t)\n\t\t__field( sector_t,\tsector\t\t\t)\n\t\t__field( unsigned int,\tnr_sector\t\t)\n\t\t__array( char,\t\trwbs,\tRWBS_LEN\t)\n\t\t__array( char,\t\tcomm,\tTASK_COMM_LEN\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= bio_dev(bio);\n\t\t__entry->sector\t\t= bio->bi_iter.bi_sector;\n\t\t__entry->nr_sector\t= bio_sectors(bio);\n\t\tblk_fill_rwbs(__entry->rwbs, bio->bi_opf);\n\t\tmemcpy(__entry->comm, current->comm, TASK_COMM_LEN);\n\t),\n\n\tTP_printk(\"%d,%d %s %llu + %u [%s]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->rwbs,\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector, __entry->comm)\n);\n\n \nDEFINE_EVENT(block_bio, block_bio_bounce,\n\tTP_PROTO(struct bio *bio),\n\tTP_ARGS(bio)\n);\n\n \nDEFINE_EVENT(block_bio, block_bio_backmerge,\n\tTP_PROTO(struct bio *bio),\n\tTP_ARGS(bio)\n);\n\n \nDEFINE_EVENT(block_bio, block_bio_frontmerge,\n\tTP_PROTO(struct bio *bio),\n\tTP_ARGS(bio)\n);\n\n \nDEFINE_EVENT(block_bio, block_bio_queue,\n\tTP_PROTO(struct bio *bio),\n\tTP_ARGS(bio)\n);\n\n \nDEFINE_EVENT(block_bio, block_getrq,\n\tTP_PROTO(struct bio *bio),\n\tTP_ARGS(bio)\n);\n\n \nTRACE_EVENT(block_plug,\n\n\tTP_PROTO(struct request_queue *q),\n\n\tTP_ARGS(q),\n\n\tTP_STRUCT__entry(\n\t\t__array( char,\t\tcomm,\tTASK_COMM_LEN\t)\n\t),\n\n\tTP_fast_assign(\n\t\tmemcpy(__entry->comm, current->comm, TASK_COMM_LEN);\n\t),\n\n\tTP_printk(\"[%s]\", __entry->comm)\n);\n\nDECLARE_EVENT_CLASS(block_unplug,\n\n\tTP_PROTO(struct request_queue *q, unsigned int depth, bool explicit),\n\n\tTP_ARGS(q, depth, explicit),\n\n\tTP_STRUCT__entry(\n\t\t__field( int,\t\tnr_rq\t\t\t)\n\t\t__array( char,\t\tcomm,\tTASK_COMM_LEN\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nr_rq = depth;\n\t\tmemcpy(__entry->comm, current->comm, TASK_COMM_LEN);\n\t),\n\n\tTP_printk(\"[%s] %d\", __entry->comm, __entry->nr_rq)\n);\n\n \nDEFINE_EVENT(block_unplug, block_unplug,\n\n\tTP_PROTO(struct request_queue *q, unsigned int depth, bool explicit),\n\n\tTP_ARGS(q, depth, explicit)\n);\n\n \nTRACE_EVENT(block_split,\n\n\tTP_PROTO(struct bio *bio, unsigned int new_sector),\n\n\tTP_ARGS(bio, new_sector),\n\n\tTP_STRUCT__entry(\n\t\t__field( dev_t,\t\tdev\t\t\t\t)\n\t\t__field( sector_t,\tsector\t\t\t\t)\n\t\t__field( sector_t,\tnew_sector\t\t\t)\n\t\t__array( char,\t\trwbs,\t\tRWBS_LEN\t)\n\t\t__array( char,\t\tcomm,\t\tTASK_COMM_LEN\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= bio_dev(bio);\n\t\t__entry->sector\t\t= bio->bi_iter.bi_sector;\n\t\t__entry->new_sector\t= new_sector;\n\t\tblk_fill_rwbs(__entry->rwbs, bio->bi_opf);\n\t\tmemcpy(__entry->comm, current->comm, TASK_COMM_LEN);\n\t),\n\n\tTP_printk(\"%d,%d %s %llu / %llu [%s]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->rwbs,\n\t\t  (unsigned long long)__entry->sector,\n\t\t  (unsigned long long)__entry->new_sector,\n\t\t  __entry->comm)\n);\n\n \nTRACE_EVENT(block_bio_remap,\n\n\tTP_PROTO(struct bio *bio, dev_t dev, sector_t from),\n\n\tTP_ARGS(bio, dev, from),\n\n\tTP_STRUCT__entry(\n\t\t__field( dev_t,\t\tdev\t\t)\n\t\t__field( sector_t,\tsector\t\t)\n\t\t__field( unsigned int,\tnr_sector\t)\n\t\t__field( dev_t,\t\told_dev\t\t)\n\t\t__field( sector_t,\told_sector\t)\n\t\t__array( char,\t\trwbs,\tRWBS_LEN)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= bio_dev(bio);\n\t\t__entry->sector\t\t= bio->bi_iter.bi_sector;\n\t\t__entry->nr_sector\t= bio_sectors(bio);\n\t\t__entry->old_dev\t= dev;\n\t\t__entry->old_sector\t= from;\n\t\tblk_fill_rwbs(__entry->rwbs, bio->bi_opf);\n\t),\n\n\tTP_printk(\"%d,%d %s %llu + %u <- (%d,%d) %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->rwbs,\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector,\n\t\t  MAJOR(__entry->old_dev), MINOR(__entry->old_dev),\n\t\t  (unsigned long long)__entry->old_sector)\n);\n\n \nTRACE_EVENT(block_rq_remap,\n\n\tTP_PROTO(struct request *rq, dev_t dev, sector_t from),\n\n\tTP_ARGS(rq, dev, from),\n\n\tTP_STRUCT__entry(\n\t\t__field( dev_t,\t\tdev\t\t)\n\t\t__field( sector_t,\tsector\t\t)\n\t\t__field( unsigned int,\tnr_sector\t)\n\t\t__field( dev_t,\t\told_dev\t\t)\n\t\t__field( sector_t,\told_sector\t)\n\t\t__field( unsigned int,\tnr_bios\t\t)\n\t\t__array( char,\t\trwbs,\tRWBS_LEN)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= disk_devt(rq->q->disk);\n\t\t__entry->sector\t\t= blk_rq_pos(rq);\n\t\t__entry->nr_sector\t= blk_rq_sectors(rq);\n\t\t__entry->old_dev\t= dev;\n\t\t__entry->old_sector\t= from;\n\t\t__entry->nr_bios\t= blk_rq_count_bios(rq);\n\t\tblk_fill_rwbs(__entry->rwbs, rq->cmd_flags);\n\t),\n\n\tTP_printk(\"%d,%d %s %llu + %u <- (%d,%d) %llu %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->rwbs,\n\t\t  (unsigned long long)__entry->sector,\n\t\t  __entry->nr_sector,\n\t\t  MAJOR(__entry->old_dev), MINOR(__entry->old_dev),\n\t\t  (unsigned long long)__entry->old_sector, __entry->nr_bios)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}