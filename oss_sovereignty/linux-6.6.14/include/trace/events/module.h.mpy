{
  "module_name": "module.h",
  "hash_id": "a9cb9e27dee505c29ea461b3bade68cb7d3e1c77888eaef4832f91512b7069e1",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/module.h",
  "human_readable_source": " \n \n#ifdef CREATE_TRACE_POINTS\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM module\n#endif\n\n#if !defined(_TRACE_MODULE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_MODULE_H\n\n#include <linux/tracepoint.h>\n\n#ifdef CONFIG_MODULES\n\nstruct module;\n\n#define show_module_flags(flags) __print_flags(flags, \"\",\t\\\n\t{ (1UL << TAINT_PROPRIETARY_MODULE),\t\"P\" },\t\t\\\n\t{ (1UL << TAINT_OOT_MODULE),\t\t\"O\" },\t\t\\\n\t{ (1UL << TAINT_FORCED_MODULE),\t\t\"F\" },\t\t\\\n\t{ (1UL << TAINT_CRAP),\t\t\t\"C\" },\t\t\\\n\t{ (1UL << TAINT_UNSIGNED_MODULE),\t\"E\" })\n\nTRACE_EVENT(module_load,\n\n\tTP_PROTO(struct module *mod),\n\n\tTP_ARGS(mod),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned int,\ttaints\t\t)\n\t\t__string(\tname,\t\tmod->name\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->taints = mod->taints;\n\t\t__assign_str(name, mod->name);\n\t),\n\n\tTP_printk(\"%s %s\", __get_str(name), show_module_flags(__entry->taints))\n);\n\nTRACE_EVENT(module_free,\n\n\tTP_PROTO(struct module *mod),\n\n\tTP_ARGS(mod),\n\n\tTP_STRUCT__entry(\n\t\t__string(\tname,\t\tmod->name\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(name, mod->name);\n\t),\n\n\tTP_printk(\"%s\", __get_str(name))\n);\n\n#ifdef CONFIG_MODULE_UNLOAD\n \n\nDECLARE_EVENT_CLASS(module_refcnt,\n\n\tTP_PROTO(struct module *mod, unsigned long ip),\n\n\tTP_ARGS(mod, ip),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tip\t\t)\n\t\t__field(\tint,\t\trefcnt\t\t)\n\t\t__string(\tname,\t\tmod->name\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->ip\t= ip;\n\t\t__entry->refcnt\t= atomic_read(&mod->refcnt);\n\t\t__assign_str(name, mod->name);\n\t),\n\n\tTP_printk(\"%s call_site=%ps refcnt=%d\",\n\t\t  __get_str(name), (void *)__entry->ip, __entry->refcnt)\n);\n\nDEFINE_EVENT(module_refcnt, module_get,\n\n\tTP_PROTO(struct module *mod, unsigned long ip),\n\n\tTP_ARGS(mod, ip)\n);\n\nDEFINE_EVENT(module_refcnt, module_put,\n\n\tTP_PROTO(struct module *mod, unsigned long ip),\n\n\tTP_ARGS(mod, ip)\n);\n#endif  \n\nTRACE_EVENT(module_request,\n\n\tTP_PROTO(char *name, bool wait, unsigned long ip),\n\n\tTP_ARGS(name, wait, ip),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tip\t\t)\n\t\t__field(\tbool,\t\twait\t\t)\n\t\t__string(\tname,\t\tname\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->ip\t= ip;\n\t\t__entry->wait\t= wait;\n\t\t__assign_str(name, name);\n\t),\n\n\tTP_printk(\"%s wait=%d call_site=%ps\",\n\t\t  __get_str(name), (int)__entry->wait, (void *)__entry->ip)\n);\n\n#endif  \n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}