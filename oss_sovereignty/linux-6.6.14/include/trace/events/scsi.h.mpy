{
  "module_name": "scsi.h",
  "hash_id": "58ba4fd314f8776f1a6b3665c3c6ea602aa0b71e30bb01c4b701fd0cb96193ac",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/scsi.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM scsi\n\n#if !defined(_TRACE_SCSI_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_SCSI_H\n\n#include <scsi/scsi_cmnd.h>\n#include <scsi/scsi_host.h>\n#include <linux/tracepoint.h>\n#include <linux/trace_seq.h>\n\n#define scsi_opcode_name(opcode)\t{ opcode, #opcode }\n#define show_opcode_name(val)\t\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\tscsi_opcode_name(TEST_UNIT_READY),\t\t\\\n\t\tscsi_opcode_name(REZERO_UNIT),\t\t\t\\\n\t\tscsi_opcode_name(REQUEST_SENSE),\t\t\\\n\t\tscsi_opcode_name(FORMAT_UNIT),\t\t\t\\\n\t\tscsi_opcode_name(READ_BLOCK_LIMITS),\t\t\\\n\t\tscsi_opcode_name(REASSIGN_BLOCKS),\t\t\\\n\t\tscsi_opcode_name(INITIALIZE_ELEMENT_STATUS),\t\\\n\t\tscsi_opcode_name(READ_6),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_6),\t\t\t\\\n\t\tscsi_opcode_name(SEEK_6),\t\t\t\\\n\t\tscsi_opcode_name(READ_REVERSE),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_FILEMARKS),\t\t\\\n\t\tscsi_opcode_name(SPACE),\t\t\t\\\n\t\tscsi_opcode_name(INQUIRY),\t\t\t\\\n\t\tscsi_opcode_name(RECOVER_BUFFERED_DATA),\t\\\n\t\tscsi_opcode_name(MODE_SELECT),\t\t\t\\\n\t\tscsi_opcode_name(RESERVE),\t\t\t\\\n\t\tscsi_opcode_name(RELEASE),\t\t\t\\\n\t\tscsi_opcode_name(COPY),\t\t\t\t\\\n\t\tscsi_opcode_name(ERASE),\t\t\t\\\n\t\tscsi_opcode_name(MODE_SENSE),\t\t\t\\\n\t\tscsi_opcode_name(START_STOP),\t\t\t\\\n\t\tscsi_opcode_name(RECEIVE_DIAGNOSTIC),\t\t\\\n\t\tscsi_opcode_name(SEND_DIAGNOSTIC),\t\t\\\n\t\tscsi_opcode_name(ALLOW_MEDIUM_REMOVAL),\t\t\\\n\t\tscsi_opcode_name(SET_WINDOW),\t\t\t\\\n\t\tscsi_opcode_name(READ_CAPACITY),\t\t\\\n\t\tscsi_opcode_name(READ_10),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_10),\t\t\t\\\n\t\tscsi_opcode_name(SEEK_10),\t\t\t\\\n\t\tscsi_opcode_name(POSITION_TO_ELEMENT),\t\t\\\n\t\tscsi_opcode_name(WRITE_VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_HIGH),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_EQUAL),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_LOW),\t\t\t\\\n\t\tscsi_opcode_name(SET_LIMITS),\t\t\t\\\n\t\tscsi_opcode_name(PRE_FETCH),\t\t\t\\\n\t\tscsi_opcode_name(READ_POSITION),\t\t\\\n\t\tscsi_opcode_name(SYNCHRONIZE_CACHE),\t\t\\\n\t\tscsi_opcode_name(LOCK_UNLOCK_CACHE),\t\t\\\n\t\tscsi_opcode_name(READ_DEFECT_DATA),\t\t\\\n\t\tscsi_opcode_name(MEDIUM_SCAN),\t\t\t\\\n\t\tscsi_opcode_name(COMPARE),\t\t\t\\\n\t\tscsi_opcode_name(COPY_VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_BUFFER),\t\t\t\\\n\t\tscsi_opcode_name(READ_BUFFER),\t\t\t\\\n\t\tscsi_opcode_name(UPDATE_BLOCK),\t\t\t\\\n\t\tscsi_opcode_name(READ_LONG),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_LONG),\t\t\t\\\n\t\tscsi_opcode_name(CHANGE_DEFINITION),\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME),\t\t\t\\\n\t\tscsi_opcode_name(UNMAP),\t\t\t\\\n\t\tscsi_opcode_name(READ_TOC),\t\t\t\\\n\t\tscsi_opcode_name(LOG_SELECT),\t\t\t\\\n\t\tscsi_opcode_name(LOG_SENSE),\t\t\t\\\n\t\tscsi_opcode_name(XDWRITEREAD_10),\t\t\\\n\t\tscsi_opcode_name(MODE_SELECT_10),\t\t\\\n\t\tscsi_opcode_name(RESERVE_10),\t\t\t\\\n\t\tscsi_opcode_name(RELEASE_10),\t\t\t\\\n\t\tscsi_opcode_name(MODE_SENSE_10),\t\t\\\n\t\tscsi_opcode_name(PERSISTENT_RESERVE_IN),\t\\\n\t\tscsi_opcode_name(PERSISTENT_RESERVE_OUT),\t\\\n\t\tscsi_opcode_name(VARIABLE_LENGTH_CMD),\t\t\\\n\t\tscsi_opcode_name(REPORT_LUNS),\t\t\t\\\n\t\tscsi_opcode_name(MAINTENANCE_IN),\t\t\\\n\t\tscsi_opcode_name(MAINTENANCE_OUT),\t\t\\\n\t\tscsi_opcode_name(MOVE_MEDIUM),\t\t\t\\\n\t\tscsi_opcode_name(EXCHANGE_MEDIUM),\t\t\\\n\t\tscsi_opcode_name(READ_12),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_12),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_VERIFY_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_HIGH_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_EQUAL_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_LOW_12),\t\t\\\n\t\tscsi_opcode_name(READ_ELEMENT_STATUS),\t\t\\\n\t\tscsi_opcode_name(SEND_VOLUME_TAG),\t\t\\\n\t\tscsi_opcode_name(WRITE_LONG_2),\t\t\t\\\n\t\tscsi_opcode_name(READ_16),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_16),\t\t\t\\\n\t\tscsi_opcode_name(VERIFY_16),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME_16),\t\t\\\n\t\tscsi_opcode_name(ZBC_OUT),\t\t\t\\\n\t\tscsi_opcode_name(ZBC_IN),\t\t\t\\\n\t\tscsi_opcode_name(SERVICE_ACTION_IN_16),\t\t\\\n\t\tscsi_opcode_name(READ_32),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_32),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME_32),\t\t\\\n\t\tscsi_opcode_name(ATA_16),\t\t\t\\\n\t\tscsi_opcode_name(ATA_12))\n\n#define scsi_hostbyte_name(result)\t{ result, #result }\n#define show_hostbyte_name(val)\t\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\tscsi_hostbyte_name(DID_OK),\t\t\t\\\n\t\tscsi_hostbyte_name(DID_NO_CONNECT),\t\t\\\n\t\tscsi_hostbyte_name(DID_BUS_BUSY),\t\t\\\n\t\tscsi_hostbyte_name(DID_TIME_OUT),\t\t\\\n\t\tscsi_hostbyte_name(DID_BAD_TARGET),\t\t\\\n\t\tscsi_hostbyte_name(DID_ABORT),\t\t\t\\\n\t\tscsi_hostbyte_name(DID_PARITY),\t\t\t\\\n\t\tscsi_hostbyte_name(DID_ERROR),\t\t\t\\\n\t\tscsi_hostbyte_name(DID_RESET),\t\t\t\\\n\t\tscsi_hostbyte_name(DID_BAD_INTR),\t\t\\\n\t\tscsi_hostbyte_name(DID_PASSTHROUGH),\t\t\\\n\t\tscsi_hostbyte_name(DID_SOFT_ERROR),\t\t\\\n\t\tscsi_hostbyte_name(DID_IMM_RETRY),\t\t\\\n\t\tscsi_hostbyte_name(DID_REQUEUE),\t\t\\\n\t\tscsi_hostbyte_name(DID_TRANSPORT_DISRUPTED),\t\\\n\t\tscsi_hostbyte_name(DID_TRANSPORT_FAILFAST))\n\n#define scsi_statusbyte_name(result)\t{ result, #result }\n#define show_statusbyte_name(val)\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_GOOD),\t\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_CHECK_CONDITION),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_CONDITION_MET),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_BUSY),\t\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_INTERMEDIATE),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_INTERMEDIATE_CONDITION_MET), \\\n\t\tscsi_statusbyte_name(SAM_STAT_RESERVATION_CONFLICT),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_COMMAND_TERMINATED),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_TASK_SET_FULL),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_ACA_ACTIVE),\t\\\n\t\tscsi_statusbyte_name(SAM_STAT_TASK_ABORTED))\n\n#define scsi_prot_op_name(result)\t{ result, #result }\n#define show_prot_op_name(val)\t\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_NORMAL),\t\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_READ_INSERT),\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_WRITE_STRIP),\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_READ_STRIP),\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_WRITE_INSERT),\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_READ_PASS),\t\t\\\n\t\tscsi_prot_op_name(SCSI_PROT_WRITE_PASS))\n\nconst char *scsi_trace_parse_cdb(struct trace_seq*, unsigned char*, int);\n#define __parse_cdb(cdb, len) scsi_trace_parse_cdb(p, cdb, len)\n\nTRACE_EVENT(scsi_dispatch_cmd_start,\n\n\tTP_PROTO(struct scsi_cmnd *cmd),\n\n\tTP_ARGS(cmd),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\thost_no\t)\n\t\t__field( unsigned int,\tchannel\t)\n\t\t__field( unsigned int,\tid\t)\n\t\t__field( unsigned int,\tlun\t)\n\t\t__field( unsigned int,\topcode\t)\n\t\t__field( unsigned int,\tcmd_len )\n\t\t__field( int,\tdriver_tag)\n\t\t__field( int,\tscheduler_tag)\n\t\t__field( unsigned int,\tdata_sglen )\n\t\t__field( unsigned int,\tprot_sglen )\n\t\t__field( unsigned char,\tprot_op )\n\t\t__dynamic_array(unsigned char,\tcmnd, cmd->cmd_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->host_no\t= cmd->device->host->host_no;\n\t\t__entry->channel\t= cmd->device->channel;\n\t\t__entry->id\t\t= cmd->device->id;\n\t\t__entry->lun\t\t= cmd->device->lun;\n\t\t__entry->opcode\t\t= cmd->cmnd[0];\n\t\t__entry->cmd_len\t= cmd->cmd_len;\n\t\t__entry->driver_tag\t= scsi_cmd_to_rq(cmd)->tag;\n\t\t__entry->scheduler_tag\t= scsi_cmd_to_rq(cmd)->internal_tag;\n\t\t__entry->data_sglen\t= scsi_sg_count(cmd);\n\t\t__entry->prot_sglen\t= scsi_prot_sg_count(cmd);\n\t\t__entry->prot_op\t= scsi_get_prot_op(cmd);\n\t\tmemcpy(__get_dynamic_array(cmnd), cmd->cmnd, cmd->cmd_len);\n\t),\n\n\tTP_printk(\"host_no=%u channel=%u id=%u lun=%u data_sgl=%u prot_sgl=%u\" \\\n\t\t  \" prot_op=%s driver_tag=%d scheduler_tag=%d cmnd=(%s %s raw=%s)\",\n\t\t  __entry->host_no, __entry->channel, __entry->id,\n\t\t  __entry->lun, __entry->data_sglen, __entry->prot_sglen,\n\t\t  show_prot_op_name(__entry->prot_op), __entry->driver_tag,\n\t\t  __entry->scheduler_tag, show_opcode_name(__entry->opcode),\n\t\t  __parse_cdb(__get_dynamic_array(cmnd), __entry->cmd_len),\n\t\t  __print_hex(__get_dynamic_array(cmnd), __entry->cmd_len))\n);\n\nTRACE_EVENT(scsi_dispatch_cmd_error,\n\n\tTP_PROTO(struct scsi_cmnd *cmd, int rtn),\n\n\tTP_ARGS(cmd, rtn),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\thost_no\t)\n\t\t__field( unsigned int,\tchannel\t)\n\t\t__field( unsigned int,\tid\t)\n\t\t__field( unsigned int,\tlun\t)\n\t\t__field( int,\t\trtn\t)\n\t\t__field( unsigned int,\topcode\t)\n\t\t__field( unsigned int,\tcmd_len )\n\t\t__field( int,\tdriver_tag)\n\t\t__field( int,\tscheduler_tag)\n\t\t__field( unsigned int,\tdata_sglen )\n\t\t__field( unsigned int,\tprot_sglen )\n\t\t__field( unsigned char,\tprot_op )\n\t\t__dynamic_array(unsigned char,\tcmnd, cmd->cmd_len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->host_no\t= cmd->device->host->host_no;\n\t\t__entry->channel\t= cmd->device->channel;\n\t\t__entry->id\t\t= cmd->device->id;\n\t\t__entry->lun\t\t= cmd->device->lun;\n\t\t__entry->rtn\t\t= rtn;\n\t\t__entry->opcode\t\t= cmd->cmnd[0];\n\t\t__entry->cmd_len\t= cmd->cmd_len;\n\t\t__entry->driver_tag\t= scsi_cmd_to_rq(cmd)->tag;\n\t\t__entry->scheduler_tag\t= scsi_cmd_to_rq(cmd)->internal_tag;\n\t\t__entry->data_sglen\t= scsi_sg_count(cmd);\n\t\t__entry->prot_sglen\t= scsi_prot_sg_count(cmd);\n\t\t__entry->prot_op\t= scsi_get_prot_op(cmd);\n\t\tmemcpy(__get_dynamic_array(cmnd), cmd->cmnd, cmd->cmd_len);\n\t),\n\n\tTP_printk(\"host_no=%u channel=%u id=%u lun=%u data_sgl=%u prot_sgl=%u\" \\\n\t\t  \" prot_op=%s driver_tag=%d scheduler_tag=%d cmnd=(%s %s raw=%s)\" \\\n\t\t  \" rtn=%d\",\n\t\t  __entry->host_no, __entry->channel, __entry->id,\n\t\t  __entry->lun, __entry->data_sglen, __entry->prot_sglen,\n\t\t  show_prot_op_name(__entry->prot_op), __entry->driver_tag,\n\t\t  __entry->scheduler_tag, show_opcode_name(__entry->opcode),\n\t\t  __parse_cdb(__get_dynamic_array(cmnd), __entry->cmd_len),\n\t\t  __print_hex(__get_dynamic_array(cmnd), __entry->cmd_len),\n\t\t  __entry->rtn)\n);\n\nDECLARE_EVENT_CLASS(scsi_cmd_done_timeout_template,\n\n\tTP_PROTO(struct scsi_cmnd *cmd),\n\n\tTP_ARGS(cmd),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\thost_no\t)\n\t\t__field( unsigned int,\tchannel\t)\n\t\t__field( unsigned int,\tid\t)\n\t\t__field( unsigned int,\tlun\t)\n\t\t__field( int,\t\tresult\t)\n\t\t__field( unsigned int,\topcode\t)\n\t\t__field( unsigned int,\tcmd_len )\n\t\t__field( int,\tdriver_tag)\n\t\t__field( int,\tscheduler_tag)\n\t\t__field( unsigned int,\tdata_sglen )\n\t\t__field( unsigned int,\tprot_sglen )\n\t\t__field( unsigned char,\tprot_op )\n\t\t__dynamic_array(unsigned char,\tcmnd, cmd->cmd_len)\n\t\t__field( u8, sense_key )\n\t\t__field( u8, asc )\n\t\t__field( u8, ascq )\n\t),\n\n\tTP_fast_assign(\n\t\tstruct scsi_sense_hdr sshdr;\n\n\t\t__entry->host_no\t= cmd->device->host->host_no;\n\t\t__entry->channel\t= cmd->device->channel;\n\t\t__entry->id\t\t= cmd->device->id;\n\t\t__entry->lun\t\t= cmd->device->lun;\n\t\t__entry->result\t\t= cmd->result;\n\t\t__entry->opcode\t\t= cmd->cmnd[0];\n\t\t__entry->cmd_len\t= cmd->cmd_len;\n\t\t__entry->driver_tag\t= scsi_cmd_to_rq(cmd)->tag;\n\t\t__entry->scheduler_tag\t= scsi_cmd_to_rq(cmd)->internal_tag;\n\t\t__entry->data_sglen\t= scsi_sg_count(cmd);\n\t\t__entry->prot_sglen\t= scsi_prot_sg_count(cmd);\n\t\t__entry->prot_op\t= scsi_get_prot_op(cmd);\n\t\tmemcpy(__get_dynamic_array(cmnd), cmd->cmnd, cmd->cmd_len);\n\t\tif (cmd->sense_buffer && SCSI_SENSE_VALID(cmd) &&\n\t\t    scsi_command_normalize_sense(cmd, &sshdr)) {\n\t\t\t__entry->sense_key = sshdr.sense_key;\n\t\t\t__entry->asc = sshdr.asc;\n\t\t\t__entry->ascq = sshdr.ascq;\n\t\t} else {\n\t\t\t__entry->sense_key = 0;\n\t\t\t__entry->asc = 0;\n\t\t\t__entry->ascq = 0;\n\t\t}\n\t),\n\n\tTP_printk(\"host_no=%u channel=%u id=%u lun=%u data_sgl=%u prot_sgl=%u \" \\\n\t\t  \"prot_op=%s driver_tag=%d scheduler_tag=%d cmnd=(%s %s raw=%s) \" \\\n\t\t  \"result=(driver=%s host=%s message=%s status=%s) \"\n\t\t  \"sense=(key=%#x asc=%#x ascq=%#x)\",\n\t\t  __entry->host_no, __entry->channel, __entry->id,\n\t\t  __entry->lun, __entry->data_sglen, __entry->prot_sglen,\n\t\t  show_prot_op_name(__entry->prot_op), __entry->driver_tag,\n\t\t  __entry->scheduler_tag, show_opcode_name(__entry->opcode),\n\t\t  __parse_cdb(__get_dynamic_array(cmnd), __entry->cmd_len),\n\t\t  __print_hex(__get_dynamic_array(cmnd), __entry->cmd_len),\n\t\t  \"DRIVER_OK\",\n\t\t  show_hostbyte_name(((__entry->result) >> 16) & 0xff),\n\t\t  \"COMMAND_COMPLETE\",\n\t\t  show_statusbyte_name(__entry->result & 0xff),\n\t\t  __entry->sense_key, __entry->asc, __entry->ascq)\n);\n\nDEFINE_EVENT(scsi_cmd_done_timeout_template, scsi_dispatch_cmd_done,\n\t     TP_PROTO(struct scsi_cmnd *cmd),\n\t     TP_ARGS(cmd));\n\nDEFINE_EVENT(scsi_cmd_done_timeout_template, scsi_dispatch_cmd_timeout,\n\t     TP_PROTO(struct scsi_cmnd *cmd),\n\t     TP_ARGS(cmd));\n\nTRACE_EVENT(scsi_eh_wakeup,\n\n\tTP_PROTO(struct Scsi_Host *shost),\n\n\tTP_ARGS(shost),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\thost_no\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->host_no\t= shost->host_no;\n\t),\n\n\tTP_printk(\"host_no=%u\", __entry->host_no)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}