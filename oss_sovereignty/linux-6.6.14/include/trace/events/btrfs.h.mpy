{
  "module_name": "btrfs.h",
  "hash_id": "8d35ef2e7cc2e6247cb5b68833eb0943b99fa8c8135b5a4006d65ad2674339ea",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/btrfs.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM btrfs\n\n#if !defined(_TRACE_BTRFS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_BTRFS_H\n\n#include <linux/writeback.h>\n#include <linux/tracepoint.h>\n#include <trace/events/mmflags.h>\n\nstruct btrfs_root;\nstruct btrfs_fs_info;\nstruct btrfs_inode;\nstruct extent_map;\nstruct btrfs_file_extent_item;\nstruct btrfs_ordered_extent;\nstruct btrfs_delayed_ref_node;\nstruct btrfs_delayed_tree_ref;\nstruct btrfs_delayed_data_ref;\nstruct btrfs_delayed_ref_head;\nstruct btrfs_block_group;\nstruct btrfs_free_cluster;\nstruct map_lookup;\nstruct extent_buffer;\nstruct btrfs_work;\nstruct btrfs_workqueue;\nstruct btrfs_qgroup_extent_record;\nstruct btrfs_qgroup;\nstruct extent_io_tree;\nstruct prelim_ref;\nstruct btrfs_space_info;\nstruct btrfs_raid_bio;\nstruct raid56_bio_trace_info;\nstruct find_free_extent_ctl;\n\n#define show_ref_type(type)\t\t\t\t\t\t\\\n\t__print_symbolic(type,\t\t\t\t\t\t\\\n\t\t{ BTRFS_TREE_BLOCK_REF_KEY, \t\"TREE_BLOCK_REF\" },\t\\\n\t\t{ BTRFS_EXTENT_DATA_REF_KEY, \t\"EXTENT_DATA_REF\" },\t\\\n\t\t{ BTRFS_SHARED_BLOCK_REF_KEY, \t\"SHARED_BLOCK_REF\" },\t\\\n\t\t{ BTRFS_SHARED_DATA_REF_KEY, \t\"SHARED_DATA_REF\" })\n\n#define __show_root_type(obj)\t\t\t\t\t\t\\\n\t__print_symbolic_u64(obj,\t\t\t\t\t\\\n\t\t{ BTRFS_ROOT_TREE_OBJECTID, \t\"ROOT_TREE\"\t},\t\\\n\t\t{ BTRFS_EXTENT_TREE_OBJECTID, \t\"EXTENT_TREE\"\t},\t\\\n\t\t{ BTRFS_CHUNK_TREE_OBJECTID, \t\"CHUNK_TREE\"\t},\t\\\n\t\t{ BTRFS_DEV_TREE_OBJECTID, \t\"DEV_TREE\"\t},\t\\\n\t\t{ BTRFS_FS_TREE_OBJECTID, \t\"FS_TREE\"\t},\t\\\n\t\t{ BTRFS_ROOT_TREE_DIR_OBJECTID, \"ROOT_TREE_DIR\"\t},\t\\\n\t\t{ BTRFS_CSUM_TREE_OBJECTID, \t\"CSUM_TREE\"\t},\t\\\n\t\t{ BTRFS_TREE_LOG_OBJECTID,\t\"TREE_LOG\"\t},\t\\\n\t\t{ BTRFS_QUOTA_TREE_OBJECTID,\t\"QUOTA_TREE\"\t},\t\\\n\t\t{ BTRFS_TREE_RELOC_OBJECTID,\t\"TREE_RELOC\"\t},\t\\\n\t\t{ BTRFS_UUID_TREE_OBJECTID,\t\"UUID_TREE\"\t},\t\\\n\t\t{ BTRFS_FREE_SPACE_TREE_OBJECTID, \"FREE_SPACE_TREE\" },\t\\\n\t\t{ BTRFS_BLOCK_GROUP_TREE_OBJECTID, \"BLOCK_GROUP_TREE\" },\\\n\t\t{ BTRFS_DATA_RELOC_TREE_OBJECTID, \"DATA_RELOC_TREE\" })\n\n#define show_root_type(obj)\t\t\t\t\t\t\\\n\tobj, ((obj >= BTRFS_DATA_RELOC_TREE_OBJECTID) ||\t\t\\\n\t      (obj >= BTRFS_ROOT_TREE_OBJECTID &&\t\t\t\\\n\t       obj <= BTRFS_QUOTA_TREE_OBJECTID)) ? __show_root_type(obj) : \"-\"\n\n#define FLUSH_ACTIONS\t\t\t\t\t\t\t\t\\\n\tEM( BTRFS_RESERVE_NO_FLUSH,\t\t\"BTRFS_RESERVE_NO_FLUSH\")\t\\\n\tEM( BTRFS_RESERVE_FLUSH_LIMIT,\t\t\"BTRFS_RESERVE_FLUSH_LIMIT\")\t\\\n\tEM( BTRFS_RESERVE_FLUSH_ALL,\t\t\"BTRFS_RESERVE_FLUSH_ALL\")\t\\\n\tEMe(BTRFS_RESERVE_FLUSH_ALL_STEAL,\t\"BTRFS_RESERVE_FLUSH_ALL_STEAL\")\n\n#define FI_TYPES\t\t\t\t\t\t\t\\\n\tEM( BTRFS_FILE_EXTENT_INLINE,\t\t\"INLINE\")\t\t\\\n\tEM( BTRFS_FILE_EXTENT_REG,\t\t\"REG\")\t\t\t\\\n\tEMe(BTRFS_FILE_EXTENT_PREALLOC,\t\t\"PREALLOC\")\n\n#define QGROUP_RSV_TYPES\t\t\t\t\t\t\\\n\tEM( BTRFS_QGROUP_RSV_DATA,\t\t\"DATA\")\t\t\t\\\n\tEM( BTRFS_QGROUP_RSV_META_PERTRANS,\t\"META_PERTRANS\")\t\\\n\tEMe(BTRFS_QGROUP_RSV_META_PREALLOC,\t\"META_PREALLOC\")\n\n#define IO_TREE_OWNER\t\t\t\t\t\t    \\\n\tEM( IO_TREE_FS_PINNED_EXTENTS, \t  \"PINNED_EXTENTS\")\t    \\\n\tEM( IO_TREE_FS_EXCLUDED_EXTENTS,  \"EXCLUDED_EXTENTS\")\t    \\\n\tEM( IO_TREE_BTREE_INODE_IO,\t  \"BTREE_INODE_IO\")\t    \\\n\tEM( IO_TREE_INODE_IO,\t\t  \"INODE_IO\")\t\t    \\\n\tEM( IO_TREE_RELOC_BLOCKS,\t  \"RELOC_BLOCKS\")\t    \\\n\tEM( IO_TREE_TRANS_DIRTY_PAGES,\t  \"TRANS_DIRTY_PAGES\")      \\\n\tEM( IO_TREE_ROOT_DIRTY_LOG_PAGES, \"ROOT_DIRTY_LOG_PAGES\")   \\\n\tEM( IO_TREE_INODE_FILE_EXTENT,\t  \"INODE_FILE_EXTENT\")      \\\n\tEM( IO_TREE_LOG_CSUM_RANGE,\t  \"LOG_CSUM_RANGE\")         \\\n\tEMe(IO_TREE_SELFTEST,\t\t  \"SELFTEST\")\n\n#define FLUSH_STATES\t\t\t\t\t\t\t\\\n\tEM( FLUSH_DELAYED_ITEMS_NR,\t\"FLUSH_DELAYED_ITEMS_NR\")\t\\\n\tEM( FLUSH_DELAYED_ITEMS,\t\"FLUSH_DELAYED_ITEMS\")\t\t\\\n\tEM( FLUSH_DELALLOC,\t\t\"FLUSH_DELALLOC\")\t\t\\\n\tEM( FLUSH_DELALLOC_WAIT,\t\"FLUSH_DELALLOC_WAIT\")\t\t\\\n\tEM( FLUSH_DELALLOC_FULL,\t\"FLUSH_DELALLOC_FULL\")\t\t\\\n\tEM( FLUSH_DELAYED_REFS_NR,\t\"FLUSH_DELAYED_REFS_NR\")\t\\\n\tEM( FLUSH_DELAYED_REFS,\t\t\"FLUSH_DELAYED_REFS\")\t\t\\\n\tEM( ALLOC_CHUNK,\t\t\"ALLOC_CHUNK\")\t\t\t\\\n\tEM( ALLOC_CHUNK_FORCE,\t\t\"ALLOC_CHUNK_FORCE\")\t\t\\\n\tEM( RUN_DELAYED_IPUTS,\t\t\"RUN_DELAYED_IPUTS\")\t\t\\\n\tEMe(COMMIT_TRANS,\t\t\"COMMIT_TRANS\")\n\n \n\n#undef EM\n#undef EMe\n#define EM(a, b)\tTRACE_DEFINE_ENUM(a);\n#define EMe(a, b)\tTRACE_DEFINE_ENUM(a);\n\nFLUSH_ACTIONS\nFI_TYPES\nQGROUP_RSV_TYPES\nIO_TREE_OWNER\nFLUSH_STATES\n\n \n\n#undef EM\n#undef EMe\n#define EM(a, b)        {a, b},\n#define EMe(a, b)       {a, b}\n\n\n#define BTRFS_GROUP_FLAGS\t\\\n\t{ BTRFS_BLOCK_GROUP_DATA,\t\"DATA\"},\t\\\n\t{ BTRFS_BLOCK_GROUP_SYSTEM,\t\"SYSTEM\"},\t\\\n\t{ BTRFS_BLOCK_GROUP_METADATA,\t\"METADATA\"},\t\\\n\t{ BTRFS_BLOCK_GROUP_RAID0,\t\"RAID0\"}, \t\\\n\t{ BTRFS_BLOCK_GROUP_RAID1,\t\"RAID1\"}, \t\\\n\t{ BTRFS_BLOCK_GROUP_DUP,\t\"DUP\"}, \t\\\n\t{ BTRFS_BLOCK_GROUP_RAID10,\t\"RAID10\"}, \t\\\n\t{ BTRFS_BLOCK_GROUP_RAID5,\t\"RAID5\"},\t\\\n\t{ BTRFS_BLOCK_GROUP_RAID6,\t\"RAID6\"}\n\n#define EXTENT_FLAGS\t\t\t\t\t\t\\\n\t{ EXTENT_DIRTY,\t\t\t\"DIRTY\"},\t\t\\\n\t{ EXTENT_UPTODATE,\t\t\"UPTODATE\"},\t\t\\\n\t{ EXTENT_LOCKED,\t\t\"LOCKED\"},\t\t\\\n\t{ EXTENT_NEW,\t\t\t\"NEW\"},\t\t\t\\\n\t{ EXTENT_DELALLOC,\t\t\"DELALLOC\"},\t\t\\\n\t{ EXTENT_DEFRAG,\t\t\"DEFRAG\"},\t\t\\\n\t{ EXTENT_BOUNDARY,\t\t\"BOUNDARY\"},\t\t\\\n\t{ EXTENT_NODATASUM,\t\t\"NODATASUM\"},\t\t\\\n\t{ EXTENT_CLEAR_META_RESV,\t\"CLEAR_META_RESV\"},\t\\\n\t{ EXTENT_NEED_WAIT,\t\t\"NEED_WAIT\"},\t\t\\\n\t{ EXTENT_NORESERVE,\t\t\"NORESERVE\"},\t\t\\\n\t{ EXTENT_QGROUP_RESERVED,\t\"QGROUP_RESERVED\"},\t\\\n\t{ EXTENT_CLEAR_DATA_RESV,\t\"CLEAR_DATA_RESV\"},\t\\\n\t{ EXTENT_DELALLOC_NEW,\t\t\"DELALLOC_NEW\"}\n\n#define BTRFS_FSID_SIZE 16\n#define TP_STRUCT__entry_fsid __array(u8, fsid, BTRFS_FSID_SIZE)\n\n#define TP_fast_assign_fsid(fs_info)\t\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tif (fs_info)\t\t\t\t\t\t\t\\\n\t\tmemcpy(__entry->fsid, fs_info->fs_devices->fsid,\t\\\n\t\t       BTRFS_FSID_SIZE);\t\t\t\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tmemset(__entry->fsid, 0, BTRFS_FSID_SIZE);\t\t\\\n})\n\n#define TP_STRUCT__entry_btrfs(args...)\t\t\t\t\t\\\n\tTP_STRUCT__entry(\t\t\t\t\t\t\\\n\t\tTP_STRUCT__entry_fsid\t\t\t\t\t\\\n\t\targs)\n#define TP_fast_assign_btrfs(fs_info, args...)\t\t\t\t\\\n\tTP_fast_assign(\t\t\t\t\t\t\t\\\n\t\tTP_fast_assign_fsid(fs_info);\t\t\t\t\\\n\t\targs)\n#define TP_printk_btrfs(fmt, args...) \\\n\tTP_printk(\"%pU: \" fmt, __entry->fsid, args)\n\nTRACE_EVENT(btrfs_transaction_commit,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info),\n\n\tTP_ARGS(fs_info),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  generation\t\t)\n\t\t__field(\tu64,  root_objectid\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->generation\t= fs_info->generation;\n\t\t__entry->root_objectid\t= BTRFS_ROOT_TREE_OBJECTID;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) gen=%llu\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->generation)\n);\n\nDECLARE_EVENT_CLASS(btrfs__inode,\n\n\tTP_PROTO(const struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  ino\t\t\t)\n\t\t__field(\tu64,  blocks\t\t\t)\n\t\t__field(\tu64,  disk_i_size\t\t)\n\t\t__field(\tu64,  generation\t\t)\n\t\t__field(\tu64,  last_trans\t\t)\n\t\t__field(\tu64,  logged_trans\t\t)\n\t\t__field(\tu64,  root_objectid\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_sb(inode->i_sb),\n\t\t__entry->ino\t= btrfs_ino(BTRFS_I(inode));\n\t\t__entry->blocks\t= inode->i_blocks;\n\t\t__entry->disk_i_size  = BTRFS_I(inode)->disk_i_size;\n\t\t__entry->generation = BTRFS_I(inode)->generation;\n\t\t__entry->last_trans = BTRFS_I(inode)->last_trans;\n\t\t__entry->logged_trans = BTRFS_I(inode)->logged_trans;\n\t\t__entry->root_objectid =\n\t\t\t\tBTRFS_I(inode)->root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) gen=%llu ino=%llu blocks=%llu \"\n\t\t  \"disk_i_size=%llu last_trans=%llu logged_trans=%llu\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->generation,\n\t\t  __entry->ino,\n\t\t  __entry->blocks,\n\t\t  __entry->disk_i_size,\n\t\t  __entry->last_trans,\n\t\t  __entry->logged_trans)\n);\n\nDEFINE_EVENT(btrfs__inode, btrfs_inode_new,\n\n\tTP_PROTO(const struct inode *inode),\n\n\tTP_ARGS(inode)\n);\n\nDEFINE_EVENT(btrfs__inode, btrfs_inode_request,\n\n\tTP_PROTO(const struct inode *inode),\n\n\tTP_ARGS(inode)\n);\n\nDEFINE_EVENT(btrfs__inode, btrfs_inode_evict,\n\n\tTP_PROTO(const struct inode *inode),\n\n\tTP_ARGS(inode)\n);\n\n#define __show_map_type(type)\t\t\t\t\t\t\\\n\t__print_symbolic_u64(type,\t\t\t\t\t\\\n\t\t{ EXTENT_MAP_LAST_BYTE, \"LAST_BYTE\" \t},\t\t\\\n\t\t{ EXTENT_MAP_HOLE, \t\"HOLE\" \t\t},\t\t\\\n\t\t{ EXTENT_MAP_INLINE, \t\"INLINE\" \t},\t\t\\\n\t\t{ EXTENT_MAP_DELALLOC,\t\"DELALLOC\" \t})\n\n#define show_map_type(type)\t\t\t\\\n\ttype, (type >= EXTENT_MAP_LAST_BYTE) ? \"-\" :  __show_map_type(type)\n\n#define show_map_flags(flag)\t\t\t\t\t\t\\\n\t__print_flags(flag, \"|\",\t\t\t\t\t\\\n\t\t{ (1 << EXTENT_FLAG_PINNED), \t\t\"PINNED\" \t},\\\n\t\t{ (1 << EXTENT_FLAG_COMPRESSED), \t\"COMPRESSED\" \t},\\\n\t\t{ (1 << EXTENT_FLAG_PREALLOC), \t\t\"PREALLOC\" \t},\\\n\t\t{ (1 << EXTENT_FLAG_LOGGING),\t \t\"LOGGING\" \t},\\\n\t\t{ (1 << EXTENT_FLAG_FILLING),\t \t\"FILLING\" \t},\\\n\t\t{ (1 << EXTENT_FLAG_FS_MAPPING),\t\"FS_MAPPING\"\t})\n\nTRACE_EVENT_CONDITION(btrfs_get_extent,\n\n\tTP_PROTO(const struct btrfs_root *root, const struct btrfs_inode *inode,\n\t\t const struct extent_map *map),\n\n\tTP_ARGS(root, inode, map),\n\n\tTP_CONDITION(map),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  root_objectid\t)\n\t\t__field(\tu64,  ino\t\t)\n\t\t__field(\tu64,  start\t\t)\n\t\t__field(\tu64,  len\t\t)\n\t\t__field(\tu64,  orig_start\t)\n\t\t__field(\tu64,  block_start\t)\n\t\t__field(\tu64,  block_len\t\t)\n\t\t__field(\tunsigned long,  flags\t)\n\t\t__field(\tint,  refs\t\t)\n\t\t__field(\tunsigned int,  compress_type\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->ino\t\t= btrfs_ino(inode);\n\t\t__entry->start\t\t= map->start;\n\t\t__entry->len\t\t= map->len;\n\t\t__entry->orig_start\t= map->orig_start;\n\t\t__entry->block_start\t= map->block_start;\n\t\t__entry->block_len\t= map->block_len;\n\t\t__entry->flags\t\t= map->flags;\n\t\t__entry->refs\t\t= refcount_read(&map->refs);\n\t\t__entry->compress_type\t= map->compress_type;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu start=%llu len=%llu \"\n\t\t  \"orig_start=%llu block_start=%llu(%s) \"\n\t\t  \"block_len=%llu flags=%s refs=%u \"\n\t\t  \"compress_type=%u\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino,\n\t\t  __entry->start,\n\t\t  __entry->len,\n\t\t  __entry->orig_start,\n\t\t  show_map_type(__entry->block_start),\n\t\t  __entry->block_len,\n\t\t  show_map_flags(__entry->flags),\n\t\t  __entry->refs, __entry->compress_type)\n);\n\nTRACE_EVENT(btrfs_handle_em_exist,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\tconst struct extent_map *existing, const struct extent_map *map,\n\t\tu64 start, u64 len),\n\n\tTP_ARGS(fs_info, existing, map, start, len),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  e_start\t\t)\n\t\t__field(\tu64,  e_len\t\t)\n\t\t__field(\tu64,  map_start\t\t)\n\t\t__field(\tu64,  map_len\t\t)\n\t\t__field(\tu64,  start\t\t)\n\t\t__field(\tu64,  len\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->e_start\t= existing->start;\n\t\t__entry->e_len\t\t= existing->len;\n\t\t__entry->map_start\t= map->start;\n\t\t__entry->map_len\t= map->len;\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t),\n\n\tTP_printk_btrfs(\"start=%llu len=%llu \"\n\t\t  \"existing(start=%llu len=%llu) \"\n\t\t  \"em(start=%llu len=%llu)\",\n\t\t  __entry->start,\n\t\t  __entry->len,\n\t\t  __entry->e_start,\n\t\t  __entry->e_len,\n\t\t  __entry->map_start,\n\t\t  __entry->map_len)\n);\n\n \nDECLARE_EVENT_CLASS(btrfs__file_extent_item_regular,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, u64 start),\n\n\tTP_ARGS(bi, l, fi, start),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\troot_obj\t)\n\t\t__field(\tu64,\tino\t\t)\n\t\t__field(\tloff_t,\tisize\t\t)\n\t\t__field(\tu64,\tdisk_isize\t)\n\t\t__field(\tu64,\tnum_bytes\t)\n\t\t__field(\tu64,\tram_bytes\t)\n\t\t__field(\tu64,\tdisk_bytenr\t)\n\t\t__field(\tu64,\tdisk_num_bytes\t)\n\t\t__field(\tu64,\textent_offset\t)\n\t\t__field(\tu8,\textent_type\t)\n\t\t__field(\tu8,\tcompression\t)\n\t\t__field(\tu64,\textent_start\t)\n\t\t__field(\tu64,\textent_end\t)\n\t),\n\n\tTP_fast_assign_btrfs(bi->root->fs_info,\n\t\t__entry->root_obj\t= bi->root->root_key.objectid;\n\t\t__entry->ino\t\t= btrfs_ino(bi);\n\t\t__entry->isize\t\t= bi->vfs_inode.i_size;\n\t\t__entry->disk_isize\t= bi->disk_i_size;\n\t\t__entry->num_bytes\t= btrfs_file_extent_num_bytes(l, fi);\n\t\t__entry->ram_bytes\t= btrfs_file_extent_ram_bytes(l, fi);\n\t\t__entry->disk_bytenr\t= btrfs_file_extent_disk_bytenr(l, fi);\n\t\t__entry->disk_num_bytes\t= btrfs_file_extent_disk_num_bytes(l, fi);\n\t\t__entry->extent_offset\t= btrfs_file_extent_offset(l, fi);\n\t\t__entry->extent_type\t= btrfs_file_extent_type(l, fi);\n\t\t__entry->compression\t= btrfs_file_extent_compression(l, fi);\n\t\t__entry->extent_start\t= start;\n\t\t__entry->extent_end\t= (start + __entry->num_bytes);\n\t),\n\n\tTP_printk_btrfs(\n\t\t\"root=%llu(%s) inode=%llu size=%llu disk_isize=%llu \"\n\t\t\"file extent range=[%llu %llu] \"\n\t\t\"(num_bytes=%llu ram_bytes=%llu disk_bytenr=%llu \"\n\t\t\"disk_num_bytes=%llu extent_offset=%llu type=%s \"\n\t\t\"compression=%u\",\n\t\tshow_root_type(__entry->root_obj), __entry->ino,\n\t\t__entry->isize,\n\t\t__entry->disk_isize, __entry->extent_start,\n\t\t__entry->extent_end, __entry->num_bytes, __entry->ram_bytes,\n\t\t__entry->disk_bytenr, __entry->disk_num_bytes,\n\t\t__entry->extent_offset, __print_symbolic(__entry->extent_type, FI_TYPES),\n\t\t__entry->compression)\n);\n\nDECLARE_EVENT_CLASS(\n\tbtrfs__file_extent_item_inline,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, int slot, u64 start),\n\n\tTP_ARGS(bi, l, fi, slot,  start),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\troot_obj\t)\n\t\t__field(\tu64,\tino\t\t)\n\t\t__field(\tloff_t,\tisize\t\t)\n\t\t__field(\tu64,\tdisk_isize\t)\n\t\t__field(\tu8,\textent_type\t)\n\t\t__field(\tu8,\tcompression\t)\n\t\t__field(\tu64,\textent_start\t)\n\t\t__field(\tu64,\textent_end\t)\n\t),\n\n\tTP_fast_assign_btrfs(\n\t\tbi->root->fs_info,\n\t\t__entry->root_obj\t= bi->root->root_key.objectid;\n\t\t__entry->ino\t\t= btrfs_ino(bi);\n\t\t__entry->isize\t\t= bi->vfs_inode.i_size;\n\t\t__entry->disk_isize\t= bi->disk_i_size;\n\t\t__entry->extent_type\t= btrfs_file_extent_type(l, fi);\n\t\t__entry->compression\t= btrfs_file_extent_compression(l, fi);\n\t\t__entry->extent_start\t= start;\n\t\t__entry->extent_end\t= (start + btrfs_file_extent_ram_bytes(l, fi));\n\t),\n\n\tTP_printk_btrfs(\n\t\t\"root=%llu(%s) inode=%llu size=%llu disk_isize=%llu \"\n\t\t\"file extent range=[%llu %llu] \"\n\t\t\"extent_type=%s compression=%u\",\n\t\tshow_root_type(__entry->root_obj), __entry->ino, __entry->isize,\n\t\t__entry->disk_isize, __entry->extent_start,\n\t\t__entry->extent_end, __print_symbolic(__entry->extent_type, FI_TYPES),\n\t\t__entry->compression)\n);\n\nDEFINE_EVENT(\n\tbtrfs__file_extent_item_regular, btrfs_get_extent_show_fi_regular,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, u64 start),\n\n\tTP_ARGS(bi, l, fi, start)\n);\n\nDEFINE_EVENT(\n\tbtrfs__file_extent_item_regular, btrfs_truncate_show_fi_regular,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, u64 start),\n\n\tTP_ARGS(bi, l, fi, start)\n);\n\nDEFINE_EVENT(\n\tbtrfs__file_extent_item_inline, btrfs_get_extent_show_fi_inline,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, int slot, u64 start),\n\n\tTP_ARGS(bi, l, fi, slot, start)\n);\n\nDEFINE_EVENT(\n\tbtrfs__file_extent_item_inline, btrfs_truncate_show_fi_inline,\n\n\tTP_PROTO(const struct btrfs_inode *bi, const struct extent_buffer *l,\n\t\t const struct btrfs_file_extent_item *fi, int slot, u64 start),\n\n\tTP_ARGS(bi, l, fi, slot, start)\n);\n\n#define show_ordered_flags(flags)\t\t\t\t\t   \\\n\t__print_flags(flags, \"|\",\t\t\t\t\t   \\\n\t\t{ (1 << BTRFS_ORDERED_REGULAR), \t\"REGULAR\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_NOCOW), \t\t\"NOCOW\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_PREALLOC), \t\"PREALLOC\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_COMPRESSED), \t\"COMPRESSED\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_DIRECT),\t \t\"DIRECT\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_IO_DONE), \t\"IO_DONE\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_COMPLETE), \t\"COMPLETE\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_IOERR), \t\t\"IOERR\" \t}, \\\n\t\t{ (1 << BTRFS_ORDERED_TRUNCATED), \t\"TRUNCATED\"\t})\n\n\nDECLARE_EVENT_CLASS(btrfs__ordered_extent,\n\n\tTP_PROTO(const struct btrfs_inode *inode,\n\t\t const struct btrfs_ordered_extent *ordered),\n\n\tTP_ARGS(inode, ordered),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  ino\t\t)\n\t\t__field(\tu64,  file_offset\t)\n\t\t__field(\tu64,  start\t\t)\n\t\t__field(\tu64,  len\t\t)\n\t\t__field(\tu64,  disk_len\t\t)\n\t\t__field(\tu64,  bytes_left\t)\n\t\t__field(\tunsigned long,  flags\t)\n\t\t__field(\tint,  compress_type\t)\n\t\t__field(\tint,  refs\t\t)\n\t\t__field(\tu64,  root_objectid\t)\n\t\t__field(\tu64,  truncated_len\t)\n\t),\n\n\tTP_fast_assign_btrfs(inode->root->fs_info,\n\t\t__entry->ino \t\t= btrfs_ino(inode);\n\t\t__entry->file_offset\t= ordered->file_offset;\n\t\t__entry->start\t\t= ordered->disk_bytenr;\n\t\t__entry->len\t\t= ordered->num_bytes;\n\t\t__entry->disk_len\t= ordered->disk_num_bytes;\n\t\t__entry->bytes_left\t= ordered->bytes_left;\n\t\t__entry->flags\t\t= ordered->flags;\n\t\t__entry->compress_type\t= ordered->compress_type;\n\t\t__entry->refs\t\t= refcount_read(&ordered->refs);\n\t\t__entry->root_objectid\t= inode->root->root_key.objectid;\n\t\t__entry->truncated_len\t= ordered->truncated_len;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu file_offset=%llu \"\n\t\t  \"start=%llu len=%llu disk_len=%llu \"\n\t\t  \"truncated_len=%llu \"\n\t\t  \"bytes_left=%llu flags=%s compress_type=%d \"\n\t\t  \"refs=%d\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino,\n\t\t  __entry->file_offset,\n\t\t  __entry->start,\n\t\t  __entry->len,\n\t\t  __entry->disk_len,\n\t\t  __entry->truncated_len,\n\t\t  __entry->bytes_left,\n\t\t  show_ordered_flags(__entry->flags),\n\t\t  __entry->compress_type, __entry->refs)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_add,\n\n\tTP_PROTO(const struct btrfs_inode *inode,\n\t\t const struct btrfs_ordered_extent *ordered),\n\n\tTP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_remove,\n\n\tTP_PROTO(const struct btrfs_inode *inode,\n\t\t const struct btrfs_ordered_extent *ordered),\n\n\tTP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_start,\n\n\tTP_PROTO(const struct btrfs_inode *inode,\n\t\t const struct btrfs_ordered_extent *ordered),\n\n\tTP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_put,\n\n\tTP_PROTO(const struct btrfs_inode *inode,\n\t\t const struct btrfs_ordered_extent *ordered),\n\n\tTP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_lookup,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_lookup_range,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_lookup_first_range,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_lookup_for_logging,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_lookup_first,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_split,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_dec_test_pending,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nDEFINE_EVENT(btrfs__ordered_extent, btrfs_ordered_extent_mark_finished,\n\n\t     TP_PROTO(const struct btrfs_inode *inode,\n\t\t      const struct btrfs_ordered_extent *ordered),\n\n\t     TP_ARGS(inode, ordered)\n);\n\nTRACE_EVENT(btrfs_finish_ordered_extent,\n\n\tTP_PROTO(const struct btrfs_inode *inode, u64 start, u64 len,\n\t\t bool uptodate),\n\n\tTP_ARGS(inode, start, len, uptodate),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\t ino\t\t)\n\t\t__field(\tu64,\t start\t\t)\n\t\t__field(\tu64,\t len\t\t)\n\t\t__field(\tbool,\t uptodate\t)\n\t\t__field(\tu64,\t root_objectid\t)\n\t),\n\n\tTP_fast_assign_btrfs(inode->root->fs_info,\n\t\t__entry->ino\t= btrfs_ino(inode);\n\t\t__entry->start\t= start;\n\t\t__entry->len\t= len;\n\t\t__entry->uptodate = uptodate;\n\t\t__entry->root_objectid = inode->root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu start=%llu len=%llu uptodate=%d\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino, __entry->start,\n\t\t  __entry->len, !!__entry->uptodate)\n);\n\nDECLARE_EVENT_CLASS(btrfs__writepage,\n\n\tTP_PROTO(const struct page *page, const struct inode *inode,\n\t\t const struct writeback_control *wbc),\n\n\tTP_ARGS(page, inode, wbc),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tino\t\t\t)\n\t\t__field(\tpgoff_t,  index\t\t\t)\n\t\t__field(\tlong,   nr_to_write\t\t)\n\t\t__field(\tlong,   pages_skipped\t\t)\n\t\t__field(\tloff_t, range_start\t\t)\n\t\t__field(\tloff_t, range_end\t\t)\n\t\t__field(\tchar,   for_kupdate\t\t)\n\t\t__field(\tchar,   for_reclaim\t\t)\n\t\t__field(\tchar,   range_cyclic\t\t)\n\t\t__field(\tunsigned long,  writeback_index\t)\n\t\t__field(\tu64,    root_objectid\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_sb(inode->i_sb),\n\t\t__entry->ino\t\t= btrfs_ino(BTRFS_I(inode));\n\t\t__entry->index\t\t= page->index;\n\t\t__entry->nr_to_write\t= wbc->nr_to_write;\n\t\t__entry->pages_skipped\t= wbc->pages_skipped;\n\t\t__entry->range_start\t= wbc->range_start;\n\t\t__entry->range_end\t= wbc->range_end;\n\t\t__entry->for_kupdate\t= wbc->for_kupdate;\n\t\t__entry->for_reclaim\t= wbc->for_reclaim;\n\t\t__entry->range_cyclic\t= wbc->range_cyclic;\n\t\t__entry->writeback_index = inode->i_mapping->writeback_index;\n\t\t__entry->root_objectid\t=\n\t\t\t\t BTRFS_I(inode)->root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu page_index=%lu \"\n\t\t  \"nr_to_write=%ld pages_skipped=%ld range_start=%llu \"\n\t\t  \"range_end=%llu for_kupdate=%d \"\n\t\t  \"for_reclaim=%d range_cyclic=%d writeback_index=%lu\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino, __entry->index,\n\t\t  __entry->nr_to_write, __entry->pages_skipped,\n\t\t  __entry->range_start, __entry->range_end,\n\t\t  __entry->for_kupdate,\n\t\t  __entry->for_reclaim, __entry->range_cyclic,\n\t\t  __entry->writeback_index)\n);\n\nDEFINE_EVENT(btrfs__writepage, __extent_writepage,\n\n\tTP_PROTO(const struct page *page, const struct inode *inode,\n\t\t const struct writeback_control *wbc),\n\n\tTP_ARGS(page, inode, wbc)\n);\n\nTRACE_EVENT(btrfs_writepage_end_io_hook,\n\n\tTP_PROTO(const struct btrfs_inode *inode, u64 start, u64 end,\n\t\t int uptodate),\n\n\tTP_ARGS(inode, start, end, uptodate),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\t ino\t\t)\n\t\t__field(\tu64,\t start\t\t)\n\t\t__field(\tu64,\t end\t\t)\n\t\t__field(\tint,\t uptodate\t)\n\t\t__field(\tu64,    root_objectid\t)\n\t),\n\n\tTP_fast_assign_btrfs(inode->root->fs_info,\n\t\t__entry->ino\t= btrfs_ino(inode);\n\t\t__entry->start\t= start;\n\t\t__entry->end\t= end;\n\t\t__entry->uptodate = uptodate;\n\t\t__entry->root_objectid = inode->root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu start=%llu end=%llu uptodate=%d\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino, __entry->start,\n\t\t  __entry->end, __entry->uptodate)\n);\n\nTRACE_EVENT(btrfs_sync_file,\n\n\tTP_PROTO(const struct file *file, int datasync),\n\n\tTP_ARGS(file, datasync),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tino\t\t)\n\t\t__field(\tu64,\tparent\t\t)\n\t\t__field(\tint,    datasync\t)\n\t\t__field(\tu64,    root_objectid\t)\n\t),\n\n\tTP_fast_assign(\n\t\tconst struct dentry *dentry = file->f_path.dentry;\n\t\tconst struct inode *inode = d_inode(dentry);\n\n\t\tTP_fast_assign_fsid(btrfs_sb(file->f_path.dentry->d_sb));\n\t\t__entry->ino\t\t= btrfs_ino(BTRFS_I(inode));\n\t\t__entry->parent\t\t= btrfs_ino(BTRFS_I(d_inode(dentry->d_parent)));\n\t\t__entry->datasync\t= datasync;\n\t\t__entry->root_objectid\t=\n\t\t\t\t BTRFS_I(inode)->root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu parent=%llu datasync=%d\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->ino,\n\t\t  __entry->parent,\n\t\t  __entry->datasync)\n);\n\nTRACE_EVENT(btrfs_sync_fs,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, int wait),\n\n\tTP_ARGS(fs_info, wait),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tint,  wait\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->wait\t= wait;\n\t),\n\n\tTP_printk_btrfs(\"wait=%d\", __entry->wait)\n);\n\nTRACE_EVENT(btrfs_add_block_group,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_block_group *block_group, int create),\n\n\tTP_ARGS(fs_info, block_group, create),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\toffset\t\t\t)\n\t\t__field(\tu64,\tsize\t\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tbytes_used\t\t)\n\t\t__field(\tu64,\tbytes_super\t\t)\n\t\t__field(\tint,\tcreate\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->offset\t\t= block_group->start;\n\t\t__entry->size\t\t= block_group->length;\n\t\t__entry->flags\t\t= block_group->flags;\n\t\t__entry->bytes_used\t= block_group->used;\n\t\t__entry->bytes_super\t= block_group->bytes_super;\n\t\t__entry->create\t\t= create;\n\t),\n\n\tTP_printk_btrfs(\"block_group offset=%llu size=%llu \"\n\t\t  \"flags=%llu(%s) bytes_used=%llu bytes_super=%llu \"\n\t\t  \"create=%d\",\n\t\t  __entry->offset,\n\t\t  __entry->size,\n\t\t  __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\tBTRFS_GROUP_FLAGS),\n\t\t  __entry->bytes_used,\n\t\t  __entry->bytes_super, __entry->create)\n);\n\n#define show_ref_action(action)\t\t\t\t\t\t\\\n\t__print_symbolic(action,\t\t\t\t\t\\\n\t\t{ BTRFS_ADD_DELAYED_REF,    \"ADD_DELAYED_REF\" },\t\\\n\t\t{ BTRFS_DROP_DELAYED_REF,   \"DROP_DELAYED_REF\" },\t\\\n\t\t{ BTRFS_ADD_DELAYED_EXTENT, \"ADD_DELAYED_EXTENT\" }, \t\\\n\t\t{ BTRFS_UPDATE_DELAYED_HEAD, \"UPDATE_DELAYED_HEAD\" })\n\t\t\t\n\nDECLARE_EVENT_CLASS(btrfs_delayed_tree_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_tree_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  bytenr\t\t)\n\t\t__field(\tu64,  num_bytes\t\t)\n\t\t__field(\tint,  action\t\t) \n\t\t__field(\tu64,  parent\t\t)\n\t\t__field(\tu64,  ref_root\t\t)\n\t\t__field(\tint,  level\t\t)\n\t\t__field(\tint,  type\t\t)\n\t\t__field(\tu64,  seq\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->bytenr\t\t= ref->bytenr;\n\t\t__entry->num_bytes\t= ref->num_bytes;\n\t\t__entry->action\t\t= action;\n\t\t__entry->parent\t\t= full_ref->parent;\n\t\t__entry->ref_root\t= full_ref->root;\n\t\t__entry->level\t\t= full_ref->level;\n\t\t__entry->type\t\t= ref->type;\n\t\t__entry->seq\t\t= ref->seq;\n\t),\n\n\tTP_printk_btrfs(\"bytenr=%llu num_bytes=%llu action=%s \"\n\t\t  \"parent=%llu(%s) ref_root=%llu(%s) level=%d \"\n\t\t  \"type=%s seq=%llu\",\n\t\t  __entry->bytenr,\n\t\t  __entry->num_bytes,\n\t\t  show_ref_action(__entry->action),\n\t\t  show_root_type(__entry->parent),\n\t\t  show_root_type(__entry->ref_root),\n\t\t  __entry->level, show_ref_type(__entry->type),\n\t\t  __entry->seq)\n);\n\nDEFINE_EVENT(btrfs_delayed_tree_ref,  add_delayed_tree_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_tree_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action)\n);\n\nDEFINE_EVENT(btrfs_delayed_tree_ref,  run_delayed_tree_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_tree_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action)\n);\n\nDECLARE_EVENT_CLASS(btrfs_delayed_data_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_data_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  bytenr\t\t)\n\t\t__field(\tu64,  num_bytes\t\t)\n\t\t__field(\tint,  action\t\t) \n\t\t__field(\tu64,  parent\t\t)\n\t\t__field(\tu64,  ref_root\t\t)\n\t\t__field(\tu64,  owner\t\t)\n\t\t__field(\tu64,  offset\t\t)\n\t\t__field(\tint,  type\t\t)\n\t\t__field(\tu64,  seq\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->bytenr\t\t= ref->bytenr;\n\t\t__entry->num_bytes\t= ref->num_bytes;\n\t\t__entry->action\t\t= action;\n\t\t__entry->parent\t\t= full_ref->parent;\n\t\t__entry->ref_root\t= full_ref->root;\n\t\t__entry->owner\t\t= full_ref->objectid;\n\t\t__entry->offset\t\t= full_ref->offset;\n\t\t__entry->type\t\t= ref->type;\n\t\t__entry->seq\t\t= ref->seq;\n\t),\n\n\tTP_printk_btrfs(\"bytenr=%llu num_bytes=%llu action=%s \"\n\t\t  \"parent=%llu(%s) ref_root=%llu(%s) owner=%llu \"\n\t\t  \"offset=%llu type=%s seq=%llu\",\n\t\t  __entry->bytenr,\n\t\t  __entry->num_bytes,\n\t\t  show_ref_action(__entry->action),\n\t\t  show_root_type(__entry->parent),\n\t\t  show_root_type(__entry->ref_root),\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  show_ref_type(__entry->type),\n\t\t  __entry->seq)\n);\n\nDEFINE_EVENT(btrfs_delayed_data_ref,  add_delayed_data_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_data_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action)\n);\n\nDEFINE_EVENT(btrfs_delayed_data_ref,  run_delayed_data_ref,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_node *ref,\n\t\t const struct btrfs_delayed_data_ref *full_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, ref, full_ref, action)\n);\n\nDECLARE_EVENT_CLASS(btrfs_delayed_ref_head,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_head *head_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, head_ref, action),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  bytenr\t\t)\n\t\t__field(\tu64,  num_bytes\t\t)\n\t\t__field(\tint,  action\t\t) \n\t\t__field(\tint,  is_data\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->bytenr\t\t= head_ref->bytenr;\n\t\t__entry->num_bytes\t= head_ref->num_bytes;\n\t\t__entry->action\t\t= action;\n\t\t__entry->is_data\t= head_ref->is_data;\n\t),\n\n\tTP_printk_btrfs(\"bytenr=%llu num_bytes=%llu action=%s is_data=%d\",\n\t\t  __entry->bytenr,\n\t\t  __entry->num_bytes,\n\t\t  show_ref_action(__entry->action),\n\t\t  __entry->is_data)\n);\n\nDEFINE_EVENT(btrfs_delayed_ref_head,  add_delayed_ref_head,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_head *head_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, head_ref, action)\n);\n\nDEFINE_EVENT(btrfs_delayed_ref_head,  run_delayed_ref_head,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_delayed_ref_head *head_ref,\n\t\t int action),\n\n\tTP_ARGS(fs_info, head_ref, action)\n);\n\n#define show_chunk_type(type)\t\t\t\t\t\\\n\t__print_flags(type, \"|\",\t\t\t\t\\\n\t\t{ BTRFS_BLOCK_GROUP_DATA, \t\"DATA\"\t},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_SYSTEM, \t\"SYSTEM\"},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_METADATA, \t\"METADATA\"},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_RAID0, \t\"RAID0\" },\t\\\n\t\t{ BTRFS_BLOCK_GROUP_RAID1, \t\"RAID1\" },\t\\\n\t\t{ BTRFS_BLOCK_GROUP_DUP, \t\"DUP\"\t},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_RAID10, \t\"RAID10\"},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_RAID5, \t\"RAID5\"\t},\t\\\n\t\t{ BTRFS_BLOCK_GROUP_RAID6, \t\"RAID6\"\t})\n\nDECLARE_EVENT_CLASS(btrfs__chunk,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct map_lookup *map, u64 offset, u64 size),\n\n\tTP_ARGS(fs_info, map, offset, size),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tint,  num_stripes\t\t)\n\t\t__field(\tu64,  type\t\t\t)\n\t\t__field(\tint,  sub_stripes\t\t)\n\t\t__field(\tu64,  offset\t\t\t)\n\t\t__field(\tu64,  size\t\t\t)\n\t\t__field(\tu64,  root_objectid\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->num_stripes\t= map->num_stripes;\n\t\t__entry->type\t\t= map->type;\n\t\t__entry->sub_stripes\t= map->sub_stripes;\n\t\t__entry->offset\t\t= offset;\n\t\t__entry->size\t\t= size;\n\t\t__entry->root_objectid\t= fs_info->chunk_root->root_key.objectid;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) offset=%llu size=%llu \"\n\t\t  \"num_stripes=%d sub_stripes=%d type=%s\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->offset,\n\t\t  __entry->size,\n\t\t  __entry->num_stripes, __entry->sub_stripes,\n\t\t  show_chunk_type(__entry->type))\n);\n\nDEFINE_EVENT(btrfs__chunk,  btrfs_chunk_alloc,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct map_lookup *map, u64 offset, u64 size),\n\n\tTP_ARGS(fs_info, map, offset, size)\n);\n\nDEFINE_EVENT(btrfs__chunk,  btrfs_chunk_free,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct map_lookup *map, u64 offset, u64 size),\n\n\tTP_ARGS(fs_info, map, offset, size)\n);\n\nTRACE_EVENT(btrfs_cow_block,\n\n\tTP_PROTO(const struct btrfs_root *root, const struct extent_buffer *buf,\n\t\t const struct extent_buffer *cow),\n\n\tTP_ARGS(root, buf, cow),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  root_objectid\t\t)\n\t\t__field(\tu64,  buf_start\t\t\t)\n\t\t__field(\tint,  refs\t\t\t)\n\t\t__field(\tu64,  cow_start\t\t\t)\n\t\t__field(\tint,  buf_level\t\t\t)\n\t\t__field(\tint,  cow_level\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->buf_start\t= buf->start;\n\t\t__entry->refs\t\t= atomic_read(&buf->refs);\n\t\t__entry->cow_start\t= cow->start;\n\t\t__entry->buf_level\t= btrfs_header_level(buf);\n\t\t__entry->cow_level\t= btrfs_header_level(cow);\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) refs=%d orig_buf=%llu \"\n\t\t  \"(orig_level=%d) cow_buf=%llu (cow_level=%d)\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->refs,\n\t\t  __entry->buf_start,\n\t\t  __entry->buf_level,\n\t\t  __entry->cow_start,\n\t\t  __entry->cow_level)\n);\n\nTRACE_EVENT(btrfs_space_reservation,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, const char *type, u64 val,\n\t\t u64 bytes, int reserve),\n\n\tTP_ARGS(fs_info, type, val, bytes, reserve),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__string(\ttype,\ttype\t\t\t)\n\t\t__field(\tu64,\tval\t\t\t)\n\t\t__field(\tu64,\tbytes\t\t\t)\n\t\t__field(\tint,\treserve\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__assign_str(type, type);\n\t\t__entry->val\t\t= val;\n\t\t__entry->bytes\t\t= bytes;\n\t\t__entry->reserve\t= reserve;\n\t),\n\n\tTP_printk_btrfs(\"%s: %llu %s %llu\", __get_str(type), __entry->val,\n\t\t\t__entry->reserve ? \"reserve\" : \"release\",\n\t\t\t__entry->bytes)\n);\n\nTRACE_EVENT(btrfs_trigger_flush,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 flags, u64 bytes,\n\t\t int flush, const char *reason),\n\n\tTP_ARGS(fs_info, flags, bytes, flush, reason),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tbytes\t\t\t)\n\t\t__field(\tint,\tflush\t\t\t)\n\t\t__string(\treason,\treason\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->flags\t= flags;\n\t\t__entry->bytes\t= bytes;\n\t\t__entry->flush\t= flush;\n\t\t__assign_str(reason, reason);\n\t),\n\n\tTP_printk_btrfs(\"%s: flush=%d(%s) flags=%llu(%s) bytes=%llu\",\n\t\t  __get_str(reason), __entry->flush,\n\t\t  __print_symbolic(__entry->flush, FLUSH_ACTIONS),\n\t\t  __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\tBTRFS_GROUP_FLAGS),\n\t\t  __entry->bytes)\n);\n\n\nTRACE_EVENT(btrfs_flush_space,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 flags, u64 num_bytes,\n\t\t int state, int ret, bool for_preempt),\n\n\tTP_ARGS(fs_info, flags, num_bytes, state, ret, for_preempt),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tnum_bytes\t\t)\n\t\t__field(\tint,\tstate\t\t\t)\n\t\t__field(\tint,\tret\t\t\t)\n\t\t__field(       bool,\tfor_preempt\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->flags\t\t=\tflags;\n\t\t__entry->num_bytes\t=\tnum_bytes;\n\t\t__entry->state\t\t=\tstate;\n\t\t__entry->ret\t\t=\tret;\n\t\t__entry->for_preempt\t=\tfor_preempt;\n\t),\n\n\tTP_printk_btrfs(\"state=%d(%s) flags=%llu(%s) num_bytes=%llu ret=%d for_preempt=%d\",\n\t\t  __entry->state,\n\t\t  __print_symbolic(__entry->state, FLUSH_STATES),\n\t\t  __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\tBTRFS_GROUP_FLAGS),\n\t\t  __entry->num_bytes, __entry->ret, __entry->for_preempt)\n);\n\nDECLARE_EVENT_CLASS(btrfs__reserved_extent,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 start, u64 len),\n\n\tTP_ARGS(fs_info, start, len),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  start\t\t\t)\n\t\t__field(\tu64,  len\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) start=%llu len=%llu\",\n\t\t  show_root_type(BTRFS_EXTENT_TREE_OBJECTID),\n\t\t  __entry->start,\n\t\t  __entry->len)\n);\n\nDEFINE_EVENT(btrfs__reserved_extent,  btrfs_reserved_extent_alloc,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 start, u64 len),\n\n\tTP_ARGS(fs_info, start, len)\n);\n\nDEFINE_EVENT(btrfs__reserved_extent,  btrfs_reserved_extent_free,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 start, u64 len),\n\n\tTP_ARGS(fs_info, start, len)\n);\n\nTRACE_EVENT(find_free_extent,\n\n\tTP_PROTO(const struct btrfs_root *root,\n\t\t const struct find_free_extent_ctl *ffe_ctl),\n\n\tTP_ARGS(root, ffe_ctl),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\troot_objectid\t\t)\n\t\t__field(\tu64,\tnum_bytes\t\t)\n\t\t__field(\tu64,\tempty_size\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->num_bytes\t= ffe_ctl->num_bytes;\n\t\t__entry->empty_size\t= ffe_ctl->empty_size;\n\t\t__entry->flags\t\t= ffe_ctl->flags;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) len=%llu empty_size=%llu flags=%llu(%s)\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->num_bytes, __entry->empty_size, __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\t BTRFS_GROUP_FLAGS))\n);\n\nTRACE_EVENT(find_free_extent_search_loop,\n\n\tTP_PROTO(const struct btrfs_root *root,\n\t\t const struct find_free_extent_ctl *ffe_ctl),\n\n\tTP_ARGS(root, ffe_ctl),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\troot_objectid\t\t)\n\t\t__field(\tu64,\tnum_bytes\t\t)\n\t\t__field(\tu64,\tempty_size\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tloop\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->num_bytes\t= ffe_ctl->num_bytes;\n\t\t__entry->empty_size\t= ffe_ctl->empty_size;\n\t\t__entry->flags\t\t= ffe_ctl->flags;\n\t\t__entry->loop\t\t= ffe_ctl->loop;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) len=%llu empty_size=%llu flags=%llu(%s) loop=%llu\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->num_bytes, __entry->empty_size, __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\", BTRFS_GROUP_FLAGS),\n\t\t  __entry->loop)\n);\n\nTRACE_EVENT(find_free_extent_have_block_group,\n\n\tTP_PROTO(const struct btrfs_root *root,\n\t\t const struct find_free_extent_ctl *ffe_ctl,\n\t\t const struct btrfs_block_group *block_group),\n\n\tTP_ARGS(root, ffe_ctl, block_group),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\troot_objectid\t\t)\n\t\t__field(\tu64,\tnum_bytes\t\t)\n\t\t__field(\tu64,\tempty_size\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tloop\t\t\t)\n\t\t__field(\tbool,\thinted\t\t\t)\n\t\t__field(\tu64,\tbg_start\t\t)\n\t\t__field(\tu64,\tbg_flags\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->num_bytes\t= ffe_ctl->num_bytes;\n\t\t__entry->empty_size\t= ffe_ctl->empty_size;\n\t\t__entry->flags\t\t= ffe_ctl->flags;\n\t\t__entry->loop\t\t= ffe_ctl->loop;\n\t\t__entry->hinted\t\t= ffe_ctl->hinted;\n\t\t__entry->bg_start\t= block_group->start;\n\t\t__entry->bg_flags\t= block_group->flags;\n\t),\n\n\tTP_printk_btrfs(\n\"root=%llu(%s) len=%llu empty_size=%llu flags=%llu(%s) loop=%llu hinted=%d block_group=%llu bg_flags=%llu(%s)\",\n\t\t  show_root_type(__entry->root_objectid),\n\t\t  __entry->num_bytes, __entry->empty_size, __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\", BTRFS_GROUP_FLAGS),\n\t\t  __entry->loop, __entry->hinted,\n\t\t  __entry->bg_start, __entry->bg_flags,\n\t\t  __print_flags((unsigned long)__entry->bg_flags, \"|\",\n\t\t\t\t BTRFS_GROUP_FLAGS))\n);\n\nDECLARE_EVENT_CLASS(btrfs__reserve_extent,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group,\n\t\t const struct find_free_extent_ctl *ffe_ctl),\n\n\tTP_ARGS(block_group, ffe_ctl),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tbg_objectid\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tint,\tbg_size_class\t\t)\n\t\t__field(\tu64,\tstart\t\t\t)\n\t\t__field(\tu64,\tlen\t\t\t)\n\t\t__field(\tu64,\tloop\t\t\t)\n\t\t__field(\tbool,\thinted\t\t\t)\n\t\t__field(\tint,\tsize_class\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(block_group->fs_info,\n\t\t__entry->bg_objectid\t= block_group->start;\n\t\t__entry->flags\t\t= block_group->flags;\n\t\t__entry->bg_size_class\t= block_group->size_class;\n\t\t__entry->start\t\t= ffe_ctl->search_start;\n\t\t__entry->len\t\t= ffe_ctl->num_bytes;\n\t\t__entry->loop\t\t= ffe_ctl->loop;\n\t\t__entry->hinted\t\t= ffe_ctl->hinted;\n\t\t__entry->size_class\t= ffe_ctl->size_class;\n\t),\n\n\tTP_printk_btrfs(\n\"root=%llu(%s) block_group=%llu flags=%llu(%s) bg_size_class=%d start=%llu len=%llu loop=%llu hinted=%d size_class=%d\",\n\t\t  show_root_type(BTRFS_EXTENT_TREE_OBJECTID),\n\t\t  __entry->bg_objectid,\n\t\t  __entry->flags, __print_flags((unsigned long)__entry->flags,\n\t\t\t\t\t\t\"|\", BTRFS_GROUP_FLAGS),\n\t\t  __entry->bg_size_class, __entry->start, __entry->len,\n\t\t  __entry->loop, __entry->hinted, __entry->size_class)\n);\n\nDEFINE_EVENT(btrfs__reserve_extent, btrfs_reserve_extent,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group,\n\t\t const struct find_free_extent_ctl *ffe_ctl),\n\n\tTP_ARGS(block_group, ffe_ctl)\n);\n\nDEFINE_EVENT(btrfs__reserve_extent, btrfs_reserve_extent_cluster,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group,\n\t\t const struct find_free_extent_ctl *ffe_ctl),\n\n\tTP_ARGS(block_group, ffe_ctl)\n);\n\nTRACE_EVENT(btrfs_find_cluster,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group, u64 start,\n\t\t u64 bytes, u64 empty_size, u64 min_bytes),\n\n\tTP_ARGS(block_group, start, bytes, empty_size, min_bytes),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tbg_objectid\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tstart\t\t\t)\n\t\t__field(\tu64,\tbytes\t\t\t)\n\t\t__field(\tu64,\tempty_size\t\t)\n\t\t__field(\tu64,\tmin_bytes\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(block_group->fs_info,\n\t\t__entry->bg_objectid\t= block_group->start;\n\t\t__entry->flags\t\t= block_group->flags;\n\t\t__entry->start\t\t= start;\n\t\t__entry->bytes\t\t= bytes;\n\t\t__entry->empty_size\t= empty_size;\n\t\t__entry->min_bytes\t= min_bytes;\n\t),\n\n\tTP_printk_btrfs(\"block_group=%llu flags=%llu(%s) start=%llu len=%llu \"\n\t\t  \"empty_size=%llu min_bytes=%llu\", __entry->bg_objectid,\n\t\t  __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\tBTRFS_GROUP_FLAGS), __entry->start,\n\t\t  __entry->bytes, __entry->empty_size,  __entry->min_bytes)\n);\n\nTRACE_EVENT(btrfs_failed_cluster_setup,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group),\n\n\tTP_ARGS(block_group),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tbg_objectid\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(block_group->fs_info,\n\t\t__entry->bg_objectid\t= block_group->start;\n\t),\n\n\tTP_printk_btrfs(\"block_group=%llu\", __entry->bg_objectid)\n);\n\nTRACE_EVENT(btrfs_setup_cluster,\n\n\tTP_PROTO(const struct btrfs_block_group *block_group,\n\t\t const struct btrfs_free_cluster *cluster,\n\t\t u64 size, int bitmap),\n\n\tTP_ARGS(block_group, cluster, size, bitmap),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tbg_objectid\t\t)\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\tstart\t\t\t)\n\t\t__field(\tu64,\tmax_size\t\t)\n\t\t__field(\tu64,\tsize\t\t\t)\n\t\t__field(\tint,\tbitmap\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(block_group->fs_info,\n\t\t__entry->bg_objectid\t= block_group->start;\n\t\t__entry->flags\t\t= block_group->flags;\n\t\t__entry->start\t\t= cluster->window_start;\n\t\t__entry->max_size\t= cluster->max_size;\n\t\t__entry->size\t\t= size;\n\t\t__entry->bitmap\t\t= bitmap;\n\t),\n\n\tTP_printk_btrfs(\"block_group=%llu flags=%llu(%s) window_start=%llu \"\n\t\t  \"size=%llu max_size=%llu bitmap=%d\",\n\t\t  __entry->bg_objectid,\n\t\t  __entry->flags,\n\t\t  __print_flags((unsigned long)__entry->flags, \"|\",\n\t\t\t\tBTRFS_GROUP_FLAGS), __entry->start,\n\t\t  __entry->size, __entry->max_size, __entry->bitmap)\n);\n\nstruct extent_state;\nTRACE_EVENT(alloc_extent_state,\n\n\tTP_PROTO(const struct extent_state *state,\n\t\t gfp_t mask, unsigned long IP),\n\n\tTP_ARGS(state, mask, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(const struct extent_state *, state)\n\t\t__field(unsigned long, mask)\n\t\t__field(const void*, ip)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state\t= state,\n\t\t__entry->mask\t= (__force unsigned long)mask,\n\t\t__entry->ip\t= (const void *)IP\n\t),\n\n\tTP_printk(\"state=%p mask=%s caller=%pS\", __entry->state,\n\t\t  show_gfp_flags(__entry->mask), __entry->ip)\n);\n\nTRACE_EVENT(free_extent_state,\n\n\tTP_PROTO(const struct extent_state *state, unsigned long IP),\n\n\tTP_ARGS(state, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(const struct extent_state *, state)\n\t\t__field(const void*, ip)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->state\t= state,\n\t\t__entry->ip = (const void *)IP\n\t),\n\n\tTP_printk(\"state=%p caller=%pS\", __entry->state, __entry->ip)\n);\n\nDECLARE_EVENT_CLASS(btrfs__work,\n\n\tTP_PROTO(const struct btrfs_work *work),\n\n\tTP_ARGS(work),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tconst void *,\twork\t\t\t)\n\t\t__field(\tconst void *,\twq\t\t\t)\n\t\t__field(\tconst void *,\tfunc\t\t\t)\n\t\t__field(\tconst void *,\tordered_func\t\t)\n\t\t__field(\tconst void *,\tordered_free\t\t)\n\t\t__field(\tconst void *,\tnormal_work\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_work_owner(work),\n\t\t__entry->work\t\t= work;\n\t\t__entry->wq\t\t= work->wq;\n\t\t__entry->func\t\t= work->func;\n\t\t__entry->ordered_func\t= work->ordered_func;\n\t\t__entry->ordered_free\t= work->ordered_free;\n\t\t__entry->normal_work\t= &work->normal_work;\n\t),\n\n\tTP_printk_btrfs(\"work=%p (normal_work=%p) wq=%p func=%ps ordered_func=%p \"\n\t\t  \"ordered_free=%p\",\n\t\t  __entry->work, __entry->normal_work, __entry->wq,\n\t\t   __entry->func, __entry->ordered_func, __entry->ordered_free)\n);\n\n \nDECLARE_EVENT_CLASS(btrfs__work__done,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, const void *wtag),\n\n\tTP_ARGS(fs_info, wtag),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tconst void *,\twtag\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->wtag\t\t= wtag;\n\t),\n\n\tTP_printk_btrfs(\"work->%p\", __entry->wtag)\n);\n\nDEFINE_EVENT(btrfs__work, btrfs_work_queued,\n\n\tTP_PROTO(const struct btrfs_work *work),\n\n\tTP_ARGS(work)\n);\n\nDEFINE_EVENT(btrfs__work, btrfs_work_sched,\n\n\tTP_PROTO(const struct btrfs_work *work),\n\n\tTP_ARGS(work)\n);\n\nDEFINE_EVENT(btrfs__work__done, btrfs_all_work_done,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, const void *wtag),\n\n\tTP_ARGS(fs_info, wtag)\n);\n\nDEFINE_EVENT(btrfs__work, btrfs_ordered_sched,\n\n\tTP_PROTO(const struct btrfs_work *work),\n\n\tTP_ARGS(work)\n);\n\nDECLARE_EVENT_CLASS(btrfs_workqueue,\n\n\tTP_PROTO(const struct btrfs_workqueue *wq, const char *name),\n\n\tTP_ARGS(wq, name),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tconst void *,\twq\t\t\t)\n\t\t__string(\tname,\tname\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_workqueue_owner(wq),\n\t\t__entry->wq\t\t= wq;\n\t\t__assign_str(name, name);\n\t),\n\n\tTP_printk_btrfs(\"name=%s wq=%p\", __get_str(name),\n\t\t  __entry->wq)\n);\n\nDEFINE_EVENT(btrfs_workqueue, btrfs_workqueue_alloc,\n\n\tTP_PROTO(const struct btrfs_workqueue *wq, const char *name),\n\n\tTP_ARGS(wq, name)\n);\n\nDECLARE_EVENT_CLASS(btrfs_workqueue_done,\n\n\tTP_PROTO(const struct btrfs_workqueue *wq),\n\n\tTP_ARGS(wq),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tconst void *,\twq\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_workqueue_owner(wq),\n\t\t__entry->wq\t\t= wq;\n\t),\n\n\tTP_printk_btrfs(\"wq=%p\", __entry->wq)\n);\n\nDEFINE_EVENT(btrfs_workqueue_done, btrfs_workqueue_destroy,\n\n\tTP_PROTO(const struct btrfs_workqueue *wq),\n\n\tTP_ARGS(wq)\n);\n\n#define BTRFS_QGROUP_OPERATIONS\t\t\t\t\\\n\t{ QGROUP_RESERVE,\t\"reserve\"\t},\t\\\n\t{ QGROUP_RELEASE,\t\"release\"\t},\t\\\n\t{ QGROUP_FREE,\t\t\"free\"\t\t}\n\nDECLARE_EVENT_CLASS(btrfs__qgroup_rsv_data,\n\n\tTP_PROTO(const struct inode *inode, u64 start, u64 len,\n\t\t u64 reserved, int op),\n\n\tTP_ARGS(inode, start, len, reserved, op),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\t\trootid\t\t)\n\t\t__field(\tu64,\t\tino\t\t)\n\t\t__field(\tu64,\t\tstart\t\t)\n\t\t__field(\tu64,\t\tlen\t\t)\n\t\t__field(\tu64,\t\treserved\t)\n\t\t__field(\tint,\t\top\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(btrfs_sb(inode->i_sb),\n\t\t__entry->rootid\t\t=\n\t\t\tBTRFS_I(inode)->root->root_key.objectid;\n\t\t__entry->ino\t\t= btrfs_ino(BTRFS_I(inode));\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t\t__entry->reserved\t= reserved;\n\t\t__entry->op\t\t= op;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu ino=%llu start=%llu len=%llu reserved=%llu op=%s\",\n\t\t  __entry->rootid, __entry->ino, __entry->start, __entry->len,\n\t\t  __entry->reserved,\n\t\t  __print_flags((unsigned long)__entry->op, \"\",\n\t\t\t\tBTRFS_QGROUP_OPERATIONS)\n\t)\n);\n\nDEFINE_EVENT(btrfs__qgroup_rsv_data, btrfs_qgroup_reserve_data,\n\n\tTP_PROTO(const struct inode *inode, u64 start, u64 len,\n\t\t u64 reserved, int op),\n\n\tTP_ARGS(inode, start, len, reserved, op)\n);\n\nDEFINE_EVENT(btrfs__qgroup_rsv_data, btrfs_qgroup_release_data,\n\n\tTP_PROTO(const struct inode *inode, u64 start, u64 len,\n\t\t u64 reserved, int op),\n\n\tTP_ARGS(inode, start, len, reserved, op)\n);\n\nDECLARE_EVENT_CLASS(btrfs_qgroup_extent,\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_qgroup_extent_record *rec),\n\n\tTP_ARGS(fs_info, rec),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  bytenr\t\t)\n\t\t__field(\tu64,  num_bytes\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->bytenr\t\t= rec->bytenr,\n\t\t__entry->num_bytes\t= rec->num_bytes;\n\t),\n\n\tTP_printk_btrfs(\"bytenr=%llu num_bytes=%llu\",\n\t\t  __entry->bytenr, __entry->num_bytes)\n);\n\nDEFINE_EVENT(btrfs_qgroup_extent, btrfs_qgroup_account_extents,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_qgroup_extent_record *rec),\n\n\tTP_ARGS(fs_info, rec)\n);\n\nDEFINE_EVENT(btrfs_qgroup_extent, btrfs_qgroup_trace_extent,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_qgroup_extent_record *rec),\n\n\tTP_ARGS(fs_info, rec)\n);\n\nTRACE_EVENT(qgroup_num_dirty_extents,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 transid,\n\t\t u64 num_dirty_extents),\n\n\tTP_ARGS(fs_info, transid, num_dirty_extents),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64, transid\t\t\t)\n\t\t__field(\tu64, num_dirty_extents\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->transid\t   = transid;\n\t\t__entry->num_dirty_extents = num_dirty_extents;\n\t),\n\n\tTP_printk_btrfs(\"transid=%llu num_dirty_extents=%llu\",\n\t\t__entry->transid, __entry->num_dirty_extents)\n);\n\nTRACE_EVENT(btrfs_qgroup_account_extent,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 transid, u64 bytenr,\n\t\t u64 num_bytes, u64 nr_old_roots, u64 nr_new_roots),\n\n\tTP_ARGS(fs_info, transid, bytenr, num_bytes, nr_old_roots,\n\t\tnr_new_roots),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  transid\t\t\t)\n\t\t__field(\tu64,  bytenr\t\t\t)\n\t\t__field(\tu64,  num_bytes\t\t\t)\n\t\t__field(\tu64,  nr_old_roots\t\t)\n\t\t__field(\tu64,  nr_new_roots\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->transid\t= transid;\n\t\t__entry->bytenr\t\t= bytenr;\n\t\t__entry->num_bytes\t= num_bytes;\n\t\t__entry->nr_old_roots\t= nr_old_roots;\n\t\t__entry->nr_new_roots\t= nr_new_roots;\n\t),\n\n\tTP_printk_btrfs(\n\"transid=%llu bytenr=%llu num_bytes=%llu nr_old_roots=%llu nr_new_roots=%llu\",\n\t\t__entry->transid,\n\t\t__entry->bytenr,\n\t\t__entry->num_bytes,\n\t\t__entry->nr_old_roots,\n\t\t__entry->nr_new_roots)\n);\n\nTRACE_EVENT(qgroup_update_counters,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_qgroup *qgroup,\n\t\t u64 cur_old_count, u64 cur_new_count),\n\n\tTP_ARGS(fs_info, qgroup, cur_old_count, cur_new_count),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  qgid\t\t\t)\n\t\t__field(\tu64,  old_rfer\t\t\t)\n\t\t__field(\tu64,  old_excl\t\t\t)\n\t\t__field(\tu64,  cur_old_count\t\t)\n\t\t__field(\tu64,  cur_new_count\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->qgid\t\t= qgroup->qgroupid;\n\t\t__entry->old_rfer\t= qgroup->rfer;\n\t\t__entry->old_excl\t= qgroup->excl;\n\t\t__entry->cur_old_count\t= cur_old_count;\n\t\t__entry->cur_new_count\t= cur_new_count;\n\t),\n\n\tTP_printk_btrfs(\"qgid=%llu old_rfer=%llu old_excl=%llu cur_old_count=%llu cur_new_count=%llu\",\n\t\t  __entry->qgid, __entry->old_rfer, __entry->old_excl,\n\t\t  __entry->cur_old_count, __entry->cur_new_count)\n);\n\nTRACE_EVENT(qgroup_update_reserve,\n\n\tTP_PROTO(struct btrfs_fs_info *fs_info, struct btrfs_qgroup *qgroup,\n\t\t s64 diff, int type),\n\n\tTP_ARGS(fs_info, qgroup, diff, type),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tqgid\t\t\t)\n\t\t__field(\tu64,\tcur_reserved\t\t)\n\t\t__field(\ts64,\tdiff\t\t\t)\n\t\t__field(\tint,\ttype\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->qgid\t\t= qgroup->qgroupid;\n\t\t__entry->cur_reserved\t= qgroup->rsv.values[type];\n\t\t__entry->diff\t\t= diff;\n\t\t__entry->type\t\t= type;\n\t),\n\n\tTP_printk_btrfs(\"qgid=%llu type=%s cur_reserved=%llu diff=%lld\",\n\t\t__entry->qgid, __print_symbolic(__entry->type, QGROUP_RSV_TYPES),\n\t\t__entry->cur_reserved, __entry->diff)\n);\n\nTRACE_EVENT(qgroup_meta_reserve,\n\n\tTP_PROTO(struct btrfs_root *root, s64 diff, int type),\n\n\tTP_ARGS(root, diff, type),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\trefroot\t\t\t)\n\t\t__field(\ts64,\tdiff\t\t\t)\n\t\t__field(\tint,\ttype\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->refroot\t= root->root_key.objectid;\n\t\t__entry->diff\t\t= diff;\n\t\t__entry->type\t\t= type;\n\t),\n\n\tTP_printk_btrfs(\"refroot=%llu(%s) type=%s diff=%lld\",\n\t\tshow_root_type(__entry->refroot),\n\t\t__print_symbolic(__entry->type, QGROUP_RSV_TYPES), __entry->diff)\n);\n\nTRACE_EVENT(qgroup_meta_convert,\n\n\tTP_PROTO(struct btrfs_root *root, s64 diff),\n\n\tTP_ARGS(root, diff),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\trefroot\t\t\t)\n\t\t__field(\ts64,\tdiff\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->refroot\t= root->root_key.objectid;\n\t\t__entry->diff\t\t= diff;\n\t),\n\n\tTP_printk_btrfs(\"refroot=%llu(%s) type=%s->%s diff=%lld\",\n\t\tshow_root_type(__entry->refroot),\n\t\t__print_symbolic(BTRFS_QGROUP_RSV_META_PREALLOC, QGROUP_RSV_TYPES),\n\t\t__print_symbolic(BTRFS_QGROUP_RSV_META_PERTRANS, QGROUP_RSV_TYPES),\n\t\t__entry->diff)\n);\n\nTRACE_EVENT(qgroup_meta_free_all_pertrans,\n\n\tTP_PROTO(struct btrfs_root *root),\n\n\tTP_ARGS(root),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\trefroot\t\t\t)\n\t\t__field(\ts64,\tdiff\t\t\t)\n\t\t__field(\tint,\ttype\t\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->refroot\t= root->root_key.objectid;\n\t\tspin_lock(&root->qgroup_meta_rsv_lock);\n\t\t__entry->diff\t\t= -(s64)root->qgroup_meta_rsv_pertrans;\n\t\tspin_unlock(&root->qgroup_meta_rsv_lock);\n\t\t__entry->type\t\t= BTRFS_QGROUP_RSV_META_PERTRANS;\n\t),\n\n\tTP_printk_btrfs(\"refroot=%llu(%s) type=%s diff=%lld\",\n\t\tshow_root_type(__entry->refroot),\n\t\t__print_symbolic(__entry->type, QGROUP_RSV_TYPES), __entry->diff)\n);\n\nDECLARE_EVENT_CLASS(btrfs__prelim_ref,\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct prelim_ref *oldref,\n\t\t const struct prelim_ref *newref, u64 tree_size),\n\tTP_ARGS(fs_info, newref, oldref, tree_size),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,  root_id\t\t)\n\t\t__field(\tu64,  objectid\t\t)\n\t\t__field(\t u8,  type\t\t)\n\t\t__field(\tu64,  offset\t\t)\n\t\t__field(\tint,  level\t\t)\n\t\t__field(\tint,  old_count\t\t)\n\t\t__field(\tu64,  parent\t\t)\n\t\t__field(\tu64,  bytenr\t\t)\n\t\t__field(\tint,  mod_count\t\t)\n\t\t__field(\tu64,  tree_size\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->root_id\t= oldref->root_id;\n\t\t__entry->objectid\t= oldref->key_for_search.objectid;\n\t\t__entry->type\t\t= oldref->key_for_search.type;\n\t\t__entry->offset\t\t= oldref->key_for_search.offset;\n\t\t__entry->level\t\t= oldref->level;\n\t\t__entry->old_count\t= oldref->count;\n\t\t__entry->parent\t\t= oldref->parent;\n\t\t__entry->bytenr\t\t= oldref->wanted_disk_byte;\n\t\t__entry->mod_count\t= newref ? newref->count : 0;\n\t\t__entry->tree_size\t= tree_size;\n\t),\n\n\tTP_printk_btrfs(\"root_id=%llu key=[%llu,%u,%llu] level=%d count=[%d+%d=%d] parent=%llu wanted_disk_byte=%llu nodes=%llu\",\n\t\t\t__entry->root_id,\n\t\t\t__entry->objectid, __entry->type,\n\t\t\t__entry->offset, __entry->level,\n\t\t\t__entry->old_count, __entry->mod_count,\n\t\t\t__entry->old_count + __entry->mod_count,\n\t\t\t__entry->parent,\n\t\t\t__entry->bytenr,\n\t\t\t__entry->tree_size)\n);\n\nDEFINE_EVENT(btrfs__prelim_ref, btrfs_prelim_ref_merge,\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct prelim_ref *oldref,\n\t\t const struct prelim_ref *newref, u64 tree_size),\n\tTP_ARGS(fs_info, oldref, newref, tree_size)\n);\n\nDEFINE_EVENT(btrfs__prelim_ref, btrfs_prelim_ref_insert,\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct prelim_ref *oldref,\n\t\t const struct prelim_ref *newref, u64 tree_size),\n\tTP_ARGS(fs_info, oldref, newref, tree_size)\n);\n\nTRACE_EVENT(btrfs_inode_mod_outstanding_extents,\n\tTP_PROTO(const struct btrfs_root *root, u64 ino, int mod, unsigned outstanding),\n\n\tTP_ARGS(root, ino, mod, outstanding),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64, root_objectid\t)\n\t\t__field(\tu64, ino\t\t)\n\t\t__field(\tint, mod\t\t)\n\t\t__field(\tunsigned, outstanding\t)\n\t),\n\n\tTP_fast_assign_btrfs(root->fs_info,\n\t\t__entry->root_objectid\t= root->root_key.objectid;\n\t\t__entry->ino\t\t= ino;\n\t\t__entry->mod\t\t= mod;\n\t\t__entry->outstanding    = outstanding;\n\t),\n\n\tTP_printk_btrfs(\"root=%llu(%s) ino=%llu mod=%d outstanding=%u\",\n\t\t\tshow_root_type(__entry->root_objectid),\n\t\t\t__entry->ino, __entry->mod, __entry->outstanding)\n);\n\nDECLARE_EVENT_CLASS(btrfs__block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tbytenr\t\t)\n\t\t__field(\tu64,\tlen\t\t)\n\t\t__field(\tu64,\tused\t\t)\n\t\t__field(\tu64,\tflags\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(bg_cache->fs_info,\n\t\t__entry->bytenr = bg_cache->start,\n\t\t__entry->len\t= bg_cache->length,\n\t\t__entry->used\t= bg_cache->used;\n\t\t__entry->flags\t= bg_cache->flags;\n\t),\n\n\tTP_printk_btrfs(\"bg bytenr=%llu len=%llu used=%llu flags=%llu(%s)\",\n\t\t__entry->bytenr, __entry->len, __entry->used, __entry->flags,\n\t\t__print_flags(__entry->flags, \"|\", BTRFS_GROUP_FLAGS))\n);\n\nDEFINE_EVENT(btrfs__block_group, btrfs_remove_block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache)\n);\n\nDEFINE_EVENT(btrfs__block_group, btrfs_add_unused_block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache)\n);\n\nDEFINE_EVENT(btrfs__block_group, btrfs_add_reclaim_block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache)\n);\n\nDEFINE_EVENT(btrfs__block_group, btrfs_reclaim_block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache)\n);\n\nDEFINE_EVENT(btrfs__block_group, btrfs_skip_unused_block_group,\n\tTP_PROTO(const struct btrfs_block_group *bg_cache),\n\n\tTP_ARGS(bg_cache)\n);\n\nTRACE_EVENT(btrfs_set_extent_bit,\n\tTP_PROTO(const struct extent_io_tree *tree,\n\t\t u64 start, u64 len, unsigned set_bits),\n\n\tTP_ARGS(tree, start, len, set_bits),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tunsigned,\towner\t)\n\t\t__field(\tu64,\t\tino\t)\n\t\t__field(\tu64,\t\trootid\t)\n\t\t__field(\tu64,\t\tstart\t)\n\t\t__field(\tu64,\t\tlen\t)\n\t\t__field(\tunsigned,\tset_bits)\n\t),\n\n\tTP_fast_assign_btrfs(tree->fs_info,\n\t\t__entry->owner = tree->owner;\n\t\tif (tree->inode) {\n\t\t\tconst struct btrfs_inode *inode = tree->inode;\n\n\t\t\t__entry->ino\t= btrfs_ino(inode);\n\t\t\t__entry->rootid\t= inode->root->root_key.objectid;\n\t\t} else {\n\t\t\t__entry->ino\t= 0;\n\t\t\t__entry->rootid\t= 0;\n\t\t}\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t\t__entry->set_bits\t= set_bits;\n\t),\n\n\tTP_printk_btrfs(\n\t\t\"io_tree=%s ino=%llu root=%llu start=%llu len=%llu set_bits=%s\",\n\t\t__print_symbolic(__entry->owner, IO_TREE_OWNER), __entry->ino,\n\t\t__entry->rootid, __entry->start, __entry->len,\n\t\t__print_flags(__entry->set_bits, \"|\", EXTENT_FLAGS))\n);\n\nTRACE_EVENT(btrfs_clear_extent_bit,\n\tTP_PROTO(const struct extent_io_tree *tree,\n\t\t u64 start, u64 len, unsigned clear_bits),\n\n\tTP_ARGS(tree, start, len, clear_bits),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tunsigned,\towner\t)\n\t\t__field(\tu64,\t\tino\t)\n\t\t__field(\tu64,\t\trootid\t)\n\t\t__field(\tu64,\t\tstart\t)\n\t\t__field(\tu64,\t\tlen\t)\n\t\t__field(\tunsigned,\tclear_bits)\n\t),\n\n\tTP_fast_assign_btrfs(tree->fs_info,\n\t\t__entry->owner = tree->owner;\n\t\tif (tree->inode) {\n\t\t\tconst struct btrfs_inode *inode = tree->inode;\n\n\t\t\t__entry->ino\t= btrfs_ino(inode);\n\t\t\t__entry->rootid\t= inode->root->root_key.objectid;\n\t\t} else {\n\t\t\t__entry->ino\t= 0;\n\t\t\t__entry->rootid\t= 0;\n\t\t}\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t\t__entry->clear_bits\t= clear_bits;\n\t),\n\n\tTP_printk_btrfs(\n\t\t\"io_tree=%s ino=%llu root=%llu start=%llu len=%llu clear_bits=%s\",\n\t\t__print_symbolic(__entry->owner, IO_TREE_OWNER), __entry->ino,\n\t\t__entry->rootid, __entry->start, __entry->len,\n\t\t__print_flags(__entry->clear_bits, \"|\", EXTENT_FLAGS))\n);\n\nTRACE_EVENT(btrfs_convert_extent_bit,\n\tTP_PROTO(const struct extent_io_tree *tree,\n\t\t u64 start, u64 len, unsigned set_bits, unsigned clear_bits),\n\n\tTP_ARGS(tree, start, len, set_bits, clear_bits),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tunsigned,\towner\t)\n\t\t__field(\tu64,\t\tino\t)\n\t\t__field(\tu64,\t\trootid\t)\n\t\t__field(\tu64,\t\tstart\t)\n\t\t__field(\tu64,\t\tlen\t)\n\t\t__field(\tunsigned,\tset_bits)\n\t\t__field(\tunsigned,\tclear_bits)\n\t),\n\n\tTP_fast_assign_btrfs(tree->fs_info,\n\t\t__entry->owner = tree->owner;\n\t\tif (tree->inode) {\n\t\t\tconst struct btrfs_inode *inode = tree->inode;\n\n\t\t\t__entry->ino\t= btrfs_ino(inode);\n\t\t\t__entry->rootid\t= inode->root->root_key.objectid;\n\t\t} else {\n\t\t\t__entry->ino\t= 0;\n\t\t\t__entry->rootid\t= 0;\n\t\t}\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t\t__entry->set_bits\t= set_bits;\n\t\t__entry->clear_bits\t= clear_bits;\n\t),\n\n\tTP_printk_btrfs(\n\"io_tree=%s ino=%llu root=%llu start=%llu len=%llu set_bits=%s clear_bits=%s\",\n\t\t  __print_symbolic(__entry->owner, IO_TREE_OWNER), __entry->ino,\n\t\t  __entry->rootid, __entry->start, __entry->len,\n\t\t  __print_flags(__entry->set_bits , \"|\", EXTENT_FLAGS),\n\t\t  __print_flags(__entry->clear_bits, \"|\", EXTENT_FLAGS))\n);\n\nDECLARE_EVENT_CLASS(btrfs_dump_space_info,\n\tTP_PROTO(struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo),\n\n\tTP_ARGS(fs_info, sinfo),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tflags\t\t\t)\n\t\t__field(\tu64,\ttotal_bytes\t\t)\n\t\t__field(\tu64,\tbytes_used\t\t)\n\t\t__field(\tu64,\tbytes_pinned\t\t)\n\t\t__field(\tu64,\tbytes_reserved\t\t)\n\t\t__field(\tu64,\tbytes_may_use\t\t)\n\t\t__field(\tu64,\tbytes_readonly\t\t)\n\t\t__field(\tu64,\treclaim_size\t\t)\n\t\t__field(\tint,\tclamp\t\t\t)\n\t\t__field(\tu64,\tglobal_reserved\t\t)\n\t\t__field(\tu64,\ttrans_reserved\t\t)\n\t\t__field(\tu64,\tdelayed_refs_reserved\t)\n\t\t__field(\tu64,\tdelayed_reserved\t)\n\t\t__field(\tu64,\tfree_chunk_space\t)\n\t\t__field(\tu64,\tdelalloc_bytes\t\t)\n\t\t__field(\tu64,\tordered_bytes\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->flags\t\t\t=\tsinfo->flags;\n\t\t__entry->total_bytes\t\t=\tsinfo->total_bytes;\n\t\t__entry->bytes_used\t\t=\tsinfo->bytes_used;\n\t\t__entry->bytes_pinned\t\t=\tsinfo->bytes_pinned;\n\t\t__entry->bytes_reserved\t\t=\tsinfo->bytes_reserved;\n\t\t__entry->bytes_may_use\t\t=\tsinfo->bytes_may_use;\n\t\t__entry->bytes_readonly\t\t=\tsinfo->bytes_readonly;\n\t\t__entry->reclaim_size\t\t=\tsinfo->reclaim_size;\n\t\t__entry->clamp\t\t\t=\tsinfo->clamp;\n\t\t__entry->global_reserved\t=\tfs_info->global_block_rsv.reserved;\n\t\t__entry->trans_reserved\t\t=\tfs_info->trans_block_rsv.reserved;\n\t\t__entry->delayed_refs_reserved\t=\tfs_info->delayed_refs_rsv.reserved;\n\t\t__entry->delayed_reserved\t=\tfs_info->delayed_block_rsv.reserved;\n\t\t__entry->free_chunk_space\t=\tatomic64_read(&fs_info->free_chunk_space);\n\t\t__entry->delalloc_bytes\t\t=\tpercpu_counter_sum_positive(&fs_info->delalloc_bytes);\n\t\t__entry->ordered_bytes\t\t=\tpercpu_counter_sum_positive(&fs_info->ordered_bytes);\n\t),\n\n\tTP_printk_btrfs(\"flags=%s total_bytes=%llu bytes_used=%llu \"\n\t\t\t\"bytes_pinned=%llu bytes_reserved=%llu \"\n\t\t\t\"bytes_may_use=%llu bytes_readonly=%llu \"\n\t\t\t\"reclaim_size=%llu clamp=%d global_reserved=%llu \"\n\t\t\t\"trans_reserved=%llu delayed_refs_reserved=%llu \"\n\t\t\t\"delayed_reserved=%llu chunk_free_space=%llu \"\n\t\t\t\"delalloc_bytes=%llu ordered_bytes=%llu\",\n\t\t\t__print_flags(__entry->flags, \"|\", BTRFS_GROUP_FLAGS),\n\t\t\t__entry->total_bytes, __entry->bytes_used,\n\t\t\t__entry->bytes_pinned, __entry->bytes_reserved,\n\t\t\t__entry->bytes_may_use, __entry->bytes_readonly,\n\t\t\t__entry->reclaim_size, __entry->clamp,\n\t\t\t__entry->global_reserved, __entry->trans_reserved,\n\t\t\t__entry->delayed_refs_reserved,\n\t\t\t__entry->delayed_reserved, __entry->free_chunk_space,\n\t\t\t__entry->delalloc_bytes, __entry->ordered_bytes)\n);\n\nDEFINE_EVENT(btrfs_dump_space_info, btrfs_done_preemptive_reclaim,\n\tTP_PROTO(struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo),\n\tTP_ARGS(fs_info, sinfo)\n);\n\nDEFINE_EVENT(btrfs_dump_space_info, btrfs_fail_all_tickets,\n\tTP_PROTO(struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo),\n\tTP_ARGS(fs_info, sinfo)\n);\n\nTRACE_EVENT(btrfs_reserve_ticket,\n\tTP_PROTO(const struct btrfs_fs_info *fs_info, u64 flags, u64 bytes,\n\t\t u64 start_ns, int flush, int error),\n\n\tTP_ARGS(fs_info, flags, bytes, start_ns, flush, error),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tflags\t\t)\n\t\t__field(\tu64,\tbytes\t\t)\n\t\t__field(\tu64,\tstart_ns\t)\n\t\t__field(\tint,\tflush\t\t)\n\t\t__field(\tint,\terror\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->flags\t\t= flags;\n\t\t__entry->bytes\t\t= bytes;\n\t\t__entry->start_ns\t= start_ns;\n\t\t__entry->flush\t\t= flush;\n\t\t__entry->error\t\t= error;\n\t),\n\n\tTP_printk_btrfs(\"flags=%s bytes=%llu start_ns=%llu flush=%s error=%d\",\n\t\t\t__print_flags(__entry->flags, \"|\", BTRFS_GROUP_FLAGS),\n\t\t\t__entry->bytes, __entry->start_ns,\n\t\t\t__print_symbolic(__entry->flush, FLUSH_ACTIONS),\n\t\t\t__entry->error)\n);\n\nDECLARE_EVENT_CLASS(btrfs_sleep_tree_lock,\n\tTP_PROTO(const struct extent_buffer *eb, u64 start_ns),\n\n\tTP_ARGS(eb, start_ns),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tblock\t\t)\n\t\t__field(\tu64,\tgeneration\t)\n\t\t__field(\tu64,\tstart_ns\t)\n\t\t__field(\tu64,\tend_ns\t\t)\n\t\t__field(\tu64,\tdiff_ns\t\t)\n\t\t__field(\tu64,\towner\t\t)\n\t\t__field(\tint,\tis_log_tree\t)\n\t),\n\n\tTP_fast_assign_btrfs(eb->fs_info,\n\t\t__entry->block\t\t= eb->start;\n\t\t__entry->generation\t= btrfs_header_generation(eb);\n\t\t__entry->start_ns\t= start_ns;\n\t\t__entry->end_ns\t\t= ktime_get_ns();\n\t\t__entry->diff_ns\t= __entry->end_ns - start_ns;\n\t\t__entry->owner\t\t= btrfs_header_owner(eb);\n\t\t__entry->is_log_tree\t= (eb->log_index >= 0);\n\t),\n\n\tTP_printk_btrfs(\n\"block=%llu generation=%llu start_ns=%llu end_ns=%llu diff_ns=%llu owner=%llu is_log_tree=%d\",\n\t\t__entry->block, __entry->generation,\n\t\t__entry->start_ns, __entry->end_ns, __entry->diff_ns,\n\t\t__entry->owner, __entry->is_log_tree)\n);\n\nDEFINE_EVENT(btrfs_sleep_tree_lock, btrfs_tree_read_lock,\n\tTP_PROTO(const struct extent_buffer *eb, u64 start_ns),\n\n\tTP_ARGS(eb, start_ns)\n);\n\nDEFINE_EVENT(btrfs_sleep_tree_lock, btrfs_tree_lock,\n\tTP_PROTO(const struct extent_buffer *eb, u64 start_ns),\n\n\tTP_ARGS(eb, start_ns)\n);\n\nDECLARE_EVENT_CLASS(btrfs_locking_events,\n\tTP_PROTO(const struct extent_buffer *eb),\n\n\tTP_ARGS(eb),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tblock\t\t)\n\t\t__field(\tu64,\tgeneration\t)\n\t\t__field(\tu64,\towner\t\t)\n\t\t__field(\tint,\tis_log_tree\t)\n\t),\n\n\tTP_fast_assign_btrfs(eb->fs_info,\n\t\t__entry->block\t\t= eb->start;\n\t\t__entry->generation\t= btrfs_header_generation(eb);\n\t\t__entry->owner\t\t= btrfs_header_owner(eb);\n\t\t__entry->is_log_tree\t= (eb->log_index >= 0);\n\t),\n\n\tTP_printk_btrfs(\"block=%llu generation=%llu owner=%llu is_log_tree=%d\",\n\t\t__entry->block, __entry->generation,\n\t\t__entry->owner, __entry->is_log_tree)\n);\n\n#define DEFINE_BTRFS_LOCK_EVENT(name)\t\t\t\t\\\nDEFINE_EVENT(btrfs_locking_events, name,\t\t\t\\\n\t\tTP_PROTO(const struct extent_buffer *eb),\t\\\n\t\t\t\t\t\t\t\t\\\n\t\tTP_ARGS(eb)\t\t\t\t\t\\\n)\n\nDEFINE_BTRFS_LOCK_EVENT(btrfs_tree_unlock);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_tree_read_unlock);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_tree_read_unlock_blocking);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_set_lock_blocking_read);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_set_lock_blocking_write);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_try_tree_read_lock);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_try_tree_write_lock);\nDEFINE_BTRFS_LOCK_EVENT(btrfs_tree_read_lock_atomic);\n\nDECLARE_EVENT_CLASS(btrfs__space_info_update,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo, u64 old, s64 diff),\n\n\tTP_ARGS(fs_info, sinfo, old, diff),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\ttype\t\t)\n\t\t__field(\tu64,\told\t\t)\n\t\t__field(\ts64,\tdiff\t\t)\n\t),\n\n\tTP_fast_assign_btrfs(fs_info,\n\t\t__entry->type\t= sinfo->flags;\n\t\t__entry->old\t= old;\n\t\t__entry->diff\t= diff;\n\t),\n\tTP_printk_btrfs(\"type=%s old=%llu diff=%lld\",\n\t\t__print_flags(__entry->type, \"|\", BTRFS_GROUP_FLAGS),\n\t\t__entry->old, __entry->diff)\n);\n\nDEFINE_EVENT(btrfs__space_info_update, update_bytes_may_use,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo, u64 old, s64 diff),\n\n\tTP_ARGS(fs_info, sinfo, old, diff)\n);\n\nDEFINE_EVENT(btrfs__space_info_update, update_bytes_pinned,\n\n\tTP_PROTO(const struct btrfs_fs_info *fs_info,\n\t\t const struct btrfs_space_info *sinfo, u64 old, s64 diff),\n\n\tTP_ARGS(fs_info, sinfo, old, diff)\n);\n\nDECLARE_EVENT_CLASS(btrfs_raid56_bio,\n\n\tTP_PROTO(const struct btrfs_raid_bio *rbio,\n\t\t const struct bio *bio,\n\t\t const struct raid56_bio_trace_info *trace_info),\n\n\tTP_ARGS(rbio, bio, trace_info),\n\n\tTP_STRUCT__entry_btrfs(\n\t\t__field(\tu64,\tfull_stripe\t)\n\t\t__field(\tu64,\tphysical\t)\n\t\t__field(\tu64,\tdevid\t\t)\n\t\t__field(\tu32,\toffset\t\t)\n\t\t__field(\tu32,\tlen\t\t)\n\t\t__field(\tu8,\topf\t\t)\n\t\t__field(\tu8,\ttotal_stripes\t)\n\t\t__field(\tu8,\treal_stripes\t)\n\t\t__field(\tu8,\tnr_data\t\t)\n\t\t__field(\tu8,\tstripe_nr\t)\n\t),\n\n\tTP_fast_assign_btrfs(rbio->bioc->fs_info,\n\t\t__entry->full_stripe\t= rbio->bioc->full_stripe_logical;\n\t\t__entry->physical\t= bio->bi_iter.bi_sector << SECTOR_SHIFT;\n\t\t__entry->len\t\t= bio->bi_iter.bi_size;\n\t\t__entry->opf\t\t= bio_op(bio);\n\t\t__entry->devid\t\t= trace_info->devid;\n\t\t__entry->offset\t\t= trace_info->offset;\n\t\t__entry->stripe_nr\t= trace_info->stripe_nr;\n\t\t__entry->total_stripes\t= rbio->bioc->num_stripes;\n\t\t__entry->real_stripes\t= rbio->real_stripes;\n\t\t__entry->nr_data\t= rbio->nr_data;\n\t),\n\t \n\tTP_printk_btrfs(\n\"full_stripe=%llu devid=%lld type=%s%d offset=%d opf=0x%x physical=%llu len=%u\",\n\t\t__entry->full_stripe, __entry->devid,\n\t\t(__entry->stripe_nr < __entry->nr_data) ? \"DATA\" :\n\t\t\t((__entry->stripe_nr < __entry->real_stripes) ? \"PQ\" :\n\t\t\t \"REPLACE\"),\n\t\t(__entry->stripe_nr < __entry->nr_data) ?\n\t\t\t(__entry->stripe_nr + 1) :\n\t\t\t((__entry->stripe_nr < __entry->real_stripes) ?\n\t\t\t (__entry->stripe_nr - __entry->nr_data + 1) : 0),\n\t\t__entry->offset, __entry->opf, __entry->physical, __entry->len)\n);\n\nDEFINE_EVENT(btrfs_raid56_bio, raid56_read,\n\tTP_PROTO(const struct btrfs_raid_bio *rbio,\n\t\t const struct bio *bio,\n\t\t const struct raid56_bio_trace_info *trace_info),\n\n\tTP_ARGS(rbio, bio, trace_info)\n);\n\nDEFINE_EVENT(btrfs_raid56_bio, raid56_write,\n\tTP_PROTO(const struct btrfs_raid_bio *rbio,\n\t\t const struct bio *bio,\n\t\t const struct raid56_bio_trace_info *trace_info),\n\n\tTP_ARGS(rbio, bio, trace_info)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}