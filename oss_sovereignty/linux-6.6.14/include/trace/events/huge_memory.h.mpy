{
  "module_name": "huge_memory.h",
  "hash_id": "e7047f03f78a806b791c22cc05a462a6e28a353a5ac080fac7feea16b0279d7f",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/huge_memory.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM huge_memory\n\n#if !defined(__HUGE_MEMORY_H) || defined(TRACE_HEADER_MULTI_READ)\n#define __HUGE_MEMORY_H\n\n#include  <linux/tracepoint.h>\n\n#define SCAN_STATUS\t\t\t\t\t\t\t\\\n\tEM( SCAN_FAIL,\t\t\t\"failed\")\t\t\t\\\n\tEM( SCAN_SUCCEED,\t\t\"succeeded\")\t\t\t\\\n\tEM( SCAN_PMD_NULL,\t\t\"pmd_null\")\t\t\t\\\n\tEM( SCAN_PMD_NONE,\t\t\"pmd_none\")\t\t\t\\\n\tEM( SCAN_PMD_MAPPED,\t\t\"page_pmd_mapped\")\t\t\\\n\tEM( SCAN_EXCEED_NONE_PTE,\t\"exceed_none_pte\")\t\t\\\n\tEM( SCAN_EXCEED_SWAP_PTE,\t\"exceed_swap_pte\")\t\t\\\n\tEM( SCAN_EXCEED_SHARED_PTE,\t\"exceed_shared_pte\")\t\t\\\n\tEM( SCAN_PTE_NON_PRESENT,\t\"pte_non_present\")\t\t\\\n\tEM( SCAN_PTE_UFFD_WP,\t\t\"pte_uffd_wp\")\t\t\t\\\n\tEM( SCAN_PTE_MAPPED_HUGEPAGE,\t\"pte_mapped_hugepage\")\t\t\\\n\tEM( SCAN_PAGE_RO,\t\t\"no_writable_page\")\t\t\\\n\tEM( SCAN_LACK_REFERENCED_PAGE,\t\"lack_referenced_page\")\t\t\\\n\tEM( SCAN_PAGE_NULL,\t\t\"page_null\")\t\t\t\\\n\tEM( SCAN_SCAN_ABORT,\t\t\"scan_aborted\")\t\t\t\\\n\tEM( SCAN_PAGE_COUNT,\t\t\"not_suitable_page_count\")\t\\\n\tEM( SCAN_PAGE_LRU,\t\t\"page_not_in_lru\")\t\t\\\n\tEM( SCAN_PAGE_LOCK,\t\t\"page_locked\")\t\t\t\\\n\tEM( SCAN_PAGE_ANON,\t\t\"page_not_anon\")\t\t\\\n\tEM( SCAN_PAGE_COMPOUND,\t\t\"page_compound\")\t\t\\\n\tEM( SCAN_ANY_PROCESS,\t\t\"no_process_for_page\")\t\t\\\n\tEM( SCAN_VMA_NULL,\t\t\"vma_null\")\t\t\t\\\n\tEM( SCAN_VMA_CHECK,\t\t\"vma_check_failed\")\t\t\\\n\tEM( SCAN_ADDRESS_RANGE,\t\t\"not_suitable_address_range\")\t\\\n\tEM( SCAN_DEL_PAGE_LRU,\t\t\"could_not_delete_page_from_lru\")\\\n\tEM( SCAN_ALLOC_HUGE_PAGE_FAIL,\t\"alloc_huge_page_failed\")\t\\\n\tEM( SCAN_CGROUP_CHARGE_FAIL,\t\"ccgroup_charge_failed\")\t\\\n\tEM( SCAN_TRUNCATED,\t\t\"truncated\")\t\t\t\\\n\tEM( SCAN_PAGE_HAS_PRIVATE,\t\"page_has_private\")\t\t\\\n\tEM( SCAN_STORE_FAILED,\t\t\"store_failed\")\t\t\t\\\n\tEM( SCAN_COPY_MC,\t\t\"copy_poisoned_page\")\t\t\\\n\tEMe(SCAN_PAGE_FILLED,\t\t\"page_filled\")\n\n#undef EM\n#undef EMe\n#define EM(a, b)\tTRACE_DEFINE_ENUM(a);\n#define EMe(a, b)\tTRACE_DEFINE_ENUM(a);\n\nSCAN_STATUS\n\n#undef EM\n#undef EMe\n#define EM(a, b)\t{a, b},\n#define EMe(a, b)\t{a, b}\n\nTRACE_EVENT(mm_khugepaged_scan_pmd,\n\n\tTP_PROTO(struct mm_struct *mm, struct page *page, bool writable,\n\t\t int referenced, int none_or_zero, int status, int unmapped),\n\n\tTP_ARGS(mm, page, writable, referenced, none_or_zero, status, unmapped),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct mm_struct *, mm)\n\t\t__field(unsigned long, pfn)\n\t\t__field(bool, writable)\n\t\t__field(int, referenced)\n\t\t__field(int, none_or_zero)\n\t\t__field(int, status)\n\t\t__field(int, unmapped)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->mm = mm;\n\t\t__entry->pfn = page ? page_to_pfn(page) : -1;\n\t\t__entry->writable = writable;\n\t\t__entry->referenced = referenced;\n\t\t__entry->none_or_zero = none_or_zero;\n\t\t__entry->status = status;\n\t\t__entry->unmapped = unmapped;\n\t),\n\n\tTP_printk(\"mm=%p, scan_pfn=0x%lx, writable=%d, referenced=%d, none_or_zero=%d, status=%s, unmapped=%d\",\n\t\t__entry->mm,\n\t\t__entry->pfn,\n\t\t__entry->writable,\n\t\t__entry->referenced,\n\t\t__entry->none_or_zero,\n\t\t__print_symbolic(__entry->status, SCAN_STATUS),\n\t\t__entry->unmapped)\n);\n\nTRACE_EVENT(mm_collapse_huge_page,\n\n\tTP_PROTO(struct mm_struct *mm, int isolated, int status),\n\n\tTP_ARGS(mm, isolated, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct mm_struct *, mm)\n\t\t__field(int, isolated)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->mm = mm;\n\t\t__entry->isolated = isolated;\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(\"mm=%p, isolated=%d, status=%s\",\n\t\t__entry->mm,\n\t\t__entry->isolated,\n\t\t__print_symbolic(__entry->status, SCAN_STATUS))\n);\n\nTRACE_EVENT(mm_collapse_huge_page_isolate,\n\n\tTP_PROTO(struct page *page, int none_or_zero,\n\t\t int referenced, bool  writable, int status),\n\n\tTP_ARGS(page, none_or_zero, referenced, writable, status),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, pfn)\n\t\t__field(int, none_or_zero)\n\t\t__field(int, referenced)\n\t\t__field(bool, writable)\n\t\t__field(int, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->pfn = page ? page_to_pfn(page) : -1;\n\t\t__entry->none_or_zero = none_or_zero;\n\t\t__entry->referenced = referenced;\n\t\t__entry->writable = writable;\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(\"scan_pfn=0x%lx, none_or_zero=%d, referenced=%d, writable=%d, status=%s\",\n\t\t__entry->pfn,\n\t\t__entry->none_or_zero,\n\t\t__entry->referenced,\n\t\t__entry->writable,\n\t\t__print_symbolic(__entry->status, SCAN_STATUS))\n);\n\nTRACE_EVENT(mm_collapse_huge_page_swapin,\n\n\tTP_PROTO(struct mm_struct *mm, int swapped_in, int referenced, int ret),\n\n\tTP_ARGS(mm, swapped_in, referenced, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct mm_struct *, mm)\n\t\t__field(int, swapped_in)\n\t\t__field(int, referenced)\n\t\t__field(int, ret)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->mm = mm;\n\t\t__entry->swapped_in = swapped_in;\n\t\t__entry->referenced = referenced;\n\t\t__entry->ret = ret;\n\t),\n\n\tTP_printk(\"mm=%p, swapped_in=%d, referenced=%d, ret=%d\",\n\t\t__entry->mm,\n\t\t__entry->swapped_in,\n\t\t__entry->referenced,\n\t\t__entry->ret)\n);\n\nTRACE_EVENT(mm_khugepaged_scan_file,\n\n\tTP_PROTO(struct mm_struct *mm, struct page *page, struct file *file,\n\t\t int present, int swap, int result),\n\n\tTP_ARGS(mm, page, file, present, swap, result),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct mm_struct *, mm)\n\t\t__field(unsigned long, pfn)\n\t\t__string(filename, file->f_path.dentry->d_iname)\n\t\t__field(int, present)\n\t\t__field(int, swap)\n\t\t__field(int, result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->mm = mm;\n\t\t__entry->pfn = page ? page_to_pfn(page) : -1;\n\t\t__assign_str(filename, file->f_path.dentry->d_iname);\n\t\t__entry->present = present;\n\t\t__entry->swap = swap;\n\t\t__entry->result = result;\n\t),\n\n\tTP_printk(\"mm=%p, scan_pfn=0x%lx, filename=%s, present=%d, swap=%d, result=%s\",\n\t\t__entry->mm,\n\t\t__entry->pfn,\n\t\t__get_str(filename),\n\t\t__entry->present,\n\t\t__entry->swap,\n\t\t__print_symbolic(__entry->result, SCAN_STATUS))\n);\n\nTRACE_EVENT(mm_khugepaged_collapse_file,\n\tTP_PROTO(struct mm_struct *mm, struct page *hpage, pgoff_t index,\n\t\t\tbool is_shmem, unsigned long addr, struct file *file,\n\t\t\tint nr, int result),\n\tTP_ARGS(mm, hpage, index, addr, is_shmem, file, nr, result),\n\tTP_STRUCT__entry(\n\t\t__field(struct mm_struct *, mm)\n\t\t__field(unsigned long, hpfn)\n\t\t__field(pgoff_t, index)\n\t\t__field(unsigned long, addr)\n\t\t__field(bool, is_shmem)\n\t\t__string(filename, file->f_path.dentry->d_iname)\n\t\t__field(int, nr)\n\t\t__field(int, result)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->mm = mm;\n\t\t__entry->hpfn = hpage ? page_to_pfn(hpage) : -1;\n\t\t__entry->index = index;\n\t\t__entry->addr = addr;\n\t\t__entry->is_shmem = is_shmem;\n\t\t__assign_str(filename, file->f_path.dentry->d_iname);\n\t\t__entry->nr = nr;\n\t\t__entry->result = result;\n\t),\n\n\tTP_printk(\"mm=%p, hpage_pfn=0x%lx, index=%ld, addr=%ld, is_shmem=%d, filename=%s, nr=%d, result=%s\",\n\t\t__entry->mm,\n\t\t__entry->hpfn,\n\t\t__entry->index,\n\t\t__entry->addr,\n\t\t__entry->is_shmem,\n\t\t__get_str(filename),\n\t\t__entry->nr,\n\t\t__print_symbolic(__entry->result, SCAN_STATUS))\n);\n\n#endif  \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}