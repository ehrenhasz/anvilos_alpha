{
  "module_name": "target.h",
  "hash_id": "84b61617962ae89567ad473a6f6e40493989b853750e12e8a47bbf14716ff62d",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/target.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM target\n\n#if !defined(_TRACE_TARGET_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_TARGET_H\n\n#include <linux/tracepoint.h>\n#include <linux/trace_seq.h>\n#include <scsi/scsi_proto.h>\n#include <scsi/scsi_tcq.h>\n#include <target/target_core_base.h>\n\n \n#define scsi_opcode_name(opcode)\t{ opcode, #opcode }\n#define show_opcode_name(val)\t\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\tscsi_opcode_name(TEST_UNIT_READY),\t\t\\\n\t\tscsi_opcode_name(REZERO_UNIT),\t\t\t\\\n\t\tscsi_opcode_name(REQUEST_SENSE),\t\t\\\n\t\tscsi_opcode_name(FORMAT_UNIT),\t\t\t\\\n\t\tscsi_opcode_name(READ_BLOCK_LIMITS),\t\t\\\n\t\tscsi_opcode_name(REASSIGN_BLOCKS),\t\t\\\n\t\tscsi_opcode_name(INITIALIZE_ELEMENT_STATUS),\t\\\n\t\tscsi_opcode_name(READ_6),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_6),\t\t\t\\\n\t\tscsi_opcode_name(SEEK_6),\t\t\t\\\n\t\tscsi_opcode_name(READ_REVERSE),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_FILEMARKS),\t\t\\\n\t\tscsi_opcode_name(SPACE),\t\t\t\\\n\t\tscsi_opcode_name(INQUIRY),\t\t\t\\\n\t\tscsi_opcode_name(RECOVER_BUFFERED_DATA),\t\\\n\t\tscsi_opcode_name(MODE_SELECT),\t\t\t\\\n\t\tscsi_opcode_name(RESERVE),\t\t\t\\\n\t\tscsi_opcode_name(RELEASE),\t\t\t\\\n\t\tscsi_opcode_name(COPY),\t\t\t\t\\\n\t\tscsi_opcode_name(ERASE),\t\t\t\\\n\t\tscsi_opcode_name(MODE_SENSE),\t\t\t\\\n\t\tscsi_opcode_name(START_STOP),\t\t\t\\\n\t\tscsi_opcode_name(RECEIVE_DIAGNOSTIC),\t\t\\\n\t\tscsi_opcode_name(SEND_DIAGNOSTIC),\t\t\\\n\t\tscsi_opcode_name(ALLOW_MEDIUM_REMOVAL),\t\t\\\n\t\tscsi_opcode_name(SET_WINDOW),\t\t\t\\\n\t\tscsi_opcode_name(READ_CAPACITY),\t\t\\\n\t\tscsi_opcode_name(READ_10),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_10),\t\t\t\\\n\t\tscsi_opcode_name(SEEK_10),\t\t\t\\\n\t\tscsi_opcode_name(POSITION_TO_ELEMENT),\t\t\\\n\t\tscsi_opcode_name(WRITE_VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_HIGH),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_EQUAL),\t\t\t\\\n\t\tscsi_opcode_name(SEARCH_LOW),\t\t\t\\\n\t\tscsi_opcode_name(SET_LIMITS),\t\t\t\\\n\t\tscsi_opcode_name(PRE_FETCH),\t\t\t\\\n\t\tscsi_opcode_name(READ_POSITION),\t\t\\\n\t\tscsi_opcode_name(SYNCHRONIZE_CACHE),\t\t\\\n\t\tscsi_opcode_name(LOCK_UNLOCK_CACHE),\t\t\\\n\t\tscsi_opcode_name(READ_DEFECT_DATA),\t\t\\\n\t\tscsi_opcode_name(MEDIUM_SCAN),\t\t\t\\\n\t\tscsi_opcode_name(COMPARE),\t\t\t\\\n\t\tscsi_opcode_name(COPY_VERIFY),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_BUFFER),\t\t\t\\\n\t\tscsi_opcode_name(READ_BUFFER),\t\t\t\\\n\t\tscsi_opcode_name(UPDATE_BLOCK),\t\t\t\\\n\t\tscsi_opcode_name(READ_LONG),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_LONG),\t\t\t\\\n\t\tscsi_opcode_name(CHANGE_DEFINITION),\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME),\t\t\t\\\n\t\tscsi_opcode_name(UNMAP),\t\t\t\\\n\t\tscsi_opcode_name(READ_TOC),\t\t\t\\\n\t\tscsi_opcode_name(LOG_SELECT),\t\t\t\\\n\t\tscsi_opcode_name(LOG_SENSE),\t\t\t\\\n\t\tscsi_opcode_name(XDWRITEREAD_10),\t\t\\\n\t\tscsi_opcode_name(MODE_SELECT_10),\t\t\\\n\t\tscsi_opcode_name(RESERVE_10),\t\t\t\\\n\t\tscsi_opcode_name(RELEASE_10),\t\t\t\\\n\t\tscsi_opcode_name(MODE_SENSE_10),\t\t\\\n\t\tscsi_opcode_name(PERSISTENT_RESERVE_IN),\t\\\n\t\tscsi_opcode_name(PERSISTENT_RESERVE_OUT),\t\\\n\t\tscsi_opcode_name(VARIABLE_LENGTH_CMD),\t\t\\\n\t\tscsi_opcode_name(REPORT_LUNS),\t\t\t\\\n\t\tscsi_opcode_name(MAINTENANCE_IN),\t\t\\\n\t\tscsi_opcode_name(MAINTENANCE_OUT),\t\t\\\n\t\tscsi_opcode_name(MOVE_MEDIUM),\t\t\t\\\n\t\tscsi_opcode_name(EXCHANGE_MEDIUM),\t\t\\\n\t\tscsi_opcode_name(READ_12),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_12),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_VERIFY_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_HIGH_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_EQUAL_12),\t\t\\\n\t\tscsi_opcode_name(SEARCH_LOW_12),\t\t\\\n\t\tscsi_opcode_name(READ_ELEMENT_STATUS),\t\t\\\n\t\tscsi_opcode_name(SEND_VOLUME_TAG),\t\t\\\n\t\tscsi_opcode_name(WRITE_LONG_2),\t\t\t\\\n\t\tscsi_opcode_name(READ_16),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_16),\t\t\t\\\n\t\tscsi_opcode_name(VERIFY_16),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME_16),\t\t\\\n\t\tscsi_opcode_name(SERVICE_ACTION_IN_16),\t\t\\\n\t\tscsi_opcode_name(SAI_READ_CAPACITY_16),\t\t\\\n\t\tscsi_opcode_name(SAI_GET_LBA_STATUS),\t\t\\\n\t\tscsi_opcode_name(MI_REPORT_TARGET_PGS),\t\t\\\n\t\tscsi_opcode_name(MO_SET_TARGET_PGS),\t\t\\\n\t\tscsi_opcode_name(READ_32),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_32),\t\t\t\\\n\t\tscsi_opcode_name(WRITE_SAME_32),\t\t\\\n\t\tscsi_opcode_name(ATA_16),\t\t\t\\\n\t\tscsi_opcode_name(ATA_12))\n\n#define show_task_attribute_name(val)\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\t{ TCM_SIMPLE_TAG,\t\"SIMPLE\"\t},\t\\\n\t\t{ TCM_HEAD_TAG,\t\t\"HEAD\"\t\t},\t\\\n\t\t{ TCM_ORDERED_TAG,\t\"ORDERED\"\t},\t\\\n\t\t{ TCM_ACA_TAG,\t\t\"ACA\"\t\t} )\n\n#define show_scsi_status_name(val)\t\t\t\t\\\n\t__print_symbolic(val,\t\t\t\t\t\\\n\t\t{ SAM_STAT_GOOD,\t\"GOOD\" },\t\t\\\n\t\t{ SAM_STAT_CHECK_CONDITION, \"CHECK CONDITION\" }, \\\n\t\t{ SAM_STAT_CONDITION_MET, \"CONDITION MET\" },\t\\\n\t\t{ SAM_STAT_BUSY,\t\"BUSY\" },\t\t\\\n\t\t{ SAM_STAT_INTERMEDIATE, \"INTERMEDIATE\" },\t\\\n\t\t{ SAM_STAT_INTERMEDIATE_CONDITION_MET, \"INTERMEDIATE CONDITION MET\" }, \\\n\t\t{ SAM_STAT_RESERVATION_CONFLICT, \"RESERVATION CONFLICT\" }, \\\n\t\t{ SAM_STAT_COMMAND_TERMINATED, \"COMMAND TERMINATED\" }, \\\n\t\t{ SAM_STAT_TASK_SET_FULL, \"TASK SET FULL\" },\t\\\n\t\t{ SAM_STAT_ACA_ACTIVE, \"ACA ACTIVE\" },\t\t\\\n\t\t{ SAM_STAT_TASK_ABORTED, \"TASK ABORTED\" } )\n\nTRACE_EVENT(target_sequencer_start,\n\n\tTP_PROTO(struct se_cmd *cmd),\n\n\tTP_ARGS(cmd),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\tunpacked_lun\t)\n\t\t__field( unsigned long long,\ttag\t)\n\t\t__field( unsigned int,\topcode\t\t)\n\t\t__field( unsigned int,\tdata_length\t)\n\t\t__field( unsigned int,\ttask_attribute  )\n\t\t__field( unsigned char,\tcontrol\t\t)\n\t\t__array( unsigned char,\tcdb, TCM_MAX_COMMAND_SIZE\t)\n\t\t__string( initiator,\tcmd->se_sess->se_node_acl->initiatorname\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->unpacked_lun\t= cmd->orig_fe_lun;\n\t\t__entry->tag\t\t= cmd->tag;\n\t\t__entry->opcode\t\t= cmd->t_task_cdb[0];\n\t\t__entry->data_length\t= cmd->data_length;\n\t\t__entry->task_attribute\t= cmd->sam_task_attr;\n\t\t__entry->control\t= scsi_command_control(cmd->t_task_cdb);\n\t\tmemcpy(__entry->cdb, cmd->t_task_cdb, TCM_MAX_COMMAND_SIZE);\n\t\t__assign_str(initiator, cmd->se_sess->se_node_acl->initiatorname);\n\t),\n\n\tTP_printk(\"%s -> LUN %03u tag %#llx %s data_length %6u  CDB %s  (TA:%s C:%02x)\",\n\t\t  __get_str(initiator), __entry->unpacked_lun,\n\t\t  __entry->tag, show_opcode_name(__entry->opcode),\n\t\t  __entry->data_length, __print_hex(__entry->cdb, 16),\n\t\t  show_task_attribute_name(__entry->task_attribute),\n\t\t  __entry->control\n\t)\n);\n\nTRACE_EVENT(target_cmd_complete,\n\n\tTP_PROTO(struct se_cmd *cmd),\n\n\tTP_ARGS(cmd),\n\n\tTP_STRUCT__entry(\n\t\t__field( unsigned int,\tunpacked_lun\t)\n\t\t__field( unsigned long long,\ttag\t)\n\t\t__field( unsigned int,\topcode\t\t)\n\t\t__field( unsigned int,\tdata_length\t)\n\t\t__field( unsigned int,\ttask_attribute  )\n\t\t__field( unsigned char,\tcontrol\t\t)\n\t\t__field( unsigned char,\tscsi_status\t)\n\t\t__field( unsigned char,\tsense_length\t)\n\t\t__array( unsigned char,\tcdb, TCM_MAX_COMMAND_SIZE\t)\n\t\t__array( unsigned char,\tsense_data, 18\t)\n\t\t__string(initiator,\tcmd->se_sess->se_node_acl->initiatorname)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->unpacked_lun\t= cmd->orig_fe_lun;\n\t\t__entry->tag\t\t= cmd->tag;\n\t\t__entry->opcode\t\t= cmd->t_task_cdb[0];\n\t\t__entry->data_length\t= cmd->data_length;\n\t\t__entry->task_attribute\t= cmd->sam_task_attr;\n\t\t__entry->control\t= scsi_command_control(cmd->t_task_cdb);\n\t\t__entry->scsi_status\t= cmd->scsi_status;\n\t\t__entry->sense_length\t= cmd->scsi_status == SAM_STAT_CHECK_CONDITION ?\n\t\t\tmin(18, ((u8 *) cmd->sense_buffer)[SPC_ADD_SENSE_LEN_OFFSET] + 8) : 0;\n\t\tmemcpy(__entry->cdb, cmd->t_task_cdb, TCM_MAX_COMMAND_SIZE);\n\t\tmemcpy(__entry->sense_data, cmd->sense_buffer, __entry->sense_length);\n\t\t__assign_str(initiator, cmd->se_sess->se_node_acl->initiatorname);\n\t),\n\n\tTP_printk(\"%s <- LUN %03u tag %#llx status %s (sense len %d%s%s)  %s data_length %6u  CDB %s  (TA:%s C:%02x)\",\n\t\t  __get_str(initiator), __entry->unpacked_lun,\n\t\t  __entry->tag,\n\t\t  show_scsi_status_name(__entry->scsi_status),\n\t\t  __entry->sense_length, __entry->sense_length ? \" / \" : \"\",\n\t\t  __print_hex(__entry->sense_data, __entry->sense_length),\n\t\t  show_opcode_name(__entry->opcode),\n\t\t  __entry->data_length, __print_hex(__entry->cdb, 16),\n\t\t  show_task_attribute_name(__entry->task_attribute),\n\t\t  __entry->control\n\t)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}