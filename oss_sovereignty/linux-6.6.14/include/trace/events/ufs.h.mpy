{
  "module_name": "ufs.h",
  "hash_id": "06de68e0c11826b338248ebd955131961d860945a4a63c00689fd8a1e92dccf3",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/ufs.h",
  "human_readable_source": " \n \n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ufs\n\n#if !defined(_TRACE_UFS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_UFS_H\n\n#include <linux/tracepoint.h>\n\n#define str_opcode(opcode)\t\t\t\t\t\t\\\n\t__print_symbolic(opcode,\t\t\t\t\t\\\n\t\t{ WRITE_16,\t\t\"WRITE_16\" },\t\t\t\\\n\t\t{ WRITE_10,\t\t\"WRITE_10\" },\t\t\t\\\n\t\t{ READ_16,\t\t\"READ_16\" },\t\t\t\\\n\t\t{ READ_10,\t\t\"READ_10\" },\t\t\t\\\n\t\t{ SYNCHRONIZE_CACHE,\t\"SYNC\" },\t\t\t\\\n\t\t{ UNMAP,\t\t\"UNMAP\" })\n\n#define UFS_LINK_STATES\t\t\t\t\t\t\\\n\tEM(UIC_LINK_OFF_STATE,\t\t\"UIC_LINK_OFF_STATE\")\t\t\\\n\tEM(UIC_LINK_ACTIVE_STATE,\t\"UIC_LINK_ACTIVE_STATE\")\t\\\n\tEMe(UIC_LINK_HIBERN8_STATE,\t\"UIC_LINK_HIBERN8_STATE\")\n\n#define UFS_PWR_MODES\t\t\t\t\t\t\t\\\n\tEM(UFS_ACTIVE_PWR_MODE,\t\t\"UFS_ACTIVE_PWR_MODE\")\t\t\\\n\tEM(UFS_SLEEP_PWR_MODE,\t\t\"UFS_SLEEP_PWR_MODE\")\t\t\\\n\tEM(UFS_POWERDOWN_PWR_MODE,\t\"UFS_POWERDOWN_PWR_MODE\")\t\\\n\tEMe(UFS_DEEPSLEEP_PWR_MODE,\t\"UFS_DEEPSLEEP_PWR_MODE\")\n\n#define UFSCHD_CLK_GATING_STATES\t\t\t\t\\\n\tEM(CLKS_OFF,\t\t\t\"CLKS_OFF\")\t\t\\\n\tEM(CLKS_ON,\t\t\t\"CLKS_ON\")\t\t\\\n\tEM(REQ_CLKS_OFF,\t\t\"REQ_CLKS_OFF\")\t\t\\\n\tEMe(REQ_CLKS_ON,\t\t\"REQ_CLKS_ON\")\n\n#define UFS_CMD_TRACE_STRINGS\t\t\t\t\t\\\n\tEM(UFS_CMD_SEND,\t\"send_req\")\t\t\t\\\n\tEM(UFS_CMD_COMP,\t\"complete_rsp\")\t\t\t\\\n\tEM(UFS_DEV_COMP,\t\"dev_complete\")\t\t\t\\\n\tEM(UFS_QUERY_SEND,\t\"query_send\")\t\t\t\\\n\tEM(UFS_QUERY_COMP,\t\"query_complete\")\t\t\\\n\tEM(UFS_QUERY_ERR,\t\"query_complete_err\")\t\t\\\n\tEM(UFS_TM_SEND,\t\t\"tm_send\")\t\t\t\\\n\tEM(UFS_TM_COMP,\t\t\"tm_complete\")\t\t\t\\\n\tEMe(UFS_TM_ERR,\t\t\"tm_complete_err\")\n\n#define UFS_CMD_TRACE_TSF_TYPES\t\t\t\t\t\\\n\tEM(UFS_TSF_CDB,\t\t\"CDB\")\t\t                \\\n\tEM(UFS_TSF_OSF,\t\t\"OSF\")\t\t                \\\n\tEM(UFS_TSF_TM_INPUT,\t\"TM_INPUT\")                     \\\n\tEMe(UFS_TSF_TM_OUTPUT,\t\"TM_OUTPUT\")\n\n \n#undef EM\n#undef EMe\n#define EM(a, b)\tTRACE_DEFINE_ENUM(a);\n#define EMe(a, b)\tTRACE_DEFINE_ENUM(a);\n\nUFS_LINK_STATES;\nUFS_PWR_MODES;\nUFSCHD_CLK_GATING_STATES;\nUFS_CMD_TRACE_STRINGS\nUFS_CMD_TRACE_TSF_TYPES\n\n \n#undef EM\n#undef EMe\n#define EM(a, b)\t{a, b},\n#define EMe(a, b)\t{a, b}\n\n#define show_ufs_cmd_trace_str(str_t)\t\\\n\t\t\t\t__print_symbolic(str_t, UFS_CMD_TRACE_STRINGS)\n#define show_ufs_cmd_trace_tsf(tsf)\t\\\n\t\t\t\t__print_symbolic(tsf, UFS_CMD_TRACE_TSF_TYPES)\n\nTRACE_EVENT(ufshcd_clk_gating,\n\n\tTP_PROTO(const char *dev_name, int state),\n\n\tTP_ARGS(dev_name, state),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__field(int, state)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->state = state;\n\t),\n\n\tTP_printk(\"%s: gating state changed to %s\",\n\t\t__get_str(dev_name),\n\t\t__print_symbolic(__entry->state, UFSCHD_CLK_GATING_STATES))\n);\n\nTRACE_EVENT(ufshcd_clk_scaling,\n\n\tTP_PROTO(const char *dev_name, const char *state, const char *clk,\n\t\tu32 prev_state, u32 curr_state),\n\n\tTP_ARGS(dev_name, state, clk, prev_state, curr_state),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__string(state, state)\n\t\t__string(clk, clk)\n\t\t__field(u32, prev_state)\n\t\t__field(u32, curr_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__assign_str(state, state);\n\t\t__assign_str(clk, clk);\n\t\t__entry->prev_state = prev_state;\n\t\t__entry->curr_state = curr_state;\n\t),\n\n\tTP_printk(\"%s: %s %s from %u to %u Hz\",\n\t\t__get_str(dev_name), __get_str(state), __get_str(clk),\n\t\t__entry->prev_state, __entry->curr_state)\n);\n\nTRACE_EVENT(ufshcd_auto_bkops_state,\n\n\tTP_PROTO(const char *dev_name, const char *state),\n\n\tTP_ARGS(dev_name, state),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__string(state, state)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__assign_str(state, state);\n\t),\n\n\tTP_printk(\"%s: auto bkops - %s\",\n\t\t__get_str(dev_name), __get_str(state))\n);\n\nDECLARE_EVENT_CLASS(ufshcd_profiling_template,\n\tTP_PROTO(const char *dev_name, const char *profile_info, s64 time_us,\n\t\t int err),\n\n\tTP_ARGS(dev_name, profile_info, time_us, err),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__string(profile_info, profile_info)\n\t\t__field(s64, time_us)\n\t\t__field(int, err)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__assign_str(profile_info, profile_info);\n\t\t__entry->time_us = time_us;\n\t\t__entry->err = err;\n\t),\n\n\tTP_printk(\"%s: %s: took %lld usecs, err %d\",\n\t\t__get_str(dev_name), __get_str(profile_info),\n\t\t__entry->time_us, __entry->err)\n);\n\nDEFINE_EVENT(ufshcd_profiling_template, ufshcd_profile_hibern8,\n\tTP_PROTO(const char *dev_name, const char *profile_info, s64 time_us,\n\t\t int err),\n\tTP_ARGS(dev_name, profile_info, time_us, err));\n\nDEFINE_EVENT(ufshcd_profiling_template, ufshcd_profile_clk_gating,\n\tTP_PROTO(const char *dev_name, const char *profile_info, s64 time_us,\n\t\t int err),\n\tTP_ARGS(dev_name, profile_info, time_us, err));\n\nDEFINE_EVENT(ufshcd_profiling_template, ufshcd_profile_clk_scaling,\n\tTP_PROTO(const char *dev_name, const char *profile_info, s64 time_us,\n\t\t int err),\n\tTP_ARGS(dev_name, profile_info, time_us, err));\n\nDECLARE_EVENT_CLASS(ufshcd_template,\n\tTP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t int dev_state, int link_state),\n\n\tTP_ARGS(dev_name, err, usecs, dev_state, link_state),\n\n\tTP_STRUCT__entry(\n\t\t__field(s64, usecs)\n\t\t__field(int, err)\n\t\t__string(dev_name, dev_name)\n\t\t__field(int, dev_state)\n\t\t__field(int, link_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->usecs = usecs;\n\t\t__entry->err = err;\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->dev_state = dev_state;\n\t\t__entry->link_state = link_state;\n\t),\n\n\tTP_printk(\n\t\t\"%s: took %lld usecs, dev_state: %s, link_state: %s, err %d\",\n\t\t__get_str(dev_name),\n\t\t__entry->usecs,\n\t\t__print_symbolic(__entry->dev_state, UFS_PWR_MODES),\n\t\t__print_symbolic(__entry->link_state, UFS_LINK_STATES),\n\t\t__entry->err\n\t)\n);\n\nDEFINE_EVENT(ufshcd_template, ufshcd_system_suspend,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_system_resume,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_runtime_suspend,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_runtime_resume,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_init,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_wl_suspend,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_wl_resume,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_wl_runtime_suspend,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nDEFINE_EVENT(ufshcd_template, ufshcd_wl_runtime_resume,\n\t     TP_PROTO(const char *dev_name, int err, s64 usecs,\n\t\t      int dev_state, int link_state),\n\t     TP_ARGS(dev_name, err, usecs, dev_state, link_state));\n\nTRACE_EVENT(ufshcd_command,\n\tTP_PROTO(const char *dev_name, enum ufs_trace_str_t str_t,\n\t\t unsigned int tag, u32 doorbell, u32 hwq_id, int transfer_len,\n\t\t u32 intr, u64 lba, u8 opcode, u8 group_id),\n\n\tTP_ARGS(dev_name, str_t, tag, doorbell, hwq_id, transfer_len,\n\t\t\tintr, lba, opcode, group_id),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__field(enum ufs_trace_str_t, str_t)\n\t\t__field(unsigned int, tag)\n\t\t__field(u32, doorbell)\n\t\t__field(u32, hwq_id)\n\t\t__field(u32, intr)\n\t\t__field(u64, lba)\n\t\t__field(int, transfer_len)\n\t\t__field(u8, opcode)\n\t\t__field(u8, group_id)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->str_t = str_t;\n\t\t__entry->tag = tag;\n\t\t__entry->doorbell = doorbell;\n\t\t__entry->hwq_id = hwq_id;\n\t\t__entry->intr = intr;\n\t\t__entry->lba = lba;\n\t\t__entry->transfer_len = transfer_len;\n\t\t__entry->opcode = opcode;\n\t\t__entry->group_id = group_id;\n\t),\n\n\tTP_printk(\n\t\t\"%s: %s: tag: %u, DB: 0x%x, size: %d, IS: %u, LBA: %llu, opcode: 0x%x (%s), group_id: 0x%x, hwq_id: %d\",\n\t\tshow_ufs_cmd_trace_str(__entry->str_t), __get_str(dev_name),\n\t\t__entry->tag, __entry->doorbell, __entry->transfer_len, __entry->intr,\n\t\t__entry->lba, (u32)__entry->opcode, str_opcode(__entry->opcode),\n\t\t(u32)__entry->group_id, __entry->hwq_id\n\t)\n);\n\nTRACE_EVENT(ufshcd_uic_command,\n\tTP_PROTO(const char *dev_name, enum ufs_trace_str_t str_t, u32 cmd,\n\t\t u32 arg1, u32 arg2, u32 arg3),\n\n\tTP_ARGS(dev_name, str_t, cmd, arg1, arg2, arg3),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__field(enum ufs_trace_str_t, str_t)\n\t\t__field(u32, cmd)\n\t\t__field(u32, arg1)\n\t\t__field(u32, arg2)\n\t\t__field(u32, arg3)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->str_t = str_t;\n\t\t__entry->cmd = cmd;\n\t\t__entry->arg1 = arg1;\n\t\t__entry->arg2 = arg2;\n\t\t__entry->arg3 = arg3;\n\t),\n\n\tTP_printk(\n\t\t\"%s: %s: cmd: 0x%x, arg1: 0x%x, arg2: 0x%x, arg3: 0x%x\",\n\t\tshow_ufs_cmd_trace_str(__entry->str_t), __get_str(dev_name),\n\t\t__entry->cmd, __entry->arg1, __entry->arg2, __entry->arg3\n\t)\n);\n\nTRACE_EVENT(ufshcd_upiu,\n\tTP_PROTO(const char *dev_name, enum ufs_trace_str_t str_t, void *hdr,\n\t\t void *tsf, enum ufs_trace_tsf_t tsf_t),\n\n\tTP_ARGS(dev_name, str_t, hdr, tsf, tsf_t),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__field(enum ufs_trace_str_t, str_t)\n\t\t__array(unsigned char, hdr, 12)\n\t\t__array(unsigned char, tsf, 16)\n\t\t__field(enum ufs_trace_tsf_t, tsf_t)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->str_t = str_t;\n\t\tmemcpy(__entry->hdr, hdr, sizeof(__entry->hdr));\n\t\tmemcpy(__entry->tsf, tsf, sizeof(__entry->tsf));\n\t\t__entry->tsf_t = tsf_t;\n\t),\n\n\tTP_printk(\n\t\t\"%s: %s: HDR:%s, %s:%s\",\n\t\tshow_ufs_cmd_trace_str(__entry->str_t), __get_str(dev_name),\n\t\t__print_hex(__entry->hdr, sizeof(__entry->hdr)),\n\t\tshow_ufs_cmd_trace_tsf(__entry->tsf_t),\n\t\t__print_hex(__entry->tsf, sizeof(__entry->tsf))\n\t)\n);\n\nTRACE_EVENT(ufshcd_exception_event,\n\n\tTP_PROTO(const char *dev_name, u16 status),\n\n\tTP_ARGS(dev_name, status),\n\n\tTP_STRUCT__entry(\n\t\t__string(dev_name, dev_name)\n\t\t__field(u16, status)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(dev_name, dev_name);\n\t\t__entry->status = status;\n\t),\n\n\tTP_printk(\"%s: status 0x%x\",\n\t\t__get_str(dev_name), __entry->status\n\t)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}