{
  "module_name": "vmscan.h",
  "hash_id": "d1013f88c26e3936020e65964d0b692bf92be99195b11ce0cd0f02ea1a997187",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/vmscan.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM vmscan\n\n#if !defined(_TRACE_VMSCAN_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_VMSCAN_H\n\n#include <linux/types.h>\n#include <linux/tracepoint.h>\n#include <linux/mm.h>\n#include <linux/memcontrol.h>\n#include <trace/events/mmflags.h>\n\n#define RECLAIM_WB_ANON\t\t0x0001u\n#define RECLAIM_WB_FILE\t\t0x0002u\n#define RECLAIM_WB_MIXED\t0x0010u\n#define RECLAIM_WB_SYNC\t\t0x0004u  \n#define RECLAIM_WB_ASYNC\t0x0008u\n#define RECLAIM_WB_LRU\t\t(RECLAIM_WB_ANON|RECLAIM_WB_FILE)\n\n#define show_reclaim_flags(flags)\t\t\t\t\\\n\t(flags) ? __print_flags(flags, \"|\",\t\t\t\\\n\t\t{RECLAIM_WB_ANON,\t\"RECLAIM_WB_ANON\"},\t\\\n\t\t{RECLAIM_WB_FILE,\t\"RECLAIM_WB_FILE\"},\t\\\n\t\t{RECLAIM_WB_MIXED,\t\"RECLAIM_WB_MIXED\"},\t\\\n\t\t{RECLAIM_WB_SYNC,\t\"RECLAIM_WB_SYNC\"},\t\\\n\t\t{RECLAIM_WB_ASYNC,\t\"RECLAIM_WB_ASYNC\"}\t\\\n\t\t) : \"RECLAIM_WB_NONE\"\n\n#define _VMSCAN_THROTTLE_WRITEBACK\t(1 << VMSCAN_THROTTLE_WRITEBACK)\n#define _VMSCAN_THROTTLE_ISOLATED\t(1 << VMSCAN_THROTTLE_ISOLATED)\n#define _VMSCAN_THROTTLE_NOPROGRESS\t(1 << VMSCAN_THROTTLE_NOPROGRESS)\n#define _VMSCAN_THROTTLE_CONGESTED\t(1 << VMSCAN_THROTTLE_CONGESTED)\n\n#define show_throttle_flags(flags)\t\t\t\t\t\t\\\n\t(flags) ? __print_flags(flags, \"|\",\t\t\t\t\t\\\n\t\t{_VMSCAN_THROTTLE_WRITEBACK,\t\"VMSCAN_THROTTLE_WRITEBACK\"},\t\\\n\t\t{_VMSCAN_THROTTLE_ISOLATED,\t\"VMSCAN_THROTTLE_ISOLATED\"},\t\\\n\t\t{_VMSCAN_THROTTLE_NOPROGRESS,\t\"VMSCAN_THROTTLE_NOPROGRESS\"},\t\\\n\t\t{_VMSCAN_THROTTLE_CONGESTED,\t\"VMSCAN_THROTTLE_CONGESTED\"}\t\\\n\t\t) : \"VMSCAN_THROTTLE_NONE\"\n\n\n#define trace_reclaim_flags(file) ( \\\n\t(file ? RECLAIM_WB_FILE : RECLAIM_WB_ANON) | \\\n\t(RECLAIM_WB_ASYNC) \\\n\t)\n\nTRACE_EVENT(mm_vmscan_kswapd_sleep,\n\n\tTP_PROTO(int nid),\n\n\tTP_ARGS(nid),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tint,\tnid\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid\t= nid;\n\t),\n\n\tTP_printk(\"nid=%d\", __entry->nid)\n);\n\nTRACE_EVENT(mm_vmscan_kswapd_wake,\n\n\tTP_PROTO(int nid, int zid, int order),\n\n\tTP_ARGS(nid, zid, order),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tint,\tnid\t)\n\t\t__field(\tint,\tzid\t)\n\t\t__field(\tint,\torder\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid\t= nid;\n\t\t__entry->zid    = zid;\n\t\t__entry->order\t= order;\n\t),\n\n\tTP_printk(\"nid=%d order=%d\",\n\t\t__entry->nid,\n\t\t__entry->order)\n);\n\nTRACE_EVENT(mm_vmscan_wakeup_kswapd,\n\n\tTP_PROTO(int nid, int zid, int order, gfp_t gfp_flags),\n\n\tTP_ARGS(nid, zid, order, gfp_flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tint,\tnid\t\t)\n\t\t__field(\tint,\tzid\t\t)\n\t\t__field(\tint,\torder\t\t)\n\t\t__field(\tunsigned long,\tgfp_flags\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid\t\t= nid;\n\t\t__entry->zid\t\t= zid;\n\t\t__entry->order\t\t= order;\n\t\t__entry->gfp_flags\t= (__force unsigned long)gfp_flags;\n\t),\n\n\tTP_printk(\"nid=%d order=%d gfp_flags=%s\",\n\t\t__entry->nid,\n\t\t__entry->order,\n\t\tshow_gfp_flags(__entry->gfp_flags))\n);\n\nDECLARE_EVENT_CLASS(mm_vmscan_direct_reclaim_begin_template,\n\n\tTP_PROTO(int order, gfp_t gfp_flags),\n\n\tTP_ARGS(order, gfp_flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tint,\torder\t\t)\n\t\t__field(\tunsigned long,\tgfp_flags\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->order\t\t= order;\n\t\t__entry->gfp_flags\t= (__force unsigned long)gfp_flags;\n\t),\n\n\tTP_printk(\"order=%d gfp_flags=%s\",\n\t\t__entry->order,\n\t\tshow_gfp_flags(__entry->gfp_flags))\n);\n\nDEFINE_EVENT(mm_vmscan_direct_reclaim_begin_template, mm_vmscan_direct_reclaim_begin,\n\n\tTP_PROTO(int order, gfp_t gfp_flags),\n\n\tTP_ARGS(order, gfp_flags)\n);\n\n#ifdef CONFIG_MEMCG\nDEFINE_EVENT(mm_vmscan_direct_reclaim_begin_template, mm_vmscan_memcg_reclaim_begin,\n\n\tTP_PROTO(int order, gfp_t gfp_flags),\n\n\tTP_ARGS(order, gfp_flags)\n);\n\nDEFINE_EVENT(mm_vmscan_direct_reclaim_begin_template, mm_vmscan_memcg_softlimit_reclaim_begin,\n\n\tTP_PROTO(int order, gfp_t gfp_flags),\n\n\tTP_ARGS(order, gfp_flags)\n);\n#endif  \n\nDECLARE_EVENT_CLASS(mm_vmscan_direct_reclaim_end_template,\n\n\tTP_PROTO(unsigned long nr_reclaimed),\n\n\tTP_ARGS(nr_reclaimed),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tnr_reclaimed\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nr_reclaimed\t= nr_reclaimed;\n\t),\n\n\tTP_printk(\"nr_reclaimed=%lu\", __entry->nr_reclaimed)\n);\n\nDEFINE_EVENT(mm_vmscan_direct_reclaim_end_template, mm_vmscan_direct_reclaim_end,\n\n\tTP_PROTO(unsigned long nr_reclaimed),\n\n\tTP_ARGS(nr_reclaimed)\n);\n\n#ifdef CONFIG_MEMCG\nDEFINE_EVENT(mm_vmscan_direct_reclaim_end_template, mm_vmscan_memcg_reclaim_end,\n\n\tTP_PROTO(unsigned long nr_reclaimed),\n\n\tTP_ARGS(nr_reclaimed)\n);\n\nDEFINE_EVENT(mm_vmscan_direct_reclaim_end_template, mm_vmscan_memcg_softlimit_reclaim_end,\n\n\tTP_PROTO(unsigned long nr_reclaimed),\n\n\tTP_ARGS(nr_reclaimed)\n);\n#endif  \n\nTRACE_EVENT(mm_shrink_slab_start,\n\tTP_PROTO(struct shrinker *shr, struct shrink_control *sc,\n\t\tlong nr_objects_to_shrink, unsigned long cache_items,\n\t\tunsigned long long delta, unsigned long total_scan,\n\t\tint priority),\n\n\tTP_ARGS(shr, sc, nr_objects_to_shrink, cache_items, delta, total_scan,\n\t\tpriority),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct shrinker *, shr)\n\t\t__field(void *, shrink)\n\t\t__field(int, nid)\n\t\t__field(long, nr_objects_to_shrink)\n\t\t__field(unsigned long, gfp_flags)\n\t\t__field(unsigned long, cache_items)\n\t\t__field(unsigned long long, delta)\n\t\t__field(unsigned long, total_scan)\n\t\t__field(int, priority)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->shr = shr;\n\t\t__entry->shrink = shr->scan_objects;\n\t\t__entry->nid = sc->nid;\n\t\t__entry->nr_objects_to_shrink = nr_objects_to_shrink;\n\t\t__entry->gfp_flags = (__force unsigned long)sc->gfp_mask;\n\t\t__entry->cache_items = cache_items;\n\t\t__entry->delta = delta;\n\t\t__entry->total_scan = total_scan;\n\t\t__entry->priority = priority;\n\t),\n\n\tTP_printk(\"%pS %p: nid: %d objects to shrink %ld gfp_flags %s cache items %ld delta %lld total_scan %ld priority %d\",\n\t\t__entry->shrink,\n\t\t__entry->shr,\n\t\t__entry->nid,\n\t\t__entry->nr_objects_to_shrink,\n\t\tshow_gfp_flags(__entry->gfp_flags),\n\t\t__entry->cache_items,\n\t\t__entry->delta,\n\t\t__entry->total_scan,\n\t\t__entry->priority)\n);\n\nTRACE_EVENT(mm_shrink_slab_end,\n\tTP_PROTO(struct shrinker *shr, int nid, int shrinker_retval,\n\t\tlong unused_scan_cnt, long new_scan_cnt, long total_scan),\n\n\tTP_ARGS(shr, nid, shrinker_retval, unused_scan_cnt, new_scan_cnt,\n\t\ttotal_scan),\n\n\tTP_STRUCT__entry(\n\t\t__field(struct shrinker *, shr)\n\t\t__field(int, nid)\n\t\t__field(void *, shrink)\n\t\t__field(long, unused_scan)\n\t\t__field(long, new_scan)\n\t\t__field(int, retval)\n\t\t__field(long, total_scan)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->shr = shr;\n\t\t__entry->nid = nid;\n\t\t__entry->shrink = shr->scan_objects;\n\t\t__entry->unused_scan = unused_scan_cnt;\n\t\t__entry->new_scan = new_scan_cnt;\n\t\t__entry->retval = shrinker_retval;\n\t\t__entry->total_scan = total_scan;\n\t),\n\n\tTP_printk(\"%pS %p: nid: %d unused scan count %ld new scan count %ld total_scan %ld last shrinker return val %d\",\n\t\t__entry->shrink,\n\t\t__entry->shr,\n\t\t__entry->nid,\n\t\t__entry->unused_scan,\n\t\t__entry->new_scan,\n\t\t__entry->total_scan,\n\t\t__entry->retval)\n);\n\nTRACE_EVENT(mm_vmscan_lru_isolate,\n\tTP_PROTO(int highest_zoneidx,\n\t\tint order,\n\t\tunsigned long nr_requested,\n\t\tunsigned long nr_scanned,\n\t\tunsigned long nr_skipped,\n\t\tunsigned long nr_taken,\n\t\tisolate_mode_t isolate_mode,\n\t\tint lru),\n\n\tTP_ARGS(highest_zoneidx, order, nr_requested, nr_scanned, nr_skipped, nr_taken, isolate_mode, lru),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, highest_zoneidx)\n\t\t__field(int, order)\n\t\t__field(unsigned long, nr_requested)\n\t\t__field(unsigned long, nr_scanned)\n\t\t__field(unsigned long, nr_skipped)\n\t\t__field(unsigned long, nr_taken)\n\t\t__field(unsigned int, isolate_mode)\n\t\t__field(int, lru)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->highest_zoneidx = highest_zoneidx;\n\t\t__entry->order = order;\n\t\t__entry->nr_requested = nr_requested;\n\t\t__entry->nr_scanned = nr_scanned;\n\t\t__entry->nr_skipped = nr_skipped;\n\t\t__entry->nr_taken = nr_taken;\n\t\t__entry->isolate_mode = (__force unsigned int)isolate_mode;\n\t\t__entry->lru = lru;\n\t),\n\n\t \n\tTP_printk(\"isolate_mode=%d classzone=%d order=%d nr_requested=%lu nr_scanned=%lu nr_skipped=%lu nr_taken=%lu lru=%s\",\n\t\t__entry->isolate_mode,\n\t\t__entry->highest_zoneidx,\n\t\t__entry->order,\n\t\t__entry->nr_requested,\n\t\t__entry->nr_scanned,\n\t\t__entry->nr_skipped,\n\t\t__entry->nr_taken,\n\t\t__print_symbolic(__entry->lru, LRU_NAMES))\n);\n\nTRACE_EVENT(mm_vmscan_write_folio,\n\n\tTP_PROTO(struct folio *folio),\n\n\tTP_ARGS(folio),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, pfn)\n\t\t__field(int, reclaim_flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->pfn = folio_pfn(folio);\n\t\t__entry->reclaim_flags = trace_reclaim_flags(\n\t\t\t\t\t\tfolio_is_file_lru(folio));\n\t),\n\n\tTP_printk(\"page=%p pfn=0x%lx flags=%s\",\n\t\tpfn_to_page(__entry->pfn),\n\t\t__entry->pfn,\n\t\tshow_reclaim_flags(__entry->reclaim_flags))\n);\n\nTRACE_EVENT(mm_vmscan_lru_shrink_inactive,\n\n\tTP_PROTO(int nid,\n\t\tunsigned long nr_scanned, unsigned long nr_reclaimed,\n\t\tstruct reclaim_stat *stat, int priority, int file),\n\n\tTP_ARGS(nid, nr_scanned, nr_reclaimed, stat, priority, file),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(unsigned long, nr_scanned)\n\t\t__field(unsigned long, nr_reclaimed)\n\t\t__field(unsigned long, nr_dirty)\n\t\t__field(unsigned long, nr_writeback)\n\t\t__field(unsigned long, nr_congested)\n\t\t__field(unsigned long, nr_immediate)\n\t\t__field(unsigned int, nr_activate0)\n\t\t__field(unsigned int, nr_activate1)\n\t\t__field(unsigned long, nr_ref_keep)\n\t\t__field(unsigned long, nr_unmap_fail)\n\t\t__field(int, priority)\n\t\t__field(int, reclaim_flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t\t__entry->nr_scanned = nr_scanned;\n\t\t__entry->nr_reclaimed = nr_reclaimed;\n\t\t__entry->nr_dirty = stat->nr_dirty;\n\t\t__entry->nr_writeback = stat->nr_writeback;\n\t\t__entry->nr_congested = stat->nr_congested;\n\t\t__entry->nr_immediate = stat->nr_immediate;\n\t\t__entry->nr_activate0 = stat->nr_activate[0];\n\t\t__entry->nr_activate1 = stat->nr_activate[1];\n\t\t__entry->nr_ref_keep = stat->nr_ref_keep;\n\t\t__entry->nr_unmap_fail = stat->nr_unmap_fail;\n\t\t__entry->priority = priority;\n\t\t__entry->reclaim_flags = trace_reclaim_flags(file);\n\t),\n\n\tTP_printk(\"nid=%d nr_scanned=%ld nr_reclaimed=%ld nr_dirty=%ld nr_writeback=%ld nr_congested=%ld nr_immediate=%ld nr_activate_anon=%d nr_activate_file=%d nr_ref_keep=%ld nr_unmap_fail=%ld priority=%d flags=%s\",\n\t\t__entry->nid,\n\t\t__entry->nr_scanned, __entry->nr_reclaimed,\n\t\t__entry->nr_dirty, __entry->nr_writeback,\n\t\t__entry->nr_congested, __entry->nr_immediate,\n\t\t__entry->nr_activate0, __entry->nr_activate1,\n\t\t__entry->nr_ref_keep, __entry->nr_unmap_fail,\n\t\t__entry->priority,\n\t\tshow_reclaim_flags(__entry->reclaim_flags))\n);\n\nTRACE_EVENT(mm_vmscan_lru_shrink_active,\n\n\tTP_PROTO(int nid, unsigned long nr_taken,\n\t\tunsigned long nr_active, unsigned long nr_deactivated,\n\t\tunsigned long nr_referenced, int priority, int file),\n\n\tTP_ARGS(nid, nr_taken, nr_active, nr_deactivated, nr_referenced, priority, file),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(unsigned long, nr_taken)\n\t\t__field(unsigned long, nr_active)\n\t\t__field(unsigned long, nr_deactivated)\n\t\t__field(unsigned long, nr_referenced)\n\t\t__field(int, priority)\n\t\t__field(int, reclaim_flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t\t__entry->nr_taken = nr_taken;\n\t\t__entry->nr_active = nr_active;\n\t\t__entry->nr_deactivated = nr_deactivated;\n\t\t__entry->nr_referenced = nr_referenced;\n\t\t__entry->priority = priority;\n\t\t__entry->reclaim_flags = trace_reclaim_flags(file);\n\t),\n\n\tTP_printk(\"nid=%d nr_taken=%ld nr_active=%ld nr_deactivated=%ld nr_referenced=%ld priority=%d flags=%s\",\n\t\t__entry->nid,\n\t\t__entry->nr_taken,\n\t\t__entry->nr_active, __entry->nr_deactivated, __entry->nr_referenced,\n\t\t__entry->priority,\n\t\tshow_reclaim_flags(__entry->reclaim_flags))\n);\n\nTRACE_EVENT(mm_vmscan_node_reclaim_begin,\n\n\tTP_PROTO(int nid, int order, gfp_t gfp_flags),\n\n\tTP_ARGS(nid, order, gfp_flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(int, order)\n\t\t__field(unsigned long, gfp_flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t\t__entry->order = order;\n\t\t__entry->gfp_flags = (__force unsigned long)gfp_flags;\n\t),\n\n\tTP_printk(\"nid=%d order=%d gfp_flags=%s\",\n\t\t__entry->nid,\n\t\t__entry->order,\n\t\tshow_gfp_flags(__entry->gfp_flags))\n);\n\nDEFINE_EVENT(mm_vmscan_direct_reclaim_end_template, mm_vmscan_node_reclaim_end,\n\n\tTP_PROTO(unsigned long nr_reclaimed),\n\n\tTP_ARGS(nr_reclaimed)\n);\n\nTRACE_EVENT(mm_vmscan_throttled,\n\n\tTP_PROTO(int nid, int usec_timeout, int usec_delayed, int reason),\n\n\tTP_ARGS(nid, usec_timeout, usec_delayed, reason),\n\n\tTP_STRUCT__entry(\n\t\t__field(int, nid)\n\t\t__field(int, usec_timeout)\n\t\t__field(int, usec_delayed)\n\t\t__field(int, reason)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->nid = nid;\n\t\t__entry->usec_timeout = usec_timeout;\n\t\t__entry->usec_delayed = usec_delayed;\n\t\t__entry->reason = 1U << reason;\n\t),\n\n\tTP_printk(\"nid=%d usec_timeout=%d usect_delayed=%d reason=%s\",\n\t\t__entry->nid,\n\t\t__entry->usec_timeout,\n\t\t__entry->usec_delayed,\n\t\tshow_throttle_flags(__entry->reason))\n);\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}