{
  "module_name": "xen.h",
  "hash_id": "1e27af668e1b2f744ed07e21c6230e82936a114974e66637b01ce98e3ec2513a",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/xen.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM xen\n\n#if !defined(_TRACE_XEN_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_XEN_H\n\n#include <linux/tracepoint.h>\n#include <asm/xen/hypervisor.h>\n#include <asm/xen/trace_types.h>\n\nstruct multicall_entry;\n\n \nDECLARE_EVENT_CLASS(xen_mc__batch,\n\t    TP_PROTO(enum xen_lazy_mode mode),\n\t    TP_ARGS(mode),\n\t    TP_STRUCT__entry(\n\t\t    __field(enum xen_lazy_mode, mode)\n\t\t    ),\n\t    TP_fast_assign(__entry->mode = mode),\n\t    TP_printk(\"start batch LAZY_%s\",\n\t\t      (__entry->mode == XEN_LAZY_MMU) ? \"MMU\" :\n\t\t      (__entry->mode == XEN_LAZY_CPU) ? \"CPU\" : \"NONE\")\n\t);\n#define DEFINE_XEN_MC_BATCH(name)\t\t\t\\\n\tDEFINE_EVENT(xen_mc__batch, name,\t\t\\\n\t\tTP_PROTO(enum xen_lazy_mode mode),\t\\\n\t\t     TP_ARGS(mode))\n\nDEFINE_XEN_MC_BATCH(xen_mc_batch);\nDEFINE_XEN_MC_BATCH(xen_mc_issue);\n\nTRACE_DEFINE_SIZEOF(ulong);\n\nTRACE_EVENT(xen_mc_entry,\n\t    TP_PROTO(struct multicall_entry *mc, unsigned nargs),\n\t    TP_ARGS(mc, nargs),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned int, op)\n\t\t    __field(unsigned int, nargs)\n\t\t    __array(unsigned long, args, 6)\n\t\t    ),\n\t    TP_fast_assign(__entry->op = mc->op;\n\t\t\t   __entry->nargs = nargs;\n\t\t\t   memcpy(__entry->args, mc->args, sizeof(ulong) * nargs);\n\t\t\t   memset(__entry->args + nargs, 0, sizeof(ulong) * (6 - nargs));\n\t\t    ),\n\t    TP_printk(\"op %u%s args [%lx, %lx, %lx, %lx, %lx, %lx]\",\n\t\t      __entry->op, xen_hypercall_name(__entry->op),\n\t\t      __entry->args[0], __entry->args[1], __entry->args[2],\n\t\t      __entry->args[3], __entry->args[4], __entry->args[5])\n\t);\n\nTRACE_EVENT(xen_mc_entry_alloc,\n\t    TP_PROTO(size_t args),\n\t    TP_ARGS(args),\n\t    TP_STRUCT__entry(\n\t\t    __field(size_t, args)\n\t\t    ),\n\t    TP_fast_assign(__entry->args = args),\n\t    TP_printk(\"alloc entry %zu arg bytes\", __entry->args)\n\t);\n\nTRACE_EVENT(xen_mc_callback,\n\t    TP_PROTO(xen_mc_callback_fn_t fn, void *data),\n\t    TP_ARGS(fn, data),\n\t    TP_STRUCT__entry(\n\t\t     \n\t\t    __field_struct(xen_mc_callback_fn_t, fn)\n\t\t    __field(void *, data)\n\t\t    ),\n\t    TP_fast_assign(\n\t\t    __entry->fn = fn;\n\t\t    __entry->data = data;\n\t\t    ),\n\t    TP_printk(\"callback %ps, data %p\",\n\t\t      __entry->fn, __entry->data)\n\t);\n\nTRACE_EVENT(xen_mc_flush_reason,\n\t    TP_PROTO(enum xen_mc_flush_reason reason),\n\t    TP_ARGS(reason),\n\t    TP_STRUCT__entry(\n\t\t    __field(enum xen_mc_flush_reason, reason)\n\t\t    ),\n\t    TP_fast_assign(__entry->reason = reason),\n\t    TP_printk(\"flush reason %s\",\n\t\t      (__entry->reason == XEN_MC_FL_NONE) ? \"NONE\" :\n\t\t      (__entry->reason == XEN_MC_FL_BATCH) ? \"BATCH\" :\n\t\t      (__entry->reason == XEN_MC_FL_ARGS) ? \"ARGS\" :\n\t\t      (__entry->reason == XEN_MC_FL_CALLBACK) ? \"CALLBACK\" : \"??\")\n\t);\n\nTRACE_EVENT(xen_mc_flush,\n\t    TP_PROTO(unsigned mcidx, unsigned argidx, unsigned cbidx),\n\t    TP_ARGS(mcidx, argidx, cbidx),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned, mcidx)\n\t\t    __field(unsigned, argidx)\n\t\t    __field(unsigned, cbidx)\n\t\t    ),\n\t    TP_fast_assign(__entry->mcidx = mcidx;\n\t\t\t   __entry->argidx = argidx;\n\t\t\t   __entry->cbidx = cbidx),\n\t    TP_printk(\"flushing %u hypercalls, %u arg bytes, %u callbacks\",\n\t\t      __entry->mcidx, __entry->argidx, __entry->cbidx)\n\t);\n\nTRACE_EVENT(xen_mc_extend_args,\n\t    TP_PROTO(unsigned long op, size_t args, enum xen_mc_extend_args res),\n\t    TP_ARGS(op, args, res),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned int, op)\n\t\t    __field(size_t, args)\n\t\t    __field(enum xen_mc_extend_args, res)\n\t\t    ),\n\t    TP_fast_assign(__entry->op = op;\n\t\t\t   __entry->args = args;\n\t\t\t   __entry->res = res),\n\t    TP_printk(\"extending op %u%s by %zu bytes res %s\",\n\t\t      __entry->op, xen_hypercall_name(__entry->op),\n\t\t      __entry->args,\n\t\t      __entry->res == XEN_MC_XE_OK ? \"OK\" :\n\t\t      __entry->res == XEN_MC_XE_BAD_OP ? \"BAD_OP\" :\n\t\t      __entry->res == XEN_MC_XE_NO_SPACE ? \"NO_SPACE\" : \"???\")\n\t);\n\nTRACE_DEFINE_SIZEOF(pteval_t);\n \nDECLARE_EVENT_CLASS(xen_mmu__set_pte,\n\t    TP_PROTO(pte_t *ptep, pte_t pteval),\n\t    TP_ARGS(ptep, pteval),\n\t    TP_STRUCT__entry(\n\t\t    __field(pte_t *, ptep)\n\t\t    __field(pteval_t, pteval)\n\t\t    ),\n\t    TP_fast_assign(__entry->ptep = ptep;\n\t\t\t   __entry->pteval = pteval.pte),\n\t    TP_printk(\"ptep %p pteval %0*llx (raw %0*llx)\",\n\t\t      __entry->ptep,\n\t\t      (int)sizeof(pteval_t) * 2, (unsigned long long)pte_val(native_make_pte(__entry->pteval)),\n\t\t      (int)sizeof(pteval_t) * 2, (unsigned long long)__entry->pteval)\n\t);\n\n#define DEFINE_XEN_MMU_SET_PTE(name)\t\t\t\t\\\n\tDEFINE_EVENT(xen_mmu__set_pte, name,\t\t\t\\\n\t\t     TP_PROTO(pte_t *ptep, pte_t pteval),\t\\\n\t\t     TP_ARGS(ptep, pteval))\n\nDEFINE_XEN_MMU_SET_PTE(xen_mmu_set_pte);\n\nTRACE_DEFINE_SIZEOF(pmdval_t);\n\nTRACE_EVENT(xen_mmu_set_pmd,\n\t    TP_PROTO(pmd_t *pmdp, pmd_t pmdval),\n\t    TP_ARGS(pmdp, pmdval),\n\t    TP_STRUCT__entry(\n\t\t    __field(pmd_t *, pmdp)\n\t\t    __field(pmdval_t, pmdval)\n\t\t    ),\n\t    TP_fast_assign(__entry->pmdp = pmdp;\n\t\t\t   __entry->pmdval = pmdval.pmd),\n\t    TP_printk(\"pmdp %p pmdval %0*llx (raw %0*llx)\",\n\t\t      __entry->pmdp,\n\t\t      (int)sizeof(pmdval_t) * 2, (unsigned long long)pmd_val(native_make_pmd(__entry->pmdval)),\n\t\t      (int)sizeof(pmdval_t) * 2, (unsigned long long)__entry->pmdval)\n\t);\n\n#ifdef CONFIG_X86_PAE\nDEFINE_XEN_MMU_SET_PTE(xen_mmu_set_pte_atomic);\n\nTRACE_EVENT(xen_mmu_pte_clear,\n\t    TP_PROTO(struct mm_struct *mm, unsigned long addr, pte_t *ptep),\n\t    TP_ARGS(mm, addr, ptep),\n\t    TP_STRUCT__entry(\n\t\t    __field(struct mm_struct *, mm)\n\t\t    __field(unsigned long, addr)\n\t\t    __field(pte_t *, ptep)\n\t\t    ),\n\t    TP_fast_assign(__entry->mm = mm;\n\t\t\t   __entry->addr = addr;\n\t\t\t   __entry->ptep = ptep),\n\t    TP_printk(\"mm %p addr %lx ptep %p\",\n\t\t      __entry->mm, __entry->addr, __entry->ptep)\n\t);\n\nTRACE_EVENT(xen_mmu_pmd_clear,\n\t    TP_PROTO(pmd_t *pmdp),\n\t    TP_ARGS(pmdp),\n\t    TP_STRUCT__entry(\n\t\t    __field(pmd_t *, pmdp)\n\t\t    ),\n\t    TP_fast_assign(__entry->pmdp = pmdp),\n\t    TP_printk(\"pmdp %p\", __entry->pmdp)\n\t);\n#endif\n\n#if CONFIG_PGTABLE_LEVELS >= 4\n\nTRACE_DEFINE_SIZEOF(pudval_t);\n\nTRACE_EVENT(xen_mmu_set_pud,\n\t    TP_PROTO(pud_t *pudp, pud_t pudval),\n\t    TP_ARGS(pudp, pudval),\n\t    TP_STRUCT__entry(\n\t\t    __field(pud_t *, pudp)\n\t\t    __field(pudval_t, pudval)\n\t\t    ),\n\t    TP_fast_assign(__entry->pudp = pudp;\n\t\t\t   __entry->pudval = native_pud_val(pudval)),\n\t    TP_printk(\"pudp %p pudval %0*llx (raw %0*llx)\",\n\t\t      __entry->pudp,\n\t\t      (int)sizeof(pudval_t) * 2, (unsigned long long)pud_val(native_make_pud(__entry->pudval)),\n\t\t      (int)sizeof(pudval_t) * 2, (unsigned long long)__entry->pudval)\n\t);\n\nTRACE_DEFINE_SIZEOF(p4dval_t);\n\nTRACE_EVENT(xen_mmu_set_p4d,\n\t    TP_PROTO(p4d_t *p4dp, p4d_t *user_p4dp, p4d_t p4dval),\n\t    TP_ARGS(p4dp, user_p4dp, p4dval),\n\t    TP_STRUCT__entry(\n\t\t    __field(p4d_t *, p4dp)\n\t\t    __field(p4d_t *, user_p4dp)\n\t\t    __field(p4dval_t, p4dval)\n\t\t    ),\n\t    TP_fast_assign(__entry->p4dp = p4dp;\n\t\t\t   __entry->user_p4dp = user_p4dp;\n\t\t\t   __entry->p4dval = p4d_val(p4dval)),\n\t    TP_printk(\"p4dp %p user_p4dp %p p4dval %0*llx (raw %0*llx)\",\n\t\t      __entry->p4dp, __entry->user_p4dp,\n\t\t      (int)sizeof(p4dval_t) * 2, (unsigned long long)pgd_val(native_make_pgd(__entry->p4dval)),\n\t\t      (int)sizeof(p4dval_t) * 2, (unsigned long long)__entry->p4dval)\n\t);\n#else\n\nTRACE_EVENT(xen_mmu_set_pud,\n\t    TP_PROTO(pud_t *pudp, pud_t pudval),\n\t    TP_ARGS(pudp, pudval),\n\t    TP_STRUCT__entry(\n\t\t    __field(pud_t *, pudp)\n\t\t    __field(pudval_t, pudval)\n\t\t    ),\n\t    TP_fast_assign(__entry->pudp = pudp;\n\t\t\t   __entry->pudval = native_pud_val(pudval)),\n\t    TP_printk(\"pudp %p pudval %0*llx (raw %0*llx)\",\n\t\t      __entry->pudp,\n\t\t      (int)sizeof(pudval_t) * 2, (unsigned long long)pgd_val(native_make_pgd(__entry->pudval)),\n\t\t      (int)sizeof(pudval_t) * 2, (unsigned long long)__entry->pudval)\n\t);\n\n#endif\n\nDECLARE_EVENT_CLASS(xen_mmu_ptep_modify_prot,\n\t    TP_PROTO(struct mm_struct *mm, unsigned long addr,\n\t\t     pte_t *ptep, pte_t pteval),\n\t    TP_ARGS(mm, addr, ptep, pteval),\n\t    TP_STRUCT__entry(\n\t\t    __field(struct mm_struct *, mm)\n\t\t    __field(unsigned long, addr)\n\t\t    __field(pte_t *, ptep)\n\t\t    __field(pteval_t, pteval)\n\t\t    ),\n\t    TP_fast_assign(__entry->mm = mm;\n\t\t\t   __entry->addr = addr;\n\t\t\t   __entry->ptep = ptep;\n\t\t\t   __entry->pteval = pteval.pte),\n\t    TP_printk(\"mm %p addr %lx ptep %p pteval %0*llx (raw %0*llx)\",\n\t\t      __entry->mm, __entry->addr, __entry->ptep,\n\t\t      (int)sizeof(pteval_t) * 2, (unsigned long long)pte_val(native_make_pte(__entry->pteval)),\n\t\t      (int)sizeof(pteval_t) * 2, (unsigned long long)__entry->pteval)\n\t);\n#define DEFINE_XEN_MMU_PTEP_MODIFY_PROT(name)\t\t\t\t\\\n\tDEFINE_EVENT(xen_mmu_ptep_modify_prot, name,\t\t\t\\\n\t\t     TP_PROTO(struct mm_struct *mm, unsigned long addr,\t\\\n\t\t\t      pte_t *ptep, pte_t pteval),\t\t\\\n\t\t     TP_ARGS(mm, addr, ptep, pteval))\n\nDEFINE_XEN_MMU_PTEP_MODIFY_PROT(xen_mmu_ptep_modify_prot_start);\nDEFINE_XEN_MMU_PTEP_MODIFY_PROT(xen_mmu_ptep_modify_prot_commit);\n\nTRACE_EVENT(xen_mmu_alloc_ptpage,\n\t    TP_PROTO(struct mm_struct *mm, unsigned long pfn, unsigned level, bool pinned),\n\t    TP_ARGS(mm, pfn, level, pinned),\n\t    TP_STRUCT__entry(\n\t\t    __field(struct mm_struct *, mm)\n\t\t    __field(unsigned long, pfn)\n\t\t    __field(unsigned, level)\n\t\t    __field(bool, pinned)\n\t\t    ),\n\t    TP_fast_assign(__entry->mm = mm;\n\t\t\t   __entry->pfn = pfn;\n\t\t\t   __entry->level = level;\n\t\t\t   __entry->pinned = pinned),\n\t    TP_printk(\"mm %p  pfn %lx  level %d  %spinned\",\n\t\t      __entry->mm, __entry->pfn, __entry->level,\n\t\t      __entry->pinned ? \"\" : \"un\")\n\t);\n\nTRACE_EVENT(xen_mmu_release_ptpage,\n\t    TP_PROTO(unsigned long pfn, unsigned level, bool pinned),\n\t    TP_ARGS(pfn, level, pinned),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned long, pfn)\n\t\t    __field(unsigned, level)\n\t\t    __field(bool, pinned)\n\t\t    ),\n\t    TP_fast_assign(__entry->pfn = pfn;\n\t\t\t   __entry->level = level;\n\t\t\t   __entry->pinned = pinned),\n\t    TP_printk(\"pfn %lx  level %d  %spinned\",\n\t\t      __entry->pfn, __entry->level,\n\t\t      __entry->pinned ? \"\" : \"un\")\n\t);\n\nDECLARE_EVENT_CLASS(xen_mmu_pgd,\n\t    TP_PROTO(struct mm_struct *mm, pgd_t *pgd),\n\t    TP_ARGS(mm, pgd),\n\t    TP_STRUCT__entry(\n\t\t    __field(struct mm_struct *, mm)\n\t\t    __field(pgd_t *, pgd)\n\t\t    ),\n\t    TP_fast_assign(__entry->mm = mm;\n\t\t\t   __entry->pgd = pgd),\n\t    TP_printk(\"mm %p pgd %p\", __entry->mm, __entry->pgd)\n\t);\n#define DEFINE_XEN_MMU_PGD_EVENT(name)\t\t\t\t\\\n\tDEFINE_EVENT(xen_mmu_pgd, name,\t\t\t\t\\\n\t\tTP_PROTO(struct mm_struct *mm, pgd_t *pgd),\t\\\n\t\t     TP_ARGS(mm, pgd))\n\nDEFINE_XEN_MMU_PGD_EVENT(xen_mmu_pgd_pin);\nDEFINE_XEN_MMU_PGD_EVENT(xen_mmu_pgd_unpin);\n\nTRACE_EVENT(xen_mmu_flush_tlb_one_user,\n\t    TP_PROTO(unsigned long addr),\n\t    TP_ARGS(addr),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned long, addr)\n\t\t    ),\n\t    TP_fast_assign(__entry->addr = addr),\n\t    TP_printk(\"addr %lx\", __entry->addr)\n\t);\n\nTRACE_EVENT(xen_mmu_flush_tlb_multi,\n\t    TP_PROTO(const struct cpumask *cpus, struct mm_struct *mm,\n\t\t     unsigned long addr, unsigned long end),\n\t    TP_ARGS(cpus, mm, addr, end),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned, ncpus)\n\t\t    __field(struct mm_struct *, mm)\n\t\t    __field(unsigned long, addr)\n\t\t    __field(unsigned long, end)\n\t\t    ),\n\t    TP_fast_assign(__entry->ncpus = cpumask_weight(cpus);\n\t\t\t   __entry->mm = mm;\n\t\t\t   __entry->addr = addr,\n\t\t\t   __entry->end = end),\n\t    TP_printk(\"ncpus %d mm %p addr %lx, end %lx\",\n\t\t      __entry->ncpus, __entry->mm, __entry->addr, __entry->end)\n\t);\n\nTRACE_EVENT(xen_mmu_write_cr3,\n\t    TP_PROTO(bool kernel, unsigned long cr3),\n\t    TP_ARGS(kernel, cr3),\n\t    TP_STRUCT__entry(\n\t\t    __field(bool, kernel)\n\t\t    __field(unsigned long, cr3)\n\t\t    ),\n\t    TP_fast_assign(__entry->kernel = kernel;\n\t\t\t   __entry->cr3 = cr3),\n\t    TP_printk(\"%s cr3 %lx\",\n\t\t      __entry->kernel ? \"kernel\" : \"user\", __entry->cr3)\n\t);\n\n\n \nTRACE_EVENT(xen_cpu_write_ldt_entry,\n\t    TP_PROTO(struct desc_struct *dt, int entrynum, u64 desc),\n\t    TP_ARGS(dt, entrynum, desc),\n\t    TP_STRUCT__entry(\n\t\t    __field(struct desc_struct *, dt)\n\t\t    __field(int, entrynum)\n\t\t    __field(u64, desc)\n\t\t    ),\n\t    TP_fast_assign(__entry->dt = dt;\n\t\t\t   __entry->entrynum = entrynum;\n\t\t\t   __entry->desc = desc;\n\t\t    ),\n\t    TP_printk(\"dt %p  entrynum %d  entry %016llx\",\n\t\t      __entry->dt, __entry->entrynum,\n\t\t      (unsigned long long)__entry->desc)\n\t);\n\nTRACE_EVENT(xen_cpu_write_idt_entry,\n\t    TP_PROTO(gate_desc *dt, int entrynum, const gate_desc *ent),\n\t    TP_ARGS(dt, entrynum, ent),\n\t    TP_STRUCT__entry(\n\t\t    __field(gate_desc *, dt)\n\t\t    __field(int, entrynum)\n\t\t    ),\n\t    TP_fast_assign(__entry->dt = dt;\n\t\t\t   __entry->entrynum = entrynum;\n\t\t    ),\n\t    TP_printk(\"dt %p  entrynum %d\",\n\t\t      __entry->dt, __entry->entrynum)\n\t);\n\nTRACE_EVENT(xen_cpu_load_idt,\n\t    TP_PROTO(const struct desc_ptr *desc),\n\t    TP_ARGS(desc),\n\t    TP_STRUCT__entry(\n\t\t    __field(unsigned long, addr)\n\t\t    ),\n\t    TP_fast_assign(__entry->addr = desc->address),\n\t    TP_printk(\"addr %lx\", __entry->addr)\n\t);\n\nTRACE_EVENT(xen_cpu_write_gdt_entry,\n\t    TP_PROTO(struct desc_struct *dt, int entrynum, const void *desc, int type),\n\t    TP_ARGS(dt, entrynum, desc, type),\n\t    TP_STRUCT__entry(\n\t\t    __field(u64, desc)\n\t\t    __field(struct desc_struct *, dt)\n\t\t    __field(int, entrynum)\n\t\t    __field(int, type)\n\t\t    ),\n\t    TP_fast_assign(__entry->dt = dt;\n\t\t\t   __entry->entrynum = entrynum;\n\t\t\t   __entry->desc = *(u64 *)desc;\n\t\t\t   __entry->type = type;\n\t\t    ),\n\t    TP_printk(\"dt %p  entrynum %d  type %d  desc %016llx\",\n\t\t      __entry->dt, __entry->entrynum, __entry->type,\n\t\t      (unsigned long long)__entry->desc)\n\t);\n\nTRACE_EVENT(xen_cpu_set_ldt,\n\t    TP_PROTO(const void *addr, unsigned entries),\n\t    TP_ARGS(addr, entries),\n\t    TP_STRUCT__entry(\n\t\t    __field(const void *, addr)\n\t\t    __field(unsigned, entries)\n\t\t    ),\n\t    TP_fast_assign(__entry->addr = addr;\n\t\t\t   __entry->entries = entries),\n\t    TP_printk(\"addr %p  entries %u\",\n\t\t      __entry->addr, __entry->entries)\n\t);\n\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}