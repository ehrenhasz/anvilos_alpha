{
  "module_name": "jbd2.h",
  "hash_id": "74d0e7b71eb076de9da713ff11b0400ef774204df87b29e39bdf46e6e24b9131",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/jbd2.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM jbd2\n\n#if !defined(_TRACE_JBD2_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_JBD2_H\n\n#include <linux/jbd2.h>\n#include <linux/tracepoint.h>\n\nstruct transaction_chp_stats_s;\nstruct transaction_run_stats_s;\n\nTRACE_EVENT(jbd2_checkpoint,\n\n\tTP_PROTO(journal_t *journal, int result),\n\n\tTP_ARGS(journal, result),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tint,\tresult\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->result\t\t= result;\n\t),\n\n\tTP_printk(\"dev %d,%d result %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->result)\n);\n\nDECLARE_EVENT_CLASS(jbd2_commit,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tchar,\tsync_commit\t\t  )\n\t\t__field(\ttid_t,\ttransaction\t\t  )\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->sync_commit = commit_transaction->t_synchronous_commit;\n\t\t__entry->transaction\t= commit_transaction->t_tid;\n\t),\n\n\tTP_printk(\"dev %d,%d transaction %u sync %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->transaction, __entry->sync_commit)\n);\n\nDEFINE_EVENT(jbd2_commit, jbd2_start_commit,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction)\n);\n\nDEFINE_EVENT(jbd2_commit, jbd2_commit_locking,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction)\n);\n\nDEFINE_EVENT(jbd2_commit, jbd2_commit_flushing,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction)\n);\n\nDEFINE_EVENT(jbd2_commit, jbd2_commit_logging,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction)\n);\n\nDEFINE_EVENT(jbd2_commit, jbd2_drop_transaction,\n\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction)\n);\n\nTRACE_EVENT(jbd2_end_commit,\n\tTP_PROTO(journal_t *journal, transaction_t *commit_transaction),\n\n\tTP_ARGS(journal, commit_transaction),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tchar,\tsync_commit\t\t  )\n\t\t__field(\ttid_t,\ttransaction\t\t  )\n\t\t__field(\ttid_t,\thead\t\t  \t  )\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->sync_commit = commit_transaction->t_synchronous_commit;\n\t\t__entry->transaction\t= commit_transaction->t_tid;\n\t\t__entry->head\t\t= journal->j_tail_sequence;\n\t),\n\n\tTP_printk(\"dev %d,%d transaction %u sync %d head %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->transaction, __entry->sync_commit, __entry->head)\n);\n\nTRACE_EVENT(jbd2_submit_inode_data,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino)\n);\n\nDECLARE_EVENT_CLASS(jbd2_handle_start_class,\n\tTP_PROTO(dev_t dev, tid_t tid, unsigned int type,\n\t\t unsigned int line_no, int requested_blocks),\n\n\tTP_ARGS(dev, tid, type, line_no, requested_blocks),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tdev_t,\tdev\t\t)\n\t\t__field(\t\ttid_t,\ttid\t\t)\n\t\t__field(\t unsigned int,\ttype\t\t)\n\t\t__field(\t unsigned int,\tline_no\t\t)\n\t\t__field(\t\t  int,\trequested_blocks)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t  = dev;\n\t\t__entry->tid\t\t  = tid;\n\t\t__entry->type\t\t  = type;\n\t\t__entry->line_no\t  = line_no;\n\t\t__entry->requested_blocks = requested_blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u type %u line_no %u \"\n\t\t  \"requested_blocks %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->tid,\n\t\t  __entry->type, __entry->line_no, __entry->requested_blocks)\n);\n\nDEFINE_EVENT(jbd2_handle_start_class, jbd2_handle_start,\n\tTP_PROTO(dev_t dev, tid_t tid, unsigned int type,\n\t\t unsigned int line_no, int requested_blocks),\n\n\tTP_ARGS(dev, tid, type, line_no, requested_blocks)\n);\n\nDEFINE_EVENT(jbd2_handle_start_class, jbd2_handle_restart,\n\tTP_PROTO(dev_t dev, tid_t tid, unsigned int type,\n\t\t unsigned int line_no, int requested_blocks),\n\n\tTP_ARGS(dev, tid, type, line_no, requested_blocks)\n);\n\nTRACE_EVENT(jbd2_handle_extend,\n\tTP_PROTO(dev_t dev, tid_t tid, unsigned int type,\n\t\t unsigned int line_no, int buffer_credits,\n\t\t int requested_blocks),\n\n\tTP_ARGS(dev, tid, type, line_no, buffer_credits, requested_blocks),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tdev_t,\tdev\t\t)\n\t\t__field(\t\ttid_t,\ttid\t\t)\n\t\t__field(\t unsigned int,\ttype\t\t)\n\t\t__field(\t unsigned int,\tline_no\t\t)\n\t\t__field(\t\t  int,\tbuffer_credits  )\n\t\t__field(\t\t  int,\trequested_blocks)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t  = dev;\n\t\t__entry->tid\t\t  = tid;\n\t\t__entry->type\t\t  = type;\n\t\t__entry->line_no\t  = line_no;\n\t\t__entry->buffer_credits   = buffer_credits;\n\t\t__entry->requested_blocks = requested_blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u type %u line_no %u \"\n\t\t  \"buffer_credits %d requested_blocks %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->tid,\n\t\t  __entry->type, __entry->line_no, __entry->buffer_credits,\n\t\t  __entry->requested_blocks)\n);\n\nTRACE_EVENT(jbd2_handle_stats,\n\tTP_PROTO(dev_t dev, tid_t tid, unsigned int type,\n\t\t unsigned int line_no, int interval, int sync,\n\t\t int requested_blocks, int dirtied_blocks),\n\n\tTP_ARGS(dev, tid, type, line_no, interval, sync,\n\t\trequested_blocks, dirtied_blocks),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tdev_t,\tdev\t\t)\n\t\t__field(\t\ttid_t,\ttid\t\t)\n\t\t__field(\t unsigned int,\ttype\t\t)\n\t\t__field(\t unsigned int,\tline_no\t\t)\n\t\t__field(\t\t  int,\tinterval\t)\n\t\t__field(\t\t  int,\tsync\t\t)\n\t\t__field(\t\t  int,\trequested_blocks)\n\t\t__field(\t\t  int,\tdirtied_blocks\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t  = dev;\n\t\t__entry->tid\t\t  = tid;\n\t\t__entry->type\t\t  = type;\n\t\t__entry->line_no\t  = line_no;\n\t\t__entry->interval\t  = interval;\n\t\t__entry->sync\t\t  = sync;\n\t\t__entry->requested_blocks = requested_blocks;\n\t\t__entry->dirtied_blocks\t  = dirtied_blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u type %u line_no %u interval %d \"\n\t\t  \"sync %d requested_blocks %d dirtied_blocks %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->tid,\n\t\t  __entry->type, __entry->line_no, __entry->interval,\n\t\t  __entry->sync, __entry->requested_blocks,\n\t\t  __entry->dirtied_blocks)\n);\n\nTRACE_EVENT(jbd2_run_stats,\n\tTP_PROTO(dev_t dev, tid_t tid,\n\t\t struct transaction_run_stats_s *stats),\n\n\tTP_ARGS(dev, tid, stats),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tdev_t,\tdev\t\t)\n\t\t__field(\t\ttid_t,\ttid\t\t)\n\t\t__field(\tunsigned long,\twait\t\t)\n\t\t__field(\tunsigned long,\trequest_delay\t)\n\t\t__field(\tunsigned long,\trunning\t\t)\n\t\t__field(\tunsigned long,\tlocked\t\t)\n\t\t__field(\tunsigned long,\tflushing\t)\n\t\t__field(\tunsigned long,\tlogging\t\t)\n\t\t__field(\t\t__u32,\thandle_count\t)\n\t\t__field(\t\t__u32,\tblocks\t\t)\n\t\t__field(\t\t__u32,\tblocks_logged\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= dev;\n\t\t__entry->tid\t\t= tid;\n\t\t__entry->wait\t\t= stats->rs_wait;\n\t\t__entry->request_delay\t= stats->rs_request_delay;\n\t\t__entry->running\t= stats->rs_running;\n\t\t__entry->locked\t\t= stats->rs_locked;\n\t\t__entry->flushing\t= stats->rs_flushing;\n\t\t__entry->logging\t= stats->rs_logging;\n\t\t__entry->handle_count\t= stats->rs_handle_count;\n\t\t__entry->blocks\t\t= stats->rs_blocks;\n\t\t__entry->blocks_logged\t= stats->rs_blocks_logged;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u wait %u request_delay %u running %u \"\n\t\t  \"locked %u flushing %u logging %u handle_count %u \"\n\t\t  \"blocks %u blocks_logged %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->tid,\n\t\t  jiffies_to_msecs(__entry->wait),\n\t\t  jiffies_to_msecs(__entry->request_delay),\n\t\t  jiffies_to_msecs(__entry->running),\n\t\t  jiffies_to_msecs(__entry->locked),\n\t\t  jiffies_to_msecs(__entry->flushing),\n\t\t  jiffies_to_msecs(__entry->logging),\n\t\t  __entry->handle_count, __entry->blocks,\n\t\t  __entry->blocks_logged)\n);\n\nTRACE_EVENT(jbd2_checkpoint_stats,\n\tTP_PROTO(dev_t dev, tid_t tid,\n\t\t struct transaction_chp_stats_s *stats),\n\n\tTP_ARGS(dev, tid, stats),\n\n\tTP_STRUCT__entry(\n\t\t__field(\t\tdev_t,\tdev\t\t)\n\t\t__field(\t\ttid_t,\ttid\t\t)\n\t\t__field(\tunsigned long,\tchp_time\t)\n\t\t__field(\t\t__u32,\tforced_to_close\t)\n\t\t__field(\t\t__u32,\twritten\t\t)\n\t\t__field(\t\t__u32,\tdropped\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= dev;\n\t\t__entry->tid\t\t= tid;\n\t\t__entry->chp_time\t= stats->cs_chp_time;\n\t\t__entry->forced_to_close= stats->cs_forced_to_close;\n\t\t__entry->written\t= stats->cs_written;\n\t\t__entry->dropped\t= stats->cs_dropped;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u chp_time %u forced_to_close %u \"\n\t\t  \"written %u dropped %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->tid,\n\t\t  jiffies_to_msecs(__entry->chp_time),\n\t\t  __entry->forced_to_close, __entry->written, __entry->dropped)\n);\n\nTRACE_EVENT(jbd2_update_log_tail,\n\n\tTP_PROTO(journal_t *journal, tid_t first_tid,\n\t\t unsigned long block_nr, unsigned long freed),\n\n\tTP_ARGS(journal, first_tid, block_nr, freed),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\ttid_t,\ttail_sequence\t\t)\n\t\t__field(\ttid_t,\tfirst_tid\t\t)\n\t\t__field(unsigned long,\tblock_nr\t\t)\n\t\t__field(unsigned long,\tfreed\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->tail_sequence\t= journal->j_tail_sequence;\n\t\t__entry->first_tid\t= first_tid;\n\t\t__entry->block_nr\t= block_nr;\n\t\t__entry->freed\t\t= freed;\n\t),\n\n\tTP_printk(\"dev %d,%d from %u to %u offset %lu freed %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tail_sequence, __entry->first_tid,\n\t\t  __entry->block_nr, __entry->freed)\n);\n\nTRACE_EVENT(jbd2_write_superblock,\n\n\tTP_PROTO(journal_t *journal, blk_opf_t write_flags),\n\n\tTP_ARGS(journal, write_flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,  dev\t\t\t)\n\t\t__field(    blk_opf_t,  write_flags\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->write_flags\t= write_flags;\n\t),\n\n\tTP_printk(\"dev %d,%d write_flags %x\", MAJOR(__entry->dev),\n\t\t  MINOR(__entry->dev), (__force u32)__entry->write_flags)\n);\n\nTRACE_EVENT(jbd2_lock_buffer_stall,\n\n\tTP_PROTO(dev_t dev, unsigned long stall_ms),\n\n\tTP_ARGS(dev, stall_ms),\n\n\tTP_STRUCT__entry(\n\t\t__field(        dev_t, dev\t)\n\t\t__field(unsigned long, stall_ms\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= dev;\n\t\t__entry->stall_ms\t= stall_ms;\n\t),\n\n\tTP_printk(\"dev %d,%d stall_ms %lu\",\n\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t__entry->stall_ms)\n);\n\nDECLARE_EVENT_CLASS(jbd2_journal_shrink,\n\n\tTP_PROTO(journal_t *journal, unsigned long nr_to_scan,\n\t\t unsigned long count),\n\n\tTP_ARGS(journal, nr_to_scan, count),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, nr_to_scan)\n\t\t__field(unsigned long, count)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->nr_to_scan\t= nr_to_scan;\n\t\t__entry->count\t\t= count;\n\t),\n\n\tTP_printk(\"dev %d,%d nr_to_scan %lu count %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_to_scan, __entry->count)\n);\n\nDEFINE_EVENT(jbd2_journal_shrink, jbd2_shrink_count,\n\n\tTP_PROTO(journal_t *journal, unsigned long nr_to_scan, unsigned long count),\n\n\tTP_ARGS(journal, nr_to_scan, count)\n);\n\nDEFINE_EVENT(jbd2_journal_shrink, jbd2_shrink_scan_enter,\n\n\tTP_PROTO(journal_t *journal, unsigned long nr_to_scan, unsigned long count),\n\n\tTP_ARGS(journal, nr_to_scan, count)\n);\n\nTRACE_EVENT(jbd2_shrink_scan_exit,\n\n\tTP_PROTO(journal_t *journal, unsigned long nr_to_scan,\n\t\t unsigned long nr_shrunk, unsigned long count),\n\n\tTP_ARGS(journal, nr_to_scan, nr_shrunk, count),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, nr_to_scan)\n\t\t__field(unsigned long, nr_shrunk)\n\t\t__field(unsigned long, count)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->nr_to_scan\t= nr_to_scan;\n\t\t__entry->nr_shrunk\t= nr_shrunk;\n\t\t__entry->count\t\t= count;\n\t),\n\n\tTP_printk(\"dev %d,%d nr_to_scan %lu nr_shrunk %lu count %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_to_scan, __entry->nr_shrunk,\n\t\t  __entry->count)\n);\n\nTRACE_EVENT(jbd2_shrink_checkpoint_list,\n\n\tTP_PROTO(journal_t *journal, tid_t first_tid, tid_t tid, tid_t last_tid,\n\t\t unsigned long nr_freed, tid_t next_tid),\n\n\tTP_ARGS(journal, first_tid, tid, last_tid, nr_freed, next_tid),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(tid_t, first_tid)\n\t\t__field(tid_t, tid)\n\t\t__field(tid_t, last_tid)\n\t\t__field(unsigned long, nr_freed)\n\t\t__field(tid_t, next_tid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= journal->j_fs_dev->bd_dev;\n\t\t__entry->first_tid\t= first_tid;\n\t\t__entry->tid\t\t= tid;\n\t\t__entry->last_tid\t= last_tid;\n\t\t__entry->nr_freed\t= nr_freed;\n\t\t__entry->next_tid\t= next_tid;\n\t),\n\n\tTP_printk(\"dev %d,%d shrink transaction %u-%u(%u) freed %lu \"\n\t\t  \"next transaction %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->first_tid, __entry->tid, __entry->last_tid,\n\t\t  __entry->nr_freed, __entry->next_tid)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}