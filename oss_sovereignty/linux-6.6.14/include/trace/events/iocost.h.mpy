{
  "module_name": "iocost.h",
  "hash_id": "5855b954daac1646952efd5e71e98af6e97c4cd69f545fd60f9332706bb3922d",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/iocost.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM iocost\n\nstruct ioc;\nstruct ioc_now;\nstruct ioc_gq;\n\n#if !defined(_TRACE_BLK_IOCOST_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_BLK_IOCOST_H\n\n#include <linux/tracepoint.h>\n\nDECLARE_EVENT_CLASS(iocost_iocg_state,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu64 last_period, u64 cur_period, u64 vtime),\n\n\tTP_ARGS(iocg, path, now, last_period, cur_period, vtime),\n\n\tTP_STRUCT__entry (\n\t\t__string(devname, ioc_name(iocg->ioc))\n\t\t__string(cgroup, path)\n\t\t__field(u64, now)\n\t\t__field(u64, vnow)\n\t\t__field(u64, vrate)\n\t\t__field(u64, last_period)\n\t\t__field(u64, cur_period)\n\t\t__field(u64, vtime)\n\t\t__field(u32, weight)\n\t\t__field(u32, inuse)\n\t\t__field(u64, hweight_active)\n\t\t__field(u64, hweight_inuse)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(devname, ioc_name(iocg->ioc));\n\t\t__assign_str(cgroup, path);\n\t\t__entry->now = now->now;\n\t\t__entry->vnow = now->vnow;\n\t\t__entry->vrate = iocg->ioc->vtime_base_rate;\n\t\t__entry->last_period = last_period;\n\t\t__entry->cur_period = cur_period;\n\t\t__entry->vtime = vtime;\n\t\t__entry->weight = iocg->weight;\n\t\t__entry->inuse = iocg->inuse;\n\t\t__entry->hweight_active = iocg->hweight_active;\n\t\t__entry->hweight_inuse = iocg->hweight_inuse;\n\t),\n\n\tTP_printk(\"[%s:%s] now=%llu:%llu vrate=%llu \"\n\t\t  \"period=%llu->%llu vtime=%llu \"\n\t\t  \"weight=%u/%u hweight=%llu/%llu\",\n\t\t__get_str(devname), __get_str(cgroup),\n\t\t__entry->now, __entry->vnow, __entry->vrate,\n\t\t__entry->last_period, __entry->cur_period,\n\t\t__entry->vtime, __entry->inuse, __entry->weight,\n\t\t__entry->hweight_inuse, __entry->hweight_active\n\t)\n);\n\nDEFINE_EVENT(iocost_iocg_state, iocost_iocg_activate,\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\t u64 last_period, u64 cur_period, u64 vtime),\n\n\tTP_ARGS(iocg, path, now, last_period, cur_period, vtime)\n);\n\nDEFINE_EVENT(iocost_iocg_state, iocost_iocg_idle,\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\t u64 last_period, u64 cur_period, u64 vtime),\n\n\tTP_ARGS(iocg, path, now, last_period, cur_period, vtime)\n);\n\nDECLARE_EVENT_CLASS(iocg_inuse_update,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu32 old_inuse, u32 new_inuse,\n\t\tu64 old_hw_inuse, u64 new_hw_inuse),\n\n\tTP_ARGS(iocg, path, now, old_inuse, new_inuse,\n\t\told_hw_inuse, new_hw_inuse),\n\n\tTP_STRUCT__entry (\n\t\t__string(devname, ioc_name(iocg->ioc))\n\t\t__string(cgroup, path)\n\t\t__field(u64, now)\n\t\t__field(u32, old_inuse)\n\t\t__field(u32, new_inuse)\n\t\t__field(u64, old_hweight_inuse)\n\t\t__field(u64, new_hweight_inuse)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(devname, ioc_name(iocg->ioc));\n\t\t__assign_str(cgroup, path);\n\t\t__entry->now = now->now;\n\t\t__entry->old_inuse = old_inuse;\n\t\t__entry->new_inuse = new_inuse;\n\t\t__entry->old_hweight_inuse = old_hw_inuse;\n\t\t__entry->new_hweight_inuse = new_hw_inuse;\n\t),\n\n\tTP_printk(\"[%s:%s] now=%llu inuse=%u->%u hw_inuse=%llu->%llu\",\n\t\t__get_str(devname), __get_str(cgroup), __entry->now,\n\t\t__entry->old_inuse, __entry->new_inuse,\n\t\t__entry->old_hweight_inuse, __entry->new_hweight_inuse\n\t)\n);\n\nDEFINE_EVENT(iocg_inuse_update, iocost_inuse_shortage,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu32 old_inuse, u32 new_inuse,\n\t\tu64 old_hw_inuse, u64 new_hw_inuse),\n\n\tTP_ARGS(iocg, path, now, old_inuse, new_inuse,\n\t\told_hw_inuse, new_hw_inuse)\n);\n\nDEFINE_EVENT(iocg_inuse_update, iocost_inuse_transfer,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu32 old_inuse, u32 new_inuse,\n\t\tu64 old_hw_inuse, u64 new_hw_inuse),\n\n\tTP_ARGS(iocg, path, now, old_inuse, new_inuse,\n\t\told_hw_inuse, new_hw_inuse)\n);\n\nDEFINE_EVENT(iocg_inuse_update, iocost_inuse_adjust,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu32 old_inuse, u32 new_inuse,\n\t\tu64 old_hw_inuse, u64 new_hw_inuse),\n\n\tTP_ARGS(iocg, path, now, old_inuse, new_inuse,\n\t\told_hw_inuse, new_hw_inuse)\n);\n\nTRACE_EVENT(iocost_ioc_vrate_adj,\n\n\tTP_PROTO(struct ioc *ioc, u64 new_vrate, u32 *missed_ppm,\n\t\tu32 rq_wait_pct, int nr_lagging, int nr_shortages),\n\n\tTP_ARGS(ioc, new_vrate, missed_ppm, rq_wait_pct, nr_lagging, nr_shortages),\n\n\tTP_STRUCT__entry (\n\t\t__string(devname, ioc_name(ioc))\n\t\t__field(u64, old_vrate)\n\t\t__field(u64, new_vrate)\n\t\t__field(int, busy_level)\n\t\t__field(u32, read_missed_ppm)\n\t\t__field(u32, write_missed_ppm)\n\t\t__field(u32, rq_wait_pct)\n\t\t__field(int, nr_lagging)\n\t\t__field(int, nr_shortages)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(devname, ioc_name(ioc));\n\t\t__entry->old_vrate = ioc->vtime_base_rate;\n\t\t__entry->new_vrate = new_vrate;\n\t\t__entry->busy_level = ioc->busy_level;\n\t\t__entry->read_missed_ppm = missed_ppm[READ];\n\t\t__entry->write_missed_ppm = missed_ppm[WRITE];\n\t\t__entry->rq_wait_pct = rq_wait_pct;\n\t\t__entry->nr_lagging = nr_lagging;\n\t\t__entry->nr_shortages = nr_shortages;\n\t),\n\n\tTP_printk(\"[%s] vrate=%llu->%llu busy=%d missed_ppm=%u:%u rq_wait_pct=%u lagging=%d shortages=%d\",\n\t\t__get_str(devname), __entry->old_vrate, __entry->new_vrate,\n\t\t__entry->busy_level,\n\t\t__entry->read_missed_ppm, __entry->write_missed_ppm,\n\t\t__entry->rq_wait_pct, __entry->nr_lagging, __entry->nr_shortages\n\t)\n);\n\nTRACE_EVENT(iocost_iocg_forgive_debt,\n\n\tTP_PROTO(struct ioc_gq *iocg, const char *path, struct ioc_now *now,\n\t\tu32 usage_pct, u64 old_debt, u64 new_debt,\n\t\tu64 old_delay, u64 new_delay),\n\n\tTP_ARGS(iocg, path, now, usage_pct,\n\t\told_debt, new_debt, old_delay, new_delay),\n\n\tTP_STRUCT__entry (\n\t\t__string(devname, ioc_name(iocg->ioc))\n\t\t__string(cgroup, path)\n\t\t__field(u64, now)\n\t\t__field(u64, vnow)\n\t\t__field(u32, usage_pct)\n\t\t__field(u64, old_debt)\n\t\t__field(u64, new_debt)\n\t\t__field(u64, old_delay)\n\t\t__field(u64, new_delay)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(devname, ioc_name(iocg->ioc));\n\t\t__assign_str(cgroup, path);\n\t\t__entry->now = now->now;\n\t\t__entry->vnow = now->vnow;\n\t\t__entry->usage_pct = usage_pct;\n\t\t__entry->old_debt = old_debt;\n\t\t__entry->new_debt = new_debt;\n\t\t__entry->old_delay = old_delay;\n\t\t__entry->new_delay = new_delay;\n\t),\n\n\tTP_printk(\"[%s:%s] now=%llu:%llu usage=%u debt=%llu->%llu delay=%llu->%llu\",\n\t\t__get_str(devname), __get_str(cgroup),\n\t\t__entry->now, __entry->vnow, __entry->usage_pct,\n\t\t__entry->old_debt, __entry->new_debt,\n\t\t__entry->old_delay, __entry->new_delay\n\t)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}