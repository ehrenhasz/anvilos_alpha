{
  "module_name": "lock.h",
  "hash_id": "007ff2e54818f2c2084c046e09729af282a8d42c9e3b97ebf687e07904ab644c",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/lock.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM lock\n\n#if !defined(_TRACE_LOCK_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_LOCK_H\n\n#include <linux/sched.h>\n#include <linux/tracepoint.h>\n\n \n#define LCB_F_SPIN\t(1U << 0)\n#define LCB_F_READ\t(1U << 1)\n#define LCB_F_WRITE\t(1U << 2)\n#define LCB_F_RT\t(1U << 3)\n#define LCB_F_PERCPU\t(1U << 4)\n#define LCB_F_MUTEX\t(1U << 5)\n\n\n#ifdef CONFIG_LOCKDEP\n\n#include <linux/lockdep.h>\n\nTRACE_EVENT(lock_acquire,\n\n\tTP_PROTO(struct lockdep_map *lock, unsigned int subclass,\n\t\tint trylock, int read, int check,\n\t\tstruct lockdep_map *next_lock, unsigned long ip),\n\n\tTP_ARGS(lock, subclass, trylock, read, check, next_lock, ip),\n\n\tTP_STRUCT__entry(\n\t\t__field(unsigned int, flags)\n\t\t__string(name, lock->name)\n\t\t__field(void *, lockdep_addr)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->flags = (trylock ? 1 : 0) | (read ? 2 : 0);\n\t\t__assign_str(name, lock->name);\n\t\t__entry->lockdep_addr = lock;\n\t),\n\n\tTP_printk(\"%p %s%s%s\", __entry->lockdep_addr,\n\t\t  (__entry->flags & 1) ? \"try \" : \"\",\n\t\t  (__entry->flags & 2) ? \"read \" : \"\",\n\t\t  __get_str(name))\n);\n\nDECLARE_EVENT_CLASS(lock,\n\n\tTP_PROTO(struct lockdep_map *lock, unsigned long ip),\n\n\tTP_ARGS(lock, ip),\n\n\tTP_STRUCT__entry(\n\t\t__string(\tname, \tlock->name\t)\n\t\t__field(\tvoid *, lockdep_addr\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(name, lock->name);\n\t\t__entry->lockdep_addr = lock;\n\t),\n\n\tTP_printk(\"%p %s\",  __entry->lockdep_addr, __get_str(name))\n);\n\nDEFINE_EVENT(lock, lock_release,\n\n\tTP_PROTO(struct lockdep_map *lock, unsigned long ip),\n\n\tTP_ARGS(lock, ip)\n);\n\n#ifdef CONFIG_LOCK_STAT\n\nDEFINE_EVENT(lock, lock_contended,\n\n\tTP_PROTO(struct lockdep_map *lock, unsigned long ip),\n\n\tTP_ARGS(lock, ip)\n);\n\nDEFINE_EVENT(lock, lock_acquired,\n\n\tTP_PROTO(struct lockdep_map *lock, unsigned long ip),\n\n\tTP_ARGS(lock, ip)\n);\n\n#endif  \n#endif  \n\nTRACE_EVENT(contention_begin,\n\n\tTP_PROTO(void *lock, unsigned int flags),\n\n\tTP_ARGS(lock, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(void *, lock_addr)\n\t\t__field(unsigned int, flags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->lock_addr = lock;\n\t\t__entry->flags = flags;\n\t),\n\n\tTP_printk(\"%p (flags=%s)\", __entry->lock_addr,\n\t\t  __print_flags(__entry->flags, \"|\",\n\t\t\t\t{ LCB_F_SPIN,\t\t\"SPIN\" },\n\t\t\t\t{ LCB_F_READ,\t\t\"READ\" },\n\t\t\t\t{ LCB_F_WRITE,\t\t\"WRITE\" },\n\t\t\t\t{ LCB_F_RT,\t\t\"RT\" },\n\t\t\t\t{ LCB_F_PERCPU,\t\t\"PERCPU\" },\n\t\t\t\t{ LCB_F_MUTEX,\t\t\"MUTEX\" }\n\t\t\t  ))\n);\n\nTRACE_EVENT(contention_end,\n\n\tTP_PROTO(void *lock, int ret),\n\n\tTP_ARGS(lock, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(void *, lock_addr)\n\t\t__field(int, ret)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->lock_addr = lock;\n\t\t__entry->ret = ret;\n\t),\n\n\tTP_printk(\"%p (ret=%d)\", __entry->lock_addr, __entry->ret)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}