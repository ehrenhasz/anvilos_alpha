{
  "module_name": "erofs.h",
  "hash_id": "dd6b9f5e9083e5c9edc1ee0d50640e1b5fa4052c9c67842683cacabfd8791f8e",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/erofs.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM erofs\n\n#if !defined(_TRACE_EROFS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_EROFS_H\n\n#include <linux/tracepoint.h>\n#include <linux/fs.h>\n\nstruct erofs_map_blocks;\n\n#define show_dev(dev)\t\tMAJOR(dev), MINOR(dev)\n#define show_dev_nid(entry)\tshow_dev(entry->dev), entry->nid\n\n#define show_file_type(type)\t\t\t\t\t\t\\\n\t__print_symbolic(type,\t\t\t\t\t\t\\\n\t\t{ 0,\t\t\"FILE\" },\t\t\t\t\\\n\t\t{ 1,\t\t\"DIR\" })\n\n#define show_map_flags(flags) __print_flags(flags, \"|\",\t\\\n\t{ EROFS_GET_BLOCKS_FIEMAP,\t\"FIEMAP\" },\t\\\n\t{ EROFS_GET_BLOCKS_READMORE,\t\"READMORE\" },\t\\\n\t{ EROFS_GET_BLOCKS_FINDTAIL,\t\"FINDTAIL\" })\n\n#define show_mflags(flags) __print_flags(flags, \"\",\t\\\n\t{ EROFS_MAP_MAPPED,\t\t\"M\" },\t\t\\\n\t{ EROFS_MAP_META,\t\t\"I\" },\t\t\\\n\t{ EROFS_MAP_ENCODED,\t\t\"E\" },\t\t\\\n\t{ EROFS_MAP_FULL_MAPPED,\t\"F\" },\t\t\\\n\t{ EROFS_MAP_FRAGMENT,\t\t\"R\" },\t\t\\\n\t{ EROFS_MAP_PARTIAL_REF,\t\"P\" })\n\nTRACE_EVENT(erofs_lookup,\n\n\tTP_PROTO(struct inode *dir, struct dentry *dentry, unsigned int flags),\n\n\tTP_ARGS(dir, dentry, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\t\tdev\t)\n\t\t__field(erofs_nid_t,\tnid\t)\n\t\t__string(name,\t\tdentry->d_name.name\t)\n\t\t__field(unsigned int,\tflags\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= dir->i_sb->s_dev;\n\t\t__entry->nid\t= EROFS_I(dir)->nid;\n\t\t__assign_str(name, dentry->d_name.name);\n\t\t__entry->flags\t= flags;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), pnid = %llu, name:%s, flags:%x\",\n\t\tshow_dev_nid(__entry),\n\t\t__get_str(name),\n\t\t__entry->flags)\n);\n\nTRACE_EVENT(erofs_fill_inode,\n\tTP_PROTO(struct inode *inode),\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\t\tdev\t)\n\t\t__field(erofs_nid_t,\tnid\t)\n\t\t__field(erofs_blk_t,\tblkaddr )\n\t\t__field(unsigned int,\tofs\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->nid\t\t= EROFS_I(inode)->nid;\n\t\t__entry->blkaddr\t= erofs_blknr(inode->i_sb, erofs_iloc(inode));\n\t\t__entry->ofs\t\t= erofs_blkoff(inode->i_sb, erofs_iloc(inode));\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu, blkaddr %u ofs %u\",\n\t\t  show_dev_nid(__entry),\n\t\t  __entry->blkaddr, __entry->ofs)\n);\n\nTRACE_EVENT(erofs_read_folio,\n\n\tTP_PROTO(struct folio *folio, bool raw),\n\n\tTP_ARGS(folio, raw),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\t\tdev\t)\n\t\t__field(erofs_nid_t,    nid     )\n\t\t__field(int,\t\tdir\t)\n\t\t__field(pgoff_t,\tindex\t)\n\t\t__field(int,\t\tuptodate)\n\t\t__field(bool,\t\traw\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= folio->mapping->host->i_sb->s_dev;\n\t\t__entry->nid\t= EROFS_I(folio->mapping->host)->nid;\n\t\t__entry->dir\t= S_ISDIR(folio->mapping->host->i_mode);\n\t\t__entry->index\t= folio->index;\n\t\t__entry->uptodate = folio_test_uptodate(folio);\n\t\t__entry->raw = raw;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu, %s, index = %lu, uptodate = %d \"\n\t\t\"raw = %d\",\n\t\tshow_dev_nid(__entry),\n\t\tshow_file_type(__entry->dir),\n\t\t(unsigned long)__entry->index,\n\t\t__entry->uptodate,\n\t\t__entry->raw)\n);\n\nTRACE_EVENT(erofs_readpages,\n\n\tTP_PROTO(struct inode *inode, pgoff_t start, unsigned int nrpage,\n\t\tbool raw),\n\n\tTP_ARGS(inode, start, nrpage, raw),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\t\tdev\t)\n\t\t__field(erofs_nid_t,\tnid\t)\n\t\t__field(pgoff_t,\tstart\t)\n\t\t__field(unsigned int,\tnrpage\t)\n\t\t__field(bool,\t\traw\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->nid\t= EROFS_I(inode)->nid;\n\t\t__entry->start\t= start;\n\t\t__entry->nrpage\t= nrpage;\n\t\t__entry->raw\t= raw;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu, start = %lu nrpage = %u raw = %d\",\n\t\tshow_dev_nid(__entry),\n\t\t(unsigned long)__entry->start,\n\t\t__entry->nrpage,\n\t\t__entry->raw)\n);\n\nDECLARE_EVENT_CLASS(erofs__map_blocks_enter,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned int flags),\n\n\tTP_ARGS(inode, map, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\terofs_nid_t,\tnid\t\t)\n\t\t__field(\terofs_off_t,\tla\t\t)\n\t\t__field(\tu64,\t\tllen\t\t)\n\t\t__field(\tunsigned int,\tflags\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->nid    = EROFS_I(inode)->nid;\n\t\t__entry->la\t= map->m_la;\n\t\t__entry->llen\t= map->m_llen;\n\t\t__entry->flags\t= flags;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu, la %llu llen %llu flags %s\",\n\t\t  show_dev_nid(__entry),\n\t\t  __entry->la, __entry->llen,\n\t\t  __entry->flags ? show_map_flags(__entry->flags) : \"NULL\")\n);\n\nDEFINE_EVENT(erofs__map_blocks_enter, erofs_map_blocks_enter,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned flags),\n\n\tTP_ARGS(inode, map, flags)\n);\n\nDEFINE_EVENT(erofs__map_blocks_enter, z_erofs_map_blocks_iter_enter,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned int flags),\n\n\tTP_ARGS(inode, map, flags)\n);\n\nDECLARE_EVENT_CLASS(erofs__map_blocks_exit,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned int flags, int ret),\n\n\tTP_ARGS(inode, map, flags, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\terofs_nid_t,\tnid\t\t)\n\t\t__field(        unsigned int,   flags           )\n\t\t__field(\terofs_off_t,\tla\t\t)\n\t\t__field(\terofs_off_t,\tpa\t\t)\n\t\t__field(\tu64,\t\tllen\t\t)\n\t\t__field(\tu64,\t\tplen\t\t)\n\t\t__field(        unsigned int,\tmflags\t\t)\n\t\t__field(\tint,\t\tret\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->nid    = EROFS_I(inode)->nid;\n\t\t__entry->flags\t= flags;\n\t\t__entry->la\t= map->m_la;\n\t\t__entry->pa\t= map->m_pa;\n\t\t__entry->llen\t= map->m_llen;\n\t\t__entry->plen\t= map->m_plen;\n\t\t__entry->mflags\t= map->m_flags;\n\t\t__entry->ret\t= ret;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu, flags %s \"\n\t\t  \"la %llu pa %llu llen %llu plen %llu mflags %s ret %d\",\n\t\t  show_dev_nid(__entry),\n\t\t  __entry->flags ? show_map_flags(__entry->flags) : \"NULL\",\n\t\t  __entry->la, __entry->pa, __entry->llen, __entry->plen,\n\t\t  show_mflags(__entry->mflags), __entry->ret)\n);\n\nDEFINE_EVENT(erofs__map_blocks_exit, erofs_map_blocks_exit,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned flags, int ret),\n\n\tTP_ARGS(inode, map, flags, ret)\n);\n\nDEFINE_EVENT(erofs__map_blocks_exit, z_erofs_map_blocks_iter_exit,\n\tTP_PROTO(struct inode *inode, struct erofs_map_blocks *map,\n\t\t unsigned int flags, int ret),\n\n\tTP_ARGS(inode, map, flags, ret)\n);\n\nTRACE_EVENT(erofs_destroy_inode,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\terofs_nid_t,\tnid\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->nid\t= EROFS_I(inode)->nid;\n\t),\n\n\tTP_printk(\"dev = (%d,%d), nid = %llu\", show_dev_nid(__entry))\n);\n\n#endif  \n\n  \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}