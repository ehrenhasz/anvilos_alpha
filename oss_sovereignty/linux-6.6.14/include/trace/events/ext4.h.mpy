{
  "module_name": "ext4.h",
  "hash_id": "f7fb8492abfc905f05869672f3406599c2dbb85da504fef114902ed04cae4b31",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/ext4.h",
  "human_readable_source": " \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM ext4\n\n#if !defined(_TRACE_EXT4_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_EXT4_H\n\n#include <linux/writeback.h>\n#include <linux/tracepoint.h>\n\nstruct ext4_allocation_context;\nstruct ext4_allocation_request;\nstruct ext4_extent;\nstruct ext4_prealloc_space;\nstruct ext4_inode_info;\nstruct mpage_da_data;\nstruct ext4_map_blocks;\nstruct extent_status;\nstruct ext4_fsmap;\nstruct partial_cluster;\n\n#define EXT4_I(inode) (container_of(inode, struct ext4_inode_info, vfs_inode))\n\n#define show_mballoc_flags(flags) __print_flags(flags, \"|\",\t\\\n\t{ EXT4_MB_HINT_MERGE,\t\t\"HINT_MERGE\" },\t\t\\\n\t{ EXT4_MB_HINT_RESERVED,\t\"HINT_RESV\" },\t\t\\\n\t{ EXT4_MB_HINT_METADATA,\t\"HINT_MDATA\" },\t\t\\\n\t{ EXT4_MB_HINT_FIRST,\t\t\"HINT_FIRST\" },\t\t\\\n\t{ EXT4_MB_HINT_BEST,\t\t\"HINT_BEST\" },\t\t\\\n\t{ EXT4_MB_HINT_DATA,\t\t\"HINT_DATA\" },\t\t\\\n\t{ EXT4_MB_HINT_NOPREALLOC,\t\"HINT_NOPREALLOC\" },\t\\\n\t{ EXT4_MB_HINT_GROUP_ALLOC,\t\"HINT_GRP_ALLOC\" },\t\\\n\t{ EXT4_MB_HINT_GOAL_ONLY,\t\"HINT_GOAL_ONLY\" },\t\\\n\t{ EXT4_MB_HINT_TRY_GOAL,\t\"HINT_TRY_GOAL\" },\t\\\n\t{ EXT4_MB_DELALLOC_RESERVED,\t\"DELALLOC_RESV\" },\t\\\n\t{ EXT4_MB_STREAM_ALLOC,\t\t\"STREAM_ALLOC\" },\t\\\n\t{ EXT4_MB_USE_ROOT_BLOCKS,\t\"USE_ROOT_BLKS\" },\t\\\n\t{ EXT4_MB_USE_RESERVED,\t\t\"USE_RESV\" },\t\t\\\n\t{ EXT4_MB_STRICT_CHECK,\t\t\"STRICT_CHECK\" })\n\n#define show_map_flags(flags) __print_flags(flags, \"|\",\t\t\t\\\n\t{ EXT4_GET_BLOCKS_CREATE,\t\t\"CREATE\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_UNWRIT_EXT,\t\t\"UNWRIT\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_DELALLOC_RESERVE,\t\"DELALLOC\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_PRE_IO,\t\t\"PRE_IO\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_CONVERT,\t\t\"CONVERT\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_METADATA_NOFAIL,\t\"METADATA_NOFAIL\" },\t\\\n\t{ EXT4_GET_BLOCKS_NO_NORMALIZE,\t\t\"NO_NORMALIZE\" },\t\\\n\t{ EXT4_GET_BLOCKS_CONVERT_UNWRITTEN,\t\"CONVERT_UNWRITTEN\" },  \\\n\t{ EXT4_GET_BLOCKS_ZERO,\t\t\t\"ZERO\" },\t\t\\\n\t{ EXT4_GET_BLOCKS_IO_SUBMIT,\t\t\"IO_SUBMIT\" },\t\t\\\n\t{ EXT4_EX_NOCACHE,\t\t\t\"EX_NOCACHE\" })\n\n \nTRACE_DEFINE_ENUM(BH_New);\nTRACE_DEFINE_ENUM(BH_Mapped);\nTRACE_DEFINE_ENUM(BH_Unwritten);\nTRACE_DEFINE_ENUM(BH_Boundary);\n\n#define show_mflags(flags) __print_flags(flags, \"\",\t\\\n\t{ EXT4_MAP_NEW,\t\t\"N\" },\t\t\t\\\n\t{ EXT4_MAP_MAPPED,\t\"M\" },\t\t\t\\\n\t{ EXT4_MAP_UNWRITTEN,\t\"U\" },\t\t\t\\\n\t{ EXT4_MAP_BOUNDARY,\t\"B\" })\n\n#define show_free_flags(flags) __print_flags(flags, \"|\",\t\\\n\t{ EXT4_FREE_BLOCKS_METADATA,\t\t\"METADATA\" },\t\\\n\t{ EXT4_FREE_BLOCKS_FORGET,\t\t\"FORGET\" },\t\\\n\t{ EXT4_FREE_BLOCKS_VALIDATED,\t\t\"VALIDATED\" },\t\\\n\t{ EXT4_FREE_BLOCKS_NO_QUOT_UPDATE,\t\"NO_QUOTA\" },\t\\\n\t{ EXT4_FREE_BLOCKS_NOFREE_FIRST_CLUSTER,\"1ST_CLUSTER\" },\\\n\t{ EXT4_FREE_BLOCKS_NOFREE_LAST_CLUSTER,\t\"LAST_CLUSTER\" })\n\nTRACE_DEFINE_ENUM(ES_WRITTEN_B);\nTRACE_DEFINE_ENUM(ES_UNWRITTEN_B);\nTRACE_DEFINE_ENUM(ES_DELAYED_B);\nTRACE_DEFINE_ENUM(ES_HOLE_B);\nTRACE_DEFINE_ENUM(ES_REFERENCED_B);\n\n#define show_extent_status(status) __print_flags(status, \"\",\t\\\n\t{ EXTENT_STATUS_WRITTEN,\t\"W\" },\t\t\t\\\n\t{ EXTENT_STATUS_UNWRITTEN,\t\"U\" },\t\t\t\\\n\t{ EXTENT_STATUS_DELAYED,\t\"D\" },\t\t\t\\\n\t{ EXTENT_STATUS_HOLE,\t\t\"H\" },\t\t\t\\\n\t{ EXTENT_STATUS_REFERENCED,\t\"R\" })\n\n#define show_falloc_mode(mode) __print_flags(mode, \"|\",\t\t\\\n\t{ FALLOC_FL_KEEP_SIZE,\t\t\"KEEP_SIZE\"},\t\t\\\n\t{ FALLOC_FL_PUNCH_HOLE,\t\t\"PUNCH_HOLE\"},\t\t\\\n\t{ FALLOC_FL_NO_HIDE_STALE,\t\"NO_HIDE_STALE\"},\t\\\n\t{ FALLOC_FL_COLLAPSE_RANGE,\t\"COLLAPSE_RANGE\"},\t\\\n\t{ FALLOC_FL_ZERO_RANGE,\t\t\"ZERO_RANGE\"})\n\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_XATTR);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_CROSS_RENAME);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_JOURNAL_FLAG_CHANGE);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_NOMEM);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_SWAP_BOOT);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_RESIZE);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_RENAME_DIR);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_FALLOC_RANGE);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_INODE_JOURNAL_DATA);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_ENCRYPTED_FILENAME);\nTRACE_DEFINE_ENUM(EXT4_FC_REASON_MAX);\n\n#define show_fc_reason(reason)\t\t\t\t\t\t\\\n\t__print_symbolic(reason,\t\t\t\t\t\\\n\t\t{ EXT4_FC_REASON_XATTR,\t\t\"XATTR\"},\t\t\\\n\t\t{ EXT4_FC_REASON_CROSS_RENAME,\t\"CROSS_RENAME\"},\t\\\n\t\t{ EXT4_FC_REASON_JOURNAL_FLAG_CHANGE, \"JOURNAL_FLAG_CHANGE\"}, \\\n\t\t{ EXT4_FC_REASON_NOMEM,\t\"NO_MEM\"},\t\t\t\\\n\t\t{ EXT4_FC_REASON_SWAP_BOOT,\t\"SWAP_BOOT\"},\t\t\\\n\t\t{ EXT4_FC_REASON_RESIZE,\t\"RESIZE\"},\t\t\\\n\t\t{ EXT4_FC_REASON_RENAME_DIR,\t\"RENAME_DIR\"},\t\t\\\n\t\t{ EXT4_FC_REASON_FALLOC_RANGE,\t\"FALLOC_RANGE\"},\t\\\n\t\t{ EXT4_FC_REASON_INODE_JOURNAL_DATA,\t\"INODE_JOURNAL_DATA\"}, \\\n\t\t{ EXT4_FC_REASON_ENCRYPTED_FILENAME,\t\"ENCRYPTED_FILENAME\"})\n\nTRACE_DEFINE_ENUM(CR_POWER2_ALIGNED);\nTRACE_DEFINE_ENUM(CR_GOAL_LEN_FAST);\nTRACE_DEFINE_ENUM(CR_BEST_AVAIL_LEN);\nTRACE_DEFINE_ENUM(CR_GOAL_LEN_SLOW);\nTRACE_DEFINE_ENUM(CR_ANY_FREE);\n\n#define show_criteria(cr)                                               \\\n\t__print_symbolic(cr,                                            \\\n\t\t\t { CR_POWER2_ALIGNED, \"CR_POWER2_ALIGNED\" },\t\\\n\t\t\t { CR_GOAL_LEN_FAST, \"CR_GOAL_LEN_FAST\" },      \\\n\t\t\t { CR_BEST_AVAIL_LEN, \"CR_BEST_AVAIL_LEN\" },    \\\n\t\t\t { CR_GOAL_LEN_SLOW, \"CR_GOAL_LEN_SLOW\" },      \\\n\t\t\t { CR_ANY_FREE, \"CR_ANY_FREE\" })\n\nTRACE_EVENT(ext4_other_inode_update_time,\n\tTP_PROTO(struct inode *inode, ino_t orig_ino),\n\n\tTP_ARGS(inode, orig_ino),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tino_t,\torig_ino\t\t)\n\t\t__field(\tuid_t,\tuid\t\t\t)\n\t\t__field(\tgid_t,\tgid\t\t\t)\n\t\t__field(\t__u16, mode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->orig_ino = orig_ino;\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->uid\t= i_uid_read(inode);\n\t\t__entry->gid\t= i_gid_read(inode);\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d orig_ino %lu ino %lu mode 0%o uid %u gid %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->orig_ino,\n\t\t  (unsigned long) __entry->ino, __entry->mode,\n\t\t  __entry->uid, __entry->gid)\n);\n\nTRACE_EVENT(ext4_free_inode,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tuid_t,\tuid\t\t\t)\n\t\t__field(\tgid_t,\tgid\t\t\t)\n\t\t__field(\t__u64, blocks\t\t\t)\n\t\t__field(\t__u16, mode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->uid\t= i_uid_read(inode);\n\t\t__entry->gid\t= i_gid_read(inode);\n\t\t__entry->blocks\t= inode->i_blocks;\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o uid %u gid %u blocks %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->mode,\n\t\t  __entry->uid, __entry->gid, __entry->blocks)\n);\n\nTRACE_EVENT(ext4_request_inode,\n\tTP_PROTO(struct inode *dir, int mode),\n\n\tTP_ARGS(dir, mode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tdir\t\t\t)\n\t\t__field(\t__u16, mode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= dir->i_sb->s_dev;\n\t\t__entry->dir\t= dir->i_ino;\n\t\t__entry->mode\t= mode;\n\t),\n\n\tTP_printk(\"dev %d,%d dir %lu mode 0%o\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->dir, __entry->mode)\n);\n\nTRACE_EVENT(ext4_allocate_inode,\n\tTP_PROTO(struct inode *inode, struct inode *dir, int mode),\n\n\tTP_ARGS(inode, dir, mode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tino_t,\tdir\t\t\t)\n\t\t__field(\t__u16,\tmode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->dir\t= dir->i_ino;\n\t\t__entry->mode\t= mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu dir %lu mode 0%o\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned long) __entry->dir, __entry->mode)\n);\n\nTRACE_EVENT(ext4_evict_inode,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tint,\tnlink\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->nlink\t= inode->i_nlink;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu nlink %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->nlink)\n);\n\nTRACE_EVENT(ext4_drop_inode,\n\tTP_PROTO(struct inode *inode, int drop),\n\n\tTP_ARGS(inode, drop),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tint,\tdrop\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->drop\t= drop;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu drop %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->drop)\n);\n\nTRACE_EVENT(ext4_nfs_commit_metadata,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino)\n);\n\nTRACE_EVENT(ext4_mark_inode_dirty,\n\tTP_PROTO(struct inode *inode, unsigned long IP),\n\n\tTP_ARGS(inode, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(unsigned long,\tip\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->ip\t= IP;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, (void *)__entry->ip)\n);\n\nTRACE_EVENT(ext4_begin_ordered_truncate,\n\tTP_PROTO(struct inode *inode, loff_t new_size),\n\n\tTP_ARGS(inode, new_size),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\tnew_size\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->new_size\t= new_size;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu new_size %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->new_size)\n);\n\nDECLARE_EVENT_CLASS(ext4__write_begin,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len),\n\n\tTP_ARGS(inode, pos, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\tpos\t\t\t)\n\t\t__field(\tunsigned int, len\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->pos\t= pos;\n\t\t__entry->len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu pos %lld len %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->pos, __entry->len)\n);\n\nDEFINE_EVENT(ext4__write_begin, ext4_write_begin,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len),\n\n\tTP_ARGS(inode, pos, len)\n);\n\nDEFINE_EVENT(ext4__write_begin, ext4_da_write_begin,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len),\n\n\tTP_ARGS(inode, pos, len)\n);\n\nDECLARE_EVENT_CLASS(ext4__write_end,\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len,\n\t\t\tunsigned int copied),\n\n\tTP_ARGS(inode, pos, len, copied),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\tpos\t\t\t)\n\t\t__field(\tunsigned int, len\t\t)\n\t\t__field(\tunsigned int, copied\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->pos\t= pos;\n\t\t__entry->len\t= len;\n\t\t__entry->copied\t= copied;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu pos %lld len %u copied %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->pos, __entry->len, __entry->copied)\n);\n\nDEFINE_EVENT(ext4__write_end, ext4_write_end,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len,\n\t\t unsigned int copied),\n\n\tTP_ARGS(inode, pos, len, copied)\n);\n\nDEFINE_EVENT(ext4__write_end, ext4_journalled_write_end,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len,\n\t\t unsigned int copied),\n\n\tTP_ARGS(inode, pos, len, copied)\n);\n\nDEFINE_EVENT(ext4__write_end, ext4_da_write_end,\n\n\tTP_PROTO(struct inode *inode, loff_t pos, unsigned int len,\n\t\t unsigned int copied),\n\n\tTP_ARGS(inode, pos, len, copied)\n);\n\nTRACE_EVENT(ext4_writepages,\n\tTP_PROTO(struct inode *inode, struct writeback_control *wbc),\n\n\tTP_ARGS(inode, wbc),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tlong,\tnr_to_write\t\t)\n\t\t__field(\tlong,\tpages_skipped\t\t)\n\t\t__field(\tloff_t,\trange_start\t\t)\n\t\t__field(\tloff_t,\trange_end\t\t)\n\t\t__field(       pgoff_t,\twriteback_index\t\t)\n\t\t__field(\tint,\tsync_mode\t\t)\n\t\t__field(\tchar,\tfor_kupdate\t\t)\n\t\t__field(\tchar,\trange_cyclic\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->nr_to_write\t= wbc->nr_to_write;\n\t\t__entry->pages_skipped\t= wbc->pages_skipped;\n\t\t__entry->range_start\t= wbc->range_start;\n\t\t__entry->range_end\t= wbc->range_end;\n\t\t__entry->writeback_index = inode->i_mapping->writeback_index;\n\t\t__entry->sync_mode\t= wbc->sync_mode;\n\t\t__entry->for_kupdate\t= wbc->for_kupdate;\n\t\t__entry->range_cyclic\t= wbc->range_cyclic;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu nr_to_write %ld pages_skipped %ld \"\n\t\t  \"range_start %lld range_end %lld sync_mode %d \"\n\t\t  \"for_kupdate %d range_cyclic %d writeback_index %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->nr_to_write,\n\t\t  __entry->pages_skipped, __entry->range_start,\n\t\t  __entry->range_end, __entry->sync_mode,\n\t\t  __entry->for_kupdate, __entry->range_cyclic,\n\t\t  (unsigned long) __entry->writeback_index)\n);\n\nTRACE_EVENT(ext4_da_write_pages,\n\tTP_PROTO(struct inode *inode, pgoff_t first_page,\n\t\t struct writeback_control *wbc),\n\n\tTP_ARGS(inode, first_page, wbc),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(      pgoff_t,\tfirst_page\t\t)\n\t\t__field(\t long,\tnr_to_write\t\t)\n\t\t__field(\t  int,\tsync_mode\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->first_page\t= first_page;\n\t\t__entry->nr_to_write\t= wbc->nr_to_write;\n\t\t__entry->sync_mode\t= wbc->sync_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu first_page %lu nr_to_write %ld \"\n\t\t  \"sync_mode %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->first_page,\n\t\t  __entry->nr_to_write, __entry->sync_mode)\n);\n\nTRACE_EVENT(ext4_da_write_pages_extent,\n\tTP_PROTO(struct inode *inode, struct ext4_map_blocks *map),\n\n\tTP_ARGS(inode, map),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tlblk\t\t\t)\n\t\t__field(\t__u32,\tlen\t\t\t)\n\t\t__field(\t__u32,\tflags\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->lblk\t\t= map->m_lblk;\n\t\t__entry->len\t\t= map->m_len;\n\t\t__entry->flags\t\t= map->m_flags;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %llu len %u flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->lblk, __entry->len,\n\t\t  show_mflags(__entry->flags))\n);\n\nTRACE_EVENT(ext4_writepages_result,\n\tTP_PROTO(struct inode *inode, struct writeback_control *wbc,\n\t\t\tint ret, int pages_written),\n\n\tTP_ARGS(inode, wbc, ret, pages_written),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tint,\tret\t\t\t)\n\t\t__field(\tint,\tpages_written\t\t)\n\t\t__field(\tlong,\tpages_skipped\t\t)\n\t\t__field(       pgoff_t,\twriteback_index\t\t)\n\t\t__field(\tint,\tsync_mode\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->ret\t\t= ret;\n\t\t__entry->pages_written\t= pages_written;\n\t\t__entry->pages_skipped\t= wbc->pages_skipped;\n\t\t__entry->writeback_index = inode->i_mapping->writeback_index;\n\t\t__entry->sync_mode\t= wbc->sync_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu ret %d pages_written %d pages_skipped %ld \"\n\t\t  \"sync_mode %d writeback_index %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->ret,\n\t\t  __entry->pages_written, __entry->pages_skipped,\n\t\t  __entry->sync_mode,\n\t\t  (unsigned long) __entry->writeback_index)\n);\n\nDECLARE_EVENT_CLASS(ext4__folio_op,\n\tTP_PROTO(struct inode *inode, struct folio *folio),\n\n\tTP_ARGS(inode, folio),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tpgoff_t, index\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->index\t= folio->index;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu folio_index %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned long) __entry->index)\n);\n\nDEFINE_EVENT(ext4__folio_op, ext4_read_folio,\n\n\tTP_PROTO(struct inode *inode, struct folio *folio),\n\n\tTP_ARGS(inode, folio)\n);\n\nDEFINE_EVENT(ext4__folio_op, ext4_release_folio,\n\n\tTP_PROTO(struct inode *inode, struct folio *folio),\n\n\tTP_ARGS(inode, folio)\n);\n\nDECLARE_EVENT_CLASS(ext4_invalidate_folio_op,\n\tTP_PROTO(struct folio *folio, size_t offset, size_t length),\n\n\tTP_ARGS(folio, offset, length),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tpgoff_t, index\t\t\t)\n\t\t__field(\tsize_t, offset\t\t\t)\n\t\t__field(\tsize_t, length\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= folio->mapping->host->i_sb->s_dev;\n\t\t__entry->ino\t= folio->mapping->host->i_ino;\n\t\t__entry->index\t= folio->index;\n\t\t__entry->offset\t= offset;\n\t\t__entry->length\t= length;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu folio_index %lu offset %zu length %zu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned long) __entry->index,\n\t\t  __entry->offset, __entry->length)\n);\n\nDEFINE_EVENT(ext4_invalidate_folio_op, ext4_invalidate_folio,\n\tTP_PROTO(struct folio *folio, size_t offset, size_t length),\n\n\tTP_ARGS(folio, offset, length)\n);\n\nDEFINE_EVENT(ext4_invalidate_folio_op, ext4_journalled_invalidate_folio,\n\tTP_PROTO(struct folio *folio, size_t offset, size_t length),\n\n\tTP_ARGS(folio, offset, length)\n);\n\nTRACE_EVENT(ext4_discard_blocks,\n\tTP_PROTO(struct super_block *sb, unsigned long long blk,\n\t\t\tunsigned long long count),\n\n\tTP_ARGS(sb, blk, count),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u64,\tblk\t\t\t)\n\t\t__field(\t__u64,\tcount\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->blk\t= blk;\n\t\t__entry->count\t= count;\n\t),\n\n\tTP_printk(\"dev %d,%d blk %llu count %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->blk, __entry->count)\n);\n\nDECLARE_EVENT_CLASS(ext4__mb_new_pa,\n\tTP_PROTO(struct ext4_allocation_context *ac,\n\t\t struct ext4_prealloc_space *pa),\n\n\tTP_ARGS(ac, pa),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tpa_pstart\t\t)\n\t\t__field(\t__u64,\tpa_lstart\t\t)\n\t\t__field(\t__u32,\tpa_len\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= ac->ac_sb->s_dev;\n\t\t__entry->ino\t\t= ac->ac_inode->i_ino;\n\t\t__entry->pa_pstart\t= pa->pa_pstart;\n\t\t__entry->pa_lstart\t= pa->pa_lstart;\n\t\t__entry->pa_len\t\t= pa->pa_len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu pstart %llu len %u lstart %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->pa_pstart, __entry->pa_len, __entry->pa_lstart)\n);\n\nDEFINE_EVENT(ext4__mb_new_pa, ext4_mb_new_inode_pa,\n\n\tTP_PROTO(struct ext4_allocation_context *ac,\n\t\t struct ext4_prealloc_space *pa),\n\n\tTP_ARGS(ac, pa)\n);\n\nDEFINE_EVENT(ext4__mb_new_pa, ext4_mb_new_group_pa,\n\n\tTP_PROTO(struct ext4_allocation_context *ac,\n\t\t struct ext4_prealloc_space *pa),\n\n\tTP_ARGS(ac, pa)\n);\n\nTRACE_EVENT(ext4_mb_release_inode_pa,\n\tTP_PROTO(struct ext4_prealloc_space *pa,\n\t\t unsigned long long block, unsigned int count),\n\n\tTP_ARGS(pa, block, count),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tblock\t\t\t)\n\t\t__field(\t__u32,\tcount\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= pa->pa_inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= pa->pa_inode->i_ino;\n\t\t__entry->block\t\t= block;\n\t\t__entry->count\t\t= count;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu block %llu count %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->block, __entry->count)\n);\n\nTRACE_EVENT(ext4_mb_release_group_pa,\n\tTP_PROTO(struct super_block *sb, struct ext4_prealloc_space *pa),\n\n\tTP_ARGS(sb, pa),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u64,\tpa_pstart\t\t)\n\t\t__field(\t__u32,\tpa_len\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->pa_pstart\t= pa->pa_pstart;\n\t\t__entry->pa_len\t\t= pa->pa_len;\n\t),\n\n\tTP_printk(\"dev %d,%d pstart %llu len %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->pa_pstart, __entry->pa_len)\n);\n\nTRACE_EVENT(ext4_discard_preallocations,\n\tTP_PROTO(struct inode *inode, unsigned int len, unsigned int needed),\n\n\tTP_ARGS(inode, len, needed),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\tunsigned int,\tlen\t\t)\n\t\t__field(\tunsigned int,\tneeded\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->len\t= len;\n\t\t__entry->needed\t= needed;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu len: %u needed %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->len,\n\t\t  __entry->needed)\n);\n\nTRACE_EVENT(ext4_mb_discard_preallocations,\n\tTP_PROTO(struct super_block *sb, int needed),\n\n\tTP_ARGS(sb, needed),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tint,\tneeded\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->needed\t= needed;\n\t),\n\n\tTP_printk(\"dev %d,%d needed %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->needed)\n);\n\nTRACE_EVENT(ext4_request_blocks,\n\tTP_PROTO(struct ext4_allocation_request *ar),\n\n\tTP_ARGS(ar),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tunsigned int, len\t\t)\n\t\t__field(\t__u32,  logical\t\t\t)\n\t\t__field(\t__u32,\tlleft\t\t\t)\n\t\t__field(\t__u32,\tlright\t\t\t)\n\t\t__field(\t__u64,\tgoal\t\t\t)\n\t\t__field(\t__u64,\tpleft\t\t\t)\n\t\t__field(\t__u64,\tpright\t\t\t)\n\t\t__field(\tunsigned int, flags\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= ar->inode->i_sb->s_dev;\n\t\t__entry->ino\t= ar->inode->i_ino;\n\t\t__entry->len\t= ar->len;\n\t\t__entry->logical = ar->logical;\n\t\t__entry->goal\t= ar->goal;\n\t\t__entry->lleft\t= ar->lleft;\n\t\t__entry->lright\t= ar->lright;\n\t\t__entry->pleft\t= ar->pleft;\n\t\t__entry->pright\t= ar->pright;\n\t\t__entry->flags\t= ar->flags;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu flags %s len %u lblk %u goal %llu \"\n\t\t  \"lleft %u lright %u pleft %llu pright %llu \",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, show_mballoc_flags(__entry->flags),\n\t\t  __entry->len, __entry->logical, __entry->goal,\n\t\t  __entry->lleft, __entry->lright, __entry->pleft,\n\t\t  __entry->pright)\n);\n\nTRACE_EVENT(ext4_allocate_blocks,\n\tTP_PROTO(struct ext4_allocation_request *ar, unsigned long long block),\n\n\tTP_ARGS(ar, block),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tblock\t\t\t)\n\t\t__field(\tunsigned int, len\t\t)\n\t\t__field(\t__u32,  logical\t\t\t)\n\t\t__field(\t__u32,\tlleft\t\t\t)\n\t\t__field(\t__u32,\tlright\t\t\t)\n\t\t__field(\t__u64,\tgoal\t\t\t)\n\t\t__field(\t__u64,\tpleft\t\t\t)\n\t\t__field(\t__u64,\tpright\t\t\t)\n\t\t__field(\tunsigned int, flags\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= ar->inode->i_sb->s_dev;\n\t\t__entry->ino\t= ar->inode->i_ino;\n\t\t__entry->block\t= block;\n\t\t__entry->len\t= ar->len;\n\t\t__entry->logical = ar->logical;\n\t\t__entry->goal\t= ar->goal;\n\t\t__entry->lleft\t= ar->lleft;\n\t\t__entry->lright\t= ar->lright;\n\t\t__entry->pleft\t= ar->pleft;\n\t\t__entry->pright\t= ar->pright;\n\t\t__entry->flags\t= ar->flags;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu flags %s len %u block %llu lblk %u \"\n\t\t  \"goal %llu lleft %u lright %u pleft %llu pright %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, show_mballoc_flags(__entry->flags),\n\t\t  __entry->len, __entry->block, __entry->logical,\n\t\t  __entry->goal,  __entry->lleft, __entry->lright,\n\t\t  __entry->pleft, __entry->pright)\n);\n\nTRACE_EVENT(ext4_free_blocks,\n\tTP_PROTO(struct inode *inode, __u64 block, unsigned long count,\n\t\t int flags),\n\n\tTP_ARGS(inode, block, count, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tblock\t\t\t)\n\t\t__field(\tunsigned long,\tcount\t\t)\n\t\t__field(\tint,\tflags\t\t\t)\n\t\t__field(\t__u16,\tmode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->block\t\t= block;\n\t\t__entry->count\t\t= count;\n\t\t__entry->flags\t\t= flags;\n\t\t__entry->mode\t\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o block %llu count %lu flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->mode, __entry->block, __entry->count,\n\t\t  show_free_flags(__entry->flags))\n);\n\nTRACE_EVENT(ext4_sync_file_enter,\n\tTP_PROTO(struct file *file, int datasync),\n\n\tTP_ARGS(file, datasync),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tino_t,\tparent\t\t\t)\n\t\t__field(\tint,\tdatasync\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct dentry *dentry = file->f_path.dentry;\n\n\t\t__entry->dev\t\t= dentry->d_sb->s_dev;\n\t\t__entry->ino\t\t= d_inode(dentry)->i_ino;\n\t\t__entry->datasync\t= datasync;\n\t\t__entry->parent\t\t= d_inode(dentry->d_parent)->i_ino;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu parent %lu datasync %d \",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned long) __entry->parent, __entry->datasync)\n);\n\nTRACE_EVENT(ext4_sync_file_exit,\n\tTP_PROTO(struct inode *inode, int ret),\n\n\tTP_ARGS(inode, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tint,\tret\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->ret\t\t= ret;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu ret %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->ret)\n);\n\nTRACE_EVENT(ext4_sync_fs,\n\tTP_PROTO(struct super_block *sb, int wait),\n\n\tTP_ARGS(sb, wait),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tint,\twait\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->wait\t= wait;\n\t),\n\n\tTP_printk(\"dev %d,%d wait %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->wait)\n);\n\nTRACE_EVENT(ext4_alloc_da_blocks,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field( unsigned int,\tdata_blocks\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->data_blocks = EXT4_I(inode)->i_reserved_data_blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu reserved_data_blocks %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->data_blocks)\n);\n\nTRACE_EVENT(ext4_mballoc_alloc,\n\tTP_PROTO(struct ext4_allocation_context *ac),\n\n\tTP_ARGS(ac),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u32, \torig_logical\t\t)\n\t\t__field(\t  int,\torig_start\t\t)\n\t\t__field(\t__u32, \torig_group\t\t)\n\t\t__field(\t  int,\torig_len\t\t)\n\t\t__field(\t__u32, \tgoal_logical\t\t)\n\t\t__field(\t  int,\tgoal_start\t\t)\n\t\t__field(\t__u32, \tgoal_group\t\t)\n\t\t__field(\t  int,\tgoal_len\t\t)\n\t\t__field(\t__u32, \tresult_logical\t\t)\n\t\t__field(\t  int,\tresult_start\t\t)\n\t\t__field(\t__u32, \tresult_group\t\t)\n\t\t__field(\t  int,\tresult_len\t\t)\n\t\t__field(\t__u16,\tfound\t\t\t)\n\t\t__field(\t__u16,\tgroups\t\t\t)\n\t\t__field(\t__u16,\tbuddy\t\t\t)\n\t\t__field(\t__u16,\tflags\t\t\t)\n\t\t__field(\t__u16,\ttail\t\t\t)\n\t\t__field(\t__u8,\tcr\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= ac->ac_inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= ac->ac_inode->i_ino;\n\t\t__entry->orig_logical\t= ac->ac_o_ex.fe_logical;\n\t\t__entry->orig_start\t= ac->ac_o_ex.fe_start;\n\t\t__entry->orig_group\t= ac->ac_o_ex.fe_group;\n\t\t__entry->orig_len\t= ac->ac_o_ex.fe_len;\n\t\t__entry->goal_logical\t= ac->ac_g_ex.fe_logical;\n\t\t__entry->goal_start\t= ac->ac_g_ex.fe_start;\n\t\t__entry->goal_group\t= ac->ac_g_ex.fe_group;\n\t\t__entry->goal_len\t= ac->ac_g_ex.fe_len;\n\t\t__entry->result_logical\t= ac->ac_f_ex.fe_logical;\n\t\t__entry->result_start\t= ac->ac_f_ex.fe_start;\n\t\t__entry->result_group\t= ac->ac_f_ex.fe_group;\n\t\t__entry->result_len\t= ac->ac_f_ex.fe_len;\n\t\t__entry->found\t\t= ac->ac_found;\n\t\t__entry->flags\t\t= ac->ac_flags;\n\t\t__entry->groups\t\t= ac->ac_groups_scanned;\n\t\t__entry->buddy\t\t= ac->ac_buddy;\n\t\t__entry->tail\t\t= ac->ac_tail;\n\t\t__entry->cr\t\t= ac->ac_criteria;\n\t),\n\n\tTP_printk(\"dev %d,%d inode %lu orig %u/%d/%u@%u goal %u/%d/%u@%u \"\n\t\t  \"result %u/%d/%u@%u blks %u grps %u cr %s flags %s \"\n\t\t  \"tail %u broken %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->orig_group, __entry->orig_start,\n\t\t  __entry->orig_len, __entry->orig_logical,\n\t\t  __entry->goal_group, __entry->goal_start,\n\t\t  __entry->goal_len, __entry->goal_logical,\n\t\t  __entry->result_group, __entry->result_start,\n\t\t  __entry->result_len, __entry->result_logical,\n\t\t  __entry->found, __entry->groups, show_criteria(__entry->cr),\n\t\t  show_mballoc_flags(__entry->flags), __entry->tail,\n\t\t  __entry->buddy ? 1 << __entry->buddy : 0)\n);\n\nTRACE_EVENT(ext4_mballoc_prealloc,\n\tTP_PROTO(struct ext4_allocation_context *ac),\n\n\tTP_ARGS(ac),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u32, \torig_logical\t\t)\n\t\t__field(\t  int,\torig_start\t\t)\n\t\t__field(\t__u32, \torig_group\t\t)\n\t\t__field(\t  int,\torig_len\t\t)\n\t\t__field(\t__u32, \tresult_logical\t\t)\n\t\t__field(\t  int,\tresult_start\t\t)\n\t\t__field(\t__u32, \tresult_group\t\t)\n\t\t__field(\t  int,\tresult_len\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= ac->ac_inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= ac->ac_inode->i_ino;\n\t\t__entry->orig_logical\t= ac->ac_o_ex.fe_logical;\n\t\t__entry->orig_start\t= ac->ac_o_ex.fe_start;\n\t\t__entry->orig_group\t= ac->ac_o_ex.fe_group;\n\t\t__entry->orig_len\t= ac->ac_o_ex.fe_len;\n\t\t__entry->result_logical\t= ac->ac_b_ex.fe_logical;\n\t\t__entry->result_start\t= ac->ac_b_ex.fe_start;\n\t\t__entry->result_group\t= ac->ac_b_ex.fe_group;\n\t\t__entry->result_len\t= ac->ac_b_ex.fe_len;\n\t),\n\n\tTP_printk(\"dev %d,%d inode %lu orig %u/%d/%u@%u result %u/%d/%u@%u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->orig_group, __entry->orig_start,\n\t\t  __entry->orig_len, __entry->orig_logical,\n\t\t  __entry->result_group, __entry->result_start,\n\t\t  __entry->result_len, __entry->result_logical)\n);\n\nDECLARE_EVENT_CLASS(ext4__mballoc,\n\tTP_PROTO(struct super_block *sb,\n\t\t struct inode *inode,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, inode, group, start, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t  int,\tresult_start\t\t)\n\t\t__field(\t__u32, \tresult_group\t\t)\n\t\t__field(\t  int,\tresult_len\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->ino\t\t= inode ? inode->i_ino : 0;\n\t\t__entry->result_start\t= start;\n\t\t__entry->result_group\t= group;\n\t\t__entry->result_len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d inode %lu extent %u/%d/%d \",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->result_group, __entry->result_start,\n\t\t  __entry->result_len)\n);\n\nDEFINE_EVENT(ext4__mballoc, ext4_mballoc_discard,\n\n\tTP_PROTO(struct super_block *sb,\n\t\t struct inode *inode,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, inode, group, start, len)\n);\n\nDEFINE_EVENT(ext4__mballoc, ext4_mballoc_free,\n\n\tTP_PROTO(struct super_block *sb,\n\t\t struct inode *inode,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, inode, group, start, len)\n);\n\nTRACE_EVENT(ext4_forget,\n\tTP_PROTO(struct inode *inode, int is_metadata, __u64 block),\n\n\tTP_ARGS(inode, is_metadata, block),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\tblock\t\t\t)\n\t\t__field(\tint,\tis_metadata\t\t)\n\t\t__field(\t__u16,\tmode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->block\t= block;\n\t\t__entry->is_metadata = is_metadata;\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o is_metadata %d block %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->mode, __entry->is_metadata, __entry->block)\n);\n\nTRACE_EVENT(ext4_da_update_reserve_space,\n\tTP_PROTO(struct inode *inode, int used_blocks, int quota_claim),\n\n\tTP_ARGS(inode, used_blocks, quota_claim),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\ti_blocks\t\t)\n\t\t__field(\tint,\tused_blocks\t\t)\n\t\t__field(\tint,\treserved_data_blocks\t)\n\t\t__field(\tint,\tquota_claim\t\t)\n\t\t__field(\t__u16,\tmode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->i_blocks = inode->i_blocks;\n\t\t__entry->used_blocks = used_blocks;\n\t\t__entry->reserved_data_blocks =\n\t\t\t\tEXT4_I(inode)->i_reserved_data_blocks;\n\t\t__entry->quota_claim = quota_claim;\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o i_blocks %llu used_blocks %d \"\n\t\t  \"reserved_data_blocks %d quota_claim %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->mode, __entry->i_blocks,\n\t\t  __entry->used_blocks, __entry->reserved_data_blocks,\n\t\t  __entry->quota_claim)\n);\n\nTRACE_EVENT(ext4_da_reserve_space,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\ti_blocks\t\t)\n\t\t__field(\tint,\treserved_data_blocks\t)\n\t\t__field(\t__u16,  mode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->i_blocks = inode->i_blocks;\n\t\t__entry->reserved_data_blocks = EXT4_I(inode)->i_reserved_data_blocks;\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o i_blocks %llu \"\n\t\t  \"reserved_data_blocks %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->mode, __entry->i_blocks,\n\t\t  __entry->reserved_data_blocks)\n);\n\nTRACE_EVENT(ext4_da_release_space,\n\tTP_PROTO(struct inode *inode, int freed_blocks),\n\n\tTP_ARGS(inode, freed_blocks),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\t__u64,\ti_blocks\t\t)\n\t\t__field(\tint,\tfreed_blocks\t\t)\n\t\t__field(\tint,\treserved_data_blocks\t)\n\t\t__field(\t__u16,  mode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->i_blocks = inode->i_blocks;\n\t\t__entry->freed_blocks = freed_blocks;\n\t\t__entry->reserved_data_blocks = EXT4_I(inode)->i_reserved_data_blocks;\n\t\t__entry->mode\t= inode->i_mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu mode 0%o i_blocks %llu freed_blocks %d \"\n\t\t  \"reserved_data_blocks %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->mode, __entry->i_blocks,\n\t\t  __entry->freed_blocks, __entry->reserved_data_blocks)\n);\n\nDECLARE_EVENT_CLASS(ext4__bitmap_load,\n\tTP_PROTO(struct super_block *sb, unsigned long group),\n\n\tTP_ARGS(sb, group),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u32,\tgroup\t\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->group\t= group;\n\t),\n\n\tTP_printk(\"dev %d,%d group %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->group)\n);\n\nDEFINE_EVENT(ext4__bitmap_load, ext4_mb_bitmap_load,\n\n\tTP_PROTO(struct super_block *sb, unsigned long group),\n\n\tTP_ARGS(sb, group)\n);\n\nDEFINE_EVENT(ext4__bitmap_load, ext4_mb_buddy_bitmap_load,\n\n\tTP_PROTO(struct super_block *sb, unsigned long group),\n\n\tTP_ARGS(sb, group)\n);\n\nDEFINE_EVENT(ext4__bitmap_load, ext4_load_inode_bitmap,\n\n\tTP_PROTO(struct super_block *sb, unsigned long group),\n\n\tTP_ARGS(sb, group)\n);\n\nTRACE_EVENT(ext4_read_block_bitmap_load,\n\tTP_PROTO(struct super_block *sb, unsigned long group, bool prefetch),\n\n\tTP_ARGS(sb, group, prefetch),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u32,\tgroup\t\t\t)\n\t\t__field(\tbool,\tprefetch\t\t)\n\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->group\t= group;\n\t\t__entry->prefetch = prefetch;\n\t),\n\n\tTP_printk(\"dev %d,%d group %u prefetch %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->group, __entry->prefetch)\n);\n\nDECLARE_EVENT_CLASS(ext4__fallocate_mode,\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len, int mode),\n\n\tTP_ARGS(inode, offset, len, mode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\toffset\t\t\t)\n\t\t__field(\tloff_t, len\t\t\t)\n\t\t__field(\tint,\tmode\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->offset\t= offset;\n\t\t__entry->len\t= len;\n\t\t__entry->mode\t= mode;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu offset %lld len %lld mode %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->offset, __entry->len,\n\t\t  show_falloc_mode(__entry->mode))\n);\n\nDEFINE_EVENT(ext4__fallocate_mode, ext4_fallocate_enter,\n\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len, int mode),\n\n\tTP_ARGS(inode, offset, len, mode)\n);\n\nDEFINE_EVENT(ext4__fallocate_mode, ext4_punch_hole,\n\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len, int mode),\n\n\tTP_ARGS(inode, offset, len, mode)\n);\n\nDEFINE_EVENT(ext4__fallocate_mode, ext4_zero_range,\n\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len, int mode),\n\n\tTP_ARGS(inode, offset, len, mode)\n);\n\nTRACE_EVENT(ext4_fallocate_exit,\n\tTP_PROTO(struct inode *inode, loff_t offset,\n\t\t unsigned int max_blocks, int ret),\n\n\tTP_ARGS(inode, offset, max_blocks, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\tpos\t\t\t)\n\t\t__field(\tunsigned int,\tblocks\t\t)\n\t\t__field(\tint, \tret\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->pos\t= offset;\n\t\t__entry->blocks\t= max_blocks;\n\t\t__entry->ret\t= ret;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu pos %lld blocks %u ret %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->pos, __entry->blocks,\n\t\t  __entry->ret)\n);\n\nTRACE_EVENT(ext4_unlink_enter,\n\tTP_PROTO(struct inode *parent, struct dentry *dentry),\n\n\tTP_ARGS(parent, dentry),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tino_t,\tparent\t\t\t)\n\t\t__field(\tloff_t,\tsize\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= dentry->d_sb->s_dev;\n\t\t__entry->ino\t\t= d_inode(dentry)->i_ino;\n\t\t__entry->parent\t\t= parent->i_ino;\n\t\t__entry->size\t\t= d_inode(dentry)->i_size;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu size %lld parent %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->size,\n\t\t  (unsigned long) __entry->parent)\n);\n\nTRACE_EVENT(ext4_unlink_exit,\n\tTP_PROTO(struct dentry *dentry, int ret),\n\n\tTP_ARGS(dentry, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tint,\tret\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= dentry->d_sb->s_dev;\n\t\t__entry->ino\t\t= d_inode(dentry)->i_ino;\n\t\t__entry->ret\t\t= ret;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu ret %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->ret)\n);\n\nDECLARE_EVENT_CLASS(ext4__truncate,\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\t__u64,\t\tblocks\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->ino    = inode->i_ino;\n\t\t__entry->blocks\t= inode->i_blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu blocks %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->blocks)\n);\n\nDEFINE_EVENT(ext4__truncate, ext4_truncate_enter,\n\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode)\n);\n\nDEFINE_EVENT(ext4__truncate, ext4_truncate_exit,\n\n\tTP_PROTO(struct inode *inode),\n\n\tTP_ARGS(inode)\n);\n\n \nTRACE_EVENT(ext4_ext_convert_to_initialized_enter,\n\tTP_PROTO(struct inode *inode, struct ext4_map_blocks *map,\n\t\t struct ext4_extent *ux),\n\n\tTP_ARGS(inode, map, ux),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_lblk_t,\tm_lblk\t)\n\t\t__field(\tunsigned,\tm_len\t)\n\t\t__field(\text4_lblk_t,\tu_lblk\t)\n\t\t__field(\tunsigned,\tu_len\t)\n\t\t__field(\text4_fsblk_t,\tu_pblk\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->m_lblk\t\t= map->m_lblk;\n\t\t__entry->m_len\t\t= map->m_len;\n\t\t__entry->u_lblk\t\t= le32_to_cpu(ux->ee_block);\n\t\t__entry->u_len\t\t= ext4_ext_get_actual_len(ux);\n\t\t__entry->u_pblk\t\t= ext4_ext_pblock(ux);\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu m_lblk %u m_len %u u_lblk %u u_len %u \"\n\t\t  \"u_pblk %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->m_lblk, __entry->m_len,\n\t\t  __entry->u_lblk, __entry->u_len, __entry->u_pblk)\n);\n\n \nTRACE_EVENT(ext4_ext_convert_to_initialized_fastpath,\n\tTP_PROTO(struct inode *inode, struct ext4_map_blocks *map,\n\t\t struct ext4_extent *ux, struct ext4_extent *ix),\n\n\tTP_ARGS(inode, map, ux, ix),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_lblk_t,\tm_lblk\t)\n\t\t__field(\tunsigned,\tm_len\t)\n\t\t__field(\text4_lblk_t,\tu_lblk\t)\n\t\t__field(\tunsigned,\tu_len\t)\n\t\t__field(\text4_fsblk_t,\tu_pblk\t)\n\t\t__field(\text4_lblk_t,\ti_lblk\t)\n\t\t__field(\tunsigned,\ti_len\t)\n\t\t__field(\text4_fsblk_t,\ti_pblk\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->m_lblk\t\t= map->m_lblk;\n\t\t__entry->m_len\t\t= map->m_len;\n\t\t__entry->u_lblk\t\t= le32_to_cpu(ux->ee_block);\n\t\t__entry->u_len\t\t= ext4_ext_get_actual_len(ux);\n\t\t__entry->u_pblk\t\t= ext4_ext_pblock(ux);\n\t\t__entry->i_lblk\t\t= le32_to_cpu(ix->ee_block);\n\t\t__entry->i_len\t\t= ext4_ext_get_actual_len(ix);\n\t\t__entry->i_pblk\t\t= ext4_ext_pblock(ix);\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu m_lblk %u m_len %u \"\n\t\t  \"u_lblk %u u_len %u u_pblk %llu \"\n\t\t  \"i_lblk %u i_len %u i_pblk %llu \",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->m_lblk, __entry->m_len,\n\t\t  __entry->u_lblk, __entry->u_len, __entry->u_pblk,\n\t\t  __entry->i_lblk, __entry->i_len, __entry->i_pblk)\n);\n\nDECLARE_EVENT_CLASS(ext4__map_blocks_enter,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk,\n\t\t unsigned int len, unsigned int flags),\n\n\tTP_ARGS(inode, lblk, len, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\tunsigned int,\tlen\t\t)\n\t\t__field(\tunsigned int,\tflags\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->ino    = inode->i_ino;\n\t\t__entry->lblk\t= lblk;\n\t\t__entry->len\t= len;\n\t\t__entry->flags\t= flags;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %u len %u flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->len, show_map_flags(__entry->flags))\n);\n\nDEFINE_EVENT(ext4__map_blocks_enter, ext4_ext_map_blocks_enter,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk,\n\t\t unsigned len, unsigned flags),\n\n\tTP_ARGS(inode, lblk, len, flags)\n);\n\nDEFINE_EVENT(ext4__map_blocks_enter, ext4_ind_map_blocks_enter,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk,\n\t\t unsigned len, unsigned flags),\n\n\tTP_ARGS(inode, lblk, len, flags)\n);\n\nDECLARE_EVENT_CLASS(ext4__map_blocks_exit,\n\tTP_PROTO(struct inode *inode, unsigned flags, struct ext4_map_blocks *map,\n\t\t int ret),\n\n\tTP_ARGS(inode, flags, map, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\tunsigned int,\tflags\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\tunsigned int,\tlen\t\t)\n\t\t__field(\tunsigned int,\tmflags\t\t)\n\t\t__field(\tint,\t\tret\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->ino    = inode->i_ino;\n\t\t__entry->flags\t= flags;\n\t\t__entry->pblk\t= map->m_pblk;\n\t\t__entry->lblk\t= map->m_lblk;\n\t\t__entry->len\t= map->m_len;\n\t\t__entry->mflags\t= map->m_flags;\n\t\t__entry->ret\t= ret;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu flags %s lblk %u pblk %llu len %u \"\n\t\t  \"mflags %s ret %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  show_map_flags(__entry->flags), __entry->lblk, __entry->pblk,\n\t\t  __entry->len, show_mflags(__entry->mflags), __entry->ret)\n);\n\nDEFINE_EVENT(ext4__map_blocks_exit, ext4_ext_map_blocks_exit,\n\tTP_PROTO(struct inode *inode, unsigned flags,\n\t\t struct ext4_map_blocks *map, int ret),\n\n\tTP_ARGS(inode, flags, map, ret)\n);\n\nDEFINE_EVENT(ext4__map_blocks_exit, ext4_ind_map_blocks_exit,\n\tTP_PROTO(struct inode *inode, unsigned flags,\n\t\t struct ext4_map_blocks *map, int ret),\n\n\tTP_ARGS(inode, flags, map, ret)\n);\n\nTRACE_EVENT(ext4_ext_load_extent,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk, ext4_fsblk_t pblk),\n\n\tTP_ARGS(inode, lblk, pblk),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev    = inode->i_sb->s_dev;\n\t\t__entry->ino    = inode->i_ino;\n\t\t__entry->pblk\t= pblk;\n\t\t__entry->lblk\t= lblk;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %u pblk %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->pblk)\n);\n\nTRACE_EVENT(ext4_load_inode,\n\tTP_PROTO(struct super_block *sb, unsigned long ino),\n\n\tTP_ARGS(sb, ino),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t)\n\t\t__field(\tino_t,\tino\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->ino\t\t= ino;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %ld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino)\n);\n\nTRACE_EVENT(ext4_journal_start_sb,\n\tTP_PROTO(struct super_block *sb, int blocks, int rsv_blocks,\n\t\t int revoke_creds, int type, unsigned long IP),\n\n\tTP_ARGS(sb, blocks, rsv_blocks, revoke_creds, type, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tunsigned long,\tip\t\t)\n\t\t__field(\tint,\t\tblocks\t\t)\n\t\t__field(\tint,\t\trsv_blocks\t)\n\t\t__field(\tint,\t\trevoke_creds\t)\n\t\t__field(\tint,\t\ttype\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t = sb->s_dev;\n\t\t__entry->ip\t\t = IP;\n\t\t__entry->blocks\t\t = blocks;\n\t\t__entry->rsv_blocks\t = rsv_blocks;\n\t\t__entry->revoke_creds\t = revoke_creds;\n\t\t__entry->type\t\t = type;\n\t),\n\n\tTP_printk(\"dev %d,%d blocks %d, rsv_blocks %d, revoke_creds %d,\"\n\t\t  \" type %d, caller %pS\", MAJOR(__entry->dev),\n\t\t  MINOR(__entry->dev), __entry->blocks, __entry->rsv_blocks,\n\t\t  __entry->revoke_creds, __entry->type, (void *)__entry->ip)\n);\n\nTRACE_EVENT(ext4_journal_start_inode,\n\tTP_PROTO(struct inode *inode, int blocks, int rsv_blocks,\n\t\t int revoke_creds, int type, unsigned long IP),\n\n\tTP_ARGS(inode, blocks, rsv_blocks, revoke_creds, type, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tunsigned long,\tino\t\t)\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tunsigned long,\tip\t\t)\n\t\t__field(\tint,\t\tblocks\t\t)\n\t\t__field(\tint,\t\trsv_blocks\t)\n\t\t__field(\tint,\t\trevoke_creds\t)\n\t\t__field(\tint,\t\ttype\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t = inode->i_sb->s_dev;\n\t\t__entry->ip\t\t = IP;\n\t\t__entry->blocks\t\t = blocks;\n\t\t__entry->rsv_blocks\t = rsv_blocks;\n\t\t__entry->revoke_creds\t = revoke_creds;\n\t\t__entry->type\t\t = type;\n\t\t__entry->ino\t\t = inode->i_ino;\n\t),\n\n\tTP_printk(\"dev %d,%d blocks %d, rsv_blocks %d, revoke_creds %d,\"\n\t\t  \" type %d, ino %lu, caller %pS\", MAJOR(__entry->dev),\n\t\t  MINOR(__entry->dev), __entry->blocks, __entry->rsv_blocks,\n\t\t  __entry->revoke_creds, __entry->type, __entry->ino,\n\t\t  (void *)__entry->ip)\n);\n\nTRACE_EVENT(ext4_journal_start_reserved,\n\tTP_PROTO(struct super_block *sb, int blocks, unsigned long IP),\n\n\tTP_ARGS(sb, blocks, IP),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(unsigned long,\tip\t\t\t)\n\t\t__field(\t  int,\tblocks\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t = sb->s_dev;\n\t\t__entry->ip\t\t = IP;\n\t\t__entry->blocks\t\t = blocks;\n\t),\n\n\tTP_printk(\"dev %d,%d blocks, %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->blocks, (void *)__entry->ip)\n);\n\nDECLARE_EVENT_CLASS(ext4__trim,\n\tTP_PROTO(struct super_block *sb,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, group, start, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tint,\tdev_major\t\t)\n\t\t__field(\tint,\tdev_minor\t\t)\n\t\t__field(\t__u32, \tgroup\t\t\t)\n\t\t__field(\tint,\tstart\t\t\t)\n\t\t__field(\tint,\tlen\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev_major\t= MAJOR(sb->s_dev);\n\t\t__entry->dev_minor\t= MINOR(sb->s_dev);\n\t\t__entry->group\t\t= group;\n\t\t__entry->start\t\t= start;\n\t\t__entry->len\t\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d group %u, start %d, len %d\",\n\t\t  __entry->dev_major, __entry->dev_minor,\n\t\t  __entry->group, __entry->start, __entry->len)\n);\n\nDEFINE_EVENT(ext4__trim, ext4_trim_extent,\n\n\tTP_PROTO(struct super_block *sb,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, group, start, len)\n);\n\nDEFINE_EVENT(ext4__trim, ext4_trim_all_free,\n\n\tTP_PROTO(struct super_block *sb,\n\t\t ext4_group_t group,\n\t\t ext4_grpblk_t start,\n\t\t ext4_grpblk_t len),\n\n\tTP_ARGS(sb, group, start, len)\n);\n\nTRACE_EVENT(ext4_ext_handle_unwritten_extents,\n\tTP_PROTO(struct inode *inode, struct ext4_map_blocks *map, int flags,\n\t\t unsigned int allocated, ext4_fsblk_t newblock),\n\n\tTP_ARGS(inode, map, flags, allocated, newblock),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\tint,\t\tflags\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\tunsigned int,\tlen\t\t)\n\t\t__field(\tunsigned int,\tallocated\t)\n\t\t__field(\text4_fsblk_t,\tnewblk\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->flags\t\t= flags;\n\t\t__entry->lblk\t\t= map->m_lblk;\n\t\t__entry->pblk\t\t= map->m_pblk;\n\t\t__entry->len\t\t= map->m_len;\n\t\t__entry->allocated\t= allocated;\n\t\t__entry->newblk\t\t= newblock;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu m_lblk %u m_pblk %llu m_len %u flags %s \"\n\t\t  \"allocated %d newblock %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->lblk, (unsigned long long) __entry->pblk,\n\t\t  __entry->len, show_map_flags(__entry->flags),\n\t\t  (unsigned int) __entry->allocated,\n\t\t  (unsigned long long) __entry->newblk)\n);\n\nTRACE_EVENT(ext4_get_implied_cluster_alloc_exit,\n\tTP_PROTO(struct super_block *sb, struct ext4_map_blocks *map, int ret),\n\n\tTP_ARGS(sb, map, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tunsigned int,\tflags\t)\n\t\t__field(\text4_lblk_t,\tlblk\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t)\n\t\t__field(\tunsigned int,\tlen\t)\n\t\t__field(\tint,\t\tret\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->flags\t= map->m_flags;\n\t\t__entry->lblk\t= map->m_lblk;\n\t\t__entry->pblk\t= map->m_pblk;\n\t\t__entry->len\t= map->m_len;\n\t\t__entry->ret\t= ret;\n\t),\n\n\tTP_printk(\"dev %d,%d m_lblk %u m_pblk %llu m_len %u m_flags %s ret %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->lblk, (unsigned long long) __entry->pblk,\n\t\t  __entry->len, show_mflags(__entry->flags), __entry->ret)\n);\n\nTRACE_EVENT(ext4_ext_show_extent,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk, ext4_fsblk_t pblk,\n\t\t unsigned short len),\n\n\tTP_ARGS(inode, lblk, pblk, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t)\n\t\t__field(\text4_lblk_t,\tlblk\t)\n\t\t__field(\tunsigned short,\tlen\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->pblk\t= pblk;\n\t\t__entry->lblk\t= lblk;\n\t\t__entry->len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %u pblk %llu len %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->lblk,\n\t\t  (unsigned long long) __entry->pblk,\n\t\t  (unsigned short) __entry->len)\n);\n\nTRACE_EVENT(ext4_remove_blocks,\n\tTP_PROTO(struct inode *inode, struct ext4_extent *ex,\n\t\t ext4_lblk_t from, ext4_fsblk_t to,\n\t\t struct partial_cluster *pc),\n\n\tTP_ARGS(inode, ex, from, to, pc),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_lblk_t,\tfrom\t)\n\t\t__field(\text4_lblk_t,\tto\t)\n\t\t__field(\text4_fsblk_t,\tee_pblk\t)\n\t\t__field(\text4_lblk_t,\tee_lblk\t)\n\t\t__field(\tunsigned short,\tee_len\t)\n\t\t__field(\text4_fsblk_t,\tpc_pclu\t)\n\t\t__field(\text4_lblk_t,\tpc_lblk\t)\n\t\t__field(\tint,\t\tpc_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->from\t\t= from;\n\t\t__entry->to\t\t= to;\n\t\t__entry->ee_pblk\t= ext4_ext_pblock(ex);\n\t\t__entry->ee_lblk\t= le32_to_cpu(ex->ee_block);\n\t\t__entry->ee_len\t\t= ext4_ext_get_actual_len(ex);\n\t\t__entry->pc_pclu\t= pc->pclu;\n\t\t__entry->pc_lblk\t= pc->lblk;\n\t\t__entry->pc_state\t= pc->state;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu extent [%u(%llu), %u]\"\n\t\t  \"from %u to %u partial [pclu %lld lblk %u state %d]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->ee_lblk,\n\t\t  (unsigned long long) __entry->ee_pblk,\n\t\t  (unsigned short) __entry->ee_len,\n\t\t  (unsigned) __entry->from,\n\t\t  (unsigned) __entry->to,\n\t\t  (long long) __entry->pc_pclu,\n\t\t  (unsigned int) __entry->pc_lblk,\n\t\t  (int) __entry->pc_state)\n);\n\nTRACE_EVENT(ext4_ext_rm_leaf,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t start,\n\t\t struct ext4_extent *ex,\n\t\t struct partial_cluster *pc),\n\n\tTP_ARGS(inode, start, ex, pc),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_lblk_t,\tstart\t)\n\t\t__field(\text4_lblk_t,\tee_lblk\t)\n\t\t__field(\text4_fsblk_t,\tee_pblk\t)\n\t\t__field(\tshort,\t\tee_len\t)\n\t\t__field(\text4_fsblk_t,\tpc_pclu\t)\n\t\t__field(\text4_lblk_t,\tpc_lblk\t)\n\t\t__field(\tint,\t\tpc_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->start\t\t= start;\n\t\t__entry->ee_lblk\t= le32_to_cpu(ex->ee_block);\n\t\t__entry->ee_pblk\t= ext4_ext_pblock(ex);\n\t\t__entry->ee_len\t\t= ext4_ext_get_actual_len(ex);\n\t\t__entry->pc_pclu\t= pc->pclu;\n\t\t__entry->pc_lblk\t= pc->lblk;\n\t\t__entry->pc_state\t= pc->state;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu start_lblk %u last_extent [%u(%llu), %u]\"\n\t\t  \"partial [pclu %lld lblk %u state %d]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->start,\n\t\t  (unsigned) __entry->ee_lblk,\n\t\t  (unsigned long long) __entry->ee_pblk,\n\t\t  (unsigned short) __entry->ee_len,\n\t\t  (long long) __entry->pc_pclu,\n\t\t  (unsigned int) __entry->pc_lblk,\n\t\t  (int) __entry->pc_state)\n);\n\nTRACE_EVENT(ext4_ext_rm_idx,\n\tTP_PROTO(struct inode *inode, ext4_fsblk_t pblk),\n\n\tTP_ARGS(inode, pblk),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->pblk\t= pblk;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu index_pblk %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned long long) __entry->pblk)\n);\n\nTRACE_EVENT(ext4_ext_remove_space,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t start,\n\t\t ext4_lblk_t end, int depth),\n\n\tTP_ARGS(inode, start, end, depth),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t)\n\t\t__field(\tino_t,\t\tino\t)\n\t\t__field(\text4_lblk_t,\tstart\t)\n\t\t__field(\text4_lblk_t,\tend\t)\n\t\t__field(\tint,\t\tdepth\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->start\t= start;\n\t\t__entry->end\t= end;\n\t\t__entry->depth\t= depth;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu since %u end %u depth %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->start,\n\t\t  (unsigned) __entry->end,\n\t\t  __entry->depth)\n);\n\nTRACE_EVENT(ext4_ext_remove_space_done,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t start, ext4_lblk_t end,\n\t\t int depth, struct partial_cluster *pc, __le16 eh_entries),\n\n\tTP_ARGS(inode, start, end, depth, pc, eh_entries),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tstart\t\t)\n\t\t__field(\text4_lblk_t,\tend\t\t)\n\t\t__field(\tint,\t\tdepth\t\t)\n\t\t__field(\text4_fsblk_t,\tpc_pclu\t\t)\n\t\t__field(\text4_lblk_t,\tpc_lblk\t\t)\n\t\t__field(\tint,\t\tpc_state\t)\n\t\t__field(\tunsigned short,\teh_entries\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->start\t\t= start;\n\t\t__entry->end\t\t= end;\n\t\t__entry->depth\t\t= depth;\n\t\t__entry->pc_pclu\t= pc->pclu;\n\t\t__entry->pc_lblk\t= pc->lblk;\n\t\t__entry->pc_state\t= pc->state;\n\t\t__entry->eh_entries\t= le16_to_cpu(eh_entries);\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu since %u end %u depth %d \"\n\t\t  \"partial [pclu %lld lblk %u state %d] \"\n\t\t  \"remaining_entries %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  (unsigned) __entry->start,\n\t\t  (unsigned) __entry->end,\n\t\t  __entry->depth,\n\t\t  (long long) __entry->pc_pclu,\n\t\t  (unsigned int) __entry->pc_lblk,\n\t\t  (int) __entry->pc_state,\n\t\t  (unsigned short) __entry->eh_entries)\n);\n\nDECLARE_EVENT_CLASS(ext4__es_extent,\n\tTP_PROTO(struct inode *inode, struct extent_status *es),\n\n\tTP_ARGS(inode, es),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\text4_lblk_t,\tlen\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\tchar, status\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= es->es_lblk;\n\t\t__entry->len\t= es->es_len;\n\t\t__entry->pblk\t= ext4_es_show_pblock(es);\n\t\t__entry->status\t= ext4_es_status(es);\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu es [%u/%u) mapped %llu status %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->len,\n\t\t  __entry->pblk, show_extent_status(__entry->status))\n);\n\nDEFINE_EVENT(ext4__es_extent, ext4_es_insert_extent,\n\tTP_PROTO(struct inode *inode, struct extent_status *es),\n\n\tTP_ARGS(inode, es)\n);\n\nDEFINE_EVENT(ext4__es_extent, ext4_es_cache_extent,\n\tTP_PROTO(struct inode *inode, struct extent_status *es),\n\n\tTP_ARGS(inode, es)\n);\n\nTRACE_EVENT(ext4_es_remove_extent,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk, ext4_lblk_t len),\n\n\tTP_ARGS(inode, lblk, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tino_t,\tino\t\t\t)\n\t\t__field(\tloff_t,\tlblk\t\t\t)\n\t\t__field(\tloff_t,\tlen\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= lblk;\n\t\t__entry->len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu es [%lld/%lld)\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->len)\n);\n\nTRACE_EVENT(ext4_es_find_extent_range_enter,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk),\n\n\tTP_ARGS(inode, lblk),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= lblk;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->lblk)\n);\n\nTRACE_EVENT(ext4_es_find_extent_range_exit,\n\tTP_PROTO(struct inode *inode, struct extent_status *es),\n\n\tTP_ARGS(inode, es),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\text4_lblk_t,\tlen\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\tchar, status\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= es->es_lblk;\n\t\t__entry->len\t= es->es_len;\n\t\t__entry->pblk\t= ext4_es_show_pblock(es);\n\t\t__entry->status\t= ext4_es_status(es);\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu es [%u/%u) mapped %llu status %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->len,\n\t\t  __entry->pblk, show_extent_status(__entry->status))\n);\n\nTRACE_EVENT(ext4_es_lookup_extent_enter,\n\tTP_PROTO(struct inode *inode, ext4_lblk_t lblk),\n\n\tTP_ARGS(inode, lblk),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= lblk;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu lblk %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->lblk)\n);\n\nTRACE_EVENT(ext4_es_lookup_extent_exit,\n\tTP_PROTO(struct inode *inode, struct extent_status *es,\n\t\t int found),\n\n\tTP_ARGS(inode, es, found),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\text4_lblk_t,\tlen\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\tchar,\t\tstatus\t\t)\n\t\t__field(\tint,\t\tfound\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->lblk\t= es->es_lblk;\n\t\t__entry->len\t= es->es_len;\n\t\t__entry->pblk\t= ext4_es_show_pblock(es);\n\t\t__entry->status\t= ext4_es_status(es);\n\t\t__entry->found\t= found;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu found %d [%u/%u) %llu %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino, __entry->found,\n\t\t  __entry->lblk, __entry->len,\n\t\t  __entry->found ? __entry->pblk : 0,\n\t\t  show_extent_status(__entry->found ? __entry->status : 0))\n);\n\nDECLARE_EVENT_CLASS(ext4__es_shrink_enter,\n\tTP_PROTO(struct super_block *sb, int nr_to_scan, int cache_cnt),\n\n\tTP_ARGS(sb, nr_to_scan, cache_cnt),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tint,\tnr_to_scan\t\t)\n\t\t__field(\tint,\tcache_cnt\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->nr_to_scan\t= nr_to_scan;\n\t\t__entry->cache_cnt\t= cache_cnt;\n\t),\n\n\tTP_printk(\"dev %d,%d nr_to_scan %d cache_cnt %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_to_scan, __entry->cache_cnt)\n);\n\nDEFINE_EVENT(ext4__es_shrink_enter, ext4_es_shrink_count,\n\tTP_PROTO(struct super_block *sb, int nr_to_scan, int cache_cnt),\n\n\tTP_ARGS(sb, nr_to_scan, cache_cnt)\n);\n\nDEFINE_EVENT(ext4__es_shrink_enter, ext4_es_shrink_scan_enter,\n\tTP_PROTO(struct super_block *sb, int nr_to_scan, int cache_cnt),\n\n\tTP_ARGS(sb, nr_to_scan, cache_cnt)\n);\n\nTRACE_EVENT(ext4_es_shrink_scan_exit,\n\tTP_PROTO(struct super_block *sb, int nr_shrunk, int cache_cnt),\n\n\tTP_ARGS(sb, nr_shrunk, cache_cnt),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\tint,\tnr_shrunk\t\t)\n\t\t__field(\tint,\tcache_cnt\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->nr_shrunk\t= nr_shrunk;\n\t\t__entry->cache_cnt\t= cache_cnt;\n\t),\n\n\tTP_printk(\"dev %d,%d nr_shrunk %d cache_cnt %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_shrunk, __entry->cache_cnt)\n);\n\nTRACE_EVENT(ext4_collapse_range,\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len),\n\n\tTP_ARGS(inode, offset, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\tdev)\n\t\t__field(ino_t,\tino)\n\t\t__field(loff_t,\toffset)\n\t\t__field(loff_t, len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->offset\t= offset;\n\t\t__entry->len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu offset %lld len %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->offset, __entry->len)\n);\n\nTRACE_EVENT(ext4_insert_range,\n\tTP_PROTO(struct inode *inode, loff_t offset, loff_t len),\n\n\tTP_ARGS(inode, offset, len),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\tdev)\n\t\t__field(ino_t,\tino)\n\t\t__field(loff_t,\toffset)\n\t\t__field(loff_t, len)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t= inode->i_ino;\n\t\t__entry->offset\t= offset;\n\t\t__entry->len\t= len;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu offset %lld len %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->offset, __entry->len)\n);\n\nTRACE_EVENT(ext4_es_shrink,\n\tTP_PROTO(struct super_block *sb, int nr_shrunk, u64 scan_time,\n\t\t int nr_skipped, int retried),\n\n\tTP_ARGS(sb, nr_shrunk, scan_time, nr_skipped, retried),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tint,\t\tnr_shrunk\t)\n\t\t__field(\tunsigned long long, scan_time\t)\n\t\t__field(\tint,\t\tnr_skipped\t)\n\t\t__field(\tint,\t\tretried\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= sb->s_dev;\n\t\t__entry->nr_shrunk\t= nr_shrunk;\n\t\t__entry->scan_time\t= div_u64(scan_time, 1000);\n\t\t__entry->nr_skipped\t= nr_skipped;\n\t\t__entry->retried\t= retried;\n\t),\n\n\tTP_printk(\"dev %d,%d nr_shrunk %d, scan_time %llu \"\n\t\t  \"nr_skipped %d retried %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->nr_shrunk,\n\t\t  __entry->scan_time, __entry->nr_skipped, __entry->retried)\n);\n\nTRACE_EVENT(ext4_es_insert_delayed_block,\n\tTP_PROTO(struct inode *inode, struct extent_status *es,\n\t\t bool allocated),\n\n\tTP_ARGS(inode, es, allocated),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\t\tdev\t\t)\n\t\t__field(\tino_t,\t\tino\t\t)\n\t\t__field(\text4_lblk_t,\tlblk\t\t)\n\t\t__field(\text4_lblk_t,\tlen\t\t)\n\t\t__field(\text4_fsblk_t,\tpblk\t\t)\n\t\t__field(\tchar,\t\tstatus\t\t)\n\t\t__field(\tbool,\t\tallocated\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t\t= inode->i_sb->s_dev;\n\t\t__entry->ino\t\t= inode->i_ino;\n\t\t__entry->lblk\t\t= es->es_lblk;\n\t\t__entry->len\t\t= es->es_len;\n\t\t__entry->pblk\t\t= ext4_es_show_pblock(es);\n\t\t__entry->status\t\t= ext4_es_status(es);\n\t\t__entry->allocated\t= allocated;\n\t),\n\n\tTP_printk(\"dev %d,%d ino %lu es [%u/%u) mapped %llu status %s \"\n\t\t  \"allocated %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long) __entry->ino,\n\t\t  __entry->lblk, __entry->len,\n\t\t  __entry->pblk, show_extent_status(__entry->status),\n\t\t  __entry->allocated)\n);\n\n \nDECLARE_EVENT_CLASS(ext4_fsmap_class,\n\tTP_PROTO(struct super_block *sb, u32 keydev, u32 agno, u64 bno, u64 len,\n\t\t u64 owner),\n\tTP_ARGS(sb, keydev, agno, bno, len, owner),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, keydev)\n\t\t__field(u32, agno)\n\t\t__field(u64, bno)\n\t\t__field(u64, len)\n\t\t__field(u64, owner)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_bdev->bd_dev;\n\t\t__entry->keydev = new_decode_dev(keydev);\n\t\t__entry->agno = agno;\n\t\t__entry->bno = bno;\n\t\t__entry->len = len;\n\t\t__entry->owner = owner;\n\t),\n\tTP_printk(\"dev %d:%d keydev %d:%d agno %u bno %llu len %llu owner %lld\\n\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->keydev), MINOR(__entry->keydev),\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->len,\n\t\t  __entry->owner)\n)\n#define DEFINE_FSMAP_EVENT(name) \\\nDEFINE_EVENT(ext4_fsmap_class, name, \\\n\tTP_PROTO(struct super_block *sb, u32 keydev, u32 agno, u64 bno, u64 len, \\\n\t\t u64 owner), \\\n\tTP_ARGS(sb, keydev, agno, bno, len, owner))\nDEFINE_FSMAP_EVENT(ext4_fsmap_low_key);\nDEFINE_FSMAP_EVENT(ext4_fsmap_high_key);\nDEFINE_FSMAP_EVENT(ext4_fsmap_mapping);\n\nDECLARE_EVENT_CLASS(ext4_getfsmap_class,\n\tTP_PROTO(struct super_block *sb, struct ext4_fsmap *fsmap),\n\tTP_ARGS(sb, fsmap),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, keydev)\n\t\t__field(u64, block)\n\t\t__field(u64, len)\n\t\t__field(u64, owner)\n\t\t__field(u64, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_bdev->bd_dev;\n\t\t__entry->keydev = new_decode_dev(fsmap->fmr_device);\n\t\t__entry->block = fsmap->fmr_physical;\n\t\t__entry->len = fsmap->fmr_length;\n\t\t__entry->owner = fsmap->fmr_owner;\n\t\t__entry->flags = fsmap->fmr_flags;\n\t),\n\tTP_printk(\"dev %d:%d keydev %d:%d block %llu len %llu owner %lld flags 0x%llx\\n\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->keydev), MINOR(__entry->keydev),\n\t\t  __entry->block,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->flags)\n)\n#define DEFINE_GETFSMAP_EVENT(name) \\\nDEFINE_EVENT(ext4_getfsmap_class, name, \\\n\tTP_PROTO(struct super_block *sb, struct ext4_fsmap *fsmap), \\\n\tTP_ARGS(sb, fsmap))\nDEFINE_GETFSMAP_EVENT(ext4_getfsmap_low_key);\nDEFINE_GETFSMAP_EVENT(ext4_getfsmap_high_key);\nDEFINE_GETFSMAP_EVENT(ext4_getfsmap_mapping);\n\nTRACE_EVENT(ext4_shutdown,\n\tTP_PROTO(struct super_block *sb, unsigned long flags),\n\n\tTP_ARGS(sb, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(     unsigned,\tflags\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->flags\t= flags;\n\t),\n\n\tTP_printk(\"dev %d,%d flags %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->flags)\n);\n\nTRACE_EVENT(ext4_error,\n\tTP_PROTO(struct super_block *sb, const char *function,\n\t\t unsigned int line),\n\n\tTP_ARGS(sb, function, line),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field( const char *,\tfunction\t\t)\n\t\t__field(     unsigned,\tline\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->function = function;\n\t\t__entry->line\t= line;\n\t),\n\n\tTP_printk(\"dev %d,%d function %s line %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->function, __entry->line)\n);\n\nTRACE_EVENT(ext4_prefetch_bitmaps,\n\t    TP_PROTO(struct super_block *sb, ext4_group_t group,\n\t\t     ext4_group_t next, unsigned int prefetch_ios),\n\n\tTP_ARGS(sb, group, next, prefetch_ios),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u32,\tgroup\t\t\t)\n\t\t__field(\t__u32,\tnext\t\t\t)\n\t\t__field(\t__u32,\tios\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->group\t= group;\n\t\t__entry->next\t= next;\n\t\t__entry->ios\t= prefetch_ios;\n\t),\n\n\tTP_printk(\"dev %d,%d group %u next %u ios %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->group, __entry->next, __entry->ios)\n);\n\nTRACE_EVENT(ext4_lazy_itable_init,\n\t    TP_PROTO(struct super_block *sb, ext4_group_t group),\n\n\tTP_ARGS(sb, group),\n\n\tTP_STRUCT__entry(\n\t\t__field(\tdev_t,\tdev\t\t\t)\n\t\t__field(\t__u32,\tgroup\t\t\t)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->group\t= group;\n\t),\n\n\tTP_printk(\"dev %d,%d group %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->group)\n);\n\nTRACE_EVENT(ext4_fc_replay_scan,\n\tTP_PROTO(struct super_block *sb, int error, int off),\n\n\tTP_ARGS(sb, error, off),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, error)\n\t\t__field(int, off)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_dev;\n\t\t__entry->error = error;\n\t\t__entry->off = off;\n\t),\n\n\tTP_printk(\"dev %d,%d error %d, off %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->error, __entry->off)\n);\n\nTRACE_EVENT(ext4_fc_replay,\n\tTP_PROTO(struct super_block *sb, int tag, int ino, int priv1, int priv2),\n\n\tTP_ARGS(sb, tag, ino, priv1, priv2),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, tag)\n\t\t__field(int, ino)\n\t\t__field(int, priv1)\n\t\t__field(int, priv2)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_dev;\n\t\t__entry->tag = tag;\n\t\t__entry->ino = ino;\n\t\t__entry->priv1 = priv1;\n\t\t__entry->priv2 = priv2;\n\t),\n\n\tTP_printk(\"dev %d,%d: tag %d, ino %d, data1 %d, data2 %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tag, __entry->ino, __entry->priv1, __entry->priv2)\n);\n\nTRACE_EVENT(ext4_fc_commit_start,\n\tTP_PROTO(struct super_block *sb, tid_t commit_tid),\n\n\tTP_ARGS(sb, commit_tid),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(tid_t, tid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_dev;\n\t\t__entry->tid = commit_tid;\n\t),\n\n\tTP_printk(\"dev %d,%d tid %u\", MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tid)\n);\n\nTRACE_EVENT(ext4_fc_commit_stop,\n\t    TP_PROTO(struct super_block *sb, int nblks, int reason,\n\t\t     tid_t commit_tid),\n\n\tTP_ARGS(sb, nblks, reason, commit_tid),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, nblks)\n\t\t__field(int, reason)\n\t\t__field(int, num_fc)\n\t\t__field(int, num_fc_ineligible)\n\t\t__field(int, nblks_agg)\n\t\t__field(tid_t, tid)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev = sb->s_dev;\n\t\t__entry->nblks = nblks;\n\t\t__entry->reason = reason;\n\t\t__entry->num_fc = EXT4_SB(sb)->s_fc_stats.fc_num_commits;\n\t\t__entry->num_fc_ineligible =\n\t\t\tEXT4_SB(sb)->s_fc_stats.fc_ineligible_commits;\n\t\t__entry->nblks_agg = EXT4_SB(sb)->s_fc_stats.fc_numblks;\n\t\t__entry->tid = commit_tid;\n\t),\n\n\tTP_printk(\"dev %d,%d nblks %d, reason %d, fc = %d, ineligible = %d, agg_nblks %d, tid %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nblks, __entry->reason, __entry->num_fc,\n\t\t  __entry->num_fc_ineligible, __entry->nblks_agg, __entry->tid)\n);\n\n#define FC_REASON_NAME_STAT(reason)\t\t\t\t\t\\\n\tshow_fc_reason(reason),\t\t\t\t\t\t\\\n\t__entry->fc_ineligible_rc[reason]\n\nTRACE_EVENT(ext4_fc_stats,\n\tTP_PROTO(struct super_block *sb),\n\n\tTP_ARGS(sb),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__array(unsigned int, fc_ineligible_rc, EXT4_FC_REASON_MAX)\n\t\t__field(unsigned long, fc_commits)\n\t\t__field(unsigned long, fc_ineligible_commits)\n\t\t__field(unsigned long, fc_numblks)\n\t),\n\n\tTP_fast_assign(\n\t\tint i;\n\n\t\t__entry->dev = sb->s_dev;\n\t\tfor (i = 0; i < EXT4_FC_REASON_MAX; i++) {\n\t\t\t__entry->fc_ineligible_rc[i] =\n\t\t\t\tEXT4_SB(sb)->s_fc_stats.fc_ineligible_reason_count[i];\n\t\t}\n\t\t__entry->fc_commits = EXT4_SB(sb)->s_fc_stats.fc_num_commits;\n\t\t__entry->fc_ineligible_commits =\n\t\t\tEXT4_SB(sb)->s_fc_stats.fc_ineligible_commits;\n\t\t__entry->fc_numblks = EXT4_SB(sb)->s_fc_stats.fc_numblks;\n\t),\n\n\tTP_printk(\"dev %d,%d fc ineligible reasons:\\n\"\n\t\t  \"%s:%u, %s:%u, %s:%u, %s:%u, %s:%u, %s:%u, %s:%u, %s:%u, %s:%u, %s:%u\"\n\t\t  \"num_commits:%lu, ineligible: %lu, numblks: %lu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_XATTR),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_CROSS_RENAME),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_JOURNAL_FLAG_CHANGE),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_NOMEM),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_SWAP_BOOT),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_RESIZE),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_RENAME_DIR),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_FALLOC_RANGE),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_INODE_JOURNAL_DATA),\n\t\t  FC_REASON_NAME_STAT(EXT4_FC_REASON_ENCRYPTED_FILENAME),\n\t\t  __entry->fc_commits, __entry->fc_ineligible_commits,\n\t\t  __entry->fc_numblks)\n);\n\nDECLARE_EVENT_CLASS(ext4_fc_track_dentry,\n\n\tTP_PROTO(handle_t *handle, struct inode *inode,\n\t\t struct dentry *dentry, int ret),\n\n\tTP_ARGS(handle, inode, dentry, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(tid_t, t_tid)\n\t\t__field(ino_t, i_ino)\n\t\t__field(tid_t, i_sync_tid)\n\t\t__field(int, error)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct ext4_inode_info *ei = EXT4_I(inode);\n\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->t_tid = handle->h_transaction->t_tid;\n\t\t__entry->i_ino = inode->i_ino;\n\t\t__entry->i_sync_tid = ei->i_sync_tid;\n\t\t__entry->error = ret;\n\t),\n\n\tTP_printk(\"dev %d,%d, t_tid %u, ino %lu, i_sync_tid %u, error %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->t_tid, __entry->i_ino, __entry->i_sync_tid,\n\t\t  __entry->error\n\t)\n);\n\n#define DEFINE_EVENT_CLASS_DENTRY(__type)\t\t\t\t\\\nDEFINE_EVENT(ext4_fc_track_dentry, ext4_fc_track_##__type,\t\t\\\n\tTP_PROTO(handle_t *handle, struct inode *inode,\t\t\t\\\n\t\t struct dentry *dentry, int ret),\t\t\t\\\n\tTP_ARGS(handle, inode, dentry, ret)\t\t\t\t\\\n)\n\nDEFINE_EVENT_CLASS_DENTRY(create);\nDEFINE_EVENT_CLASS_DENTRY(link);\nDEFINE_EVENT_CLASS_DENTRY(unlink);\n\nTRACE_EVENT(ext4_fc_track_inode,\n\tTP_PROTO(handle_t *handle, struct inode *inode, int ret),\n\n\tTP_ARGS(handle, inode, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(tid_t, t_tid)\n\t\t__field(ino_t, i_ino)\n\t\t__field(tid_t, i_sync_tid)\n\t\t__field(int, error)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct ext4_inode_info *ei = EXT4_I(inode);\n\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->t_tid = handle->h_transaction->t_tid;\n\t\t__entry->i_ino = inode->i_ino;\n\t\t__entry->i_sync_tid = ei->i_sync_tid;\n\t\t__entry->error = ret;\n\t),\n\n\tTP_printk(\"dev %d:%d, t_tid %u, inode %lu, i_sync_tid %u, error %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->t_tid, __entry->i_ino, __entry->i_sync_tid,\n\t\t  __entry->error)\n\t);\n\nTRACE_EVENT(ext4_fc_track_range,\n\tTP_PROTO(handle_t *handle, struct inode *inode,\n\t\t long start, long end, int ret),\n\n\tTP_ARGS(handle, inode, start, end, ret),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(tid_t, t_tid)\n\t\t__field(ino_t, i_ino)\n\t\t__field(tid_t, i_sync_tid)\n\t\t__field(long, start)\n\t\t__field(long, end)\n\t\t__field(int, error)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct ext4_inode_info *ei = EXT4_I(inode);\n\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->t_tid = handle->h_transaction->t_tid;\n\t\t__entry->i_ino = inode->i_ino;\n\t\t__entry->i_sync_tid = ei->i_sync_tid;\n\t\t__entry->start = start;\n\t\t__entry->end = end;\n\t\t__entry->error = ret;\n\t),\n\n\tTP_printk(\"dev %d:%d, t_tid %u, inode %lu, i_sync_tid %u, error %d, start %ld, end %ld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->t_tid, __entry->i_ino, __entry->i_sync_tid,\n\t\t  __entry->error, __entry->start, __entry->end)\n\t);\n\nTRACE_EVENT(ext4_fc_cleanup,\n\tTP_PROTO(journal_t *journal, int full, tid_t tid),\n\n\tTP_ARGS(journal, full, tid),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, j_fc_off)\n\t\t__field(int, full)\n\t\t__field(tid_t, tid)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct super_block *sb = journal->j_private;\n\n\t\t__entry->dev = sb->s_dev;\n\t\t__entry->j_fc_off = journal->j_fc_off;\n\t\t__entry->full = full;\n\t\t__entry->tid = tid;\n\t),\n\n\tTP_printk(\"dev %d,%d, j_fc_off %d, full %d, tid %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->j_fc_off, __entry->full, __entry->tid)\n\t);\n\nTRACE_EVENT(ext4_update_sb,\n\tTP_PROTO(struct super_block *sb, ext4_fsblk_t fsblk,\n\t\t unsigned int flags),\n\n\tTP_ARGS(sb, fsblk, flags),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\t\tdev)\n\t\t__field(ext4_fsblk_t,\tfsblk)\n\t\t__field(unsigned int,\tflags)\n\t),\n\n\tTP_fast_assign(\n\t\t__entry->dev\t= sb->s_dev;\n\t\t__entry->fsblk\t= fsblk;\n\t\t__entry->flags\t= flags;\n\t),\n\n\tTP_printk(\"dev %d,%d fsblk %llu flags %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->fsblk, __entry->flags)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}