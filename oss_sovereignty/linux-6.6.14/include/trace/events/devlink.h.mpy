{
  "module_name": "devlink.h",
  "hash_id": "dabd47212a0db4c22cb18aff24a007f3ee71cc21d72e8da01553897137ab141f",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/events/devlink.h",
  "human_readable_source": " \n#if IS_ENABLED(CONFIG_NET_DEVLINK)\n\n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM devlink\n\n#if !defined(_TRACE_DEVLINK_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_DEVLINK_H\n\n#include <linux/device.h>\n#include <net/devlink.h>\n#include <linux/tracepoint.h>\n\n \nTRACE_EVENT(devlink_hwmsg,\n\tTP_PROTO(const struct devlink *devlink, bool incoming,\n\t\t unsigned long type, const u8 *buf, size_t len),\n\n\tTP_ARGS(devlink, incoming, type, buf, len),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__field(bool, incoming)\n\t\t__field(unsigned long, type)\n\t\t__dynamic_array(u8, buf, len)\n\t\t__field(size_t, len)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__entry->incoming = incoming;\n\t\t__entry->type = type;\n\t\tmemcpy(__get_dynamic_array(buf), buf, len);\n\t\t__entry->len = len;\n\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s incoming=%d type=%lu buf=0x[%*phD] len=%zu\",\n\t\t  __get_str(bus_name), __get_str(dev_name),\n\t\t  __get_str(driver_name), __entry->incoming, __entry->type,\n\t\t  (int) __entry->len, __get_dynamic_array(buf), __entry->len)\n);\n\n \nTRACE_EVENT(devlink_hwerr,\n\tTP_PROTO(const struct devlink *devlink, int err, const char *msg),\n\n\tTP_ARGS(devlink, err, msg),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__field(int, err)\n\t\t__string(msg, msg)\n\t\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__entry->err = err;\n\t\t__assign_str(msg, msg);\n\t\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s err=%d %s\",\n\t\t\t__get_str(bus_name), __get_str(dev_name),\n\t\t\t__get_str(driver_name), __entry->err, __get_str(msg))\n);\n\n \nTRACE_EVENT(devlink_health_report,\n\tTP_PROTO(const struct devlink *devlink, const char *reporter_name,\n\t\t const char *msg),\n\n\tTP_ARGS(devlink, reporter_name, msg),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__string(reporter_name, reporter_name)\n\t\t__string(msg, msg)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__assign_str(reporter_name, reporter_name);\n\t\t__assign_str(msg, msg);\n\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s reporter_name=%s: %s\",\n\t\t  __get_str(bus_name), __get_str(dev_name),\n\t\t  __get_str(driver_name), __get_str(reporter_name),\n\t\t  __get_str(msg))\n);\n\n \nTRACE_EVENT(devlink_health_recover_aborted,\n\tTP_PROTO(const struct devlink *devlink, const char *reporter_name,\n\t\t bool health_state, u64 time_since_last_recover),\n\n\tTP_ARGS(devlink, reporter_name, health_state, time_since_last_recover),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__string(reporter_name, reporter_name)\n\t\t__field(bool, health_state)\n\t\t__field(u64, time_since_last_recover)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__assign_str(reporter_name, reporter_name);\n\t\t__entry->health_state = health_state;\n\t\t__entry->time_since_last_recover = time_since_last_recover;\n\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s reporter_name=%s: health_state=%d time_since_last_recover=%llu recover aborted\",\n\t\t  __get_str(bus_name), __get_str(dev_name),\n\t\t  __get_str(driver_name), __get_str(reporter_name),\n\t\t  __entry->health_state,\n\t\t  __entry->time_since_last_recover)\n);\n\n \nTRACE_EVENT(devlink_health_reporter_state_update,\n\tTP_PROTO(const struct devlink *devlink, const char *reporter_name,\n\t\t bool new_state),\n\n\tTP_ARGS(devlink, reporter_name, new_state),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__string(reporter_name, reporter_name)\n\t\t__field(u8, new_state)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__assign_str(reporter_name, reporter_name);\n\t\t__entry->new_state = new_state;\n\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s reporter_name=%s: new_state=%d\",\n\t\t  __get_str(bus_name), __get_str(dev_name),\n\t\t  __get_str(driver_name), __get_str(reporter_name),\n\t\t  __entry->new_state)\n);\n\n \nTRACE_EVENT(devlink_trap_report,\n\tTP_PROTO(const struct devlink *devlink, struct sk_buff *skb,\n\t\t const struct devlink_trap_metadata *metadata),\n\n\tTP_ARGS(devlink, skb, metadata),\n\n\tTP_STRUCT__entry(\n\t\t__string(bus_name, devlink_to_dev(devlink)->bus->name)\n\t\t__string(dev_name, dev_name(devlink_to_dev(devlink)))\n\t\t__string(driver_name, devlink_to_dev(devlink)->driver->name)\n\t\t__string(trap_name, metadata->trap_name)\n\t\t__string(trap_group_name, metadata->trap_group_name)\n\t\t__array(char, input_dev_name, IFNAMSIZ)\n\t),\n\n\tTP_fast_assign(\n\t\tstruct net_device *input_dev = metadata->input_dev;\n\n\t\t__assign_str(bus_name, devlink_to_dev(devlink)->bus->name);\n\t\t__assign_str(dev_name, dev_name(devlink_to_dev(devlink)));\n\t\t__assign_str(driver_name, devlink_to_dev(devlink)->driver->name);\n\t\t__assign_str(trap_name, metadata->trap_name);\n\t\t__assign_str(trap_group_name, metadata->trap_group_name);\n\t\tstrscpy(__entry->input_dev_name, input_dev ? input_dev->name : \"NULL\", IFNAMSIZ);\n\t),\n\n\tTP_printk(\"bus_name=%s dev_name=%s driver_name=%s trap_name=%s \"\n\t\t  \"trap_group_name=%s input_dev_name=%s\", __get_str(bus_name),\n\t\t  __get_str(dev_name), __get_str(driver_name),\n\t\t  __get_str(trap_name), __get_str(trap_group_name),\n\t\t  __entry->input_dev_name)\n);\n\n#endif  \n\n \n#include <trace/define_trace.h>\n\n#else  \n\n#if !defined(_TRACE_DEVLINK_H)\n#define _TRACE_DEVLINK_H\n\n#include <net/devlink.h>\n\nstatic inline void trace_devlink_hwmsg(const struct devlink *devlink,\n\t\t\t\t       bool incoming, unsigned long type,\n\t\t\t\t       const u8 *buf, size_t len)\n{\n}\n\nstatic inline void trace_devlink_hwerr(const struct devlink *devlink,\n\t\t\t\t       int err, const char *msg)\n{\n}\n#endif  \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}