{
  "module_name": "perf.h",
  "hash_id": "354e6ddaf163c95320aba0734c7b41fc2f37381f6da6bfc9c650533ee10d9652",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/perf.h",
  "human_readable_source": " \n\n#undef TRACE_SYSTEM_VAR\n\n#ifdef CONFIG_PERF_EVENTS\n\n#include \"stages/stage6_event_callback.h\"\n\n#undef __perf_count\n#define __perf_count(c)\t(__count = (c))\n\n#undef __perf_task\n#define __perf_task(t)\t(__task = (t))\n\n#undef DECLARE_EVENT_CLASS\n#define DECLARE_EVENT_CLASS(call, proto, args, tstruct, assign, print)\t\\\nstatic notrace void\t\t\t\t\t\t\t\\\nperf_trace_##call(void *__data, proto)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tstruct trace_event_call *event_call = __data;\t\t\t\\\n\tstruct trace_event_data_offsets_##call __maybe_unused __data_offsets;\\\n\tstruct trace_event_raw_##call *entry;\t\t\t\t\\\n\tstruct pt_regs *__regs;\t\t\t\t\t\t\\\n\tu64 __count = 1;\t\t\t\t\t\t\\\n\tstruct task_struct *__task = NULL;\t\t\t\t\\\n\tstruct hlist_head *head;\t\t\t\t\t\\\n\tint __entry_size;\t\t\t\t\t\t\\\n\tint __data_size;\t\t\t\t\t\t\\\n\tint rctx;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t__data_size = trace_event_get_offsets_##call(&__data_offsets, args); \\\n\t\t\t\t\t\t\t\t\t\\\n\thead = this_cpu_ptr(event_call->perf_events);\t\t\t\\\n\tif (!bpf_prog_array_valid(event_call) &&\t\t\t\\\n\t    __builtin_constant_p(!__task) && !__task &&\t\t\t\\\n\t    hlist_empty(head))\t\t\t\t\t\t\\\n\t\treturn;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t__entry_size = ALIGN(__data_size + sizeof(*entry) + sizeof(u32),\\\n\t\t\t     sizeof(u64));\t\t\t\t\\\n\t__entry_size -= sizeof(u32);\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tentry = perf_trace_buf_alloc(__entry_size, &__regs, &rctx);\t\\\n\tif (!entry)\t\t\t\t\t\t\t\\\n\t\treturn;\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tperf_fetch_caller_regs(__regs);\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\ttstruct\t\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\t{ assign; }\t\t\t\t\t\t\t\\\n\t\t\t\t\t\t\t\t\t\\\n\tperf_trace_run_bpf_submit(entry, __entry_size, rctx,\t\t\\\n\t\t\t\t  event_call, __count, __regs,\t\t\\\n\t\t\t\t  head, __task);\t\t\t\\\n}\n\n \n#undef DEFINE_EVENT\n#define DEFINE_EVENT(template, call, proto, args)\t\t\t\\\nstatic inline void perf_test_probe_##call(void)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tcheck_trace_callback_type_##call(perf_trace_##template);\t\\\n}\n\n\n#undef DEFINE_EVENT_PRINT\n#define DEFINE_EVENT_PRINT(template, name, proto, args, print)\t\\\n\tDEFINE_EVENT(template, name, PARAMS(proto), PARAMS(args))\n\n#include TRACE_INCLUDE(TRACE_INCLUDE_FILE)\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}