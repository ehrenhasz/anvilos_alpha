{
  "module_name": "bpf_probe.h",
  "hash_id": "9b96ca57dcf08377bcc2d36bb2fda7bdc4883e8032ef598305b692410f8c168c",
  "original_prompt": "Ingested from linux-6.6.14/include/trace/bpf_probe.h",
  "human_readable_source": " \n\n#undef TRACE_SYSTEM_VAR\n\n#ifdef CONFIG_BPF_EVENTS\n\n#include \"stages/stage6_event_callback.h\"\n\n#undef __perf_count\n#define __perf_count(c)\t(c)\n\n#undef __perf_task\n#define __perf_task(t)\t(t)\n\n#include <linux/args.h>\n\n \n#define UINTTYPE(size) \\\n\t__typeof__(__builtin_choose_expr(size == 1,  (u8)1, \\\n\t\t   __builtin_choose_expr(size == 2, (u16)2, \\\n\t\t   __builtin_choose_expr(size == 4, (u32)3, \\\n\t\t   __builtin_choose_expr(size == 8, (u64)4, \\\n\t\t\t\t\t (void)5)))))\n#define __CAST_TO_U64(x) ({ \\\n\ttypeof(x) __src = (x); \\\n\tUINTTYPE(sizeof(x)) __dst; \\\n\tmemcpy(&__dst, &__src, sizeof(__dst)); \\\n\t(u64)__dst; })\n\n#define __CAST1(a,...) __CAST_TO_U64(a)\n#define __CAST2(a,...) __CAST_TO_U64(a), __CAST1(__VA_ARGS__)\n#define __CAST3(a,...) __CAST_TO_U64(a), __CAST2(__VA_ARGS__)\n#define __CAST4(a,...) __CAST_TO_U64(a), __CAST3(__VA_ARGS__)\n#define __CAST5(a,...) __CAST_TO_U64(a), __CAST4(__VA_ARGS__)\n#define __CAST6(a,...) __CAST_TO_U64(a), __CAST5(__VA_ARGS__)\n#define __CAST7(a,...) __CAST_TO_U64(a), __CAST6(__VA_ARGS__)\n#define __CAST8(a,...) __CAST_TO_U64(a), __CAST7(__VA_ARGS__)\n#define __CAST9(a,...) __CAST_TO_U64(a), __CAST8(__VA_ARGS__)\n#define __CAST10(a,...) __CAST_TO_U64(a), __CAST9(__VA_ARGS__)\n#define __CAST11(a,...) __CAST_TO_U64(a), __CAST10(__VA_ARGS__)\n#define __CAST12(a,...) __CAST_TO_U64(a), __CAST11(__VA_ARGS__)\n \n#define CAST_TO_U64(...) CONCATENATE(__CAST, COUNT_ARGS(__VA_ARGS__))(__VA_ARGS__)\n\n#define __BPF_DECLARE_TRACE(call, proto, args)\t\t\t\t\\\nstatic notrace void\t\t\t\t\t\t\t\\\n__bpf_trace_##call(void *__data, proto)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tstruct bpf_prog *prog = __data;\t\t\t\t\t\\\n\tCONCATENATE(bpf_trace_run, COUNT_ARGS(args))(prog, CAST_TO_U64(args));\t\\\n}\n\n#undef DECLARE_EVENT_CLASS\n#define DECLARE_EVENT_CLASS(call, proto, args, tstruct, assign, print)\t\\\n\t__BPF_DECLARE_TRACE(call, PARAMS(proto), PARAMS(args))\n\n \n#define __DEFINE_EVENT(template, call, proto, args, size)\t\t\\\nstatic inline void bpf_test_probe_##call(void)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tcheck_trace_callback_type_##call(__bpf_trace_##template);\t\\\n}\t\t\t\t\t\t\t\t\t\\\ntypedef void (*btf_trace_##call)(void *__data, proto);\t\t\t\\\nstatic union {\t\t\t\t\t\t\t\t\\\n\tstruct bpf_raw_event_map event;\t\t\t\t\t\\\n\tbtf_trace_##call handler;\t\t\t\t\t\\\n} __bpf_trace_tp_map_##call __used\t\t\t\t\t\\\n__section(\"__bpf_raw_tp_map\") = {\t\t\t\t\t\\\n\t.event = {\t\t\t\t\t\t\t\\\n\t\t.tp\t\t= &__tracepoint_##call,\t\t\t\\\n\t\t.bpf_func\t= __bpf_trace_##template,\t\t\\\n\t\t.num_args\t= COUNT_ARGS(args),\t\t\t\\\n\t\t.writable_size\t= size,\t\t\t\t\t\\\n\t},\t\t\t\t\t\t\t\t\\\n};\n\n#define FIRST(x, ...) x\n\n#define __CHECK_WRITABLE_BUF_SIZE(call, proto, args, size)\t\t\\\nstatic inline void bpf_test_buffer_##call(void)\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\t \t\t\t\t\t\t\t\t\\\n\tFIRST(proto);\t\t\t\t\t\t\t\\\n\t(void)BUILD_BUG_ON_ZERO(size != sizeof(*FIRST(args)));\t\t\\\n}\n\n#undef DEFINE_EVENT_WRITABLE\n#define DEFINE_EVENT_WRITABLE(template, call, proto, args, size) \\\n\t__CHECK_WRITABLE_BUF_SIZE(call, PARAMS(proto), PARAMS(args), size) \\\n\t__DEFINE_EVENT(template, call, PARAMS(proto), PARAMS(args), size)\n\n#undef DEFINE_EVENT\n#define DEFINE_EVENT(template, call, proto, args)\t\t\t\\\n\t__DEFINE_EVENT(template, call, PARAMS(proto), PARAMS(args), 0)\n\n#undef DEFINE_EVENT_PRINT\n#define DEFINE_EVENT_PRINT(template, name, proto, args, print)\t\\\n\tDEFINE_EVENT(template, name, PARAMS(proto), PARAMS(args))\n\n#undef DECLARE_TRACE\n#define DECLARE_TRACE(call, proto, args)\t\t\t\t\\\n\t__BPF_DECLARE_TRACE(call, PARAMS(proto), PARAMS(args))\t\t\\\n\t__DEFINE_EVENT(call, call, PARAMS(proto), PARAMS(args), 0)\n\n#undef DECLARE_TRACE_WRITABLE\n#define DECLARE_TRACE_WRITABLE(call, proto, args, size) \\\n\t__CHECK_WRITABLE_BUF_SIZE(call, PARAMS(proto), PARAMS(args), size) \\\n\t__BPF_DECLARE_TRACE(call, PARAMS(proto), PARAMS(args)) \\\n\t__DEFINE_EVENT(call, call, PARAMS(proto), PARAMS(args), size)\n\n#include TRACE_INCLUDE(TRACE_INCLUDE_FILE)\n\n#undef DECLARE_TRACE_WRITABLE\n#undef DEFINE_EVENT_WRITABLE\n#undef __CHECK_WRITABLE_BUF_SIZE\n#undef __DEFINE_EVENT\n#undef FIRST\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}