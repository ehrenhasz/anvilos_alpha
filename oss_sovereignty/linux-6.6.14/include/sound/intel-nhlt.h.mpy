{
  "module_name": "intel-nhlt.h",
  "hash_id": "253c264014502f0ec58ca493ef0973b3530132be25b8e4d03ead543a164d1464",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/intel-nhlt.h",
  "human_readable_source": " \n \n\n#ifndef __INTEL_NHLT_H__\n#define __INTEL_NHLT_H__\n\n#include <linux/acpi.h>\n\nenum nhlt_link_type {\n\tNHLT_LINK_HDA = 0,\n\tNHLT_LINK_DSP = 1,\n\tNHLT_LINK_DMIC = 2,\n\tNHLT_LINK_SSP = 3,\n\tNHLT_LINK_INVALID\n};\n\nenum nhlt_device_type {\n\tNHLT_DEVICE_BT = 0,\n\tNHLT_DEVICE_DMIC = 1,\n\tNHLT_DEVICE_I2S = 4,\n\tNHLT_DEVICE_INVALID\n};\n\nstruct wav_fmt {\n\tu16 fmt_tag;\n\tu16 channels;\n\tu32 samples_per_sec;\n\tu32 avg_bytes_per_sec;\n\tu16 block_align;\n\tu16 bits_per_sample;\n\tu16 cb_size;\n} __packed;\n\nstruct wav_fmt_ext {\n\tstruct wav_fmt fmt;\n\tunion samples {\n\t\tu16 valid_bits_per_sample;\n\t\tu16 samples_per_block;\n\t\tu16 reserved;\n\t} sample;\n\tu32 channel_mask;\n\tu8 sub_fmt[16];\n} __packed;\n\nstruct nhlt_specific_cfg {\n\tu32 size;\n\tu8 caps[];\n} __packed;\n\nstruct nhlt_fmt_cfg {\n\tstruct wav_fmt_ext fmt_ext;\n\tstruct nhlt_specific_cfg config;\n} __packed;\n\nstruct nhlt_fmt {\n\tu8 fmt_count;\n\tstruct nhlt_fmt_cfg fmt_config[];\n} __packed;\n\nstruct nhlt_endpoint {\n\tu32  length;\n\tu8   linktype;\n\tu8   instance_id;\n\tu16  vendor_id;\n\tu16  device_id;\n\tu16  revision_id;\n\tu32  subsystem_id;\n\tu8   device_type;\n\tu8   direction;\n\tu8   virtual_bus_id;\n\tstruct nhlt_specific_cfg config;\n} __packed;\n\nstruct nhlt_acpi_table {\n\tstruct acpi_table_header header;\n\tu8 endpoint_count;\n\tstruct nhlt_endpoint desc[];\n} __packed;\n\nstruct nhlt_resource_desc  {\n\tu32 extra;\n\tu16 flags;\n\tu64 addr_spc_gra;\n\tu64 min_addr;\n\tu64 max_addr;\n\tu64 addr_trans_offset;\n\tu64 length;\n} __packed;\n\n#define MIC_ARRAY_2CH 2\n#define MIC_ARRAY_4CH 4\n\nstruct nhlt_device_specific_config {\n\tu8 virtual_slot;\n\tu8 config_type;\n} __packed;\n\nstruct nhlt_dmic_array_config {\n\tstruct nhlt_device_specific_config device_config;\n\tu8 array_type;\n} __packed;\n\nstruct nhlt_vendor_dmic_array_config {\n\tstruct nhlt_dmic_array_config dmic_config;\n\tu8 nb_mics;\n\t \n} __packed;\n\nenum {\n\tNHLT_CONFIG_TYPE_GENERIC = 0,\n\tNHLT_CONFIG_TYPE_MIC_ARRAY = 1\n};\n\nenum {\n\tNHLT_MIC_ARRAY_2CH_SMALL = 0xa,\n\tNHLT_MIC_ARRAY_2CH_BIG = 0xb,\n\tNHLT_MIC_ARRAY_4CH_1ST_GEOM = 0xc,\n\tNHLT_MIC_ARRAY_4CH_L_SHAPED = 0xd,\n\tNHLT_MIC_ARRAY_4CH_2ND_GEOM = 0xe,\n\tNHLT_MIC_ARRAY_VENDOR_DEFINED = 0xf,\n};\n\n#if IS_ENABLED(CONFIG_ACPI) && IS_ENABLED(CONFIG_SND_INTEL_NHLT)\n\nstruct nhlt_acpi_table *intel_nhlt_init(struct device *dev);\n\nvoid intel_nhlt_free(struct nhlt_acpi_table *addr);\n\nint intel_nhlt_get_dmic_geo(struct device *dev, struct nhlt_acpi_table *nhlt);\n\nbool intel_nhlt_has_endpoint_type(struct nhlt_acpi_table *nhlt, u8 link_type);\n\nint intel_nhlt_ssp_endpoint_mask(struct nhlt_acpi_table *nhlt, u8 device_type);\n\nint intel_nhlt_ssp_mclk_mask(struct nhlt_acpi_table *nhlt, int ssp_num);\n\nstruct nhlt_specific_cfg *\nintel_nhlt_get_endpoint_blob(struct device *dev, struct nhlt_acpi_table *nhlt,\n\t\t\t     u32 bus_id, u8 link_type, u8 vbps, u8 bps,\n\t\t\t     u8 num_ch, u32 rate, u8 dir, u8 dev_type);\n\n#else\n\nstatic inline struct nhlt_acpi_table *intel_nhlt_init(struct device *dev)\n{\n\treturn NULL;\n}\n\nstatic inline void intel_nhlt_free(struct nhlt_acpi_table *addr)\n{\n}\n\nstatic inline int intel_nhlt_get_dmic_geo(struct device *dev,\n\t\t\t\t\t  struct nhlt_acpi_table *nhlt)\n{\n\treturn 0;\n}\n\nstatic inline bool intel_nhlt_has_endpoint_type(struct nhlt_acpi_table *nhlt,\n\t\t\t\t\t\tu8 link_type)\n{\n\treturn false;\n}\n\nstatic inline int intel_nhlt_ssp_endpoint_mask(struct nhlt_acpi_table *nhlt, u8 device_type)\n{\n\treturn 0;\n}\n\nstatic inline int intel_nhlt_ssp_mclk_mask(struct nhlt_acpi_table *nhlt, int ssp_num)\n{\n\treturn 0;\n}\n\nstatic inline struct nhlt_specific_cfg *\nintel_nhlt_get_endpoint_blob(struct device *dev, struct nhlt_acpi_table *nhlt,\n\t\t\t     u32 bus_id, u8 link_type, u8 vbps, u8 bps,\n\t\t\t     u8 num_ch, u32 rate, u8 dir, u8 dev_type)\n{\n\treturn NULL;\n}\n\n#endif\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}