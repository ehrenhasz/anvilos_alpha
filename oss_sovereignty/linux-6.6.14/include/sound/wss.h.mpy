{
  "module_name": "wss.h",
  "hash_id": "1c26311b5f34d4a66edb60ffd3b3b19f269e3b7a3657cdbccc74a409003d0433",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/wss.h",
  "human_readable_source": " \n#ifndef __SOUND_WSS_H\n#define __SOUND_WSS_H\n\n \n\n#include <sound/control.h>\n#include <sound/pcm.h>\n#include <sound/timer.h>\n\n#include <sound/cs4231-regs.h>\n\n \n\n#define WSS_MODE_NONE\t0x0000\n#define WSS_MODE_PLAY\t0x0001\n#define WSS_MODE_RECORD\t0x0002\n#define WSS_MODE_TIMER\t0x0004\n#define WSS_MODE_OPEN\t(WSS_MODE_PLAY|WSS_MODE_RECORD|WSS_MODE_TIMER)\n\n \n\n#define WSS_HW_DETECT        0x0000\t \n#define WSS_HW_DETECT3\t0x0001\t \n#define WSS_HW_TYPE_MASK\t0xff00\t \n#define WSS_HW_CS4231_MASK   0x0100\t \n#define WSS_HW_CS4231        0x0100\t \n#define WSS_HW_CS4231A       0x0101\t \n#define WSS_HW_AD1845\t0x0102\t \n#define WSS_HW_CS4232_MASK   0x0200\t \n#define WSS_HW_CS4232        0x0200\t \n#define WSS_HW_CS4232A       0x0201\t \n#define WSS_HW_CS4236\t0x0202\t \n#define WSS_HW_CS4236B_MASK\t0x0400\t \n#define WSS_HW_CS4235\t0x0400\t \n#define WSS_HW_CS4236B       0x0401\t \n#define WSS_HW_CS4237B       0x0402\t \n#define WSS_HW_CS4238B\t0x0403\t \n#define WSS_HW_CS4239\t0x0404\t \n#define WSS_HW_AD1848_MASK\t0x0800\t \n#define WSS_HW_AD1847\t\t0x0801\t \n#define WSS_HW_AD1848\t\t0x0802\t \n#define WSS_HW_CS4248\t\t0x0803\t \n#define WSS_HW_CMI8330\t\t0x0804\t \n#define WSS_HW_THINKPAD\t\t0x0805\t \n \n#define WSS_HW_INTERWAVE     0x1000\t \n#define WSS_HW_OPL3SA2       0x1101\t \n#define WSS_HW_OPTI93X \t0x1102\t \n\n \n#define WSS_HWSHARE_IRQ\t(1<<0)\n#define WSS_HWSHARE_DMA1\t(1<<1)\n#define WSS_HWSHARE_DMA2\t(1<<2)\n\n \n#define AD1848_THINKPAD_CTL_PORT1\t\t0x15e8\n#define AD1848_THINKPAD_CTL_PORT2\t\t0x15e9\n#define AD1848_THINKPAD_CS4248_ENABLE_BIT\t0x02\n\nstruct snd_wss {\n\tunsigned long port;\t\t \n\tstruct resource *res_port;\n\tunsigned long cport;\t\t \n\tstruct resource *res_cport;\n\tint irq;\t\t\t \n\tint dma1;\t\t\t \n\tint dma2;\t\t\t \n\tunsigned short version;\t\t \n\tunsigned short mode;\t\t \n\tunsigned short hardware;\t \n\tunsigned short hwshare;\t\t \n\tunsigned short single_dma:1,\t \n\t\t\t\t\t \n\t\t       ebus_flag:1,\t \n\t\t       thinkpad_flag:1;\t \n\n\tstruct snd_card *card;\n\tstruct snd_pcm *pcm;\n\tstruct snd_pcm_substream *playback_substream;\n\tstruct snd_pcm_substream *capture_substream;\n\tstruct snd_timer *timer;\n\n\tunsigned char image[32];\t \n\tunsigned char eimage[32];\t \n\tunsigned char cimage[16];\t \n\tint mce_bit;\n\tint calibrate_mute;\n\tint sw_3d_bit;\n\tunsigned int p_dma_size;\n\tunsigned int c_dma_size;\n\n\tspinlock_t reg_lock;\n\tstruct mutex mce_mutex;\n\tstruct mutex open_mutex;\n\n\tint (*rate_constraint) (struct snd_pcm_runtime *runtime);\n\tvoid (*set_playback_format) (struct snd_wss *chip,\n\t\t\t\t     struct snd_pcm_hw_params *hw_params,\n\t\t\t\t     unsigned char pdfr);\n\tvoid (*set_capture_format) (struct snd_wss *chip,\n\t\t\t\t    struct snd_pcm_hw_params *hw_params,\n\t\t\t\t    unsigned char cdfr);\n\tvoid (*trigger) (struct snd_wss *chip, unsigned int what, int start);\n#ifdef CONFIG_PM\n\tvoid (*suspend) (struct snd_wss *chip);\n\tvoid (*resume) (struct snd_wss *chip);\n#endif\n\tvoid *dma_private_data;\n\tint (*claim_dma) (struct snd_wss *chip,\n\t\t\t  void *dma_private_data, int dma);\n\tint (*release_dma) (struct snd_wss *chip,\n\t\t\t    void *dma_private_data, int dma);\n};\n\n \n\nvoid snd_wss_out(struct snd_wss *chip, unsigned char reg, unsigned char val);\nunsigned char snd_wss_in(struct snd_wss *chip, unsigned char reg);\nvoid snd_cs4236_ext_out(struct snd_wss *chip,\n\t\t\tunsigned char reg, unsigned char val);\nunsigned char snd_cs4236_ext_in(struct snd_wss *chip, unsigned char reg);\nvoid snd_wss_mce_up(struct snd_wss *chip);\nvoid snd_wss_mce_down(struct snd_wss *chip);\n\nvoid snd_wss_overrange(struct snd_wss *chip);\n\nirqreturn_t snd_wss_interrupt(int irq, void *dev_id);\n\nconst char *snd_wss_chip_id(struct snd_wss *chip);\n\nint snd_wss_create(struct snd_card *card,\n\t\t      unsigned long port,\n\t\t      unsigned long cport,\n\t\t      int irq, int dma1, int dma2,\n\t\t      unsigned short hardware,\n\t\t      unsigned short hwshare,\n\t\t      struct snd_wss **rchip);\nint snd_wss_pcm(struct snd_wss *chip, int device);\nint snd_wss_timer(struct snd_wss *chip, int device);\nint snd_wss_mixer(struct snd_wss *chip);\n\nconst struct snd_pcm_ops *snd_wss_get_pcm_ops(int direction);\n\nint snd_cs4236_create(struct snd_card *card,\n\t\t      unsigned long port,\n\t\t      unsigned long cport,\n\t\t      int irq, int dma1, int dma2,\n\t\t      unsigned short hardware,\n\t\t      unsigned short hwshare,\n\t\t      struct snd_wss **rchip);\nint snd_cs4236_pcm(struct snd_wss *chip, int device);\nint snd_cs4236_mixer(struct snd_wss *chip);\n\n \n\n#define WSS_SINGLE(xname, xindex, reg, shift, mask, invert) \\\n{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n  .name = xname, \\\n  .index = xindex, \\\n  .info = snd_wss_info_single, \\\n  .get = snd_wss_get_single, \\\n  .put = snd_wss_put_single, \\\n  .private_value = reg | (shift << 8) | (mask << 16) | (invert << 24) }\n\nint snd_wss_info_single(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_info *uinfo);\nint snd_wss_get_single(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_value *ucontrol);\nint snd_wss_put_single(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_value *ucontrol);\n\n#define WSS_DOUBLE(xname, xindex, left_reg, right_reg, shift_left, shift_right, mask, invert) \\\n{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n  .name = xname, \\\n  .index = xindex, \\\n  .info = snd_wss_info_double, \\\n  .get = snd_wss_get_double, \\\n  .put = snd_wss_put_double, \\\n  .private_value = left_reg | (right_reg << 8) | (shift_left << 16) | \\\n\t\t   (shift_right << 19) | (mask << 24) | (invert << 22) }\n\n#define WSS_SINGLE_TLV(xname, xindex, reg, shift, mask, invert, xtlv) \\\n{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n  .access = SNDRV_CTL_ELEM_ACCESS_READWRITE | SNDRV_CTL_ELEM_ACCESS_TLV_READ, \\\n  .name = xname, \\\n  .index = xindex, \\\n  .info = snd_wss_info_single, \\\n  .get = snd_wss_get_single, \\\n  .put = snd_wss_put_single, \\\n  .private_value = reg | (shift << 8) | (mask << 16) | (invert << 24), \\\n  .tlv = { .p = (xtlv) } }\n\n#define WSS_DOUBLE_TLV(xname, xindex, left_reg, right_reg, \\\n\t\t\tshift_left, shift_right, mask, invert, xtlv) \\\n{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, \\\n  .access = SNDRV_CTL_ELEM_ACCESS_READWRITE | SNDRV_CTL_ELEM_ACCESS_TLV_READ, \\\n  .name = xname, \\\n  .index = xindex, \\\n  .info = snd_wss_info_double, \\\n  .get = snd_wss_get_double, \\\n  .put = snd_wss_put_double, \\\n  .private_value = left_reg | (right_reg << 8) | (shift_left << 16) | \\\n\t\t   (shift_right << 19) | (mask << 24) | (invert << 22), \\\n  .tlv = { .p = (xtlv) } }\n\n\nint snd_wss_info_double(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_info *uinfo);\nint snd_wss_get_double(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_value *ucontrol);\nint snd_wss_put_double(struct snd_kcontrol *kcontrol,\n\t\t\tstruct snd_ctl_elem_value *ucontrol);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}