{
  "module_name": "emux_synth.h",
  "hash_id": "ff933d54eb8e3c4b5fa1b3bacdc02866b00467e90d1b3c8402236fda5edc8e35",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/emux_synth.h",
  "human_readable_source": " \n#ifndef __SOUND_EMUX_SYNTH_H\n#define __SOUND_EMUX_SYNTH_H\n\n \n\n#include <sound/seq_kernel.h>\n#include <sound/seq_device.h>\n#include <sound/soundfont.h>\n#include <sound/seq_midi_emul.h>\n#include <sound/seq_oss.h>\n#include <sound/emux_legacy.h>\n#include <sound/seq_virmidi.h>\n\n \n#define SNDRV_EMUX_USE_RAW_EFFECT\n\nstruct snd_emux;\nstruct snd_emux_port;\nstruct snd_emux_voice;\nstruct snd_emux_effect_table;\n\n \nstruct snd_emux_operators {\n\tstruct module *owner;\n\tstruct snd_emux_voice *(*get_voice)(struct snd_emux *emu,\n\t\t\t\t\t    struct snd_emux_port *port);\n\tint (*prepare)(struct snd_emux_voice *vp);\n\tvoid (*trigger)(struct snd_emux_voice *vp);\n\tvoid (*release)(struct snd_emux_voice *vp);\n\tvoid (*update)(struct snd_emux_voice *vp, int update);\n\tvoid (*terminate)(struct snd_emux_voice *vp);\n\tvoid (*free_voice)(struct snd_emux_voice *vp);\n\tvoid (*reset)(struct snd_emux *emu, int ch);\n\t \n\tint (*sample_new)(struct snd_emux *emu, struct snd_sf_sample *sp,\n\t\t\t  struct snd_util_memhdr *hdr,\n\t\t\t  const void __user *data, long count);\n\tint (*sample_free)(struct snd_emux *emu, struct snd_sf_sample *sp,\n\t\t\t   struct snd_util_memhdr *hdr);\n\tvoid (*sample_reset)(struct snd_emux *emu);\n\tint (*load_fx)(struct snd_emux *emu, int type, int arg,\n\t\t       const void __user *data, long count);\n\tvoid (*sysex)(struct snd_emux *emu, char *buf, int len, int parsed,\n\t\t      struct snd_midi_channel_set *chset);\n#if IS_ENABLED(CONFIG_SND_SEQUENCER_OSS)\n\tint (*oss_ioctl)(struct snd_emux *emu, int cmd, int p1, int p2);\n#endif\n\tint (*get_pitch_shift)(struct snd_emux *emu);\n};\n\n\n \n#define SNDRV_EMUX_MAX_PORTS\t\t32\t \n#define SNDRV_EMUX_MAX_VOICES\t\t64\t \n#define SNDRV_EMUX_MAX_MULTI_VOICES\t16\t \n\n \n#define SNDRV_EMUX_ACCEPT_ROM\t\t(1<<0)\n\n \nstruct snd_emux {\n\n\tstruct snd_card *card;\t \n\n\t \n\tint max_voices;\t\t \n\tint mem_size;\t\t \n\tint num_ports;\t\t \n\tstruct snd_emux_operators ops;\t \n\tvoid *hw;\t\t \n\tunsigned long flags;\t \n\tint midi_ports;\t\t \n\tint midi_devidx;\t \n\tunsigned int linear_panning: 1;  \n\tint hwdep_idx;\t\t \n\tstruct snd_hwdep *hwdep;\t \n\n\t \n\tint num_voices;\t\t \n\tstruct snd_sf_list *sflist;\t \n\tstruct snd_emux_voice *voices;\t \n\tint use_time;\t \n\tspinlock_t voice_lock;\t \n\tstruct mutex register_mutex;\n\tint client;\t\t \n\tint ports[SNDRV_EMUX_MAX_PORTS];\t \n\tstruct snd_emux_port *portptrs[SNDRV_EMUX_MAX_PORTS];\n\tint used;\t \n\tchar *name;\t \n\tstruct snd_rawmidi **vmidi;\n\tstruct timer_list tlist;\t \n\tint timer_active;\n\n\tstruct snd_util_memhdr *memhdr;\t \n\n#ifdef CONFIG_SND_PROC_FS\n\tstruct snd_info_entry *proc;\n#endif\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER_OSS)\n\tstruct snd_seq_device *oss_synth;\n#endif\n};\n\n\n \nstruct snd_emux_port {\n\n\tstruct snd_midi_channel_set chset;\n\tstruct snd_emux *emu;\n\n\tchar port_mode;\t\t\t \n\tint volume_atten;\t\t \n\tunsigned long drum_flags;\t \n\tint ctrls[EMUX_MD_END];\t\t \n#ifdef SNDRV_EMUX_USE_RAW_EFFECT\n\tstruct snd_emux_effect_table *effect;\n#endif\n#if IS_ENABLED(CONFIG_SND_SEQUENCER_OSS)\n\tstruct snd_seq_oss_arg *oss_arg;\n#endif\n};\n\n \n#define SNDRV_EMUX_PORT_MODE_MIDI\t\t0\t \n#define SNDRV_EMUX_PORT_MODE_OSS_SYNTH\t1\t \n#define SNDRV_EMUX_PORT_MODE_OSS_MIDI\t2\t \n\n \nstruct snd_emux_voice {\n\tint  ch;\t\t \n\n\tint  state;\t\t \n#define SNDRV_EMUX_ST_OFF\t\t0x00\t \n#define SNDRV_EMUX_ST_ON\t\t0x01\t \n#define SNDRV_EMUX_ST_RELEASED \t(0x02|SNDRV_EMUX_ST_ON)\t \n#define SNDRV_EMUX_ST_SUSTAINED\t(0x04|SNDRV_EMUX_ST_ON)\t \n#define SNDRV_EMUX_ST_STANDBY\t(0x08|SNDRV_EMUX_ST_ON)\t \n#define SNDRV_EMUX_ST_PENDING \t(0x10|SNDRV_EMUX_ST_ON)\t \n#define SNDRV_EMUX_ST_LOCKED\t\t0x100\t \n\n\tunsigned int  time;\t \n\tunsigned char note;\t \n\tunsigned char key;\n\tunsigned char velocity;\t \n\n\tstruct snd_sf_zone *zone;\t \n\tvoid *block;\t\t \n\tstruct snd_midi_channel *chan;\t \n\tstruct snd_emux_port *port;\t \n\tstruct snd_emux *emu;\t \n\tvoid *hw;\t\t \n\tunsigned long ontime;\t \n\t\n\t \n\tstruct soundfont_voice_info reg;\n\n\t \n\tint avol;\t\t \n\tint acutoff;\t\t \n\tint apitch;\t\t \n\tint apan;\t\t \n\tint aaux;\n\tint ptarget;\t\t \n\tint vtarget;\t\t \n\tint ftarget;\t\t \n\n};\n\n \n#define SNDRV_EMUX_UPDATE_VOLUME\t\t(1<<0)\n#define SNDRV_EMUX_UPDATE_PITCH\t\t(1<<1)\n#define SNDRV_EMUX_UPDATE_PAN\t\t(1<<2)\n#define SNDRV_EMUX_UPDATE_FMMOD\t\t(1<<3)\n#define SNDRV_EMUX_UPDATE_TREMFREQ\t(1<<4)\n#define SNDRV_EMUX_UPDATE_FM2FRQ2\t\t(1<<5)\n#define SNDRV_EMUX_UPDATE_Q\t\t(1<<6)\n\n\n#ifdef SNDRV_EMUX_USE_RAW_EFFECT\n \nstruct snd_emux_effect_table {\n\t \n\tshort val[EMUX_NUM_EFFECTS];\n\tunsigned char flag[EMUX_NUM_EFFECTS];\n};\n#endif  \n\n\n \nint snd_emux_new(struct snd_emux **remu);\nint snd_emux_register(struct snd_emux *emu, struct snd_card *card, int index, char *name);\nint snd_emux_free(struct snd_emux *emu);\n\n \nvoid snd_emux_terminate_all(struct snd_emux *emu);\nvoid snd_emux_lock_voice(struct snd_emux *emu, int voice);\nvoid snd_emux_unlock_voice(struct snd_emux *emu, int voice);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}