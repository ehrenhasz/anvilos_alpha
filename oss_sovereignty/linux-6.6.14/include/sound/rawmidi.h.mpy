{
  "module_name": "rawmidi.h",
  "hash_id": "fc91a98642b7e84c96fcbbab663b0472189da1bfc04157f3211bf55436bd729e",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/rawmidi.h",
  "human_readable_source": " \n#ifndef __SOUND_RAWMIDI_H\n#define __SOUND_RAWMIDI_H\n\n \n\n#include <sound/asound.h>\n#include <linux/interrupt.h>\n#include <linux/spinlock.h>\n#include <linux/wait.h>\n#include <linux/mutex.h>\n#include <linux/workqueue.h>\n#include <linux/device.h>\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER)\n#include <sound/seq_device.h>\n#endif\n#include <sound/info.h>\n\n \n\n#define SNDRV_RAWMIDI_DEVICES\t\t8\n\n#define SNDRV_RAWMIDI_LFLG_OUTPUT\t(1<<0)\n#define SNDRV_RAWMIDI_LFLG_INPUT\t(1<<1)\n#define SNDRV_RAWMIDI_LFLG_OPEN\t\t(3<<0)\n#define SNDRV_RAWMIDI_LFLG_APPEND\t(1<<2)\n\nstruct snd_rawmidi;\nstruct snd_rawmidi_substream;\nstruct snd_seq_port_info;\nstruct pid;\n\nstruct snd_rawmidi_ops {\n\tint (*open) (struct snd_rawmidi_substream * substream);\n\tint (*close) (struct snd_rawmidi_substream * substream);\n\tvoid (*trigger) (struct snd_rawmidi_substream * substream, int up);\n\tvoid (*drain) (struct snd_rawmidi_substream * substream);\n};\n\nstruct snd_rawmidi_global_ops {\n\tint (*dev_register) (struct snd_rawmidi * rmidi);\n\tint (*dev_unregister) (struct snd_rawmidi * rmidi);\n\tvoid (*get_port_info)(struct snd_rawmidi *rmidi, int number,\n\t\t\t      struct snd_seq_port_info *info);\n\tlong (*ioctl)(struct snd_rawmidi *rmidi, unsigned int cmd,\n\t\t      void __user *argp);\n\tvoid (*proc_read)(struct snd_info_entry *entry,\n\t\t\t  struct snd_info_buffer *buf);\n};\n\nstruct snd_rawmidi_runtime {\n\tstruct snd_rawmidi_substream *substream;\n\tunsigned int drain: 1,\t \n\t\t     oss: 1;\t \n\t \n\tunsigned char *buffer;\t \n\tsize_t buffer_size;\t \n\tsize_t appl_ptr;\t \n\tsize_t hw_ptr;\t\t \n\tsize_t avail_min;\t \n\tsize_t avail;\t\t \n\tsize_t xruns;\t\t \n\tsize_t align;\t\t \n\tint buffer_ref;\t\t \n\t \n\twait_queue_head_t sleep;\n\t \n\tvoid (*event)(struct snd_rawmidi_substream *substream);\n\t \n\tstruct work_struct event_work;\n\t \n\tvoid *private_data;\n\tvoid (*private_free)(struct snd_rawmidi_substream *substream);\n};\n\nstruct snd_rawmidi_substream {\n\tstruct list_head list;\t\t \n\tint stream;\t\t\t \n\tint number;\t\t\t \n\tbool opened;\t\t\t \n\tbool append;\t\t\t \n\tbool active_sensing;\t\t \n\tunsigned int framing;\t\t \n\tunsigned int clock_type;\t \n\tint use_count;\t\t\t \n\tsize_t bytes;\n\tspinlock_t lock;\n\tstruct snd_rawmidi *rmidi;\n\tstruct snd_rawmidi_str *pstr;\n\tchar name[32];\n\tstruct snd_rawmidi_runtime *runtime;\n\tstruct pid *pid;\n\t \n\tconst struct snd_rawmidi_ops *ops;\n};\n\nstruct snd_rawmidi_file {\n\tstruct snd_rawmidi *rmidi;\n\tstruct snd_rawmidi_substream *input;\n\tstruct snd_rawmidi_substream *output;\n\tunsigned int user_pversion;\t \n};\n\nstruct snd_rawmidi_str {\n\tunsigned int substream_count;\n\tunsigned int substream_opened;\n\tstruct list_head substreams;\n};\n\nstruct snd_rawmidi {\n\tstruct snd_card *card;\n\tstruct list_head list;\n\tunsigned int device;\t\t \n\tunsigned int info_flags;\t \n\tchar id[64];\n\tchar name[80];\n\n#ifdef CONFIG_SND_OSSEMUL\n\tint ossreg;\n#endif\n\n\tconst struct snd_rawmidi_global_ops *ops;\n\n\tstruct snd_rawmidi_str streams[2];\n\n\tvoid *private_data;\n\tvoid (*private_free) (struct snd_rawmidi *rmidi);\n\n\tstruct mutex open_mutex;\n\twait_queue_head_t open_wait;\n\n\tstruct device *dev;\n\n\tstruct snd_info_entry *proc_entry;\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER)\n\tstruct snd_seq_device *seq_dev;\n#endif\n};\n\n \n\nint snd_rawmidi_new(struct snd_card *card, char *id, int device,\n\t\t    int output_count, int input_count,\n\t\t    struct snd_rawmidi **rmidi);\nvoid snd_rawmidi_set_ops(struct snd_rawmidi *rmidi, int stream,\n\t\t\t const struct snd_rawmidi_ops *ops);\n\n \nint snd_rawmidi_init(struct snd_rawmidi *rmidi,\n\t\t     struct snd_card *card, char *id, int device,\n\t\t     int output_count, int input_count,\n\t\t     unsigned int info_flags);\nint snd_rawmidi_free(struct snd_rawmidi *rmidi);\n\n \n\nint snd_rawmidi_receive(struct snd_rawmidi_substream *substream,\n\t\t\tconst unsigned char *buffer, int count);\nint snd_rawmidi_transmit_empty(struct snd_rawmidi_substream *substream);\nint snd_rawmidi_transmit_peek(struct snd_rawmidi_substream *substream,\n\t\t\t      unsigned char *buffer, int count);\nint snd_rawmidi_transmit_ack(struct snd_rawmidi_substream *substream, int count);\nint snd_rawmidi_transmit(struct snd_rawmidi_substream *substream,\n\t\t\t unsigned char *buffer, int count);\nint snd_rawmidi_proceed(struct snd_rawmidi_substream *substream);\n\n \n\nint snd_rawmidi_info_select(struct snd_card *card, struct snd_rawmidi_info *info);\nint snd_rawmidi_kernel_open(struct snd_rawmidi *rmidi, int subdevice,\n\t\t\t    int mode, struct snd_rawmidi_file *rfile);\nint snd_rawmidi_kernel_release(struct snd_rawmidi_file *rfile);\nint snd_rawmidi_output_params(struct snd_rawmidi_substream *substream,\n\t\t\t      struct snd_rawmidi_params *params);\nint snd_rawmidi_input_params(struct snd_rawmidi_substream *substream,\n\t\t\t     struct snd_rawmidi_params *params);\nint snd_rawmidi_drop_output(struct snd_rawmidi_substream *substream);\nint snd_rawmidi_drain_output(struct snd_rawmidi_substream *substream);\nint snd_rawmidi_drain_input(struct snd_rawmidi_substream *substream);\nlong snd_rawmidi_kernel_read(struct snd_rawmidi_substream *substream,\n\t\t\t     unsigned char *buf, long count);\nlong snd_rawmidi_kernel_write(struct snd_rawmidi_substream *substream,\n\t\t\t      const unsigned char *buf, long count);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}