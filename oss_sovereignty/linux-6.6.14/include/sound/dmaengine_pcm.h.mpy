{
  "module_name": "dmaengine_pcm.h",
  "hash_id": "0da1fd4bafb5daecfe3d52d21828c877baf6ef0f5be8d7b7bd99ba365cb0bcd9",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/dmaengine_pcm.h",
  "human_readable_source": " \n\n#ifndef __SOUND_DMAENGINE_PCM_H__\n#define __SOUND_DMAENGINE_PCM_H__\n\n#include <sound/pcm.h>\n#include <sound/soc.h>\n#include <linux/dmaengine.h>\n\n \nstatic inline enum dma_transfer_direction\nsnd_pcm_substream_to_dma_direction(const struct snd_pcm_substream *substream)\n{\n\tif (substream->stream == SNDRV_PCM_STREAM_PLAYBACK)\n\t\treturn DMA_MEM_TO_DEV;\n\telse\n\t\treturn DMA_DEV_TO_MEM;\n}\n\nint snd_hwparams_to_dma_slave_config(const struct snd_pcm_substream *substream,\n\tconst struct snd_pcm_hw_params *params, struct dma_slave_config *slave_config);\nint snd_dmaengine_pcm_trigger(struct snd_pcm_substream *substream, int cmd);\nsnd_pcm_uframes_t snd_dmaengine_pcm_pointer(struct snd_pcm_substream *substream);\nsnd_pcm_uframes_t snd_dmaengine_pcm_pointer_no_residue(struct snd_pcm_substream *substream);\n\nint snd_dmaengine_pcm_open(struct snd_pcm_substream *substream,\n\tstruct dma_chan *chan);\nint snd_dmaengine_pcm_close(struct snd_pcm_substream *substream);\n\nint snd_dmaengine_pcm_open_request_chan(struct snd_pcm_substream *substream,\n\tdma_filter_fn filter_fn, void *filter_data);\nint snd_dmaengine_pcm_close_release_chan(struct snd_pcm_substream *substream);\n\nstruct dma_chan *snd_dmaengine_pcm_request_channel(dma_filter_fn filter_fn,\n\tvoid *filter_data);\nstruct dma_chan *snd_dmaengine_pcm_get_chan(struct snd_pcm_substream *substream);\n\n \n#define SND_DMAENGINE_PCM_DAI_FLAG_PACK BIT(0)\n\n \nstruct snd_dmaengine_dai_dma_data {\n\tdma_addr_t addr;\n\tenum dma_slave_buswidth addr_width;\n\tu32 maxburst;\n\tvoid *filter_data;\n\tconst char *chan_name;\n\tunsigned int fifo_size;\n\tunsigned int flags;\n\tvoid *peripheral_config;\n\tsize_t peripheral_size;\n};\n\nvoid snd_dmaengine_pcm_set_config_from_dai_data(\n\tconst struct snd_pcm_substream *substream,\n\tconst struct snd_dmaengine_dai_dma_data *dma_data,\n\tstruct dma_slave_config *config);\n\nint snd_dmaengine_pcm_refine_runtime_hwparams(\n\tstruct snd_pcm_substream *substream,\n\tstruct snd_dmaengine_dai_dma_data *dma_data,\n\tstruct snd_pcm_hardware *hw,\n\tstruct dma_chan *chan);\n\n \n#define SND_DMAENGINE_PCM_FLAG_COMPAT BIT(0)\n \n#define SND_DMAENGINE_PCM_FLAG_NO_DT BIT(1)\n \n#define SND_DMAENGINE_PCM_FLAG_HALF_DUPLEX BIT(3)\n\n \nstruct snd_dmaengine_pcm_config {\n\tint (*prepare_slave_config)(struct snd_pcm_substream *substream,\n\t\t\tstruct snd_pcm_hw_params *params,\n\t\t\tstruct dma_slave_config *slave_config);\n\tstruct dma_chan *(*compat_request_channel)(\n\t\t\tstruct snd_soc_pcm_runtime *rtd,\n\t\t\tstruct snd_pcm_substream *substream);\n\tint (*process)(struct snd_pcm_substream *substream,\n\t\t       int channel, unsigned long hwoff,\n\t\t       unsigned long bytes);\n\tdma_filter_fn compat_filter_fn;\n\tstruct device *dma_dev;\n\tconst char *chan_names[SNDRV_PCM_STREAM_LAST + 1];\n\n\tconst struct snd_pcm_hardware *pcm_hardware;\n\tunsigned int prealloc_buffer_size;\n};\n\nint snd_dmaengine_pcm_register(struct device *dev,\n\tconst struct snd_dmaengine_pcm_config *config,\n\tunsigned int flags);\nvoid snd_dmaengine_pcm_unregister(struct device *dev);\n\nint devm_snd_dmaengine_pcm_register(struct device *dev,\n\tconst struct snd_dmaengine_pcm_config *config,\n\tunsigned int flags);\n\nint snd_dmaengine_pcm_prepare_slave_config(struct snd_pcm_substream *substream,\n\tstruct snd_pcm_hw_params *params,\n\tstruct dma_slave_config *slave_config);\n\n#define SND_DMAENGINE_PCM_DRV_NAME \"snd_dmaengine_pcm\"\n\nstruct dmaengine_pcm {\n\tstruct dma_chan *chan[SNDRV_PCM_STREAM_LAST + 1];\n\tconst struct snd_dmaengine_pcm_config *config;\n\tstruct snd_soc_component component;\n\tunsigned int flags;\n};\n\nstatic inline struct dmaengine_pcm *soc_component_to_pcm(struct snd_soc_component *p)\n{\n\treturn container_of(p, struct dmaengine_pcm, component);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}