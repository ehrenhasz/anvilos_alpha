{
  "module_name": "hdaudio_ext.h",
  "hash_id": "38d730dffd28ebf72ef9729b7153fd1b047d9580ab7d8a7fa5855d6a7c0774cc",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/hdaudio_ext.h",
  "human_readable_source": " \n#ifndef __SOUND_HDAUDIO_EXT_H\n#define __SOUND_HDAUDIO_EXT_H\n\n#include <linux/io-64-nonatomic-lo-hi.h>\n#include <linux/iopoll.h>\n#include <sound/hdaudio.h>\n\nint snd_hdac_ext_bus_init(struct hdac_bus *bus, struct device *dev,\n\t\t      const struct hdac_bus_ops *ops,\n\t\t      const struct hdac_ext_bus_ops *ext_ops);\n\nvoid snd_hdac_ext_bus_exit(struct hdac_bus *bus);\nvoid snd_hdac_ext_bus_device_remove(struct hdac_bus *bus);\n\n#define HDA_CODEC_REV_EXT_ENTRY(_vid, _rev, _name, drv_data) \\\n\t{ .vendor_id = (_vid), .rev_id = (_rev), .name = (_name), \\\n\t  .api_version = HDA_DEV_ASOC, \\\n\t  .driver_data = (unsigned long)(drv_data) }\n#define HDA_CODEC_EXT_ENTRY(_vid, _revid, _name, _drv_data) \\\n\tHDA_CODEC_REV_EXT_ENTRY(_vid, _revid, _name, _drv_data)\n\nvoid snd_hdac_ext_bus_ppcap_enable(struct hdac_bus *chip, bool enable);\nvoid snd_hdac_ext_bus_ppcap_int_enable(struct hdac_bus *chip, bool enable);\n\nint snd_hdac_ext_bus_get_ml_capabilities(struct hdac_bus *bus);\nstruct hdac_ext_link *snd_hdac_ext_bus_get_hlink_by_addr(struct hdac_bus *bus, int addr);\nstruct hdac_ext_link *snd_hdac_ext_bus_get_hlink_by_name(struct hdac_bus *bus,\n\t\t\t\t\t\t\t const char *codec_name);\n\nenum hdac_ext_stream_type {\n\tHDAC_EXT_STREAM_TYPE_COUPLED = 0,\n\tHDAC_EXT_STREAM_TYPE_HOST,\n\tHDAC_EXT_STREAM_TYPE_LINK\n};\n\n \nstruct hdac_ext_stream {\n\tstruct hdac_stream hstream;\n\n\tvoid __iomem *pphc_addr;\n\tvoid __iomem *pplc_addr;\n\n\tu32 pphcllpl;\n\tu32 pphcllpu;\n\tu32 pphcldpl;\n\tu32 pphcldpu;\n\n\tbool decoupled:1;\n\tbool link_locked:1;\n\tbool link_prepared;\n\n\tstruct snd_pcm_substream *link_substream;\n};\n\n#define hdac_stream(s)\t\t(&(s)->hstream)\n#define stream_to_hdac_ext_stream(s) \\\n\tcontainer_of(s, struct hdac_ext_stream, hstream)\n\nint snd_hdac_ext_stream_init_all(struct hdac_bus *bus, int start_idx,\n\t\t\t\t int num_stream, int dir);\nvoid snd_hdac_ext_stream_free_all(struct hdac_bus *bus);\nvoid snd_hdac_ext_link_free_all(struct hdac_bus *bus);\nstruct hdac_ext_stream *snd_hdac_ext_stream_assign(struct hdac_bus *bus,\n\t\t\t\t\t   struct snd_pcm_substream *substream,\n\t\t\t\t\t   int type);\nvoid snd_hdac_ext_stream_release(struct hdac_ext_stream *hext_stream, int type);\nstruct hdac_ext_stream *snd_hdac_ext_cstream_assign(struct hdac_bus *bus,\n\t\t\t\t\t\t    struct snd_compr_stream *cstream);\nvoid snd_hdac_ext_stream_decouple_locked(struct hdac_bus *bus,\n\t\t\t\t\t struct hdac_ext_stream *hext_stream, bool decouple);\nvoid snd_hdac_ext_stream_decouple(struct hdac_bus *bus,\n\t\t\t\tstruct hdac_ext_stream *azx_dev, bool decouple);\n\nvoid snd_hdac_ext_stream_start(struct hdac_ext_stream *hext_stream);\nvoid snd_hdac_ext_stream_clear(struct hdac_ext_stream *hext_stream);\nvoid snd_hdac_ext_stream_reset(struct hdac_ext_stream *hext_stream);\nint snd_hdac_ext_stream_setup(struct hdac_ext_stream *hext_stream, int fmt);\n\nstruct hdac_ext_link {\n\tstruct hdac_bus *bus;\n\tint index;\n\tvoid __iomem *ml_addr;  \n\tu32 lcaps;    \n\tu16 lsdiid;   \n\n\tint ref_count;\n\n\tstruct list_head list;\n};\n\nint snd_hdac_ext_bus_link_power_up(struct hdac_ext_link *hlink);\nint snd_hdac_ext_bus_link_power_down(struct hdac_ext_link *hlink);\nint snd_hdac_ext_bus_link_power_up_all(struct hdac_bus *bus);\nint snd_hdac_ext_bus_link_power_down_all(struct hdac_bus *bus);\nvoid snd_hdac_ext_bus_link_set_stream_id(struct hdac_ext_link *hlink,\n\t\t\t\t\t int stream);\nvoid snd_hdac_ext_bus_link_clear_stream_id(struct hdac_ext_link *hlink,\n\t\t\t\t\t   int stream);\n\nint snd_hdac_ext_bus_link_get(struct hdac_bus *bus, struct hdac_ext_link *hlink);\nint snd_hdac_ext_bus_link_put(struct hdac_bus *bus, struct hdac_ext_link *hlink);\n\nvoid snd_hdac_ext_bus_link_power(struct hdac_device *codec, bool enable);\n\n#define snd_hdac_adsp_writeb(chip, reg, value) \\\n\tsnd_hdac_reg_writeb(chip, (chip)->dsp_ba + (reg), value)\n#define snd_hdac_adsp_readb(chip, reg) \\\n\tsnd_hdac_reg_readb(chip, (chip)->dsp_ba + (reg))\n#define snd_hdac_adsp_writew(chip, reg, value) \\\n\tsnd_hdac_reg_writew(chip, (chip)->dsp_ba + (reg), value)\n#define snd_hdac_adsp_readw(chip, reg) \\\n\tsnd_hdac_reg_readw(chip, (chip)->dsp_ba + (reg))\n#define snd_hdac_adsp_writel(chip, reg, value) \\\n\tsnd_hdac_reg_writel(chip, (chip)->dsp_ba + (reg), value)\n#define snd_hdac_adsp_readl(chip, reg) \\\n\tsnd_hdac_reg_readl(chip, (chip)->dsp_ba + (reg))\n#define snd_hdac_adsp_writeq(chip, reg, value) \\\n\tsnd_hdac_reg_writeq(chip, (chip)->dsp_ba + (reg), value)\n#define snd_hdac_adsp_readq(chip, reg) \\\n\tsnd_hdac_reg_readq(chip, (chip)->dsp_ba + (reg))\n\n#define snd_hdac_adsp_updateb(chip, reg, mask, val) \\\n\tsnd_hdac_adsp_writeb(chip, reg, \\\n\t\t\t(snd_hdac_adsp_readb(chip, reg) & ~(mask)) | (val))\n#define snd_hdac_adsp_updatew(chip, reg, mask, val) \\\n\tsnd_hdac_adsp_writew(chip, reg, \\\n\t\t\t(snd_hdac_adsp_readw(chip, reg) & ~(mask)) | (val))\n#define snd_hdac_adsp_updatel(chip, reg, mask, val) \\\n\tsnd_hdac_adsp_writel(chip, reg, \\\n\t\t\t(snd_hdac_adsp_readl(chip, reg) & ~(mask)) | (val))\n#define snd_hdac_adsp_updateq(chip, reg, mask, val) \\\n\tsnd_hdac_adsp_writeq(chip, reg, \\\n\t\t\t(snd_hdac_adsp_readq(chip, reg) & ~(mask)) | (val))\n\n#define snd_hdac_adsp_readb_poll(chip, reg, val, cond, delay_us, timeout_us) \\\n\treadb_poll_timeout((chip)->dsp_ba + (reg), val, cond, \\\n\t\t\t   delay_us, timeout_us)\n#define snd_hdac_adsp_readw_poll(chip, reg, val, cond, delay_us, timeout_us) \\\n\treadw_poll_timeout((chip)->dsp_ba + (reg), val, cond, \\\n\t\t\t   delay_us, timeout_us)\n#define snd_hdac_adsp_readl_poll(chip, reg, val, cond, delay_us, timeout_us) \\\n\treadl_poll_timeout((chip)->dsp_ba + (reg), val, cond, \\\n\t\t\t   delay_us, timeout_us)\n#define snd_hdac_adsp_readq_poll(chip, reg, val, cond, delay_us, timeout_us) \\\n\treadq_poll_timeout((chip)->dsp_ba + (reg), val, cond, \\\n\t\t\t   delay_us, timeout_us)\n\nstruct hdac_ext_device;\n\n \nstruct hdac_ext_codec_ops {\n\tint (*build_controls)(struct hdac_ext_device *dev);\n\tint (*init)(struct hdac_ext_device *dev);\n\tvoid (*free)(struct hdac_ext_device *dev);\n};\n\nstruct hda_dai_map {\n\tchar *dai_name;\n\thda_nid_t nid;\n\tu32\tmaxbps;\n};\n\nstruct hdac_ext_dma_params {\n\tu32 format;\n\tu8 stream_tag;\n};\n\nint snd_hda_ext_driver_register(struct hdac_driver *drv);\nvoid snd_hda_ext_driver_unregister(struct hdac_driver *drv);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}