{
  "module_name": "tas2781.h",
  "hash_id": "afc7ed50d0ae53e843e590b2ae001cd8e62307d844e2821ba5b0648ed6719f1f",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/tas2781.h",
  "human_readable_source": " \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#ifndef __TAS2781_H__\n#define __TAS2781_H__\n\n#include \"tas2781-dsp.h\"\n\n \n#define TAS2781_DRV_VER\t\t\t1\n#define SMARTAMP_MODULE_NAME\t\t\"tas2781\"\n#define TAS2781_GLOBAL_ADDR\t0x40\n#define TASDEVICE_RATES\t\t\t(SNDRV_PCM_RATE_44100 |\\\n\tSNDRV_PCM_RATE_48000 | SNDRV_PCM_RATE_96000 |\\\n\tSNDRV_PCM_RATE_88200)\n\n#define TASDEVICE_FORMATS\t\t(SNDRV_PCM_FMTBIT_S16_LE | \\\n\tSNDRV_PCM_FMTBIT_S24_LE | \\\n\tSNDRV_PCM_FMTBIT_S32_LE)\n\n \n#define TASDEVICE_PAGE_SELECT\t\t0x00\n#define TASDEVICE_BOOKCTL_PAGE\t\t0x00\n#define TASDEVICE_BOOKCTL_REG\t\t127\n#define TASDEVICE_BOOK_ID(reg)\t\t(reg / (256 * 128))\n#define TASDEVICE_PAGE_ID(reg)\t\t((reg % (256 * 128)) / 128)\n#define TASDEVICE_PAGE_REG(reg)\t\t((reg % (256 * 128)) % 128)\n#define TASDEVICE_PGRG(reg)\t\t(reg % (256 * 128))\n#define TASDEVICE_REG(book, page, reg)\t(((book * 256 * 128) + \\\n\t\t\t\t\t(page * 128)) + reg)\n\n \n#define TAS2781_REG_SWRESET\t\tTASDEVICE_REG(0x0, 0X0, 0x01)\n#define TAS2781_REG_SWRESET_RESET\tBIT(0)\n\n \n#define TASDEVICE_I2CChecksum\t\tTASDEVICE_REG(0x0, 0x0, 0x7E)\n\n \n#define TAS2781_DVC_LVL\t\t\tTASDEVICE_REG(0x0, 0x0, 0x1A)\n#define TAS2781_AMP_LEVEL\t\tTASDEVICE_REG(0x0, 0x0, 0x03)\n#define TAS2781_AMP_LEVEL_MASK\t\tGENMASK(5, 1)\n\n#define TASDEVICE_CMD_SING_W\t\t0x1\n#define TASDEVICE_CMD_BURST\t\t0x2\n#define TASDEVICE_CMD_DELAY\t\t0x3\n#define TASDEVICE_CMD_FIELD_W\t\t0x4\n\nenum audio_device {\n\tTAS2781\t= 0,\n};\n\nenum device_catlog_id {\n\tLENOVO = 0,\n\tOTHERS\n};\n\nstruct tasdevice {\n\tstruct tasdevice_fw *cali_data_fmw;\n\tunsigned int dev_addr;\n\tunsigned int err_code;\n\tunsigned char cur_book;\n\tshort cur_prog;\n\tshort cur_conf;\n\tbool is_loading;\n\tbool is_loaderr;\n};\n\nstruct tasdevice_irqinfo {\n\tint irq_gpio;\n\tint irq;\n};\n\nstruct calidata {\n\tunsigned char *data;\n\tunsigned long total_sz;\n};\n\nstruct tasdevice_priv {\n\tstruct tasdevice tasdevice[TASDEVICE_MAX_CHANNELS];\n\tstruct tasdevice_irqinfo irq_info;\n\tstruct tasdevice_rca rcabin;\n\tstruct calidata cali_data;\n\tstruct tasdevice_fw *fmw;\n\tstruct gpio_desc *reset;\n\tstruct mutex codec_lock;\n\tstruct regmap *regmap;\n\tstruct device *dev;\n\tstruct tm tm;\n\n\tenum device_catlog_id catlog_id;\n\tconst char *acpi_subsystem_id;\n\tunsigned char cal_binaryname[TASDEVICE_MAX_CHANNELS][64];\n\tunsigned char crc8_lkp_tbl[CRC8_TABLE_SIZE];\n\tunsigned char coef_binaryname[64];\n\tunsigned char rca_binaryname[64];\n\tunsigned char dev_name[32];\n\tunsigned char ndev;\n\tunsigned int magic_num;\n\tunsigned int chip_id;\n\tunsigned int sysclk;\n\n\tint cur_prog;\n\tint cur_conf;\n\tint fw_state;\n\tint index;\n\tvoid *client;\n\tvoid *codec;\n\tbool force_fwload_status;\n\tbool playback_started;\n\tbool isacpi;\n\tint (*fw_parse_variable_header)(struct tasdevice_priv *tas_priv,\n\t\tconst struct firmware *fmw, int offset);\n\tint (*fw_parse_program_data)(struct tasdevice_priv *tas_priv,\n\t\tstruct tasdevice_fw *tas_fmw,\n\t\tconst struct firmware *fmw, int offset);\n\tint (*fw_parse_configuration_data)(struct tasdevice_priv *tas_priv,\n\t\tstruct tasdevice_fw *tas_fmw,\n\t\tconst struct firmware *fmw, int offset);\n\tint (*tasdevice_load_block)(struct tasdevice_priv *tas_priv,\n\t\tstruct tasdev_blk *block);\n};\n\nvoid tas2781_reset(struct tasdevice_priv *tas_dev);\nint tascodec_init(struct tasdevice_priv *tas_priv, void *codec,\n\tvoid (*cont)(const struct firmware *fw, void *context));\nstruct tasdevice_priv *tasdevice_kzalloc(struct i2c_client *i2c);\nint tasdevice_init(struct tasdevice_priv *tas_priv);\nvoid tasdevice_remove(struct tasdevice_priv *tas_priv);\nint tasdevice_dev_read(struct tasdevice_priv *tas_priv,\n\tunsigned short chn, unsigned int reg, unsigned int *value);\nint tasdevice_dev_write(struct tasdevice_priv *tas_priv,\n\tunsigned short chn, unsigned int reg, unsigned int value);\nint tasdevice_dev_bulk_write(\n\tstruct tasdevice_priv *tas_priv, unsigned short chn,\n\tunsigned int reg, unsigned char *p_data, unsigned int n_length);\nint tasdevice_dev_bulk_read(struct tasdevice_priv *tas_priv,\n\tunsigned short chn, unsigned int reg, unsigned char *p_data,\n\tunsigned int n_length);\nint tasdevice_dev_update_bits(\n\tstruct tasdevice_priv *tasdevice, unsigned short chn,\n\tunsigned int reg, unsigned int mask, unsigned int value);\nint tasdevice_amp_putvol(struct tasdevice_priv *tas_priv,\n\tstruct snd_ctl_elem_value *ucontrol, struct soc_mixer_control *mc);\nint tasdevice_amp_getvol(struct tasdevice_priv *tas_priv,\n\tstruct snd_ctl_elem_value *ucontrol, struct soc_mixer_control *mc);\nint tasdevice_digital_putvol(struct tasdevice_priv *tas_priv,\n\tstruct snd_ctl_elem_value *ucontrol, struct soc_mixer_control *mc);\nint tasdevice_digital_getvol(struct tasdevice_priv *tas_priv,\n\tstruct snd_ctl_elem_value *ucontrol, struct soc_mixer_control *mc);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}