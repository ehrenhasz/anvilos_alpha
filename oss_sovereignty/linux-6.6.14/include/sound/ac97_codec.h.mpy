{
  "module_name": "ac97_codec.h",
  "hash_id": "300562000f85df1734170640f7b3a1eb4eafaeb2d5718a2102c32236694e72ac",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/ac97_codec.h",
  "human_readable_source": " \n\n#ifndef __SOUND_AC97_CODEC_H\n#define __SOUND_AC97_CODEC_H\n\n#include <linux/bitops.h>\n#include <linux/device.h>\n#include <linux/workqueue.h>\n#include <sound/ac97/regs.h>\n#include <sound/pcm.h>\n#include <sound/control.h>\n#include <sound/info.h>\n\n \n#define\tAC97_BUS_MAX_DEVICES\t4\n\n \n#define AC97_SIGMATEL_OUTSEL\t0x64\t \n#define AC97_SIGMATEL_INSEL\t0x66\t \n#define AC97_SIGMATEL_IOMISC\t0x68\t \n#define AC97_SIGMATEL_ANALOG\t0x6c\t \n#define AC97_SIGMATEL_DAC2INVERT 0x6e\n#define AC97_SIGMATEL_BIAS1\t0x70\n#define AC97_SIGMATEL_BIAS2\t0x72\n#define AC97_SIGMATEL_VARIOUS\t0x72\t \n#define AC97_SIGMATEL_MULTICHN\t0x74\t \n#define AC97_SIGMATEL_CIC1\t0x76\n#define AC97_SIGMATEL_CIC2\t0x78\n\n \n#define AC97_AD_TEST\t\t0x5a\t \n#define AC97_AD_TEST2\t\t0x5c\t \n#define AC97_AD_HPFD_SHIFT\t12\t \n#define AC97_AD_CODEC_CFG\t0x70\t \n#define AC97_AD_JACK_SPDIF\t0x72\t \n#define AC97_AD_SERIAL_CFG\t0x74\t \n#define AC97_AD_MISC\t\t0x76\t \n#define AC97_AD_VREFD_SHIFT\t2\t \n\n \n#define AC97_CSR_ACMODE\t\t0x5e\t \n#define AC97_CSR_MISC_CRYSTAL\t0x60\t \n#define AC97_CSR_SPDIF\t\t0x68\t \n#define AC97_CSR_SERIAL\t\t0x6a\t \n#define AC97_CSR_SPECF_ADDR\t0x6c\t \n#define AC97_CSR_SPECF_DATA\t0x6e\t \n#define AC97_CSR_BDI_STATUS\t0x7a\t \n\n \n#define AC97_CXR_AUDIO_MISC\t0x5c\n#define AC97_CXR_SPDIFEN\t(1<<3)\n#define AC97_CXR_COPYRGT\t(1<<2)\n#define AC97_CXR_SPDIF_MASK\t(3<<0)\n#define AC97_CXR_SPDIF_PCM\t0x0\n#define AC97_CXR_SPDIF_AC3\t0x2\n\n \n#define AC97_ALC650_SPDIF_INPUT_STATUS1\t0x60\n \n#define AC97_ALC650_PRO             0x0001   \n#define AC97_ALC650_NAUDIO          0x0002   \n#define AC97_ALC650_COPY            0x0004   \n#define AC97_ALC650_PRE             0x0038   \n#define AC97_ALC650_PRE_SHIFT       3\n#define AC97_ALC650_MODE            0x00C0   \n#define AC97_ALC650_MODE_SHIFT      6\n#define AC97_ALC650_CC_MASK         0x7f00   \n#define AC97_ALC650_CC_SHIFT        8\n#define AC97_ALC650_L               0x8000   \n\n#define AC97_ALC650_SPDIF_INPUT_STATUS2\t0x62\n \n#define AC97_ALC650_SOUCE_MASK      0x000f   \n#define AC97_ALC650_CHANNEL_MASK    0x00f0   \n#define AC97_ALC650_CHANNEL_SHIFT   4 \n#define AC97_ALC650_SPSR_MASK       0x0f00   \n#define AC97_ALC650_SPSR_SHIFT      8\n#define AC97_ALC650_SPSR_44K        0x0000   \n#define AC97_ALC650_SPSR_48K        0x0200   \n#define AC97_ALC650_SPSR_32K        0x0300   \n#define AC97_ALC650_CLOCK_ACCURACY  0x3000   \n#define AC97_ALC650_CLOCK_SHIFT     12\n#define AC97_ALC650_CLOCK_LOCK      0x4000   \n#define AC97_ALC650_V               0x8000   \n\n#define AC97_ALC650_SURR_DAC_VOL\t0x64\n#define AC97_ALC650_LFE_DAC_VOL\t\t0x66\n#define AC97_ALC650_UNKNOWN1\t\t0x68\n#define AC97_ALC650_MULTICH\t\t0x6a\n#define AC97_ALC650_UNKNOWN2\t\t0x6c\n#define AC97_ALC650_REVISION\t\t0x6e\n#define AC97_ALC650_UNKNOWN3\t\t0x70\n#define AC97_ALC650_UNKNOWN4\t\t0x72\n#define AC97_ALC650_MISC\t\t0x74\n#define AC97_ALC650_GPIO_SETUP\t\t0x76\n#define AC97_ALC650_GPIO_STATUS\t\t0x78\n#define AC97_ALC650_CLOCK\t\t0x7a\n\n \n#define AC97_YMF7X3_DIT_CTRL\t0x66\t \n#define AC97_YMF7X3_3D_MODE_SEL\t0x68\t \n\n \n#define AC97_CM9738_VENDOR_CTRL\t0x5a\n#define AC97_CM9739_MULTI_CHAN\t0x64\n#define AC97_CM9739_SPDIF_IN_STATUS\t0x68  \n#define AC97_CM9739_SPDIF_CTRL\t0x6c\n\n \n#define AC97_WM97XX_FMIXER_VOL  0x72\n#define AC97_WM9704_RMIXER_VOL  0x74\n#define AC97_WM9704_TEST        0x5a\n#define AC97_WM9704_RPCM_VOL    0x70\n#define AC97_WM9711_OUT3VOL     0x16\n\n\n \n#define AC97_SCAP_AUDIO\t\t(1<<0)\t \n#define AC97_SCAP_MODEM\t\t(1<<1)\t \n#define AC97_SCAP_SURROUND_DAC\t(1<<2)\t \n#define AC97_SCAP_CENTER_LFE_DAC (1<<3)\t \n#define AC97_SCAP_SKIP_AUDIO\t(1<<4)\t \n#define AC97_SCAP_SKIP_MODEM\t(1<<5)\t \n#define AC97_SCAP_INDEP_SDIN\t(1<<6)\t \n#define AC97_SCAP_INV_EAPD\t(1<<7)\t \n#define AC97_SCAP_DETECT_BY_VENDOR (1<<8)  \n#define AC97_SCAP_NO_SPDIF\t(1<<9)\t \n#define AC97_SCAP_EAPD_LED\t(1<<10)\t \n#define AC97_SCAP_POWER_SAVE\t(1<<11)\t \n\n \n#define AC97_HAS_PC_BEEP\t(1<<0)\t \n#define AC97_AD_MULTI\t\t(1<<1)\t \n#define AC97_CS_SPDIF\t\t(1<<2)\t \n#define AC97_CX_SPDIF\t\t(1<<3)\t \n#define AC97_STEREO_MUTES\t(1<<4)\t \n#define AC97_DOUBLE_RATE\t(1<<5)\t \n#define AC97_HAS_NO_MASTER_VOL\t(1<<6)\t \n#define AC97_HAS_NO_PCM_VOL\t(1<<7)\t \n#define AC97_DEFAULT_POWER_OFF\t(1<<8)\t \n#define AC97_MODEM_PATCH\t(1<<9)\t \n#define AC97_HAS_NO_REC_GAIN\t(1<<10)  \n#define AC97_HAS_NO_PHONE\t(1<<11)  \n#define AC97_HAS_NO_PC_BEEP\t(1<<12)  \n#define AC97_HAS_NO_VIDEO\t(1<<13)  \n#define AC97_HAS_NO_CD\t\t(1<<14)  \n#define AC97_HAS_NO_MIC\t(1<<15)  \n#define AC97_HAS_NO_TONE\t(1<<16)  \n#define AC97_HAS_NO_STD_PCM\t(1<<17)\t \n#define AC97_HAS_NO_AUX\t\t(1<<18)  \n#define AC97_HAS_8CH\t\t(1<<19)  \n\n \n#define AC97_RATES_FRONT_DAC\t0\n#define AC97_RATES_SURR_DAC\t1\n#define AC97_RATES_LFE_DAC\t2\n#define AC97_RATES_ADC\t\t3\n#define AC97_RATES_MIC_ADC\t4\n#define AC97_RATES_SPDIF\t5\n\n#define AC97_NUM_GPIOS\t\t16\n \n\nstruct snd_ac97;\nstruct snd_ac97_gpio_priv;\nstruct snd_pcm_chmap;\n\nstruct snd_ac97_build_ops {\n\tint (*build_3d) (struct snd_ac97 *ac97);\n\tint (*build_specific) (struct snd_ac97 *ac97);\n\tint (*build_spdif) (struct snd_ac97 *ac97);\n\tint (*build_post_spdif) (struct snd_ac97 *ac97);\n#ifdef CONFIG_PM\n\tvoid (*suspend) (struct snd_ac97 *ac97);\n\tvoid (*resume) (struct snd_ac97 *ac97);\n#endif\n\tvoid (*update_jacks) (struct snd_ac97 *ac97);\t \n};\n\nstruct snd_ac97_bus_ops {\n\tvoid (*reset) (struct snd_ac97 *ac97);\n\tvoid (*warm_reset)(struct snd_ac97 *ac97);\n\tvoid (*write) (struct snd_ac97 *ac97, unsigned short reg, unsigned short val);\n\tunsigned short (*read) (struct snd_ac97 *ac97, unsigned short reg);\n\tvoid (*wait) (struct snd_ac97 *ac97);\n\tvoid (*init) (struct snd_ac97 *ac97);\n};\n\nstruct snd_ac97_bus {\n\t \n\tconst struct snd_ac97_bus_ops *ops;\n\tvoid *private_data;\n\tvoid (*private_free) (struct snd_ac97_bus *bus);\n\t \n\tstruct snd_card *card;\n\tunsigned short num;\t \n\tunsigned short no_vra: 1,  \n\t\t       dra: 1,\t \n\t\t       isdin: 1; \n\tunsigned int clock;\t \n\tspinlock_t bus_lock;\t \n\tunsigned short used_slots[2][4];  \n\tunsigned short pcms_count;  \n\tstruct ac97_pcm *pcms;\n\tstruct snd_ac97 *codec[4];\n\tstruct snd_info_entry *proc;\n};\n\n \nstruct snd_ac97_res_table {\n\tunsigned short reg;\t \n\tunsigned short bits;\t \n};\n\nstruct snd_ac97_template {\n\tvoid *private_data;\n\tvoid (*private_free) (struct snd_ac97 *ac97);\n\tstruct pci_dev *pci;\t \n\tunsigned short num;\t \n\tunsigned short addr;\t \n\tunsigned int scaps;\t \n\tconst struct snd_ac97_res_table *res_table;\t \n};\n\nstruct snd_ac97 {\n\t \n\tconst struct snd_ac97_build_ops *build_ops;\n\tvoid *private_data;\n\tvoid (*private_free) (struct snd_ac97 *ac97);\n\t \n\tstruct snd_ac97_bus *bus;\n\tstruct pci_dev *pci;\t \n\tstruct snd_info_entry *proc;\n\tstruct snd_info_entry *proc_regs;\n\tunsigned short subsystem_vendor;\n\tunsigned short subsystem_device;\n\tstruct mutex reg_mutex;\n\tstruct mutex page_mutex;\t \n\tunsigned short num;\t \n\tunsigned short addr;\t \n\tunsigned int id;\t \n\tunsigned short caps;\t \n\tunsigned short ext_id;\t \n\tunsigned short ext_mid;\t \n\tconst struct snd_ac97_res_table *res_table;\t \n\tunsigned int scaps;\t \n\tunsigned int flags;\t \n\tunsigned int rates[6];\t \n\tunsigned int spdif_status;\n\tunsigned short regs[0x80];  \n\tDECLARE_BITMAP(reg_accessed, 0x80);  \n\tunion {\t\t\t \n\t\tstruct {\n\t\t\tunsigned short unchained[3];\t\n\t\t\tunsigned short chained[3];\t\n\t\t\tunsigned short id[3];\t\t\n\t\t\tunsigned short pcmreg[3];\t\n\t\t\tunsigned short codec_cfg[3];\t\n\t\t\tunsigned char swap_mic_linein;\t\n\t\t\tunsigned char lo_as_master;\t \n\t\t} ad18xx;\n\t\tunsigned int dev_flags;\t\t \n\t} spec;\n\t \n\tunsigned char indep_surround;\n\tunsigned char channel_mode;\n\n#ifdef CONFIG_SND_AC97_POWER_SAVE\n\tunsigned int power_up;\t \n\tstruct delayed_work power_work;\n#endif\n\tstruct device dev;\n\tstruct snd_ac97_gpio_priv *gpio_priv;\n\n\tstruct snd_pcm_chmap *chmaps[2];  \n};\n\n#define to_ac97_t(d) container_of(d, struct snd_ac97, dev)\n\n \nstatic inline int ac97_is_audio(struct snd_ac97 * ac97)\n{\n\treturn (ac97->scaps & AC97_SCAP_AUDIO);\n}\nstatic inline int ac97_is_modem(struct snd_ac97 * ac97)\n{\n\treturn (ac97->scaps & AC97_SCAP_MODEM);\n}\nstatic inline int ac97_is_rev22(struct snd_ac97 * ac97)\n{\n\treturn (ac97->ext_id & AC97_EI_REV_MASK) >= AC97_EI_REV_22;\n}\nstatic inline int ac97_can_amap(struct snd_ac97 * ac97)\n{\n\treturn (ac97->ext_id & AC97_EI_AMAP) != 0;\n}\nstatic inline int ac97_can_spdif(struct snd_ac97 * ac97)\n{\n\treturn (ac97->ext_id & AC97_EI_SPDIF) != 0;\n}\n\n \n \nint snd_ac97_bus(struct snd_card *card, int num,\n\t\t const struct snd_ac97_bus_ops *ops,\n\t\t void *private_data, struct snd_ac97_bus **rbus);\n \nint snd_ac97_mixer(struct snd_ac97_bus *bus, struct snd_ac97_template *template,\n\t\t   struct snd_ac97 **rac97);\nconst char *snd_ac97_get_short_name(struct snd_ac97 *ac97);\n\nvoid snd_ac97_write(struct snd_ac97 *ac97, unsigned short reg, unsigned short value);\nunsigned short snd_ac97_read(struct snd_ac97 *ac97, unsigned short reg);\nvoid snd_ac97_write_cache(struct snd_ac97 *ac97, unsigned short reg, unsigned short value);\nint snd_ac97_update(struct snd_ac97 *ac97, unsigned short reg, unsigned short value);\nint snd_ac97_update_bits(struct snd_ac97 *ac97, unsigned short reg, unsigned short mask, unsigned short value);\n#ifdef CONFIG_SND_AC97_POWER_SAVE\nint snd_ac97_update_power(struct snd_ac97 *ac97, int reg, int powerup);\n#else\nstatic inline int snd_ac97_update_power(struct snd_ac97 *ac97, int reg,\n\t\t\t\t\tint powerup)\n{\n\treturn 0;\n}\n#endif\n#ifdef CONFIG_PM\nvoid snd_ac97_suspend(struct snd_ac97 *ac97);\nvoid snd_ac97_resume(struct snd_ac97 *ac97);\n#else\nstatic inline void snd_ac97_suspend(struct snd_ac97 *ac97) {}\nstatic inline void snd_ac97_resume(struct snd_ac97 *ac97) {}\n#endif\nint snd_ac97_reset(struct snd_ac97 *ac97, bool try_warm, unsigned int id,\n\tunsigned int id_mask);\n\n \nenum {\n\tAC97_TUNE_DEFAULT = -1,\t \n\tAC97_TUNE_NONE = 0,\t \n\tAC97_TUNE_HP_ONLY,\t \n\tAC97_TUNE_SWAP_HP,\t \n\tAC97_TUNE_SWAP_SURROUND,  \n\tAC97_TUNE_AD_SHARING,\t \n\tAC97_TUNE_ALC_JACK,\t \n\tAC97_TUNE_INV_EAPD,\t \n\tAC97_TUNE_MUTE_LED,\t \n\tAC97_TUNE_HP_MUTE_LED,   \n};\n\nstruct ac97_quirk {\n\tunsigned short subvendor;  \n\tunsigned short subdevice;  \n\tunsigned short mask;\t \n\tunsigned int codec_id;\t \n\tconst char *name;\t \n\tint type;\t\t \n};\n\nint snd_ac97_tune_hardware(struct snd_ac97 *ac97,\n\t\t\t   const struct ac97_quirk *quirk,\n\t\t\t   const char *override);\nint snd_ac97_set_rate(struct snd_ac97 *ac97, int reg, unsigned int rate);\n\n \n\nenum ac97_pcm_cfg {\n\tAC97_PCM_CFG_FRONT = 2,\n\tAC97_PCM_CFG_REAR = 10,\t\t \n\tAC97_PCM_CFG_LFE = 11,\t\t \n\tAC97_PCM_CFG_40 = 4,\t\t \n\tAC97_PCM_CFG_51 = 6,\t\t \n\tAC97_PCM_CFG_SPDIF = 20\n};\n\nstruct ac97_pcm {\n\tstruct snd_ac97_bus *bus;\n\tunsigned int stream: 1,\t   \t    \n\t\t     exclusive: 1,\t    \n\t\t     copy_flag: 1,\t    \n\t\t     spdif: 1;\t\t    \n\tunsigned short aslots;\t\t    \n\tunsigned short cur_dbl;\t\t    \n\tunsigned int rates;\t\t    \n\tstruct {\n\t\tunsigned short slots;\t    \n\t\tunsigned short rslots[4];   \n\t\tunsigned char rate_table[4];\n\t\tstruct snd_ac97 *codec[4];\t    \n\t} r[2];\t\t\t\t    \n\tunsigned long private_value;\t    \n};\n\nint snd_ac97_pcm_assign(struct snd_ac97_bus *ac97,\n\t\t\tunsigned short pcms_count,\n\t\t\tconst struct ac97_pcm *pcms);\nint snd_ac97_pcm_open(struct ac97_pcm *pcm, unsigned int rate,\n\t\t      enum ac97_pcm_cfg cfg, unsigned short slots);\nint snd_ac97_pcm_close(struct ac97_pcm *pcm);\nint snd_ac97_pcm_double_rate_rules(struct snd_pcm_runtime *runtime);\n\n \nextern struct bus_type ac97_bus_type;\n\n \nstatic inline void snd_ac97_dev_add_pdata(struct snd_ac97 *ac97, void *data)\n{\n\tac97->dev.platform_data = data;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}