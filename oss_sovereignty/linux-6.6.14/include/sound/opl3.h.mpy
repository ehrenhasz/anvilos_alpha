{
  "module_name": "opl3.h",
  "hash_id": "2c9ec565c143b3bb9ee78deda02692258201c5be907e44bddd012e6e0da2d7da",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/opl3.h",
  "human_readable_source": " \n#ifndef __SOUND_OPL3_H\n#define __SOUND_OPL3_H\n\n \n\n#include <sound/core.h>\n#include <sound/hwdep.h>\n#include <sound/timer.h>\n#include <sound/seq_midi_emul.h>\n#include <sound/seq_oss.h>\n#include <sound/seq_oss_legacy.h>\n#include <sound/seq_device.h>\n#include <sound/asound_fm.h>\n\n \n\n#define OPL3_REG_TEST\t\t\t0x01\n#define   OPL3_ENABLE_WAVE_SELECT\t0x20\n\n#define OPL3_REG_TIMER1\t\t\t0x02\n#define OPL3_REG_TIMER2\t\t\t0x03\n#define OPL3_REG_TIMER_CONTROL\t\t0x04\t \n#define   OPL3_IRQ_RESET\t\t0x80\n#define   OPL3_TIMER1_MASK\t\t0x40\n#define   OPL3_TIMER2_MASK\t\t0x20\n#define   OPL3_TIMER1_START\t\t0x01\n#define   OPL3_TIMER2_START\t\t0x02\n\n#define OPL3_REG_CONNECTION_SELECT\t0x04\t \n#define   OPL3_LEFT_4OP_0\t\t0x01\n#define   OPL3_LEFT_4OP_1\t\t0x02\n#define   OPL3_LEFT_4OP_2\t\t0x04\n#define   OPL3_RIGHT_4OP_0\t\t0x08\n#define   OPL3_RIGHT_4OP_1\t\t0x10\n#define   OPL3_RIGHT_4OP_2\t\t0x20\n\n#define OPL3_REG_MODE\t\t\t0x05\t \n#define   OPL3_OPL3_ENABLE\t\t0x01\t \n#define   OPL3_OPL4_ENABLE\t\t0x02\t \n\n#define OPL3_REG_KBD_SPLIT\t\t0x08\t \n#define   OPL3_COMPOSITE_SINE_WAVE_MODE\t0x80\t \n#define   OPL3_KEYBOARD_SPLIT\t\t0x40\n\n#define OPL3_REG_PERCUSSION\t\t0xbd\t \n#define   OPL3_TREMOLO_DEPTH\t\t0x80\n#define   OPL3_VIBRATO_DEPTH\t\t0x40\n#define\t  OPL3_PERCUSSION_ENABLE\t0x20\n#define   OPL3_BASSDRUM_ON\t\t0x10\n#define   OPL3_SNAREDRUM_ON\t\t0x08\n#define   OPL3_TOMTOM_ON\t\t0x04\n#define   OPL3_CYMBAL_ON\t\t0x02\n#define   OPL3_HIHAT_ON\t\t\t0x01\n\n \n#define OPL3_REG_AM_VIB\t\t\t0x20\n#define   OPL3_TREMOLO_ON\t\t0x80\n#define   OPL3_VIBRATO_ON\t\t0x40\n#define   OPL3_SUSTAIN_ON\t\t0x20\n#define   OPL3_KSR\t\t\t0x10\t \n#define   OPL3_MULTIPLE_MASK\t\t0x0f\t \n\n  \n#define OPL3_REG_KSL_LEVEL\t\t0x40\n#define   OPL3_KSL_MASK\t\t\t0xc0\t \n#define   OPL3_TOTAL_LEVEL_MASK\t\t0x3f\t \n\n \n#define OPL3_REG_ATTACK_DECAY\t\t0x60\n#define   OPL3_ATTACK_MASK\t\t0xf0\n#define   OPL3_DECAY_MASK\t\t0x0f\n\n \n#define OPL3_REG_SUSTAIN_RELEASE\t0x80\n#define   OPL3_SUSTAIN_MASK\t\t0xf0\n#define   OPL3_RELEASE_MASK\t\t0x0f\n\n \n#define OPL3_REG_WAVE_SELECT\t\t0xe0\n#define   OPL3_WAVE_SELECT_MASK\t\t0x07\n\n \n#define OPL3_REG_FNUM_LOW\t\t0xa0\n\n \n#define OPL3_REG_KEYON_BLOCK\t\t0xb0\n#define\t  OPL3_KEYON_BIT\t\t0x20\n#define\t  OPL3_BLOCKNUM_MASK\t\t0x1c\n#define   OPL3_FNUM_HIGH_MASK\t\t0x03\n\n \n#define OPL3_REG_FEEDBACK_CONNECTION\t0xc0\n#define   OPL3_FEEDBACK_MASK\t\t0x0e\t \n#define   OPL3_CONNECTION_BIT\t\t0x01\n \n#define   OPL3_STEREO_BITS\t\t0x30\t \n#define     OPL3_VOICE_TO_LEFT\t\t0x10\n#define     OPL3_VOICE_TO_RIGHT\t\t0x20\n\n \n\n#define OPL3_LEFT\t\t0x0000\n#define OPL3_RIGHT\t\t0x0100\n\n#define OPL3_HW_AUTO\t\t0x0000\n#define OPL3_HW_OPL2\t\t0x0200\n#define OPL3_HW_OPL3\t\t0x0300\n#define OPL3_HW_OPL3_SV\t\t0x0301\t \n#define OPL3_HW_OPL3_CS\t\t0x0302\t \n#define OPL3_HW_OPL3_FM801\t0x0303\t \n#define OPL3_HW_OPL3_CS4281\t0x0304\t \n#define OPL3_HW_OPL4\t\t0x0400\t \n#define OPL3_HW_OPL4_ML\t\t0x0401\t \n#define OPL3_HW_MASK\t\t0xff00\n\n#define MAX_OPL2_VOICES\t\t9\n#define MAX_OPL3_VOICES\t\t18\n\nstruct snd_opl3;\n\n \n\n \nstruct fm_operator {\n\tunsigned char am_vib;\n\tunsigned char ksl_level;\n\tunsigned char attack_decay;\n\tunsigned char sustain_release;\n\tunsigned char wave_select;\n} __attribute__((packed));\n\n \nstruct fm_instrument {\n\tstruct fm_operator op[4];\n\tunsigned char feedback_connection[2];\n\tunsigned char echo_delay;\n\tunsigned char echo_atten;\n\tunsigned char chorus_spread;\n\tunsigned char trnsps;\n\tunsigned char fix_dur;\n\tunsigned char modes;\n\tunsigned char fix_key;\n};\n\n \n#define FM_PATCH_OPL2\t0x01\t\t \n#define FM_PATCH_OPL3\t0x02\t\t \n\n \nstruct fm_patch {\n\tunsigned char prog;\n\tunsigned char bank;\n\tunsigned char type;\n\tstruct fm_instrument inst;\n\tchar name[24];\n\tstruct fm_patch *next;\n};\n\n\n \nstruct snd_opl3_voice {\n\tint  state;\t\t \n#define SNDRV_OPL3_ST_OFF\t\t0\t \n#define SNDRV_OPL3_ST_ON_2OP\t1\t \n#define SNDRV_OPL3_ST_ON_4OP\t2\t \n#define SNDRV_OPL3_ST_NOT_AVAIL\t-1\t \n\n\tunsigned int time;\t \n\tunsigned char note;\t \n\n\tunsigned long note_off;\t \n\tint note_off_check;\t \n\n\tunsigned char keyon_reg;\t \n\n\tstruct snd_midi_channel *chan;\t \n};\n\nstruct snd_opl3 {\n\tunsigned long l_port;\n\tunsigned long r_port;\n\tstruct resource *res_l_port;\n\tstruct resource *res_r_port;\n\tunsigned short hardware;\n\t \n\tvoid (*command) (struct snd_opl3 * opl3, unsigned short cmd, unsigned char val);\n\tunsigned short timer_enable;\n\tint seq_dev_num;\t \n\tstruct snd_timer *timer1;\n\tstruct snd_timer *timer2;\n\tspinlock_t timer_lock;\n\n\tvoid *private_data;\n\tvoid (*private_free)(struct snd_opl3 *);\n\n\tstruct snd_hwdep *hwdep;\n\tspinlock_t reg_lock;\n\tstruct snd_card *card;\t\t \n\tunsigned char fm_mode;\t\t \n\tunsigned char rhythm;\t\t \n\tunsigned char max_voices;\t \n#if IS_ENABLED(CONFIG_SND_SEQUENCER)\n#define SNDRV_OPL3_MODE_SYNTH 0\t\t \n#define SNDRV_OPL3_MODE_SEQ 1\t\t \n\tint synth_mode;\t\t\t \n\tint seq_client;\n\n\tstruct snd_seq_device *seq_dev;\t \n\tstruct snd_midi_channel_set * chset;\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER_OSS)\n\tstruct snd_seq_device *oss_seq_dev;\t \n\tstruct snd_midi_channel_set * oss_chset;\n#endif\n \n#define OPL3_PATCH_HASH_SIZE\t32\n\tstruct fm_patch *patch_table[OPL3_PATCH_HASH_SIZE];\n\n\tstruct snd_opl3_voice voices[MAX_OPL3_VOICES];  \n\tint use_time;\t\t\t \n\n\tunsigned short connection_reg;\t \n\tunsigned char drum_reg;\t\t \n\n\tspinlock_t voice_lock;\t\t \n\n\tstruct timer_list tlist;\t \n\tint sys_timer_status;\t\t \n\tspinlock_t sys_timer_lock;\t \n#endif\n};\n\n \nvoid snd_opl3_interrupt(struct snd_hwdep * hw);\nint snd_opl3_new(struct snd_card *card, unsigned short hardware,\n\t\t struct snd_opl3 **ropl3);\nint snd_opl3_init(struct snd_opl3 *opl3);\nint snd_opl3_create(struct snd_card *card,\n\t\t    unsigned long l_port, unsigned long r_port,\n\t\t    unsigned short hardware,\n\t\t    int integrated,\n\t\t    struct snd_opl3 ** opl3);\nint snd_opl3_timer_new(struct snd_opl3 * opl3, int timer1_dev, int timer2_dev);\nint snd_opl3_hwdep_new(struct snd_opl3 * opl3, int device, int seq_device,\n\t\t       struct snd_hwdep ** rhwdep);\n\n \nint snd_opl3_open(struct snd_hwdep * hw, struct file *file);\nint snd_opl3_ioctl(struct snd_hwdep * hw, struct file *file,\n\t\t   unsigned int cmd, unsigned long arg);\nint snd_opl3_release(struct snd_hwdep * hw, struct file *file);\n\nvoid snd_opl3_reset(struct snd_opl3 * opl3);\n\n#if IS_ENABLED(CONFIG_SND_SEQUENCER)\nlong snd_opl3_write(struct snd_hwdep *hw, const char __user *buf, long count,\n\t\t    loff_t *offset);\nint snd_opl3_load_patch(struct snd_opl3 *opl3,\n\t\t\tint prog, int bank, int type,\n\t\t\tconst char *name,\n\t\t\tconst unsigned char *ext,\n\t\t\tconst unsigned char *data);\nstruct fm_patch *snd_opl3_find_patch(struct snd_opl3 *opl3, int prog, int bank,\n\t\t\t\t     int create_patch);\nvoid snd_opl3_clear_patches(struct snd_opl3 *opl3);\n#else\n#define snd_opl3_write\tNULL\nstatic inline void snd_opl3_clear_patches(struct snd_opl3 *opl3) {}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}