{
  "module_name": "sb.h",
  "hash_id": "5175ca989a79f9be30794e3c3c57e0cf7ff9495b086ca52749718883917427e4",
  "original_prompt": "Ingested from linux-6.6.14/include/sound/sb.h",
  "human_readable_source": " \n#ifndef __SOUND_SB_H\n#define __SOUND_SB_H\n\n \n\n#include <sound/pcm.h>\n#include <sound/rawmidi.h>\n#include <linux/interrupt.h>\n#include <linux/io.h>\n\nenum sb_hw_type {\n\tSB_HW_AUTO,\n\tSB_HW_10,\n\tSB_HW_20,\n\tSB_HW_201,\n\tSB_HW_PRO,\n\tSB_HW_JAZZ16,\t\t \n\tSB_HW_16,\n\tSB_HW_16CSP,\t\t \n\tSB_HW_ALS100,\t\t \n\tSB_HW_ALS4000,\t\t \n\tSB_HW_DT019X,\t\t \n\tSB_HW_CS5530,\t\t \n};\n\n#define SB_OPEN_PCM\t\t\t0x01\n#define SB_OPEN_MIDI_INPUT\t\t0x02\n#define SB_OPEN_MIDI_OUTPUT\t\t0x04\n#define SB_OPEN_MIDI_INPUT_TRIGGER\t0x08\n#define SB_OPEN_MIDI_OUTPUT_TRIGGER\t0x10\n\n#define SB_MODE_HALT\t\t0x00\n#define SB_MODE_PLAYBACK_8\t0x01\n#define SB_MODE_PLAYBACK_16\t0x02\n#define SB_MODE_PLAYBACK\t(SB_MODE_PLAYBACK_8 | SB_MODE_PLAYBACK_16)\n#define SB_MODE_CAPTURE_8\t0x04\n#define SB_MODE_CAPTURE_16\t0x08\n#define SB_MODE_CAPTURE\t\t(SB_MODE_CAPTURE_8 | SB_MODE_CAPTURE_16)\n\n#define SB_RATE_LOCK_PLAYBACK\t0x10\n#define SB_RATE_LOCK_CAPTURE\t0x20\n#define SB_RATE_LOCK\t\t(SB_RATE_LOCK_PLAYBACK | SB_RATE_LOCK_CAPTURE)\n\n#define SB_MPU_INPUT\t\t1\n\nstruct snd_sb {\n\tunsigned long port;\t\t \n\tstruct resource *res_port;\n\tunsigned long mpu_port;\t\t \n\tint irq;\t\t\t \n\tint dma8;\t\t\t \n\tint dma16;\t\t\t \n\tunsigned short version;\t\t \n\tenum sb_hw_type hardware;\t \n\n\tunsigned long alt_port;\t\t \n\tstruct pci_dev *pci;\t\t \n\n\tunsigned int open;\t\t \n\t\t\t\t\t \n\tunsigned int mode;\t\t \n\tunsigned int force_mode16;\t \n\tunsigned int locked_rate;\t \n\tunsigned int playback_format;\n\tunsigned int capture_format;\n\tstruct timer_list midi_timer;\n\tunsigned int p_dma_size;\n\tunsigned int p_period_size;\n\tunsigned int c_dma_size;\n\tunsigned int c_period_size;\n\n\tspinlock_t mixer_lock;\n\n\tchar name[32];\n\n\tvoid *csp;  \n\n\tstruct snd_card *card;\n\tstruct snd_pcm *pcm;\n\tstruct snd_pcm_substream *playback_substream;\n\tstruct snd_pcm_substream *capture_substream;\n\n\tstruct snd_rawmidi *rmidi;\n\tstruct snd_rawmidi_substream *midi_substream_input;\n\tstruct snd_rawmidi_substream *midi_substream_output;\n\tirq_handler_t rmidi_callback;\n\n\tspinlock_t reg_lock;\n\tspinlock_t open_lock;\n\tspinlock_t midi_input_lock;\n\n\tstruct snd_info_entry *proc_entry;\n\n#ifdef CONFIG_PM\n\tunsigned char saved_regs[0x20];\n#endif\n};\n\n \n\n#define SBP(chip, x)\t\t((chip)->port + s_b_SB_##x)\n#define SBP1(port, x)\t\t((port) + s_b_SB_##x)\n\n#define s_b_SB_RESET\t\t0x6\n#define s_b_SB_READ\t\t0xa\n#define s_b_SB_WRITE\t\t0xc\n#define s_b_SB_COMMAND\t\t0xc\n#define s_b_SB_STATUS\t\t0xc\n#define s_b_SB_DATA_AVAIL\t0xe\n#define s_b_SB_DATA_AVAIL_16 \t0xf\n#define s_b_SB_MIXER_ADDR\t0x4\n#define s_b_SB_MIXER_DATA\t0x5\n#define s_b_SB_OPL3_LEFT\t0x0\n#define s_b_SB_OPL3_RIGHT\t0x2\n#define s_b_SB_OPL3_BOTH\t0x8\n\n#define SB_DSP_OUTPUT\t\t0x14\n#define SB_DSP_INPUT\t\t0x24\n#define SB_DSP_BLOCK_SIZE\t0x48\n#define SB_DSP_HI_OUTPUT\t0x91\n#define SB_DSP_HI_INPUT\t\t0x99\n#define SB_DSP_LO_OUTPUT_AUTO\t0x1c\n#define SB_DSP_LO_INPUT_AUTO\t0x2c\n#define SB_DSP_HI_OUTPUT_AUTO\t0x90\n#define SB_DSP_HI_INPUT_AUTO\t0x98\n#define SB_DSP_IMMED_INT\t0xf2\n#define SB_DSP_GET_VERSION\t0xe1\n#define SB_DSP_SPEAKER_ON\t0xd1\n#define SB_DSP_SPEAKER_OFF\t0xd3\n#define SB_DSP_DMA8_OFF\t\t0xd0\n#define SB_DSP_DMA8_ON\t\t0xd4\n#define SB_DSP_DMA8_EXIT\t0xda\n#define SB_DSP_DMA16_OFF\t0xd5\n#define SB_DSP_DMA16_ON\t\t0xd6\n#define SB_DSP_DMA16_EXIT\t0xd9\n#define SB_DSP_SAMPLE_RATE\t0x40\n#define SB_DSP_SAMPLE_RATE_OUT\t0x41\n#define SB_DSP_SAMPLE_RATE_IN\t0x42\n#define SB_DSP_MONO_8BIT\t0xa0\n#define SB_DSP_MONO_16BIT\t0xa4\n#define SB_DSP_STEREO_8BIT\t0xa8\n#define SB_DSP_STEREO_16BIT\t0xac\n\n#define SB_DSP_MIDI_INPUT_IRQ\t0x31\n#define SB_DSP_MIDI_UART_IRQ\t0x35\n#define SB_DSP_MIDI_OUTPUT\t0x38\n\n#define SB_DSP4_OUT8_AI\t\t0xc6\n#define SB_DSP4_IN8_AI\t\t0xce\n#define SB_DSP4_OUT16_AI\t0xb6\n#define SB_DSP4_IN16_AI\t\t0xbe\n#define SB_DSP4_MODE_UNS_MONO\t0x00\n#define SB_DSP4_MODE_SIGN_MONO\t0x10\n#define SB_DSP4_MODE_UNS_STEREO\t0x20\n#define SB_DSP4_MODE_SIGN_STEREO 0x30\n\n#define SB_DSP4_OUTPUT\t\t0x3c\n#define SB_DSP4_INPUT_LEFT\t0x3d\n#define SB_DSP4_INPUT_RIGHT\t0x3e\n\n \n#define SB_DSP20_MASTER_DEV\t0x02\n#define SB_DSP20_PCM_DEV\t0x0A\n#define SB_DSP20_CD_DEV\t\t0x08\n#define SB_DSP20_FM_DEV\t\t0x06\n\n \n#define SB_DSP_MASTER_DEV\t0x22\n#define SB_DSP_PCM_DEV\t\t0x04\n#define SB_DSP_LINE_DEV\t\t0x2e\n#define SB_DSP_CD_DEV\t\t0x28\n#define SB_DSP_FM_DEV\t\t0x26\n#define SB_DSP_MIC_DEV\t\t0x0a\n#define SB_DSP_CAPTURE_SOURCE\t0x0c\n#define SB_DSP_CAPTURE_FILT\t0x0c\n#define SB_DSP_PLAYBACK_FILT\t0x0e\n#define SB_DSP_STEREO_SW\t0x0e\n\n#define SB_DSP_MIXS_MIC0\t0x00\t \n#define SB_DSP_MIXS_CD\t\t0x01\n#define SB_DSP_MIXS_MIC\t\t0x02\n#define SB_DSP_MIXS_LINE\t0x03\n\n \n#define SB_DSP4_MASTER_DEV\t0x30\n#define SB_DSP4_BASS_DEV\t0x46\n#define SB_DSP4_TREBLE_DEV\t0x44\n#define SB_DSP4_SYNTH_DEV\t0x34\n#define SB_DSP4_PCM_DEV\t\t0x32\n#define SB_DSP4_SPEAKER_DEV\t0x3b\n#define SB_DSP4_LINE_DEV\t0x38\n#define SB_DSP4_MIC_DEV\t\t0x3a\n#define SB_DSP4_OUTPUT_SW\t0x3c\n#define SB_DSP4_CD_DEV\t\t0x36\n#define SB_DSP4_IGAIN_DEV\t0x3f\n#define SB_DSP4_OGAIN_DEV\t0x41\n#define SB_DSP4_MIC_AGC\t\t0x43\n\n \n#define SB_DSP4_IRQSETUP\t0x80\n#define SB_DSP4_DMASETUP\t0x81\n#define SB_DSP4_IRQSTATUS\t0x82\n#define SB_DSP4_MPUSETUP\t0x84\n\n#define SB_DSP4_3DSE\t\t0x90\n\n \n#define SB_DT019X_MASTER_DEV\t0x62\n#define SB_DT019X_PCM_DEV\t0x64\n#define SB_DT019X_SYNTH_DEV\t0x66\n#define SB_DT019X_CD_DEV\t0x68\n#define SB_DT019X_MIC_DEV\t0x6a\n#define SB_DT019X_SPKR_DEV\t0x6a\n#define SB_DT019X_LINE_DEV\t0x6e\n#define SB_DT019X_OUTPUT_SW2\t0x4c\n#define SB_DT019X_CAPTURE_SW\t0x6c\n\n#define SB_DT019X_CAP_CD\t0x02\n#define SB_DT019X_CAP_MIC\t0x04\n#define SB_DT019X_CAP_LINE\t0x06\n#define SB_DT019X_CAP_SYNTH\t0x07\n#define SB_DT019X_CAP_MAIN\t0x07\n\n#define SB_ALS4000_MONO_IO_CTRL\t0x4b\n#define SB_ALS4000_OUT_MIXER_CTRL_2\t0x4c\n#define SB_ALS4000_MIC_IN_GAIN\t0x4d\n#define SB_ALS4000_ANALOG_REFRNC_VOLT_CTRL 0x4e\n#define SB_ALS4000_FMDAC\t0x4f\n#define SB_ALS4000_3D_SND_FX\t0x50\n#define SB_ALS4000_3D_TIME_DELAY\t0x51\n#define SB_ALS4000_3D_AUTO_MUTE\t0x52\n#define SB_ALS4000_ANALOG_BLOCK_CTRL 0x53\n#define SB_ALS4000_3D_DELAYLINE_PATTERN 0x54\n#define SB_ALS4000_CR3_CONFIGURATION\t0xc3  \n#define SB_ALS4000_QSOUND\t0xdb\n\n \n#define SB_IRQSETUP_IRQ9\t0x01\n#define SB_IRQSETUP_IRQ5\t0x02\n#define SB_IRQSETUP_IRQ7\t0x04\n#define SB_IRQSETUP_IRQ10\t0x08\n\n \n#define SB_IRQTYPE_8BIT\t\t0x01\n#define SB_IRQTYPE_16BIT\t0x02\n#define SB_IRQTYPE_MPUIN\t0x04\n#define ALS4K_IRQTYPE_CR1E_DMA\t0x20\n\n \n#define SB_DMASETUP_DMA0\t0x01\n#define SB_DMASETUP_DMA1\t0x02\n#define SB_DMASETUP_DMA3\t0x08\n#define SB_DMASETUP_DMA5\t0x20\n#define SB_DMASETUP_DMA6\t0x40\n#define SB_DMASETUP_DMA7\t0x80\n\n \n\nstatic inline void snd_sb_ack_8bit(struct snd_sb *chip)\n{\n\tinb(SBP(chip, DATA_AVAIL));\n}\n\nstatic inline void snd_sb_ack_16bit(struct snd_sb *chip)\n{\n\tinb(SBP(chip, DATA_AVAIL_16));\n}\n\n \nint snd_sbdsp_command(struct snd_sb *chip, unsigned char val);\nint snd_sbdsp_get_byte(struct snd_sb *chip);\nint snd_sbdsp_reset(struct snd_sb *chip);\nint snd_sbdsp_create(struct snd_card *card,\n\t\t     unsigned long port,\n\t\t     int irq,\n\t\t     irq_handler_t irq_handler,\n\t\t     int dma8, int dma16,\n\t\t     unsigned short hardware,\n\t\t     struct snd_sb **r_chip);\n \nvoid snd_sbmixer_write(struct snd_sb *chip, unsigned char reg, unsigned char data);\nunsigned char snd_sbmixer_read(struct snd_sb *chip, unsigned char reg);\nint snd_sbmixer_new(struct snd_sb *chip);\n#ifdef CONFIG_PM\nvoid snd_sbmixer_suspend(struct snd_sb *chip);\nvoid snd_sbmixer_resume(struct snd_sb *chip);\n#endif\n\n \nint snd_sb8dsp_pcm(struct snd_sb *chip, int device);\n \nirqreturn_t snd_sb8dsp_interrupt(struct snd_sb *chip);\nint snd_sb8_playback_open(struct snd_pcm_substream *substream);\nint snd_sb8_capture_open(struct snd_pcm_substream *substream);\nint snd_sb8_playback_close(struct snd_pcm_substream *substream);\nint snd_sb8_capture_close(struct snd_pcm_substream *substream);\n \nirqreturn_t snd_sb8dsp_midi_interrupt(struct snd_sb *chip);\nint snd_sb8dsp_midi(struct snd_sb *chip, int device);\n\n \nint snd_sb16dsp_pcm(struct snd_sb *chip, int device);\nconst struct snd_pcm_ops *snd_sb16dsp_get_pcm_ops(int direction);\nint snd_sb16dsp_configure(struct snd_sb *chip);\n \nirqreturn_t snd_sb16dsp_interrupt(int irq, void *dev_id);\n\n \nenum {\n\tSB_MIX_SINGLE,\n\tSB_MIX_DOUBLE,\n\tSB_MIX_INPUT_SW,\n\tSB_MIX_CAPTURE_PRO,\n\tSB_MIX_CAPTURE_DT019X,\n\tSB_MIX_MONO_CAPTURE_ALS4K\n};\n\n#define SB_MIXVAL_DOUBLE(left_reg, right_reg, left_shift, right_shift, mask) \\\n  ((left_reg) | ((right_reg) << 8) | ((left_shift) << 16) | ((right_shift) << 19) | ((mask) << 24))\n#define SB_MIXVAL_SINGLE(reg, shift, mask) \\\n  ((reg) | ((shift) << 16) | ((mask) << 24))\n#define SB_MIXVAL_INPUT_SW(reg1, reg2, left_shift, right_shift) \\\n  ((reg1) | ((reg2) << 8) | ((left_shift) << 16) | ((right_shift) << 24))\n\nint snd_sbmixer_add_ctl(struct snd_sb *chip, const char *name, int index, int type, unsigned long value);\n\n \nstruct sbmix_elem {\n\tconst char *name;\n\tint type;\n\tunsigned long private_value;\n};\n\n#define SB_SINGLE(xname, reg, shift, mask) \\\n{ .name = xname, \\\n  .type = SB_MIX_SINGLE, \\\n  .private_value = SB_MIXVAL_SINGLE(reg, shift, mask) }\n\n#define SB_DOUBLE(xname, left_reg, right_reg, left_shift, right_shift, mask) \\\n{ .name = xname, \\\n  .type = SB_MIX_DOUBLE, \\\n  .private_value = SB_MIXVAL_DOUBLE(left_reg, right_reg, left_shift, right_shift, mask) }\n\n#define SB16_INPUT_SW(xname, reg1, reg2, left_shift, right_shift) \\\n{ .name = xname, \\\n  .type = SB_MIX_INPUT_SW, \\\n  .private_value = SB_MIXVAL_INPUT_SW(reg1, reg2, left_shift, right_shift) }\n\nstatic inline int snd_sbmixer_add_ctl_elem(struct snd_sb *chip, const struct sbmix_elem *c)\n{\n\treturn snd_sbmixer_add_ctl(chip, c->name, 0, c->type, c->private_value);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}