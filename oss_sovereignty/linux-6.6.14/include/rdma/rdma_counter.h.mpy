{
  "module_name": "rdma_counter.h",
  "hash_id": "ded6e83c4209e53a9dca65f6404de578bcbd0adb158c77a0e89f16429eab809b",
  "original_prompt": "Ingested from linux-6.6.14/include/rdma/rdma_counter.h",
  "human_readable_source": " \n \n\n#ifndef _RDMA_COUNTER_H_\n#define _RDMA_COUNTER_H_\n\n#include <linux/mutex.h>\n#include <linux/pid_namespace.h>\n\n#include <rdma/restrack.h>\n#include <rdma/rdma_netlink.h>\n\nstruct ib_device;\nstruct ib_qp;\n\nstruct auto_mode_param {\n\tint qp_type;\n};\n\nstruct rdma_counter_mode {\n\tenum rdma_nl_counter_mode mode;\n\tenum rdma_nl_counter_mask mask;\n\tstruct auto_mode_param param;\n};\n\nstruct rdma_port_counter {\n\tstruct rdma_counter_mode mode;\n\tstruct rdma_hw_stats *hstats;\n\tunsigned int num_counters;\n\tstruct mutex lock;\n};\n\nstruct rdma_counter {\n\tstruct rdma_restrack_entry\tres;\n\tstruct ib_device\t\t*device;\n\tuint32_t\t\t\tid;\n\tstruct kref\t\t\tkref;\n\tstruct rdma_counter_mode\tmode;\n\tstruct mutex\t\t\tlock;\n\tstruct rdma_hw_stats\t\t*stats;\n\tu32\t\t\t\tport;\n};\n\nvoid rdma_counter_init(struct ib_device *dev);\nvoid rdma_counter_release(struct ib_device *dev);\nint rdma_counter_set_auto_mode(struct ib_device *dev, u32 port,\n\t\t\t       enum rdma_nl_counter_mask mask,\n\t\t\t       struct netlink_ext_ack *extack);\nint rdma_counter_bind_qp_auto(struct ib_qp *qp, u32 port);\nint rdma_counter_unbind_qp(struct ib_qp *qp, bool force);\n\nint rdma_counter_query_stats(struct rdma_counter *counter);\nu64 rdma_counter_get_hwstat_value(struct ib_device *dev, u32 port, u32 index);\nint rdma_counter_bind_qpn(struct ib_device *dev, u32 port,\n\t\t\t  u32 qp_num, u32 counter_id);\nint rdma_counter_bind_qpn_alloc(struct ib_device *dev, u32 port,\n\t\t\t\tu32 qp_num, u32 *counter_id);\nint rdma_counter_unbind_qpn(struct ib_device *dev, u32 port,\n\t\t\t    u32 qp_num, u32 counter_id);\nint rdma_counter_get_mode(struct ib_device *dev, u32 port,\n\t\t\t  enum rdma_nl_counter_mode *mode,\n\t\t\t  enum rdma_nl_counter_mask *mask);\n\nint rdma_counter_modify(struct ib_device *dev, u32 port,\n\t\t\tunsigned int index, bool enable);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}