{
  "module_name": "ib_pack.h",
  "hash_id": "8f02992355b8e8ab89b88be066d7f895401a47857a8fe8fbbade8bfc133802f5",
  "original_prompt": "Ingested from linux-6.6.14/include/rdma/ib_pack.h",
  "human_readable_source": " \n \n\n#ifndef IB_PACK_H\n#define IB_PACK_H\n\n#include <rdma/ib_verbs.h>\n#include <uapi/linux/if_ether.h>\n\nenum {\n\tIB_LRH_BYTES\t\t= 8,\n\tIB_ETH_BYTES\t\t= 14,\n\tIB_VLAN_BYTES\t\t= 4,\n\tIB_GRH_BYTES\t\t= 40,\n\tIB_IP4_BYTES\t\t= 20,\n\tIB_UDP_BYTES\t\t= 8,\n\tIB_BTH_BYTES\t\t= 12,\n\tIB_DETH_BYTES\t\t= 8,\n\tIB_EXT_ATOMICETH_BYTES\t= 28,\n\tIB_EXT_XRC_BYTES\t= 4,\n\tIB_ICRC_BYTES\t\t= 4\n};\n\nstruct ib_field {\n\tsize_t struct_offset_bytes;\n\tsize_t struct_size_bytes;\n\tint    offset_words;\n\tint    offset_bits;\n\tint    size_bits;\n\tchar  *field_name;\n};\n\n#define RESERVED \\\n\t.field_name          = \"reserved\"\n\n \n#define IB_OPCODE(transport, op) \\\n\tIB_OPCODE_ ## transport ## _ ## op = \\\n\t\tIB_OPCODE_ ## transport + IB_OPCODE_ ## op\n\nenum {\n\t \n\tIB_OPCODE_RC                                = 0x00,\n\tIB_OPCODE_UC                                = 0x20,\n\tIB_OPCODE_RD                                = 0x40,\n\tIB_OPCODE_UD                                = 0x60,\n\t \n\tIB_OPCODE_CNP                               = 0x80,\n\t \n\tIB_OPCODE_MSP                               = 0xe0,\n\n\t \n\tIB_OPCODE_SEND_FIRST                        = 0x00,\n\tIB_OPCODE_SEND_MIDDLE                       = 0x01,\n\tIB_OPCODE_SEND_LAST                         = 0x02,\n\tIB_OPCODE_SEND_LAST_WITH_IMMEDIATE          = 0x03,\n\tIB_OPCODE_SEND_ONLY                         = 0x04,\n\tIB_OPCODE_SEND_ONLY_WITH_IMMEDIATE          = 0x05,\n\tIB_OPCODE_RDMA_WRITE_FIRST                  = 0x06,\n\tIB_OPCODE_RDMA_WRITE_MIDDLE                 = 0x07,\n\tIB_OPCODE_RDMA_WRITE_LAST                   = 0x08,\n\tIB_OPCODE_RDMA_WRITE_LAST_WITH_IMMEDIATE    = 0x09,\n\tIB_OPCODE_RDMA_WRITE_ONLY                   = 0x0a,\n\tIB_OPCODE_RDMA_WRITE_ONLY_WITH_IMMEDIATE    = 0x0b,\n\tIB_OPCODE_RDMA_READ_REQUEST                 = 0x0c,\n\tIB_OPCODE_RDMA_READ_RESPONSE_FIRST          = 0x0d,\n\tIB_OPCODE_RDMA_READ_RESPONSE_MIDDLE         = 0x0e,\n\tIB_OPCODE_RDMA_READ_RESPONSE_LAST           = 0x0f,\n\tIB_OPCODE_RDMA_READ_RESPONSE_ONLY           = 0x10,\n\tIB_OPCODE_ACKNOWLEDGE                       = 0x11,\n\tIB_OPCODE_ATOMIC_ACKNOWLEDGE                = 0x12,\n\tIB_OPCODE_COMPARE_SWAP                      = 0x13,\n\tIB_OPCODE_FETCH_ADD                         = 0x14,\n\t \n\tIB_OPCODE_SEND_LAST_WITH_INVALIDATE         = 0x16,\n\tIB_OPCODE_SEND_ONLY_WITH_INVALIDATE         = 0x17,\n\tIB_OPCODE_FLUSH                             = 0x1C,\n\tIB_OPCODE_ATOMIC_WRITE                      = 0x1D,\n\n\t \n\n\t \n\tIB_OPCODE(RC, SEND_FIRST),\n\tIB_OPCODE(RC, SEND_MIDDLE),\n\tIB_OPCODE(RC, SEND_LAST),\n\tIB_OPCODE(RC, SEND_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(RC, SEND_ONLY),\n\tIB_OPCODE(RC, SEND_ONLY_WITH_IMMEDIATE),\n\tIB_OPCODE(RC, RDMA_WRITE_FIRST),\n\tIB_OPCODE(RC, RDMA_WRITE_MIDDLE),\n\tIB_OPCODE(RC, RDMA_WRITE_LAST),\n\tIB_OPCODE(RC, RDMA_WRITE_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(RC, RDMA_WRITE_ONLY),\n\tIB_OPCODE(RC, RDMA_WRITE_ONLY_WITH_IMMEDIATE),\n\tIB_OPCODE(RC, RDMA_READ_REQUEST),\n\tIB_OPCODE(RC, RDMA_READ_RESPONSE_FIRST),\n\tIB_OPCODE(RC, RDMA_READ_RESPONSE_MIDDLE),\n\tIB_OPCODE(RC, RDMA_READ_RESPONSE_LAST),\n\tIB_OPCODE(RC, RDMA_READ_RESPONSE_ONLY),\n\tIB_OPCODE(RC, ACKNOWLEDGE),\n\tIB_OPCODE(RC, ATOMIC_ACKNOWLEDGE),\n\tIB_OPCODE(RC, COMPARE_SWAP),\n\tIB_OPCODE(RC, FETCH_ADD),\n\tIB_OPCODE(RC, SEND_LAST_WITH_INVALIDATE),\n\tIB_OPCODE(RC, SEND_ONLY_WITH_INVALIDATE),\n\tIB_OPCODE(RC, FLUSH),\n\tIB_OPCODE(RC, ATOMIC_WRITE),\n\n\t \n\tIB_OPCODE(UC, SEND_FIRST),\n\tIB_OPCODE(UC, SEND_MIDDLE),\n\tIB_OPCODE(UC, SEND_LAST),\n\tIB_OPCODE(UC, SEND_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(UC, SEND_ONLY),\n\tIB_OPCODE(UC, SEND_ONLY_WITH_IMMEDIATE),\n\tIB_OPCODE(UC, RDMA_WRITE_FIRST),\n\tIB_OPCODE(UC, RDMA_WRITE_MIDDLE),\n\tIB_OPCODE(UC, RDMA_WRITE_LAST),\n\tIB_OPCODE(UC, RDMA_WRITE_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(UC, RDMA_WRITE_ONLY),\n\tIB_OPCODE(UC, RDMA_WRITE_ONLY_WITH_IMMEDIATE),\n\n\t \n\tIB_OPCODE(RD, SEND_FIRST),\n\tIB_OPCODE(RD, SEND_MIDDLE),\n\tIB_OPCODE(RD, SEND_LAST),\n\tIB_OPCODE(RD, SEND_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(RD, SEND_ONLY),\n\tIB_OPCODE(RD, SEND_ONLY_WITH_IMMEDIATE),\n\tIB_OPCODE(RD, RDMA_WRITE_FIRST),\n\tIB_OPCODE(RD, RDMA_WRITE_MIDDLE),\n\tIB_OPCODE(RD, RDMA_WRITE_LAST),\n\tIB_OPCODE(RD, RDMA_WRITE_LAST_WITH_IMMEDIATE),\n\tIB_OPCODE(RD, RDMA_WRITE_ONLY),\n\tIB_OPCODE(RD, RDMA_WRITE_ONLY_WITH_IMMEDIATE),\n\tIB_OPCODE(RD, RDMA_READ_REQUEST),\n\tIB_OPCODE(RD, RDMA_READ_RESPONSE_FIRST),\n\tIB_OPCODE(RD, RDMA_READ_RESPONSE_MIDDLE),\n\tIB_OPCODE(RD, RDMA_READ_RESPONSE_LAST),\n\tIB_OPCODE(RD, RDMA_READ_RESPONSE_ONLY),\n\tIB_OPCODE(RD, ACKNOWLEDGE),\n\tIB_OPCODE(RD, ATOMIC_ACKNOWLEDGE),\n\tIB_OPCODE(RD, COMPARE_SWAP),\n\tIB_OPCODE(RD, FETCH_ADD),\n\tIB_OPCODE(RD, FLUSH),\n\n\t \n\tIB_OPCODE(UD, SEND_ONLY),\n\tIB_OPCODE(UD, SEND_ONLY_WITH_IMMEDIATE)\n};\n\nenum {\n\tIB_LNH_RAW        = 0,\n\tIB_LNH_IP         = 1,\n\tIB_LNH_IBA_LOCAL  = 2,\n\tIB_LNH_IBA_GLOBAL = 3\n};\n\nstruct ib_unpacked_lrh {\n\tu8        virtual_lane;\n\tu8        link_version;\n\tu8        service_level;\n\tu8        link_next_header;\n\t__be16    destination_lid;\n\t__be16    packet_length;\n\t__be16    source_lid;\n};\n\nstruct ib_unpacked_grh {\n\tu8    \t     ip_version;\n\tu8    \t     traffic_class;\n\t__be32 \t     flow_label;\n\t__be16       payload_length;\n\tu8    \t     next_header;\n\tu8    \t     hop_limit;\n\tunion ib_gid source_gid;\n\tunion ib_gid destination_gid;\n};\n\nstruct ib_unpacked_bth {\n\tu8           opcode;\n\tu8           solicited_event;\n\tu8           mig_req;\n\tu8           pad_count;\n\tu8           transport_header_version;\n\t__be16       pkey;\n\t__be32       destination_qpn;\n\tu8           ack_req;\n\t__be32       psn;\n};\n\nstruct ib_unpacked_deth {\n\t__be32       qkey;\n\t__be32       source_qpn;\n};\n\nstruct ib_unpacked_eth {\n\tu8\tdmac_h[4];\n\tu8\tdmac_l[2];\n\tu8\tsmac_h[2];\n\tu8\tsmac_l[4];\n\t__be16\ttype;\n};\n\nstruct ib_unpacked_ip4 {\n\tu8\tver;\n\tu8\thdr_len;\n\tu8\ttos;\n\t__be16\ttot_len;\n\t__be16\tid;\n\t__be16\tfrag_off;\n\tu8\tttl;\n\tu8\tprotocol;\n\t__sum16\tcheck;\n\t__be32\tsaddr;\n\t__be32\tdaddr;\n};\n\nstruct ib_unpacked_udp {\n\t__be16\tsport;\n\t__be16\tdport;\n\t__be16\tlength;\n\t__be16\tcsum;\n};\n\nstruct ib_unpacked_vlan {\n\t__be16  tag;\n\t__be16  type;\n};\n\nstruct ib_ud_header {\n\tint                     lrh_present;\n\tstruct ib_unpacked_lrh  lrh;\n\tint\t\t\teth_present;\n\tstruct ib_unpacked_eth\teth;\n\tint                     vlan_present;\n\tstruct ib_unpacked_vlan vlan;\n\tint\t\t\tgrh_present;\n\tstruct ib_unpacked_grh\tgrh;\n\tint\t\t\tipv4_present;\n\tstruct ib_unpacked_ip4\tip4;\n\tint\t\t\tudp_present;\n\tstruct ib_unpacked_udp\tudp;\n\tstruct ib_unpacked_bth\tbth;\n\tstruct ib_unpacked_deth deth;\n\tint\t\t\timmediate_present;\n\t__be32\t\t\timmediate_data;\n};\n\nvoid ib_pack(const struct ib_field        *desc,\n\t     int                           desc_len,\n\t     void                         *structure,\n\t     void                         *buf);\n\nvoid ib_unpack(const struct ib_field        *desc,\n\t       int                           desc_len,\n\t       void                         *buf,\n\t       void                         *structure);\n\n__sum16 ib_ud_ip4_csum(struct ib_ud_header *header);\n\nint ib_ud_header_init(int\t\t    payload_bytes,\n\t\t      int\t\t    lrh_present,\n\t\t      int\t\t    eth_present,\n\t\t      int\t\t    vlan_present,\n\t\t      int\t\t    grh_present,\n\t\t      int\t\t    ip_version,\n\t\t      int\t\t    udp_present,\n\t\t      int\t\t    immediate_present,\n\t\t      struct ib_ud_header *header);\n\nint ib_ud_header_pack(struct ib_ud_header *header,\n\t\t      void                *buf);\n\nint ib_ud_header_unpack(void                *buf,\n\t\t\tstruct ib_ud_header *header);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}