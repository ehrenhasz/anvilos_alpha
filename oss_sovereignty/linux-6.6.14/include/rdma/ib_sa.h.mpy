{
  "module_name": "ib_sa.h",
  "hash_id": "ce3b683dcfbff93a4feeaf5a3cee545e8967761e7b032e2e2d11e76105aa9c6d",
  "original_prompt": "Ingested from linux-6.6.14/include/rdma/ib_sa.h",
  "human_readable_source": " \n \n\n#ifndef IB_SA_H\n#define IB_SA_H\n\n#include <linux/completion.h>\n#include <linux/compiler.h>\n\n#include <linux/atomic.h>\n#include <linux/netdevice.h>\n\n#include <rdma/ib_verbs.h>\n#include <rdma/ib_mad.h>\n#include <rdma/ib_addr.h>\n#include <rdma/opa_addr.h>\n\nenum {\n\tIB_SA_CLASS_VERSION\t\t= 2,\t \n\n\tIB_SA_METHOD_GET_TABLE\t\t= 0x12,\n\tIB_SA_METHOD_GET_TABLE_RESP\t= 0x92,\n\tIB_SA_METHOD_DELETE\t\t= 0x15,\n\tIB_SA_METHOD_DELETE_RESP\t= 0x95,\n\tIB_SA_METHOD_GET_MULTI\t\t= 0x14,\n\tIB_SA_METHOD_GET_MULTI_RESP\t= 0x94,\n\tIB_SA_METHOD_GET_TRACE_TBL\t= 0x13\n};\n\n#define OPA_SA_CLASS_VERSION\t0x80\nenum {\n\tIB_SA_ATTR_CLASS_PORTINFO    = 0x01,\n\tIB_SA_ATTR_NOTICE\t     = 0x02,\n\tIB_SA_ATTR_INFORM_INFO\t     = 0x03,\n\tIB_SA_ATTR_NODE_REC\t     = 0x11,\n\tIB_SA_ATTR_PORT_INFO_REC     = 0x12,\n\tIB_SA_ATTR_SL2VL_REC\t     = 0x13,\n\tIB_SA_ATTR_SWITCH_REC\t     = 0x14,\n\tIB_SA_ATTR_LINEAR_FDB_REC    = 0x15,\n\tIB_SA_ATTR_RANDOM_FDB_REC    = 0x16,\n\tIB_SA_ATTR_MCAST_FDB_REC     = 0x17,\n\tIB_SA_ATTR_SM_INFO_REC\t     = 0x18,\n\tIB_SA_ATTR_LINK_REC\t     = 0x20,\n\tIB_SA_ATTR_GUID_INFO_REC     = 0x30,\n\tIB_SA_ATTR_SERVICE_REC\t     = 0x31,\n\tIB_SA_ATTR_PARTITION_REC     = 0x33,\n\tIB_SA_ATTR_PATH_REC\t     = 0x35,\n\tIB_SA_ATTR_VL_ARB_REC\t     = 0x36,\n\tIB_SA_ATTR_MC_MEMBER_REC     = 0x38,\n\tIB_SA_ATTR_TRACE_REC\t     = 0x39,\n\tIB_SA_ATTR_MULTI_PATH_REC    = 0x3a,\n\tIB_SA_ATTR_SERVICE_ASSOC_REC = 0x3b,\n\tIB_SA_ATTR_INFORM_INFO_REC   = 0xf3\n};\n\nenum ib_sa_selector {\n\tIB_SA_GT   = 0,\n\tIB_SA_LT   = 1,\n\tIB_SA_EQ   = 2,\n\t \n\tIB_SA_BEST = 3\n};\n\n \nenum ib_sa_mc_join_states {\n\tFULLMEMBER_JOIN,\n\tNONMEMBER_JOIN,\n\tSENDONLY_NONMEBER_JOIN,\n\tSENDONLY_FULLMEMBER_JOIN,\n\tNUM_JOIN_MEMBERSHIP_TYPES,\n};\n\n#define IB_SA_CAP_MASK2_SENDONLY_FULL_MEM_SUPPORT\tBIT(12)\n\n \n\n#define IB_SA_PATH_REC_SERVICE_ID\t\t       (IB_SA_COMP_MASK( 0) |\\\n\t\t\t\t\t\t\tIB_SA_COMP_MASK( 1))\n#define IB_SA_PATH_REC_DGID\t\t\t\tIB_SA_COMP_MASK( 2)\n#define IB_SA_PATH_REC_SGID\t\t\t\tIB_SA_COMP_MASK( 3)\n#define IB_SA_PATH_REC_DLID\t\t\t\tIB_SA_COMP_MASK( 4)\n#define IB_SA_PATH_REC_SLID\t\t\t\tIB_SA_COMP_MASK( 5)\n#define IB_SA_PATH_REC_RAW_TRAFFIC\t\t\tIB_SA_COMP_MASK( 6)\n \n#define IB_SA_PATH_REC_FLOW_LABEL       \t\tIB_SA_COMP_MASK( 8)\n#define IB_SA_PATH_REC_HOP_LIMIT\t\t\tIB_SA_COMP_MASK( 9)\n#define IB_SA_PATH_REC_TRAFFIC_CLASS\t\t\tIB_SA_COMP_MASK(10)\n#define IB_SA_PATH_REC_REVERSIBLE\t\t\tIB_SA_COMP_MASK(11)\n#define IB_SA_PATH_REC_NUMB_PATH\t\t\tIB_SA_COMP_MASK(12)\n#define IB_SA_PATH_REC_PKEY\t\t\t\tIB_SA_COMP_MASK(13)\n#define IB_SA_PATH_REC_QOS_CLASS\t\t\tIB_SA_COMP_MASK(14)\n#define IB_SA_PATH_REC_SL\t\t\t\tIB_SA_COMP_MASK(15)\n#define IB_SA_PATH_REC_MTU_SELECTOR\t\t\tIB_SA_COMP_MASK(16)\n#define IB_SA_PATH_REC_MTU\t\t\t\tIB_SA_COMP_MASK(17)\n#define IB_SA_PATH_REC_RATE_SELECTOR\t\t\tIB_SA_COMP_MASK(18)\n#define IB_SA_PATH_REC_RATE\t\t\t\tIB_SA_COMP_MASK(19)\n#define IB_SA_PATH_REC_PACKET_LIFE_TIME_SELECTOR\tIB_SA_COMP_MASK(20)\n#define IB_SA_PATH_REC_PACKET_LIFE_TIME\t\t\tIB_SA_COMP_MASK(21)\n#define IB_SA_PATH_REC_PREFERENCE\t\t\tIB_SA_COMP_MASK(22)\n\nenum sa_path_rec_type {\n\tSA_PATH_REC_TYPE_IB,\n\tSA_PATH_REC_TYPE_ROCE_V1,\n\tSA_PATH_REC_TYPE_ROCE_V2,\n\tSA_PATH_REC_TYPE_OPA\n};\n\nstruct sa_path_rec_ib {\n\t__be16       dlid;\n\t__be16       slid;\n\tu8           raw_traffic;\n};\n\n \nstruct sa_path_rec_roce {\n\tbool\troute_resolved;\n\tu8\tdmac[ETH_ALEN];\n};\n\nstruct sa_path_rec_opa {\n\t__be32       dlid;\n\t__be32       slid;\n\tu8           raw_traffic;\n\tu8\t     l2_8B;\n\tu8\t     l2_10B;\n\tu8\t     l2_9B;\n\tu8\t     l2_16B;\n\tu8\t     qos_type;\n\tu8\t     qos_priority;\n};\n\nstruct sa_path_rec {\n\tunion ib_gid dgid;\n\tunion ib_gid sgid;\n\t__be64       service_id;\n\t \n\t__be32       flow_label;\n\tu8           hop_limit;\n\tu8           traffic_class;\n\tu8           reversible;\n\tu8           numb_path;\n\t__be16       pkey;\n\t__be16       qos_class;\n\tu8           sl;\n\tu8           mtu_selector;\n\tu8           mtu;\n\tu8           rate_selector;\n\tu8           rate;\n\tu8           packet_life_time_selector;\n\tu8           packet_life_time;\n\tu8           preference;\n\tunion {\n\t\tstruct sa_path_rec_ib ib;\n\t\tstruct sa_path_rec_roce roce;\n\t\tstruct sa_path_rec_opa opa;\n\t};\n\tenum sa_path_rec_type rec_type;\n\tu32 flags;\n};\n\nstatic inline enum ib_gid_type\n\t\tsa_conv_pathrec_to_gid_type(struct sa_path_rec *rec)\n{\n\tswitch (rec->rec_type) {\n\tcase SA_PATH_REC_TYPE_ROCE_V1:\n\t\treturn IB_GID_TYPE_ROCE;\n\tcase SA_PATH_REC_TYPE_ROCE_V2:\n\t\treturn IB_GID_TYPE_ROCE_UDP_ENCAP;\n\tdefault:\n\t\treturn IB_GID_TYPE_IB;\n\t}\n}\n\nstatic inline enum sa_path_rec_type\n\t\tsa_conv_gid_to_pathrec_type(enum ib_gid_type type)\n{\n\tswitch (type) {\n\tcase IB_GID_TYPE_ROCE:\n\t\treturn SA_PATH_REC_TYPE_ROCE_V1;\n\tcase IB_GID_TYPE_ROCE_UDP_ENCAP:\n\t\treturn SA_PATH_REC_TYPE_ROCE_V2;\n\tdefault:\n\t\treturn SA_PATH_REC_TYPE_IB;\n\t}\n}\n\nstatic inline void path_conv_opa_to_ib(struct sa_path_rec *ib,\n\t\t\t\t       struct sa_path_rec *opa)\n{\n\tif ((be32_to_cpu(opa->opa.dlid) >=\n\t     be16_to_cpu(IB_MULTICAST_LID_BASE)) ||\n\t    (be32_to_cpu(opa->opa.slid) >=\n\t     be16_to_cpu(IB_MULTICAST_LID_BASE))) {\n\t\t \n\t\tib->dgid.global.interface_id\n\t\t\t\t= OPA_MAKE_ID(be32_to_cpu(opa->opa.dlid));\n\t\tib->dgid.global.subnet_prefix\n\t\t\t\t= opa->dgid.global.subnet_prefix;\n\t\tib->sgid.global.interface_id\n\t\t\t\t= OPA_MAKE_ID(be32_to_cpu(opa->opa.slid));\n\t\tib->dgid.global.subnet_prefix\n\t\t\t\t= opa->dgid.global.subnet_prefix;\n\t\tib->ib.dlid\t= 0;\n\n\t\tib->ib.slid\t= 0;\n\t} else {\n\t\tib->ib.dlid\t= htons(ntohl(opa->opa.dlid));\n\t\tib->ib.slid\t= htons(ntohl(opa->opa.slid));\n\t}\n\tib->service_id\t\t= opa->service_id;\n\tib->ib.raw_traffic\t= opa->opa.raw_traffic;\n}\n\nstatic inline void path_conv_ib_to_opa(struct sa_path_rec *opa,\n\t\t\t\t       struct sa_path_rec *ib)\n{\n\t__be32 slid, dlid;\n\n\tif ((ib_is_opa_gid(&ib->sgid)) ||\n\t    (ib_is_opa_gid(&ib->dgid))) {\n\t\tslid = htonl(opa_get_lid_from_gid(&ib->sgid));\n\t\tdlid = htonl(opa_get_lid_from_gid(&ib->dgid));\n\t} else {\n\t\tslid = htonl(ntohs(ib->ib.slid));\n\t\tdlid = htonl(ntohs(ib->ib.dlid));\n\t}\n\topa->opa.slid\t\t= slid;\n\topa->opa.dlid\t\t= dlid;\n\topa->service_id\t\t= ib->service_id;\n\topa->opa.raw_traffic\t= ib->ib.raw_traffic;\n}\n\n \nstatic inline void sa_convert_path_opa_to_ib(struct sa_path_rec *dest,\n\t\t\t\t\t     struct sa_path_rec *src)\n{\n\tif (src->rec_type != SA_PATH_REC_TYPE_OPA)\n\t\treturn;\n\n\t*dest = *src;\n\tdest->rec_type = SA_PATH_REC_TYPE_IB;\n\tpath_conv_opa_to_ib(dest, src);\n}\n\n \nstatic inline void sa_convert_path_ib_to_opa(struct sa_path_rec *dest,\n\t\t\t\t\t     struct sa_path_rec *src)\n{\n\tif (src->rec_type != SA_PATH_REC_TYPE_IB)\n\t\treturn;\n\n\t \n\t*dest = *src;\n\tdest->rec_type = SA_PATH_REC_TYPE_OPA;\n\tpath_conv_ib_to_opa(dest, src);\n}\n\n#define IB_SA_MCMEMBER_REC_MGID\t\t\t\tIB_SA_COMP_MASK( 0)\n#define IB_SA_MCMEMBER_REC_PORT_GID\t\t\tIB_SA_COMP_MASK( 1)\n#define IB_SA_MCMEMBER_REC_QKEY\t\t\t\tIB_SA_COMP_MASK( 2)\n#define IB_SA_MCMEMBER_REC_MLID\t\t\t\tIB_SA_COMP_MASK( 3)\n#define IB_SA_MCMEMBER_REC_MTU_SELECTOR\t\t\tIB_SA_COMP_MASK( 4)\n#define IB_SA_MCMEMBER_REC_MTU\t\t\t\tIB_SA_COMP_MASK( 5)\n#define IB_SA_MCMEMBER_REC_TRAFFIC_CLASS\t\tIB_SA_COMP_MASK( 6)\n#define IB_SA_MCMEMBER_REC_PKEY\t\t\t\tIB_SA_COMP_MASK( 7)\n#define IB_SA_MCMEMBER_REC_RATE_SELECTOR\t\tIB_SA_COMP_MASK( 8)\n#define IB_SA_MCMEMBER_REC_RATE\t\t\t\tIB_SA_COMP_MASK( 9)\n#define IB_SA_MCMEMBER_REC_PACKET_LIFE_TIME_SELECTOR\tIB_SA_COMP_MASK(10)\n#define IB_SA_MCMEMBER_REC_PACKET_LIFE_TIME\t\tIB_SA_COMP_MASK(11)\n#define IB_SA_MCMEMBER_REC_SL\t\t\t\tIB_SA_COMP_MASK(12)\n#define IB_SA_MCMEMBER_REC_FLOW_LABEL\t\t\tIB_SA_COMP_MASK(13)\n#define IB_SA_MCMEMBER_REC_HOP_LIMIT\t\t\tIB_SA_COMP_MASK(14)\n#define IB_SA_MCMEMBER_REC_SCOPE\t\t\tIB_SA_COMP_MASK(15)\n#define IB_SA_MCMEMBER_REC_JOIN_STATE\t\t\tIB_SA_COMP_MASK(16)\n#define IB_SA_MCMEMBER_REC_PROXY_JOIN\t\t\tIB_SA_COMP_MASK(17)\n\nstruct ib_sa_mcmember_rec {\n\tunion ib_gid mgid;\n\tunion ib_gid port_gid;\n\t__be32       qkey;\n\t__be16       mlid;\n\tu8           mtu_selector;\n\tu8           mtu;\n\tu8           traffic_class;\n\t__be16       pkey;\n\tu8 \t     rate_selector;\n\tu8 \t     rate;\n\tu8 \t     packet_life_time_selector;\n\tu8 \t     packet_life_time;\n\tu8           sl;\n\t__be32       flow_label;\n\tu8           hop_limit;\n\tu8           scope;\n\tu8           join_state;\n\tu8           proxy_join;\n};\n\n \n#define IB_SA_SERVICE_REC_SERVICE_ID\t\t\tIB_SA_COMP_MASK( 0)\n#define IB_SA_SERVICE_REC_SERVICE_GID\t\t\tIB_SA_COMP_MASK( 1)\n#define IB_SA_SERVICE_REC_SERVICE_PKEY\t\t\tIB_SA_COMP_MASK( 2)\n \n#define IB_SA_SERVICE_REC_SERVICE_LEASE\t\t\tIB_SA_COMP_MASK( 4)\n#define IB_SA_SERVICE_REC_SERVICE_KEY\t\t\tIB_SA_COMP_MASK( 5)\n#define IB_SA_SERVICE_REC_SERVICE_NAME\t\t\tIB_SA_COMP_MASK( 6)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_0\t\tIB_SA_COMP_MASK( 7)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_1\t\tIB_SA_COMP_MASK( 8)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_2\t\tIB_SA_COMP_MASK( 9)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_3\t\tIB_SA_COMP_MASK(10)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_4\t\tIB_SA_COMP_MASK(11)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_5\t\tIB_SA_COMP_MASK(12)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_6\t\tIB_SA_COMP_MASK(13)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_7\t\tIB_SA_COMP_MASK(14)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_8\t\tIB_SA_COMP_MASK(15)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_9\t\tIB_SA_COMP_MASK(16)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_10\t\tIB_SA_COMP_MASK(17)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_11\t\tIB_SA_COMP_MASK(18)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_12\t\tIB_SA_COMP_MASK(19)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_13\t\tIB_SA_COMP_MASK(20)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_14\t\tIB_SA_COMP_MASK(21)\n#define IB_SA_SERVICE_REC_SERVICE_DATA8_15\t\tIB_SA_COMP_MASK(22)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_0\t\tIB_SA_COMP_MASK(23)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_1\t\tIB_SA_COMP_MASK(24)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_2\t\tIB_SA_COMP_MASK(25)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_3\t\tIB_SA_COMP_MASK(26)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_4\t\tIB_SA_COMP_MASK(27)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_5\t\tIB_SA_COMP_MASK(28)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_6\t\tIB_SA_COMP_MASK(29)\n#define IB_SA_SERVICE_REC_SERVICE_DATA16_7\t\tIB_SA_COMP_MASK(30)\n#define IB_SA_SERVICE_REC_SERVICE_DATA32_0\t\tIB_SA_COMP_MASK(31)\n#define IB_SA_SERVICE_REC_SERVICE_DATA32_1\t\tIB_SA_COMP_MASK(32)\n#define IB_SA_SERVICE_REC_SERVICE_DATA32_2\t\tIB_SA_COMP_MASK(33)\n#define IB_SA_SERVICE_REC_SERVICE_DATA32_3\t\tIB_SA_COMP_MASK(34)\n#define IB_SA_SERVICE_REC_SERVICE_DATA64_0\t\tIB_SA_COMP_MASK(35)\n#define IB_SA_SERVICE_REC_SERVICE_DATA64_1\t\tIB_SA_COMP_MASK(36)\n\n#define IB_DEFAULT_SERVICE_LEASE \t0xFFFFFFFF\n\n#define IB_SA_GUIDINFO_REC_LID\t\tIB_SA_COMP_MASK(0)\n#define IB_SA_GUIDINFO_REC_BLOCK_NUM\tIB_SA_COMP_MASK(1)\n#define IB_SA_GUIDINFO_REC_RES1\t\tIB_SA_COMP_MASK(2)\n#define IB_SA_GUIDINFO_REC_RES2\t\tIB_SA_COMP_MASK(3)\n#define IB_SA_GUIDINFO_REC_GID0\t\tIB_SA_COMP_MASK(4)\n#define IB_SA_GUIDINFO_REC_GID1\t\tIB_SA_COMP_MASK(5)\n#define IB_SA_GUIDINFO_REC_GID2\t\tIB_SA_COMP_MASK(6)\n#define IB_SA_GUIDINFO_REC_GID3\t\tIB_SA_COMP_MASK(7)\n#define IB_SA_GUIDINFO_REC_GID4\t\tIB_SA_COMP_MASK(8)\n#define IB_SA_GUIDINFO_REC_GID5\t\tIB_SA_COMP_MASK(9)\n#define IB_SA_GUIDINFO_REC_GID6\t\tIB_SA_COMP_MASK(10)\n#define IB_SA_GUIDINFO_REC_GID7\t\tIB_SA_COMP_MASK(11)\n\nstruct ib_sa_guidinfo_rec {\n\t__be16\tlid;\n\tu8\tblock_num;\n\t \n\tu8\tres1;\n\t__be32\tres2;\n\tu8\tguid_info_list[64];\n};\n\nstruct ib_sa_client {\n\tatomic_t users;\n\tstruct completion comp;\n};\n\n \nvoid ib_sa_register_client(struct ib_sa_client *client);\n\n \nvoid ib_sa_unregister_client(struct ib_sa_client *client);\n\nstruct ib_sa_query;\n\nvoid ib_sa_cancel_query(int id, struct ib_sa_query *query);\n\nint ib_sa_path_rec_get(struct ib_sa_client *client, struct ib_device *device,\n\t\t       u32 port_num, struct sa_path_rec *rec,\n\t\t       ib_sa_comp_mask comp_mask, unsigned long timeout_ms,\n\t\t       gfp_t gfp_mask,\n\t\t       void (*callback)(int status, struct sa_path_rec *resp,\n\t\t\t\t\tunsigned int num_prs, void *context),\n\t\t       void *context, struct ib_sa_query **query);\n\nstruct ib_sa_multicast {\n\tstruct ib_sa_mcmember_rec rec;\n\tib_sa_comp_mask\t\tcomp_mask;\n\tint\t\t\t(*callback)(int status,\n\t\t\t\t\t    struct ib_sa_multicast *multicast);\n\tvoid\t\t\t*context;\n};\n\n \nstruct ib_sa_multicast *ib_sa_join_multicast(struct ib_sa_client *client,\n\t\t\t\t\t     struct ib_device *device,\n\t\t\t\t\t     u32 port_num,\n\t\t\t\t\t     struct ib_sa_mcmember_rec *rec,\n\t\t\t\t\t     ib_sa_comp_mask comp_mask, gfp_t gfp_mask,\n\t\t\t\t\t     int (*callback)(int status,\n\t\t\t\t\t\t\t     struct ib_sa_multicast\n\t\t\t\t\t\t\t\t    *multicast),\n\t\t\t\t\t     void *context);\n\n \nvoid ib_sa_free_multicast(struct ib_sa_multicast *multicast);\n\n \nint ib_sa_get_mcmember_rec(struct ib_device *device, u32 port_num,\n\t\t\t   union ib_gid *mgid, struct ib_sa_mcmember_rec *rec);\n\n \nint ib_init_ah_from_mcmember(struct ib_device *device, u32 port_num,\n\t\t\t     struct ib_sa_mcmember_rec *rec,\n\t\t\t     struct net_device *ndev,\n\t\t\t     enum ib_gid_type gid_type,\n\t\t\t     struct rdma_ah_attr *ah_attr);\n\nint ib_init_ah_attr_from_path(struct ib_device *device, u32 port_num,\n\t\t\t      struct sa_path_rec *rec,\n\t\t\t      struct rdma_ah_attr *ah_attr,\n\t\t\t      const struct ib_gid_attr *sgid_attr);\n\n \nvoid ib_sa_pack_path(struct sa_path_rec *rec, void *attribute);\n\n \nvoid ib_sa_unpack_path(void *attribute, struct sa_path_rec *rec);\n\n \nint ib_sa_guid_info_rec_query(struct ib_sa_client *client,\n\t\t\t      struct ib_device *device, u32 port_num,\n\t\t\t      struct ib_sa_guidinfo_rec *rec,\n\t\t\t      ib_sa_comp_mask comp_mask, u8 method,\n\t\t\t      unsigned long timeout_ms, gfp_t gfp_mask,\n\t\t\t      void (*callback)(int status,\n\t\t\t\t\t       struct ib_sa_guidinfo_rec *resp,\n\t\t\t\t\t       void *context),\n\t\t\t      void *context, struct ib_sa_query **sa_query);\n\nstatic inline bool sa_path_is_roce(struct sa_path_rec *rec)\n{\n\treturn ((rec->rec_type == SA_PATH_REC_TYPE_ROCE_V1) ||\n\t\t(rec->rec_type == SA_PATH_REC_TYPE_ROCE_V2));\n}\n\nstatic inline bool sa_path_is_opa(struct sa_path_rec *rec)\n{\n\treturn (rec->rec_type == SA_PATH_REC_TYPE_OPA);\n}\n\nstatic inline void sa_path_set_slid(struct sa_path_rec *rec, u32 slid)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\trec->ib.slid = cpu_to_be16(slid);\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\trec->opa.slid = cpu_to_be32(slid);\n}\n\nstatic inline void sa_path_set_dlid(struct sa_path_rec *rec, u32 dlid)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\trec->ib.dlid = cpu_to_be16(dlid);\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\trec->opa.dlid = cpu_to_be32(dlid);\n}\n\nstatic inline void sa_path_set_raw_traffic(struct sa_path_rec *rec,\n\t\t\t\t\t   u8 raw_traffic)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\trec->ib.raw_traffic = raw_traffic;\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\trec->opa.raw_traffic = raw_traffic;\n}\n\nstatic inline __be32 sa_path_get_slid(struct sa_path_rec *rec)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\treturn htonl(ntohs(rec->ib.slid));\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\treturn rec->opa.slid;\n\treturn 0;\n}\n\nstatic inline __be32 sa_path_get_dlid(struct sa_path_rec *rec)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\treturn htonl(ntohs(rec->ib.dlid));\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\treturn rec->opa.dlid;\n\treturn 0;\n}\n\nstatic inline u8 sa_path_get_raw_traffic(struct sa_path_rec *rec)\n{\n\tif (rec->rec_type == SA_PATH_REC_TYPE_IB)\n\t\treturn rec->ib.raw_traffic;\n\telse if (rec->rec_type == SA_PATH_REC_TYPE_OPA)\n\t\treturn rec->opa.raw_traffic;\n\treturn 0;\n}\n\nstatic inline void sa_path_set_dmac(struct sa_path_rec *rec, u8 *dmac)\n{\n\tif (sa_path_is_roce(rec))\n\t\tmemcpy(rec->roce.dmac, dmac, ETH_ALEN);\n}\n\nstatic inline void sa_path_set_dmac_zero(struct sa_path_rec *rec)\n{\n\tif (sa_path_is_roce(rec))\n\t\teth_zero_addr(rec->roce.dmac);\n}\n\nstatic inline u8 *sa_path_get_dmac(struct sa_path_rec *rec)\n{\n\tif (sa_path_is_roce(rec))\n\t\treturn rec->roce.dmac;\n\treturn NULL;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}