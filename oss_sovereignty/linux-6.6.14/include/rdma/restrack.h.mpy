{
  "module_name": "restrack.h",
  "hash_id": "d8e310c06ad8683de8d470fb612ad43f5ad69dd03f9ff7c41a7d2e8a2b576b82",
  "original_prompt": "Ingested from linux-6.6.14/include/rdma/restrack.h",
  "human_readable_source": " \n \n\n#ifndef _RDMA_RESTRACK_H_\n#define _RDMA_RESTRACK_H_\n\n#include <linux/typecheck.h>\n#include <linux/sched.h>\n#include <linux/kref.h>\n#include <linux/completion.h>\n#include <linux/sched/task.h>\n#include <uapi/rdma/rdma_netlink.h>\n#include <linux/xarray.h>\n\nstruct ib_device;\nstruct sk_buff;\n\n \nenum rdma_restrack_type {\n\t \n\tRDMA_RESTRACK_PD,\n\t \n\tRDMA_RESTRACK_CQ,\n\t \n\tRDMA_RESTRACK_QP,\n\t \n\tRDMA_RESTRACK_CM_ID,\n\t \n\tRDMA_RESTRACK_MR,\n\t \n\tRDMA_RESTRACK_CTX,\n\t \n\tRDMA_RESTRACK_COUNTER,\n\t \n\tRDMA_RESTRACK_SRQ,\n\t \n\tRDMA_RESTRACK_MAX\n};\n\n \nstruct rdma_restrack_entry {\n\t \n\tbool\t\t\tvalid;\n\t \n\tu8\t\t\tno_track : 1;\n\t \n\tstruct kref\t\tkref;\n\t \n\tstruct completion\tcomp;\n\t \n\tstruct task_struct\t*task;\n\t \n\tconst char\t\t*kern_name;\n\t \n\tenum rdma_restrack_type\ttype;\n\t \n\tbool\t\t\tuser;\n\t \n\tu32 id;\n};\n\nint rdma_restrack_count(struct ib_device *dev,\n\t\t\tenum rdma_restrack_type type);\n \nstatic inline bool rdma_is_kernel_res(const struct rdma_restrack_entry *res)\n{\n\treturn !res->user;\n}\n\n \nint __must_check rdma_restrack_get(struct rdma_restrack_entry *res);\n\n \nint rdma_restrack_put(struct rdma_restrack_entry *res);\n\n \nint rdma_nl_put_driver_u32(struct sk_buff *msg, const char *name, u32 value);\nint rdma_nl_put_driver_u32_hex(struct sk_buff *msg, const char *name,\n\t\t\t       u32 value);\nint rdma_nl_put_driver_u64(struct sk_buff *msg, const char *name, u64 value);\nint rdma_nl_put_driver_u64_hex(struct sk_buff *msg, const char *name,\n\t\t\t       u64 value);\nint rdma_nl_put_driver_string(struct sk_buff *msg, const char *name,\n\t\t\t      const char *str);\nint rdma_nl_stat_hwcounter_entry(struct sk_buff *msg, const char *name,\n\t\t\t\t u64 value);\n\nstruct rdma_restrack_entry *rdma_restrack_get_byid(struct ib_device *dev,\n\t\t\t\t\t\t   enum rdma_restrack_type type,\n\t\t\t\t\t\t   u32 id);\n\n \nstatic inline void rdma_restrack_no_track(struct rdma_restrack_entry *res)\n{\n\tres->no_track = true;\n}\nstatic inline bool rdma_restrack_is_tracked(struct rdma_restrack_entry *res)\n{\n\treturn !res->no_track;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}