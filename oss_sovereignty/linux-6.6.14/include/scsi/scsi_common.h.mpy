{
  "module_name": "scsi_common.h",
  "hash_id": "5ac75a35125540947eccbbd2dfd704552266ab2c0b1aa9e5df1db25fa54fdecd",
  "original_prompt": "Ingested from linux-6.6.14/include/scsi/scsi_common.h",
  "human_readable_source": " \n \n\n#ifndef _SCSI_COMMON_H_\n#define _SCSI_COMMON_H_\n\n#include <linux/types.h>\n#include <uapi/linux/pr.h>\n#include <scsi/scsi_proto.h>\n\nenum scsi_pr_type {\n\tSCSI_PR_WRITE_EXCLUSIVE\t\t\t= 0x01,\n\tSCSI_PR_EXCLUSIVE_ACCESS\t\t= 0x03,\n\tSCSI_PR_WRITE_EXCLUSIVE_REG_ONLY\t= 0x05,\n\tSCSI_PR_EXCLUSIVE_ACCESS_REG_ONLY\t= 0x06,\n\tSCSI_PR_WRITE_EXCLUSIVE_ALL_REGS\t= 0x07,\n\tSCSI_PR_EXCLUSIVE_ACCESS_ALL_REGS\t= 0x08,\n};\n\nenum scsi_pr_type block_pr_type_to_scsi(enum pr_type type);\nenum pr_type scsi_pr_type_to_block(enum scsi_pr_type type);\n\nstatic inline unsigned\nscsi_varlen_cdb_length(const void *hdr)\n{\n\treturn ((struct scsi_varlen_cdb_hdr *)hdr)->additional_cdb_length + 8;\n}\n\nextern const unsigned char scsi_command_size_tbl[8];\n#define COMMAND_SIZE(opcode) scsi_command_size_tbl[((opcode) >> 5) & 7]\n\nstatic inline unsigned\nscsi_command_size(const unsigned char *cmnd)\n{\n\treturn (cmnd[0] == VARIABLE_LENGTH_CMD) ?\n\t\tscsi_varlen_cdb_length(cmnd) : COMMAND_SIZE(cmnd[0]);\n}\n\nstatic inline unsigned char\nscsi_command_control(const unsigned char *cmnd)\n{\n\treturn (cmnd[0] == VARIABLE_LENGTH_CMD) ?\n\t\tcmnd[1] : cmnd[COMMAND_SIZE(cmnd[0]) - 1];\n}\n\n \nextern const char *scsi_device_type(unsigned type);\n\nextern void int_to_scsilun(u64, struct scsi_lun *);\nextern u64 scsilun_to_int(struct scsi_lun *);\n\n \nstruct scsi_sense_hdr {\t\t \n\tu8 response_code;\t \n\tu8 sense_key;\n\tu8 asc;\n\tu8 ascq;\n\tu8 byte4;\n\tu8 byte5;\n\tu8 byte6;\n\tu8 additional_length;\t \n};\n\nstatic inline bool scsi_sense_valid(const struct scsi_sense_hdr *sshdr)\n{\n\tif (!sshdr)\n\t\treturn false;\n\n\treturn (sshdr->response_code & 0x70) == 0x70;\n}\n\nextern bool scsi_normalize_sense(const u8 *sense_buffer, int sb_len,\n\t\t\t\t struct scsi_sense_hdr *sshdr);\n\nextern void scsi_build_sense_buffer(int desc, u8 *buf, u8 key, u8 asc, u8 ascq);\nint scsi_set_sense_information(u8 *buf, int buf_len, u64 info);\nint scsi_set_sense_field_pointer(u8 *buf, int buf_len, u16 fp, u8 bp, bool cd);\nextern const u8 * scsi_sense_desc_find(const u8 * sense_buffer, int sb_len,\n\t\t\t\t       int desc_type);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}