{
  "module_name": "scsi_transport_srp.h",
  "hash_id": "e785d7ed9815cd753c65690e869b343aea32921d0211654384c6ff91728c0749",
  "original_prompt": "Ingested from linux-6.6.14/include/scsi/scsi_transport_srp.h",
  "human_readable_source": " \n#ifndef SCSI_TRANSPORT_SRP_H\n#define SCSI_TRANSPORT_SRP_H\n\n#include <linux/transport_class.h>\n#include <linux/types.h>\n#include <linux/mutex.h>\n\n#define SRP_RPORT_ROLE_INITIATOR 0\n#define SRP_RPORT_ROLE_TARGET 1\n\nstruct srp_rport_identifiers {\n\tu8 port_id[16];\n\tu8 roles;\n};\n\n \nenum srp_rport_state {\n\tSRP_RPORT_RUNNING,\n\tSRP_RPORT_BLOCKED,\n\tSRP_RPORT_FAIL_FAST,\n\tSRP_RPORT_LOST,\n};\n\n \nstruct srp_rport {\n\t \n\n\tstruct device dev;\n\n\tu8 port_id[16];\n\tu8 roles;\n\n\t \n\n\tvoid\t\t\t*lld_data;\n\n\tstruct mutex\t\tmutex;\n\tenum srp_rport_state\tstate;\n\tint\t\t\treconnect_delay;\n\tint\t\t\tfailed_reconnects;\n\tstruct delayed_work\treconnect_work;\n\tint\t\t\tfast_io_fail_tmo;\n\tint\t\t\tdev_loss_tmo;\n\tstruct delayed_work\tfast_io_fail_work;\n\tstruct delayed_work\tdev_loss_work;\n};\n\n \nstruct srp_function_template {\n\t \n\tbool has_rport_state;\n\tbool reset_timer_if_blocked;\n\tint *reconnect_delay;\n\tint *fast_io_fail_tmo;\n\tint *dev_loss_tmo;\n\tint (*reconnect)(struct srp_rport *rport);\n\tvoid (*terminate_rport_io)(struct srp_rport *rport);\n\tvoid (*rport_delete)(struct srp_rport *rport);\n};\n\nextern struct scsi_transport_template *\nsrp_attach_transport(struct srp_function_template *);\nextern void srp_release_transport(struct scsi_transport_template *);\n\nextern void srp_rport_get(struct srp_rport *rport);\nextern void srp_rport_put(struct srp_rport *rport);\nextern struct srp_rport *srp_rport_add(struct Scsi_Host *,\n\t\t\t\t       struct srp_rport_identifiers *);\nextern void srp_rport_del(struct srp_rport *);\nextern int srp_tmo_valid(int reconnect_delay, int fast_io_fail_tmo,\n\t\t\t long dev_loss_tmo);\nint srp_parse_tmo(int *tmo, const char *buf);\nextern int srp_reconnect_rport(struct srp_rport *rport);\nextern void srp_start_tl_fail_timers(struct srp_rport *rport);\nextern void srp_remove_host(struct Scsi_Host *);\nextern void srp_stop_rport_timers(struct srp_rport *rport);\nenum scsi_timeout_action srp_timed_out(struct scsi_cmnd *scmd);\n\n \nstatic inline int srp_chkready(struct srp_rport *rport)\n{\n\tswitch (rport->state) {\n\tcase SRP_RPORT_RUNNING:\n\tcase SRP_RPORT_BLOCKED:\n\tdefault:\n\t\treturn 0;\n\tcase SRP_RPORT_FAIL_FAST:\n\t\treturn DID_TRANSPORT_FAILFAST << 16;\n\tcase SRP_RPORT_LOST:\n\t\treturn DID_NO_CONNECT << 16;\n\t}\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}