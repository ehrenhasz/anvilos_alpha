{
  "module_name": "sas.h",
  "hash_id": "023c456ab6dd44038413087377be213853e5a7b99b437182802fcca9ee0e9541",
  "original_prompt": "Ingested from linux-6.6.14/include/scsi/sas.h",
  "human_readable_source": " \n \n\n#ifndef _SAS_H_\n#define _SAS_H_\n\n#include <linux/types.h>\n#include <asm/byteorder.h>\n\n#define SAS_ADDR_SIZE        8\n#define HASHED_SAS_ADDR_SIZE 3\n#define SAS_ADDR(_sa) ((unsigned long long) be64_to_cpu(*(__be64 *)(_sa)))\n\n#define SMP_REQUEST             0x40\n#define SMP_RESPONSE            0x41\n\n#define SSP_DATA                0x01\n#define SSP_XFER_RDY            0x05\n#define SSP_COMMAND             0x06\n#define SSP_RESPONSE            0x07\n#define SSP_TASK                0x16\n\n#define SMP_REPORT_GENERAL       0x00\n#define SMP_REPORT_MANUF_INFO    0x01\n#define SMP_READ_GPIO_REG        0x02\n#define SMP_DISCOVER             0x10\n#define SMP_REPORT_PHY_ERR_LOG   0x11\n#define SMP_REPORT_PHY_SATA      0x12\n#define SMP_REPORT_ROUTE_INFO    0x13\n#define SMP_WRITE_GPIO_REG       0x82\n#define SMP_CONF_ROUTE_INFO      0x90\n#define SMP_PHY_CONTROL          0x91\n#define SMP_PHY_TEST_FUNCTION    0x92\n\n#define SMP_RESP_FUNC_ACC        0x00\n#define SMP_RESP_FUNC_UNK        0x01\n#define SMP_RESP_FUNC_FAILED     0x02\n#define SMP_RESP_INV_FRM_LEN     0x03\n#define SMP_RESP_NO_PHY          0x10\n#define SMP_RESP_NO_INDEX        0x11\n#define SMP_RESP_PHY_NO_SATA     0x12\n#define SMP_RESP_PHY_UNK_OP      0x13\n#define SMP_RESP_PHY_UNK_TESTF   0x14\n#define SMP_RESP_PHY_TEST_INPROG 0x15\n#define SMP_RESP_PHY_VACANT      0x16\n\n \n#define TMF_ABORT_TASK      0x01\n#define TMF_ABORT_TASK_SET  0x02\n#define TMF_CLEAR_TASK_SET  0x04\n#define TMF_LU_RESET        0x08\n#define TMF_CLEAR_ACA       0x40\n#define TMF_QUERY_TASK      0x80\n\n \n#define TMF_RESP_FUNC_COMPLETE   0x00\n#define TMF_RESP_INVALID_FRAME   0x02\n#define TMF_RESP_FUNC_ESUPP      0x04\n#define TMF_RESP_FUNC_FAILED     0x05\n#define TMF_RESP_FUNC_SUCC       0x08\n#define TMF_RESP_NO_LUN          0x09\n#define TMF_RESP_OVERLAPPED_TAG  0x0A\n\nenum sas_oob_mode {\n\tOOB_NOT_CONNECTED,\n\tSATA_OOB_MODE,\n\tSAS_OOB_MODE\n};\n\n \nenum sas_device_type {\n\t \n\tSAS_PHY_UNUSED = 0,\n\tSAS_END_DEVICE = 1,\n\tSAS_EDGE_EXPANDER_DEVICE = 2,\n\tSAS_FANOUT_EXPANDER_DEVICE = 3,\n\t \n\tSAS_HA = 4,\n\tSAS_SATA_DEV = 5,\n\tSAS_SATA_PM = 7,\n\tSAS_SATA_PM_PORT = 8,\n\tSAS_SATA_PENDING = 9,\n};\n\nenum sas_protocol {\n\tSAS_PROTOCOL_NONE\t\t= 0,\n\tSAS_PROTOCOL_SATA\t\t= 0x01,\n\tSAS_PROTOCOL_SMP\t\t= 0x02,\n\tSAS_PROTOCOL_STP\t\t= 0x04,\n\tSAS_PROTOCOL_SSP\t\t= 0x08,\n\tSAS_PROTOCOL_ALL\t\t= 0x0E,\n\tSAS_PROTOCOL_STP_ALL\t\t= SAS_PROTOCOL_STP|SAS_PROTOCOL_SATA,\n\t \n\tSAS_PROTOCOL_INTERNAL_ABORT\t= 0x10,\n};\n\n \nenum phy_func {\n\tPHY_FUNC_NOP,\n\tPHY_FUNC_LINK_RESET,\t\t   \n\tPHY_FUNC_HARD_RESET,\n\tPHY_FUNC_DISABLE,\n\tPHY_FUNC_CLEAR_ERROR_LOG = 5,\n\tPHY_FUNC_CLEAR_AFFIL,\n\tPHY_FUNC_TX_SATA_PS_SIGNAL,\n\tPHY_FUNC_RELEASE_SPINUP_HOLD = 0x10,  \n\tPHY_FUNC_SET_LINK_RATE,\n\tPHY_FUNC_GET_EVENTS,\n};\n\n \nenum sas_prim {\n\tSAS_PRIM_AIP_NORMAL = 1,\n\tSAS_PRIM_AIP_R0     = 2,\n\tSAS_PRIM_AIP_R1     = 3,\n\tSAS_PRIM_AIP_R2     = 4,\n\tSAS_PRIM_AIP_WC     = 5,\n\tSAS_PRIM_AIP_WD     = 6,\n\tSAS_PRIM_AIP_WP     = 7,\n\tSAS_PRIM_AIP_RWP    = 8,\n\n\tSAS_PRIM_BC_CH      = 9,\n\tSAS_PRIM_BC_RCH0    = 10,\n\tSAS_PRIM_BC_RCH1    = 11,\n\tSAS_PRIM_BC_R0      = 12,\n\tSAS_PRIM_BC_R1      = 13,\n\tSAS_PRIM_BC_R2      = 14,\n\tSAS_PRIM_BC_R3      = 15,\n\tSAS_PRIM_BC_R4      = 16,\n\n\tSAS_PRIM_NOTIFY_ENSP= 17,\n\tSAS_PRIM_NOTIFY_R0  = 18,\n\tSAS_PRIM_NOTIFY_R1  = 19,\n\tSAS_PRIM_NOTIFY_R2  = 20,\n\n\tSAS_PRIM_CLOSE_CLAF = 21,\n\tSAS_PRIM_CLOSE_NORM = 22,\n\tSAS_PRIM_CLOSE_R0   = 23,\n\tSAS_PRIM_CLOSE_R1   = 24,\n\n\tSAS_PRIM_OPEN_RTRY  = 25,\n\tSAS_PRIM_OPEN_RJCT  = 26,\n\tSAS_PRIM_OPEN_ACPT  = 27,\n\n\tSAS_PRIM_DONE       = 28,\n\tSAS_PRIM_BREAK      = 29,\n\n\tSATA_PRIM_DMAT      = 33,\n\tSATA_PRIM_PMNAK     = 34,\n\tSATA_PRIM_PMACK     = 35,\n\tSATA_PRIM_PMREQ_S   = 36,\n\tSATA_PRIM_PMREQ_P   = 37,\n\tSATA_SATA_R_ERR     = 38,\n};\n\nenum sas_open_rej_reason {\n\t \n\tSAS_OREJ_UNKNOWN   = 0,\n\tSAS_OREJ_BAD_DEST  = 1,\n\tSAS_OREJ_CONN_RATE = 2,\n\tSAS_OREJ_EPROTO    = 3,\n\tSAS_OREJ_RESV_AB0  = 4,\n\tSAS_OREJ_RESV_AB1  = 5,\n\tSAS_OREJ_RESV_AB2  = 6,\n\tSAS_OREJ_RESV_AB3  = 7,\n\tSAS_OREJ_WRONG_DEST= 8,\n\tSAS_OREJ_STP_NORES = 9,\n\n\t \n\tSAS_OREJ_NO_DEST   = 10,\n\tSAS_OREJ_PATH_BLOCKED = 11,\n\tSAS_OREJ_RSVD_CONT0 = 12,\n\tSAS_OREJ_RSVD_CONT1 = 13,\n\tSAS_OREJ_RSVD_INIT0 = 14,\n\tSAS_OREJ_RSVD_INIT1 = 15,\n\tSAS_OREJ_RSVD_STOP0 = 16,\n\tSAS_OREJ_RSVD_STOP1 = 17,\n\tSAS_OREJ_RSVD_RETRY = 18,\n};\n\nenum sas_gpio_reg_type {\n\tSAS_GPIO_REG_CFG   = 0,\n\tSAS_GPIO_REG_RX    = 1,\n\tSAS_GPIO_REG_RX_GP = 2,\n\tSAS_GPIO_REG_TX    = 3,\n\tSAS_GPIO_REG_TX_GP = 4,\n};\n\n \nenum {\n\tSAS_DATAPRES_NO_DATA\t\t= 0,\n\tSAS_DATAPRES_RESPONSE_DATA\t= 1,\n\tSAS_DATAPRES_SENSE_DATA\t\t= 2,\n};\n\nstruct  dev_to_host_fis {\n\tu8     fis_type;\t   \n\tu8     flags;\n\tu8     status;\n\tu8     error;\n\n\tu8     lbal;\n\tunion { u8 lbam; u8 byte_count_low; };\n\tunion { u8 lbah; u8 byte_count_high; };\n\tu8     device;\n\n\tu8     lbal_exp;\n\tu8     lbam_exp;\n\tu8     lbah_exp;\n\tu8     _r_a;\n\n\tunion { u8  sector_count; u8 interrupt_reason; };\n\tu8     sector_count_exp;\n\tu8     _r_b;\n\tu8     _r_c;\n\n\tu32    _r_d;\n} __attribute__ ((packed));\n\nstruct host_to_dev_fis {\n\tu8     fis_type;\t   \n\tu8     flags;\n\tu8     command;\n\tu8     features;\n\n\tu8     lbal;\n\tunion { u8 lbam; u8 byte_count_low; };\n\tunion { u8 lbah; u8 byte_count_high; };\n\tu8     device;\n\n\tu8     lbal_exp;\n\tu8     lbam_exp;\n\tu8     lbah_exp;\n\tu8     features_exp;\n\n\tunion { u8  sector_count; u8 interrupt_reason; };\n\tu8     sector_count_exp;\n\tu8     _r_a;\n\tu8     control;\n\n\tu32    _r_b;\n} __attribute__ ((packed));\n\n \n#ifdef __LITTLE_ENDIAN_BITFIELD\nstruct sas_identify_frame {\n\t \n\tu8  frame_type:4;\n\tu8  dev_type:3;\n\tu8  _un0:1;\n\n\t \n\tu8  _un1;\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tu8  _un20:1;\n\t\t\tu8  smp_iport:1;\n\t\t\tu8  stp_iport:1;\n\t\t\tu8  ssp_iport:1;\n\t\t\tu8  _un247:4;\n\t\t};\n\t\tu8 initiator_bits;\n\t};\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tu8  _un30:1;\n\t\t\tu8 smp_tport:1;\n\t\t\tu8 stp_tport:1;\n\t\t\tu8 ssp_tport:1;\n\t\t\tu8 _un347:4;\n\t\t};\n\t\tu8 target_bits;\n\t};\n\n\t \n\tu8 _un4_11[8];\n\n\t \n\tu8 sas_addr[SAS_ADDR_SIZE];\n\n\t \n\tu8 phy_id;\n\n\tu8 _un21_27[7];\n\n\t__be32 crc;\n} __attribute__ ((packed));\n\nstruct ssp_frame_hdr {\n\tu8     frame_type;\n\tu8     hashed_dest_addr[HASHED_SAS_ADDR_SIZE];\n\tu8     _r_a;\n\tu8     hashed_src_addr[HASHED_SAS_ADDR_SIZE];\n\t__be16 _r_b;\n\n\tu8     changing_data_ptr:1;\n\tu8     retransmit:1;\n\tu8     retry_data_frames:1;\n\tu8     _r_c:5;\n\n\tu8     num_fill_bytes:2;\n\tu8     _r_d:6;\n\n\tu32    _r_e;\n\t__be16 tag;\n\t__be16 tptt;\n\t__be32 data_offs;\n} __attribute__ ((packed));\n\nstruct ssp_response_iu {\n\tu8     _r_a[10];\n\n\tu8     datapres:2;\n\tu8     _r_b:6;\n\n\tu8     status;\n\n\tu32    _r_c;\n\n\t__be32 sense_data_len;\n\t__be32 response_data_len;\n\n\tunion {\n\t\tDECLARE_FLEX_ARRAY(u8, resp_data);\n\t\tDECLARE_FLEX_ARRAY(u8, sense_data);\n\t};\n} __attribute__ ((packed));\n\nstruct ssp_command_iu {\n\tu8     lun[8];\n\tu8     _r_a;\n\n\tunion {\n\t\tstruct {\n\t\t\tu8  attr:3;\n\t\t\tu8  prio:4;\n\t\t\tu8  efb:1;\n\t\t};\n\t\tu8 efb_prio_attr;\n\t};\n\n\tu8    _r_b;\n\n\tu8    _r_c:2;\n\tu8    add_cdb_len:6;\n\n\tu8    cdb[16];\n\tu8    add_cdb[];\n} __attribute__ ((packed));\n\nstruct xfer_rdy_iu {\n\t__be32 requested_offset;\n\t__be32 write_data_len;\n\t__be32 _r_a;\n} __attribute__ ((packed));\n\nstruct ssp_tmf_iu {\n\tu8     lun[8];\n\tu16    _r_a;\n\tu8     tmf;\n\tu8     _r_b;\n\t__be16 tag;\n\tu8     _r_c[14];\n} __attribute__ ((packed));\n\n \n\nstruct report_general_resp {\n\t__be16  change_count;\n\t__be16  route_indexes;\n\tu8      _r_a;\n\tu8      num_phys;\n\n\tu8      conf_route_table:1;\n\tu8      configuring:1;\n\tu8\tconfig_others:1;\n\tu8\torej_retry_supp:1;\n\tu8\tstp_cont_awt:1;\n\tu8\tself_config:1;\n\tu8\tzone_config:1;\n\tu8\tt2t_supp:1;\n\n\tu8      _r_c;\n\n\tu8      enclosure_logical_id[8];\n\n\tu8      _r_d[12];\n} __attribute__ ((packed));\n\nstruct discover_resp {\n\tu8    _r_a[5];\n\n\tu8    phy_id;\n\t__be16 _r_b;\n\n\tu8    _r_c:4;\n\tu8    attached_dev_type:3;\n\tu8    _r_d:1;\n\n\tu8    linkrate:4;\n\tu8    _r_e:4;\n\n\tu8    attached_sata_host:1;\n\tu8    iproto:3;\n\tu8    _r_f:4;\n\n\tu8    attached_sata_dev:1;\n\tu8    tproto:3;\n\tu8    _r_g:3;\n\tu8    attached_sata_ps:1;\n\n\tu8    sas_addr[8];\n\tu8    attached_sas_addr[8];\n\tu8    attached_phy_id;\n\n\tu8    _r_h[7];\n\n\tu8    hmin_linkrate:4;\n\tu8    pmin_linkrate:4;\n\tu8    hmax_linkrate:4;\n\tu8    pmax_linkrate:4;\n\n\tu8    change_count;\n\n\tu8    pptv:4;\n\tu8    _r_i:3;\n\tu8    virtual:1;\n\n\tu8    routing_attr:4;\n\tu8    _r_j:4;\n\n\tu8    conn_type;\n\tu8    conn_el_index;\n\tu8    conn_phy_link;\n\n\tu8    _r_k[8];\n} __attribute__ ((packed));\n\nstruct report_phy_sata_resp {\n\tu8    _r_a[5];\n\n\tu8    phy_id;\n\tu8    _r_b;\n\n\tu8    affil_valid:1;\n\tu8    affil_supp:1;\n\tu8    _r_c:6;\n\n\tu32    _r_d;\n\n\tu8    stp_sas_addr[8];\n\n\tstruct dev_to_host_fis fis;\n\n\tu32   _r_e;\n\n\tu8    affil_stp_ini_addr[8];\n\n\t__be32 crc;\n} __attribute__ ((packed));\n\n#elif defined(__BIG_ENDIAN_BITFIELD)\nstruct sas_identify_frame {\n\t \n\tu8  _un0:1;\n\tu8  dev_type:3;\n\tu8  frame_type:4;\n\n\t \n\tu8  _un1;\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tu8  _un247:4;\n\t\t\tu8  ssp_iport:1;\n\t\t\tu8  stp_iport:1;\n\t\t\tu8  smp_iport:1;\n\t\t\tu8  _un20:1;\n\t\t};\n\t\tu8 initiator_bits;\n\t};\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tu8 _un347:4;\n\t\t\tu8 ssp_tport:1;\n\t\t\tu8 stp_tport:1;\n\t\t\tu8 smp_tport:1;\n\t\t\tu8 _un30:1;\n\t\t};\n\t\tu8 target_bits;\n\t};\n\n\t \n\tu8 _un4_11[8];\n\n\t \n\tu8 sas_addr[SAS_ADDR_SIZE];\n\n\t \n\tu8 phy_id;\n\n\tu8 _un21_27[7];\n\n\t__be32 crc;\n} __attribute__ ((packed));\n\nstruct ssp_frame_hdr {\n\tu8     frame_type;\n\tu8     hashed_dest_addr[HASHED_SAS_ADDR_SIZE];\n\tu8     _r_a;\n\tu8     hashed_src_addr[HASHED_SAS_ADDR_SIZE];\n\t__be16 _r_b;\n\n\tu8     _r_c:5;\n\tu8     retry_data_frames:1;\n\tu8     retransmit:1;\n\tu8     changing_data_ptr:1;\n\n\tu8     _r_d:6;\n\tu8     num_fill_bytes:2;\n\n\tu32    _r_e;\n\t__be16 tag;\n\t__be16 tptt;\n\t__be32 data_offs;\n} __attribute__ ((packed));\n\nstruct ssp_response_iu {\n\tu8     _r_a[10];\n\n\tu8     _r_b:6;\n\tu8     datapres:2;\n\n\tu8     status;\n\n\tu32    _r_c;\n\n\t__be32 sense_data_len;\n\t__be32 response_data_len;\n\n\tunion {\n\t\tDECLARE_FLEX_ARRAY(u8, resp_data);\n\t\tDECLARE_FLEX_ARRAY(u8, sense_data);\n\t};\n} __attribute__ ((packed));\n\nstruct ssp_command_iu {\n\tu8     lun[8];\n\tu8     _r_a;\n\n\tunion {\n\t\tstruct {\n\t\t\tu8  efb:1;\n\t\t\tu8  prio:4;\n\t\t\tu8  attr:3;\n\t\t};\n\t\tu8 efb_prio_attr;\n\t};\n\n\tu8    _r_b;\n\n\tu8    add_cdb_len:6;\n\tu8    _r_c:2;\n\n\tu8    cdb[16];\n\tu8    add_cdb[];\n} __attribute__ ((packed));\n\nstruct xfer_rdy_iu {\n\t__be32 requested_offset;\n\t__be32 write_data_len;\n\t__be32 _r_a;\n} __attribute__ ((packed));\n\nstruct ssp_tmf_iu {\n\tu8     lun[8];\n\tu16    _r_a;\n\tu8     tmf;\n\tu8     _r_b;\n\t__be16 tag;\n\tu8     _r_c[14];\n} __attribute__ ((packed));\n\n \n\nstruct report_general_resp {\n\t__be16  change_count;\n\t__be16  route_indexes;\n\tu8      _r_a;\n\tu8      num_phys;\n\n\tu8\tt2t_supp:1;\n\tu8\tzone_config:1;\n\tu8\tself_config:1;\n\tu8\tstp_cont_awt:1;\n\tu8\torej_retry_supp:1;\n\tu8\tconfig_others:1;\n\tu8      configuring:1;\n\tu8      conf_route_table:1;\n\n\tu8      _r_c;\n\n\tu8      enclosure_logical_id[8];\n\n\tu8      _r_d[12];\n} __attribute__ ((packed));\n\nstruct discover_resp {\n\tu8    _r_a[5];\n\n\tu8    phy_id;\n\t__be16 _r_b;\n\n\tu8    _r_d:1;\n\tu8    attached_dev_type:3;\n\tu8    _r_c:4;\n\n\tu8    _r_e:4;\n\tu8    linkrate:4;\n\n\tu8    _r_f:4;\n\tu8    iproto:3;\n\tu8    attached_sata_host:1;\n\n\tu8    attached_sata_ps:1;\n\tu8    _r_g:3;\n\tu8    tproto:3;\n\tu8    attached_sata_dev:1;\n\n\tu8    sas_addr[8];\n\tu8    attached_sas_addr[8];\n\tu8    attached_phy_id;\n\n\tu8    _r_h[7];\n\n\tu8    pmin_linkrate:4;\n\tu8    hmin_linkrate:4;\n\tu8    pmax_linkrate:4;\n\tu8    hmax_linkrate:4;\n\n\tu8    change_count;\n\n\tu8    virtual:1;\n\tu8    _r_i:3;\n\tu8    pptv:4;\n\n\tu8    _r_j:4;\n\tu8    routing_attr:4;\n\n\tu8    conn_type;\n\tu8    conn_el_index;\n\tu8    conn_phy_link;\n\n\tu8    _r_k[8];\n} __attribute__ ((packed));\n\nstruct report_phy_sata_resp {\n\tu8    _r_a[5];\n\n\tu8    phy_id;\n\tu8    _r_b;\n\n\tu8    _r_c:6;\n\tu8    affil_supp:1;\n\tu8    affil_valid:1;\n\n\tu32   _r_d;\n\n\tu8    stp_sas_addr[8];\n\n\tstruct dev_to_host_fis fis;\n\n\tu32   _r_e;\n\n\tu8    affil_stp_ini_addr[8];\n\n\t__be32 crc;\n} __attribute__ ((packed));\n\n#else\n#error \"Bitfield order not defined!\"\n#endif\n\nstruct smp_rg_resp {\n\tu8    frame_type;\n\tu8    function;\n\tu8    result;\n\tu8    reserved;\n\tstruct report_general_resp rg;\n} __attribute__ ((packed));\n\nstruct smp_disc_resp {\n\tu8    frame_type;\n\tu8    function;\n\tu8    result;\n\tu8    reserved;\n\tstruct discover_resp disc;\n} __attribute__ ((packed));\n\nstruct smp_rps_resp {\n\tu8    frame_type;\n\tu8    function;\n\tu8    result;\n\tu8    reserved;\n\tstruct report_phy_sata_resp rps;\n} __attribute__ ((packed));\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}