{
  "module_name": "qspinlock.h",
  "hash_id": "d21f46c75b3118aa81bd2af596e71857585a1c4a49de825d67aa529982793a95",
  "original_prompt": "Ingested from linux-6.6.14/include/asm-generic/qspinlock.h",
  "human_readable_source": " \n \n#ifndef __ASM_GENERIC_QSPINLOCK_H\n#define __ASM_GENERIC_QSPINLOCK_H\n\n#include <asm-generic/qspinlock_types.h>\n#include <linux/atomic.h>\n\n#ifndef queued_spin_is_locked\n \nstatic __always_inline int queued_spin_is_locked(struct qspinlock *lock)\n{\n\t \n\treturn atomic_read(&lock->val);\n}\n#endif\n\n \nstatic __always_inline int queued_spin_value_unlocked(struct qspinlock lock)\n{\n\treturn !lock.val.counter;\n}\n\n \nstatic __always_inline int queued_spin_is_contended(struct qspinlock *lock)\n{\n\treturn atomic_read(&lock->val) & ~_Q_LOCKED_MASK;\n}\n \nstatic __always_inline int queued_spin_trylock(struct qspinlock *lock)\n{\n\tint val = atomic_read(&lock->val);\n\n\tif (unlikely(val))\n\t\treturn 0;\n\n\treturn likely(atomic_try_cmpxchg_acquire(&lock->val, &val, _Q_LOCKED_VAL));\n}\n\nextern void queued_spin_lock_slowpath(struct qspinlock *lock, u32 val);\n\n#ifndef queued_spin_lock\n \nstatic __always_inline void queued_spin_lock(struct qspinlock *lock)\n{\n\tint val = 0;\n\n\tif (likely(atomic_try_cmpxchg_acquire(&lock->val, &val, _Q_LOCKED_VAL)))\n\t\treturn;\n\n\tqueued_spin_lock_slowpath(lock, val);\n}\n#endif\n\n#ifndef queued_spin_unlock\n \nstatic __always_inline void queued_spin_unlock(struct qspinlock *lock)\n{\n\t \n\tsmp_store_release(&lock->locked, 0);\n}\n#endif\n\n#ifndef virt_spin_lock\nstatic __always_inline bool virt_spin_lock(struct qspinlock *lock)\n{\n\treturn false;\n}\n#endif\n\n \n#define arch_spin_is_locked(l)\t\tqueued_spin_is_locked(l)\n#define arch_spin_is_contended(l)\tqueued_spin_is_contended(l)\n#define arch_spin_value_unlocked(l)\tqueued_spin_value_unlocked(l)\n#define arch_spin_lock(l)\t\tqueued_spin_lock(l)\n#define arch_spin_trylock(l)\t\tqueued_spin_trylock(l)\n#define arch_spin_unlock(l)\t\tqueued_spin_unlock(l)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}