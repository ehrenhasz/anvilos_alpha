{
  "module_name": "dpaa2-fd.h",
  "hash_id": "e794229193cf0f2dc354fbe2e50fb16ffee47d3bc22428f109c2daec3a96e1cd",
  "original_prompt": "Ingested from linux-6.6.14/include/soc/fsl/dpaa2-fd.h",
  "human_readable_source": " \n \n#ifndef __FSL_DPAA2_FD_H\n#define __FSL_DPAA2_FD_H\n\n#include <linux/byteorder/generic.h>\n#include <linux/types.h>\n\n \n\n \nstruct dpaa2_fd {\n\tunion {\n\t\tu32 words[8];\n\t\tstruct dpaa2_fd_simple {\n\t\t\t__le64 addr;\n\t\t\t__le32 len;\n\t\t\t__le16 bpid;\n\t\t\t__le16 format_offset;\n\t\t\t__le32 frc;\n\t\t\t__le32 ctrl;\n\t\t\t__le64 flc;\n\t\t} simple;\n\t};\n};\n\n#define FD_SHORT_LEN_FLAG_MASK\t0x1\n#define FD_SHORT_LEN_FLAG_SHIFT\t14\n#define FD_SHORT_LEN_MASK\t0x3FFFF\n#define FD_OFFSET_MASK\t\t0x0FFF\n#define FD_FORMAT_MASK\t\t0x3\n#define FD_FORMAT_SHIFT\t\t12\n#define FD_BPID_MASK\t\t0x3FFF\n#define SG_SHORT_LEN_FLAG_MASK\t0x1\n#define SG_SHORT_LEN_FLAG_SHIFT\t14\n#define SG_SHORT_LEN_MASK\t0x1FFFF\n#define SG_OFFSET_MASK\t\t0x0FFF\n#define SG_FORMAT_MASK\t\t0x3\n#define SG_FORMAT_SHIFT\t\t12\n#define SG_BPID_MASK\t\t0x3FFF\n#define SG_FINAL_FLAG_MASK\t0x1\n#define SG_FINAL_FLAG_SHIFT\t15\n#define FL_SHORT_LEN_FLAG_MASK\t0x1\n#define FL_SHORT_LEN_FLAG_SHIFT\t14\n#define FL_SHORT_LEN_MASK\t0x3FFFF\n#define FL_OFFSET_MASK\t\t0x0FFF\n#define FL_FORMAT_MASK\t\t0x3\n#define FL_FORMAT_SHIFT\t\t12\n#define FL_BPID_MASK\t\t0x3FFF\n#define FL_FINAL_FLAG_MASK\t0x1\n#define FL_FINAL_FLAG_SHIFT\t15\n\n \n#define FD_CTRL_ERR_MASK\t0x000000FF\n#define FD_CTRL_UFD\t\t0x00000004\n#define FD_CTRL_SBE\t\t0x00000008\n#define FD_CTRL_FLC\t\t0x00000010\n#define FD_CTRL_FSE\t\t0x00000020\n#define FD_CTRL_FAERR\t\t0x00000040\n\n \n#define FD_CTRL_PTA\t\t0x00800000\n#define FD_CTRL_PTV1\t\t0x00400000\n\nenum dpaa2_fd_format {\n\tdpaa2_fd_single = 0,\n\tdpaa2_fd_list,\n\tdpaa2_fd_sg\n};\n\n \nstatic inline dma_addr_t dpaa2_fd_get_addr(const struct dpaa2_fd *fd)\n{\n\treturn (dma_addr_t)le64_to_cpu(fd->simple.addr);\n}\n\n \nstatic inline void dpaa2_fd_set_addr(struct dpaa2_fd *fd, dma_addr_t addr)\n{\n\tfd->simple.addr = cpu_to_le64(addr);\n}\n\n \nstatic inline u32 dpaa2_fd_get_frc(const struct dpaa2_fd *fd)\n{\n\treturn le32_to_cpu(fd->simple.frc);\n}\n\n \nstatic inline void dpaa2_fd_set_frc(struct dpaa2_fd *fd, u32 frc)\n{\n\tfd->simple.frc = cpu_to_le32(frc);\n}\n\n \nstatic inline u32 dpaa2_fd_get_ctrl(const struct dpaa2_fd *fd)\n{\n\treturn le32_to_cpu(fd->simple.ctrl);\n}\n\n \nstatic inline void dpaa2_fd_set_ctrl(struct dpaa2_fd *fd, u32 ctrl)\n{\n\tfd->simple.ctrl = cpu_to_le32(ctrl);\n}\n\n \nstatic inline dma_addr_t dpaa2_fd_get_flc(const struct dpaa2_fd *fd)\n{\n\treturn (dma_addr_t)le64_to_cpu(fd->simple.flc);\n}\n\n \nstatic inline void dpaa2_fd_set_flc(struct dpaa2_fd *fd,  dma_addr_t flc_addr)\n{\n\tfd->simple.flc = cpu_to_le64(flc_addr);\n}\n\nstatic inline bool dpaa2_fd_short_len(const struct dpaa2_fd *fd)\n{\n\treturn !!((le16_to_cpu(fd->simple.format_offset) >>\n\t\t  FD_SHORT_LEN_FLAG_SHIFT) & FD_SHORT_LEN_FLAG_MASK);\n}\n\n \nstatic inline u32 dpaa2_fd_get_len(const struct dpaa2_fd *fd)\n{\n\tif (dpaa2_fd_short_len(fd))\n\t\treturn le32_to_cpu(fd->simple.len) & FD_SHORT_LEN_MASK;\n\n\treturn le32_to_cpu(fd->simple.len);\n}\n\n \nstatic inline void dpaa2_fd_set_len(struct dpaa2_fd *fd, u32 len)\n{\n\tfd->simple.len = cpu_to_le32(len);\n}\n\n \nstatic inline uint16_t dpaa2_fd_get_offset(const struct dpaa2_fd *fd)\n{\n\treturn le16_to_cpu(fd->simple.format_offset) & FD_OFFSET_MASK;\n}\n\n \nstatic inline void dpaa2_fd_set_offset(struct dpaa2_fd *fd, uint16_t offset)\n{\n\tfd->simple.format_offset &= cpu_to_le16(~FD_OFFSET_MASK);\n\tfd->simple.format_offset |= cpu_to_le16(offset);\n}\n\n \nstatic inline enum dpaa2_fd_format dpaa2_fd_get_format(\n\t\t\t\t\t\tconst struct dpaa2_fd *fd)\n{\n\treturn (enum dpaa2_fd_format)((le16_to_cpu(fd->simple.format_offset)\n\t\t\t\t      >> FD_FORMAT_SHIFT) & FD_FORMAT_MASK);\n}\n\n \nstatic inline void dpaa2_fd_set_format(struct dpaa2_fd *fd,\n\t\t\t\t       enum dpaa2_fd_format format)\n{\n\tfd->simple.format_offset &=\n\t\tcpu_to_le16(~(FD_FORMAT_MASK << FD_FORMAT_SHIFT));\n\tfd->simple.format_offset |= cpu_to_le16(format << FD_FORMAT_SHIFT);\n}\n\n \nstatic inline uint16_t dpaa2_fd_get_bpid(const struct dpaa2_fd *fd)\n{\n\treturn le16_to_cpu(fd->simple.bpid) & FD_BPID_MASK;\n}\n\n \nstatic inline void dpaa2_fd_set_bpid(struct dpaa2_fd *fd, uint16_t bpid)\n{\n\tfd->simple.bpid &= cpu_to_le16(~(FD_BPID_MASK));\n\tfd->simple.bpid |= cpu_to_le16(bpid);\n}\n\n \nstruct dpaa2_sg_entry {\n\t__le64 addr;\n\t__le32 len;\n\t__le16 bpid;\n\t__le16 format_offset;\n};\n\nenum dpaa2_sg_format {\n\tdpaa2_sg_single = 0,\n\tdpaa2_sg_frame_data,\n\tdpaa2_sg_sgt_ext\n};\n\n \n\n \nstatic inline dma_addr_t dpaa2_sg_get_addr(const struct dpaa2_sg_entry *sg)\n{\n\treturn (dma_addr_t)le64_to_cpu(sg->addr);\n}\n\n \nstatic inline void dpaa2_sg_set_addr(struct dpaa2_sg_entry *sg, dma_addr_t addr)\n{\n\tsg->addr = cpu_to_le64(addr);\n}\n\nstatic inline bool dpaa2_sg_short_len(const struct dpaa2_sg_entry *sg)\n{\n\treturn !!((le16_to_cpu(sg->format_offset) >> SG_SHORT_LEN_FLAG_SHIFT)\n\t\t& SG_SHORT_LEN_FLAG_MASK);\n}\n\n \nstatic inline u32 dpaa2_sg_get_len(const struct dpaa2_sg_entry *sg)\n{\n\tif (dpaa2_sg_short_len(sg))\n\t\treturn le32_to_cpu(sg->len) & SG_SHORT_LEN_MASK;\n\n\treturn le32_to_cpu(sg->len);\n}\n\n \nstatic inline void dpaa2_sg_set_len(struct dpaa2_sg_entry *sg, u32 len)\n{\n\tsg->len = cpu_to_le32(len);\n}\n\n \nstatic inline u16 dpaa2_sg_get_offset(const struct dpaa2_sg_entry *sg)\n{\n\treturn le16_to_cpu(sg->format_offset) & SG_OFFSET_MASK;\n}\n\n \nstatic inline void dpaa2_sg_set_offset(struct dpaa2_sg_entry *sg,\n\t\t\t\t       u16 offset)\n{\n\tsg->format_offset &= cpu_to_le16(~SG_OFFSET_MASK);\n\tsg->format_offset |= cpu_to_le16(offset);\n}\n\n \nstatic inline enum dpaa2_sg_format\n\tdpaa2_sg_get_format(const struct dpaa2_sg_entry *sg)\n{\n\treturn (enum dpaa2_sg_format)((le16_to_cpu(sg->format_offset)\n\t\t\t\t       >> SG_FORMAT_SHIFT) & SG_FORMAT_MASK);\n}\n\n \nstatic inline void dpaa2_sg_set_format(struct dpaa2_sg_entry *sg,\n\t\t\t\t       enum dpaa2_sg_format format)\n{\n\tsg->format_offset &= cpu_to_le16(~(SG_FORMAT_MASK << SG_FORMAT_SHIFT));\n\tsg->format_offset |= cpu_to_le16(format << SG_FORMAT_SHIFT);\n}\n\n \nstatic inline u16 dpaa2_sg_get_bpid(const struct dpaa2_sg_entry *sg)\n{\n\treturn le16_to_cpu(sg->bpid) & SG_BPID_MASK;\n}\n\n \nstatic inline void dpaa2_sg_set_bpid(struct dpaa2_sg_entry *sg, u16 bpid)\n{\n\tsg->bpid &= cpu_to_le16(~(SG_BPID_MASK));\n\tsg->bpid |= cpu_to_le16(bpid);\n}\n\n \nstatic inline bool dpaa2_sg_is_final(const struct dpaa2_sg_entry *sg)\n{\n\treturn !!(le16_to_cpu(sg->format_offset) >> SG_FINAL_FLAG_SHIFT);\n}\n\n \nstatic inline void dpaa2_sg_set_final(struct dpaa2_sg_entry *sg, bool final)\n{\n\tsg->format_offset &= cpu_to_le16((~(SG_FINAL_FLAG_MASK\n\t\t\t\t\t << SG_FINAL_FLAG_SHIFT)) & 0xFFFF);\n\tsg->format_offset |= cpu_to_le16(final << SG_FINAL_FLAG_SHIFT);\n}\n\n \nstruct dpaa2_fl_entry {\n\t__le64 addr;\n\t__le32 len;\n\t__le16 bpid;\n\t__le16 format_offset;\n\t__le32 frc;\n\t__le32 ctrl;\n\t__le64 flc;\n};\n\nenum dpaa2_fl_format {\n\tdpaa2_fl_single = 0,\n\tdpaa2_fl_res,\n\tdpaa2_fl_sg\n};\n\n \nstatic inline dma_addr_t dpaa2_fl_get_addr(const struct dpaa2_fl_entry *fle)\n{\n\treturn (dma_addr_t)le64_to_cpu(fle->addr);\n}\n\n \nstatic inline void dpaa2_fl_set_addr(struct dpaa2_fl_entry *fle,\n\t\t\t\t     dma_addr_t addr)\n{\n\tfle->addr = cpu_to_le64(addr);\n}\n\n \nstatic inline u32 dpaa2_fl_get_frc(const struct dpaa2_fl_entry *fle)\n{\n\treturn le32_to_cpu(fle->frc);\n}\n\n \nstatic inline void dpaa2_fl_set_frc(struct dpaa2_fl_entry *fle, u32 frc)\n{\n\tfle->frc = cpu_to_le32(frc);\n}\n\n \nstatic inline u32 dpaa2_fl_get_ctrl(const struct dpaa2_fl_entry *fle)\n{\n\treturn le32_to_cpu(fle->ctrl);\n}\n\n \nstatic inline void dpaa2_fl_set_ctrl(struct dpaa2_fl_entry *fle, u32 ctrl)\n{\n\tfle->ctrl = cpu_to_le32(ctrl);\n}\n\n \nstatic inline dma_addr_t dpaa2_fl_get_flc(const struct dpaa2_fl_entry *fle)\n{\n\treturn (dma_addr_t)le64_to_cpu(fle->flc);\n}\n\n \nstatic inline void dpaa2_fl_set_flc(struct dpaa2_fl_entry *fle,\n\t\t\t\t    dma_addr_t flc_addr)\n{\n\tfle->flc = cpu_to_le64(flc_addr);\n}\n\nstatic inline bool dpaa2_fl_short_len(const struct dpaa2_fl_entry *fle)\n{\n\treturn !!((le16_to_cpu(fle->format_offset) >>\n\t\t  FL_SHORT_LEN_FLAG_SHIFT) & FL_SHORT_LEN_FLAG_MASK);\n}\n\n \nstatic inline u32 dpaa2_fl_get_len(const struct dpaa2_fl_entry *fle)\n{\n\tif (dpaa2_fl_short_len(fle))\n\t\treturn le32_to_cpu(fle->len) & FL_SHORT_LEN_MASK;\n\n\treturn le32_to_cpu(fle->len);\n}\n\n \nstatic inline void dpaa2_fl_set_len(struct dpaa2_fl_entry *fle, u32 len)\n{\n\tfle->len = cpu_to_le32(len);\n}\n\n \nstatic inline u16 dpaa2_fl_get_offset(const struct dpaa2_fl_entry *fle)\n{\n\treturn le16_to_cpu(fle->format_offset) & FL_OFFSET_MASK;\n}\n\n \nstatic inline void dpaa2_fl_set_offset(struct dpaa2_fl_entry *fle, u16 offset)\n{\n\tfle->format_offset &= cpu_to_le16(~FL_OFFSET_MASK);\n\tfle->format_offset |= cpu_to_le16(offset);\n}\n\n \nstatic inline enum dpaa2_fl_format dpaa2_fl_get_format(const struct dpaa2_fl_entry *fle)\n{\n\treturn (enum dpaa2_fl_format)((le16_to_cpu(fle->format_offset) >>\n\t\t\t\t       FL_FORMAT_SHIFT) & FL_FORMAT_MASK);\n}\n\n \nstatic inline void dpaa2_fl_set_format(struct dpaa2_fl_entry *fle,\n\t\t\t\t       enum dpaa2_fl_format format)\n{\n\tfle->format_offset &= cpu_to_le16(~(FL_FORMAT_MASK << FL_FORMAT_SHIFT));\n\tfle->format_offset |= cpu_to_le16(format << FL_FORMAT_SHIFT);\n}\n\n \nstatic inline u16 dpaa2_fl_get_bpid(const struct dpaa2_fl_entry *fle)\n{\n\treturn le16_to_cpu(fle->bpid) & FL_BPID_MASK;\n}\n\n \nstatic inline void dpaa2_fl_set_bpid(struct dpaa2_fl_entry *fle, u16 bpid)\n{\n\tfle->bpid &= cpu_to_le16(~(FL_BPID_MASK));\n\tfle->bpid |= cpu_to_le16(bpid);\n}\n\n \nstatic inline bool dpaa2_fl_is_final(const struct dpaa2_fl_entry *fle)\n{\n\treturn !!(le16_to_cpu(fle->format_offset) >> FL_FINAL_FLAG_SHIFT);\n}\n\n \nstatic inline void dpaa2_fl_set_final(struct dpaa2_fl_entry *fle, bool final)\n{\n\tfle->format_offset &= cpu_to_le16((~(FL_FINAL_FLAG_MASK <<\n\t\t\t\t\t     FL_FINAL_FLAG_SHIFT)) & 0xFFFF);\n\tfle->format_offset |= cpu_to_le16(final << FL_FINAL_FLAG_SHIFT);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}