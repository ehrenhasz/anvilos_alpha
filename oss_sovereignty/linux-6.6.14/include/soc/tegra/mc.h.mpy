{
  "module_name": "mc.h",
  "hash_id": "63a99ddc302360ee4f8bef0edda756161f52248103d460c8ddc57b9d183e74af",
  "original_prompt": "Ingested from linux-6.6.14/include/soc/tegra/mc.h",
  "human_readable_source": " \n \n\n#ifndef __SOC_TEGRA_MC_H__\n#define __SOC_TEGRA_MC_H__\n\n#include <linux/bits.h>\n#include <linux/debugfs.h>\n#include <linux/err.h>\n#include <linux/interconnect-provider.h>\n#include <linux/irq.h>\n#include <linux/reset-controller.h>\n#include <linux/types.h>\n#include <linux/tegra-icc.h>\n\nstruct clk;\nstruct device;\nstruct page;\n\nstruct tegra_mc_timing {\n\tunsigned long rate;\n\n\tu32 *emem_data;\n};\n\nstruct tegra_mc_client {\n\tunsigned int id;\n\tunsigned int bpmp_id;\n\tenum tegra_icc_client_type type;\n\tconst char *name;\n\t \n\tunion {\n\t\tunsigned int swgroup;\n\t\tunsigned int sid;\n\t};\n\n\tunsigned int fifo_size;\n\n\tstruct {\n\t\t \n\t\tstruct {\n\t\t\tunsigned int reg;\n\t\t\tunsigned int bit;\n\t\t} smmu;\n\n\t\t \n\t\tstruct {\n\t\t\tunsigned int reg;\n\t\t\tunsigned int shift;\n\t\t\tunsigned int mask;\n\t\t\tunsigned int def;\n\t\t} la;\n\n\t\t \n\t\tstruct {\n\t\t\tunsigned int override;\n\t\t\tunsigned int security;\n\t\t} sid;\n\t} regs;\n};\n\nstruct tegra_smmu_swgroup {\n\tconst char *name;\n\tunsigned int swgroup;\n\tunsigned int reg;\n};\n\nstruct tegra_smmu_group_soc {\n\tconst char *name;\n\tconst unsigned int *swgroups;\n\tunsigned int num_swgroups;\n};\n\nstruct tegra_smmu_soc {\n\tconst struct tegra_mc_client *clients;\n\tunsigned int num_clients;\n\n\tconst struct tegra_smmu_swgroup *swgroups;\n\tunsigned int num_swgroups;\n\n\tconst struct tegra_smmu_group_soc *groups;\n\tunsigned int num_groups;\n\n\tbool supports_round_robin_arbitration;\n\tbool supports_request_limit;\n\n\tunsigned int num_tlb_lines;\n\tunsigned int num_asids;\n};\n\nstruct tegra_mc;\nstruct tegra_smmu;\nstruct gart_device;\n\n#ifdef CONFIG_TEGRA_IOMMU_SMMU\nstruct tegra_smmu *tegra_smmu_probe(struct device *dev,\n\t\t\t\t    const struct tegra_smmu_soc *soc,\n\t\t\t\t    struct tegra_mc *mc);\nvoid tegra_smmu_remove(struct tegra_smmu *smmu);\n#else\nstatic inline struct tegra_smmu *\ntegra_smmu_probe(struct device *dev, const struct tegra_smmu_soc *soc,\n\t\t struct tegra_mc *mc)\n{\n\treturn NULL;\n}\n\nstatic inline void tegra_smmu_remove(struct tegra_smmu *smmu)\n{\n}\n#endif\n\n#ifdef CONFIG_TEGRA_IOMMU_GART\nstruct gart_device *tegra_gart_probe(struct device *dev, struct tegra_mc *mc);\nint tegra_gart_suspend(struct gart_device *gart);\nint tegra_gart_resume(struct gart_device *gart);\n#else\nstatic inline struct gart_device *\ntegra_gart_probe(struct device *dev, struct tegra_mc *mc)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline int tegra_gart_suspend(struct gart_device *gart)\n{\n\treturn -ENODEV;\n}\n\nstatic inline int tegra_gart_resume(struct gart_device *gart)\n{\n\treturn -ENODEV;\n}\n#endif\n\nstruct tegra_mc_reset {\n\tconst char *name;\n\tunsigned long id;\n\tunsigned int control;\n\tunsigned int status;\n\tunsigned int reset;\n\tunsigned int bit;\n};\n\nstruct tegra_mc_reset_ops {\n\tint (*hotreset_assert)(struct tegra_mc *mc,\n\t\t\t       const struct tegra_mc_reset *rst);\n\tint (*hotreset_deassert)(struct tegra_mc *mc,\n\t\t\t\t const struct tegra_mc_reset *rst);\n\tint (*block_dma)(struct tegra_mc *mc,\n\t\t\t const struct tegra_mc_reset *rst);\n\tbool (*dma_idling)(struct tegra_mc *mc,\n\t\t\t   const struct tegra_mc_reset *rst);\n\tint (*unblock_dma)(struct tegra_mc *mc,\n\t\t\t   const struct tegra_mc_reset *rst);\n\tint (*reset_status)(struct tegra_mc *mc,\n\t\t\t    const struct tegra_mc_reset *rst);\n};\n\n#define TEGRA_MC_ICC_TAG_DEFAULT\t\t\t\t0\n#define TEGRA_MC_ICC_TAG_ISO\t\t\t\t\tBIT(0)\n\nstruct tegra_mc_icc_ops {\n\tint (*set)(struct icc_node *src, struct icc_node *dst);\n\tint (*aggregate)(struct icc_node *node, u32 tag, u32 avg_bw,\n\t\t\t u32 peak_bw, u32 *agg_avg, u32 *agg_peak);\n\tstruct icc_node* (*xlate)(struct of_phandle_args *spec, void *data);\n\tstruct icc_node_data *(*xlate_extended)(struct of_phandle_args *spec,\n\t\t\t\t\t\tvoid *data);\n\tint (*get_bw)(struct icc_node *node, u32 *avg, u32 *peak);\n};\n\nstruct icc_node *tegra_mc_icc_xlate(struct of_phandle_args *spec, void *data);\nextern const struct tegra_mc_icc_ops tegra_mc_icc_ops;\n\nstruct tegra_mc_ops {\n\t \n\tint (*probe)(struct tegra_mc *mc);\n\tvoid (*remove)(struct tegra_mc *mc);\n\tint (*suspend)(struct tegra_mc *mc);\n\tint (*resume)(struct tegra_mc *mc);\n\tirqreturn_t (*handle_irq)(int irq, void *data);\n\tint (*probe_device)(struct tegra_mc *mc, struct device *dev);\n};\n\nstruct tegra_mc_soc {\n\tconst struct tegra_mc_client *clients;\n\tunsigned int num_clients;\n\n\tconst unsigned long *emem_regs;\n\tunsigned int num_emem_regs;\n\n\tunsigned int num_address_bits;\n\tunsigned int atom_size;\n\n\tunsigned int num_carveouts;\n\n\tu16 client_id_mask;\n\tu8 num_channels;\n\n\tconst struct tegra_smmu_soc *smmu;\n\n\tu32 intmask;\n\tu32 ch_intmask;\n\tu32 global_intstatus_channel_shift;\n\tbool has_addr_hi_reg;\n\n\tconst struct tegra_mc_reset_ops *reset_ops;\n\tconst struct tegra_mc_reset *resets;\n\tunsigned int num_resets;\n\n\tconst struct tegra_mc_icc_ops *icc_ops;\n\tconst struct tegra_mc_ops *ops;\n};\n\nstruct tegra_mc {\n\tstruct tegra_bpmp *bpmp;\n\tstruct device *dev;\n\tstruct tegra_smmu *smmu;\n\tstruct gart_device *gart;\n\tvoid __iomem *regs;\n\tvoid __iomem *bcast_ch_regs;\n\tvoid __iomem **ch_regs;\n\tstruct clk *clk;\n\tint irq;\n\n\tconst struct tegra_mc_soc *soc;\n\tunsigned long tick;\n\n\tstruct tegra_mc_timing *timings;\n\tunsigned int num_timings;\n\tunsigned int num_channels;\n\n\tbool bwmgr_mrq_supported;\n\tstruct reset_controller_dev reset;\n\n\tstruct icc_provider provider;\n\n\tspinlock_t lock;\n\n\tstruct {\n\t\tstruct dentry *root;\n\t} debugfs;\n};\n\nint tegra_mc_write_emem_configuration(struct tegra_mc *mc, unsigned long rate);\nunsigned int tegra_mc_get_emem_device_count(struct tegra_mc *mc);\n\n#ifdef CONFIG_TEGRA_MC\nstruct tegra_mc *devm_tegra_memory_controller_get(struct device *dev);\nint tegra_mc_probe_device(struct tegra_mc *mc, struct device *dev);\nint tegra_mc_get_carveout_info(struct tegra_mc *mc, unsigned int id,\n                               phys_addr_t *base, u64 *size);\n#else\nstatic inline struct tegra_mc *\ndevm_tegra_memory_controller_get(struct device *dev)\n{\n\treturn ERR_PTR(-ENODEV);\n}\n\nstatic inline int\ntegra_mc_probe_device(struct tegra_mc *mc, struct device *dev)\n{\n\treturn -ENODEV;\n}\n\nstatic inline int\ntegra_mc_get_carveout_info(struct tegra_mc *mc, unsigned int id,\n                           phys_addr_t *base, u64 *size)\n{\n\treturn -ENODEV;\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}