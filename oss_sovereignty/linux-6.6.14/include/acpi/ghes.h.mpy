{
  "module_name": "ghes.h",
  "hash_id": "4a27634a127d8b21fb813fb27dbcf4e1170299a014d2a6a19d77c7aad8952ce8",
  "original_prompt": "Ingested from linux-6.6.14/include/acpi/ghes.h",
  "human_readable_source": " \n#ifndef GHES_H\n#define GHES_H\n\n#include <acpi/apei.h>\n#include <acpi/hed.h>\n\n \n#define GHES_EXITING\t\t0x0002\n\nstruct ghes {\n\tunion {\n\t\tstruct acpi_hest_generic *generic;\n\t\tstruct acpi_hest_generic_v2 *generic_v2;\n\t};\n\tstruct acpi_hest_generic_status *estatus;\n\tunsigned long flags;\n\tunion {\n\t\tstruct list_head list;\n\t\tstruct timer_list timer;\n\t\tunsigned int irq;\n\t};\n\tstruct device *dev;\n\tstruct list_head elist;\n};\n\nstruct ghes_estatus_node {\n\tstruct llist_node llnode;\n\tstruct acpi_hest_generic *generic;\n\tstruct ghes *ghes;\n\n\tint task_work_cpu;\n\tstruct callback_head task_work;\n};\n\nstruct ghes_estatus_cache {\n\tu32 estatus_len;\n\tatomic_t count;\n\tstruct acpi_hest_generic *generic;\n\tunsigned long long time_in;\n\tstruct rcu_head rcu;\n};\n\nenum {\n\tGHES_SEV_NO = 0x0,\n\tGHES_SEV_CORRECTED = 0x1,\n\tGHES_SEV_RECOVERABLE = 0x2,\n\tGHES_SEV_PANIC = 0x3,\n};\n\n#ifdef CONFIG_ACPI_APEI_GHES\n \nint ghes_register_vendor_record_notifier(struct notifier_block *nb);\n\n \nvoid ghes_unregister_vendor_record_notifier(struct notifier_block *nb);\n\nstruct list_head *ghes_get_devices(void);\n\nvoid ghes_estatus_pool_region_free(unsigned long addr, u32 size);\n#else\nstatic inline struct list_head *ghes_get_devices(void) { return NULL; }\n\nstatic inline void ghes_estatus_pool_region_free(unsigned long addr, u32 size) { return; }\n#endif\n\nint ghes_estatus_pool_init(unsigned int num_ghes);\n\nstatic inline int acpi_hest_get_version(struct acpi_hest_generic_data *gdata)\n{\n\treturn gdata->revision >> 8;\n}\n\nstatic inline void *acpi_hest_get_payload(struct acpi_hest_generic_data *gdata)\n{\n\tif (acpi_hest_get_version(gdata) >= 3)\n\t\treturn (void *)(((struct acpi_hest_generic_data_v300 *)(gdata)) + 1);\n\n\treturn gdata + 1;\n}\n\nstatic inline int acpi_hest_get_error_length(struct acpi_hest_generic_data *gdata)\n{\n\treturn ((struct acpi_hest_generic_data *)(gdata))->error_data_length;\n}\n\nstatic inline int acpi_hest_get_size(struct acpi_hest_generic_data *gdata)\n{\n\tif (acpi_hest_get_version(gdata) >= 3)\n\t\treturn sizeof(struct acpi_hest_generic_data_v300);\n\n\treturn sizeof(struct acpi_hest_generic_data);\n}\n\nstatic inline int acpi_hest_get_record_size(struct acpi_hest_generic_data *gdata)\n{\n\treturn (acpi_hest_get_size(gdata) + acpi_hest_get_error_length(gdata));\n}\n\nstatic inline void *acpi_hest_get_next(struct acpi_hest_generic_data *gdata)\n{\n\treturn (void *)(gdata) + acpi_hest_get_record_size(gdata);\n}\n\n#define apei_estatus_for_each_section(estatus, section)\t\t\t\\\n\tfor (section = (struct acpi_hest_generic_data *)(estatus + 1);\t\\\n\t     (void *)section - (void *)(estatus + 1) < estatus->data_length; \\\n\t     section = acpi_hest_get_next(section))\n\n#ifdef CONFIG_ACPI_APEI_SEA\nint ghes_notify_sea(void);\n#else\nstatic inline int ghes_notify_sea(void) { return -ENOENT; }\n#endif\n\nstruct notifier_block;\nextern void ghes_register_report_chain(struct notifier_block *nb);\nextern void ghes_unregister_report_chain(struct notifier_block *nb);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}