{
  "module_name": "addr.h",
  "hash_id": "f87883cbe575c8536c6006746e0e02d7ae60f0a4b722af92dfec13ef640d0fab",
  "original_prompt": "Ingested from linux-6.6.14/net/tipc/addr.h",
  "human_readable_source": " \n\n#ifndef _TIPC_ADDR_H\n#define _TIPC_ADDR_H\n\n#include <linux/types.h>\n#include <linux/tipc.h>\n#include <net/net_namespace.h>\n#include <net/netns/generic.h>\n#include \"core.h\"\n\n \nstruct tipc_uaddr {\n\tunsigned short family;\n\tunsigned char addrtype;\n\tsigned char scope;\n\tunion {\n\t\tstruct {\n\t\t\tstruct tipc_service_addr sa;\n\t\t\tu32 lookup_node;\n\t\t};\n\t\tstruct tipc_service_range sr;\n\t\tstruct tipc_socket_addr sk;\n\t};\n};\n\nstatic inline void tipc_uaddr(struct tipc_uaddr *ua, u32 atype, u32 scope,\n\t\t\t      u32 type, u32 lower, u32 upper)\n{\n\tua->family = AF_TIPC;\n\tua->addrtype = atype;\n\tua->scope = scope;\n\tua->sr.type = type;\n\tua->sr.lower = lower;\n\tua->sr.upper = upper;\n}\n\nstatic inline bool tipc_uaddr_valid(struct tipc_uaddr *ua, int len)\n{\n\tu32 atype;\n\n\tif (len < sizeof(struct sockaddr_tipc))\n\t\treturn false;\n\tatype = ua->addrtype;\n\tif (ua->family != AF_TIPC)\n\t\treturn false;\n\tif (atype == TIPC_SERVICE_ADDR || atype == TIPC_SOCKET_ADDR)\n\t\treturn true;\n\tif (atype == TIPC_SERVICE_RANGE)\n\t\treturn ua->sr.upper >= ua->sr.lower;\n\treturn false;\n}\n\nstatic inline u32 tipc_own_addr(struct net *net)\n{\n\treturn tipc_net(net)->node_addr;\n}\n\nstatic inline u8 *tipc_own_id(struct net *net)\n{\n\tstruct tipc_net *tn = tipc_net(net);\n\n\tif (!strlen(tn->node_id_string))\n\t\treturn NULL;\n\treturn tn->node_id;\n}\n\nstatic inline char *tipc_own_id_string(struct net *net)\n{\n\treturn tipc_net(net)->node_id_string;\n}\n\nstatic inline u32 tipc_cluster_mask(u32 addr)\n{\n\treturn addr & TIPC_ZONE_CLUSTER_MASK;\n}\n\nstatic inline int tipc_node2scope(u32 node)\n{\n\treturn node ? TIPC_NODE_SCOPE : TIPC_CLUSTER_SCOPE;\n}\n\nstatic inline int tipc_scope2node(struct net *net, int sc)\n{\n\treturn sc != TIPC_NODE_SCOPE ? 0 : tipc_own_addr(net);\n}\n\nstatic inline int in_own_node(struct net *net, u32 addr)\n{\n\treturn addr == tipc_own_addr(net) || !addr;\n}\n\nbool tipc_in_scope(bool legacy_format, u32 domain, u32 addr);\nvoid tipc_set_node_id(struct net *net, u8 *id);\nvoid tipc_set_node_addr(struct net *net, u32 addr);\nchar *tipc_nodeid2string(char *str, u8 *id);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}