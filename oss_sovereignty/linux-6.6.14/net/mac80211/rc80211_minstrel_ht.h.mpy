{
  "module_name": "rc80211_minstrel_ht.h",
  "hash_id": "eac87d4667a0fc8a8e559ba4a61adf884b7a0aebff0e0f67a85469dd533b9faa",
  "original_prompt": "Ingested from linux-6.6.14/net/mac80211/rc80211_minstrel_ht.h",
  "human_readable_source": " \n \n\n#ifndef __RC_MINSTREL_HT_H\n#define __RC_MINSTREL_HT_H\n\n#include <linux/bitfield.h>\n\n \n#define MAX_THR_RATES 4\n#define SAMPLE_COLUMNS\t10\t \n\n \n#define MINSTREL_SCALE  12\n#define MINSTREL_FRAC(val, div) (((val) << MINSTREL_SCALE) / div)\n#define MINSTREL_TRUNC(val) ((val) >> MINSTREL_SCALE)\n\n#define EWMA_LEVEL\t96\t \n#define EWMA_DIV\t128\n\n \n#define MINSTREL_AVG_COEFF1\t\t(MINSTREL_FRAC(1, 1) - \\\n\t\t\t\t\t MINSTREL_AVG_COEFF2 - \\\n\t\t\t\t\t MINSTREL_AVG_COEFF3)\n#define MINSTREL_AVG_COEFF2\t\t0x00001499\n#define MINSTREL_AVG_COEFF3\t\t-0x0000092e\n\n \n#define MINSTREL_MAX_STREAMS\t\t4\n#define MINSTREL_HT_STREAM_GROUPS\t4  \n#define MINSTREL_VHT_STREAM_GROUPS\t6  \n\n#define MINSTREL_HT_GROUPS_NB\t(MINSTREL_MAX_STREAMS *\t\t\\\n\t\t\t\t MINSTREL_HT_STREAM_GROUPS)\n#define MINSTREL_VHT_GROUPS_NB\t(MINSTREL_MAX_STREAMS *\t\t\\\n\t\t\t\t MINSTREL_VHT_STREAM_GROUPS)\n#define MINSTREL_LEGACY_GROUPS_NB\t2\n#define MINSTREL_GROUPS_NB\t(MINSTREL_HT_GROUPS_NB +\t\\\n\t\t\t\t MINSTREL_VHT_GROUPS_NB +\t\\\n\t\t\t\t MINSTREL_LEGACY_GROUPS_NB)\n\n#define MINSTREL_HT_GROUP_0\t0\n#define MINSTREL_CCK_GROUP\t(MINSTREL_HT_GROUP_0 + MINSTREL_HT_GROUPS_NB)\n#define MINSTREL_OFDM_GROUP\t(MINSTREL_CCK_GROUP + 1)\n#define MINSTREL_VHT_GROUP_0\t(MINSTREL_OFDM_GROUP + 1)\n\n#define MCS_GROUP_RATES\t\t10\n\n#define MI_RATE_IDX_MASK\tGENMASK(3, 0)\n#define MI_RATE_GROUP_MASK\tGENMASK(15, 4)\n\n#define MI_RATE(_group, _idx)\t\t\t\t\\\n\t(FIELD_PREP(MI_RATE_GROUP_MASK, _group) |\t\\\n\t FIELD_PREP(MI_RATE_IDX_MASK, _idx))\n\n#define MI_RATE_IDX(_rate) FIELD_GET(MI_RATE_IDX_MASK, _rate)\n#define MI_RATE_GROUP(_rate) FIELD_GET(MI_RATE_GROUP_MASK, _rate)\n\n#define MINSTREL_SAMPLE_RATES\t\t5  \n#define MINSTREL_SAMPLE_INTERVAL\t(HZ / 50)\n\nstruct minstrel_priv {\n\tstruct ieee80211_hw *hw;\n\tunsigned int cw_min;\n\tunsigned int cw_max;\n\tunsigned int max_retry;\n\tunsigned int segment_size;\n\tunsigned int update_interval;\n\n\tu8 cck_rates[4];\n\tu8 ofdm_rates[NUM_NL80211_BANDS][8];\n\n#ifdef CONFIG_MAC80211_DEBUGFS\n\t \n\tu32 fixed_rate_idx;\n#endif\n};\n\n\nstruct mcs_group {\n\tu16 flags;\n\tu8 streams;\n\tu8 shift;\n\tu8 bw;\n\tu16 duration[MCS_GROUP_RATES];\n};\n\nextern const s16 minstrel_cck_bitrates[4];\nextern const s16 minstrel_ofdm_bitrates[8];\nextern const struct mcs_group minstrel_mcs_groups[];\n\nstruct minstrel_rate_stats {\n\t \n\tu16 attempts, last_attempts;\n\tu16 success, last_success;\n\n\t \n\tu32 att_hist, succ_hist;\n\n\t \n\tu16 prob_avg;\n\tu16 prob_avg_1;\n\n\t \n\tu8 retry_count;\n\tu8 retry_count_rtscts;\n\n\tbool retry_updated;\n};\n\nenum minstrel_sample_type {\n\tMINSTREL_SAMPLE_TYPE_INC,\n\tMINSTREL_SAMPLE_TYPE_JUMP,\n\tMINSTREL_SAMPLE_TYPE_SLOW,\n\t__MINSTREL_SAMPLE_TYPE_MAX\n};\n\nstruct minstrel_mcs_group_data {\n\tu8 index;\n\tu8 column;\n\n\t \n\tu16 max_group_tp_rate[MAX_THR_RATES];\n\tu16 max_group_prob_rate;\n\n\t \n\tstruct minstrel_rate_stats rates[MCS_GROUP_RATES];\n};\n\nstruct minstrel_sample_category {\n\tu8 sample_group;\n\tu16 sample_rates[MINSTREL_SAMPLE_RATES];\n\tu16 cur_sample_rates[MINSTREL_SAMPLE_RATES];\n};\n\nstruct minstrel_ht_sta {\n\tstruct ieee80211_sta *sta;\n\n\t \n\tunsigned int ampdu_len;\n\tunsigned int ampdu_packets;\n\n\t \n\tunsigned int avg_ampdu_len;\n\n\t \n\tu16 max_tp_rate[MAX_THR_RATES];\n\tu16 max_prob_rate;\n\n\t \n\tunsigned long last_stats_update;\n\n\t \n\tunsigned int overhead;\n\tunsigned int overhead_rtscts;\n\tunsigned int overhead_legacy;\n\tunsigned int overhead_legacy_rtscts;\n\n\tunsigned int total_packets;\n\tunsigned int sample_packets;\n\n\t \n\tu32 tx_flags;\n\tbool use_short_preamble;\n\tu8 band;\n\n\tu8 sample_seq;\n\tu16 sample_rate;\n\n\tunsigned long sample_time;\n\tstruct minstrel_sample_category sample[__MINSTREL_SAMPLE_TYPE_MAX];\n\n\t \n\tu16 supported[MINSTREL_GROUPS_NB];\n\n\t \n\tstruct minstrel_mcs_group_data groups[MINSTREL_GROUPS_NB];\n};\n\nvoid minstrel_ht_add_sta_debugfs(void *priv, void *priv_sta, struct dentry *dir);\nint minstrel_ht_get_tp_avg(struct minstrel_ht_sta *mi, int group, int rate,\n\t\t\t   int prob_avg);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}