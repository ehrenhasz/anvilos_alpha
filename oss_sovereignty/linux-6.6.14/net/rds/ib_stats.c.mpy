{
  "module_name": "ib_stats.c",
  "hash_id": "5dd5b74dc006505e507e3e9dad9fc311a4a6efa217c37eef3051707952315b9b",
  "original_prompt": "Ingested from linux-6.6.14/net/rds/ib_stats.c",
  "human_readable_source": " \n#include <linux/percpu.h>\n#include <linux/seq_file.h>\n#include <linux/proc_fs.h>\n\n#include \"rds.h\"\n#include \"ib.h\"\n\nDEFINE_PER_CPU_SHARED_ALIGNED(struct rds_ib_statistics, rds_ib_stats);\n\nstatic const char *const rds_ib_stat_names[] = {\n\t\"ib_connect_raced\",\n\t\"ib_listen_closed_stale\",\n\t\"ib_evt_handler_call\",\n\t\"ib_tasklet_call\",\n\t\"ib_tx_cq_event\",\n\t\"ib_tx_ring_full\",\n\t\"ib_tx_throttle\",\n\t\"ib_tx_sg_mapping_failure\",\n\t\"ib_tx_stalled\",\n\t\"ib_tx_credit_updates\",\n\t\"ib_rx_cq_event\",\n\t\"ib_rx_ring_empty\",\n\t\"ib_rx_refill_from_cq\",\n\t\"ib_rx_refill_from_thread\",\n\t\"ib_rx_alloc_limit\",\n\t\"ib_rx_total_frags\",\n\t\"ib_rx_total_incs\",\n\t\"ib_rx_credit_updates\",\n\t\"ib_ack_sent\",\n\t\"ib_ack_send_failure\",\n\t\"ib_ack_send_delayed\",\n\t\"ib_ack_send_piggybacked\",\n\t\"ib_ack_received\",\n\t\"ib_rdma_mr_8k_alloc\",\n\t\"ib_rdma_mr_8k_free\",\n\t\"ib_rdma_mr_8k_used\",\n\t\"ib_rdma_mr_8k_pool_flush\",\n\t\"ib_rdma_mr_8k_pool_wait\",\n\t\"ib_rdma_mr_8k_pool_depleted\",\n\t\"ib_rdma_mr_1m_alloc\",\n\t\"ib_rdma_mr_1m_free\",\n\t\"ib_rdma_mr_1m_used\",\n\t\"ib_rdma_mr_1m_pool_flush\",\n\t\"ib_rdma_mr_1m_pool_wait\",\n\t\"ib_rdma_mr_1m_pool_depleted\",\n\t\"ib_rdma_mr_8k_reused\",\n\t\"ib_rdma_mr_1m_reused\",\n\t\"ib_atomic_cswp\",\n\t\"ib_atomic_fadd\",\n};\n\nunsigned int rds_ib_stats_info_copy(struct rds_info_iterator *iter,\n\t\t\t\t    unsigned int avail)\n{\n\tstruct rds_ib_statistics stats = {0, };\n\tuint64_t *src;\n\tuint64_t *sum;\n\tsize_t i;\n\tint cpu;\n\n\tif (avail < ARRAY_SIZE(rds_ib_stat_names))\n\t\tgoto out;\n\n\tfor_each_online_cpu(cpu) {\n\t\tsrc = (uint64_t *)&(per_cpu(rds_ib_stats, cpu));\n\t\tsum = (uint64_t *)&stats;\n\t\tfor (i = 0; i < sizeof(stats) / sizeof(uint64_t); i++)\n\t\t\t*(sum++) += *(src++);\n\t}\n\n\trds_stats_info_copy(iter, (uint64_t *)&stats, rds_ib_stat_names,\n\t\t\t    ARRAY_SIZE(rds_ib_stat_names));\nout:\n\treturn ARRAY_SIZE(rds_ib_stat_names);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}