{
  "module_name": "common.c",
  "hash_id": "7dac640fc24af25466797cda011ee25ec813e570c963d2f1089a0fb08f61f4d0",
  "original_prompt": "Ingested from linux-6.6.14/net/ethtool/common.c",
  "human_readable_source": "\n\n#include <linux/ethtool_netlink.h>\n#include <linux/net_tstamp.h>\n#include <linux/phy.h>\n#include <linux/rtnetlink.h>\n#include <linux/ptp_clock_kernel.h>\n\n#include \"common.h\"\n\nconst char netdev_features_strings[NETDEV_FEATURE_COUNT][ETH_GSTRING_LEN] = {\n\t[NETIF_F_SG_BIT] =               \"tx-scatter-gather\",\n\t[NETIF_F_IP_CSUM_BIT] =          \"tx-checksum-ipv4\",\n\t[NETIF_F_HW_CSUM_BIT] =          \"tx-checksum-ip-generic\",\n\t[NETIF_F_IPV6_CSUM_BIT] =        \"tx-checksum-ipv6\",\n\t[NETIF_F_HIGHDMA_BIT] =          \"highdma\",\n\t[NETIF_F_FRAGLIST_BIT] =         \"tx-scatter-gather-fraglist\",\n\t[NETIF_F_HW_VLAN_CTAG_TX_BIT] =  \"tx-vlan-hw-insert\",\n\n\t[NETIF_F_HW_VLAN_CTAG_RX_BIT] =  \"rx-vlan-hw-parse\",\n\t[NETIF_F_HW_VLAN_CTAG_FILTER_BIT] = \"rx-vlan-filter\",\n\t[NETIF_F_HW_VLAN_STAG_TX_BIT] =  \"tx-vlan-stag-hw-insert\",\n\t[NETIF_F_HW_VLAN_STAG_RX_BIT] =  \"rx-vlan-stag-hw-parse\",\n\t[NETIF_F_HW_VLAN_STAG_FILTER_BIT] = \"rx-vlan-stag-filter\",\n\t[NETIF_F_VLAN_CHALLENGED_BIT] =  \"vlan-challenged\",\n\t[NETIF_F_GSO_BIT] =              \"tx-generic-segmentation\",\n\t[NETIF_F_LLTX_BIT] =             \"tx-lockless\",\n\t[NETIF_F_NETNS_LOCAL_BIT] =      \"netns-local\",\n\t[NETIF_F_GRO_BIT] =              \"rx-gro\",\n\t[NETIF_F_GRO_HW_BIT] =           \"rx-gro-hw\",\n\t[NETIF_F_LRO_BIT] =              \"rx-lro\",\n\n\t[NETIF_F_TSO_BIT] =              \"tx-tcp-segmentation\",\n\t[NETIF_F_GSO_ROBUST_BIT] =       \"tx-gso-robust\",\n\t[NETIF_F_TSO_ECN_BIT] =          \"tx-tcp-ecn-segmentation\",\n\t[NETIF_F_TSO_MANGLEID_BIT] =\t \"tx-tcp-mangleid-segmentation\",\n\t[NETIF_F_TSO6_BIT] =             \"tx-tcp6-segmentation\",\n\t[NETIF_F_FSO_BIT] =              \"tx-fcoe-segmentation\",\n\t[NETIF_F_GSO_GRE_BIT] =\t\t \"tx-gre-segmentation\",\n\t[NETIF_F_GSO_GRE_CSUM_BIT] =\t \"tx-gre-csum-segmentation\",\n\t[NETIF_F_GSO_IPXIP4_BIT] =\t \"tx-ipxip4-segmentation\",\n\t[NETIF_F_GSO_IPXIP6_BIT] =\t \"tx-ipxip6-segmentation\",\n\t[NETIF_F_GSO_UDP_TUNNEL_BIT] =\t \"tx-udp_tnl-segmentation\",\n\t[NETIF_F_GSO_UDP_TUNNEL_CSUM_BIT] = \"tx-udp_tnl-csum-segmentation\",\n\t[NETIF_F_GSO_PARTIAL_BIT] =\t \"tx-gso-partial\",\n\t[NETIF_F_GSO_TUNNEL_REMCSUM_BIT] = \"tx-tunnel-remcsum-segmentation\",\n\t[NETIF_F_GSO_SCTP_BIT] =\t \"tx-sctp-segmentation\",\n\t[NETIF_F_GSO_ESP_BIT] =\t\t \"tx-esp-segmentation\",\n\t[NETIF_F_GSO_UDP_L4_BIT] =\t \"tx-udp-segmentation\",\n\t[NETIF_F_GSO_FRAGLIST_BIT] =\t \"tx-gso-list\",\n\n\t[NETIF_F_FCOE_CRC_BIT] =         \"tx-checksum-fcoe-crc\",\n\t[NETIF_F_SCTP_CRC_BIT] =        \"tx-checksum-sctp\",\n\t[NETIF_F_FCOE_MTU_BIT] =         \"fcoe-mtu\",\n\t[NETIF_F_NTUPLE_BIT] =           \"rx-ntuple-filter\",\n\t[NETIF_F_RXHASH_BIT] =           \"rx-hashing\",\n\t[NETIF_F_RXCSUM_BIT] =           \"rx-checksum\",\n\t[NETIF_F_NOCACHE_COPY_BIT] =     \"tx-nocache-copy\",\n\t[NETIF_F_LOOPBACK_BIT] =         \"loopback\",\n\t[NETIF_F_RXFCS_BIT] =            \"rx-fcs\",\n\t[NETIF_F_RXALL_BIT] =            \"rx-all\",\n\t[NETIF_F_HW_L2FW_DOFFLOAD_BIT] = \"l2-fwd-offload\",\n\t[NETIF_F_HW_TC_BIT] =\t\t \"hw-tc-offload\",\n\t[NETIF_F_HW_ESP_BIT] =\t\t \"esp-hw-offload\",\n\t[NETIF_F_HW_ESP_TX_CSUM_BIT] =\t \"esp-tx-csum-hw-offload\",\n\t[NETIF_F_RX_UDP_TUNNEL_PORT_BIT] =\t \"rx-udp_tunnel-port-offload\",\n\t[NETIF_F_HW_TLS_RECORD_BIT] =\t\"tls-hw-record\",\n\t[NETIF_F_HW_TLS_TX_BIT] =\t \"tls-hw-tx-offload\",\n\t[NETIF_F_HW_TLS_RX_BIT] =\t \"tls-hw-rx-offload\",\n\t[NETIF_F_GRO_FRAGLIST_BIT] =\t \"rx-gro-list\",\n\t[NETIF_F_HW_MACSEC_BIT] =\t \"macsec-hw-offload\",\n\t[NETIF_F_GRO_UDP_FWD_BIT] =\t \"rx-udp-gro-forwarding\",\n\t[NETIF_F_HW_HSR_TAG_INS_BIT] =\t \"hsr-tag-ins-offload\",\n\t[NETIF_F_HW_HSR_TAG_RM_BIT] =\t \"hsr-tag-rm-offload\",\n\t[NETIF_F_HW_HSR_FWD_BIT] =\t \"hsr-fwd-offload\",\n\t[NETIF_F_HW_HSR_DUP_BIT] =\t \"hsr-dup-offload\",\n};\n\nconst char\nrss_hash_func_strings[ETH_RSS_HASH_FUNCS_COUNT][ETH_GSTRING_LEN] = {\n\t[ETH_RSS_HASH_TOP_BIT] =\t\"toeplitz\",\n\t[ETH_RSS_HASH_XOR_BIT] =\t\"xor\",\n\t[ETH_RSS_HASH_CRC32_BIT] =\t\"crc32\",\n};\n\nconst char\ntunable_strings[__ETHTOOL_TUNABLE_COUNT][ETH_GSTRING_LEN] = {\n\t[ETHTOOL_ID_UNSPEC]     = \"Unspec\",\n\t[ETHTOOL_RX_COPYBREAK]\t= \"rx-copybreak\",\n\t[ETHTOOL_TX_COPYBREAK]\t= \"tx-copybreak\",\n\t[ETHTOOL_PFC_PREVENTION_TOUT] = \"pfc-prevention-tout\",\n\t[ETHTOOL_TX_COPYBREAK_BUF_SIZE] = \"tx-copybreak-buf-size\",\n};\n\nconst char\nphy_tunable_strings[__ETHTOOL_PHY_TUNABLE_COUNT][ETH_GSTRING_LEN] = {\n\t[ETHTOOL_ID_UNSPEC]     = \"Unspec\",\n\t[ETHTOOL_PHY_DOWNSHIFT]\t= \"phy-downshift\",\n\t[ETHTOOL_PHY_FAST_LINK_DOWN] = \"phy-fast-link-down\",\n\t[ETHTOOL_PHY_EDPD]\t= \"phy-energy-detect-power-down\",\n};\n\n#define __LINK_MODE_NAME(speed, type, duplex) \\\n\t#speed \"base\" #type \"/\" #duplex\n#define __DEFINE_LINK_MODE_NAME(speed, type, duplex) \\\n\t[ETHTOOL_LINK_MODE(speed, type, duplex)] = \\\n\t__LINK_MODE_NAME(speed, type, duplex)\n#define __DEFINE_SPECIAL_MODE_NAME(_mode, _name) \\\n\t[ETHTOOL_LINK_MODE_ ## _mode ## _BIT] = _name\n\nconst char link_mode_names[][ETH_GSTRING_LEN] = {\n\t__DEFINE_LINK_MODE_NAME(10, T, Half),\n\t__DEFINE_LINK_MODE_NAME(10, T, Full),\n\t__DEFINE_LINK_MODE_NAME(100, T, Half),\n\t__DEFINE_LINK_MODE_NAME(100, T, Full),\n\t__DEFINE_LINK_MODE_NAME(1000, T, Half),\n\t__DEFINE_LINK_MODE_NAME(1000, T, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(Autoneg, \"Autoneg\"),\n\t__DEFINE_SPECIAL_MODE_NAME(TP, \"TP\"),\n\t__DEFINE_SPECIAL_MODE_NAME(AUI, \"AUI\"),\n\t__DEFINE_SPECIAL_MODE_NAME(MII, \"MII\"),\n\t__DEFINE_SPECIAL_MODE_NAME(FIBRE, \"FIBRE\"),\n\t__DEFINE_SPECIAL_MODE_NAME(BNC, \"BNC\"),\n\t__DEFINE_LINK_MODE_NAME(10000, T, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(Pause, \"Pause\"),\n\t__DEFINE_SPECIAL_MODE_NAME(Asym_Pause, \"Asym_Pause\"),\n\t__DEFINE_LINK_MODE_NAME(2500, X, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(Backplane, \"Backplane\"),\n\t__DEFINE_LINK_MODE_NAME(1000, KX, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, KX4, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, KR, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(10000baseR_FEC, \"10000baseR_FEC\"),\n\t__DEFINE_LINK_MODE_NAME(20000, MLD2, Full),\n\t__DEFINE_LINK_MODE_NAME(20000, KR2, Full),\n\t__DEFINE_LINK_MODE_NAME(40000, KR4, Full),\n\t__DEFINE_LINK_MODE_NAME(40000, CR4, Full),\n\t__DEFINE_LINK_MODE_NAME(40000, SR4, Full),\n\t__DEFINE_LINK_MODE_NAME(40000, LR4, Full),\n\t__DEFINE_LINK_MODE_NAME(56000, KR4, Full),\n\t__DEFINE_LINK_MODE_NAME(56000, CR4, Full),\n\t__DEFINE_LINK_MODE_NAME(56000, SR4, Full),\n\t__DEFINE_LINK_MODE_NAME(56000, LR4, Full),\n\t__DEFINE_LINK_MODE_NAME(25000, CR, Full),\n\t__DEFINE_LINK_MODE_NAME(25000, KR, Full),\n\t__DEFINE_LINK_MODE_NAME(25000, SR, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, CR2, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, KR2, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, KR4, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, SR4, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, CR4, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, LR4_ER4, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, SR2, Full),\n\t__DEFINE_LINK_MODE_NAME(1000, X, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, CR, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, SR, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, LR, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, LRM, Full),\n\t__DEFINE_LINK_MODE_NAME(10000, ER, Full),\n\t__DEFINE_LINK_MODE_NAME(2500, T, Full),\n\t__DEFINE_LINK_MODE_NAME(5000, T, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(FEC_NONE, \"None\"),\n\t__DEFINE_SPECIAL_MODE_NAME(FEC_RS, \"RS\"),\n\t__DEFINE_SPECIAL_MODE_NAME(FEC_BASER, \"BASER\"),\n\t__DEFINE_LINK_MODE_NAME(50000, KR, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, SR, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, CR, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, LR_ER_FR, Full),\n\t__DEFINE_LINK_MODE_NAME(50000, DR, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, KR2, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, SR2, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, CR2, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, LR2_ER2_FR2, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, DR2, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, KR4, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, SR4, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, LR4_ER4_FR4, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, DR4, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, CR4, Full),\n\t__DEFINE_LINK_MODE_NAME(100, T1, Full),\n\t__DEFINE_LINK_MODE_NAME(1000, T1, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, KR8, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, SR8, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, LR8_ER8_FR8, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, DR8, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, CR8, Full),\n\t__DEFINE_SPECIAL_MODE_NAME(FEC_LLRS, \"LLRS\"),\n\t__DEFINE_LINK_MODE_NAME(100000, KR, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, SR, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, LR_ER_FR, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, DR, Full),\n\t__DEFINE_LINK_MODE_NAME(100000, CR, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, KR2, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, SR2, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, LR2_ER2_FR2, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, DR2, Full),\n\t__DEFINE_LINK_MODE_NAME(200000, CR2, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, KR4, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, SR4, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, LR4_ER4_FR4, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, DR4, Full),\n\t__DEFINE_LINK_MODE_NAME(400000, CR4, Full),\n\t__DEFINE_LINK_MODE_NAME(100, FX, Half),\n\t__DEFINE_LINK_MODE_NAME(100, FX, Full),\n\t__DEFINE_LINK_MODE_NAME(10, T1L, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, CR8, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, KR8, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, DR8, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, DR8_2, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, SR8, Full),\n\t__DEFINE_LINK_MODE_NAME(800000, VR8, Full),\n\t__DEFINE_LINK_MODE_NAME(10, T1S, Full),\n\t__DEFINE_LINK_MODE_NAME(10, T1S, Half),\n\t__DEFINE_LINK_MODE_NAME(10, T1S_P2MP, Half),\n};\nstatic_assert(ARRAY_SIZE(link_mode_names) == __ETHTOOL_LINK_MODE_MASK_NBITS);\n\n#define __LINK_MODE_LANES_CR\t\t1\n#define __LINK_MODE_LANES_CR2\t\t2\n#define __LINK_MODE_LANES_CR4\t\t4\n#define __LINK_MODE_LANES_CR8\t\t8\n#define __LINK_MODE_LANES_DR\t\t1\n#define __LINK_MODE_LANES_DR2\t\t2\n#define __LINK_MODE_LANES_DR4\t\t4\n#define __LINK_MODE_LANES_DR8\t\t8\n#define __LINK_MODE_LANES_KR\t\t1\n#define __LINK_MODE_LANES_KR2\t\t2\n#define __LINK_MODE_LANES_KR4\t\t4\n#define __LINK_MODE_LANES_KR8\t\t8\n#define __LINK_MODE_LANES_SR\t\t1\n#define __LINK_MODE_LANES_SR2\t\t2\n#define __LINK_MODE_LANES_SR4\t\t4\n#define __LINK_MODE_LANES_SR8\t\t8\n#define __LINK_MODE_LANES_ER\t\t1\n#define __LINK_MODE_LANES_KX\t\t1\n#define __LINK_MODE_LANES_KX4\t\t4\n#define __LINK_MODE_LANES_LR\t\t1\n#define __LINK_MODE_LANES_LR4\t\t4\n#define __LINK_MODE_LANES_LR4_ER4\t4\n#define __LINK_MODE_LANES_LR_ER_FR\t1\n#define __LINK_MODE_LANES_LR2_ER2_FR2\t2\n#define __LINK_MODE_LANES_LR4_ER4_FR4\t4\n#define __LINK_MODE_LANES_LR8_ER8_FR8\t8\n#define __LINK_MODE_LANES_LRM\t\t1\n#define __LINK_MODE_LANES_MLD2\t\t2\n#define __LINK_MODE_LANES_T\t\t1\n#define __LINK_MODE_LANES_T1\t\t1\n#define __LINK_MODE_LANES_X\t\t1\n#define __LINK_MODE_LANES_FX\t\t1\n#define __LINK_MODE_LANES_T1L\t\t1\n#define __LINK_MODE_LANES_T1S\t\t1\n#define __LINK_MODE_LANES_T1S_P2MP\t1\n#define __LINK_MODE_LANES_VR8\t\t8\n#define __LINK_MODE_LANES_DR8_2\t\t8\n\n#define __DEFINE_LINK_MODE_PARAMS(_speed, _type, _duplex)\t\\\n\t[ETHTOOL_LINK_MODE(_speed, _type, _duplex)] = {\t\t\\\n\t\t.speed  = SPEED_ ## _speed, \\\n\t\t.lanes  = __LINK_MODE_LANES_ ## _type, \\\n\t\t.duplex\t= __DUPLEX_ ## _duplex \\\n\t}\n#define __DUPLEX_Half DUPLEX_HALF\n#define __DUPLEX_Full DUPLEX_FULL\n#define __DEFINE_SPECIAL_MODE_PARAMS(_mode) \\\n\t[ETHTOOL_LINK_MODE_ ## _mode ## _BIT] = { \\\n\t\t.speed\t= SPEED_UNKNOWN, \\\n\t\t.lanes\t= 0, \\\n\t\t.duplex\t= DUPLEX_UNKNOWN, \\\n\t}\n\nconst struct link_mode_info link_mode_params[] = {\n\t__DEFINE_LINK_MODE_PARAMS(10, T, Half),\n\t__DEFINE_LINK_MODE_PARAMS(10, T, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100, T, Half),\n\t__DEFINE_LINK_MODE_PARAMS(100, T, Full),\n\t__DEFINE_LINK_MODE_PARAMS(1000, T, Half),\n\t__DEFINE_LINK_MODE_PARAMS(1000, T, Full),\n\t__DEFINE_SPECIAL_MODE_PARAMS(Autoneg),\n\t__DEFINE_SPECIAL_MODE_PARAMS(TP),\n\t__DEFINE_SPECIAL_MODE_PARAMS(AUI),\n\t__DEFINE_SPECIAL_MODE_PARAMS(MII),\n\t__DEFINE_SPECIAL_MODE_PARAMS(FIBRE),\n\t__DEFINE_SPECIAL_MODE_PARAMS(BNC),\n\t__DEFINE_LINK_MODE_PARAMS(10000, T, Full),\n\t__DEFINE_SPECIAL_MODE_PARAMS(Pause),\n\t__DEFINE_SPECIAL_MODE_PARAMS(Asym_Pause),\n\t__DEFINE_LINK_MODE_PARAMS(2500, X, Full),\n\t__DEFINE_SPECIAL_MODE_PARAMS(Backplane),\n\t__DEFINE_LINK_MODE_PARAMS(1000, KX, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, KX4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, KR, Full),\n\t[ETHTOOL_LINK_MODE_10000baseR_FEC_BIT] = {\n\t\t.speed\t= SPEED_10000,\n\t\t.lanes\t= 1,\n\t\t.duplex = DUPLEX_FULL,\n\t},\n\t__DEFINE_LINK_MODE_PARAMS(20000, MLD2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(20000, KR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(40000, KR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(40000, CR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(40000, SR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(40000, LR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(56000, KR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(56000, CR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(56000, SR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(56000, LR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(25000, CR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(25000, KR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(25000, SR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, CR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, KR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, KR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, SR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, CR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, LR4_ER4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, SR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(1000, X, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, CR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, SR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, LR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, LRM, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10000, ER, Full),\n\t__DEFINE_LINK_MODE_PARAMS(2500, T, Full),\n\t__DEFINE_LINK_MODE_PARAMS(5000, T, Full),\n\t__DEFINE_SPECIAL_MODE_PARAMS(FEC_NONE),\n\t__DEFINE_SPECIAL_MODE_PARAMS(FEC_RS),\n\t__DEFINE_SPECIAL_MODE_PARAMS(FEC_BASER),\n\t__DEFINE_LINK_MODE_PARAMS(50000, KR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, SR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, CR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, LR_ER_FR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(50000, DR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, KR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, SR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, CR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, LR2_ER2_FR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, DR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, KR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, SR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, LR4_ER4_FR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, DR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, CR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100, T1, Full),\n\t__DEFINE_LINK_MODE_PARAMS(1000, T1, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, KR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, SR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, LR8_ER8_FR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, DR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, CR8, Full),\n\t__DEFINE_SPECIAL_MODE_PARAMS(FEC_LLRS),\n\t__DEFINE_LINK_MODE_PARAMS(100000, KR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, SR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, LR_ER_FR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, DR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100000, CR, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, KR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, SR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, LR2_ER2_FR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, DR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(200000, CR2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, KR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, SR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, LR4_ER4_FR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, DR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(400000, CR4, Full),\n\t__DEFINE_LINK_MODE_PARAMS(100, FX, Half),\n\t__DEFINE_LINK_MODE_PARAMS(100, FX, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10, T1L, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, CR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, KR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, DR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, DR8_2, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, SR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(800000, VR8, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10, T1S, Full),\n\t__DEFINE_LINK_MODE_PARAMS(10, T1S, Half),\n\t__DEFINE_LINK_MODE_PARAMS(10, T1S_P2MP, Half),\n};\nstatic_assert(ARRAY_SIZE(link_mode_params) == __ETHTOOL_LINK_MODE_MASK_NBITS);\n\nconst char netif_msg_class_names[][ETH_GSTRING_LEN] = {\n\t[NETIF_MSG_DRV_BIT]\t\t= \"drv\",\n\t[NETIF_MSG_PROBE_BIT]\t\t= \"probe\",\n\t[NETIF_MSG_LINK_BIT]\t\t= \"link\",\n\t[NETIF_MSG_TIMER_BIT]\t\t= \"timer\",\n\t[NETIF_MSG_IFDOWN_BIT]\t\t= \"ifdown\",\n\t[NETIF_MSG_IFUP_BIT]\t\t= \"ifup\",\n\t[NETIF_MSG_RX_ERR_BIT]\t\t= \"rx_err\",\n\t[NETIF_MSG_TX_ERR_BIT]\t\t= \"tx_err\",\n\t[NETIF_MSG_TX_QUEUED_BIT]\t= \"tx_queued\",\n\t[NETIF_MSG_INTR_BIT]\t\t= \"intr\",\n\t[NETIF_MSG_TX_DONE_BIT]\t\t= \"tx_done\",\n\t[NETIF_MSG_RX_STATUS_BIT]\t= \"rx_status\",\n\t[NETIF_MSG_PKTDATA_BIT]\t\t= \"pktdata\",\n\t[NETIF_MSG_HW_BIT]\t\t= \"hw\",\n\t[NETIF_MSG_WOL_BIT]\t\t= \"wol\",\n};\nstatic_assert(ARRAY_SIZE(netif_msg_class_names) == NETIF_MSG_CLASS_COUNT);\n\nconst char wol_mode_names[][ETH_GSTRING_LEN] = {\n\t[const_ilog2(WAKE_PHY)]\t\t= \"phy\",\n\t[const_ilog2(WAKE_UCAST)]\t= \"ucast\",\n\t[const_ilog2(WAKE_MCAST)]\t= \"mcast\",\n\t[const_ilog2(WAKE_BCAST)]\t= \"bcast\",\n\t[const_ilog2(WAKE_ARP)]\t\t= \"arp\",\n\t[const_ilog2(WAKE_MAGIC)]\t= \"magic\",\n\t[const_ilog2(WAKE_MAGICSECURE)]\t= \"magicsecure\",\n\t[const_ilog2(WAKE_FILTER)]\t= \"filter\",\n};\nstatic_assert(ARRAY_SIZE(wol_mode_names) == WOL_MODE_COUNT);\n\nconst char sof_timestamping_names[][ETH_GSTRING_LEN] = {\n\t[const_ilog2(SOF_TIMESTAMPING_TX_HARDWARE)]  = \"hardware-transmit\",\n\t[const_ilog2(SOF_TIMESTAMPING_TX_SOFTWARE)]  = \"software-transmit\",\n\t[const_ilog2(SOF_TIMESTAMPING_RX_HARDWARE)]  = \"hardware-receive\",\n\t[const_ilog2(SOF_TIMESTAMPING_RX_SOFTWARE)]  = \"software-receive\",\n\t[const_ilog2(SOF_TIMESTAMPING_SOFTWARE)]     = \"software-system-clock\",\n\t[const_ilog2(SOF_TIMESTAMPING_SYS_HARDWARE)] = \"hardware-legacy-clock\",\n\t[const_ilog2(SOF_TIMESTAMPING_RAW_HARDWARE)] = \"hardware-raw-clock\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_ID)]       = \"option-id\",\n\t[const_ilog2(SOF_TIMESTAMPING_TX_SCHED)]     = \"sched-transmit\",\n\t[const_ilog2(SOF_TIMESTAMPING_TX_ACK)]       = \"ack-transmit\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_CMSG)]     = \"option-cmsg\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_TSONLY)]   = \"option-tsonly\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_STATS)]    = \"option-stats\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_PKTINFO)]  = \"option-pktinfo\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_TX_SWHW)]  = \"option-tx-swhw\",\n\t[const_ilog2(SOF_TIMESTAMPING_BIND_PHC)]     = \"bind-phc\",\n\t[const_ilog2(SOF_TIMESTAMPING_OPT_ID_TCP)]   = \"option-id-tcp\",\n};\nstatic_assert(ARRAY_SIZE(sof_timestamping_names) == __SOF_TIMESTAMPING_CNT);\n\nconst char ts_tx_type_names[][ETH_GSTRING_LEN] = {\n\t[HWTSTAMP_TX_OFF]\t\t= \"off\",\n\t[HWTSTAMP_TX_ON]\t\t= \"on\",\n\t[HWTSTAMP_TX_ONESTEP_SYNC]\t= \"onestep-sync\",\n\t[HWTSTAMP_TX_ONESTEP_P2P]\t= \"onestep-p2p\",\n};\nstatic_assert(ARRAY_SIZE(ts_tx_type_names) == __HWTSTAMP_TX_CNT);\n\nconst char ts_rx_filter_names[][ETH_GSTRING_LEN] = {\n\t[HWTSTAMP_FILTER_NONE]\t\t\t= \"none\",\n\t[HWTSTAMP_FILTER_ALL]\t\t\t= \"all\",\n\t[HWTSTAMP_FILTER_SOME]\t\t\t= \"some\",\n\t[HWTSTAMP_FILTER_PTP_V1_L4_EVENT]\t= \"ptpv1-l4-event\",\n\t[HWTSTAMP_FILTER_PTP_V1_L4_SYNC]\t= \"ptpv1-l4-sync\",\n\t[HWTSTAMP_FILTER_PTP_V1_L4_DELAY_REQ]\t= \"ptpv1-l4-delay-req\",\n\t[HWTSTAMP_FILTER_PTP_V2_L4_EVENT]\t= \"ptpv2-l4-event\",\n\t[HWTSTAMP_FILTER_PTP_V2_L4_SYNC]\t= \"ptpv2-l4-sync\",\n\t[HWTSTAMP_FILTER_PTP_V2_L4_DELAY_REQ]\t= \"ptpv2-l4-delay-req\",\n\t[HWTSTAMP_FILTER_PTP_V2_L2_EVENT]\t= \"ptpv2-l2-event\",\n\t[HWTSTAMP_FILTER_PTP_V2_L2_SYNC]\t= \"ptpv2-l2-sync\",\n\t[HWTSTAMP_FILTER_PTP_V2_L2_DELAY_REQ]\t= \"ptpv2-l2-delay-req\",\n\t[HWTSTAMP_FILTER_PTP_V2_EVENT]\t\t= \"ptpv2-event\",\n\t[HWTSTAMP_FILTER_PTP_V2_SYNC]\t\t= \"ptpv2-sync\",\n\t[HWTSTAMP_FILTER_PTP_V2_DELAY_REQ]\t= \"ptpv2-delay-req\",\n\t[HWTSTAMP_FILTER_NTP_ALL]\t\t= \"ntp-all\",\n};\nstatic_assert(ARRAY_SIZE(ts_rx_filter_names) == __HWTSTAMP_FILTER_CNT);\n\nconst char udp_tunnel_type_names[][ETH_GSTRING_LEN] = {\n\t[ETHTOOL_UDP_TUNNEL_TYPE_VXLAN]\t\t= \"vxlan\",\n\t[ETHTOOL_UDP_TUNNEL_TYPE_GENEVE]\t= \"geneve\",\n\t[ETHTOOL_UDP_TUNNEL_TYPE_VXLAN_GPE]\t= \"vxlan-gpe\",\n};\nstatic_assert(ARRAY_SIZE(udp_tunnel_type_names) ==\n\t      __ETHTOOL_UDP_TUNNEL_TYPE_CNT);\n\n \nbool\nconvert_legacy_settings_to_link_ksettings(\n\tstruct ethtool_link_ksettings *link_ksettings,\n\tconst struct ethtool_cmd *legacy_settings)\n{\n\tbool retval = true;\n\n\tmemset(link_ksettings, 0, sizeof(*link_ksettings));\n\n\t \n\tif (legacy_settings->maxtxpkt ||\n\t    legacy_settings->maxrxpkt)\n\t\tretval = false;\n\n\tethtool_convert_legacy_u32_to_link_mode(\n\t\tlink_ksettings->link_modes.supported,\n\t\tlegacy_settings->supported);\n\tethtool_convert_legacy_u32_to_link_mode(\n\t\tlink_ksettings->link_modes.advertising,\n\t\tlegacy_settings->advertising);\n\tethtool_convert_legacy_u32_to_link_mode(\n\t\tlink_ksettings->link_modes.lp_advertising,\n\t\tlegacy_settings->lp_advertising);\n\tlink_ksettings->base.speed\n\t\t= ethtool_cmd_speed(legacy_settings);\n\tlink_ksettings->base.duplex\n\t\t= legacy_settings->duplex;\n\tlink_ksettings->base.port\n\t\t= legacy_settings->port;\n\tlink_ksettings->base.phy_address\n\t\t= legacy_settings->phy_address;\n\tlink_ksettings->base.autoneg\n\t\t= legacy_settings->autoneg;\n\tlink_ksettings->base.mdio_support\n\t\t= legacy_settings->mdio_support;\n\tlink_ksettings->base.eth_tp_mdix\n\t\t= legacy_settings->eth_tp_mdix;\n\tlink_ksettings->base.eth_tp_mdix_ctrl\n\t\t= legacy_settings->eth_tp_mdix_ctrl;\n\treturn retval;\n}\n\nint __ethtool_get_link(struct net_device *dev)\n{\n\tif (!dev->ethtool_ops->get_link)\n\t\treturn -EOPNOTSUPP;\n\n\treturn netif_running(dev) && dev->ethtool_ops->get_link(dev);\n}\n\nstatic int ethtool_get_rxnfc_rule_count(struct net_device *dev)\n{\n\tconst struct ethtool_ops *ops = dev->ethtool_ops;\n\tstruct ethtool_rxnfc info = {\n\t\t.cmd = ETHTOOL_GRXCLSRLCNT,\n\t};\n\tint err;\n\n\terr = ops->get_rxnfc(dev, &info, NULL);\n\tif (err)\n\t\treturn err;\n\n\treturn info.rule_cnt;\n}\n\nint ethtool_get_max_rxnfc_channel(struct net_device *dev, u64 *max)\n{\n\tconst struct ethtool_ops *ops = dev->ethtool_ops;\n\tstruct ethtool_rxnfc *info;\n\tint err, i, rule_cnt;\n\tu64 max_ring = 0;\n\n\tif (!ops->get_rxnfc)\n\t\treturn -EOPNOTSUPP;\n\n\trule_cnt = ethtool_get_rxnfc_rule_count(dev);\n\tif (rule_cnt <= 0)\n\t\treturn -EINVAL;\n\n\tinfo = kvzalloc(struct_size(info, rule_locs, rule_cnt), GFP_KERNEL);\n\tif (!info)\n\t\treturn -ENOMEM;\n\n\tinfo->cmd = ETHTOOL_GRXCLSRLALL;\n\tinfo->rule_cnt = rule_cnt;\n\terr = ops->get_rxnfc(dev, info, info->rule_locs);\n\tif (err)\n\t\tgoto err_free_info;\n\n\tfor (i = 0; i < rule_cnt; i++) {\n\t\tstruct ethtool_rxnfc rule_info = {\n\t\t\t.cmd = ETHTOOL_GRXCLSRULE,\n\t\t\t.fs.location = info->rule_locs[i],\n\t\t};\n\n\t\terr = ops->get_rxnfc(dev, &rule_info, NULL);\n\t\tif (err)\n\t\t\tgoto err_free_info;\n\n\t\tif (rule_info.fs.ring_cookie != RX_CLS_FLOW_DISC &&\n\t\t    rule_info.fs.ring_cookie != RX_CLS_FLOW_WAKE &&\n\t\t    !(rule_info.flow_type & FLOW_RSS) &&\n\t\t    !ethtool_get_flow_spec_ring_vf(rule_info.fs.ring_cookie))\n\t\t\tmax_ring =\n\t\t\t\tmax_t(u64, max_ring, rule_info.fs.ring_cookie);\n\t}\n\n\tkvfree(info);\n\t*max = max_ring;\n\treturn 0;\n\nerr_free_info:\n\tkvfree(info);\n\treturn err;\n}\n\nint ethtool_get_max_rxfh_channel(struct net_device *dev, u32 *max)\n{\n\tu32 dev_size, current_max = 0;\n\tu32 *indir;\n\tint ret;\n\n\tif (!dev->ethtool_ops->get_rxfh_indir_size ||\n\t    !dev->ethtool_ops->get_rxfh)\n\t\treturn -EOPNOTSUPP;\n\tdev_size = dev->ethtool_ops->get_rxfh_indir_size(dev);\n\tif (dev_size == 0)\n\t\treturn -EOPNOTSUPP;\n\n\tindir = kcalloc(dev_size, sizeof(indir[0]), GFP_USER);\n\tif (!indir)\n\t\treturn -ENOMEM;\n\n\tret = dev->ethtool_ops->get_rxfh(dev, indir, NULL, NULL);\n\tif (ret)\n\t\tgoto out;\n\n\twhile (dev_size--)\n\t\tcurrent_max = max(current_max, indir[dev_size]);\n\n\t*max = current_max;\n\nout:\n\tkfree(indir);\n\treturn ret;\n}\n\nint ethtool_check_ops(const struct ethtool_ops *ops)\n{\n\tif (WARN_ON(ops->set_coalesce && !ops->supported_coalesce_params))\n\t\treturn -EINVAL;\n\t \n\treturn 0;\n}\n\nint __ethtool_get_ts_info(struct net_device *dev, struct ethtool_ts_info *info)\n{\n\tconst struct ethtool_ops *ops = dev->ethtool_ops;\n\tstruct phy_device *phydev = dev->phydev;\n\n\tmemset(info, 0, sizeof(*info));\n\tinfo->cmd = ETHTOOL_GET_TS_INFO;\n\n\tif (phy_has_tsinfo(phydev))\n\t\treturn phy_ts_info(phydev, info);\n\tif (ops->get_ts_info)\n\t\treturn ops->get_ts_info(dev, info);\n\n\tinfo->so_timestamping = SOF_TIMESTAMPING_RX_SOFTWARE |\n\t\t\t\tSOF_TIMESTAMPING_SOFTWARE;\n\tinfo->phc_index = -1;\n\n\treturn 0;\n}\n\nint ethtool_get_phc_vclocks(struct net_device *dev, int **vclock_index)\n{\n\tstruct ethtool_ts_info info = { };\n\tint num = 0;\n\n\tif (!__ethtool_get_ts_info(dev, &info))\n\t\tnum = ptp_get_vclocks_index(info.phc_index, vclock_index);\n\n\treturn num;\n}\nEXPORT_SYMBOL(ethtool_get_phc_vclocks);\n\nconst struct ethtool_phy_ops *ethtool_phy_ops;\n\nvoid ethtool_set_ethtool_phy_ops(const struct ethtool_phy_ops *ops)\n{\n\tASSERT_RTNL();\n\tethtool_phy_ops = ops;\n}\nEXPORT_SYMBOL_GPL(ethtool_set_ethtool_phy_ops);\n\nvoid\nethtool_params_from_link_mode(struct ethtool_link_ksettings *link_ksettings,\n\t\t\t      enum ethtool_link_mode_bit_indices link_mode)\n{\n\tconst struct link_mode_info *link_info;\n\n\tif (WARN_ON_ONCE(link_mode >= __ETHTOOL_LINK_MODE_MASK_NBITS))\n\t\treturn;\n\n\tlink_info = &link_mode_params[link_mode];\n\tlink_ksettings->base.speed = link_info->speed;\n\tlink_ksettings->lanes = link_info->lanes;\n\tlink_ksettings->base.duplex = link_info->duplex;\n}\nEXPORT_SYMBOL_GPL(ethtool_params_from_link_mode);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}