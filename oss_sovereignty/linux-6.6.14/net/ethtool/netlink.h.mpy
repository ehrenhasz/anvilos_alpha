{
  "module_name": "netlink.h",
  "hash_id": "dc7fec5612a1465986b2b9b46bdbb83206562641cfc1847a43af4adb40bb58e6",
  "original_prompt": "Ingested from linux-6.6.14/net/ethtool/netlink.h",
  "human_readable_source": " \n\n#ifndef _NET_ETHTOOL_NETLINK_H\n#define _NET_ETHTOOL_NETLINK_H\n\n#include <linux/ethtool_netlink.h>\n#include <linux/netdevice.h>\n#include <net/genetlink.h>\n#include <net/sock.h>\n\nstruct ethnl_req_info;\n\nint ethnl_parse_header_dev_get(struct ethnl_req_info *req_info,\n\t\t\t       const struct nlattr *nest, struct net *net,\n\t\t\t       struct netlink_ext_ack *extack,\n\t\t\t       bool require_dev);\nint ethnl_fill_reply_header(struct sk_buff *skb, struct net_device *dev,\n\t\t\t    u16 attrtype);\nstruct sk_buff *ethnl_reply_init(size_t payload, struct net_device *dev, u8 cmd,\n\t\t\t\t u16 hdr_attrtype, struct genl_info *info,\n\t\t\t\t void **ehdrp);\nvoid *ethnl_dump_put(struct sk_buff *skb, struct netlink_callback *cb, u8 cmd);\nvoid *ethnl_bcastmsg_put(struct sk_buff *skb, u8 cmd);\nint ethnl_multicast(struct sk_buff *skb, struct net_device *dev);\n\n \nstatic inline int ethnl_strz_size(const char *s)\n{\n\treturn nla_total_size(strnlen(s, ETH_GSTRING_LEN) + 1);\n}\n\n \nstatic inline int ethnl_put_strz(struct sk_buff *skb, u16 attrtype,\n\t\t\t\t const char *s)\n{\n\tunsigned int len = strnlen(s, ETH_GSTRING_LEN);\n\tstruct nlattr *attr;\n\n\tattr = nla_reserve(skb, attrtype, len + 1);\n\tif (!attr)\n\t\treturn -EMSGSIZE;\n\n\tmemcpy(nla_data(attr), s, len);\n\t((char *)nla_data(attr))[len] = '\\0';\n\treturn 0;\n}\n\n \nstatic inline void ethnl_update_u32(u32 *dst, const struct nlattr *attr,\n\t\t\t\t    bool *mod)\n{\n\tu32 val;\n\n\tif (!attr)\n\t\treturn;\n\tval = nla_get_u32(attr);\n\tif (*dst == val)\n\t\treturn;\n\n\t*dst = val;\n\t*mod = true;\n}\n\n \nstatic inline void ethnl_update_u8(u8 *dst, const struct nlattr *attr,\n\t\t\t\t   bool *mod)\n{\n\tu8 val;\n\n\tif (!attr)\n\t\treturn;\n\tval = nla_get_u8(attr);\n\tif (*dst == val)\n\t\treturn;\n\n\t*dst = val;\n\t*mod = true;\n}\n\n \nstatic inline void ethnl_update_bool32(u32 *dst, const struct nlattr *attr,\n\t\t\t\t       bool *mod)\n{\n\tu8 val;\n\n\tif (!attr)\n\t\treturn;\n\tval = !!nla_get_u8(attr);\n\tif (!!*dst == val)\n\t\treturn;\n\n\t*dst = val;\n\t*mod = true;\n}\n\n \nstatic inline void ethnl_update_bool(bool *dst, const struct nlattr *attr,\n\t\t\t\t     bool *mod)\n{\n\tu8 val;\n\n\tif (!attr)\n\t\treturn;\n\tval = !!nla_get_u8(attr);\n\tif (!!*dst == val)\n\t\treturn;\n\n\t*dst = val;\n\t*mod = true;\n}\n\n \nstatic inline void ethnl_update_binary(void *dst, unsigned int len,\n\t\t\t\t       const struct nlattr *attr, bool *mod)\n{\n\tif (!attr)\n\t\treturn;\n\tif (nla_len(attr) < len)\n\t\tlen = nla_len(attr);\n\tif (!memcmp(dst, nla_data(attr), len))\n\t\treturn;\n\n\tmemcpy(dst, nla_data(attr), len);\n\t*mod = true;\n}\n\n \nstatic inline void ethnl_update_bitfield32(u32 *dst, const struct nlattr *attr,\n\t\t\t\t\t   bool *mod)\n{\n\tstruct nla_bitfield32 change;\n\tu32 newval;\n\n\tif (!attr)\n\t\treturn;\n\tchange = nla_get_bitfield32(attr);\n\tnewval = (*dst & ~change.selector) | (change.value & change.selector);\n\tif (*dst == newval)\n\t\treturn;\n\n\t*dst = newval;\n\t*mod = true;\n}\n\n \nstatic inline unsigned int ethnl_reply_header_size(void)\n{\n\treturn nla_total_size(nla_total_size(sizeof(u32)) +\n\t\t\t      nla_total_size(IFNAMSIZ));\n}\n\n \n\n \n\n \nstruct ethnl_req_info {\n\tstruct net_device\t*dev;\n\tnetdevice_tracker\tdev_tracker;\n\tu32\t\t\tflags;\n};\n\nstatic inline void ethnl_parse_header_dev_put(struct ethnl_req_info *req_info)\n{\n\tnetdev_put(req_info->dev, &req_info->dev_tracker);\n}\n\n \nstruct ethnl_reply_data {\n\tstruct net_device\t\t*dev;\n};\n\nint ethnl_ops_begin(struct net_device *dev);\nvoid ethnl_ops_complete(struct net_device *dev);\n\n \nstruct ethnl_request_ops {\n\tu8\t\t\trequest_cmd;\n\tu8\t\t\treply_cmd;\n\tu16\t\t\thdr_attr;\n\tunsigned int\t\treq_info_size;\n\tunsigned int\t\treply_data_size;\n\tbool\t\t\tallow_nodev_do;\n\tu8\t\t\tset_ntf_cmd;\n\n\tint (*parse_request)(struct ethnl_req_info *req_info,\n\t\t\t     struct nlattr **tb,\n\t\t\t     struct netlink_ext_ack *extack);\n\tint (*prepare_data)(const struct ethnl_req_info *req_info,\n\t\t\t    struct ethnl_reply_data *reply_data,\n\t\t\t    const struct genl_info *info);\n\tint (*reply_size)(const struct ethnl_req_info *req_info,\n\t\t\t  const struct ethnl_reply_data *reply_data);\n\tint (*fill_reply)(struct sk_buff *skb,\n\t\t\t  const struct ethnl_req_info *req_info,\n\t\t\t  const struct ethnl_reply_data *reply_data);\n\tvoid (*cleanup_data)(struct ethnl_reply_data *reply_data);\n\n\tint (*set_validate)(struct ethnl_req_info *req_info,\n\t\t\t    struct genl_info *info);\n\tint (*set)(struct ethnl_req_info *req_info,\n\t\t   struct genl_info *info);\n};\n\n \n\nextern const struct ethnl_request_ops ethnl_strset_request_ops;\nextern const struct ethnl_request_ops ethnl_linkinfo_request_ops;\nextern const struct ethnl_request_ops ethnl_linkmodes_request_ops;\nextern const struct ethnl_request_ops ethnl_linkstate_request_ops;\nextern const struct ethnl_request_ops ethnl_debug_request_ops;\nextern const struct ethnl_request_ops ethnl_wol_request_ops;\nextern const struct ethnl_request_ops ethnl_features_request_ops;\nextern const struct ethnl_request_ops ethnl_privflags_request_ops;\nextern const struct ethnl_request_ops ethnl_rings_request_ops;\nextern const struct ethnl_request_ops ethnl_channels_request_ops;\nextern const struct ethnl_request_ops ethnl_coalesce_request_ops;\nextern const struct ethnl_request_ops ethnl_pause_request_ops;\nextern const struct ethnl_request_ops ethnl_eee_request_ops;\nextern const struct ethnl_request_ops ethnl_tsinfo_request_ops;\nextern const struct ethnl_request_ops ethnl_fec_request_ops;\nextern const struct ethnl_request_ops ethnl_module_eeprom_request_ops;\nextern const struct ethnl_request_ops ethnl_stats_request_ops;\nextern const struct ethnl_request_ops ethnl_phc_vclocks_request_ops;\nextern const struct ethnl_request_ops ethnl_module_request_ops;\nextern const struct ethnl_request_ops ethnl_pse_request_ops;\nextern const struct ethnl_request_ops ethnl_rss_request_ops;\nextern const struct ethnl_request_ops ethnl_plca_cfg_request_ops;\nextern const struct ethnl_request_ops ethnl_plca_status_request_ops;\nextern const struct ethnl_request_ops ethnl_mm_request_ops;\n\nextern const struct nla_policy ethnl_header_policy[ETHTOOL_A_HEADER_FLAGS + 1];\nextern const struct nla_policy ethnl_header_policy_stats[ETHTOOL_A_HEADER_FLAGS + 1];\nextern const struct nla_policy ethnl_strset_get_policy[ETHTOOL_A_STRSET_COUNTS_ONLY + 1];\nextern const struct nla_policy ethnl_linkinfo_get_policy[ETHTOOL_A_LINKINFO_HEADER + 1];\nextern const struct nla_policy ethnl_linkinfo_set_policy[ETHTOOL_A_LINKINFO_TP_MDIX_CTRL + 1];\nextern const struct nla_policy ethnl_linkmodes_get_policy[ETHTOOL_A_LINKMODES_HEADER + 1];\nextern const struct nla_policy ethnl_linkmodes_set_policy[ETHTOOL_A_LINKMODES_LANES + 1];\nextern const struct nla_policy ethnl_linkstate_get_policy[ETHTOOL_A_LINKSTATE_HEADER + 1];\nextern const struct nla_policy ethnl_debug_get_policy[ETHTOOL_A_DEBUG_HEADER + 1];\nextern const struct nla_policy ethnl_debug_set_policy[ETHTOOL_A_DEBUG_MSGMASK + 1];\nextern const struct nla_policy ethnl_wol_get_policy[ETHTOOL_A_WOL_HEADER + 1];\nextern const struct nla_policy ethnl_wol_set_policy[ETHTOOL_A_WOL_SOPASS + 1];\nextern const struct nla_policy ethnl_features_get_policy[ETHTOOL_A_FEATURES_HEADER + 1];\nextern const struct nla_policy ethnl_features_set_policy[ETHTOOL_A_FEATURES_WANTED + 1];\nextern const struct nla_policy ethnl_privflags_get_policy[ETHTOOL_A_PRIVFLAGS_HEADER + 1];\nextern const struct nla_policy ethnl_privflags_set_policy[ETHTOOL_A_PRIVFLAGS_FLAGS + 1];\nextern const struct nla_policy ethnl_rings_get_policy[ETHTOOL_A_RINGS_HEADER + 1];\nextern const struct nla_policy ethnl_rings_set_policy[ETHTOOL_A_RINGS_TX_PUSH_BUF_LEN_MAX + 1];\nextern const struct nla_policy ethnl_channels_get_policy[ETHTOOL_A_CHANNELS_HEADER + 1];\nextern const struct nla_policy ethnl_channels_set_policy[ETHTOOL_A_CHANNELS_COMBINED_COUNT + 1];\nextern const struct nla_policy ethnl_coalesce_get_policy[ETHTOOL_A_COALESCE_HEADER + 1];\nextern const struct nla_policy ethnl_coalesce_set_policy[ETHTOOL_A_COALESCE_MAX + 1];\nextern const struct nla_policy ethnl_pause_get_policy[ETHTOOL_A_PAUSE_STATS_SRC + 1];\nextern const struct nla_policy ethnl_pause_set_policy[ETHTOOL_A_PAUSE_TX + 1];\nextern const struct nla_policy ethnl_eee_get_policy[ETHTOOL_A_EEE_HEADER + 1];\nextern const struct nla_policy ethnl_eee_set_policy[ETHTOOL_A_EEE_TX_LPI_TIMER + 1];\nextern const struct nla_policy ethnl_tsinfo_get_policy[ETHTOOL_A_TSINFO_HEADER + 1];\nextern const struct nla_policy ethnl_cable_test_act_policy[ETHTOOL_A_CABLE_TEST_HEADER + 1];\nextern const struct nla_policy ethnl_cable_test_tdr_act_policy[ETHTOOL_A_CABLE_TEST_TDR_CFG + 1];\nextern const struct nla_policy ethnl_tunnel_info_get_policy[ETHTOOL_A_TUNNEL_INFO_HEADER + 1];\nextern const struct nla_policy ethnl_fec_get_policy[ETHTOOL_A_FEC_HEADER + 1];\nextern const struct nla_policy ethnl_fec_set_policy[ETHTOOL_A_FEC_AUTO + 1];\nextern const struct nla_policy ethnl_module_eeprom_get_policy[ETHTOOL_A_MODULE_EEPROM_I2C_ADDRESS + 1];\nextern const struct nla_policy ethnl_stats_get_policy[ETHTOOL_A_STATS_SRC + 1];\nextern const struct nla_policy ethnl_phc_vclocks_get_policy[ETHTOOL_A_PHC_VCLOCKS_HEADER + 1];\nextern const struct nla_policy ethnl_module_get_policy[ETHTOOL_A_MODULE_HEADER + 1];\nextern const struct nla_policy ethnl_module_set_policy[ETHTOOL_A_MODULE_POWER_MODE_POLICY + 1];\nextern const struct nla_policy ethnl_pse_get_policy[ETHTOOL_A_PSE_HEADER + 1];\nextern const struct nla_policy ethnl_pse_set_policy[ETHTOOL_A_PSE_MAX + 1];\nextern const struct nla_policy ethnl_rss_get_policy[ETHTOOL_A_RSS_CONTEXT + 1];\nextern const struct nla_policy ethnl_plca_get_cfg_policy[ETHTOOL_A_PLCA_HEADER + 1];\nextern const struct nla_policy ethnl_plca_set_cfg_policy[ETHTOOL_A_PLCA_MAX + 1];\nextern const struct nla_policy ethnl_plca_get_status_policy[ETHTOOL_A_PLCA_HEADER + 1];\nextern const struct nla_policy ethnl_mm_get_policy[ETHTOOL_A_MM_HEADER + 1];\nextern const struct nla_policy ethnl_mm_set_policy[ETHTOOL_A_MM_MAX + 1];\n\nint ethnl_set_features(struct sk_buff *skb, struct genl_info *info);\nint ethnl_act_cable_test(struct sk_buff *skb, struct genl_info *info);\nint ethnl_act_cable_test_tdr(struct sk_buff *skb, struct genl_info *info);\nint ethnl_tunnel_info_doit(struct sk_buff *skb, struct genl_info *info);\nint ethnl_tunnel_info_start(struct netlink_callback *cb);\nint ethnl_tunnel_info_dumpit(struct sk_buff *skb, struct netlink_callback *cb);\n\nextern const char stats_std_names[__ETHTOOL_STATS_CNT][ETH_GSTRING_LEN];\nextern const char stats_eth_phy_names[__ETHTOOL_A_STATS_ETH_PHY_CNT][ETH_GSTRING_LEN];\nextern const char stats_eth_mac_names[__ETHTOOL_A_STATS_ETH_MAC_CNT][ETH_GSTRING_LEN];\nextern const char stats_eth_ctrl_names[__ETHTOOL_A_STATS_ETH_CTRL_CNT][ETH_GSTRING_LEN];\nextern const char stats_rmon_names[__ETHTOOL_A_STATS_RMON_CNT][ETH_GSTRING_LEN];\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}