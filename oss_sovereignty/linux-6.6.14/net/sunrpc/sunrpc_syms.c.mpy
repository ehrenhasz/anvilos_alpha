{
  "module_name": "sunrpc_syms.c",
  "hash_id": "65648da88828b5e350f5e90dc0772a0c3ee839539e517a00c28729bb680554f3",
  "original_prompt": "Ingested from linux-6.6.14/net/sunrpc/sunrpc_syms.c",
  "human_readable_source": "\n \n\n#include <linux/module.h>\n\n#include <linux/types.h>\n#include <linux/uio.h>\n#include <linux/unistd.h>\n#include <linux/init.h>\n\n#include <linux/sunrpc/sched.h>\n#include <linux/sunrpc/clnt.h>\n#include <linux/sunrpc/svc.h>\n#include <linux/sunrpc/svcsock.h>\n#include <linux/sunrpc/auth.h>\n#include <linux/workqueue.h>\n#include <linux/sunrpc/rpc_pipe_fs.h>\n#include <linux/sunrpc/xprtsock.h>\n\n#include \"sunrpc.h\"\n#include \"sysfs.h\"\n#include \"netns.h\"\n\nunsigned int sunrpc_net_id;\nEXPORT_SYMBOL_GPL(sunrpc_net_id);\n\nstatic __net_init int sunrpc_init_net(struct net *net)\n{\n\tint err;\n\tstruct sunrpc_net *sn = net_generic(net, sunrpc_net_id);\n\n\terr = rpc_proc_init(net);\n\tif (err)\n\t\tgoto err_proc;\n\n\terr = ip_map_cache_create(net);\n\tif (err)\n\t\tgoto err_ipmap;\n\n\terr = unix_gid_cache_create(net);\n\tif (err)\n\t\tgoto err_unixgid;\n\n\terr = rpc_pipefs_init_net(net);\n\tif (err)\n\t\tgoto err_pipefs;\n\n\tINIT_LIST_HEAD(&sn->all_clients);\n\tspin_lock_init(&sn->rpc_client_lock);\n\tspin_lock_init(&sn->rpcb_clnt_lock);\n\treturn 0;\n\nerr_pipefs:\n\tunix_gid_cache_destroy(net);\nerr_unixgid:\n\tip_map_cache_destroy(net);\nerr_ipmap:\n\trpc_proc_exit(net);\nerr_proc:\n\treturn err;\n}\n\nstatic __net_exit void sunrpc_exit_net(struct net *net)\n{\n\tstruct sunrpc_net *sn = net_generic(net, sunrpc_net_id);\n\n\trpc_pipefs_exit_net(net);\n\tunix_gid_cache_destroy(net);\n\tip_map_cache_destroy(net);\n\trpc_proc_exit(net);\n\tWARN_ON_ONCE(!list_empty(&sn->all_clients));\n}\n\nstatic struct pernet_operations sunrpc_net_ops = {\n\t.init = sunrpc_init_net,\n\t.exit = sunrpc_exit_net,\n\t.id = &sunrpc_net_id,\n\t.size = sizeof(struct sunrpc_net),\n};\n\nstatic int __init\ninit_sunrpc(void)\n{\n\tint err = rpc_init_mempool();\n\tif (err)\n\t\tgoto out;\n\terr = rpcauth_init_module();\n\tif (err)\n\t\tgoto out2;\n\n\tcache_initialize();\n\n\terr = register_pernet_subsys(&sunrpc_net_ops);\n\tif (err)\n\t\tgoto out3;\n\n\terr = register_rpc_pipefs();\n\tif (err)\n\t\tgoto out4;\n\n\terr = rpc_sysfs_init();\n\tif (err)\n\t\tgoto out5;\n\n\tsunrpc_debugfs_init();\n#if IS_ENABLED(CONFIG_SUNRPC_DEBUG)\n\trpc_register_sysctl();\n#endif\n\tsvc_init_xprt_sock();\t \n\tinit_socket_xprt();\t \n\treturn 0;\n\nout5:\n\tunregister_rpc_pipefs();\nout4:\n\tunregister_pernet_subsys(&sunrpc_net_ops);\nout3:\n\trpcauth_remove_module();\nout2:\n\trpc_destroy_mempool();\nout:\n\treturn err;\n}\n\nstatic void __exit\ncleanup_sunrpc(void)\n{\n\trpc_sysfs_exit();\n\trpc_cleanup_clids();\n\txprt_cleanup_ids();\n\txprt_multipath_cleanup_ids();\n\trpcauth_remove_module();\n\tcleanup_socket_xprt();\n\tsvc_cleanup_xprt_sock();\n\tsunrpc_debugfs_exit();\n\tunregister_rpc_pipefs();\n\trpc_destroy_mempool();\n\tunregister_pernet_subsys(&sunrpc_net_ops);\n\tauth_domain_cleanup();\n#if IS_ENABLED(CONFIG_SUNRPC_DEBUG)\n\trpc_unregister_sysctl();\n#endif\n\trcu_barrier();  \n}\nMODULE_LICENSE(\"GPL\");\nfs_initcall(init_sunrpc);  \nmodule_exit(cleanup_sunrpc);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}