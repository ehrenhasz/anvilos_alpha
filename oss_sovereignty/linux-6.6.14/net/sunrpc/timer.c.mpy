{
  "module_name": "timer.c",
  "hash_id": "bc730366c3550737569c2eef50e0ae704cdd393959e23162af1df67a057754c9",
  "original_prompt": "Ingested from linux-6.6.14/net/sunrpc/timer.c",
  "human_readable_source": "\n \n\n#include <asm/param.h>\n\n#include <linux/types.h>\n#include <linux/unistd.h>\n#include <linux/module.h>\n\n#include <linux/sunrpc/clnt.h>\n\n#define RPC_RTO_MAX (60*HZ)\n#define RPC_RTO_INIT (HZ/5)\n#define RPC_RTO_MIN (HZ/10)\n\n \nvoid rpc_init_rtt(struct rpc_rtt *rt, unsigned long timeo)\n{\n\tunsigned long init = 0;\n\tunsigned int i;\n\n\trt->timeo = timeo;\n\n\tif (timeo > RPC_RTO_INIT)\n\t\tinit = (timeo - RPC_RTO_INIT) << 3;\n\tfor (i = 0; i < 5; i++) {\n\t\trt->srtt[i] = init;\n\t\trt->sdrtt[i] = RPC_RTO_INIT;\n\t\trt->ntimeouts[i] = 0;\n\t}\n}\nEXPORT_SYMBOL_GPL(rpc_init_rtt);\n\n \nvoid rpc_update_rtt(struct rpc_rtt *rt, unsigned int timer, long m)\n{\n\tlong *srtt, *sdrtt;\n\n\tif (timer-- == 0)\n\t\treturn;\n\n\t \n\tif (m < 0)\n\t\treturn;\n\n\tif (m == 0)\n\t\tm = 1L;\n\n\tsrtt = (long *)&rt->srtt[timer];\n\tm -= *srtt >> 3;\n\t*srtt += m;\n\n\tif (m < 0)\n\t\tm = -m;\n\n\tsdrtt = (long *)&rt->sdrtt[timer];\n\tm -= *sdrtt >> 2;\n\t*sdrtt += m;\n\n\t \n\tif (*sdrtt < RPC_RTO_MIN)\n\t\t*sdrtt = RPC_RTO_MIN;\n}\nEXPORT_SYMBOL_GPL(rpc_update_rtt);\n\n \nunsigned long rpc_calc_rto(struct rpc_rtt *rt, unsigned int timer)\n{\n\tunsigned long res;\n\n\tif (timer-- == 0)\n\t\treturn rt->timeo;\n\n\tres = ((rt->srtt[timer] + 7) >> 3) + rt->sdrtt[timer];\n\tif (res > RPC_RTO_MAX)\n\t\tres = RPC_RTO_MAX;\n\n\treturn res;\n}\nEXPORT_SYMBOL_GPL(rpc_calc_rto);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}