{
  "module_name": "a2mp.h",
  "hash_id": "ea6e5d0eecb6d4a41c7759fb2e32cabf4cc96677b8c83c028ae53f1d0266b1b2",
  "original_prompt": "Ingested from linux-6.6.14/net/bluetooth/a2mp.h",
  "human_readable_source": " \n \n\n#ifndef __A2MP_H\n#define __A2MP_H\n\n#include <net/bluetooth/l2cap.h>\n\nenum amp_mgr_state {\n\tREAD_LOC_AMP_INFO,\n\tREAD_LOC_AMP_ASSOC,\n\tREAD_LOC_AMP_ASSOC_FINAL,\n\tWRITE_REMOTE_AMP_ASSOC,\n};\n\nstruct amp_mgr {\n\tstruct list_head\tlist;\n\tstruct l2cap_conn\t*l2cap_conn;\n\tstruct l2cap_chan\t*a2mp_chan;\n\tstruct l2cap_chan\t*bredr_chan;\n\tstruct kref\t\tkref;\n\t__u8\t\t\tident;\n\t__u8\t\t\thandle;\n\tunsigned long\t\tstate;\n\tunsigned long\t\tflags;\n\n\tstruct list_head\tamp_ctrls;\n\tstruct mutex\t\tamp_ctrls_lock;\n};\n\nstruct a2mp_cmd {\n\t__u8\tcode;\n\t__u8\tident;\n\t__le16\tlen;\n\t__u8\tdata[];\n} __packed;\n\n \n#define A2MP_COMMAND_REJ         0x01\nstruct a2mp_cmd_rej {\n\t__le16\treason;\n\t__u8\tdata[];\n} __packed;\n\n#define A2MP_DISCOVER_REQ        0x02\nstruct a2mp_discov_req {\n\t__le16\tmtu;\n\t__le16\text_feat;\n} __packed;\n\nstruct a2mp_cl {\n\t__u8\tid;\n\t__u8\ttype;\n\t__u8\tstatus;\n} __packed;\n\n#define A2MP_DISCOVER_RSP        0x03\nstruct a2mp_discov_rsp {\n\t__le16     mtu;\n\t__le16     ext_feat;\n\tstruct a2mp_cl cl[];\n} __packed;\n\n#define A2MP_CHANGE_NOTIFY       0x04\n#define A2MP_CHANGE_RSP          0x05\n\n#define A2MP_GETINFO_REQ         0x06\nstruct a2mp_info_req {\n\t__u8       id;\n} __packed;\n\n#define A2MP_GETINFO_RSP         0x07\nstruct a2mp_info_rsp {\n\t__u8\tid;\n\t__u8\tstatus;\n\t__le32\ttotal_bw;\n\t__le32\tmax_bw;\n\t__le32\tmin_latency;\n\t__le16\tpal_cap;\n\t__le16\tassoc_size;\n} __packed;\n\n#define A2MP_GETAMPASSOC_REQ     0x08\nstruct a2mp_amp_assoc_req {\n\t__u8\tid;\n} __packed;\n\n#define A2MP_GETAMPASSOC_RSP     0x09\nstruct a2mp_amp_assoc_rsp {\n\t__u8\tid;\n\t__u8\tstatus;\n\t__u8\tamp_assoc[];\n} __packed;\n\n#define A2MP_CREATEPHYSLINK_REQ  0x0A\n#define A2MP_DISCONNPHYSLINK_REQ 0x0C\nstruct a2mp_physlink_req {\n\t__u8\tlocal_id;\n\t__u8\tremote_id;\n\t__u8\tamp_assoc[];\n} __packed;\n\n#define A2MP_CREATEPHYSLINK_RSP  0x0B\n#define A2MP_DISCONNPHYSLINK_RSP 0x0D\nstruct a2mp_physlink_rsp {\n\t__u8\tlocal_id;\n\t__u8\tremote_id;\n\t__u8\tstatus;\n} __packed;\n\n \n#define A2MP_STATUS_SUCCESS\t\t\t0x00\n#define A2MP_STATUS_INVALID_CTRL_ID\t\t0x01\n#define A2MP_STATUS_UNABLE_START_LINK_CREATION\t0x02\n#define A2MP_STATUS_NO_PHYSICAL_LINK_EXISTS\t0x02\n#define A2MP_STATUS_COLLISION_OCCURED\t\t0x03\n#define A2MP_STATUS_DISCONN_REQ_RECVD\t\t0x04\n#define A2MP_STATUS_PHYS_LINK_EXISTS\t\t0x05\n#define A2MP_STATUS_SECURITY_VIOLATION\t\t0x06\n\nstruct amp_mgr *amp_mgr_get(struct amp_mgr *mgr);\n\n#if IS_ENABLED(CONFIG_BT_HS)\nint amp_mgr_put(struct amp_mgr *mgr);\nstruct l2cap_chan *a2mp_channel_create(struct l2cap_conn *conn,\n\t\t\t\t       struct sk_buff *skb);\nvoid a2mp_discover_amp(struct l2cap_chan *chan);\n#else\nstatic inline int amp_mgr_put(struct amp_mgr *mgr)\n{\n\treturn 0;\n}\n\nstatic inline struct l2cap_chan *a2mp_channel_create(struct l2cap_conn *conn,\n\t\t\t\t\t\t     struct sk_buff *skb)\n{\n\treturn NULL;\n}\n\nstatic inline void a2mp_discover_amp(struct l2cap_chan *chan)\n{\n}\n#endif\n\nvoid a2mp_send_getinfo_rsp(struct hci_dev *hdev);\nvoid a2mp_send_getampassoc_rsp(struct hci_dev *hdev, u8 status);\nvoid a2mp_send_create_phy_link_req(struct hci_dev *hdev, u8 status);\nvoid a2mp_send_create_phy_link_rsp(struct hci_dev *hdev, u8 status);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}