{
  "module_name": "vport.h",
  "hash_id": "02a0a33924ed319e06c1f9377c6b0f3c4f08bfc2bfe814da3daf3fe086a02470",
  "original_prompt": "Ingested from linux-6.6.14/net/openvswitch/vport.h",
  "human_readable_source": " \n \n\n#ifndef VPORT_H\n#define VPORT_H 1\n\n#include <linux/if_tunnel.h>\n#include <linux/list.h>\n#include <linux/netlink.h>\n#include <linux/openvswitch.h>\n#include <linux/reciprocal_div.h>\n#include <linux/skbuff.h>\n#include <linux/spinlock.h>\n#include <linux/u64_stats_sync.h>\n\n#include \"datapath.h\"\n\nstruct vport;\nstruct vport_parms;\n\n \n\nint ovs_vport_init(void);\nvoid ovs_vport_exit(void);\n\nstruct vport *ovs_vport_add(const struct vport_parms *);\nvoid ovs_vport_del(struct vport *);\n\nstruct vport *ovs_vport_locate(const struct net *net, const char *name);\n\nvoid ovs_vport_get_stats(struct vport *, struct ovs_vport_stats *);\n\nint ovs_vport_get_upcall_stats(struct vport *vport, struct sk_buff *skb);\n\nint ovs_vport_set_options(struct vport *, struct nlattr *options);\nint ovs_vport_get_options(const struct vport *, struct sk_buff *);\n\nint ovs_vport_set_upcall_portids(struct vport *, const struct nlattr *pids);\nint ovs_vport_get_upcall_portids(const struct vport *, struct sk_buff *);\nu32 ovs_vport_find_upcall_portid(const struct vport *, struct sk_buff *);\n\n \nstruct vport_portids {\n\tstruct reciprocal_value rn_ids;\n\tstruct rcu_head rcu;\n\tu32 n_ids;\n\tu32 ids[];\n};\n\n \nstruct vport {\n\tstruct net_device *dev;\n\tnetdevice_tracker dev_tracker;\n\tstruct datapath\t*dp;\n\tstruct vport_portids __rcu *upcall_portids;\n\tu16 port_no;\n\n\tstruct hlist_node hash_node;\n\tstruct hlist_node dp_hash_node;\n\tconst struct vport_ops *ops;\n\tstruct vport_upcall_stats_percpu __percpu *upcall_stats;\n\n\tstruct list_head detach_list;\n\tstruct rcu_head rcu;\n};\n\n \nstruct vport_parms {\n\tconst char *name;\n\tenum ovs_vport_type type;\n\tint desired_ifindex;\n\tstruct nlattr *options;\n\n\t \n\tstruct datapath *dp;\n\tu16 port_no;\n\tstruct nlattr *upcall_portids;\n};\n\n \nstruct vport_ops {\n\tenum ovs_vport_type type;\n\n\t \n\tstruct vport *(*create)(const struct vport_parms *);\n\tvoid (*destroy)(struct vport *);\n\n\tint (*set_options)(struct vport *, struct nlattr *);\n\tint (*get_options)(const struct vport *, struct sk_buff *);\n\n\tint (*send)(struct sk_buff *skb);\n\tstruct module *owner;\n\tstruct list_head list;\n};\n\n \nstruct vport_upcall_stats_percpu {\n\tstruct u64_stats_sync syncp;\n\tu64_stats_t n_success;\n\tu64_stats_t n_fail;\n};\n\nstruct vport *ovs_vport_alloc(int priv_size, const struct vport_ops *,\n\t\t\t      const struct vport_parms *);\nvoid ovs_vport_free(struct vport *);\n\n#define VPORT_ALIGN 8\n\n \nstatic inline void *vport_priv(const struct vport *vport)\n{\n\treturn (u8 *)(uintptr_t)vport + ALIGN(sizeof(struct vport), VPORT_ALIGN);\n}\n\n \nstatic inline struct vport *vport_from_priv(void *priv)\n{\n\treturn (struct vport *)((u8 *)priv - ALIGN(sizeof(struct vport), VPORT_ALIGN));\n}\n\nint ovs_vport_receive(struct vport *, struct sk_buff *,\n\t\t      const struct ip_tunnel_info *);\n\nstatic inline const char *ovs_vport_name(struct vport *vport)\n{\n\treturn vport->dev->name;\n}\n\nint __ovs_vport_ops_register(struct vport_ops *ops);\n#define ovs_vport_ops_register(ops)\t\t\\\n\t({\t\t\t\t\t\\\n\t\t(ops)->owner = THIS_MODULE;\t\\\n\t\t__ovs_vport_ops_register(ops);\t\\\n\t})\n\nvoid ovs_vport_ops_unregister(struct vport_ops *ops);\nvoid ovs_vport_send(struct vport *vport, struct sk_buff *skb, u8 mac_proto);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}