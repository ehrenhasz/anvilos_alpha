{
  "module_name": "tmon.8",
  "hash_id": "bbd9c383218453dc34309ca53f69c101a9c4aeba6c0b73d9bb96903b57db5f5e",
  "original_prompt": "Ingested from linux-6.6.14/tools/thermal/tmon/tmon.8",
  "human_readable_source": ".TH TMON 8\n# SPDX-License-Identifier: GPL-2.0\n.SH NAME\n\\fBtmon\\fP - A monitoring and testing tool for Linux kernel thermal subsystem\n\n.SH SYNOPSIS\n.ft B\n.B tmon\n.RB [ Options ]\n.br\n.SH DESCRIPTION\n\\fBtmon \\fP can be used to visualize thermal relationship and\nreal-time thermal data; tune\nand test cooling devices and sensors; collect thermal data for offline\nanalysis and plot. \\fBtmon\\fP must be run as root in order to control device\nstates via sysfs.\n.PP\n\\fBFunctions\\fP\n.PP\n.nf\n1. Thermal relationships:\n- show thermal zone information\n- show cooling device information\n- show trip point binding within each thermal zone\n- show trip point and cooling device instance bindings\n.PP\n2. Real time data display\n- show temperature of all thermal zones w.r.t. its trip points and types\n- show states of all cooling devices\n.PP\n3. Thermal relationship learning and device tuning\n- with a built-in Proportional Integral Derivative (\\fBPID\\fP)\ncontroller, user can pair a cooling device to a thermal sensor for\ntesting the effectiveness and learn about the thermal distance between the two\n- allow manual control of cooling device states and target temperature\n.PP\n4. Data logging in /var/tmp/tmon.log\n- contains thermal configuration data, i.e. cooling device, thermal\n zones, and trip points. Can be used for data  collection in remote\n debugging.\n- log real-time thermal data into space separated format that can be\n directly consumed by plotting tools such as Rscript.\n\n.SS Options\n.PP\nThe \\fB-c --control\\fP option sets a cooling device type to control temperature\nof a thermal zone\n.PP\nThe \\fB-d --daemon\\fP option runs \\fBtmon \\fP as daemon without user interface\n.PP\nThe \\fB-g --debug\\fP option allow debug messages to be stored in syslog\n.PP\nThe \\fB-h --help\\fP option shows help message\n.PP\nThe \\fB-l --log\\fP option write data to /var/tmp/tmon.log\n.PP\nThe \\fB-t --time-interval\\fP option sets the polling interval in seconds\n.PP\nThe \\fB-T --target-temp\\fP option sets the initial target temperature\n.PP\nThe \\fB-v --version\\fP option shows the version of \\fBtmon \\fP\n.PP\nThe \\fB-z --zone\\fP option sets the target therma zone instance to be controlled\n.PP\n\n.SH FIELD DESCRIPTIONS\n.nf\n.PP\n\\fBP \\fP passive cooling trip point type\n\\fBA \\fP active cooling trip point type (fan)\n\\fBC \\fP critical trip point type\n\\fBA \\fP hot trip point type\n\\fBkp \\fP proportional gain of \\fBPID\\fP controller\n\\fBki \\fP integral gain of \\fBPID\\fP controller\n\\fBkd \\fP derivative gain of \\fBPID\\fP controller\n\n.SH REQUIREMENT\nBuild depends on ncurses\n.PP\nRuntime depends on window size large enough to show the number of\ndevices found on the system.\n\n.PP\n\n.SH INTERACTIVE COMMANDS\n.pp\n.nf\n\\fBCtrl-C, q/Q\\fP stops \\fBtmon\\fP\n\\fBTAB\\fP shows tuning pop up panel, choose a letter to modify\n\n.SH EXAMPLES\nWithout any parameters, tmon is in monitoring only mode and refresh\nscreen every 1 second.\n.PP\n1. For monitoring only:\n.nf\n$ sudo ./tmon\n\n2. Use Processor cooling device to control thermal zone 0 at default 65C.\n$ sudo ./tmon -c Processor -z 0\n\n3. Use intel_powerclamp(idle injection) cooling device to control thermal zone 1\n$ sudo ./tmon -c intel_powerclamp -z 1\n\n4. Turn on debug and collect data log at /var/tmp/tmon.log\n$ sudo ./tmon -g -l\n\nFor example, the log below shows PID controller was adjusting current states\nfor all cooling devices with \"Processor\" type such that thermal zone 0\ncan stay below 65 dC.\n\n#---------- THERMAL DATA LOG STARTED -----------\nSamples TargetTemp acpitz0    acpitz1    Fan0 Fan1 Fan2 Fan3 Fan4 Fan5\nFan6 Fan7 Fan8 Fan9 Processor10 Processor11 Processor12 Processor13\nLCD14 intel_powerclamp15 1 65.0 65 65 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0 2\n65.0 66 65 0 0 0 0 0 0 0 0 0 0 4 4 4 4 6 0 3 65.0 60 54 0 0 0 0 0 0 0 0\n0 0 4 4 4 4 6 0 4 65.0 53 53 0 0 0 0 0 0 0 0 0 0 4 4 4 4 6 0\n5 65.0 52 52 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0\n6 65.0 53 65 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0\n7 65.0 68 70 0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0\n8 65.0 68 68 0 0 0 0 0 0 0 0 0 0 5 5 5 5 6 0\n9 65.0 68 68 0 0 0 0 0 0 0 0 0 0 6 6 6 6 6 0\n10 65.0 67 67 0 0 0 0 0 0 0 0 0 0 7 7 7 7 6 0\n11 65.0 67 67 0 0 0 0 0 0 0 0 0 0 8 8 8 8 6 0\n12 65.0 67 67 0 0 0 0 0 0 0 0 0 0 8 8 8 8 6 0\n13 65.0 67 67 0 0 0 0 0 0 0 0 0 0 9 9 9 9 6 0\n14 65.0 66 66 0 0 0 0 0 0 0 0 0 0 10 10 10 10 6 0\n15 65.0 66 67 0 0 0 0 0 0 0 0 0 0 10 10 10 10 6 0\n16 65.0 66 66 0 0 0 0 0 0 0 0 0 0 11 11 11 11 6 0\n17 65.0 66 66 0 0 0 0 0 0 0 0 0 0 11 11 11 11 6 0\n18 65.0 64 61 0 0 0 0 0 0 0 0 0 0 11 11 11 11 6 0\n19 65.0 60 59 0 0 0 0 0 0 0 0 0 0 12 12 12 12 6 0\n\nData can be read directly into an array by an example R-script below:\n\n#!/usr/bin/Rscript\ntdata <- read.table(\"/var/tmp/tmon.log\", header=T, comment.char=\"#\")\nattach(tdata)\njpeg(\"tmon.jpg\")\nX11()\ng_range <- range(0, intel_powerclamp15, TargetTemp, acpitz0)\nplot( Samples, intel_powerclamp15, col=\"blue\", ylim=g_range, axes=FALSE, ann=FALSE)\npar(new=TRUE)\nlines(TargetTemp, type=\"o\", pch=22, lty=2, col=\"red\")\ndev.off()\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}