{
  "module_name": "tmon.h",
  "hash_id": "66f04c4ef7033957f6b64125c06424f1141b99f190a8212e6e576e468d7794a7",
  "original_prompt": "Ingested from linux-6.6.14/tools/thermal/tmon/tmon.h",
  "human_readable_source": " \n \n\n#ifndef TMON_H\n#define TMON_H\n\n#define MAX_DISP_TEMP 125\n#define MAX_CTRL_TEMP 105\n#define MIN_CTRL_TEMP 40\n#define MAX_NR_TZONE 16\n#define MAX_NR_CDEV 32\n#define MAX_NR_TRIP 16\n#define MAX_NR_CDEV_TRIP 12  \n#define MAX_TEMP_KC 140000\n \n#define DATA_LEFT_ALIGN 10\n#define NR_LINES_TZDATA 1\n#define TMON_LOG_FILE \"/var/tmp/tmon.log\"\n\n#include <sys/time.h>\n#include <pthread.h>\n\nextern unsigned long ticktime;\nextern double time_elapsed;\nextern unsigned long target_temp_user;\nextern int dialogue_on;\nextern char ctrl_cdev[];\nextern pthread_mutex_t input_lock;\nextern int tmon_exit;\nextern int target_thermal_zone;\n \nstruct thermal_data_record {\n\tstruct timeval tv;\n\tunsigned long temp[MAX_NR_TZONE];\n\tdouble pid_out_pct;\n};\n\nstruct cdev_info {\n\tchar type[64];\n\tint instance;\n\tunsigned long max_state;\n\tunsigned long cur_state;\n\tunsigned long flag;\n};\n\nenum trip_type {\n\tTHERMAL_TRIP_CRITICAL,\n\tTHERMAL_TRIP_HOT,\n\tTHERMAL_TRIP_PASSIVE,\n\tTHERMAL_TRIP_ACTIVE,\n\tNR_THERMAL_TRIP_TYPE,\n};\n\nstruct trip_point {\n\tenum trip_type type;\n\tunsigned long temp;\n\tunsigned long hysteresis;\n\tint attribute;  \n};\n\n \nstruct tz_info {\n\tchar type[256];  \n\tint instance;\n\tint passive;  \n\tint nr_cdev;  \n\tint nr_trip_pts;\n\tstruct trip_point tp[MAX_NR_TRIP];\n\tunsigned long cdev_binding;  \n\t \n\tunsigned long trip_binding[MAX_NR_CDEV];\n};\n\nstruct tmon_platform_data {\n\tint nr_tz_sensor;\n\tint nr_cooling_dev;\n\t \n\tint max_tz_instance;\n\tint max_cdev_instance;\n\tstruct tz_info *tzi;\n\tstruct cdev_info *cdi;\n};\n\nstruct control_ops {\n\tvoid (*set_ratio)(unsigned long ratio);\n\tunsigned long (*get_ratio)(unsigned long ratio);\n\n};\n\nenum cdev_types {\n\tCDEV_TYPE_PROC,\n\tCDEV_TYPE_FAN,\n\tCDEV_TYPE_MEM,\n\tCDEV_TYPE_NR,\n};\n\n \nenum tzone_types {\n\tTZONE_TYPE_ACPI,\n\tTZONE_TYPE_PCH,\n\tTZONE_TYPE_NR,\n};\n\n \n#define LIMIT_HIGH (95)\n#define LIMIT_LOW  (2)\n\nstruct pid_params {\n\tdouble kp;   \n\tdouble ki;   \n\tdouble kd;   \n\tdouble ts;\n\tdouble k_lpf;\n\n\tdouble t_target;\n\tdouble y_k;\n};\n\nextern int init_thermal_controller(void);\nextern void controller_handler(const double xk, double *yk);\n\nextern struct tmon_platform_data ptdata;\nextern struct pid_params p_param;\n\nextern FILE *tmon_log;\nextern int cur_thermal_record;  \nextern struct thermal_data_record trec[];\nextern const char *trip_type_name[];\nextern unsigned long no_control;\n\nextern void initialize_curses(void);\nextern void show_controller_stats(char *line);\nextern void show_title_bar(void);\nextern void setup_windows(void);\nextern void disable_tui(void);\nextern void show_sensors_w(void);\nextern void show_data_w(void);\nextern void write_status_bar(int x, char *line);\nextern void show_control_w();\n\nextern void show_cooling_device(void);\nextern void show_dialogue(void);\nextern int update_thermal_data(void);\n\nextern int probe_thermal_sysfs(void);\nextern void free_thermal_data(void);\nextern\tvoid resize_handler(int sig);\nextern void set_ctrl_state(unsigned long state);\nextern void get_ctrl_state(unsigned long *state);\nextern void *handle_tui_events(void *arg);\nextern int sysfs_set_ulong(char *path, char *filename, unsigned long val);\nextern int zone_instance_to_index(int zone_inst);\nextern void close_windows(void);\n\n#define PT_COLOR_DEFAULT    1\n#define PT_COLOR_HEADER_BAR 2\n#define PT_COLOR_ERROR      3\n#define PT_COLOR_RED        4\n#define PT_COLOR_YELLOW     5\n#define PT_COLOR_GREEN      6\n#define PT_COLOR_BRIGHT     7\n#define PT_COLOR_BLUE\t    8\n\n \n#define TZONE_RECORD_SIZE 12\n#define TZ_LEFT_ALIGN 32\n#define CDEV_NAME_SIZE 20\n#define CDEV_FLAG_IN_CONTROL (1 << 0)\n\n \n#define DIAG_X 48\n#define DIAG_Y 8\n#define THERMAL_SYSFS \"/sys/class/thermal\"\n#define CDEV \"cooling_device\"\n#define TZONE \"thermal_zone\"\n#define TDATA_LEFT 16\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}