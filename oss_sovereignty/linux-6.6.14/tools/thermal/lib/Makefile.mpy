{
  "module_name": "Makefile",
  "hash_id": "7a528a583de6d8b3dc12af8e8c5d03ff3f8cf11d57c79b71ea016ecff965fd66",
  "original_prompt": "Ingested from linux-6.6.14/tools/thermal/lib/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: (LGPL-2.1 OR BSD-2-Clause)\n# Most of this file is copied from tools/lib/perf/Makefile\n\nLIBTHERMAL_TOOLS_VERSION = 0\nLIBTHERMAL_TOOLS_PATCHLEVEL = 0\nLIBTHERMAL_TOOLS_EXTRAVERSION = 1\n\nMAKEFLAGS += --no-print-directory\n\nifeq ($(srctree),)\nsrctree := $(patsubst %/,%,$(dir $(CURDIR)))\nsrctree := $(patsubst %/,%,$(dir $(srctree)))\nsrctree := $(patsubst %/,%,$(dir $(srctree)))\n# $(info Determined 'srctree' to be $(srctree))\nendif\n\nINSTALL = install\n\n# Use DESTDIR for installing into a different root directory.\n# This is useful for building a package. The program will be\n# installed in this directory as if it was the root directory.\n# Then the build tool can move it later.\nDESTDIR ?=\nDESTDIR_SQ = '$(subst ','\\'',$(DESTDIR))'\n\ninclude $(srctree)/tools/scripts/Makefile.include\ninclude $(srctree)/tools/scripts/Makefile.arch\n\nifeq ($(LP64), 1)\n  libdir_relative = lib64\nelse\n  libdir_relative = lib\nendif\n\nprefix ?=\nlibdir = $(prefix)/$(libdir_relative)\n\n# Shell quotes\nlibdir_SQ = $(subst ','\\'',$(libdir))\nlibdir_relative_SQ = $(subst ','\\'',$(libdir_relative))\n\nifeq (\"$(origin V)\", \"command line\")\n  VERBOSE = $(V)\nendif\nifndef VERBOSE\n  VERBOSE = 0\nendif\n\nifeq ($(VERBOSE),1)\n  Q =\nelse\n  Q = @\nendif\n\n# Set compile option CFLAGS\nifdef EXTRA_CFLAGS\n  CFLAGS := $(EXTRA_CFLAGS)\nelse\n  CFLAGS := -g -Wall\nendif\n\nINCLUDES = \\\n-I/usr/include/libnl3 \\\n-I$(srctree)/tools/lib/thermal/include \\\n-I$(srctree)/tools/lib/ \\\n-I$(srctree)/tools/include \\\n-I$(srctree)/tools/arch/$(SRCARCH)/include/ \\\n-I$(srctree)/tools/arch/$(SRCARCH)/include/uapi \\\n-I$(srctree)/tools/include/uapi\n\n# Append required CFLAGS\noverride CFLAGS += $(EXTRA_WARNINGS)\noverride CFLAGS += -Werror -Wall\noverride CFLAGS += -fPIC\noverride CFLAGS += $(INCLUDES)\noverride CFGLAS += -Wl,-L.\noverride CFGLAS += -Wl,-lthermal\n\nall:\n\nexport srctree OUTPUT CC LD CFLAGS V\nexport DESTDIR DESTDIR_SQ\n\ninclude $(srctree)/tools/build/Makefile.include\n\nPATCHLEVEL    = $(LIBTHERMAL_TOOLS_PATCHLEVEL)\nEXTRAVERSION  = $(LIBTHERMAL_TOOLS_EXTRAVERSION)\nVERSION       = $(LIBTHERMAL_TOOLS_VERSION).$(LIBTHERMAL_TOOLS_PATCHLEVEL).$(LIBTHERMAL_TOOLS_EXTRAVERSION)\n\nLIBTHERMAL_TOOLS_SO := $(OUTPUT)libthermal_tools.so.$(VERSION)\nLIBTHERMAL_TOOLS_A  := $(OUTPUT)libthermal_tools.a\nLIBTHERMAL_TOOLS_IN := $(OUTPUT)libthermal_tools-in.o\nLIBTHERMAL_TOOLS_PC := $(OUTPUT)libthermal_tools.pc\n\nLIBTHERMAL_TOOLS_ALL := $(LIBTHERMAL_TOOLS_A) $(OUTPUT)libthermal_tools.so*\n\n$(LIBTHERMAL_TOOLS_IN): FORCE\n\t$(Q)$(MAKE) $(build)=libthermal_tools\n\n$(LIBTHERMAL_TOOLS_A): $(LIBTHERMAL_TOOLS_IN)\n\t$(QUIET_AR)$(RM) $@ && $(AR) rcs $@ $(LIBTHERMAL_TOOLS_IN)\n\n$(LIBTHERMAL_TOOLS_SO): $(LIBTHERMAL_TOOLS_IN)\n\t$(QUIET_LINK)$(CC) --shared -Wl,-soname,libthermal_tools.so $^ -o $@\n\t@ln -sf $(@F) $(OUTPUT)libthermal_tools.so\n\t@ln -sf $(@F) $(OUTPUT)libthermal_tools.so.$(LIBTHERMAL_TOOLS_VERSION)\n\n\nlibs: $(LIBTHERMAL_TOOLS_A) $(LIBTHERMAL_TOOLS_SO) $(LIBTHERMAL_TOOLS_PC)\n\nall: fixdep\n\t$(Q)$(MAKE) libs\n\nclean:\n\t$(call QUIET_CLEAN, libthermal_tools) $(RM) $(LIBTHERMAL_TOOLS_A) \\\n                *.o *~ *.a *.so *.so.$(VERSION) *.so.$(LIBTHERMAL_TOOLS_VERSION) .*.d .*.cmd LIBTHERMAL_TOOLS-CFLAGS $(LIBTHERMAL_TOOLS_PC)\n\n$(LIBTHERMAL_TOOLS_PC):\n\t$(QUIET_GEN)sed -e \"s|@PREFIX@|$(prefix)|\" \\\n\t\t-e \"s|@LIBDIR@|$(libdir_SQ)|\" \\\n\t\t-e \"s|@VERSION@|$(VERSION)|\" \\\n\t\t< libthermal_tools.pc.template > $@\n\ndefine do_install_mkdir\n\tif [ ! -d '$(DESTDIR_SQ)$1' ]; then             \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$1'; \\\n\tfi\nendef\n\ndefine do_install\n\tif [ ! -d '$(DESTDIR_SQ)$2' ]; then             \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$2'; \\\n\tfi;                                             \\\n\t$(INSTALL) $1 $(if $3,-m $3,) '$(DESTDIR_SQ)$2'\nendef\n\ninstall_lib: libs\n\t$(call QUIET_INSTALL, $(LIBTHERMAL_TOOLS_ALL)) \\\n\t\t$(call do_install_mkdir,$(libdir_SQ)); \\\n\t\tcp -fpR $(LIBTHERMAL_TOOLS_ALL) $(DESTDIR)$(libdir_SQ)\n\ninstall_headers:\n\t$(call QUIET_INSTALL, headers) \\\n\t\t$(call do_install,include/thermal.h,$(prefix)/include/thermal,644); \\\n\ninstall_pkgconfig: $(LIBTHERMAL_TOOLS_PC)\n\t$(call QUIET_INSTALL, $(LIBTHERMAL_TOOLS_PC)) \\\n\t\t$(call do_install,$(LIBTHERMAL_TOOLS_PC),$(libdir_SQ)/pkgconfig,644)\n\ninstall_doc:\n\t$(Q)$(MAKE) -C Documentation install-man install-html install-examples\n\n#install: install_lib install_headers install_pkgconfig install_doc\ninstall: install_lib install_headers install_pkgconfig\n\nFORCE:\n\n.PHONY: all install clean FORCE\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}