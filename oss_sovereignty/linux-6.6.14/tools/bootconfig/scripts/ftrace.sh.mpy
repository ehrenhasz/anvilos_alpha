{
  "module_name": "ftrace.sh",
  "hash_id": "f08d97602e6a862ada5bb6800f1711436faba2885b79ba1142ee5a983b335594",
  "original_prompt": "Ingested from linux-6.6.14/tools/bootconfig/scripts/ftrace.sh",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\n\nclear_trace() { # reset trace output\n    echo > trace\n}\n\ndisable_tracing() { # stop trace recording\n    echo 0 > tracing_on\n}\n\nenable_tracing() { # start trace recording\n    echo 1 > tracing_on\n}\n\nreset_tracer() { # reset the current tracer\n    echo nop > current_tracer\n}\n\nreset_trigger_file() {\n    # remove action triggers first\n    grep -H ':on[^:]*(' $@ |\n    while read line; do\n        cmd=`echo $line | cut -f2- -d: | cut -f1 -d\"[\"`\n\tfile=`echo $line | cut -f1 -d:`\n\techo \"!$cmd\" >> $file\n    done\n    grep -Hv ^# $@ |\n    while read line; do\n        cmd=`echo $line | cut -f2- -d: | cut -f1 -d\"[\"`\n\tfile=`echo $line | cut -f1 -d:`\n\techo \"!$cmd\" > $file\n    done\n}\n\nreset_trigger() { # reset all current setting triggers\n    if [ -d events/synthetic ]; then\n        reset_trigger_file events/synthetic/*/trigger\n    fi\n    reset_trigger_file events/*/*/trigger\n}\n\nreset_events_filter() { # reset all current setting filters\n    grep -v ^none events/*/*/filter |\n    while read line; do\n\techo 0 > `echo $line | cut -f1 -d:`\n    done\n}\n\nreset_ftrace_filter() { # reset all triggers in set_ftrace_filter\n    if [ ! -f set_ftrace_filter ]; then\n      return 0\n    fi\n    echo > set_ftrace_filter\n    grep -v '^#' set_ftrace_filter | while read t; do\n\ttr=`echo $t | cut -d: -f2`\n\tif [ \"$tr\" = \"\" ]; then\n\t    continue\n\tfi\n\tif ! grep -q \"$t\" set_ftrace_filter; then\n\t\tcontinue;\n\tfi\n\tname=`echo $t | cut -d: -f1 | cut -d' ' -f1`\n\tif [ $tr = \"enable_event\" -o $tr = \"disable_event\" ]; then\n\t    tr=`echo $t | cut -d: -f2-4`\n\t    limit=`echo $t | cut -d: -f5`\n\telse\n\t    tr=`echo $t | cut -d: -f2`\n\t    limit=`echo $t | cut -d: -f3`\n\tfi\n\tif [ \"$limit\" != \"unlimited\" ]; then\n\t    tr=\"$tr:$limit\"\n\tfi\n\techo \"!$name:$tr\" > set_ftrace_filter\n    done\n}\n\ndisable_events() {\n    echo 0 > events/enable\n}\n\nclear_synthetic_events() { # reset all current synthetic events\n    grep -v ^# synthetic_events |\n    while read line; do\n        echo \"!$line\" >> synthetic_events\n    done\n}\n\ninitialize_ftrace() { # Reset ftrace to initial-state\n# As the initial state, ftrace will be set to nop tracer,\n# no events, no triggers, no filters, no function filters,\n# no probes, and tracing on.\n    disable_tracing\n    reset_tracer\n    reset_trigger\n    reset_events_filter\n    reset_ftrace_filter\n    disable_events\n    [ -f set_event_pid ] && echo > set_event_pid\n    [ -f set_ftrace_pid ] && echo > set_ftrace_pid\n    [ -f set_ftrace_notrace ] && echo > set_ftrace_notrace\n    [ -f set_graph_function ] && echo | tee set_graph_*\n    [ -f stack_trace_filter ] && echo > stack_trace_filter\n    [ -f kprobe_events ] && echo > kprobe_events\n    [ -f uprobe_events ] && echo > uprobe_events\n    [ -f synthetic_events ] && echo > synthetic_events\n    [ -f snapshot ] && echo 0 > snapshot\n    clear_trace\n    enable_tracing\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}