{
  "module_name": "isst-display.c",
  "hash_id": "95ebc18dcf58e9dd71450202bc6981436c93abe48ff89484b5fe027325c6b7dd",
  "original_prompt": "Ingested from linux-6.6.14/tools/power/x86/intel-speed-select/isst-display.c",
  "human_readable_source": "\n \n\n#include \"isst.h\"\n\nstatic void printcpulist(int str_len, char *str, int mask_size,\n\t\t\t cpu_set_t *cpu_mask)\n{\n\tint i, first, curr_index, index;\n\n\tif (!CPU_COUNT_S(mask_size, cpu_mask)) {\n\t\tsnprintf(str, str_len, \"none\");\n\t\treturn;\n\t}\n\n\tcurr_index = 0;\n\tfirst = 1;\n\tfor (i = 0; i < get_topo_max_cpus(); ++i) {\n\t\tif (!CPU_ISSET_S(i, mask_size, cpu_mask))\n\t\t\tcontinue;\n\t\tif (!first) {\n\t\t\tindex = snprintf(&str[curr_index],\n\t\t\t\t\t str_len - curr_index, \",\");\n\t\t\tcurr_index += index;\n\t\t\tif (curr_index >= str_len)\n\t\t\t\tbreak;\n\t\t}\n\t\tindex = snprintf(&str[curr_index], str_len - curr_index, \"%d\",\n\t\t\t\t i);\n\t\tcurr_index += index;\n\t\tif (curr_index >= str_len)\n\t\t\tbreak;\n\t\tfirst = 0;\n\t}\n}\n\nstatic void printcpumask(int str_len, char *str, int mask_size,\n\t\t\t cpu_set_t *cpu_mask)\n{\n\tint i, max_cpus = get_topo_max_cpus();\n\tunsigned int *mask;\n\tint size, index, curr_index;\n\n\tsize = max_cpus / (sizeof(unsigned int) * 8);\n\tif (max_cpus % (sizeof(unsigned int) * 8))\n\t\tsize++;\n\n\tmask = calloc(size, sizeof(unsigned int));\n\tif (!mask)\n\t\treturn;\n\n\tfor (i = 0; i < max_cpus; ++i) {\n\t\tint mask_index, bit_index;\n\n\t\tif (!CPU_ISSET_S(i, mask_size, cpu_mask))\n\t\t\tcontinue;\n\n\t\tmask_index = i / (sizeof(unsigned int) * 8);\n\t\tbit_index = i % (sizeof(unsigned int) * 8);\n\t\tmask[mask_index] |= BIT(bit_index);\n\t}\n\n\tcurr_index = 0;\n\tfor (i = size - 1; i >= 0; --i) {\n\t\tindex = snprintf(&str[curr_index], str_len - curr_index, \"%08x\",\n\t\t\t\t mask[i]);\n\t\tcurr_index += index;\n\t\tif (curr_index >= str_len)\n\t\t\tbreak;\n\t\tif (i) {\n\t\t\tstrncat(&str[curr_index], \",\", str_len - curr_index);\n\t\t\tcurr_index++;\n\t\t}\n\t\tif (curr_index >= str_len)\n\t\t\tbreak;\n\t}\n\n\tfree(mask);\n}\n\nstatic void format_and_print_txt(FILE *outf, int level, char *header,\n\t\t\t\t char *value)\n{\n\tchar *spaces = \"  \";\n\tstatic char delimiters[256];\n\tint i, j = 0;\n\n\tif (!level)\n\t\treturn;\n\n\tif (level == 1) {\n\t\tstrcpy(delimiters, \" \");\n\t} else {\n\t\tfor (i = 0; i < level - 1; ++i)\n\t\t\tj += snprintf(&delimiters[j], sizeof(delimiters) - j,\n\t\t\t\t      \"%s\", spaces);\n\t}\n\n\tif (header && value) {\n\t\tfprintf(outf, \"%s\", delimiters);\n\t\tfprintf(outf, \"%s:%s\\n\", header, value);\n\t} else if (header) {\n\t\tfprintf(outf, \"%s\", delimiters);\n\t\tfprintf(outf, \"%s\\n\", header);\n\t}\n}\n\nstatic int last_level;\nstatic void format_and_print(FILE *outf, int level, char *header, char *value)\n{\n\tchar *spaces = \"  \";\n\tstatic char delimiters[256];\n\tint i;\n\n\tif (!out_format_is_json()) {\n\t\tformat_and_print_txt(outf, level, header, value);\n\t\treturn;\n\t}\n\n\tif (level == 0) {\n\t\tif (header)\n\t\t\tfprintf(outf, \"{\");\n\t\telse\n\t\t\tfprintf(outf, \"\\n}\\n\");\n\n\t} else {\n\t\tint j = 0;\n\n\t\tfor (i = 0; i < level; ++i)\n\t\t\tj += snprintf(&delimiters[j], sizeof(delimiters) - j,\n\t\t\t\t      \"%s\", spaces);\n\n\t\tif (last_level == level)\n\t\t\tfprintf(outf, \",\\n\");\n\n\t\tif (value) {\n\t\t\tif (last_level != level)\n\t\t\t\tfprintf(outf, \"\\n\");\n\n\t\t\tfprintf(outf, \"%s\\\"%s\\\": \", delimiters, header);\n\t\t\tfprintf(outf, \"\\\"%s\\\"\", value);\n\t\t} else {\n\t\t\tfor (i = last_level - 1; i >= level; --i) {\n\t\t\t\tint k = 0;\n\n\t\t\t\tfor (j = i; j > 0; --j)\n\t\t\t\t\tk += snprintf(&delimiters[k],\n\t\t\t\t\t\t      sizeof(delimiters) - k,\n\t\t\t\t\t\t      \"%s\", spaces);\n\t\t\t\tif (i == level && header)\n\t\t\t\t\tfprintf(outf, \"\\n%s},\", delimiters);\n\t\t\t\telse\n\t\t\t\t\tfprintf(outf, \"\\n%s}\", delimiters);\n\t\t\t}\n\t\t\tif (abs(last_level - level) < 3)\n\t\t\t\tfprintf(outf, \"\\n\");\n\t\t\tif (header)\n\t\t\t\tfprintf(outf, \"%s\\\"%s\\\": {\", delimiters,\n\t\t\t\t\theader);\n\t\t}\n\t}\n\n\tlast_level = level;\n}\n\nstatic int print_package_info(struct isst_id *id, FILE *outf)\n{\n\tchar header[256];\n\tint level = 1;\n\n\tif (out_format_is_json()) {\n\t\tif (api_version() > 1)\n\t\t\tsnprintf(header, sizeof(header), \"package-%d:die-%d:powerdomain-%d:cpu-%d\",\n\t\t\t\t id->pkg, id->die, id->punit, id->cpu);\n\t\telse\n\t\t\tsnprintf(header, sizeof(header), \"package-%d:die-%d:cpu-%d\",\n\t\t\t\t id->pkg, id->die, id->cpu);\n\t\tformat_and_print(outf, level, header, NULL);\n\t\treturn 1;\n\t}\n\tsnprintf(header, sizeof(header), \"package-%d\", id->pkg);\n\tformat_and_print(outf, level++, header, NULL);\n\tsnprintf(header, sizeof(header), \"die-%d\", id->die);\n\tformat_and_print(outf, level++, header, NULL);\n\tif (api_version() > 1) {\n\t\tsnprintf(header, sizeof(header), \"powerdomain-%d\", id->punit);\n\t\tformat_and_print(outf, level++, header, NULL);\n\t}\n\tsnprintf(header, sizeof(header), \"cpu-%d\", id->cpu);\n\tformat_and_print(outf, level, header, NULL);\n\n\treturn level;\n}\n\nstatic void _isst_pbf_display_information(struct isst_id *id, FILE *outf, int level,\n\t\t\t\t\t  struct isst_pbf_info *pbf_info,\n\t\t\t\t\t  int disp_level)\n{\n\tchar header[256];\n\tchar value[512];\n\n\tsnprintf(header, sizeof(header), \"speed-select-base-freq-properties\");\n\tformat_and_print(outf, disp_level, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"high-priority-base-frequency(MHz)\");\n\tsnprintf(value, sizeof(value), \"%d\",\n\t\t pbf_info->p1_high * isst_get_disp_freq_multiplier());\n\tformat_and_print(outf, disp_level + 1, header, value);\n\n\tsnprintf(header, sizeof(header), \"high-priority-cpu-mask\");\n\tprintcpumask(sizeof(value), value, pbf_info->core_cpumask_size,\n\t\t     pbf_info->core_cpumask);\n\tformat_and_print(outf, disp_level + 1, header, value);\n\n\tsnprintf(header, sizeof(header), \"high-priority-cpu-list\");\n\tprintcpulist(sizeof(value), value,\n\t\t     pbf_info->core_cpumask_size,\n\t\t     pbf_info->core_cpumask);\n\tformat_and_print(outf, disp_level + 1, header, value);\n\n\tsnprintf(header, sizeof(header), \"low-priority-base-frequency(MHz)\");\n\tsnprintf(value, sizeof(value), \"%d\",\n\t\t pbf_info->p1_low * isst_get_disp_freq_multiplier());\n\tformat_and_print(outf, disp_level + 1, header, value);\n\n\tif (is_clx_n_platform())\n\t\treturn;\n\n\tsnprintf(header, sizeof(header), \"tjunction-temperature(C)\");\n\tsnprintf(value, sizeof(value), \"%d\", pbf_info->t_prochot);\n\tformat_and_print(outf, disp_level + 1, header, value);\n\n\tsnprintf(header, sizeof(header), \"thermal-design-power(W)\");\n\tsnprintf(value, sizeof(value), \"%d\", pbf_info->tdp);\n\tformat_and_print(outf, disp_level + 1, header, value);\n}\n\nstatic void _isst_fact_display_information(struct isst_id *id, FILE *outf, int level,\n\t\t\t\t\t   int fact_bucket, int fact_avx,\n\t\t\t\t\t   struct isst_fact_info *fact_info,\n\t\t\t\t\t   int base_level)\n{\n\tstruct isst_fact_bucket_info *bucket_info = fact_info->bucket_info;\n\tint trl_max_levels = isst_get_trl_max_levels();\n\tchar header[256];\n\tchar value[256];\n\tint print = 0, j;\n\n\tfor (j = 0; j < ISST_FACT_MAX_BUCKETS; ++j) {\n\t\tif (fact_bucket != 0xff && fact_bucket != j)\n\t\t\tcontinue;\n\n\t\t \n\t\tif (!bucket_info[j].hp_cores && id->cpu >= 0)\n\t\t\tbreak;\n\n\t\tprint = 1;\n\t}\n\tif (!print) {\n\t\tfprintf(stderr, \"Invalid bucket\\n\");\n\t\treturn;\n\t}\n\n\tsnprintf(header, sizeof(header), \"speed-select-turbo-freq-properties\");\n\tformat_and_print(outf, base_level, header, NULL);\n\tfor (j = 0; j < ISST_FACT_MAX_BUCKETS; ++j) {\n\t\tint i;\n\n\t\tif (fact_bucket != 0xff && fact_bucket != j)\n\t\t\tcontinue;\n\n\t\tif (!bucket_info[j].hp_cores)\n\t\t\tbreak;\n\n\t\tsnprintf(header, sizeof(header), \"bucket-%d\", j);\n\t\tformat_and_print(outf, base_level + 1, header, NULL);\n\n\t\tsnprintf(header, sizeof(header), \"high-priority-cores-count\");\n\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t bucket_info[j].hp_cores);\n\t\tformat_and_print(outf, base_level + 2, header, value);\n\t\tfor (i = 0; i < trl_max_levels; i++) {\n\t\t\tif (!bucket_info[j].hp_ratios[i] || (fact_avx != 0xFF && !(fact_avx & (1 << i))))\n\t\t\t\tcontinue;\n\t\t\tif (i == 0 && api_version() == 1 && !is_emr_platform())\n\t\t\t\tsnprintf(header, sizeof(header),\n\t\t\t\t\t\"high-priority-max-frequency(MHz)\");\n\t\t\telse\n\t\t\t\tsnprintf(header, sizeof(header),\n\t\t\t\t\t\"high-priority-max-%s-frequency(MHz)\", isst_get_trl_level_name(i));\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\tbucket_info[j].hp_ratios[i] * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, base_level + 2, header, value);\n\t\t}\n\t}\n\tsnprintf(header, sizeof(header),\n\t\t \"speed-select-turbo-freq-clip-frequencies\");\n\tformat_and_print(outf, base_level + 1, header, NULL);\n\n\tfor (j = 0; j < trl_max_levels; j++) {\n\t\tif (!fact_info->lp_ratios[j])\n\t\t\tcontinue;\n\n\t\t \n\t\tif (j == 0 && api_version() == 1 && !is_emr_platform())\n\t\t\tsnprintf(header, sizeof(header), \"low-priority-max-frequency(MHz)\");\n\t\telse\n\t\t\tsnprintf(header, sizeof(header), \"low-priority-max-%s-frequency(MHz)\",\n\t\t\t\tisst_get_trl_level_name(j));\n\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t fact_info->lp_ratios[j] * isst_get_disp_freq_multiplier());\n\t\tformat_and_print(outf, base_level + 2, header, value);\n\t}\n}\n\nvoid isst_ctdp_display_core_info(struct isst_id *id, FILE *outf, char *prefix,\n\t\t\t\t unsigned int val, char *str0, char *str1)\n{\n\tchar value[256];\n\tint level = print_package_info(id, outf);\n\n\tlevel++;\n\n\tif (str0 && !val)\n\t\tsnprintf(value, sizeof(value), \"%s\", str0);\n\telse if (str1 && val)\n\t\tsnprintf(value, sizeof(value), \"%s\", str1);\n\telse\n\t\tsnprintf(value, sizeof(value), \"%u\", val);\n\tformat_and_print(outf, level, prefix, value);\n\n\tformat_and_print(outf, 1, NULL, NULL);\n}\n\nvoid isst_ctdp_display_information(struct isst_id *id, FILE *outf, int tdp_level,\n\t\t\t\t   struct isst_pkg_ctdp *pkg_dev)\n{\n\tchar header[256];\n\tchar value[512];\n\tstatic int level;\n\tint trl_max_levels = isst_get_trl_max_levels();\n\tint i;\n\n\tif (pkg_dev->processed)\n\t\tlevel = print_package_info(id, outf);\n\n\tfor (i = 0; i <= pkg_dev->levels; ++i) {\n\t\tstruct isst_pkg_ctdp_level_info *ctdp_level;\n\t\tint j, k;\n\n\t\tctdp_level = &pkg_dev->ctdp_level[i];\n\t\tif (!ctdp_level->processed)\n\t\t\tcontinue;\n\n\t\tsnprintf(header, sizeof(header), \"perf-profile-level-%d\",\n\t\t\t ctdp_level->level);\n\t\tformat_and_print(outf, level + 1, header, NULL);\n\n\t\tif (id->cpu >= 0) {\n\t\t\tsnprintf(header, sizeof(header), \"cpu-count\");\n\t\t\tj = get_cpu_count(id);\n\t\t\tsnprintf(value, sizeof(value), \"%d\", j);\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\t\tj = CPU_COUNT_S(ctdp_level->core_cpumask_size,\n\t\t\t\t\tctdp_level->core_cpumask);\n\t\t\tif (j) {\n\t\t\t\tsnprintf(header, sizeof(header), \"enable-cpu-count\");\n\t\t\t\tsnprintf(value, sizeof(value), \"%d\", j);\n\t\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t\t}\n\n\t\t\tif (ctdp_level->core_cpumask_size) {\n\t\t\t\tsnprintf(header, sizeof(header), \"enable-cpu-mask\");\n\t\t\t\tprintcpumask(sizeof(value), value,\n\t\t\t\t\t     ctdp_level->core_cpumask_size,\n\t\t\t\t\t     ctdp_level->core_cpumask);\n\t\t\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\t\t\tsnprintf(header, sizeof(header), \"enable-cpu-list\");\n\t\t\t\tprintcpulist(sizeof(value), value,\n\t\t\t\t\t     ctdp_level->core_cpumask_size,\n\t\t\t\t\t     ctdp_level->core_cpumask);\n\t\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t\t}\n\t\t}\n\n\t\tsnprintf(header, sizeof(header), \"thermal-design-power-ratio\");\n\t\tsnprintf(value, sizeof(value), \"%d\", ctdp_level->tdp_ratio);\n\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\tsnprintf(header, sizeof(header), \"base-frequency(MHz)\");\n\t\tif (!ctdp_level->sse_p1)\n\t\t\tctdp_level->sse_p1 = ctdp_level->tdp_ratio;\n\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t  ctdp_level->sse_p1 * isst_get_disp_freq_multiplier());\n\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\tif (ctdp_level->avx2_p1) {\n\t\t\tsnprintf(header, sizeof(header), \"base-frequency-avx2(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->avx2_p1 * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->avx512_p1) {\n\t\t\tsnprintf(header, sizeof(header), \"base-frequency-avx512(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->avx512_p1 * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->uncore_pm) {\n\t\t\tsnprintf(header, sizeof(header), \"uncore-frequency-min(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->uncore_pm * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->uncore_p0) {\n\t\t\tsnprintf(header, sizeof(header), \"uncore-frequency-max(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->uncore_p0 * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->amx_p1) {\n\t\t\tsnprintf(header, sizeof(header), \"base-frequency-amx(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\tctdp_level->amx_p1 * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->uncore_p1) {\n\t\t\tsnprintf(header, sizeof(header), \"uncore-frequency-base(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->uncore_p1 * isst_get_disp_freq_multiplier());\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->mem_freq) {\n\t\t\tsnprintf(header, sizeof(header), \"max-mem-frequency(MHz)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\t ctdp_level->mem_freq);\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (api_version() > 1) {\n\t\t\tsnprintf(header, sizeof(header), \"cooling_type\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\",\n\t\t\t\tctdp_level->cooling_type);\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tsnprintf(header, sizeof(header),\n\t\t\t \"speed-select-turbo-freq\");\n\t\tif (ctdp_level->fact_support) {\n\t\t\tif (ctdp_level->fact_enabled)\n\t\t\t\tsnprintf(value, sizeof(value), \"enabled\");\n\t\t\telse\n\t\t\t\tsnprintf(value, sizeof(value), \"disabled\");\n\t\t} else\n\t\t\tsnprintf(value, sizeof(value), \"unsupported\");\n\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\tsnprintf(header, sizeof(header),\n\t\t\t \"speed-select-base-freq\");\n\t\tif (ctdp_level->pbf_support) {\n\t\t\tif (ctdp_level->pbf_enabled)\n\t\t\t\tsnprintf(value, sizeof(value), \"enabled\");\n\t\t\telse\n\t\t\t\tsnprintf(value, sizeof(value), \"disabled\");\n\t\t} else\n\t\t\tsnprintf(value, sizeof(value), \"unsupported\");\n\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\tsnprintf(header, sizeof(header),\n\t\t\t \"speed-select-core-power\");\n\t\tif (ctdp_level->sst_cp_support) {\n\t\t\tif (ctdp_level->sst_cp_enabled)\n\t\t\t\tsnprintf(value, sizeof(value), \"enabled\");\n\t\t\telse\n\t\t\t\tsnprintf(value, sizeof(value), \"disabled\");\n\t\t} else\n\t\t\tsnprintf(value, sizeof(value), \"unsupported\");\n\t\tformat_and_print(outf, level + 2, header, value);\n\n\t\tif (is_clx_n_platform()) {\n\t\t\tif (ctdp_level->pbf_support)\n\t\t\t\t_isst_pbf_display_information(id, outf,\n\t\t\t\t\t\t\t      tdp_level,\n\t\t\t\t\t\t\t  &ctdp_level->pbf_info,\n\t\t\t\t\t\t\t      level + 2);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (ctdp_level->pkg_tdp) {\n\t\t\tsnprintf(header, sizeof(header), \"thermal-design-power(W)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\", ctdp_level->pkg_tdp);\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tif (ctdp_level->t_proc_hot) {\n\t\t\tsnprintf(header, sizeof(header), \"tjunction-max(C)\");\n\t\t\tsnprintf(value, sizeof(value), \"%d\", ctdp_level->t_proc_hot);\n\t\t\tformat_and_print(outf, level + 2, header, value);\n\t\t}\n\n\t\tfor (k = 0; k < trl_max_levels; k++) {\n\t\t\tif (!ctdp_level->trl_ratios[k][0])\n\t\t\t\tcontinue;\n\n\t\t\tsnprintf(header, sizeof(header), \"turbo-ratio-limits-%s\", isst_get_trl_level_name(k));\n\t\t\tformat_and_print(outf, level + 2, header, NULL);\n\n\t\t\tfor (j = 0; j < 8; ++j) {\n\t\t\t\tsnprintf(header, sizeof(header), \"bucket-%d\", j);\n\t\t\t\tformat_and_print(outf, level + 3, header, NULL);\n\n\t\t\t\tsnprintf(header, sizeof(header), \"core-count\");\n\n\t\t\t\tsnprintf(value, sizeof(value), \"%llu\", (ctdp_level->trl_cores >> (j * 8)) & 0xff);\n\t\t\t\tformat_and_print(outf, level + 4, header, value);\n\n\t\t\t\tsnprintf(header, sizeof(header), \"max-turbo-frequency(MHz)\");\n\t\t\t\tsnprintf(value, sizeof(value), \"%d\", ctdp_level->trl_ratios[k][j] * isst_get_disp_freq_multiplier());\n\t\t\t\tformat_and_print(outf, level + 4, header, value);\n\t\t\t}\n\t\t}\n\n\t\tif (ctdp_level->pbf_support)\n\t\t\t_isst_pbf_display_information(id, outf, i,\n\t\t\t\t\t\t      &ctdp_level->pbf_info,\n\t\t\t\t\t\t      level + 2);\n\t\tif (ctdp_level->fact_support)\n\t\t\t_isst_fact_display_information(id, outf, i, 0xff, 0xff,\n\t\t\t\t\t\t       &ctdp_level->fact_info,\n\t\t\t\t\t\t       level + 2);\n\t}\n\n\tformat_and_print(outf, 1, NULL, NULL);\n}\n\nstatic int start;\nvoid isst_ctdp_display_information_start(FILE *outf)\n{\n\tlast_level = 0;\n\tformat_and_print(outf, 0, \"start\", NULL);\n\tstart = 1;\n}\n\nvoid isst_ctdp_display_information_end(FILE *outf)\n{\n\tformat_and_print(outf, 0, NULL, NULL);\n\tstart = 0;\n}\n\nvoid isst_pbf_display_information(struct isst_id *id, FILE *outf, int level,\n\t\t\t\t  struct isst_pbf_info *pbf_info)\n{\n\tint _level;\n\n\t_level = print_package_info(id, outf);\n\t_isst_pbf_display_information(id, outf, level, pbf_info, _level + 1);\n\tformat_and_print(outf, 1, NULL, NULL);\n}\n\nvoid isst_fact_display_information(struct isst_id *id, FILE *outf, int level,\n\t\t\t\t   int fact_bucket, int fact_avx,\n\t\t\t\t   struct isst_fact_info *fact_info)\n{\n\tint _level;\n\n\t_level = print_package_info(id, outf);\n\t_isst_fact_display_information(id, outf, level, fact_bucket, fact_avx,\n\t\t\t\t       fact_info, _level + 1);\n\tformat_and_print(outf, 1, NULL, NULL);\n}\n\nvoid isst_clos_display_information(struct isst_id *id, FILE *outf, int clos,\n\t\t\t\t   struct isst_clos_config *clos_config)\n{\n\tchar header[256];\n\tchar value[256];\n\tint level;\n\n\tlevel = print_package_info(id, outf);\n\n\tsnprintf(header, sizeof(header), \"core-power\");\n\tformat_and_print(outf, level + 1, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"clos\");\n\tsnprintf(value, sizeof(value), \"%d\", clos);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"epp\");\n\tsnprintf(value, sizeof(value), \"%d\", clos_config->epp);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"clos-proportional-priority\");\n\tsnprintf(value, sizeof(value), \"%d\", clos_config->clos_prop_prio);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"clos-min\");\n\tsnprintf(value, sizeof(value), \"%d MHz\", clos_config->clos_min * isst_get_disp_freq_multiplier());\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"clos-max\");\n\tif ((clos_config->clos_max * isst_get_disp_freq_multiplier()) == 25500)\n\t\tsnprintf(value, sizeof(value), \"Max Turbo frequency\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"%d MHz\", clos_config->clos_max * isst_get_disp_freq_multiplier());\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"clos-desired\");\n\tsnprintf(value, sizeof(value), \"%d MHz\", clos_config->clos_desired * isst_get_disp_freq_multiplier());\n\tformat_and_print(outf, level + 2, header, value);\n\n\tformat_and_print(outf, level, NULL, NULL);\n}\n\nvoid isst_clos_display_clos_information(struct isst_id *id, FILE *outf,\n\t\t\t\t\tint clos_enable, int type,\n\t\t\t\t\tint state, int cap)\n{\n\tchar header[256];\n\tchar value[256];\n\tint level;\n\n\tlevel = print_package_info(id, outf);\n\n\tsnprintf(header, sizeof(header), \"core-power\");\n\tformat_and_print(outf, level + 1, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"support-status\");\n\tif (cap)\n\t\tsnprintf(value, sizeof(value), \"supported\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"unsupported\");\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"enable-status\");\n\tif (state)\n\t\tsnprintf(value, sizeof(value), \"enabled\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"disabled\");\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"clos-enable-status\");\n\tif (clos_enable)\n\t\tsnprintf(value, sizeof(value), \"enabled\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"disabled\");\n\tformat_and_print(outf, level + 2, header, value);\n\n\tsnprintf(header, sizeof(header), \"priority-type\");\n\tif (type)\n\t\tsnprintf(value, sizeof(value), \"ordered\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"proportional\");\n\tformat_and_print(outf, level + 2, header, value);\n\n\tformat_and_print(outf, level, NULL, NULL);\n}\n\nvoid isst_clos_display_assoc_information(struct isst_id *id, FILE *outf, int clos)\n{\n\tchar header[256];\n\tchar value[256];\n\tint level;\n\n\tlevel = print_package_info(id, outf);\n\n\tsnprintf(header, sizeof(header), \"get-assoc\");\n\tformat_and_print(outf, level + 1, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"clos\");\n\tsnprintf(value, sizeof(value), \"%d\", clos);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tformat_and_print(outf, level, NULL, NULL);\n}\n\nvoid isst_display_result(struct isst_id *id, FILE *outf, char *feature, char *cmd,\n\t\t\t int result)\n{\n\tchar header[256];\n\tchar value[256];\n\tint level = 3;\n\n\tlevel = print_package_info(id, outf);\n\n\tsnprintf(header, sizeof(header), \"%s\", feature);\n\tformat_and_print(outf, level + 1, header, NULL);\n\tsnprintf(header, sizeof(header), \"%s\", cmd);\n\tif (!result)\n\t\tsnprintf(value, sizeof(value), \"success\");\n\telse\n\t\tsnprintf(value, sizeof(value), \"failed(error %d)\", result);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tformat_and_print(outf, level, NULL, NULL);\n}\n\nvoid isst_display_error_info_message(int error, char *msg, int arg_valid, int arg)\n{\n\tFILE *outf = get_output_file();\n\tstatic int error_index;\n\tchar header[256];\n\tchar value[256];\n\n\tif (!out_format_is_json()) {\n\t\tif (arg_valid)\n\t\t\tsnprintf(value, sizeof(value), \"%s %d\", msg, arg);\n\t\telse\n\t\t\tsnprintf(value, sizeof(value), \"%s\", msg);\n\n\t\tif (error)\n\t\t\tfprintf(outf, \"Error: %s\\n\", value);\n\t\telse\n\t\t\tfprintf(outf, \"Information: %s\\n\", value);\n\t\treturn;\n\t}\n\n\tif (!start)\n\t\tformat_and_print(outf, 0, \"start\", NULL);\n\n\tif (error)\n\t\tsnprintf(header, sizeof(header), \"Error%d\", error_index++);\n\telse\n\t\tsnprintf(header, sizeof(header), \"Information:%d\", error_index++);\n\tformat_and_print(outf, 1, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"message\");\n\tif (arg_valid)\n\t\tsnprintf(value, sizeof(value), \"%s %d\", msg, arg);\n\telse\n\t\tsnprintf(value, sizeof(value), \"%s\", msg);\n\n\tformat_and_print(outf, 2, header, value);\n\tformat_and_print(outf, 1, NULL, NULL);\n\tif (!start)\n\t\tformat_and_print(outf, 0, NULL, NULL);\n}\n\nvoid isst_trl_display_information(struct isst_id *id, FILE *outf, unsigned long long trl)\n{\n\tchar header[256];\n\tchar value[256];\n\tint level;\n\n\tlevel = print_package_info(id, outf);\n\n\tsnprintf(header, sizeof(header), \"get-trl\");\n\tformat_and_print(outf, level + 1, header, NULL);\n\n\tsnprintf(header, sizeof(header), \"trl\");\n\tsnprintf(value, sizeof(value), \"0x%llx\", trl);\n\tformat_and_print(outf, level + 2, header, value);\n\n\tformat_and_print(outf, level, NULL, NULL);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}