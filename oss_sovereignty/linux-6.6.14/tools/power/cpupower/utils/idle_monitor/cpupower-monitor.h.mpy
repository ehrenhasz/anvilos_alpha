{
  "module_name": "cpupower-monitor.h",
  "hash_id": "def5a53f3341aef1cf849e8149f07515639fb17c79f10e020ebd87c15a891e14",
  "original_prompt": "Ingested from linux-6.6.14/tools/power/cpupower/utils/idle_monitor/cpupower-monitor.h",
  "human_readable_source": " \n \n\n#ifndef __CPUIDLE_INFO_HW__\n#define __CPUIDLE_INFO_HW__\n\n#include <stdarg.h>\n#include <time.h>\n\n#include \"idle_monitor/idle_monitors.h\"\n\n#define MONITORS_MAX 20\n#define MONITOR_NAME_LEN 20\n\n \n#ifdef __powerpc__\n#define CSTATE_NAME_LEN 7\n#else\n#define CSTATE_NAME_LEN 5\n#endif\n#define CSTATE_DESC_LEN 60\n\nextern int cpu_count;\n\n \nenum power_range_e {\n\tRANGE_THREAD,\t \n\tRANGE_CORE,\t \n\tRANGE_PACKAGE,\t \n\tRANGE_MACHINE,\t \n\tRANGE_MAX };\n\ntypedef struct cstate {\n\tint  id;\n\tenum power_range_e range;\n\tchar name[CSTATE_NAME_LEN];\n\tchar desc[CSTATE_DESC_LEN];\n\n\t \n\tint (*get_count_percent)(unsigned int self_id, double *percent,\n\t\t\t\t unsigned int cpu);\n\tint (*get_count)(unsigned int self_id, unsigned long long *count,\n\t\t\t unsigned int cpu);\n} cstate_t;\n\nstruct cpuidle_monitor {\n\t \n\tchar name[MONITOR_NAME_LEN];\n\tint name_len;\n\tint hw_states_num;\n\tcstate_t *hw_states;\n\tint (*start) (void);\n\tint (*stop) (void);\n\tstruct cpuidle_monitor* (*do_register) (void);\n\tvoid (*unregister)(void);\n\tunsigned int overflow_s;\n\tstruct {\n\t\tunsigned int needs_root:1;\n\t\tunsigned int per_cpu_schedule:1;\n\t} flags;\n};\n\nextern long long timespec_diff_us(struct timespec start, struct timespec end);\n\n#define print_overflow_err(mes, ov)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\t\\\n\tfprintf(stderr, gettext(\"Measure took %u seconds, but registers could \"\t\\\n\t\t\t\t\"overflow at %u seconds, results \"\t\t\\\n\t\t\t\t\"could be inaccurate\\n\"), mes, ov);\t\t\\\n}\n\n\n \n#include <sched.h>\n#include <sys/types.h>\n#include <unistd.h>\nstatic inline int bind_cpu(int cpu)\n{\n\tcpu_set_t set;\n\n\tif (sched_getaffinity(getpid(), sizeof(set), &set) == 0) {\n\t\tCPU_ZERO(&set);\n\t\tCPU_SET(cpu, &set);\n\t\treturn sched_setaffinity(getpid(), sizeof(set), &set);\n\t}\n\treturn 1;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}