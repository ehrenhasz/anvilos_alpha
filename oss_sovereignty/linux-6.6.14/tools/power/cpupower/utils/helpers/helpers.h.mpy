{
  "module_name": "helpers.h",
  "hash_id": "9a9f7cc1b783406bab56dca6b4c7f2a247583205ccd3ed80d90bd54c033599bd",
  "original_prompt": "Ingested from linux-6.6.14/tools/power/cpupower/utils/helpers/helpers.h",
  "human_readable_source": " \n \n\n#ifndef __CPUPOWERUTILS_HELPERS__\n#define __CPUPOWERUTILS_HELPERS__\n\n#include <libintl.h>\n#include <locale.h>\n#include <stdbool.h>\n\n#include \"helpers/bitmask.h\"\n#include <cpupower.h>\n\n \n#ifdef NLS\n\n#define _(String) gettext(String)\n#ifndef gettext_noop\n#define gettext_noop(String) String\n#endif\n#define N_(String) gettext_noop(String)\n\n#else  \n\n#define _(String) String\n#define N_(String) String\n\n#endif\n \n\nextern int run_as_root;\nextern int base_cpu;\nextern struct bitmask *cpus_chosen;\n\n \n \n#ifdef DEBUG\nextern int be_verbose;\n\n#define dprint(fmt, ...) {\t\t\t\t\t\\\n\t\tif (be_verbose) {\t\t\t\t\\\n\t\t\tfprintf(stderr, \"%s: \" fmt,\t\t\\\n\t\t\t\t__func__, ##__VA_ARGS__);\t\\\n\t\t}\t\t\t\t\t\t\\\n\t}\n#else\nstatic inline void dprint(const char *fmt, ...) { }\n#endif\nextern int be_verbose;\n \n\n \nenum cpupower_cpu_vendor {X86_VENDOR_UNKNOWN = 0, X86_VENDOR_INTEL,\n\t\t\t  X86_VENDOR_AMD, X86_VENDOR_HYGON, X86_VENDOR_MAX};\n\n#define CPUPOWER_CAP_INV_TSC\t\t0x00000001\n#define CPUPOWER_CAP_APERF\t\t0x00000002\n#define CPUPOWER_CAP_AMD_CPB\t\t0x00000004\n#define CPUPOWER_CAP_PERF_BIAS\t\t0x00000008\n#define CPUPOWER_CAP_HAS_TURBO_RATIO\t0x00000010\n#define CPUPOWER_CAP_IS_SNB\t\t0x00000020\n#define CPUPOWER_CAP_INTEL_IDA\t\t0x00000040\n#define CPUPOWER_CAP_AMD_RDPRU\t\t0x00000080\n#define CPUPOWER_CAP_AMD_HW_PSTATE\t0x00000100\n#define CPUPOWER_CAP_AMD_PSTATEDEF\t0x00000200\n#define CPUPOWER_CAP_AMD_CPB_MSR\t0x00000400\n#define CPUPOWER_CAP_AMD_PSTATE\t\t0x00000800\n\n#define CPUPOWER_AMD_CPBDIS\t\t0x02000000\n\n#define MAX_HW_PSTATES 10\n\nstruct cpupower_cpu_info {\n\tenum cpupower_cpu_vendor vendor;\n\tunsigned int family;\n\tunsigned int model;\n\tunsigned int stepping;\n\t \n\tunsigned long long caps;\n};\n\n \nextern int get_cpu_info(struct cpupower_cpu_info *cpu_info);\nextern struct cpupower_cpu_info cpupower_cpu_info;\n\n\n \n\n \n#if defined(__i386__) || defined(__x86_64__)\n\n#include <pci/pci.h>\n\n \nextern int read_msr(int cpu, unsigned int idx, unsigned long long *val);\nextern int write_msr(int cpu, unsigned int idx, unsigned long long val);\n\nextern int cpupower_intel_set_perf_bias(unsigned int cpu, unsigned int val);\nextern int cpupower_intel_get_perf_bias(unsigned int cpu);\nextern unsigned long long msr_intel_get_turbo_ratio(unsigned int cpu);\n\nextern int cpupower_set_epp(unsigned int cpu, char *epp);\nextern int cpupower_set_amd_pstate_mode(char *mode);\nextern int cpupower_set_turbo_boost(int turbo_boost);\n\n \n\n \nextern int amd_pci_get_num_boost_states(int *active, int *states);\nextern struct pci_dev *pci_acc_init(struct pci_access **pacc, int domain,\n\t\t\t\t    int bus, int slot, int func, int vendor,\n\t\t\t\t    int dev);\nextern struct pci_dev *pci_slot_func_init(struct pci_access **pacc,\n\t\t\t\t\t      int slot, int func);\n\n \n\n \n\nextern int decode_pstates(unsigned int cpu, int boost_states,\n\t\t\t  unsigned long *pstates, int *no);\n\n \n\nextern int cpufreq_has_boost_support(unsigned int cpu, int *support,\n\t\t\t\t     int *active, int * states);\n\n \nbool cpupower_amd_pstate_enabled(void);\nvoid amd_pstate_boost_init(unsigned int cpu,\n\t\t\t   int *support, int *active);\nvoid amd_pstate_show_perf_and_freq(unsigned int cpu,\n\t\t\t\t   int no_rounding);\n\n \n\n \nunsigned int cpuid_eax(unsigned int op);\nunsigned int cpuid_ebx(unsigned int op);\nunsigned int cpuid_ecx(unsigned int op);\nunsigned int cpuid_edx(unsigned int op);\n\n \n \n#else\nstatic inline int decode_pstates(unsigned int cpu, int boost_states,\n\t\t\t\t unsigned long *pstates, int *no)\n{ return -1; };\n\nstatic inline int read_msr(int cpu, unsigned int idx, unsigned long long *val)\n{ return -1; };\nstatic inline int write_msr(int cpu, unsigned int idx, unsigned long long val)\n{ return -1; };\nstatic inline int cpupower_intel_set_perf_bias(unsigned int cpu, unsigned int val)\n{ return -1; };\nstatic inline int cpupower_intel_get_perf_bias(unsigned int cpu)\n{ return -1; };\nstatic inline unsigned long long msr_intel_get_turbo_ratio(unsigned int cpu)\n{ return 0; };\n\nstatic inline int cpupower_set_epp(unsigned int cpu, char *epp)\n{ return -1; };\nstatic inline int cpupower_set_amd_pstate_mode(char *mode)\n{ return -1; };\nstatic inline int cpupower_set_turbo_boost(int turbo_boost)\n{ return -1; };\n\n \n\nstatic inline int cpufreq_has_boost_support(unsigned int cpu, int *support,\n\t\t\t\t\t    int *active, int * states)\n{ return -1; }\n\nstatic inline bool cpupower_amd_pstate_enabled(void)\n{ return false; }\nstatic inline void amd_pstate_boost_init(unsigned int cpu, int *support,\n\t\t\t\t\t int *active)\n{}\nstatic inline void amd_pstate_show_perf_and_freq(unsigned int cpu,\n\t\t\t\t\t\t int no_rounding)\n{}\n\n \n\nstatic inline unsigned int cpuid_eax(unsigned int op) { return 0; };\nstatic inline unsigned int cpuid_ebx(unsigned int op) { return 0; };\nstatic inline unsigned int cpuid_ecx(unsigned int op) { return 0; };\nstatic inline unsigned int cpuid_edx(unsigned int op) { return 0; };\n#endif  \n\n \nextern struct bitmask *online_cpus;\nextern struct bitmask *offline_cpus;\n\nvoid get_cpustate(void);\nvoid print_online_cpus(void);\nvoid print_offline_cpus(void);\nvoid print_speed(unsigned long speed, int no_rounding);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}