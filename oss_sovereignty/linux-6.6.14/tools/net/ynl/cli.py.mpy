{
  "module_name": "cli.py",
  "hash_id": "e36ee351b6585188228df167c92a520d58945a134d9eb3e5f725882a8512b9cb",
  "original_prompt": "Ingested from linux-6.6.14/tools/net/ynl/cli.py",
  "human_readable_source": "#!/usr/bin/env python3\n# SPDX-License-Identifier: GPL-2.0 OR BSD-3-Clause\n\nimport argparse\nimport json\nimport pprint\nimport time\n\nfrom lib import YnlFamily, Netlink\n\n\ndef main():\n    parser = argparse.ArgumentParser(description='YNL CLI sample')\n    parser.add_argument('--spec', dest='spec', type=str, required=True)\n    parser.add_argument('--schema', dest='schema', type=str)\n    parser.add_argument('--no-schema', action='store_true')\n    parser.add_argument('--json', dest='json_text', type=str)\n    parser.add_argument('--do', dest='do', type=str)\n    parser.add_argument('--dump', dest='dump', type=str)\n    parser.add_argument('--sleep', dest='sleep', type=int)\n    parser.add_argument('--subscribe', dest='ntf', type=str)\n    parser.add_argument('--replace', dest='flags', action='append_const',\n                        const=Netlink.NLM_F_REPLACE)\n    parser.add_argument('--excl', dest='flags', action='append_const',\n                        const=Netlink.NLM_F_EXCL)\n    parser.add_argument('--create', dest='flags', action='append_const',\n                        const=Netlink.NLM_F_CREATE)\n    parser.add_argument('--append', dest='flags', action='append_const',\n                        const=Netlink.NLM_F_APPEND)\n    args = parser.parse_args()\n\n    if args.no_schema:\n        args.schema = ''\n\n    attrs = {}\n    if args.json_text:\n        attrs = json.loads(args.json_text)\n\n    ynl = YnlFamily(args.spec, args.schema)\n\n    if args.ntf:\n        ynl.ntf_subscribe(args.ntf)\n\n    if args.sleep:\n        time.sleep(args.sleep)\n\n    if args.do:\n        reply = ynl.do(args.do, attrs, args.flags)\n        pprint.PrettyPrinter().pprint(reply)\n    if args.dump:\n        reply = ynl.dump(args.dump, attrs)\n        pprint.PrettyPrinter().pprint(reply)\n\n    if args.ntf:\n        ynl.check_ntf()\n        pprint.PrettyPrinter().pprint(ynl.async_msg_queue)\n\n\nif __name__ == \"__main__\":\n    main()\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}