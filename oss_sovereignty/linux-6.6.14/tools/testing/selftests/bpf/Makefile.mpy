{
  "module_name": "Makefile",
  "hash_id": "32a0eb091a98d99355b373c1c5a0115ad6a405b8909dbbabd018830b095347f7",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\ninclude ../../../build/Build.include\ninclude ../../../scripts/Makefile.arch\ninclude ../../../scripts/Makefile.include\n\nCXX ?= $(CROSS_COMPILE)g++\n\nCURDIR := $(abspath .)\nTOOLSDIR := $(abspath ../../..)\nLIBDIR := $(TOOLSDIR)/lib\nBPFDIR := $(LIBDIR)/bpf\nTOOLSINCDIR := $(TOOLSDIR)/include\nBPFTOOLDIR := $(TOOLSDIR)/bpf/bpftool\nAPIDIR := $(TOOLSINCDIR)/uapi\nifneq ($(O),)\nGENDIR := $(O)/include/generated\nelse\nGENDIR := $(abspath ../../../../include/generated)\nendif\nGENHDR := $(GENDIR)/autoconf.h\nHOSTPKG_CONFIG := pkg-config\n\nifneq ($(wildcard $(GENHDR)),)\n  GENFLAGS := -DHAVE_GENHDR\nendif\n\nBPF_GCC\t\t?= $(shell command -v bpf-gcc;)\nSAN_CFLAGS\t?=\nSAN_LDFLAGS\t?= $(SAN_CFLAGS)\nCFLAGS += -g -O0 -rdynamic -Wall -Werror $(GENFLAGS) $(SAN_CFLAGS)\t\\\n\t  -I$(CURDIR) -I$(INCLUDE_DIR) -I$(GENDIR) -I$(LIBDIR)\t\t\\\n\t  -I$(TOOLSINCDIR) -I$(APIDIR) -I$(OUTPUT)\nLDFLAGS += $(SAN_LDFLAGS)\nLDLIBS += -lelf -lz -lrt -lpthread\n\nifneq ($(LLVM),)\n# Silence some warnings when compiled with clang\nCFLAGS += -Wno-unused-command-line-argument\nendif\n\n# Check whether bpf cpu=v4 is supported or not by clang\nifneq ($(shell $(CLANG) --target=bpf -mcpu=help 2>&1 | grep 'v4'),)\nCLANG_CPUV4 := 1\nendif\n\n# Order correspond to 'make run_tests' order\nTEST_GEN_PROGS = test_verifier test_tag test_maps test_lru_map test_lpm_map test_progs \\\n\ttest_dev_cgroup \\\n\ttest_sock test_sockmap get_cgroup_id_user \\\n\ttest_cgroup_storage \\\n\ttest_tcpnotify_user test_sysctl \\\n\ttest_progs-no_alu32\nTEST_INST_SUBDIRS := no_alu32\n\n# Also test bpf-gcc, if present\nifneq ($(BPF_GCC),)\nTEST_GEN_PROGS += test_progs-bpf_gcc\nTEST_INST_SUBDIRS += bpf_gcc\nendif\n\nifneq ($(CLANG_CPUV4),)\nTEST_GEN_PROGS += test_progs-cpuv4\nTEST_INST_SUBDIRS += cpuv4\nendif\n\nTEST_GEN_FILES = test_lwt_ip_encap.bpf.o test_tc_edt.bpf.o\nTEST_FILES = xsk_prereqs.sh $(wildcard progs/btf_dump_test_case_*.c)\n\n# Order correspond to 'make run_tests' order\nTEST_PROGS := test_kmod.sh \\\n\ttest_xdp_redirect.sh \\\n\ttest_xdp_redirect_multi.sh \\\n\ttest_xdp_meta.sh \\\n\ttest_xdp_veth.sh \\\n\ttest_offload.py \\\n\ttest_sock_addr.sh \\\n\ttest_tunnel.sh \\\n\ttest_lwt_seg6local.sh \\\n\ttest_lirc_mode2.sh \\\n\ttest_skb_cgroup_id.sh \\\n\ttest_flow_dissector.sh \\\n\ttest_xdp_vlan_mode_generic.sh \\\n\ttest_xdp_vlan_mode_native.sh \\\n\ttest_lwt_ip_encap.sh \\\n\ttest_tcp_check_syncookie.sh \\\n\ttest_tc_tunnel.sh \\\n\ttest_tc_edt.sh \\\n\ttest_xdping.sh \\\n\ttest_bpftool_build.sh \\\n\ttest_bpftool.sh \\\n\ttest_bpftool_metadata.sh \\\n\ttest_doc_build.sh \\\n\ttest_xsk.sh \\\n\ttest_xdp_features.sh\n\nTEST_PROGS_EXTENDED := with_addr.sh \\\n\twith_tunnels.sh ima_setup.sh verify_sig_setup.sh \\\n\ttest_xdp_vlan.sh test_bpftool.py\n\n# Compile but not part of 'make run_tests'\nTEST_GEN_PROGS_EXTENDED = test_sock_addr test_skb_cgroup_id_user \\\n\tflow_dissector_load test_flow_dissector test_tcp_check_syncookie_user \\\n\ttest_lirc_mode2_user xdping test_cpp runqslower bench bpf_testmod.ko \\\n\txskxceiver xdp_redirect_multi xdp_synproxy veristat xdp_hw_metadata \\\n\txdp_features\n\nTEST_GEN_FILES += liburandom_read.so urandom_read sign-file\n\n# Emit succinct information message describing current building step\n# $1 - generic step name (e.g., CC, LINK, etc);\n# $2 - optional \"flavor\" specifier; if provided, will be emitted as [flavor];\n# $3 - target (assumed to be file); only file name will be emitted;\n# $4 - optional extra arg, emitted as-is, if provided.\nifeq ($(V),1)\nQ =\nmsg =\nelse\nQ = @\nmsg = @printf '  %-8s%s %s%s\\n' \"$(1)\" \"$(if $(2), [$(2)])\" \"$(notdir $(3))\" \"$(if $(4), $(4))\";\nMAKEFLAGS += --no-print-directory\nsubmake_extras := feature_display=0\nendif\n\n# override lib.mk's default rules\nOVERRIDE_TARGETS := 1\noverride define CLEAN\n\t$(call msg,CLEAN)\n\t$(Q)$(RM) -r $(TEST_GEN_PROGS)\n\t$(Q)$(RM) -r $(TEST_GEN_PROGS_EXTENDED)\n\t$(Q)$(RM) -r $(TEST_GEN_FILES)\n\t$(Q)$(RM) -r $(EXTRA_CLEAN)\n\t$(Q)$(MAKE) -C bpf_testmod clean\n\t$(Q)$(MAKE) docs-clean\nendef\n\ninclude ../lib.mk\n\nSCRATCH_DIR := $(OUTPUT)/tools\nBUILD_DIR := $(SCRATCH_DIR)/build\nINCLUDE_DIR := $(SCRATCH_DIR)/include\nBPFOBJ := $(BUILD_DIR)/libbpf/libbpf.a\nifneq ($(CROSS_COMPILE),)\nHOST_BUILD_DIR\t\t:= $(BUILD_DIR)/host\nHOST_SCRATCH_DIR\t:= $(OUTPUT)/host-tools\nHOST_INCLUDE_DIR\t:= $(HOST_SCRATCH_DIR)/include\nelse\nHOST_BUILD_DIR\t\t:= $(BUILD_DIR)\nHOST_SCRATCH_DIR\t:= $(SCRATCH_DIR)\nHOST_INCLUDE_DIR\t:= $(INCLUDE_DIR)\nendif\nHOST_BPFOBJ := $(HOST_BUILD_DIR)/libbpf/libbpf.a\nRESOLVE_BTFIDS := $(HOST_BUILD_DIR)/resolve_btfids/resolve_btfids\nRUNQSLOWER_OUTPUT := $(BUILD_DIR)/runqslower/\n\nVMLINUX_BTF_PATHS ?= $(if $(O),$(O)/vmlinux)\t\t\t\t\\\n\t\t     $(if $(KBUILD_OUTPUT),$(KBUILD_OUTPUT)/vmlinux)\t\\\n\t\t     ../../../../vmlinux\t\t\t\t\\\n\t\t     /sys/kernel/btf/vmlinux\t\t\t\t\\\n\t\t     /boot/vmlinux-$(shell uname -r)\nVMLINUX_BTF ?= $(abspath $(firstword $(wildcard $(VMLINUX_BTF_PATHS))))\nifeq ($(VMLINUX_BTF),)\n$(error Cannot find a vmlinux for VMLINUX_BTF at any of \"$(VMLINUX_BTF_PATHS)\")\nendif\n\n# Define simple and short `make test_progs`, `make test_sysctl`, etc targets\n# to build individual tests.\n# NOTE: Semicolon at the end is critical to override lib.mk's default static\n# rule for binaries.\n$(notdir $(TEST_GEN_PROGS)\t\t\t\t\t\t\\\n\t $(TEST_GEN_PROGS_EXTENDED)\t\t\t\t\t\\\n\t $(TEST_CUSTOM_PROGS)): %: $(OUTPUT)/% ;\n\n# sort removes libbpf duplicates when not cross-building\nMAKE_DIRS := $(sort $(BUILD_DIR)/libbpf $(HOST_BUILD_DIR)/libbpf\t\\\n\t       $(BUILD_DIR)/bpftool $(HOST_BUILD_DIR)/bpftool\t\t\\\n\t       $(HOST_BUILD_DIR)/resolve_btfids\t\t\t\t\\\n\t       $(RUNQSLOWER_OUTPUT) $(INCLUDE_DIR))\n$(MAKE_DIRS):\n\t$(call msg,MKDIR,,$@)\n\t$(Q)mkdir -p $@\n\n$(OUTPUT)/%.o: %.c\n\t$(call msg,CC,,$@)\n\t$(Q)$(CC) $(CFLAGS) -c $(filter %.c,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/%:%.c\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(LINK.c) $^ $(LDLIBS) -o $@\n\n# LLVM's ld.lld doesn't support all the architectures, so use it only on x86\nifeq ($(SRCARCH),x86)\nLLD := lld\nelse\nLLD := ld\nendif\n\n# Filter out -static for liburandom_read.so and its dependent targets so that static builds\n# do not fail. Static builds leave urandom_read relying on system-wide shared libraries.\n$(OUTPUT)/liburandom_read.so: urandom_read_lib1.c urandom_read_lib2.c\n\t$(call msg,LIB,,$@)\n\t$(Q)$(CLANG) $(filter-out -static,$(CFLAGS) $(LDFLAGS))   \\\n\t\t     $^ $(filter-out -static,$(LDLIBS))\t     \\\n\t\t     -fuse-ld=$(LLD) -Wl,-znoseparate-code -Wl,--build-id=sha1 \\\n\t\t     -fPIC -shared -o $@\n\n$(OUTPUT)/urandom_read: urandom_read.c urandom_read_aux.c $(OUTPUT)/liburandom_read.so\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CLANG) $(filter-out -static,$(CFLAGS) $(LDFLAGS)) $(filter %.c,$^) \\\n\t\t     -lurandom_read $(filter-out -static,$(LDLIBS)) -L$(OUTPUT)  \\\n\t\t     -fuse-ld=$(LLD) -Wl,-znoseparate-code -Wl,--build-id=sha1 \\\n\t\t     -Wl,-rpath=. -o $@\n\n$(OUTPUT)/sign-file: ../../../../scripts/sign-file.c\n\t$(call msg,SIGN-FILE,,$@)\n\t$(Q)$(CC) $(shell $(HOSTPKG_CONFIG) --cflags libcrypto 2> /dev/null) \\\n\t\t  $< -o $@ \\\n\t\t  $(shell $(HOSTPKG_CONFIG) --libs libcrypto 2> /dev/null || echo -lcrypto)\n\n$(OUTPUT)/bpf_testmod.ko: $(VMLINUX_BTF) $(RESOLVE_BTFIDS) $(wildcard bpf_testmod/Makefile bpf_testmod/*.[ch])\n\t$(call msg,MOD,,$@)\n\t$(Q)$(RM) bpf_testmod/bpf_testmod.ko # force re-compilation\n\t$(Q)$(MAKE) $(submake_extras) RESOLVE_BTFIDS=$(RESOLVE_BTFIDS) -C bpf_testmod\n\t$(Q)cp bpf_testmod/bpf_testmod.ko $@\n\nDEFAULT_BPFTOOL := $(HOST_SCRATCH_DIR)/sbin/bpftool\nifneq ($(CROSS_COMPILE),)\nCROSS_BPFTOOL := $(SCRATCH_DIR)/sbin/bpftool\nTRUNNER_BPFTOOL := $(CROSS_BPFTOOL)\nUSE_BOOTSTRAP := \"\"\nelse\nTRUNNER_BPFTOOL := $(DEFAULT_BPFTOOL)\nUSE_BOOTSTRAP := \"bootstrap/\"\nendif\n\n$(OUTPUT)/runqslower: $(BPFOBJ) | $(DEFAULT_BPFTOOL) $(RUNQSLOWER_OUTPUT)\n\t$(Q)$(MAKE) $(submake_extras) -C $(TOOLSDIR)/bpf/runqslower\t       \\\n\t\t    OUTPUT=$(RUNQSLOWER_OUTPUT) VMLINUX_BTF=$(VMLINUX_BTF)     \\\n\t\t    BPFTOOL_OUTPUT=$(HOST_BUILD_DIR)/bpftool/\t\t       \\\n\t\t    BPFOBJ_OUTPUT=$(BUILD_DIR)/libbpf\t\t\t       \\\n\t\t    BPFOBJ=$(BPFOBJ) BPF_INCLUDE=$(INCLUDE_DIR)\t\t       \\\n\t\t    EXTRA_CFLAGS='-g -O0 $(SAN_CFLAGS)'\t\t\t       \\\n\t\t    EXTRA_LDFLAGS='$(SAN_LDFLAGS)' &&\t\t\t       \\\n\t\t    cp $(RUNQSLOWER_OUTPUT)runqslower $@\n\nTEST_GEN_PROGS_EXTENDED += $(TRUNNER_BPFTOOL)\n\n$(TEST_GEN_PROGS) $(TEST_GEN_PROGS_EXTENDED): $(BPFOBJ)\n\nTESTING_HELPERS\t:= $(OUTPUT)/testing_helpers.o\nCGROUP_HELPERS\t:= $(OUTPUT)/cgroup_helpers.o\nUNPRIV_HELPERS  := $(OUTPUT)/unpriv_helpers.o\nTRACE_HELPERS\t:= $(OUTPUT)/trace_helpers.o\nJSON_WRITER\t\t:= $(OUTPUT)/json_writer.o\nCAP_HELPERS\t:= $(OUTPUT)/cap_helpers.o\n\n$(OUTPUT)/test_dev_cgroup: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_skb_cgroup_id_user: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_sock: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_sock_addr: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_sockmap: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_tcpnotify_user: $(CGROUP_HELPERS) $(TESTING_HELPERS) $(TRACE_HELPERS)\n$(OUTPUT)/get_cgroup_id_user: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_cgroup_storage: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_sock_fields: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_sysctl: $(CGROUP_HELPERS) $(TESTING_HELPERS)\n$(OUTPUT)/test_tag: $(TESTING_HELPERS)\n$(OUTPUT)/test_lirc_mode2_user: $(TESTING_HELPERS)\n$(OUTPUT)/xdping: $(TESTING_HELPERS)\n$(OUTPUT)/flow_dissector_load: $(TESTING_HELPERS)\n$(OUTPUT)/test_maps: $(TESTING_HELPERS)\n$(OUTPUT)/test_verifier: $(TESTING_HELPERS) $(CAP_HELPERS) $(UNPRIV_HELPERS)\n$(OUTPUT)/xsk.o: $(BPFOBJ)\n\nBPFTOOL ?= $(DEFAULT_BPFTOOL)\n$(DEFAULT_BPFTOOL): $(wildcard $(BPFTOOLDIR)/*.[ch] $(BPFTOOLDIR)/Makefile)    \\\n\t\t    $(HOST_BPFOBJ) | $(HOST_BUILD_DIR)/bpftool\n\t$(Q)$(MAKE) $(submake_extras)  -C $(BPFTOOLDIR)\t\t\t       \\\n\t\t    ARCH= CROSS_COMPILE= CC=\"$(HOSTCC)\" LD=\"$(HOSTLD)\" \t       \\\n\t\t    EXTRA_CFLAGS='-g -O0'\t\t\t\t       \\\n\t\t    OUTPUT=$(HOST_BUILD_DIR)/bpftool/\t\t\t       \\\n\t\t    LIBBPF_OUTPUT=$(HOST_BUILD_DIR)/libbpf/\t\t       \\\n\t\t    LIBBPF_DESTDIR=$(HOST_SCRATCH_DIR)/\t\t\t       \\\n\t\t    prefix= DESTDIR=$(HOST_SCRATCH_DIR)/ install-bin\n\nifneq ($(CROSS_COMPILE),)\n$(CROSS_BPFTOOL): $(wildcard $(BPFTOOLDIR)/*.[ch] $(BPFTOOLDIR)/Makefile)\t\\\n\t\t    $(BPFOBJ) | $(BUILD_DIR)/bpftool\n\t$(Q)$(MAKE) $(submake_extras)  -C $(BPFTOOLDIR)\t\t\t\t\\\n\t\t    ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE)\t\t\t\\\n\t\t    EXTRA_CFLAGS='-g -O0'\t\t\t\t\t\\\n\t\t    OUTPUT=$(BUILD_DIR)/bpftool/\t\t\t\t\\\n\t\t    LIBBPF_OUTPUT=$(BUILD_DIR)/libbpf/\t\t\t\t\\\n\t\t    LIBBPF_DESTDIR=$(SCRATCH_DIR)/\t\t\t\t\\\n\t\t    prefix= DESTDIR=$(SCRATCH_DIR)/ install-bin\nendif\n\nall: docs\n\ndocs:\n\t$(Q)RST2MAN_OPTS=\"--exit-status=1\" $(MAKE) $(submake_extras)\t\\\n\t            -f Makefile.docs\t\t\t\t\t\\\n\t            prefix= OUTPUT=$(OUTPUT)/ DESTDIR=$(OUTPUT)/ $@\n\ndocs-clean:\n\t$(Q)$(MAKE) $(submake_extras)\t\t\t\t\t\\\n\t            -f Makefile.docs\t\t\t\t\t\\\n\t            prefix= OUTPUT=$(OUTPUT)/ DESTDIR=$(OUTPUT)/ $@\n\n$(BPFOBJ): $(wildcard $(BPFDIR)/*.[ch] $(BPFDIR)/Makefile)\t\t       \\\n\t   $(APIDIR)/linux/bpf.h\t\t\t\t\t       \\\n\t   | $(BUILD_DIR)/libbpf\n\t$(Q)$(MAKE) $(submake_extras) -C $(BPFDIR) OUTPUT=$(BUILD_DIR)/libbpf/ \\\n\t\t    EXTRA_CFLAGS='-g -O0 $(SAN_CFLAGS)'\t\t\t       \\\n\t\t    EXTRA_LDFLAGS='$(SAN_LDFLAGS)'\t\t\t       \\\n\t\t    DESTDIR=$(SCRATCH_DIR) prefix= all install_headers\n\nifneq ($(BPFOBJ),$(HOST_BPFOBJ))\n$(HOST_BPFOBJ): $(wildcard $(BPFDIR)/*.[ch] $(BPFDIR)/Makefile)\t\t       \\\n\t\t$(APIDIR)/linux/bpf.h\t\t\t\t\t       \\\n\t\t| $(HOST_BUILD_DIR)/libbpf\n\t$(Q)$(MAKE) $(submake_extras) -C $(BPFDIR)                             \\\n\t\t    EXTRA_CFLAGS='-g -O0' ARCH= CROSS_COMPILE=\t\t       \\\n\t\t    OUTPUT=$(HOST_BUILD_DIR)/libbpf/\t\t\t       \\\n\t\t    CC=\"$(HOSTCC)\" LD=\"$(HOSTLD)\"\t\t\t       \\\n\t\t    DESTDIR=$(HOST_SCRATCH_DIR)/ prefix= all install_headers\nendif\n\n$(INCLUDE_DIR)/vmlinux.h: $(VMLINUX_BTF) $(BPFTOOL) | $(INCLUDE_DIR)\nifeq ($(VMLINUX_H),)\n\t$(call msg,GEN,,$@)\n\t$(Q)$(BPFTOOL) btf dump file $(VMLINUX_BTF) format c > $@\nelse\n\t$(call msg,CP,,$@)\n\t$(Q)cp \"$(VMLINUX_H)\" $@\nendif\n\n$(RESOLVE_BTFIDS): $(HOST_BPFOBJ) | $(HOST_BUILD_DIR)/resolve_btfids\t\\\n\t\t       $(TOOLSDIR)/bpf/resolve_btfids/main.c\t\\\n\t\t       $(TOOLSDIR)/lib/rbtree.c\t\t\t\\\n\t\t       $(TOOLSDIR)/lib/zalloc.c\t\t\t\\\n\t\t       $(TOOLSDIR)/lib/string.c\t\t\t\\\n\t\t       $(TOOLSDIR)/lib/ctype.c\t\t\t\\\n\t\t       $(TOOLSDIR)/lib/str_error_r.c\n\t$(Q)$(MAKE) $(submake_extras) -C $(TOOLSDIR)/bpf/resolve_btfids\t\\\n\t\tCC=\"$(HOSTCC)\" LD=\"$(HOSTLD)\" AR=\"$(HOSTAR)\" \\\n\t\tLIBBPF_INCLUDE=$(HOST_INCLUDE_DIR) \\\n\t\tOUTPUT=$(HOST_BUILD_DIR)/resolve_btfids/ BPFOBJ=$(HOST_BPFOBJ)\n\n# Get Clang's default includes on this system, as opposed to those seen by\n# '--target=bpf'. This fixes \"missing\" files on some architectures/distros,\n# such as asm/byteorder.h, asm/socket.h, asm/sockios.h, sys/cdefs.h etc.\n#\n# Use '-idirafter': Don't interfere with include mechanics except where the\n# build would have failed anyways.\ndefine get_sys_includes\n$(shell $(1) $(2) -v -E - </dev/null 2>&1 \\\n\t| sed -n '/<...> search starts here:/,/End of search list./{ s| \\(/.*\\)|-idirafter \\1|p }') \\\n$(shell $(1) $(2) -dM -E - </dev/null | grep '__riscv_xlen ' | awk '{printf(\"-D__riscv_xlen=%d -D__BITS_PER_LONG=%d\", $$3, $$3)}') \\\n$(shell $(1) $(2) -dM -E - </dev/null | grep '__loongarch_grlen ' | awk '{printf(\"-D__BITS_PER_LONG=%d\", $$3)}')\nendef\n\n# Determine target endianness.\nIS_LITTLE_ENDIAN = $(shell $(CC) -dM -E - </dev/null | \\\n\t\t\tgrep 'define __BYTE_ORDER__ __ORDER_LITTLE_ENDIAN__')\nMENDIAN=$(if $(IS_LITTLE_ENDIAN),-mlittle-endian,-mbig-endian)\n\nifneq ($(CROSS_COMPILE),)\nCLANG_TARGET_ARCH = --target=$(notdir $(CROSS_COMPILE:%-=%))\nendif\n\nCLANG_SYS_INCLUDES = $(call get_sys_includes,$(CLANG),$(CLANG_TARGET_ARCH))\nBPF_CFLAGS = -g -Wall -Werror -D__TARGET_ARCH_$(SRCARCH) $(MENDIAN)\t\\\n\t     -I$(INCLUDE_DIR) -I$(CURDIR) -I$(APIDIR)\t\t\t\\\n\t     -I$(abspath $(OUTPUT)/../usr/include)\n\nCLANG_CFLAGS = $(CLANG_SYS_INCLUDES) \\\n\t       -Wno-compare-distinct-pointer-types\n\n$(OUTPUT)/test_l4lb_noinline.o: BPF_CFLAGS += -fno-inline\n$(OUTPUT)/test_xdp_noinline.o: BPF_CFLAGS += -fno-inline\n\n$(OUTPUT)/flow_dissector_load.o: flow_dissector_load.h\n$(OUTPUT)/cgroup_getset_retval_hooks.o: cgroup_getset_retval_hooks.h\n\n# Build BPF object using Clang\n# $1 - input .c file\n# $2 - output .o file\n# $3 - CFLAGS\ndefine CLANG_BPF_BUILD_RULE\n\t$(call msg,CLNG-BPF,$(TRUNNER_BINARY),$2)\n\t$(Q)$(CLANG) $3 -O2 --target=bpf -c $1 -mcpu=v3 -o $2\nendef\n# Similar to CLANG_BPF_BUILD_RULE, but with disabled alu32\ndefine CLANG_NOALU32_BPF_BUILD_RULE\n\t$(call msg,CLNG-BPF,$(TRUNNER_BINARY),$2)\n\t$(Q)$(CLANG) $3 -O2 --target=bpf -c $1 -mcpu=v2 -o $2\nendef\n# Similar to CLANG_BPF_BUILD_RULE, but with cpu-v4\ndefine CLANG_CPUV4_BPF_BUILD_RULE\n\t$(call msg,CLNG-BPF,$(TRUNNER_BINARY),$2)\n\t$(Q)$(CLANG) $3 -O2 --target=bpf -c $1 -mcpu=v4 -o $2\nendef\n# Build BPF object using GCC\ndefine GCC_BPF_BUILD_RULE\n\t$(call msg,GCC-BPF,$(TRUNNER_BINARY),$2)\n\t$(Q)$(BPF_GCC) $3 -O2 -c $1 -o $2\nendef\n\nSKEL_BLACKLIST := btf__% test_pinning_invalid.c test_sk_assign.c\n\nLINKED_SKELS := test_static_linked.skel.h linked_funcs.skel.h\t\t\\\n\t\tlinked_vars.skel.h linked_maps.skel.h \t\t\t\\\n\t\ttest_subskeleton.skel.h test_subskeleton_lib.skel.h\t\\\n\t\ttest_usdt.skel.h\n\nLSKELS := fentry_test.c fexit_test.c fexit_sleep.c atomics.c \t\t\\\n\ttrace_printk.c trace_vprintk.c map_ptr_kern.c \t\t\t\\\n\tcore_kern.c core_kern_overflow.c test_ringbuf.c\t\t\t\\\n\ttest_ringbuf_map_key.c\n\n# Generate both light skeleton and libbpf skeleton for these\nLSKELS_EXTRA := test_ksyms_module.c test_ksyms_weak.c kfunc_call_test.c \\\n\tkfunc_call_test_subprog.c\nSKEL_BLACKLIST += $$(LSKELS)\n\ntest_static_linked.skel.h-deps := test_static_linked1.bpf.o test_static_linked2.bpf.o\nlinked_funcs.skel.h-deps := linked_funcs1.bpf.o linked_funcs2.bpf.o\nlinked_vars.skel.h-deps := linked_vars1.bpf.o linked_vars2.bpf.o\nlinked_maps.skel.h-deps := linked_maps1.bpf.o linked_maps2.bpf.o\n# In the subskeleton case, we want the test_subskeleton_lib.subskel.h file\n# but that's created as a side-effect of the skel.h generation.\ntest_subskeleton.skel.h-deps := test_subskeleton_lib2.bpf.o test_subskeleton_lib.bpf.o test_subskeleton.bpf.o\ntest_subskeleton_lib.skel.h-deps := test_subskeleton_lib2.bpf.o test_subskeleton_lib.bpf.o\ntest_usdt.skel.h-deps := test_usdt.bpf.o test_usdt_multispec.bpf.o\nxsk_xdp_progs.skel.h-deps := xsk_xdp_progs.bpf.o\nxdp_hw_metadata.skel.h-deps := xdp_hw_metadata.bpf.o\nxdp_features.skel.h-deps := xdp_features.bpf.o\n\nLINKED_BPF_SRCS := $(patsubst %.bpf.o,%.c,$(foreach skel,$(LINKED_SKELS),$($(skel)-deps)))\n\n# Set up extra TRUNNER_XXX \"temporary\" variables in the environment (relies on\n# $eval()) and pass control to DEFINE_TEST_RUNNER_RULES.\n# Parameters:\n# $1 - test runner base binary name (e.g., test_progs)\n# $2 - test runner extra \"flavor\" (e.g., no_alu32, cpuv4, gcc-bpf, etc)\ndefine DEFINE_TEST_RUNNER\n\nTRUNNER_OUTPUT := $(OUTPUT)$(if $2,/)$2\nTRUNNER_BINARY := $1$(if $2,-)$2\nTRUNNER_TEST_OBJS := $$(patsubst %.c,$$(TRUNNER_OUTPUT)/%.test.o,\t\\\n\t\t\t\t $$(notdir $$(wildcard $(TRUNNER_TESTS_DIR)/*.c)))\nTRUNNER_EXTRA_OBJS := $$(patsubst %.c,$$(TRUNNER_OUTPUT)/%.o,\t\t\\\n\t\t\t\t $$(filter %.c,$(TRUNNER_EXTRA_SOURCES)))\nTRUNNER_EXTRA_HDRS := $$(filter %.h,$(TRUNNER_EXTRA_SOURCES))\nTRUNNER_TESTS_HDR := $(TRUNNER_TESTS_DIR)/tests.h\nTRUNNER_BPF_SRCS := $$(notdir $$(wildcard $(TRUNNER_BPF_PROGS_DIR)/*.c))\nTRUNNER_BPF_OBJS := $$(patsubst %.c,$$(TRUNNER_OUTPUT)/%.bpf.o, $$(TRUNNER_BPF_SRCS))\nTRUNNER_BPF_SKELS := $$(patsubst %.c,$$(TRUNNER_OUTPUT)/%.skel.h,\t\\\n\t\t\t\t $$(filter-out $(SKEL_BLACKLIST) $(LINKED_BPF_SRCS),\\\n\t\t\t\t\t       $$(TRUNNER_BPF_SRCS)))\nTRUNNER_BPF_LSKELS := $$(patsubst %.c,$$(TRUNNER_OUTPUT)/%.lskel.h, $$(LSKELS) $$(LSKELS_EXTRA))\nTRUNNER_BPF_SKELS_LINKED := $$(addprefix $$(TRUNNER_OUTPUT)/,$(LINKED_SKELS))\nTEST_GEN_FILES += $$(TRUNNER_BPF_OBJS)\n\n# Evaluate rules now with extra TRUNNER_XXX variables above already defined\n$$(eval $$(call DEFINE_TEST_RUNNER_RULES,$1,$2))\n\nendef\n\n# Using TRUNNER_XXX variables, provided by callers of DEFINE_TEST_RUNNER and\n# set up by DEFINE_TEST_RUNNER itself, create test runner build rules with:\n# $1 - test runner base binary name (e.g., test_progs)\n# $2 - test runner extra \"flavor\" (e.g., no_alu32, cpuv4, gcc-bpf, etc)\ndefine DEFINE_TEST_RUNNER_RULES\n\nifeq ($($(TRUNNER_OUTPUT)-dir),)\n$(TRUNNER_OUTPUT)-dir := y\n$(TRUNNER_OUTPUT):\n\t$$(call msg,MKDIR,,$$@)\n\t$(Q)mkdir -p $$@\nendif\n\n# ensure we set up BPF objects generation rule just once for a given\n# input/output directory combination\nifeq ($($(TRUNNER_BPF_PROGS_DIR)$(if $2,-)$2-bpfobjs),)\n$(TRUNNER_BPF_PROGS_DIR)$(if $2,-)$2-bpfobjs := y\n$(TRUNNER_BPF_OBJS): $(TRUNNER_OUTPUT)/%.bpf.o:\t\t\t\t\\\n\t\t     $(TRUNNER_BPF_PROGS_DIR)/%.c\t\t\t\\\n\t\t     $(TRUNNER_BPF_PROGS_DIR)/*.h\t\t\t\\\n\t\t     $$(INCLUDE_DIR)/vmlinux.h\t\t\t\t\\\n\t\t     $(wildcard $(BPFDIR)/bpf_*.h)\t\t\t\\\n\t\t     $(wildcard $(BPFDIR)/*.bpf.h)\t\t\t\\\n\t\t     | $(TRUNNER_OUTPUT) $$(BPFOBJ)\n\t$$(call $(TRUNNER_BPF_BUILD_RULE),$$<,$$@,\t\t\t\\\n\t\t\t\t\t  $(TRUNNER_BPF_CFLAGS))\n\n$(TRUNNER_BPF_SKELS): %.skel.h: %.bpf.o $(BPFTOOL) | $(TRUNNER_OUTPUT)\n\t$$(call msg,GEN-SKEL,$(TRUNNER_BINARY),$$@)\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.linked1.o) $$<\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.linked2.o) $$(<:.o=.linked1.o)\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.linked3.o) $$(<:.o=.linked2.o)\n\t$(Q)diff $$(<:.o=.linked2.o) $$(<:.o=.linked3.o)\n\t$(Q)$$(BPFTOOL) gen skeleton $$(<:.o=.linked3.o) name $$(notdir $$(<:.bpf.o=)) > $$@\n\t$(Q)$$(BPFTOOL) gen subskeleton $$(<:.o=.linked3.o) name $$(notdir $$(<:.bpf.o=)) > $$(@:.skel.h=.subskel.h)\n\n$(TRUNNER_BPF_LSKELS): %.lskel.h: %.bpf.o $(BPFTOOL) | $(TRUNNER_OUTPUT)\n\t$$(call msg,GEN-SKEL,$(TRUNNER_BINARY),$$@)\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.llinked1.o) $$<\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.llinked2.o) $$(<:.o=.llinked1.o)\n\t$(Q)$$(BPFTOOL) gen object $$(<:.o=.llinked3.o) $$(<:.o=.llinked2.o)\n\t$(Q)diff $$(<:.o=.llinked2.o) $$(<:.o=.llinked3.o)\n\t$(Q)$$(BPFTOOL) gen skeleton -L $$(<:.o=.llinked3.o) name $$(notdir $$(<:.bpf.o=_lskel)) > $$@\n\n$(TRUNNER_BPF_SKELS_LINKED): $(TRUNNER_BPF_OBJS) $(BPFTOOL) | $(TRUNNER_OUTPUT)\n\t$$(call msg,LINK-BPF,$(TRUNNER_BINARY),$$(@:.skel.h=.bpf.o))\n\t$(Q)$$(BPFTOOL) gen object $$(@:.skel.h=.linked1.o) $$(addprefix $(TRUNNER_OUTPUT)/,$$($$(@F)-deps))\n\t$(Q)$$(BPFTOOL) gen object $$(@:.skel.h=.linked2.o) $$(@:.skel.h=.linked1.o)\n\t$(Q)$$(BPFTOOL) gen object $$(@:.skel.h=.linked3.o) $$(@:.skel.h=.linked2.o)\n\t$(Q)diff $$(@:.skel.h=.linked2.o) $$(@:.skel.h=.linked3.o)\n\t$$(call msg,GEN-SKEL,$(TRUNNER_BINARY),$$@)\n\t$(Q)$$(BPFTOOL) gen skeleton $$(@:.skel.h=.linked3.o) name $$(notdir $$(@:.skel.h=)) > $$@\n\t$(Q)$$(BPFTOOL) gen subskeleton $$(@:.skel.h=.linked3.o) name $$(notdir $$(@:.skel.h=)) > $$(@:.skel.h=.subskel.h)\nendif\n\n# ensure we set up tests.h header generation rule just once\nifeq ($($(TRUNNER_TESTS_DIR)-tests-hdr),)\n$(TRUNNER_TESTS_DIR)-tests-hdr := y\n$(TRUNNER_TESTS_HDR): $(TRUNNER_TESTS_DIR)/*.c\n\t$$(call msg,TEST-HDR,$(TRUNNER_BINARY),$$@)\n\t$$(shell (echo '/* Generated header, do not edit */';\t\t\t\t\t\\\n\t\t  sed -n -E 's/^void (serial_)?test_([a-zA-Z0-9_]+)\\((void)?\\).*/DEFINE_TEST(\\2)/p'\t\\\n\t\t\t$(TRUNNER_TESTS_DIR)/*.c | sort ;\t\\\n\t\t ) > $$@)\nendif\n\n# compile individual test files\n# Note: we cd into output directory to ensure embedded BPF object is found\n$(TRUNNER_TEST_OBJS): $(TRUNNER_OUTPUT)/%.test.o:\t\t\t\\\n\t\t      $(TRUNNER_TESTS_DIR)/%.c\t\t\t\t\\\n\t\t      $(TRUNNER_EXTRA_HDRS)\t\t\t\t\\\n\t\t      $(TRUNNER_BPF_OBJS)\t\t\t\t\\\n\t\t      $(TRUNNER_BPF_SKELS)\t\t\t\t\\\n\t\t      $(TRUNNER_BPF_LSKELS)\t\t\t\t\\\n\t\t      $(TRUNNER_BPF_SKELS_LINKED)\t\t\t\\\n\t\t      $$(BPFOBJ) | $(TRUNNER_OUTPUT)\n\t$$(call msg,TEST-OBJ,$(TRUNNER_BINARY),$$@)\n\t$(Q)cd $$(@D) && $$(CC) -I. $$(CFLAGS) -c $(CURDIR)/$$< $$(LDLIBS) -o $$(@F)\n\n$(TRUNNER_EXTRA_OBJS): $(TRUNNER_OUTPUT)/%.o:\t\t\t\t\\\n\t\t       %.c\t\t\t\t\t\t\\\n\t\t       $(TRUNNER_EXTRA_HDRS)\t\t\t\t\\\n\t\t       $(TRUNNER_TESTS_HDR)\t\t\t\t\\\n\t\t       $$(BPFOBJ) | $(TRUNNER_OUTPUT)\n\t$$(call msg,EXT-OBJ,$(TRUNNER_BINARY),$$@)\n\t$(Q)$$(CC) $$(CFLAGS) -c $$< $$(LDLIBS) -o $$@\n\n# non-flavored in-srctree builds receive special treatment, in particular, we\n# do not need to copy extra resources (see e.g. test_btf_dump_case())\n$(TRUNNER_BINARY)-extras: $(TRUNNER_EXTRA_FILES) | $(TRUNNER_OUTPUT)\nifneq ($2:$(OUTPUT),:$(shell pwd))\n\t$$(call msg,EXT-COPY,$(TRUNNER_BINARY),$(TRUNNER_EXTRA_FILES))\n\t$(Q)rsync -aq $$^ $(TRUNNER_OUTPUT)/\nendif\n\n$(OUTPUT)/$(TRUNNER_BINARY): $(TRUNNER_TEST_OBJS)\t\t\t\\\n\t\t\t     $(TRUNNER_EXTRA_OBJS) $$(BPFOBJ)\t\t\\\n\t\t\t     $(RESOLVE_BTFIDS)\t\t\t\t\\\n\t\t\t     $(TRUNNER_BPFTOOL)\t\t\t\t\\\n\t\t\t     | $(TRUNNER_BINARY)-extras\n\t$$(call msg,BINARY,,$$@)\n\t$(Q)$$(CC) $$(CFLAGS) $$(filter %.a %.o,$$^) $$(LDLIBS) -o $$@\n\t$(Q)$(RESOLVE_BTFIDS) --btf $(TRUNNER_OUTPUT)/btf_data.bpf.o $$@\n\t$(Q)ln -sf $(if $2,..,.)/tools/build/bpftool/$(USE_BOOTSTRAP)bpftool \\\n\t\t   $(OUTPUT)/$(if $2,$2/)bpftool\n\nendef\n\n# Define test_progs test runner.\nTRUNNER_TESTS_DIR := prog_tests\nTRUNNER_BPF_PROGS_DIR := progs\nTRUNNER_EXTRA_SOURCES := test_progs.c cgroup_helpers.c trace_helpers.c\t\\\n\t\t\t network_helpers.c testing_helpers.c\t\t\\\n\t\t\t btf_helpers.c flow_dissector_load.h\t\t\\\n\t\t\t cap_helpers.c test_loader.c xsk.c disasm.c\t\\\n\t\t\t json_writer.c unpriv_helpers.c \t\t\\\n\t\t\t ip_check_defrag_frags.h\nTRUNNER_EXTRA_FILES := $(OUTPUT)/urandom_read $(OUTPUT)/bpf_testmod.ko\t\\\n\t\t       $(OUTPUT)/liburandom_read.so\t\t\t\\\n\t\t       $(OUTPUT)/xdp_synproxy\t\t\t\t\\\n\t\t       $(OUTPUT)/sign-file\t\t\t\t\\\n\t\t       $(OUTPUT)/uprobe_multi\t\t\t\t\\\n\t\t       ima_setup.sh \t\t\t\t\t\\\n\t\t       verify_sig_setup.sh\t\t\t\t\\\n\t\t       $(wildcard progs/btf_dump_test_case_*.c)\t\t\\\n\t\t       $(wildcard progs/*.bpf.o)\nTRUNNER_BPF_BUILD_RULE := CLANG_BPF_BUILD_RULE\nTRUNNER_BPF_CFLAGS := $(BPF_CFLAGS) $(CLANG_CFLAGS) -DENABLE_ATOMICS_TESTS\n$(eval $(call DEFINE_TEST_RUNNER,test_progs))\n\n# Define test_progs-no_alu32 test runner.\nTRUNNER_BPF_BUILD_RULE := CLANG_NOALU32_BPF_BUILD_RULE\nTRUNNER_BPF_CFLAGS := $(BPF_CFLAGS) $(CLANG_CFLAGS)\n$(eval $(call DEFINE_TEST_RUNNER,test_progs,no_alu32))\n\n# Define test_progs-cpuv4 test runner.\nifneq ($(CLANG_CPUV4),)\nTRUNNER_BPF_BUILD_RULE := CLANG_CPUV4_BPF_BUILD_RULE\nTRUNNER_BPF_CFLAGS := $(BPF_CFLAGS) $(CLANG_CFLAGS)\n$(eval $(call DEFINE_TEST_RUNNER,test_progs,cpuv4))\nendif\n\n# Define test_progs BPF-GCC-flavored test runner.\nifneq ($(BPF_GCC),)\nTRUNNER_BPF_BUILD_RULE := GCC_BPF_BUILD_RULE\nTRUNNER_BPF_CFLAGS := $(BPF_CFLAGS) $(call get_sys_includes,gcc,)\n$(eval $(call DEFINE_TEST_RUNNER,test_progs,bpf_gcc))\nendif\n\n# Define test_maps test runner.\nTRUNNER_TESTS_DIR := map_tests\nTRUNNER_BPF_PROGS_DIR := progs\nTRUNNER_EXTRA_SOURCES := test_maps.c\nTRUNNER_EXTRA_FILES :=\nTRUNNER_BPF_BUILD_RULE := $$(error no BPF objects should be built)\nTRUNNER_BPF_CFLAGS :=\n$(eval $(call DEFINE_TEST_RUNNER,test_maps))\n\n# Define test_verifier test runner.\n# It is much simpler than test_maps/test_progs and sufficiently different from\n# them (e.g., test.h is using completely pattern), that it's worth just\n# explicitly defining all the rules explicitly.\nverifier/tests.h: verifier/*.c\n\t$(shell ( cd verifier/; \\\n\t\t  echo '/* Generated header, do not edit */'; \\\n\t\t  echo '#ifdef FILL_ARRAY'; \\\n\t\t  ls *.c 2> /dev/null | sed -e 's@\\(.*\\)@#include \\\"\\1\\\"@'; \\\n\t\t  echo '#endif' \\\n\t\t) > verifier/tests.h)\n$(OUTPUT)/test_verifier: test_verifier.c verifier/tests.h $(BPFOBJ) | $(OUTPUT)\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(filter %.a %.o %.c,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/xskxceiver: xskxceiver.c xskxceiver.h $(OUTPUT)/xsk.o $(OUTPUT)/xsk_xdp_progs.skel.h $(BPFOBJ) | $(OUTPUT)\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(filter %.a %.o %.c,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/xdp_hw_metadata: xdp_hw_metadata.c $(OUTPUT)/network_helpers.o $(OUTPUT)/xsk.o $(OUTPUT)/xdp_hw_metadata.skel.h | $(OUTPUT)\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(filter %.a %.o %.c,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/xdp_features: xdp_features.c $(OUTPUT)/network_helpers.o $(OUTPUT)/xdp_features.skel.h | $(OUTPUT)\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(filter %.a %.o %.c,$^) $(LDLIBS) -o $@\n\n# Make sure we are able to include and link libbpf against c++.\n$(OUTPUT)/test_cpp: test_cpp.cpp $(OUTPUT)/test_core_extern.skel.h $(BPFOBJ)\n\t$(call msg,CXX,,$@)\n\t$(Q)$(CXX) $(CFLAGS) $(filter %.a %.o %.cpp,$^) $(LDLIBS) -o $@\n\n# Benchmark runner\n$(OUTPUT)/bench_%.o: benchs/bench_%.c bench.h $(BPFOBJ)\n\t$(call msg,CC,,$@)\n\t$(Q)$(CC) $(CFLAGS) -O2 -c $(filter %.c,$^) $(LDLIBS) -o $@\n$(OUTPUT)/bench_rename.o: $(OUTPUT)/test_overhead.skel.h\n$(OUTPUT)/bench_trigger.o: $(OUTPUT)/trigger_bench.skel.h\n$(OUTPUT)/bench_ringbufs.o: $(OUTPUT)/ringbuf_bench.skel.h \\\n\t\t\t    $(OUTPUT)/perfbuf_bench.skel.h\n$(OUTPUT)/bench_bloom_filter_map.o: $(OUTPUT)/bloom_filter_bench.skel.h\n$(OUTPUT)/bench_bpf_loop.o: $(OUTPUT)/bpf_loop_bench.skel.h\n$(OUTPUT)/bench_strncmp.o: $(OUTPUT)/strncmp_bench.skel.h\n$(OUTPUT)/bench_bpf_hashmap_full_update.o: $(OUTPUT)/bpf_hashmap_full_update_bench.skel.h\n$(OUTPUT)/bench_local_storage.o: $(OUTPUT)/local_storage_bench.skel.h\n$(OUTPUT)/bench_local_storage_rcu_tasks_trace.o: $(OUTPUT)/local_storage_rcu_tasks_trace_bench.skel.h\n$(OUTPUT)/bench_local_storage_create.o: $(OUTPUT)/bench_local_storage_create.skel.h\n$(OUTPUT)/bench_bpf_hashmap_lookup.o: $(OUTPUT)/bpf_hashmap_lookup.skel.h\n$(OUTPUT)/bench_htab_mem.o: $(OUTPUT)/htab_mem_bench.skel.h\n$(OUTPUT)/bench.o: bench.h testing_helpers.h $(BPFOBJ)\n$(OUTPUT)/bench: LDLIBS += -lm\n$(OUTPUT)/bench: $(OUTPUT)/bench.o \\\n\t\t $(TESTING_HELPERS) \\\n\t\t $(TRACE_HELPERS) \\\n\t\t $(CGROUP_HELPERS) \\\n\t\t $(OUTPUT)/bench_count.o \\\n\t\t $(OUTPUT)/bench_rename.o \\\n\t\t $(OUTPUT)/bench_trigger.o \\\n\t\t $(OUTPUT)/bench_ringbufs.o \\\n\t\t $(OUTPUT)/bench_bloom_filter_map.o \\\n\t\t $(OUTPUT)/bench_bpf_loop.o \\\n\t\t $(OUTPUT)/bench_strncmp.o \\\n\t\t $(OUTPUT)/bench_bpf_hashmap_full_update.o \\\n\t\t $(OUTPUT)/bench_local_storage.o \\\n\t\t $(OUTPUT)/bench_local_storage_rcu_tasks_trace.o \\\n\t\t $(OUTPUT)/bench_bpf_hashmap_lookup.o \\\n\t\t $(OUTPUT)/bench_local_storage_create.o \\\n\t\t $(OUTPUT)/bench_htab_mem.o \\\n\t\t #\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(LDFLAGS) $(filter %.a %.o,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/veristat.o: $(BPFOBJ)\n$(OUTPUT)/veristat: $(OUTPUT)/veristat.o\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(LDFLAGS) $(filter %.a %.o,$^) $(LDLIBS) -o $@\n\n$(OUTPUT)/uprobe_multi: uprobe_multi.c\n\t$(call msg,BINARY,,$@)\n\t$(Q)$(CC) $(CFLAGS) $(LDFLAGS) $^ $(LDLIBS) -o $@\n\nEXTRA_CLEAN := $(TEST_CUSTOM_PROGS) $(SCRATCH_DIR) $(HOST_SCRATCH_DIR)\t\\\n\tprog_tests/tests.h map_tests/tests.h verifier/tests.h\t\t\\\n\tfeature bpftool\t\t\t\t\t\t\t\\\n\t$(addprefix $(OUTPUT)/,*.o *.skel.h *.lskel.h *.subskel.h\t\\\n\t\t\t       no_alu32 cpuv4 bpf_gcc bpf_testmod.ko\t\\\n\t\t\t       liburandom_read.so)\n\n.PHONY: docs docs-clean\n\n# Delete partially updated (corrupted) files on error\n.DELETE_ON_ERROR:\n\nDEFAULT_INSTALL_RULE := $(INSTALL_RULE)\noverride define INSTALL_RULE\n\t$(DEFAULT_INSTALL_RULE)\n\t@for DIR in $(TEST_INST_SUBDIRS); do\t\t  \\\n\t\tmkdir -p $(INSTALL_PATH)/$$DIR;   \\\n\t\trsync -a $(OUTPUT)/$$DIR/*.bpf.o $(INSTALL_PATH)/$$DIR;\\\n\tdone\nendef\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}