{
  "module_name": "Makefile.docs",
  "hash_id": "366f5e07480e9fc5015cbde9996770a2f0da5aa061fca258a31a647323a35d7e",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/Makefile.docs",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\n\ninclude ../../../scripts/Makefile.include\ninclude ../../../scripts/utilities.mak\n\nINSTALL ?= install\nRM ?= rm -f\nRMDIR ?= rmdir --ignore-fail-on-non-empty\n\nifeq ($(V),1)\n  Q =\nelse\n  Q = @\nendif\n\nprefix ?= /usr/local\nmandir ?= $(prefix)/man\nman2dir = $(mandir)/man2\nman7dir = $(mandir)/man7\n\nSYSCALL_RST = bpf-syscall.rst\nMAN2_RST = $(SYSCALL_RST)\n\nHELPERS_RST = bpf-helpers.rst\nMAN7_RST = $(HELPERS_RST)\n\n_DOC_MAN2 = $(patsubst %.rst,%.2,$(MAN2_RST))\nDOC_MAN2 = $(addprefix $(OUTPUT),$(_DOC_MAN2))\n\n_DOC_MAN7 = $(patsubst %.rst,%.7,$(MAN7_RST))\nDOC_MAN7 = $(addprefix $(OUTPUT),$(_DOC_MAN7))\n\nDOCTARGETS := helpers syscall\n\ndocs: $(DOCTARGETS)\nsyscall: man2\nhelpers: man7\nman2: $(DOC_MAN2)\nman7: $(DOC_MAN7)\n\nRST2MAN_DEP := $(shell command -v rst2man 2>/dev/null)\n\n# Configure make rules for the man page bpf-$1.$2.\n# $1 - target for scripts/bpf_doc.py\n# $2 - man page section to generate the troff file\ndefine DOCS_RULES =\n$(OUTPUT)bpf-$1.rst: ../../../../include/uapi/linux/bpf.h\n\t$$(QUIET_GEN)../../../../scripts/bpf_doc.py $1 \\\n\t\t--filename $$< > $$@\n\n$(OUTPUT)%.$2: $(OUTPUT)%.rst\nifndef RST2MAN_DEP\n\t$$(error \"rst2man not found, but required to generate man pages\")\nendif\n\t$$(QUIET_GEN)rst2man --exit-status=1 $$< > $$@.tmp\n\t$$(QUIET_GEN)mv $$@.tmp $$@\n\ndocs-clean-$1:\n\t$$(call QUIET_CLEAN, eBPF_$1-manpage)\n\t$(Q)$(RM) $$(DOC_MAN$2) $(OUTPUT)bpf-$1.rst\n\ndocs-install-$1: docs\n\t$$(call QUIET_INSTALL, eBPF_$1-manpage)\n\t$(Q)$(INSTALL) -d -m 755 $(DESTDIR)$$(man$2dir)\n\t$(Q)$(INSTALL) -m 644 $$(DOC_MAN$2) $(DESTDIR)$$(man$2dir)\n\ndocs-uninstall-$1:\n\t$$(call QUIET_UNINST, eBPF_$1-manpage)\n\t$(Q)$(RM) $$(addprefix $(DESTDIR)$$(man$2dir)/,$$(_DOC_MAN$2))\n\t$(Q)$(RMDIR) $(DESTDIR)$$(man$2dir)\n\n.PHONY: $1 docs-clean-$1 docs-install-$1 docs-uninstall-$1\nendef\n\n# Create the make targets to generate manual pages by name and section\n$(eval $(call DOCS_RULES,helpers,7))\n$(eval $(call DOCS_RULES,syscall,2))\n\ndocs-clean: $(foreach doctarget,$(DOCTARGETS), docs-clean-$(doctarget))\ndocs-install: $(foreach doctarget,$(DOCTARGETS), docs-install-$(doctarget))\ndocs-uninstall: $(foreach doctarget,$(DOCTARGETS), docs-uninstall-$(doctarget))\n\n.PHONY: docs docs-clean docs-install docs-uninstall man2 man7\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}